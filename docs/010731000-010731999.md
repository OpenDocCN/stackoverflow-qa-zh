# StackOverflow 问答 10731000-10731999

# android - 如何在android中实现电子邮件应用程序

> ID：10731002
> 
> 赞同：-2
> 
> 时间：2012-05-24T04:07:39.790
> 
> 标签：android, email

我想实现具有收件箱、撰写、草稿等所有选项的电子邮件应用程序。我什至不知道如何开始。我知道如何从我们的应用程序发送邮件。

但它正在与现有的邮件同步，如 gmail、hotmail。任何人都可以告诉我任何参考链接，任何想法。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-24T04:31:33.807

查看[K9mail](http://code.google.com/p/k9mail/) l.. 的来源，避免重新发明轮子。

# python - 为什么 django-voting 模板标签不起作用？

> ID：10731006
> 
> 赞同：0
> 
> 时间：2012-05-24T04:07:59.667
> 
> 标签：python, django, django-templates, django-voting

我已经安装了[在这里找到](http://code.google.com/p/django-voting/)的 Django-voting 应用程序，但我无法让模板标签工作。例如，从我读过的内容来看，只需运行

```
{% load voting_tags %}
{% score_for_object object_name as score %} 
```

应该工作，但它与一个简单的错误`Invalid block tag: 'score_for_object'`。

我已经下载了该应用程序并运行 setup.py 并通过在 Django Python shell 中投票来验证它是否已安装。我还在已安装应用程序列表中添加了“投票”，并将“投票”文件夹移动到我的项目中。我还尝试`"voting.templatetags.voting_tags",`在 settings.py 中添加到我的模板上下文处理器列表中。

我错过了什么吗？[根据自述](http://code.google.com/p/django-voting/source/browse/trunk/docs/overview.txt#9)文件，只需确保模块存在于 Python 路径上（我相信使用 setup.py 提供的安装它），将其添加到 installed_apps 并运行`syncdb`. 任何帮助是极大的赞赏。

编辑：我试图`{% load voting_tags %}`在我的模板中使用该命令。请注意，投票模块中标签的位置是`voting/templatetags/voting_tags.py`。该应用程序现在给了我一个错误：

```
'voting_tags.py' is not a valid tag library: Template library voting_tags.py not 
found, tried django.templatetags.voting_tags.py, 
   django.contrib.staticfiles.templatetags.voting_tags.py,voting.templatetags.voting_tags.py,
django.contrib.admin.templatetags.voting_tags.py 
```

请注意，它实际上正在尝试正确的目录，即 vote.templatetags.voting_tags.py，但它显然没有被注册为有效。[它确实包含Django 文档](https://docs.djangoproject.com/en/dev/howto/custom-template-tags/#custom-template-tags-and-filters)中特定的所需代码，即：

```
from django import template
register = template.Library() 
```

尽管如此，我没有运气。为什么标签库可能不被视为有效的标签库？在我看来，它要么缺乏正确的代码来使其成为标签库（如上所示，它确实拥有），要么存在某种路径问题，`voting.templatetags.voting_tags.py`不知何故根本找不到文件。任何见解都会对我有很大帮助。

谢谢，

典范RG

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-24T05:01:24.523

模板标签不同于模板上下文处理器。你[加载了模板标签](https://docs.djangoproject.com/en/1.4/ref/templates/builtins/#load)吗？

```
{% load voting_tags %} 
```

请注意，这`{% load voting_tags.py %}`也是不正确的。

# d3.js - d3.js：如何创建“力导向图集群”

> ID：10731008
> 
> 赞同：5
> 
> 时间：2012-05-24T04:08:14.137
> 
> 标签：d3.js, force-layout

我一直在探索 d3.js 库，尤其是力导向图的创建。我仔细阅读了 Bostock 等人关于它的论文，并注意到我正在尝试创建的图形的精确类型，基本上是一个带有颜色编码区域围绕羽毛组的力导向图。

这是第 3 列第 2 行的插图，此处标记为“力导向图簇”：http: [//vis.stanford.edu/papers/d3](http://vis.stanford.edu/papers/d3)

这里的代码生成基本图： http: [//mbostock.github.com/d3/ex/force.html](http://mbostock.github.com/d3/ex/force.html)

我的问题是：动态生成区域多边形的代码是什么？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-25T22:34:40.163

您可以尝试将示例船体代码与力节点集成。

船体： [http ://bl.ocks.org/mbostock/4341699](http://bl.ocks.org/mbostock/4341699)

强制布局： [http ://bl.ocks.org/mbostock/1021841](http://bl.ocks.org/mbostock/1021841)

这是我在评论中提供的答案：

[http://bl.ocks.org/donaldh/2920551](http://bl.ocks.org/donaldh/2920551)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-24T06:23:22.970

请参阅 D3 存储库中的[force-cluster 示例](https://github.com/mbostock/d3/tree/master/examples/force/force-cluster.html)。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-24T19:55:52.823

如果您指的是在图中创建圆形节点的代码：

```
 var node = svg.selectAll("circle.node")
       .data(json.nodes)
     .enter().append("circle")
       .attr("class", "node")
       .attr("r", 5)
       .style("fill", function(d) { return color(d.group); })
       .call(force.drag); 
```

# iphone - 无法删除或停止 AVPlayer

> ID：10731010
> 
> 赞同：13
> 
> 时间：2012-05-24T04:08:18.887
> 
> 标签：iphone, ios, ios5, avplayer

我有一个 AVPlayer，每当单击链接时，我都会将其加载到新视图中。

```
-(void)createAndConfigurePlayerWithURL:(NSURL *)movieURL sourceType:(MPMovieSourceType)sourceType {
self.playerItem = [AVPlayerItem playerItemWithURL:movieURL];
customControlOverlay = [[AFDetailViewController alloc] initWithNibName:@"AFMovieScrubControl" bundle:nil];
backgroundWindow = [[UIApplication sharedApplication] keyWindow];
[customControlOverlay.view setFrame:backgroundWindow.frame];
[backgroundWindow addSubview:customControlOverlay.view];

playerLayer = [AVPlayerLayer playerLayerWithPlayer:[AVPlayer playerWithPlayerItem:playerItem]];
[playerLayer.player play];
playerLayer.frame = customControlOverlay.view.frame;
[customControlOverlay.view.layer addSublayer:playerLayer]; 
} 
```

上面的代码将 AVPlayer 添加到我的应用程序中并且工作正常。我的 customControlOverlay 笔尖中有一个开关，它应该删除视图并停止播放 AVplayer。

```
-(IBAction)toggleQuality:(id)sender {
if (qualityToggle.selectedSegmentIndex == 0) {
    NSLog(@"HD");
    [playerLayer.player pause];
    [self.view removeFromSuperview];

} else if (qualityToggle.selectedSegmentIndex == 1) {
    NSLog(@"SD");
}
} 
```

视图已正确删除，但播放器仍在后台播放。在测试了一下之后，玩家不会响应 toggleQuality 方法中的任何代码，但是我在那里的字符串作为检查被记录。

对我做错了什么有任何想法吗？

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2014-10-20T15:12:07.683

*我知道这是一个老问题，但有一天它可能会对某人有所帮助。*

由于**playerLayer**被添加为 a`sublayer`而不是 a`subview`它只需要从其超级层（而不是超级视图）中删除，并且播放器应设置为 nil，例如：

```
/* not sure if the pause/remove order would matter */
[playerLayer.player pause];
// uncomment if the player not needed anymore
// playerLayer.player = nil;
[playerLayer removeFromSuperlayer]; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2018-03-13T23:57:00.083

这是 Swift 中的答案。

就像@Paresh Navadiya 和@Yoga 在答案下方的评论中所说的那样。playerLayer 的玩家必须设置为 nil。`playerLayer?.player = nil`

在 viewWillDisappear 中添加代码：

```
override func viewWillDisappear(_ animated: Bool) {
        super.viewWillDisappear(animated)

        player?.pause() // 1\. pause the player to stop it
        playerLayer?.player = nil // 2\. set the playerLayer's player to nil
        playerLayer?.removeFromSuperlayer() // 3 remove the playerLayer from its superLayer
} 
```

# javascript - 根据 iframe 的内容动态调整 iframe 的大小

> ID：10731012
> 
> 赞同：0
> 
> 时间：2012-05-24T04:08:28.177
> 
> 标签：javascript, html, iframe

我想知道一个快速的 javascript 解决方案，可以根据其中的内容使 iframe 缩小/增大大小，这样就不需要滚动条了。

框架源会根据用户的输入进行更改，我希望 iframe 以此为基础调整其大小。

我拥有的 iframe 代码是：

```
<iframe id="edit_add_configuration" src="<?php echo site_url();?>">
        browser does not support this
</iframe> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-24T04:41:32.160

获取高度和宽度。

```
var height = document.getElementById("edit_add_configuration").contentWindow.document.body.scrollHeight;
var width = document.getElementById("edit_add_configuration").contentWindow.document.body.scrollWidth; 
```

调整 iframe 的大小。

```
document.getElementById("edit_add_configuration").style.height=height+"px";
document.getElementById("edit_add_configuration").style.width=width+"px"; 
```

# ruby-on-rails - 没有路线匹配 {:action=>"vote_up", :controller=>"posts"} thumbs_up 错误

> ID：10731014
> 
> 赞同：1
> 
> 时间：2012-05-24T04:08:53.330
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, voting, voting-system

我正在尝试将 thumbs_up gem 实现到我的应用程序中，即使我有用于 vote_up 操作的路线，我仍然会收到此错误

我的帖子控制器看起来像

```
 def vote_up
     begin
       current_user.vote_for(@post = Post.find(params[:id]))
       render :nothing => true, :status => 200
     rescue ActiveRecord::RecordInvalid
       render :nothing => true, :status => 404
     end
   end 
```

我的路线看起来像

```
 resources :posts do
     get :vote_up, :on => :member
     resources :comments
   end 
```

我不知道问题出在哪里，如果有人可以帮助我或将我指向一个教程来使用thumbs_up gem，那会很棒。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-24T04:35:07.943

问题是您请求`vote_up`的帖子没有 id。看看你的控制器：

`current_user.vote_for(@post = Post.find(params[:id]))`

`id`但是我在您的请求中没有看到任何字段。问题在于你的观点。

# android - 使用 Facebook SDK for Android 验证用户 Facebook 登录

> ID：10731018
> 
> 赞同：0
> 
> 时间：2012-05-24T04:09:53.830
> 
> 标签：android

我正在使用 Facebook SDK 在我的应用程序中进行 Facebook 登录。当我的应用程序启动时，我想检查用户是否已经登录到他的帐户。如果用户已经登录，我的应用程序将显示主界面。但是如果用户没有登录，我的应用程序应该显示登录对话框。我准备确定用户是否已经登录。我将如何检查它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-24T04:26:47.457

```
if(mFacebook.isSessionValid())
{
    // show main interface
}
else
{
    // show login dialog
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-24T04:35:17.703

您好，通过本网站[HACKBOOK](https://github.com/facebook/facebook-android-sdk/tree/master/examples)，您会找到 facebook 会话的示例等等。祝一切顺利

# asp.net - Asp.Net 中 OracleProvider 的成员资格和角色

> ID：10731022
> 
> 赞同：1
> 
> 时间：2012-05-24T04:10:37.170
> 
> 标签：asp.net, c#-4.0, membership-provider

我在 Asp.Net 中创建一个应用程序，我使用 Oracle 11g 作为后端工具。但是我怎样才能为内置的成员和角色获取 Oracle 的架构？

SQL SERVER 中声明的存储过程可以在 oracle 中工作吗？有什么工具吗？

谢谢

# open-session-in-view - 视图模式中每个请求的会话与 Open Sesson 之间的区别

> ID：10731030
> 
> 赞同：0
> 
> 时间：2012-05-24T04:11:40.957
> 
> 标签：open-session-in-view, session-per-request

**伙计们， Open Session in View**和**Session per request**模式有什么区别？我正在使用 Spring MVC 和 Hibernate 。我不是在这里谈论事务分界，因为每个请求的 Session 似乎是 1 session:1 tx。但是对于 OSIV，有 1 个会话，然后有多个事务（每个服务调用 1 个）。有人可以对此有所了解吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-26T13:12:52.160

OSIV 的定义特征实际上并不是多个事务，而是在呈现视图时会话保持打开状态。 [JBoss wiki 上的这个页面](https://community.jboss.org/wiki/OpenSessionInView)说明了这种设置（尽管从 web 层手动管理事务不是我的一杯茶……对于更预先打包的东西，请参阅[Spring 的 OpenSessionInViewFilter](http://static.springsource.org/spring/docs/3.0.x/javadoc-api/org/springframework/orm/hibernate3/support/OpenSessionInViewFilter.html)）。

有一个会话，一个事务。这仍然是 OSIV，因为包括渲染视图在内的所有工作都是在会话范围内完成的。请注意，即使您将所有服务方法标记为 @Transactional（或 XML 等效方法），它们仍将参与同一个事务，除非它们特别需要启动新事务。

所以 OSIV 可以是一种按请求会话的类型，它们有时可以互换使用。但我会说，如果您确保在视图呈现之前关闭单个会话，则每个请求实现都可能有一个不是 OSIV 的会话。

# google-maps - 谷歌地图定位

> ID：10731036
> 
> 赞同：0
> 
> 时间：2012-05-24T04:12:46.623
> 
> 标签：google-maps, google-maps-api-3, javascript

我制作了一个 Wordpress 插件，可以在其中使用 Google 地图添加酒店及其详细信息。在我使用的插件中，位置不在包含 div 的中心。它是这样显示[的](http://www.screencast.com/users/Bidyut/folders/Default/media/10451777-2b22-40af-aa3e-c16d27e8ecf6)。

我需要这样的[东西](http://www.screencast.com/users/Bidyut/folders/Default/media/cffa10f3-9fbb-4ee7-91cf-5e321de8a9b9)

我使用了以下[代码](http://ghsv2.viewthedemo.com/map.php?id=4)。我无法理解问题所在。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-24T12:15:37.353

当您动态调整地图 div 的大小或更改其可见性时，通常会出现这种效果。无论哪种情况，您都需要`rezize`在地图上触发该事件。

```
var mapdiv = document.getElementById('map_canvas');
mapdiv.style.display=block;
google.maps.event.trigger(map, 'resize'); 
```

# python - 按长度和按值对列表列表进行排序

> ID：10731038
> 
> 赞同：7
> 
> 时间：2012-05-24T04:12:49.257
> 
> 标签：python, list

我有一个列表列表：

```
>>> a = [['3D'], ['3D', '4D', '5D'], ['4C'], ['2C'],['4C', '4D'], ['4D'], ['5D'], \
... ['JC'], ['JC', 'JS'], ['JS']] 
```

您可能会注意到这是卡片值，即 C= 俱乐部等。J = 杰克等。我还有一个参考列表：

```
>>> confrom = {'3':3, '4':4, '5':5, '6':6, '7':7, '8':8, '9':9, \
... '0':10, 'J':11, 'Q':12, 'K':13, 'A':14, '2':15} 
```

当我在玩一个最大值为 2 的纸牌游戏时。按列表长度排序，我这样做：

```
>>> a = sorted(a, key = lambda x: len(x))
>>> a
... [['3D'], ['4C'], ['4D'], ['2C'], ['5D'], ['JC'], ['JS'], ['4C', '4D'], ['JC', 'JS'], ['3D', '4D', '5D']] 
```

我还需要根据它们的字典值对它们进行排序，所以我的结果列表将是：

```
>>> [['3D'], ['4C'], ['4D'], ['5D'], ['JC'], ['JS'], ['2C'], ['4C', '4D'], ['JC', 'JS'], ['3D', '4D', '5D']] 
```

目前这是一个非常简单的实现，但我希望能够以更复杂的方式对其进行排序。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-05-24T04:15:57.460

尝试这个：

```
sorted(a, key = lambda x: (len(x), [confrom[card[0]] for card in x])) 
```

[ideone](http://ideone.com/u9uJz)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-24T05:46:35.390

这可能是何时从 Python 中的基本数据结构转换为类的一个非常好的示例。

考虑：

```
values = ('2', '3', '4', '5', '6', '7', '8', '9', '10', 'J', 'Q', 'K', 'A')
suits = ('H', 'C', 'D', 'S')
sRep = {'H':'Hearts', 'C':'Clubs', 'D':'Diamonds', 'S':'Spades'}
ranks = {'2':15, '3':3, '4':4,'5':5,'6':6,'7':7,'8':8,
         '9':9, '0':10, '0':10, 'J':11, 'Q':12, 'K':13, 'A':14 }

class Card:
    def __init__(self, value, suit):
        value=str(value)
        self.value, self.suit = value.upper(), suit.upper()
        self.rSuit = sRep[suit.upper()]
        self.rank = ranks[value.upper()]

    def __repr__(self):
        return "%s of %s" % (self.value, self.rSuit)

    def __cmp__(self,other):
        if self.rank > other.rank: return 1
        if self.rank < other.rank: return -1    
        if self.value > other.value: return 1
        if self.value < other.value: return -1
        if self.rSuit > other.rSuit: return 1
        if self.rSuit < other.rSuit: return -1
        return 0 
```

尝试一些卡片：

```
c1=Card(2,'s')     
c2=Card(4,'d')

if c1>c2:
    print "A", c1, "beats a", c2
elif c2>c1:    
    print "A", c2, "beats a", c1
else:
    print "Same..." 
```

这打印：

```
A 2 of Spades beats a 4 of Diamonds 
```

由于我们在类中定义了排序顺序，因此复杂的排序很容易，基于不同游戏的排名也很容易。

以您的卡片列表为例：

```
a = [['3D'], ['3D', '4D', '5D'], ['4C'], ['2C'],['4C', '4D'], ['4D'], ['5D'], ['JC'], ['JC', 'JS'], ['JS']]  

print sorted([Card(c[0],c[1]) for e in a for c in e]) 
```

印刷：

```
[3 of Diamonds, 3 of Diamonds, 4 of Clubs, 4 of Clubs, 4 of Diamonds, 
 4 of Diamonds, 4 of Diamonds, 5 of Diamonds, 5 of Diamonds, J of Clubs, 
 J of Clubs, J of Spades, J of Spades, 2 of Clubs] 
```

再做一点工作，您就可以定义手以及什么手击败另一只手。

[您可以在经典 Python 书籍《如何像计算机科学家一样思考：使用Python](http://www.openbookproject.net/thinkcs/python/english2e/ch16.html)学习》中阅读有关此示例的更多信息。

# iphone - 如何在项目中实现 UIPageController

> ID：10731046
> 
> 赞同：0
> 
> 时间：2012-05-24T04:13:33.533
> 
> 标签：iphone, ios, ios5, uipageviewcontroller

我有一个包含 UITextView 的页面，其中包含一些文本，有一个更改章节的选项，我将更改章节选项放在按钮单击中。我的下一章和上一章的代码是

```
-(void) leftswipedetected:(UISwipeGestureRecognizer*)recognizer {
   delegatee.selectedChapter = [NSString stringWithFormat:@"%d",[delegatee.selectedChapter intValue] + 1];
    [delegatee reloadVerses];
    [self resetReadViewToVerse:1];
}
-(void) rightswipedetected:(UISwipeGestureRecognizer*)recognizer {

    if(![delegatee.selectedChapter isEqualToString:@"1"])
    {
        delegatee.selectedChapter = [NSString stringWithFormat:@"%d",[delegatee.selectedChapter intValue] - 1];
        [delegatee reloadVerses];
        [self resetReadViewToVerse:1]; 
    }   
} 
```

我的问题是如何`UIPageController`在 ios5 的帮助下实现本章导航？我只想看起来像在 iBook 中。有没有办法做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-24T04:19:02.920

iOS中没有什么`UIPageViewController`，它是 UIPageControl，它只是为您提供 UI 类型的 pagecontrol，您可以通过点击 UIPagecontrol 以编程方式更改章节，或者您可以将 UISwipeGesture 附加到它。

[UIPageControl 教程](http://www.edumobile.org/iphone/iphone-programming-tutorials/pagecontrol-example-in-iphone/)

[另一个](http://code.davidjanes.com/blog/2009/09/26/uipagecontrol-uiscrollview/)

# php - 如何将 PHP 函数的参数设置为变量作为默认值

> ID：10731047
> 
> 赞同：0
> 
> 时间：2012-05-24T04:13:38.057
> 
> 标签：php, function, variables

所以我希望能够根据变量是真还是假来打开或关闭某个功能。该函数仍会执行，但由于变量为假，它不会执行它的例程。

像这样的东西

```
$testTF = "T";

function Test($test=$testTF){
echo $test;
}

Test("Go"); 
```

当然这不会起作用，但我想知道是否有办法让它按预期工作。这个函数在脚本中随处可见，并且需要在某些地方，所以我不能将它们全部组合在一个 if 语句下，因为它会破坏它们。

我知道您可以在每次调用它时将该值作为标志传递，但我正在寻找一种方法使其假定该值作为默认值，除非另有说明。也许我在这里看的是全局变量，但有人告诉我这很危险。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-24T04:15:51.550

你能做到吗？

```
$testTF = "T";

function Test($test=NULL){
    if ($test ===NULL) {
        global $testTF;
        $test = $testTF;
    }
    echo $test;
}

Test("Go"); 
```

或者，如果您反对使用全局变量，您可以将默认值封装在一个函数中，如下所示：

```
function Test($test=NULL){
    if ($test ===NULL) {        
        $test = getDefault();
    }
    echo $test;
}

Test("Go");

function getDefault(){
    //pull default value from wherever
    $testDefault = 'T';
    return $testDefault;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-24T04:19:38.210

简短的回答是你想要做的方式是不可能的，但这也是： [PHP function with variable as default value for a parameter](https://stackoverflow.com/questions/5859376/php-function-with-variable-as-default-value-for-an-parameter)

有你要找的答案:)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-24T04:49:09.140

你也可以用闭包来做到这一点：

```
$testTF = 'T';

$Test = function ($test = null) use ($testTF){
    if ($test === null) $test = $testTF;
    echo $test;
};

$Test(); //T
$Test(null); //T
$Test('Go'); //Go 
```

# php - 在 PHP 中使用 URL 突出显示当前导航选项卡

> ID：10731052
> 
> 赞同：1
> 
> 时间：2012-05-24T04:14:26.417
> 
> 标签：php, html, css, navigation

使用 php url 显示当前导航选项卡，带和不带 .php 扩展名

```
 //php code
function curPageName() {
return substr($_SERVER["SCRIPT_NAME"],strrpos($_SERVER["SCRIPT_NAME"],"/")+1);
}
$Current=curPageName();;
?> 
```

//HTML,CSS

```
<li id=<?php if ("index.php"==$Current) echo "selected";else echo "";?>> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-24T05:08:57.260

相反，我使用这样的东西来获取当前页面作为导航栏中的活动菜单：

*   放入`$page = "page_name"`你的页面，例如 for `home page`, let it be`$page = "home"`
*   现在在一个通用文件中，您的导航栏的 HTML 所在的位置应如下所示：

> `<li <?php echo ($page == 'home') ? "class='active'" : ""; ?> title="Home Page"><a href="<?php echo BASE_URL; ?>">Home</a></li>`
> `<li <?php echo ($page == 'article') ? "class='active'" : ""; ?> title="Recent articles"><a href="<?php echo BASE_URL; ?>/articles">Articles</a></li>`
> `...`
> `...`

*   样式`active`类使用 CSS 来达到想要的效果。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-24T05:32:18.037

希望能帮助到你

```
<?php

    function curPageName() {
    return substr($_SERVER["SCRIPT_NAME"],strrpos($_SERVER["SCRIPT_NAME"],"/")+1);
    }
    $Current=curPageName();

   $nav_tabs=array('home','about','products','contacts');

   foreach($nav_tabs as $nav)
   {
          if($nav == $current)
         {
             echo"<li class='active' > <a href='$nav' > $nav </a></li>";
         }
         else
        {
             echo"<li  > <a href='$nav' > $nav </a></li>";
        }
   }
?> 
```

// 在 CSS 中定义 active 以突出显示选项卡

```
.active{
background-color:black;
font-white;
} 
```

# c# - 当控制器的字段实现 IDisposable 时，我如何处置我的控制器？

> ID：10731054
> 
> 赞同：2
> 
> 时间：2012-05-24T04:14:32.643
> 
> 标签：c#, asp.net-mvc, asp.net-mvc-3, model-view-controller, idisposable

我的控制器继承自一个包含实现 IDisposable 的字段的类。所以我的第一反应是写：

```
public abstract class EventRepositoryControllerBase : Controller
{
    protected EventRepository eventRepos { get; private set; }

    public EventRepositoryControllerBase(EventRepository eventRepos)
    {
        this.eventRepos = eventRepos;
    }

    public override void Dispose()
    {
        try
        {
            base.Dispose();
        }
        finally
        {
            eventRepos.Dispose();
        }
    }
} 
```

但这不会编译，因为 Controller 没有将 Dispose 方法标记为虚拟/覆盖。所以现在我想我被困住了。即使我将我的方法标记为新方法，框架是否不会保存类型为 Controller 的引用，因此我的方法将永远不会被调用？有关如何解决此问题的建议？

**更新**

所以我查看了 MVC3 源代码并看到了这个：

```
 public void Dispose() {
        Dispose(true /* disposing */);
        GC.SuppressFinalize(this);
    }

    protected virtual void Dispose(bool disposing) {
    } 
```

所以我想我会把我的代码放在第二种方法中。不确定这种行为是否是合同规定的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-24T04:32:30.573

ASP.NET MVC 中的控制器类已正确实现 IDisposable 接口。如需进一步参考，请在 MSDN 页面上查看[此页面](http://msdn.microsoft.com/en-us/library/ms244737.aspx)，该页面准确指定了这一点。

要插入 IDisposible 接口，您需要覆盖您想出的受保护的 dispose 方法，并将逻辑放置在那里“您自己的”类。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-24T15:15:45.533

如果`IDisposable.Dispose`使用非密封方法实现，则派生类型的代码将在基本类型清理代码之前和之后运行；因为`GC.SuppressFinalize`不应该在派生类型完成其清理之后调用（包括可能在基类型完成清理之后发生的任何部分），所以`GC.SuppressFinalize`在密封实现中进行，该实现又调用其签名为的虚拟方法`void Dispose(bool)`.

请注意，虽然从概念上讲，在密封包装器中调用虚拟方法是个好主意，但 Microsoft 的实现存在一些缺陷。最为显着地：

1.  因为它在基类中使用私有标志来指示对象是否已被释放，但在包装方法中不使用该标志，所以每个希望避免重复释放的派生类也必须有自己的释放标志；
2.  派生的 `Dispose` 调用可能会在三种情况下退出：
    1.  可以正常返回
    2.  它可能会抛出异常，但仍然实现了可以实现的一切，因此仍然应该抑制终结（例如，因为 `IDisposable` 日志记录对象包装了文件，并且文件数据在关闭时未成功写入）。一种丑陋的情况，但是将对象注册为最终确定无济于事。
    3.  在对象应该仍然有资格完成最终确定的情况下，它可能会引发异常。Microsoft 的 `Dispose` 模式没有提供区分后两种选择的方法。虽然在许多情况下，为基于终结的清理而注册的对象可能是无害的，但如果使用“Finalize”方法记录调用“Dispose”的失败，则可能会导致混淆。
3.  这意味着对象应该经常持有一些它们通过终结清理的资源和一些仅通过 Dispose 清理的资源，并且不通过终结清理任何东西的未密封类型应该为可能的派生类型提供准备。在实践中，具有终结器的类应避免持有对终结器不需要的任何对象的引用；需要终结的资源应该被封装到它们自己的类对象中，然后这些对象应该由不必担心终结它们的类持有。

早在 Microsoft 想出处理非托管资源的最佳方法之前，该`Dispose`模式就是一个很好的初步尝试。今天，我认为最好将虚拟方法的参数视为用于更改签名的虚拟参数，而不是有意义的东西（即使`True`从包装器链接虚拟方法时应该始终传递）。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-05-24T04:35:10.637

1）在您当前的类上实现可丢弃的接口并做您想做的事情 2）在您的基类中实现该接口，然后在此类中覆盖它 3）仅在您的基类中实现该接口并且不要覆盖另外，你的代码看起来很奇怪，你有一个抽象类，你提供了实现逻辑

# ios - iOS - 以编程方式切换 WiFi 网络 - 越狱

> ID：10731056
> 
> 赞同：1
> 
> 时间：2012-05-24T04:15:10.320
> 
> 标签：ios, wifi, jailbreak

我很清楚使用私有 API 访问网络信息会导致您的应用被拒绝。

但是，假设我有一个越狱设备，是否可以通过编程方式在两个 WiFi 网络之间切换？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-24T06:36:30.903

您将不得不使用[MobileApple80211](http://code.google.com/p/iphone-wireless/wiki/Apple80211Functions)框架。

对于如何使用这个框架，[stumbler](http://code.google.com/p/iphone-wireless/wiki/Stumbler)可能是最好的学习工具——源代码。

不过，它不是作为 XCode 项目构建的，因此请准备一些调整。

# php - PHP shebang 不合适？

> ID：10731061
> 
> 赞同：2
> 
> 时间：2012-05-24T04:15:57.307
> 
> 标签：php, shebang

我打算在 php 脚本中添加一个 shebang 行

```
#!/bin/env php 
```

但我环顾四周，人们似乎没有这样做。

*   [http://github.com/zurb/foundation/blob/master/marketing/about.php](http://github.com/zurb/foundation/blob/master/marketing/about.php)
*   [http://github.com/EllisLab/CodeIgniter/blob/develop/system/libraries/Cart.php](http://github.com/EllisLab/CodeIgniter/blob/develop/system/libraries/Cart.php)
*   [http://github.com/symfony/symfony/blob/master/src/Symfony/Component/Form/Form.php](http://github.com/symfony/symfony/blob/master/src/Symfony/Component/Form/Form.php)

shebang一个php文件是“不合适的”还是违反了某些规则？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-24T04:17:49.413

通常只有当 PHP 脚本打算从命令行运行时才会添加 hashbang，这很有用。在命令行上运行为 web 设计的 PHP 脚本通常没有用，因此人们不会向它们添加 hashbang。

另外，我相信在非 CLI PHP 环境中，PHP 会响应 hashbang。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-24T04:18:01.097

如果它是 UNIX shell 脚本，则 shebang 是合适的。如果是用于网页，则不是。

# c - 预写日志实现中的保证

> ID：10731063
> 
> 赞同：7
> 
> 时间：2012-05-24T04:15:57.743
> 
> 标签：c, algorithm, file-io

如果一个人要在 Linux/Unix 中发出一个由or`write(2)`分隔的顺序系列，或者是否保证第一个 write() 将在您的第二个 write() 之前提交到磁盘？下面的[SO 帖子](https://stackoverflow.com/questions/5132343/how-does-behave-linux-buffer-cache-when-an-application-is-crashing-down)似乎说不能给出这样的保证，因为涉及多个缓存层。对于保证一致性的数据库系统，这似乎很重要，因为在 WAL（预写日志）恢复中，您需要在实际更改数据之前将日志保存在磁盘上，以便在应用程序/系统发生故障时您可以恢复到上次已知的一致状态。这是如何在实际的数据库系统中确保/实现的？`fdatasync(2)``fsync(2)``sync(2)`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-24T04:35:58.840

系统`sync()`调用实际上没有任何帮助。它承诺安排写入磁盘操作，但仅此而已。

[`open()`](http://pubs.opengroup.org/onlinepubs/9699919799/functions/open.html)使用的常规技术是在磁盘文件的文件描述符时设置正确的选项： `O_DSYNC`, `O_RSYNC`, `O_SYNC`. 但是，[`fsync()`](http://pubs.opengroup.org/onlinepubs/9699919799/functions/fsync.html)和[`fdatasync()`](http://pubs.opengroup.org/onlinepubs/9699919799/functions/fdatasync.html)非常接近相同的效果。您还可以查看`O_DIRECTIO`通常支持的内容，尽管 POSIX 根本没有对其进行标准化。

最终，DBMS 依赖于操作系统来保证写入和同步到一个磁盘的数据是安全的。只要设备将始终返回 DBMS 上次写入的内容，即使它由于缓存而不在实际磁盘上（因为它已备份在非易失性缓存或类似的东西中），那么它并不重要. 另一方面，如果您的 NAS（网络附加存储）不能保证您最后写入的内容（并且被告知在磁盘上是安全的）在您阅读时返回，那么您的 DBMS 可能会受到影响，如果它必须这样做恢复。因此，您要谨慎选择存储 DBMS 的位置，确保存储工作正常。如果存储不能像假设的磁盘那样充分工作，您最终可能会丢失数据。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-10-27T03:56:53.587

是的，`fsync`在现代版本的内核中，既将内存（缓冲区缓存）刷新到磁盘，又将磁盘硬件缓冲区刷新到盘片。手册页说旧内核过去只做第一件事。

> 描述 fsync() 将文件描述符 fd 引用的文件的所有修改的内核数据（即修改的缓冲区缓存页面）传输（“刷新”）到磁盘设备（或其他永久存储设备）这样即使在系统崩溃或重新启动后，也可以检索所有更改的信息。 **这包括写入或刷新磁盘缓存（如果存在）。** 呼叫阻塞，直到设备报告传输已完成。它还刷新与文件关联的元数据信息（参见 stat(2)）。
> 
> 旧内核和较少使用的文件系统中的 fsync() 实现**不知道如何刷新磁盘缓存。** 在这些情况下，需要使用 hdparm(8) 或 sdparm(8) 禁用磁盘缓存以保证安全操作。

这是指应用程序可以请求什么。Fsync 是文件系统提供给应用程序的接口，文件系统本身在下面使用其他东西。文件系统使用屏障，或者更确切地说是显式刷新和 FUA 请求来提交日志。看看[LWN 的帖子。](https://lwn.net/Articles/400541/)

# php - 专用 Ubuntu 服务器上的 Crontab

> ID：10731064
> 
> 赞同：-1
> 
> 时间：2012-05-24T04:16:00.737
> 
> 标签：php, ubuntu, binary, crontab

我有一个 php 脚本，我想使用 crontab 定期执行。我已经使用以下代码在我自己的 Apache/Ubuntu 11.04 服务器上完成了它：

```
*/10 * * * * cd /var/cron/ && /usr/bin/php -q script.php && echo "Update Successful: $(date)" >> update.log 
```

但是在我的专用服务器（Ubuntu 10.04）上，无论我尝试什么，我都无法让 crontab 执行脚本。我无法使用“locate php | grep bin”找到 php 二进制文件，但我尝试参考 /etc/apache2/php.ini 和 php.ini-production.cli 文件以及在线推荐的无数其他方法.

我在两台服务器上的文件设置完全相同，并尝试在 crontab 之外执行 php 脚本，它工作正常。此外，如果我不尝试执行 php 脚本，而只是使用它将文本放入日志文件，那么 crontab 也可以工作。将不胜感激一些建议！:)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-24T04:22:27.070

你不能只用吗

```
*/10 * * * *  /usr/bin/php -q /path/to/file/script.php 
```

我加

```
> /dev/null 2>&1 
```

到最后剔除任何输出。

并将日志记录在 script.php

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-26T07:34:58.013

经过数小时的绝望后，我实际上想通了。首先，我必须：

```
sudo apt-get install php5-cli 
sudo updatedb 
```

最后删除 /etc/php5/cli/conf.d/mcrypt.ini 中导致折旧失败原因的哈希。现在它起作用了！谢谢你的时间，虽然达贡！

# android - 如何从 Android 中的日期选择器获取 DAY_OF_YEAR？

> ID：10731065
> 
> 赞同：0
> 
> 时间：2012-05-24T04:16:26.900
> 
> 标签：android, datepicker

我正在为我的工作构建一个简单的应用程序。到目前为止，我所拥有的是一个在一周中的每一天都在变化的布局，让我们知道那天我们必须做的补救任务。我最近尝试将 DatePicker 合并到其中。这在我使用 DatePicker 教程时有点用，并且可以拉出月份、月份和年份的日期没有问题。但我真正想要的是DAY_OF_YEAR。我有一个地狱般的时间试图弄清楚这一点，因为我找不到任何东西。

我需要这个的原因是，当用户选择不同的日子时，我希望应用程序能够向他展示当天以及一周中的哪一天即将完成的任务。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-24T07:20:45.920

If the math is more problematic than you want, then create a Calendar object and let Java do it for you. Call something like:

```
calendar.set(datePicker.getYear(), datePicker.getMonth(), datePicker.getDayOfMonth());
int day = calendar.get(DAY_OF_YEAR); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-24T06:55:40.523

那么如何计算一年中的哪一天呢？

你有一年，那应该告诉你二月有多少天。((YEAR%4==0)?29:28)

你有月份，所以你知道前几个月

你有一个月的一天。

# ruby-on-rails - 如何在 WEBrick 等 Rails 控制台中显示 SQL 语句？

> ID：10731070
> 
> 赞同：8
> 
> 时间：2012-05-24T04:17:02.767
> 
> 标签：ruby-on-rails

Rails WEBrick 显示任何 ActiveRecord 活动的原始 SQL 语句。如何在控制台中启用它？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-05-24T04:22:55.007

为此，您必须启用记录器，您可以按如下方式执行此操作。

打开导轨控制台：

```
ActiveRecord::Base.connection.instance_variable_set :@logger, Logger.new(STDOUT) 
```

看看这个链接：

[http://rubyquicktips.com/post/292826666/display-activerecord-generated-sql-queries-in-the](http://rubyquicktips.com/post/292826666/display-activerecord-generated-sql-queries-in-the)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-24T04:32:25.083

一种类似的方法来实现这一点，而无需深入`ActiveRecord`研究内部结构并使用实例变量，只需访问`config`Rails 为您提供的对象。把它放在里面`config/application.rb`：

```
config.logger = Logger.new(STDOUT) if($0 == 'irb' || $0 == 'script/rails') 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-24T04:31:41.427

*   前往您的`console.rb` 位置`/lib/rails/console.rb`

*   寻找 `ActiveRecord::Base.connection.instance_variable_set`

*   将其更改为以下

`ActiveRecord::Base.connection.instance_variable_set :@logger, Logger.new(STDOUT)`

# android - 2.1 中的 Android 警报对话框

> ID：10731071
> 
> 赞同：0
> 
> 时间：2012-05-24T04:17:10.783
> 
> 标签：android, android-layout, android-alertdialog

我如何自定义像[GTasks这样的警报对话框](https://play.google.com/store/apps/details?id=org.dayup.gtask)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-24T04:28:50.320

您可以创建自定义对话框并根据需要进行制作。是的，您可以根据需要更改对话框。您可以通过创建自定义对话框来做到这一点。Step1.在res中的String文件中创建样式

```
<style name="myQuitDialog" parent="android:Theme.Dialog"> 
   <item name="android:gravity">center_horizontal</item>

    </style> 
```

第2步。在布局中创建 xml 文件

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@+id/layout_quit"
              android:orientation="horizontal"
              android:layout_width="wrap_content"
              android:layout_height="wrap_content"
              android:background="@drawable/image which u want to show"
 > 
```

第三步。在src中编写自定义对话框的代码

```
 class Custom_Dialog extends Dialog {

        protected Custom_Dialog(Context context, int theme) {
            super(context, theme);
            // TODO Auto-generated constructor stub
        }

    }
private void show_alert() {
        final Custom_Dialog alertbox = new Custom_Dialog(this, R.style.myQuitDialog);
        Window window = alertbox.getWindow();
        window.setBackgroundDrawableResource(android.R.color.transparent);
        window.requestFeature(window.FEATURE_NO_TITLE);

        alertbox.show(); 
        alertbox.setCancelable(true);
        alertbox.setCanceledOnTouchOutside(true);

                 alertbox.dismiss();
            }

    } 
```

这就是你所需要的，如果你觉得它满足你就接受它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-24T07:00:41.127

检查这个，

[http://mgmblog.com/2010/06/10/arrayadapter-and-alertdialog-for-single-choice-items/](http://mgmblog.com/2010/06/10/arrayadapter-and-alertdialog-for-single-choice-items/)

# windows-runtime - 有没有人有使用 ADFS 2.0 作为 idP 对 Office 365 执行主动身份验证的示例，没有 WIF？

> ID：10731076
> 
> 赞同：0
> 
> 时间：2012-05-24T04:18:00.800
> 
> 标签：windows-runtime, saml, adfs2.0, office365

我需要一个 Metro Style 应用程序，它不能使用被动身份验证，也没有 WIF。

到目前为止，我已经设法从 ADFS 2.0 获得了 SAML 令牌。我现在需要将此令牌发送到 login.MicrosoftOnline.com，它会返回给我一个 SWT 令牌以提供给 [mysite].sharepoint.com，它会给我 cookie 以包含在 REST 请求中。

ADFS 2.0 和 login.MicrosoftOnline 都使用 WS-Trust。我在网上找到*了许多*示例，展示了如何将令牌请求发送到 MicrosoftOnline，但它们都依赖于发送用户名和密码。但是，在这种情况下，MicrosoftOnline 无权直接验证密码。我唯一的选择是给它 SAML 令牌。

使用被动身份验证时，我使用的用户名和密码可以正常工作，因此凭据不是问题。

样本可以是任何语言（克林贡语除外），但首选 .Net。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-12T17:30:38.113

有点晚了，直到今天我才看到你的问题。我确实设法使用此代码（使用 usr/pwd）在线向 Sharepoint 发送了一个 saml 令牌：http: [//sharepointwinrt.codeplex.com/](http://sharepointwinrt.codeplex.com/)

也许它会给你一个起点。

干杯，

娟妈

# android - 在游戏android中创建一个计数器

> ID：10731080
> 
> 赞同：0
> 
> 时间：2012-05-24T04:18:23.340
> 
> 标签：android, multithreading, view, canvas

我正在做一个游戏。我想创建一个计数器。它从 200 开始，然后 1s 减少了大约 0 。我的代码：

```
public class GameView extends View{

private int count = 200;
private TimeCountThread timeCountThread;

public GameView(Context context, AttributeSet attrs) {
    super(context, attrs);
    timeCountThread = new TimeCountThread();
            timeCountThread.start();
}
protected void onDraw(Canvas canvas) {
    Paint paint = new Paint();
    paint.setColor(Color.WHITE);
    canvas.drawText("Time :"+count, 10, 35, paint);
}

public class TimeCountThread extends Thread{
    public void run(){
        while(count > 0){
            try {
                sleep(1000);
                count--;
            } catch (InterruptedException e) {
                e.printStackTrace();
            }
        }
    }
}

public boolean onTouchEvent(MotionEvent event){
    if(event.getAction()==MotionEvent.ACTION_DOWN){
        int x1=(int) event.getX();
        int y1=(int) event.getY();
        Toast.makeText(getContext(), "x1 = "+x1+", y1 ="+y1,1).show();
    }
    return true;
}
} 
```

为什么柜台不活动。请帮帮我？谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-24T04:20:09.863

> 我想创建一个计数器。它从 200 开始，然后 1s 减少了大约 0

您可以通过[CountDownTimer来实现](http://developer.android.com/reference/android/os/CountDownTimer.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-24T04:26:28.270

尝试使用内部带有可运行对象的处理程序。如：

```
Handler handler=new Handler();
Runnable r=new Runnable() {
    public void run() {
        count--;
        if(count > 0) {
            handler.postDelayed(this, 1000);
        }              
    }
};
if(count > 0) {
    handler.postDelayed(r, 1000);
} 
```

你在哪里

```
timeCountThread = new TimeCountThread();
        timeCountThread.start(); 
```

是。另一个问题可能是您的计数是私人的，但我认为这不会有那么大的不同。

# knockout.js - 在 viewModel 加载/绑定之前显示 knockoutjs 模板

> ID：10731081
> 
> 赞同：2
> 
> 时间：2012-05-24T04:18:27.400
> 
> 标签：knockout.js

我正在使用 Knockoutjs 模板。该页面加载了模板 html 显示一秒钟，然后在加载和绑定 viewModel 后，它会正确显示。处理这个问题的最佳方法是什么？目前我将模板包装在一个设置为 display: none 的 div 中，然后在应用绑定后将其删除。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-24T09:25:32.760

将您的标记包装在脚本标签中：

```
<script type="text/html" id="viewModelTemplate">
... your markup ...
</script> 
```

然后有一个顶级元素：

```
<div data-bind="template: {name: 'viewModelTemplate'}"/> 
```

有帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-24T05:14:32.220

你什么时候绑定你的视图模型？您是从 AJAX 请求还是事件中执行此操作？如果数据在那里，页面底部的脚本标记应该在显示任何 HTML 之前运行并执行绑定。如果您需要在显示 HTML 后运行绑定，则需要使用您的方法。如果您使用的是 AJAX，我将构建视图模型，以便您绑定到空视图模型并具有`isLoaded`您在加载完成时设置的属性，然后您可以绑定到它：

```
<div data-bind="visible: isLoaded">...</div> 
```

# java - 我正在使用struts framwork，当我按下浏览器后退按钮注销后，它将返回最后打开的页面。如何发送到登录页面？

> ID：10731082
> 
> 赞同：2
> 
> 时间：2012-05-24T04:18:27.413
> 
> 标签：java, struts

我正在使用struts框架，当我按下浏览器后退按钮注销后，它将返回最后打开的页面。如何发送到登录页面？

其实我想要java而不是javascript的解决方案。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-24T04:21:35.730

我相信你必须有一个安全过滤器来拦截所有传入的请求。如果没有，您需要有一个来验证用户会话。如果失败，您可以转发到登录页面。

还要检查页面是否是从浏览器缓存中呈现的。如果是这样，您可以在 JSP 的标头中设置 no-cache。

```
<%
   response.setHeader( "Pragma", "no-cache" );
   response.setHeader( "Cache-Control", "no-cache" );
   response.setDateHeader( "Expires", 0 );
%> 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-05-24T04:21:42.563

如果您已`session.invalidate();`通过注销使会话无效 ( )，则只需在操作控制中将您的请求转发到您想要的 jsp 页面。一旦会话中断，如果您按下回它就不会转到我认为的同一页面。

# python - Python - 将参数从一个函数传递给嵌套函数调用

> ID：10731087
> 
> 赞同：2
> 
> 时间：2012-05-24T04:18:55.900
> 
> 标签：python

我想做与[这篇文章](https://stackoverflow.com/questions/7534425/passing-variadic-arguments-in-one-function-to-another-function-in-d)类似的事情，但使用 Python。

我想从 as 传递`function1(abc)`一个`function2`参数`type = (abc)`。

伪代码如下：

```
function1 (*args, abc):
    print xyz

    function2(type=abc) 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-05-24T04:25:54.743

根据您的伪代码：

```
def function2(type):
  print type

def function1(abc, *args):
  print "something"
  function2(type=abc)

>>> function1("blah", 1, 2, 3)
something
blah 
```

但是根据您的链接问题，也许您想传递可变参数：

```
def function2(type, *args):
  print type, args

def function1(abc, *args):
  print "something"
  function2(abc, *args)

>>> function1("blah", 1, 2, 3)
something
blah (1, 2, 3) 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-05-24T04:29:53.773

Python 是动态类型的。不过，类型转换是一种选择。

```
def foo(bar)
  foo_bar(str(bar)) 
```

[http://goo.gl/ixAY3](http://goo.gl/ixAY3)

# iphone - 使用 iOS 从 nib 动态加载子视图

> ID：10731089
> 
> 赞同：0
> 
> 时间：2012-05-24T04:19:04.277
> 
> 标签：iphone, objective-c, ios

我有一个底部有一些选项卡的应用程序（UITabViewController），大多数选项卡还包括顶部的工具栏。

用户需要登录才能访问其中一个选项卡——我们称之为“我的帐户”选项卡。登录后，他们将看到他们的个人资料信息，或者如果他们还没有设置，那么他们将看到一个对话框，解释填写个人资料的好处以及一个大按钮，上面写着“开始”。所有这三个屏幕的底部都有选项卡，顶部有一个工具栏。所以我制作的视图只占据屏幕的中间部分——因此它们需要作为子视图加载。本质上，我试图根据用户的当前状态显示三个不同的子视图之一，并且每当用户的状态发生变化时（例如他们登录时），我需要能够相互切换这些子视图。

我最初为这些子视图创建了三个单独的“层”，并且只是使用 setHidden 在它们之间切换，但这有一个很大的缺点，那就是初始化所有 3 个视图，而不管正在使用哪些视图。当我只是隐藏/取消隐藏它们时，我也不确定如何为过渡设置动画。

理想情况下，我想创建三个单独的 nib 文件（每个视图一个），它们共享相同的视图控制器（父控制器），并根据用户的状态动态加载它们。因此，如果用户未登录，我将加载“登录”笔尖，然后使用 addSubView 将其添加到屏幕。当用户登录时，我可以将其他笔尖之一加载为子视图，然后使用动画来切换子视图。

我遇到的问题是所有三个子视图都很简单，我只想将处理按钮点击的逻辑保留在顶级视图控制器（“MyAccountViewController”）中。例如，我希望能够在负责显示用户个人资料信息的同一视图控制器中处理“登录”按钮的单击事件。我不想为每个子视图创建一个单独的视图控制器。

这就是我目前正在做的事情：

```
- (void)showLoginView {
    UIView *loginView = [[[NSBundle mainBundle] loadNibNamed:@"Login" owner:self options:nil] objectAtIndex:0];
    [self.view addSubview:loginView];
} 
```

它只是在带有 EXC_BAD_ADDRESS 的“addSubview”行上崩溃。顺便说一句，它似乎内存不足，可能是由于无限循环或其他原因。我有一种感觉，我对这里的解决方案很不满意。

我正在尝试做的事情可能吗？

我也有兴趣了解处理登录屏幕的任何最佳实践。我在找出 iPhone 应用程序的最佳工作流程时遇到了很多麻烦。我习惯于编写网络应用程序（是的，登录是必要的——这个应用程序与一个网站相关联）。

谢谢！

编辑：我考虑为每个子视图笔尖编写一个单独的视图控制器。这些视图控制器将处理它们各自的 nib 中的按钮单击，然后使用 Objective-C 的委托功能将事件传播到父视图控制器，但如果可能的话，我想避免这些额外的代码。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-24T04:30:14.337

如果你还没有，我会仔细检查你在那个 nib 中的连接和 NSLog 索引 0 处的 var 类，以确保它是一个 UIView。

我的建议：报废笔尖。如果你不能在代码中做到这一点，为什么还要麻烦呢？我只使用 nib 作为布局工具，从不将它们与二进制文件打包在一起。只需创建 UIView 子类，即可节省时间、内存、代码和存储空间。

至于您的登录屏幕创意问题，当我遇到困难时，我会访问[Mobile Design Patterns Gallery](http://mobile-patterns.com/)寻求灵感。如果您想要更多... -我们应该说专家 - 意见，请访问 SO 的视觉表亲 ux.stackexchange.com

# visual-c++ - 如何在 Visual Studio 中启用本机 64 位编译器？

> ID：10731090
> 
> 赞同：1
> 
> 时间：2012-05-24T04:19:22.203
> 
> 标签：visual-c++, 64-bit

下面是一个最简单的 C++ 程序：

**x64test.cpp**

```
int main()
{
    char * p = new char[0xffffffffff]; 
} 
```

我的意图是分配一个大于 4G 的大缓冲区。在本机 64 位进程中，应该没问题；但 Visual Studio 2011 Beta 拒绝编译 x64test.cpp 并重新报告：“错误 C2148：数组的总大小不得超过 0x7fffffff 字节”。

我用谷歌搜索并在[http://blogs.msdn.com/b/windowssdk/archive/2007/09/08/updated-windows-sdk-visual-c-cross-compilers.aspx找到了一篇有用的文章](http://blogs.msdn.com/b/windowssdk/archive/2007/09/08/updated-windows-sdk-visual-c-cross-compilers.aspx)

根据文章，我应该使用原生 64 位编译器来编译 x64test.cpp。但是，Visual Studio 只能作为 32 位进程启动，因此 msbuild.exe 和 cl.exe 始终作为 32 位进程运行。

我曾尝试将解决方案平台配置为 x64，但没有效果。

我已经使用所谓的原生64位编译器通过以下步骤成功编译x64test.cpp：

1、以管理员身份启动cmd.exe；

2、cd C:\Program Files (x86)\Microsoft Visual Studio 11.0\VC\bin\amd64；

3、cl x64test.cpp

我的问题是：

有没有办法在 Visual Studio IDE 中启用本机 64 位编译器？

# neo4j - 在构建 neo4j GetAll 服务器扩展时遇到问题

> ID：10731095
> 
> 赞同：1
> 
> 时间：2012-05-24T04:20:00.580
> 
> 标签：neo4j, neo4j.py

我一直在尝试构建示例 GetAll neo4j 服务器扩展，但不幸的是我无法使其工作。我安装了 Windows 版本的 neo4j 并将其作为服务器运行。我还安装了 Python neo4jrestclient，我正在通过 Python 脚本访问 neo4j。以下工作正常： from neo4jrestclient.client import GraphDatabase gdb = GraphDatabase("http://localhost:7474/db/data/") print gdb.extensions

它给了我“CypherPlugin”和“GremlinPlugin”。我想构建示例 GetAll 服务器扩展，即 Java。我正在使用 Eclipse。我可以在文件夹“c:\neo4j_installation_root\neo4j-community-1.7\plugins\GetAll.jar”中创建 jar 文件，但是当我重新启动 neo4j 服务器并运行 neo4jrestclient 时，它不显示 GetAll 服务器扩展。我搜索了很多，但徒劳无功。我在 C++ 和 Python 方面有很多经验，但对 Java 很陌生。我将非常感谢能够构建 neo4j 服务器扩展的一些帮助。这对我对 neo4j 的评估至关重要。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-24T11:58:13.047

您确定有一个 META-INF/services 等列出了插件类，并且 jar 文件是使用中间目录创建的（这不是 Eclipse 导出设置中的默认值），所以类加载器可以看到目录？

[在http://docs.neo4j.org/chunked/snapshot/server-plugins.html](http://docs.neo4j.org/chunked/snapshot/server-plugins.html)查看提示

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-24T19:14:53.563

您可以使用 Bulbs ( [http://bulbflow.com](http://bulbflow.com) ) 完成所有操作，而无需构建扩展：

```
>>> from bulbs.neo4jserver import Graph
>>> g = Graph()
>>> g.vertices.get_all()
>>> g.edges.get_all() 
```

自定义模型的工作方式相同：

```
# people.py

from bulbs.model import Node, Relationship
from bulbs.property import String, Integer, DateTime
from bulbs.utils import current_datetime

class Person(Node):

    element_type = "person"

    name = String(nullable=False)
    age = Integer()

class Knows(Relationship):

    label = "knows"

    created = DateTime(default=current_datetime, nullable=False) 
```

然后在模型代理上调用 get_all：

```
>>> from people import Person, Knows
>>> from bulbs.neo4jserver import Graph

>>> g = Graph()
>>> g.add_proxy("people", Person)
>>> g.add_proxy("knows", Knows)

>>> james = g.people.create(name="James")
>>> julie = g.people.create(name="Julie")
>>> g.knows.create(james, julie)

>>> g.people.get_all()
>>> g.knows.get_all() 
```

# c# - 出现错误：并非所有代码路径都返回值

> ID：10731097
> 
> 赞同：4
> 
> 时间：2012-05-24T04:20:04.463
> 
> 标签：c#

我是 mvc C# 的新手并且被卡住了。请告知如何解决此问题。我在添加时遇到错误。当我将鼠标悬停在红色波浪线上时，它显示“并非所有代码路径都返回值”

```
 public ActionResult Add(ShapeInputModel dto, FormCollection collection)
    {

        var model = new GeoRegions();

        if (TryUpdateModel(model))
        {

            var destinationFolder = Server.MapPath("/App_Data/KML");
            var postedFile = dto.Shape;

            if (postedFile != null)
            {
                var fileName = Path.GetFileName(postedFile.FileName);
                var path = Path.Combine(destinationFolder, fileName);
                postedFile.SaveAs(path);

                //Save to Database
                Db.AddGeoRegions(model);
                return RedirectToAction("Index");

            }

            return View();

        }
    } 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-05-24T04:36:49.323

# 用这个 ：

```
public ActionResult Add(ShapeInputModel dto, FormCollection collection)
{
    var model = new GeoRegions();

    if (TryUpdateModel(model))
    {
        var destinationFolder = Server.MapPath("/App_Data/KML");
        var postedFile = dto.Shape;

        if (postedFile != null)
        {
            var fileName = Path.GetFileName(postedFile.FileName);
            var path = Path.Combine(destinationFolder, fileName);
            postedFile.SaveAs(path);

            //Save to Database
            Db.AddGeoRegions(model);
            return RedirectToAction("Index");
        }
        return View();

    }
    return null; // you can change the null to anything else also.
} 
```

发生错误是因为如果`TryUpdateModel(model) = false`. 所以添加线`return null`还是`return 'any other thing'`会解决问题的！

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-24T04:21:56.947

`return`如果从未输入“如果”，则没有。

我喜欢始终保持 if-else 的使用 [with return] 平衡，以便一目了然地看到返回值（并且所有路径都有返回值）：

```
if (TryUpdateModel(model))
{
    ...
    if (postedFile != null)
    {
        ...
        return RedirectToAction("Index");
    } else {
        return View();
    }
} else {
    return View(); // or null/whatever is appropriate
} 
```

当然，ReSharper 经常告诉我我有“无用”的 else 语句；-)

快乐编码。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-24T04:25:43.273

添加

```
 return null; 
```

在最后一行之前`}`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-24T05:07:21.837

您在“if()”条件内返回值。如果条件失败怎么办？该程序将不会返回值。因此，返回 if 条件之外的任何默认值，它可能处于 else 条件。

```
public ActionResult Add(ShapeInputModel dto, FormCollection collection)
{

    var model = new GeoRegions();

    if (TryUpdateModel(model))
    {
     ....
     ....
    }
    return default_value;//it may be in else condition also.
} 
```

试试看。如果您的问题得到解决，则标记​​为已回答。以便对其他人有用。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-24T04:22:25.320

如果`(TryUpdateModel(model))`返回，则不会返回任何内容`false`。也许你的意思是让你`return View();`在外面`if`？

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-05-24T04:22:25.543

错误与锡上所说的一样；有一个代码路径，函数将在其中完成但不会返回值。具有返回类型的函数必须始终返回值或抛出异常。

在您的情况下，如果`TryUpdateModel(model)`返回`false`，则您没有返回值。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-05-24T04:22:33.280

读错了！在方法执行的某个时刻，您必须返回一个值，或者抛出异常。（我认为在这种情况下返回 null 是有序的）

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2012-05-24T04:22:33.963

当然，您的初始设置使您的例程仅在条件为;`if (TryUpdateModel(model))`时返回一个值。`true`如果不是，则不会返回任何内容，这违反了方法签名。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2012-05-24T04:23:02.263

你有

```
if (TryUpdateModel(model))
{
    // lots of stuff

    return View();
} 
```

`TryUpdateModel`那么如果不是真的会返回什么？

当语句为假时，您的方法必须返回`ActionResult`偶数。`if`

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2012-05-24T04:24:52.140

只需快速查看您的代码，我就可以看到您在“if”语句块中有返回命令（return View（）。现在，如果“If”条件失败，则在其范围之外没有返回语句。最简单的方法是

```
 }

            return View();

        }
return null; // Depends upon your code though. you might want to return something else
} 
```

# putty - byobu 硬状态行在更新时滚动屏幕

> ID：10731099
> 
> 赞同：40
> 
> 时间：2012-05-24T04:20:12.890
> 
> 标签：putty, ubuntu-12.04

想要给 byobu 一个外观，作为某种屏幕“更新”。我开始

```
byobu 
```

而不是位于屏幕底部的状态行，每次更新时，它都会推送到前一行下方的另一行。不久，屏幕（腻子）充满了状态行回声。

我该如何阻止这个？

在win7上运行puttytray v0.62到ubuntu 12.04

* * *

## 回答 #1

> 赞同：77
> 
> 时间：2012-06-24T16:23:05.117

Putty 默认为 ISO-8859-1 的翻译编码，而 Ubuntu 发送 UTF-8 编码。

在加载、保存或删除存储的会话窗口中单击您的服务器。然后单击加载按钮。

接下来，在左侧的 Category 面板中单击：Window -> Translation

将“假定接收的数据在哪个字符集中”下的下拉菜单更改为 UTF-8。

完成此操作后，单击“类别”面板顶部的“会话”，然后单击“存储的会话”区域中的“保存”。

我并不是说这是正确的解决方法。我只是告诉你们是什么为我修复了它，而不必对服务器做任何疯狂的事情。

干杯!

* * *

## 回答 #2

> 赞同：45
> 
> 时间：2012-06-07T04:02:25.933

这似乎是默认 byobu 后端的问题。默认情况下，Ubuntu 12.04 中`tmux`的 byobu 用作后端。您可以通过运行`byobu-select-backend`并选择屏幕（选项 2）来更改此设置。

虽然不是解决 tmux 为什么在 PuTTY 会话上执行此操作的解决方案，但它解决了您的屏幕滚动问题。

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2012-08-09T12:50:00.750

UTF-8 设置可以创造奇迹。我通常将它与 Terminal => Keyboard => "Function keys and kepad" 从 "ESC[n~" 到 "Xterm R6" 一起设置，并将其保存为 Putty 中的默认配置。最后一个选项可以在 Byobu 中使用 F 键功能。没有它几乎没用。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-11-02T13:40:35.180

我在 debian 测试/SID 服务器上遇到了类似的问题，这是系统上几个分离的屏幕会话松动的问题。 `ps aufx |grep -i screen`应该找到孤立的屏幕会话。

我尝试`sudo byobu-select-backend`了 tmux 也是 Debian 测试的默认设置，我选择了“屏幕”，但是当我尝试`$ byobu`相同的滚动行为时，随之而来的是。所以我`$ byobu-select-backend`以普通用户的身份运行并再次选择了“屏幕”。

这一次，运行 byobu 向我展示了分离的屏幕会话，因此我可以选择它们并轻轻关闭它们。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2015-05-27T07:32:10.967

@ [phanku](https://stackoverflow.com/users/1478349/phanku)的回答，即终端的编码应该设置为 UTF-8，这使我能够解决在 Mac OS X [iterm](http://iterm.sourceforge.net/)的帮助下从 Mac OS X iterm 访问 byobu 会话（在 Ubuntu 12.04 上）时 OP 描述的相同问题Michael Hendrick 的帖子描述了[将 iTerm 设置为 UTF-8](http://blog.ndrix.com/2007/12/iterm-utf-8.html)：

1.  菜单：*查看*->*显示会话信息*
2.  *会话*选项卡：将*编码*从“Western (ASCII)”更改为“Unicode (UTF-8)”。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2016-02-29T12:36:17.007

对我来说，问题与如何设置兼容性有关：

在终端中，转到：

*   右键单击，选择“配置文件”>“**配置文件首选项**”
*   选择“**兼容性**”选项卡
*   将“模糊字符”更改为“**窄**”

或者

*   只需点击“**重置**”按钮

它对我有用......

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2016-08-14T05:11:29.847

我在 macOS 中使用 iTerm2 并遇到了同样的问题。编码已设置为 UTF-8，但没有帮助。这是对我有用的解决方案：

*   打开`Preferences`>`Profiles`
*   选择有问题的配置文件
*   转到`Text`右侧的选项卡
*   取消选中该`Treat ambiguous-width characters as double width`选项

完毕。

# html - 消失的 DIV 或 DIV 边框

> ID：10731102
> 
> 赞同：6
> 
> 时间：2012-05-24T04:20:36.010
> 
> 标签：html, css

我正在做一个轨道模拟，我让行星在轨道上运行。当您一直放大（单击 + 号）并选择海王星（右边的最后一个行星 - 可能需要滚动顶部行星栏）时，它的轨道（虚线）消失。如果你缩小 1，那么它的轨道有时是可见的。再次缩小或缩小，并且始终可见。有什么方法可以防止它消失吗？

[您可以在此处](http://jsfiddle.net/jzaun/Pe87m/)查看一个工作示例。

如果重要的话，我正在使用最新的 Mac 版 Chrome。我在最新的 Firefox for mac 上下载并尝试了这个，但问题不存在。我也在最新的 Safari 中尝试过，但它不存在，所以这一定是 Chrome 特定的问题，而不是 webkit 问题。

这可能是 Chrome 中的一个错误。我提交了[一份报告](https://code.google.com/p/chromium/issues/detail?id=129534)。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-04T16:39:50.467

如果你给 div 一个背景颜色，你会看到它是消失的边框。

作为一种解决方法，如果您将边框宽度更改为 3px（至少在我的 Chrome 19 (Linux) 上），边框将保持可见。也许您可以为最高缩放级别设置较粗的宽度。

# syntax - 某些 D 属性上的“@”前缀是什么意思？

> ID：10731109
> 
> 赞同：3
> 
> 时间：2012-05-24T04:21:44.430
> 
> 标签：syntax, d

D 编程语言至少有两个以“@”符号为前缀的属性：

*   `@disable`
*   `@property`

“@”应该传达什么样的含义？我似乎无法在文档中找到任何相关内容。

另外，为什么`__gshared`唯一的属性有两个前导下划线？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-24T05:04:32.760

它没有任何意义。

是的，这可能不是您希望听到的——但这就是他们在新闻组中所说的。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-24T21:10:56.397

在这一点上，这`@`并不意味着什么。所有的`@x`词都是功能属性。`@`几乎只是为了保存关键字。所以，一般来说，较新的属性`@`在它们身上有，而较旧的则没有（尽管前一段时间有一些洗牌，关于某些属性是否应该有一些争论`@`）。如果他们从头开始重做而不关心其他语言做了什么，那么你可能已经掌握`@`了所有的函数属性，但是这样的事情`@public`不可能发生，因为它只会让移植代码更加困难真正的好处。最终的结果是得到了什么`@`没有什么是相当随意的。您只需要记住哪些属性以哪些属性开头，`@`哪些不是，但这与必须学习新的关键字并没有太大的不同。只是这些带有前缀，`@`因此它们实际上不是关键字，并且不会减少语言中合法标识符的数量。

现在，D 社区中的许多人肯定希望`@`将来使用自定义属性，在这种情况下，`@`如果使用的名称不是语言内置的名称，而是用于所有那些内置在语言中的，它几乎相当于保存一个关键字。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-24T05:05:33.653

正如 Mehrdad 所示（请参阅评论中的链接），“@”没有特殊含义，它们只是出于历史原因。

至于你的另一个问题，`__gshared`不是唯一带有两个下划线的关键字，还有`__thread`and `__traits`。此命名约定通常用于表示内部数据结构，出于实际原因需要公开这些数据结构，但并非在所有情况下都“安全”使用（即，与其说是成熟的功能，不如说是一种破解）。我不确定 D 语言是否遵循这个约定，但是从文档中看到[这句话](http://dlang.org/attribute.html#gshared)我相信是这样的：

> __gshared 在安全模式下是不允许的。

我正在寻找更多关于`__thread`and的信息`__traits`（它们确实不是属性），但到目前为止发现的很少。

# java - java hashmap 值

> ID：10731115
> 
> 赞同：0
> 
> 时间：2012-05-24T04:22:25.573
> 
> 标签：java, hashmap, average

我的 hashmap 包含一个键，它是客户的名字，值是所有书籍的评分。我必须计算给定书名的平均评分。

如何访问哈希图中的所有值（评级）？有没有办法做到这一点？

这是我的一段代码：

```
/** 
 * calculate the average rating by all customers for a named book
 * only count positive or negative ratings, not 0 (unrated)
 * if the booktitle is not found or their are no ratings then
 * return NO_AVERAGE
 * @param booktitle String to be rated
 * @return double the average of all ratings for this book
 */
public double averageRating(String booktitle) 
{ 
    numberOfRatingsPerCustomer/total
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-24T04:26:42.060

您需要从 HashMap 中获取 keySet。然后遍历 keySet 并从 HashMap 中获取值。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-24T04:40:54.957

你的问题没有意义。

您不能拥有带有`customerName`to的地图`hisRatingOfBook`，并在其中搜索`bookTitle`。您需要采用以下 1 种方式之一：

`public double averageRating()`1）在类内创建方法`Book`，并保留在那里，作为字段，评级被映射`customerName`到`hisRatingOfBook`

2）使用你的方法：

```
public double averageRating(String booktitle) 
{ 
    numberOfRatingsPerCustomer/total
} 
```

但是**使您的地图更复杂**，这将保持不变`customer`，并且它`rating`（由书名+费率制成）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-03-24T15:11:19.827

在这里，您可以使用以下代码，它将帮助您找到评分**问题**

```
import java.util.*;

public class QueQue {

public static float getAverage(HashMap<String, ArrayList<Integer>> hm, String name) {
    ArrayList<Integer> scores;
    scores = hm.get(name);
    if (scores == null) {
        System.out.println("NOT found");
    }

    int sum = 0;
    for (int x : scores) {
        sum += x;
    }
    return (float) sum / scores.size();
}
public static void main(String[] args) {
    HashMap<String, ArrayList<Integer>> hm = new HashMap<>();
    hm.put("Peter", new ArrayList<>());
    hm.get("Peter").add(10);
    hm.get("Peter").add(10);
    hm.get("Peter").add(10);

    hm.put("Nancy", new ArrayList<>());
    hm.get("Nancy").add(7);
    hm.get("Nancy").add(8);
    hm.get("Nancy").add(8);

    hm.put("Lily", new ArrayList<>());
    hm.get("Lily").add(9);
    hm.get("Lily").add(9);
    hm.get("Lily").add(8);

    System.out.println("Find the average of the Peter");
    float num = getAverage(hm, "Peter");

}
  } 
```

# javascript - 使用 d3.js 在同一 svg 上的饼图布局和包布局？

> ID：10731125
> 
> 赞同：1
> 
> 时间：2012-05-24T04:23:39.393
> 
> 标签：javascript, svg, d3.js, pie-chart, bundle-layout

我正在尝试创建类似于`D3`分层捆绑的东西：

[http://mbostock.github.com/d3/talk/20111116/bundle.html](http://mbostock.github.com/d3/talk/20111116/bundle.html)

![在此处输入图像描述](../Images/98aa6fee74eb69f51a462b60ed623468.png)

除了标记每个节点之外，我还想要顶部的弧线 - 就像饼图布局一样。

[http://jsfiddle.net/nrabinowitz/GQDUS/](http://jsfiddle.net/nrabinowitz/GQDUS/)

![在此处输入图像描述](../Images/54f8a4efbeabcebb739e12f9b284f2dc.png)

我已经删除了标签，并且正在使用饼图 - 在树状图周围绘制它 - 但是我没有看到如何使用分层数据来生成饼图布局。

有人做过类似的事情吗？

# c++ - C++11 中默认的虚拟析构函数的异常规范是什么？

> ID：10731131
> 
> 赞同：9
> 
> 时间：2012-05-24T04:25:05.653
> 
> 标签：c++, default, exception-specification

假设我有：

```
class Foo
{
public:
   virtual ~Foo()=default;
}; 
```

默认析构函数的异常规范是什么？默认析构函数是否等效于：

```
 virtual ~Foo() {};
or
   virtual ~Foo() throw() {};
or
   virtual ~Foo() noexcept {}; 
```

C++11 标准的 15.4 节说它取决于析构函数的隐式定义直接调用的函数的异常规范。在这种情况下，没有成员，也没有基类，因此 AFAIK 没有由隐式析构函数直接调用的函数。这是标准中的歧义（或遗漏）吗？

当然，这很重要，因为如果它隐式具有 throw()，那么所有子类都必须使用 throw() 声明它们的析构函数。不要告诉我在析构函数中抛出异常是个坏主意，我知道。我处理了许多根本没有使用异常规范的遗留代码。

作为一个信息点，当我尝试时：

```
class SubFoo : public Foo
{
public:
   virtual ~SubFoo();
}; 
```

我在 GCC 4.4 中遇到了一个错误（不匹配的异常规范）（尽管我承认我可能没有正确的命令行开关），但在使用“11”编译器的 XCode 4.3 中却没有。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-24T04:49:39.413

回到同一句话的前面（§15.4/14）：

> ...它的隐式异常规范指定类型 ID T 当且仅当 T 被 f 的隐式定义直接调用的函数的异常规范允许时；..."

因此，如果`~Foo`不调用任何函数，则它有一个不允许抛出异常的隐式声明。

根据§15.4/3：

> 如果满足以下条件，则两个异常规范是兼容的：
> 
> *   两者都是非投掷（见下文），无论其形式如何，

`throw()`这里就是这种情况，所以声明是或`noexcept`- 两者在任何情况下都兼容并不重要。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-24T05:01:35.757

标准语言在**C++11 §8.4.2/2**中很好地开始，

> 如果一个函数在它的第一个声明中被显式默认，
> ——如果隐式声明是，它被隐式认为是 constexpr，
> ——它被隐式认为具有相同的异常规范，就好像它已经被隐式声明（15.4），......

但是，在**C++11 §15.4/14**中，逻辑迅速转移，

> 隐式声明的特殊成员函数（第 12 条）应具有*异常规范*。If`f`是隐式声明的默认构造函数、复制构造函数、移动构造函数、析构函数、复制赋值运算符或移动赋值运算符，其隐式异常规范指定类型 ID`T`当且仅当`T`函数的异常规范直接允许由`f`的隐式定义调用；`f`如果它直接调用的任何函数都允许所有异常，`f`则应允许所有异常；如果它直接调用的每个函数都不允许异常，则不应允许异常。

在标准的“允许”含义中，它是关于通过异常规范明确允许的。

如果`f`调用两个函数，其中一个指定并因此允许`T`，另一个允许所有异常，则`f`必须同时指定`T` *并*允许所有异常，这是不可能的。

所以这绝对看起来像是标准中的一个缺陷。

我找到了相关的缺陷报告，[http://www.open-std.org/jtc1/sc22/wg21/docs/cwg_active.html#1351](http://www.open-std.org/jtc1/sc22/wg21/docs/cwg_active.html#1351)。

然而，看起来这个区域只是一个大混乱。:-(

# php - Jquery 和日历下个月和上个月按钮

> ID：10731134
> 
> 赞同：1
> 
> 时间：2012-05-24T04:25:14.570
> 
> 标签：php, jquery, wordpress

我正在使用 wordpress，一个名为 The Events Calendar 的插件（顺便说一句很棒的插件），我正在尝试创建一个带有小导航元素的小部件。导航将显示上个月、当前月和下个月。例如，今天导航会显示“Apr May Jun”。

应该发生的是，当您单击“Jun”时，它应该加载 6 月发生的事件。我想通过 jquery/ajax 魔术将这些加载到指定的 div 中。

我有点让它工作，但我有一个错误，我不知道如何修复它。当我单击初始显示的月份之一时，它可以工作。但是当我再点击一个月时，我失去了我的 jquery 功能（可能是由于页面没有完全重新加载。）

所以，我想知道是否有办法重新初始化导航，以便获得更多点击。

使用代码：

我的 sidebar.php 文件包含以下代码：

一些 HTML

```
<div id="upcoming-events-box">
<div class="upcoming-events-block-inner">
<div class="upcoming-events-content">

    <div id="EventLoader">
    <?php get_template_part( 'content', 'the-events' ); ?>
    </div>

</div>
</div>
</div> 
```

还有一些jQuery：

```
<script type="text/javascript">
jQuery(function() {

    jQuery('#upcoming-events-months li a').click(function() {
        var toLoad = jQuery(this).attr('href')+' #EventLoader';
        jQuery('#EventLoader').hide('fast',loadContent);
        jQuery('#load').remove(); 
        jQuery('.upcoming-events-content').append('<span id="load">LOADING...</span>');
        jQuery('#load').fadeIn('normal');

    function loadContent() {
        jQuery('#EventLoader').load(toLoad,'',showNewContent);
    }

    function showNewContent() {
        jQuery('#EventLoader').show('normal',hideLoader);
    }

    function hideLoader() {
        jQuery('#load').fadeOut('normal');
    }
    return false;

    });
});

</script> 
```

侧边栏中调用的 content-the-events.php 包含以下代码：

```
<div id="upcoming-events-months">
 // Some php
global $post;

$current_page_URL = $_SERVER["SERVER_NAME"];

if (isset($_GET['setmonth'])) {
$current_month = $_GET['setmonth'];
 } else {
$current_month = date('M'); // This gets the current month
}

$next_month = date('M', strtotime('+1 month', strtotime($current_month)));
$prev_month = date('M', strtotime('-1 month', strtotime($current_month)));

echo "<ul>";
echo "<li><a href='http://".$current_page_URL."?setmonth=".$prev_month."'
id='".$prev_month."'>".$prev_month."</a></li>";
echo "<li>".$current_month."</li>";
echo "<li><a href='http://".$current_page_URL."?setmonth=".$next_month."'
id='".$next_month."'>".$next_month."</a></li>";
echo "</ul>";
</div>

<div id="content"></div>

<div class="upcoming-event-scroller">
<?php
$all_events = tribe_get_events(array(
'eventDisplay'=>'all',
'posts_per_page'=>-1,
'start_date'=>'01 '.$current_month.' 2012',
'end_date'=>'31 '.$current_month.' 2012'
));

foreach($all_events as $post) {
setup_postdata($post);
?>
<div class="row <?php echo (++$j % 2 == 0) ? 'even' : 'odd'; ?>">
<p><a href="<?php the_permalink(); ?>"><?php the_title(); ?></a></p>
<p class="event-date"><a href="<?php the_permalink(); ?>"><?php echo tribe_get_start_date($post->ID, true, 'M j, Y'); ?> - <?php echo tribe_get_end_date($post->ID, true, 'M j, Y'); ?></a></p>
</div>

<?php } //endforeach ?>
<?php wp_reset_query(); ?>
</div> 
```

也许我只是让自己很困惑试图弄清楚这一点。哈哈。任何帮助将不胜感激。

# php - PHP DOM - 删除所有元素，除了......？

> ID：10731143
> 
> 赞同：0
> 
> 时间：2012-05-24T04:26:17.567
> 
> 标签：php, html, xml, dom, wikipedia

我正在尝试使用 PHP 来编辑 DOM 文档树。但是，我被困住了。加载 HTML 后，我想删除除我指定的少数几个元素之外的每个元素。（`<p>`和`<b>`，例如）我该怎么做？甚至可能吗？

以下是我当前的代码：

```
<?php
$url = 'http://en.wikipedia.org/w/index.php?title=Elephant&action=render';
$curl = curl_init();
curl_setopt($curl, CURLOPT_URL, $url);
curl_setopt($curl, CURLOPT_RETURNTRANSFER, 1);
curl_setopt($curl, CURLOPT_USERAGENT, 'Mozilla/5.0 (Windows; U; Windows NT 5.1; en-US; rv:1.8.1.13) Gecko/20080311 Firefox/2.0.0.13');

$html = '<html>' . curl_exec($curl) . '</html>';
echo $html;

$document = new DOMDocument;
$document->loadHTML($html);

$allowed_elements = array(
    'a',
    'b',
    'i',
    'p',
);

$parent = $document->getElementsByTagName('html')->item(0);

foreach ($parent->getElementsByTagName('*') as $element)
{
    $node = strtolower((string)$element->nodeName);
    if (!in_array($node, $allowed_elements))
    {
        $element->parentNode->removeChild($element);
    }
}

echo $document->saveHTML();

curl_close($curl);
?> 
```

我的修补告诉我可以循环遍历 DOM 树，所以我假设我可以循环遍历它。但是，我的代码仍然无法正常工作！我试图最终获得明文维基百科文章——如果有人知道我不必自己编写的替代工具，那将是一个可以接受的答案。

谢谢！！:)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-24T08:10:26.367

试试这个：

```
<?php
$url = 'http://en.wikipedia.org/w/index.php?title=Elephant&action=render';
$curl = curl_init();
curl_setopt($curl, CURLOPT_URL, $url);
curl_setopt($curl, CURLOPT_RETURNTRANSFER, 1);
curl_setopt($curl, CURLOPT_USERAGENT, 'Mozilla/5.0 (Windows; U; Windows NT 5.1; en-US; rv:1.8.1.13) Gecko/20080311 Firefox/2.0.0.13');

$html = '<html>' . curl_exec($curl) . '</html>';
curl_close($curl);

$document = new DOMDocument('1.0');
$document->loadHTML($html);

$allowed_elements = array('a','b','i','p');
$elems = array();

$parent = $document->getElementsByTagName('html')->item(0);

foreach ($parent->getElementsByTagName('*') as $element)
{
    $node = (string)$element->nodeName;
    if(strtolower($node) == 'body'){
        continue;
    }

    $elems[] = $node;
}

$elems = array_values( array_unique( $elems ) );
$elems = array_diff( $elems, $allowed_elements );
$elems = array_values( array_unique( $elems ) );
sort($elems);

foreach( $elems as $elem ) {
    $parent1 = $parent->getElementsByTagName($elem);
    $length = $parent->getElementsByTagName($elem)->length;

    for($i=0;$i<$length;$i++) {
        $el = $parent1->item(0); // 0 is the index because after each `removeChild`, the next element shifts 1 position back.
        if( $el ) {
            $el->parentNode->removeChild($el);
        }
    }
}

echo $document->saveHTML();
?> 
```

**$elementsToKeep** - 该数组包含不被删除的项目列表。

希望这可以帮助。

# c# - 如何将 HTTP 响应直接流式传输到网络

> ID：10731145
> 
> 赞同：3
> 
> 时间：2012-05-24T04:26:32.217
> 
> 标签：c#, .net, wcf, throughput

我正在使用 WCF 4.0 + REST 编写一个高吞吐量的 Web 服务。Web 服务返回 XML 响应。我的操作方法的返回类型是 XDocument，WCF 负责返回 XML。然而，在内存中构建 XML 响应然后将其返回给调用者并不是很有效。

我正在尝试从 XmlDocument/XDocument 转移到 XmlWriter。在控制台应用程序中，我可以轻松地将响应流式传输到文件，但是 WCF 呢？我可以使用 WebOperationContext、HttpContext 流式传输响应并返回流吗？

```
FileStream fs = new FileStream("New.xml", FileMode.Create, FileAccess.Write);
using (XmlWriter writer = XmlWriter.Create(fs))
{
    FormatResponse(writer, myDate);
} 
```

谢谢您的帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-24T10:09:01.180

只有 TCP、IPC、WebHttpBinding 和 basicHttp 绑定支持流式传输。

您的合同定义

```
[OperationContract]
Stream GetXml(); 
```

您的服务方法实现

```
public Stream GetXml()
{
    string filePath = "document.xml";

    try
    {
        FileStream xmlFileStream = File.OpenRead(filePath);
        return xmlFileStream;
    }
    catch (IOException ex)
    {
        // Exception handling logic
    }
} 
```

在服务器端更改绑定配置（在本例中为 StreamedResponse）

```
<bindings>
   <basicHttpBinding>
      <binding name = "StreamedHTTP"
               transferMode = "StreamedResponse"
      />
   </basicHttpBinding>
</bindings> 
```

这是 TransferMode 枚举：

```
public enum TransferMode
{
   Buffered, //default
   Streamed,
   StreamedRequest,
   StreamedResponse
} 
```

> **笔记：**
> 
> *   不要忘记在客户端为大流设置 maxReceivedMessageSize = "some value"
> *   使用流式传输时，不能使用消息级传输安全性。
> *   当合约配置了 SessionMode.Required 时，您不能使用流式传输。
> *   使用 TCP 绑定进行流式传输时，您也无法启用可靠消息传递。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-24T04:58:39.393

您可以结合 REST 和 WCF 流。例如，看[这里。](http://www.codeproject.com/Articles/35982/REST-WCF-and-Streams-Getting-Rid-of-those-Names-Sp)

# algorithm - 根据计数均匀分布的颜色范围

> ID：10731147
> 
> 赞同：3
> 
> 时间：2012-05-24T04:26:40.827
> 
> 标签：algorithm, colors, distribution

我有一个传说，我需要进行颜色协调，并且有几乎无限的颜色范围（在 50-100 个标识符方面是无限的。我想像彩虹一样使用色谱并从数量中均匀分布颜色图例中的项目。例如。

我有池 A、B 和 C，并希望通过颜色来区分它们。A 是红色，B 是橙色，C 是绿色，等等。我想使用从 000000 到 FFFFFF 的十六进制颜色代码动态地计算出来。所以我的游泳池会在这个范围内均匀地挑选三种颜色。如果我有 10 个池，它会均匀地选择 10 种颜色，依此类推。执行此操作的最佳算法是什么？

这将在 javascript 中完成，但希望在 SASS 中完成。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-24T04:51:05.900

我强烈建议让算法成为一个人：让懂行的人为你选择 100 种颜色（首先是最赏心悦目的），将其用作静态数组，只需使用索引 0..N -1。

也就是说：一种常见的算法是使用 PAL/NTSC 颜色模型：

```
R=Y+V/0.88
G=Y-0.38*U-0.58*V
B=Y+U/0.49 
```

U/V 是颜色的坐标，Y 是亮度。

`1`因此，您在 U/V 平面上创建一个中心为半径的圆，并`0/0`在其上标记 N 个点 - 这可以通过 U=cos(phi)、V=sin(phi) 和 phi 轻松完成 0..360 N 步中的度数。这为您提供了一个包含 N (U/V) 元组的数组。

使用令人眼花缭乱的 Y (ca. `0.5`)，您可以像上面一样计算 RGB 值，从而得到 N (R/G/B) 元组的数组。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-24T04:52:48.297

不知道你在问什么，但这可能会有所帮助。它吐出从 w=0（红色）到 w=1.0（紫色）的彩虹色。如果你想在 N 种颜色之间平均分配它，我会这样做：

```
for(int i = 0; i<N; i++){
  colors[i] = spectrum(i/((double)(N-1)));
} 
```

使用这种方法：

```
public Color spectrum(double w) {
if (w>1)w=1;
if (w<0)w=0;

w=w*(645-380)+380;
double R,B,G;
if (w >= 380 && w < 440){
    R = -(w - 440.) /(440\. - 350.);
    G = 0.0;
    B = 1.0;
}
else if (w >= 440 && w < 490){
    R = 0.0;
    G = (w - 440.) /(490\. - 440.);
    B = 1.0;
}
else if (w >= 490 && w < 510){
    R = 0.0;
    G = 1.0;
    B = (510-w) /(510\. - 490.);
}
else if (w >= 510 && w < 580){
    R = (w - 510.) /(580\. - 510.);
    G = 1.0;
    B = 0.0;
}
else if (w >= 580 && w < 645){
    R = 1.0;
    G = -(w - 645.) /(645\. - 580.);
    B = 0.0;
}
else if (w >= 645 && w <= 780){
    R = 1.0;
    G = 0.0;
    B = 0.0;
}
else{
    R = 0.0;
    G = 0.0;
    B = 0.0;
}
return new Color(R,G,B);

} 
```

抱歉，它不在 javascript 中。我在Java方面更流利。那里的数字映射到以纳米为单位的波长，因此它对各种东西都很有用。R、G、B 值当然可以通过乘以 255 并截断小数来转换为整数。

# java - 在 rest 客户端中验证 Tomcat 身份验证

> ID：10731162
> 
> 赞同：0
> 
> 时间：2012-05-24T04:28:35.473
> 
> 标签：java, tomcat, restful-authentication, rest-client

我正在使用完整的 web 服务和 tomcat 安全性。我想写一个restclient，它将提供用户名和密码，并将在服务器中进行身份验证。

请提出一些方法我该怎么做？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-24T04:52:46.100

最简单的方法是通过基本的 HTTP 身份验证。您需要修改两个文件：

1.`web.xml`你的申请。添加：

```
<login-config>
  <auth-method>BASIC</auth-method>
  <realm-name>Basic authentication</realm-name>
</login-config>
<security-role>
  <description>Some role description</description>
  <role-name>role1</role-name>
</security-role> 
```

2.`tomcat-users.xml`在`conf`目录中：

```
<tomcat-users>
  <user name="user1" password="pass" roles="role1" />
</tomcat-users> 
```

# ios - iOS 5 - 1 自定义 UINavigationBar 不同于所有其他

> ID：10731166
> 
> 赞同：0
> 
> 时间：2012-05-24T04:28:52.493
> 
> 标签：ios, uinavigationbar, uiappearance

我在 iOS 5 中使用 UIAppearance 创建自定义 UINavigationBar。我使用以下代码（在 AppDelegate.m 中）为所有导航栏提供相同的背景

```
[[UINavigationBar appearance] setBackgroundImage:[UIImage imageNamed:@"NavBarNoText.png"] forBarMetrics:UIBarMetricsDefault]; 
```

我希望能够仅对 1 个 TableViewController 使用 1 个导航栏“NavBarWithText.png”，而我使用 NavBarNoText.png 作为除上述 TableViewController 之外的所有其他导航栏的背景。有谁知道这是否可能？我知道 Instagram 做了类似的事情，主页选项卡使用的导航栏与所有其他选项卡不同。

我已经尝试在每个单独的类的 ViewDidLoad 方法中单独使用它，但它似乎不起作用。一开始我让单个视图具有不同的背景，但在我切换视图后它会变回公共背景。

```
-(void)viewDidLoad
{
[super viewDidLoad];
[self.navigationController.navigationBar setBackgroundImage:[UIImage imageNamed:@"NavBarWithText.png"] forBarMetrics:UIBarMetricsDefault];
} 
```

对于单一视图

```
-(void)viewDidLoad
{
[super viewDidLoad];
[self.navigationController.navigationBar setBackgroundImage:[UIImage imageNamed:@"NavBarNoText.png"] forBarMetrics:UIBarMetricsDefault];
} 
```

对于所有其他视图。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-24T06:07:26.183

您可以使用它`appearanceWhenContainedIn:`在显示时显示不同的导航栏以`UITableViewController`获取更多信息，请参见[此处](https://developer.apple.com/library/ios/#documentation/UIKit/Reference/UIAppearance_Protocol/Reference/Reference.html#//apple_ref/doc/uid/TP40010906)

# asp.net-mvc - 如何使用数据库中的图像加载 kendoui 网格

> ID：10731169
> 
> 赞同：0
> 
> 时间：2012-05-24T04:29:17.810
> 
> 标签：asp.net-mvc, visual-studio-2010

我在我的 mysql 数据库中创建了一个表。我有图像列、组合框列、单选按钮列、链接列。我正在使用 kendoui 网格。

我有一个日历字段。我将类型指定为“日期”，它工作正常。

我可以从数据库加载数据，但图像字段没有加载，图像字段的类型是什么？

在链接栏中，它作为一个字符串，我想要的是，如果我点击链接，它必须去特定的网页。kendoui 网格中链接字段的类型是什么？

我想要单选按钮和组合框的类型。

谁能帮我..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-11T09:23:57.843

如果您将图像存储为字节数组，我认为您需要创建一些通过其 id 手动返回图像的 url。

但是，如果您存储直接链接，那么您可以像这样处理它：

只需为此使用列模板。

```
$("#grid").kendoGrid({
    columns:
    {
        { 
            field: "imagelink", 
            title: "Image", 
            template: "<a href='${ imagelink }>Click me</a>"
        },
        { 
            field: "imageid", 
            title: "Image2", 
            template: "<a href='/myUrlToGetImageById?id=${ imagelink }>Click me</a>"
        }    
    }
... 
```

您可以使用模板中的所有字段。不只是当前列有。

# java - 用户按键时看不到消息

> ID：10731172
> 
> 赞同：0
> 
> 时间：2012-05-24T04:29:58.093
> 
> 标签：java, c, winapi, java-native-interface, keylogger

以下`java`程序调用本机方法，如果用户按下某个键，`C`该方法应打印一条消息。`you pressed a key !`但是当我按下键时我看不到消息。我还检查函数是否`SetWindowsHookEx`返回 null 但不，它不返回 null。

*Java 代码：*

```
package keylogger;

public class TestKeys {

private native void setWinHook();

public static void main(String args[]) {
    TestKeys o = new TestKeys();
    try {
        o.setWinHook();
        Thread.sleep(10000);
    } catch(Exception exc) {
        exc.printStackTrace();
    }
}

static {
    System.loadLibrary("MyHook");
} 
```

} *C 代码：*

```
#include <stdio.h>
#include <windows.h>
#include <w32api.h>
#include "keylogger_TestKeys.h"
static HHOOK handleKeyboardHook = NULL;
HINSTANCE hInst = NULL;

static LRESULT CALLBACK LowLevelKeyboardProc(int nCode, WPARAM wParam, LPARAM lParam) {
  printf("You pressed a key !\n");
  return CallNextHookEx(handleKeyboardHook, nCode, wParam, lParam);
}

void Java_keylogger_TestKeys_setWinHook
 (JNIEnv *env, jobject obj) {
hInst = GetModuleHandle(NULL); // include or exclude,i don't see the result
handleKeyboardHook = SetWindowsHookEx(WH_KEYBOARD_LL, LowLevelKeyboardProc,NULL, 0);
if(handleKeyboardHook==NULL) {
    printf("Is Null");
} else {
    printf("Is not Null");
}
printf("Inside fucntion setWinHook !");
}

/*int WINAPI WinMain(HINSTANCE hInstance, HINSTANCE hPrevInstance, LPSTR lpCmdLine, int nCmdShow)
{
 printf("Hello World !");
 handleKeyboardHook = SetWindowsHookEx(WH_KEYBOARD_LL, LowLevelKeyboardProc, hInstance, 0);
 if(handleKeyboardHook==NULL) {
  printf("Is Null");
 } else {
    printf("Is not Null");
   }
 MSG msg;
 while(GetMessage(&msg, NULL, 0, 0))
 {
   TranslateMessage(&msg);
   DispatchMessage(&msg);
 }
 return msg.wParam;
}*/ 
```

我看到的唯一输出是*Is not NullInside fucntion setWinHook ！*

哪里有问题 ？

我应该怎么做才能让这个程序在我按下键时返回消息。我看到的唯一输出是：`Inside function setWinHook !`

***笔记 ：***

如果上述程序在某人的机器上运行，请提及。

*输出图片：*

![在此处输入图像描述](../Images/986fc813ad549e60448a388910e62072.png)

我在按键时没有看到任何消息。程序在 10 秒后退出而不显示消息。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-24T07:59:36.280

您不能简单地突然声明一个本地 HINSTANCE 变量并将其传递给函数。HINSTANCE 是应用程序实例的句柄，换句话说，它是必须指向有效位置的指针。您需要使用自己的应用程序 HINSTANCE。

我的 Windows API 有点生疏，但我相信您可以通过 GetModuleHandle() 来做到这一点。所以：

```
void Java_keylogger_TestKeys_setWinHook
     (JNIEnv *env, jobject obj) {
   HINSTANCE hInst;
   hInst = GetModuleHandle(null);
   handleKeyboardHook = SetWindowsHookEx(WH_KEYBOARD_LL, LowLevelKeyboardProc, hInst, 0);
   printf("Inside function setWinHook !");
 } 
```

您的 Java goo 也很可能在某个对象中隐藏了 HINSTANCE。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-24T07:28:15.187

查看[Java 全局（低级）键盘/鼠标挂钩](http://ksquared.de/blog/2011/07/java-global-system-hook/)

我尝试自己写一个，但对我来说似乎有太多未知的细节（JNI、HOOKS、线程问题等）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-30T05:46:57.853

*肯定有更好的方法来实现这一点。一旦创建了一个线程，就会多次调用这里`DllMain`，这对我来说似乎不对。我不确定这是否合法！C 代码启动一个新线程来实现 keycatcher。*

*C代码：*

```
#include <stdio.h>
#include <windows.h>
#include <w32api.h>
#include "keylogger_TestKeys.h"

static HHOOK handleKeyboardHook = NULL;
HINSTANCE hInst = NULL;
static DWORD hookThreadId = 0;
static HANDLE hookThreadHandle = NULL;
BOOL WINAPI installHook(HINSTANCE hinstDLL, DWORD fwdReason, LPVOID lpvReserved);
static int i = 0;

static LRESULT CALLBACK LowLevelKeyboardProc(int nCode, WPARAM wParam, LPARAM lParam) {

  printf("You pressed the key !");
  return CallNextHookEx(handleKeyboardHook, nCode, wParam, lParam);
}

BOOL WINAPI DllMain( HINSTANCE hinstDLL, DWORD fdwReason, LPVOID lpvReserved) {
 if(hookThreadHandle==NULL) {
    printf("hookThreadHandle is NULL\n");
    LPTHREAD_START_ROUTINE lpStartAddress = &installHook;
    hookThreadHandle = CreateThread(NULL, 0, lpStartAddress, NULL, 0, &hookThreadId);
 }
}

BOOL WINAPI installHook(HINSTANCE hinstDLL, DWORD fwdReason, LPVOID lpvReserved) {
// printf("From installHook : %u",fwdReason);
printf("count : %d\n",i++);
handleKeyboardHook = SetWindowsHookEx(WH_KEYBOARD_LL, LowLevelKeyboardProc, hinstDLL, 0);
MSG msg;

while(GetMessage(&msg, NULL, 0, 0))
{
  TranslateMessage(&msg);
  DispatchMessage(&msg);
}
return msg.wParam;
}

void Java_keylogger_TestKeys_unregisterWinHook
 (JNIEnv *env, jobject obj) {
 // should have stopped the thread before unhooking
 if(handleKeyboardHook != NULL) {
    UnhookWindowsHookEx(handleKeyboardHook);
 }
}

void Java_keylogger_TestKeys_stopNativeThread // stop the native thread
  (JNIEnv *env, jobject obj) {
    PostThreadMessage(hookThreadId, WM_QUIT, (WPARAM) NULL, (LPARAM) NULL);
    WaitForSingleObject(hookThreadHandle, 5000);
} 
```

*Java 代码：*

```
package keylogger;

public class TestKeys {
private static int i = 0;
private native void setWinHook();
private native void unregisterWinHook();
private native void createWinThread();
private native void stopNativeThread();

public static void main(String args[]) {
    TestKeys o = new TestKeys();
    try {
        Thread.sleep(5000);
    }catch(Exception exc) {
        exc.printStackTrace();
    }
   o.stopNativeThread();
   o.unregisterWinHook();
   System.out.println("Native thread stopped and Hook unregistered !");

   try {
        Thread.sleep(3000); // Now you won't see the message : you pressed the key 
    }catch(Exception exc) {
        exc.printStackTrace();
    }
}

static {
    System.loadLibrary("MyHook");
}
} 
```

我启动java程序并被`DLLMain`调用。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-30T06:15:50.107

HHOOK变量需要在共享数据段内声明*。*在这里检查它是如何完成的 - [http://www.codeproject.com/Articles/5002/Mousey-Roll-Over-and-Park](http://www.codeproject.com/Articles/5002/Mousey-Roll-Over-and-Park)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-31T00:25:24.380

您需要一个`GetMessage/PeekMessage`循环才能让您的键盘挂钩接收任何事件。有关 Windows 上键盘挂钩的 Java 实现，请参阅[Windows 中的 JNA 键盘挂钩](https://stackoverflow.com/questions/3078646/jna-keyboard-hook-in-windows)，或在 JNA 项目中执行相同功能的贡献包 ( [https://github.com/twall/jna/tree/master/contrib/ w32keyhook](https://github.com/twall/jna/tree/master/contrib/w32keyhook)）。

# arrays - 在数组数组上使用 Array.map

> ID：10731173
> 
> 赞同：4
> 
> 时间：2012-05-24T04:30:02.620
> 
> 标签：arrays, f#

我有一个数组 P 的数组，它表示一个矩阵，作为一个行向量数组（这种表示对我的目的来说更方便），我想提取该数组的列向量 j。我的第一关是：

```
let column (M: float[][]) (j: int) =
   Array.map(fun v -> v.[j]) M 
```

这无法编译，告诉我 v.[j] 在不确定类型的对象上使用 operator expr.[idx]。这让我感到困惑，因为将鼠标悬停在 v 上会将 v 识别为 float[]，我认为它是一个行向量。

此外，以下代码有效：

```
let column (M: float[][]) (j: int) =
   Array.map(fun v -> v) M
   |> Array.map (fun v -> v.[j]) 
```

我无法理解第二个示例与第一个示例有何不同。第二个示例中的第一个映射看起来是多余的：我将一个数组映射到自身，但这似乎解决了类型确定问题。

任何帮助理解我做错了什么或没有看到将不胜感激！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-24T04:39:19.653

问题是 F# 类型推断严格从左到右，以便编译器看到

```
let column (M: float[][]) (j: int) =
   Array.map(fun v -> v.[j]) 
```

在这一点上，它完全不知道，`v`所以它会抛出一个错误。这就是正向管道运算符`|>`如此普遍的原因 - 将您的代码重写为

```
let column (M: float[][]) (j: int) =
   M |> Array.map(fun v -> v.[j]) 
```

没问题。这也是您的第二个示例有效的原因

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-24T04:50:09.210

由于类型检查器从左到右工作，因此 type of`v`未指定，尽管 type of`M`稍后可用。所以：

```
let column (M: float[][]) (j: int) =
   M |> Array.map (fun v -> v.[j]) 
```

或者

```
let column M (j: int) =
   Array.map (fun (v: float []) -> v.[j]) M 
```

作品。

在第二个示例`fun v -> v`中，任何类型都可以。所以数组元素的类型没有问题。第二部分`|>`按预期工作，并说明了为什么我们应该使用管道运算符。

# google-sheets - 谷歌脚本，操作数值

> ID：10731174
> 
> 赞同：0
> 
> 时间：2012-05-24T04:30:09.383
> 
> 标签：google-sheets, google-apps-script

我在一个电子表格后面有一个脚本，我正在尝试将一些单元格值导出到文档，然后通过电子邮件发送临时文档的 pdv 版本..（稍后将其丢弃）。我的值有问题，或者我从电子表格到文档中获取值的方式有问题。我无法操纵小数点。

```
 // fix the price currency display and alignment in GOOGLE DOCUMENT TABLE!
  for (var i = 0; i < price.getNumRows(); i++){
    for (var j = 0; j < price.getRow(i).getNumCells(); j++){
      var temp = price.getCell(i, j);
      temp.getChild(0).asParagraph().setSpacingAfter(0);
      if((j == 6 || j == 7) && !temp.getText() == "" ) {
        (i > 0) ? temp.replaceText(temp.getText(), temp.getText() + " kn") : void false; // skip the first line with header titles... 
        temp.getChild(0).asParagraph().setAlignment(DocumentApp.HorizontalAlignment.RIGHT);
      }
    }
  } 
```

在 (i > 0) 之后有*temp.getText()*值..有时就像：55,987654 我希望将其四舍五入到两位数..但不能:(

感谢帮助！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-24T13:01:55.137

我找到了解决方案..

这很简单，但确实花了我一些时间..希望可以帮助其他有类似情况的人

```
parseFloat(temp.getText()).toFixed(2) + " kn") 
```

这成功了，输出类似于：55,99 kn！

# c# - 批量插入 Sql Server 数百万条记录

> ID：10731179
> 
> 赞同：11
> 
> 时间：2012-05-24T04:30:24.837
> 
> 标签：c#, sql-server, windows-services, bulkinsert

我有一个 Windows 服务应用程序，它接收具有以下格式的数据流

```
IDX|20120512|075659|00000002|3|AALI                 |Astra Agro Lestari Tbk.                                     |0|ORDI_PREOPEN|12  |00000001550.00|00000001291.67|00001574745000|00001574745000|00500|XDS1BXO1|                                        |00001574745000|›§
IDX|20120512|075659|00000022|3|ALMI                 |Alumindo Light Metal Industry Tbk.                          |0|ORDI        |33  |00000001300.00|00000001300.00|00000308000000|00000308000000|00500|--U3---2|                                        |00000308000000|õÄ 
```

这些数据以数百万行和顺序`00000002....00198562`出现，我必须根据顺序解析它们并将它们插入到数据库表中。

我的问题是，将这些数据插入数据库的最佳方式（最有效）是什么？我尝试使用一种简单的方法来打开 SqlConnection 对象，然后生成一串 SQL 插入脚本，然后使用 SqlCommand 对象执行脚本，但是这种方法花费的时间太长。

我读到我可以使用 Sql BULK INSERT 但它必须从文本文件中读取，这种情况是否可以使用 BULK INSERT？（我以前从未使用过它）。

谢谢

更新：我知道 SqlBulkCopy 但它要求我首先拥有 DataTable，这对性能有好处吗？如果可能的话，我想直接从我的数据源插入到 SQL Server，而不必在内存中使用 DataTable。

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-05-24T04:33:03.020

如果您使用 C# 编写此代码，您可能需要查看[SqlBulkCopy](http://msdn.microsoft.com/en-us/library/system.data.sqlclient.sqlbulkcopy.aspx)类。

> 让您可以使用来自其他源的数据有效地批量加载 SQL Server 表。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-05T06:23:38.723

首先，下载免费**的 LumenWorks.Framework.IO.Csv**库。

二、使用这样的代码

```
StreamReader sr = new TextReader(yourStream);
var sbc = new SqlBulkCopy(connectionString);
sbc.WriteToServer(new LumenWorks.Framework.IO.Csv.CsvReader(sr)); 
```

是的，这真的很容易。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-24T04:41:03.910

您可以使用 SSIS“Sql Server 集成服务”将数据从源数据流转换为目标数据流。源可以是文本文件，目标可以是 SQL Server 表。您的转换以批量插入模式执行。

# iphone - 如何将 1px 垂直线平铺为 UIColor

> ID：10731182
> 
> 赞同：0
> 
> 时间：2012-05-24T04:30:49.590
> 
> 标签：iphone, objective-c, ios, ipad, uicolor

所以我有一个 1px 宽度和 50px 高度的 .png 文件，我想在 UISegmentedButton 中水平平铺它，所以我做了：

```
[segmentedCtrl setTintColor:[UIColor colorWithPatternImage:[UIImage imageNamed:@"btn-gradient-brown.png"]]]; 
```

然而，我得到的只是黑色。这是为什么以及如何正确执行此操作？这是我拥有的 1px，如果它有助于澄清我的观点

![在此处输入图像描述](../Images/51c23e5453ba879f1def46ac61ad4a16.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-24T05:00:05.383

[您可以尝试使用核心图形方法进行平铺，从this question](https://stackoverflow.com/questions/679925/how-can-i-use-cgcontextdrawtiledimage-to-tile-an-image)看这段代码，

```
CGSize imageViewSize = imageView.bounds.size;
UIGraphicsBeginImageContext(imageViewSize);
CGContextRef imageContext = UIGraphicsGetCurrentContext();
CGContextDrawTiledImage(imageContext, (CGRect){ CGPointZero, imageViewSize }, tileImage);
UIImage *finishedImage = UIGraphicsGetImageFromCurrentImageContext();
UIGraphicsEndImageContext(); 
```

它创建一个带标题的图像。您可以将图像设置为 UIcontrol 的背景。

编辑： `tintColor`是创建分段控制默认渐变的基础。因此，将棕色渐变图像设置为色调颜色会为您提供黑色渐变。要设置渐变颜色，

*   子`uisegmentcontrol`类和覆盖`drawRect`方法。
*   使用`backgroundImage`并设置适当的图像插图。

# php - 从命令行调用 PHP 时设置 $_SERVER 变量？

> ID：10731183
> 
> 赞同：29
> 
> 时间：2012-05-24T04:31:13.273
> 
> 标签：php, email, command-line-interface, piping

是否可以通过命令行将 $_SERVER 变量传递给 PHP 脚本？

具体来说，我正在尝试手动设置 $_SERVER['recipient'] 以便我可以在不设置邮件服务器的情况下测试电子邮件管道。

* * *

## 回答 #1

> 赞同：43
> 
> 时间：2012-05-24T05:18:45.857

在 *nix 上：

```
$ recipient="email@domain.com" php script.php

<?php

print_r($_SERVER); 
```

测试：

```
$ recipient="email@domain.com" php script.php | grep recipient

[recipient] => something@domain.com 
```

或者，您可以导出它或 setenv（取决于您的操作系统），例如

```
$ export recipient="email@domain.com"
$ setenv recipient="email@domain.com" 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-07-29T20:33:56.267

**@sberry 的答案是正确的。**

...但是因为我来到这个页面寻找为数组设置默认**值**`$_SERVER`，当从命令行运行 PHP 时，这是我自己的答案。希望它可以帮助某人。

```
empty( $_SERVER['HTTP_HOST'] ) && $_SERVER['HTTP_HOST'] = 'localhost';
empty( $_SERVER['REQUEST_URI'] ) && $_SERVER['REQUEST_URI'] = '/';
empty( $_SERVER['DOCUMENT_ROOT'] ) && $_SERVER['DOCUMENT_ROOT'] = __DIR__;
print_r( $_SERVER ); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-04-21T20:38:25.207

您还可以传递两个或更多变量。例如：

```
$ SERVER_NAME="example.com" REQUEST_URI="?foo=bar" php script.php

<?php

print_r($_SERVER); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-01-06T17:26:29.040

我个人使用以下。

示例：在我的 PHP 命令行中设置**$_SERVER['recipient] 。**

**使用 OS X**

*   按照[https://github.com/ersiner/osx-env-sync中的说明进行操作](https://github.com/ersiner/osx-env-sync)
*   将以下行附加到文件“ **~/.bash_profile** ”（如果不存在，则创建它）

    `export recipient="something@example.com"`

**使用 Ubuntu GNU/Linux**

*   将以下行附加到文件' **/etc/environment** '（创建它，如果它不存在，请参阅[https://help.ubuntu.com/community/EnvironmentVariables](https://help.ubuntu.com/community/EnvironmentVariables)）

    `recipient=something@example.com`

* * *

## 回答 #5

> 赞同：-5
> 
> 时间：2012-05-24T04:39:12.897

如何使用以下内容设置一个名为 dummy.php 的虚拟页面：

```
<?php
    $_SERVER['recipient'] = 'me@gmail.com';
?> 
```

# mysql - 布尔匹配/反对中的 MySQL REGEXP 用法

> ID：10731187
> 
> 赞同：4
> 
> 时间：2012-05-24T04:31:38.353
> 
> 标签：mysql, regex, match, against

我有以下 MySQL 查询：

```
SELECT title, description 
FROM some_table 
WHERE MATCH (title,description) AGAINST ('+denver (REGEXP "[[:<:]]colorado[s]*[[:>:]]")' IN BOOLEAN MODE); 
```

这里的“regexp”寻找一个“完整的单词”colorado（有或没有结尾的“s”）。

我实际上只想选择那些具有 ("denver") AND ("colorado" 或 "colorados") 的行。但我不能为 REGEXP 加上“+”。我试过但得到 0 个结果，尽管表中有符合要求的行。

关于如何让“+”在使用 REGEXP 的情况下工作的任何想法？我在 PHP 脚本中构建它，其中“denver”和“colorado”是我用来构建 select 语句的变量值。

我的 PHP/MySQL 脚本看起来有点像这样：

```
SELECT title, description 
FROM some_table 
WHERE MATCH (title,description) AGAINST ('+$var1 (REGEXP "[[:<:]]$var2[s]*[[:>:]]")' IN BOOLEAN MODE); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-24T04:40:31.587

我认为在布尔模式下不可能将正则表达式和 MATCH ... 结合起来。您需要使用语法来编写布尔表达式。

*   [布尔全文搜索](http://dev.mysql.com/doc/refman/5.6/en/fulltext-boolean.html)

尝试这样的事情：

```
SELECT title, description
FROM some_table
WHERE MATCH (title,description)
      AGAINST ('+denver +(colorado colorados)' IN BOOLEAN MODE); 
```

# android - 如何避免 View.getDrawingCache() 中的空指针？

> ID：10731189
> 
> 赞同：6
> 
> 时间：2012-05-24T04:31:54.643
> 
> 标签：android, android-view

我的应用程序有这个代码片段

```
mView.setDrawingCacheEnabled(true);
mBitmap = Bitmap.createBitmap(mView.getDrawingCache()); 
```

其中 mView 是 FrameLayout 的自定义子类的一个实例。该应用程序已经运行了 6 个月，现已拥有数千名用户。最近我收到了一些关于传递给 createBitmap() 的空指针的报告（可能来自同一用户，但我无法确认）。我不知道用户使用什么硬件或安卓版本。

即使我在它之前启用了缓存，什么会导致 getDrawingCache() 返回 null？是否与新手机的硬件加速有关？是因为位图的内存不足吗？还要别的吗？可以预防吗？

编辑：我在这里找到了这个解决方案[http://tinyurl.com/7yranvj](http://tinyurl.com/7yranvj)。这是一个合理的解决方法吗？

```
mBitmap = Bitmap.createBitmap(mView.getWidth(), mView.getHeight(),
        Bitmap.Config.ARGB_8888);
final Canvas canvas = new Canvas(mBitMap);
mView.draw(canvas); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-01T10:17:50.850

实际上你的猜测是正确的。如果您使用的是硬件加速层，则不能使用绘图缓存。新设备默认启用硬件加速，因此可能是您的问题。您可以像这样为单个视图关闭硬件加速。

```
if(android.os.Build.VERSION.SDK_INT >= 11) frame.setLayerType(LAYER_TYPE_SOFTWARE, null);
frame.setDrawingCacheEnabled(true); 
```

# c# - 将本地路径传递给 HttpWebRequest

> ID：10731190
> 
> 赞同：2
> 
> 时间：2012-05-24T04:31:58.993
> 
> 标签：c#

我需要在 c# 中将本地路径传递给 HttpWebRequest。我的 C 盘中有 test.xml，我需要在`HttpWebRequest`. 但它会引发异常

```
HttpWebRequest rqst = (HttpWebRequest)HttpWebRequest.Create(Uri.EscapeUriString(urlServ)) 
```

行“无效的 URI：无法解析授权/主机。”

我的编码->

```
string urlServ = "file:\\c:\\test.xml";
  try
   {             
      HttpWebRequest rqst = (HttpWebRequest)HttpWebRequest.Create(Uri.EscapeUriString(urlServ));
      rqst.KeepAlive = false;
   }
catch{} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-24T04:40:18.440

我相信`file:`应该使用正斜杠而不是反斜杠创建 URI。所以，使用这个：

```
string urlServ = "file:///c:/test.xml"; 
```

我注意到当我用反斜杠将它输入浏览器时，FF 将它转换为我的正斜杠。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-06-08T10:11:49.043

您应该使用`WebRequest.Create(uri)`- 这将根据 URI 类型（例如文件、http 等）自动创建正确的对象。现在您可以将相同的代码用于真实网页或本地测试文件。

我在[FileWebRequest](https://msdn.microsoft.com/en-us/library/system.net.filewebrequest(v=vs.110).aspx)的文档中看到了这一点：

> 不要使用 FileWebRequest 构造函数。使用 WebRequest.Create 方法初始化 FileWebRequest 类的新实例。如果 URI 方案是 file://，则 Create 方法返回一个 FileWebRequest 对象。

# android - 无法单击 SlidingDrawer 中的按钮

> ID：10731197
> 
> 赞同：0
> 
> 时间：2012-05-24T04:32:46.613
> 
> 标签：android

SlidingDrawer 有问题。里面的所有按钮都不能点击。

这是我的 SlidingDrawer xml 文件：

```
<?xml version="1.0" encoding="utf-8"?>
<SlidingDrawer xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="110dp"
    android:content="@+id/content"
    android:handle="@+id/handle">

    <Button
        android:id="@+id/handle"
        android:layout_width="wrap_content"
        android:layout_height="30dp"
        android:text="@string/menu" />

    <LinearLayout
        android:id="@+id/content"
        android:layout_width="match_parent"
        android:layout_height="80dp"
        android:layout_gravity="center"
        >

        <Button
            android:id="@+id/btn_video"
            style="@style/button_menu_bottom"
            android:drawableTop="@drawable/mnu_video"
            android:text="@string/video" />

        ...
        ...

    </LinearLayout>

</SlidingDrawer> 
```

这是我从 SlidingDrawer 扩展的 java 文件

包 com.example;

```
import android.content.Context;
import android.util.AttributeSet;
import android.view.LayoutInflater;
import android.widget.Button;
import android.widget.LinearLayout;
import android.widget.SlidingDrawer;
import com.example.R;

public class BottomMenuBar extends SlidingDrawer {

    private SlidingDrawer mSlidingDrawer;
    private Button mButtonSlidingDrawer;
    private LinearLayout mLayoutContent;
    private Button mButtonVideo;
    private Button mButtonPhoto;
    private Button mButtonChat;
    private Button mButtonSetting;

    public BottomMenuBar2(Context context, AttributeSet attrs) {
        super(context, attrs);
        String infService = Context.LAYOUT_INFLATER_SERVICE;
        LayoutInflater li;
        li = (LayoutInflater) getContext().getSystemService(infService);
        li.inflate(R.layout.bar_bottom_menu, this, true);
        mSlidingDrawer=(SlidingDrawer)findViewById(R.id.sld_bottom_menu);
        mButtonSlidingDrawer=(Button)findViewById(R.id.handle);
        mLayoutContent=(LinearLayout)findViewById(R.id.content);
        mButtonVideo=(Button)findViewById(R.id.btn_video);
        mButtonSetting=(Button)findViewById(R.id.btn_setting);
    }

    public Button getmButtonSlidingDrawer() {
        return mButtonSlidingDrawer;
    }
    public void setmButtonSlidingDrawer(Button mButtonSlidingDrawer) {
        this.mButtonSlidingDrawer = mButtonSlidingDrawer;
    }

    ...
    Setter & Getter methods
    ...     
} 
```

这是我的 main.xml 文件：

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:background="@drawable/bg_main"
    android:orientation="vertical" >

    <RelativeLayout
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:layout_weight="0.1" >

        ...
        Any content
        ...

    </RelativeLayout>

    <LinearLayout
        android:layout_width="match_parent"
        android:layout_height="wrap_content" >

        <com.example.BottomMenuBar
            android:id="@+id/sld_bottom_menu"
            android:layout_width="wrap_content"
            android:layout_height="110dp"
            android:handle="@+id/handle"
            android:content="@+id/content"
            />

    </LinearLayout>

</LinearLayout> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-24T09:03:25.433

我不明白你为什么要扩展`SlidingDrawer`。

[您应该在此处](http://developer.android.com/reference/android/widget/SlidingDrawer.html)查找文档。

```
<SlidingDrawer
 android:id="@+id/drawer"
 android:layout_width="match_parent"
 android:layout_height="match_parent"

 android:handle="@+id/handle"
 android:content="@+id/content">

 <ImageView
     android:id="@id/handle"
     android:layout_width="88dip"
     android:layout_height="44dip" />

 <FrameView
     android:id="@id/content"
     android:layout_width="match_parent"
     android:layout_height="match_parent">
   [INSERT VIEWS HERE]
 <FrameView>

</SlidingDrawer> 
```

在您的`Activity`系统中，您甚至在技术上都不需要访问`SlidingDrawer`对象（滑动功能已经作为标准配置，它只包含视图的 in `content`，您不需要干预）。

从您`Activity`获得的对视图的参考，您可以在 [INSERT VIEWS HERE] 中添加。然后，您可以`setOnClickListener()`对这些按钮中的每一个进行操作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-24T04:44:47.777

对于滑动抽屉中的按钮，我告诉每个按钮在 xml 中使用什么方法`android:onClick`。

```
 <Button
            android:id="@+id/sortbutton"
            android:layout_width="0dp"
            android:layout_height="35dp"
            android:layout_weight="1"
            android:onClick="SortClickHandler"
            android:text="@string/sd_sortmethod_button"
            android:textSize="12dp" /> 
```

然后在任何适当的活动中定义方法：

```
public void SortClickHandler(View v) {
    //  Do stuff here
} 
```

**编辑**

我想我找到了你的问题。从[这里](http://developer.android.com/reference/android/widget/SlidingDrawer.html)的开发人员文档中它说，我引用：

```
SlidingDrawer should be used as an overlay inside layouts. This means SlidingDrawer 
should only be used inside of a FrameLayout or a RelativeLayout for instance. 
```

因此，我认为如果您将布局更改为 RelativeLayout，您会发现您的按钮可以正常工作。我只是仔细检查了滑动抽屉的所有用途，并且在所有情况下，包含它的视图的根元素都是相对布局。

# xml - 如何在 flex 4 中接收来自 blazeds 的推送数据

> ID：10731200
> 
> 赞同：0
> 
> 时间：2012-05-24T04:33:09.887
> 
> 标签：xml, flex4, push, blazeds

我正在尝试接收来自 blazeds 的推送数据。我发现了如何从 blazeds 发送推送数据，而没有来自[HERE](https://stackoverflow.com/questions/1872742/how-to-push-data-from-blazeds-without-recieve-message-from-flex-client)客户端的任何消息。现在我不知道如何从 flex 知道数据已从服务器发送以及如何接收该数据。谢谢 ：）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-03T16:50:08.510

要从您在上面共享的链接中接收消息，您需要做几件事。

1.  您需要声明一个消费者，如下所示，它将使用来自定义通道的消息。

2.  请注意，我将`message`属性设置为事件处理程序，如下所示

    ```
    private function onMsg(event:MessageEvent):void
    {
        trace("Signal Arrives : "+event.message.body);

        //var signal:SignalProcessor = new SignalProcessor ();
        //signal.processMessage(event.message.body);
    } 
    ```

3.  创建一个将在您的应用程序的创建完成时调用的方法，例如下面定义的方法

    private function suscribeForMessages():void { //其中consumer是Consumer mxml标签的Id。//只有当您希望您的客户端有选择地接收来自适配器的消息时，您才需要选择器。consumer.selector = "filterID IN('"+userIdVariable+"')"; 消费者.订阅（）；}

上面的 3 个步骤应该能让你振作起来。祝你好运。

# c# - 如何进行此调用以递归记录我的异常？

> ID：10731206
> 
> 赞同：3
> 
> 时间：2012-05-24T04:33:55.177
> 
> 标签：c#, exception, inner-exception

我有以下代码：

```
protected string formatException(Exception e)
{
    var exError = "<form>";
        if (e == null)
        {
            throw new ArgumentNullException("e");
        }
        exError += "<fieldset><legend><a href='#'>" +
                  "<span class='show-expanded'>collapse message</span>" +
                  "<span class='show-collapsed'>expand message</span>" +
                  "</a></legend><p>" + e.Message + "</p></fieldset>";
        exError += "<fieldset><legend><a href='#'>" +
                  "<span class='show-expanded'>collapse trace</span>" +
                  "<span class='show-collapsed'>expand trace</span>" +
                  "</a></legend><p>" + e.StackTrace + "</p></fieldset>";

        if (e.InnerException != null)
        {
            // same functionality but for the inner exception and the InnerException.InnerException
        }
    return exError + "</form>";
} 
```

调用时，它会格式化异常消息。但是我想让它包括`InnerException`和`InnerException.InnerException`

有什么方法可以递归地执行此操作，还是将消息格式放在另一个函数中并调用它会更好？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2016-06-22T15:22:16.330

我知道这是一个老问题，并且已经有一个明确的答案。但是，我就是这样做的，我会在这里发布它以防它帮助某人：

```
public static class ExceptionExtension
{
    public static string GetFullTrace(this Exception ex, bool recursive = true)
    {
        string trace = "";

        trace += "Name: " + ex.GetType().Name + "\n";
        trace += "Message: " + ex.Message + "\n";
        trace += "Stack Trace: " + (ex.StackTrace ?? "null") + "\n";

        if (recursive)
        {
            while (ex.InnerException != null)
            {
                ex = ex.InnerException;

                trace += "\n-------------------- Caused by: --------------------\n";
                trace += "Name: " + ex.GetType().Name + "\n";
                trace += "Message: " + ex.Message + "\n";
                trace += "Stack Trace: " + (ex.StackTrace ?? "null") + "\n";
            }
        }
        return trace;
    }
} 
```

与以前的答案略有不同的是使用扩展方法。这样，人们可以简单地将其称为：

```
try 
{
    SomeOperationWhichMayThrow();
}
catch(Exception ex) 
{
    LogError(ex.GetFullTrace());
} 
```

我有一个项目，其中包含许多可重用的实用程序和扩展方法，我的大部分项目中都包含这些。`ExceptionExtension`是这些实用程序之一。

为了获得更好的性能，请考虑使用 a`StringBuilder`代替。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-24T04:40:07.280

尝试使用类似的东西

```
Exception ex = e;
while (ex != null)
{
   string s = ex.Message;
   ex = ex.InnerException;
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-24T04:53:00.020

这是我要做的：

```
protected string formatException(Exception e)
{
    Func<string, string> createFieldSet =
        t =>
            "<fieldset><legend><a href='#'>" +
            "<span class='show-expanded'>collapse message</span>" +
            "<span class='show-collapsed'>expand message</span>" +
            "</a></legend><p>" + t + "</p></fieldset>";

    var exError = new StringBuilder("<form>");
    if (e == null)
    {
        throw new ArgumentNullException("e");
    }
    while (e != null)
    {
        exError.AppendLine(createFieldSet(e.Message));
        exError.AppendLine(createFieldSet(e.StackTrace));
        e = e.InnerException;
    }
    exError.AppendLine("</form>");
    return exError.ToString();
} 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-05-24T04:55:18.453

我会这样做：

```
 private string privateFormatException(Exception e)
        {
            var exError = String.Empty;
            if (e == null)
            {
                return exError;
            }
            exError += "<fieldset><legend><a href='#'>" +
                          "<span class='show-expanded'>collapse message</span>" +
                          "<span class='show-collapsed'>expand message</span>" +
                          "</a></legend><p>" + e.Message + "</p></fieldset>";
            exError += "<fieldset><legend><a href='#'>" +
                          "<span class='show-expanded'>collapse trace</span>" +
                          "<span class='show-collapsed'>expand trace</span>" +
                          "</a></legend><p>" + e.StackTrace + "</p></fieldset>";

            return exError + privateFormatException(e.InnerException);
        }

    protected string formatException(Exception e)
    {
        var exError = "<form>";
        if (e == null)
        {
            throw new ArgumentNullException("e");
        }
        exError += privateFormatException(e);
        return exError + "</form>";
    } 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-24T04:42:20.180

我不确定下面的代码是否可以解决它。它可能需要某种格式。

```
protected string formatException(Exception e)
{
    var exError = "<form>";
        if (e == null)
        {
            throw new ArgumentNullException("e");
        }
        exError += "<fieldset><legend><a href='#'>" +
                  "<span class='show-expanded'>collapse message</span>" +
                  "<span class='show-collapsed'>expand message</span>" +
                  "</a></legend><p>" + e.Message + "</p></fieldset>";
        exError += "<fieldset><legend><a href='#'>" +
                  "<span class='show-expanded'>collapse trace</span>" +
                  "<span class='show-collapsed'>expand trace</span>" +
                  "</a></legend><p>" + e.StackTrace + "</p></fieldset>";

        if (e.InnerException != null)
        {
            exError += formatException(e.InnerException);
        }
    return exError + "</form>";

} 
```

编辑

```
protected string FormatException(Exception e)
{
    if (e == null)
    {
        throw new ArgumentNullException("e");
    }
    var exError = "<form>";
    exError += FormatExceptionInternal(e);
    return exError + "</form>";
}

private string FormatExceptionInternal(Exception e)
{
    var exError = "";        
    exError += "<fieldset><legend><a href='#'>" +
              "<span class='show-expanded'>collapse message</span>" +
              "<span class='show-collapsed'>expand message</span>" +
              "</a></legend><p>" + e.Message + "</p></fieldset>";
    exError += "<fieldset><legend><a href='#'>" +
              "<span class='show-expanded'>collapse trace</span>" +
              "<span class='show-collapsed'>expand trace</span>" +
              "</a></legend><p>" + e.StackTrace + "</p></fieldset>";

    if (e.InnerException != null)
    {
        exError += FormatExceptionInternal(e.InnerException);
    }
    return exError;    
} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-05-24T04:59:13.480

您的**FormatException**方法应该是这样的，**不需要将 exError 变量声明为类级别**，在函数中声明它并返回..

```
 protected string formatException(Exception e)
        {
            var exError = string.Empty;
            if (e == null)
            {
                throw new ArgumentNullException("e");
            }
            exError += "<fieldset><legend><a href='#'>" +
                      "<span class='show-expanded'>collapse message</span>" +
                      "<span class='show-collapsed'>expand message</span>" +
                      "</a></legend><p>" + e.Message + "</p></fieldset>";
            exError += "<fieldset><legend><a href='#'>" +
                      "<span class='show-expanded'>collapse trace</span>" +
                      "<span class='show-collapsed'>expand trace</span>" +
                      "</a></legend><p>" + e.StackTrace + "</p></fieldset>";

            if (e.InnerException != null)
            {
                exError += formatException(e.InnerException);
            }
            return exError;

        } 
```

你可以这样调用这个函数，我希望它也可以用于递归。使用上述方法是

```
 StringBuilder sb = new StringBuilder();
   sb.Append("<form>");
   sb.Append(formatException(new Exception()));// pass your own exception
   sb.Append("</form>");
   string strException = sb.ToString(); 
```

在你的情况下，通过你自己的例外......

# c# - C# 中的 VB.Net 等价物？

> ID：10731208
> 
> 赞同：-3
> 
> 时间：2012-05-24T04:34:01.713
> 
> 标签：c#, vb.net, winforms

我在 VB 中验证它的 KeyPress 事件上的文本框。

VB.Net

```
If InStr("0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz`~!@#$%^&*()_+|\[]{};:<>/?,.'" & """" & Chr(8), Chr(KeyAscii)) = 0 Then KeyAscii = 0 
```

它在 C# 中的等价物是什么？谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-24T04:39:31.927

```
if (Strings.InStr("0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz`~!@#$%^&*()_+|\\[]{};:<>/?,.'" + "\"" + Strings.Chr(8), Strings.Chr(KeyAscii)) == 0)
KeyAscii = 0; 
```

礼貌[Telerik 转换器](http://converter.telerik.com/)

您将需要参考具有[String.InStr](http://msdn.microsoft.com/en-us/library/microsoft.visualbasic.strings.instr.aspx)方法实现的 Microsoft.VisualBasic 库。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-24T04:44:55.563

```
if (Strings.InStr("0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz`~!@#$%^&*()_+|\\[]{};:<>/?,.'" + "\"" + Strings.Chr(8), Strings.Chr(KeyAscii)) == 0)
    KeyAscii = 0; 
```

我用这个[转换器](http://www.developerfusion.com/tools/convert/vb-to-csharp/)

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-05-24T04:42:30.413

来自[DeveloperFusion](http://www.developerfusion.com/tools/convert/vb-to-csharp/)：

```
if (Strings.InStr("0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz`~!@#$%^&*()_+|\\[]{};:<>/?,.'" + "\"" + Strings.Chr(8), Strings.Chr(KeyAscii)) == 0)
KeyAscii = 0; 
```

来自[代码翻译](http://www.carlosag.net/tools/codetranslator/)：

```
if (((("0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz`~!@#$%^&*()_+|\\[]{};:<>/?,.\'" + ("\"" + '\8')).IndexOf(((char)(KeyAscii))) + 1) 
        == 0))
{
KeyAscii = 0;
} 
```

【不知道哪个是对的！概率：第一个]

# postgresql - PostgreSQL：如何获取先前的插入时间戳

> ID：10731211
> 
> 赞同：3
> 
> 时间：2012-05-24T04:34:08.523
> 
> 标签：postgresql, timestamp

假设我有桌子

```
create table foo (
    insert_current timestamp default now(),
    insert_previous timestamp,
    bar int primary key,
    baz varchar(10)
); 
```

当新批次到达时，数据将不时被替换。我想跟踪上一批插入的时间以及当前时间戳。什么是这样做的好方法？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-24T04:50:54.763

更新行时，复制`insert_current`to的值`insert_previous`并设置`insert_current`为当前时间戳：

```
UPDATE foo
   SET baz = 'whatever',
       insert_previous = insert_current,
       insert_current  = NOW()
 WHERE bar = 1; 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-24T07:04:26.930

我将创建一个触发器，在 UPDATE 语句上自动设置 insert_current 和 insert_previous。

首先，创建触发函数：

```
CREATE OR REPLACE FUNCTION do_update() RETURNS "trigger"
AS $$
BEGIN
    NEW.insert_previous := OLD.insert_current;
    NEW.insert_current := NOW();
    return NEW;
END;
$$
LANGUAGE plpgsql; 
```

然后将触发器添加到您的表中：

```
CREATE TRIGGER do_update
BEFORE UPDATE ON foo
FOR EACH ROW
EXECUTE PROCEDURE do_update(); 
```

# mysql - 具有特定条件的 sql SELECT 查询

> ID：10731212
> 
> 赞同：-2
> 
> 时间：2012-05-24T04:34:33.850
> 
> 标签：mysql, sql, jdbc

我有 2 行的 MySQL 表，即用户名的“名称”和用户端口的“端口”。

当我得到一些条件时，我想从端口行获取端口号，

**示例：如果 nama = Louis，我想获取 Louis 的端口号**

注意：我使用 JDBC

我应该使用什么 MySQL 命令？

我已经尝试过这个命令（如下）但仍然失败：

```
 ResultSet rslset = statement.executeQuery("select cast(case when 
 nama='"+name+"') port from user"); 
```

注意：变量“名称”是要检查的名称

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-24T04:44:54.020

尝试使用**[PreparedStatement](http://www.roseindia.net/jdbc/jdbc-mysql/TwicePreparedStatement.shtml)**

```
/** other codes here **/
String sql = "SELECT port FROM user WHERE nama = ?";
/** con is you active Connection **/
PreparedStatement prest = con.prepareStatement(sql);
prest.setString(1, name); /** this is where you assign the parameter **/
ResultSet rs1 = prest.executeQuery();
/** other codes here **/ 
```

这将避免你从 sql 注入。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-24T04:39:50.557

```
 ResultSet rslset = statement.executeQuery("select port from user where nama='"+name+"'"); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-24T04:41:09.917

试试这个

```
select port from user where name='(nameyouwant)'; 
```

我希望它对你有用。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-24T04:45:32.460

在您的语句中输入这样的查询....

```
"select port from user where nama='Louis'" 
```

# android - 检查 Facebook 中的已撤销访问权限和密码更改

> ID：10731213
> 
> 赞同：3
> 
> 时间：2012-05-24T04:34:46.377
> 
> 标签：android, facebook

我正在使用 Facebook SDK 将我的原生 Android 应用程序连接到 Facebook。我能够显示登录页面并让用户通过他们的 facebook 帐户登录到我的应用程序。但根据：[https ://developers.facebook.com/docs/mobile/android/build/#sso](https://developers.facebook.com/docs/mobile/android/build/#sso)

我必须注意两项活动，例如撤销访问权限和更改密码。响应参数将返回以下结果：

`User revoked access to your app: {"error":{"type":"OAuthException","message":"Error validating access token: User 1053947411 has not authorized application 157111564357680."}}`

`OR when password changed: {"error":{"type":"OAuthException","message":"Error validating access token: The session is invalid because the user logged out."}}`

现在，我的问题是，如何处理或捕获以下错误？谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-24T06:20:38.867

有一个官方指南：[处理无效和过期的访问令牌](http://developers.facebook.com/docs/authentication/access-token-expiration/)。

对于 android 它指出：

> **安卓原生应用**
> 
> 您可以通过检查 onComplete 方法的响应参数来检测访问令牌错误。在这种情况下，您将再次需要调用 facebook.authorize() 来重新验证用户并生成新的访问令牌。

# objective-c - 结构字节对齐问题 XCode 4.3

> ID：10731217
> 
> 赞同：1
> 
> 时间：2012-05-24T04:35:27.187
> 
> 标签：objective-c, xcode, struct, alignment

我正在尝试使用 struct 来映射 BitMap 文件的标题。似乎编译器正在进行 4 字节（32 位）对齐，但我需要 2 字节。我试图通过编译器指令来改变它，如下所示

```
#pragma pack(2) 
```

和

```
__attribute__ ((aligned(xx))); 
```

这两个似乎没有任何效果。还有另一种方法可以做到这一点吗？我在 Mac OS X Lion 上使用 XCode 4.3。我测试了 Apple LLVM 和 Apple GCC 编译器。

这是结构类型定义

```
typedef struct {
    int16_t bfType; 
    int32_t bfSize;
    int16_t bfReserved1;
    int16_t bfReserved2;
    int32_t bfOffBits;
    int32_t biSize;
    int32_t biWidth;
    int32_t biHeight;
    int16_t biPlanes;
    int16_t biBitCount;
    int32_t biComression;
    int32_t biSizeImage;
    int32_t biXPelsPerMeter;
    int32_t biYPelsPerMeter;
    int32_t biClrUsed;
    int32_t biClrImportant;
} THeader; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-29T17:07:37.017

嗯？在我的机器上工作？请记住，pack pragma 可能在其他地方被覆盖？

```
#include <inttypes.h>
#include <stddef.h>

#pragma pack(push,2)

typedef struct {
int16_t bfType; 
int32_t bfSize;
int16_t bfReserved1;
int16_t bfReserved2;
int32_t bfOffBits;
int32_t biSize;
int32_t biWidth;
int32_t biHeight;
int16_t biPlanes;
int16_t biBitCount;
int32_t biComression;
int32_t biSizeImage;
int32_t biXPelsPerMeter;
int32_t biYPelsPerMeter;
int32_t biClrUsed;
int32_t biClrImportant;
} THeader;

#pragma pack(pop)

#include <stdio.h>

int main(void)
{
printf("%lu\n", offsetof(THeader, bfType));
printf("%lu\n", offsetof(THeader, bfSize));
printf("%lu\n", offsetof(THeader, bfReserved1));
printf("%lu\n", offsetof(THeader, bfReserved2));
return 0;
}

$ clang -o pack pack.c
$ ./pack
0
2
6
8 
```

# iphone - 在线上传 iOS 构建

> ID：10731219
> 
> 赞同：2
> 
> 时间：2012-05-24T04:35:58.247
> 
> 标签：iphone

到目前为止，我正在上传 ios build on testflight。但是我在上传任何构建时收到以下错误（我也尝试再次上传我已经上传的以前的构建）。

> IPA 无效：找不到 Info.plist 中指定的可执行文件 - 检查 CFBundleExecutable 键的值。

我需要上传构建。有人可以向我推荐一个除 testflight 之外的站点，我可以在其中上传 ios 构建或 ipa 文件吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-10T08:23:20.830

您可以使用的另一个站点是[http://diawi.com](http://diawi.com)，我现在在我的项目中使用它，非常有帮助。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-01T11:09:44.503

我们遇到了 CFBundleExecutable ${EXECUTABLE_NAME} 的问题。例如，我们的 iOS 应用程序称为 OurAppName。

在模拟器中运行良好，但通过管理器存档和部署时说 CFBundleExecutable 不是可执行文件。

我们检查了 plist，CFBundleExecutable 的值是“ourappname”。我们解压缩了 ipa > app 文件夹（见下文），有一个名为 ourappname 的文件，但它比预期的要小，而不是 exe（USE:ls -l 应该在 -rwxr-xr-x 末尾有 x ）。

错误是由一个名为“ourappname”的文本文件引起的，当构建存档时，它将它作为 exe 而不是 OurAppName。答案是重命名或删除与我们的 exe 同名的文件。进行完全干净的构建。并重新检查最终的 ipa。

要查看 OurAppName.ipa 的内容：

重命名为 OurAppName_ipa.zip（忽略警告）：

双击 OurAppName_ipa.zip 以打开（创建包含 OurAppName.app 的 Payload 文件夹）：

将 OurAppName.app 重命名为 OurAppName_app（忽略警告会将应用程序包更改为文件夹）。

打开 OurAppName_app 文件夹，查找 ...info.plist for app。

检查 CFBundleExecutable 是否指向 OurAppName。

在文件夹中找到 OurAppName 执行 ls -l 确保它可执行（USE:ls -l 应该在 -rwxr-xr-x 的末尾有 x）。

试飞提示：

如果 testflight 下载在 80% 后失败，并且无法下载，则使用 Organizer 将您构建的存档拖到 iOS 设备上。

单击设备 > 应用程序和底部的 +（我认为将 ipa 拖到管理器中的设备也会安装它）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-24T04:48:45.620

在您的 info.plist 文件中以源代码形式打开并检查 CFBundleExecutable 键是否存在并确保它写为

```
<key>CFBundleExecutable</key>
<string>${EXECUTABLE_NAME}</string> 
```

# javascript - 用javascript编码2D游戏物理，不平坦的地面和旋转

> ID：10731221
> 
> 赞同：2
> 
> 时间：2012-05-24T04:36:09.823
> 
> 标签：javascript, 2d, game-physics

我的网络编程课程中有一个小项目，我应该用 javascript 制作一个小游戏。这就是游戏：两门大炮固定在游戏空间的两端。大炮轮流互相射击，玩家将大炮倾斜到一定程度并选择一个力量来射击炮弹。如果有时间，我正在考虑将添加许多其他内容。

我找到了一个不错的网站[http://www.rodedev.com/tutorials/gamephysics/](http://www.rodedev.com/tutorials/gamephysics/)来帮助我学习 2d 物理，并且我已经进行了一些测试，请参见下面的代码。然而，我确实有两个大问题：

1.  非平坦的地板/地面。
2.  回转！

现在脚本只检查 floorDiv 的 style.top 值，因此框将始终“降落”在这一行像素上。如果我想拥有可变高度的地形，这还不够。你们对如何实现这一点有任何想法吗？无论如何要检查特定像素的颜色吗？如果是这样，我可以检查非天空或地面彩色像素并将其作为着陆标准。

我需要旋转大炮，以便玩家可以调整他们的目标！我想我会制作两个不同的大炮对象，大炮“基地”和大炮枪管。然后我可以在玩家按键时旋转炮筒。不幸的是，轮换在网络编程中似乎很难。[我在http://code.google.com/p/jquery-rotate/](http://code.google.com/p/jquery-rotate/)找到了这个 jquery 插件，但我没有让它像我想要的那样工作。尽管我已经确保炮弹在图片中居中，但也有一些平移，而不仅仅是旋转。我想这可能是因为图片没有围绕它的中心旋转？请参阅下面的轮换测试代码（如果您想尝试该代码，则必须下载轮换插件）。我想我可以为每个角度拍一张照片，但这似乎有点浪费，因为否则大炮没有实际的视觉变化。

另外，如果我想同时为多个对象设置动画，你认为我应该只更改同一个 gameloop 函数中的所有对象吗？对此有什么想法吗？

以下是物理测试的代码

CSS 文件

```
#moveDiv {
    position:absolute;
    width:100px;
    height:100px;
    background-color:#000;
}

#floorDiv {
    position:absolute;
    width:800px;
    height:1px;
    background-color:#2E2;
}

table {
text-align:right;

}
table input {
    width:35px;
} 
```

HTML 文件

```
<script type="text/javascript">
//global vars
var gravity = 0.5;
var friction = 0.5;
var moving = false;
var moveDiv;
var floorDiv;
var yPos;
var xPos;
var floorPos;
var velocity_y = 0;
var velocity_x = 0;
</script>
</head>

<body onload="initialize();">
<input type="button" value="fall" onclick="fall();"></button>
<input type="button" value="Push" onclick="push();"></button>
<input type="button" value="reset" onclick="reset();"></button>

<table>
<tr>
<td>Angle: <input type="text" value="45" id="angle" /></td>
<td>Speed: <input type="text" value="10" id="speed"/></td>
</tr>
<tr>
<td>Gravity: <input type="text" value="0.5" id="gravity" /></td>
<td>Friction: <input type="text" value="0.5" id="friction" /></td>
</table>

<div id="moveDiv"></div>
<div id="floorDiv"></div>
</body>
</html> 
```

js文件

```
function initialize() {
    moveDiv = document.getElementById('moveDiv');
    floorDiv = document.getElementById('floorDiv'); 

    moveDiv.style.left=400;
    moveDiv.style.top=50;

    floorDiv.style.left=200;
    floorDiv.style.top=400;
}//end initialize

function fall() 
{
    moving=true;
    var angle = 275;
    var rad = angle / (Math.pi * 2);
    var scale_x = Math.cos(rad);
    var scale_y = Math.sin(rad);

    var moveDivSpeed = 0;

    gameLoop();

}//end fall

function push() 
{
    moving=true;
    var angle = document.getElementById('angle').value;
    var rad = angle / (Math.PI * 2);
    var scale_x = Math.cos(rad);
    var scale_y = Math.sin(rad);
    var moveDivSpeed = document.getElementById('speed').value;
    friction = document.getElementById('friction').value;
    gravity = document.getElementById('gravity').value;
    velocity_x = moveDivSpeed*scale_x;
    console.log("original velocity_x is " + velocity_x);
    velocity_y = moveDivSpeed*scale_y;
    gameLoop();
}

function gameLoop () {
    //console.log("gameLoop start");
    var len = moveDiv.style.top.length;
    var presentTop = parseInt(moveDiv.style.top.substr(0, len-2));

    var lenX = moveDiv.style.left.length;
    var presentLeft = parseInt(moveDiv.style.left.substr(0, lenX-2));

    var len2 = floorDiv.style.top.length;
    var floorTop = parseInt(floorDiv.style.top.substr(0, len2-2));

    if (moving == true) 
    {
        velocity_y -= gravity;

        if ((presentTop+100) - velocity_y < floorTop) 
        { //if moveDiv hasn't hit the floor yet...
            moveDiv.style.top = presentTop - velocity_y;
            moveDiv.style.left = presentLeft + velocity_x;
        }
        else if (presentTop + 100 == floorTop) //if moveDiv is ON the floor
        {
            velocity_x = velocity_x*(1-friction);
            moveDiv.style.left = presentLeft + velocity_x;
            console.log("on the floor");
            console.log("friction is " + friction);
            console.log(" and velocity_x is " + velocity_x);
            console.log("moveDiv.style.left is " +moveDiv.style.left);

            if (velocity_x <= 1)
            {
                console.log("stopped moving");
                moving = false;
            }

        }
        else //if moveDiv will hit the floor/go through the floor this time
        {
            var diff = floorTop - (presentTop + 100);
            moveDiv.style.top = presentTop + diff;
            moveDiv.style.left = presentLeft + velocity_x;
        }
    }
    else if (moving == false) 
    {
        clearTimeout(runAgain);
        console.log("else if moving == false");
        return false;
    }

    var runAgain = setTimeout("gameLoop()", 5);
    //console.log("end of gameLoop");
    return false;
}//end gameLoop

function reset () {
    moving = false;

    moveDiv.style.left=400;
    moveDiv.style.top=50;

    floorDiv.style.left=200;
    floorDiv.style.top=400;
}//end reset 
```

旋转测试代码（仅 html 文件和旋转插件）

```
<html>
<head>
<script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js"></script>
<script type="text/javascript" src="jquery.rotate.1-1.js"></script>
<script type="text/javascript">
    $(document).ready(function() {

        $("#hide").click(function() {
            $("p").hide(500);
            $(".box").animate({height:300, opacity:0}, 1000);
        });

        $("#show").click(function() {
            $("p").show(500);
            $(".box").animate({height:100, opacity:100}, 1000);
        });

        $(".box").mouseenter(function() {
            $(".box").animate({height:300, opacity:0}, 500);
        });

        $(".box").mouseleave(function() {
            $(".box").animate({height:100, opacity:10}, 1000);
        });

        $("#move").click(function() {
            $("#grey").animate({left: -300, top: -100}, 1000)
            .animate({left: -600, top: 200}, 1000);
        });

        $("#cannonball").click(function() {
            $("#cannonball").animate({"left": "+=300", "top": "-=100"}, 500)
            .animate({"left": "+=300", "top": "+=100"}, 500);

        });

        $("p.fading").css("opacity","0.3");
        $("p.fading").hover(function() {
            $(this).stop().animate({opacity: 1.0}, "slow");}, 
                function () {
                $(this).stop().animate({opacity: 0.3}, "slow");
            });

        $("#rotateRight").click(function() {
            $("#cannonball").rotate(10);
        });

    }); //end jquery document.ready scripts

function initialize () {
    document.getElementById('box').style.top = 250;
}
</script>

<style type="text/css">
body {
    background-color: #ccc;
}

.box {
    background-color: #000;
    width:100px;
    height:100px;
    margin-left:300px;
}

.divMove {
    position:relative;
    top:350px;
    float:right;
    background-color: #ddd;
    width:100px;
    height:100px;
    margin-right:100px;
}   

#cannonball {
    position: relative;
}
</style>
</head>
<body onload="initialize();">
<p>Let's make this disappear and appear.</p>

<button id="hide">Hide</button>
<button id="show">Show</button>
<button id="move">Move</button>
<button id="rotateRight">Rotate+</button>

<div id="box" class="box">
</div>

<div class="divMove" id="grey">
</div>

<img src="http://dl.dropbox.com/u/18833130/Webprogrammering/test/cannonball.png" id="cannonball" border="1" />
<p class="fading">This is a paragraph that fades. Let's see how it looks.</p>
</body>
</html> 
```

我为长篇大论和代码量道歉，但如果你想尝试一下，你基本上可以复制粘贴，我认为这样讨论会更容易！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2020-05-15T15:35:47.013

> 我想我会制作两个不同的大炮对象，大炮“基地”和大炮枪管。然后我可以在玩家按键时旋转炮筒。不幸的是，轮换在网络编程中似乎很难。

最简单的（现在）是使用[CSS`transform`属性](https://developer.mozilla.org/en-US/docs/Web/CSS/transform)：

```
const angleInputElement = document.getElementById('angle');
const degrees = angleInputElement.value;
const barrelElement = document.getElementById('barrel'); // I don't see this in your sample though
barrelElement.style.transform = `rotate(${degrees}deg)`; 
```

> 另外，如果我想同时为多个对象设置动画，你认为我应该只更改同一个 gameloop 函数中的所有对象吗？对此有什么想法吗？

对于这个应该可以正常工作的简单实现。

# jquery - jQuery：点击放大和移动

> ID：10731222
> 
> 赞同：1
> 
> 时间：2012-05-24T04:36:28.280
> 
> 标签：jquery, html, css, jquery-animate

我对 jQuery 提出了另一个问题：
所以我有这个代码：

```
$(document).ready(function(){
$(this).click(function(){
    $("#block1").animate({width:7em,height:7em});
    $("#block2").animate({width:7em,height:7em});
    $("#block3").animate({width:7em,height:7em});
    $("#block4").animate({width:7em,height:7em});
    $("#block5").animate({width:7em,height:7em,function(){
        $(this).animate({width:20em,height:20em,top:4em,left:8em});
    });
});
}); 
```

这应该使一些“便利贴”形状的框变为
1：将所有框恢复到其原始位置和大小
2：弹出其原始位置以进入屏幕中间，同时单击时放大..
你知道为什么这不起作用吗？（我不想要css悬停，但如果有另一种方法可以通过css做到这一点，我可以接受！！）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-24T05:29:16.553

```
$(document).ready(function(){
  $(this).click(function(){
    $("#block1").animate({width:"7em",height:"7em"});
    $("#block2").animate({width:"7em",height:"7em"});
    $("#block3").animate({width:"7em",height:"7em"});
    $("#block4").animate({width:"7em",height:"7em"});
    $("#block5").animate({width:"7em",height:"7em"},function(){
       $(this).animate({width:"20em",height:"20em",top:"4em",left:"8em"});
    });
  });
}); 
```

1) 第 7 行缺少右大括号 "$("#block5").animate({width:"7em",height:"7em" '}' ,function(){"

2）你还需要包含jquery文件

3）动画你需要给出大于元素当前高度和宽度的高度和宽度才能看到效果，即超过7em，因为在css中你已经给出了7em

4）我在您的 jsFiddle 链接中找到的元素也没有 Id

上述所有要点均基于 您提供的链接[http://jsfiddle.net/q5RwE/2/](http://jsfiddle.net/q5RwE/2/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-24T05:15:50.193

像这样更改您的代码

.animate({width:"7em",height:"7em"});

# java - 如何确定 8 位 WAV 文件是否已签名或未签名，使用 Java 且不使用 javax.sound

> ID：10731226
> 
> 赞同：6
> 
> 时间：2012-05-24T04:36:42.997
> 
> 标签：java, bytearray, wav, unsigned, signed

我需要通过仅读取文件来知道 8 位的“.wav”是签名的还是未签名的 PCM。我不能使用“javax.sound.sampled.*”或 AudioSystem 库。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-06-21T03:49:23.290

在 wav 文件中，8 位样本存储为无符号字节，范围从 0 到 255。16 位样本存储为 2 的补码中的有符号整数。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2017-05-12T14:05:12.760

8 位（或更低）的 WAV 文件始终是无符号的。9 位或更高位总是有符号的：

> 每个样本都包含在一个整数*i*中。*i*的大小是包含指定样本大小所需的最小字节数。首先存储最低有效字节。表示样本幅度的位存储在*i*的最高有效位中，其余位设置为零。
> 
> 例如，如果样本大小（记录在**nBitsPerSample**中）为 12 位，则每个样本都存储在一个两字节整数中。第一个（最低有效）字节的最低有效四位设置为零。
> 
> 各种大小的PCM波形样本的数据格式和最大值最小值如下：
> 
> [![在此处输入图像描述](../Images/7ceb0b2b4dea438aab93e00552e11928.png)](https://i.stack.imgur.com/c8s8c.png)

[多媒体编程接口和数据规范 1.0](http://www-mmsp.ece.mcgill.ca/Documents/AudioFormats/WAVE/Docs/riffmci.pdf) - IBM/Microsoft，1991 年 8 月

# objective-c - 为什么自定义缩放和翻转动画后视图会在任务栏下绘制？

> ID：10731232
> 
> 赞同：1
> 
> 时间：2012-05-24T04:37:31.430
> 
> 标签：objective-c, ios, cocoa-touch, uinavigationcontroller, core-animation

[与上一个问题](https://stackoverflow.com/q/10468333/79202)中的代码相同，但问题不同。

我创建了一个自定义动画来将视图控制器添加到 UINavigationController。此代码将视图缩放到原始大小的 80%，然后翻转它，然后将其缩放回原始大小：

```
[UIView animateWithDuration:scaleDuration delay:0 options:UIViewAnimationOptionCurveEaseIn animations:^{
    // Scale the controllers' views down.
    self.view.transform = CGAffineTransformScale(self.view.transform, 0.8, 0.8);
} completion:^(BOOL finished) {
    // Transition to the new view and push on the new view controller.
    [UIView transitionWithView:self.view duration:1 options:UIViewAnimationOptionCurveLinear | UIViewAnimationOptionTransitionFlipFromLeft animations:^{
        [self pushViewController:viewController animated:NO];
    } completion:^(BOOL finished) {
        [UIView animateWithDuration:scaleDuration delay:0 options:UIViewAnimationOptionCurveLinear animations:
^{
            // Scale back to the original size.
            self.view.transform = CGAffineTransformScale(self.view.transform, 1.25, 1.25);
        } completion:nil];
    }];
}]; 
```

问题是，当动画完成时，新视图显示得非常好，除了它是在任务栏下绘制的。也就是说，它在屏幕原点 0,0 而不是 0,20 处绘制。“状态栏”选项在 IB 中设置（设置为“黑色”），如果我使用标准 UINavigationController 推送动画，自然不会发生这种情况，只有我的自定义动画。如果我在动画后旋转设备，旋转时重绘会将其移动到正确的位置。但我如何让它首先做到这一点？

`pushViewController:animated:`作为一个额外的皱纹，如果我将调用线向下移动到块，它不会在任务栏下绘制`completion:`（尽管随后视图似乎会翻转到自身，然后突然显示新视图，当然）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-26T07:31:06.443

我发现到目前为止唯一的解决方法是隐藏导航栏然后显示它。

设置转换后，添加以下 2 行：

```
[self setNavigationBarHidden:YES];
[self setNavigationBarHidden:NO]; 
```

它很丑但有效，我也在寻找更好的解决方案。

注意：layoutsubview、setNeedsLayout 不起作用。

# ios - 如何正确转义 % 符号

> ID：10731233
> 
> 赞同：1
> 
> 时间：2012-05-24T04:37:37.247
> 
> 标签：ios, nsstring, nsurl

我无法正确获取字符串 URL 的格式。所需的输出是这样的：

```
http://gdata.youtube.com/feeds/api/videos?q=corgi&start-index=1&max-results=50&v=2&fields=entry%5Blink/@rel='http://gdata.youtube.com/schemas/2007%23mobile'%5D 
```

这是我开始的代码：

```
NSString *urlRequest = [NSString stringWithFormat:@"http://gdata.youtube.com/feeds/api/videos?q=corgi&start-index=%u&max-results=%u&v=2&fields=entry[link/@rel='http://gdata.youtube.com/schemas/2007%23mobile']", dataStartIndex, dataIncrements];
NSURL *url = [NSURL URLWithString:urlRequest]; 
```

它最后一直在乱码“％23mobile”并使其成为“20072obile”。我尝试在 @ 符号之前使用 \ ，但这不起作用。我究竟做错了什么？

奇怪的是，如果我把它分成两部分，它可以正常工作：

```
NSString *urlRequest = [NSString stringWithFormat:@"http://gdata.youtube.com/feeds/api/videos?q=corgi&start-index=%u&max-results=%u&v=2&fields=entry", dataStartIndex, dataIncrements];

NSURL *url = [NSURL URLWithString:[urlRequest stringByAppendingString:@"[link/@rel='http://gdata.youtube.com/schemas/2007%23mobile']"]]; 
```

如果我没有任何参数（dataStartIndex，dataIncrements），它也可以工作。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-24T04:40:24.083

添加一个额外的 % 来转义 %，因为您提供的字符串是格式字符串，而不是纯字符串。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-24T04:40:52.380

你需要`%23`与另一个人一起逃避`%`，才能做出`2007%%23mobile`。例如：

```
NSString *urlRequest = [NSString stringWithFormat:@"http://gdata.youtube.com/feeds/api/videos?q=corgi&start-index=%u&max-results=%u&v=2&fields=entry[link/@rel='http://gdata.youtube.com/schemas/2007%%23mobile']", dataStartIndex, dataIncrements]; 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-24T04:45:20.230

您可以使用 ：-

```
NSString *string=[@"yourUrlString" stringByAddingPercentEscapesUsingEncoding:NSUTF8StringEncoding]; 
```

# android - 在 Delphi 2007 中打开 Android 数据库

> ID：10731235
> 
> 赞同：1
> 
> 时间：2012-05-24T04:38:17.153
> 
> 标签：android, delphi

刚刚完成了我的 PC 软件的 Android 应用程序版本......现在到第 2 步，设计了一个实用程序，将 Android 数据库导入 PC 版本数据库，寻找这样做的最佳方法......因为我相信 Android 附带 SQLite 版本 3.4.0，什么是用于 Delphi 2007 开源和免费的最好的 delphi 组件会很好，但不是必需的。

还有一件事......我正在使用[http://www.componentace.com](http://www.componentace.com)的 Absolute Database作为我的 PC 版本数据库

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-24T05:16:56.717

无需直接从 Delphi 访问 SQLite 数据库：如果您的应用程序可以与 Web 服务器通信并使用 HTTP 发布其数据，那么在 Delphi 端，您可以使用 Indy 或 Synapse 开源 TCP 库从该服务器检索数据，再次使用带有标准格式（如 JSON 或 XML）的消息正文的 HTTP。然后，Delphi 应用程序可以使用 Synapse 或 NativeXml 之类的库解析数据，并将其插入到绝对数据库表中。

# android - Android：使用网格视图或其他视图来显示图像

> ID：10731236
> 
> 赞同：1
> 
> 时间：2012-05-24T04:38:21.000
> 
> 标签：android, image, gridview

我正在制作一个应用程序，我必须在其中制作像 google play 这样的结构![在此处输入图像描述](../Images/af706701a751d90eac19ae07bcd1ff68.png)

我不知道它是**网格视图还是其他东西**。我有动态图像，我必须显示如上图所示的图像，我不知道如何显示如上图所示的图像。对此的任何帮助将不胜感激.

# android - android:priority 在模拟器中运行良好，而不是在移动设备中

> ID：10731237
> 
> 赞同：0
> 
> 时间：2012-05-24T04:38:26.110
> 
> 标签：android, broadcastreceiver, intentfilter

创建了一个具有广播接收器的应用程序，要求它必须从 SMS 中过滤关键字并进行一些活动。包含在 android 清单文件中。它在模拟器中运行良好，但在手机中无法运行。

```
<intent-filter android:priority="99999999" >
   <action android:name="android.provider.Telephony.SMS_RECEIVED" />
<intent-filter> 
```

Go SMS 优先级整数 - [https://stackoverflow.com/a/6877010/1047130](https://stackoverflow.com/a/6877010/1047130)

有一些疑问，优先级的最高整数是多少

# cmd - `myprogram` 和 `start /w myprogram` 有什么区别？

> ID：10731245
> 
> 赞同：2
> 
> 时间：2012-05-24T04:39:24.080
> 
> 标签：cmd

在 Batch ( `cmd.exe`) 脚本中，直接运行命令有什么区别：

```
myprogram 
```

并使用它们运行它们`start /w`？

```
start /w myprogram 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-24T04:43:20.370

[http://support.microsoft.com/kb/198044](http://support.microsoft.com/kb/198044)

当您使用此方法 (/w) 时，批处理文件中的程序将按顺序启动。在您退出前一个程序之前，下一个程序不会启动。

# ruby-on-rails - 无法加载此类文件 -- bootstrap/sass

> ID：10731246
> 
> 赞同：12
> 
> 时间：2012-05-24T04:39:30.710
> 
> 标签：ruby-on-rails, gem

我正进入（状态

```
cannot load such file -- bootstrap/sass 
```

我已经安装了 bootstrap-sass-2.0.3.1、sass-3.1.18、sass-rails-3.2.5、coffee-rails-3.2.2 和 uglifier-1.2.4

为什么我会收到此错误？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2014-06-03T20:22:31.553

我有点超前了，看来我还没跑`gem install bootstrap-sass`……

哎呀。

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2012-05-24T04:49:49.753

将 bootstrap-sass 放入 Gemfile 的 assets 组

```
group :assets do
    gem 'sass-rails',   '~> 3.2.5'
    gem 'coffee-rails', '~> 3.2.2'
    gem 'uglifier', '>= 1.2.4'
    gem 'bootstrap-sass', '~> 2.0.3.1'
end 
```

# javascript - 如何调用 $.post 并设置内容类型 Multipart/form-data 数据

> ID：10731251
> 
> 赞同：0
> 
> 时间：2012-05-24T04:40:16.420
> 
> 标签：javascript, jquery, jakarta-ee, post, multipartform-data

我的 JSP 页面中有一个 java 脚本函数

```
 function submitProductCategoryForm()
    {
        document.getElementById('isSave').value="1";
        var elements=document.getElementById('addProductCategoryFrom').elements;
        var url = "addProductCategory.jsp?";
       for (var i = 0; i < elements.length; i++)
          url += elements[i].id + "=" + encodeURIComponent($("#" + elements[i].id).val()) + "&";
       $.post(url, function(data)
       {
            alert("Function Complete");
       }); 
   } 
```

它调用一个jsp页面，在这里我将数据保存在数据库中。

现在在这个表单上有一个文件输入也在那里，所以必须将内容类型设置为multipart/form-data

但是当我调用这个函数时，我发现了错误

> java.io.IOException：发布的内容类型不是 multipart/form-data

我的表格是这样的

```
<form action="addProductCategory.jsp" method="post" enctype="multipart/form-data" id="addProductCategoryFrom"> 
```

所以请我如何将内容类型设置为多部分。

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-01-17T17:01:56.687

我使用了 FormData 对象，它似乎可以满足您的要求，请检查我的问题/解决方案[https://stackoverflow.com/a/21191491/995514](https://stackoverflow.com/a/21191491/995514)

```
$("#theForm").submit(function(e){
    e.preventDefault();
    var theForm = new FormData($(this)[0]);
    $.ajax({
        url: '.../rest/save',
        type: 'POST',
        data: theForm,
        cache, false,
        contentType: false,
        processData: false
    });
    return false;
}); 
```

# php - 使用 php 提取 rar 文件失败并出现警告

> ID：10731253
> 
> 赞同：1
> 
> 时间：2012-05-24T04:40:20.273
> 
> 标签：php

[我只是安装 php rar 扩展并使用来自http://www.php.net/manual/en/rar.examples.php](http://www.php.net/manual/en/rar.examples.php)的以下示例对其进行测试

但是失败了，文件名被打印出来了，但是没有文件被提取出来，我看到警告：~

> 警告：RarEntry::extract() [rarentry.extract]: ERAR_ECREATE in

```
<?php

$rar_file = rar_open('example.rar') or die("Can't open Rar archive");

$entries = rar_list($rar_file);

foreach ($entries as $entry) {
    echo 'Filename: ' . $entry->getName() . "\n";

    $entry->extract('/dir/extract/to/');
}

rar_close($rar_file);

?> 
```

我通过谷歌搜索了一段时间，但没有运气。怎么了？谢谢你 ！

> 我已经自己解决了。
> 
> 这是由于目标文件夹权限我给文件夹 777 ，然后它工作。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-28T13:49:37.467

**这个答案最初是由作者作为编辑发布的**

> 我已经自己解决了。这是由于目标文件夹权限我给文件夹 777 ，然后它工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-10-30T04:15:30.863

请不要授予该文件夹 777 权限。而是更改运行 php 命令的用户的文件夹的所有者。在我的情况下，该目录归 php 所有，`root`并且 php 在 apache 服务器的用户上运行。我所做的是：

`chown user:user my_directory`

# java - struts2中hashset的设置值

> ID：10731255
> 
> 赞同：2
> 
> 时间：2012-05-24T04:40:30.167
> 
> 标签：java, struts2, ognl

我正在使用 Struts2。我的 pojo 中有一个哈希集。我正在尝试将值提交到哈希集。我无法将我的收藏类型更改为列表。

这是pojo

```
Item{
Set<Person> personCollection;
long itemCode;

    public void setItemCode(long itemCode)
    {
        this.itemCode=itemCode;
    }
    public long getitemCode()
    {
        return itemCode;
    }
    public void setPersonCollection(Set<Person>personCollection)
    {
        this.personCollection=personCollection;
    }
    public Set<Person> getPersonCollection()
    {
        return personCollection;
    }
}

Person{
    String name;
    public void setName(String name)
    {
        this.name=name;
    }
    public String getName()
    {
        return name;
    }
} 
```

行动

```
SubmitItemAction
{
     private Item item;
     public getItem()
     {
          return item;
     }
     public setItem(Item item)
     {
          this.item=item;
     }
     public String submitItem()
     {
           dao.submit(item);
     }
} 
```

jsp

```
 <s:text name=item.personCollection[0].name/>
  <s:text name=item.personCollection[1].name/> 
```

所以这不起作用。当我使用上面的代码段提交我的 jsp 时，它会给出错误，它无法从 Item 中填充 personCollection。

那么jsp中的命名约定应该是什么。就像 personCollection 本来是我可以使用的列表一样`item.personCollection[0].someProperty`。但是你如何设置集合类型集合的名称。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-24T11:49:39.923

那么在你的提交操作中使用列表，然后你可以在 jsp 中使用这个列表和索引。

您不能在此处使用 set，因为无法使用索引访问 set

在您的业务逻辑中，将列表转换为集合，因为您可能需要 set 以获得进一步的 orm。

# php - 在 PHP 的 IF 条件中使用 OR 语句

> ID：10731260
> 
> 赞同：-2
> 
> 时间：2012-05-24T04:40:51.527
> 
> 标签：php, html, css

> **可能重复：**
> [在 PHP 中使用 URL 突出显示当前导航选项卡](https://stackoverflow.com/questions/10731052/hilighting-the-current-navigation-tab-using-url-in-php)

在没有 php 扩展的情况下调整当前选项卡不起作用

```
<?php if ("index.php" || "index"==$Current) 
  {echo "selected";}else {echo "";}?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-24T04:44:48.760

我想你想要：

```
<?php if ("index.php"==$Current || "index"==$Current) {
          echo "selected";
      }else {
          echo "";
      }
?> 
```

你写的真的没有意义。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-24T04:48:18.897

这段代码

```
if ("index.php" || "index"==$Current) 
```

已经返回 true 因为

```
if ("index.php") 
```

相同的

```
if ("index.php" != "") 
```

# java - Hibernate 4 中的 SessionFactory.openSession(Connection)

> ID：10731266
> 
> 赞同：8
> 
> 时间：2012-05-24T04:41:24.267
> 
> 标签：java, hibernate

我正在使用`SessionFactory.openSession(Connection)`. 现在在 4.0 中，此方法不可用。我应该使用哪种方法？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-05-24T04:59:24.617

您可以使用[SessionFactory.withOptions()](http://docs.jboss.org/hibernate/core/4.0/javadocs/org/hibernate/SessionFactory.html#withOptions%28%29)和[SessionBuilder.connection(Connection connection)](http://docs.jboss.org/hibernate/core/4.0/javadocs/org/hibernate/SessionBuilder.html#connection%28java.sql.Connection%29)。

**SessionBuilder 连接（连接连接）**

> 将特定连接添加到会话选项
> 
> **参数**： *connection* - 要使用的连接。
> 
> **返回**：this，用于方法链接

例子：

```
SessionBuilder sb = SessionFactory.withOptions();
Session session = sb.connection(connection).openSession(); 
```

# git - git hunk 编辑模式 - 如何删除“-”行？

> ID：10731269
> 
> 赞同：74
> 
> 时间：2012-05-24T04:41:40.340
> 
> 标签：git, patch

```
+ bbb
- aaa

# ---
# To remove '-' lines, make them ' ' lines (context).
# To remove '+' lines, delete them.
# Lines starting with # will be removed.
#
# If the patch applies cleanly, the edited hunk will immediately be
# marked for staging. If it does not apply cleanly, you will be given
# an opportunity to edit again. If all lines of the hunk are removed,
# then the edit is aborted and the hunk is left unchanged. 
```

我简直不明白什么`make them ' ' lines`意思。如何`+ bbb`只申请而不申请`- aaa`？

* * *

## 回答 #1

> 赞同：120
> 
> 时间：2012-05-24T04:42:53.283

`make them ' ' lines`表示您需要用（空格）替换`-`行前的。

 `* * *

## 回答 #2

> 赞同：24
> 
> 时间：2012-05-24T05:19:42.383

像这样的大块头：

```
+ bbb <-- line added
- aaa <-- line deleted
  ccc <-- line unchanged 
```

会变成这样的内容：

```
bbb
ccc 
```

要保留标记为删除的行（以 为前缀`'-'`），请将其转换为与上述行具有相同前缀的`unchanged`行（因此它将保持不变）：

```
+ bbb
  aaa
  ccc 
```

应用大块时，内容将如下所示：

```
bbb
aaa
ccc 
````

# regex - 正则表达式：如何匹配“除了”\ 1中的值

> ID：10731272
> 
> 赞同：-1
> 
> 时间：2012-05-24T04:42:10.913
> 
> 标签：regex

我正在名称-值对列表中寻找“额外”名称。只有名字`"ACTIVITY_nnnnn"`是有趣的。每个名称后缀`"_nnnnn"`都应该相同，如果不同，则应检测到此错误情况。

鉴于：

```
OneTwo=ThreeFour
ACTIVITY_11111=56676566
ACTIVITY_11111=ASDFASDF
ACTIVITY_22222=ASDFwSDF
ABC-123=1121
ACTIVITY_33333=ASDFASsF
ACTIVITY_11111=ASFAFA
DEF-XXY=22222 
```

在这种情况下，第一个不匹配是在`ACTIVITY_11111`vs.中`ACTIVITY_22222`。

当找到另一个“匹配”条目时，此表达式会找到匹配项：

```
ACTIVITY_(\d*=)(.|\r|\n)*ACTIVITY_\1 
```

这与我需要的完全相反......如果“Not `\1`”是可能的，那么如果另一个条目具有不同的后缀，则表达式将匹配。

有没有办法指定类似的东西`^\1`or `[^\1]`？at 这个词`\1`可以是捕获组中的值以外的任何内容。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-24T04:47:37.370

我认为你要求的是：

```
ACTIVITY_(\d*=)(.|\r|\n)*ACTIVITY_(?!\1) 
```

但是（1）我不确定在前瞻中是否允许组，并且（2）它并不能完全按照您的意愿进行 - 它会将*每个*ACTIVITY_11111 与 ACTIVITY_22222 匹配（因此您将获得多个匹配项，或者只有一个匹配项，但来自第一个 11111 而不是最后一个）。

我认为你需要的是：

```
ACTIVITY_(\d*=).*[\r\n]((?!ACTIVITY).*[\r\n])*ACTIVITY_(?!\1) 
```

其中中间块中的额外内容跳过了不匹配的 ACTIVITY（当然，如果上面的（1）是一个问题，这也不起作用，这可能取决于您的正则表达式库）。

# iphone - 将视频添加到应用程序

> ID：10731278
> 
> 赞同：0
> 
> 时间：2012-05-24T04:43:25.707
> 
> 标签：iphone, objective-c, ios, memory-management, video

我想在我的应用程序目录中存储大量视频。它会使我的应用程序变慢吗？或者启动应用程序需要时间。我只在必要时加载视频。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-24T05:00:20.323

它会使您的应用程序变大，这是不好的......＆它也需要时间来代替保存您的所有视频您可以让用户从服务器下载该视频，然后它将保存在您的文档中目录，所以你的应用程序不会很大......

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-24T05:13:36.367

它在当地的什么地方

```
 NSURL *url = [NSURL URLWithString:[[NSBundle mainBundle] pathForResource:@"videoname" ofType:@"mov" inDirectory:@""]]; 
```

和它一起玩

```
 MPMoviePlayerController *player = [[MPMoviePlayerController alloc] initWithContentURL:videoURL];
 [[player view] setFrame:[self.view bounds]]; // Frame must match parent view
 [self.view addSubview:[player view]];
 [player play];
 [player release]; 
```

**编辑：-**

这个问题的确切答案是否定的，它不会使您的应用程序变慢，但是在您的应用程序中加载视频需要一些时间，时间将取决于您在应用程序中加载的视频数量。解决方案是您必须为 ALAssetLibaries 使用块。

看看这个[ALAssetLibary Apple 的类参考](http://developer.apple.com/library/ios/#documentation/AssetsLibrary/Reference/ALAssetsLibrary_Class/Reference/Reference.html)。

如果不联系我，它可能会对您有所帮助。谢谢 ：）

# css - CSS样式清理繁琐且代码少

> ID：10731279
> 
> 赞同：1
> 
> 时间：2012-05-24T04:43:32.493
> 
> 标签：css

嘿，我有一些像这样的 CSS 代码：

```
/* ROW 1 (1-8) */
#rsvpBadge0{position: absolute; top: -2px; left: -1px; z-index: 2; width: 50px; height: 50px;}
#rsvpBadge1{position: absolute; top: -2px; left: 74px; z-index: 2; width: 50px; height: 50px;}
#rsvpBadge2{position: absolute; top: -2px; left: 149px; z-index: 2; width: 50px; height: 50px;}
#rsvpBadge3{position: absolute; top: -2px; left: 224px; z-index: 2; width: 50px; height: 50px;}
#rsvpBadge4{position: absolute; top: -2px; left: 299px; z-index: 2; width: 50px; height: 50px;}
#rsvpBadge5{position: absolute; top: -2px; left: 374px; z-index: 2; width: 50px; height: 50px;}
#rsvpBadge6{position: absolute; top: -2px; left: 449px; z-index: 2; width: 50px; height: 50px;}
#rsvpBadge7{position: absolute; top: -2px; left: 524px; z-index: 2; width: 50px; height: 50px;}
/* ROW 2 (9-16) */
#rsvpBadge8{position: absolute; top: 68px; left: -1px; z-index: 2; width: 50px; height: 50px;}
#rsvpBadge9{position: absolute; top: 68px; left: 74px; z-index: 2; width: 50px; height: 50px;}
#rsvpBadge10{position: absolute; top: 68px; left: 149px; z-index: 2; width: 50px; height: 50px;}
#rsvpBadge11{position: absolute; top: 68px; left: 224px; z-index: 2; width: 50px; height: 50px;}
#rsvpBadge12{position: absolute; top: 68px; left: 299px; z-index: 2; width: 50px; height: 50px;}
#rsvpBadge13{position: absolute; top: 68px; left: 374px; z-index: 2; width: 50px; height: 50px;}
#rsvpBadge14{position: absolute; top: 68px; left: 449px; z-index: 2; width: 50px; height: 50px;}
#rsvpBadge15{position: absolute; top: 68px; left: 524px; z-index: 2; width: 50px; height: 50px;} 
```

等等等等……

现在我有从 1 到 207 的相同方式。它可以工作，但我看到的问题是它在 FireFox 中看起来很好（顶部和左侧坐标是正确的）但是当我在 IE 和 Chrome 中查看它时，它们是与最高值相差无几（需要再提高一点）

所以我对你们所有人的问题是：

1) 知道每个 rsvpBadge 具有不同的数字和最高值，我如何缩短代码？

2）更正IE和chrome的坐标，而不必为每个浏览器多做3个1-209层。

**这是一个视觉**

![在此处输入图像描述](../Images/2a66c707f69af33e64a0f0fbc5619e9e.png)

左边是 Chrome 中的样子，右边是 FireFox。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-24T04:52:52.857

浮动这些元素似乎很合适：

```
.rsvp-badge{z-index: 2; width: 50px; height: 50px;float:left;} 
```

完成后，添加`clear:left;`到开始行的每个元素。

更好的是：将所有元素放在一个固定宽度的容器中，这样每行就可以容纳 8 个元素。

## 更新：

啊哈！所以*这*就是一个 rsvp 徽章应该是什么。

您可以[使用伪元素](http://jsfiddle.net/ovfiddle/7WF3Q/)摆脱几个规则：

```
<div class="user-photo has-rsvpd"></div>
<div class="user-photo"></div>

.user-photo {
    /*size,background etc. ommited*/
    position:relative;/*to allow position:absolude on pseudo-element*/
}
.has-rsvpd:after {
     /*size,background etc. ommited*/
     content:"";position:absolute;top:0;left:0;/*apply to top left corner*/
} 
```

或者[稍微重构一下 HTML](http://jsfiddle.net/ovfiddle/7WF3Q/1/)（这取决于架构，在运行时可能是合适的）：

```
<div class="user-photo has-rsvpd"><span class="rsvp-badge"></span></div>
<div class="user-photo"><span class="rsvp-badge"></span></div>

.rsvp-badge {
     display:none;/*hide when user has not rsvpd*/
}
.has-rsvpd .rsvp-badge{
     /*same as :after in the sample above, but without a content property*/
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-24T05:07:45.173

**如果您不想使用 javascript 或 floating**，您可以更改 html 吗？然后将类添加到元素中，因为（而不是 id）类不必是唯一的，例如：

```
<div class="rsvpBadgeAll rsvpBadgeLeft0 rsvpBadgeTop0">...</div>
<div class="rsvpBadgeAll rsvpBadgeLeft1 rsvpBadgeTop0">...</div>
...
<div class="rsvpBadgeAll rsvpBadgeLeft7 rsvpBadgeTop0">...</div>
<div class="rsvpBadgeAll rsvpBadgeLeft0 rsvpBadgeTop1">...</div>
...
<div class="rsvpBadgeAll rsvpBadgeLeft7 rsvpBadgeTop1">...</div>
... 
```

并且还使用类而不是 id 定义 css，例如：

```
.rsvpBadgeAll { position: absolute; z-index: 2; width: 50px; height: 50px; }

.rsvpBadgeLeft0 { left: -1px; }
.rsvpBadgeLeft1 { left: 74px; }
.rsvpBadgeLeft2 { left: 149px; }
.rsvpBadgeLeft3 { left: 224px; }
.rsvpBadgeLeft4 { left: 299px; }
.rsvpBadgeLeft5 { left: 374px; }
.rsvpBadgeLeft6 { left: 449px; }
.rsvpBadgeLeft7 { left: 524px; }

.rsvpBadgeTop0 { top: -2px; }
.rsvpBadgeTop1 { top: 68px; }
.rsvpBadgeTop2 { top: ...px; }
...
.rsvpBadgeTop25 { top: ...px; } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-24T04:47:42.380

在 CSS 中你只能放

```
 #rsvpBadge{position: absolute; z-index: 2; width: 50px; height: 50px;}

    #rsvpBadge0{ top:<x>, left:<x>}
    #rsvpBadge1{ top:<x>, left:<x>}
    #rsvpBadge2{ top:<x>, left:<x>} 
```

........等等并编写一个javascript来根据屏幕大小计算顶部和左侧。

# python - SQLite Python 查询：ORDER BY DESC 不起作用？

> ID：10731282
> 
> 赞同：0
> 
> 时间：2012-05-24T04:44:13.347
> 
> 标签：python, sql

```
conn = sqlite3.connect('Path_To_DB.db')
c = conn.cursor() 
    c.execute('SELECT Nick,NumCount,TimesRun FROM databaseTable ORDER BY NumCount desc')
    ordered = c.fetchall()
    print ordered 
```

当然，这只是一个片段，但打印的“有序”并没有显示出来……好吧，有序。

更准确地说，这是我的输出

```
 [(u'Coburn', u'52', 1), (u'radii', u'295', 1), (u'Senna_Wong', u'242', 1), (u'sinkingwork', u'17', 1), (u'Yumirose', u'164', 1), (u'yepperoni', u'154', 1), (u'Jeffrey-sama', 861, 2), (u'Kethsar', 414, 5), (u'sakeisgood', 331, 2), (u'lygerzero0zero', 269, 2), (u'asdfjjjjjj', 268, 5), (u'lunr', 253, 3), (u'asdfasf', 237, 2), (u'asdfsadjf', 130, 2), (u'Neibs', 107, 2)] 
```

这是一个 XChat IRC 插件脚本，所以我需要提取数据库值以显示“最高分”列表。我一直在考虑手动对其进行排序，但这需要付出很多额外的努力，而且由于我是 python 脚本的新手，所以也需要大量的时间和研究。（我正在考虑单独获取 SELECT 查询，将它们组合成一个大列表 [a,b,c] 并通过它进行排序。）

所以无论如何，问题是：我到底做错了什么，所以计数没有被正确排序？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-24T04:47:05.113

其中一半是字符串，它们的排序方式不同。清理您的数据，将字符串转换为数字。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-24T04:49:10.320

问题是你有不同类型的数据。看看他的 NumCount 字段，看到一些引号而不是其他的引号？我想如果你把所有的字符串都改成数字，你就解决了这个问题。

# android - 无法在 Galaxy Nexus 中使用手电筒

> ID：10731285
> 
> 赞同：4
> 
> 时间：2012-05-24T04:44:31.243
> 
> 标签：android, android-camera

我必须遵循代码，我只想在我的 Galaxy Nexus(4.0.2) 中打开手电筒，但它没有这样做。

```
public class welcome extends Activity {

//MediaPlayer player;
/** Called when the activity is first created. */
@Override

public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.welcome);

    Camera cam = Camera.open();     
    Parameters p = cam.getParameters();
    p.setFlashMode(Parameters.FLASH_MODE_TORCH);
    cam.setParameters(p);
    cam.startPreview();

}
} 
```

我的清单文件：

```
<uses-sdk android:minSdkVersion="12" />
       <uses-permission android:name="android.permission.CAMERA" />
 <uses-feature android:name="android.hardware.camera" /> 
```

请问是我的编码错误还是android版本问题？谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-13T19:26:04.080

如果没有附加的surfaceView 和surfaceHolder，galaxy nexus 就无法使用闪光灯。我自己有一个 Nexus，在附加预览视图后它工作了。由于您不想看到相机在手电筒应用程序中看到的内容，因此只需将其设为 1x1 像素。

资料来源：[LED 手电筒不适用于三星 Galaxy Nexus](https://stackoverflow.com/questions/9505945/led-flashlight-does-not-work-on-samsung-galaxy-nexus)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-03-11T07:50:14.433

使用表面视图连接相机，因为某些设备需要表面视图。我相信这将 [是一个链接](https://stackoverflow.com/questions/21276908/turn-on-off-flashlight-using-surfaceview)！为你

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-21T14:39:09.997

您是否尝试过这里的代码： [http ://android-er.blogspot.co.uk/2011/02/control-flash-light-function-as-torch.html](http://android-er.blogspot.co.uk/2011/02/control-flash-light-function-as-torch.html)

它绝对适用于运行 Cyanogenmod 7 的根深蒂固的 Desire 和我的 ICS rom (4.0.3)。也许尝试运行它并查看它是否有效，然后从那里继续？

它还包括检查是否可以找到相机，然后打开相机。似乎不需要 StartPreview()。

事件的顺序似乎不同：

1：如果有摄像头，打开摄像头 2：设置参数 3：parameters.setFlashMode(Parameters.FLASH_MODE_TORCH);
4：camera.setParameters（参数）；

# iphone - iPhone 应用程序在没有 IBAction 的情况下自行控制

> ID：10731287
> 
> 赞同：2
> 
> 时间：2012-05-24T04:44:40.303
> 
> 标签：iphone, ibaction, touchesbegan

我有一个简单的应用程序。这是你触摸开始按钮，然后显示会改变，然后你摇晃你的 iPhone，它会显示一些文本。我现在遇到的问题是第一次为 iOS 3.0 开发该应用程序。从那时起，代码就没有被触及。上周我将我的 Xcode 升级到了 4.2 版。然后我的应用程序可以自行控制，无需触摸。它会控制自己。当我修改`touchesbegan`函数时，它不会改变。加速度计都没有。那么可能是什么问题呢？

# ipad - SVG 图形 + iPad3

> ID：10731296
> 
> 赞同：0
> 
> 时间：2012-05-24T04:45:55.783
> 
> 标签：ipad, svg, size, scale, graphic

在桌面上，我可以让这个按钮很好地显示（无论如何在 Firefox 中，我只需要它在很少的浏览器上工作）并且它可以适当地缩放。

[http://www.coflash.com/svg/](http://www.coflash.com/svg/)

但是，在 iPad3 上，图标会改变大小并且似乎被切断了。我无法弄清楚为什么会这样。我猜这是因为像素密度/更高的 DPI，但我什至不知道从哪里开始绕过它。

有人对这个有经验么？

# javascript - 我可以使用 setTimeout 重置未绑定的函数吗？

> ID：10731297
> 
> 赞同：1
> 
> 时间：2012-05-24T04:46:11.223
> 
> 标签：javascript, jquery, binding, bind, unbind

天哪，我经常在这里...无论如何，这是问题所在。我有一个未绑定的功能，我需要它在一定时间后返回（最好是在视频停止播放时，但现在我只播放一定的秒数）。

我在[这里（在 jquery 论坛上）](http://forum.jquery.com/topic/applying-bind-delay-unbind-seems-the-delay-is-ignored)发现了与我类似的问题，当我尝试应用解决方案（第一个响应）时，它没有用。

这是我试图做的

```
$('li', '.thumbs').bind('touchend click', playVideo);

$('li', '.thumbs').bind('touchend click', function() {
        //some code
        playVideo( $(this).index() );
        $("li", ".thumbs").unbind('click');
        setTimeout(function(){
            $('li', '.thumbs').bind('touchend click');
            },5000);
        }); 
```

所以为什么？

**编辑好吧，我得到了超时返回的绑定，但由于某种原因它没有完成功能`playVideo`。它会停止正在播放的视频，但不会开始新的视频...

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-24T04:49:22.017

```
$('li', '.thumbs').bind('touchend click', onPlayClick);

function onPlayClick(){
    //some code
    playVideo( $(this).index() );
    $("li", ".thumbs").unbind('click', onPlayClick);
    setTimeout(function(){
        $('li', '.thumbs').bind('click', onPlayClick);
    },5000);
} 
```

此外，如果您使用的是 jQuery 1.7+，则首选`on()`/ 。`off()`例子：

```
$('li', '.thumbs').on('click', onPlayClick);
$('li', '.thumbs').off('click', onPlayClick); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-24T04:50:32.097

在您的 setTimeout 中，您没有将元素绑定到函数。添加你的回调函数，问题就解决了。

```
setTimeout(function(){
    $('li', '.thumbs').bind('touchend click', playVideo);  // added callback
},5000); 
```

请记住，每当您重新绑定一个事件时，您必须显式地向它传递一个函数，以便在事件触发时调用，即使您之前已经注册了该事件并在该元素的事件上调用了 unbind。

另外，请记住 setTimeout 和 setInterval 回调函数具有全局范围，这意味着它们在“窗口”级别具有可见性。您需要确保在 setTimeout 可见的全局范围内定义了函数 playVideo。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-24T04:59:37.190

这应该有效。

```
$('li', '.thumbs').bind('touchend click', playVideo);    
$('li', '.thumbs').bind('touchend click', function() {
    //some code
    playVideo( $(this).index() );
    setTimeout(function(){
        $('li', '.thumbs').unbind().bind('touchend click',playVideo);
        },5000);
    }); 
```

因为，在这种情况下，每次设置超时时，您都必须取消绑定之前的绑定函数，然后再绑定。而且绑定时必须有回调函数。

或者，如果您知道点击的位置，您可以触发 Click 而不是绑定。
例如，如果要单击类拇指。那么

```
 $('.thumbs').trigger('click'); 
```

# apache-flex - Flex 3：隐藏前一个项目时，VBox 项目不会向上移动

> ID：10731301
> 
> 赞同：0
> 
> 时间：2012-05-24T04:46:41.850
> 
> 标签：apache-flex, flex3, vbox

我有一个 vbox，里面有 11 个画布。用户可以随时选择显示/隐藏 11 个画布中的任何一个。当用户选择隐藏其中一个画布时，我希望在它向上移动后拥有其他所有内容。例如，如果当前正在显示所有 11 个画布，并且用户选择隐藏画布 8，我希望画布 9 到 11 向上移动画布 8 的高度。我尝试简单地将画布 8 的可见属性设置为 false，但这不起作用。

确保所有画布（在选择要隐藏的画布之后）向上移动的最佳方法是什么？

在此先感谢，

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-24T07:06:20.267

将其 includeInLayout 属性设置为 false，否则 VBox 仍将使用它进行布局测量。

# python - 为什么没有出现 Django 管理界面？

> ID：10731302
> 
> 赞同：1
> 
> 时间：2012-05-24T04:46:44.783
> 
> 标签：python, django

我是 django 的新手。

我正在尝试根据一本关于​​ django 的书运行示例。

我已经在我的模型类中添加了“class Admin”，但是，在 django 管理界面中，我只能看到“用户”、“组”和“站点”，我的模型类都没有出现。

没有错误或警告信息，所以我不知道发生了什么以及下一步该怎么做。

有什么帮助吗？

```
from django.db import models

# Create your models here.
class Publisher(models.Model):
    name = models.CharField(max_length=30)
    address=models.CharField(max_length=50)
    city=models.CharField(max_length=60)
    state_province=models.CharField(max_length=30)
    country=models.CharField(max_length=50)
    website=models.URLField()

    def __str__(self):
        return self.name

    class Admin:
        pass

class Author(models.Model):
    salutation=models.CharField(max_length=10)
    first_name = models.CharField(max_length=30)
    last_name = models.CharField(max_length=40)
    email=models.EmailField()
    headshot=models.ImageField(upload_to='/tmp')

    def __str__(self):
        return '%s %s' % (self.first_name, self.last_name)

    class Admin:
        pass

class Book(models.Model):
    title=models.CharField(max_length=10)
    authors=models.ManyToManyField(Author)
    publisher=models.ForeignKey(Publisher)
    publication_date = models.DateField()

    def __str__(self):
        return self.title 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-24T05:23:16.400

您需要做三件事才能通过管理站点编辑模型：

1.  使用代码在您的应用目录中创建文件“admin.py”（查看[https://docs.djangoproject.com/en/dev/ref/contrib/admin/#modeladmin-objects](https://docs.djangoproject.com/en/dev/ref/contrib/admin/#modeladmin-objects)）：

    ```
    from django.contrib import admin
    from your_app.models import Publisher, Author, Book

    admin.site.register(Author)
    admin.site.register(Publisher)
    admin.site.register(Book) 
    ```

2.  在您的 urls.py 添加以下内容（查看[https://docs.djangoproject.com/en/dev/ref/contrib/admin/#hooking-adminsite-instances-into-your-urlconf](https://docs.djangoproject.com/en/dev/ref/contrib/admin/#hooking-adminsite-instances-into-your-urlconf)）：

    ```
    from django.conf.urls import patterns, url, include
    from django.contrib import admin

    admin.autodiscover()

    urlpatterns = patterns('',
        (r'^admin/', include(admin.site.urls)),
        # your urls goes here
    ) 
    ```

3.  请确保您的 settings.py 满足以下要求（查看[https://docs.djangoproject.com/en/dev/ref/contrib/admin/#overview](https://docs.djangoproject.com/en/dev/ref/contrib/admin/#overview)）：

    ```
    TEMPLATE_CONTEXT_PROCESSORS = (
        'django.contrib.messages.context_processors.messages',
        #other context processors
    )

    MIDDLEWARE_CLASSES = (
        'django.contrib.messages.middleware.MessageMiddleware',
        # other middleware
    )

    INSTALLED_APPS = (
        'django.contrib.admin',
        'django.contrib.auth',
        'django.contrib.contenttypes',
        'django.contrib.messages',
        'django.contrib.sessions',
        # other apps
    ) 
    ```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-24T04:52:51.080

您应该创建 admin.py 并遵循以下代码

```
from xxxxx.models import Publisher
from django.contrib import admin

admin.site.register(Publisher)
admin.site.register(Author)
admin.site.register(Book) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-24T04:54:36.507

你在那里所做的并不是它实际上是如何完成的。正确的方法是`models.py`在`admin.py`.

`models.py`：

```
from django.db import models

# Create your models here.
class Publisher(models.Model):
    name = models.CharField(max_length=30)
    address=models.CharField(max_length=50)
    city=models.CharField(max_length=60)
    state_province=models.CharField(max_length=30)
    country=models.CharField(max_length=50)
    website=models.URLField()

    def __str__(self):
        return self.name

class Author(models.Model):
    salutation=models.CharField(max_length=10)
    first_name = models.CharField(max_length=30)
    last_name = models.CharField(max_length=40)
    email=models.EmailField()
    headshot=models.ImageField(upload_to='/tmp')

    def __str__(self):
        return '%s %s' % (self.first_name, self.last_name)

class Book(models.Model):
    title=models.CharField(max_length=10)
    authors=models.ManyToManyField(Author)
    publisher=models.ForeignKey(Publisher)
    publication_date = models.DateField()

    def __str__(self):
        return self.title 
```

`admin.py`：

```
from django.contrib import admin
from myproject.myapp.models import Author, Publisher

class AuthorAdmin(admin.ModelAdmin):
    pass

class PublisherAdmin(admin.ModelAdmin):
    pass

admin.site.register(Author, AuthorAdmin)
admin.site.register(Publisher, PublisherAdmin) 
```

另外，如果你的管理类是空的`pass`，你可以一起省略它们，所以你最终会是这样的：

`admin.py`：

```
from django.contrib import admin
from myproject.myapp.models import Author, Publisher

admin.site.register(Author)
admin.site.register(Publisher) 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-24T04:49:31.870

您错过了[在管理站点注册模型](https://docs.djangoproject.com/en/dev/ref/contrib/admin/#django.contrib.admin.ModelAdmin)的部分。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-24T04:55:32.717

您正在使用旧方法来声明应该出现在管理界面中的模型。这种方法现在已经过时了。请参考手册并明确您使用的 django 版本。以及如何得到你想要的。

# android - Android：打开 VPN 设置活动的操作

> ID：10731306
> 
> 赞同：6
> 
> 时间：2012-05-24T04:47:08.820
> 
> 标签：android, vpn

我一直在寻找一种通过我的 android 应用程序启动 VPN 设置活动的方法，但找不到它。请注意，我的目标是 Android 2.2，因此将无法使用 android ICS 中提供的功能。

为了打开 VPN 设置屏幕，我应该传递到 Intent 中的操作是什么？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2014-11-10T13:35:02.827

我认为这就是你要找的：

```
Intent intent = new Intent("android.net.vpn.SETTINGS");
intent.setFlags(Intent.FLAG_ACTIVITY_NEW_TASK);
startActivity(intent); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-24T04:57:09.610

试试这个：

```
 private static final String PACKAGE_PREFIX =
            VpnManager.class.getPackage().getName() + ".";
    private static final String ACTION_VPN_SETTINGS =
            PACKAGE_PREFIX + "SETTINGS";
    Intent intent = new Intent(ACTION_VPN_SETTINGS);
    intent.setFlags(Intent.FLAG_ACTIVITY_NEW_TASK);
    mContext.startActivity(intent); 
```

# ruby-on-rails - 如何使 Rails 3 应用程序和 Wordpress 博客在同一个域上工作？

> ID：10731317
> 
> 赞同：0
> 
> 时间：2012-05-24T04:48:45.263
> 
> 标签：ruby-on-rails, wordpress

rails 应用程序托管在 rackspace 云服务器上，wp 博客托管在 bluehost 上。我为 wordpress 博客创建了一个子域 blog.domain.com，并将 rails 应用程序指向 domain.com。问题是诸如 domain.com/article-name 之类的旧博客链接不再起作用，因为旧链接现在查看 rails 应用程序。wp安装中有几百个帖子，让这个工作的最佳方法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-25T23:24:54.397

你解决了吗？我做了一个类似的开关/设置。我不知道这是否是最好的解决方案，但我使用 routes.rb 文件将旧帖子重定向到新 URL。

对于像您的示例这样的根域之外的页面，我已经手动重定向。

对于我使用的父页面或标签之类的东西

```
match "/stories/:name" => redirect("/posts/%{name}") 
```

我是 Rails 和 Wordpress 的新手，所以可能有更好的方法。

# mysql - 设计组织良好和规范化的关系数据库的步骤

> ID：10731333
> 
> 赞同：11
> 
> 时间：2012-05-24T04:50:14.420
> 
> 标签：mysql, sql, performance, database-design, optimization

我刚开始为我的网站制作数据库，所以我正在重新阅读`Database Systems - Design, Implementation and Management (9th Edition)`，但我注意到书中没有描述创建一个组织良好和规范化的数据库的一步一步的过程。这本书似乎有点到处都是，尽管规范化过程都在一个地方，但通往它的步骤却不是。

我认为将所有步骤放在一个列表中非常有用，但我在网上或其他任何地方都找不到类似的东西。我意识到解释所有步骤的回答者将是一个相当广泛的步骤，但我能在这个主题上得到的任何东西都将不胜感激；包括规范化前的指令顺序和建议链接。

虽然我对这个过程有点熟悉，但我在设计任何数据库时都休息了很长时间（大约 1 年），所以我希望对所有内容进行详细描述。

我特别感兴趣：

*   什么是开始建模数据库的好方法（或如何列出业务规则以免混淆）

我想使用 ER 或 EER（扩展实体关系模型），我想知道

*   如何使用 EER（不相交和重叠）正确建模子类型和超类型（以及写下它的业务规则，以便您知道它是一个子类型，如果有任何常见的方法）

（我已经熟悉规范化过程，但答案也可以包括有关它的提示）

**仍然需要帮助：**

*   写下业务规则（包括 EER 中子类型和超类型的业务规则）
*   如何在 EER 中正确使用子类型和超类型（如何对其建模）

任何其他建议将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-25T18:27:15.027

我会向你推荐这个关于 E/R 建模的视频（大约 9 个）

[http://www.youtube.com/watch?v=q1GaaGHHAqM](http://www.youtube.com/watch?v=q1GaaGHHAqM)

**编辑：**

“这个模型的图表必须有多广泛？它们必须包括所有实体和属性吗？？”

是的，实际上你有 ER 建模和扩展 ER 建模，

这个想法是进行扩展 ER 建模，因为您不仅可以指定实体，还可以指定 PK 和 FK 以及基数。看看这个[链接](http://en.wikipedia.org/wiki/Entity%E2%80%93relationship_model)（查看图形和两种模型之间的区别）。

建模方式有两种，一种是真实场景，另一种是DB，IE的真实结构：

当您创建 E-ER 建模时，您甚至可以为所有实体创建关系和基数，但是当您要创建数据库时，不必创建基数为 1:N 的关系（基数为 N 的表从表中创建 FK 1，并且您不需要在数据库中创建关系表）或者当您具有 1:1 基数时，您知道您的一个实体可以吸收另一个实体。

看这个[Graphic](http://www.google.com/imgres?q=extended%20entity%20relationship%20modeling%20design&um=1&hl=en&client=firefox-a&rls=org.mozilla%3aen-US%3aofficial&channel=fflb&biw=1600&bih=770&tbm=isch&tbnid=n2jDjxdnC1hB2M%3a&imgrefurl=http://asadsiddiqi.wordpress.com/page/3/&docid=xfQWudMcuEq5GM&imgurl=http://asadsiddiqi.files.wordpress.com/2008/02/q17b1.jpg&w=859&h=648&ei=XEvCT9aQMoac8QTC2_3ACw&zoom=1&iact=hc&vpx=186&vpy=294&dur=1545&hovh=195&hovw=259&tx=186&ty=60&sig=103764380678787456156&page=1&tbnh=140&tbnw=186&start=0&ndsp=35&ved=1t:429,r:9,s:0,i:90)，只创建了 N:M 关系实体（当你看到 2 个或更多 FK 时，这是一个关系表）

但请记住，这些只是“规则”，如果您的设计需要，出于性能、安全性等原因，您可以打破它。

关于工具，有很多，但我推荐[workbench](http://dev.mysql.com/downloads/workbench/)，因为您可以使用它连接到您的数据库（如果您在 mysql 中）并创建带有属性的设计 E/R 建模，他将自动创建关系表 N:M。

**编辑2：**

在这里我放了一些可以更好地解释的链接，这将需要很多行并且在这里和我自己更难解释，请查看此链接，如果您有任何问题，请告诉我：

类型和子类型：

*   [http://www.siue.edu/~dbock/cmis450/4-eermodel.htm](http://www.siue.edu/~dbock/cmis450/4-eermodel.htm)

业务规则（完整性约束）

*   [http://www.deeptraining.com/litwin/dbdesign/FundamentalsOfRelationalDatabaseDesign.aspx](http://www.deeptraining.com/litwin/dbdesign/FundamentalsOfRelationalDatabaseDesign.aspx)（请专门看一下这个，我认为它会帮助你了解所有这些信息）

*   [http://www.google.com/url?sa=t&rct=j&q=database%20design%20integrity%20constraints&source=web&cd=1&ved=0CFYQFjAA&url=http%3A%2F%2Fcs-people.bu.edu%2Frkothuri%2Flect12-约束.ppt&ei=2aLDT-X4Koyi8gTKhZWnCw&usg=AFQjCNEvXGr7MurxM-YCT0-rU0htqt6yuA&cad=rja](http://www.google.com/url?sa=t&rct=j&q=database%20design%20integrity%20constraints&source=web&cd=1&ved=0CFYQFjAA&url=http%3A%2F%2Fcs-people.bu.edu%2Frkothuri%2Flect12-constraints.ppt&ei=2aLDT-X4Koyi8gTKhZWnCw&usg=AFQjCNEvXGr7MurxM-YCT0-rU0htqt6yuA&cad=rja)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-14T17:01:19.653

我重读了这本书和网上的一些文章，并创建了一个简短的步骤列表，以便设计一个像样的数据库（当然，您需要先了解数据库设计的基础知识），下面将更详细地描述步骤：

（书中描述了很多步骤：`Database Systems - Design, Implementation and Management (9th Edition)`这也是页码所指的内容，但我会在这里尽可能多地描述，并将在接下来的几天内编辑这个答案以使其更加完整）

1.  创建组织对运营的描述的详细叙述。
2.  根据操作描述识别业务规则。
3.  从业务规则中识别主要实体和关系。
4.  将实体/关系转换为 EER 模型
5.  检查命名约定
6.  将 ERR 模型映射到逻辑模型（第 400 页）*
7.  规范化逻辑模型（第 179 页）
8.  改进数据库设计（第 187 页）
9.  验证逻辑模型完整性约束（第 402 页）（如长度等）
10.  根据用户需求验证逻辑模型
11.  将表转换为 mySQL 代码（在工作台中，使用导出函数将 EER 转换为 SQL 文件，然后转换为 mySQL）

*如果您使用工作台和您在那里设计的 ER 模型的工作，您可以跳过此步骤。

 **1.**详细描述运作公司。如果您正在创建个人项目，请详细描述它如果您正在与公司合作，要求提供描述其公司的文件以及与员工面谈以获取信息（面谈可能会产生不一致的信息，请务必与主管核实哪些信息对设计更重要) **2.**查看收集到的信息并开始从中生成规则，确保填补您知识中的任何信息空白。在继续之前与公司的主管确认。 **3.**从业务规则中识别主要实体和关系。请记住，在设计过程中，数据库设计人员不仅仅依靠访谈来帮助定义实体、属性和关系。通过检查组织在日常运营中使用的业务表格和报告，可以收集到数量惊人的信息。（第 123 页）

 **4.**如果数据库很复杂，您可以将 ERD 设计分解为以下子步骤
i) 创建外部模型 (pg 46)
ii) 组合外部模型以形成概念模型 (pg 48)

```
Follow the following recursive steps for the design (or for each substep) 
    I.   Develop the initial ERD.
    II.  Identify the attributes and primary keys that adequately describe the entities.
    III. Revise and review the ERD.
    IV.  Repeat steps until satisfactory output

You may also use entity clustering to further simplify your design process. 
```

通过 ERD 描述数据库：使用实线连接弱实体（弱实体是那些没有父实体就不能存在并且在其 PK 中包含父 PK 的实体）。使用虚线连接强实体（强实体是可以独立于任何其他实体存在的实体）

 **5.**检查您的姓名是否符合您的命名约定。我曾经在这里对命名约定提出建议，但人们并不真正喜欢它们。我建议遵循您自己的标准或在线查找一些命名约定。如果您发现一些非常有用的命名约定，请发表评论。

**6.** 逻辑设计通常涉及将 ER 模型转换为一组关系（表）、列和约束定义。

使用以下步骤将 ER 转换为逻辑模型：

1.  映射强实体（不需要其他实体存在的实体）
2.  映射超类型/子类型关系
3.  映射弱实体
4.  映射二元关系
5.  映射更高程度的关系

**7.**规范化逻辑模型。您还可以对逻辑模型进行非规范化以获得一些所需的特性。（比如提高性能）

**8.**

1.  Refine Attribute Atomicity - 注意原子性要求通常是一种很好的做法。原子属性是不能进一步细分的属性。据说这样的属性显示了原子性。通过提高原子性程度，您还可以获得查询的灵活性。

2.  根据数据粒度的要求细化主键 - 粒度是指由存储在表行中的值表示的详细程度。如前所述，以最低粒度存储的数据称为原子数据。例如，假设 ASSIGN_HOURS 属性表示给定员工在给定项目上的工作时间。但是，这些值是否记录在它们的最低粒度级别？换句话说，ASSIGN_HOURS 是代表每小时总计、每天总计、每周总计、每月总计还是每年总计？显然，ASSIGN_HOURS 需要更仔细的定义。在这种情况下，相关问题如下：您要在什么时间范围内（小时、日、周、月等）记录 ASSIGN_HOURS 数据？例如，假设 EMP_NUM 和 PROJ_NUM 的组合是 ASSIGNMENT 表中可接受的（复合）主键。该主键仅用于表示员工自项目开始以来在项目上工作的总小时数。使用诸如 ASSIGN_NUM 之类的代理主键可提供更低的粒度并产生更大的灵活性。例如，假设 EMP_NUM 和 PROJ_NUM 组合用作主键，然后员工在 ASSIGNMENT 表中创建了两个“工作小时数”条目。该行为违反了实体完整性要求。即使您将 ASSIGN_DATE 添加为复合 PK 的一部分，如果任何员工在同一天为同一项目输入两个或多个条目，仍会生成实体完整性违规。

3.  尝试回答以下问题：“谁将被允许使用这些表格以及表格的哪些部分可供哪些用户使用？” 等等。

请随时在下面的评论中留下更好的描述的建议或链接，我会将其添加到我的答案中

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-28T15:36:00.063

您问题的一个方面涉及在 SQL 表中表示子类-超类关系。Martin Fowler 讨论了三种设计方法，其中我最喜欢的是[Class Table Inheritance](http://martinfowler.com/eaaCatalog/classTableInheritance.html)。棘手的部分是安排 Id 字段从超类传播到子类。一旦你完成了，你通常想要做的连接是光滑、简单和快速的。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-12-09T22:24:21.473

设计任何数据库都有六个主要步骤： 1\. 需求分析 2\. 概念设计 3\. 逻辑设计 4\. 模式细化 5\. 物理设计 6\. 应用和安全设计。

# c++ - TerminateThread 函数调用未按预期工作

> ID：10731335
> 
> 赞同：1
> 
> 时间：2012-05-24T04:50:17.307
> 
> 标签：c++, windows

我正在使用创建一个线程`CreateThread(&sa, 16*1024*1024, (LPTHREAD_START_ROUTINE)listener_thread,(void *) this, 0, &threadID)`。创建线程没有任何问题。当我尝试终止上面创建的线程时出现问题：

```
 TerminateThread(thread,dwExitCode);
 DWORD errorCode = GetLastError();
 printf(errorCode); 
```

`TerminateThread`调用失败，errorCode 打印为 5 ( `ERROR_ACCESS_DENIED`)。有人可以帮忙吗？

# asp.net - 从 asp.net 页面打印 A4 尺寸

> ID：10731338
> 
> 赞同：2
> 
> 时间：2012-05-24T04:50:49.847
> 
> 标签：asp.net, printing

我正在处理一项任务，我需要在 asp.net 网页上以特定格式排列某些数据。asp.net 页面看起来更像是一个普通的报告页面。然后我需要允许用户以标准 A4 格式从同一页面打印出来。如果要在页面上显示的数据更多，该页面还应该处理分页符并将页面数据显示在两个（或更多根据需要）A4页面上。

是否可以使网页符合 A4 尺寸打印输出？

如果是，这是一个可取的方法吗？

如何使网页符合 A4 尺寸打印输出？

如果您需要有关我的任务的任何其他信息，请告诉我。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-24T05:08:15.107

如果您想要这种级别的打印控制，[iTextSharp](http://sourceforge.net/projects/itextsharp/)可以提供帮助。它支持常规的 pdf 操作和模板。最重要的是，它是开源的！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-24T04:58:01.157

你不能。网站是为屏幕而不是打印机创建的。

您可以添加[Print.css](http://www.w3.org/TR/CSS21/media.html)以使网站打印更好，但您不能指定纸张尺寸，例如 A4。

[您可以在此处](http://css-discuss.incutio.com/wiki/Print_Stylesheets)找到有关打印样式表以及如何使用它们的更多信息。

打印的最佳解决方案是使用 PDF，这就是它们的用途。创建具有相同数据的 PDF。在这种情况下，您可以完全控制打印格式。

参考：[Oded 答案](https://stackoverflow.com/questions/3341485/how-to-make-a-html-page-in-a4-paper-size-pages)

# android - 在广播接收器的 OnReceive 方法上将短信数据存储在数据库中的最佳方法，然后更新活动

> ID：10731342
> 
> 赞同：0
> 
> 时间：2012-05-24T04:51:10.220
> 
> 标签：android, eclipse, jakarta-ee

我有大约六个活动和一个带有广播接收器的服务类，它们在后台运行以接收短信。我现在在 BroadcastReceiver 的 OnReceive 方法上接收 SMS 我想将传入的 sms 数据存储在数据库中，因为我已经为 smsProcess 创建了一个 SMSSync 类，它现在将数据传递给 dbase 我在 OnReceive 方法上调用这个 smsProcess 这工作正常，但我认为当更多短信同时收到我发现问题我认为这是由于数据库。先生，请告诉我在收到短信数据后存储短信数据的最佳方法是什么，然后在活动中显示。对不起，我的英语不好或者听不懂。在此先感谢先生，请回复回复我会等待的..我为 On Receive 方法标记代码

感谢 Om Parkash Kaushik

公共 SMSReceiver（上下文 ctx）{

```
 this.context = ctx;
    sync = new SMSSync(context);
    dba = new DataBaseAdapter(ctx);         
}

@Override
public void onReceive(Context context,final Intent intents){
    if (intents.getAction().equals(ConstantClass.SMS_RECEIVED)) {

        try{
        Bundle bundle = intents.getExtras();            
        if (bundle != null) {
            Object[] pdus = (Object[]) bundle.get("pdus");
            SmsMessage[] messages = new SmsMessage[pdus.length];
            for (int i = 0; i < pdus.length; i++)
                messages[i] = SmsMessage.createFromPdu((byte[]) pdus[i]);
            String msg=null;
            String temp = null;
            for (SmsMessage message : messages) {
                msg = message.getMessageBody();
                temp = message.getOriginatingAddress();
            }               
             if(msg.length()>5 && msg.startsWith("<") && msg.contains(">")){

            String len = msg.substring(1, 3);
            int tl = temp.length();
            int l = tl - no;
            address = temp.substring(l,tl);
            int value =Integer.valueOf(len, 16).intValue();
            int index = msg.indexOf(">");
            if(value == index+1){
                dba.Open();                 
                int id = dba.getCordiId(address);
                Cursor cur = dba.getCoord(id);
                if(cur!=null)
                    cur.moveToFirst();
                final String Phnumber = cur.getString(cur.getColumnIndex(DataBaseAdapter.Key_MbNo));
                    if(Phnumber.equals(address)){
                    int count = dba.getDeviceCount(ConstantClass.dbName[1]);
                    if(count<=0){
                        dba.InsertCurrentCoord(id,id);
                    }else{
                        Strsql = new String("UPDATE " + ConstantClass.dbName[1] + " SET " + DataBaseAdapter.Key_ReceiverCoord + " = " + 
                                Integer.toString(id) + " WHERE " + DataBaseAdapter.Key_ID + " = ?");
                        dba.UpdateQuery(Strsql, Integer.toString(1));
                    }
                    dba.Close();

                    sync.smsProcess(msg);

                                            abortBroadcast();
            /************Now deleting the SMS from the Inbox*********************/                  
                                            removeMessage(SMSReceiver.this.context, Phnumber);  
                    if(msg.substring(3, 4).equals("2"))
                        ConstantClass.isAuditrequestSend = false;           

        /*******after receiving the sms opening the Main Screen.*****************/
                    if(ConstantClass.Clear_Main_Screen==true){
                        Intent intent = new Intent(context,ZigbeeActivity.class);
                        context.startActivity(intent);
                    }
                }else{
                    Toast.makeText(SMSReceiver.this.context, address, Toast.LENGTH_LONG).show();
                }
            }else{
                Toast.makeText(SMSReceiver.this.context, "message Corrupt" + address, Toast.LENGTH_LONG).show();
            }
        }
        }
    }catch(Exception e){
        dlg = new ExceptionDialog(SMSReceiver.this.context,"On Sms Receiver" + address ,e.getMessage());
        dlg.show();
        }
    }
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-24T05:04:20.903

我已经完成了与您相关的相同应用程序。但我不想保存所有收到的短信，我只想保存与银行交易相关的短信。我希望下面的代码对你有帮助..

接收短信.java

```
if(smsg.contains("credit") /***********/ || msg.contains("amount"))
   {
    Toast.makeText(context, "message related to transcation", Toast.LENGTH_SHORT).show();
    dbh.smsservice(smsg);
   } 
```

数据库处理程序.java

```
 public void smsservice(String sms) 
        {
    // TODO Auto-generated method stub

    String smessg="INSERT INTO SMSDETAILS(SMSMESS) VALUES('"+sms+"') ";
    sdb.execSQL(smessg);
    System.out.println("values of sms inserted"+smessg);
    } 
```

# java - ArrayList java ..我有一个错误

> ID：10731348
> 
> 赞同：-3
> 
> 时间：2012-05-24T04:52:19.363
> 
> 标签：java, arrays, main, increment

```
import java.util.ArrayList;

import java.util.Scanner;

public class StudentList {
    public static void main(String[] args) {

        ArrayList<Student> students = new ArrayList<Student>();
        int choice;

        printMenu();

        do {
            Scanner input = new Scanner(System.in);
            choice = input.nextInt();

            switch (choice) {

            case 1:
                System.out.println("\nAdd a student\n");
                students.add(addStudent());
                printMenu();
                break;
            case 2:
                System.out.println("\nFind a student\n");
                findStudent(students);
                printMenu();
                break;
            case 3:
                System.out.println("\nDelete a student\n");
                displayAllStudents(students);
                printMenu();
                break;
            case 4:
                System.out.println("\nDispay all students\n");
                displayAllStudents(students);
                printMenu();
                break;
            case 5:
                System.out.println("\nDisplay the total number of students\n");
                studentSize(students);
                printMenu();
                break;
            case 6:
                System.out.println("\nGoodbye!\n");
                break;
            default:
                System.out
                        .println("\nYour choice," + choice + ", is invalid\n");
                break;
            }
        } while (choice != 6);
    }

    public static void printMenu() {
        System.out
                .println("\nPlease select from the following menu:\n"
                        + "\t1\. Add a student\n" + "\t2\. Find a student\n"
                        + "\t3\. Delete a student\n"
                        + "\t4\. Display all students\n"
                        + "\t5\. Display the total number of students\n"
                        + "\t6\. Exit\n");
        System.out.print("Your choice: ");
    }

    public static Student addStudent() {
        Scanner inputS = new Scanner(System.in);
        System.out.println("First Name:");
        String fName = inputS.nextLine();
        System.out.println("Last Name:");
        String lName = inputS.nextLine();
        System.out.println("Major Name:");
        String major = inputS.nextLine();
        System.out.println("Student Name:");
        Integer sNumber = inputS.nextInt();
        System.out.println("gpa:");
        double grade = inputS.nextDouble();
        return new Student(fName, lName, Major, sNumber, grade);
    }

    public static void displayAllStudents(ArrayList<Student> students) {
        for (Student s : students) {
            System.out.print(s.toString());
        }
    }

    public static void findStudent(ArrayList<Student> students) {
        Scanner inputN = new Scanner(System.in);
        String name = inputN.nextLine();
        for (Student s : students) {

            if (s.getFName().equals(name)) {
                System.out.println(s);
                break;
            }

        }

    }

    public static void deleteStudent(ArrayList<Student> students) {
        Scanner inputS = new Scanner(System.in);
        String sNum = inputS.next();
        for (Student s : students) {
            if (s.FName().equals(sNum)) {
                students.remove(s);
                break;
            }
        }
    }

    public static void studentSize(ArrayList<Student> students) {
        System.out.printf("Size: %\n", students.size());
    }
} 
```

我无法弄清楚我的代码有什么问题

当我尝试编译时，它在这三件事上给了我一个错误

```
return new Student(fName, lName, Major, sNumber, grade);

if(s.FName().equals(sNum))

if(s.getFName().equals(name)) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-24T04:54:53.357

第一的：

```
return new Student(fName, lName, Major, sNumber, grade); 
```

专业不是一个变量，它的专业。

第二：

```
if(s.FName().equals(sNum)) 
```

它应该是

```
if(s.getFName().equals(sNum)) 
```

更新

```
public static Student addStudent()     {
    Scanner inputS = new Scanner(System.in);
    System.out.println("First Name:");
    String fName = inputS.nextLine();
    System.out.println("Last Name:");
    String lName = inputS.nextLine();
    System.out.println("Major Name:");
    String major = inputS.nextLine(); //variable name: major
    System.out.println("Student Name:");
    Integer sNumber = inputS.nextInt();
    System.out.println("gpa:");
    double grade = inputS.nextDouble();
    //variable sent: Major, it should be major
    return new Student(fName, lName, Major, sNumber, grade);
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-24T04:54:09.457

你在一个地方

```
s.FName() 
```

在另一个

```
s.getFName() 
```

此外，以下会在 rumtime 给你错误

```
for(Student s: students)
{
    if(s.FName().equals(sNum))
    {
        students.remove(s);
        break;
    }  
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-24T05:00:44.743

在查看对象时，您不能从数组中删除对象。你应该使用迭代器。像这样：

```
for (Iterator<Student> it = students.iterator(); it.hasNext(); )
        {
            Student student = (Student)it.next();
            if (!s.getFName().equals(sNum))
            {
                tmp.add(student);
            }

        lines.clear();
        for (Student t: tmp)
            students.add(t);
        tmp.clear();
        } 
```

# javascript - phonegap 和 web 使用相同的代码库？

> ID：10731356
> 
> 赞同：5
> 
> 时间：2012-05-24T04:53:04.857
> 
> 标签：javascript, mobile, cordova

为我们的移动网络应用程序和 phonegap 应用程序使用相同的代码库是否明智？它们应该是相似的，phonegap 版本只是让我们做更多的事情。我们能否检测它是否没有在 phonegap 上运行并隔离对 phonegap api 的调用，或者将它们分开是否更有意义。

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-05-24T08:57:47.080

当然，您可以使用大部分相同的代码库。一些 phonegap API 在 html5 中是相同的（例如 localStorage），所以那里的代码没有区别。

如果您使用 phonegap Build 服务，它会将 phonegap.js / cordova.js 脚本文件添加到您的项目根目录。只需将其始终包含在您的 html 中即可。然后您可以检测您的应用程序是否在 phonegap 中运行：

```
var isPhonegap = function() {
  return (typeof(cordova) !== 'undefined' || typeof(phonegap) !== 'undefined');
}

if (isPhonegap()) {
  // phonegap.js/cordova.js exists.. now let's handle the onDeviceReady event
} else {
  // in-browser
} 
```

如果您需要一些常用的启动代码，请将其放在一个函数中，并从 onDeviceReady 处理程序和上面的*else*块中调用此函数。

如果您调用的 phonegap api 的名称与 html5 的名称不同（例如，因为它具有 Moz* 或 WebKit* 前缀），只需将两者都包装在一个新名称中。例如：

```
var requestFileSystem = (isPhonegap() ? requestFileSystem : window.WebKitRequestFileSystem); 
```

如果您使用的 phonegap API 确实没有 html5 等效项，请尽可能尝试在 javascript 中复制该功能，否则您将失去浏览器中的功能。但请确保它在没有该功能的情况下足够优雅地降级。

注意：要在浏览器中测试移动设备功能，如加速度计、地理位置等。请查看[Ripple Chrome 扩展程序](https://chrome.google.com/webstore/detail/geelfhphabnejjhdalkjhgipohgpdnoc)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-08T16:19:52.747

我想出了一种方法来保持网络代码库的完整性......

使用内置 deviceready 事件的当前问题是，当页面加载时，您无法告诉应用程序：“嘿，这不是在移动设备上运行，无需等待设备准备好开始”。

1.  在代码的本机部分中，例如对于 iOS，在 MainViewController.m 中有一个方法 viewDidLoad，我正在发送一个 javascript 变量，稍后我会在 Web 代码中检查该变量，如果该变量在附近，我将等待启动为我的页面编写代码，直到一切就绪（例如，导航器地理位置）

    在 MainViewController.m 下：

    ```
    - (void) viewDidLoad
    {
        [super viewDidLoad];
        NSString* jsString = [NSString stringWithFormat:@"isAppNative = true;"];
        [self.webView stringByEvaluatingJavaScriptFromString:jsString];
    } 
    ```

2.  index.html 的代码如下：

    ```
    function onBodyLoad()
    {
        document.addEventListener("deviceready", onDeviceReady, false);
    }

    function onDeviceReady(){;
        myApp.run();
    }

    try{
        if(isAppNative!=undefined);
    }catch(err){
        $(document).ready(function(){
            myApp.run();
        });
    } 
    ```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-24T05:10:54.800

我会使用相同的代码库。PhoneGap 的重点是将您的移动网站转换为应用程序。适当地检测功能和屏幕房地产并不难。单独的代码库的问题通常是双重处理您的内容和样式的成本。如有必要，您可以将它们分离为共享资源并在运行时/访问时将它们捆绑在一起，但我个人仍然会将它们放在一起。

该博客涵盖了检测问题（也参见评论）：[http](http://bennolan.com/2011/08/22/phonegap-detection.html) ://bennolan.com/2011/08/22/phonegap-detection.html 。不过，症结在于`if (window.PhoneGap){...}`

# java - primefaces tabview onChange 未触发

> ID：10731359
> 
> 赞同：1
> 
> 时间：2012-05-24T04:53:44.497
> 
> 标签：java, jsf, primefaces

我希望在 primefaces 3.2 的 tabview 的每个选项卡中显示 2 个不同的数据表。那里的数据表将根据 onChange 事件中设置的“类型”变量获取数据。但我的问题是 onChange 事件根本不会触发。请检查我的 tabview 代码以检查为什么会这样：

```
<h:form id="frm">
        <p:tabView activeIndex="#{equityBean.activeIndex}">
            <p:ajax event="tabChange" listener="#{equityBean.onChange}" update=":frm"/>
            <p:tab title="NSE" binding="#{equityBean.tbn}">

                <p:dataTable binding="#{equityBean.dt}" value="#{equityBean.scripList}" var="scrip">
                    <f:facet name="header">
                Scrip Symbol
            </f:facet>
                <h:outputText value="#{scrip.scripSymbol}"/>
                <f:facet name="header">
                Company Name
            </f:facet>
                <h:outputText value="#{scrip.companyName}"/>
                <f:facet name="header">
                Volume
            </f:facet>
                <h:outputText value="#{scrip.totalTradedVolume}"/>
                </p:dataTable>
            </p:tab>
            <p:tab title="BSE" binding="#{equityBean.tb}">

            </p:tab>
        </p:tabView>
    </h:form> 
```

豆：

```
public void onChange(TabChangeEvent event) {
type=event.getTab().getTitle();
} 
```

**编辑：** 获取数据表值的bean代码：

```
public List<MasterScrip> getScripList() {
    scripList=new ArrayList<MasterScrip> ();
 scripList=getScripByVolumeType(type);
    return scripList;
}
private java.util.List<service.MasterScrip> getScripByVolumeType(java.lang.String type) {
    service.StatelessWebService port = service.getStatelessWebServicePort();
    return port.getScripByVolumeType(type);
} 
```

**编辑：jpa查询**

```
public Collection<MasterScrip> getScripByVolumeType(String type) 
```

{ 集合 sm=null;

```
 sm=em.createQuery("select m from MasterScrip m where m.type = :type order by m.totalTradedVolume").setParameter("type", type).setMaxResults(2).getResultList(); // retuens no records
       return sm;
   } 
```

记录返回但不显示..

为什么会这样？我哪里错了？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-24T04:56:09.253

你的错误就在这里。

```
listener="#{equityBean.onChange(event)}" 
```

该`event`对象在 EL 范围内不存在。删除论据。您根本不需要指定它。JSF 将自己提供必要的动作侦听器参数。

```
listener="#{equityBean.onChange}" 
```

对于所有其他`listener`和`actionListener`属性也是如此。只有在组件的`action`属性中，`UICommand`您才能指定自定义参数（应该使用真实值传递，而不是使用一些随机且不存在的变量名）。

# php - PHP将mysql行转换为数组以查找其大小

> ID：10731370
> 
> 赞同：0
> 
> 时间：2012-05-24T04:55:45.913
> 
> 标签：php, mysql, arrays, null

我一直在寻找几个小时来找到正确的方法来做到这一点。任何帮助将不胜感激。

我正在寻找一种方法来计算定义行中非空字段的数量。

我想使用 mysql_query 将行转换为数组，跳过空字段。然后我想取那个数组并找到它的大小。

```
mysql_query(SELECT * FROM table)

$value = array(list, of, values, from, row, in, my, database);
echo sizeof($value); //value would be 8 
```

我也尝试过使用 mysql_num_fields() 计算字段，但不知道如何从结果中减去空字段。

```
$test = mysql_query("SELECT * FROM table");
$num_rows = mysql_num_fields($test);
echo $num_rows; //but subtracting all fields that are NULL 
```

预先感谢您的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-24T05:11:07.040

清理数组的一种更简单的方法是使用 php 的 array_filter 函数而不使用回调参数。默认情况下，该函数设置为删除包含 false（或 0）、null 或 "" 的元素。

```
//This prunes out 'false', '0', 'null' or ''
$my_array = array_filter($my_array); 
```

首先将mysql行存储到数组中，然后过滤它，然后使用cont函数计算元素

```
$result = mysql_query("SELECT * FROM table");

while($row = mysql_fetch_array($result))
  {
   $row = array_filter($row); //remove empty values
   $num_of_values_non_empty = count($row);
   echo $num_of_values_non_empty;
  } 
```

# encryption - 如何混淆加密功能的密钥？

> ID：10731372
> 
> 赞同：3
> 
> 时间：2012-05-24T04:56:04.213
> 
> 标签：encryption, cryptography, obfuscation, decompiling

如果加密函数需要密钥，您如何混淆源代码中的密钥，以便反编译不会泄露密钥从而启用解密？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-24T05:28:52.217

答案很大程度上取决于平台和开发工具，但总的来说没有可靠的解决方案。加密功能是密钥必须以其“自然”形式存在的点。所以黑客需要做的就是把断点放在那里并转储密钥。甚至不需要反编译任何东西。因此，任何混淆只对新手有好处，或者当出于某种原因无法进行调试时。使用应用程序中存在的文本字符串作为键是变体之一。

但最好的方法当然是不要把钥匙放在里面。根据您的使用场景，您有时可以使用一些系统信息（例如智能手机的 IMEI）作为密钥。在其他情况下，您可以在安装应用程序时生成密钥并将该密钥存储为应用程序数据的组成部分（例如，使用数据库的列名作为密钥，或类似的东西）。

尽管如此，如前所述，当可以运行调试器时，所有这些都相对容易跟踪。

有一件事可以抵消调试 - 将解密卸载给第三方。这可以通过使用外部加密设备（USB 加密令牌或智能卡）或调用 Web 服务来解密某些信息部分来完成。当然，有些方法也只适用于有限的场景。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-24T05:09:26.470

加密内置于 .NET 配置系统中。您可以加密 app/web.config 文件的块，包括您存储私钥的位置。

[http://www.dotnetprofessional.com/blog/post/2008/03/03/Encrypt-sections-of-WebConfig-or-AppConfig.aspx](http://www.dotnetprofessional.com/blog/post/2008/03/03/Encrypt-sections-of-WebConfig-or-AppConfig.aspx)

[资源](https://stackoverflow.com/questions/619921/how-do-you-hide-an-encryption-key-in-a-net-application)

# ruby - 用于选择 Ruby on Rails 索引排序的用户下拉列表

> ID：10731374
> 
> 赞同：1
> 
> 时间：2012-05-24T04:56:11.920
> 
> 标签：ruby, ruby-on-rails-3, web

我见过类似于这个问题的东西，但不完全是我要找的东西。在询问之前，我确实尝试在其他地方找到这个。话虽如此。

我正在创建我的第一个 Rails 应用程序。我将做一个简单的例子来演示我的问题：

假设我有模型员工。

每个员工都有一个名字和一个职位。

当我导航到 localhost/Employees/index 时，我会得到一个员工列表。我希望该索引可由用户排序。我希望它有下拉菜单，允许用户选择要排序的内容。如果这是 PHP，我将只传递用户搜索首选项的参数，并使用不同的“ORDER BY”值重新加载页面，但我似乎无法弄清楚在 rails 中从哪里开始这样的事情。

在此先感谢，瑞安

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-24T05:31:57.300

当用户提交表单时， **params**哈希通过表单传递给控制器​​。一种简单的方法是使用单独的表单来编辑搜索字段。（抱歉，如果我的 ERB 错误，我通常使用 HAML）

你的表格里有这样的东西。它也修改了 URL 标头。

```
<%= form_tag(params, :method => :get) do %>
  <%= select_tag(:order_by, options_for_select(SET_OF_ORDERS, params[:order_by])) %>
  <%= submit_tag "Search with parameters" %> 
```

然后在你的控制器中使用 find 函数中的**:order_by**参数 (params[:order_by]) 。

[options_for_select](http://api.rubyonrails.org/classes/ActionView/Helpers/FormOptionsHelper.html)是一个表单助手。

与往常一样，请确保清理输入，因为用户可以将任何内容添加到 URL 请求中，并且您不希望 SQL 注入。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-24T08:37:18.677

嘿，如果你喜欢 Jquery，那么这种类型的功能可以通过 jquery 工具 DataTables 实现，它为你提供了更多的功能，并为索引页面中的表提供了良好的 css。

按照下面的链接向您解释如何使用数据表

[http://railscasts.com/episodes/340-datatables?view=asciicast](http://railscasts.com/episodes/340-datatables?view=asciicast)

我希望这可以帮助你。
谢谢。

# java - Eclipse - Android 设备选择器中的目标“未知”

> ID：10731375
> 
> 赞同：69
> 
> 时间：2012-05-24T04:56:13.857
> 
> 标签：java, android, eclipse

我正在使用 LG-P500。当我尝试在“Android 设备选择器”中选择它时，Eclipse 会识别手机而不是目标。它说目标“未知”。因为这个问题，我不能选择手机作为安卓设备。

如何让 Eclipse 识别目标？

* * *

## 回答 #1

> 赞同：88
> 
> 时间：2012-05-24T10:56:08.937

LG手机也有同样的问题。重新启动它（电话）对我有用

* * *

## 回答 #2

> 赞同：65
> 
> 时间：2012-09-17T03:41:17.657

我知道的一种解决方案是关闭并打开手机上的 USB 调试。它也恰好解决了许多其他设备无法识别的问题。

* * *

## 回答 #3

> 赞同：22
> 
> 时间：2013-04-12T15:33:50.840

如果您的设备被识别但日食将其声明为未知，请按照以下步骤操作：

```
->open cmd   
->go to the your android sdk directory --> Go to platform-tools
->adb kill-server
->adb start-server 
```

这肯定会解决你的问题:)

如果您已经安装了 USB 驱动程序并且您的设备仍然显示为未知，请遵循此解决方案。我的 MOTO G 也有同样的问题，这个解决方案对我来说很好用

* * *

## 回答 #4

> 赞同：9
> 
> 时间：2012-05-24T06:54:49.867

检查您的设备

> **已连接 USB**

和

> **USB调试已连接**

或检查以下

解决方案是为设备创建一个 udev 规则。请参阅[http://developer.android.com/guide/developing/device.html#setting-up](http://developer.android.com/guide/developing/device.html#setting-up)了解如何为您的特定供应商设备设置 udev 规则。

随着规则到位。Eclipse 能够启动和调试。

![在此处输入图像描述](../Images/8a5e29aa0582f242608e9c78c2fe563e.png)

* * *

## 回答 #5

> 赞同：8
> 
> 时间：2014-05-05T00:37:12.997

一个简单的技巧对我来说很好。

1.  断开设备与 PC 的连接
2.  在手机设置中点击撤销USB调试授权
3.  将设备重新连接到 PC
4.  点击 OK 进行 RSA 授权

* * *

## 回答 #6

> 赞同：6
> 
> 时间：2014-12-12T12:34:53.850

也试试这个，**在你的手机上**：

1.  转到“ ***USB 计算机连接***”
2.  选择连接为“***媒体设备（MTP）*** ”

* * *

## 回答 #7

> 赞同：5
> 
> 时间：2012-12-16T02:42:59.623

我的 SCH-I535 设备没有成为目标的原因......是因为我将设备插入了 USB 3.0 端口。一旦我将它插入 2.0，一切都开始正常工作。

* * *

## 回答 #8

> 赞同：5
> 
> 时间：2013-07-09T13:50:23.610

我尝试了这些建议，但不幸的是，没有任何效果。

对我有用的是：

1.  关闭日食
2.  结束 adb.exe 进程（使用 Windows 任务管理器）
3.  重启 Eclipse（设备现在在 Android 设备选择器中被识别）

* * *

## 回答 #9

> 赞同：3
> 
> 时间：2015-02-24T11:37:20.887

转到设置 -> 存储 -> 单击右上角的菜单按钮 -> USB 计算机连接 -> 检查媒体设备（MTP）是否启用

* * *

## 回答 #10

> 赞同：1
> 
> 时间：2012-05-24T05:41:58.687

您的计算机上是否安装了手机驱动程序，eclipse 不会自动附带手机[驱动程序](http://developer.android.com/sdk/win-usb.html)。

* * *

## 回答 #11

> 赞同：1
> 
> 时间：2013-07-02T09:28:46.310

我的问题通过更换电缆解决了。没有其他东西对我有用。

* * *

## 回答 #12

> 赞同：1
> 
> 时间：2014-03-02T10:17:43.750

对于这个问题，我尝试断开/重新连接 USB 电缆，打开/关闭 USB 调试并重新启动 Eclipse，但没有任何效果。尝试不同的 android 设备显示完全相同的 eclipse 错误，两个条目标记为“离线”，断开 USB 连接后，它仍然显示一个条目，而没有连接任何内容。我的问题通过重新启动计算机并重新启动来解决。在我的情况下，可能结束 adb.exe 程序（答案 4）也会这样做。

* * *

## 回答 #13

> 赞同：1
> 
> 时间：2014-05-01T03:17:12.523

银河S5

我知道这已经得到了很多次的回答，但是如果你有 Galaxy S5，那么关闭和打开 USB 调试可以解决这个问题

* * *

## 回答 #14

> 赞同：1
> 
> 时间：2014-11-16T03:33:13.907

当手机插入并且 Eclipse 窗口显示“未知”图标...在手机上关闭 USB 调试然后再次打开，然后它会要求允许该计算机连接，你可以说总是让它做所以。然后它出现了。

* * *

## 回答 #15

> 赞同：0
> 
> 时间：2012-05-24T07:03:09.457

为您的开发设备创建一个[udev 规则](http://developer.android.com/guide/developing/device.html#setting-up)。

* * *

## 回答 #16

> 赞同：0
> 
> 时间：2013-03-18T19:46:02.460

我有同样的问题，我找到了这篇文章，它为我解决了这个问题。

只需下载 [http://dl.google.com/android/repository/platform-tools_r16.0.1-windows.zip](http://dl.google.com/android/repository/platform-tools_r16.0.1-windows.zip) 解压缩并替换您的“C:\Program Files (x86)\Android\android-sdk\platform-tools”目录

[归功于](https://stackoverflow.com/users/1242311/hack-on)hack_on

这是他帮助我的帖子： [https ://stackoverflow.com/a/15000565/342497](https://stackoverflow.com/a/15000565/342497)

谢谢！:-)

* * *

## 回答 #17

> 赞同：0
> 
> 时间：2013-03-19T17:46:54.357

如果您在选择设备时无法选择确定按钮，这可能意味着根据我的经验，您也无法执行 adb logcat 之类的操作。

我通常从任务管理器中杀死 adb 并开始工作。我注意到 adb kill-server 有时只能工作，并且通常有多个进程称为 adb 正在运行......不确定这是一个错误还是设计使然。

* * *

## 回答 #18

> 赞同：0
> 
> 时间：2013-04-10T18:54:26.843

第 1 步：点击项目 => 属性 => android => 选择您的设备支持的 api 级别。

第二步：重启手机

为我工作...

* * *

## 回答 #19

> 赞同：0
> 
> 时间：2013-06-06T06:02:04.630

有完全相同的问题。工作两年多，然后突然出现这个错误。我的解决方法是在我的机器上运行位于此处的*SDK Manager.exe ：* *C:\Program Files (x86)\Android\android-sdk* 原来我无法在装有 Android 操作系统 4.2 的设备上运行。 2，只有4.0.2。SDK更新后识别工作完美。原来我的手机操作系统已更新，我忘了更新 SDK。

* * *

## 回答 #20

> 赞同：0
> 
> 时间：2013-10-28T09:55:40.423

有同样的问题。原来我已将 USB 连接模式从 MTP 更改为 MSC。改回MTP解决了这个问题。谢谢。

* * *

## 回答 #21

> 赞同：0
> 
> 时间：2014-01-22T18:13:43.077

我曾经在我的 HTC One X 中调试过没有问题的问题，我打破了屏幕，直到他们修复它之前，我设法得到了一个 HTC One（我认为它是内部调用的 M7）。

我无法用同样的问题进行调试，实际发生的事情是除了必须遵循一个奇怪的程序来使调试选项出现（在“关于”菜单中的固件版本中按 7 次）之外，手机还显示一条消息，要求我验证尝试对其进行调试的计算机是否已获得授权。

我以前在我使用过的任何手机中都没有看到过这种行为，不确定这是一项新功能，还是根本没有在其他手机上强制执行。

* * *

## 回答 #22

> 赞同：0
> 
> 时间：2014-03-27T14:27:32.917

这是因为你没有让你的手机被这台电脑调试。

锁定您的屏幕，拔下并插入，然后解锁屏幕单击对话框中的允许。

* * *

## 回答 #23

> 赞同：0
> 
> 时间：2014-07-10T10:47:52.977

KITKAT 4.4.2+ 用户，尝试从 ART 切换到 DALVIK 或从 DALVIK 切换到 ART。:) 解决了我的问题。

* * *

## 回答 #24

> 赞同：0
> 
> 时间：2014-07-19T19:06:03.933

我尝试了不同的驱动程序，打开/关闭 USB 调试，使用较低级别的 API 重建程序，杀死 ABD 并重新启动。然后我在这里看到了关于电缆交换的帖子。将 USB 电缆更改为三星 USB 电缆并立即工作。

* * *

## 回答 #25

> 赞同：0
> 
> 时间：2014-07-29T17:26:57.577

您需要将该设备授权给该计算机。我正在将手机连接到我的 centos 虚拟机并不断收到此信息。我不得不杀死 adb 服务器，然后以 root 用户身份运行它。然后你会在手机上得到授权机器的提示。

* * *

## 回答 #26

> 赞同：0
> 
> 时间：2014-09-25T10:35:42.417

对我来说，它通过在 ADB 运行时禁用和启用 USB 调试选项来工作。感谢所有的建议。

* * *

## 回答 #27

> 赞同：0
> 
> 时间：2014-11-11T19:25:57.193

我遇到了同样的问题，重新启动PC对我有用。

* * *

## 回答 #28

> 赞同：0
> 
> 时间：2014-11-29T21:14:25.653

（*调试已开启，USB 线已插入，重新启动*）

***解决方案：*** 将 USB 连接从媒体设备 (MTP) 切换到相机 (PTP)。当我这样做时，PC 安装了设备驱动程序，然后手机给了我计算机的指纹，并出现了一个关于允许设备使用 USB 调试的对话框。接受。设备出现在 Eclipse 中。都好。

（**在三星 Note II API 19**上） 注意：总是尝试切换 USB 模式是个好习惯。我不认为这是指定相机（PTP）的行为，而是这样做时生成的对话框。另外，我更换了手机：我记得以前看到过这个对话框，但在这部手机上没有。也许有一个选项可以在每个设备上启用它？

* * *

## 回答 #29

> 赞同：0
> 
> 时间：2014-12-01T19:06:39.743

我有同样的问题。原来我的设备正在提示一个对话框，询问我是否应该允许连接到我的笔记本电脑。单击是后，此问题消失了。

* * *

## 回答 #30

> 赞同：0
> 
> 时间：2015-10-14T15:02:44.647

我的问题原来是*adb*服务器的权限不足。

我通过远程桌面运行 Android Studio（使用笔记本电脑连接到本地功能更强大的计算机）。显然，通过远程桌面运行时我没有所有权限。

停止*adb*服务器并以 root 权限重新启动它后解决了问题。

```
sudo ./adb kill-server
sudo ./adb root 
```

编辑：

原来我必须第一次这样做。从第一次开始，我不再需要这样做了。

# jquery - jQuery datetimepicker - 选择时间时捕获鼠标

> ID：10731376
> 
> 赞同：0
> 
> 时间：2012-05-24T04:56:16.710
> 
> 标签：jquery, datetimepicker, mousecapture

我有一个附加到文本框的 DateTimePicker 页面。问题是当我打开 datetimepicker 并单击小时（或分钟）滑块按钮时，鼠标被小时滑块按钮捕获。即使我在控件内部或外部单击鼠标，也不会释放捕获。该控件在其演示网站上运行良好，但在我的页面上使用它时出现问题。知道是什么原因造成的吗？我正在使用 JQuery 1.6.2 分钟。如果我单击这两个按钮，两个按钮都会开始随着鼠标移动，并且文本框中的值会不断变化。如何发布此捕获或识别问题？

[这里是我正在使用的 DateTimePicker 的链接](http://trentrichardson.com/examples/timepicker/)

我正在使用的代码：

```
 $("#txtDateTime").datetimepicker({
            showOn: 'both',
            buttonImage: 'images/calendar.png',
            buttonImageOnly: true,
            dateFormat: 'mm/dd/yy',
            timeFormat: 'hh:mm',
            ampm: true
        }); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-28T07:20:43.187

我发现了问题。这是因为在主文件中添加了[jCorners脚本。](http://jcorners.culturezoo.com/)

# iphone - 如果正在录制视频，如何提醒和停止尝试的 segue

> ID：10731379
> 
> 赞同：1
> 
> 时间：2012-05-24T04:56:39.690
> 
> 标签：iphone, ios, xcode, ipad

我有一个视图允许通过开始/停止按钮进行视频录制而没有预览视图，我想提醒用户在视频期间尝试更改情节提要视图（通过触摸手势或翻转信息按钮）时停止录制正在录制。如果 AVFoundation 视频捕获会话处于活动状态，我如何防止转到另一个视图，并`UIAlertView`弹出一个提醒用户先停止录制的弹出窗口。我将 UIAlertView 放在 a 中`viewWillDisappear`，它会弹出，但我不知道如何使弹出窗口有条件，或者阻止 segue 继续进行。感谢您提供任何帮助和示例代码。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-24T05:09:56.127

只需禁用按钮/手势或任何允许更改视图的东西。（对其进行视觉更改，以便用户知道它已被禁用）。或者，您可以为按钮/手势添加新的处理程序以显示警报。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-24T05:51:09.250

两种选择：

1.  禁用按钮/手势。

2.  不要从 IB 中的按钮/手势创建 segue，而是从视图控制器创建它。然后，您可以`performSegueWithIdentifier:`按照您想要的任何验证逻辑调用按钮/手势的操作方法。

# android - Android：月日年的日期格式

> ID：10731380
> 
> 赞同：2
> 
> 时间：2012-05-24T04:56:49.347
> 
> 标签：android, date-format, simpledateformat, android-date

我在应用程序中的日期显示为 07/10/2011(dd/MM/yyyy)...我希望日期格式为 2011 年 10 月 7 日，采用 android 编码。请帮助作为Android新手

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-24T05:03:44.057

```
 DateFormat f = DateFormat.getDateInstance(DateFormat.MEDIUM, Locale.ENGLISH);
    String dateString = f.format(new Date()); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-24T05:44:46.857

```
private void dateformation() {
        SimpleDateFormat dateformate = new SimpleDateFormat("MMM dd, yyyy");
        Calendar currentDate = Calendar.getInstance();

        String currentDateStr = dateformate.format(currentDate.getTime());
        Log.i("Infoe ", " " + currentDateStr.toString());
        System.out.println("Current date is :  " + currentDateStr);
        // //=== OR

        SimpleDateFormat sdf = new SimpleDateFormat("MMM dd, yyyy");

        sdf.applyPattern("MMM dd, yyyy");
        Date x = new Date(currentDate.get(Calendar.YEAR) - 1900,
                currentDate.get(Calendar.MONTH),
                currentDate.get(Calendar.DAY_OF_MONTH));
        Log.i("Infoe ", " " + sdf.format(x));
        System.out.println(sdf.format(x));

    } 
```

[日期格式类型](http://developer.android.com/reference/android/text/format/DateFormat.html)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-24T05:03:24.257

SimpleDateFormat dateFormat= new SimpleDateFormat("MMM dd, yyyy", Locale.US); dateFormat.format(new Date(0)));

[http://developer.android.com/reference/android/text/format/DateFormat.html](http://developer.android.com/reference/android/text/format/DateFormat.html) http://developer.android.com/reference/java/text/SimpleDateFormat.html

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-24T05:01:13.010

```
String mydate = java.text.DateFormat.getDateTimeInstance().format(Calendar.getInstance().getTime());

    TextView _dateText=(TextView)_view.findViewById(R.id.dateTextView);
    _dateText.setText(""+mydate); 
```

# c++ - C++：类/结构是否在编译时初始化？

> ID：10731381
> 
> 赞同：1
> 
> 时间：2012-05-24T04:56:55.040
> 
> 标签：c++, class, struct, initialization, c++03

假设我`Foo`用构造函数编写了一个类`Foo(int)`。我有这段代码：

```
Foo a(i), b = a + Foo(2); 
```

如果我在代码中使用常量调用构造函数，例如`Foo(2)`，编译器是运行一次并存储运行时的结果，还是在运行时执行？结构/类是否仅包含 POD 数据类型是否相同？

假设它在运行时执行（我相信是这种情况），有没有办法让它在编译时运行，或者具有与运行时相同的效果？

**编辑**：恐怕我没有说清楚。我指的`Foo(2)`是代码部分，它是完全不可变的。另外，我无法使用 C++11（我正在使用 GCC 4.1 并且无法升级），因此`constexpr`虽然有效，但不适合我。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-24T06:42:07.453

> Let's say I write a class Foo with a constructor Foo(int). And I have this piece of code:
> 
> ```
> Foo a(i), b = a + Foo(2); 
> ```
> 
> If I call the constructor in the code with a constant, does the compiler run it once, and store the result for run-time, or is it executed at run-time?

There are two levels to this:

*   is it possible and legal w.r.t. the Standard for a perfect optimiser -- achieving everything an expert person could potentially do with unlimited effort and genius - to do this at compile time, and
*   is compile-time behaviour *required* / *guaranteed* by the Standard.

Is `i` a compile time constant? If not, and the value of `i` passed to `Foo::Foo(i)` influence its behaviour (whether affecting data member values or side-effects like logging), then clearly it's inherently impossible to construct Foo(i) at compile time. If `i` is constant, it may still be inherently impossible - for example the constructor implementation may have behaviour based on the current time, or need to consult some other run-time data. Such problems may also prevent `Foo(2)` being possible to evaluate at compile-time.

If `i` is constant, and `Foo`'s constructor doesn't depend on other runtime-only data, then it is *possible* to optimise. But, there's nothing in your code that requires the C++ Standard to even attempt any optimisation, let alone be capable of optimising this away. The same is true of the `+` operator invoked on the `Foo`s... it may be legal to optimise, but is certainly not required.

In practice, I would expect most current mainstream compiler to optimise simple cases of `Foo(i)` for compile-time constant `i`, but be challenged by resolving the addition. If you really want to know, try it for your compiler at various optimisation levels....

> Assuming that it executes at run-time (which I believe to be the case), is there a way to make it run at compile-time, or have the same effects as if it were run as such?

Yes... you may get some milage out of `constexpr`, which is a keyword introduced with C++11 that tells the compiler it's required to resolve certain values at compile time (if you `constexpr` for variables/values that the compiler isn't required to support at compile time it will report an error).

Secondly, it's often possible to express compile time operations using templates. To get yourself started in that direction, you may want to search for "C++ template factorial compiletime" or similar to see how basic calculations can be coded.

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-24T05:19:50.753

您可以`a`使用`constant initialization`静态初始化，但要做到这一点：

1.  `i`大多数是一个常量表达式
2.  `Foo::Foo(int)`一定是`constexpr`
3.  使用的任何/所有其他函数/ctors`Foo:Foo(int)`也必须是`constexpr`.

你的情况也差不多`b`-`Foo(2)`必须是`constexpr`，并且`Foo::operator+(Foo const &)`or `Foo operator+(Foo const &, Foo const &)`（无论你有什么）都必须是`constexpr`。

常量表达式的定义在 C++11 标准的 §5.19 中，以防您想更详细地研究。我的直接猜测是，如果`Foo`相当简单，它可能是可能的`a`，但我不太确定`b`。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-24T08:52:00.263

“as-if”规则适用，它表示编译器可以做任何它喜欢的事情，只要程序的可观察行为与标准中描述的行为相同。

如果：

*   的构造函数`Foo`在 TU 中可见，
*   析构函数也是如此`~Foo`，
*   它们都没有任何副作用，
*   他们的结果不依赖于任何需要在运行时计算出来的东西（比如时间，或者我们所知道的一些非常量对象的值，这些对象可能在你的代码执行时被修改了），
*   `operator+`是可见的，并且不会做任何事情让 RHS 的地址“逃逸”到未知代码中，或将其地址用于可观察的行为（例如将其打印出来），或做任何其他需要对象实际存在的事情，

然后一个足够聪明的优化器可以完全消除`Foo(2)`临时，并且无论在哪里`operator+`使用 RHS 的数据成员，只要使用它知道这些成员将拥有的任何值。

或者，作为较小的优化，它可以将值放入`Foo`程序数据部分中的实例的布局中，并将其用作`Foo(2)`. 我想这就是存储运行时结果的意思。

这种优化是否真的发生完全是特定于实现的，并且取决于您使用的编译器和标志。反汇编代码以查看实际发生的情况。

如果您执行以下操作，您可以确保`Foo(2)`在 C++03 中只计算一次：

```
static Foo foo2(2);
Foo a(i), b = a + foo2; 
```

`foo2`是（根据标准）在运行时计算，即第一次执行代码。同样，编译器可以调用“as-if”规则在编译时执行部分或全部计算，但这也不是必需的。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-24T05:06:11.043

编译好的代码在执行过程中可能会在不同的时间点被调用。编译代码后，Foo(2) 的值可能是不可变的。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-24T05:03:58.207

```
Foo a(i), b = a + Foo(2); 
```

此初始化发生在运行时，而不是编译时。

编译时初始化仅适用于内置类型，如果它们的初始化器可以在编译时计算，或者如果它们被声明为全局变量，或者声明为`static`. 在后两种情况下，它们在编译时被初始化为零。我在这里详细解释了这一点：

*   [什么是 C++ 中对象的动态初始化？](https://stackoverflow.com/questions/5945897/what-is-dynamic-intialization-of-object-in-c)

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2012-05-24T05:05:08.433

这发生在运行时。如果您希望它在编译时发生，那么您需要对值进行硬编码。

# python - Mongoengine，在字典键字段之后.. Mongoengine 无法将字段名称转换为 db_fields

> ID：10731382
> 
> 赞同：0
> 
> 时间：2012-05-24T04:57:03.840
> 
> 标签：python, django, mongodb, pymongo, mongoengine

如果您尝试此代码..您可以看到我遇到的问题..

```
class Embedded(EmbeddedDocument):
    boxfluxInt = IntField(default=0, db_field='i')
    meta = {'allow_inheritance': False}
class Test(Document):
    boxflux = MapField(field=EmbeddedDocumentField(Embedded), db_field='x')
    meta = {'collection': 'test',
                   'allow_inheritance': False}
Test.drop_collection()

newTestDoc = Test()
newTestDoc.boxflux['DICTIONARY_KEY'] = Embedded(boxfluxInt=1)
newTestDoc.save()
Test.objects.update_one(inc__boxflux__DICTIONARY_KEY__boxfluxInt=1) 
```

Mongodb中的结果就像..

```
> db.test.findOne()
{
    "_id" : ObjectId("4fbdbbc8c450190a50000001"),
    "x" : {
            "DICTIONARY_KEY" : {
                    "boxfluxInt" : 1,
                    "i" : 1
            }
    }
}
> 
```

如您所见，我打算将 'x.DICTIONARY_KEY.i' 增加 1，但结果是创建了一个新密钥 (boxfluxInt)，即使我将 'boxfluxInt' 的 db_field 设置为 'i'

是虫子吗？还是我错了？

我认为字典键（'DICTIONARY_KEY'）使转换为 mongo 风格的数据库字段变得不可能..如果我是正确的..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-25T15:20:11.290

好的，这看起来像一个错误，报告它们的最佳位置是 github：http: [//github.com/mongoengine/mongoengine](http://github.com/mongoengine/mongoengine)

这要到 0.7 才会得到解决，因为它会破坏生产中的现有用户。因此，我将不得不编写迁移说明作为修复的一部分。

# sqlite - SQLite：检索刚刚添加的内容？

> ID：10731384
> 
> 赞同：0
> 
> 时间：2012-05-24T04:57:38.893
> 
> 标签：sqlite, auto-increment

我有一个自动递增的 ID 字段。我想做的是在完成 INSERT 命令后检索分配给此 ID 字段的值。

有人可以告诉我该怎么做吗？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-24T04:59:55.350

你想要`last_insert_rowid()`：

```
SELECT last_insert_rowid(); 
```

# php - PHP：验证表单并显示警报

> ID：10731388
> 
> 赞同：0
> 
> 时间：2012-05-24T04:58:18.813
> 
> 标签：php, javascript, html

我有一个注册表单，其中有一个字段登录名。我希望每个用户都有唯一的登录名，所以每当用户单击一个按钮时，我都想检查数据库。如果用户输入的登录名已经存在，我想显示一个警告框，要求他尝试另一个登录名。我写了以下代码。

```
if($login != '')
{
$query = "Select LoginName from register where LoginName='".$login."'";
$result = mysql_query($query);
if($result)
{
?>
<script type="text/javascript">
alert("Login name exist");
</script>
<?php
}
else
{
insert into database
}
} 
```

这里的问题是每次它向我显示名称已经存在的警报。它永远不会进入 else 部分。请帮我解决这个问题

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-24T05:06:46.680

即使没有返回任何行，mysql_query($query) 返回的 $result 也将存在。仅当查询无效或包含错误且无法执行时才会失败。

尝试使用以下内容：

```
if( mysql_num_rows($result) > 0 ) 
```

mysql_num_rows 将返回查询返回的行数。

友情提示：不要忘记清理您的用户输入以防止 SQL 注入。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-24T05:15:18.533

首先，当您获取数据然后计数 $rows 数组检查计数是否大于 0 然后您显示错误消息“用户名已存在”

所以把 if 条件和 else 写入插入数据

享受 ：）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-24T05:21:57.920

你的流程应该是这样的：

```
<?php
if($login != ''){
  $query = "Select LoginName from register where LoginName='".$login."'";
  $result = mysql_query($query);
  if($result){
    if(mysql_num_rows($result) > 0) {
?>
        <!-- LoginName already exists, do something here -->
        <script type="text/javascript">
          alert("Login name exist");
        </script>
<?php
   }
   else {
     // LoginName avaialable
     // your logic for registering user goes here
   }
 }
 else
 {
   // query not executed, handle this issue properly
 }
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-24T05:29:30.957

检查 if($result['LoginName]){ }

# smartgwt - ComBox 灌装 SmartGWT

> ID：10731389
> 
> 赞同：1
> 
> 时间：2012-05-24T04:58:19.140
> 
> 标签：smartgwt

在通过按添加按钮从 TextBox 获取文本后，我需要将数据输入到组合框中。我怎样才能在 SmartGWT 中完成它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-30T18:17:49.163

我相信您会首先[将 DataSource](http://www.smartclient.com/smartgwt/javadoc/com/smartgwt/client/widgets/form/fields/ComboBoxItem.html#setOptionDataSource%28com.smartgwt.client.data.DataSource%29)与您的 ComboBoxItem 关联起来。之后，请务必在组合框中同时调用 setValueField(...) 和 setDisplayField(...)。当组合框被实例化时，您应该开始看到获取请求被发送，并且获取的结果应该显示在组合框中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-03-31T07:36:54.437

如果它不是绑定到数据源的 ComboBox，它的完成方式如下：

```
Map<String, String> valueMap= new LinkedHashMap<String, String>();
valueMap.put("key","description");

comboBoxItem.setValueMap(valueMap); 
```

# mysql - 存储散列值或生成散列值的 bigint 变量哪个更好

> ID：10731392
> 
> 赞同：2
> 
> 时间：2012-05-24T04:58:40.873
> 
> 标签：mysql, image, hash, microtime

我有一个表，其中一列存储图像 src，它是散列值，并且散列值是从 microtime() 生成的，现在我有两种选择直接在数据库中存储散列值或存储派生图像名称的 bigint microtime .这将使我的数据库更快。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-25T08:24:37.400

我们必须从各个方面对此进行分析，以评估会导致哪些速度故障。

我会做几个假设：

*   该数据将用作标识符（主键、唯一键、复合键）；
*   此数据用于搜索和连接；
*   您正在使用一种哈希算法，例如 SHA1，它会产生 40 个字符的十六进制编码数据字符串（MD5 会产生一个 32 个字符的十六进制编码数据字符串，如果您使用的是 MD5，则所有这些都可以适应 MD5）；
*   您可能有兴趣将哈希的十六进制值转换为二进制，以减少一半所需的存储空间并提高比较速度；

## **在应用程序端**插入**和**更新：****

 **正如@Namphibian 所说，由 BIGINT 的 2 个操作和 CHAR 的 3 个操作组成。

但在我看来，速度差异真的没有那么大。您可以运行 10.000.000 次连续计算（在一个`while`循环中）并对它们进行基准测试以找出它们之间的真正差异。

此外，应用程序代码中的速度差异会线性影响用户，而 DB 中的速度差异会在流量增加时对用户产生非线性影响，因为重叠的写入必须相互等待，而一些读取必须等待写入完成。

## **在数据库端**插入**和**更新：****

 **BIGINT 与 CHAR(40) 或 BINARY(20) 几乎相同，因为更严重的时间消耗是等待访问磁盘而不是实际写入磁盘。

## **在数据库端**选择**和**加入：****

 **与 CHAR(40) 或 BINARY(20) 相比，BIGINT总是更快，原因有两个**：**

*   BIGINT 以 8 个字节存储，CHAR(40) 以 40 个字节存储，BINARY(20) 以 20 个字节存储；
*   BIGINT 的连续增加特性使其可预测且易于比较和排序。

第二个最佳选择是 BINARY(20)，因为它节省了*一些*空间，并且由于长度减少而更容易比较。

BINARY(20) 和 CHAR(40) 都是散列机制的结果并且是随机的，因此比较和排序平均需要更长的时间，因为索引中的随机数据（对于 btree 索引）需要更多的树遍历来获取（i表示在多个值的上下文中，而不是单个值）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-25T10:39:21.357

一个重要的科学原则可能适用于此：不要丢失原始数据。你永远不知道你可能需要它来做什么。******

# php - PHP密码散列

> ID：10731398
> 
> 赞同：1
> 
> 时间：2012-05-24T04:59:25.507
> 
> 标签：php, passwords, password-protection

截至目前我有这行代码

```
<?php
    $pass = "12312312";
    echo md5(crypt($pass))
?> 
```

我知道 crypt 可以随机生成盐，但我不知道如何在用户输入上进行比较。

我的登录表需要哪些字段？还有，我会在我的表中插入什么数据？

谢谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-24T06:12:03.333

您可以将密码存储在下表中

```
$pass = "12312312";

// store this in table with separate column
$salt = md5("any variable"); // may be email or username

// generate password
$password = sha1($salt.$pass);

// now store salt and password in table 
```

你可以检查密码

```
$pass = "User input";

// get the user from database based on user id or username
// and test the password stored in db with

if($passwordFromTable == sha1($saltFromTable.$pass))
{
    // correct
} 
```

# asp.net-mvc-3 - 获取mvc的telerik菜单中的最后一个ID

> ID：10731399
> 
> 赞同：0
> 
> 时间：2012-05-24T04:59:33.433
> 
> 标签：asp.net-mvc-3, telerik, telerik-mvc

我在菜单组件中为 mvc 使用 Telerik 控件我遇到了一个奇怪的问题，它发布了集合中的最后一个 id，如果我有`moduleID`s =23 和 21，我在服务器上得到的只是 21 我有以下代码

```
menu.Add()
      .Text(items.ModuleName)                   
      .Content(() =>
                {%>
                  <%Html.RenderAction("ContentDocument", new { id = items.ModuleID });%>
                    <%});
                } 
```

似乎一旦菜单代码完成加载，就会调用 Action

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-24T06:20:08.777

主要问题是telerik菜单需要一个字符串，我通过使用`string.Format`like解决了它

```
.Content(string.Format("{0}", Html.Action("ContentDocument", new { id=items.ModuleID }))); 
```

希望它会在未来对其他人有所帮助。

# javascript - 如何添加更多 标签变成svg？

> ID：10731401
> 
> 赞同：-2
> 
> 时间：2012-05-24T04:59:51.667
> 
> 标签：javascript, jquery, html, svg

只是想知道，是否有按钮功能可以在 svg 中创建和添加/删除标签？

非常感谢您的帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-24T05:21:17.400

这可能会有所帮助：

```
 $('#button').click(function() { 
       var permalink = $("#image_file_input_field").val(); 
       $('#svg').html("<div><img src=" + permalink + "></div>');
}); 
```

# php - 如何存储mysql设置？

> ID：10731403
> 
> 赞同：1
> 
> 时间：2012-05-24T05:00:00.903
> 
> 标签：php, mysql

我正在开发一个 Web 应用程序（一个画廊管理器），它将由想要使用它的人安装在“网络托管”上，就像 Wordpress 平台一样。

关于安装，我要求以数据库主机名，数据库用户，数据库密码和数据库名称等形式设置mysql，但这些信息将在以后使用（例如在db中插入连接登录名和连接密码）。我想知道存储这些设置的更好方法是什么。我应该将它们存储到设置文件 .txt 中吗？.dat？我宁愿避免，因为有一些黑客攻击的可能性。

安装的第一步是填写表格后创建表，第二步是填写另一个表格后在数据库中插入数据。我试图将设置存储到变量中，但是就像我使用一些 php 函数一样，我以后不能在其他函数中使用它（因为局部变量，它们不是全局的）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-24T05:35:03.710

使用一个通用的 .php 文件，您应该将其包含在您希望与数据库连接的所有其他文件中。在该文件中，只需将主机名、db、dbh 等值分配给稍后将使用的一些有意义的变量，这些变量将可用于包含此文件的所有函数。

# sql - 如何将这两个表加入到同一个 Sql 结果中

> ID：10731405
> 
> 赞同：1
> 
> 时间：2012-05-24T05:00:10.297
> 
> 标签：sql, database, sql-server-2008, tsql

我正在尝试生成一个 SQL 查询，该查询可以将两个表连接在一起并返回结果..但第二个表是“扁平的”。我不确定这是否是正确的技术术语。它是非规范化的吗？

无论如何，有人可以建议我怎么做吗？

表：**用户**

```
UserId  Name
1       Pure.Krome
2       John
3       Jill
4       Jane 
```

表：**用户别名**

```
UserAliasId  UserId  Alias
1            1       Idiot
2            1       PewPew
3            3       BlahBlahBlah 
```

**期望的结果**

```
UserId  Name        Aliases
1       Pure.Krome  Idiot PewPew
2       John
3       Jill        BlahBlahBlah
4       Jane 
```

请注意：

*   用户不需要有别名。所以这是一个零->多关系（`outer join`）
*   第二张表的展平分隔符是空格。如果别名有空格，那我倒霉。（考虑一下，坏数据）。

我的问题的另一个例子是想到一个 StackOverflow 问题 + 标签。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-24T05:14:54.907

[http://groupconcat.codeplex.com/](http://groupconcat.codeplex.com/)有一个 MySQL 的克隆`GROUP_CONCAT()`实现为 CLR 聚合函数。我想 SQL 不是问题，但我也不妨：

```
SELECT 
  [Users].[UserId] AS UserId,
  [Users].[Name] AS Name,
  GROUP_CONCAT_D([UserAliases].[Alias]," ") AS Aliases
FROM [Users]
OUTER JOIN [UserAliases] ON [Users].[UserId]=[UserAliases].[UserId] 
```

或类似的。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-24T05:25:55.717

这未经测试，但试一试。我这里没有服务器。

```
SELECT  a.UserID, 
        a.[Name], 
        coalesce(NewTable.NameValues, '') Aliases
FROM    Users a LEFT JOIN
        (
          SELECT  UserID,
          STUFF((
            SELECT  '  ' + [Name] 
            FROM    UserAliases
            WHERE   ( UserID = Results.UserID )
            FOR XML PATH('')), 1, 2, '') AS NameValues
          FROM    UserAliases Results
          GROUP BY UserID
        ) NewTable
        on a.UserID = NewTable.UserID 
```

**[这是 SQL Fiddle 输出](http://sqlfiddle.com/#!3/831f4/6)**

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-24T05:29:01.217

`FOR XML PATH`在这种情况下很方便：

```
SELECT UserID, Name 
    , LTRIM(RTRIM((SELECT ' ' + Alias 
        FROM UserAliases WHERE UserID = u.UserID 
        FOR XML PATH('')))) AS Aliases
FROM Users u 
```

# drupal-7 - Drupal 7 视图和内容 API

> ID：10731408
> 
> 赞同：0
> 
> 时间：2012-05-24T05:00:33.010
> 
> 标签：drupal-7, views

我正在使用 Drupal 或 Views 3 的 Content API 从 Drupal 7 返回一些数据。

我面临的问题是 Content API，文档说使用查询参数**fields[]=[field_name]**只显示这些字段的数据，而不是显示所有数据。

这对我不起作用，当我尝试像这样使用内容 api 查询它时：

```
http://wawineregions.com.au/wawineregions/contentapi/content?type=winery&fields[]=field_rating&sort=title&page=0 
```

它不会在我期望的 REST 端点中显示我的“field_rating”字段。

至于我的视图，我使用的是视图 3。我已经设置了一个新视图，如果我只说内置字段“标题”，它会在 REST 端点中返回正确的结果。只要我包含一个自定义字段，例如“field_rating”，REST 端点就会返回所有字段的所有数据，这不是我想要的。

例子：

```
http://wawineregions.com.au/wawineregions/rest/views/view_wineriesbasic 
```

我只希望它返回我告诉它显示的两个字段的数据，即标题和评级。并非随附所有其他数据。

我在用：

```
Drupal 7
Services 3.x
Views 3.x
Content API 7.x-3.3-apha 
```

有没有人有任何想法？

# c++ - 对“cvCreateKalman”的未定义引用

> ID：10731414
> 
> 赞同：2
> 
> 时间：2012-05-24T05:01:24.897
> 
> 标签：c++, linux, qt, opencv

我一直在开发一个简单的 Qt C++ OpenCV 应用程序，我想集成一个卡尔曼滤波器。我包括：

```
opencv/cv.h;opencv/highgui.h and opencv/cxcore.h; 
```

在我的 .pro 文件中，我有：

> INCLUDEPATH += -I/usr/include/opencv 库 += -lopencv_core \ -lopencv_highgui \ -lopencv_imgproc

但是，当我这样做时，`CvKalman* kalman = cvCreateKalman(8,4,0);`我只会得到未定义的引用`cvCreateKalman`和 collect2: ld 返回 1 退出状态。编译输出不提供额外信息。

我尝试在网上寻求帮助，但谷歌并没有真正提供帮助。我还尝试包含其他`OpenCV`库，例如 ml 或对象跟踪，但没有任何反应。

这对我来说似乎有点奇怪，`CvKalman`并且`cvCreateKalman`在加载原始库后就可以在自动完成中使用......

任何帮助将不胜感激！谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-24T05:25:39.947

在`INCLUDEPATH`，像这样指定你的库，

```
INCLUDEPATH += /usr/include/opencv 
```

并像这样将模块添加到 LIBS 变量中，

```
LIBS += -L/usr/lib -lopencv_core -lopencv_highgui  -lopencv_imgproc 
```

这应该有效。

# java - Tomcat 7.0 for Hibernate 中的数据源 JNDI 配置

> ID：10731417
> 
> 赞同：2
> 
> 时间：2012-05-24T05:01:52.603
> 
> 标签：java, hibernate, tomcat, datasource

当在 (tomcat 7) server.xml 或 Context.xml 中配置数据源时，hibernate 无法识别 JNDI 并抛出低于 excpetion 但当我尝试在代码中使用 JNDI 访问数据源时同样工作正常。做错了什么

**下面是我在 hibernate.properties 中的配置**

```
hibernate.connection.driver_class com.mysql.jdbc.Driver
hibernate.connection.pool_size 10
hibernate.dialect org.hibernate.dialect.MySQL5Dialect
hibernate.connection.datasource java:comp/env/jdbc/employee
hibernate.show_sql true
hibernate.format_sql true 
```

在 server.xml 中

```
 <Host name="localhost"  appBase="webapps"
        unpackWARs="true" autoDeploy="true">

    <!-- SingleSignOn valve, share authentication between web applications
         Documentation at: /docs/config/valve.html -->
    <!--
    <Valve className="org.apache.catalina.authenticator.SingleSignOn" />
    -->

    <!-- Access log processes all example.
         Documentation at: /docs/config/valve.html
         Note: The pattern used is equivalent to using pattern="common" -->
    <Valve className="org.apache.catalina.valves.AccessLogValve" directory="logs"  
           prefix="localhost_access_log." suffix=".txt"
           pattern="%h %l %u %t &quot;%r&quot; %s %b" resolveHosts="false"/>
    **<Context docBase="hibernate" path="/hibernate">
            <Resource name="jdbc/employee" auth="Container"
          type="javax.sql.DataSource" driverClassName="com.mysql.jdbc.Driver"
          url="jdbc:mysql://localhost:45000/hibernatetest"
          username="user" password="hibernate" maxActive="20" maxIdle="10"
          maxWait="-1" removeAbandoned="true" removeAbandonedTimeout="60" logAbandoned="true"/>
        </Context>**
  </Host> 
```

在 Context.xml 文件中

```
 **<Context docBase="hibernate" path="/hibernate">
        <Resource name="jdbc/employee" auth="Container"
          type="javax.sql.DataSource" driverClassName="com.mysql.jdbc.Driver"
          url="jdbc:mysql://localhost:45000/hibernatetest"
          username="user" password="hibernate" maxActive="20" maxIdle="10"
          maxWait="-1" removeAbandoned="true" removeAbandonedTimeout="60" logAbandoned="true"/>
    </Context>** 
```

最后下面是我的 web.xml 文件

```
 <?xml version="1.0" encoding="ISO-8859-1"?>
    <!DOCTYPE web-app PUBLIC
    "-//Sun Microsystems, Inc.//DTD Web Application 2.3//EN"
    "http://java.sun.com/dtd/web-app_2_3.dtd">
    **<web-app >
        <servlet>
            <servlet-name>employee</servlet-name>
            <servlet-class>edu.experiments.web.EmployeViewer</servlet-class>
        </servlet>
        <servlet-mapping>
            <servlet-name>employee</servlet-name>
            <url-pattern>/employee</url-pattern>        
        </servlet-mapping>

        <resource-ref>
            <description>DB Connection</description>
            <res-ref-name>jdbc/employee</res-ref-name>
            <res-type>javax.sql.DataSource</res-type>
            <res-auth>Container</res-auth>
        </resource-ref>
    </web-app>**

org.hibernate.service.jndi.JndiException: Unable to lookup JNDI name [java:comp/env/jdbc/employee] 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-30T10:03:17.980

它比看起来更简单：

1.  不要在 web.xml 中添加任何关于 JNDI 的内容
2.  在您使用的 context.xml 中（无论是全局的还是 webapp 相关的）使用正确的名称，比如“jdbc/employee”
3.  休眠配置以“java:comp/env/jdbc/employee”的形式传递名称

这是参考页面：

[http://tomcat.apache.org/tomcat-7.0-doc/jndi-datasource-examples-howto.html](http://tomcat.apache.org/tomcat-7.0-doc/jndi-datasource-examples-howto.html)

# cocoa-touch - NSString WriteToFile 不是永久的吗？

> ID：10731420
> 
> 赞同：0
> 
> 时间：2012-05-24T05:02:01.103
> 
> 标签：cocoa-touch, ios5, save, automatic-ref-counting, xcode4.3

我正在尝试将存储在`NSString`变量中的文本保存在与项目的主包一起存储的文本文件中。

到目前为止，我没有成功并尝试了很多不同的方法。为什么这不是永久的？

```
NSString *pathToFile = [[NSString alloc]init];
pathToFile = [[NSBundle mainBundle] pathForResource:@"ListOfSavedImages" ofType:@"txt"];
NSLog(@"%@",pathToFile);

NSString *stringToWriteToFile = [[NSString alloc]init];
stringToWriteToFile=@"Adam";
NSLog(@"%@",stringToWriteToFile);

[stringToWriteToFile writeToFile:pathToFile atomically:YES encoding:NSUTF8StringEncoding error:NULL];
NSLog(@"called!");

NSString *contentsOfFile1 = [NSString stringWithContentsOfFile:pathToFile encoding:NSUTF8StringEncoding error:NULL];
NSLog(@"%@",contentsOfFile1); 
```

尽管此代码段末​​尾的输出“Adam”，但实际文件没有改变`NSLog`，但我也在视图加载时对文件的内容进行 nslogging，并且它总是恢复为原始文本（它实际上从未改变）。我究竟做错了什么？

我正在使用 Xcode 4.3、ARC 和情节提要。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-08T12:01:30.753

当您在本地实例化变量时，它们会在您到达块的末尾时泄漏 }。

尝试使用声明为特定视图控制器的属性的 Ivar，在 .m 文件中合成。

看看 iTunes 上斯坦福课程的 C139p，最好是 ARC 之前给出的早期系列，因为这充分解释了数据持久性的概念。

# plone - 如何在plone 4.1.3中显示页面上发布的评论数

> ID：10731422
> 
> 赞同：2
> 
> 时间：2012-05-24T05:02:06.380
> 
> 标签：plone

我已经使用 plone 控制面板的“讨论”启用了 plone 中的评论，但我无法显示页面中发布的评论数。我也尝试使用“类型”控制面板启用评论，但我无法实现。是否需要遵循任何程序来显示评论数。我想显示与在 plone 站点中找到的相同。

[http://plone.org/products/contentwellportlets](http://plone.org/products/contentwellportlets)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-24T05:59:00.783

You can get the number of comments for plone.app.discussion by adapting the context to IConversation and get the total_comments, see :

[https://github.com/plone/plone.app.discussion/blob/master/plone/app/discussion/conversation.py](https://github.com/plone/plone.app.discussion/blob/master/plone/app/discussion/conversation.py) and [http://plonegomobile.googlecode.com/svn-history/r1027/gomobiletheme.mobipublic/trunk/gomobiletheme/mobipublic/views.py](http://plonegomobile.googlecode.com/svn-history/r1027/gomobiletheme.mobipublic/trunk/gomobiletheme/mobipublic/views.py) for example

# google-maps - wordpress插件中的谷歌地图

> ID：10731426
> 
> 赞同：0
> 
> 时间：2012-05-24T05:02:41.103
> 
> 标签：google-maps, wordpress

我 在谷歌地图上使用了**Draggable Markers**

[http://gmaps-samples-v3.googlecode.com/svn/trunk/draggable-markers/draggable-markers.html](http://gmaps-samples-v3.googlecode.com/svn/trunk/draggable-markers/draggable-markers.html)。

当我在一个简单的 html 或 php 页面上使用 smaple 代码时，它看起来与链接上的一样好，但是当我在 wordpress 插件中使用它时，地图的指针没有出现在中心并且完整的地图. 看起来像

[http://www.screencast.com/users/Bidyut/folders/Default/media/10451777-2b22-40af-aa3e-c16d27e8ecf6](http://www.screencast.com/users/Bidyut/folders/Default/media/10451777-2b22-40af-aa3e-c16d27e8ecf6)

然后当我点击 Mozilla 的萤火虫时，完整的地图即将到来，但红色的 bellon 指针不在中心。我无法理解这个问题。

有人帮我吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-24T07:33:53.203

标准答案：[https ://stackoverflow.com/a/10606666/1204258](https://stackoverflow.com/a/10606666/1204258)

如果您编辑您的问题以包含您遇到问题的 URL，则可以提供有关单行代码需要去哪里的建议。由于它是一个插件，它可能涉及更改 PHP 代码：您使用的是哪个插件？

# c - 如何定义宏以将连接的char字符串转换为C中的wchar_t字符串

> ID：10731428
> 
> 赞同：6
> 
> 时间：2012-05-24T05:02:54.440
> 
> 标签：c, string, macros, wchar

和`_T()`Visual Studio 中的宏一样，我定义并使用了自己的`_L`宏：</p>

```
#define _L(x)  __L(x)
#define __L(x) L ## x 
```

它适用于：

```
wprintf(_L("abc\n")); 
```

但得到一个编译错误：

```
wprintf(_L("abc\n""def\n")); 
```

它报告*“不能连接具有不同字符类型的字符串文字”。*
我也做了：

```
#define _L2(x)  __L2(x)
#define __L2(x) L ## #x
wprintf(_L2("abc\n""def\n")); 
```

代码被编译，但`\n`不能作为新行的转义序列。`\n`变成两个字符，输出为`wprintf`：

> "abc\n""定义\n"

我怎样才能有一个宏来将两个连接的 char 字符串转换为`wchar_t`？问题是我有一些已经存在的宏：</p>

```
#define BAR  "The fist line\n" \
             "The second line\n" 
```

我想`wchar`在编译期间将它们转换为字符串。编译器是windows中的ICC。

**编辑**：宏在 gcc
中`_L`有效，MSVC 和 ICC 无效，这是一个编译器错误。谢谢@R..给我评论。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-24T08:04:22.787

我不认为你能做到这一点。

宏只是做简单的文本处理。他们可以`L`在开头添加，但不能说`"abc\n" "def\n"`是两个字符串，需要添加`L`两次。

如果将字符串传递给以逗号分隔的宏，而不是串联，则可以取得进展：
`L("abc\n", "def\n")`

`L`定义恰好接受两个字符串是微不足道的：
`#define L2(a,b) _L(a) _L(b)`
将其概括为具有单个宏，该宏可以获取任意数量的参数并`L`在正确的位置添加 s 是可能的，但更复杂。[您可以在Jens Gustedt 的 P99 宏](http://p99.gforge.inria.fr/p99-html/index.html)中找到做这些事情的聪明宏。

# iphone - 关于推送通知

> ID：10731431
> 
> 赞同：0
> 
> 时间：2012-05-24T05:03:05.337
> 
> 标签：iphone, ios, notifications, push

我对推送通知有几个问题。

1）如果应用程序在 AppStore 上运行而没有推送通知，并且我想更新一个启用了推送通知的新二进制文件。如果之前发布的版本中没有，是否可以在更新的版本中启用推送通知？如果是，如何，如果不是，为什么？

2）如果对第一个问题的回答是否定的，那么在我的第一个版本版本中是否有可能如果我启用 Apple ID 的推送通知并在第二个更新版本中进行实际编码等？

请帮我。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-24T05:46:27.387

是的，您必须使用推送通知代码和启用推送通知的配置文件制作新的二进制文件，然后使用新版本提交此代码。

你可以使用城市飞艇或苹果的推送通知。

# python - 在 NDB 中跟踪未知类型的反向引用

> ID：10731433
> 
> 赞同：7
> 
> 时间：2012-05-24T05:03:13.773
> 
> 标签：python, google-app-engine, google-cloud-datastore, app-engine-ndb

我正在 GAE 和 Python 2.7 运行时编写我的第一个 RESTful Web 服务；我已经开始使用 Guido 闪亮的新 ndb API。

但是，如果没有原始 db API 的隐式反向引用功能，我不确定如何解决特定情况。如果用户代理请求特定资源并且这些资源被移除 1 度：

主机/api/种类/id?depth=2

**鉴于相关实体的类型在开发时未知，从一对多关系中的“一个”中发现相关实体集合的最佳方法是什么？**

*   由于后一个限制，我无法使用[先前 SO查询中描述的替换查询。](https://stackoverflow.com/questions/9917569/google-app-engine-ndb-equivalent-for-modelname-set-backreference-property)我的模型在运行时是可定义的（因此不是硬编码的）这一事实阻止我使用查询来过滤匹配键的属性。

*   由于数据存储限制阻止我过滤没有指定种类的属性，祖先和其他无种类查询也被排除在外。

到目前为止，我唯一的想法（除了恢复到 db api）是使用跨组事务在“one”上写入我自己的引用，或者通过更新 ndb.StringProperty(repeat=True) 包含引入新类型的实体时的所有相关类型，或者每次将相关的“许多”实体写入数据存储时，只需在“一个”ndb.KeyProperty(repeat=True) 上维护一个键列表。

我希望比我更有经验的人可以提出更好的方法。

鉴于 jmort253 的建议，我将尝试用一个改编自文档的具体示例来扩充我的问题：

```
class Contact(ndb.Expando):
    """ The One """

    # basic info
    name = ndb.StringProperty()
    birth_day = ndb.DateProperty()

    # If I were using db, a collection called 'phone_numbers' would be implicitly 
    # created here.  I could use this property to retrieve related phone numbers 
    # when this entity was queried.  Since NDB lacks this feature, the service 
    # will neither have a reference to query nor the means to know the 
    # relationship exists in the first place since it cannot be hard-coded.  The
    # data model is extensible and user-defined at runtime; most relationships
    # will be described only in the data, and must be discoverable by the server.
    # In this case, when Contact is queried, I need a way to retrieve the
    # collection of phone numbers.

    # Company info.
    company_title = ndb.StringProperty()
    company_name = ndb.StringProperty()
    company_description = ndb.StringProperty()
    company_address = ndb.PostalAddressProperty()

class PhoneNumber(ndb.Expando):
    """ The Many """

    # no collection_name='phone_numbers' equivalent exists for the key property
    contact = ndb.KeyProperty(kind='Contact')
    number = ndb.PhoneNumberProperty() 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-24T14:04:00.273

有趣的问题！所以基本上你想看看 Contact 类，看看是否有其他模型类有一个 KeyProperty 引用它；在这个例子中电话号码（但可能有很多）。

我认为解决方案是要求您的用户在创建 PhoneNumber 类时明确添加此链接。

您可以通过为用户提供一个处理此问题的 KeyProperty 子类来简化用户的操作；例如

```
class LinkedKeyProperty(ndb.KeyProperty):
    def _fix_up(self, cls, code_name):
        super(LinkedKeyProperty, self)._fix_up(cls, code_name)
        modelclass = ndb.Model._kind_map[self._kind]
        collection_name = '%s_ref_%s_to_%s' % (cls.__name__,
                                               code_name,
                                               modelclass.__name__)
        setattr(modelclass, collection_name, (cls, self)) 
```

究竟如何选择集合的名称和存储的价值取决于您；只需在此处放置一些内容，以使您可以轻松地按照链接返回。该示例将在 Contact 上创建一个新属性：

```
Contact.PhoneNumber_ref_contact_to_Contact == (PhoneNumber, PhoneNumber.contact) 
```

[编辑以使代码正常工作并添加示例。:-)]

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-24T11:49:39.070

听起来像是[`ndb.StructuredProperty`](https://developers.google.com/appengine/docs/python/ndb/properties#structured).

# jquery - 儿童不计入 .hover

> ID：10731434
> 
> 赞同：0
> 
> 时间：2012-05-24T05:03:15.003
> 
> 标签：jquery, html, css

我目前正在为我的 HSC（高中证书）软件设计专业工作制作一个网站，我遇到了一个奇怪的错误。当前版本的网站可以在[http://ymindustries.webfactional.com](http://ymindustries.webfactional.com)看到。我的问题是：我有 jQuery 驱动的下拉菜单。在 Chrome 中，当您将鼠标悬停在菜单按钮上时，菜单会展开，离开菜单按钮会导致菜单再次缩回。但是，将鼠标从菜单按钮向下移动到新显示的菜单也会导致它缩回，这是一个问题，因为我需要用户能够单击最终将进入菜单的链接。似乎儿童不会触发悬停事件。此外，在 IE9 中，悬停事件根本不会触发，即使悬停在按钮上也是如此。

希望这措辞足够清楚。谢谢！YM

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-24T07:20:04.237

就像汤姆提到的那样，您可能希望将 .hover 伪类应用于子菜单。这应该不会太难。看着你的网站，我认为 CSS 选择器就像

``.dropdownMenu:hover { display:inline; }``

应该做的伎俩。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-24T05:04:41.430

这不是一个错误。当您使用 将光标移到元素边界之外时`.hover`，您不再悬停它。就那么简单。

扩大边界或将 a`.hover`应用于菜单。

# magento - Inchoo 的 FB Connect Magento 模块不适用于自定义主题

> ID：10731453
> 
> 赞同：-1
> 
> 时间：2012-05-24T05:06:12.147
> 
> 标签：magento

Inchoo 的 FB Connect 模块不适用于自定义主题，但适用于默认主题。所以很明显，自定义主题缺少某些东西或与之发生冲突，我需要弄清楚这一点。

我需要寻找任何一般的东西吗？

我发现它将其输出附加到`after_body_start`块，但在自定义主题上它不会在那里输出其与 FB 相关的标记和脚本。Mage 的 Google 分析代码在同一块的 html 中输出，并且工作正常，所以我在这里有点迷路。

Inchoo 的 fb 连接模块 xml - [https://github.com/ivanweiler/Inchoo_Facebook/blob/master/app/design/frontend/default/default/layout/inchoo/facebook.xml](https://github.com/ivanweiler/Inchoo_Facebook/blob/master/app/design/frontend/default/default/layout/inchoo/facebook.xml)

自定义主题也`page.xml`有这个参考：

`<block type="core/text_list" name="after_body_start" as="after_body_start" />`

完成`page.xml`自定义主题：

```
<default translate="label" module="page">
    <label>All Pages</label>
    <block type="page/html" name="root" output="toHtml" template="page/2columns-left.phtml">

        <block type="page/html_head" name="head" as="head">

            <action method="addItem"><type>skin_js</type><name>js/jquery-1.4.2.min.js</name></action>       
            <action method="addItem"><type>skin_js</type><name>slides-carousel/slides.min.jquery.js</name></action>         
            <action method="addItem"><type>skin_js</type><name>slides-carousel/slides-init.js</name></action>

            <action method="addJs"><script>prototype/prototype.js</script></action>
            <action method="addJs" ifconfig="dev/js/deprecation"><script>prototype/deprecation.js</script></action>
            <action method="addJs"><script>lib/ccard.js</script></action>
            <action method="addJs"><script>prototype/validation.js</script></action>
            <action method="addJs"><script>scriptaculous/builder.js</script></action>
            <action method="addJs"><script>scriptaculous/effects.js</script></action>
            <action method="addJs"><script>scriptaculous/dragdrop.js</script></action>
            <action method="addJs"><script>scriptaculous/controls.js</script></action>
            <action method="addJs"><script>scriptaculous/slider.js</script></action>
            <action method="addJs"><script>varien/js.js</script></action>
            <action method="addJs"><script>varien/form.js</script></action>
            <action method="addJs"><script>varien/menu.js</script></action>
            <action method="addJs"><script>mage/translate.js</script></action>
            <action method="addJs"><script>mage/cookies.js</script></action>            

            <action method="addCss"><stylesheet>css/styles.css</stylesheet></action>
            <action method="addItem"><type>skin_css</type><name>css/styles-ie.css</name><params/><if>lt IE 8</if></action>
            <action method="addCss"><stylesheet>css/niceforms-default.css</stylesheet></action> 
            <action method="addCss"><stylesheet>css/widgets.css</stylesheet></action>
            <action method="addCss"><stylesheet>css/print.css</stylesheet><params>media="print"</params></action>
            <action method="addCss"><stylesheet>slides-carousel/slides.css</stylesheet></action>
            <action method="addCss"><stylesheet>css/niceforms-default.css</stylesheet></action>             

            <action method="addItem"><type>js</type><name>lib/ds-sleight.js</name><params/><if>lt IE 7</if></action>
            <action method="addItem"><type>skin_js</type><name>js/niceforms.js</name></action>                  
            <action method="addItem"><type>skin_js</type><name>js/ie6.js</name><params/><if>lt IE 7</if></action>

        </block>

        <block type="core/text_list" name="after_body_start" as="after_body_start"/>

        <block type="page/html_notices" name="global_notices" as="global_notices" template="page/html/notices.phtml" />

        <block type="page/html_header" name="header" as="header">
            <block type="page/template_links" name="top.links" as="topLinks"/>
            <block type="page/switch" name="store_language" as="store_language" template="page/switch/flags.phtml"/>
            <block type="core/text_list" name="top.menu" as="topMenu"/>
            <block type="page/html_wrapper" name="top.container" as="topContainer" translate="label">
                <label>Page Header</label>
                <action method="setElementClass"><value>top-container</value></action>
            </block>
            <block type="directory/currency" name="currency" template="directory/currency_small.phtml"/>
            <block type="page/switch" name="ie" as="ie" template="page/ie/ie6.phtml"/>
        </block>

        <block type="page/html_breadcrumbs" name="breadcrumbs" as="breadcrumbs"/>

        <block type="core/text_list" name="left" as="left" translate="label">
            <label>Left Column</label>
        </block>

        <block type="core/messages" name="global_messages" as="global_messages"/>
        <block type="core/messages" name="messages" as="messages"/>

        <block type="core/text_list" name="content" as="content" translate="label">
            <label>Main Content Area</label>
        </block>

        <block type="core/text_list" name="right" as="right" translate="label">
            <label>Right Column</label>
        </block>

        <block type="page/html_footer" name="footer" as="footer" template="page/html/footer.phtml">
            <block type="page/html_wrapper" name="bottom.container" as="bottomContainer" translate="label">
                <label>Page Footer</label>
                <action method="setElementClass"><value>bottom-container</value></action>
            </block>
            <block type="page/switch" name="store_switcher" as="store_switcher" template="page/switch/stores.phtml"/>
            <block type="page/template_links" name="footer_links" as="footer_links" template="page/template/links.phtml"/>
        </block>

        <block type="core/text_list" name="before_body_end" as="before_body_end"/>
    </block>

    <block type="core/profiler" output="toHtml" name="core_profiler"/>
</default>

<print translate="label" module="page">
    <label>All Pages (Print Version)</label>
    <!-- Mage_Page -->
    <block type="page/html" name="root" output="toHtml" template="page/print.phtml">

        <block type="page/html_head" name="head" as="head">
            <action method="addJs"><script>prototype/prototype.js</script></action>
            <action method="addJs"><script>mage/translate.js</script></action>
            <action method="addJs"><script>lib/ccard.js</script></action>
            <action method="addJs"><script>prototype/validation.js</script></action>
            <action method="addJs"><script>varien/js.js</script></action>

            <action method="addCss"><stylesheet>css/styles.css</stylesheet></action>
            <action method="addItem"><type>skin_css</type><name>css/styles-ie.css</name><params/><if>lt IE 8</if></action>
            <action method="addCss"><stylesheet>css/widgets.css</stylesheet></action>
            <action method="addCss"><stylesheet>css/print.css</stylesheet><params>media="print"</params></action>

            <action method="addItem"><type>js</type><name>lib/ds-sleight.js</name><params/><if>lt IE 7</if></action>
            <action method="addItem"><type>skin_js</type><name>js/ie6.js</name><params/><if>lt IE 7</if></action>

        </block>

        <block type="core/text_list" name="content" as="content" translate="label">
            <label>Main Content Area</label>
        </block>

    </block>
</print>

 <!-- Custom page layout handles -->
<page_empty translate="label">
    <label>All Empty Layout Pages</label>
    <reference name="root">
        <action method="setTemplate"><template>page/empty.phtml</template></action>
        <!-- Mark root page block that template is applied -->
        <action method="setIsHandle"><applied>1</applied></action>
    </reference>
</page_empty>

<page_one_column translate="label">
    <label>All One-Column Layout Pages</label>
    <reference name="root">
        <action method="setTemplate"><template>page/1column.phtml</template></action>
        <!-- Mark root page block that template is applied -->
        <action method="setIsHandle"><applied>1</applied></action>
    </reference>
</page_one_column>

<page_two_columns_left translate="label">
    <label>All Two-Column Layout Pages (Left Column)</label>
    <reference name="root">
        <action method="setTemplate"><template>page/2columns-left.phtml</template></action>
        <!-- Mark root page block that template is applied -->
        <action method="setIsHandle"><applied>1</applied></action>
    </reference>
</page_two_columns_left>

<page_two_columns_right translate="label">
    <label>All Two-Column Layout Pages (Right Column)</label>
    <reference name="root">
        <action method="setTemplate"><template>page/2columns-right.phtml</template></action>
        <!-- Mark root page block that template is applied -->
        <action method="setIsHandle"><applied>1</applied></action>
    </reference>
</page_two_columns_right>

<page_three_columns translate="label">
    <label>All Three-Column Layout Pages</label>
    <reference name="root">
        <action method="setTemplate"><template>page/3columns.phtml</template></action>
        <!-- Mark root page block that template is applied -->
        <action method="setIsHandle"><applied>1</applied></action>
    </reference>
</page_three_columns> 
```

我还应该在哪里寻找？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-02T06:07:55.633

据我了解，您想在自定义主题中[使用 inchoo 的 facebook-connect-magento-extension](http://inchoo.net/ecommerce/magento/facebook-connect-magento-extension/)。
但是我设法在我的自定义主题中使用了 fb connect。
我做了以下更改。
**第 1 步：**下载 inchoo 的 facebook-connect-magento-extension 后，打开 app 文件夹，从已安装的 magento_folder 中复制`Inchoo`文件夹`/app/code/community/`并粘贴到其中。**第 2 步：**复制“布局”和“模板”并将其粘贴到您的主题文件夹下。**第 3 步：**将“Inchoo_Facebook.xml”复制到您的并**编辑**更改为这样`/app/code/local/`
**`/app/design/frontend/default/default``theme_folder/`
**`app/etc/modules``app/etc/modules` **`Inchoo_Facebook.xml``<codePool>community</codePool>``<codePool>local</codePool>`******

 ******```
<config>
    <modules>
        <Inchoo_Facebook>
            <active>true</active>
            <codePool>local</codePool>
        </Inchoo_Facebook>
    </modules>
</config> 
```

**第 4 步：**复制`/app/locale`到`/app/locale`您的 magento 文件夹中

**PS**：应用权限。

希望这可以帮助。******

# node.js - Node.js、协议缓冲区和 ubuntu - 如何让它工作？

> ID：10731454
> 
> 赞同：3
> 
> 时间：2012-05-24T05:06:20.743
> 
> 标签：node.js, protocol-buffers

以下是我用来尝试在 node.js 中加载 proto 文件的步骤。总的来说，我如何让协议缓冲区与 node.js 一起工作？

1) 将协议缓冲区下载并安装到此位置。

```
/home/ubuntu/Downloads/protobuf-2.4.1 
```

2) 从这个 repo 下载了这个 protobuf-for-node 修复。我将该文件夹放在我的 node.js 应用程序文件夹的 node_modules 文件夹中。

```
git://github.com/pzgz/protobuf-for-node.git 
```

3）运行以下命令

```
cd node_modules/protobuf-for-node
PROTOBUF=~/Downloads/protobuf-2.4.1 /usr/local/bin/node-waf configure clean build 
```

4）将以下文件移动到这些位置：

```
cp node_modules/protobuf-for-node/protobuf_for_node.h /usr/local/include/node
cp node_modules/protobuf-for-node/build/Release/protobuf_for_node_lib.so /usr/local/lib 
```

5) 运行以下命令来构建 node.js 附带的 feeds.proto 示例

```
cd node_modules/protobuf-for-node/example
protoc --descriptor_set_out=feeds.desc --include_imports feeds.proto 
```

6）在应用程序中，我添加了这一行。

```
var express = require('express'), routes = require('./routes');
var fs = require('fs');
var puts = require('util').puts;
url = require('url');
moment = require('moment');
var uuid = require('node-uuid');
var app = module.exports = express.createServer();
var Schema = require('protobuf_for_node').Schema;
var schema = new Schema(fs.readFileSync('/home/ubuntu/workspace/rtbopsConfig/rtbServers/rtbNodejsServer/node_modules/protobuf-for-node/example/feeds.desc')); 
```

7）这是我的错误。

```
module.js:337
    throw new Error("Cannot find module '" + request + "'");
          ^
Error: Cannot find module 'protobuf_for_node'
    at Function._resolveFilename (module.js:337:11)
    at Function._load (module.js:279:25)
    at Module.require (module.js:359:17)
    at require (module.js:375:17)
    at Object.<anonymous> (/home/ubuntu/app.js:9:14)
    at Module._compile (module.js:446:26)
    at Object..js (module.js:464:10)
    at Module.load (module.js:353:31)
    at Function._load (module.js:311:12)
    at Array.0 (module.js:484:10) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-29T15:36:56.003

考虑改用这个库的分支：

[https://github.com/chrisdew/protobuf/](https://github.com/chrisdew/protobuf/)

它似乎得到了更积极的维护并且有更好的文档。安装它是 npm 是微不足道的，做一个`require('protobuf')`对我来说很好。

对于 Ubuntu，我需要安装以下内容以使用 npm 安装软件包并编译 proto 文件：

`sudo apt-get install libprotobuf-dev protobuf-compiler`

看起来您已经有了这些，但手动安装了它们。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-09-05T13:15:25.603

这是我为[https://github.com/chrisdew/protobuf/issues/29](https://github.com/chrisdew/protobuf/issues/29)做的一个例子——大多数用户不需要复杂的字节字段。

自助测试.proto

```
package com.chrisdew.buftest;

message BufTest {
  optional float num  = 1;
  optional bytes payload = 2;
} 
```

自助测试.js

```
var fs = require('fs');
var Schema = require('protobuf').Schema;

// "schema" contains all message types defined in buftest.proto|desc.
var schema = new Schema(fs.readFileSync('buftest.desc'));

// The "BufTest" message.
var BufTest = schema['com.chrisdew.buftest.BufTest'];

var ob = { num: 42 };
ob.payload = new Buffer("Hello World");

var proto = BufTest.serialize(ob);
console.log('proto.length:', proto.length);

var outOb = BufTest.parse(proto);
console.log('unserialised:', JSON.stringify(outOb));

var payload = new Buffer(outOb.payload);
console.log(payload); 
```

Makefile：（第二行以 TAB 开头，而不是空格）

```
all:
    protoc --descriptor_set_out=buftest.desc --include_imports buftest.proto 
```

输出：

```
$ node buftest.js 
proto.length: 18
unserialised: {"num":42,"payload":{"0":72,"1":101,"2":108,"3":108,"4":111,"5":32,"6":87,"7":111,"8":114,"9":108,"10":100,"length":11}}

payload: <Buffer 48 65 6c 6c 6f 20 57 6f 72 6c 64> 
```

# dynamic - Sencha touch 中的搜索栏

> ID：10731459
> 
> 赞同：0
> 
> 时间：2012-05-24T05:06:47.237
> 
> 标签：dynamic, sencha-touch, store

我正在尝试在 sencha touch 1.1 中向我的表单添加一个搜索字段，但是在浏览了 sencha touch 提供的示例之后，我找不到为搜索字段提供动态存储的方法。我有一个可以动态获取数据的商店。商店包含地点列表，当用户输入地点的第一个字母时，应该给他一个从那个字母开始的地点列表这是我使用的代码。

```
var searchField = new Ext.form.Search({
        name : 'search',
        placeHolder: 'Search',
        useClearIcon: true,
        data:siteStore,
        autoComplete:true,

    });

inputDataForm = Ext.extend(Ext.Panel, {
    scroll: 'vertical',
    autoDestroy: true,
    layout: 'fit',
    id:'inputForm',

   initComponent: function() {

    this.items = [{
                    xtype: 'form',
                    cls: 'formClass',
                    id:'inputImageForm',                        
                    bodyPadding: '0',
                    scroll: 'vertical',

                    items: [searchField],
                  }];       

    inputDataForm.superclass.initComponent.call(this);  

   }, // End fo initComponent   

}); 
```

有人可以帮忙吗？谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-28T07:35:27.440

这是我的代码。它工作正常，我已将搜索字段停靠在面板中。
你可以使用它，我相信它可以工作。

```
,   dockedItems: [{
                xtype:'searchfield'
            ,   name: "searchfield"
            ,   placeHolder: 'Search Patient'
            ,   id: 'searchPat'
            ,   listeners: {
                    keyup: function(me,e){
                        var searchData = me.getValue();
                        Ext.Ajax.request({
                            url:'your data url'
                        ,   params:{
                                filter: searchData
                            }
                        ,   scope: this
                        ,   success: function(res){
                                var rec = Ext.decode(res.responseText);
                                var def = typeof (rec.success);
                                if(def != "undefined" ){
                                    this.store.removeAll();
                                    this.store.loadData(rec.patients);
                                }
                            }
                        ,   failure:function(res){
                                console.log(res);
                            }   
                        })
                    }
                ,   scope: this
                } 
```

# ajax - AJAX 中的 Dispatcher.forward 和 response.flush()

> ID：10731461
> 
> 赞同：1
> 
> 时间：2012-05-24T05:06:51.740
> 
> 标签：ajax

我正在开发一个基于 Java EE 的应用程序，我们在那里大量使用 AJAX。在那里，我们使用两种技术来编写 ajax 响应。

1）通过ajax传递一些数据

```
res.setContentType("text/xml");
res.setHeader("Cache-Control", "no-cache");
PrintWriter writer = null;

writer = res.getWriter();
StringBuffer xmlDoc = new StringBuffer("<?xml version='1.0'?>");

xmlDoc.append("<selectChoice>");
xmlDoc.append("<selectElement>");

writer.print(xmlDoc.toString());
writer.flush();
writer.close(); 
```

2）通过ajax发送完整的jsp片段

首先ajax调用servlet，然后servlet设置一些变量session，然后转发到jsp页面渲染之前存储的变量

```
RequestDispatcher disp = context.getRequestDispatcher(APP_pagePath + page);
disp.forward((HttpServletRequest)req, res); 
```

在第一个标准实践中，我们使用 flush() 方法。然后我的问题是它如何处理第二种情况（dispatcher.forward）。在那里我们没有显式地刷新（）。你们能解释一下这两者之间的区别以及在第二种情况下如何处理冲洗。

# mongodb - 在 mongodb 中更改集合名称

> ID：10731464
> 
> 赞同：11
> 
> 时间：2012-05-24T05:07:11.943
> 
> 标签：mongodb

在mongodb中更改集合的名称可以通过将集合中的文档复制到新的文档并删除原始文档来实现。

但是有没有更简单的方法来更改 mongodb 中的集合名称？

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2012-05-24T05:10:02.193

```
db.oldname.renameCollection("newname") 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-24T05:10:20.773

真的吗？没有谷歌搜索？
[http://www.mongodb.org/display/DOCS/renameCollection+Command](http://www.mongodb.org/display/DOCS/renameCollection+Command)

```
> db.oldname.renameCollection("newname") 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-08-01T11:22:28.790

```
db.oldCollectionName.renameCollection("NewCollectionName") 
```

在此处查看[**手册**](http://docs.mongodb.org/manual/reference/method/db.collection.renameCollection/)。

# javascript - 覆盖默认选项卡式导航

> ID：10731468
> 
> 赞同：0
> 
> 时间：2012-05-24T05:08:00.603
> 
> 标签：javascript, jquery, html, tabs, tabindex

我正在尝试使用 jquery 来覆盖默认的选项卡导航。我不能简单地使用 tabindex 属性，因为我试图让 tab 键从文本输入导航到虚拟化文本框（codemirror）。我一直在尝试使用以下 javascript/jquery 无济于事：

```
$('#modelName').focus(function() { 
    $(this).keydown( function(event) {
        if(event.keyCode=='9') {
            codeMirror.focus();
        }
    });
}); 
```

关于如何使这项工作的任何想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-24T05:11:44.003

```
 $('#modelName').keydown( function(event) {
    if(event.keyCode == 9) {
        event.preventDefault();
        codeMirror.focus();
    }else{
        alert("Not the right key! " + event.keyCode);   
    }
  }); 
```

有一个捕捉是很好的，这样你就可以看到你哪里出错了。在这种情况下，我认为它是字符串与整数。

`keydown`此外，按照您的代码的方式，每次获得焦点时您都将应用一个新的事件处理程序`#modelName`，而不会删除旧的事件处理程序。以后可能会出问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-24T05:15:36.653

试试这个

```
$('#modelName').keyup(function (e) {
    if(e.keyCode== 9){
    codeMirror.focus();
    }
}); 
```

使用 keyup() 而不是 keydown()

# c# - 如何将不同类型的图像存储到数据库中

> ID：10731475
> 
> 赞同：-5
> 
> 时间：2012-05-24T05:08:47.963
> 
> 标签：c#, sql, image-processing, opencv

将彩色图像转换为黑白后，我想检测图像的形状是我如何将不同类型的形状存储到数据库中

由于图像无法存储到数据库中，如何将每个检测到的形状存储在数据库中，以及如何将图像数据存储到数据库中

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-24T06:56:35.530

保存图片到数据库不是很困难，可以很容易地用谷歌搜索

这个解决方案非常适合我（对于 mysql db 和 png 图像）：

```
MySQLConnection sqlcon;

void savePic(Image pic)
{
  using (MemoryStream ms = new MemoryStream())
  {
    pic.Save(ms, System.Drawing.Imaging.ImageFormat.Png);
    using (MySqlDataAdapter a = new MySqlDataAdapter())
    {
      a.InsertCommand = new MySqlCommand("insert into images(picture) values (@pic)", sqlcon);
      a.InsertCommand.Parameters.Add(new MySqlParameter("@pic", (object)ms.ToArray()));
      a.InsertCommand.ExecuteNonQuery();
    }
  }
} 
```

`picture`db 中的列是类型`longblob`

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2012-05-24T05:37:50.307

您需要通过位图表示图像。您可以在以下位置查看位图

[http://en.wikipedia.org/wiki/Bitmap](http://en.wikipedia.org/wiki/Bitmap)

# java - Android：刷新图像切换器内容基于radioButton选择

> ID：10731477
> 
> 赞同：0
> 
> 时间：2012-05-24T05:09:11.267
> 
> 标签：java, android

我的应用程序打算根据两个选定的单选按钮之一选择图像切换器内容。单击单选按钮时，应用程序没有选择所需的选项，最后应用程序崩溃了。

最大的问题是我想根据选中的单选按钮释放保存图像的数组以供切换器使用。

此外，还有两个带有图像引用的数组。我想删除画廊内的所有数组并添加一个参考。这是我的代码。

```
public void onCheckedChanged(RadioGroup group, int checkedId) {

    // TODO Auto-generated method stub

    //check which id is selected

    radioCheckedId= checkedId;

    //radio button checked

    switch(radioCheckedId){

        case R.id.radBtnAccident: 
```

//删除所有数组 if (pics.length>0){

```
 for (int arr=0;arr<pics.length;arr++){

                    pics[arr]=null;

                }
            }

            //populates array

            pics = new Integer[]{ R.drawable.a, R.drawable.b, R.drawable.c, R.drawable.d,
                                  R.drawable.e,R.drawable.exit, R.drawable.plan, R.drawable.icon, R.drawable.plan };

            chooseImgArray(pics);

        break;

        case R.id.radBtnOthers:

            //populates other array

            pics = new Integer[]{R.drawable.exit, R.drawable.plan, 
```

R.drawable.icon，R.drawable.plan，R.drawable.c};

```
 chooseImgArray(pics);
        break;

    default:

    break;

    }

}

public void chooseImgArray(final Integer[] array){

    iSwitcher = (ImageSwitcher) findViewById(R.id.ImgSwith);

    iSwitcher.setFactory(this);
    iSwitcher.setInAnimation(AnimationUtils.loadAnimation(this,android.R.anim.fade_in));
    iSwitcher.setOutAnimation(AnimationUtils.loadAnimation(this,android.R.anim.fade_out));

    gallery = (Gallery) findViewById(R.id.galImage);

    gallery.setAdapter(new ImageAdapter(this));

    gallery.setOnItemClickListener(new OnItemClickListener() {

        public void onItemClick(AdapterView<?> arg0, View arg1, int count,long arg3) {
            iSwitcher.setImageResource(array[count]);

        }

    });

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-24T06:04:02.043

```
我将 ImageSwitcher 的示例代码与 Gallery Check 放在了一起。
它对你有用。

```

```
public class TestActivity extends Activity implements ViewFactory,
        OnItemSelectedListener {

    private Gallery gallery;
    private ImageSwitcher iSwitcher;
    private RadioGroup rdgSelection;
    private Boolean flag = true;

    private Integer[] Array1 = { R.drawable.arrow, R.drawable.arrow1,
            R.drawable.arrow2, R.drawable.arrow3 };
    private Integer[] Array2 = { R.drawable.camera, R.drawable.camera1,
            R.drawable.camera2, R.drawable.camera3 };

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);
        gallery = (Gallery) findViewById(R.id.gallery);
        iSwitcher = (ImageSwitcher) findViewById(R.id.imgSwitcher);
        rdgSelection = (RadioGroup) findViewById(R.id.rdgSelection);

        iSwitcher.setFactory(this);
        rdgSelection.check(rdgSelection.getChildAt(
                rdgSelection.getChildCount() - 1).getId());

        if (rdgSelection.getCheckedRadioButtonId() == R.id.rdb1) {
            flag = true;
            gallery.setAdapter(new ImageAdapter(TestActivity.this));
        } else {
            flag = false;
            gallery.setAdapter(new ImageAdapter(TestActivity.this));
        }
        rdgSelection.setOnCheckedChangeListener(new OnCheckedChangeListener() {

            @Override
            public void onCheckedChanged(RadioGroup group, int checkedId) {
                gallery.setAdapter(new ImageAdapter(TestActivity.this));
                if (rdgSelection.getCheckedRadioButtonId() == R.id.rdb1)
                    flag = true;
                else
                    flag = false;
            }
        });
        gallery.setOnItemSelectedListener(this);

    }

    public class ImageAdapter extends BaseAdapter {
        public ImageAdapter(Context c) {
            mContext = c;
        }

        public int getCount() {
            if (flag)
                return Array1.length;
            else
                return Array2.length;
        }

        public Object getItem(int position) {
            return position;
        }

        public long getItemId(int position) {
            return position;
        }

        public View getView(int position, View convertView, ViewGroup parent) {
            ImageView i = new ImageView(mContext);
            if (flag)
                i.setImageResource(Array1[position]);
            else
                i.setImageResource(Array2[position]);
            i.setAdjustViewBounds(true);
            i.setLayoutParams(new Gallery.LayoutParams(
                    LayoutParams.WRAP_CONTENT, LayoutParams.WRAP_CONTENT));
            return i;
        }

        private Context mContext;

    }

    @Override
    public View makeView() {
        ImageView i = new ImageView(this);
        i.setBackgroundColor(0xFF000000);
        i.setScaleType(ImageView.ScaleType.FIT_CENTER);
        i.setLayoutParams(new ImageSwitcher.LayoutParams(
                LayoutParams.FILL_PARENT, LayoutParams.FILL_PARENT));
        return i;
    }

    @Override
    public void onItemSelected(AdapterView<?> arg0, View v, int position,
            long id) {
        if (flag)
            iSwitcher.setImageResource(Array1[position]);
        else
            iSwitcher.setImageResource(Array2[position]);
    }

    @Override
    public void onNothingSelected(AdapterView<?> arg0) {

    }

} 
```

# c# - 从 App 设置 app.config 文件调用连接字符串到 C# 代码

> ID：10731482
> 
> 赞同：3
> 
> 时间：2012-05-24T05:10:00.900
> 
> 标签：c#, xml, app-config

我正在尝试从 app.config 文件调用连接字符串到 C# 代码。这是 app.config 代码：

```
<?xml version="1.0" encoding="utf-8" ?>
  <configuration>
 <appSettings>

<add key="connectstring" value="Data Source=server111;Initial Catalog=database1;        Integrated Security=False;Persist Security Info=False; User ID=username;Password=password;Encrypt=True; TrustServerCertificate=True; MultipleActiveResultSets=True"/>

 </appSettings>
</configuration> 
```

这是 C# 代码：

```
 private SqlConnection connStudent;  
  connStudent = new SqlConnection(ConfigurationManager.AppSettings["connectstring"].ToString());
  connStudent.Open(); 
```

代码应该是正确的，但是我得到了一个空引用异常，并且在调试程序时， connStudent 始终为空并且没有得到连接字符串。错误是“对象引用未设置为对象的实例”。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-24T05:14:10.787

如果您使用的是 .NET 2.0 或更高版本，请使用以下

```
<connectionStrings>
<add name="myConnectionString" connectionString="server=localhost;database=myDb;uid=myUser;password=myPass;" />
</connectionStrings> 
```

接着

```
string connStr = ConfigurationManager.ConnectionStrings["myConnectionString"].ConnectionString; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-24T05:29:03.670

你的代码很好。检查以确保您的`copy to output directory`属性设置为`copy always`或`copy if newer`。如果这仍然不起作用，请尝试删除临时`obj`文件。

以下测试代码工作正常。

```
<?xml version="1.0" encoding="utf-8" ?>
<configuration>
  <appSettings>
    <add key="connectstring" value="Data Source=server111;Initial Catalog=database1;        Integrated Security=False;Persist Security Info=False; User ID=username;Password=password;Encrypt=True; TrustServerCertificate=True; MultipleActiveResultSets=True"/>
  </appSettings>
</configuration>

using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;
using System.Data.SqlClient;
using System.Configuration;

namespace ConsoleApplication1
{
    class Program
    {
        static void Main(string[] args)
        {
            try
            {
                SqlConnection connStudent;
                connStudent = new SqlConnection(ConfigurationManager.AppSettings["connectstring"].ToString());
                //connStudent.Open();
                //connStudent.Close();
                Console.WriteLine("ok");
            }
            catch
            {
                Console.WriteLine("error");
            }
        }

    }
} 
```

# html - 如何将充满文本字段的 HTML 表的更改保存到数据库

> ID：10731486
> 
> 赞同：-2
> 
> 时间：2012-05-24T05:10:52.063
> 
> 标签：html, database, html-table, save

我有一个充满文本字段的 HTML 表格。我有能力在表中添加新行（我只是使用 JavaScript 函数调用并直接插入它们）。我需要能够将表​​值直接保存到（通过 PHP 的 MYSQL）数据库中。我已将数据库全部连接起来，但我有一个关于将更改保存到我的表的问题。

我怎样才能知道潜在的几十个字段中的哪些字段是“脏”的？我认为当我需要保存 HTML 表中的所有数据并将其插入数据库时​​，最简单的方法就是清除数据库。这是可以接受的方法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-24T05:23:39.690

一般来说，最好清除所有相关记录并重新添加它们。它节省了很多麻烦，但请确保您保存的表包含所有相关数据。如果您有通常不可编辑的状态数据（例如 creationDate，您应该确保它可以重新保存。

您还应该将整个过程包装在事务中，以便在保存新数据因任何原因失败时可以回滚任何删除。

# c# - 如何在 c#.net 中创建队列？

> ID：10731488
> 
> 赞同：-2
> 
> 时间：2012-05-24T05:10:59.120
> 
> 标签：c#, .net

我真正想写的程序是：有不同的数据来自一个服务器，我们必须将这些数据发送到另一个服务器，在这些数据中我们必须过滤数据，从我们这边进行一些内部计算然后我们必须发送，因为我的想法是创建一个队列，数据可以在其中驻留固定时间..我们将进行内部计算并发送，届时其他即将到来的数据将驻留在另一个队列中..第一个队列执行完毕后，我们可以对另一个队列进行内部计算，但不知道如何在c#.net中实现队列？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-24T05:15:48.137

你看过：

*   [队列](http://msdn.microsoft.com/en-us/library/7977ey2c.aspx)
*   [并发队列](http://msdn.microsoft.com/en-us/library/dd267265.aspx)
*   [阻塞集合](http://msdn.microsoft.com/en-us/library/dd267312.aspx)

上课？

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-24T05:17:29.553

如果你想要一个跨机器分布的队列，你可以使用 Microsoft 消息队列 (MSMQ) 甚至更好的总线架构（[NServiceBus](http://nservicebus.com)、[Rhino Service Bus](http://ayende.com/blog/3752/rhino-service-bus)、[MassTransit](http://code.google.com/p/masstransit/)）来进行这种分布式处理。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-24T05:16:47.370

有很多选择

[.NET 队列类](http://msdn.microsoft.com/en-us/library/7977ey2c.aspx)

[.NET 4.0 中的阻塞收集](http://msdn.microsoft.com/en-us/library/dd267312.aspx)

[阻塞队列](http://msdn.microsoft.com/en-us/magazine/cc163427.aspx#S4)by joe duffy

Joe Albahari 的[生产者消费者队列](http://www.albahari.com/threading/part4.aspx#_Wait_Pulse_Producer_Consumer_Queue)

# c# - linq to sql 排序问题

> ID：10731492
> 
> 赞同：0
> 
> 时间：2012-05-24T05:11:23.440
> 
> 标签：c#, linq-to-sql, compiler-construction, sql-order-by

我目前有一个 IQueryable，它由多个 linq 查询的 concats 组成，我们称之为 baseQuery。我想调用 skip 并接受这个 baseQuery 对象，但编译器通知我必须先调用 OrderBy。基本上，我的 baseQuery 对象中的顺序已经正确，我想要的所有内容的顺序都是我已经调用 concat 的顺序。那么我如何告诉编译器它已经按照我想要的顺序？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-24T05:14:46.077

除非您使用 ORDER BY 指定您想要的顺序，否则您不能保证 LINQ 会以某种顺序返回它。它受 DBMS 选择的数据访问方法和连接类型等因素的影响。在某些情况下，该顺序可能是您想要的，但如果不使用 ORDER BY 明确指定它，您不能保证它总是以正确的顺序返回。

# java - 带有 IZpack 的 Java swing 应用程序安装程序

> ID：10731493
> 
> 赞同：2
> 
> 时间：2012-05-24T05:11:26.540
> 
> 标签：java, swing, izpack

我正在使用 IZpack 为基于 JAVA Swing 的应用程序开发自定义安装程序。这个 Java 应用程序使用第 3 方外部 DLL。属性文件中提到了 DLL 的路径。通过读取这个属性文件，DLL 被加载到应用程序中 system.load () 功能。现在我正在使用 IZ pack 安装程序为我的应用程序创建安装程序。此安装程序将所有 DLL 转储到用户选择的安装目录中。现在我必须将属性文件中硬编码的 DLL 路径移动到安装目录。在这方面我需要帮助。谢谢， SK

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-24T08:13:17.380

这可以通过在属性文件中使用 IzPack 变量来实现，并将这些文件作为可解析的文件包含到其中一个包中。

例如，假设有`application.properties`一行文件`dll.path=${localSettingsDir}${FILE_SEPARATOR}dlls`，其中`${localSettingsDir}`应该是 install.xml 中声明的变量。这可以通过以下方式完成：

```
<dynamicvariables>
    <variable name="localSettingsDir" value="$localSettingsDirUi" />
</dynamicvariables> 
```

这`$localSettingsDirUi`是为自定义面板上的字段指定的变量。这样，如果相应的字段发生更改，则变量`$localSettingsDirUi`会更改并且变量`localSettingsDir`也会动态更新。

然后在 install.xml 中的一个包中，您需要放置如下内容：

```
<packs>
  <pack name="Your Pack" required="yes">
     ...
     <file src="application.properties" targetdir="$INSTALL_PATH" />
     <parsable targetfile="$INSTALL_PATH/application.properties" type="javaprop"/>
     ...
  </pack>
  ...
</packs> 
```

应该是这样的。

# image - 我想在 MFC CDialog 对话框中动态显示 2 个图像。有人可以给我一个提示吗？

> ID：10731494
> 
> 赞同：0
> 
> 时间：2012-05-24T05:11:27.820
> 
> 标签：image, mfc, cdialog

我可以通过打开 2 个对话框来显示 2 个图像，但我想在同一个对话框中显示它们。图片会不断变化

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-24T07:56:39.290

一种简单的方法如下：

*   将图像作为位图资源添加到项目中；
*   根据需要为每个位图、位置和大小添加图片控件到对话框；
*   将图片控件的图像属性设置为指向位图资源。

如果这种方式过于静态或不是您想要的方式，那么您需要更新您的问题以更具体。

# c# - 使用 RabbitMQ 的 MassTransit - RecieveFrom 的地址

> ID：10731495
> 
> 赞同：4
> 
> 时间：2012-05-24T05:11:35.697
> 
> 标签：c#, rabbitmq, esb, masstransit

我们在测试环境中配置了一个主动/主动的 RabbitMQ 集群。

我们使用 MassTransit 指定 ReceiveFrom("rabbitmq://cluster_machine_a/some_queue?ha=true") 进行连接。

显然，这是利用特定的集群节点，因此不提供故障转移。

向 MassTransit 通知集群节点以便发生故障转移的正确方法是什么？

RabbitMQ 文档表明客户端应该使用传统的负载均衡器来收集流量，但是这适用于 RabbitMQ 吗？（最后一节 - [http://www.rabbitmq.com/clustering.html](http://www.rabbitmq.com/clustering.html)）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-24T01:07:20.670

为了回答我自己的问题，MassTransit 中没有故障转移 a-la SQL 服务器连接字符串与故障转移合作伙伴的概念。

相反，您只需在 RMQ 前面引入一个负载均衡器，并接受当您为其编码恢复的节点出现故障时您将收到错误。当然，您需要将 RMQ 节点连接在一起，这可以通过它的内置集群来实现。

最后，从负载均衡器引入的虚拟 ip 接收并让它负责检测失败的 RMQ 节点。

# javascript - jQuery - IE7 - 变量未定义（适用于 Chrome、Safari、Firefox）

> ID：10731497
> 
> 赞同：1
> 
> 时间：2012-05-24T05:11:49.680
> 
> 标签：javascript, jquery, internet-explorer

我正在开发一个网站，正处于一个美妙的阶段，在 Chrome、Safari、Firefox（Windows 和 Mac 版）中一切正常，然后你需要额外花 24 小时为 IE 修复它。

我已经与它搏斗了很长时间，但最后发生的事情是一个变量在 IE7 中总是“未定义”。

它来自一个名为 .html5 的数据属性`data-title`。

我环顾四周，也尝试了[这个](https://stackoverflow.com/questions/2412947/do-html5-custom-data-attributes-work-in-ie-6)和[这个](https://stackoverflow.com/questions/7361356/how-to-get-data-attribute-in-ie-7)stackoverflow 问题中提供的解决方案。

因此，我尝试过

```
$(this).attr('data-title'); 
```

和

```
$(this).data('title'); 
```

以及关于最后一个解决方案

```
var newTitle = $(this).getAttribute("data-title"); 
```

我收到一个错误：

> 未捕获的类型错误：对象 [object Object] 没有方法“getAttribute”

问题是，我无法使用 getElementById 加载变量，因为元素是由[jQuery Maximage生成的](https://blog.aaronvanderzwan.com/2012/07/maximage-2-0/)

生成的元素如下所示：

> `<div class="mc-image collection-image" title="" style="background-image: url(http://www.server.com/image.jpg); position: absolute; top: 0px; left: 0px; z-index: 12; opacity: 1; display: block; width: 1292px; height: 670px; " data-title="The&nbsp;Title" data-href="#collection-description-172"></div>`

当 maximage/jQuery 循环更改图像时，我正在使用该`data-title`属性将文本设置在侧面的另一个 div 中。

我完全不知所措。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-24T05:16:23.253

> 未捕获的类型错误：对象 [object Object] 没有方法“getAttribute”

因为`$(this)`是一个 jQuery 对象并且`getAttribute()`需要一个 DOM 元素。尝试一下`this`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-09-17T10:54:30.730

我遇到了类似的问题，将数据属性设置为一个按钮，然后他们在 JQuery 上检索它。我不断收到“未捕获的类型错误：对象 [对象对象] 没有方法 'getAttribute'”

我用以下方法解决了这个问题：

[http://www.rqna.net/qna/kvtryn-jquery-ie7-variable-is-undefined-works-in-chrome-safari-firefox.html](http://www.rqna.net/qna/kvtryn-jquery-ie7-variable-is-undefined-works-in-chrome-safari-firefox.html)

当有：

```
<input type="button" class="btn" data-passengerMode="@item.PassengerMode"/> 
```

这对我有用：

```
$('#btn_0').get(0).getAttribute('data-passengerMode') 
```

或这个

```
$('#btn_0')[0].getAttribute('data-passengerMode') 
```

都是因为我不想使用 html 方法：

```
document.getElementById('btn_0') 
```

如果您可以尝试动态加载，希望对您有所帮助。

# oracle - Oracle for 循环查询

> ID：10731500
> 
> 赞同：0
> 
> 时间：2012-05-24T05:12:01.303
> 
> 标签：oracle, plsql

如何在 Oracle PL/SQL 中执行以下操作：

```
BEGIN
  FOR id IN ( 10,200,30,43,5444,6 ) 
    LOOP
        process_the_record ( id );
END LOOP;
END; 
```

因为这似乎对我不起作用。

我基本上需要遍历这些数字中的每一个并将每个数字传递到过程 process_the_record (id) 中。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-24T05:22:08.930

你可以使用一个集合——你只需要调用`process_the_record`而不是`dbms_output.put_line`

```
SQL> declare
  2    type num_arr is table of number;
  3    l_ids num_arr := num_arr( 10, 200, 30, 32, 5444, 6 );
  4  begin
  5    for i in 1 .. l_ids.count
  6    loop
  7      dbms_output.put_line( l_ids(i) );
  8    end loop;
  9  end;
 10  /
10
200
30
32
5444
6 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-24T05:19:08.267

[请参阅此处](http://www.adp-gmbh.ch/ora/plsql/coll/iterate.html)的可变数组条目。这些数字会改变吗？似乎这是一种尴尬的做事方式。

# javascript - 使用jQuery获取表格的最后一行？

> ID：10731501
> 
> 赞同：60
> 
> 时间：2012-05-24T05:12:03.810
> 
> 标签：javascript, jquery

我正在动态创建表行。所以每次我添加一行时，我都需要获取最后一行的 ID，`<tr>`这样我就可以`<tr>`用`ID = "(the last row's ID) + 1"`. 有没有办法使用jQuery获取最后一行的ID？

* * *

## 回答 #1

> 赞同：128
> 
> 时间：2012-05-24T05:13:13.730

```
$('#yourtableid tr:last').attr('id'); 
```

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2012-05-24T05:13:34.110

```
var id = $('table tr:last').attr('id'); 
```

* * *

## 回答 #3

> 赞同：13
> 
> 时间：2015-09-28T19:21:27.820

老问题，但这是使用 JQuery 遍历的另一种方式，它更快一点：

```
$("#TableId").find("tr").last(); 
```

如果它们都是连续的，则标识行的另一种方法是获取行数 + 1。

```
$("#TableId").find("tr").length + 1 
```

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2019-10-09T07:25:10.937

## 2019

自 jQuery 3.4.0 起`:last`已弃用，请改用 .last() ，如下所示：

```
var id = $('#mytable tr').last().attr('id'); 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2014-12-12T05:12:11.653

```
var tid=$('#tableid tr:last').attr('id');
alert(tid); 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2015-10-23T07:17:19.920

有两种方法，它们都`$('#tableid tr:last')`有效`$('#tableid tr').last()`

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2014-12-12T05:09:53.477

表的最后一行 id

```
var lastid = $('table tr:last').attr('id');
var str = lastid .replace(/[^0-9]+/ig,""); 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2016-01-30T16:27:23.800

你不需要为此使用 jQuery。您可以在 CSS 计数器中处理它。计数器自动增加索引值，并且它还处理数字的重新排列，以防从中间删除一行。CSS 计数器可以按如下方式实现。将其插入到处理 HTML 表格样式的 CSS 文件中。

```
 #yourtableid tbody 
    {
      counter-reset: tablerow;
    }
  #yourtableid tbody .yourHTMLcellclass::before 
    {
  counter-increment: tablerow;
  content: counter(tablerow)". ";
    } 
```

# javascript - 取消无限滚动获取

> ID：10731507
> 
> 赞同：0
> 
> 时间：2012-05-24T05:13:18.590
> 
> 标签：javascript, infinite-scroll

我正在使用[无限滚动](http://infinite-scroll.com)来获取新元素并扩展我的页面。当用户应用过滤器时，我想取消任何正在进行的提取。否则它们将加载到页面上并且与当前过滤器不匹配。

有没有办法做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-25T06:19:48.993

这就是我最终解决它的方式。

设置一个全局变量`midFilter`，并通过无限滚动回调函数删除所有返回的项目。

```
$('#item-grid').infinitescroll(settings, function (arrayOfNewElems) {

  if (midFilter) {
    $(arrayOfNewElems).each(function () {
      $(this).remove();
    });
  }

}); 
```

# android - 如何在android中显示警报对话框？

> ID：10731508
> 
> 赞同：0
> 
> 时间：2012-05-24T05:13:23.217
> 
> 标签：android, android-ui, android-alertdialog

我想显示一个`AlertDialog`项目列表。该列表应该是二维的。按下 a 按钮时，应显示对话框。那么我该怎么做呢？是否需要为警报对话框单独创建一个 xml 文件，还是应该将对话框包含在 java 代码本身中？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-24T05:27:38.427

要创建警报对话框，

```
public void Alert(String text, String title)
    { 
        AlertDialog dialog=new AlertDialog.Builder(context).create();
        dialog.setTitle(title);
        dialog.setMessage(text);
        if(!title.equals("") && !text.equals(""))
        {
            dialog.setButton("OK",
                    new DialogInterface.OnClickListener()
                    {
                        public void onClick(DialogInterface dialog, int whichButton)
                        {
                           //
                        }
                    });
            dialog.setButton2("Cancel",
                    new DialogInterface.OnClickListener()
                    {
                        public void onClick(DialogInterface dialog, int whichButton)
                        {
                           //
                        }
                    });
        }

        dialog.show();

    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-24T06:08:05.320

为什么不创建一个以对话框为主题的活动并弹出它而不是对话框？

如果你坚持创建一个对话框。这是一段您可以尝试的代码。

```
//Class Level Variables:
CharSequence[] items = { "Google", "Apple", "Microsoft" };
boolean[] itemsChecked = new boolean [items.length];

//Call this when you want a dialog
showdialog(0);

//override onCreateDialog
@Override
protected Dialog onCreateDialog(int id) { 
    switch (id) {
    case 0:         
        return new AlertDialog.Builder(this)
        .setIcon(R.drawable.icon)
        .setTitle("This is a dialog with some simple text...")
        .setPositiveButton("OK", new 
            DialogInterface.OnClickListener() {
            public void onClick(DialogInterface dialog, 
            int whichButton) 
            {
                Toast.makeText(getBaseContext(), 
                     "OK clicked!", Toast.LENGTH_SHORT).show();
            }
        })
        .setNegativeButton("Cancel", new 
            DialogInterface.OnClickListener() {
            public void onClick(DialogInterface dialog, 
                int whichButton) 
            {
                Toast.makeText(getBaseContext(), 
                     "Cancel clicked!", Toast.LENGTH_SHORT).show();
            }
        })            
        .setMultiChoiceItems(items, itemsChecked, new 
            DialogInterface.OnMultiChoiceClickListener() {                  
                @Override
                public void onClick(DialogInterface dialog, int which, boolean isChecked) {
                    Toast.makeText(getBaseContext(),
                        items[which] + (isChecked ? " checked!": " unchecked!"), 
                        Toast.LENGTH_SHORT).show();
                }
            }
        )
        .create();
} 
```

这将创建一个具有复选框和名称的 AlertDialog .....

# mysql - 使用同一张表，和属性返回不同类型的人

> ID：10731519
> 
> 赞同：1
> 
> 时间：2012-05-24T05:14:46.663
> 
> 标签：mysql, sql, join

我想创建一个使用下表返回父母及其监护人的查询。我的问题是如何使用 person 表中的 name 属性两次来返回看护者的姓名和父母的姓名。任何示例代码将不胜感激。我知道我没有很好地解释它，但是如果有人理解我的意思，请随时编辑上面的内容。更具体地说，我只想使用 person 表来存储有关父母及其子女的信息，并使用显示每个相关人员的姓名。我怎样才能用一张桌子做到这一点。

![在此处输入图像描述](../Images/7c166581a7383e6e030fc5c2785321e6.png)

使用提供的一些建议，我能够创建查询，但由于我的表有问题，它不起作用。我正在使用下表：

```
CREATE TABLE Person
(
personID INT NOT NULL,
name VARCHAR(50),
address VARCHAR(70),
phone VARCHAR(15),
email VARCHAR(30),
year INT,
PRIMARY KEY (personID)
);

CREATE TABLE Guardian
(
parentID INT NOT NULL,
childID INT NOT NULL,
PRIMARY KEY (parentID, childID)
FOREIGN KEY (parentID) REFERENCES (personID),
FOREIGN KEY (childID) REFERENCES (personID)
); 
```

我应该在哪里使用什么语句才能使其正常工作。我认为问题在于两个外键语句都引用了 person 表中的同一个键。在查找父项和子项时如何引用相同的属性而不会出现任何错误。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-24T05:17:49.770

您可以与一个表连接两次，但您必须使用不同的表别名。

尝试这个：

```
SELECT
    Child.name,
    Parent.name
FROM Person AS Child
JOIN Guardian
ON Child.personID = Guardian.child
JOIN Person AS Parent
ON Parent.personID = Guardian.parent 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-24T12:20:12.093

我不明白你在找什么，无论如何试试这个：

> **select p.name,p.name from person p where p.personid in (select distinct parentid from Guardian)**

# ant - 如何使用 ant 删除 clearcase 文件

> ID：10731521
> 
> 赞同：1
> 
> 时间：2012-05-24T05:15:04.437
> 
> 标签：ant, clearcase

我正在编写一个 ant 构建脚本来执行几个 clearcase 命令。是否有删除 clearcase 文件（ct rm）的 ant 任务？我看到有一个 ccrmtype 任务，这个可以用来删除文件吗？

谢谢， 阿尔西

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-24T06:00:35.790

The list of tasks mentioned at "[Accelerate and automate the build process with IBM Rational ClearCase and Ant](http://www.ibm.com/developerworks/rational/tutorials/rantclearcase/section3.html)" and at "[Apache Ant ClearCase Tasks](http://ant.apache.org/manual/Tasks/clearcase.html)" doesn't include [`cleartool rmname`](http://publib.boulder.ibm.com/infocenter/cchelp/v7r0m0/index.jsp?topic=/com.ibm.rational.clearcase.cc_ref.doc/topics/ct_rmname.htm).

`rmtype` is about removing the *type* (branch or label type for instance), not an *element* (directory or file)

Howevever, looking at the source of [`CCMkelem.java`](http://www.koders.com/java/fid89A246DF1D2CFC58DC65C05908590DD41367A5D0.aspx?s=mcall%3asplit), it wouldn't be hard to implement a `CCRMname`.
It actually exists: **[`CCRmname.java`](http://www.koders.com/java/fid5A2746843AC8CAD3B8020AAE9354AC9D60C57762.aspx?s=mcall%3asplit)**.
So if it isn't present in the latest Ant, take that source, compile it and add it to your ant library.

# php - 多个 fopen 使用同一个文件并同时 fwrite 同一个文件 PHP？

> ID：10731522
> 
> 赞同：0
> 
> 时间：2012-05-24T05:15:10.843
> 
> 标签：php, file

我有一个脚本，我在浏览器的 3 个不同选项卡中每 1 秒刷新一次，该脚本打开一个文件，读取它，然后写回它。

有没有办法让这个问题的数据保持一致，或者 php 自己处理它？

如果选项卡 a 打开它、编辑它，以及在写入选项卡 b 打开并提取陈旧数据时会发生什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-24T05:18:11.470

使用[flock](http://at2.php.net/manual/en/function.flock.php)处理并发

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-24T05:20:31.957

您可以使用不同的实例同时打开文件。

当你写文件时，两者都会按照它的时间顺序进行操作和操作。

如果要将数据记录到文件中，只需将当前实例的信息与日志数据一起放入即可。

如果文件已经打开，则不需要执行任何操作，请创建一个标志来检查。或者使用PHP 提供的**flock选项。**该标志可以存储在数据库中或作为文件。操作完成时移除标志。在开始操作之前，请检查标志状态。

# java - 在java中将日期转换为字符串并返回日期

> ID：10731523
> 
> 赞同：2
> 
> 时间：2012-05-24T05:15:17.290
> 
> 标签：java, parsing, datetime, date, simpledateformat

在我的程序中，我试图将日期转换为指定格式的字符串，然后返回日期。我需要日期为 dd-MMM-yy 格式。所以，我使用 SimpleDateFormat 将日期转换为 dd-MMM-yy 格式，例如，

```
SimpleDateFormat sdf = new SimpleDateFormat("dd-MMM-yy");
String bookingDate = sdf.format(myDate); 
```

结果是我所期望的，即 12 年 5 月 23 日，但是当我使用 parse() 将字符串转换回日期时，它会更改为 IST 2012 年 5 月 23 日星期三 13:16:14。

有没有办法在不改变格式的情况下将字符串转换回日期？我严格需要将指定格式的日期对象传递给查询。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-24T05:18:51.237

> 当我使用 parse() 将字符串转换回日期时，它正在更改为 Wed May 23 13:16:14 IST 2012。

这不是真的，它会`Date`正确转换回，当您尝试打印 Date 实例时，它会调用 toString() 方法并且它具有固定的格式化输出，因此如果您想要格式化的日期，您需要使用`format()`方法

简而言之 parse 方法将其解析`String`为`Date`没有保存格式的属性，因此*无论如何*`Date`您都需要使用`format()`方法

 ** * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-24T05:41:50.870

您如何在查询中传递日期对象，如果您只是在查询字符串中附加日期，为什么需要将字符串日期转换回日期对象？如果您使用准备好的语句，那么您不必担心格式。并且如上所述 Date 对象不包含任何格式信息

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-24T06:49:28.487

如果您严格需要传递日期对象，那么不必担心它的格式，因为日期对象对其格式有了解，无论是 Java、任何 Java 框架还是 SQL..

如果您直接在 sql 查询（连接）中传递日期，那么您可以以您在 DB 中看到的相同格式传递日期字符串，它将正确处理。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-29T10:59:52.277

您可以使用`DateFormat.getDateInstance(DateFormat.SHORT, <locale>).parse(myDate);`.

但是，您将拥有像 dd/MM/yy 这样的标准格式的日期，而不是自定义的。模板取决于您使用的[区域设置。](http://docs.oracle.com/javase/6/docs/api/java/util/Locale.html)

[您可以尝试使用标准 Java 库或通过ThreeTen/JSR-310](http://sourceforge.net/apps/mediawiki/threeten/index.php?title=Main_Page)构建自己的模式

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-10-11T02:08:39.837

我们现在有一种更现代的方式来完成这项工作。

# java.time

java.time框架与 Java 8 及更高版本捆绑在一起[。](http://docs.oracle.com/javase/8/docs/api/java/time/package-summary.html)请参阅[教程](http://docs.oracle.com/javase/tutorial/datetime/TOC.html)。这些新类受到[JSR 310](http://jcp.org/en/jsr/detail?id=310)定义的[Joda-Time的启发，并由](http://www.joda.org/joda-time/)[ThreeTen-Extra](http://www.threeten.org/threeten-extra/)项目扩展。它们是对令人困惑的旧类 java.util.Date/.Calendar 等的巨大改进。

## 仅日期类

新框架提供了一个类 ,[`LocalDate`](http://docs.oracle.com/javase/8/docs/api/java/time/LocalDate.html)来表示没有任何时间或时区的仅日期。

顺便说一句，使用两位数表示年份是自找麻烦。我强烈建议尽可能使用四位数年份。java.time 框架假定任何两位数的年份都在`20xx`世纪中，包括 2000 年到 2099 年。

要解析字符串，请指定预期的格式。您没有使用任何标准的[ISO 8601](https://en.wikipedia.org/wiki/ISO_8601)格式，因此我们必须定义格式模式。指定一个区域设置，其中包括我们希望为月份名称找到的语言。

```
// Parse String representation.
String input = "23-May-12";
DateTimeFormatter formatter = DateTimeFormatter.ofPattern ( "d-MMMM-yy" , Locale.ENGLISH );  // Using four "M" characters means we expect the full name of the month.
LocalDate localDate = formatter.parse ( input , LocalDate :: from ); 
```

反过来，要生成日期值的字符串表示，我们可以回收相同的格式化程序。

```
 // Generate String representation.
    String output = localDate.format ( formatter ); 
```

转储到控制台。

```
 System.out.println ( "input: " + input + " → localDate : " + localDate );
    System.out.println ( "localDate : " + localDate + " → output: " + output ); 
```

跑的时候。

> 输入：23-May-12 → localDate : 2012-05-23
> 
> localDate : 2012-05-23 → 输出: 23-May-12*

# android - 无法从微调器中获取字符串

> ID：10731530
> 
> 赞同：-1
> 
> 时间：2012-05-24T05:15:49.493
> 
> 标签：android, android-spinner

我有一个有 5 个文本字符串的微调器。我想从微调器中得到一个字符串，但我只得到第一个字符串（我无法得到第二个，第三个......）。

我使用这种语法（如下）但仍然失败：

```
 Spinner spinner = (Spinner) findViewById(R.id.spinnerItem);
  ArrayAdapter<CharSequence> adapter = ArrayAdapter.createFromResource(
          this, R.array.SpinnerArray, android.R.layout.simple_spinner_item);
  adapter.setDropDownViewResource(android.R.layout.simple_spinner_dropdown_item);
  spinner.setAdapter(adapter);

  String SpinnerText = myspinner.getSelectedItem().toString(); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-24T05:31:04.727

通过使用 onItemSelectedLIsener() 方法，您可以将每个微调器值转换为字符串。

主.java

```
 spinner.setOnItemSelectedListener(new OnItemSelectedListener() {
    @Override
      public void onItemSelected(AdapterView<?> arg0, View arg1,
      int arg2, long arg3) {
      // TODO Auto-generated method stub
          String selection=spinner.getSelectedItem().toString();
       Toast.makeText(getApplicationContext(), "Selected" + selection, 30).show();
         } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-24T05:31:59.080

要首先从微调器中获取所选项目，您需要使用微调器设置监听器

```
spinner.setOnItemSelectedListener(this); 
```

你需要实现接口 OnItemSelectedListener 并最终覆盖方法

```
public void onItemSelected(AdapterView<?> parent, View v, int position, long id) {
selection.setText(items[position]);
}
public void onNothingSelected(AdapterView<?> parent) {
selection.setText("");
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-24T05:23:30.487

在微调器的 onclick 侦听器中尝试此代码使用此代码获取所选项目的字符串

```
 String s = spinneradapter.getItemAtPosition(Integer.parseInt(position)); 
```

希望这有帮助

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-24T05:24:40.193

用这个 ：

```
String mySpinner = spinner.getItemAtPosition(spinner.getSelectedItemPosition()).toString(); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-24T05:24:44.330

```
spinner.getItemAtPosition(0).toString()//First string
spinner.getItemAtPosition(1).toString()//second string
spinner.getItemAtPosition(2).toString()//third string 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-05-24T05:25:39.103

请参阅下面的代码，它可能会对您有所帮助。

```
 spin_search.setOnItemSelectedListener(new OnItemSelectedListener() {

                public void onItemSelected(AdapterView<?> arg0, View arg1, int id,
                        long arg3) {
                Toast.makeText(Sms_logs.this, "you select : " + adapter.getItem(id), 2000).show();
    }

    public void onNothingSelected(AdapterView<?> arg0) {
                    // TODO Auto-generated method stub

                }
            }); 
```

# c# - 程序在 Linux 上无法正常关闭

> ID：10731532
> 
> 赞同：0
> 
> 时间：2012-05-24T05:16:18.103
> 
> 标签：c#, linux, mono, rhel

我在 C# 上编写了一个应用程序，并使用 Mono 和 mkbundle 将其移植到 Linux 服务器 (RHEL) 上。它工作正常，但由于某种原因程序没有正常关闭。现在有超过 30 个程序实例在后台运行（根据任务管理器），尽管程序没有返回任何错误，并且当它在 Windows 甚至 Ubuntu VM 上运行时，它运行正常并且没有问题地关闭. 可能是什么原因？如何确保程序在执行完成后完全停止？

# oracle - 在 Oracle 11g 中更改 XMLType 列的存储选项

> ID：10731535
> 
> 赞同：1
> 
> 时间：2012-05-24T05:16:41.550
> 
> 标签：oracle, xmltype

我在我的一些 oracle 数据库表中使用 XMLType 列。早期（在 11.2.0.2 中）考虑的默认存储类型是 CLOB。因此，如果您对 XMLType 列发出查询，我可以将列的内容视为 XML 字符串。但是当我删除并重新创建所有表并插入一些数据时，我无法获得 XMLType 列的内容。它在 cloumn 值中简单地显示 XMLType。我怀疑存储类型是否在 BINARY XML 中被更改？所以我发出以下更改语句：

```
ALTER TABLE "MYSCHEMA"."SYSTEMPROP"
   MODIFY ("XMLCOL")
     XMLTYPE COLUMN "XMLCOL" STORE AS CLOB; 
```

请注意，表中已经存在一些数据。删除并插入一行后的事件，内容显示为 XMLType。我正在使用 SQL 开发人员 UI 工具。有人可以提出解决此问题的方法吗？

编辑：

好的，现在我们决定将 XMLType 列内容存储为 SECURE FILE BINARY XML。所以我们有这样的表：

```
CREATE TABLE XMYTYPETEST
(
    ID       NUMBER(8) NOT NULL,
    VID      NUMBER(4) NOT NULL,
    UserName           VARCHAR2(50),
    DateModified       TIMESTAMP(6),
    Details  XMLType
)XMLTYPE COLUMN  Details STORE AS SECUREFILE BINARY XML; 

Insert into XMYTYPETEST values(10001,1,'XXXX',sysdate,'<test><node1>BLOBTest</node1></test>');

Select * from XMYTYPETEST; 
```

XMLType 列在 sql developer 中显示为“SYS.XMLType”。那么如何获取二进制 XML 的内容呢？

![查询结果](../Images/566f745eda74cf86aebfd2b3d942ed56.png)

编辑：

从 XMYTYPETESTx 中选择 x.ID、x.Vid、x.details.getCLOBVal()，其中 x.ID=100000；

上面的查询最终对我有用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-30T11:47:38.833

oracle 数据库中 xmldata的**底层存储是 CLOB 或 Binary。**

它在 11g 中默认为二进制存储。

但不管存储如何，您对 xmltype 列的查询应该会产生一致的结果。

*>>>> 那么如何获取二进制 XML 的内容呢？*

使用查询获取 xmltype 列的内容的方式不会改变。

*   选择 xmlquery(..)
*   选择 xmlcast(xmlquery(...))
*   选择提取（），提取值（），...

这些是提取 xml 中数据的一些方法。

希望这可以帮助。

# java - 使用java打开一个新窗口

> ID：10731539
> 
> 赞同：0
> 
> 时间：2012-05-24T05:17:00.333
> 
> 标签：java, javascript

有没有办法只使用 java 打开一个具有指定 URL 的新窗口。我知道我们可以在 javascript 中使用 window.open，但我需要它在 java page.Anyidea 中？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-24T05:28:06.260

您可以使用Applet 的上下文和`showDocument()`方法。例子：

```
String link = "http://www.google.com";
URL u = new URL(link);
AppletContext a = getAppletContext();
a.showDocument(u,"_self"); 
```

您可以通过更改来更改打开链接的窗口/选项`_self`卡`_blank`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-24T05:31:04.253

如果它确实是一个小程序，并且您想创建一个**Java**窗口（`JFrame`或类似窗口），请参阅 AlphaMale 的评论。

如果您想要的是一个新的**浏览器**窗口，您可以按照 inquizitive 的回答，或者使用[`JSObject`](http://docs.oracle.com/javase/tutorial/deployment/applet/invokingJavaScriptFromApplet.html)运行任意 JavaScript 代码：

```
import netscape.javascript.*; // add plugin.jar to classpath during compilation

...

JSObject window = JSObject.getWindow(this);
window.eval('window.open(url)'); 
```

这对于与页面的脚本交互更有用，当然，如果你想要的只是使用 Applet API 打开另一个选项卡可能会更简单。

# c# - 使用 Linq 计数

> ID：10731540
> 
> 赞同：0
> 
> 时间：2012-05-24T05:17:16.480
> 
> 标签：c#, linq, entity-framework

我想在网格中的订单信息附近显示 OrderDetails Count，但在选择单元中我只能选择键和计数。如何选择订单信息？

```
var Q = from Data in Context.Orders
        join D2 in Context.OrderDetails on Data.OrderID equals D2.OrderID
        group Data by Data.OrderID into grouped
                       select new
                              {
                                  grouped=g.Key,
                                  Count = grouped.Count() 
                              }; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-24T05:29:58.550

您可以按整个订单实体将其分组，例如

```
var Q = from Data in Context.Orders
        join D2 in Context.OrderDetails on Data.OrderID equals D2.OrderID
        group Data by Data into grouped
                       select new
                              {
                                  OrderId = grouped.Key.OrderId,
                                  OrderDate = grouped.Key.OrderDate
                                  Shipping = grouped.Key.Shipping
                                  .
                                  .
                                  .
                                  Count = grouped.Count() 
                              }; 
```

**编辑**Linqpad 程序，用于在对象的内存集合中进行类似查询

```
void Main()
{
    var orders = new List<Order>{
        new Order{OrderId = 1, DeliverIn = 5},
        new Order{OrderId = 2, DeliverIn = 6},
        new Order{OrderId = 3, DeliverIn = 5},
    };

    var lines = new List<OrderLine>{
      new OrderLine{LineId = 1, OrderId = 1, ProductId = 1},
      new OrderLine{LineId = 2, OrderId = 1, ProductId = 2},
      new OrderLine{LineId = 3, OrderId = 1, ProductId = 3},

      new OrderLine{LineId = 4, OrderId = 2, ProductId = 1},
      new OrderLine{LineId = 5, OrderId = 2, ProductId = 3},
      new OrderLine{LineId = 6, OrderId = 2, ProductId = 4},
    };

    var query = from o in orders join l in lines on
            o.OrderId equals l.OrderId
            group o by o into grouped
            select new 
            {
                Count = grouped.Count(),
                grouped.Key.OrderId,
                grouped.Key.DeliverIn
            };
            Console.WriteLine(query);
}

// Define other methods and classes here
public class Order
{
    public int OrderId{get;set;}
    public int DeliverIn{get;set;}

}

public class OrderLine
{
    public int LineId{get;set;}
    public int OrderId{get;set;}
    public int ProductId{get;set;}
} 
```

如果您没有 linq pad，只需从[他们的网站上](http://www.linqpad.net/)获取它。这简直太棒了。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-24T05:24:00.710

查看MSDN 上的[IGrouping](http://msdn.microsoft.com/en-us/library/bb344977.aspx)文档。

```
public interface IGrouping<out TKey, out TElement> : IEnumerable<TElement>, 
IEnumerable 
```

注意[IEnumerable](http://msdn.microsoft.com/en-us/library/bb535181.aspx)。Count 只是 IEnumerable 的扩展方法。您可以轻松地从分组中选择或循环遍历它。

例如：

```
var Q = from Data in Context.Orders
    join D2 in Context.OrderDetails on Data.OrderID equals D2.OrderID
    group Data by Data.OrderID into grouped
                   select new
                          {
                              grouped=g.Key,
                              Count = grouped.Count(),
                              Orders = grouped.ToArray() 
//you can also just return grouped itself to support lazy queries
                          }; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-24T05:39:16.203

只需将它们展平为数组或列表，然后获取其计数。

```
select new
{
    Key = g.Key,
    Orders = grouped.ToArray()
}; 
```

然后得到计数：

```
int count = result.Orders.Count; // Property of an array. 
```

# xmpp - 支持OpenFire服务器同时登录多个

> ID：10731542
> 
> 赞同：5
> 
> 时间：2012-05-24T05:17:34.123
> 
> 标签：xmpp, chat, openfire

我已经将 OpenFire 配置为用作我的客户的服务器。

但是在以下情况下，OpenFire 没有给出正确的响应：

**Customer A**从连接到我的服务器的两个聊天客户端登录并与另一个**Customer B**聊天。问题是，最后一个活跃**的客户 A**只能从**客户 B**那里获得消息，而不是在两个聊天客户端中都获得消息。

任何配置过 OpenFire 的人都可以向我建议需要更改的设置。

谢谢。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-05-24T09:43:36.527

这是由 XMPP 设计的，如[RFC3921](http://xmpp.org/rfcs/rfc3921.html)的第 11.1 节“入站节”中所示。

要将发送给 openfire 中裸 JID 的消息发送到所有相关的完整 JID（资源 + 裸 JID），您需要使用 Openfire`route.all-resources`中的值设置系统属性`true`（管理控制台 > 服务器管理器 > 系统属性）。您必须创建此系统属性。此外，您必须在两个客户端中设置相同的优先级。

另请参阅[这些](https://discourse.igniterealtime.org/t/route-all-resources-sending-same-message-several-times/56821?u=flow) [igniterealtime 论坛](https://discourse.igniterealtime.org/t/make-openfire-to-send-messages-to-all-active-xmpp-clients-under-same-account/56786?u=flow) [帖子](https://discourse.igniterealtime.org/t/feature-request-send-message-to-all-resources/75532?u=flow)。

# jquery - 输入按键时Jquery自动完成触发

> ID：10731547
> 
> 赞同：3
> 
> 时间：2012-05-24T05:18:16.167
> 
> 标签：jquery, asp.net, jquery-ui, jquery-plugins

我正在使用 Jquery UI Autocomplete，它工作得很好，但我正在尝试解决这个问题，希望能得到一些帮助。自动完成在 asp 面板内的文本框上，按 Enter 键的表单上的默认行为是提交表单。如果用户在自动完成文本框中输入内容并按 Enter，我希望自动完成 Web 服务启动并在 Enter 上返回结果。我在网上阅读我想处理自动完成的 Keypress 事件，我一直在尝试但不确定如何调用自动完成以触发按键，如果有人知道如何做到这一点，我将在下面显示我的代码请通过代码中的示例显示，因为我在使用正确的语法来调用按键上的函数时遇到问题，感谢您的帮助，这里是代码。

```
//Attach autocomplete to txtCity so user can lookup SPLCS by cities

        var city;
        var txtCity = $("[id$=txtAutoCity]")
        $(txtCity).autocomplete({
            source: function (request, response) {
                request.term = request.term.replace(/[^a-zA-Z\s]+/, "")
                $.ajax({
                    url: "../../Services.asmx/GetOfficesByCity",
                    data: "{ 'city': '" + request.term + "' }",
                    dataType: "json",
                    type: "POST",
                    contentType: "application/json; charset=utf-8",
                    dataFilter: function (data) { return data; },
                    success: function (data) {
                        response($.map(data.d, function (item) {

                            if (data.d != undefined) {
                                return {
                                    value: item.Display,
                                    result: item.CommaDelimited
                                }

                            }
                            else {
                                return true;
                            }
                        }))
                    },

                    error: function (XMLHttpRequest, textStatus, errorThrown) {
                        alert(errorThrown);
                    }
                });
            },
            autoFill: false,
            minLength: 2,
            delay: 800,
            mustMatch: false,
            selecFirst: false,
            select: function (event, ui) {
                var selectedObj = ui.item;
                if (ui.item) {
                    city = ui.item.result.split(',')[0];

                    $("[id$=txtCity]").val(ui.item.result.split(',')[0]);
                    $("[id$=txtOffice]").val(ui.item.result.split(',')[1]);
                    $("[id$=txtDistrict]").val(ui.item.result.split(',')[2]);

                }
            },
            // Any action to be performed once the auto complete list closes
            close: function (event) {

            }
        }).keypress(function (e) {
            if (e.keyCode === 13) {
                //How to cancel default submit behaviour of form and call this
                //autocomplete function to fire??   
                e.preventDefault();
                //my_search_function($(txtCity).val())
            } 
        }); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2014-09-18T21:33:05.087

要解决此问题，您可以按照以下步骤在自动完成和新变量中添加*搜索属性：*

*   创建一个新变量（var canPass = false）；
*   在自动完成中添加*搜索*属性；
*   在按键事件中触发搜索功能；

所以，结果是：

//将自动完成附加到txtCity，以便用户可以按城市查找SPLCS

```
 var canPass = false;
    var city;
    var txtCity = $("[id$=txtAutoCity]")
    $(txtCity).autocomplete({
        source: function (request, response) {
            request.term = request.term.replace(/[^a-zA-Z\s]+/, "")
            $.ajax({
                url: "../../Services.asmx/GetOfficesByCity",
                data: "{ 'city': '" + request.term + "' }",
                dataType: "json",
                type: "POST",
                contentType: "application/json; charset=utf-8",
                dataFilter: function (data) { return data; },
                success: function (data) {
                    response($.map(data.d, function (item) {

                        if (data.d != undefined) {
                            return {
                                value: item.Display,
                                result: item.CommaDelimited
                            }

                        }
                        else {
                            return true;
                        }
                    }))
                },

                error: function (XMLHttpRequest, textStatus, errorThrown) {
                    alert(errorThrown);
                }
            });
        },
        autoFill: false,
        minLength: 2,
        delay: 800,
        mustMatch: false,
        selecFirst: false,
        select: function (event, ui) {
            var selectedObj = ui.item;
            if (ui.item) {
                city = ui.item.result.split(',')[0];

                $("[id$=txtCity]").val(ui.item.result.split(',')[0]);
                $("[id$=txtOffice]").val(ui.item.result.split(',')[1]);
                $("[id$=txtDistrict]").val(ui.item.result.split(',')[2]);

            }
        },
        // Any action to be performed once the auto complete list closes
        close: function (event) {

        },
        search: function (value, event) {
            if (!canPass) {
               event.preventDefault();
            }
            else {
               canPass = false;
            }
        },
    }).keypress(function (e) {
        if (e.keyCode === 13) {
           canPass = true;
           $(txtCity).autocomplete("search", ($txtCity).val());
        }
    }); 
```

因此，使用此代码，当您按 ENTER 时，您的自动完成功能就会开始搜索。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-24T14:17:05.230

您需要在自动完成对象上触发*搜索功能。*

```
($txtCity).autocomplete( "search", "TheSearchValueToSend" ) 
```

[Jquery Doco 网站](http://docs.jquery.com/UI/Autocomplete#method-search)上的更多信息

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-24T10:24:19.307

**请参阅已接受的答案，忽略以下内容**

首先，我建议恕我直言，您正在以错误的方式思考这个问题。自动完成的概念是让用户继续输入，直到答案完全解决（或从给定的选项中选择他们想要的选项，顺便说一句，这可以通过箭头键来选择，用 ENTER 选择结果）。

也就是说，如果您真的想覆盖 ENTER 行为，我建议您通过“keydown”单独执行此操作，而不是作为自动完成小部件的一部分。下面的 jsFiddle 你应该知道要看什么：http: [//jsfiddle.net/2Z25f/](http://jsfiddle.net/2Z25f/)

亲切的问候，

toepoke.co.uk

# linux - 在另一个终端窗口中恢复停止的进程

> ID：10731551
> 
> 赞同：3
> 
> 时间：2012-05-24T05:18:47.603
> 
> 标签：linux, process, terminal, command

我在 Linux CentOS 中执行了以下 C 代码来创建一个进程。

```
#include <stdio.h>
#include <unistd.h>

int main ()
{
        int i = 0;

        while ( 1 )
        {
              printf ( "\nhello %d\n", i ++ );
              sleep ( 2 );
        }
} 
```

我已将其编译为 hello_count。当我`./hello_count`在终端窗口中执行时，输出是这样的：

```
hello 0
hello 1
hello 2
... 
```

当我在另一个终端窗口中输入命令时

```
ps -e 
```

进程 2956`./hello_count`列在那里。在同一个窗口中，我使用以下方法停止了该过程：

```
kill -s SIGSTOP 2956 
```

当我再次输入以下命令时，

```
ps -e 
```

进程 2956`./hello_count`仍然列出。

然后我输入了以下命令以在同一窗口本身中恢复该过程。

```
kill -s SIGCONT 2956 
```

但是，该过程在其执行并提供输出的前一个窗口中恢复。

是否有任何命令或任何方法可以在不同的终端窗口中使用 pid 2956 恢复（而不是重新启动）进程？

我的意思是，我需要这样的输出，

```
hello 8
hello 9
... 
```

在我停止进程之前获得上述输出的窗口之外的窗口中。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-24T05:24:21.957

您遇到的问题是您的进程附加到一个特定的进程`tty`，并且一旦进程启动就切换`tty`通常是不可能的。看到这个[问题](https://unix.stackexchange.com/questions/17838/how-can-i-switch-between-ttys-without-using-screen)。

您可以考虑一些[hacky 方法。](http://blog.nelhage.com/2011/01/reptyr-attach-a-running-process-to-a-new-terminal/)

对于现实世界的命令行场景，使用[screen](http://www.slac.stanford.edu/grp/cd/soft/epics/extensions/iocConsole/screen.1.html)将允许您在虚拟终端中启动命令，然后从任何其他终端连接到该终端。但这不是您的问题似乎表明您正在寻找的程序解决方案。

# blackberry - 在 Listfield 中无法查看黑莓中的字段

> ID：10731554
> 
> 赞同：0
> 
> 时间：2012-05-24T05:18:56.637
> 
> 标签：blackberry, listfield

我试过这个链接[How to customize a ListField in BlackBerry?](https://stackoverflow.com/questions/1872160/how-to-customize-a-list-field-in-blackberry) 为每个列表行创建具有三个标签字段的 ListField。但我无法看到列表字段项目。但我可以说添加了列表字段。因为在导航上单击我可以获得列表字段的选定索引。请任何人帮助在哪里我做错了。我尝试过的代码是......

```
public class InboxWithOutCheckboxeslistfield extends ListField implements ListFieldCallback  {
    private Vector rows;
    private TableRowManager row ;
    private LabelField UserName,Message,Timestamp;

    /**
     * Creates a new MyScreen object
     */
     public InboxWithOutCheckboxeslistfield() {
        // TODO Auto-generated constructor stub

        super(0, ListField.MULTI_SELECT);
        setRowHeight(80);
        setCallback(this);
        rows = new Vector();
        for (int x = 0; x < 10; x++) {
            row = new TableRowManager();
            UserName = new LabelField("" + String.valueOf(x),
                    DrawStyle.ELLIPSIS | LabelField.USE_ALL_WIDTH
                    | DrawStyle.LEFT);
            UserName.setText("name");
            row.add(UserName);
            Message = new LabelField("" + String.valueOf(x),
                    DrawStyle.ELLIPSIS | LabelField.USE_ALL_WIDTH
                    | DrawStyle.RIGHT);
            Message.setText("hai");
            row.add(Message);
            Timestamp = new LabelField("" + String.valueOf(x),
                    DrawStyle.ELLIPSIS | LabelField.USE_ALL_WIDTH
                    | DrawStyle.RIGHT);
            Timestamp.setText("hai");
            row.add(Timestamp);
            rows.addElement(row);

        }
        setSize(rows.size());

    }

    public void drawListRow(ListField listField, Graphics graphics, int index,
            int y, int width) {
        // TODO Auto-generated method stub

        InboxWithOutCheckboxeslistfield list = (InboxWithOutCheckboxeslistfield) listField;

        TableRowManager rowManager = (TableRowManager) list.rows.elementAt(index);
        rowManager.drawRow(graphics, 0, y, width, list.getRowHeight());

    }

    public Object get(ListField listField, int index) {
        // TODO Auto-generated method stub
        return null;
    }

    public int getPreferredWidth(ListField listField) {
        // TODO Auto-generated method stub
        return 0;
    }

    public int indexOfList(ListField listField, String prefix, int start) {
        // TODO Auto-generated method stub
        return 0;
    }

    private class TableRowManager extends Manager {

        protected TableRowManager(){super(0);
        // TODO Auto-generated constructor stub}
        }

        public void drawRow(Graphics graphics, int i, int y, int width,
                int rowHeight) {
            // TODO Auto-generated method stub
            // Arrange the cell fields within this row manager.
            layout(width, rowHeight);

            // Place this row manager within its enclosing list.
            setPosition(i, y);

            // Apply a translating/clipping transformation to the graphics
            // context so that this row paints in the right area.
            graphics.pushRegion(getExtent());

            // Paint this manager's controlled fields.
            subpaint(graphics);

            graphics.setColor(0x00CACACA);
            graphics.drawLine(0, 0, getPreferredWidth(), 0);

            // Restore the graphics context.
            graphics.popContext();

        }

        protected void sublayout(int width, int height) {
            // TODO Auto-generated method stub
            // set the size and position of each field.
            int fontHeight = Font.getDefault().getHeight();
            int preferredWidth = getPreferredWidth();

            Field field = getField(0);

            layoutChild(field, preferredWidth - 16, fontHeight + 1);
            setPositionChild(field, 34, 3);
            // set the list name label field
            field = getField(1);
            layoutChild(field, 150, fontHeight + 1);
            setPositionChild(field, 34, fontHeight + 6);

            // set the due time name label field
            field = getField(2);
            layoutChild(field, 150, fontHeight + 1);
            setPositionChild(field, preferredWidth - 152, fontHeight + 6);

            setExtent(getPreferredWidth(), getPreferredHeight());

        }
        // The preferred width of a row is defined by the list renderer.  
        public int getPreferredWidth()  
        {       

            return getWidth();        
        } 
        // The preferred height of a row is the "row height" as defined in the  
        // enclosing list.      
        public int getPreferredHeight()     
        { 
            return getHeight();       
        } 

    }
    protected boolean navigationClick(int status, int time) {
        int index1 = getSelectedIndex();
        System.out.println("The Clikced item is:"+index1);
        return true;
    }
} 
```

主屏幕类是

```
public class InboxWithOutCheckboxes extends MainScreen{

    private InboxWithOutCheckboxeslistfield inboxWithOutCheckboxeslistfield;

    public InboxWithOutCheckboxes(){
        super();
        inboxWithOutCheckboxeslistfield = new InboxWithOutCheckboxeslistfield();
         add(inboxWithOutCheckboxeslistfield);     
         add(new SeparatorField()); 
    }

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-24T06:41:04.227

试试这个代码 -

在主屏幕上添加列表-

```
InboxWithOutCheckboxeslistfield InboxWithOutCheckboxeslistfield = new InboxWithOutCheckboxeslistfield ();
add(InboxWithOutCheckboxeslistfield );
add(new SeparatorField()); 
```

单击列表的事件侦听器 -

```
protected boolean navigationClick(int status, int time) {
    getValue();
    return true;
}
protected void getValue() {
Field f = getFieldWithFocus();

if (f instanceof ListField) {
    ListField l = (ListField) f;

    final int index = l.getSelectedIndex();

    FriendsRequestObject _contactslist = (FriendsRequestObject) FriendsRequest_fields.vector.elementAt(index);
    final String _name = _contactslist.getSender_name();
    final String _id = _contactslist.getSender_id();
    //Dialog.alert(_name);

    Application.getApplication().invokeLater(new Runnable() {
        public void run() {
            Dialog.alert(_name);
        }
    }); 
    // Dialog.alert("The selected element is: "+Integer.toString(l.getSelectedIndex()));
}
}

import java.util.Vector;
import net.rim.device.api.ui.Color;
import net.rim.device.api.ui.DrawStyle;
import net.rim.device.api.ui.Field;
import net.rim.device.api.ui.Font;
import net.rim.device.api.ui.Graphics;
import net.rim.device.api.ui.Manager;
import net.rim.device.api.ui.component.LabelField;
import net.rim.device.api.ui.component.ListField;
import net.rim.device.api.ui.component.ListFieldCallback;

class InboxWithOutCheckboxeslistfield extends ListField implements ListFieldCallback {

private Vector contacts;
static Vector vector = new Vector();

private int contactslist_size = 0;

private String name_ = "", id_="", status_="";

public InboxWithOutCheckboxeslistfield () {
    super(0, ListField.MULTI_SELECT);
    setRowHeight(60);
    setEmptyString("Empty List", DrawStyle.HCENTER);
    setCallback(this);

    contacts = new Vector();

    vector.addElement(new FriendsRequestObject("1", "hai1", ""));
    vector.addElement(new FriendsRequestObject("2", "hai2", ""));
    vector.addElement(new FriendsRequestObject("3", "hai3", ""));
    vector.addElement(new FriendsRequestObject("4", "hai4", ""));

    contactslist_size = vector.size();

    for (int x = 0; x < contactslist_size; x++) {

        FriendsRequestObject b = (FriendsRequestObject) vector.elementAt(x);

        id_ = b.getSender_id().toString();
        name_ = b.getSender_name().toString();
        status_ = b.getimage().toString();

        TableRowManager row = new TableRowManager() {
            public void paint(Graphics g) {
                 g.setBackgroundColor(Color.BLACK);
                g.fillRect(0, 0, getWidth(), getHeight());
                 g.setColor(Color.BLACK);
                 g.clear();
                 super.paint(g);
            }
        };

        LabelField name1 = new LabelField(id_, DrawStyle.ELLIPSIS);
        name1.setFont(Font.getDefault().derive(Font.PLAIN));
        row.add(name1);

        LabelField name = new LabelField(name_, DrawStyle.ELLIPSIS);
        name.setFont(Font.getDefault().derive(Font.PLAIN));
        row.add(name);

        // add to the table
        contacts.addElement(row);
    }

    setSize(contacts.size());
}

// ListFieldCallback Implementation
public void drawListRow(ListField listField, Graphics g, int index, int y, int width) {
    InboxWithOutCheckboxeslistfield  list = (InboxWithOutCheckboxeslistfield ) listField;
    TableRowManager rowManager = (TableRowManager) list.contacts.elementAt(index);
    rowManager.drawRow(g, 0, y, width, list.getRowHeight());
}

private class TableRowManager extends Manager {
    public TableRowManager() {
        super(0);
    }

    // Causes the fields within this row manager to be layed out then
    // painted.
    public void drawRow(Graphics g, int x, int y, int width, int height) {
        // Arrange the cell fields within this row manager.
        layout(width, height);

        // Place this row manager within its enclosing list.
        setPosition(x, y);

        // Apply a translating/clipping transformation to the graphics
        // context so that this row paints in the right area.
        g.pushRegion(getExtent());

        // Paint this manager's controlled fields.
        subpaint(g);

        g.setColor(0x00CACACA);
        g.drawLine(0, 0, getPreferredWidth(), 0);

        // Restore the graphics context.
        g.popContext();
    }

    // Arrages this manager's controlled fields from left to right within
    // the enclosing table's columns.
    protected void sublayout(int width, int height) {
        // set the size and position of each field.
        int fontHeight = Font.getDefault().getHeight();
        int preferredWidth = getPreferredWidth();

        /* positioning of fields in list */
        // Status
        Field field = getField(0);
        layoutChild(field, preferredWidth, 50);
        setPositionChild(field, 10, 5);

        // Name
         field = getField(1);
         layoutChild(field, 150, fontHeight + 1);   
        //setPositionChild(field, 1, 2);
        setPositionChild(field, 80, fontHeight );
        setExtent(preferredWidth, getPreferredHeight());
                }

    // The preferred width of a row is defined by the list renderer.
    public int getPreferredWidth() {
        return Graphics.getScreenWidth();
    }

    // The preferred height of a row is the "row height" as defined in the
    // enclosing list.
    public int getPreferredHeight() {
        return getRowHeight();
    }

}

public Object get(ListField listField, int index) {
    return null;
}

public int getPreferredWidth(ListField listField) {
    return 0;
}

public int indexOfList(ListField listField, String prefix, int start) {
    return 0;
}

} 
```

FriendsRequestObject 如下 -

```
public class FriendsRequestObject {

private String sender_id;
private String sender_name;
private String image;

public FriendsRequestObject(String sender_id, String sender_name, String image){
    this.sender_id =  sender_id;
    this.sender_name =sender_name;
    this.image =image;
}

public String getimage() {
    return image;
}
public void setimage(String image) {
    this.image = image;
}

public String getSender_id() {
    return sender_id;
}
public void setSender_id(String sender_id) {
    this.sender_id = sender_id;
}

public String getSender_name() {
    return sender_name;
}
public void setSender_name(String sender_name) {
    this.sender_name = sender_name;
}

} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-24T06:52:24.690

编辑您的`TableRowManager`. 您需要更改`getPreferredWidth()`, 和`getPreferredHeight()`。如果方法执行没有提前完成`getWidth()`，`getHeight()`将返回错误的值。`sublayout()`

```
// The preferred width of a row is defined by the list renderer.
public int getPreferredWidth() {
    return Display.getWidth();
}

// The preferred height of a row is the "row height" as defined in the
// enclosing list.
public int getPreferredHeight() {
    return getRowHeight();
} 
```

# objective-c - UIDatePicker 不隐藏

> ID：10731557
> 
> 赞同：0
> 
> 时间：2012-05-24T05:19:22.703
> 
> 标签：objective-c, uitextfield, uidatepicker

我以编程方式创建了一个 UIDatePicker，并通过一种方法将所选值设置为文本字段。但是该值没有进入文本字段并且选择器没有隐藏。谁能帮我？我的代码在这里

```
 datePicker = [[UIDatePicker alloc] initWithFrame:CGRectMake(0, 245, 320, 270)];
[self.view addSubview:datePicker];
datePicker.hidden=YES;
[datePicker release];
datePicker.datePickerMode = UIDatePickerModeDate;
NSDateFormatter *outputFormatter = [[NSDateFormatter alloc] init];
[outputFormatter setDateFormat:@"yyyy:MMMM:dd"];
self.dobtxt.text = [outputFormatter stringFromDate:self.datePicker.date];
[outputFormatter release];
[DoneBtnDate setBackgroundImage: [UIImage imageNamed: @"OTdone.png"] forState:UIControlStateNormal];
PickerDoneviewDate=[[UIView alloc]initWithFrame:CGRectMake(0,210, 320, 35)];
PickerDoneviewDate.backgroundColor=[UIColor clearColor];
PickerDoneviewDate.backgroundColor=[UIColor colorWithPatternImage:[UIImage imageNamed:@"MFC_tab_01.png"]];
DoneBtnDate = [UIButton buttonWithType:UIButtonTypeRoundedRect];
[DoneBtnDate addTarget:self action:@selector(DatePickerDone:)forControlEvents:UIControlEventTouchDown];
DoneBtnDate.frame = CGRectMake(245,5, 70, 30);
[PickerDoneviewDate addSubview:DoneBtnDate];
[self.view addSubview:PickerDoneviewDate];
PickerDoneviewDate.hidden=YES;
}

   -(void)DatePickerDone:(id)sender
{
NSDateFormatter *outputFormatter = [[NSDateFormatter alloc] init];
[outputFormatter setDateFormat:@"yyyy:MMMM:dd"];

self.dobtxt.text = [outputFormatter stringFromDate:self.datePicker.date];
[datePicker release]; 
[datePicker setHidden:TRUE];

PickerDoneviewDate.hidden=YES;
[outputFormatter release];
} 
```

添加文本字段的代码

```
 dobtxt = [[UITextField alloc] initWithFrame:CGRectMake(150, 120, 133, 26)];
    dobtxt.borderStyle = UITextBorderStyleNone;
    dobtxt.background=[UIImage imageNamed: @"textbox_small.png"];
    dobtxt.font = [UIFont fontWithName:@"Arial" size:13];
    dobtxt.delegate = self;
    dobtxt.userInteractionEnabled=YES;
    dobtxt.contentVerticalAlignment = UIControlContentVerticalAlignmentCenter; 
    [scroll addSubview:dobtxt]; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-24T05:33:41.527

datePicker 是一个属性，它将被自动释放。请删除

```
[datePicker release]; 

self.datePicker = [[[UIDatePicker alloc] initWithFrame:CGRectMake(0, 245, 320, 270)] autorelease];
[self.view addSubview:datePicker];
self.datePicker.hidden=YES;
//[datePicker release];
datePicker.datePickerMode = UIDatePickerModeDate;
NSDateFormatter *outputFormatter = [[NSDateFormatter alloc] init];
[outputFormatter setDateFormat:@"yyyy:MMMM:dd"];
self.dobtxt.text = [outputFormatter stringFromDate:self.datePicker.date];
[outputFormatter release];
[DoneBtnDate setBackgroundImage: [UIImage imageNamed: @"OTdone.png"] forState:UIControlStateNormal];
PickerDoneviewDate=[[UIView alloc]initWithFrame:CGRectMake(0,210, 320, 35)];
PickerDoneviewDate.backgroundColor=[UIColor clearColor];
PickerDoneviewDate.backgroundColor=[UIColor colorWithPatternImage:[UIImage imageNamed:@"MFC_tab_01.png"]];
DoneBtnDate = [UIButton buttonWithType:UIButtonTypeRoundedRect];
[DoneBtnDate addTarget:self action:@selector(DatePickerDone:)forControlEvents:UIControlEventTouchDown];
DoneBtnDate.frame = CGRectMake(245,5, 70, 30);
[PickerDoneviewDate addSubview:DoneBtnDate];
[self.view addSubview:PickerDoneviewDate];
 self.PickerDoneviewDate.hidden=YES;
}

-(void)DatePickerDone:(id)sender
{
NSDateFormatter *outputFormatter = [[NSDateFormatter alloc] init];
[outputFormatter setDateFormat:@"yyyy:MMMM:dd"];

self.dobtxt.text = [outputFormatter stringFromDate:self.datePicker.date];
//[datePicker release]; 
[datePicker setHidden:TRUE];

PickerDoneviewDate.hidden=YES;
[outputFormatter release];
} 
```

# ruby - Ruby 文件在最后一个空行之后没有读取内容 \n

> ID：10731558
> 
> 赞同：2
> 
> 时间：2012-05-24T05:19:23.093
> 
> 标签：ruby, gets

我正在尝试编写一个非常简单的 ruby​​ 脚本，该脚本打开一个文本文件，从行尾删除 \n，除非该行以非字母字符开头或该行本身为空白 (\n)。

下面的代码工作正常，只是它跳过了最后 \n 行之外的所有内容。当我将 \n\n 添加到文件末尾时，它可以完美运行。示例：包含此文本的文件效果很好，并将所有内容拉到一行：

```
Hello
there my
friend how are you? 
```

变成`Hello there my friend how are you?`

但是这样的文字：

```
Hello

there

my friend
how
are you today 
```

只返回`Hello`and `There`，并完全跳过最后 3 行。如果我在末尾添加 2 个空行，它将拾取所有内容并按照我的意愿行事。

谁能向我解释为什么会这样？显然我知道我可以通过`\n\n`在开始时附加到源文件的末尾来修复这个实例，但这并不能帮助我理解为什么`.gets`它没有像我预期的那样工作。

提前感谢您的帮助！

```
source_file_name = "somefile.txt"
destination_file_name = "some_other_file.txt"
source_file = File.new(source_file_name, "r")

para = []
x = ""
while (line = source_file.gets)
  if line != "\n"
    if line[0].match(/[A-z]/)   #If the first character is a letter
        x += line.chomp + " "
    else
      x += "\n" + line.chomp + " "
    end
  else
    para[para.length] = x
    x = ""
  end
end

source_file.close

fixed_file = File.open(destination_file_name, "w")
para.each do |paragraph|
  fixed_file << "#{paragraph}\n\n"
end
fixed_file.close 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-24T05:47:55.037

您的问题在于，当且仅当您遇到空行（'\n'）时，您才将字符串 x 添加到 para 数组中。由于您的第二个示例末尾不包含空行，因此 x 的最终内容永远不会添加到 para 数组中。

在不更改任何代码的情况下解决此问题的简单方法是在关闭 while 循环后添加以下行：

```
if(x != "")
    para.push(x)
end 
```

我宁愿立即将字符串添加到我的数组中，而不是将它们附加到 x 上，直到遇到空行，但这应该适用于您的解决方案。

还，

```
para.push(x)
para << x 
```

两者都比阅读更好，看起来更直接

```
para[para.length] = x 
```

那个让我愣了一秒，因为在非动态语言中，这会给你一个错误。我建议改用其中之一，只是因为它更具可读性。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-24T05:52:39.367

你的代码对我来说就像 ac 代码，**ruby 方式**应该是这样，它代替了你上面的 100 行。

```
File.write "dest.txt", File.read("src.txt") 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-24T05:55:10.347

使用多行正则表达式更容易。也许：

```
source_file.read.gsub(/(?<!\n)\n([a-z])/im, ' \\1') 
```

# asp-classic - 找到 Server.CreateObject 试图做什么

> ID：10731560
> 
> 赞同：3
> 
> 时间：2012-05-24T05:19:31.620
> 
> 标签：asp-classic

我正在将 Windows 2003 应用程序移植到 Windows 2008r2。这是一个经典的 ASP 应用程序。在 awebpage.asp 的第 32 行，使用了以下代码：

```
Server.CreateObject("some.custom.name.here") 
```

在浏览器中运行页面时出现以下错误

```
Server object error 'ASP 0177 : 800401f3'

Server.CreateObject Failed

/awebpage.asp, line 32

800401f3 
```

任何人都知道我应该如何找到这个“some.custom.name.here”对象在旧服务器上的位置，以便我可以将它移过来？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-24T05:39:29.510

**在RegEdit**中的 . 下查找此对象名称`HKEY_CLASSES_ROOT`。

一旦你找到它，你就会得到它的 ProgID / CLSID（一个长 GUID 号码），在 RegEdit 中找到那个长号码，你会得到一个带有这个号码的键。在该键下将有另一个键（可能`InprocServer32`）包含请求的 .dll / .exe。

# debugging - 在 MPI 中调试并行处理时出现警告？

> ID：10731561
> 
> 赞同：0
> 
> 时间：2012-05-24T05:19:37.627
> 
> 标签：debugging, mpi, visual-studio-debugging, visual-c++-2010-express

我有以下代码：

```
#include <stdio.h>
#include "mpi.h"
#define NRA 512    /* number of rows in matrix A */
#define NCA 512   /* number of columns in matrix A */
#define NCB 512         /* number of columns in matrix B */
#define MASTER 0      /* taskid of first task */
#define FROM_MASTER 1  /* setting a message type */
#define FROM_WORKER 2  /* setting a message type */

MPI_Status status;

double a[NRA][NCA],   /* matrix A to be multiplied */
     b[NCA][NCB],       /* matrix B to be multiplied */
     c[NRA][NCB];      /* result matrix C */

main(int argc, char **argv)
{
int numtasks,   /* number of tasks in partition */
  taskid,       /* a task identifier */
  numworkers,   /* number of worker tasks */
  source,       /* task id of message source */
  dest,        /* task id of message destination */
  nbytes,         /* number of bytes in message */
  mtype,          /* message type */
  intsize,   /* size of an integer in bytes */
  dbsize,       /* size of a double float in bytes */
  rows,                       /* rows of matrix A sent to each worker */
  averow, extra, offset,      /* used to determine rows sent to each worker */
  i, j, k,   /* misc */
  count;
double t1,t2;

intsize = sizeof(int);
dbsize = sizeof(double);

MPI_Init(&argc, &argv);
MPI_Comm_rank(MPI_COMM_WORLD, &taskid);
MPI_Comm_size(MPI_COMM_WORLD, &numtasks);
numworkers = numtasks-1;

//printf("   size of matrix A = %d by %d\n",NRA,NCA);
//printf("   size of matrix B = %d by %d\n",NRA,NCB);
/*---------------------------- master ----------------------------*/
if (taskid == MASTER) {
printf("Number of worker tasks = %d\n",numworkers);
for (i=0; i<NRA; i++)
  for (j=0; j<NCA; j++)
    a[i][j]= i+j;
for (i=0; i<NCA; i++)
  for (j=0; j<NCB; j++)
    b[i][j]= i*j;

t1 = MPI_Wtime();

/* send matrix data to the worker tasks */
averow = NRA/numworkers;
extra = NRA%numworkers;
offset = 0;
mtype = FROM_MASTER;
for (dest=1; dest<=numworkers; dest++) { 
  rows = (dest <= extra) ? averow+1 : averow;  
  //printf("   Sending %d rows to task %d\n",rows,dest);
  MPI_Send(&offset, 1, MPI_INT, dest, mtype, MPI_COMM_WORLD);
  MPI_Send(&rows, 1, MPI_INT, dest, mtype, MPI_COMM_WORLD);
  count = rows*NCA;
  MPI_Send(&a[offset][0], count, MPI_DOUBLE, dest, mtype, MPI_COMM_WORLD);
  count = NCA*NCB;
  MPI_Send(&b, count, MPI_DOUBLE, dest, mtype, MPI_COMM_WORLD);

  offset = offset + rows;
  }

/* wait for results from all worker tasks */
mtype = FROM_WORKER;
for (i=1; i<=numworkers; i++) { 
  source = i;
  MPI_Recv(&offset, 1, MPI_INT, source, mtype, MPI_COMM_WORLD, &status);
  MPI_Recv(&rows, 1, MPI_INT, source, mtype, MPI_COMM_WORLD, &status);
  count = rows*NCB;
  MPI_Recv(&c[offset][0], count, MPI_DOUBLE, source, mtype, MPI_COMM_WORLD,
             &status);

  }

#ifdef PRINT
printf("Here is the result matrix\n");
for (i=0; i<NRA; i++) {
  printf("\n");
  for (j=0; j<NCB; j++)
    printf("%6.2f   ", c[i][j]);
  }
printf ("\n");
#endif

t2 = MPI_Wtime();

fprintf(stdout,"Time = %.6f\n\n",
       t2-t1);

}  /* end of master section */

/*---------------------------- worker (slave)----------------------------*/
if (taskid > MASTER) {
mtype = FROM_MASTER;
source = MASTER;
#ifdef PRINT
printf ("Master =%d, mtype=%d\n", source, mtype);
#endif
MPI_Recv(&offset, 1, MPI_INT, source, mtype, MPI_COMM_WORLD, &status);
#ifdef PRINT
printf ("offset =%d\n", offset);
#endif
MPI_Recv(&rows, 1, MPI_INT, source, mtype, MPI_COMM_WORLD, &status);
#ifdef PRINT
printf ("row =%d\n", rows);
#endif
count = rows*NCA;
MPI_Recv(&a, count, MPI_DOUBLE, source, mtype, MPI_COMM_WORLD, &status);
#ifdef PRINT
printf ("a[0][0] =%e\n", a[0][0]);
#endif
count = NCA*NCB;
MPI_Recv(&b, count, MPI_DOUBLE, source, mtype, MPI_COMM_WORLD, &status);
#ifdef PRINT
printf ("b=\n");
#endif
for (k=0; k<NCB; k++)
  for (i=0; i<rows; i++) {
    c[i][k] = 0.0;
    for (j=0; j<NCA; j++)
      c[i][k] = c[i][k] + a[i][j] * b[j][k];
    }

//mtype = FROM_WORKER;
#ifdef PRINT
printf ("after computer\n");
#endif
//MPI_Send(&offset, 1, MPI_INT, MASTER, mtype, MPI_COMM_WORLD);
MPI_Send(&offset, 1, MPI_INT, MASTER, FROM_WORKER, MPI_COMM_WORLD);
//MPI_Send(&rows, 1, MPI_INT, MASTER, mtype, MPI_COMM_WORLD);
MPI_Send(&rows, 1, MPI_INT, MASTER, FROM_WORKER, MPI_COMM_WORLD);
//MPI_Send(&c, rows*NCB, MPI_DOUBLE, MASTER, mtype, MPI_COMM_WORLD);
MPI_Send(&c, rows*NCB, MPI_DOUBLE, MASTER, FROM_WORKER, MPI_COMM_WORLD);
#ifdef PRINT
printf ("after send\n");
#endif
}  /* end of worker */

MPI_Finalize();
} /* end of main */ 
```

代码是使用 MPI 的矩阵乘法。当我尝试使用 Visual Studio 2010 Express 对其进行调试时：它显示警告![警告](../Images/9eb114acff37ef172d59f0b531ddd2f6.png)

我想问一下，调试代码的时候问题出在哪里？有人可以帮助我吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-31T12:44:11.697

错误在这一行：

```
averow = NRA/numworkers; 
```

numworkers 为 0，可能是因为您尚未将 Visual Studio 配置为使用更多进程启动 MPI 作业。让它在这里做正确的事情是相当繁琐的，尤其是在调试时。

确保[MPI Cluster Debugger](http://msdn.microsoft.com/en-us/library/ee441265.aspx)安装正确——这很可能是罪魁祸首。

# ckeditor - ckeditor点击事件不起作用

> ID：10731564
> 
> 赞同：11
> 
> 时间：2012-05-24T05:19:45.707
> 
> 标签：ckeditor

我有一个 ckeditor 插件并在 init 内部：我想捕获点击事件，以便我可以做一些事情。

```
CKEDITOR.plugins.add('Columns',{
  init : function(editor) {
    editor.on('doubleclick', function(ev) {console.log('hello');}); // Works
    editor.on('focus', function(ev) {console.log('hello');}); // Works

    editor.on('click', function(ev) {console.log('hello');}); // Does not work
    editor.on('mousedown', function(ev) {console.log('hello');}); // Does not work
  }
}); 
```

有任何想法吗？？？

**编辑：** 确定无法点击工作，我相信我们需要为此创建一个事件。但是感谢这篇文章：[http ://alfonsoml.blogspot.com.au/2011/03/onchange-event-for-ckeditor.html](http://alfonsoml.blogspot.com.au/2011/03/onchange-event-for-ckeditor.html)

我设法使用了“saveSnapshot”，每次单击时似乎都会触发，所以现在可以使用

```
editor.on('saveSnapshot', function(ev) {console.log('hello');}); // Works 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-09-04T09:56:02.813

我意识到这很旧，但它没有原始问题的答案。

```
CKEDITOR.plugins.add('Columns',{
    init : function(editor) {
        editor.on('instanceReady', function (e) {
            this.container.on('click', function (event) {
                console.log('hello');
            });
        });
    }
}); 
```

**注意**：当 CKEditor 处于“经典 iframe 模式”时，这将不起作用。相反，您需要使用`this.document`（参见：[文档属性](http://docs.ckeditor.com/#!/api/CKEDITOR.editor-property-document)）来获取对 iframe 的引用。

# python - 在 MongoDB 中使用自己的字段进行过滤

> ID：10731572
> 
> 赞同：3
> 
> 时间：2012-05-24T05:21:18.290
> 
> 标签：python, django, mongodb

我正在尝试按其自己的字段（特别是时间）过滤 mongodb 文档，即：

```
{time1: timeval1, time2: timeval2} 
```

我希望能够获得 timeval1 大于 timeval2 的结果集（如 .find()）。

我不知道如何用 $gt 做到这一点，也找不到类似的东西。关于如何做到这一点的任何想法？

我从 djangi 项目中的 pymongo 访问它......但我想要的只是 mongodb 查询。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-24T05:51:02.923

您可以使用`$where`运算符和 javascript 表达式来编写查询逻辑。

[http://www.mongodb.org/display/DOCS/Advanced+Queries#AdvancedQueries-JavascriptExpressionsand%7B%7B%24where%7D%7D](http://www.mongodb.org/display/DOCS/Advanced+Queries#AdvancedQueries-JavascriptExpressionsand%7B%7B%24where%7D%7D)

```
> db.newColl.find()

{ "_id" : ObjectId("4fbdcdd6e79d66d9e681b185"), "time1" : 123, "time2" : 22 }
{ "_id" : ObjectId("4fbdcddee79d66d9e681b186"), "time1" : 11, "time2" : 220 }
{ "_id" : ObjectId("4fbdcde6e79d66d9e681b187"), "time1" : 331, "time2" : 2120 }
{ "_id" : ObjectId("4fbdcdece79d66d9e681b188"), "time1" : 1, "time2" : 20 }

> db.newColl.find({'$where' : 'this.time1 > this.time2' });

{ "_id" : ObjectId("4fbdcdd6e79d66d9e681b185"), "time1" : 123, "time2" : 22 }

> db.newColl.find({'$where' : 'this.time1 < this.time2' });

{ "_id" : ObjectId("4fbdcddee79d66d9e681b186"), "time1" : 11, "time2" : 220 }
{ "_id" : ObjectId("4fbdcde6e79d66d9e681b187"), "time1" : 331, "time2" : 2120 }
{ "_id" : ObjectId("4fbdcdece79d66d9e681b188"), "time1" : 1, "time2" : 20 } 
```

# google-maps - 从谷歌地图中删除箭头

> ID：10731573
> 
> 赞同：0
> 
> 时间：2012-05-24T05:21:23.733
> 
> 标签：google-maps

你好朋友我试图设置为**[这样](http://www.apartmentlist.com/home)**`Google Map`的网页背景 。我在这个网站上注意到，这个网站使用的地图上没有箭头和加减号图标。我不知道如何获得这种代码。我尝试做同样的事情，但在谷歌地图页面上没有删除这些功能的选项 `Google Map`

请帮我

任何帮助，将不胜感激

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-24T05:47:13.597

有演示代码来做你想要的地图。访问[此处，](https://google-developers.appspot.com/maps/documentation/javascript/examples/map-simple-async)您将不得不更改中心和缩放级别等参数。然后你可以实现你在问题中显示的地图。对于文档请参考[这个](https://developers.google.com/maps/documentation/javascript/tutorial#HTML5)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-25T15:33:40.823

在初始化地图时，您可以禁用某些地图选项。您可以在 Google Maps API 参考中找到这些地图选项的列表：[https ://developers.google.com/maps/documentation/javascript/reference#MapOptions](https://developers.google.com/maps/documentation/javascript/reference#MapOptions)

要获得一张裸地图，您可能必须为您的地图选项做这样的事情：

```
var myOptions = {
  zoom: (specify zoom level),
  center: (your map's center),
  mapTypeId: google.maps.MapTypeId.ROADMAP,
  disableDoubleClickZoom: false,
  draggable: false,
  overviewMapControl: false, 
  panControl: false,
  scrollwheel: false,
  streetViewControl: false,
  zoomControl: false,
  mapTypeControl: false
} 
```

# java - 安卓地图视图错误

> ID：10731574
> 
> 赞同：0
> 
> 时间：2012-05-24T05:21:31.080
> 
> 标签：java, android, eclipse, android-mapview

我从一个[例子](http://mobiforge.com/developing/story/using-google-maps-android)做同样的事情，但 Eclipse 返回错误。代码如下：

```
package hello.google.map;

import com.google.android.maps.MapActivity;
import com.google.android.maps.MapView;
import android.os.Bundle;

public class MapsActivity extends MapActivity 
{    
    /** Called when the activity is first created. */
    @Override
    public void onCreate(Bundle savedInstanceState)
    {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);
    }

    @Override
    protected boolean isRouteDisplayed() {
        return false;
    }
} 
```

这是错误：

*

```
Description Resource    Path    Location    Type
MapActivity cannot be resolved to a type    HelloGoogleMapsActivity.java    /HelloGoogleMaps/src/hello/google/map   line 7  Java Problem
MapActivity cannot be resolved to a type    HelloGoogleMapsActivity.java    /HelloGoogleMaps/src/hello/google/map   line 13 Java Problem
The import com.google cannot be resolved    HelloGoogleMapsActivity.java    /HelloGoogleMaps/src/hello/google/map   line 3  Java Problem
The import com.google cannot be resolved    HelloGoogleMapsActivity.java    /HelloGoogleMaps/src/hello/google/map   line 4  Java Problem
The method isRouteDisplayed() of type MapsActivity must override a superclass method    HelloGoogleMapsActivity.java    /HelloGoogleMaps/src/hello/google/map   line 18 Java Problem
The method onCreate(Bundle) of type MapsActivity must override a superclass method  HelloGoogleMapsActivity.java    /HelloGoogleMaps/src/hello/google/map   line 11 Java Problem
The method setContentView(int) is undefined for the type MapsActivity   HelloGoogleMapsActivity.java    /HelloGoogleMaps/src/hello/google/map   line 14 Java Problem
The public type MapsActivity must be defined in its own file    HelloGoogleMapsActivity.java    /HelloGoogleMaps/src/hello/google/map   line 7  Java Problem* 
```

为什么？我做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-24T05:31:14.820

从外观上看，您可能错过了两件事。要么您忘记将以下内容添加到您的 AndroidManifest.xml

```
<uses-library android:name="com.google.android.maps" /> 
```

或者，您尝试在具有库存 Android API 而不是特殊的 Google API 版本的模拟器上运行它。您需要此 Google API 版本才能使用地图等功能。

如果您没有，不用担心，您可以在 SDK Manager 中下载它。之后只需创建一个新的 AVD 并将目标设置为目标 API 级别的 Google API 版本。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-24T05:37:42.913

在创建 setContentview 之后使用它

```
 mapView = (MapView) findViewById(R.id.mapview);
    mapView.setBuiltInZoomControls(true); 
```

并放

```
<application android:icon="@drawable/icon" android:label="@string/app_name" >
 <uses-library android:name="com.google.android.maps" />

</app...> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-24T06:02:05.477

您的错误日志显示文件名是`HelloGoogleMapsActivity.java`，但您的类名是`MapsActivity`. 你确定你在做正确的事吗？尝试将类名更改为`HelloGoogleMapsActivity`或文件名更改为`MapsActivity`. 在这两种情况下更新您的清单。

根据您的链接，主要活动是`MapsActivity`并且在文件中定义`MapsActivity.java`。因此，您可以更改文件名`MapsActivity.java`以匹配示例。

# json - linq和json，匿名类型不能有多个同名属性

> ID：10731580
> 
> 赞同：0
> 
> 时间：2012-05-24T05:22:27.090
> 
> 标签：json, asp.net-mvc-3, linq, jqgrid

我有一个 json 这是这样的：

```
 var jsonData = new
        {
            total = totalPages,
            page = page,
            records = totalRecords,
            rows = reservations.Select(x => new { x.ReservationId, x.Employee.Name,roomName = x.Room.Name, x.Date, x.StartTime, x.EndTime, x.Notes}).ToList()
                .Select(x => new
                {
                    id = x.ReservationId,
                    cell = new string[]
                    {
                    roomName,
                    x.Name,
                    x.Date.ToString().Split(' ')[0],
                    x.StartTime.ToString().Remove(5) +" - " +x.EndTime.ToString().Remove(5),
                    x.Notes,
                    String.Format("<input type=\"button\" value=\"DETAILS\" onclick=\"window.location.href='/Reservation/Details/{0}'\"/>&nbsp &nbsp<input type=\"button\" value=\"EDIT\" onclick=\"window.location.href='/Reservation/Edit/{0}'\"/>&nbsp &nbsp<input type=\"button\" value=\"DELETE\" onclick=\"window.location.href='/Reservation/Delete/{0}'\"/>", x.ReservationId), 
                    }
                }).ToArray(),
        }; 
```

此 json 将返回到 jqGrid。当我在第一个 select 语句中键入 x.Room.Name 时，发生错误，因为已经存在同名的属性（iexEmployee.Name）。

所以我尝试了“roomName = x.Room.Name”并将roomName放在单元格内容中。

但是，当 json 返回到我的 jqGrid 时，应该包含 roomName 的列是空的。我如何以其他方式显示 x.Room.Name 的值？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-24T06:38:53.290

由于您已重命名该列以`roomName`确保在客户端上有相应的列：

```
$('#grid').jqGrid({
    colNames: [ 'roomName', 'Name', ..... other columns ],
    colModel: [
        { name: 'roomName', index: 'roomName' },
        { name: 'Name', index: 'Name' },
        .....
    ],
    ........
}); 
```

# c - ncurses getch() 和 echo() on 是否确保在执行程序中的下一条语句之前字符将在屏幕上可见？

> ID：10731583
> 
> 赞同：3
> 
> 时间：2012-05-24T05:22:48.523
> 
> 标签：c, echo, ncurses

我有一个看起来像这样的 ncurses 程序

```
1\. int c =0;
2\. initscr();
3\. timeout(-1);
4\. printw("Enter a character");
5\. getch();
6\. printw("\nOkay\n");
7\. c = 5; 
```

我希望在将 c 修改为 5 之前应该发生`getch()`以及以下的输出`printw()`（并且在屏幕上可见）。但是这似乎并没有发生（使用 qemu-kvm 并在那时中断进行验证）。是否有任何原因可能会发生这种情况，或者以某种方式确保在执行下一条语句之前输出在屏幕上可见？fflush(stdout) 能保证吗？

该操作系统是使用 qemu-kvm 运行的虚拟 gentoo。屏幕处于控制台模式（ X 未初始化）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-08T17:50:40.467

您可能忘记发出`refresh()`命令。请参阅以下似乎有效的示例代码：

```
#include <stdlib.h>
#include <stdio.h>
#include <unistd.h>
#include <curses.h>

int main(void) {

    WINDOW * mainwin;
    int c=0;

    /*  Initialize ncurses  */

    if ( (mainwin = initscr()) == NULL ) {
    fprintf(stderr, "Error initialising ncurses.\n");
    exit(EXIT_FAILURE);
    }

    timeout(-1);
    printw("Enter a character: ");
    getch();
    printw("\nC = %d Ok\n", c);
    c = 5;
    printw("C is now %d\n",c);
    refresh();
    sleep(10);
    /*  Clean up after ourselves  */

    delwin(mainwin);
    endwin();
    refresh();

    return EXIT_SUCCESS;
} 
```

# sharepoint - 在哪里可以找到 sharepoint api

> ID：10731586
> 
> 赞同：-1
> 
> 时间：2012-05-24T05:23:00.100
> 
> 标签：sharepoint, sharepoint-api

我是sharepoint的新手。我想收集 sharepoint 中可用的所有方法和类。我可以在哪里得到它们。就像 API 一样。我在 google 中使用 Sharepoint API 进行了搜索。但结果不太匹配。您能否向我推荐任何链接或文档，其中包含所有共享点的方法和类。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-24T06:33:34.383

这应该有你要找的东西：http: [//msdn.microsoft.com/en-us/library/ee557253.aspx](http://msdn.microsoft.com/en-us/library/ee557253.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-24T07:51:53.317

SharePoint API 的主要部分位于 Microsoft.SharePoint.dll 中。那里的所有课程都取决于您的性格=）。SharePoint API 的另一部分位于此处 c:\Program Files\Common Files\Microsoft Shared\Web Server Extensions\14\ISAPI。所有 ddls 都包含一些用于 SharePoint 特定部分的 API。此外，还有 asmx 和 svc 服务也位于那里，它们为 SharePoint 提供了更多 API。GAC 和其他位置也有某些程序集和服务，它们也为 SharePoint 的其他部分提供 API。

如您所见，API 非常广泛，您将花费大量精力来记录它们。我怀疑它们是否真的被微软正确记录以供公众使用。所以现在你可能明白为什么谷歌在 SharePoint API 上什么也没给你。我希望我回答了你的实际问题，但我仍然无法想象你为什么需要这样的文件。如果您需要它来解决一些问题，那绝对不是最好的方法。所以在这里发布您的实际问题，以便我们提供帮助。

祝你好运！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-24T09:11:09.577

试试这个[链接](http://www.cozyroc.com/category/tags/api)

这些包含一些类和方法

# eclipse-plugin - 尝试加载 ActionBar 时 Eclipse IIntroPart 抛出异常

> ID：10731587
> 
> 赞同：0
> 
> 时间：2012-05-24T05:23:00.050
> 
> 标签：eclipse-plugin, eclipse-rcp

我有一个实现 IIntroPart 并在创建方法内部的类-

公共无效createPartControl（复合容器）{

```
 Browser browser = new Browser(container,SWT.NONE);
    browser.setUrl(STRHTMLPATH+File.separator+"wc.html");

    IActionBars bars = getIntroSite().getActionBars(); //NULL POINTER 
```

前两行工作正常，它也加载了浏览器，但是当我尝试像在 View 中那样加载 actionBars 时，我在这里得到 NullPointerException。什么问题。

> 无法创建视图 ID org.eclipse.ui.internal.introview：引发了意外异常。

以上是异常栈前抛出的消息

# asp.net - 使用本地 IIS Web 服务器进行调试

> ID：10731589
> 
> 赞同：9
> 
> 时间：2012-05-24T05:23:15.527
> 
> 标签：asp.net, visual-studio, iis-7, dns, localhost

所以我正在尝试设置一个本地测试域，这样我就可以使用这篇[文章](http://weblogs.asp.net/owscott/archive/2012/05/14/introducing-testing-domain-localtest-me.aspx)来创建一个子域。我的问题是我可以在 IIS 中很好地设置站点并浏览到那里的文件。但是，当尝试设置 Visual Studio 以使用该站点时，例如。在 Project Url 中：`http://localtest.me`当我单击 Create VirtualDriectory 时，我收到以下错误：`Unable to create virtual directory. The URL 'http://localtest.me' is already mapped to a different folder 'C:\Websites\site'`. ![在此处输入图像描述](../Images/ca5304da82072adc619eafe5891bd8e1.png)

如果我从 IIS 中删除该站点并允许 Visual Studio 尝试创建它，我会收到以下错误：`Unable to create the virtual directory. Could not find the server 'http://localtest.me' on the local machine. Creating a virtual directory is only supported on the local IIS server`. 但是站点 localtest.me 指向 127.0.0.1，这是我的本地计算机，对吗？

那么如何在这样的场景中设置调试，其中我已经在 IIS 中创建了站点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-18T14:57:33.530

我总是检查“使用自定义 Web 服务器”并将其指向我的本地 url，而不是在 Visual Studio 中使用“使用本地 IIS Web 服务器”设置。对于您的示例 localtest.me，上面的起始 URL 设置为 localtest.me

如果您仍然遇到问题，您可以随时进入调试模式，但执行附加到进程而不是 F5 并选择 IIS 进程。

# iphone - iPhone使用phonegap的支付方式

> ID：10731591
> 
> 赞同：0
> 
> 时间：2012-05-24T05:23:20.987
> 
> 标签：iphone

听说 iPhone 应用中用于支付的 UiWebView 会被拒绝。这是真的吗？如果是的话，如果我想用信用卡付款，我该如何使用有效的付款方式。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-24T05:29:47.677

如果您购买的物品是虚拟的（如枪支、弹药），那么您需要使用应用内购买，但如果您购买的是实物。然后您可以使用贝宝或任何其他购买媒体。

# ruby-on-rails-3 - Netzke 基本包。需要多上传字段的建议

> ID：10731592
> 
> 赞同：2
> 
> 时间：2012-05-24T05:23:22.327
> 
> 标签：ruby-on-rails-3, carrierwave, netzke

有没有简单的方法可以将多重上传功能包含到 NetzkeFormView 或 GridView(AddInForm) 中？

我当前使用carrierwave的图像上传字段是：

```
 {:name => :image_link, :xtype => :displayfield, :display_only => true, :getter => lambda { |r| %Q(<a href='#{r.image.url}'>Download</a>) if r.image.url }},
    {:name => :image, :field_label => "Upload image", :xtype => :fileuploadfield, :getter => lambda { |r| "" }, :display_only => true} 
```

# prototypejs - 使用 Prototype-JS 填充选择框的正确方法

> ID：10731597
> 
> 赞同：0
> 
> 时间：2012-05-24T05:23:33.547
> 
> 标签：prototypejs

我想用 ajax 获取的数据填充一个选择框。

初始 HTML 代码如下所示：

```
<select id="myid" name="myname">
</select> 
```

我需要避免`innerHTML`和其他类似的解决方法。我尝试使用`appendChild`，但似乎没有用。我对原型真的很陌生，所以我真的不知道该怎么做。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-24T05:36:41.103

假设您想将自创建对象的所有成员作为键值对添加到`select`元素中，您可以这样做：

```
var data = {
  a: 'Peter',
  b: 'Paul',
  c: 'Mary'
};

$('mySelect').update($H(data).map(function(o) {
  return '<option value="' + o.key + '">' + o.value + '</option>';
}).join(''));
​ 
```

您可以[在此处找到它的 jsFiddle](http://jsfiddle.net/Udtyp/)。

代码背后的基本思想是`option`，通过将每个元素转换为字符串，从给定的数据对象创建元素。这是通过[map](http://api.prototypejs.org/language/Enumerable/prototype/collect/)方法完成的。

`$H`会将数据对象转换为 Prototype对象，这`Hash`在这里派上用场，因为它将`{ key, value }`对象传递给它的映射调用的第一个参数。

将所有元素转换为字符串后，您只需`join`通过一个空字符串（或您喜欢的任何非 HTML 代码，\n 也可以）将它们用于该`update`方法。

老实说，[Element#update](http://api.prototypejs.org/dom/Element/update/)使用`innerHTML`所以这实际上不是一种解决方法。这只是一种方法。

# java - 为文件创建创建构造函数

> ID：10731609
> 
> 赞同：0
> 
> 时间：2012-05-24T05:25:21.967
> 
> 标签：java, file, constructor

我正在编写一个基于文件的程序。我的代码看起来像这样，

```
 public class clazz {
    void somemethod() {
        StringBuffer s = new StringBuffer();
        // some code at final
        write(buf);
    }

    void write(StringBuffer buffer) {
        FileWriter f = new FileWriter(fileName);
        BufferedWriter b = new BufferedWriter(f);
        // implemented write, flush, close
    }
} 
```

当我调用`somemethod`方法时，文件每次都会打开。我需要使用构造函数打开文件一次并重用 BufferedWriter。帮我解决这个问题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-24T05:29:23.790

这看起来像是您的顾问告诉您要做的事情，而您却一无所知。

1.  使 BufferedWriter 成为实例变量
2.  在你的构造函数中初始化它。

# sql - 将多行插入表中并在插入期间捕获任何错误

> ID：10731610
> 
> 赞同：1
> 
> 时间：2012-05-24T05:25:31.673
> 
> 标签：sql, sql-server, insert

我正在尝试将多行插入到一个表中，如果其中一行违反了任何规则，我想单独捕获该行，其余的应该插入。

有没有办法通过使用查询而不是 SSIS 在 SQL Server 中执行此操作？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-24T05:55:03.047

不，那是不可能的。如果您尝试插入的行之一失败，则整个插入将失败。
您可以尝试事先找出哪些行会失败并且不将这些行包含在插入中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-24T06:11:09.787

您插入的这些行来自哪里？例如，您可以尝试使用游标，如果验证失败，您可以在插入前检查插入数据并将其插入故障表。

# assembly - 为什么所有 ARM 引导加载程序都有汇编代码？

> ID：10731616
> 
> 赞同：4
> 
> 时间：2012-05-24T05:25:59.863
> 
> 标签：assembly, arm, bootloader

用汇编程序编写可以减少代码大小和执行时间。但是假设我有足够的记忆和足够的时间。我可以只使用 C 代码并启动设备吗？我的意思是，从开机，直接运行C代码。我对 ARM 处理器特别感兴趣。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-24T10:32:26.260

实际上，您*可以为 ARM 的*[Cortex-M3 微控制器](http://www.arm.com/products/processors/cortex-m/cortex-m3.php)制作纯 C 固件。因为它的向量表包含堆栈指针的条目，它的值将由处理器初始化，您可以在复位后立即使用编译代码。您仍然需要设置外设并初始化 C 库环境，但您不必在汇编程序中进行。Cortex-M3 还会在中断处理程序入口自动保存易失性寄存器，因此它们也可以直接用 C 语言编写。

也就是说，大多数编译器供应商仍然提供用汇编程序编写的启动，因为它提供了最多的控制。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-25T02:06:31.800

如前所述，cortex-m3 是特殊的，并且允许这样的事情，除了一个例外，你仍然需要一些 asm 或其他一些魔法来构建向量表来调用 C 代码。

一般来说，答案是否定的，需要进行一些组装。处理器是通用的，它们通常不知道您为程序和数据以及堆栈设置的地址空间等，寄存器，特别是堆栈指针，通常被初始化为某个已知值，例如零。处理器通常已知有一个启动序列，要么是它开始执行的地址，要么是它找到开始执行的地址的地址。该地址表，一个用于复位，一个用于中断等，由引导代码的程序员放置在那里，虽然可以在 C 中管理，但不值得努力，更容易编写几行 asm 来构建该向量桌子。（皮质-m就是这种情况）

所以至少你需要设置一个堆栈指针，然后分支到入口 C 代码，从那里你可能可以摆脱运行 C。现在，如果这是一个手臂而不是一个 cortex-m，那么你有多个堆栈要设置（如果您想使用中断、处理故障等）并且您必须使用特定的 asm 指令才能执行该设置，因此 asm 是必需的，无论是真实的还是内联的。

如果您习惯使用 .data 或期望 .bss 为零，则必须这样做，一些代码必须将 bss 归零并准备 .data。通常，您的系统（甚至您的台式机/笔记本电脑）将从闪存启动，如果您有 .data ，那么 .data 需要在闪存中，但需要读取/写入，因此您需要将该数据从闪存复制到它的家在 ram 中，你需要先启动并运行 ram（见下文）才能做到这一点。

不是在过去的美好时光，但绝对是今天，你不能只打开并开始使用内存，需要大量代码来启动和运行 dram。是的，这段代码是用 C 语言编写的，可能不是 asm 代码（尽管出于性能原因，asm 可用于利用您不一定让 C 编译器为您生成的特定指令）。

因此，您通常有不同的场景，不一定特定于 arm。我会列出一些但不是每一个细微差别

1）您的系统使用不需要初始化的 sram 或内部 ram，您没有使用 .data 并且您的代码不假定 .bss 已被归零。一般来说，最低限度是初始化堆栈指针并分支到您的 C 入口点（main，或任何您称之为的入口点）。

2）您的系统使用不需要初始化的 sram 或内部 ram，您正在使用您希望在 C 代码开始之前存在的 .data（对于 C 程序员来说非常典型）并且 .bss 之前为零您的 C 代码启动（也是典型的，但幸运的是 gcc 开始抱怨执行此操作的代码）。由于在这种情况下您的 C 代码期望在运行 C 代码之前准备好这些东西，因此 .bss 的归零和 .data 从闪存到 ram 的复制发生在 asm 中。这是你最常见的场景，去看看不同处理器的许多crt0.s例程，这是共同的主题，设置堆栈指针，零bss，复制.data分支到main。

3）您的系统有一些不需要初始化的内部 sram，但您希望使用的主内存是 dram。这是一个两步，您的第一个引导加载程序仍需要设置堆栈指针，根据您的喜好选择零 .bss 和复制 .data 然后分支到第一个引导加载程序的入口点。此引导加载程序将启动 DRAM 系统。这个引导加载程序现在可以选择复制 .data 和零 .bss（现在可以在 C 中），然后分支到主引导加载程序入口点/函数，它需要并使用更大的主内存。

4) 你有一个带有微编码的 x86 处理器，你需要在启动时修补微码，我个人对此不了解，但假设你应该使用的指令数量有限，因为你正在更改一些微编码，或者也许你复制到一些内存然后翻转一点，它神奇地切换到补丁，你执行更改，不知道，但我敢打赌需要一些组装。

请记住，许多 C 库调用都在汇编中。所以 C 是汇编，尤其是在手臂上。你避免所有的除法、乘法、模数、浮点数等吗？你从不使用任何字符串函数或复制函数。您是否使用 C 库调用？很可能有您正在使用但不知道的 asm。memcpy 经常在 asm 中手动调整，尤其是在 arm 上。如果您在代码中使用结构，编译器可以/将在 memcpys 中抛出，具体取决于您使用它们的内容和方式。除法和模绝对是asm。有时乘。浮点数，通常是 asm，即使有 fpu。当然，您自己没有编写此 asm，但其中可能有 asm，如果没有该 asm（如果您使用这些库），您的引导加载程序将不存在。

你的标题问题，暗示只有引导加载程序的汇编，是错误的，引导加载程序大多不是汇编。几乎总是需要一些组装。

cortex-m 是一种独特的野兽，因为它的设计使您不必使用特殊指令或 asm 包装中断（或让编译器为您执行此操作）。不典型。cortex-m 有一个很大到很大的向量表。很好奇您将如何在 C 中构建该表。我有一些想法如何做到这一点，但是使用 asm 会容易得多，即使 asm 实际上不是 asm 它是对汇编器的指令（.word this_handler，.word that_handler） .

传统的 arm 的 32 位 ARM7 类似指令 ARM 内核，您必须至少在 asm 中设置堆栈并分支到 C 代码，除非您玩编译器游戏，否则异常处理程序也需要一点 asm，只需几行代码。

我不得不怀疑这个问题的根源。引导加载程序与处理器和外围设备密切相关，编写引导加载程序的程序员必须熟悉硬件寄存器等。这意味着对该处理器的指令集有一定程度的熟悉。避免引导加载程序中的所有 asm 是一个问题。即使使用 cortex-m 只是因为您可以直接从向量表转到 C 代码，您仍然需要验证您使用的编译器是否符合硬件调用约定，而不仅仅是一些通用的 arm 调用约定，它特别具有确保保留一定范围的寄存器并在返回时使用正确的指令，这意味着在这个级别上对编译器生成的代码进行反汇编和手动/视觉检查，尽管只是阅读，

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-24T05:52:54.170

引导加载程序负责在设备启动时对其进行初始化。在这一点上，除了汇编程序之外别无他法。汇编程序部分通常保持尽可能小，并负责初始化系统，以便操作系统的部分和例如最小的 C 运行时可以加载到内存中并执行，在此之后可以使用例如完成其他初始化任务C。

一些可能有用的链接：

[维基百科引导程序条目](http://en.wikipedia.org/wiki/Bootloader#Boot_loader)

[U-boot设计原则](http://www.denx.de/wiki/view/U-Boot/DesignPrinciples#4_Keep_it_Portable)

希望这会有所帮助。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-24T05:34:49.283

我也不知道确切的答案。我只是提出一些我能想到的原因（减去内存和效率）：
- 代码非常特定于设备，无需在其他地方编译和运行
- 访问特殊指令（？）
- 引导加载程序时的状态运行与普通程序不同（？）（堆栈，堆）

免责声明：此答案可能包含错误信息。在这里不要认真对待任何事情。

# ruby-on-rails - 在辅助方法中声明实例变量

> ID：10731618
> 
> 赞同：1
> 
> 时间：2012-05-24T05:26:09.550
> 
> 标签：ruby-on-rails

我有一个控制器**before_filter**将非管理员用户重定向到根路径，如果他们试图更新其他人的配置文件：

```
before_filter :correct_user, only: [:edit, :update]
....
private
  def correct_user
    @user=User.find(params[:id])
    redirect_to(root_path) unless current_user?(@user) || current_user.admin?
  end 
```

我在两个不同的控制器中使用这个过滤器，我想**干掉**代码。

当我将方法移动到**application_helper.rb**时，我的规范仍然通过，但我厌倦了`@user`在帮助文件中分配变量。这会带来什么伤害吗？我至少应该将变量的分配委托给助手中的私有方法吗？

在这种情况下复制代码会更好，还是我的解决方案足够安全？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-24T05:32:54.820

将您的正确用户方法移动到您的应用程序控制器中，然后您可以在任何带有 before_filter 的控制器中使用。

# c# - 在 LINQ 中获取不同的行

> ID：10731621
> 
> 赞同：0
> 
> 时间：2012-05-24T05:26:47.223
> 
> 标签：c#, linq

我需要使用 LINQ 从表中获取不同的行值。我使用的查询是

```
 var results = (from statename in dsobject.dbo_statetable select statename).Distinct(); 
```

它给出了名为“dbo_statetable”的表的所有行，但我只需要不同的状态名。实现这一目标的查询应该是什么？

它的 sql 等价物是`select distinct statename from dbo_statetable`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-24T05:28:31.990

您需要指定属性：

```
var results = (from x in dsobject.dbo_statetable select x.Statename).Distinct();
//                                                       ^^^^^^^^^^ 
```

after 变量`from`没有指定列。它就像 SQL 中的表别名。您的 LINQ 语句大致相当于以下 SQL：

```
SELECT DISTINCT * FROM dbo_statetable AS statename 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-24T05:33:04.880

`dsobject.dbo_statetable.Select(s => s.statename).Distinct()`

# zend-framework - Zend MultiDB 适配器未切换

> ID：10731622
> 
> 赞同：1
> 
> 时间：2012-05-24T05:27:30.593
> 
> 标签：zend-framework, zend-db, zend-db-table

我在使用 zend multidb 时遇到了一些问题。我的适配器没有被切换，我设置为默认值的适配器每次都被使用。而且它也没有给我任何错误。以下是我用于 zend multidb 功能的代码。

引导程序.php

```
public function _initDB()
{
    Zend_Registry::getInstance();       
    $this->bootstrap('multidb');
    $multidb = $this->getPluginResource('multidb');
    Zend_Registry::set('dbR', $multidb->getDb('dbR'));
    Zend_Registry::set('dbW', $multidb->getDb('dbW'));

} 
```

应用程序.ini

```
resources.multidb.dbR.adapter = "mysqli"
resources.multidb.dbR.host = "xxx.xxx.x.xx"
resources.multidb.dbR.username = "root"
resources.multidb.dbR.password = "admin"
resources.multidb.dbR.dbname = "test_app1"
resources.multidb.dbR.profiler = "false"
resources.multidb.dbR.isDefaultTableAdapter = "true"

resources.multidb.dbW.adapter = "mysqli"
resources.multidb.dbW.host = "xxx.xxx.x.xx"
resources.multidb.dbW.username = "root"
resources.multidb.dbW.password = "admin"
resources.multidb.dbW.dbname = "test_app2" 
```

现在在我的模型类中，我使用以下代码行来执行任何写操作

```
class Abc_Model_ModelName extends Zend_Db_Table_Abstract
{
    protected $_dbR;
    protected $_dbW;
    protected $_name = 'table_name';

    public function init(){
        $this->_dbR = Zend_Registry::get("dbR");
        $this->_dbW = Zend_Registry::get("dbW");
    }

    public function addedit($data = array())
    {
         $this->setDefaultAdapter($this->_dbW);

    }
} 
```

谁能帮我解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-24T09:40:47.853

当您在控制器中调用模型时，您可能需要传入 db 适配器实例：

```
public function someAction() {
    $db = Zend_Registry::get("dbW");
    $model = new Abc_Model_ModelName(array('db'=>$db));
} 
```

或者您可以覆盖模型类中的构造函数：

```
public function __construct() {
   $this->_db = Zend_Registry::get("dbW");
    parent::__construct();
} 
```

数据库适配器在 Zend_Db_Table_Abstract 的构造函数中准备好：

```
/**
     * Constructor.
     *
     * Supported params for $config are:
     * - db              = user-supplied instance of database connector,
     *                     or key name of registry instance.
     * - name            = table name.
     * - primary         = string or array of primary key(s).
     * - rowClass        = row class name.
     * - rowsetClass     = rowset class name.
     * - referenceMap    = array structure to declare relationship
     *                     to parent tables.
     * - dependentTables = array of child tables.
     * - metadataCache   = cache for information from adapter describeTable().
     *
     * @param  mixed $config Array of user-specified config options, or just the Db Adapter.
     * @return void
     */
    public function __construct($config = array())
    {
        /**
         * Allow a scalar argument to be the Adapter object or Registry key.
         */
        if (!is_array($config)) {
            $config = array(self::ADAPTER => $config);
        }

        if ($config) {
            $this->setOptions($config);
        }

        $this->_setup();
        $this->init();
    } 
```

希望这可以帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-24T20:30:55.243

我相信你需要调用`$this->_setAdapter($reader);`而不是`setDefaultAdapter()`函数。

`_setAdapter`会将新适配器设置为现有的数据库表，而`setDefaultAdapter()` 只会设置从现在开始使用的默认适配器。

就像是：

```
/**
 * Returns an instance of a Zend_Db_Table_Select object.
 *
 * @param bool $withFromPart Whether or not to include the from part of the select based on the table
 * @return Zend_Db_Table_Select
 */
public function slaveSelect($withFromPart = self::SELECT_WITHOUT_FROM_PART)
{
    $reader = $this->_getMultiDb()->getRandomReadOnlyAdapter();
    $this->_setAdapter($reader);
    return parent::select($withFromPart);
} 
```

# jquery - div 的最小高度和宽度

> ID：10731624
> 
> 赞同：0
> 
> 时间：2012-05-24T05:28:00.537
> 
> 标签：jquery

我的页面中有一个可调整大小且可拖动的 div 我想限制用户将 DIV 调整为固定的最小宽度或高度，并且不能调整大小。

我确实使用以下代码尝试过，但没有帮助。请指导我解决这个问题。

```
$("#dv_move").resizable({
            resize: function () {
                var t = $(this);
                if (parseInt(t.width()) < 300 || parseInt(t.height()) < 150)
                    return false;
            }
        }); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-24T05:29:32.310

我只是用谷歌搜索“jquery resizable”，单击第一个选项，然后查看“选项”选项卡。

[http://jqueryui.com/demos/resizable/](http://jqueryui.com/demos/resizable/)

具体来说，`minWidth`和`minHeight`选项。

如果你看的话，你会发现真是太神奇了。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-24T05:31:11.187

这应该工作：

```
 $("#dv_move").resizable({
        minWidth: 300,
        minHeight: 300
    }); 
```

# qt - Qt OpenGLScene 工作示例

> ID：10731626
> 
> 赞同：0
> 
> 时间：2012-05-24T05:28:11.153
> 
> 标签：qt, opengl

我使用 OpenGLScene 作为 openGL 的包装器，我[从网上找到的最简单的示例](http://doc.qt.nokia.com/qq/qq26-openglcanvas.html)开始。我刚刚从他们有 zip 的链接中复制了所有内容。

我编译并运行程序，显然这个警告总是出现（在detailground方法中）：

```
if (painter->paintEngine()->type()
                != QPaintEngine::OpenGL) {
            qWarning("OpenGLScene: drawBackground needs a "
                     "QGLWidget to be set as viewport on the "
                     "graphics view");
            return; 
```

有谁知道为什么（我在 Mac 上）？有没有人有更“稳定”的例子？这个警告是否相关？

基本上，我想知道为什么会出现这个警告，我该如何摆脱它......

我真的不知道从哪里开始。我已经尝试了几件简单的事情（例如，使 QGLWidget 成为当前 Context），但我对 Qt 了解的不够多，无法理解何时以及如何调用 trackingground 方法。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-24T18:10:00.247

你想做什么 ？

IIRC qq26 示例在 4.7 中不起作用（尚未在 4.8 中测试）。

但是在 openGL 场景之上重绘 QWidgets 被添加到 4.8 ( [http://qt-project.org/doc/qt-4.8/opengl-overpainting.html](http://qt-project.org/doc/qt-4.8/opengl-overpainting.html) ) 而不是那个例子中的hack

编辑：在Qt中使用opengl显示很简单，只需从[QWidget](http://qt-project.org/doc/qt-4.8/qglwidget.html#details)派生并实现initializeGL、resizeGL和paintGL。有 Qt 函数来包装纹理、VBO、PBO 和所有其他 opengl 东西。请参阅发行版中的[OpenGL 示例](http://qt-project.org/doc/qt-4.8/examples-opengl.html)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-24T19:24:57.537

> Qt OpenGLScene 工作示例

[Qt 4 中的“Boxes”](http://qt-project.org/doc/qt-4.8/demos-boxes.html)演示。启动 qtdemo，选择 demo->boxes。或者全部[在线](http://qt-project.org/doc/qt-4.8/demos-boxes.html)阅读。或者阅读有关[overpainting](http://qt-project.org/doc/qt-4.8/opengl-overpainting.html)、[HelloGL](http://qt-project.org/doc/qt-4.8/opengl-hellogl.html)或任何其他[OpenGL 示例](http://qt-project.org/doc/qt-4.8/examples-opengl.html)的文档。

> 我正在尝试使用 Qt 为 OpenGL 提供一个“包装器”。使用 Qt 作为 GUI，使用 OpenGL 作为可视化

[QGLWidget](http://qt-project.org/doc/qt-4.8/QGLWidget.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-24T05:53:56.473

你有`OpenGL`或`OpenGL2`？

试试这个代码

```
 if (painter->paintEngine()->type() != QPaintEngine::OpenGL
   || painter->paintEngine()->type() != QPaintEngine::OpenGL2) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-23T07:49:39.580

我做了一个[小的 OpenGL+Qt](https://sites.google.com/site/jorgecarleitao/code-reservoir/opengl)我认为可以回答这个问题：

> 我真的不知道从哪里开始。我已经尝试了几件简单的事情（例如，使 QGLWidget 成为当前 Context），但我对 Qt 了解的不够多，无法理解何时以及如何调用 trackingground 方法。

我认为它可以帮助在我提出这个问题时处于我所处位置的人。

# php - 从一页到另一页通信？JavaScript，PHP？

> ID：10731627
> 
> 赞同：2
> 
> 时间：2012-05-24T05:28:15.093
> 
> 标签：php, javascript

我正在构建一个原型，其中一页 AI 有一个控制器。想象一个电视遥控器。在另一个页面 B 上，与表单 A 无关——它可以是不同的屏幕/计算机——其中一些元素 X、Y 和 Z 将由页面 A 上的遥控器进行动画处理。

我的第一个想法是：

*   页面 A 上的远程保存所需的操作并发送 JSON。
*   我在页面 B 上创建了一个侦听器，它读取 JSON 以侦听要触发的操作。

我想知道这是否是正确的方向。

它只是一个原型，所以它不一定是一个生产完美的想法。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-24T05:30:59.223

您可以为此使用[网络套接字](http://caniuse.com/#feat=websockets)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-24T05:38:13.023

假设您使用 2 台计算机，都指向网站，因为这种技术在这两种情况下都适用。

如果它只是一个原型，你可以让你的页面 B 每 5 秒轮询一次服务器以查找页面 A 提交的更新。

然而，实际上，对于拥有数千名用户的生产应用程序，这可能会消耗大量带宽并给您的服务器带来沉重的负载。为了补偿负载和带宽使用，您可以将轮询速率提高到 10 秒或 30 秒，但是为了响应此更改，您的用户在等待浏览器从服务器请求更新时会遇到延迟。

在生产应用程序中，许多开发人员正在转向 Comet 作为解决方案。Comet 基本上是 Alex Russell 给出的一个术语，指的是一种涉及使用请求/响应周期来模拟服务器推送的技术。

一般的想法是浏览器向服务器发出请求，服务器无限期地保持该连接打开。连接保持打开状态，直到另一个用户向服务器发布更新，在这种情况下，服务器然后向连接的用户发送响应。

Dojo 和 Jetty 团队进行了演示，他们表明在使用延续时，这种技术可以扩展到 20,000 个连接。

虽然我认为您可以使用数据库和/或一些会话变量很好地进行实验，但如果您想了解更多关于 PHP 上的 Comet 的信息，请查看[如何使用 PHP 实现 Comet](http://www.zeitoun.net/articles/comet_and_php/start)。祝你好运！

**更新：**

我还想说，对于如何从概念上考虑使用 JSON 传递的消息，您*绝对有正确的想法：*

> *   我在页面 B 上创建了一个侦听器，它读取 JSON 以侦听要触发的操作。

我真的很喜欢你如何考虑传递一条*消息*，然后告诉页面要触发什么操作。如果您考虑一下，您可以重用您的消息传递概念来调用其他命令，这样您就可以避免在需要调用的新命令出现时重新发明轮子。无论您是轮询、使用 Comet 还是使用 WebSockets，考虑抽象和通用、可重用的数据传输都是一个好主意。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-24T05:33:30.107

您可以通过轮询（让页面 B 不断轮询来自服务器的更新）或使用服务器推送技术（如服务器发送的事件或 websockets）来做到这一点。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-24T05:44:49.523

使用 cron 作业每 x 单位时间执行页面 B 将使您检查页面 A 中任何最新更新的 json（根据您的逻辑查询/返回的输出）。这样，您可以使用页面 A 中的新更新 json 并执行您的进一步的任务...

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-24T05:34:53.323

是的，那会奏效。您也可以像制作矢量线动画一样制作它。将移动的“命令”发送到服务器并记录它们（在数据库、文件等中），然后客户端程序可以随时随地请求和重绘移动。

# facebook - 提要发布后 Facebook 分享对话框未关闭

> ID：10731632
> 
> 赞同：1
> 
> 时间：2012-05-24T05:28:50.813
> 
> 标签：facebook, facebook-javascript-sdk

我有一个提要帖子 JS，如下所示。

```
var feedObj = {
    method: 'feed',
    link: link,
    picture: imagelink,
    name: name,
    caption: caption,
    description: description,
    redirect_uri: "http://"+(window.location.host)+"/",
    next:null,
    app_id: appid,
    actions: [
        { name: text, link: link }
    ]
};

function callback(response) {
    if(response){
    }
}
facebook.ui(feedObj, callback); 
```

如何确保点击发布的提要对话框自动关闭？
我注意到回调并不总是被触发，下面的这种尝试并不总是有效

```
function callback(response) {
    if(response){
        facebook.Dialog.remove(facebook.Dialog._active);
    }
} 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-06T10:23:01.187

我有一个简单的技巧来关闭这个对话框。这不是做这类工作的好方法，但对我来说效果很好。

首先，您必须在您的服务器上创建一个页面（例如`closewindow.aspx`）并将此代码粘贴到您页面的正文部分。

```
<script src="js/jquery.js" type="text/javascript"></script>
<script>
  $().ready(function() { window.close(); });
</script> 
```

比设置`redirect_uri`参数属性到这个页面，比如：

```
redirect_uri=http://www.yousitename.com/closewindow.aspx 
```

现在这一次在对话框中，该页面将被称为redirecturl，并且该对话框将在页面加载时自动关闭。

我知道这可能很棘手，但你知道让它工作时的感觉。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-24T09:26:36.747

根据[文档](https://developers.facebook.com/docs/reference/dialogs/feed/)， next 不是参数。

我知道没有调用 redirect_uri 回调。由于大多数 SDK 都支持 redirect_uri，因此您无需使用它。

[演示](http://www.fbrell.com/saved/cd2bfe9dbd3a6b93abce80ee10c23f93)

希望这可以帮助

# iphone - 如何在 iPhone 应用程序中声明一个全局 int

> ID：10731639
> 
> 赞同：3
> 
> 时间：2012-05-24T05:29:18.177
> 
> 标签：iphone, objective-c, xcode

我正在 iPhone 应用程序中创建一个全局 int 变量，但它给出了错误。

我以这种方式声明：

```
 AppDelegate.h

 int maxglobal; 
```

当我将它分配给任何其他值时，它说对象不能设置为其他类中的属性。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-24T05:40:35.317

尝试以下操作：

```
AppDelegate.h:
@interface AppDelegate{
    int maxglobal;
}
@property (nonatomic, readonly) int maxglobal;

AppDelegate.m
@implementation AppDelegate
@synthesize maxglobal; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-24T05:31:32.537

目标-C：

```
@property (assign) int maxglobal; // define this in app delegate 
```

C：

```
int maxglobal; // define this outside any class and it's "global" 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-24T05:35:04.633

在您的 .h 文件中执行此操作

`double GlobalVariable=0.0;`

请注意您在上面执行此`@synthesize`操作，您就完成了:)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-24T06:47:42.430

您还可以使用 extern 关键字将变量声明为全局变量

```
extern int maxglobal; 
```

# java - Java 中的拼写检查和/或拼写更正

> ID：10731645
> 
> 赞同：7
> 
> 时间：2012-05-24T05:29:40.873
> 
> 标签：java, nlp, spell-checking, languagetool

如何在 Java 应用程序中进行拼写检查和/或拼写更正？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-24T05:33:29.000

Google 的拼写检查器[http://code.google.com/p/google-api-spelling-java/](http://code.google.com/p/google-api-spelling-java/)

```
 SpellChecker checker = new SpellChecker();

 SpellResponse spellResponse = checker.check( "helloo worlrd" );

 for( SpellCorrection sc : spellResponse.getCorrections() )
    System.out.println( sc.getValue() ); 
```

这很像当您使用 Gmail 或 Google 服务（例如 translate.google.com 或搜索）时，如果您有错字，它会为您提供替代建议。

> **后台发生了什么？**
> 
> SpellChecker 类将请求转换为 XML 并将其发送到 Google 的拼写检查服务。响应也是 XML 格式的，然后将其反序列化为简单的 POJO。
> 
> 对上面第一个示例的请求如下所示：
> 
> ```
>  <?xml version="1.0" encoding="UTF-8" standalone="yes"?> 
>   <spellrequest textalreadyclipped="0" ignoredigits="1" 
>                           ignoreallcaps="1" ignoredups="0">
>     <text>helloo worlrd</text>  
>   </spellrequest> 
> ```
> 
> 响应 XML 如下所示：
> 
> ```
>  <?xml version="1.0" encoding="UTF-8"?>  
>   <spellresult error="0" clipped="0" charschecked="13">
>      <c o="0" l="6" s="1">hello  Helli   hell    hallo   hullo</c>
>      <c o="7" l="6" s="1">world  whorled wold    warlord would</c>  
>   </spellresult> 
> ```

不过没试过。

* * *

**更新：**
谷歌可能已经开始为此收费。我没有时间编写代码来检查这一点。有人可以确认。就谷歌而言，他们似乎已经弃用了旧的 API 来使用新的和付费的 API。

参考：[谷歌翻译 API 常见问题](https://developers.google.com/translate/v2/faq)

> **早期免费版本的 Translate API 发生了什么变化？**
> 自 2011 年 12 月 1 日起，Google Translate API v1 不再可用，并已被 Google Translate API v2 取代。Google Translate API v1 于 2011 年 5 月 26 日正式弃用。决定弃用 API 并将其替换为付费服务是由于广泛滥用造成的巨大经济负担。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-24T05:50:27.427

您可以使用[JOrtho](http://jortho.sourceforge.net/)。我之前在其中一个摇摆应用程序中使用过它。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-07-28T01:09:24.700

[Jazzy](http://sourceforge.net/projects/jazzy/)是一个很好的离线解决方案。试试这个[例子](http://jazzy.cvs.sourceforge.net/viewvc/jazzy/jazzy/src/com/swabunga/spell/examples/SpellCheckExample.java?view=markup)并下载[字典](http://sourceforge.net/projects/jazzy/files/Dictionaries/)。

这是库的[Maven 依赖](http://search.maven.org/#search%7Cgav%7C1%7Cg%3a%22net.sf.jazzy%22%20AND%20a%3a%22jazzy%22)项：

```
<dependency>
    <groupId>net.sf.jazzy</groupId>
    <artifactId>jazzy</artifactId>
    <version>0.5.2-rtext-1.4.1-2</version>
</dependency> 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2014-09-21T07:36:52.013

Languagetool 是可能适合的基于 Java 的拼写检查和校对软件。看

*   [https://www.languagetool.org/](https://www.languagetool.org/)
*   [http://wiki.languagetool.org/java-api](http://wiki.languagetool.org/java-api)
*   [https://stackoverflow.com/questions/tagged/languagetool](https://stackoverflow.com/questions/tagged/languagetool)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-05-31T07:51:25.007

试试 Hunspell。它是拼写检查的标准。您可以使用Hunspell 的[Java 端口，](http://dren.dk/hunspell.html)即 Hunspell-c+ JNA

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2014-09-12T22:31:40.567

如果您想要一个简单且离线的解决方案，基于[Peter Norvig 对](http://norvig.com/spell-correct.html)Google 拼写校正器的解释，请查看此处：[http ://raelcunha.com/spell-correct.php](http://raelcunha.com/spell-correct.php)

# android - 如何使用 HTML 标签在 android 的 EditText 中格式化文本

> ID：10731647
> 
> 赞同：1
> 
> 时间：2012-05-24T05:29:54.993
> 
> 标签：android, html

我的代码看起来像这样

```
txtData=(EditText)findViewById(R.id.textbox);
txtData.setText(Html.fromHtml("<b><html></b>")); 
```

如您所见，我正在尝试使 HTML 代码出现在 EditText 框中。我正在尝试使用 HTML 标记使用 Html.fromHtml() 方法来格式化出现在框中的 HTML 代码。我需要找到一种方法来避免单词 html 周围的“<”和“>”标签被 fromHtml 方法处理。关于如何做到这一点的任何建议？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-24T05:38:59.093

试试这个：

```
txtData.setText(Html.fromHtml("<b>&#60;html&#62;<b>")); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-24T05:39:17.453

试试这个：

```
txtData=(EditText)findViewById(R.id.textbox);
txtData.setText(Html.fromHtml("<b>&#60;html&#62;</b>")); 
```

或者

```
txtData=(EditText)findViewById(R.id.textbox);
txtData.setText(Html.fromHtml("<b>&lt;html&gt;</b>")); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-24T05:40:31.243

你应该使用

```
 &lt; 
```

和

```
 &gt; 
```

如本例所示

```
txtData.setText(Html.fromHtml("<b>&lt;html&gt;</b>")); 
```

# .htaccess - .htaccess 重定向到文件夹和子文件夹

> ID：10731648
> 
> 赞同：1
> 
> 时间：2012-05-24T05:29:56.883
> 
> 标签：.htaccess, redirect

我遇到了 htaccess 重定向问题。以下是我遇到的问题。

主域实际指向的根文件夹具有以下文件夹：“example”example.com 实际上在内部链接到路径“root/example/”而不是“root/”。这是使用以下 htaccess 代码完成的

```
RewriteEngine on
RewriteCond %{HTTP_HOST} ^(www.)?example.com$
RewriteCond %{REQUEST_URI} !^/example/
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule ^(.*)$ /example/$1
RewriteCond %{HTTP_HOST} ^(www.)?example.com$
RewriteRule ^(/)?$ example/index.html [L] 
```

文件夹“exmaple”有以下子文件夹：newexample、newexample_beta 如果我转到 URL“example.com/newexample”，则该 URL 需要在内部链接到“root/example/newexample”。但是 URL 将我重定向到“example.com/example/newexample/”，请告诉我需要做什么

# sql-server - 如何在 IBM Websphere 应用服务器中配置 SQL Server 命名实例

> ID：10731651
> 
> 赞同：0
> 
> 时间：2012-05-24T05:30:20.260
> 
> 标签：sql-server, websphere, named-instance

谁能帮我在 IBM Websphere Application server 中配置 SQL Server 命名实例？

问候 Gopinathan K. Munappy

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-09-09T15:20:19.933

尝试：

> 服务器名称：“ **IPAddressServer\instanceName** ”

在**Data Source Configuration的****Common and required data source 属性**中，它适用于 WAS 8.0.0.3。

 *** * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-28T19:45:16.447

请参阅 WAS 7 管理和配置指南的访问数据库章节的第 24 页[示例：连接到 SQL Server 数据库](http://www.redbooks.ibm.com/redpapers/pdfs/redp4577.pdf)，它为您提供分步说明。

根据您将使用的 JDBC 驱动程序和您将定义的数据源类型（XA / nonXA），您将有不同的选项。这些选项和相应的配置参数 在信息中心的 Microsoft SQL Server文档的[数据源最低要求设置中进行了概述。](http://pic.dhe.ibm.com/infocenter/wasinfo/v7r0/topic/com.ibm.websphere.express.doc/info/exp/ae/rdat_minreqmssql.html)**

# php - 将 Facebook 应用程序移至新服务器，现在已损坏

> ID：10731655
> 
> 赞同：0
> 
> 时间：2012-05-24T05:31:03.310
> 
> 标签：php, javascript, facebook

我的应用程序在我的服务器上运行良好。我将它移到另一台服务器，更新了developers.facebook.com 中的所有应用程序设置，现在我得到的只是一个空白页面。服务器的 error_log 显示此错误。

[2012 年 5 月 23 日星期三 22:20:01] [错误] [客户端 184.65.142.249] PHP 警告：未知：无法打开流：第 0 行的未知权限被拒绝，引用者：[http://static.ak.facebook。 com/platform/page_proxy.php?v=4](http://static.ak.facebook.com/platform/page_proxy.php?v=4) [2012 年 5 月 23 日星期三 22:20:01] [错误] [客户端 184.65.142.249] PHP 致命错误：未知：需要打开失败'/var/www/html/explorebc/ home.php' (include_path='.:/usr/share/pear:/usr/share/php') 在第 0 行的 Unknown，引用者：[http ://static.ak.facebook.com/platform/page_proxy.php ?v=4](http://static.ak.facebook.com/platform/page_proxy.php?v=4)

我已经到处寻找答案，我真的可以使用某人的帮助来推动正确的方向。

路径正确，facebook 设置正确，init 调用在那里，配置文件已更新为新的服务器路径。

干杯，

科迪

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-24T05:40:12.663

您应该确保为文件设置了正确的权限。[[来源]](http://www.000webhost.com/forum/customer-assistance/19975-fatal-error-unknown-failed-opening-required-www-cjenovnik-comoj-com-index-php-i.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-15T17:36:51.583

是 SELinux 阻止了该站点的正常运行。它与代码或方向无关，只是简单地阻止了工作。

# windows - %TEMP% 和 %TMP% 是否为运行终端服务的计算机引用不同的位置

> ID：10731661
> 
> 赞同：2
> 
> 时间：2012-05-24T05:31:14.150
> 
> 标签：windows, windows-server-2008, temporary-files, group-policy

运行终端服务的 Windows 2000 计算机为每个终端会话创建一个临时文件夹，并将十六进制值附加到由环境变量 %TEMP% 描述的临时文件夹名称。

参考

[终端服务临时文件夹配置存储在多个注册表位置](http://support.microsoft.com/kb/243555)

[临时文件夹](http://technet.microsoft.com/en-us/library/cc732258%28v=ws.10%29.aspx)

[为每个会话使用单独的临时文件夹](http://technet.microsoft.com/en-us/library/cc759190%28v=ws.10%29.aspx)

我的问题是 %TMP% 的行为方式是否与 %TEMP% 类似，或者它指的是不同的位置（%TEMP% 的父目录）。

**注意**我知道人们会倾向于说这个问题与 SU​​ 有关，但我试图在我的程序中使用环境变量作为临时存储。所以这使它成为一个编程问题。问题是，一旦用户日志创建问题导致服务崩溃，就会删除 TEMP 文件夹。好的，我知道这不是使用临时商店的好解决方案，但我们只是在寻找一个短期解决方案，直到我们想出更好的解决方案。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-24T05:38:42.960

**[TorgoGUy](https://stackoverflow.com/users/44318/torgoguy)**回答了一个类似的问题：

**[Vista 环境变量中的 %TMP% 和 %TEMP% 有什么区别？](https://stackoverflow.com/questions/581966/whats-the-difference-between-tmp-and-temp-in-vista-environment-variables)**

> **这是为了兼容性**。它一直回到DOS。由于没有标准，一些 DOS（和 Win 3.x）应用程序会寻找**%TMP%**环境变量，而其他应用程序会寻找**%TEMP%**。如果将它们都设置在 AUTOEXEC.BAT 文件中，则最好。
> 
> Windows NT 自动设置它们，只是为了确保所有应用程序继续正常工作。**%TEMP%**现在是标准，但**%TMP%**仍然存在。

是的，两个变量**%TMP%**和**%TEMP%**都指向同一个位置`%WinDir%\Temp\`

希望这可以帮助。

# php - 如何使用 jQuery Datepicker 比较开始日期和结束日期？

> ID：10731668
> 
> 赞同：2
> 
> 时间：2012-05-24T05:32:03.167
> 
> 标签：php, jquery, ajax, jquery-ui-datepicker

我将 jQuery`Datepicker`用于两个不同的文本字段。一个字段用于开始日期，另一个字段用于结束字段。我使用禁用当前日期之前的日期`minDate`。我的代码是这样的：

```
$( "#start" ).datepicker({
    minDate: 0,
    dateFormat: 'yyyy-mm-dd',
    showOnFocus: true,
    showTrigger: '<img src="<?php echo base_url()?>images/calender.png" />'
});    

$( "#end" ).datepicker({
    minDate: 0,
    dateFormat: 'yyyy-mm-dd',
    showOnFocus: true,
    showTrigger: '<img src="<?php echo base_url()?>images/calender.png" />'
}); 
```

现在我需要检查结束日期是否必须等于或大于开始日期。在结束日期字段中，必须禁用所选开始日期之前的所有日期。如何做呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-24T06:18:36.637

这是所需代码的示例。

```
<script>
    $(function() {
        var dates = $( "#from, #to" ).datepicker({
            defaultDate: "+1w",
            changeMonth: true,
            numberOfMonths: 3,
            onSelect: function( selectedDate ) {
                var option = this.id == "from" ? "minDate" : "maxDate",
                    instance = $( this ).data( "datepicker" ),
                    date = $.datepicker.parseDate(
                        instance.settings.dateFormat ||
                        $.datepicker._defaults.dateFormat,
                        selectedDate, instance.settings );
                dates.not( this ).datepicker( "option", option, date );
            }
        });
    });
    </script> 
```

您可以在以下位置查看演示：[Datepicker](http://jqueryui.com/demos/datepicker/#date-range)

引用自 Jquery UI 网站。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-25T04:25:22.910

首先感谢所有帮助我找到答案的人。

我的问题的解决方案是使用以下代码：

```
$(document).ready(function(){
  $("#depart ,#return_date").datepick({
    minDate:0,
    dateFormat:'yyyy-mm-dd',
    showOnFocus: true,
    showTrigger: '<img src="<?php echo base_url()?>images/calender.png" />',
    onSelect: customRange
  });

  function customRange(dates) {
    if (this.id == 'depart')
    {
      $('#return_date').datepick('option', 'minDate', dates[0] || null);
    }
    else
    {
      $('#depart').datepick('option', 'maxDate', dates[0] || null);
    }
  }
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-24T05:37:06.020

使用 datejs 库进行复杂的与日期相关的操作 --> datejs.com

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-24T06:18:41.053

当开始日期更改时，您需要重置结束日期。这应该这样做。

```
<script type="text/javascript">
    $(document).ready(function () {
        $('#start').datepicker({
            minDate: '-1d',
            dateFormat: 'yy-mm-dd',
            showTrigger: '<img src="<?php echo base_url()?>images/calender.png" />'
        });

        $('#end').datepicker({
            minDate: '-1d',
            dateFormat: 'yy-mm-dd',
            showTrigger: '<img src="<?php echo base_url()?>images/calender.png" />'
        });

        $('#start').change(function () {
            var sDate = $('#start').val().split("-");
            var endMinDate = new Date(sDate[0], sDate[1] - 1, sDate[2]);
            $('#end').datepicker('option', 'minDate', endMinDate);
        });
    }); 
</script> 
```

# java-me - 如何防止j2me中的屏幕旋转？

> ID：10731669
> 
> 赞同：0
> 
> 时间：2012-05-24T05:32:07.543
> 
> 标签：java-me, rotation

我正在用 j2me 编程。对于所有支持屏幕旋转的手机，如何防止 j2me 中的屏幕旋转？

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-25T11:50:02.053

如果您使用 Canvas 绘制屏幕（不是 LCDUI，不是 LWUIT，不是任何其他框架），您可以实现 sizeChanged 方法以在发生旋转时得到通知。

在这种情况下，您可以将屏幕绘制到图像并使用 Sprite 旋转它。例如，为了只支持横向模式，我在构造函数中使用了以下代码：

```
    int width = Math.max(super.getWidth(), super.getHeight());
    int height = Math.min(super.getWidth(), super.getHeight());
    // screen 和 sprite 是属性
    屏幕 = Image.createImage（宽度，高度）；
    精灵 = 新精灵（屏幕）；
    if (super.getWidth() < super.getHeight()) { // 竖屏
        sprite.setTransform(Sprite.TRANS_ROT90);
        sprite.setPosition(0, 0);
    }

```

以及以下方法：

```
    公共无效 sizeChanged (int w, int h) {
        // lastWidth 和 lastHeight 是属性
        最后宽度 = w;
        最后高度 = h;
        如果（精灵 == null）返回；
        if (super.getWidth() < super.getHeight()) { // 竖屏
            sprite.setTransform(Sprite.TRANS_ROT90);
        } 别的 {
            sprite.setTransform(Sprite.TRANS_NONE);
        }
        sprite.setPosition(0, 0);
    }

    受保护的空漆（图形g1）{
        if (super.getWidth() != lastWidth
            || super.getHeight() != lastHeight) {
            sizeChanged(super.getWidth(), super.getHeight());
        }
        图形 g = screen.getGraphics();
        // ... 在 g 上绘图
        this.sprite.setImage(screen, screen.getWidth(), screen.getHeight());
        sprite.paint(g1);
    }

```

如[http://smallandadaptive.blogspot.com.br/2009/08/fullscreen-landscape.html](http://smallandadaptive.blogspot.com.br/2009/08/fullscreen-landscape.html)和[http://smallandadaptive.blogspot.com.br/2010/03/adapting-to-sizechanged.html](http://smallandadaptive.blogspot.com.br/2010/03/adapting-to-sizechanged.html)和[http ://smallandadaptive.blogspot.com.br/2011/04/sizechanged-not-called.html](http://smallandadaptive.blogspot.com.br/2011/04/sizechanged-not-called.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-25T11:51:53.927

添加到清单

对于诺基亚设备： *Nokia-MIDlet-App-Orientation：横向*

对于三星设备： *MIDlet-ScreenMode : Landscape*

# c++ - 如何在 Eclipse 中编译使用子文件夹的项目？

> ID：10731679
> 
> 赞同：0
> 
> 时间：2012-05-24T05:33:38.857
> 
> 标签：c++, eclipse, include

我正在尝试从一个由 make 编译的大型开源项目编译 eclipse 中的两个文件夹。我有两个文件夹 opencog/server 和 opencog/atomspace。问题是包含引用大型项目​​中的子文件夹

例如 #include "opencog/server/Factory.h" 而不是 #include "Factory.h"

所以 eclipse 寻找 opencog/server/opencog/server/Factory.h 而不是 opencog/server/Factory.h

有没有办法在不改变包含的情况下解决这个问题？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-24T06:20:49.773

如果您已经`myfolder/opencog/server`添加`myfolder`到包含搜索路径。

# iphone - 自动旋转、iOS和iPad的回调方法

> ID：10731681
> 
> 赞同：2
> 
> 时间：2012-05-24T05:33:53.583
> 
> 标签：iphone, ipad, callback, autorotate

我正在开发 iPhone 游戏，我很想知道当设备强制游戏自动旋转时是否会调用回调函数，以便我可以更改 HUD 元素。

或者我运行无限循环来检查应用程序是否在不同的线程中旋转？问题是我不认为这是一种有效的方法。有没有人对此有任何好的解决方案。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-24T05:44:04.457

您所要做的就是：

在你`didfinishlaunching`写这个

`[[UIDevice currentDevice] beginGeneratingDeviceOrientationNotifications]; [[NSNotificationCenter defaultCenter] addObserver:self selector:@selector(didRotate:) name:UIDeviceOrientationDidChangeNotification object:nil];`

然后复制下面的回调方法

```
- (void) didRotate:(NSNotification *)notification
{   
    UIDeviceOrientation orientation = [[UIDevice currentDevice] orientation];

    if (orientation == UIDeviceOrientationLandscapeLeft)
    {
        NSLog(@"Landscape Left!");
        self.isLandscapeLeft=1;
    }else if(orientation == UIDeviceOrientationLandscapeRight){
         NSLog(@"Landscape Right!");
        self.isLandscapeLeft=0;
    }
} 
```

同样，您可以检查肖像模式的方向，面朝上，面朝下，倒置以及横向左和横向右方向。:)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-24T05:45:31.607

是的，只要设备未锁定方向，您就可以注册收听

> UIDeviceOrientationDidChangeNotification

可以在这里看到[http://developer.apple.com/library/ios/#documentation/uikit/reference/UIDevice_Class/Reference/UIDevice.html](http://developer.apple.com/library/ios/#documentation/uikit/reference/UIDevice_Class/Reference/UIDevice.html)

如果您想克服设备被锁定的可能性，那么您必须手动监控设备的加速度计。

在需要定位的游戏中，建议手动监控，因为第一种方法有一点延迟。

# postgresql - Postgresql 9.0 默认运行在 bg 中

> ID：10731682
> 
> 赞同：2
> 
> 时间：2012-05-24T05:33:56.753
> 
> 标签：postgresql, freebsd

我发现postgresql v9.0.7在启动时默认以bg模式运行（命令如下）。早些时候，当我们使用 postgresql v7.4.2 时，它曾经在前台模式下运行。

我使用的是freebsd 8.2 64位环境。Postgresql v9.0.7 是使用 WITHOUT_XML、 WITHOUT_GETTEXT 和 WITHOUT_GNUGEOPT 选项集构建的。

c670e04:rkananth 16] /usr/local/bin/postgres --version postgres (PostgreSQL) 9.0.7

```
c670e04:rkananth 7] setenv PGDATA /data/db/postgres/
c670e04:rkananth 11] /data/bin/runas pgsql /usr/local/bin/postgres
c670e04:rkananth 12] ps -A | grep post
65165  ??  Ss     0:00.01 /usr/local/bin/postgres
65167  ??  Ss     0:00.00 postgres: writer process    (postgres)
65168  ??  Ss     0:00.00 postgres: wal writer process    (postgres)
65169  ??  Ss     0:00.00 postgres: autovacuum launcher process    (postgres)
65170  ??  Ss     0:00.00 postgres: stats collector process    (postgres)
65224   0  S+     0:00.00 grep post

c670e04:rkananth 14] ps -p 65165 -o ppid
 PPID
    1
c670e04:rkananth 15] ps 1
  PID  TT  STAT      TIME COMMAND
    1  ??  SLs    0:00.17 /sbin/init --
c670e04:rkananth 16] 
```

有什么办法可以强制它出现在前台？

还查看上面的日志，它显示服务器进程的父进程设置为 1（初始化）是服务器在 bg 模式下运行时的预期行为吗？

但是 9.0.7 的文档说默认情况下它应该出现在前台。为什么在我的情况下没有发生这种情况，可能是一个错误？

**更新 1：** /data/bin/runas 没有引入任何行为更改，没有它进行测试。在 v8.3 和 Freebsd 7.2 32 位环境中也可以看到相同的行为。

服务器进程成为 PID 1 ( init ) 的子进程看起来就像任何应用程序作为守护进程运行的标准行为。

我现在的问题是 - 有没有办法可以指示 Postgres 不要作为守护进程运行？

**更新 2：** 得到的解决方案是配置“silent_mode = off”（默认情况下它是打开的）将使其在前台运行，并且进程作为 shell 的子进程运行。有了这个问题就回答了。（来源 - [http://postgresql.1045698.n5.nabble.com/BUG-4381-Postgresql-daemon-won-t-stay-in-the-foreground-td2127518.html](http://postgresql.1045698.n5.nabble.com/BUG-4381-Postgresql-daemon-won-t-stay-in-the-foreground-td2127518.html)）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-24T06:20:47.027

确实，`postgres`应该留在前台，如联机帮助页中所述：

> 默认情况下，postgres 在前台启动并将日志消息打印到标准错误流。在实际应用中，postgres 应该作为后台进程启动，可能在启动时启动。

`runas`该命令很可能是进程的守护`postgres`进程。尝试`postgres`从以用户身份启动的 shell运行`pgsql`：

```
root# su - pgsql
pgsql$ setenv PGDATA /data/db/postgres/
pgsql$ /usr/local/bin/postgres 
```

如果您不喜欢将 shell 作为用户的想法`su(1)`，您也可以尝试使用。`sudo(8)``pgsql`

现在我想知道为什么你需要`postgres`在前台运行。你真的有充分的理由吗？

# flash - adobe flash .as 文件的 GitHub 差异

> ID：10731687
> 
> 赞同：1
> 
> 时间：2012-05-24T05:34:33.977
> 
> 标签：flash, git, github, adobe, newline

每当在 adobe flash cs5.5 中更改文件时，它都会使用 CR (^M) 作为换行符。因为这个 github 将整个文件视为一行，并且差异不起作用。我有非技术人员从事这个项目，所以我需要在 github 上清理差异。

如何配置 git、github 或 flash，以便按行而不是整个文件比较差异？

我试过 core.whitespace 和 core.autocrlf 修复无济于事。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-24T07:27:58.150

尝试查看声明这些文件的[`.gitattributes`文件](http://schacon.github.com/git/gitattributes.html)`*.yourext eol=lf`是否有助于在提交时获取具有正确 EOL 的文件。
（`*.yourext`是所有带有“您的扩展名”的文件，即在adobe flash cs5.5中更改的文件的正确扩展名）

这样，您就可以影响您需要使用正确 EOL 获得的文件的 EOL *。*

如果这不起作用，请尝试像“ [git-diff to ignore`^M`](https://stackoverflow.com/questions/1889559/git-diff-to-ignore-m) ”中描述的那样对脚本进行版本控制，并要求您的用户在他们的配置中添加[内容过滤器驱动程序](https://stackoverflow.com/questions/2316677/can-git-automatically-switch-between-spaces-and-tabs/2316728#2316728)。

![内容过滤器驱动程序](../Images/f4eec89bce9a127b6d5b3d4f486dd992.png)

请注意，此脚本不会在参数中包含这些文件的路径，因此它必须能够[识别它们的内容](https://stackoverflow.com/questions/2059326/git-equivalent-of-subversions-url-keyword-expansion/2059393#2059393)（除非您想尝试盲目地转换*所有*文件）

# .htaccess - .htaccess 重定向如果文件存在

> ID：10731689
> 
> 赞同：0
> 
> 时间：2012-05-24T05:34:39.203
> 
> 标签：.htaccess

我有这样的目录结构

```
/ub/
/ub/img/
/ub/inc/ 
```

基本上我想将我的`img`URL 更改为它的父目录`(ub)`，

当我访问`http://localhost/ub/mypic.jpg`

首先，它必须检查`/ub/img/mypic.jpg`，如果存在则获取该文件并传递给浏览器，如果不存在则只需将其传递给 `http://localhost/ub/index.php?img=mypic.jpg`内部重定向。

其次，index.php 将创建`mypic.jpg`并将其存储到`/ub/img/`，然后传递`mypic.jpg`给浏览器。

因此，无论文件是否存在，浏览器都只会有`http://localhost/ub/mypic.jpg`作为 URL

到目前为止，我的 .htaccess 文件中有这个

```
Options +FollowSymLinks
RewriteEngine on

RewriteCond %{DOCUMENT_ROOT}/ub/img/$1 -f
RewriteRule .+ /ub/img/$1 [L] 
```

我有 2 天的时间来找出解决方案，但是，它似乎不起作用，

谢谢，

**编辑 ：**

嘿，我有这个，请求`http://localhost/ub/app/file.php`已经`index.php?uri=app/file.php`按我的预期传递给了，

但请求`http://localhost/ub/img/mypic.jpg`未传递给`index.php?uri=img/mypic.jpg`. 有什么解决办法吗？

```
Options -MultiViews +FollowSymLinks 
RewriteEngine On
RewriteBase /ub/

RewriteCond %{REQUEST_URI} ([^/]+)$
RewriteCond %{DOCUMENT_ROOT}ub/img/%1 -f
RewriteRule ^(.+)$ img/%1 [L]

RewriteCond %{REQUEST_URI} ([^/]+)$
RewriteCond %{DOCUMENT_ROOT}ub/inc/%1 -f
RewriteRule ^(.+)$ inc/%1 [L]

RewriteRule ^(.+)$ index.php?uri=$1 [QSA,L] 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-24T06:32:18.363

尝试这样的事情（将它放在 /ub 文件夹中的 .htaccess 中）：

```
Options +FollowSymLinks
RewriteEngine on
RewriteBase /ub/

RewriteCond %{REQUEST_URI} ([^/]+\.jpg)$
RewriteCond %{DOCUMENT_ROOT}/ub/img/%1 -f
RewriteRule .+ - [L]

RewriteRule ^(.*)$ index.php?img=$1 
```

# java - java中的时间范围

> ID：10731691
> 
> 赞同：3
> 
> 时间：2012-05-24T05:34:53.147
> 
> 标签：java

在 Java 中，有没有办法将时间范围存储为关键`Hashmap`？我有一个`HashMap`，我存储时间范围。例如：
我输入 0-50 范围作为键，对于该键，我将存储一些其他对象作为值。现在，当我说 10 时，我应该能够获得该键的相应值。
0-50 之间的任何值都应该得到该对象。

```
Map map = new HashMap();
map.put(0-50,"some object")
map.put(51-100,"some other object") 
```

现在当我说它`map.get(10)`应该能够得到“某个对象”时。请建议如何做到这一点？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-24T05:56:34.653

我不会使用地图，而是尝试使用[R-Tree](http://en.wikipedia.org/wiki/R-tree)。R 树是为索引空间数据而创建的树结构。它存储矩形。它通常用于测试一个点（坐标）是否位于另一个几何图形中。这些几何形状由矩形近似，并且存储在树中。

要存储一个矩形（或有关它的信息），您只需要保存左下角和右上角的坐标。在您的情况下，这将是时间跨度的下限和上限。你可以把它想象成坐标的所有y值都是0。然后你可以用你的时间值查询树。

当然，您会保存每片叶子的值（时间跨度/矩形）

在 google 上进行简单的搜索，得到`r-tree java`了一些有前途的结果。实现自己的 R-tree 并非易事，但如果您了解在插入/删除时重新排列树的原理，它并不会太复杂。在您的一维情况下，它可能会变得更加简单。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-24T05:59:26.027

假设：非重叠范围。

您可以将范围的起点和终点存储在 TreeSet 中。起点和终点是分别存储开始时间和结束时间的对象，加上（对）对象的引用。您必须定义比较函数，以便对象按时间排序。

可以通过 TreeSet 的 floor() 或 ceiling() 函数获取对象。

请注意，范围不应重叠，即使在端点处（例如 3-6 和 6-10）

这将为您提供范围插入和查询的日志复杂性。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-24T05:56:23.827

如果这是一个非重叠且距离相等的范围，即范围被 50 分割，您可以通过维护最大数字的散列来解决此问题，例如

50 - '一些对象'，100 - '一些其他对象'，等等。

如果输入为 10，则导出 50 的直接倍数并获取该键的值。

您可以立即达到 50 的倍数

1.  输入模式为输入 90 即 90 % 50 = 40
2.  用 50 计算第 1 步结果的差异。即 50 - 40 = 10
3.  将第 2 步结果添加到输入，即 90 + 10 = 100

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-24T05:42:08.793

您需要将范围映射到单个键，为什么不使用 rangemanager 对象之类的东西，它返回例如键 1 的最小值和最大值之间的任何值。或者，您可以使用 for 循环将 someobject 作为 1 到 50 之间所有键的值，但这在我看来是一种浪费。

# javascript - Javascript 默认隐藏列

> ID：10731693
> 
> 赞同：2
> 
> 时间：2012-05-24T05:34:59.610
> 
> 标签：javascript, html-table, show-hide

在线浏览有关 Javascript 显示/隐藏的教程后，我只能找到所有列默认可见的示例。我正在寻找一种方法来默认隐藏某些列（并允许通过复选框打开它们）并默认显示一些列（并允许通过复选框将它们关闭）。

这可能吗？

作为参考，我的表结构如下：

```
<table>
  <thead>
<tr>
  <th>Name</th>
  <th>Job</th>
</tr>
  </thead>
  <tbody>
    <tr>
      <td>Mike</td>
      <td>Dancer</td>
    </tr>
  </tbody>
</table> 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-24T06:39:53.663

纯JavaScript：

**HTML**

```
<input type="checkbox" onclick="showhide(1, this)" checked="checked" /> Name<br />
<input type="checkbox" onclick="showhide(3, this)" checked="checked" /> Job<br /> 
```

**JS**

```
function showhide(column, elem){
    if (elem.checked)
        dp = "table-cell";
    else
        dp = "none";
    tds = document.getElementsByTagName('tr');
    for (i=0; i<tds.length; i++)
        tds[i].childNodes[column].style.display = dp;
} 
```

**[纯 JS 小提琴示例](http://jsfiddle.net/NPHDE/3/)**

请考虑将 javascript 库用作[JQuery](http://jquery.com/)来处理这些琐碎的事情。您的代码可能很简单：

**​HTML**

 **```
<input type="checkbox" data-col="1" checked="checked" /> Name<br />
<input type="checkbox" data-col="2" checked="checked" /> Job<br /> 
```

**jQuery JS：**

```
$(function(){
    $(':checkbox').on('change', function(){
        $('th, td', 'tr').filter(':nth-child(' + $(this).data('col') + ')').toggle();
    });
}); 
```

**[jQuery 小提琴示例](http://jsfiddle.net/FNfpA/9/)**

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-24T05:55:14.057

这是切换功能（使用 jQuery）：

```
function toggleColumns(column, state) {
    var cells = $("table").find("th, td").filter(":nth-child(" + column + ")");

    if (state)
        cells.hide();
    else
        cells.show();
} 
```

如果您需要默认隐藏该列，您可以在 onLoad 期间调用此函数。示例 [http://jsfiddle.net/nynEd/](http://jsfiddle.net/nynEd/)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-24T05:54:36.400

在你的CSS中你应该有类似的东西

```
.hidden{
    display:none;
}
.shown{
    display:block;
} 
```

然后在你的html中你应该有类似的东西

```
<table>
  <thead>
     <tr>
        <th id="th1" class="shown">Name</th>
        <th id="th2" class="shown">Job</th>
     </tr>
  </thead>
  <tbody>
    <tr>
      <td id="td1" class="shown">Mike</td>
      <td id="td2" class="shown">Dancer</td>
    </tr>
  </tbody>
</table> 
```

然后你必须实现一个 togle 方法来改变列的可见性

```
//id should be passhed as 1, 2, 3 so on...
function togleTable(id){
    if(document.getElementById("th"+id).className == "shown"){
        document.getElementById("th"+id).className = "hidden";
    }
    if(document.getElementById("td"+id).className == "shown"){
        document.getElementById("td"+id).className = "hidden";
    }
    if(document.getElementById("th"+id).className == "hidden"){
        document.getElementById("th"+id).className = "shown";
    }
    if(document.getElementById("td"+id).className == "hidden"){
        document.getElementById("td"+id).className = "shown";
    }
} 
```

然后在组合框 onChange() 事件中，您应该调用 togleTable 函数，将要显示/隐藏的行号作为 id 传递

我认为这是一个很好的起点。玩得开心

**更新**

如果你想为你的行设置多个类，别忘了你也可以使用这个：document.getElementById('id').classList.add('class'); document.getElementById('id').classList.remove('class');

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-24T06:10:19.157

有很多方法可以解决这个问题，我的选择是使用基本的 jquery 函数，例如，

```
<input type="checkbox" id="opt1" checked/>col 1
<input type="checkbox" id="opt2"/>col 2

<table border="1" cellpadding="5">
  <thead>
<tr>
  <th>Name</th>
  <th>Job</th>
  <th id="col1">col 1</th>
  <th id="col2">col 2</th>
</tr>
  </thead>
  <tbody>
    <tr>
      <td>Mike</td>
      <td>Dancer</td>
      <td class="data1">data 1</td>
      <td class="data2">data 2</td>
    </tr>
  </tbody>
</table>​ 
```

这是您的 HTML 代码，

```
$(document).ready(function() {
    if($("#opt1").is(":checked")){
         $("#col1").show();
        $(".data1").show();   
    }else{
         $("#col1").hide();
        $(".data1").hide();
    }
    if($("#opt2").is(":checked")){
         $("#col2").show();
        $(".data2").show();   
    }else{
         $("#col2").hide();
        $(".data2").hide();
    }

    $("#opt1").live('click', function() {
        if($("#opt1").is(":checked")){
         $("#col1").show();
        $(".data1").show();   
    }else{
         $("#col1").hide();
        $(".data1").hide();
    }
    });

    $("#opt2").live('click', function() {
       if($("#opt2").is(":checked")){
         $("#col2").show();
        $(".data2").show();   
    }else{
         $("#col2").hide();
        $(".data2").hide();
    }
    });
});​ 
```

这是一个java脚本代码。

请找到工作[示例](http://jsfiddle.net/xQnaf/)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-24T05:37:34.913

您要隐藏的列最初应具有属性 style="display:none"**

# sql - Rails/SQL - 如何搜索部分匹配并获得结果？

> ID：10731697
> 
> 赞同：0
> 
> 时间：2012-05-24T05:35:25.610
> 
> 标签：sql, ruby-on-rails, activerecord

这是房地产搜索网站的位置搜索字段的代码：

```
 scope :location, lambda{|l|  where("city LIKE ? OR zip_code LIKE ? OR address LIKE ?", l, l, l)} 
```

但是我必须输入完整的城市名称或邮政编码或地址才能获得结果，我该如何修复它以便我可以仅搜索 2 或 3 个字母或数字并获得包含这些字母或数字的结果？我尝试像这样包装 l：'%l%' 但没有运气。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-24T05:55:46.680

Try this:

```
scope :location, lambda{|l|  where("city LIKE :l OR zip_code LIKE :l OR address LIKE :l", l: "%#{l}%")} 
```

# c# - 如何转换图像 印象 ?

> ID：10731698
> 
> 赞同：5
> 
> 时间：2012-05-24T05:35:31.433
> 
> 标签：c#, emgucv

我正在尝试从另一个图像中减去 1 个图像，有点像这样：

```
Image<Gray, float> result, secondImage;
Image<Gray, byte> firstImage;
result = firstImage - secondImage; 
```

但它给出了一个错误

```
Operator '-' cannot be applied to operands of type 'Emgu.CV.Image<Emgu.CV.Structure.Gray,byte>' and 'Emgu.CV.Image<Emgu.CV.Structure.Gray,float>' 
```

也许我需要将 firstImage 转换为`Image<Gray, float>`类型。但我不知道该怎么做。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-05-24T05:42:23.677

从[文档中](http://www.emgu.com/wiki/index.php/Working_with_Images#Color_and_Depth_Conversion)引用：

> **颜色和深度转换**
> 
> 在不同颜色和深度之间转换图像很简单。比如你有Image img1，你想把它转换成Single的灰度图，你需要做的就是
> 
> ```
> Image<Gray, Single> img2 = img1.Convert<Gray, Single>(); 
> ```

所以，在你的情况下，你可以使用

```
result = firstImage.Convert<Gray, float>() - secondImage; 
```

# xcode - 在 Lion OS 10.7.4 Xcode 4.3.2 上安装 openCV

> ID：10731702
> 
> 赞同：1
> 
> 时间：2012-05-24T05:36:29.387
> 
> 标签：xcode, macos, opencv

我正在尝试在大学的 iMac 上安装 openCV，

但问题是我们大学的网络太严了。

而且我无法使用 MacPorts 安装 openCV。

我试图谷歌寻找一种安装方式，但都失败了

我想是因为这是一种古老的方式，而且因为我的网络非常严格。

因此，如果有人知道我可以下载一个现成的框架以及如何在内部使用它的方法

Xcode。或者至少是一个框架，其中包含如何安装它以与 Xcode 一起使用。或者一种从源代码下载并编译然后安装在 Xcode 中的方法。

因为我尝试了 cmake 方式，但我仍然没有运气让它工作。

提前致谢。

* * *

我使用的来源：

http://salemsayed.me/?p=240

http://opencv.willowgarage.com/wiki/InstallGuide

http://opencv.willowgarage.com/wiki/Mac_OS_X_OpenCV_Port

http://www.ient.rwth-aachen.de/cms/software/opencv/

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-24T08:13:50.900

我正在使用带有 OpenCV svn 主干的 Lion + Xcode 4.x 分支。一切正常。您必须先安装**cmake ，然后按照**[http://code.opencv.org](http://code.opencv.org)的说明从 svn 获取代码。对于所有核心模块 + Qt 模块 + GPU 模块 + TBB 加速，编译过程对我来说都很好。

指令与Linux平台相同。在终端中设置 cmake 配置后（使用**ccmake**获得更具交互性的工具），我将架构设置为**x86_64**（在我的 MBP Core 2 Duo 上），将目标目录设置为`/usr/local/`（默认），并在`/usr/local/`.

Cmake 会为您生成 makefile，因此您只需键入`make -j2`即可编译，然后`sudo make install`. 如果你在工作站上工作，那么你有更多的 CPU 能力，你可以将值 2 替换为更多，例如 8。

# android - android上下文菜单上的行？

> ID：10731716
> 
> 赞同：0
> 
> 时间：2012-05-24T05:38:30.840
> 
> 标签：android, textview, contextmenu

我正在开发一个需要绘制用户签名的应用程序。单击按钮时，我需要显示上下文菜单，用户可以在其中选择要绘制的线条粗细。谁能帮我创建具有不同线条粗细的上下文菜单。即我想要一条最粗的线作为上下文菜单的第一项，而厚度最低的线作为上下文菜单的最后一项。请帮我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-24T06:33:10.090

您可以显示 AlertDialog 而不是上下文菜单，以便在单击按钮时选择线条粗细。

例如。

```
public void lineButtonClick(View v) {
                    Builder builder = new Builder(this);
                    builder.setTitle("Line Thickness");
                    builder.setAdapter(new LineAdapter(this), new DialogInterface.OnClickListener() {

                        @Override
                        public void onClick(DialogInterface dialog, int which) {
                            // here you get index of clicked item in "which" parameter
                        }
                    });
                    builder.create().show();
                }

                class LineAdapter extends BaseAdapter {
                    // these are the line images with different thickness
                    int lineIds[] = {
                        R.drawable.line1, R.drawable.line2, R.drawable.line3, R.drawable.line4, R.drawable.line5    
                    };

                    @Override
                    public int getCount() {
                        return lineIds.length;
                    }

                    @Override
                    public Object getItem(int arg0) {
                        return arg0;
                    }

                    @Override
                    public long getItemId(int position) {
                        return position;
                    }

                    @Override
                    public View getView(int position, View convertView, ViewGroup parent) {
                        ViewHolder holder;
                        if(convertView == null) {
                            convertView = getLayoutInflater().inflate(R.layout.raw_line, null);
                            holder = new ViewHolder();
                            holder.imgLine = (ImageView)convertView.findViewById(R.id.imgLine);
                            convertView.setTag(holder);
                        } else {
                            holder = (ViewHolder) convertView.getTag();
                        }

                        holder.imgLine.setImageResource(lineIds[position]);
                        return convertView;
                    }

                    class ViewHolder {
                        ImageView imgLine;
                    }
                }

    // raw_line.xml

    <LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
        android:layout_width="fill_parent"
        android:layout_height="fill_parent"
        android:orientation="vertical" >

        <ImageView
            android:id="@+id/imgLine"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            />

    </LinearLayout> 
```

# jquery - 尝试创建隐藏导航栏时的 MouseEnter 和 Mouseleave 问题

> ID：10731718
> 
> 赞同：1
> 
> 时间：2012-05-24T05:38:34.083
> 
> 标签：jquery, navigation, mouseenter, mouseleave, parallax.js

我试图创建一个隐藏的导航栏，当悬停在其上时，宽度会增加，当光标离开导航栏时，它会缩小到原来的宽度。我正在使用 jQuery 和 Parallax.js，但 mouseenter 或 mouseleave 等的组合似乎不起作用。作为我正在尝试执行的操作的示例，请点击链接：

[http://www.glamour.biz/](http://www.glamour.biz/)

基本上我想做同样的顶部导航，但在我的页面左侧。这是我的 JavaScript：

```
$("#navigation").mouseenter(function(){
$("#navigation").animate({
    opacity: 1,
    width: "200px"
    },500,"swing"
);
$("#navigation ul").animate({
    opacity: 1,
    },500,"swing"
);
});

$("#navigation > ul").mouseleave(function(){
$("#navigation").animate({
    opacity: .75,
    width: "40px"
    },500,"swing"
);
$("#navigation ul").animate({
    opacity: 0,
    },500,"swing"
);  
}); 
```

以下是我的 HTML：

```
<div id="navigation">
        <ul>
            <li id="aboutb">Home</li>
            <li>About</li>
            <li>Portfolio</li>
            <li>Contact</li>
            <li>Resume</li>
        </ul>   
</div> 
```

我基本上遇到了 div 不止一次在动画中运行的问题，或者当我将鼠标悬停在 div 上时它不会保持扩展。我在这个导航栏 div 后面确实有另一个页面宽度的 div。

谢谢你的帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-24T08:56:46.877

我在这里设置了一个例子：

[http://jsfiddle.net/fGnVd/](http://jsfiddle.net/fGnVd/)

您面临的问题是因为您没有将 div 的溢出设置为隐藏，这导致菜单在输入不可见但在 div 之外的 ul 时展开。

请检查它是否在链接的示例中工作。

# java - 如何在 Hibernate Criteria 中添加 Distinct

> ID：10731723
> 
> 赞同：26
> 
> 时间：2012-05-24T05:39:10.870
> 
> 标签：java, hibernate

在我的数据库中，我有一个测试表，其中包含列：testName、testType 有 2 个具有相同类型的不同测试，即“SUN”，所以我只想要其中一个，我在我的休眠/标准中使用 Distinct，如下所示，但是它仍然给了我与“太阳”同名的两种类型。

```
 Criteria crit = session.createCriteria(Test.class);

    final ResultTransformer trans = new DistinctRootEntityResultTransformer();
    crit.setResultTransformer(trans);
    List rsList = trans.transformList(crit.list()); 
```

知道可能是什么原因，或者任何其他过滤重复项的方式。

* * *

## 回答 #1

> 赞同：31
> 
> 时间：2012-05-24T05:55:49.847

Use Projections.distinct.

```
Criteria crit = session.createCriteria(Test.class).setProjection(
    Projections.distinct(Projections.projectionList()
    .add(Projections.property("type"), "type") )
.setResultTransformer(Transformers.aliasToBean(YourBean.class)); 

List lst = crit.list(); 
```

where YourBean.class has a property "type". The returned list will be `List<YourBean>`.

* * *

## 回答 #2

> 赞同：23
> 
> 时间：2015-05-21T14:56:06.533

尝试使用：

```
cr.setResultTransformer(Criteria.DISTINCT_ROOT_ENTITY); 
```

它非常适合我

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2013-03-11T07:08:27.087

我终于发现要获取其他列的值：

```
Criteria criteria = session.createCriteria(Test.class);
ProjectionList projectionList = Projections.projectionList();
ProjectionList projectionList2 = Projections.projectionList();
projectionList2.add(Projections.distinct(projectionList.add(Projections.property("distinctColumn"), "distinctColumn")));
projectionList2.add(Projections.property("col1"), "col1");
projectionList2.add(Projections.property("col2"), "col2");
criteria.setProjection(projectionList2);
criteria.setResultTransformer(Transformers.aliasToBean(Test.class)); 
List list = criteria.list(); 
```

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2017-05-05T09:29:23.437

尝试使用：

```
Criteria criteria = 
    session.createCriteria(Test.class).setProjection(
        Projections.distinct(Projections.property("testType")));
List<Test> rsList = criteria.list(); 
```

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2013-03-06T22:36:57.380

遇到了同样的问题，最终使用 Group By 投影解决了问题，然后添加了我需要的所有列。例如

```
Criteria query = session.createCriteria(Class.class)
    .setProjection(Projections.projectionList()
        .add(Projections.groupProperty("Col1"), "Col1")
        .add(Projections.groupProperty("Col2"), "Col2"))
    .setResultTransformer(Transformers.aliasToBean(Class.class));
List list =  query.list(); 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2018-02-27T11:08:35.067

尝试

`setResultTransformer(Criteria.DISTINCT_ROOT_ENTITY)`

`Criteria crit = session.createCriteria(Test.class);`

`List list = crit.setResultTransformer(Criteria.DISTINCT_ROOT_ENTITY).list();`

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2014-01-22T22:51:09.293

投影仅提供标记属性的结果。但是，它给子实体带来了问题。请参阅我的帖子了解我遇到的真正问题。

[Hibernate：父子关系数据结构](https://stackoverflow.com/questions/21295325/hibernate-parent-and-child-relationship-data-structure)

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2019-08-19T10:58:46.080

尝试使用：

```
criteria.setResultTransformer(DistinctRootEntityResultTransformer.INSTANCE); 
```

它使用默认哈希码在结果中查找匹配项。

谢谢。

# c# - 在 linq 中使用内连接

> ID：10731726
> 
> 赞同：2
> 
> 时间：2012-05-24T05:39:19.980
> 
> 标签：c#, linq

您能帮我在 EmployeController (MVC 4) 中加入表格（Сотрудник 和 Должность）吗？

源代码 ：

```
public ViewResult List(int page = 1)
{
    EmployeListViewModel viewModel = new EmployeListViewModel
    {
        Employes = repository.Сотрудник
        .OrderBy(e => e.FAM).ThenBy(n => n.Name).Skip((page - 1) * PageSize)
        .Take(PageSize),
        PagingInfo = new PagingInfo
        {
            CurrentPage = page,
            itemsPerPage = PageSize,
            TotalItems = repository.Сотрудник.Count()
        }
    };
    return View(viewModel);
} 
```

员工的源代码库：

```
using System.Linq;
using WebService.Domain.Abstract;
using WebService.Domain.Entities;

namespace WebService.Concrete
{
    public class EFEmployeRepository: IEmployeRepository
    {
        private EFDbContext context = new EFDbContext();

       public IQueryable<Сотрудник> Сотрудник
        {
            get { return context.Сотрудник; }
        }
    }
} 
```

我在加入表格时需要帮助（Сотрудник[appointmnet_id] 与 Должность[ID]）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-24T05:49:48.353

在 Сотрудник 上创建一个名为 Appointment 的类型为 Должность 的属性。然后你不需要加入，你只需要按照存储库中的导航属性。

**编辑：**代码示例

类定义：

```
public class Сотрудник {
    ...

    public int appointmnet_id { get; set; }
    [ForeignKey(appointment_id)]
    public Должность appointment { get; set; }
} 
```

存储方法：

```
public List<Сотрудник> GetStuff(int page, int PageSize) {
    return (
        from e in repository.Сотрудник.Include("appointment")
        orderby e.FAM
        thenby e.Name
        select e
    ).Skip((page - 1) * PageSize).Take(PageSize).ToList();
} 
```

MVC 动作：

```
public ViewResult List(int page = 1)
{
    EmployeListViewModel viewModel = new EmployeListViewModel
    {
        Employes = GetStuff(page, PageSize),
        PagingInfo = new PagingInfo
        {
            CurrentPage = page,
            itemsPerPage = PageSize,
            TotalItems = repository.Сотрудник.Count()
        }
    };
    return View(viewModel);
} 
```

# css - CSS3 Transformed 元素在过渡期间会丢失其变换。（包括 jsFiddle）

> ID：10731727
> 
> 赞同：3
> 
> 时间：2012-05-24T05:39:23.587
> 
> 标签：css, css-transitions, css-transforms

所以我有这些六边形瓷砖，我想在悬停时放大。六边形由多个 DIVS 和 CSS3 变换完成。我想要的是比例转换，但是转换后的部分在转换过程中会失去转换，并在完成后重新出现。有什么建议么？

这是一个小提琴： http: [//jsfiddle.net/A2mTU/1/](http://jsfiddle.net/A2mTU/1/) 它应该是这样的（注意：我知道他们使用 canvas 元素，我需要为此使用常规 CSS）：[http://www.upperfirst .com](http://www.upperfirst.com)

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-24T06:07:04.053

形成六边形图块的方式不适合应用具有绝对定位元素的动画。我会推荐这种方式：http: [//jsfiddle.net/linmic/5aqSK/](http://jsfiddle.net/linmic/5aqSK/)

干杯

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-24T06:15:47.297

我建议使用这种技术来创建六边形，这样您就不会在缩放它们时遇到当前遇到的问题：http: [//jsfiddle.net/joshnh/jZMEy/](http://jsfiddle.net/joshnh/jZMEy/)

```
div {
    background: black;
    height: 60px;
    position: relative;
    width: 120px;
    -webkit-transition: .25s;
       -moz-transition: .25s;
        -ms-transition: .25s;
         -o-transition: .25s;
            transition: .25s;
}
div:after {
    border-left: 60px solid transparent;
    border-right: 60px solid transparent;
    border-top: 35px solid black;
    bottom: -35px;
    height: 0;
    content: '';
    left: 0;
    position: absolute;
    width: 0;
}
div:before {
    border-bottom: 35px solid black;
    border-left: 60px solid transparent;
    border-right: 60px solid transparent;
    height: 0;
    content: '';
    left: 0;
    position: absolute;
    top: -35px;
    width: 0;
}
div:hover {
    -webkit-transform: scale(1.5);
       -moz-transform: scale(1.5);
        -ms-transform: scale(1.5);
         -o-transform: scale(1.5);
            transform: scale(1.5);
} 
```

# iphone - 将绘图发布到 Facebook 朋友

> ID：10731728
> 
> 赞同：1
> 
> 时间：2012-05-24T05:39:26.457
> 
> 标签：iphone, objective-c, xcode

我正在开发一个使用 Facebook API 的应用程序。在这个应用程序中有 2 个 Facebook 朋友。第一个朋友将绘制一个设计并将其发布在第二个朋友的 Facebook 墙上。然后第二个朋友将理解该绘图并回复第一个朋友。

在我的代码中，我做了一个设计，但我不知道如何通过我的应用邀请将其发布到朋友的墙上。

这是进行设计的代码：

```
- (void)drawRect:(CGRect)rect
{
    prelocation=lastLocation;
}

-(void)touchesBegan:(NSSet *)touches withEvent:(UIEvent *)event
{
    UITouch *touchOb=[touches anyObject];

    prelocation=[touchOb locationInView:self];

    //Get value of selected button

    NSUserDefaults *defaults=[NSUserDefaults standardUserDefaults];

    NSString *value= [defaults objectForKey:@"clickValue"];

    NSLog(@" value of flag is %@",value);

    if([value isEqualToString:@"yes"])
    {
        NSLog(@" in Erasing");

        CGRect rect1=CGRectMake(prelocation.x,prelocation.y,4,4);

        UIView *view1=[[UIView alloc] initWithFrame:rect1];

        view1.backgroundColor=[UIColor whiteColor];

        [self addSubview:view1]; 
    }
    else
    {   
        if(inkIndicator.value>0.0)
        {
            NSLog(@" in drawing");

            CGRect rect1=CGRectMake(prelocation.x,prelocation.y,2,2);

            UIView *view1=[[UIView alloc] initWithFrame:rect1];

            view1.backgroundColor=[UIColor blueColor];

            [self addSubview:view1];

            counter++;

        } 
        if(counter==10)
        {
            inkIndicator.value--;
            counter=0;
        }
    }

    [self setNeedsDisplay];
}

-(void)touchesMoved:(NSSet *)touches withEvent:(UIEvent *)event
{
    UITouch *touchOb=[touches anyObject];

    lastLocation=[touchOb locationInView:self];

    //    NSLog(@"in start slidr value is %f",drawController.inkIndicator.alpha);

    //Get value of selected button

    NSUserDefaults *defaults=[NSUserDefaults standardUserDefaults];

    NSString *value= [defaults objectForKey:@"clickValue"];

    NSLog(@" value of flag is %@",value);

    if([value isEqualToString:@"yes"])
    {
        NSLog(@" in Erasing");

        CGRect rect1=CGRectMake(prelocation.x,prelocation.y,4,4);

        UIView *view1=[[UIView alloc] initWithFrame:rect1];

        view1.backgroundColor=[UIColor whiteColor];

        [self addSubview:view1]; 
    }
    else
    {
        if(inkIndicator.value>0.0)
        {
            NSLog(@" in drawing");

            CGRect rect1=CGRectMake(prelocation.x,prelocation.y,2,2);

            UIView *view1=[[UIView alloc] initWithFrame:rect1];

            view1.backgroundColor=[UIColor blueColor];

            [self addSubview:view1];

            counter++;

            NSLog(@" slidr value is %f",inkIndicator.value);
        }

        if(counter==10)
        {
            inkIndicator.value--;
            counter=0;
        }

    }

    [self setNeedsDisplay];
} 
```

我是在小矩形的帮助下绘制的。我怎样才能发布它们？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-24T07:04:38.317

您将不得不创建一个 UIImage 最简单的方法是将 UIView 捕获到 UIImage 中，请使用以下代码

```
-(UIImage*)captureScreen:(UIView*) viewToCapture
{
    //UIGraphicsBeginImageContext(viewToCapture.bounds.size);
    UIGraphicsBeginImageContextWithOptions(viewToCapture.bounds.size, viewToCapture.opaque, 0.0);
    [viewToCapture.layer renderInContext:UIGraphicsGetCurrentContext()];
    UIImage *viewImage = UIGraphicsGetImageFromCurrentImageContext();
    UIGraphicsEndImageContext();
    return viewImage;
} 
```

然后在创建 UIImage 后，您需要将其发送到 facebook，请参阅此问题[iPhone 的答案 - 使用 Sharekit 将图像发送到 Facebook](https://stackoverflow.com/questions/5977684/iphone-sending-an-image-with-sharekit-to-facebook)

# c# - url 中的新行常量会破坏页面

> ID：10731731
> 
> 赞同：1
> 
> 时间：2012-05-24T05:39:37.483
> 
> 标签：c#, asp.net, iis-7

我正在使用 ASP.NET 和 c# 来构建我的网站。我在 url 中遇到了换行常量的一些问题。

这是我的网址

```
http://localhost/TestProject/Login/Login.aspx?ReturnUrl=http://google.com?search=Software+Engineer%0ASalesforce.com 
```

其中包含一个新的行常量。(%0A)

在我的代码中，我正在解码 url 以获取一些参数，所以我使用 System.Web.HttpUtility.UrlDecode 来解码 url，之后，我将一些会话 id 附加到 url 并重定向相同的。

由于 Url 包含新行常量，它会破坏我的页面并引发异常
**值不在预期范围内。**

如果我从 url 中删除新的 line 常量，它的工作正常。

有什么建议如何处理吗？

# c# - 等效于 C# 的 C 代码来安装证书

> ID：10731732
> 
> 赞同：2
> 
> 时间：2012-05-24T05:39:44.083
> 
> 标签：c#, c, windows, winapi, certificate

我发现以下代码将证书安装到本地机器受信任的发布者中。但是代码在 C# 中我希望在 C 中完成相同的操作。如何将其转换为 C？

```
private static void InstallCertificate(string cerFileName)
{
  X509Certificate2 certificate = new X509Certificate2(cerFileName);
  X509Store store = new X509Store(StoreName.TrustedPublisher,StoreLocation.LocalMachine);
  store.Open(OpenFlags.ReadWrite);
  store.Add(certificate);
  store.Close();
 } 
```

任何可用的 Windows API？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-24T07:27:30.463

尝试查看 libpkix [lib](http://libpkix.sourceforge.net/)

> libpkix 库的目的是提供一个广泛有用的 C 库，用于构建和验证 X.509 证书链，符合最新的 IETF PKIX 标准（即 RFC 3280）。该项目旨在为 RFC 3280 的所有强制性功能以及一些可选功能提供完整的支持。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-24T14:41:48.967

试试这个例子：

```
#include <openssl/ssl.h>
static int store_cert(SSL_CTX * ctx, X509 * cert)
{
    X509_STORE * x509_store;

    x509_store=SSL_CTX_get_cert_store(ctx);

    if (X509_STORE_add_cert(x509_store, cert)==0)
    {
        printf("ERROR: add certificate\n");
        return 0;
    }
    return 1;

} 
```

# python - 当我使用 pyflakes 启动 VIM 编辑器时，导入错误找不到模块 ast

> ID：10731734
> 
> 赞同：1
> 
> 时间：2012-05-24T05:40:16.690
> 
> 标签：python, vim, osx-lion, python-2.7, pyflakes

在我的 Macbook (OSX Lion) 上，我正在运行带有 Vim 7.3 的 python 2.7 并安装了 pyflakes。

我按照[此处描述](https://github.com/yodiaditya/vim-pydjango/blob/master/README.md)的步骤进行操作，但使用 macports 安装了 pyflakes、pylint 和 pep8。

运行`Bundleinstall`并启动新的 Vim 后，我收到以下错误消息：

```
Import Error: cant find module ast 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-10T17:58:20.167

由于 vim < 7.3.430 版本中的错误，vundle`filetype on`在配置期间可能不喜欢。但是，pyflakes 需要`filetype on`

如果您无法更新 vim 以逃避该错误，则一种解决方法是在 vundle 配置 pyflakes 之前翻转文件类型，然后再退出。例如

```
filetype on
Bundle 'kevinw/pyflakes-vim'
filetype off 
```

# java - Android 市场没有在平板电脑上显示我的应用

> ID：10731736
> 
> 赞同：0
> 
> 时间：2012-05-24T05:40:34.970
> 
> 标签：java, android, google-play

最近，我将我的 android 应用程序发布到市场。当搜索我的应用程序时，它会显示并安装在我的手机中，但是当在平板电脑中搜索我的应用程序时，它不会显示该应用程序。我曾经直接从我的帐户安装到平板电脑，它说“这个应用程序与你的设备不兼容”。

任何人都可以帮助我如何让我的应用程序在平板电脑中显示它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-24T05:45:12.807

我认为您忘记将其添加到清单文件中-

```
<supports-screens  android:smallScreens="true"/>
<supports-screens  android:normalScreens="true"/>
<supports-screens android:largeScreens="true"/>
<supports-screens android:anyDensity="true"/>
<supports-screens android:resizeable="true" android:anyDensity="true" /> 
```

只需阅读支持多种屏幕尺寸应用程序[的 Android 开发者页面即可。](http://developer.android.com/guide/practices/screens_support.html)另请参阅现有的[Stackoverflow 问题](https://stackoverflow.com/q/10328374/940096)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-24T05:45:14.860

```
" This app is incompatible with your devices." 
```

这是因为可能是应用程序功能（屏幕尺寸*就像@SpK 说*的那样，蓝牙、3g、Gps、EDGE、NFC）将不支持您的平板电脑（清单声明）。

如果您仍想下载不兼容的应用程序，请尝试[http://www.redmondpie.com/how-to-install-incompatible-apps-from-android-market-for-unsupported-devices/](http://www.redmondpie.com/how-to-install-incompatible-apps-from-android-market-for-unsupported-devices/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-24T05:46:38.060

你的清单是什么样的？请[阅读这篇文章](http://developer.android.com/guide/appendix/market-filters.html)，它解释了市场 (Google Play) 如何根据应用程序在清单中声明的​​内容来过滤它们。

您可能忘记添加：

```
 <supports-screens android:smallScreens="true"
              android:normalScreens="true"
              android:largeScreens="true"
              android:xlargeScreens="true" /> 
```

到你的清单。

但是您是否提供了您的应用程序的平板电脑版本，以及适合这些设备的适当 UI 设计？如果您希望看到用户在这些设备上采用您的应用，这是一个重要的问题......

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-24T07:05:22.810

“这个应用程序与您的设备不兼容”可能意味着一些事情，因为上面的所有评论都是正确的，是的，我已经向市场发布了平板电脑应用程序并收到了相同的回复。问题

1：您在清单中定义了什么“API LEVEL”？2：设备是什么“什么API级别”？

我问了这两个重要问题，因为我唯一一次收到来自市场的评论是当我搜索 api 级别高于我的设备的应用程序时。默认情况下，如果您在 Windows 操作系统上使用 Eclipse 并且您的 sdk 是最新的，则默认 api 级别将设置为 15，而您用于下载应用程序的设备可能是 api 7 -14。如果您已经按照其他组成员定义的所有步骤进行操作，您应该查看您的清单并查看应用程序是在什么 uses-sdk android:minSdkVersion 上开发的，然后将其与您设备的 api 级别进行比较，我向您保证您会发现您的应用程序是在比您的设备更高的 api 级别上开发的。

# jquery - 如何在 jquery 中访问附加的事件处理程序？

> ID：10731739
> 
> 赞同：0
> 
> 时间：2012-05-24T05:40:37.950
> 
> 标签：jquery, events, event-handling, onclick

我在 HTML 中有一个简单的按钮，如下所示：

```
<input type='button' id='btnPrint' value='Print' onclick="changeStylesheet();" /> 
```

此按钮已包含一个 onclick 事件处理程序。我在这里想要实现的是能够为相同的按钮编写 onclick 事件处理程序。我想添加第二种方法来跟踪按钮被点击的次数。

**一些方法：**

首先：根据内联事件注册在 HTML 中附加另一个函数调用。

```
<input type='button' id='btnPrint' value='Print' onclick='changeStylesheet();trackThis();>' /> 
```

这是最简单的方法，但在我的情况下不可行。

第二：抓取onclick事件并检查它是否未定义。然后，使用 JavaScript 原生语法用匿名函数重构事件处理程序。

```
var elem = document.getElementById('btnPrint');
var existingHandler = **elem.onclick ? elem.onclick : function () {};**
elem.onclick = function () {
     trackThis();
     existingHandler();
}; 
```

第三：虽然上述方法有效，但我很想知道如何使用 jQuery 语法来学习上述 #2 方法的方法。

```
 var elem = $('#btnPrint');
    var existingHandler = **elem.click ? elem.click : function () {};**
    elem.click(function () {
        trackThis();
        existingHandler()
    }); 
```

我的#3 解决方案发生的情况是我得到了 **Uncaught TypeError: Object [object Window] has no method 'trigger'** 错误。

任何提示将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-24T06:32:28.147

如果要在 jQuery 中附加两个处理程序，则只需设置两个单击处理程序。在内部，jQuery 实现了一种“观察者模式”，这样它就可以聚合处理程序，并按照添加的顺序依次执行它们。

```
$('#btnPrint').on('click', firstHandler);
$('#btnPrint').on('click', secondHandler); 
```

这些语句不需要是连续的，甚至不需要在相同的范围内。

如果 HTML 中已经指定了处理程序，则同样的原则也适用。jQuery 将简单地执行原始处理程序之后的任何附加处理程序。

HTML：

```
<input type='button' id='btnPrint' value='Print' onclick=".....;" /> 
```

jQuery：

```
$('#btnPrint').on('click', secondHandler); 
```

见[小提琴](http://jsfiddle.net/qUCJ3/1/)

## 编辑 ...

也可以更改顺序，以便原始处理程序在 jQuery 中附加的处理程序之后执行：

```
var $btnPrint = $('#btnPrint');
var originalHandler = $btnPrint.get(0).onclick;
$btnPrint.get(0).onclick = null;

$btnPrint.on('click', secondHandler);
$btnPrint.on('click', originalHandler); 
```

见[小提琴](http://jsfiddle.net/qUCJ3/2/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-24T07:17:20.087

如果我理解你的问题，

这应该工作，

```
$('#btnPrint').off("click", "**" ).on('click',function(){
     trackThis();
     existingHandler(); 
}) 
```

即首先`off`是现有的事件处理程序，然后`on`是您的自定义事件处理程序。

如果这对您没有帮助，这可能是您想要的，

[如何使用 jQuery 或 JS 检查事件处理程序是否存在？](https://stackoverflow.com/questions/3898055/how-to-check-if-an-event-handler-exist-using-jquery-or-js)

**编辑**

如果你想覆盖 inline `onclick`，你可以使用这种肮脏的方法。

**jQuery代码：**

```
$(function(){ 
        var mydiv = $('#mydiv');
        var inlineClick = mydiv.attr('onclick');

        mydiv.removeAttr('onclick').click(function(){
            // your code 
            alert('mycode');

            eval(inlineClick);

            // or first do, eval(inlineClick);
            //then your code later

        })
    });     
    function inlinefun(){
        alert('I am inline function'); 
    } 
```

**标记：**

```
<div id='mydiv' onclick='inlinefun();'>Mydiv</div> 
```

**没有“邪恶”评估**

（可能并非在所有情况下都有效，只是给了你一个方向）

```
$(function(){ 
        var mydiv = $('#mydiv');

            // Dirty way to get function name and its args by a string.
    var inlineClick = mydiv.attr('onclick').split('(');
    var funName = inlineClick[0];
            var args = inlineClick[1].replace(')','');

    mydiv.removeAttr('onclick').click(function(){
        // your code 
        alert('mycode');  

        // The default inline function
        window[funName](args);

        // you can change the order as you want

    })
});     
function inlinefun(msg){
            // I know I am passing string, so removing the quotes, you need a generalised approach here
    alert(msg.replace('"','')); 
} 
```

**标记：**

```
<div id='mydiv' onclick='inlinefun("I am inline function");'>Mydiv</div> 
```

# wcf - 使用证书身份验证的 WCF 中的消息安全问题

> ID：10731741
> 
> 赞同：1
> 
> 时间：2012-05-24T05:40:45.377
> 
> 标签：wcf, security

我有 WCF 服务，我使用证书实现了消息安全性。但是当我尝试从我的客户端应用程序连接 WCF 服务时，我收到以下错误：

**调用方未通过服务进行身份验证。**

我的配置设置如下：

服务设置：

```
ServiceHost host = new ServiceHost(typeof(HostService));
NetTcpBinding tcpBinding = new NetTcpBinding(SecurityMode.Message);
tcpBinding.Security.Message.ClientCredentialType = MessageCredentialType.Certificate;
host.AddServiceEndpoint(typeof(IHostService), tcpBinding, "net.tcp://192.168.39.28:8000/HostService");
host.Credentials.ServiceCertificate.SetCertificate(StoreLocation.LocalMachine, StoreName.My, X509FindType.FindBySubjectName, "server_cert"); 
```

客户端设置：

```
NetTcpBinding tcpBinding = new NetTcpBinding(SecurityMode.Message);
tcpBinding.Security.Message.ClientCredentialType = MessageCredentialType.Certificate;
DuplexChannelFactory<IHostService> serviceFactory = new DuplexChannelFactory<IHostService>(new InstanceContext(MainWindow), tcpBinding, "net.tcp://192.168.39.28:8000/HostService");
serviceFactory.Credentials.ClientCertificate.SetCertificate(StoreLocation.LocalMachine, StoreName.My, X509FindType.FindBySubjectName, "client_cert");
serviceFactory.CreateChannel(); 
```

我使用 makecert 命令创建了 server_cert 和 client_cert 证书。你能指导我错过什么吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-31T19:44:18.923

调试证书相关问题是一个很大的痛苦，我强烈推荐使用wireshark。在您的情况下，您的客户端可能甚至没有发送证书。如果客户端证书由另一个证书签名，请确保将它（它们）放入客户端和服务器上的受信任根目录中。

# iphone - 无法使用 shouldChangeCharactersInRange 隐藏键盘

> ID：10731742
> 
> 赞同：3
> 
> 时间：2012-05-24T05:40:50.510
> 
> 标签：iphone, objective-c, ios, xcode, uitextfield

这是我的代码：

```
- (BOOL)textField:(UITextField *)textField shouldChangeCharactersInRange:(NSRange)range replacementString:(NSString *)string 
{
    NSCharacterSet *nonNumberSet = [[NSCharacterSet characterSetWithCharactersInString:@"אבגדהוזחטיכלמנסעפצקרשתףץםן"] invertedSet];

    // max charcters
    NSUInteger newLength = [textField.text length] + [string length] - range.length;
    if (newLength > 14)
        return NO;

    // allow backspace
    if (range.length > 0 && [string length] == 0) {
        return YES;
    }
    // do not allow . at the beggining
    if (range.location == 0 && [string isEqualToString:@"."]) {
        return NO;
    }
    if ((range.location > 0) && (([[textField.text substringWithRange:NSMakeRange((range.location -1), 1)] isEqualToString:@"ף"]) || ([[textField.text substringWithRange:NSMakeRange((range.location -1), 1)] isEqualToString:@"ץ"]) || ([[textField.text substringWithRange:NSMakeRange((range.location -1), 1)] isEqualToString:@"ם"]) || ([[textField.text substringWithRange:NSMakeRange((range.location -1), 1)] isEqualToString:@"ן"])))   
    {
        return NO;
    }

    // set the text field value manually
    NSString *newValue = [[textField text] stringByReplacingCharactersInRange:range withString:string];
    newValue = [[newValue componentsSeparatedByCharactersInSet:nonNumberSet] componentsJoinedByString:@""];
    textField.text = newValue;
    // return NO because we're manually setting the value
    return NO;
} 
```

我只是想当你点击`Return`键盘时会消失。我不能那样做。在哪里添加它以及如何添加？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-24T05:44:38.293

如果您想在点击`return`键后隐藏键盘，请将以下代码添加到您的代码中：

```
if ([string isEqualToString:@"\n"]) {
    [theTextField resignFirstResponder];
    return NO;
} 
```

希望能帮助到你

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-24T05:43:41.993

在 UITextField textFieldShouldReturn 的委托方法中使用：-

```
[yourTextField resignFirestResponder]; 
```

还要在您的类中实现 UITextFieldDelegate 并将 viewDidLoad 中的委托设置为：-

```
yourTextField.delegate=self; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-24T06:18:13.860

创建一个 IBAction 并将其与您的 TextField 视图连接起来。

```
-(IBAction)doneEditing:(id)sender
{
     [sender resignFirstResponder];
} 
```

在连接到文件所有者时选择事件*在退出时结束。*

# android - Android WebView上的getBoundingClientRect错误

> ID：10731745
> 
> 赞同：1
> 
> 时间：2012-05-24T05:40:52.617
> 
> 标签：android, google-maps-api-3, android-webview

我正在为一个使用谷歌地图和地理位置的网站编写一个包装应用程序。我遇到的问题是，在普通浏览器中，页面运行正常，但在 WebView 中，两指缩放不起作用，它实际上会用这个错误**淹没日志：**

`05-24 08:14:28.504: E/Web Console(21166): Uncaught TypeError: Cannot read property 'getBoundingClientRect' of null at http://<mydomain>/index.php:28`

麻烦的是，这个函数只用在谷歌的JS代码里，没有用在我们的代码里，所以我没有那么多权力。我应该如何开始解决这个问题？

这里有一些（可能）相关的来源，审查最少。

```
myWebView = (WebView) findViewById(R.id.webview);
myWebView.setWebChromeClient(new WebChromeClient() {
    public void onProgressChanged(WebView view, int progress) {
        mk.setTitle(getString(R.string.loading));
        mk.setProgress(progress * 100);
        if(progress == 100) {
            mk.setTitle(R.string.app_name);
        }
    }

    public void onGeolocationPermissionsShowPrompt(String origin, GeolocationPermissions.Callback callback) {
        callback.invoke(origin, true, false);
    }
});
myWebView.setWebViewClient(new MyWebViewClient());
WebSettings webSettings = myWebView.getSettings();
webSettings.setJavaScriptEnabled(true);
webSettings.setUserAgentString(getString(R.string.useragent));
webSettings.setGeolocationEnabled(true);
webSettings.setBuiltInZoomControls(false);
webSettings.setGeolocationDatabasePath("/data/data/com.mypackage.myapp");
myWebView.addJavascriptInterface(new JSInterface(this), "androidapp");
myWebView.loadUrl(HOMEURL); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-24T09:44:43.867

无论使用什么对象来调用`getBoundingClientRect`都是`null`- 所以这就是你的问题的开始。你能看一下原始的JS代码（在网站上，调用谷歌的API）吗？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-01-08T02:17:27.207

我在为 webview 设置自定义用户代理时遇到了这个问题。在我将它改回默认用户代理后，问题就解决了。

# iphone - 在 iPhone VOIP 应用程序中保持 SIP 注册的时间间隔少于 600 秒

> ID：10731746
> 
> 赞同：3
> 
> 时间：2012-05-24T05:40:55.193
> 
> 标签：iphone, ios4, ios

我正在实现一个使用 SIP 协议的 VOIP 应用程序。根据 SIP，我需要以一定的时间间隔刷新我在 SIP 服务器上的注册。但是，当我的应用程序进入后台时，我的 keepalive 处理程序仅在 600 秒后根据文档操作系统 Apple 被调用。但这不是 SIP 协议所希望的。为了能够保持与服务器的连接并接收来电，即使应用程序处于后台，我也需要在 600 秒之前发送注册消息。根据 Apple 文档，这是不可能的，但我仍然在 AppStore 上看到了在后台运行的应用程序，即使注册间隔为 60 秒，它们也会在 SIP 服务器上保持注册。他们使应用程序始终在后台运行。那么这怎么可能呢？我知道在后台播放无声音频会继续存在，但 AppReview 进程会拒绝它。但如果是这样，Apple 是如何允许 AppStore 上其他此类应用的呢？有没有一些标准的方法来实现我上面描述的？任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-24T07:30:20.133

您不必更频繁地发送注册信息。您可以执行以下操作：配置您的服务器以将保持活动包发送到您的 sip 客户端，以保持 TCP 连接打开。您的服务器应该支持 TCP 连接，并且您的客户端应该通过 TCP 进行通信，因为苹果在后台模式下非常严格，并且只允许 TCP 连接在后台保持打开状态（如果您的 TCP 套接字使用 CFReadStreamRef 包装）。

问题是没有注册消息，这可以由客户端通过指定连接尝试之间的时间来配置，并且 sip 服务器在 2 个注册消息之间间隔一小时就可以了。真正的问题是，如果有来电或 IM，服务器将如何联系 sip 客户端。大多数 sip 客户端没有公共 IP 地址，但很可能它们位于 NAT 后面。因此 sip 服务器无法打开与 sip 客户端的直接连接，因此您必须在客户端和服务器之间保持一个套接字打开。

应用商店中没有一个应用发送注册消息的频率超过 600 秒。

您使用自己的库进行 sip 还是使用 pjsip？如果您使用 pjsip，我可以给您更多提示。您打算使用什么 SIP 服务器？

一些提示：

*   确保在 app-info.plist 中将所需的背景模式设置为“应用程序提供 IP 语音服务”和“应用程序播放音频”

*   如果您的应用程序不会绑定到您自己的 sip 服务器，则为用户提供一种禁用 allow_contact_rewrite pjsip 参数的方法（通常您希望启用它以绕过 nat 问题），因为某些会话边界控制器对此不满意特征

*   确保，如果您在主线程中捕获从 sip 线程发送的消息，您正在使用一种方法将它们发布到主线程中

*   [这里](http://trac.pjsip.org/repos/wiki/IPAddressChange)描述了一些其他有趣的问题

*   准备了很多咖啡:))

# c# - 处理 datagridviecomboboxColumn 选定索引更改的最佳方法

> ID：10731748
> 
> 赞同：0
> 
> 时间：2012-05-24T05:40:57.470
> 
> 标签：c#, datagridviewcomboboxcell

我的 datagridview 包含 datagridviecomboboxColumn 有问题。在用户从组合框中选择新项目后，我需要触发 selectedindex 更改事件。我怎样才能做到这一点？我有一个解决方法，但似乎它可能不正确：

```
Datagridview1_CellValueChanged(object sender, DataGridViewRowCancelEventArgs e) 
```

但它只有在用户离开组合框所在的单元格后才会触发，我需要的是一个像 selectedindex 变化这样的事件。

请帮我解决这个问题。谢谢 ;）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-24T06:41:38.097

来自 MSDN：与 ComboBox 控件不同，DataGridViewComboBoxCell 没有 SelectedIndex 和 SelectedValue 属性。相反，从下拉列表中选择一个值会设置单元格值属性。

所以 CellValueChanged 似乎是这样做的方法。

如果您想在用户不必离开单元格的情况下使用它，您可以使用[CurrentCellDirtyStateChanged](http://msdn.microsoft.com/en-us/library/system.windows.forms.datagridview.currentcelldirtystatechanged)。

# facebook - 无法将消息发布到 http://domain.com。收件人来源 https://www.facebook.com

> ID：10731752
> 
> 赞同：1
> 
> 时间：2012-05-24T05:41:07.953
> 
> 标签：facebook, login

对不起，如果这已经被问过，但我在搜索时找不到它。

“使用 Facebook 登录”功能以前对我有用，但现在当我或其他任何人最初尝试使用它来允许应用程序时，它失败了。它在接受登录此 URL 后立即冻结：[https ://www.facebook.com/dialog/permissions.request](https://www.facebook.com/dialog/permissions.request)

我打开 Chrome 控制台并显示此错误：“无法向 [DOMAIN] 发布消息。收件人的来源为[https://www.facebook.com](https://www.facebook.com)。”

但是，如果我只是关闭窗口并继续重试，它会成功登录。

其他人遇到过这个问题吗？

谢谢你的时间，〜乔希。

# php - PHP中前缀为零的编号

> ID：10731755
> 
> 赞同：2
> 
> 时间：2012-05-24T05:41:09.917
> 
> 标签：php

PHP中是否可以在开头回显一个带有零的数字？

例如

```
<?php

$i = 0001;
$i++;
echo $i;

?> 
```

当它打印出来时，我希望它是这样的。

```
0002 
```

是否可以？谢谢 ：）

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-24T05:46:43.710

**是**的，这是可能的。您可以使用[str_pad()](http://php.net/manual/en/function.str-pad.php)方法执行此操作。基本上，这种方法会添加一个给定的值，直到达到所需的长度。

一个基本的例子是：

```
echo str_pad($i, 4, "0", STR_PAD_LEFT); 
```

这里，

*   `4`表示输出长度
*   `"0"`表示用于填充的字符串，直到达到长度。

**[演示](http://codepad.org/uWJfnICi)示例：**

> ```
> <?php
> $i = 0001;
> $i++;
> echo str_pad($i, 4, "0", STR_PAD_LEFT); 
> ```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-24T05:43:07.967

```
$i = 1;
$i++;
printf("%04d", $i); // 0002 
```

*   [printf](http://php.net/manual/en/function.printf.php) - 输出一个格式化的字符串
*   `%04d`- 回显一个 4 位数字，用 0 填充

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-24T05:43:44.457

试试这个

```
echo str_pad($i, 4,"0",STR_PAD_LEFT); 
```

在这里阅读文档：http: [//php.net/manual/en/function.str-pad.php](http://php.net/manual/en/function.str-pad.php)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-24T05:44:55.437

```
$input = 0001;
echo str_pad(++$input, 4, "0", STR_PAD_LEFT); 
```

# php - 在 GIT 中动态创建空文件夹

> ID：10731759
> 
> 赞同：0
> 
> 时间：2012-05-24T05:41:55.767
> 
> 标签：php, git, subdomain

我有 ORCHESTRA.IO 的 PHP 网络托管。他们通过 GIT 获得 PHP 托管代码。

我想在成功注册网站后为每个用户提供子域。我想通过 PHP 代码生成这些用户的子域。问题是我是否可以在 GIT 中创建空文件夹来映射该文件夹上的子域。

是否有其他更好的解决方案可以为用户动态生成子域。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-24T05:46:57.637

Git 存储文件，而不是文件夹。让 Git 跟踪文件夹的最佳方法是在其中创建一个虚拟文件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-24T10:27:48.720

最好的可能是创建一个文件夹并放在`.gitignore`目录中。

.gitignore 的内容：

```
*
!.gitignore 
```

# wpf - 水平排列 ListView 项目

> ID：10731763
> 
> 赞同：4
> 
> 时间：2012-05-24T05:42:02.007
> 
> 标签：wpf, listview

我正在使用按数据源的属性（资源）之一分组的 ListView。我的要求是显示每个组与其他组水平对齐，但我的实现（如下所示）显示垂直对齐的组

```
 <ListView x:Name="listViewResourceHours" HorizontalAlignment="Stretch" VerticalAlignment="Stretch" BorderThickness="0" SelectionMode="Single" Height="100" Width="300" >
            <ListView.GroupStyle>
                <GroupStyle>
                    <GroupStyle.ContainerStyle>
                        <Style TargetType="{x:Type GroupItem}">
                            <Setter Property="Template">
                                <Setter.Value>
                                <ControlTemplate TargetType="GroupItem">
                                    <StackPanel Orientation="Horizontal">
                                        <ContentPresenter/>
                                        <ItemsPresenter/>
                                    </StackPanel>
                                </ControlTemplate>
                            </Setter.Value>
                            </Setter>
                        </Style>
                    </GroupStyle.ContainerStyle>
                </GroupStyle>
            </ListView.GroupStyle>
            <ListView.ItemsPanel>
                <ItemsPanelTemplate>
                    <StackPanel Orientation="Horizontal" HorizontalAlignment="Stretch" VerticalAlignment="Stretch" ScrollViewer.HorizontalScrollBarVisibility="Disabled" />
                </ItemsPanelTemplate>
            </ListView.ItemsPanel> 
            <ListView.ItemTemplate>
                <DataTemplate>
                    <StackPanel Orientation="Horizontal" HorizontalAlignment="Stretch" VerticalAlignment="Stretch" >
                        <Label VerticalAlignment="Center"  Margin="0" Content="{Binding Hours}" />
                        <Label VerticalAlignment="Center"  Margin="2,0,0,0" Content="{Binding WorkingHoursType, Converter={StaticResource ResourceKey=hoursTypeConverter}}" />
                    </StackPanel>
                </DataTemplate>
            </ListView.ItemTemplate>
        </ListView> 
```

以下是此代码结果的示例：

```
PSE: 0 (B) 0 (NB)
PSC: 0 (B) 0 (NB)
PM: 0 (B) 0 (NB)
EIA: 0 (B) 0 (NB) 
```

这是我真正希望它看起来像的示例

```
PSE: 0 (B) 0 (NB)  PSC: 0 (B) 0 (NB)  PM: 0 (B) 0 (NB)  EIA: 0 (B) 0 (NB) 
```

任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-05-24T06:09:21.087

在这种情况下，您应该为组定义面板，例如：

```
<GroupStyle.Panel>
    <ItemsPanelTemplate>
        <StackPanel Orientation="Horizontal" />
    </ItemsPanelTemplate>
</GroupStyle.Panel> 
```

在 mod 之后，您的 xaml 看起来像：

```
<ListView x:Name="listViewResourceHours" HorizontalAlignment="Stretch" VerticalAlignment="Stretch" BorderThickness="0" SelectionMode="Single" Height="100" Width="300" >
    <ListView.GroupStyle>
        <GroupStyle>
            <GroupStyle.Panel>
                <ItemsPanelTemplate>
                    <StackPanel Orientation="Horizontal" />
                </ItemsPanelTemplate>
            </GroupStyle.Panel>
            <GroupStyle.ContainerStyle>
                <Style TargetType="{x:Type GroupItem}">
                    <Setter Property="Template">
                        <Setter.Value>
                            <ControlTemplate TargetType="GroupItem">
                                <StackPanel Orientation="Horizontal">
                                    <ContentPresenter/>
                                    <ItemsPresenter/>
                                </StackPanel>
                            </ControlTemplate>
                        </Setter.Value>
                    </Setter>
                </Style>
            </GroupStyle.ContainerStyle>
        </GroupStyle>
    </ListView.GroupStyle>
    <ListView.ItemsPanel>
        <ItemsPanelTemplate>
            <StackPanel Orientation="Horizontal" HorizontalAlignment="Stretch" VerticalAlignment="Stretch" ScrollViewer.HorizontalScrollBarVisibility="Disabled" />
        </ItemsPanelTemplate>
    </ListView.ItemsPanel>
    <ListView.ItemTemplate>
        <DataTemplate>
            <StackPanel Orientation="Horizontal" HorizontalAlignment="Stretch" VerticalAlignment="Stretch" >
                <Label VerticalAlignment="Center"  Margin="0" Content="{Binding Hours}" />
                <Label VerticalAlignment="Center"  Margin="2,0,0,0" Content="{Binding WorkingHoursType}" />
            </StackPanel>
        </DataTemplate>
    </ListView.ItemTemplate>
</ListView> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-09-06T17:48:09.157

正确的做法是：

```
<ListView Grid.Row="4" Name="btView"> 
    <ListView.ItemsPanel> 
        <ItemsPanelTemplate> 
            <StackPanel Orientation="Horizontal"></StackPanel> 
        </ItemsPanelTemplate> 
    </ListView.ItemsPanel> 
    <ListView.ItemTemplate> 
        <DataTemplate> 
            <StackPanel Orientation="Horizontal"> 
                <RadioButton Name="Octave1" Content="Octave 1"/> 
                <RadioButton Name="Octave2" Content="Octave 2"/> 
                <RadioButton Name="Octave3" Content="Octave 3"/> 
                <RadioButton Name="Octave4" Content="Octave 4"/> 
            </StackPanel> 
        </DataTemplate> 
    </ListView.ItemTemplate> 

    <ListItem/> 
</ListView> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-24T06:26:37.693

这是遵循 gaurawerma 之后的最终代码

```
<ListView x:Name="listViewResourceHours" HorizontalAlignment="Stretch" VerticalAlignment="Stretch" BorderThickness="0" SelectionMode="Single" Height="100" Width="500" >
        <ListView.GroupStyle>
            <GroupStyle>
                <GroupStyle.Panel>
                    <ItemsPanelTemplate>
                        <StackPanel Orientation="Horizontal" />
                    </ItemsPanelTemplate>
                </GroupStyle.Panel>
                <GroupStyle.HeaderTemplate>
                    <DataTemplate>
                        <TextBlock FontWeight="Bold" Text="{Binding Name, StringFormat={}{0}:}" />
                    </DataTemplate>
                </GroupStyle.HeaderTemplate>
                <GroupStyle.ContainerStyle>
                    <Style TargetType="{x:Type GroupItem}">
                        <Setter Property="Template">
                            <Setter.Value>
                                <ControlTemplate TargetType="GroupItem">
                                    <StackPanel Orientation="Horizontal">
                                        <ContentPresenter Margin="0,0,0,0" VerticalAlignment="Center" />
                                        <ItemsPresenter Margin="0,0,0,0" VerticalAlignment="Center"/>
                                    </StackPanel>
                                </ControlTemplate>
                            </Setter.Value>
                        </Setter>
                    </Style>
                </GroupStyle.ContainerStyle>
            </GroupStyle>
        </ListView.GroupStyle>
        <ListView.ItemsPanel>
            <ItemsPanelTemplate>
                <StackPanel Orientation="Horizontal" HorizontalAlignment="Stretch" VerticalAlignment="Stretch" ScrollViewer.HorizontalScrollBarVisibility="Disabled" />
            </ItemsPanelTemplate>
        </ListView.ItemsPanel>
        <ListView.ItemTemplate>
            <DataTemplate>
                <StackPanel Orientation="Horizontal" HorizontalAlignment="Left" VerticalAlignment="Center" >
                    <Label VerticalAlignment="Center"  Margin="0" Content="{Binding Hours}" />
                    <Label Name="lblWorkingHours" VerticalAlignment="Center"  Margin="0,0,0,0" Content="{Binding WorkingHoursType, Converter={StaticResource ResourceKey=hoursTypeConverter}}" />
                </StackPanel>
            </DataTemplate>
        </ListView.ItemTemplate>

    </ListView> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2018-10-29T07:26:02.367

```
 <ListBox Height="50" VerticalAlignment="Top">
        <ListBox.ItemsPanel>
            <ItemsPanelTemplate>
                <VirtualizingStackPanel Orientation="Horizontal" />
            </ItemsPanelTemplate>
        </ListBox.ItemsPanel>
        <ListBoxItem Content="aaaaaaaaaaa"/>
        <ListBoxItem Content="aaaaaaaaaaa"/>
        <ListBoxItem Content="aaaaaaaaaaa"/>
        <ListBoxItem Content="aaaaaaaaaaa"/>
        <ListBoxItem Content="aaaaaaaaaaa"/>
    </ListBox> 
```

# django - Django GET 方法。赋值前引用的局部变量

> ID：10731767
> 
> 赞同：0
> 
> 时间：2012-05-24T05:42:30.027
> 
> 标签：django

我对 Django 有疑问。

我的错误信息：

**分配前引用的 /city/city 局部变量 'adv_city' 处的 UnboundLocalError**

追溯：http : [//dpaste.com/751727/](http://dpaste.com/751727/)

意见：

```
def advert_by_city(request):
    c = request.GET.get('city', '')
    if c:
        adv_city = Advert.objects.filter(city=c)

    adverts = Advert.objects.values('city').distinct()
    return render_to_response('advert_by_city', {'adverts':adverts},{'adv_city':adv_city}, context_instance=RequestContext(request)) 
```

模板：

```
{% for city in adverts %}
    <a href="city?{{ city.city }}"/>{{city.city}}</a>
<br/>
{% endfor %}

{% for adverts in adv_city%}
    {{adverts.title}}
{% endfor%} 
```

模型：

```
class Advert(models.Model):

    title = models.CharField(max_length=255)
    city = models.CharField(max_length=255) 
```

如何解决？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-24T05:48:10.263

`adv_city`如果`c`评估结果为假，您应该给出一个默认值。例如，一个空列表可能适用于您的情况：

```
c = request.GET.get('city', '')
adv_city = Advert.objects.filter(city=c) if c else [] 
```

如果你不这样做，并且`c`是假的（如你所知，Python 将空字符串视为假），那么该`adv_city`变量将不会被视为已分配。

如果您**可以**有一个`Advert`带有空字符串的有效属性作为`city`属性，那么只需删除`if`并让过滤器针对 . 的任何值运行`c`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-24T05:48:25.437

你应该记录的值`c`，我认为你的代码没有到达里面的代码`if`，如果你给它一个默认值`request.GET.get('city','')`，空字符串不会在里面`if`

# asp.net-mvc - 会话状态与 MVC 混淆

> ID：10731768
> 
> 赞同：1
> 
> 时间：2012-05-24T05:42:48.560
> 
> 标签：asp.net-mvc

我在几个 .com 上工作过，我们从未使用过内置的 ASP.NET 会话状态。它一直在检查 cookie 以进行有效的会话检查，并将会话与数据库中的内容或其他方式进行比较，但最终它是 cookie。我们没有使用任何基于 ASP.NET 的会话对象。

那么为什么人们将所有这些会话状态服务器废话与 MVC 一起使用呢？我从未见过需要它。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-24T05:52:11.910

> 我从未见过需要它。

我也是。我从不在我的 Web 应用程序中使用 ASP.NET 会话状态。我更喜欢以 RESTful 方式设计它们，而不是引入状态。我在任何 web 应用程序中做的第一件事就是在 web.config 中添加以下行，以确保任何未来的开发人员不会犯使用 session 的错误：

```
<sessionState mode="Off" /> 
```

我猜人们正在使用它来简化跨多个请求的一些易失性数据的存储。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-24T06:45:59.373

ASP.NET 确实有一个由会话 ID 索引的 SQL 支持的会话状态，该会话 ID 会根据 cookie 的会话 ID 进行检查。ASP.NET 还允许您将会话存储在内存中（默认）。MVC 中提供了相同的构建块。

基本上你已经实现的（“总是检查 cookie 是否有有效的会话检查，并将会话与数据库中的内容或其他方式进行比较，但最终它是 cookie。”）正是你在呸呸呸！重新发明轮子没有意义...

至于具体的*用例*，你可以用它来处理任何需要持久化的状态。在您的特定情况下，只需检查您存储 cookie 并查找数据库的原因 - 这正是您使用会话状态的地方（SQL 或内存）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-24T17:14:34.633

您如何处理无活动的会话超时需求？Cookie 只是不是很安全。

# android - 错误：适配器内容问题

> ID：10731771
> 
> 赞同：0
> 
> 时间：2012-05-24T05:43:06.567
> 
> 标签：android, listview

请指教我的代码有什么问题。？？？

```
STACK_TRACE=java.lang.IllegalStateException: The content of the adapter has changed but ListView did not receive a notification. Make sure the content of your adapter is not modified from a background thread, but only from the UI thread. [in ListView(2131296324, class android.widget.ListView) with Adapter(class com.platinumapps.platinumtasks.ActionsAdapter)]
at android.widget.ListView.layoutChildren(ListView.java:1556)
at android.widget.AbsListView$CheckForTap.run(AbsListView.java:2868)
at android.os.Handler.handleCallback(Handler.java:587)
at android.os.Handler.dispatchMessage(Handler.java:92)
at android.os.Looper.loop(Looper.java:132)
at android.app.ActivityThread.main(ActivityThread.java:4126)
at java.lang.reflect.Method.invokeNative(Native Method)
at java.lang.reflect.Method.invoke(Method.java:491)
at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:844)
at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:602)
at dalvik.system.NativeStart.main(Native Method) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-24T05:49:32.233

在下面调用[这个](http://developer.android.com/reference/android/widget/ArrayAdapter.html#notifyDataSetChanged%28%29)，把它放在一个线程中

```
 runOnUiThread(new Runnable(){
                 @Override
                 public void run() {
                    // call it here
                 }  
             } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-24T06:00:29.177

使用`Handlers`,`UI-threads`或`AsyncTask`(postexecute) 调用`notifydatasetchanged();`. 您正在后台线程中执行此操作...

# css - 基于“em”的非比例宽度和高度的 css

> ID：10731772
> 
> 赞同：2
> 
> 时间：2012-05-24T05:43:07.950
> 
> 标签：css, em

在处理多种分辨率时，基于“em”的方法似乎是编写 css 文件的好方法。但是，如果您说两种分辨率 480x800 和 540x960 ，那么宽度比（ 540/480 = 112.5% ）与高度比（ 960/800 = 120% ）不同。

所以，如果我有一个 em 字体大小 = 112.5% 用于从较低分辨率移动到较高分辨率，宽度似乎与新分辨率完美对齐，但高度（预计字体大小为 120%）似乎不足，因此有一个白色渲染页面的所有元素后在底部创建的空白区域。

这个问题的任何解决方案都会有很大的帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-29T06:08:41.493

`em`是*fonts*的选择单位，而不是元素尺寸的选择单位。由于它评估为 element's `font-size`，因此使用此单位设置宽度是不合理的。

您可能试图参考[垂直节奏](http://24ways.org/2006/compose-to-a-vertical-rhythm)，这是一个保持文本可读性的概念，*不应*与页面布局的其余部分混淆。

为了在不同分辨率下进行美观的渲染，您应该研究[流畅的布局](http://coding.smashingmagazine.com/2009/06/09/smart-fixes-for-fluid-layouts/)- 尝试在该页面上使用浏览器宽度。如您所见，内容流已更改以充分利用可用空间，但未调整字体大小/行高，因为这两种技术是独立实现的。

# apache-camel - 如何处理多条路由中的异常或故障

> ID：10731774
> 
> 赞同：2
> 
> 时间：2012-05-24T05:43:14.423
> 
> 标签：apache-camel

在处理多条路由之间的异常时，我遇到了一些问题。

作为一个java开发者的角度，我想把一些公共逻辑提取到一个公共路由中，这样其他路由就可以直接调用公共路由，而不用处处包含公共逻辑。（比如route-version函数调用）但是当涉及到错误处理，我发现它有点棘手。

例如：

```
//main logic 1
from("direct:route1")
  .doTry()
     .to("direct:common")
  .doCatch(Exception.class)
     .log("Error in route1")
  .end()

//main logic 2
from("direct:route2")
  .doTry()
     .to("direct:common")
  .doCatch(Exception.class)
     .log("Error in route2")
  .end()

//common logic
from("direct:common")
   .to("mock:commonlogic") 
```

问题是当从“mock:commonlogic”端点抛出一些异常时，doTry 不会捕获异常...doCatch 块在 route1 和 route2 中都定义。似乎可以在公共路由范围内处理异常。但我想要的是通用路由只是“抛出”异常，而“调用者”路由自己处理它。有没有办法做到这一点？

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-25T04:17:05.293

You need to disable error handling in the common route.Then any exceptions thrown from the common route, is not handled by any error handler, and propagated back to the caller route, which has the try .. catch block.

```
from("direct:common")
   .errorHandler(noErrorHandler())
   .to("mock:commonlogic") 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-24T10:13:07.200

您可能想要使用异常子句。 [http://camel.apache.org/exception-clause.html](http://camel.apache.org/exception-clause.html)

像这样（在路由构建器的配置方法中）

```
// A common error handler for all exceptions. You could also write onException statements for explicit exception types to handle different errors different ways.
onException(Exception.class).to("log:something"); 

from("direct:route1")...;

from("direct:route2")...; 
```

它应该为您解决问题。

onException 对于当前的路由构建器来说是全局的。

# .net - 什么是sql server中的非关键属性

> ID：10731776
> 
> 赞同：0
> 
> 时间：2012-05-24T05:43:16.263
> 
> 标签：.net, sql, sql-server, sql-server-2008, sql-server-2008-r2

我想知道sql server中的非关键属性是什么意思。这个想法与我很困惑的表有关。这是否意味着除主键之外的列

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-24T09:13:19.700

sql server 中的非关键属性是不能用于唯一标识记录的列，例如客户表中的名称或年龄列。

# css - Firefox 和 IE 在 Chrome 中看起来不同

> ID：10731777
> 
> 赞同：1
> 
> 时间：2012-05-24T05:43:32.503
> 
> 标签：css, internet-explorer, firefox, google-chrome, css-float

我想要的样式在 Chrome 中，但在 Firefox 和 IE 中看起来不同。除了“名称”字段外，我的所有字段都向右浮动。是关于漂浮的吗？我的铬： ![在此处输入图像描述](../Images/436aa6c4e2e6c439e0c595ba21724b30.png)

我的 Firefox 和 IE： ![在此处输入图像描述](../Images/33789f306294ca58aa2915f8c3918a14.png)

除了“状态”之外，还有一个巨大的空间，标题的高度也看起来更大。

===CSS====

```
.column-name { margin: 2px; width: 40%; }
.column-priority { float: right; margin: 2px 12px; text-align: center; width: 100px;}
.column-severity { float: right; margin: 2px 12px; text-align: center; width: 100px;}
.column-status { float: right; margin: 2px; width: 100px;} 
```

===HTML====

```
 <div class="results-header ">
        <div class="column-status" value="status">Status<span class="sort jive-icon-sml"></span></div>  
        <div class="column-severity" value="severity">Severity<span class="sort jive-icon-sml"></span></div>
        <div class="column-priority" value="priority">Priority<span class="sort jive-icon-sml jive-icon-arrow-generic-down"></span></div>   
        <div class="column-name"  value="name" >Name</div>
    </div> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-24T07:43:31.777

我 99% 确定这是因为您需要知道它具有哪个填充，因为在那些浏览器中它具有更高的优先级。

你可能会制定一个明星规则

```
*{margin:0; padding:0;} 
```

但同样，您需要发布更多代码，然后我才能 100% 告诉您该做什么。顺便说一句，如果您不确定与浏览器兼容性有关的任何事情，请参阅：[http ://www.quirksmode.org/css/contents.html](http://www.quirksmode.org/css/contents.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-07-16T15:27:24.740

总是使用 css 重置 {margin: 0; 填充：0；边框：0；outline: 0;} 因为每个浏览器都有自己的边距，填充...

# php - 如何在 root 上创建或编辑文件内容

> ID：10731781
> 
> 赞同：6
> 
> 时间：2012-05-24T05:44:00.370
> 
> 标签：php, file-permissions, dedicated-server

我有一个网站，当我在实时服务器上上传这个网站时，我不想要它应该询问数据库用户名、密码、网站 url..等。网站安装程序之类的东西。它在本地系统中运行良好。

现在我的问题是：我需要在 .htaccess 文件中更改 RewriteBase。但是这个文件位于站点的根目录。所以我得到了创建新文件或编辑/复制位于根目录的文件的权限问题。

**警告：重命名（generate.htaccess，.htaccess）：权限被拒绝**

**警告：复制（.htaccess）：无法打开流：权限被拒绝**

我该怎么办。请帮忙。

谢谢。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-24T06:08:32.167

要在根目录上创建/修改文件，您必须授予 0777 对您的根目录的权限。**这不是一个好习惯。**

我建议最初创建具有 777 权限的空 .htaccess 或其他所需文件。在该文件中写入内容之前，首先检查从源文件复制内容之后的写入权限（在您尝试复制的情况下）。

希望这可能会有所帮助。

# jquery - Jquery - 动画背景问题

> ID：10731784
> 
> 赞同：1
> 
> 时间：2012-05-24T05:44:33.150
> 
> 标签：jquery

我在网上搜索了一个背景动画样本。我找到了这个网址：

[http://jsfiddle.net/rwaldron/TzWQA/](http://jsfiddle.net/rwaldron/TzWQA/)

它适用于 safari 和 chrome，但动画背景不适用于歌剧和 Firefox。是否有任何解决方法可以跨浏览器进行这项工作？

它包含的代码是：

```
$(document).ready(function(){
 $("#puppies")
    .animate({
        backgroundPositionY: "0px",
        backgroundPositionX: "-250px"
    }, 2000);
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-24T05:55:34.070

@AlphaMale 对您的代码失败原因的描述是准确的。我使用了一个方便的代码片段，它使用以下语法使这项工作跨浏览器：

```
$(document).ready(function(){
  $("#puppies")
    .animate({
        backgroundPosition : "(0 -250px)"
    }, 2000);
}); 
```

在行动中看到它！ [http://jsfiddle.net/dUmNN/1/](http://jsfiddle.net/dUmNN/1/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-24T05:56:12.343

**FF 不支持**backgroundPositionY**和**backgroundPositionX 。**所以如果你想为背景设置动画，你应该将**X,Y**值一起传递给**background-position**。**

 **以下是对同一问题的讨论：

**[背景图像动画在 Firefox 中不起作用](https://stackoverflow.com/questions/8466346/background-image-animation-not-working-in-firefox)**

另见：

**[http://www.protofunc.com/scripts/jquery/backgroundPosition/](http://www.protofunc.com/scripts/jquery/backgroundPosition/)**

**[http://snook.ca/archives/javascript/jquery-bg-image-animations/](http://snook.ca/archives/javascript/jquery-bg-image-animations/)**

希望这可以帮助。**

# c++ - 在“for”循环条件中使用“三元运算”是一种好习惯吗？

> ID：10731785
> 
> 赞同：2
> 
> 时间：2012-05-24T05:44:35.500
> 
> 标签：c++, for-loop, conditional-statements, ternary-operator

在 for 循环条件下使用三元运算是一种好习惯吗？我问这个是因为我遇到了在三元运算中解决我在 for 循环条件下的问题的情况。

例如：

```
for( short i = 0 ; i < count ; i++ ){
   for( short j = 0 ; j < ( ( x[i] < y[i] ) ? x[i] : y[i] ) ; j++ ){ //Here I am using ternary operation at for loop condition place
       //.....
       //.....Some Code Here .......
       //.....
   }
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-24T05:48:49.190

我会选择`min(x[i], y[i])`，只是因为它更清晰，但我没有看到您的代码有直接问题。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-24T06:03:47.210

我个人会去`min(x[i], y[i])`。但是，可以通过预先计算值并使用它来处理您的可读性问题：

```
for( short i = 0 ; i < count ; i++ ){
   int jCount = ( x[i] < y[i] ) ? x[i] : y[i]; // or min equivalent
   for( short j = 0 ; j < jCount ; j++ ){ 

   }
} 
```

这在一定程度上改变了行为，因为它使条件对循环内部`x[i]`和`y[i]`内部的更改视而不见。`j`我不确定这是否适合您的用例。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-24T05:49:18.117

如果您通常可以使用三元运算符，那么没有理由不在您的 for 循环条件中使用它。（我自己喜欢三元运算符，但我知道有些人认为它很容易混淆）

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-05-24T08:14:05.443

我看不出有什么问题。

*我的建议。*
1.`short`改为`int`。
2\. `#define ternary`（可选）。

```
#define cond(n)  (( x[n] < y[n] ) ? x[n] : y[n] )

for( int a = 0; a < count; a++)
  for( int b = 0; b < cond(a), b++)
 {

  ........code...............

 } 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-05-24T06:04:01.267

我想使用三元运算符没有问题，除了它使代码不可读。但是 `x[i] < y[i] ) ? x[i] : y[i]`如果你也在修改`x[i] and y[i]`insdide for loop ，这样的条件有时会产生问题。所以我建议不要使用，除非你真的知道你在做什么

# iphone - Sqlite3 DB 下载路径

> ID：10731791
> 
> 赞同：6
> 
> 时间：2012-05-24T05:44:49.947
> 
> 标签：iphone, ipad

有人知道我可以从哪个链接下载 SQlite3 Database for Xcode。我想在 Xcode4.2 的项目中使用数据库。请提供下载链接。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-24T06:29:48.273

它不像下载数据库。在某些选项中，您必须通过终端或 Mozilla firefox 在项目中创建 sqlite3 数据库（为 sqlite3 管理器提供附加组件 - 谷歌它）。创建数据库后，您必须在苹果开发人员文档提供的项目中添加 libsqlite3.0.dylib 框架。

有关更多信息，请遵循[本](http://www.icodeblog.com/2008/08/19/iphone-programming-tutorial-creating-a-todo-list-using-sqlite-part-1/)教程。这将是在 sqlite3 上工作的一个很好的开始。

# azure - 如何更改现有 Windows Azure 服务总线主题上的重复检测窗口？

> ID：10731794
> 
> 赞同：0
> 
> 时间：2012-05-24T05:45:12.433
> 
> 标签：azure, servicebus, azureservicebus

是否可以更改现有 Windows Azure 服务总线主题上的重复检测窗口？

我正在使用 C# 与服务总线交互。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-24T11:56:46.847

您今天无法更新代理中现有实体的核心策略。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-24T08:48:26.313

我认为您需要设置 DuplicateDetectionHistoryTimeWindow

[http://msdn.microsoft.com/en-us/library/microsoft.servicebus.messaging.queuedescription.duplicatedetectionhistorytimewindow.aspx](http://msdn.microsoft.com/en-us/library/microsoft.servicebus.messaging.queuedescription.duplicatedetectionhistorytimewindow.aspx)

Alan Smith 有一篇不错的博文（概述）： http: [//geekswithblogs.net/asmith/archive/2011/08/17/146556.aspx](http://geekswithblogs.net/asmith/archive/2011/08/17/146556.aspx)

# magnolia - 玉兰@cms.newBar

> ID：10731798
> 
> 赞同：0
> 
> 时间：2012-05-24T05:45:22.427
> 
> 标签：magnolia

我正在创建一些 Magnolia 模板，想知道是否有人找到了一种方法来创建一个`@cms.newBar`并以某种方式使用一个节点作为可用段落的列表。语法如下：

```
 [@cms.newBar newLabel="Add Content" paragraph="template1, template2" /] 
```

我想使用该节点来避免在创建新模板时返回并添加新模板。

我在[这里](http://dev.magnolia-cms.com/ref/4.0.3/magnolia-taglib-cms/tlddoc/cms/newBar.html)看过文档，知道没有指定任何内容，但想看看是否有人找到了方法？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-27T16:38:10.880

你可以做几件事，都归结为相同的：

*   在模板定义中配置一个包含“template1, template2”的字符串属性。假设您使用 Freemarker 作为模板语言，请使用`${def.thatProperty}`(def 引用您的模板定义) 引用它

*   让您的模型类返回该值：`${model.whatsCooking}`，其中您的模型类有一个`String getWhatsCooking()`返回“template1，template2”的方法（或您能想出的任何其他决定哪些段落应该可用的方法

*   [STK](http://stk.magnolia-cms.com)做了类似于 (1) 的事情 - 它的模板定义包含`List`s 的“可用”段落，并且它的模板使用一些实用方法将其转换为逗号分隔的列表，与新栏一起使用，所以类似于`${stk.toStringList(def.main.paragraphs)}`(I can'不记得确切的名称和语义，但你明白了要点）。

您也许应该考虑为此研究 STK，以及很多事情。

至于文档，在这种情况下[，模板指南](http://documentation.magnolia-cms.com/templates.html)和其他文档可能比 javadoc/tlddoc 更有用。

高温下，

# c# - 在 C# 中显示带有时间线的时间片

> ID：10731810
> 
> 赞同：-3
> 
> 时间：2012-05-24T05:46:52.317
> 
> 标签：c#, .net

我想用 c# 实现 sjf（调度），我需要时间线来展示它是如何工作的。例如，在这个时间片中，该进程完成了它的工作。我想以图形方式显示它。

我怎么能这样做？

像这样的东西：

![在此处输入图像描述](../Images/7b53a527ee220d02412d70fbb8b7aecc.png)

我可以实现，我只是不知道如何以图形方式显示它。它是 C# 中的 Windows 窗体应用程序

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-29T21:18:28.550

要使用 WinForms / C# 以图形方式显示您所描述的计划，请考虑使用甘特图控件。

不要尝试自己构建控件，有很好的现成控件，它们功能强大、价格低廉、支持良好并且有大量示例代码。

Telerik 例如：[http ://www.telerik.com/products/winforms/chart.aspx](http://www.telerik.com/products/winforms/chart.aspx)

我提到 Telerik，因为我之前使用过他们的 WinForms、WPF 和 ASP.Net 控件，它们有很多不同的示例代码片段，因此很容易测试，并且通过定期更新维护良好。获取试用版，看看它如何为您工作，然后从那里开始。

Gannt 控件还有很多其他来源，请参阅之前的 StackOverflow 主题：[Windows 窗体上的甘特图控件](https://stackoverflow.com/questions/367570/gantt-chart-controls-on-windows-forms)

# php - LOCK FILE PHP for read 然后无法读取？

> ID：10731812
> 
> 赞同：1
> 
> 时间：2012-05-24T05:46:59.333
> 
> 标签：php, file, locking

我正在锁定文件，但是当我阅读它们时，我不能，我的代码......

```
// ACQUIRE READ LOCK
if(flock($file, LOCK_SH)) {
// READ HASHES FILE
if($contents = file('haasdas.txt')) {
    // RELEASE READ LOCK
    flock($file, LOCK_UN);
} else {
            echo 'errrrrrorzzzer';
      }
} 
```

这里发生了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-24T05:56:15.197

As the [docs](http://at2.php.net/manual/en/function.flock.php) mention, `flock()` works not on a filename, but on a file descriptor:

```
$fd=fopen($filename,'rb');
while (!flock($fd,LOCK_SH)) usleep(500);
$fs=fstat($fd);
$contents=fread($fd,$fs['size']);
flock($fd,LOCK_UN);
fclose($fd); 
```

error handling is left as an exercise to the reader ...

# iphone - 使用 Twitter API 实现发送直接消息的可能性

> ID：10731822
> 
> 赞同：0
> 
> 时间：2012-05-24T05:48:12.807
> 
> 标签：iphone, ios, twitter, ios5

我想知道如何在 Twitter 上发送多条直接消息。在我使用 twitter api 的应用程序中，我可以将直接消息发送给一个（使用 DM 语法）。

目前我可以看到 MultiDM 网站等一些工具允许一次发送多个直接消息。那么这可能来自 iPhone 的 twitter api 吗？

我也想知道 MultiDM 网站是如何工作的

请告诉我

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-13T09:08:49.420

是的，您不能在一次 API 调用中将 DM 发送给多个用户。如果您想将 DM 发送给多个用户，只需创建一个包含所有用户 ID 或屏幕名称的数组，然后在循环中通过以下 API 向 All 发送直接消息... [https://dev.twitter.com/docs/api /1/post/direct_messages/新](https://dev.twitter.com/docs/api/1/post/direct_messages/new)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-24T06:27:02.470

在 twitter API 中只有 1 种发送 DM 的方法：[https ://dev.twitter.com/docs/api/1/post/direct_messages/new](https://dev.twitter.com/docs/api/1/post/direct_messages/new)

如果您需要发送多个 DM - 只需多次调用此方法（使用不同的收件人）

# c# - C# 中的 Bitvector32 和 Bitarray

> ID：10731823
> 
> 赞同：1
> 
> 时间：2012-05-24T05:48:19.827
> 
> 标签：c#, bitarray, bitvector

我想知道 Bitvector32 是否有在 O(1) 时间内运行的位运算符。我目前正在使用大尺寸的 BitArray 并使用按 O（位数组的大小）操作的按位与、或和非。

我在互联网上搜索了这个，但找不到答案。希望这里的人能帮忙！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-24T05:53:16.957

鉴于 a`BitVector32`始终是 32 位，因此没有可言的大小变化 - 那么如何根据数据大小来表示任何操作呢？

就我个人而言，我从来没有找到`BitVector32`一个非常令人愉快的类型——我通常可能只是坚持使用 a`UInt32`来表示 32 位，并使用普通`&`的`|`等运算符。

如果你想`BitArray`用一堆值替换你的`BitVector32`值，那最终仍然会使每个操作 O(n)。基本上很难避免这种情况，除非您实际存储原始值和操作，推迟操作的实际应用——这将*更加*复杂，并且只有在您只访问一小部分结果时才能使事情变得更好。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-24T05:55:18.473

*   将 BitVector32 转换为 int 是 O(1) 操作。（[参考](http://msdn.microsoft.com/en-US/library/system.collections.specialized.bitvector32.data)）
*   将 int 转换为 BitVector32 是一个 O(1) 操作。（[参考](http://msdn.microsoft.com/en-US/library/2zxz5d6h)）
*   对 int 执行按位运算是 O(1) 运算。

因此，

```
var vectorAnd = new BitVector32(vector1.Data & vector2.Data);
var vectorOr = new BitVector32(vector1.Data | vector2.Data);
var vectorNot = new BitVector32(~vector1.Data); 
```

都是 O(1) 操作。

# php - 一起使用 HTML 和 PHP？

> ID：10731845
> 
> 赞同：0
> 
> 时间：2012-05-24T05:50:21.927
> 
> 标签：php, html, css, web

我需要制作一个支持下载/上传等基本功能的网站。到目前为止，我只使用基本的 HTML、CSS 和 Jquery 功能完成了设计。但是我被要求在我的网站中加入另一个学生网站。它执行诸如上传文档、创建新数据样本、更新等功能。他已经完全在 PHP 上建立了他的网站。我想帮助了解如何将他的工作与我到目前为止所获得的任何东西结合起来？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-24T06:01:38.550

你当然可以把它们结合起来。

PHP（和任何其他服务器端技术）用于生成 HTML 内容并在服务器上对其进行处理，然后再将输出返回到客户端的 Web 浏览器。

我**强烈**建议你学习 PHP，至少是基础知识。然后你就会明白整个想法；但是现在让事情变得清晰（尽管我认为在您首先学习 PHP 之前它们不会清晰）让我向您展示如何将 PHP 和 HTML 结合起来作为快速示例：

1-您可以将它们与 PHP echo 语句结合起来，如下所示：

```
 <?php 
 echo "<html>";
 echo "<title>HTML with PHP</title>";
 echo "<b>My Example</b>";

 //your php code here
 // Or you can use the print command

 print "<i>Print works too!</i>"; 
 ?> 
```

还有另一种方式，例如：

2- 在 HTML 中嵌入 PHP 代码

```
 <html> 
 <title>HTML with PHP</title>
 <body>
 <h1>My Example</h1>

 <?php
 //your php code here
 ?>

 <b>Here is some more HTML</b>

 <?php
 //more php code
 ?>

 </body>
 </html> 
```

但是，请相信我，您会更好地了解我在上面提到的学习 PHP 时发生了什么。另外，互联网上有一些资源可以开始学习 PHP。（谷歌是你的朋友！）

祝你好运！

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-24T05:51:59.850

PHP 通常用于生成 HTML，因此您可以在通常使用 HTML 的任何地方使用它。随意混搭代码（在合理范围内），它应该可以正常工作。

不过，我建议让其他学生帮助你。如果他们创建了 PHP，他们可能比您更了解网站创建。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-24T06:01:50.890

*   将您的网站托管在使用 Apache 网络服务器的服务器上，以便您的 PHP 页面将在服务器端编译。
*   将所有 .html 页面重命名为 .php 页面，您希望在其中包含一些 php 逻辑。
*   在 PHP 页面中嵌入您的 PHP 代码`<?php`和`?>`标签。
*   使用单独的 PHP 文件进行连接、功能等。
*   如果您感到困惑，那么您会发现[这个](http://www.tizag.com/phpT/)PHP 基础教程很有帮助。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-24T06:22:14.720

只需在 HTML 中设计页面并将其重命名为 php。在里面做任何你想要的php函数

```
<?php

?> 
```

此嵌套之外的脚本将显示为 html。如果你想在里面显示任何东西`<?php ?>`，只需使用`echo`,`print`或`printf`

您可以在**[这里](http://in.answers.yahoo.com/question/index?qid=20100512235357AAy074C)**查看它们的区别。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-24T06:23:35.837

我没有看到这里提到的一件事是模板引擎，在将 PHP 与 HTML 分离时，它实际上非常方便。
我自己使用Smarty。模板引擎的好处是您可以真正将模板 (HTML) 与 PHP 分开。所以设计者几乎不需要知道任何PHP函数，PHP程序员只需要关心功能而不是设计。
PHP 程序员（在这种情况下使用 smarty）将要显示的值分配给 smarty 模板，然后设计人员只需将这些变量包含在他的普通 HTML 中。如果你问我，它就像一个魅力，如果做得对，真的不需要很多代码更改（在这种情况下不确定）。

[Smarty 模板引擎](http://www.smarty.net/)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-05-24T06:38:06.707

对于 PHP 的启动，我认为最好的路径是[http://www.w3schools.com/php/default.asp](http://www.w3schools.com/php/default.asp)，如果要添加学生的页面，请检查页面是静态的还是动态的，如果这些页面是静态的（完全 HTML），而不需要做任何事情，只需将这些页面保存为 .php 扩展名，如果有动态页面（从数据库连接），那么您应该对基本 php 有很多了解。

# iphone - 图像在本地存储为来自 XML 解析的字节码，如果存储则显示，否则进行解析。

> ID：10731847
> 
> 赞同：0
> 
> 时间：2012-05-24T05:50:26.700
> 
> 标签：iphone

我有一个应用程序，在启动应用程序 XML 解析时，它从 hp、dell 等 URL 提供 Main 类别......我在 Tableview 中显示它。

然后单击特定单元格，我可以获得主要类别的详细信息，表示其子类别，如[http://www.dealsbell.com/findcoupon.php?store=hp](http://www.dealsbell.com/findcoupon.php?store=hp)

在这里，我也在解析后正确获取数据。

但我在这里担心的是，在（[http://www.dealsbell.com/findcoupon.php?store=hp](http://www.dealsbell.com/findcoupon.php?store=hp)）这个链接中，我正在获取图像。

每个特定的子类别都将具有相同的图像。所以我想做这样的事情，如果第一次从 URL 加载图像，那么它将显示解析的图像，否则我想将该**图像作为其字节码**存储在文件夹/文件/以任何方式在我的设备中第一次解析.

如果一旦图像以特定方式存储在我的设备中，下次我将去查看子类别时，它将首先检查此图像是否存储在我的设备本地。

如果是，那么它应该去特定位置获取这个本地图像并将其显示到每个单元格，否则将解析并显示图像。

我希望你得到，我想问的。

请指导我，这怎么可能以及获得结果的方法是什么。

如果您可以建议任何示例或链接，那么它对我来说会更有效。

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-24T06:11:32.070

可能有两种方法可以实现这一目标。

1.  从 Image 中获取 NSData 并将其保存在 UserDefaults 或数据库中。
2.  将图像转储到应用程序文件夹中并从该位置选择图像。

因此，每当您尝试在某个位置加载图像以进行子类别检查时，如果存在，请使用该图像。如果您存储了图像并且如果有任何更新的图像出现，则删除以前的副本并存储新的。

```
-(void) SaveImageinDocumentWithName:(UIImage*) aUIImage Name:(NSString*) aName
{
    if(aUIImage)
    {
        NSAutoreleasePool* pool = [[NSAutoreleasePool alloc] init];
        NSArray *paths = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES);
        NSString *documentsDirectory = [paths objectAtIndex:0];
        NSMutableString* str = [[NSMutableString alloc] initWithCapacity:300];
        [str appendString:documentsDirectory];
        [str appendString:@"/"];
        [str appendString:aName];

        NSFileManager *fileManager = [NSFileManager defaultManager];
        [UIImagePNGRepresentation(aUIImage) writeToFile:str atomically:YES];

        if(str)
        {
            [str release];
            str = nil;

        }
        if(fileManager)
        {
            [fileManager release];
            fileManager = nil;
        }

        [pool release];
    }   

} 
```

-- 获取保存的图像

```
 -(UIImage*)GetSavedImageWithName:(NSString*) aFileName
    {
        NSArray *paths = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES);
        NSString *documentsDirectory = [paths objectAtIndex:0];
        NSMutableString* str = [[NSMutableString alloc] initWithCapacity:300];
        [str appendString:documentsDirectory];
        [str appendString:@"/"];
        [str appendString:aFileName];

        NSFileManager *fileManager = [NSFileManager defaultManager];
        BOOL success = [fileManager fileExistsAtPath:str];

        NSData *dataToWrite = nil;

        UIImage* image = nil; 

        if(!success)
        {

        }
        else 
        {
            image = [[UIImage alloc] initWithContentsOfFile:str];
        }
        if(dataToWrite)
        {
            [dataToWrite release];
            dataToWrite = nil;
        }

        if(str)
        {
            [str release];
            str = nil;
        }

        if(fileManager)
        {
            [fileManager release];
            fileManager = nil;
        }
        return image;
    } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-24T07:14:36.893

解析 dealbell.com/wp-content/uploads/mobile/hp.gif 并仅获取 hp.gif

```
NSString *strImage = [NSString stringWithFormat:@"%@",aBook.image];

UIImage* image = [self GetSavedImageWithName:strImage];

if(image) // This means Image exists
{
  // Do what you want
}
else
{
    NSURL *url4Image = [NSURL URLWithString:strImage]; 

    NSData *data = [NSData dataWithContentsOfURL:url4Image];

    if(data != NULL) 
    {
       image =[[UIImage alloc] initWithData:data]; 
       [self SaveImageinDocumentWithName:image Name:strImage]; // save for future ref.
    } 
    else
    { 
      image =[UIImage imageNamed:@"icon.png"]; 
    } 
 } 
```

# jquery - 如何选择一类的原始表（类：奇数，偶数）

> ID：10731849
> 
> 赞同：0
> 
> 时间：2012-05-24T05:50:46.230
> 
> 标签：jquery

我有一张桌子，其中奇数行有类' `class_odd`'，偶数行有类' `class_even`'。

我需要通过单击选择包含可以包含`class_odd`或`class_even`在表格上的行的tr。

如何添加到`$(".class_tr").click(function()`class_odd 和 class_even 而不是一个类`class_tr`？

```
$(document).ready(function()
{
$(".class_tr").click(function()
//do something
{ 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-24T05:52:55.123

所以......你说的是你在找`$(".class_odd, .class_even")`什么？

# python - else: 语法不正确

> ID：10731850
> 
> 赞同：-1
> 
> 时间：2012-05-24T05:50:47.910
> 
> 标签：python, syntax, syntax-error, if-statement

我对 python 有点陌生，我正在尝试编写这个脚本来取消超过 1 mb 的打印作业。（它检查大小的行设置为 1 mb 只是为了确保它正常工作）。出于某种原因，我最后一个 else 语句一直说它的语法无效。我检查了是否所有括号都关闭了，我找不到一对不匹配的。有人可以告诉我为什么它说它无效吗？你也可以看看我的第 24 行 (fullname = ...grep...) 以确保上面的语法是正确的吗？

```
#! /usr/bin/python

import os

infile = open ('test.pl', 'r')

outfile = open('print.reportpython', 'w+')

newfile = infile.readlines()

newfile.pop(0)

count = 0

firstline = newfile[0]

splitline = firstline.split()

currentuser = splitline[1]

currentuser = str(currentuser)

for line in newfile:

  newline = line.split()

  names = newline[1]

  size = int(newline[2])

  names = str(names)

  print names

  if names is currentuser:

    if size >= 1:

      os.popen ("cancel lab01-10292")

  fullname = os.popen("cat /etc/passwd |grep " + newline[1] + "cut -d':' -f5")

  count += 1

  print count

  else:

    print outfile.write ("(" + currentuser + ")")

    print outfile.write (" ")

    count = 0

    currentuser = names 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-24T05:59:39.440

You do:

```
if foo:
  bar
baz
else:
  bomb 
```

Which is wrong. All the lines between the `if` and its corresponding `else` must be indented deeper than the `if` and `else`, like this:

```
if foo:
  bar
  baz
else:
  bomb 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-24T05:59:19.923

The `else` is at the same indentation as the previous line, but the statement on the previous line doesn't have an `else` clause. Fix your indentation.

# joomla - joomla 网站无法访问中央服务器 - 有可能吗？

> ID：10731871
> 
> 赞同：-1
> 
> 时间：2012-05-24T05:53:23.563
> 
> 标签：joomla

我想在现有域名中开发一个网站，比如[http://www.example.com/~username/](http://www.example.com/~username/) 我只能访问我的域。有什么方法可以创建一个 joomla 网站吗？换句话说，我必须要求主服务器中的人安装joomla吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-24T06:43:17.250

[从这里](http://www.joomla.org/download.html)下载 joomla并将其上传到您的 ftp。然后转到您的网站地址，它将带您完成安装过程。如果您无权访问您的服务器，那么您将不得不询问任何人。

# django - django-admin.py startproject mysite 命令不起作用

> ID：10731873
> 
> 赞同：2
> 
> 时间：2012-05-24T05:53:55.947
> 
> 标签：django, python-2.7

我正在尝试使用 django 创建第一个项目，但在第一步本身就卡住了。每当我发出`django-admin.py startproject mysite command not working`命令时，什么都不会发生，并且命令提示符会出现帮助相关的信息。我已经设置`PYTHON_HOME`，`PATH`变量设置正确。我正在使用python 2.7。

我的命令提示符如下所示：

```
C:\Shekhar\djangoWorld>c:\Python27\Scripts\django-admin.py startproject mysite
Usage: django-admin.py subcommand [options] [args]

Options:
  -v VERBOSITY, --verbosity=VERBOSITY
                        Verbosity level; 0=minimal output, 1=normal output,
                        2=verbose output, 3=very verbose output
  --settings=SETTINGS   The Python path to a settings module, e.g.
                        "myproject.settings.main". If this isn't provided, the
                        DJANGO_SETTINGS_MODULE environment variable will be
                        used.
  --pythonpath=PYTHONPATH
                        A directory to add to the Python path, e.g.
                        "/home/djangoprojects/myproject".
  --traceback           Print traceback on exception
  --version             show program's version number and exit
  -h, --help            show this help message and exit

Type 'django-admin.py help <subcommand>' for help on a specific subcommand.

Available subcommands:

[django]
    cleanup
    compilemessages
    createcachetable
    dbshell
    diffsettings
    dumpdata
    flush
    inspectdb
    loaddata
    makemessages
    reset
    runfcgi 
```

为什么 django 不为我创建项目？

请帮忙 ！！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-24T06:20:47.247

在 django-admin.py 之前添加“python”（或添加 python.exe 的完整路径）。

C:\Shekhar\djangoWorld> `python`c:\Python27\Scripts\django-admin.py startproject mysite

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-24T05:58:10.017

您的 Django 安装已损坏。重新安装。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-08-24T16:45:23.607

在我的情况下，我在 Windows 8 上使用[Canopy](https://www.enthought.com/products/canopy/)，它对我有用的唯一方法是将 python 命令也放入 django-admin.py 的完整路径，例如这个示例 "c:> python C:\Users\\AppData\Local \Enthought\Canopy\User\Scripts\django-admin.py startproject "。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-02-07T04:36:44.420

我也安装了 Canopy。我将 django-admin 文件复制到我想安装我的第一个项目的目录中。我打开python命令提示符并输入：

python django-admin.py startproject mysite

这对我有用。感谢那些发帖的人，因为这让我走上了正确的道路。

# java - 遍历一棵树 - 但一步一步

> ID：10731875
> 
> 赞同：3
> 
> 时间：2012-05-24T05:53:59.423
> 
> 标签：java, algorithm, data-structures, tree, traversal

我有以下代码来遍历一棵树（预购）：

```
public void traverse(Node node) {
    visit(node);
    for (Node child : node.getChildren()) {
        traverse(child);
    } 
} 
```

我想要一步一步的遍历。类似 an 的东西`Iterator`，这样可以成为另一个应用程序的客户端（调用者）可以控制遍历。（例如：在 UI 中我们有一个“下一步”按钮，通过单击此按钮，我们必须访问下一个节点）

我目前的解决方案是这样的：

```
List<Node> nodes = new ArrayList<Node>();
collectNodes(root, nodes);
Iterator<Node> it = nodes.iterator();
// do my job.
...

public void collectNodes(Node node, List<Node> nodes) {
    nodes.add(node);
    for (Node child : node.getChildren()) {
        collectNodes(child, nodes);
    } 
} 
```

正如您在代码中看到的，我正在访问所有节点（在 collectNodes 中）以收集它们并将它们以预购格式放入列表中。

我想知道是否有没有这个额外的（collectNodes）迭代的解决方案？

问候，穆罕默德

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-24T09:47:28.407

您发布的算法背后的想法是将方法堆栈用作隐式数据结构。每当您输入 traverse 时，所有节点都会隐式推送到函数堆栈上，然后当您遍历它们时，它们会被弹出。

现在要使该算法像迭代器一样可挂起，您需要做的就是使这个隐式堆栈显式。向您的班级添加一个堆栈，在访问时推送所有孩子，然后始终使用堆栈上的顶部节点继续。您可以随时暂停此操作，同时将堆栈保持为可以在任何地方暂停和存储的状态。

这个技巧实际上适用于任何类型的递归算法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-09-17T06:36:13.397

`collectNodes(child)`如果您的代码会给出错误，您不认为最后一行，因为该`collectNodes()`方法将接受两个参数。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-05-24T05:56:36.630

[您可以在此处](http://www2.hawaii.edu/~esb/2010spring.ics211/TreeIterator.java.html)找到使用迭代器逐步遍历树的代码

希望这会帮助你。

# jquery - 谷歌字体 API 导致 jquery 褪色闪烁

> ID：10731876
> 
> 赞同：0
> 
> 时间：2012-05-24T05:54:00.473
> 
> 标签：jquery, fonts

我在带有 jQ​​uery 1.7.2 的页面上使用 Google Fonts API。我只是添加了我漂亮的字体：

```
<link href='http://fonts.googleapis.com/css?family=Marmelad' rel='stylesheet' type='text/css'> 
```

然后我使用 jQuery 淡出一个 div，将第二个 HTML 文件加载（）到 div 中并淡入。一切正常。

问题是页面上的任何 Marmelad（我的 google 字体）文本都会在淡入淡出过渡结束时闪烁。如果我只是将相同的 Marmelad 文本更改为 Arial 或其他一些常用字体，则不会发生闪烁。

有谁知道如何解决这一问题？

这就是我淡出/在 div 中的方式。

```
jQuery("#clickme").click(function() { 
jQuery('#secondarybox').fadeOut('fast', function() {   
jQuery('#secondarybox').load('nextstep.html', function() { 
jQuery('#secondarybox').fadeIn('slow'); }); }); 
}); 
```

同样，当我在整个页面上使用 Arial 时没有文本闪烁，但如果我使用 Google 字体，所有文本都会闪烁，包括不涉及过渡/淡入淡出的文本。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-15T21:26:58.963

这对我有帮助：

```
$('.slider_container').fadeIn(function(){
    this.style.removeAttribute("filter");
}); 
```

它仅适用于 IE。我在 Chrome 中遇到了同样的问题。

# php - PHP/curl：namelookup_time/dns 减慢请求

> ID：10731877
> 
> 赞同：3
> 
> 时间：2012-05-24T05:54:00.813
> 
> 标签：php, curl, dns, ipv6

编辑：找到部分原因 - 见底部。

我正在从 php 进行标准 curl 调用。但是，在名称解析期间似乎有一个挂断。在我的 OSX 机器上，对于同一子网的此查询和其他查询，namelookup_time 始终超过 1 秒。我的子网上的一个 linux 机器执行相同的查询对另一个子网有 0.02 秒的响应，所以这是我的机器的问题。

这是一个问题，因为我们的应用程序多次调用此子网来构建页面，因此秒数加起来。

我的 curl_getinfo 响应（网址被剪掉）

```
array
  'url' => string ' < SNIPPED > '... (length=1449)
  'content_type' => string 'text/plain; charset=utf-8' (length=25)
  'http_code' => int 200
  'header_size' => int 227
  'request_size' => int 1480
  'filetime' => int -1
  'ssl_verify_result' => int 0
  'redirect_count' => int 0
  'total_time' => float 1.165444
  'namelookup_time' => float 1.001272
  'connect_time' => float 1.017765
  'pretransfer_time' => float 1.017781
  'size_upload' => float 0
  'size_download' => float 92562
  'speed_download' => float 79422
  'speed_upload' => float 0
  'download_content_length' => float 92562
  'upload_content_length' => float 0
  'starttransfer_time' => float 1.043094
  'redirect_time' => float 0
  'certinfo' => 
    array
      empty
  'redirect_url' => string '' (length=0) 
```

我怀疑名称查找滞后是由于 IPv6 造成的，所以我尝试了以下方法：

1) 按照此处的说明在 OSX 上关闭 Ipv6，包括重新启动。我将 IPv6 的所有实例设置为**INACTIVE**，就像文章建议的那样。

[http://community.centrify.com/t5/Express-for-Mac-Tips-and-Tricks/Using-local-domains-with-Centrify-Directcontrol-on-the-Mac/ba-p/3724](http://community.centrify.com/t5/Express-for-Mac-Tips-and-Tricks/Using-local-domains-with-Centrify-Directcontrol-on-the-Mac/ba-p/3724)

我在这里确认我的 Mac 不支持 IPv6：http: [//ipv6test.google.com/](http://ipv6test.google.com/)。

2) 使用 --disable-ipv6 重建 PHP。

php -i 显示：IPv6 支持 => 禁用

虽然在 curl 部分，它显示“IPv6 => Yes”，但我不知道如何通过手术将其关闭。

3）在 curl 调用之前运行这个：

curl_setopt($c, CURLOPT_IPRESOLVE, CURL_IPRESOLVE_V4 );

不幸的是，上述步骤都没有奏效——我仍然需要 1 秒以上的名称解析时间。有没有人有任何故障排除建议，或者更好的是，灵丹妙药？:)

（注意 - 我已经用谷歌搜索并解决了这个问题，但无济于事..）

编辑：在下面回答 ckhan 的问题：
1）我使用 IP 地址或 FQDN 得到相同的 1 sec+ namelookup_time：

```
'url' => string 'HTTP://172.19.105.171:8070  <SNIPPED> '... (length=1439)
...
'namelookup_time' => float 1.001309 
```

2）命令行客户端没有同样的问题：

```
# url.txt has the same url as the above curl call
time cat url.txt |xargs curl
<... response output ...>
real  0m0.053s
user  0m0.009s
sys 0m0.008s 
```

3）dig似乎访问服务器没有问题。

```
dig 172.19.105.171
...
;; Query time: 77 msec
... 
```

我的环境：
PHP 5.3.8
OSX 10.7.3

**部分解决方案**

应用程序代码使用 curl_multi_select，默认超时时间为 1 秒。将此延迟更改为 0.00005 秒会使呼叫返回更快。所以这就是造成延迟的原因。但是，我还不知道为什么这在 Linux 与 OSX 或我构建的特定风格的 php/libcurl (5.3.8) 上有所不同。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-25T01:53:59.927

PHP 应用程序代码使用 curl_multi_select，默认超时时间为 1 秒。将此延迟更改为 0.00005 秒会使呼叫返回更快。所以这就是造成延迟的原因。但是，我还不知道为什么这在 Linux 与 OSX 或我构建的特定风格的 php/libcurl (5.3.8) 上有所不同。

我将打开一个不同的 SO 问题来尝试解决 curl_multi_select 问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-04-08T10:22:05.970

您可以在 /etc/hosts 中固定您的域，然后 php curl 不需要查找 DNS 来查找 IP 地址。这对我有用。

# javascript - 带有 javascript 或 jquery 的随机数

> ID：10731878
> 
> 赞同：0
> 
> 时间：2012-05-24T05:54:03.247
> 
> 标签：javascript, jquery, html

我正在尝试制作一个脚本来选择两个数字之间的随机数。但有时它会选择相同的数字。我不想重复相同的数字，直到数组完成。

这是我的代码

```
$(document).ready(function () {
    abc();
    test = array();

    function abc() {
        res = randomXToY(1, 10, 0);

        $('#img' + res).fadeTo(1200, 1);
        //$(this).addClass('activeImg');
        //});
        setTimeout(function () {
            removeClassImg(res)
        }, 3000);
    }

    function removeClassImg(res) {
        $('#img' + res).fadeTo(1200, 0.1);
        //$('#img' + res).removeClass('activeImg');
        abc();
    }

    function randomXToY(minVal, maxVal, floatVal) {
        var randVal = minVal + (Math.random() * (maxVal - minVal));

        return typeof floatVal == 'undefined' ? Math.round(randVal) : randVal.toFixed(floatVal);

    }
}); 
```

有没有人对此有想法...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-24T05:58:59.050

您必须维护已生成的数字列表，并对照此列表进行检查。如果发现骗子，请重新生成一个新号码。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-24T12:36:22.227

如果您不希望随机数重复自己，则必须以某种方式跟踪。

如果您要处理的范围相对较小，您可以创建一个包含所有可能结果的数组，然后简单地随机挑选出来。

```
function Randomizer(minVal, maxVal, floatVal){
    var possible_results = []; // for larger arrays you can build this using a loop of course
    var randomization_array = [];
    var count = minVal;
    var incrementor = floatVal || 1; // set the distance between possible values (if floatVal equals 0 we round to 1)
    while (count <= maxVal) {
        possible_results.push(count);
        count += incrementor;
    }

    this.run = function(){
        // if randomization_array is empty set posssible results into it
        randomization_array = randomization_array.length ? randomization_array : $.merge(randomization_array, possible_results);
        // pick a random element within the array
        var rand = Math.floor(Math.random()*randomization_array.length);
        // return the relevant element
        return randomization_array.splice(rand,1)[0];   
    }
} 
```

为了使用它（它为每个可能的范围创建一个专门的对象）：

```
rand = new Randomizer(1,10,0);
rand.run(); 
```

请注意，这种方法不适用于非常大的范围

# android-ndk - 在 android ndk 中包含外部库 libxml2 时出现未定义的引用错误

> ID：10731880
> 
> 赞同：2
> 
> 时间：2012-05-24T05:54:14.950
> 
> 标签：android-ndk, libxml2

我正在尝试将 libxml2 与 android ndk 一起使用。当我运行 make 文件时，我收到错误说文件 'unicode/ucnv.h' 不存在。我已经看到“unicode/ucnv.h”包含在其中一个文件中，并且不存在这样的头文件。所以我从[http://site.icu-project.org/](http://site.icu-project.org/)下载了 unicode 头文件并将它们放在包含文件夹中。

现在以前的错误消失了，但我遇到了这些错误。

共享库：libxml2.so

```
./obj/local/armeabi/objs-debug/xml2/encoding.o: In function `openIcuConverter':
C:\test\hello-jni/jni/encoding.c:109: undefined reference to `ucnv_open_49'
C:\test\hello-jni/jni/encoding.c:115: undefined reference to `ucnv_setToUCallBack_49'
C:\test\hello-jni/jni/encoding.c:119: undefined reference to `ucnv_setFromUCallBack_49'
C:\test\hello-jni/jni/encoding.c:126: undefined reference to `ucnv_open_49'
C:\test\hello-jni/jni/encoding.c:132: undefined reference to `ucnv_close_49'
C:\test\hello-jni/jni/encoding.c:135: undefined reference to `UCNV_TO_U_CALLBACK_STOP_49'
C:\test\hello-jni/jni/encoding.c:135: undefined reference to `UCNV_FROM_U_CALLBACK_STOP_49'
./obj/local/armeabi/objs-debug/xml2/encoding.o: In function `closeIcuConverter':
C:\test\hello-jni/jni/encoding.c:141: undefined reference to `ucnv_close_49'
C:\test\hello-jni/jni/encoding.c:142: undefined reference to `ucnv_close_49'
./obj/local/armeabi/objs-debug/xml2/encoding.o: In function `xmlUconvWrapper':
C:\test\hello-jni/jni/encoding.c:1865: undefined reference to `ucnv_convertEx_49'
C:\test\hello-jni/jni/encoding.c:1870: undefined reference to `ucnv_convertEx_49' 
```

collect2: ld 返回 1 退出状态 make: *** [obj/local/armeabi/libxml2.so] 错误 1

我在任何文件中都没有找到函数 ucnv_open_49。我是唯一一个面临这个问题的人吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-24T10:11:04.173

与 libxml2 一起构建 unicode 库 (icu) 并在 LOCAL_SHARED_LIBRARIES 中提及。就是这样！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-24T15:57:04.623

您是否打算将 libxml2 与 ICU 链接（例如，将其用于转换）？它是可选的，但目前您已启用它。这样，您将需要将 ICU 连接起来，而不是静态或动态。有关选项，请参阅 libxml2 的配置脚本。如果您打算仅使用 UTF-8，其中一些是 iconv 甚至没有转换器。

# macros - Intellij 宏在重启时被删除

> ID：10731882
> 
> 赞同：0
> 
> 时间：2012-05-24T05:54:21.980
> 
> 标签：macros, intellij-idea

我最近开始使用 IntellIJ 宏。问题是，每当我重新启动系统/intellij（不确定）时，它们就会被删除。

有没有办法可以防止它被删除并在重新启动时再次记录它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-24T13:14:53.197

宏存储在文件中。验证此文件是否存在并且在重新启动之间没有被删除或覆盖。[`%CONFIG%`](http://devnet.jetbrains.net/docs/DOC-181)`\options\macros.xml`

# facebook - 从 facebook 墙上导入照片

> ID：10731883
> 
> 赞同：0
> 
> 时间：2012-05-24T05:54:23.700
> 
> 标签：facebook

我在这个网站上工作，我想从 facebook 组导入照片。 [https://www.facebook.com/EveryoneLovesaGoldenRetriever/photos](https://www.facebook.com/EveryoneLovesaGoldenRetriever/photos) 如果您访问上面的此链接，您将能够在“每个人都喜欢金毛猎犬的专辑”标题下看到三张专辑，在“每个人都喜欢金毛猎犬的照片”标题下看到许多照片“我可以获取相册下的照片，但无法整理如何获取不属于任何相册的其他照片，并且标题为“每个人都喜欢金毛猎犬的照片”

非常感谢你提前SP

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-24T06:17:45.300

[https://graph.facebook.com/115641638572281/tagged](https://developers.facebook.com/tools/explorer/145634995501895/?method=GET&path=115641638572281%2Ftagged)

```
{
  "data": [
    {
      "id": "115641638572281_446639348697240", 
      "from": {
        "name": "Sudhir Puranik", 
        "id": "100000535372598"
      }, 
      "to": {
        "data": [
          {
            "name": "Everyone loves a Golden Retriever", 
            "category": "Small business", 
            "id": "115641638572281"
          }
        ]
      }, 
      "picture": "http://a2.sphotos.ak.fbcdn.net/hphotos-ak-ash3/s320x320/541201_446639348697240_100000535372598_1627958_1814759730_n.jpg", 
      "link": "http://www.facebook.com/photo.php?fbid=446639348697240&set=o.115641638572281&type=1", 
      "icon": "http://static.ak.fbcdn.net/rsrc.php/v2/yz/r/StEh3RhPvjk.gif", 
      "actions": [
        {
          "name": "Comment", 
          "link": "http://www.facebook.com/115641638572281/posts/446639348697240"
        }, 
        {
          "name": "Like", 
          "link": "http://www.facebook.com/115641638572281/posts/446639348697240"
        }
      ], 
      "type": "photo", 
      "object_id": "446639348697240", 
      "application": {
        "name": "Photos", 
        "id": "2305272732"
      }, 
      "created_time": "2012-05-15T07:43:58+0000", 
      "updated_time": "2012-05-15T07:43:58+0000", 
      "comments": {
        "count": 0
      }
    }, 
    {
      "id": "115641638572281_446033935424448", 
      "from": {
        "name": "Sudhir Puranik", 
        "id": "100000535372598"
      }, 
      "to": {
        "data": [
          {
            "name": "Everyone loves a Golden Retriever", 
            "category": "Small business", 
            "id": "115641638572281"
          }
        ]
      }, 
      "picture": "http://a5.sphotos.ak.fbcdn.net/hphotos-ak-ash3/s320x320/547601_446033935424448_100000535372598_1626229_2008301193_n.jpg", 
      "link": "http://www.facebook.com/photo.php?fbid=446033935424448&set=o.115641638572281&type=1", 
      "icon": "http://static.ak.fbcdn.net/rsrc.php/v2/yz/r/StEh3RhPvjk.gif", 
      "actions": [
        {
          "name": "Comment", 
          "link": "http://www.facebook.com/115641638572281/posts/446033935424448"
        }, 
        {
          "name": "Like", 
          "link": "http://www.facebook.com/115641638572281/posts/446033935424448"
        }
      ], 
      "type": "photo", 
      "object_id": "446033935424448", 
      "application": {
        "name": "Photos", 
        "id": "2305272732"
      }, 
      "created_time": "2012-05-14T12:59:13+0000", 
      "updated_time": "2012-05-15T14:19:48+0000", 
      "likes": {
        "data": [
          {
            "name": "Barbara Fried", 
            "id": "1336683610"
          }
        ], 
        "count": 1
      }, 
      "comments": {
        "data": [
          {
            "id": "115641638572281_446033935424448_1363348", 
            "from": {
              "name": "Barbara Fried", 
              "id": "1336683610"
            }, 
            "message": "They look like total love dogs!", 
            "created_time": "2012-05-15T14:19:48+0000"
          }
        ], 
        "count": 1
      }
    }
  ], 
  "paging": {
    "previous": "https://graph.facebook.com/115641638572281/tagged?format=json&limit=2&since=1337067838&__previous=1", 
    "next": "https://graph.facebook.com/115641638572281/tagged?format=json&limit=2&until=1337000352"
  }
} 
```

# php - Ajax 表单请求

> ID：10731884
> 
> 赞同：1
> 
> 时间：2012-05-24T05:54:26.087
> 
> 标签：php, forms, jquery

我的ajax表单提交有问题。我正在动态提交表单并在服务器端使用php来处理它。这是ajax成功功能。

```
 $.ajax({
                        type: "POST",
                        url: "register.php",
                        data: "uname="+uname+"&eid="+eid+"&pwd="+pass+"&cpwd="+cpass+"&country="+coun+"&contact="+contact,
                        dataType: "html",
                        success: function(data){
                            if(data!="error")
                            {   
                               //alert(data);
                                $("#user_status", window.parent.document).html("Welcome "+data+"&nbsp;&nbsp;|&nbsp;&nbsp;<a href='forum/logout.php'>Logout</a>");
                                if(window.parent.document.getElementById('post_user_name'))
                                    $("#post_user_name", window.parent.document).html(msg);
                                parent.$.fancybox.close();
                            }
                            if(data=="error")
                            {   
                                //alert(data);
                                $("#status").html("<span><center><font class='formright err_msg' style='width:176px;'>The user is already register with us.</font><center></span>");
                                return false;
                            } 
```

现在，如果用户是有效的，他已登录，并且 f 不是必须有像“已经存在”这样的错误。有效部分工作正常，但对于无效我从 php 文件返回一个**错误**，但我的错误消息仍然没有显示起来，只是错误打印在屏幕上。我正在为我的表单使用fancybox（jquery fancybox）PHP代码是

```
 if($_POST['pwd']==$_POST['cpwd'])
            {
                $username   = $_POST['uname'];
                $email      = $_POST['eid'];
                $password   = md5($_POST['pwd']);
                $cpassword  = $_POST['cpwd'];
                $contact_no = $_POST['contact'];
                $country    = $_POST['country'];

                $cnt      =     $checkUser['cnt'];

                if($cnt!=0) 
                {
                    echo "error";
                    //exit;
                    /*$_SESSION['error_msg']    =   'Email Address already exists';
                    redirect_to_link("index.html");*/

                } 
                else
                {
                    //echo "entered here";
                    $userArray = array();
                    //$user = return_post_value($_POST['uname']);
                    $userArray['uname'] = return_post_value($_POST['uname']);
                    $userArray['email'] = return_post_value($_POST['eid']);
                    $userArray['password'] = md5(return_post_value($_POST['pwd']));
                    $userArray['contact_no'] = return_post_value($_POST['contact']);
                    $userArray['country'] = return_post_value($_POST['country']);

                    //print_r($userArray);
                    //exit;
                    $userObj->addUserValue($userArray);
                    $_SESSION['username']=  $userArray['uname'];            
                    echo $userArray['uname'];
                                  //    return $user;
                } 
```

**回声 $userArray['uname']** ; 部分工作，但**回显“错误”**没有。在 Firebug 响应标头中检查，我可以看到返回的错误字。任何人都可以对此有所了解吗？
谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-24T06:55:05.373

使用它来比较 if($.trim(data)!="error")

并且不要重新检查 if($.trim(data)=="error")

采用

```
if($.trim(data)!="error")
{
 //
}
else{
//
} 
```

# html - 我似乎无法在 html5 画布上画一条线

> ID：10731886
> 
> 赞同：1
> 
> 时间：2012-05-24T05:54:46.883
> 
> 标签：html, google-chrome, html5-canvas

我正在使用 HTML5 绘制一条线。但是当画布的宽度和高度很大时，它在 chrome 中无法正常工作。

我使用的是 chrome 19.0.1084.52，我的操作系统是 windows 7。

有没有人使用[http://www.w3schools.com/html5/tryit.asp?filename=tryhtml5_canvas_line](http://www.w3schools.com/html5/tryit.asp?filename=tryhtml5_canvas_line)进行测试？

如果增加画布的宽度和高度，线条就会消失。

chrome中的画布是否有最大高度和宽度，有人有解决方案吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-21T17:48:39.067

这是一个有趣的问题！

在使用我的 Chrome 和 Firefox 进行测试后，我发现：

*   ****如果画布宽度 > 32767 ，** **Chrome**不绘制任何内容**
*****   **如果画布宽度 > **32766 ，** **Firefox不绘制任何内容********

 ******如果您的画布宽度大于该数字，则不会绘制任何内容。

我不知道为什么会有这样的限制。或许我们可以通过浏览器的源码找出根本原因！

以下代码是一个示例。您可以[单击此处运行它](http://jsfiddle.net/4c75a/13/)。

```
<!DOCTYPE html>
<html>
<body>

If canvas width is greater than 32767, Chrome can't draw anything.<br>

<canvas id="myCanvas" width="32768" height="100"></canvas>

<script type="text/javascript">    
var c=document.getElementById("myCanvas");
var ctx=c.getContext("2d");
ctx.lineWidth = 5;
ctx.moveTo(10,50);
ctx.lineTo(300,50);
ctx.stroke();    
</script>

</body>
</html> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-24T09:56:03.073

可能有宽度和高度的限制，但我觉得足够了，

这里是[http://jsfiddle.net/AkashSaikia/4c75a/](http://jsfiddle.net/AkashSaikia/4c75a/)

它玩过大尺寸

根据 w3c，这里的 unsigned long 大约是 0 到 4,294,967,295

```
interface HTMLCanvasElement : HTMLElement {
           attribute unsigned long width;
           attribute unsigned long height;

  DOMString toDataURL(optional DOMString type, any... args);
  void toBlob(FileCallback? _callback, optional DOMString type, any... args);

  object? getContext(DOMString contextId, any... args);
}; 
```

但经过测试，大约需要 0 到 2147483647

见这里[http://jsfiddle.net/AkashSaikia/9EWad/1/](http://jsfiddle.net/AkashSaikia/9EWad/1/)

您何时或如何更改 Canavas 的高度和宽度？

FIY，如果你改变画布的高度和宽度属性，那么它会清除画在上面的东西。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-24T06:29:07.803

线条的最大宽度和高度可能取决于所使用的浏览器。

如果你想画很宽的线，那么你画一个矩形，把它变换到正确的位置，然后旋转到线的角度。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-12-16T06:21:26.227

根据我的经验，画布渲染存在大小限制，至少对于 iOS 设备而言。这是由于 GPU 内存有限，因为如今画布通常是硬件加速的。

对于 iOS 设备，内存为 256+MB 的设备的最大大小为 5 兆像素，内存较小的设备的最大大小为 3 兆像素。******

# iphone - 标记并检查流程是否已完成

> ID：10731894
> 
> 赞同：0
> 
> 时间：2012-05-24T05:55:30.910
> 
> 标签：iphone, objective-c, ios

我不知道如何写这一行。我要做的是编写一个只执行一次的语句，完成后标记自己不再执行（以避免持续循环），例如白天和晚上。

我认为需要写的内容：

```
 if ([nightTime timeIntervalSinceNow] <= 0 && "check if already reset or not"){
        // The following process has to be done, but only once

        // reset dayTime (for tomorrow)

        // stop the current NSTimer

        // recreate a new NSTimer for nightTime        

   } 
```

谁能指出我应该使用的正确方向？

非常感谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-24T05:58:16.273

Take one flag iIsProcessDone

```
if ([nightTime timeIntervalSinceNow] <= 0 && !iIsProcessDone){

        iIsProcessDone = YES;

        // The following process has to be done, but only once

        // reset dayTime (for tomorrow)

        // stop the current NSTimer

        // recreate a new NSTimer for nightTime        

   } 
```

And reset it when you want to call this process again.

# javascript - 我无法使用 JavaScript 让我的图像幻灯片工作

> ID：10731895
> 
> 赞同：1
> 
> 时间：2012-05-24T05:55:31.860
> 
> 标签：javascript, timer, document.write

我正在尝试使用下面的 Javascript 代码创建一个简单的图像幻灯片类型的东西，但它正在做的是在网页中显示第一张图像以及其他所有内容，然后在 5 秒后清除页面并显示*相同*的图像，然后再次显示5 秒，但它不再清除页面。

JavaScript：

```
var waiPics=new Array();
waiPics[0]='images/path.jpg';
waiPics[1]='images/gorse.jpg';
waiPics[2]='images/stream.jpg';
waiPics[3]='images/pines.jpg';
waiPics[4]='images/stump.jpg';

var time;

function timeUp() {
    delete document.write();
    nextPic();
}

function nextPic() {
    var picNum=0;
if (picNum = waiPics.length) {
    picNum=0;
}
else {
    picNum++;
} 
    document.write('<img src="'+waiPics[picNum]+'" title="Waipahihi" alt="Waipahihi">');
    time=setTimeout("timeUp()",5000);
} 
```

的HTML：

```
<script type="text/javascript">
<!-- Begin
nextPic();
//  End -->
</script> 
```

我对Javascript不是很有经验，所以提前感谢您的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-24T05:58:56.773

picNum 将始终为零，因为它是在函数内部声明的，并且每次调用函数时都会设置为零。即使你解决了这个问题，你的情况也是错误的：

```
if (picNum = waiPics.length) { 
```

条件应该是：

```
if (picNum === waiPics.length) { 
```

单个 = 符号将长度分配给 picNum，然后转换为布尔值。数组长度非零，因此它成为真值。然后它每次都重置为零。

考虑使用[JSLint](http://www.jslint.com)检查您的代码是否存在错误并提出改进建议。它标记了这个问题：

```
"Expected a conditional expression and instead saw an assignment."
if (picNum = waiPics.length) { 
```

事实上，在你的代码上使用 JSLint 并检查它的建议之后，我会使用更像这样的东西：

```
// New array creation syntax
var waiPics = ['images/path.jpg', 'images/gorse.jpg', 'images/stream.jpg', 'images/pines.jpg', 'images/stump.jpg'];

var picNum = 0;  // Declare outside inner function so its value is preserved
var myDiv = document.getElementById("ssdiv");  // Get a div element to insert picture into

function nextPic() {
    if (picNum === waiPics.length) {    // Proper comparison
        picNum = 0;
    } else {
        picNum += 1;
    }

    // Set picture into div element without evil document.write
    myDiv.innerHTML = '<img src="' + waiPics[picNum] + '" title="Waipahihi" alt="Waipahihi">';

    // No longer need timeUp; also don't use eval syntax
    setTimeout(nextPic, 5000);
} 
```

分配 innerHTML 避免了 document.write 的各种问题，也不需要刷新页面来更改幻灯片图像。另请注意其他评论。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-24T06:01:18.440

您需要在此处使用比较运算符 ('==') 而不是分配 ('=')：

```
//if (picNum = waiPics.length) {
if (picNum == waiPics.length) { 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-31T17:55:44.143

看看这个例子......

[http://jsfiddle.net/DaveAlger/eNxuJ/1/](http://jsfiddle.net/DaveAlger/eNxuJ/1/)

* * *

要使您自己的幻灯片正常工作，请将以下 html 复制并粘贴到任何文本文件中并将其另存为`slides.html`

你可以在里面添加任意数量的`<img>`元素`<div class="slideshow">`

请享用！

```
<html>
<body>
    <div class="slideshow">
        <img src="http://davealger.info/i/1.jpg" />
        <img src="http://davealger.info/i/2.bmp" />
        <img src="http://davealger.info/i/3.png" />
    </div>
    <script src="http://ajax.googleapis.com/ajax/libs/jquery/1/jquery.min.js"></script>
    <script>
        $(function(){
            $('.slideshow img:gt(0)').hide();
            setInterval(function(){$('.slideshow :first-child').fadeOut(2000).next('img').fadeIn(2000).end().appendTo('.slideshow');}, 4000);
        });
    </script>
    <style>
        .slideshow { position:relative; }
        .slideshow img { position:absolute; left:0; top:0; }
    </style>
</body>
</html> 
```

# sql - 在单个值中连接列值

> ID：10731898
> 
> 赞同：0
> 
> 时间：2012-05-24T05:55:35.143
> 
> 标签：sql, sql-server

> **可能重复：**
> [在 MS SQL Server 2005 中模拟 group_concat MySQL 函数？](https://stackoverflow.com/questions/451415/simulating-group-concat-mysql-function-in-ms-sql-server-2005)
> [T-SQL 是否具有连接字符串的聚合函数？](https://stackoverflow.com/questions/5031204/does-t-sql-have-an-aggregate-function-to-concatenate-strings)
> [SQL Server 中的 SQL group_concat 函数](https://stackoverflow.com/questions/8868604/sql-group-concat-function-in-sql-server)

我有这样的表格结构

```
 Table1
Col1     Col2

val1     text1

val1     text2

val1     text3

val1     text4

val1     text5 
```

现在我想要这样的形式**使用简单的 sql 语句（无过程无函数）**输出 。

像这样的声明

> 选择 col2 其中 col1 = 'val1'

输出像

> **文本 1、文本 2、文本 3、文本 4、文本 5**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-24T06:07:46.940

```
declare @var1 varchar(200)
SELECT @var1 = COALESCE(@var1 + ', ', '') +  Col2 from #table1 where Col1 = 'val1'
Select @var1 
```

# node.js - node.js递归写文件目录

> ID：10731899
> 
> 赞同：6
> 
> 时间：2012-05-24T05:55:41.623
> 
> 标签：node.js

如果文件位于可能存在或不存在的目录中，如何使用 nodejs 编写文件？

这有点类似于这个问题：

[node.js 用目录写文件？](https://stackoverflow.com/questions/5874142/node-js-write-file-with-directories)

只有我需要一个创建文件的解决方案，而 node-fs 只创建目录。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-24T13:39:15.287

从[FileUtils](https://github.com/Gagle/Node-FileUtils)：

修改功能以满足您的需求！但说真的，使用模块而不是自己编写！

[createDirectory()](https://github.com/Gagle/Node-FileUtils/wiki/Reference#wiki-file-createDirectory)：创建一个目录。如果形成路径的任何先前目录不存在，则会创建它们。默认权限：0777。

```
File.prototype.createDirectory = function (cb){
    if (cb) cb = cb.bind (this);
    if (!this._path){
        if (cb) cb (NULL_PATH_ERROR, false);
        return;
    }
    if (!canWriteSM (this._usablePath)){
        if (cb) cb (SECURITY_WRITE_ERROR, false);
        return;
    }

    var mkdirDeep = function (path, cb){
        path.exists (function (exists){
            if (exists) return cb (null, false);

            FS.mkdir (path.getPath (), function (error){
                if (!error) return cb (null, true);

                var parent = path.getParentFile ();
                if (parent === null) return cb (null, false);

                mkdirDeep (parent, function (error, created){
                    if (created){
                        FS.mkdir (path.getPath (), function (error){
                            cb (error, !error);
                        });
                    }else{
                        parent.exists (function (exists){
                            if (!exists) return cb (null, false);

                            FS.mkdir (path.getPath (), function (error){
                                cb (error, !error);
                            });
                        });
                    }
                });
            });
        });
    };

    mkdirDeep (this.getAbsoluteFile (), function (error, created){
        if (cb) cb (error, created);
    });
}; 
```

[createNewFile()](https://github.com/Gagle/Node-FileUtils/wiki/Reference#wiki-file-createNewFile)：创建一个新文件。默认权限：0666。

```
File.prototype.createNewFile = function (cb){
    if (cb) cb = cb.bind (this);
    if (!this._path){
        if (cb) cb (NULL_PATH_ERROR, false);
        return;
    }

    if (!canWriteSM (this._usablePath)){
        if (cb) cb (SECURITY_WRITE_ERROR, false);
        return;
    }

    var path = this._usablePath;
    PATH.exists (path, function (exists){
        if (exists){
            if (cb) cb (null, false);
        }else{
            var s = FS.createWriteStream (path);
            s.on ("error", function (error){
                if (cb) cb (error, false);
            });
            s.on ("close", function (){
                if (cb) cb (null, true);
            });
            s.end ();
        }
    });
}; 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-05-01T12:08:56.067

我刚刚写了这个作为[如果父文件夹不存在如何写入文件的答案？](https://stackoverflow.com/questions/16316330/how-to-write-file-if-parent-folder-dosent-exists/16317628). 可能对在 Google 中偶然发现此问题的人有用：

将[mkdirp](https://npmjs.org/package/mkdirp)与[`path.dirname`](http://nodejs.org/api/path.html#path_path_dirname_p)first 结合使用。

```
var mkdirp = require("mkdirp")
var fs = require("fs")
var getDirName = require("path").dirname
function writeFile (path, contents, cb) {
  mkdirp(getDirName(path), function (err) {
    if (err) return cb(err)
    fs.writeFile(path, contents, cb)
  })
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-24T06:02:48.613

你可以使用类似的东西`createWriteStream`。

如果文件不存在，它将只创建文件。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-12-18T21:23:36.390

由于`fs.exists()`已[弃用](https://nodejs.org/api/fs.html#fs_fs_exists_path_callback)`fs.access()`，这是另一个使用且没有外部 npm 模块的异步版本：

```
"use strict";
var fs =  require('fs');
var path = require('path');

var fileName = '\\tmp\\a\\b\\c\\d.txt'; // e.g. using Windows path separator
var contents = 'any content';

createDirectoryAndFile(fileName, contents);

function createDirectoryAndFile(fileName, contents) {
  var dirName = path.dirname(fileName);
  var pathAsArray = dirName.split(path.sep);
  _createDirectoryAndFile(pathAsArray, '', function() {
    fs.open(fileName, 'w+', function(error, data) {
      fs.writeFile(fileName, contents, function(error) {});
    });
  });
}

function _createDirectoryAndFile(pathAsArray, pathSoFar, createFile) {
  if (!pathAsArray || pathAsArray.length === 0) {
    createFile();
    return;
  }

  var dir = pathAsArray.shift();
  pathSoFar = pathSoFar + dir  + path.sep;
  fs.access(pathSoFar, function(error) {
    if (error) { // directory does not exist
      fs.mkdir(pathSoFar, function(error) {
        if (!error) {
          _createDirectoryAndFile(pathAsArray, pathSoFar, createFile);
        }
      });
    } else {
      _createDirectoryAndFile(pathAsArray, pathSoFar, createFile);
    }
  });
} 
```

这当然需要通过添加错误处理和支持权限来改进。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2016-05-29T09:42:34.713

对于 TypeScript 用户，这是我刚刚写的，基于[mkdirP](https://github.com/substack/node-mkdirp)：

```
const _0777 = parseInt('0777', 8);

export function mkdirP(dir: string, opts: {
    fs?: {
        mkdir: (path: string | Buffer, mode: number,
                callback?: (err?: NodeJS.ErrnoException) => void) => void,
        stat: (path: string | Buffer,
               callback?: (err: NodeJS.ErrnoException,
                           stats: fs.Stats) => any) => void
    }, mode?: number}, f: Function, made?) {
    dir = resolve(dir);
    if (typeof opts === 'function') {
        f = <Function>opts;
        opts = {};
    }
    else if (!opts || typeof opts !== 'object')
        opts = {mode: <number>opts};

    opts.mode = opts.mode || (_0777 & (~process.umask()));
    opts.fs = opts.fs || fs;

    if (!made) made = null;

    const cb = f || (() => undefined);

    opts.fs.mkdir(dir, opts.mode, function (error) {
        if (!error) {
            made = made || dir;
            return cb(null, made);
        }
        switch (error.code) {
            case 'ENOENT':
                mkdirP(dirname(dir), opts, function (err, made) {
                    if (err) cb(err, made);
                    else mkdirP(dir, opts, cb, made);
                });
                break;

            default:
                opts.fs.stat(dir, function (e, stat) {
                    if (e || !stat.isDirectory()) cb(error || e, made);
                    else cb(null, made);
                });
        }
    });
} 
```

JavaScript 版本只是从签名中删除类型注释，即：将前几行转换为：`(dir, opts, mode, f, made) {`。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2016-11-18T22:38:06.253

```
// Create parentDir recursively if it doesn't exist!
const parentDir = 'path/to/parent';
parentDir.split('/').forEach((dir, index, splits) => {
  const curParent = splits.slice(0, index).join('/');
  const dirPath = path.resolve(curParent, dir);
  if (!fs.existsSync(dirPath)) {
    fs.mkdirSync(dirPath);
  }
});

// Create file.js inside the parentDir
fs.writeFileSync(`${parentDir}/file.js`, 'file Content', 'utf8'); 
```

* * *

## 回答 #7

> 赞同：-2
> 
> 时间：2014-12-01T14:46:04.357

你可以使用[https://github.com/douzi8/file-system](https://github.com/douzi8/file-system)

```
var file = require('file-system');
file.mkdir('1/2/3/4/5', [mode], function(err) {}); 
```

# objective-c - 用自定义图像替换 ADBannerView

> ID：10731904
> 
> 赞同：0
> 
> 时间：2012-05-24T05:56:04.263
> 
> 标签：objective-c, ios, iad

所以我有一个 iOS 应用程序，当没有可显示的广告时，我想显示我自己的广告而不是隐藏横幅。我的自定义广告只是一张图片，当用户点击它时，我想将他发送到一个 URL。不涉及使用像 adWhirl 这样的另一个库的最简单方法是什么？如果无法将图像直接放置在横幅内，我将如何将图像缩放到横幅尺寸并将其放置在那里？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-24T06:05:24.683

在`GoogleAdMobManager`课堂上

```
- (void)bannerView:(ADBannerView *)banner didFailToReceiveAdWithError:(NSError *)error;
- (void)adViewDidReceiveAd:(GADBannerView *)view; 
```

使用此方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-24T11:04:18.297

您不能将自己的图像放在 iAd 横幅中（我认为这是您的希望）。

确保在没有广告时隐藏 iAd 横幅。

然后在适当的时候添加/删除您自己的广告视图 - 您自己的广告视图可以像 uiButton 一样简单。

# ruby - "No tests." error in ruby unit tests

> ID：10731910
> 
> 赞同：1
> 
> 时间：2012-05-24T05:56:27.723
> 
> 标签：ruby, unit-testing, sinatra, minitest

My original test for user.rb looks like this:

```
require "test/unit"
require "minitest/autorun"
require "rack/test"
require_relative "../lib/kimsin.rb"

ENV['RACK_ENV'] = 'test'

class UserTests < Test::Unit::TestCase
  include Rack::Test::Methods
  include Kimsin

  def app
    Sinatra::Application
  end

  def test_user
    @user = User.create :username => "barerd", :password => "abcdef"
    get "/users"
    assert_equal @user.username, "barerd"
    refute_match @user.password, "abcdef"
  end
end 
```

The test ran and obviously failed as there was no User class. When I added the User class like below:

```
module Kimsin
  require "data_mapper"
  require "dm-migrations"

  DataMapper.setup :default, "sqlite:///users.db"

  class User
    include DataMapper::Resource
    include BCrypt

    property :id,       Serial
    property :username, String, :required => true
    property :password, String, :required => true
    property :salt,     String, :default => "876587349506434245565664566"
    property :crypto,   String, :default => BCrypt::Password.create password + salt
  end

  User.auto_migrate!
end 
```

it throws a "No tests." error. Actually, not only this one but all tests throw the same error now. I suspected that this has sth to do with ruby in general, because it happened after I gem installed dm-core and at the beginning it threw an error:

"Error loading RubyGems plugin "/home/barerd/.rvm/gems/ruby-1.9.3-p125/gems/rubygems-bundler-0.2.8/lib/rubygems_plugin.rb": cannot load such file -- rubygems_bundler/rubygems_bundler_installer (LoadError)"

But when I try to run tests of other apps, they all work fine. I use rvm 1.11.6 (stable) and ruby 1.9.3p125 (2012-02-16 revision 34643) [i386-cygwin] on a windows 7 by the way. Any clue to the error?

To note, the core module file kimsin.rb is as follows:

```
require "sinatra"
require "erb"
require "bcrypt"
require_relative "../lib/kimsin/version"
require_relative "../lib/kimsin/user"

use Rack::Session::Pool, :expire_after => 2592000

set :session_secret, "n9c0431qt043fcwo4ponm3w5483qprutc3q9pfw3r0swaypedx2qafec2qdomvuj8cy4nawscerf"

module Kimsin
  get "/" do
    title = "Kimsin?"
    erb :index, :locals => {:title => title}
  end
end 
```

# scala - 使用 Makefile 管理 Scala 项目

> ID：10731916
> 
> 赞同：2
> 
> 时间：2012-05-24T05:56:58.663
> 
> 标签：scala, makefile

首先，我知道如何编写一个基本/中级的makefile。在我的 c++ 项目中，我使用了一个自动执行很多工作的 makefile。对我来说最重要的是它使用通配符自动检测所有源文件（它们总是在同一个文件夹中），使用它来预测所有目标文件的名称（和位置），并进行适当的编译。

最近我一直在尝试用我的 scala 项目达到同样的效果，但我遇到了两个障碍。

*   属于包的编译类文件存储在子目录中（如`com/me/mypack/`）。这是一个问题，因为 *Make*需要找到这些文件来检查时间戳（我不知道如何自动执行此操作）。
*   一些源文件（例如定义 a 的源文件`package object`）生成具有不同命名标准的类文件。同样，*Make* 需要知道这些类文件在哪里，而我不知道如何自动执行此操作。

这样做的结果是每次运行时都会重新编译“有问题的”源文件`make`（scala 的长编译时间会加剧这种情况）。我想知道如何解决这个问题，而不必手动写出预期的类文件的整个列表。

**编辑** *作为一个额外的说明：*我想避免将源文件放在子目录中。出于几个原因，我喜欢将它们全部保存在同一个目录中。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-05-24T05:58:50.003

对于 Scala，您应该使用[sbt](https://github.com/harrah/xsbt/wiki)或[Maven 。](http://maven.apache.org/)这些是专为 Scala 和 Java 的工作方式而设计的，它们将更容易设置和使用。它们还提供了比 make 更多的功能。

这些工具用于各种各样的事情。编译是一件大事，但它们对于依赖管理也很重要。此外，sbt（可能还有 Maven？）会进行“增量编译”，因此只有已更改的类才会重新编译，从而加快编译速度。

我个人使用 sbt，但我认识喜欢 Maven 的人。

# jquery - table interactive

> ID：10731917
> 
> 赞同：0
> 
> 时间：2012-05-24T05:57:02.367
> 
> 标签：jquery, html

I hope someone can help resolve a small issue for me. What I have is a table, and some of the cells contain a div (set to hide). On mouse over of that cell, I would like that div to become visible. Below is an extract of my table code.

The script that I need should check if the cell contains a div; on mouse hover of that div, show it and hide the others. If cursor is not hovering a div, then it should show none of the divs.

```
<table>
    <tr>
        <th>Header One</th>
        <th>Header Two</th>
        <th>Header Three</th>
    </tr>
    <tr>
        <td>Something One
        <div id="wrapper1" class="hoverinfo" style="display:none;">
            <ul>
                <li>
                List Object One
                </li>
                <li>
                List Object Three
                </li>
                <li>
                List Object Four
                </li>
            </ul>
        </div></td>
        <td>Something Two</td>
        <td>Something three</td>
    </tr>
    <tr>
        <td>Something One</td>
        <td>Something Two
        <div id="wrapper2" class="hoverinfo" style="display:none;">
            <ul>
                <li>
                List Object five
                </li>
                <li>
                List Object six
                </li>
            </ul>
        </div></td>
        <td>Something three</td>
    </tr>
    <tr>
        <td>Something One
        <div id="wrapper2" class="hoverinfo" style="display:none;">
            <ul>
                <li>
                List Object seven
                </li>
                <li>
                List Object eight
                </li>
            </ul>
        </div></td>
        <td>Something Two</td>
        <td>Something three</td>
    </tr>
</table> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-24T06:01:37.880

```
$('td > div.hoverinfo').mouseover(function() {
    $('td > div.hoverinfo').hide();
    $(this).show();
}); 
```

# asp.net-mvc-3 - Binding hardcoded values and databases values into one dropdownlist

> ID：10731920
> 
> 赞同：0
> 
> 时间：2012-05-24T05:57:15.970
> 
> 标签：asp.net-mvc-3

I have a drop down list in C# asp.net MVC3 razor engine. I need to load values to that dropdownlist from one of my tables in my database and some values are hard coded. So I need to get both kind of values into one dropdown list.

I can do them separately.

This is how my view is :

```
@Html.DropDownListFor(model => model.MyTransaction.Status, new MultiSelectList(ViewBag.MyStatusId, "ID", "Name")) 
```

My Model where enums are created :

```
public enum Ntypes{
  halfday
  casual
} 
```

My Controller :

```
ViewBag.MyTransaction = db.LeaveTypes.ToList(); //get the table values to drop down 
```

//then even I can get the hard coded values separately ............

```
ViewBag.MyTansaction = (from NewLeaveTypes t in Enum.GetValues(typeof(Ntypes))
                                select new { ID = t, Name = t.ToString()).ToList(); 
```

But cant get both values into one dropdownlist. Plzzzz Help.

Thanks...........

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-24T06:27:08.773

您可以将 2 个列表连接在一起：

```
var nTypes = Enum
    .GetValues(typeof(Ntypes))
    .Select(t => new LeaveType { ID = t, Name = t.ToString())
    .ToList();
ViewBag.MyTransaction = db.LeaveTypes.ToList().Concat(nTypes); 
```

然后在视图中：

```
@Html.DropDownListFor(
    model => model.MyTransaction.Status, 
    new SelectList(ViewBag.MyTransaction, "ID", "Name")
) 
```

# regex - 在最后一次出现的数字处拆分，取第二部分

> ID：10731923
> 
> 赞同：6
> 
> 时间：2012-05-24T05:57:43.870
> 
> 标签：regex, r

如果我有一个字符串并且想在最后一位上拆分并保留拆分 hpw 的最后一部分，我可以这样做吗？

```
x <- c("ID", paste0("X", 1:10, state.name[1:10])) 
```

我想要

```
 [1] NA            "Alabama"     "Alaska"      "Arizona"     "Arkansas"   
 [6] "California"  "Colorado"    "Connecticut" "Delaware"    "Florida"    
[11] "Georgia" 
```

但会满足于：

```
 [1] "ID"          "Alabama"     "Alaska"      "Arizona"     "Arkansas"   
 [6] "California"  "Colorado"    "Connecticut" "Delaware"    "Florida"    
[11] "Georgia" 
```

我可以通过以下方式获得第一部分：

```
unlist(strsplit(x, "[^0-9]*$")) 
```

但是想要第二部。

先感谢您。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-24T09:01:05.237

您可以使用正则表达式完成这一简单的步骤：

```
gsub("(^.*\\d+)(\\w*)", "\\2", x) 
```

结果是：

```
 [1] "ID"          "Alabama"     "Alaska"      "Arizona"     "Arkansas"    "California"  "Colorado"    "Connecticut"
 [9] "Delaware"    "Florida"     "Georgia" 
```

* * *

正则表达式的作用：

1.  `"(^.*\\d+)(\\w*)"`: 寻找两组字符。
    *   第一组`(^.*\\d+)`在字符串的开头查找任何数字，后跟至少一个数字。
    *   第二组`\\w*`查找字母数字字符。
2.  作为`"\\2"`第二个参数的`gsub()`意思是用正则表达式找到的第二组替换原始字符串。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-24T06:08:55.863

```
library(stringr)
unlist(lapply(str_split(x, "[0-9]"), tail,n=1)) 
```

给

```
[1] "ID"          "Alabama"     "Alaska"      "Arizona"     "Arkansas"    "California"  "Colorado"    "Connecticut" "Delaware"   
[10] "Florida"     "Georgia" 
```

我会查看文档`stringr`以寻找（最有可能）更好的方法。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-24T06:16:24.283

这似乎有点笨拙，但它有效：

```
state.pt2 <- unlist(strsplit(x,"^.[0-9]+"))
state.pt2[state.pt2!=""] 
```

在字符串开头删除匹配生成的 ' 会很好，`""`但我无法弄清楚。

这是另一种使用`substr`and的方法，`gregexpr`它也避免了对结果进行子集化：

```
substr(x,unlist(lapply(gregexpr("[0-9]",x),max))+1,nchar(x)) 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-05-24T12:12:37.260

**gsubfn**

试试这个[gsubfn](http://gsubfn.googlecode.com)解决方案：

```
> library(gsubfn)
> strapply(x, ".*\\d(\\w*)|$", ~ if (nchar(z)) z else NA, simplify = TRUE)
 [1] NA            "Alabama"     "Alaska"      "Arizona"     "Arkansas"   
 [6] "California"  "Colorado"    "Connecticut" "Delaware"    "Florida"    
[11] "Georgia" 
```

它匹配最后一个数字后跟单词字符并返回单词字符，或者如果失败则匹配行尾（以确保它匹配某些内容）。如果第一个匹配成功则返回它；否则，反向引用将为空，因此返回 NA。

请注意，公式是编写函数的简写方式，`function(z) if (nchar(z)) z else NA`并且该函数可以交替替换公式，但会以稍微多一点的击键为代价。

**gsub**

类似的策略也可以直接使用，`gsub`但需要两行和一个稍微复杂的正则表达式。在这里，我们使用第二种方法从第一种方法中剔除不匹配的内容：

```
> s <- gsub(".*\\d(\\w*)|.*", "\\1", x)
> ifelse(nchar(s), s, NA)
 [1] NA            "Alabama"     "Alaska"      "Arizona"     "Arkansas"   
 [6] "California"  "Colorado"    "Connecticut" "Delaware"    "Florida"    
[11] "Georgia" 
```

编辑：小改进

# php - php excel fill in from mysql Database

> ID：10731924
> 
> 赞同：0
> 
> 时间：2012-05-24T05:57:45.713
> 
> 标签：php, mysql, mysqldump, export-to-excel, phpexcel

i have been reading around looking for a way to get graphs and so on into my spread sheet i export out of my database and to make it look better for my employee who wants reports of everything in a certain way and so on. I have found PhpExcel.. which seems really good it can do everything i want it to plus more.. but i haven't been able to work out how to use data from my mysql table to fill in the cells since it seems like they all have to be manually set to a value...

i have read over this post [How to set cell value Dynamically](https://stackoverflow.com/questions/2584954/phpexcel-how-to-set-cell-value-dynamically) i have attempted to use the code provided in this page to try and help me out but i havent been able to get it to work for some reason i am always receiving an error.

i am hoping someone may be able to help me out with trying to get this MySQL table data into a spreadsheet using php excel or even if there are any other links i may have missed i would really appreciate it...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-12T23:01:01.787

我正在用 PHPExcel 做很多工作......我写了一个小类来简化导出，你可以[在这里下载](http://vernes.github.com/PHPReport/)。

您只需要将数据库中的数据放入数组中，将其传递给此类并指定输出格式。我希望它有所帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-24T06:40:22.343

I have done this using the PEAR classes for PHP. You can read the data from the MYSQL database and then write the script using the PHP and PEAR classes to create an excel file for the same.

Here is link to the [SpreadSheet Writer](http://pear.php.net/manual/en/package.fileformats.spreadsheet-excel-writer.intro.php)

This tutorial will help you to install PEAR and write the data to the excel sheet.

Hope this will solve the problem you are facing.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-24T06:07:34.647

如果您安装[phpmyadmin](http://www.phpmyadmin.net/home_page/index.php)以连接到您的数据库。

然后，您可以为所需的任何报告编写 SQL 查询。

并将结果导出（参见图 1）到 CSV 或 MS Excel 的 CSV（参见图 2）。

查询结果下方的导出选项 ![在此处输入图像描述](../Images/9ab53055d9d41d1a018c03fac7b83e59.png)

选择导出数据格式 ![在此处输入图像描述](../Images/9d17ffe2e5dcb9210f38c8203da9d0db.png)

# java - f:ajax 监听器在动态添加的 h:selectOneMenu 中失败

> ID：10731925
> 
> 赞同：1
> 
> 时间：2012-05-24T05:57:46.587
> 
> 标签：java, jsf, jsf-2, facelets

我正在向`h:selectOneMenu`页面动态添加一个。但是对于 selectItems 不会调用 for`listener`方法，但如果从一开始就将其添加到页面中（不是使用属性动态添加），它确实可以工作。我的代码如下：`f:ajax``h:selectOneMenu``update`

（根据@Daniel 的建议更正）

```
 <h:commandButton value="Watch">
          <f:ajax render="deptsSelBox"/>
          <f:setPropertyActionListener value="#{true}" target="#{listRetriever.allow}" />
    </h:commandButton>  

    <h:panelGroup id="deptsSelBox">
        <h:selectOneMenu id="deptsSel" rendered="#{listRetriever.allow}" value="#{listRetriever.reqId}">  
            <f:selectItems value="#{listRetriever.list}" />
            <f:ajax listener="#{listRetriever.retrieve()}" execute="deptsSel" />
        </h:selectOneMenu>
    </h:panelGroup> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-24T06:04:42.670

`h:commandButton`没有`update`属性，看起来像是 primefaces 和纯 JSF 的混合体（`update`属性来自`p:commandButton`）

添加`f:ajax`到您的`commandButton`和使用`render`属性

```
<h:commandButton value="Watch">
      <f:ajax render="deptsSelBox"/>
      <f:setPropertyActionListener value="#{true}" target="#{listRetriever.allow}" />
</h:commandButton> 
```

还将您的选择ajax修复为此

```
<f:ajax listener="#{listRetriever.retrieve}" update="deptsSel"/> 
```

并尝试将范围从更改`request`为`view`

另一种方法是设置`allow`方法内部的值，像这样（您也可以将其作为参数发送）

```
<h:commandButton value="Watch" action="listRetriever.updateAllow">
      <f:ajax render="deptsSelBox"/>
</h:commandButton>  

public void updateAllow(){
     allow = true;
} 
```

# java - java: how to resize a frame containg image

> ID：10731926
> 
> 赞同：1
> 
> 时间：2012-05-24T05:57:47.287
> 
> 标签：java, image, swing, jframe, netbeans-7

I have created one frame and displaying an image into frame. but I am unable set the size of a frame. As i have tried following code, but its giving me the part of image i have set, Not the whole image. Please help me to re-size the image.

```
JFrame frame = new JFrame("My Window");
frame.setSize(200,200);
int frameWidth = 200;
int frameHeight = 200;
Dimension screenSize = Toolkit.getDefaultToolkit().getScreenSize();
frame.setBounds((int) screenSize.getWidth() - frameWidth, 0, frameWidth, frameHeight);
frame.pack();
frame.setVisible(true); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-24T06:34:20.407

您正在混合[布局管理器的](http://docs.oracle.com/javase/tutorial/uiswing/layout/using.html)[绝对定位](http://docs.oracle.com/javase/tutorial/uiswing/layout/none.html)和使用。当您调用or时，您使用的是绝对布局，即您手动管理组件的大小和位置。`setSize()``setBounds()`

当您调用 时`pack()`，您将大小和定位委托给框架内组件的 LayoutManager。LayoutManager 的位置和大小基于组件的首选/最小/最大大小和约束。[在此处](http://docs.oracle.com/javase/tutorial/uiswing/layout/using.html)查看有关 LayoutManager 的所有信息。

我建议依赖 LayoutManagers，因为它在不同平台上运行得更好，而且你的代码会更干净。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-24T15:40:50.913

```
package test.t100.t004;

import java.awt.Image;
import java.net.URL;

import javax.imageio.ImageIO;
import javax.swing.ImageIcon;
import javax.swing.JFrame;
import javax.swing.JLabel;
import javax.swing.JScrollPane;
import javax.swing.SwingUtilities;

public class ImageSizedGUI {

    ImageSizedGUI(Image image) {
        JLabel label = new JLabel(new ImageIcon(image));

        JFrame f = new JFrame("Image");
        f.setDefaultCloseOperation(JFrame.DISPOSE_ON_CLOSE);
        // either this, or..
        f.setContentPane(new JScrollPane(label));

        f.pack();
        // ..this, but could produce undesirable results for images 
        // that are larger than screen size!
        // f.setMinimumSize(f.getSize());
        f.setLocationByPlatform(true);
        f.setVisible(true);
    }

    public static void main(String[] args) throws Exception {
        String address = (args.length>0 ? args[0] :
                "http://pscode.org/media/stromlo2.jpg");
        URL url = new URL(address);
        final Image image = ImageIO.read(url);
        SwingUtilities.invokeLater(new Runnable(){
            public void run() {
                new ImageSizedGUI(image);
            }
        });
    }
} 
```

# mobile - Why HTML/Web UI response slower than Native UI?

> ID：10731934
> 
> 赞同：18
> 
> 时间：2012-05-24T05:58:53.373
> 
> 标签：mobile, user-interface, web, response, native

I can't understand, Why HTML/Web UI response slower than WinForms/WPF/Android View/Native UI?

The Native UI also have styles, elements nesting, events than the CSS, DOM, javascript events of the Web UI.

Event response time includes: focus changing, dropdown, scrolling, animation moving, animation resizing, etc.

The DOM tree insertion/replacing is also slow, inserting 10000 chars html will cost 100 ms in google chrome in android 4.0 while parsing its template only cost 20 ms(jQuery micro template).

I releazied maybe the biggest factor that slowdown event response is:

1.  The UI locking between parallel javascript processes;
2.  The rendering engine is too slow to process the new UI changing messages from javascript workers, especially when the browser rendering engine is busy with the last UI updating(because of the point 3);
3.  The html layout method (for example: css cascading, inline flow layout, responsive layout etc) may slow down partial UI updating.
4.  Parsing html/xml cost long time, a hint: Android view inflation relies heavily on pre-processing of XML files that is done at build time([http://developer.android.com/reference/android/view/LayoutInflater.html](http://developer.android.com/reference/android/view/LayoutInflater.html))

A subset of HTML and CSS standards maybe the future solution for webview app development:

[http://www.silexlabs.org/haxe/cocktail/](http://www.silexlabs.org/haxe/cocktail/)

[http://www.terrainformatica.com/htmlayout/](http://www.terrainformatica.com/htmlayout/)

[http://www.nativecss.com/](http://www.nativecss.com/)

[http://www.pixate.com/](http://www.pixate.com/)

[https://github.com/tombenner/nui](https://github.com/tombenner/nui)

[http://steelratstory.com/steelrat-products/wrathwebkit](http://steelratstory.com/steelrat-products/wrathwebkit)

[http://trac.webkit.org/wiki/EFLWebKit](http://trac.webkit.org/wiki/EFLWebKit)

[https://github.com/WebKitNix/webkitnix](https://github.com/WebKitNix/webkitnix)

[http://qt-project.org/doc/qt-4.8/richtext-html-subset.html](http://qt-project.org/doc/qt-4.8/richtext-html-subset.html)

[http://sealedabstract.com/rants/why-mobile-web-apps-are-slow/](http://sealedabstract.com/rants/why-mobile-web-apps-are-slow/)

A pile of native UI markup languages: [http://en.wikipedia.org/wiki/User_interface_markup_language](http://en.wikipedia.org/wiki/User_interface_markup_language)

why there is not a simplified HTML standard and a simplified Webcore layout engine to replace these native UIML?

Maybe we could realize a subset html in kivy.org project.

PC, android browser = application thread + ui thread

iOS browser = application thread + ui data thread + ui hardware thread(CoreAnimation/OpenGL ES)

In ios browser, application thread could directly call ui hardware thread.

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-05-27T06:44:44.493

如果 Web UI 在客户端完全由 JavaScript 实现，那么与 WinForms/Native UI 的区别将是微不足道的。

但是，在大多数情况下，Web UI 会触发一些 Web 请求到 Web 服务器，然后它必须经过以下步骤才能达到与 WinForms/Native 应用程序相同的效果：

1.  向 Web 服务器发送 HTTP 请求 (GET/POST/...)
2.  Web 服务器是一个可执行文件（采用外部应用程序或服务的格式），侦听一个或多个端口。当它接收到请求时，对其进行解析并找到 Web 应用程序。
3.  Web 服务器在应用程序中执行后端（服务器端）逻辑。
    诸如 ASP.NET 之类的 Web 应用程序是预编译的。此步骤的时间复杂度可能非常接近 Windows 应用程序。
4.  Web 服务器将结果呈现为标记并将其发送回客户端
5.  客户端（浏览器）解析结果并在必要时更新 UI。网页中的控件/图像/其他资源在浏览器中呈现的时间通常比 Windows 应用程序呈现其显示的时间要长一些。

即使 Web 服务器是本地的，也不能简单地忽略数据解析/格式化/传输所产生的成本。

另一方面，具有 WinForms/Native UI 的应用程序通常会维护一个消息循环，该循环是活动的并托管在机器代码中。UI请求通常只是触发在消息表中查找然后执行后端逻辑（上面的步骤2）
当它返回结果并更新UI时，它可以是简单的二进制数据结构（不需要在标记中） ，并且不回复另一个应用程序（浏览器）以呈现到屏幕上。

最后，WinForms/Native 应用程序通常可以完全控制维护多个线程以逐步更新 UI，而 Web 应用程序无法直接控制这种类型的服务器端资源。

**更新**：
当我们比较一个 Web 应用程序和一个 Windows/WPF（或本机）应用程序使用相同的 Web 服务来部分更新它们的 UI 时

![在此处输入图像描述](../Images/6f523c677e95475aa13c427aa6dd4dd6.png)

两个 UI 应该以可忽略的速度差异响应和刷新。响应和刷新 UI 的二进制和脚本执行之间的实现差异几乎没有。
两个 UI 都不需要重建控件树并刷新整个外观。在相同的条件下，它们可能具有相同的 CPU 优先级、内存/虚拟内存缓存以及进程/线程级别的相同/接近数量的内核对象和 GDI 句柄。
在这种情况下，正如您所描述的，应该几乎没有视觉差异。

**更新 2：**
实际上 Web 和 Windows 应用程序中的事件处理机制是相似的。DOM 有事件冒泡。同样，MFC 有命令路由；Winforms 有它的事件流；WPF 有事件冒泡和隧道等。这个想法是一个 UI 事件可能不严格属于一个控件，并且一个控件有某种方式声称一个事件已被“处理​​”。对于标准控件，焦点更改、文本更改、下拉菜单、滚动事件应该对 Web 和 Windows 应用程序具有相似的客户端响应时间。

在性能方面，渲染是最大的区别。Web 应用程序对“设备上下文”的控制有限，因为 Web 页面由外部应用程序（Web 浏览器）托管。Windows 应用程序可以使用 WPF 等 GPU 资源实现动画效果，并通过部分刷新“设备上下文”来加快渲染速度。这就是为什么 HTML5 画布让 Web 开发人员兴奋，而 Windows 游戏开发人员已经使用 OpenGL/DirectX 超过 10 年。

**更新 3：**
每个 Web 浏览器引擎（[http://en.wikipedia.org/wiki/Layout_engine](http://en.wikipedia.org/wiki/Layout_engine)）都有自己的渲染 DOM、CSS 实现；和（CSS）选择器的实现。在网页中移动和调整元素大小正在改变 DOM、CSS（树）设置。选择器和渲染性能高度依赖于 Web 浏览器引擎。

1.  UI 操作可能会使选择器通过不必要的步骤来更新 UI。
2.  网页无法控制通知浏览器进行部分呈现。

这使得花哨的 JavaScript 控件（一些 jQuery UI、dojo、Ext JS）不能实时快速，通常比 Flash 控件慢。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-29T15:11:58.890

与数据在网络上传输的时间相比，在客户端上花费的时间可以忽略不计。Windows 窗体或浏览器中网页的实际呈现时间以（数十或数百）微秒为单位。向服务器发送请求并返回结果以毫秒为单位。

您可以很容易地确认这一点：

1.  创建一个简单的 Winforms 应用程序，计时。
2.  创建一个类似的基于 Web 的应用程序。在您自己的 PC 上的网络服务器上运行它，IE //localhost/myapp.asp 并计时。
3.  在远程网络服务器上运行它并计时。

您会看到 1 最快，紧随其后的是 2（稍微慢一点，解释 HTML、CSS 等），而 3 由于网络时间的原因要慢得多。

要回答您的问题，差异几乎完全是由于网络延迟，这比本地处理时间大一个数量级。

编辑：添加评论解释原因会有点不受欢迎。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-12-20T03:05:47.870

要记住的一件事是浏览器本身是一个原生应用程序，因此为浏览器运行而构建的任何东西本质上都是用（至少）一个额外的抽象层编写的，而不是直接为原生执行而编写的东西。

同样值得注意的是这样的动态：

> **300 毫秒点击延迟，消失了** [http://updates.html5rocks.com/2013/12/300ms-tap-delay-gone-away](http://updates.html5rocks.com/2013/12/300ms-tap-delay-gone-away)

这种人为延迟的最初动力是支持捏缩放与其他触摸交互——也就是说，在这种情况下，较慢的响应速度是一种刻意区分不同用户操作的方式。

当然，虽然这是一个相当具体的用例，但一般概念确实可以作为基于浏览器与本机实现的不同考虑因素的示例。也就是说，基于浏览器的体验包括解决各种交互和内容的一些常见框架成本，而原生体验自然会更具体地定制为仅侦听/响应所需的交互模型。

在整个实现过程中，许多微小的部分（比如这个）在原始原生版本中变得更纤细和更集中，这有助于提高响应能力的总体效果。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-12-19T13:42:29.540

3大不同

1.  WebUI 应用程序在浏览器中运行，这取决于浏览器的优化程度。

2.  浏览器也有自己的 javascript jvm。另一个必须在运行之前运行并解释代码的进程。

所有这些都是在本机操作系统之上的额外层。如果您要打开计算机的活动监视器并在浏览器中打开一个网页，您会注意到什么是资源占用网络浏览器。

1.  原生 UI 元素具有图形加速支持。根据操作系统的不同，本机 ui 模板被编译为本机格式，无需解析即可进行渲染。

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2013-12-18T10:51:49.187

仅在不符合标准的浏览器中（包括所有 Android 浏览器、所有 Mac OS 浏览器、所有 Linux 浏览器，以及最糟糕的所有 Google Chrome 版本）。这些是写得不好、未经优化的浏览器，不关心触摸屏延迟、UI 响应和平滑滚动。在任何类型的 CPU 活动、磁盘或网络 I/O 和用户输入期间，它们都会锁定和卡顿。

Internet Explorer 11 或 iOS Safari 等高级浏览器有时甚至比未经优化的本机应用程序响应速度更快。

基本上只有 Windows 8.1 和 iOS 有响应式浏览器。就 UI 响应性而言，所有其他浏览器都较差。差别真的很大。IE11 和 iOS Safari在 UI 延迟和流畅度上**抹杀了其他浏览器。**

# .htaccess - .htaccess RewriteRule for joomla k2

> ID：10731938
> 
> 赞同：0
> 
> 时间：2012-05-24T05:59:15.680
> 
> 标签：.htaccess, mod-rewrite, joomla

Im using the master .htaccess [http://joomla-master-htaccess.googlecode.com/svn-history/r40/trunk/joomla-master-htaccess.txt](http://joomla-master-htaccess.googlecode.com/svn-history/r40/trunk/joomla-master-htaccess.txt)

im trying to set up a RewriteRule for my k2 module to add item, firebug Net panel points me to [http://www.wyzed.net/component/k2/item/add?tmpl=component](http://www.wyzed.net/component/k2/item/add?tmpl=component) wich return a Not Found 404 error

item/add?tmpl=component

i have tried with this

> RewriteRule ^components/com_k2.php$ - [L]
> 
> RewriteRule ^modules/mod_k2_content/tmpl/Default.php$ - [L]
> 
> RewriteRule ^modules/mod_k2_content.php$ - [L]
> 
> RewriteRule ^components/com_k2/controllers.php$ - [L]

still no success i was wondering if someone using joomla and k2 with master .htaccess add figure out how to add a exeption rule to k2 module

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-25T13:19:47.790

我想我会写自己的答案......在htaccess中有一个名为（高级服务器保护）的部分

将 K2 扩展与 master .htaccess 一起使用删除这些行

```
## Disallow visual fingerprinting of Joomla! sites (module position dump)
## Initial idea by Brian Teeman and Ken Crowder, see:
## http://www.slideshare.net/brianteeman/hidden-joomla-secrets
## Improved by @nikosdion to work more efficiently and handle template
## and tmpl query parameters
RewriteCond %{QUERY_STRING} (^|&)tmpl=(component|system) [NC]
RewriteRule .* - [L]
RewriteCond %{QUERY_STRING} (^|&)t(p|emplate|mpl)= [NC]
RewriteRule .* - [F] 
```

和本节

```
## Referrer filtering for common media files. Replace with your own domain name. 
```

用这个替换最后一行

```
RewriteRule \.(jp(e?g|2)?|png|gif|bmp|js|swf|ico)$ - [F] 
```

允许从 k2 加载 css..

享受。

# java - 为什么对象到字节 [] 在 java 中返回混乱的字符？

> ID：10731943
> 
> 赞同：0
> 
> 时间：2012-05-24T05:59:44.463
> 
> 标签：java, file-io, byte

```
public static byte[] objectToByteArray(Object obj) throws IOException {
ByteArrayOutputStream out = new ByteArrayOutputStream();
ObjectOutputStream objOut = null;
try {
    objOut = new ObjectOutputStream(out);
    objOut.writeObject(obj);
    objOut.flush();
} finally {
    objOut.close();
    out.close();
}
return out.toByteArray();
}

Main Method :

 public static void main(String[] args) throws IOException {
//
// System.out.println(getFileName("/home/local/ZOHOCORP/bharathi-1397/logs/bharathi-1397.csez.zohocorpin.com_2012_05_24.log",0));
try {
    throw new IOException("Error in main method");
} catch (IOException io) {
    System.out.println(new String(objectToByteArray(io.getMessage()),
        "UTF-8"));
}
//
} 
```

输出：��

我想将 Object 转换为 byte[] 但为什么它会返回这样的 ctrl 字符。我不明白你能帮帮我吗。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-24T06:03:53.127

序列化将对象转换为二进制数据。它基本上*不是文本数据*——就像图像文件不是文本数据一样。

您的代码尝试将这种不透明的二进制数据*解释*为 UTF-8 编码的文本数据。不是，所以难怪你会看到垃圾。如果您在文本编辑器中打开图像文件，您会看到类似的无用文本。您可以*尝试*将数据解释为文本（正如您所做的那样），但您不会得到任何有用的信息。

如果您想以可打印、可逆的方式将不透明的二进制数据表示为文本，您应该使用 base64 或 hex。有很多库可用于转换为 base64，包括[这个公共域之一](http://iharder.net/base64)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-24T06:03:59.237

当您使用 ObjectOutputStream 时，Java 以自己的二进制格式存储对象。在使用之前，您必须使用 ObjectInputStream 将数据解码为正确的对象。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-24T06:10:25.427

java api doc: public final void writeObject(Object obj) throws IOException; 将指定对象写入 ObjectOutputStream。写入对象的类、类的签名、类的非瞬态和非静态字段的值及其所有超类型。可以使用 writeObject 和 readObject 方法覆盖类的默认序列化。此对象引用的对象是可传递的，因此可以通过 ObjectInputStream 重建一个完全等效的对象图。

[http://docs.oracle.com/javase/1.4.2/docs/api/java/io/ObjectOutputStream.html#writeObject(java.lang.Object](http://docs.oracle.com/javase/1.4.2/docs/api/java/io/ObjectOutputStream.html#writeObject(java.lang.Object) )

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-24T06:35:35.957

您可以找到以下用于从文件写入和读取字节值的方法。

转换为十六进制字符串，然后转换为 Base64 格式

读取文件 Base64 格式

```
 byte [] encDataByteArr = hexToBytes(encData);
    byte [] dataBack = Base64.decodeBase64(encDataByteArr); 
```

写入文件

```
 byte [] data = Base64.encodeBase64(encDataByteArr);
    returnValue = bytesToHex(data); 
```

一些实用方法如下

```
public static synchronized String bytesToHex(byte [] buf){
    StringBuffer strbuf = new StringBuffer(buf.length * 2);
    int i;
    for (i = 0; i < buf.length; i++) {
        if (((int) buf[i] & 0xff) < 0x10){
            strbuf.append("0");
        }
        strbuf.append(Long.toString((int) buf[i] & 0xff, 16));
    }
    return strbuf.toString();
}

public synchronized static byte[] hexToBytes(String hexString) {
     byte[] b = new BigInteger(hexString,16).toByteArray();     
     return b;
} 
```

# javascript - Fixed effect of div within a parent div but position stick on screen as page scrolls

> ID：10731947
> 
> 赞同：0
> 
> 时间：2012-05-24T06:00:34.700
> 
> 标签：javascript, jquery, css

I want a DIV element fixed but relative to a parent DIV for as the screen resized that fixed DIV will move as the parents moved/resized so when you scroll down the page it will stick to that position. As i know when use position fixed on css, it will be relatively fixed to the entire screen, so the position of that fixed div will be relative to the size of your screen. What i want is that to stick or let the DIV stay to that location of the screen even if you scroll the page but its position will be relative to its parent DIV container. Is there any way to do that on CSS/Javascript/jquery?

Note: The effect should be like position:fixed where the DIV wont move when you scroll the page.

Any answer is greatly appreciated.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-24T06:29:49.350

您可以使用`position: absolute`. 您应该将 div 嵌套在父 div 中。分配`top: 0`, `left: 0`.

**[这](http://jsfiddle.net/VdNVd/)**是演示。

如果您希望将 div 固定在某个位置，**[这里](http://jsfiddle.net/VdNVd/1/)**是演示。

希望这可以帮助

# gwt - GWT:how to get selected radio button's value

> ID：10731951
> 
> 赞同：3
> 
> 时间：2012-05-24T06:00:47.943
> 
> 标签：gwt

I am create dynamic number of radio buttons in my GWT

```
 public void createTestList(ArrayList<Test> result){
    for(int i =0 ; i<result.size();i++){
                    int id = result.get(i).getTestId();
        RadioButton rd = new RadioButton("group", result.get(i).getTestType());
        verticalPanel.add(rd);
    } 
```

where Test is my Entity class ..

I am getting 4 different types of radio buttons in my view , Now if i select any one of the radio button, first I need to get the id of the selected Radio button , how can this be possible ?

secondly How will i check that which one of the multiple radio button is selected ?

Thanks

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-24T06:08:58.920

您需要检查每个单选按钮上的 public java.lang.Boolean getValue() 是否被选中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-05-13T08:12:41.627

可以添加点击处理程序并更新选定的单选按钮变量：

```
choiceItemKind = new VerticalPanel();
ArrayList<String> kinds = new ArrayList<String>();
kinds.add(...);
kinds.add(...);

choiceItemKind.clear();

ClickHandler choiceClickHandler = new ClickHandler()
{
    @Override
    public void onClick(ClickEvent event)
    {
        addItemKindSelectedLabel = ((RadioButton) event.getSource()).getText();
    }
};

for (String label : kinds)
{
    RadioButton radioButton = new RadioButton("kind", label);
    //radioButton.setTitle("Tooltyp");
    if (label.equals(addItemKindSelectedLabel))
        radioButton.setValue(true);
    radioButton.addClickHandler(choiceClickHandler);
    choiceItemKind.add(radioButton);
}
...
addItemKindSelectedLabel = "";
...
if (!addItemKindSelectedLabel.isEmpty())
    ...; 
```

upd：设置选定的单选按钮而不重建：

```
for (int i = 0; i < choiceItemKind.getWidgetCount(); i++)
{
    RadioButton radioButton = (RadioButton) choiceItemKind.getWidget(i);
    radioButton.setValue(radioButton.getText().equals(addItemKindSelectedLabel));
} 
```

# java - Android grant application root access in order to open socket on port < 1025

> ID：10731952
> 
> 赞同：3
> 
> 时间：2012-05-24T06:00:54.807
> 
> 标签：java, android

In order to open a socket on a port < 1025 i need root access. Exactly how do i give my application this priviledge? I know i can run the su command in a shell to get root access, but is that all i need to do to open a socket on a port < 1025? Or do i need to run some sort of command like su open socket 0.0.0.0:80 or something? I am so confused as there are such little resources out there for this. What is the purpose of google not pre-rooting all of their devices?

Here is what i know i can do to get root access. [http://www.youtube.com/watch?v=jmfvX8zvsS0&list=UUk1SpWNzOs4MYmr0uICEntg&index=4&feature=plcp](http://www.youtube.com/watch?v=jmfvX8zvsS0&list=UUk1SpWNzOs4MYmr0uICEntg&index=4&feature=plcp)

EDIT: I just wrote this:

```
public class RootTestActivity extends Activity {
/** Called when the activity is first created. */
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);
    Button button = (Button)findViewById(R.id.button);
    button.setOnClickListener(new OnClickListener() {

        public void onClick(View v) {
            String cmds[] = {"su", "-c", "ls /system/app"};
            Shell shell = new Shell();
            String text = shell.sendShellCommand(cmds);
            TextView textView = (TextView)findViewById(R.id.textView);
            textView.setText(text);
            try {
                ServerSocket socket = new ServerSocket(80);
                Log.d("Root", "Opened socket on port 80!!!");
            }catch(Exception e) {
                Log.d("Root", "Failed to open socket on port 80!!!");
                e.printStackTrace();
            }
        }

    });
  }
} 
```

What this does is it runs the commands su, -c, and then ls /system/app when a button is clicked. Then it gets the output and shows it on a textview (which actually works. I got the su prompt and selected accept and it listed everything in /system/apps/). But then after that i attempt to open a socket on port 80 and it still says Permission Denied. The application has root access, but still cannot open the socket! In the logcat it printed out "Failed to open socket on port 80!!!" as i told it to do when the exception is caught. What can i do to open the socket on port 80 without permission denied?

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-05-24T06:33:45.117

As per [https://serverfault.com/questions/112795/how-can-i-run-a-server-on-linux-on-port-80-as-a-normal-user](https://serverfault.com/questions/112795/how-can-i-run-a-server-on-linux-on-port-80-as-a-normal-user)

I ran this command as root:

```
iptables -t nat -A PREROUTING -p tcp --dport 80 -j REDIRECT --to-port 8080 
```

And it worked! I opened a socket on port 8080 and when connecting to my phone on port 80 all traffic got redirected to 8080! WOW!

# iphone - 如何找到 whici 变量具有更大的值并将其分配给 iphone 应用程序中的 max var

> ID：10731957
> 
> 赞同：-2
> 
> 时间：2012-05-24T06:01:38.877
> 
> 标签：iphone, xcode

我有两个用于图的变量，一个是 value，另一个是 value1

```
 appDelegate=[[UIApplication sharedApplication]delegate];

     int value3=[appDelegate.oneGlobal intValue];
    int value4=[appDelegate.twoGlobal intValue];
    int value5=[appDelegate.threeGlobal intValue];

        int max;

        if (value3>value4) {
            max=value3;

        }  
        else if(value3>value5){

            max=value3;

          }
        else if(value4>value3){
            max=value4;

        }
        else if(value4>value5){

            max=value4;

        }
        else{
            max=value5;

        } 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-24T06:47:06.440

使用`MAX()`：

```
int max = MAX(MAX(value3, value4), value5); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-24T06:45:45.627

删除所有您的`if-statements`并将以下内容添加到您的代码中：

```
max = (value3 > value4) ? value3: value4;
max = (max > value5) ? max: value5; 
```

这样就行了。

希望能帮助到你

# iphone - 单色着色效果

> ID：10731969
> 
> 赞同：-3
> 
> 时间：2012-05-24T06:02:55.493
> 
> 标签：iphone, ios

我想在 iphone 中实现单色图像的灰度级。如果有人知道教程的链接，请提及它们。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-24T06:16:42.320

查看以下链接可能会对您有所帮助

[https://developer.apple.com/library/mac/#documentation/graphicsimaging/Conceptual/CoreImaging/ci_tasks/ci_tasks.html#//apple_ref/doc/uid/TP30001185-CH203-SW4](https://developer.apple.com/library/mac/#documentation/graphicsimaging/Conceptual/CoreImaging/ci_tasks/ci_tasks.html#//apple_ref/doc/uid/TP30001185-CH203-SW4)

# android - 如何通过意图传递包含特殊字符（&）的字符串？

> ID：10731971
> 
> 赞同：0
> 
> 时间：2012-05-24T06:03:06.273
> 
> 标签：android, string, android-intent, nullpointerexception

我正在实现一个`Activity`带有`button`“珠宝和配饰”的文本。当我传递按钮的文本并触发`Intent`它时，它会导致`NullPointerException`另一个`Activity`？该怎么办？任何帮助将不胜感激。提前致谢。

```
public class Listing extends ListActivity {
/** Button to provide advance search functionality. */

TextView Paging;
String tit[];
String price1[];
String brand[];
String value;
String pst;
TextView text;
List<ListRowData> listData;
String priceAtPosition;
String typeAtPosition;
String brandAtPosition;
ProgressDialog dialog1;
ProgressDialog dialog;
AlertDialog alert;

@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    requestWindowFeature(Window.FEATURE_NO_TITLE);
    setContentView(R.layout.item_listing_page);
    Intent intent = getIntent();
    savedInstanceState = intent.getExtras();
    value = savedInstanceState.getString("value");
    priceAtPosition = savedInstanceState.getString("priceAtPosition");
    typeAtPosition = savedInstanceState.getString("typeAtPosition");
    brandAtPosition = savedInstanceState.getString("brandAtpositoion");

    BottomBarActivity logoBar = (BottomBarActivity) 
                                findViewById(R.id.bottomBarLayout);
    logoBar.setActivity(this);

    TextView txAreaName = (TextView) findViewById(R.id.areaName);
    txAreaName.setText("Shop");

    text = (TextView) findViewById(R.id.list_heading);
    text.setText(value);

    LoginScreenData loginScreenData = new LoginScreenData();

    pst = loginScreenData.getPst();
    Paging = (TextView) findViewById(R.id.textPage);

    Button refine = (Button) findViewById(R.id.bt_refine);
    refine.setOnClickListener(btClickListener);

    Button sort = (Button) findViewById(R.id.bt_sort);
    sort.setOnClickListener(btClickListener);

    Button btnSearch = (Button) findViewById(R.id.bt_search);
    btnSearch.setOnClickListener(btSearchListener);

    String Latest1 = "Latest";

    listData = new ArrayList<ListRowData>();

    methodApiCall(pst, Latest1);

// Get the intent, verify the action and get the query

    Intent in = getIntent();
    in.putExtra("value", value);
    if (Intent.ACTION_SEARCH.equals(in.getAction())) {
        String query = in.getStringExtra(SearchManager.QUERY);
        methodApiSearchCall(pst, query);
    }

}

private void methodApiSearchCall(String pst2, String query) {

    List<ListRowData> listData;
    listData = new ArrayList<ListRowData>();

    String envelope1 = "<req>" + "<term>" + query + "</term>" + "</req>";
    SoapObject request = new SoapObject(NAMESPACE, METHOD_NAME1);
    request.addProperty("requestXml", envelope1);
    SoapSerializationEnvelope envelope = new SoapSerializationEnvelope(
            SoapEnvelope.VER11);
    envelope.setOutputSoapObject(request);
    HttpTransportSE androidHttpTransport = new HttpTransportSE(URL);
    Object response = null;
    String searchReference[] = null;
    String eventSearchResponse = null;
    String searchImg[] = null;
    String searchTitle[] = null;

    try {
        androidHttpTransport.call(SOAP_ACTION1, envelope);
        response = envelope.getResponse();
        eventSearchResponse = response.toString();
    } catch (Exception e) {
        e.printStackTrace();
    }

    try {

        DocumentBuilderFactory dbf = DocumentBuilderFactory.newInstance();
        DocumentBuilder db = dbf.newDocumentBuilder();
        Document doc = db.parse(new InputSource(new StringReader(
                eventSearchResponse)));

        // normalize the document
        doc.getDocumentElement().normalize();

        NodeList nodelistDet = doc.getElementsByTagName("det");

        for (int j = 0; j < nodelistDet.getLength(); j++) {

            Node node1 = nodelistDet.item(0);
            Element fstelement1 = (Element) node1;
            NodeList lnlist = fstelement1.getElementsByTagName("ln");
            searchReference = new String[lnlist.getLength()];
            searchImg = new String[lnlist.getLength()];
            searchTitle = new String[lnlist.getLength()];

            for (int i = 0; i < lnlist.getLength(); i++) {

                Element lnelement2 = (Element) lnlist.item(i);
                searchReference[i] = lnelement2.getAttribute("ref");
                searchImg[i] = lnelement2.getAttribute("img");
                searchTitle[i] = lnelement2.getAttribute("tit");
            }
        }
    } catch (Exception e) {
        e.printStackTrace();
    }

    for (int i = 0; i < searchTitle.length; i++) {

        ListRowData rowData = new ListRowData();
        rowData.setSearchReference(searchReference[i]);
        rowData.setSearchImg(searchImg[i]);
        rowData.setSearchTitle(searchTitle[i]);
        listData.add(rowData);
    }
    method(listData);

}

public void methodApiCall(String pstcode, String latest) {

    List<ListRowData> listData = new ArrayList<ListRowData>();
    String envelope1 = "<req>" + "<pst>" + pstcode + "</pst>" + "<sort>"
            + latest + "</sort>" + "<dept>WOMEN</dept>" + "<cat>" + value
            + "</cat>" + "<prmax>" + priceAtPosition + "</prmax>"
            + "<brand>" + brandAtPosition + "</brand>" + "<pp>10</pp>"
            + "<inx>1</inx>" + "</req>";

    SoapObject request = new SoapObject(NAMESPACE, METHOD_NAME);
    request.addProperty("requestXml", envelope1);

    SoapSerializationEnvelope envelope = new SoapSerializationEnvelope(
            SoapEnvelope.VER11);
    envelope.setOutputSoapObject(request);
    HttpTransportSE androidHttpTransport = new HttpTransportSE(URL);

    Object response = null;
    String[] description = null;
    String salePrice[] = null;
    String reference[] = null;
    String image[] = null;
    String shopSearchResponse = null;

    try {
        androidHttpTransport.call(SOAP_ACTION, envelope);
        response = envelope.getResponse();
        shopSearchResponse = response.toString();
    } catch (Exception e) {
        e.printStackTrace();
    }

    try {
        DocumentBuilderFactory dbf = DocumentBuilderFactory.newInstance();
        DocumentBuilder db = dbf.newDocumentBuilder();
        Document doc = db.parse(new InputSource(new StringReader(
                shopSearchResponse)));
        // normalize the document
        doc.getDocumentElement().normalize();
        NodeList rootnode = doc.getElementsByTagName("resp");
        Node node = rootnode.item(0);
        Element fstelement = (Element) node;
        NodeList reglist = fstelement.getElementsByTagName("cnt").item(0)
                .getChildNodes();
        Node nvalue = (Node) reglist.item(0);
        NodeList reglist1 = fstelement.getElementsByTagName("pp").item(0)
                .getChildNodes();
        Node nvalue1 = (Node) reglist1.item(0);
        NodeList reglist2 = fstelement.getElementsByTagName("inx").item(0)
                .getChildNodes();
        Node nvalue2 = (Node) reglist2.item(0);
        String count = nvalue.getNodeValue();
        String index = nvalue2.getNodeValue();
        String perPage = nvalue1.getNodeValue();
        Paging.setText(index + " - " + perPage + " out of " + count);
        NodeList nodelist = doc.getElementsByTagName("det");

        for (int j = 0; j < nodelist.getLength(); j++) {

            Node node1 = nodelist.item(0);
            Element fstelement1 = (Element) node1;
            NodeList lnlist = fstelement1.getElementsByTagName("ln");
            description = new String[lnlist.getLength()];
            tit = new String[lnlist.getLength()];
            salePrice = new String[lnlist.getLength()];
            reference = new String[lnlist.getLength()];
            price1 = new String[lnlist.getLength()];
            brand = new String[lnlist.getLength()];
            image = new String[lnlist.getLength()];

            for (int i = 0; i < lnlist.getLength(); i++) {

                Element lnelement = (Element) lnlist.item(i);
                description[i] = lnelement.getAttribute("desc");
                tit[i] = lnelement.getAttribute("tit");
                salePrice[i] = lnelement.getAttribute("sale");
                reference[i] = lnelement.getAttribute("ref");
                price1[i] = lnelement.getAttribute("price");
                brand[i] = lnelement.getAttribute("brand");
                image[i] = lnelement.getAttribute("img");
            }
        }
    } catch (Exception e) {
        e.printStackTrace();
    }

    for (int i = 0; i < tit.length; i++) {

        ListRowData rowData = new ListRowData();
        rowData.setDescription(description[i]);
        rowData.setNew_Price(salePrice[i]);
        rowData.setOld_Price(price1[i]);
        rowData.setTitle(tit[i]);
        rowData.setImage(image[i]);
        listData.add(rowData);
    }

    TextView totalitem = (TextView) findViewById(R.id.tx_totalItem);
    totalitem.setText(Integer.toString(tit.length) + " Items");
    ListView lv = getListView(); // Getting list view to activity
    setListAdapter(new ListCustomAdapter(this,
            R.layout.shop_list_items_row, listData));

    // sets onItemClick event on list item
    lv.setOnItemClickListener(itemClickListener);

}

private OnClickListener btSearchListener = new OnClickListener() {

    public void onClick(View view) {
        Intent in = new Intent();
        in.putExtra("value", value);
        onSearchRequested();
    }
};

/** OnClickListener instance to perform onClick on buttons. */

private OnClickListener btClickListener = new OnClickListener() {

    public void onClick(View v) {
        Intent myIntent;
        if (v.getId() == R.id.bt_refine) {
            myIntent = new Intent().setClass(getApplicationContext(),
                    RefinePageActivity.class);
            myIntent.putExtra("title", tit);
            myIntent.putExtra("price", price1);
            myIntent.putExtra("brand", brand);
            myIntent.putExtra("value1", value);
            startActivity(myIntent);
        }

        else if (v.getId() == R.id.bt_sort) {

            final String items[] = { "Latest", "Title", "Price" };
            AlertDialog.Builder builder = new AlertDialog.Builder(
                    Listing.this);
            builder.setTitle("Pick a Item for sort");
            builder.setSingleChoiceItems(items, -1,
                    new DialogInterface.OnClickListener() {
                        public void onClick(DialogInterface dialog, int item) {
                            listData = new ArrayList<ListRowData>();
                            methodApiCall("Default", items[item]);
                            alert.dismiss();
                            dialog1 = ProgressDialog.show(Listing.this,
                                    "loading please wait",
                                    "Loading. Please wait...", true);
                            new Thread() {
                                public void run() {
                                    try {
                                        // performBackgroundProcess1();
                                        sleep(3000, 000);
                                    } catch (Exception e) {
                                        Log.e("tag", e.getMessage());
                                    }
                                    // dismiss the progress dialog
                                    dialog1.dismiss();

                                }
                            }.start();
                        }
                    });
            alert = builder.create();
            alert.show();
        }
    }
};

void method(List<ListRowData> ll) {

    setListAdapter(new ListCustomAdapterShopSearch(this,
            R.layout.events_search_list_item_row, ll));
    ListView lv1 = getListView();
    lv1.setOnItemClickListener(itemClickListener);
}

/** OnItemClickListener instance to perform itemClick event on items. */
private OnItemClickListener itemClickListener = new OnItemClickListener() {
    public void onItemClick(AdapterView<?> parent, View view,
            final int position, long id) {

        dialog = ProgressDialog.show(view.getContext(),
                "loading please wait", "Loading. Please wait...", true);
        new Thread() {
            public void run() {
                try {
                    Intent inDetail = new Intent().setClass(
                            getApplicationContext(), DetailPage.class);
                    inDetail.putExtra("Position", position);
                    startActivity(inDetail);
                } catch (Exception e) {
                    Log.e("tag", e.getMessage());
                }
                // dismiss the progress dialog
                dialog.dismiss();
            }
        }.start();
    }
};
} 
```

日志输出：

```
05-24 12:02:49.232: E/AndroidRuntime(849): java.lang.RuntimeException: Unable to start activity ComponentInfo{com.capstrov/commerce.app.lib.shop.Listing}: java.lang.NullPointerException
05-24 12:02:49.232: E/AndroidRuntime(849):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2663)
05-24 12:02:49.232: E/AndroidRuntime(849):  at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2679)
05-24 12:02:49.232: E/AndroidRuntime(849):  at android.app.ActivityThread.access$2300(ActivityThread.java:125)
05-24 12:02:49.232: E/AndroidRuntime(849):  at android.app.ActivityThread$H.handleMessage(ActivityThread.java:2033)
05-24 12:02:49.232: E/AndroidRuntime(849):  at android.os.Handler.dispatchMessage(Handler.java:99)
05-24 12:02:49.232: E/AndroidRuntime(849):  at android.os.Looper.loop(Looper.java:123)
05-24 12:02:49.232: E/AndroidRuntime(849):  at android.app.ActivityThread.main(ActivityThread.java:4627)
05-24 12:02:49.232: E/AndroidRuntime(849):  at java.lang.reflect.Method.invokeNative(Native Method)
05-24 12:02:49.232: E/AndroidRuntime(849):  at java.lang.reflect.Method.invoke(Method.java:521)
05-24 12:02:49.232: E/AndroidRuntime(849):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:868)
05-24 12:02:49.232: E/AndroidRuntime(849):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:626)
05-24 12:02:49.232: E/AndroidRuntime(849):  at dalvik.system.NativeStart.main(Native Method)
05-24 12:02:49.232: E/AndroidRuntime(849): Caused by: java.lang.NullPointerException
05-24 12:02:49.232: E/AndroidRuntime(849):  at commerce.app.lib.shop.Listing.methodApiCall(Listing.java:280)
05-24 12:02:49.232: E/AndroidRuntime(849):  at commerce.app.lib.shop.Listing.onCreate(Listing.java:110)
05-24 12:02:49.232: E/AndroidRuntime(849):  at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1047)
05-24 12:02:49.232: E/AndroidRuntime(849):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2627)
05-24 12:02:49.232: E/AndroidRuntime(849):  ... 11 more 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-24T06:07:04.243

```
Encode & with :    &amp; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-24T06:09:21.033

Java中的所有字符串都存储在UNICODE中，因此使用char(&)不会抛出异常。发布空指针异常的堆栈跟踪，可能还有其他问题。

# jquery - 如何在 mvc3 中使用 Jquery Templ()

> ID：10731972
> 
> 赞同：0
> 
> 时间：2012-05-24T06:03:26.397
> 
> 标签：jquery, asp.net-mvc-3

我有一个模板

```
<script id="template" type="text/x-jquery-tmpl">
<div class="experience">
    <label for="c${count}">New Thing:</label>
    <input type="text" id="c${count}" name="Fund[${count}].Name" />
    <label for="c${count}">New Thing count:</label>
    <input type="text" id="c${count}" name="Fund[${count}].FundNo" />
</div> 
```

我将控件动态添加到 div 容器中。

我的 mvc 应用程序中有一个模型

```
[Serializable]
public class Step2ViewModel : IStepViewModel
{
    [Required]
    public List<FormTest.Models.Item> Things;
}

[Serializable]
public class Item
{
    public string Name { get; set; }
    public string Number { get; set; }
} 
```

如何将这些新创建的控件绑定到模型。这是否需要在我的模板中使用@Html.LabelFor、@Html.TextBoxFor 等？

谢谢！

**编辑**：

以防万一问题可以解释 - 我想在发布表单时将动态创建的控件（使用 templ() 完成）绑定到我的模型中的 List 。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-24T06:18:41.117

```
<script src="http://code.jquery.com/jquery-latest.min.js"></script>
    <script src="http://ajax.microsoft.com/ajax/jquery.templates/beta1/jquery.tmpl.min.js"></script>
    <script type="text/javascript">
        $(document).ready(function () {
            var count = 0;
            $('#btnAddDiv').live('click', function () {
                var data = [{ 'count': count++}];
                $('#template').tmpl(data).appendTo('body');
            });
        });
    </script>
    <script id="template" type="text/x-jquery-tmpl">
<div class="experience">
    <label for="c${count}">New Thing:</label>
    <input type="text" id="c${count}" name="Fund[${count}].Name" />
    <label for="c${count}">New Thing count:</label>
    <input type="text" id="c${count}" name="Fund[${count}].FundNo" />
</div>
    </script>

  <input type="button" id="btnAddDiv" value="Add Div" /> 
```

//在按钮点击时添加div

```
//Or

 <script src="http://code.jquery.com/jquery-latest.min.js"></script>
        <script src="http://ajax.microsoft.com/ajax/jquery.templates/beta1/jquery.tmpl.min.js"></script>
        <script type="text/javascript">
            $(document).ready(function () {
                var data = [{ 'count': 1 }, { 'count': 2 }, { 'count': 3}];
                $('#template').tmpl(data).appendTo('body');
            });
        </script>
        <script id="template" type="text/x-jquery-tmpl">
    <div class="experience">
        <label for="c${count}">New Thing:</label>
        <input type="text" id="c${count}" name="Fund[${count}].Name" />
        <label for="c${count}">New Thing count:</label>
        <input type="text" id="c${count}" name="Fund[${count}].FundNo" />
    </div>
        </script> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-24T12:27:09.710

首先，您使用的项目将不再有更多更新并且从未完成。

Boris Moore 创建了一种继续 jQuery 模板项目的方法，它被称为**[JsRender](https://github.com/BorisMoore/jsrender)**。使用 JsRender，您拥有 jQuery 模板的强大功能，以及更多功能，例如[访问路径](http://borismoore.github.com/jsrender/demos/step-by-step/07_paths.html)、使用[辅助函数](http://borismoore.github.com/jsrender/demos/step-by-step/09_helper-functions.html)、[对 jQuery 没有任何依赖](http://borismoore.github.com/jsrender/demos/step-by-step/20_without-jquery.html)，而且列表还在继续……

[PluralSight](http://www.pluralsight-training.net)有一个整整 3 小时[的 JsRender 课程](http://www.pluralsight-training.net/microsoft/courses/TableOfContents?courseName=jsrender-fundamentals)（因此您可以看到它的重要性），您可以使用试用帐户开始查看它。

* * *

**现在关于您的实际问题**

每次您想让 .NET 框架在提交表单时为您填充模型时，您必须确保编写每个属性，因为您有一个数组，因此您需要传递模型的整个完整路径.

# css - 即使打开溢出，Firefox 也会错误地扩展 div 高度

> ID：10731975
> 
> 赞同：0
> 
> 时间：2012-05-24T06:03:50.050
> 
> 标签：css, firefox, overflow

适用于 Chrome，但不适用于 Firefox。当我不想要它时，div 会自动扩展。 [http://jsfiddle.net/s8d5v/](http://jsfiddle.net/s8d5v/)

```
<div style="display: table; table-layout: fixed; width: 100%; height: 200px;">
    <div style="display: table-row">
      <div style="display: block; overflow: auto; height: 100%; width: 100%;">
          <p>The height expands in Firefox, but not Chrome. It works correctly in Chrome when I want it to overflow.</p>

          <p>Curabitur blandit tempus porttitor. Integer posuere erat a ante venenatis dapibus posuere velit aliquet. Cras mattis consectetur purus sit amet fermentum. Nulla vitae elit libero, a pharetra augue. Cum sociis natoque penatibus et magnis dis parturient montes, nascetur ridiculus mus. Etiam porta sem malesuada magna mollis euismod. Cum sociis natoque penatibus et magnis dis parturient montes, nascetur ridiculus mus.</p>

          <p>Curabitur blandit tempus porttitor. Integer posuere erat a ante venenatis dapibus posuere velit aliquet. Cras mattis consectetur purus sit amet fermentum. Nulla vitae elit libero, a pharetra augue. Cum sociis natoque penatibus et magnis dis parturient montes, nascetur ridiculus mus. Etiam porta sem malesuada magna mollis euismod. Cum sociis natoque penatibus et magnis dis parturient montes, nascetur ridiculus mus.</p>

          <p>Curabitur blandit tempus porttitor. Integer posuere erat a ante venenatis dapibus posuere velit aliquet. Cras mattis consectetur purus sit amet fermentum. Nulla vitae elit libero, a pharetra augue. Cum sociis natoque penatibus et magnis dis parturient montes, nascetur ridiculus mus. Etiam porta sem malesuada magna mollis euismod. Cum sociis natoque penatibus et magnis dis parturient montes, nascetur ridiculus mus.</p>
      </div>
  </div>
  <div style="display: table-row; height: 40px; width: 100%; background: yellow;">
      bottom bar
  </div>

</div> 
```

​</p>

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-24T20:32:30.460

您的`overflow:auto`div 具有自动高度（因为它是其父单元格的 100%，具有自动高度），不是吗？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-24T06:06:43.917

变化高度：100%；到第三个 div 中的固定高度

```
<div style="display: table; table-layout: fixed; width: 100%; height: 200px;">
    <div style="display: table-row">
      <div style="overflow: auto; height: 150px; width: 100%;">
          <p>The height expands in Firefox, but not Chrome. It works correctly in Chrome when I want it to overflow.</p>

          <p>Curabitur blandit tempus porttitor. Integer posuere erat a ante venenatis dapibus posuere velit aliquet. Cras mattis consectetur purus sit amet fermentum. Nulla vitae elit libero, a pharetra augue. Cum sociis natoque penatibus et magnis dis parturient montes, nascetur ridiculus mus. Etiam porta sem malesuada magna mollis euismod. Cum sociis natoque penatibus et magnis dis parturient montes, nascetur ridiculus mus.</p>

          <p>Curabitur blandit tempus porttitor. Integer posuere erat a ante venenatis dapibus posuere velit aliquet. Cras mattis consectetur purus sit amet fermentum. Nulla vitae elit libero, a pharetra augue. Cum sociis natoque penatibus et magnis dis parturient montes, nascetur ridiculus mus. Etiam porta sem malesuada magna mollis euismod. Cum sociis natoque penatibus et magnis dis parturient montes, nascetur ridiculus mus.</p>

          <p>Curabitur blandit tempus porttitor. Integer posuere erat a ante venenatis dapibus posuere velit aliquet. Cras mattis consectetur purus sit amet fermentum. Nulla vitae elit libero, a pharetra augue. Cum sociis natoque penatibus et magnis dis parturient montes, nascetur ridiculus mus. Etiam porta sem malesuada magna mollis euismod. Cum sociis natoque penatibus et magnis dis parturient montes, nascetur ridiculus mus.</p>
      </div>
  </div>
  <div style="display: table-row; height: 40px; width: 100%; background: yellow;">
      bottom bar
  </div>

</div> 
```

# java - 如何使用 selenium 2.0 (webdriver) 处理窗口弹出窗口？

> ID：10731978
> 
> 赞同：1
> 
> 时间：2012-05-24T06:03:56.180
> 
> 标签：java, selenium, webdriver

`enter code here`简介：我目前正在使用 selenium 2.0 来自动化 UI 的测试。直到昨天我遇到弹出窗口之前一切都很好。我必须处理窗口弹出窗口。

问题：我正在使用以下代码导航到页面=>

```
driver.get("http://xxx.xx.x.xxx:zzzz/yyyy/"); 
        driver.findElement(By.name("username")).sendKeys("username");
        driver.findElement(By.name("password")).sendKeys("password");
        driver.findElement(By.className("rowClass")).submit();
        driver.findElement(By.name("uploadfile")).click();  //this is the browse button 
```

现在当我单击浏览按钮时出现问题。它会打开另一个窗口浏览文件窗口。我需要做的是通过导航到给定路径来选择一个文件，然后选择一个特定文件，我无法做到目前相同。可能是什么建议。有人说使用 selenium 2.0 做同样的事情并改用 autoit 是不可能的。如果有人知道怎么做，请告诉我，否则请提出更好的方法来完成它。谢谢并恭祝安康。

PS：

[//这是在http://seleniumhq.org/docs/03_webdriver.html](http://seleniumhq.org/docs/03_webdriver.htmlbut)中提到的解决方案， 但在我的情况下不起作用

```
Alert alert = driver.switchTo().alert(); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-24T08:12:16.487

这更像是“如何在 WebDriver 中上传文件？” 已经被问过[很多次](https://www.google.com/search?q=webdriver%20upload%20file)的问题:)。

Selenium 2 (WebDriver) Java 示例：

```
// assuming driver is a healthy WebDriver instance
WebElement fileInput = driver.findElement(By.name("uploadfile"));
fileInput.sendKeys("C:/path/to/file.jpg"); 
```

这个想法是将文件的绝对路径直接发送到您通常单击以获取模式窗口的元素 - 即`<input type='file' />`元素（或`Browse`您所称的按钮）。

此外，该`Alert`界面仅用于弹出 JavaScript 对话框 - `alert`, `confirm`, `prompt`.

# eclipse - “此编译单元不在 java 项目的构建路径上”-Eclipse

> ID：10731984
> 
> 赞同：3
> 
> 时间：2012-05-24T06:04:11.823
> 
> 标签：eclipse, mercurial, autocomplete

我是 eclipse 环境的新手。我通过 New->Project->Mercurial->Clone existing project 从存储库（Hg）中克隆我的项目。在这里，我的问题是“此编译单元不在 java 项目的构建路径上”消息在我编辑编码时出现。自动完成不起作用。请让我知道如何解决这个问题...

注意：我在 google 和 stackoverflow 中搜索过。但我仍然不清楚。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-06T05:32:59.903

我在 Windows 7 上的 Eclipse 中也遇到了这个问题。解决方案是转到项目-> 右键单击​​-> 选择属性-> 项目方面-> 修改您正在使用的 JDK 版本的 java 版本。请注意，如果项目的 JDK 版本更高，例如 1.5，并且您的项目设置为 jdk 1.4，则它将无法工作。反之亦然。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-05-24T06:12:43.817

右键单击您的项目，选择属性。在左侧选择 Java 构建路径。转到库选项卡并选择 JRE 系统库。在右侧，单击编辑选项。选择备用 JRE 单选按钮。查看您已安装的 JDK 是否存在于您的下拉菜单中并选择它。这应该可以解决您的问题。

# ios - JSON POST 在 Poster/HTTP Client(Mac) 中运行良好，但在 XCode 中的 iOS 应用程序中运行良好

> ID：10731985
> 
> 赞同：0
> 
> 时间：2012-05-24T06:04:22.887
> 
> 标签：ios, json, httprequest, xcode4.3

我正在尝试将 JSON 内容发布到 Web 服务。它在 POSTER（firefox 插件）和[HTTP 客户端（Mac）](http://ditchnet.org/httpclient/)上运行良好，但在尝试从 XCode（iOS 应用程序）POS​​T 时抛出 500-Internal Server Error。有人可以帮我解决这个问题。

请求详细信息是：-

**HTTP 方法：POST**

**内容类型：应用程序/json**

**HTTP 正文：**

```
{
  "HasSunRoof" : "true",
  "HasTiltWheel" : "true",
  "VIN" : "XXXXXXXXXXXXXXX",
  "VoluntarySignatureComments" : "Voluntary sign comments",
  "Make" : "Audi",
  "IsVinManuallyEntered" : "false",
  "AssociatedCompanyId" : "2",
  "ReposessionMethod" : "Voluntary with release",
  "HasKeys" : "true",
  "CreatedBy" : "RAMBO",
  "InteriorCondition" : "Poor",
  "HasPowerWindows" : "true",
  "GlassCondition" : "Good",
  "TransmissionType" : "Auto",
  "EngineType" : "EngineType1",
  "RecoveredFromAddress1" : "Myaddress1",
  "CompanyId" : "1",
  "HasPowerSeats" : "true",
  "HasAirConditioning" : "true",
  "Mileage" : "1243",
  "HasCruiseControl" : "true",
  "Trim" : "Trim data",
  "HasRadio" : "true",
  "HasSpares" : "true",
  "FuelType" : "Alternative Fuel",
  "IsDriveReady" : "true",
  "TireCondition" : "Average",
  "IsActive" : "false",
  "CreatedOn" : "5\/24\/12",
  "RecoveredFromAddress2" : "Myaddress2",
  "IsRunnable" : "true",
  "RecoveredFromState" : "Mystate",
  "BodyStyle" : "Style1",
  "RecoveredFromZip" : "90009",
  "IsVoluntary" : "false",
  "InteriorConditionDescription" : "Poor interiors",
  "RecoveredFromCity" : "Mycity",
  "Model" : "A6",
  "Year" : "2009"
} 
```

**编辑：已解决**请参阅下文以修复我的 noobish 错误。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-24T07:43:56.053

我现在可以成功发送请求了。我以错误的方式构建 HTTP 请求对我来说很糟糕。

解决方案：使用**setValue:forHTTPHeaderField:**而**不是 setValue:forKey:**用于 http 标头，例如“Content-Type”、“Content-Length”等。

我在想只要密钥是唯一的，我们是否使用它们中的任何一个都没有关系。**但我错了**。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-24T07:08:40.283

除非您发布实际代码，否则很难回答您的问题。

但是检查以下内容。

1.  您必须使用 MSMutableRequest 并将 HTTPMethod 设置为 @"POST"
2.  确保**将标头 Content-Type 设置为“Application/json”**（您已经提到您已经这样做了）
3.  确保**将 Content-Length 设置**为 jsonstring 的字符串长度。
4.  另外我不确定json是否支持（字符串）“true”和“false”，它应该设置为[NSNumber initWithBool：YES/NO]，或者您可以使用SBJson Writer正确编码为json字符串。

最好是看看你的服务器为什么会发送那个错误。您可以检查您的服务器日志。

# perl - perl 开关的代码内检查

> ID：10731987
> 
> 赞同：7
> 
> 时间：2012-05-24T06:04:37.180
> 
> 标签：perl, command-line, command-line-arguments

有什么方法可以检查 perl 命令行开关是否已激活？例如，如果我运行我的程序`perl -C foo.pl`，我希望能够检查 -C 开关是否已被激活。任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-05-24T06:26:16.927

从[perlrun 手册](http://perldoc.perl.org/perlrun.html)页：

> -C 标志控制一些 Perl Unicode 特性.... 只读魔法变量`${^UNICODE}`反映了这个设置的数值。此变量在 Perl 启动期间设置，此后是只读的。

其他一些命令行开关还有其他魔术变量。perlrun 或 perlvar 都应该包含您要查找的信息。

# iphone - 如何将来自服务器的整个 plist 数据（不格式化）保存到另一个 plist

> ID：10731989
> 
> 赞同：1
> 
> 时间：2012-05-24T06:05:01.000
> 
> 标签：iphone, objective-c, plist

```
[NSPropertyListSerialization propertyListFromData:self.responseData 
                                 mutabilityOption:NSPropertyListMutableContainersAndLeaves                                                 
                                           format:&format 
                                 errorDescription:&errorDesc]; 
```

当服务器在线时，它会发送 responseData。现在我想将这些数据（通过代码中的 responseData 获得）直接保存到我的应用程序中的另一个 plist 中，以便稍后（当服务器离线时）以相同的格式（不更改）检索数据并使用它/传递它的方式与我的服务器在线时传递的方式相同。我这样做是为了让应用程序的用户不知道服务器是否在线/离线，并且仍然能够向 responseData 提供更新/反馈（就像他/她在服务器在线时提供的那样）。
***我不想破坏 responseData 并保存它，而是直接以它来自服务器的方式保存它。***

如果需要更多解释，请告诉我。感谢您提供的所有答案:)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-24T06:28:34.837

如果您不想更改任何内容，我认为您应该将 plist 下载为文件而不是数据。

要将文件保存在您应该使用的手机上`NSFileManager`，您可以在此处阅读：[NSFileManager 参考](https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/Foundation/Classes/nsfilemanager_Class/Reference/Reference.html)+[文件系统编程指南](http://developer.apple.com/library/mac/#documentation/FileManagement/Conceptual/FileSystemProgrammingGUide/FileSystemOverview/FileSystemOverview.html)

您必须注意根据苹果“新”数据存储规则保存 plist 的位置，您可以在此处阅读： [您是否应该保存文件](http://developer.apple.com/library/mac/#documentation/FileManagement/Conceptual/FileSystemProgrammingGUide/FileSystemOverview/FileSystemOverview.html)

祝你好运

# windows - 使用用 ruby on rails 构建的黄瓜测试 api

> ID：10731990
> 
> 赞同：0
> 
> 时间：2012-05-24T06:05:20.957
> 
> 标签：windows, ruby-on-rails-3, cucumber, mongoid

我是黄瓜测试的新手。我正在尝试测试一个简单的 api，根据请求获取“/main/state_list”将返回 json 中的状态列表。

我的 .feature 文件

```
 Feature: Check if valid states are returned in json
 In order to select a state
 As a user
 I want to know if valid states are returned in json

 Scenario: Get list of states
 Given A GET request is made
 Then the result should be list of states in JSON:
 """
 [{"state":"California","_id":"4fbca64718a7ad0a68000003"},   
 {"state":"Georgia","_id":"4fbca69618a7ad0a68000005"}]
 """ 
```

我的 .rb 步骤文件

```
 Given /^A GET request is made$/ do
 get "/main/state_list"
 end
 Then /^the result should be list of states in JSON:$/ do |str|
 json_data=JSON.parse(last_response.body)
 json_data.should  == JSON.parse(str)
 end 
```

我的控制器代码

```
def state_list
@states= State.all
render :json => @states.to_json
end 
```

**当我直接在浏览器中访问 url 时，我得到了正确的输出**

当我在我的 cmd 中运行 cucumber 时，我得到了这个错误。基本上发送了空响应。

```
 host is not a valid option for Mongo::Connection
 Feature: Check if valid states are returned in json
 In order to select a state
 As a user
 I want to know if valid states are returned in json

 Scenario: Get list of states        # features\check_list_of_states.feature:6
 Given A GET request is made        #features/step_definitionscheck_list_of_states_steps.rb:2
 Then the result should be list of states in JSON: # features/step_definition/check_list_of_states_steps.rb:5
  """
  [{"state":"California","_id":"4fbca64718a7ad0a68000003"},{"state":"Georgia","_id":"4fbca69618a7ad0a68000005"}]
  """
  expected: [{"_id"=>"4fbca64718a7ad0a68000003", "state"=>"California"}, {"_
  id"=>"4fbca69618a7ad0a68000005", "state"=>"Georgia"}]
       got: [] (using ==)
  Diff:
  @@ -1,3 +1,2 @@
  -[{"_id"=>"4fbca64718a7ad0a68000003", "state"=>"California"},
  - {"_id"=>"4fbca69618a7ad0a68000005", "state"=>"Georgia"}]
  +[]
   (RSpec::Expectations::ExpectationNotMetError)
  ./features/step_definitions/check_list_of_states_steps.rb:8:in `/^the resu
  lt should be list of states in JSON:$/'
  features\check_list_of_states.feature:8:in `Then the result should be list
  of states in JSON:' 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-24T12:16:56.900

我怀疑您的测试数据库没有填充与您的开发数据库相同的数据。

# android - 在android中逐块解析XML

> ID：10731994
> 
> 赞同：1
> 
> 时间：2012-05-24T06:05:24.617
> 
> 标签：android, xml, dom, android-xml

我正在用 DOM 解析 XML 我有一些数据标签，例如：

```
<data>
    <option>abc</option>
    <option>ijk</option>
    <option>fgh</option>
    <option>njk</option>
    <option>klj</option>
    <option>opi</option>
</data>
<data>
    <option>abc</option>
    <option>ijk</option>
    <option>fgh</option>
    <option>njk</option>
    <option>klj</option>
    <option>opi</option>
</data> 
```

我想在我的布局中的列表中插入选项我该如何做同样的事情请告诉我。我希望它只解析第一个块的数据，然后它会通过单击按钮来请求触发事件。

提前谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-24T06:35:49.377

由于要解析部分 XML 数据，最好使用[`XmlPullParser`](http://developer.android.com/reference/org/xmlpull/v1/XmlPullParser.html).

您需要一种方法，一次读取一个块，将对解析器的引用保持为成员变量。

```
public class PartialXmlParser{
    private XmlPullParser xpp;

    public PartialXmlParser(String xml){
         XmlPullParserFactory factory = XmlPullParserFactory.newInstance();
         factory.setNamespaceAware(true);
         xpp = factory.newPullParser();

         xpp.setInput( new StringReader (xml ) );
    }

    public List<String> getData(){
        List<String> retValue = new List<String>();
        //Logic to read one block of data and add to retValue
        //
        return retValue;

    }
} 
```

`getData`并在回调事件中调用该方法（如`OnClick`按钮）。请记住使用对象的相同实例来获取数据。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-24T06:26:25.480

Java 平台在相当长的一段时间内一直支持多种不同的 XML 处理方式，并且大多数 Java 的 XML 相关 API 在 Android 上得到完全支持。例如，Java 的 XML 简单 API (SAX) 和文档对象模型 (DOM) 都可以在 Android 上使用。这两种 API 多年来一直是 Java 技术的一部分。[较新的 XML 流 API (StAX) 在 Android(更多](http://www.ibm.com/developerworks/opensource/library/x-android/))中不可用。

这是[如何在 android 中解析 xml](http://www.androidhive.info/2011/11/android-xml-parsing-tutorial/)的最佳示例，就像您的问题一样。这是 Android XML [SAX Parser Example](http://www.jondev.net/articles/Android_XML_SAX_Parser_Example) .Parsing XML in Android (DOM method) is antoher best example for Dom Methodhttp://www.androidhive.info /2011/11/android-xml-parsing-tutorial/。

XmlResourceParser 是为 XML 资源返回的 XML 解析接口。这是一个标准的 XmlPullParser 接口，以及扩展的 Attribute Set 接口和此接口上的附加 close() 方法，用于客户端指示何时完成读取资源（[更多](http://android-er.blogspot.com/2010/04/read-xml-resources-in-android-using.html)）。

不要忘记看到这个。[Android 中使用的解析器](https://stackoverflow.com/questions/7226390/parsers-used-in-android)

# windows-phone-7 - XAML 中的按钮样式

> ID：10731995
> 
> 赞同：0
> 
> 时间：2012-05-24T06:05:25.773
> 
> 标签：windows-phone-7, xaml, expression-blend

我以这种方式自定义了按钮：

```
<Button BorderBrush="Transparent" Name="DialButton" Click="DialButton_Click" >
            <StackPanel Orientation="Horizontal">
                <TextBlock FontSize="43" Name="lblNumber" Margin="0,-5,0,0" />
                <TextBlock FontSize="12" Margin="5,20,0,0" Name="lblCharacter" />
            </StackPanel>
</Button> 
```

现在，当用户按下按钮时，我希望 OnPress 状态更改标签的颜色。如果它是一个简单的按钮，我可以通过更改 Pressed 状态来做到这一点。但我的标签放在堆栈面板内。在这种情况下如何更改颜色？或者在哪种情况下我可以从 C# 更改标签的颜色。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-27T20:36:13.950

在这种情况下，您可以使用*PropertyChangeAction*。您可以在 Expression Blend的*Assets选项卡上的**行为*类别中找到它。

 *将此操作应用于标签。将触发器属性更改为*DataTrigger*而不是默认的 EventTrigger。将触发器绑定到 DialButton 的*IsPressed*属性。每个 TextBlock 添加两个 PropertyChangeAction 并将其中一个的*Value*设置为*true*，将另一个设置为*false*。

这是其中之一的示例。另一个完全一样。

```
<TextBlock FontSize="43" x:Name="lblNumber" Margin="0,-5,0,0" Text="25">
  <i:Interaction.Triggers>
    <ec:DataTrigger Binding="{Binding IsPressed, ElementName=DialButton}" Value="true">
      <ec:ChangePropertyAction PropertyName="Foreground">
        <ec:ChangePropertyAction.Value>
          <SolidColorBrush Color="Red"/>
        </ec:ChangePropertyAction.Value>
      </ec:ChangePropertyAction>
    </ec:DataTrigger>
    <ec:DataTrigger Binding="{Binding IsPressed, ElementName=DialButton}" Value="false">
      <ec:ChangePropertyAction PropertyName="Foreground">
        <ec:ChangePropertyAction.Value>
          <SolidColorBrush Color="{StaticResource PhoneForegroundColor}"/>
        </ec:ChangePropertyAction.Value>
      </ec:ChangePropertyAction>
    </ec:DataTrigger>
  </i:Interaction.Triggers>
</TextBlock> 
```

如果*i:*或*ec:*不起作用，请确保这些行位于 xaml 文件的顶部。

```
xmlns:i="clr-namespace:System.Windows.Interactivity;assembly=System.Windows.Interactivity" 
xmlns:ec="clr-namespace:Microsoft.Expression.Interactivity.Core;assembly=Microsoft.Expression.Interactions" 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-24T08:23:18.500

您需要将其转换为自定义控件，然后您可以根据状态管理每个组件的样式。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-24T09:59:17.597

在按钮的点击事件中试试这个

```
Button butClicked = (Button)sender;

StackPanel panel1 = (StackPanel)butClicked.Content;
var child1Panel1 = panel1.Children[0] as TextBlock;
child1Panel1.Foreground = new SolidColorBrush(Color.FromArgb(255, 18, 18, 18)); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-24T13:02:13.530

如果您只打算使用此按钮一次，可能最简单的方法是在 Expression Blend 中打开 .xaml 文件，然后使用 Blend 自定义按钮，包括状态更改。如果您在多个地方使用该按钮，请按照 Matt 的建议进行操作，并使其成为您可以重复使用的自定义控件（您也可以使用 Blend 来设计）。*

# google-maps - 谷歌地图中的异步调用

> ID：10731996
> 
> 赞同：1
> 
> 时间：2012-05-24T06:05:37.363
> 
> 标签：google-maps

好的，这是我的 JS 函数：

```
function GetLatLong() {
    var geocoder = new google.maps.Geocoder();
    var address = $('#txtAddress').val() + ', ' + $('#txtCity').val() + ', ' + $find('drpState').get_text() + ', ' + $find('drpCountry').get_text();
    var result = false;
    geocoder.geocode({ 'address': address }, function (results, status) {
        if (status == google.maps.GeocoderStatus.OK) {
            var location = results[0].geometry.location;
            $('#hiddenLatLong').val(location);
            result = true;
        }
        else {
            alert("Geocode was not successful for the following reason: " + status);
            result = true;
        }
    });

    return result;
} 
```

现在，我想要的是，一旦我将值存储在隐藏字段中，我想返回结果。这里发生的情况是，我在按钮单击时调用此函数，但由于调用是异步的，它在单击时返回 false，我无法在隐藏字段中获取结果值。有什么方法可以让我等待或解决一些可以在隐藏字段中获得的方法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-24T06:30:19.000

geocode 函数中的第二个参数是一个回调函数，如果 geocode 结果返回，将调用该函数。因此，如果 Google 返回结果，则应从您给定的代码中设置隐藏值。

但是，您的`GetLatLong()`功能较早完成，因此返回`false`. 所以你不应该让你的处理依赖于这个方法的返回值。