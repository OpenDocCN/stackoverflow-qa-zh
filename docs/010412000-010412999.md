# StackOverflow 问答 10412000-10412999

# c# - Windows Phone 定时重复方法（如 IOS 中的 NSTimer）

> ID：10412000
> 
> 赞同：1
> 
> 时间：2012-05-02T10:35:04.977
> 
> 标签：c#, windows-phone-7, xaml

WP7.5 中是否有任何类似 iOS 中的 NSTimer 的方法，我可以设置一个方法来调用一次，或者以设定的时间间隔重复调用。

非常感谢，-代码

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-02T11:08:01.050

```
System.Windows.Threading.DispatcherTimer dt = new System.Windows.Threading.DispatcherTimer();

dt.Interval = TimeSpan.FromMilliseconds(500);
dt.Tick +=new EventHandler(dt_Tick);

void dt_Tick(object sender, EventArgs e)
{
       //code
} 
```

和

```
dt.start() ;

dt.stop() ; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-02T10:48:19.243

根据您要执行的操作，您需要使用：

*   `Timer`，如果你想启动一个“简单”的后台任务：http: [//msdn.microsoft.com/en-us/library/system.threading.timer%28v=vs.95%29.aspx](http://msdn.microsoft.com/en-us/library/system.threading.timer%28v=vs.95%29.aspx)

*   `DispatcherTimer`, 如果要修改 UI：http: [//msdn.microsoft.com/en-us/library/system.windows.threading.dispatchertimer%28v=vs.95%29.aspx](http://msdn.microsoft.com/en-us/library/system.windows.threading.dispatchertimer%28v=vs.95%29.aspx)

# iphone - 是否可以在企业应用部署下发布类似的应用

> ID：10412002
> 
> 赞同：0
> 
> 时间：2012-05-02T10:35:09.173
> 
> 标签：iphone, publish

我有五个 iphone 应用程序，它们具有相似的界面/功能，但供五个不同的商务人士使用。他们从事相同类型的业务。所以应用程序中的相似性。该应用程序将免费供公众使用。

Apple 表示 1\. 与现有 Apple 产品或广告主题相似的应用程序将被拒绝 2\. 开发者在 App Store 中“发送垃圾邮件”包含许多类似应用程序的版本将被从 iOS 开发者计划中删除。3\. 与 iPhone 上捆绑的应用程序相似的应用程序，包括 App Store、iTunes Store 和 iBookstore，将被拒绝。

这些指南是否适用于企业应用部署下的应用？是否可以在 Ad-hoc 模式下发布应用程序并通过另一个网站提供应用程序的链接？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-02T10:46:38.417

如果您的应用具有相同的界面功能。只需为不同的人添加一个数据库。无需多次发布。以及关于 apstore 上的重复问题，他们已经拥有数十亿个应用程序，因此无需关心您的应用程序的用途。只需区分数据库，因为您的目标是分别管理用户。

# android - 如何防止在Android平板电脑上安装应用程序？

> ID：10412005
> 
> 赞同：1
> 
> 时间：2012-05-02T10:35:16.943
> 
> 标签：android, mobile, installation

我被告知要在不支持平板电脑的 Android 2.2 中构建应用程序。

我经历了很多谷歌搜索，但没有找到解决方案。我也找到[了这个链接](https://stackoverflow.com/questions/5892260/prevent-tablet-downloads-of-app)，但这给出了如何从 2.3 开始做同样的事情。

我的问题是我无法切换到 2.3，因为我的客户想要支持 2.2 的应用程序。

这是我在清单中使用的代码

```
<supports-screens android:normalScreens="true"
    android:largeScreens="true"
    android:anyDensity="true"/> 
```

上面的代码不会阻止应用程序从平板电脑下载，因此它会崩溃。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-02T10:42:08.277

该链接中的代码可以正常工作。将 sdkTarget 设置为 2.3，将 minSDK 设置为 2.2。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-02T10:56:11.627

我想，答案有点出乎意料，但是您是否尝试过完全忽略屏幕尺寸而只`PHONE`在清单中请求功能？平板电脑很少有这些，因此您可以有效地将它们过滤掉。例如，您可以在 AndroidManifest.xml 中编写：

```
<uses-permission android:name="android.permission.CALL_PHONE" /> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-05-01T09:22:19.410

试试下面的代码

```
<supports-screens android:smallScreens="true"
                  android:normalScreens="true"
                  android:largeScreens="false"
                  android:xlargeScreens="false"
                  android:anyDensity="false" /> 
```

# google-drive-api - 将文件插入到 google drive 发送的下载 url

> ID：10412008
> 
> 赞同：1
> 
> 时间：2012-05-02T10:35:56.253
> 
> 标签：google-drive-api

我正在尝试通过 API 将文件插入到谷歌驱动器。

我成功地将新文件元数据发布到驱动器并收到包含下载 url 的 JSON 响应。

在下一步中，我尝试将文件的内容发布到提供的下载 url，因此我能够成功插入文件，但其内容不可见。

谁能告诉我文件内容应该以哪种格式发布？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-02T22:40:37.550

[此处](https://developers.google.com/drive/v1/reference/files/insert#examples)记录了插入文件。在选项卡选择`Python`中选择它应该可以工作。

如果要更新文件的内容，可以查看[drive.files.update](https://developers.google.com/drive/v1/reference/files/update#examples)端点。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-04T14:15:52.150

您需要使用带有文件 id 的端点**更新- 端点****插入**用于新文件（返回 id）。

# c# - 理解 Java 翻译成 C# 的“最终”

> ID：10412010
> 
> 赞同：5
> 
> 时间：2012-05-02T10:36:04.197
> 
> 标签：c#, java, final

我不是 Java 程序员。我阅读了有关“final”的文档，并将其理解为“变量的值可以设置一次且仅一次”。

我正在将一些 Java 翻译成 C#。代码未按预期执行。我试图找出原因，并发现 final 的一些用途没有意义。

代码片段1：

```
final int[] PRED = { 0, 0, 0 };
...
PRED[1] = 3; 
```

PRED[1] 是 0 还是 3？

代码片段2：

```
final int[] PRED = new int[this.Nf];
for (int nComponent = 0; nComponent < this.Nf; nComponent++) {
    PRED[nComponent] = 0;
}
...
PRED[1] = 3; 
```

PRED[0] 肯定会保持为 0 吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-02T10:40:14.693

我认为您在将`final`关键字语义应用于 Java 中的数组时存在误解。

在这两个 Java 示例中，数组将保持不变，但它们的元素可能会更改。您的所有分配都将正确执行，并且存储在数组中的值将被更改。但是，如果您尝试

```
final int[] PRED = new int[this.Nf];
// some other code
PRED = new int[123]; // <<== Compile error 
```

你会看到一个编译错误。

将代码翻译成 C# 时，您可能需要翻译`final`为`sealed`（当它应用于 a 时`class`）或 as `readonly`（当它应用于成员时）。`readonly`C#中的数组和 Java 中的数组语义`final`相同：您的程序不能重新分配数组，但可以自由修改其元素。

`final`最后，在 C# 中根本不需要使用时使用 Java 特定的情况：当您需要在 Java 中的匿名本地类的方法中使用变量时，您必须创建该变量`final`。由于 C# 没有匿名本地类，因此您需要使用其他内容（可能使用匿名委托）来翻译那段代码。此类委托不限于使用只读变量。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-02T10:39:07.507

您在 C# 中寻找的词是“const”：

```
const int SOMETHING = 10; 
```

请注意，SIZE 也应该是常数。

此外，常量只能是 int、bool、string、char 等类型（仅限基本类型）。

所以如果你想要别的东西，比如数组或类，你可以这样做：

```
static readonly int[] PRED = new int[this.Nf]; 
```

Static Readonly 在逻辑上完全是 const 的意思，只是它在后台的定义略有不同，这使您可以更自由地使用它。（当你可以 - 你应该定义常量而不是静态只读的）

数组本身在运行期间不会更改，因此您将无法执行此操作：

```
PRED = new int[3]; // Error
PRED = null; // Error
PRED = PRED; // Error 
```

但是您可以更改 PRED 数组内部的值：

```
PRED[0] = 123; 
```

如果你想拥有一个只读集合，你可以使用 ReadOnlyCollection 对象！如果您还希望该对象是常量，则可以使用 static-readonly 组合（不能使用常量，因为它是一个类），您将获得：

```
static readonly ReadOnlyCollection<int> PRED = new ReadOnlyCollection<int>(new[] {1, 2, 5, 6}); 
```

然后 PRED 将始终是 PRED，并且总是大小为 4，并且总是包含 1、2、5、6。

```
PRED = PRED; // Error (static readonly)
PRED = null; // Error (static readonly)
PRED[1] = 0; // Error (ReadOnlyCollection enforces readonly on the elements)

int i = PRED[1]; // Still works, since you aren't changing the collection. 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-02T10:42:02.010

final 由编译器检查，而不是在运行时检查。因此，如果赋值`PRED[1] = 3`无效，编译器会捕捉到它，代码甚至无法编译。

这个赋值是有效的，因为 final 意味着：你不能为变量重新赋值。这并不意味着：您不能改变变量引用的对象。

上面的赋值不会修改`PRED`. 它修改 的值`PRED[1]`。如果 PRED 是一个列表，则等价于`PRED.set(1, 3)`. 这没关系。不正确的是`PRED = new ArrayList<Integer>()`.

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-02T10:38:58.020

如果您希望一个值仅设置一次而不是在 java 中使用 final 在 c# 或 const 中使用 readonly，或者在某些情况下应该使用 seal，但如果您只想阅读 readonly 可能更好；)

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-05-02T10:41:17.297

正如您已经说过的，一个`final`变量只能**设置**一次。但是改变它的值是合法的。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-05-02T11:03:06.323

Java final 关键字在Java 编程语言中在不同的条件下使用，具有不同的含义。例如：

1.  要声明一个常量变量，
2.  声明一个常量方法参数。

    1.  声明为 final 的变量必须在使用前进行初始化。不能为该变量分配新值，例如 (a = b)。但如果变量不是原始类型，则可以使用 set 方法或任何其他公共字段设置其属性。这意味着对象实例引用不能更改，但对象实例的属性可以更改，只要它们本身未声明为 final。

    2.  禁止在使用参数的方法中修改参数。

# python - 给定一个任意集合，有没有办法判断它是否是有序的？

> ID：10412013
> 
> 赞同：1
> 
> 时间：2012-05-02T10:36:10.970
> 
> 标签：python, collections, python-2.7

这是我到目前为止所拥有的：

```
def is_ordered(collection):
    if isinstance(collection, set):
        return False
    if isinstance(collection, list):
        return True
    if isinstance(collection, dict):
        return False

    raise Exception("unknown collection") 
```

有没有更好的方法来做到这一点？

**注意：**我的意思是有序而*不是*排序。

**动机：**

我想遍历一个有序的集合。例如

```
def most_important(priorities):
    for p in priorities:
        print p 
```

在这种情况下，优先级排序这一事实很重要。不是什么收藏品。我想在这里过着打鸭子的生活。我经常被 Pythonistas 的类型检查所劝阻。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-02T10:39:04.470

如果集合确实是任意的（意味着它可以是任何类别），那么答案必须是*no*。

基本上，有两种可能的方法：

1.  了解可以呈现给您的方法的每个可能的类，以及它是否是有序的；
2.  通过将所有可能的键组合插入其中来自己测试集合，并查看是否保留了顺序。

后者显然是不可行的。前者与您已经拥有的基本相同，只是您必须了解每个*派生*类，例如`collections.OrderedDict`; 检查`dict`是不够的。

坦率地说，我认为整个`is_ordered`支票都是一罐蠕虫。你为什么要这样做呢？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-02T10:50:14.920

**更新：**本质上，您正在尝试对传递给您的参数进行单元测试。停止这样做，然后对您自己的代码进行单元测试。测试你的消费者（确保它适用于有序集合），并对调用它的代码进行单元测试，以确保它得到正确的结果。

在静态类型语言中，您只需将自己限制为特定类型。如果您真的想复制它，只需指定您接受的唯一类型，然后测试它们。如果传递了其他任何内容，则引发异常。它不是pythonic，但它可靠地实现了您想要做的事情

* * *

好吧，您有两种可能的方法：

1.  `append`几乎可以肯定，任何带有方法的东西都是有序的；和
2.  如果它只有一个`add`方法，您可以尝试添加一个 nonce 值，然后遍历集合以查看 nonce 是否出现在末尾（或者，可能在一端）；您可以尝试添加第二个随机数并再次执行以更加自信。

当然，这在集合为空的情况下是行不通的，或者有一个排序函数不会在末尾产生加法。

可能更好的解决方案是简单地指定您的代码需要有序集合，并且只传递有序集合。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-02T13:26:53.480

我认为枚举 90% 的情况与您将获得的一样好（如果使用 Python 3，请将 basestring 替换为 str）。可能还想考虑如何处理生成器表达式和类似的东西（同样，如果使用 Py3，请跳过 xrangor）：

```
generator = type((i for i in xrange(0)))
enumerator = type(enumerate(range(0)))
xrangor = type(xrange(0))
is_ordered = lambda seq : isinstance(seq,(tuple, list, collections.OrderedDict,
                                          basestring, generator, enumerator, xrangor)) 
```

如果您的调用者开始使用 itertools，那么您还需要添加由 islice、imap、groupby 返回的 itertools 类型。但这些特殊情况的绝对数量确实开始指向[代码异味](http://martinfowler.com/bliki/CodeSmell.html)。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-05-02T10:39:47.053

如果列表没有排序，例如 [1,3,2] 怎么办？

# sql-server - 执行 SQL 字符串并将结果插入表中

> ID：10412015
> 
> 赞同：2
> 
> 时间：2012-05-02T10:36:16.040
> 
> 标签：sql-server, sp-executesql

我有一张桌子

```
DECLARE @Results TABLE(QueryIndex smallint, FieldValue nvarchar(50)) 
```

QueryIndex 是一个循环计数器，它将从@QueryIndex 中获取值。FieldValue 将从另一个 SQL 字符串中获取值。出于某种原因，我需要动态执行 SQL 字符串。

```
SET @SQL = "SELECT " + @FieldName + " FROM MyView"
            + " WHERE Condition1='" + @Value1 + "'"
            + " AND Condition2=" + CONVERT(nvarchar(12),@Value2) 
```

现在我尝试将数据插入@Results

```
NSERT INTO @Results(QueryIndex, FieldValue)
SELECT @QueryIndex, EXEC (@SQL) 
```

毫不奇怪，这段代码不起作用。请为我提供将数据插入表中的解决方案。任何方法都值得尝试。表中的结果应如下所示：

```
QueryIndex   FieldName
  1            First
  2            Second
  3            Third 
```

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-02T10:46:23.377

您需要将检索`@QueryIndex`与选择结合起来，然后您就可以简单地

```
SET @SQL = 'SELECT ' + cast(@QueryIndex as varchar(16)) + ',' + @FieldName + ...
INSERT INTO @Results(QueryIndex, FieldValue)
   EXEC (@SQL) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-02T10:40:29.873

您应该在之前创建包含表的结构！

```
 CREATE TABLE #tmp  // or @tbl... doesnt really matter...
      ( 
        ...
      ) 

    INSERT INTO #tmp  -- if we use exec we  must have the pre-Structure of the table
    EXEC (@sql) 
```

现在，做你想做的事`#tmp`......

# javascript - 如果菜单项存在显示或隐藏与 jQuery 的链接

> ID：10412017
> 
> 赞同：0
> 
> 时间：2012-05-02T10:36:23.603
> 
> 标签：javascript, jquery, dotnetnuke

我想检查我的菜单是否包含菜单项“管理员”。

Admin 是父菜单项的名称。当用户登录时，他们可以看到管理菜单。

我的菜单 css 路径如下所示：

```
div.toppane div.logopane div.menupane ul.sf-menu li a 
```

如果是这样，那么我想显示以下链接

```
<a href="/en-us/aboutus/abgroup.aspx?ctl=logoff" id="Logoff" />Logoff</a> 
```

但如果“管理员”不存在，那么我需要显示此链接：

```
<a href="/en-us/aboutus/abgroup.aspx?ctl=login" id="Login" />Login</a> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-02T10:39:15.253

您的问题中缺少 DOM 结构！**:(**，所以我会试一试...

```
if ($('div.toppane div.logopane div.menupane ul.sf-menu')
    .has('ul.sf-menu li a')){
     $('#Logoff').show();
}
else{
     $('#Login').show();
} 
```

或者 Admin 的东西是什么样子的，只要把它放在`has`...

* * *

**更新：**

> “admin”是一个字符串值。所以假设我需要检查菜单中的值？

使用`is`+ `:has`+ `:containes`。

```
if ($('div.toppane div.logopane div.menupane ul.sf-menu')
     .is(':has(a:contains(Admnin))')) {` 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-05-02T10:47:13.197

您不应该使用 jQuery 来确定导航项，而应该在服务器端完成。如果我禁用 Javascript 会发生什么？最好有一个 IF 语句检查是否设置了“管理员”并根据需要更改链接。

# android - ExpandableListView 和 getItemViewType

> ID：10412018
> 
> 赞同：2
> 
> 时间：2012-05-02T10:36:24.370
> 
> 标签：android, expandablelistview, expandablelistadapter

ExpandableListAdapter 是否支持 BaseAdapter 覆盖 getItemViewType 和 getViewTypeCount 的任何功能，我可以在其中创建各种视图类型

```
getChildView(int groupPosition, int childPosition, boolean isLastChild, View convertView, ViewGroup parent) 
```

?

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-02T10:51:40.547

ExpandableListAdapter 没有，但它是 BaseExpandableListAdapter 的子类。因此，间接地，其他子类 CursorTreeAdapter、ResourceCursorTreeAdapter、SimpleCursorTreeAdapter 和 SimpleExpandableListAdapter 也是如此。

这些方法是：

```
 public int getChildType(final int groupPosition, final int childPosition)
    public int getChildTypeCount() 
```

# java - oracle 和 sql server 数据库的通用查询？

> ID：10412028
> 
> 赞同：0
> 
> 时间：2012-05-02T10:37:01.463
> 
> 标签：java, sql-server, oracle

我正在开发一个需要检查数据库是否关闭的功能。我必须使用适用于 oracle 和 sqlserver dbs 的单个查询。是否有任何单个查询可以检查 db 是否已启动？

如同`select * from dual;`

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-02T10:39:46.927

我会`connection.setAutoCommit(true)`选择而不是选择。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-02T10:43:36.270

我认为最好使用 Connection 的功能来检查服务器是否可用。
连接失败时应该有一个异常，您可以检查状态以查看它是否仍然打开。

为了满足您的特定需求，如果您决定继续查询。
**这不是最佳实践**
我不知道有一种简单的方法来做你想做的事，Oracle 和 SQL 不共享系统对象的相同命名。但运行该命令，它不适用于 SQL，但异常不会是“服务器已关闭”类型，您可以在 try/catch 中使用它。
**这不是最佳做法**

希望这是有道理的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-02T11:08:43.407

更好的方法是获取连接，然后使用产品版本或产品名称等数据库元数据信息来确保数据库是否启动。

例如：

```
try{ 
  Con = DriverManager.getConnection(databaseURL,username,password);
  databasemetadata = con.getMetaData();
  String databaseName = databasemetedata.getDatabaseProductName();
 If(databaseName.equals("<desireddabase>"))
  {
     //database up and running
  }
}
 catch(Exception e)
{
  // error in connection ... 
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-02T12:46:00.720

java.sql.Connection 有一个方法

```
isValid(timeOut) 
```

> 如果连接尚未关闭并且仍然有效，则返回 true。当调用此方法时，驱动程序应提交有关连接的查询或使用某些其他机制来肯定地验证连接仍然有效。

# sql - 在 SQL 中，如何对表内的字段进行聚合

> ID：10412033
> 
> 赞同：3
> 
> 时间：2012-05-02T10:37:23.633
> 
> 标签：sql, oracle, aggregate, max

很抱歉，标题不是那么具体。我将尝试解释：我是 SQL 新手。我在工作并编写了一个查询，它有 9 列从许多表中获取信息。第 9 列是机器类型的名称，第 3 列是表示机器一个月工作时间的值。我需要为每种类型的机器添加第 10 列，这种类型的最大第 3 列。假设有 5 台 XR 类型的机器（表中的 5 行），时间（第 3 列）为 1、2、3、4、5（以小时为单位）。我需要在第 10 列，机器类型为 XR 的所有行都将具有值 5，因为它是此类机器的最大值。

我怎么做？

任何帮助将不胜感激！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-02T10:39:52.063

在`SQL Server`,`Oracle`和`PostgreSQL`:

```
SELECT  *, MAX(col3) OVER (PARTITION BY col9)
FROM    mytable 
```

在`MySQL`：

```
SELECT  mt.*, maxcol3
FROM    (
        SELECT  col9, MAX(col3) AS maxcol3
        FROM    mytable
        ) q
JOIN    mytable mt
ON      mt.col9 = q.col9 
```

# lucene - Lucene：访问查询结果的有效负载

> ID：10412036
> 
> 赞同：1
> 
> 时间：2012-05-02T10:37:24.903
> 
> 标签：lucene, token, payload

当我在 Lucene 中搜索查询时，我会收到一个文档列表作为结果。但是我怎样才能在这些文档中获得点击量呢？我想访问查询找到的那些单词的有效负载。

如果您的查询仅包含一个术语，您可以简单地使用`TermPositions`来访问该术语的有效负载。但是，如果您使用短语搜索、邻近搜索等进行更复杂的查询，则不能只搜索`TermPositions`.

我想收到一个或类似的东西`List<Token>`，`TokenStream`其中包含查询找到的所有令牌。然后我可以遍历列表并访问每个令牌的有效负载。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-21T09:34:54.570

我通过使用 SpanQueries 解决了我的问题。几乎每个 Query 都可以表示为 SpanQuery。SpanQuery 可以访问文档中命中的跨度。因为普通的 QueryParser 不产生 SpanQueries，所以我不得不编写自己的解析器，它只创建 SpanQueries。另一种选择是来自 Lucene-Contrib 的 SurroundParser，它也创建了 SpanQueries。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-03T13:00:34.720

我认为您首先要查看 Lucene Highlighter，因为它会突出显示文档中的匹配术语。

# facebook - 什么是 facebook 社交阅读器应用程序中的重现操作步骤？

> ID：10412040
> 
> 赞同：0
> 
> 时间：2012-05-02T10:37:47.147
> 
> 标签：facebook, facebook-graph-api

我目前正在 facebook 上开发社交阅读器应用程序，但我对操作步骤有点困惑。在提交我的操作的打开图表中，在重现您的操作的步骤中，我不知道我必须做什么。在我的应用程序中，我需要单击阅读按钮将我阅读的文章发布到墙上。提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-02T11:50:56.840

You've to use read action on article/website object.

To create those objects you've to use og meta tags i.e. include some meta tags of this kind:

```
<meta property="og:url" content="URL of this object"> 
```

Read more: [http://developers.facebook.com/docs/opengraph/objects/builtin/#article](http://developers.facebook.com/docs/opengraph/objects/builtin/#article)

In app dashboard, under open graph tab, enable read action and article/website object for use.

-- Done configuring --

Let's say you've created the article object at [http://mysite.com/path-to-article-I-just-read](http://mysite.com/path-to-article-I-just-read) then following PHP snippet will publish the read action on user's activity feed.

```
// Assuming the app has permission: publis_stream
$facebook->api('/me/news.reads?article=http://mysite.com/path-to-article-I-just-read', 'POST') 
```

Once you've completed developing the application, you'll have to submit it for Facebook to review.

# java - 使用 String 和方法重载创建对象

> ID：10412041
> 
> 赞同：5
> 
> 时间：2012-05-02T10:37:49.483
> 
> 标签：java, reflection, overloading

我有一个字符串，它可以是 Double 或 Integer 类型或其他类型。我首先需要创建一个 Double 或 Integer 对象，然后将其发送到重载方法。到目前为止，这是我的代码；

```
public void doStuff1(object obj, String dataType){

 if ("Double".equalsIgnoreCase(dataType)) {
        doStuff2(Double.valueOf(obj.toString()));
    } else if ("Integer".equalsIgnoreCase(dataType)) {
        doStuff2(Integer.valueOf(obj.toString()));
    }

 }

 public void doStuff2(double d1){
   //do some double related stuff here
 }

 public void doStuff2(int d1){
   //do some int related stuff here
 } 
```

我想在没有 if/else 的情况下这样做，像这样；

```
Class<?> theClass = Class.forName(dataType); 
```

问题是 'theClass' 仍然不能转换为 double 或 int。如果有任何想法，我将不胜感激。谢谢。

找到一个相关的线程；[Java中的重载和多分派](https://stackoverflow.com/q/9759141/1222651)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-02T10:39:38.407

这不仅仅是处理原始类型的问题。

调用哪个方法是在**编译时**决定的，也就是说，如果您希望能够根据参数的类型调用不同的方法，您将需要多次调用（即您需要 if-construct）。

换句话说，即使`doStuff2`将`Integer`and`Double`作为参数它也不起作用（你的代码基本上和它一样好）。

（简单地说，这是因为 Java 有*单次调度*。要模拟*多次调度*，您需要使用条件语句或访问者模式。）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-02T11:00:28.360

正如 aioobe 所说，重载方法之间的选择是在编译时根据参数的静态类型进行的。

如果要在运行时模拟重载选择，则需要对不同的可能方法进行一些复杂的运行时分析。它会是这样的：

1.  获取声明的类的所有声明方法`doStuff2`。
2.  过滤掉名字不是的方法`doStuff2`。
3.  从参数值的（动态）类型中过滤掉参数类型不能赋值的方法。
4.  在剩余的方法中，选择最匹配的一种……注意将“关系”处理为模棱两可。

这对代码来说会很棘手，如果你还要处理原始类型，那就更棘手了。它还会使方法调用变得昂贵。

* * *

坦率地说，某种硬接线调度要简单得多。如果您不喜欢 if / else 测试（或在 Java 7 中打开字符串），那么您可以执行类似的操作。

```
Map<String, Operation> map = ...
map.put("Double", new Operation(){
    public void doIt(Object obj) {
        doStuff2((Double) obj);
    }});
map.put("Integer", new Operation(){
    public void doIt(Object obj) {
        doStuff2((Integer) obj);
    }});
...
map.get(typeName).doIt(obj); 
```

...至少允许您动态地“插入”对新类型的支持。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-02T11:00:31.857

由于方法调用是在编译时决定的，正如另一个答案告诉你的那样，重载对你不起作用。我认为这个问题可以通过继承来解决。因此，您编写一个基类`yourMethod()`并在派生类中覆盖它。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-02T11:17:04.493

如果你求助于反射，你只需要专门处理原始类型。因此，您的技术可以工作，但需要添加一些明确的测试。如果您需要反思性地找到接受原语的方法`double`，请使用`double.class`.

# c# - 如何在给定数组大小和开头的情况下获取特定的数组序列

> ID：10412050
> 
> 赞同：0
> 
> 时间：2012-05-02T10:38:14.587
> 
> 标签：c#, asp.net, linq, list, loops

我有以下情况：

一个列表或数组。大小是我从用户那里得到的一个变量，介于 1 到 12 之间。

如果大小为 3，则数组 {1,2,3}

如果大小为 5，则数组 {1,2,3,4,5}

等等

现在开始也是一个变量。

我想得到的序列是：

例如，如果大小为 12，例如开头为 9

我想要这个特定顺序的以下结果。

`9`,10,11,12,1,2,3,4,5,6,7,8

我的意思是我从给定的开头开始，直到最后一个项目，然后如果开始不是`1`，那么我继续`1`直到开始。

我这样做了，但它特定于大小`12`：

使用此代码：

* * *

```
 int[] arr = new int[12];
        int month = 9;//input from the user
        List<int> source = new List<int>();
        while (month <= 12)
        {
            source.Add(month);
            month++;
        }
        if (source.Count < 12)
        {
            for (int i = 1; i < source[0]; i++)
            {
                source.Add(i);
            }
        } 
```

* * *

我想要更通用的解决方案，不仅允许可变大小`12`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-02T10:44:52.073

我已经测试过它并且它有效

```
 int arrsize = Convert.ToInt32(Console.ReadLine());
                int[] arr = new int[arrsize];
                int month = Convert.ToInt32(Console.ReadLine());//input from the user
                List<int> source = new List<int>();
                while (month <= arrsize)
                {
                    source.Add(month);
                    month++;
                }
                if (source.Count < arrsize)
                {
                    for (int i = 1; i < source[0]; i++)
                    {
                        source.Add(i);
                    }
                }
                foreach (int i in source)
                    Console.Write(i); 
```

请添加一些条件，例如数组大小不应小于月份，并且用户始终输入整数并在 try catch 中执行此操作以获得良好的实践......等等

在使用其他答案的一些逻辑之后，我认为下面的代码要好得多。

```
 int arrsize = Convert.ToInt32(Console.ReadLine());
                int month = Convert.ToInt32(Console.ReadLine());//input from the user
                List<int> source = new List<int>();
                int temp = 0;
                for (int i = 0; i < arrsize; i++)
                {
                    temp = i + month;
                    if (temp != arrsize)
                        source.Add(((i + month) % arrsize));
                    else
                        source.Add(arrsize);
                } 
```

第二种方法的复杂度较低，只有 O(n)，因为它只使用一个循环而不是 2 个循环。

第三个解决方案更简单:)

```
 for (int i = 0; i < size; i++)
                {
                    if (i < month)
                        source.Add(i + month);
                    else
                        source.Add((i - month) + 1);
                } 
```

希望能帮助到你。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-02T10:51:38.243

像这样的东西怎么样：

```
 static IEnumerable<int> GetSequence(int size, int beginning)
        {
          return Enumerable.Range(beginning, size).Select(i => 1 + (i - 1) % 12);
        } 
```

您可以将数字更改`12`为方法的第三个参数。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-02T10:51:48.847

```
static int[] Sequence(int size, int start)
{
    start--;
    int[] result = new int[size];

    for (int i = 0; i < size; i++)
    {
        result[i] = ((i + start) % size ) + 1;
    }

    return result;
} 
```

# spring - 无法使用注释使用 Spring Advice(@Before)

> ID：10412055
> 
> 赞同：0
> 
> 时间：2012-05-02T10:38:26.347
> 
> 标签：spring, aop, spring-annotations

我是 springs 新手，正在尝试使用 java 建议运行一个简单的 java 应用程序....

xml文件...

```
<?xml version="1.0" encoding="UTF-8"?>
<beans xmlns="http://www.springframework.org/schema/beans"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xmlns:aop="http://www.springframework.org/schema/aop"
    xmlns:context="http://www.springframework.org/schema/context"
    xsi:schemaLocation="http://www.springframework.org/schema/beans
           http://www.springframework.org/schema/beans/spring-beans-2.5.xsd
           http://www.springframework.org/schema/aop
           http://www.springframework.org/schema/aop/spring-aop-2.5.xsd
           http://www.springframework.org/schema/context
           http://www.springframework.org/schema/context/spring-context-2.5.xsd"> 
    <aop:aspectj-autoproxy>
        <aop:include name="com.cts.two.Advices"/>
    </aop:aspectj-autoproxy>    
    <context:annotation-config/>
    <context:component-scan base-package="com.cts.two"></context:component-scan>
</beans> 
```

咨询类

```
package com.cts.two;

import org.aspectj.lang.JoinPoint;
import org.aspectj.lang.annotation.Aspect;
import org.aspectj.lang.annotation.Before;
import org.aspectj.lang.annotation.Pointcut;
@Aspect
public class Advices implements Adv{    

    @Pointcut("execution(* com.cts.two.*.*(..))")
    public void advice(){

    }
    @Before("advice()")
    public void before(JoinPoint name) throws Throwable{
        System.out.println("inside advices");
        /*System.out.println(name.getClass() + " this is get class");
        System.out.println(name.getSignature().getName() + " this is the get signatue and get name");*/
    }
} 
```

需要应用建议的类...我希望在下面提到的 test() 方法之前执行 Advice 类的 before 方法

```
package com.cts.two;

import org.springframework.stereotype.Component;
@Component

public class ClassA {
    private ClassB b= new ClassB();

    public void setB(ClassB b) {
        this.b = b;
    }
    public void test(){
        System.out.println("inside classA test");
        //b.test();
    }

} 
```

方法/测试类/主类的调用者

```
package com.cts.two;

import org.springframework.context.ApplicationContext;
import org.springframework.context.support.ClassPathXmlApplicationContext;

public class CallerAB {

    /**
     * @param args
     */
    public static void main(String[] args) {
        // TODO Auto-generated method stub
        ApplicationContext context = new ClassPathXmlApplicationContext(
                "AllAnnotations.xml");
        ClassA calledA = (ClassA) context.getBean("classA");
        calledA.test();
    }

} 
```

问题是，当我直接运行代码时，会执行 A 类的测试方法，但建议不是......请建议......我错过了什么吗？？？还添加了 AspectJ 1.6.12 jar...

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-02T11:01:51.453

Aspects 应该被标记为 bean。

`@Aspect`不会自动执行，`<aop:include>`也不会执行（它对可用作方面的 bean 设置了额外限制）。

所以，你需要

```
@Aspect
@Component
public class Advices implements Adv { ... } 
```

并且不需要`<aop:include>`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-04T23:11:05.683

正如@axtavt 的答案中提到的，您需要添加`@Component`注释。但是您还需要删除`<aop:include>`. 您的弹簧接线 xml 应该是：

```
<aop:aspectj-autoproxy/>
<context:annotation-config/>
<context:component-scan base-package="com.cts.two"/> 
```

如[spring AOP 文档](http://static.springsource.org/spring/docs/3.0.x/reference/aop.html#aop-aj-configure)中所述，元素中的`name`属性`<aop:include>`应该是 bean 名称，而不是类名称。显式指定一个 bean 会覆盖 Spring 的自动检测，并且错误地指定它意味着根本没有使用任何方面。

# gwt - 在 Listgrid (smartGWT) 中设置值

> ID：10412060
> 
> 赞同：0
> 
> 时间：2012-05-02T10:38:44.860
> 
> 标签：gwt, smartgwt, gwt2, listgrid

我正在尝试使用智能 Gwt，Listgrid。

我同时使用 com.google.gwt.user.client.ui 和 smart gwt。我**在 ListGridRecords[] 记录中有价值。**

***我无法在表中设置值。***

这段代码是复合的。

```
public TableDocument(Action action) {
        initWidget(getTablePanel());
    }

private HorizontalPanel getTablePanel() {
        if (tablePanel == null) {
            tablePanel = new HorizontalPanel();
            tablePanel.setSize("144px", "75px");

            addtable();
        }

public void addtable() {
        // TODO Auto-generated method stub
        if(isDocumentPresent()==false){

            tablePanel.add(getNoDocumentLabel());
        }else{
            tablePanel.remove(noDocumentLabel);
            tablePanel.add(getDocumentTable()); <-- Error

        }
    }
private ListGrid getDocumentTable() {
        if (documentTable == null) {
            documentTable = new ListGrid();
            documentTable.setSize("644px", "379px");
            documentTable.setCanResizeFields(true);

            documentTable.setFields(getStatus(),getIcon(),getName(),getSize(),getModifiedby(),getModifiedDate(),getMajorVersiosn());
            addValuesToTable();
        }
        return documentTable;
    }

public ListGridField getStatus() {
        if (status == null) {
            status = new ListGridField("statusIcon","");
        }
        return status;
    }
public ListGridField getIcon() {
        if (icon == null) {
            icon = new ListGridField("documentIcon","");
        }
        return icon;
    }
.
.
.// similar code for getSize(),getModifiedby(),getModifiedDate(),getMajorVersiosn()

private void addValuesToTable() {
documentTable.setData(documentsArray);//documentarray is records
}

----------
error

    com.smartgwt.client.core.JsObject$SGWT_WARN: 12:15:47.778:WARN:ListGrid:isc_ListGrid_0:Unable to find clipHandle for drawn Canvas, elementId: isc_0
        at sun.reflect.NativeConstructorAccessorImpl.newInstance0(Native Method)
        at sun.reflect.NativeConstructorAccessorImpl.newInstance(NativeConstructorAccessorImpl.java:39)
        at sun.reflect.DelegatingConstructorAccessorImpl.newInstance(DelegatingConstructorAccessorImpl.java:27)
        at java.lang.reflect.Constructor.newInstance(Constructor.java:513)
        at com.google.gwt.dev.shell.MethodAdaptor.invoke(MethodAdaptor.java:105)
        at com.google.gwt.dev.shell.MethodDispatch.invoke(MethodDispatch.java:71)
        at com.google.gwt.dev.shell.OophmSessionHandler.invoke(OophmSessionHandler.java:172)
        at com.google.gwt.dev.shell.BrowserChannelServer.reactToMessagesWhileWaitingForReturn(BrowserChannelServer.java:337)
        at com.google.gwt.dev.shell.BrowserChannelServer.invokeJavascript(BrowserChannelServer.java:218)
        at com.google.gwt.dev.shell.ModuleSpaceOOPHM.doInvoke(ModuleSpaceOOPHM.java:136)
        at com.google.gwt.dev.shell.ModuleSpace.invokeNative(ModuleSpace.java:561)
        at com.google.gwt.dev.shell.ModuleSpace.invokeNativeObject(ModuleSpace.java:269)
        at com.google.gwt.dev.shell.JavaScriptHost.invokeNativeObject(JavaScriptHost.java:91)
        at com.smartgwt.client.widgets.grid.ListGrid.create(ListGrid.java)
        at com.smartgwt.client.widgets.BaseWidget.getOrCreateJsObj(BaseWidget.java:361)
        at com.smartgwt.client.widgets.BaseWidget.getElement(BaseWidget.java:276)
        at com.smartgwt.client.widgets.BaseWidget.getElement(BaseWidget.java:264)
        at com.google.gwt.user.client.ui.ComplexPanel.add(ComplexPanel.java:94)
        at com.google.gwt.user.client.ui.HorizontalPanel.add(HorizontalPanel.java:49)
        at com.client.SmartGuI.TableDocument.addtable(TableDocument.java:158)
        at com.client.GUI.TreeCmis$2.onSuccess(TreeCmis.java:157)
        at com.client.GUI.TreeCmis$2.onSuccess(TreeCmis.java:1)
        at com.google.gwt.user.client.rpc.impl.RequestCallbackAdapter.onResponseReceived(RequestCallbackAdapter.java:232)
        at com.google.gwt.http.client.Request.fireOnResponseReceived(Request.java:287)
        at 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-02T12:14:21.683

我建议不要混合 GWT UI 和 SmartGWT。尝试仅使用 SmartGWT 并查看问题是否消失。

您可以先用 HLayout（即 SmartGWT）替换 Horizo​​ntalLayout（我想是 GWT）。

引用自：[http ://forums.smartclient.com/showthread.php?t=8159](http://forums.smartclient.com/showthread.php?t=8159)

> Smart GWT 具有互操作性支持，允许将 Smart GWT 小部件添加到 GWT 容器中，并允许将 GWT 小部件添加到 Smart GWT 容器中，它适用于：
> 
> *   向 Smart GWT 的增量迁移，例如将单个、复杂的 Smart GWT 组件（如 Calendar 或 CubeGrid）引入现有 GWT 应用程序
>     
>     
> *   在 Smart GWT 中使用复杂的第三方 GWT 小部件，其中 Smart GWT 没有相应的内置功能
>     
>     
> 
> 但是，随意混合 Smart GWT 和 GWT（或其他）组件是没有意义的，也就是说，例如，您不应将 GWT 小部件放置在 Smart GWT 容器中，而 Smart GWT 容器又位于 GWT 容器中。一般来说，不要混合小部件，除非您需要某个功能。
> 
> 这样做的原因是两个 Ajax 小部件工具包（包括 GWT）可以互操作的最大程度是有限的 - 在 tab 顺序管理、zIndex 管理、像素完美布局、部分等领域没有允许互操作性的标准508 可访问性和多级模式。
> 
> 请注意，在不恰当地混合 GWT 和 Smart GWT 时报告的“错误”（即与这些指南相矛盾）通常会被标记为 WONTFIX，尽管如果核心 GWT 开始支持能够更好地实现 API 的 API，我们将在未来重新审视这一点互操作性。

# python - 如何运行 nginx + python（没有 django）

> ID：10412063
> 
> 赞同：7
> 
> 时间：2012-05-02T10:39:00.433
> 
> 标签：python, nginx, web, fastcgi

我想在 python 中有一个简单的程序，可以处理不同的请求（POST、GET、MULTIPART-FORMDATA）。我不想使用完整的框架。

我基本上需要能够以类似于 PHP 的方式获取 GET 和 POST 参数 - 可能（但不一定）。获取其他一些 SERVER 变量，如 REQUEST_URI、QUERY 等。

我已经成功安装了 nginx，但是我没有找到一个很好的例子来说明如何做剩下的事情。所以一个简单的教程或任何关于如何设置 nginx 来为某些虚拟主机运行某些 python 进程的指导和想法将是最受欢迎的！

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-02T10:48:55.493

尽管您可以使用 让 Python 自己运行网络服务器[`wsgiref`](http://docs.python.org/library/wsgiref.html#examples)，但我建议您使用周围[众多的 Python 网络服务器](http://nichol.as/benchmark-of-python-web-servers)之一。

在 Nginx 的情况下，我会看 Gunicorn 或 uWSGI。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-02T16:12:05.537

您应该考虑使用 Flask——它是一个非常轻量级的 WSGI 服务器 (werkzeug) 接口，它还包括一个模板库，如果您想使用它的话。但如果你愿意，你可以完全忽略它。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-02T15:35:48.400

您可以使用 thttpd。它是一个用于运行 cgi 脚本的轻量级 wsgi 服务器。它适用于 nginx。此处详细介绍了如何使用 Nginx 设置 thttpd：http: [//nginxlibrary.com/running-cgi-scripts-using-thttpd/](http://nginxlibrary.com/running-cgi-scripts-using-thttpd/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-02T10:50:21.970

同样，您必须使用 wsgi 服务器，因为 nginx 不完全支持此协议。

# php - 如何在没有 Flash 的情况下从网站录制用户的声音？

> ID：10412064
> 
> 赞同：17
> 
> 时间：2012-05-02T10:39:01.213
> 
> 标签：php, javascript, web-services, html

如何在没有 Flash 的情况下从网站录制用户的声音？我想使用 HTML5，但我发现它很难实现。[该网站](http://www.html5rocks.com/en/tutorials/getusermedia/intro/)称此功能现在仅受最新版本的 Chrome 和 Opera 支持。

在搜索了此处和其他站点的文章后，我决定寻找一种替代方法。

场景是：用户将使用不同类型的平台（Android/iOS 和其他操作系统），但他们访问同一个网站并将他们的声音记录在他们的设备中并稍后上传。

顺便说一句：我的目的是，当用户按下我网页上的“录音”按钮时，录音从他的麦克风开始。当他再次按下按钮时，这个过程就停止了。这可以在 iPad 或手机上，这样他就无法通过其他软件录制他的声音并存储在他的设备中然后上传。他们使用他们的设备链接我的网页以录制语音。该网页不仅适用于在 PC 上操作的用户。

我可以通过javascript在客户端实现这个功能吗？或者我应该参考服务器端？我应该采用什么语言和方法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2018-06-05T05:46:27.447

你可以在这里查看谷歌关于录制音频的网络基础文章：[https ://developers.google.com/web/fundamentals/media/recording-audio/](https://developers.google.com/web/fundamentals/media/recording-audio/)

它很容易理解，并且独立于设备，显然提供了正确的浏览器支持。您可以将音频录制并保存在本地设备上或上传到服务器。希望能帮助到你。

哦，请注意，它基于 HTML5 和 js。我不知道您为什么认为使用 HTML5 实现它很困难，但我希望这会有所帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-05T22:28:21.880

如果由我决定，我会选择上面提到的链接，如果用户浏览器不支持它，只需使用 Flash 小程序的后备。

说到移动平台，至少 iPhone 会有很大的问题。我不认为你可以上传文件，而且我很确定你不能从他们的麦克风录制音频。最好的方法是在移动设备上做这样的事情的应用程序。我很确定这可以通过 PhoneGap 完成 - [http://docs.phonegap.com/en/1.0.0/phonegap_media_capture_capture.md.html](http://docs.phonegap.com/en/1.0.0/phonegap_media_capture_capture.md.html)

如果您不熟悉 PhoneGap，它允许您使用 HTML/CSS/JS 为移动设备编写跨平台应用程序，并且仍然可以访问一些核心组件。就像捕捉音频一样。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-11T14:39:18.910

不幸的是，您不能从浏览器录制，但是，如果您有一个应用程序（您可以使用 Phonegap/Cordova（它使用 HTML5、JS 和 CSS 为许多平台构建您的应用程序））来录制您想要录制的任何内容，您可以轻松地将您想要的内容上传到您的服务器。目前无法在移动网络浏览器中使用纯 HTML5 来执行此操作。

如果您想了解更多信息，API 参考是一个好的开始：[http ://docs.phonegap.com/en/2.1.0/cordova_media_capture_capture.md.html#capture.captureAudio](http://docs.phonegap.com/en/2.1.0/cordova_media_capture_capture.md.html#capture.captureAudio)

# php - Zend fetchall 无法返回主 ID

> ID：10412066
> 
> 赞同：0
> 
> 时间：2012-05-02T10:39:03.123
> 
> 标签：php, zend-framework, zend-db, zend-db-table

我无法获取主 id 数组，我尝试调试它在使用 joinLeft 函数时发生

这是我的脚本

```
 //setIntegrityCheck to false to allow joins
        $roomModel = new self();

        $select = $roomModel->select(Zend_Db_Table::SELECT_WITH_FROM_PART)
                ->setIntegrityCheck(FALSE);

        //performs join aliasing table room_type to t
        $select->join(array('t' => 'room_types'), 't.room_type_id = rooms.room_type_id AND num_beds> '.$number_beds);
        ////performs join aliasing table room_status to s
        $select->join(array('s' => 'room_statuses'), 's.room_status_id = rooms.room_status_id');

        $select->joinLeft(array('chin' => 'checkin'), 'chin.checkin_date > '.$checkin.' AND chin.checkin_date <'.$checkout.'');

        $select->joinLeft(array('chout' => 'checkout'), 'chout.checkout_date >'.$checkin.' AND chout.checkout_date <'.$checkout.'');

        $result = $roomModel->fetchAll($select); 
```

是什么导致它发生？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-04T09:02:03.580

您要加入的表之一也可能包含一个名为主键的列，如果该行不存在，它将用 null 覆盖它。

您应该从每个表中选择所需的列：

```
$select->join('table', 'condition', array('column1', 'column2', 'column3'));
$select->joinLeft('table', 'condition', array('column1', 'column2', 'column3')); 
```

# mysql - MySQL COUNT 与空列

> ID：10412068
> 
> 赞同：2
> 
> 时间：2012-05-02T10:39:05.947
> 
> 标签：mysql, count, distinct, string

我有一个像这样的表 tb1：

```
id  | building  | id_connect |  
====+==========+============
1 |     1    |       "328abbc"    
2 |     3    |       "328abbc"    
3 |     4    |       "212a3b"    
4 |     1    |       "212a3b"  
5 |     2    |       ""  
6 |     2    |       ""
7 |     7    |       "" 
```

如果字符串与“”不同，我需要获取不同 id_connect 的计数，但每个空字符串（“”）必须加 1...

在示例中，所需结果为 5（一个“328abbc”、一个“212a3b”和三个“”），但我只得到 3

```
SELECT COUNT(DISTINCT(id_connect))
FROM tb1 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-02T10:49:17.077

```
SELECT
    COUNT(CASE WHEN id_connect='' THEN 1 END)
  + COUNT(DISTINCT NULLIF(id_connect, ''))
FROM tb1 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-05-02T10:41:03.997

这有效：

```
SELECT COUNT(DISTINCT(if(id_connect = '', concat(id, 'text not found in id_connect'), id_connect)))
FROM tb1 
```

输出：

```
5 
```

看到它在[这里](http://sqlfiddle.com/#!2/e611a/2)运行。

# c# - 无法在 IGraphBuilder.RenderFile 中播放带有 COM 异常的 MP3 文件

> ID：10412073
> 
> 赞同：2
> 
> 时间：2012-05-02T10:39:16.443
> 
> 标签：c#, audio, mp3, directshow, directshow.net

我是指导节目开发的新手。我正在学习有关直接表演的知识。我正在尝试编写一种播放一些音频文件的方法。它适用于许多 .mp3 文件，但对于我的一些 mp3 文件，接口 IGraphBuilder 的方法 RenderFile() 抛出以下异常

发生 COMException：“由于不支持相同的传输，引脚无法连接。”

我最好的猜测是我缺少一些编解码器来播放这些文件。谁能建议我做错了什么。有什么方法可以选择可以播放这些文件的过滤器。我可以使用 Windows Media Player 播放这些文件，所以我相信我已经安装了所需的编解码器。

任何帮助都将非常有价值。

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-20T16:11:34.697

这是 MP3 文件和标准 DirectShow fitler 读取它们的众所周知的问题。问题是如果一个文件有一个带有 ID3 标签的大部分，过滤器可能会放弃将它们跳过到音频数据，这会使整个播放失败。

如果您以[`WM ASF Reader Filter`](http://msdn.microsoft.com/en-us/library/windows/desktop/dd390984%28v=vs.85%29.aspx). 这假设您手动构建或至少开始构建图形以覆盖默认构建行为。

# android - 在android日历中添加事件日期和时间

> ID：10412074
> 
> 赞同：2
> 
> 时间：2012-05-02T10:39:19.700
> 
> 标签：android, events, calendar

我正在尝试在我的 android 日历事件中添加以下日期和时间....

```
Title and description =  Events for test
Start Date = May 05, 2012, 07:10PM
End Date = May 06, 2012, 02:10PM 
```

以下是我添加到事件的代码

```
 long startTime = 0, endTime = 0;
                    Date d = new Date();
            startTime = d.parse(start);
            d.setTime(startTime);

            endTime = d.parse(end);
            d.setTime(endTime);

            Intent intent = new Intent(Intent.ACTION_EDIT);
            intent.setType("vnd.android.cursor.item/event");
            intent.putExtra(Events.TITLE, summary);
            intent.putExtra(Events.DESCRIPTION, summary);
            intent.putExtra(Events.EVENT_LOCATION, "");
            intent.putExtra(Events.DTSTART, startTime);
            intent.putExtra(Events.DTEND, endTime);
            intent.putExtra(Events.ALL_DAY, allDayFlag);
            intent.putExtra(Events.STATUS, 1);
            intent.putExtra(Events.VISIBLE, 0);
            intent.putExtra(Events.HAS_ALARM, 1);
            startActivity(intent); 
```

但是在“事件详细信息”页面中，我得到了标题，仅描述是正确的。在开始和结束日期的地方，我得到了当前日期，其中开始和结束时间是下一个 1 小时时间。

谁能告诉我我的代码出了什么问题.....

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-12T09:14:57.883

如果您按如下方式获取数据`Date = May 05, 2012, 07:10PM`，则将日期转换为数字格式 a May 为 05 并在以下代码中传递值。

```
Calendar beginCal = Calendar.getInstance();
                beginCal.set(year, mnth, day, hrs, min);
                startTime = beginCal.getTimeInMillis();

                Calendar endCal = Calendar.getInstance();
                endCal.set(year, mnth, day, hrs, min);
                endTime = endCal.getTimeInMillis();     

                Intent intent = new Intent(Intent.ACTION_INSERT);
                intent.setType("vnd.android.cursor.item/event");
                intent.putExtra(Events.TITLE, summary);
                intent.putExtra(Events.DESCRIPTION, summary);
                intent.putExtra(Events.EVENT_LOCATION, "");     
                intent.putExtra(CalendarContract.EXTRA_EVENT_BEGIN_TIME, beginCal.getTimeInMillis());
                intent.putExtra(CalendarContract.EXTRA_EVENT_END_TIME, endCal.getTimeInMillis());
                intent.putExtra(Events.ALL_DAY, allDayFlag);
                intent.putExtra(Events.STATUS, 1);
                intent.putExtra(Events.VISIBLE, 0);
                intent.putExtra(Events.HAS_ALARM, 1);
                startActivity(intent); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-18T09:47:09.333

除了传递意图，我们还可以像这样将事件添加到日历中，这看起来很酷

公共静态字符串 getCalendarUriBase() {

```
 String calendarUriBase = null;
    Uri calendars = Uri.parse("content://calendar/calendars");
    Cursor managedCursor = null;
    try {
        managedCursor = act.managedQuery(calendars, null, null, null, null);
    } catch (Exception e) {
        e.printStackTrace();
    }
    if (managedCursor != null) {
        calendarUriBase = "content://calendar/";
    } else {
        calendars = Uri.parse("content://com.android.calendar/calendars");
        try {
            managedCursor = act.managedQuery(calendars, null, null, null,
                    null);
        } catch (Exception e) {
            e.printStackTrace();
        }
        if (managedCursor != null) {
            calendarUriBase = "content://com.android.calendar/";
        }
    }
    // //Log.d("Calendar", "" + calendarUriBase);
    return calendarUriBase;
}

main() {

    DateFormat formatter = new SimpleDateFormat("MMMM dd, yyyy, h:mma");
    String dateStarts = "May 05, 2012, 07:10PM";
    String dateEnds = "May 06, 2012, 02:10PM";
    Uri EVENTS_URI = Uri.parse(getCalendarUriBase() + "events");
    ContentResolver cr = getActivity().getContentResolver();
    // event insert
    ContentValues values = new ContentValues();
    Date startDate, endDate;
    startDate = formatter.parse(dateStarts);
    endDate = formatter.parse(dateEnds);
    values.put(Events.EVENT_TIMEZONE, TimeZone.getDefault().getID());
    values.put("calendar_id", 1);
    values.put("title", remainderTitle);
    values.put("allDay", 0);
    values.put("dtstart", startDate.getTime());
    values.put("dtend", enddDate.getTime());
    values.put("description", remainderInfo);
    values.put("visibility", 0);
    values.put("hasAlarm", 1);// now
    try {
        cr.insert(EVENTS_URI, values);
        // reminder insert
        Uri REMINDERS_URI = Uri.parse(getCalendarUriBase()
                + "reminders");
        values = new ContentValues();
        values.put("event_id", 1);
        values.put("method", 1);
        values.put("minutes", 10);
        cr.insert(REMINDERS_URI, values);

    } catch (Exception e) {
        e.printStackTrace();
    }

} 
```

希望，它肯定会帮助你:)

谢谢

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-25T08:23:36.623

可能是android Sdk问题，请试试这个

```
 int SDK_INT = android.os.Build.VERSION.SDK_INT;
    DateFormat formatter = new SimpleDateFormat("MMMM dd, yyyy, h:mmaa");
    long lnsTime = 0, lneTime = 0;

    Date dateObject;

    try {
        String dob_var = "May 05, 2012, 07:10PM";

        dateObject = formatter.parse(dob_var);

        lnsTime = dateObject.getTime();
        Log.e(null, Long.toString(lnsTime));

        dob_var = "May 06, 2012, 02:10PM";

        dateObject = formatter.parse(dob_var);

        lneTime = dateObject.getTime();
        Log.e(null, Long.toString(lneTime));
    }

    catch (java.text.ParseException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
        Log.i("E11111111111", e.toString());
    }

    Intent intent = new Intent(Intent.ACTION_EDIT);
    intent.setType("vnd.android.cursor.item/event");
    if (SDK_INT >= 15) {
        intent.putExtra(Events.CALENDAR_ID, 1);
        intent.putExtra(Events.TITLE, "Title");
        intent.putExtra(Events.DESCRIPTION, "Title");
        intent.putExtra(Events.DTSTART, lnsTime);
        intent.putExtra(Events.DTEND, lneTime);
        intent.putExtra(Events.ALL_DAY, 0);
        intent.putExtra(Events.STATUS, 1);
        intent.putExtra(Events.VISIBLE, 0);
        intent.putExtra(Events.HAS_ALARM, 1);
    } else {
        intent.putExtra("calendar_id", 1);
        intent.putExtra("status", 1);
        intent.putExtra("visibility", 0);
        intent.putExtra("hasAlarm", 1);
        intent.putExtra("beginTime", lnsTime);
        intent.putExtra("allDay", true);
        intent.putExtra("rrule", "FREQ=YEARLY");
        intent.putExtra("endTime", lneTime);
        intent.putExtra("title", "Title");
        intent.putExtra("description", "Title");
    }
    startActivity(intent); 
```

希望它可以帮助你:)

谢谢

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-02T12:13:16.080

我认为可能是您的日期解析导致此问题。

尝试这个

```
DateFormat formatter = new SimpleDateFormat("MMMM dd, yyyy, h:mmaa"); 
long lnsTime, lneTime;

        Date dateObject;

        try{
        String dob_var = "May 05, 2012, 07:10PM";

        dateObject = formatter.parse(dob_var);

        lnsTime = dateObject.getTime();
        Log.e(null, Long.toString(lnsTime));

        dob_var = "May 06, 2012, 02:10PM";      

        dateObject = formatter.parse(dob_var);

        lneTime = dateObject.getTime();
        Log.e(null, Long.toString(lneTime));
        }

        catch (java.text.ParseException e) 
            {
            // TODO Auto-generated catch block
                e.printStackTrace();
                Log.i("E11111111111", e.toString());
            }

     Intent intent = new Intent(Intent.ACTION_EDIT);
            intent.setType("vnd.android.cursor.item/event");
            intent.putExtra(Events.TITLE, summary);
            intent.putExtra(Events.DESCRIPTION, summary);
            intent.putExtra(Events.EVENT_LOCATION, "");
            intent.putExtra(Events.DTSTART, lnsTime);
            intent.putExtra(Events.DTEND, lneTime);
            intent.putExtra(Events.ALL_DAY, allDayFlag);
            intent.putExtra(Events.STATUS, 1);
            intent.putExtra(Events.VISIBLE, 0);
            intent.putExtra(Events.HAS_ALARM, 1);
            startActivity(intent); 
```

希望这会帮助你。

谢谢...

# sql - 添加没有表锁的新列？

> ID：10412078
> 
> 赞同：6
> 
> 时间：2012-05-02T10:39:42.210
> 
> 标签：sql, postgresql, heroku, locking, thinking-sphinx

在我的项目中，有 2300 万条记录和大约 6 个字段已被该表索引。

早些时候，我测试了为 Thinking Sphinx 搜索添加 delta 列，但它会将整个数据库锁定一个小时。之后，当添加文件并尝试重建索引时，这是保持数据库锁定约 4 小时的查询：

```
"update user_messages set delta = false where delta = true" 
```

好吧，为了建立服务器，我从 db dump 中创建了一个新数据库并将其提升为数据库，以便可以启动服务器。

现在我正在寻找的是在没有表锁的情况下在我的表中添加增量列是可能的吗？一旦`delta`添加了列，为什么在我运行索引重建命令时执行上述查询，为什么它会阻塞服务器这么长时间？

PS.：我在 Heroku 上并使用带有 ika db 模型的 Postgres。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-02T11:26:19.447

### Postgres 11 或更高版本

从 Postgres 11 开始，只有 volatile 默认值仍然需要重写表。[手册：](https://www.postgresql.org/docs/current/sql-altertable.html#SQL-ALTERTABLE-NOTES)

> 添加具有**volatile** `DEFAULT`的列或更改现有列的类型将需要重写整个表及其索引。

大胆强调我的。`false`是不可变的。所以只需添加带有`DEFAULT false`. 超级快，完成工作：

```
ALTER TABLE tbl ADD column delta boolean DEFAULT false; 
```

### Postgres 10 或更高版本，或用于 volatile`DEFAULT`

添加新列*而不* `DEFAULT`强制或`DEFAULT NULL`通常不会强制表重写，并且非常便宜。仅向其写入实际值会创建新行。但是，[引用手册：](https://www.postgresql.org/docs/10/sql-altertable.html#SQL-ALTERTABLE-NOTES)

> 添加带有`DEFAULT`子句的列或更改现有列的类型将需要重写整个表及其索引。

`UPDATE`在 PostgreSQL 中写入行的新版本。您的问题并未提供所有信息，但这可能意味着要编写数百万行新行。

在执行`UPDATE`就地操作时，如果表的主要部分受到影响并且您可以自由地以独占方式锁定表，请在执行批量操作之前删除所有索引并在`UPDATE`之后重新创建它们。这种方式更快。[手册中的相关建议。](https://www.postgresql.org/docs/current/populate.html)

如果您的数据模型和可用磁盘空间允许，则**`CREATE`**在后台创建一个新表，然后在一个事务中：`DROP`旧表和**`RENAME`**新表。有关的：

*   [在大表中填充新列的最佳方法？](https://dba.stackexchange.com/a/52531/3684)

在后台创建新表时：一次将所有更改应用于同一行。重复更新会创建新的行版本并留下死元组。

**如果**由于限制而无法删除原始表，另一种快速方法是构建一个临时表，**`TRUNCATE`**即原始表并大量**`INSERT`**新行 - 排序，如果这有助于提高性能。一站式交易。像这样的东西：

```
BEGIN

SET temp_buffers = 1000MB;  -- or whatever you can spare temporarily

-- write-lock table here to prevent concurrent writes - if needed
LOCK TABLE tbl IN SHARE MODE;    

CREATE TEMP TABLE tmp AS
SELECT *, false AS delta
FROM   tbl;                -- copy existing rows plus new value
-- ORDER BY ???            -- opportune moment to cluster rows

-- DROP all indexes here

TRUNCATE tbl;              -- empty table - truncate is super fast

ALTER TABLE tbl ADD column delta boolean DEFAULT FALSE; -- NOT NULL?

INSERT INTO tbl
TABLE tmp;                 -- insert back surviving rows.

-- recreate all indexes here

COMMIT; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-02T11:47:28.503

您可以添加另一个具有一列的表，不会有这么长的锁。当然应该有另一列，第一列的外键。

[对于索引，您可以使用“CREATE INDEX CONCURRENTLY”，它不会在此表http://www.postgresql.org/docs/9.1/static/sql-createindex.html](http://www.postgresql.org/docs/9.1/static/sql-createindex.html)上使用太重的锁。

# jquery - 无法使用 jQuery 禁用 iframe 中的链接

> ID：10412082
> 
> 赞同：0
> 
> 时间：2012-05-02T10:39:48.823
> 
> 标签：jquery, html, iframe, click

我想禁用 iFrame 中的所有链接。

iFrame 实际上是 markItUp 文本编辑器的预览框架。我根据另一个 Stack Overflow 答案尝试了以下方法，但它对我不起作用：

```
$(".markItUpPreviewFrame a").live('click', function(e) {
    e.preventDefault;
    alert("You twat! This is a preview, where do you think you're going?");
    return false;
}); 
```

下面是带有`markItUp`iframe 的 HTML 的粗略轮廓：

```
<div id="markItUpMarkItUp" class="markItUp">
<div class="markItUpContainer">
    <div class="markItUpHeader"></div>
    <div class="clear"></div>
    <textarea id="markItUp" class="markItUpEditor" name="bodyText""></textarea>
    <div class="markItUpFooter"></div>
    <iframe class="markItUpPreviewFrame">
        <html>
            <head></head>
            <body>
                links in here...
            <body>
        </html>
    </iframe>
</div> 
```

当我单击该链接时，它似乎忽略了我的 jQuery 代码（我没有收到警报）并仍然加载页面。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-02T11:30:58.287

尝试这个：

```
 $(document).ready(function(){
        //Make sure the iframe is done loading before you attach an event
        $(".markItUpPreviewFrame").load(function(){
            // Get the body element
            var frameBody = $(".markItUpPreviewFrame").contents().find("body");

            // Get all links inside the BODY tag
            $('a', frameBody).click(function(e){
                    //Disable all default actions       
                    e.preventDefault();
            });
        });
    }); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-02T10:45:06.403

您需要将点击处理程序附加到 iFrame 中的文档，[这个问题](https://stackoverflow.com/questions/549488/adding-event-handler-to-an-iframe-using-jquery)的答案显示了如何做到这一点（最后一个答案）

# java - Android 键盘暂停

> ID：10412085
> 
> 赞同：0
> 
> 时间：2012-05-02T10:39:53.277
> 
> 标签：java, android, triggers, keyboard, onkeydown

我一直在尝试在键盘的 Enter 键上创建一个“onHold”操作。

```
searchField.setOnKeyListener(new OnKeyListener() {
 @Override
 public boolean onKey(View v, int keyCode, KeyEvent event) {
  searchField.setText(searchField.getText().toString().replace("\n", ""));
 if((CounterRunning)&&(event.getAction() == KeyEvent.ACTION_UP  ) && (keyCode  == KeyEvent.KEYCODE_ENTER))
 {
   CounterRunning = false;
   counter.cancel();
    AddItem();

}
if((event.getAction() == KeyEvent.ACTION_DOWN  ) && (keyCode  == KeyEvent.KEYCODE_ENTER))
{
   CounterRunning = true;
   counter.start();
}
}});
 public class MyCount extends CountDownTimer{

     public MyCount(long millisInFuture, long countDownInterval) {
         super(millisInFuture, countDownInterval);
         }
         @Override
         public void onFinish() {
             CounterRunning = false;
                 AskForDate();
         }
         @Override
         public void onTick(long millisUntilFinished) {

         }
} 
```

如果用户按住回车键，我希望用户`AddItem()`在单击时运行并运行。`AskForDate()`但是`KeyEvent.ACTION_DOWN`只有当我从键盘上移开手指时才会触发该动作，我错过了什么吗？

在 android 2.3.7 (CM7.2) 和 android 4.0.4 (CM9) 上测试，均使用默认软键盘

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-02T17:11:58.183

[onKeyLongPress 事件](http://developer.android.com/reference/android/view/KeyEvent.Callback.html#onKeyDown%28int,%20android.view.KeyEvent%29)

试试上面那个，它说你必须在你的监听器中调用**startTracking**

所以你的代码应该像

```
if((event.getAction() == KeyEvent.ACTION_DOWN  ) && (keyCode  == KeyEvent.KEYCODE_ENTER))
{
   event.startTracking();
} 
```

并且由于*Activity是**KeyEvent.Callback*的子类，因此您可以从那里直接调用您的**AskForDate()**。

# java - 如何检查 Jlist 中的文件是否存在

> ID：10412086
> 
> 赞同：1
> 
> 时间：2012-05-02T10:40:02.367
> 
> 标签：java, swing, file, jlist

我通过 JFileChooser 在我的 JList 中添加了一些文件。我使用下面的代码添加我的内容：

```
 for (File file : fileChooser.getSelectedFiles()) {
                        vector.addElement(file);
                 }
                System.out.println("Added..!!");
                list.updateUI(); 
```

现在添加文件后，我想检查 JList 中是否存在 abc.xml 或 123.txt 或任何其他特定文件。谁能建议我如何检查 JList 中的特定文件？

我尝试过以这种形式使用迭代器；

```
 Iterator<File> it = vector.iterator();
                 while(it.hasNext())
                         if(it.next().getName().equals("abc.xml")) 
                 System.out.println("Yes..abc.xml exists");     
                     else 
            System.out.println("OOPS! abc.xml does not exist"); 
```

但是，这并不能解决我的目的，因为它没有特别考虑文件。例如，如果我的输入是 1.xml、2.xml 和 abx.xml，我得到的输出是，文件不存在，文件不存在，文件存在。

你们中的任何人都可以指导我完成这个...

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-02T10:46:57.957

```
File abc = new File("abc.xml");
boolean abcExists = vector.contains(abc); 
```

如果要修复算法，请使用布尔变量：

```
boolean exists = false;
for (File f : vector) {
    if (f.getName().equals("abc.xml")) {
        exists = true;
        break; // no need to continue the loop
    }
}
if (exists) {
    System.out.println("Yes..abc.xml exists");     
else {
    System.out.println("OOPS! abc.xml does not exist");
} 
```

# c# - 如何测量 IEnumerable 评估时间？

> ID：10412089
> 
> 赞同：2
> 
> 时间：2012-05-02T10:40:10.963
> 
> 标签：c#, linq, ienumerable

我有一个惰性 linq 查询，它发现内存中某些 xml 中包含特定属性的元素数量。我想评估枚举该查询以获取不同长度的 xml 所需的时间长度。

为了做到这一点，我首先考虑使用对 .ToList() 的调用，因为我知道这会导致枚举所有项目。但是我认为这可能并不代表完整的评估时间，因为将有一个内存操作将所有项目从一个结构移动到另一个结构，因此切换到对 .Count() 的调用。

```
IEnumerable<XMLNode> nodes = "<Some Linq>"

var watch = new Stopwatch();
watch.Restart();
var test = nodes.Count();
watch.Stop();
Console.WriteLine("Enumeration Time: " + watch.ElapsedMilliseconds); 
```

第一个问题是这是计算评估 Enumerable 所需时间的最佳方法吗？

第二个问题是哪个更能代表实际评估时间 Count() 还是 ToList()？

这是代码的一些结果，请注意在迭代之间添加了一个新的 xml 部分，这意味着每次搜索的 xml 都以相同的数量增长。

**结果（来自 .Count()）**

```
Enumeration Time: 0 (ms)
Enumeration Time: 0 (ms)
Enumeration Time: 1 (ms)
Enumeration Time: 1 (ms)
Enumeration Time: 2 (ms)
Enumeration Time: 2 (ms)
Enumeration Time: 2 (ms)
Enumeration Time: 3 (ms)
Enumeration Time: 3 (ms)
Enumeration Time: 4 (ms)
Enumeration Time: 4 (ms)
Enumeration Time: 5 (ms)
Enumeration Time: 6 (ms)
Enumeration Time: 6 (ms)
Enumeration Time: 8 (ms)
Enumeration Time: 6 (ms)
Enumeration Time: 15 (ms)
Enumeration Time: 8 (ms)
Enumeration Time: 8 (ms)
Enumeration Time: 9 (ms)
Enumeration Time: 8 (ms)
Enumeration Time: 9 (ms)
Enumeration Time: 10 (ms)
Enumeration Time: 10 (ms)
Enumeration Time: 10 (ms)
Enumeration Time: 27 (ms)
Enumeration Time: 12 (ms)
Enumeration Time: 18 (ms)
Enumeration Time: 20 (ms) 
```

**结果（来自 .ToList()）**

```
Enumeration Time: 1 (ms)
Enumeration Time: 1 (ms)
Enumeration Time: 1 (ms)
Enumeration Time: 2 (ms)
Enumeration Time: 2 (ms)
Enumeration Time: 3 (ms)
Enumeration Time: 3 (ms)
Enumeration Time: 4 (ms)
Enumeration Time: 4 (ms)
Enumeration Time: 5 (ms)
Enumeration Time: 5 (ms)
Enumeration Time: 9 (ms)
Enumeration Time: 14 (ms)
Enumeration Time: 12 (ms)
Enumeration Time: 10 (ms)
Enumeration Time: 8 (ms)
Enumeration Time: 9 (ms)
Enumeration Time: 10 (ms)
Enumeration Time: 13 (ms)
Enumeration Time: 12 (ms)
Enumeration Time: 12 (ms)
Enumeration Time: 16 (ms)
Enumeration Time: 21 (ms)
Enumeration Time: 18 (ms)
Enumeration Time: 15 (ms)
Enumeration Time: 15 (ms)
Enumeration Time: 23 (ms)
Enumeration Time: 15 (ms)
Enumeration Time: 38 (ms) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-02T10:46:01.443

使用的问题`var test = nodes.Count();`是底层集合（如果有的话）可能正在实现`IList<T>`具有`Count`属性的集合。

作为一种优化，可以调用该属性，无论集合大小，您都将获得接近恒定的时间。

而不是`ToList()` *或* `Count()`考虑实际迭代：

```
foreach(var item in nodes){} 
```

请注意，我们没有对 - 做任何事情`item`- 这只会以最小的开销进行迭代。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-02T10:54:26.257

你不能真正做一个有用的性能测试，比如从文件中读取。

根据文件是否在磁盘缓存中，性能会有很大差异。在您的测试中，该文件将始终在您几毫秒前访问它时被缓存，但在实时情况下它很少会被缓存，这会产生完全不同的结果。

您可以通过从 a`MemoryStream`而不是真实文件中读取文件数据来仅测试解析文件数据的部分。但是，读取实际文件通常会比解析它花费更长的时间，因此解析的性能通常根本不重要。

# ruby - Sinatra：如何在 Mustache 视图中使用助手

> ID：10412094
> 
> 赞同：4
> 
> 时间：2012-05-02T10:40:24.430
> 
> 标签：ruby, sinatra, mustache, helpers

我想在 Mustache 视图中使用我的 Sinatra 助手方法。

我这样做：

```
# in app.rb:
...
helpers do
  def helloworld
    "helloworld!"
  end
end
get '/'
  mustache :home
end
...

# in views/home
class App < Sinatra::Base
  module Views
    class Home < Mustache
      def hello
        helloworld
      end
    end
  end
end

# in home.mustache
<p>{{hello}}</p> 
```

它不起作用，我收到错误消息：

«App::Views::Home:0x000000023ebd48 的未定义局部变量或方法 `helloworld'»

如何在 Mustache 视图中使用我的方法助手？

或者，我如何直接从 home.mustache 使用我的方法助手？像这样 ：

```
# in home.mustache
<p>{{helloworld}}</p> 
```

非常感谢您的帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-02-04T04:51:07.770

你应该能够用一个模块做一些事情：

```
# app_helpers.rb
module AppHelpers
  def helloworld
    "helloworld!"
  end
end

# app.rb
helpers AppHelpers

get '/'
  mustache :home
end

# views/home.rb
class App < Sinatra::Base
  module Views
    class Home < Mustache
      include AppHelpers

      def hello
        helloworld
     end
   end
 end 
```

# php - 循环通过 2d 会话数组购物车 php

> ID：10412095
> 
> 赞同：0
> 
> 时间：2012-05-02T10:40:25.987
> 
> 标签：php, mysql, multidimensional-array

我正在构建一个购物车，并希望使用二维数组来存储商品 ID 和数量。当用户进入购物车时，我希望能够从数组中获取项目 ID 并从数据库中输出项目详细信息

```
/**************** Adding to the 2d array ***********************/
    //Check to see if variable isset and then add item to shopping cart
    //$itemID is the ID of the product
    //$quantity is the quantity of the product they wish to order
    if(isset($_GET['add'])){
        $itemID = $_GET['add'];
        $quantity = $_POST['quantity'];
        $_SESSION['cart'][] = array("id" => $itemID,"quantity" => $quantity);
        header('xxx');//stops user contsanlty adding on refresh
    }

    /******************** Looping through the array  **********************/
        //need to loop through grab the item ID
        //then pull what we need from the database  

        //This is where I want to grab the id from the array and query the database

        $cart = $_SESSION['cart'];
        foreach ($cart as $value ){
        //works like it should
            foreach ( $value as $key=> $final_val ){
                echo $key;
                echo ':';
                echo $final_val;
                echo '<br/>';
            }
                echo '<br/>';
        } 
```

数组输出像这样

编号：1 数量：5

编号：2 数量：1

我在弄清楚如何分离 ID 和数量以便我可以使用项目 ID 查询数据库时遇到了一些麻烦。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-02T10:44:05.663

```
foreach ( $value as $key=> $final_val ){
              if($key=='id')
              {
                echo $key;
                echo ':';
                echo $final_val;
                echo '<br/>';
              }
            } 
```

或者你可以直接使用这样的`$value['id']` 东西会帮助你..请尝试。这是你需要的吗？

# php - PHPMailer：使用密件抄送处理时出错

> ID：10412098
> 
> 赞同：0
> 
> 时间：2012-05-02T10:40:30.043
> 
> 标签：php, phpmailer

我找不到我的具体情况的答案。

我正在开发一个系统来将出版物从数据库发送到邮件列表。我已经设法使用普通`loop`代码来做到这一点。

但是，我只想使用循环来添加收件人`BCC`，并维护`error handling`是否有人错过了它，例如：

```
foreach($array as $user){
    $mail->AddBCC( $user['email'], $user['customerName']);
}

try{
    $mail->AltBody    = "To view the message, please use an HTML compatible email viewer!"; // optional, comment
    $mail->AddReplyTo("noreply@company.com","Company Name");
    $mail->SetFrom('noreply@company.com', 'Company Name');
    $mail->Subject    = "Company| E-Zine";
    $mail->MsgHTML($ezineContent);              

if(!$mail->Send()) {

    //show error msg

} else {

   //show successful msg
}

}catch (phpmailerException $e) {

     //show error msg

}catch (Exception $e) {

     //show error msg
}

$mail->ClearAddresses(); 
```

然后我想通过一个电话将电子邮件发送给上面添加的所有收件人。

是否可以进行错误处理并查找是否有人因为地址不正确而没有收到它？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-02T11:25:44.373

跟踪邮件操作成功的一种常见做法是使用电子邮件的“返回路径”标题。

电子邮件及其标题的示例：

```
Return-Path: server@return.xyz.com
Received: from localhost (mx-1-1 [127.0.0.1])
    by mx-1.xyz.com (Postfix) with ESMTP id 3F81556754
    for <jbradler@xyz.com>; Wed,  2 May 2012 12:27:18 +0200 (CEST)
To: jbradler@xyz.com
Subject: test mailing
From: Jens <jbradler@xyz.com>
Message-Id: <20120502102717.763ADA88004@xyz.com>
Date: Wed,  2 May 2012 12:27:17 +0200 (CEST)

Hi Folks, ... 
```

其中“发件人”标题是您选择的真实姓名和您希望读者看到的电子邮件地址，“返回路径”的主要目的是指定指示未投递或其他邮件系统故障的邮件的地址将被发送（[有关详细信息，请参阅 RFC 2821][1]）。

所以基本上这个标题是开始获取未送达报告的正确位置。

我将如何做到这一点：

1.  创建一个唯一的子域来获取所有未送达报告（例如 return.xyz.com）
2.  设置收件箱以捕获发送到上述子域的所有电子邮件（无论电子邮件地址的本地部分如何，例如 *@return.xyz.com）
3.  使电子邮件唯一=>一个收件人一封唯一的电子邮件（不使用密件抄送）
4.  使用收件人 ID（例如您的收件人数据库的数字 ID）和电子邮件或活动 ID 生成未来的本地部分（例如 {campaign_id}-{recipient_id}）
5.  使用新的返回路径：**返回路径：{campaign_id}-{recipient_id}@return.xyz.com**
6.  创建一些工具来获取传入邮件并从垃圾邮件和临时通知（例如外出消息）中过滤掉真正的未送达报告

这是一个具有唯一返回路径的示例：

```
Return-Path: 123-456@return.xyz.com
Received: from localhost (mx-1-1 [127.0.0.1])
    by mx-1.xyz.com (Postfix) with ESMTP id 3F81556754
    for <jbradler@xyz.com>; Wed,  2 May 2012 12:27:18 +0200 (CEST)
To: jbradler@xyz.com
Subject: test mailing
From: Jens <jbradler@xyz.com>
Message-Id: <20120502102717.763ADA88004@xyz.com>
Date: Wed,  2 May 2012 12:27:17 +0200 (CEST)

Hi Folks, ... 
```

就是这样。

编辑 - 如何通过 phpMailer 实现：

```
/* define domain name for non-delivery reports */
define('RETURN_PATH_DOMAIN', 'return.xyz.com');

/* get current campaign id */
$campaignId = 123;

/* loop recipient list and send email */
foreach ($array as $userId => $user) {
  try{
    $mail = new PHPMailer();
    $mail->HeaderLine('Return-Path', $userId . '-' $campaignId . '@' . RETURN_PATH_DOMAIN);
    $mail->To($user['email'], $user['customerName']);
    $mail->AltBody = "To view the message, please use an HTML compatible email viewer!"; 
    $mail->AddReplyTo("noreply@company.com","Company Name");
    $mail->SetFrom('noreply@company.com', 'Company Name');
    $mail->Subject = "Company| E-Zine";
    $mail->MsgHTML($ezineContent);         
    if(!$mail->Send()) {
      // show log
    } else {
      //show successful msg
    }
  } catch (Exception $e) {
    // show error
  }
} 
```

据我记得，我们在使用本地 sendmail 时遇到了问题。标头 Return-Path 被本地 MTA 的某些配置替换。如果是这种情况，请尝试使用 SMTP 连接到可用的中继主机。

# android - Android 中的 Internet 连接检查

> ID：10412099
> 
> 赞同：6
> 
> 时间：2012-05-02T10:40:40.650
> 
> 标签：android

我需要检查Android中是否可以使用互联网，所以我尝试使用以下功能：

```
boolean b_IsConnect = isNetworkAvailable();
private boolean isNetworkAvailable() {
  ConnectivityManager connectivityManager = (ConnectivityManager) getSystemService(Context.CONNECTIVITY_SERVICE);
  NetworkInfo activeNetworkInfo = connectivityManager
    .getActiveNetworkInfo();
  return activeNetworkInfo != null;
} 
```

我还在清单中添加了所需的权限：

```
<uses-permission android:name="android.permission.INTERNET" />
<uses-permission android:name="android.permission.WAKE_LOCK" />
<uses-permission android:name="android.permission.ACCESS_FINE_LOCATION" />
<uses-permission android:name="android.permission.ACCESS_COARSE_LOCATION" >
<uses-permission android:name="android.permission.ACCESS_NETWORK_STATE"/>
<uses-permission android:name="android.permission.ACCESS_WIFI_STATE"/> 
```

但它仍然抛出异常：

```
05-02 16:05:26.226: E/AndroidRuntime(481): java.lang.RuntimeException: Unable to start activity ComponentInfo{com.housedisplay/com.housedisplay.RssActivity}: java.lang.SecurityException: ConnectivityService: Neither user 10038 nor current process has android.permission.ACCESS_NETWORK_STATE.
05-02 16:05:26.226: E/AndroidRuntime(481):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1736)
05-02 16:05:26.226: E/AndroidRuntime(481):  at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1752)
05-02 16:05:26.226: E/AndroidRuntime(481):  at android.app.ActivityThread.access$1500(ActivityThread.java:123)
05-02 16:05:26.226: E/AndroidRuntime(481):  at android.app.ActivityThread$H.handleMessage(ActivityThread.java:993)
05-02 16:05:26.226: E/AndroidRuntime(481):  at android.os.Handler.dispatchMessage(Handler.java:99)
05-02 16:05:26.226: E/AndroidRuntime(481):  at android.os.Looper.loop(Looper.java:126)
05-02 16:05:26.226: E/AndroidRuntime(481):  at android.app.ActivityThread.main(ActivityThread.java:3997)
05-02 16:05:26.226: E/AndroidRuntime(481):  at java.lang.reflect.Method.invokeNative(Native Method)
05-02 16:05:26.226: E/AndroidRuntime(481):  at java.lang.reflect.Method.invoke(Method.java:491)
05-02 16:05:26.226: E/AndroidRuntime(481):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:841)
05-02 16:05:26.226: E/AndroidRuntime(481):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:599)
05-02 16:05:26.226: E/AndroidRuntime(481):  at dalvik.system.NativeStart.main(Native Method)
05-02 16:05:26.226: E/AndroidRuntime(481): Caused by: java.lang.SecurityException: ConnectivityService: Neither user 10038 nor current process has android.permission.ACCESS_NETWORK_STATE.
05-02 16:05:26.226: E/AndroidRuntime(481):  at android.os.Parcel.readException(Parcel.java:1322)
05-02 16:05:26.226: E/AndroidRuntime(481):  at android.os.Parcel.readException(Parcel.java:1276)
05-02 16:05:26.226: E/AndroidRuntime(481):  at android.net.IConnectivityManager$Stub$Proxy.getActiveNetworkInfo(IConnectivityManager.java:446)
05-02 16:05:26.226: E/AndroidRuntime(481):  at android.net.ConnectivityManager.getActiveNetworkInfo(ConnectivityManager.java:256)
05-02 16:05:26.226: E/AndroidRuntime(481):  at com.housedisplay.RssActivity.isNetworkAvailable(RssActivity.java:218)
05-02 16:05:26.226: E/AndroidRuntime(481):  at com.housedisplay.RssActivity.onCreate(RssActivity.java:59)
05-02 16:05:26.226: E/AndroidRuntime(481):  at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1048)
05-02 16:05:26.226: E/AndroidRuntime(481):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1700) 
```

你能告诉我这里发生了什么吗？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-05-03T11:58:00.440

`<uses-permission android:name="android.permission.ACCESS_COARSE_LOCATION" >`缺少一个结束斜线。可能会导致解析 XML 的问题，这可能会导致下一个`<uses-permission ...>`无法正确解析。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-02T10:43:07.063

您需要在 Manifest.xml 中的 application-tag 之外设置权限

像这样它应该可以工作：

```
private boolean connectionChecker() {
    // ConnectivityManager casten
    connectivityManager = (ConnectivityManager) getSystemService(Context.CONNECTIVITY_SERVICE);

    // boolean für networkinfo holen
    activeNetworkInfo = connectivityManager.getActiveNetworkInfo();
    // Returnt true oder false if not null
    return activeNetworkInfo != null;
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-02T10:50:05.580

试试这样

```
private void checkNetworkState() {
        // TODO Auto-generated method stub
        ConnectivityManager connectivityManager = (ConnectivityManager) getSystemService(Context.CONNECTIVITY_SERVICE);
        NetworkInfo activeNetworkInfo = connectivityManager
                .getActiveNetworkInfo();

        if (activeNetworkInfo == null) {

            Toast.makeText(this, "Network Not Connected...Please Try Again",
                    Toast.LENGTH_LONG).show();

        } else {
            if (activeNetworkInfo.isConnected()) {

                try {
                    << Your Task>>>

                } catch (Exception e) {
                    // TODO Auto-generated catch block
                    System.out.println("Inside the Exception" + e.getMessage());
                }

            } else if (activeNetworkInfo.isConnectedOrConnecting()) {

                Toast.makeText(this,
                        "Network is connecting Now please patient",
                        Toast.LENGTH_LONG).show();
            }

        }
    } 
```

在清单中添加此权限 `<uses-permission android:name="android.permission.ACCESS_NETWORK_STATE" />`（在应用程序标记上方放置权限标记）

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-02T10:54:02.093

试试这个代码

```
public boolean isNetworkOnline() {
boolean status=false;
try{
    ConnectivityManager cm = (ConnectivityManager) getSystemService(Context.CONNECTIVITY_SERVICE);
    NetworkInfo netInfo = cm.getNetworkInfo(0);
    if (netInfo != null && netInfo.getState()==NetworkInfo.State.CONNECTED) {
        status= true;
    }else {
        netInfo = cm.getNetworkInfo(1);
        if(netInfo!=null && netInfo.getState()==NetworkInfo.State.CONNECTED)
            status= true;
    }
}catch(Exception e){
    e.printStackTrace();  
    return false;
}
return status;

} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-02T11:48:09.227

```
NetworkInfo i = conMgr.getActiveNetworkInfo();   if (i == null)
    return false;   if (!i.isConnected())
    return false;   if (!i.isAvailable())
    return false;   return true; 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2016-03-21T04:50:00.030

您只需要在 Andriod Manifesto 中的应用程序标签上方放置权限

# php - 邮件和 FILTER_SANITIZE_STRING 的良好做法

> ID：10412101
> 
> 赞同：2
> 
> 时间：2012-05-02T10:40:54.477
> 
> 标签：php, email, filter-var

我用它来发送电子邮件：

```
$_POST['message'] = filter_var($_POST['message'], FILTER_SANITIZE_STRING);
// …    
mail($mail_to, $subject, $message,  'MIME-Version: 1.0' ."\r\n" .'Content-type: text/plain; charset=UTF-8' . "\r\n".'From: '.$_POST['email'] . "\r\n" .'Reply-To: '.$_POST['email']. "\r\n" ); 
```

它有效，但报价看起来像这样：`&#34;`.
报价中有一个选项，[`filter_var()`](http://php.net/manual/en/function.filter-var.php "filter_var()")但它安全吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-04-02T14:40:53.810

如果您将邮件作为 HTML 而不是纯文本发送，则经过清理的字符将正确显示。可以通过更改在您的代码中做到这一点：

```
'Content-type: text/plain; charset=UTF-8' 
```

至

```
'Content-type: text/html; charset=UTF-8' 
```

# c# - 让 WMI 或 System.Diagnostics.Process 运行进程哪个更快？

> ID：10412102
> 
> 赞同：1
> 
> 时间：2012-05-02T10:40:55.603
> 
> 标签：c#, process, wmi

我正在使用 WCF 服务库在 LAN 上开发一个小型远程任务管理器应用程序 [服务器/客户端]。

我需要知道哪种方式可以更快地获取处理器信息：

*   从中获取进程信息`System.Diagnostics`？
*   从中获取进程信息`WMI`？

我现在使用第一个选项，但是如果应用程序是 x86，并且进程是 x64，那么我无法访问`Process.MainModule`，所以它迫使我创建我的应用程序的两个版本以使其在任何 PC 上工作，x86 版本和 x64。

那么如果我使用 WMI，我会面临同样的问题吗？

```
public void GetProcesses()
    {
        foreach (Process p in Process.GetProcesses())
        {
            try
            {
                InfoProcess process = new InfoProcess(p.Id, p.MainModule.ModuleName, p.MainModule.FileVersionInfo.FileDescription, p.WorkingSet / 1024);
                PrintProcess(process);
            }
            catch
            { }
        }
    }

public class InfoProcess
{
    public int Id;
    public string Name;
    public string Description;
    public int WorkingSet;
    public InfoProcess(int Id, string Name, string Desc, int WorkingSet)
    {
        this.Id = Id;
        this.Name = Name;
        this.Description = Desc;
        this.WorkingSet = WorkingSet;
    }
} 
```

如果 WMI 更好，我需要一些关于属性名称的帮助：

*   `Process.WorkingSet`
*   `Process.MainModule.FileVersionInfo.FileDescription`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-02T11:02:55.900

我希望 WMI 会更慢。您可以使用一些技巧来加速 WMI，但总的来说，性能通常很差。

在您的情况下，我会简单地构建针对 AnyCPU 的应用程序。然后你有一个应用程序在 32 位操作系统下作为 x86 运行，在 64 位操作系统下作为 x64 运行。这样您就可以完全避免 WMI。

# javascript - 使用 localStorage 填充表单

> ID：10412103
> 
> 赞同：2
> 
> 时间：2012-05-02T10:40:59.403
> 
> 标签：javascript, forms, jquery-mobile, local-storage

我正在构建一个 web 应用程序，其中有一个设置面板。我有一个将数据从表单保存到 localStorage 的代码，但是如果有一些数据保存到 localStorage，我如何让它在页面加载时自动填充表单？

这是我的表单代码：

```
<label for="serveri"> Server: </label> 
<input type='text' name="server" id="saveServer"/> 
<button onclick="save_data()" type="button" value="Save" id="Save" data-theme="a">Save</button> 

<script> function save_data()
{ var input = document.getElementById("saveServer");
localStorage.setItem("server", input.value); 
var storedValue = localStorage.getItem("server"); } 
</script> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-02T12:22:39.603

您需要做的就是添加一个`ready`加载数据的方法。

```
$(document).ready(function() {
  $(input[name=server]).val(localStorage.getItem("server"));
}); 
```

或非[JQuery](http://jquery.com)答案。

```
function save_data() {
  // Save functionality here...
}

function load_data() {
  var input = document.getElementById("saveServer");
  input.value = localStorage.getItem("server");
}

load_data(); 
```

只需确保`form`在执行任何要填充它的 JavaScript 之前您的存在。

这是一个工作[示例](http://jsfiddle.net/brantolsen/hn78X/1/)。

# php - php - preg_replace / backreference - 从邮件地址中提取部分的语法

> ID：10412104
> 
> 赞同：1
> 
> 时间：2012-05-02T10:41:00.260
> 
> 标签：php, regex, preg-replace, preg-match

我确实有一个这样的变量：

```
$mail_from = "Firstname Lastname <email@domain.com>"; 
```

我想收到一个

```
array(name=>"firstname lastname", email=>"email@domain.com")
or 
the values in two separate vars ($name = "...", $email = "...") 
```

我一直在玩 preg_replace 但不知何故没有完成......

进行了广泛的搜索，但没有找到完成此任务的方法。

这是我得到的最接近的：

```
$str = 'My First Name <email@domain.com>';
preg_match('~(?:"([^"]*)")?\s*(.*)~',$str,$var);
print_r($var);
echo "<br>Name: ".$var[0];
echo "<br>Mail: ".$var[2]; 
```

如何将“email@domain.com”放入 $var['x]？

谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-02T11:08:17.160

这适用于您的示例，并且当电子邮件在尖括号内时应该始终有效。

```
$str = 'My First Name <email@domain.com>';
preg_match('~(?:([^<]*?)\s*)?<(.*)>~', $str, $var);
print_r($var);
echo "<br>Name: ".$var[1];
echo "<br>Mail: ".$var[2]; 
```

**解释：**

`(?:([^<]*?)\s*)?`可选匹配所有不是 a 的内容，`<`并且除了尾随空格之外的所有内容都存储在组 1 中。

`<(.*)>`匹配尖括号之间的内容并将其存储在第 2 组中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-02T10:49:38.297

```
 //trythis
 $mail_from = "Firstname Lastname <email@domain.com>";
 $a = explode("<", $mail_from);
 $b=str_replace(">","",$a[1]);
 $c=$a[0];
 echo $b;
 echo $c; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-02T10:49:55.597

**尝试这个：**

`(?<=")([^"<>]+?) *<([^<>"]+)>(?=")`

**解释：**

```
<!--
(?<=")([^"<>]+?) *<([^<>"]+)>(?=")

Options: ^ and $ match at line breaks

Assert that the regex below can be matched, with the match ending at this position (positive lookbehind) «(?<=")»
   Match the character “"” literally «"»
Match the regular expression below and capture its match into backreference number 1 «([^"<>]+?)»
   Match a single character NOT present in the list “"<>” «[^"<>]+?»
      Between one and unlimited times, as few times as possible, expanding as needed (lazy) «+?»
Match the character “ ” literally « *»
   Between zero and unlimited times, as many times as possible, giving back as needed (greedy) «*»
Match the character “&lt;” literally «<»
Match the regular expression below and capture its match into backreference number 2 «([^<>"]+)»
   Match a single character NOT present in the list “&lt;>"” «[^<>"]+»
      Between one and unlimited times, as many times as possible, giving back as needed (greedy) «+»
Match the character “&gt;” literally «>»
Assert that the regex below can be matched, starting at this position (positive lookahead) «(?=")»
   Match the character “"” literally «"»
--> 
```

**代码：**

```
$result = preg_replace('/(?<=")([^"<>]+?) *<([^<>"]+)>(?=")/m', '<br>Name:$1<br>Mail:$2', $subject); 
```

* * *

# css - Twitter Bootstrap：嵌套模式弹出窗口不会消失

> ID：10412110
> 
> 赞同：1
> 
> 时间：2012-05-02T10:41:33.200
> 
> 标签：css, html, twitter-bootstrap, modal-dialog

我使用嵌套在 .tabbable div 中的 twitter 引导模式插件有以下标记：

```
 <div class="tabbable">
        <ul class="nav nav-tabs">
            <li class="active"><a href="#tabPeople" data-toggle="tab">People</a></li>
            <li><a href="#tabRoles" data-toggle="tab">Roles</a></li>
        </ul>
        <div class="tab-content">
            <div class="tab-pane active" id="tabPeople">
                <a data-toggle="modal" href="#modalEditPerson1">Name</a>
                <div class="modal hide fade in" id="modalEditPerson1">
                    <div class="modal-header">
                        <button class="close" data-dismiss="modal">
                            ×</button>
                        <h3>
                            Name</h3>
                    </div>
                    <div class="modal-body">
                        <p>
                            One fine body…&lt;/p>
                    </div>
                    <div class="modal-footer">
                        <a href="#" class="btn" data-dismiss="modal">Close</a> <a href="#" class="btn btn-primary">
                            Save changes</a>
                    </div>
                </div>                   
            </div>
            <div class="tab-pane" id="tabRoles">
                <p>
                    Role stuff here.</p>
            </div>
        </div>
    </div> 
```

这会调出一个模态，但不会像此页面上的演示那样淡化它：http: [//twitter.github.com/bootstrap/javascript.html#modals](http://twitter.github.com/bootstrap/javascript.html#modals)

当它没有嵌套在 .tabbable 元素中时，它可以正常工作

标题包含以下内容：

```
<script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js"></script>
<script src="styles/bootstrap/js/bootstrap.min.js" type="text/javascript"></script>
<link href="styles/styles.css" rel="stylesheet" type="text/css" />
<link href="/styles/bootstrap/css/bootstrap.min.css" rel="stylesheet" type="text/css" /> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-02T19:58:43.087

找到了。我在页面的其他地方有一个 jquery 选择器，该选择器的选择超出了应有的范围。它正在捕获我的模态锚点上的点击事件并覆盖默认行为。感谢大家的帮助/输入。

# php - 使用 adodb 或 PHP 转义数据库内容

> ID：10412113
> 
> 赞同：0
> 
> 时间：2012-05-02T10:41:42.667
> 
> 标签：php, adodb

虽然addslashes 有对应的stripslashes，但我不知道PHP DB 特定转义函数（例如mysql_real_escape_string 或pg_escape_string）的对应项，也不知道ADOdb qstr 函数的对应项。我对吗？您如何取消使用 mysql_real_escape_string 或 qstr 转义的内容？

我知道，在理想的世界中，我们不需要 un-esacpe 函数，因为您应该在查询中使用它们之前对内容进行 db-escape，但是如果应用程序是使用“转义一切”方法构建的，那么您需要使用它，每次您不在查询中使用它们时都需要取消转义内容，并且如果您从添加斜杠切换到 mysql_real_escape_string、pg_escape_string 或 adodb->qstr 之类的东西，则带斜杠不起作用。

提前非常感谢。

# objective-c - 如何在 MapKit 上显示一系列位置的注释标题

> ID：10412115
> 
> 赞同：0
> 
> 时间：2012-05-02T10:41:47.053
> 
> 标签：objective-c, ios, mapkit, mkannotation

我正在过滤一些 Google Places 数据，然后在地图视图上显示每个位置。目前我的所有点都显示在地图上。我需要弄清楚如何显示**annotationPoint.title = place.name;** 对于这些位置中的每一个。

知道我将如何为整个位置数组执行此操作吗？

非常感谢您的帮助！

```
 //UPDATE - to handle filtering
    - (void)googlePlacesConnection:(GooglePlacesConnection *)conn didFinishLoadingWithGooglePlacesObjects:(NSMutableArray *)objects 
    {

        if ([objects count] == 0) {
            UIAlertView *alert = [[UIAlertView alloc] initWithTitle:@"No matches found near this location" 
                                                            message:@"Try another place name or address" 
                                                           delegate:nil 
                                                  cancelButtonTitle:@"OK" 
                                                  otherButtonTitles: nil];
            [alert show];
        } else {
            locations = objects;
            //UPDATED locationFilterResults for filtering later on
            locationsFilterResults = objects;
            [tableView reloadData];

            [mapView removeAnnotations:mapView.annotations];
            [mapView addAnnotations:objects];

        }
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-02T10:54:24.857

试试这个代码：

```
if ([myArr containsObject:@"Germany"]) 
{
    gerArr = [[NSMutableArray alloc]init];
    [gerArr addObject:@"Berlin"];
    [gerArr addObject:@"Dresden"];

    [mapView setMapType:MKMapTypeStandard];
    [mapView setZoomEnabled:YES];
    [mapView setScrollEnabled:YES];
    MKCoordinateRegion region = { {0.0, 0.0 }, { 0.0, 0.0 } }; 
    region.center.latitude = 52.524268 ;
    region.center.longitude = 13.40629;
    region.span.longitudeDelta = 0.01f;
    region.span.latitudeDelta = 0.01f;
    [mapView setRegion:region animated:YES]; 

    [mapView setDelegate:self];

    DisplayMap *gann = [[DisplayMap alloc] init]; 
    gann.title = @"Berlin";
    gann.subtitle = @"Germany"; 
    gann.coordinate = region.center; 
    [mapView addAnnotation:gann];

    MKCoordinateRegion region1 = { {0.0, 0.0 }, { 0.0, 0.0 } }; 
    region1.center.latitude = 51.050991 ;
    region1.center.longitude = 13.733634;
    region1.span.longitudeDelta = 0.01f;
    region1.span.latitudeDelta = 0.01f;
    [mapView setRegion:region1 animated:YES]; 

    DisplayMap *gann1 = [[DisplayMap alloc] init]; 
    gann1.title = @"Dresden";
    gann1.subtitle = @"Germany"; 
    gann1.coordinate = region1.center; 
    [mapView addAnnotation:gann1];

    MKCoordinateRegion region2 = { {0.0, 0.0 }, { 0.0, 0.0 } }; 
    region2.center.latitude = 50.111445 ;
    region2.center.longitude = 8.680615;
    region2.span.longitudeDelta = 0.01f;
    region2.span.latitudeDelta = 0.01f;
    [mapView setRegion:region2 animated:YES]; 

    DisplayMap *gann2 = [[DisplayMap alloc] init]; 
    gann2.title = @"Frankfurt";
    gann2.subtitle = @"Germany"; 
    gann2.coordinate = region2.center; 
    [mapView addAnnotation:gann2];

}

else if([myArr containsObject:@"Austria"])
{

    ausArr = [[NSMutableArray alloc]init];
    [ausArr addObject:@"Vienna"];
    [ausArr addObject:@"Danube River"];

    [mapView setMapType:MKMapTypeStandard];
    [mapView setZoomEnabled:YES];
    [mapView setScrollEnabled:YES];
    MKCoordinateRegion region = { {0.0, 0.0 }, { 0.0, 0.0 } }; 
    region.center.latitude = 48.208174 ;
    region.center.longitude = 16.373819;
    region.span.longitudeDelta = 0.01f;
    region.span.latitudeDelta = 0.01f;
    [mapView setRegion:region animated:YES]; 

    [mapView setDelegate:self];

    DisplayMap *ausann = [[DisplayMap alloc] init]; 
    ausann.title = @"Vienna";
    ausann.subtitle = @"Austria"; 
    ausann.coordinate = region.center; 
    [mapView addAnnotation:ausann];

    MKCoordinateRegion region1 = { {0.0, 0.0 }, { 0.0, 0.0 } }; 
    region1.center.latitude = 48.266667 ;
    region1.center.longitude = 16.366667;
    region1.span.longitudeDelta = 0.01f;
    region1.span.latitudeDelta = 0.01f;
    [mapView setRegion:region1 animated:YES]; 

    DisplayMap *ausann1 = [[DisplayMap alloc] init]; 
    ausann1.title = @"Danube River";
    ausann1.subtitle = @"Austria"; 
    ausann1.coordinate = region1.center; 
    [mapView addAnnotation:ausann1];

} 
```

# iphone - 根据点击的标注导航到另一个页面

> ID：10412118
> 
> 赞同：0
> 
> 时间：2012-05-02T10:42:03.877
> 
> 标签：iphone, navigation, android-mapview, callout

嗨，我有 mapview 并显示两个带有标注的引脚，当单击第一个引脚标注时说它必须导航到 firstview 控制器，当单击第二个引脚标注时，它必须导航到第二个视图控制器如何检查条件。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-02T10:46:06.520

将披露按钮添加到您的图钉。为这些按钮分配标签，然后根据您分配的标签简单地检查和导航。

喜欢：

在您的标注类（的子类`MKAnnotationView`）中，在函数中添加以下行`- (id) initWithAnnotation:(id <MKAnnotation>)annotation reuseIdentifier:(NSString *)reuseIdentifier`

```
UIButton *btn;
btn = [UIButton buttonWithType:UIButtonTypeDetailDisclosure];
btn.frame = CGRectMake(275,27 ,30, 30);
[btn addTarget:self action:@selector(openDetail:) forControlEvents:UIControlEventTouchUpInside];
[self.contentView addSubview:btn]; 
```

告诉我它是否有帮助。

**打开详情：**

```
 -(void)openDetail: (id)sender
 {

UIButton *button = (UIButton *)sender;
int tag = button.tag;
 if(tag = 1)
 {
   //open 1st Controller.
 }
 else if(tag == 2)
 { 
  //open 2nd Controller.
 } 

 } 
```

# mysql - 将 mysql db 移动到另一个 Amazon EC2 实例的性能影响

> ID：10412120
> 
> 赞同：1
> 
> 时间：2012-05-02T10:42:11.137
> 
> 标签：mysql, networking, amazon-ec2

目前我们有一个运行 apache 和 mysql 的 EC2。我想知道将 mysql 移动到另一个 EC2 实例是否会提高或降低站点的性能。我更担心两个实例之间的网络速度问题。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-02T11:04:03.367

EC2 instances in the same availability zone are connected via a 10,000 Mbps network - that's faster than a good solid state drive on a SATA-3 interface (6Gb/s)

You won't see any performance drop by moving a database to another server, in fact you'll probably see a performance increase because of having separate memory and cpu cores for the two servers.

If your worry is network latency then forget about it - not a problem on AWS in the same availability zone.

Another consideration is that you're probably storing your website & db file on an EBS mounted volume. That EBS block is stored off-instance so you're actually storing a storage array on the same super-fast 10Gbps network.

So what I'm saying is... with EBS your website and database are already talking across the network to get their data, putting them on seperate instances won't really change anything in that respect - besides giving more resources to both servers. More resources means more data stored locally in memory and more performance.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-02T10:48:13.130

答案很大程度上取决于 apache 和 MySQL 使用的资源。如果对您的网站的需求很低，他们可以愉快地共同生活，并且每个人都配置了足够的内存，他们不会掏出虚拟内存。在这种情况下，最好将它们放在一起。

随着流量的增长或您的应用程序的增长，您将从拆分它们中受益，因为它们都可以在专用内存中运行。如果实例位于同一区域，那么您应该会看到它们之间的快速性能。我什至用美国的数据库在欧洲运行了一个 Web 应用程序，性能并没有明显差！不过我不建议这样做！

因为 AWS 既简单又便宜，最好的办法是设置它并对其进行基准测试！

# php - 计算单个/每天每个用户的总时间 - php/mysql

> ID：10412121
> 
> 赞同：1
> 
> 时间：2012-05-02T10:42:13.913
> 
> 标签：php, mysql

```
 > Start                    stop                  pinnumber
     > ---------------------------------------------------------
     > 2012-03-14 13:22:17    2012-03-14 15:22:50      2001
     > 2012-03-14 18:11:10    2012-03-14 19:10:10      2001
     > 2012-03-15 07:20:10    2012-03-15 13:20:50      2001
     >**2012-03-16 19:21:55       2012-03-17 02:55:22  2001** //on 16(19:21:55
                                                                     to 23:59:59) and     
                                                                 //on 17(00 to 02:55:22) 
     > 2012-03-17 14:15:05    2012-03-17 17:44:50      2001
     > 2012-03-18 19:11:10    2012-03-18 19:10:10      2002
     > 2012-03-18 10:20:10    2012-03-18 13:20:50      2003
     > 2012-03-18 11:20:10    2012-03-18 15:11:50      2001 
```

问题：

如何计算每个用户每天（'开始'，'停止'）每天的总时间？请参阅上面突出显示的点。假设，如果用户今天“开始”并明天停止，那么今天的时间不同，明天的时间不同？

现在我正在使用以下查询：-

> SELECT SEC_TO_TIME( SUM( TIME_TO_SEC(TIMEDIFF( `stop`, `start`) ) ) ) 作为时间 1，时钟。* FROM table_name WHERE `pin_number`= '2001' GROUP BY DATE_FORMAT( `start`, '%W %M %Y' )

从上面的查询我得到每天的记录，但是当开始日期和停止日期不同时。它计算的总时间不是一天的时间，但我需要每天的时间。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-02T11:02:20.613

I think I finally got there. You first need to get a set of days, which I obtain through a subquery that takes a `UNION` of the start and stop times (you could filter this for your `pinnumber` if desired in order to reduce the size of the `JOIN`).

One then joins each such date with those `(start,stop)` pairs that encompass that date (i.e. either start during the day, or the start of the day is between the start and stop time).

Finally, one groups by day and takes the sum of the amount of time between the start and end times, cutting off at the day start and end as appropriate (the magic `86400` is the number of seconds in a day = 24*60*60). Sadly this won't play nice with daylight savings, leap seconds, etc...

```
SELECT FROM_UNIXTIME(unixday, '%d/%m/%Y'), SUM(
    LEAST(   unixday+86400, UNIX_TIMESTAMP(Stop ))
  - GREATEST(unixday      , UNIX_TIMESTAMP(Start))
) AS Seconds
FROM table_name JOIN (

  SELECT UNIX_TIMESTAMP(DATE(Start)) AS unixday FROM table_name
UNION 
  SELECT UNIX_TIMESTAMP(DATE(Stop )) AS unixday FROM table_name

) AS days ON (
      UNIX_TIMESTAMP(Start) BETWEEN unixday AND unixday+86400
  OR (unixday BETWEEN UNIX_TIMESTAMP(Start) AND UNIX_TIMESTAMP(Stop))
)
WHERE pinnumber = 2001
GROUP BY unixday; 
```

See it on [sqlfiddle](http://sqlfiddle.com/#!2/2538d/23).

# android - 为什么 applyDimension 方法返回错误的值？

> ID：10412123
> 
> 赞同：1
> 
> 时间：2012-05-02T10:42:33.183
> 
> 标签：android, samsung-mobile

我在自定义视图的 onMeasure 方法中添加了一些代码，以确保最小的物理尺寸，以确保用户在单击它时不会遇到问题。事实上，我想确保 8 毫米的高度，但同时在某些设备中似乎可以正常工作，但在三星 Galaxy S II 中却无法正常工作。对于预期的 8 毫米，我在屏幕上绘制了小于 5 毫米的东西，它更小并且无法正确单击视图。为了确定问题出在设备上，我创建了一个小程序来测试它，主要活动的代码如下：

```
public class TrialMillimetersActivity extends Activity {

    private static final float FINGER_WIDTH = 8.0f;
    private static final int FINGER_WIDTH_UNITS = TypedValue.COMPLEX_UNIT_MM;

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);

        DisplayMetrics metrics = new DisplayMetrics();
        getWindowManager().getDefaultDisplay().getMetrics(metrics);

        TextView tv = new TextView(this);
        tv.setText("DisplayMetrics:" +
            "\n  Screen resolution in pixels: " +
            metrics.widthPixels + "x" + metrics.heightPixels +
            "\n  Screen density (dpi): " + metrics.densityDpi +
            "\n  Scale for text: " + metrics.scaledDensity);

        final float minFingerWidth = TypedValue.applyDimension(
            FINGER_WIDTH_UNITS, FINGER_WIDTH, metrics);
        tv.append("\n\nThe platform returns for " + FINGER_WIDTH +
            "mm the number of " + minFingerWidth + " pixels on this device.");

        final float widthMm = FINGER_WIDTH * (metrics.widthPixels) / minFingerWidth;
        final float heightMm = FINGER_WIDTH * (metrics.heightPixels) / minFingerWidth;
        tv.append("\n\nThis means this screen has a resolution of " + widthMm + "x" +
            heightMm + " in millimeters.");

        setContentView(tv);
    }
} 
```

我在不同的设备上尝试了上面的代码，即使不准确，它们也非常接近屏幕尺寸（用尺子测量）。但不是在 Galaxy S II 中。

有人可以告诉我如何解决这个问题，或者如果代码中出现错误，请告诉我问题出在哪里？

非常感谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-04-22T14:54:46.597

我在这里的两台 SII 设备上测试了你的代码，一台使用 stock rom，另一台使用 Cyanogenmod (Kitkat)，两者都报告了 56x93.33mm 的屏幕，这是相当准确的。

如果您在自定义视图中使用相同的 applyDimension 调用，它应该可以工作。

您可以尝试一些不同的东西作为最终测试，使用该尺寸来绘制一个简单的视图并通过代码设置其宽度。也许自定义视图流会修改最终视图大小。

# scala - Scala案例类中setter和getter的设置格式

> ID：10412127
> 
> 赞同：1
> 
> 时间：2012-05-02T10:42:44.490
> 
> 标签：scala, encapsulation

在 Scala 中，我有一个案例类：

```
case class MonthSelectionInfo(monthSelection: MonthSelection.Value, customMonth:Int = 0, customYear:Int = 0) {

 def this(monthSelection: MonthSelection.Value) = {
   this(monthSelection, 0, 0)
 }
}

object MonthSelection extends Enumeration {
  type MonthSelection = Value

  val LastMonth, ThisMonth, NextMonth, CustomMonth = Value
} 
```

当我有一个案例类的实例时，我必须使用

myMonthSelectionInfo.monthSelection

和

myMonthSelectionInfo.eq(newMonthSelection)

获取并设置其中包含的 MonthSelection 实例。

有没有什么好的 Scala 方式来格式化 getter 和 setter 看起来更像普通的 Java POJO？例如

```
myMonthSelectionInfo.setMonthSelection(newMonthSelection) 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-02T10:58:55.340

有[`@BeanProperty`](http://www.scala-lang.org/api/current/scala/reflect/BeanProperty.html)注释可以为字段生成 getter 和 setter。

```
case class MonthSelectionInfo(@reflect.BeanProperty var monthSelection: MonthSelection.Value)

scala> val ms = MonthSelectionInfo(MonthSelection.LastMonth)
ms: MonthSelectionInfo = MonthSelectionInfo(LastMonth)

scala> ms.setMonthSelection(MonthSelection.ThisMonth)

sscala> ms.getMonthSelection
res4: MonthSelection.Value = ThisMonth 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-02T10:58:28.770

在面向对象的编程中，getter 和 setter 是大多数人都认为有一些实际好处的东西。不幸的是，它们有时写起来很烦人。它们通常不包含大量代码，但是当您一遍又一遍地编写相同的东西时，它会很快变老。根据我的经验，大多数 getter 和 setter 都非常相似，因此有理由认为必须有一种“更好”的方法来实现相同的结果。

此[链接](http://www.dustinmartin.net/2009/10/getters-and-setters-in-scala/)可能会对您有所帮助。

# plugins - 使用插件将自定义字段添加到 jira（创建问题）

> ID：10412133
> 
> 赞同：2
> 
> 时间：2012-05-02T10:43:16.217
> 
> 标签：plugins, jira

我想知道是否有可能将自定义字段（例如文本字段）添加到创建问题屏幕（默认屏幕）。我已经通过使用 Web-GUI 管理了这个，但现在我想用一个插件来做到这一点。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-17T22:28:41.610

以下是如何从插件代码将现有自定义字段添加到现有屏幕：

```
FieldScreenManager fieldScreenManager = ComponentAccessor.getFieldScreenManager();
FieldScreen screen = fieldScreenManager.getFieldScreen(screenID);
FieldScreenTab defaultTab = screen.getTab(0);
defaultTab.addFieldScreenLayoutItem(customFieldID); 
```

查看[FieldScreenManager](http://docs.atlassian.com/software/jira/docs/api/latest/com/atlassian/jira/issue/fields/screen/FieldScreenManager.html)和[FieldScreen](http://docs.atlassian.com/software/jira/docs/api/latest/com/atlassian/jira/issue/fields/screen/FieldScreen.html) javadocs 了解详细信息。

# c - Linux中所有挂载点都存储在哪里

> ID：10412135
> 
> 赞同：5
> 
> 时间：2012-05-02T10:43:30.417
> 
> 标签：c, linux, mount-point

我想知道所有挂载点的存储位置；即在任何特定目录下？

我希望能够使用 C 程序列出所有现有的挂载点。我应该使用哪个系统调用或函数？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-02T10:45:29.820

它们位于 /proc/mounts “文件”中，您可以阅读和解析该文件。

# javascript - JQuery 检测悬停在 Flash 对象上

> ID：10412147
> 
> 赞同：0
> 
> 时间：2012-05-02T10:44:22.180
> 
> 标签：javascript, jquery

我在使用以下 JQuery 代码时遇到问题：

```
$("object").hover(function(e){
   alert('Flash Here');
}); 
```

我只想让 jquery 检测我是否将鼠标悬停在 flash 对象的顶部。

这是闪存嵌入代码：

```
<object classid="clsid:D27CDB6E-AE6D-11CF-96B8-444553540000"
 codebase="http://download.macromedia.com/pub/shockwave/cabs/flash/swflash.cab#version=6,0,29,0"
 width="320" height="240" quality="HIGH"><param name="movie"
 value="test.swf"><param name="quality" value="high">
<embed src="rdream.swf"
 quality="high" width="320" height="240" name="Test"
 type="application/x-shockwave-flash"
 pluginspage="http://www.macromedia.com/shockwave/download/index.cgi?P1_Prod_Version=ShockwaveFlash">
</object> 
```

我没有按预期收到警报。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-02T10:50:19.087

尝试将闪光灯插入一些块元素并将其悬停而不是对象。

```
<div id="myFlash">
  <object>
  Your Flash...
  </object>
</div>

$("#myFlash").hover(function(e){
   alert('Flash Here');
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-02T11:19:03.243

```
<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.7.1/jquery.min.js" type="text/javascript"></script>

<style>
div#container{z-index:2;width:320px;height:240px;}
div#flashcontainer{z-index:1;width:320px;height:240px;overflow:hidden;border:solid 1px red;}
</style>

<script type="text/javascript">
$(document).ready(function(){

//detecting the div container doesnt mean flash was loaded
//$('#flashcontainer').hover(function(){
//alert(this.id);
//});

//detect the id from the flash embed code
$('object').hover(function(){
alert(this.id);
});

});
</script>

<div id="container">

<div id="flashcontainer">

<object classid='clsid:D27CDB6E-AE6D-11cf-96B8-444553540000' width='320' height='240' id='player1' name='player1'>
<param name='movie' value='test.swf'>
<param name='allowfullscreen' value='true'>
<param name='allowscriptaccess' value='always'>
<param name='wmode' value='transparent'>
<embed id='player1'
name='player1'
src='test.swf'
width='320'
height='240'
allowscriptaccess='always'
allowfullscreen='true'
flashvars="wmode=transparent"
/>
</object>

</div>

</div> 
```

# sql-server - 平面文件导入的奇怪行为

> ID：10412150
> 
> 赞同：-1
> 
> 时间：2012-05-02T10:44:37.297
> 
> 标签：sql-server, ssis, text-files

0我正在导入以 UTF8 编码的文本文件 - 没有 BOM 将平面文件源用于 OLE DATABASE 任务。

Flat 文件连接的格式为 DELIMITED, 65001(UTF-8), Text Qualifier (none), Header Row delimiter 为 {CR}{LF} , Header Rows skip 为 2 , 第一个数据行中的列名。行分隔符是 {CR}{LF}，列分隔符是竖线 {|}。

数据格式是这样的；

q 中的特殊产品：报告于 2011 年 1 月 11 日 {CR}{LF}

{CR}{LF}

服务|Co|Q 号|文档名称|{CR}{LF}

他| 澳大利亚|000021|德特|{CR}{LF}

问题是 SSIS 没有看到前 112 行？我无法解决这个问题。这让我快疯了，所以请帮忙？

从 113 开始的字段中的所有其他行都没有问题地导入到数据库中。SSIS 包运行时没有错误。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-02T14:01:05.517

您是否检查了“要跳过的标题行”属性？那里的价值是什么？此外，如果您在 FF 连接管理器中查看数据的“预览”，则有一个名为“要跳过的数据行”的属性。这两个属性都应该是 0。你在你的 FF 经理身上看到了什么？

# actionscript-3 - 如何在同一个 HTML 页面上的两个相同的 swf 之间共享一个库？

> ID：10412151
> 
> 赞同：0
> 
> 时间：2012-05-02T10:44:39.713
> 
> 标签：actionscript-3, flash, flash-cs5

我正在运行两个都使用[ASWing](http://www.aswing.org/) UI 库的 swf，有没有办法只加载一次 ASWing 的共享库？目前，我正在为同一页面上的每个 swf 文件加载库。

ps：两个SWF是一样的

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-02T11:02:00.513

As far as i know there is not other way to share RSLs apart from loading them again. This shouldn't be an issue for you as the first swf to load it will cache it, as per Adobe's docs:

When multiple applications share a core set of components or classes, clients can download those assets only once as an RSL rather than once for each application. The RSLs are persisted on the client disk so that they do not need to be transferred across the network a second time. The resulting file size for the applications can be reduced. The benefits increase as the number of applications that use the RSL increases.

# ios - iOS NSTimer 触发两次

> ID：10412155
> 
> 赞同：2
> 
> 时间：2012-05-02T10:44:50.777
> 
> 标签：ios, nstimer

您好我正在尝试使用 NSTimer 创建倒计时并使用标签查看它。问题是标签变成了两个，我不知道为什么。有任何想法吗？

这是我的代码

```
 - (void)viewDidLoad
   {
       NSLog(@"%@", self.chosenTime);
       [self startGame];
       [super viewDidLoad];

       NSString *timeString =  self.chosenTime;
       self.timer = [timeString intValue];
       self.countdown.text = timeString;
       // Do any additional setup after loading the view.
    }

    - (void)startGame
    {
        [self introCountdown];
        [self performSelector:@selector(goAnimation) withObject:nil afterDelay:3.0];
        NSString *timeString =  self.chosenTime;
        self.timer = [timeString intValue];
        [self performSelector:@selector(startCountdown) withObject:nil afterDelay:4.0];
    }

    - (void)startCountdown
    {
         //self.countdownTimer = [NSTimer timerWithTimeInterval:1 target:self selector:@selector(decrementTimer:) userInfo:nil repeats:YES];
         self.countdownTimer = [NSTimer scheduledTimerWithTimeInterval:1.00 target:self selector:@selector(decrementTimer:) userInfo:nil repeats:YES];
    }

    - (void)decrementTimer:(NSTimer *)timer
    {
       if(self.timer > 0)
       {
           self.timer = self.timer - 1;
           self.countdown.text = [NSString stringWithFormat:@"%d", self.timer];
       }
       else 
       {
            [self.countdownTimer invalidate];
            self.countdownTimer = nil;
        }
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-02T10:54:10.897

这段代码似乎是正确的。可能是您正在从其他地方更改标签的文本？

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-05-02T10:51:30.700

对不起，误解，代码是正确的，这似乎是一个 UI 问题或从其他地方处理标签，如果可能的话，将您的源代码附上 xib

# shell - 如何简单地检索当前脚本的绝对路径（多操作系统解决方案）？

> ID：10412162
> 
> 赞同：5
> 
> 时间：2012-05-02T10:45:13.400
> 
> 标签：shell

我正在寻找一个简单的解决方案来检索当前脚本的绝对路径。它需要独立于平台（我希望它可以在 linux、freebsd、macos 上工作并且没有 bash）。

*   “readlink -f $0”适用于 linux，但不适用于 freebsd 和 macos：readlink 没有“-f”选项。
*   “realpath $0”适用于 freebsd 和 linux，但不适用于 macos：我没有这个命令。

编辑：检索脚本存储库路径的解决方案：

DIR="$( cd "$( dirname "$0" )" && pwd )" （来源：[从内部获取 Bash 脚本的源目录](https://stackoverflow.com/questions/59895/can-a-bash-script-tell-what-directory-its-stored-in#comment3818043_246128)）

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-27T16:02:37.410

```
#!/bin/sh

self=$(
    self=${0}
    while [ -L "${self}" ]
    do
        cd "${self%/*}"
        self=$(readlink "${self}")
    done
    cd "${self%/*}"
    echo "$(pwd -P)/${self##*/}"
)

echo "${self}" 
```

它“主要是便携式的”。模式替换`pwd -P`是 POSIX，后者通常是内置的 shell。`readlink`很常见，但不在 POSIX 中。

而且我认为没有更简单的便携式方式。如果您真的需要这样的东西，我建议您尝试在所有系统上安装*realpath 。*

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-27T15:37:10.027

对于 zsh 脚本，FWIW：

```
#! /bin/zsh -
fullpath=$0:A 
```

# node.js - 如何将变量从 Connect 的中间件传递到 app.get-action？

> ID：10412163
> 
> 赞同：13
> 
> 时间：2012-05-02T10:45:13.677
> 
> 标签：node.js, express, middleware

我想创建一种*之前的过滤器*，它允许我让当前用户在所有操作中都可用。以下方法效果很好，我什至不需要声明全局变量：

```
app.use(function(req, res, next){
    if(req.session.user_id){
        /* Get user from database
           and share it in a variable
           that can be accessed frooom ...
        */
        User.find({ /* ... */ }, function(err, users){
            if(users.length == 1){
                req.current_user = users[0];
            }
            next();
        });
    }
    else{
        next();
    }
});

app.get('/', function(req, res){
    // ... here!!
    console.log(req.current_user);
    res.render('index', {
        current_user: req.current_user,
    });
}); 
```

但是我仍然不确定是否可以操纵`req`，因为我不知道改变不属于我的东西是否正确？有一个更好的方法吗？

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-05-02T15:12:09.357

继续前进并添加属性`req`！当我第一次开始使用 Node.js 和 JavaScript 时，我也觉得这很奇怪（主要来自 C++ 背景）。然而，考虑到 JavaScript 的原型对象模型，这很自然。在你熟悉它之后，你会意识到你可以用简洁的代码做强大的事情。

我是[Passport](http://passportjs.org/)的开发者（前面的评论者提到过）。如果您计划开发可以跨应用程序重用的中间件，我的建议是注意如何命名您添加到的属性`req`或`res`，以避免与同一应用程序中的其他中间件发生任何潜在冲突。

例如，Passport 将`user`at设置为`req.user`，但提供了更改它的选项（`req.currentUser`例如，应用程序可以说将其设置为 。）。内部私有变量附加​​到`req._passport`属性。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-05-02T11:09:49.123

这是使用会话或用户对象扩展 req 的常用方法

例如，请参阅以下示例：

*   Passport，一个流行的认证库[https://github.com/jaredhanson/passport/blob/master/lib/passport/strategies/session.js](https://github.com/jaredhanson/passport/blob/master/lib/passport/strategies/session.js)

*   为 cookie 会话连接中间件[https://github.com/senchalabs/connect/blob/master/lib/middleware/cookieSession.js](https://github.com/senchalabs/connect/blob/master/lib/middleware/cookieSession.js)

# linux - 获取已加载 dylib 的句柄

> ID：10412172
> 
> 赞同：1
> 
> 时间：2012-05-02T10:45:37.000
> 
> 标签：linux, macos, gcc, dylib

假设我加载了一个 dylib 并丢弃了句柄：

```
void loadfoo()
{
    dlopen("/lib/foo.dylib" , RTLD_NOW);
} 
```

然后我想在另一个函数中关闭它：

```
void closefoo()
{
    dlclose // ???
} 
```

如果在调用过程中没有保存之前加载的 dylib 的句柄，我能以某种方式找到它`dlopen`吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-02T12:01:53.300

如果我在生产中看到这样的代码，我会永远鄙视其发起者，但是：

```
void *handle = dlopen("/lib/foo.dylib", RTLD_NOW);
dlclose(handle);
dlclose(handle); 
```

# ubuntu - 在 ubuntu 中使用 deb intall 文件安装 hadoop 1.0.1 后如何指定 HADOOP_HOME

> ID：10412176
> 
> 赞同：4
> 
> 时间：2012-05-02T10:45:47.013
> 
> 标签：ubuntu, hadoop, debian, debian-based

我已经通过 deb 安装文件在我的 ubuntu 笔记本电脑中安装了 hadoop 1.0.1。hadoop文件安装到不同的目录，例如：配置文件安装到/etc/hadoop，但是bin文件安装到/usr/sbin。那么如何指定 HADOOP_HOME？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-02T12:42:21.923

HADOOP_HOME 是包含 Hadoop 脚本的 bin 目录的父目录。[请参阅 Hadoop 入门](http://wiki.apache.org/hadoop/GettingStartedWithHadoop)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-05-05T00:29:46.820

在这种情况下，我不会设置 HADOOP_HOME。我也在 Ubuntu 上使用 1.0.4 deb 安装，我设置的唯一***HOME是****JAVA_HOME**`/etc/hadoop/hadoop-env.sh`

# python - FileDialog ShowModal 后 MessageDialog 无响应

> ID：10412181
> 
> 赞同：2
> 
> 时间：2012-05-02T10:46:09.527
> 
> 标签：python, wxpython

嘿伙计们，我一直在尝试调试此问题一段时间，但无济于事。

我已经定义了一个绑定到调用 FileDialog 的按钮的函数，如果用户单击 OK，该函数将恢复。在 ID_OK 之后，我立即尝试调用一个简单的对话框，提示用户从另一个目录中选择文件。出现此消息对话框后，似乎存在延迟，用户在第一次单击时无法按 OK 或 CANCEL。需要反复单击按钮才能响应。如果有人知道这里发生了什么或者可以做些什么来调试这个问题，我将非常感激:)。我附上了代码片段（尽管使用 SingleChoiceDialog，但行为与 MessageDialog 相同）。为了记录 dlg 在条件语句之后被销毁。

```
def openFile(self, event):
    import os
    import re
    import csv
    import sets
    import datetime

    dlg = wx.FileDialog(self, "Choose file(s)", os.getcwd(), "", "*.*", wx.OPEN | wx.MULTIPLE | wx.CHANGE_DIR)

    if dlg.ShowModal() == wx.ID_OK:
        path = dlg.GetPaths()

        test = wx.SingleChoiceDialog(self, 'Add more files from different directories?', 'Selected Files', path, style=wx.CHOICEDLG_STYLE)

        while test.ShowModal() == wx.ID_OK:
            dlgAdd = wx.FileDialog(self, "Choose file(s)", os.getcwd(), "", "*.*", wx.OPEN | wx.MULTIPLE | wx.CHANGE_DIR)
            if dlgAdd.ShowModal() == wx.ID_CANCEL:
                break
            dlgAdd.Destroy()
            path = path + dlgAdd.GetPaths()
            test = wx.SingleChoiceDialog(self, 'Add more files from different directories?', 'Selected Files', path, style=wx.CHOICEDLG_STYLE)

        test.Destroy() 
```

在网上挖掘了更多，发现了类似问题的报告： http: [//comments.gmane.org/gmane.comp.python.wxpython/55470](http://comments.gmane.org/gmane.comp.python.wxpython/55470)。尽管它们都没有提供修复或解决方法，但传递焦点似乎确实是一个问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-02T14:17:10.503

尝试在“测试”对话框中使用“if”而不是“while”。我怀疑每当他们按下“确定”按钮时，您都会发生无限或近乎无限的循环。如果用户在 dlgAdd 对话框上按下 CANCEL，您的程序永远不会破坏 dlgAdd，因为它会在此时跳出循环。这也是一个问题，可能是“测试”对话框暂停一段时间的原因。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-02T23:47:19.410

好吧，我发现错误源于使用 Parallels 时使用了 Coherence 模式。关闭此功能后，对话框运行良好。

# coronasdk - 如何获取嵌套在 Corona 显示组中的显示对象的绝对 X/Y 坐标？

> ID：10412182
> 
> 赞同：3
> 
> 时间：2012-05-02T10:46:11.447
> 
> 标签：coronasdk

对于故障查找，我如何打印出隐藏在显示组中的显示对象（例如图像）的绝对坐标？（即不想要相对位置）

那是相对于实际显示分辨率的位置，所以说：Xleft，Xright，Ytop，Ybottom 坐标类型的东西。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-02T16:11:37.173

是的 - 你正在寻找的是[object:localToContent()](http://developer.anscamobile.com/reference/index/objectlocaltocontent)

# gwt - GWTP 中基于定时器的应用程序

> ID：10412183
> 
> 赞同：0
> 
> 时间：2012-05-02T10:46:13.427
> 
> 标签：gwt

我想创建一个`GWT`应用程序。每当用户登录到系统时，它会在 PopUpPanel 中显示一些信息，并在一段时间后自动禁用。是否可以使用`GWT`？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-02T11:05:43.313

可以尝试类似：

```
Timer t = new Timer() {
          @Override
          public void run() {
            popUpPanel.hide();
          }
        };
    popUpPanel.show();
t.schedule(5000); 
```

你想在哪里`5000`显示弹出窗口。

# windows-phone-7 - ListPicker 用于 Normal 和 Expanded 状态的单独模板

> ID：10412185
> 
> 赞同：1
> 
> 时间：2012-05-02T10:46:18.050
> 
> 标签：windows-phone-7, listpicker

可以订阅 ModeChanged 事件，也可以为 ListPicker 控件的 Normal 和 Expanded 状态提供单独的模板。

我正在特别寻找一种方法来在 ListPicker 展开（不是全屏）时包装我的文本，而不是在 ListPicker 处于正常状态时包装我的文本。

我在 Windows Phone 7.1 目标应用程序中使用它，但 GotFocus、LostFocus 和 Tap 事件没有被触发。现在，我可以查看的唯一事件是 SizeChanged 事件，通过查看 ListPickerMode 状态来查看切换模板。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-02T13:47:17.803

ListPicker 支持 2 个单独的模板，每个场景一个。

用于`ItemTemplate`展开视图。
用于`FullModeItemTemplate`完整页面视图。

# android - Android：在容器中心显示自定义对话框

> ID：10412192
> 
> 赞同：18
> 
> 时间：2012-05-02T10:46:36.980
> 
> 标签：android, android-dialog

如何将自定义对话框显示为容器的中心？

```
Dialog customdialog = new Dialog(this,android.R.style.Theme_Translucent_NoTitleBar); 
Window window = customdialog.getWindow();
window.setLayout(LayoutParams.FILL_PARENT, LayoutParams.FILL_PARENT);
window.setGravity(Gravity.CENTER); 
```

`R.style.Theme_Translucent_NoTitleBar`- 用于去除cutomdialog的边框。一旦我使用了这条线，对话框就会出现在平板电脑的左上角？

谁能帮我解决这个问题？

* * *

## 回答 #1

> 赞同：50
> 
> 时间：2012-05-02T11:17:10.040

将 fill_parent 更改为 wrap_content。我希望这将是对话框出现在活动角落的问题。它占用了整个布局的空间。因此更改它可能会帮助您获得真正想要的内容。

```
Window window = customdialog.getWindow();
window.setLayout(LayoutParams.WRAP_CONTENT, LayoutParams.WRAP_CONTENT);
window.setGravity(Gravity.CENTER); 
```

在 dialog.show() 语句之后使用上面的代码

* * *

## 回答 #2

> 赞同：16
> 
> 时间：2013-09-04T19:00:22.127

我将此添加到对话框的自定义样式中，并且效果很好。

```
<item name="android:layout_gravity">center</item> 
```

我的对话框的宽度和高度设置为 wrap_content。样式的父级是

parent="@android:style/Theme.Light"

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-06-30T14:22:27.627

我将使用这段代码：

```
 WindowManager.LayoutParams lp = new WindowManager.LayoutParams();
        Window window = dialog.getWindow();
        lp.copyFrom(window.getAttributes());
        //This makes the dialog take up the full width
        lp.width = WindowManager.LayoutParams.MATCH_PARENT;
        lp.height = WindowManager.LayoutParams.MATCH_PARENT;
        window.setAttributes(lp); 
```

其中 dialog 是要显示的对话框对象。在对话框的布局内部，您可以根据需要定义布局的视图：居中或不居中。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2019-06-16T08:49:45.177

我使用此代码并解决了问题

```
Window window = alertDialog.getWindow();
window.setLayout(ViewGroup.LayoutParams.MATCH_PARENT, ViewGroup.LayoutParams.WRAP_CONTENT);
window.setGravity(Gravity.CENTER); 
```

# c# - 对象引用未正确保存在实体框架中

> ID：10412199
> 
> 赞同：0
> 
> 时间：2012-05-02T10:46:53.573
> 
> 标签：c#, asp.net-mvc-3

在我的控制器中，我正在创建一个子类别对象并为该对象提供对其所属类别的引用。当我调试站点时一切正常，但是当我从我的 entityframework db 加载对象列表时，所有类别对象引用都被删除。其余的仍然存在。有人知道为什么会这样吗？

控制器：

```
[Authorize(Roles = "administrator")]
    [HttpPost]
    public ActionResult Create(CategoryViewModel viewmodel, HttpPostedFileBase Icon)
    {
        SubCategory subcategory = new SubCategory();
        Category category = categorycontroller.getCategoryByName(viewmodel.SelectedValue);

        viewmodel.subcategory.Category = category;
        subcategory = viewmodel.subcategory;
        category.Subcategories.Add(subcategory);

        if (Icon != null && Icon.ContentLength > 0)
        {
            var fileName = Path.GetFileName(Icon.FileName);

            var path = Path.Combine(Server.MapPath("../../Content/icons/"), fileName);
            Icon.SaveAs(path);
            subcategory.Icon = fileName;
        }

        if (ModelState.IsValid)
        {
            subcategorydb.categories.Attach(category);
            subcategorydb.subcategories.Add(subcategory);
            subcategorydb.SaveChanges();
            return RedirectToAction("Index");  
        }

        return View(subcategory);
    } 
```

这是我的视图模型：

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Web;
using System.Data.Entity;
using System.Web.Mvc;
using SkyLearn.Areas.Categories.Controllers;

namespace SkyLearn.Areas.Categories.Models
{
    public class CategoryViewModel
    {
        public List<SelectListItem> PossibleValues { get; set; }
        public string SelectedValue { get; set; }
        public SubCategory subcategory { get; set; }

        public CategoryController categorycontroller;

        public CategoryViewModel()
        {
            PossibleValues = new List<SelectListItem>();
        }
    }
} 
```

这是我的 Category 和 SubCategory 类：

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Web;
using System.Data.Entity;

namespace SkyLearn.Areas.Categories.Models
{
    public class Category
    {
        public int ID { get; set; }
        public string Title { get; set; }
        public string Icon { get; set; }
        public string Description { get; set; }
        public List<SubCategory> Subcategories;

        public Category()
        {
            Subcategories = new List<SubCategory>();
        }
    }

    public class CategoryDBContext : DbContext
    {
        public DbSet<Category> categories { get; set; }
        public DbSet<SubCategory> subcategories { get; set; }
    }
}

using System;
using System.Collections.Generic;
using System.Linq;
using System.Web;
using System.Data.Entity;
using SkyLearn.Areas.Categories.Controllers;

namespace SkyLearn.Areas.Categories.Models
{
    public class SubCategory
    {
        public int ID { get; set; }
        public string Title { get; set; }
        public string Icon { get; set; }
        public string Description { get; set; }
        public int CategoryID { get; set; }
        public Category Category { get; set; }
    }

    public class SubCategoryDBContext : DbContext
    {
        public DbSet<SubCategory> subcategories { get; set; }
        public DbSet<Category> categories { get; set; }
    }
} 
```

我搜索了许多网站以获取有关此问题的信息，但找不到太多帮助。这里有人能够识别我的问题吗？

如在此屏幕截图中所见，该对象已通过各种方式正确引用。但是当我下次加载数据时，对象引用消失了。所有其他属性仍然存在并按应有的方式保存： ![显示我的保存过程调试的图像](../Images/02ad35b2d9e142be4ae601f2509cf552.png)

感谢 AronChan

//// 更新 //// 我现在收到以下错误：

> 无法插入外键值，因为对应的主键值不存在。[ 外键约束名称 = SubCategory_Category ]

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-02T14:01:30.450

您的类别对象不会被保存，因为它未附加到您添加子类别的 DbContext。子类别可能知道参考，但类别不会。如果有一个查找表（如果它是多对多的，则必须有），我看不到该记录将如何保存。尝试附加类别，添加子类别，然后保存。就我个人而言，我一直将多对多查找表设置为它们自己的实体。与将所有控制权交给 EF 相比，可视化实际发生的事情要容易一些。

此外，如果您首先使用代码，请确保您的 EntityConfigurations 是正确的。尝试在您的上下文中运行 EdmxWriter 以确保数据模型看起来完全符合您的要求。

# url - 重写子域的规则

> ID：10412202
> 
> 赞同：0
> 
> 时间：2012-05-02T10:47:13.347
> 
> 标签：url, rewrite, subdomain

我想重写规则以使 url 像

[http://abc.xyz.com](http://abc.xyz.com)

代替

[http://xyz.com/subfolder/anyfilename.php?pagename=abc](http://xyz.com/subfolder/anyfilename.php?pagename=abc)

请告诉我如何在 php 中重写 url

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-02T10:54:44.900

网址重写总是必须由您的网络服务器以某种方式处理。如果您使用 Apache 作为网络服务器，请查找“通配符子域”。[更好的是：我在 SO: .htaccess Wildcard Subdomains](https://stackoverflow.com/questions/1059441/htaccess-wildcard-subdomains)上发现了一个类似的（实际上就是你要找的）案例。

# ios - IOS键盘上的HTML5文本字段：如何使用回车键跳转到下一个字段，使键盘保持打开状态

> ID：10412205
> 
> 赞同：2
> 
> 时间：2012-05-02T10:47:21.980
> 
> 标签：ios, html, keyboard

我正在实现一个 HTML5/javascript“移动”站点，并且我有一些文本字段，用户应该能够使用“输入”从一个文本字段跳转到另一个文本字段。在最后一个文本字段（当满足某些特定要求时），用户将此“表单”发送到服务器。我使用 javascript 实现了这一点，捕获了 enter 键并将焦点设置在下一个文本字段上。它在 pc 上完美运行，但在 ios 上，在执行第一个“输入”并将焦点设置在下一个文本字段上之后，ios 键盘关闭并且没有文本字段被聚焦。

有任何想法吗？

# iphone - 如何从 CGImage 获取原始像素数据

> ID：10412206
> 
> 赞同：14
> 
> 时间：2012-05-02T10:47:24.803
> 
> 标签：iphone, objective-c

如何在缩放和移动后获取 UIImage 的像素数据，我想获取 CGImage 像素数据，然后从 CGImage 像素数据中获取 UIImage。我们该怎么做呢？

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2012-05-02T10:53:29.263

您可以通过调用获取原始数据

```
CFDataRef rawData = CGDataProviderCopyData(CGImageGetDataProvider(aCGImageRef)); 
```

您可以像这样逐步遍历像素：

```
UInt8 * buf = (UInt8 *) CFDataGetBytePtr(rawData); 
CFIndex length = CFDataGetLength(rawData);

for(unsigned long i=0; i<length; i+=4)
{
    int r = buf[i];
    int g = buf[i+1];
    int b = buf[i+2];
     }
CFRelease(rawData); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-02T11:59:23.547

尝试这个。这将为您提供图像选定像素的偏移、Alpha、RGB 颜色等。

***源代码：-***

```
- (void)touchesBegan:(NSSet *)touches withEvent:(UIEvent *)event 
{
UITouch *touch = [[event allTouches] anyObject]; 

CGPoint startLocation   = [touch locationInView:self.view];

    if ([touch view] == YourImageView)
    {
        CGPoint location = [touch YourImageView];
        [self getPixelColorAtLocation:location];
        if((alpha==255)||(alpha==0))
        {
            //perform Your task
        }
    }
} 

- (UIColor*) getPixelColorAtLocation:(CGPoint)point 
{

UIColor* color = nil;

CGImageRef inImage;

inImage = YourImageView.image.CGImage;

// Create off screen bitmap context to draw the image into. Format ARGB is 4 bytes for each pixel: Alpa, Red, Green, Blue
CGContextRef cgctx = [self createARGBBitmapContextFromImage:inImage];
if (cgctx == NULL) { return nil; /* error */ }

size_t w = CGImageGetWidth(inImage);
size_t h = CGImageGetHeight(inImage);
CGRect rect = {{0,0},{w,h}};

// Draw the image to the bitmap context. Once we draw, the memory 
// allocated for the context for rendering will then contain the 
// raw image data in the specified color space.
CGContextDrawImage(cgctx, rect, inImage); 

// Now we can get a pointer to the image data associated with the bitmap
// context.
unsigned char* data = CGBitmapContextGetData (cgctx);
if (data != NULL) {
    //offset locates the pixel in the data from x,y. 
    //4 for 4 bytes of data per pixel, w is width of one row of data.
    int offset = 4*((w*round(point.y))+round(point.x));
    alpha =  data[offset]; 
    int red = data[offset+1]; 
    int green = data[offset+2]; 
    int blue = data[offset+3]; 
    NSLog(@"offset: %i colors: RGB A %i %i %i  %i",offset,red,green,blue,alpha);
    color = [UIColor colorWithRed:(red/255.0f) green:(green/255.0f) blue:(blue/255.0f) alpha:(alpha/255.0f)];
}

// When finished, release the context
//CGContextRelease(cgctx); 
// Free image data memory for the context
if (data) { free(data); }

return color;
}

- (CGContextRef) createARGBBitmapContextFromImage:(CGImageRef)inImage 
{
CGContextRef    context = NULL;
CGColorSpaceRef colorSpace;
void *          bitmapData;
int             bitmapByteCount;
int             bitmapBytesPerRow;

// Get image width, height. We'll use the entire image.
size_t pixelsWide = CGImageGetWidth(inImage);
size_t pixelsHigh = CGImageGetHeight(inImage);

// Declare the number of bytes per row. Each pixel in the bitmap in this
// example is represented by 4 bytes; 8 bits each of red, green, blue, and
// alpha.
bitmapBytesPerRow   = (pixelsWide * 4);
bitmapByteCount     = (bitmapBytesPerRow * pixelsHigh);

// Use the generic RGB color space.
colorSpace = CGColorSpaceCreateDeviceRGB();

if (colorSpace == NULL)
{
    fprintf(stderr, "Error allocating color space\n");
    return NULL;
}

// Allocate memory for image data. This is the destination in memory
// where any drawing to the bitmap context will be rendered.
bitmapData = malloc( bitmapByteCount );
if (bitmapData == NULL) 
{
    fprintf (stderr, "Memory not allocated!");
    CGColorSpaceRelease( colorSpace );
    return NULL;
}

// Create the bitmap context. We want pre-multiplied ARGB, 8-bits 
// per component. Regardless of what the source image format is 
// (CMYK, Grayscale, and so on) it will be converted over to the format
// specified here by CGBitmapContextCreate.
context = CGBitmapContextCreate (bitmapData,
                                 pixelsWide,
                                 pixelsHigh,
                                 8,      // bits per component
                                 bitmapBytesPerRow,
                                 colorSpace,
                                 kCGImageAlphaPremultipliedFirst);
if (context == NULL)
{
    free (bitmapData);
    fprintf (stderr, "Context not created!");
}

// Make sure and release colorspace before returning
CGColorSpaceRelease( colorSpace );

return context;
} 
```

希望能帮助到你。谢谢 ：）

# php - php表单不适用于隐藏字段

> ID：10412207
> 
> 赞同：0
> 
> 时间：2012-05-02T10:47:29.923
> 
> 标签：php, html, forms

不确定，但这可能是 php.ini 中的错误。这是我的虚拟代码。

```
<script language="javascript">
function fb_logout() {
document.getElementById("hidden_logout_id").value
alert(document.getElementById("hidden_logout_id").value);
document.getElementById("form_1").submit();
}
</script>

echo "<form id=\"form_1\" action=\"" . $_SERVER['PHP_SELF'] . "\" method=\"post\">";
echo "<input type=\"hidden\" id=\"hidden_logout_id\" name=\"hidden_logout_name\" value=\"1\"/>";
echo "<input type=\"text\" id=\"h_logout2\" name=\"h_logout2\" value=\"1\"/>";    
echo "</form>";
var_dump($_POST);
echo "<span onclick=\"fb_logout();\">Logout</span>"; 
```

通过单击跨度进行发布时，隐藏的值和表单内的文本不会被发布：var_dump($_POST) 显示一个空变量。但奇怪的是，如果我从表单中删除隐藏项（或者我只是将它放在表单之外）它会起作用，并且它会在 $_POST 中传递表单中剩余的输入文本的值。这是否与从表单外的事件修改隐藏有关？

任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-02T11:01:18.983

此代码可能会有所帮助..

```
<?php
    if(isset($_POST['hidden_logout_name'])) var_dump($_POST);   
?>
<script language="javascript">
function fb_logout() {    
    alert(document.getElementById("hidden_logout_id").value);
    document.getElementById("hidden_logout_id").value = "hidden_logout_value";
    document.getElementById("form_1").submit();
}
</script>

<form id="form_1" action="" method="post">
    <input type="hidden" id="hidden_logout_id" name="hidden_logout_name" value=""/>
    <input type="text" id="h_logout2" name="h_logout2" value="1"/>
</form>
<button onclick="fb_logout();">Logout</button> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-02T11:25:53.907

```
document.getElementById("hidden_logout_id").value 
```

您还没有对此行执行任何操作，或者将值分配给 this 或将其值分配给变量。

```
var logout_value=document.getElementById("hidden_logout_id");
alert(logout_value.value);
document.getElementById("form_1").submit(); 
```

愿这对你有所帮助。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-02T11:06:15.233

look for the

```
hidden_logout_name 
```

instead of

```
hidden_logout_id 
```

so your value is in the

```
$_POST['hidden_logout_name'] 
```

# java - 对 Java 枚举值的引用是全局的吗？

> ID：10412208
> 
> 赞同：1
> 
> 时间：2012-05-02T10:47:34.173
> 
> 标签：java, enums, synchronization, locking

假设我有一个具有多个值的枚举，例如：

```
public enum Category {
  A, B, C, D;
} 
```

并且想创建一个锁定机制，以便我们一次只处理每个类别的一个项目。我的第一个想法是做这样的事情：

```
Set categories = new HashSet();
for (Category cat : Category.values() {
  categories.put(cat);
} 
```

然后当我需要获取锁时，我执行以下操作：

```
synchronized(categories.get(category)) {
  ....
} 
```

这会起作用还是都是对全局枚举值的引用，所以如果其他一些线程在其他地方做了同样的事情，它们会互相阻塞吗？

谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-02T10:51:29.673

每个枚举值都是一个[单例](https://en.wikipedia.org/wiki/Singleton_pattern)。加载枚举类的[类加载器](https://en.wikipedia.org/wiki/Java_Classloader)只存在一个实例。所以是的，如果两个线程使用枚举值作为锁，它们将使用相同的锁，从而相互阻塞。

旁注：如果您使用有效的编译 Java 代码，您的问题会更清楚。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-02T10:51:45.940

只有一个`Category.A`实例，所以所有实例`synchronized(Category.A)`都会互相阻挡，这就是你对你的集合所做的事情。

您可以使用与您的枚举关联的私有最终[EnumMap](http://docs.oracle.com/javase/7/docs/api/java/util/EnumMap.html)，用 s 填充它`new Object()`，确保您不修改映射，并使用与类别关联的对象作为该类别的锁定。这样你就可以确定锁只用于那段代码。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-02T10:50:20.050

您的枚举将在您的项目（包）中可见。如果您需要在其他地方使用此逻辑，则需要添加对该项目的引用。

# java - 防止选择 SmartGWT IPickTreeItem 的某些值

> ID：10412216
> 
> 赞同：0
> 
> 时间：2012-05-02T10:48:15.093
> 
> 标签：java, gwt, smartgwt

我正在尝试清除**IPickTreeItem**上用户选择的值。

这是我发现**限制用户选择某些树根值**（不是全部）的唯一解决方案。

更清楚地说，似乎调用 event.cancel() 并不能阻止事件冒泡。

难道我做错了什么 ？

```
TreeNode treenode = new TreeNode("root", new TreeNode("Operation A"),
new TreeNode("Operation B"));

final DynamicForm dynamicForm = new DynamicForm();

Tree tree = new Tree();
tree.setRoot(treenode);

final IPickTreeItem pickTreeItem = new IPickTreeItem();
pickTreeItem.setValueTree(tree);
pickTreeItem.addChangeHandler(new ChangeHandler()
{
    @Override
    public void onChange(ChangeEvent event)
    {
        pickTreeItem.clearValue() // Not clearing the value
        pickTreeItem.setValue((String)null) // Not working neither
        event.cancel() // Not seeming to work...
    }
});

dynamicForm.setItems(pickTreeItem);
dynamicForm.draw(); 
```

这也**不起作用**：

```
pickTreeItem.setInputTransformer(new FormItemInputTransformer()
{

    @Override
    public Object transformInput(DynamicForm form, FormItem item,
    Object value, Object oldValue)
    {
        return "Desired New Value (not working)...";
    }
}); 
```

这很奇怪，因为**它使用外部 Button 来清除值**（在 picktreeitem 处理程序之外）

```
Button bt = new Button("click");
bt.addClickHandler(new ClickHandler()
{
    @Override
    public void onClick(ClickEvent event)
    {
        pickTreeItem.setValue((Object) null);
    }
}); 
```

## 预期行为

我的树：

-aaaa
----bbbb
----cccc
-dddd
----eeee
----ffff

如果用户选择“aaaa”，则 PickTreeItem 值应恢复为默认值（“选择一个值”），可选择通知用户他不能选择“aaaa”。

PickTreeItem 应该接受“dddd”作为有效的选择值。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-17T00:01:35.647

与所有 FormItems 一样，**event.cancel()**是禁止更改的正确方法。有一个框架级别的错误阻止了它的正确行为，现在已经更正了。

在同构论坛上查看[此线程](http://forums.smartclient.com/showthread.php?t=21927)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-05T01:05:11.007

我知道这与您要实现的目标不完全相同，但您可以考虑定义一个 CustomValidator，它读取选定的值并返回 false 和适当的消息，当父值之一不应该是时，被选中。为此，您必须设置 pickTreeItem.setCanSelectParentItems(Boolean.TRUE) 以允许选择父项，并设置 pickTreeItem.setValidateOnChange(Boolean.TRUE) 以在选择时验证所选值。

# c++ - C++ 程序是否有可能在不同的 x86 硬件上给出不同的结果？

> ID：10412220
> 
> 赞同：0
> 
> 时间：2012-05-02T10:48:42.127
> 
> 标签：c++

我想知道是否有人对构建在 x86 系统上的 C++ 程序有经验，并且在为 x86 系统（但对于其他处理器硬件、fe AMD、Intel）发布它之后，一些结果会有所不同。所以唯一改变的是硬件。

我想到的两件事是：

1.  浮点标准 IEEE（我不知道处理器制造商遵守的严格程度）（特别是对于迭代求解器，如 FEM 求解器，其中一个结果是基于前一个结果的结果。所以小的差异可能导致不同的结果, fe 10000 次迭代。）

2.  多线程

我现在已经多次听到这样的事情了。我只是对是否有与该主题相关的一些经过验证的事实感兴趣。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-02T11:13:39.597

对于初学者来说，总是存在[Pentium FDIV 错误](http://en.wikipedia.org/wiki/Pentium_FDIV_bug)，尽管一些编译器可以考虑到这一点。

一些编译器可以生成代码以利用 SIMD 指令，因此在执行浮点时可能会在 SIMD 和非 SIMD 版本之间给出不同的结果。

还有一些指令在不同的 CPU 上表现不同，例如 pushf/popf。

所以，是的，程序可以在不同的硬件上表现不同（毕竟，识别 CPU 的程序是如何工作的）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-02T11:15:07.660

不打算先讨论（1）案例，但很确定存在许多以不同方式表现的命令（通常是内部/未记录的）。

但是关于多线程（2） - 我可以告诉同一个处理器在同一个进程上的行为会产生不同的结果。一般来说，多线程（特别是在超线程和多核处理器上）是随机的。这取决于很多因素——不仅是制造商，还取决于进程的加载、DMA 控制器的种类……甚至还有特殊的线程技术（随机线程提升）——它调用随机生成器来提高多线程引擎的响应。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-02T22:59:20.973

这被称为竞争条件。（[http://en.wikipedia.org/wiki/Race_condition](http://en.wikipedia.org/wiki/Race_condition)）

# spring - 类路径，文件系统有什么区别？

> ID：10412225
> 
> 赞同：16
> 
> 时间：2012-05-02T10:48:56.543
> 
> 标签：spring, spring-mvc

我知道：

1.  `ApplicationContext context = new ClassPathXmlApplicationContext("bean.xml");`

    从位于类路径中的 XML 文件加载上下文定义，将上下文定义视为类路径资源。

2.  `ApplicationContext context = new FileSystemXmlApplicationContext("bean.xml");`

    从文件系统中的 XML 文件加载上下文定义。

3.  `XmlWebApplicationContext`

    从包含在 Web 应用程序中的 XML 文件加载上下文定义。

但是，这到底是什么意思？？

谢谢 ：）

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2012-05-02T11:11:58.620

*   `ClassPathXmlApplicationContext`将从您的类路径中读取文件。它们必须在`classes`您的 Web 应用程序的文件夹中或`jar`在您的`lib`文件夹中。

*   `FileSystemXmlApplicationContext`可以访问您的所有文件系统，例如`c:/config/applicationContext.xml`.

*   `XmlWebApplicationContext`当然可以访问包含在您的 Web 应用程序中的文件，但这不是最重要的事情。它实现了[WebApplicationContext](http://static.springsource.org/spring/docs/3.0.x/javadoc-api/org/springframework/web/context/WebApplicationContext.html)，这意味着它将检测[ServletContextAware](http://static.springsource.org/spring/docs/3.0.x/javadoc-api/org/springframework/web/context/ServletContextAware.html) bean，注册自定义范围（请求、会话……）等等。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-02-12T03:25:38.707

FileSystemXmlApplicationContext - 您需要提供 xml bean ClassPathXmlApplicationContext 的完整完整路径 - 在这种情况下，您不需要设置完整路径，只要设置了类路径

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-11-10T10:12:04.383

我认为上面的意见可能有问题，`FileSystemXmlApplicationContext` **无法访问您的整个文件系统**，它只能扫描您的整个项目文件夹。为了证明我的结论我举了一个例子，第一次使用`ClasspathXmlApplicationContext`一切正常，第二次我将 beans.xml 文件移动到我的桌面文件夹，因此项目 hiracy 中没有 beans.xml 文件，并将 ClassPathXmlApplicationContext 更改为`FileSytemXmlApplicationContext`出现问题，错误跟踪如下：

```
 INFO: Loading XML bean definitions from file [/Users/crabime/Development/IdeaProjects/springInterview/Users/crabime/Desktop/beans.xml]
Exception in thread "main" org.springframework.beans.factory.BeanDefinitionStoreException: IOException parsing XML document from file [/Users/crabime/Development/IdeaProjects/springInterview/Users/crabime/Desktop/beans.xml]; nested exception is java.io.FileNotFoundException: Users/crabime/Desktop/beans.xml (No such file or directory) 
```

所以 FileSystemXmlApplicationContext 只能检测当前项目的所有文件夹。例如，您`config`在项目根目录下创建一个名为的目录，您可以更改主类代码，如下所示：

```
ApplicationContext atx = new FileSystemXmlApplicationContext("/config/beans.xml"); 
```

一切都会好起来的。因此，如果所有喜欢 sinuhepop 的人都说我认为应该有一些东西需要改变。

# windows-phone-7 - Scrollviewer 和 SIP 问题（WP7.5 Mango）

> ID：10412230
> 
> 赞同：10
> 
> 时间：2012-05-02T10:49:18.470
> 
> 标签：windows-phone-7, scrollviewer, soft-keyboard

我正在处理一个包含注册表单的应用程序。该表单包含多个文本输入框，因此使用 ScrollViewer 允许它们全部显示在一个页面上。

以下是我正在使用的 XAML 代码的精简示例：

```
<Grid x:Name="LayoutRoot" Background="Transparent">
    <Grid.RowDefinitions>
        <RowDefinition Height="Auto"/>
        <RowDefinition Height="*"/>
    </Grid.RowDefinitions>

    <StackPanel x:Name="TitlePanel" Grid.Row="0" Margin="12,17,0,28">
        <TextBlock x:Name="ApplicationTitle" Text="SCROLLVIEWER TEST" Style="{StaticResource PhoneTextNormalStyle}"/>
        <TextBlock x:Name="PageTitle" Text="registration" Margin="9,-7,0,0" Style="{StaticResource PhoneTextTitle1Style}"/>
    </StackPanel>

    <ScrollViewer Grid.Row="1">
        <StackPanel>
            <TextBlock Text="Hello" Margin="12,0,0,0"/>
            <TextBox />
            <TextBlock Text="Hello1" Margin="12,0,0,0"/>
            <TextBox />
            <TextBlock Text="Hello2" Margin="12,0,0,0"/>
            <TextBox />
            <TextBlock Text="Hello3" Margin="12,0,0,0"/>
            <TextBox />
            <TextBlock Text="Hello4" Margin="12,0,0,0"/>
            <TextBox />
            <TextBlock Text="Hello5" Margin="12,0,0,0"/>
            <TextBox />
            <TextBlock Text="Hello6" Margin="12,0,0,0"/>
            <TextBox />
            <TextBlock Text="Hello7" Margin="12,0,0,0"/>
            <TextBox />
            <TextBlock Text="Hello8" Margin="12,0,0,0"/>
            <TextBox />
            <TextBlock Text="END" Margin="12,0,0,0"/>
            <TextBox />
        </StackPanel>
    </ScrollViewer>
</Grid> 
```

（请注意，ScrollViewer 位于网格单元格内，这意味着标题面板应始终保持 OnScreen）

滚动效果很好，所以这不是问题。但是，当用户选择文本框输入数据（即软键盘打开）时，系统会将整个页面的内容（包括注册标题面板）推送到周围，这不是预期的行为。[查看 Windows Phone 上的人脉应用并尝试添加新联系人。这包含类似的结构，但 ScrollViewer 仅通过向上推滚动查看器中的内容来正确运行]

**测试用例**

*   选择一个在屏幕顶部附近可见的文本框以打开键盘。
*   尝试在打开键盘的情况下滚动到页面底部。
*   页面底部的项目无法访问。

或者

*   选择一个在屏幕底部附近可见的文本框。
*   整个页面的内容被向上推。
*   尝试在打开键盘的情况下滚动到页面顶部。
*   页面顶部的项目无法访问，并且在关闭键盘之前，标题面板永远不会重新出现。

任何有关解决此问题的帮助将不胜感激。谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-05T14:16:57.040

我开发的一个应用程序也遇到了同样的问题，我处理它的方式是找出包含输入`textbox`s 的面板的自动高度，然后手动设置高度并将大约 400 - 500 px 添加到底部使其滚动良好。效果非常流畅，不会让你的 UI 看起来“hackish”恕我直言。

在您的情况下，您将必须找出第 1 行的自动高度，`LayoutRoot` `Grid`然后`RowDefinition`手动设置高度 - 记住添加额外的 400 像素（或任何适合您情况的值）。

为了便于输入，我随后处理了每个`OnKeyDown`事件的每个事件，以便在点击时`TextBox`将焦点更改为下一个。最后，我将焦点设置为 this.focus()，它将焦点设置为 Page 并隐藏 SIP。`TextBox``Enter``TextBox`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-07-10T09:45:28.997

请看看我的小图书馆 - [https://siphelper.codeplex.com/](https://siphelper.codeplex.com/)

它修改了scrollviewer的高度，内容可以滚动到最上面/最下面的点。

如果您有任何建议 - 请随时与我联系。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-29T14:45:38.967

我认为你可以通过从另一个角度来解决这个问题。手机将向上滚动页面，这样 SIP（​​软件键盘）就不会覆盖有焦点的 TextBox。

但是，您可以通过检测 ScrollViewer 中包含的顶部元素上的触摸事件来强制 SIP 隐藏，例如：

```
<ScrollViewer Grid.Row="1">
    <StackPanel ManipulationDelta="OnScrollViewerGridManipulationDelta">` 
```

然后，通过将焦点赋予隐藏按钮（大小为 0x0 像素），这将强制 SIP 关闭。然后，您的用户就可以按预期上下滚动滚动查看器......

```
 private void OnScrollViewerGridManipulationDelta(object sender, System.Windows.Input.ManipulationDeltaEventArgs e)
    {
        // This will hide the SIP if it is currently showing. 
        // We can't do this directly, but we can force this by taking focus away from any of the TextBoxes that may have it.
        this.hiddenButton.Focus();
    } 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-31T12:56:22.387

问题是 ScrollViwer 的高度在键盘出现后没有被修改，所以它被剪掉了。一种解决方案是修改 scrollviwer 的高度（根据键盘高度），然后重新定位它（这可能会让您有些头疼）。

另一个问题是知道键盘何时出现 - 您可以在所有 TextBox 上注册 GotFocus/LostFocus 事件，但这不是一个很好的解决方案。这可能对您有所帮助：http: [//blogs.msdn.com/b/jaimer/archive/2010/11/05/guessing-if-the-sip-is-visible-in-a-windows-phone-application.aspx](http://blogs.msdn.com/b/jaimer/archive/2010/11/05/guessing-if-the-sip-is-visible-in-a-windows-phone-application.aspx)

希望这有所帮助 ：）

# c# - 扩展方法必须在非泛型静态类中定义

> ID：10412233
> 
> 赞同：22
> 
> 时间：2012-05-02T10:49:31.647
> 
> 标签：c#, .net, compiler-errors, extension-methods

错误：

```
public partial class Form2 : Form 
```

可能的原因：

```
public static IChromosome To<T>(this string text)
{
    return (IChromosome)Convert.ChangeType(text, typeof(T));
} 
```

尝试过（没有 static 关键字）：

```
public IChromosome To<T>(this string text)
{
    return (IChromosome)Convert.ChangeType(text, typeof(T));
} 
```

* * *

## 回答 #1

> 赞同：47
> 
> 时间：2013-10-21T21:34:58.327

如果您从参数中删除“this”，它应该可以工作。

```
public static IChromosome To<T>(this string text) 
```

应该：

```
public static IChromosome To<T>(string text) 
```

* * *

## 回答 #2

> 赞同：19
> 
> 时间：2012-05-02T10:50:49.160

包含扩展的类必须是静态的。你的在：

```
public partial class Form2 : Form 
```

这不是一个静态类。

您需要像这样创建一个类：

```
static class ExtensionHelpers
{
    public static IChromosome To<T>(this string text) 
    { 
        return (IChromosome)Convert.ChangeType(text, typeof(T)); 
    } 
} 
```

包含扩展方法。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2018-01-08T17:33:09.810

我的问题是因为我在部分类中创建了一个静态方法：

```
public partial class MainWindow : Window{

......

public static string TrimStart(this string target, string trimString)
{
    string result = target;

    while (result.StartsWith(trimString)){
    result = result.Substring(trimString.Length);
    }

    return result;
    }
} 
```

当我删除该方法时，错误就消失了。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-02T10:52:17.220

因为您的包含类不是静态的，所以扩展方法应该在静态类中。该类也应该是非嵌套的。[扩展方法（C# 编程指南）](http://msdn.microsoft.com/en-us/library/bb383977.aspx)

# cordova - Phonegap getCurrentPosition 和 watchPosition

> ID：10412239
> 
> 赞同：0
> 
> 时间：2012-05-02T10:49:52.260
> 
> 标签：cordova

我读了很多关于这个的帖子。我没有找到解决办法。我需要的是更新我当前的位置。所以如果我要继续前进，我需要知道（每 5 秒）我的新位置。我了解 watchPosition 不适用于 IOS。

我从官方示例开始，我与 setInterval 混合

```
// Wait for PhoneGap to load
        //
        document.addEventListener("deviceready", onDeviceReady, false);

        // PhoneGap is ready
        //
        function onDeviceReady() {
            setInterval(navigator.geolocation.getCurrentPosition(onSuccess, onError),5000);
        }

        // onSuccess Geolocation
        //
        function onSuccess(position) {
            alert("ENTRY");
            var element = document.getElementById('geolocation');
            element.innerHTML = 'Latitude: '           + position.coords.latitude              + '<br />' +
            'Longitude: '          + position.coords.longitude             + '<br />' +
            'Altitude: '           + position.coords.altitude              + '<br />' +
            'Accuracy: '           + position.coords.accuracy              + '<br />' +
            'Altitude Accuracy: '  + position.coords.altitudeAccuracy      + '<br />' +
            'Heading: '            + position.coords.heading               + '<br />' +
            'Speed: '              + position.coords.speed                 + '<br />' +
            'Timestamp: '          + new Date(position.timestamp)          + '<br />';
        }

        // onError Callback receives a PositionError object
        //
        function onError(error) {
            alert('code: '    + error.code    + '\n' +
                  'message: ' + error.message + '\n');
        } 
```

结果是我只看到所有信息的一次。然后停下来。有人可以帮助我吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-23T16:20:53.947

我有同样的问题，无论网络应用程序是否在 IOS6 上，监视位置回调都不会触发。看来 IOS6 已经破坏了 watchPosition。开始时它会触发一次或两次，仅此而已。一旦进一步调用 watch 或 getposition 失败，就不会触发成功或失败回调。

我正在寻找的解决方法是打开 IOS 6 中引入的地图应用程序，然后点击位置箭头来找到自己。尝试此操作后，回调会按预期每隔一秒左右触发一次。

此外，只要您不在使用 GPS 接收器的地方，它似乎就可以保持良好运行。

我作为错误提交给苹果。

我所能收集到的只是地图正在执行一个初始化例程以打开 API ......

WatchPosition 在 IOS6 之前一直运行良好。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-02T11:28:06.530

watchPosition 在 iOS 上使用最新的 Cordova (Phonegap) 对我来说很好用。也许您应该再试一次该方法，因为它似乎正是您想要的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-10T14:11:45.063

我认为问题在于您将*value*传递给 setInterval 而不是*function*。你应该有更多这样的东西：

```
setInterval( function(){
    navigator.geolocation.getCurrentPosition(onSuccess, onError);
},
5000); 
```

正如您现在所拥有的，getCurrentPosition 运行一次，将位置返回给 setInterval 函数......然后每 5 秒调用一次位置*值*（不是 getCurrentPosition*函数*），这毫无意义。

# php - 使用变量创建 SQL

> ID：10412246
> 
> 赞同：0
> 
> 时间：2012-05-02T10:50:13.930
> 
> 标签：php, html, mysqli

我有一个从 $_POST 函数接收数组的函数，然后使用索引中包含的索引和值来创建 SQL。我的问题是我可以让函数正确回显 SQL，但我无法创建变量。我的功能如下

```
 function createcontactsArray($sql,Array $contactsArray){
         //array has already been cleaned from sql injections

        //delete null variables and the value of the submit button        
        foreach ($contactsArray as $key => $value) {

            if($value == ""||$value=="continue") {
                unset($contactsArray[$key]);
            }

        }

        echo "INSERT INTO users(";
        //create list of tables to use in the database
        foreach ($contactsArray as $key => $value) {

            if ($value == end($contactsArray))                {
                echo $key;
            } else                {
                echo $key.",";
            }

        }
        echo ') VALUES (';

        //create list of tables to use in the database
        //$newcontactsArray = array_values($contactsArray);
        foreach ($contactsArray as $key => $value) {

            if ($value == end($contactsArray))                {
                echo '"'.$value.'"';
            } else                {
               echo '"'.$value.'"'.",";
            }

        }

        echo ');'; 
```

}

例如，如果您运行此脚本并将关联数组传递给`$contacts = array("name"=>"Peter griffin","town"=>"Quahogn");`它，它将输出以下`INSERT INTO users (name,contacts) VALUES ("Peter griffin","Quahog")`. 但是我希望该函数创建一个类似的 sql`$sql = INSERT INTO users (name,contacts) VALUES ("Peter griffin","Quahog")`以便输出我只是说`echo $sql;`谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-02T10:53:33.363

只是不要回显所有部分，而是将它们收集在字符串变量中。所以，而不是：

```
echo 'Text';
echo $variable; 
```

做类似的事情

```
$output = 'Text';
$output .= $variable; 
```

在函数结束时返回该输出

```
return $output; 
```

请注意，`.=`将旧值与新值连接起来。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-02T10:55:39.113

```
 function createcontactsArray($sql,Array $contactsArray){
         //array has already been cleaned from sql injections

        //delete null variables and the value of the submit button        
        foreach ($contactsArray as $key => $value) {

            if($value == ""||$value=="continue") {
                unset($contactsArray[$key]);
            }

        }

        $sql = "INSERT INTO users(";
        //create list of tables to use in the database
        foreach ($contactsArray as $key => $value) {

            if ($value == end($contactsArray))                {
                $sql .= $key;
            } else                {
                $sql .= $key.",";
            }

        }
        $sql .= ') VALUES (';

        //create list of tables to use in the database
        //$newcontactsArray = array_values($contactsArray);
        foreach ($contactsArray as $key => $value) {

            if ($value == end($contactsArray))                {
                $sql .= '"'.$value.'"';
            } else                {
               $sql .= '"'.$value.'"'.",";
            }

        }

        $sql .= ');';

        return $sql; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-02T10:57:06.193

这是正确的方法。*安全*干净

```
function dbSet($fields,$source=array()) {
  global $mysqli;
  if (!$source) $source = &$_POST;
  $set='';
  foreach ($fields as $field) {
    if (isset($source[$field])) {
      $set.="`$field`='".mysqli_real_escape_string($mysqli,$source[$field])."', ";
    }
  }
  return substr($set, 0, -2); 
} 
```

像这样使用

```
$query  = "UPDATE $table SET ".dbSet(array("name","contacts")); 
```

请注意，您应该始终对允许的字段名进行硬编码，而不是从 $_POST 中获取它们，否则网站将在几秒钟内被黑客入侵。

对于 mysql，此函数可用于 INSERT 或 UPDATE 查询。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-02T10:57:08.180

```
function createcontactsArray($sql,Array $contactsArray){
         //array has already been cleaned from sql injections
         $sql = '';
        //delete null variables and the value of the submit button        
        foreach ($contactsArray as $key => $value) {

            if($value == ""||$value=="continue") {
                unset($contactsArray[$key]);
            }

        }

        $sql .= "INSERT INTO users(";
        //create list of tables to use in the database
        foreach ($contactsArray as $key => $value) {

            if ($value == end($contactsArray))                {
                $sql .= $key;
            } else                {
                $sql .= $key.",";
            }

        }
        $sql .= ') VALUES (';

        //create list of tables to use in the database
        //$newcontactsArray = array_values($contactsArray);
        foreach ($contactsArray as $key => $value) {

            if ($value == end($contactsArray))                {
                $sql .= '"'.$value.'"';
            } else                {
               $sql .= '"'.$value.'"'.",";
            }

        }

        $sql .= ');';

        echo $sql; 
```

# ruby-on-rails - 避免在 Rails 清单文件中重复 javascript 版本号

> ID：10412252
> 
> 赞同：0
> 
> 时间：2012-05-02T10:50:23.847
> 
> 标签：ruby-on-rails, ruby, manifest, erb

我们需要许多不同的清单文件，以便仅为我们网站的各种功能区域提供适当的 JS 文件，但是我目前必须在每个文件中复制 JS 文件名和版本号，因此我们的清单看起来像：

libs.js

```
//= require json2
//= require underscore-1.3.1
//= require jquery
//= require jquery-ui-1.8.17.custom.min
//= require jquery_ujs
//= require farbtastic-1.3u.gizmos
//= require bootstrap-2.0.1
//= require highstock-1.1.4.src
//= require exporting-1.1.4.src
//= require modernizr-2.5.3
//= require application
//= require validation
//= require navigation
//= require styles 
```

libs-embedded.js

```
//= require json2
//= require jquery
//= require highstock-1.1.4.src
//= require exporting-1.1.4.src 
```

我试图通过使用这些 .js.erb 等效项更改这些清单文件来解决此问题：

libs.js

```
<%= ManifestHelper.require_json2%>
<%= ManifestHelper.require_underscore%>
<%= ManifestHelper.require_jquery%>
<%= ManifestHelper.require_jquery_ui%>
<%= ManifestHelper.require_jquery_ujs%>
<%= ManifestHelper.require_farbtastic%>
<%= ManifestHelper.require_bootstrap%>
<%= ManifestHelper.require_highstock%>
<%= ManifestHelper.require_exporting%>
<%= ManifestHelper.require_modernizr%>
<%= ManifestHelper.require_application%>
<%= ManifestHelper.require_validation%>
<%= ManifestHelper.require_navigation%>
<%= ManifestHelper.require_styles%> 
```

libs-embedded.js

```
<%= ManifestHelper.require_json2%>
<%= ManifestHelper.require_jquery%>
<%= ManifestHelper.require_highstock%>
<%= ManifestHelper.require_exporting%> 
```

ManifestHelper 类包括以下方法：

```
 def self.require_underscore
    '//= require underscore-1.3.1'
  end 
```

这是为了让我可以在一个地方管理 JS 文件和版本号，即使它们在许多清单文件中使用。

但是，当我尝试这样做时，我的 libs.js 文件看起来像：

```
//= require json2
//= require underscore-1.3.1
//= require jquery
//= require jquery-ui-1.8.17.custom.min
//= require jquery_ujs
//= require farbtastic-1.3u.gizmos
//= require bootstrap-2.0.1
//= require highstock-1.1.4
//= require exporting-1.1.4
//= require modernizr-2.5.3
//= require application
//= require validation
//= require styles
//= require navigation; 
```

这有两个问题。首先出于某种原因引入了分号。第二个是生成的 .js 文件没有填充在 //= 需要指令中定义的连接 js 文件......看起来虽然 .erb 替换发生在 .js.erb 文件中，但它似乎在清单文件通读指令后发生。

我的问题是...任何人都可以提出解决此问题的方法或建议替代解决方案，以停止在我的每个清单中复制 js 文件和版本号...

谢谢，伊恩

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-02T12:39:24.837

一种可能的解决方法是将共享的 javascript 文件移动到“共享”子目录中，然后从您的清单文件中，使用该`require_directory`指令拉入共享文件。

```
//= require_directory shared 
```

这种方法的一个好处是，您只需将 javascript 文件拖放到“共享”目录中，它就可用于所有具有该`require_directory`语句的父清单。没有更新清单或帮助文件。

唯一的潜在问题是，如果您对这些文件有加载顺序依赖关系，则您无法控制共享文件的加载顺序。但这可以通过使用子目录中的[索引清单](http://guides.rubyonrails.org/asset_pipeline.html#using-index-files)来静态列出文件的顺序，然后从父清单指向索引清单来解决这个问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-07T12:23:03.940

我们设法通过使用封装了 javascript 库的 gem 来解决这个问题，例如，我们一直在使用以下 gem： gem 'jquery-rails' gem 'jquery-ui-rails' gem 'twitter-bootstrap-rails' gem 'select2-rails' gem 'underscore-rails' gem 'underscore-string-rails'

然后，这允许您仅使用库的名称在清单中包含相关的 javascript 库。例如： //= 需要 select2 而不是 //= 需要 select2-xyz

显然，gems 做了很多好事，比如管理资产管道集成，但我们并没有我喜欢的所有地方都有库版本号。

# cakephp - Cake Php Validation能否清除输入字段值

> ID：10412257
> 
> 赞同：2
> 
> 时间：2012-05-02T10:50:53.317
> 
> 标签：cakephp, cakephp-1.3

Cake Php Validation能否清除输入字段值

```
var $validate = array(
    'name' => array(
       'isUnique' => array (

           'rule' => 'isUnique',

           'message' => 'This Person name already exists.'
       )
    )
); 
```

如果验证中仍然存在错误，我想清除`name`字段值。是否可以通过 cake php 验证本身来做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-02T14:39:58.400

如果需要，您可以使用自定义验证规则来完成。

```
var $validate = array(
    'name' => array(
       'isUnique' => array (
           'rule' => 'ifNotUniqueClear', // use custom rule defined below
           'message' => 'This Person name already exists.'
       )
    )
);

function ifNotUniqueClear(&$data) {
    $field = key($data);

    // see if the record exists
    $user = $this->find('first', array(
        'conditions' => array(
            $field => $data[$field]
        ),
        'recursive' => -1
    ));

    if ($user) {
        // unset or empty it, your choice
        unset($this->data[$this->alias][$field]);
        return false;
    }

    return true;
} 
```

# jquery - Jquery ScrollTo 问题

> ID：10412259
> 
> 赞同：0
> 
> 时间：2012-05-02T10:51:24.583
> 
> 标签：jquery, html, css, scrollto

我正在使用 Jquery ScrollTo，这样当我单击页面顶部的问题时，它将滚动到问题并在屏幕下方进一步回答。这个功能工作正常（到一点）

现在，当我点击一个问题时，它会在页面的中间滚动，我的导航栏将与问题的一半重叠（我使用的是 twitter bootstrap 固定导航栏）

第二个问题是，当我单击顶部（应该滚动回页面顶部）时，前 3 个问题与导航栏重叠。

如果我从导航栏中删除固定，那么一切正常，但我更愿意保持导航栏固定

我的代码如下

看法

```
<div class="links"> 
```

```
<ul class="top_links"> 

    <li><a href="#1a">Question 1</a></li>
    <li><a href="#1b"> Question 2</a></li>
    <li><a href="#1c"> Question 3</a></li>
    <li><a href="#1d">Question 4</a></li>
    <li><a href="#1e">Question 5</a></li>

</ul>

    </div>
    <ul class="faq">
<li><a name="1a"></a><span class="question">Q: Question 1</span><span        class="answer">Follow the link marked join which will take you to the relevant section.We review each application for membership and aim to let you know within qo working days.</span><div class="top"><a href="#top">Top ^</a></div></li>

<li><a name="1b"></a><span class="question">Q:Question 2</span><span class="answer">A:  Follow the link marked Forensic Odontologist list which will take you to the page where Odontologists are listed by region with full contact details..</span><div class="top"><a href="#top">Top ^</a></div></li>

<li><a name="1c"></a><span class="question">Q: Question 3</span><span class="answer">A: Unfortunately the subject is case dependent, which cannot be predicted. It is not a full time discipline. For this reason it is generally not possible to shadow an Odontologist - sorry.</span><div class="top"><a href="#top">Top ^</a></div></li>

<li><a name="1d"></a><span class="question">Q: Question 4</span><span class="answer">A: You should look at the available courses by following the link marked courses and then contact the particular institution directly and not through BAFO.</span><div class="top"><a href="#top">Top ^</a></div></li>

<li><a name="1e"></a><span class="question">Q:Question 5</span><span        class="answer">A: Nunc non orci eget odio suscipit rutrum. Nullam quam neque, tempus at, semper in, semper eu, mi. Nulla eu turpis vitae arcu sagittis iaculis. Fusce ut nunc vel ligula convallis vulputate. Aliquam feugiat dui in risus. Sed hendrerit. Praesent mollis, ligula imperdiet viverra faucibus, diam turpis ullamcorper ipsum, eget posuere velit tellus et turpis. Vivamus facilisis est nec libero. Phasellus at velit. Vivamus sed mauris.</span><div class="top"><a href="#top">Top ^</a></div></li> 
```

jQuery

```
$(document).ready(function () {
$.localScroll();
$(".top_links > li > a").click(function () {
    $(".faq > li").removeClass('highlight');

    var str = $(this).attr("href");
    str = "a[name='" + str.substring(1) + "']";
    $(str).parent().addClass('highlight');

}); 
```

});

我希望这是足够的信息继续下去。如果有人可以提出任何建议，那么他们将不胜感激

示例在这里[http://jsfiddle.net/richlewis14/YsK29/](http://jsfiddle.net/richlewis14/YsK29/) （为大量 css 道歉，但使用引导程序）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-02T19:50:18.667

您的网站正在正确滚动。问题是您的导航栏堆叠在顶部并覆盖了内容。我写的和你有点不同，但它有效：

```
$(document).ready(function () {
    var navHeight = $('.navbar').height(); //get the navbar height

    $(".top_links > li > a").click(function (e) {
        $(".faq > li").removeClass('highlight');

        var str = $(this).attr("href");
        str = "a[name='" + str.substring(1) + "']";
        $(str).parent().addClass('highlight');
        e.preventDefault(); // prevent adding something to url
        var offset = $('.highlight').offset(); //get highlight position from top of page

        $('html, body').scrollTop(offset.top-navHeight); // scroll to correct position
    });

    $('.top').find('a').on('click', function(e){
       $('html, body').scrollTop(0);
       e.preventDefault();
    });
});​ 
```

# php - 数组未存储所需参数

> ID：10412262
> 
> 赞同：0
> 
> 时间：2012-05-02T10:51:34.500
> 
> 标签：php, xml, database, arrays, pdo

我目前正在尝试将 xml 标题的值发布到一个数组中，该数组又将用于保存假期。我仍然没有收到任何错误消息，并且使用了 var_dump 来收集以下信息。（勾选了几个与阅读 RSS 提要相关的复选框）

```
array(7) { [0]=> string(21) "{$currentItem->title}" [1]=> string(21)"{$currentItem->title}" [2]=> string(21) "{$currentItem->title}" [3]=> string(21) "{$currentItem->title}" [4]=> string(21) "{$currentItem->title}" [5]=> string(21) "{$currentItem->title}" [6]=> string(21) "{$currentItem->title}" } :S 
```

这对我来说表明数组端正在工作，但它没有保存在复选框的值参数中设置的信息，因为所有字符串都是 21？21是saveBox的值的引号之间的字符数！！

index.php 中的部分

```
$index = 1;
    foreach ($allHolidays as $currentItem)
        {
            echo '<tr>';
            if (isset($_SESSION['login']))
                {
                    echo '<td valign="top">';
                    //echo '<input type="hidden" name="guid$index" value="{$currentItem->guid}">';name="saveBox$index[]"
                    echo '<input type="checkbox" name="saveBox[]" value="{$currentItem->title}">';
                    echo '</td>';
                }
            echo '<td>';
            echo "<p><a href=\"{$currentItem->link}\">{$currentItem->title}</a><br/>";
            echo "{$currentItem->description}<br/>";
            echo "{$currentItem->pubDate}<br/></p>";
            echo '</td>';
            echo '</tr>';
            $index++;
        } 
```

保存进程.php

```
<?php   
    header("refresh:555; url='index.php'");
    session_start();

    echo "Thank you for saving a holiday";
    echo '<input type="checkbox" name="saveBox[]" value="'.
    htmlspecialchars($currentItem->title).'">';
    include "top.php";
    var_dump($_POST['saveBox']);

    try
    {

        foreach ($_POST['saveBox'] as $savedHoliday)
        {
            $user = $_SESSION['login'];
            $currentSave = $savedHoliday;
            $save = "channel/item[title=\"$currentSave\"]";
            $holidaysXML = simplexml_load_file('holidays.xml');
            $savePath = $holidaysXML->xpath($save);
            foreach($savePath as $currentSavePath)
                    {
                        echo "<p><a href='{$currentSavePath->link}'>{$currentSavePath->title}</a>"."<br\>".
                        "{$currentSavePath->description}"."<br\>".
                        "{$currentSavePath->pubDate}"."<br\></p>";

                        $insertSave = $db->prepare("INSERT INTO `saved_holidays` (`subscriberID`, `link`, `pubDate`, `title`, `description`)
                        VALUES ('$user', '$currentSavePath->link', '$currentSavePath->pubDate', '$currentSavePath->title', '$currentSavePath->description')");

                        $insertSave->execute();
                    }

        }
    }
    catch(PDOException $e)
        {
            echo $e->getMessage();
        } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-02T10:54:25.673

您使用的构造`saveBox$index[]`错误。您应该简单地命名您的输入`saveBox[]`并忘记索引。`$_POST['saveBox']`当您在接收端读取时，PHP 会自动为您提供一个数组。

不要忘记您还应该调用`htmlspecialchars`嵌入到 HTML 中的所有数据：

```
echo '<input type="checkbox" name="saveBox[]" value="'.
     htmlspecialchars($currentItem->title).'">'; 
```

和：

```
foreach ($_POST['saveBox'] as $savedHoliday) 
```

顺便说一句，您应该*始终*在产生任何输出之前调用`header`and `session_start`，因此如果`top.php`产生输出，它应该向下移动几行。

# c - C中负数的按位运算

> ID：10412272
> 
> 赞同：0
> 
> 时间：2012-05-02T10:51:58.940
> 
> 标签：c, bit-shift

下面的效果是什么？

```
unsigned int x = -1; x >>= 2; 
```

我不太确定 x 设置为什么，因为它是一个负数并且类型是无符号的？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-02T10:55:13.963

```
unsigned int x = -1; 
```

设置`x`为`UINT_MAX`（第 6.3.1.3 节，第 2 点）¹。`int`-1 转换为用于的`unsigned int`初始化`x`。该转换是通过将`UINT_MAX +1`值添加（或减去，但不是在这里）来完成的，直到它在 range`0 .. UINT_MAX`中，一次在这里。

因此`x >>= 2;`设置`x`为`UINT_MAX/4`，因为在第 6.5.7 节第 5 点中指定了无符号整数的按位右移：

> 结果`E1 >> E2`是`E1`右移的`E2`位位置。如果`E1`具有无符号类型或`E1`具有带符号类型和非负值，则结果的值是 E1 / 2 ^(E2)商的整数部分。

¹ “否则，如果新类型是无符号的，则在新类型可以表示的最大值的基础上反复加减一，直到该值在新类型的范围内。”

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-02T10:56:02.707

-1 应该将 unsigned int 设置为 0xffffffff，这是该类型的最高数字（大约 48 亿）——如果 int 超过 32 位，则更高。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-02T10:57:15.180

它是由有符号负值*初始化的无符号类型。*移位仍然在无符号值上执行。

# iphone - 在模拟器上工作的代码不在手机上

> ID：10412274
> 
> 赞同：0
> 
> 时间：2012-05-02T10:52:18.973
> 
> 标签：iphone, mobile, ios-simulator

我正在开发移动网站。我正在 ios 模拟器上对其进行测试。代码工作正常！！

现在我在 i-phone 上测试代码。代码不行！！！

我无法弄清楚任何代码错误！

这可能是什么原因？

提前致谢！！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-02T11:23:23.220

检查您的 IOS 版本或图像（如果有）在应用程序中使用。模拟器不区分大小写，设备区分大小写。或在此处发布您的部分代码。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-02T12:26:29.807

如果您在代码中使用 plist，请仔细检查您调用它们的文件名。该设备区分大小写，但模拟器不区分大小写。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-05-02T11:50:08.603

Check your provisioning profile and also try to quit the xcode and run the code in device.

# c++ - 在 C++ 中创建实例的内存分配

> ID：10412278
> 
> 赞同：2
> 
> 时间：2012-05-02T10:52:45.603
> 
> 标签：c++, oop, memory-management

请用实例创建解释内存分配

```
class simpleTestFactory
{
    public: 
    static simpleTest* Create()
    {
        return new simpleTest();
    }
}

class simpleTest
{
    private:
    int x,y,z;
    public:
    int printTest()
    {
        cout<<"\n This test program";
    }
}

int main()
{

    simpleTest* s1=simpleTestFactory::Create();
    .
    .   
    s1=simpleTestFactory::Create();
} 
```

在主函数中，我们使用 create static 函数为 simpleTest 创建实例。我们再次为同一个对象创建另一个实例。

在这种情况下，第一个创建的实例内存将被删除？？

否则如何避免内存问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-02T10:54:57.897

> 在这种情况下，第一个创建的实例内存会被删除吗？

不，不会的。您必须自己通过调用`delete`或首先使用智能指针来释放它。

（我假设它`s1`是 type `simpleTest*`，即指向 的*指针*，`simpleTest`否则您的代码不是有效的 C++。）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-02T10:56:00.483

首先，当您将指针传递给对象时，您的程序将无法编译。它应该是：

```
simpleTest *s1 = simpleTestFactory::Create();
           ^^^ 
```

内存管理必须在 C++ 中手动完成。

```
delete s1;  // do it before new allocation to s1. 
```

还要记住，在 C++ 中创建对象`new`不是强制性的。它可以很简单：

```
simpleTest obj;  // automatic object, no explicit deallocation 
```

[对于自动垃圾收集，您还可以使用[智能指针](https://stackoverflow.com/questions/5026197/what-c-smart-pointer-implementations-are-available)]。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-02T11:17:18.960

尝试单例类型模式。只有在尚未创建实例时才能创建实例。不确定您的用例。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-02T12:21:30.543

单例模式还假设对象实例将被删除。因此，您需要实施特殊的方法。

考虑到 Thangaraj 的问题，不要忘记 ';' 在类定义之后。是的，您必须通过 delete 调用显式删除对象。为避免这种情况，您可以使用智能指针。

# c# - 一次将 DataTable 转换为 Excel 范围？

> ID：10412281
> 
> 赞同：4
> 
> 时间：2012-05-02T10:53:03.070
> 
> 标签：c#, excel, visual-studio-2008, datatable, vsto

我在一个`System.Data.DataTable`实例中有一些数据，并想一次性将其直接放入 Excel 工作表范围。

我正在使用 VS 2008，我的项目是**C# Excel 2007 Workbook**项目。

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-02T11:12:24.850

您首先必须将数据表转换为二维数组，然后将二维数组分配给范围

# java - google app engine (java) - 在数据存储中存储 url 图片

> ID：10412283
> 
> 赞同：1
> 
> 时间：2012-05-02T10:53:10.983
> 
> 标签：java, image, google-app-engine, facebook-graph-api, blob

我正在构建一个应用程序，该应用程序应该将用户 Facebook 帐户中的一些图像存储到我的数据存储中以供以后使用，

到目前为止，我能找到的只是如何直接从表单上传图像：

```
 (form action="(<%= blobstoreService.createUploadUrl("/upload") %>" method="post" enctype="multipart/form-data">
        (input type="file" name="myFile">
        (input type="submit" value="Submit">
    (/form> 
```

这不是我要找的，我想将来自已知 URL 的图像存储到我的数据存储中，例如：www.otherSite.com/imagename.jpg。（我已经知道如何从 FB graph api 获取图像了）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-04T16:58:12.470

看看这个 StackOverflow 问题，它还包含一些 Java 代码示例。

[如何使用谷歌应用引擎（java）上传和存储图像](https://stackoverflow.com/questions/1513603/how-to-upload-and-store-an-image-with-google-app-engine-java)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-02T12:50:54.470

您也可以[直接将文件写入 Blobstore](https://developers.google.com/appengine/docs/java/blobstore/overview#Writing_Files_to_the_Blobstore)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-02T14:31:30.917

我认为 gae 将此作为一项单独的服务。UrlFetch- [https://developers.google.com/appengine/docs/java/urlfetch/](https://developers.google.com/appengine/docs/java/urlfetch/)

# php - 使用 preg_replace 从字符串中删除除数字、点和单个字母之外的所有内容

> ID：10412287
> 
> 赞同：0
> 
> 时间：2012-05-02T10:53:24.103
> 
> 标签：php

如何修改此代码以从给*定***的字符串** （已经存在）**和***字符串*中删除所有内容：“.”、“k”、“B”和“M”？

 ****我正在做的是解析给出的价格：123k、124.7B、20M

```
preg_replace("/\D/", "", "<td>Cost: 20b $, Sell for: 139k $</td>" ); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-02T10:57:29.913

这应该可以解决问题（如所定义的那样）：

```
preg_replace("/[^\.kBM0-9]/", "", "<td>Cost: 20b $, Sell for: 139k $</td>" ); 
```

我认为 preg_match 可能会更好，特别是如果您的字符串中有多个数字（如您的示例中所示）：

```
preg_match_all("/([0-9]+(\.[0-9]+)?\s?[kBM]?)/", "<td>Cost: 20b $, Sell for: 139k $</td>", $match ); 
```

然后，所有数字都应该在`$match`数组中很好地分开。****

# c# - ModelState 对下拉列表无效

> ID：10412294
> 
> 赞同：0
> 
> 时间：2012-05-02T10:53:34.903
> 
> 标签：c#, asp.net-mvc, asp.net-mvc-3, linq, razor

我有一个名为“Language”的父表，其中存储了一个人的语言技能（比如他很流利，好，好......）

我有一个子表“Manpower”，其中有 2 个外键指向不同语言（英语和阿拉伯语）的同一个表。

现在，当我尝试创建新的人力资源时，它总是返回 ModelState 对于该语言无效。

错误是**“从类型 'System.String' 到类型 'AlTmaizMVC3.Models.Language' 的参数转换失败，因为没有类型转换器可以在这些类型之间进行转换。”**

控制器 ：

```
 [Authorize]        
    public ActionResult Create()
    {
        ViewBag.CategoryId = new SelectList(db.Categories.OrderBy(r => r.Name), "Id", "Name");
        ViewBag.CountryId = new SelectList(db.Countries.OrderBy(r => r.Name), "Id", "Name");
        ViewBag.MaritalStatusId = new SelectList(db.MaritalStatus.OrderBy(r => r.Name), "Id", "Name");
        ViewBag.ReligionId = new SelectList(db.Religions.OrderBy(r => r.Name), "Id", "Name");
        ViewBag.EnglishID = new SelectList(db.Languages , "Id", "Name");
        ViewBag.ArabicID = new SelectList(db.Languages, "Id", "Name");
        return View("~/Views/en/Create.cshtml");
    } 

    [HttpPost]
    [Authorize]
    public ActionResult Create(Manpower manpower)
    {
        if (ModelState.IsValid)
        {
            manpower.CreatedBy = User.Identity.Name;
            manpower.CreatedOn = DateTime.Now;
            db.Manpowers.AddObject(manpower);
            db.SaveChanges();
            return RedirectToAction("AddImage", new { manpower.Id});  
        }

        ViewBag.CategoryId = new SelectList(db.Categories.OrderBy(r => r.Name), "Id", "Name", manpower.CategoryId);
        ViewBag.CountryId = new SelectList(db.Countries.OrderBy(r => r.Name), "Id", "Name", manpower.CountryId);
        ViewBag.MaritalStatusId = new SelectList(db.MaritalStatus.OrderBy(r => r.Name), "Id", "Name", manpower.MaritalStatusId);
        ViewBag.ReligionId = new SelectList(db.Religions.OrderBy(r => r.Name), "Id", "Name", manpower.ReligionId);
        ViewBag.EnglishID = new SelectList(db.Languages, "Id", "Name", manpower.EnglishID);
        ViewBag.ArabicID = new SelectList(db.Languages, "Id", "Name", manpower.ArabicID);
        return View("~/Views/en/Create.cshtml", manpower);
    } 
```

看法

```
 <tr>
            <td>@Html.LabelFor(model => model.MaritalStatusId, "Marital Status")</td>
            <td>:</td>
            <td>@Html.DropDownList("MaritalStatusId", String.Empty)<br />
                @Html.ValidationMessageFor(model => model.MaritalStatusId)</td>
            <td></td>
            <td></td>
            <td></td>
            <td></td>
        </tr>
        <tr>
            <td>@Html.LabelFor(model => model.EnglishID, "English")</td>
            <td>:</td>
            <td>@Html.DropDownList("EnglishID", String.Empty)<br />                    
                @Html.ValidationMessageFor(model => model.EnglishID)</td>
            <td></td>
            <td></td>
            <td></td>
            <td></td>
        </tr>
        <tr>
            <td>@Html.LabelFor(model => model.ArabicID, "Arabic")</td>
            <td>:</td>
            <td>@Html.DropDownList("ArabicID", String.Empty)<br />
                @Html.ValidationMessageFor(model => model.ArabicID)</td>
            <td></td>
            <td></td>
            <td></td>
            <td></td>
        </tr> 
```

语言表模型

```
[EdmEntityTypeAttribute(NamespaceName="AlTmaizDBModel", Name="Language")]
[Serializable()]
[DataContractAttribute(IsReference=true)]
public partial class Language : EntityObject
{
    #region Factory Method

    /// <summary>
    /// Create a new Language object.
    /// </summary>
    /// <param name="id">Initial value of the Id property.</param>
    public static Language CreateLanguage(global::System.Int16 id)
    {
        Language language = new Language();
        language.Id = id;
        return language;
    }

    #endregion
    #region Primitive Properties

    /// <summary>
    /// No Metadata Documentation available.
    /// </summary>
    [EdmScalarPropertyAttribute(EntityKeyProperty=true, IsNullable=false)]
    [DataMemberAttribute()]
    public global::System.Int16 Id
    {
        get
        {
            return _Id;
        }
        set
        {
            if (_Id != value)
            {
                OnIdChanging(value);
                ReportPropertyChanging("Id");
                _Id = StructuralObject.SetValidValue(value);
                ReportPropertyChanged("Id");
                OnIdChanged();
            }
        }
    }
    private global::System.Int16 _Id;
    partial void OnIdChanging(global::System.Int16 value);
    partial void OnIdChanged();

    /// <summary>
    /// No Metadata Documentation available.
    /// </summary>
    [EdmScalarPropertyAttribute(EntityKeyProperty=false, IsNullable=true)]
    [DataMemberAttribute()]
    public global::System.String Name
    {
        get
        {
            return _Name;
        }
        set
        {
            OnNameChanging(value);
            ReportPropertyChanging("Name");
            _Name = StructuralObject.SetValidValue(value, true);
            ReportPropertyChanged("Name");
            OnNameChanged();
        }
    }
    private global::System.String _Name;
    partial void OnNameChanging(global::System.String value);
    partial void OnNameChanged();

    /// <summary>
    /// No Metadata Documentation available.
    /// </summary>
    [EdmScalarPropertyAttribute(EntityKeyProperty=false, IsNullable=true)]
    [DataMemberAttribute()]
    public global::System.String NameAR
    {
        get
        {
            return _NameAR;
        }
        set
        {
            OnNameARChanging(value);
            ReportPropertyChanging("NameAR");
            _NameAR = StructuralObject.SetValidValue(value, true);
            ReportPropertyChanged("NameAR");
            OnNameARChanged();
        }
    }
    private global::System.String _NameAR;
    partial void OnNameARChanging(global::System.String value);
    partial void OnNameARChanged();

    #endregion

    #region Navigation Properties

    /// <summary>
    /// No Metadata Documentation available.
    /// </summary>
    [XmlIgnoreAttribute()]
    [SoapIgnoreAttribute()]
    [DataMemberAttribute()]
    [EdmRelationshipNavigationPropertyAttribute("AlTmaizDBModel", "FK_Manpower_Language", "Manpower")]
    public EntityCollection<Manpower> Manpowers
    {
        get
        {
            return ((IEntityWithRelationships)this).RelationshipManager.GetRelatedCollection<Manpower>("AlTmaizDBModel.FK_Manpower_Language", "Manpower");
        }
        set
        {
            if ((value != null))
            {
                ((IEntityWithRelationships)this).RelationshipManager.InitializeRelatedCollection<Manpower>("AlTmaizDBModel.FK_Manpower_Language", "Manpower", value);
            }
        }
    }

    /// <summary>
    /// No Metadata Documentation available.
    /// </summary>
    [XmlIgnoreAttribute()]
    [SoapIgnoreAttribute()]
    [DataMemberAttribute()]
    [EdmRelationshipNavigationPropertyAttribute("AlTmaizDBModel", "FK_Manpower_Language1", "Manpower")]
    public EntityCollection<Manpower> Manpowers1
    {
        get
        {
            return ((IEntityWithRelationships)this).RelationshipManager.GetRelatedCollection<Manpower>("AlTmaizDBModel.FK_Manpower_Language1", "Manpower");
        }
        set
        {
            if ((value != null))
            {
                ((IEntityWithRelationships)this).RelationshipManager.InitializeRelatedCollection<Manpower>("AlTmaizDBModel.FK_Manpower_Language1", "Manpower", value);
            }
        }
    }

    #endregion
} 
```

请帮忙。谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-02T11:45:34.400

你应该使用 a `Model`，而不是`ViewBag`，那是你头疼的地方！

首先让我们根据您的需要创建一个模型：

```
public class MyModel
{
    public Manpower Manpower { get; set; }

    public SelectList Categories { get; set; }
    public SelectList MaritalStatuses { get; set; }
    public SelectList Religions { get; set; }
    public SelectList Languages { get; set; }

    //here's your Load Method to populate it
    public MyModel Load()
    {
        //load your Manpower object here
        Categories = new SelectList(db.Categories
            .OrderBy(x => x.Name)
            .ToList(), "Id", "Name");
        Countries = new SelectList(db.Countries
            .OrderBy(x => x.Name)
            .ToList(), "Id", "Name");
        MaritalStatuses = new SelectList(db.MaritalStatus
            .OrderBy(x => x.Name)
            .ToList(), "Id", "Name");
        Religions = new SelectList(db.Religions
            .OrderBy(x => x.Name)
            .ToList(), "Id", "Name");
        Languages = .new SelectList(db.Languages
            .OrderBy(x => x.Name)
            .ToList(), "Id", "Name");
    }
} 
```

现在让我们修复 get 控制器方法：

```
[Authorize]        
public ActionResult Create()
{
    var model = new MyModel().Load();

    return View("~/Views/en/Create.cshtml", model);
} 
```

接下来，我将向您展示**示例**视图代码（适当地格式化它），注意我在这里假设 Manpower 具有所有可能的字段：

```
@model MyModel //make sure this is the top line of your view

@Html.DropDownListFor(m => m.Manpower.CategoryId, m.Categories)
@Html.DropDownListFor(m => m.Manpower.MaritalStatusId, m.MaritalStatuses)
@Html.DropDownListFor(m => m.Manpower.ReligionId, m.Religions)
@Html.DropDownListFor(m => m.Manpower.EnglishId, m.Languages)
@Html.DropDownListFor(m => m.Manpower.ArabicId, m.Languages)

//your other Manpower object items here now.... 
```

现在在 Save 方法中我们可以这样做：

```
[HttpPost]
[Authorize]
public ActionResult Create(MyModel model)
{
    if (ModelState.IsValid)
    {
        model.Manpower.CreatedBy = User.Identity.Name;
        model.Manpower.CreatedOn = DateTime.Now;
        db.Manpowers.AddObject(model.Manpower);
        db.SaveChanges();
        return RedirectToAction("AddImage", new { manpower.Id});  
    }

    return RedirectToAction("Create"); //not sure why you're going back to create though?
} 
```

# asp.net - 使用 WCF 将 MVC 项目分离为单独的项目

> ID：10412297
> 
> 赞同：1
> 
> 时间：2012-05-02T10:53:54.963
> 
> 标签：asp.net, asp.net-mvc, wcf, n-tier-architecture

我习惯于在`areas`单个 MVC 项目的两个不同中构建我的 CMS 和客户端站点。该 MVC 项目引用了一个**应用层**（类库），该层为该 MVC 项目中的两个区域提供服务。**应用程序层**引用**域层**，然后域层引用数据**层**（都在它们自己的单独的类库中）。MVC 应用程序只知道应用程序层。

我开始渴望将 CMS 分离到它自己的应用程序中的好处，其中一些是：

1.  从通常非常轻量级的客户端项目中获取相当大的 CMS 演示代码库。
2.  当特定客户端没有自定义功能时，不必重新构建相同的 CMS 代码库（通常不需要为新客户端更改 CMS）
3.  能够在生产中升级 CMS 而不必担心影响网站（反之亦然）

为了做到这一点，从我最初的研究中我发现我需要创建一个引用应用程序层的 WCF 应用程序。然后从这里开始，CMS MVC 应用程序和 Client MVC 应用程序将只与 WCF 层进行通信。

这种方法的缺点：

1.  需要在托管环境中提供 3 个单独的应用程序。
2.  不同应用程序之间的消息传递开销。

这是实现我想要的最简单的方法吗？任何人都可以给我一些例子或易于理解的类似情况的案例研究吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-02T11:13:26.923

基本上这是您的选择，您希望如何保留应用程序。如果您希望稍后将您的业务逻辑公开为 Web 服务，那么您必须使用 WCF，以便您的 CMS 的业务逻辑独立于任何客户端界面，因此如果您稍后计划网站的移动版本，那么在从广义上讲，如果您将 BL 保存在 WCF 中，您只需更改客户端，并且可以由第三方为您开发。

如果我在你的位置，我肯定会选择 WCF 方法。

如果您谈论最简单的方法，那么将 BL 作为您项目的一部分。但同样，您必须在可扩展性和易于开发之间做出选择。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-11T12:14:22.517

我已将 CMS 分离到它自己的项目中，但遵循相同的命名空间。现在我可以从我的客户端 MVC 应用程序中引用 cms dll，设置路由并复制文件资产（视图、内容）。

至于 WCF 层，我决定在 MVC 4 中使用 Web API 并解决它，直到我扩展它的限制并不得不转向 WCF。

# javascript - BlobBuilder 和新的 Blob 构造函数有什么区别？

> ID：10412299
> 
> 赞同：14
> 
> 时间：2012-05-02T10:54:08.150
> 
> 标签：javascript, html, webkit, w3c

W3 宣布他们打算弃用[BlobBuilder API](https://developer.mozilla.org/en/DOM/BlobBuilder)以优先使用新的[Blob API。](http://dev.w3.org/2006/webapi/FileAPI/#dfn-Blob)

如果我已经在 J​​avaScript 应用程序中使用 BlobBuilder，如何转换为使用这个新的 Blob API？旧的 WebKitBlobBuilder 在最新的 WebKit（和 Chrome Canary）中仍然可用，但很快就会被删除。在你可以写这样的东西之前：

```
var bb = new BlobBuilder();
bb.append(arrayBuffer);
var blob = bb.getBlob(mimeString); 
```

如何重写它以使用新的 Blob 构造函数？谢谢你。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-07-24T16:18:06.563

将 ArrayBuffer 传递给 Blob 构造函数似乎已被弃用，因此：

```
var dataView = new DataView(arrayBuffer);
var blob = new Blob([dataView], { type: mimeString }); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-02T11:03:38.283

根据规范所说，它应该像这样简单。只需检查您发布的页面的示例。

```
var blob = new Blob(arrayBuffer); 
```

> [构造函数，构造函数（（ArrayBuffer 或 Blob 或 DOMString）

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-20T13:12:22.690

```
var blob = new Blob([arrayBuffer], {type: mimeString}); 
```

# r - 如何从频率表中绘制密度

> ID：10412300
> 
> 赞同：3
> 
> 时间：2012-05-02T10:54:09.853
> 
> 标签：r, plot

给定下面的频率表：

```
> print(dat)
V1    V2
1  1 11613
2  2  6517
3  3  2442
4  4   687
5  5   159
6  6    29

# V1 = Score
# V2 = Frequency 
```

我们如何绘制**密度**，（即 y 轴范围从 0 到 1.0）。

目前，我有以下**频率**图：

```
plot(0,main="table",type="n");
lines(dat,lty=1)

# I need to use lines() and plot() here, 
# because need to make multiple lines in single plot 
```

不知道如何处理密度。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-02T11:29:09.863

每个块的密度将`V2 / sum(V2)`假设每一行是一个单独的块。

对于您的数据

```
dat <- data.frame(V1 = 1:6, V2 = c(11613, 6517, 2442, 687, 159, 29)) 
```

我得到：

```
> with(dat, V2 / sum(V2))
[1] 0.541474332 0.303865342 0.113862079 0.032032452 0.007413624 0.001352170 
```

我们可以使用 R 的工具进行检查。首先扩展您的紧凑频率表

```
dat2 <- unlist(apply(dat, 1, function(x) rep(x[1], x[2]))) 
```

然后`hist()`用来计算我们想要的值

```
dens <- hist(dat2, breaks = c(0:6), plot = FALSE) 
```

查看生成的对象：

```
> str(dens)
List of 7
 $ breaks     : int [1:7] 0 1 2 3 4 5 6
 $ counts     : int [1:6] 11613 6517 2442 687 159 29
 $ intensities: num [1:6] 0.54147 0.30387 0.11386 0.03203 0.00741 ...
 $ density    : num [1:6] 0.54147 0.30387 0.11386 0.03203 0.00741 ...
     $ mids       : num [1:6] 0.5 1.5 2.5 3.5 4.5 5.5
 $ xname      : chr "dat2"
 $ equidist   : logi TRUE
 - attr(*, "class")= chr "histogram" 
```

请注意以下`density`组件：

```
> dens$density
[1] 0.541474332 0.303865342 0.113862079 0.032032452 0.007413624 0.001352170 
```

这与我从原始频率表表示中手动计算的结果一致。

至于绘图，如果您只想绘制密度，请尝试：

```
dat <- transform(dat, density = V2 / sum(V2))
plot(density ~ V1, data = dat, type = "n")
lines(density ~ V1, data = dat, col = "red") 
```

如果要强制轴限制，请执行以下操作：

```
plot(density ~ V1, data = dat, type = "n", ylim = c(0,1))
lines(density ~ V1, data = dat, col = "red") 
```

# c++ - 可变参数函数 va_arg() 返回不正确的参数

> ID：10412301
> 
> 赞同：0
> 
> 时间：2012-05-02T10:54:10.027
> 
> 标签：c++, function, parameters, variadic

**问题部分解决：请阅读底部**

有问题的可变参数函数，最简单的是：

```
inline Variant::Variant(int type, int dims, ...)
{
   va_list ap;
   va_start (ap, dims);

   //Removed Variant handling code here

   int i=0;
   for(;i<dims;i++){
      int size = va_arg (ap, int);
   }

   //Likewise, Removed Variant handling code here

   va_end (ap);
} 
```

如您所见，有问题的函数是我的 Variant 类的重载构造函数。这个特定的构造函数在声明数组时会考虑维度的大小和数量。

所以这条线在我的 main() 中运行：

```
Variant(ARRAY_ARRAYTYPE, 3, 800, 22, 22); 
```

当我断点之后

```
int size = va_arg (ap, int); 
```

在函数行中，我得到以下结果：

```
size holds the value of 800 (correct)
size holds the value of -43587879... (WTF)
size holds the value of 4387643543 (WTF) 
```

然后程序段错误，因为显然这些是完全无效的值。

有任何想法吗？提前致谢。

**问题部分解决：重新启动以某种方式解决了该问题，但现在是一个新问题......**

之后调用的我的 OTHER 可变参数函数似乎拾取了传递给 Variant() 构造函数的任何参数，而不是它自己的参数。有任何想法吗？

```
Variant* ArAcc(Variant* in_variable, ...)
{
  va_list app;
int index=0;

int i, j;
int mult;

  va_start (app, in_variable->arrayaccess->num_dimensions);
  for(i=0;i<in_variable->arrayaccess->num_dimensions;i++){
    mult = 1;
    for(j=i+1;j<in_variable->arrayaccess->num_dimensions;j++){
        mult = mult * in_variable->arrayaccess->dim_sizes[j];

    }
    int size = va_arg (app, int);
    mult = mult * size;
    index += mult;
  }
  va_end (app);

return &((*in_variable)[index]);
} 
```

和...

```
ArAcc(&SomeVariant, 7, 9); 
```

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-02T11:40:25.127

**编辑：**我没有看到评论中已经提到了这一点。

如果重新启动解决了问题，那将向我表明问题并没有真正解决，只是碰巧没有引起症状。

如果第一个问题真的解决了，第二个函数中的以下行可能会导致第二个问题：

```
va_start (app, in_variable->arrayaccess->num_dimensions); 
```

那应该是

```
va_start (app, in_variable); 
```

当然。

根据您的评论，我怀疑当第一种情况不起作用时，您实际上是将局部变量作为第二个参数传递给`va_start`而不是函数参数。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-02T11:07:04.927

尝试删除内联并使其成为正常功能。

# c++ - 如何使用 DCB 结构设置波特率 2.000.000

> ID：10412303
> 
> 赞同：1
> 
> 时间：2012-05-02T10:54:13.393
> 
> 标签：c++, serial-port, baud-rate

如何在 Windows / Visual Studio 2010 的 C 源代码中将波特率设置为 2MBaud。

```
dcb.BaudRate = 2000000UL; //doesn't work. 
```

数据发送至少可以工作，使用串行端口监视器进行测试。我的微控制器和它的 ftdi 芯片也可以使用 Bray 的终端在 2mbaud 下正常工作。

有没有可能找出一个com端口的当前设置？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-02T11:06:46.333

Look at GetCommState() and SetCommState() API's and the DCB struct.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-02T11:12:43.690

```
DCB dcb;
dcb.BaudRate = 2000000;
...
SetCommState(hFile, &dcb); 
```

[至少这就是我从这里](http://msdn.microsoft.com/en-us/library/aa450503.aspx)解释“通过指定 CBR_ 常数来分配实际波特率或索引”的方式。

# android - Android onResume 显示 Activity 的先前状态

> ID：10412304
> 
> 赞同：0
> 
> 时间：2012-05-02T10:54:17.943
> 
> 标签：android, instance, onresume

在我的项目`controls`中，我现在在几个选项卡中的活动中有几个，`listView checkboxes and textboxes`当我按下主页键或收到呼叫时，我的活动暂停并且控件被重置（就像`listview`必须重新绑定和复选框被取消选中）到防止它我设置`saveEnabled = "true"` 但它`does not work for listview`现在我将不得不再次重新绑定我的标签并再次填充列表视图

告诉我是否有任何方法可以保存我当前的状态，并且 onResume 将恢复前一个状态。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-02T12:13:58.003

您应该将状态保存在`onPause()`方法中，然后可以在中刷新视图`onResume()`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-02T12:14:43.370

没有这样的 API 来保存活动的状态。您自己必须使用 SharedPreferences 或其他方法在 onPause() 中保存状态，并在 onResume() 中检索状态。

# android - 如何在android的videoview中播放rtmp视频？

> ID：10412305
> 
> 赞同：4
> 
> 时间：2012-05-02T10:54:20.423
> 
> 标签：android, video, android-videoview, rtmp

我想在 videoview 中播放 rtmp 视频，那么如何在我的应用中播放 rtmp 视频？

```
String host = "rtmp://example.com";
String fileName = "www.mp4";
int port = 1935;

Connection string rtmp://example/cfx/st 
```

我怎样才能播放视频？

问候，吉里什

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-02T13:06:01.020

您可以使用 Flash 来完成（至少对于具有 2.2+ android 和支持 Flash 的 CPU 的设备）

*   [http://www.wowza.com/forums/showthread.php?13087-Android-RTMP-Live-Streaming](http://www.wowza.com/forums/showthread.php?13087-Android-RTMP-Live-Streaming)
*   [在 Android 中播放音频 RTMP 流的最简单方法](https://stackoverflow.com/questions/6349714/the-easiest-way-to-play-an-audio-rtmp-stream-in-android)

# ios - SBJson 反序列化问题

> ID：10412307
> 
> 赞同：0
> 
> 时间：2012-05-02T10:54:25.777
> 
> 标签：ios, sbjson

嗨，我在 JSON 反序列化方面遇到问题。

我正在使用 SBJson，数据是从 .net 网络服务返回的。

这是返回的 JSON（缩短）

```
{
    "id": "1",
    "result": [
        {
            "questionID": 21,
            "question": "What is the secret of eternal life?"
        },
        {
            "questionID": 20,
            "question": "What is the meaning of life?"
        }
    ]
} 
```

到目前为止，我已经使用以下代码

```
-(void) dataLoaded:(NSData*)data {

    NSString* jsonString = [[[NSString alloc] initWithData:data encoding:NSUTF8StringEncoding] autorelease];

    NSDictionary *jsonObject = [jsonString JSONValue];    

        NSLog(@"data : %@", [jsonObject valueForKey:@"result"]);
 } 
```

以下行 [jsonObject valueForKey:@"result"] 返回以下数据

```
(
        {
        question = "What is the secret of eternal life?";
        questionID = 21;
    },
        {
        question = "What is the meaning of life?";
        questionID = 20;
    }
) 
```

我如何将这些数据放入数组中？

这是我第一次使用 Json，所以我不完全确定发生了什么。

谢谢米克

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-02T10:57:42.440

你**已经**得到了一个数组......你可以使用这样的东西来创建一个指向这个数组的指针：

```
NSDictionary *jsonObject = [jsonString JSONValue];
NSArray *myJsonArray = [jsonObject valueForKey:@"result"]; 
```

**编辑（经过一些评论）**

由于您正在记录`[jsonObject valueForKey:@"result"]`并`NSLog`打印您发布的内容，因此可以确定该对象是`NSArray`.

您可以像这样计数和记录（注意`%d`）：

```
int c = [myJsonArray count];
NSLog("My array's count is: %d", c); 
```

# php - 多个 foreach 与多个 if 在 foreach 内

> ID：10412315
> 
> 赞同：2
> 
> 时间：2012-05-02T10:54:51.030
> 
> 标签：php, if-statement, foreach, control-structure

两者中哪个更优？`I can't test it on my computer, I can't rely on it.`

```
foreach($links as $link){
    if($a){
        //do something
    }
    if($b){
        //do something
    }
    if($c){
        //do something
    }
    if($d){
        //do something
    }
} 
```

**或**：

```
if($a){
    foreach($links as $link){
        //do something
    }
}
if($b){
    foreach($links as $link){
        //do something
    }
}
if($c){
    foreach($links as $link){
        //do something
    }
}
if($d){
    foreach($links as $link){
        //do something
    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-02T11:00:02.797

我觉得第一个更好。让我们说`$a === true`和`$b === true`。在第一个示例中，只会执行一个循环，但在第二个示例中，相同的循环将执行两次。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-02T11:00:58.947

这将取决于每个条件为真的可能性，以及您正在循环的集合的长度。IF 条件的开销很小，但会在一个大集合上加起来，而 foreach 迭代器的开销略高，但如果其中一些条件很少为真，则可以最小化

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-02T11:00:29.940

1 个循环总是比（可能）4 个更好。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-02T11:24:39.977

如果条件非常相似，使用语句可能更容易阅读`switch()`，或者如果 $a、$b、$c 和 $d 互斥，则使用`elseif`.

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-02T11:25:03.923

这两个代码片段做的事情不同，因此您应该使用正确的一个，而不是仅仅基于速度来选择。

要看到这一点，请考虑如果多个`$a, $b`, etc 为真时会发生什么。这两个片段都将执行很多`do somethings`，但顺序不同。

`do somethings`如果可能会改变`$a, $b`等的值，还要考虑差异。

# javascript - 将样式应用于 div 内的列表项

> ID：10412316
> 
> 赞同：-1
> 
> 时间：2012-05-02T10:54:51.330
> 
> 标签：javascript, html, css

再会。

我想知道是否可以将样式应用于嵌套在带有 javascript 的 div 中的列表项。在我的页面上已经有很多带有列表项的 div，但我只想将样式应用于特定的列表项。

我想使用 javascrip 将样式应用于列表项的唯一原因是因为 IE 7 存在查看问题，它不想在 div 中接受 css 样式。

我的 HTML 是：

```
<ol>    
   <li>
      GENERAL PRINCIPLES UNDERLYING THE REPRESENTIVE COUNCIL OF LEARNERS
      <div id = "divv">
         <ol>
            <li>....</li>
            <li>....</li>
            <li>....</li>
            <li>....</li>
            <li>....</li>
         </ol>
      </div>
    </li>
<ol> 
```

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-02T11:11:06.627

当然你可以而且它也应该在 IE7 上工作，因为它是 IE 一直支持的东西，例如；

```
#divv ol li{your style properties here} 
```

应该适用于所有浏览器。唯一不起作用的情况是，如果您在 css 的其他地方取消了带有“！important”的“ol li”样式。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-02T11:12:10.797

是的，您可以使用 getElementById 和 getElementsByTagName 的组合来执行此操作，然后对找到的项目运行循环并使用 javascript 添加 css 样式。这里是同样的 jsfiddle：http: [//jsfiddle.net/saganbyte/m65CF/1/](http://jsfiddle.net/saganbyte/m65CF/1/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-02T11:21:10.070

您需要做的就是获取带有 ID 的 div，然后从那里遍历 DOM，直到找到您想要的列表。然后只需使用列表样式对象来注入您想要的样式。

另外我怀疑如果你不能从 CSS 中做到这一点，那么它会有更多问题，而且结构化的 CSS 总是可以应用的（当然，除非不受支持）

这是您提供的测试标记的一个小技巧，它抓取 div，在其中找到 OL，然后为其添加边框。

[http://jsfiddle.net/Dj5gH/1/](http://jsfiddle.net/Dj5gH/1/)

```
var div = document.getElementById('divv'),
    found = false,
    elem = div.firstChild;

while (!found) {

    if (elem.nodeType == 1) {
        elem.style.border = '2px solid red';
        found = true;
    }
    else elem = elem.nextSibling;
};​ 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-02T11:27:07.997

我创建了一个 JSFiddle 来演示内部列表的 CSS 样式

[http://jsfiddle.net/adrianjmartin/9V8tR](http://jsfiddle.net/adrianjmartin/9V8tR)

# php - 在同一页面上重定向到 x/y URL 的两个 PHP 表单

> ID：10412318
> 
> 赞同：0
> 
> 时间：2012-05-02T10:55:02.003
> 
> 标签：php, forms, url, redirect, if-statement

我正在尝试为使用 Wordpress 或 Indexhibit 管理网站的客户创建一个“简单”重定向。

我已将其设置为允许他们输入他们的域并将其重定向到相应的管理区域（*我很惊讶有多少人忘记了，但是嘿，这是我的解决方案*）

我让它对于单个重定向工作正常，但是在之前的 SO 提交的后面尝试使用 if / elseif 集成两者并且它无法解析。

任何想法我做错了什么/帮助非常感谢！

```
<?php 
if ($_POST['indexhibit_url']) {
if($_SERVER['REQUEST_METHOD'] == 'POST') : $indexhibit_url = $_POST['indexhibit_url']; header('Location: http://' . $indexhibit_url . '/ndxz-studio/');
}
elseif ($_POST['wordpress_url']) {
if($_SERVER['REQUEST_METHOD'] == 'POST') : $wordpress_url = $_POST['wordpress_url']; header('Location: http://' . $wordpress_url . '/wp-admin/');
}
?>

<form action="<?php echo $_SERVER['../PHP_SELF']; ?>" method="post" name="indexhibit_url">

<h3>Indexhibit</h3>

<p class='formp'>If your website is powered by <em>Indexhibit</em> submit your URL to be forwarded to your admin area</p>
<input class='loginforms' type="text"  value='i.e. your-domain-name.com' onclick="this.value='';" onfocus="this.select()" onblur="this.value=!this.value?'i.e. your-domain-name.com':this.value;"   name="indexhibit_url" />
<input class="btn btn-info loginbuttons" name="index_submit" type="submit" value="Go" />

</form>

<form action="<?php echo $_SERVER['../PHP_SELF']; ?>" method="post" name="wordpress_url">

<h3 style='margin-top:2em;'>Wordpress</h3>

<p class='formp'>If your website is powered by <em>Wordpress</em> submit your URL to be forwarded to your admin area</p>
<input class='loginforms' type="text"  value='i.e. your-domain-name.com' onclick="this.value='';" onfocus="this.select()" onblur="this.value=!this.value?'i.e. your-domain-name.com':this.value;"   name="wordpress_url" />
<input class="btn btn-info loginbuttons" name="wp_submit" type="submit" value="Go" />

</form>

<?php endif; ?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-02T11:02:09.843

you are mixing up ternary and non ternary operators:

just use normal if/else syntax:

```
if ($_POST['indexhibit_url']) {
    if($_SERVER['REQUEST_METHOD'] == 'POST'){
        $indexhibit_url = $_POST['indexhibit_url']; 
        header('Location: http://' . $indexhibit_url . '/ndxz-studio/');
    }
}elseif ($_POST['wordpress_url']) {
    if($_SERVER['REQUEST_METHOD'] == 'POST'){
        $wordpress_url = $_POST['wordpress_url']; 
        header('Location: http://' . $wordpress_url . '/wp-admin/');
    }
} 
```

and keep in mind that working with PHP_SELF like this it makes your code vulnerable to xss injections

# c# - 关闭 IE 后没有 Cookie 的 Session 不会过期

> ID：10412319
> 
> 赞同：1
> 
> 时间：2012-05-02T10:55:07.927
> 
> 标签：c#, asp.net, session, c#-4.0

我在网络配置中更改了会话设置：

```
 <sessionState cookieless="true" timeout="20" mode="InProc" /> 
```

当我复制我的地址并关闭 IE 然后我在另一个 IE 实例会话中输入地址时不会过期。IE 关闭后会话到期怎么办？

谢谢

* * *

**编辑 1)**

这个问题与`cookieless`设置有关吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-02T10:57:28.910

你不能。

会话标识在 URL 中，而不是在浏览器中。当您复制 URL 时，您也复制了会话标识，并且关闭浏览器不会更改您复制的 URL。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-02T11:02:09.997

You **can't** clear the session. This information is stored on the server. However, you might want to check this link: [LINK](http://forums.asp.net/t/1594193.aspx/1)

You might see what you want. Hope it helps.

# android - 想要更改多项选择列表视图中文本的颜色

> ID：10412323
> 
> 赞同：0
> 
> 时间：2012-05-02T10:55:37.973
> 
> 标签：android, listview

我有如图所示的多项选择列表

![在此处输入图像描述](../Images/e5113ba89814f0647a12304b3565e122.png)

我有2个问题

1.  但是在我的所有应用程序屏幕中都有白色背景。如果我将屏幕设置为白色，所有文本“黑莓”、“诺基亚”等都消失了，因为默认情况下文本颜色是白色的。所以请告诉我如何将文本颜色更改为**黑色**？我尝试了风格，但它不起作用。

2.  我得到的选中位置存在一些问题。例如，如果选中其中一个项目，然后如果我未选中，即使未选中，它仍然显示该项目已被选中。

这是我的检查项目选择代码

```
private void doDownloading() {
        SparseBooleanArray sp = listTrackView.getCheckedItemPositions();

        for (int i = 0; i < sp.size(); i++) {
            selectedConferenceList.add(conferenceList.get(sp.keyAt(i))
                    .getConferenceName());
        } 
```

}

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-02T11:10:08.613

这是一个示例代码，您可以更改为您的

**AndroidMultiChoiceListActivity .java**

```
import android.app.Activity;
import android.os.Bundle;
import android.widget.ArrayAdapter;
import android.widget.ListView;

public class AndroidMultiChoiceListActivity extends Activity {

 ListView choiceList;
 String[] choice = { "Choice A", 
   "Choice B", "Choice C", "Choice D", "Choice E"};

    /** Called when the activity is first created. */
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);
        choiceList = (ListView)findViewById(R.id.list);

        ArrayAdapter<String> adapter
        = new ArrayAdapter<String>(this, 
          android.R.layout.simple_list_item_multiple_choice, 
          choice);
        choiceList.setChoiceMode(ListView.CHOICE_MODE_MULTIPLE);
        choiceList.setAdapter(adapter);

    }
} 
```

**主要的.xml**

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:orientation="vertical"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    >
<TextView  
    android:layout_width="fill_parent" 
    android:layout_height="wrap_content" 
    android:text="@string/hello"
    android:textColor="#334422"
    />
<ListView 
    android:id="@+id/list"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    />
</LinearLayout> 
```

在您的 Textview 中用于`android:textColor="#334422"`更改文本的颜色。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-02-26T06:14:57.940

最后我知道没有办法用标准改变多选列表视图的文本颜色`ArrayAdapter<String>`。所以我去定制适配器实现。 [此](http://appfulcrum.com/2010/09/18/listview-example-4-custom-layout-checkbox-imagebutton-textview/)链接对我开发具有多项选择实现的自定义适配器很有帮助。

# http-status-code-404 - Facebook 应用程序仅在某些浏览器上重定向到 4oh4.php

> ID：10412329
> 
> 赞同：0
> 
> 时间：2012-05-02T10:56:03.637
> 
> 标签：http-status-code-404, facebook-apps

我有一个非常简单的 Facebook 应用程序模板，可以在用户参加比赛时收集用户详细信息。

我最近为客户部署了这个，但是当他们访问[https://apps.facebook.com/name](https://apps.facebook.com/name) URL 时，他们被重定向到：

[http://www.facebook.com/4oh4.php](http://www.facebook.com/4oh4.php)

这仅在某些 PC 上发生。

我无法在我拥有的任何浏览器或 PC 上重新生成它。

我还在以下位置使用了调试工具：

[https://developers.facebook.com/tools/debug](https://developers.facebook.com/tools/debug)

我看到 Facebook 解析器可以访问我服务器上的应用程序并获取正确的 HTML 内容。

有什么想法可能会在这里发生吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-03T11:09:09.400

我尝试了几件事。这个。我更改了内容的 src 地址，因此 FB Linter 可能会重新缓存它，但这不起作用。

最后，我刚刚创建了一个具有新命名空间的新应用程序，并将其发送给客户端。有效。我猜他们一定是通过一个特别无用的代理服务器访问该 URL，该服务器在 24 小时后为他们提供相同的内容。

通常，代理服务器不会缓存 http 404 或 500 错误，但在这种情况下，您不会收到真正的 404 错误，而是伪装成 404 错误的 Facebook HTTP 200 响应。

Facebook 方面不是很聪明。

# fubumvc - FubuMVC：如何添加一个新方法，例如 DisplayFor

> ID：10412333
> 
> 赞同：0
> 
> 时间：2012-05-02T10:56:15.337
> 
> 标签：fubumvc

我想在我的 spark 视图中执行以下操作。

```
@{this.LinkTo("1234")} 
```

哪个应该输出类似

```
<a href="domain.tld?var=1234">1234</a> 
```

我似乎找不到这样做的好方法。

大多数搜索“fubumvc htmlhelpers”最终都会给我更多关于 msmvc 中的 htmlhelpers 的页面。

如果我可以将代码放在可以在多个站点之间共享的单独程序集中，那将是一个加分项。

**解决方案**

```
命名空间 MyNamespace
{
    公共静态类 FubuPageExtensions
    {
        public static HtmlTag LinkTo(这个IFubuPage页面，字符串输入)
        {
            return new LinkTag(input, "domain.tld?var={0}".ToFormat(input));
        }
    }
}

```

...在我的火花视图中

```
<use namespace="MyNamespace" />

${this.LinkTo(Model.Something)}

```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-02T12:44:22.747

我有类似的要求，我以这种方式解决了它（不确定这是否是最好的方法，但它适用于我的场景）。

*这个想法是在IFubuPage*接口上创建一个扩展方法，该方法返回一个新的*HtmlTag*对象。请注意，我使用的是 Razor 视图引擎，不完全确定这是否也适用于 Spark。

因此，例如，以下代码将生成一个新的 <abbr /> 标记：

```
public static HtmlTag TimeAgoFor(this IFubuPage page, DateTime input)
{
    return new HtmlTag("abbr")
        .Title(input.ToUniversalTime().ToString("yyyy-MM-ddTHH:mm:ssK"))
        .AddClass("timeago")
        .Text(input.ToString("dd-MM-yyyy HH:mm"));
    }
} 
```

在您的情况下，我认为这应该足够了：

```
public static HtmlTag LinkTo(this IFubuPage page, string input)
{
     return new LinkTag(input, "domain.tld?var={0}".ToFormat(input));
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-03T12:26:07.933

确保您的 spark 文件中有“FubuPageExtensions”命名空间。

如评论中所述，在共享目录中使用“_global.spark”文件，以便所有 .spark 文件都具有扩展名称空间。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-30T02:25:39.807

我不知道这是否会吸引您，但您也可以在 fubu.spark 视图引擎支持的默认命名空间之一中声明您的助手，例如：

```
namespace FubuMVC.Core.UI
{
public static class MyHelper{
public static HtmlTag LinkTo(this IFubuPage page, string input)
{
     return new LinkTag(input, "domain.tld?var={0}".ToFormat(input));
}
}
} 
```

# android - Rest Server 或 API 来测试我的 Restful 客户端？

> ID：10412337
> 
> 赞同：15
> 
> 时间：2012-05-02T10:56:36.290
> 
> 标签：android, rest, web

我正在创建一个 Android 应用程序，它需要我向服务器发出休息请求，获取一些数据并分析它们。

我还是 android 开发的新手，所以我不确定我是否正确地实现了请求和线程，并且服务器还没有准备好。所以我需要一个可以用来测试发送请求的公共休息服务器？我收到什么数据并不重要。

提前致谢。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-08T21:05:29.590

有一个名为 httpbin 的测试网站，它被请求 python 库（同一作者）使用。

> 有时测试 HTTP 库会变得很困难。PostBin.org 非常适合测试 POST 请求，但仅此而已。它的存在是为了涵盖各种 HTTP 场景。正在考虑其他端点（例如 /deflate）。

[http://httpbin.org/](http://httpbin.org/)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-02T11:50:45.277

You can test against any public REST API that you can find from famous services and choose actions that don't require an authentication. For instance [Tiny Url](http://scripting.com/stories/2007/06/27/tinyurlHasAnApi.html) (if you want to test GET requests) and if you want more complex data you can get an auth token from Twitter and test against [their API](https://dev.twitter.com/docs/api).

Note that this is just an example. The idea is to investigate the APIs of your favorite sites/servies and you'll likely find one that fits you and your tests.

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-05-02T11:39:48.843

您可以使用 Ruby on Rails 并生成一个基本的 RESTful 资源，如下所示：

```
rails new restweb && cd restweb
rails generate scaffold post title:string body:string 
```

然后启动本地应用服务器：

```
rails server 
```

然后用这个 url 测试你的库：http: [//127.0.0.1](http://127.0.0.1:3000/posts) :3000/posts (.json)

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-05-02T11:26:36.310

如果只是 GET 请求，最简单的做法就是在网上找一个文本文件或一张图片（比如这张随机图片[http://www.databison.com/wp-content/uploads/2009/04/ conversion-of-excel-in-fixed-width-text-file-format.png](http://www.databison.com/wp-content/uploads/2009/04/conversion-of-excel-in-fixed-width-text-file-format.png)）并将您的代码指向它。检查您是否收到 200 响应代码，并且正在接收返回的数据。

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2015-09-08T13:19:29.687

[https://www.mockable.io/](https://www.mockable.io/)允许您指定响应并查看最近的请求历史记录。

[http://www.mocky.io/](http://www.mocky.io/)设置起来要快一些，但您看不到客户端请求。

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2012-05-02T11:55:33.593

您可以尝试使用 SOAPUi（是的，我知道它是为 SOAP ws 设计的），至少[他们在他们的页面中是这么说的](http://www.soapui.org/Service-Mocking/mocking-rest-services.html)。还可以查看 Michaël van Leeuwen 的文章[Simple server mock for REST services](http://blog.xebia.com/2011/08/10/simple-server-mock-for-rest-services/)。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2012-05-03T04:21:02.230

查看[apigee.com](http://apigee.com) - 他们有一个很棒的控制台来调查 API（您可以找到一个不需要身份验证的控制台），然后您可以使用您的代码访问该 API 并获得您在浏览器中看到的相同响应。

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2015-12-01T04:42:11.887

用于测试的简单 Rest 服务：[jsonplaceholder.com](http://jsonplaceholder.typicode.com/)

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2017-02-15T23:28:22.293

试试getsandbox.com。它就像一个魅力，并提供了大量的功能等。

# vba - Access 2007 使用宏填充报表

> ID：10412338
> 
> 赞同：2
> 
> 时间：2012-05-02T10:56:40.183
> 
> 标签：vba, ms-access, report

我有一个学生应用程序数据库，其中包含一个包含每个应用程序信息的表单。

我想从表单创建一个报告（我不确定我应该使用宏还是命令按钮）但是它应该做的是在点击时，它应该创建一个只包含来自当前应用程序的信息的报告正在表单上显示。

我创建了一个如下所示的报告：

![在此处输入图像描述](../Images/1e47d920ce14f1e827c271ede9200b38.png)

要创建宏（单击时会在打印预览模式下打开报告），我在宏设计的 where 框下使用了以下条件：[Application]![Record ID]=[Forms]![Form]![Record ID]

但是，当我单击表单上的宏时，它会显示报告，但不会使用表单中的数据填充报告中的字段。

我要问的问题是，人们通常如何在表单上创建一个按钮，一旦单击该按钮就会显示一个打印预览，其中包含该表单中包含的信息（不是多个记录）

谢谢，

汤姆

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-02T12:04:27.163

我不知道如何用宏来做到这一点。我从不使用宏——你可以做宏用 vba 做的所有事情——而且很简单：

```
Private Sub ReportOpenButton_Click()
On Error GoTo Err_ReportOpenButton_Click

If Not Me.NewRecord Then
    DoCmd.OpenReport "My_Reportname", acPreview, , "[ID] = " & Me![ID]
Else
  If MsgBox("Save the new Record ?", vbQuestion & vbOKCancel, "Attention") = vbOK Then
    RunCommand acCmdSaveRecord
    DoCmd.OpenReport "Bericht1", acPreview, , "[ID] = " & Me.ID
  End If
End If

Exit_ReportOpenButton_Click:
    Exit Sub
Err_ReportOpenButton_Click:
    MsgBox Err.Description
    Resume Exit_ReportOpenButton_Click:
End Sub 
```

这里重要的部分是：[ID] 是报告中 ID 字段的名称，Me![ID] 是执行此命令的表单中的 id 字段的名称（me）。所以最后一个参数 "[ID] = " & Me![ID] 意味着，字符串 "[ID =" 和我的表单的字段 id 中的数字将连接到例如 "[ID] = 7"。

所以该行执行一个宏，读取

OpenReport my_reportname, inPreviewMode, ID = 7

编辑：添加了一些代码来保存当前记录，如果它是新的

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-02T11:41:07.910

它应该像这样简单（在 VBA 中，而不是宏中）：

```
If Me.NewRecord = False Then
    DoCmd.OpenReport "rptMyReportName", acViewPreview, , "[RecordID] = " & Me!RecordID
End If 
```

附带说明一下，在设计表格时，最好不要在字段名称中使用空格或符号。我会将记录 ID 更改为 RecordID。

# java - 替换字符串中的变量占位符

> ID：10412339
> 
> 赞同：2
> 
> 时间：2012-05-02T10:56:44.423
> 
> 标签：java, regex, string, replace

我的字符串看起来像这样：“您可以在 [开始日期 + 30] 之前使用促销活动”。我需要`[ Start Date + 30]`用实际日期替换占位符 - 这是销售的开始日期加上 30 天（或任何其他数字）。`[Start Date]`也可以单独出现而无需添加数字。此外，占位符内的任何额外空格都应该被忽略，并且不会导致替换失败。

在 Java 中做到这一点的最佳方法是什么？我正在考虑查找占位符的正则表达式，但不确定如何进行解析部分。如果只是 [Start Date] 我会使用该`String.replaceAll()`方法，但我不能使用它，因为我需要解析表达式并添加天数。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-02T11:01:30.847

你应该使用`StringBuffer`and [`Matcher.appendReplacement`](http://docs.oracle.com/javase/6/docs/api/java/util/regex/Matcher.html#appendReplacement%28java.lang.StringBuffer,%20java.lang.String%29)and[`Matcher.appendTail`](http://docs.oracle.com/javase/6/docs/api/java/util/regex/Matcher.html#appendTail%28java.lang.StringBuffer%29)

这是一个完整的例子：

```
String msg = "Hello [Start Date + 30] world [ Start Date ].";
StringBuffer sb = new StringBuffer();

Matcher m = Pattern.compile("\\[(.*?)\\]").matcher(msg);

while (m.find()) {

    // What to replace
    String toReplace = m.group(1);

    // New value to insert
    int toInsert = 1000;

    // Parse toReplace (you probably want to do something better :)
    String[] parts = toReplace.split("\\+");
    if (parts.length > 1)
        toInsert += Integer.parseInt(parts[1].trim());

    // Append replaced match.
    m.appendReplacement(sb, "" + toInsert);
}
m.appendTail(sb);

System.out.println(sb); 
```

**输出：**

```
Hello 1030 world 1000. 
```

# java - 如何在选择 html 标记中添加元素列表作为选项

> ID：10412344
> 
> 赞同：0
> 
> 时间：2012-05-02T10:57:04.637
> 
> 标签：java, wicket

我有一个字符串列表，我想在 html 的选择标记中添加它作为选项。在 wicket 中，我找到了 selectOption 示例：[http](http://www.mkyong.com/wicket/wicket-select-example/) ://www.mkyong.com/wicket/wicket-select-example/但存在一个问题。我不想在 html 代码中添加选项。然后我找到了具有参数列表的组件 SelectOptions 但我没有找到任何示例。我不知道我应该在这个组件中添加什么作为最后一个参数 - 渲染。这是将我的列表添加到选择中的正确组件还是我必须将我的列表重写为 html 页面？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-02T11:50:32.503

Have a look at [DropDownChoice excamples](https://cwiki.apache.org/WICKET/dropdownchoice-examples.html) in the Wicket wiki. The DDC Component has a few constructors, so you can adopt it to your needs.

# haskell - 有什么作用。在 Haskell 中做什么？

> ID：10412347
> 
> 赞同：-2
> 
> 时间：2012-05-02T10:57:11.080
> 
> 标签：haskell, syntax

> **可能重复：**
> [Haskell 中的句号或句点或点 (.) 是什么意思？](https://stackoverflow.com/questions/2486564/what-does-a-fullstop-or-period-or-dot-mean-in-haskell)

这是一个普遍的问题，但我实际上不知道为什么会出现。如果您喜欢： sort.function . 实际上呢？或者是什么意思？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-02T10:59:29.800

功能组成。

`(f . g) x`是相同的`f (g x)`

# php - 如果一个字段值高于另一个值，如何显示视图显示

> ID：10412350
> 
> 赞同：0
> 
> 时间：2012-05-02T10:57:26.667
> 
> 标签：php, drupal, views, drupal-views

我有一个包含 2 个计算字段的内容类型 - 我想根据哪个字段最高显示 2 个不同的视图。这可能与视图？我看过论据部分，但老实说，我不是 100% 确定我应该寻找什么。

任何帮助将不胜感激，谢谢

编辑 - 我正在使用 Drupal 和 Drupal 视图

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-20T17:48:03.663

是的你可以。我不确定你想在哪里显示视图。我将假设内容类型。

脚步：

```
1) Create the template file. YOUR-CONTENT-TYPE.tpl.php
2) Write the if statement to validate which view you want to use
3) Then use views_embed_view($name, $display_id = 'default') 
```

如果您仍然迷路，请ping我。

# c# - asp.net 网站完全合格的路径和程序集

> ID：10412357
> 
> 赞同：1
> 
> 时间：2012-05-02T10:57:58.240
> 
> 标签：c#, asp.net

对第 3 方配置的要求是我为其提供：
1.Fully.Qualified.Type.Name， 2 .特定类的
AssemblyNameWithoutTheDllExtension

现在这应该很容易，但我不知道如何解决这个问题。
我有一个 asp.net 网站（网络表单）
我所有的类都在我的 APP_CODE 文件夹内的一个子文件夹中
我的类只是普通的 cs 文件，而不是 dll
一切都在全局命名空间中

（注意，第 3 方是 Quartz.net 参见上一个帖子（[我以前的 Q](https://stackoverflow.com/questions/10296383/quartz-net-from-config-xml-in-asp-net)）

谢谢您的帮助！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-09T10:37:23.847

问题已在我的[Quartz](https://stackoverflow.com/a/10325022/351383)线程中得到解答。但为了让未来的谷歌用户保持通用性：

注意 - 答案来自[jvilalta](https://stackoverflow.com/users/167388/jvilalta)

> var name=yourVariable.GetType().Name 为您提供名称，.Namespace 为您提供命名空间，.Assembly 为您提供程序集名称。我不知道您是否能够从应用程序代码中加载，因为我假设程序集名称在每次编译时都会更改

因此，您需要预先构建您的网站以在 bin 文件夹中生成 app_code.dll，然后您就可以轻松访问

```
<job-type>Fully.Qualified.Type.Name, AssemblyNameWithoutTheDllExtension</job-type> 
```

或者在我的情况下

```
<job-type>HelloJob, App_Code</job-type> 
```

# mysql - 在同一个查询中计算多个行值，mysql

> ID：10412360
> 
> 赞同：2
> 
> 时间：2012-05-02T10:57:59.017
> 
> 标签：mysql, count

表设备：

```
id   device type_id device_status
1     dev1     2        1         
2     dev2     2        2        
3     dev3     7        2         
4     dev5     9        3 
```

型号表：

```
model_id vendor_id model_name
  1        3          name1          
  2        5          name2       
  3        7          name3         
  4        7          name4 
```

查询看起来像这样：

```
 SELECT model_id, type_id, model_name,
 COUNT(type_id) AS numOfDevices
 FROM devices
 LEFT JOIN models ON models.model_id = devices.type_id
 WHERE device_status = 2 OR device_status = 3
 GROUP BY type_id 
```

我从该查询中得到的是：

```
There are $numOfDevices $model_name items. 
```

这没关系，但是有没有办法在同一个查询中只计算 device_status =3 的设备？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-02T11:01:49.887

也许是这样的：

```
SELECT model_id, type_id, model_name,
 SUM(CASE WHEN device_status=2 THEN 1 ELSE 0 END) AS device2,
 SUM(CASE WHEN device_status=3 THEN 1 ELSE 0 END) AS device3,
 SUM(CASE WHEN device_status IN (2,3) THEN 1 ELSE 0 END) AS device2device3
 FROM devices
 LEFT JOIN models ON models.model_id = devices.type_id
 WHERE device_status = 2 OR device_status = 3
 GROUP BY type_id 
```

# jquery - JQuery 对话框没有返回到代码隐藏

> ID：10412361
> 
> 赞同：0
> 
> 时间：2012-05-02T10:58:01.637
> 
> 标签：jquery

我有一个 div 包含确认对话框（是和否按钮），我正在使用下面的 jquery 打开它。但是如果单击“是”并且不应该执行任何操作，我需要转到后面的代码。我正在尝试返回真假，**但它不起作用**..请帮助我..

```
 jQuery(function ($) {
        $('#<%=Gridview1.ClientID%> #confirm-dialog a[id*=lnkupdate]').click(function (e) {
            e.preventDefault();
            if (confirm("Are you sure you want to Update?")) {
               //if yes button is clicked should go to codebehind
                return true;
            } else {
               //if no button is clicked terminate the operation
                return false;
            }
        });
    }); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-02T12:30:22.440

您没有显示用于将数据发送到代码后面的代码。如果这是您拥有的所有代码，那么这还不够，您没有向服务器发送任何内容。

我的第一个（也是尖刻的）建议是尽可能切换到 MVC。它更容易处理。

您要么必须向通用处理程序（一个 ashx 文件）发送一个 ajax 请求，该处理程序将处理您的是/否，要么您必须将整个页面提交给服务器。

使用 jquery 对话框将整个页面发布到服务器将是有问题的，因为 jquery 将对话框 div 标签移动到页面底部，可能在您的表单标签之外。在这种情况下，取 Yes/No 的值并在表单中设置一个隐藏的表单字段。（Jquery 和 WebForms 相处得不是很好。）

最后，小心地在 WebForms 页面上使用 jQuery 移动事物（或者让 jquery 使用模式为您完成）。控件发布时的顺序可能非常变化无常。

# java - Eclipse 插件开发 - 将画布放入编辑器窗口

> ID：10412368
> 
> 赞同：0
> 
> 时间：2012-05-02T10:58:31.340
> 
> 标签：java, eclipse, plugins

我想在 Eclipse 中使用编辑器窗口来显示画布，我希望能够将与可视化编辑器相同的功能组合在一起（下面的示例）![在此处输入图像描述](../Images/365ef5f39f563f2e96a645158c84cbb1.png)

我的问题是我真的不知道从哪里开始 - 我很高兴编写可以做各种事情的插件，但我似乎在这里错过了一个技巧，任何人都可以指出我：

a）要在谷歌上搜索的正确 eclispe 术语（例如，当我发现我想要在 eclipse 中做的是“语法着色”而不是“语法突出显示”时，我做得更好） b）一个教程只是展示了如何放置空间中的图片 c) 一些具有此功能的开源东西，我可以检查它的代码

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-02T14:16:51.423

您会在编辑器底部看到标有“设计”和“源代码”的这两个选项卡。如果您正在做类似的事情，那么您就是在设计一个 Eclipse 多页编辑器。

您需要从扩展 Eclipse 类 MultiPageEditorPart 开始。

这是一篇帮助您入门的 IBM 文章：[使用模板构建 Eclipse 插件](http://www.ibm.com/developerworks/opensource/tutorials/os-eclplgns/section9.html)

# php - Json编码php文件

> ID：10412369
> 
> 赞同：1
> 
> 时间：2012-05-02T10:58:32.627
> 
> 标签：php, json, encode

我想从 mysql 数据库中打印 Json 数据，但数据未在浏览器中正确显示。我正在输入带有重音符号的名称，例如：José 或 L'Alcudia（它们是西班牙名称） 我有两个 php 文件，一个用于将数据插入数据库，另一个用于返回 JSON 数据。另一方面，我有一个允许我输入数据的 html 文件（一个表单）。

```
//HTML FILE
<!DOCTYPE html>
<html lang="es">

<head>
<meta http-equiv="Content-Type" content="text/html;charset=UTF-8">
</head>
<header></header>
<body>
<form id="formulario" name="formulario" method="post" action="insertar_persona.php" enctype="multipart/form-data">  
    <p>Nombre:</p>
    <input type="text" name="nombre" value="nombre" />      
    <br/><br/>
    <input type="submit" id="insertar" name="insertar" value="Insertar"/>

</form>
</body>
</html>

//INSERT PHP FILE

<?php header ('Content-type: text/html; charset=utf-8');
//Credenciales de la BBDD
$db = "prueba";
$host = 'localhost';
$username = "dpbataller";
$password = '1234';

//Conectamos al servidor de la Base de datos
$link = mysql_connect($host,$username,$password) or die("No se puede conectar");
//Seleccionamos la BBDD
@mysql_select_db($db) or die ("No se ha podido seleccionar a la base de datos");
//Lanzamos la consulta
$consulta = mysql_query("INSERT INTO personas (id,nombre) VALUES ('','$_POST[nombre]')");
?>

//GET JSON DATA
<?php header ('Content-type: text/html; charset=utf-8');
//Credenciales de la BBDD
$db = "prueba";
$host = 'localhost';
$username = "dpbataller";
$password = '1234';
//Conectamos al servidor de la Base de datos
$link = mysql_connect($host,$username,$password) or die("No se puede conectar");
//Seleccionamos la BBDD
mysql_select_db($db) or die ("No se ha podido seleccionar a la base de datos");
//Lanzamos la consulta 
$consulta = mysql_query("SELECT id,nombre from personas");
//Creamos un array para almacenar los resultados
$filas = array();
//Agregamos las filas  devueltas al array
while ($r = mysql_fetch_assoc($consulta)) { 
$filas[] = $r;  

}
//Devolvemos el resultado
echo json_encode($filas);
?> 
```

当我尝试通过浏览器显示数据时显示：

```
[{"Id": "1", "name": "Jos \ u00e9"}] 
```

数据库和表的编码是utf-8_spanish_ci

怎么了？有人帮帮我好吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-02T11:04:51.733

Try to change content-type as: application/json

```
<?php header ('Content-type: application/json; charset=utf-8'); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-02T11:06:53.600

您可以使用以下功能：

```
function encodeIt($array) { 
  return json_encode(array_map('base64_encode', $array));
}

function decodeIt($string) {
  return array_map('base64_decode', json_decode($string));
} 
```

# c# - 在 dll 库中显示消息框

> ID：10412374
> 
> 赞同：1
> 
> 时间：2012-05-02T10:59:02.763
> 
> 标签：c#, .net, dll, message

我正在编写一个 dll 库（例如用于检查用户的登录详细信息），我想在此过程中弹出一个确认对话框或信息对话框，例如

`"Are you sure you want to continue? (Yes/No/Cancel)"`

由于某些原因。目前我需要这个用于 Winforms 中的应用程序，我也想为我的其他 webforms 应用程序使用相同的 dll。谁能指导如何实现它？不用多说我不想引用`System.Windows.Forms`或`System.Web`. 任何人都可以给我一些指示吗？我正在使用 .net 4.0

我不想发布/订阅事件，因为我对 cab 架构不是很熟悉。

**编辑**

我有一个用于在应用程序运行时创建数据库的 dll。所以我的 dll 通常会检查数据库是否已经存在并且是否是最新的，如果它是然后停止。但是如果它不存在或不是最新的，那么我想问用户他是想现在还是以后更新它。如果用户现在说，更新它，然后说继续申请。这只是一个示例，欢迎提供任何相关信息。

谢谢。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-02T11:02:44.757

你真的不应该。这不属于库，但应该在使用此库的应用程序中完成。

WinForms 应用程序可能会通过显示 来解决它`MessageBox`，而 Web 应用程序可能会在成功的 POST 之后执行请求而不询问（因为 POST 通常显示修改资源的意图）。

例如，当您的库用于登录时，只需抛出一个`AuthenticationException`，以便客户端应用程序（无论是 WinForms、Web 还是其他）可以捕获并显示适当的消息。

* * *

至于您的编辑：

> 我有一个用于在应用程序运行时创建数据库的 dll ...

为什么不公开两个方法，比如`IsDatabaseUpToDate()`and `UpdateDatabase()`？然后在客户端，就可以调用第一个方法了。如果它返回 false，您将询问用户（无论是使用 MessageBox、HTML 表单、JavaScript 警报、简单的“是”按钮还是闪烁的磁贴）他们是否要更新数据库。如果是这样，你调用该`UpdateDatabase()`方法，你就可以开始了。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-31T20:54:35.523

为此，您需要右键单击项目并选择“添加引用”，然后选择“.NET”选项卡并单击“System.Windows.Forms”。那么这应该在.dll中工作：

```
System.Windows.Forms.MessageBox.Show("Hello World!"); 
```

当然，这对于原始海报（如 CodeCaster 所涵盖）来说是个坏主意。

# iphone - 无法将 Nsarray 的对象转换为字符串

> ID：10412377
> 
> 赞同：0
> 
> 时间：2012-05-02T10:59:22.267
> 
> 标签：iphone, nsstring, nsarray

我正在尝试将数组对象转换为字符串，但它仍然返回对象的地址。它正在返回 - **0x5e1e370** 但应该返回一些字符串值。

```
NSMutableArray *arrStudents = [pillboxDb getStudentRecords];
NSString *strHow = [arrStudents objectAtIndex:0];
NSLog(@"%@",strHow); 
```

这是 getStudentRecords 的代码

```
+(NSMutableArray*)getStudentRecords{

NSArray *arrDocPath = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES);
NSString *strDestPath = [NSString stringWithFormat:@"%@/samplepillbox1.sqlite",[arrDocPath objectAtIndex:0]];
NSMutableArray *arrStudents = [[NSMutableArray alloc]init];
sqlite3 *db;
if(sqlite3_open([strDestPath UTF8String], &db)==SQLITE_OK)
{

    NSString *query = @"select * from doctor_master";
    void* v;
    char* err_msg;
    sqlite3_stmt *studentStmt;

    if(sqlite3_prepare_v2(db, [query UTF8String], -1, &studentStmt, &err_msg)==SQLITE_OK)
    {
        while (sqlite3_step(studentStmt)==SQLITE_ROW) {

            int sno = sqlite3_column_int(studentStmt, 0);
            NSString *sname = [NSString stringWithUTF8String: sqlite3_column_text(studentStmt, 1)];
            //float marks = sqlite3_column_double(studentStmt, 2);

            pillbox *st = [[pillbox alloc]init];
            st.Din = sno;
            st.Name = sname;

            [arrStudents addObject:st];
        }

    }

}
return arrStudents; 
```

}

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-02T11:01:44.450

试试这个：

```
NSString *strHow = [[arrStudents objectAtIndex:0] stringValue] ; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-02T11:06:58.190

也许您的返回对象不是字符串对象。尝试

NSLog(@"%@",arrStudents);

它将向您显示对象类型，然后使用该对象连接字符串

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-02T11:45:07.410

试试这个：

```
NSMutableArray *arrStudents = [pillboxDb getStudentRecords];
pillbox *st = [arrStudents objectAtIndex:0];
NSLog(@"%@ , %d", st.Name,st.Din); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-02T11:20:47.593

您的自定义 pillBox 类（顺便说一句，编码约定是它应该命名为 PillBox）正在使用标准的 NSObject 描述方法：

> description 返回一个字符串，表示接收类的内容。

```
+ (NSString *)description 
```

> 返回值 一个字符串，表示接收类的内容。
> 
> 讨论 调试器的 print-object 命令调用此方法来生成对象的文本描述。
> 
> NSObject 对这个方法的实现只是简单地打印类的名称。

覆盖描述以提供您想要的值。或者，创建一个提供所需字符串的 stringValue 方法。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-02T11:20:47.477

```
NSString *str = [arrStudents ObjectAtIndex:0]; 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-05-02T11:46:37.897

您正在将药盒类的对象添加到数组中。因此您必须首先访问药盒对象，例如

```
for(int i=0;i<[array count];i++)
{
pillbox *pill=[array objectAtIndex:i];

NSLog(@"%@  %@",pillbox.Name,pillbox.Din);
} 
```

现在，您必须从该药盒中访问 pillbox.Name 和 pillbox.Din 作为字符串，您不能直接将数组转换为字符串！

# java - 为什么 toString() 在 Java 中为相同的输入返回不同的值？

> ID：10412384
> 
> 赞同：0
> 
> 时间：2012-05-02T10:59:47.643
> 
> 标签：java, tostring

我正在编写一个 GUI 程序，它具有 JPasswordField 来接收来自用户的文本。然后我使用这个将这个值转换为字符串，如下所示：

```
 char[] pass = txtPass.getPassword(); //where txtPass is the JPasswordField
 System.out.println("Password:");
 ////////////////Check password/////
 for (int i=0; i< pass.length; i++)
    System.out.println(pass[i]);

 System.out.println("String pass"+ pass.toString()); 
```

但是，我执行应用程序的所有内容，我都会收到与 pass.toString() 不同的内容。我希望它们是独一无二的，这样我就可以在上面做更多的密码学功能。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-02T11:03:46.023

Try

```
System.out.println( "String pass: " + new String( pass ) ); 
```

For the very large exponent use Exponentiation by squaring - [http://en.wikipedia.org/wiki/Exponentiation_by_squaring](http://en.wikipedia.org/wiki/Exponentiation_by_squaring)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-02T11:04:48.787

The `toString` function on array will *not* return the characters in the array. Try this instead:

```
char[] pass = txtPass.getPassword(); //where txtPass is the JPasswordField
 System.out.println("Password:");
 ////////////////Check password/////
 for (int i=0; i< pass.length; i++)
    System.out.println(pass[i]);

 System.out.println("String pass"+ new String(pass)); 
```

This will create a new string containing the characters from the array.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-02T11:07:53.437

刚读了Java SDK API，它说得很清楚，

另请参见[JPasswordField 的 toString](http://docs.oracle.com/javase/1.4.2/docs/api/java/awt/Component.html#toString%28%29)

public String toString() { return getClass().getName() + "[" + paramString() + "]";}

toString 方法返回整个 Swing 组件的 toString，因此 getClass().getName() + paramString()。而 getPassword 方法返回输入到组件密码字段中的实际密码。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-02T11:08:51.720

代替

System.out.println("字符串传递"+ pass.toString());

您可以使用

```
System.out.println("String pass"+ String.valueOf(pass)); 
```

哪个可以满足您的要求。

# c++ - 二叉树 - 复制构造函数

> ID：10412385
> 
> 赞同：3
> 
> 时间：2012-05-02T10:59:51.723
> 
> 标签：c++, constructor, tree, copy, binary-tree

我正在尝试为我的二叉树创建一个复制构造函数。

**我的问题：**

我可以看到源树的值被复制到目标树中，但是在写出值时，复制的树中没有值，它崩溃是我的程序。

**错误信息：**

binTree.exe 中 0x0097a43c 处的未处理异常：0xC0000005：访问冲突读取位置 0xccccccec。

**代码：**

// 主要方法

```
 int main(int argc, char **) {
    ifstream fin6("input_data.txt");
    ofstream out9("copied_tree.txt");

    if(!fin6.is_open()) 
    {
        cout << "FAIL" << endl;
        return 1;
    }

    BinaryTreeStorage binaryTreeStorage2;

    // read in values into data structure
    binaryTreeStorage2.read(fin6);

    BinaryTreeStorage binaryTreeStorage3 = binaryTreeStorage2;

    // output values in data structure to a file
    binaryTreeStorage3.write(out9);

    fin6.close();
    out9.close();

    // pause
    cout << endl << "Finished" << endl;
    int keypress; cin >> keypress;
    return 0;
} 
```

// 复制构造函数

```
BinaryTreeStorage::BinaryTreeStorage(BinaryTreeStorage &source)
{
    if(source.root == NULL)
        root = NULL;
    else
        copyTree(this->root, source.root);
} 
```

// 复制树方法

```
void BinaryTreeStorage::copyTree(node *thisRoot, node *sourceRoot)
{
    if(sourceRoot == NULL)
    {
        thisRoot = NULL;
    }
    else
    {
        thisRoot = new node;
        thisRoot->nodeValue = sourceRoot->nodeValue;
        copyTree(thisRoot->left, sourceRoot->left);
        copyTree(thisRoot->right, sourceRoot->right);
    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-02T11:02:06.420

如果在函数中更改指针（而不是指针）的值，则必须传递对该指针的引用：

```
void BinaryTreeStorage::copyTree(node *& thisRoot, node *& sourceRoot) 
```

如果将指针传递给函数，则此指针按值传递。如果您更改指针的值（它存储的地址），则此更改在函数外部不可见（这是您调用 时发生的情况`new`）。因此，要使更改在函数外部可见，您必须传递对要修改的指针的引用。

[这个问题](https://stackoverflow.com/questions/2625869/why-pointer-to-pointer-is-needed-to-allocate-memory-in-function)详细解释了它。

# ruby-on-rails - Rails：分离控制器的局部视图方法

> ID：10412386
> 
> 赞同：2
> 
> 时间：2012-05-02T10:59:55.043
> 
> 标签：ruby-on-rails, methods, action, partial-views

[是否可以在不涉及 AJAX 或不按照此处](https://stackoverflow.com/questions/5941697/make-another-controllers-view-a-partial-rails-3)描述的操作的情况下为特定的局部视图创建单独的控制器操作（方法）？在这两个示例中，视图都不是 Rails 概念中的部分视图。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-02T11:36:46.597

部分是不是整个页面的一段 html 的花哨名称。

您可以在控制器操作中呈现部分内容：

渲染：partial =>“my_partial”

并且该块将被渲染为包含在`_my_partial.html.erb`或其他内容中，并且没有布局。

在现有 (ERB) 模板中，您可以像这样使用相同的部分：

```
<%= render "my_partial" %> 
```

这将呈现并将`_my_partial.html.erb`其插入该位置。

除了调用`render`它自己渲染一个以调用它的动作命名的视图之外，动作名称和视图/视图模板名称之间没有特殊关系。您可以轻松创建没有以它命名的视图模板的操作，反之亦然。但是，如果您创建一个没有视图的操作，您必须`render`在操作中的某个位置调用并明确命名要呈现的视图，否则将导致错误。

更多细节[在这里](http://guides.rubyonrails.org/layouts_and_rendering.html#using-partials)。

# c++ - 使用 createTrackbar 设置图像路径

> ID：10412390
> 
> 赞同：0
> 
> 时间：2012-05-02T11:00:09.317
> 
> 标签：c++, opencv

我正在做一个 OpenCV 项目，需要完成很多测试。因此，我想创建某种带有一些轨迹栏的 GUI，这样我就可以更有效地运行这些测试。（当然我可以一个一个地运行它们，但这会花费很多时间并且效率不高）

例如，我使用这行代码将 .jpg 图像加载为矩阵：

```
Mat testSample = imread("test-01/subject-01_01.jpg"); 
```

是否可以使用 3 个单独的轨迹栏插入所有这些“01”值，而不是硬编码 .jpg 图像的路径。

我尝试使用“可变图像路径”进行谷歌搜索，但所有搜索都指向环境变量，这不是我需要的。谁能给我一个有用的链接或一些提示如何解决这个问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-02T11:31:08.507

我有两个提议：

1.  将每个轨迹栏链接到一个整数变量（`int testIdx`,`int subjIdx`和`int imgIdx`），然后使用该类`std::stringstream`根据您的命名模式生成文件名，使用轨迹栏回调进行用户交互

2.  或者编写一个使用输入配置文件（例如`my_file.xml`或`my_file.yml`）的非交互程序。OpenCV 能够处理这些文件，您可以使用 shell 脚本轻松地创建和填充它们。

# c++ - 分析字符串替换内存泄漏

> ID：10412393
> 
> 赞同：0
> 
> 时间：2012-05-02T11:00:20.490
> 
> 标签：c++, unix, memory-leaks, solaris

我一直在尝试分析执行批量代码时发生的泄漏。在 dbx 中发现了泄漏，泄漏如下所示。

```
 Total     Num of  Leaked     Allocation call stack
  Size      Blocks  Block
                    Address
==========  ====== =========== =======================================

272033    4431      -      operator new < std::basic_string<char,std::char_traits<char>,std::allocator<char> >::__getRep < std::basic_string<char,std::char_traits<char>,std::allocator<char> >::replace 
```

有没有人遇到过这种类型的泄漏。是否可以使用 DBX 注释分析泄漏。因为它是一个巨大的代码，所以代码中泄漏的位置很难

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-02T11:06:44.697

I would try running the app with [libumem](http://developers.sun.com/solaris/articles/libumem_library.html) which helps in identifying memory management issues.

Even though the codebase is huge, you may be able to work this out via *targeted* code review.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-03T11:45:50.737

在线快速检查发现[此问题](http://wesunsolve.net/bugid/id/4520126)与您所看到的相似。不过它已经很老了-您使用的是什么编译器版本？

如果是同样的问题，并且不可能进行完全升级，那么您的困难将是隔离调用该代码的位置并对其进行重新处理以防止它发生。

# wix - 我的 MSIDatabase 中有多个应用程序条目

> ID：10412396
> 
> 赞同：0
> 
> 时间：2012-05-02T11:00:29.617
> 
> 标签：wix, wix3.5

在测试我的 wixxml 脚本时，我不小心在 Add/Remove Progs 中创建了多个条目！

例如：

*   示例演示应用
*   示例演示应用
*   示例演示应用

是否有任何简单的解决方案来摆脱这些条目？请指教。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-03T06:58:47.410

控制面板中的程序信息存储在此注册表项中：

```
HKEY_LOCAL_MACHINE\SOFTWARE\Microsoft\Windows\CurrentVersion\Uninstall 
```

每个产品都有自己的密钥，可以是 GUID 或实际的产品名称。您可以尝试查找您的产品并删除其密钥。

您还可以使用 Microsoft 疑难解答：http: [//support.microsoft.com/kb/2438651/](http://support.microsoft.com/kb/2438651/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-02T11:11:54.870

在 MSI 缓存中查找`%WINDIR%\Installer`。最新的 msi 文件应该是您的实验的副本。

使用 MSIEXEC 命令行参数卸载旧的剩余部分。

# facebook - 无法在 Facebook 应用程序中编辑积分回调 url

> ID：10412399
> 
> 赞同：0
> 
> 时间：2012-05-02T11:00:32.543
> 
> 标签：facebook, credits

我尝试在 Facebook 应用程序编辑页面中编辑积分回调 url。并得到

错误

无法更新测试应用设置，请验证所有测试应用是否有效。

并且没有更多信息。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-03T11:14:03.863

这是一个已知问题，似乎是昨天才引入的，请参阅[https://www.facebook.com/help/community/question/?id=2166100](https://www.facebook.com/help/community/question/?id=2166100)

我想脸书很快就会对此做出反应。

编辑：只是为了提供更新，有两个相关的错误报告：

*   [https://developers.facebook.com/bugs/282014131882255](https://developers.facebook.com/bugs/282014131882255)
*   [https://developers.facebook.com/bugs/145135438951191](https://developers.facebook.com/bugs/145135438951191)

Edit2：现在为我修复！

# c# - 如何将嵌入式资源读取为字节数组而不将其写入磁盘？

> ID：10412401
> 
> 赞同：28
> 
> 时间：2012-05-02T11:00:44.577
> 
> 标签：c#, .net, embedded-resource, codedom, system-codedom-compiler

在我的应用程序中，我使用 CodeDom.Compiler 从 source.cs 文件编译另一个程序，并在编译时使用以下方法嵌入一些资源（exe 和 dll 文件）：

```
 // .... rest of code

if (provider.Supports(GeneratorSupport.Resources))
{
    cp.EmbeddedResources.Add("MyFile.exe");
}
if (provider.Supports(GeneratorSupport.Resources))
{
    cp.EmbeddedResources.Add("New.dll");
}
// ....rest of code 
```

在编译的文件中，我需要将嵌入的资源读取为字节数组。现在我通过使用下面的函数和使用将资源提取到磁盘来做到这一点

```
File.ReadAllBytes("extractedfile.exe");
File.ReadAllBytes("extracteddll.dll"); 
```

我使用此功能将两个文件提取到磁盘后执行此操作：

```
public static void ExtractSaveResource(String filename, String location)
{
    //  Assembly assembly = Assembly.GetExecutingAssembly();
    System.Reflection.Assembly a = System.Reflection.Assembly.GetExecutingAssembly();
    // Stream stream = assembly.GetManifestResourceStream("Installer.Properties.mydll.dll"); // or whatever 
    // string my_namespace = a.GetName().Name.ToString();
    Stream resFilestream = a.GetManifestResourceStream(filename);
    if (resFilestream != null)
    {
        BinaryReader br = new BinaryReader(resFilestream);
        FileStream fs = new FileStream(location, FileMode.Create); // say 
        BinaryWriter bw = new BinaryWriter(fs);
        byte[] ba = new byte[resFilestream.Length];
        resFilestream.Read(ba, 0, ba.Length);
        bw.Write(ba);
        br.Close();
        bw.Close();
        resFilestream.Close();
    }
    // this.Close(); 
} 
```

我怎样才能做同样的事情（将嵌入式资源作为字节数组获取）但不向硬盘写入任何内容？

* * *

## 回答 #1

> 赞同：45
> 
> 时间：2012-05-02T11:03:02.683

您实际上已经将流读取到字节数组，为什么不停在那里呢？

```
public static byte[] ExtractResource(String filename)
{
    System.Reflection.Assembly a = System.Reflection.Assembly.GetExecutingAssembly();
    using (Stream resFilestream = a.GetManifestResourceStream(filename))
    {
        if (resFilestream == null) return null;
        byte[] ba = new byte[resFilestream.Length];
        resFilestream.Read(ba, 0, ba.Length);
        return ba;
    }
} 
```

编辑：请参阅评论以了解更可取的阅读模式。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2020-07-20T04:21:28.160

使用 a 的简单替代方法`MemoryStream`：

```
var ms = new MemoryStream();
await resFilestream.CopyToAsync(ms);
var bytes = ms.ToArray(); 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2018-08-08T14:19:33.053

请记住，嵌入式资源文件名 = Assemblyname.fileName

```
string fileName = "test.pdf";
System.Reflection.Assembly a = System.Reflection.Assembly.GetExecutingAssembly();
string fileName = a.GetName().Name + "." + "test.pdf";

using (Stream resFilestream = a.GetManifestResourceStream(fileName))
{
    if (resFilestream == null) return null;
    byte[] ba = new byte[resFilestream.Length];
    resFilestream.Read(ba, 0, ba.Length);
    var byteArray = ba;
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2021-09-16T16:44:37.933

如果您正在阅读嵌入式资源，这是一种简单的方法。

```
string resourcePath = "pack://application:,,,/resource/location/S_2/{0}";
        StreamResourceInfo resInfo = Application.GetResourceStream(new Uri(resourcePath));

        if (resInfo == null)
        {
            throw new Exception("Resource not found: " + resourcePath);
        }

        var ms = new System.IO.MemoryStream();
        await resInfo.Stream.CopyToAsync(ms);
        byte[] bytes = ms.ToArray(); 
```

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2020-07-04T02:00:30.420

```
File.WriteAllBytes(@"C:\Users\admin\Desktop\MyFile.exe", Resources.BinFile); // binary file
File.WriteAllText(@"C:\Users\admin\Desktop\text.txt", Resources.TextFile); // text file 
```

# asp.net - CustomValidator 中的 RegularExpressionValidator 与 Regex.Match

> ID：10412402
> 
> 赞同：1
> 
> 时间：2012-05-02T11:00:53.883
> 
> 标签：asp.net, regex, validation

我肯定在这里遗漏了一些东西，因为我期望以相同的方式工作，但工作方式不同。

假设以下 RegularExpressionValidator 语法

```
<asp:RegularExpressionValidator runat="server" ID="rxEmail" ControlToValidate="txEmail"
                    ValidationExpression="<%$ appsettings:rxEmail %>" Text="*" /> 
```

和以下 CustomValidator 语法/代码

```
<asp:CustomValidator ID="cvEmail" runat="server" Text="*" onServerValidate="validateContactFormat" />

Sub validateContactFormat(ByVal sender As Object, ByVal args As ServerValidateEventArgs) Handles cvContactFormat.ServerValidate
        Dim emailRegEx As Regex = New Regex(ConfigurationManager.AppSettings("rxEmail"))
        args.IsValid = emailRegEx.IsMatch(txEmail.Text)

End Sub 
```

web.config 中的表达式是

```
[\w-]+@([\w-]+\.)+[\w-]+ 
```

这应该很简单，并清除最明显的问题，而不会太挑剔。

Anywho，给定输入 bob.smith@someplace.co.uk - RegularExpressionValidator 失败，但 CustomValidator 通过。其他情况按预期工作.. 都通过 blah@blah.com，但会失败 blah.com。可能还有其他问题，但这是我注意到的一个。

我猜 CustomValidator 中的代码与 RegularExpressionValidator 会在“幕后”产生的代码不同 - 但究竟有什么区别，为什么我会看到我所看到的？

非常感谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-02T11:06:49.970

```
bob.smith@someplace.co.uk 
```

之前包含一个点`@`。该点与 不匹配`[\w-]+`。

RegularExpressionValidator 根据正则表达式检查*整个* 字符串，并且正确地失败了。

CustomValidator（使用[`Regex.IsMatch()`](http://msdn.microsoft.com/en-us/library/system.text.regularexpressions.regex.ismatch.aspx)）检查*子字符串*是否匹配（并成功`smith@someplace.co.uk`，再次正确）。

为了确保两者的行为相同，请用锚点包围您的正则表达式：

```
"^(?:" + myOldRegex + ")$" 
```

# java - 为什么 Thread 类中的 setName 分配给字符数组？为什么不是字符串？

> ID：10412408
> 
> 赞同：6
> 
> 时间：2012-05-02T11:01:26.770
> 
> 标签：java

当我在 Java 中处理线程概念时，我看到了 Thread.java 源文件。我注意到当`setName()`方法将字符串分配给一个名为`"name[]"`. Java具有String数据类型的特性，那么为什么它们使用字符数组。

在源文件中，它被初始化为，

```
private char name[]; // why not "private String name;" 
```

在`setName()`方法上，

```
public final void setName(String name) {
    checkAccess();
    this.name = name.toCharArray();
    } 
```

请帮我。提前致谢。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-05-02T11:03:18.030

此名称是从本机代码访问的，因此处理 char 数组比处理 Java 类型更容易。邮件列表不久前讨论了这个`core-lib-devs`问题，这里是来自该线程的一封邮件的[链接。](http://mail.openjdk.java.net/pipermail/core-libs-dev/2010-August/004686.html)最初的问题指出*“相当多的时间用于 Thread.setName 调用，我认为其中很大一部分是进行新的字符分配和复制字符数组等”*。引用部分答案：

> 早在 2002 年末就有一次这样的 RFE：
> 
> 4745629（线程）Thread.setName 进行不必要的字符串分配（不要使用 char[]）
> 
> 2002 年的初步评估表明：
> 
> “我无法想象这会严重影响任何实际程序的性能。此外，由于此类与 VM 的密切关系，更改 Thread 中的字段是有问题的。也就是说，在上下文中解决这个问题可能是值得的一些线程代码清理。”
> 
> 然后在 2005 年它被关闭为“不会修复”：
> 
> “名称表示在 JVM 中是一个 char 数组，因此必须尊重地拒绝这个 RFE。”

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-02T11:22:15.760

我认为这很可能是历史文物；即很久以前出于不再相关的原因而完成的事情。

正如 Curtisk 的评论所表明的，有人建议修复此问题。但听起来这些想法已经偏向一边，因为修复的努力超过了收益。很明显，修复这个异常的好处是微乎其微的……除非你创建了很多几乎没有实际工作的线程。

RFE (4745629) 不再对 Google 可见，但David Holmes @ Oracle[发布的这个邮件列表](http://mail.openjdk.java.net/pipermail/core-libs-dev/2010-August/004686.html)引用了它：

> 卢晓斌在 08/11/10 08:07 说：
> 
> > 感谢您的回复。对于很多企业应用程序（比如我工作的那个），相当多的时间都花在了 Thread.setName 调用上，我相信其中很大一部分是进行新的字符分配和复制字符数组等。所以我认为我们应该重新考虑我们如何有效地存储该字段。
> 
> 早在 2002 年末就有一次这样的 RFE：
> 
> 4745629（线程）Thread.setName 进行不必要的字符串分配（不要使用 char[]）
> 
> 2002 年的初步评估表明：
> 
> “我无法想象这会严重影响任何实际程序的性能。此外，由于此类与 VM 的密切关系，更改 Thread 中的字段是有问题的。也就是说，在上下文中解决这个问题可能是值得的一些线程代码清理。”
> 
> 然后在 2005 年它被关闭为“不会修复”：
> 
> “名称表示在 JVM 中是一个 char 数组，因此必须尊重地拒绝这个 RFE。”
> 
> * * *
> 
> 如您所知，同时更改 VM 和 Java 代码确实很难协调，因此必须有一些令人信服的性能证据来支持这一点（假设可以更改）。就我个人而言，我同意上面的初始评估 - 如果 setName 正在影响你的整体性能，那么你的线程不能做太多的实际工作，而且你似乎创建了太多的线程 - 所以我有兴趣在这里更多地了解发生这种情况的上下文。

# x++ - 延长 EDT 不比较日期

> ID：10412412
> 
> 赞同：0
> 
> 时间：2012-05-02T11:01:36.837
> 
> 标签：x++, axapta

有两个从 Transdate 扩展而来的 EDT。他们都有相同的价值观。

目的是比较两个日期，然后执行剩余的循环。但它没有执行循环。

问题不在于比较。例子：

```
x = 5/1/2012; // showing error if we give like this

y = 5\1\2012;

z = systemdateget(); //but taking the same value as x

if(x == z)
{
   .........
}
if(y == z)
{
  ..............
} 
```

我测试了上述工作，这只是举例和理解，但我的主要问题是日期兼容性。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-02T12:21:09.117

您的[日期常数](http://msdn.microsoft.com/en-us/library/aa865135.aspx)应按日、月、年顺序写为 1\5\2012。

请记住：AX 是在丹麦制造的。

# jquery - JQuery：选择页面的可见文本

> ID：10412415
> 
> 赞同：1
> 
> 时间：2012-05-02T11:01:40.357
> 
> 标签：jquery, html

我知道您可以使用类似的内容选择页面的 HTML `$("body").html`，但我想知道是否可以选择 HTML 的可见内容？

例如，以下 HTML：

```
<div>
    <h1>Hello!</h1>
    <p>Main copy text</p>
</div> 
```

而不是选择所有的 HTML，你可以得到：

```
Hello!Main copy text 
```

这可能吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-02T11:04:21.297

**Demo** [http://jsfiddle.net/MntuX/3/](http://jsfiddle.net/MntuX/3/) **or** [http://jsfiddle.net/MntuX/2/](http://jsfiddle.net/MntuX/2/) **or** [http://jsfiddle.net/MntuX/](http://jsfiddle.net/MntuX/)

Api: `.text()` link [http://api.jquery.com/text/](http://api.jquery.com/text/)

**code**

```
$(function(){
    alert($('div').text());
});​ 
```

**OR**

```
$(document).ready(function(){
    alert($('div').text());
});​ 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-02T11:02:52.010

Sure is possible:

[jQuery Text()](http://api.jquery.com/text/)

# android - 是否可以使用 32 位 (ARGB_8888) 表面格式的动态壁纸？

> ID：10412420
> 
> 赞同：1
> 
> 时间：2012-05-02T11:01:59.260
> 
> 标签：android, surfaceview, live-wallpaper, artifacts, dithering

在渲染我的动态壁纸时，我有一些条带渐变伪影。[这篇文章](http://www.curious-creature.org/2010/12/08/bitmap-quality-banding-and-dithering/)完美地解释了这背后的原因：为了消除大部分并提高效率，我可以在 32 位图之上绘制 32 位位图 :)

所以我问自己一个问题：如何为动态壁纸做到这一点？并且找不到答案 :) 在动态壁纸中，我们有一个由 android 框架为我们创建的表面。它发生了，所以它是一个 RGB_565 表面，因为：

```
// code inside my WallpaperService.Engine subclass
public void onSurfaceChanged(SurfaceHolder holder, int format, int width, int height)
{
   Log.d("test", "format is: "+format); // => prints 4, which is PixelFormat.RGB_565
} 
```

看来我无法要求 Android 框架将其更改为 ARGB_8888。或者有吗？

*PS当然我知道我可以做上面文章中描述的其他事情，比如应用抖动等，所以请不要费心指点我。我想找到我问的问题的答案:)*

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-02T11:32:12.577

在 onCreate() 中设置 PixelFormat

```
holder.setFormat(PixelFormat.RGBA_8888); 
```

# curl - Box API 的基本指南对我不起作用

> ID：10412432
> 
> 赞同：3
> 
> 时间：2012-05-02T11:02:31.377
> 
> 标签：curl, box-api

我遵循了 Box API 的基本指南，当我尝试查询任何文件夹时出现 404 错误。（根文件夹或我为证明“任何”而创建的文件夹）

这就是我所做的，我已经更改了我的 API 密钥和电子邮件地址等......（对于由于标记/XML/JSON 被粘贴而引起的任何奇怪之处表示歉意！我试图在不花费很长时间重新格式化所有内容的情况下澄清这一点）
首先，我生成了我的 API 密钥。然后 ：

```
curl  https://www.box.com/api/1.0/rest?action=get_ticket\&api_key=uoun62sm0baxyx53hdzgq9csc5fgJJJJ

<?xml version='1.0' encoding='UTF-8' ?>
<response><status>get_ticket_ok</status>
<ticket>kgof13pk1qq8ls6m2exi8vlupausJJJJ</ticket>
</response> 
```

然后去： [https ://www.box.com/api/1.0/auth/kgof13pk1qq8ls6m2exi8vlupausJJJJ](https://www.box.com/api/1.0/auth/kgof13pk1qq8ls6m2exi8vlupausJJJJ)

以用户身份登录 (max@hotmail.com)，然后返回命令行：

```
curl https://www.box.com/api/1.0/rest?action=get_auth_token\&api_key=uoun62sm0baxyx53hdzgq9csc5fgJJJJ\&ticket=kgof13pk1qq8ls6m2exi8vlupausJJJJ 
```

这给了我一个身份验证令牌：

```
<response><status>get_auth_token_ok</status>
<auth_token>9pqiii88obks0gg9kqtdcfq799bhJJJJ</auth_token>
<user><login>max@hotmail.com</login><email>max@hotmail.com</email>
<access_id>180987265</access_id><user_id>180987265</user_id><space_amount>5368709120</space_amount><space_used>68616595</space_used><max_upload_size>104857600</max_upload_size><sharing_disabled/></user></response> 
```

所以，我应该能够使用我的 API 密钥和身份验证令牌来获取我的根文件夹的内容：

```
curl https://www.box.com/api/2.0/folders/FOLDER_ID \
-H "Authorization: BoxAuth api_key=uoun62sm0baxyx53hdzgq9csc5fgJJJJ&auth_token=9pqiii88obks0gg9kqtdcfq799bhJJJJ" 
```

返回：
`{"type":"error","status":404,"code":"not_found","help_url":"","message":"Unknown Error","request_id":"8614183014fa10d5bcf63b"}`

大概有一些基本的东西我做错了......？

谢谢，马克斯

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-02T17:19:58.640

您需要在 URI 中将 'FOLDER_ID' 替换为 '0' 以获取根文件夹的内容，即

```
curl https://www.box.com/api/2.0/folders/0 \
-H "Authorization: BoxAuth api_key=YOUR_API_KEY&auth_token=YOUR_AUTH_TOKEN" 
```

此外，作为旁注，将您的身份验证令牌/api 密钥发布到诸如此类的公共论坛通常不是一个好主意。

# android - when sending image from assets by email the mailer view shows 0kb size of image?

> ID：10412434
> 
> 赞同：2
> 
> 时间：2012-05-02T11:02:43.077
> 
> 标签：android

i am a new android developer and in my app i want to send an image via email which is placed in Assets folder and the mailer view shows 0 kb size of image attachment but the name of image is properly shown and here is my code is:

```
 try {
   Intent picMessageIntent = new Intent(android.content.Intent.ACTION_SEND);
   picMessageIntent.setType("image/png");

  String str = "image.png"                 
  String imageDirectoryPath = Environment.getExternalStorageDirectory().getAbsolutePath()+"file:///android_asset/Images/" + str;

  File downloadedPic = new File(imageDirectoryPath);
 picMessageIntent.putExtra(Intent.EXTRA_STREAM, Uri.fromFile(downloadedPic));
                                                    startActivity(Intent.createChooser(picMessageIntent, "Send your picture using:"));
 } catch (Exception e) {
    Toast.makeText(MyActivity.this, "No handler", Toast.LENGTH_LONG).show();
  } 
```

Pleas give me any suggestion... Thanx in Advance...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-02T11:15:39.837

MIME 类型有问题 更改 MIME 类型并重试。

```
picMessageIntent.setType("image/*"); 
```

或者

```
picMessageIntent.setType("image/jpg"); 
```

# visual-studio - Visual Studio 2005 自动完成

> ID：10412435
> 
> 赞同：1
> 
> 时间：2012-05-02T11:02:44.387
> 
> 标签：visual-studio, autocomplete, visual-studio-2005

我有visual studio express 2010。每次我写`#include "file.h"` 它时，我都会在我开始打字时自动完成它。

我有另一个版本的 Visual Studio 2005，它不是特快的。在其中我没有这个自动完成功能。

你知道为什么会有这种差异吗？我必须在 Visual Studio 2005 上进行任何配置才能实现此自动完成功能，还是在 2005 年不可用？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-02T12:05:30.017

#include 指令的自动完成是 VS2010 及更高版本独有的功能。它有一个完全重新设计的 IntelliSense 解析器，你在 VS2005 中无法获得此功能。Microsoft 不会将新功能向后移植到旧版本。

# options - JQPlot - 堆叠水平条形图 - 堆叠时没有条形图

> ID：10412439
> 
> 赞同：1
> 
> 时间：2012-05-02T11:02:53.677
> 
> 标签：options, jqplot, bar-chart, stacked

jqplot 有一个奇怪的问题。我创建了一个带有 2 个系列和 5 个标签的水平条形图；全部用表中的变量填充。

```
var plot1 = $.jqplot('chart1', [
    [[SERIESA[0],TITLE[0]], [SERIESA[1],TITLE[1]], [SERIESA[2],TITLE[2]], [SERIESA[3],TITLE[3]], [SERIESA[4],TITLE[4]]], 
    [[SERIESB[0],TITLE[0]], [SERIESB[1],TITLE[1]], [SERIESB[2],TITLE[2]], [SERIESB[3],TITLE[3]], [SERIESB[4],TITLE[4]]]], {
    seriesDefaults: {
        renderer:$.jqplot.BarRenderer,
        // Show point labels to the right ('e'ast) of each bar.
        // edgeTolerance of -15 allows labels flow outside the grid
        // up to 15 pixels.  If they flow out more than that, they 
        // will be hidden.
        pointLabels: { show: true, location: 'e', edgeTolerance: -15 },
        // Rotate the bar shadow as if bar is lit from top right.
        shadow: false,
        // Here's where we tell the chart it is oriented horizontally.
        rendererOptions: {
            barDirection: 'horizontal'
        }
    },
    axes: {
        yaxis: {
            renderer: $.jqplot.CategoryAxisRenderer
        }
    }
}); 
```

这呈现了一个可爱的水平条形图。我希望将 2 系列堆叠在每个标签下，但是当我添加该行时

```
stackSeries: true, 
```

在我的 seriesDefaults 之上，我的酒吧都消失了。其他一切（标签、刻度等）保持不变。除了我需要添加的 stackSeries 选项之外，还有什么？

提前致谢！卡尔

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-02T13:14:44.937

我不确定您的代码可能是什么原因，您显示的内容似乎没问题。也许你设置数据的方式有问题，但又一次它根本不起作用。

[查看我的示例，它可能会对您有所帮助。](http://jsfiddle.net/Boro/gXqPh/10/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-08T08:13:11.630

我找到了一种方法来解决我的问题（不完全，但足以满足我的需要）。仅当我使用从其他地方提取的自定义标签时才会出现此问题；如果我使用通用的“1、2、3、4等” 图表正确堆叠并显示数据。理想情况下，我会有自定义标签，但我可以在图表旁边放一个简单的表格作为轴标签。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-10-11T11:43:36.670

实际上，您可以通过添加 tickt 来自定义标签，例如：

```
 xaxis: {
                renderer: $.jqplot.CategoryAxisRenderer,
                tickOptions: {
                    angle: -90
                },
                labelOptions: {
                    fontSize: '11pt',
                },
                ticks: ['tick 1', 'tick 2'],
            } 
```

# facebook - Posting to facebook fan page and to the user's wall in the same time. Android

> ID：10412447
> 
> 赞同：0
> 
> 时间：2012-05-02T11:03:36.630
> 
> 标签：facebook, facebook-android-sdk

I have my android application allowing user to share interesting fragments of some texts on the Facebook.

Sharing on the user's wall works fine and is implemented using this tutorial: [http://www.integratingstuff.com/2010/10/14/integrating-facebook-into-an-android-application/](http://www.integratingstuff.com/2010/10/14/integrating-facebook-into-an-android-application/)

I also have a facebook fan page of my application and I would like to consolidate all such individual shares on that page. So that when some user shares text on their wall the program would also publish this on facebook fan page, so that if someone is interested in the discussion they could like the fan page and subscribe to all the comments other users make.

My problem is that I can either publish on user's wall or publish on fan page. How can I do both at the same time?

```
public void postToWall(){
    Bundle parameters = new Bundle();
        parameters.putString("message", this.messageToPost);
        parameters.putString("description", this.messageDesc);
        parameters.putString("link", this.messageLink);
 // parameters.putString("target_id", FAN_PAGE_ID);

        try {
                facebook.request("me");
             //   String response = facebook.request("me/feed", parameters, "POST");
                String response = facebook.request(FAN_PAGE_ID+"/feed", parameters, "POST");
                Log.d("Tests", "got response: " + response);
                if (response == null || response.equals("") ||
                response.equals("false")) {
                    showToast("Blank response.");
        }
        else {
            showToast("Message posted to your facebook wall!");
        }
        finish();
    } catch (Exception e) {
        showToast("Failed to post to wall!");
        e.printStackTrace();
        finish();
    }
} 
```

This line publishes to user's wall

```
 String response = facebook.request("me/feed", parameters, "POST"); 
```

And this one to fans page

```
 String response = facebook.request(FAN_PAGE_ID+"/feed", parameters, "POST"); 
```

I have set up permissions for my app to publish on the fan page using this post [Simple example to post to a Facebook fan page via PHP?](https://stackoverflow.com/questions/7818667/simple-example-to-post-to-a-facebook-fan-page-via-php)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-26T19:32:58.697

我遇到了同样的问题，我只是通过两个 asyncfacebookrunner 类完成了请求。所以基本上它们是同时发生的。

```
private AsyncFacebookRunner mAsyncFbRunner; 
private AsyncFacebookRunner mAsyncFbRunner2;

public void postToWall() {

    boolean success = true;

    Bundle params = new Bundle();

    //this is for posting on the walls

    parameters.putString("message", this.messageToPost);
    parameters.putString("description", this.messageDesc);
    parameters.putString("link", this.messageLink);

    mAsyncFbRunner.request("me/feed", params,"POST", new WallPostListener(), success);
    mAsyncFbRunner2.request(FAN_PAGE_ID+/"feed", params,"POST", new WallPostListener(), success);

} 
```

# java - Java - Convert doc/docx file to chm file

> ID：10412449
> 
> 赞同：6
> 
> 时间：2012-05-02T11:03:41.880
> 
> 标签：java, docx, doc, chm

I have an idea of converting Word document(.doc/.docx) files to Help file(.chm) format. I want to use Java for the conversion of files. My formula is simple. To make the Table of Contents page and other links in word document, as package explorer or File explorer and make the user navigation simpler, faster and easy to navigate among the pages in the document.

So, My Question is :

**Are there any native libraries in java that can be imported and used for File Conversion?**

Please share your ideas to implement the above concept.

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-30T18:24:48.793

在 Java 中完成这是一项相当艰巨的任务。但是，如果您安装 Microsoft HTML Help Workshop，您仍然可以这样做。

1.  [首先，您可以通过Apache POI](https://poi.apache.org/hwpf/index.html)提取 Word 文档的文本，然后将它们作为 HTML 文档输出到临时目录。
2.  接下来，您需要创建一个 HHP 文件。它应该很容易创建，因为它是一个文本文件。只需遵循[此处给出的规格](http://www.jmek.net/html_help/06_hhp/06_hhpStructure.html)
3.  那么你也应该有一个相应的 HHC 文件。它是一个简单的 HTML 文档，格式如下：

    ```
    <html>
    <head>
    </head>
    <body>
    <ul>
    <li><object type="text/sitemap">
    <param name="Name" value="Foo Directory">
    <param name="Local" value="BarDirectory/index.htm">
    <param name="ImageNumber" value="1">
    </object></li>
    <ul>
    <li><object type="text/sitemap">
    <param name="Name" value="Topic1">
    <param name="Local" value="BarDirectory/Bar.htm">
    <param name="ImageNumber" value="11">
    </object></li>
    <li><object type="text/sitemap">
    <param name="Name" value="Topic1">
    <param name="Local" value="BarDirectory/Foo.htm">
    <param name="ImageNumber" value="11">
    </object></li>
    </ul>
    </ul>
    </body>
    </html> 
    ```

    同样查找 HHK 文件的结构。

4.  完成后，您可以`hhc.exe <inputfile.hhp>`从 Java 执行。那应该做的工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-30T18:24:44.627

不是我知道的或我能找到的。但是，相反，如果您要手动操作将要使用的所需软件，那么如何制作一个为您完成所有工作的 Java 程序呢？只需发送命令并让它为您执行。我会提供一些代码，但我还没有在 java 中做到这一点。

另一种方法是在 VBscript 中执行，调用某些 java 类来运行，并使用 VBScript 将击键发送到程序。这种方法的唯一缺点是你不能让它在后台运行，并且不能'在完成之前不要使用您的计算机。

# android - How to implement horizontal scroll for toolbar in android?

> ID：10412452
> 
> 赞同：5
> 
> 时间：2012-05-02T11:03:53.647
> 
> 标签：android, scrollview

```
 LinearLayout standardtoolbar = new LinearLayout(context);
        standardtoolbar.setMinimumWidth(10);
        standardtoolbar.setMinimumHeight(50);
        Bitmap toolbarBackgroundImage = SkinManager.getInstance().getImageBitmap("BarBackground");
        Drawable d = new BitmapDrawable(toolbarBackgroundImage);
        standardtoolbar.setBackgroundDrawable(d);
        RelativeLayout.LayoutParams lpstandardtool = new RelativeLayout.LayoutParams(5, LayoutParams.WRAP_CONTENT);
        lpstandardtool.addRule(RelativeLayout.ALIGN_PARENT_LEFT);
        toolbarLayout.addView(standardtoolbar, 0);
        /*toolbarLayout.getScrollX();
        toolbarLayout.scrollBy(5, 0);
        toolbarLayout.setScrollBarStyle(0);
        */    
        ScrollView scroll = new ScrollView(AppController.getInstance().getCurrentActivity());
        scroll.addView(toolbarLayout); 
```

the scroll view is not working for the given layout. The commented code was written for horizontal scroll view. But its not working.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-02T11:18:28.043

在您的 xml 文件 **example.xml**

```
<HorizontalScrollView xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_height="wrap_content" android:layout_width="wrap_content>  

   <LinearLayout android:id="layout" android:layout_height="wrap_content" android:layout_width="wrap_content" android:orientation="horizontal">

   </LinearLayout>
</HorizontalScrollView> 
```

**在java代码中**

```
LinearLayout standardtoolbar = (LinearLayout)findViewById(R.id.layout);
.
.
.
layout.addView(standardtoolbar, 0); 
```

# java - How can I use http://translate.google.com/ to translate the string in Java program?

> ID：10412453
> 
> 赞同：0
> 
> 时间：2012-05-02T11:03:59.407
> 
> 标签：java

I want to use [http://translate.google.com/](http://translate.google.com/) to translate the string. And now I want to sent a string from a java program in [http://translate.google.com/](http://translate.google.com/) to translate the string from english to bangla . And I want to get the translated string as a program output . Anyone can tell me how can I do this......??

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-02T11:15:46.467

如果谷歌不是必须的，你可以考虑必应翻译。[这](http://www.microsoft.com/web/post/using-the-free-bing-translation-apis)是一个关于如何使用免费 API 的链接（该示例使用 C#，但您可以轻松地用 JAVA 编写相同的示例）。我们在我们的项目中使用它并且效果很好。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-02T11:10:17.177

这样做的错误方法：使用 HTTPClient 在 Java 中模拟浏览器请求。这是使用网站的一种不好的方式，因为您会在 HTTP 中做出肮脏的事情，并且每次 Google 修改 translate.google.com 上的 HTML 页面时都必须修改您的程序（即使这应该很少见）。

正确的做法是：使用谷歌为此目的提供的谷[歌翻译 API 。](https://developers.google.com/translate/)它只是一个 REST 服务，所以它在 J​​AVA 中很容易工作。

请注意，据我所知，您每天可以进行的翻译数量仅限于每天一定数量（查看 API 网站上的在线条件）。乍一看，似乎 v2 API 不再免费，我不知道您是否可以坚持使用 v1。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2014-09-19T04:07:51.363

我在按钮上使用了这段代码进行翻译：

```
String translate = "translate this string";    
String locale = Locale.getDefault().getLanguage();
Uri uri = Uri.parse("https://translate.google.com/#auto/"+ locale + "/" + translate);         Intent intent = new Intent(Intent.ACTION_VIEW, uri);
        getApplicationContext.startActivity(intent); 
```

我使用#auto 从字符串翻译中检测自动，并使用语言环境从电话中检测语言环境。

希望这可以帮助 ：）

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-02T11:26:31.657

轻松的任务。

使用这个 - [http://translate.google.com/#](http://translate.google.com/#) { **fromLanguage** }|{ **toLanguage** }|{ **your_string_here** }

只需用您的语言替换语言（您可以在翻译器中检查它 - 短名称）并添加您要翻译的字符串。

您可以向本站提出要求

# scala - 具有 MongoDB 作业存储的 Scala 作业调度程序

> ID：10412455
> 
> 赞同：1
> 
> 时间：2012-05-02T11:04:05.187
> 
> 标签：scala, mongodb, job-scheduling

我正在寻找在 Scala 中使用的简单 Job Scheduler，它可以在 Mongo 中存储作业，或者至少可以简单地扩展为使用 Mongo 作为存储。

任何人都可以提出最好的解决方案吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-03T19:25:30.743

使用 Akka 可以构建一个非常简单但可扩展的调度程序系统：

```
导入 akka.actor._
导入 akka.util.duration._

val system = ActorSystem("SchedulerTest")
案例对象作业

val runnerActor = system.actorOf（道具（
   新演员{
      def receive = { case Job => println("run" + self.path.name)}
   }
))

//在 500 毫秒内向 actor 安排一条 Job 消息
system.scheduler.scheduleOnce(500 毫秒, runnerActor, Job)

//system.scheduler.schedule(0 毫秒, 50 毫秒, runnerActor, Job) //每 50 毫秒重复一条消息

```

工作人员参与者可以选择安排更多事件。可以通过多种不同的方式将配置序列化到数据库。

[关于调度程序的 Akka 2.0 文档](http://doc.akka.io/docs/akka/2.0.1/scala/scheduler.html)

# regex - php preg_match find all parts

> ID：10412456
> 
> 赞同：1
> 
> 时间：2012-05-02T11:04:05.633
> 
> 标签：regex

I need to parse string

```
{name "some" 'words' `or` '}\'other staff' in:0 line:`\`} 
```

into

```
array("some","words","or","}'other staff","in"=>0, "line"=>"\\") 
```

, but preg returns only one match for template, can i do something to get all matches? here is my regex:

```
 !\{
    (\#?[a-zA-Z0-9\_]{1,16})
    (\.[a-zA-Z0-9\_]{1,16})?
    (?P<args>(?P<arg>
    \ +([a-zA-Z0-9\_]{1,16}\:)?
    \'(\\\\|\\\'|[^\'])*?\'|    //argument in singlequote
    \"([^\\\"]|\\.)*?\"|        //argument in doublequote
    \`[^\`]*?\`|                //argument in backquote
    [0-9]*(\.[0-9]*)?           //argument numeral
    )*?)\ *\}! 
```

and i get this:

```
array(1) {
  [0]=>
  array(12) {
    [0]=>
    string(57) "{name "some" 'words' `or` '}\'other staff' in:0 line:`\`}"
    [1]=>
    string(4) "name"
    [2]=>
    string(0) ""
    ["args"]=>
    string(51) " "some" 'words' `or` '}\'other staff' in:0 line:`\`"
    [3]=>
    string(51) " "some" 'words' `or` '}\'other staff' in:0 line:`\`"
    [4]=>
    string(9) " line:`\`"
    ["arg"]=>
    string(8) "line:`\`" //last argument
    [5]=>
    string(8) "line:`\`"
    [6]=>
    string(5) "line:"
    [7]=>
    string(3) "`\`"
    [8]=>
    string(1) "f"
    [9]=>
    string(1) "e"
  }
} 
```

how can i get array of arguments, not the last one?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-02T21:12:01.073

我认为没有办法在 preg 中解析它，我需要使用字符串函数来编写它。

# jquery - jquery 手风琴隐藏显示可见事件触发器

> ID：10412457
> 
> 赞同：1
> 
> 时间：2012-05-02T11:04:07.740
> 
> 标签：jquery, toggle, accordion

我编写了一个基本的手风琴，它使用下一个和上一个按钮来切换表单中的元素。手风琴按设计工作，不需要任何编辑。现在，当显示指定的手风琴窗格时，我只需要触发一次函数。即使用户重新访问该窗格，触发功能也应该只触发一次。

这让我对如何使用 jquery 实时事件和/或可见的伪代码进行此操作感到有些困惑。

任何方向。帮助将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-02T11:07:31.810

我不知道您的代码是什么样的，但是假设您在面板变为活动状态时有某种回调，并且对代表该面板的 DOM 节点有某种引用，您可以执行以下操作：

```
if(! $(panel).data('initialized') ) {
   // initialize panel
   $(panel).data('initialized', true);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-02T11:07:47.033

我会使用手风琴变化事件，绑定到它你可以这样做

```
$('.ui-accordion').bind('accordionchange', function(event, ui) { alert('hello world'); }); 
```

将选择器 $('.ui-accordion') 替换为要绑定到的手风琴的唯一路径。

# 更新只满足一次

在您的方法中使用

```
$('.ui-accordion').unbind('accordionchange'); 
```

以确保它只触发一次。

# iphone - how to support background downloads in iPhone (iOS)

> ID：10412461
> 
> 赞同：0
> 
> 时间：2012-05-02T11:04:47.883
> 
> 标签：iphone, ios, background

I am currently using`**NSURLConnection**`class to download large amount of data (**200MB - 1 GB**). But, my download is getting stopped when the app goes into background.

1- We cant use ASIHTTPRequest as it was discontinued a long time ago.

2- I have also seen [Executing a Finite-Length Task in the Background](https://developer.apple.com/library/ios/#documentation/iPhone/Conceptual/iPhoneOSProgrammingGuide/ManagingYourApplicationsFlow/ManagingYourApplicationsFlow.html#//apple_ref/doc/uid/TP40007072-CH4-SW20) documentation by apple. But it only supports background activity for a limited time.

So , here come my question.....

**How can i support uninterrupted background downloads in iOS**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-16T12:51:14.013

虽然我没有使用它，但[https://github.com/MugunthKumar/MKNetworkKit](https://github.com/MugunthKumar/MKNetworkKit)说它处理后台下载。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-02T11:10:56.207

在设备上，最好将数据分成块，它会一直持续到您的服务器在后台发送数据。动态生成固定大小的块，最后合并它们。

# objective-c - 如何防止切换到 UITextField？

> ID：10412464
> 
> 赞同：1
> 
> 时间：2012-05-02T11:04:56.023
> 
> 标签：objective-c, cocoa-touch, uitextfield

如果您将硬件键盘连接到 iOS 设备（或在模拟器中模拟一个），您可以按下`Tab`键在 UITextField 之间跳转。碰巧我在 s 范围内有一个实例`UITextField`，我不希望用户使用选项卡，但只想从代码中设置为第一响应者。

*有没有办法在不覆盖*UITextField的情况下阻止 Tab 为其提供第一响应者状态？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-02T12:37:13.613

您可以实现`textFieldShouldBeginEditing:`（[UITextFieldDelegate](http://developer.apple.com/library/ios/DOCUMENTATION/UIKit/Reference/UITextFieldDelegate_Protocol/UITextFieldDelegate/UITextFieldDelegate.html#//apple_ref/occ/intfm/UITextFieldDelegate/textFieldShouldBeginEditing%3a)协议）有条件地允许/禁止编辑。

# list - sencha 没有在面板中看到列表

> ID：10412465
> 
> 赞同：1
> 
> 时间：2012-05-02T11:04:58.227
> 
> 标签：list, view, navigation, extjs, panel

嗨，我不明白为什么我在 tab3 中看不到我的列表...

![在此处输入图像描述](../Images/ff24237fad44ca74caa7bc222be50710.png) 这是我的代码...我在 myStore 中添加了一条记录，但我没有看到列表...

提前致谢！

```
 var mainForm ;
var mainFormPanel={};
var addToXml=function (values){};
var htmlTemplate='<p>{b}</p><p>{m}</p><p>{f}</p>';
var template = new Ext.Template(htmlTemplate);

var myStore = Ext.create('Ext.data.Store', {
    storeId: 'MyStore',
    fields: [
             {name: 'id', type: 'string'},
             {name: 'c', type: 'string'},
             {name: 'd', type: 'string'},
             {name: 'q', type: 'string'},
             {name: 'n', type: 'string'}
             ]
}); // create()
myStore.add({id:"id",c:"222",d:"333",q:"444",n:"555"});

var listpanel;

var config={
        glossOnIcon: false,
        autoMaximize: false,
        icon: {
            57: 'lib/sencha-touch/resources/icons/icon.png',
            72: 'lib/sencha-touch/resources/icons/icon@72.png',
            114: 'lib/sencha-touch/resources/icons/icon@2x.png',
            144: 'lib/sencha-touch/resources/icons/icon@114.png'
        },
        phoneStartupScreen: 'lib/sencha-touch/resources/loading/Homescreen.jpg',
        tabletStartupScreen: 'lib/sencha-touch/resources/loading/Homescreen~ipad.jpg',

        //next we require any components we are using in our application.
        requires: [
                   'Ext.tab.Panel',
                   'Ext.form.*',
                   'Ext.field.*',
                   'Ext.Button',
                   'Ext.data.Store'
                   ],

                   launch: function() {            
                       var list= Ext.create("Ext.NavigationView",{
                               xtype: 'list',
                               itemTpl: 'D:{id} - C:{c}',
                               store: myStore,
                               fullscreen: true,
                               layout:'fit',
                               title:'listtitle',
                               onItemDisclosure: function (record, btn, index) {
                                   view.push({
                                       xtype: 'panel',
                                       renderTo: document.body,
                                       layout:'fit',
                                       title: 'second view',
                                       html: 'second view',
                                       styleHtmlContent: true
                                   });
                               }
                       });

                       var myTitle= {
                                       xtype: 'titlebar',
                                       id: 'myTitle',
                                       docked: 'top',
                                       title: 'mytitle'//,
                                    };
                       var myMean={ 
                                       xtype: 'titlebar',
                                       id: 'myMean',
                                       docked: 'bottom',
                                       title: 'myMean'
                                   };

                       listpanel = new Ext.Panel({
                           xtype:'panel',
                           header:true,
                           layout: 'fit',   // important to make layout as 'fit'
                           id:'listpanel',
                           title:'listpanel',
                           items: [myTitle,myMean,list]
                       });

                        var view = Ext.create("Ext.NavigationView", {
                           layout:'fit',
                           id:'view',
                           items: [listpanel]
                       });

                       Ext.Viewport.add({
                           xtype: 'tabpanel',
                           tabBarPosition: 'bottom',
                           items: [
                                   {
                                       title: '1-tab',
                                       layout:'fit',
                                       iconCls: 'home',
                                       html:'tab1',
                                        cls: 'card1'

                                   },
                                   {
                                       title: '2-tab',
                                       layout:'fit',
                                       iconCls: 'download',
                                       html:'tab2',
                                       cls: 'card2'
                                   },
                                   {
                                       title: '3-tab',
                                       layout:'fit',
                                       iconCls: 'home',
                                       items: [view],
                                       cls: 'card3'
                                   },
                                   {
                                       title: '4-tabs',
                                       layout:'fit',
                                       iconCls: 'home',
                                       html: '4-tab',
                                       cls: 'card4'
                                   }
                                   ]
                       });
        }
};
Ext.application(config); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-02T11:12:45.533

您是否尝试过设置 flex: 1, layout: 'vbox' 而不是 layout: 'fit'？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-02T12:38:13.200

解决了在 var 列表中删除全屏：true,layout:'fit' 的问题。

# opengl - 应用材质时着色效果不佳

> ID：10412466
> 
> 赞同：4
> 
> 时间：2012-05-02T11:04:59.167
> 
> 标签：opengl

我有一个带有两个简单对象（glutSolidCube 和 glutSolidTeapot）的 openGL 3d 场景。当我在启用 GL_COLOR_MATERIAL 的情况下设置灯光时，我得到以下结果：

![在此处输入图像描述](../Images/02f9eb9871c0c2bcd401a3a9ce9d316c.png)

哪个好。然后当我像这样设置自己的材料时：

```
//diffuse light color variables
GLfloat dlr = 0.4;
GLfloat dlg = 0.6;
GLfloat dlb = 0.9;

//ambient light color variables
GLfloat alr = 0.7;
GLfloat alg = 0.7;
GLfloat alb = 0.7;

//ambient light color variables
GLfloat slr = 0.4;
GLfloat slg = 0.4;
GLfloat slb = 0.4;

GLfloat DiffuseLight[]  = {dlr, dlg, dlb}; //set DiffuseLight[] to the specified values
GLfloat AmbientLight[]  = {alr, alg, alb}; //set AmbientLight[] to the specified values
GLfloat SpecularLight[] = {slr, slg, slb}; //set AmbientLight[] to the specified values

glMaterialfv(GL_FRONT_AND_BACK, GL_AMBIENT, (float *)&AmbientLight);
glMaterialfv(GL_FRONT_AND_BACK, GL_DIFFUSE, (float *)&DiffuseLight);
glMaterialfv(GL_FRONT_AND_BACK, GL_SPECULAR, (float *)&SpecularLight); 
```

我得到了这个非常不同的结果，您可以看到它没有被正确着色，它就像 FLAT 着色虽然我将它定义为 SMOOTH (Gouraud)。

![在此处输入图像描述](../Images/f4d02437a5635e2fa53b9b8c0bac7647.png)

问题可能出在哪里？是在材质定义上吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-02T13:33:12.867

你忘了设置[镜面反射](http://www.opengl.org/sdk/docs/man/xhtml/glMaterial.xml)。

`glMaterialf(GL_FRONT_AND_BACK, GL_SHININESS, 12.0f);`

将其设置为 10...25，它看起来会更好/更亮。不过，它看起来不如按像素照明好。光泽度的默认值为零，这看起来与您看到的完全一样 - 即丑陋。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-02T13:19:23.920

> 我得到了这个非常不同的结果，您可以看到它没有被正确着色，它就像 FLAT 着色虽然我将它定义为 SMOOTH (Gouraud)。

嗯，你得到了平滑的阴影。然而，OpenGL 固定函数管道仅评估顶点的照明值，然后在面部上执行重心插值。你得到的结果正是预期的结果。

你想要的是每个像素/片段的照明。实现这一点的唯一方法是使用着色器（嗯，也可以通过修补所谓的“纹理组合器环境”，但要让它正常工作是一项艰巨的工作。实现 Phong 照明着色器是一个问题分钟）。

通过更改照明和材质设置，您只是强调了 Gouraud 着色模型的缺点。

# html - CSS 3 Gradient Confines Nested List to Parent UL

> ID：10412467
> 
> 赞同：1
> 
> 时间：2012-05-02T11:04:59.543
> 
> 标签：html, css

I have a horizontal unordered list which I'm using as a main menu, with a nested unorderd list which I'm using as a dropdown sub menu. I'm using a CSS 3 Gradient on the Main Menu but it is causing the sub menu to be confined to the list in IE. What I mean is, if I increase the height of the list items I can see part of the sub menu but this obviously ins't an option.

I have heard about someone encountering this problem before and was wondering if anyone could help. This is the HTML of the menu.

```
 <div id="menu">
      <div class="mainmenu">
        <ul>
          <li>
            <a href='path'>Home</a>
          </li>
          <li>
            <a href='path'>Country Garden</a>
          </li>
          <li>
            <a href='path'>Inner City Garden</a>
          </li>
          <li>
            <a href='path'>Winter Garden</a>
            <ul>
              <li>
                <a href='path'>Featured Products</a>
              </li>
              <li>
                <a href='path'>Best Sellers</a>
              </li>
              <li>
                <a href='path'>Special Offers</a>
              </li>
            </ul>
          </li>
          <li>
            <a href='path'>Water Garden</a>
          </li>
          <li>
            <a href='path'>Window Box</a>
          </li>
        </ul>
      </div>
    </div> 
```

This is the CSS that controls it.

```
 .mainmenu{
        clear: both;
        height: 42px;
        margin: 0;
        width: 980px;
    }
    .mainmenu ul{
        list-style: none;
        margin: 0;
        padding: 0;
        text-align:center;
    }
    .mainmenu li{
        display: inline-block;
        margin: 0;
        padding: 0;
        z-index:1000;
        height: 42px;
        position: relative;
    }
    .mainmenu li a{
        display: inline-block;
        height: 33px;
        padding: 9px 25px 0;
    } 
    .mainmenu ul ul{
        float: left;
        left: 0;
        padding: 5px 0 10px 0;
        position: absolute;
        text-align: left;
        top: 42px;
        width: 200px;
        z-index: 10000;
    }
    .mainmenu li li{
        clear: both;
        text-align: left;
        height: 30px;
    }
    .mainmenu ul li ul{
        display:none;
    }
    .mainmenu li ul li a {
        height: auto;
        padding: 2px 25px;
        width: 150px;
    }
    .mainmenu li ul li a, .mainmenu li.over li a {
        text-decoration: none !important;
    }
     .mainmenu li:hover ul, .mainmenu li.over ul {
        display: block;
    } 
```

This is style that causes the problem in IE8.

```
 .mainmenu li{
            background-color: #25abec;
            background-image:-moz-linear-gradient(top,#25abec,#1984b8);
            background-image:-webkit-gradient(linear,left top,left bottom,from(#25abec),to(#1984b8));
            filter:progid:DXImageTransform.Microsoft.Gradient(startColorStr=#25abec,endColorStr=#1984b8);
        } 
```

It's the final line that causes the problem. If I take it out it works but looks wrong. The problem is in IE and Opera but it works in Firefox, Google Chrome and Safari.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-02T13:46:02.410

IE`filter`有时确实会导致各种问题。我的建议是根本不打开过滤器，让 IE8 只使用普通的 default `background-color`，然后也许[使用 SVG 来获取 IE9 的背景](http://ie.microsoft.com/testdrive/Graphics/SVGGradientBackgroundMaker/Default.html)。

# magento - merge two steps shipping method and payment information in onepage checkout in magento

> ID：10412468
> 
> 赞同：2
> 
> 时间：2012-05-02T11:05:01.250
> 
> 标签：magento

i m working on a projec and my client want to merge two steps shipping method and payment information in single step, when client click on continue then shipping method and payment information both should get saved and review page should get open

* * *

## 回答 #1

> 赞同：-2
> 
> 时间：2012-05-25T05:39:17.683

在工作了大约 25 到 30 天之后，我已经完成了，我将这两个步骤结合起来，并从一个按钮中保存，工作方式与之前的工作方式相同，但我仍然想再做一件事，我想隐藏"li id="opc-shipping_method" class="section"。"

# javascript - Adjusting distance between points in RGraph (javascript)

> ID：10412469
> 
> 赞同：0
> 
> 时间：2012-05-02T11:05:08.117
> 
> 标签：javascript, plot, rgraph

I'm using RGraph's Line charts to plot some chronological data. It works fine, except that the distance between the successive points is always the same - irrespective of whether they are two hours or two months apart. I would like to customize it so that the distance represents the actual time interval between the points. Is this possible using the Line charts or any other charts in RGraph?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-03T21:49:06.133

我就上述问题联系了 RGraph 支持，他们建议我改用[散点图](http://www.rgraph.net/docs/scatter.html)：

> 您最好使用散点图。使用此图表，您可以设置最大 X 值并缩放 X 轴（如果您愿意，可以显示）。

# .net - Excel 互操作以在禁用宏的情况下打开 excel

> ID：10412470
> 
> 赞同：10
> 
> 时间：2012-05-02T11:05:18.640
> 
> 标签：.net, excel, interop, com-interop

C# 中有没有办法在加载 excel 文件之前关闭 excel 中的宏。我正在使用 Excel 互操作加载 excel 文件。我所看到的只是 VB.NET 的解决方案。

谢谢尼山特

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2012-05-02T13:10:22.360

我想你可以在你的 Excel 应用程序上设置它：

```
Excel.Application xapp = new Excel.Application();
xapp.AutomationSecurity = Microsoft.Office.Core.MsoAutomationSecurity.msoAutomationSecurityForceDisable; 
```

# mysql - 查询“每月有多少用户提交内容”

> ID：10412472
> 
> 赞同：1
> 
> 时间：2012-05-02T11:05:21.350
> 
> 标签：mysql

我想统计过去 4 个月每月有多少用户提交内容。我在考虑一个 MySQL `UNION`，但不认为它会起作用，因为它可能会显示重复的行，因为 AFAIK`UNION`只附加 2 个查询结果集。

我的表结构是这样的（`node`来自 Drupal 的典型表——对于 Drupal 大师）：

```
+-----------+------------------+------+-----+---------+----------------+
| Field     | Type             | Null | Key | Default | Extra          |
+-----------+------------------+------+-----+---------+----------------+
| nid       | int(10) unsigned | NO   | PRI | NULL    | auto_increment |
| vid       | int(10) unsigned | NO   | UNI | 0       |                |
| type      | varchar(32)      | NO   | MUL |         |                |
| language  | varchar(12)      | NO   |     |         |                |
| title     | varchar(255)     | NO   | MUL |         |                |
| uid       | int(11)          | NO   | MUL | 0       |                |
| status    | int(11)          | NO   | MUL | 1       |                |
| created   | int(11)          | NO   | MUL | 0       |                |
| changed   | int(11)          | NO   | MUL | 0       |                |
| comment   | int(11)          | NO   |     | 0       |                |
| promote   | int(11)          | NO   | MUL | 0       |                |
| sticky    | int(11)          | NO   |     | 0       |                |
| tnid      | int(10) unsigned | NO   | MUL | 0       |                |
| translate | int(11)          | NO   | MUL | 0       |                |
+-----------+------------------+------+-----+---------+----------------+ 
```

保存节点提交时间的列是`created`。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-02T11:12:35.423

也许是这样的（看起来不那么优雅......）

```
select count(distinct(t1.uid)) from node t1
inner join node t2 on t2.uid = t1.uid and t2.created between date_add(now(), interval -2 month) and date_add(now(), interval -1 month)
inner join node t3 on t3.uid = t1.uid and t3.created between date_add(now(), interval -3 month) and date_add(now(), interval -2 month)
inner join node t4 on t4.uid = t1.uid and t4.created between date_add(now(), interval -4 month) and date_add(now(), interval -3 month)
where t1.created between date_add(now(), interval -1 month) and now() 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-02T11:32:53.620

像这样的东西？

```
select extract(MONTH from create), count(distinct uid)
from node
where create >= DATE_ADD(month,-4,CURDATE())
group by extract(MONTH from create) 
```

我没有测试过...

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-02T12:07:13.023

```
SELECT MONTH(create) as Month,
        (SELECT COUNT(vid) FROM Table WHERE MONTH(create) = Month)
FROM Table
ORDER BY Month DECS
LIMIT 4 
```

# view - IntelliJ IDEA 文件夹而不是项目视图中的包

> ID：10412473
> 
> 赞同：44
> 
> 时间：2012-05-02T11:05:22.197
> 
> 标签：view, intellij-idea, package, directory

IntelliJ IDEA 中是否可以在项目视图中显示文件夹而不是包？Eclipse 中有这样一个特性：我们可以从“包资源管理器”切换到“项目资源管理器”，然后就可以了。

为了更清楚：

我想将包视为文件夹的层次结构。

我想看这个：
![在此处输入图像描述](../Images/673fd0214c6c130a56001d318d21d289.png)

但相反，我看到了这个：

![在此处输入图像描述](../Images/e20ce8dcad0d41621b43f28a58d7cc38.png)

* * *

## 回答 #1

> 赞同：59
> 
> 时间：2012-05-02T11:13:02.650

是的，您可以将“查看方式”从“包”切换到“项目”。

![套餐](../Images/f489d0e4924758b56052ce5cba5e9d09.png)

![项目](../Images/3345471ccd298e0faadc6e179cf64e40.png)

对于扩展文件夹，取消选中 Compact Empty Middle Packages

![在此处输入图像描述](../Images/fa87aad972ecd0422b42efe929690ca3.png)

* * *

## 回答 #2

> 赞同：20
> 
> 时间：2016-08-31T11:18:22.517

很简单，按照这些步骤，你应该能够解决问题

[![第1步](../Images/d737dda4df83aa059b7ce9885a50014a.png)](https://i.stack.imgur.com/6Pjij.png)

然后

[![第2步](../Images/5e28550c78801fe8f8c0412e59c08e42.png)](https://i.stack.imgur.com/OcQOs.png)

完毕 ：-）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-09-30T05:08:47.423

您可以通过进入选项菜单来做到这一点，请按照下面的图片进行操作。（这不是很有用）

[![选项菜单](../Images/4218ce511cefd59b28f675b7d034f88e.png)](https://i.stack.imgur.com/CLBqx.png) [![一](../Images/408c66c1e2b538bd09e134fbb1d51ff2.png)](https://i.stack.imgur.com/3CLFW.png) [![在此处输入图像描述](../Images/b254169cd8f0103391042b3fff183f62.png)](https://i.stack.imgur.com/7QbNQ.jpg) [![三](../Images/af3ea25aeb3ef2e261529d48fc13a23a.png)](https://i.stack.imgur.com/kSNr0.png)

# java - Restlet add parameter to webservice call

> ID：10412474
> 
> 赞同：1
> 
> 时间：2012-05-02T11:05:24.437
> 
> 标签：java, web-services, rest, parameters, restlet

I cannot seem to find anything on the subject on the site of restlet or anywhere on how to add parameters to a webservice call.

I am able to use restlet to call a webservice that doesn't need any parameters and handle the respond.

If you know any other frameworks that are able to call a webservice and pass parameters(rest) please tell me.

Thanks in advance.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2015-08-12T10:02:16.623

要使用 Restlet（2.3 版）向 Web 服务调用添加查询参数，您可以执行以下操作：

```
// Create a client resource which will call a given service
ClientResource clientResource = new ClientResource("http://serviceToCall.com");

// Add a query parameter
clientResource.addQueryParameter("queryParameterName", "queryParameterValue");

// Make a "GET"
clientResource.get(); 
```

这是相应的[Javadocs](http://restlet.com/technical-resources/restlet-framework/javadocs/2.3/jee/api/org/restlet/resource/ClientResource.html#addQueryParameter(java.lang.String,%20java.lang.String))。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-02T12:20:53.253

试试这个。基于来自[Restlet wiki](http://wiki.restlet.org/docs_2.0/13-restlet/21-restlet/318-restlet/320-restlet.html)的示例：

```
// Create the client resource  
ClientResource resource = new ClientResource("http://www.restlet.org");  

// Add a query parameter equiv to ?A=1
resource.getReference().addQueryParameter("A","1"); 

// Customize the referrer property  
resource.setReferrerRef("http://www.mysite.org");  

// Write the response entity on the console
resource.get().write(System.out); 
```

# jsp - 如何从 Liferay 身份验证页面获取值？

> ID：10412476
> 
> 赞同：1
> 
> 时间：2012-05-02T11:05:31.617
> 
> 标签：jsp, authentication, jboss, liferay, roles

大家早上好 ：）

在这种情况下，我想听听您的意见和帮助：

我想检测当前用户登录 Liferay Portal，检索他的角色并根据角色，我想将用户重定向到相应的 JSP 页面。

是否有任何代码或任何解决方案可以帮助我做到这一点？谢谢你，祝你有美好的一天^^

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-02T12:47:26.677

首先是 JSP 页面，我相信您正在像 web/guest/home 一样与 Liferay 页面交谈，因为在门户的上下文中重定向到 jsp 没有意义。其次，我假设您希望在登录后执行此操作，也就是说，一旦您登录，您就想检测用户并检查他的角色，并根据他的角色重定向到 Liferay 页面。

如果这是问题，那么是的，你可以做到。您必须创建一个[Login Post Event](http://www.liferay.com/community/wiki/-/wiki/Main/Customizing+the+default+page+after+login#section-Customizing+the+default+page+after+login-DefaultLandingPageAction.java)挂钩并重定向到该页面。可以获取登录的用户信息user

```
PortalUtil.getUserId(request) 
```

您可以使用 Liferay 的 API 类似地获取用户的角色，例如**user.getRoles()**将返回用户的所有常规角色

我在上面给出的链接中提到了重定向到一个页面。如果您有 Liferay src，那么只需查看 DefaultLandingPageAction 以了解如何将用户重定向到登录后的特定页面。

# javascript - active state in accordion menu

> ID：10412480
> 
> 赞同：4
> 
> 时间：2012-05-02T11:05:37.390
> 
> 标签：javascript, jquery, html, css

I used accordion menu for my web page which is extracted from this site `http://www.designchemical.com/lab/jquery-vertical-accordion-menu-plugin/examples/`.If i click the main menu corresponding sub menu opens. If i click the submenu it redirected to the linked page. But the menu is not in `opened state` in that page. This is my problem. How can i correct that?

The internal script that i have used is

```
<script type="text/javascript">
$(document).ready(function($){
    $('#accordion-3').dcAccordion({
        eventType: 'click',
        autoClose: false,
        saveState: false,
        disableLink: false,
        showCount: false,
        speed: 'slow'
    });
});
</script> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-02T11:16:34.930

将当前状态保存在 cookie 中

```
setCookie('state',$( "#accordion-3" ).accordion('option','active')); 
```

并在重定向后的另一页上

```
$('#accordion-3').dcAccordion({
        active:getCookie('state'), /****activating the current state***/
        eventType: 'click',
        autoClose: false,
        disableLink: false,
        showCount: false,
        speed: 'slow'
    });

/**cookie functionalities***/
function deleteCookie(name) {
        setCookie(name,"",-1);
    }
    function setCookie(name,value,days) {
        if (days) {
            var date = new Date();
            date.setTime(date.getTime()+(days*24*60*60*1000));
            var expires = "; expires="+date.toGMTString();
        }
        else expires = "";
        document.cookie = name+"="+value+expires+"; path=/";
    }
    function getCookie(name) {
        var nameEQ = name + "=";
        var ca = document.cookie.split(';');
        for(var i=0;i < ca.length;i++) {
            var c = ca[i];
            while (c.charAt(0)==' ') c = c.substring(1,c.length);
            if (c.indexOf(nameEQ) == 0) return c.substring(nameEQ.length,c.length);
        }
        return null;
    } 
```

# php - URL 重写在 joomla 2.5 中不起作用

> ID：10412483
> 
> 赞同：1
> 
> 时间：2012-05-02T11:05:47.850
> 
> 标签：php, .htaccess, mod-rewrite, joomla

我只需要在我的 joomla 2.5 中测试 url 重写我已经使用一行编辑了 .htaccess 页面

```
RewriteRule  ^web/company/([A-za-z0-9-]+)$  index.php [NC,L] 
```

我还在 Joomla 的全局配置中将“使用 URL 重写”的标志设置为“是”。

现在，当我使用 url 作为“http://localhost/joomla/web/company/about-us”然后显示我`404 Not Found page`，

有人可以指导我解决这个问题吗？

*   操作系统：Ubuntu 10.04
*   PHP5+
*   Joomla 2.5+

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-03T09:20:02.390

在您的后端将 URL 重写设置为 OFF 并复制“about-us”URL 页面 (index.php?....)。在您的 .htaccess 文件中，删除“index.php”并粘贴新的。

# macos - Mac App Store security IAP (or receipt verification) for educational content

> ID：10412484
> 
> 赞同：1
> 
> 时间：2012-05-02T11:05:57.087
> 
> 标签：macos, xcode4, in-app-purchase, mac-app-store

For **receipt validation** of an application that provides educational content to students, do I need to use `In-App purchase` or it will be fine with only `Receipt validation`?

# java - TestNGException

> ID：10412485
> 
> 赞同：0
> 
> 时间：2012-05-02T11:05:59.537
> 
> 标签：java, eclipse, mocking

I'm getting the below error when I run my test classes. Please advise how to fix this issue?

```
Cannot find class in classpath: za.co.woolworths.core.droplet.DeliverySlotTableDropletTest
at org.testng.xml.XmlClass.loadClass(XmlClass.java:76)
at org.testng.xml.XmlClass.init(XmlClass.java:68)
at org.testng.xml.XmlClass.<init>(XmlClass.java:54)
at org.testng.xml.TestNGContentHandler.startElement(TestNGContentHandler.java:523)
at com.sun.org.apache.xerces.internal.parsers.AbstractSAXParser.startElement(Unknown Source)
at com.sun.org.apache.xerces.internal.parsers.AbstractXMLDocumentParser.emptyElement(Unknown Source)
at com.sun.org.apache.xerces.internal.impl.dtd.XMLDTDValidator.emptyElement(Unknown Source)
at com.sun.org.apache.xerces.internal.impl.XMLDocumentFragmentScannerImpl.scanStartElement(Unknown Source)
at com.sun.org.apache.xerces.internal.impl.XMLDocumentFragmentScannerImpl$FragmentContentDriver.next(Unknown Source)
at com.sun.org.apache.xerces.internal.impl.XMLDocumentScannerImpl.next(Unknown Source)
at com.sun.org.apache.xerces.internal.impl.XMLDocumentFragmentScannerImpl.scanDocument(Unknown Source)
at com.sun.org.apache.xerces.internal.parsers.XML11Configuration.parse(Unknown Source)
at com.sun.org.apache.xerces.internal.parsers.XML11Configuration.parse(Unknown Source)
at com.sun.org.apache.xerces.internal.parsers.XMLParser.parse(Unknown Source)
at com.sun.org.apache.xerces.internal.parsers.AbstractSAXParser.parse(Unknown Source)
at com.sun.org.apache.xerces.internal.jaxp.SAXParserImpl$JAXPSAXParser.parse(Unknown Source)
at javax.xml.parsers.SAXParser.parse(Unknown Source)
at javax.xml.parsers.SAXParser.parse(Unknown Source)
at org.testng.xml.SuiteXmlParser.parse(SuiteXmlParser.java:17)
at org.testng.xml.SuiteXmlParser.parse(SuiteXmlParser.java:10)
at org.testng.xml.Parser.parse(Parser.java:170)
at org.testng.TestNG.initializeSuitesAndJarFile(TestNG.java:305)
at org.testng.remote.RemoteTestNG.run(RemoteTestNG.java:88)
at org.testng.remote.RemoteTestNG.initAndRun(RemoteTestNG.java:202)
at org.testng.remote.RemoteTestNG.main(RemoteTestNG.java:173) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-02T11:23:55.343

您在运行测试用例时是否尝试过 -testjar 标志？或者 -testclass 标志，以防您没有 jar 文件？

尝试将您的测试用例捆绑在一个 jar 中，然后使用 -testjar 标志。

# android - How to create custom Push Notification for my Own App?

> ID：10412488
> 
> 赞同：13
> 
> 时间：2012-05-02T11:06:12.260
> 
> 标签：android, notifications, push-notification

I want to make my own Push Notification that works for my Own App. I know that i have to manage all that threw the Web-Service. But i am wonder about how to make that push Notification.

So can any-one tell me how to make that Custom Push Notification ??

Thanks in Advance.

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-02T11:35:39.877

如果您想自己管理所有内容，请[单击此处](http://www.vogella.com/tutorials/GoogleCloudMessaging/article.html)。这是一个很棒的教程，其中包含建立推送 Web 服务的代码以及应用程序实现。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-02T11:19:53.460

最简单的方法是使用 Urban Airship - [http://urbanairship.com/](http://urbanairship.com/)

检查他们网站上的所有指南/文档，因为他们解释得很好，你需要在谷歌注册一个 C2DM 身份验证令牌，并在 Urban Airship 设置一个免费帐户。然后，这只是配置清单和其他一些类的情况。深入研究 API 文档和指南。城市飞艇罐子也对日志记录有很好的支持，所以如果你不能让它工作，检查 logcat，这通常会给你一个很好的描述它失败的原因。

你还可以做一些其他很酷的事情，比如使用通知来触发运行一些代码等。

通知可以从 Urban Airships 站点/UI 发送，也可以通过 JSON 有效负载通过 HTTP POST 请求从您的 Web 服务器发送到 Urban Airship。

没有 Urban airship，您无法创建大量的服务器基础设施，Urban Airship 有一个非常慷慨的免费包（1000000 个免费通知！）并且还支持跨平台，因此您可以从一个发送通知到您的应用程序的 Android、BB 和 iOS 版本地方。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-08-12T09:38:05.643

你试过 PushApps 吗？您会在这里找到所有详细的答案 - [http://wiki.pushapps.mobi/](http://wiki.pushapps.mobi/)

# java - Java Spring Batch - executing from a jar

> ID：10412489
> 
> 赞同：2
> 
> 时间：2012-05-02T11:06:13.853
> 
> 标签：java, spring, spring-batch

I have created one spring batch project. It executes perfectly as Java application. After that I created a jar file using maven build. But when I tried to run the jar file, the below exception is thrown:

```
=================================================================================
Exception in thread "main" org.springframework.beans.factory.xml.XmlBeanDefinitionStoreException: Line 142 in XML document from class path resource [SICBatchFile.xml] is invalid; nested exception is org.xml.sax.SAXParseException: cvc-complex-type.2.4.c: The matching wildcard is strict, but no declaration can be found for element 'job'.
    at org.springframework.beans.factory.xml.XmlBeanDefinitionReader.doLoadBeanDefinitions(XmlBeanDefinitionReader.java:396)

Caused by: org.xml.sax.SAXParseException: cvc-complex-type.2.4.c: The matching wildcard is strict, but no declaration can be found for element 'job'.
    at com.sun.org.apache.xerces.internal.util.ErrorHandlerWrapper.createSAXParseException(Unknown Source)
    ... 14 more

================================================================================= 
```

It's getting through the mail class. But when reading the xml, it throws this exception. Below is the xml part:

```
 <beans:beans 
        xmlns="ht tp: / /www.springframework.org/schema/batch" 
        xmlns:beans="ht tp: / /www.springframework.org/schema/beans" 
        xmlns:aop="ht tp: / /www.springframework.org/schema/aop"
        xmlns:tx="ht tp: / /www.springframework.org/schema/tx" xmlns:p="ht tp: / /www.springframework.org/schema/p"
        xmlns:xsi="ht tp :/ /www.w3.org/2001/XMLSchema-instance" xmlns:util="ht tp: / /www.springframework.org/schema/util"
        xsi:schemaLocation="ht tp: / /www.springframework.org/schema/beans  ht tp: / /www.springframework.org/schema/beans/spring-beans-2.0.xsd
        ht tp: / /www.springframework.org/schema/batch  ht tp: / /www.springframework.org/schema/batch/spring-batch-2.0.xsd
        ht tp: / /www.springframework.org/schema/aop  ht tp: / /www.springframework.org/schema/aop/spring-aop-2.0.xsd
        ht tp: / /www.springframework.org/schema/tx 
        ht tp: / /www.springframework.org/schema/tx/spring-tx-2.0.xsd">

     <job id="sicProcessorJob" job-repository="jobRepository">
        <step id="step1">
        <tasklet transaction-manager="jobRepository-transactionManager">
            <chunk reader="sicFileItemReader" processor="sicProcessor"
                writer="sicFileItemWriter" commit-interval="3">
        <streams>
            <stream ref="sicFileItemWriter1"/>
            <stream ref="sicFileItemWriter2" />
          </streams>
        </chunk>    
    </tasklet>
    </step>
    <listeners>
      <listener ref="jobListener" />
    </listeners>
  </job> 
```

IDE: Eclipse

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-03T13:05:52.590

> 之后，我使用 maven build 创建了一个 jar 文件。但是当我尝试运行 jar 文件时

如果你只是创建了一个简单的 jar 文件，那么它不能工作，应用程序需要所有库（spring、commons 等）

你可以

*   设置[类路径或使用](http://download.java.net/jdk7/archive/b123/docs/technotes/tools/windows/classpath.html)[清单](http://docs.oracle.com/javase/tutorial/deployment/jar/downman.html)配置它
*   使用 maven 创建（见[stackoverflow 答案](https://stackoverflow.com/questions/8523997/unable-to-locate-spring-namespacehandler-for-xml-schema-namespace-http-www-sp/8574629#8574629)）
    *   可执行的all-in-one.jar
    *   包含所有您需要的目录结构，包括设置正确类路径的 .bat/.sh

# android - Achartengine: scolling and re-draw Pan. How can I do?

> ID：10412491
> 
> 赞同：1
> 
> 时间：2012-05-02T11:06:21.423
> 
> 标签：android, charts, achartengine

I'm using achartengine and I show a ghraph where on the x axis are putted the last 30 days starting by the current date and on the y axis some values from 15 to 0\. In my code I used

```
 for(int i=0; i<= array of value to be inserted i++){
         .....
         aRenderer.addXTextLabel(//value I want is showd on x axis);
         .....
      }
      aRenderer.setXAxisMin(dateMin);
      aRenderer.setXAxisMax(adateMax);
      aRenderer.setXLabels(0); 
```

Now given that I customized my x labels, when I scroll on the right and on the left, the other labesl don't appeare. So I thought of create a new class that implements PanLinstener and in the panApplied() redraw the labels when I scroll the panel. Someone has a better idea to to this?

This is what I obtain when I scroll to left from right:

![enter image description here](../Images/fe81673d74b5efeddac6e680c16ce2dd.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-06T11:42:38.527

我选择实现 PanLinstener，在 panApplied() 方法中重新绘制图形。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-15T12:34:31.947

在 panApplied() 方法下，您将不得不重建自定义标签。您可能需要知道 X 轴范围：renderer.getXAxixMin() 和 renderer.getXAxisMax() 并在此间隔之间添加新的自定义标签。

# javascript - jQuery accordion plugin (like Facebook or Google)

> ID：10412492
> 
> 赞同：2
> 
> 时间：2012-05-02T11:06:25.247
> 
> 标签：javascript, jquery, jquery-plugins, code-reuse

I have seen many scripts for accordion on the internet, but haven't found anything which meets my needs. I want to make a plugin for accordion just like that which Facebook uses. It should work like this:

1.  Click to open and close.
2.  Add style class while open.
3.  Close upon an outside click. **It should not close when click event is inside the accordion box.**

Is there any way to achieve this? Please help if you know. I am new to jQuery...

Thanks in advance.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-03T02:28:35.760

当 15 行代码解决它时，不需要插件：它是关于使用 setTimeout 更改在特定 DOM 元素和窗口上触发的点击事件的顺序。

```
var ShowingAccordion = false;

$(document).ready(function () {

       $('.MyAccordionOpener').click(function () {

             if ($(this).next('.MyAccordion').is(':visible') === false) {

                 ShowingAccordion = false;
                 $('.MyAccordion').hide(500);
                 $(this).next('.MyAccordion').addClass('SomeClass');
                 $(this).next('.MyAccordion').show(500);
                 setTimeout(function () { ShowingAccordion = true; }, 1);
             }
       });

       $('.MyAccordion').click(function () {

             ShowingAccordion = false;
             //this is the line that solves your problem
             setTimeout(function () { ShowingAccordion = true; }, 1);
       });

       $(document).click(function () { 

           if (ShowingAccordion === true) {     

               $('.MyAccordion').hide(500);
               ShowingAccordion = false;
           }    
       });
}); 
```

**这是[演示](http://jsfiddle.net/RyNgq/26/)**

如果它满足您的需求，那么您可以接受答案并快乐编码！

# c# - Timeout error when loading Xml from URL

> ID：10412494
> 
> 赞同：6
> 
> 时间：2012-05-02T11:06:36.177
> 
> 标签：c#, asp.net, xml

I am doing task of loading the live xml file (from live url) to XmlDataDocument, but every time I am getting error:

> The operation has timed out

The code is as follows, The url containing the xml feeds , I want to load it into xmlDoc.

```
XmlDataDocument xmlDoc = new XmlDataDocument();
xmlDoc.Load("http://www.globalgear.com.au/productfeed.xml"); 
```

Please suggest any solution.

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-05-02T11:18:18.463

不要直接使用 XmlDataDocument 类的 Load 方法；当涉及到长时间运行的 HTTP 请求时，您几乎无法影响行为。

相反，请使用 HttpWebRequest 和 HttpWebResponse 类为您完成工作，然后将后续响应加载到您的文档中。

例如：

```
 HttpWebRequest rq = WebRequest.Create("http://www.globalgear.com.au/productfeed.xml") as HttpWebRequest;
    //60 Second Timeout
    rq.Timeout = 60000;
    //Also note you can set the Proxy property here if required; sometimes it is, especially if you are behind a firewall - rq.Proxy = new WebProxy("proxy_address");
    HttpWebResponse response = rq.GetResponse() as HttpWebResponse;

    XmlTextReader reader = new XmlTextReader(response.GetResponseStream());

    XmlDocument doc = new XmlDocument();
    doc.Load(reader); 
```

我已经在本地应用程序实例中测试了此代码，并且 XmlDocument 填充了来自您的 URL 的数据。

您还可以在上面的示例中用 XmlDataDocument 替换 XmlDocument - 我更喜欢使用 XmlDocument，因为它（尚未）标记为过时。

我已经为您将其包装在一个函数中：

```
public XmlDocument GetDataFromUrl(string url)
{
    XmlDocument urlData = new XmlDocument();
    HttpWebRequest rq = (HttpWebRequest)WebRequest.Create(url);

    rq.Timeout = 60000;

    HttpWebResponse response = rq.GetResponse() as HttpWebResponse;

    using (Stream responseStream = response.GetResponseStream())
    {
        XmlTextReader reader = new XmlTextReader(responseStream);
        urlData.Load(reader);
    }

    return urlData;

} 
```

只需调用：

```
XmlDocument document = GetDataFromUrl("http://www.globalgear.com.au/productfeed.xml"); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-02T11:12:41.090

据我所知，没有简单的方法可以使用您使用的方法调整超时。

最简单的更改是使用 webclient 类并设置 timeout 属性。这在此处进行了描述[http://w3ka.blogspot.co.uk/2009/12/how-to-fix-webclient-timeout-issue.html](http://w3ka.blogspot.co.uk/2009/12/how-to-fix-webclient-timeout-issue.html)。然后在 webclient 上使用 downloadfile。然后在 XMLDocument 中加载保存的文件。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-02T11:23:48.087

为您的网络请求设置超时：

```
using System;
using System.Net;
using System.Xml;

namespace Shelver
{
    class Program
    {
        static void Main(string[] args)
        {
            WebRequest requ = WebRequest.Create("http://www.globalgear.com.au/productfeed.xml");
            requ.Timeout = 10 * 60 * 1000; // 10 minutes timeout and not 100s as the default.
            var resp = requ.GetResponse();

            Console.WriteLine("Will download {0:N0}bytes", resp.ContentLength);
            var stream = resp.GetResponseStream();
            XmlDocument doc = new XmlDocument();
            doc.Load(stream);

        }
    }
} 
```

本示例将其设置为 10 分钟。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2017-02-16T19:55:56.340

除了先前的答案（这应该是解决此问题的第一步）之外，尽管已经加载了响应并关闭了连接，但我仍然继续收到此异常。

我的解决方案：如果提供的值实际上不是 XML ， `Load()`and方法将抛出它们自己的 Timeout 异常。`LoadXml()`在我们的案例中，检查以验证响应内容是否为 XML（这将要求您从中获取响应的主机*实际*设置内容类型）。

基于破折号的回答：

```
public XmlDocument GetDataFromUrl(string url)
{
    XmlDocument urlData = new XmlDocument();
    HttpWebRequest rq = (HttpWebRequest)WebRequest.Create(url);

    rq.Timeout = 60000;

    HttpWebResponse response = rq.GetResponse() as HttpWebResponse;

    // New check added to dash's answer.
    if (response.ContentType.Contains("text/xml")
    {
        using (Stream responseStream = response.GetResponseStream())
        {
            XmlTextReader reader = new XmlTextReader(responseStream);
            urlData.Load(reader);
        }
    }

    return urlData;

} 
```

# jasper-reports - Stretch a row with data overflow while having multiple rows in a single band

> ID：10412495
> 
> 赞同：20
> 
> 时间：2012-05-02T11:06:36.433
> 
> 标签：jasper-reports

My requirements bind me to have multiple rows in a single "Details" band.

Right now I am having a static text field (which is highlighted in color) in the leftmost column and three text data fields next to it.

What I want in my report is, the static text band along with the three bands should stretch in height when data in either of the three bands overflows, with the next row "properly" displayed below the stretched row. By "properly" I mean the next row elements should have their "top" values the same and be displayed in the same "row".

I tried setting "Stretch with overflow" flag to "true" and "Position" to "float" but the problem is that the next row data is not properly positioned.

* * *

## 回答 #1

> 赞同：31
> 
> 时间：2012-05-04T08:31:33.393

我找到了答案。解决方案的关键是将一行内的元素组合在一起。

1.  删除所有静态文本标签。请改用文本字段，并将文本放在引号中。它们可以与其他文本字段和数据字段分组。
2.  将引用文本字段之后的所有数据字段放在与引用文本字段相同的组中。
3.  现在，对要显示的所有行执行相同操作。单个行的单独组。

选择组中的所有元素，或所有组中的所有元素，然后执行以下操作：

*   将“位置”设置为“浮动”
*   将“拉伸类型”设置为“相对于最高物体”
*   选中“详细信息溢出时打印”复选框。
*   选中“溢出时拉伸”复选框。

这就是我们可以做的所有事情来让事情“伸展”在一起。

现在，乐队必须通过这些拉伸的细节动态拉伸。只需转到乐队属性，将拆分类型设置为“默认”并将允许拆分为真。这对我有用。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2015-11-03T13:54:12.587

万一有人遇到这个问题并且上面的答案不起作用。我建议检查你的 xml 的根元素。如果它具有以下属性，则将其删除：

```
printOrder="Horizontal" 
```

那么上面的答案应该有效。

希望我能节省一天谷歌搜索相同内容的人。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2014-01-14T11:54:34.213

在我的情况下，按照你的建议做是行不通的。我不得不稍微修改您的解决方案 - 我制作了一个**“框架”而不是对对象进行分组**，并将先前分组的元素放在该框架中。我**在该框架中设置了 positionType="Float" 和 stretchType="No stretch"**，并将**stretchType="RelativeToTallestObject" 设置为其子项**- 然后一切正常。

# php - Displaying children categories in current parent category (Expression Engine)

> ID：10412496
> 
> 赞同：3
> 
> 时间：2012-05-02T11:06:36.920
> 
> 标签：php, search, expressionengine

I need help with expression engines terrible categories system...

I have 4 main categories, each of which have children categories, these children categories have another 2-3 children category groups.

I need a way for users to search through these categories, so the best way is to display the current categories children and provide the user to go back to the last category. (basically a breadcrumb trial with multiple categories.

In a nutshell, how can I display children categories based on the current parent that is active? For example if one of my category structure was as follows:

```
Toys
     -AGE 2-5
         - Cuddly Toys
         - Small Toys
         - Teddy Bears
     -AGE 5-10
         - Lego
         - Cars
         - Dolls
     -AGE 10-16
         - Video Games
         - Board Games
         - Bricks 
```

If the user clicks "Toys", this will redirect to a page with all the toys, then the user can search further by now selecting one of the children categories "AGE 2-5, AGE 5-10 or AGE 10-16\. If they select one of these, they can now search further by choosing another child.

Thanks in advance

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-02T22:34:53.637

这是一种方法。它假设您的 URL 中有一些东西可以通过使用[Low Seg2Cat](http://gotolow.com/addons/low-seg2cat)获得类别信息。这个想法是根据您所在的页面向 Channel Categories 标签传递一个参数。

假设 segment_1 是“玩具”，你可以这样做：

```
{exp:channel:categories category_group="{segment_1_category_group_id}"}
   <a href="{path='template-group/template'}">{category_name}</a>
{/exp:channel:categories} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-02T13:11:59.037

查看[子类别](http://devot-ee.com/add-ons/child-categories)附加组件，以及[GW 代码类别](http://devot-ee.com/add-ons/gwcode-categories)附加组件。我确信其中之一可以实现您想要做的事情。

# rest - REST url 的 WSO2 ESB 主题订阅

> ID：10412509
> 
> 赞同：3
> 
> 时间：2012-05-02T11:07:42.363
> 
> 标签：rest, soap, wso2, wso2esb, esb

我们成功地将 WSO2 ESB 用于调用者和服务（通过消息队列）使用 REST 进行基本调解。

我们现在正在尝试使用主题和订阅模型。但是，与 ESB 的其他部分不同，您可以将消息格式修改为 POX，在订阅界面中，可以将有效负载的格式定义为 URL。ESB 总是将soap 发送到URL，即使我们希望它发送POX。我们不想编写 SOAP 服务。

有没有办法改变订阅者获得的格式？我知道我们可以设置一个代理，然后发送消息等，但这很麻烦，并且不能为新服务自动化。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-03T04:26:10.820

如果您使用 WS-Eventing，那么您会将肥皂消息发送到订阅者端点。您可以使用基于 JMS 的 pub-sub 场景来实现您想要的。请看[1]。

[1] [http://wso2.org/library/articles/2011/12/wso2-esb-example-pubsub-soa](http://wso2.org/library/articles/2011/12/wso2-esb-example-pubsub-soa)

# javascript - 提交表单并将值保存到 sessionStorage

> ID：10412511
> 
> 赞同：4
> 
> 时间：2012-05-02T11:07:48.300
> 
> 标签：javascript, forms, html, session-storage

提交表单时，如何将值从表单保存到 sessionStorage？

像这样的东西？

```
 <form id="myForm" method="get" action="lista.html" rel="external" data-ajax="false" >

        <label for="autonumero"> Anna autonumero </label>
        <input type='tel' name="autonumero" data-corners="false"/>

        <input type="submit" onclick="saveData()" value="OK" data-theme="a" data-corners="false" />

        <script> function savedata()
{ var input = document.getElementById("autonumero");
sessionStorage.setItem("autonumero", input.value); 
</script> 

        </form> 
```

表单也需要提交，因此仅保存值是不够的

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-02T12:18:48.593

尝试：

```
<input type="submit" onclick="return saveData();" value="OK" data-theme="a" data-corners="false" />
<script type="text/javascript"> 
function savedata() { 
  var input = document.getElementById("autonumero");
  sessionStorage.setItem("autonumero", input.value);
  return true;
} 
</script> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-08-02T23:27:23.577

尝试设置输入 id id="autonumero"

```
<input id="autonumero" type="submit" onclick="return saveData();" value="OK" data-theme="a" data-corners="false" /> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-04-30T12:13:49.973

设置`id="autonumero"`为输入字段：

```
<input type='tel' id="autonumero" name="autonumero" data-corners="false"/> 
```

# iframe - 为什么 XUL 弹出窗口中的 iframe 不显示？

> ID：10412514
> 
> 赞同：3
> 
> 时间：2012-05-02T11:08:05.887
> 
> 标签：iframe, firefox-addon, xul

我正在尝试为将播放在线广播的 Firefox 创建插件。我需要用收音机播放器显示 iframe。

当我将它直接放入 XUL 文档时，一切都很好。iframe 被加载并显示：

```
<iframe src="http://player.radiocafe.centrum.cz/back90s/" width="300" height="400" /> 
```

但是当我尝试将它放在弹出窗口中时，iframe 被加载（它占用空间，收音机正在播放，我可以通过 JavaScript 操作 iframe 等），但它的内容没有显示：

```
<toolbarbutton label="Radio test" class="ch-styled" popup="ch-radioTest" />
<panel id="ch-radioTest" position="after_start">
    <iframe src="http://player.radiocafe.centrum.cz/back90s/" width="300" height="400" />
</panel> 
```

知道我在做什么错吗？甚至可能吗？如果不是，为什么？

谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-02T13:24:23.173

实际上，框架显示得很好——如果你把它加宽，你会看到网页正在显示。只是收音机播放器（它是一个 Flash 对象）是不可见的。这看起来像一个平台限制/错误 - 我猜 Gecko 无法正确确定插件应该绘制的区域。您可以在[Bugzilla](https://bugzilla.mozilla.org/)上提交有关此问题的错误，但我认为机会很小。您更有可能必须为此找到解决方法（例如使用无边框对话框窗口而不是面板）。

旁注：

*   您应该在面板上添加`type="content"`属性。否则你让它访问浏览器的 chrome，已经像`top.location = "http://google.com/"`该框架内的代码将是致命的。
*   您应该`src`在面板打开时动态设置框架的属性，并在面板关闭时再次将其删除。由于框架在浏览器窗口内，它会在它第一次变得可见时加载 - 并且在浏览器窗口关闭之前它不会卸载。因此，即使面板已经关闭，音乐也会继续播放。

# java - 从网络浏览器录制用户语音

> ID：10412516
> 
> 赞同：3
> 
> 时间：2012-05-02T11:08:12.693
> 
> 标签：java, php, python, google-chrome, web2py

我正在模拟类似于 Google Chrome 的语音识别插件的东西。我希望从网络浏览器录制语音并将其发送到服务器进行处理。简而言之，我希望按照[Accessing Google Speech API / Chrome 11](http://mikepultz.com/2011/03/accessing-google-speech-api-chrome-11/)中的描述进行操作。我看过类似的帖子，但很少有人回答。而且我也希望不使用闪光灯。我知道这是可能的，因为 chrome 正在这样做！那么我们该怎么做呢？感谢并需要任何语言的任何帮助！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-02T12:00:38.397

> ..我们该怎么做？”

答案在链接文档中提供，即：

> ..Google 将其 Chrome 浏览器的第 11 版推入测试版，随之而来的是一项非常有趣的新功能——支持**HTML5 语音输入 API。**

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-02T12:04:27.210

使用 HTML 5 Speech API，但并非所有浏览器都支持。我们可能需要再等一段时间才能让所有浏览器都支持它。

# c++ - 将纹理转换为 GL_COMPRESSED_RGBA

> ID：10412517
> 
> 赞同：3
> 
> 时间：2012-05-02T11:08:13.447
> 
> 标签：c++, opengl

我正在寻找如何将 GL_RGBA 帧缓冲区纹理转换为 GL_COMPRESSED_RGBA 纹理，最好是在 GPU 上。帧缓冲区显然不能具有 GL_COMPRESSED_RGBA 内部格式，因此我需要一种转换方法。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-02T14:47:23.230

请参阅描述 OpenGL 纹理压缩的[此文档](http://www.hlkclan.net/unreal1/UnrealED%20Utils/s3tc/ARB_texture_compression.pdf)。步骤的顺序就像（这很hacky - 整个纹理的缓冲区对象会有所改善）

```
GLUint mytex, myrbo, myfbo;

glGenTextures(1, &mytex);
glBindTexture(GL_TEXTURE_2D, mytex);
glTexImage2D(GL_TEXTURE_2D, 0, GL_COMPRESSED_RGBA, width, height, 0,
    GL_RGBA, GL_UNSIGNED_BYTE, 0 );

glGenRenderbuffers(1, &myrbo);
glBindRenderbuffer(GL_RENDERBUFFER, myrbo);
glRenderbufferStorage(GL_RENDERBUFFER, GL_RGBA, width, height)

glGenFramebuffers(1, &myfbo);
glBindFramebuffer(GL_FRAMEBUFFER, myfbo);
glFramebufferRenderbuffer(GL_FRAMEBUFFER, GL_COLOR_ATTACHMENT0,
    GL_RENDERBUFFER, myrbo);

// If you need a Z Buffer:
// create a 2nd renderbuffer for the framebuffer GL_DEPTH_ATTACHMENT 

// render (i.e. create the data for the texture)

// Now get the data out of the framebuffer by requesting a compressed read
glCopyTexImage2D(GL_TEXTURE_2D, 0, GL_COMPRESSED_RGBA,
    0, 0, width, height, 0);
glBindFramebuffer(GL_FRAMEBUFFER, 0);
glBindRenderbuffer(GL_RENDERBUFFER, 0);
glDeleteRenderbuffers(1, &myrbo);
glDeleteFramebuffers(1, &myfbo);

// Validate it's compressed / read back compressed data
GLInt format = 0, compressed_size = 0;
glGetTexLevelParameteri(GL_TEXTURE_2D, 0, GL_TEXTURE_INTERNAL_FORMAT, &format);
glGetTexLevelParameteri(GL_TEXTURE_2D, 0, GL_TEXTURE_COMPRESSED_IMAGE_SIZE, 

char *data = malloc(compressed_size);
glGetCompressedTexImage(GL_TEXTURE_2D, 0, data);
glBindTexture(GL_TEXTURE_2D, 0);
glDeleteTexture(1, &mytex);

// data now contains the compressed thing 
```

如果您将 PBO 对象用于纹理，则无需`malloc()`.

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-02T13:39:34.643

如果您想在 GPU 上执行压缩而不传输到 CPU - 这里有两个示例您可以重新用于 OpenGL（它们是基于 DX 的）

1.  [GPU加速纹理压缩](http://www.humus.name/index.php?page=3D&ID=78)
2.  [GPU加速纹理压缩2](http://www.humus.name/index.php?page=3D&ID=79)

希望这可以帮助！

# mysql - 从 MYSQL 访问 MSSQL Db

> ID：10412519
> 
> 赞同：0
> 
> 时间：2012-05-02T11:08:19.080
> 
> 标签：mysql, sql, linked-server

我最近通过创建链接服务器在 MSSQL 中读取了 MYSQL DB。它反过来工作吗？我需要从 MySQL 读取 MSSQL DB。任何想法 ？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-02T11:15:45.843

您需要创建一个 odbc 连接：[http ://dev.mysql.com/doc/refman/5.0/en/connector-odbc-examples-tools-with-access.html](http://dev.mysql.com/doc/refman/5.0/en/connector-odbc-examples-tools-with-access.html)

# ios - 如何在 LeavesViewController 的单个页面中显示多个图像？

> ID：10412522
> 
> 赞同：0
> 
> 时间：2012-05-02T11:08:24.313
> 
> 标签：ios, ios4, page-flipping

Tom Brow 开发的 Leaves 提供的类支持书籍每一页的单个图像，具有翻转效果。在我们的一个项目中，我们需要在单个页面中显示多个图像以及翻转效果。有没有人用“叶子”做到这一点，或者还有其他选择吗？

我们需要单独添加这些图像，以便我们可以使用 UIImage 选择的操作，因为这些图像也需要替换。这个视图也将有 UITextBox 和 UILabel。

我知道从 iOS 5 开始，可以使用 UIPageViewController 来实现此目的，但是对于这个项目，我们还需要支持 iOS4，因此可以排除 UIPageViewController。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-02T11:40:31.887

尝试在图形上下文中渲染两个图像，然后从上下文中提取图像并在 pdfcontext 中绘制。希望这可以帮助你。

# iphone - 无法确定 NSRegularExpression 的模式...？

> ID：10412524
> 
> 赞同：1
> 
> 时间：2012-05-02T11:08:27.010
> 
> 标签：iphone, objective-c, ios, regex, nsregularexpression

我对 NSRegularExpression 比较陌生，只是想不出一个在字符串中查找字符串的模式……这是字符串……

```
#@$294@001@[12345-678[123-456-7@15665@2 
```

我想提取字符串..

`@001@[12345-678[123-456-7@`

有关更多信息，我知道两个之间会有 3 个数字（如`001`）`@`，最后两个之间有 20 个字符`@`。

我尝试了 n 种组合，但似乎没有任何效果。任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-02T11:17:02.683

像这样的东西怎么样：

```
@[0-9]{3}@.{20}@ 
```

如果您知道这 20 个字符将始终由数字`[`和组成`-`，您的模式将变为：

```
@[0-9]{3}@[0-9\[\-]{20}@ 
```

注意反斜杠：当您使用字符串文字 ( `@"..."`) 创建模式时，您需要在每个反斜杠之前添加一个额外的反斜杠。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-02T00:53:20.677

[您可以使用 RegexTester https://github.com/liyanage/regextester](https://github.com/liyanage/regextester)测试 NSRegularExpression 模式，而无需每次都重新编译

# iphone - 从 iPhone 访问电容数据

> ID：10412528
> 
> 赞同：0
> 
> 时间：2012-05-02T11:08:52.103
> 
> 标签：iphone, ios5

我认为制作一个利用 iPhone 屏幕的电容感应能力的应用程序会非常有趣。无论如何我们可以访问这些数据吗？有没有我应该开始研究的核心库？似乎也很难在模拟器中进行测试。

我听说有人肯定会访问加速度计数据...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-02T11:29:52.297

我认为即使使用私有 API 也无法访问此类数据。该功能不会以任何方式公开。

加速度计在 API 中公开，因此情况不同。

# jquery - jquery中的非法字符错误

> ID：10412529
> 
> 赞同：1
> 
> 时间：2012-05-02T11:08:53.313
> 
> 标签：jquery, select, alert

我正在选择下拉列表的选定值的文本值。但我得到这个错误。`illegal character` rname 只是一个字符串值。谁能帮我解决这个问题？

```
alert($("#presetname-"+rname+" option:selected").text()); 
```

非常感谢帮助。

更新：

```
 $('body').find('#toolbar-'+rname).val(selected_preset);
 $('body').find('#presetname-'+rname).val(selected_preset);
 var e="#presetname-"+rname;
  alert($(e+" option:selected").text());​ 
```

最后一行上面没有错误，上面一切正常，所以 rname 值是正确的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-02T11:23:04.503

我认为您没有正确获取 rname...尝试先提醒 rname

```
 <html>
    <head>
    <script src="http://code.jquery.com/jquery-1.7.1.min.js"></script>
    <script>
    $(document).ready(function(){
    $('button').click(function(){
    var rname = 1; //making an unique identifier
    alert($("#presetname-"+rname+" option:selected").text());
    });
    });

    </script>
    </head>
    <body>
      <select id="presetname-1">
      <option value="1">1</option>
      <option value="2">2</option>
      <option value="3">3</option>  
      </select>
      <button>Get</button>  
    </body>
    </html> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-02T11:20:16.230

```
$("#presentname option:selected").text(); 
```

应该足以选择下拉列表中选择的文本值。

确保您的页面中有 jQuery，这意味着您`<script src="http://code.jquery.com/jquery-latest.js"></script>`的`head`.

我做了一个简单的例子，如下：

```
<head>
    <script src="http://code.jquery.com/jquery-latest.js"></script>
    <script type="text/javascript">
    </script>
</head>
<body>
    <select id = presentname>
        <option name="1">aa</option>
        <option name="2">bb</option>
    </select>
</body> 
```

现在，如果我执行 a ，屏幕上会弹出一个包含**aa**`alert($("#presentname option:selected").text());`的警报。

# c# - 将时间跨度转换为 IADSLargeInteger 以进行 Active Directory 设置

> ID：10412531
> 
> 赞同：1
> 
> 时间：2012-05-02T11:09:01.663
> 
> 标签：c#, active-directory, password-policy

我想设置 DirectoryEntry 对象的 MaxPasswordAge 属性。我相信它是 IADSLargeInteger 类型。现在我想以编程方式将其设置为某个值。如何将时间跨度转换为 IADSLargeInteger。例如。如果我想将其设置为 10 天，我该怎么做。直接设置是不行的。

```
DirectoryEntry child = new DirectoryEntry("LDAP://" + domain);
child.Properties["minPwdAge"].Value = ... 
```

我如何将该值设置为 n 天？任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-02T17:14:25.227

我不相信你真的可以写信给这个属性。在任何情况下，您都希望以 FileTime 格式获取它，DateTime 对象会将其作为属性提供给您。

# dojo - 如何使用 Dojo 图表向条形图上的各个条形添加标签

> ID：10412532
> 
> 赞同：0
> 
> 时间：2012-05-02T11:09:06.263
> 
> 标签：dojo, dojox.charting

Dojo 图表上的条形是否可以标有值？我有工具提示，但我希望在打印图表时始终显示条形值。

我也有一些条形图，可以跨越几页。当您打印图表时，它会在到达页面末尾时被切断。

是否可以在每个分页符的页面底部打印 x 轴？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-03T14:35:58.210

> Dojo 图表上的条形是否可以标有值？

还没有。见[http://trac.dojotoolkit.org/ticket/11366](http://trac.dojotoolkit.org/ticket/11366)

# javascript - 如何跨函数使用和重用 JS 变量

> ID：10412536
> 
> 赞同：2
> 
> 时间：2012-05-02T11:09:20.873
> 
> 标签：javascript, jquery, html

我有一种情况，我需要从 jQuery AJAX 调用的结果中初始化/分配变量，然后在脚本中进一步重新使用这些变量：

```
var shouldRedirect = ???

$.ajax({
    url: 'http://example.com',
    type: 'GET',
    data: 'blah',
    asynch: false,
    timeout: 1800,
    success: function(data) {
        shouldRedirect = data.rows[0].redirectFlag
    }
});

if(shouldRedirect)
    window.location = "..."; 
```

我遇到的两个问题：

*   假设生成的 JSON 将包含一个`redirectFlag`布尔值，`data.rows[0].redirectFlag`获取我的变量值的正确方法是什么？和
*   在启动 AJAX 之前我要初始化什么`shouldRedirect`（我怎么说“创建一个变量但还没有给它一个值！”）？

提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-02T11:12:16.660

您可以通过简单地执行以下操作来声明未初始化的变量：

```
var shouldRedirect; 
```

如果您的逻辑需要它，您当然可以将其初始化为 false：

```
var shouldRedirect = false; 
```

不过，这可能不是您想要的。您可以通过严格比较变量来检查变量是否已初始化`undefined`：

```
if (shouldRedirect === undefined) // do something 
```

但请注意，您必须使用三等号运算符（也称为严格相等），否则您的结果将与预期不符。另一方面，未定义的变量将产生错误的结果。这意味着当使用 simple 检查变量`if (shouldRedirect)`并且该变量未定义时，它将 yield `false`，就好像它被设置为 false 一样。这也适用于 JavaScript 中的其他几个值，例如空字符串`""`或值`null`。[您可以在此处](http://docs.nodejitsu.com/articles/javascript-conventions/what-are-truthy-and-falsy-values)查看虚假值的完整列表。如果你想明确地检查真假，并想省略其他假或真值，那么你应该检查三重相等，例如`if (shouldRedirect === true)`。

此外，是否`data.rows[0].redirectFlag`是访问该值的正确方法很大程度上取决于您从 AJAX 调用收到的数据结构的实际外观。如果它类似于以下内容，那将是正确的：

```
{ rows: [ {redirectFlag: true}, {redirectFlag: false} ] } 
```

如果您的 JSON 如下所示

```
{ redirectFlag: false } 
```

然后你必须简单地访问 redirectFlag `data.redirectFlag`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-02T11:13:07.793

*   在 AJAX 启动之前我应该​​初始化什么（我怎么说“创建一个变量但不给它一个值！”）？

    你可以这样做：`var shouldRedirect;`

但是，我会`var shouldRedirect = false;`确保 shouldRedirect 不是未定义的

*   data.rows[0].redirectFlag 是获取变量值的正确方法吗？

取决于您从 AJAX 请求发回的内容。通常响应是 JSON 格式，所以如果你返回一个值为 true 的 JSON 对象，那么你可以这样做：

```
shouldRedirect = data.redirectFlag; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-02T11:14:53.457

对于第 #1 部分，声明一个具有值的变量，使用：var shouldRedirect。这样您就可以执行 if (!shouldRedirect) {}。

对于第 2 部分。如何从redirectFlag中获取值是根据ajax调用返回的数据形成的。data... 将是您获得价值的起点。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-02T11:39:42.120

如评论部分所述，设置`shouldRedirect`标志不会有帮助，因为请求之后的`if`语句`$.ajax`将在从服务器获取结果之前进行评估 - 这是异步代码执行中面临的常见问题。虽然理论上您可以通过参数强制 jQuery.ajax 进入同步模式`sync`，但我不建议这样做，因为它会在发出请求时锁定浏览器 UI。

您需要将重定向代码移动到`$.ajax` `success`函数中，如下所示：

```
$.ajax({
    url: 'http://example.com',
    // ... other options omitted for brevity

    success: function(data) {
        // This code block gets executed when the operation completes.
        var shouldRedirect = data.rows[0].redirectFlag
        if (shouldRedirect) {
            // Your redirection code goes here.
            window.location = "...";
        }
    }
}); 
```

如果您使用 jQuery 1.7 或更高版本，您可以通过[defered object使用它们的](http://api.jquery.com/category/deferred-object/)[Promises/A](http://wiki.commonjs.org/wiki/Promises/A)实现。延迟对象允许您在操作完成时执行一个或多个函数，并使异步代码更易于阅读。

```
$.ajax({ url: 'http://example.com' })
    .done(function(data) { 
        // This code block gets executed when the operation completes.
    }); 
```

除了将函数闭包传递给`done`，您还可以传递对成员函数的引用，例如：

```
$.ajax({ url: url }).done(onDataLoaded);

function onDataLoaded(data) {
    // This function gets called when the ajax operation completes.
} 
```

# python - 使用 Python 包 Adodbapi 访问 .mdb 文件中的表名

> ID：10412538
> 
> 赞同：1
> 
> 时间：2012-05-02T11:09:26.433
> 
> 标签：python

我正在用 Python 编写一个应用程序，并且正在使用 Adodbapi 包来处理我的 sql 查询。对于代码的一部分，我需要与 Access '97（不，这不是错字）数据库进行通信，并且我想通过 SQL 语句获取表名列表。我已经尝试了一堆使用 MSysObjects 的语句，但我遇到了权限问题 - 不，我没有在访问中打开数据库和更改权限的选项。我想 Adodbapi 有一种访问模式信息的方法，但我无法找到它。

在此先感谢您的帮助。

# android - 正常活动中的选项卡控制，有可能吗？

> ID：10412540
> 
> 赞同：1
> 
> 时间：2012-05-02T11:09:40.827
> 
> 标签：android, android-layout, android-tabhost

尝试将 tabhost 布局放入普通布局时遇到了麻烦。

我的布局结构是：

```
<LinearLayout >
    <LinearLayout>
    ....
    </LinearLayout>
   <TabHost>
    .....
   </TabHost>
</LinearLayout> 
```

我尝试绘制这张图片以帮助更容易地想象我在说什么：

![它看起来如何！](../Images/b9599578f2dd38895c7236058b7b8701.png)

你能给我一个关于这个问题的提示吗？我会做剩下的，不需要一个完整的解决方案，只是一个提示，拜托:)

谢谢 。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-10T06:33:31.350

自从我处理 Android 以来已经有一段时间了，但如果我记得 TabHost 本质上是一个容器，它存储选项卡和选项卡之间切换的视口。TabHost 从 FrameLayout 扩展，因此您可以将其用作布局中的根元素。我认为你真正想要的是：

```
<TabHost>
   <LinearLayout android:layout_orientation="vertical">
      <TextView />     // your title
      <View />         // content below your title but above your tabs
      <TabWidget />    // your tabs
      <FrameLayout />  // content controlled by your tabs
   </LinearLayout>
</TabHost> 
```

# iphone - iPhone - 使用核心数据中的子对象从父表中获取数据

> ID：10412541
> 
> 赞同：0
> 
> 时间：2012-05-02T11:09:44.507
> 
> 标签：iphone, objective-c, ios, xcode, core-data

我有两个数据库，如图所示![在此处输入图像描述](../Images/48a1503668d9f4212508882e281f7f7c.png)

我有 NewRelease 对象，我想得到它的父对象，即合同。意味着我想知道这个 NewRelease 对象属于哪个合同。我无法获取数据，任何一个指南都应该是这种情况下的仪式谓词。我使用这个谓词行成功地在 NewRelease 和 Signature Table 中获取了反大小写的数据

```
NSArray *filterResults = [mutableFetchResults filteredArrayUsingPredicate:[NSPredicate predicateWithFormat:@"hasNewReleases = %@",aNewRelease]]; 
```

aNewRelease 是我的 NewRelease 对象现在我如何使用 NewRelease 对象从合同表中获取数据。

NewRelease 和 Contracts 之间存在“一对多”关系，因此一个 Contract 可以属于多个 NewReleases。Npw 正如我上面提到的，我有 newRelease 对象，我想知道这个 newRelease 属于哪个合同。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-02T11:14:24.410

您应该在 NewRelease 中添加一个名为 contId 的属性。这样每个 NewRelease 对象总是有一个合约 ID，因此您可以使用 contractID 轻松获取每个新版本的数据。

寒意 ：）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-02T11:31:58.553

在 NewRelease 和 Contract 表之间添加关系，然后每当您从 NewRelease 或 Contract 实体中获取数据时，您都可以访问具有关联关系的数据。检查以下示例：[http ://www.raywenderlich.com/934/core-data-on-ios-5-tutorial-getting-started](http://www.raywenderlich.com/934/core-data-on-ios-5-tutorial-getting-started)

# jquery - 在 jQuery 中查找具有特定属性或类的祖先

> ID：10412544
> 
> 赞同：8
> 
> 时间：2012-05-02T11:09:53.043
> 
> 标签：jquery, jquery-selectors

我有一个 DOM 元素`elem`，它有一个*祖先*元素，该元素具有该类`myClass`（或者具有某个名称的属性）。问题是**我需要用 jQuery 轻松找到这个祖先**。目前，我被难看的试错法困住了，比如

```
var ancestor = $(elem).parent().parent().parent().parent().parent().parent().parent(); 
```

如果 HTML 代码发生变化，jQuery 代码很容易中断。

是否可以使用更优雅的 jQuery 代码找到祖先元素？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-05-02T11:10:56.520

使用`closest()`，它将从当前元素向上遍历 DOM，直到找到与您提供的选择器匹配的父元素。

```
var ancestor = $(elem).closest(".myClass"); 
```

[文档](http://api.jquery.com/closest)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2016-01-12T08:46:15.353

仅`class`提供解决方案，但不是唯一的解决方案`attribute`。

我在这里找到了我的答案： [jQuery 找到最接近的带有属性的父链接](https://stackoverflow.com/questions/27984795/jquery-find-closest-parent-link-with-attribute)

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-08-23T05:49:04.040

jQuery添加的新方法，该`parents`功能允许您使用选择器检查所有父母。

`var ancestor = $(elem).parents(".myClass");`

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-02T11:12:38.547

尝试

```
var ancestor = $(elem).closest(selector what are you looking for); 
```

# .net - 我们可以将 MKS 2009 迁移到 TFS 2010 吗？如果是，如何以及有哪些工具可用？

> ID：10412555
> 
> 赞同：1
> 
> 时间：2012-05-02T11:10:49.320
> 
> 标签：.net, migration, mks, mks-integrity

我的任务是为某些客户端将 MKS Integrity 迁移到 Team Foundation Server 2010。我对他们俩都是新手。

我熟悉 SVN 和 clearcase，并且每个都使用了 2.5 年。我比 Clearcase 更喜欢 SVN（只是我的看法）

现在回到我的任务，我想知道是否有任何工具可以将 MKS Integrity 转换为 TFS 2010？
如果是，请指导我了解这些工具的好坏，如果有人有这方面的经验的话。
如果不是，我应该采取什么策略来推进该项目？

注意：我对免费工具和商业工具都持开放态度。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-02T12:09:27.543

查看[TFS 集成工具包/TFS 集成平台。](https://blogs.msdn.com/b/willy-peter_schaub/archive/2010/09/02/tfs-integration-platform-or-tools-or-both.aspx?Redirected=true)

# algorithm - 电源组中的动态规划

> ID：10412563
> 
> 赞同：0
> 
> 时间：2012-05-02T11:11:21.877
> 
> 标签：algorithm, set, dynamic-programming, powerset

是否可以在计算字符串的幂集（即该字符串的所有可能子序列）时使用动态规划来显着减少计算次数？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-02T13:03:20.860

不。如果您正在计算一个幂集，那么您正在计算一个幂集，它始终具有相同数量的元素。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-02T14:03:27.680

您永远无法将复杂性降低到*与输出大小成线性关系*以下，因为您需要以某种方式遍历每个输出位。无论使用何种算法，所有问题都是如此。所以 2^n 是计算幂集的下限，因为你需要输出 2^n 个字符串（每个字符串都是多个字符，平均取决于 n，所以甚至更高）。

# jquery - 如何使用 jquery 调用 .net Web 服务？

> ID：10412564
> 
> 赞同：1
> 
> 时间：2012-05-02T11:11:26.520
> 
> 标签：jquery, web-services

我想调用一个使用soap客户端在.net中创建的Web服务。

现在我想用 jQuery 调用这个 Web 服务并在我的 HTML5 页面中显示结果。

我正在使用以下代码，但仅收到错误消息。

```
$(document).ready(function() {
    $.ajax({
        type: "POST",
        url: "http://mysite.com/RSSReader.asmx/MY_method_name_in_web_service",
        data: "{}",
        contentType: "application/json; charset=utf-8",
        dataType: "json",
        success: function(msg) {
            // Hide the fake progress indicator graphic.
            $('#RSSContent').removeClass('loading');

            // Insert the returned HTML into the <div>.
            $('#RSSContent').html(msg.d);
        }
    });
}); 
```

请给我建议。提前致谢

# scala - Akka：演员生成 vs 填满邮箱

> ID：10412565
> 
> 赞同：3
> 
> 时间：2012-05-02T11:11:28.787
> 
> 标签：scala, actor, akka

如果您想同时执行长时间运行的计算（在单台机器上），Akka actor 可以提供帮助。

一种方法是为每件作品生成一个新演员。就像是

```
while(true) {
    val actor = system.actorOf(Props[ProcessingActor])
    (actor ? msg).map { 
        ... 
        system.stop(actor)
    }
} 
```

第二个想法是在路由器后面配置一定数量的参与者。然后将所有消息发送到路由器。

```
val router = system.actorOf(Props[ProcessingActor].withRouter(RoundRobinRouter(nrOfInstances = 5)))
while(true) {
    (router ? msg).map { ... }
} 
```

我想知道，如果系统过载（传入消息的速率高于处理速率），哪个更好？

哪个会持续更长时间？两者最终都会用 OOMError 炸毁系统吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-02T13:18:47.163

在为每个任务创建新任务之前，`Actor`您也可以只使用`Future`. 这实际上取决于您想要实现的目标。为了以最少的内存使用完成尽可能多的工作，您应该使用参与者/路由器方法。期货更昂贵，因为每个任务都会创建一个新的`Future`and实例`Promise`。但这实际上取决于您的用例，哪种方法更好。我只是不会创造很多演员，当真的不需要他们的时候。特别是`system.actorOf`一如既往地创建一个新的错误内核。

# c++ - OpenGL人脸剔除无法正常工作

> ID：10412567
> 
> 赞同：2
> 
> 时间：2012-05-02T11:11:36.540
> 
> 标签：c++, opengl, glut

我在屏幕上画了一个 glutSolidCube 和一个 glutSolidTeapot。

每当我激活 glEnable(GL_CULL_FACE) 时，每个对象都会得到不同的结果。我可以让立方体正确显示（glCullFace（GL_BACK））或茶壶（glCullFace（GL_FRONT）），但不能同时显示它们。

如果我禁用剔除，那么它们都会正确显示，但我希望能够激活它。

我定义的其他对象也没有正确显示。

由于这些对象是在 GLUT 中定义的，我可以猜测这不是它们的法线问题，或者是吗？

我显示效果的图像： ![在此处输入图像描述](../Images/1ef48cc578a83857957b834d7995ad09.png)

灯光定义：

```
void setLighting(void) {

//setMaterial();
glEnable(GL_LIGHTING);
glEnable(GL_LIGHT0);
glEnable(GL_COLOR_MATERIAL);

//ambient light color variables
GLfloat alr = 0.0;
GLfloat alg = 0.0;
GLfloat alb = 0.0;

//diffuse light color variables
GLfloat dlr = 1.0;
GLfloat dlg = 1.0;
GLfloat dlb = 1.0;

//specular light color variables
GLfloat slr = 1.0;
GLfloat slg = 1.0;
GLfloat slb = 1.0;

//light position variables
GLfloat lx = 0.0;
GLfloat ly = 100.0;
GLfloat lz = 100.0;
GLfloat lw = 0.0;

GLfloat DiffuseLight[]  = {dlr, dlg, dlb}; //set DiffuseLight[] to the specified values
GLfloat AmbientLight[]  = {alr, alg, alb}; //set AmbientLight[] to the specified values
GLfloat SpecularLight[] = {slr, slg, slb}; //set AmbientLight[] to the specified values
GLfloat LightPosition[] = {lx, ly, lz, lw}; //set the LightPosition to the specified values

GLfloat global_ambient[] = { 0.1f, 0.1f, 0.1f, 1.0f};
glLightModelfv(GL_LIGHT_MODEL_AMBIENT, global_ambient);
glLightModeli(GL_LIGHT_MODEL_TWO_SIDE, GL_TRUE);
glEnable(GL_LIGHTING);

glLightfv (GL_LIGHT0, GL_DIFFUSE,   DiffuseLight); //change the light accordingly
glLightfv (GL_LIGHT0, GL_AMBIENT,   AmbientLight); //change the light accordingly
glLightfv (GL_LIGHT0, GL_SPECULAR,  SpecularLight); //change the light accordingly

glLightfv (GL_LIGHT0, GL_POSITION,  LightPosition); //change the light accordingly
    } 
```

深度测试和剔除启用：

```
 glEnable(GL_DEPTH_TEST);    // Enable the depth buffer
glHint(GL_PERSPECTIVE_CORRECTION_HINT, GL_NICEST); // Ask for nicest perspective correction

glEnable(GL_CULL_FACE);     // Cull back facing polygons
    glCullFace(GL_BACK); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-02T20:44:51.147

您的深度缓冲看起来很糟糕。

你，

1.  要求足够分辨率的深度缓冲区？（类似于 32 位）
2.  将 GL_DEPTH_BUFFER_BIT 传递给 gl_clear
3.  尝试调整近距和远距剪裁平面之间的距离以获得更好的分辨率？

我知道你发布的关于你定义的对象与过剩茶壶的部分，但过剩茶壶肯定有一个逆时针顶点缠绕，所以当你打开剔除时它没有出现的事实让我觉得深度缓冲区。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-02T11:17:10.180

简单的面剔除基于顶点的顺序 - 无论它们最终在屏幕空间中顺时针还是逆时针。因此，问题可能出在顶点的定义顺序中，或者您可能正在应用某种变换，它会翻转顺序（例如负缩放）。法线仅在照明中起作用。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-02T13:00:50.903

这种说法似乎很奇怪：

> 每当我激活 glEnable(GL_CULL_FACE) 时，每个对象都会得到不同的结果。我可以让立方体正确显示（glCullFace（GL_BACK））或茶壶（glCullFace（GL_FRONT）），但不能同时显示它们。

对此有两种可能的解释：

1.  要么你的 GLUT 有问题，要么你（不小心？）交换了 Z 轴（例如，通过使用所有负距离作为近处和远处的剪裁平面）。

2.  您切换了正面缠绕方向（调用`glFrontFace`）

> 我定义的其他对象也没有正确显示。

正面由屏幕空间顶点缠绕决定。屏幕上的顶点以顺时针或逆时针顺序排列。默认情况下，OpenGL 假定以逆时针顺序绘制顶点的面作为正面。为此不考虑法线。

我认为解决此问题的最简单方法是交换提交顶点的顺序。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2021-04-05T14:20:45.190

我认为 GLUT 茶壶只有在没有启用 CULL_FACE 的情况下才能正确渲染，这表明生成的法线与顶点顺序不对应。这样做的视觉效果是茶壶似乎与其他物体的旋转方向相反。这是众所周知的旋转空心面罩的效果。大脑试图从灯光中获取线索来理解场景。如果我在绘制之前通过 glScalef(-1,-1,-1) 反转空间，它看起来就像一个普通的茶壶，即使在剔除时也是如此。

还要注意茶壶不是一个封闭的表面，剔除可以让你沿着盖子周围的缝隙看透它。

如果您想在这个不可剔除的茶壶旁边组合“可剔除”对象，您可以在渲染茶壶时关闭剔除。

* * *

## 回答 #5

> 赞同：-2
> 
> 时间：2021-04-19T00:16:32.187

OMG，我最近几天一直在研究这个问题，只是找到了那个解决方案。

显然！，你必须设置：

```
glEnable(GL_DEPTH_TEST);
glEnable(GL_CULL_FACE);     //    Don't waste energy trying the glCullFace(GL_BACK);  
                            //    thing since its set at GL_BACK by default.
                            //    Yes, it does cuts triangle NOT facing you. 
```

此外，请确保您的相机没有处于 0.0000001f 到 10 亿这样的疯狂距离。

然后，除了一个晦涩的教程之外，我在任何地方都没有找到它，但是你必须设置你的 depthframebuffer（是的，另外 5 行就在那里）。

在生成帧缓冲区名称（glGenFramebuffers(1, &FramebufferName);）之后和显示/循环之前，将这 5 行放在任何地方，这样就可以解决问题。我在 FramebufferName 生成之前尝试过它并没有用。但是在纹理生成之前或之后，它仍然有效。

```
// The depth buffer
GLuint depthrenderbuffer = 0;
glGenRenderbuffers(1, &depthrenderbuffer);
glBindRenderbuffer(GL_RENDERBUFFER, depthrenderbuffer);
glRenderbufferStorage(GL_RENDERBUFFER, GL_DEPTH_COMPONENT, windowWidth, windowHeight);
glFramebufferRenderbuffer(GL_FRAMEBUFFER, GL_DEPTH_ATTACHMENT, GL_RENDERBUFFER, depthrenderbuffer); 
```

多年来，这个 openGL 确实让我发疯了，我仍然无法找到一个完整的更高级别的 c++ 库来覆盖每个 opengl 调用。但是我现在正在建造一个，如果有人感兴趣，我可能会在这些日子里发布它。

# asp.net-mvc - Telerik mvc 网格与编辑模式 true 或 false

> ID：10412572
> 
> 赞同：0
> 
> 时间：2012-05-02T11:12:06.207
> 
> 标签：asp.net-mvc, grid, telerik

哪种方法可以很好地管理网格是否应该是 .Editable。我在哪里可以根据服务器端发生的事情来控制 .Editable 是真还是假？

我想这样做是因为如果我在例如 DB 中有一个字段告诉我“editdata = false”，我不希望能够编辑网格，因此我无法更改网格中的这些数据。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-20T03:29:08.157

我能想到的最简单的方法是在控制器中设置 ViewBag.GridEditMode 或类似的东西。

因此，例如，如果网格需要可编辑，请在您的控制器中；

```
ViewBag.GridEditMode = true; 
```

然后，在您的视图中设置网格模式，例如，

```
.Editable((bool)ViewBag.GridEditMode) 
```

希望这可以帮助。

# java - 指针和 if 语句错误，在 C 代码中，同时在 Java 中转换

> ID：10412585
> 
> 赞同：1
> 
> 时间：2012-05-02T11:12:47.387
> 
> 标签：java, c

我正在尝试将 C 代码转换为 java，它是 Newton Raphson 算法实现。一切进展顺利，但存在 C 代码中使用的指针问题，我已在 java 中删除了它们。C代码部分是：

```
 x = newton(x_0, error, max_iters, &iters, &converged); //Call to a function (newton)

   if (converged) {

printf("Newton algorithm converged after %d steps.\n", iters);

    printf("The approximate solution is %19.16e\n", x);
    printf("f(%19.16e) = %19.16e\n", x, f(x));
   } else 
{

printf("Newton algorithm didn't converge after %d steps.\n", 
          iters);

    printf("The final estimate was %19.16e\n", x);
    printf("f(%19.16e) = %19.16e\n", x, f(x));
  } 
```

**函数定义是这样的：**

```
double newton(double x_0, double error, int max_iters, 
          int* iters_p, int* converged_p) 
```

**现在的问题是，两个指针变量的值每次都为零。if(converged) 还显示了不兼容类型的错误消息。必需的布尔值，找到 int。下面是java代码，所以请帮助克服这个问题。**

```
 //Member Functions///////
 public
            double function( double x) 
            { 
                return x*x - 2;
            }

            double F_Deriv( double x ) 
            {
                return 2.0*x; 
            }

            double newton(double x_0, double error, int max_iters,int iters, int converged) 
            {
   double x = x_0;
   double x_prev;
   int    iter = 0;

   do {
      iter++;
      x_prev = x;
      x = x_prev - function(x_prev)/F_Deriv(x_prev);
   } 
   while (Math.abs(x - x_prev) > error && iter < max_iters);

   if (Math.abs(x - x_prev) <= error)
      converged = 1;
   else
      converged = 0;
   iters = iter;

   return x;
} 

/////Main Function///////
    public static void main(String[] args) {

        Newton_Raphson obj=new Newton_Raphson();

        Scanner input=new Scanner(System.in);

        double x_0;       /* Initial guess                */
        double x;         /* Approximate solution         */
        double error;       /* Maximum error                */
        int    max_iters; /* Maximum number of iterations */
        int    iters;     /* Actual number of iterations  */
        int    converged; /* Whether iteration converged  */

        System.out.println( "Enter Initial Solution: " );
        x_0=input.nextDouble();

        System.out.println( "Enter Error: " );
        error=input.nextDouble();

        System.out.println( "Enter Maximum Iterations: " );
        max_iters=input.nextInt();

        x = obj.newton(x_0, error, max_iters, iters, converged);

        if(converged) 
        {
            System.out.println("Newton algorithm converged after "+ iters +" steps.");
            System.out.println("The approximate solution is "+ x);

        } 

        else 
        {
            System.out.println("Newton algorithm didn't converge after " + iters + " steps.");
            System.out.println("The final estimate was " + x);

        }

    } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-02T11:19:50.133

Java 按值传递参数，所以

```
if (Math.abs(x - x_prev) <= error)
    converged = 1;
else
    converged = 0;
iters = iter; 
```

不会更改调用者传递的参数。这些更改永远不会离开被调用的函数。

模仿输出参数的最简单方法，resp。在 C 中传递指针是传递一个长度为一长度的数组，

```
double newton(double x_0, double error, int[] max_iters,int iters, boolean[] converged) 
```

并设置（和查询）`iters[0]`resp。`converged[0]`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-02T11:18:42.433

一个问题是这个声明：

```
if (Math.abs(x - x_prev) <= error)
   converged = 1;
else
   converged = 0; 
```

没有做任何事情，因为[Java 是按值传递的](https://stackoverflow.com/questions/40480/is-java-pass-by-reference)。所以不会影响`converged`方法外的值。您可以改为从您的方法中返回一个对象，该对象将包含 2 个成员：x 和收敛：

```
return new NewtonResult (x, iters, converged); 
```

NewtonResult 定义为：

```
public class NewtonResult {
    int x;
    int iters;
    boolean converged;
    NewtonResult (int x, int iters, boolean converged) {
        this.x = x;
        this.iters = iters;
        this.converged = converged;
    }
} 
```

代码中的另一个问题是 Java`if`在传递 int 时需要布尔值，因此您需要将条件更改为：

```
if (converged != 0) {
    //
} 
```

甚至更好地使收敛为布尔值。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-02T11:22:52.007

问题是，`converged`并且`iters`是从原始 C 代码返回的。对这些参数使用指针是为了使参数可以模仿`out`语义。由于 Java 仅支持按值传递，因此您无法使用普通方法参数以相同的方式返回该信息。

另一个问题是旧版本的 C 没有布尔类型，因此`int`被使用。`boolean`表示收敛的标志在 Java 中应该是 a 。

所以你的代码需要返回三个信息：结果（一个浮点值）、`converged`（一个布尔值）和`iters`（一个整数）。您应该将它们包装成一个对象并以这种方式返回它们。

您需要的课程如下所示：

```
public class NewtonResult {
     public boolean converged;
     public double value;
     public int iters;
} 
```

您应该将`newton`方法签名更改为：

```
NewtonResult newton(double x_0, double error, int max_iters) 
```

最后，我认为这`tolerance`将是一个比`error`该参数更好的名称。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-02T11:22:16.297

缺少类声明（公共类 Newton_Raphson...）。

如上所述，Java 不支持通过引用传递的参数，只支持通过值传递，因此您需要将所有这些都包装在“Result”类中。

```
public class Result {
     public int x;
     public int iters;
     public int converged; // better replace this with a boolean in Java
} 
```

并将您的方法的返回类型更改为该 Result 类。

您不能将 int 测试为布尔值。您应该测试它是否不同于 0（因为在 C 中，所有不同于 0 的东西都被认为是真的）。或者考虑直接使用布尔值，它会容易得多。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-02T11:30:49.137

当在 java 中将诸如`int`, `boolean`- 之类的原始类型作为方法参数传递并更改它们时，实际上它们不会被更改。
传递的参数是真实参数的副本（它们实际上是按值传递的）。
从变量中初始化对象，然后将它们传递给方法：

```
Integer[] a = new Integer[1];  // For int a
Boolean[] b = new Boolean[1];  // For boolean b
a[0] = 1;
b[0] = true; 
```

这样，传递对象的引用副本将被传递，并且当您像`[0]`上面那样更改其中一个元素的值时，它也会在真实变量中更改。

# gwt - GWT表单提交成功后如何渲染返回的HTML内容

> ID：10412592
> 
> 赞同：1
> 
> 时间：2012-05-02T11:13:09.750
> 
> 标签：gwt, form-submit, formpanel

我想在 GWT 中通过 模仿传统的表单提交`FormPanel`，但是页面无法在一次 HTTP 行程中重定向到动作 Servlet，也就是说，提交是一次行程，如果您`window.location.assign`进行另一次行程。即使我可以得到`submitCompleteEvent.getResult`无法正确呈现的结果 html。 [这个问题](https://stackoverflow.com/questions/4062104/gwt-simple-web-form-submit-redirect-to-new-page)对我没有帮助。

所以我拆分了这个问题：

***1.***我真的可以通过 GWT FormPanel 模仿 HTML 表单的行为，它会触发提交时的 go-to 操作页面吗？

***2.***如何利用表单成功提交返回的html？

# objective-c - 为什么 CGLayers 不混合？

> ID：10412593
> 
> 赞同：2
> 
> 时间：2012-05-02T11:13:20.857
> 
> 标签：objective-c, cocoa-touch, drawrect, cgcontext, cglayer

为什么 obj2 不与 obj1 混合但不使用 CGLayer 它工作正常，与 CGContextDrawLayerAtPoint 相同的问题，CGLayer 不支持 CGContextSetBlendMode 吗？

```
 //Layer
    CGContextRef context = UIGraphicsGetCurrentContext();
    CGLayerRef objectLayer = CGLayerCreateWithContext (context, rect.size, NULL);
    CGContextRef objectContext = CGLayerGetContext (objectLayer);
    //obj1
    CGContextDrawImage(objectContext, CGRectMake(0, 0, rect.size.width, rect.size.height), [[UIImage imageNamed:@"background.png"] CGImage]);
    //obj2
    CGContextSetBlendMode(objectContext, kCGBlendModeSoftLight);
    CGContextSetAlpha(objectContext, 0.5f);
    CGContextDrawImage(objectContext, CGRectMake(0, 0, rect.size.width, rect.size.height), [[UIImage imageNamed:@"overlay1.png"] CGImage]);
    CGContextDrawLayerInRect(context, rect, objectLayer); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-02T13:35:30.377

您只是*在*图层的上下文中设置混合模式，因此图像使用柔光混合模式渲染在透明背景之上（我认为这与使用普通混合模式渲染它的效果相同）。

的混合模式`context`仍设置为正常，因此图层（已渲染）将使用该模式进行渲染。混合模式不跨越上下文边界。

# tridion - 如何使用核心服务在 SDL Tridion 2011 中创建组件？

> ID：10412594
> 
> 赞同：4
> 
> 时间：2012-05-02T11:13:21.267
> 
> 标签：tridion

我想使用核心服务在 SDL Tridion 2011 中使用核心服务创建一个组件。谁能帮我解决这个问题？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-02T11:24:11.823

查看 Ryan 关于使用核心服务创建项目的优秀文章[http://blog.building-blocks.com/uploading-images-using-the-core-service-in-sdl-tridion-2011](http://blog.building-blocks.com/uploading-images-using-the-core-service-in-sdl-tridion-2011)或[http://blog .building-blocks.com/creating-custom-pages-using-the-core-service-in-sdl-tridion-2011](http://blog.building-blocks.com/creating-custom-pages-using-the-core-service-in-sdl-tridion-2011)

# php - Plist 错误：字符串为空

> ID：10412595
> 
> 赞同：0
> 
> 时间：2012-05-02T11:13:21.327
> 
> 标签：php, xml, string, plist, syntax-error

我创建了一个 PHP 应用程序来输出一个 plist，以弥合数据库和应用程序之间的差距。

决定在我上面的应用程序中使用 plist 而不是 sqlite 数据库，所以我必须找到一种方法来完成这项工作。

我尝试在 x-code 中打开 plist，它告诉我它已损坏。

所以我运行了控制台命令：

```
sudo plutil ./filename.plist 
```

这说'字符串转换失败。字符串为空'。

因此，我在文本编辑器中打开了 plist 并进行了搜索`<string></string>`（表示为空字符串），但没有找到任何结果。所以我不确定它有什么问题！

你能帮助我吗？

我需要一种调试方法并找出错误所在，但似乎没有一种简单的方法来调试 plist 文件。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-02T13:00:52.547

好的，我在这里发布解决方案，因为这个错误实际上杀死了我，如果有人能发现以下解决方案有帮助，那就太好了。

基本上，数据库包含数千个条目，因此几乎不可能调试每个条目的错误字符。

我使用了 PlistEdit Pro 并将 plist 的原始 xml 复制/粘贴到其中。
这行得通。

我认为正在发生的事情是数据库输出了一些罪犯（狡猾的字符），而我对 PlistEdit Pro 的使用适当地转义了这些字符，因此它不会破坏 X-Code。

# apache - 严重：CouchDBQuery 错误。java.net.SocketException：打开的文件太多

> ID：10412598
> 
> 赞同：2
> 
> 时间：2012-05-02T11:13:31.020
> 
> 标签：apache, tomcat, couchdb, httpclient, socketexception

当我尝试连接到 couchdb 时出现此错误。有人可以告诉我发生这种情况的原因。我是否必须在调用 couchdb 的方法中将 null 分配给 HttpClient 和 GetMethod？

```
SEVERE: CouchDBQuery error
java.net.SocketException: Too many open files
    at java.net.Socket.createImpl(Socket.java:397)
    at java.net.Socket.<init>(Socket.java:371)
    at java.net.Socket.<init>(Socket.java:249)
    at org.apache.commons.httpclient.protocol.DefaultProtocolSocketFactory.createSocket(DefaultProtocolSocketFactory.java:80)
    at org.apache.commons.httpclient.protocol.DefaultProtocolSocketFactory.createSocket(DefaultProtocolSocketFactory.java:122)
    at org.apache.commons.httpclient.HttpConnection.open(HttpConnection.java:707)
    at org.apache.commons.httpclient.HttpMethodDirector.executeWithRetry(HttpMethodDirector.java:387)
    at org.apache.commons.httpclient.HttpMethodDirector.executeMethod(HttpMethodDirector.java:171)
    at org.apache.commons.httpclient.HttpClient.executeMethod(HttpClient.java:397)
    at org.apache.commons.httpclient.HttpClient.executeMethod(HttpClient.java:323) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-02T11:42:53.187

异常意味着没有足够的文件句柄来打开您机器上的套接字。如何在 Linux 和 Windows 上检查这个是[这里](http://amitbhayani.blogspot.in/2010/01/javanetsocketexception-too-many-open.html)。

对于 HTTPClient，建议使用可用的连接管理器之一来确保关闭连接。

有关如何使用[HTTPClient 连接管理器的信息，请参阅本指南的第 2.8 节](http://hc.apache.org/httpcomponents-client-ga/tutorial/html/connmgmt.html)

# javascript - jquery msgbox 的任何替代品

> ID：10412599
> 
> 赞同：1
> 
> 时间：2012-05-02T11:13:33.273
> 
> 标签：javascript, jquery, jquery-ui, msgbox

我正在尝试在我的项目中包含一个提示对话框。Jquery Msgbox 很好，但它们只允许输入类型，如文本、复选框和选择。我想使用 textarea，因为我希望用户留下他们的反馈。

是否有任何允许 textarea 提示对话框的 jquery 插件。

我很感激任何帮助。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-02T11:15:27.733

您可以在[jQuery UI Dialog](http://jqueryui.com/demos/dialog/)中使用您想要的任何标记。

# iphone - 使用Mac中的终端应用程序将.p12文件转换为.pem“没有这样的文件或目录”错误？

> ID：10412603
> 
> 赞同：13
> 
> 时间：2012-05-02T11:13:51.763
> 
> 标签：iphone, ios, terminal, pem, pkcs#12

我已从 Keychain Access 导出“Apple Development IOS Push Service”证书并将“apns-dev-cert.p12”保存在我的桌面中。我想让`Apple Push Notification`我已经关注这些博客`apns-dev-cert.p12 to apns-dev-cert.pem`从终端应用程序转换，

```
http://bhaveshkumbhani.blogspot.in/2011/12/convert-p12-to-pem-for-apns.html
http://www.raywenderlich.com/3443/apple-push-notification-services-tutorial-part-12
Apple Document RemoteNotificationPG.pdf 
```

我在终端中使用过这些命令，

```
 1.V******-Ms-iMac-2:~ c*****$ openssl pkcs12 -in apns-dev-cert.p12 -out apns-dev-cert.pem -nodes -clcerts
        Response : Error opening input file apns-dev-cert.p12
        Certificates.p12: No such file or directory
    2.V******-Ms-iMac-2:~ c*****$ openssl pkcs12 -clcerts -nokeys -out apns-dev-cert.pem -in apns-dev-cert.p12
        Response : Error opening input file apns-dev-cert.p12
        Certificates.p12: No such file or directory
    3.V******-Ms-iMac-2:~ c*****$ ls
            All_iOS_Applications_Document.doc   Pictures
            AppStoreSubmissionSteps.doc     Public
            Desktop                 Sites
            Documents               Softwares
            Downloads               Untitled.txt
            Dropbox                 pic
            Library                 pic.zip
            Movies                  pricelist.txt
            Music                   sms.txt
            Nana_User_Case_Documents.odt
   4\. V******-Ms-iMac-2:~ c*****$ cd
   5.V******-Ms-iMac-2:~ c*****$ cd/Users/c*****/Desktop/A
-bash: cd/Users/c*****/Desktop/A: No such file or directory 
```

我不明白为什么终端总是说“没有这样的文件或目录”？我需要将 .p12 文件保存在 Mac 的什么位置？

我正在使用`Terminal app Version 2.1.2 (273.1). Mac OS X version 10.6.8`.

你能请我做什么吗？我需要使用 .pem 文件启用 APNS。请帮我。提前致谢。

**编辑：**

我在我的 mac 终端应用程序中添加了尝试过的 Raywenderlich.com 终端代码

```
1\. V******-Ms-iMac-2:~ c*****$ pwd
/Users/creagx
2\. V******-Ms-iMac-2:~ c*****$ cd/ Users/creagx/Desktop/A
-bash: cd/: No such file or directory 
```

* * *

## 回答 #1

> 赞同：65
> 
> 时间：2012-05-02T12:28:48.173

输入：

```
cd /Users/creagx/Desktop/A (Space between cd and Slash: cd[SPACE]/Users/creagx/Desktop/A 
```

如果您的桌面上有一个名为“A”的文件夹，其中 p12 文件位于其中。

然后继续执行其他命令

`openssl pkcs12 -in apns-dev-cert.p12 -out apns-dev-cert.pem -nodes -clcerts`

`openssl pkcs12 -clcerts -nokeys -out apns-dev-cert.pem -in apns-dev-cert.p12`

# performance - 运行 sqlite 查询后如何加快获取结果的速度？

> ID：10412604
> 
> 赞同：2
> 
> 时间：2012-05-02T11:14:11.293
> 
> 标签：performance, sqlite, fetchall

作为对我的问题的回答：[sqlite.fetchall() 这么慢是否正常？](https://stackoverflow.com/questions/10336492/is-it-normal-that-sqlite-fetchall-is-so-slow#)似乎 fetch-all 和 fetch-one 对于 sqlite 来说可能非常慢。

正如我在那里提到的，我有以下查询：

```
time0 = time.time()
self.cursor.execute("SELECT spectrum_id, feature_table_id "+
                "FROM spectrum AS s "+
                "INNER JOIN feature AS f "+
                "ON f.msrun_msrun_id = s.msrun_msrun_id "+
                "INNER JOIN (SELECT feature_feature_table_id, min(rt) AS rtMin, max(rt) AS rtMax, min(mz) AS mzMin, max(mz) as mzMax "+
                             "FROM convexhull GROUP BY feature_feature_table_id) AS t "+
                "ON t.feature_feature_table_id = f.feature_table_id "+
                "WHERE s.msrun_msrun_id = ? "+
                "AND s.scan_start_time >= t.rtMin "+
                "AND s.scan_start_time <= t.rtMax "+
                "AND base_peak_mz >= t.mzMin "+
                "AND base_peak_mz <= t.mzMax", spectrumFeature_InputValues)
print 'query took:',time.time()-time0,'seconds'

time0 = time.time()
spectrumAndFeature_ids = self.cursor.fetchall()      
print time.time()-time0,'seconds since to fetchall' 
```

select 语句的执行大约需要 50 秒（可以接受）。但是，fetchall() 需要 788 秒，只获取 981 个结果。

作为对我的问题的回答而提出的加快查询速度的方法：[sqlite.fetchall() 这么慢是否正常？](https://stackoverflow.com/questions/10336492/is-it-normal-that-sqlite-fetchall-is-so-slow#)使用 fetchmany() 并没有提高获取结果的速度。

运行 sqlite 查询后如何加快获取结果的速度？

* * *

与我尝试在命令行上执行它的 sql 完全相同：

```
sqlite> SELECT spectrum_id, feature_table_id
   ...> FROM spectrum AS s 
   ...> INNER JOIN feature AS f 
   ...> ON f.msrun_msrun_id = s.msrun_msrun_id 
   ...> INNER JOIN (SELECT feature_feature_table_id, min(rt) AS rtMin, max(rt) AS rtMax, min(mz) AS mzMin, max(mz) as mzMax 
   ...> FROM convexhull GROUP BY feature_feature_table_id) AS t 
   ...> ON t.feature_feature_table_id = f.feature_table_id 
   ...> WHERE s.msrun_msrun_id = 1
   ...> AND s.scan_start_time >= t.rtMin
   ...> AND s.scan_start_time <= t.rtMax
   ...> AND base_peak_mz >= t.mzMin
   ...> AND base_peak_mz <= t.mzMax; 
```

* * *

更新：

所以我大约 45 分钟前开始在命令行上运行查询，它仍然很忙，所以使用命令行也很慢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-02T12:38:10.387

通过阅读[这个问题](https://stackoverflow.com/questions/3134900/join-with-pythons-sqlite-module-is-slower-than-doing-it-manually)，听起来您可以从使用[APSW sqlite 模块](http://code.google.com/p/apsw/)中受益。不知何故，您可能会成为您的 sqlite 模块的受害者，导致您的查询以某种性能较低的方式执行。

我很好奇，所以我自己尝试使用 apsw 。这并不太复杂。你为什么不试一试？

要安装它，我必须：

1.  提取[最新版本](http://apsw.googlecode.com/files/apsw-3.7.11-r1.zip)。
2.  让安装包获取最新的 sqlite 合并。

    ```
    python setup.py fetch --sqlite 
    ```

3.  构建和安装。

    ```
    sudo python setup.py install 
    ```

4.  使用它代替其他 sqlite 模块。

    ```
    import apsw
    <...>
    conn = apsw.Connection('foo.db') 
    ```

# datetime - 在 vb 中通过 WMI 设置日期和时间

> ID：10412608
> 
> 赞同：1
> 
> 时间：2012-05-02T11:14:24.213
> 
> 标签：datetime, vbscript, wmi

我想通过从远程计算机读取当前信息来设置系统的日期和时间。那台计算机在域中。我使用下面的代码来访问时区：

```
Set objWMIService = GetObject("winmgmts:\\" & ServerAddress & "\root\cimv2")
Set oRemoteItems = objWMIService.ExecQuery("Select * from Win32_TimeZone")

For Each o In oRemoteItems
    ServerTime = o.StandardName
    Exit Function
Next 
```

但这段代码不起作用。我收到拒绝访问错误 (5)。请告诉我在哪里做错了什么？我还需要模拟用户，因为在工作组上时 - > 两台机器上的工作组用户是相同的。但是在工作组-> 两个系统上的域用户是不同的。请建议如何模拟和使用上述代码？

另外，我正在使用 net time 命令设置日期和时间，但由于访问被拒绝错误，它也失败了。

问候，

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-03T10:46:59.833

我终于实现了.. :)

下面的代码将告诉您远程系统的时区、日期和时间，无论远程系统是在域还是工作组中。唯一需要考虑的是，在代码下方运行的用户必须是工作组或域的管理员。

```
Set objSWbemLocator = CreateObject("WbemScripting.SWbemLocator")
Set objWMIService = objSWbemLocator.ConnectServer(remoteserver,"root\CIMV2",adminuser,adminpassword,"MS_409","")

Set oRemoteItems = objWMIService.ExecQuery("Select * from Win32_TimeZone")

For Each o In oRemoteItems
    sServerTimezone = o.StandardName
Next 
```

MsgBox sServerTimezone

'在 google 上搜索 Win32_TimeZone，你会发现除 StandardName 之外的其他日期和时间参数

谢谢你的帮助。

问候，

迪佩什

# java - 如何使用斯坦福 NLP Parser 获得“语法关系”？

> ID：10412611
> 
> 赞同：0
> 
> 时间：2012-05-02T11:14:30.617
> 
> 标签：java, stanford-nlp

我对 Java 开发完全陌生。

有人可以详细说明如何使用斯坦福大学的自然语言处理词法分析器 - 开源 Java 代码获得“语法关系”吗？

谢谢！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-03T08:06:12.017

请参阅我的代码中第一个文件的第 88 行[以编程方式运行斯坦福解析器](https://gist.github.com/2562754)

```
GrammaticalStructureFactory gsf = tlp.grammaticalStructureFactory();
GrammaticalStructure gs = gsf.newGrammaticalStructure(parse);
Collection tdl = gs.typedDependenciesCollapsed();

System.out.println("words: "+words); 
System.out.println("POStags: "+tags); 
System.out.println("stemmedWordsAndTags: "+stems); 
System.out.println("typedDependencies: "+tdl); 
```

集合 tdl 是这些类型化依赖项的列表。如果您查看[TypedDependency 的 javadoc，](http://www-nlp.stanford.edu/nlp/javadoc/javanlp/edu/stanford/nlp/trees/TypedDependency.html)您会发现使用 .reln() 方法可以获得语法关系。

我的代码中第三个文件的第 311-318 行显示了如何使用该类型依赖项列表。我碰巧得到了关系的名称，但你可以得到关系本身，它属于 GrammaticalRelation 类。

```
for( Iterator<TypedDependency> iter = tdl.iterator(); iter.hasNext(); ) {
    TypedDependency var = iter.next();

    TreeGraphNode dep = var.dep();
    TreeGraphNode gov = var.gov();

    // All useful information for a node in the tree
    String reln = var.reln().getShortName(); 
```

不要难过，我花了一两天痛苦的时间试图弄清楚如何使用解析器。我不知道文档是否有所改进，但是当我使用它时，它们非常糟糕。

# c - 如何读取图像文件？

> ID：10412614
> 
> 赞同：0
> 
> 时间：2012-05-02T11:14:35.750
> 
> 标签：c, image, graphics

我需要获取 RGB 值读取图像。我怎么能在C中做到这一点？

图像格式可以是 png、jpg、bmp 或其他常用格式。它必须保存在文本文件中。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-02T12:04:24.047

一个非常易于使用的图像库，可以涵盖所有这些格式的读取和写入，这将是[FreeImage](http://freeimage.sourceforge.net/)。它主要是一个 C 库，但也有 C++ 的包装器等。

当您说“保存在文本文件中”时，这对于图像来说是非常不典型的，因为二进制格式比存储像素强度的原始字符串值要紧凑得多。此外，许多格式使用压缩，这意味着每个像素实际上没有给定的“值”......相反，必须先解压缩数据，然后才能为每个像素单独分配一个值。有一些图像格式（例如[PPM](http://netpbm.sourceforge.net/doc/ppm.html)）可以存储为 ASCII 数据，但同样，这不一定是存储大图像的最有效方式。

因此，对于您的工作流程，您将使用[FreeImage](http://freeimage.sourceforge.net/)之类的库从图像文件中读取值，然后将未压缩的像素值写回[PPM](http://netpbm.sourceforge.net/doc/ppm.html)文件或自定义格式的文本文件。

# c# - 在 C# 中通过 tcp 发送位图

> ID：10412615
> 
> 赞同：0
> 
> 时间：2012-05-02T11:14:38.000
> 
> 标签：c#, image, tcp, bitmap, networkstream

我试图连续发送图像，但不知何故它不起作用。问题是，有时当接收器尝试将大小读入字符串时，它会读取一些未知的 6 个字节。我不知道它们来自哪里，因为我认为当读取所有字节时网络流是空的。

```
/// <summary>
/// This is the class that captures the screen and sends it
/// </summary>
public class TCPClient
{
    TcpClient me;
    bool lauf = true;
    NetworkStream ns;
    Thread mainThread;
    int ind = 0;

    public TCPClient()
    {
        mainThread = new Thread(new ThreadStart(sendThread));
        mainThread.Start();
    }

    public void sendThread()
    {
        try
        {
            me = new TcpClient("127.0.0.1",16500);
            ns = me.GetStream();
            while (lauf)
            {
                MemoryStream tempMS = this.getScreen();
                byte[] package = tempMS.ToArray();
                String tempS = "" + package.Length;
                byte[] tempBS = System.Text.Encoding.UTF8.GetBytes(tempS);
                ns.Write(tempBS, 0, tempBS.Length);
                ns.Write(package, 0, package.Length);    
                Console.WriteLine("Paket gesendet " + package.Length);
                //package = null;
                Console.WriteLine("Memoryuse: " + Convert.ToDouble(((Process.GetCurrentProcess().WorkingSet64))/1024)/1024);
                Thread.Sleep(1000);
                //Die ms müssen für die Steuerung evtl runtergeregelt werden,da sonst eine komfortable steuerung nicht möglich ist
            }
        }
        catch (Exception e)
        {
            Console.WriteLine(e);
            Console.ReadKey();
            mainThread.Abort();
            ns.Close();
            me.Close(); 
        }
    }

    public MemoryStream getScreen() 
    {
        Bitmap bitmap = new Bitmap(SystemInformation.VirtualScreen.Width, SystemInformation.VirtualScreen.Height);

        using (Graphics graphics = Graphics.FromImage(bitmap))
        {
            graphics.CopyFromScreen(0,0,0,0,bitmap.Size);
            Cursors.Default.Draw(graphics,new Rectangle(Cursor.Position,Cursor.Current.Size));
            graphics.Dispose();
        }

        MemoryStream memoryStream = new System.IO.MemoryStream();
        bitmap.Save(memoryStream,System.Drawing.Imaging.ImageFormat.Png);

        bitmap.Dispose();
        //memoryStream.Flush();
        memoryStream.Position = 0;
        return memoryStream;
    }

    public void setLauf(bool pLauf)
    {
        lauf = pLauf;
    }
}

public class TcpReceiver
{
    private TcpClient me;
    private MainForm MF;
    private bool lauf = true;
    private Thread recieveThread;

    public TcpReceiver(MainForm tMF)
    {
        MF = tMF;
        recieveThread = new Thread(new ThreadStart(recieveImage));
        recieveThread.Start();
    }

    public void recieveImage()
    {
        try
        {           
            TcpListener tempListener = new TcpListener(IPAddress.Any,16500);
            tempListener.Start();
            me = tempListener.AcceptTcpClient();
            //MF.newClient(me.Client.AddressFamily.ToString());
            NetworkStream ns = me.GetStream();

            while(lauf)
            {
                if (ns.DataAvailable)
                {
                    byte[] tempSA = new byte[6];
                    ns.Read(tempSA, 0, tempSA.Length);
                    String tempS = System.Text.Encoding.UTF8.GetString(tempSA);
                    int size = Int32.Parse(tempS);
                    byte[] tempBA = new byte[size];
                    ns.Read(tempBA, 0, tempBA.Length);

                    MemoryStream tempMS = new MemoryStream(tempBA);
                    Bitmap tempBitmap = new Bitmap(tempMS);
                    MF.showData(tempBitmap);

                    Thread.Sleep(100);
                }
            }
        }
        catch(Exception e)
        {

        }
    }

    public void setLauf(bool tLauf)
    {
        lauf = tLauf;
    }
} 
```

# hibernate - 如何使用 PostgreSQL 和 JPA 从实体类自动创建表？

> ID：10412616
> 
> 赞同：0
> 
> 时间：2012-05-02T11:14:38.753
> 
> 标签：hibernate, postgresql, jakarta-ee, persistence

我需要知道使用 PostgreSQL 而不是 Derby 是否可以自动创建表。

故事：我用 Hibernate 和 Derby 成功建立了一个 NetBeans Java 项目。我已经从我的实体类创建了 JPA 控制器类。为了测试项目，我为这些控制器类创建了 JUnit 测试类。

首次运行这些测试类时，将在 Derby 中自动创建表。执行测试后，我可以在数据库浏览器中看到这些表。

在persistence.xml 中有这样一行

```
<property name="hibernate.connection.url" value="jdbc:derby://localhost:1527/MySampleDb;create=true"/> 
```

建立连接并在需要时指示要创建的表（注意行尾的“;create=true”）。

使用 PostgreSQL 而不是 Derby 时。这不再起作用了。添加 ";create=true" 会破坏代码。PostgreSQL 是否可以自动创建表？我应该使用除 Hibernate 之外的其他持久性库吗？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-05-02T11:20:23.203

是的。这个有可能。您需要将属性设置`hibernate.hbm2ddl.auto`为`create`

```
 <property name="hibernate.hbm2ddl.auto" value="create"/> 
```

# umbraco - Umbraco v5.x 学习资源

> ID：10412617
> 
> 赞同：2
> 
> 时间：2012-05-02T11:14:41.833
> 
> 标签：umbraco, umbraco5

Umbraco 最近从 ASP.NET Web 表单迁移到 ASP.NET MVC 3。我试图找到可以帮助我入门的好资源，但由于它太新我不走运。我不想通过 v4 时代之前的旧材料，因为我不想让自己感到不必要的困惑。Umbraco.tv 网站似乎根本没有很多 v5 视频。

是否有包含 Umbraco v5 特定信息的教程？我刚开始学习 Umbraco，所以需要任何帮助，但我需要尽快开始。我是 MVC 3 开发人员，所以关于如何使用自己的控制器、模型、视图等扩展 Umbraco 的好例子会有很大帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-02T12:06:00.067

如果您对 MVC 和 razor 有任何经验，可以从[github 文档](https://github.com/umbraco/Umbraco5Docs/blob/5.0.1/Documentation/index.md)开始。稍后将在[官方文档频道上提供](http://our.umbraco.org/documentation)

在 Umbraco 中，控制器是一个表面控制器，基本上只用于您需要做的更多然后显示一些简单的内容。[如何使用](https://github.com/umbraco/Umbraco5Docs/blob/5.1.0/Documentation/Getting-Started/Creating-a-surface-controller.md)

这是目前可用的文档，但社区正在努力尽快准备好更多文档

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-19T15:01:37.393

我找到了一些链接，并将继续在此处发布它们：

[http://h4rdboiledegg.wordpress.com/2012/02/03/adventures-with-umbraco-5/](http://h4rdboiledegg.wordpress.com/2012/02/03/adventures-with-umbraco-5/)

如何使用部分宏：[http ://shazwazza.com/post/Partial-View-macros-in-Umbraco-v5.aspx](http://shazwazza.com/post/Partial-View-macros-in-Umbraco-v5.aspx)

Umbrazo Razor 备忘单：[http ://our.umbraco.org/projects/developer-tools/razor-dynamicnode-cheat-sheet](http://our.umbraco.org/projects/developer-tools/razor-dynamicnode-cheat-sheet)

# mysql - course_code 的适当数据类型是什么？

> ID：10412621
> 
> 赞同：1
> 
> 时间：2012-05-02T11:14:50.627
> 
> 标签：mysql, sql

好的，我被要求准备一个大学数据库，并且我需要以某种方式存储某些数据。例如，我需要存储一个课程代码，该课程代码包含一个字母，后跟两个整数。例如。I45、D61等 所以应该是 VARCHAR(3) 对吗？但我仍然不确定这是否是正确的道路。我也不确定如何在 SQL 脚本中执行此操作。我似乎在我的笔记中找不到任何答案，我目前正在为这个问题编写数据字典，然后再介入脚本。

有小费吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-02T11:22:18.963

尽可能做没有业务意义的主键。您可以轻松更改数据库设计，而不会严重影响应用程序层。使用哑主键，用户不会将含义与某个记录的标识符相关联。

您所查询的内容被称为智能钥匙，通常是用户可见的。非用户可见的键称为哑键或代理键，有时这个非用户可见的键变得可见，但这不是问题，因为大多数哑键不是由用户解释的。一个例子，但是你想改变这个问题的标题，这个问题的 id 将保持不变[https://stackoverflow.com/questions/10412621/](https://stackoverflow.com/questions/10412621/)

使用智能主键，有时出于审美原因，用户希望指定键的格式和外观。这可以很容易地根据用户的感受经常更新。这将是应用程序方面的一个问题，因为这需要级联相关表的更改；和数据库方面也是如此，因为相关表上键的级联更新非常耗时

在此处阅读详细信息：

[http://www.bcarter.com/intsurr1.htm](http://www.bcarter.com/intsurr1.htm)

* * *

代理键的优点：[http ://en.wikipedia.org/wiki/Surrogate_key](http://en.wikipedia.org/wiki/Surrogate_key)

您可以在代理键（又名哑键）旁边实现自然键（又名智能键）

```
-- Postgresql has text type, it's a character type that doesn't need length, 
-- it can be upto 1 GB
-- On Sql Server use varchar(max), this is upto 2 GB

create table course
(
    course_id serial primary key, -- surrogate key, aka dumb key

    course_code text unique, -- natural key. what's seen by users e.g. 'D61'

    course_name text unique, -- e.g. 'Database Structure'
    date_offered date
); 
```

这种方法的优点是，当学校在未来某个时间点扩展时，他们决定提供一个面向西班牙语的数据库结构，您的数据库与用户引入的用户解释值隔离。

假设您的数据库开始使用智能密钥：

```
create table course
(
    course_code primary key, -- natural key. what's seen by users e.g. 'D61'

    course_name text unique, -- e.g. 'Database Structure'
    date_offered date
); 
```

然后是西班牙语的数据库结构课程。如果用户将他们自己的规则引入您的系统，他们可能会想在 course_code 值上输入这个： **D61/ESP**，其他人会这样做**ESP-D61**，**ESP:D61**。如果用户决定自己的主键规则，事情可能会失控，然后他们会告诉你根据他们在主键格式上创建的任意规则查询数据，例如“列出所有西班牙语我们在这所学校提供的课程”，不是史诗般的要求吗？那么一个优秀的开发人员会做些什么来适应数据库设计的这些变化呢？他/她将形式化数据结构，将表重新设计为：

```
create table course
(
    course_code text, -- primary key
    course_language text, -- primary key

    course_name text unique,
    date_offered date,

    constraint pk_course primary key(course_code, course_language)
); 
```

你看到这个问题了吗？这将导致停机，因为您需要将更改传播到依赖于该课程表的表的外键。当然，您还需要首先调整那些依赖表。看看它不仅会给 DBA 带来麻烦，也会给开发人员带来麻烦。

如果您从一开始就使用哑主键，即使用户在您不知情的情况下向系统引入规则，这也不会导致您的数据库设计发生任何大量数据更改或数据架构更改。这可以为您争取时间来相应地调整您的应用程序。然而，如果您将智能放入主键中，则上述用户需求可以使您的主键自然地演变为复合主键。这不仅对数据库设计重组和数据的大量更新很困难，而且您也很难让您的应用程序快速适应新的数据库设计。

```
create table course
(
    course_id serial primary key,
    course_code text unique, -- natural key. what's seen by users e.g. 'D61'
    course_name text unique, -- e.g. 'Database Structure'
    date_offered date
); 
```

因此，使用代理键，即使用户将新规则或信息存储到 course_code 中，您也可以安全地对表进行更改，而无需强迫您**快速**调整应用程序以适应新设计。您的应用程序仍然可以继续运行，并且不需要停机。它真的可以让您有时间随时相应地调整您的应用程序。这将是对特定语言课程的更改：

```
create table course
(
    course_id serial primary key,

    course_code text, -- natural key. what's seen by users e.g. 'D61'
    course_language text, -- natural key. what's seen by users e.g. 'SPANISH'

    course_name text unique, -- e.g. 'Database Structure in Spanish'
    date_offered date,

    constraint uk_course unique key(course_code, course_language)
); 
```

如您所见，您仍然可以执行大量`UPDATE`语句来将用户对 course_code 施加的规则拆分为两个字段，这不需要对相关表进行更改。如果您使用智能复合主键，重组数据将迫使您将复合主键上的更改级联到依赖表的复合外键。使用哑主键，您的应用程序仍将照常运行，您可以在以后随时根据新设计（例如新文本框，用于课程语言）修改对应用程序的更改。使用哑主键，依赖表不需要复合外键来指向课程表，它们仍然可以使用相同的旧哑/代理主键

而且使用哑主键，主键和外键的大小不会扩大

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-02T11:53:41.457

这是域解决方案。仍然不完美，检查可以改进等。

```
set search_path='tmp';

DROP DOMAIN coursename CASCADE;
CREATE DOMAIN coursename AS varchar NOT NULL
    CHECK (length(value) > 0
    AND  SUBSTR(value,1) >= 'A' AND SUBSTR(value,1) <= 'Z'
    AND  SUBSTR(value,2) >= '0' AND SUBSTR(value,2) <= '9' )
    ;

DROP TABLE course CASCADE;
CREATE TABLE course
    ( cname coursename PRIMARY KEY
    , ztext varchar
    , UNIQUE (ztext)
    );
INSERT INTO course(cname,ztext) 
  VALUES ('A11', 'A 11' ), ('B12', 'B 12' ); -- Ok
INSERT INTO course(cname,ztext)
  VALUES ('3','Three' ), ('198', 'Butter' ); -- Will fail 
```

顺便说一句：对于“实际”PK，我可能会使用代理 ID。但是上面的域（具有 UNIQUE 约束）可以用作“逻辑”候选键。

这基本上是*Table is Domain*范式的结果。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-02T12:04:26.750

我强烈建议您不要对数据类型过于具体，这样`VARCHAR(8)`就可以了。原因是：

*   明年代码中可能有*四个*字符。业务需求一直在变化，所以不要过多地锁定字段长度
*   让应用层处理验证——毕竟，它必须将验证问题传达给用户
*   通过将其限制为 3 个字符，您几乎没有增加商业价值
*   使用 mysql，虽然您可以在列上*定义* `check`约束（希望“验证”值），但它们被忽略并且仅出于兼容性原因允许

在系统的所有组件中，数据库模式始终是最难更改的，因此请允许您的数据类型具有一定的灵活性，以尽可能避免更改。

# android - 使用 AsyncTask 在 UI 上显示的倒数计时器

> ID：10412622
> 
> 赞同：1
> 
> 时间：2012-05-02T11:14:52.107
> 
> 标签：android, android-asynctask, countdown

我正在尝试实现在 UI 上显示的倒数计时器，我认为这是一个干净优雅的解决方案，但 Logcat 抛出

```
AndroidRuntime(3282): java.lang.RuntimeException: An error occured while executing doInBackground() 
```

,

```
private class UpdateCountdownTask extends AsyncTask<Long, Long, Void> {
    @Override
    protected Void doInBackground(Long... millisUntilFinished) {

        new CountDownTimer(millisUntilFinished[0], 1000) {

            @Override
            public void onTick(long millisUntilFinished) {
                publishProgress(millisUntilFinished);
            }

            @Override
            public void onFinish() {
                ((TextView) findViewById(R.id.answer)).setText(answer);
            }
        };
        return null;
    }

    @Override
    protected void onProgressUpdate(Long... millisUntilFinished) {
        super.onProgressUpdate(millisUntilFinished);
        ((TextView) findViewById(R.id.timer)).setText(""
                + millisUntilFinished[0] / 1000);
    }
} 
```

仍然不完全理解线程。谁能告诉我我做错了什么？

谢谢。

更新：非常抱歉。我是一个绝对无能的人。我忘记在柜台上调用方法 start()。:PI 终于用 CountDownTimer 自己实现了倒计时。Sill 不知道这是否真的在单独的线程上运行，但它现在可以工作。

```
 CountDownTimer myCounter = new CountDownTimer(millisUntilFinished, 1000) {

        @Override
        public void onTick(long millisUntilFinished) {
            ((TextView) findViewById(R.id.timer)).setText(""
                    + millisUntilFinished / 1000);
            System.out.println("I am ticking");
        }

        @Override
        public void onFinish() {
        }
    };

    myCounter.start(); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-02T11:24:48.567

我认为问题在于 CountDownTimer 中的 onFinish() 方法。在这里，您正在修改 UI 线程，而您不能从后台线程执行此操作。所以你必须把`((TextView) findViewById(R.id.answer)).setText(answer);`onPostExecute() 方法放在里面。我是说：

```
protected void onPostExecute(String result) {
super.onPostExecute(result);
((TextView) findViewById(R.id.answer)).setText(answer);
} 
```

我希望这行得通。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-02T11:25:27.323

在后台执行某些操作时，您将无法连接 UI。我认为，如果您使用线程，您想要的一切都是可能的。这将使您的工作更加轻松。下面显示了一小段代码。我希望这个可能对你有帮助。我正在尝试设置图像而不是你可以设置文本。这里我已经使用线程和处理程序完成了。在线程内连接 UI 是不可能的。在 assynctask 当你在后台做某事时，你完全在里面线程。这就是为什么你在这里得到一个错误。Otherwinse你可以做到这一点`Postexecute()`

```
Thread animator = new Thread() {
        public void run() {
            int i = 0;
            try {
                sleep(2000);
                while (i < 4) {
                    sleep(50);
                    handler.sendMessage(handler.obtainMessage(i));
                    i++;
                }
            } catch (Exception e) {

            }
        }
    };
    animator.start();
    handler = new Handler() {

        @Override
        public void handleMessage(Message msg) {
            super.handleMessage(msg);
            if (msg.what == 0) {
                animatedimage.setImageResource(R.drawable.sub1);
            } else if (msg.what == 1) {
                animatedimage.setImageResource(R.drawable.sub2);
            } else if (msg.what == 2) {
                animatedimage.setImageResource(R.drawable.sub3);
            } else if (msg.what == 3) {
                animatedimage.setImageResource(R.drawable.sub4);
            }
        }

    }; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-02T11:27:48.883

您是否考虑过使用 Handler 每秒更新一次 UI？

结帐[http://developer.android.com/resources/articles/timed-ui-updates.html](http://developer.android.com/resources/articles/timed-ui-updates.html)

# sql-server - 如何编写一个 Linq 查询来选择给定字符串中的最后一个最大数字？

> ID：10412626
> 
> 赞同：0
> 
> 时间：2012-05-02T11:15:05.070
> 
> 标签：sql-server, string, linq, linq-to-sql

我的数据库中的列中有这些字符串。我基本上是在生成 slug 并且不想复制任何字符串。字符串可以按任何顺序排列。
如何有效地使用 linq 在这些字符串中提取最大的数字？

示例 1：

```
slug 

hhhh
hhhh-2 
hhhh-2-3
hhhh-4
hhhh-5
hhhh-2-4 
```

上面最大的数字是 5。

示例 2：

```
slug 

hhhh
hhhh-2 
hhhh-2-3
hhhh-4
hhhh-2-4 
```

上面最大的数字是 4。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-02T11:26:07.813

如果没有适当的数据库模式，您绝对无法有效地做到这一点*。*

如果您需要能够始终查询此最大数量，您应该创建一个包含“slug”和“max num”列的表，并在需要时更新“max num”。

但是，可能值得回顾一下您*为什么*要这样做。例如，如果您想防止双重使用*，但预计实际冲突很少见*，那么您实际上并不*需要*它来提高效率。

# android - 如何找到所有下载的项目信息？

> ID：10412630
> 
> 赞同：0
> 
> 时间：2012-05-02T11:15:10.553
> 
> 标签：android

我正在开发一个与下载相关的应用程序。

为此我正在搜索。我有一些例子，但这些例子并不能完全满足我的要求。

我的要求是获取有关所有下载项目的信息。

如果有人知道解决方案，请帮助我

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-02T11:56:35.480

> 我的要求是获取有关所有下载项目的信息。

幸运的是，出于明显的隐私和安全原因，这是不可能的。应用程序不必以某种神奇的方式让您可以监视它们的 Internet 操作。

# ruby-on-rails - Find ID 没有找到 id 并创建

> ID：10412631
> 
> 赞同：0
> 
> 时间：2012-05-02T11:15:13.450
> 
> 标签：ruby-on-rails, forms

我有两个要在创建操作之前使用的视图。

第一个视图是 add_sample_details.html.erb

```
<% form_tag add_expt_details_samples_path :method => :post do %>
    <% for sample in @samples %>
        <% fields_for "samples[]", sample do |form| %>
            <fieldset>
                <legend>Sample Name: <%= sample.name %></legend>
                <p><center><%= form.label :sample_title %>
                <%= form.text_field :sample_title, :size => 25 %></center></p>
                <table>
                    <tr>
                        <td>
                            <%= form.label :taxon_id %>
                            <%= form.text_field :taxon_id, :size => 15 %>
                        </td>
                        <td>
                            <%= form.label :scientific_name %>
                            <%= form.text_field :scientific_name, :size => 20 %>
                        </td>
                        <td>
                            <%= form.label :common_name %>
                            <%= form.text_field :common_name, :size => 15 %>
                        </td>
                    </tr>
                </table>
                <p>
                    <center>
                        <%= form.label :sample_descripition %><br \>
                        <%= form.text_area :description %>
                    </center>
                </p>
            </fieldset>
        <% end %>
    <% end %>
    <p><center><%= submit_tag "Next" %></center></p>

    <% for samp in @samples %>
        <%= hidden_field_tag("sample_ids[]", samp.id) %>
    <% end %>   
<% end %> 
```

在 SamplesController 中，add_expt_details 看起来像这样

```
def add_expt_details
    # Collect the samples that were sent
    @expt_samples = Sample.find(params[:sample_ids])
  end 
```

add_expt_details.html.erb 看起来像这样

```
<% form_for @expt_samples, :url => create_study_samples_path, :html => { :method => :put }  do |f| %>
    <% @expt_samples.each do |samp|%>
        <% f.fields_for :expts do |form| %>
        <%= form.label :experiment_title  %>
        <%= form.text_field :expt_title, :size => 15 %><br \>
        <% end %>
    <% end %>
    <p><center><%= submit_tag "Next" %></center></p>
<% end %> 
```

我的 create_study 动作是这样的

```
def create_study
     @study = Study.new(params[:study])
     # this method collects all the samples from the add_sra_details view from the hidden_field_tag   
     if current_user.id?
       # Put the current user_id in the study.user_id
        @study.user_id = current_user.id       
       if @study.save # Save the values for the study  
          # Update the Sample attributes 
          @samples = Sample.update(params[:samples].keys, params[:samples].values).reject { |p| p.errors.empty? }
           # For all those sample_ids selected by the user, put the study ids in the sample_study_id
           @samples.each do |samp|     
             @study.samples << samp        
           end       

           # get the ids_sent from the add_expt_details
            @expt_samples = Sample.find(params[:id])             

           # A Flash message stating the details would be prefereable..! (Means you have to do it)
           flash[:success] = "Your Study has been Created"           
           redirect_to add_expt_details_samples_path
       else
           flash[:error] = "Study Faulty" 
           render :action => "add_sra_details"
       end
     end
  end 
```

当我保留@expt_samples = Sample.find(params[:id]) 时收到的错误消息是“nil:NilClass 的未定义方法‘键’”

如果我没有@expt_samples，它会给我一个错误“Couldn't Find id in Sample”

有人可以建议我如何从一个表单更新一组样本 ID，并创建新的 Expt 模型记录，这些记录与另一种表单的 sample_ids 相关联。

所有建议表示赞赏。

干杯

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-02T11:44:05.833

你需要参考Rails的[accepts_nested_attributes_for](http://api.rubyonrails.org/classes/ActiveRecord/NestedAttributes/ClassMethods.html)

To see how to link existing objects with forms, you can see examples here:

[http://josemota.net/2010/11/rails-3-has_many-through-checkboxes/](http://josemota.net/2010/11/rails-3-has_many-through-checkboxes/)

[rails 3 has_many :through Form with checkboxes](https://stackoverflow.com/questions/5054633/rails-3-has-many-through-form-with-checkboxes)

[has_many through checkboxes](https://stackoverflow.com/questions/2352554/has-many-through-checkboxes)

# html - 如何使用 CSS 使内联元素在文本中占据其自身上方和下方的空间？

> ID：10412632
> 
> 赞同：0
> 
> 时间：2012-05-02T11:15:15.020
> 
> 标签：html, css

在下面的代码中，我尝试以`strong`某种方式格式化元素，即它在自身周围占据额外的空间 (1em)。左边和右边的文本被 strong-element 替换，但底部和顶部的额外空间不会替换文本。我该如何解决这个问题？

```
<html>
<head>
    <title>CSS test</title>

    <style type="text/css">
    h1 {
        text-decoration: underline;
    }
    strong {
        padding:    1em;
        border:     1px solid #000;
    }
    </style>
</head>
<body>
<h1>test</h1>
    Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua.
    Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat.
    Duis aute irure <strong>dolor</strong> in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur.
    Excepteur sint occaecat cupidatat non proident, sunt in culpa qui officia deserunt mollit anim id est laborum.

</body>
</html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-02T11:23:08.797

您可以使用`line-height`属性来执行此操作，[例如 this](http://jsfiddle.net/CmMCW/)，但`1em`已经是默认垂直距离。它还取代了整行（不仅仅是上面和下面的文本），这可能是可取的，也可能不是可取的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-02T12:12:28.863

如果您的意思是元素上方和下方应该有空白空间，`strong`当线条如此分开时会造成相当粗糙的外观，请添加

```
strong { display: inline-block; margin: 0.5em 0; } 
```

`inline-block`某些已过时但仍在使用的浏览器不支持该值。在这种情况下，`margin`设置也会被忽略。

# android - 仅从 SIM 卡中获取本地电话簿联系人 android

> ID：10412634
> 
> 赞同：1
> 
> 时间：2012-05-02T11:15:30.413
> 
> 标签：android, contacts, local, sim-card

我想知道是否可以获取仅存在于 SIM 卡或电话簿中的联系人。现在我正在使用以下代码来获取联系人，它会获取所有联系人，甚至是我的 gmail 和 Facebook 联系人。

```
Cursor cursor = getContentResolver().query(
                    ContactsContract.Contacts.CONTENT_URI, null, null, null, Phone.DISPLAY_NAME + " ASC");
            if (cursor.getCount() > 0)
            {
                while (cursor.moveToNext())
                {

                    PhoneBookUserEntity user = new PhoneBookUserEntity();
                    // Pick out the ID, and the Display name of the
                    // contact from the current row of the cursor
                    user.setId(cursor.getString(cursor.getColumnIndex(BaseColumns._ID)));
                    user.setPhoneBookName(cursor.getString(cursor.getColumnIndex(
                            ContactsContract.Contacts.DISPLAY_NAME)));
                    if(user.getphonebookname().length() > 4)
                    username = user.getphonebookname();//.substring(0,4);
                    else
                        username = user.getphonebookname();//.substring(0,1);
                    String hasPhone = cursor.getString(cursor.getColumnIndex(ContactsContract.Contacts.HAS_PHONE_NUMBER)); 
                    //    if (Boolean.parseBoolean(hasPhone)) { 
                    Cursor phones = getContentResolver().query( ContactsContract.CommonDataKinds.Phone.CONTENT_URI, null, ContactsContract.CommonDataKinds.Phone.CONTACT_ID +" = "+ user.getId(), null, null); 
                    while (phones.moveToNext()) { 
                        user.sePhoneNumber(phones.getString(phones.getColumnIndex( ContactsContract.CommonDataKinds.Phone.NUMBER)));                 
                    } 
                    phones.close(); 
                    //}
                    // user.sePhoneNumber(cursor.getString(cursor.getColumnIndex(ContactsContract.CommonDataKinds.Phone.NUMBER))); 

                    Cursor emails = getContentResolver().query(ContactsContract.CommonDataKinds.Email.CONTENT_URI, null, ContactsContract.CommonDataKinds.Email.CONTACT_ID + " = " + user.getId(), null, null); 
                    while (emails.moveToNext()) { 
                        // This would allow you get several email addresses 
                        user.setEmailAddress(emails.getString(emails.getColumnIndex(ContactsContract.CommonDataKinds.Email.DATA))); 
                    } 
                    emails.close(); 
                    user.setImageURI(getPhotoUri(user.getId()));
                    SearchContactsActivity.this.runOnUiThread(new Runnable() {

                        @Override
                        public void run() {
                            // TODO Auto-generated method stub
                            _progressDialog.setMessage("Copying over your local phone book. Retrieving contact information for \n"+ username.toUpperCase());
                        }
                    });
                    arraylist.add(user);
                }

            }
            cursor.close(); 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-02T11:24:26.173

仅限 Sim 联系人，您可以使用以下代码

```
private void allSIMContact()
    {
        try
        {
            String ClsSimPhonename = null; 
            String ClsSimphoneNo = null;

            Uri simUri = Uri.parse("content://icc/adn"); 
            Cursor cursorSim = this.getContentResolver().query(simUri,null,null,null,null);

            Log.i("PhoneContact", "total: "+cursorSim.getCount());

            while (cursorSim.moveToNext()) 
            {      
                ClsSimPhonename =cursorSim.getString(cursorSim.getColumnIndex("name"));
                ClsSimphoneNo = cursorSim.getString(cursorSim.getColumnIndex("number"));
                ClsSimphoneNo.replaceAll("\\D","");
                ClsSimphoneNo.replaceAll("&", "");
                ClsSimPhonename=ClsSimPhonename.replace("|","");

                Log.i("PhoneContact", "name: "+ClsSimPhonename+" phone: "+ClsSimphoneNo);
            }        
        }
        catch(Exception e)
        {
            e.printStackTrace();
        }

    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-02T11:30:35.777

```
Cursor cursor = getContacts();
    getBundleValues2();

    String displayName = "";
    while (cursor.moveToNext()) {
        //taking id name and phone number from contacts using content provider
        String displayid = cursor.getString(cursor
                .getColumnIndex(ContactsContract.Contacts._ID));

        displayName = cursor.getString(cursor
                .getColumnIndex(ContactsContract.Contacts.DISPLAY_NAME));

        String displayphnno = "";

        ContentResolver cr = getContentResolver();

        if (Integer.parseInt(cursor.getString(cursor
                .getColumnIndex(ContactsContract.Data.HAS_PHONE_NUMBER))) > 0) {

            Cursor pCur = cr.query(
                    ContactsContract.CommonDataKinds.Phone.CONTENT_URI,
                    null, ContactsContract.CommonDataKinds.Phone.CONTACT_ID
                            + " = ?", new String[] { displayid }, null);
            while (pCur.moveToNext()) {
                displayphnno = pCur
                        .getString(pCur
                                .getColumnIndex(ContactsContract.CommonDataKinds.Phone.NUMBER))
                        + "\n";

                ContactProviderViewGroup v6;
                //using view group appending it to an activity
                if (colorFlag) {
                    v6 = new ContactProviderViewGroup(this, displayName,
                            displayphnno, passedid, colorFlag);
                    colorFlag = false;
                } else {
                    v6 = new ContactProviderViewGroup(this, displayName,
                            displayphnno, passedid, colorFlag);
                    colorFlag=true;
                }
                LL1.addView(v6);
            }
            pCur.close();
        }

    }

}

private void getBundleValues2() {
    Intent i = getIntent();
    Bundle myBundle = i.getExtras();

    if (myBundle != null) {
        passedid = myBundle.getInt("gid");
    }
}

private Cursor getContacts() {
    // Run query
    Uri uri = ContactsContract.Contacts.CONTENT_URI;

    String[] projection = new String[] { ContactsContract.Contacts._ID,
            ContactsContract.Contacts.DISPLAY_NAME,
            ContactsContract.Contacts.HAS_PHONE_NUMBER };

    String selection = ContactsContract.Contacts.IN_VISIBLE_GROUP + " = '"
            + ("1") + "'";
    String[] selectionArgs = null;
    String sortOrder = ContactsContract.Contacts.DISPLAY_NAME
            + " COLLATE LOCALIZED ASC";

    return managedQuery(uri, projection, selection, selectionArgs,
            sortOrder);
} 
```

# css - 我可以定义一个 LESS 混合来生成具有可变数量参数的转换属性吗？

> ID：10412643
> 
> 赞同：17
> 
> 时间：2012-05-02T11:16:07.063
> 
> 标签：css, less, mixins, less-mixins

我将 LESS 引入一个大型 Web 应用程序项目以简化我的 CSS。我有一些 CSS 规则将转换应用于不同数量的属性，例如：

```
.movable {
    transition-property: top, left;
    transition-duration: 0.2s;
    transition-timing-function: ease;
}

.fadeAndStretchable {
    transition-property: opacity, width, height, margin;
    transition-duration: 1.5s;
    transition-timing-function: ease-out;
} 
```

（注意：为简洁起见，我在这里省略了`-webkit`,`-moz`和`-o`属性：实际上，这些规则中的每一个都是 12 行而不是 3 行。）

请注意， 的值以`transition-property`逗号分隔。这在 CSS 中是不寻常的：多个值通常用空格分隔（如`border: 1px solid #f00`）。LESS mixin 可以使用特殊`@arguments`值来[生成所有 mixin 参数的空格分隔列表](http://lesscss.org/#-parametric-mixins)- 但是是否可以定义一个 LESS mixin，它接受可变数量的参数并将它们转换为逗号分隔的值列表，适用于`transition-property`？

如有必要，我对需要两个 mixin 的解决方案感到满意：一个 for `transition-property`，另一个 for `transition-duration`and `transition-timing-function`。这是我到目前为止所尝试的：

### 尝试 1：使用带有未命名参数的 @arguments

```
.transition-property() {
    -webkit-transition-property: @arguments;
    -moz-transition-property: @arguments;
    -o-transition-property: @arguments;
    transition-property: @arguments;
}

.movable {
    .transition-property(top, left);
} 
```

结果：LESS 错误（“没有为 '.transition-property(top, left)' 找到匹配的定义”）

### 尝试 2：使用带有命名参数的 @arguments

```
.transition-property(@p1, @p2, @p3, @p4, @p5) {
    -webkit-transition-property: @arguments;
    -moz-transition-property: @arguments;
    -o-transition-property: @arguments;
    transition-property: @arguments;
}

.movable {
    .transition-property(top, left);
} 
```

结果：LESS 错误（“没有为 '.transition-property(top, left)' 找到匹配的定义”）

### 尝试 3：使用具有虚拟默认值的命名参数

```
.transition-property(@p1:p1, @p2:p2, @p3:p3, @p4:p4, @p5:p5) {
    -webkit-transition-property: @p1, @p2, @p3, @p4, @p5;
    -moz-transition-property:  @p1, @p2, @p3, @p4, @p5;
    -o-transition-property:  @p1, @p2, @p3, @p4, @p5;
    transition-property:  @p1, @p2, @p3, @p4, @p5;
}

.movable {
    .transition-property(top, left);
} 
```

结果：没有 LESS 错误，但它会生成一个 CSS 规则`-webkit-transition-property: top, left, p3, p4, p5`，由于无法识别的属性，浏览器会忽略该规则。

我尝试了各种其他方法（例如将属性作为字符串传递`'top,left'`），但结果都是一样的：要么是 LESS 错误，要么是无效的 CSS。

**有没有办法解决这个问题？**还是我必须硬着头皮定义一组在arity上重载的mixin，例如

```
.transition-property(@p1) {...}
.transition-property(@p1, @p2) {...}
.transition-property(@p1, @p2, @p3) {...}
.transition-property(@p1, @p2, @p3, @p4) {...}
etc. 
```

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2012-05-02T12:05:59.380

[由于Luke Page](https://stackoverflow.com/a/10412917/440921)向我指出了`...`语法，我已经设法弄清楚了。

解决方案是使用以下内容：

*   `...`允许可变参数
*   [JavaScript 评估](http://lesscss.org/#-javascript-evaluation)的反引号
*   可变[字符串插值](http://lesscss.org/#-string-interpolation)
*   [转义](http://lesscss.org/#-escaping)结果表达式的`~`前缀（即阻止 LESS 将其包含在字符串中）
*   好旧的[正则表达式](http://xkcd.com/208/)

呸。这是生成的混合：

```
.transition-properties(...) {
    -webkit-transition-property: ~`"@{arguments}".replace(/[\[\]]/g, '')`;
} 
```

这是带有完整浏览器扩展集的完整版本：

```
.transition-properties(...) {
    @props: ~`"@{arguments}".replace(/[\[\]]/g, '')`;
    -webkit-transition-property: @props;
    -moz-transition-property: @props;
    -o-transition-property: @props;
    transition-property: @props;
} 
```

* * *

## 回答 #2

> 赞同：22
> 
> 时间：2012-08-16T08:04:46.793

也许我误解了你的需求。为什么不能使用转义字符串？

像这样：

```
.transition ( @property, @duration, @style: ease-in-out ) {
  -webkit-transition-property: @property;  
  -webkit-transition-duration: @duration;
  -webkit-transition-timing-function: @style;

  -moz-transition-property: @property;  
  -moz-transition-duration: @duration;
  -moz-transition-timing-function: @style;

  -ms-transition-property: @property;  
  -ms-transition-duration: @duration;
  -ms-transition-timing-function: @style;

  -o-transition-property: @property;  
  -o-transition-duration: @duration;
  -o-transition-timing-function: @style;

  transition-property: @property;  
  transition-duration: @duration;
  transition-timing-function: @style;
}

#my-id {
  .transition( ~"background, border-color, color", 2s );
} 
```

这正是我们用于多属性转换的方法。从来没有遇到过问题。

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2013-12-28T02:40:56.777

## 灵活（LESS 1.5.1+）

此解决方案不使用任何内联 javascript，它允许：

1.  **要设置的默认值**
2.  **要传递的任意数量的属性、持续时间、延迟等**
3.  **以长格式或紧凑格式输出**
4.  **如果需要，输入原始列表而不是输入参数组**

如果属性的数量大于持续时间、延迟或计时的数量，那么如果`compact`设置了输出，则持续时间/延迟/计时的最终值将成为超出传递数量的所有其他属性的该参数的值，但是如果`compact`未设置，则输出长格式，并***根据***[浏览器对 css 标准的解释复制值](https://developer.mozilla.org/en-US/docs/Web/Guide/CSS/Using_CSS_transitions?redirectlocale=en-US&redirectslug=CSS/Tutorials/Using_CSS_transitions#When_property_value_lists_are_of_different_lengths)。

**少混音**

```
.transition (@props: all; 
             @duration:1s; 
             @delay: 0s; 
             @timing: ease; 
             @compact: true;
             @raw-input: false) {
  .output() when (@raw-input = false) and not (@compact = true) {
  -webkit-transition-property:@props; 
     -moz-transition-property:@props;
      -ms-transition-property:@props;
       -o-transition-property:@props; 
          transition-property:@props;
  -webkit-transition-duration:@duration; 
     -moz-transition-duration:@duration;
      -ms-transition-duration:@duration;
       -o-transition-duration:@duration; 
          transition-duration:@duration;
  -webkit-transition-delay:   @delay; 
     -moz-transition-delay:   @delay;
      -ms-transition-delay:   @delay;
       -o-transition-delay:   @delay; 
          transition-delay:   @delay;
  -webkit-transition-timing-function:@timing; 
     -moz-transition-timing-function:@timing;
      -ms-transition-timing-function:@timing;
       -o-transition-timing-function:@timing; 
          transition-timing-function:@timing;
  }
  .output() when (@raw-input = false) and (@compact = true) {
    @propsLength: length(@props);
    @durationLength: length(@duration);
    @delayLength: length(@delay);
    @timingLength: length(@timing);
    .buildString(@i, @s: ~'') when (@i <= @propsLength) {
      @prop: extract(@props, @i);
      .setDuration() when (@i <= @durationLength) {
        @dur: extract(@duration, @i);
      }
      .setDuration() when (@i > @durationLength) {
        @dur: extract(@duration, @durationLength);
      }
      .setDuration();
      .setDelay() when (@i <= @delayLength) {
        @del: extract(@delay, @i);
      }
      .setDelay() when (@i > @delayLength) {
        @del: extract(@delay, @delayLength);
      }
      .setDelay();
      .setTiming() when (@i <= @timingLength) {
        @time: extract(@timing, @i);
      }
      .setTiming() when (@i > @timingLength) {
        @time: extract(@timing, @timingLength);
      }
      .setTiming();
      .setDivider() when (@i > 1) {
        @divider: ~'@{s},';
      }
      .setDivider() when (@i = 1) {
        @divider: ~'';
      }
      .setDivider();
      @string: @divider @prop @dur @del @time;
      .buildString((@i + 1), @string);  
    }
    .buildString(1);
    .buildString(@i, @s: ~'') when (@i > @propsLength) {
      .compact(@s);
    }
  }
  .output() when not (@raw-input = false) {
    .compact(@raw-input);
  }
  .compact(@string) {
    -webkit-transition:@string; 
       -moz-transition:@string;
        -ms-transition:@string;
         -o-transition:@string; 
            transition:@string;    
  }
  .output();
} 
```

**LESS 使用示例**

```
.test {
  .transition();
}
.test-props {
  .transition(width);
}
.test-duration {
  .transition(@duration: 3s);
}
.test-delay {
  .transition(@delay: 10s);
}
.test-timing {
  .transition(@timing: linear);
}
.test-all {
  .transition(height, 4s, 12s, ease-out);
}
.test-multitransitions {
  .transition(width, height, top; 1s, 2s; 0s, 1s, 3s; ease-in, ease-out, ease);
}
.test-not-compact {
  .transition(width, height, top; 1s, 2s; 0s, 1s, 3s; ease-in, ease-out, ease; false);
}
.test-raw-input {
  .transition(@raw-input: top 1s, bottom 1s, color 3s 1s linear;);
} 
```

在上面的例子中，需要特别注意两点：（1）如何传递多个值，使用逗号分隔列表，使用分号分隔参数组。所以为了形象化，它是这样的：

```
 .transition(width, height, top; 1s, 2s; 0s, 1s, 3s; ease-in, ease-out, ease);
              |---Properties----|-Dur.--|---Delay---|---------Timing--------|
                                |       |           |
                          semicolons divide groups of parameters 
```

(2) 该`raw-input`示例如何需要一个结束分号才能将逗号视为列表项：

```
 .transition(@raw-input: top 1s, bottom 1s, color 3s 1s linear;);
                                                               |
                                                    semicolon here needed 
```

**示例的 CSS 输出**

```
.test {
  -webkit-transition:  all 1s 0s ease;
  -moz-transition:  all 1s 0s ease;
  -ms-transition:  all 1s 0s ease;
  -o-transition:  all 1s 0s ease;
  transition:  all 1s 0s ease;
}
.test-props {
  -webkit-transition:  width 1s 0s ease;
  -moz-transition:  width 1s 0s ease;
  -ms-transition:  width 1s 0s ease;
  -o-transition:  width 1s 0s ease;
  transition:  width 1s 0s ease;
}
.test-duration {
  -webkit-transition:  all 3s 0s ease;
  -moz-transition:  all 3s 0s ease;
  -ms-transition:  all 3s 0s ease;
  -o-transition:  all 3s 0s ease;
  transition:  all 3s 0s ease;
}
.test-delay {
  -webkit-transition:  all 1s 10s ease;
  -moz-transition:  all 1s 10s ease;
  -ms-transition:  all 1s 10s ease;
  -o-transition:  all 1s 10s ease;
  transition:  all 1s 10s ease;
}
.test-timing {
  -webkit-transition:  all 1s 0s linear;
  -moz-transition:  all 1s 0s linear;
  -ms-transition:  all 1s 0s linear;
  -o-transition:  all 1s 0s linear;
  transition:  all 1s 0s linear;
}
.test-all {
  -webkit-transition:  height 4s 12s ease-out;
  -moz-transition:  height 4s 12s ease-out;
  -ms-transition:  height 4s 12s ease-out;
  -o-transition:  height 4s 12s ease-out;
  transition:  height 4s 12s ease-out;
}
.test-multitransitions {
  -webkit-transition:  width 1s 0s ease-in, height 2s 1s ease-out, top 2s 3s ease;
  -moz-transition:  width 1s 0s ease-in, height 2s 1s ease-out, top 2s 3s ease;
  -ms-transition:  width 1s 0s ease-in, height 2s 1s ease-out, top 2s 3s ease;
  -o-transition:  width 1s 0s ease-in, height 2s 1s ease-out, top 2s 3s ease;
  transition:  width 1s 0s ease-in, height 2s 1s ease-out, top 2s 3s ease;
}
.test-not-compact {
  -webkit-transition-property: width, height, top;
  -moz-transition-property: width, height, top;
  -ms-transition-property: width, height, top;
  -o-transition-property: width, height, top;
  transition-property: width, height, top;
  -webkit-transition-duration: 1s, 2s;
  -moz-transition-duration: 1s, 2s;
  -ms-transition-duration: 1s, 2s;
  -o-transition-duration: 1s, 2s;
  transition-duration: 1s, 2s;
  -webkit-transition-delay: 0s, 1s, 3s;
  -moz-transition-delay: 0s, 1s, 3s;
  -ms-transition-delay: 0s, 1s, 3s;
  -o-transition-delay: 0s, 1s, 3s;
  transition-delay: 0s, 1s, 3s;
  -webkit-transition-timing-function: ease-in, ease-out, ease;
  -moz-transition-timing-function: ease-in, ease-out, ease;
  -ms-transition-timing-function: ease-in, ease-out, ease;
  -o-transition-timing-function: ease-in, ease-out, ease;
  transition-timing-function: ease-in, ease-out, ease;
}    
.test-raw-input {
  -webkit-transition: top 1s, bottom 1s, color 3s 1s linear;
  -moz-transition: top 1s, bottom 1s, color 3s 1s linear;
  -ms-transition: top 1s, bottom 1s, color 3s 1s linear;
  -o-transition: top 1s, bottom 1s, color 3s 1s linear;
  transition: top 1s, bottom 1s, color 3s 1s linear;
} 
```

**如果不需要长格式，**那么 mixin 代码可以简化为：

```
.transition (@props: all; 
             @duration:1s; 
             @delay: 0s; 
             @timing: ease; 
             @raw-input: false) {
  .output() when (@raw-input = false) {
    @propsLength: length(@props);
    @durationLength: length(@duration);
    @delayLength: length(@delay);
    @timingLength: length(@timing);
    .buildString(@i, @s: ~'') when (@i <= @propsLength) {
      @prop: extract(@props, @i);
      .setDuration() when (@i <= @durationLength) {
        @dur: extract(@duration, @i);
      }
      .setDuration() when (@i > @durationLength) {
        @dur: extract(@duration, @durationLength);
      }
      .setDuration();
      .setDelay() when (@i <= @delayLength) {
        @del: extract(@delay, @i);
      }
      .setDelay() when (@i > @delayLength) {
        @del: extract(@delay, @delayLength);
      }
      .setDelay();
      .setTiming() when (@i <= @timingLength) {
        @time: extract(@timing, @i);
      }
      .setTiming() when (@i > @timingLength) {
        @time: extract(@timing, @timingLength);
      }
      .setTiming();
      .setDivider() when (@i > 1) {
        @divider: ~'@{s},';
      }
      .setDivider() when (@i = 1) {
        @divider: ~'';
      }
      .setDivider();
      @string: @divider @prop @dur @del @time;
      .buildString((@i + 1), @string);  
    }
    .buildString(1);
    .buildString(@i, @s: ~'') when (@i > @propsLength) {
      .compact(@s);
    }
  }
  .output() when not (@raw-input = false) {
    .compact(@raw-input);
  }
  .compact(@string) {
    -webkit-transition:@string; 
       -moz-transition:@string;
        -ms-transition:@string;
         -o-transition:@string; 
            transition:@string;    
  }
  .output();
} 
```

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2012-05-02T11:35:24.990

从 less.js 1.3 开始，您必须在参数列表中指定 ... 以表示可以添加更多参数。例如

```
.transition-property(...) {
 foo: @arguments;
} 
```

# jquery - 如何在脚本元素被执行之前删除它们？

> ID：10412651
> 
> 赞同：10
> 
> 时间：2012-05-02T11:17:03.203
> 
> 标签：jquery

如何在脚本元素*被执行之前删除它们*？

我考虑过使用 DOMNodeInserted 事件，但显然它没有捕获脚本元素。我也尝试过像这样使用 jQuery livequery 插件：

```
$("script").livequery(function () { 
    $(this).remove();
}); 
```

它确实删除了脚本元素，但在它被执行之后。

我正在寻找一个跨浏览器的解决方案，但我什至不确定这是否可能。我读到了[Mutation Observers](http://www.w3.org/TR/dom/#mutation-observers)似乎足够接近，但我不确定它是否能解决我的问题。

如果有一种方法可以在执行之前修改脚本内容而不删除和重新创建它，那就更好了。

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-07-20T10:42:44.020

删除脚本元素不会做任何事情。如果你能以某种方式访问​​一个脚本元素，它是很久以前执行的，删除它不会有任何效果。

所以我们需要解决它。如果您的脚本元素位于页面顶部，如下所示：

```
<head>
    <script src="yourscript.js"></script> 
```

您可以向同一页面发出同步 ajax 请求，因此您可以将其内容解析为新文档，修改所有脚本标签，然后将当前文档替换为修改后的文档。

```
var xhr = new XMLHttpRequest,
    content,
    doc,
    scripts;

xhr.open( "GET", document.URL, false );
xhr.send(null);
content = xhr.responseText;

doc = document.implementation.createHTMLDocument(""+(document.title || ""));

doc.open();
doc.write(content);
doc.close();

scripts = doc.getElementsByTagName("script");
//Modify scripts as you please
[].forEach.call( scripts, function( script ) {
    script.removeAttribute("src");
    script.innerHTML = 'alert("hello world");';
});

//Doing this will activate all the modified scripts and the "old page" will be gone as the document is replaced
document.replaceChild( document.importNode(doc.documentElement, true), document.documentElement); 
```

不幸的是，这不能在 jsfiddle 或 jsbin 中设置。但是您应该能够将这段代码完全复制粘贴到谷歌浏览器中此页面的控制台中。您应该会看到警报，并且当您检查 live dom 时，每个脚本都被修改了。

不同之处在于我们是在页面上执行脚本之后运行它，所以旧脚本应该仍然在页面上具有工作效果。这就是为什么要让它工作，你需要成为页面上的第一个脚本来执行它。

经测试可在谷歌浏览器中使用。`doc.write`由于某种原因，Firefox 完全忽略了这个调用。

* * *

## 回答 #2

> 赞同：-3
> 
> 时间：2012-07-17T18:27:47.797

我不知道你想做什么。但是最好根据请求加载它们，而不是在某些条件下删除它们。

```
$.getScript('helloworld.js', function() {
     $("#content").html('
          Javascript is loaded successful! 
     ');
  }); 
```

如果您想在执行之前删除脚本，这是不可能的。但是你可以做的是，在一个条件下以编程方式删除脚本，如果有内存泄漏问题，那么你可以在删除脚本之前调用下面的代码。

```
var var1 = 'hello';
var cleanAll = function () {
    delete window.var1;
    delete window.cleanAll;
};

// unload all resources
cleanAll(); 
```

# webserver - 不在 LIGHTTPD 源中使用分叉调用

> ID：10412655
> 
> 赞同：1
> 
> 时间：2012-05-02T11:17:14.820
> 
> 标签：webserver, fork, lighttpd, lighty

我计划将 LIGHTTPD 移植到我的嵌入式系统。我的环境中没有 fork () 系统调用。我可以在 lighttpd 源中看到#define HAVE_FORK，如果未定义，lighttpd 将不会进行任何 fork 调用。到目前为止，一切都很好..

但是在其中一个 lighttpd 模块“mod_cgi”中，我可以看到一个不受语句 if (HAVE_FORK) { ...} 保护的 fork() 调用

有没有办法在“mod_cgi”中避免这个fork（）调用，我可以在编译期间禁用这个模块吗？

非常感谢您的帮助，请对此发表评论。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-16T19:54:44.187

lighttpd 中的 CGI 仅支持与外部 CGI 进程（例如`php-cgi`）的通信，因此 mod_cgi 模块需要 fork()。

如果您不需要 CGI，那么只需从构建中省略 mod_cgi （我猜在您的环境中您将省略几乎所有模块；只有几个是强制性的）。如果您确实需要 CGI，那么您要么在 lighttpd 上做很多工作，要么您应该查看一个正在处理 CGI 的 Web 服务器。

# asp.net-mvc - 在 ASP.Net MVC 中设计 Surface

> ID：10412661
> 
> 赞同：1
> 
> 时间：2012-05-02T11:17:40.343
> 
> 标签：asp.net-mvc

在构建 ASP.Net MVC 应用程序的过程中，是否有任何设计表面（或设计工具）可供设计师（穿着黑色高领毛衣的老兄/老兄）使用的设计表面（或设计工具）？

这样，一旦就模型的结构和应用程序所需的交互达成一致，设计师就会离开并使用此设计工具构建 UI（MVC 中的 V），而开发人员则离开并构建使用 Visual Studio 编写代码（MVC 中的 M&C）。

据我所知，这个设计师还需要使用 Visual Studio 并使用 Razor（或其他视图引擎）语法构建视图，而不是能够使用具有拖放布局和属性的设计图面构建视图设置之类的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-02T13:18:44.893

我认为您可以要求他们为每个视图提供一个硬编码的 HTML……然后，一旦将硬编码数据放入 Razor，您就可以替换它。

这就是 Razor 的美妙之处……从固定的 HTML 传递到 razor 视图非常容易。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-02T12:36:32.873

Razor 需要编程，并且创建视图不是一项随意的任务。我会让设计师在他们喜欢的任何程序中工作，他们可以在设计方面表现出色，让程序员担心如何最好地在 Razor 中创建视图和编程（这实际上只是带有一些额外语法的 C#/VB）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-02T13:28:43.500

这取决于..你的设计师有什么样的技能？他们是真正的设计师（没有 JS/jQuery/etc 知识.. 他们生活和呼吸 PSD）还是设计师/前端工程师（他们知道 js/jQuery，IE7 和 IE9 之间的差异。从渲染角度来看）。

如果你有一个真正的设计师，那么最好的就是 HTML。PSD 也可以，但是如果他们可以将他们的设计转换为 HTML，他们已经为您完成了很多艰苦的工作（除非您喜欢计算浮动和边距以及所有这些爵士乐）。也就是说，如果您使用的是 Twitter Bootstrap 或 Blueprint CSS 之类的东西，那么他们显然也必须知道如何使用它们。

如果您有幸拥有一名设计师/前端工程师，那么值得您花时间教他们一些基本的 razor 语法，例如 @Url.Action 和 @Html.BeginForm。他们可以告诉您他们需要的操作，您可以通过首先给他们一个假数据/响应版本来一起工作，他们可以在您创建真实版本时使用该版本。在这种情况下，他们可以使用 Visual Studio 或者您可以对其进行设置，以便他们通过 IIS 在他们的机器上托管您的站点，并且他们只需使用您的源代码管理来获取自动放置在正确目录中的最新信息。然后他们可以继续在他们喜欢的任何编辑器中工作，因为他们应该只在 html 中工作，并且会实时更新。也就是说，如果您使用的是 ASP.Net MVC 4 捆绑软件，您必须决定如何维护捆绑软件。

# c# - 无法将数组转换为字符串

> ID：10412662
> 
> 赞同：1
> 
> 时间：2012-05-02T11:17:47.423
> 
> 标签：c#, arrays, webmethod

我正在使用以下 WebMethod-

```
[WebMethod]
    public string get_IDs(string uid)
    {

        string url = "www.foobar.com/id=-1&user_id=" + uid";

        String data = SearchData(url);

        JObject o = JObject.Parse(data);

        string ids = (string)o["ids"];

        return ids;
    } 
```

我的问题是返回的数据是数组形式，我希望它作为字符串返回，但是这会引发无法将数组转换为字符串的异常。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-02T12:09:39.330

我整理了一下——

```
string followers = (string)o["ids"].ToString(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-02T11:22:54.817

不能做`o["ids"].ToString();` 吗？？

我不熟悉 JObject 类，所以如果它没有 ToArray 函数，并且如果您期望通过 JObject o 变量获得超过 1 个 ID，您可以尝试：

```
public List<string> get_IDs(string uid)
{

    string url = "www.foobar.com/id=-1&user_id=" + uid";

    String data = SearchData(url);

    JObject o = JObject.Parse(data);

    List<string> ids = new List<string>();

    foreach (obj in o) {
       ids.add(obj.ToString());
    } 
    return ids;

} 
```

注意方法类型有 from `string`to`List<string>`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-02T12:07:53.253

您可以使用

```
string result = string.Join(";", array);
return result; 
```

是什么类型的`o["ids"]`？

```
var ids = (string)o["ids"];
console.WriteLine(ids.GetType()); 
```

如果`ids`是类型`int[]`，则必须将所有元素转换为`String`. 请参阅：[C# 转换整个数组？](https://stackoverflow.com/questions/2068120/c-sharp-cast-entire-array)

```
var strIds = Array.ConvertAll(ids, item => (String)item);
string result = string.Join(";", strIds);
return result; 
```

如果`ids`是，`JObject`您可以使用以下功能`JObject`：

```
public override IEnumerable<T> Values<T>()

IEnumerable<String> strIds = ids.Values<String>(); 
```

如果需要，将 Enumerable 转换为单个`String`：[C# IEnumerable<Object> to string](https://stackoverflow.com/questions/1372349/c-sharp-ienumerableobject-to-string)

# php - 锂表单助手数据和错误丢失？

> ID：10412664
> 
> 赞同：4
> 
> 时间：2012-05-02T11:17:59.867
> 
> 标签：php, php-5.3, lithium

我正在构建一个测试锂应用程序来了解它是如何工作的，我发现表单助手似乎没有识别出我的数据被传回或任何验证错误。

目前我不得不手动传回我的错误，然后在视图中处理它们。

**QuestionsController::ask**

```
public function ask() {
    if (!empty($this->request->data)) {
        $question = Questions::create($this->request->data);
        if ($question->save()) {
            return $this->redirect(array('Questions::view', 'args'=>$question->id));
        } else {
            $errors = $question->errors();
        }

        if (empty($question)) {
            $question = Questions::create();
        }

        return compact('question', 'errors');
    }
} 
```

**意见/问题/ask.html.php**

```
<?php
// Assign the protected object to a variable so we can get at it
if(isset($question)){
    $data = $question->data();
}else{
    $data['title'] = '';
    $data['text'] = '';
}
?>

<?=$this->form->create();?>

    <?=$this->form->field('title', array('placeholder'=>'Title your question', 'value'=>$data['title']));?>
    <?php if(isset($errors['title'])){
        echo "<div class='alert alert-error'><a class='close' data-dismiss='alert' href='#'>×</a>";
        foreach($errors['title'] as $e){
            echo $e."<br/>";
        }
        echo "</div>";
    }?>

    <?=$this->form->field('text', array('placeholder'=>'Enter your question (supports Markdown)', 'type'=>'textarea', 'value'=>$data['text']));?>
    <?php if(isset($errors['text'])){
        echo "<div class='alert alert-error'><a class='close' data-dismiss='alert' href='#'>×</a>";
        foreach($errors['text'] as $e){
            echo $e."<br/>";
        }
        echo "</div>";
    }?>
    <p>Text input supports <?php echo $this->html->link('markdown', 'http://en.wikipedia.org/wiki/Markdown');?></p>

    <?=$this->form->submit('Ask', array('class'=>'btn'));?>
<?=$this->form->end();?> 
```

我可以从该方法中看到`lithium\template\helper\Form`该`field()`方法可以采用一个`template`参数，在示例中是`<li{:wrap}>{:label}{:input}{:error}</li>`这样，因此帮助程序中有显示验证消息的能力。

那么如何在我的控制器中组织我的数据，以便将其传递回视图，以便帮助程序填充我的字段并显示错误？

*编辑*
我应该添加示例“Sphere”应用程序，也使用这种方法，那么它是标准的吗？（[参考](https://github.com/UnionOfRAD/sphere/blob/master/views/posts/add.html.php)）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-02T14:19:47.727

## TL;博士

简短的回答是，您可以将表单绑定到[Entity](http://lithify.me/docs/lithium/data/Entity)的子类，即如中所示的[Record](http://lithify.me/docs/lithium/data/entity/Record)或[Document](http://lithify.me/docs/lithium/data/entity/Document)[`Form::create()`](http://goo.gl/8vrcN)（链接被缩短为`::`破坏链接解析器）。

您的代码如下所示：

```
<?= $this->form->create($question); ?>
<?= $this->form->field('title'); ?>
<?= $this->form->field('text'); ?> 
```

## 长答案：

`QuestionsController::ask()`：

```
public function ask() {
    $question = Questions::create();
    if (!empty($this->request->data)) {
        if ($question->save($this->request->data)) {
            return $this->redirect(array('Questions::view', 'args'=>$question->id));
        }
    }
    return compact('question');
} 
```

`views/questions/ask.html.php`：

```
<?= $this->form->create($question); ?>

    <?= $this->form->field('title', array('placeholder'=>'Title your question'));?>

    <?= $this->form->field('text', array('placeholder'=>'Enter your question (supports Markdown)', 'type'=>'textarea'));?>

    <p>Text input supports <?php echo $this->html->link('markdown', 'http://en.wikipedia.org/wiki/Markdown');?></p>

    <?=$this->form->submit('Ask', array('class'=>'btn'));?>

<?=$this->form->end();?> 
```

请注意表单助手将如何自动显示错误以防万一:)

## #li3 哲学的一些有用链接：

1 - [http://www.slideshare.net/nateabele/lithium-the-framework-for-people-who-hate-frameworks](http://www.slideshare.net/nateabele/lithium-the-framework-for-people-who-hate-frameworks)

2 -[大致相同的演示视频（带有更改表单模板的一个很好的示例）](http://vimeo.com/26183322)

# ios - DocumentInteractionController 注释属性未传递给第二个应用程序

> ID：10412666
> 
> 赞同：0
> 
> 时间：2012-05-02T11:18:22.400
> 
> 标签：ios, uidocumentinteraction

我在应用程序#1 中实现了一个 DocumentInteractionCotroller（我们将其称为 docInter），以将图像传递给应用程序#2（几乎就像 instagram 的方式[http://instagr.am/developer/iphone-hooks/](http://instagr.am/developer/iphone-hooks/)一样）。一切都很好，除了一件事：

当应用程序 2 进入前台时，应用程序委托中调用的第一个方法是 - (BOOL)application:(UIApplication *)application openURL:(NSURL *)url sourceApplication:(NSString *)sourceApplication annotation:(id)annotation

这是意料之中的……

问题是“注释”参数为零，即使我在我的 docInter 注释属性中设置了包含信息的整个字典，甚至验证了该字典存在并且在 willBeginSendingToApplication 和 didEndSendingToApplication 委托方法中包含我的信息。

希望我清楚地解释了问题，感谢您的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-06T10:46:56.443

确保注释对象中的所有对象都是（递归）：NSArray/NSDictionary/NSString/NSData

# c# - 将字符串解析为 const uint 定义

> ID：10412670
> 
> 赞同：-1
> 
> 时间：2012-05-02T11:18:43.143
> 
> 标签：c#, string, parsing

我想知道是否可以将字符串解析为 uint 的定义值。类似于[http://msdn.microsoft.com/en-us/library/essfb559.aspx](http://msdn.microsoft.com/en-us/library/essfb559.aspx)的东西。因此，如果我有以下声明：

```
public const uint COMPONENT1 = START_OF_COMPONENT_RANGE + 1;
public const uint COMPONENT2 = START_OF_COMPONENT_RANGE + 2;
public const uint COMPONENT3 = START_OF_COMPONENT_RANGE + 3; 
```

并通过以下方式定义一个 xml 文件：

```
<node name="node1" port="12345">
  <component>COMPONENT1</component>
  <component>COMPONENT2</component>
</node> 
```

我希望能够将字符串 COMPONENT1 解析为 COMPONENT1 的 uint 值。这样可以更轻松地概览 xml 文件，而不是数字 5001、5002 fe

我假设定义一个字典或数组可以解决它，但是会留下额外的代码。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-02T11:25:26.547

如果您不需要常量，则可以将`enum`-type 与它的`ToString`和`Parse`方法一起使用。

```
public enum Compontents
{
    COMPONENT1 = 1,
    COMPONENT2 = 2
}

public static class ComponentsHelper
{
    public static Compontents GetComponent(this string compString)
    {
        return (Compontents)Enum.Parse(typeof(Compontents), compString);
    }

    public static uint ToValue(this Compontents comp)
    {
        return (uint)comp;
    }

    public static uint GetComponentValue(this string compString)
    {
        return compString.GetComponent().ToValue();
    }

} 
```

如果你真的需要常量，那么你将不得不写一个大`switch`语句。

# apache - 使用 htaccess 防止双重重定向

> ID：10412672
> 
> 赞同：0
> 
> 时间：2012-05-02T11:19:06.893
> 
> 标签：apache, .htaccess, mod-rewrite, redirect

我正在尝试在各种页面之间创建一个重定向，因为我重定向到的 URL 包含的信息比我重定向 FROM 的 URL 更多。我正在使用带有 htaccess 文件的短域 (hrci.me) 来重定向到完整域（当前为reachchallenges.infectionist.com）。一个例子是：

hrci.me/ch123

路径 ch123 包含让我知道它是质询链接 (ch) 的标识符，而 123 是质询 ID。每个挑战都有一个标题，我喜欢将其附加到 URL 的末尾以用于 SEO。此示例 URL 将重定向到：

reachchallenge.infectionist.com/challenge/123/Challenge+Title

“挑战+标题”部分存储在数据库中，需要通过挑战 id 进行检索，因此我编写了一个简单的 PHP 脚本来执行此操作，然后自行处理重定向。我的 htaccess 规则如下所示：

```
RewriteRule ^ch([0-9]{1,4})(/)?$ redirhandler.php?chid=$1 [L] 
```

因此，对 /ch123 的请求应该重定向到 redirhandler.php?chid=123，这将获得标题，然后重定向到位于 /challenge/123/Challenge+Title 的另一个域。问题是，短域设置为将所有传入请求转发到长域，保持原始路径（因此 hrci.me/something 将重定向到reachchallenges.infectionist.com/something），我发现之后htaccess 处理对 redirhandler.php 的重写，然后将其重定向到reachchallenges.infectionist.com/redirhandler.php ...

基本上，如果路径是 redirhandler.php，我需要它忽略任何进一步的重定向，从而允许 php 脚本处理重定向的其余部分。我在想 RewriteCond 是我可以做到这一点的方式，但我无法弄清楚。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-03T01:39:57.033

听起来您将*所有*传入请求转发到长域的规则在 .htaccess 文件中高于 /ch* 请求的更具体规则。尝试将更具体的规则放在更一般的规则之前。

# sql-server - 如何停止“将数据库上下文更改为...”消息

> ID：10412673
> 
> 赞同：23
> 
> 时间：2012-05-02T11:19:15.090
> 
> 标签：sql-server, sql-server-2008, sql-server-2005

`Changed database context to ...`当 SQL 中包含 a 时，是否有某种方法可以停止该消息`USE database`？

* * *

## 回答 #1

> 赞同：37
> 
> 时间：2012-05-02T11:26:23.990

您需要设置 的[错误级别](http://msdn.microsoft.com/en-us/library/ms162773.aspx)，`sqlcmd`默认为 0。注意：不要将此处的错误级别与`sqlcmd`返回的退出代码混淆，例如，`cmd.exe`作为`ERRORLEVEL`.

`sqlcmd`要为所有会话禁用此消息，请使用`-m`命令行选项：

```
sqlcmd -m 1 <other options> 
```

要为代码块禁用此消息，请使用`:setvar`批处理命令：

```
USE [mydb]
GO

-- Disable message for next USE command
:setvar SQLCMDERRORLEVEL 1
USE [mydb]
GO

-- Reenable
:setvar SQLCMDERRORLEVEL 0

... 
```

要`:setvar`在 Management Studio 中使用（或其他 SQLCMD 批处理命令），您需要为您所在的查询窗口启用 SQLCMD 模式（菜单“查询/SQLCMD 模式”）。当以 ':' 开头的行具有灰色背景时，您会看到它已启用。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2016-05-20T14:29:29.810

我通过让 SQLCMD 在一个目录中运行我的所有 .sql 脚本来发布更新。但是，当您使用 USE myDB 启动所有内容时，您会在日志文件中收到重复更改的上下文消息，这很乏味。所以我用这个衬里代替。如果上下文确实发生了变化，您仍然会收到消息，这很好。

IF EXISTS(SELECT [DB_NAME()](https://msdn.microsoft.com/en-gb/library/ms189753.aspx) WHERE DB_NAME() not IN ('myDB')) 使用 MyDB

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2012-05-02T11:40:34.740

另一个想法是在您的 SQL 中使用三部分名称，例如，而不是...

`USE Pubs; SELECT name FROM dbo.Authors;`

...写...

`SELECT name FROM Pubs.dbo.Authors;`

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-05-15T07:42:57.937

就我而言，一个简单的解决方案是先运行一个小查询，例如`SELECT 1;`. 因此，该消息`Changed database context...`与此第一个查询耦合，并且检索了以下查询而没有此错误消息。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2021-04-01T18:26:27.387

简单的解决方案：添加`-m 1`到您的`sqlcmd`命令行参数。

# algorithm - graph - 如果我已经有并且只有父数组，如何打印两个顶点之间的路径？

> ID：10412674
> 
> 赞同：2
> 
> 时间：2012-05-02T11:19:21.177
> 
> 标签：algorithm, data-structures, graph, tree

在许多图形算法中，所需结果的连接通常存储在`parent`数组中。

例如，在 BFS 或 DFS，或最小生成树，或最短路径中，我们将每个顶点的父节点存储在`parent[]`.

**我的问题是，如果我只有这样一个`parent[]`，我怎样才能轻松地获得*任意顶点*之间的路径，比如说，在 O(n) 中？**请注意，它是 BFS 或 DFS 或其他东西并不重要，重要的是`parent[]`我从图形算法中得到的唯一。

如果其中一个顶点是另一个顶点的祖先，我可以轻松获得路径，否则我只能从一个顶点追溯到`parent[]`根，然后对另一个顶点再次执行此操作，然后检查它们的路径在哪个祖先（到根）合并。这导致 O(n^2) 因为我必须将一个顶点的每个祖先与另一个顶点的每个祖先进行比较以寻找合并点。

任何人都可以帮忙吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-02T11:56:07.923

如果您使用大小为 N 的布尔数组 A，则可以消除寻找合并点的复杂性，当您从顶点 i 到根时，沿途为每个顶点标记 A[i] = true。当你从顶点 j 到根时，如果 A[i] == true，那就是合并点（第一个这样的顶点）。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-02T11:57:06.103

这个问题听起来像是从两个相交的链表中找到相交节点的问题。请检查此解决方案[从两个相交的链表中查找相交节点](https://stackoverflow.com/questions/2216666/finding-the-intersecting-node-from-two-intersecting-linked-lists)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-02T11:55:07.173

```
// print the path between v1 and v2
w1 = v1
while w1 != root:
  ++n
  w1 = w1.parent

w2 = v2
while w2 != root:
  ++m
  w2 = w2.parent

if (m < n):
  swap(v1, v2)
  swap(m, n)

(m - n) times do:
  print v2
  v2 = v2.parent

while v1 != v2:
  print v2
  stack.push(v1)
  v1 = v1.parent
  v2 = v2.parent

while not stack.empty:
  print stack.pop 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-14T23:11:39.147

在树中找到 , 之间的路径`x`：您 可以及时执行此操作，“k”是它们之间最短路径的长度。而不是在每个节点中存储一个值为 0 的整数 aux。`y``T`
`O(k)``O(n)`

```
Climb up `x`'s and `y`'s ancestors simultaneously.  
Make each of `x`'s ancestors' aux = aux + 1  
Make each of `y`'s ancestors' aux = aux + 2 
```

用`z`它们之间的第一个共同祖先表示。请注意，`xz`连接的路径`zy`将为您提供最短路径`xy`。

如果`y`' 的祖先有 aux=3 或如果`x`' 的祖先有，那么你已经达到`z`.

当其中一个是另一个的祖先时，您可能必须解决这个问题......此外，按顺序打印顶点可能需要您将`x`' 的祖先放入堆栈中并将`y`' 的祖先放入队列中并且然后在最后弹出它们。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-02T11:23:31.500

正如您所说，您可以轻松获取从根到任何顶点的路径。如果您需要任何其他顶点的路径，则必须以该顶点为根重新开始搜索。这不是一种`O(n)`方法，但它似乎是你能得到的最好的方法。（考虑沿某条边的路径与沿同一边向后的路径的权重不同或根本不存在的情况。）

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-05-02T11:32:21.423

最简单的方法是使用堆栈。像这样的东西：

```
def getpath(parent, first, last):
     path = []
     while first != last:
         if last == None: # there isn't a path between first and last
             return None
         path.append(last)
         last = parent[last]
     path.append(first)
     path.reverse()
     return path 
```

# scala - 如何在“测试”之前运行“包”

> ID：10412675
> 
> 赞同：8
> 
> 时间：2012-05-02T11:19:21.467
> 
> 标签：scala, sbt

我有一个 scala 编译器项目。一些测试用例依赖于生成的 jar 文件。因此，我总是在运行“测试”任务之前手动运行“打包”任务。

我如何添加一个 SBT 任务来完成“测试”的工作但将依赖于“包”？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-02T15:13:54.360

**sbt 0.12：**

将以下内容添加到您的项目设置中：

```
(test in Test) <<= (test in Test) dependsOn (Keys.`package` in Compile) 
```

这会更改项目的测试任务。但您也可以定义自己的任务：

```
val myTestTask = TaskKey[Unit]("my-test-task", "runs package and then test") 
```

然后将其添加到您的项目设置中：

```
myTestTask <<= (test in Test) dependsOn (Keys.`package` in Compile) 
```

**sbt 0.13：**

将以下内容添加到您的项目设置中：

```
(test in Test) := {
  (Keys.`package` in Compile).value
  (test in Test).value
} 
```

这会更改项目的测试任务。但您也可以定义自己的任务：

```
val myTestTask = taskKey[Unit]("runs package and then test") 
```

然后将其添加到您的项目设置中：

```
myTestTask := {
  (Keys.`package` in Compile).value
  (test in Test).value
} 
```

# javascript - 检查文件是否准备就绪

> ID：10412676
> 
> 赞同：0
> 
> 时间：2012-05-02T11:19:30.740
> 
> 标签：javascript, jquery, domdocument

是否有正确的语法使用 jQuery`$().ready`来检查 DOM 是否准备好，而不是在 DOM 加载后创建回调函数？

例如，如果 DOM 准备好了，我想运行不同的代码。

```
function checkDOMReady() 
{
    if ($(document).ready)
        alert("The DOM was ready when this function was called");
    else
        alert("The DOM was NOT ready when this function was called");
} 
```

这是有效的吗？如果没有，有正确的方法吗？

编辑：我很清楚`$(document).ready(function(){});`等等，但这不是我想要的。我有一个每 10 分钟运行一次的脚本，包括最初加载页面的时间，如果文档准备好，我想运行不同的代码，如果没有，我想运行其他代码。我可以将这些数据存储在全局/静态变量中，但我想知道是否可以简单地评估一个布尔表达式来检查是否可以操作 DOM。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-02T11:23:57.123

使用 jQuery，您可以使用：

```
 var isready = false;

    $(function() {
     isready = true;
    }); 
```

[在此处](http://api.jquery.com/ready/)阅读有关它的更多信息

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-02T11:21:06.843

我不明白你为什么要这样做。在任何情况下，您都可以在文档就绪回调中设置一个变量并检查该变量。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-02T11:37:32.940

@Lucero 是对的，但在某些情况下，您需要一个标志来指示内容已准备好（可能与另一个框架同步......）。如果是这种情况，您可以创建一个窗口范围的变量来发出信号并将其值设置为`$(document).ready`：

```
// declare your "global" flag as false
window.flagDomLoaded = false;

// set the global to true to signal that the contents are ready
$(document).ready(function(){ window.flagDomLoaded = true; });

// check the global flag on your code
function checkDOMReady() 
{
    if (window.flagDomLoaded)
        alert("The DOM was ready when this function was called");
    else
        alert("The DOM was <b>NOT</b> ready when this function was called");
} 
```

请注意，我建议您使用更标准的方法，例如 @Lucero 或 @Sandeep 解决方案。如果你不能那样做，这个解决方案是可以接受的。

# java - 接近警报触发两次？

> ID：10412677
> 
> 赞同：1
> 
> 时间：2012-05-02T11:19:35.597
> 
> 标签：java, android, eclipse, osmdroid

接收者：

```
public class ProximityAlert extends BroadcastReceiver {

    @Override
    public void onReceive(Context context, Intent intent) {
        int id = intent.getIntExtra("id", -1);
        String title = intent.getStringExtra("Title");

        Intent showDialog = new Intent(context, ShowMapDialog.class);
        showDialog.putExtra("id", id);
        showDialog.putExtra("Title", title);
        context.startActivity(showDialog);
    }

} 
```

ShowMapDialog.java:

```
public class ShowMapDialog extends Activity {

PowerManager.WakeLock wakeLock;
AlertDialog alertbox;

@Override
public void onCreate(Bundle savedInstanceState){
    super.onCreate(savedInstanceState);

    Bundle extras = getIntent().getExtras();

    Prefs sp = new Prefs();

    int lastplaceid = sp.getLastPlaceID(getApplicationContext());
    boolean nopopup = sp.getNoPopup(getApplicationContext());

    final int id = extras.getInt("id");
    String Title = extras.getString("Title");

    Log.d("id+title",id+"+"+Title);

    PowerManager pm = (PowerManager) getSystemService(Context.POWER_SERVICE);
    wakeLock = pm.newWakeLock(PowerManager.SCREEN_DIM_WAKE_LOCK, "Place of Interest");

    if(id != lastplaceid && !nopopup) {
        wakeLock.acquire();

        sp.setLastPlaceID(getApplicationContext(), id);

        Vibrator v = (Vibrator) getSystemService(Context.VIBRATOR_SERVICE);
        int dot = 200;
        int dash = 500;
        int long_gap = 1000;
        long[] pattern = {0, dash, dot, dash, long_gap};
        v.vibrate(pattern, -1);

        alertbox = new AlertDialog.Builder(ShowMapDialog.this).create();
        alertbox.setTitle(getString(R.string.dialogTitle));
        alertbox.setMessage(getString(R.string.dialogShowPlaceText1)+Title+getString(R.string.dialogShowPlaceText2));
        alertbox.setButton(getString(R.string.dialogShowPlaceYes), new DialogInterface.OnClickListener() {

            @Override
            public void onClick(DialogInterface dialog, int which) {
                Intent showPlace = new Intent(getApplicationContext(),Showplace.class);
                showPlace.putExtra("id", id);
                startActivity(showPlace);
            }
        });
        alertbox.setButton2(getString(R.string.dialogShowPlaceNo), new DialogInterface.OnClickListener() {

            @Override
            public void onClick(DialogInterface dialog, int which) {
                finish();
            }
        });
        alertbox.show();
    } else if(id != lastplaceid && nopopup){
        wakeLock.acquire();
        sp.setLastPlaceID(getApplicationContext(), id);
        Intent showPlace = new Intent(getApplicationContext(),Showplace.class);
        showPlace.putExtra("id", id);
        startActivity(showPlace);
    } else {
        finish();
    }
}

@Override
public void onPause(){
    super.onPause();
    wakeLock.release();
    alertbox.dismiss();
    finish();
} 
```

}

创建 ProximityAlerts：

```
 private void setProximityAlert(String Title, double lat, double lon, float radius, final int id, int requestCode){
        // Expiration is x Minutes (x mins * 60secs * 1000milliSecs)
        long expiration = -1;

        Intent intent = new Intent(PROXIMITY_INTENT_ACTION);
        intent.putExtra("id", id);
        intent.putExtra("Title", Title);

        PendingIntent pendingIntent = PendingIntent.getBroadcast(getApplicationContext(), requestCode, intent, PendingIntent.FLAG_CANCEL_CURRENT);

        mlocManager.addProximityAlert(lat, lon, radius, expiration, pendingIntent);
    }

    public void placeMarkersPoints(){
        this.dh = new DataHelper(ShowMap.this);
        List<Pontos> list = this.dh.selectAll();
        markerPlaces = new OverlayPlaces(getResources().getDrawable(R.drawable.marker_places), mapView);
        for(Pontos p : list){
             markerPlaces.addPoint(new GeoPoint(p.getLat(),p.getLng()),p.getName().toString(),Integer.toString(p.getId()));
             setProximityAlert(p.getName().toString(), p.getLat(), p.getLng(), p.getRadius(), p.getId(), p.getId());
        }
        mapView.getOverlays().add(markerPlaces);
        mapView.invalidate();
    } 
```

我像这样在 onCreate 上注册接收器：

```
 br = new ProximityAlert();
    mIntentFilter = new IntentFilter(PROXIMITY_INTENT_ACTION); 
```

暂停：

```
@Override
public void onPause() {
    super.onPause();
    mlocManager.removeUpdates(this);
    unregisterReceiver(br);
} 
```

简历：

```
@Override
protected void onResume() {
    super.onResume();
    mlocManager.requestLocationUpdates(LocationManager.GPS_PROVIDER, 5000, 10, this);
    registerReceiver(br, mIntentFilter);
} 
```

当我通过第二个 ProximityAlert 时，它会执行此代码两次：`Log.d("id+title",id+"+"+Title);`

有任何想法吗？如果需要，我可以发布更多代码:)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-08T08:24:58.460

实际上我的问题在于广播接收器。

我正在摧毁它们，但并不完全正确，所以有时它们会加倍，或三倍，或 w/e。

谢谢，但我自己解决了:)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-08-19T13:20:36.690

每次应用程序恢复时，您都在注册接收器。

```
@Override
protected void onResume() {
    super.onResume();
    ...
    registerReceiver(br, mIntentFilter); 
} 
```

因此，每次触发每个接近警报 ( `PendingIntent`) 时，都会触发多个接收器实例（每次恢复活动时都会触发一个）。想象一下，您有一个呼叫者和一大群克隆的接收者，他们都同时回复。

`onResume`只要在每次应用程序暂停时删除/销毁接近警报，创建就可以了`onPause()`。

否则，在您的主/导航活动中创建一次。在这种情况下，即使应用程序处于后台，接收器也会继续触发（这可能是 [警报应用程序] 或可能不是 [显示更改，例如] 是所需的行为）。

# asp.net - 如何在不使用 for 循环的情况下从列表框中获取选定项目的值

> ID：10412678
> 
> 赞同：4
> 
> 时间：2012-05-02T11:19:35.910
> 
> 标签：asp.net, listbox

我的 aspx 页面中有一个如下列表框

```
<asp:ListBox ID="ddlCategory" runat="server" SelectionMode="Multiple" Width="200"
></asp:ListBox> 
```

我已将其与类别数据集绑定。一切正常。现在我想从服务器端的这个列表框中获取所有选定的项目。有很多方法可以实现这些。但我不想迭代每个项目。因为列表项有 1000 个类别。

有什么办法可以做到这一点？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-02T11:32:21.967

你可以这样实现

```
var selectedItems = from li in ddlCategory.Items.Cast<ListItem>()
                    where li.Selected == true
                    select li; 
```

在这里查看另一种实现方式

[http://frazsundal.blogspot.com/2012/05/fetch-aspnet-listbox-control-selected.html](http://frazsundal.blogspot.com/2012/05/fetch-aspnet-listbox-control-selected.html)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-03T08:43:56.040

以下是对您有帮助的示例。

```
Dim lst As New System.Web.UI.WebControls.ListBox
lst.Items.Add(New ListItem("1", 1))
lst.Items.Add(New ListItem("2", 2))
lst.Items.Add(New ListItem("3", 3))
lst.SelectionMode = ListSelectionMode.Multiple
lst.Items(0).Selected = True
lst.Items(2).Selected = True
Dim selectedItems As List(Of ListItem) = (From li In lst.Items.Cast(Of ListItem)() Where li.Selected = True Select li).ToList 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-02T12:26:31.273

您可以获得所选项目的所有索引：

```
 int [] indexes= ListBox1.GetSelectedIndices();
        for (int i = 0; i < indexes.Length; i++)
        {
            // ListBox1.Items[i]  ;
        } 
```

# java - 构建失败 D:\opt\trunk\build.xml:117: 无法创建任务或类型类型：for

> ID：10412680
> 
> 赞同：3
> 
> 时间：2012-05-02T11:19:40.243
> 
> 标签：java, xml, ant

我已将 antcontrib.03.jar 添加到 ANT_HOME/lib 和单独的位置 d:\lib 中，但它仍然给我这个错误。任何人都可以在这里帮助我。谢谢！

## build.properties

```
#back-end - copy
back.end.dir=d:/opt/polopoly/pear/work/ears/front    
path.to.tomcat.dir=${back.end.dir}/tomcat1,${back.end.dir}/tomcat2,${back.end.dir}/tomcat3, ${back.end.dir}/tomcat3,${back.end.dir}/tomcat4,${back.end.dir}/tomcat5
root.war.file=${path.to.tomcat.dir}/test1.war,${path.to.tomcat.dir}/test2.war,${path.to.tomcat.dir}/test3.war,${path.to.tomcat.dir}/test4.war,${path.to.tomcat.dir}/test5.war

#front-end -paste
host.name=//servername/share
path.to.tomcat.webapps=${host.name}/opt/tomcat/webapps 
```

## 构建.xml

```
<taskdef resource="net/sf/antcontrib/antcontrib.properties">
  <classpath>
    <pathelement location="d:/lib/ant-contrib-0.3.jar"/>
  </classpath>
</taskdef>

<!-- copy new ROOT.war file -->
<target name="deploy-root" description="Copy new root.war from pCMS back-end to front-end" depends="prepare">
        <sequential>
            <for list="${root.war.file}" param="single-file">
                <echo> Copying File @{single-file} </echo>
                <copy file="@{single-file}" todir="${path.to.tomcat.webapps}" overwrite="true" />
            </for>  
        </sequential>
</target> 
```

## 输出错误

```
D:\opt\trunk>ant deploy-root
Buildfile: build.xml
  [taskdef] Could not load definitions from resource lib/net/sf/antcontrib/antcontrib.properties. It could not be found.

init:
     [echo] TODAYS DATE AND TIME: 2 May 2012, 12:16:28 PM, BST

prepare:

deploy-root:

BUILD FAILED
D:\opt\trunk\build.xml:117: Could not create task or type of type: for.

Ant could not find the task or a class this task relies upon.

This is common and has a number of causes; the usual
solutions are to read the manual pages then download and
install needed JAR files, or fix the build file:
 - You have misspelt 'for'.
   Fix: check your spelling.
 - The task needs an external JAR file to execute
     and this is not found at the right place in the classpath.
   Fix: check the documentation for dependencies.
   Fix: declare the task.
 - The task is an Ant optional task and the JAR file and/or libraries
     implementing the functionality were not found at the time you
     yourself built your installation of Ant from the Ant sources.
   Fix: Look in the ANT_HOME/lib for the 'ant-' JAR corresponding to the
     task and make sure it contains more than merely a META-INF/MANIFEST.MF.
     If all it contains is the manifest, then rebuild Ant with the needed
     libraries present in ${ant.home}/lib/optional/ , or alternatively,
     download a pre-built release version from apache.org
 - The build file was written for a later version of Ant
   Fix: upgrade to at least the latest release version of Ant
 - The task is not an Ant core or optional task
     and needs to be declared using <taskdef>.
 - You are attempting to use a task defined using
    <presetdef> or <macrodef> but have spelt wrong or not
   defined it at the point of use

Remember that for JAR files to be visible to Ant tasks implemented
in ANT_HOME/lib, the files must be in the same directory or on the
classpath

Please neither file bug reports on this problem, nor email the
Ant mailing lists, until all of these causes have been explored,
as this is not an Ant bug. 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-02T18:05:19.583

采用 ：

```
<taskdef resource="net/sf/antcontrib/antlib.xml">
  <classpath>
    <pathelement location="d:/lib/ant-contrib-0.3.jar"/>
  </classpath>
</taskdef> 
```

反而。
antcontrib.properties 文件只有 1.6 之前的 ant 版本的 taskdefs，其中`<for>`不包含ie

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-02T11:25:56.477

该文件`D:/opt/trunk/lib/net/sf/antcontrib/antcontrib.properties`在您的构建文件中被引用，但不存在（或当前用户无法访问）。确保它存在并且允许当前用户阅读它。

# java - Netbeans 平台自定义配置文件

> ID：10412681
> 
> 赞同：1
> 
> 时间：2012-05-02T11:19:41.287
> 
> 标签：java, configuration-files, netbeans-platform

我正在尝试为数据库连接创建配置文件。属性文件最好。每次安装应用程序（客户数据库）后，必须更改此属性。

*   我希望这个配置文件位于应用程序的根目录（netbeans 平台项目和发行版文件夹）。我找不到如何引用应用程序根文件夹的方法。

*   我还发现 FileUtil.getConfigFile/Root 缺乏文档。我不知道在哪里可以找到 configRoot（如果它甚至是物理的），或者如何离线添加 ConfigFile（不是在代码中，而只是通过复制配置文件）。

*   可以容忍的解决方案是将数据库配置添加到系统属性，但我找不到在 netbeans 配置文件中指定其他系统属性的位置。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-08T22:03:42.287

您可以将属性文件放在其中一个模块的 Release 文件夹中，然后使用 InstalledFileLocator API 访问它：http: [//bits.netbeans.org/dev/javadoc/org-openide-modules/org/openide/modules/InstalledFileLocator .html](http://bits.netbeans.org/dev/javadoc/org-openide-modules/org/openide/modules/InstalledFileLocator.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-09T06:10:23.487

要访问 NetBeans 应用程序的安装目录，您可以使用以下代码段

```
new File(System.getProperty ("netbeans.home")).getParentFile() 
```

如果您附加`'/etc'`到结果文件，您将位于托管 app.conf 文件的同一文件夹中。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-07T18:32:53.080

你为什么不使用[app.conf](https://blogs.oracle.com/geertjan/entry/support_for_custom_configuration_files)？它位于ROOT / etc中。

您可以使用系统属性或更优雅的[OptionProcessor](http://bits.netbeans.org/dev/javadoc/org-netbeans-modules-sendopts/org/netbeans/spi/sendopts/OptionProcessor.html)

# java - 在 JFrame 中显示 HTML 代码预览？

> ID：10412682
> 
> 赞同：1
> 
> 时间：2012-05-02T11:19:41.420
> 
> 标签：java, html, swing, jframe, jtextcomponent

我正在编写一个也由 HTML 组成的 Java 代码。我只想预览该 HTML 代码`JFrame`。Java API 中是否有可用的解决方案？

你能指导我解决这个问题吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-02T11:27:30.760

是的。可以显示[`JEditorPane`](http://docs.oracle.com/javase/7/docs/api/javax/swing/JEditorPane.html)（简单）HTML。有关更多详细信息，请参阅本[`JEditorPane`教程](http://www.apl.jhu.edu/~hall/java/Swing-Tutorial/Swing-Tutorial-JEditorPane.html)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-02T11:49:32.850

`JEditorPane`[支持HTML 3.2](http://www.w3.org/TR/REC-html32)元素的子集以及简单样式 (CSS)。虽然这个任务可以使用 CSS 来完成，但 HTML 3.2 的 body 元素也接受一个`bgcolor`.

![具有背景颜色的网页](../Images/6a4d766c65e6cb67c4bd08bcbebfcd53.png)

```
import java.awt.Dimension;
import javax.swing.*;

class WebPageWithBackground {
    WebPageWithBackground() {
        String html = "<html><body bgcolor='#ffbb99'>Hi!";
        JEditorPane jep = new JEditorPane();
        jep.setContentType("text/html");
        jep.setText(html);
        jep.setPreferredSize(new Dimension(400,50));
        JOptionPane.showMessageDialog(null, jep);
    }

    public static void main(String[] args) {
        SwingUtilities.invokeLater(new Runnable() {
            public void run() {
                new WebPageWithBackground();
            }
        });
    }
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-02T12:23:43.047

实际上，几乎每个可以在某处显示自定义用户文本的 Swing 组件都允许使用 HTML 而不是文本。例如 JButton 文本、JTabbedPane 选项卡标题、JTable 单元格/标题、JLabel 文本、JList/JTree/JComboBox 单元格渲染器、组件工具提示等。

要在其中任何一个中使用 HTML - 只需`<html>`在文本的开头添加标签 - 这足以让视图解析器知道您在其中有一些 HTML。

此外，Java 支持的 HTML 也相当陈旧，大多数新功能都无法使用，因为您可以在现代浏览器或可视化编辑器中看到它们。但它仍然足以在您需要的地方创建一些高级组件内容。

还有一件事——如果你想在 HTML 中显示一些本地图像，你必须更改组件的基本位置，以便它可以正确加载它们：

```
component.putClientProperty (
    BasicHTML.documentBaseKey, 
    new File ( "/local/path/" ).toURI ().toURL () 
); 
```

一些正确的 URL 应该在该键下（本地或远程）。

# c - 如何从源代码编译我自己的 glibc C 标准库并使用它？

> ID：10412684
> 
> 赞同：22
> 
> 时间：2012-05-02T11:19:51.787
> 
> 标签：c, linux, gcc, x86-64, glibc

我正在尝试编译我自己的 glibc。我有一个目录`glibc`，里面包含`glibc`我从网上下载的源代码。从那个目录我输入了`mkdir ../build-glibc`. 现在从`build-glibc`我键入的目录`../glibc/configure`中执行配置。现在我不确定如何调用`make`. 我不能从`glibc`目录调用它，因为它没有配置集，我也不能从 调用它`build-glibc`，因为 makefile 不在该目录中。我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：30
> 
> 时间：2018-09-22T08:00:46.587

## 设置 1：没有专用 GCC 的 glibc

此设置可能会起作用并且速度很快，因为它不会重新编译整个 GCC 工具链，只需重新编译 glibc。

我在这个设置中遇到的唯一问题是我还没有找到一种很好的方法来使用我们的 glibc 提供的运行时对象，例如`crt1.o`、`crti.o`和`crtn.o`，而我现在正在使用主机对象。在以下位置提到了这一点：[https](https://sourceware.org/glibc/wiki/Testing/Builds?action=recall&rev=21#Compile_against_glibc_in_an_installed_location) ://sourceware.org/glibc/wiki/Testing/Builds?action=recall&rev= 21#Compile_against_glibc_in_an_installed_location 这些对象执行 glibc 所依赖的早期设置，所以如果事情以美妙的方式崩溃，我不会感到惊讶和非常微妙的方式。请参阅下面解决此问题的尝试。

构建 glibc 并在本地安装：

```
git clone git://sourceware.org/git/glibc.git
cd glibc
git checkout glibc-2.32
mkdir build
cd build
export glibc_install="$(pwd)/install"
../configure --prefix "$glibc_install"
make -j `nproc`
make install -j `nproc` 
```

### 设置 1：验证构建

test_glibc.c

```
#define _GNU_SOURCE
#include <assert.h>
#include <gnu/libc-version.h>
#include <stdatomic.h>
#include <stdio.h>
#include <threads.h>

atomic_int acnt;
int cnt;

int f(void* thr_data) {
    for(int n = 0; n < 1000; ++n) {
        ++cnt;
        ++acnt;
    }
    return 0;
}

int main(int argc, char **argv) {
    /* Basic library version check. */
    printf("gnu_get_libc_version() = %s\n", gnu_get_libc_version());

    /* Exercise thrd_create from -pthread,
     * which is not present in glibc 2.27 in Ubuntu 18.04.
     * https://stackoverflow.com/questions/56810/how-do-i-start-threads-in-plain-c/52453291#52453291 */
    thrd_t thr[10];
    for(int n = 0; n < 10; ++n)
        thrd_create(&thr[n], f, NULL);
    for(int n = 0; n < 10; ++n)
        thrd_join(thr[n], NULL);
    printf("The atomic counter is %u\n", acnt);
    printf("The non-atomic counter is %u\n", cnt);
} 
```

编译并运行`test_glibc.sh`：

```
#!/usr/bin/env bash
set -eux
gcc \
  -L "${glibc_install}/lib" \
  -I "${glibc_install}/include" \
  -Wl,--rpath="${glibc_install}/lib" \
  -Wl,--dynamic-linker="${glibc_install}/lib/ld-linux-x86-64.so.2" \
  -std=c11 \
  -o test_glibc.out \
  -v \
  test_glibc.c \
  -pthread \
;
ldd ./test_glibc.out
./test_glibc.out 
```

命令改编自[https://sourceware.org/glibc/wiki/Testing/Builds?action=recall&rev=21#Compile_against_glibc_in_an_installed_location](https://sourceware.org/glibc/wiki/Testing/Builds?action=recall&rev=21#Compile_against_glibc_in_an_installed_location)

该程序输出预期的：

```
gnu_get_libc_version() = 2.32
The atomic counter is 10000
The non-atomic counter is 8674 
```

`ldd`输出确认`ldd`我们刚刚构建的 和 库实际上正在按预期使用：

```
+ ldd test_glibc.out
        linux-vdso.so.1 (0x00007ffe4bfd3000)
        libpthread.so.0 => /home/ciro/glibc/build/install/lib/libpthread.so.0 (0x00007fc12ed92000)
        libc.so.6 => /home/ciro/glibc/build/install/lib/libc.so.6 (0x00007fc12e9dc000)
        /home/ciro/glibc/build/install/lib/ld-linux-x86-64.so.2 => /lib64/ld-linux-x86-64.so.2 (0x00007fc12f1b3000) 
```

编译调试输出显示使用`gcc`了我的主机运行时对象，如前所述，这很糟糕，但我不知道如何解决它，例如它包含：

```
COLLECT_GCC_OPTIONS=/usr/lib/gcc/x86_64-linux-gnu/7/../../../x86_64-linux-gnu/crt1.o 
```

### 设置1：修改glibc

现在让我们修改 glibc：

```
diff --git a/nptl/thrd_create.c b/nptl/thrd_create.c
index 113ba0d93e..b00f088abb 100644
--- a/nptl/thrd_create.c
+++ b/nptl/thrd_create.c
@@ -16,11 +16,14 @@
    License along with the GNU C Library; if not, see
    <http://www.gnu.org/licenses/>.  */

+#include <stdio.h>
+
 #include "thrd_priv.h"

 int
 thrd_create (thrd_t *thr, thrd_start_t func, void *arg)
 {
+  puts("hacked");
   _Static_assert (sizeof (thr) == sizeof (pthread_t),
                   "sizeof (thr) != sizeof (pthread_t)"); 
```

然后重新编译重新安装glibc，重新编译重新运行我们的程序：

```
cd glibc/build
make -j `nproc`
make -j `nproc` install
./test_glibc.sh 
```

我们看到`hacked`按预期打印了几次。

这进一步证实了我们实际上使用的是我们编译的 glibc 而不是主机。

在 Ubuntu 20.10 上测试。

### 设置 1：尝试使用正确的`crt*`对象

[https://sourceware.org/glibc/wiki/Testing/Builds?action=recall&rev=21#Compile_against_glibc_in_an_installed_location](https://sourceware.org/glibc/wiki/Testing/Builds?action=recall&rev=21#Compile_against_glibc_in_an_installed_location)建议添加`--sysroot`到`gcc`命令中，但是：

*   它并没有真正根据日志将对象更改为我们的对象
*   并且它使编译失败`/usr/bin/ld: cannot find libgcc_s.so.1`可能是因为`sysroot`用于这个 GCC 提供的对象，我们在那个 sysroot 中没有这个对象，因为我们只构建了 glibc

在[https://stackoverflow.com/a/66634184/895245](https://stackoverflow.com/a/66634184/895245) ZeZNiQ 提供了一个可能正确的解决方法，通过传递：

```
-nostartfiles 
```

紧随其后的是所有对象。您只需要从完整命令中提取正确的对象`-nostartfiles`并手动传递它们。

比如在我的amd64机器上，使用的对象和他的32位命令不同，所以这有点繁琐。

参考书目：

*   [如何更改 GCC 对 crti.o 的默认搜索目录？](https://stackoverflow.com/questions/28904902/how-do-i-change-gccs-default-search-directory-for-crti-o)
*   [https://gcc.gnu.org/legacy-ml/gcc-help/2015-02/msg00016.html](https://gcc.gnu.org/legacy-ml/gcc-help/2015-02/msg00016.html)
*   [https://gcc.gnu.org/legacy-ml/gcc-help/2001-11/msg00029.html](https://gcc.gnu.org/legacy-ml/gcc-help/2001-11/msg00029.html)

## 设置 2：crosstool-NG 原始设置

这是设置 1 的替代方案，它是我迄今为止实现的最正确的设置：据我观察，一切都是正确的，包括 C 运行时对象，例如`crt1.o`、`crti.o`和`crtn.o`.

在此设置中，我们将编译一个完整的专用 GCC 工具链，该工具链使用我们想要的 glibc。

这种方法唯一的缺点是构建需要更长的时间。但我不会冒险用更少的东西来进行生产设置。

[crosstool-NG](https://github.com/crosstool-ng/crosstool-ng)是一组脚本，可以为我们从源代码下载和编译所有内容，包括 GCC、glibc 和 binutils。

是的，GCC 构建系统非常糟糕，以至于我们需要一个单独的项目。

这种设置并不完美，因为[crosstool-NG 不支持构建没有额外`-Wl`标志](https://github.com/crosstool-ng/crosstool-ng/issues/1030)的可执行文件，这感觉很奇怪，因为我们自己构建了 GCC。但似乎一切正常，所以这只是一个不便。

获取 crosstool-NG，配置并构建它：

```
git clone https://github.com/crosstool-ng/crosstool-ng
cd crosstool-ng
git checkout a6580b8e8b55345a5a342b5bd96e42c83e640ac5
export CT_PREFIX="$(pwd)/.build/install"
export PATH="/usr/lib/ccache:${PATH}"
./bootstrap
./configure --enable-local
make -j `nproc`
./ct-ng x86_64-unknown-linux-gnu
./ct-ng menuconfig
env -u LD_LIBRARY_PATH time ./ct-ng build CT_JOBS=`nproc` 
```

构建大约需要三十分钟到两个小时。

我能看到的唯一强制性配置选项是使其与您的主机内核版本匹配以使用正确的内核头文件。使用以下命令查找您的主机内核版本：

```
uname -a 
```

这向我展示了：

```
4.15.0-34-generic 
```

所以在`menuconfig`我做：

*   `Operating System`
    *   `Version of linux`

所以我选择：

```
4.14.71 
```

这是第一个相同或更旧的版本。它必须更旧，因为内核向后兼容。

### 设置 2：可选配置

`.config`我们生成的有`./ct-ng x86_64-unknown-linux-gnu`：

```
CT_GLIBC_V_2_27=y 
```

要改变这一点，`menuconfig`请执行以下操作：

*   `C-library`
*   `Version of glibc`

保存`.config`，然后继续构建。

或者，如果您想使用自己的 glibc 源，例如从最新的 git 使用 glibc，请按[以下方式](https://github.com/crosstool-ng/crosstool-ng/issues/1024)进行：

*   `Paths and misc options`
    *   `Try features marked as EXPERIMENTAL`：设置为真
*   `C-library`
    *   `Source of glibc`
        *   `Custom location`: 说是
        *   `Custom location`
            *   `Custom source location`: 指向包含 glibc 源的目录

其中 glibc 被克隆为：

```
git clone git://sourceware.org/git/glibc.git
cd glibc
git checkout glibc-2.28 
```

### 设置2：测试一下

一旦您构建了您想要的工具链，请使用以下命令对其进行测试：

```
#!/usr/bin/env bash
set -eux
install_dir="${CT_PREFIX}/x86_64-unknown-linux-gnu"
PATH="${PATH}:${install_dir}/bin" \
  x86_64-unknown-linux-gnu-gcc \
  -Wl,--dynamic-linker="${install_dir}/x86_64-unknown-linux-gnu/sysroot/lib/ld-linux-x86-64.so.2" \
  -Wl,--rpath="${install_dir}/x86_64-unknown-linux-gnu/sysroot/lib" \
  -v \
  -o test_glibc.out \
  test_glibc.c \
  -pthread \
;
ldd test_glibc.out
./test_glibc.out 
```

除了现在使用了正确的运行时对象之外，一切似乎都像设置 1 一样工作：

```
COLLECT_GCC_OPTIONS=/home/ciro/crosstool-ng/.build/install/x86_64-unknown-linux-gnu/bin/../x86_64-unknown-linux-gnu/sysroot/usr/lib/../lib64/crt1.o 
```

### 设置 2：失败的有效 glibc 重新编译尝试

如下所述，使用 crosstool-NG 似乎是不可能的。

如果您只是重新构建；

```
env -u LD_LIBRARY_PATH time ./ct-ng build CT_JOBS=`nproc` 
```

然后您对自定义 glibc 源位置的更改会被考虑在内，但它会从头开始构建所有内容，使其无法用于迭代开发。

如果我们这样做：

```
./ct-ng list-steps 
```

它很好地概述了构建步骤：

```
Available build steps, in order:
  - companion_tools_for_build
  - companion_libs_for_build
  - binutils_for_build
  - companion_tools_for_host
  - companion_libs_for_host
  - binutils_for_host
  - cc_core_pass_1
  - kernel_headers
  - libc_start_files
  - cc_core_pass_2
  - libc
  - cc_for_build
  - cc_for_host
  - libc_post_cc
  - companion_libs_for_target
  - binutils_for_target
  - debug
  - test_suite
  - finish
Use "<step>" as action to execute only that step.
Use "+<step>" as action to execute up to that step.
Use "<step>+" as action to execute from that step onward. 
```

因此，我们看到 glibc 步骤与几个 GCC 步骤交织在一起，最明显`libc_start_files`的是 before `cc_core_pass_2`，这可能是最昂贵的步骤`cc_core_pass_1`。

为了只构建一个步骤，您必须首先`.config`在初始构建选项中设置“保存中间步骤”：

*   `Paths and misc options`
    *   `Debug crosstool-NG`
        *   `Save intermediate steps`

然后你可以尝试：

```
env -u LD_LIBRARY_PATH time ./ct-ng libc+ -j`nproc` 
```

但不幸的是，`+`所需的内容如下：[https ://github.com/crosstool-ng/crosstool-ng/issues/1033#issuecomment-424877536](https://github.com/crosstool-ng/crosstool-ng/issues/1033#issuecomment-424877536)

> 但是请注意，在中间步骤重新启动会将安装目录重置为该步骤期间的状态。即，您将拥有一个重建的 libc - 但没有使用此 libc 构建的最终编译器（因此，也没有像 libstdc++ 这样的编译器库）。

并且基本上仍然使重建速度太慢而无法进行开发，而且我不知道如何在不修补 crosstool-NG 的情况下克服这个问题。

此外，从`libc`step 开始似乎没有从 再次复制源`Custom source location`，进一步使该方法无法使用。

## 奖励：stdlibc++

如果您也对 C++ 标准库感兴趣，这是一个奖励：[如何编辑和重新构建 GCC libstdc++ C++ 标准库源？](https://stackoverflow.com/questions/21872229/how-to-edit-and-re-build-the-gcc-libstdc-c-standard-library-source/51946224#51946224)

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-05-02T11:36:20.130

如果脚本成功完成，`Makefile`它将存在于您的`build-glibc`目录中。`configure`

如果在 期间一切*似乎*都很顺利`configure`，但仍然没有`Makefile`，那么你可能错过了一个特质：

在为 glibc 做 a`configure`时，通常希望您提供一个替代方法`--prefix`，因为安装到默认位置 ( `/usr/local`) 可能会削弱系统。如果您不提供，则需要打开`--disable-sanity-checks`.

如果不是这种情况，请查找`config.log`文件并读取其内容。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2021-03-15T07:53:59.880

添加到 Ciro 早期的答案/解决方案[https://stackoverflow.com/a/52454710/4726668](https://stackoverflow.com/a/52454710/4726668)：

@CiroSantilli 编辑您的答案会返回“建议的编辑队列已满”。您在脚本中调用的 ldd 脚本`test_glibc.sh`指向主机动态链接器：`/home/ciro/glibc/build/install/lib/ld-linux-x86-64.so.2 => /lib64/ld-linux-x86-64.so.2 (0x00007fc12f1b3000)`. 要解决此问题，请在`test_glibc.sh`中更改`ldd`为`${glibc_install}/bin/ldd`。这将要求您将构建的`crt`*.o 文件也添加到脚本中：

```
-nostartfiles \
${glibc_install}/lib/crti.o \
${glibc_install}/lib/crtn.o \
${glibc_install}/lib/crt1.o \ 
```

在我的 GNU/Linux i386/i686（32 位 x86 架构）机器上，以下是我的工作`test_glibc.sh`：

```
#!/usr/bin/env bash
set -eux
gcc \
  -L "${glibc_install}/lib" \
  -I "${glibc_install}/include" \
  -Wl,--rpath="${glibc_install}/lib" \
  -Wl,--dynamic-linker="${glibc_install}/lib/ld-linux.so.2" \
  -std=c11 \
  -nostartfiles \
  ${glibc_install}/lib/crti.o \
  ${glibc_install}/lib/crtn.o \
  ${glibc_install}/lib/crt1.o \
  -o test_glibc.out \
  -v \
  test_glibc.c \
  -pthread \
;
${glibc_install}/bin/ldd ./test_glibc.out
./test_glibc.out 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2021-06-27T17:44:23.767

`glibc/version.h`上次在2021 年 6 月 27 日使用 glibc 开发版本 2.33.9000（参见 参考资料）在 Ubuntu 20.04 上进行测试。

## 如何下载和构建 glibc，并运行其基准测试

您可以在此处手动获取 glibc 源代码：[https](https://www.gnu.org/software/libc/sources.html) ://www.gnu.org/software/libc/sources.html ：

```
git clone https://sourceware.org/git/glibc.git
cd glibc
git checkout master 
```

GitHub 上的第 3 方镜像：[https ://github.com/bminor/glibc/tree/master/benchtests](https://github.com/bminor/glibc/tree/master/benchtests)

也可以看看：

1.  [https://kazoo.ga/a-simple-tool-to-test-malloc-performance/](https://kazoo.ga/a-simple-tool-to-test-malloc-performance/)

## 如果您希望手动构建 glibc 及其基准测试，请执行以下操作：

```
# IMPORTANT: begin AT THE SAME DIRECTORY LEVEL as the `glibc` source code 
# directory, NOT inside the `glibc` source code dir! In other words, if 
# you are in the correct dir, running `ls` will show the `glibc` source
# code dir (that you just cloned) inside the dir you are in.
mkdir -p glibc-build
mkdir -p glibc-install
cd glibc-build
../glibc/configure --prefix="$(realpath "../glibc-install")"
time make -j8  # build with 8 threads (jobs); on a fast laptop this takes ~3 min.
time make install # (optional: install to the `glibc-install` dir you created)

# Build the benchtests (everything inside the `glibc/benchtests` dir) too;
# see the makefile 'glibc/benchtests/Makefile' for more build commands. 
time make bench-build -j8
# Now you have this executable file you can use for malloc speed tests, for instance!: 
#       ../glibc-build/benchtests/bench-malloc-thread

# To build **and run** all glibc benchtests, do:
time make bench 
```

## 参考：

1.  [https://www.gnu.org/software/libc/manual/html_node/Configuring-and-compiling.html](https://www.gnu.org/software/libc/manual/html_node/Configuring-and-compiling.html)
2.  [https://kazoo.ga/a-simple-tool-to-test-malloc-performance/](https://kazoo.ga/a-simple-tool-to-test-malloc-performance/)
3.  [https://github.com/f18m/malloc-benchmarks/blob/master/Makefile#L122-L129](https://github.com/f18m/malloc-benchmarks/blob/master/Makefile#L122-L129)：我通过研究这个makefile目标学到了很多：

    ```
    $(glibc_install_dir)/lib/libc.so.6:
    @echo "Building GNU libc... go get a cup of coffee... this will take time!"
    mkdir -p $(glibc_build_dir)
    cd $(glibc_build_dir) && \
        ../glibc/configure --prefix=$(glibc_install_dir) && \
        make $(parallel_flags) && \
        make install
    [ -x $(glibc_build_dir)/benchtests/bench-malloc-thread ] && echo "GNU libc benchmarking utility is ready!" || echo "Cannot find GNU libc benchmarking utility! Cannot collect benchmark results" 
    ```

4.  [如何从源代码编译我自己的 glibc C 标准库并使用它？](https://stackoverflow.com/questions/10412684/how-to-compile-my-own-glibc-c-standard-library-from-source-and-use-it/52454710#52454710)

[关键词：如何构建和运行 glibc 及其基准测试，包括。malloc 基准测试，来自源代码；在 linux ubuntu 上从源代码构建 glibc]

# java - Android优化和可移植性

> ID：10412687
> 
> 赞同：-1
> 
> 时间：2012-05-02T11:20:16.327
> 
> 标签：java, android

我已经开发 java 好几年了，我正在考虑尝试 android 应用程序开发，即使我在游戏中有点晚了。

我将如何限制 android 应用程序的内存使用和电池使用？

还有，我在编写安卓应用程序时会遇到什么样的可移植性问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-02T11:23:05.017

第一个在很大程度上取决于使用的硬件（GPS、Wifi、...），当然这取决于您的应用程序将是什么。

可移植性基本上就像 Web 开发：当你偶然发现它们时，你会看到。凭借经验，您将在碰壁之前实施您记得的解决方法......

# javascript - 文件 API 不适用于 Google Chrome 扩展程序中的 Blob

> ID：10412691
> 
> 赞同：0
> 
> 时间：2012-05-02T11:20:24.377
> 
> 标签：javascript, html, google-chrome, google-chrome-extension, google-chrome-os

我正在为 Google Chrome 编写扩展程序，我需要在其中下载页面图像并将它们保存在磁盘上的临时文件中。为此，我创建了一个 XMLHttpRequest 并使用它来下载图像。在回调函数中，当我在 request.response 中有图像时，我使用`window.webkitRequestFileSystem(window.TEMPORARY, 1024 * 1024 * 20, writeImageToFile, errorHandler)`. 在回调函数 writeImageToFile 中，我创建了 FileWriter 对象并将 blob 写入其中。该文件正在创建，但我无法找到它的创建位置。我需要扩展文件的 Windows 路径。请帮忙！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-02T11:26:59.753

出于您的目的，您不需要虚拟文件系统。使用该[`webkitURL.createObjectURL`](https://developer.mozilla.org/en/DOM/window.URL.createObjectURL)方法从 blob 创建 URL：

```
window.webkitURL.createObjectURL(blob); 
```

### 从 Chrome 19 开始，您可以使用以下方法直接获取`Blob`对象`responseType`：

```
var xhr = new XMLHttpRequest();
xhr.responseType = 'blob';
xhr.onload = function() {
    // xhr.response is a Blob
    var url = webkitURL.createObjectURL(xhr.response);
    console.log('URL: ', url);
};
xhr.open('GET', 'http://example.com/favicon.ico');
xhr.send(); 
```

### 从 Chrome 10 开始，您可以获得[`ArrayBuffer`](https://developer.mozilla.org/en/JavaScript_typed_arrays/ArrayBuffer)响应，并将其转换为 blob（[演示](http://jsfiddle.net/5SBnq/)）：

```
var xhr = new XMLHttpRequest();
xhr.responseType = 'arraybuffer';
xhr.onload = function() {
    // Create blob from arraybuffer
    var bb = new (window.BlobBuilder || window.WebKitBlobBuilder)();
    bb.append(xhr.response);
    var url = webkitURL.createObjectURL(bb.getBlob());
    console.log('URL: ', url);
};
xhr.open('GET', 'http://example.com/favicon.ico');
xhr.send(); 
```

（如果您想对 Firefox 使用相同的代码， 请使用`window.URL`和）。`MozBlobBuilder`

# java - 通过在每个新部分之前添加一个断行来修改生成的 java 代码

> ID：10412693
> 
> 赞同：-1
> 
> 时间：2012-05-02T11:20:34.053
> 
> 标签：java, eclipse, abstract-syntax-tree, line-breaks

如何自动在 java 源代码中的每个新部分之前添加换行符？我的 java 源代码是自动生成的，它由 5 个部分组成。我必须创建一个新的java类，这个类将使用生成的源来修改它，并有一个其他java源文件对用户完全抽象谢谢你的回答

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-02T11:45:23.987

格式化的东西（如空格）没有在典型的 AST 中编码，除非您可以更改代表 AST 的类，否则您将无法添加它。

您最简单的选择是修改用于将 AST 呈现为 Java 源代码的生成器代码（或模板）。让他们在每个“部分”添加额外的行。（这假设生成器/模板可以确定部分边界在 AST 级别的位置。）

# forms - 生成语义 HTML 表单

> ID：10412696
> 
> 赞同：0
> 
> 时间：2012-05-02T11:20:52.100
> 
> 标签：forms, zend-framework2

我想使用 zend 框架表单生成和验证技术，但我不希望生成的 html 脚本生成为 HTML Table script 。

我希望它生成为 div 而不是表，或者我想回显在我构建的 HTML 中生成的每个元素。我可以做这样的东西吗？？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-04T02:24:12.213

ZF 项目负责人 Matthew Weier O'Phinney 今天展示了[这个示例代码](http://git.mwop.net/?a=viewblob&p=PhlyContact&h=0472ddec711a623008fbd82b7877018111e4e13c&hb=16da5bc0f302d068b5c916d55bbe1c8e1b1674de&f=view/phly-contact/contact/index.phtml)，用于使用新的 Zend_Form 生成表单，计划在即将发布的 Zend Framework 2 beta 4 中发布。

似乎旧的基于装饰器的方法正在被一种更直接的方法所取代，可以在视图脚本中随意标记表单。

例如，如果您将表单实例传递给视图模型，则视图脚本可以执行以下操作：

```
<?php
$form = $this->form;
echo $this->form()->openTag($form);
?>
<div class="my_form">
    <div class="element">
        <div class="label"><?php echo $this->formLabel($form->get('from')); ?></div>
        <div class="input"><?php echo $this->formInput($form->get('from')); ?></div>
        <div class="error"><?php echo $this->formElementErrors($form->get('from')); ?></div>
    </div>
</div>
echo $this->form()->closeTag($form); 
```

# sorting - 在 3 个中检索 2 个最接近的数字

> ID：10412697
> 
> 赞同：0
> 
> 时间：2012-05-02T11:21:05.280
> 
> 标签：sorting, language-agnostic, numbers

我正在寻找一种算法来检索 3 个中最接近的两个。我没有任何变量可以接近，只有这三个。例如，如果我有 31、52 ​​和 84，我希望函数返回 31 和 52。

我尝试了一些数组排序的方法，但事实上这三个数字是变量（X、Y 和 Z）。当我对 [X, Y, Z] 数组进行排序时，我失去了 vars 的顺序。

我确信有一个非常简单的解决方案，我现在感觉很傻......这实际上是一个 MAXScript 项目，所以我想避免使用特定的语言功能，但任何类型的信息都会非常感激。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-02T11:24:33.817

呼叫三个数字 A、B 和 C。

计算三个变量：

```
AB = (A - B)^2
BC = (B - C)^2
CA = (C - A)^2 
```

然后比较 AB、BC 和 CA。如果AB最小，输出A和B。如果BC最小，输出B和C。如果CA最小，输出C和A。

如果你想让它更优雅一点，请创建一个由三个数字组成的结构，并创建三个这样的结构，如下所示：

```
S1 = (A-B)^2, A, B
S2 = (B-C)^2, B, C
S3 = (C-A)^2, C, A 
```

然后根据第一个数字对 S1,S2,S3 进行排序。对于首先排序的条目，输出其后两个数字。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-02T11:36:42.587

对于仅 3 个变量，您需要比较它们之间的距离并选择最接近的两个（请参阅大卫的回答）。对于`n`变量，您可以执行以下操作：

1.  对值进行排序 ( `O(n log n)`)
2.  遍历排序列表并找到相邻变量之间的最小差异 ( `O(n)`)
3.  结果是具有最小差异的变量对

# php - 地理编码器谷歌地图经度和纬度查找

> ID：10412699
> 
> 赞同：0
> 
> 时间：2012-05-02T11:21:07.700
> 
> 标签：php, mysql, jquery, geolocation

我有一个经度和纬度查找，可以很好地使用这样的 ajax 调用：

```
<script type="text/javascript" src="http://maps.google.com/maps/api/js?sensor=false"></script>
<script type="text/javascript">

var geocoder = new google.maps.Geocoder();
var address = "<?php echo addslashes($_POST['street'].' '.$_POST['house_number'].', '.$_POST['postal_code'].', '.$_POST['city'].', '.$_POST['country']); ?>";

geocoder.geocode( { 'address': address}, function(results, status) {

    if (status == google.maps.GeocoderStatus.OK) {

        var latitude = results[0].geometry.location.lat();
        var longitude = results[0].geometry.location.lng();
        var request_key = '<?php echo $ajax_request_key; ?>';
        var url = '<?php echo $settings['base_url'].'/site/templates/ajax/add_vacancy_latitude_and_longitude.php?vacancy_id='.$_POST['vacancy_id']; ?>';

        //add longitude and latitude to database
        $.post(url, { this_latitude:latitude, this_longitude:longitude, this_request_key:request_key }, function(data) {  });

    }

}); 
</script> 
```

但这仅适用于 ajax 调用。有没有办法我可以通过 http 请求来做到这一点，这样我就可以立即查询我的 mysql 数据库以查找附近的空缺，而无需进行第二次页面加载（例如，我有一个搜索表单，用户可以在其中输入他们的邮政编码，我想要立即提交将其邮政编码的经度和纬度与数据库进行比较。

我现在能想到的方法是阻止使用jquery提交并进行ajax调用，将搜索的经度和纬度存储到数据库中，然后提交表单并使用存储的经度和纬度查询数据库。不知何故，我认为必须有一种更有效的方法。

谢谢！斯科特

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-02T11:35:40.187

嗨，斯科特，有一种使用 curl 的有效方法。

您可以像这样直接进行http调用

[http://maps.google.com/maps/api/geocode/json?address=1600+Amphitheatre+Parkway,+Mountain+View,+CA&sensor=false](http://maps.google.com/maps/api/geocode/json?address=1600+Amphitheatre+Parkway,+Mountain+View,+CA&sensor=false)

您必须将 2 个参数传递给 url 1\. 地址 2\. 传感器

享受！

*   达塔

# php - MySQL数据库设计

> ID：10412702
> 
> 赞同：1
> 
> 时间：2012-04-30T17:55:58.957
> 
> 标签：php, mysql

我正在建立一个 MySQL 数据库，但我不确定构建它的最佳方法：

我正在建立一个系统（基于 PHP/MySQL），其中数百人将对数据库执行 SELECT/UPDATE/SET/DELETE 查询（可能同时执行大约 50 个）。我想如果它们都使用相同的数据库和表，将会有几千行。我可以将数据拆分到多个表中，但是我必须确保它们都是统一的，并且作为管理员，我将通过 cron 运行一些 SELECT DISTINCT 查询来更新管理界面。

解决这个问题的最佳方法是什么？我可以让每个人共享一个数据库吗？一张桌子？当有几千行时会不会有问题？我想随着时间的推移会有一个巨大的性能问题。

欢迎任何提示或建议！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-02T04:59:43.060

只要您的服务器足够强大，MySQL/php 就可以轻松处理这个问题。MySQL 喜欢 RAM，并且会尽可能多地使用 RAM（在您提供的限制范围内）。

如果您将有很多并发用户，那么我建议您考虑使用 innodb 表而不是 MyISAM（MySQL 版本 <5.5 中的默认值）。Innodb 在执行 INSERT/UPDATE/DELETE 等操作时会锁定单个行，而不是像 MyISAM 那样锁定整个表。

我们使用 php/MySQL，并且我们的网站上同时有 1000 多个用户（我们的主数据库服务器每秒执行大约 4k 次查询）。

# .net - wp7中无法访问wcf服务的服务参考？

> ID：10412705
> 
> 赞同：0
> 
> 时间：2012-05-02T11:21:14.567
> 
> 标签：.net, wcf, windows-phone-7

我正在开发 wp7 应用程序，我必须从网站获取 wcf 服务的服务参考。

但问题是，当我参考时，它会允许这样做，但客户端服务类不会显示在项目中，并且它也不允许创建服务合同的客户端对象。

以下是我的服务

```
public class Mobile : IViewUser, IViewCategory
{
    [OperationContract]
    public void DoWork()
    {
    }

    [OperationContract]
    public string Test(string data)
    {
        return data;
    }
} 
```

&这是我的 web.config 设置

```
<behavior name="Mobile.MobileBehavior">
      <serviceMetadata httpGetEnabled="true" />
      <serviceDebug includeExceptionDetailInFaults="false" />
    </behavior>
<service behaviorConfiguration="Mobile.MobileBehavior"       name="BusinessFinder.Web.Services.Mobile">
    <endpoint address="" behaviorConfiguration="webHttp" binding="webHttpBinding"
      contract="BusinessFinder.Web.Services.IMobile" />
    <endpoint address="mex" binding="mexHttpBinding" contract="IMetadataExchange" />      
</service> 
```

请任何人帮助我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-04-22T08:31:53.090

尝试这个...

右键单击服务参考。然后去配置服务参考。然后取消选中引用程序集中的重用类型复选框。更新

这解决了我的问题，希望它也能帮助其他人

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-02T20:22:35.370

添加服务参考时，单击左下角的高级选项卡。

检查始终生成消息合同，

并保存取​​消选择引用程序集中的重用类型。

这应该确保您在客户端获得 WCF 对象。

编辑：

再次查看您的服务，我认为有问题。

需要首先实施服务合同。这需要是一个类似的接口

```
[ServiceContract]
public interface IMyNewService
{
[OperationContract]
void DoWork()
} 
```

然后你需要实现一个使用该接口的类

```
public class MyNewService : IMyNewService 
```

# jquery - JQuery：替换可见字符

> ID：10412707
> 
> 赞同：-3
> 
> 时间：2012-05-02T11:21:19.560
> 
> 标签：jquery, html

我有一个很好用的字体，除了一个字符：`0`幸运的是，`O`它是一个完美的替代品，所以我决定编写一些 JQuery 来删除所有的零并用大写的 Os 替换它们：

```
$("body").html($("body").html().replace(/0/g,'O')); 
```

这很好用，直到我在页面上有一个带有零的链接，例如：

```
<a href="http://92.21.52.108:9000">Our server</a> 
```

这将更改为：

```
<a href="http://92.21.52.1O8:9OOO">Our server</a> 
```

我以为我会尝试`$("body").text`改用，但这完全行不通。

鉴于我需要保留字体，我该如何解决这个特殊问题？

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-02T11:29:47.093

使用 JQuery 来做到这一点是一个非常糟糕的主意。

更新字体以改进“0”，或使用不同的字体。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-02T11:33:12.980

这会起作用，但我不知道它的性能如何。

```
​$(function() {
    $('body *')
        .contents()
        .filter(function() {
             return( this.nodeType === 3 )
        })
        .each(function() {
             $(this).replaceWith($(this).text().replace(/0/g, 'O'))
        })

})​ 
```

[http://jsfiddle.net/nPfDC/](http://jsfiddle.net/nPfDC/)

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-05-02T11:51:56.260

Channelling Crockford, you can use a non-jquery walker much like this:

```
var walk_the_DOM = function walk(node, func) {
    func(node);
    node = node.firstChild;
    while (node) {
        walk(node, func);
        node = node.nextSibling;
    }
};

walk_the_DOM(document.body, function(node) {
    if(node.nodeType == 3 ) {
        node.data = node.data.replace(/0/g,'O')
    }
});​ 
```

Demo here: [http://jsfiddle.net/b7PtN/](http://jsfiddle.net/b7PtN/)

# android - 带有适配器android的列表视图

> ID：10412711
> 
> 赞同：0
> 
> 时间：2012-05-02T11:21:33.993
> 
> 标签：android, android-layout, android-intent, android-widget

我想使用适配器显示列表视图。我的问题是项目不是一个接一个地直接显示，而是每页一个（每两个项目之间有一个空格）。

这是代码

程序项适配器.java

```
 public class ProgrammeItemAdapter extends BaseAdapter {  

            List<Programme> progs;  
            LayoutInflater inflater;

            static class ProgrammeHolder {
            TextView heure_deb;   
            TextView heure_fin ;  
            TextView nom ;
            TextView genre ; 
            TextView duree ;

            }
        public ProgrammeItemAdapter(Context context,List<Programme> progs) {

            inflater = LayoutInflater.from(context);

            this.progs = progs;

            }

        public View getView(int position, View convertView, ViewGroup parent) {

            ProgrammeHolder holder=null;

            if(convertView == null) {

            holder = new ProgrammeHolder();

            convertView = inflater.inflate(R.layout.item_programme, null);

            holder.heure_deb = (TextView) convertView.findViewById(R.id.heure_debut);  
            holder.heure_fin = (TextView) convertView.findViewById(R.id.heure_fin);   
            holder.nom = (TextView) convertView.findViewById(R.id.nom_programme); 
            holder.genre = (TextView) convertView.findViewById(R.id.genre_programme); 
            holder.duree = (TextView) convertView.findViewById(R.id.duree_programme);

            convertView.setTag(holder);

            } else {

            holder = (ProgrammeHolder) convertView.getTag();

            }

            holder.heure_deb.setText(progs.get(position).getHeure_deb());

            holder.heure_fin.setText(progs.get(position).getHeure_fin());
            holder.nom.setText(progs.get(position).getNom());
            holder.genre.setText(progs.get(position).getGenre());
            holder.duree.setText(progs.get(position).getDuree());

            return convertView;

            }

        public int getCount() {
            // TODO Auto-generated method stub
            return progs.size();
        }

        public Object getItem(int position) {
            return progs.get(position);

        }

        public long getItemId(int position) {
            return position;
        }

  } 
```

程序活动.java

```
public class ProgrammeTvActivity extends Activity{
    private ListView listView;    
    private ProgrammeItemAdapter adapter;

    @Override      

    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.programme_list);

        listView = (ListView) findViewById(R.id.listview_programme);
        List<Programme> m_programmes= new ArrayList<Programme>(); 

        m_programmes=FillList();

        adapter = new ProgrammeItemAdapter(this, m_programmes); 
        adapter.notifyDataSetChanged(); 
        listView.setAdapter(adapter);

    }
private List<Programme>  FillList(){
        List<Programme> m_programmes= new ArrayList<Programme>(); 
        try{

          //  m_programmes.clear();
            Programme p1 = new Programme("10:00-","11:00","programme1","série","60 mn");
            Programme p2 = new Programme("11:05-","12:00","programme2","foot","55 mn");
            /*p1.setHeure_deb("10:00");
            p1.setHeure_fin("10:50");
            p1.setNom("ddd");
            p1.setGenre("serie");
            p1.setDuree("50mn");*/
            m_programmes.add(p1);        

            m_programmes.add(p2);
            return m_programmes;

          } catch (Exception e) { 
            Log.e("BACKGROUND_PROC", e.getMessage());
            return (m_programmes);
          }

      } 
```

item_programme.xml

```
 <?xml version="1.0" encoding="utf-8"?>

    <LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"

     android:id="@+id/Layout1"
     android:layout_width="fill_parent"
    android:layout_height="wrap_content"    
    android:orientation="horizontal"
    android:background="@drawable/fond_rouge">

  <TextView
                   android:id="@+id/heure_debut"
                   android:layout_width="wrap_content"
                   android:layout_height="wrap_content"
                   android:gravity="left"                    
                   android:layout_marginTop="10dip"
                   android:layout_marginLeft="10dip"
                   android:textSize="12sp" 
                   android:textStyle="bold" 
                   android:textColor="@android:color/white"   

                   />
    <TextView
                   android:id="@+id/heure_fin"
                   android:layout_width="wrap_content"
                   android:layout_height="wrap_content"
                   android:gravity="left"                    
                   android:layout_marginTop="10dip"
                   android:textSize="12sp" 
                   android:textStyle="bold" 
                   android:textColor="@android:color/white"   

                   />

    <LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@+id/Layout2"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:orientation="vertical" 
    android:layout_marginTop="0dip"
    android:layout_marginLeft="10dip"
    >  

        <TextView
                   android:id="@+id/nom_programme"
                   android:layout_width="wrap_content"
                   android:layout_height="wrap_content"
                   android:gravity="left"                    
                   android:layout_marginTop="10dip"
                   android:textSize="14sp" 
                   android:textStyle="bold" 
                   android:textColor="@android:color/white" 

                   />

    <LinearLayout
        xmlns:android="http://schemas.android.com/apk/res/android"
        android:id="@+id/Layout3"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:layout_marginLeft="0dip"
        android:layout_marginTop="0dip"
        android:orientation="horizontal" > 

        <TextView
                   android:id="@+id/genre_programme"
                   android:layout_width="wrap_content"
                   android:layout_height="wrap_content"                  
                   android:layout_marginLeft="0dp"
                   android:layout_marginTop="0dip"
                   android:textSize="12sp"                    
                   android:textColor="@android:color/white"  

                   />  

     <TextView
                   android:id="@+id/duree_programme"
                   android:layout_width="wrap_content"
                   android:layout_height="wrap_content"                  
                   android:layout_marginLeft="10dp"
                   android:layout_marginTop="0dip"
                   android:textSize="12sp"                    
                   android:textColor="@android:color/white"   

                   />   

         </LinearLayout>         

    </LinearLayout>

</LinearLayout> 
```

program_list.xml

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:background="@drawable/fond_rouge" 
 android:id="@+id/Layout1"
android:layout_height="fill_parent"
android:layout_width="fill_parent"
android:orientation="vertical">

<ListView
    android:id="@+id/listview_programme"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
  /> 
```

感谢帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-02T12:27:04.710

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="match_parent"
android:layout_height="match_parent"
android:orientation="vertical" >

   <TextView android:id="@+id/heure_debut"
               android:layout_width="wrap_content"
               android:layout_height="wrap_content"
               android:gravity="left"                    
               android:layout_marginTop="10dip"
               android:layout_marginLeft="10dip"
               android:textSize="12sp" 
               android:textStyle="bold" 
               android:text="heure_debut"
               android:textColor="@android:color/white"   
               />
    <TextView android:id="@+id/heure_fin"
               android:text="heure_fin"
               android:layout_width="wrap_content"
               android:layout_height="wrap_content"
               android:gravity="left"                    
               android:layout_marginLeft="10dip"
               android:textSize="12sp" 
               android:textStyle="bold" 
               android:textColor="@android:color/white"   

               />

    <TextView  android:id="@+id/nom_programme"
               android:layout_width="wrap_content"
               android:text="nom_programme"
               android:layout_height="wrap_content"
               android:gravity="left"                    
               android:layout_marginLeft="10dip"
               android:textSize="14sp" 
               android:textStyle="bold" 
               android:textColor="@android:color/white" 

               />

<LinearLayout android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:layout_marginLeft="10dip"
    android:orientation="horizontal" > 

    <TextView  android:id="@+id/genre_programme"
               android:text="genre_programme"
               android:layout_width="wrap_content"
               android:layout_height="wrap_content"                  
               android:layout_marginLeft="0dp"
               android:textSize="12sp"                    
               android:textColor="@android:color/white"  
               />  

    <TextView android:id="@+id/duree_programme"
            android:text="duree_programme"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"                  
            android:layout_marginLeft="10dp"
            android:textSize="12sp"                    
            android:textColor="@android:color/white"   
            />   

     </LinearLayout>         

 </LinearLayout> 
```

如果你想逐行列出项目然后尝试用上面的 xml 替换你的 item_programme.xml 并检查

# .net - 使用 LINQ 在 XML 中添加元素的更简单方法

> ID：10412712
> 
> 赞同：0
> 
> 时间：2012-05-02T11:21:34.767
> 
> 标签：.net, linq-to-xml

目前我正在使用带有 linq to xml 的 xpath 在 xml 文档中的特定元素之后添加元素。我担心的是如果这个层次结构太深，我必须总是提到完整的层次结构？我不能以某种方式直接给出元素的名称，然后我想添加我的新元素。

在这段代码中，我谈论的是这个层次结构：SESSIONANALYSER/AP/MODES/NI/STATEINFORMATION/INIT/INPUT[@VALUE='SLN7DEACTIVATION']/METHOD

```
String strFile = File.ReadAllText(Server.MapPath("~/SessionAnalyserAccessories.xml"));
            XDocument xdoc1 = XDocument.Parse(strFile);
            xdoc1.XPathSelectElement("SESSIONANALYSER/AP/MODES/NI/STATEINFORMATION/INIT/INPUT[@VALUE='SLN7DEACTIVATION']/METHOD").AddAfterSelf(new XElement("METHOD", "", new XAttribute("NAME", "CHECKSUBSCRIBERBALANCE1"), new XAttribute("PARAMETERS", "SLN7"), new XAttribute("POSSIBLEACTIONS1", "FALLOUTON_FAILUREREGION_SETPSOFAILED_FALSE1"), new XAttribute("MAINTAINSESSION", "NO"), new XAttribute("RESPONSE", "-4"), new XAttribute("NEXTLEVEL", ""))); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-02T11:42:32.187

使用 XPath，您可以使用`descendant::INPUT[@VALUE='SLN7DEACTIVATION']/METHOD`或`//INPUT[@VALUE='SLN7DEACTIVATION']/METHOD`查找任何级别的元素，因此如果您确定只有一个这样的元素，您可以通过这种方式缩短路径。但是，如果所有祖先都对识别元素很重要，则使用长路径。

在旁注中，而不是

```
String strFile = File.ReadAllText(Server.MapPath("~/SessionAnalyserAccessories.xml"));
XDocument xdoc1 = XDocument.Parse(strFile); 
```

简单地做

```
XDocument xdoc1 = XDocument.Load(Server.MapPath("~/SessionAnalyserAccessories.xml")); 
```

这允许 XML 解析器在文档的 XML 声明中找到正确的编码，并且应该通过不首先读取包含所有 XML 的冗长字符串来提高效率。

# javascript - 运行 ASP.NET 应用程序时的 typeof(Sys) === 'undefined' 错误

> ID：10412715
> 
> 赞同：0
> 
> 时间：2012-05-02T11:21:51.147
> 
> 标签：javascript, asp.net, .net, exception-handling, asp.net-ajax

我正在使用带有 ASP.NET 的 WebForms 开发一个 Web 应用程序。使用 ScriptManager，我正在加载自定义 javascript 脚本文件。

当我在浏览器中查看页面时，我没有得到预期的操作（显示计时器）并且页面上的“查看源代码”给了我以下错误消息：

```
//<![CDATA[
if (typeof(Sys) === 'undefined') throw new Error('ASP.NET Ajax client-side framework failed to load.');
//]]> 
```

在我尝试进行故障排除时，我在 ASP.NET 网站中使用了相同的 javascript 文件，它工作正常。它似乎只发生在 Web 应用程序中。我还在我的 javascript 文件中添加了一个警报，它在网站和 Web 应用程序上都可以正常工作。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-02T12:07:45.453

此错误有两个可能的原因。

首先是您没有包含 ScriptManager，但是因为正如您所说，您已经包含了它，第二个原因是您需要在调用“sys”之前移动 ScriptManager，以便可以通过抛出的其余脚本找到这个错误。

所以将 ScriptManager 上移，或将您的脚本移到 ScriptManager 下。

# sql - 是否可以改进此存储过程

> ID：10412718
> 
> 赞同：0
> 
> 时间：2012-05-02T11:22:01.103
> 
> 标签：sql, sql-server-2008, stored-procedures

我有一个存储过程，虽然工作正常，但使用了很多临时表，因此性能下降。是否可以改进/重写它（可能使用 CTE 或其他方式来提高性能）

```
CREATE PROCEDURE [dbo].[PORT_GetFutureOpportunities] 
    -- Add the parameters for the stored procedure here
    (
        @SiebelAccId VARCHAR(50),
        @FromDate DATETIME,
        @ToDate DATETIME,
        @FilterCriteria INT,
        @AutoRenewalChk INT
    )
AS
BEGIN 

        DECLARE @FDate DATETIME, @TDate DATETIME 
        SET @FDate = DATEADD(day, DATEDIFF(day, 0, @FromDate), 0)
        SET @TDate = DATEADD(day, DATEDIFF(day, 0, @ToDate), 0)

        SELECT  DISTINCT e.nai_grant_number
        INTO #temp
        FROM smbecommerce..SalesItem si 
        INNER JOIN smbecommerce..sales s ON s.sales_id = si.sales_id
        INNER JOIN siebelextract..entitlement e ON SUBSTRING(e.nai_grant_number, 1,  NULLIF(CHARINDEX('-', e.nai_grant_number) - 1, -1)) = CAST (s.sales_order_id AS VARCHAR)        
        WHERE  si.auto_renewal_flag = (CASE WHEN @AutoRenewalChk = 1 THEN 1 END )
        OR si.auto_renewal_flag <= ( CASE WHEN @AutoRenewalChk = 0 THEN 1 END)

            --Creating Main query
           SELECT 
           e.nai_agreement_account_name AS [CompanyName]
          ,c.first_name  + ' '  + c.last_name AS [ContactName]
          ,c.work_phone AS [ContactPhone]
          ,c.email_address AS [EmailAddress]
          ,e.entitlement_end_date AS [ExpirationDate]
          ,e.nai_grant_number AS [GrantNumber]
          ,e.nai_quantity AS [Quantity]
          ,e.product_name AS [SkuDescription]              
          ,(CASE WHEN LEN(e.nai_superceded_id) > 0 THEN 1 ELSE 0 END)  AS [IsRenewed]

          INTO #temp1                  
          FROM siebelextract..entitlement e     
          INNER JOIN siebelextract..account a ON a.row_id = e.nai_reseller_id           
          INNER JOIN SiebelExtract.[dbo].contact c WITH (NOLOCK) ON e.nai_primary_contact_id = c.row_id 
          WHERE a.parent_account_id = @SiebelAccId
          AND LEN(E.nai_reason_code) = 0
          AND EXISTS (SELECT 1 FROM smbecommerce..renewalskus rs WHERE RS.sku = E.product_name)
          AND e.entitlement_end_date 
          BETWEEN @FDate         
          AND @TDate   

          IF (@AutoRenewalChk = 0 OR @AutoRenewalChk = 1)
          BEGIN 
                  CREATE TABLE #temp2(
                                       CompanyName VARCHAR(200)
                                      ,ContactName VARCHAR(200)
                                      ,ContactPhone VARCHAR(200)
                                      ,EmailAddress VARCHAR(200)
                                      ,ExpirationDate DATETIME
                                      ,GrantNumber VARCHAR(200)
                                      ,Quantity INT
                                      ,SkuDescription VARCHAR(200)
                                      ,IsRenewed INT
                                     ) 
                 IF @AutoRenewalChk = 0
                 BEGIN  
                 INSERT INTO #temp2 select #temp1.* FROM #temp1       
                 END
                 IF @AutoRenewalChk = 1
                 BEGIN     
                 INSERT INTO #temp2 SELECT * FROM #temp1  WHERE #temp1.[GrantNumber] NOT IN(SELECT t1.nai_grant_number FROM #temp t1)     
                 END                       
                 END    

                IF @FilterCriteria = 0
                BEGIN 
                    SELECT te.[CompanyName],te.[ContactName],te.[EmailAddress],te.[ContactPhone],te.[SkuDescription],te.[Quantity],te.[GrantNumber],te.[ExpirationDate],te.[IsRenewed] FROM #temp2 te      
                END

                IF @FilterCriteria = 1
                BEGIN 
                    SELECT te.[CompanyName],te.[ContactName],te.[EmailAddress],te.[ContactPhone],te.[SkuDescription],te.[Quantity],te.[GrantNumber],te.[ExpirationDate],te.[IsRenewed]   FROM #temp2 te
                    WHERE te.[IsRenewed] > 0
                END         

                IF @FilterCriteria = 2
                BEGIN 
                  SELECT te.[CompanyName],te.[ContactName],te.[EmailAddress],te.[ContactPhone],te.[SkuDescription],te.[Quantity],te.[GrantNumber],te.[ExpirationDate],te.[IsRenewed] FROM #temp2 te
                  WHERE te.[IsRenewed] = 0
                END
                DROP TABLE #temp2
                DROP TABLE #temp1
                DROP TABLE #temp

END

GO 
```

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-02T12:51:40.930

*   首先识别代码。理解起来是一团糟。
*   临时表太多。加载 temp、加载 temp1、加载 temp2 时使用 temp1 的副本，而不是加载 temp2 时多行几行 temp1。您需要找到一种连接这些表的方法。
*   还有一个大bug。如果@AutoRenewalChk 为 2，则不会创建 temp 2，但将通过查询访问。那将失败。
*   最后，这可能不会提高性能，但会生成更简洁的代码，而不是为@FilterCriteria 的每种可能性提供一个 IF，而是运行查询并在 where 子句上添加一个 CASE

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-02T15:24:07.917

我已经压缩了你的存储过程。当然，我没有你的数据库，所以我的 SSMS 看起来像是血河之战，但根据你提供的代码，这应该可以工作。看看，请让我知道，无论哪种方式。

我会先粘贴代码，然后解释我做了什么。

```
CREATE PROCEDURE dbo.PORT_GetFutureOpportunities (
    @SiebelAccId VARCHAR(50),
    @FromDate DATETIME,
    @ToDate DATETIME,
    @FilterCriteria INT,
    @AutoRenewalChk INT
)
AS
BEGIN 
    DECLARE @FDate DATETIME, @TDate DATETIME 
    SET @FDate = CAST(@FromDate AS DATE)
    SET @TDate = CAST(@ToDate AS DATE)

    CREATE TABLE #temp(
        CompanyName VARCHAR(200),
        ContactName VARCHAR(200),
        ContactPhone VARCHAR(200),
        EmailAddress VARCHAR(200),
        ExpirationDate DATETIME,
        GrantNumber VARCHAR(200),
        Quantity INT,
        SkuDescription VARCHAR(200),
        IsRenewed INT
    ) 

    WITH cte AS (SELECT DISTINCT e.nai_grant_number    FROM smbecommerce..SalesItem si 
            INNER JOIN smbecommerce..sales s ON s.sales_id = si.sales_id
            INNER JOIN siebelextract..entitlement e ON SUBSTRING(e.nai_grant_number, 1,  NULLIF(CHARINDEX('-', e.nai_grant_number) - 1, -1)) = CAST (s.sales_order_id AS VARCHAR)        
        WHERE  si.auto_renewal_flag = (CASE WHEN @AutoRenewalChk = 1 THEN 1 END)
            OR si.auto_renewal_flag <= (CASE WHEN @AutoRenewalChk = 0 THEN 1 END)),
        rs AS (SELECT DISTINCT sku FROM smbecommerce..renewalskus)
    INSERT INTO #temp
    SELECT e.nai_agreement_account_name, c.first_name  + ' '  + c.last_name, c.work_phone, c.email_address, e.entitlement_end_date,
        e.nai_grant_number, e.nai_quantity, e.product_name, (CASE WHEN LEN(e.nai_superceded_id) > 0 THEN 1 ELSE 0 END)
    FROM siebelextract..entitlement e     
        INNER JOIN siebelextract..account a ON a.row_id = e.nai_reseller_id           
        INNER JOIN SiebelExtract.dbo.contact c WITH (NOLOCK) ON e.nai_primary_contact_id = c.row_id 
        INNER JOIN rs ON rs.sku = e.product_name
        LEFT JOIN cte ON e.nai_grant_number = cte.nai_grant_number
    WHERE a.parent_account_id = @SiebelAccId
    AND LEN(E.nai_reason_code) = 0
    AND e.entitlement_end_date BETWEEN @FDate AND @TDate   
    AND (@AutoRenewalChk = 0 OR cte.nai_grant_number IS NOT NULL)

    SELECT CompanyName, ContactName, EmailAddress, ContactPhone, SkuDescription, Quantity, GrantNumber, ExpirationDate, IsRenewed 
    FROM #temp
    WHERE (@FilterCriteria = 0)
    OR IsRenewed = (1 - (@FilterCriteria -1))

    DROP TABLE #temp
END 
```

1.  由于您使用的是 SQL2008，因此您可以使用 DATE 类型。转换为 DATE 使您的意图比 DATEADD(DATEDIFF)) 方法更清晰一些（我喜欢这种方法——一种节省时间的新颖方法）。
2.  将#Temp2 定义移至顶部并将其更改为#Temp。此过程不需要多个临时表。
3.  将原来的#Temp 更改为单列 CTE（命名为 cte）。还有一个子选择会降低你的性能，从你的 sku 表中，所以它也被移动到一个名为 rs 的 cte 中。
4.  将 SELECT INTO #temp1 更改为插入 #Temp。rs 公用表表达式的内部联接以与以前相同的方式过滤结果，但这会快得多。
5.  整个`IF (@AutoRenewalChk = 0 OR @AutoRenewalChk = 1)`块已被查询中的两行替换：与 cte 的左连接，以及插入语句的最后一行。
6.  @FilterCriteria 检查已被压缩并包含在最终的 select 语句中。根据您的代码，如果 @FilterCriteria 为 0，则返回所有行。否则，返回 IsRenewed = 1 和 @FilterCriteria = 1 或 IsRenewed = 0 和 @FilterCriteria = 2 的行。

事实上，由于我们在这里所做的只是将数据插入表中然后选择它，因此我们可以将其进一步压缩为单个 select 语句：

```
CREATE PROCEDURE dbo.PORT_GetFutureOpportunities (
    @SiebelAccId VARCHAR(50),
    @FromDate DATETIME,
    @ToDate DATETIME,
    @FilterCriteria INT,
    @AutoRenewalChk INT
)
AS
BEGIN 
    DECLARE @FDate DATETIME, @TDate DATETIME 
    SET @FDate = CAST(@FromDate AS DATE)
    SET @TDate = CAST(@ToDate AS DATE)

    WITH cte AS (SELECT DISTINCT e.nai_grant_number    FROM smbecommerce..SalesItem si 
            INNER JOIN smbecommerce..sales s ON s.sales_id = si.sales_id
            INNER JOIN siebelextract..entitlement e ON SUBSTRING(e.nai_grant_number, 1,  NULLIF(CHARINDEX('-', e.nai_grant_number) - 1, -1)) = CAST (s.sales_order_id AS VARCHAR)        
        WHERE  si.auto_renewal_flag = (CASE WHEN @AutoRenewalChk = 1 THEN 1 END)
            OR si.auto_renewal_flag <= (CASE WHEN @AutoRenewalChk = 0 THEN 1 END)),
        rs AS (SELECT DISTINCT sku FROM smbecommerce..renewalskus)
    SELECT e.nai_agreement_account_name AS [CompanyName], c.first_name  + ' '  + c.last_name AS [ContactName],
        c.work_phone AS [ContactPhone], c.email_address AS [EmailAddress], e.entitlement_end_date AS [ExpirationDate],
        e.nai_grant_number AS [GrantNumber], e.nai_quantity AS [Quantity], e.product_name AS [SkuDescription],
        (CASE WHEN LEN(e.nai_superceded_id) > 0 THEN 1 ELSE 0 END)  AS [IsRenewed]
    FROM siebelextract..entitlement e     
        INNER JOIN siebelextract..account a ON a.row_id = e.nai_reseller_id           
        INNER JOIN SiebelExtract.dbo.contact c WITH (NOLOCK) ON e.nai_primary_contact_id = c.row_id 
        INNER JOIN rs ON rs.sku = e.product_name
        LEFT JOIN cte ON e.nai_grant_number = cte.nai_grant_number
    WHERE a.parent_account_id = @SiebelAccId
    AND LEN(E.nai_reason_code) = 0
    AND e.entitlement_end_date BETWEEN @FDate AND @TDate   
    AND (@AutoRenewalChk = 0 OR cte.nai_grant_number IS NOT NULL)
    AND ((@FilterCriteria = 0) OR CASE WHEN LEN(e.nai_superceded_id) > 0 THEN 1 ELSE 0 END = (1 - (@FilterCriteria -1)))
END 
```

# r - 在多个语句的情况下保留返回类型

> ID：10412720
> 
> 赞同：1
> 
> 时间：2012-05-02T11:22:12.250
> 
> 标签：r, rserve

嗨，我不太了解 Rserve 在多个命令的情况下的返回类型。例如。

```
a<-rnorm(10);a[4];rnorm(3) 
```

似乎 Rserve 只返回最后一个评估的语句，即 rnorm(3)。是否可以使用 Rserve 获得所有三个输出值？

我也很想知道在 R 中我们如何获得最后一个评估表达式的返回值？R 中是否有一个特殊字符可以像 perl 中那样获得？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-02T11:42:10.320

这是正常的 R 行为，与您在函数中获得的行为相当。例如：

```
spam = function(x, y) {
  z = x + y
} 
```

这里 R 返回`z`，因为这是最后一次执行的操作。要获取所有对象，您可以使用列表：

```
spam = function(x, y) {
  z = x + y
  list(x,y,z)
} 
```

这应该适用于您的情况：

```
a<-rnorm(10);list(a,a[4],rnorm(3)) 
```

另外，我不知道提取最后执行的表达式的方法，**但无论如何我都不建议使用它**。这种语法只会使程序的流程更难阅读，并不会为您节省任何时间。

# xml - 带有 XML Schema 的复选框类型的字段

> ID：10412724
> 
> 赞同：1
> 
> 时间：2012-05-02T11:22:26.883
> 
> 标签：xml, xsd

我有以下 XSD：

```
<xsd:complexContent>
    <xsd:extension base="mes:Request">
         <xsd:sequence>
           <xsd:element name="empId" type="xsd:string"/>
           <xsd:element name="empTaskId" type="xsd:int"/>
           <xsd:element name="empStateName" type="xsd:string"/>
           <xsd:element name="empTypeName" type="xsd:string"/>
           <xsd:element name="empActionName" type="xsd:string"/>
           <xsd:element name="empTransactionId" type="xsd:int"/>                               
        </xsd:sequence>
    </xsd:extension>
</xsd:complexContent> 
```

我想要的是只允许从列出的任何字段中选择一个字段作为必填字段`<sequence>`。我尝试使用`<choice>`，但它的行为类似于单选按钮；我想要复选框的功能（1 个或多个字段 - 多项选择）。

任何人都可以帮助我实现这一目标吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-06T09:21:45.093

当您开始进入“验证逻辑”时，您会遇到 XML Schema 的限制。XML Schema 无法做到这一点，因此您要么需要在应用程序的较低层中使用 XML Schema 执行基本验证，要么在较高层中加强 XML Schema 无法处理的逻辑，或者[使用更具表现力的验证规则移动到某些东西](http://en.wikipedia.org/wiki/Schematron).

除此之外，我能想到的最好的使用 XML 模式强制执行您的要求是这样的：

```
<?xml version="1.0" encoding="utf-8" ?>
<xsd:schema targetNamespace="http://tempuri"
            elementFormDefault="qualified"
            xmlns:t="http://tempuri"
            xmlns:xsd="http://www.w3.org/2001/XMLSchema">
  <xsd:element name="Demo">
    <xsd:complexType>
      <xsd:choice minOccurs="1" maxOccurs="6">
        <xsd:element name="empId" type="xsd:string"/>
        <xsd:element name="empTaskId" type="xsd:int"/>
        <xsd:element name="empStateName" type="xsd:string"/>
        <xsd:element name="empTypeName" type="xsd:string"/>
        <xsd:element name="empActionName" type="xsd:string"/>
        <xsd:element name="empTransactionId" type="xsd:int"/>
      </xsd:choice>
    </xsd:complexType>
    <xsd:unique name="unique1">
      <xsd:selector xpath="."/>
      <xsd:field xpath="t:empId"/>
    </xsd:unique>
    <xsd:unique name="unique2">
      <xsd:selector xpath="."/>
      <xsd:field xpath="t:empTaskId"/>
    </xsd:unique>
    <xsd:unique name="unique3">
      <xsd:selector xpath="."/>
      <xsd:field xpath="t:empStateName"/>
    </xsd:unique>
    <xsd:unique name="unique4">
      <xsd:selector xpath="."/>
      <xsd:field xpath="t:empTypeName"/>
    </xsd:unique>
    <xsd:unique name="unique5">
      <xsd:selector xpath="."/>
      <xsd:field xpath="t:empActionName"/>
    </xsd:unique>
    <xsd:unique name="unique6">
      <xsd:selector xpath="."/>
      <xsd:field xpath="t:empTransactionId"/>
    </xsd:unique>
  </xsd:element>
</xsd:schema> 
```

您使用该`<choice>`元素仅选择一种类型的元素，`minOccurs="1"`因此您可以拥有至少一种元素并`maxOccurs="6"`拥有它们。但是现在你可以多次选择相同的元素，所以你必须限制它，这就是`<unique>`发挥作用的地方。

但请注意，此示例并非没有限制，因为您不能限制元素的顺序（即加强`<sequence>`限制）。

# iphone - SSH 可以在远程网络上使用吗？

> ID：10412725
> 
> 赞同：-2
> 
> 时间：2012-05-02T11:22:29.697
> 
> 标签：iphone, ssh

我正在尝试查看是否可以使用 3G 网络通过 SSH 连接到我的 iPhone。因此，鉴于我的 IP，我试图通过 SSH 联系，使用定义的端口（不再是 22，我更改了它）。

在我的私人 wifi 网络上一切正常。
由于某种原因，它不在3G上...

有任何想法吗 ？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-02T11:37:47.447

您使用的 IP 不太可能仅指向您的 iPhone。看到这样的移动服务器提供商必须如何为大量支持互联网的电话分配 IP 地址，我怀疑他们使用[网络地址转换 (NAT)](http://en.wikipedia.org/wiki/Network_address_translation)或类似技术能够将一个 IP 地址分配给多个设备。鉴于 NAT 使用不同的端口来区分不同的设备，ssh 不是一个选项。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-02T11:29:16.443

您的移动服务提供商可能会阻止访问。不要忘记您也无法控制手机连接的路由器。在家里，您将打开端口并将该端口上的流量从路由器转发到您的计算机。在移动网络上，即使端口是开放的，它也不知道向谁发送流量。

# java - 将 Geopoint 转换为 Location 时出现空指针异常

> ID：10412726
> 
> 赞同：2
> 
> 时间：2012-05-02T11:22:38.663
> 
> 标签：java, android, location

我遇到了一些 Android 代码的问题。在寻找将[GeoPoint](https://developers.google.com/maps/documentation/android/reference/com/google/android/maps/GeoPoint)转换为[Location](http://developer.android.com/reference/android/location/Location.html)的方法后，我发现[这个](https://stackoverflow.com/questions/3472603/convert-geopoint-to-location)问题似乎给了我答案，但是当我使用这些信息时，我的程序因空指针异常而失败。

我的代码：

```
 lat = 52.3725979;
    longt = 4.8998594;
    final GeoPoint geo_1 = new GeoPoint((int) (lat * 1E6),(int) (longt * 1E6));

    double latitude = geo_1.getLatitudeE6() / 1E6;
    double longitude = geo_1.getLongitudeE6() / 1E6;

    endLoc.setLatitude(latitude);
    endLoc.setLongitude(longitude); 
```

第 171 行：

```
 endLoc.setLatitude(latitude); 
```

endLoc 变量的初始化：

```
 public class VibroNavActivity extends Activity implements SensorListener{

final static String TAG = "VibroNavActivity";

//location variables
GeoPoint startGeo;
GeoPoint endGeo;
Location loc = null;
Location startLoc;
Location endLoc;
float totalDistance;//the distance between the startpoint end the endpoint 
```

日志：

```
 05-02 12:40:56.789: W/dalvikvm(27983): threadid=1: thread exiting with uncaught exception (group=0x40a4b1f8)
    05-02 12:40:56.800: E/AndroidRuntime(27983): FATAL EXCEPTION: main
    05-02 12:40:56.800: E/AndroidRuntime(27983): java.lang.RuntimeException: Unable to start activity ComponentInfo{hcm.haska/hcm.haska.VibroNavActivity}:  java.lang.NullPointerException
    05-02 12:40:56.800: E/AndroidRuntime(27983):    at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1956)
    05-02 12:40:56.800: E/AndroidRuntime(27983):    at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1981)
    05-02 12:40:56.800: E/AndroidRuntime(27983):    at android.app.ActivityThread.access$600(ActivityThread.java:123)
    05-02 12:40:56.800: E/AndroidRuntime(27983):    at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1147)
    05-02 12:40:56.800: E/AndroidRuntime(27983):    at android.os.Handler.dispatchMessage(Handler.java:99)
    05-02 12:40:56.800: E/AndroidRuntime(27983):    at android.os.Looper.loop(Looper.java:137)
    05-02 12:40:56.800: E/AndroidRuntime(27983):    at android.app.ActivityThread.main(ActivityThread.java:4424)
    05-02 12:40:56.800: E/AndroidRuntime(27983):    at java.lang.reflect.Method.invokeNative(Native Method)
    05-02 12:40:56.800: E/AndroidRuntime(27983):    at java.lang.reflect.Method.invoke(Method.java:511)
    05-02 12:40:56.800: E/AndroidRuntime(27983):    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:787)
    05-02 12:40:56.800: E/AndroidRuntime(27983):    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:554)
    05-02 12:40:56.800: E/AndroidRuntime(27983):    at dalvik.system.NativeStart.main(Native Method)
    05-02 12:40:56.800: E/AndroidRuntime(27983): Caused by: java.lang.NullPointerException
    05-02 12:40:56.800: E/AndroidRuntime(27983):    at hcm.haska.VibroNavActivity.onCreate(VibroNavActivity.java:171)
    05-02 12:40:56.800: E/AndroidRuntime(27983):    at android.app.Activity.performCreate(Activity.java:4465)
    05-02 12:40:56.800: E/AndroidRuntime(27983):    at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1049)
    05-02 12:40:56.800: E/AndroidRuntime(27983):    at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1920)
    05-02 12:40:56.800: E/AndroidRuntime(27983):    ... 11 more 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-02T11:59:56.383

你没有初始化`endLoc`你只是将它声明为一个变量。

在您的构造函数中，或者在调用第 171 行之前的某个方法中的某个地方，您需要`endLoc = new Location();`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-26T14:31:26.293

位置构造函数需要提供者字符串，但我在某处看到它可以是空字符串

```
loc = new Location(""); 
```

一会儿测试一下；

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-02T12:04:53.093

您只声明`endLoc`了 ，但此时不会分配内存。您需要通过调用来初始化内存：

```
endLoc = new Location(....) 
```

# asp.net-mvc-3 - 在 HttpPost 中使用模型数据和 FormCollection

> ID：10412727
> 
> 赞同：2
> 
> 时间：2012-05-02T11:22:45.127
> 
> 标签：asp.net-mvc-3

我在 VIEW 中有模型数据，还有“其他”数据，它们不是模型的一部分。

当用户从 VIEW 中单击提交时，我希望模型数据也能通过吗？

我在控制器中的 HttpPost 如下所示：

```
 [HttpPost] 
    public ActionResult RegisterSP(RegisterModel model, FormCollection collection) 
    { 
        System.Text.ASCIIEncoding encoding = new System.Text.ASCIIEncoding(); 

        // Create Bytes using userName and Email to calculate CRC32 
        String s_user_id = SessionBag.Current.UserName + SessionBag.Current.Email; 
        Byte[] bytes_user_id = encoding.GetBytes(s_user_id); 
        UInt32 user_Id = Crc32.Compute(bytes_user_id); 
```

但是，我在 VIEW 中也有其他数据，我也想将其发布到控制器，因此我添加了 FormCollection。

在调试时，我看到 RegisterModel 为空，但 FormCollection 包含所有数据，包括模型和“其他”数据。我可以只使用 FormCollection，但是我需要获取大量“其他”数据，并循环（使用 for 语句）formCollection，并获取特定类型字段的记录数。基本上，我有复选框，我需要循环遍历它们，它们都被称为，code1，code2，code3 ... code24 ...我需要获取所有带有“code*”的复选框并将它们插入数据库。如果我只有带有复选框的 FormCollection，我会很好，但我不能。有没有办法让我获得 FormCollection["code*"] 例如，所以使用通配符来获得我需要的所有（复选框）？还是我做错了这一切

这是我的视图（），

```
@model mvc1.Models.RegisterModel

@{
    ViewBag.Title = "RegisterSP";
}

<script src="@Url.Content("~/Scripts/jquery.validate.min.js")" type="text/javascript"></script>
<script src="@Url.Content("~/Scripts/jquery.validate.unobtrusive.min.js")" type="text/javascript"></script>

@section LoginSignupLink {
    @Html.Partial("_LogOnPartial")
    @Html.Partial("_SignUpPartial")
}

@{
    Layout = "~/Views/Shared/_InitLayout.cshtml";
}

@using (Html.BeginForm())
{
<h2>Create a New Account (Page 2)</h2>
<p>
    Use the form below to continue creating a new account. 
</p>

    <div>
    <fieldset style = "width: 840px; margin:  0px auto;">
    <legend>Account Information</legend>
        <br />
        <b><font color="#000000" size="4">Address Details</font></b>
        <br />
        <br />
        <table class="tablelogon">
          <tr>
          <th class="thlogon">Company</th>
          <td class="tdlogon">@Html.TextBoxFor(m => m.userNameCompany, new { style = "font-family:Verdana;font-size:13px;color:#000000" })
                              @Html.ValidationMessageFor(m => m.userNameCompany)
          </td>
          <th class="thlogon">Address-Building Name</th>
          <td class="tdlogon">@Html.TextBoxFor(m => m.buildingName, new { style = "font-family:Verdana;font-size:13px;color:#000000" })
                              @Html.ValidationMessageFor(m => m.buildingName)
          </td>
          </tr>

          <tr>
          <th class="thlogon">Address-Building Number</th>
          <td class="tdlogon">@Html.TextBoxFor(m => m.buildingNumber, new { style = "font-family:Verdana;font-size:13px;color:#000000" })
                              @Html.ValidationMessageFor(m => m.buildingNumber)
          </td>
          <th class="thlogon">Address-Street Number</th>
          <td class="tdlogon">@Html.TextBoxFor(m => m.streetNumber, new { style = "font-family:Verdana;font-size:13px;color:#000000" })
                              @Html.ValidationMessageFor(m => m.streetNumber)
          </td>
          </tr>

          <tr>
          <th class="thlogon">Address-Street Name</th>
          <td class="tdlogon">@Html.TextBoxFor(m => m.streetName, new { style = "font-family:Verdana;font-size:13px;color:#000000" })
                              @Html.ValidationMessageFor(m => m.streetName)
          </td>
          <th class="thlogon">Address-Area</th>
          <td class="tdlogon"> @Html.TextBoxFor(m => m.area, new { style = "font-family:Verdana;font-size:13px;color:#000000" })
                               @Html.ValidationMessageFor(m => m.area)
          </td>
          </tr>

          <tr>
          <th class="thlogon">Address-City</th>
          <td class="tdlogon">@Html.TextBoxFor(m => m.city, new { style = "font-family:Verdana;font-size:13px;color:#000000" })
                              @Html.ValidationMessageFor(m => m.city)
          </td>
          <th class="thlogon">Address-Country</th>
          <td class="tdlogon">@Html.TextBoxFor(m => m.country, new { style = "font-family:Verdana;font-size:13px;color:#000000" })
                              @Html.ValidationMessageFor(m => m.country)
          </td>
          </tr>

          <tr>
          <th class="thlogon">Postal Code</th>
          <td class="tdlogon">@Html.TextBoxFor(m => m.postalCode, new { style = "font-family:Verdana;font-size:13px;color:#000000" })
                              @Html.ValidationMessageFor(m => m.postalCode)
          </td>
          </tr>
        </table>

        @{ int l_count = 0;
           int l_code = 0;
           string l_otherExpertise; 
         }

        <br />
        <hr />
        <b><font color="#000000" size="4">Expertise</font></b>
        <br />
        <br />
        <table class="tablecheckbox">
        @foreach (var item in ViewBag.Expertise)
        {               
               l_count = l_count + 1;            
               l_code = l_code + 1; 

               if (l_count == 1)
               {                                                          
                    <td class="tdcheckbox">
                        <input type="checkbox" name="code@(l_code)" value="@item.expertiseDesc" />
                        <b>@item.expertiseDesc</b>
                    </td> 
               }
               else if (l_count < 3)
               {    
                    <td class="tdcheckbox">
                        <input type="checkbox" name="code@(l_code)" value="@item.expertiseDesc" />
                        <b>@item.expertiseDesc</b>
                    </td>
               }
               else if (l_count == 3)
               {           
                    <td class="tdcheckbox">
                        <input type="checkbox" name="code@(l_code)" value="@item.expertiseDesc" />
                        <b>@item.expertiseDesc</b>
                    </td>                                                            
               }
               else if (l_count % 2 == 0 && l_count == 4)
               {         
                    <td class="tdcheckbox">
                        <input type="checkbox" name="code@(l_code)" value="@item.expertiseDesc" />
                        <b>@item.expertiseDesc</b>

                    @if (@item.expertiseDesc == "Other")
                    {
                        @Html.TextBox("l_otherExpertise","")
                        <br /><font color="red">Comma separate specific expertise</font>
                    }
                    </td>   

                    @:<tr></tr>
                    l_count = 0;
               }
        }
        </table>        

        <br />
        <hr />
        <b><font color="#000000" size="4">Skills</font></b>
        <br />
        <br />
        @Html.TextAreaFor(m => m.skills, new { style = "font-family:Verdana;font-size:13px; height: 50px; width:680px; overflow: scroll" })

        <br />
        <br />
        <hr />
        <b><font color="#000000" size="4">About</font></b>
        <br />
        <br />
        @Html.TextAreaFor(m => m.about, new { style = "font-family:Verdana;font-size:13px; height: 50px; width:680px; overflow: scroll" })
      <p>
         <input type="submit" value="SignUp"/>
      </p>
    </fieldset>
    </div>
} 
```

这是我的控制器，HTTPPOST 部分，我需要在其中访问用户单击的 CheckBox 值

```
 public ActionResult RegisterSP(RegisterModel model, FormCollection collection)
    {
        System.Text.ASCIIEncoding encoding = new System.Text.ASCIIEncoding();

        // Create Bytes using userName and Email to calculate CRC32
        String s_user_id = SessionBag.Current.UserName + SessionBag.Current.Email;
        Byte[] bytes_user_id = encoding.GetBytes(s_user_id);
        UInt32 user_Id = Crc32.Compute(bytes_user_id);

        DBController dbcontroller = new DBController(); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-05-09T17:36:49.850

您可以通过以下方式访问您的 FormCollection

```
[HttpPost] 
public ActionResult RegisterSP(RegisterModel model) 
{ 
  var myForm = Request.Form;
  ....
} 
```

不同的类但相同的基类`NameValueCollection`

# bash - 循环重命名文件

> ID：10412732
> 
> 赞同：0
> 
> 时间：2012-05-02T11:22:57.840
> 
> 标签：bash, unix

我有一个文件列表：`File_2011_1.txt`, `File_2011_2.txt`, `File_2011_3.txt`... `File_2011_100.txt`; 我想将所有文件名中的 2011 更新为 2012。

以下不起作用：

```
for FILES in `ls`; do NEWNAME=`echo ${FILES} | sed -e 's/*2011*/*2012*/'`; echo ${FILES} ${NEWNAME}; done; 
```

但这确实：

```
for FILES in `ls`; do NEWNAME=`echo ${FILES} | sed -e 's/File_2011*/File_2012*/'`; echo ${FILES} ${NEWNAME}; done; 
```

那么，为什么在我要更改的文件名部分之前的通配符不起作用？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-02T11:25:07.470

因为 sed 不使用[File willcard](http://en.wikipedia.org/wiki/Wildcard_character)（就像在 bash 或 DOS 中一样），而是使用正则表达式（[正则表达式](http://en.wikipedia.org/wiki/Regular_expression)）。

您可以这样做`sed -e 's/2011/2012/'`（默认情况下，sed 的“s”命令匹配字符串的一部分）。通配符`*`将以`.*`正则表达式语言编写。

sed 正则表达式的基本规则：

*   插入符号 ( `^`) 与行首匹配。
*   美元符号 ( `$`) 匹配行尾。
*   星号 ( `*`) 匹配零次或多次出现的前一个字符。
*   点 ( `.`) 匹配任何字符。
*   `[`and`]`用于匹配字符集，例如与`[a-c01]`单个字符匹配：`a`、`b`、`c`、`0`或`1`。

# api - 对“附近”场地的请求不断失败

> ID：10412737
> 
> 赞同：1
> 
> 时间：2012-05-02T11:23:17.747
> 
> 标签：api, foursquare

请求示例：

[https://api.foursquare.com/v2/venues/search?near=Chicago,%20IL&oauth_token=](https://api.foursquare.com/v2/venues/search?near=Chicago,%20IL&oauth_token=) ..

[https://api.foursquare.com/v2/venues/search?near=Chicago&oauth_token=](https://api.foursquare.com/v2/venues/search?near=Chicago&oauth_token=) ...

这是一个正确的 Foursquare 请求（使用默认令牌），昨天有效，但今天仍然失败。有任何帮助、报告和相关信息吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-02T21:10:16.767

[这里是 4sq 地理编码器的开发者] -- 今天的地理编码器似乎很慢，我现在正在调查原因。此外，这应该返回一个 500 来表明我们做错了什么。我将同时致力于地理编码器的性能/稳定性和更好的错误。

# scheme - 方案 - 检测 aux 关键字

> ID：10412738
> 
> 赞同：2
> 
> 时间：2012-05-02T11:23:20.493
> 
> 标签：scheme, keyword, syntactic-sugar

我刚刚完成了 IU 的编译器课程，并试图在我的小“计划”中添加更多形式。我们通过语法糖在我们的语言中添加了几种形式，其中完整的方案通常使用宏扩展（并且和或是主要的）。我遇到的问题是取消 cond 声明。

备注：我在工作时会在 Chez 和 Petite Chez 之间来回走动。

我正在尝试处理所有 cond 子句形式。在处理 (test => expr) 表单时，我似乎遇到了使用 => 的问题。如果没有出现错误放置的 aux 关键字错误或让子句落入匹配语句中的下一行，我似乎无能为力。

关于如何检测此关键字的任何想法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-02T14:17:09.363

前段时间我写了自己的 Scheme 元循环解释器，支持特殊形式的`=>`语法。`cond`本质上，这就是我必须做的：

```
(define (expand-actions clause)
  (let ((exp (sequence->exp (cond-actions clause))))
    (if (cond-has-then? clause)
        (make-application exp
                          (if (cond-else-clause? clause)
                              #t
                              (list (cond-predicate clause))))
        exp))) 
```

当遍历`cond`表达式的所有子句（谓词和动作对）时，我展开每个动作并询问`=>`子句中是否存在令牌（使用`cond-has-then?`）。如果`=>`找到，我将子句的动作部分应用于谓词。

这是我的解释器中负责评估表达式的完整代码`cond`，主要过程（称为 from `eval`）是`cond->if`，它将`cond`表达式转换为一系列嵌套`if`表达式，并处理`=>`语法；我希望这对你有帮助：

```
(define (cond->if exp)
  (expand-clauses (cond-clauses exp)))

(define cond-clauses cdr)

(define (cond-has-then? clause)
  (eq? (cadr clause) '=>))

(define cond-predicate car)

(define (cond-actions clause)
  (if (cond-has-then? clause)
      (cddr clause)
      (cdr clause)))

(define (cond-else-clause? clause)
  (eq? (cond-predicate clause) 'else))

(define (expand-clauses clauses)
  (if (null? clauses)
      (void)
      (let ((first (car clauses))
            (rest  (cdr clauses)))
        (if (cond-else-clause? first)
            (if (null? rest)
                (expand-actions first)
                (error "ELSE clause isn't last -- COND->IF" clauses))
            (make-if (cond-predicate first)
                     (expand-actions first)
                     (expand-clauses rest))))))

(define (expand-actions clause)
  (let ((exp (sequence->exp (cond-actions clause))))
    (if (cond-has-then? clause)
        (make-application exp
                          (if (cond-else-clause? clause)
                              #t
                              (list (cond-predicate clause))))
        exp)))

(define (make-if predicate consequent alternative)
  (list 'if predicate consequent alternative))

(define (sequence->exp seq)
  (cond ((null? seq) '())
        ((last-exp? seq) (first-exp seq))
        (else (make-begin seq))))

(define (last-exp? seq)
  (null? (cdr seq)))

(define first-exp car)

(define (make-application proc . args)
  (cond ((null? args) (list proc))
        ((list? (car args)) (cons proc (car args)))
    (else (cons proc args))))

(define (make-begin seq)
  (cons 'begin seq)) 
```

# android - android eclipse中的adb错误

> ID：10412739
> 
> 赞同：1
> 
> 时间：2012-05-02T11:23:20.663
> 
> 标签：android, eclipse, adb

当我运行我的 android 项目时，控制台向我显示：

```
[2012-05-02 16:45:02 - AndroidFrontend] Connection with adb was interrupted.  
[2012-05-02 16:45:02 - AndroidFrontend] 0 attempts have been made to reconnect.  
[2012-05-02 16:45:02 - AndroidFrontend] You may want to manually restart adb from the Devices view. 
```

我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-02T11:35:10.903

尝试在 DDMS 透视图中重新启动 adb。打开 DDMS 透视图。在设备选项卡中有一行图标。图标右侧有一个向下箭头。单击向下箭头，然后单击“重置 adb”。

如果这不起作用，请尝试重新启动 Eclipse。如果您有两个打开的 Eclipse 实例，那将是一个非常接近的问题。如果您打开了一些模拟器，有时也会导致问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-02T11:38:04.753

在 Windows 上，您可以通过 taskmanager 杀死进程 adb.exe，然后重新启动 eclipse。这将自动重新启动 adb。重新启动 eclipse 可能只会导致 adb 仍在后台运行。

# android - Android 和 iPhone 录音

> ID：10412744
> 
> 赞同：0
> 
> 时间：2012-05-02T11:23:47.040
> 
> 标签：android, iphone, audio, audio-recording

我将通过 Android 和 iPhone 录制声音。我知道 iPhone 支持 aif 和 caf 格式录制声音，而 Android 支持 3GP 和 amr 格式录制声音。

现在，我想知道哪种格式最适合在两种环境中录制声音？我打算将该声音格式存储到服务器，然后再使用它。现在两种声音都必须具有相同的格式，这就是为什么我想要有关两种环境中支持的格式的信息来录制和播放声音。

是否可以在两种环境中录制和播放声音？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-02T11:59:52.750

我建议**MP3**。我们可以在 Android 和 iPhone 上播放。我们这样做是为了播放音频文件。录制音频文件的另一个建议，总是使用**Media Recorder**来捕获音频，因为它占用的空间更小。

但是使用 Media Recorder，您只能设置以下格式：

1.  **MPEG_4**
2.  **RAW_AMR**
3.  **三_GPP**

*所以做一些东西把它转换成**MP3***

# sql - SQL 服务器速度变慢，可能是什么原因/改进方法？

> ID：10412747
> 
> 赞同：0
> 
> 时间：2012-05-02T11:23:55.060
> 
> 标签：sql, sql-server, sql-server-2008

我有一组 30 个文件。我遍历这些文件，并为每个文件插入 1529 行，大约 30 列，219487 行，大约 6 列。

我在 C# 中执行此操作，并通过数据表插入（见底部）。对于 1529 行（30 列），我将插入分组为每批 1,300 行，对于 219,487 行（6 列），每批插入 50000 行。

插入每个批次时，没有多线程 - 一切都是顺序的（至少在我的代码中）。在我的代码行完成插入前一个文件之前，我不会从下一个文件开始。

考虑到这一点，我希望 SQL 服务器在恒定时间内完成每个文件（文件非常相似，总是插入 1529 和 219487）。

但是，每个文件的每个 SQL 插入所花费的时间线性增加 - 从第一个文件的 9 秒到第 30 个文件的 50 秒。我已将 CPU 时间与所用的 SQL 时间分开，一开始插入 6 列行之一需要 0.000033 秒。接近尾声，对于后面的文件，对于 6 列数据，所用时间为 0.000228。也就是说，插入219487行（6列）数据的时间增加了约7倍？

我将批量大小减少到 20000 并且没有任何区别。在过去，我相信我将其减少到 5000 和 10000，但仍然没有任何区别。我对底层 SQL 架构了解不多，所以我有点迷茫。

我觉得我正在超载 SQL 服务器。但是，是否给人的印象是这是按顺序完成的，而不是给 SQL 服务器分配作业？SQL 请求可能是通过线程产生的，但是我将批处理大小减少到 100（请参见下文），但这仍然没有帮助。完成的总时间更长，但每个文件仍然线性增加。

我已将批处理大小减少到 100（只是为了确保服务器不会超载）并且我仍然看到线性增加的时间？

在整个过程中，我一直指的是 SQL 插入所花费的时间，而不是每个文件的 SQL + CPU 时间的总和。

可能不可能确切地告知正在发生的事情，但我可以有一些提示和事情绝对避免以最好地解决这个问题吗？

我的 SQL 插入代码（每批插入调用）是：

```
private static void WriteResultsToDatabase(string tableName, DataTable tableToWrite)
        {

            using (SqlConnection connection =
                    new SqlConnection(connectionString))
            {
                SqlBulkCopy bulkCopy =
                    new SqlBulkCopy
                    (
                    connection,
                    SqlBulkCopyOptions.TableLock |
                    SqlBulkCopyOptions.FireTriggers |
                    SqlBulkCopyOptions.UseInternalTransaction,
                    null
                    );

                bulkCopy.DestinationTableName = tableName;
                for (int i = 0; i < tableToWrite.Columns.Count; i++)
                    bulkCopy.ColumnMappings.Add(tableToWrite.Columns[i].ColumnName, tableToWrite.Columns[i].ColumnName);
                try
                {
                    connection.Open();

                    bulkCopy.WriteToServer(tableToWrite);

                }
                finally
                {
                    connection.Close();
                }
            }
        } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-02T11:33:14.933

> 我觉得我正在超载 SQL 服务器

是的，这是一个很好的理由——尤其是并且仅当您的 sql 服务器在手机上运行或具有可悲的最终用户光盘时。否则 - 不。

> 我对底层 SQL 架构了解不多，所以我有点迷茫。

查出。获取查询计划。需要表 + 索引。独特的约束？是否存在没有索引的唯一约束？这会一直强制进行表扫描。

还值得：插入到您从原始表（微不足道）创建的临时表中，然后在一个语句中复制数据。

> 从第一个文件的 9 秒开始

对于 220.000 行，这已经足够了。我建议检查服务器在您的 poerations 期间有多忙以及表上的所有约束以匹配索引。和触发器；）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-02T11:34:46.693

这可能是任何数量的事情，但对我来说显而易见的事情如下：

1.  您在表上有一个聚集键，并且您没有按该键的顺序插入记录。对于每个插入操作，它都需要在完成任务之前对记录进行物理重新排序。
2.  您有多个索引/外键对表进行检查，因此每次迭代您都会添加越来越多的信息以进行检查。
3.  您的触发器没有被有效地使用，或者没有被有效地构造，以至于它需要针对整个表而不是最近插入的数据工作。
4.  您已经设置了一个批量事务，但有些东西阻止了数据库服务器将其视为一个事务。确保活动监视器将此视为批量操作。
5.  您正在按百分比而不是按固定数量自动增长数据库；对于每次增长，分配更多空间需要更长的时间。

这些都是我以前遇到过的问题；其中任何一种或任何组合都可能产生您所描述的症状。

# sql - 动态透视表数据而不使用列不一致的聚合函数？

> ID：10412749
> 
> 赞同：0
> 
> 时间：2012-05-02T11:23:56.697
> 
> 标签：sql, sql-server, tsql, pivot-without-aggregate

我已经阅读了很多文章，但仍然无法获得所需的结果。

我想显示重量、pulsOx、bp 和调查的所有数据，包括基于用户在前端选择的日期 FromeDate 和 ToDate 的冗余行。因此，对于 FromDate 和 ToDates 之间的不同日期，列将每次都不一致。

我应该做出哪些改变？请尽快帮忙。提前致谢。

这是我的 SQL 存储过程：

```
declare @Id int
declare @FromDatesp datetime
declare @ToDatesp datetime
declare @ProtocolGroupId int

set @Id=2
set @FromDatesp='2011/11/07'
set @ToDatesp='2012/2/29'
set @ProtocolGroupId=0

Declare @FromDate datetime
Declare @ToDate datetime

set @FromDate= convert(datetime,@FromDatesp,121)
set @ToDate=convert(datetime,@ToDatesp,121)

DECLARE @TableOfDates TABLE(DateValue DATETIME)

DECLARE @CurrentDate DATETIME

SET @CurrentDate = @FromDate

WHILE @CurrentDate <= @ToDate
BEGIN
    INSERT INTO @TableOfDates(DateValue) VALUES (@CurrentDate)

    SET @CurrentDate = DATEADD(DAY, 1, @CurrentDate)
END

--SELECT convert(varchar(10),DateValue,111) FROM @TableOfDates

DECLARE @belowcols NVARCHAR(2000)
SELECT  @belowcols= STUFF(( SELECT DISTINCT
                                '],[' + convert(varchar(10), DateValue,111)
                        FROM    @TableOfDates AS t2  
                        FOR XML PATH('')
                      ), 1, 2, '') + ']'

                      print @belowcols

--DECLARE @abovecols NVARCHAR(2000)
--select @abovecols= replace ( @belowcols,'[','ISNULL([')
--select @abovecols = REPLACE(@abovecols,']','],0)')

Declare @Weightval varchar(MAX)
Declare @Pulseval varchar(MAX)
Declare @Oxval varchar(MAX)
Declare @BPSysval varchar(MAX)
Declare @BPDiasval varchar(MAX)
Declare @Alertval varchar(MAX)
Declare @Final varchar(MAX)
Declare @Question varchar(MAX)
Declare @Survey varchar(Max)

set @Weightval =''
set @BPSysval=''
set @BPDiasval=''
set @Pulseval =''
set @Oxval =''
set @Survey=''
declare @x int
DECLARE @PId varchar(500)
DECLARE @Config_XML varchar(1000)
DECLARE cur_Level CURSOR FOR 
select Id as PId,convert(varchar(1000),Config_XML)  from TblPatientCareplan where patientId=@Id and ProtocolGroupId=@ProtocolGroupId and Type='Reminder' and Parent_Id=(
select Id from TblPatientCareplan where patientId=@Id and ProtocolGroupId=@ProtocolGroupId and Type='Group' and IsDeleted=0) and IsDeleted=0
OPEN cur_Level
    FETCH NEXT FROM cur_Level INTO @PId, @Config_XML
    WHILE @@FETCH_STATUS = 0
    BEGIN
        print @PId 
        print @Config_XML 

            select @x=SUBSTRING(@Config_XML,15,2)
            print @x
            if(@x='18')
            begin 
            --set @Weightval ='SELECT ''weight;''+ convert(varchar(100),t1.Weight)  +'';''+convert(varchar(100),t1.Id) +'';''+ ISNULL((select top(1) ISNULL((convert(varchar(100),Alert_Type)),0) from TblAlertMessage where Record_Id=t1.Id and DeviceTypeId=1 order by alert_type asc),'''') as ''Value'',''1'' as ''DisplayOrder'', convert(varchar(10),t1.CreatedDt,111) as ''CreatedDt'',''Weight'' as ''ItemType'',PatientId FROM TblWeightScaleData t1 JOIN (SELECT MAX(CreatedDt) Max_EnteredOn_By_Day FROM TblWeightScaleData where PatientId='''+convert(varchar(1000),@Id)+''' GROUP BY convert(varchar, CreatedDt, 112)) t2 ON t1.CreatedDt = t2.Max_EnteredOn_By_Day where PatientId='''+convert(varchar(1000),@Id)+''' and CreatedDt  between '''+ CONVERT(varchar(1000), @FromDate)+''' and '''+CONVERT(varchar(1000),@ToDate)+''' and IsDeleted=0  '
            set @Weightval ='SELECT ''weight;''+ convert(varchar(100),t1.Weight)  +'';''+convert(varchar(100),t1.Id) +'';''+ ISNULL((select top(1) ISNULL((convert(varchar(100),Alert_Type)),0) from TblAlertMessage where Record_Id=t1.Id and DeviceTypeId=1 order by alert_type asc),'''') as ''Value'',''1'' as ''DisplayOrder'', convert(varchar(10),t1.CreatedDt,111) as ''CreatedDt'',''Weight'' as ''ItemType'',PatientId FROM TblWeightScaleData t1 where PatientId='''+convert(varchar(1000),@Id)+''' and CreatedDt  between '''+ CONVERT(varchar(1000), @FromDate)+''' and '''+CONVERT(varchar(1000),@ToDate)+''' and IsDeleted=0  '          
            end
            if(@x='19')
            begin 
            --set @BPSysval='SELECT ''sys;''+ convert(varchar(100),t1.Systolic)  +'';''+convert(varchar(100),t1.Id) +'';''+ ISNULL((select top(1) ISNULL((convert(varchar(100),Alert_Type)),0) from TblAlertMessage where Record_Id=t1.Id and DeviceTypeId=2 order by alert_type asc),'''') as ''Value'',''4'' as ''DisplayOrder'', convert(varchar(10),t1.CreatedDt,111) as ''CreatedDt'',''Systolic'' as ''ItemType'',PatientId FROM TblBloodPressureData t1 JOIN (SELECT MAX(CreatedDt) Max_EnteredOn_By_Day FROM TblBloodPressureData where PatientId='''+convert(varchar(1000),@Id)+''' GROUP BY convert(varchar, CreatedDt, 112)) t2 ON t1.CreatedDt = t2.Max_EnteredOn_By_Day where PatientId='''+convert(varchar(1000),@Id)+''' and CreatedDt  between '''+ CONVERT(varchar(1000), @FromDate)+''' and '''+CONVERT(varchar(1000),@ToDate)+''' and IsDeleted=0  '
            --set @BPDiasval='SELECT ''dias;''+ convert(varchar(100),t1.Diastolic)  +'';''+convert(varchar(100),t1.Id) +'';''+ ISNULL((select top(1) ISNULL((convert(varchar(100),Alert_Type)),0) from TblAlertMessage where Record_Id=t1.Id and DeviceTypeId=2 order by alert_type asc),'''') as ''Value'',''5'' as ''DisplayOrder'', convert(varchar(10),t1.CreatedDt,111) as ''CreatedDt'',''Diastolic'' as ''ItemType'',PatientId FROM TblBloodPressureData t1 JOIN (SELECT MAX(CreatedDt) Max_EnteredOn_By_Day FROM TblBloodPressureData where PatientId='''+convert(varchar(1000),@Id)+''' GROUP BY convert(varchar, CreatedDt, 112)) t2 ON t1.CreatedDt = t2.Max_EnteredOn_By_Day where PatientId='''+convert(varchar(1000),@Id)+''' and CreatedDt  between '''+ CONVERT(varchar(1000), @FromDate)+''' and '''+CONVERT(varchar(1000),@ToDate)+''' and IsDeleted=0  '
            set @BPSysval='SELECT ''sys;''+ convert(varchar(100),t1.Systolic)  +'';''+convert(varchar(100),t1.Id) +'';''+ ISNULL((select top(1) ISNULL((convert(varchar(100),Alert_Type)),0) from TblAlertMessage where Record_Id=t1.Id and DeviceTypeId=2 order by alert_type asc),'''') as ''Value'',''4'' as ''DisplayOrder'', convert(varchar(10),t1.CreatedDt,111) as ''CreatedDt'',''Systolic'' as ''ItemType'',PatientId FROM TblBloodPressureData t1  where PatientId='''+convert(varchar(1000),@Id)+''' and CreatedDt  between '''+ CONVERT(varchar(1000), @FromDate)+''' and '''+CONVERT(varchar(1000),@ToDate)+''' and IsDeleted=0  '
            set @BPDiasval='SELECT ''dias;''+ convert(varchar(100),t1.Diastolic)  +'';''+convert(varchar(100),t1.Id) +'';''+ ISNULL((select top(1) ISNULL((convert(varchar(100),Alert_Type)),0) from TblAlertMessage where Record_Id=t1.Id and DeviceTypeId=2 order by alert_type asc),'''') as ''Value'',''5'' as ''DisplayOrder'', convert(varchar(10),t1.CreatedDt,111) as ''CreatedDt'',''Diastolic'' as ''ItemType'',PatientId FROM TblBloodPressureData t1 where PatientId='''+convert(varchar(1000),@Id)+''' and CreatedDt  between '''+ CONVERT(varchar(1000), @FromDate)+''' and '''+CONVERT(varchar(1000),@ToDate)+''' and IsDeleted=0  '
            end
            if(@x='20')
            begin 
            --set @Pulseval ='SELECT ''pulse;''+ convert(varchar(100),t1.Pulse) +'';''+convert(varchar(100),t1.Id) +'';''+ ISNULL((select top(1) ISNULL((convert(varchar(100),Alert_Type)),0) from TblAlertMessage where Record_Id=t1.Id and DeviceTypeId=3 order by alert_type asc),'''') as ''Value'',''2'' as ''DisplayOrder'', convert(varchar(10),t1.CreatedDt,111) as ''CreatedDt'',''Pulse'' as ''ItemType'',PatientId FROM TblPulseOxData t1 JOIN (SELECT MAX(CreatedDt) Max_EnteredOn_By_Day FROM TblPulseOxData where PatientId='''+convert(varchar(1000),@Id)+''' GROUP BY convert(varchar, CreatedDt, 112)) t2 ON t1.CreatedDt = t2.Max_EnteredOn_By_Day where PatientId='''+convert(varchar(1000),@Id)+''' and CreatedDt  between '''+ CONVERT(varchar(1000), @FromDate)+''' and '''+CONVERT(varchar(1000),@ToDate)+''' and IsDeleted=0  '
            --set @Oxval ='SELECT ''oxygen;''+ convert(varchar(100),t1.SpO2)  +'';''+convert(varchar(100),t1.Id) +'';''+ ISNULL((select top(1) ISNULL((convert(varchar(100),Alert_Type)),0) from TblAlertMessage where Record_Id=t1.Id and DeviceTypeId=3 order by alert_type asc),'''') as ''Value'',''3'' as ''DisplayOrder'', convert(varchar(10),t1.CreatedDt,111) as ''CreatedDt'',''Oxygen'' as ''ItemType'',PatientId FROM TblPulseOxData t1 JOIN (SELECT MAX(CreatedDt) Max_EnteredOn_By_Day FROM TblPulseOxData where PatientId='''+convert(varchar(1000),@Id)+''' GROUP BY convert(varchar, CreatedDt, 112)) t2 ON t1.CreatedDt = t2.Max_EnteredOn_By_Day where PatientId='''+convert(varchar(1000),@Id)+''' and CreatedDt  between '''+ CONVERT(varchar(1000), @FromDate)+''' and '''+CONVERT(varchar(1000),@ToDate)+''' and IsDeleted=0  '
            set @Pulseval ='SELECT ''pulse;''+ convert(varchar(100),t1.Pulse) +'';''+convert(varchar(100),t1.Id) +'';''+ ISNULL((select top(1) ISNULL((convert(varchar(100),Alert_Type)),0) from TblAlertMessage where Record_Id=t1.Id and DeviceTypeId=3 order by alert_type asc),'''') as ''Value'',''2'' as ''DisplayOrder'', convert(varchar(10),t1.CreatedDt,111) as ''CreatedDt'',''Pulse'' as ''ItemType'',PatientId FROM TblPulseOxData t1 where PatientId='''+convert(varchar(1000),@Id)+''' and CreatedDt  between '''+ CONVERT(varchar(1000), @FromDate)+''' and '''+CONVERT(varchar(1000),@ToDate)+''' and IsDeleted=0  '
            set @Oxval ='SELECT ''oxygen;''+ convert(varchar(100),t1.SpO2)  +'';''+convert(varchar(100),t1.Id) +'';''+ ISNULL((select top(1) ISNULL((convert(varchar(100),Alert_Type)),0) from TblAlertMessage where Record_Id=t1.Id and DeviceTypeId=3 order by alert_type asc),'''') as ''Value'',''3'' as ''DisplayOrder'', convert(varchar(10),t1.CreatedDt,111) as ''CreatedDt'',''Oxygen'' as ''ItemType'',PatientId FROM TblPulseOxData t1 where PatientId='''+convert(varchar(1000),@Id)+''' and CreatedDt  between '''+ CONVERT(varchar(1000), @FromDate)+''' and '''+CONVERT(varchar(1000),@ToDate)+''' and IsDeleted=0  '
            end         

        FETCH NEXT FROM cur_Level INTO @PId, @Config_XML
    END
CLOSE cur_Level
DEALLOCATE cur_Level

set @Survey='select ''-'' as ''Value'', ''5'' as ''DisplayOrder'' , CONVERT(varchar(10), getdate(), 111) AS ''CreatedDt'',''Survey'' AS ''ItemType'','''+convert(varchar(1000),@Id)+''' as ''PatientId''  from TblAlertMessage'

set @Question ='SELECT ''survey;''+ CONVERT(varchar(100), t1.Answer) + '';'' + CONVERT(varchar(100), t1.Id) +'';''+ ISNULL((select top(1) ISNULL((convert(varchar(100),Alert_Type)),0) from TblAlertMessage where Record_Id=t1.Id and DeviceTypeId=4 order by alert_type asc),'''') as ''Value'', ''6'' AS ''DisplayOrder'', CONVERT(varchar(10), t1.CreatedDate, 111) AS ''CreatedDt'',t1.Question AS ''ItemType'', t1.PatientId FROM dbo.TblProtocolGroupData AS t1 INNER JOIN (SELECT MAX(CreatedDate) AS Max_EnteredOn_By_Day FROM dbo.TblProtocolGroupData WHERE (PatientId='''+convert(varchar(1000),@Id)+''') AND (ProtocolGroupId = '''+convert(varchar(1000),@ProtocolGroupId)+''') GROUP BY Question, CONVERT(varchar, CreatedDate, 112)) AS t2 ON t1.CreatedDate = t2.Max_EnteredOn_By_Day WHERE PatientId='''+convert(varchar(1000),@Id)+''' AND (ProtocolGroupId = '''+convert(varchar(1000),@ProtocolGroupId)+''') and CreatedDate  between '''+ CONVERT(varchar(1000), @FromDate)+''' and '''+CONVERT(varchar(1000),@ToDate)+''' and IsDeleted=0  '

if(DATALENGTH(@Weightval)>3)
set @Weightval= ' union ' +@Weightval

if(DATALENGTH(@BPSysval)>3)
begin
set @BPSysval= ' union ' +@BPSysval
set @BPDiasval= ' union ' +@BPDiasval
end
if(DATALENGTH(@Pulseval)>3)
begin
set @Pulseval= ' union ' +@Pulseval
set @Oxval= ' union ' +@Oxval
end

print(@Weightval)
print(@BPSysval)
print(@BPDiasval)
print(@Pulseval)
print(@Oxval)

Set @Final=@Survey + ' union ' + @Question + @Weightval + @BPDiasval + @BPSysval + @Pulseval + @Oxval

DECLARE @query NVARCHAR(max)
SET @query = 'SELECT  ItemType, '+@belowcols +'

FROM    ( 

'+@Final+'

        )p PIVOT ( Max(Value)
                    FOR [CreatedDt] 
                      IN ('+
@belowcols +')
                  ) AS pvt order by DisplayOrder ;'

                  print(@query)

                  exec(@query) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-23T07:51:17.023

只需编写几条 SQL 语句，我们`IF`就可以在运行时确定使用哪一条。

```
Create Proc DoReport(@rptType int)
As
Begin

    if @rptType = 1 -- Group by col1
    Begin
        -- Sql for group by col1 here.

    end else if @rpttype = 2 -- group by col2
    begin
        -- Sql for group by col2 here.

    end

End 
```

# c# - 通过串行连接从智能卡读卡器接收数据（C#）

> ID：10412751
> 
> 赞同：0
> 
> 时间：2012-05-02T11:24:01.633
> 
> 标签：c#, serial-port, smartcard

我必须设计一个软件来与智能卡读卡器通信..

作为第一步，我想从读卡器接收数据并将它们显示在一个文本框中，当它发生变化时我可以立即看到它（以确保已发送数据）..

读卡器发送的数据（我以前用 PLC 编程）是一个 256 字节的数组

我确实执行了相同的方法，但我的richtextbox 中没有显示任何内容。

我想让你看看我的代码并告诉我出了什么问题：

```
using System;
using System.Collections.Generic;
using System.ComponentModel;
using System.Data;
using System.Drawing;
using System.Linq;
using System.Text;
using System.Windows.Forms;
using System.IO.Ports;
using System.IO;

namespace mycard
{
    public partial class Form1 : Form
    {
        byte[] memo = new byte[256];
        byte[] buffer = new byte[255];

        private SerialPort serialPort = new SerialPort();

        public Form1()
        {
            InitializeComponent();
        }

        private void Form1_Load(object sender, EventArgs e)
        {
            serialPort.DataReceived += 
                new SerialDataReceivedEventHandler(serialPort_DataReceived);
        }

        //open port
        private void button1_Click(object sender, EventArgs e)
        {
            if (s1.IsOpen)
            {
                s1.Close();
            }
            s1.Open();
        }

        //Eject order which is working fine
        private void button1_Click_1(object sender, EventArgs e)
        {
            byte[] data= new byte[4];

            memo[0]=0x60;
            memo[1]=0x00;
            memo[2]=0x02;
            memo[3]=0x43;
            memo[4]=0x31; //32
            memo[5]=0x10; //13

            s1.Write(memo,0,6);
        }

        //close port
        private void button2_Click(object sender, EventArgs e)
        {
            s1.Close();
        }

        private void button3_Click(object sender, EventArgs e)
        {
            txtDataReceived.Text = "\r\n";
        }

        public delegate void myDelegate();
        public void updateTextBox()
        {

            byte[] buffer = new byte[255];

            serialPort.Read(buffer, 0, 4);
            txtDataReceived.Text = (buffer[0].ToString() + Environment.NewLine 
                + buffer[1].ToString() + Environment.NewLine 
                + buffer[2].ToString() + Environment.NewLine 
                + buffer[3].ToString() + Environment.NewLine);

            // i have tried the following code as well but i got nothing as well
            // txtDataReceived.AppendText(serialPort.ReadExisting());
            // txtDataReceived.ScrollToCaret();

        }
    }
} 
```

我希望在创建的 Richtextbox 中得到以下输出，如下所示.. 整个消息出现在哪里，并且缓冲区数组的每个字节的 xxx 值根据智能卡读卡器的状态（或者换句话说根据什么卡读者发送）...

例如（我在上面的代码中一直在尝试做的事情）.. 当有连接并且卡插入读卡器时，缓冲区 [0]、[1]、[2] 和 [3] 值应该立即从 0 变为 48,48,48,48（由读卡器发送）.. 等等..

```
buffer:
[0]=xxx
[1]=xxx
[2]=xxx
[3]=xxx
[4]=xxx
[5]=xxx
[6]=xxx
...
...
...
[255]=xxx 
```

相反，盒子是空的......

希望我的概率。很清楚..我真的很想在这里找到解决方案..这对我来说是一件非常重要的事情..我花了很多时间尝试但没有成功

* * *

智能卡读卡器类型：KDM9650

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-02T11:29:59.693

您需要实际读取`serialPort_DataReceived`. 你在这里什么都没做。另外：有一个`button1_Click`事件和一个`button1_Click_1`事件。哪个是被调用的`button1`？如果第一个没有被调用，则串行端口根本没有打开。

另外请注意：该`DataReceived`事件在其自己的线程中调用，因此在更新 UI 之前，您需要使用`this.Invoke`(WinForms) 或`this.Dispatcher.Invoke`(WPF) 更改为 UI 线程。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-02T11:39:01.510

我在这里看到两个问题：

1.  您没有从端口读取数据..

2.  我认为您会遇到委托更新表单的问题，因为它将从另一个线程调用。

为了让您继续前进，您可以添加一个计时器，并在计时器滴答事件中读取数据（如果端口有任何数据）：

```
 private void timer1_Tick(object sender, EventArgs e)
    {
        if (s1.BytesToRead > 0)
        {
            //write text to text box

            //e.g. maybe as a start try
            txtDataReceived.Text += s1.ReadExisting();
        }
    } 
```

另一个关于从另一个线程更新表单的问题：

[如何从 C# 中的另一个线程更新 GUI？](https://stackoverflow.com/questions/661561/how-to-update-gui-from-another-thread-in-c)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-02T11:28:25.827

**更新**

手动运行`updateTextBox()`（将其添加到 ButtonClick EventHandler）

```
public void updateTextBox()
    {
        byte[] buffer = new byte[255];

        serialPort.Read(buffer, 0, 4); 
        var i = 0; //Press F9 here, it will put a breakpoint here
    } 
```

然后运行您的应用程序，并在断点处停止后检查缓冲区是否为空？

**Update2** 好的，试试这段代码，然后阅读我的评论。

```
using System;
using System.Collections.Generic;
using System.ComponentModel;
using System.Data;
using System.Drawing;
using System.Linq;
using System.Text;
using System.Windows.Forms;
using System.IO.Ports;
using System.IO;

namespace mycard
{
    public partial class Form1 : Form
    {
        byte[] memo = new byte[256];
        byte[] buffer = new byte[255];

        //private SerialPort serialPort = new SerialPort();
        //We don't need this object. We never configure it, it's not the 
        //same object which you use to write 'eject bytes'!
        public Form1()
        {
            InitializeComponent();
        }

        private void Form1_Load(object sender, EventArgs e)
        {
           //subscribe on data received event here. IMPORTANT: we 'listen' s1 object here!
            s1.DataReceived += 
                new SerialDataReceivedEventHandler(serialPort_DataReceived);
        }

        //open port
        private void button1_Click(object sender, EventArgs e)
        {
            if (s1.IsOpen)
            {
                s1.Close();
            }
            s1.Open();
        }

        //Eject order which is working fine
        private void button1_Click_1(object sender, EventArgs e)
        {
            byte[] data= new byte[4];

            memo[0]=0x60;
            memo[1]=0x00;
            memo[2]=0x02;
            memo[3]=0x43;
            memo[4]=0x31; //32
            memo[5]=0x10; //13

            s1.Write(memo,0,6);
        }

        //close port
        private void button2_Click(object sender, EventArgs e)
        {
            s1.Close();
        }

        private void button3_Click(object sender, EventArgs e)
        {
            txtDataReceived.Text = "\r\n";
        }

        public void updateTextBox()
        {
            byte[] buffer = new byte[255];

            //we must read from s1, not from serealPort!!!
            s1.Read(buffer, 0, 4);
            txtDataReceived.Text = (buffer[0].ToString() + Environment.NewLine 
                + buffer[1].ToString() + Environment.NewLine 
                + buffer[2].ToString() + Environment.NewLine 
                + buffer[3].ToString() + Environment.NewLine);
        }

        //data received, let's read it!
        private void serialPort_DataReceived(object sender, System.IO.Ports.SerialDataReceivedEventArgs e)
        {
          updateTextBox(); 
        }
    }
} 
```

**你的问题** 你有一个`SerialPort`类的实例。实例名称是`s1`。您已经对其进行了配置，但您尝试从新`serialPort`对象中读取数据。显然那里没有数据。

[串行端口详细信息](http://msdn.microsoft.com/en-us/library/system.io.ports.serialport.aspx)

# javascript - 如何从 ASP.NET 中的 Facebook 登录中检索访问令牌？

> ID：10412764
> 
> 赞同：0
> 
> 时间：2012-05-02T11:24:49.963
> 
> 标签：javascript, asp.net, server-side, facebook-login

我遵循了这个关于如何使用 Facebook 登录的[优秀指南。](http://www.aspdotnet-suresh.com/2012/04/aspnet-integrate-facebook-login.html)我对其进行了一些修改以检索

> response.authResponse.accessToken

所以，在这之后：

```
// listen for and handle auth.statusChange events
FB.Event.subscribe('auth.statusChange', function(response) {
if (response.authResponse) { 
```

我添加了这一行：

```
var accessToken = response.authResponse.accessToken; 
```

现在，我找不到将这个 javascript accessToken 变量传递给我的服务器端 C# 代码的方法。

我想要的是在 Page_Load() 事件中，它检查是否存在 accessToken。如果是，它不会显示“使用 Facebook 登录”div，因此我可以继续使用服务器端代码中的访问令牌。

如果用户当前未登录，我希望他使用 Facebook 登录，然后让我的页面服务器端代码接收访问令牌。

有人知道该怎么做吗？

感谢您的帮助，我正在为此失去理智。

PS。一旦用户登录，我不想将用户重定向到另一个页面。我只想让他所在的页面知道他已登录并从这里开始使用服务器端代码。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-03T09:03:22.983

在我看来，实现 Facebook 登录的最佳方法是在服务器端执行所有功能。使用诸如 Hammock 之类的 REST 库，您可以实现这一点。

这是一篇关于如何实现的非常有用的文章：[http ://www2.suddenelfilio.net/2010/09/08/connect-to-facebook-using-asp-net-facebook-graph-api-hammock/](http://www2.suddenelfilio.net/2010/09/08/connect-to-facebook-using-asp-net-facebook-graph-api-hammock/)

除了该链接之外，这里还有一些代码可以为您指明正确的方向：

## 登录页面

使用以下单击事件将 ASP.NET 按钮添加到此登录页面：

```
protected void FacebookLogin_Click(object sender, EventArgs e)
{
        string fbOuthUrl = "https://graph.facebook.com/oauth/authorize?client_id=<client-id>&redirect_uri=<callback-page-url>&scope=email,publish_actions";

        Response.Redirect(fbOuthUrl);        
} 
```

## 回调页面

正如您在按钮单击事件中看到的那样，`redirect_uri`将指向我们的回调页面。此回调页面将执行所有功能以获取访问令牌和您需要执行的任何其他登录作业：

```
public partial class FBLoginCallback : System.Web.UI.Page
{
    private string AccessToken;

protected void Page_Load(object sender, EventArgs e)
{
    if (!String.IsNullOrEmpty(Request["code"]) && !Page.IsPostBack)
    {
        FacebookCallback();
    }
}

private void FacebookCallback()
{
    var client = new RestClient { Authority = "https://graph.facebook.com/oauth/" };
    var request = new RestRequest { Path = "access_token" };

    request.AddParameter("client_id", ConfigurationManager.AppSettings["facebook.appid"]);
    request.AddParameter("redirect_uri", ConfigurationManager.AppSettings["facebook.login.callbackurl"]);
    request.AddParameter("client_secret", ConfigurationManager.AppSettings["facebook.appsecret"]);
    request.AddParameter("code", Request["code"]);

    RestResponse response = client.Request(request);
    // A little helper to parse the querystrings.
    StringDictionary result = QueryStringHelper.ParseQueryString(response.Content);

    AccessToken = result["access_token"];

    SetUserInformation(AccessToken);
}

    private void SetUserInformation(string sToken)
    {
        var client = new RestClient { Authority = "https://graph.facebook.com/" };
        var request = new RestRequest { Path = "me" };
        request.AddParameter("access_token", sToken);   //Make use of the access token
        RestResponse response = client.Request(request);

        JavaScriptSerializer ser = new JavaScriptSerializer();
        var parsedResult = ser.Deserialize<Facebook>(response.Content); //parsedResult will contain basic FB User info

    //Redirect to the necessary page
        Response.Redirect("/Default.aspx");
    }
} 
```

**注意**：这将需要使用 Hammock REST 库，正如我在文章开头所指出的那样。

我希望这有帮助。

# java - java中的填充异常和解密

> ID：10412771
> 
> 赞同：0
> 
> 时间：2012-05-02T11:25:22.097
> 
> 标签：java, cryptography, padding

我必须在我的服务器上解密一个帧。加密帧来自客户端设备，通过套接字上的 GPRS。加密是使用“TripleDes”和给定的密钥完成的。我使用 n 服务器端的算法和密钥相同。frame 是 Hex 和 Ascii 字符串的组合。问题是当我解密此帧时出现错误：

```
javax.crypto.IllegalBlockSizeException: Input length must be multiple of 8 when decrypting with padded cipher 
```

当我用零填充我的字节数组时

```
temparray[87] = 00; 
```

我收到一个错误：

```
javax.crypto.BadPaddingException: Given final block not properly padded 
```

以下是我的代码：

```
if ((len = inputStream.read(mainBuffer)) > -1) {
                totalLength = len;
            }
if (totalLength > 0) {
                byteToAscii = function.byteToAscii(mainBuffer, totalLength);
            }
if (byteToAscii.length() > 0) {
                completeHexString = function.stringToHex(byteToAscii);               
                debugInfo = "FRAME RECV.=" + completeHexString;
/* FRAME RECV.=41ed34a41a9de6d270aa1e1464527e88c8bee66a00cfb308f60c105de81db0f1ce43d8c0b9bc4e8070b5ab8d4d3650b55d23223fc687bb1485945bc3228e9707a7aecda9f90657e0ac009571c6469c58a2cd9793cc433ccb5993f2*/
            }
byte[] key = new byte[]{31, 30, 31, 36, 32, 11, 11, 11, 22, 26, 30, 30, 30, 30, 30, 30, 30, 30, 30, 30, 30, 30, 30, 30};
myKeySpec = new DESedeKeySpec(key);
mySecretKeyFactory = SecretKeyFactory.getInstance("TripleDES");
dekey = mySecretKeyFactory.generateSecret(myKeySpec);
byte[] zeros = {0, 0, 0, 0, 0, 0, 0, 0};
IvParameterSpec iv = new IvParameterSpec(zeros);
Cipher c = Cipher.getInstance("TripleDES/CBC/PKCS5Padding");
c.init(Cipher.DECRYPT_MODE, key, iv);
byte[] decordedValue = new BASE64Decoder().decodeBuffer(completeHexString);
byte[] decValue = c.doFinal(decordedValue);
String decryptedValue = new String(decValue);
System.out.println("decryptedValue= " + decryptedValue); 
```

这是我在代码中使用的函数：

```
public String stringToHex(String base) {
        StringBuffer buffer = new StringBuffer();
        int intValue = 0;
        for (int x = 0; x < base.length(); x++) {
            intValue = base.charAt(x);
            String hex = Integer.toHexString(intValue);
            if (hex.length() == 1) {
                buffer.append("0" + hex + "");
            } else {
                buffer.append(hex + "");
            }
        }
        return buffer.toString();
    }
public String byteToAscii(byte[] b, int length) {
        String returnString = "";
        for (int i = 0; i < length; i++) {
            returnString += (char) (b[i] & 0xff);
        }
        return returnString;
    } 
```

我是java密码学的新手。请告诉我该怎么做？提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-02T14:19:07.397

PKCS5 填充字节值必须是填充字节数。例如，如果要填充 5 个字节，则您的填充将是`05 05 05 05 05`. 它有两个字节要填充，填充将是`02 02`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-02T11:44:18.280

`temparray[88]`表示您正在访问第 89 个字节，是不是太多了？

我认为你应该只有：

```
temparray[87] = 00; // this is byte number 88 
```

并删除

```
temparray[88] = 00; // this is byte number 89 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-02T11:41:53.303

你为什么不试试[CipherInputStream](http://docs.oracle.com/javase/6/docs/api/javax/crypto/CipherInputStream.html)和[CipherOutputStream](http://docs.oracle.com/javase/6/docs/api/javax/crypto/CipherOutputStream.html)？这样你就可以忘记填充。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-02T16:19:59.707

您的错误消息告诉您最后一个块的长度有问题：“使用填充密码解密时输入长度必须是 8 的倍数”

查看您的输入帧，它的长度不是 8 的倍数。我计算了 11 个完整的 8 字节块和 4 个字节的半块，总共 92 个字节。您是否应该在尝试解密之前删除一些未加密的内容？完整的消息到达了吗？

我还注意到，有一次您将缓冲区编码为十六进制，稍后您将其解码为 Base-64。这可能不会给你你所期望的。它也可以解释长度问题。十六进制的四个字符是两个字节，而 Base-64 的四个字符是三个字节。

# php - 为什么我的会话变量增加了 2？

> ID：10412775
> 
> 赞同：1
> 
> 时间：2012-05-02T11:25:33.360
> 
> 标签：php, session-variables

如果我点击 php 页面并且会话 qty = 2 当我到达下面代码中的打印语句时，为什么会话数量 +1 实际上会添加 2 如果我再次刷新它会打印 4，它会打印 6，再次刷新和它的 8 . 为什么下面的代码是递增2而不是1？

```
<?php
    $maxx=count($_SESSION['cart']);
    for($ix=0;$ix<$maxx;$ix++){
        $pidx=$_SESSION['cart'][$ix]['productid'];

        $_SESSION['cart'][$ix]['qty'] = $_SESSION['cart'][$ix]['qty']+1;

        print $_SESSION['cart'][$ix]['qty'];
}
?> 
```

# xslt - 用 xslt 显示 xslt

> ID：10412776
> 
> 赞同：1
> 
> 时间：2012-05-02T11:25:38.327
> 
> 标签：xslt

我想用一个通用的 xslt 显示我的 xslt，以便生成有关如何构建 xslt 的文档。我在 stackoverflow 上得到了一些帮助，但仍有一些细节我认为我自己设法做到了，但不幸的是没有。

上一篇：[生成xsl文档](https://stackoverflow.com/questions/10304459/generate-xsl-documentation)

这就是我希望它的工作方式：

我的 xslt：

```
<?xml version="1.0" encoding="UTF-8"?>
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
    <xsl:output method="html"/> 
    <xsl:template match="/">
        <head>
        <title>My sample</title>
    </head>
    <body>
        My sample element: <xsl:value-of select="root/element1"/>     
    </body>
    </xsl:template>
</xsl:stylesheet> 
```

请求的输出：

```
<html>
    <head>
        <title>My sample</title>
    </head>
    <body>
        My sample element: root/element1
    </body>
</html> 
```

如果可能的话，我还想显示 for-each 循环和 if 语句。有没有人这样做并且可以与我分享一些代码？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2018-04-17T10:15:42.843

**我做了一些更改，我认为它可以帮助您，请检查代码并在您的输入 XSLT 上运行它：**

```
<?xml version="1.0" encoding="UTF-8"?>
<xsl:stylesheet version="1.0" 
    xmlns:xsl="http://www.w3.org/1999/XSL/Transform"
    >
    <xsl:output method="text"/>

    <xsl:template match="node()|@*">
           <xsl:copy>
               <xsl:copy-of select="@*"/>
               <xsl:apply-templates select="node()|@*"/>
           </xsl:copy> 
    </xsl:template>

    <xsl:template match="*">
        <xsl:value-of select="concat('&lt;', name())" />
        <xsl:apply-templates select="@*" />
        <xsl:value-of select="'&gt;'" />
        <xsl:apply-templates/>
        <xsl:value-of select="concat('&lt;/', name(), '&gt;')" />
    </xsl:template>

    <xsl:template match="@*">
        <xsl:value-of select="concat(' ', name(), '=&quot;', ., '&quot;')" />
    </xsl:template>

    <xsl:template match="xsl:*">
        <xsl:apply-templates/>
    </xsl:template>

    <xsl:template match="xsl:value-of">
        <xsl:value-of select="@select" />
    </xsl:template>

    <!-- add appropriate templates for the other XSLT elements -->
</xsl:stylesheet> 
```

# android - 获取 Edittext 值

> ID：10412784
> 
> 赞同：-1
> 
> 时间：2012-05-02T11:26:08.790
> 
> 标签：android, android-edittext

在我的应用程序中有两个编辑框，当单击适当的编辑框时，它将显示一个列表视图（这是另一个意图。从该用户必须选择 1 个输入，我将这些值分配给文本框。我的问题是当我将值设置为 1编辑框并单击另一个文本框以获取第一个文本框值不存在的值。

我的代码是：

带有编辑文本框的屏幕：

```
 public void onCreate(Bundle savedInstanceState) 
    {
        final String fromunit=getIntent().getStringExtra("Fromunit");
        final String tounit=getIntent().getStringExtra("Tounit");
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);       
        EditText medit=(EditText)findViewById(R.id.editText1);
        EditText meditfrom=(EditText)findViewById(R.id.editText2);
        Button b1=(Button)findViewById(R.id.button1);
        EditText meditto=(EditText)findViewById(R.id.editText3);
        meditfrom.setText(fromunit);
        meditto.setText(tounit);
        meditfrom.setOnTouchListener(new View.OnTouchListener() {

            @Override
            public boolean onTouch(View v, MotionEvent arg1) 
Intent  FromIntent= new Intent(v.getContext(),Fromlist.class);
                 startActivity(FromIntent); 
                return false;
            }
        });

  meditto.setOnTouchListener(new View.OnTouchListener() {

            @Override
            public boolean onTouch(View v, MotionEvent arg1) 
            {
                // TODO Auto-generated method stub
                 Intent  ToIntent= new Intent(v.getContext(),Tolist.class);
                 startActivity(ToIntent);   
                return false;
            }
        }); 
```

列表视图屏幕：

对于第一个编辑框：

```
 public void onCreate(Bundle savedInstanceState) 
            {
                super.onCreate(savedInstanceState);
                setListAdapter(new ArrayAdapter<String>(this, R.layout.fromunit, FROMUNIT));
                ListView lv = getListView();
                lv.setTextFilterEnabled(true);
                lv.setOnItemClickListener(new OnItemClickListener() 
                {
                  public void onItemClick(AdapterView<?> parent, View view,
                      int position, long id) {
                    // When clicked, show a toast with the TextView text
    //              Toast.makeText(getApplicationContext(), ((TextView) view).getText(),
    //                  Toast.LENGTH_SHORT).show();
                      Intent prev=new Intent(view.getContext(),ServiceExampleActivity.class);
                      prev.putExtra("Fromunit",((TextView) view).getText());
                      startActivity(prev);
                  }
                });        
            }   

For 2nd edittextbox:

 public void onCreate(Bundle savedInstanceState) 
        {
            super.onCreate(savedInstanceState);
            setListAdapter(new ArrayAdapter<String>(this, R.layout.fromunit, TOUNIT));
            ListView lv = getListView();
            lv.setTextFilterEnabled(true);
            lv.setOnItemClickListener(new OnItemClickListener() 
            {
              public void onItemClick(AdapterView<?> parent, View view,
                  int position, long id) {
                // When clicked, show a toast with the TextView text
    //            Toast.makeText(getApplicationContext(), ((TextView) view).getText(),
    //                Toast.LENGTH_SHORT).show();
                  Intent prev=new Intent(view.getContext(),ServiceExampleActivity.class);
                  prev.putExtra("Tounit",((TextView) view).getText());
                  startActivity(prev);
              }
            });        
        } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-02T11:38:17.440

您应该使用`startActivityForresult()`方法来启动另一个活动

例如：在 FirstActivity

```
 int REQUEST_CODE= 1;

 public boolean onTouch(View v, MotionEvent arg1) 
  Intent  FromIntent= new Intent(v.getContext(),Fromlist.class);
             startActivityForresult(FromIntent,REQUEST_CODE); 
            return false;
        }
    }); 
```

在 secondActivity 如果你想发回数据

```
Intent returnIntent = new Intent();
returnIntent.putExtra("result",result);
setResult(RESULT_OK,returnIntent);     
finish(); 
```

如果您不想返回数据

```
Intent returnIntent = new Intent();
setResult(RESULT_CANCELED, returnIntent);        
finish(); 
```

`onActivityResult()`现在在您的 FirstActivity 类中为方法编写以下代码

```
protected void onActivityResult(int requestCode, int resultCode, Intent data) {

if (requestCode == REQUEST_CODE) {

 if(resultCode == RESULT_OK){

  String result=data.getStringExtra("result");

}

if (resultCode == RESULT_CANCELED) {

 //Write your code on no result return 

}
}//onAcrivityResult 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-02T11:28:50.193

尝试

```
meditfrom.getText().toString(); 
```

# javascript - 如何在javascript中将日期差异转换为数字

> ID：10412785
> 
> 赞同：0
> 
> 时间：2012-05-02T11:26:10.197
> 
> 标签：javascript, html

我设计了一个表单，其中包含 3 个字段 From_date To_date No_of days 我想计算 from_date 和 to_date 之间的差异，差异值将以 nu_of 天显示。尝试了这段代码：

```
<script>
function difference()
{
var d1=document.getElementById("P1_FROM_DATE");
var d2=document.getElementById("P1_TO_DATE");
var d3=document.getElementB`yId("P1_NO_DAYS");
if(d2.value < d1.value)
{
alert("todate should not be less than from date");
d2.focus();
return false;
}
else
{
d3.value=(d2.value - d1.value)+1;
return true;
}
}
</script> 
```

当此代码执行且条件满足时，no_of_days 显示 NaN。所以有什么解决办法请告诉我。

问候 Sabyasachi

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-02T11:31:40.513

您正在尝试对只知道文本的字段使用基于日期的方法。您需要使用 Date 类从文本转换这些值，并使用这些方法来执行您的日期算术。

祝你好运！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-02T11:32:40.923

一个通用公式。日期[x] 格式必须是 ISO（例如 'yyyy/mm/dd'）。

```
var diffDays = 
     Math.floor( (new Date([date1]) - new Date[date2]) / (1000*60*60*24) ); 
```

顺便说一句，我想`document.getElementById("P1_FROM_DATE")`是一个输入字段。在这种情况下使用`document.getElementById("P1_FROM_DATE").value`以避免失望。

# html - CSS Hover Menu Problems

> ID：10412791
> 
> 赞同：0
> 
> 时间：2012-05-02T11:26:20.877
> 
> 标签：html, css

I have a problem with my CSS hover menu.

It pops out perfectly fine and in the right location, however when I try to go to one of the options in the pop-out menu, it disappears and for the life of me I can't figure out how to stop it from doing so.

Is there any way to stop the menu from disappearing as soon as I try to select one of the sub menu options?

I've looked around on Stack Overflow (correct me if I'm wrong) and haven't found anything like this, but that may be because I have no idea how to search this problem properly.

I've tried using jQuery for this too, but I just had the same problem.

You can see a fiddle [here](http://jsfiddle.net/j8Ny4/) which shows the problem perfectly.

Thanks.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-02T11:59:20.880

I hope below link will help you

[http://jsfiddle.net/j8Ny4/9/](http://jsfiddle.net/j8Ny4/9/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-02T11:31:38.097

Add this to your css:

```
li.sign {
    width: 80% !important;
}

.navigation ul li {
   width: 115%;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-02T11:34:21.450

give width -> .navigation ul accordingly

```
.navigation ul {
padding: 20px 20px 20px 40px;
list-style: none;
    width:300px; // according to your
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-02T17:02:46.040

I answered my own question actually.

I assigned a class to the `.navigation ul li:hover ul` called `.showup` and another which set the display of the `.navigaiton ul li ul` to none.

I then ran this jQuery to make it work

```
$('li:has(ul)').hoverIntent(function() {
    $(this).find('ul').removeClass('hide');
    $(this).find('ul').addClass('showup');
}, function() {
    $(this).find('ul').removeClass('showup');
    $(this).find('ul').addClass('hide');
}) 
```

and now it works great!

# eclipse - 当我要加载 3 个不同的 jar 以及它们之间的相互依赖关系时，OSGi 类加载器的行为方式

> ID：10412808
> 
> 赞同：0
> 
> 时间：2012-05-02T11:27:16.150
> 
> 标签：eclipse, osgi

我很想知道这个答案。我有一个问题，比如我有 3 个 jar A、B 和 C。现在 jar A 需要导入 jar C 的 1.1 版，而 Jar B 需要导入 jar C 的 1.5 版。

> 那么，根据我的理解，是不是所有这些 jar 文件都将由单独的类加载器加载。因此，在加载后 OSGi 将如何处理具有特定 jar 的不同版本场景。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-02T13:36:31.413

此方案需要部署四个捆绑包，A、B 和 C-1.1 和 C-1.5。

*   A 被解析（使用它自己的类加载器），它将从包 C-1.1 加载任何依赖类。

*   B 被解析（使用它自己的类加载器）它将从包 C-1.5 加载任何依赖类。

这允许两个版本的 C 能够在同一个应用程序中使用，因为它们不会由同一个类加载器加载，因此不会与同名的类存在冲突。

# ios - ios 5.0 在 ios 模拟器问题中登录 twitter

> ID：10412810
> 
> 赞同：5
> 
> 时间：2012-05-02T11:27:21.753
> 
> 标签：ios, twitter, ios-simulator

嗨，我想使用 ios 模拟器登录 Twitter 帐户。

但是当我尝试登录模拟器设置时，我收到下一条消息：

![在此处输入图像描述](../Images/6de477d4877f6e9ea9cd3220c9edc6cd.png)

我输入正确的密码和用户名。我也使用了其他帐户，但我仍然收到此错误。

我不明白是什么问题，但我确定不是我的密码和用户名。

感谢帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-30T08:54:04.583

在 iOS Simulator 5.0 中遇到了同样的问题。将模拟器版本更改为 6.1，现在它可以正常工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-28T08:26:09.350

这是与我使用的虚拟机相关的问题（在我的情况下），而不是我的 MAC。在 MAC 电脑上一切正常。我已经在虚拟 MAC 和真实 MAC 上测试了我的项目，并且在真实 MAC 上它可以工作。当我的虚拟 MAC 上的 iOS SDK 安装和模拟器安装不正确时，这可能与错误有关（但我不确定）。

# php - PHP 样式表不起作用？

> ID：10412816
> 
> 赞同：1
> 
> 时间：2012-05-02T11:27:41.040
> 
> 标签：php, html, css, variables, stylesheet

好的，所以我对使用 PHP 允许在 CSS 中使用变量进行了一些研究。我知道它会对性能产生影响，但这并不麻烦，困扰我的是我无法让 PHP 样式表正常工作。

我将样式表与以下代码链接

```
<link rel="stylesheet" type="text/css" media="screen" href="/res/css/default.php"> 
```

在 PHP 样式表中，我使用标题将文本读取为 CSS：

```
<?php header("Content-type: text/css"); ?> 
```

但是我根本没有得到我想要的结果，您可以通过访问我的网站 www.andysinventions.info 来查看问题所在。

在控制台打开的情况下检查 Google Chrome 中的站点也会显示此错误，

“资源解释为样式表，但使用 MIME 类型文本/纯文本传输。” 如果有人可以向我解释这意味着什么，它可能会帮助我解决问题。

如果您还需要什么，请告诉我，如果可以，我会为您取来。

谢谢你，安迪。

-

现在得走了，但是我稍后会回来检查答案/解决方案。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-02T11:29:51.720

当我访问[http://www.andysinventions.info/res/css/default.php](http://www.andysinventions.info/res/css/default.php)时，我会看到 PHP 代码。这意味着它没有被解析。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-02T11:30:36.073

您必须配置您的 Web 服务器以解释以`.css`PHP 结尾的文件或将文件重命名为`/res/css/default.php`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-02T11:30:33.157

当您在浏览器中打开[样式表时，您会看到 PHP 代码：](http://www.andysinventions.info/res/css/default.php)

```
<?php header("Content-type: text/css"); ?>
<?php
$primary = 'orange';
$secondary = 'rgb(55,55,55)';
$trim = 'white';
?>
/*Main*/
*, html{
margin:0;
padding:0;
font-family: arial;
} 
```

不知何故，样式表没有被解释为 PHP 代码。也许您有一个`htaccess`文件可以防止这种情况发生？

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-02T11:35:38.943

它在运行时作为css文件而不是php文件读入，因此您的服务器永远不会处理php。客户端的浏览器正在读取该链接行，并且客户端机器正在对它认为是平面 css 文件的内容发出另一个请求，这就是它得到的内容，无论您是否有 php。

我从未这样做过，但我认为您必须使用 include 或 require 才能更接近您正在寻找的结果。

# java - netbeans 中最简单的 servlet 和 web.xml

> ID：10412823
> 
> 赞同：4
> 
> 时间：2012-05-02T11:28:22.950
> 
> 标签：java, servlets, netbeans, glassfish, web.xml

我试图了解 java servlet 是如何工作的，并且我使用 netbeans 7.1.1 作为我的 IDE。这托管在我的开发机器上，它是在 Windows 7 主机操作系统上运行的 Ubuntu VM。

我使用 netbeans 向导来设置我的简单应用程序，但是一定有一些我不理解的东西，因为转到 url`http://localhost:8080/hssdatabase/`会导致以下错误消息：-

> javax.servlet.ServletException: PWC1397: Wrapper 找不到 servlet 类 hss.index 或它依赖的类

这是我的项目文件夹树：-

![网豆项目](../Images/ba5a5901998c6c7f7c2aa941f8686be2.png)

这是我的 web.xml：-

```
<?xml version="1.0" encoding="UTF-8"?>
<web-app version="3.0" xmlns="http://java.sun.com/xml/ns/javaee" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://java.sun.com/xml/ns/javaee http://java.sun.com/xml/ns/javaee/web-app_3_0.xsd">
    <servlet>
        <servlet-name>index</servlet-name>
        <servlet-class>hss.index</servlet-class>
    </servlet>
    <servlet-mapping>
        <servlet-name>index</servlet-name>
        <url-pattern>/*</url-pattern>
    </servlet-mapping>
</web-app> 
```

我也试过： -

```
<url-pattern>/index</url-pattern> 
```

去`http://localhost:8080/hssdatabase/index`，但结果相同。

为了部署应用程序，我使用新项目向导设置了一个基本项目，然后删除了生成的 jsp。然后删除 web.xml 中标签之间的所有内容，然后使用新的 servlet 向导创建 servlet 并填写 web.xml。我有兴趣了解为什么这不起作用，而不是检查我为到达这里所采取的步骤。我正在尝试了解 web.xml 以及它与 servlet 的关系。可能是错误的 xmlns 声明吗？

而我的 index.java 只是 netbeans 生成的沼泽标准默认 servlet，所以我认为不值得在这里发布。

我的问题是：web.xml 中是否缺少某些内容或错误？

我已经阅读了我能找到的所有内容，但看不出有什么问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-02T21:56:26.120

该消息表明您的 hss/index.java 文件未编译，或者它所依赖的文件之一不在类路径中。您可能想查看与“运行”或“部署”操作执行相关的 ant 输出。输出应如下所示：

```
init:
deps-module-jar:
deps-ear-jar:
deps-jar:
Created dir: /Users/vkraemer/NetBeansProjects/WebApplication37/build/web/WEB-INF/classes
Created dir: /Users/vkraemer/NetBeansProjects/WebApplication37/build/web/META-INF
Copying 1 file to /Users/vkraemer/NetBeansProjects/WebApplication37/build/web/META-INF
Copying 2 files to /Users/vkraemer/NetBeansProjects/WebApplication37/build/web
library-inclusion-in-archive:
library-inclusion-in-manifest:
Created dir: /Users/vkraemer/NetBeansProjects/WebApplication37/build/empty
Created dir: /Users/vkraemer/NetBeansProjects/WebApplication37/build/generated-sources/ap-source-output
compile:
compile-jsps:
In-place deployment at /Users/vkraemer/NetBeansProjects/WebApplication37/build/web
Initializing...
run-deploy:
Browsing: http://localhost:8080/WebApplication37
run-display-browser:
run:
BUILD SUCCESSFUL (total time: 1 second) 
```

您还应该验证 index.class 文件是否位于 $projectroot/build/web/WEB-INF/classes/hss 目录中。最好的检查方法是使用文件资源管理器。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-09-03T08:03:03.243

确保在 index.java 中，在所有导入之前，声明包：

```
package Interfaz; 
```

否则即使 web.xml 没问题，它也无法在该包下找到该 servlet。

# c# - 如何在 C# 中将协议缓冲区消息转换为 JSON

> ID：10412824
> 
> 赞同：3
> 
> 时间：2012-05-02T11:28:25.273
> 
> 标签：c#, json, wcf, protocol-buffers

这是我的用例。

我在一个多语言系统上工作，该系统通过 protobuf 和 zeromq 在几种不同的语言之间进行通信，其中一种是 C#。

我想在我们的数据库上实现 WCF JSON Web 服务，并且我想使用协议缓冲区来确保正确的 json 架构。WCF Web 服务现在工作正常，我可以轻松地创建标准`[DataContract]`和`[DataMember]`标记类，其架构与我的 protobuf 类相同，但我真的很想拥有这个自动化。

这大致是我得到的：

```
[ServiceContract]
public interface IMyService
{
    [OperationContract]
    IEnumerable<ProtoBufClass> MyData();
}

public partial class Service : IMyService
{

    [WebInvoke(Method = "GET",
               ResponseFormat = WebMessageFormat.Json,
               UriTemplate = "")]
    public IEnumerable<ProtoBufClass> MyData()
    {
        return from nd someLinqQuery
               // I want: select new ProtoBufClass.CreateBuilder()
               //                      .SetA(nd.A).SetB(nd.B).SetC(nd.C).Build()
               // This is what I have now
               select new ProtoBufClass(nd.A, nd.B, nd.C)
    }
} 
```

目前`ProtoBufClass`是使用上述`[Data*]`属性手动编写的，因此当我尝试在系统的其他部分使用它时不能保证正确性。我想要的是 ProtoBufClass 成为我们所有语言中通用的实际生成的类，并且为我自动序列化为 JSON。

如果我能这样做，那就太酷了：

```
http://host/Service
  => protobuf message as json
http://host/Service <{Content-Type: protobuf}> | ?format=protobuf
  => serialized protobuf message 
```

任何有关如何通过 zeromq 套接字公开此服务的指针也将不胜感激，我已经用 python 实现了 protobuf RPC，但我不知道如何在 C# 中做到这一点

谢谢本

*编辑*我忘了提到我使用的是 protobuf-csharp-port 而不是 protobuf-net

# jsp - jsp中的Struts标签“if test”

> ID：10412826
> 
> 赞同：1
> 
> 时间：2012-05-02T11:28:33.580
> 
> 标签：jsp, struts2

我在 jsp 文件中编写了一个条件，根据该条件显示图像。它是这样的。

```
<s:if test='#session.member.memberisadmin == "Y" 
  && #session.member.hasPermission("Update access to white list terms")   =="true" '>

<a href="<gs:url action="listLabs" namespace="/labs"/>"><img src="<gs:url  
value="/images/labs/labs-48px.png"/>" alt="General Sentiment Labs"  style="margin-
bottom:5px;" /></a>

</s:if> 
```

问题在于第二个条件 session.member.haspermission，因为当我使用 ||(or) 而不是 &&(and) 时它工作正常。请为此建议我一个解决方案。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-02T12:51:51.363

方法的结果是什么类型`member.hasPermission()`？如果它返回，`boolean`那么你的桅杆像这样检查它

`<s:if test='#session.member.memberisadmin == "Y" && #session.member.hasPermission("Update access to white list terms")'>`

# css - IE7中的下拉菜单对齐错误

> ID：10412830
> 
> 赞同：1
> 
> 时间：2012-05-02T11:28:41.660
> 
> 标签：css, menu, internet-explorer-7, drop-down-menu, alignment

我几乎完成了 IE7 样式表的优化（我第一次这样做），但仍然存在一个问题。我有一个下拉菜单，它在所有其他浏览器（包括 IE8+）中运行良好，但在 IE7 中对齐错误。出于某种原因，子菜单在下一个菜单项下对齐。例如; 第 1 项的子菜单在第 2 项下对齐，第 2 项的子菜单在第 3 项下对齐，依此类推。

这是我的 HTML（部分）：

```
<div id="main_nav">
<ul id="main_nav_list">
   <li><a href="#">START</a>
<ul>
    <li><a href="#">Contact</a></li>
    <li><a href="#">Twee</a></li>
    <li><a href="#">Derde</a></li>
    <li><a href="#">Laatste</a></li>
</ul>
</li>
    <li><a href="#">LEVEN</a></li>
    <li><a href="#">MOBILITEIT</a></li>
    <li><a href="#">VRIJE TIJD</a></li>
</ul>
</div> 
```

这是我的 CSS（部分）：

```
#main_nav {
float:right;
height:40px;
margin-left:6px;
margin-top:90px;
position:absolute;
width:780px;
}

#main_nav_list li {
display:inline;
min-width:100px;
position:relative;
text-decoration:none;
}

 #main_nav_list li a {
color:#222;
font-family:Absolut_Pro, Helvetica, sans-serif;
font-size:1.1em;
margin-left:5px;
margin-right:10px;
text-decoration:none;
}

#main_nav_list li a:hover {
border-bottom:2px solid #db002a;
color:#db002a;
}

#main_nav_list ul {
background-color:#FFF;
margin-top:20px;
padding-top:20px;
position:absolute; 
width:180px;
}

#main_nav_list ul li { 
background-image:url('images/list_bg.png');
background-repeat:no-repeat;
background-position:4% 50%;
border-bottom:1px dotted #666;
float:left; 
font-size:0.7em;
padding-left:15px;
width:165px;
}

#main_nav_list ul a {
display:block;
font-family:Arial, Helvetica, sans-serif;
padding:5px 0;
}

#main_nav_list ul a:hover {
border:none;
text-decoration:none;
} 
```

有任何想法吗？

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-02T12:10:49.173

添加这些：

```
#main_nav_list ul {
margin:0;
bottom:0;
left:0
} 
```

# c# - 如何从 LINQ 内部连接查询结果集中填充 DataTable？

> ID：10412831
> 
> 赞同：0
> 
> 时间：2012-05-02T11:28:49.210
> 
> 标签：c#, linq-to-sql, datatable

我有一个从带有 LINQ 的内部连接表中选择的结果集。我怎样才能将结果集作为数据表返回？

```
DataProviderDataContext db = new DataProviderDataContext();

IEnumerable<DataRow> asd = (IEnumerable<DataRow>)(from dsa in (from usrAddr in db.T_USER_ADDRESSes join usr in db.T_USERs on usrAddr.USER_ID equals usr.USER_ID where usr.USER_ID == UserID select new { usr.REALNAME, usrAddr.USER_ID, usrAddr.USER_ADDRESS_ID, usrAddr.ADDRESS, usrAddr.TITLE, usrAddr.IS_DELIVERY, usrAddr.IS_INVOICE }).AsEnumerable() select dsa);

DataTable dt = asd.CopyToDataTable<DataRow>(); 
```

最好的祝福。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-02T11:38:58.597

不幸`CopyToDataTable<DataRow>()`的是，在`IEnumerable<DataRow>`. 您需要按照此处所述*粉碎*返回的数据：http: [//msdn.microsoft.com/en-us/library/bb669096.aspx](http://msdn.microsoft.com/en-us/library/bb669096.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-02T11:33:53.790

我很惊讶`DataTable dt = asd.CopyToDataTable<DataRow>();`没有为你做这项工作。

尝试：

```
asd.CopyToDataTable(dt, LoadOption.PreserveChanges); 
```

# testing - 在 Glassfish 中禁用自动更新检查

> ID：10412835
> 
> 赞同：2
> 
> 时间：2012-05-02T11:29:09.187
> 
> 标签：testing, glassfish, glassfish-3

我们在几个项目中使用 Glassfish。我想在启动时完全禁用更新检查，因为它们使低带宽情况下的测试变得困难。

我们正在嵌入式模式下使用 Glassfish 进行自动测试，并自动配置新域，启动服务器并在服务器正常运行的情况下进行测试。

由于所有测试都是完全自动的，我发现涉及管理界面的所有解决方案都是不切实际的。

顺便说一句：我们正在使用 Glassfish 3.1.2

有什么提示吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-03T18:29:37.663

尝试：

**asadmin> create-jvm-options -Dcom.sun.enterprise.tools.admingui.NO_NETWORK=true**

这记录在这里：

[http://docs.oracle.com/cd/E26576_01/doc.312/e24928/extending-updating.htm](http://docs.oracle.com/cd/E26576_01/doc.312/e24928/extending-updating.htm)

希望这可以帮助！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-02T11:42:03.987

看看[我的一个旧答案](https://stackoverflow.com/a/5281931/620338)中引用的[这个讨论](http://www.mentby.com/Group/glassfish-users/glassfish-v3-admin-console-very-slow.html)。讨论了一些选项。

如果我没记错的话，其中之一是关于重命名 GF 模块目录中的特定模块。但这是一种冗长的讨论。希望你能得到一些提示！

# bash - Bash 条件管道

> ID：10412840
> 
> 赞同：5
> 
> 时间：2012-05-02T11:29:27.167
> 
> 标签：bash, function, if-statement, conditional, pipe

我如何通过管道输出命令以防万一它返回 true？

```
function open
{
    TEMPFILE=$(mktemp -u)
    if ! gpg2 --quiet --decrypt --batch --passphrase "$2" "$1" 2> $TEMPFILE; then
        error $"Password errata od errore di lettura dal file\n\nDettagli:\n$(grep -v '^$' $TEMPFILE)"
        rm -f $TEMPFILE
        return 1
    fi
    rm -f $TEMPFILE
}

if ! open "$@" "$PASSWORD"; then
    exit 1
fi | <SOMECOMMAND> 
```

这样，它只是管道并且不检查 open 是返回 true 还是 false，因此永远不会执行“exit 1”。

如何在不使用文件的情况下解决它（出于安全原因）。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-05-02T16:10:45.040

在我提出解决方案之前，让我解释一下这比您意识到的更困难。基本问题是时间：`open ...`函数在运行时产生输出；*它在完成运行*后（因此在它产生输出之后）产生退出状态。由于您希望根据退出状态对输出执行不同的操作，因此您必须将输出临时存储在某个地方，直到函数完成，您可以决定如何处理输出。

管道本身不适用于此，因为管道不存储数据（除了一点缓冲区空间）-它们将数据“实时”从一个程序传递到另一个程序，在这种情况下，第二个程序无法启动直到第一个完成之后。通常，临时文件将是完美的（存储数据是文件的用途），但出于安全原因，您不希望这样做。这几乎是将数据放在 RAM 中的某个位置（尽管这也不是完全安全的......）。

@Karoly Horvath 的回答建议将输出存储在 bash 变量中（存储在 RAM 中），但这不起作用，因为 bash 无法处理变量值中的空字节。因此，我提出了一种变体，您可以在其中使用数据的“安全”编码，并将其放入 bash 变量中。我使用 uuencode 格式，但您也可以使用 base64、十六进制转储等...

```
if result=$(open "$@" "$PASSWORD" | uuencode -; exit ${PIPESTATUS[0]}); then
    echo "$result" | uudecode -p | SOMECOMMAND
fi 
```

请注意，PIPESTATUS 是一个 bashism，因此您应该以`#!/bin/bash`. 此外，如果输出太长，您可能会遇到 bash 想要存储/扩展/等多少数据的限制；如果这被证明是一个问题，事情就会变得更加复杂。

顺便说一句，如果您担心安全性，请不要使用 gpg2 的`--passphrase`选项——在命令行上传递密码短语会将其暴露给例如`ps`在正确时间运行的任何人，这是一个非常糟糕的主意。gpg2 有许多提供密码的选项，所以请使用更好的选项。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-02T11:44:15.733

如果文件成功打开，则以下代码应有条件地通过管道传输结果：

```
 result=open "$@" "$PASSWORD"
    if [ $? -gt 0 ]; then
      exit 1
    fi
    echo "$result" | <SOMECOMMAND> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-02T14:34:04.643

使用命名管道并存储返回值

```
mkfifo piper;
open "$@" "$PASSWORD"; retval=$? > piper &
if [ x"$retval" != x0 ]
then
   rm piper
   exit 1
fi
<SOMECOMMAND> < piper
rm piper 
```

# iphone - 声明两个具有不同名称的属性，它们将指向同一个变量

> ID：10412849
> 
> 赞同：1
> 
> 时间：2012-05-02T11:30:03.430
> 
> 标签：iphone, objective-c, ios, cocoa-touch

一般来说，我希望具有不同名称的属性指向同一个变量。

这样做的原因是我希望我的类符合 MKAnnotation 并且我希望 title 属性与我的另一个名为 name 的属性具有相同的值，并且不要更改我的原始属性的名称（名称）对我来说非常重要。

有没有一种聪明的方法可以做到这一点，而无需拥有两个对象并将一个对象克隆到另一个对象中？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-02T12:39:36.067

HotLicks 和 TheSaad 的答案的问题与键值观察 (KVO) 合规性有关。如果有东西正在观察您的`name`财产，您需要通知他们是否有其他东西调用了`setTitle:`setter。反之亦然。

我会`@synthesize`像往常一样推荐你的一个属性。例如，我假设`name`是这样完成的。然后，您需要让另一个（`title`在这种情况下）传递到该属性并告诉 KVO 关于依赖项：

```
- (void) setTitle:(NSString*)newTitle
{
    self.name = newTitle;
}

- (NSString*) title
{
    return self.name;
}

+ (NSSet *)keyPathsForValuesAffectingTitle
{
    return [NSSet setWithObject:@"name"];
} 
```

要了解最后一种方法，请阅读[`+[NSKeyValueObserving keyPathsForValuesAffectingValueForKey:]`](https://developer.apple.com/library/mac/documentation/Cocoa/Reference/Foundation/Protocols/NSKeyValueObserving_Protocol/Reference/Reference.html#//apple_ref/doc/uid/20002299-SW4).

您不能`@synthesize`同时指向同一个 ivar（例如`_name`），然后只提供`+keyPathsForValuesAffectingTitle`通知`title`依赖于的 KVO 的方法`name`，因为这不会让观察者`name`知道`setTitle`: 何时被调用。您可能很想通过`+keyPathsForValuesAffectingName`告诉 KVO 关于另一个方向的依赖关系来解决这个问题。我认为这行不通，即使它似乎在实验中，我也不会依赖它。它容易发生无限递归或框架只是忽略循环依赖（以避免无限递归）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-02T11:37:27.443

无需合成，您只需为属性编写自己的访问器。您可以这样做。

在您的界面中：

```
@interface Student
{
    NSString *_name;
}

@property (readonly, nonatomic) NSString *firstName;
@property (readonly, nonatomic) NSString *lastName;

@end 
```

在您的实施中：

```
@implentation Student

- (NSString *)firstName
{
    return _name;
}

- (NSString *)lastName
{
    return _name;
}

@end 
```

注意：如果发生突变，这将导致 Key-Value Observing 出现问题，因为观察者只会被通知有关被调用的方法，而不是实际值的突变。

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2012-05-02T11:35:29.390

```
yourObject.firstProperty = [[AClass alloc] init];  // ---> alloc or set to an existing object...

yourObject.secondProperty = yourObject.firstProperty; 
```

这样两个属性都指向同一个分配的对象

# wsdl - SUDZc 的 XML 节点数据

> ID：10412850
> 
> 赞同：0
> 
> 时间：2012-05-02T11:30:06.347
> 
> 标签：wsdl, xcode4.3

嗨，当我使用 sudzc 网站指令时，我得到了 WSDL 响应的这个结果，任何人都可以帮助我如何访问这些值。提前致谢 ：）

```
AuthenticateRequest returned the value: {
    AuthenticateRequestResult =     {
       diffgram = {
            NewDataSet = {
                Table = {
                    CDS = 48705400000000;
                    IsActive = false;
                    Parameters = "<null>";
                    "User_ID" = scdistrict;
                };
            };
        };
    schema = {
        element = {
            complexType =  {
                choice = {
                    element = {
                        complexType = {
                            sequence =  {
                                element = 0;
                            };
                        };
                    };
                };
            };
        };
    };
}; 
```

}

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-04T12:00:41.653

您可以将此 xml 转换为 NSDictionary，（请参阅[此](https://github.com/bcaccinolo/XML-to-NSDictionary)），然后从字典中获取所需的属性。

# android - 本地托管的 WCF 服务可以使用 wifi 在 android 中访问

> ID：10412851
> 
> 赞同：0
> 
> 时间：2012-05-02T11:30:12.563
> 
> 标签：android, wcf, wifi

我有一个使用 IIS 托管在我的机器上的 wcf 服务。

我使用 ksoap 库制作了一个使用 wcf 服务的 android 应用程序。

当我处于开发模式时，我可以使用托管 URL 访问该服务。

**我想知道： - 如果我在我的手机上安装了那个 android 应用程序并想使用 WIFI 连接来连接托管的 wcf 服务。有没有可能？**

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-02T11:38:13.040

> 如果我在我的手机上安装该 android 应用程序并使用 WIFI 连接连接到 wcf 服务。有没有可能？

我会说试试看。

它应该可以工作，只要您不在`localhost`应用程序中引用，而是使用映射到 IIS 服务器的主机名或内部或外部 IP 地址。

# javascript - jQuery 代码的纯 JS 版本

> ID：10412855
> 
> 赞同：1
> 
> 时间：2012-05-02T11:30:22.787
> 
> 标签：javascript, jquery, javascript-events

我有以下 jQuery 代码（我更改了 div 和函数的名称，不会有太大区别）

```
$(function(){
    $('#div1').bind('touchend',function(){
        function1();
        function2();
    });
});

$(function(){
    $('#div2').bind('touchend',function(){
        function1();
        function3();
    });
}); 
```

这是它的纯 JS 版本，它不起作用。

```
document.getElementById('div1').addEventListener('touchend',function(){
    function1();
    function2();
},false);

document.getElementById('div2').addEventListener('touchend',function(){
    function1();
    function3();
},false); 
```

如果有人可以先解释一下jQuery版本的含义，然后指出我在纯js版本中犯了什么错误，我将不胜感激！

[如果您想知道我为什么要这样做，我需要从我正在构建的 phonegap 应用程序中删除 jQuery，以便页面加载更快:-)]

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-02T11:40:57.453

您的代码应该在任何支持*触摸事件*的浏览器/DOM 中工作。我在这里唯一能想到的是您错过了`DOMContentLoaded`要调用的事件，因此尝试获取/查询尚未准备好的元素。

所以你应该把你的代码包装成

```
document.addEventListener('DOMContentLoaded', function () {
}, false); 
```

当你调用`$(function() {});`. 如果您将一个函数传递给`$()`它的快捷方式`$(document).ready(fnc)`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-02T11:41:52.667

该代码完全按照您的操作，只是将处理程序分开，我认为您遇到的唯一问题是缺少使用

```
document.addEventListener('DOMContentLoaded', function () { 
```

这意味着 dom 还没有准备好， getElementById 什么也找不到。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-02T11:39:58.977

好的，我在这里阅读了其他几篇文章，这篇文章非常成功。

```
document.addEventListener('DOMContentLoaded', function () {
                      var div1 = document.getElementById('div1');
                      var div2 = document.getElementById('div2');
                      // event handler
                      var handler = function (event) {
                        function1();
                        function2();
                      };
                      var handler2 = function(event) {
                        function1();
                        function3();
                      };
                      // Bind the events
                      div1.addEventListener('touchend', handler, false);
                      div2.addEventListener('touchend',handler2,false);
                      }, false); 
```

但是，如果有人可以向我解释流程是什么以及代码是如何工作的，那么我的一天就结束了 :-)

# c - 如何计算块号

> ID：10412859
> 
> 赞同：2
> 
> 时间：2012-05-02T11:30:37.723
> 
> 标签：c, cuda, nvidia

我正在编写一个 CUDA 代码，我正在使用 GForce 9500 GT 显卡。

我正在尝试处理 20000000 个整数元素的数组，我使用的线程号是 256

经线大小为 32。计算能力为 1.1

这是硬件[http://www.geforce.com/hardware/desktop-gpus/geforce-9500-gt/specifications](http://www.geforce.com/hardware/desktop-gpus/geforce-9500-gt/specifications)

现在，块数 = 20000000/256 = 78125 ？

这听起来不正确。如何计算块数？任何帮助，将不胜感激。

我的 CUDA 内核函数如下。这个想法是每个块将计算其总和，然后通过将每个块的总和相加来计算最终总和。

```
__global__ static void calculateSum(int * num, int * result, int DATA_SIZE)
{
    extern __shared__ int shared[];
    const int tid = threadIdx.x;
    const int bid = blockIdx.x;

    shared[tid] = 0;
    for (int i = bid * THREAD_NUM + tid; i < DATA_SIZE; i += BLOCK_NUM * THREAD_NUM) {
        shared[tid] += num[i];
    }

    __syncthreads();
    int offset = THREAD_NUM / 2;
    while (offset > 0) {
        if (tid < offset) {
            shared[tid] += shared[tid + offset];
        }
        offset >>= 1;
        __syncthreads();
    }

    if (tid == 0) {
        result[bid] = shared[0];

    }
} 
```

我称这个函数为

```
calculateSum <<<BLOCK_NUM, THREAD_NUM, THREAD_NUM * sizeof(int)>>> (gpuarray, result, size); 
```

其中 THREAD_NUM = 256 且 gpu 数组的大小为 20000000。

这里我只是使用块号为 16 但不确定它是否正确？如何确保实现最大并行度？

这是我的 CUDA 占用计算器的输出。它说当块数为 8 时我将有 100% 的占用率。这意味着当块数 = 8 和线程数 = 256 时我将获得最大效率。那是对的吗？

![CUDA 占用计算](../Images/9b1fe6a69b849487977a5c3d89868f39.png) 谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-02T12:17:26.383

如果每个线程处理一个元素，并且每个块有 256 个线程，那么您应该运行 20000000 个线程，结果正好是 78125 个块。这是完全有效的数字。

但是，有一个小问题。我手头没有 CC1.1 设备，但在 CC1.3 中：

```
Maximum sizes of each dimension of a grid:     65535 x 65535 x 1 
```

因此，您应该为数据的不同部分运行多次内核，或者制作 2D 网格并将线程的 2D 地址简单地转换为数组元素的 1D 地址。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-02T17:50:35.143

您发布的内核代码可以处理任何输入数据大小，与您选择启动的块数无关。选择应该简单地取决于性能。

根据经验，对于这种内核，您希望在单个多处理器上同时运行的块数量乘以卡上的多处理器数量。第一个数字可以使用 CUDA 工具包中附带的 CUDA 占用电子表格获得，但上限为每个多处理器 8 个块，第二个数字将是 4*用于您拥有的设备*。这意味着不需要超过 32 个块来实现最大可能的并行性，但要准确回答需要访问我目前没有的编译器。

您还可以使用基准测试来通过实验确定最佳块数，使用 4、8、12、16、20、24、28 或 32 个块之一（4 的倍数，因为这是您卡上多处理器的数量）。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-02T12:35:44.017

在您的情况下，线程总数（20000000）除以每个块的线程数（256），因此您可以使用该数字（78125）。如果数字不均分，则常规整数除法会将其四舍五入，最终得到的线程数比需要的少。因此，在这种情况下，您需要使用如下函数对除法的结果进行四舍五入：

```
int DivUp(int a, int b) {
  return ((a % b) != 0) ? (a / b + 1) : (a / b);
} 
```

由于此函数可能会为您提供比元素更多的线程，因此您还需要在内核中添加一个测试以中止最后几个线程的计算：

```
int i(blockIdx.x * blockDim.x + threadIdx.x);
if (i >= n_items) {
  return;
} 
```

但是，还有一个额外的障碍。您的硬件在网格中的每个维度中最多只能包含 65535 个块，并且仅限于两个维度（x 和 y）。因此，如果在使用 DivUp() 之后，您最终得到的计数高于该计数，那么您有两个选择。您可以拆分工作负载并多次运行内核，也可以使用两个维度。

要使用两个维度，请选择两个数字，每个数字都低于硬件限制，并且在相乘时成为您需要的实际块数。然后在内核顶部添加代码，将两个维度（x 和 y）组合成一个索引。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-03T00:37:44.873

您只在内核中使用网格的 x 维。因此，使用 cc 1.1 限制为 65535 个块。

20000000/256 = 78125 是正确的！

所以你肯定需要超过 1 个块。

核心：

```
//get unique block index
const unsigned int blockId = blockIdx.x //1D
    + blockIdx.y * gridDim.x //2D

//terminate unnecessary blocks
if(blockId >= 78124)
    return;

//... rest of kernel 
```

最简单的方法是使用两个 y 块并在内核中检查块 ID。

```
dim3 gridDim = dim3(65535, 2); 
```

这将使超过 52945 个块无用，我不知道开销是多少，但先填充 x 然后 y 和 z 维度可以创建很多未使用的块，特别是如果达到 z 维度！

（Nvidia 应该明确地提供了一个实用函数，以获得最佳网格使用情况，以便在内核中使用独特的块，就像这里的情况一样）

对于这个简单的示例，如何使用 x 和 y 并计算根。

```
grid(280, 280) = 78400 blocks //only 275 blocks overhead, less is not possible 
```

这是计算能力 3.0 的一大优势。每个块上的 32 位范围通常使生活更轻松。为什么它被限制在 65535 我从来不明白。

但我还是更喜欢向下兼容。

我还会测试@talonmies 的变化。

# ios - 架构 i386 的未定义符号：“_sqlite3_open”，引用自：错误

> ID：10412867
> 
> 赞同：14
> 
> 时间：2012-05-02T11:31:24.087
> 
> 标签：ios, database

我创建了一个数据库类并打包了一些方法。但是，一旦构建项目......

```
Undefined symbols for architecture i386:
"_sqlite3_open", referenced from:
  -[MyDataBase openOrCreateDatabase:] in MyDataBase.o
"_sqlite3_exec", referenced from:
  -[MyDataBase createTable:] in MyDataBase.o
  -[MyDataBase InsertTable:] in MyDataBase.o
  -[MyDataBase UpdataTable:] in MyDataBase.o
  -[MyDataBase querryTableByCallBack:] in MyDataBase.o
"_sqlite3_close", referenced from:
  -[MyDataBase closeDatabase] in MyDataBase.o
"_sqlite3_get_table", referenced from:
  -[MyDataBase querryTable:] in MyDataBase.o
ld: symbol(s) not found for architecture i386
clang: error: linker command failed with exit code 1 (use -v to see invocation) 
```

这里有一些关键的方法：

创建数据库：

```
-(BOOL)openOrCreateDatabase:(NSString*)dbName 
{ 
self.m_dbName = dbName; 
NSArray *path =NSSearchPathForDirectoriesInDomains(NSDocumentDirectory,NSUserDomainMask,   YES); 
NSString *documentsDirectory = [path objectAtIndex:0]; 
if(sqlite3_open([[documentsDirectory stringByAppendingPathComponent:dbName]   UTF8String],&m_sql) !=SQLITE_OK) 
{ 
NSLog(@"创建数据库失败"); 
return NO; 
} 
return YES; 
} 
```

创建表：

```
-(BOOL)createTable:(NSString*)sqlCreateTable  
{  
if (![self openOrCreateDatabase:self.m_dbName]) {  
    return NO;  
}  
char *errorMsg;  
if (sqlite3_exec (self.m_sql, [sqlCreateTable UTF8String],NULL, NULL, &errorMsg) != 
SQLITE_OK)  
{  
    NSLog(@"创建数据表失败:%s",errorMsg);  
    return NO;  
}  
[self closeDatabase];  
return YES;  
} 
```

关闭数据库：

```
-(void)closeDatabase  
{  
sqlite3_close(self.m_sql);   
}  

//insert  

-(BOOL)InsertTable:(NSString*)sqlInsert  
{  
if (![self openOrCreateDatabase:self.m_dbName]) {  
    return NO;  
}  
char* errorMsg = NULL;  
if(sqlite3_exec(self.m_sql, [sqlInsert UTF8String],0, NULL, &errorMsg) ==SQLITE_OK)  
{  [self closeDatabase];  
    return YES;}  
else {  
    printf("更新表失败:%s",errorMsg);  
    [self closeDatabase];  
    return NO;  
}  
return YES;  
} 
```

更新表：

```
-(BOOL)UpdataTable:(NSString*)sqlUpdata{  
if (![self openOrCreateDatabase:self.m_dbName]) {  
    return NO;  
}  
char *errorMsg;  
if (sqlite3_exec (self.m_sql, [sqlUpdata UTF8String],0, NULL, &errorMsg) !=SQLITE_OK)  
{  
    [self closeDatabase];  
    return YES;  
}else {  
    return NO;  
}  

return YES;  
} 
```

选择记录：

```
-(NSArray*)querryTable:(NSString*)sqlQuerry  
{  
if (![self openOrCreateDatabase:self.m_dbName]) {  
    return nil;  
}  
int row = 0;  
int column = 0;  
char*    errorMsg = NULL;  
char**    dbResult = NULL;  
NSMutableArray*    array = [[NSMutableArray alloc] init];  
if(sqlite3_get_table(m_sql,[sqlQuerry UTF8String], &dbResult, &row,&column,&errorMsg )   == SQLITE_OK)  
{  
    if (0 == row) {  
        [self closeDatabase];  
        return nil;  
    }  
    int index = column;  
    for(int i =0; i < row ; i++ ) {    
        NSMutableDictionary*    dic = [[NSMutableDictionary alloc] init];  
        for(int j =0 ; j < column; j++ ) {  
            if (dbResult[index]) {  
                NSString*    value = [[NSString alloc]   initWithUTF8String:dbResult[index]];  
                NSString*    key = [[NSString alloc] initWithUTF8String:dbResult[j]];  
                [dic setObject:value forKey:key];  
                [value release];  
                [key release];  
            }  
            index ++;  
        }   
        [array addObject:dic];  
        [dic release];  
    }  
   }else {  
    printf("%s",errorMsg);  
    [self closeDatabase];  
    return nil;  
   }  
   [self closeDatabase];  
   return [array autorelease];  
} 
```

* * *

## 回答 #1

> 赞同：37
> 
> 时间：2012-05-02T11:34:02.887

您需要将 libsqlite 库添加到链接过程中。这可以在项目设置中完成，请参阅[https://stackoverflow.com/a/7623043/1091195](https://stackoverflow.com/a/7623043/1091195)。

# javascript - 将引号中的短语视为javascript中的单词

> ID：10412869
> 
> 赞同：0
> 
> 时间：2012-05-02T11:31:34.113
> 
> 标签：javascript, regex

我试图找到一种方法将字符串溢出到单个单词或短语中，其中短语用引号引起来。例如：

javascript 'sql server' vbscript

将分为：

*   javascript
*   sql服务器
*   脚本

我昨天得到了[这个问题](https://stackoverflow.com/questions/10399396/replace-any-words-with-modified-version-of-themselves)的帮助，它使用将字符串拆分为单个单词

```
/[-\w]+/g 
```

我一直在与正则表达式的黑暗艺术搏斗，发现[这个问题](https://stackoverflow.com/questions/2202435/php-explode-the-string-but-treat-words-in-quotes-as-a-single-word)在 php 中做了类似的事情，但即使有解释，它对我来说仍然没有多大意义（并且在我复制时不起作用/粘贴到javascript中！）

```
/"(?:\\\\.|[^\\\\"])*"|\S+/ 
```

任何帮助甚至是指向一个易于理解的正则表达式指南的指针！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-02T11:41:00.873

您应该尝试以下方法：

```
/([-\w]+)|'([^']*)'/g 
```

但是，如果您在带引号的字符串中有任何形式的单引号，这将失败，这意味着您无法使用此构造转义引号。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-02T11:44:39.377

试试这个：

```
var pattern = /('[^']+'|[-\w]+)/g;
var text = "javascript 'sql server' vbscript";
console.log(text.match(pattern)); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-02T11:41:54.803

也许你可以试试这个 `var text = ... var split = function(tx) {return tx.split("\'", }` 这应该把它分成引号。然后只需使用长度来计算它，因为所有偶数索引都是引号。然后加入奇数索引并执行 a`split(" ")`以获取单词

# php - 如何在正确的行中显示删除消息

> ID：10412879
> 
> 赞同：0
> 
> 时间：2012-05-02T11:32:14.570
> 
> 标签：php, javascript, jquery

下面是一个函数，它控制文件在其自己的表行中完成上传后发生的任何事情。每个表行都包含一个文件输入，用户可以在其中上传文件，然后将文件名附加到它自己的表行中。

如果文件成功，则显示一条成功消息，如果上传不成功，则显示一条消息，说明存在错误。但是我在该功能中还有另一个功能，用户可以通过单击“删除”按钮来删除文件。我唯一的问题是这行代码：

```
$(".imagemsg").html(data); 
```

假设我有 2 个表行，我在第一行删除了一个文件，.imagemsg 中的消息应该只显示在第一行，因为那是删除发生的行，它不应该在第一排和第二排。

所以我的问题是我需要添加什么，`$(".imagemsg").html(data);`以便消息仅显示在删除文件的行中，而不是`.imagemsg`每一行中的所有内容？

以下是完整代码：

```
function stopImageUpload(success, imagefilename){

      var result = '';

      if (success == 1){
         result = '<span class="imagemsg">The file was uploaded successfully!</span><br/><br/>';      
         $('.listImage').eq(window.lastUploadImageIndex).append('<div>' + htmlEncode(imagefilename) + '<button type="button" class="deletefileimage" image_file_name="' + imagefilename + '">Remove</button><br/><hr/></div>'); 
      }
      else {
         result = '<span class="imageemsg">There was an error during file upload!</span><br/><br/>';
      }

      $(".deletefileimage").on("click", function(event) {

         var image_file_name = $(this).attr('image_file_name');

        $(this).parent().remove();

    jQuery.ajax("deleteimage.php?imagefilename=" + image_file_name)
      .done(function(data) {
        $(".imagemsg").html(data);
       });

    });

      return true;   
} 
```

回调函数：

```
 <script language="javascript" type="text/javascript">window.top.stopImageUpload(<?php echo $result ? 'true' : 'false'; ?>, '<?php echo $_FILES['fileImage']['name'] ?>');</script> 
```

我听说最好这样做，但我不知道如何编码：

将相关元素传递给回调函数。您已经拥有 $(this)，因此您可能可以从中获取正确的行并将其放入变量中，然后在回调中访问它以将结果放在正确的位置。

更新：

```
function stopImageUpload(success, imagefilename){

      var result = '';
      var counter = 0;
      counter++;

      if (success == 1){
         result = '<span class="imagemsg'+counter+'">The file was uploaded successfully!</span><br/><br/>';      
         $('.listImage').eq(window.lastUploadImageIndex).append('<div>' + htmlEncode(imagefilename) + '<button type="button" class="deletefileimage" image_file_name="' + imagefilename + '">Remove</button><br/><hr/></div>'); 
      }
      else {
         result = '<span class="imageemsg">There was an error during file upload!</span><br/><br/>';
      }

      $(".deletefileimage").on("click", function(event) {

         var image_file_name = $(this).attr('image_file_name');

    jQuery.ajax("deleteimage.php?imagefilename=" + image_file_name)
      .done(function(data) {
        $(".imagemsg" + counter).html(data);
       });

       $(this).parent().remove();

    });

      return true;   
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-02T11:38:27.237

一种快速的方法是添加一个计数器，然后 .imagemsg 变为“.imagemsg”.$counter，然后返回的 msg 实际上只转到相关行 - 未经测试的代码，但你明白了。

例如

```
$counter++;
if (success == 1){ 
         result = '<span class="imagemsg'.$counter.'">The file was uploaded successfully!</span><br/><br/>';       
         $('.listImage').eq(window.lastUploadImageIndex).append('<div>' + htmlEncode(imagefilename) + '<button type="button" class="deletefileimage" image_file_name="' + imagefilename + '">Remove</button><br/><hr/></div>');  
      } 
      else { 
         result = '<span class="imageemsg">There was an error during file upload!</span><br/><br/>'; 
      } 

      $(".deletefileimage").on("click", function(event) { 

         var image_file_name = $(this).attr('image_file_name'); 

        $(this).parent().remove(); 

    jQuery.ajax("deleteimage.php?imagefilename=" + image_file_name) 
      .done(function(data) { 
        $(".imagemsg".$counter).html(data); 
       }); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-02T11:37:41.800

如果您有不止一行带有*imagemsg*类，则您的代码

```
$(".imagemsg").html(data); 
```

将其加载到所有这些中

要索引您的方式，您可以尝试

```
$(".imagemsg").eq(0).html(data); 
```

第一个

[演示](http://jsfiddle.net/mplungjan/peCze/)

或者更改`class="imagemsg"`为每`id="imagemsgN"`行增加*N*且唯一的位置。然后你改变到`$("#imagemsg"+counter)`去得到它

# html - 跨越标签内的 onclick 事件

> ID：10412883
> 
> 赞同：35
> 
> 时间：2012-05-02T11:32:22.543
> 
> 标签：html, css

示例代码

```
<a href="page" style="text-decoration:none;display:block;">
    <span onclick="hide()">Hide me</span>
</a> 
```

由于**a**标签超出了跨度，因此无法单击它。我尝试了**z-index**但这没有用

* * *

## 回答 #1

> 赞同：60
> 
> 时间：2013-09-14T18:40:25.357

```
<a href="http://the.url.com/page.html">
    <span onclick="hide(); return false">Hide me</span>
</a> 
```

这是最简单的解决方案。

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2012-05-02T11:43:47.113

当您单击 时`hide me`，会触发**a**和**span单击。**由于页面正在重定向到另一个页面，因此您看不到`hide()`

您可以查看此内容以获得更多说明

[http://jsfiddle.net/jzn82/](http://jsfiddle.net/jzn82/)

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2016-03-31T16:41:19.113

找到答案。

我使用了一些样式来实现这一点。

```
<span 
   class="pseudolink" 
   onclick="location='https://jsfiddle.net/'">
Go TO URL
</span>

.pseudolink { 
   color:blue; 
   text-decoration:underline; 
   cursor:pointer; 
   } 
```

[https://jsfiddle.net/mafais/bys46d5w/](https://jsfiddle.net/mafais/bys46d5w/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-02T11:45:05.487

使用**onmouseup**

尝试这样的事情

```
 <html>
        <head>
        <script type="text/javascript">
        function hide(){
        document.getElementById('span_hide').style.display="none";
        }
        </script>
        </head>

        <body>
        <a href="page" style="text-decoration:none;display:block;">
        <span   onmouseup="hide()" id="span_hide">Hide me</span>
        </a>
        </body>
        </html> 
```

编辑：

```
 <html>
        <head>
        <script type="text/javascript">
        $(document).ready(function(){
         $("a").click(function () { 
         $(this).fadeTo("fast", .5).removeAttr("href"); 
        });
        });
        function hide(){
        document.getElementById('span_hide').style.display="none";
        }
        </script>
        </head>

        <body>
        <a href="page.html" style="text-decoration:none;display:block;" onclick="return false" >
        <span   onmouseup="hide()" id="span_hide">Hide me</span>
        </a>
        </body>
        </html> 
```

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2012-05-02T11:43:01.543

我会使用 jQuery 来获得您正在寻找的结果。那时您不需要使用锚标记，但如果您这样做了，它看起来像：

```
<a href="page" style="text-decoration:none;display:block;">

<span onclick="hide()">Hide me</span>

</a>

<script type='text/javascript' src='http://code.jquery.com/jquery-1.7.2.min.js' /
<script type='text/javascript'>
$(document).ready(function(){
     $('span').click(function(){
           $(this).hide();
     }
} 
```

* * *

## 回答 #6

> 赞同：-2
> 
> 时间：2012-05-02T11:44:21.717

你可以使用 jQuery

[http://jsfiddle.net/Bdqv7/](http://jsfiddle.net/Bdqv7/)

# actionscript-3 - 将分层数据网格与项目渲染器一起使用时出现滚动条问题

> ID：10412886
> 
> 赞同：0
> 
> 时间：2012-05-02T11:32:38.473
> 
> 标签：actionscript-3, flex4

我已经用项目渲染器完成了分层数据网格。一切正常。我有很多数据要显示在网格中，所以每次加载数据时都会显示滚动条。拖动滚动条时，项目渲染器无法正常工作，并且缺少一些数据列数据。我知道如何解决这个问题吗？

在这里找到图片[图片点击](http://i50.tinypic.com/242eumx.jpg)

请检查以下代码：- `width="100%" height="100%" textAlign="center" autoDrawBackground="false">

```
<fx:Script>
    <![CDATA[
        import com.hp.pmm.common.ImageLibrary;

        import mx.collections.ArrayCollection;
        import mx.controls.Alert;
        import mx.resources.ResourceManager;
        private var _data:Object;           

        override public function set data(value:Object):void
        {               
            super.data = value;
            var showButton:String= '';
            var i:int=0;
            var j:int=0;

            var showDataForChildren:String;

            if(value.hasOwnProperty("Data_Transfer")) 
            {               
                showButton = value.Data_Transfer;

                if (showButton == "Show_Button") {

                    startId.visible= true;
                    startId.includeInLayout= true;
                    abortId.visible= true;
                    abortId.includeInLayout= true;
                    imgStatus.visible=false;
                    lblStatus.visible= false;
                    imgStatus.includeInLayout= false;
                    lblStatus.includeInLayout= false;
                }else {
                    lblStatus.text = "--";
                    startId.visible= false;
                    abortId.visible= false;
                    startId.includeInLayout= false;
                    abortId.includeInLayout= false;
                    imgStatus.includeInLayout= true;
                    lblStatus.includeInLayout= true;

                }

            }
        }

        public function clickedOnStart(event:Event):void{

            var startEvent:Event = new Event("clickOnStartButton");
            var parent:EventDispatcher = parentDocument.parentDocument as EventDispatcher;
            if (parent != null)
            {
                parent.dispatchEvent(startEvent);
            }
        } 

        public function clickedOnAbort(event:Event):void{

            var abortEvent:Event = new Event("clickOnAbortButton");
            var parent:EventDispatcher = parentDocument.parentDocument as EventDispatcher;
            if (parent != null)
            {
                parent.dispatchEvent(abortEvent);
            }
        } 

    ]]>
</fx:Script>

<s:HGroup width="100%" gap="5" verticalAlign="middle" horizontalAlign="left" height="100%">
    <!--<mx:Image id="imgStatus"/>
    <mx:Label id="lblStatus" textAlign="left" showTruncationTip="true"  paddingTop="3"/>-->
    <s:HGroup verticalAlign="middle" horizontalAlign="center">              
        <mx:Button label="Start" id="startId" click="clickedOnStart(event)" width="40"  height="20"/>
        <mx:Button label="Abort" id="abortId" click="clickedOnAbort(event)" width="40"  height="20"/>
    </s:HGroup>
    <s:HGroup height="100%">    
            <mx:Image id="imgStatus"/>
            <mx:Label id="lblStatus" textAlign="left" showTruncationTip="true"  paddingTop="3" />
    </s:HGroup>

</s:HGroup> 
```

`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-02T11:46:12.423

在没有看到您的任何代码的情况下，我猜测这是项目渲染器工作方式的问题。它们被回收利用，过去也给我带来了问题。我敢打赌，您的数据在首次加载时会正确显示，并且在您开始滚动之前不会开始混乱。

看看这个谷歌搜索的结果：

[https://www.google.com/search?q=flex+spark+datagrid+virtual+layout&ie=utf-8&oe=utf-8&aq=t&rls=org.mozilla:en-US:official&client=firefox-a#hl= en&client=firefox-a&hs=L4Y&rls=org.mozilla:en-US%3Aofficial&sclient=psy-ab&q=flex+datagrid+itemrenderer+recycling&oq=flex+datagrid+itemrenderer+rec&aq=0A&aqi=q-A1&aql=&gs_l=serp.3.0。 33i29.347849.348490.2.350175.3.3.0.0.0.266.752.2-3.3.0...0.0.ULkB2IYzfzs&pbx=1&bav=on.2,or.r_gc.r_pw.r_cp.r_qf.,cf.osb&fp=fc477bf602 =979](https://www.google.com/search?q=flex+spark+datagrid+virtual+layout&ie=utf-8&oe=utf-8&aq=t&rls=org.mozilla:en-US:official&client=firefox-a#hl=en&client=firefox-a&hs=L4Y&rls=org.mozilla:en-US%3Aofficial&sclient=psy-ab&q=flex+datagrid+itemrenderer+recycling&oq=flex+datagrid+itemrenderer+rec&aq=0A&aqi=q-A1&aql=&gs_l=serp.3.0.33i29.347849.348490.2.350175.3.3.0.0.0.0.266.752.2-3.3.0...0.0.ULkB2IYzfzs&pbx=1&bav=on.2,or.r_gc.r_pw.r_cp.r_qf.,cf.osb&fp=fc4777bf82d127e8&biw=1600&bih=979)

编辑：添加以下代码以响应提供的示例代码

```
 if(value.hasOwnProperty("Data_Transfer")) 
        {               
            showButton = value.Data_Transfer;

            if (showButton == "Show_Button") {

                startId.visible= true;
                startId.includeInLayout= true;
                abortId.visible= true;
                abortId.includeInLayout= true;
                imgStatus.visible=false;
                lblStatus.visible= false;
                imgStatus.includeInLayout= false;
                lblStatus.includeInLayout= false;
            }else {
                lblStatus.text = "--";
                startId.visible= false;
                abortId.visible= false;
                startId.includeInLayout= false;
                abortId.includeInLayout= false;
                imgStatus.includeInLayout= true;
                lblStatus.includeInLayout= true;

            }

        }
        else
        {
            //set all values to your equivalent of no data
        } 
```

# android - 如何在android中使用triangle_strip绘制一个立方体

> ID：10412889
> 
> 赞同：0
> 
> 时间：2012-05-02T11:32:54.583
> 
> 标签：android

我被三角条卡住了。我知道什么是三角带，但在绘制立方体时遇到了问题。谁能告诉我如何在 opengl android 中使用 16 个顶点的 triangle_strip 绘制一个立方体。

# java - Java App中的日文字符

> ID：10412894
> 
> 赞同：0
> 
> 时间：2012-05-02T11:33:24.057
> 
> 标签：java, jbutton, jlabel

我正在尝试将日文字符放入 jLabels 和 jButtons 中，但我遇到了一个问题，因为在我的开发机器上它工作正常，但如果我将 jar 带到其他计算机上则不起作用。

我试过改变字体，也试过这个：[Java GUI 中的日文字体，](https://stackoverflow.com/questions/2681357/japanese-fonts-in-a-java-gui)但我无法达到我的目标。

如果有帮助，我正在使用 NimbusLookAndFeel，并且我尝试更改
Label.font。

谢谢！

# php - PHP gd库，如何在现有PNG图像上画线

> ID：10412895
> 
> 赞同：0
> 
> 时间：2012-05-02T11:33:29.423
> 
> 标签：php, gd

也许有人可以帮助我，因为我被困在这里。所以我有 zem.png 大小为 560x225 的图像。它具有透明背景。我需要用 gd 库从 x,y 到 x1,x2 画线（我需要画 5-7 条线，但如果能得到一个如何画一条线的简单例子就完美了）。

这是我的透明图像的创建方式：

```
// Kuriame paveiksleli pasinaudodami GD library keliams tarp miestu pavaizduoti
$im = imagecreatetruecolor(560, 225);
$red = imagecolorallocate($im, 255, 0, 0);
$black = imagecolorallocate($im, 0, 0, 0);

// Make the background transparent
imagecolortransparent($im, $black);

// Issaugome paveiksleli
imagepng($im, './zem.png');
imagedestroy($im); 
```

创建此图像后，我将其用作表格或 div 的背景图像。我的桌子 ir div 被分成 x - 35 个块，y 25 个块。

我选择了 4 个点或 4 个块来放置其他图像，这就是我生成这些 rondom 块的方式：

```
$x = rand(1, 35);
$y = rand(1, 25);
$x2 = rand(1, 35);
$y2 = rand(1, 25);
$x3 = rand(1, 35);
$y3 = rand(1, 25);
$x4 = rand(1, 35);
$y4 = rand(1, 25); 
```

单个块大小为 16x9。而且我需要从每个生成的块到其他块绘制一条线（作为代表城市的道路），所以我必须将我的 x (x2,x3..) 乘以 16 和我的 y 乘以 9 才能准确地知道线的正确坐标起点和终点。所以我这样做：

```
// Breziame kelius
$kordinate = $x * 16;
$kordinate2 = $y * 9;
$kordinate3 = $x2 * 16;
$kordinate4 = $y2 * 9; 
```

好的，我现在有一条线的坐标。这就是我被困住的地方。我尝试了很多例子，人们预先创建了 funkcions 等。但我仍然无法使用 php gd 库画一条线。所以也许有人可以提出一些建议？要在图像创建代码中添加一些东西，或者只是将其删除并留下空白透明图像并打开它然后画一条线......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-05-02T02:11:30.880

当我制作表格或地图图像时，我总是准备一个类和函数。我不确定它是否有帮助，但这是我的示例代码。您可以将此文件命名为 GridTb.php 并运行它。

```
 <?php
header('Content-type: image/png');
$GridTb = new GridTb();
$GridTb->pngfile(330, 700);

class GridTb {

    function pngfile($width, $height) {

        define("WIDTH", $width);
        define("HEIGHT",$height);

        $png_image = imagecreate(WIDTH, HEIGHT);

        imagecolorallocate($png_image, 255, 255, 255);
        imagesetthickness($png_image, 1);
        $black = imagecolorallocate($png_image, 0, 0, 0);

        $x = 0;
        $y = 0;
        $w = imagesx($png_image) - 1;
        $z = imagesy($png_image) - 1;
        //basic square frame
        imageline($png_image, $x, $y, $x, $y + $z, $black);
        imageline($png_image, $x, $y, $x + $w, $y, $black);
        imageline($png_image, $x + $w, $y, $x + $w, $y + $z, $black);
        imagerectangle($png_image, $x, $y + $z, $x + $w, $y + $z, $black);

        $wid = 30;
        // $h=40;
        for ($row = 0; $row < 10; $row++) {

            imageline($png_image, $wid, HEIGHT, $wid, 0, $black);
            $wid+=30;
            imageline($png_image, $wid, HEIGHT, $wid, 0, $black);

            for ($h = 40; $h < 701; $h++) {

                $h2 = array(60,200,150,150,100);
                imageline($png_image, WIDTH, $h, 0, $h, $black);
                $h+=60;
                imageline($png_image, WIDTH, $h, 0, $h, $black);
                $h+=200;
                imageline($png_image, WIDTH, $h, 0, $h, $black);
                $h+=150;
                imageline($png_image, WIDTH, $h, 0, $h, $black);
                $h+=150;
                imageline($png_image, WIDTH, $h, 0, $h, $black);
                $h+=100;
                imageline($png_image, WIDTH, $h, 0, $h, $black);
                //sum of $h = 700
            }
        }
        imagepng($png_image);
        imagedestroy($png_image);
    }

}

?>
<IMG src="GridTb.php"> 
```

# css - 在 CSS 中移动第一个 div 出现在第二个下

> ID：10412896
> 
> 赞同：5
> 
> 时间：2012-05-02T11:33:41.817
> 
> 标签：css

我的 html 代码如下所示：

一个**包装 div**（百分比宽度，向左浮动）包含：

1.  一个 div 包含文本和链接；
2.  一个包含图像的 div；

问题：我想**保持上面的编码顺序**，但为了用户体验，我想使用 CSS 反转 div 顺序以获得如下内容：

*注意：包装器 div 是 20%，向左浮动，然后是该页面上的 4 个其他类似 div。*

![使用 CSS 反转 div 的顺序](../Images/4664fa236b4aa99283d16ac87a28831a.png)

泰！

这是小提琴链接：

[http://jsfiddle.net/sexywebteacher/4sbQf/](http://jsfiddle.net/sexywebteacher/4sbQf/)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-02T11:44:22.427

[http://jsfiddle.net/QGyNN/](http://jsfiddle.net/QGyNN/)

HTML

```
<div id="wrapper">
    <div id="txt">
    </div>
    <div id="img">
    </div>
</div>​ 
```

CSS

```
div#wrapper
{
    height:100px;
    width:60px;
    border:1px solid black;
    position:relative;
}
div#txt, div#img
{
    position:absolute;
    margin: 5px;
    width:50px;
}
div#img
{
    top:0px;
    height: 60px;
    border:1px solid red;
}
div#txt
{
    bottom:0px;
    height:20px;
    border:1px solid green;
}​ 
```

# events - Easeljs 容器事件监听器

> ID：10412898
> 
> 赞同：0
> 
> 时间：2012-05-02T11:33:57.487
> 
> 标签：events, containers, stage, easeljs

我创建了 Container，将 onPress 函数附加到它，然后将它作为 Child 添加到舞台。

然后清除舞台（所以那里不再有这样的孩子），更新它。

但 onPress 仍在工作。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-07T02:07:14.210

你做了什么清除舞台？

```
stage.removeAllChildren() 
```

通过检查确保您的舞台没有子级：

```
console.log(stage.getNumChildren()); 
```

如果您想删除 onPress 侦听器，我只需执行以下操作：

```
container.onPress=null; 
```

这可能不是禁用它的最佳方法，但它对我有用。

# iphone - 用于 magento WSDL 的 SudzC 无法正常工作

> ID：10412900
> 
> 赞同：1
> 
> 时间：2012-05-02T11:34:04.243
> 
> 标签：iphone, objective-c, ios, magento, sudzc

1.  我正在使用 SudzC 为 WSDL 的 Objective-c 生成 API。问题是结果只包含空标签。

    我找到了一个（临时！）解决方案，我得到 NSData 对象（SoapRequest 的，它保存从服务器获取的数据），将其转换为 String，即 XML，然后将其解析为 NSDictionary 或 NSArray。但是现在这个解决方案行不通了。

2.  除了使用 CXMLNode 之外，没有办法初始化 SudZC 创建的类的对象。（当我看到其他正在玩这些东西的例子时，我感觉很糟糕）

    例如，如果我想从服务器获取产品，我必须传递一个过滤器的对象，但是要创建一个过滤器的实例，我需要一个 CXMLNode，（我试图创建包含纯 xml 的 CXMLDoc，然后获取 CXMLElement ，然后是 CXMLNode，并将其传递给此，但没有工作）。有没有办法处理这些问题？

3.  我听说过[multi-call](https://stackoverflow.com/a/8794234/1369591)，如何在 Objective-c 中实现它？

# iphone - 在 UILabel 中标记滚动文本

> ID：10412907
> 
> 赞同：-1
> 
> 时间：2012-05-02T11:34:41.560
> 
> 标签：iphone

我想在中心的滚动标签中设置文本，任何人都可以帮助我解决这个问题

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-02T11:37:25.223

这很简单：

```
myLabel.textAlignment = UITextAlignmentCenter; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-02T11:43:25.067

阅读[CALayer 类参考](https://developer.apple.com/library/mac/#documentation/graphicsimaging/reference/CALayer_class/Introduction/Introduction.html)。您可以在此处找到有关多个动画的详细信息。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-02T11:54:41.797

使用此代码我认为这对您有用。

```
UILabel *compete_Label=[[UILabel alloc]initWithFrame:CGRectMake(150, 150, 60, 20)];
[compete_Label setText:@"Compete"];
compete_Label.backgroundColor=[UIColor clearColor];
[compete_Label setFont:[UIFont fontWithName:@"Helvetica-Bold" size:12]];
compete_Label.textColor=[UIColor whiteColor];
[scrollviewobject addSubview:compete_Label]; 
```

# java - 在jsf中以2点十进制格式显示数字

> ID：10412908
> 
> 赞同：17
> 
> 时间：2012-05-02T11:34:42.370
> 
> 标签：java, jsf-2, richfaces, converter

我正在使用 JSF 2 和 RichFaces 3。在下图中，数字显示为数据库中的数字。

![在此处输入图像描述](../Images/a107b874189831161b66fe774e276c29.png)

但是我想将它们显示为`6749395.20`好像存在分数部分并且`5095138.00`没有分数部分一样。

到目前为止，我已经尝试过这样的事情。

```
 <rich:column>
    <f:facet name="header">
        <h:outputText value="Total Amount"/>
    </f:facet>
    <h:outputText value="#{rr[2]}">
        <f:convertNumber type="number" groupingUsed="true" minFractionDigits="2" pattern="#0.00"/>
    </h:outputText>
 </rich:column> 
```

实际上我将它们全部展示在一起，但我已经尝试将它们全部作为所有可能的组合与`type`,`groupingUsed`和.`minFractionDigits``pattern`

为什么它不起作用？这是如何引起的，我该如何解决？

* * *

## 回答 #1

> 赞同：44
> 
> 时间：2012-05-02T12:29:22.603

如果值根本不是 a ，则可能发生这种情况[`Number`](http://docs.oracle.com/javase/6/docs/api/java/lang/Number.html)，例如 a `String`。然后，您基本上对它所代表的数据使用了错误的类型。要在 Java 中表示货币，您应该使用[`BigDecimal`](http://docs.oracle.com/javase/6/docs/api/java/math/BigDecimal.html). 另外，请确保数据库表中的类型正确，即它不应该是varchar，而应该是decimal。

一旦你修复了数据类型，它`<f:convertNumber>`就会按照你告诉它的方式工作。请注意，该`pattern`属性将覆盖`groupingUsed`and `minFractionDigits`。您应该使用 the`pattern` **或**other。此外，`type="number"`已经是默认设置，因此可以将其删除。

所以，要么使用

```
<f:convertNumber pattern="#0.00" /> 
```

或者

```
<f:convertNumber groupingUsed="true" minFractionDigits="2" /> 
```

请注意，它们生成不同的格式。您可能希望将分组设置为`false`.

您也可以使用`type="currency"`，然后它会根据以下自动应用正确的模式`UIViewRoot#getLocale()`：

```
<f:convertNumber type="currency" /> 
```

另请参阅[标记库文档](http://docs.oracle.com/javaee/6/javaserverfaces/2.1/docs/vdldocs/facelets/f/convertNumber.html)和[`DecimalFormat`](http://docs.oracle.com/javase/6/docs/api/java/text/DecimalFormat.html)javadoc。

# xmpp - x-google-token 的有效性

> ID：10412909
> 
> 赞同：1
> 
> 时间：2012-05-02T11:34:45.183
> 
> 标签：xmpp, authentication, access-token

参考[这篇](https://stackoverflow.com/q/6194899/199675)文章。根据帖子，一切对我来说都很好，但我仍然怀疑身份验证令牌的有效性。该令牌是否有效？两天后我尝试使用相同的令牌登录，它对我有用。

# php - 即使打开输出缓冲，似乎也无法强制下载图像

> ID：10412911
> 
> 赞同：0
> 
> 时间：2012-05-02T11:34:48.020
> 
> 标签：php, image, http-headers

好的，这是我的代码：

```
$file='dir/xxx/'.$images[0].'.jpg';
header('Content-Description: File Transfer');
header('Content-Type: application/octet-stream');
header('Content-Disposition: attachment; filename="'.basename($file).'.jpg"');
header('Content-Transfer-Encoding: binary');
header('Expires: 0');
header('Cache-Control: must-revalidate');
header('Pragma: public');
header('Content-Length: ' . filesize($file));
readfile($file); 
```

当我检查我的标题时，它们似乎`Content-Type:text/html`不是我想要的类型。它只是将图像原始数据输出到屏幕。请帮忙！

后来编辑： **我已经删除了每个 ob_* 控制函数，结果是一样的**。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-02T11:41:59.940

首先似乎没有理由缓冲您的标题，因此您可能会删除它们。

如果你不想，问题就来了。在冲洗之前清洁缓冲区。尝试删除`ob_clean()`. 此外，您可能必须使用`ob_flush()`而不是`flush()`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-02T11:41:38.170

ob_clean 销毁输出缓冲区，清除您的标题。

你也不需要那个`ob_*`功能，你可以安全地删除它

# java - JdbcTemplate 查询中的多个变量

> ID：10412913
> 
> 赞同：1
> 
> 时间：2012-05-02T11:35:08.937
> 
> 标签：java, variables, bind, jdbctemplate

我正在尝试运行如下查询

```
select col1 from table1 where col2 = ? and col3 = ? 
```

我想使用 JdbcTemplate

我可以这样写吗？

```
String query = new String("select col1 from table1 where col2 = ? and col3 = ?");
Object[] parameters = new Object[] {new String(col2), new String(col3)};

Object module = jdbcTemplate.queryForObject(query, parameters,"");

**Object module = jdbcTemplate.queryForObject(query, parameters,String.class);** is this right? 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-02T11:43:29.660

`JdbcTemplate`有该方法的几个重载版本。你打算打电话给哪一个？

您可以`RowMapper`为您感兴趣的对象类型添加一个实现。这就是我的建议。

```
public class YourRowMapper implements RowMapper<YourClass> {
    YourClass mapRow(ResultSet rs, int rowNum) throws SQLException {
        return new YourClass();  // map the ResultSet row here.
    }
} 
```

# python - Django - 从视图中获取 gravatar

> ID：10412916
> 
> 赞同：0
> 
> 时间：2012-05-02T11:35:13.260
> 
> 标签：python, django, gravatar

我在模板中使用[django-gravatar](https://github.com/nvie/django-gravatar)来显示我的用户的头像。

现在我想从视图中获取头像的 URI。
我尝试使用[模板标签功能](https://github.com/nvie/django-gravatar/blob/master/gravatar/templatetags/gravatar.py)，如

```
from gravatar import templatetags
_get_gravatar_id('test@test.com')
# or
gravatar_for_email('test@test.com') 
```

但是功能没有定义
我怎样才能访问它们？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-02T11:42:55.003

您应该导入它们。

```
from gravatar.templatetags.gravatar import _get_gravatar_id, gravatar_for_email 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-02T11:44:23.877

看起来该项目没有在 python 中公开 URL。它只提供那些标签。

如果您真的想要python中的图像URL，那么自己创建并不难。[Gravatar 网站](https://en.gravatar.com/site/implement/images/)有关于如何创建它的说明，但基本上是：

```
from django.utils.hashcompat import md5_constructor

email_hash = md5_constructor(email.strip().lower()).hexdigest()
url = "http://www.gravatar.com/avatar/%s" % email_hash 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-12-22T00:11:55.617

我还想生成视觉上令人愉悦的、抽象的、特定于用户的用户个人资料图像。以 Sionade21 的回答作为我的指导，我按如下方式实现了它。我不得不调整 Sionade21 的答案，因为 hashcompat 在 1.5 中已弃用。

视图.py：

```
from hashlib import md5

def my_view(request):
    email_hash = md5(my_user.email.strip().lower()).hexdigest()
    avatar_url = "http://www.gravatar.com/avatar/%s" % email_hash + 
                 "?s=35&d=identicon&r=PG" 
```

模板：

```
<img src={{ avatar_url; }}</img> 
```

这很好用。

例如：[http ://www.gravatar.com/avatar/7c40983cf4dd3b13108bc427025326c0?s=35&d=identicon&r=PG](http://www.gravatar.com/avatar/7c40983cf4dd3b13108bc427025326c0?s=35&d=identicon&r=PG)

我更进一步，将 avatar_url 作为用户属性保存/存储在我的数据库中，而不是每次都即时生成它。我希望这可以帮助下一个偶然发现这个问题/答案的人。

# jsf - Weblogic 11g (10.3.5.0) 上 JSF2 的后备工厂失败

> ID：10412922
> 
> 赞同：0
> 
> 时间：2012-05-02T11:35:47.020
> 
> 标签：jsf, weblogic, el

我有一个工作的 JSF2 应用程序，它通常在 Tomcat6/7 上运行。由于它现在还需要在 weblogic 上运行，所以我对 projectsetup 进行了一些更改，包括将 el-impl-2.2.jar 添加到我的战争的 WEB-INF/lib 中。

我还添加到 web.xml：

```
<context-param>
  <param-name>com.sun.faces.expressionFactory</param-name>
  <param-value>com.sun.el.ExpressionFactoryImpl</param-value>
</context-param> 
```

weblogic.xml 部署描述符包含：

```
<container-descriptor>
    <prefer-web-inf-classes>true</prefer-web-inf-classes>
</container-descriptor> 
```

虽然在 Tomcat 中一切仍然完美，但此设置在 wls 中失败：

```
[HTTP:101216]Servlet: "Faces Servlet" failed to preload on startup in Web application: "app.war". java.util.MissingResourceException: Can't find resource for bundle java.util.PropertyResourceBundle, key severe.no_factory_backup_failed at 
java.util.ResourceBundle.getObject(ResourceBundle.java:393) at
java.util.ResourceBundle.getString(ResourceBundle.java:353) at 
javax.faces.FactoryFinder$FactoryManager.getFactory(FactoryFinder.java:1002) at 
javax.faces.FactoryFinder.getFactory(FactoryFinder.java:316) at 
javax.faces.webapp.FacesServlet.init(FacesServlet.java:302) at
weblogic.servlet.internal.StubSecurityHelper$ServletInitAction.run(StubSecurityHelper.java:299) at
weblogic.servlet.internal.StubSecurityHelper$ServletInitAction.run(StubSecurityHelper.java:250) at
weblogic.security.acl.internal.AuthenticatedSubject.doAs(AuthenticatedSubject.java:321) at
weblogic.security.service.SecurityManager.runAs(SecurityManager.java:120) at 
weblogic.servlet.provider.WlsSubjectHandle.run(WlsSubjectHandle.java:57) at 
weblogic.servlet.internal.StubSecurityHelper.initServletInstance(StubSecurityHelper.java:94) at 
weblogic.servlet.internal.StubSecurityHelper.createServlet(StubSecurityHelper.java:82) at 
weblogic.servlet.internal.StubLifecycleHelper.createOneInstance(StubLifecycleHelper.java:74) 
at weblogic.servlet.internal.StubLifecycleHelper.<init>(StubLifecycleHelper.java:60) at 
weblogic.servlet.internal.StubLifecycleHelper.<init>(StubLifecycleHelper.java:34) at
weblogic.servlet.internal.ServletStubImpl.initStubLifecycleHelper(ServletStubImpl.java:638)
at weblogic.servlet.internal.ServletStubImpl.prepareServlet(ServletStubImpl.java:579) at 
```

有没有人遇到过类似的问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-04T11:31:30.673

事实证明，将 el-api.jar 和 el-impl.jar 包含到我的项目中对我来说是一种解决方案。此外，我必须在 weblogic.xml 中指定这些包需要首先从我的战争中加载，如下所示：

```
 <prefer-application-packages>
        <package-name>com.sun.el.*</package-name>
        <package-name>javax.el.*</package-name>
    </prefer-application-packages> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-04T06:50:58.070

我不确定这是否是正确的做事方式。在我看来，您缺少 WLS 的 DI 绑定。如果您比较 wlserver_10.3\common\deployable-libraries\jsf-2.0.war\WEB-INF\lib\ 中的可部署库，您会看到在升级到 JSF2 的战争中必须提供什么。最值得注意的是，您的设置中缺少 DI 绑定。

试试看。

# c++ - 使用 iOS 或 c/c++ 访问 SVN 或远程 Git 存储库等

> ID：10412924
> 
> 赞同：0
> 
> 时间：2012-05-02T11:35:54.183
> 
> 标签：c++, ios, git, svn

我想知道是否有任何可用于 iOS（或 c/c++）的库，允许人们编写一个可以访问 git 存储库的应用程序。诸如访问文件、提交和上传文件之类的事情。

我为 iOS 编写了一个语法高亮文本编辑器，现在 Apple 似乎阻止了任何使用 Dropbox 的新应用程序，我认为是时候让它与 svn/git 一起工作了，但因为我使用 git 多于 svn 它可能值得先看看这些。

所以，是的，任何可用于方便地访问 git/svn 存储库的库？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-02T11:40:15.097

[libgit2](http://libgit2.github.com/)怎么样？
它的功能并不完整，但我想值得一看。

# c# - 使用字符串作为 linq 查询的属性

> ID：10412925
> 
> 赞同：4
> 
> 时间：2012-05-02T11:36:14.180
> 
> 标签：c#

> **可能重复：**
> [LINQ：orderby 与动态字符串参数](https://stackoverflow.com/questions/2728340/linq-orderby-with-dynamic-string-parameter)

我正在使用 OrderBy() 子句对 IEnumarable 进行排序。我有一个字符串列表，其值包含我想要排序的字段。现在我为每个属性名称使用一个 switch 语句。

```
 swich (propertyname)
    case "name":
      list = list.OrderBy(l=>l.name).ToList();
      break;
    case "property":
      list = list.OrderBy(l=>l.property).ToList();
      ..... 
```

有没有简单的解决方案在 orderby 子句中使用字符串“propertyname”作为属性？

正如我所做的那样，我得到了一个远非理想的解决方案。不仅对每个属性进行编码需要更多的工作，而且如果将来添加任何属性，此更新将在我正在编写的函数中被遗忘。

希望有人有更好的解决方案。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-02T11:38:54.020

```
var list = new List<MyClass>();

// Gets an object to give us access to the property with the given name of type MyClass
var propertyInfo = typeof(MyClass).GetProperty(propertyName);

// Each item is ordered by the value of the property
list = list.OrderBy(x => propertyInfo.GetValue(x, null)).ToList(); 
```

解释谓词：

```
var xPropVal = propertyInfo.GetValue(x, null); 
```

使用属性信息对象，您可以获得对象 x 的值，参数为空。在这种情况下，参数将用于索引器，因为这是一个属性信息对象。

但是由于本例中的属性都是简单的属性，所以第二个参数应该是 null 或者是一个空的对象数组。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-02T11:40:56.033

最简单的方法是查看 Microsoft 提供的 Dynamic Linq 示例。Scott Guthrie 在这里有一篇关于它的博客文章：[http://weblogs.asp.net/scottgu/archive/2008/01/07/dynamic-linq-part-1-using-the-linq-dynamic-query-library。 aspx](http://weblogs.asp.net/scottgu/archive/2008/01/07/dynamic-linq-part-1-using-the-linq-dynamic-query-library.aspx)

你可以简单地这样做：

```
string propertyname = ...
list.OrderBy(propertyname).ToList(); 
```

# android - NFC Android：从 NdefMessage 中获取价值

> ID：10412928
> 
> 赞同：1
> 
> 时间：2012-05-02T11:36:28.187
> 
> 标签：android, nfc, mifare

我在搞乱一些标签（Mifare 经典）

我已经用 nxp 应用程序 tagwriter 以纯文本形式将消息写入标签。

以下代码是我到目前为止所拥有的：

```
 ** Called when a new nfc interaction/intent is fired */
public void onNewIntent(Intent intent) {
    NdefMessage[] msgs = null;
    if(intent.equals(NfcAdapter.ACTION_NDEF_DISCOVERED)){
        Parcelable[] rawMsgs = intent.getParcelableArrayExtra(NfcAdapter.EXTRA_NDEF_MESSAGES);
        if(rawMsgs!=null){
            msgs = new NdefMessage[rawMsgs.length];
            for(int i=0;i<rawMsgs.length;i++){
                msgs[i] = (NdefMessage) rawMsgs[i];
            }
        }
    } else {
        Log.e(TAG, "Other intent then NDEF_DISCOVERED");
    } 
```

我不知道从这一点去哪里，有人能指出我正确的方向吗？

我想读取这些消息中的值，我已经知道一个 ndefmessage 包含 ndefrecords，但是我如何确定哪个记录是我需要的记录？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-02T21:20:53.830

第一条消息的第一条记录的简单示例：

```
NdefRecord[] recs = msgs[0].getRecords();
byte[] type = recs[0].getType();
byte[] value = recs[0].getPayload(); 
```

当您知道类型时，您可能能够解释`value`字节。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-05-02T12:27:11.377

Android 内置 SDK 目前几乎不支持解析 NDEF 消息和记录。

我已经编写了一个[Eclipse 插件](http://nfc-eclipse-plugin.googlecode.com)，用于在 Android 上开始使用 NFC（NDEF），它基于[nfctools](https://github.com/grundid/nfctools)，它可以读取和写入各种 NDEF 记录，如上面的 NdefMessage - 所以你会看到 POJO 而不是字节数组 :-)

还可以尝试[Android 的 NDEF 工具](http://code.google.com/p/ndef-tools-for-android/)。

# function - MATLAB 名称冲突：“参数数量错误”

> ID：10412929
> 
> 赞同：5
> 
> 时间：2012-05-02T11:36:35.207
> 
> 标签：function, matlab

似乎我的 MATLAB 名称与我的一个名为“annotation”的变量和内置的 MATLAB 函数“annotation”发生冲突。

在我的函数中，我正在加载一个包含变量注释的 .mat 文件，然后尝试将其用作另一个函数的参数。一个最小的工作示例如下所示：

```
function test()

    filenames = { 'file1.mat', 'file2.mat', 'file3.mat' };

    for i = 1:numel(filenames)
        in_file = char(filenames{i});
        out_file = strrep(in_file, '.mat', '_out.mat');

        prepare(out_file); % do something with the out file

        load(out_file);  % contains one variable named "annotation"
        which annotation % just to be sure

        other_function(annotation);
    end
end

function prepare(filename)
    annotation = rand(25, 1);
    save(filename);
end

function other_function(annotation)
    whos % just a stub - see whether it has been called
end 
```

现在，在我的函数准备中，我确保文件包含一个名为“annotation”的变量。当我在主函数的循环中加载它时，“which”命令告诉我它作为变量存在，但在调用 other_function 时，MATLAB 尝试调用函数“annotation”：

> 注释是一个变量。
> 
> ？？？在 71 处使用 ==> 注释时出错
> 
> 没有足够的输入参数
> 
> ==> 14 点测试中的错误
> 
> ```
>  other_function(annotation); 
> ```

我很困惑，因为我在程序的几个部分中使用了变量名“annotation”，也作为函数调用中的参数。我能想象的唯一解释是 MATLAB 以某种方式预编译了我的代码——在“编译时”，变量“注释”是不可见的。但是，在运行时可以从“which”命令的输出中看到它。

任何帮助将不胜感激！提前谢谢了。

注意：我使用的是 MATLAB 7.12.0 (R2011a)。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-02T14:19:40.113

这是一个非常模糊的问题！这是 Mathwork 的糟糕设计。我什至会称其为错误，看看他们是否同意很有趣。

`annnotation = 2;`简短的回答：您可以通过在代码行上方的任何位置添加该行来“修复”此问题`load(out_file);`。或者`annotation = "roger";`or `annotation = false;`，你注释什么类型的变量并不重要，只要你明确地强制它成为你代码中的一个变量。

您编写的代码没有明确引用变量`annotation`。 `annotation`恰好是您加载到函数工作区的 matlab 文件中的变量名称。不知何故，这不会引发运行时错误，它只是工作错误，我称之为错误，但 matlab 可能会说这是一个记录的限制。[在http://www.mathworks.com/help/techdoc/matlab_prog/f4-39683.html#f4-75258](http://www.mathworks.com/help/techdoc/matlab_prog/f4-39683.html#f4-75258)上查看他们的文档并告诉我您的想法。该文档似乎适用于嵌套函数，而您的 main 函数肯定不是。很明显，您的线`other_function(annotation)`应该在与它看到的正上方`annotation`相同的范围内看到。`which annotation`（我刚刚做了那个测试，它说`annotation is a variable`）。

这是一个显示问题的最小程序：

```
function test()
  prepare('test.mat'); % writes i
  load('test.mat');  % contains one variable named "annotation"

  which annotation
  other_function(annotation);
end

function prepare(filename)
  annotation = 42; % the answer is 42
  save(filename);
end

function other_function(poodle)
  disp(poodle);
end 
```

我邀请您使用该页面上的“报告错误”链接在[http://www.mathworks.com/support/bugreports](http://www.mathworks.com/support/bugreports)上将此作为错误报告提交！如果你不想，我会报告它，让我知道。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-02T11:57:04.940

这有点奇怪！我发现了同样的事情。基本上，工作区变量不应该在内部函数的范围内（尽管它们来自内部脚本）。

如果这样做`load(out_file)`，则将该文件的内容加载到工作区中。所以他们不应该在范围内，我相信。因此，我很惊讶`which(annotation)`将其称为变量，但对于`annotation`超出范围并不感到惊讶。（实际上，看起来 Matlab 确实将变量放在范围内。）

我认为你关于某种预处理的想法`annotation`听起来是合理的。例如，如果您替换`other_function(annotation)`为`eval('other_function(annotation);')`，那么它可能会起作用（尽管我并不是说您*应该*使用`eval`, 永远）。

解决此问题的最佳方法是执行以下操作：

```
data = load(out_file);
annotation = data.annotation; 
```

因此，加载`out_file`到结构中，然后从那里访问变量。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-11T07:55:27.700

这是（现在？）记录的行为：

[http://www.mathworks.com/help/matlab/import_export/troubleshooting-loading-variables-within-a-function.html](http://www.mathworks.com/help/matlab/import_export/troubleshooting-loading-variables-within-a-function.html)

# php - jquery中php标头的任何其他选项

> ID：10412931
> 
> 赞同：-1
> 
> 时间：2012-05-02T11:36:41.700
> 
> 标签：php, jquery, jquery-ui

我们是否有任何其他选项可以在另一个窗口中打开 url，如 jquery 对话框 ui 或其他具有相同功能的东西，如 PHP 的标题

```
header('Location: http://www.example.com/'); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-02T11:37:42.917

您可以使用javascript打开方法`window.open(URL)`

例如`window.open('http://stackoverflow.com','','width=400,height=600')`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-02T11:40:54.103

有点难以理解你在问什么，但这能满足你的需要吗？

```
<a href="http://www.stackoverflow.com/" target="_blank">Open SO in a new window.</a> 
```

# html - GET方法不发送数据

> ID：10412937
> 
> 赞同：0
> 
> 时间：2012-05-02T11:36:51.743
> 
> 标签：html, django, forms, search, pagination

我正在尝试在用 Django 编写的简单搜索和显示应用程序中使用分页。

我已经按照 Djangoproject 的[Pagination](https://docs.djangoproject.com/en/1.3/topics/pagination/)教程进行操作，但没有数据发送到服务器。

我以前`pdb.set_trace()`查看代码的输出，`GET`字典是空的。

这是模板和`URLs`文件中的代码：

**结果.html：**

```
<form method="GET" id="searchForm" action="/search/">
        <input type="text" id="billSearched" name="q_word">
        <input type="submit" value="{% trans "Look for" %}">
</form> 
```

**网址.py：**

```
urlpatterns = patterns('',
    url(r'^$','ps.views.bills',name="bills"),
    url(r'^i18n/', include('django.conf.urls.i18n')),
    url(r'^search/','ps.views.search',name="search"),) 
```

以及适用于此的视图**search.py​​：**

```
def search(request):
    import pdb
    pdb.set_trace()
    searchTerm = request.GET.get('q_word')
    if searchTerm == None:
        searchTerm = "test"
    found_bills = Bill.objects.filter(name__icontains = searchTerm)
    page = request.GET.get('page')
    paginator = Paginator(found_bills,25)
    try:
        current_page = paginator.page(page)
    except PageNotAnInteger:
        current_page = paginator.page(1)
    except (EmptyPage, InvalidPage):
        current_page = paginator.page(paginator.num_pages)
return render(request,'results.html',{"results":current_page,"term": searchTerm}) 
```

为什么没有数据发送？我也阅读了其他帖子，但那里的解决方案对我不起作用。他们建议使用 GET 字典中的 'q_word' 值，`request.GET.get('q_word')`或者`request.GET['q_word']`通过他们的答案，它应该可以工作，但对我来说不是。

我的错误在哪里？非常感谢您！

**更新：**

```
[02/May/2012 14:03:59] "GET / HTTP/1.1" 200 39694
Traceback (most recent call last):
  File "/home/radu/projects/psdemo/.venv/local/lib/python2.7/site-packages/django/core/servers/basehttp.py", line 284, in run
    self.finish_response()
  File "/home/radu/projects/psdemo/.venv/local/lib/python2.7/site-packages/django/core/servers/basehttp.py", line 324, in finish_response
    self.write(data)
  File "/home/radu/projects/psdemo/.venv/local/lib/python2.7/site-packages/django/core/servers/basehttp.py", line 403, in write
    self.send_headers()
  File "/home/radu/projects/psdemo/.venv/local/lib/python2.7/site-packages/django/core/servers/basehttp.py", line 467, in send_headers
    self.send_preamble()
  File "/home/radu/projects/psdemo/.venv/local/lib/python2.7/site-packages/django/core/servers/basehttp.py", line 385, in send_preamble
    'Date: %s\r\n' % http_date()
  File "/usr/lib/python2.7/socket.py", line 324, in write
    self.flush()
  File "/usr/lib/python2.7/socket.py", line 303, in flush
    self._sock.sendall(view[write_offset:write_offset+buffer_size])
error: [Errno 32] Broken pipe

----------------------------------------
Exception happened during processing of request from ('127.0.0.1', 59087)
Traceback (most recent call last):
  File "/usr/lib/python2.7/SocketServer.py", line 284, in _handle_request_noblock
    self.process_request(request, client_address)
  File "/usr/lib/python2.7/SocketServer.py", line 310, in process_request
    self.finish_request(request, client_address)
  File "/usr/lib/python2.7/SocketServer.py", line 323, in finish_request
    self.RequestHandlerClass(request, client_address, self)
  File "/home/radu/projects/psdemo/.venv/local/lib/python2.7/site-packages/django/core/servers/basehttp.py", line 570, in __init__
    BaseHTTPRequestHandler.__init__(self, *args, **kwargs)
  File "/usr/lib/python2.7/SocketServer.py", line 641, in __init__
    self.finish()
  File "/usr/lib/python2.7/SocketServer.py", line 694, in finish
    self.wfile.flush()
  File "/usr/lib/python2.7/socket.py", line 303, in flush
    self._sock.sendall(view[write_offset:write_offset+buffer_size])
error: [Errno 32] Broken pipe
---------------------------------------- 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-02T11:49:33.657

问题是提交时查询参数没有附加到 URL 的末尾。我建议您对表单使用以下语法：

```
<form id="searchForm" method="GET" action="/search/">
<fieldset>
<input type="text" id="billSearched" name="q_word">
<br />
<input type="submit" value="{% trans "Look for" %}">
</fieldset>
</form> 
```

`?q_word=search_term`这应该使您的 URL在您提交表单时以结尾。

`urls.py`看起来不错。

# javascript - 使用javascript激活ajaxtoolkit弹出模式没有成功

> ID：10412938
> 
> 赞同：0
> 
> 时间：2012-05-02T11:36:57.503
> 
> 标签：javascript, asp.net

我正在尝试使用 ajaxtoolkit 激活模式弹出窗口。我正在尝试使用 javascript 显示弹出窗口。但是，javascript 无法识别元素尽管在动态页面中创建的一切看起来都很好，并且 <%=PleaseWaitPopupModal.ClientID %> 已正确翻译为相应面板的正确名称。

有谁知道为什么 javascript 函数中的 x var 为空？？？

这些代码位于子页面内（即它们有一个母版页，所以我被迫使用 %= 东西）。

```
function btnSendClientClick() {
    var x = document.getElementById("<%=PleaseWaitPopupModal.ClientID %>");
    x.show();

<asp:Button ID="btnSend" runat="server"
OnClientClick="btnSendClientClick()" OnClick="btnSend_Click"
CausesValidation="true" Text="send" />

<asp:Button ID="btnStam3" runat="server" Text="" Style="display: none;" />
<ajaxToolkit:ModalPopupExtender runat="server" ID="PleaseWaitPopupModal" TargetControlID="btnStam3"
    PopupControlID="pnlPleaseWait" BackgroundCssClass="modalBackground" DropShadow="false"
    RepositionMode="RepositionOnWindowScroll">
</ajaxToolkit:ModalPopupExtender>

<asp:Panel ID="pnlPleaseWait" runat="server" Style="display: none;">
    <div style="margin: auto;">
        Please wait...
    </div>
</asp:Panel> 
```

任何帮助表示赞赏。先谢谢了。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-02T11:42:20.353

使用该`$find()`方法，如下所示：

```
$find('PleaseWaitPopupModal').show(); 
```

和

```
$find('PleaseWaitPopupModal').hide(); 
```

您可能需要做的另一件事是设置 BehaviourID：

```
BehaviourID="PleaseWaitPopupModal" 
```

# android - Android动态更改软键盘中的键

> ID：10412941
> 
> 赞同：1
> 
> 时间：2012-05-02T11:37:03.330
> 
> 标签：android, android-edittext, android-softkeyboard

我的自定义视图有一个问题，其中包含一个编辑文本和一个微调器。我使用 IMEoptions 添加了一个“下一步”按钮。根据微调器，edittext 键盘应包含“下一步”或“完成”键。

目前我使用以下方法解决了这个问题：

```
@Override
public void onItemSelected(AdapterView<?> adapterView, View view, int position, long id) {
    final Object item = adapterView.getItemAtPosition(position);
    if (item.equals(getString(STRING1))) {
    edittext.setImeOptions(EditOptions.IME_OPTIONS_NEXT);
    } else if(item.equals(getString(STRING2)){
    edittext.setImeOptions(EditOptions.IME_OPTIONS_ACTION_DONE);
    }
    edittext.setText(edittext.getText());
     //This updates the edittext but is very much an ugly hack. 
     //Is there another way to update this? invalidate() and forceLayout() 
     //does not do the trick
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-02T07:40:42.870

替代解决方案。

```
edittext.setInputType(InputType.TYPE_CLASS_TEXT); 
```

如此处所述： [单击按钮后更改键盘布局](https://stackoverflow.com/questions/9480105/change-the-keyboard-layout-after-a-button-click)

# javascript - jPlayer CirclePlayer 多个实例

> ID：10412943
> 
> 赞同：1
> 
> 时间：2012-05-02T11:37:06.863
> 
> 标签：javascript, html5-audio, jplayer, multiple-instances

我想知道如何在网页上设置 jPlayer 的 circleplayer 的多个实例。一个将播放 .mp3 编码的 m3u 流，另一个将循环播放静态 .mp3 文件。

这是目前正在开发的网页：[Linky McLinkLink](http://ovalbenchmark.webs.com)

请忽略除玩家以外的网站的样式、定位和一般状态，以及现在大部分只是图像的事实。我认为最好不要将数千行代码粘贴到该字段中，因此只需查看源代码。

红色（橙色？）播放器将播放 .mp3 文件，蓝色播放器将播放流。

jPlayer 在他们的网站上有一个多个实例音频播放器协同工作的[演示](http://www.jplayer.org/latest/demo-03/)，但它们不是使用略有不同代码的圆形播放器。对于我的生活，我无法弄清楚去哪里，而且我对 javascript 很垃圾，所以它让它变得更难了。

从演示页面我基本上想要播放器一和播放器三，但目前的问题如下：

*   橙色播放器不知道它想玩什么
*   我不认为他们演示的很好实现的播放一个/暂停其他功能正在工作，但我不知道。没有理由应该这样做，因为我没有把它写到任何地方，因为我不知道在哪里。

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-12T13:08:04.010

在他们的[存储库](https://github.com/maboa/circleplayer)中有[index.htm](https://github.com/maboa/circleplayer/blob/master/index.htm)和两个循环播放器。然而，问题在于对一个玩家的“播放”会引发“pauseOthers”事件[（circle.player.cs 第 99 行）](https://github.com/maboa/circleplayer/blob/master/js/circle.player.js#L99)。所以你必须稍微调整他们的源代码。我刚刚删除了第 99-101 行，它确实有效，但是需要进一步测试。

# mysql - 为什么这个 wordpress 代码会抛出一个空的 WPDB 错误？

> ID：10412948
> 
> 赞同：3
> 
> 时间：2012-05-02T11:37:28.597
> 
> 标签：mysql, wordpress

我正在[为 wordpress 编写一个提要阅读器插件](http://mattkatz.github.com/Wordprss)。我看到一个我无法弄清楚的数据库错误。首先，我[创建一个名为 user_entries 的表](https://github.com/mattkatz/Wordprss/blob/user_feeds/install_upgrade.php#L51)。然后我将一个[示例条目放入该表中](https://github.com/mattkatz/Wordprss/blob/user_feeds/install_upgrade.php#L119)。当[我尝试删除一个条目](https://github.com/mattkatz/Wordprss/blob/user_feeds/backend.php#L116)时，我的调试日志中出现了一个非常奇怪的错误。还没有外键，数据库上没有索引等。

> [2012 年 5 月 2 日 11:21:52] 查询的 WordPress 数据库错误 DELETE FROM wp_wprss_user_entries
> WHERE owner_uid = 2 AND feed_id = 2; 由 do_action、call_user_func_array、wprss_unsubscribe_feed、WprssFeeds->remove 制作

那么错误是什么？里面只是一片空白。这看起来不像复杂的 SQL，它在 phpmysql 查询窗口中运行良好。我现在不知道下一步该做什么，我希望人们能够退订订阅！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-03T02:17:52.477

弄清楚了！ `$wpdb->print_error()`即使没有错误，也会打印该错误字符串。因此，您必须明确检查查询是否返回 false - 而不是 0。

```
 if(false === $wpdb->query($sql)){
      $resp->uf_error = $wpdb->print_error();
    } 
```

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2012-05-02T13:08:41.810

尝试拆分您的查询，以便它只尝试从 1 WHERE 子句中删除..

IE：

```
DELETE FROM wp_wprss_user_entries WHERE owner_uid=2;
run query
DELETE FROM wp_wprss_user_entries WHERE feed_id=2;
run query 
```

米

# java - 在队列中查找已生成任务的策略

> ID：10412952
> 
> 赞同：0
> 
> 时间：2012-05-02T11:37:36.487
> 
> 标签：java, multithreading, task

我正在编写一个模块，其中将产生许多执行某些任务的线程。所以总的来说，我有一个“管理器”类，它为“解析器”类提供信息，该类使用线程池创建和提交一个“任务”。

解析器有一个线程池执行器，它有无界队列，我用它来检查是否已经产生了特定任务。如果队列中已经有任务的实例，我使用 ThreadPoolExecutor 将其删除并再次提交新任务。这是有意完成的，因为新任务会从“经理”带来新信息。

我正在使用 ThreadPoolexecutor 来查找任务是否已经在队列中。但我担心队列的性能，并认为哈希映射会是更好的选择，因为队列可能有超过 30000 个任务实例。

指导我选择合适的策略来查找队列中已经生成的任务。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-02T12:06:16.793

我不认为它会导致任何问题（除非你实现太复杂的 equals 实现）。我建议使用分析器运行测试，看看它是否是一个真正的问题......

但是，如果是，您可以创建自己的 BlockingQueue 实现（它可能作为构造函数参数传递给 ThreadPollExecutor）。通过这种方式，您可以创建 BlockingQueue（用于标准工作队列）和 HashSet（用于快速 contains(...) 测试）的某种混合实现。请记住这些集合上的所有操作的正确同步。所有操作都必须是原子的。

# android - 在 Xmpp 中从电子邮件（或其他信息）中查找联系人

> ID：10412960
> 
> 赞同：0
> 
> 时间：2012-05-02T11:38:02.867
> 
> 标签：android, xmpp, openfire, smack, asmack

我目前正在开发一个用于用户之间通信的`Android`应用程序。`XMPP`现在我需要添加一个从 Facebook 或手机联系人列表导入朋友的功能。
有谁知道这可能是如何实现的（也就是说，如果所有联系人都可用，如何找出哪些人正在使用我的应用程序以及他们的 JID 是什么）？

如果每个人都使用他们在 Facebook 上使用的相同电子邮件注册他们的帐户，并且您可以通过他们的电子邮件而不是他们的 JID 添加朋友，我可以看到它是如何完成的，但这似乎是一个愚蠢的假设，而且就我而言知道，您不能仅使用电子邮件添加用户。

我正在使用[asmack](http://code.google.com/p/asmack/)和[Openfire](http://www.igniterealtime.org/projects/openfire/)服务器。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-03T00:32:59.970

没有从电子邮件地址推断 XMPP 地址的标准方法。

某些服务允许将相同的地址用于电子邮件和 XMPP - 例如 gmail.com。检测给定域是否支持 XMPP 的一种方法是检查[SRV 记录](http://prosody.im/doc/dns#srv_records)的存在，另一种方法是检查它是否正在侦听端口 5222/5269。

尽管如此，即使给定一个电子邮件地址并且知道电子邮件主机也为 XMPP 提供服务，也不能保证 user1@example.com 是电子邮件和 XMPP 的同一用户。不要问我为什么它永远不会，但你不能做出假设。

你说你只需要检查你的应用程序的其他用户。您可以存储自己的数据库，将帐户的电子邮件地址映射到 JID。我同意你的观点，这并不理想——但这正是大多数服务的工作方式。包括 Facebook，除了他们有比你的电子邮件地址更多的数据......）。

# language-agnostic - 编程、应用程序和操作系统的时间准确性

> ID：10412961
> 
> 赞同：2
> 
> 时间：2012-05-02T11:38:04.387
> 
> 标签：language-agnostic, time, timing

这不是严格意义上的家庭作业问题，而是一个分支。

时间函数是如何在面向对象语言和命令式语言（如 C）中实现的？如果您要获得以纳秒为单位的时间戳并将其转换为字符串，那么时间不会总是不准确吗？

事实上，只要你做任何计算或使用计时数据，它现在不是不准确到某种未知的程度吗？这个假设正确吗？

您可以很容易地解决网络延迟问题，但是在发送数据之前本地呢？到目前为止，似乎每个被问到的人都得出结论，时间函数永远不会完全准确——这只是一种公认​​的不准确。

本质上，我要问的是如何实现现实世界的时间应用程序？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-14T16:51:15.597

其实功课！

我们称之为`time`进步的东西。很久以前，这东西甚至没有数字。只有行进的太阳和行进的星星在暗示时间。后来，特别是自从数字革命开始以来，数字被分配给`time`. 进步的时间伴随着递增的数字。不用多说所有不同的格式，我声明大多数这些方案在当时确实有一个起源。例如，Unix 纪元是 1970 年 1 月 1 日 00:00:00 UTC 时间。当然，这不是时间的开始，而是选择这样的虚拟起源以将数字放入合理的数据结构中。 `Back to you question:`我们是否能够捕获当前时间？不，我们不是，我们永远也做不到。阅读任何时钟都会告诉我们光线离开时钟到达我们眼睛的时间。可能很少，但是……当有人问我们时间时，我们很乐意告诉我们。但是又发生了一些延迟，我相信我们会在不增加延迟的情况下告诉相同的时间。

了解物理学后，我们可以增加光线到达眼睛的延迟、大脑的延迟以及口语到达被问者耳朵所需的延迟。

但..........

那么如何实现一个真实世界的时间应用程序呢？没有`THAT TIME`。时间取决于你在哪里，时间取决于你周围的重力，时间取决于你的速度，等等。

但.........

并不是因为时间流逝而发生的事情。不，时间会让事情发生！

`Again back to your question:`通常在软件方面，关于时间的问题基本上是关于进度和/或同步的问题。您想与某物进行比较。`calls`基本上，提供此进度的资源有两种可能，称为`time`：`first call`将`time`在您拨打电话时返回。但是您需要考虑到稍后会得到结果。所以你得到的时间有点过去了。`second call`返回`time`调用返回的位置。这是一个稍微不同的实现，因为这样的函数必须知道它自己的服务需要多长时间。这可能只有通过一些校准才能实现。

这是两个主要的电话。

说到`resolution`（再次回到您的问题），我想排除将原子钟连接到您的计算机的选项。假设您拥有一台现成的超市计算机。它可能运行在几GHz。您可能观察到的最高频率可能是 CPU 频率。在说 4GHz 时，这样的频率将导致计数器在一纳秒内增加 4 次，即 250 皮秒的时间分辨率。所以通常你可能会说有亚纳秒级的分辨率。实际上，常用的高频计数器在 MHz 范围内，这将提供 100ns 单位范围内的分辨率。

但.......

这些高频可以用作时间的标尺吗？从短期来看，他们可以！但从长远来看，它要复杂得多，因为这些时间源必须与常见的时间源锁相，例如您的电脑时间。高频计数器确实有很大的误差，会导致许多 us/s 的相位漂移。这只能通过仔细校准来克服。适当的校准可以允许将高频计数器锁相到系统时间。

一旦你有一个精确到几微秒范围内的时间源，你可能会以完全不同的方式诊断代码的行为，因为你可以预测潜在的延迟。

总结（一种哲学方法）：

1.  时间让事情发生。
2.  时间`is`从不真实或代表真实价值
3.  任何与时间相关的值都代表过去的时间
4.  `actual time`在实践中没有这样的事情
5.  最后，正如您所说：（`Time can never be completely accurate`没有什么可以！）

可以在[Windos Timestamp Project](http://www.windowstimestamp.com/description)中详细了解 Windows 的高分辨率时间服务的实现。

# mysql - 计算大型 MYSQL 表中某一列中浮点值的平均值

> ID：10412974
> 
> 赞同：1
> 
> 时间：2012-05-02T11:39:01.840
> 
> 标签：mysql

我有一种情况，我需要计算特定列中所有值的平均值。我得到了这个有效的 SQL 语句：

```
SELECT SUM(`unitCost`)/COUNT(*) 
FROM `items` 
WHERE `itemID_FK`=%d 
```

我正在寻找有关如何提高效率的意见。此查询可能会导致必须读取大量记录。

`itemID_FK`我想知道在单独的表中维护平均值并在将记录添加到表时不断更新平均值是否会更有效`items`？

我在某处读到，拥有一个可以从数据库中的其他列或表计算或派生的列是违反数据库设计原则的。

编辑：

**列：**

```
instanceID    int(10) UN PK AI
userID_FK     int(11) UN
itemID_FK     int(11) UN
dateAdded     date
datePurchased date
listID_FK     int(11) UN
unitCost      decimal(11,2) UN zerofill
quantity      decimal(11,2) UN zerofill
unitID_FK     int(10) UN 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-02T11:43:22.537

这是一个非常基本的查询，您不太可能找到任何方法使其实际运行得更快。您可以使用一个`avg()`功能，尽管它可能不会更快。

至于将平均值保存在另一个表中：这*违反*了通常持有的数据库设计最佳实践，但这并不意味着您不能这样做。人们为了提高绩效而做出妥协；像这样的权衡是软件开发人员的股票和交易。这样做会使查询平均值的速度更快，但会牺牲程序的清晰度和在主表上执行插入、删除和更新的任何地方的一点性能。

# python - CustomTreeCtrl 弹出菜单绑定断言错误

> ID：10412975
> 
> 赞同：0
> 
> 时间：2012-05-02T11:39:08.570
> 
> 标签：python, wxpython, popupmenu

我正在创建某种项目资源管理器，就像您在 PyScripter 中看到的一样。问题是当我右键单击以显示弹出菜单时出现 AssertionError 。任何的想法？谢谢是提前。

```
class ProgramManager(wx.Panel):
  def __init__(self, parent):
    super(ProgramManager, self).__init__(parent, size = (300,500), style = wx.BORDER_NONE|wx.TB_TOP)
    self.SetMinSize((300,500))
    self.BackgroundColour = wx.WHITE
    self.Sizer = wx.BoxSizer(wx.VERTICAL)
    self.Layout = self.Sizer

    ## Set the ToolBar
    self.ToolBar = IPTToolBar(self)
    self.ToolBar.AddTool2(ID_NEW_PROGRAM, 'Creates a new project')
    self.ToolBar.AddTool2(ID_OPEN_PROGRAM, 'Open an existing project')
    self.ToolBar.AddTool2(ID_SAVE_PROGRAM, 'Save project')
    self.ToolBar.AddTool2(ID_SAVE_PROGRAM_AS, 'Save a copy of project')
    self.ToolBar.AddTool2(ID_CLOSE_PROGRAM, 'Close the program')
    self.Layout.Add(self.ToolBar, flag = wx.EXPAND)
    self.ToolBar.Realize()

    ## Set the Tree
    self.FilePath = ''
    self.Tree = CT.CustomTreeCtrl(self)
    self.Layout.Add(self.Tree, 1, wx.ALL|wx.EXPAND)

    ## Bind Events
    self.Bind(wx.EVT_CLOSE, self.OnClose, self)
    self.Bind(wx.EVT_TREE_ITEM_MENU, self.RClickMenu)

  def RClickMenu(self, Event):
    EvtObj = Event.GetItem()
    EvtObjData = EvtObj.GetData()
    if EvtObj.GetParent() == None:
      # Root Menu
      self.PopMenu = wx.Menu()
      self.PopMenu.Append(ID_NEW_PROGRAM, 'New Program', 'Create a New Program')
      self.PopMenu.Append(ID_OPEN_PROGRAM, 'Open Program', 'Open Existing Program')
      self.PopMenu.Append(ID_SAVE_PROGRAM, 'Save Program', 'Save Current Program')
      self.PopMenu.Append(ID_SAVE_PROGRAM_AS, 'Save Program As', 'Save a Copy of Current Program')
      self.PopMenu.Append(ID_CLOSE_PROGRAM, 'Close','Close Program')
      self.Tree.PopupMenu(self.PopMenu)
    elif EvtObjData == 'Files':
      self.PopMenu = wx.Menu()
      self.PopMenu.Append(ID_ADD_FILE, 'Add File', 'Add an Existing File From Hard Disk')
      self.PopMenu.Append(ID_ADD_CURRENT_FILE, 'Add Current File', 'Add Currently Selected File')
      self.PopMenu.Append(ID_ADD_SUBFOLDER, 'Add a Subfolder', 'Add a Subfolder')

      self.Tree.PopupMenu(self.PopMenu)
    elif EvtObjData == 'Configuration':
      self.PopMenu = wx.Menu()
      self.PopMenu.Append(wx.ID_EDIT, 'Edit', 'Edit the Configuration')
      self.Tree.PopupMenu(self.PopMenu)

    elif EvtObjData == 'Folder':
      self.PopMenu = wx.Menu()
      self.PopMenu.Append(ID_ADD_FILE, 'Add File', 'Add an Existing File From Hard Disk')
      self.PopMenu.Append(ID_ADD_CURRENT_FILE, 'Add Current File', 'Add Currently Selected File')
      self.PopMenu.Append(ID_ADD_SUBFOLDER, 'Add a Subfolder', 'Add a Subfolder')
      self.PopMenu.Append(ID_RENAME, 'Rename', 'Rename This Folder')
      self.PopMenu.Append(ID_REMOVE, 'Remove Folder', 'Remove This Folder and Its Contents')
      self.Tree.PopupMenu(self.PopMenu)
    elif os.path.isfile(EvtObjData):
      self.PopMenu = wx.Menu()
      self.PopMenu.Append(wx.ID_EDIT, 'Edit File', 'Edit This File')
      self.PopMenu.Append(ID_REMOVE, 'Remove File', 'Remove Currently Selected File')
      self.Tree.PopupMenu(self.PopMenu)

    self.PopMenu.Bind(wx.EVT_MENU, self.OnMenu, self.PopMenu)
    self.PopMenu.Destroy()

  def OnMenu(self, Event):
    pass 
```

错误代码是这样的

```
Traceback (most recent call last):
  File "L:\NUSAIPT\NUSAIPT.py", line 222, in RClickMenu
    self.PopMenu.Bind(wx.EVT_MENU, self.OnMenu, self.PopMenu)
  File "C:\Python27\lib\site-packages\wx-2.8-msw-unicode\wx\_core.py", line 3918, in Bind
    assert source is None or hasattr(source, 'GetId')
AssertionError 
```

在这里玩的小例子：

```
import wx, os, wx.lib.customtreectrl as CT

class CTTest(wx.Frame):
  def __init__(self, parent, *args, **kwargs):
    wx.Frame.__init__(self, parent, *args, **kwargs)
    self.Maximize(True)
    self.parent = parent
    self.BackgroundColour = wx.WHITE
    self.SetMinSize((800,600))
    self.Tree = CT.CustomTreeCtrl(self)
    ## Bind Events
    self.Bind(wx.EVT_CLOSE, self.OnClose, self)
    self.Bind(CT.EVT_TREE_ITEM_MENU, self.RClickMenu)
    self.NewTree()
    self.Show(True)

  def RClickMenu(self, Event):
    EvtObj = Event.GetItem()
    EvtObjData = EvtObj.GetData()
    if EvtObj.GetParent() == None:
      # Root Menu
      self.PopMenu = wx.Menu()
      self.PopMenu.Append(ID_NEW_TREE, 'New Tree', 'Create a New Tree')
      self.PopMenu.Append(ID_OPEN_TREE, 'Open Tree', 'Open Existing Tree')
      self.PopMenu.Append(ID_SAVE_TREE, 'Save Tree', 'Save Current Tree')
      self.PopMenu.Append(ID_SAVE_TREE_AS, 'Save Tree As', 'Save a Copy of Current Tree')
      self.PopMenu.Append(ID_CLOSE_TREE, 'Close Tree','Close Tree')
      self.Tree.PopupMenu(self.PopMenu)
    # Files Folder Menu
    elif EvtObjData == 'Files':
      self.PopMenu = wx.Menu()
      self.PopMenu.Append(ID_ADD_FILE, 'Add File', 'Add an Existing File From Hard Disk')
      self.PopMenu.Append(ID_ADD_SUBFOLDER, 'Add a Subfolder', 'Add a Subfolder')
      self.Tree.PopupMenu(self.PopMenu)
    # Run Configuration Menu
    elif EvtObjData == 'Configuration':
      self.PopMenu = wx.Menu()
      self.PopMenu.Append(wx.ID_EDIT, 'Edit', 'Edit the Configuration')
      self.Tree.PopupMenu(self.PopMenu)
    # Folder Menu
    elif EvtObjData == 'Folder':
      self.PopMenu = wx.Menu()
      self.PopMenu.Append(ID_ADD_FILE, 'Add File', 'Add an Existing File From Hard Disk')
      self.PopMenu.Append(ID_ADD_SUBFOLDER, 'Add a Subfolder', 'Add a Subfolder')
      self.PopMenu.Append(ID_RENAME, 'Rename', 'Rename This Folder')
      self.PopMenu.Append(ID_REMOVE, 'Remove Folder', 'Remove This Folder and Its Contents')
      self.Tree.PopupMenu(self.PopMenu)
    # File Menu
    elif os.path.isfile(EvtObjData):
      self.PopMenu = wx.Menu()
      self.PopMenu.Append(wx.ID_EDIT, 'Edit File', 'Edit This File')
      self.PopMenu.Append(ID_REMOVE, 'Remove File', 'Remove Currently Selected File')
      self.Tree.PopupMenu(self.PopMenu)

    self.Bind(wx.EVT_MENU, self.OnMenu, self.PopMenu)

  def OnMenu(self, Event):
    print 'OnMenu'
    EvtID = Event.GetEventId()
    print EvtID
    if EvtID == ID_NEW_TREE:
      self.NewProgram()

    if EvtID == ID_OPEN_TREE:
      self.OpenProgram()

    if EvtID == ID_SAVE_TREE:
      self.SaveProgram()

    if EvtID == ID_SAVE_TREE_AS:
      self.SaveProgramAs()

    if EvtID == ID_ADD_FILE:
      print 'Add File'

    if EvtID == ID_ADD_SUBFOLDER:
      print 'Add SubFolder'

    if EvtID == wx.ID_EDIT:
      print 'Edit'

    if EvtID == ID_RENAME:
      print 'Rename'

    self.PopMenu.Destroy()

  def NewTree(self):
    self.Tree.AddRoot('Root')
    Root = self.Tree.GetRootItem()
    self.Tree.InsertItemByItem(Root, None, 'Files', data = 'Files')
    self.Tree.InsertItemByItem(Root, None, 'Configuration', data = 'Configuration')
    self.Tree.ExpandAll()

  def OpenTree(self):
    print 'Open'

  def SaveTree(self):
    print 'Save'

  def SaveTreeAs(self):
    print 'Save As'

  def CloseTree(self):
    print 'Close Tree'

  def OnClose(self, Event):
    self.Destroy()

if __name__ == '__main__':
  App = wx.App()

  # The IDs
  ID_NEW_TREE = wx.NewId()
  ID_OPEN_TREE = wx.NewId()
  ID_SAVE_TREE = wx.NewId()
  ID_SAVE_TREE_AS = wx.NewId()
  ID_CLOSE_TREE = wx.NewId()
  # IDs of Program Manager
  ID_ADD_FILE = wx.NewId()
  ID_ADD_SUBFOLDER = wx.NewId()
  ID_RENAME = wx.NewId()
  ID_REMOVE = wx.NewId()

  Fr = CTTest(None, -1, 'Testing',(0,0))
  App.MainLoop() 
```

顺便说一句，我正在使用 Python2.7 和 wx2.8.12

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-02T15:01:31.247

菜单通常必须附加到框架或父级，所以我猜你需要将绑定语句更改为：

```
self.Bind(wx.EVT_MENU, self.OnMenu, self.PopMenu) 
```

如果这不起作用，请创建一个我们可以玩的小型可运行示例应用程序。有关详细信息，请参阅[http://wiki.wxpython.org/MakingSampleApps](http://wiki.wxpython.org/MakingSampleApps)。

# javascript - 使用 JavaScript 检测 css 对元素的更改

> ID：10412976
> 
> 赞同：1
> 
> 时间：2012-05-02T11:39:29.173
> 
> 标签：javascript, html, css, webkit

有没有办法通过 JavaScript 检测元素的 CSS 更改？

我已经尝试过 WebKitMutationObserver，虽然它接近我的需要，但它并没有实现我的目标。

这是正在发生的事情。

1.  我加载具有特定样式的页面
2.  我改变了页面的“主题”
3.  主题“引擎”将一个新的样式表附加到文档的头部——这个样式表会有一系列的样式重载。为简单起见，假设其中有一条规则说“将框'a'的背景颜色更改为'红色'”。

现在，由于我没有通过“class”或“style”属性更改元素的样式，因此观察者的事件“attributes: true”永远不会被触发。

我需要的是一种方法来检测元素背景的颜色是否已变为红色，然后执行某些功能。必须在**Webkit**中工作。

这甚至可能吗？

# asp.net-mvc - AntiForgeryToken 与使用 ViewModels 的 Jquery Ajax 调用？

> ID：10412980
> 
> 赞同：1
> 
> 时间：2012-05-02T11:39:56.757
> 
> 标签：asp.net-mvc, asp.net-mvc-3, jquery, antiforgerytoken

我在这里通读了关于让 AntiForgeryToken 与 Jquery ajax reuests 一起工作的内容，我基本上必须确保使用类似的东西在我的 post/ajax 调用中包含令牌

```
data: { 
        "__RequestVerificationToken":
        $("input[name=__RequestVerificationToken]").val() 
    }, 
```

但是...我正在使用 ViewModels 并创建我的视图模型对象，分配我的值，然后对其进行 JSON.stringify 处理并将其作为数据传递（如下所示）

```
 // Ajax call here
    // Make a view model instance
    var ajaxEditPermissionViewModel = new Object();
    ajaxEditPermissionViewModel.HasPermission = isChecked;
    ajaxEditPermissionViewModel.Permission = permission;
    ajaxEditPermissionViewModel.Category = category;
    ajaxEditPermissionViewModel.MembershipRole = role;

    // Ajax call to post the view model to the controller
    var strung = JSON.stringify(ajaxEditPermissionViewModel);

    $.ajax({
        url: '/Admin/Permissions/UpdatePermission',
        type: 'POST',
        dataType: 'json',
        data: strung,
        contentType: 'application/json; charset=utf-8',
        success: function (data) {
            ResetTableAfterAjaxCall();
            ShowSuccessNotification();
        },
        error: function (xhr, ajaxOptions, thrownError) {
            ShowUserMessage("Error: " + xhr.status + " " + thrownError);
            ResetTableAfterAjaxCall();
        }
    }); 
```

我有点困惑如何使用当前设置传递令牌？非常感谢任何建议。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-02T13:44:00.603

您觉得需要将结果字符串化是否有特定的原因？我们只是这样做..

```
 $.ajax({
        type: "POST",
        data: {
            permission: Permission, 
            // other fields
        }... 
```

有关如何使用这种传递参数的方式传递令牌的信息，请参阅本文：

[http://weblogs.asp.net/dixin/archive/2010/05/22/anti-forgery-request-recipes-for-asp-net-mvc-and-ajax.aspx](http://weblogs.asp.net/dixin/archive/2010/05/22/anti-forgery-request-recipes-for-asp-net-mvc-and-ajax.aspx)

# node.js - 如何在 node.js 中处理不同的错误类型

> ID：10412987
> 
> 赞同：2
> 
> 时间：2012-05-02T11:40:23.600
> 
> 标签：node.js, error-handling, callback

在节点世界中，错误对象作为第一个参数传递给回调。

区分节点中错误类型的正确方法是什么？

使用某些属性（.errorCode 或 .userNotFound）？

有单独的（继承错误的）类并使用 .constructor / instanceof？

我还缺少任何其他约定吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-20T02:19:12.850

你可以传递任何东西，只要它不是 null 或 undefined 它应该代表一个错误。

您可以以任何您喜欢的方式使用它，继承 Error 是一种方式，但您可以传递错误编号甚至错误字符串，这完全取决于您。

有点太“松散”恕我直言，但就是这样。

# facebook - 使用 Facebook API - SDK 获取我的 facebook 公共事件并在我的站点中显示

> ID：10412992
> 
> 赞同：1
> 
> 时间：2012-05-02T11:40:37.593
> 
> 标签：facebook, facebook-graph-api

我想在我的网站上展示我的公开活动。我使用下面的代码，但它返回一个空对象。

我的应用程序具有以下权限： user_events; rsvp_event, read_stream 我不会使用“offline_access”，它将被弃用权限。

我广泛阅读了 api 文档，但它缺乏实际的例子......

当我使用“静态令牌/$token_offline”时，它会正确返回事件。

```
// include SDK
if (!class_exists('Facebook'))
    require_once (THEME_FACEBOOK_SDK . '/src/facebook.php');

// params config
define('PROFILE_ID', 'XXXXXXXXXXX'); // my profile id
define('APP_ID', 'XXXXXXXXXXX'); // my application APP_ID in facebook
define('APP_SECRET', 'XXXXXXXXXXX'); // my application APP_SECRET in facebook

// create application instance
$facebook = new Facebook(array('appId' => APP_ID, 'secret' => APP_SECRET, 'cookie' => true));

// get graph API
function fetchUrl($url) {
    $ch = curl_init();
    curl_setopt($ch, CURLOPT_URL, $url);
    curl_setopt($ch, CURLOPT_RETURNTRANSFER, 1);
    curl_setopt($ch, CURLOPT_TIMEOUT, 20);
    $retData = curl_exec($ch);
    curl_close($ch);
    return $retData;
}

/*--- I do not want to use it (Generated by Graph API Explorer)
$token_offline = 'AAAD5V3tZBKEQBAAmAfxTb8ZAObX3h6LfSTZCilFneZCkc5YEF5T0SjLt6ZB9i7wQUuvaqhIandqzkiHivZAjYyzMsOiajPsNYZD';*/

// get app token
$graph_url = 'https://graph.facebook.com/oauth/access_token?client_id=' . APP_ID . '&client_secret=' . APP_SECRET . '&grant_type=client_credentials';

// app token
$app_token = fetchUrl($graph_url);    

// get events
$graph_url = 'https://graph.facebook.com/' . PROFILE_ID . '/events?' . $app_token; //$token_offline

var_dump(json_decode(fetchUrl($graph_url)));

/*
object(stdClass)#3947 (1) {
  ["data"]=>
  array(0) {
  }
}
*/ 
```

我将此代码用作临时解决方案，并想知道社区对此方法的看法。

```
// Get response Graph API. Note this wrapper function exists in order to circumvent PHP’s strict obeying of HTTP error codes. In this case, Facebook returns error code 400 which PHP obeys and wipes out the response.
function fetchUrl($URL) {
    $c = curl_init();
    curl_setopt($c, CURLOPT_RETURNTRANSFER, 1);
    curl_setopt($c, CURLOPT_URL, $URL);
    $contents = curl_exec($c);
    $err = curl_getinfo($c, CURLINFO_HTTP_CODE);
    curl_close($c);
    if ($contents)
        return $contents;
    else
        return false;
}

// In the start config only. Save in database the token generated by tools Graph API Explorer
//update_option('access_token_fb', 'AAAD5V3tZBKEQBAGTScYxCZAt3bWXJvzimsfWYAG0SWF40ffngLF03dU8T63gXWHJuiXLZClSoxzuC5UZAsXNDK5yQkQqBPXgAuJPZA3ZBjlgZDZD');

function get_events_facebook(){
    $profile_id = 'XXXXXXXXXXX'; // user id my profile facebook
    $app_id = 'XXXXXXXXXXX'; // app id 
    $app_secret = 'XXXXXXXXXXX'; // app secret

    // events user select
    $fql = "SELECT eid, name, pic, start_time, end_time, location, description FROM event WHERE creator={$profile_id} AND eid IN ( SELECT eid FROM event_member WHERE uid={$profile_id} ) ORDER BY start_time asc";

    // link graph API get events
    $api_url = 'https://graph.facebook.com/fql?q=' . urlencode($fql);

    // get token saved in the database 
    if($access_token = get_option('access_token_fb')) {

        // get events based in token saved in database
        $decoded_response = json_decode(fetchUrl($api_url . '&access_token=' . $access_token));

        // if response returned is error get new token based in old token database
        if (isset($decoded_response->error) && $decoded_response->error->type == "OAuthException") {

            // Client-side OAuth and Extending Access_Token Expiration Time through New Endpoint 
            $refresh_token = 'https://graph.facebook.com/oauth/access_token?client_id=' . $app_id . '&client_secret=' . $app_secret . '&grant_type=fb_exchange_token&fb_exchange_token=' . $access_token;

            // create variable $token and set token value
            parse_str(fetchUrl($refresh_token));

            // save new token in database
            update_option('access_token_fb', $access_token);

            // get events based in the new token
            return json_decode(fetchUrl($api_url . '&access_token=' . $access_token));
        }

        // events returned based in ancient token saved in database
        return $decoded_response;
    }

    // if no token saved in database
    return false;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-02T12:00:33.907

您需要请求用户访问令牌，而不是您现在请求的应用程序访问令牌。阅读带有示例的材料：[https ://developers.facebook.com/docs/authentication/server-side/](https://developers.facebook.com/docs/authentication/server-side/)

# sql - T-SQL，使用参数与前导数字进行字符串比较返回误报

> ID：10412993
> 
> 赞同：3
> 
> 时间：2012-05-02T11:40:41.870
> 
> 标签：sql, sql-server, tsql

我想知道是否有人可以解释这种行为？

```
DECLARE @RandomParam1 NVARCHAR
DECLARE @RandomParam2 NVARCHAR
DECLARE @RandomParam3 NVARCHAR
SET @RandomParam1 = '0HelloWorld'
SET @RandomParam2 = '9HelloWorld'
SET @RandomParam3 = '15HelloWorld'

select 1 where '0' = @RandomParam1  -- true
select 1 where '0' = '0HelloWorld'  -- false

select 1 where '9' = @RandomParam2  -- true
select 1 where '15' = @RandomParam3 -- false 
```

为什么带参数的字符串比较产生的结果与不带参数的结果不同？为什么它声称'0' = '0whatever'？

我知道可能是参数试图将其作为数字进行比较，但是最后一个示例也应该是正确的。

有任何想法吗？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-05-02T11:44:09.543

**默认长度**为1。您的`NVARCHAR`三个参数实际上都只包含一个字符。

如果您将声明更改为

```
DECLARE @RandomParam1 NVARCHAR(32)
DECLARE @RandomParam2 NVARCHAR(32)
DECLARE @RandomParam3 NVARCHAR(32) 
```

你会得到你所期望的行为。

[nchar 和 nvarchar](http://When%20n%20is%20not%20specified%20in%20a%20data%20definition%20or%20variable%20declaration%20statement,%20the%20default%20length%20is%201.)

> 如果在数据定义或变量声明语句中未指定 n，则默认长度为 1。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-02T11:46:26.820

您没有为变量指定长度，因此默认长度为 1。

```
DECLARE @RandomParam1 NVARCHAR(20)
DECLARE @RandomParam2 NVARCHAR(20)
DECLARE @RandomParam3 NVARCHAR(20) 
```

添加`LENGTH`到您的变量中。

# php - 如何在 zend 框架 2 中向 zend 注册表添加值？

> ID：10412994
> 
> 赞同：2
> 
> 时间：2012-05-02T11:40:46.237
> 
> 标签：php, zend-framework

我需要将 id 传递给控制器​​中的另一个控制器操作。我尝试在 ZendRegistry 中保存 id 并将其放入目标类。

```
$id=$_POST[eid];
Zend_Registry::set('id', $id); 
```

我使用了上面的代码，但它不起作用。请帮我。谢谢。

* * *

## 回答 #1

> 赞同：-3
> 
> 时间：2012-05-02T11:49:28.583

要将值设置为注册表：

```
 require_once 'Zend/Registry.php';  
  $id=$_POST[eid];
  $registry = Zend_Registry::getInstance();  
  Zend_Registry::set('id',$id); 
```

从注册表获取值：

```
 $id = Zend_Registry::get('id'); 
```

[更多详情点我](http://framework.zend.com/manual/en/zend.registry.using.html)

# java - 即使在抛出异常后如何继续执行程序？

> ID：10412995
> 
> 赞同：12
> 
> 时间：2012-05-02T11:40:48.220
> 
> 标签：java

我有一个要求，即使在引发异常后，程序执行流程也应该继续。

```
for(DataSource source : dataSources) {
    try {
        //do something with 'source'
    } catch (Exception e) {
    }
} 
```

如果在第一次迭代中抛出异常，流程执行将停止。我的要求是即使在第一次迭代抛出异常之后，其他迭代也应该继续。我可以在 catch 块中编写逻辑吗？

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-05-02T11:55:13.940

首先，

有 2 种类型的异常。选中和未选中。

未经检查的异常是您的程序无法从中恢复的异常。像 NullPointers 一样，告诉你你的逻辑确实有问题。

已检查异常是运行时异常，您可以从这些异常中恢复。

因此，您应该避免使用寻找“异常”基类的 catch 语句。这两个时间都代表。您可能应该考虑寻找特定的异常（通常是运行时异常的子类）。

简而言之，还有更多内容。

您还应该记住，您不应该将异常处理用作工作流。通常表明您的架构存在某种缺陷。正如名称所述，它们应该被视为正常执行的“例外”。

现在，考虑到您的代码：

```
for(DataSource source : dataSources) {
    try {
        //do something with 'source'
    } catch (Exception e) { // catch any exception
      continue; // will just skip this iteration and jump to the next
    }
   //other stuff ? 
} 
```

事实上，它应该捕获异常并继续前进。也许有些事情你没有告诉我们？:P

无论如何，希望这会有所帮助。

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2012-05-02T11:43:03.293

如果您没有在 catch 块内以某种方式中断循环，那么其他迭代将继续进行，而不管在之前的迭代中是否引发了异常。

试试这个简单的例子，看看会发生什么：

```
List<String> list = new ArrayList<String>();
list.add("1");
list.add("2");
list.add("3");

for(String str: list) {
   try {
       System.out.println(str);
       throw new Exception("Exception for string " + str);
   } catch(Exception ex) {
       System.out.println("Caught exception");
   }
} 
```

您将看到所有迭代都执行，即使每个迭代都抛出异常。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-02T19:55:43.197

如果在`for(DataSource source : dataSources)`while 调用`dataSources`初始化迭代器时发生异常，则*不会*捕获*该异常。*

 *这就是您所说的“**如果在第一次迭代中引发异常，则流程执行将停止。** ”？

如果是这种情况，那么您无能为力，并且循环不应*执行*任何交互。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-02T11:44:24.557

你现在的逻辑就是这样做的。如果异常`DataSource`进入无效状态，下一次使用迭代器的尝试可能会抛出不同的异常，但这是另一回事，并且是特定的`DataSource`（所以你必须看看是否`DataSource`允许你做一些事情来处理那个其他的某种方式的无效状态）。但在一般情况下，你做对了。

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2012-05-02T11:43:01.920

不，没有语言支持处理异常然后跳回到导致它的语句。`try...catch`即使前一个子序列引发异常，您也必须围绕应该执行的每个操作子序列包装单独的构造。*