# StackOverflow 问答 11090000-11090999

# android - 在 Android 中，如何将图像放置在另一个图像之上以看起来像一个徽章？

> ID：11090015
> 
> 赞同：7
> 
> 时间：2012-06-18T19:50:51.367
> 
> 标签：android, android-layout, android-ui

请看下面：

![iPhone 徽章](../Images/c4ec2e935c911278f15acb234aac08ea.png)

我尝试使用绝对布局，但已弃用。感谢您的帮助，谢谢。

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-06-18T19:58:35.240

[相对布局](http://developer.android.com/reference/android/widget/RelativeLayout.html)是一个不错的选择。

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="wrap_content"
android:layout_height="wrap_content" >

<ImageView
    android:id="@+id/icon"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:padding="5dp"
    android:scaleType="centerCrop"
    android:src="@drawable/iconImage" />

<ImageView
    android:id="@+id/badge"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_alignRight="@+id/icon"
    android:layout_alignTop="@+id/icon"
    android:src="@drawable/badge" /> 
```

如果您真的想要一个带有动态数字/文本的徽章，那么您可以将第二个`ImageView`a `TextView`（或`ViewGroup`诸如`LinearLayout`or `RelativeLayout`）并给它一个可绘制的背景并将文本设置为您想要的。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-06-18T19:57:33.810

查看 github 上的[ViewBadger](https://github.com/jgilfelt/android-viewbadger)项目（但请记住，您不应该尝试在 android 应用程序中复制其他平台的 UI 元素）。

# mysql - Jquery 自动完成插件版本 1.2.2 不工作

> ID：11090018
> 
> 赞同：0
> 
> 时间：2012-06-18T19:51:09.727
> 
> 标签：mysql, jquery, autocomplete

我正在使用 Jörn Zaefferer 的自动完成插件 1.2.2。我无法使用 Jquery UI 中包含的较新版本的插件。我正在链接到我的服务器上的脚本，该脚本在搜索中发送作业名称或作业 ID：

```
return_arr = array();

/* If connection to database, run sql statement. */
if ($connect)
{   
    $fetch = mysql_query("SELECT * FROM jobs WHERE job_name LIKE '%". mysql_real_escape_string($_GET['q']) ."%' OR insert_id LIKE '%". mysql_real_escape_string($_GET['q']) ."%' ORDER BY job_name ASC");

    /* Retrieve and store in array the results of the query.*/
    while ($row = mysql_fetch_array($fetch, MYSQL_ASSOC)) {

        $key = $row['job_name']."-".$row['insert_id'];

        array_push($return_arr,$key);
    }
}

/*Sort Array*/
foreach ($return_arr as $value) {
    echo "$value\n";

} 
```

我在 javascript 中使用以下设置：

```
$("#job_select").autocomplete('../lib/job_select2.php', {  
        minChars: 0, 
        autoFill: true,  
        mustMatch: true,  
        matchContains: false, 
        scrollHeight: 220  
}); 
```

当我在字段中输入作业名称时，会显示由搜索字符串构建的作业列表。当我离开该字段时，输入保持不变。

但是，当我输入 jobid 时，它会向我显示一份工作列表，但是当我从该字段中跳出时，该条目就会消失。我知道那是因为 mustMatch 为真，但我需要将其设置为真。我不想接受任何不在数据库中的输入。

任何帮助将不胜感激。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-18T20:15:48.063

如果您阅读文档，2010 年的评论说插件已弃用。您可能会遇到与不推荐使用时支持的插件相比更新版本的 jQuery 的问题。尝试使用 jQueryUI autocmplete 作为替代，并在文档中建议。

[http://bassistance.de/jquery-plugins/jquery-plugin-autocomplete/](http://bassistance.de/jquery-plugins/jquery-plugin-autocomplete/)

# ios - Objective-C 中的 Box2D

> ID：11090021
> 
> 赞同：2
> 
> 时间：2012-06-18T19:51:21.710
> 
> 标签：ios, xcode, cocos2d-iphone, box2d, kobold2d

我目前正在运行 Kobold 1.0.4 并且无法弄清楚如何使用 Objective-C 使用 Box2D，任何帮助将不胜感激。我已经查看了带有 kobold 的 Box2d 示例项目，但它只使用了 c++，我需要在 Objective-c 中完成它，因为我对两者都没有信心。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-18T20:11:49.720

将源文件的扩展名从 *.m 更改为 *.mm 以便能够在其中使用 c++ 类。它将允许您在 Objective-C 代码中创建和管理 box2d 对象

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-18T23:49:21.837

Box2D 是用 C++ 编写的，因此无论如何都无法绕过它。由于 Box2D 的代码完成了繁重的工作，因此我们需要的 C++ 代码量非常少，您只需要为碰撞处理程序准备好样板，然后您填充它的代码就可以像您想要的那样为 Objective-C .

如果您想要一些有助于将几何图形导入您的应用程序的东西，[PhysicsEditor](http://www.codeandweb.com/physicseditor)是一个很好的工具，它们有一个 plist 导出器并提供一个用于加载数据的 Objective-C 类。它处理了很多样板文件，如果你想为任何有趣的东西做碰撞几何，它会非常有帮助。

# makefile - 如何让 $(error ...) 在 GNU Make 中有条件地工作？

> ID：11090023
> 
> 赞同：12
> 
> 时间：2012-06-18T19:51:29.307
> 
> 标签：makefile, gnu-make

`$(error ...)`如果不满足某些先决条件，我想用它来中止我的制作过程。`fails_to_work`失败时目标应该`test -d /foobar`中止。

坏的.mk

```
all: this_works fails_to_work

this_works:
        @echo echo works...
        @test -d ~ || echo ~ is not a directory
        @test -d /foobar || echo /foobar is not a directory

fails_to_work:
        @echo error does not work...
        @test -d ~ || $(error ~ is not a directory)
        @test -d /foobar || $(error /foobar is not a directory) 
```

$ make -f BAD.mk

```
echo works...
/foobar is not a directory
BAD.mk:9: *** ~ is not a directory.  Stop. 
```

如您所见，甚至“错误不起作用......”都不会回显到屏幕上。`fails_to_work`在它开始之前失败的秘诀。我该如何解决这个问题？我的用例之一是`@test -d $(MY_ENV_VAR)`，但我认为这与示例中给出的硬编码路径没有什么不同。

**更新**（版本信息）

$ 制作--版本

```
GNU Make 3.81
Copyright (C) 2006  Free Software Foundation, Inc.
This is free software; see the source for copying conditions.
There is NO warranty; not even for MERCHANTABILITY or FITNESS FOR A
PARTICULAR PURPOSE.

This program built for x86_64-pc-linux-gnu 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-02-28T13:30:50.427

用于制作配方的 Shell 命令有效地存储为单个递归扩展变量。在 make 决定运行配方时，它会扩展变量，然后在其自己的 shell 调用中运行每一行。*即使在*调用第一个命令之前，*任何* `$(error ...)`扩展都会导致 make 中止。

 *请注意，a `$(if ...)`or `$(or ...)`&c 的未使用分支。不会扩大。因此，你可以做

```
.PHONY: rule-with-assert
rule-with-assert:
    $(if $(realpath ${should-be-file}/),$(error Assertion failure: ${should-be-file} is a folder!))
    ⋮ 
```

请注意，`/`在`realpath`.

当然，宏有助于整理很多东西。

```
assert-is-file = $(if $(realpath $1/),$(error Assertion failure: [$1] is a folder!))

.PHONY: rule-with-assert
rule-with-assert:
    $(call assert-is-file,${should-be-file})
    ⋮ 
```

再次值得注意的是，你把它放在`$(call assert-is-file,…)`食谱中的哪个位置并不重要。Any`$(error)`将在配方扩展时生成， *在*任何 shell 命令运行之前。

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2012-06-18T20:05:08.397

您正在尝试在配方中获取 shell 内容以有条件地调用 makefile 内容，这不起作用，正如您所发现的那样。

我可以想到两个选择：

1.  只需删除这些`$(error)`东西。如果`test`失败，那么它将返回非零退出状态，并且 Make 过程将在该点终止。

2.  将测试排除在规则之外，并使用 Make 条件（进而调用 shell 功能），例如：

    ```
    ifeq ($(shell test -d /foobar; echo $$?),1)
    $(error Not a directory)
    endif 
    ```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-06-18T21:23:18.137

为什么不直接使用`exit 1`shell 命令而不是`$(error ...)`？有什么理由使用后者吗？

```
try_this:
    @test -d /foobar || { echo /foobar is not a directory; exit 1; }

or_this:
    @if [ ! -d /foobar ]; then echo /foobar is not a directory; exit 1; fi 
```

[`-k`除非指定标志](http://www.gnu.org/software/make/manual/make.html#Options-Summary)，否则这两个都将中止制作过程。

> `-k` `--keep-going`
> 
> 出错后尽可能继续。虽然失败的目标以及依赖它的目标无法重新制作，但这些目标的其他先决条件可以全部处理。*

# mysql - Github 喜欢数据模式？

> ID：11090024
> 
> 赞同：0
> 
> 时间：2012-06-18T19:51:34.377
> 
> 标签：mysql, database, redis

我正在学习并尝试制作一个网站，但我对数据模型有点困惑。我的网站与 github 类似，您可以关注他人并复制/分享内容（类似于分叉/拉取请求）。如何制作数据模型来存储它？

基本上，我写了一篇文章，这篇文章与我相关联。然后你来“分叉”我的文章，我要复制它吗？还是只是一个链接？然后在编辑您的版本后，您向我发送了将我们的内容合并在一起的请求（我不想覆盖数据，但不确定如何以捕获差异的方式进行操作）。对我来说最糟糕的是，我希望对编辑进行版本控制，这使得我在对分叉数据进行版本控制时变得复杂。

我不知道从哪里开始..我不需要答案，但是任何关于如何建模这种 fork/merge 交互的建议都会很棒。我还没有决定是否使用 redis 或 mysql，但如果我可以将逻辑应用于其中一个，一般的答案是可以的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-19T03:57:14.880

创建 2 个模型：Article 和 ArticleRevision。用户有许多与他相关的文章（文章的所有者），并且文章有许多修订：

*   文章（id、user_id、current_revision_id、created_at）有很多 ArticleRevisions
*   ArticleRevision(id, article_id, title, body, created_at, parent_revision_id) 属于Article，属于ArticleRevision，有很多ArticleRevisions

文章的当前版本由`current_revision_id`字段决定。修订有一个父修订 - 这是它的来源修订。

当有人分叉一篇文章时：

*   克隆文章
*   克隆文章的最新修订版，并可选择重置新创建修订版的父级（因此历史记录将为空）。
*   设置新创建文章的所有者和当前版本

# asp.net - 我如何将 gridview 数据导出到 ms word

> ID：11090028
> 
> 赞同：0
> 
> 时间：2012-06-18T19:51:49.537
> 
> 标签：asp.net, c#-4.0, gridview

我正在使用 c# 进行 asp.net 4.0 Web 应用程序开发。我正在尝试将 Gridview 数据导出到 ms word 文档。我使用了以下代码。

```
Response.Clear();
        Response.Buffer = true;
        Response.AddHeader("content-disposition", "attachment;filename=MyWord.doc");
        Response.ContentEncoding = System.Text.Encoding.UTF7;
        Response.ContentType = "application/vnd.word";
        System.IO.StringWriter oStringWriter = new System.IO.StringWriter();
        System.Web.UI.HtmlTextWriter oHtmlTextWriter = new System.Web.UI.HtmlTextWriter(oStringWriter);
        this.GridView1.RenderControl(oHtmlTextWriter);
        Response.Output.Write(oStringWriter.ToString());
        Response.Flush();
        Response.End(); 
```

应用程序运行没有问题，但它以 word 形式返回数据

```
 +ADw-div+AD4- +ADw-table cellspacing+AD0AIg-0+ACI- cellpadding+AD0AIg-4+ACI- id+AD0AIg-GridView1+ACI- style+AD0AIg-color:+ACM-333333+ADs-border-collapse:collapse+ADsAIgA+- +ADw-tr style+AD0AIg-color:White+ADs-background-color:+ACM-507CD1+ADs-font-weight:bold+ADsAIgA+- +ADw-th scope+AD0AIg-col+ACIAPg-FileId+ADw-/th+AD4APA-th scope+AD0AIg-col+ACIAPg-PortalId+ADw-/th+AD4APA-th scope+AD0AIg-col+ACIAPg-FileName+ADw-/th+AD4APA-th scope+AD0AIg-col+ACIAPg-Extension+ADw-/th+AD4APA-th scope+AD0AIg-col+ACIAPg-Size+ADw-/th+AD4APA-th scope+AD0AIg-col+ACIAPg-Width+ADw- 
```

我知道它与 html 非常相似，但我如何将其转换为实际的。引导我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-08T12:45:18.520

这对我有用，它需要[itextsharp.dll](http://sourceforge.net/projects/itextsharp/files/latest/download)

```
 string FName = "filename.doc";
            mygrid.AllowPaging = false;
            mygrid.DataSource = datasource();
            mygrid.DataBind();
            Response.ClearContent();
            Response.AddHeader("content-disposition", string.Format("attachment; filename={0}", FName));
            Response.Charset = "";
            Response.ContentType = "application/ms-word";
            StringWriter sw = new StringWriter();
            HtmlTextWriter htw = new HtmlTextWriter(sw);
            mygrid.RenderControl(htw);
            Response.Write(sw.ToString());
            Response.End(); 
```

# iphone - 如何使用objective c查询sqlite数据库？

> ID：11090029
> 
> 赞同：1
> 
> 时间：2012-06-18T19:51:49.613
> 
> 标签：iphone, objective-c, sqlite, uitableview

我正在尝试按类型向用户显示食物。不同类型的食物是餐桌上的不同元素（水果、蔬菜、肉类等）。我使用 sqlite 在一个数据库中拥有所有食物。如何使用目标 c 查询此数据库，以便仅显示用户在下一个视图的表格中选择的正确类型的食物？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-18T21:55:21.400

我们在两个应用程序中使用[FMDB 。](https://github.com/ccgus/fmdb)它工作正常。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-06-22T06:20:08.010

```
-(NSArray *)GetAllFoods
{
NSMutableArray *filesArray = [[NSMutableArray alloc] init];

// Open the database from the users filessytem
NSString *DBPath = [ClsCommonFunctions GetDatabasePath];
if ([self OpenDBWithPath:DBPath])
{
    // Setup the SQL Statement and compile it for faster access
    const char *sqlStatement = "your query";
    sqlite3_stmt *compiledStatement;
    if(sqlite3_prepare_v2(filesDB, sqlStatement, -1, &compiledStatement, NULL) == SQLITE_OK) {

        while(sqlite3_step(compiledStatement) == SQLITE_ROW) 
        {
            // Need to get data from database...
NSSstring *foodObj = [NSString stringWithUTF8String:(char *)sqlite3_column_text(compiledStatement, 0)]

            [filesArray addObject:foodObj];
            FileObj = nil;
        }
    }
    // Release the compiled statement from memory
    sqlite3_finalize(compiledStatement);
    sqlite3_close(filesDB);
}

return filesArray; 
```

# php - PHP获取url的最后一个单词返回空白

> ID：11090034
> 
> 赞同：-1
> 
> 时间：2012-06-18T19:52:10.483
> 
> 标签：php

> **可能重复：**
> [PHP 在 / 和 / 之间的 url 上获取结束字符串](https://stackoverflow.com/questions/11075301/php-get-end-string-on-url-between-and)

我有这段代码可以在最后获取 / 和 / 之间的 url 的最后一部分。

网址是：

```
http://mydomain.com/category/mobile/ 
```

我需要从中检索“移动”。

我正在使用的代码是：

```
$url = trim($url, '/');

//Put it in a variable
$the_category = substr($url, strrpos($url, '/'));

//whats in it?
echo $the_category; 
```

上面没有返回任何东西......有什么想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-18T19:57:00.363

您应该使用“/”作为分隔符来分解数组，然后获取数组的最后一个值，如下所示：

```
<?
$url = $_SERVER['REQUEST_URI'];

$url = trim($url, '/');

$array = explode('/',$url);

$the_category = end($array);

//what's in it?
echo $the_category;
?> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-18T19:57:43.310

怎么样：

```
$the_category = basename($url); 
```

# ruby-on-rails - Rspec 和 capybara，关于 current_path 对象的访问和获取方法之间的区别

> ID：11090038
> 
> 赞同：4
> 
> 时间：2012-06-18T19:52:30.133
> 
> 标签：ruby-on-rails, rspec, capybara

我可能在这里混淆了机架和水豚方法

```
let!(:admin){FactoryGirl.create(:admin)}

# test passes
describe "visiting #edit page" do
  before { visit edit_user_path(admin) }
  specify { current_path.should eq(edit_user_path(admin)) }
end

# test fails
describe "getting #edit page" do
  before { get edit_user_path(admin) }
  specify { current_path.should eq(edit_user_path(admin)) }
end 
```

第二次测试失败：

```
 Failure/Error: specify { current_path.should eq(edit_user_path(admin)) }

       expected: "/users/51/edit"
            got: "/users/51"

       (compared using ==) 
```

一个`before(:each)`块，将 current_path 设置为`/users/51`，因此在使用`get`.

我只想在这里检查：

*   **visit**和**current_path**来自 capybara，而get**来自**rack？
*   **current_path**对象是否必须要求您使用**访问**方法才能保持更新？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-18T19:57:18.443

您的问题是一个共享问题，并[在 Jose Valim 的一篇文章中进行了描述](http://blog.plataformatec.com.br/2012/06/improving-the-integration-between-capybara-and-rspec/)。

简而言之，在集成测试中，只使用`visit`.

# unix - 哪个命令可以帮助我确定我所在的基本物理卷？

> ID：11090039
> 
> 赞同：0
> 
> 时间：2012-06-18T19:52:31.180
> 
> 标签：unix, command, device, hard-drive, lvm

有没有办法，我可以找出我所居住的基本物理设备。例如，无法删除/编辑/修改的物理设备......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-19T14:10:37.603

如果我正确理解了您的问题，`lvdisplay --maps`那么您正在寻找什么。它报告逻辑卷的每个部分所在的位置。

# ruby-on-rails - 使用无关访问将 Flash 传递给 redirect_to

> ID：11090040
> 
> 赞同：0
> 
> 时间：2012-06-18T19:52:36.153
> 
> 标签：ruby-on-rails, ruby-on-rails-3

我正在尝试在 a 中设置 flash 变量，`redirect_to`但遇到了问题。

当我使用它时，哈希会通过，但没有无关紧要的访问。（即：我可以使用`'key'`但不能`:key`）

```
redirect_to root_url, :flash=>params.merge({:error=>'no-results'}.with_indifferent_access) 
```

我也有可能完全错误地接近这个。`root_url`这是一个请求不同操作的搜索表单，如果没有结果，它会重定向回搜索表单 (on )。我要传`params`回去，所以我可以将表单字段设置回用户选择的内容。

谢谢！

编辑：我之前发布为“工作正常”的示例实际上并没有正常工作。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-19T19:38:56.590

检查`root :to`您的路线中是否正在重定向到另一个页面，例如`root :to => redirect('[PAGE]')`.

这发生在我身上，我不得不使用资源路径来重定向

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-18T23:47:07.903

这是闪存的一种非标准使用......它用于存储要显示给用户的消息。做你真正需要的事情似乎有点迂回的方式 - 我假设这只是一个在你重定向时存储参数的快速地方是吗？

您是否考虑过直接使用会话？

例如：

```
session[:saved_params] = params.merge :error=>'no-results' 
```

然后在新动作中：

```
real_params = session[:saved_params] 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-18T22:47:40.487

你想用冷漠的访问来查找什么？你现在拥有它的方式`merge`是什么被转换。也许你正在寻找

```
redirect_to root_url, :flash=>params.merge({:error=>'no-results'}).with_indifferent_access 
```

# ruby - Ruby 将 Excel 保存为 CSV

> ID：11090041
> 
> 赞同：1
> 
> 时间：2012-06-18T19:52:36.463
> 
> 标签：ruby

我正在尝试浏览目录中的每个 .xls 文件并为每个文件保存一个 .csv 。我正在使用 'roo' gem 并看到一些错误。对其他方法完全开放，我只需将其保留在 Ruby 中，而无需迁移到 Ruby on Rails。我正在运行 Ruby 1.9.2 并在 Mac 上的终端中执行。

到目前为止的代码：

```
#! /usr/bin/ruby

require 'roo'

# change excel files to csv
begin
    Dir["/tmp/*.xls"].each do |file|  
      file_path = "#{file}"
      file_basename = File.basename(file, ".xls")
      xls = Excel.new(file_path)
      xls.to_csv = ("/tmp/#{file_basename}.csv")
    end
end 
```

这是我得到的错误：（行号与示例不同，第 27 行是开始语句）

```
/Users/pierce/.rbenv/versions/1.9.2-p290/lib/ruby/gems/1.9.1/gems/roo-1.10.1/lib/roo/excel.rb:284:in `platform_specific_iconv': uninitialized constant Excel::Iconv (NameError)
    from /Users/pierce/.rbenv/versions/1.9.2-p290/lib/ruby/gems/1.9.1/gems/roo-1.10.1/lib/roo/excel.rb:277:in `normalize_string'
    from /Users/pierce/.rbenv/versions/1.9.2-p290/lib/ruby/gems/1.9.1/gems/roo-1.10.1/lib/roo/excel.rb:139:in `block in sheets'
    from /Users/pierce/.rbenv/versions/1.9.2-p290/lib/ruby/gems/1.9.1/gems/roo-1.10.1/lib/roo/excel.rb:139:in `collect'
    from /Users/pierce/.rbenv/versions/1.9.2-p290/lib/ruby/gems/1.9.1/gems/roo-1.10.1/lib/roo/excel.rb:139:in `sheets'
    from /Users/pierce/.rbenv/versions/1.9.2-p290/lib/ruby/gems/1.9.1/gems/roo-1.10.1/lib/roo/excel.rb:123:in `initialize'
    from excel_conversion_test.rb:32:in `new'
    from excel_conversion_test.rb:32:in `block in <main>'
    from excel_conversion_test.rb:28:in `each'
    from excel_conversion_test.rb:28:in `<main>' 
```

正如建议的那样，我尝试安装 inconv 并收到以下错误：

```
ERROR:  Error installing iconv:
    ERROR: Failed to build gem native extension.

        /Users/pierce/.rbenv/versions/1.9.2-p290/bin/ruby extconf.rb
checking for iconv() in iconv.h... no
checking for iconv() in -liconv... yes
checking for const of iconv() 2nd argument... no
creating Makefile

make
/usr/bin/gcc-4.2 -I. -I/Users/pierce/.rbenv/versions/1.9.2-p290/include/ruby-1.9.1/x86_64-darwin11.2.0 -I/Users/pierce/.rbenv/versions/1.9.2-p290/include/ruby-1.9.1/ruby/backward -I/Users/pierce/.rbenv/versions/1.9.2-p290/include/ruby-1.9.1 -I. -I'/Users/pierce/.rbenv/versions/1.9.2-p290/include'  -D_XOPEN_SOURCE -D_DARWIN_C_SOURCE   -fno-common -O3 -ggdb -Wextra -Wno-unused-parameter -Wno-parentheses -Wpointer-arith -Wwrite-strings -Wno-missing-field-initializers -Wshorten-64-to-32 -Wno-long-long  -pipe  -o iconv.o -c iconv.c
In file included from iconv.c:21:
/Users/pierce/.rbenv/versions/1.9.2-p290/include/ruby-1.9.1/ruby/backward/st.h:2:2: warning: #warning use "ruby/st.h" instead of bare "st.h"
iconv.c:22:20: error: intern.h: No such file or directory
iconv.c: In function ‘map_charset’:
iconv.c:139: error: ‘struct RHash’ has no member named ‘tbl’
iconv.c:139: error: ‘struct RHash’ has no member named ‘tbl’
iconv.c:142: error: ‘struct RHash’ has no member named ‘tbl’
iconv.c: In function ‘iconv_create’:
iconv.c:187: error: ‘struct RString’ has no member named ‘len’
iconv.c:188: error: ‘struct RString’ has no member named ‘len’
iconv.c:190: error: ‘struct RString’ has no member named ‘ptr’
iconv.c:190: error: ‘struct RString’ has no member named ‘ptr’
iconv.c:190: error: ‘struct RString’ has no member named ‘ptr’
iconv.c:190: error: ‘struct RString’ has no member named ‘ptr’
iconv.c:192: error: ‘struct RString’ has no member named ‘ptr’
iconv.c:193: error: ‘struct RString’ has no member named ‘len’
iconv.c: In function ‘iconv_fail’:
iconv.c:328: error: ‘struct RString’ has no member named ‘len’
iconv.c: In function ‘iconv_fail_retry’:
iconv.c:352: error: ‘ruby_errinfo’ undeclared (first use in this function)
iconv.c:352: error: (Each undeclared identifier is reported only once
iconv.c:352: error: for each function it appears in.)
iconv.c: In function ‘rb_str_derive’:
iconv.c:371: error: ‘struct RString’ has no member named ‘ptr’
iconv.c:371: error: ‘struct RString’ has no member named ‘len’
iconv.c:373: error: ‘struct RString’ has no member named ‘ptr’
iconv.c:373: error: ‘struct RString’ has no member named ‘len’
iconv.c:374: error: ‘struct RString’ has no member named ‘ptr’
iconv.c: In function ‘iconv_convert’:
iconv.c:418: error: ‘struct RArray’ has no member named ‘len’
iconv.c:418: error: ‘struct RArray’ has no member named ‘ptr’
iconv.c:436: error: ‘struct RString’ has no member named ‘len’
iconv.c:437: error: ‘struct RString’ has no member named ‘ptr’
iconv.c:455: warning: comparison of unsigned expression >= 0 is always true
iconv.c:458: warning: comparison between signed and unsigned
iconv.c:459: warning: comparison between signed and unsigned
iconv.c:491: warning: implicit conversion shortens 64-bit value into a 32-bit value
iconv.c:494: warning: implicit conversion shortens 64-bit value into a 32-bit value
iconv.c:497: error: ‘struct RArray’ has no member named ‘len’
iconv.c:498: error: ‘struct RArray’ has no member named ‘ptr’
iconv.c:499: error: ‘struct RArray’ has no member named ‘ptr’
iconv.c:501: error: ‘struct RString’ has no member named ‘len’
iconv.c:502: error: ‘struct RString’ has no member named ‘ptr’
iconv.c:514: warning: implicit conversion shortens 64-bit value into a 32-bit value
iconv.c: In function ‘iconv_s_convert’:
iconv.c:615: error: ‘struct RString’ has no member named ‘len’
make: *** [iconv.o] Error 1

Gem files will remain installed in /Users/pierce/.rbenv/versions/1.9.2-p290/lib/ruby/gems/1.9.1/gems/iconv-0.1 for inspection. 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-18T20:31:30.350

添加这个：`require 'iconv'`之前`require 'roo'`。我在[这里](https://github.com/hmcgowan/roo/issues/13)找到了这个解决方案，然后我在谷歌上使用了这个查询：`roo/excel.rb:284`。[这里](https://gist.github.com/589717)有一个例子！注意`=`这一行中的：`xls.to_csv = ("/tmp/#{file_basename}.csv")`那不应该在那里。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-14T21:03:25.380

我决定发布一个答案，试图为从谷歌来到这里的其他人解释这种情况。

正如大卫指出的那样，要修复这个错误......

```
 uninitialized constant Excel::Iconv 
```

...你必须要求“iconv”：

```
require "iconv"
require "roo" 
```

这是因为 Roo gem`Iconv.new`在其内部 Excel 类中调用，但 Roo 忘记要求“iconv”本身，所以你不得不这样做。这是一个错误。`Set.new`这与没有调用没有什么不同`require "set"`

**Iconv 是 Ruby 1.8 和 1.9 标准库的一部分。**你不安装它。它已经在那里了。

然而，值得指出的是，Iconv 在 Ruby 1.9 中已被弃用，并在 Ruby 2.0 中被删除。

# r - 网格：如何指定限制以避免 grid.points() 超出视口？

> ID：11090044
> 
> 赞同：2
> 
> 时间：2012-06-18T19:52:54.923
> 
> 标签：r, r-grid

我刚刚尝试了我的第一步`grid`。我想设置一个 2 x 2 方形散点图矩阵，中间有一些空间。为了获得空间，我实际上使用了 3 x 3 布局（问题 1：有没有更简单的方法？）。从下面的示例中可以看出，这些点绘制在边界矩形之外。我必须以某种方式指定情节中的限制。问题2：如何做到这一点？最后，我可以使用基本图形来创建绘图吗？[我知道`lattice`图形会起作用，并且也`layout`可以使用标准（或`ggplot2`），但我很感兴趣，如果这也可能的话`grid.layout`]

```
require(grid)

## generate data to be plotted in the top left plot
X <- matrix(rexp(2000), ncol=2)

## plot device
file <- "foo.pdf"
pdf(file=file, width=10, height=10)

## set up grid.layout
gl <- grid.layout(3, 3, respect=rbind(c(0,1,0), c(1,1,1), c(0,1,0)),
                  widths=unit(c(3,1,3), "inches"), heights=unit(c(3,1,3), "inches")) # define grid layout

pushViewport(viewport(layout=gl)) # use this layout in a viewport

## (1,1) plot
pushViewport(viewport(layout.pos.row=1, layout.pos.col=1, name="11"))
grid.points(X[,1], X[,2], pch=1) # points
grid.rect() # bounding rectangle
grid.xaxis() # x-axis
grid.yaxis() # y-axis
grid.text(expression(italic(X[1])), y=unit(-3, "lines")) # x-axis label
grid.text(expression(italic(X[2])), x=unit(-3, "lines"), rot=90) # y-axis label
grid.text("Plot 1", x=0.86, y=0.9, gp=gpar(fontface="bold", cex=1.6)) # add label
upViewport()

## (1,2) plot
pushViewport(viewport(layout.pos.row=1, layout.pos.col=3, name="13"))
grid.rect()
upViewport()

## (2,1) plot
pushViewport(viewport(layout.pos.row=3, layout.pos.col=1, name="31"))
grid.rect()
upViewport()

## (2,2) plot
pushViewport(viewport(layout.pos.row=3, layout.pos.col=3, name="33"))
grid.rect()
upViewport()

## plot device
dev.off() 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-18T21:25:39.887

您需要有正确的坐标系：要么将您的数据转换为“npc”单位，要么使用从您的数据派生的本机单位设置视口，

```
pushViewport(dataViewport(X[,1], X[,2], 
               layout.pos.row=1, layout.pos.col=1, name="11")) 
```

按预期工作。

关于问题1，看一下github上的gtable包；正在开发它以促进 ggplot2 和其他基于网格的图形框架的此类事情。

# project-management - 在网站上与超过 1 人合作？

> ID：11090050
> 
> 赞同：1
> 
> 时间：2012-06-18T19:53:11.250
> 
> 标签：project-management

这是半编程相关的。我在一个网站上与超过 1 人合作。并且通过将错误的文件下载/上传到 FTP 来不弄乱彼此的工作真的很难。所以我们开始使用 Dropbox，它会自动同步文件。这并不完美...

你如何与多人一起工作？有没有像 Google Docs 这样的具有实时编辑功能的东西？或任何其他巧妙的解决方案？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-18T19:55:35.183

我会看一个源代码控制系统。它们允许多人对同一个项目进行更改，还允许您查看/撤消所做的更改。SVN 或 GIT 是目前最流行的两个。

乌龟 SVN - [http://tortoisesvn.net/](http://tortoisesvn.net/) Git - [http://git-scm.com/](http://git-scm.com/)

# jquery - 用于图像的 Jquery FitText 插件？

> ID：11090051
> 
> 赞同：0
> 
> 时间：2012-06-18T19:53:12.050
> 
> 标签：jquery, image, plugins, resize

有没有类似于 jquery 的 FitText 插件可以在图像上使用的插件？我想要完成的是让图像自动调整大小以适合我所在的任何显示器。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-18T19:59:02.750

试试 Jquery ImageFit 插件[http://code.google.com/p/jquery-imagefit-plugin/](http://code.google.com/p/jquery-imagefit-plugin/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-18T20:09:16.793

fitText 很有用，因为您无法真正调整`font-size`CSS 的大小。但是对于图像，我认为`max-width`属性就足够了。

# java - 如何从java中的字符序列中获取单词？

> ID：11090053
> 
> 赞同：0
> 
> 时间：2012-06-18T19:53:17.400
> 
> 标签：java, string, parsing, character

我有一个 getNextChar() 方法，它逐个字符地读取字符串。我正在编写一种方法来获取 getNextChar() 提供的字符序列中的单词。

文本包含标点符号和其他特殊字符。

我想有一个包含所有标点符号和特殊字符的数组，当我读取文本的字符时，检查字符是否在数组中以忽略它。该方法将在获得空格时识别该单词。**这些单词将存储在一个集合**（例如：地图）中，因为我还需要通过检查该单词之前是否已在地图中插入并增加该单词的计数器来**计算频率。**

1.  这是最好和最**有效**的方法吗？我正在寻找**最有效的方法**。一个
2.  是否有**完整的标点符号和特殊字符列表**？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-18T20:02:00.923

我认为有一种更简单的方法可以做到这一点。

无论您的输入源是什么，我都会使用 Scanner 类来阅读它。您可以使用输入字符串实例化此类并调用 Scanner.nextWord() 方法来获取字符串中的下一个单词。这会自动检查空格并返回下一个单词。然后，您可以使用 String.replace("punctuation","") 删除标点符号，然后将这些单词插入到 ArrayList 中，您可以计算频率等。

```
Scanner reader = new Scanner(string);
String word = reader.nextWord();
word=word.replaceAll(//code);
list.add(word); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-18T19:57:23.840

您可以使用 string.split() 将字符串拆分为由空格分隔的字符串数组（对于您的单词）。您还可以使用 Character.isLetterOrDigit() 检查每个字符以避免标点符号。（不一定按这个顺序。）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-18T20:00:32.733

如果您使用一组字符，则查找标点的性能会更好。

```
Set<Character> punctationchars ....
if(punctationcahars.contains(yourChar) { ... } 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-18T20:01:02.937

只需使用 a`Scanner`在`String`s 中读取：

```
Scanner in = new Scanner(...);

while (in.hasNext()) {
    String word = in.next();
    /* do something with the word, check punctuation, etc. */
} 
```

# r - 为 R 中的 k 序数生成所有二叉树

> ID：11090065
> 
> 赞同：2
> 
> 时间：2012-06-18T19:53:56.317
> 
> 标签：r, binary-tree

假设给定 R 中的序数列表，我想将所有有序二叉树生成为 <=2 列表的递归列表。

因此，例如，给定`list(2,1,4,3)`，输出将是：

```
list(list(1, list(2, list(3, 4))),
     list(1, list(list(2, 3), 4)),
     list(list(1, 2), list(3, 4)),
     list(list(1, list(2, 3)), 4),
     list(list(list(1, 2), 3), 4)) 
```

列出树的顺序并不重要。排序不是问题，但我在进行有效的功能递归方面遇到了很多困难。我知道 R 的递归速度很慢，但这里的速度不是问题，因为我正在处理相当低（<=7）顺序的列表。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-18T22:30:39.053

这个功能应该让你继续前进。它接受你给它的任何列表，并输出所有二叉树，将列表中的项目按照给出的顺序保存：

```
trees <- function(l) {
    if (length(l) <= 1)
        return(l)
    if (length(l) <= 2)
        return(list(l))

    unlist(lapply(2:(length(l)), function(i) {
        left.trees <- trees(l[1:(i-1)])
        right.trees <- trees(l[i:length(l)])
        apply(expand.grid(1:length(left.trees), 1:length(right.trees)), 1, function(idx) {
            list(left.trees[[idx[1]]], right.trees[[idx[2]]])
        })
    }), recursive=FALSE)
} 
```

所以对于你给出的例子：

```
> dput(trees(as.list(1:4)))
list(list(1L, list(2L, list(3L, 4L))), list(1L, list(list(2L, 
    3L), 4L)), list(list(1L, 2L), list(3L, 4L)), list(list(1L, 
    list(2L, 3L)), 4L), list(list(list(1L, 2L), 3L), 4L)) 
```

# iphone - 创建我自己的 iTunes 艺术作品

> ID：11090066
> 
> 赞同：3
> 
> 时间：2012-06-18T19:54:01.020
> 
> 标签：iphone, objective-c, ios, cocos2d-iphone

如何为我的应用程序创建 iTunes 艺术作品？
目前，我有默认文件，cocos2D 徽标的图像，但我怎么可能编辑它呢？
文件类型显然是 Unix 可执行文件。
任何帮助表示赞赏！谢谢！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-18T20:28:14.383

`iTunesArtwork`只是一个没有“.png”扩展名的PNG图像。使用任何支持 PNG 的编辑器，并在完成后去掉文件扩展名。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-19T06:25:28.810

取一张 512*512 的 png 图像并将其命名为 iTunesArtwork 和 remove.png 扩展名。就是这样。

# jsf - 在 JSF 中 ui:repeat confirmdialog 获取列表中最后一个元素的 id

> ID：11090078
> 
> 赞同：1
> 
> 时间：2012-06-18T19:54:48.723
> 
> 标签：jsf, uirepeat

我有这个命令按钮

```
<p:commandButton onclick="confirmation1.show()"
                                                                 id="delFriend" title="Delete #{userFriend.profileFullname}" icon="ui-icon ui-icon-trash" >

                                                </p:commandButton> 
```

这是确认对话框

```
<p:confirmDialog id="confirmDialog" message="Are you sure you want to delete this friend ?"
                                                             header="Deleting friend" severity="alert" widgetVar="confirmation1">

                                                <p:commandButton id="confirm" value="Yes Sure" oncomplete="confirmation1.hide()"
                                                                 action="#{messagesManagedBean.deleteFriend}">
                                                    <f:param value="#{profileId}" name="profileId" />
                                                </p:commandButton>
                                                <p:commandButton id="decline" value="Not Yet" onclick="confirmation1.hide()" type="button" />
                                            </p:confirmDialog> 
```

两者都在 ui:repeat 内，当我单击确认对话框中的“是肯定”按钮时，它会获取 ui:repeat 列表中最后一个元素的 profileId。

我尝试了 f:param 方法，然后尝试在 bean 中获取请求参数但徒劳无功。它做同样的事情。

需要帮助。谢谢

***编辑***

我已将页面内容更改为

```
<?xml version='1.0' encoding='UTF-8' ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:ui="http://java.sun.com/jsf/facelets"
      xmlns:h="http://java.sun.com/jsf/html"
      xmlns:f="http://java.sun.com/jsf/core"
      xmlns:p="http://primefaces.org/ui" 
      xmlns:c="http://java.sun.com/jsp/jstl/core">
    <h:head>
        <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
        <link rel="stylesheet" type="text/css" href="../Styles/homepage-style.css" />
        <link rel="stylesheet" type="text/css" href="../Styles/profile.css" />
        <title>Shadi Bandhan | We find the best match for you</title>
    </h:head>

    <h:body>

        <div id="header">
            <ui:insert name="header" >
                <ui:include src="header.xhtml" />
            </ui:insert>
        </div>
        <div id="main-content">
            <p:growl autoUpdate="true" />
            <div id="left-pane">

                <div id="profile-info-area">
                    <ui:insert name="profile_info_area" >
                        <ui:include src="profileInfoArea.xhtml" />
                    </ui:insert>
                </div>

                <div id="home-main-area">
                    <div id="interests-expressions-wrapper">

                        <div id="interests-expressions-header">

                            <div id="ie-heading">
                                Friends
                            </div>

                        </div>
                        <div id="interests-expressions">

                            <h:form id="interestExpressionsForm">

                                <p:confirmDialog id="confirmDialog" message="Are you sure you want to delete this friend ?"
                                                 header="Deleting friend" severity="alert" widgetVar="confirmation1">

                                    <p:commandButton id="confirm" value="Yes Sure" oncomplete="confirmation1.hide()"
                                                     action="#{messagesManagedBean.deleteFriend(userFriend.profileId)}">
                                    </p:commandButton>
                                    <p:commandButton id="decline" value="Not Yet" onclick="confirmation1.hide()" type="button" />
                                </p:confirmDialog>

                                <ui:repeat id="interestsRepeator" var="userFriend" value="#{messagesManagedBean.userFriends}">

                                    <center><img class="h-diff" src="../images/differentiator-profile.jpg" width="437" height="1" /></center>
                                    <div class="intExpression">
                                        <div id="senderImg">
                                            <img class="senderImg" src="../images/profile-pic.jpg" width="50" height="50" />
                                        </div>

                                        <div id="intExpression-area">

                                            <div id="senderName">
                                                <p:commandLink id="senderNameLink" styleClass="senderName" value="#{userFriend.profileFullname}"  action="#{myProfileManagedBean.loadProfileFrontInformation(userFriend.profileId)}"></p:commandLink>
                                            </div>
                                            <div id="intExpression-body">
                                                #{userFriend.profileAge} <br />
                                                #{userFriend.profileReligion} <br />
                                                #{userFriend.profileLocation} <br />

                                            </div>

                                            <div id="interest-response-area">

                                                <p:commandButton onclick="confirmation1.show()" update=":interestExpressionsForm:confirmDialog"
                                                                 id="delFriend" title="Delete #{userFriend.profileFullname}" icon="ui-icon ui-icon-trash" >
                                                    <f:param value="#{userFriend}" name="userFriend" />
                                                </p:commandButton>
                                            </div>

                                        </div>
                                    </div>
                                </ui:repeat>

                            </h:form>

                        </div>

                    </div>
                </div>
            </div>

            <div id="right-pane">
                <ui:insert name="right-pane" >
                    <ui:include src="right-pane.xhtml" />
                </ui:insert>
            </div>
        </div>

        <div id="footer">
            <ui:insert name="footer" >
                <ui:include src="footer.xhtml" />
            </ui:insert>
        </div>

    </h:body>
</html> 
```

在BalusC回复之后。但它不起作用，使用 update=":interestExpressionsForm:confirmDialog" 确认对话框打开然后立即关闭。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-18T20:04:22.023

把`<p:confirmDialog>`外面的`<ui:repeat>`。你只需要一个，而不是多个。只需根据按下的按钮相应地更新对话框的内容。

# sql-server - 每个集群节点的 qrtz_scheduler_state 中有 2 行

> ID：11090079
> 
> 赞同：0
> 
> 时间：2012-06-18T19:54:54.453
> 
> 标签：sql-server, spring, weblogic, cluster-computing, quartz-scheduler

我有带有集群的石英设置。每个石英集群节点服务器在 qrtz_scheduler_state 表中有两个不同的条目。我无法理解。有人见过这个吗？

更多信息：
有问题的原始配置
Spring 3.0.3
Quartz 1.8.5
Weblogic 10.3.5
SQL Server 2005

也有问题的新配置
Spring 3.1.1
Quartz 2.1.5
Weblogic 10.3.5
SQL Server 2005

quarts-config.xml

```
<?xml version="1.0" encoding="UTF-8"?>
<beans xmlns="http://www.springframework.org/schema/beans"
xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
xmlns:jee="http://www.springframework.org/schema/jee"
xsi:schemaLocation="http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans.xsd
    http://www.springframework.org/schema/jee 
    http://www.springframework.org/schema/jee/spring-jee-2.0.xsd">

<!-- Defining this bean starts the triggers -->
<bean id="scheduler" class="org.springframework.scheduling.quartz.SchedulerFactoryBean">
    <property name="triggers">
        <list>
            <ref bean="pendingTransactionJob" />
            <ref bean="assetJob" />
        </list>
    </property>

    <property name="dataSource" ref="wfbisDataSource" />
    <property name="transactionManager" ref="wfbisTransactionManager" />
    <property name="overwriteExistingJobs" value="true" />

    <property name="autoStartup" value="false" />

    <property name="schedulerContextAsMap">
        <map>
            <entry key="pendingTransactionService" value-ref="pendingTransactionService" />
            <entry key="assetService" value-ref="assetService" />
        </map>
    </property>
    <property name="quartzProperties">
        <props>
            <prop key="org.quartz.scheduler.instanceName">ClusteredScheduler</prop>
            <prop key="org.quartz.scheduler.instanceId">AUTO</prop>
            <prop key="org.quartz.threadPool.class">org.quartz.simpl.SimpleThreadPool</prop>
            <prop key="org.quartz.threadPool.threadCount">6</prop>
            <prop key="org.quartz.jobStore.clusterCheckinInterval">300000</prop>
            <prop key="org.quartz.threadPool.threadPriority">5</prop>
            <prop key="org.quartz.jobStore.misfireThreshold">60000</prop>
            <prop key="org.quartz.jobStore.class">org.quartz.impl.jdbcjobstore.JobStoreTX</prop>
            <prop key="org.quartz.jobStore.driverDelegateClass">org.quartz.impl.jdbcjobstore.MSSQLDelegate</prop>
            <prop key="org.quartz.jobStore.tablePrefix">QRTZ_</prop>
            <prop key="org.quartz.jobStore.isClustered">true</prop>
            <prop key="org.quartz.jobStore.useProperties">false</prop>
        </props>
    </property>
</bean>

<bean id="pendingTransactionJob" class="org.springframework.scheduling.quartz.CronTriggerFactoryBean">
    <property name="jobDetail" ref="pendingTransactionJobDetail" />
    <property name="cronExpression" value="0 0/5 * * * ?" />
</bean>

<bean name="pendingTransactionJobDetail" class="org.springframework.scheduling.quartz.JobDetailFactoryBean">
    <property name="jobClass" value="com.wellsfargo.trust.message.ScheduledJob" />
    <property name="jobDataAsMap">
        <map>
            <entry key="serviceName" value="pendingTransactionService" />
        </map>
    </property>
</bean>

<bean id="assetJob" class="org.springframework.scheduling.quartz.CronTriggerFactoryBean">
    <property name="jobDetail" ref="assetJobDetail" />
    <property name="cronExpression" value="0 0/5 * * * ?" />
</bean>

<bean id="assetJobDetail" class="org.springframework.scheduling.quartz.JobDetailFactoryBean">
    <property name="jobClass" value="com.wellsfargo.trust.message.ScheduledJob" />
    <property name="jobDataAsMap">
        <map>
            <entry key="serviceName" value="assetService" />
        </map>
    </property>
</bean> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-18T20:59:42.923

删除表条目，重新启动集群并查看是否再次创建了双重条目。可能会发生这些条目已创建但未因某些错误而删除的情况。

# sql - 向 H2 数据库添加特殊字符

> ID：11090081
> 
> 赞同：1
> 
> 时间：2012-06-18T19:55:00.700
> 
> 标签：sql, h2

使用 H2 时，当我尝试写一行时，第一个元素是 ABC，第二个元素是 [C@26afa68a

`Syntax error in SQL statement "INSERT INTO USER VALUES(ABC,[[*]C@F4D5BC9) " expected "), DEFAULT, NOT, EXISTS, SELECT, FROM"; SQL statement:INSERT INTO user VALUES(abc,[C@f4d5bc9) [42001-167]`

我不知道是否有办法让 H2 接受特殊字符，但很高兴知道如何处理这个问题。

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-18T20:45:20.263

您应该使用 PreparedStatement：

```
PreparedStatement prep = conn.prepareStatement("INSERT INTO USER VALUES(?, ?)");
prep.setString(1, "ABC");
prep.setString(2, "[C@f4d5bc9");
prep.executeUpdate();
prep.close(); 
```

使用 PreparedStatement 是首选解决方案，因为这样您就不必转义数据。如果`ABC`和/和`[C@f4d5bc9`是常量，您可以使用：

```
Statement stat = conn.createStatement();
stat.executeUpdate("INSERT INTO USER VALUES('ABC', '[C@f4d5bc9');
stat.close(); 
```

# wpf - 如何摆脱 TextBlock 中运行之间的空白？

> ID：11090084
> 
> 赞同：83
> 
> 时间：2012-06-18T19:55:22.723
> 
> 标签：wpf, xaml

我有以下 XAML：

```
<TextBlock HorizontalAlignment="Center" VerticalAlignment="Center"
                                               FontSize="10" FontFamily="Arial" Foreground="#414141">        
                                            <Run Text="{Binding LoadsCount}" />        
                                            <Run Text="+" />        
                                            <Run Text="{Binding BrokerLoadsCount}" />
                                        </TextBlock> 
```

我得到这样的显示：`12 + 11` 它以某种方式在每个之间插入了额外的空间`Run` 我如何让它显示`12+11`？

* * *

## 回答 #1

> 赞同：160
> 
> 时间：2012-06-18T20:01:38.877

运行标签之间的空格导致空格，这是最简单的修复。

```
<TextBlock 
   HorizontalAlignment="Center" 
   VerticalAlignment="Center"
   FontSize="10" 
   FontFamily="Arial" 
   Foreground="#414141">        
      <Run Text="{Binding LoadsCount}" /><Run Text="+" /><Run Text="{Binding BrokerLoadsCount}" />
</TextBlock> 
```

因为`<TextBlock>`和之间的任何内容`</TextBlock>`都针对 TextBlock 的 text 属性，所以运行之间的中断中的空格会导致您看到的效果。你也可以把它缩短到这个。

```
<Run Text="{Binding LoadsCount}" />+<Run Text="{Binding BrokerLoadsCount}" /> 
```

这篇 MSDN 文章提供了有关 xaml 如何处理空格的所有细节

[http://msdn.microsoft.com/en-us/library/ms788746.aspx](http://msdn.microsoft.com/en-us/library/ms788746.aspx)

如果你很好奇为什么中断和大量的制表符会转化为一个空格

> 所有空白字符（空格、换行符、制表符）都转换为空格。
> 
> 所有连续的空格都被删除并替换为一个空格

* * *

## 回答 #2

> 赞同：44
> 
> 时间：2018-02-19T19:31:20.183

另一种选择是注释 Run 标记之间的空格，保持代码可读并删除多余的空格。

```
<TextBlock HorizontalAlignment="Center"
           VerticalAlignment="Center"
           FontSize="10" FontFamily="Arial" Foreground="#414141">        
    <Run Text="{Binding LoadsCount}" /><!--
 --><Run Text="+" /><!--
 --><Run Text="{Binding BrokerLoadsCount}" />
</TextBlock> 
```

* * *

## 回答 #3

> 赞同：21
> 
> 时间：2014-12-07T00:42:10.827

`XAML`Kevin 很好的解决方案的一个问题是，当您应用一些 XAML/XML 自动重新格式化功能时，标签的单行格式会被撤消，例如“ctrl-K + ctrl-D”。我发现的一种解决方法是将`Run`标签格式化如下：

```
<TextBlock>
    <Run FontStyle="Italic"
    Text="aaa" /><Run 
    Text="bbb" />
</TextBlock> 
```

`Visual Studio`尽管像这样跨行拆分标签有点尴尬，但如果您为 XAML 文本编辑器选择“在属性之间保留新行和空格”选项，则自动重新格式化不会更改此格式：

![XAML 中连续 Run 元素之间消除了额外的空间](../Images/cc6ad5e2a7b2fa1eb8b192919a116246.png)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2016-11-20T07:40:28.397

我写了一个附加属性来“绕过”这种行为。

```
public class TextBlockExtension
{

    public static bool GetRemoveEmptyRuns(DependencyObject obj)
    {
        return (bool)obj.GetValue(RemoveEmptyRunsProperty);
    }

    public static void SetRemoveEmptyRuns(DependencyObject obj, bool value)
    {
        obj.SetValue(RemoveEmptyRunsProperty, value);

        if (value)
        {
            var tb = obj as TextBlock;
            if (tb != null)
            {
                tb.Loaded += Tb_Loaded;
            }
            else
            {
                throw new NotSupportedException();
            }
        }
    }

    public static readonly DependencyProperty RemoveEmptyRunsProperty =
        DependencyProperty.RegisterAttached("RemoveEmptyRuns", typeof(bool), 
            typeof(TextBlock), new PropertyMetadata(false));

    public static bool GetPreserveSpace(DependencyObject obj)
    {
        return (bool)obj.GetValue(PreserveSpaceProperty);
    }

    public static void SetPreserveSpace(DependencyObject obj, bool value)
    {
        obj.SetValue(PreserveSpaceProperty, value);
    }

    public static readonly DependencyProperty PreserveSpaceProperty =
        DependencyProperty.RegisterAttached("PreserveSpace", typeof(bool), 
            typeof(Run), new PropertyMetadata(false));

    private static void Tb_Loaded(object sender, RoutedEventArgs e)
    {
        var tb = sender as TextBlock;
        tb.Loaded -= Tb_Loaded;

       var spaces = tb.Inlines.Where(a => a is Run 
            && string.IsNullOrWhiteSpace(((Run)a).Text) 
            && !GetPreserveSpace(a)).ToList();
        spaces.ForEach(s => tb.Inlines.Remove(s));
    }
} 
```

完整的源代码及其解释都可以在[这里](http://blog.pieeatingninjas.be/2016/11/19/getting-rid-of-whitespaces-between-runs-in-a-textblock/)找到。通过使用此附加属性，您可以按照您想要的方式保持您的 XAML 格式，但您不会在呈现的 XAML 中获得这些空格。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2018-10-27T15:37:15.857

我的解决方案是使默认字体大小几乎不可见（`FontSize="1"`），然后在每个位置将字体大小设置为所需的大小`<Run`：

```
<TextBlock HorizontalAlignment="Center"
           VerticalAlignment="Center"
           FontSize="1"
           FontFamily="Arial"
           Foreground="#414141">        

    <Run FontSize="10" Text="{Binding LoadsCount}" />        
    <Run FontSize="10" Text="+" />        
    <Run FontSize="10" Text="{Binding BrokerLoadsCount}" />
</TextBlock> 
```

您最好在 Code Behind 中执行此操作。我已经尝试过以前的解决方案，但在某些情况下，VS 只是格式化了仔细缩进的代码。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2018-12-06T23:51:19.963

我将 Pieter 的附加属性移植到 WPF（我认为它用于 UWP）。

例子：

```
<StackPanel>
    <TextBlock Text="Before:" FontWeight="SemiBold"/>
    <TextBlock>
        Foo
        <Run Text="Bar"/>
        <Run>Baz</Run>
    </TextBlock>
    <TextBlock Text="After:" FontWeight="SemiBold" Margin="0,10,0,0"/>
    <TextBlock local:TextBlockHelper.TrimRuns="True">
        Foo
        <Run Text="Bar"/>
        <Run>Baz</Run>
    </TextBlock>
    <TextBlock Text="Use two spaces if you want one:" FontWeight="SemiBold" Margin="0,10,0,0"/>
    <TextBlock local:TextBlockHelper.TrimRuns="True">
        Foo
        <Run Text="  Bar"/>
        <Run>Baz</Run>
    </TextBlock>
</StackPanel> 
```

[![截屏](../Images/1ec6f9642da747a4a5fd7cc933eb7808.png)](https://i.stack.imgur.com/WwJDe.png)

```
using System;
using System.Linq;
using System.Text.RegularExpressions;
using System.Windows;
using System.Windows.Controls;
using System.Windows.Documents;

public class TextBlockHelper
{
    public static bool GetTrimRuns(TextBlock textBlock) => (bool)textBlock.GetValue(TrimRunsProperty);
    public static void SetTrimRuns(TextBlock textBlock, bool value) => textBlock.SetValue(TrimRunsProperty, value);

    public static readonly DependencyProperty TrimRunsProperty =
        DependencyProperty.RegisterAttached("TrimRuns", typeof(bool), typeof(TextBlockHelper),
            new PropertyMetadata(false, OnTrimRunsChanged));

    private static void OnTrimRunsChanged(DependencyObject d, DependencyPropertyChangedEventArgs e)
    {
        var textBlock = d as TextBlock;
        textBlock.Loaded += OnTextBlockLoaded;
    }

    static void OnTextBlockLoaded(object sender, EventArgs args)
    {
        var textBlock = sender as TextBlock;
        textBlock.Loaded -= OnTextBlockLoaded;

        var runs = textBlock.Inlines.OfType<Run>().ToList();
        foreach (var run in runs)
            run.Text = TrimOne(run.Text);
    }

    private static string TrimOne(string text)
    {
        if (text.FirstOrDefault() == ' ')
            text = text.Substring(1);
        if (text.LastOrDefault() == ' ')
            text = text.Substring(0, text.Length - 1);

        return text;
    }
} 
```

# wordpress - 重写为 Wordpress 基础之外的 URL

> ID：11090088
> 
> 赞同：9
> 
> 时间：2012-06-18T19:55:36.097
> 
> 标签：wordpress, .htaccess, mod-rewrite, permalinks

我的 wordpress 博客安装在`domain.com/blog`，我有一个页面，其子页面的结构看起来像`domain.com/blog/page`和`domain.com/blog/page/subpage`.

我希望我的访问者能够在不被外部重定向到该 URL 的情况下访问`domain.com/subpage`并查看内容`domain.com/blog/page/subpage`，避免 wordpress 永久链接重写。

我尝试使用`RewriteRule ^subpage$ /page/subpage [L]`并且正在提供内容，但 url 看起来像`domain.com/blog/page/subpage`（我猜 Wordpress 永久链接正在获取它。）

.ht 访问：

```
# BEGIN WordPress
<IfModule mod_rewrite.c>
RewriteEngine On
RewriteBase /blog/
RewriteRule ^index\.php$ - [L]

// tried inserting my code here.

RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule . /blog/index.php [L]
</IfModule>

# END WordPress 
```

编辑：

这些日志显示页面访问活动 -

```
ip - - [19/Jun/2012:14:03:53 -0400] "GET /subpage/ HTTP/1.1" 301 - "http://domain.com/referrer/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10.7; rv:13.0) Gecko/20100101 Firefox/13.0.1"
ip - - [19/Jun/2012:14:03:53 -0400] "GET /blog/page/subpage/ HTTP/1.1" 200 20022 "http://domain.com/referrer/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10.7; rv:13.0) Gecko/20100101 Firefox/13.0.1" 
```

另外，这是我的根 .htaccess -

```
<IfModule mod_rewrite.c>
RewriteEngine On
RewriteBase /blog/
RewriteRule ^subpage/?$ /blog/page/subpage/ [QSA,L] 
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule . /blog/index.php [L]
</IfModule>

RewriteCond %{HTTP_HOST} ^domain.com$ [OR]
RewriteCond %{HTTP_HOST} ^www.domain.com$ 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2016-04-06T16:26:56.190

Adding some rules in your htaccess, while using Wordpress, is always tricky. Instead, you should use its rewrite API.

**First**, put this code at then end of `/wp-content/themes/CURRENT_THEME_ACTIVATED/functions.php`:

```
function my_custom_page_rewrite_rule()
{
    add_rewrite_rule('^subpage/?', 'index.php?pagename=page/subpage', 'top');
}
add_filter('init', 'my_custom_page_rewrite_rule'); 
```

*Remark*: you need to specify the page levels in `pagename` parameter, otherwise the url will change.

**Then**, you need to tell Wordpress it has to take your new rule into consideration. For this, go to your admin panel: `Settings` > `Permalinks` > click on `Save` button. Now, you should be able to go to `domain.com/blog/subpage` and see the content of `domain.com/blog/page/subpage` (the url does not change anymore).

**Finally**, if you want to make `domain.com/subpage` reachable, you need to add a htaccess in root folder and put this code into it:

```
RewriteEngine On
RewriteBase /

RewriteCond %{REQUEST_FILENAME} !-d
RewriteCond %{REQUEST_FILENAME} !-f
RewriteRule ^([^/]+)/?$ blog/$1 [L] 
```

And... that's it. You can go to `domain.com/subpage` and now you'll get what you want.

# c# - 未正确调用/解析基本构造函数

> ID：11090089
> 
> 赞同：1
> 
> 时间：2012-06-18T19:55:38.130
> 
> 标签：c#, .net, visual-studio-2010, constructor, overriding

**背景资料：**

我在这个项目中使用 Microsoft Visual C# 2010。我想使用一个类 System.IO.DirectoryInfo 来获取目录列表。但是，GetDirectories() 的实现对我不起作用，因为在抛出 UnauthorizedAccessException 异常时，该函数会失败。

我想创建一个 DLL，该 DLL 定义了具有与 DirectoryInfo 类相同的功能的派生类，但会覆盖 GetDirectories()，因此我可以获得所需的功能。

**问题：**

尝试调用基本构造函数时，我一定做错了什么。我收到错误“'object'不包含带有 1 个参数的构造函数”。

```
using System;
using System.IO;

namespace CompanyName.System.IO
{
    public class FlexibleDirectoryInfo : DirectoryInfo
    {
        public FlexibleDirectoryInfo(string path) : base(path) {}
        [...] 
```

DirectoryInfo 没有默认构造函数，而是有一个带有字符串参数的构造函数，就像我正在尝试做的那样。但是，我不确定它是否正确解析了基本构造函数？

我有一种感觉，这是一个简单的修复。请帮忙指出我忽略了什么。:)

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-18T19:59:26.663

`DirectoryInfo`是密封类。所以你不能从中得到。来自 MSDN：

> 公共**密封**类 DirectoryInfo : FileSystemInfo

但是，您创建了一个继承[FileSystemInfo](http://msdn.microsoft.com/en-us/library/system.io.filesysteminfo.aspx)的类（的超类`DirectoryInfo`）。您必须创建大部分实现，但这是唯一的方法。

# python - Tkinter子窗口关闭后无法重新打开

> ID：11090091
> 
> 赞同：0
> 
> 时间：2012-06-18T19:55:42.057
> 
> 标签：python, tkinter, window

这很难解释，所以我会尽力而为。

我有一个主程序窗口，其中有一个名为“备份/恢复”的按钮。按下此按钮会打开一个新窗口，其中有两个按钮可供选择；“备份还原”。按下其中任何一个按钮都会打开第三个窗口，其中包含有关执行操作的信息。当我第一次运行“备份”或“恢复”时，一切都很好。如果我关闭带有两个按钮的第二个窗口；然后从主窗口按“备份/恢复”按钮，它会带回带有两个按钮的第二个窗口，但单击时标有“备份”和“恢复”的按钮什么也不做。第三个窗口上的按钮只有在第二个窗口关闭一次后才会失去其功能。

创建窗口时，我使用以下代码：

```
def exportEFS(self): #this is the second window with two buttons
  self.exportGUI = Toplevel()

  Button(self.exportGUI, text='Backup', command=self.backup).pack(padx=100,pady=5)
  Button(self.exportGUI, text='Restore', command=self.restore).pack(padx=100,pady=5

def backup(self): #this is the backup window that does not work if the second window has     
                   been closed once.
  self.backup = Toplevel()
  <button code>

def restore(self): #this is the backup window that does not work if the second window has     
                   been closed once.
  self.restore = Toplevel()
  <button code> 
```

主窗口的代码太大而无法发布，我不确定是否有任何部分有帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-30T21:35:18.240

...调用顶层窗口的函数（“def backup(self):”）与顶层窗口本身同名（“self.backup = Toplevel()”），这可能是问题的原因。与“恢复”选项相同。

我有这样的东西，改名后一切正常。

# css - 在 css 中使用 ^ 符号

> ID：11090093
> 
> 赞同：0
> 
> 时间：2012-06-18T19:55:57.830
> 
> 标签：css, css-selectors

最近有人教了我一个有用的东西：在 css 中你可以写如下：

```
input[id^=start_of_name] 
```

这将允许您选择 ID 以“start_of_name”开头的所有输入。你能做同样的事情来选择名字的结尾吗？中间？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-18T19:58:55.527

**[att^=val]** 表示具有 att 属性的元素，其值以前缀“val”开头。如果 "val" 是空字符串，则选择器不代表任何内容。

**[att$=val]** 表示具有 att 属性的元素，其值以后缀“val”结尾。如果 "val" 是空字符串，则选择器不代表任何内容。

**[att*=val]** 表示具有 att 属性的元素，其值包含至少一个子字符串“val”的实例。如果 "val" 是空字符串，则选择器不代表任何内容。

来源：[http ://www.w3.org/TR/css3-selectors/#attribute-substrings](http://www.w3.org/TR/css3-selectors/#attribute-substrings)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-18T19:59:09.897

是的，有：

[http://www.w3.org/TR/css3-selectors/#attribute-substrings](http://www.w3.org/TR/css3-selectors/#attribute-substrings)

> **[att^=val]**表示具有 att 属性的元素，其值以前缀“val”开头。如果 "val" 是空字符串，则选择器不代表任何内容。
> 
> **[att$=val]**表示具有 att 属性的元素，其值以后缀“val”结尾。如果 "val" 是空字符串，则选择器不代表任何内容。
> 
> **[att*=val]**表示具有 att 属性的元素，其值包含至少一个子字符串“val”的实例。如果 "val" 是空字符串，则选择器不代表任何内容。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-18T19:58:59.410

这是 CSS3 选择器的完整列表：http: [//www.w3.org/TR/selectors/#selectors](http://www.w3.org/TR/selectors/#selectors)

在您的情况下，您正在寻找 E[foo$="bar"]

这匹配一个 E 元素，其 "foo" 属性值正好以字符串 "bar" 结尾

# asp.net-mvc - asp.net mvc - 如何在路由中配置默认 参数

> ID：11090098
> 
> 赞同：3
> 
> 时间：2012-06-18T19:56:14.887
> 
> 标签：asp.net-mvc, asp.net-mvc-routing

我有一个控制器调用`Diary`一个名为`View`.

如果我收到格式为“Diary/2012/6”的 URL，我希望它使用= 2012 和= 6调用`View`操作。`year``month`

如果我收到“日记”形式的 URL，我希望它使用= [当前年份] 和= [当前月份编号]调用`View`操作。`year``month`

我将如何配置路由？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-18T20:00:00.533

```
routes.MapRoute(
    "DiaryRoute",
    "Diary/{year}/{month}",
    new { controller = "Diary", action = "View", year = UrlParameter.Optional, month = UrlParameter.Optional }
); 
```

和控制器动作：

```
public ActionResult View(int? year, int? month)
{
    ...
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-18T20:00:03.123

在您的路线中，您可以使用以下内容：

```
routes.MapRoute(
                "Dairy", // Route name
                "Dairy/{year}/{month}", // URL with parameters
                new { controller = "Dairy", action = "Index", year = DateTime.Now.Year, month = DateTime.Now.Month }); 
```

如果未提供年/月，则将发送当前值。如果提供了它们，那么路由将使用这些值。

*   /乳制品/ -> 年 = 2012，月 = 6
*   /Dairy/1976/04 -> 年 = 1976，月 = 4

**编辑**

除了下面的注释之外，这是用于使用上述条件创建新项目的代码。

全球阿萨克斯

```
public static void RegisterRoutes(RouteCollection routes)
{
    routes.IgnoreRoute("{resource}.axd/{*pathInfo}");

    routes.MapRoute(
        "Default", // Route name
        "Dairy/{year}/{month}", // URL with parameters
        new { controller = "Dairy", action = "Index", year = DateTime.Now.Year, month = DateTime.Now.Month } // Parameter defaults
    );

} 
```

乳品控制器

```
public ActionResult Index(int year, int month)
{
    ViewBag.Year = year;
    ViewBag.Month = month;
    return View();
} 
```

风景

```
@{
    ViewBag.Title = "Index";
}

<h2>Index</h2>

Month - @ViewBag.Month <br/>
Year - @ViewBag.Year 
```

结果：

*   /Dairy/1976/05 -> 输出 1976 年和 5 月
*   / -> 年输出 2012，月输出 6

# c# - 由于 PostBack 中的 Response.Redirect 而没有处理 ItemCommand？

> ID：11090102
> 
> 赞同：0
> 
> 时间：2012-06-18T19:56:24.513
> 
> 标签：c#, asp.net, postback, response.redirect, itemcommand

我的网站没有运行我的中继器运行的 ItemCommand 后面的代码时遇到问题。

以下是我在 C# 代码中的一些片段：

```
protected void Page_Load()
    {
        if (!Page.IsPostBack)
        {
            ddlGender.Items.Insert(0, new ListItem("-", "%"));
            ddlMerk.Items.Insert(0, new ListItem("-", "%"));
            ddlType.Items.Insert(0, new ListItem("-", "%"));
        }

        if (Page.IsPostBack)
        {
            Response.Redirect(String.Format("Catalogus.aspx?gender={0}&merkid={1}&type={2}", ddlGender.SelectedValue, ddlMerk.SelectedValue, ddlType.SelectedValue));
        }

    }

    protected void rCatalogus_ItemCommand(object source, RepeaterCommandEventArgs e)
    {
        if (e.CommandName == "voegToe")
        {
                HttpCookie winkelmandje = new HttpCookie("Winkelmandje");
                string product = (string)e.CommandArgument;
                winkelmandje[product] = "Test";
                winkelmandje.Expires = DateTime.Now.AddDays(2);
                Response.Cookies.Add(winkelmandje);

            Label1.Text = "HALSKFDHSALKFDJAS";
        }
    } 
```

值得注意的是，我已将三个 DropDownLists 设置为 AutoPostBack，因此它们会触发填充 QueryStrings 的 IsPostBack 事件。

现在我注意到，当我注释掉“if (Page.IsPostBack)”部分时，事件触发得很好。所以我认为 Response.Redirect 正在阻止事件触发，对吗？我想找到一种方法来触发事件并让带有 Response.Redirect 的 PostBack 也发生，但我还没有找到方法。

我真诚地希望你们中的任何人都可以帮助我，我将不胜感激。

谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-18T20:10:18.003

如果您希望您的页面仅在 ItemCommand 事件期间“重定向”，那么您可以在 Page_Load 期间将其移除并在 ItemCommand 事件内移动。

# javascript - 选择框选项不断变化

> ID：11090103
> 
> 赞同：0
> 
> 时间：2012-06-18T19:56:27.397
> 
> 标签：javascript, drop-down-menu

```
<Select id="amount" onchange="document.formName.submit(); updateCost();">
   <option id="0" value = "0"> Select amount ... </option>
   <option id="1" value = "2000"> $2000 </option>
   <option id="2" value = "3000"> $3000 </option>
   <option id="3" value = "4000"> $4000 </option>
   <option id="4" value = "5000"> $5000 </option>
</Select>

<Select id="duration" onchange="document.formName.submit(); updateCost();">
   <option id="1" value="2 years"> 2 years </option>
   <option id="2" value="6 years"> 6 years </option>
   <option id="3" value="Lifetime"> Lifetime </option>
</Select>

function updateCost() {      
  var rate = 0;
  if(document.formName.plan[p].checked) {
    if(value('coverageUser').indexOf('Enrolled') > -1){
       rate = getRate();    
    }
    payCycle = 1;
    document.formName.cost.value = formatCurr((rate) * payCycle);
  }    
} 
```

我有这两个选择框，当我首先选择一个选项时，成本会正确更新。但是在选择金额后，我应该从默认值为 的第二个选择框中选择持续时间`2 years`。但是当我将值更改为时`6 years`，成本会更新，但选择框选项不会保留为`6 years`，而是更改回`2 years`。如何保留我在第二个选择框中选择的选项并正确更新成本？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-27T01:22:00.833

由于您正在提交，选择框不会保持其状态`onchange()`。每次更改都会导致页面重新加载。尝试从两者中删除它`select`。

除此之外，您的使用`id`方式错误：您不能`id`在同一页面中使用相同的两次。尝试这样的事情：

```
 <option value="1"> 2 years </option>
    <option value="2"> 6 years </option>
    <option value="3"> Lifetime </option> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-28T06:55:16.603

当您在表单提交后返回页面时：

*   `selected`用属性标记用户选择的选项：

    ```
    <select id="duration">
        <option value="2 years"> 2 years </option>
        <option value="6 years" selected> 6 years </option>
        <option value="Lifetime"> Lifetime </option>
    </select> 
    ```

*   `updateCost()`在页面加载时调用：

    ```
    window.onload = updateCost; 
    ```

    `window.onload`或者如果您已经有一个，请将其添加到您的函数中：

    ```
    window.onload = function() {
        ...
        updateCost();
    }; 
    ```

# html - 网站的外部菜单

> ID：11090104
> 
> 赞同：1
> 
> 时间：2012-06-18T19:56:32.973
> 
> 标签：html, css, menu

我将如何创建一个菜单（复杂的、简单的等 - 在本示例中无关紧要），然后链接到我网站每个页面中的每个菜单？

我希望创建`menu`然后让`index.htm`, `page2.htm`, `page3.htm`, ..`pageN.htm`引用它并加载它，就好像它单独存在于每个页面上一样。

基本上，我希望只写一次，然后到处使用。

例如：

```
Menu:

Home | Page 1 | Page 2 | Page 3 | Page N 
```

接着：

```
Page1.htm

Home | Page 1 | Page 2 | Page 3 | Page N

Content
More Content
Even More Content 
```

...和...

```
Page2.htm

Home | Page 1 | Page 2 | Page 3 | Page N

Content
More Content
Even More Content 
```

...等等，这样当我更改菜单的内容时，它会自动反映在引用它的每个页面上，这与 CSS 的工作原理大致相同。

非常感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-18T20:06:30.203

复制粘贴。:)

说真的，我只开发了一两年的 HTML/CSS，我发现唯一可靠的方法是复制/粘贴菜单。现在，如果您完全使用 PHP，即使是一行 PHP，您也可以`include`创建一个 HTML 文件（这里是您的菜单），该文件保存在单独的 menu.html 文件中。

使菜单保持最新需要大量工作，尤其是当您有很多页面时 - 这就是为什么这么多人切换到 Joomla/Wordpress/Drupal 之类的内容管理系统 (CMS)，或者添加了 PHP，甚至是 Dreamweaver这样做（图书馆项目）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-18T19:59:46.180

在 lis 内使用带有标签的内联 ul 链接到其他页面（也许解释它不好

```
<ul
   <li class ="current_page" ><a href="someUrl1">Page 1</a></li>
    <li><a href="someUrl2">Page 2</a></li>
</ul> 
```

等等等等

# c# - 使用 C# 的图像/形状的外部边界点

> ID：11090105
> 
> 赞同：0
> 
> 时间：2012-06-18T19:56:40.223
> 
> 标签：c#, drawing, geometry, polygon

我有一些图像，我想在外边缘周围画一个多边形。图像本身位于透明背景上，我在图像中创建了一个像素数组，其中包含一个点并且不透明（或白色）。

现在，我的问题是：如何在外边缘点周围绘制一个准确的多边形？我使用了我读到的[格雷厄姆扫描算法](http://www.aforgenet.com/)来在边缘周围创建一个凸包，但这似乎不适用于具有凹面的物体。例如：

[http://i48.tinypic.com/4s0lna.png](http://i48.tinypic.com/4s0lna.png)

左侧的图像使用此方法填充右侧的图像。如您所见，它“填充”有点过多。

我认为必须有一些*其他*算法或方法可以用来解决这个问题，但我不确定在哪里看或它可能被称为什么。谁能指出我正确的方向？我正在使用 C#/.net，希望可能已经存在一些可以按照这些思路工作的东西。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-27T10:41:45.303

我认为 2D“Alpha 形状”算法将是您的正确选择。

[http://www.cgal.org/Manual/latest/doc_html/cgal_manual/Alpha_shapes_2/Chapter_main.html](http://www.cgal.org/Manual/latest/doc_html/cgal_manual/Alpha_shapes_2/Chapter_main.html)

Alpha 形状可以被认为是“凸壳”算法的*概括*，它允许生成更一般的形状。

通过使用 alpha 形状，您将可以通过更改 alpha 参数值来控制最终形状要捕获的细节级别。

您可以在这里尝试 Java 小程序：http: [//cgm.cs.mcgill.ca/~godfried/teaching/projects97/belair/alpha.html](http://cgm.cs.mcgill.ca/~godfried/teaching/projects97/belair/alpha.html)

更好地了解该算法是否有效。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-19T04:44:20.143

您可以使用洪水填充方法从逐个像素级别开始。

```
Start in the corner, checking that it does have zero alpha.
Check the neighbours for zero alpha and iterate until we have no unchecked neighhours. 
```

这为您提供了一个图像蒙版，该蒙版由两个简单连接的区域组成，内部和外部。

然后，您寻求的集合包括：

```
 all the points in the exterior which are on the boundary of the interior. 
```

然后，您可以通过以下方式将其转换为多边形：

```
Take an initial polygon that consists of all the points in the edge set
Remove redundant vertices that lie along straight edges. 
```

# php - 显示具有多个值的唯一列名

> ID：11090107
> 
> 赞同：1
> 
> 时间：2012-06-18T19:56:52.763
> 
> 标签：php, mysql

我有一个查询加入两个表

```
SELECT DISTINCT prescriptions.prescription, prescription_history.dosage
FROM prescriptions
LEFT OUTER JOIN prescription_history ON prescriptions.prescription=prescription_history.prescription 
```

现在处方表有两个字段主键和处方名称，处方历史有 4 个字段，其中处方名称是处方的外键。为了让这更清楚一点。

```
Prescriptions table:
id   prescription
1    advair
..   .... 
```

等等

```
Prescription_History
id   prescription   account_num   dosage
1    advair         989           20mcg
2    advair         567           50mcg
..   ...            ...           ... 
```

等等。

如果我要输出它来创建复选框，我希望看到处方名称后跟剂量：

```
Advair   Symbicort
20mcg    140/4.5
50mcg    120/4.5 
```

等等

但是，相反，我得到了两次处方名称，然后是剂量。

```
Advair  Advair   Symbicort   Symbicort
20mcg   50mcg    140/4.5     120/4.5 
```

等等

我如何能够一次显示处方名称，然后显示该处方的所有剂量。我尝试使用 array_unique 但它只会输出一个处方名称，后跟剂量，它会忽略所有其他处方名称，即使它们不相同

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-18T20:13:58.670

听起来您想要做的是链接这两个表，然后遍历它们，找到处方的每个唯一实例，并找到与其对应的每个剂量。您可以这样做的一种方法是将处方作为唯一键的数组，然后是与每个处方对应的剂量/处方历史。所以你可以做这样的事情（未经测试）：

```
$sql = "SELECT DISTINCT prescriptions.prescription, prescription_history.dosage, prescription_history.account_num FROM prescriptions LEFT OUTER JOIN prescription_history ON  rescriptions.prescription=prescription_history.prescription"
$result = mysql_query($sql) or die("MySQL-Error: " . mysql_error());
$arr = array();
while ($new = mysql_fetch_row($result)) {
      if (array_key_exists($new[0], $arr)) {
           array_push($arr[$new[0]], array($new[1], $new[2]));

      } else {
           $arr[$new[0]] = array();
           array_push($arr[$new[0]], array($new[1], $new[2]));
      }
 } 
```

之后，您可以使用 foreach 循环对其进行迭代：

```
foreach ($arr as $key) {
    print "Prescription: " . $key
    foreach($key as $value) {
        print_r$value;
    } 
```

# c++ - 指向 const 成员函数的非类型模板函数指针

> ID：11090109
> 
> 赞同：4
> 
> 时间：2012-06-18T19:56:56.217
> 
> 标签：c++, constants, function-pointers

我正在编写一个委托类，但它无法采用 const 成员函数。这是一个测试用例：

```
class foo
{
    public:
   void MemberFunction()
   {
         printf("non const member function\n");
   }

   void ConstMemberFunction() const
   {
           printf("const member function\n");
   }
};

template <class C, void (C::*Function)()>
void Call(C* instance)
{
       (instance->*Function)();
}

int main (int argc, char** argv)
{
       foo bar;
       Call<foo,&foo::MemberFunction>(&bar);
       Call<foo,&foo::ConstMemberFunction>(&bar);
} 
```

现在编译器（visual studio 2010）给了我一个错误，他无法将 const 成员函数转换为非常量函数：

```
2>..\src\main.cpp(54): error C2440: 'specialization' : cannot convert from 'void (__cdecl foo::* )(void) const' to 'void (__cdecl foo::* const )(void)'
2>          Types pointed to are unrelated; conversion requires reinterpret_cast, C-style cast or function-style cast
2>..\src\main.cpp(54): error C2973: 'Call' : invalid template argument 'void (__cdecl foo::* )(void) const'
2>          ..\src\main.cpp(37) : see declaration of 'Call' 
```

好的，通过添加以下内容轻松修复（我虽然：P）：

```
template <class C, void (C::*Function)() const>
void Call(C* instance)
{
    (instance->*Function)();
} 
```

但现在编译器完全糊涂了（我也很困惑）。看起来他现在尝试将 const 函数用于非常量成员函数，将非常量函数用于 const 成员函数。

```
2>..\src\main.cpp(53): error C2440: 'specialization' : cannot convert from 'void (__cdecl foo::* )(void)' to 'void (__cdecl foo::* const )(void) const'
2>          Types pointed to are unrelated; conversion requires reinterpret_cast, C-style cast or function-style cast
2>..\src\main.cpp(53): error C2973: 'Call' : invalid template argument 'void (__cdecl foo::* )(void)'
2>          ..\src\main.cpp(43) : see declaration of 'Call'
2>..\src\main.cpp(53): error C2668: 'Call' : ambiguous call to overloaded function
2>          ..\src\main.cpp(43): could be 'void Call<foo,void foo::MemberFunction(void)>(C *)'
2>          with
2>          [
2>              C=foo
2>          ]
2>          ..\src\main.cpp(37): or       'void Call<foo,void foo::MemberFunction(void)>(C *)'
2>          with
2>          [
2>              C=foo
2>          ]
2>          while trying to match the argument list '(foo *)'
2>..\src\main.cpp(54): error C2440: 'specialization' : cannot convert from 'void (__cdecl foo::* )(void) const' to 'void (__cdecl foo::* const )(void)'
2>          Types pointed to are unrelated; conversion requires reinterpret_cast, C-style cast or function-style cast
2>..\src\main.cpp(54): error C2973: 'Call' : invalid template argument 'void (__cdecl foo::* )(void) const'
2>          ..\src\main.cpp(37) : see declaration of 'Call'
2>..\src\main.cpp(54): error C2668: 'Call' : ambiguous call to overloaded function
2>          ..\src\main.cpp(43): could be 'void Call<foo,void foo::ConstMemberFunction(void) const>(C *)'
2>          with
2>          [
2>              C=foo
2>          ]
2>          ..\src\main.cpp(37): or       'void Call<foo,void foo::ConstMemberFunction(void) const>(C *)'
2>          with
2>          [
2>              C=foo
2>          ]
2>          while trying to match the argument list '(foo *)' 
```

如果我重命名第二个 Call 函数（使用 const），一切正常，但我宁愿使用一个函数。

那么，任何人都可以指出我做错了什么以及如何使这项工作有效吗？

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-18T20:01:43.447

我认为您可以通过从模板类型签名中删除函数指针并依赖重载来解决此问题：

```
template <class C>
    void Call(C* ptr, void (C::*function)()) {
    (ptr->*function)();
}
template <class C>
    void Call(C* ptr, void (C::*function)() const) {
    (ptr->*function)();
} 
```

这现在使用正常的函数重载来选择应该调用两个函数中的哪一个。 `const`成员函数指针将向下调用到第二个版本，而非函数指针将`const`向上调用到第一个版本。这也意味着您不需要显式地向模板函数提供任何类型信息；编译器可以`C`在这两种情况下进行推断。

如果 (1) 这不起作用或 (2) 这确实有效，但不是您想要的，请告诉我。

希望这可以帮助！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-18T20:15:49.017

使用`std::bind`VS2010 支持的 or lambdas，`std::function`这将不再是您的问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-18T21:22:57.643

您的问题是成员函数指针与 const 成员函数指针的类型不同。我将您的`Call`功能修改为：

```
template< typename C, typename funcptr_t, funcptr_t ptr >
void Call( C *instance )
{
  (instance->*ptr)();
} 
```

现在使用附加的模板参数，我可以这样称呼它：

```
Call<foo,void (foo::*)(),&foo::MemberFunction>(&bar);
Call<foo,void (foo::*)() const, &foo::ConstMemberFunction>(&bar); 
```

不过，这有点乱。重载解决方案更好！:-)

# python - 一维到二维数组 - python

> ID：11090119
> 
> 赞同：4
> 
> 时间：2012-06-18T19:57:35.560
> 
> 标签：python

我想将存储在 1D 中的数据更改为 2D：我的意思是：

从

```
x|y|a
1|1|a(1,1)
2|1|a(2,1)
3|1|a(3,1)
1|2|a(1,2)
... 
```

进入：

```
x\y|1     |2     |3
1  |a(1,1)|a(1,2)|a(1,3
2  |a(2,1)|a(2,2)|a(2,3)...
3  |a(3,1)|a(3,2)|a(3,3)...
    ... 
```

我做了2个循环：

```
(rows - array of x,y,a)
for n in range(len(rows)):
            for k in range(x_len):
                    for l in range(y_len):
                            if ((a[2, n] == x[0, k]) and (a[3, n] == y[0, l])):
                                    c[k, l] = a[0, n] 
```

但这需要很长时间，所以我的问题是在 Python 中是否有一个聪明而快速的解决方案。

**所以要澄清我想要做什么：**

我知道 return() 函数，关键是它在数组**a**中是随机的。

所以：

> ```
> a = np.empty([4, len(rows)] 
> ```

我将数据读入数据库中的数组**a中，该数组有****4 列 (1,2,x,y)**和**'len(rows)' 行**。

我对“1”列感兴趣-我想将其放入新修改的数组中。

> ```
> x = np.zeros([1, x_len], float)
> 
> y = np.zeros([1, y_len], float) 
> ```

**x**是来自数组**a**的已排序**列 (x)**的向量，但没有长度为**x_len的副本**

 ****（我通过 sql 查询读取它：select distinct ... ）

**y**是长度为**y_len**的数组**a** （不带副本）中的已排序**列 (y)的向量**

 ****然后我正在制作数组：

> ```
> c = np.zeros([x_len, y_len], float) 
> ```

并将数组 a 中的数据放入 3 个循环（抱歉之前的错误）：>

> ```
>  for n in range(len(rows)):
>      for k in range(x_len):
>         for l in range(y_len):
>           if ((a[2, n] == x[0, k]) and (a[3, n] == y[0, l])):
>               c[k, l] = a[0, n] 
> ```

例子：

数组**a**

> ```
>  array([[1, 3, 6, 5, 6], 
>           [1, 2, 5, 5, 6], 
>           [1, 4, 7, 1, 2],   ## x
>           [2, 5, 3, 3, 4]])  ## y 
> ```

向量：**x**和**y**

> ```
>  [[1,2,4,7]]   ## x with x_len=4
> 
>  [[2,3,4,5]]   ## y with y_len=4 
> ```

数组**c**

> ```
>  array([[1, 5, 0, 0], 
>           [0, 0, 0, 0],  
>           [0, 0, 0, 3],  
>           [0, 6, 0, 0]]) 
> ```

最后一个数组**c**看起来像这样（第一个 a[0] 被写入）：

> ```
>  x\y 2|3|4|5
>  -----------
>  1   1|5|0|0
>  2   0|0|0|0
>  4   0|0|0|3
>  7   0|6|0|0 
> ```

我希望我没有弄错它是如何写入数组**c**的。

非常感谢您的帮助。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-18T20:04:24.603

你可以使用[numpy：](http://scipy.org/Numpy_Example_List_With_Doc)

```
>>> import numpy as np
>>> a = np.arange(9)
>>> a
array([0, 1, 2, 3, 4, 5, 6, 7, 8])
>>> a.reshape(3,3)
array([[0, 1, 2],
       [3, 4, 5],
       [6, 7, 8]])
#or:
>>> a.reshape(3,3).transpose()
array([[0, 3, 6],
       [1, 4, 7],
       [2, 5, 8]]) 
```********

# html - 底部边框没有出现在ie中

> ID：11090120
> 
> 赞同：1
> 
> 时间：2012-06-18T19:57:36.793
> 
> 标签：html, css, internet-explorer, border

我的 div 在除 ie 之外的所有浏览器中都有圆角边框。我想我需要一些兼容性 css。

[http://jsfiddle.net/SineMetu/PQtbw/2/](http://jsfiddle.net/SineMetu/PQtbw/2/)

HTML：

```
<div class="upper_button">
    <a href="http://www.yahoo.com/" target="_blank"><h2>Blah2</h2></a>
</div>
<div class="upper_button">
    <a href="http://www.google.com/" target="_blank"><h3>Blah</h3></a>
</div> 
```

CSS：

```
.upper_button {
    padding: 5px 20px;
    width: 120px;
    float: right;
    height:22px;
    border-bottom-left-radius: 3px;
    border-bottom-right-radius: 3px;
    background: rgb(147,206,222); /* Old browsers */
    background: -moz-linear-gradient(top, rgba(147,206,222,1) 0%, rgba(117,189,209,1) 41%, rgba(73,165,191,1) 100%); /* FF3.6+ */
    background: -webkit-gradient(linear, left top, left bottom, color-stop(0%,rgba(147,206,222,1)), color-stop(41%,rgba(117,189,209,1)), color-stop(100%,rgba(73,165,191,1))); /* Chrome,Safari4+ */
    background: -webkit-linear-gradient(top, rgba(147,206,222,1) 0%,rgba(117,189,209,1) 41%,rgba(73,165,191,1) 100%); /* Chrome10+,Safari5.1+ */
    background: -o-linear-gradient(top, rgba(147,206,222,1) 0%,rgba(117,189,209,1) 41%,rgba(73,165,191,1) 100%); /* Opera 11.10+ */
    background: -ms-linear-gradient(top, rgba(147,206,222,1) 0%,rgba(117,189,209,1) 41%,rgba(73,165,191,1) 100%); /* IE10+ */
    background: linear-gradient(top, rgba(147,206,222,1) 0%,rgba(117,189,209,1) 41%,rgba(73,165,191,1) 100%); /* W3C */
    filter: progid:DXImageTransform.Microsoft.gradient( startColorstr='#93cede', endColorstr='#49a5bf',GradientType=0 ); /* IE6-9 */
    -moz-box-shadow: 1px 1px 1px rgba(000,000,000,0.2),
        inset 0px 0px 0px rgba(255,255,255,0);
    -webkit-box-shadow: 1px 1px 1px rgba(000,000,000,0.2),
        inset 0px 0px 0px rgba(255,255,255,0);
    text-shadow: 0px -1px 0px rgba(000,000,000,0),
        0px 1px 0px rgba(255,255,255,0.3); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-18T20:01:37.027

IE8 及以下不支持border-radius 属性。

有很多解决方法，例如：

*   [http://code.google.com/p/curved-corner/](http://code.google.com/p/curved-corner/)
*   [http://css3pie.com/](http://css3pie.com/)
*   [http://modernizr.com/](http://modernizr.com/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-18T20:05:17.990

IE9 以下的 IE 版本不支持边框半径。

IE9 确实支持它，但您的示例不起作用，因为 IE 在将边框半径和 CSS 渐变应用于同一元素时出现问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-18T20:06:28.370

对于 IE9，您的过滤器是导致它的原因。

IE过滤器突破了边界半径，您可以通过将背景更改为纯色并移除过滤器来测试这一点。见这里：http: [//jsfiddle.net/PQtbw/12/](http://jsfiddle.net/PQtbw/12/)

编辑：要修复它，请为您的按钮添加一个包装器并使其具有边框半径，然后设置`overflow: hidden;`

见这里：http: [//jsfiddle.net/PQtbw/13/](http://jsfiddle.net/PQtbw/13/)

# php - 有什么方法可以加快这个 Magento 代码的速度吗？

> ID：11090122
> 
> 赞同：2
> 
> 时间：2012-06-18T19:57:48.467
> 
> 标签：php, magento

有什么方法可以加快这个 Magento 代码的速度吗？目前它正在浏览大约 2k 种产品，运行大约需要 20 分钟。

我猜这个问题与 product->load() 调用有关，但我对 Magento 不够熟悉，无法知道它需要的开销。

谢谢你。

# 从控制器

```
Mage::dispatchEvent(
    'category_rule_save',
    array(
        'rule_id'        => $id,
        'attribute_code' => $data['attribute_code'],
        'operator'       => $data['operator'],
        'value'          => $data['value'],
        'category_id'    => $data['category'],
        'store_id'       => $data['store_id']
    )
); 
```

# 来自 Observer.php

```
public function onCategoryRuleSave($observe)
{
    $collection =
        Mage::getModel('catalog/product')->getCollection()
            ->addAttributeToSelect($observe['attribute_code']);
    $write = Mage::getSingleton('core/resource')->getConnection('core_write');

    foreach ($collection as $product) {
        $productId = $product->getId();
        $product = $product->load($productId);
        $productAttributeValue = '';
        $productAttributeValue =
            Mage::getModel('catalog/product')->load($productId)
                ->getAttributeText( $observe['attribute_code'] );
        $r = 0;

        if ( is_numeric($observe['value']) ) {
            switch($observe['operator']) {
                case "<":
                    $r = ($productAttributeValue < $observe['value']) ? 1 : 0;
                    break;
                case ">":
                    $r = ($productAttributeValue > $observe['value']) ? 1 : 0;
                    break;
                case "<=":
                    $r = ($productAttributeValue <= $observe['value']) ? 1 : 0;
                    break;
                case ">=":
                    $r = ($productAttributeValue >= $observe['value']) ? 1 : 0;
                    break;
                case "==":
                    $r = ($productAttributeValue == $observe['value']) ? 1 : 0;
                    break;
                case "!=":
                    $r = ($productAttributeValue != $observe['value']) ? 1 : 0;
                    break;
            }
        }
        else {
            switch($observe['operator']) {
                case "==":
                    $r = (
                        strcmp(strtolower($productAttributeValue) , strtolower($observe['value'])) == 0
                    ) ? 1 : 0;
                    break;
                case "!=":
                    $r = (
                        strtolower($productAttributeValue) != strtolower($observe['value'])
                    ) ? 1 : 0;
                    break;
            }
        }

        if ($r==1) {
            $write->query(
                "REPLACE INTO `catalog_category_product` (`category_id`, `product_id`)
                VALUES (" . $observe['category_id'] . "," . $product->getId() . ")"
            );
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-18T20:10:38.780

尝试将产品加载替换为：

```
...
foreach ($collection as $product) {
 $productAttributeValue = $product->getAttributeText( $observe['attribute_code'] );
 $r = 0;
... 
```

您正在加载产品对象 2 次。foreach 中的 $product 变量已经是具有您需要使用的属性的已加载产品。考虑到 Magento 的 EAV 数据库结构，加载具有所有属性的 $product 对象的成本很高。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-19T05:37:21.650

```
1.$收藏=
        Mage::getModel('catalog/product')->getCollection()
        ->addAttributeToSelect($observe['attribute_code']);2.Mage::getModel('catalog/product')->load($productId)
                ->getAttributeText($observe['attribute_code']);

3.$product = $product->load($productId);

```

这真的很糟糕:)

```
$收藏=
        Mage::getModel('catalog/product')->getCollection()
        ->addAttributeToSelect('*');//这个字符串应该加载所有的产品属性

```

还有一些方法可以添加产品网站、产品商店等。

# asp.net-mvc-3 - MVC3 中基于权限的授权

> ID：11090123
> 
> 赞同：2
> 
> 时间：2012-06-18T19:57:49.550
> 
> 标签：asp.net-mvc-3

我正在尝试使用基于自定义权限的身份验证，其中定义了 users-Roles-Permissions 表。我需要根据权限限制访问 - CustomerEdit、CustomerView、CustomerDelete 等。我已经阅读[了有关使用自定义属性的基于角色的访问](http://www.jacopretorius.net/2010/01/permission-based-access-in-asp-net-mvc.html) 我看到的问题是我必须用属性装饰每个控制器操作。

还有另一种方法可以做到这一点吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-18T20:03:09.457

可以看看 Fluent Security [http://www.fluentsecurity.net/getting-started](http://www.fluentsecurity.net/getting-started) 可以在代码中配置

# spring - Amazon Elastic Load Balancer + Spring 中的登录循环

> ID：11090128
> 
> 赞同：0
> 
> 时间：2012-06-18T19:58:05.473
> 
> 标签：spring, amazon-ec2, spring-security, amazon-web-services, load-balancing

我已启动 ELB，但无法登录应用程序。每次我尝试登录应用程序时，我都会陷入循环。没有错误信息。使用 IP 地址/路径访问时，这两个实例上的应用程序都很好。

我从负载均衡器中删除了一个实例并尝试了。现在应用程序可以在添加另一个实例后使用 ELB 访问，它进入登录页面但无法登录。

我在这里看到了类似的东西：[Login loop with Spring Security requires-channel and Amazon Elastic Load Balancer](https://stackoverflow.com/questions/6405538/login-loop-with-spring-security-requires-channel-and-amazon-elastic-load-balance) 但我已经在使用建议的以下设置：ELB forward 80->80 and 443->443。设置 tomcat 使用 80 和 443。设置端口映射以在 Spring Security 上使用 80 和 443

我在这里有什么遗漏吗？

# c - 编码范式：如果函数成功，我应该返回 0 吗？

> ID：11090129
> 
> 赞同：0
> 
> 时间：2012-06-18T19:58:07.727
> 
> 标签：c, paradigms

当我编写用户定义函数时，如果函数成功，我应该返回 0 还是非空值？

如果我的函数成功，我个人喜欢返回 0，但我总是看到错误处理越来越`(!var)`像`(var != NULL)`. `1`那么`TRUE`即使在非布尔情况下返回一些值会更好吗？

Stack Overflow 有什么建议？

我问的原因是因为我写了一个非布尔包装器`WINAPI BOOL CreateProcessW`，它把我的代码扔掉了，因为我`returning 0`在包装器中并且在我检查 if 之前`TRUE`。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-18T20:00:30.517

我发现在成功时返回非零值更容易，因为你可以这样说：

```
int result = foo()
if (!result) { .. } 
```

这在意图上更加清楚。通常在异常或错误情况下返回 NULL，因此在成功时返回 NULL 是违反直觉的。

但是，更好的解决方案是对所有错误代码使用枚举并检查这些错误代码，而不是使用类似`!result`. 当有多个错误代码时，这也可以让您很好地处理这种情况。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-18T20:09:11.023

我会说只选择一个并保持一致。如果您正在以重要的方式使用其他应用程序，请尝试与该代码保持一致。

我喜欢在成功时返回 0，然后在不同的错误条件下使用非零数字。如果你使用 0 作为你的错误，那么你只能有一种返回的错误，而不会进入更复杂的错误处理。但是检查 !foo() 似乎违反直觉。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-18T20:09:19.587

这是一个非常主观的问题，但一般来说，我建议返回枚举错误代码并明确检查您期望的条件。这样可以避免诸如您发现自己所处的情况。

不过，一致性比任何一种方案都重要。

# java - 从另一个类更改一个类中的变量

> ID：11090130
> 
> 赞同：0
> 
> 时间：2012-06-18T19:58:24.453
> 
> 标签：java, japplet

**FNAKLNFDKA.java**

```
import java.awt.*;
import javax.swing.*;

public class GraphApplet extends JApplet{

private static final long serialVersionUID = 1L;
public static Graphics p;

public void init(){

    SwingUtilities.invokeLater(new Runnable() {
        public void run() {

    });
  }
} 
```

**FANKJ.java**

```
import java.awt.*;
import java.awt.geom.*;
import javax.swing.*;

class FASKHF extends JPanel {

public static Graphics p;
private static final long serialVersionUID = 1L;

public Graph(){
    this.setBackground(Color.yellow);
}

@Override
public Dimension getPreferredSize()
{   
    return (new Dimension(560,560));
}

public static void updateGraph() {

    repaint();
}

public void paint(Graphics F) {

    //line co-ordinates
    //the numbers represent the number of boxes on the graph
    //1st line on the l/h side
    int xstart1 = 2;
    int ystart1 = 3;

    int xfinish1 = 1;
    int yfinish1 = 9;

    //2nd line on the r/h side
    int xstart2 = 8;
    int ystart2 = 3;

    int xfinish2 = 9;
    int yfinish2 = 9;

  //drawing upper arc
    int arcX = 2;
    int arcY = 1;
    int imagRectWid = 6;
    int imagRectHei = 4;
    int startAngle = 0;
    int arcAngle = 180;

    //other

    f = xaxis22;
    g = xaxis11;

    //to be assigned later.
    //the values of xaxis and yaxis need to be separated
    //yaxis3 = 5;
    //yaxis4 = -5;

    //change -ve num to +ve
    int g3 = Math.abs(g);

    int a1 = g3 + f;
    int b1 = a1;

    int d = (appletWidth / a1);
    int e = (Height / b1);

    /**
     to determine the
     ammount of pixles there
     is in each box of the
     graph, both y-axis and 
     x-axis
     */
    int xbox = x1 / 10;
    int ybox = y1 / 10;

    //line variables
    //the xstart, ystart, etc represent the number of boxes

    //top point of the line on the graph
    px1 = xbox * xstart1;//start x
    py1 = ybox * ystart1;//start y

    //lowwer point of the line on the graph
    px = xbox * xfinish1;//finish x
    py = ybox * yfinish1;//finish y

    //other line on the right hand side
    p2x = xbox * xstart2;
    p2y = ybox * ystart2;

    p2x2 = xbox * xfinish2;
    p2y2 = ybox * yfinish2;

    //drawing arc
    int arcBoxX = arcX * xbox;
    int arcBoxY = arcY * ybox;
    int arcBoxWidth = imagRectWid * xbox;
    int arcBoxHeight = imagRectHei * ybox;

    //draw y-axis numbers 
    //(+ve)
    while(f != 0){
        String s = String.valueOf(f);
        p.drawString(s,(x + 5),m + 13);
        m = m + b;
        f = f - 1;
    }
    //(-ve)
    m2 = y;
    while(f2 != g-1){
        String u = String.valueOf(f2);
        p.drawString(u,(x + 5),m2 - 3);
        m2 = m2 + b;
        f2 = f2 - 1;
    }
    //draw x-axis numbers.
    //(-ve)
    while(g != 0){
        String t = String.valueOf(g);
        p.drawString(t,n,y - 5);
        n = n + a;
        g = g + 1;
    }
    //(+ve)
    n2 = x + a;
    while(g2 != g3+1){
        String vw = String.valueOf(g2);
        p.drawString(vw,n2 -10,y - 5);
        n2 = n2 + a;
        g2 = g2 + 1;
    }

    BasicStroke aLine2 = new BasicStroke(1.0F,
                                         BasicStroke.CAP_ROUND,BasicStroke.JOIN_ROUND);
    graph.setStroke(aLine2);

    //notch on numbers and grid lines
    //left to right, top to bottom notches
    int v2 = -5;
    int v5 = 0;
    while(i <= a1-1){

        p.drawLine(Da,0,Ea,y1);
        a = a + d;
        b = b + e;
        i = i + 1;
    }
    //notches
    while(i2 <= a1){
        p.setColor(Color.blue);//notch color
        p.drawString("x",v2+2,y+3);//xaxis
        p.drawString("x",x-4,v5+4);//yaxis
        v5 = v5 + e;
        v2 = v2 + d;
        i2 = i2 + 1;
    }

    }
  }
}

import java.awt.*;
import javax.swing.*;

}
}

 /*
  * this code is to accept a user input in order for him to
  * change the ranges of the xaxis and yaxis to his needs
  */

import javax.swing.Box;
import javax.swing.JButton;
import javax.swing.JTextField;
import java.awt.*;
import java.awt.event.*;
import javax.swing.*;

class ControlsB extends JPanel{

    private static final long serialVersionUID = 1L;
    public static int xaxis1,xaxis2,yaxis3,yaxis4;

    //public int xaxis11,xaxis22,yaxis33,yaxis44;
    //public Object ControlsB;
    //private Graph graph;
    //public static Graphics p;
    public String s;

public ControlsB(Box box2) {

    JButton btn1 = new JButton("Resize");

    final Box b = Box.createHorizontalBox();
    b.add(new JLabel("Please enter range:  "));
    Box b0 = Box.createVerticalBox();//create a vertical box to stack the controls

    Box b1 = Box.createHorizontalBox(); // create a horizontal box for the x-axis

    //x-axis
    b1.add(new JLabel("x-axis "));
    b1.add(new JLabel("from"));

    final JTextField f1 = new JTextField("  0");

    f1.setMaximumSize(new Dimension(100,30));

 b.add(btn1);
}

protected Object Integer(int xaxis12) {
    return null;
}
} 
```

现在这个程序的问题是；在**ControlsB**我有一个方法将控件放在底部（在黄色框/图形下），现在这些控件应该接受 x 轴线上的图形范围（目前仅 x 轴，因为y 轴的代码还没有准备好）。当用户按下“*调整大小*”按钮时，图表应该会出现变化。

然而，这并没有发生，并且按钮被按下了......我无法弄清楚我有什么问题。

在**ControlsB**文件中，我有一个**btn1**的动作侦听器，它是“*调整大小*”按钮，一旦按下底部，它将文本字段输入（f1 和 f2）更改为整数并分配给 x-axis1，x-axis 2 ，ETC...

现在我从这些变量（在动作侦听器方法中找到）引用到类**Graph.java**与此行：*public static int xaxis11 = ControlsB.xaxis1;*

谁能让我知道我遇到的这个问题的最佳解决方案是什么..??..

注意：所有这些文件都会编译。但图表没有出现。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-18T20:09:50.143

当您设置静态变量时`Graph`，您正在制作变量的副本`ControlB`，因此当您更改它们时`ControlB`，更改不会反映在 中`Graph`。`ControlB`而是通过（最好通过公共方法`ControlB`）访问变量

**更新**

要启用调用重绘，请从`Graph`和中删除所有静态修改`ControlsB`；添加一个保存图形实例的变量`ControlsB`并将该实例传递给它的构造函数

```
public class ControlsB extends JPanel
{
  Graph my_graph;
  //...
  public ControlsB(Box box2, Graph graph)
  { 
    my_graph = graph;
    // ...
  }
} 
```

然后将`updateGraph()`方法更改`Graph`为

```
public void updateGraph(int xaxis1, xaxis2, yaxis3, yaxis4)
{
  xaxis11 = xaxis1;
  xaxis22 = xaxis2;
  yaxis33 = yaxis3;
  yaxis44 = yaxis4;

  repaint();
} 
```

`actionperformed()`并在按钮的方法中这样调用它：

```
graph.updateGraph(xaxis1, xaxis2, yaxis3, yaxis4); 
```

*注意*：您似乎没有`box2`在`ControlsB`构造函数中使用，因此您可以删除该参数。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-18T20:06:29.487

它当前的编码方式是分配`xaxis11`, `xaxis22`, `yaxis33`, 并且`yaxis44`只分配一次。变量在 中更改时不会动态更新`ControlsB`。这意味着您只需在每次值更改时更新它们。为此，向您的`Graph`类添加一个方法：

```
public static void updateGraph() {
    xaxis11 = ControlsB.xaxis1;
    xaxis22 = ControlsB.xaxis2;
    yaxis33 = ControlsB.yaxis3;
    yaxis44 = ControlsB.yaxis4;
} 
```

然后，当用户更改 中的值时`ControlsB`，调用`Graph.update()`。确保在发生这种情况时也调用 repaint。

另请注意，将所有这些东西设为静态并不是您唯一的选择。您也可以简单地将对象引用为另一个类的字段，在构造函数中设置它，并在必要时调用它的方法。由于此问题，您的实现可能会遇到一些问题，因为将所有内容设为静态可能会影响您在对象上调用 repaint() 的能力，您需要执行此操作才能对其进行更新。

该问题的解决方法是添加`repaint()`到我上面概述的 updateGraph 方法的底部。

# c# - 在服务器上部署项目期间水晶报告版本错误

> ID：11090135
> 
> 赞同：0
> 
> 时间：2012-06-18T19:58:35.777
> 
> 标签：c#, asp.net, crystal-reports

在 Windows Server 2008 上部署我的网站期间，出现类似错误

> “无法加载文件或程序集'CrystalDecisions.VSDesigner，版本 = 10.5.3700.0，文化 = 中性，PublicKeyToken = 692fbea5521e1304'”

在网络配置文件中

我在服务器 2008 和 Visual Studio 框架上安装了 iis。当我禁用水晶报告的所有程序集时，所有页面都在工作。但是水晶报告不工作，所以请帮助我

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-19T00:15:52.307

我认为您需要从此链接下载并安装正确的运行时引擎： [http ://www.businessobjects.com/jump/xi/crvs2010/us2_default.asp](http://www.businessobjects.com/jump/xi/crvs2010/us2_default.asp)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-08-05T14:33:39.167

您是否可能缺少参考？检查此链接，它似乎与您的错误消息相同。那可能吗？

[ASP.NET3.5 中的水晶报表](https://stackoverflow.com/questions/1575703/crystal-reports-in-asp-net3-5?rq=1)

如果没有，您能否更准确地了解您的问题？非常感谢。

# powershell - 带有 if 语句的 powershell foreach-object

> ID：11090137
> 
> 赞同：2
> 
> 时间：2012-06-18T19:58:39.910
> 
> 标签：powershell, if-statement, foreach, hashtable, powershell-2.0

我正在尝试运行这个脚本，它基本上从文本文件中读取/解释文本并将“键”和“值”存储到哈希表中。现在我想在从文本文件中读取文本时更改特定的键和值。

以下是我文件中的文本：

```
line1 = apple  
line2 = firetruck  
line3 = cricket  
line4 = gorilla  
line5 = elephant  
line6 = banana  
line7 = jumper  
line8 = hat  
line9 = deer  
line10 = igloo 
```

这是我的代码：

```
param
(
    [Parameter(Mandatory=$true,  HelpMessage="Please specify the text filename.")]$fileName
)

$hashTable = @{}
$textFile = Get-Content $filename | ForEach-Object `
{
    $equalindex = $_.IndexOf("=")
    $key = $_.Substring(0,$equalindex)

    if($key -like "line2")
    {
        $key = "line2 has been changed"
    }

    $remainingLen = (($_.Length - 1) -$equalindex)
    $value = $_.Substring($equalindex +1, $remainingLen)

    if($value -like "value2")
    {
        $value = "value2 has been changed"
    }

    $hashtable.Add($key,$value)
} 

$hashtable.Set_Item("line5","line5 value has been changed")
$hashtable.GetEnumerator() | Sort-Object name 
```

当我运行我的代码时，它会输出哈希表，但不会更改我的“line2”键或“value2”值。这是做我想要完成的事情的正确/最合乎逻辑的方式吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-18T20:18:57.100

您需要删除前导和（或）尾随空格。试试这个：

```
$ht=@{}

Get-Content $filename | foreach{

    $key,$value = $_.Split('=') | foreach {$_.Trim()}

    if($key -like "line2")
    {
       $key = "line2 has been changed"
    }

    if($value -like "value2")
    {
        $value = "value2 has been changed"
    }

    $ht.Add($key,$value)
}

$ht.GetEnumerator() | Sort-Object name

Name                           Value                                                                                                                                     
----                           -----                                                                                                                                     
line1                          apple                                                                                                                                     
line10                         igloo                                                                                                                                     
line2 has been changed         firetruck                                                                                                                                 
line3                          cricket                                                                                                                                   
line4                          gorilla                                                                                                                                   
line5                          elephant                                                                                                                                  
line6                          banana                                                                                                                                    
line7                          jumper                                                                                                                                    
line8                          hat                                                                                                                                       
line9                          deer 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-18T20:15:32.357

我认为尾随空间让你失望。

改变这个：

```
$key = $_.Substring(0,$equalindex) 
```

对此：

```
$key = $_.Substring(0,$equalindex).Trim(' ') 
```

或者索引可能已关闭，因为这似乎也有效：

```
$key = $_.Substring(0,$equalindex - 1) 
```

# sql - Oracle SQL 将计数汇总到范围内

> ID：11090140
> 
> 赞同：0
> 
> 时间：2012-06-18T19:58:44.373
> 
> 标签：sql, oracle

> **可能重复：**
> [Oracle：如何在一个范围内“分组”？](https://stackoverflow.com/questions/2483140/oracle-how-to-group-by-over-a-range)

假设我有如下数据：

```
Item             Count
========         ========
1                123
2                1
3                47
4                117
5                18
6                466
7                202 
```

我想创建一个查询，给我这个：

```
Count Start       Count End        Occurrences
===========       ===========      ===========
0                 100              3
101               200              2
201               300              1
301               400              0
401               500              1 
```

基本上，我想进行一堆计数并将它们分组到统计汇总的范围内。我认为我没有使用正确的关键字来找到答案。我反对 Oracle，但如果有 ANSI SQL 答案，我很想拥有它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-18T23:43:55.780

```
select
    a.mini,
    a.maxi,
    count(a.item)
from
(
    select
        table.item,
        case (table.counter)
            when counter>=0 and counter<=100 then 0
            when counter>100 and counter<200 then 101
            when ....
        end as mini
        table.item,
        case (table.counter)
            when counter>=0 and counter<=100 then 100
            when counter>100 and counter<200 then 201
            when ....
        end as maxi
    from
        table
) a
group by
    a.mini,
    a.maxi 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-18T20:11:12.067

一种方法是使用 CASE 语句。如果您希望它具有可伸缩性，请尝试将范围放在单独的表中并使用 JOIN 来计算出现次数。

# c# - 具有最大线程数的 C# 线程然后等待

> ID：11090142
> 
> 赞同：2
> 
> 时间：2012-06-18T19:58:52.187
> 
> 标签：c#, multithreading

我有一个产生线程的for循环......我希望它产生5个线程然后等到它下降到4个然后产生另一个。

基本上，如果我有 100 条记录，我想一次处理 5 条。哪个是首选方法？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-18T20:00:42.747

*首选*方法可能是为此仅使用其中一种内置机制。

例如，[`Parallel.ForEach`](http://msdn.microsoft.com/en-us/library/system.threading.tasks.parallel.foreach.aspx)可以选择指定要使用的[MaxDegreeOfParallelism](http://msdn.microsoft.com/en-us/library/system.threading.tasks.paralleloptions.maxdegreeofparallelism.aspx)，它对应于使用的最大线程数。

这会让你只写如下内容：

```
var options = new ParallelOptions { MaxDegreeOfParallelism = 5 };
Parallel.ForEach(records, options, rec =>
{
    ProcessRecord(rec);
}); 
```

如果您的“记录处理”是映射或查询操作，另一个不错的选择是使用 PLINQ 的[WithDegreeOfParallelism](http://msdn.microsoft.com/en-us/library/dd383719.aspx)来限制并行度：

```
var results = records.AsParallel().WithDegreeOfParallelism(5).Select(r => ProcessRecord(rec)).Where(result => result.Foo); // Some query... 
```

如果您只是“处理”每条记录（即：ProcessRecord 是一个 void 方法），我会选择第一个选项，如果您正在对记录进行某种类型的映射操作或查询，并从记录处理。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-18T20:01:17.723

我强烈建议使用[`ThreadPool`](http://msdn.microsoft.com/en-us/library/3dasc8as%28v=VS.80%29.aspx)或更好的[Task Parallel Library (TPL)](http://msdn.microsoft.com/en-us/library/dd460717.aspx)。

# java - 如何开始为 Pocket PC 2003 SE 开发？

> ID：11090143
> 
> 赞同：0
> 
> 时间：2012-06-18T19:58:52.597
> 
> 标签：java, java-me, windows-mobile

我最近获得了一台运行 Pocket PC 2003 SE 的 Symbol PDA。我想为它开发应用程序，但我不知道从哪里开始。我研究了这些选项并尝试在 C# 中进行开发，但最终没有成功。我还听说 Java ME 可以与 Windows Mobile 一起使用。这将是理想的，因为我有大部分的 Java 编码经验。我似乎无法弄清楚如何让任何解决方案发挥作用。我希望帮助您开始使用任何一种语言。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-18T20:24:45.070

为了澄清，没有“Windows Mobile 4”之类的东西。Windows Mobile 的命名始于 5.0，与 Pocket PC 2003SE 相近，这可能就是您所拥有的。它可能基于 CE 4.2，因此您拥有的数字。

开发选项有：

*   [嵌入式 Visual C++](http://www.microsoft.com/en-us/download/details.aspx?id=24809) (C++)
*   Visual Studio 2003 Professional 或更高版本（CF 1.0、C# 或 VB.NET）
*   Visual Studio 2005 Standard 或更高版本（CF 1.0 或 2.0、C# 或 VB.NET）
*   Visual Studio 2008 Professional 或更高版本（CF 2.0 或 3.5、C# 或 VB.NET）
*   [NSBasic](http://www.nsbasic.com)
*   CrEme（正如@Miquel 指出的那样）

可能还有更多，但这涵盖了常见的。我已经使用了除最后一个之外的所有应用程序，并使用除最后两个之外的所有应用程序部署了生产应用程序。至于 CrEme——我从来没有用过，也不知道有人用过。YMMV。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-18T20:06:34.493

如果用 Java 编程：

您可以使用[CrEme](http://www.nsicom.com/Default.aspx?tabid=138) Java 虚拟机直接用 Java 编写代码。UI 在 AWT 中，但您也可以使用 SWT，我认为这可能会给您带来更好的结果。

@jp2code 的请求，这里有一个教程，我使用了一些示例和一些代码来帮助您入门：[SWT 的一小部分](http://www.eclipse.org/articles/Article-small-cup-of-swt/pocket-PC.html) 玩得开心！

# ruby - google_drive 和 google-api-client 中的法拉第冲突

> ID：11090145
> 
> 赞同：2
> 
> 时间：2012-06-18T19:58:55.463
> 
> 标签：ruby, gem, google-api-client, google-drive-api, faraday

我希望能够使用 google-api-client gem 进行服务到服务身份验证和 google_drive api 来访问电子表格。不幸的是，由于需要不同版本的法拉第在它们的依赖项中，这些 gem 似乎发生了冲突。有谁知道如何解决这个问题？

如果首先需要 google_drive，则会出错：

```
specification.rb:1637:in `raise_if_conflicts': Unable to activate google-api-client-0.4.4, because faraday-0.8.1 conflicts with faraday (~> 0.7.0) (Gem::LoadError) 
```

如果 google/api_client 先出现错误：

```
specification.rb:1637:in `raise_if_conflicts': Unable to activate oauth2-0.7.1, because faraday-0.7.6 conflicts with faraday (~> 0.8) (Gem::LoadError) 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-19T11:47:31.330

给我一天左右的时间，我将更新 google-api-client gem 以使用更新版本的法拉第。

也就是说，您不需要单独的 gem 来使用 Google Drive，任何旨在将语法糖添加到基于发现的 Google API 的 gem 都应该使用官方 gem 作为基础。

# java - 无法解析为变量 - gui 控制器代码

> ID：11090151
> 
> 赞同：0
> 
> 时间：2012-06-18T19:59:22.093
> 
> 标签：java, swing

好的 - 我有以下代码 - 在加星标的部分我收到错误。ItemManager 类要求我用 Items 填充 ()。但是，当我这样做时，我收到无法将项目解析为变量的错误，我不确定如何解决该问题。

```
package presentation;
import javax.swing.*;

import business.ItemManager;

import java.awt.*;
import java.awt.event.*;
import business.*;

public class CreateInventoryUI extends JFrame {

    private static final long serialVersionUID = -3940805393905465307L;
    private JButton addBtn = new JButton ("Add Item to Inventory");
    private JButton showBtn = new JButton ("Display Inventory");

    public static void main(String[] args) {
        EventQueue.invokeLater(new Runnable() {
            public void run() {
                try {
                    CreateInventoryUI frame = new CreateInventoryUI("Inventory");
                    frame.setVisible(true);
                } catch (Exception e) {
                    e.printStackTrace();
                    System.out.println("Exception - Sorry");
                }
            }
        });
    }

    public CreateInventoryUI(String name) { // title bar name
        super(name);

        // layout here
        Container container = getContentPane();
        FlowLayout layout = new FlowLayout();
        container.setLayout(layout);
        layout.setAlignment(FlowLayout.CENTER);
        container.add(new JButton("Display inventory"));
        container.add(new JButton("Add Item to Inventory"));

        addBtn.addActionListener (new ActionListener() {
            public void actionPerformed (ActionEvent event) {
                // controller code
                ***ItemManager mngr = new ItemManager();
                mngr.store(Items);***
            }
        });

        showBtn.addActionListener (new ActionListener() {
            public void actionPerformed (ActionEvent event) {
                // controller code
                ItemManager mngr = new ItemManager();
                mngr.get(Items);
            }
        });

        setDefaultCloseOperation(EXIT_ON_CLOSE);
        pack();
        setVisible(true);
    }

    /**
     * Constructs a <code>String</code> with all attributes
     * in name = value format.
     *
     * @return a <code>String</code> representation 
     * of this object.
     */
    public String toString()
    {
        final String TAB = "    ";

        String retValue = "";

        retValue = "CreateInventoryUI ( "
            + super.toString() + TAB
            + "addBtn = " + this.addBtn + TAB
            + "showBtn = " + this.showBtn + TAB
            + " )";

        return retValue;
    }

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-18T20:02:47.193

您正在传递`Items`，`mngr.store`但您没有在`Items`任何地方声明。[此外，按照惯例，类名以大写字母开头，变量以小写字母开头，因此您可能希望将变量命名为`items`，其类型为`Items`]

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-18T20:04:03.107

`Items`没有在您的代码示例中的任何地方定义。

此外，您可能想要添加这些按钮：

```
container.add(addBtn);
container.add(showBtn); 
```

在您的`CreateInventoryUI`方法中，不为`container.add()`.

# macos - github ssh密钥每次都不保存并询问密码

> ID：11090153
> 
> 赞同：1
> 
> 时间：2012-06-18T19:59:24.620
> 
> 标签：macos, ssh, github

我的本地机器上有几个来自 github 的 repo。每次我尝试与 github 服务器通信时，我刚刚创建的最后一个 repo 都会询问我的登录名/密码信息。我所有的其他回购工作都很好，不要每次都问我。我按照这里的说明进行操作：https://help.github.com/articles/working-with-ssh-key-passphrases 但没有运气。我从来没有收到询问我密码的钥匙串弹出窗口。我究竟做错了什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-13T22:56:37.080

查看该 repo 的文件内部`.git/config`并查看该`url`部分的外观。如果它以 https 开头，则会提示您输入密码。您需要对 url 使用 ssh 协议，它看起来类似于：

```
[remote "origin"]
  fetch = +refs/heads/*:refs/remotes/origin/*
  url = git@github.com:ACCOUNT/PROJECT.git 
```

# return - 有什么办法可以解决，包括在 go 中无法访问的 return 语句？

> ID：11090157
> 
> 赞同：4
> 
> 时间：2012-06-18T19:59:39.710
> 
> 标签：return, switch-statement, go

我有以下功能：

```
func fitrange(a, x, b int) int {
    if a > b {
        a, b = b, a
    }
    switch true {
    case x < a:
        return a
    case x > b:
        return b
    default:
        return x
    }
} 
```

go 编译器抱怨“函数在没有返回语句的情况下结束”，即使通过`switch`语句的每个可能路径都返回一个值。`return`除了在函数末尾添加一个虚拟语句之外，还有什么方法可以解决这个问题？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-06-18T20:03:00.533

将`default`外壳全部拆下，并`return x`在开关后拆下。

像：

```
func fitrange(a, x, b int) int {
    if a > b {
        a, b = b, a
    }
    switch true {
    case x < a:
        return a
    case x > b:
        return b
    }
    return x
} 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-06-18T20:10:20.813

除了在末尾添加 return 之外，您还可以通过添加 panic 来安抚编译器。这不是一个坏主意，因为如果您的代码包含错误并且曾经到达“无法访问”的行，那么您的程序将立即停止，而不是继续使用可能错误的答案。

# postgresql - 用于更新点几何中的 m 值的算法

> ID：11090160
> 
> 赞同：3
> 
> 时间：2012-06-18T19:59:47.353
> 
> 标签：postgresql

我需要在 postgeresql/postgis 中编写一个函数来更新点几何中的 m 值，例如 POINT（X，Y，Z，M）。例如，对于 X、Y 和 z 值，可以通过转换来完成。但更新 M 值是另一回事。

有人知道这个问题吗？

我们有这样的功能或类似的吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-19T11:44:48.693

嗯，有

```
ST_MakePoint(double precision x, double precision y, double precision z, double precision m); 
```

所以你可以像这样更新你的 M 值

```
UPDATE mytable
   SET the_geom = ST_MakePoint(ST_X(the_geom),ST_Y(the_geom),ST_Z(the_geom),99.99) 
```

# c# - FaultException WebService c#在服务器上创建文件时

> ID：11090166
> 
> 赞同：0
> 
> 时间：2012-06-18T20:00:08.177
> 
> 标签：c#, xml, web-services, faultexception

我的网络服务有问题（没有 WCF）。

所以，我的服务器上存储了一个 web 服务（windows 2008 R2）。我有一个用 XmlTextWritter 创建 XML 文件的功能。当我在服务器的浏览器中启动 web 服务并测试我的功能时，一切运行正常。但是当我用我的客户端应用程序（我的计算机上的 WPF，而不是服务器上的 WPF）调用这个函数时，我有这个错误：

```
Server can't process this request. ---> Unable to find 'C:\inetpub\wwwroot\WebServicePROJETDEV\App_Data\Worlds\test.xml'. 
```

XmlTextWritter 必须创建该文件，但它说它没有找到它。这个错误发生在我使用客户端时。

这是我的函数 GenerateXML 其中变量“路径”是世界的名称（函数的字符串参数）：

```
try {
    XmlTextWriter rw = new XmlTextWriter("C:\\inetpub\\wwwroot\\WebServicePROJETDEV\\App_Data\\Worlds\\" + path + ".xml", Encoding.UTF8);

    rw.Formatting = Formatting.Indented;

    rw.WriteStartDocument();

        rw.WriteStartElement("world");
            rw.WriteStartElement("name");
            rw.WriteString(nameOfWorld);
            rw.WriteEndElement();
        rw.WriteEndDocument();

    rw.Flush();
    rw.Close();

    return true;
}
catch(Exception e)
{
    Console.WriteLine(e.StackTrace);
    return false;
} 
```

有人知道为什么服务器端，全部运行，客户端，脚本无法创建/找到文件？

# c++ - 尝试创建流的错误日志 - 获取“找到一个或多个多重定义的符号”

> ID：11090170
> 
> 赞同：0
> 
> 时间：2012-06-18T20:00:16.990
> 
> 标签：c++

我正在尝试这样做：

```
#pragma once
#include <fstream>
#include <string>

static std::ofstream ErrorLog;

void InitErrorLog(std::string FileName) {
    ErrorLog.open(FileName);
} 
```

但是在多个 CPP 文件中 #include 时出现“找到一个或多个多重定义的符号”错误。STL 在做什么（提供 cout、cin、cerr 等——这种方法最初是作为重定向 cerr 的替代方法）而我不是？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-18T20:03:29.063

您在*头文件*中提供*定义*。相反，在*源文件中**定义*它并在标题处留下一个*extern 声明。*`ErrorLog`

 ***来源

```
std::ofstream ErrorLog;

void InitErrorLog(std::string FileName) {
    ErrorLog.open(FileName);
} 
```

标题

```
extern std::ofstream ErrorLog;

void InitErrorLog(std::string FileName); 
```

另外，为了将您的功能保持在标题中，您必须制作它`inline`。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-18T20:03:25.817

你打破了**单一定义规则**。你需要制作方法`inline`。

```
inline void InitErrorLog(std::string FileName) {
    ErrorLog.open(FileName);
} 
```

另外，请注意，通过声明您的变量`static`，您将拥有每个翻译单元的副本——即它不是全局的。要使其全局化，您需要`extern`在标头中声明它并在单个实现文件中定义它。***

# ms-access - 统计 Access 报表中字段具有特定值的记录

> ID：11090172
> 
> 赞同：3
> 
> 时间：2012-06-18T20:00:26.477
> 
> 标签：ms-access, report

我有一个基于查询的 Access 报告，每条记录的 [status] 字段要么是“未迟到”，要么是“迟到”。没有 VBA 是否可以计算“未迟到”的数字和“迟到”的数字并将其显示在报告的标题中？

我在详细信息部分设置了一个文本框，如果 [status] 为“未迟到”，则该文本框等于 1，如果 [Status] 为“迟到”，则另一个文本框等于 1，但我无法针对其中任何一个计算总和文本框。我想我可以在页脚中使用“=Sum[late_count]”（如果文本框被命名为“late_count”），但这不起作用——当我尝试打开查询时，它会询问late_count。

我正在使用“=Count(*)”来获取记录总数——有没有办法使用 Count，但只针对某些字段值？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-06-18T20:10:56.770

您是否在页脚中尝试过：

```
=Sum(IIf(Status="Late",1,0)) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-18T20:16:14.120

我会将 [late_count] 放在基础查询中，并确保绑定到它的文本框具有相同的名称。然后`Sum([late_count])`应该工作。

# php - 管理需要搜索文件以返回结果的表单请求的更快方法

> ID：11090181
> 
> 赞同：1
> 
> 时间：2012-06-18T20:01:25.697
> 
> 标签：php, linux

我有一个文件，其中包含我需要根据表单提交返回的信息。

例如

用户提交一个名称，我在文件中查找该名称并将与文件中的名称对应的信息返回给用户。

这听起来很傻，但我不能使用 SQL 数据库。所以我需要直接使用 php，但是对于高负载和大数据（~100 万行），花费的时间太多了。

我想要一个解决方案，其中一个可能的解决方案是运行一个 php 脚本保存排序/保存/散列所有数据，然后查询排序后的数据，但我知道没有办法做到这一点。
（显然我不想重复启动解释器并重复形成表/排序我需要运行一次然后重复查询它）但我不知道如何实现这一点或从哪里开始。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-31T12:01:24.697

> 如果它是静态的，我建议将其分解为许多较小的文件，这样您就可以搜索您需要的文件 - 即一个仅包含所有以“A”、“B”等开头的名称的文件。——安德鲁西

正如@andrewsi 所说，最好的方法似乎是根据某种逻辑结构将其分解为某种子记录，然后查询子记录。

* * *

我还没有找到如何设置排序/散列数据结构并重复查询它而不会一遍又一遍地启动解释器（尽管我确实意识到这与创建某种基本的 DB/DBMS 基本相同）

因此，目前的解决方案是使用预定的文件结构/组织。

# arrays - AS3：减法不准确

> ID：11090183
> 
> 赞同：0
> 
> 时间：2012-06-18T20:01:29.987
> 
> 标签：arrays, actionscript-3, subtraction

我制作了一个存储简单值（1,1,2,1...）的数组，这些值表示小型 2D 游戏的图块。

我想在这个数组中存储一个旋转（和额外）参数，所以我在我的值中添加了小数：1.45、1.90、2.0、1.90 ......例如，1.45 意味着我想要一个草瓷砖（1），旋转45°。

要“解析”我的小数，我会：

```
arr[0] = 2.9;
rot = arr[0] - Math.floor(arr[0]); 
```

我应该得到**0.9**，但我得到**0.89999**。

知道为什么 AS3 中的这种简单减法不正确吗？或者也许我应该创建另一个存储这些“额外”参数的数组？

谢谢你的灯

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-18T20:23:54.923

这是[浮点数](http://en.wikipedia.org/wiki/Floating_point)的固有问题。您可以[使用 将数字四舍五入](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/Number.html#toFixed%28%29)到给定的小数位数`rot = rot.toFixed(2)`，或者您可以忽略微小的差异——它们需要很长时间才能显着相加。

顺便说一句，您可以使用`rot = arr[0] % 1`获取小数点后的部分。

使用小数存储旋转值似乎不是最佳选择，尤其是因为您的方式只允许旋转最多 100 度。另外，如果您想存储比图块类型和旋转更多的值怎么办？使用多个数组（甚至是自定义类的对象数组）可能是最好的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-18T20:20:57.643

Actionscript 使用浮点数。许多小数部分不能精确表示。

您可以使用另一个数组来处理额外的参数，或者将您的值乘以某个静态值......比如 1,000 ？这会将额外的参数移动到整个单元。1000 可让您放置任何 0-359° 值。尽管您必须进行额外的解析来评估减法或加法的进位。

也许另一个数组会是最好的...... :)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-18T20:23:07.427

您正在减去`Number`对象，这些对象在 AS3 中是浮点数。浮点数本质上存在准确性问题。[这里](http://en.wikipedia.org/wiki/Floating_point#Accuracy_problems)有一个解释为什么。

您最简单的解决方案是四舍五入您的答案：

```
var arr:Array = [];
arr[0] = 2.9;
var rot:Number = Number(arr[0]) - Math.floor(arr[0]);
var rounded:Number = Number(rot.toFixed(1)); 
```

# iphone - iOS 应用 Display Recorder 如何在不使用私有 API 的情况下录制屏幕？

> ID：11090184
> 
> 赞同：42
> 
> 时间：2012-06-18T20:01:32.600
> 
> 标签：iphone, objective-c, ios

iOS 应用程序[Display Recorder](http://itunes.apple.com/us/app/display-recorder/id520411468?mt=8)声称能够记录 iOS 设备的屏幕，即使它在后台。鉴于这`UIGetScreenImage()`是私有 API，并且在被 Apple 运行的静态分析检测到时会导致应用程序提交被拒绝，他们如何能够在批准的应用程序中进行此记录？

此外，该应用程序在录制时会在屏幕顶部出现一个红色条，类似于本机 iOS 的电话呼叫功能。

我已经做了一段时间的 iOS 开发人员，我什至对这是如何完成的感到有些困惑，甚至在应用程序之外将红色条放在顶部的细节也是如此。我的印象是我们基本上无法控制应用程序在后台运行时发生的事情，缺少一些关键功能（如音频播放等）。

即使开发人员利用私有 API/库来完成此任务，他们如何能够以审查期间未检测到的方式执行此操作？如果我遗漏了此处更新版本的 iOS 引入的明显内容，我深表歉意。

* * *

## 回答 #1

> 赞同：61
> 
> 时间：2012-06-19T17:00:30.793

调查了一下，它没有链接到 IOSurface。然而，我确实发现它使用了`dlsym`，经过更多的逆向工程，我发现了这个：

```
/System/Library/Frameworks/IOKit.framework/IOKit
IOServiceGetMatchingServices
IOServiceGetMatchingService
IOServiceMatching
IOMasterPort
IOIteratorNext
IORegistryEntryCreateCFProperty
IOObjectRelease
/System/Library/Frameworks/UIKit.framework/UIKit
UIGetScreenImage
/System/Library/PrivateFrameworks/IOMobileFramebuffer.framework/IOMobileFramebuffer
IOMobileFramebufferOpen
IOMobileFramebufferGetLayerDefaultSurface
/System/Library/PrivateFrameworks/IOSurface.framework/IOSurface
IOSurfaceAcceleratorCreate
IOSurfaceAcceleratorTransferSurface
IOSurfaceLock
IOSurfaceUnlock
IOSurfaceGetWidth
IOSurfaceGetHeight
IOSurfaceCreate
IOSurfaceGetBaseAddress 
```

因此，正如您在此处看到的，在每个框架路径之后是它从每个框架动态加载的符号字符串。这是为了避免在链接到私有框架时遇到麻烦。由于它是在运行时加载的，静态分析器无法判断此应用程序使用它，从而逃避检测。

看起来我最初的怀疑是正确的。它使用 IOSurface 偷偷越过沙盒限制以获取原始屏幕访问权限。它还使用`UIGetScreenImage`，我认为这是生成视频的第二种方法。它还使用了一些 IOKit 函数和 IOMobileFramebuffer 函数。看起来应用程序正在从`IOMobileFramebufferGetLayerDefaultSurface`函数中获取 IOSurface。不太确定它使用 IOKit 的目的是什么。

总之，这个应用程序使用了一些偷偷摸摸的技术来避免被静态分析器检测到：它不链接到私有框架，而是动态地抓取符号。它使用 IOSurface 和 IOMobileFramebuffer 的组合来录制视频，或者`UIGetScreenImage`用于其他模式。这是一个棘手的应用程序，将从*AppStore*中删除，所以如果你想要它，你最好现在就得到它。

## 更新：

看来这个应用程序确实是从 AppStore 中提取的。如果你有幸在它被拉出之前抢到了一份副本，那就太好了。我知道我很高兴我得到了它。

Apple 可能通过声明该应用程序使用私有 API 来证明其决定是合理的，并且它可能被视为潜在的安全问题（一个在您输入 iTunes 密码时监视您的应用程序就是一个例子，可怕的想法）。我想知道这是否会导致他们的审查过程发生变化，但我们可能永远不会知道。对我来说有趣的一件事是，开发人员可能会使用更多技巧来隐藏他们的应用程序的行为以防止静态分析。没有审查过程是完美的，但他们可以做得很好。即使 Apple 自动拒绝链接到该`dlsym`符号的应用程序，也有一些方法可以用来绕过检测。

## 更新 2：

显然，现在 AppStore 中有这个应用程序的另一个版本。它被称为“Disp Recorder”，具有与第一个完全相同的图标。GUI 看起来几乎与原来的相同，只是有一些细微的变化。我还没有扭转较新的，但我愿意打赌他们使用相同的技术来隐藏非法行为。反转新版本后，我将更新此答案。新的售价 5 美元，但如果您曾经想要在未越狱的设备上安装屏幕录制应用程序，您应该在它被拉出之前抓住它。

## 更新 3：

看起来我对这个应用程序的工作方式非常正确。[@coolstarorg](https://twitter.com/coolstarorg)在 GitHub 上有一个名为[RecordMyScreen](https://github.com/coolstar/RecordMyScreen)的开源实现。如果你仍然想知道这个应用程序是如何工作的，我建议你去看看。

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2012-06-18T20:36:50.700

@C0deH4cker 对 IOSurface 框架的建议简直太疯狂了。IOSurface 提供了一个内核接口（允许应用程序悄悄地滑出沙箱），用于矩形像素缓冲区（屏幕抓取），可以使用框架相关的方法将其转换为 CGImage 或 UIImage。

甚至苹果公司也建议该框架存在的理由是：

> 包含用于在应用程序之间共享图形表面的低级接口。

最好的部分是，它在 iOS 中是不合法的。该框架在 iOS 2.x 中被称为 CoreSurface，在 3.x 中被迅速而悄悄地弃用，只是被 iOSurface 取代。我猜它是私有的并且未在 iOS 参考中列出的事实意味着应用商店测试人员没有对其进行测试。有趣的。

# apache - 在根目录和文件夹目录中运行 htaccess 时遇到问题

> ID：11090185
> 
> 赞同：0
> 
> 时间：2012-06-18T20:01:32.933
> 
> 标签：apache, .htaccess

我正在使用以下内容`.php`在 URL 中添加对文件扩展名的支持：

```
RewriteEngine On
RewriteRule ^/?([a-z]+)$ $1.php [L] 
```

例如，如果 URL 是，`www.doamin.com/create`那么它将调用`create.php`.

如果我`.htaccess`将文件粘贴到根文件夹并调用`www.doamin.com/notes/create`，我会收到错误消息。如果我`.htaccess`将文件粘贴到笔记文件夹中，它运行良好。

为什么根目录不支持该文件？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-18T20:10:30.670

尝试在您的`RewriteRule`:

```
RewriteCond %{REQUEST_URI} !\.php$ 
```

当您的规则位于文档根目录中时，它会无限循环：

1.  URI = 注释/创建
2.  应用规则，URI = notes/create.php
3.  应用规则，URI = notes/create.php.php
4.  应用规则，URI = notes/create.php.php.php

您需要添加一个条件，以便如果 URI 以`.php`不应用该规则结尾。您可以添加的另一个条件是检查 URI 是否不存在（例如，如果 create.php 文件不存在）。因此，您还应该在规则之前添加这些：

```
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d 
```

# drupal - 将 Drupal 与 Zen 7.x-3.x 和 CTI Flex 7.x-1.0 一起使用时的通知

> ID：11090191
> 
> 赞同：0
> 
> 时间：2012-06-18T20:01:46.257
> 
> 标签：drupal, drupal-7, drupal-zen

我在许多页面上收到以下通知：

```
Notice: Undefined variable: jump_link_target in include() (line 74 of /Users/peter/dev/eyestreet.com/drupal/sites/default/themes/cti_flex/templates/html.tpl.php). 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-18T20:01:47.380

CTI Flex 作者仍在致力于与 Zen 7.x - 3.x 的兼容性。请参阅[http://drupal.org/node/1590214](http://drupal.org/node/1590214)。与此同时，这个黑客似乎有效：

复制以 开头的行`settings[zen_jump_link_target]`并将其更改为`settings[zen_skip_link_anchor]`.

中`themes/cti_flex/templates/html.tpl.php`，替换`$jump_link_target`为`$skip_link_anchor`。

# javascript - 如何在javascript中获取用户控件

> ID：11090195
> 
> 赞同：0
> 
> 时间：2012-06-18T20:01:52.627
> 
> 标签：javascript, asp.net

如何在 JavaScript 中处理我的用户控件？

```
<body>
    <form id="form1" runat="server">
    <div>
        <uc1:WebUserControl ID="WebUserControl1" runat="server" Enabled="False" />
        <input id="Button1" type="button" value="button" runat="server" onclick="return Button1_onclick()" /></div>
    </form>

    <script type="text/javascript">
        var pageDefault = {
            uc: document.getElementById("<%=WebUserControl1.ClientID%>"),
            btn1: document.getElementById("<%=Button1.ClientID%>"),
            init: function() {
                this.btn1.onclick = function() {
                    uc.setAttribute('Enabled', 'True'); //uc is null at this point
                };
            }
        }
        pageDefault.init();
    </script>

</body> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-18T20:15:47.673

为了像您一样引用 ClientID，JavaScript 需要在 UserControl 内，而不是在页面内。如果您想以此处的方式使用它，则需要将 clientId 公开为用户控件的公共属性：

```
public string userCtlClientId
{
  get{return userCtl.ClientId;} 
} 
```

并修改您的脚本：

```
document.getElementById('<% =WebUserControl1.userCtlClientId%>'); 
```

# c# - 使用位图时出现 Random AccessViolationExceptions

> ID：11090200
> 
> 赞同：1
> 
> 时间：2012-06-18T20:02:11.127
> 
> 标签：c#, pointers, bitmap, access-violation, unsafe

我正在尝试制作一个程序，该程序使用指针检测图像中的线条并删除这些线条。目前，检测线部分工作得非常好，大部分情况下，删除线部分也工作得很好。但是，在大约 150-200 张图像之后，程序将在与代码的不安全位无关的地方抛出随机 AccessViolationExceptions。

这是删除行的位：

```
static unsafe Bitmap RemoveLines(Bitmap input, int[] horizontalLines, int[] verticalLines)
{
    Bitmap output;

    if (input.PixelFormat == PixelFormat.Format24bppRgb)
    {
        output = (Bitmap) input.Clone();
    }
    else
    {
        output = ConvertTo24bpp((Bitmap)input.Clone());
    }

    BitmapData bitmapData = output.LockBits(new Rectangle(0, 0, output.Width, output.Height), ImageLockMode.ReadWrite, output.PixelFormat);

    int w = output.Width;
    int h = output.Height;
    int bpp = 3;

    int s = bitmapData.Stride;

    byte* p = (byte*) bitmapData.Scan0;

    for (int r = 0; r < h; r++)
    {
        for (int c = 0; c < h; c++)
        {
            if (horizontalLines.Contains(r) || verticalLines.Contains(c))
            {
                int i = (r * s) + c * bpp;

                p[i + 0] = 255;
                p[i + 1] = 255;
                p[i + 2] = 255;
            }
        }
    }

    output.UnlockBits(bitmapData);

    return output;
} 
```

在此代码之后，我保存生成的位图并将其嵌入到另一个位图中以进行比较：

```
// ... Detect lines and such
Bitmap export = new Bitmap(bitmap.Width * 3, bitmap.Height, PixelFormat.Format24bppRgb);
Graphics fg = Graphics.FromImage(export);
fg.DrawImage(bitmap, 0, 0); // Draw the original input bitmap
fg.DrawImage(edited, bitmap.Width, 0); // Draw the input after processing (Line Detection)
try
{
    Bitmap lineRemoved = RemoveLines(bitmap, horizontalLines.ToArray(), verticalLines.ToArray()); // Remove lines based on earlier detection
    lineRemoved.Save(cellDirectory + "\\Lines\\cell_lr_" + i.ToString("D2") + j.ToString("D2") + ".gif", ImageFormat.Gif); // Save image after removal
    fg.DrawImage(lineRemoved, bitmap.Width * 2, 0); // Add image to composite for comparison; This line is what throws the error most of the time
    lineRemoved.Dispose();
    export.Save(cellDirectory + "\\Lines\\cell" + i.ToString("D2") + j.ToString("D2") + ".gif", ImageFormat.Gif);
}
catch (Exception ex)
{ } 
```

DrawImage 调用是引发错误的原因，它始终是 AccessViolationException 后跟 InvalidOperationException。查看错误期间的 lineRemoved 表明它的大多数成员都有“抛出类型为'InvalidOperationException'的异常”而不是实际值，即使在同一个位图之前的一行保存得很好。输入位图在整个代码中保持不变，并且当我需要以任何方式更改它时，它总是被克隆或绘制到不同的位图。

我尝试在保存 lineRemoved 后注释掉这些行，但是稍后在代码中会弹出相同的错误。更重要的是，try/catch 实际上并没有捕捉到异常——它总是说未处理。它必须与指针有关，但否则我完全不知道是什么原因造成的。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-18T20:28:56.917

您的代码包含一个微妙的单字符错误。读取的行

```
for (int c = 0; c < h; c++) 
```

应该

```
for (int c = 0; c < w; c++) 
```

如果图像是横向的，您的错误将导致图像的右侧部分未被处理。

如果图像是纵向的，它会导致缓冲区溢出，导致访问冲突异常（如果你幸运的话）或内存损坏（如果你不是）。

话虽如此，您的算法效率不高。例如，您正在计算

```
int i = (r * s) + c * bpp; 
```

对于您正在绘制的每个像素，显然 (r * s) 在内循环中不会改变，并且 c * bpp 可以替换为 currentPixel += bpp 之类的东西。

事实上，在水平线和垂直线上循环可能会更有效。

# java - JSR82 和蓝牙加密狗

> ID：11090203
> 
> 赞同：1
> 
> 时间：2012-06-18T20:02:26.470
> 
> 标签：java, bluetooth, jsr82

我正在使用 Windows 7 32 位计算机开发 Java 桌面应用程序以与蓝牙加密狗进行通信。我在此链接中找到了 jsr82 API 的 java 实现：http: [//www.jsr82.com/jsr-82-sample-device-discovery/](http://www.jsr82.com/jsr-82-sample-device-discovery/)

代码没有错误也没有警告，但是调用了以下行：

```
LocalDevice localDevice = LocalDevice.getLocalDevice(); 
```

返回 null （所以它找不到我的蓝牙设备）。

注意：加密狗可以被电脑识别。

我的问题是：使用 java 和蓝牙加密狗时要走什么路？谁能帮我找到解决问题的方法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-20T17:59:59.783

使用蓝牙加密狗时使用 bluecove 作为库。

# c# - 获取调用方法的命名空间和程序集

> ID：11090216
> 
> 赞同：3
> 
> 时间：2012-06-18T20:03:27.410
> 
> 标签：c#, .net

`System.Reflection`获取调用另一个方法的方法的命名空间是否有技巧？我目前拥有的是：

```
var stackTrace = new System.Diagnostics.StackTrace();
MethodBase method = stackTrace.GetFrame(1).GetMethod();
string namespace = method.DeclaringType.Namespace;
Assembly assembly = method.DeclaringType.Assembly; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-18T20:06:24.453

不，如果调用方法是内联的，即使你的技巧在生产中也不起作用——即编译器太小以至于编译器使它与下一个方法一致。

没有可靠的方法来获取此信息。

[http://www.mehdi-khalili.com/that-tricky-stacktrace](http://www.mehdi-khalili.com/that-tricky-stacktrace)

# javascript - 为什么通过缓存变量访问 DOM 更快？

> ID：11090218
> 
> 赞同：6
> 
> 时间：2012-06-18T20:03:43.947
> 
> 标签：javascript, dom, domdocument

我正在尝试提高我对 javascript 的了解，并且在搜索一些“最佳实践”时，有人向我指出，缓存 DOM 文档然后通过该 var 访问它而不是直接访问文档对象会更快。

你可以在这里看到结果，在我对 jsperf 进行的编辑中： http: [//jsperf.com/jquery-document-cached-vs-uncached/3](http://jsperf.com/jquery-document-cached-vs-uncached/3)（编辑：标题包含“jsquery”，因为那是原始测试，我的编辑包含香草 javascript，框架没有区别）

这真的让我很好奇。基本上我在等式中引入了一个新变量，这怎么能让事情变得更快而不是更慢？

据我所知，"print a" 应该比 "b = a; print b" 更好（说话的形象） 这种情况有什么不同？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-19T10:48:03.470

我相信我在[这里](http://desalasworks.com/javascript-performance-techniques/)找到了解释（最后一部分的重点是我的）：

> **存储对浏览器内对象的指针引用。**使用此技术通过在实例化期间存储对浏览器对象的引用以供以后使用，从而减少 DOM 遍历行程。例如，如果您不希望您的 DOM 发生变化，您应该存储一个对您将在创建页面时使用的 DOM 或 jQuery 对象的引用；如果您正在构建一个 DOM 结构，例如对话框窗口，请确保在实例化期间在其中存储一些对 DOM 对象的方便引用，这样您就不需要在用户单击某物时一遍又一遍地查找相同的 DOM 对象或拖动对话框窗口。如果您没有存储对 DOM 对象的引用，并且需要在函数内部进行迭代，***您可以创建一个包含对该 DOM 对象的引用的局部变量，这将大大加快迭代速度，因为局部变量存储在堆栈中最容易访问的部分***。

因此，如果我理解正确，将 DOM 缓存在局部变量中可以更容易地访问内存堆栈，从而提高执行速度。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-18T20:07:37.320

`document`不像普通的 Javascript 变量。当访问它的属性时，不知道在幕后发生了什么奇怪的魔法，尤其是 DOM，它可能是根据内部浏览器结构的需求创建的。

# ios - UITableView 单元内的 UIScrollView 内的空白 UITableView

> ID：11090225
> 
> 赞同：1
> 
> 时间：2012-06-18T20:04:06.893
> 
> 标签：ios, uitableview, uiscrollview, uikit

我正在创建一个具有以下设计的应用程序：

我有一个带有自定义 UITableViewCell 的 UITableView。每个 UITableViewCell 包含一个滚动视图，其中包含多个大小为 150x150 的 UIView 每个小 UIView 都包含一个 UITableView。

因为我是新手，所以论坛不允许我上传图片，这可以很容易地解释设计。

我在故事板中创建了完整的设计。我遇到的问题是内部 UITableView 没有被填充。`cellForRowAtIndexPath`数据源表视图控制器类的`numberOfSections`或`numberOfRowsInSection`方法不会被调用。

我正在使用 XCode 4.3.2 iOS5。

以下是类结构：

*   NewsTableViewController ：邮件表的 ViewController。
*   NewsTableViewCell : 包含自定义 UIScrollView 对象的自定义 TableViewCell。
*   NewsScrollView：自定义 UIScrollView 包含 UIViews 和 UITableView 对象，这些对象链接到 UIViews 内的 Storyboard UITableViews。
*   NewsInnerTableViewController : TableViewController 用作 InnerTableViews 的 Datasource 和 Delegate。

我在 NewsTableViewController 中创建了 NewsInnerTableViewController 的对象，并将其分配为内部 tableview 的委托和数据源。

```
-(UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
    static NSSTring *CellIdentifier = @"NewCell"
    NewsTableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier];

    newsInnerTableController = [[NewsInnerTableViewController alloc] initWithStyle:UITableViewStylePlain];

    cell.scrollView.innerTable.delegate = newsInnerTableController;
    cell.scrollView.innerTable.datasource = newsInnerTableController;

    return cell;
} 
```

我无法理解我哪里出错了。还是需要以其他方式创建类似的东西。或者需要在其他级别分配数据源和委托。

请分享您对此的看法。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-21T19:06:05.223

诀窍是将 UITableTableViewCell 作为内部 UITableView 的数据源和委托

[http://iosstuff.wordpress.com/2011/06/29/adding-a-uitableview-inside-a-uitableviewcell/](http://iosstuff.wordpress.com/2011/06/29/adding-a-uitableview-inside-a-uitableviewcell/)

# ios - 将 UISearchBar 背景更改为自定义图像的正确方法是什么？

> ID：11090227
> 
> 赞同：1
> 
> 时间：2012-06-18T20:04:20.427
> 
> 标签：ios, objective-c, iphone, uisearchbar

我知道以前有人问过这个问题，我找到了这个解决方案：

```
for (UIView *subview in searchBar.subviews) {
    if ([subview isKindOfClass:NSClassFromString(@"UISearchBarBackground")]) {
        UIView *bg = [[UIView alloc] initWithFrame:subview.frame];
        bg.backgroundColor = [UIColor colorWithPatternImage:[UIImage imageNamed:@"top-bar.png"]];
        [searchBar insertSubview:bg aboveSubview:subview];
        [subview removeFromSuperview];
        break;
    }
} 
```

我只是不确定它是否包含一些苹果会拒绝的私有 API，还是有更好的方法来做到这一点？

*   我仍然支持 ios 4，所以没有 ios 5 只有 API

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-18T20:29:59.813

Apple 不鼓励使用私人无证 api 的人。

但是您仍然可以在应用程序中使用子类化功能。我使用了这种子类化 UISearchBarBackground。Apple 接受了我的实时申请。因此，在您的应用程序中使用上述代码没有问题。

# php - 计算 OpenID 的 Diffie Hellman 密钥的共享密钥的问题

> ID：11090231
> 
> 赞同：5
> 
> 时间：2012-06-18T20:04:32.117
> 
> 标签：php, openssl, openid

我正在尝试为 OpenID 创建一个有状态库以用作 Wordpress 插件，当我尝试使用 openssl 函数[openssl_dh_compute_key](http://php.net/manual/en/function.openssl-dh-compute-key.php)计算秘密值时遇到了问题。好奇是否有人有一些我可以尝试的步骤、提示等...

谢谢！

常数...

```
const DH_DEFAULT_PRIME = "dcf93a0b883972ec0e19989ac5a2ce310e1d37717e8d9571bb7623731866e61ef75a2e27898b057f9891c2e27a639c3f29b60814581cd3b2ca3986d2683705577d45c2e7e52dc81c7a171876e5cea74b1448bfdfaf18828efd2519f14e45e3826634af1949e5b535cc829a483b8a76223e5d490a257f05bdff16f2fb22c583ab";
const DH_DEFAULT_GENERATOR = '02'; 
```

创建我的 Diffie-Hellman 密钥

```
private function createDHKey($priv_key = false) {
    if (!$priv_key) {
        $details = array();
        $details['p'] = pack('H*', self::DH_DEFAULT_PRIME);
        $details['g'] = pack('H*', self::DH_DEFAULT_GENERATOR);
        $this->dh = openssl_pkey_new(array(
            'dh' => $details,
        ));
        if ($this->dh) {
            return true;
        } else {
            error('OpenSSL failed to export your private key, ensure you have a valid configuration file, and PHP can find it.');
        }
    } else {
        $this->dh = openssl_pkey_get_private($priv_key);
        return false;
    }
} 
```

![第一次运行函数](../Images/a66735e5edcf567d0fa68151ed7ed4c0.png)

![调用导出的私钥](../Images/7dfb56d26acbd34b0779aff14dd27983.png)

两个图像按钮上的 Ag== 是 dh['g'] 的 base64 编码值。

然后我将生成的私钥保存到数据库中以持久保存，这允许我稍后通过 openssl_pkey_get_private 函数重新创建密钥。

但是，从关联请求中获取返回的 openid.dh_server_public 并传递它，然后我从私钥重新创建的密钥会导致 false

```
var_dump(openssl_dh_compute_key($this->op_pubkey, $this->dh)); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-19T13:37:29.817

好吧，好吧，你知道他们说什么以后再来解决问题。我所有的“个人”代码都很好，这是对 openssl_dh_compute_key 对公钥的期望以及 OP 的公钥如何传递的误解......

```
dh_server_public
   Value: base64(btwoc(g ^ xb mod p))
   Description: The OP's Diffie-Hellman public key. 
```

所以，当我第四次或第五次重新阅读它时，它终于点击了。

“嘿，如果我的密钥是二进制形式，我敢打赌 openssl 函数期待二进制..”

所以，额外的缺失步骤最终是base64解码......

```
openssl_dh_compute_key(base64_decode($this->op_pubkey), $this->dh); 
```

# r - 具有最小尺寸度量的 K-means 算法变化

> ID：11090232
> 
> 赞同：4
> 
> 时间：2012-06-18T20:04:45.710
> 
> 标签：r, maps, cluster-analysis, k-means

我正在寻找一些算法，例如 k-means，用于按距离将地图上的点分组为固定数量的组。组的数量已经确定，但技巧部分（至少对我来说）是满足每个组的 MOS 总和应该在一定范围内的标准，比如大于 1。有没有办法做到这一点发生？

```
ID MOS          X        Y

1 0.47   39.27846 -76.77101    
2 0.43   39.22704 -76.70272    
3 1.48   39.24719 -76.68485    
4 0.15   39.25172 -76.69729    
5 0.09   39.24341 -76.69884 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-19T09:54:26.147

我对您的问题很感兴趣，但不确定如何将某种随机过程引入分组算法。如果您排列数据集（例如行的顺序），似乎 kmeans 算法确实会给出不同的结果。我在[这里](https://stackoverflow.com/questions/5696381/r-clustering-results-are-different-everytime-i-run?rq=1)找到了一些信息。以下脚本使用一组随机数据演示了这一点。该图以黑色显示原始数据，然后通过排列（颜色）在每个集群的中心绘制一段。

由于我不确定您的 MOS 变量是如何定义的，因此我在数据框中添加了一个随机变量，以说明您如何寻找满足给定标准的聚类。为每个集群计算 MOS 的总和，并将结果存储在 MOS.sums 对象中。为了重现有利的聚类，您可以使用存储在种子对象中的用于排列的随机种子值。您可以看到排列结果是几个不同的聚类：

```
set.seed(33)
nsamples=500
nperms=10
nclusters=3

df <- data.frame(x=runif(nsamples), y=runif(nsamples), MOS=runif(nsamples))

MOS.sums <- matrix(NaN, nrow=nperms, ncol=nclusters)
colnames(MOS.sums) <- paste("cluster", 1:nclusters, sep=".")
rownames(MOS.sums) <- paste("perm", 1:nperms, sep=".")

seeds <- round(runif(nperms, min=1, max=10000))

    plot(df$x, df$y)
COL <- rainbow(nperms)
for(i in seq(nperms)){
    set.seed(seeds[i])
    ORD <- sample(nsamples)
    K <- kmeans(df[ORD,1:2], centers=nclusters)
    MOS.sums[i,] <- tapply(df$MOS[ORD], K$cluster, sum)
    segments(df$x[ORD], df$y[ORD], K$centers[K$cluster,1], K$centers[K$cluster,2], col=COL[i])
}
seeds
MOS.sums 
```

![在此处输入图像描述](../Images/350820f36c56297cd7b88d80d590585e.png)

# dojo - 运行 dojo dgrid : subrows 未定义

> ID：11090233
> 
> 赞同：0
> 
> 时间：2012-06-18T20:04:47.393
> 
> 标签：dojo, dgrid

我曾尝试使用 dgrid （使用他们的示例）为网格布局实现一个类，但是在加载我的网格时出现此错误（*subRows 未定义*）。我的代码看起来像这样：

```
define([
    "dojo/_base/declare",
    "dojo/_base/lang",
    "dgrid/Grid",
    "dgrid/Keyboard", 
    "dgrid/Selection"
], function(
    declare,
    lang,
    Grid,
    Keyboard, 
    Selection
){

    return declare([Grid, Keyboard, Selection], {

            columns: {
                first: "First Name",
                last: "Last Name",
                age: "Age"
            },
            selectionMode: "single", // for Selection; only select a single row at a time
            cellNavigation: false, // for Keyboard; allow only row-level keyboard navigation

         constructor: function() {
              var data = [
            { first: "Bob", last: "Barker", age: 89 },
            { first: "Vanna", last: "White", age: 55 },
            { first: "Pat", last: "Sajak", age: 65 }
            ];

            this.renderArray(data);
        }
    });
}); 
```

并像这样调用/创建它，

```
app.gridLayout = new GridLayout().placeAt(document.body); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-19T00:50:19.633

将您的`constructor`代码放入`postCreate`方法中：

```
return declare([Grid, Keyboard, Selection], {

    columns: {
        first: "First Name",
        last: "Last Name",
        age: "Age"
    },

    selectionMode: "single",
    cellNavigation: false,

    postCreate: function() {
        var data = [
            { first: "Bob", last: "Barker", age: 89},
            { first: "Vanna", last: "White", age: 55},
            { first: "Pat", last: "Sajak", age: 65}
        ];

        this.renderArray(data);
    }
}); 
```

另请注意`dgrid`，不是*dijit*来最小化其依赖关系，因此它没有`placeAt()`方法。您在这里有两个选择：

1.  *将占位符的DOM 节点*或`id` *字符串*作为第二个参数提供给构造函数：

    ```
    var gridLayout = new GridLayout({}, "placeholder"); 
    ```

2.  通过子类化成为`dgrid`一个*dijit*`dijit/_WidgetBase`以使用`gridLayout.placeAt("placeholder")`：

    ```
    declare([_WidgetBase, Grid, Keyboard, Selection], {}); 
    ```

# php - 使用 Graph API 从相册中获取下一张图片

> ID：11090238
> 
> 赞同：0
> 
> 时间：2012-06-18T20:05:28.287
> 
> 标签：php, image, facebook-graph-api, facebook-php-sdk

我正在使用它的 id 获取图像，但我也想从相册中获取上一张和下一张图片。

有没有办法使用图形 API 来做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-18T22:03:29.383

为此，您需要从相册中获取**所有**照片并按照您想要的顺序手动排序（Facebook 不允许您按“创建”排序，这可能是您想要的）。

我发现使用 FQL 更容易，示例代码是

```
SELECT pid FROM photo WHERE aid="20531316728_324257" 
```

详细信息：http: [//developers.facebook.com/docs/reference/fql/photo/](http://developers.facebook.com/docs/reference/fql/photo/)（注意：您使用专辑 ID 进行此调用）但您也可以在图形 API 中执行等效操作 - [http://developers.facebook .com/docs/reference/api/photo/](http://developers.facebook.com/docs/reference/api/photo/) （注意：您使用相册的对象 ID 进行此调用）。

# php - PHP - 无论客户端是什么浏览器，使用 PHP 验证表单都能保证完整的验证？

> ID：11090239
> 
> 赞同：0
> 
> 时间：2012-06-18T20:05:31.217
> 
> 标签：php, validation

我有一个相对简单的问题。

使用 PHP 会保证表单始终以使用 PHP 编码的方式进行验证吗？

这是...如果您执行以下操作：

```
if (strlen($_POST['myInput'] == 0)
{
    Do this...
} 
```

无论用户使用什么客户端，它都适用吗？例如 IE、Firefox、移动设备（黑莓、三星）、Linux 浏览器？

我问这个的原因是因为我根本看不到应用 html 验证的意义`pattern`。

任何有关这方面的意见将不胜感激。谢谢！

编辑：

```
if (!preg_match("#^([0-9 ]{10,13})?$#", $_POST['myInput']))
{
    // Apply error pointers
    $_SESSION['myInputError'] = 'class="badInput" autofocus="autofocus"';

    include "$docRoot/html/forms/reg/user_info.html.php";
    exit();
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-18T20:07:58.817

答案是肯定的，PHP 由服务器而不是客户端运行，因此它将始终以相同的方式处理输入。因此，除非您根据客户端的浏览器编写特定代码以使其行为不同，否则它将以相同的方式处理输入。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-18T20:10:57.260

服务器端的验证应保证表单始终得到验证。因此，如果您只有时间开发一个，请选择服务器端验证。

也就是说，客户端验证很有用，因为每个表单字段都可以在用户填写时单独进行实时验证，因此他们可以更快地判断他们是否填写正确。

# python - 用于处理 FITS 文件的 while 循环（python）

> ID：11090243
> 
> 赞同：0
> 
> 时间：2012-06-18T20:05:49.280
> 
> 标签：python, while-loop, fits

我是 python 编程的新手，并且正在尝试创建一个使用 python 中的一段代码处理数千个文件的设置。我创建了一个练习文件夹来执行此操作。其中有两个 FITS 文件（FITS1.fits 和 FITS2.fits）。我做了以下操作将它们都放在一个 .txt 文件中：

```
ls > practice.txt 
```

这是我接下来所做的：

```
$ python
import numpy
import pyfits
import matplotlib.pyplot as plt
from matplotlib import pylab
from pylab import *
import asciidata

a = asciidata.open('practice.txt')

print a[0][0] #To test to see if practice.txt really contains my FITS files FITS1.fits
i = 0
while i <=1 #Now I attempt a while loop to read data from columns in FITS files, plot the numbers desired, save and show the figures. I chose i <=1 because there are only two FITS files in the text(also because of zero-indexing). 

    b = pyfits.getdata(a[0][i]) # "i" will be the index used to use a different file when the while loop gets to the end

    time = b['TIME'] #'TIME' is a column in the FITS file
    brightness = b['SAP_FLUX']
    plt.plot(time, brightness)
    xlabel('Time(days)')
    ylabel('Brightness (e-/s)')
    title(a[0][i])

    pylab.savefig('a[0][i].png') #Here am I lost on how to get the while loop to name the saved figure something different every time. It takes the 'a[0][i].png' as a string and not as the index I am trying to make it be.

    pylab.show()

    i=i+1 # I placed this here, hoping that when the while loop gets to this point, it would start over again with a different "i" value 
```

按两次回车后，我按预期看到了第一个数字。然后我将关闭它并查看第二个。但是，仅保存第一个图形。有没有人对我如何改变我的循环来做我需要的事情有任何建议？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-18T20:51:55.750

您应该使用 glob 自动获取适合文件作为列表，从那里使用 for 循环将让您直接迭代文件的名称，而不是使用索引。调用`plt.savefig`时，需要构造要保存的文件名。这是清理并放在一起的代码：

```
from glob import glob
import pyfits
from matplotlib import pyplot as plt

files = glob('*.fits')

for file_name in files:
    data = pyfits.getdata(file_name)
    name = file_name[:-len('.fits')] # Remove .fits from the file name

    time       = data['TIME']
    brightness = data['SAP_FLUX']

    plt.plot(time, brightness)

    plt.xlabel('Time(days)')
    plt.ylabel('Brightness (e-/s)')
    plt.title(name)

    plt.savefig(name + '.png')
    plt.show() 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-18T20:52:20.123

在您的代码中， i 被视为字母 i，而不是变量。如果您想保留此命名，您可以执行以下操作：

```
FileName = 'a[0][%s].png' % i
pylab.savefig(FileName) 
```

# sharepoint - Active Directory 中的“GetUser”参数...不是“当前用户”，而是基于“人员选取器”字段中的选择的“特定用户”。

> ID：11090245
> 
> 赞同：0
> 
> 时间：2012-06-18T20:06:12.213
> 
> 标签：sharepoint, active-directory

场景：我们有一个“请求者”（当前用户）填写表格，并且必须从人员选取器字段中选择一个有效的员工。此返回验证员工的“用户名”。我们需要 AD 参数然后填写其他字段，例如：工作电话、位置、部门、城市、州、邮编等...

来自经理的要求：在 SPD 2007 中设计的表单必须保持打开状态，并且在提交表单之前，“请求者”需要查看数据。

我们已经搜索了互联网，但没有找到任何可以帮助我们完成这个过程的东西。我们研究了工作流程，但似乎只有在提交表单后才能工作。

Infopath 不是我们的选择。

任何指导将不胜感激。

谢谢，

使用：Sharepoint Designer 2007

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-19T09:08:45.350

我相信你需要采取java脚本的方法，有一些关于访问WSS3上的用户配置文件的参考

[http://sharepointjavascript.wordpress.com/2009/09/20/accessing-user-profile-information-in-wss-3-0-with-javascript/](http://sharepointjavascript.wordpress.com/2009/09/20/accessing-user-profile-information-in-wss-3-0-with-javascript/)

如果这些库不足，您可能需要创建自己的 Web 服务 api，以便 java 脚本检索表单所需的信息。

我认为您不能仅使用 SPD 2007 来做到这一点，以下是使其正常工作所需要做的事情。

Javascript 函数

*   获取用户信息（来源：使用库或自定义 Web 服务的内置 sharepoint api）
*   检测 prople 选择器是否有价值
*   用用户信息填写字段

# api - 访问私人博客的 Tumblr v2 API

> ID：11090257
> 
> 赞同：4
> 
> 时间：2012-06-18T20:06:37.693
> 
> 标签：api, private, tumblr

一直在寻找高低，找不到任何相关的答案。我想知道是否有人遇到过 Tumblr API v2 调用，它可以让你从私人博客访问数据。我想在提供身份验证的同时从我的一些私人博客中发布和检索列表。

谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-20T20:12:28.030

使用对 API 的正确 OAuth 调用以及私人博客的访问令牌，可以使用 Tumblr API v2访问该私人博客的至少*部分信息。*

以下是我的一些观察：

*   api.tumblr.com/v2/ **blog** /{base-hostname}/ **posts**

    通常，您使用您的公共 API 密钥进行此调用，这样您就可以访问任何非私有 Tumblr 的帖子。

    ***然而！*** **好消息**：如果您在发出此请求时**包含完整的 OAuth 标头，****它将**返回私人 Tumblr 帐户的帖子列表。当然，您需要该 Tumblr 的访问令牌来执行此操作。是的，我已经尝试过了，做到了，并且有效。

    如果您*只*使用您的消费者 API 密钥，例如

    ```
    api.tumblr.com/v2/blog/{base-hostname}/posts?api_key=w8878374r384r... 
    ```

    那么你将一无所获。您必须使用所有正确的 OAuth 参数发出经过完全身份验证的请求。

*   api.tumblr.com/v2/ **blog** /{base-hostname}/ **info**

    对私人博客*根本*不起作用，即使使用所有正确的 OAuth 东西来进行 API 调用也是如此。

*   api.tumblr.com/v2/**用户/信息**

    通常这会为给定的经过身份验证的用户返回一个“博客”列表。但是，任何私人 tumblr 都*不会*出现在此博客列表中。

*笔记：*

*   我没有用私人博客测试过许多其他 API 调用，所以我无法确定创建/编辑/删除帖子是否有效。

*   我根本没有用 xAuth 测试过这个，只有常规的 OAuth 和通过“网络授权流程”获得的标准访问令牌

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-08-27T14:13:03.147

```
$conskey = "CONSUMER KEY";
$conssec = "CONSUMER SECRET";

$tumblr_blog = "myblog.tumblr.com";
$to_be_posted = "This is the text to be posted";

$oauth = new OAuth($conskey,$conssec);
$oauth->fetch("http://api.tumblr.com/v2/blog/".$tumblr_blog."/post", array('type'=>'text', 'body'=>$to_be_posted), OAUTH_HTTP_METHOD_POST);

$result = json_decode($oauth->getLastResponse());

if($result->meta->status == 200){
  echo 'Success!';
} 
```

尝试使用 API 将上面的代码发布到您的博客。

希望有帮助。

# dynamic-data - 无向图边“重新链接”度量

> ID：11090261
> 
> 赞同：0
> 
> 时间：2012-06-18T20:07:18.400
> 
> 标签：dynamic-data, graph-theory

我希望根据顶点之间重新形成边的频率以及这些重新链接实例之间的持续时间来表征动态图。我将这种措施称为“链接重复”。较高的值表示新形成的边经常重新连接最近连接的顶点。较低的值表示新的顶点对或非最近的邻居之间正在形成新的边。

我已经搜索了一段时间来寻找这种度量，但发现主要是处理从未删除的新边缘的度量。对现有动态图度量的引用将是理想的。我目前的解决方案只是“自 i 和 j 之间的最后一次链接以来的时间”在时间步数上的平均值，但我想坚持使用已建立的解决方案（如果存在）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-21T19:44:51.467

您是否可以有一个计数器矩阵，每次在图表的节点之间重新建立链接时都会增加一个计数器矩阵，然后以此为基础进行测量。

# jsp - 哪个更好？

> ID：11090262
> 
> 赞同：5
> 
> 时间：2012-06-18T20:07:23.517
> 
> 标签：jsp, jstl

以下哪一项更好？

```
<c:set var="var1" value="false" scope="request"/>
<c:if test="${someCondition}">
    <c:set var="var1" value="true" scope="request"/>
</c:if> 
```

或以下

```
<c:choose>
    <c:when test="${someCondition}">
        <c:set var="var1" value="true" scope="request"/>
    </c:when>
    <c:otherwise>
        <c:set var="var1" value="false" scope="request"/>
    <c:otherwise>
</c:choose> 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-18T20:10:26.180

两者都不是，这看起来最适合我：

```
<c:set var="var1" value="${someCondition}" scope="request"/> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-18T20:09:22.827

第一个，因为它更简洁。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-18T21:35:50.857

我会按照 Tomasz 的建议去做。如果您有不同的值而不是布尔值，则可以使用三元语句：

```
<c:set var="var1" value="${someCondition == 'someValue' ? 'valueA' : 'valueB'}" scope="request"/> 
```

# c# - 从资源触发资源

> ID：11090263
> 
> 赞同：2
> 
> 时间：2012-06-18T20:07:24.993
> 
> 标签：c#, wpf

是否可以从另一个资源更改资源。如果鼠标悬停在 StartButtonMain 上，我喜欢更改 StartButtonRed 的背景。

```
<ImageBrush x:Key="RedBackgroundActive" ImageSource="/Images/start_red_active.png" Stretch="Fill"/>

<Style x:Key="StartButtonMain" TargetType="{x:Type local:SimpleButton}">
    <Style.Resources>
        <ImageBrush x:Key="MainBackground" ImageSource="/Images/start_main_normal.png" Stretch="Fill"/>
        <ImageBrush x:Key="MainBackgroundActive" ImageSource="/Images/start_main_active.png" Stretch="Fill"/>
    </Style.Resources>
    <Style.Setters>
        <Setter Property="HorizontalAlignment" Value="Stretch"/>
        <Setter Property="VerticalAlignment" Value="Stretch"/>
        <Setter Property="Background" Value="{StaticResource MainBackground}"/>
        <Setter Property="Visibility" Value="Visible"/>
    </Style.Setters>
    <Style.Triggers>
        <Trigger Property="IsMouseOver" Value="True">
            <Setter Property="Background" Value="{StaticResource MainBackgroundActive}"/>
            // Change the background of StartButtonRed to RedBackgroundActive
        </Trigger>
    </Style.Triggers>
</Style>

<Style x:Key="StartButtonRed" TargetType="{x:Type local:SimpleButton}">
    <Style.Resources>
        <ImageBrush x:Key="RedBackground" ImageSource="/Images/start_red_normal.png" Stretch="Fill"/>
    </Style.Resources>
    <Style.Setters>
        <Setter Property="HorizontalAlignment" Value="Stretch"/>
        <Setter Property="VerticalAlignment" Value="Stretch"/>
        <Setter Property="Background" Value="{StaticResource RedBackground}"/>
        <Setter Property="Visibility" Value="Visible"/>
    </Style.Setters>
</Style> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-03T11:02:04.173

你**不能**这样做。因为样式是资源，触发器只能从它们自己的模板中定位 FrameworkElements，或者使用绑定到其他实际的 FrameworkElement，您不能绑定到其他资源。

[您可以使用UserControl Triggers](http://msdn.microsoft.com/en-us/library/system.windows.frameworkelement.triggers.aspx)解决此问题。

# asp.net - 会话变量在开发过程中的工作方式是否不同？

> ID：11090269
> 
> 赞同：3
> 
> 时间：2012-06-18T20:08:04.633
> 
> 标签：asp.net, asp.net-mvc-3, session

我正在使用 ASP.NET MVC3 构建一个网站。当用户登录时，我从数据库中提取他们的显示名称并将其存储到会话变量中：

```
Session["DisplayName"] = user.Display; 
```

然后在`_Layout.cshtml`我用它显示在每一页的顶部：

```
<span class="user">@(Session["DisplayName"] as string)</span> 
```

当我开始调试网站然后登录时，这工作正常，但是如果我随后重建服务器并再次开始调试，我的浏览器仍然保持登录状态，但`Session`变量被清除。这会导致我的显示名称应该是一堆空白。

这是重建服务器的副作用，而不是我在部署时需要担心的事情吗？有没有办法在我每次重建时使登录无效，从而避免这个问题？或者有没有更好的方法来存储这个用户数据，而不是一个`Session`变量？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-18T20:10:05.707

> 这是重建服务器的副作用，而不是我在部署时需要担心的事情吗？

哦不，这是你绝对应该担心的事情。如您所知，ASP.NET 会话默认存储在服务器内存中。并且当 IIS 回收 AppDomain（这绝对可能在任何时候发生）时，您的所有会话都消失了。例如，在应用程序处于某种不活动状态后，IIS 可能会关闭 AppDomain。或者在达到某些 CPU 或内存使用阈值之后。如果您希望能够在 ASP.NET 会话中可靠地存储某些内容，您可以卸载存储过程外并将该会话存储在专用会话服务器或 SQL 中。但老实说，我看到很多人将 ASP.NET Session 迁移到 SQL Server 并后悔。重点是什么？您已经在 SQL Server 中获得了这些信息 :-) 我曾经使用过它并且非常后悔。

我个人从不在我的应用程序中使用 ASP.NET Session。如果您需要保留显示名称等信息并避免在每次请求时访问数据库，您可以将其存储在表单身份验证 cookie 的用户数据部分。所以这里的想法是：当用户成功输入正确的凭据时，您手动创建一个`FormsAuthenticationTicket`UserData 属性，并使用您希望在每个请求中获得有关此用途的任何信息填充其 UserData 属性，然后发出身份验证 cookie。然后，您编写一个自定义 Authorize 属性，在其中解密 cookie，获取用户数据并将其存储为自定义`IIdentity`，使其在每个请求中都可用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-18T20:12:25.663

将用户名存储在缓存`(Cache[string.Format("DisplayName_{0}", User.Id)] = User.Username)`、cookie 或将会话移动到 SQL Server 而不是 InProc

我将创建一个通过用户 ID 获取用户名的静态辅助方法。如果找到缓存的值，它将使用该值，如果没有，则从 db 获取值，将其存储在缓存中并返回。

```
public static string GetUsername(int UserID)
{
    string cacheKey=string.Format("DisplayName_{0}", UserID);
    if (HttpContext.Current.Cache[cacheKey]==null)
    {
        // Retrieve user name from DB
        string Username=Repository.GetUserName(UserID);
        HttpContext.Current.Cache[cacheKey]=Username;
    }

    return HttpContext.Current.Cache[cacheKey].ToString();
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-18T20:30:01.887

有更好的方法，但是要解决您的特定问题，您的身份验证超时和会话超时不一样，您需要专门处理一个在另一个之前超时的情况。在这里查看我的帖子：

[如何在 ASP.NET 中处理表单身份验证超时异常？](https://stackoverflow.com/questions/7586469/how-can-i-handle-forms-authentication-timeout-exceptions-in-asp-net)

# php - 设置 MySQL 数据库以用于搜索功能

> ID：11090271
> 
> 赞同：0
> 
> 时间：2012-06-18T20:08:29.947
> 
> 标签：php, mysql

我目前有一个非常简单的 MySQL 数据库（articlesDB），其中包含 1 个表（文章）和 6 行，因此设置如下：

```
 -------------------------------------------------------------------------------------
id (int) | articletitle | articleorganization | articledate | articleurl |  articletags
 ------------------------------------------------------------------------------------- 
```

数据库的目的是存储有关文章的信息以及存储已应用于这些文章的“标签”，以便可以通过表单通过任何查询组合搜索文章。

id 自动递增，但文章标题、组织、日期、url 和标签都是从使用 PHP 构建的条目表单中输入的。问题是需要有一种方法来强制将正确的标签拼写应用于文章，所以我认为复选框将是可行的方法。这样，只能应用正确（且一致）拼写的标签。

然而，我发现为了以这种方式实现复选框，我实际上需要数据库中的多个表；一个用于文章数据，一个用于标签，一个用于将标签与文章数据交叉引用：

// 文章信息

```
 ----------------------------------------------------------------------
id | articletitle | articleorganization | articledate | articleurl
 ---------------------------------------------------------------------- 
```

//标签信息

```
 --------------
id  | articletag
 -------------- 
```

// 文章和标签参考

```
 -------------------------------
id  |  articleid  |  articletagid
 ------------------------------- 
```

不过，在此之后，我不确定如何为 MySQL 查询构建逻辑。

我认为我需要将数据插入到 3 个单独的表中，但我不知道究竟需要去哪里。

非常感谢任何有关在哪里查看的帮助或线索。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-18T20:17:25.593

最简单的方法是让用户键入标签并发布表单。在表单处理文件中有一个 SELECT 查询搜索标签表中的所有标签。如果它们不匹配，则显示错误消息，否则在文章表中创建新条目，最后添加您需要的许多 TagOnArticle（或任何您称之为的）条目。

以下是我将如何模拟这种情况：

![数据库关系](../Images/e481f751541a4e3a0efe03b131213ac5.png)

现在，如果您想检索所有有效标签，只需使用：

```
SELECT tag_name FROM Tag 
```

并将结果与​​用户输入的内容进行比较。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-18T20:22:31.977

看起来你想建立一个字典数据库。我无能为力。但是，您提到了逻辑...我假设您指的是提取最接近的匹配项？

不幸的是，最适合这项工作的是“模糊逻辑”（人工智能），这很乏味（在我看来）。下一个最好的事情是[Levenstein](http://kristiannissen.wordpress.com/2010/07/08/mysql-levenshtein/)函数。

# php - 如何在浏览器中强制下载图像？

> ID：11090272
> 
> 赞同：9
> 
> 时间：2012-06-18T19:54:48.017
> 
> 标签：php, image, .htaccess

我想强制用户下载图像。没有在浏览器中打开。

~~可以使用 HTML5 这个属性`download`，但目前只有 Chrome 支持。~~

我尝试`.htaccess`了解决方案，但它不起作用。

```
<Files *.jpg>
   ForceType application/octet-stream
   Header set Content-Disposition attachment
</Files> 
```

如果用户单击链接，我如何强制下载我的所有图像？

```
<a href="http://blablabla.com/azerty/abc.jpg" target="_blank" />Download</a> 
```

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-06-18T20:13:12.653

有两种方法可以做到这一点 - 一种使用 JS，一种使用 PHP。

在[这个网站](http://www.jtricks.com/bits/content_disposition.html)的 JS 中：

```
<a href="javascript:void(0);"
 onclick="document.execCommand('SaveAs',true,'file.html');"
 >Save this page</a> 
```

在 PHP 中创建一个名为的脚本`download.php`，类似于以下代码：

```
<?php
// Force download of image file specified in URL query string and which
// is in the same directory as the download.php script.

if(empty($_GET['img'])) {
   header("HTTP/1.0 404 Not Found");
   return;
}

$basename = basename($_GET['img']);
$filename = __DIR__ . '/' . $basename; // don't accept other directories

$mime = ($mime = getimagesize($filename)) ? $mime['mime'] : $mime;
$size = filesize($filename);
$fp   = fopen($filename, "rb");
if (!($mime && $size && $fp)) {
  // Error.
  return;
}

header("Content-type: " . $mime);
header("Content-Length: " . $size);
// NOTE: Possible header injection via $basename
header("Content-Disposition: attachment; filename=" . $basename);
header('Content-Transfer-Encoding: binary');
header('Cache-Control: must-revalidate, post-check=0, pre-check=0');
fpassthru($fp); 
```

然后将图像链接设置为指向此文件，如下所示：

```
<img src="/images/download.php?img=imagename.jpg" alt="test"> 
```

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2014-11-13T20:03:24.010

在你的 .htaccess 中试试这个：

```
<FilesMatch "\.(?i:jpg|gif|png)$">
  ForceType application/octet-stream
  Header set Content-Disposition attachment
</FilesMatch> 
```

# css - 图像不适合在 Div 中

> ID：11090273
> 
> 赞同：0
> 
> 时间：2012-06-18T20:08:36.740
> 
> 标签：css

我有一个容器 div（outer_most_container），我想在其中放置一个图像（蓝色渐变）作为背景。滚动时应固定图像。现在的问题是图像的宽度为 1040 像素，应该适合 65em 的 div 的宽度，但事实并非如此。

另外，我不确定为什么缩小时图像会消失。

[http://i.imgur.com/patgb.png](http://i.imgur.com/patgb.png)

HTML

```
<!DOCTYPE HTML>
<html>
<head>
    <title>UnderWater Theme</title> 
    <link rel="stylesheet" href="underwater.css" />
</head>
<body>
    <div class="outer_most_container">
            <div class="top">
                <div class="banner">    
                </div>
            </div>
    </div>
</body>
</html> 
```

CSS

```
* {
    margin: 0;
    padding: 0; 
}
html {
    font-size: 100%;
    height: 100%;
}
body {
    font-size: 1em;
    background-color: black;
    height: 100%;       
}
.outer_most_container {
    position: relative; 
    width: 65em;
    height: 43.75em;
    margin: auto;
    background-image: url('Aura.jpg');  
    background-attachment: fixed;
    background-repeat: no-repeat;
    background-color: red;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-20T06:54:49.240

通过使用以下方法，我能够防止图像在缩小期间调整大小：

```
background-size: 65em 43.75em; 
```

# php - 在数据库PHP中一次插入两个表

> ID：11090277
> 
> 赞同：0
> 
> 时间：2012-06-18T20:08:51.563
> 
> 标签：php, mysql, database

我只是想知道是否有可能一次将两个表插入数据库，例如，

```
$query = sprintf("INSERT INTO table ('tableid')values('somevaleu'),INSET INTO table1 ('table1id')values('somevalue')"); 
```

或者我需要单独做，

```
$query1 = sprintf("INSERT INTO table ('tableid')values('somevaleu')");
$query2 = sprintf("INSET INTO table1 ('table1id')values('somevalue')"); 
```

有什么建议么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-18T20:18:20.983

如果您使用的是旧的[mysql](http://us.php.net/manual/en/book.mysql.php)扩展（`mysql_*`函数），那么您不能在一个语句中发出多个查询。

从手册^([1](http://us.php.net/mysql_query))：

> mysql_query() 向与指定链接标识符关联的服务器上当前活动的数据库发送一个唯一查询（不支持多个查询）。

如果您使用的是[mysqli](http://php.net/mysqli)或[pdo mysql](http://php.net/manual/en/ref.pdo-mysql.php)，那么您可以在一个查询中进行多次插入。

也可以使用扩展插入在一个查询中将多行插入到*同一个*表中，但不能使用两个不同的表。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-18T20:27:21.680

你为什么要这样做？如果只是懒惰，请多花三十秒，并使用两个单独的语句。如果，OTOH，您想要这样做是因为您需要同时进行两次插入以保持数据库一致（例如同时更新“订单”表和“计费”表），您想要查看**交易**。

基本上，一个事务（以**BEGIN**开头）是一堆捆绑在一起的查询，当你完成后，你可以**COMMIT**并使其粘住或**ROLLBACK**将它们丢弃（例如，如果有错误并且你想要中止进程）。它们并没有*完全*同时执行，但是在 COMMIT 上，它们要么全部成功，要么都不执行。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-18T20:13:41.280

您可以使用`begin`来包含多个 SQL 语句：

```
$query = "BEGIN ";
$query .= "INSERT INTO table ('tableid')values('somevalue') INSERT INTO table1 ('table1id')values('somevalue') ";
$query .= "COMMIT"; 
```

然后运行`$query`。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-18T20:14:22.860

这取决于您的数据库是如何被查询的。我使用的许多第三方数据库抽象库每次执行只允许一个 SQL 语句。但是，正如您所建议的，MySQL*可以*接受由分号分隔的多个查询。

# ruby-on-rails - 渲染包含 Float::NAN 对象的哈希时，Rails 返回无效 JSON

> ID：11090288
> 
> 赞同：2
> 
> 时间：2012-06-18T20:09:23.487
> 
> 标签：ruby-on-rails, ruby, json

我正在为 Rails 控制器调用返回 JSON。在控制器中，我需要从包含 NaN 对象的 Ruby 哈希生成 JSON。返回 JSON 时浏览器显示错误：

```
{
  "value": NaN
} 
```

> 错误：第 1 行的解析错误：“值”：NaN

我做了一些快速研究，似乎 NaN 不是有效的 JSON 对象，因此应该用引号括起来 - “NaN”。Rails JSON 解析器不符合标准 JSON 格式并将 NaN 对象包装在引号中，这似乎很愚蠢。

我试图将散列展平为字符串并将其转换回散列。但是我一直在遇到解析错误。

我该如何解决这个问题？

* * *

编辑：

为了简单的问题，哈希看起来像这样：

```
{ "value" => Float::NAN } 
```

* * *

编辑2：

我需要将上面的哈希转换为以下 json：

```
{
  "value": "NaN"
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-18T22:45:03.380

啊，我想通了——大约 10 个月前在 Rails 主分支中修复了这个问题。（https://github.com/rails/rails/commit/7b53d1372df4bbc7a539b5e493ff1491ec460397）

要为 Rails 3.2.3 < 修复它，只需添加以下代码：

```
class Float
  def as_json(options = nil) finite? ? self : NilClass::AS_JSON end #:nodoc:
end 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-18T22:32:34.183

查看甜点[`ActiveModel::Serializer`](https://github.com/josevalim/active_model_serializers#readme)（现在与导轨捆绑在一起）。有了它，您可以自定义控制器序列化模型的方式。

```
class Blark < ActiveRecord::Base
  attr_accessor :value
end

class BlarkSerializer < ActiveModel::Serializer
  attributes :value
  def value
    (@bject.value.is_a?(Float) && @object.value.nan?) ? "NaN" : @object.value
  end
end 
```

# 警告

这仅适用于控制器的`render`方法。不要指望它可以在 Rails 控制台中工作。我有[一个快速的脏模块](http://bit.ly/PevhJ8)，它用其中的方法覆盖了方法，`ActiveModel::Serializers`因此`ActiveModel::Serializer`事情更加一致。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-20T14:46:08.393

我遇到了一个类似的问题，尽管在 Rails 3.2.8 上，但没有发现根据 Brian 的评论来解决这个问题（他建议的代码片段也是通过关于 NilClass::AS_JSON 未定义的错误）。

但是，我确实发现了这个有趣的讨论：

[https://github.com/flori/json/pull/145](https://github.com/flori/json/pull/145)

这似乎表明 to_json / parse 对于跨语言兼容性更好，就像通过网络通信时一样，但是 JSON.dump / JSON.load 为仅在 Ruby 中工作提供了更好的结果。

我发现使用转储/加载而不是 to_json/parse 修复了我序列化和反序列化带有 NaN 的哈希的能力。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-18T21:56:02.867

您使用的是什么 JSON 生成器？它似乎坏了。

当我尝试使用`json`gem v1.6.4 将您的哈希转换为 JSON 时出现异常：

```
require 'json'

hash = { "value" => Float::NAN }
hash.to_json

# => JSON::GeneratorError: 778: NaN not allowed in JSON 
```

如果您确实需要支持序列化 NaN 值，则需要先替换散列中的 Float::NAN 值，然后再将其转换为 JSON：

```
json_string = hash.inject({}) { |h, (k, v)|
  v = "NaN" if v.is_a?(Float) && v.nan?
  h.merge(k => v)
}.to_json

# => "{\"value\":\"NaN\"}" 
```

解析后不要忘记再次用 Float::NAN 替换 "NaN" 字符串：

```
hash = JSON.parse(json_string).inject({}) { |h, (k, v)|
  v = Float::NAN if v == "NaN"
  h.merge(k => v)
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2016-05-19T20:54:54.967

这个 hack 不需要 rails 并且在 vanilla 2.2.x ruby​​ 中工作，但要小心包含下面的“确保”块。您可以（正确地）期待警告，因此请谨慎使用。

```
begin
  tmp = Float::NAN
  Float::NAN = 'NaN'
  { "value" => Float::NAN }.to_json
ensure
  Float::NAN = tmp
end 
```

# python - 查找字符串中最长的重复序列

> ID：11090289
> 
> 赞同：40
> 
> 时间：2012-06-18T20:09:24.320
> 
> 标签：python, regex, string, algorithm

我需要在字符串中找到最长的序列，并注意该序列必须重复三次或更多次。因此，例如，如果我的字符串是：

**fdwaw4helloworldvcdv1c3xcv3xcz1sda21f2sd1ahelloworldgafgfa4564534321fadghelloworld**

那么我希望返回值“ **helloworld** ”。

我知道实现这一点的几种方法，但我面临的问题是实际的字符串大得离谱，所以我真的在寻找一种可以及时完成的​​方法。

* * *

## 回答 #1

> 赞同：33
> 
> 时间：2012-06-18T20:17:32.607

这个问题是[最长重复子串问题](http://en.wikipedia.org/wiki/Longest_repeated_substring_problem)的一个变体，并且有一个使用[后缀树](http://en.wikipedia.org/wiki/Suffix_tree)的 O(n) 时间算法来解决它。这个想法（正如维基百科所建议的）是构建一个后缀树（时间 O(n)），用后代的数量（时间 O(n) 使用 DFS）注释树中的所有节点，然后找到具有至少三个后代的树中最深的节点（使用 DFS 的时间 O(n)）。这个整体算法需要时间 O(n)。

也就是说，众所周知，后缀树很难构建，因此在尝试此实现之前，您可能希望找到一个为您实现后缀树的 Python 库。一个快速的谷歌搜索出现了[这个库](https://github.com/kvh/Python-Suffix-Tree)，虽然我不确定这是否是一个好的实现。

另一种选择是将[后缀数组](https://en.wikipedia.org/wiki/Suffix_array)与[LCP 数组](https://en.wikipedia.org/wiki/LCP_array)结合使用。您可以遍历 LCP 数组中的相邻元素对，取每对元素中的最小值，然后以这种方式存储您找到的最大数字。这将对应于至少重复三次的最长字符串的长度，然后您可以从那里读取字符串本身。

构建后缀数组有几种简单的算法（Manber-Myers 算法在 O(n log n) 时间内运行，并且编码起来并不难），而 Kasai 的算法在 O(n) 时间内构建 LCP 数组并且相当直接编码。

希望这可以帮助！

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2012-06-18T21:36:26.187

使用 defaultdict 从输入字符串中的每个位置开始计算每个子字符串。OP 不清楚是否应该包括重叠匹配，这种蛮力方法包括它们。

```
from collections import defaultdict

def getsubs(loc, s):
    substr = s[loc:]
    i = -1
    while(substr):
        yield substr
        substr = s[loc:i]
        i -= 1

def longestRepetitiveSubstring(r, minocc=3):
    occ = defaultdict(int)
    # tally all occurrences of all substrings
    for i in range(len(r)):
        for sub in getsubs(i,r):
            occ[sub] += 1

    # filter out all substrings with fewer than minocc occurrences
    occ_minocc = [k for k,v in occ.items() if v >= minocc]

    if occ_minocc:
        maxkey =  max(occ_minocc, key=len)
        return maxkey, occ[maxkey]
    else:
        raise ValueError("no repetitions of any substring of '%s' with %d or more occurrences" % (r,minocc)) 
```

印刷：

```
('helloworld', 3) 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-06-18T21:31:20.023

让我们从头开始，计算频率并在最频繁的元素出现 3 次或更多次时停止。

```
from collections import Counter
a='fdwaw4helloworldvcdv1c3xcv3xcz1sda21f2sd1ahelloworldgafgfa4564534321fadghelloworld'
times=3
for n in range(1,len(a)/times+1)[::-1]:
    substrings=[a[i:i+n] for i in range(len(a)-n+1)]
    freqs=Counter(substrings)
    if freqs.most_common(1)[0][1]>=3:
        seq=freqs.most_common(1)[0][0]
        break
print "sequence '%s' of length %s occurs %s or more times"%(seq,n,times) 
```

结果：

```
>>> sequence 'helloworld' of length 10 occurs 3 or more times 
```

**编辑：**如果您觉得您正在处理随机输入并且公共子字符串的长度应该很小，那么您最好从小子字符串开始（如果您需要速度）并在找不到任何出现时停止至少3次：

```
from collections import Counter
a='fdwaw4helloworldvcdv1c3xcv3xcz1sda21f2sd1ahelloworldgafgfa4564534321fadghelloworld'
times=3
for n in range(1,len(a)/times+1):
    substrings=[a[i:i+n] for i in range(len(a)-n+1)]
    freqs=Counter(substrings)
    if freqs.most_common(1)[0][1]<3:
        n-=1
        break
    else:
        seq=freqs.most_common(1)[0][0]
print "sequence '%s' of length %s occurs %s or more times"%(seq,n,times) 
```

结果与上面相同。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-18T21:11:59.793

想到的第一个想法是使用逐渐变大的正则表达式进行搜索：

```
import re

text = 'fdwaw4helloworldvcdv1c3xcv3xcz1sda21f2sd1ahelloworldgafgfa4564534321fadghelloworld'
largest = ''
i = 1

while 1:
    m = re.search("(" + ("\w" * i) + ").*\\1.*\\1", text)
    if not m:
        break
    largest = m.group(1)
    i += 1

print largest    # helloworld 
```

代码运行成功。时间复杂度似乎至少为 O(n^2)。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-18T22:00:55.283

如果您反转输入字符串，则将其提供给正则表达式，例如`(.+)(?:.*\1){2}`
它应该给您最长的字符串重复 3 次。（反向捕获组 1 为答案）

*编辑：*
我不得不说取消这种方式。这取决于第一场比赛。除非到目前为止针对当前长度与最大长度进行了测试，否则在迭代循环中，正则表达式不适用于此。

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2019-03-12T16:07:34.267

```
from collections import Counter

def Longest(string):

    b = []
    le = []

    for i in set(string):

        for j in range(Counter(string)[i]+1): 
            b.append(i* (j+1))

    for i in b:
        if i in string:
            le.append(i)

    return ([s for s in le if len(s)==len(max( le , key = len))]) 
```

# asp.net - 是否可以欺骗或重用 VIEWSTATE 或检测它是否受到修改保护？

> ID：11090290
> 
> 赞同：7
> 
> 时间：2012-06-18T20:09:30.050
> 
> 标签：asp.net, security, viewstate, penetration-testing

## 问题

ASP 和 ASP.NET Web 应用程序在表单中使用称为 VIEWSTATE 的值。据我了解，这用于在对 Web 服务器的请求之间在客户端上保持某种状态。

我从未使用过 ASP 或 ASP.NET，需要帮助解决两个问题（和一些子问题）：

1) 是否可以以编程方式欺骗/构造表单的 VIEWSTATE？澄清：程序可以查看表单并从中构造 base64 编码的 VIEWSTATE 值的内容吗？

1 a) 或者它可以总是被忽略吗？

1 b) 特定表单的旧 VIEWSTATE 是否可以在以后调用相同表单时重用，或者如果这行得通，那只是运气？

[2）我从http://msdn.microsoft.com/en-us/library/ms972976.aspx#viewstate_topic12](http://msdn.microsoft.com/en-us/library/ms972976.aspx#viewstate_topic12)收集到可以打开安全性，以便 VIEWSTATE 免受欺骗。程序是否可以检测到 VIEWSTATE 以这种方式受到保护？

2 a) EVENTVALIDATION 值的出现与安全 VIEWSTATE 之间是否存在一对一的映射？

*关于 1) 和 2)，如果是，我可以提示我将如何做到这一点吗？对于 2) 我想我可以对该值进行 base64 解码并搜索始终在未加密的 VIEWSTATE 中找到的字符串。“第一的：”？还有什么？*

## 背景

我制作了一个[小工具](http://javahacker.com/sea-surfer-v2/)来检测和利用所谓的 CSRF 漏洞。我使用它来快速证明我发送给受影响网站所有者的此类漏洞的概念。我经常遇到这些带有 VIEWSTATE 的表单，而这些我不知道它们是否安全。

**编辑1：**稍微澄清了问题1。

**编辑 2：添加了***斜体*文本。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-18T20:17:12.167

> 是否可以以编程方式欺骗/构造表单的 VIEWSTATE？

当然。它只是一个 Base64 编码的值。现在，从 ASP.NET 2.0 开始，有一个选项可以通过机器密钥加密视图状态，但这是一个可选功能。通常，您首先不想将任何私有内容放在视图状态中。

> 或者它可以总是被排除在外吗？

一些 ASP.NET 的管道需要 ViewState，如果您仍想使用 ASP.NET 服务器控件，则*完全*关闭它是相当困难的。

> 特定表单的旧 VIEWSTATE 是否可以在以后调用相同表单时重用，或者如果这有效，那只是运气？

这称为[重放攻击](http://en.wikipedia.org/wiki/Replay_attack)

是的，有可能。这是一篇展示它的[博客文章。](http://eagle-site.blogspot.com/2010/01/viewstate-replay-attack.html)

> EVENTVALIDATION 值的出现与安全 VIEWSTATE 之间是否存在一对一的映射关系？

并不真地。事件验证基本上用于确保客户端事件匹配服务器上可能发生的“可能”事件。它主要保护并确保隐藏的输入，`__EVENTTARGET`如未被篡改。

# python - 将文本文件分成多个文本文件

> ID：11090292
> 
> 赞同：-2
> 
> 时间：2012-06-18T20:09:53.037
> 
> 标签：python, bash, awk, gawk

我已尽力理解[一个非常相似的 StackOverflow 问题](https://stackoverflow.com/questions/10790003/separate-single-text-file-into-multiple-files-based-on-certain-pattern)，但我无法终生提出建议`gawk`或`split`解决方案适用于我的情况。

我有一个包含 288 个提案的大型文本文件，每个提案的长度为 300 到 500 个单词，段落数量不等（因此行数不一致）。但是，每个提案都以以下性质的标识符开头：`--###--`或`--####--`。没有结束标记——尽管我想我可以通过对原始文件进行一些正则表达式搜索和替换来插入一个，然后再将其拆分为多个文件。我想要的是 288 个单独的文本文件的集合，每个文件都由两个破折号之间的数字命名。如果它使事情变得更容易，我可以轻松地将文件拆分为以三个数字开头的提案和以四个数字开头的提案。

简而言之，我想这样做：

```
#! /bin/env bash or python

Split all_proposals.txt into 121.txt, 122.txt, etc.

Where all_proposals.txt consists of:

  --121--

  One Line Title of Proposal

  Followed by several paragraphs each on a line of variable length.

  Another paragraph for effect.

  --122--

  More lines indeterminate in number. 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-18T20:19:49.953

每次看到带有标题的行时，只需设置输出文件的名称：

```
awk '/--[0-9]*--/ {split( $0, a, "--" ); output=a[2]".txt" }
    { print > output }' all_proposals.txt 
```

请注意，这会将标题行打印到文件中。如果您不希望这样，请`next`在标题的操作序列中添加一个命令。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-18T20:25:04.913

您可以在 python 中使用[正则表达式](http://docs.python.org/library/re.html)在几行中解决这个问题。看看文档；

那么，这个想法是搜索您的标识符，在这种情况下，它可能带有类似的表达式

```
r'(--[0-9]*--)' 
```

特别是，看看[re.split](http://docs.python.org/library/re.html#re.split)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-18T20:26:48.157

您可以使用 perl：

```
#!/usr/bin/perl
open(FI,"file.txt");
read(FI,$_,10000000);
close(FI);
@arr = split('--###--');
$cnt=0;
for $c (@arr)
{
    open(FO,">$cnt.txt");
    print FO $c;
    close(FO);
    $cnt++;
} 
```

# visual-studio - Visual Studio 2012 移动设备模拟器

> ID：11090294
> 
> 赞同：3
> 
> 时间：2012-06-18T20:09:58.590
> 
> 标签：visual-studio, visual-studio-2012, device-emulation

我今天刚从 TechEd 2012 回来，在那里我看到了几个分组会议，演示中展示了移动设备模拟器。一个很好的例子是 Daminan Edwards 题为“用于移动和平板电脑开发的 ASP.NET”的 Dev304 会议，他创建了一个 Asp.Net MVC 4 应用程序，然后制作了一个 _Layout.Mobile 文件和一个 Index.Mobile 文件，下载了 JQuery Mobile使用 NuGet，在他的视图中的列表中添加一些样式，并在 Opera 模拟器中运行他的 MVC 应用程序的移动版本，方法是从 Visual Studio 2012 中的工具栏启动 Opera 模拟器。

我今天早上下载了 RC 版本的 Visual Studio 2012，按照 Damian 的演讲中的步骤操作，但不知道如何运行任何移动模拟器。谁能帮我这个？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-06-19T12:13:26.973

您可以在此处下载 Opera 模拟器：[http ://www.opera.com/developer/tools/mobile/](http://www.opera.com/developer/tools/mobile/)

它不包含在 Visual Studio 中。Windows Phone 工具将在稍后更新 Windows Phone 工具时可用。

使用 VS 2012，您可以选择在开始调试时使用哪个浏览器。绿色箭头旁边是一个下拉按钮，最后一个条目是`Browse with...`。您可以在那里添加 Opera 的模拟器，然后您可以使用该浏览器（以及之前添加的所有其他浏览器）开始调试。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-18T09:23:42.030

You could try installing WebMatrix 2 which comes with a set of pseudo-emulators for iPhone, iPad, Windows Phone from memory. Then you can open your project in WebMatrix as a website folder and use its emulators.

[http://www.microsoft.com/web/webmatrix/](http://www.microsoft.com/web/webmatrix/)

Not the most elegant solution, but it's cheap ;)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-09-22T03:36:17.407

在 VS2012 中，您可以选择 Browse With 并选择 Add，然后在 WebMatrix 安装文件夹下找到模拟器，您将获得 Iphone 和 Ipad 模拟器。

# actionscript-3 - 了解从何处调用服务器 - Adob e AIR

> ID：11090297
> 
> 赞同：0
> 
> 时间：2012-06-18T20:10:14.977
> 
> 标签：actionscript-3, air

服务器端有没有办法知道特定的 Adob​​e Air 应用程序正在访问服务器？

我想向应用程序交付一些东西，但我想确保我将交付给正确的应用程序，而不是任何人破解和重新编译它。

我认为最好的方法是向服务器公开用于签署应用程序的证书。但是怎么做呢？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-19T00:58:26.423

所有安全都需要在服务器端完成。
在客户端所做的任何事情都可能而且很可能会被黑客入侵。
您可以做的一种方法是让服务器跟踪会话。
另一种方法是对来自服务器的数据来回加密。

依赖应用程序的来源是不可靠的，因为所有这些信息都可能被欺骗。
让应用程序登录到服务器。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-19T18:35:42.177

Agree with The_asMan's comment. But if you want, you could load the file:

app:/meta-inf/signatures.xml

That will get you the hash of the swf. Unfortunately, this is useless, cause anyone could just inject that into the urlrequest.

# c++ - 在 C++ 中探索多个独占组合时遇到问题

> ID：11090300
> 
> 赞同：0
> 
> 时间：2012-06-18T20:10:21.107
> 
> 标签：c++, combinations, data-partitioning

我有一个有序的字符串，需要呈现给用户：

```
ABCCDDCBBBCBBDDBCAAA 
```

用“B”表示的对象被标记，这样 2 个 B 后面会有一个“~”。

```
AB~CCDDCB~BBCBBDDBCAAA
AB~CCDDCBB~BCBBDDBCAAA
AB~CCDDCBBB~CBBDDBCAAA
and so on... 
```

我使用了Howard Hinnant 的[组合库](http://home.roadrunner.com/~hinnant/combinations.html)，它适用于这个简单的案例。我的测试代码使用位置向量作为通过 for_each_combination 发送的整数。

但是，当我有多个 B 标记时，我不知道该怎么做。

例如，总共 4Bs 需要标记，2 由 '~' 和 2 由 '#'

```
AB~CCDDCB~B#B#CBBDDBCAAA
AB#CCDDCB~B~B#CBBDDBCAAA
AB~CCDDCB#B~B#CBBDDBCAAA
AB#CCDDCB#B~B~CBBDDBCAAA
ABCCDDCB~B~B#CB#BDDBCAAA
and so on... 
```

我写的伪代码是级联的。在第一个 for_each_combination 之后，对于每个结果组合，将每隔一个位置复制到另一个向量并执行另一个 for_each_combination。

考虑到我将使用的组合数量，我希望有更好的方法。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-18T20:39:07.097

这听起来像是家庭作业，所以首先我不会只给你代码，其次我添加了 [homework] 标签。

现在，有四个标记要放置，一个合理的解决方案是一组嵌套的 for 循环，其中四个

标记仅限于 7 个位置，因此只需从 0 计数到 6，包括 0 到 6

然后将其转换为字符串中的位置

然后输出带有标记的字符串

我已经验证这很简单

如果您需要进一步的帮助，只需提出一个新问题（并展示您到目前为止所获得的信息）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-18T21:04:17.633

我相信经过一番观察，我已经回答了自己的问题。

首先，我从使用 Howard 的库切换到 Hervé 的[组合库](http://photon.poly.edu/~hbr/boost/combinations.html)。主要的吸引力是使用 next_combination 允许我将组合计算链接在一起，如下所示：

```
do {
    do {
    cout << values << endl;
    } while (next_combination(values.begin() + 3, values.begin() + 5, values.end()));
} while (next_combination(values.begin(), values.begin() + 3, values.end())); 
```

我需要将它按摩到一个迭代器中，但这正是我所需要的。

# android - MultiSelectListPreference 示例

> ID：11090304
> 
> 赞同：23
> 
> 时间：2012-06-18T20:10:32.400
> 
> 标签：android, multi-select, preferenceactivity

我很难找到 Android API 中提供的 MultiSelectListPreference 的一个很好的例子。我已经看到很多对[这个博客](http://blog.350nice.com/wp/archives/240)的引用，虽然这是我想要的最终结果，但我不想为我想要实现的每个多选首选项创建一个类。最终，我想查看一个简单的多选对话框（我将动态填充值）的首选项 xml，以及对`addPreferencesFromResource(R.xml.preferences);`

目前，我有：

```
<MultiSelectListPreference
    android:defaultValue=""
    android:enabled="true"
    android:entries="@array/pref_default_entries"
    android:entryValues="@array/pref_default_values"
    android:key="TargetList"
    android:persistent="true"
    android:summary="@string/TargetSummary"
    android:title="@string/TargetTitle" /> 
```

当我尝试在我的活动 onCreate 调用中调用 addPreferencesFromResource 时，我收到以下错误：

```
06-18 13:59:30.690: E/AndroidRuntime(6052): FATAL EXCEPTION: main
06-18 13:59:30.690: E/AndroidRuntime(6052): java.lang.RuntimeException: Unable to start activity ComponentInfo{com.tracker/com.tracker.TrackerActivity}: android.view.InflateException: Binary XML file line #37: Error inflating class java.lang.reflect.Constructor
06-18 13:59:30.690: E/AndroidRuntime(6052):     at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1818)
06-18 13:59:30.690: E/AndroidRuntime(6052):     at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1834)
06-18 13:59:30.690: E/AndroidRuntime(6052):     at android.app.ActivityThread.access$500(ActivityThread.java:122)
06-18 13:59:30.690: E/AndroidRuntime(6052):     at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1027)
06-18 13:59:30.690: E/AndroidRuntime(6052):     at android.os.Handler.dispatchMessage(Handler.java:99)
06-18 13:59:30.690: E/AndroidRuntime(6052):     at android.os.Looper.loop(Looper.java:132)
06-18 13:59:30.690: E/AndroidRuntime(6052):     at android.app.ActivityThread.main(ActivityThread.java:4126)
06-18 13:59:30.690: E/AndroidRuntime(6052):     at java.lang.reflect.Method.invokeNative(Native Method)
06-18 13:59:30.690: E/AndroidRuntime(6052):     at java.lang.reflect.Method.invoke(Method.java:491)
06-18 13:59:30.690: E/AndroidRuntime(6052):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:844)
06-18 13:59:30.690: E/AndroidRuntime(6052):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:602)
06-18 13:59:30.690: E/AndroidRuntime(6052):     at dalvik.system.NativeStart.main(Native Method)
06-18 13:59:30.690: E/AndroidRuntime(6052): Caused by: android.view.InflateException: Binary XML file line #37: Error inflating class java.lang.reflect.Constructor
06-18 13:59:30.690: E/AndroidRuntime(6052):     at android.preference.GenericInflater.createItem(GenericInflater.java:397)
06-18 13:59:30.690: E/AndroidRuntime(6052):     at android.preference.GenericInflater.onCreateItem(GenericInflater.java:417)
06-18 13:59:30.690: E/AndroidRuntime(6052):     at android.preference.GenericInflater.createItemFromTag(GenericInflater.java:428)
06-18 13:59:30.690: E/AndroidRuntime(6052):     at android.preference.GenericInflater.rInflate(GenericInflater.java:481)
06-18 13:59:30.690: E/AndroidRuntime(6052):     at android.preference.GenericInflater.inflate(GenericInflater.java:326)
06-18 13:59:30.690: E/AndroidRuntime(6052):     at android.preference.GenericInflater.inflate(GenericInflater.java:263)
06-18 13:59:30.690: E/AndroidRuntime(6052):     at android.preference.PreferenceManager.inflateFromResource(PreferenceManager.java:269)
06-18 13:59:30.690: E/AndroidRuntime(6052):     at android.preference.PreferenceActivity.addPreferencesFromResource(PreferenceActivity.java:1366)
06-18 13:59:30.690: E/AndroidRuntime(6052):     at com.tracker.TrackerActivity.onCreate(TrackerActivity.java:30)
06-18 13:59:30.690: E/AndroidRuntime(6052):     at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1050)
06-18 13:59:30.690: E/AndroidRuntime(6052):     at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1782)
06-18 13:59:30.690: E/AndroidRuntime(6052):     ... 11 more
06-18 13:59:30.690: E/AndroidRuntime(6052): Caused by: java.lang.reflect.InvocationTargetException
06-18 13:59:30.690: E/AndroidRuntime(6052):     at java.lang.reflect.Constructor.constructNative(Native Method)
06-18 13:59:30.690: E/AndroidRuntime(6052):     at java.lang.reflect.Constructor.newInstance(Constructor.java:416)
06-18 13:59:30.690: E/AndroidRuntime(6052):     at android.preference.GenericInflater.createItem(GenericInflater.java:383)
06-18 13:59:30.690: E/AndroidRuntime(6052):     ... 21 more
06-18 13:59:30.690: E/AndroidRuntime(6052): Caused by: java.lang.NullPointerException
06-18 13:59:30.690: E/AndroidRuntime(6052):     at android.content.res.AssetManager.getResourceTextArray(AssetManager.java:215)
06-18 13:59:30.690: E/AndroidRuntime(6052):     at android.content.res.Resources.getTextArray(Resources.java:435)
06-18 13:59:30.690: E/AndroidRuntime(6052):     at android.content.res.TypedArray.getTextArray(TypedArray.java:628)
06-18 13:59:30.690: E/AndroidRuntime(6052):     at android.preference.MultiSelectListPreference.onGetDefaultValue(MultiSelectListPreference.java:210)
06-18 13:59:30.690: E/AndroidRuntime(6052):     at android.preference.Preference.<init>(Preference.java:257)
06-18 13:59:30.690: E/AndroidRuntime(6052):     at android.preference.DialogPreference.<init>(DialogPreference.java:69)
06-18 13:59:30.690: E/AndroidRuntime(6052):     at android.preference.DialogPreference.<init>(DialogPreference.java:90)
06-18 13:59:30.690: E/AndroidRuntime(6052):     at android.preference.MultiSelectListPreference.<init>(MultiSelectListPreference.java:49)
06-18 13:59:30.690: E/AndroidRuntime(6052):     ... 24 more 
```

我期待你的回复！

* * *

## 回答 #1

> 赞同：48
> 
> 时间：2012-08-02T12:39:20.083

您需要指定 defaultValues 属性

```
<MultiSelectListPreference
        android:dialogTitle="@string/mode_repeat"
        android:key="mode_repeat"
        android:summary=""        
        android:title="@string/mode_repeat"
        android:entries="@array/weekdays"
        android:entryValues="@array/weekdays_values"
        android:defaultValue="@array/empty_array"
        /> 
```

如果您不想要默认值，请在您的 strings.xml 中创建一个空数组

```
<string-array name="empty_array"/> 
```

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2014-02-19T12:47:54.103

Sigrist 是正确的，可以解决您看到的初始错误。它需要提供默认值，即使它是空的。这对我有帮助，因为我想在**RUNTIME**提供值，但不会弄乱完整的实现。

请参阅此代码，了解我如何在运行时提供值，而不必处理完整的实现。

```
public class CalendarListPreference extends MultiSelectListPreference {

ContentResolver cr;
Cursor cursor;
String[] projection = new String[] {CalendarContract.Calendars.NAME, CalendarContract.Calendars.CALENDAR_DISPLAY_NAME};
String selection = "(" + CalendarContract.Calendars.VISIBLE + " = ?)";
String[] selectionArgs = new String[] { "1" };

public CalendarListPreference(Context context, AttributeSet attrs) {
    super(context, attrs);

    List<CharSequence> entries = new ArrayList<CharSequence>();
    List<CharSequence> entriesValues = new ArrayList<CharSequence>();

    cr = context.getContentResolver();
    cursor = cr.query(CalendarContract.Calendars.CONTENT_URI, projection, selection, selectionArgs, null);

    while (cursor.moveToNext()) {
        String name = cursor.getString(0);
        String displayName = cursor.getString(1);

        entries.add(name);
        entriesValues.add(displayName);
    }

    setEntries(entries.toArray(new CharSequence[]{}));
    setEntryValues(entriesValues.toArray(new CharSequence[]{}));
}
} 
```

在我的 strings.xml

```
<string-array name="pref_calendar_list_default">
</string-array> 
```

在我的preferences.xml

```
<com.mynameistodd.autovolume.CalendarListPreference
android:defaultValue="@array/pref_calendar_list_default"
android:key="@string/pref_calendar_list_key"
android:summary="@string/pref_calendar_list_summary"
android:title="@string/pref_calendar_list_title"
android:dependency="@string/pref_calendar_enabled_key"/> 
```

我知道这是一个老问题，但它帮助了我，所以这是我的答案！

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-02-11T14:09:46.753

我已经为在 API 11 之前运行 Android 的设备创建了 MultiSelectListPreference。

*   支持 ChangeListener 接收选定值的列表。
*   支持自动设置摘要。
*   附上例子。

[https://gist.github.com/cardil/4754571](https://gist.github.com/cardil/4754571)

```
package pl.wavesoftware.widget;

import java.util.ArrayList;
import java.util.Arrays;
import java.util.Iterator;
import java.util.List;

import android.app.AlertDialog.Builder;
import android.content.Context;
import android.content.DialogInterface;
import android.content.DialogInterface.OnMultiChoiceClickListener;
import android.content.res.TypedArray;
import android.preference.ListPreference;
import android.util.AttributeSet;

public class MultiSelectListPreference extends ListPreference {

    private String separator;
    private static final String DEFAULT_SEPARATOR = "\u0001\u0007\u001D\u0007\u0001";
    private boolean[] entryChecked;

    public MultiSelectListPreference(Context context, AttributeSet attributeSet) {
        super(context, attributeSet);
        entryChecked = new boolean[getEntries().length];
        separator = DEFAULT_SEPARATOR;
    }

    public MultiSelectListPreference(Context context) {
        this(context, null);
    }

    @Override
    protected void onPrepareDialogBuilder(Builder builder) {
        CharSequence[] entries = getEntries();
        CharSequence[] entryValues = getEntryValues();
        if (entries == null || entryValues == null
                || entries.length != entryValues.length) {
            throw new IllegalStateException(
                    "MultiSelectListPreference requires an entries array and an entryValues "
                            + "array which are both the same length");
        }

        restoreCheckedEntries();
        OnMultiChoiceClickListener listener = new DialogInterface.OnMultiChoiceClickListener() {
            public void onClick(DialogInterface dialog, int which, boolean val) {
                entryChecked[which] = val;
            }
        };
        builder.setMultiChoiceItems(entries, entryChecked, listener);
    }

    private CharSequence[] unpack(CharSequence val) {
        if (val == null || "".equals(val)) {
            return new CharSequence[0];
        } else {
            return ((String) val).split(separator);
        }
    }

    /**
     * Gets the entries values that are selected
     * 
     * @return the selected entries values
     */
    public CharSequence[] getCheckedValues() {
        return unpack(getValue());
    }

    private void restoreCheckedEntries() {
        CharSequence[] entryValues = getEntryValues();

        // Explode the string read in sharedpreferences
        CharSequence[] vals = unpack(getValue());

        if (vals != null) {
            List<CharSequence> valuesList = Arrays.asList(vals);
            for (int i = 0; i < entryValues.length; i++) {
                CharSequence entry = entryValues[i];
                entryChecked[i] = valuesList.contains(entry);
            }
        }
    }

    @Override
    protected void onDialogClosed(boolean positiveResult) {
        List<CharSequence> values = new ArrayList<CharSequence>();

        CharSequence[] entryValues = getEntryValues();
        if (positiveResult && entryValues != null) {
            for (int i = 0; i < entryValues.length; i++) {
                if (entryChecked[i] == true) {
                    String val = (String) entryValues[i];
                    values.add(val);
                }
            }

            String value = join(values, separator);
            setSummary(prepareSummary(values));
            setValueAndEvent(value);
        }
    }

    private void setValueAndEvent(String value) {
        if (callChangeListener(unpack(value))) {
            setValue(value);
        }
    }

    private CharSequence prepareSummary(List<CharSequence> joined) {
        List<String> titles = new ArrayList<String>();
        CharSequence[] entryTitle = getEntries();
        CharSequence[] entryValues = getEntryValues();
        int ix = 0;
        for (CharSequence value : entryValues) {
            if (joined.contains(value)) {
                titles.add((String) entryTitle[ix]);
            }
            ix += 1;
        }
        return join(titles, ", ");
    }

    @Override
    protected Object onGetDefaultValue(TypedArray typedArray, int index) {
        return typedArray.getTextArray(index);
    }

    @Override
    protected void onSetInitialValue(boolean restoreValue,
            Object rawDefaultValue) {
        String value = null;
        CharSequence[] defaultValue;
        if (rawDefaultValue == null) {
            defaultValue = new CharSequence[0];
        } else {
            defaultValue = (CharSequence[]) rawDefaultValue;
        }
        List<CharSequence> joined = Arrays.asList(defaultValue);
        String joinedDefaultValue = join(joined, separator);
        if (restoreValue) {
            value = getPersistedString(joinedDefaultValue);
        } else {
            value = joinedDefaultValue;
        }

        setSummary(prepareSummary(Arrays.asList(unpack(value))));
        setValueAndEvent(value);
    }

    /**
     * Joins array of object to single string by separator
     * 
     * Credits to kurellajunior on this post
     * http://snippets.dzone.com/posts/show/91
     * 
     * @param iterable
     *            any kind of iterable ex.: <code>["a", "b", "c"]</code>
     * @param separator
     *            separetes entries ex.: <code>","</code>
     * @return joined string ex.: <code>"a,b,c"</code>
     */
    protected static String join(Iterable<?> iterable, String separator) {
        Iterator<?> oIter;
        if (iterable == null || (!(oIter = iterable.iterator()).hasNext()))
            return "";
        StringBuilder oBuilder = new StringBuilder(String.valueOf(oIter.next()));
        while (oIter.hasNext())
            oBuilder.append(separator).append(oIter.next());
        return oBuilder.toString();
    }

} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2020-05-01T09:45:59.583

您可以在运行时执行此操作，只需像这样设置值/条目

```
findPreference<MultiSelectListPreference>(getString(R.string.preference_key_some_apps))?.apply {
            val entryDisplay =
                listOf("Facebook Messenger", "Whatsapp", "Telegram", "SMS").toTypedArray()
            val entryValuesApps = listOf(
                Constants.FACEBOOK_MESSENGER_PACKAGE_NAME,
                Constants.WHATSAPP_PACKAGE_NAME,
                Constants.TELEGRAM_PACKAGE_NAME,
                Constants.SMS_MESSENGER_PACKAGE_NAME_HOLDER
            ).toTypedArray()

            entries = entryDisplay
            this.entryValues = entryValuesApps
        } 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2018-08-08T18:13:10.697

我遇到了同样的错误，因为我用**values-large**中的条目定义了我的**array.xml ，但默认****值**包中没有该文件。所以我只是将**array.xml**移到**values**中。

# javascript - HTML转义中的JSON

> ID：11090308
> 
> 赞同：0
> 
> 时间：2012-06-18T20:10:57.240
> 
> 标签：javascript, html, json, encoding

我在 HTML 标记中包含 JSON，考虑到 JSON 唯一可能的输入字符`"':{},[a-z][0-9]`是 JSON 或 HTML 是否可能被我的方法破坏？跨 HTML 和 Javascript 使用 JSON 时应该注意什么？

```
<input type="hidden" value="<?=htmlspecialchars(json_encode($myArray));?>" /> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-18T20:29:55.113

[JSON](http://www.json.org/)的字符串中几乎可以包含任何字符。当您在属性中使用它时，应该足够了，这取决于您的 (X)HTML 版本。无论如何都可以。~~`escape_quotes`~~`addslashes``htmlspecialchars`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-18T20:21:36.800

在[json 的定义中](http://www.json.org/)，其中一个可能的值是一个字符串。其中可以包含`<`，`>`除其他外

您可以使用 base64 编码来避免这种情况。

# php - 如果字符串以 XX 开头，则

> ID：11090310
> 
> 赞同：0
> 
> 时间：2012-06-18T20:11:03.377
> 
> 标签：php, wordpress

我正在使用以下代码在我的 Wordpress 网站上显示邮政编码：

```
echo get_zip(get_the_ID()) 
```

有没有办法可以根据前两个或三个字母更改输出的内容，例如，邮政编码“SW1-234”变为“South West”，“N1-456”变为“North”等。周围有我想更改 200 种不同的邮政编码可能性。

到目前为止，我想出了这个：

```
<?php $postcode = get_zip(get_the_ID());
      if(substr($postcode['id'],0,3) == 'N1'){
      echo "North London";
      } 
?> 
```

但由于某种原因，它又回到了空白。此外，这可能不是最好的选择，因为有很多查询的可能性。

有什么建议么？谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-18T20:13:22.470

`substr(..., 0, 3)`提取前*三个*字符，它们永远不会等于`"N1"`. 将 更改`3`为`2`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-18T20:27:33.550

最好创建一个由第一个数字引用的数组，直到破折号。

```
<?php 
$postcode = get_zip(get_the_ID());
$postcodeTable = array(
    'N1' => "North London",
    'SW1' => "South West"
);

$start = explode('-', $postcode['id']);
echo $postcodeTable[$start[0]];
?> 
```

# ios - 让用户为推送通知付费？

> ID：11090311
> 
> 赞同：1
> 
> 时间：2012-06-18T20:11:08.207
> 
> 标签：ios, apple-push-notifications

我有一项服务，用户可以注册他们通过短信或电子邮件获得的新闻。用户每月订阅（基本价格）+ 每件商品的价格。

现在我想把这项服务带到 iOS 上。用户可以注册相同的信息，如果有新闻发布，他会收到推送通知。我希望用户在通过电子邮件或短信接收新闻时已经为内容付费。我可以让用户通过网络（贝宝）支付以收取他们的帐户余额，还是让我使用应用内购买，因为他们通过推送通知接收信息？什么是最好的方式，更重要的是：哪种方式是正确的（由苹果提供）方式？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-20T13:32:46.503

您必须使用应用内购买，或者您可以在进程外托管贝宝付款，但是您将不允许从应用内链接到它，这非常没用。

基本上，为了避免很多麻烦（并使收款更容易），使用苹果的应用内购买来创建“推送通知”订阅。然后，您可以使用应用内购买收据和设备信息联系您的服务器，并开始从您的服务器向该设备发送通知。

# c# - 我的 C# 应用程序的最佳数据库选择

> ID：11090313
> 
> 赞同：4
> 
> 时间：2012-06-18T20:11:19.153
> 
> 标签：c#, database

我正在编写一个涉及与数据库交互的应用程序。该应用程序将由 100 到 1000 规模的用户使用，并且数据库应该能够存储多达 100,000 行数据。

以前我使用过 Microsoft Access，但我的用户需要安装 microsoft access 数据库引擎才能使我的应用程序按预期运行。我希望我的应用程序尽可能轻巧/便携，那么有没有更好的替代方案，用户不需要安装任何第三方组件来运行我的应用程序？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-18T20:14:14.077

取决于数据库是服务器端还是客户端。

如果它是服务器端，那真的取决于你，我个人会使用我最了解的 SQL Server，甚至是 mySql/phpMyAdmin 组合。但是，如果它要驻留在客户端计算机上，请尝试 SQLite（尽管顾名思义，LITE 只是一个警告，因此可能不支持许多更复杂的 SQL）。SQLite 可能正是您正在寻找的，具体取决于您的项目所涉及的复杂性。

另外：iPhone、Blackberry 和 Android 也支持 SQLite。所以如果你想去移动，没问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-18T20:16:14.580

您的应用程序可以连接到云数据库（如 SQL Azure）。这不需要任何第三方组件，并且可以从任何地方/任何设备访问。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-18T21:10:58.413

看看 mongoDB，它是一个开源的非关系型数据库，已经开始流行起来。它也非常快。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-19T00:57:46.600

您是否需要为所有用户提供一个数据库，或者每个用户都有自己的数据库？如果它将在服务器端，我更喜欢 SQL Server（例如 MSSQL、MySQL）。但是对于客户端，SQLLite 可以完成这项工作。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-08T12:11:21.967

您应该考虑 SaaS 模型是否相关，换句话说，您是否可以受益于将所有用户的数据库托管在云上并让客户远程访问它。在您的场景中，如果出现以下情况，我会考虑使用 SaaS 模型：（1）您的用户需要将他们的个人数据库扩展到超出其本地机器的容量，（2）需要在不同用户的数据库之间共享数据 - 或者可能这可能会启用您今天的系统中没有的良好功能，或者 (3) 用户发现必须在其本地计算机上运行数据库很麻烦，因为它已用完资源、所需的正常运行时间、备份等。如果其中任何一个有时是正确的，那么通过某种多租户安排将所有数据库托管在云上可能是一个很好的解决方案，并且会使您的应用程序尽可能轻量级，因为您不需要

# java - 压缩时应用程序不起作用

> ID：11090314
> 
> 赞同：0
> 
> 时间：2012-06-18T20:11:24.837
> 
> 标签：java, exception, zip, extract

基本上，我刚刚获得了一些作业的结果，但我的结果低于预期。有人告诉我，当应用程序运行时，必须移动图像并引发一些异常：

```
Exception in thread "main" java.lang.NullPointerException
at uk.ac.aber.dcs.cs12420.aberpizza.gui.FrontGUI.getName(FrontGUI.java:494)
at sun.lwawt.macosx.CPlatformWindow.getInitialStyleBits(CPlatformWindow.java:271)
at sun.lwawt.macosx.CPlatformWindow.initialize(CPlatformWindow.java:228) 
```

好吧，我在发送所有内容之前检查了很多次可运行的 jar 文件是否有效。我现在再次检查，它仍然存在。唯一不起作用的情况是我不提取内容并尝试使用压缩文件夹中的可运行 jar 文件。

我假设这是问题所在，因为图像没有出现，而且事情根本无法正常工作。但是，从压缩文件夹运行 jar 时，我应该如何正确使用图像？

顺便说一句，这不是一个愤怒的问题。我想知道我的应用程序在使用外部图像时是否应该或不应该在不提取的情况下运行？

只是一点点编辑：添加到我的问题：如果可运行的 jar 文件直接从 zip 文件运行，我怎样才能使图像工作。即如何使图像文件/文件夹与可运行的 jar 文件一起到临时位置？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-18T20:14:18.657

实际上，从压缩文件夹运行文件，会将您的文件提取到临时文件夹并从那里执行。如果您的应用程序所依赖的存档中有一些其他文件，它们可能不会被提取，因此会出现错误。

# javascript - Backbone.js 视图变量被覆盖

> ID：11090315
> 
> 赞同：2
> 
> 时间：2012-06-18T20:11:29.267
> 
> 标签：javascript, jquery, backbone.js

我通过 $.each 创建视图，所有视图的 myId 属性总是最终被最后一个元素的 myId 覆盖。

创建视图

```
 $('.form').each(function() {
        // split class name
        var classNameArray = $(this).attr('class').split('-');
        // get typeId from last part of classname
        var myId = classNameArray[classNameArray.length-1];
        new myView({ 'el': $('.form-' + myId), 'myId': myId });      
    }); 
```

初始化我的视图

```
var myView = Backbone.View.extend({
events: {

},
initialize: function() {
    var myId = this.options.myId;

},
test: function() {
    console.log(myId); // will return myId of last view created
}

}); 
```

如何获得视图以保持其唯一的 myId？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-18T20:18:01.390

当你这样写——

```
initialize: function() {
    var myId = this.options.myId;
}, 
```

*它为初始化*函数创建了一个本地变量（这是 Javascript 的东西，而不是 Backbone 的东西）。

试试这个（创建一个*View*对象的本地变量）：

```
initialize: function() {
    this.myId = this.options.myId;
}, 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-18T21:06:45.857

# javascript - JSF 和 RichFaces 实时验证输入框

> ID：11090317
> 
> 赞同：0
> 
> 时间：2012-06-18T20:11:35.467
> 
> 标签：javascript, jsf-2, richfaces

我是这项技术的新手，想知道 JSF 或 Richfaces 中是否有任何功能可以实时处理 2 个输入框的验证。

例如我有 Inputbox1 和 Inputbox2，如果我在 Inputbox1 上输入金额，它会自动擦除或清空 Inputbox2，反之亦然。同时它会自动计算页脚总数。

我该如何处理这种验证？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-22T07:26:57.577

您可以对该 [http://showcase.richfaces.org/richfaces/component-sample.jsf?demo=clientValidation&skin=emeraldTown使用客户端验证](http://showcase.richfaces.org/richfaces/component-sample.jsf?demo=clientValidation&skin=emeraldTown)

# iphone - iOS：可执行文件的签名无效

> ID：11090320
> 
> 赞同：2
> 
> 时间：2012-06-18T20:11:56.377
> 
> 标签：iphone, ios, xcode4, ipa, entitlements

因此，我继承了另一个用户 iOS 应用程序的开发工作，并尽我所能为其制作一个有效的 IPA 文件。在 7 个小时的大部分时间里，我一直在努力解决配置文件、权利错误等问题，试图让我的 .ipa 文件正确安装，但还没有这样做。最近，我只需按下运行并允许它以这种方式部署，就可以在我的物理设备上获取应用程序（这意味着配置文件和设备都已设置为适用于应用程序，对吗？）。但是，每当我构建存档文件并将其作为 .ipa 文件分发并尝试通过 iTunes 或 Iphone 配置实用程序安装此 .ipa 时，我都会继续收到“可执行文件已使用无效权利签名”错误。我的计划有问题还是……？我想如果我不能尽快让它工作，我将重新安装 xcode，并清除我所有的证书、设备、规定，然后从第一个开始重新启动。

这是一个较旧的项目，所以它仍然有一个 Entitlements.plist 文件，我读过它现在在 xcode 4.x 中不再使用。我已经确定它的文件路径没有被引用，但我应该删除它吗？

如果这个问题以前出现过，我深表歉意，但这似乎是一条由于各种原因而被吐出的错误消息。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-12-16T13:49:11.717

就我而言，使用正确的配置文件（包括设备 UDID），但构建配置设置为“发布”。

因此，在设置为“构建”后，它就可以工作了。

# php - 访问存在的数组元素时未定义的偏移量

> ID：11090328
> 
> 赞同：29
> 
> 时间：2012-06-18T20:12:30.333
> 
> 标签：php, arrays, indexing, element, undefined

我有一个数组和 PHP，当我打印出来时，我可以看到我需要访问的值，但是当我尝试通过他们的键访问它们时，我得到了一个 PHP 通知。[我用print_r](http://php.net/print_r)打印了数组：

```
Array
(
    [207] => sdf
    [210] => sdf
) 
```

当我尝试使用索引访问数组时，我收到未定义的偏移量通知。这是我的代码：

```
print_r($output); 
echo $output[207];   // Undefined Offset
echo $output["207"]; // Undefined Offset 
```

该`$output`数组是调用[array_diff_key](http://php.net/array_diff_key)的结果，最初是通过 HTTP POST 请求作为 JSON 输入的。

[array_keys](http://php.net/array_keys)给了我以下信息：

```
Array
(
   [0] => 207
   [1] => 210
) 
```

* * *

回应评论：

`var_dump(key($output));`输出：

> ```
>  string(3) "207" 
> ```

`var_dump(isset($output[key($output)]));`输出：

> ```
>  bool(false) 
> ```

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2012-06-18T21:52:31.403

[请参阅PHP 手册](http://php.net/language.types.array.php#language.types.array.casting)中有关将对象转换为数组的本节：

> 键是成员变量名称，有一些值得注意的例外：***整数属性是不可访问的***；私有变量在变量名前面加上类名；受保护的变量在变量名前有一个“*”。

在 PHP 中从对象转换为数组时，整数数组键在内部存储为字符串。当您在 PHP 中访问数组元素或正常使用数组时，包含有效整数的键将自动转换为整数。内部存储为字符串的整数是不可访问的键。

注意区别：

```
$x = (array)json_decode('{"207":"test"}');
var_dump(key($x));  // string(3) "207"

var_dump($x);
// array(1) {
//   ["207"]=>
//   string(4) "test"
// }

$y['207'] = 'test';
var_dump(key($y));  // int(207)

var_dump($y);
// array(1) {
//   [207]=>
//   string(4) "test"
// } 
```

[这两个数组上的print_r](http://php.net/print_r)给出了相同的输出，但是使用[var_dump](http://php.net/var_dump)您可以看到差异。

这是一些重现您的确切问题的代码：

```
$output = (array)json_decode('{"207":"sdf","210":"sdf"}');

print_r($output);
echo $output[207];
echo $output["207"]; 
```

简单的解决方法是将可选参数传递`true`给[json_decode](http://php.net/json_decode)`assoc`，以指定您想要一个数组而不是对象：

```
$output = json_decode('{"207":"sdf","210":"sdf"}', true);

print_r($output);
echo $output[207];
echo $output["207"]; 
```

* * *

## 回答 #2

> 赞同：22
> 
> 时间：2012-07-05T23:21:09.887

当[转换](http://it.php.net/language.types.array.php#language.types.array.casting)为`array`具有有效整数的字符串键的对象时会出现问题。

如果你有这个对象：

```
object(stdClass)#1 (2) {
  ["207"]=>
  string(3) "sdf"
  ["210"]=>
  string(3) "sdf"
} 
```

然后你用

```
$array = (array)$object 
```

你得到这个数组

```
array(2) {
  ["207"]=>
  string(3) "sdf"
  ["210"]=>
  string(3) "sdf"
} 
```

它具有只能通过循环访问它们的键，因为直接访问 like`$array["207"]`将始终[转换](http://it.php.net/manual/en/language.types.array.php#language.types.array.syntax.array-func)为`$array[207]`，它不存在。

因为你得到一个像上面这样的对象，从`json_decode()`应用到一个字符串，比如

```
$json = '{"207":"sdf", "210":"sdf"}' 
```

最好的解决方案是首先避免使用数字键。这些可能更好地建模为对象数组的数字属性：

```
$json = '[{"numAttr":207, "strAttr":"sdf"}, {"numAttr":210, "strAttr":"sdf"}]' 
```

与目前的数据结构相比，这种数据结构有几个优点：

1.  它更好地反映了原始数据，作为具有数字属性的对象的集合
2.  它很容易与其他属性一起扩展
3.  它在不同的系统之间更具可移植性（如您所见，您当前的数据结构导致 PHP 出现问题，但如果您碰巧使用另一种语言，您可能很容易遇到类似问题）。

如果需要一个property → object map，可以很快得到，例如，像这样：

```
function getNumAttr($obj) { return $obj->numAttr; } // for backward compatibility
$arr = json_decode($json); // where $json = '[{"numAttr":...
$map = array_combine(array_map('getNumAttr', $arr), $arr); 
```

另一种解决方案是按照 ascii-lime 的建议进行操作：[`json_decode()`](http://php.net/manual/en/function.json-decode.php)通过将其第二个参数设置为：强制输出关联数组而不是对象`true`：

```
$map = json_decode($json, true); 
```

对于您的输入数据，这会直接产生

```
array(2) {
  [207]=>
  string(3) "sdf"
  [210]=>
  string(3) "sdf"
} 
```

请注意，数组的键现在是整数而不是字符串。

不过，我会考虑将 JSON 数据结构更改为更简洁的解决方案，尽管我知道这样做可能是不可能的。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-18T20:15:28.377

我刚刚发现[了这个错误，当通过调用](https://bugs.php.net/bug.php?id=43614)[unserialize](http://php.net/unserialize)创建数组时，有时在 PHP 中无法访问数组元素。

创建一个包含（或从命令行运行）以下脚本的测试 PHP 文件：

```
<?php 

$a = unserialize('a:2:{s:2:"10";i:1;s:2:"01";i:2;}'); 

print $a['10']."\n";

$a['10'] = 3; 
$a['01'] = 4; 

print_r($a);

foreach ($a as $k => $v) 
{ 
  print 'KEY: '; 
  var_dump($k); 
  print 'VAL: '; 
  var_dump($v); 
  print "\n"; 
} 
```

如果您遇到错误，您有一个包含此错误的 PHP 版本，我建议升级到 PHP 5.3

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-18T20:52:22.397

尝试

```
var_dump($output);
foreach ($output as $key => val) {
    var_dump($key);
    var_dump($val);
} 
```

了解更多关于正在发生的事情。

什么确切的行/语句向您发出警告？

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-18T20:16:20.907

你是如何打印数组的？我会建议`print_r($arrayName);`

接下来，您可以打印单个元素，例如：`echo $arrayName[0];`

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-07-06T12:20:07.337

尝试使用我的方法：

```
class ObjectToArray {
    public static function convert( $object ) {
        if( !is_object( $object ) && !is_array( $object ) ) {
            return $object;
        }

        if( is_object( $object ) ) {
           $object = get_object_vars( $object );
        }

        return array_map( 'ObjectToArray::convert', $object );
    }
}

$aNewArray = ObjectToArray::convert($oYourObject); 
```

* * *

## 回答 #7

> 赞同：-2
> 
> 时间：2017-01-26T05:21:51.500

Just put error_reporting(0); in you method or at start of file. It will solved your issue.

# php - 如何在 PHP 脚本中使用 document.documentElement.clientwidth 的结果

> ID：11090329
> 
> 赞同：0
> 
> 时间：2012-06-18T20:12:37.277
> 
> 标签：php, javascript, web-applications

我正在尝试使用 HTML5 和 CSS3 来扩展我现有的网站以提高响应速度。但是我在这里遇到的问题是我想使用 PHP来控制使用PHP 条件语句中`include`的 JavaScript 属性在网站上显示的内容。`document.documentElement.clientwidth`例子：

```
<?php 
  if (document.documentElement.clientwidth < 640) {
    include "mobile_sidebar.php";
  }
  else include "mainsite_sidebar.php"; 
```

因此，响应式设计不仅仅是文档重排，而是实际减少了例如手机场景中的内容。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-18T20:16:52.403

您可以在页面加载时通过 AJAX 将一些 javascript 数据传递给 PHP 脚本，然后将一些数据发送回以相应地呈现页面。也许在 PHP 处理和返回数据时显示一个启动页面？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-18T20:15:25.527

你根本不能像那样结合 JS 和 PHP - PHP 甚至在 JS 渲染之前就运行了！您需要在页面加载后将客户端数据传回服务器，然后采取相应措施。

# asp.net-mvc-3 - 尝试在迁移的项目中使用带有调用信息的 IntelliTrace 时，Visual Studio 2012 RC 抛出异常

> ID：11090331
> 
> 赞同：2
> 
> 时间：2012-06-18T20:12:42.690
> 
> 标签：asp.net-mvc-3, visual-studio-2012, intellitrace

上周在 TechEd 了解 IntelliTrace 后，我今天早上安装了 Visual Studio 2012 Ultimate RC。我们目前使用 VS 2010 Professional，因此使用 2012 RC 是我测试 IntelliTrace 的唯一简单选择。

我打开了 VS 2012 Ultimate RC 并打开了一个用 VS 2010 编写的 MVC 3 项目。如果我将它设置为“仅 IntelliTrace 事件”，IntelliTrace 运行良好。但是，如果我将其设置为“IntelliTrace 事件和调用信息”，则在启动调试器时会出现异常：

```
System.Reflection.TargetInvocationException was unhandled
HResult=-2146232828
Message=Exception has been thrown by the target of an invocation.
Source=mscorlib
StackTrace:
   at System.RuntimeMethodHandle.InvokeMethod(Object target, Object[] arguments, Signature sig, Boolean constructor)
   at System.Reflection.RuntimeMethodInfo.UnsafeInvokeInternal(Object obj, Object[] parameters, Object[] arguments)
   at System.Reflection.RuntimeMethodInfo.Invoke(Object obj, BindingFlags invokeAttr, Binder binder, Object[] parameters, CultureInfo culture)
   at System.Reflection.MethodBase.Invoke(Object obj, Object[] parameters)
   at System.Web.HttpApplication.InvokeMethodWithAssert(MethodInfo method, Int32 paramCount, Object eventSource, EventArgs eventArgs)
   at System.Web.HttpApplication.ProcessSpecialRequest(HttpContext context, MethodInfo method, Int32 paramCount, Object eventSource, EventArgs eventArgs, HttpSessionState session)
   at System.Web.HttpApplicationFactory.FireApplicationOnStart(HttpContext context)
   at System.Web.HttpApplicationFactory.EnsureAppStartCalled(HttpContext context)
   at System.Web.HttpApplicationFactory.GetApplicationInstance(HttpContext context)
   at System.Web.HttpRuntime.ProcessRequestInternal(HttpWorkerRequest wr)
   at System.Web.HttpRuntime.ProcessRequestNow(HttpWorkerRequest wr)
   at System.Web.HttpRuntime.ProcessRequestNoDemand(HttpWorkerRequest wr)
   at System.Web.HttpRuntime.ProcessRequest(HttpWorkerRequest wr)
   at Microsoft.VisualStudio.WebHost.Request.Process()
   at Microsoft.VisualStudio.WebHost.Host.ProcessRequest(Connection conn)
   at Microsoft.VisualStudio.WebHost.Host.ProcessRequest(Connection conn)
   at Microsoft.VisualStudio.WebHost.Server.OnSocketAccept(Object acceptedSocket)
   at System.Threading.QueueUserWorkItemCallback.WaitCallback_Context(Object state)
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state, Boolean preserveSyncCtx)
   at System.Threading.ExecutionContext.Run(ExecutionContext executionContext, ContextCallback callback, Object state, Boolean preserveSyncCtx)
   at System.Threading.QueueUserWorkItemCallback.System.Threading.IThreadPoolWorkItem.ExecuteWorkItem()
   at System.Threading.ThreadPoolWorkQueue.Dispatch()
   at System.Threading._ThreadPoolWaitCallback.PerformWaitCallback()
InnerException: System.AccessViolationException
   HResult=-2147467261
   Message=Attempted to read or write protected memory. This is often an indication that other memory is corrupt.
   StackTrace:
   InnerException: 
```

问题似乎出在 Microsoft.VisualStudio.WebHost.Server.OnSocketAccept 的函数条目中。我不知道这是什么。

我玩了一些，发现：

*   如果我打开在 VS 2010 中创建的 Web 表单项目，则不会出现此问题。
*   如果我在 VS 2012 RC 中创建新的 MVC 3 项目，则不会出现此问题。
*   仅当我打开在 VS 2010 中创建的 MVC 3 项目时才会出现此问题。

除了在 VS 2012 RC 中创建一个新项目并复制所有代码之外，我不知道如何尝试解决这个问题，我不想为我们拥有的每个项目都这样做。我不知道这可能是 VS 2012 RC 中的错误。我还要注意，我还收到一条错误消息，提示“无法找到或打开 PDB 文件”，它与 IntelliTrace 输出中的最后一个事件一起出现，但不确定它是否已连接。任何帮助都是极好的。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-21T04:49:55.730

您似乎遇到了我们最近在 Intellitrace 中修复的错误，但我不能仅通过查看调用堆栈来确定。你能试一试，让我知道你是否可以在“Web 开发服务器”上不调试时遇到异常？

要使用 IIS 服务器而不是 Web 开发服务器，请打开项目属性，选择 Web 选项卡，然后选择“使用本地 IIS Web 服务器”。VS2010创建的项目默认选择Web Development Server，VS2012创建的项目默认选择“IIS Server”。

# ruby-on-rails - FactoryGirl 用 Rspec 创建字典

> ID：11090333
> 
> 赞同：2
> 
> 时间：2012-06-18T20:12:48.770
> 
> 标签：ruby-on-rails, ruby, testing, rspec, factory-bot

我正在做 Ruby on Rails rspec 测试，我有一个问题。显然，我必须创建一个字典，类似于

```
@example = {:attr1 => "somevalue", :attr2 => "some", 
            :attr3 => "someother", :stt => "abc"} 
```

这是一本很长的字典，所以我想在工厂里制作。这将使测试看起来更好。

我一直在环顾四周，但我只看到 FactoryGirl 是为 ActiveRecord 对象设计的。有谁知道如何使用 FactoryGirl 制作这样的字典？

感谢您的帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-18T20:21:45.057

实际上，您可以为此使用 FactoryGirl：

请参阅[自定义构造](https://github.com/thoughtbot/factory_girl/blob/master/GETTING_STARTED.md#custom-construction)。基本上，您提供`initialize_with`工厂定义并使用您的初始化函数将字典值设置为您需要的值。您仍然可以获得序列、特征等的全部功能，但可以取回***任何***Ruby 对象……而不仅仅是 ActiveRecord。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-18T20:20:54.353

所以，直接从[入门页面](https://github.com/thoughtbot/factory_girl/blob/master/GETTING_STARTED.md "入门页面")

> 默认情况下，该名称用于猜测对象的类，但可以显式指定它...如果您正在创建 ActiveRecord 对象，这意味着...

这表明您可以将任何类指定为工厂正在创建的类，其中应包括字典。

# c++ - 用于 C++ 对象持久性的 ORM ODB 是否创建/重新创建数据库

> ID：11090334
> 
> 赞同：2
> 
> 时间：2012-06-18T20:12:55.867
> 
> 标签：c++, orm, persistence, odb-orm

我对这个库和 ORM 相当陌生。我知道像 EntityFramework 这样的工具可以从您的对象生成数据库，并且可以从数据库生成代码。C++ 的 ODB 可以做类似的事情吗？如果没有，对于 C++，是否有可以这样做的库？提前致谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-19T12:46:16.000

是的，ODB 可以为您的 C++ 对象模型生成数据库模式（即 DDL 语句）。您可以将其作为单独的 .sql 文件使用，也可以将其嵌入到 C++ 代码中，并从您的应用程序中以编程方式创建模式。

[请参阅ODB 编译器手册](http://www.codesynthesis.com/products/odb/doc/odb.xhtml)中的 --generate-schema 和 --schema-format 选项。

# php - Yii 框架中的图像说明

> ID：11090335
> 
> 赞同：0
> 
> 时间：2012-06-18T20:12:58.710
> 
> 标签：php, yii

如何在 Yii 框架中使用 Chtml::link 获得这个

```
<a href="#" title="Movie 1" class="search-movie"><img alt="Movie 1" src="../../images/1.jpg"><p>Movie 1</p></a> 
```

当我这样做时，

```
<?php $imghtml=CHtml::image('../../images/1.jpg');
echo CHtml::link($imghtml, array('moviepage/index'),array('class'=>'search-movie', 'title'=>'Movie 1'));?> 
```

我只得到

```
<a href="#" title="Movie 1" class="search-movie"><img alt="Movie 1" src="../../images/1.jpg"></a> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-18T21:00:15.470

生成链接时，您需要包含标题的标记：

```
<?php 
    $imghtml=CHtml::image('../../images/1.jpg');
    $caption = CHtml::tag('p', array(), 'Movie 1');
    echo CHtml::link("{$imghtml}{$caption}", array('moviepage/index'), array('class'=>'search-movie', 'title'=>'Movie 1'));
?> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-18T20:54:04.787

像这样：

```
<?php $imghtml=CHtml::image('../../images/1.jpg');
echo CHtml::link("$imghtml<p>Move 1</p>", array('moviepage/index'),array('class'=>'search-movie', 'title'=>'Movie 1'));?> 
```

# java - jython 无法列出错误

> ID：11090340
> 
> 赞同：1
> 
> 时间：2012-06-18T20:13:31.403
> 
> 标签：java, python, jython

我正在尝试使用 Jython 将 python 类转换为 Java 字节码（在 mac osx lion 上）

> ./jython -m compileall /Users/owengerig/Downloads/Code\Downloads/cryptPYTHON.py

但得到这个错误，它没有表明什么是错的

> 列出 /Users/owengerig/Downloads/Code Downloads/cryptPYTHON.py ... 无法列出 /Users/owengerig/Downloads/Code Downloads/cryptPYTHON.py

我的 python 类是如何设置的（[以这篇文章为例](http://wiki.python.org/jython/ReplaceJythonc)）：

```
from Crypto.Cipher import AES
import base64
import os

class Crypticle(CryptInterface):
    """Authenticated encryption class

     * @param string    $key      base64-encoded encryption key
     * @param integer   $key_len  length of raw key in bits

    Encryption algorithm: AES-CBC
    Signing algorithm: HMAC-SHA256
    """

    AES_BLOCK_SIZE = 16

    @JAVA
    def __init__(self, key_string, key_size=192):
        assert not key_size % 8
        self.key = self.extract_key(key_string, key_size)
        self.key_size = key_size

    @classmethod
    def generate_key_string(cls, key_size=192):
        key = os.urandom(key_size / 8)
        return base64.urlsafe_b64encode(str(key))

    @classmethod
    def extract_key(cls, key_string, key_size):
        key = base64.urlsafe_b64decode(str(key_string))
        assert len(key) == key_size / 8, "invalid key"
        return key

    @JAVA(String, String)    
    def encrypt(self, data):
        """encrypt data with AES-CBC"""
        aes_key = self.key
        pad = self.AES_BLOCK_SIZE - len(data) % self.AES_BLOCK_SIZE
        data = data + pad * chr(pad)
        iv_bytes = os.urandom(self.AES_BLOCK_SIZE)
        cypher = AES.new(aes_key, AES.MODE_CBC, iv_bytes)
        data = iv_bytes + cypher.encrypt(data)
        data_str = base64.urlsafe_b64encode(str(data))
        return data_str

    @JAVA(String, String)  
    def decrypt(self, data_str):
        """decrypt data with AES-CBC"""
        aes_key = self.key
        data = base64.urlsafe_b64decode(data_str)
        iv_bytes = data[:self.AES_BLOCK_SIZE]
        data = data[self.AES_BLOCK_SIZE:]
        cypher = AES.new(aes_key, AES.MODE_CBC, iv_bytes)
        data = cypher.decrypt(data)
        return data[:-ord(data[-1])] 
```

还尝试了此代码（根据下面的评论），但出现相同的错误：

```
class Employee(Object):
   def __init__(self):
      self.first = "Josh"
      self.last  = "Juneau"
      self.id = "myempid"

   def getEmployeeFirst(self):
      return self.first

   def getEmployeeLast(self):
      return self.last

   def getEmployeeId(self):
      return self.id 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-18T21:54:59.613

-m compileall 采用目录，而不是文件名。因此，您需要执行以下操作：

```
./jython -m compileall /Users/owengerig/Downloads/Code\ Downloads/ 
```

**长解释**

如果打开jython 目录*/Lib/compileall.py*：

```
try:
    names = os.listdir(dir)
except os.error:
    print "Can't list", dir
    names = [] 
```

如果没有将目录作为参数传递，os.listdir() 会引发错误。由于这是用于编译命令行参数的函数，并且 main() 函数不检查参数是否为目录，所以这将失败。

```
 for dir in args:
            if not compile_dir(dir, maxlevels, ddir,
                               force, rx, quiet):
                success = 0 
```

**/长解释**

# java - 我的两个 Java GUI 不会使用 setVisible(true) 显示，但其他三个会

> ID：11090349
> 
> 赞同：0
> 
> 时间：2012-06-18T20:14:06.037
> 
> 标签：java, swing, user-interface, netbeans

编辑：使问题更短。

我的程序中有 5 个类，都是 GUI 的。可以调用首页 GUI、选项 GUI 和测验 GUI，并且 setVisible 为它们工作。提示 GUI 和记分卡 GUI 无法使用 setVisible 显示。测验 GUI 上有一个按钮应该调用提示 G​​UI。但是，该按钮不会调用 GUI。它确实有效；我知道这一点，因为我做了一个 System.out.println("Button test") 并打印了。

提示 GUI 只是一个带有标签和 3 个按钮的面板。我还没有做过任何监听器，只是用 NetBeans 设计了面板。在我的测验 GUI 上，我有启动提示 GUI 的按钮，代码是：

```
 private void tipsButtonMouseClicked(java.awt.event.MouseEvent evt) {                                        
    FrontPageGUI.tipsGUI.setVisible(true);
    System.out.println("Test to check if help button works");
    } 
```

这就像我调用其他 GUI 所做的那样。它只是不显示的提示和记分卡。我完全不明白...在我的选项 GUI 上，我有一个按钮，可以用相同的代码开始测验，它工作得很好。因此我的困惑。

希望我的编辑能让我更容易理解我的问题。

谢谢大家，布兰登

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-18T20:56:44.337

> 这是在 NetBeans 中，所以它确实生成了您看到的几乎所有代码。这就是为什么我不明白。有人知道我可能会错过什么吗？如果需要其他四个类中的任何一个，我会很乐意发布它们。

然后没有任何评论，

`public static void main(String args[]) {`从您的代码中替换您的

```
public static void main(String args[]) {
    java.awt.EventQueue.invokeLater(new Runnable() {

        @Override
        public void run() {
            FrontPageGUI.tipsGUI.setVisible(true);
        }
    });
} 
```

和

```
public static void main(String args[]) {
    java.awt.EventQueue.invokeLater(new Runnable() {

        @Override
        public void run() {
            JFrame frame = new JFrame();
            frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
            frame.add(new TipsMainGUI());
            frame.pack();
            frame.setVisible(true);
        }
    });
} 
```

输出将是

![在此处输入图像描述](../Images/ff2738ed3e598d8ffbba31e1ab2da4af.png)

# iphone - 使用 UIImagePickerController 保存图像

> ID：11090356
> 
> 赞同：0
> 
> 时间：2012-06-18T20:14:29.593
> 
> 标签：iphone, ios5, uiimage, uiimagepickercontroller

我正在尝试保存用户使用相机拍摄的图像

1）如果我使用 UIImageWriteToSavedPhotosAlbum 我似乎无法分配我想要的文件名。怎么样，可以选择文件名吗？
使用此选项的好处是，
`[picker setSourceType:UIImagePickerControllerSourceTypePhotoLibrary];`
然后提供照片库目录的缩略图库。

2）这导致我的下一个问题可以
`[picker setSourceType:UIImagePickerControllerSourceTypePhotoLibrary];`
用来从您自己的个人目录中获取图像吗？

3）无论如何以编程方式在照片库中创建子文件夹

4）最后，

```
NSArray  *paths    = NSSearchPathForDirectoriesInDomains(NSPicturesDirectory, NSUserDomainMask, YES);
if (![[NSFileManager defaultManager] fileExistsAtPath:[paths objectAtIndex:0] isDirectory:&isDir]) {
        NSError  *error;
        [[NSFileManager defaultManager] createDirectoryAtPath:[paths objectAtIndex:0 withIntermediateDirectories:YES attributes:nil error:&error];
} 
```

检查 NSPicturesDirectory 是否存在以便我可以写入它我不断收到 Cocoa 错误 513 not allowed

提前致谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-18T20:33:14.513

您不能为照片库图像指定文件名。ios 为保存到照片库的图像分配一个名为**asset url**的文件名，我们无法更改它。

如果您需要将图像保存到照片库，您可以使用 ALAssetsLibrary

```
 ALAssetsLibrary *library = [[ALAssetsLibrary alloc] init];
   [library writeImageToSavedPhotosAlbum:[image CGImage] orientation:(ALAssetOrientation)     [image imageOrientation] completionBlock:^(NSURL *assetURL, NSError *error){
    if (error)
    {
     // Eror
    }
    else
    {
     // Success
    }
   }];
   [library release]; 
```

更多信息查看： [如何将图片保存到 iPhone 照片库？](https://stackoverflow.com/questions/178915/how-to-save-picture-to-iphone-photo-library)

[将 UIImageView 中的图像保存到 iPad 照片库](https://stackoverflow.com/questions/4198083/save-image-in-uiimageview-to-ipad-photos-library)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-18T20:22:51.603

## 1.)

要保存您选择的文件名，您需要将图像保存到您的文档目录。这可以像这样轻松完成：

```
-(void)imagePickerController:(UIImagePickerController *)picker didFinishPickingImage:(UIImage *)image editingInfo:(NSDictionary *)editingInfo 
{
    NSString *current = [NSString stringWithFormat:@"%@/%@",PHOTODATA_PATH,currentItem];

    UIGraphicsBeginImageContext(CGSizeMake(160,160));
    [image drawInRect:CGRectMake(0,0,160,160)];
    UIImage* scaledImage = UIGraphicsGetImageFromCurrentImageContext();
    UIGraphicsEndImageContext();

    NSData * thumbSize = UIImageJPEGRepresentation(scaledImage, 1.0);
    [thumbSize writeToFile:[NSString stringWithFormat:@"%@_thumb.jpg",current] atomically:YES];

    NSData * fullSize = UIImageJPEGRepresentation(image, 1.0);
    [fullSize writeToFile:[NSString stringWithFormat:@"%@.jpg",current] atomically:YES];

    [self dismissModalViewControllerAnimated:YES];
} 
```

*当然，可能需要编辑此代码以适合您的确切情况，但提供了基本的理解和使用`NSData`.*

## 2.)

是的，`UIImagePickerControllerSourceTypePhotoLibrary`将在您的设备上访问您的照片库。使用此功能可以访问从相机胶卷中保存或拍摄的任何照片。

## 3.)

不可以，您不能使用您的应用程序在照片库中创建子文件夹。这可以使用 iPhoto 或 iTunes 等来完成。

## 4.)

您只能访问沙盒环境中包含的`Documents`和`Library`路径。将照片保存到照片库的唯一方法是使用适当的公共方法。无需检查目录是否存在，操作系统将负责管理照片库所需的所有“幕后”任务。

# iphone - 视图弹出和推送后 Cocos2D 不更新

> ID：11090357
> 
> 赞同：1
> 
> 时间：2012-06-18T20:14:31.517
> 
> 标签：iphone, uiviewcontroller, cocos2d-iphone

我正在编写一个具有多个级别的 iPhone 游戏。在游戏过程中，用户可以使用菜单退出游戏并返回关卡选择屏幕。为此，我使用带有一系列 UIViewController 的 UINavigationController。当玩家选择退出时，从堆栈中弹出游戏视图并显示关卡选择菜单。游戏第一次运行良好，但如果玩家退出关卡然后尝试玩相同或另一个关卡，这会导致问题。

游戏视图控制器（显示 cocos2d 场景）是游戏控制器单例的成员变量。当用户单击“再次播放”时，此游戏控制器会重置游戏状态。cocos2d 层被清除，游戏被重置为初始状态。在此之后，游戏视图再次被压入堆栈。然而这次 cocos2d 没有更新。屏幕只是上一个游戏冻结的最后一帧。

似乎由于某种原因，当 cocos2d 视图被弹出然后推送它时，即使我使用它也会停止更新：

```
[[CCDirector sharedDirector] resume]; 
```

有没有人有这个问题的经验以及如何避免它？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-02T07:51:11.543

当你的游戏视图控制器被弹出时，`[[CCDirector sharedDirector] stopAnimation]`它会被调用，所以在将你的游戏视图控制器再次推入堆栈后，你必须调用`[[CCDirector sharedDirector] startAnimation]`.

希望这可以帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-22T17:07:14.920

我会这样尝试：

```
[self resumeSchedulerAndActions];
    for(CCSprite *sprite in [self children]) {
        [[CCActionManager sharedManager] resumeTarget:sprite];
    } 
```

# c++ - 使用 FreeType 库创建文本位图以在 OpenGL 3.x 中绘制

> ID：11090358
> 
> 赞同：1
> 
> 时间：2012-06-18T20:14:41.907
> 
> 标签：c++, opengl, fonts, textures

目前我不太确定我的问题出在哪里。我可以将加载的图像绘制为纹理没有问题，但是当我尝试生成带有字符的位图时，我只会得到一个黑框。

我相信问题出在我生成和上传纹理的时候。

这是方法；if 语句的顶部仅绘制从文件 (res/texture.jpg) 加载的图像的纹理，并且绘制得非常完美。if 语句的 else 部分将尝试生成并上传带有 char（变量 char enter）的纹理。

![输出](../Images/c5c2cc5ec0e348717094be8dd6637541.png)

源代码，如果需要，我将添加着色器和更多的 C++，但它们适用于图像。

```
 void uploadTexture()
    {
        if(enter=='/'){

            // Draw the image.
            GLenum imageFormat;
            glimg::SingleImage image = glimg::loaders::stb::LoadFromFile("res/texture.jpg")->GetImage(0,0,0);
            glimg::OpenGLPixelTransferParams params =  glimg::GetUploadFormatType(image.GetFormat(), 0);
            imageFormat = glimg::GetInternalFormat(image.GetFormat(),0);

            glGenTextures(1,&textureBufferObject);
            glBindTexture(GL_TEXTURE_2D, textureBufferObject);

            glimg::Dimensions dimensions = image.GetDimensions();
            cout << "Texture dimensions w "<< dimensions.width << endl;
            glTexImage2D(GL_TEXTURE_2D, 0, GL_RGB8, dimensions.width, dimensions.height, 0, params.format, params.type, image.GetImageData());
        }else
        {
            // Draw the char useing the FreeType Lib
            FT_Init_FreeType(&ft);
            FT_New_Face(ft, "arial.ttf", 0, &face);
            FT_Set_Pixel_Sizes(face, 0, 48);

            FT_GlyphSlot g = face->glyph;

            glGenTextures(1,&textureBufferObject);
            glBindTexture(GL_TEXTURE_2D, textureBufferObject);

            glPixelStorei(GL_UNPACK_ALIGNMENT, 1);

            FT_Load_Char(face, enter, FT_LOAD_RENDER);
            FT_Bitmap theBitmap = g->bitmap;

            int BitmapWidth = g->bitmap.width;
            int BitmapHeight = g->bitmap.rows;

            cout << "draw char - " << enter << endl;
            cout << "g->bitmap.width - " << g->bitmap.width << endl;
            cout << "g->bitmap.rows - " << g->bitmap.rows << endl;

            int TextureWidth =roundUpToNextPowerOfTwo(g->bitmap.width);
            int TextureHeight =roundUpToNextPowerOfTwo(g->bitmap.rows);

            cout << "texture width x height - " << TextureWidth <<" x " << TextureHeight << endl;

            GLubyte* TextureBuffer = new GLubyte[ TextureWidth * TextureWidth ];
            for(int j = 0; j < TextureHeight; ++j)
            {
                for(int i = 0; i < TextureWidth; ++i)
                {
                    TextureBuffer[ j*TextureWidth + i ] = (j >= BitmapHeight || i >= BitmapWidth ? 0 : g->bitmap.buffer[ j*BitmapWidth + i ]);
                }
            }

            glTexImage2D(GL_TEXTURE_2D, 0, GL_RGB8, TextureWidth, TextureHeight, 0, GL_RGB8, GL_UNSIGNED_BYTE, TextureBuffer);
        }

    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-18T20:56:07.140

我不确定 OpenGL 部分，但您处理 FT 位图的算法不正确。FT 位图中每一行的字节数为`bitmap->pitch`. 每个像素的数量还取决于您加载角色的渲染模式。例如，如果`bitmap->pixel_mode`是`FT_PIXEL_MODE_LCD`，则每个像素被编码为 3 个字节，按照 R、G、B 的顺序，其值实际上是 alpha 掩码值，而如果像素模式为`FT_PIXEL_MODE_GRAY`，则每个像素为 1 个字节，其值是灰度等级。

看看[http://freetype.sourceforge.net/freetype2/docs/reference/ft2-basic_types.html#FT_Bitmap](http://freetype.sourceforge.net/freetype2/docs/reference/ft2-basic_types.html#FT_Bitmap)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-18T21:46:26.747

我要做的第一件事是查看 Freetype 为几乎所有 FT_* 函数提供的返回码。

无论如何，这是一个很好的做法，但如果你有问题，它应该大大缩小范围。

# objective-c - 更快的 MPMediaItems NSMutableArray 排序？代码审查

> ID：11090359
> 
> 赞同：2
> 
> 时间：2012-06-18T20:14:50.843
> 
> 标签：objective-c, ios, sorting, nsmutablearray

我已经进入 iOS 编程几个星期了，还有很多东西要学。我有一种包含 MPMediaItems 的 NSMutableArray 工作，但是对于 1200 个项目，它慢了大约 10 秒，我正在寻找一种更快的方法。

我的最终目标是拥有一个 MPMediaItemCollection 项目数组，每个项目代表一个专辑。我无法从 MPMediaQuery（据我所知）中获取此信息，因为我需要从播放列表中获取歌曲。因此，我正在对从特定播放列表（“过去 4 个月”）中获得的歌曲进行排序，然后构建我自己的收藏集。正如我所说，下面的方法有效，但速度很慢。即使我只按 MPMediaItemPropertyAlbumTitle 排序，它仍然需要大约 4 秒（iPhone 4S）。

编辑：我应该提到我尝试了排序描述符，但我无法获得工作的关键。例如

```
NSSortDescriptor *titleDescriptor = [[NSSortDescriptor alloc] initWithKey:@"MPMediaItemPropertyAlbumTitle" ascending:YES]; 
```

这会返回一个错误

```
[<MPConcreteMediaItem 0x155e50> valueForUndefinedKey:]: this class is not key value coding-compliant for the key MPMediaItemPropertyAlbumTitle. 
```

编码

```
MPMediaQuery *query = [MPMediaQuery playlistsQuery];
NSArray *playlists = [query collections];
NSMutableArray *songArray = [[NSMutableArray alloc] init];

for (MPMediaItemCollection *playlist in playlists) {
    NSString *playlistName = [playlist valueForProperty: MPMediaPlaylistPropertyName];
    NSLog (@"%@", playlistName);
    if ([playlistName isEqualToString:@"Last 4 months"]) {

        /* replaced this code with a mutable copy
        NSArray *songs = [playlist items];
        for (MPMediaItem *song in songs) {
            [songArray addObject:song]; 
        }
        */
        // the following replaces the above for-loop
        songArray = [[playlist items] mutableCopy ];

        [songArray sortUsingComparator:^NSComparisonResult(id a, id b) {
            NSString *first1 = [(MPMediaItem*)a valueForProperty:MPMediaItemPropertyAlbumTitle];
            NSString *second1 = [(MPMediaItem*)b valueForProperty:MPMediaItemPropertyAlbumTitle];

            NSString *first2 = [(MPMediaItem*)a valueForProperty:MPMediaItemPropertyAlbumPersistentID];
            NSString *second2 = [(MPMediaItem*)b valueForProperty:MPMediaItemPropertyAlbumPersistentID];

            NSString *first3 = [(MPMediaItem*)a valueForProperty:MPMediaItemPropertyAlbumTrackNumber];
            NSString *second3 = [(MPMediaItem*)b valueForProperty:MPMediaItemPropertyAlbumTrackNumber];

            NSString *first = [NSString stringWithFormat:@"%@%@%03d",first1,first2, [first3 intValue]];
            NSString *second = [NSString stringWithFormat:@"%@%@%03d",second1,second2, [second3 intValue]];

            return [first compare:second]; 
        }];
    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2014-02-09T03:54:39.703

我知道这是一个旧线程，但我认为澄清为什么 OP 排序代码不起作用以便任何遇到此代码的人都不会推迟使用 NSSortDescriptors 很重要。

编码：

```
[[NSSortDescriptor alloc] initWithKey:@"MPMediaItemPropertyAlbumTitle" ascending:YES]; 
```

应该：

```
[[NSSortDescriptor alloc] initWithKey:MPMediaItemPropertyAlbumTitle ascending:YES]; 
```

因为 MPMediaItemPropertyAlbumTitle 包含密钥的名称。

我已经多次使用此代码。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-19T04:20:32.427

在@cdelacroix 的建议下，我重新实现了比较块以级联三个排序键，如果高阶键相同，则只检查低阶键。这导致排序的执行时间减少了 50% 以上。尽管如此，它并没有我想要的那么快，所以如果有人有更好的答案，请发布它。

这是旧时代与新时代的对比（1221 项）：

4S执行时间=10.8，执行时间=4.7

3GS 执行时间 = 21.6，执行时间 = 9.3

有趣的是，从 for 循环切换到数组副本的 mutableCopy 似乎并没有改善情况。如果有的话，mutableCopy 可能慢了十分之一秒（有人对 mutableCopy 进行过任何基准测试吗？）。但我留下了改变，因为它看起来更干净。

最后，注意检查专辑标题 == nil。请注意， compare 认为任何具有 nil 值的东西总是 NSOrderedSame 与其他任何东西一样。列表中的一张专辑没有设置标题，这在没有此检查的情况下搞砸了排序顺序。

```
MPMediaQuery *query = [MPMediaQuery playlistsQuery];
NSArray *playlists = [query collections];
NSMutableArray *songArray = [[NSMutableArray alloc] init];

for (MPMediaItemCollection *playlist in playlists) {
    NSString *playlistName = [playlist valueForProperty: MPMediaPlaylistPropertyName];
    NSLog (@"%@", playlistName);
    if ([playlistName isEqualToString:@"Last 4 months"]) {

        songArray = [[playlist items] mutableCopy ];

        [songArray sortUsingComparator:^NSComparisonResult(id a, id b) {
            NSComparisonResult compareResult;

            NSString *first1 = [(MPMediaItem*)a valueForProperty:MPMediaItemPropertyAlbumTitle];
            if(first1 == nil) first1 = @" "; // critical because compare will match nil to anything and result in NSOrderedSame
            NSString *second1 = [(MPMediaItem*)b valueForProperty:MPMediaItemPropertyAlbumTitle];
            if(second1 == nil) second1 = @" ";  // critical because compare will match nil to anything and result in NSOrderedSame
            compareResult = [first1 compare:second1];

            if (compareResult == NSOrderedSame) {
                NSString *first2 = [(MPMediaItem*)a valueForProperty:MPMediaItemPropertyAlbumPersistentID];
                NSString *second2 = [(MPMediaItem*)b valueForProperty:MPMediaItemPropertyAlbumPersistentID];
                compareResult = [first2 compare:second2];
                if(compareResult == NSOrderedSame) {
                    NSString *first3 = [(MPMediaItem*)a valueForProperty:MPMediaItemPropertyAlbumTrackNumber];
                    NSString *second3 = [(MPMediaItem*)b valueForProperty:MPMediaItemPropertyAlbumTrackNumber];
                    compareResult = [first3 compare:second3];
                }
            }
            return compareResult;
        }];
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-18T20:22:43.083

您需要了解[排序描述符](https://developer.apple.com/library/mac/#documentation/Cocoa/Conceptual/SortDescriptors/Concepts/Creating.html)。

然后你的排序将尽可能简单，`return [songs sortedArrayUsingDescriptors:sortDescriptors];`也应该更快。

编辑：根据 OP， MPMediaItem 类不符合 KVC 标准，因此我将放弃答案。

# ruby - 是否可以通过 Web 应用程序的 Java 对话框提示用户输入密码？

> ID：11090363
> 
> 赞同：0
> 
> 时间：2012-06-18T20:15:32.220
> 
> 标签：ruby, tomcat, jdbc, jruby, ibm-midrange

我问的原因是，我有一个使用 Ruby (1.8.7-p357) 和 Sinatra 框架 (1.3.2) 编写的 Web 应用程序。解释器是 JRuby (1.6.7.2)。我正在连接到 AS/400（System i v6r1），当我在代码中为应用程序提供连接数据库的错误密码时，系统会提示我使用 Java 对话框提供正确的密码。

这在我使用 WEBrick 的开发机器（Ubuntu 11.10）上运行良好。但是，当我使用错误的密码部署应用程序时，应用程序会挂起。翻阅日志文件表明系统正在等待用户调用函数：java.awt.Dialog.show() 的响应。

这是跟踪的相关部分：

```
http-8080-2" daemon prio=6 tid=0x03d81400 nid=0x10c in Object.wait() [0x06278000]
java.lang.Thread.State: WAITING (on object monitor)
at java.lang.Object.wait(Native Method)
- waiting on <0x24a022a8> (a java.awt.Component$AWTTreeLock)
at java.lang.Object.wait(Object.java:503)
at java.awt.WaitDispatchSupport.enter(Unknown Source)
- locked <0x24a022a8> (a java.awt.Component$AWTTreeLock)
at java.awt.Dialog.show(Unknown Source)
at com.ibm.as400.access.PasswordDialog.prompt(PasswordDialog.java:284)
at com.ibm.as400.access.ToolboxSignonHandler.handleSignon(ToolboxSignonHandler.java:499)
at com.ibm.as400.access.ToolboxSignonHandler.connectionInitiated(ToolboxSignonHandler.java:50)
at com.ibm.as400.access.AS400.promptSignon(AS400.java:2153)
at com.ibm.as400.access.AS400.signon(AS400.java:3417)
- locked <0x23121378> (a com.ibm.as400.access.AS400)
at com.ibm.as400.access.AS400.connectService(AS400.java:869)
at com.ibm.as400.access.AS400JDBCConnection.setProperties(AS400JDBCConnection.java:3016)
at com.ibm.as400.access.AS400JDBCDriver.prepareConnection(AS400JDBCDriver.java:1242)
at com.ibm.as400.access.AS400JDBCDriver.initializeConnection(AS400JDBCDriver.java:1105)
at com.ibm.as400.access.AS400JDBCDriver.connect(AS400JDBCDriver.java:355) 
```

Web 应用程序是否可以以这种方式在客户端计算机上启动 Java 对话框？如果是这样，为什么它在我的部署环境中失败了？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-18T21:36:34.163

您需要将[IBM Toolbox for Java JDBC 属性](http://publib.boulder.ibm.com/infocenter/iseries/v7r1m0/topic/rzahh/jdbcproperties.htm) `prompt`设置为`false`并在连接失败时捕获异常。

![在此处输入图像描述](../Images/acdb8f9c289af638acee0af1dc37880e.png)

* * *

`java.awt.headless=true`此外，在运行服务器应用程序时设置 Java 系统属性也是一个好习惯。

请参阅[在 Java SE 平台中使用无头模式](http://java.sun.com/developer/technicalArticles/J2SE/Desktop/headless/) 。

# jsp - 在 JSP 中制作多态 bean 引用

> ID：11090366
> 
> 赞同：0
> 
> 时间：2012-06-18T20:15:37.087
> 
> 标签：jsp, polymorphism, javabeans

当我编写 <jsp:useBean> 时，class 属性决定了新对象的类（如果已创建）。它还确定生成的 servlet 中使用的引用变量的类型。

在 JSP 中：

```
<jsp:useBean id="person" class="foo.Person" scope="page" /> 
```

生成的servlet：

```
 food.person = null;
 if(person==null) person = new foo.Person(); 
```

有没有办法改变实际对象类型的引用类型？换句话说，将引用类型设为 Person，将对象类型设为 Student。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-18T21:04:36.733

不，这是不可能的。

但在一个设计合理的应用程序中，控制器（一个 servlet 或您喜欢的 MVC 框架的一个动作）会创建 bean，而视图会使用它。

并且`<jsp:useBean>`已经过时多年。使用 JSP EL。

控制器：

```
request.setAttribute("person", new Student()); 
```

看法：

```
${person.id} - <c:out value="${person.name}"/> 
```

# java - 为什么不把工作放在这里？

> ID：11090367
> 
> 赞同：1
> 
> 时间：2012-06-18T20:15:40.030
> 
> 标签：java, concurrent-programming, java.util.concurrent

```
class NaiveSQ<E> {
    boolean putting = false;
    E item = null;

    public synchronized E take() throws InterruptedException {
        while (item == null)
            wait();
        E e = item;
        item = null;
        notifyAll();
        return e;
    }

    public synchronized void put (E e) throws InterruptedException {
        if (e == null)
            return;
        while (putting)
            wait();
        putting = true;
        item = e;
        notifyAll();
        while (item != null)
            wait();
        putting = false;
        notifyAll();
    }
}

class Producer implements Runnable {
    int id = -1;
    int limit = 1;

    Producer(int x) {
        id = x;
    }

    public void run() {
        System.out.printf("I am producer number %d\n", id);
        for (int i=0; i<limit; i++) {
            Integer I = new Integer(i);
            try {
                Test.queue.put(I);
            } catch (Exception e) {
                System.out.println(e.getMessage());
            }
        }
    }
}

class Consumer implements Runnable {
    int id = -1;

    Consumer(int x) {
        id = x;
    }

    public void run() {
        try {
            Integer I = Test.queue.take();
            System.out.printf(
                "I am consumer number %d - I read %d\n", id, I.intValue());
        } catch (Exception e) {
            System.out.println(e.getMessage());
        }
    }
}

public class Test{
    static NaiveSQ<Integer> queue;
    public static void main (String [] args){
        System.out.println("hello from Java");
        Thread p = new Thread(new Producer(1));
        p.start();
        for (int i=0; i<1; i++) {
            Thread c = new Thread(new Consumer(i));
            c.start();
        }
    }
}; 
```

另外为什么异常包含null？这是来自[http://www.cs.rice.edu/~wns1/papers/2006-PPoPP-SQ.pdf](http://www.cs.rice.edu/~wns1/papers/2006-PPoPP-SQ.pdf)清单 3的实现

我得到输出

```
hello from Java
I am producer number 1
null
null 
```

为什么我会得到空值？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-18T20:29:10.940

您尚未在 main 方法中启动队列。我猜你得到一个 NullPointerException 因为队列对象从未被创建并且生产者和消费者引用了为空的队列。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-18T20:46:10.280

即使您正确初始化队列，您的实现仍然存在重大问题。如果`Consumer`线程在队列为空时尝试*获取*一个项目（根据您的代码这是完全可能的），那么`Consumer`线程进入无限期等待，持有对该对象的锁定。`Producer`线程永远不能*将*项目放入队列。整个事情都会停止。

# c# - 用于控制选项卡的 Internet Explorer 7+ 插件

> ID：11090368
> 
> 赞同：2
> 
> 时间：2012-06-18T20:15:43.163
> 
> 标签：c#, .net, internet-explorer, ieaddon

初始说明，我不是 ac# 程序员，但我已经为 chrome 和 firefox 开发了插件/扩展，并且我需要 Internet Explorer 的第三个扩展以用于与工作相关的项目。

我正在尝试从 IE 中的 BHO 扩展访问 Internet Explorer 实例。我一直在使用以下资源：

*   [如何开始开发 Internet Explorer 扩展？](https://stackoverflow.com/questions/5643819/developing-internet-explorer-extensions/5740004#5740004)
*   [http://www.codeproject.com/Articles/19971/How-to-attach-to-Browser-Helper-Object-BHO-with-C](http://www.codeproject.com/Articles/19971/How-to-attach-to-Browser-Helper-Object-BHO-with-C)
*   [http://social.msdn.microsoft.com/Forums/en-US/ieextensiondevelopment/thread/03a8c835-e9e4-405b-8345-6c3d36bc8941](http://social.msdn.microsoft.com/Forums/en-US/ieextensiondevelopment/thread/03a8c835-e9e4-405b-8345-6c3d36bc8941)（**需要帮助**）

所以，我有基本的插件工作，并通过在窗口完成加载时注入一个 javascript 警报框来测试它。

我的插件最终将不得不管理两个选项卡（一个充当主机，另一个充当从属），并且[提到的最后一个链接](http://social.msdn.microsoft.com/Forums/en-US/ieextensiondevelopment/thread/03a8c835-e9e4-405b-8345-6c3d36bc8941)处理它，但它需要浏览器的 HWND 句柄，我不知道如何获得它.

看起来它可能在`WebBrowser`成员之下，`.Parent`但我不知道我需要将它转换为哪个类才能获得 IE 句柄。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-19T01:39:09.740

因此，要获取任何浏览器甚至任何**已**在机器上运行的进程的句柄，您可以使用以下 FindWindow 方法：

> User32.dll

通过以下方式在您的课程中包含对它的引用：

```
 // Find by class name and window name
    [DllImport("user32.dll", SetLastError = true)]
    static extern IntPtr FindWindow(string lpClassName, string lpWindowName);

    // Find window name only
    [DllImport("user32.dll", EntryPoint = "FindWindow", SetLastError = true)]
    static extern IntPtr FindWindowByCaption(IntPtr ZeroOnly, string lpWindowName); 
```

你可以在你的班级里给他们打电话，如下所示：

```
 public FindMyWindow(string classname, string windowName)
    {
        IntPtr hWnd = FindWindow(classname, null);
        // Or do
        hWnd = FindWindowByCaption(IntPtr.Zero, windowName);
    } 
```

您可以使用

> 间谍++

如果需要，它会随 Visual Studio 2010 一起找到类名。

# android - Android Start Activity from Class

> ID：11090373
> 
> 赞同：1
> 
> 时间：2012-06-18T20:15:58.933
> 
> 标签：android, xamarin.android

```
public class WeeklyInspection : Activity
{
  WebView view = (WebView) FindViewById(Resource.Id.inspectionWV);
  view.Settings.JavaScriptEnabled = true;
  view.Settings.CacheMode = CacheModes.CacheElseNetwork;
  view.SetWebChromeClient(new CustomWebChromeClient(this));
  view.SetWebViewClient(new CustomWebViewClient(this));
  view.LoadUrl("http://myurl.com");
}

private class CustomWebChromeClient: WebChromeClient
{
   public override void OnConsoleMessage(string message, int lineNumber, string sourceID)
    {
       if (message.StartsWith("Submit")
          //do all my submit stuff here
          //if without error, I want to go back to the Main Activity.  Have tried:
          Intent intent = new Intent(BaseContext, typeof(Main));
          StartActivity(intent); //Both BaseContext and StartActivity throw "Cannot access non-static method in static context"
          //tried:
          Finish(); //Same thing
          //tried:
          OnBackPressed(); //Same thing
    }
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2016-08-04T22:26:54.023

**Just Use This**

```
Application.Context.StartActivity(intent); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-18T20:25:12.610

As the compiler error message you encountered states, [StartActivity](http://docs.mono-android.net/?link=M%3aAndroid.Content.Context.StartActivity%28Type%29) is an instance method of [Context](http://docs.mono-android.net/?link=T%3aAndroid.Content.Context), not a static method, and therefore cannot be called like that.

You didn't include it in the code sample, but in the activity you pass "this" (the activity) into the constructor to CustomWebChromeClient, so I'm assuming CustomWebChromeClient is keeping a reference to it. You can use that reference to call the instance methods you need on the activity, whether it be StartActivity, Finish, or whatever else you need. For example:

```
private class CustomWebChromeClient: WebChromeClient
{
    private readonly Activity _context;

    public CustomWebChromeClient(Activity context) 
    {
        _context = context;
    }

    public override void OnConsoleMessage(string message, int lineNumber, string sourceID)
    {
        if (message.StartsWith("Submit"))
        {
            _context.Finish();
        }
    }
} 
```

# svn - svn checkout 最近的日期并修剪空目录

> ID：11090374
> 
> 赞同：0
> 
> 时间：2012-06-18T20:16:06.213
> 
> 标签：svn, directory, ignore, svn-checkout

在 CVS 中，我可以具体说明我需要获取的结帐类型...例如：

cvs -q 结帐 -d CMS -P CMS

这意味着，稍微结帐并创建一个名为 CMS 的目录并修剪空目录并将其放在 CMS 文件夹中。

我需要使用 SVN 结帐创建相同的目录结构......这是我到目前为止所拥有的。

```
svn checkout http://svn/project/CMS/trunk CMS -q 
```

我的存储库中有一些空文件夹，我需要保留但在结帐期间不需要结帐。我知道 SVN 使用 --depth 和 --empty 但我认为这不会满足我的要求。

基本上我需要签出我的存储库，但在签出期间排除空文件夹......有人知道该命令是什么吗？糟糕的是，我不能像在 CVS 中那样使用 -P。

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-18T23:03:56.303

我认为您误解了 CVS 如何处理*空文件夹*。

在 CVS 中，只有文件是版本控制的，而不是目录（我们将使用该术语而不是*文件夹*）。当您在 CVS 中进行结帐时，CVS 将根据需要创建目录。但是，由于没有对目录进行版本控制，因此永远不会创建不包含文件的目录。这就是为什么您会`.keep`在其他空目录中看到文件的原因。这是让 CVS 创建所需的空目录的唯一方法。

如果您执行`cvs update`. 在这种情况下，目录可能会变为空。将a 传递`-P`给`cvs update`命令将删除这些文件夹。

与 CVS 不同，Subversion 版本目录和文件。如果您在 Subversion 中创建一个空目录，它将被检出为一个空目录。如果您不再需要某个目录，则应将其删除，就像通过`svn delete`命令删除不再需要的文件一样。

因此，没有等效于 CVS`-P`命令行参数。

# lighttpd - Lighttpd 限制访问目录而不是子目录

> ID：11090375
> 
> 赞同：0
> 
> 时间：2012-06-18T20:16:08.537
> 
> 标签：lighttpd, restrict, subdirectory

我已经设法设置了我的 lighttpd 服务器，这样它就可以保护 mywebsite.com/files 的密码。但我根本不希望文件的子目录受到密码保护。我更改了 lighttpd.conf 文件以使 /files 目录受密码保护并且它可以工作，但所有子目录都受密码保护。我似乎找不到让 lighttpd 停止这种情况的选项。

所以：

> /文件/密码保护
> 
> /files/a.txt 没有密码保护

我是否缺少一些设置或语法来允许这样做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-21T16:03:40.497

你试图做的事情是不可能的。

我想你正在使用这样的东西。

```
$HTTP["url"] =~ "^/files" {
    url.access-deny = ("")
} 
```

当您拒绝访问某个目录时，它会递归地工作，即该目录中的所有文件也将被拒绝。

老实说，我真的不明白你想做什么，或者你为什么想要这个功能。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-07-21T17:43:37.537

当然可以。将身份验证配置嵌套在 HTTP 块中是关键；这是解决许多其他情况的强大技巧。auth 模块只会触发确切的路径，并且它下面的任何内容都将不受保护。如果您想更精细地控制必须保护的内容，您甚至可以使用正则表达式。

```
$HTTP["url"] == "/files/" {
auth.require = ( "/files/" =>
(
"method" => "basic",
"realm" => "Password protected area",
"require" => "user=alice"
)
)
} 
```

请注意目录路径如何始终以斜杠结尾。这是目录列表的标准。如果斜线丢失，将自动发出重定向，所以不用担心`/files`.

# java - Primefaces dataTable ajax 功能在包含在

> ID：11090382
> 
> 赞同：3
> 
> 时间：2012-06-18T20:16:22.590
> 
> 标签：java, jsf

嗨，我整天都在为这个问题打我的头，我不知道该怎么办，我希望这个论坛上的人可以帮助我。

当我使用 dataTable 元素呈现独立页面时，所有 Ajax 功能都可以工作：排序、导航等。

但是，当我通过“ui:include”标签在另一个页面中包含具有 dataTable 元素的同一页面时，表格会呈现，但所有 Ajax 功能都会丢失。

这是我的“p:dataTable”页面的代码：

```
 <ui:composition xmlns="http://www.w3.org/1999/xhtml"
      xmlns:h="http://java.sun.com/jsf/html"
      xmlns:f="http://java.sun.com/jsf/core"
      xmlns:p="http://primefaces.org/ui"
      xmlns:ui="http://java.sun.com/jsf/facelets">
        <p:dataTable id="dataTable"
                     var="alarm" 
                     value="#{alarmsBean.alarms}"
                     paginator="true" rows="10"
                     paginatorTemplate="{FirstPageLink} {PreviousPageLink} {NextPageLink} {LastPageLink}"
                     paginatorPosition="bottom">
            <f:facet name="header">
                Alarms
            </f:facet>
            <p:column id="deviceHeader" sortBy="#{alarm.device}">
                <f:facet name="header">
                    <h:outputText value="Device" />
                </f:facet>
                <h:outputText value="#{alarm.device}" />
            </p:column>
            <p:column sortBy="#{alarm.alarm}">
                <f:facet name="header">
                    <h:outputText value="Alarm" />
                </f:facet>
                <h:outputText value="#{alarm.alarm}" />
            </p:column>            
            <p:column sortBy="#{alarm.managedObject}">
                <f:facet name="header">
                    <h:outputText value="Managed Object" />
                </f:facet>
                <h:outputText value="#{alarm.managedObject}" />
            </p:column>            
            <p:column sortBy="#{alarm.alarmTime}">
                <f:facet name="header">
                    <h:outputText value="Alarm Time" />
                </f:facet>
                <h:outputText value="#{alarm.alarmTime}" />
            </p:column>            
            <p:column sortBy="#{alarm.severity}">
                <f:facet name="header">
                    <h:outputText value="Severity" />
                </f:facet>
                <h:outputText value="#{alarm.severity}" />
            </p:column>            
            <p:column sortBy="#{alarm.message}">
                <f:facet name="header">
                    <h:outputText value="Message" />
                </f:facet>
                <h:outputText value="#{alarm.message}" />
            </p:column>
        </p:dataTable>
    </ui:composition> 
```

这是包含该页面的其他页面的部分：

```
 <h:form id="mainF">
      <pe:layoutPane id="center" position="center">
          <h:panelGroup id="centerContent">
              <ui:include src="#{navigationBean.pageName}.xhtml" />
          </h:panelGroup>
      </pe:layoutPane>
    </h:form> 
```

我做错了什么或者这是 PrimeFaces 3.3 中的错误？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-18T21:43:28.417

```
<ui:include src="#{navigationBean.pageName}.xhtml" /> 
```

您需要确保在处理（ajax）表单提交期间`#{navigationBean.pageName}`返回与显示初始页面时**完全相同的值。**如果不是这种情况，那么 JSF 将无法找到 (ajax) 表单提交中涉及的输入和命令组件。

因此，如果该值取决于基于请求的参数/变量，那么您需要确保此请求参数/变量在表单提交期间保留并且在 bean 的（后）构造期间可用。您可以通过`<f:param>`在命令按钮中传递它并将其设置为`@ManagedProperty`. 请注意，将 bean 放在视图范围内将不起作用，`<ui:include src>`因为作为视图构建时间标记会获得自己的全新实例。您需要关闭部分状态保存或升级到 JSF 2.2。

### 也可以看看：

*   [如何通过导航菜单 ajax-refresh 动态包含内容？(JSF SPA)](https://stackoverflow.com/questions/7108668/how-to-ajax-refresh-the-main-content-part-by-navigation-menu/7113961#7113961)

# c# - 强类型 Viewbag 项目

> ID：11090385
> 
> 赞同：5
> 
> 时间：2012-06-18T20:16:33.677
> 
> 标签：c#, asp.net-mvc-3, razor, viewbag

如果我使用的是包含强类型对象的 ViewBag，MVC Razor 上是否有任何方法可以定义（或强制转换）以便其所有元素都出现在 IntelliSense 中？

例如，假设我有

```
ViewBag.Movies.Name
ViewBag.Movies.Length 
```

我知道电影是对象类型电影，它有成员名称和长度

```
class Movie { 
    public string Name {get; set;}
    public string Length {get; set;}
} 
```

我可以以某种方式投射这个，就像我为模型做的那样

```
@model Transactions.UserTransactionDetails 
```

所以 Movie 的成员可以在 Razor 中使用？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-06-18T20:18:54.877

您可以将其存储在变量中。

```
var movie = (Movie)ViewBag.Movie; 
```

然后打字`@movie.`会产生智能感知`Name`, `Length`。

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2012-06-18T20:56:15.787

使用 ViewModel，其中包含您查看所需的所有不同对象的属性

例如

```
public class MovieTransactionViewModel 
{
   public List<Transaction> Transactions { get; set; }
   public List<Movie> Movies { get; set; }
} 
```

然后，让您的视图将其用作模型，您将在视图中获得智能感知。

这样您就不会更改模型，因此 EntityFramework 不会受到影响。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-06-18T20:24:38.987

远离 VieWbag： [http ://completedevelopment.blogspot.com/2011/12/stop-using-viewbag-in-most-places.html](http://completedevelopment.blogspot.com/2011/12/stop-using-viewbag-in-most-places.html)

只需创建一个包含其他模型的新 ViewWModel。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-18T20:18:59.730

不，那是因为 ViewBag 不是强类型的。它是使用动态和 ExpandoObject 实现的。如果你需要一个强类型模型，为什么不使用呢？

# android - Android onTouch 返回错误的颜色

> ID：11090387
> 
> 赞同：1
> 
> 时间：2012-06-18T20:16:49.003
> 
> 标签：android, image, touch-event

我在获取被触摸点的颜色时遇到了一个奇怪的问题。我创建了一个图像（.bmp）并用油漆罐填充它。没有渐变或其他颜色。大多数情况下，当我触摸屏幕时，我会得到我期望的颜色，但有时我会得到稍微不同的颜色。我的代码看起来很简单：

```
 final Bitmap bm2 = BitmapFactory.decodeFile(image_overlay);
 if (bm2!=null) {
    overlayimage.setImageBitmap(bm2);
    image.setOnTouchListener(new OnTouchListener() {

        @Override
        public boolean onTouch(View v, MotionEvent mev) {
            Log.d(MY_DEBUG_TAG, "onTouch()");
            DecodeActionDownEvent(v, mev, bm2);
            return false;
        }
    });
 }

 private void DecodeActionDownEvent(View v, MotionEvent ev, Bitmap bm2)
 {
    Log.d(MY_DEBUG_TAG, "DecodeActionDownEvent()");
    xCoord = new Integer((int)ev.getRawX());
    yCoord = new Integer((int)ev.getRawY());
    colorTouched = bm2.getPixel(xCoord, yCoord);
    Log.d(MY_DEBUG_TAG, "The coordinates touched were x: " + xCoord + "; y: " + yCoord);
    Log.d(MY_DEBUG_TAG, "The color touched was (hex) " + Integer.toHexString(colorTouched));
 } 
```

最近我遇到了一个“失误”，并通过移动吸管工具检查图像的坐标，直到它位于准确的位置，并且该像素与该区域中的其他像素没有什么不同。

期望android返回确切的颜色不是“安全”的吗？如果我用#ff424542 绘制一个目标，假设如果我击中那个目标，我会得到一个#ff424542 的像素颜色，这不安全吗？在这种情况下，android 正在返回 #ff4a454a。附加图像是我的“image_overlay”文件。我瞄准的区域是右中部的深灰色。就像我说的，大多数时候它工作得很好，但每隔一段时间我就会记录一次失误，即使我清楚地处于目标区域。根据我的日志，最近的失误是 x:360, y:399 和 x:368, y:399。成功命中在 x:363, y:393 和 x:365, y434。

![image_overlay](../Images/e5d07284d4e2b071aed8870c4fd26f0f.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-18T20:49:28.540

我猜您是在 PC 上的应用程序中使用吸管工具，您在哪里生成了图像？然后，您假设您在 Android 中使用的图像与您在 PC 上使用的图像相同。然而，这不是一个安全的假设。您的源位图的属性是什么，例如分辨率、DPI 等。然后看看 Bitmap.decodeFile。线索在“解码”中。默认情况下（因此关于位图属性的问题），Android 不会简单地从文件说明符中读取位图并将其加载到内存中。例如，如果不深入研究源代码，我不确定，也许 decodeFile 正在抖动生成的位图。

您应该使用 BitmapFactoryOptions 来控制输入位图的解码方式：

[http://developer.android.com/reference/android/graphics/BitmapFactory.Options.html](http://developer.android.com/reference/android/graphics/BitmapFactory.Options.html)

# spring - 使用 Spring Security 修改基本身份验证流程？

> ID：11090391
> 
> 赞同：1
> 
> 时间：2012-06-18T20:17:04.200
> 
> 标签：spring, grails, spring-security, basic-authentication

现在，我正在使用具有以下配置的 grails spring 安全插件：

```
grails.plugins.springsecurity.useBasicAuth = true
grails.plugins.springsecurity.basic.realmName = "MyApp" 
```

这对于基本身份验证非常有用，但我还需要通过依赖于 cookie 的单独服务来允许和管理身份验证。如何连接到 Spring Security 插件以允许自定义服务端点身份验证*或*基本身份验证？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-07-10T14:14:22.100

Grails Spring Security Core 文档提供了一个完全符合您要求的示例：http: [//grails-plugins.github.io/grails-spring-security-core/docs/manual/guide/9%20Authentication.html#9.1% 20基本%20和%20摘要%20身份验证](http://grails-plugins.github.io/grails-spring-security-core/docs/manual/guide/9%20Authentication.html#9.1%20Basic%20and%20Digest%20Authentication)

```
grails.plugins.springsecurity.filterChain.chainMap = [
    '/api/**': 'JOINED_FILTERS,-exceptionTranslationFilter',
    '/**': 'JOINED_FILTERS,-basicAuthenticationFilter,-basicExceptionTranslationFilter'
] 
```

这基本上将基本身份验证保留在 API 端点上，同时为其他所有内容保留传统身份验证。

# java - Log4j 和 Jboss。如何让我的 log.Debug("Debug") 消息显示？

> ID：11090394
> 
> 赞同：2
> 
> 时间：2012-06-18T20:17:17.487
> 
> 标签：java, jboss, log4j

我正在尝试启动我的 jBoss 服务器 (v4.2) 以运行并显示我的所有 log.debug 消息。我需要通过编辑 jboss 配置来实现这一点。*不是*通过应用程序以编程方式。

**我的 jboss-log4.xml**

```
<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE log4j:configuration SYSTEM "log4j.dtd">

<!-- ===================================================================== -->
<!--                                                                       -->
<!--  Log4j Configuration                                                  -->
<!--                                                                       -->
<!-- ===================================================================== -->

<!-- $Id: jboss-log4j.xml 62403 2007-04-18 15:26:43Z dimitris@jboss.org $ -->

<!--
   | For more configuration infromation and examples see the Jakarta Log4j
   | owebsite: http://jakarta.apache.org/log4j
 -->

<log4j:configuration xmlns:log4j="http://jakarta.apache.org/log4j/" debug="false">

   <!-- ================================= -->
   <!-- Preserve messages in a local file -->
   <!-- ================================= -->

   <!-- A time/date based rolling appender -->
   <appender name="FILE" class="org.jboss.logging.appender.DailyRollingFileAppender">
      <errorHandler class="org.jboss.logging.util.OnlyOnceErrorHandler"/>
      <param name="File" value="${jboss.server.log.dir}/server.log"/>
      <param name="Append" value="false"/>

      <!-- Rollover at midnight each day -->
      <param name="DatePattern" value="'.'yyyy-MM-dd"/>

      <!-- Rollover at the top of each hour
      <param name="DatePattern" value="'.'yyyy-MM-dd-HH"/>
      -->

      <layout class="org.apache.log4j.PatternLayout">
         <!-- The default pattern: Date Priority [Category] Message\n -->
         <param name="ConversionPattern" value="%d %-5p [%c] %m%n"/>

         <!-- The full pattern: Date MS Priority [Category] (Thread:NDC) Message\n
         <param name="ConversionPattern" value="%d %-5r %-5p [%c] (%t:%x) %m%n"/>
          -->
      </layout>
   </appender>

   <!-- A size based file rolling appender
   <appender name="FILE" class="org.jboss.logging.appender.RollingFileAppender">
     <errorHandler class="org.jboss.logging.util.OnlyOnceErrorHandler"/>
     <param name="File" value="${jboss.server.log.dir}/server.log"/>
     <param name="Append" value="false"/>
     <param name="MaxFileSize" value="500KB"/>
     <param name="MaxBackupIndex" value="1"/>

     <layout class="org.apache.log4j.PatternLayout">
       <param name="ConversionPattern" value="%d %-5p [%c] %m%n"/>
     </layout>      
   </appender>
   -->

   <!-- ============================== -->
   <!-- Append messages to the console -->
   <!-- ============================== -->

   <appender name="CONSOLE" class="org.apache.log4j.ConsoleAppender">
      <errorHandler class="org.jboss.logging.util.OnlyOnceErrorHandler"/>
      <param name="Target" value="System.out"/>
      <param name="Threshold" value="DEBUG"/>

      <layout class="org.apache.log4j.PatternLayout">
         <!-- The default pattern: Date Priority [Category] Message\n -->
         <param name="ConversionPattern" value="%d{ABSOLUTE} %-5p [%c{1}] %m%n"/>
      </layout>
   </appender>

   <!-- ====================== -->
   <!-- More Appender examples -->
   <!-- ====================== -->

   <!-- Buffer events and log them asynchronously
   <appender name="ASYNC" class="org.apache.log4j.AsyncAppender">
     <errorHandler class="org.jboss.logging.util.OnlyOnceErrorHandler"/>
     <appender-ref ref="FILE"/>
     <appender-ref ref="CONSOLE"/>
     <appender-ref ref="SMTP"/>
   </appender>
   -->

   <!-- EMail events to an administrator
   <appender name="SMTP" class="org.apache.log4j.net.SMTPAppender">
     <errorHandler class="org.jboss.logging.util.OnlyOnceErrorHandler"/>
     <param name="Threshold" value="ERROR"/>
     <param name="To" value="admin@myhost.domain.com"/>
     <param name="From" value="nobody@myhost.domain.com"/>
     <param name="Subject" value="JBoss Sever Errors"/>
     <param name="SMTPHost" value="localhost"/>
     <param name="BufferSize" value="10"/>
     <layout class="org.apache.log4j.PatternLayout">
       <param name="ConversionPattern" value="[%d{ABSOLUTE},%c{1}] %m%n"/>
     </layout>
   </appender>
   -->

   <!-- Syslog events
   <appender name="SYSLOG" class="org.apache.log4j.net.SyslogAppender">
     <errorHandler class="org.jboss.logging.util.OnlyOnceErrorHandler"/>
     <param name="Facility" value="LOCAL7"/>
     <param name="FacilityPrinting" value="true"/>
     <param name="SyslogHost" value="localhost"/>
     <layout class="org.apache.log4j.PatternLayout">
       <param name="ConversionPattern" value="[%d{ABSOLUTE},%c{1}] %m%n"/>
     </layout>
   </appender>
   -->

   <!-- Log events to JMS (requires a topic to be created)
   <appender name="JMS" class="org.apache.log4j.net.JMSAppender">
     <errorHandler class="org.jboss.logging.util.OnlyOnceErrorHandler"/>
     <param name="Threshold" value="ERROR"/>
     <param name="TopicConnectionFactoryBindingName" value="java:/ConnectionFactory"/>
     <param name="TopicBindingName" value="topic/MyErrorsTopic"/>
   </appender>
   -->

   <!-- Log events through SNMP
   <appender name="TRAP_LOG" class="org.apache.log4j.ext.SNMPTrapAppender">
     <errorHandler class="org.jboss.logging.util.OnlyOnceErrorHandler"/>
     <param name="ImplementationClassName" value="org.apache.log4j.ext.JoeSNMPTrapSender"/>
     <param name="ManagementHost" value="127.0.0.1"/>
     <param name="ManagementHostTrapListenPort" value="162"/>
     <param name="EnterpriseOID" value="1.3.6.1.4.1.24.0"/>
     <param name="LocalIPAddress" value="127.0.0.1"/>
     <param name="LocalTrapSendPort" value="161"/>
     <param name="GenericTrapType" value="6"/>
     <param name="SpecificTrapType" value="12345678"/>
     <param name="CommunityString" value="public"/>
     <param name="ForwardStackTraceWithTrap" value="true"/>
     <param name="Threshold" value="DEBUG"/>
     <param name="ApplicationTrapOID" value="1.3.6.1.4.1.24.12.10.22.64"/>
     <layout class="org.apache.log4j.PatternLayout">
            <param name="ConversionPattern" value="%d,%p,[%t],[%c],%m%n"/>
     </layout>
   </appender>
   -->

   <!--  Emit events as JMX notifications
   <appender name="JMX" class="org.jboss.monitor.services.JMXNotificationAppender">
      <errorHandler class="org.jboss.logging.util.OnlyOnceErrorHandler"/>

      <param name="Threshold" value="WARN"/>
      <param name="ObjectName" value="jboss.system:service=Logging,type=JMXNotificationAppender"/>

      <layout class="org.apache.log4j.PatternLayout">
         <param name="ConversionPattern" value="%d %-5p [%c] %m"/>
      </layout>
   </appender>
   -->

   <!-- ================ -->
   <!-- Limit categories -->
   <!-- ================ -->

   <!-- Limit the org.apache category to INFO as its DEBUG is verbose -->
   <category name="org.apache">
      <priority value="DEBUG"/>
   </category>

   <!-- Limit the org.jboss.serial (jboss-serialization) to INFO as its DEBUG is verbose -->
   <category name="org.jboss.serial">
      <priority value="DEBUG"/>
   </category>

   <!-- Limit the org.jgroups category to WARN as its INFO is verbose -->
   <category name="org.jgroups">
      <priority value="DEBUG"/>
   </category>

   <!-- Limit the jacorb category to WARN as its INFO is verbose -->
   <category name="jacorb">
      <priority value="DEBUG"/>
   </category>

   <!-- Limit JBoss categories -->
   <category name="org.jboss">
      <priority value="DEBUG"/>
   </category>

   <!-- Limit the JSR77 categories -->
   <category name="org.jboss.management">
      <priority value="DEBUG"/>
   </category>

   <!-- Enable JBossWS message tracing -->
   <category name="jbossws.SOAPMessage">
    <priority value="TRACE"/>
   </category>

   <!-- Decrease the priority threshold for the org.jboss.varia category
   <category name="org.jboss.varia">
     <priority value="DEBUG"/>
   </category>
   -->

   <!-- Show the evolution of the DataSource pool in the logs [inUse/Available/Max]
   <category name="org.jboss.resource.connectionmanager.JBossManagedConnectionPool">
     <priority value="TRACE"/>
   </category>
   -->

   <!--
      | An example of enabling the custom TRACE level priority that is used
      | by the JBoss internals to diagnose low level details. This example
      | turns on TRACE level msgs for the org.jboss.ejb.plugins package and its
      | subpackages. This will produce A LOT of logging output.
      |
      | Note: since jboss AS 4.2.x, the trace level is supported natively by
      | log4j, so although the custom org.jboss.logging.XLevel priority will
      | still work, there is no need to use it. The two examples that follow
      | will both enable trace logging.
   <category name="org.jboss.system">
     <priority value="TRACE" class="org.jboss.logging.XLevel"/>
   </category>
   <category name="org.jboss.ejb.plugins">
     <priority value="TRACE"/>
   </category>
   -->

   <!--
       | Logs these events to SNMP:
           - server starts/stops
           - cluster evolution (node death/startup)
           - When an EJB archive is deployed (and associated verified messages)
           - When an EAR archive is deployed

   <category name="org.jboss.system.server.Server">
     <priority value="INFO" />
     <appender-ref ref="TRAP_LOG"/>
   </category>

   <category name="org.jboss.ha.framework.interfaces.HAPartition.lifecycle">
     <priority value="INFO" />
     <appender-ref ref="TRAP_LOG"/>
   </category>

   <category name="org.jboss.deployment.MainDeployer">
     <priority value="ERROR" />
     <appender-ref ref="TRAP_LOG"/>
   </category>

   <category name="org.jboss.ejb.EJBDeployer">
     <priority value="INFO" />
     <appender-ref ref="TRAP_LOG"/>
   </category>

   <category name="org.jboss.deployment.EARDeployer">
     <priority value="INFO" />
     <appender-ref ref="TRAP_LOG"/>
   </category>

   -->

   <!-- ======================= -->
   <!-- Setup the Root category -->
   <!-- ======================= -->

   <root>
      <appender-ref ref="CONSOLE"/>
      <appender-ref ref="FILE"/>
   </root>

   <!-- Clustering logging -->
   <!-- Uncomment the following to redirect the org.jgroups and
      org.jboss.ha categories to a cluster.log file.

   <appender name="CLUSTER" class="org.jboss.logging.appender.RollingFileAppender">
     <errorHandler class="org.jboss.logging.util.OnlyOnceErrorHandler"/>
     <param name="File" value="${jboss.server.log.dir}/cluster.log"/>
     <param name="Append" value="false"/>
     <param name="MaxFileSize" value="500KB"/>
     <param name="MaxBackupIndex" value="1"/>

     <layout class="org.apache.log4j.PatternLayout">
       <param name="ConversionPattern" value="%d %-5p [%c] %m%n"/>
     </layout>
   </appender>
   <category name="org.jgroups">
     <priority value="DEBUG" />
     <appender-ref ref="CLUSTER"/>
   </category>
   <category name="org.jboss.ha">
     <priority value="DEBUG" />
     <appender-ref ref="CLUSTER"/>
   </category>
   -->

</log4j:configuration> 
```

**我正在测试的页面**

```
private static final Logger log = Logger.getLogger(ServerLogsController.class
  .getName());

@GET
  @Path("/testDebug")
  public String testDebug(@Context final ServletContext context)
  {
    log.error("This is an error which always shows!");
    log.debug("This is a debug message");

    return "Test Debug Page";
  } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-18T21:13:04.963

There's two ways I can think of to get the debug messages to show here:

**1) You can add a new entry in your xml file for ServerLogsController to display `DEBUG` messages.**

```
<category name="package.for.ServerLogsController">
    <priority value="DEBUG" />
    <appender-ref ref="CONSOLE"/>
    <appender-ref ref="FILE"/>
</category> 
```

where you replace `package.for.ServerLogsController` with the correct package name. Note that you can also set that to just `package.for` and all files under that directory will log @ `DEBUG` level. This setting will override the root behavior mentioned in the second bullet (i.e. if root is set to `DEBUG` but `package.for.ServerLogsController` is set to `ERROR`, you will not see `DEBUG` messages from `package.for.ServerLogsController`.

**2) Set debugging on the root package**

```
<root>
    <priority value="DEBUG"/>
    <appender-ref ref="CONSOLE"/>
    <appender-ref ref="FILE"/>
</root> 
```

This will make all packages log at `DEBUG` level unless specifically overriden by a package.

# iphone - iOS UILocalNotification 不更新应用程序图标

> ID：11090398
> 
> 赞同：1
> 
> 时间：2012-06-18T20:17:36.080
> 
> 标签：iphone, ios, xcode, icons, uilocalnotification

首先，我真的很感谢你的帮助。

我只需要一点帮助。

我完成了我的应用程序，并使用 UILocalNotifications 来触发一些提醒。应用程序图标始终带有“1”，表示应用程序上有 1 个新通知，但它永远都是这样，即使没有通知。我怎样才能解决这个问题？

其他细节，当用户在 iPhone 触发通知时滑动应用程序图标时（当 iPhone 被锁定或应用程序在后台时在应用程序之外），我希望应用程序在主视图中加载。是否可以？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-18T20:29:09.193

您可以根据需要在应用程序委托代码中的 didFinishLaunchingWithOptions 和 didReceiveLocalNotification: 中重置徽章编号。IE

```
 [[UIApplication sharedApplication] setApplicationIconBadgeNumber: 0]; 
```

我不明白你的第二个问题。如果您想根据它的启动方式更改它显示的视图，那么您可以这样做，这将再次出现在 didFinishLaunchingWithOptions 或 didReceiveLocalNotification 中。

# php - 如何生成用于 Web 应用程序的临时电子邮件？

> ID：11090400
> 
> 赞同：2
> 
> 时间：2012-06-18T20:17:46.970
> 
> 标签：php, web-applications

**示例：**如果我想通过电子邮件将视频上传到某个视频服务网站（例如 Youtube），我可以将视频发送到电子邮件地址（例如`1234567890@upload.youtube.com`）。该数字是一个上传代码 - 它是一个唯一的数字，并且每次都会更改。然后 Youtube 会自动处理和上传我的视频。

他们是如何创建电子邮件地址的`1234567890@upload.youtube.com`，他们是如何处理用户提交的电子邮件的？

我正在寻找这种网络应用程序背后的基本功能。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-18T20:25:56.777

我从来没有这样做过，但我对如何做到这一点有一个基本的了解。`upload.youtube.com`无论收件人是谁，都有一个邮件服务器在等待任何电子邮件。

一旦它收到一条消息，它将把它传送到一个脚本，该脚本可以解析它并获取收件人地址（这是上传者的唯一标识符）。

然后它将在电子邮件中查找附件并获取 MIME 代码，对其进行 base64 解码，然后将其写入磁盘上的文件。

然后它将在数据库中添加一个条目，其中包含用户的唯一标识符以及指向该上传内容的链接。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-18T20:25:51.713

如果您使用 cPanel，您可以使用[http://www.zubrag.com/scripts/cpanel-create-email-account.php](http://www.zubrag.com/scripts/cpanel-create-email-account.php)之类的东西来创建电子邮件帐户（使用您自己的例程来生成唯一的用户名等），那么您可以使用[http://garrettstjohn.com/entry/extracting-attachments-from-emails-with-php/](http://garrettstjohn.com/entry/extracting-attachments-from-emails-with-php/)之类的脚本从电子邮件中获取附件。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-20T07:38:35.973

终于，我明白了我想要什么。

我所要做的就是在我的网络控制面板上处理所有电子邮件。就我而言，我只是创建一个新的子域并在该子域上设置一个包罗万象的电子邮件选项。

您可以在 Cpanel 中轻松完成以上所有操作 - 只需创建一个子域并选择一个单选框`Pipe to a Program`并填写您的应用程序路径。就是这样！

不幸的是，我使用的是 DirectAdmin。我要做的比Cpanel更复杂。它也可以处理包罗万象的电子邮件，但我必须首先将通配符 dns 用于我的子域记录。

另外，我发现这篇关于如何通过管道/发送电子邮件到 PHP 脚本的有用[文章。](http://harrybailey.com/2009/02/send-or-pipe-an-email-to-a-php-script/ "管道/发送电子邮件到 PHP 脚本")本文将向您展示每个步骤，包括用于电子邮件管道的 PHP 脚本。

谢谢大家的回答。这很有帮助。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-09-28T03:44:59.567

很高兴知道您已经实现了这一目标。

我在这里向您介绍一个可以帮助您的脚本。该脚本使用 PHP 处理动态电子邮件地址。[您可以在github](https://github.com/harshitpeer/TMail-Lite)上查看该脚本，并且该软件有一个高级版本，您可以[在此处](https://etempmail.net/) 查看演示。您可以从[codecanyon](https://codecanyon.net/item/tmail-multi-domain-temporary-email-system/20177819)购买脚本。

# r - 面板数据的事件时间

> ID：11090404
> 
> 赞同：0
> 
> 时间：2012-06-18T20:17:57.160
> 
> 标签：r, data-manipulation

我有一个国家年份的面板数据集。我想计算事件发生后的时间，以及每个国家/地区的事件总数，我可以随着时间的推移而衰减。我正在使用包`timeSinceEvent`中的函数`doBy`，它返回一个具有我想要的值的数据框，但我无法将它应用于我的主 df。

```
structure(list(ccode.a = c(2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 
2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 
2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 20L, 20L, 20L, 20L, 20L, 
20L, 20L, 20L, 20L, 20L, 20L, 20L, 20L, 20L, 20L, 20L, 20L, 20L, 
20L, 20L, 20L, 20L, 20L, 20L, 20L, 20L, 20L, 20L, 20L, 20L, 20L, 
20L, 20L, 20L, 31L, 31L, 31L, 31L, 31L, 31L, 31L, 31L, 31L, 31L, 
31L, 31L, 31L, 31L, 31L, 31L, 31L, 31L, 31L, 31L, 31L, 31L, 31L, 
31L, 31L, 31L, 31L, 31L, 31L, 31L, 31L, 31L, 31L, 31L, 40L, 40L, 
40L, 40L, 40L, 40L, 40L, 40L, 40L, 40L, 40L, 40L, 40L, 40L, 40L, 
40L, 40L, 40L, 40L, 40L, 40L, 40L, 40L, 40L, 40L, 40L, 40L, 40L, 
40L, 40L, 40L, 40L, 40L, 40L, 41L, 41L, 41L, 41L, 41L, 41L, 41L, 
41L, 41L, 41L, 41L, 41L, 41L, 41L, 41L, 41L, 41L, 41L, 41L, 41L, 
41L, 41L, 41L, 41L, 41L, 41L, 41L, 41L, 41L, 41L, 41L, 41L, 41L, 
41L, 42L, 42L, 42L, 42L, 42L, 42L, 42L, 42L, 42L, 42L, 42L, 42L, 
42L, 42L, 42L, 42L, 42L, 42L, 42L, 42L, 42L, 42L, 42L, 42L, 42L, 
42L, 42L, 42L, 42L, 42L), year = c(1975, 1976, 1977, 1978, 1979, 
1980, 1981, 1982, 1983, 1984, 1985, 1986, 1987, 1988, 1989, 1990, 
1991, 1992, 1993, 1994, 1995, 1996, 1997, 1998, 1999, 2000, 2001, 
2002, 2003, 2004, 2005, 2006, 2007, 2008, 1975, 1976, 1977, 1978, 
1979, 1980, 1981, 1982, 1983, 1984, 1985, 1986, 1987, 1988, 1989, 
1990, 1991, 1992, 1993, 1994, 1995, 1996, 1997, 1998, 1999, 2000, 
2001, 2002, 2003, 2004, 2005, 2006, 2007, 2008, 1975, 1976, 1977, 
1978, 1979, 1980, 1981, 1982, 1983, 1984, 1985, 1986, 1987, 1988, 
1989, 1990, 1991, 1992, 1993, 1994, 1995, 1996, 1997, 1998, 1999, 
2000, 2001, 2002, 2003, 2004, 2005, 2006, 2007, 2008, 1975, 1976, 
1977, 1978, 1979, 1980, 1981, 1982, 1983, 1984, 1985, 1986, 1987, 
1988, 1989, 1990, 1991, 1992, 1993, 1994, 1995, 1996, 1997, 1998, 
1999, 2000, 2001, 2002, 2003, 2004, 2005, 2006, 2007, 2008, 1975, 
1976, 1977, 1978, 1979, 1980, 1981, 1982, 1983, 1984, 1985, 1986, 
1987, 1988, 1989, 1990, 1991, 1992, 1993, 1994, 1995, 1996, 1997, 
1998, 1999, 2000, 2001, 2002, 2003, 2004, 2005, 2006, 2007, 2008, 
1975, 1976, 1977, 1978, 1979, 1980, 1981, 1982, 1983, 1984, 1985, 
1986, 1987, 1988, 1989, 1990, 1991, 1992, 1993, 1994, 1995, 1996, 
1997, 1998, 1999, 2000, 2001, 2002, 2003, 2004), onset.a = c(0, 
0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 
0, 0, 0, 0, 1, 1, 0, 1, 1, 1, 1, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 
0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 
0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 
0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 
0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 
0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 
0, 0, 1, 0, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 0, 0, 0, 
0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 
0, 0, 0, 0, 0, 0, 0, 0, 0, 0)), .Names = c("ccode.a", "year", 
"onset.a"), row.names = c(NA, 200L), class = "data.frame") 
```

我试过用这个：

```
last.step <- function(x) {
  temp <- timeSinceEvent(x$onset.a, x$year)
  cbind(x[,1],temp) #timeSinceEvent cuts off the country ID
}
result <- do.call("rbind", by(data, data$ccode.a, last.step)) 
```

也

```
test <- by(data, data$ccode.a, function(x) timeSinceEvent(data$onset.a, data$year)) 
```

收效甚微。我逐步完成了该功能，它似乎正在做我想做的事，但我想我调用它的方式有问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-18T22:23:43.830

在我看来，问题只是没有事件`ccode.a==20`，因此在应用于该子集时会`timeSinceEvent`返回。`NULL`这意味着`last.step`为两个 s 返回不同维度的数据帧，`ccode.a`因此`rbind`失败。

不完全是一个解决方案，但也许更好地了解问题所在已经有所帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-18T22:52:44.303

由于有空列，您应该`rbind.fill()`在`plyr`. 它将用 na 填充空的列

```
last.step <- function(x) {
  temp <- timeSinceEvent(x$onset.a, x$year)
  cbind(x[,1],temp) #timeSinceEvent cuts off the country ID
}
result <- do.call(rbind.fill, by(data, data$ccode.a, last.step)) 
```

然而，这不会返回“空” `lists`，即只有 x[,1] 的那个。它只会`rbind`那些`lists`有`data.frame`里面的人。我不知道这是否是预期的行为和/或您想要的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-20T01:36:44.043

最终不得不`timeSinceEvent`在`doBy`包中进行一些修改。这是有效的最终代码。感谢 lselzer 指出`rbind.fill`in`plyr`和 RoyalTS 指出当参数全为零时`timeSinceEvent`返回。`null``yvar`

```
panel.tse <- function(yvar, tvar = seq_along(yvar)){
   if (!(is.numeric(yvar) | is.logical(yvar))){
        stop("yvar must be either numeric or logical")
    }
   yvar[is.na(yvar)] <- 0
   event.idx <- which(yvar == 1)
   run <- cumsum(yvar)
   un <- unique(run)
   tlist <- list()
   for (i in 1:length(un)){
     v <- un[[i]]
     y <- yvar[run == v]
     t <- tvar[run == v]
     t <- t - t[1]
     tlist[[i]] <- t
   }
   timeAfterEvent <- unlist(tlist)
   timeAfterEvent[run == 0] <- NA
   run[run == 0] <- NA
   ans <- cbind(data.frame(yvar = yvar, tvar = tvar), run, tae = timeAfterEvent)
   return(ans)
 }

last.step <- function(x) {
  temp <- panel.tse(x$onset.a, x$year)
  cbind(x[,1],temp) 
}

result <- do.call(rbind.fill, by(data, data$ccode.a, last.step)) 
```

# css - 垂直和水平居中对齐 div

> ID：11090406
> 
> 赞同：1
> 
> 时间：2012-06-18T20:18:03.940
> 
> 标签：css, html, alignment

我有以下代码

```
<div id="main">
    <div id="one"> </div>
    <div id="two"> </div>
    <div id="three"> </div>
    <div id="four"> </div>
</div> 
```

我需要如下对齐中间的 4 个 div，在每一侧保持相等的空间（顶部空间 = 底部空间和右侧空间 = 左侧空间）：

```
______________________________________
|                                    |
|         ________  ________         |
|        |        ||        |        |
|        |  one   ||   two  |        |
|        |        ||        |        |
|        |________||________|        |
|         ________  ________         |
|        |        ||        |        |
|        | three  ||  four  |        |
|        |        ||        |        |
|        |________||________|        |
|                                    |
|____________________________________| 
```

四个 div 等距，请任何人都可以在这里帮我解决任何 css 片段吗？我也确实看到了很多关于这个的问题，但无法解决这个问题。有人可以指出任何有用的链接来完美地解释与 div 对齐相关的所有概念吗？

（伙计们，我知道这将是重复的，但请帮忙，因为我只是通过谷歌搜索来回走动。）

提前致谢 ：）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-18T20:27:04.283

这是一种适用于所有现代浏览器的方法，包括 IE8：**[jsFiddle 示例](http://jsfiddle.net/j08691/6p2Tf/)**。

**HTML**

```
<div id="main">
    <div id="one"></div>
    <div id="two"></div><br />
    <div id="three"></div>
    <div id="four"></div>
</div>​ 
```

**CSS**

```
div {
    border:1px solid #999;
}
#main {
    width:400px;
    height:400px;
    display:table-cell;
    vertical-align:middle;
    text-align:center;
}
#one,#two,#three,#four{
    width:100px;
    height:100px;   
    display:inline-block;    
} 
```

请注意，我确实必须在`<br />`您的代码中添加一个中断标记 ( )。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-18T20:31:02.660

@j08691 有一个很好的例子。但如果有用的话，这里是我的……

```
<html>
<body>

<div style="width: 960px; margin: 0 auto;">

    <div>
        <div style="width: 480px; float: left;">
            <div style="padding: 10px; border: 1px solid #F00;">
                1
            </div>
        </div>
        <div style="width: 480px; float: left;">
            <div style="padding: 10px; border: 1px solid #F00;">
                2
            </div>
        </div>
    </div>

    <div>
        <div style="width: 480px; float: left;">
            <div style="padding: 10px; border: 1px solid #F00;">
                3
            </div>
        </div>
        <div style="width: 480px; float: left;">
            <div style="padding: 10px; border: 1px solid #F00;">
                4
            </div>
        <div>
    </div>

</div>

</body>
</html> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-18T21:41:04.893

水平居中是很容易的部分，但是有一个巧妙的技巧可以使用绝对定位和负边距使事物垂直对齐。[**这是我几年前写的一个工作示例**](http://www.mackie.com/products/hrmk2series/cutaway/diagram.html)。

这是一些代码和解释：

```
<div id="main">
    <div id="one"></div>
    <div id="two"></div>
    <div id="three"></div>
    <div id="four"></div>    
</div> 
```

CSS

```
#main {
    position: absolute;
    top: 50%;  /* gets the first pixel in the center of the browser */  
    left: 50%;
    height: 860px;
    width: 860px;
    margin-top: -430px; /* negative margin half the height of the div to make it appear center */  
    margin-left: -430px;
    border: solid 1px #000;
    overflow: visible; /* allows an absolutely positioned element to contain floats */ 
    }
#one, #two, #three, #four { 
    float: left;
    height: 400px; 
    width: 400px;
    background-color: blue;
    margin: 20px; 
    }
#one, #three { 
     margin-right: 0; 
     }
#one, #two {  
    margin-top: 20px;  
    margin-bottom: 0;  
    } 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-18T20:32:18.173

我的答案略有不同（但@j08691 有一个很好的解决方案），

```
#main{
    position:absolute;
    top:50%;
    left:50%;

    width:100px;
    height:100px;
    margin:auto;
}

#one, #two, #three, four{
    float:left;
    width:50px;
    height:50px;
} 
```

我测试过的完整工作代码是，

```
 <html>
<head>

<style media="screen" type="text/css">

#main{
    position:absolute;
    top:50%;
    left:50%;

    width:100px;
    height:100px;
    margin:auto;
}

#one, #two, #three, four{
    float:left;
    width:50px;
    height:50px;
}

.box{
    float:left;
    width:50px;
    height:50px;
}

#one{
    background-color:#f00;
}
#two{
    background-color:#0f0;
}
#three{
    background-color:#00f;
}
#four{
    background-color:#000;
}

</style>
</head>
<body>
<div id="main">
    <div id="one" class="box"> </div>
    <div id="two" class="box"> </div>
    <div id="three" class="box"> </div>
    <div id="four"class="box" > </div>
</div>
</body>
</html> 
```

# vb.net - PDF 在 Acrobat X 中打开，但在 VB.NET 中不能以编程方式打开

> ID：11090408
> 
> 赞同：0
> 
> 时间：2012-06-18T20:18:13.073
> 
> 标签：vb.net, pdf

我在 VB.NET 中编写了一个与第 3 方 Web 服务的接口。该界面的最后一步涉及第三方向我们（作为流）交付 PDF 文档。流式传输完成后，我将 PDF 的副本保存在我们的服务器上，以便我们的用户可以通过单击我们系统中的链接来查看 PDF。PDF 在 Acrobat X 中可以正常打开，但是当我尝试以编程方式打开它时，出现错误提示“文件已损坏且无法修复”。我也可以在 IE 中很好地打开文件，没有任何问题，并且显示此 PDF 的相同代码在许多其他现有 PDF 上运行得很好，这些 PDF 早于第 3 方界面。

按照我在网上看到的一些帖子中的建议，我已经清空了临时 Internet 文件。我还在 Notepad++ 中打开了 PDF，%PDF 标记位于第一位，%%EOF 标记位于最后，因此我可以看到的文档源中肯定没有可见的损坏。以下是我们用来在我们网站上的单独浏览器实例中打开 PDF 的（非常标准的）代码：

```
PDFFile = System.AppDomain.CurrentDomain.BaseDirectory & Request.QueryString("LetterPath") & Request.QueryString("Letter") 
Response.Clear()
Response.ClearHeaders()
Response.BufferOutput = True
Response.ContentType = "application/pdf"
Response.WriteFile(PDFFile)
Response.Flush() 
```

有人处理过这个问题或有任何想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-21T16:11:51.120

添加一个`Response.End()`应该做到这一点。

# marklogic - xdmp：MarkLogic 中的调用调用

> ID：11090415
> 
> 赞同：2
> 
> 时间：2012-06-18T20:18:51.510
> 
> 标签：marklogic

如果我们`xquery`第一次调用某个模块需要一些时间。随后的调用调用更快可能是因为`xquery`模块被解析并存在于模块缓存中。

考虑以下情况：-

```
HTTP Server1- xdmp:invoke('/a/sample.xqy')   
HTTP Server2 - xdmp:invoke('/a/sample.xqy') 
```

两个应用服务器都指向相同的 Modules DB。

问题 ：-

1.  为什么后续调用更快？

2.  但是，如果我们在 diff app server 中调用相同的模块，则调用会很慢。出于缓存目的，这个 xquery 模块是否会被视为基于 appserver 的单独对象？

3.  MarkLogic 如何决定将哪个条目移出模块缓存？

4.  MarkLogic 在`xdmp:invoke`调用后将模块保存在缓存中多长时间？

5.  是否有任何 ML 配置来增加模块缓存大小？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-18T22:32:35.953

1.  缓存 - 但我想你知道吗？
2.  听起来你已经证明了这一点。这是有道理的：不同的应用程序服务器可能具有可能影响评估的不同配置：例如，命名空间和模式，以及可能的输出选项。因此，将 app-server id 构建到缓存键中可能更简单。
3.  我相信这是一个 LRU 缓存。我不知道它有多大。
4.  直到它用完空间，或者缓存条目因更新而失效。
5.  据我所知不是。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-19T00:13:17.443

查询是否触及数据库中的数据？如果是这样，对同一查询的后续调用可以在第二次调用时访问 E 节点中的扩展树缓存。

第二次调用快多少？上次我测量它时，与大多数 I/O 解决方案的查找时间相比，查询评估时间的差异很小。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-03-23T12:20:36.513

**1.缓存**：- 有三种缓存-扩展树，压缩树，列表。扩展树存储最近使用的一种然后压缩然后列表。ML 文档很好地解释了它。

**2.**如果第二个应用服务器在同一个组中，那么理想情况下它不应该花费更多时间。如果它在不同的组中，则需要时间。因为缓存是在组级别完成的。

**3.**最近使用的将在扩展树缓存中，最近最少使用的将在列表缓存中。最近未使用的将从缓存中清除。

**4.**参考第三点

**5.**是的，去 Admin--> group-->choose your group ---> configure tab。

# ruby - 使用 JRuby Watir 时出现 HTTP 路径空错误

> ID：11090416
> 
> 赞同：2
> 
> 时间：2012-06-18T20:18:52.770
> 
> 标签：ruby, rubygems, jruby, watir, watir-webdriver

我在我的 Windows 7 机器上安装了 JRuby 1.6.7.2（64 位）和 JDK 1.7.x（64 位）。现在，我只是尝试使用 Watir 启动浏览器（Firefox 13.0），但我不断收到一个似乎来自 JRuby + gems 内部的 HTTP 错误。我已经使用以下命令安装了 gem：

```
jgem install watir-webdriver
jgem install rspec
jgem install capybara
jgem install page-object
jgem install bundler
jgem install jruby-jars 
```

这是我尝试使用 Watir 打开浏览器时遇到的堆栈跟踪错误：

```
C:\Windows\System32>jirb
irb(main):001:0> require 'rubygems'
=> true
irb(main):002:0> require 'watir-webdriver'
=> true
irb(main):003:0> b = Watir::Browser.start("http://www.google.com", :firefox)
[WARNING] MultiJson is using the default adapter (ok_json). We recommend loading
a different JSON library to improve performance.
ArgumentError: HTTP request path is empty
    from C:/Ruby/jruby-1.6.7.2/lib/ruby/1.8/net/http.rb:1476:in `initialize'

    from C:/Ruby/jruby-1.6.7.2/lib/ruby/1.8/net/http.rb:1594:in `initialize'

    from C:/Ruby/jruby-1.6.7.2/lib/ruby/gems/1.8/gems/selenium-webdriver-2.2
    2.2/lib/selenium/webdriver/remote/http/default.rb:64:in `new_request_for'

    from C:/Ruby/jruby-1.6.7.2/lib/ruby/gems/1.8/gems/selenium-webdriver-2.2 
    2.2/lib/selenium/webdriver/remote/http/default.rb:34:in `request'

    from C:/Ruby/jruby-1.6.7.2/lib/ruby/gems/1.8/gems/selenium-webdriver-2.2
    2.2/lib/selenium/webdriver/remote/http/default.rb:57:in `request'

    from C:/Ruby/jruby-1.6.7.2/lib/ruby/gems/1.8/gems/selenium-webdriver-2.2
    2.2/lib/selenium/webdriver/remote/http/common.rb:40:in `call'

    from C:/Ruby/jruby-1.6.7.2/lib/ruby/gems/1.8/gems/selenium-webdriver-2.2
    2.2/lib/selenium/webdriver/remote/bridge.rb:598:in `raw_execute'

    from C:/Ruby/jruby-1.6.7.2/lib/ruby/gems/1.8/gems/selenium-webdriver-2.2
    2.2/lib/selenium/webdriver/remote/bridge.rb:92:in `create_session'

    from C:/Ruby/jruby-1.6.7.2/lib/ruby/gems/1.8/gems/selenium-webdriver-2.2
    2.2/lib/selenium/webdriver/remote/bridge.rb:68:in `initialize'

    from C:/Ruby/jruby-1.6.7.2/lib/ruby/gems/1.8/gems/selenium-webdriver-2.2
    2.2/lib/selenium/webdriver/firefox/bridge.rb:28:in `initialize'

    from C:/Ruby/jruby-1.6.7.2/lib/ruby/gems/1.8/gems/selenium-webdriver-2.2
    2.2/lib/selenium/webdriver/common/driver.rb:31:in `for'

    from C:/Ruby/jruby-1.6.7.2/lib/ruby/gems/1.8/gems/selenium-webdriver-2.2
    2.2/lib/selenium/webdriver.rb:65:in `for'

    from C:/Ruby/jruby-1.6.7.2/lib/ruby/gems/1.8/gems/watir-webdriver-0.6.1/
    lib/watir-webdriver/browser.rb:35:in `initialize'

    from C:/Ruby/jruby-1.6.7.2/lib/ruby/gems/1.8/gems/watir-webdriver-0.6.1/
    lib/watir-webdriver/browser.rb:18:in `start'

    from (irb):3:in `evaluate'
    from org/jruby/RubyKernel.java:1083:in `eval'
    from C:/Ruby/jruby-1.6.7.2/lib/ruby/1.8/irb.rb:158:in `eval_input'
    from C:/Ruby/jruby-1.6.7.2/lib/ruby/1.8/irb.rb:271:in `signal_status'
    from C:/Ruby/jruby-1.6.7.2/lib/ruby/1.8/irb.rb:155:in `eval_input'
    from org/jruby/RubyKernel.java:1410:in `loop'
    from org/jruby/RubyKernel.java:1183:in `catch'
    from C:/Ruby/jruby-1.6.7.2/lib/ruby/1.8/irb.rb:154:in `eval_input'
    from C:/Ruby/jruby-1.6.7.2/lib/ruby/1.8/irb.rb:71:in `start'
    from org/jruby/RubyKernel.java:1183:in `catch'
    from C:/Ruby/jruby-1.6.7.2/lib/ruby/1.8/irb.rb:70:in `start'
    from C:\Ruby\jruby-1.6.7.2\bin\jirb:13:in `(root)'irb(main):004:0> 
```

我已将 selenium webdrivers ie & chrome 添加到我的类路径中。当我使用 ie 或 chrome 执行此命令时，我收到类似的 HTTP 错误。这是我必须手动对 gem 文件进行的修复吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-24T08:48:32.853

我对 Watir-webdriver gem 有同样的错误。问题是 http 代理设置，解决方案是在代码之前添加 no_proxy 环境。

```
ENV['no_proxy'] = "127.0.0.1" 
```

我希望这可以帮助你！

# mysql - mysql触发函数

> ID：11090422
> 
> 赞同：4
> 
> 时间：2012-06-18T20:19:06.320
> 
> 标签：mysql, function, triggers, datatrigger

我有一个名为 lp_upload 的表，它包含汽车的车牌号和其他相关信息：

```
CREATE TABLE `lp_upload` (
`date`  date NULL ,
`plate`  char(10) NULL ,
`site`  int NULL ,
`dateid`  char(20) NULL 
)
; 
```

此表正在从交通摄像头获取信息。但是，有时盘子中的字母无法识别，它将被替换为 $。因此，如果一个盘子确实是 abc123，但相机没有识别出 c 和 1，则进入 table 的将是 ac$23。

我想这样做，当输入一个新盘子并且其中 6 个字母与现有盘子匹配时，它将成为那个盘子。例如：输入 123$5678 并且 12345678 已经存在，那么 123$5678 将被 12345678 替换。

所以我首先写了一个匹配函数：

```
CREATE DEFINER = CURRENT_USER FUNCTION `matchingfun`(`str1` char(10),`str2` char(10))
 RETURNS int

 BEGIN

    DECLARE myindex int DEFAULT 0;
  DECLARE count int DEFAULT 0;
  DECLARE maxlength int;

  SET maxlength = length(str1);
  for_loop: LOOP
    SET myindex = myindex + 1;

    IF maxlength < myindex then 
            RETURN 0;
    END IF;

    IF SUBSTRING(str1,myindex,1)= SUBSTRING(str2,myindex,1)then 
            SET count = count +1;
    END IF;

    IF count > 6 then 
            RETURN 1;
    END IF;

    IF SUBSTRING(str1,myindex,1)!= SUBSTRING(str2,myindex,1) and SUBSTRING(str1,myindex,1)!= '$' and SUBSTRING(str2,myindex,1)!= '$'then 
            RETRUN 0; 
    END IF;

  END LOOP for_loop;
    RETURN 0;
END 
```

我在表中添加了一个触发函数

```
CREATE TRIGGER `trigger1` AFTER INSERT ON `lpr_opt_upload`
BEGIN

     declare old_site_id int;
     declare old_text char(10);

     select lpr_text into old_text from lpr_opt_upload where matchingfun(new.lpr_text, lpr_text) = 1;
     if(old_text is not null) then
     set new.lpr_text = old_text;
     end if;

END 
```

当我运行它时，数据库崩溃。你能帮助解决这个问题或建议一个更好的方法来做到这一点。谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-20T22:10:13.990

我怀疑您遇到的问题是多个匹配项。例如，如果你在数据库中有`abcd01234`and`abcde1234`并尝试插入`abcd$1234`，你会得到一个错误。

现在，我将假设这个应用程序应该匹配来自测速摄像头或红灯摄像头的 OCR 车牌，以便于车主的票务。如果是这种情况，那么您需要谨慎行事，不要让系统自动尝试从多个候选人中挑选，而是让真正的人类查看结果并确认车牌号。

因此，根据该假设进行操作：

```
DELIMITER //
CREATE TRIGGER `attempt_match_existing_plate`
  BEFORE INSERT
  ON `lp_upload`
FOR EACH ROW BEGIN
  DECLARE exist_plate CHAR(10);
  DECLARE rowcount INT;
  SELECT COUNT(*), plate INTO rowcount, exist_plate FROM lp_upload WHERE platematch(NEW.plate, plate) = 1;
  IF (1 = rowcount) AND (exist_plate IS NOT NULL) THEN
    SET NEW.plate = exist_plate;
  END IF;
END
//
DELIMITER ;

DELIMITER //
CREATE DEFINER = CURRENT_USER
  FUNCTION `platematch`(`plate_new` char(10), `plate_exist` char(10))
  RETURNS INT
BEGIN
   DECLARE myindex INT DEFAULT 0;
   DECLARE match_count INT DEFAULT 0;
   DECLARE maxlength INT;
   SET maxlength = length(plate_new);
   for_loop: LOOP
      SET myindex = myindex + 1;
      IF maxlength < myindex THEN 
         RETURN 0;
      END IF;
      IF SUBSTRING(plate_new, myindex, 1) = SUBSTRING(plate_exist, myindex, 1)
      THEN 
         SET match_count = match_count +1;
      END IF;
      IF match_count >= 6 THEN 
         RETURN 1;
      END IF;
      IF  SUBSTRING(plate_new, myindex, 1) != SUBSTRING(plate_exist, myindex, 1)
      AND SUBSTRING(plate_new, myindex, 1) != '$'
      AND SUBSTRING(plate_exist, myindex, 1) != '$'
      THEN
         RETURN 0; 
      END IF;
   END LOOP for_loop;
   RETURN 0;
END
//

DELIMITER ; 
```

在我上面描述的场景中，`abcd$1234`将按原样插入数据库，而不是自动匹配多个潜在结果之一。

# ruby-on-rails - 在 Windows 上将 Rails 部署到 Heroku，postrgres 错误

> ID：11090423
> 
> 赞同：0
> 
> 时间：2012-06-18T20:19:12.560
> 
> 标签：ruby-on-rails, heroku

导轨 3.2.1，红宝石 1.9.3

我可以将我的应用程序推送到 Heroku，但是当我导航到该页面时它失败了。这是来自日志：

“处理请求时出现意外错误：请安装 postgresql 适配器：'gem install activerecord-postgresql-adapter'”

我已经在本地运行了该命令并且它有效。

我正在使用 sqlite3 进行开发，我的 gemfile 如下所示：

```
group :development, :test do
  gem 'sqlite3'
end
group :production do
  gem 'thin'
  gem 'pg'
end 
```

知道我做错了什么/如何解决这个问题吗？谢谢你！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-05T08:33:10.773

I'm getting the same sort of error with the same sort of config.

```
2013-04-05T08:06:12+00:00 app[web.1]: Connecting to database specified by DATABASE_URL
2013-04-05T08:06:12+00:00 app[web.1]: !! Unexpected error while processing request: Please install the postgresql adapte
r: `gem install activerecord-postgresql-adapter` (pg is not part of the bundle. Add it to Gemfile.) 
```

Have found that doing an update to the Gemfile (just adding whitespace) gets around the problem. It's a hassle though since it needs to be done every time any change is done.

# asp.net-mvc-3 - MVC 4 - 将视图模型从视图页面传递到 jQuery 弹出窗口并再次返回

> ID：11090424
> 
> 赞同：0
> 
> 时间：2012-06-18T20:19:15.573
> 
> 标签：asp.net-mvc-3, razor, asp.net-mvc-4

我有一个绑定到视图模型的视图。在那个视图上，我有一个链接，它将弹出一个模态 jquery 对话框（使用部分视图）。

我需要的是能够将模型传递给模型弹出窗口，对其进行更新，然后将其传递回视图页面。

我在我的控制器（部分视图）中加载了带有操作方法的模式弹出窗口。但努力将模型传递给它。

有什么建议么？

提前非常感谢。

**脚本（在查看页面上）：**

```
// ZipLocator modal popup
$(function () {
    $('#ZipLocatorDialog').dialog({
        autoOpen: false,
        width: 400,
        resizable: false,
        draggable: false,
        title: 'hi there',
        modal: true,
        show: { effect: 'blind' },
        open: function (event, ui) {
            // Load the ZipLocator action which will return the partial view _ZipLocator
            $(this).load('@Url.Action("ZipLocator", "Shop", New With { .area = "Shop"})');
        },
        buttons: {
            "Close": function () {
                $(this).dialog('close');
            }
        }
    });

    $('#ZipLocatorOpener').click(function () {
        $('#ZipLocatorDialog').dialog('open');
    });
}); 
```

**部分视图的控制器操作：**

```
<HttpGet()>
    <Compress()>
    Public Function ZipLocator(model As ShopModel) As ActionResult

        Return PartialView("~/Areas/Shop/Views/Shared/Partials/Popups/_ZipLocator.vbhtml", model)

    End Function 
```

正如我所说，jQuery 模态弹出窗口正在工作，我只是很难将我的模型传递给它。

第一步是将模型传递给局部视图（jQuery modal popup）。第二步是在对话框关闭后将更新的模型传回视图。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-19T15:46:46.053

经过一些文档阅读和进一步研究，jQuery UI 对话框有一个数据参数。

```
// ZipLocator modal popup
$(function () {
    $('#ZipLocatorDialog').dialog({
        autoOpen: false,
        width: 400,
        resizable: false,
        draggable: false,
        title: 'hi there',
        modal: true,
        **data: $("#ShopPane").serialize(),**
        show: { effect: 'blind' },
        open: function (event, ui) {
            // Load the ZipLocator action which will return the partial view _ZipLocator
            $(this).load('@Url.Action("ZipLocator", "Shop", New With { .area = "Shop"})');
        },
        buttons: {
            "Close": function () {
                $(this).dialog('close');
            }
        }
    });

    $('#ZipLocatorOpener').click(function () {
        $('#ZipLocatorDialog').dialog('open');
    });
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-18T20:44:50.990

您将需要使用 AJAX POST 将“复杂”模型发送到您的控制器操作 - GET 不起作用（这是`.Load` 正在使用的）。

或者，只修改`ZipLocator`action 方法的参数以使其接受字符串等“简单”对象，然后在 action 方法中实例化复杂对象会更简单。

我不知道 VB 中的等价物，但在 C# 中，您可以像这样修改您的操作：

```
[HttpGet]
public ActionResult(string areaName)
{
   var model = new ShopModel { Area = areaName };
    Return PartialView("~/Areas/Shop/Views/Shared/Partials/Popups/_ZipLocator.vbhtml", model);
} 
```

# set - Jackson：反序列化一个集合？

> ID：11090425
> 
> 赞同：1
> 
> 时间：2012-06-18T20:19:27.283
> 
> 标签：set, jackson

当我尝试反序列化时：

```
{
  "tags": {}
} 
```

进入：

```
public static class Foo
{
    private final Set<URI> tags;

    /**
     * Creates a new Foo entity.
     * <p/>
     * @param tags the room tags
     * @throws NullPointerException if tags is null
     */
    @JsonCreator
    public Foo(@JsonProperty("tags") Set<URI> tags)
    {
        Preconditions.checkNotNull(tags, "tags may not be null");

        this.tags = ImmutableSet.copyOf(tags);
    }

    /**
     * @return the tags
     */
    public Set<URI> getTags()
    {
        return tags;
    }
} 
```

我得到：

```
org.codehaus.jackson.map.JsonMappingException: Can not deserialize instance of java.util.HashSet out of START_OBJECT token
 at [line: 1, column: 2] 
```

这不应该开箱即用吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-18T20:23:39.440

为此，您需要转换为数组：

```
{
  "tags": []
} 
```

如果不是，您将如何使用有效的 JSON 表示标签集中的多个元素？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-10-26T11:56:00.080

我的问题是映射有效负载，请确保：

*   字段相同（有效负载和对象），或者您正确使用 @JsonProperty
*   您需要在对象上创建设置器以框架填充字段

我希望它有帮助

# c - MPI_Isend() 中的 MPI 分段错误

> ID：11090426
> 
> 赞同：5
> 
> 时间：2012-06-18T20:19:28.207
> 
> 标签：c, debugging, segmentation-fault, mpi

我是 MPI 编程的新手！为了实用，我尝试测量处理器之间的点对点通信带宽。但现在我得到一个分段错误！我不明白为什么会这样。我也在 ubuntu 上尝试了 valgrind，但是不知道。所以也许有人可以帮助我：D

> 感谢您的快速响应，但这并没有改变问题:(我刚刚更新了错误！

这里是源代码

```
#include "mpi.h"
#include <stdio.h>
#include <stdlib.h>

int main(int argc, char *argv[]){

 int myrank, size;
 MPI_Init(&argc, &argv);
 MPI_Comm_rank(MPI_COMM_WORLD, &myrank);
 MPI_Comm_size(MPI_COMM_WORLD, &size);

 int *arraySend = (int *)malloc(25000*sizeof(int));
 int *arrayRecv = (int *)malloc(25000*sizeof(int));
 double startTime = 0.0, endTime = 0.0;
 MPI_Status status,statusSend, statusRecv;
 MPI_Request requestSend, requestRecv;

 if(size != 2){
   if(myrank == 0){
       printf("only two processors!\n");
       MPI_Finalize();  
       return 0;
    }
 }

 if(myrank == 0){
     startTime = MPI_Wtime();
     MPI_Send(&arraySend, 25000, MPI_INT, 1, 0,MPI_COMM_WORLD);
 }else{
     MPI_Recv(&arrayRecv, 25000, MPI_INT, 0, 0, MPI_COMM_WORLD, &status);
 } 

 if(myrank == 0){
   endTime = MPI_Wtime();
   printf("100k Bytes blocking: %f Mb/s\n", 0.1/(endTime-startTime));
   startTime = MPI_Wtime();
   MPI_Isend(&arraySend, 25000, MPI_INT, 1, 0, MPI_COMM_WORLD, &requestSend);
   MPI_Wait(&requestSend, &statusSend);
  }else{
   MPI_Irecv(&arrayRecv,25000,MPI_INT,0,0,MPI_COMM_WORLD, &requestRecv);
   MPI_Wait(&requestRecv, &statusRecv);
  }

 if(myrank == 0){
    endTime = MPI_Wtime();
    printf("100k Bytes non-blocking: %f Mb/s\n", 0.1/(endTime-startTime));
 }
 free(arraySend);
 free(arrayRecv);
 MPI_Finalize();
 return 0;
} 
```

在这里错误更新了！

```
$ mpirun -np 2 nr2
[P90:05046] *** Process received signal ***
[P90:05046] Signal: Segmentation fault (11)
[P90:05046] Signal code: Address not mapped (1)
[P90:05046] Failing at address: 0x7fff54fd8000
[P90:05046] [ 0] /lib/x86_64-linux-gnu/libpthread.so.0(+0x10060) [0x7f8474777060]
[P90:05046] [ 1] /lib/x86_64-linux-gnu/libc.so.6(+0x131b99) [0x7f84744f7b99]
[P90:05046] [ 2] /usr/lib/libmpi.so.0(ompi_convertor_pack+0x14d) [0x7f84749c75dd]
[P90:05046] [ 3] /usr/lib/openmpi/lib/openmpi/mca_btl_sm.so(+0x1de8) [0x7f846fe14de8]
[P90:05046] [ 4] /usr/lib/openmpi/lib/openmpi/mca_pml_ob1.so(+0xd97e) [0x7f8470c6c97e]
[P90:05046] [ 5] /usr/lib/openmpi/lib/openmpi/mca_pml_ob1.so(+0x8900) [0x7f8470c67900]
[P90:05046] [ 6] /usr/lib/openmpi/lib/openmpi/mca_btl_sm.so(+0x4188) [0x7f846fe17188]
[P90:05046] [ 7] /usr/lib/libopen-pal.so.0(opal_progress+0x5b) [0x7f8473f330db]
[P90:05046] [ 8] /usr/lib/openmpi/lib/openmpi/mca_pml_ob1.so(+0x6fd5) [0x7f8470c65fd5]
[P90:05046] [ 9] /usr/lib/libmpi.so.0(PMPI_Send+0x195) [0x7f84749e1805]
[P90:05046] [10] nr2(main+0xe1) [0x400c55]
[P90:05046] [11] /lib/x86_64-linux-gnu/libc.so.6(__libc_start_main+0xed) [0x7f84743e730d]
[P90:05046] [12] nr2() [0x400ab9]
[P90:05046] *** End of error message ***
--------------------------------------------------------------------------
mpirun noticed that process rank 0 with PID 5046 on node P90 exited on signal 11 
(Segmentation fault). 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-18T20:28:21.147

您传递的数组的大小是错误的。

`sizeof(arraySend)`应该很简单`25000`，因为 MPI 会在您定义数据类型（此处为 MPI_INT）时自动扣除大小。仅当您的代码中有通常需要的位数组时`sizeof()`。

尝试在堆栈而不是堆上分配内存，例如，而不是：

```
 int *arraySend = (int *)malloc(25000*sizeof(int)); 
```

利用：

`int arraySend[25000];`

然后在你的 mpi 调用中使用`arraySend`而不是。`&arraySend`

如果您可以使用 C++，您还可以使用 nice boost mpi 标头，其中大小是根据传递的数据自动计算的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-19T23:00:29.953

if you are using a decent mpi implementation, you can use `mpirun -gdb`, more doc [here](https://stackoverflow.com/questions/329259/how-do-i-debug-an-mpi-program)

# c# - 使 C#.NET 中的 IntPtr 指向字符串值

> ID：11090427
> 
> 赞同：20
> 
> 时间：2012-06-18T20:19:29.283
> 
> 标签：c#, .net, pointers, interop

我正在使用一个具有`StringHandle`字段的类，该字段是在 C++`IntPtr`中表示 a 的值 。`LPCWSTR`

```
internal IntPtr StringHandle; // LPCWSTR 
```

现在说我有一个字符串：`string x = "abcdefg"`

如何使用 String 句柄指向 String 的开头，使其类似于 C++ LPCWSTR ？

* * *

## 回答 #1

> 赞同：35
> 
> 时间：2012-06-18T20:25:25.913

您需要先将字符串复制到非托管内存，然后`IntPtr`从该位置获取。你可以这样做：

```
IntPtr strPtr = Marshal.StringToHGlobalUni(x); 
```

此外，您需要确保释放非托管内存：

```
Marshal.FreeHGlobal(strPtr); 
```

最好在 try/finally 中完成所有这些。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-06-18T20:29:55.280

当垃圾收集器压缩堆时，托管字符串在内存中*移动。*所以它们没有稳定的地址，不能直接转换为 LPCWSTR。您需要使用 GCHandle.Alloc() 固定字符串以使用 GCHandle.AddrOfPinnedObject 或使用 Marshal.StringToHGlobalUni() 将其复制到非托管内存中。

如果地址需要稳定一段时间，强烈建议复制。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-18T20:23:26.620

您想在[`Marshal`](http://msdn.microsoft.com/en-us/library/system.runtime.interopservices.marshal.aspx)类上使用 StringTo* 方法之一

# android - 如何启动 com.android.launcher？

> ID：11090431
> 
> 赞同：2
> 
> 时间：2012-06-18T20:19:57.747
> 
> 标签：android, launcher

我创建了一个用作启动器的应用程序，它按预期工作，但我想让用户能够启动本机 Android 启动器。

我知道 Android Launcher 的包名是`com.android.launcher`

但是，当我尝试通过调用从这个包中获取启动意图名称时

```
packageManager.getLaunchIntentForPackage("com.android.launcher"); 
```

那是空的。

所以，我不知道如何使用包名来启动它，并且想知道是否有其他方法？

TIA

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-18T20:22:44.257

> 我知道 Android Launcher 的包名是 com.android.launcher

除了可能在也可能不在任何给定设备上。事实上，我预计它可能会出现在百分之几的设备上。大多数制造商用自己的替换库存主屏幕。

> 我想知道是否可能有一些替代方式？

使用`PackageManager`和`queryIntentActivities()`查找所有支持`ACTION_MAIN`和的活动`CATEGORY_HOME`。从列表中删除您的活动。如果只剩下一个，则启动该活动。如果剩下的不止一个，请启动您自己的选择器以显示可用选项。这样，无论存在什么其他主屏幕，您都可以启动它。

**更新**

给定一个`ResolveInfo`named`launchable`和一个`ACTION_MAIN`/`CATEGORY_HOME`模板`Intent`named `i`，要启动该活动，请执行以下操作：

```
ActivityInfo activity=launchable.activityInfo;
ComponentName name=new ComponentName(activity.applicationInfo.packageName,
                                     activity.name);

i.setFlags(Intent.FLAG_ACTIVITY_NEW_TASK |
            Intent.FLAG_ACTIVITY_RESET_TASK_IF_NEEDED);
i.setComponent(name);

startActivity(i); 
```

# javascript - javascript 因权限被拒绝错误消息而失败

> ID：11090434
> 
> 赞同：1
> 
> 时间：2012-06-18T20:19:59.203
> 
> 标签：javascript, iframe, asp-classic, internet-explorer-9

我有一个可以正常工作的经典 ASP 网页……但是网络人员已经进行了很多更改，包括将应用程序移动到运行 iis 7.5 的 winodws 2008 服务器。我们还升级到了 IE 9。
当我尝试单击以下链接时，我收到了 Permission denied 错误消息：

```
 <a href=javascript:window.parent.ElementContent('SearchCriteria','OBJECT=321402.EV806','cmboSearchType','D',false)> 
```

但是像下面这样的其他链接工作得很好：

```
 <a href="javascript:ElementContent('SearchCriteria','OBJECT=321402.EV806', 'cmboSearchType','D',false)"> 
```

不同之处在于失败的链接位于 iframe 中。我在其他帖子中注意到，iframe 内容是否来自另一个域会有所不同。在我的情况下，它不是。但是我通过执行以下操作从另一台服务器获取数据......

```
 set objhttp = Server.CreateObject("winhttp.winhttprequest.5.1")
  objhttp.open "get", strURL
  objhttp.send 
```

然后我更改了返回的实际 html ... 添加一些超链接等。然后我将其保存到本地服务器上的文件中。（保存为 *.html 文件）然后当我的页面加载时，我会查找特定的 html 文件并将其加载到 iframe 中。我知道 IE 中的一些组策略选项发生了变化……我正在研究这些变化。但是一个javascript链接有效的事实让我想知道问题是否出在其他地方......？？？任何建议，将不胜感激。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-18T21:00:04.587

您可以尝试使用 Msxml2.ServerXMLHTTP 而不是 WinHttp.WinHttpRequest。查看[Msxml2.ServerXMLHTTP 和 WinHttp.WinHttpRequest 之间的区别？](https://stackoverflow.com/questions/1163045/differences-between-msxml2-serverxmlhttp-and-winhttp-winhttprequest)对于 Msxml2.ServerXMLHTTP 之间的区别。

在这个关于 ASP 的优秀网站上，您可以获得大量关于如何使用 Msxml2.ServerXMLHTTP 的代码示例，这是两者中最新的： [http ://classicasp.aspfaq.com/general/how-do-i-read-the-contents -of-a-remote-web-page.html](http://classicasp.aspfaq.com/general/how-do-i-read-the-contents-of-a-remote-web-page.html)

关于 IE9 问题：将电脑与旧版 IE 或其他浏览器连接，以测试浏览器是否是罪魁祸首。同样在 IE9（或在 Firefox/Firebug 中更好）使用开发工具 (F12) 并在 iFrame 的内容加载时观察控制台是否有错误。

恐怕您获取动态页面的方法效率不高，ASP 本身可以做到这一点，您可以使用例如 div 而不是 iframe 并将内容替换为您从请求中获得的内容。我需要查看更多代码才能提供更好的建议。

# jquery - 使用 jQuery .each() 循环将对象中的内容插入特定的 div

> ID：11090437
> 
> 赞同：1
> 
> 时间：2012-06-18T20:20:02.403
> 
> 标签：jquery, foreach, javascript-objects

我想从这个对象中取出物品：

```
var things = {
    "thing1" : "I'm one",
    "thing2" : "I'm two",
    "thing3" : "I'm three",
} 
```

并将它们附加到此标记中：

```
<div class="allthings">
<div class="thing1">other content first. </div>
<div class="thing2">other content first. </div>
<div class="thing3">other content first. </div>   
</div> 
```

导致：

```
<div class="thing1">other content first. <p class="added">I'm one</p></div>
... etc. 
```

我不擅长 .each() 循环。什么是 jQuery 等价物：

“对于对象中的每个项目，找到与项目的键匹配的类的 div，并将项目的值附加为带有“已添加”类的段落。”

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-18T20:27:03.817

我会做什么：

```
for (var i in things) $("."+i).append("<p class='added'>"+things[i]+"</p>"); 
```

仅 Jquery 的解决方案：

```
$.each(things,function(i,e) {$("."+i).append("<p class='added'>"+e+"</p>");}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-18T20:24:55.827

这将起作用：

```
$.each(things, function(key, value) {
    $("<p />").addClass("added").text(value).appendTo("." + key);
}); 
```

**演示：http:** [//jsfiddle.net/exEbw/](http://jsfiddle.net/exEbw/)

* * *

**更新。**对于 ID ，在选择器中使用哈希`#`字符而不是点：`.``appendTo`

```
$("<p />").addClass("added").text(value).appendTo("#" + key); 
```

**演示：http:** [//jsfiddle.net/exEbw/1/](http://jsfiddle.net/exEbw/1/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-18T20:29:58.423

尝试这个。

```
jQuery.each(things, function(i,j) {
    $("." + i).append('<p class="added">'+j+'</p>');
}); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-18T20:24:02.090

```
$.each(things, function(k, v){
    var sel = '.' + k,
        $el = $(sel);
    $el.html($el.html() + '<p class="added">' + v + '</p>');
}); 
```

## [看演示](http://jsfiddle.net/7fqxS/)

# ios - 集成 AWS 身份验证以通过 StackMob 下载 URL

> ID：11090440
> 
> 赞同：1
> 
> 时间：2012-06-18T20:20:17.797
> 
> 标签：ios, amazon-s3, amazon-web-services, bucket, stackmob

我在集成 AWS iOS 开发工具包（特别是身份验证）以及从存储桶下载简单 URL 时遇到问题。

我正在使用 StackMob 来存储我的数据，并且文件通过 AWS 在 S3 存储中进行管理。查询对象时，会给出指向 S3 对象的链接。

我已经实现了匿名存储桶令牌注册，它在演示应用程序中运行良好，我可以看到所有存储桶以及存储桶中的文件，但这是一个大问题：

如何使用 iOS 开发工具包向 AWS 进行身份验证，并使用该身份验证将 URL 下载到我已经拥有链接的存储桶中的对象？

直接转到该链接会导致访问被拒绝错误。此外，有些文件是私有的，没有分发，所以我不想只公开整个存储桶供人们通过链接访问。

有什么建议么？我想我在某处读到，您可以操纵 URL 以包含您的访问密钥和秘密密钥，但是您永远不应该将其包含在二进制文件中，因为它可能会被盗，因此可能将其放在私有服务器上并将该密钥临时拉到用它？

任何帮助都会很棒！谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-21T00:30:39.020

我联系了亚马逊支持，事实证明，我目前想要做的事情对于 SDK 来说是不可能的。

生成 URL 的唯一方法是使用存储桶名称、密钥并使用“getPreSignedURL”API 调用来获取指向它的签名链接。

我会留下这个，希望有人能从中吸取教训，而不必每月支付 50 美元来支持这个问题。

# coldfusion - 如何（有选择地）将数组元素转换为值列表

> ID：11090444
> 
> 赞同：0
> 
> 时间：2012-06-18T20:20:45.657
> 
> 标签：coldfusion, coldfusion-8, coldfusion-7

给定下面的数组，如何将其转换为简单的值列表？

```
<cfdump var="#arguments.ServiceTextArray#"> 
```

**数组元素：**

```
 1 3567_no 
   2 3584_yes 
   3 3642_yes 
   4 3643_yes 
   5 3644_no 
   6 3645_no 
   7 3646_no 
```

具体来说，如何提取带有“yes”后缀的值并生成这样的列表？

```
3584,3642,3643 
```

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-18T22:12:09.573

这部分是对亨利回答的扩展，但应该正是您所追求的：

```
<cfscript>
    tmpArray = ['567_no','584_yes','3642_yes','3643_yes','3644_no','3645_no','3646_no'];
    list = "";
    for (item in tmpArray)
        if (listLast(item, "_") == "yes")
            list = listAppend(list, listFirst(item, "_"));

writeDump(list); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-18T20:36:32.650

```
var list = "";

for (item in array)
    if (ListLast(item, "_"))
        list = listAppend(list, val(item)); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-18T20:37:28.553

这会有帮助吗？总会有比这更好的解决方案。

```
<cfset myList = "">
<cfloop from="1" to="#Arraylen(myArray)#" index="index">

    <Cfif right(myArray[index],3) EQ "yes">
        <cfset myList = listAppend(myList, listFirst(myArray[index], '_'))>
    </Cfif>
</cfloop>

<cfoutput>#myList#</cfoutput> 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-01T08:45:53.280

使用[Underscore.cfc 库](http://russplaysguitar.github.com/UnderscoreCF/)（仅限 CF 10）：

```
filteredArray = _.filter(arguments.ServiceTextArray, function(val) {
    return (val contains 'yes');
});

resultArray = _.map(filteredArray, function(val) {
    return left(val, 4);
});

list = arrayToList(resultArray); 
```

（我创建了这个库，顺便说一句）

# c# - 如何获取列表中项目的 ModelState 键

> ID：11090445
> 
> 赞同：21
> 
> 时间：2012-06-18T20:20:46.210
> 
> 标签：c#, asp.net-mvc, model-view-controller, modelstate

**问题**

我有一个用户可以编辑的字段列表。提交模型后，我想检查此项目是否有效。我不能使用数据符号，因为每个字段都有不同的验证过程，直到运行时我才会知道。如果验证失败，我使用`ModelState.AddModelError(string key, string error)`where 键是要添加错误消息的 html 元素的名称。由于存在字段列表，因此 Razor 为 html 项目生成的名称类似于`Fields[0].DisplayName`. 我的问题是有一种方法或方法可以从视图模型中获取生成的 html 名称的键吗？

**尝试的解决方案**

我尝试了`toString()`钥匙的方法，但没有运气。我也浏览了整个`HtmlHelper`课程，但没有看到任何有用的方法。

**代码片段**

**查看模型**

```
public class CreateFieldsModel
{
    public TemplateCreateFieldsModel()
    {
        FreeFields = new List<FieldModel>();
    }

    [HiddenInput(DisplayValue=false)]
    public int ID { get; set; }

    public IList<TemplateFieldModel> FreeFields { get; set; }

    public class TemplateFieldModel
    {
        [Display(Name="Dispay Name")]
        public string DisplayName { get; set; }

        [Required]
        [Display(Name="Field")]
        public int FieldTypeID { get; set; }
    }
} 
```

**控制器**

```
public ActionResult CreateFields(CreateFieldsModel model)
{
    if (!ModelState.IsValid)
    {
        //Where do I get the key from the view model?
        ModelState.AddModelError(model.FreeFields[0], "Test Error");
        return View(model);
    }
} 
```

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2012-06-19T16:15:11.050

在深入研究源代码后，我找到了解决方案。有一个名为的类`ExpressionHelper`，用于在调用时为该字段生成 html 名称`EditorFor()`。该类`ExpressionHelper`有一个调用方法，该方法`GetExpressionText()`返回一个字符串，该字符串是该 html 元素的名称。以下是如何使用它...

```
for (int i = 0; i < model.FreeFields.Count(); i++)
{
    //Generate the expression for the item
    Expression<Func<CreateFieldsModel, string>> expression = x => x.FreeFields[i].Value;
    //Get the name of our html input item
    string key = ExpressionHelper.GetExpressionText(expression);
    //Add an error message to that item
    ModelState.AddModelError(key, "Error!");
}

if (!ModelState.IsValid)
{
    return View(model);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-19T07:07:39.250

您必须根据您在表单中呈现字段的方式来构建控制器内部的键（输入元素的名称）。

例如。`FreeFields`如果集合中第二项的验证`CreateFieldsModel`失败，您可以将输入元素的名称（即键）框定为`FreeFields[1].DisplayName`验证错误将被映射的位置。

据我所知，你不能轻易地从控制器中得到它。

# mongodb - 我可以使用字符串作为 mongodb 文档的 ID 类型吗？

> ID：11090446
> 
> 赞同：23
> 
> 时间：2012-06-18T20:20:47.873
> 
> 标签：mongodb, key, morphia

我正在使用 java/morphia 来处理 mongodb。默认的 ObjectId 从 Java 层使用不是很方便。我想让它成为一个字符串类型，同时保持使用 ObjectId 的密钥生成过程，比如说`_id = new ObjectId.toString()`。

我想知道这样做有没有副作用？例如，它会以任何方式影响数据库性能或导致密钥冲突吗？会不会影响分片环境...

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2012-06-18T20:24:54.707

您可以对字段使用任何类型的值`_id`（数组除外）。如果您选择不使用 ObjectId，则必须以某种方式保证值的唯一性（将 ObjectId 转换为字符串即可）。如果您尝试插入重复键，则会发生错误，您将不得不处理它。

当您尝试将具有相同 _id 的两个文档插入不同的分片时，我不确定它会对分片集群产生什么影响。我怀疑它会让你插入，但这会在以后咬你。（我必须对此进行测试）。

也就是说，你应该没有问题`_id = (new ObjectId).toString()`。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2014-01-19T17:34:40.360

我实际上做了同样的事情，因为我在将 ObjectId 转换为 JSON 时遇到了一些问题。

然后我做了类似的事情

```
@Id
private String id;
public String getId() {
    return id();
}
public void setId(String id) {
    this.id = id;
} 
```

一切正常，直到我决定更新以前插入的文档，当我通过 Id 获取对象时，通过 JSON 将其发送到页面并通过 JSON 发布接收相同的更新对象，然后使用数据存储中的保存功能，而不是更新之前的数据，它插入了一个新文档，而不是更新已经存在的数据。

更糟糕的是，新文档的 ID 与之前插入的 ID 相同，我认为这是不可能的。

无论如何，我将私有对象设置为 ObjectID，然后将 get 设置为字符串，然后它按预期工作，不确定这对您的情况有所帮助。

```
@Id
private ObjectId id;
public String getId() {
    return id.toString();
}
public void setId(String id) {
    this.id = new ObjectId(id);
} 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2016-02-02T18:12:38.187

是的，您可以使用字符串作为 _id。

只有当你有一些价值（在文档中）自然是一个很好的唯一键时，我才会推荐它。我在一个集合中使用了这种设计，其中有一个字符串地理标签，形式为“xxxxyyyy”；这个每个文档唯一的字段将必须在文档中*，*我必须在它上面建立一个索引......那么为什么不将它用作键呢？（这避免了一个额外的键值对，并且避免了集合上的第二个索引，因为 MongoDB 自然地在“_id”上构建了一个索引。鉴于集合的大小，这两者都大大节省了空间。）

但是，从您的问题的语气（“ObjectIDs 不是很方便”）来看，如果您想要使用字符串的唯一原因是您不想为弄清楚如何巧妙地管理 ObjectIDs 而烦恼......我' d 建议值得您花时间了解它们。我敢肯定他们不会有麻烦……一旦你发现了他们的麻烦。

否则：你有什么选择？以后每次使用 MongoDB 时，你都会编造字符串 ID 吗？

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-10-31T13:10:21.883

我想补充一点，使用自动生成的 BSON ObjectID 作为唯一标识符并不总是一个好主意，如果它被传递给应用程序：它可能会被用户操纵。

ObjectID 似乎是按顺序生成的，因此如果您未能实施必要的授权机制，恶意用户可以简单地增加他所拥有的值，以访问他不应该访问的资源。

**更新：**从版本 3.4+ 开始，不再以增量方式生成 ObjectID。请参阅[3.2 文档](https://docs.mongodb.com/v3.2/reference/method/ObjectId/)与[最新文档](https://docs.mongodb.com/manual/reference/method/ObjectId/)

因此，使用 UUID 类型标识符将提供一层安全性。当然，授权（是否允许此用户访问请求的资源）是必须的，但您应该了解上述 ObjectID 功能。

为了两全其美，请生成与您的 ObjectID 长度（12 或 24 个字符）匹配的 UUID，并使用它来创建您自己的 ObjectID 类型的 _id。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2020-07-20T17:36:28.957

您也可以使用字符串作为 Java 的 ID。这是在 MongoDB 集合中插入一个具有字符串 ID 的对象的示例方法和相应的单元测试：

```
public Document insert(String json, String collectionName) {
    MongoCollection<Document> collection = database.getCollection(collectionName);
    BasicDBObject document = BasicDBObject.parse(json);
    Document doc = new Document(document);
    collection.insertOne(doc);
    return doc;
}

@Test
void whenInsert_ShouldInsertOne() {
    final String uuid = UUID.randomUUID().toString();
    final String collection = "test_collection";
    final Document doc = app.insert(String.format("{\"_id\":\"%s\", \"name\": \"test\"}", 
        uuid), collection);
    assertThat(doc).isNotNull();
    final String json = app.getById(uuid, collection);
    assertThat(json).contains(String.format("\"_id\": \"%s\"", uuid));
} 
```

# html - 具有不会继承内联显示的下拉菜单的内联样式菜单

> ID：11090447
> 
> 赞同：0
> 
> 时间：2012-06-18T20:20:53.513
> 
> 标签：html, css

我正在尝试设计一个覆盖网站主容器整个宽度的下拉菜单。我应用于菜单最外层类别链接的部分样式是水平菜单的“display:inline”。

由于这种样式应用于父元素，自然所有子元素（子菜单项，在本例中为下拉菜单）也继承这种显示。我正在尝试找到一种方法来防止子 li 项目具有内联显示。我希望它们的显示是垂直的（标准列表样式）。

我已经尝试解决这个问题很长一段时间了，但没有成功。

我的 CSS

```
body{font-family:helvetica; color:white;}
a{color:white; text-decoration:none;}
a:hover{background-color:darkred;}
input{background-color:#000; color:#777; border:none; padding:5px;}
#menu{background-color:#222; padding:10px 0px 10px 0px; }
#menu li{display:inline;}
.menu-category-link{font-size:15px; font-weight:bold; padding:15px 12px 15px 12px;}
.submenu{display:none; position:absolute; margin:0px; padding:0px; margin-top:8px;}
.dropdown{width:900px; border-top:3px solid darkred; position:absolute; height:200px; background-color:#111;}
.dropdown ul li {display:block;} 
```

我的标记

```
<div id="main-container" style="width:900px; height:1000px; background-color:#000; margin:0px auto 0px auto;">
    <ul id="menu">
        <li><a class="menu-category-link" href="#">MEN</a>
            <ul class="submenu">
                <li>
                    <div class="dropdown"> 
                        <ul>
                            <li><a href="#">T-shirts</a></li>
                            <li><a href="#">Pants</a></li>
                            <li><a href="#">Clothes</a></li>
                            <li><a href="#">Hats</a></li>
                        </ul>
                    </div>
                </li>
            </ul>
        </li>
        <li><a class="menu-category-link" href="#">WOMEN </a>
            <ul class="submenu">
                <li>
                    <div class="dropdown"> 
                        <ul>
                            <li><a href="#">Dresses</a></li>
                            <li><a href="#">Skirts</a></li>
                            <li><a href="#">Tops</a></li>
                            <li><a href="#">Denim</a></li>
                        </ul>
                    </div>
                </li>
            </ul>
        </li>
      </ul>
</div> 
```

我的 jQuery

```
$(document).ready(function(){
        $("#searchfield").Watermark("Search");
        $("#menu li").hover(function(){
            $(".submenu").hide();
            $(this).children(".submenu").show();
        });
        $('.dropdown').css('display', '');
    }); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-18T20:28:52.243

您需要使您的下拉菜单比您的`#menu li`声明更具体：

```
#menu .dropdown ul li {display:block;} 
```

# ruby-on-rails - 使用 Ruby on Rails 格式化日期

> ID：11090451
> 
> 赞同：79
> 
> 时间：2012-06-18T20:20:57.893
> 
> 标签：ruby-on-rails, ruby

flickr api 提供发布日期作为 unix 时间戳一：“ `The posted date is always passed around as a unix timestamp, which is an unsigned integer specifying the number of seconds since Jan 1st 1970 GMT.`”

例如，这里是日期“ `1100897479`”。如何使用 Ruby on Rails 对其进行格式化？

* * *

## 回答 #1

> 赞同：195
> 
> 时间：2012-06-19T08:57:22.013

一旦您解析了时间戳字符串并拥有一个时间对象（有关详细信息，请参阅其他答案），您可以使用Rails 中的[Time.to_formatted_s](http://apidock.com/rails/Time/to_formatted_s)。它具有多种内置格式，您可以使用符号指定这些格式。

引用：

```
time = Time.now                     # => Thu Jan 18 06:10:17 CST 2007

time.to_formatted_s(:time)          # => "06:10"
time.to_s(:time)                    # => "06:10"

time.to_formatted_s(:db)            # => "2007-01-18 06:10:17"
time.to_formatted_s(:number)        # => "20070118061017"
time.to_formatted_s(:short)         # => "18 Jan 06:10"
time.to_formatted_s(:long)          # => "January 18, 2007 06:10"
time.to_formatted_s(:long_ordinal)  # => "January 18th, 2007 06:10"
time.to_formatted_s(:rfc822)        # => "Thu, 18 Jan 2007 06:10:17 -0600" 
```

（Time.to_s 是别名）

您还可以定义自己的格式 - 通常在初始化程序中（感谢[Dave Newton](https://stackoverflow.com/users/438992/dave-newton)指出这一点）。这是如何完成的：

```
# config/initializers/time_formats.rb
Time::DATE_FORMATS[:month_and_year] = "%B %Y"
Time::DATE_FORMATS[:short_ordinal] = lambda { |time| time.strftime("%B #{time.day.ordinalize}") } 
```

* * *

## 回答 #2

> 赞同：48
> 
> 时间：2015-12-16T15:40:01.473

这是我回答这个问题的方法，

所以首先您需要将时间戳转换为实际的 Ruby 日期/时间。如果您只是从 facebook 收到它作为字符串或 int，您将需要执行以下操作：

```
my_date = Time.at(timestamp_from_facebook.to_i) 
```

好的，所以现在假设你已经有了你的日期对象......

**[to_formatted_s](http://apidock.com/rails/Date/to_formatted_s)**是一个方便的 Ruby 函数，可以将日期转换为格式化字符串。

以下是其用法的一些示例：

```
time = Time.now                     # => Thu Jan 18 06:10:17 CST 2007    

time.to_formatted_s(:time)          # => "06:10"
time.to_s(:time)                    # => "06:10"    

time.to_formatted_s(:db)            # => "2007-01-18 06:10:17"
time.to_formatted_s(:number)        # => "20070118061017"
time.to_formatted_s(:short)         # => "18 Jan 06:10"
time.to_formatted_s(:long)          # => "January 18, 2007 06:10"
time.to_formatted_s(:long_ordinal)  # => "January 18th, 2007 06:10"
time.to_formatted_s(:rfc822)        # => "Thu, 18 Jan 2007 06:10:17 -0600" 
```

如您所见：**:db, :number, :short** ... 是自定义日期格式。

要添加您自己的自定义格式，您可以创建此文件：**config/initializers/time_formats.rb**并在其中添加您自己的格式，例如这是一个：

```
Date::DATE_FORMATS[:month_day_comma_year] = "%B %e, %Y" # January 28, 2015 
```

其中**:month_day_comma_year**是您的格式名称（您可以将其更改为您想要的任何名称），其中**%B %e, %Y**是 unix 日期格式。

这是有关 unix 日期语法的快速备忘单，因此您可以快速设置自定义格式：

```
From http://linux.die.net/man/3/strftime    

  %a - The abbreviated weekday name (``Sun'')
  %A - The  full  weekday  name (``Sunday'')
  %b - The abbreviated month name (``Jan'')
  %B - The  full  month  name (``January'')
  %c - The preferred local date and time representation
  %d - Day of the month (01..31)
  %e - Day of the month without leading 0 (1..31) 
  %g - Year in YY (00-99)
  %H - Hour of the day, 24-hour clock (00..23)
  %I - Hour of the day, 12-hour clock (01..12)
  %j - Day of the year (001..366)
  %m - Month of the year (01..12)
  %M - Minute of the hour (00..59)
  %p - Meridian indicator (``AM''  or  ``PM'')
  %S - Second of the minute (00..60)
  %U - Week  number  of the current year,
          starting with the first Sunday as the first
          day of the first week (00..53)
  %W - Week  number  of the current year,
          starting with the first Monday as the first
          day of the first week (00..53)
  %w - Day of the week (Sunday is 0, 0..6)
  %x - Preferred representation for the date alone, no time
  %X - Preferred representation for the time alone, no date
  %y - Year without a century (00..99)
  %Y - Year with century
  %Z - Time zone name
  %% - Literal ``%'' character    

   t = Time.now
   t.strftime("Printed on %m/%d/%Y")   #=> "Printed on 04/09/2003"
   t.strftime("at %I:%M%p")            #=> "at 08:56AM" 
```

希望这对您有所帮助。我还制作了这个小指南的[github 要点](https://gist.github.com/eduwass/4ee6b9de3c5013cbd3af)，以防有人喜欢。

* * *

## 回答 #3

> 赞同：27
> 
> 时间：2012-06-18T20:24:46.690

[最简单的是使用`strftime`(docs)](http://apidock.com/ruby/v1_9_3_125/Time/strftime)。

但是，如果它用于视图方面，最好将其包装在帮助器中。

* * *

## 回答 #4

> 赞同：17
> 
> 时间：2014-08-29T09:39:47.090

@CMW 的答案是大赚一笔。我添加了这个答案作为如何配置初始化程序的示例，以便 Date 和 Time 对象都获得格式

配置/初始化程序/time_formats.rb

```
date_formats = {
  concise: '%d-%b-%Y' # 13-Jan-2014
}

Time::DATE_FORMATS.merge! date_formats
Date::DATE_FORMATS.merge! date_formats 
```

此外，以下两个命令将遍历`DATE_FORMATS`当前环境中的所有内容，并以每种格式显示今天的日期和时间：

```
Date::DATE_FORMATS.keys.each{|k| puts [k,Date.today.to_s(k)].join(':- ')}
Time::DATE_FORMATS.keys.each{|k| puts [k,Time.now.to_s(k)].join(':- ')} 
```

* * *

## 回答 #5

> 赞同：9
> 
> 时间：2015-08-26T15:55:09.400

看看[`localize`](http://www.rubydoc.info/github/svenfuchs/i18n/master/I18n/Backend/Base:localize)，或`l`

例如：

```
l Time.at(1100897479) 
```

* * *

## 回答 #6

> 赞同：6
> 
> 时间：2012-06-18T23:39:32.887

首先，您需要将时间戳转换为实际的 Ruby 日期/时间。如果您只是从 facebook 收到它作为字符串或 int，您将需要执行以下操作：

```
my_date = Time.at(timestamp_from_facebook.to_i) 
```

然后要在视图中很好地格式化它，您可以使用`to_s`（对于默认格式）：

```
<%= my_date.to_s %> 
```

请注意，如果您不 put `to_s`，如果您在视图或字符串中使用它，默认情况下仍会调用它，例如以下内容也将调用`to_s`日期：

```
<%= "Here is a date: #{my_date}" %> 
```

或者，如果您希望以特定方式格式化日期（例如使用“d/m/Y”） - 您可以`strftime`按照其他答案中的说明使用。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2012-06-19T07:24:37.950

由于时间戳是自 UNIX 纪元以来的秒数，您可以使用[DateTime.strptime](http://www.ruby-doc.org/stdlib-1.9.3/libdoc/date/rdoc/DateTime.html#method-c-strptime)（“字符串解析时间”）和正确的说明符：

```
Date.strptime('1100897479', '%s')
#=> #<Date: 2004-11-19 ((2453329j,0s,0n),+0s,2299161j)>
Date.strptime('1100897479', '%s').to_s
#=> "2004-11-19"
DateTime.strptime('1100897479', '%s')
#=> #<DateTime: 2004-11-19T20:51:19+00:00 ((2453329j,75079s,0n),+0s,2299161j)>
DateTime.strptime('1100897479', '%s').to_s
#=> "2004-11-19T20:51:19+00:00" 
```

请注意，您必须`require 'date'`这样做，然后您可以将其称为`Date.strptime`（如果您只关心日期）或`DateTime.strptime`（如果您想要日期和时间）。如果您需要不同的格式，您可以调用[DateTime#strftime](http://www.ruby-doc.org/stdlib-1.9.3/libdoc/date/rdoc/DateTime.html#method-i-strftime)（如果您对格式字符串有困难，请查看[strftime.net](http://strftime.net/)）或使用其中一种内置方法，例如`rfc822`.

# asp.net-mvc - 在 ASP.NET MVC 中的模型属性上转义某些字符

> ID：11090453
> 
> 赞同：3
> 
> 时间：2012-06-18T20:21:08.550
> 
> 标签：asp.net-mvc, validation

我可以创建一个属性，让我在我的 ASP.NET MVC 模型中修改它的值吗？它与下面将“％”发送到数据库的问题有关，但我想要一种通用方法来转义某些字符，数据来自 UI。我知道您可以验证属性，但您可以在 SET 上修改它们吗？

[MySQL 和 LIKE 比较与 %](https://stackoverflow.com/questions/11059414/mysql-and-like-comparison-with)

```
[Clean]
public string FirstName { get; set; }

[Clean]
public string LastName{ get; set; } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-18T21:24:30.360

与仅在设置器中为每个属性调用一个干净的方法相比，这是否具有很多价值？我担心即使这是可能的，它也会引入很多复杂性，具体取决于预期的行为。

我的建议是只创建一个函数并从 setter 调用它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-19T04:04:08.323

您所要做的就是创建一个**自定义模型绑定**器并覆盖`SetProperty`进行清理的方法。

```
public class CustomModelBinder: DefaultModelBinder
{
    protected override void SetProperty(ControllerContext controllerContext, ModelBindingContext bindingContext, PropertyDescriptor propertyDescriptor, object value)
    {
        if (propertyDescriptor.Attributes.Contains(new Clean()) && propertyDescriptor.PropertyType == typeof(string))
        {
            value = value != null ? ((string)value).Replace("%", "") : value;
        }

        base.SetProperty(controllerContext, bindingContext, propertyDescriptor, value);
    }
} 
```

您可以使用这些选项中的任何一个来使用您的自定义模型绑定器。

**在 Global.asax.cs 中为特定模型注册自定义绑定器**

```
ModelBinders.Binders.Add(typeof(MyModel), new CustomModelBinder()); 
```

**在动作参数中注册自定义活页夹**

```
public ActionResult Save([ModelBinder(typeof(CustomModelBinder))]MyModel myModel)
{
} 
```

**将自定义绑定器注册为默认模型绑定器。**

```
ModelBinders.Binders.DefaultBinder = new CustomModelBinder(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-18T21:40:31.757

我认为您的 Attribute 应该处于类级别才能访问此类属性

让我们说：

```
[AttributeUsage(AttributeTargets.Class, AllowMultiple = true, Inherited = true)]
public class ClearAttribute : ValidationAttribute
{
    private string[] wantedProperties;

    public ClearAttribute(params string[] properties)
    {
        wantedProperties = properties;
    }

    public override object TypeId
    {
        get { return new object(); }
    }

    public override bool IsValid(object value)
    {
        PropertyInfo[] properties = value.GetType().GetProperties();
        foreach (PropertyInfo property in properties)
        {
            if (wantedProperties.Contains(property.Name))
            {
                var oldValue = property.GetValue(value, null).ToString();
                var newValue = oldValue + "Anything you want because i don't know a lot about your case";
                property.SetValue(value, newValue, null);
            }
        }
        return true;
    }
} 
```

用法应该是：

```
[Clear("First")]
public class TestMe{
   public string First {get; set;}
   public string Second {get; set;}
} 
```

希望这有帮助:)

# asp.net-mvc - RestSharp 重定向和身份验证 401

> ID：11090454
> 
> 赞同：1
> 
> 时间：2012-06-18T20:21:08.377
> 
> 标签：asp.net-mvc, heroku, neo4j, basic-authentication, restsharp

我正在尝试向通过 heroku 托管的 Neo4j 实例发出 REST 请求。服务器设置有基本身份验证。

这是我从 Heroku 提供的网址（**注意尾部斜杠**）：[http://username:password@instance.hosted.neo4j.org:123/db/data](http://username:password@instance.hosted.neo4j.org:123/db/data) **/**

我正在使用 RestSharp 连接到这个实例。但是，RestSharp 将删除尾部斜杠。[代码](https://github.com/restsharp/RestSharp/blob/master/RestSharp/RestClient.cs#L271)。生成的 url 变为：[http://username:password@instance.hosted.neo4j.org:123/db/data](http://username:password@instance.hosted.neo4j.org:123/db/data)

这导致一个`HTTP 301`to（**注意尾部斜杠**）：[http://username:password@instance.hosted.neo4j.org:123/db/data/](http://username:password@instance.hosted.neo4j.org:123/db/data/)

问题是 Authorization Header 没有跨重定向[MSDN 保留](http://msdn.microsoft.com/en-us/library/system.net.httpwebrequest.allowautoredirect.aspx)。此重定向导致`HTTP 401`.

有什么明显的方法可以解决这个问题吗？我尝试了以下方法：

*   提供 2 个尾部斜杠`/db/data//`，因此 RestSharp 只删除了一个斜杠，但留下了一个。这不起作用，因为其他请求的格式无效：`/db/data//query/stuff`
*   使用`CredentialCache`类。这可行，但每个操作会产生 2 个请求（一个用于 401 挑战，另一个用于响应）
*   `IAuthenticationModlue`- 在 MSDN 中找到了关于此的最少信息，但在尝试自定义类之后，这仍会导致前面提到的双跳问题。
*   ~~将初始休息请求更改`new RestRequest("/", Method.GET);`为`new RestRequest("", Method.GET);`- 唯一的问题是我不想修改我的应用程序和 RestSharp 之间的开源项目以满足我的特定需求。~~RestSharp 删除所有结尾斜杠

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-21T03:05:42.133

来自谷歌集团的皮特：

> 请求“根资源”的一个有点烦人的解决方法是使用：new RestRequest (“/”)，尾随空格将阻止 RestSharp 修剪斜线，但会被（大多数）服务器忽略。

[https://groups.google.com/forum/?fromgroups#!topic/restsharp/8mBmaXksmsg](https://groups.google.com/forum/?fromgroups#!topic/restsharp/8mBmaXksmsg)

# objective-c - 学习在 Xcode 中调试

> ID：11090460
> 
> 赞同：1
> 
> 时间：2012-06-18T20:21:36.833
> 
> 标签：objective-c, xcode, debugging, stack-trace

有人知道学习如何在 Xcode 中使用调试器的好地方吗？我希望了解如何使用堆栈跟踪、调试日志以及其他我不知道的东西。在线教程是最好的，但我也不反对买一本书。谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-18T20:28:50.490

阅读有关调试[的 Xcode 文档](http://developer.apple.com/library/ios/#documentation/ToolsLanguages/Conceptual/Xcode4UserGuide/Debugging/Debugging.html)，您将了解所有基础知识。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-18T20:45:56.737

在 WWDC 2011 上有一个名为[*Effective Debugging with Xcode*](https://developer.apple.com/itunes/?destination=adc.apple.com.8266478284.08266478290.8365294561?i=1092444596)的会议。该链接指向 iTunes 中的视频，因此您应该可以观看它。

学习调试实际上是两种技能：学习如何使用工具，以及学习如何使用它们。掌握基础知识应该不会花很长时间——设置断点、检查值等。真正变得好需要更长的时间。

# php - 让 PHP 文件将表单数据发送到以其中一个表单数据块命名的文件

> ID：11090462
> 
> 赞同：1
> 
> 时间：2012-06-18T20:22:03.247
> 
> 标签：php, filenames

我目前使用的 PHP 代码将表单中发布的数据发送到名为 newData.html 的文件中。我希望它将数据发送到一个与数据中的产品名称相同的文件。

例如，我有一个名为 NS-4000 的产品。我在表格的产品名称空白处输入产品名称并提交表格。我想要一个名为 NS-4000.html 的文件与我要去的其他数据一起创建。在这种情况下，我将拥有项目负责人的姓名、产品描述和团队成员的姓名。这是我到目前为止的PHP：

```
<?php
    $Name = $_POST['Name'];
    $PLname= $_POST['PLname'];
    $Team_members= $_POST['Team_members'];
    $Description= $_POST['Description'];

    $html = <<<HEREDOC
         Product Name: $Name <br>
         Project Lead: $PLname <br>
         Team Members: $Team_members <br> <br>
         Description: $Description
    HEREDOC;
    file_put_contents('newPage.html', $html);

    header('location: newPage.html');
    exit; 
```

我将如何让我的 PHP 代码创建一个与表单中的产品名称同名的文件？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-18T20:29:22.893

您需要使用[fopen()](http://php.net/manual/en/function.fopen.php)创建文件。使用“w”作为第二个参数允许您写入以创建一个新文件（如果它不存在）。之后，您可以使用[fwrite()](http://www.php.net/manual/en/function.fwrite.php)添加内容。[我从fwrite()](http://www.php.net/manual/en/function.fwrite.php)页面借用了这段代码，并根据您的情况进行了修改。

```
<?php
$fp = fopen($Name, 'w');
fwrite($fp, $html);
fclose($fp);

// the content of $Name is now $html
?> 
```

# tridion - Tridion 2011 SP1 CM 管理单元中的隐藏组织项目选项

> ID：11090465
> 
> 赞同：2
> 
> 时间：2012-06-18T20:22:11.490
> 
> 标签：tridion

我想限制用户在 CM 中实际可以看到的组织项目，而不是允许他们查看项目但不能读取其内容的默认设置，从而给出“权限不足”错误。

对于一个特定的组，我分配了出版物的类别管理权限和四十个可用类别中的两个的读取权限。当我测试以该组的用户身份登录时 - 全部出现，嗯：

1.  我只看到该小组有权发表的出版物。
2.  我在类别和关键字下看到所有四十个类别，但只能从我设置权限的两个类别中读取。

到目前为止，一切都很好。

然后我打开 Tridion CM 管理单元并将值“**如果无法访问内容则隐藏组织项目**”从 0 更改为 1。关闭 COM+ 并重新启动 IIS。

以与以前相同的用途登录我仍然可以看到所有四十个类别 - 似乎没有任何变化？

是否无法设置 CM，以便我的用户只能看到他们拥有读取权限的两个类别？

理想情况下，我也希望 Audience Manager 通讯簿也有同样的功能 - 仅列出组有权读取/写入/删除的通讯簿。

这是 Tridion 2011 SP1。

**编辑**

刚刚检查了在线文档，他们将管理单元设置称为：

> 如果启用，用户没有读取权限的文件夹和结构组对该用户隐藏；默认值为 0，即禁用。

这是否意味着它不适用于类别/地址簿？

干杯

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-19T11:45:48.523

你是对的。此设置适用于结构组和文件夹。

术语“组织项目”总是需要一些上下文才能准确理解。类别原则上是组织项目，但类别始终是根组织，根组织具有特殊规则。在某些情况下，甚至出版物也被称为组织。在这个特定的上下文中，它意味着文件夹和结构组

# android - 如何让 Nexus S 版本 4.0.4 (IceCreamSandwich) 在 Windows 7 上注册为设备？

> ID：11090473
> 
> 赞同：0
> 
> 时间：2012-06-18T20:23:16.130
> 
> 标签：android, windows, device, device-driver

我正在尝试找到一种方法让我的 Window 7 机器识别我尝试插入的 Nexus S 手机，我的计算机似乎无法找到合适的驱动程序以便它可以识别这款手机（它无法更新驱动程序当我打开 Windows 设备管理器并选择 Nexus S 并单击更新驱动程序时自动打开）。我真正需要什么驱动程序，我在哪里可以得到它？

否则，为什么 Windows 7 不能识别这款手机？它在手机上显示“USB已连接”和“USB调试已连接”，因此手机似乎认为它正在连接到计算机。

我的目标：为了能够查看一旦您将其作为注册设备 b/c 出现的 Nexus S 文件夹，我需要弄清楚如何手动将图像刷到手机上（访问以下链接，了解我的另一个问题试图找出这个问题影响的答案：[https ://android.stackexchange.com/questions/24397/has-anyone-flashed-an-android-build-iea-crespo-build-onto-a-nexus- s-电话-m](https://android.stackexchange.com/questions/24397/has-anyone-flashed-an-android-build-i-e-a-crespo-build-onto-a-nexus-s-phone-m) )

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-18T20:29:20.747

这应该适用于您想要的：http: [//developer.android.com/sdk/win-usb.html](http://developer.android.com/sdk/win-usb.html)

# jquery - 如何使用 jquery-ui 打开选项卡

> ID：11090477
> 
> 赞同：-1
> 
> 时间：2012-06-18T20:23:31.010
> 
> 标签：jquery, jquery-ui, jquery-ui-tabs

我正在尝试使用 jquery 打开一个选项卡，这是我的代码：

```
$("#ecContenedorFolders").tabs({
     tabTemplate: "<li><a href='#{href}'>#{label}</a> <span class='ui-icon-close'></span></li>"                                                     
});
$("#ecContenedorFolders").tabs("add","#ecApp05","Friends Discussions"); 
```

正如每个人都可以看到我正在使用模板，所以当我使用第 3 行时，我得到了我的新标签，但我可以在以前的标签之间切换，如果我只使用最后一行，我会得到我的新标签，我可以在标签，但我可以添加内容。¿ 有人知道改进此代码的方法吗？

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-18T20:45:59.983

您需要的是`panelTemplate`与您的`tabTemplate`. 像这样的东西：

```
$("#ecContenedorFolders").tabs({
  tabTemplate: "<li><a href='#{href}'>#{label}</a> <span class='ui-icon-close'></span></li>",
  panelTemplate: "<p>Panel Text here</p>"
});

$("#ecContenedorFolders").tabs("add", "#ecApp05", "Friends Discussions"); 
```

希望这可以帮助！

# jquery - 使用 jQuery 将此字符串转换为 JSON 对象数组

> ID：11090478
> 
> 赞同：2
> 
> 时间：2012-06-18T20:23:32.400
> 
> 标签：jquery, arrays

`jQuery $.ajax()`我有一个 Web 服务，它通过成功回调中的调用返回此字符串：

```
[{"WaitlistID":1,"RID":45034,"CustomerID":2765957,
 "IsAdmin":false,"TruckSize":1,"Points":1},
 {"WaitlistID":2,"RID":45034,"CustomerID":2765957,
 "IsAdmin":false,"TruckSize":1,"Points":1}] 
```

不幸的是，如果我`$.each()`在成功回调中调用该值，它会遍历其中的每个字母，并且不会将其视为二元素数组，这正是我想要的。我已经尝试了`makeArray(`) 函数，但没有任何运气，如何将该字符串转换为 JSON 对象数组？

编辑：

作为对评论的回应（谢谢大家），我已经将 dataType 设置为“json”，这很奇怪。这是有问题的代码。

```
jQuery.ajax({
    type: "POST",
    url: pagePath + "/" + fn,
    contentType: "application/json; charset=utf-8",
    data: paramList,
    dataType: "json",
    success: successFn,
    error: errorFn
}); 
```

..所以我不确定为什么它最初不起作用，但是 parseJSON() 位成功了。感谢大家的帮助。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-18T20:25:45.313

您可以使用[jQuery.parseJSON](http://api.jquery.com/jQuery.parseJSON/)来解析它：

```
var obj = $.parseJSON(str); 
```

但是，如果服务器返回正确的内容类型，jQuery 应该已经为您完成了这项工作。如果不是，您可以指定 jQuery 将响应视为 JSON：

```
$.get("test.php", function(data){
   // callback
}, "json"); 
```

或者更好的是，使用[jQuery.getJSON](http://api.jquery.com/jQuery.getJSON/)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-18T20:25:50.157

尝试使用[jQuery.parseJSON()](http://api.jquery.com/jQuery.parseJSON/)解析！

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-18T20:25:52.247

你所返回的是一个字符串。尝试设置`dataType`in`$.ajax`调用。

```
$.ajax({
   url: blahblah,
   dataType: 'json',
   ...
}); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-18T20:31:02.540

你有：

```
success: successFn 
```

是否`successFn()`存在，它会带一个参数吗？即，它的定义是这样的`function successFn(myObject)`吗？如果是这样，`myObject`将包含 JSON 字符串描述的对象。无需解析。

# ruby - 安装 Ruby 1.9.2-180 时出错

> ID：11090488
> 
> 赞同：0
> 
> 时间：2012-06-18T20:24:43.650
> 
> 标签：ruby

```
/usr/bin/gcc-4.2 -dynamic -bundle -o ../../.ext/x86_64-darwin11.3.0/tcltklib.bundle
stubs.o tcltklib.o -L. -L../.. -L/Users/jasonvdm/.rvm/usr/lib -  L/System/Library/Frameworks/Tcl.framework -L/System/Library/Frameworks/Tk.framework -L. -L/usr/local/lib   -lpthread -framework CoreFoundation  -F/System/Library/Frameworks -framework Tcl    -lpthread -framework CoreFoundation -framework Cocoa -framework Carbon -framework IOKit   -lpthread -framework CoreFoundation  -F/System/Library/Frameworks -framework Tk -Wl,-undefined,dynamic_lookup -Wl,-multiply_defined,suppress -Wl,-flat_namespace  -lruby.1.9.1 -lm -ldl  -lpthread -ldl -lobjc 
ld: in /usr/local/lib/libxml2.2.dylib, file was built for unsupported file format which is not      the architecture being linked (x86_64) for architecture x86_64
collect2: ld returned 1 exit status
make[1]: *** [../../.ext/x86_64-darwin11.3.0/tcltklib.bundle] Error 1
make: *** [mkmain.sh] Error 1 
```

我收到了一个错误：

```
Error running 'make', please read /Users/jasonvdm/.rvm/log/ruby-1.9.2-p320/make.log
There has been an error while running make. Halting the installation. 
```

这与 p180 相同。我已经安装了 readline 和所有东西。我正在尝试安装 1.9.3，但出现类似错误。我尝试使用 clang 和 readline 标志安装，没有任何效果。

看来这是我的主要错误：

```
ld: in /usr/local/lib/libxslt.1.dylib, file was built for unsupported file format which
is not the architecture being linked (x86_64) for architecture x86_64 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-18T21:11:51.657

你在使用 OSX 吗？
您可以尝试使用：

```
rvm install ruby-1.9.2-p320 --with-gcc=clang 
```

或者：

```
CC=/usr/local/bin/gcc-4.2 rvm install ruby-1.9.2-p320 
```

# java - EJB3 在哪里适合 SOA/EIP？

> ID：11090490
> 
> 赞同：1
> 
> 时间：2012-06-18T20:24:45.617
> 
> 标签：java, architecture, soa, apache-camel, esb

我对 EJB3（也许太简单了）的理解是，它是一种将 POJO 转变为符合 Java EE 的业务逻辑单元的方法。它是可重用的，并且可以“插入”到跨多个项目的不同后端架构中。这是朝着真正的组件驱动架构方向迈出的一步。**如果这些断言中的任何一个是不真实的，请先纠正我！！**

如果我在这些项目上是正确的，那么我想知道 EJB3 是如何/在哪里/何时/如果像 Apache Camel 这样的 ESB 卡入的。使用 Camel，每个端点通常都会实现一些 EIP，例如`WireTap`、`Filter`或`Transformer`。我想知道 EJB（特别是 EJB3）适合哪些 EIP/SOA 模式。是不是很简单`Filter`？还有什么？

我想我的问题的根源是：

*   如果我正在构建骆驼路线，那么将 EJB3 作为端点而不是其他 EIP 什么时候有意义？ESB 中的 EJB3 有哪些用例，它们何时优于其他 EIP？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-19T07:21:25.407

在这种情况下没有对错。

EJB 可以很好地插入 JavaEE 应用程序服务器，并被构建为提供一种架构，将业务逻辑封装为 EJB 中的 Java 代码，让应用程序服务器处理缩放、节流、故障转移、集群、负载平衡等，以及暴露EJB 到通信协议（Web 服务或消息驱动 Bean 的 JMS）。

我认为在 Apache Camel 中引入 EJB 作为业务逻辑容器没有任何意义，除非您已经拥有一个希望 Camel 使用的全栈 Java EE 应用程序。

[Camel 有一组很棒的功能可以通过bean-binding](http://camel.apache.org/bean-binding.html)连接到“真实的”pojos 。

我建议使用简单的 java beans/pojos 来实现业务逻辑，您可以通过 Camel 丰富的连接器集轻松地将它们插入任何其他应用程序。实施不同的骆驼 EIP 有多种选择。一种常见的方法是使用 java 代码，但用于转换的 XSLT 和用于过滤器的 groovy 也同样常见。我永远不会将 EJB 用于简单的过滤器，而是在 Java EE 应用程序中调用一些复杂的逻辑。服务器，或者通常避免一起使用（MDB 除外），而是查看 JMS 与应用程序服务器的通信。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-19T14:39:29.037

基本上，EJB 是一项服务。服务背后的理念是可以简单地使用它，而无需将其创建为消费者。此外，服务通常可以在注册表中查找。

因此，我的建议是在易于实例化 bean impl 的情况下使用简单的 bean 集成，而在困难的情况下使用服务。因此，您可以将初始化封装在提供服务的组件内部。

我不经常使用 EJB，但经常使用在概念上与 EJB 非常相似的 OSGi 服务。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-20T04:53:47.767

除了以前的答案，我还提到 SOA 是一种具有特定[要求](http://en.wikipedia.org/wiki/Service-oriented_architecture#Requirements)的方法，而不是具体的技术堆栈。至少让您的 EJB3 bean 或 OSGI 服务可以通过网络操作，而不管操作系统、平台和语言如何，您将拥有面向服务的系统。因此，当 EJB 和 OSGI 或 Spring 驱动的应用程序满足 SOA 的要求时，它们确实适合 SOA。

# c# - 使用 ManagedInterop 从 C# 中删除记录

> ID：11090498
> 
> 赞同：3
> 
> 时间：2012-06-18T20:24:55.640
> 
> 标签：c#, dynamics-ax-2012

我正在处理一个 C# 项目，该项目使用 dll Microsoft.Dynamics.AX.ManagedInterop 与 AX 2012 环境一起工作。在代码中，我需要根据特定条件找到一个 SalesQuotationLine 并将其删除。到目前为止，我可以获得我需要的记录，但我无法删除它，因为我没有使用`TTSBEGIN/TTSCOMMI`T 语句并且我没有使用`FORUPDATE`. 这是我的代码：

```
DictTable dictTable = new DictTable(Global.tableName2Id("SalesQuotationLine"));
int quotationIdFieldId = (int)dictTable.Call("fieldName2Id", "QuotationId");
int bdcParentRecIdFieldId = (int)dictTable.Call("fieldName2Id", "BDCParentRecId");

var query = new Query();
var datasource = query.addDataSource(Global.tableName2Id("SalesQuotationLine"));
var queryRange1 = datasource.addRange(quotationIdFieldId);
queryRange1.value = "=" + line.QuotationId;            

QueryRun queryRun = new QueryRun(query as object);
while (queryRun.next())
{
    var result = queryRun.get(Global.tableName2Id("SalesQuotationLine"));
    result.Delete();
} 
```

我还查看了这里的代码[http://msdn.microsoft.com/en-us/library/cc197113.aspx](http://msdn.microsoft.com/en-us/library/cc197113.aspx)但我发现我无法使用它，因为我正在使用的代码不使用 .NET Business Connector （我不确定什么时候应该使用一个dll而不是另一个）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-19T11:41:13.253

Microsoft.Dynamics.AX.ManagedInterop.RuntimeContext.Current 上的使用`TTSBegin()`和`TTSCommit()`方法。forUpdate 标志可以由 QueryBuildDataSource 设置`update()`。

用 X++ 方法编写它可能更容易（并且更便于维护），只需从 C# 调用该方法。

# android - Android Beam LLCP 协议

> ID：11090500
> 
> 赞同：7
> 
> 时间：2012-06-18T20:25:00.230
> 
> 标签：android, nfc, android-beam

我正在尝试与我的 Galaxy S III 和具有 PN532 NFC 芯片的微控制器进行通信。

由于这是一个微控制器，因此我没有可以使用的默认 LLCP 库，因此我必须自己了解 Android 协议。

谁能为我澄清一下，当我第一次将手机放到设备上时，第一步会期待什么数据包？假设我解析正确，我看到：

```
DSAP: 3F
PTYPE: 0
SSAP: 0 
```

并且

```
DSAP: 1E
PTYPE: C
SSAP: 0 
```

这是正确的路线吗？Android 试图做什么？我希望在信息包之前进行连接尝试？

非常感谢您的澄清。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-06T11:40:32.403

Android在用于 Android Beam 的 LLCP 之上使用[NDEF 推送协议 (NPP) (PDF)。](http://source.android.com/compatibility/ndef-push-protocol.pdf)

因此，您必须在其上同时实现 LLCP（[官方规范下载](http://www.nfc-forum.org/specs/spec_list/)，[韩国镜像](http://nfckorea.tistory.com/entry/Logical-Link-Control-Protocol-Technical-Specification-pdf-5027kB)）和 NDEF-Push。从 API 级别 14 开始，Android 也使用 SNEP 替代 NPP，但[可以自动回退](https://stackoverflow.com/a/10823231)。

# jquery-ui - 由 AJAX 加载的带有 jqGrid 的 jQuery UI 对话框未关闭

> ID：11090502
> 
> 赞同：1
> 
> 时间：2012-06-18T20:25:03.300
> 
> 标签：jquery-ui, jqgrid

我在 jQuery UI 对话框中有一个由 AJAX 加载的 jqGrid。一切正常，除了没有关闭的对话框。当我单击两个按钮时，它会到达警报，但对话框没有被关闭。

```
buttons: {
    'Confirm': function() {
        alert('OK Confirm');
        $('#test-grid').dialog('close');
    },
    'Cancelar': function() {
        alert('OK Cancel');
        $(this).dialog('close');
    }
} 
```

我试过`$('#test-grid').dialog('close')`and `$(this).dialog('close')`，但没有人工作。如果我删除由 AJAX 加载的 jqGrid，一切正常。Firefox 和 Chrome 上的错误控制台为空。

我正在加载 jqGrid 页面：

```
$('#test-grid').load('/grid').dialog('open'); 
```

谁能帮我？

**更新**

我尝试使用 AJAX 加载一个简单的 HTML 片段，但问题仍然存在。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-18T21:12:18.597

问题是调用`load`干扰了打开对话框的调用。您可以通过将 AJAX 内容加载到`test-grid`. 例如：

```
 $('#test-grid-child').load('/grid');
 $('#test-grid').dialog('open'); 
```

* * *

**更新**

我刚刚阅读了[文档`load`](http://api.jquery.com/load/)并对此进行了更多思考。发生的情况是，在`$('#test-grid').load('/grid').dialog('open');`执行代码时，会启动 AJAX 请求并立即创建对话框。但是一旦`load`的 AJAX 请求完成，jQuery 就会返回并覆盖`#test-grid`. 这解释了为什么无法关闭对话框，因为底层标记是从对话框对象下方修改出来的。

将数据检索到子元素消除了这个问题，因为`load`现在`dialog`每个元素都操作 DOM 的不同部分。

请注意，如果 AJAX 请求需要很长时间才能完成，您可能需要考虑实现一个`complete`功能来向用户提供反馈 - 可能通过显示微调器直到数据准备好。例如：

```
$('#test-grid-child').load('ajax/test.html', function() {
  alert('Load was performed.'); // Perform any necessary UI action here
}); 
```

无论如何，比您可能需要的更多信息，但我只是想在我脑海中仍然新鲜的时候更新这个问题......

# java - 如何从使用 Java 的网站获取 favicon.ico？

> ID：11090508
> 
> 赞同：17
> 
> 时间：2012-06-18T20:25:26.863
> 
> 标签：java, image, javax.imageio, ico

所以我正在制作一个应用程序来存储所有用户最喜欢的应用程序的快捷方式，就像一个集线器一样。我可以支持实际文件，并且我有一个`.lnk`用于快捷方式的解析器。我认为该应用程序也支持 Internet 快捷方式会非常好。这就是我正在做的事情：

假设我正在尝试获取[Google 的图标](http://www.google.com/favicon.ico)( `http://www.google.com/favicon.ico`)。

1.  我从删除多余的页面开始（例如`www.google.com/anotherpage`会变成`www.google.com`.

2.  然后，我`ImageIO.read(java.net.URL)`用来获取图像。

问题是`ImageIO`当我调用此方法时永远不会返回图像：

```
String trimmed = getBaseURL(page); //This removes the extra pages
Image icon = null;    
try {
    String fullURLString = trimmed + "/favicon.ico";
    URL faviconURL = new URL(fullURLString);
    icon = ImageIO.read(faviconURL);
} catch (IOException e) {
    e.printStackTrace();
}

return icon; 
```

现在我有两个问题：

1.  Java 是否支持 ICO 格式，即使它来自 Microsoft？
2.  为什么`ImageIO`无法从 URL 读取？

先感谢您！

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-06-18T21:53:33.217

尝试[Image4J](http://image4j.sourceforge.net/)。

正如这个快速的 Scala REPL 会话所示（可粘贴为 Java 代码）：

```
> net.sf.image4j.codec.ico.ICODecoder.read(new java.net.URL("http://www.google.com/favicon.ico").openStream())

res1: java.util.List[java.awt.image.BufferedImage] = [BufferedImage@65712a80: type = 2 DirectColorModel: rmask=ff0000 gmask=ff00 bmask=ff amask=ff000000 IntegerInterleavedRaster: width = 16 height = 16 #Bands = 4 xOff = 0 yOff = 0 dataOffset[0] 0] 
```

* * *

**更新**

回答您的问题：Java 是否支持 ICO？好像不是：

```
> javax.imageio.ImageIO.read(new java.net.URL("http://www.google.com/favicon.ico"))

java.lang.IllegalArgumentException: Empty region! 
```

为什么`ImageIO`无法从 URL 读取？好吧，URL 本身似乎对我有用，因此您可能遇到代理/防火墙问题，或者可能是上述问题。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-12-23T15:22:46.167

旧帖子，但供将来参考：

我为 ImageIO 编写了一个插件，增加了对 .ICO（MS Windows 图标）和 .CUR（MS Windows 光标）格式的支持。

你可以从 GitHub 获取它：[https ://github.com/haraldk/TwelveMonkeys/](https://github.com/haraldk/TwelveMonkeys/)

[安装](https://github.com/haraldk/TwelveMonkeys/#installing)插件后，您应该能够阅读图标，使用原始帖子中的代码，无需任何修改。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-12-02T02:20:41.680

为此，您不需要 ImageIO。只需复制字节，与任何其他静态资源相同。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2020-09-22T06:10:42.497

有用于读取 ico 文件和其他文件的 Apache Commons Imaging：[https ://commons.apache.org/proper/commons-imaging/index.html](https://commons.apache.org/proper/commons-imaging/index.html)

读取 ico 文件的工作方式如下：

```
List<BufferedImage> images = org.apache.commons.imaging.Imaging.getAllBufferedImages(yourIcoFile); 
```

在你的情况下，你必须先下载它，我猜。

# eclipse - 在 Eclipse 中导出和导入 Maven 项目时丢失文件

> ID：11090509
> 
> 赞同：1
> 
> 时间：2012-06-18T20:25:31.927
> 
> 标签：eclipse, maven

我在 Eclipse 中创建了一个 Maven（普通）项目。现在我想导出它。我将它导出到 .jar 存档。但只是为了测试，如果我将相同的内容导入 Eclipse，那么实际的源文件就会丢失。:-) 将 Maven 项目导出到带有原始源文件的 .jar 存档的实际过程是什么，以便我可以将其导入其他地方（例如 Eclipse）并访问源文件？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-18T20:34:14.950

要导出项目，您应该使用`Export.. / General / Archive File`向导。

然后您可以使用`Import... / General / Archive File`向导将其导入回来。

`package`如果你需要一个 jar ，你应该使用 Maven 启动配置，目标类似于[source:jar](http://maven.apache.org/plugins/maven-source-plugin/jar-mojo.html)（生成 Maven 源存档）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-19T06:14:41.057

导出为 .jar 时，选中复选框`Export Java source files and resources`。

# html - 使用 css 的 BODY 应该使用什么字体大小百分比？

> ID：11090510
> 
> 赞同：0
> 
> 时间：2012-06-18T20:25:34.347
> 
> 标签：html

我为我的 html 使用 css 文件。

我的问题是，我应该设置字体大小百分比吗？我应该将其设置为 100%，还是应该不理会它甚至不使用它？

```
BODY {font-family: Verdana, sans-serif ; font-size: 90%;} 
```

我也在为其他标签设置这个字体大小，比如`TD, LI, TH, TABLE`，等等......

我担心如果我更改它，这样字体在我的计算机上看起来还不错，当其他人查看我的网页时，它可能不是正确的设置。

此设置的推荐做法是什么？保持在 100% 吗？

谢谢你

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-19T06:42:21.917

我提前为一个太长的答案道歉......

我相信您在现有答案中遇到的问题可能是您对`100%`实际含义以及如何在 CSS 中首先获得字体大小的误解。请忍受我对事物的冗长、过于简单化的解释，在这里。

在元素上设置字体大小时，可以通过以下两种方式之一进行；相对的或绝对的。相对值以`%`或等单位`em`定义，绝对值以和等单位`px`定义`pt`。还有其他可以使用的单位，但大多数都与网页排版无关。（事实上​​，我认为那`pt`是不相关的）。

当您定义一个绝对值时，您指定的字体会以该大小显示。大致。浏览器、操作系统和用户设置*可以并且将会弄乱这些值*。所以，仅仅因为你设置了 a`font-size: 16px;`并不意味着字体的大小是 16 像素。

**但是，如果***您*设置了 16 像素大小，您通常可以安全地进行设计，前提是您还以像素或相对单位定义页面上其他元素的大小。

那么，相对价值是相对的——但与什么相关呢？*如果您根本没有指定尺寸，它们会是什么*。

有两件事会影响这个“默认大小”：浏览器的默认字体大小（在之前的答案中提到这`16px`是这个默认大小。我既不能确认也不能否认。我从不依赖它），或者有效的 CSS 继承规则。

如果您定义`body`字体大小应为 10px（太小，IMO！），这意味着默认情况下，所有后代 html 标记将使用相同的大小。有时也有例外；并不是所有的浏览器都能很好地使用默认值和继承，一直！但是大多数现代浏览器都可以。

因此，如果您在 a`div`上定义 font-size 应该是`200%`，结果将`20px`在这种情况下，因为您从 html 层次结构继承了 10px 大小，并且您通过将其设置为 200% 将其修改为 20px。将其设置为 2em 将获得相同的结果。（您可以通过将百分比除以 100来“转换”`em`为）`%`

* * *

那么，您应该在页面的根元素上设置什么？`100%`? `90%`? 在我看来，*两者都没有。*您应该设置一个显式值，而不是一个相对值。因为我向你发誓，并不是所有的浏览器都会给你相同的“默认”大小......

因此，将 设置`body`为`16px`。确保您的操作系统、显示器、浏览器或其他任何“放大”或缩小的东西都没有；没有调整字体大小或任何类似性质的东西。然后，您将看到文本（无论您将其设置为何种大小），与其他人的看法非常接近。

*大多数显示器的像素都非常接近相同的大小。*但有一个值得注意的例外：新 iPad 上的视网膜显示屏。它们的像素明显小于几乎所有其他设备。

* * *

您不能也不应该尝试为用户可能拥有的每个可能的奇怪缩放设置调整大小。您可以并且应该适当地设计您的网站，假设人们正在查看 1px=1px，超过 90%。由于视力问题，其余许多人已扩大（放大）其操作系统或浏览器。不用担心；他们这样做是因为他们无法阅读大多数网站的文字！

16px 可能比您在某些内容繁重的网站上习惯的要大，但它是一个不错的起点。我认为使您的网站具有合理的可读性是一件*好事*，但请记住权衡；文本越大，需要滚动的用户就越多。因此，虽然 48px 文本可能*非常*易读，但它会惹恼您的用户。

那么，这些百分比/ems在哪里发挥作用？

由于您已将文档的“根”设置为可靠的绝对数字，因此您可以根据该数字调整其余内容。让你的`h1`元素`175%`也许；`h2`可能是`125%`。您可能会像某些网站那样将项目中的文本大小调整为`li`稍小一些；所以也许那些会是`86%`。但是所有这些百分比都是基于文档根目录的“根”大小，您已将其设置为绝对数字。

然后，您可以更改文档的整个文本大小，同时保持相对大小，只需更改单个值：`body` `font-size`.

最后一点：值的真正微小变化`%`似乎没有反映出来，因为字体系列可能只有某些特定的大小。因此，如果您对其进行设置，`font-size: 99%`它可能不会比它在`100%`. 您只需要在那里进行一些反复试验。

但我很遗憾地说......您不能依赖其他浏览器和其他用户的计算机大小与您的浏览器/计算机完全相同。您的计算机可能会在 95% 和 100% 的特定字体上显示相同的大小，但我的计算机可能会显示较小的字体。*对于这种事情，你无能为力...*

最后，我只能说……“欢迎使用 Web 排版！” （是的......这是一个令人困惑的主题，有很多“也许”和“有点”之类的！）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-18T20:28:37.620

默认字体大小为`16px`. 如果这对你来说没问题，请不要费心改变它。`font-size: 100%;`只是浪费了一行代码。您可能会看到的唯一区别是在移动设备上。

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2012-06-18T21:03:18.093

使用 100% 字体大小是没有用的。这意味着您将使用当前字体大小（在本例中为 16 像素）。使用`px`,`pt`表示绝对大小或`Em`和`%`表示相对大小。有关更多信息，请参阅此页面：http: [//kyleschaeffer.com/best-practices/css-font-size-em-vs-px-vs-pt-vs/](http://kyleschaeffer.com/best-practices/css-font-size-em-vs-px-vs-pt-vs/)

此外，如果您在各种浏览器中尝试检查兼容性，这将很有用。

# sql - 合并正在为特定表执行的复制命令

> ID：11090512
> 
> 赞同：2
> 
> 时间：2012-06-18T20:25:44.883
> 
> 标签：sql, sql-server-2005, merge-replication

是否有一个表可以查看正在为特定表执行的合并复制命令？谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-20T17:10:19.640

不，我看了看，我能找到的最近的帮助我的对象是其中包含冲突数据的冲突表。

# wpf - 如何在wpf中更改图标扩展器

> ID：11090524
> 
> 赞同：2
> 
> 时间：2012-06-18T20:26:30.640
> 
> 标签：wpf

有没有一种方法可以将扩展器的图标更改为 +/-，并将白色作为前景色？我一直在到处寻找，但找不到简单的解决方案。或者更好的是，如何将扩展器图标的颜色更改为白色？我的背景是深色的，所以这就是我问的原因。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-18T20:29:00.830

您将需要创建自定义控件模板，请参阅此 CodeProject 文章： http: [//www.codeproject.com/Articles/248112/Templating-WPF-Expander-Control](http://www.codeproject.com/Articles/248112/Templating-WPF-Expander-Control)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-18T20:27:44.303

您需要更改[`Template`](http://msdn.microsoft.com/en-us/library/system.windows.controls.control.template.aspx)，但您可以将其基于[现有模板](https://stackoverflow.com/questions/1559261/control-template-for-existing-controls-in-wpf)。

# ruby - Sinatra 文件删除器

> ID：11090525
> 
> 赞同：0
> 
> 时间：2012-06-18T20:26:33.667
> 
> 标签：ruby, rubygems, sinatra

我正在使用 sinatra、ruby 和 MongoDB 从 MongoDB 导出 CSV 文件。我能够创建 CSV 文件并将其导出。我导出后删除文件。但只有在我退出 sinatra 后它才会被删除。谁能解释这是为什么？假设`abc****.csv`创建了一个文件。我正在使用删除此文件

```
file_path = '/home/Test_app';
file = Tempfile.new([@@uname,'.csv'],file_path);
file_name = file.path();   
puts file_name  # gives /home/Test_app/xyz****.csv
send_file(file_name, :disposition => 'attachment', :filename =>File.basename(file_name));
File.delete(file_name); 
File.unlink(file_name); 
```

但是只有在我退出 sinatra 服务器后它才会被删除。谁能解释一下？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-18T21:01:16.220

您从不调用`file.close`，这意味着文件将保持打开状态，因此在您的应用程序退出之前不会被删除。

尝试遵循[Tempfile 文档](http://www.ruby-doc.org/stdlib-1.9.3/libdoc/tempfile/rdoc/Tempfile.html)中给出的建议：

```
file = Tempfile.new('foo')
begin
  ...do something with file...
ensure
  file.close
  file.unlink   # deletes the temp file
end 
```

这将确保文件正确关闭和删除，即使在 和 之间的代码中引发异常也是`begin`如此`ensure`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-20T15:26:46.163

也许这是一个大文件；由于 HTTP 连接在流式传输完成之前不会关闭，因此之后的代码`send_file`不会被执行。这可能是一个正当的理由。您是否检查过整个文件是否正在下载到客户端？如果不是这种情况，请尝试使用较小的文件。我假设您已经实现（但没有在此处编写）将数据写入`file_name`from MongoDB 的代码。

# jquery-ui - 自定义 JQuery UI Resizable 方法的最佳方法

> ID：11090537
> 
> 赞同：0
> 
> 时间：2012-06-18T20:27:17.527
> 
> 标签：jquery-ui

我修改了一种 JQuery UI Resizable 方法来实现居中调整大小。如果我只是链接到我修改后的 jQuery UI 源，这很好用。但我想链接到 CDN 托管的缩小 JQuery UI 代码，并在调用 $("#selector").resizable({ .. }); 时注入修改后的 _respectSize 方法。

做这个的最好方式是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-19T02:50:57.720

在引入 jQuery UI 之后和创建小部件之前包括这个`resizable`。

```
$.ui.resizable.prototype._respectSize = function() {
    //Do your custom thing here.
}; 
```

# mysql - 从mysql中选择奇数字符的值

> ID：11090539
> 
> 赞同：0
> 
> 时间：2012-06-18T20:27:28.283
> 
> 标签：mysql

我在 mysql 数据库中有一个具有奇怪值的字段：

```
 ????!"?;%:?*()_+,??????/????\/ 
```

问题是我无法选择它 - 以下语句不返回任何行

```
SELECT *
    FROM `pool_tag` AS `Extent1`
    where `Extent1`.`PoolTag`='????!"?;%:?*()_+,??????/????\/' 
```

该值包含“

我也在尝试使用规则来复制符号，所以使用了这个 sql

```
SELECT *
    FROM `pool_tag` AS `Extent1`
    where `Extent1`.`PoolTag`="????!**""**?;%:?*()_+,??????/????\/" 
```

（注意位置 6 上的双引号）

但是还是没有结果

另一个问题可能是，即使我找到了直接在 sql 查询中处理的特定语法，我也需要从 Entity Framework 中选择它（实际上你看到的查询是由 EF 生成的）

知道如何处理吗？

* * *

**编辑**

我发现了有关 mysql 转义字符的信息，我一一检查了所有内容（“，'，\，％），我发现 % 导致了问题。

如果我从字段和搜索值中删除它，则 sql 有效

如果我将它留在字段中，并尝试在 sql select 中对其进行转义，代码仍然不起作用

例如

```
SELECT *
    FROM `pool_tag` AS `Extent1`
    where `Extent1`.`PoolTag`="????!?;\%:?" 
```

找不到值

```
????!?;%:? 
```

知道为什么吗？

# c# - 从扫描的 TIFF 中裁剪多余的空白区域

> ID：11090542
> 
> 赞同：3
> 
> 时间：2012-06-18T20:27:36.167
> 
> 标签：c#, .net, tiff

我正在扫描的文档小于 8.5 x 11。它们可能更像是 8.5 x 5。正在使用的扫描仪将文档垂直居中并仍然制作 8.5 x 11 TIFF。我正在寻找一种方法来自动删除图像顶部和底部的空白。如果图像的方向发生变化，则图像的所有 4 面都可能存在过多的空白。假设扫描仪上没有设置来阻止它这样做。

**tl; dr**
有人知道可以自动裁剪图像的体面的 TIFF 库吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-28T18:34:16.457

您不一定需要“tiff 库”来执行此操作。你可以在c#中做到这一点，像这样......

*   将 tiff 转换为位图
*   逐像素检查位图以确定空白开始/结束的位置
*   一旦你知道周围空白的像素坐标，你就可以裁剪位图图像
*   保存新图像

参考这些页面了解更多信息：

[http://msdn.microsoft.com/en-us/library/system.drawing.bitmap.getpixel%28v=vs.85%29.aspx](http://msdn.microsoft.com/en-us/library/system.drawing.bitmap.getpixel%28v=vs.85%29.aspx)

[http://msdn.microsoft.com/en-us/library/system.windows.media.imaging.croppedbitmap%28v=vs.85%29.aspx](http://msdn.microsoft.com/en-us/library/system.windows.media.imaging.croppedbitmap%28v=vs.85%29.aspx)

# html - td宽度，不工作？

> ID：11090544
> 
> 赞同：114
> 
> 时间：2012-06-18T20:27:46.147
> 
> 标签：html, css, html-table, width

所以我在这里有这段代码：

```
<table>
    <tr>
        <td width="200px" valign="top">
            <div class="left_menu">
                <div class="menu_item">
                    <a href="#">Home</a>
                </div>
            </div>
        </td>
        <td width="1000px" valign="top">Content</td>
    </tr>
</table> 
```

与 CSS

```
.left_menu {
    background: none repeat scroll 0 0 #333333;
    border-radius: 5px 5px 5px 5px;
    font-family: Arial,Helvetica,sans-serif;
    font-size: 12px;
    font-weight: bold;
    padding: 5px;
}

.menu_item {
    background: none repeat scroll 0 0 #CCCCCC;
    border-bottom: 1px solid #999999;
    border-radius: 5px 5px 5px 5px;
    border-top: 1px solid #FFFFCC;
    cursor: pointer;
    padding: 5px;
} 
```

它在我的浏览器上运行良好，我已经在 Mac 和 PC 的每个浏览器中对其进行了测试，但有人抱怨200`td`的`width`宽度不断变化。我不知道他在说什么。有谁知道为什么他或她看到宽度变化`td`？

* * *

## 回答 #1

> 赞同：138
> 
> 时间：2012-06-18T20:28:56.380

它应该是：

```
<td width="200"> 
```

或者

```
<td style="width: 200px"> 
```

请注意，如果您的单元格包含一些不适合 200px 的内容（如`somelongwordwithoutanyspaces`），则单元格仍会拉伸，除非您的 CSS 包含`table-layout: fixed`表格。

**编辑**

正如 kristina childs 在她的回答中指出的那样，您应该避免使用`width`属性和使用内联 CSS（带有`style`属性）。尽可能将样式和结构分开是一种很好的做法。

* * *

## 回答 #2

> 赞同：33
> 
> 时间：2012-06-18T20:43:52.330

表格中的宽度和/或高度不再是标准的；正如 Ianzz 所说，它们已被弃用。相反，最好的方法是在表格单元格内放置一个块元素，将单元格保持为您想要的大小：

```
<table>
    <tr>
        <td valign="top">
            <div class="left_menu">
                <div class="menu_item">
                    <a href="#">Home</a>
                </div>
            </div>
        </td>
        <td valign="top" class="content">Content</td>
    </tr>
</table> 
```

CSS

```
.content {
    width: 1000px;
}

.left_menu {
    background: none repeat scroll 0 0 #333333;
    border-radius: 5px 5px 5px 5px;
    font-family: Arial,Helvetica,sans-serif;
    font-size: 12px;
    font-weight: bold;
    padding: 5px;
    width: 200px;
}

.menu_item {
    background: none repeat scroll 0 0 #CCCCCC;
    border-bottom: 1px solid #999999;
    border-radius: 5px 5px 5px 5px;
    border-top: 1px solid #FFFFCC;
    cursor: pointer;
    padding: 5px;
} 
```

* * *

## 回答 #3

> 赞同：32
> 
> 时间：2016-07-28T15:08:40.240

```
 <table style="table-layout:fixed;"> 
```

这将强制设置样式宽度`<td>`。如果文本填满它，它将与其他`<td>`文本重叠。所以尝试使用媒体查询。

* * *

## 回答 #4

> 赞同：7
> 
> 时间：2012-06-18T20:29:18.143

您不能在表格的`width`/`height`属性中指定单位；这些始终以像素为单位，但您根本不应该使用它们，因为它们已被弃用。

* * *

## 回答 #5

> 赞同：7
> 
> 时间：2016-11-29T09:01:00.283

你可以试试“table-layout:fixed;” 到你的餐桌

```
table-layout: fixed;
width: 150px; 
```

150px 或您想要的宽度。

参考： [https ://css-tricks.com/fixing-tables-long-strings/](https://css-tricks.com/fixing-tables-long-strings/)

* * *

## 回答 #6

> 赞同：7
> 
> 时间：2018-07-21T08:02:44.117

您可以在`<td>`标签 css 中使用：`display:inline-block`

像：`<td style="display:inline-block">`

* * *

## 回答 #7

> 赞同：6
> 
> 时间：2020-07-25T08:30:37.423

这个问题很容易使用`min-width`和`max-width`在css规则内解决。

HTML

```
<table>
  <tr>
    <td class="name">Peter</td>
    <td class="hobby">Photography</td>
    <td class="comment">A long comment about something...</td>
  </td>
</table> 
```

CSS

```
.name {
  max-width: 80px;
  min-width: 80px;
} 
```

这将强制第一列为 80px 宽。通常我只使用 max-width 而不使用 min-width 来控制文本，因为创建一个具有大部分为空的超宽列的表，所以偶尔会太长。OP 的问题是关于设置为固定宽度，因此这两个规则在一起。在 CSS 中的许多浏览器`width:80px;`中，表格列会被忽略。在 HTML 中设置宽度确实有效，但不是您应该做的事情。

我建议使用最小和最大宽度规则，而不是将它们设置为相同，而是设置一个范围。这样表格就可以完成它的工作，但是您可以给它一些提示，告诉它如何处理过长的内容。

如果我想保持文本不换行并增加行的高度 - 但仍然让用户可以看到全文，我`white-space: nowrap;`在主要规则上使用，然后应用悬停规则删除宽度和 nowrap 规则以便用户将鼠标悬停在其上时可以看到完整的内容。像这样的东西：

CSS

```
.name {
  max-width: 80px;
  white-space: nowrap;
  overflow: hidden;
}
.name:hover {
  max-width: none;
  white-space: normal;
  overflow:auto;
} 
```

这仅取决于您要达到的目标。我希望这可以帮助别人。PS 顺便说一句，对于 iOS，有一个解决悬停不起作用的问题 - 请参阅[CSS Hover Not Working on iOS Safari and Chrome](https://stackoverflow.com/questions/35187970/css-hover-not-working-on-ios-safari-and-chrome)

* * *

## 回答 #8

> 赞同：3
> 
> 时间：2016-11-23T09:04:05.637

试试这个：

```
word-break: break-all; 
```

* * *

## 回答 #9

> 赞同：2
> 
> 时间：2012-12-30T17:39:27.103

尝试使用

```
word-wrap: break-word; 
```

希望这有帮助

* * *

## 回答 #10

> 赞同：1
> 
> 时间：2019-01-14T14:20:20.183

我用

```
<td nowrap="nowrap">
```

防止换行参考：[https ://www.w3schools.com/tags/att_td_nowrap.asp](https://www.w3schools.com/tags/att_td_nowrap.asp)

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2014-03-28T05:44:10.087

注意在tad中调整一列的宽度会影响整个表格

```
<table>
    <thead>
        <tr width="25">
            <th>Name</th>
            <th>Email</th>
        </tr>
    </thead>
    <tr>
        <td>Joe</td>
        <td>joe@email.com</td>
    </tr>
</table> 
```

在我的情况下， thead > tr 上的宽度直接覆盖了 table > tr > td 上的宽度。

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2020-01-20T12:00:29.347

我尝试了许多解决方案，但它对我不起作用，所以我尝试使用 flex 使用表格，它对我来说适用于所有表格功能，如边框折叠等等，唯一的变化是显示属性

这是我的 HTML 要求

```
<table>
  <thead>
    <tr>
      <th>1</th>
      <th colspan="3">2</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>1</td>
      <td colspan="3">2</td>
    </tr>
    <tr>
      <td>1</td>
      <td>2</td>
      <td>3</td>
      <td>4</td>
    </tr>
    <tr>
      <td>1</td>
      <td>2</td>
      <td colspan="2">3</td>
    </tr>
  </tbody>
</table> 
```

我的 CSS

```
table{
    display: flex;
  flex-direction: column;
}
table tr{
    display: flex;
  width: 100%;
}
table > thead > tr > th:first-child{
    width: 20%;
}
table > thead > tr > th:last-child{
    width: 80%;
}
table > tbody tr > td:first-child{
    width: 10%;
}
table > tbody tr > td{
    width: 30%;
}
table > tbody tr > td[colspan="2"]{
    width: 60%;
}
table > tbody tr > td[colspan="3"]{
    width: 90%;
}
/*This is to remove border making 1px space on right*/
table > tbody tr > td:last-child{
    border-right: 0;
} 
```

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2021-04-20T08:32:27.880

如果您没有将表格设置为具有`table-layout: fixed`一定的**宽度**，那么如果内容更宽，表格单元格将超出其自身的宽度。这就是他/她所抱怨的。

* * *

## 回答 #14

> 赞同：-1
> 
> 时间：2019-12-03T13:24:02.063

采用

```
<table style="table-layout:fixed;"> 
```

它将强制表格设置为 100% 宽度。然后使用此代码

```
$('#dataTable').dataTable( {
        bAutoWidth: false, 
        aoColumns : [
          { sWidth: '45%' },
          { sWidth: '45%' },
          { sWidth: '10%' },
              ]
      }); 
```

（表 id 是 dataTable 并且有 3 列）指定每个单元格的长度

# c# - 硬编码的 JsonpResult 值

> ID：11090545
> 
> 赞同：3
> 
> 时间：2012-06-18T20:27:54.857
> 
> 标签：c#, asp.net, asp.net-mvc

我有以下控制器操作：

```
[HttpGet]
        public JsonpResult  getTestValues(int? entityId, int? id)
        {
            return JsonpResult(WebResult.Success());
        } 
```

我有一个调用此控制器的 AJAX 调用，并且必须解析返回的数据对象。如何修改以上内容以返回以下内容？

```
{"data":[{"T1":"t1@test.com","T11":"1234-1234-1234-1234"},
{"T2":"t2@test.com","T22":"1234-1234-1234-1234"}]} 
```

我需要这个来测试我正在开发的 UI 框架。关于如何返回上述硬编码数据的任何建议？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-18T20:31:37.760

是的，您可以使用匿名类型执行此操作：

```
return JsonpResult {
    Data = new {
        data = new List<object> {
           new { T1 = "t1@test.com", T11 = "1234-1234-1234-1234" },
           new { T2 = "t2@test.com", T22 = "1234-1234-1234-1234" },
        }
    }
}; 
```

# php - 使用 window.open() 将表单的输入作为参数传递给 url 中的 .php 文件

> ID：11090546
> 
> 赞同：0
> 
> 时间：2012-06-18T20:27:55.483
> 
> 标签：php, html, window.open

想使用 window.open() 将电子邮件地址作为附加到 url 的参数传递，但我挂断了。这就是返回的内容

> http://app.gogodriver.com/SignupPage.php?email=[object%20HTMLInputElement]

功能：

```
function open_app(tryitemail)
{
    window.open("http://app.gogodriver.com/SignupPage.php?email="+tryitemail, "_blank","width=450, height=650");    
} 
```

HTML：

```
<form id="tryitfree">                                       
    <input class="input" type="text" name="tryitemail" placeholder="Email" size="25" />
    <input type="image" src="images/go-button.png" id="TryItButton" value="email" onClick="open_app(tryitemail)">
</form> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-18T20:34:20.860

这是因为您发送的是输入元素，而不是它的值。你应该做这个：

```
<input type="image" src="images/go-button.png" id="TryItButton" value="email" onClick="open_app(tryitemail.value)"> 
```

# objective-c - 使自定义 UIView 成为自定义 UITableViewCell 中的第一响应者

> ID：11090553
> 
> 赞同：2
> 
> 时间：2012-06-18T20:28:32.887
> 
> 标签：objective-c, ios, uiview, uitableview

我有三个 UITableViewCell 子类。我在视图控制器的表视图中显示这些。我在视图控制器中为 tableView:willSelectRowAtIndexPath: 返回 nil，因为我希望 UITextFields 在我的两个 UITableViewCell 子类中获得焦点并成为第一响应者。

对于第三个 UITableViewCell 子类，我有一个自定义 UIView 子类，其中包含一个 UIWebView。目前在 UIWebView 中加载的 html 内容中的 div 是 1 行高。我之前将 div 高度设置为 100%，但发现滚动开始起作用。如果我点击 div 键盘就会出现。但是，如果用户点击此自定义 UITableViewCell 中的任何其他位置，则不会选择 UIWebView div，并且不会出现键盘。

如何让我的自定义 UITableViewCell 或自定义 UIView 子类成为第一响应者？还是我以错误的方式解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-19T01:36:52.847

我相信你会以错误的方式解决这个问题。返回 nil for`tableView:willSelectRowAtIndexPath:`不会真正帮助您在这里的事业。

相反，您有几个选择。首先，您可以在表格单元格中的文本字段后面创建一个 UIButton，填充整个视图，然后响应对其的触摸并告诉文本字段变为活动状态。像这样：

在 UITableViewCell 子类中连接按钮：

```
[self.button addTarget:self action:@selector(handleTouch) forControlEvents:UIControlEventTouchUpInside]; 
```

触摸时将焦点设置在文本字段上：

```
- (void)handleTouch
{
    [self.textField becomeFirstResponder];
} 
```

另一种选择，也是我不太喜欢的一种，是在委托方法中处理单元格的选择，并告诉单元格的文本字段变为活动状态。像这样：

```
- (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath
{
    MyCustomCellSubclass *cell = [tableView cellForRowAtIndexPath:indexPath];
    [cell.textField becomeFirstResponder];
} 
```

当然，您需要在其中添加一个`textField`属性`MyCustomCellSubclass`才能执行此操作。

希望这可以帮助！

# android - 为什么使用 Android 主机 api 从 Arduino 到 Android 的数据会出现乱码？

> ID：11090567
> 
> 赞同：1
> 
> 时间：2012-06-18T20:29:14.337
> 
> 标签：android, arduino

我按照[本](http://android.serverbox.ch/?p=549)教程开始使用带有 Arduino 板的 Android 主机 API。我正在使用 Arduino Uno。我能够传输数据并打开 Arduino 板上的 LED，并且可以接收来自 Arduino 板的反馈。我正在尝试通过 Arduino 板的 USB 连接向我的 Android 设备写入数据，如下所示：

```
 Serial.print("Test"); 
```

我在 Android 端接收 Arduino 数据，如下所示：

```
byte[] buffer = new byte[10];
int bytes;
//try-catch statements omitted for simplicity
bytes = mUsbConnection.bulkTransfer(mUsbEndpointIn, buffer, buffer.length, 0); 
```

每隔一段时间，数据都会完好无损，但通常情况下，我从 Arduino 收到的是来自我原始消息（t、e、s 和 t）的那些字母的乱码组合。很多时候只显示 1 或 2 个字母。如果有人能指出我正确的方向或分享一些类似的经验，我将不胜感激。谢谢。

**编辑**

当我将数据打印到 Logcat 中时，有多个数据副本。例如，如果我从 Arduino 收到“ste”，它将在 Logcat 中打印 2-5 次。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-19T20:11:45.837

我想我发现了一些至少暂时有效的东西：

```
public void run(){

        int i = 0;

        byte[] buffer = new byte[4];
        byte[] finalBuffer = new byte[8];
        byte[] sendBuffer = new byte[8];

        int bytes = 0;

        while(true){
            try{

                bytes = mUsbConnection.bulkTransfer(mUsbEndpointIn, buffer, buffer.length, 0);

                if (bytes == EXIT_CMD) { 
                    return;
                } 

                if (bytes > 0){

                    byte[] temporaryBuffer = new byte[bytes];

                    System.arraycopy(buffer, 0, temporaryBuffer, 0, bytes);

                    System.arraycopy(temporaryBuffer, 0, finalBuffer, i, bytes);

                    i += bytes;

                    java.util.Arrays.fill(buffer, (byte) 0);
                }

                //Dollar sign terminates string to indicate end of line
                if (finalBuffer[7] == 36){

                    i = 0;

                    System.arraycopy(finalBuffer, 0, sendBuffer, 0, sendBuffer.length); 

                    messageHandler.obtainMessage(UsbHostTestActivity.ARDUINO_MESSAGE, 
                            sendBuffer.length, -1, sendBuffer).sendToTarget();

                    java.util.Arrays.fill(finalBuffer, (byte) 0);
                } 
```

我必须从 Arduino 发送完全由 8 个字符组成的字符串，并且它们必须以美元符号 ($) 结尾以指示行尾，但传递给我的消息处理程序的数据似乎总是正确的。这不是最强大的解决方案，但也许有人可以对其进行修改以使其更好或采取其他方法？请告诉我！

# .net - 在不使用 WMI 的情况下在 .NET 上获取设备

> ID：11090573
> 
> 赞同：-1
> 
> 时间：2012-06-18T20:29:43.423
> 
> 标签：.net, windows, networking, device, nic

如何在没有 WMI 的情况下获取显示设备管理器窗口的设备组或网络设备？我尝试使用 devcon 但返回所有 nics。

例如，devcon 返回：

![在此处输入图像描述](../Images/ca42213736c28c34d70b8c37b3aeed7e.png)

我只想要这些（没有显示隐藏设备选项）

![在此处输入图像描述](../Images/4d4c48698f2b98eb4687890cb7c9b015.png)

devcon 或 net framework 2、想法或解决方法的任何类型的解决方案如果有效，都将被视为解决方案。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-18T20:56:28.673

要列出网络适配器，您可以使用[`GetAdaptersInfo`](http://msdn.microsoft.com/en-us/library/windows/desktop/aa365917%28v=vs.85%29.aspx)WinAPi 函数，因为您使用的是 .Net，请尝试[PInvoke](http://www.pinvoke.net/default.aspx/iphlpapi.getadaptersinfo)页面以获取示例。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-18T21:05:40.703

尝试[System.Net.NetworkInformation.NetworkInterface.GetAllNetworkInterfaces()](http://msdn.microsoft.com/en-us/library/system.net.networkinformation.networkinterface.getallnetworkinterfaces)。它返回所有检测到的网络接口的集合。然后，您可以将其过滤到运行状态为“Up”和/或具有有效 IP 接口属性（例如定义的 IPv4/IPv6 地址）的接口

# jquery-mobile - 在 jQuery 模板中定义按钮

> ID：11090574
> 
> 赞同：0
> 
> 时间：2012-06-18T20:29:47.300
> 
> 标签：jquery-mobile, jquery-templates

我正在尝试使用 jQuery 模板显示一个按钮。代码如下：

```
 <script id="EmailContainerTemplate" type="text/html">
    <div><a href="mailto:${EMailAddress}" data-role="button">${EMailAddress}</a></div>
 </script> 
```

目标 div 定义为：

```
<div id="EmailContainer" class="center-wrapper"> </div> 
```

以及模板绑定代码：

```
$("#EmailContainer").append($("#EmailContainerTemplate").tmpl(contact)); 
```

但它显示为超链接。有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-18T20:50:23.857

在新标记上触发`create`事件

```
$( ...new markup that contains widgets... ).appendTo( ".ui-page" ).trigger( "create" ); 
```

请参阅[增强新标记部分](http://jquerymobile.com/test/docs/pages/page-scripting.html)

# lotus-notes - 控制用户对单个文档的访问

> ID：11090579
> 
> 赞同：1
> 
> 时间：2012-06-18T20:29:59.430
> 
> 标签：lotus-notes, xpages

我有一种默认情况下用户不应该阅读的文档类型。允许单个给定用户访问读取此类型的单个给定文档的最佳实践是什么？

示例：用户创建一个“活动”，然后可以邀请其他用户加入该活动。未受邀用户无法查看该活动中的任何字段，而受邀用户可以查看所有字段（但仅限于该特定活动）。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-18T20:45:18.640

真正唯一的选择是使用[Reader fields](http://publib.boulder.ibm.com/infocenter/domhelp/v8r0/index.jsp?topic=/com.ibm.designer.domino.main.doc/H_ABOUT_RESTRICTING_ACCESS_TO_SPECIFIC_DOCUMENTS_USING_A_READERS_FIELD.html&resultof=%22readers%22%20%22reader%22%20%22fields%22%20%22field%22%20)。它是一种特殊类型的字段，可根据存储在该项目中的值控制对文档的访问。因此，您可以为每个文档设置不同的读者访问列表。

# javascript - 虽然的缺点！未定义的数组循环

> ID：11090584
> 
> 赞同：0
> 
> 时间：2012-06-18T20:30:08.087
> 
> 标签：javascript

根据[这个 JSPerf](http://jsperf.com/fastest-array-loops-in-javascript/5) While ！在所有浏览器中，未定义样式数组循环的速度要快约 10 倍。这种循环方式的缺点是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-18T20:33:48.877

如您所见，我们谈论的是每秒数百万次操作的 10 倍快/慢，这并不足以担心。

这种风格的一个可能的缺点是其他开发人员的可读性，这比“性能提升”更重要。

判断自己，什么更具可读性？

```
// Chrome 21: 5M operations per second
var a;
while ((a = arr[i++]) !== undefined) {
    someFn(a);
}

// Chrome 21: 324k operations per second
for (var i = 0; i < arr.length; i++) {
    someFn(arr[i]);
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-18T20:36:48.627

它实际上是测试用例中的一个错误，每次测试运行的迭代器都没有被重置为零（即，只有第一次测试运行滚动完整循环，下一次运行的迭代器已经超过数组的末尾，因此滚动零次）。请参阅[更正的测试套件](http://jsperf.com/fastest-array-loops-in-javascript/7)以获取真正的基准。

（注意：我没有检查所有的测试用例，其他的也可能有缺陷）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-18T20:32:24.457

我能看到的主要缺点是你不能跳出循环！您很快就会遇到无响应的 UI。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-18T20:53:29.450

缺点： 1\. 如果 a[i] 已经被使用，它不再是未定义的。因此，您可能会做的比预期的更多。2\. 可读性，很难知道终点（除非你发表一些评论；）没有别的。

新版本仍然没有太大差异，但是如果您需要速度，那么请好好评论并好好测试。

如果你的函数“someFn(a);” 有一个比这些测试更多的计时器，那么如果它很重要，我建议测试你自己的循环。

如果不总是坚持整洁的编码。

# objective-c - NSTimer 在 iPad 上不会失效，但在 iPhone 上运行良好

> ID：11090589
> 
> 赞同：1
> 
> 时间：2012-06-18T20:30:34.303
> 
> 标签：objective-c, ios, xcode, nstimer

我有一个按时钟运行的重复计时器。在时钟运行期间，我调用 stopTimer 并且时钟应该停止。这在 iPhone 上 100% 有效，但在 iPad 上有时无法停止计时器。这发生在大约 50% 的时间里。NSLog 在 stop 方法中被调用。

这是我的计时器代码：

```
- (void)startSliderTimer
{
    // Get start time
    [self stopTimer];
    startTime = [NSDate timeIntervalSinceReferenceDate] + kmaxTimePerSlider;
    self.timer = [NSTimer scheduledTimerWithTimeInterval:0.01f target:self selector:@selector(updateClock) userInfo:nil repeats:YES];
}

- (void)updateClock
{
    NSTimeInterval currentTimer = [NSDate timeIntervalSinceReferenceDate];
    NSTimeInterval currentTimeLeft = startTime - currentTimer;
    if (currentTimeLeft >= 0) {
        int seconds = currentTimeLeft;
        float milliseconds = currentTimeLeft - seconds;
        int mill = milliseconds * 1000;
        NSString* displayTime = [NSString stringWithFormat: @"%02d:%03d",seconds,mill];
        timerLbl.text = displayTime;
    } else {
        [self tooSlow];
    }
}

- (void) stopTimer
{
    NSLog(@"%s",__FUNCTION__);
    if (self.timer) {
        NSLog(@"Stop Timer");
        [self.timer invalidate];
        self.timer = nil;
    }
} 
```

我刚刚尝试像这样运行计时器作为另一个问题/答案中的建议，但它仍然并不总是无效：

```
self.timer = [NSTimer timerWithTimeInterval:0.01f target:self selector:@selector(updateClock) userInfo:nil repeats:YES];
    [[NSRunLoop mainRunLoop] addTimer:self.timer forMode:NSRunLoopCommonModes]; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-18T21:03:04.980

创建计时器而不使用`+timerWith...`方法对其进行调度，然后将其安排在自己的 runloop 上，`[[NSRunLoop currentRunLoop] addTimer:timer forMode: NSRunLoopCommonModes]`以便在所有 runloop 上运行它。让我知道这是否有效。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-18T21:27:05.457

对于游戏，也许您应该使用 CADisplayLink 而不是 NSTimer。

# c# - JSON编解码#2

> ID：11090593
> 
> 赞同：0
> 
> 时间：2012-06-18T20:31:03.980
> 
> 标签：c#, json, encoding

我最近一直在为 Elastic Search 使用 JSON REST 服务。我遇到的最常见的问题是 JSON 中 HTML 的编码和编码。

在这一点上，我尝试了 和 的组合，`htmlencode`但`htmldecode`有些角色显得很有趣。

处理此 HTML 的最佳方式是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-27T19:43:40.323

我使用 JSON.NET 进行编码和解码，它似乎没有任何问题。我强烈推荐任何想要使用 JSON 的人使用它。

# vb.net - vb6 to vb.net listview FindItemWithText 零错误

> ID：11090594
> 
> 赞同：0
> 
> 时间：2012-06-18T20:31:18.680
> 
> 标签：vb.net, listview, vb6

我正在尝试在我的 .net 应用程序中为列表视图使用一些 VB6 代码。但是，一旦将其转换为 vb.net 代码，我似乎无法通过：

```
Dim ListObj As System.Windows.Forms.ListViewItem
ListObj = LV1.FindItemWithText(Name_Renamed, True, 0) 
```

它一直告诉我

> InvalidArgument=“0”的值对“startIndex”无效。参数名称：startIndex

我尝试输入**1**而不是**0**，但仍然收到与上述相同的错误消息。任何帮助都会很棒！

大卫

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-18T21:13:04.130

Please try with this changes to your code

```
Dim ListObj As System.Windows.Forms.ListViewItem 
if LV1.Items.Count > 0 then
    ListObj = LV1.FindItemWithText(Name_Renamed, True, 0)
end if 
```

The overload of the method FindItemWithText taking the startindex parameter, throw the InvalidArgument exception when the items count is zero.

# ios - 定时器不能正常工作

> ID：11090596
> 
> 赞同：0
> 
> 时间：2012-06-18T20:31:31.887
> 
> 标签：ios, nstimer

我在特定时间间隔运行方法时遇到问题。我有一个方法。据我所见，存储第二个值（mynumber）的变量未正确读取。mynumber 假设可以保存从网站提取的 200 秒，但它似乎不起作用。displayinterstitial 在相当短的时间内被调用。我希望得到一些指向正确方向的指针。

```
-(void)connectionDidFinishLoading:(NSURLConnection*)connection
{
  NSString *theResult = [[NSString alloc] initWithBytes:[webData mutableBytes] 
                                                 length:[webData length]
                                               encoding:NSUTF8StringEncoding];
  NSLog(@"xml : %@",theResult); 
  mynumber =[theResult doubleValue];
}

-(void)test
{
  if(Callcount ==1)
  {
    [self performSelector:@selector(displayInterstitial)
               withObject:nil
               afterDelay:mynumber];
    }
 } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-18T20:51:34.143

几乎可以肯定，`test`在 之前调用`connectionDidFinishLoading`，或者`mynumber`在调用时不是 200 `test`。您是否验证了这些调用的顺序？您是否验证了被调用`mynumber`点的值`test`？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-18T20:54:31.287

您是否确认在调用 performSelector 时值为 200，而不是在将值分配给 mynumber 时？您如何检查，我在测试函数中没有看到对 NSLog 的任何调用。

如果它是 200，那么您确定您没有连续多次运行代码，并且短暂的触发时间实际上是之前对 performSelector 的调用，这些调用刚刚到期？

# ruby - DataMapper `Decimal` 属性可以自动舍入到正确的比例吗？

> ID：11090599
> 
> 赞同：2
> 
> 时间：2012-06-18T20:31:42.763
> 
> 标签：ruby, decimal, datamapper, rounding, datamapper-1.2

假设我有以下 DataMapper 模型：

```
class Payment
  include DataMapper::Resource

  property :id, Serial
  property :amount, Decimal, precision: 8, scale: 2
end 
```

然后我执行以下操作：

```
p = Payment.new(:amount => 12.3245) 
```

这笔付款将无效（至少在 DataMapper 1.2 中），说明`Amount must be a number`.

当然，数量**是**一个数字（**握拳**）；它的小数位数比酒店接受的要多。如果我这样做`p.amount = p.amount.round(2)`，付款将有效。

我**可以**写一个 setter 来消除这种烦恼：

```
def amount=(val)
  @amount = val.round(2)
end 
```

...但是我很烦恼在不同的模型上编写一堆相同的设置器。

我更愿意在`Decimal`系统范围内对所有属性使用相同的、合理的规则来处理这个问题。即，**由于您知道自己的比例，因此在保存之前四舍五入到该比例**。

这是否可以通过配置选项或初始化程序来处理？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-19T13:00:49.123

您可以修改 DataMapper 的`Decimal`类（[原始](https://github.com/datamapper/dm-core/blob/v1.2.0/lib/dm-core/property/decimal.rb)位于`dm-core-1.2.0/lib/dm-core/property/decimal.rb`）：

```
module DataMapper
  class Property
    class Decimal
      alias :original_typecast_to_primitive :typecast_to_primitive
      def typecast_to_primitive(value)
        typecasted = original_typecast_to_primitive(value)
        typecasted.round(@scale) if typecasted.respond_to?(:round)
      end
    end
  end
end 
```

`NiceDecimal`或者您可以使用新行为定义您自己的属性类型。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-11-30T17:30:49.597

您是否考虑过为每个比例类别编写自己的 DataMapper 数据类型？这样，就没有猴子补丁，您可以根据需要指定任意数量的案例，而不会在任何现有类中乱扔`if`/`switch`语句。DataMapper 对此有一个机制，请参阅[属性文档](http://datamapper.org/docs/properties.html)的“可用类型”部分中的自定义数据类型列表。

# objective-c - 为什么需要 -ObjC 链接器标志来链接静态库中的类别？(LLVM)

> ID：11090601
> 
> 赞同：10
> 
> 时间：2012-06-18T20:31:58.563
> 
> 标签：objective-c, llvm, llvm-3.0

**关于 Apple 的技术问答：http:** [//developer.apple.com/library/mac/#qa/qa1490/_index.html](http://developer.apple.com/library/mac/#qa/qa1490/_index.html)

我认为编译器可以在编译时标记对类别中定义的方法的调用（它知道它们是在类别中定义的，而不是在主类中，因为原型在一个`@interface Class (Category)`部分中） - 所以它可以在目标文件中构建一个表“外部类别方法”。然后，链接器在进行正常链接之后，应该能够连接/合并和处理来自所有对象的“外部类别方法”表，并在所有链接的框架/库/对象的匹配类类别中查找匹配符号，然后它可以拉入尚未“进入”目标的那些。

一定有什么我错过了，但它是什么？为什么这是不可能的？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-06-18T22:55:20.397

链接器将静态库视为一大堆旧的随机片段集合，它将从中提取单个片段来满足来自链接单元其余部分的任何符号请求。

即如果主程序调用`_foo`并且`_foo`只出现在静态库中，那么 将`_foo`连同任何依赖符号一起被拖入。

但是，当您调用类别中的方法时，由于 Objective-C 的动态性，没有特定的符号引用。

该`-ObjC`标志告诉链接器，因此，它应该从静态库中获取所有类别并将它们放入主二进制文件中。

* * *

这有点令人困惑，并且假设编译器应该对此更聪明（并且可以肯定的是，它应该在开发工具级别提供帮助）。重要的是要记住几件事：

*   在链接器滚动时，头文件中声明的任何内容都几乎丢失了。符号是由编译单元创建的，而不是由头文件创建的。头文件几乎生成了一个符号将在以后具体创建或由链接实现的承诺，但不能在其自身中创建符号（否则每个编译单元 - 每个 .o - 最终都会得到一个副本符号和欢闹将在链接时随之而来）。

*   Objective-C 是完全动态的。当您说`[(id)foo bar];`时，唯一的要求是在之前的*某个地方*`bar`定义。它是否真正实现并不重要（直到运行时）。

**   类别不必有对应的@implementations；类别可用于声明可能存在的方法，事实上，在添加`@optional`到之前`@protocol`，通常在`NSObject`(ewwwwww) 上使用类别而不`@implementation`说“嘿，此可选方法可能在运行时存在”。

    *   编译和链接是完全独立的过程。编译就是扩展代码并将其转换为可执行字节库。链接就是获取这些库并将它们组合成可以实际运行的东西，包括解决库之间的所有依赖关系。编译器并不真正知道如何链接某些东西，并且链接器没有任何关于可能已经定义的东西（没有产生硬符号）的信息。* 

 *最终结果？

链接器没有足够的信息来解决依赖关系。*

# ruby-on-rails - 如何从我的 Rails 应用程序中删除网站图标

> ID：11090602
> 
> 赞同：4
> 
> 时间：2012-06-18T20:32:10.020
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, favicon

我有一个 rails 3.2.6 应用程序，我正在使用资产管道，但我没有 favicon.ico，但由于某种原因，我的应用程序一直在寻找它，这导致了问题

```
Started GET "/favicon.ico" for 127.0.0.1 at 2012-06-18 16:20:44 -0400
Processing by PlaylistsController#index as 
```

我不知道是什么导致它被调用...在我的应用程序中根本没有任何包含文本 favicon

我的问题是，rails 中是否有一个地方我可以告诉它停止？

这是我的头部信息以防万一

```
<head>
  <title>Playlist</title>
  <meta content='width=device-width, initial-scale=1.0' name='viewport'>
  <!--[if lt IE 9]>
    <script src="http://html5shim.googlecode.com/svn/trunk/html5.js" type="text/javascript"></script>
  <![endif]-->
  <link href="/assets/application.css?body=1" media="all" rel="stylesheet" type="text/css" />
    <link href="/assets/common.css?body=1" media="all" rel="stylesheet" type="text/css" />
    <link href="/assets/app.css?body=1" media="all" rel="stylesheet" type="text/css" />
    <link href="/assets/bootstrap_and_overrides.css?body=1" media="all" rel="stylesheet" type="text/css" />
    <link href="/assets/jquery-ui-1.8.21.custom.css?body=1" media="all" rel="stylesheet" type="text/css" />
    <link href="/assets/main.css?body=1" media="all" rel="stylesheet" type="text/css" />
    <link href="/assets/dataTables/jquery.dataTables.css?body=1" media="all" rel="stylesheet" type="text/css" />
    <link href="/assets/dataTables/jquery.dataTables.bootstrap.css?body=1" media="all" rel="stylesheet" type="text/css" />
  <script src="/assets/jquery.js?body=1" type="text/javascript"></script>
    <script src="/assets/jquery_ujs.js?body=1" type="text/javascript"></script>
    <script src="/assets/dataTables/jquery.dataTables.js?body=1" type="text/javascript"></script>
    <script src="/assets/dataTables/jquery.dataTables.bootstrap.js?body=1" type="text/javascript"></script>
    <script src="/assets/jquery-ui.js?body=1" type="text/javascript"></script>
    <script src="/assets/bootstrap.js?body=1" type="text/javascript"></script>
    <script src="/assets/editable.js?body=1" type="text/javascript"></script>
    <script src="/assets/mutils.js?body=1" type="text/javascript"></script>
    <script src="/assets/custom.js?body=1" type="text/javascript"></script>
    <script src="/assets/application.js?body=1" type="text/javascript"></script>
  <link href="/assets/datatables.css?body=1" media="screen" rel="stylesheet" type="text/css" />
  <meta content="authenticity_token" name="csrf-param" />
    <meta content="Pccg3siV8wY7LftMfpyi5rgFArjehQb7g5o1BF7QL1I=" name="csrf-token" /> 
```

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-06-18T21:15:27.143

不，没有。

所有当前流行的浏览器（Seamonkey 除外）都会向自己发出 GET 请求`/favicon.ico`，并且无法阻止它们这样做。如果它不存在，他们仍然会请求它，并继续请求它；您的应用程序或服务器的任何内容都无法改变这一点。

默认情况下， Rails 在文件夹中包含一个大小为 0 的 favicon.ico 文件，`public`因此不会发送一个永远不会在响应中看到的 HTML 404 页面，而是发送一个内容长度为零的响应，这（在大多数生产配置下）将被缓存并且会更快，因为它不必由 Ruby 处理。

# android - Android SyncAdapter 自动初始化同步

> ID：11090604
> 
> 赞同：15
> 
> 时间：2012-06-18T20:32:16.220
> 
> 标签：android, accountmanager, android-syncadapter

我有一个`SyncAdapter`我的应用程序，以及一个`AccountManager`将我的应用程序帐户添加到 Android 帐户管理器。当我将帐户添加到客户经理时，我的代码如下所示：

```
Bundle data = new Bundle(5);
data.putString(_PEOPLE_ID, people_id);
data.putString(_FIRST_NAME, first_name);
data.putString(_LAST_NAME, last_name);
data.putString(_PLAN, plan);
data.putString(_BIRTHDAY, birthday);
Account account = new Account(username, _ACCOUNT_TYPE);
try {
    boolean created;
    created = _account_manager.addAccountExplicitly(account,
                                   _cryptography.encrypt(_SEED, password), data);
    response.accountCreated(created);
    _account_manager.setAuthToken(account, _TOKEN_TYPE, session_token);
    _model.updateActiveAccount(people_id, username, password);
    SharedPreferences.Editor settings = _settings.edit();
    settings.putString(_ACCOUNT_TYPE, account.name);
    settings.putString(_TOKEN_TYPE, session_token);
    settings.commit();
    // Tells the content provider that it can sync this account
    ContentResolver.setIsSyncable(account, AUTHORITY, 1);
    final Bundle extras = new Bundle(1);
    extras.putBoolean(SYNC_EXTRAS_INITIALIZE, true);
    ContentResolver.addPeriodicSync(account, AUTHORITY, extras, 900);
} catch (Exception e) {
    Ln.e(e.getCause());
} 
```

我可以通过设置成功将帐户添加到帐户管理器，但我还必须在设置中手动为帐户启用同步，即使在模拟器上启用了后台数据和自动同步设置。如果我手动启用同步，则同步执行良好，只是默认情况下不会启动。

* * *

## 回答 #1

> 赞同：30
> 
> 时间：2012-06-19T18:24:48.227

```
ContentResolver.setIsSyncable(account, AUTHORITY, 1);
ContentResolver.setSyncAutomatically(account, AUTHORITY, true); 
```

正如[Blehi](https://stackoverflow.com/a/11090837/910718)所说，将启动给定帐户的自动同步，给定全局设置，启用“后台数据”和“自动同步”。

为了防止背靠背同步（[来自 jcwenger](https://stackoverflow.com/a/8153280/910718)），请确保 `SyncAdapter.onPerformSync(...)`调用中的任何方法`ContentResolver.notifyChange(...)`用于`ContentResolver.notifyChange(uri, observer, false)`标记通知不触发同步调用（第三个参数是`syncToNetwork`）。

如果您使用 为`ContentProvider`您执行插入/删除/更新，那么`SyncAdapter`调用是有意义的，`ContentResolver.notifyChange(...)`这样当应用程序可见时，用户可以从 接收更新`SyncAdapter`，这意味着您将`ContentProvider`进行`ContentResolver.notifyChange(...)`调用。为了让这个设置正常工作，我添加了（按照[开发指南](http://developer.android.com/resources/samples/SampleSyncAdapter/index.html "同步适配器示例")）`CALLER_IS_SYNC_ADAPTER`查询参数到每个用于`SyncAdapter`. 将此方法添加到`ContentProvider`以测试传入的 URI

```
/**
 * Determines if the given URI specifies that the request is coming from the sync adapter.
 * @param uri the given URI
 * @return true if the uri specifies that the request is coming from the sync adapter
 */
private boolean callerIsSyncAdapter(Uri uri) {
    final String is_sync_adapter = uri.getQueryParameter(CALLER_IS_SYNC_ADAPTER);
    return is_sync_adapter != null && !is_sync_adapter.equals("0");
} 
```

那么你可以做

```
getContext().getContentResolver().notifyChange(uri, observer, !callerIsSyncAdapter(uri)); 
```

每当您需要发送更改通知时。

如果您想安排以一定频率定期执行同步（轮询服务器），请将其添加到`ContentResolver.setSyncAutomatically(...)`调用中。

```
ContentResolver.addPeriodicSync(account, AUTHORITY, new Bundle(), frequency_in_seconds) 
```

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2013-12-05T11:38:26.430

只是为了强调，似乎 addPeriodicSync()***需要***setSyncAutomatically()，即使文档说 setSyncAutomatically() 仅用于检测网络痒痒。

请注意，如果少于一分钟，则该周期将被更正为 >60 秒。

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2012-06-18T20:52:46.910

您必须将帐户设置为默认可同步：

```
ContentResolver.setIsSyncable(account, AUTHORITY, 1);
ContentResolver.setSyncAutomatically(account, AUTHORITY, true); 
```

我使用上述 2 行，它工作正常。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2015-06-23T11:45:53.933

最初创建一个帐户并使用 AccountManager 检查同步支持。如果帐户支持同步，则调用 setIsSyncable() 和 setSyncAutomatically()。

```
AccountManager accountManager = (AccountManager) this.getSystemService(ACCOUNT_SERVICE);
if(accountManager.addAccountExplicitly(newAccount, null, null)){
         ContentResolver.setIsSyncable(account, AUTHORITY, 1);
         ContentResolver.setSyncAutomatically(account, AUTHORITY, true);
} 
```

然后您可以随时触发同步。它会触发。

注意： setSyncAutomatically() 的 onPerformSync() 将首先被调用，然后才会触发其他同步请求。但是要进行强制同步，只需添加 2 个额外的标志。

```
Bundle bundle= new Bundle();
    bundle.putBoolean(
            ContentResolver.SYNC_EXTRAS_MANUAL, true);
    bundle.putBoolean(
            ContentResolver.SYNC_EXTRAS_EXPEDITED, true);
    ContentResolver.requestSync(account, AUTHORITY, bundle); 
```

# javascript - 我如何使用 jquery 循环我的 JSP 响应

> ID：11090611
> 
> 赞同：0
> 
> 时间：2012-06-18T20:32:54.093
> 
> 标签：javascript, jsp

jquery 看起来像这样

```
 $.post('JSP/processForm.jsp', $("#Form").serialize(),
          function(data){
          //I want to iterate through every line in the data object returned here.

   }); 
```

我搜索并尝试了：

```
$.each($(data), function(key, value) {
      alert(value);
}); 
```

但这没有用。我知道响应需要首先编码到一个 jQuery 对象中。

```
$(data) 
```

但我似乎无法找到一种方法来遍历每一行。jsp代码很简单：

```
out.println("Test");
out.println("Test Email");
out.println("Test CellPhone");
out.println("305-777-5587"); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-18T20:41:39.780

需要注意的几点：

*   您的 jsp 可能会被渲染并返回一个表明它是 html 内容的标题。您（有点武断地）决定每一行新的文本代表一个新的数据。
*   jQuery 每个文档都显示它仅适用于集合，因此不需要 jQuery 包装您的对象。(http://api.jquery.com/jQuery.each/) 但是，jQuery 没有将返回的 html 解析为 javascript 集合对象的方法。
*   如果您真的想以 javascript 结构化数据对象结束，您可以考虑将输出作为 JSON（javascript 对象表示法）发送。从我所看到的情况来看，它似乎更适合这种情况。

如果您确实想以这种方式继续，则需要编写一些 javascript 以在新行处拆分您的响应 html。它可能看起来像这样（你可能需要玩弄它）

```
var myData = data.split(/\r\n|\r|\n/); 
```

# jquery - 隐藏上传表单而不使用显示：无

> ID：11090613
> 
> 赞同：0
> 
> 时间：2012-06-18T20:33:13.777
> 
> 标签：jquery, html, css, jquery-animate

一旦用户提交表单，我需要在我的页面上隐藏表单。通常我只是使用`display: none`，但由于我使用的是 jQuery 文件上传插件，它会在表单不可见时终止传输。现在我在提交表单时这样做：

```
// Switch out the form for upload progress
$('#upload-form').animate({opacity: 0}, function() {
    $('#progress-container').fadeIn('fast');
}); 
```

但是，`#progress-container`由于元素仍然存在并且只是不可见，因此 div 不会出现在上传表单以前的位置。换句话说，它被分流在它们下面。

有没有办法在不使用的情况下正确隐藏表单和其中的元素`display: none`并使`#upload-container`div 出现在正确的位置？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-18T20:59:31.653

您可以尝试将表单内部 html 的值设置为 NULL。

```
$('#upload-form').html(''). 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-18T20:55:59.617

发布此消息后不久就得到了脑电波。事实证明，这实际上并没有那么难。这是最终的代码：

```
// Switch out the form for upload progress
$('#upload-form').animate({opacity: 0}, function() {
    $('#upload-form').css('position', 'absolute');
    $('#progress-container').fadeIn('fast');
}); 
```

现在`#progress-container`div 漂浮在表单的顶部。

# javascript - 将 setInterval 存储为对象属性

> ID：11090617
> 
> 赞同：0
> 
> 时间：2012-06-18T20:33:26.963
> 
> 标签：javascript, jquery

所以我想将 setInterval 存储为一个对象属性，因为我经常喜欢使用短语“autoPlay”来描述一个立即启动的旋转器。当我在一系列脚本中多次使用“autoPlay”时，当我尝试清除它们时，我的 JS 会出错，因为不确定要清除哪个。我的补救措施是将它作为一个属性放在某个地方，这样我就可以通过一个对象来访问它，比如“newsRotator.autoPlay”。问题是，我不确定如何以这种方式存储它，因为它通常被放置在一个基本变量中，如下所示：

```
autoPlay = setInterval(this.forwardSlide, 5000); 
```

这是我尝试将其存储为对象属性的示例之一，但无法清除间隔：

```
var newsRotator = {
    run: function () {
        $('.arrow').on('click', function (e) {
            e.preventDefault();
            clearInterval(newsRotator.autoPlay);
            if ($(this).hasClass('back')) {
                newsRotator.backSlide();
            } else {
                newsRotator.forwardSlide();
            }
        });
    },
    backSlide: function () {
        (goes back one slide)
    },
    forwardSlide: function () {
        (goes forwardone slide)
    },
    autoPlay: setInterval(this.forwardSlide, 5000),
    init: function () {
        this.run();
    }
}

newsRotator.init() 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-18T20:40:05.390

这实际上不是一个[对象构造函数](https://stackoverflow.com/a/1115565/752213)，因此它不会创建`this`您需要的范围。因此，当`setTimeout`被调用时，`this`指的是窗口对象，它不包含您正在引用的对象属性......

尝试按如下方式创建对象：

`function NewsRotator() { ... }`

然后实例化一个`new`：

`var newsRotator = new NewsRotator();`

然后，`this`关键字的作用域是该特定实例。

# objective-c - UITableView 只显示一些图片

> ID：11090618
> 
> 赞同：0
> 
> 时间：2012-06-18T20:33:31.603
> 
> 标签：objective-c, uitableview

我有一个 UITableView，它在每一行中显示图像。我遇到的问题是它只显示前三行的图像，其余的不会显示。为了进行测试，我从第二张图片中将其设置为完全一样的显示（所以只有第一张不同）。

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath {
    static NSString *CellIdentifier = @"Cell";

    UITableViewCell *cell = (UITableViewCell *) [tableView dequeueReusableCellWithIdentifier:CellIdentifier];

    if (cell == nil) {
        cell = [[UITableViewCell alloc] initWithStyle:UITableViewCellStyleSubtitle reuseIdentifier:CellIdentifier];

    }
    // Configure the cell...

    cell.textLabel.text = [booklist objectAtIndex:indexPath.row];
    cell.textLabel.lineBreakMode = UILineBreakModeWordWrap;
    cell.textLabel.numberOfLines = 2;
    cell.detailTextLabel.text = @"(opt) We can add more info here";
    cell.detailTextLabel.textColor = [UIColor whiteColor];

    cell.imageView.image = [UIImage imageWithContentsOfFile:MyImagePath];

    //Arrow 
    cell.accessoryType = UITableViewCellAccessoryDisclosureIndicator;

    return cell; } 
```

有人可以帮忙吗？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-19T13:12:12.973

显然，我存储文件名的数据库数据存在一些问题。我重新填充了它（使用相同的数据！），现在它工作正常。

不明白为什么，但它正在工作。

# c++ - 调试 MS VC++ 2005 中的堆损坏错误

> ID：11090622
> 
> 赞同：0
> 
> 时间：2012-06-18T20:34:12.210
> 
> 标签：c++, windows, visual-studio-2005, msvcrt, crt

我正在构建一个应用程序，其输出是最终被另一个客户端应用程序使用的库。我最近发现我正在使用`/MDd`代码生成（调试 CRT 库）在调试模式下构建我的应用程序，并且即使`/MD`在调试模式下使用，客户端应用程序也是针对发布 CRT 构建的。因此，这可能会导致一些内存堆损坏错误。为了确认，我在发布模式下测试了所有内容，它似乎工作正常。

为了解决这个问题，我也尝试了`release with debug info`构建（`/MD`）并将客户端应用程序的调试构建与此`relwithdebinfo`构建相关联，但现在在测试我的示例时，我在客户端应用程序中看到了一些奇怪的行为。准确地说，当我分配一个字符串时，说使用：

```
std::string client_str = some_namespace_in_my_library::class_name::string_name, 
```

我发现 client_str 没有分配，而是保持为空。当一切都在调试中构建时（当存在混合和匹配时），这工作正常。任何想法为什么会发生这种情况？上面引用的命名空间中的字符串是类的静态公共成员，`class_name`. 所有这些都在 MS VC++ 2005 上。非常感谢任何建议/帮助。谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-13T03:58:52.993

我的猜测是，由于检查过的迭代器，您违反了单一定义规则。请参阅：http: [//msdn.microsoft.com/en-us/library/aa985896 (v=vs.80).aspx](http://msdn.microsoft.com/en-us/library/aa985896(v=vs.80).aspx)

问题是，就像上面 Bo 已经写的那样，在 STL 中使用的结构和类在调试和发布版本中的大小不同，并且无论是否使用检查迭代器都会产生更多问题。

另一个原因可能是，检查迭代器的默认值随着发布版本的 Visual Studio 版本而改变。虽然默认情况下它在 vs2005 和 vs2008 中是打开的，但在 2010+ 中它是关闭的（检查所有依赖库以及它们是如何构建的！）

这里最重要的规则是：确保每个编译单元都使用完全相同的设置，无论是 for`_SECURE_SCL`还是`_HAS_ITERATOR_DEBUGGING`.

我还记得一件事，但现在找不到链接：即使使用和不使用检查迭代器的调试构建是兼容的，vs2005 也存在错误，未正确实现，我认为在以后的版本中已修复。

# android - Android - 不支持的服务：音频

> ID：11090629
> 
> 赞同：13
> 
> 时间：2012-06-18T20:34:43.727
> 
> 标签：android, audio, ime

我试图理解和解决我在 Eclipse 工作区日志中看到的错误，同时处理实现 IME 的 Android 应用程序。我是 Android 和 Eclipse 的新手。

错误是“com.utterkaos.keyboard.LatinKeyboardView 无法实例化”。

相关的堆栈跟踪是：

> java.lang.UnsupportedOperationException：不支持的服务：在 com.android.layoutlib.bridge.android.BridgeContext.getSystemService(BridgeContext.java:434) 在 android.inputmethodservice.KeyboardView.(KeyboardView.java:376) 在 android.inputmethodservice 的音频。 KeyboardView.(KeyboardView.java:279) at com.utterkaos.keyboard.LatinKeyboardView.(LatinKeyboardView.java:30) sun.reflect.NativeConstructorAccessorImpl.newInstance0(Native Method) at sun.reflect.NativeConstructorAccessorImpl.newInstance(Unknown Source) at sun.reflect.DelegatingConstructorAccessorImpl.newInstance(Unknown Source) at java.lang.reflect.Constructor.newInstance(Unknown Source) at com.android.ide.eclipse.adt.internal.editors.layout.ProjectCallback.instantiateClass(ProjectCallback.java: 402）在 com.android.ide.eclipse.adt。internal.editors.layout.ProjectCallback.loadView(ProjectCallback.java:166) 在 android.view.BridgeInflater.loadCustomView(BridgeInflater.java:207) 在 android.view.BridgeInflater.createViewFromTag(BridgeInflater.java:135) 在 android.view .LayoutInflater.inflate(LayoutInflater.java:466) at android.view.LayoutInflater.inflate(LayoutInflater.java:372) at com.android.layoutlib.bridge.impl.RenderSessionImpl.inflate(RenderSessionImpl.java:321) at com. android.layoutlib.bridge.Bridge.createSession(Bridge.java:324) 在 com.android.ide.common.rendering.LayoutLibrary.createSession(LayoutLibrary.java:325) 在 com.android.ide.eclipse.adt.internal。 editors.layout.gle2.RenderService.createRenderSession(RenderService.java:372) 在 com.android.ide.eclipse.adt.internal.editors.layout.gle2.GraphicalEditorPart。com.android.ide.eclipse.adt.internal 的 com.android.ide.eclipse.adt.internal.editors.layout.gle2.GraphicalEditorPart.recomputeLayout(GraphicalEditorPart.java:1115) 的 renderWithBridge(GraphicalEditorPart.java:1361)。 editors.layout.gle2.GraphicalEditorPart.activated(GraphicalEditorPart.java:941) 在 com.android.ide.eclipse.adt.internal.editors.layout.LayoutEditorDelegate.delegatePageChange(LayoutEditorDelegate.java:450) 在 com.android.ide。 eclipse.adt.internal.editors.common.CommonXmlEditor.pageChange(CommonXmlEditor.java:358) 在 org.eclipse.ui.part.MultiPageEditorPart.setActivePage(MultiPageEditorPart.java:1067) 在 org.eclipse.ui.forms.editor。 FormEditor.setActivePage(FormEditor.java:607) 在 com.android.ide.eclipse.adt.internal.editors.AndroidXmlEditor.selectDefaultPage(AndroidXmlEditor.java:380) 在 com.android.ide.eclipse.adt.internal.editors.AndroidXmlEditor.addPages(AndroidXmlEditor.java:285) 在 com.android.ide.eclipse.adt.internal.editors.common.CommonXmlEditor.addPages(CommonXmlEditor.java:283) 在org.eclipse.ui.forms.editor.FormEditor.createPages(FormEditor.java:138) 在 org.eclipse.ui.part.MultiPageEditorPart.createPartControl(MultiPageEditorPart.java:348) 在 org.eclipse.ui.internal.EditorReference。 createPartHelper(EditorReference.java:670) at org.eclipse.ui.internal.EditorReference.createPart(EditorReference.java:465) at org.eclipse.ui.internal.WorkbenchPartReference.getPart(WorkbenchPartReference.java:595) at org.eclipse .ui.internal.EditorReference.getEditor(EditorReference.java:289) 在 org.eclipse.ui.internal.WorkbenchPage.busyOpenEditorBatched(WorkbenchPage.java:2945) 在 org.eclipse。ui.internal.WorkbenchPage.busyOpenEditor(WorkbenchPage.java:2850) at org.eclipse.ui.internal.WorkbenchPage.access$11(WorkbenchPage.java:2842) at org.eclipse.ui.internal.WorkbenchPage$10.run(WorkbenchPage. java:2793) 在 org.eclipse.ui.internal.WorkbenchPage.openEditor(WorkbenchPage.java:2789) 在 org.eclipse.ui.internal 的 org.eclipse.swt.custom.BusyIndi​​cator.showWhile(BusyIndi​​cator.java:70) .WorkbenchPage.openEditor(WorkbenchPage.java:2773) 在 org.eclipse.ui.internal.WorkbenchPage.openEditor(WorkbenchPage.java:2764) 在 org.eclipse.ui.ide.IDE.openEditor(IDE.java:651) 在org.eclipse.ui.ide.IDE.openEditor(IDE.java:610) 在 org.eclipse.jdt.internal.ui.javaeditor.EditorUtility.openInEditor(EditorUtility.java:355) 在 org.eclipse.jdt.internal。 ui.javaeditor.EditorUtility.openInEditor（EditorUtility.java：164) 在 org.eclipse.jdt.ui.actions.OpenAction.run(OpenAction.java:228) 在 org.eclipse.jdt 的 org.eclipse.jdt.ui.actions.OpenAction.run(OpenAction.java:249) .ui.actions.SelectionDispatchAction.dispatchRun(SelectionDispatchAction.java:275) 在 org.eclipse.jdt.ui.actions.SelectionDispatchAction.run(SelectionDispatchAction.java:251) 在 org.eclipse.jdt.internal.ui.packageview.PackageExplorerActionGroup .handleOpen(PackageExplorerActionGroup.java:376) 在 org.eclipse.jdt.internal.ui.packageview.PackageExplorerPart$4.open(PackageExplorerPart.java:538) 在 org.eclipse.ui.OpenAndLinkWithEditorHelper$InternalListener.open(OpenAndLinkWithEditorHelper.java: 48) 在 org.eclipse.core.runtime.SafeRunner.run(SafeRunner.java:42) 在 org.eclipse.org.eclipse.jface.viewers.StructuredViewer$2.run(StructuredViewer.java:866)。ui.internal.JFaceUtil$1.run(JFaceUtil.java:49) at org.eclipse.jface.util.SafeRunnable.run(SafeRunnable.java:175) at org.eclipse.jface.viewers.StructuredViewer.fireOpen(StructuredViewer.java :864) org.eclipse.jface.viewers.StructuredViewer.handleOpen(StructuredViewer.java:1152) org.eclipse.jface.viewers.StructuredViewer$6.handleOpen(StructuredViewer.java:1256) org.eclipse.jface.util .OpenStrategy.fireOpenEvent(OpenStrategy.java:275) at org.eclipse.jface.util.OpenStrategy.access$2(OpenStrategy.java:269) at org.eclipse.jface.util.OpenStrategy$1.handleEvent(OpenStrategy.java:309 ) 在 org.eclipse.swt.widgets.Display 的 org.eclipse.swt.widgets.Widget.sendEvent(Widget.java:1053) 的 org.eclipse.swt.widgets.EventTable.sendEvent(EventTable.java:84)。在 org.runDeferredEvents(Display.java:4165)。eclipse.swt.widgets.Display.readAndDispatch(Display.java:3754) 在 org.eclipse.ui.internal.Workbench.runEventLoop(Workbench.java:2701) 在 org.eclipse.ui.internal.Workbench.runUI(Workbench. java:2665) 在 org.eclipse.ui.internal.Workbench.access$4(Workbench.java:2499) 在 org.eclipse.ui.internal.Workbench$7.run(Workbench.java:679) 在 org.eclipse.core .databinding.observable.Realm.runWithDefault(Realm.java:332) 在 org.eclipse.ui.internal.Workbench.createAndRunWorkbench(Workbench.java:668) 在 org.eclipse.ui.PlatformUI.createAndRunWorkbench(PlatformUI.java:149 ) 在 org.eclipse.equinox.internal.app.EclipseAppHandle.run(EclipseAppHandle.java:196) 中的 org.eclipse.ui.internal.ide.application.IDEApplication.start(IDEApplication.java:123) 中。 core.runtime.internal.adaptor.EclipseAppLauncher。在 org.eclipse.core.runtime.adaptor.EclipseStarter.run(EclipseStarter.java: 344) 在 org.eclipse.core.runtime.adaptor.EclipseStarter.run(EclipseStarter.java:179) 在 sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method) 在 sun.reflect.NativeMethodAccessorImpl.invoke(Unknown Source) 在 sun。 reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source) at java.lang.reflect.Method.invoke(Unknown Source) at org.eclipse.equinox.launcher.Main.invokeFramework(Main.java:622) at org.eclipse.equinox.launcher .Main.basicRun(Main.java:577) 在 org.eclipse.equinox.launcher.Main.run(Main.java:1410) 在 org.eclipse.equinox.launcher.Main.main(Main.java:1386)第1386章）第1386章）110) 在 org.eclipse.core.runtime.adaptor.EclipseStarter.run(EclipseStarter.java:344) 在 org.eclipse. .core.runtime.adaptor.EclipseStarter.run(EclipseStarter.java:179) 在 sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method) 在 sun.reflect.NativeMethodAccessorImpl.invoke(Unknown Source) 在 sun.reflect.DelegatingMethodAccessorImpl.invoke( Unknown Source) at java.lang.reflect.Method.invoke(Unknown Source) at org.eclipse.equinox.launcher.Main.invokeFramework(Main.java:622) at org.eclipse.equinox.launcher.Main.basicRun(Main .java:577) 在 org.eclipse.equinox.launcher.Main.run(Main.java:1410) 在 org.eclipse.equinox.launcher.Main.main(Main.java:1386)110) 在 org.eclipse.core.runtime.adaptor.EclipseStarter.run(EclipseStarter.java:344) 在 org.eclipse. .core.runtime.adaptor.EclipseStarter.run(EclipseStarter.java:179) 在 sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method) 在 sun.reflect.NativeMethodAccessorImpl.invoke(Unknown Source) 在 sun.reflect.DelegatingMethodAccessorImpl.invoke( Unknown Source) at java.lang.reflect.Method.invoke(Unknown Source) at org.eclipse.equinox.launcher.Main.invokeFramework(Main.java:622) at org.eclipse.equinox.launcher.Main.basicRun(Main .java:577) 在 org.eclipse.equinox.launcher.Main.run(Main.java:1410) 在 org.eclipse.equinox.launcher.Main.main(Main.java:1386)EclipseAppLauncher.start(EclipseAppLauncher.java:79) 在 org.eclipse.core.runtime.adaptor.EclipseStarter.run(EclipseStarter.java:344) 在 org.eclipse.core.runtime.adaptor.EclipseStarter.run(EclipseStarter.java: 179) 在 sun.reflect.NativeMethodAccessorImpl.invoke(Unknown Source) 在 sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method) 在 sun.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source) 在 java.lang.reflect.Method.invoke(Unknown来源）在 org.eclipse.equinox.launcher.Main.invokeFramework(Main.java:622) 在 org.eclipse.equinox.launcher.Main.basicRun(Main.java:577) 在 org.eclipse.equinox.launcher.Main .run(Main.java:1410) 在 org.eclipse.equinox.launcher.Main.main(Main.java:1386)EclipseAppLauncher.start(EclipseAppLauncher.java:79) 在 org.eclipse.core.runtime.adaptor.EclipseStarter.run(EclipseStarter.java:344) 在 org.eclipse.core.runtime.adaptor.EclipseStarter.run(EclipseStarter.java: 179) 在 sun.reflect.NativeMethodAccessorImpl.invoke(Unknown Source) 在 sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method) 在 sun.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source) 在 java.lang.reflect.Method.invoke(Unknown来源）在 org.eclipse.equinox.launcher.Main.invokeFramework(Main.java:622) 在 org.eclipse.equinox.launcher.Main.basicRun(Main.java:577) 在 org.eclipse.equinox.launcher.Main .run(Main.java:1410) 在 org.eclipse.equinox.launcher.Main.main(Main.java:1386)java:344) 在 org.eclipse.core.runtime.adaptor.EclipseStarter.run(EclipseStarter.java:179) 在 sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method) 在 sun.reflect.NativeMethodAccessorImpl.invoke(Unknown Source) 在sun.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source) at java.lang.reflect.Method.invoke(Unknown Source) at org.eclipse.equinox.launcher.Main.invokeFramework(Main.java:622) at org.eclipse.equinox .launcher.Main.basicRun(Main.java:577) 在 org.eclipse.equinox.launcher.Main.run(Main.java:1410) 在 org.eclipse.equinox.launcher.Main.main(Main.java:1386 )java:344) 在 org.eclipse.core.runtime.adaptor.EclipseStarter.run(EclipseStarter.java:179) 在 sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method) 在 sun.reflect.NativeMethodAccessorImpl.invoke(Unknown Source) 在sun.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source) at java.lang.reflect.Method.invoke(Unknown Source) at org.eclipse.equinox.launcher.Main.invokeFramework(Main.java:622) at org.eclipse.equinox .launcher.Main.basicRun(Main.java:577) 在 org.eclipse.equinox.launcher.Main.run(Main.java:1410) 在 org.eclipse.equinox.launcher.Main.main(Main.java:1386 )reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source) at java.lang.reflect.Method.invoke(Unknown Source) at org.eclipse.equinox.launcher.Main.invokeFramework(Main.java:622) at org.eclipse.equinox.launcher .Main.basicRun(Main.java:577) 在 org.eclipse.equinox.launcher.Main.run(Main.java:1410) 在 org.eclipse.equinox.launcher.Main.main(Main.java:1386)reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source) at java.lang.reflect.Method.invoke(Unknown Source) at org.eclipse.equinox.launcher.Main.invokeFramework(Main.java:622) at org.eclipse.equinox.launcher .Main.basicRun(Main.java:577) 在 org.eclipse.equinox.launcher.Main.run(Main.java:1410) 在 org.eclipse.equinox.launcher.Main.main(Main.java:1386)

LatinKeyboardView.java 的相关部分是：

```
public class LatinKeyboardView extends KeyboardView {

    static final int KEYCODE_OPTIONS = -100;

    public LatinKeyboardView(Context context, AttributeSet attrs) {
        super(context, attrs);

} 
```

第 30 行是“super(context, attrs);”

查看 KeyboardView.java，第 376 行：

```
mAudioManager = (AudioManager) context.getSystemService(Context.AUDIO_SERVICE); 
```

这里的“Context.AUDIO_SERVICE”似乎是字符串“audio”，它出现在错误堆栈跟踪中。

BridgeContext.java 的相关位是：

```
 public Object getSystemService(String service) {
414        if (LAYOUT_INFLATER_SERVICE.equals(service)) {
415            return mBridgeInflater;
416        }
417
418        if (TEXT_SERVICES_MANAGER_SERVICE.equals(service)) {
419            // we need to return a valid service to avoid NPE
420            return TextServicesManager.getInstance();
421        }
422
423        // AutoCompleteTextView and MultiAutoCompleteTextView want a window
424        // service. We don't have any but it's not worth an exception.
425        if (WINDOW_SERVICE.equals(service)) {
426            return null;
427        }
428
429        // needed by SearchView
430        if (INPUT_METHOD_SERVICE.equals(service)) {
431            return null;
432        }
433
434        throw new UnsupportedOperationException("Unsupported Service: " + service);
435    } 
```

在这个例程中我发现特别令人费解的是，我看不出它如何处理“音频”服务，但 BridgeContext.java 和 KeyboardView.java 都是 Android 代码的一部分，而不是我写错的类。

任何帮助我理解为什么会发生此错误以及如何避免它的指针将不胜感激。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-14T23:55:37.190

您使用的是 API 14 或更高版本吗？如果是这样，那就是问题所在。我想这是那个版本的错误。在 API 11 中它可以工作。

如果您尝试 API 11，则必须通过覆盖 getResources() 方法来做一些修改。检查[此](https://github.com/chrisboyle/sgtpuzzles/blob/master/src/name/boyle/chris/sgtpuzzles/SmallKeyboard.java)以获取更多信息。在此之后它将起作用。

实际上我认为没有办法从 API 14（或者更高）上的 LatinKeyboardView 跳过这个，因为你甚至不能使用 isInEditMode() 因为你肯定必须用 super 调用 View 的构造函数。并且该构造函数将尝试获取音频系统服务，该服务只是失败了，因为我猜您尝试在 Eclipse 图形编辑器中运行它（实际上，当我尝试将自定义视图放入图形布局编辑器中的布局时出现此错误）

我认为破解此问题的唯一方法是在没有 getSystemService 的情况下实现您自己的 KeyboardView。如果 isInEditMode == true，也许不应该调用该方法。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-04-25T17:49:52.130

这是[android.inputmethodservice.KeyboardView中的一个错误](https://android.googlesource.com/platform/frameworks/base/+/refs/heads/master/core/java/android/inputmethodservice/KeyboardView.java)

失败的代码是

```
public KeyboardView(Context context, AttributeSet attrs, int defStyle) { 
...
    mAudioManager = (AudioManager) context.getSystemService(Context.AUDIO_SERVICE); 
...
} 
```

它应该包含在`isInEditMode()`检查中以在布局编辑期间跳过获取音频管理器。奇怪，但我在 Android 错误跟踪器中找不到任何报告的问题！

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2015-11-28T22:29:55.480

我找到了解决方案。

用作`KeyboardViewFix`替换`KeyboardView`：

```
public class KeyboardViewFix extends KeyboardView {
    public static boolean inEditMode = true;

    @TargetApi(21) // Build.VERSION_CODES.L
    public KeyboardViewFix(Context context, AttributeSet attrs, int defStyleAttr, int defStyleRes) {
        super(inEditMode ? new ContextWrapperInner(context) : context, attrs, defStyleAttr, defStyleRes);
    }

    public KeyboardViewFix(Context context, AttributeSet attrs, int defStyleAttr) {
        super(inEditMode ? new ContextWrapperInner(context) : context, attrs, defStyleAttr);
    }

    public KeyboardViewFix(Context context, AttributeSet attrs) {
        super(inEditMode ? new ContextWrapperInner(context) : context, attrs);
    }

    public static class ContextWrapperInner extends ContextWrapper {
        Context base;
        public ContextWrapperInner(Context base) {
            super(base);
            this.base = base;
        }
        public Object getSystemService(String name) {
            return Context.AUDIO_SERVICE.equals(name) ? null : base.getSystemService(name);
        }       
    }
} 
```

注意：在启动您的应用程序时，在您需要设置任何其他代码之前，`KeyboardViewFix.inEditMode = false;`否则您可能会遇到一些错误。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2016-01-15T10:56:29.153

我通过扩展 ContextWrapper 而不是 Context（代码少得多）改进了 @Enyvy 的解决方案。使用 ContextWrapper 类，将所有方法委托给基本 Context，但禁止请求“音频”的 getService() 方法除外：

```
public class ContextWrapperFix extends ContextWrapper {
    private boolean editMode;

    public ContextWrapperFix(Context context, boolean editMode) {
        super(context);
        this.editMode = editMode;
    }

    public Object getSystemService(String name) {
        if (editMode && Context.AUDIO_SERVICE.equals(name)) {
            return null;
        }
        return super.getSystemService(name);
    }
} 
```

下一步是创建自己的类扩展 KeyboardView：

```
public class KeyboardViewFix extends KeyboardView {
    public static boolean inEditMode = true;

    @TargetApi(21) // Build.VERSION_CODES.L
    public KeyboardViewFix(Context context, AttributeSet attrs, int defStyleAttr, int defStyleRes) {
        super(new ContextWrapperFix(context, inEditMode), attrs, defStyleAttr, defStyleRes);
    }

    public KeyboardViewFix(Context context, AttributeSet attrs, int defStyleAttr) {
        super(new ContextWrapperFix(context, inEditMode), attrs, defStyleAttr);
    }

    public KeyboardViewFix(Context context, AttributeSet attrs) {
        super(new ContextWrapperFix(context, inEditMode), attrs);
    }

} 
```

并`KeyboardViewFix`用作替换`KeyboardView`。

注意：在启动您的应用程序时，在您需要设置任何其他代码之前，`KeyboardViewFix.inEditMode = false;`否则您可能会遇到一些错误。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2017-12-15T00:37:29.540

我过去也遇到过这个问题，现在我更新到Android Studio 3.0.1，我无法再重现（可能很久以前已经修复了，我有一段时间没有打开这个项目）。

我用 AS3 试过的两种配置：

```
minSdkVersion 10, compileSdkVersion 26, support library 25.4.0
minSdkVersion 14, compileSdkVersion 26, support library 27.0.2 
```

Android Studio 的预览窗格的工作方式可能发生了变化。

# java - Javascript-Applet 通信：如何将返回值传回 Javascript

> ID：11090630
> 
> 赞同：0
> 
> 时间：2012-06-18T20:34:46.147
> 
> 标签：java, javascript, json, applet, json-rpc

我有一些需要在小程序中调用方法的 javascript 代码。小程序和 javascript 在同一个网页中运行。我知道如何从 javascript 调用 applet 方法，反之亦然（例如，分别使用`MyAppletID.appletMethodName(args)`和`JSObject`），但是这两种技术都只允许单向通信。它们不允许将返回值从一种语言传递回另一种语言。

我希望能够做这样的事情......

```
var result = 0;
callAppletMethod( JSON.stringify(args), function(r) { result = r; } ) 
```

...调用小程序方法并将返回值存储在`result`.

任何人都可以建议一种实现这种双向 Javascript-Applet 通信的技术、库或工具包吗？

我应该考虑使用像[JSON-RPC](http://en.wikipedia.org/wiki/JSON-RPC)这样的远程过程调用协议吗？还是有更好的方法？

（我是 javascript 和网络编程的新手。）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-19T01:51:55.413

```
var result = MyAppletID.appletMethodName(args) 
```

...应该可以正常工作以将结果从 Java 输出到 JavaScript。

# ssis - 如何在 SSIS 中添加进度计数器

> ID：11090632
> 
> 赞同：1
> 
> 时间：2012-06-18T20:34:50.637
> 
> 标签：ssis

我正在运行一个包，它从单个平面文件中提取数据并将其加载到 SQL Server 目标中。平面文件有超过 10,000 行（每天更改）

有什么办法可以找到任务完成的百分比？就像开发人员/支持团队在实例上对表执行选择语句时一样

```
Select percentComplete from PackagePerformance Where packageId = 12 
```

他们得到如下输出：

```
60% 
```

这意味着在这个实例中 60% 的数据被加载到 SQL 表中。

有什么建议吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-19T04:44:30.693

所以你实际上不能告诉任何人这个包离完成有多近，因为 SSIS 不知道文件中有多少条记录。它只有在完全读入后才知道。

这是我在想的几件事

1）如果你想写出进度指标，那么在你的数据流中使用脚本转换。您需要编写数据库连接器等脚本。Google 将成为您的朋友。您可以每 1000 条记录写出一个指标。

1）如果你真的想要一个完整的百分比，那么将文件完全读入一次。（只需将其读入脚本任务）它真的很快，会给你一个记录计数。

2）查看您正在使用的导入表。10,000 行确实不算多。我在不到 60 秒的时间内导入了超过 1,000,000 个的文件。不过，我也没有在数据流中使用一堆转换。这可能是你的问题之一。

# java - 基于文本的 Java 游戏将变量传递给另一个类

> ID：11090633
> 
> 赞同：0
> 
> 时间：2012-06-18T20:34:54.040
> 
> 标签：java, variables

我正在编写一个基于文本的 Java 游戏，我遇到了一些我无法理解的问题。

我的代码按照以下方式工作：

```
 public class main() {
           run initial method for menu
           Player player = new Player(name,1,1,1);
           do{
           game code
           while(running = true)
          }

       public class Player() {
           string name
            int age
            int level
            int exp

           getName()
           setName() etc etc
          }

       public class Train() {
        kill monster
        totalExp = monsters killed

        } 
```

现在，问题是，如何将获得的 exp 传递给具有 get 和 set 方法的玩家类？exp 是在 Train 类中计算/生成的，但我需要将它传递给 Player，以便我可以使用 .set/.get 并在我的 Main 类中显示更新的信息。

将添加：

Player player = new Player(name,1,1,1) 进入 Train 类只需创建一个 Player 的 NEW 对象，所以我将有两个，并将 exp 分配给 Train() 中的玩家，但将一个留在 Main()独自的。

非常感谢您的帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-18T20:38:49.937

您可以将播放器实例传递给该`Train`方法，以便`Train`可以直接对该实例进行操作

例如：

```
public void Train(Player player) {
  kill monster
  totalExp = monsters killed
  player.setXP(player.getXP() + totalExp)
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-18T20:38:58.677

您的假设是正确的，即在火车中添加一个新的 Player 对象会使另一个不受影响。您可以做的是`Player`在您的`Train`类中添加对 a 的引用，并在您的构造函数中分配它。例如

```
class Train {
    Player player;
    public Train(Player p) {
        player = p;
        /* ... */
    }
    /* ... */
} 
```

然后您可以调用`player.method()`train 类，它会更新`Player`您传递给构造函数的内容。

因此，当您创建 的实例时`Train`，将`Player`您已经创建的实例传递给它，它将根据 Train 中发生的情况更新播放器。

```
Player p = new Player(...);
Train t = new Train(p); 
```

# javascript - 需要一些关于以下列样式声明变量的信息

> ID：11090638
> 
> 赞同：0
> 
> 时间：2012-06-18T20:35:27.083
> 
> 标签：javascript

> **可能重复：**
> [JavaScript 范围和闭包](https://stackoverflow.com/questions/631187/javascript-scope-and-closure)
> [JavaScript - 自执行函数](https://stackoverflow.com/questions/11085355/javascript-self-executing-functions)

以下代码有什么区别：

```
 var someVar = (function(){
   // some code
})(); 

```

和

```
 var someVar = function(){
   // some code
}; 

```

你能给我指点关于第一个代码的用法和解释的教程吗？

在谷歌上很难找到答案，所以我想我会在这里问。

谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-18T20:44:37.673

**第一个案例**

将创建并执行匿名函数。函数结果将存储在`someVar`.

```
var someVar = (function(){
    console.log('function executed');
    return 1;
})();
// function executed
console.log(someVar);
// 1 
```

**第二种情况**

将创建匿名函数，它的引用将存储在`someVar`.

```
var someVar = function(){
    console.log('function executed');
    return 1;
};

var result = someVar();
// function executed
console.log(result);
// 1 
```

# entity-framework-4 - 实体框架 EDMX - 实体复数修复

> ID：11090639
> 
> 赞同：3
> 
> 时间：2012-06-18T20:35:29.747
> 
> 标签：entity-framework-4, t4

我们在 PluralizationService 中发现了某些单词的一些错误，例如它认为“Campus”是复数，并将其单数化为“Campu”。

无论如何，我们已经弄清楚了如何使用 ICustomPluralizationMapping 接口向服务添加自定义映射，问题是，我们如何告诉 EntityModelCodeGenerator 使用我们的自定义服务而不是基础服务？

我们首先使用带有自定义 T4 模板的 EF 4.2 数据库。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-19T19:08:41.403

也许这篇文章有帮助：http: [//blogs.msdn.com/b/efdesign/archive/2008/12/02/pluralization.aspx](http://blogs.msdn.com/b/efdesign/archive/2008/12/02/pluralization.aspx)

Update1：​​您需要添加此代码（示例）：

```
//Create an EDM from SSDL generator
EntityModelSchemaGenerator generator =
    new EntityModelSchemaGenerator(
        storageModel,  
        "MyNamespace",
        "MyContainer", 
        pluralizationService);

//Generate CSDL and MSL (in memory)
generator.GenerateMetadata(); 
```

到 T4 模板。为此，您必须将模板添加到您的项目中：右键单击模型设计器中的空闲空间并选择“添加代码生成项”。然后选择所需的模板，您将能够自定义此模板。

参考： http: [//onlinecoder.blogspot.de/2011/03/customize-entity-framework-code.html](http://onlinecoder.blogspot.de/2011/03/customize-entity-framework-code.html) 和[http://www.matthidinger.com/archive/2010/02/09/customizing-the-entity- framework-t4-template-suppressing-code-analysis.aspx](http://www.matthidinger.com/archive/2010/02/09/customizing-the-entity-framework-t4-template-suppressing-code-analysis.aspx)

Update2：[文本转换和查找实体复数（集合）](https://stackoverflow.com/questions/6449192/text-transformations-finding-entity-plural-collection)

# ios - 如何为所有推送的视图控制器通用设置后退导航按钮背景图像？

> ID：11090641
> 
> 赞同：0
> 
> 时间：2012-06-18T20:35:31.210
> 
> 标签：ios, uinavigationcontroller, background-image, back-button

我们正在为导航栏和导航栏上的栏按钮项目设置背景图像。但是对于被推送到导航控制器的视图控制器，我们不知道如何控制自动添加的后退按钮的行为。有没有办法做到这一点？具体来说，有没有办法改变后退按钮的背景图像？还是我们自己创建/设置后退按钮？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-18T21:10:12.890

我会创建一个 UIViewController 的子类，当新的视图控制器购买导航控制器时，它将被推送。然后我会在 viewDidLoad 中设置后退按钮，所以每个使用这个类的 VC 都会显示这个后退按钮，除非它被覆盖。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-19T19:00:30.207

答案与 iOS5.0 的[外观代理](http://www.raywenderlich.com/4344/user-interface-customization-in-ios-5)有关。感谢@inwit。

# c# - 按行和逗号拆分多行字符串并将部件放入 DataGridView

> ID：11090642
> 
> 赞同：1
> 
> 时间：2012-06-18T20:35:52.357
> 
> 标签：c#, .net, winforms, datagridview, split

我想将一个 DataGridView(dgvObs) 中的多行字符串拆分和转置，以分隔另一个 DataGridView(dgvSm) 中的行和列。
此代码有效，但是 - 也许有更好的解决方案：

```
object val = dgvObs.Rows[0].Cells[2].Value;
if (val == null) return;

string text = val.ToString();
using (StringReader sr = new StringReader(text))
{
   string line;
   while ((line = sr.ReadLine()) != null)
   {
      string[] divLine = line.Split(',');
      dgvSm.Rows.Add(divLine);
   }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-18T20:57:39.523

你说更短？尝试这个：

```
var a = dgvObs.Rows[0].Cells[2].Value;

if (a == null) return;

foreach (String s in a.ToString().Split(','))
{
   dgvSm.Rows.Add(s);
} 
```

评论编辑：

这将读取多行，通过正则表达式将其拆分，然后执行我的原始代码所做的事情。只需将该`dgvSm.Rows.Add(s);`行添加到嵌套的 foreach 语句中。

```
var a = @"I'm a cat, woof.
                    bombs, away";

var result = Regex.Split(a, "\r\n|\r|\n");

foreach (var z in result)
{
   foreach (String sString in z.Split(','))
   {
      var asaa = sString.Trim();
   }
} 
```

# php - 如何使 php“substr”忽略图像代码？

> ID：11090646
> 
> 赞同：0
> 
> 时间：2012-06-18T20:36:10.737
> 
> 标签：php, substr

在我的网站上，我有一个代码可以使用 php 的“substr”方法截断一长串文本。但是，如果字符串中有图像的代码，它有时会在图像的代码中间将其截断，导致图像无法正常显示？

我怎样才能解决这个问题？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-18T20:43:36.797

在使用之前在文本上调用[strip_tags](http://php.net/manual/en/function.strip-tags.php)怎么样`substr`？如果您还需要删除实体，您也可以使用简单的正则表达式删除它们或将[html_entity_decode](http://www.php.net/manual/en/function.html-entity-decode.php)添加到组合中。

例子：

```
substr(strip_tags($text), 0, 10); 
```

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2012-06-18T20:39:46.193

这是我之前使用过的一个函数：

```
function trimHTML($text, $max_length) {
    $tags = array();
    $result = "";

    $is_open = false;
    $grab_open = false;
    $is_close = false;
    $in_double_quotes = false;
    $in_single_quotes = false;
    $tag = "";

    $i = 0;
    $stripped = 0;

    $stripped_text = strip_tags($text);

    while ($i < strlen($text) && $stripped < strlen($stripped_text) && $stripped < $max_length) {
        $symbol = $text{$i};
        $result .= $symbol;

        switch ($symbol) {
            case '<':
                $is_open = true;
                $grab_open = true;
                break;

            case '"':
                if ($in_double_quotes)
                    $in_double_quotes = false;
                else
                    $in_double_quotes = true;

                break;

            case "'":
                if ($in_single_quotes)
                    $in_single_quotes = false;
                else
                    $in_single_quotes = true;

                break;

            case '/':
                if ($is_open && !$in_double_quotes && !$in_single_quotes) {
                    $is_close = true;
                    $is_open = false;
                    $grab_open = false;
                }

                break;

            case ' ':
                if ($is_open)
                    $grab_open = false;
                else
                    $stripped++;

                break;

            case '>':
                if ($is_open) {
                    $is_open = false;
                    $grab_open = false;
                    array_push($tags, $tag);
                    $tag = "";
                } else if ($is_close) {
                    $is_close = false;
                    array_pop($tags);
                    $tag = "";
                }

                break;

            default:
                if ($grab_open || $is_close)
                    $tag .= $symbol;

                if (!$is_open && !$is_close)
                    $stripped++;
        }

        $i++;
    }

    while ($tags) {
        $result .= "</" . array_pop($tags) . ">";
    }

    return $result;
}; 
```

# objective-c - 图像上的 UILabel

> ID：11090652
> 
> 赞同：0
> 
> 时间：2012-06-18T20:36:44.193
> 
> 标签：objective-c, ios, xcode, uiimage, uilabel

我正在尝试加载图像并向其添加一些文本。我的文本在 a 中`UILabel`，我正在尝试将其添加到`UIImage`. 我可以添加文本，但我似乎无法将其调整为正确的大小。我正在尝试使用该功能`label.adjustsFontSizeToFitWidth = YES;`，但在大图像上，文本非常小。

```
-(UILabel *)xlabel{
    if (!xlabel) {
        xlabel = [[UILabel alloc] initWithFrame:self.setLablePosition];
        xlabel.backgroundColor = [UIColor redColor];
        xlabel.adjustsFontSizeToFitWidth = YES;
        xlabel.lineBreakMode = UILineBreakModeWordWrap;
        xlabel.numberOfLines = 0;
        xlabel.textAlignment = UITextAlignmentCenter;
    }
    return xlabel;
}

-(UIImage *) textToImage:(UIImage *) myImage{
    UIImage *watermarkedImage = nil;

    UIGraphicsBeginImageContext(appDelegate.theImg.size);
    [myImage drawAtPoint: CGPointZero];
   [self.xlabel drawTextInRect:CGRectMake(0.0, 0.0, appDelegate.theImg.size.width, appDelegate.theImg.size.height)];
    watermarkedImage = UIGraphicsGetImageFromCurrentImageContext();
    UIGraphicsEndImageContext();    
    return watermarkedImage;
} 
```

谢谢你

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-18T20:51:52.453

`adjustsFontSizeToFitWidth`只会减小字体的大小。我相信，默认情况下它会从 17 号字体开始，如果文本太长，则从那里开始缩小。

您可以尝试从更大的字体开始：

```
xlabel.font = [UIFont systemFontOfSize:25]; 
```

然后它会在较大的图像上更大，并在较小的图像上根据需要减小。

此外，`adjustsFontSizeToFitWidth`仅在`numberOfLines`设置为时有效`1`。

看到这个：[UILabel 文档](http://developer.apple.com/library/ios/#documentation/uikit/reference/UILabel_Class/Reference/UILabel.html)

# python - 使用 Python IRC 机器人 - 我如何查询网站的标题？

> ID：11090658
> 
> 赞同：0
> 
> 时间：2012-06-18T20:37:11.793
> 
> 标签：python, beautifulsoup

这是我当前的代码：

```
html = urllib.request.urlopen(url)
soup = BeautifulSoup(html)
title = soup.find('title')[7:(title.len()-7)]
return title 
```

问题是，如果我用这个查询像 Wikipedia 这样的网站，它会以 403 崩溃。我该怎么办？（使用python3）

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-18T20:47:35.710

维基百科不希望你抓取他们的网站。他们拒绝为你服务，因为他们相信你在刮，他们是对的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-10-07T08:12:56.540

Wikipedia 有一个 API，您可以使用它来抓取他们的内容（[Wikipedia API](http://www.mediawiki.org/wiki/API%3aMain_page) ），或者您可以根据您实际想要提取的内容下载他们的[数据。](http://en.wikipedia.org/wiki/Wikipedia%3aDatabase_download)

# javascript - FileReader.readAsArrayBuffer 返回为空

> ID：11090659
> 
> 赞同：4
> 
> 时间：2012-06-18T20:37:17.070
> 
> 标签：javascript, html, fileapi

我正在关注 Html5rocks 教程

[http://www.html5rocks.com/en/tutorials/file/dndfiles/](http://www.html5rocks.com/en/tutorials/file/dndfiles/)

我正在尝试使用 readAsArrayBuffer 而不是 readAsBinaryString 切片文件示例（因为我想读取 gif 标头以查找文件分辨率）。但我被卡住了，因为 evt.target.result （使用 readAsBinaryString 时它是一个字符串）

有任何想法吗？

编辑：代码

```
reader.onloadend = function(evt) 

{

  if (evt.target.readyState == FileReader.DONE) { // DONE == 2
    document.getElementById('byte_content').textContent = evt.target.result;
    console.log(evt.target.result.byteLenght)
    document.getElementById('byte_range').textContent = 
        ['Read bytes: ', start + 1, ' - ', stop + 1,
         ' of ', file.size, ' byte file'].join('');
  }
};

if (file.webkitSlice) {
  var blob = file.webkitSlice(start, stop + 1);
} else if (file.mozSlice) {
  var blob = file.mozSlice(start, stop + 1);
}
reader.readAsArrayBuffer(blob);
} 
```

所以在 Firefox 13 中我进入屏幕：[object ArrayBuffer]

并在控制台日志上：未定义

在 Chromium 18 中，我进入控制台：未捕获的类型错误：无法读取 null 的属性 'byteLenght'

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-22T06:05:02.237

有一个打字错误：

```
console.log(evt.target.result.byteLenght) 
```

`byteLenght`应该`byteLength`

# zend-framework2 - Zend Framework 2 无法创建 PostgreSQL 数据库适配器

> ID：11090661
> 
> 赞同：0
> 
> 时间：2012-06-18T20:37:24.790
> 
> 标签：zend-framework2, php

我正在尝试使用最新技术设置一个新的网络应用程序用于学习目的：apache 2.4、PHP 5.4 和 PostgreSQL 9.1

我选择使用 Zend Framework 2 进行开发。

在我的主模块中，我定义了这个方法：

```
public function getServiceConfiguration() {
    return array(
        'factories' => array(
            'adapter' => function ($sm) {
                $config = $sm->get('config');
                $adapter = new Adapter($config['db']);

                return $adapter;
            }
        ),
    );
} 
```

$config['db'] 在我的 autoload/global.php 中定义，其中包含：

```
return array(
    'db' => array(
        'driver' => 'PDO',
        'dsn' => 'pgsql:host=localhost;port=5436;user=root;password=myrootpwd',
    )
); 
```

但是当我尝试调用 $serviceManager->get('adapter') 我得到一个异常说：

> 致命错误：未捕获异常 'Zend\Db\Adapter\Exception\InvalidArgumentException' 并在 C:\Program Files\626Suite\application\library 中显示消息“提供或实例化的驱动程序对象未实现 Zend\Db\Adapter\Driver\DriverInterface” \Zend\ServiceManager\ServiceManager.php 在第 294 行
> 
> Zend\Db\Adapter\Exception\InvalidArgumentException：提供或实例化的驱动程序对象没有实现 C:\Program Files\626Suite\application\library\Zend\Db\Adapter\Adapter.php 中的 Zend\Db\Adapter\Driver\DriverInterface在第 80 行
> 
> 调用堆栈：
> 0.0015 121600 1\. {main}() C:\Program Files\626Suite\application\data\script\install.php:0
> 0.5699 936080 2\. Zend\ServiceManager\ServiceManager->get(string(7), ? ??) C:\Program Files\626Suite\application\data\script\install.php:7
> 0.5700 936440 3\. Zend\ServiceManager\ServiceManager->create(array(2)) C:\Program Files\626Suite\application\ library\Zend\ServiceManager\ServiceManager.php:277
> 0.5701 936520 4\. Zend\ServiceManager\ServiceManager->createServiceViaCallback(class Closure, string(7), string(7)) C:\Program Files\626Suite\application\library\Zend \ServiceManager\ServiceManager.php:353
> 0.5701 936672 5\. call_user_func(class Closure, class Zend\ServiceManager\ServiceManager, string(7), string(7)) C:\Program Files\626Suite\application\library\Zend\ServiceManager\ServiceManager.php:543
> 0.5701 936696 6 . Age\Module->Age{closure}(class Zend\ServiceManager\ServiceManager, string(7), string(7)) C:\Program Files\626Suite\application\library\Zend\ServiceManager\ServiceManager.php:543
> 0.6047 1024184 7\. Zend\Db\Adapter\Adapter->__construct(class Zend\Config\Config, ???, ???) C:\Program Files\626Suite\application\module\Age\Module.php:43

编辑：

我试图将工厂修改为：

```
public function getServiceConfiguration() {
    return array(
        'factories' => array(
            'adapter' => function ($sm) {
                $config = $sm->get('config');
                $PDO = new \PDO($config['db']['dsn']);
                $adapter = new Adapter($PDO);

                return $adapter;
            }
        ),
    );
} 
```

我首先得到一个错误，说数据库“root”不存在，但是在将我的配置更改为：

```
return array(
    'db' => array(
        'driver' => 'PDO',
        'dsn' => 'pgsql:host=localhost;port=5436;dbname=postgres;user=root;password=myrootpwd',
    )
); 
```

我回到了我之前描述的异常。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-19T20:19:52.900

以下对我有用：

/config/autoload/database.global.php

```
return array(
'db' => array(
    'driver'    => 'Pdo',
    'dsn'       => "pgsql:host=127.0.0.1;dbname=mydb",
    'username'  => 'username',
    'password'  => 'mypass',
),
); 
```

/module/Application/Module.php

```
public function getServiceConfiguration()
{
    return array(
        'factories' => array(
            'db_adapter' =>  function($sm) {
                $config = $sm->get('Configuration');
                $dbAdapter = new \Zend\Db\Adapter\Adapter($config['db']);
                return $dbAdapter;
            }
        ),
    );
} 
```

然后你可以像这样使用它：

```
$sql = "SELECT * FROM table WHERE field=?";
$statement = $this->adapter->query($sql);
$res =  $statement->execute(array($var)); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-21T18:54:06.970

最后，我也能够解决这个问题。

解决方案是将当前使用的 Zend Framework 2 版本从 beta4 更新为直接从 github 下载的最新 master。

我想 Zend 代码本身的某个地方存在问题，因为现在它可以正常工作，而无需更改我的代码或设置中的任何内容。

# eclipse - 有没有办法更改 Eclipse 插件 Team Explorer Everywhere 的登录名和密码？

> ID：11090665
> 
> 赞同：1
> 
> 时间：2012-06-18T20:37:30.763
> 
> 标签：eclipse, team-explorer-everywhere

一位新开发人员将 TEE 插件安装到 Eclipse 中。因为他还没有被授予访问权限，所以他借用了我的登录名和用户名。既然他已被授予访问权限，有没有办法返回并更改为使用他的凭据而不是我的凭据？我找不到任何方法来做到这一点；在 Eclipse 中，Windows->Preferences->Team 或其他任何地方似乎都没有任何选项。

我能想到的最后手段是完全卸载并重新安装插件，但我什至不相信如果 Eclipse 以某种方式挂在凭据上，它是否会起作用。在任何情况下，我们都希望无需完全重新安装即可。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-18T22:00:31.747

不幸的是，TFS 工作区是*按用户*创建的。如果新开发人员以自己的身份登录，他将无法加载他最初使用的 TFS 工作区（冒充您），并且 Eclipse 的 TFS 插件将**无法**将他的 Eclipse 项目连接到 TFS。他需要使用适当的工作文件夹映射（与他现在使用的相同）设置一个新的 TFS 工作区。

这可以手动完成，但简单地创建一个新的 Eclipse 工作区并再次导入项目可能要容易得多。无需重新安装 Eclipse 或 Team Explorer Everywhere 插件即可完成此操作，但他*确实*需要重新配置他的配置文件（用于在 Team Explorer Everywhere 2010 中存储连接信息的机制。）

他应该执行以下步骤以重新开始（并以自己的身份进行身份验证）：

1.  让开发人员搁置或签入任何待处理的更改。当他创建新的 TFS 工作区时，他的未决更改将丢失。
2.  退出所有 Eclipse 实例。
3.  删除 TEE 配置文件配置和工作区缓存 - 配置文件配置包含带有您的身份验证的配置文件，并且工作区缓存包含您的工作区列表（包含用于连接它们的配置文件信息）。配置文件配置文件是：

    `%LOCALAPPDATA%\Microsoft\Team Explorer\10.0\Profiles\profiles.xml`

    工作区缓存文件是：

    `%LOCALAPPDATA%\Microsoft\Team Explorer\10.0\Workspaces\workspaces.xml`

4.  重新启动 Eclipse，并从 TFS 导入必要的项目。此时，应提示他进行身份验证，并且应该能够以他自己的身份进行身份验证。

**注意：**此机制在 TEE 2012 中有些不同 - 为简单起见，我们删除了配置文件。如果您想以不同的用户身份进行身份验证，我们将尊重 Windows 凭据存储机制，就像 Visual Studio 和 Internet Explorer 一样。（在控制面板 -> 管理 Windows 凭据中可用。）

# facebook-graph-api - Facebook Graph API：photo_tag 表问题

> ID：11090666
> 
> 赞同：0
> 
> 时间：2012-06-18T20:37:34.007
> 
> 标签：facebook-graph-api, facebook-fql

我有一个奇怪的问题。我想（不管为什么）让 FQL 返回一个字典，其中包含在所有给定用户照片中标记的所有人。

所以我有

```
query 1 something like SELECT pid from photo_tag where subject = 123456
and then query 2 something like select pid, subject from photo_tag where pid in (select pid from #query1) 
```

奇怪的是，第二个查询返回的字典比 query1 小（它应该更大，因为它单独返回主题，所以每个 pid 应该有多个结果）。

我不知道为什么，所以我输入了一个新的 query2，它只是这样说：

```
SELECT pid from photo_tag WHERE pid in (SELECT pid FROM #query1) 
```

甚至返回原始 pid 的一小部分！在这种情况下，第二个查询所说的应该只是“向我展示这些 pid 中的所有 pid”，但它们不会全部返回？

有任何想法吗？对不起，如果这很复杂。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-18T21:12:51.450

In my experience, FQL rarely returns all rows that satisfy a query. The number of results are limited usually at 25 or 50 lines by default. With your queries, you can get far fewer results than that because Facebook first executes the query, then filters the results for what is visible to you.

You can try adding `LIMIT 100` to the end of these queries and see if the number of items returned increases.

# .net - 反病毒软件使用的 Windows API Hooks

> ID：11090674
> 
> 赞同：6
> 
> 时间：2012-06-18T20:38:17.347
> 
> 标签：.net, winapi, filesystems, hook, antivirus

> **可能重复：**
> [Windows 防病毒软件如何与文件访问过程挂钩？](https://stackoverflow.com/questions/1531800/how-does-a-windows-antivirus-hook-into-the-file-access-process)

防病毒软件通常通过（可能）拦截对文件系统的调用、扫描目标文件然后允许调用完成来提供“实时”保护。根据观察到的行为，我猜每当应用程序尝试打开文件句柄进行读取时都会发生这种情况（至少打开一个安装了 Sophos 的 5 gig 文件 = 速溶咖啡休息时间）

这究竟是如何实现的？他们实际上是使用抽象文件系统的驱动程序，还是只是调用 API（哪些方法？）将自己注入到链中？

有没有标准的方法来检测哪些应用程序正在像这样挂钩？

我已将 .Net 标记为我选择的框架，但我怀疑 P/Invoke 将是必需的，因此尽管 .Net 示例是理想的，但直接的 API 参考几乎一样好。

# sybase - 在 Sybase SQL 的子查询中排序

> ID：11090675
> 
> 赞同：2
> 
> 时间：2012-06-18T20:38:44.557
> 
> 标签：sybase

我有这张桌子。表格1

```
ID     NAME       QTA

102    Name 1     100

105    Name 2       0

107    Name 3      10

109    Name 4       0

110    Name 5       7 
```

我想以这种方式订购。（按 ID WHERE QTA >0 然后按 ID WHERE QTA = 0）

```
ID     NAME       QTA

102    Name 1     100

107    Name 3      10

110    Name 5       7

105    Name 2       0

109    Name 4       0 
```

我试试这个查询

```
SELECT ID, NAME, QTA
FROM TABLE1
WHERE QTA > 0
ORDER BY ID   

UNION 

SELECT ID, NAME, QTA
FROM TABLE1
where QTA = 0 
ORDER BY ID 
```

问题是子查询中不允许使用 ORDER BY。

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-19T08:28:01.200

您可以在 中执行该命令`ORDER BY`，只需添加一个`CASE`：

```
SELECT ID, NAME, QTA
FROM TABLE1
WHERE QTA >= 0
ORDER BY CASE WHEN QTA > 0 THEN 1 ELSE 2 END, ID 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-13T19:17:07.450

只需在联合之前删除订单。

# cocos2d-iphone - 使用 Box2D 的简单 2D 飞行物理

> ID：11090677
> 
> 赞同：0
> 
> 时间：2012-06-18T20:38:55.297
> 
> 标签：cocos2d-iphone, box2d, game-physics

我正在尝试构建一个以飞机为玩家的简单侧滚轴。因此，我想用简单但逼真的物理效果构建简单的飞行控制。我正在使用 cocos2D 和 Box2D。我有一个基本的系统工作，但无法让物理感觉正确。

我正在`b2CircleShape`根据用户的输入对平面（即 a ）施加力。所以，基本上，如果用户向上推，`body_->ApplyForce(b2Vec2(10,30), body_->GetPosition())`就会被调用。同样，使用 for down -30。

这很有效，飞机随着向上/向下飞行，导致它俯冲或爬升。但就是感觉不对。攀爬时没有减速，潜水时也没有加速。我的简单解决方案远非简单。

我怎样才能更好地体验飞机攀爬/潜水？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-01T14:25:23.960

我最终简化了飞行中应用的基本力：即推力、阻力、升力和重力。

我做了以下简化：

1.  阻力和推力不需要是两个力，而是推力的大小由当前速度调整（类似于安德鲁建议的空气阻力）。
2.  重力由 box2d 中的 World 对象处理。
3.  升力相等但与重力相反（当飞机飞行水平时）。
4.  推力和升力是根据平面的角度设置的：基于身体的变换 R 列。

现在，用户只控制飞机的角度，然后调整推力和升力，并更新世界模拟。

这提供了良好的感觉模拟，但大大简化了。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-06-19T10:10:17.647

我会同意的：

```
float engineForce(/* possibly some params */)
{
    return SOME_CONSTANT;
}

float airResistance(float velocity /* possibly more params */)
{
    return CFT * velocity;
}

float resultForce = std::max(engineForce() - airResistance(), 0); 
```

使用这种方法，您可以使用两个功能轻松调整您的系统

# playframework-2.0 - 存在多个测试用例时播放 2.0 Akka 系统关闭

> ID：11090681
> 
> 赞同：6
> 
> 时间：2012-06-18T20:39:27.263
> 
> 标签：playframework-2.0, akka

我有两个控制器，它们都在 Play 2.0 中使用 AKKA 演员。因此，有两个测试用例针对这两个 API 进行测试。但是，当执行“play test”时，只有一个测试用例会成功，另一个会失败。如果我单独运行它们，它会成功运行。我的预感是演员系统已在第一次测试时关闭。但是，我是 Play 2 和 Akka 的新手，这只是我的猜测。有解决方法吗？

```
@Test
public void callPostA() {
running(testServer(2222, fakeApplication(inMemoryDatabase())), new Runnable() {
        @Override
        public void run() {
            HttpPost httpPost = new HttpPost("http://localhost:2222/controllera");
            ....
        }
    });
}
@Test
public void callPostB() {
running(testServer(2222, fakeApplication(inMemoryDatabase())), new Runnable() {
        @Override
        public void run() {
            HttpPost httpPost = new HttpPost("http://localhost:2222/controllerb");
            ....
        }
    });
} 
```

两个控制器如下：

```
public class PostA extends Controller {
    // master actor for workers
    public static ActorRef masterActorA = Akka.system().actorOf(new Props(new UntypedActorFactory() {
    public UntypedActor create() {
          return new PostAActorMaster(Config.NUMBER_OF_WORKER_ACTOR);
       }
        }), "PostAActorMaster");

    public static Result postA() {

        Map<String, String[]> dict = body.asFormUrlEncoded();
        String paramField1 = dict.get("paramField1");
        String paramField2 = dict.get("paramField2");

        ProductInfo pInfo = new ProductInfo(paramField1, paramField2);
        ProductMessage pMessage = new ProductMessage(pInfo);
        return async(
        Akka.asPromise(ask(masterActorA, pMessage, 15000)).map(
            new Function<Object, Result>() {
                        ...
                        }
                ));
}

public class PostB extends Controller {
    // master actor for workers
    public static ActorRef masterActorB = Akka.system().actorOf(new Props(new UntypedActorFactory() {
    public UntypedActor create() {
          return new PostBActorMaster(Config.NUMBER_OF_WORKER_ACTOR);
       }
        }), "PostBActorMaster");

    public static Result postB() {

        Map<String, String[]> dict = body.asFormUrlEncoded();
        String paramField3 = dict.get("paramField3");
        String paramField4 = dict.get("paramField4");

        BillInfo bInfo = new BillInfo(paramField3, paramField4);
        BillMessage pMessage = new BillMessage(bInfo);
        return async(
        Akka.asPromise(ask(masterActorB, pMessage, 15000)).map(
            new Function<Object, Result>() {
                        ...
                        }
                ));
} 
```

PostA 的 AKKA 大师和工人：

```
public class PostAActorMaster extends UntypedActor {

    private final ActorRef workerRouter;

    public PostAActorMaster(final int nrOfWorkers) {
        workerRouter = this.getContext().actorOf(new Props(PostAActorMaster.class).withRouter(new RoundRobinRouter(nrOfWorkers)));
    }

    public void onReceive(Object messageObj) {
           try {
            if (messageObj instanceof ProductMessage) {
               // invoke worker to submit channel messaages
               workerRouter.tell(messageObj, getSender());
                } else if (messageObj instanceof ProductMessageResult) {
                    ......
                    getSender().tell("OK");
                }
            } catch (Exception e) {
                ......
            } 
    }

}

public class PostAActorWorker extends UntypedActor {
    public void onReceive(Object messageObj) throws Exception {
              if (messageObj instanceof ProductMessage) {
                     ProductMessage pMessage = (ProductMessage)messageObj;
                     ProductInfo pInfo = pMessage.getProductInfo();
                     log.info(pInfo.getProductId());
                     ProductMessageResult pr = new ProductMessageResult(pInfo);
                 PostA.masterActor.tell(pr, getSender());
              }
        }
} 
```

托管对象：

```
public class ProductInfo extends Model {
        @Id
        private String productId;
        ...
   } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-01-02T18:06:57.313

我不再看到问题了。这是我的测试用例的结构。也许您可以尝试一下，看看它是否适合您。

斯卡拉：

```
object LoginApiTest extends PlaySpecification {
  "login api quick login" should {
    "post login data" in new WithCleanTestData {
      var org1 = new OrgInfo("testorg", "Test Inc");
      org1.save();
    }
  }
}

abstract class WithCleanTestData extends WithApplication(FakeApplication(
  additionalConfiguration = TestConf.getConf.toMap
  )) {
  override def around[T: AsResult](t: => T): Result = super.around {
    prepareDbWithData()
    t
  }
  def prepareDbWithData() = {
      OrgInfo.getAllOrgInfo.foreach(_.delete)
  }
} 
```

爪哇：

```
public class MyHelpers extends Helpers {
    public static FakeApplication myFakeApplication(Map<String,String> additionalConfiguration) {
        List<String> withoutPlugins = new ArrayList<String>();
        List<String> additionalPlugins = new ArrayList<String>();
        return new MyFakeApplication(new java.io.File("."), MyHelpers.class.getClassLoader(),
            additionalConfiguration, withoutPlugins, additionalPlugins, null);
    }
}

public class BaseModelTest extends WithApplication {
    @Before
    public void before() {
    }
}

public class PostTest extends BaseModelTest {

    @Test
    public void test1() {
    }
} 
```

此外，您可以尝试将此设置添加到您的 Build.scala：

```
parallelExecution in Test := false 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-09-23T23:29:47.727

嘿，我使用的是静态 ActorSystem，这导致了一个问题

```
[error] sbt.ForkMain$ForkError: Error creating bean with name 'accountServiceController' defined in file [/Users/admin/Development/src/totes/app/target/scala-2.11/classes/controllers/Ac‌​countServiceController.class]: Instantiation of bean failed; nested exception is org.springframework.beans.BeanInstantiationException: Could not instantiate bean class [controllers.AccountServiceController]: Constructor threw exception; nested exception is java.lang.IllegalStateException: cannot create children while terminating or terminated 
```

通过在每次应用启动时创建一个动态的 ActorSystem，问题似乎就消失了。我为此工作了一段时间，所以我想在这里发布它作为一个潜在的解决方案。

# objective-c - NSMutableDicitionary 添加新条目我填写文本字段并单击按钮

> ID：11090684
> 
> 赞同：0
> 
> 时间：2012-06-18T20:39:30.360
> 
> 标签：objective-c, nsmutabledictionary

我有一个单屏应用程序，您可以在其中找到两个文本字段（对象和键）和一个按钮（应该将两个字符串存储在 NSMutableArray 中。顺便说一句：不要混淆：“merken”是德语，意思是“记住" ;)

我的问题是，我想以这种方式填充我的 NSMutableDictionary，但现在它只能在第一次保存对象和键。

这是我的方法：

```
-(IBAction)merken:(id)sender { 

    NSString *currentObject = [[NSString alloc] init];NSString *currentKey = [[NSString alloc] init];

    currentObject = [typedObject text];
    currentKey = [typedKey text];

    [dict setValue:currentObject forKey:currentKey];

    //Check if the stings have been added to the Dict.
    int checkLengh = [dict count];
    NSString * checkString = [[NSString alloc] initWithFormat:@"Das Dict hat %d Zeile(n)", checkLengh];
    [checkLabel setText:checkString];

    [typedObject resignFirstResponder];
    [typedKey resignFirstResponder];
} 
```

有任何想法吗？我整天都在努力...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-19T12:23:00.947

为了更好地了解我的情况，这里也是我声明对象的方式：

```
#import <UIKit/UIKit.h>

@interface ViewController : UIViewController

@property (weak, nonatomic) IBOutlet UITextField *typedObject;
@property (weak, nonatomic) IBOutlet UITextField *typedKey;
@property (weak, nonatomic) IBOutlet UILabel *checkLabel;
@property (strong, nonatomic) NSMutableDictionary *dict;

  - (IBAction)merken:(id)sender;

@end 
```

和：

```
#import "ViewController.h"

@interface ViewController ()

@end

@implementation ViewController
@synthesize typedObject;
@synthesize typedKey;
@synthesize checkLabel;
@synthesize dict; 
```

我搞砸了 NSMutableDictionary 的声明吗？...在行动中，我已经包含了您的改进。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-19T12:35:35.730

你应该在开始使用它之前分配你的 NSMutableDictionary。保持强引用不会自动分配内存。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-18T20:59:41.273

答案不在您发布的代码中；弄清楚在哪里`dict`声明以及如何设置等需要知道；但有些事情可能表明出了什么问题。

首先你声明你的字符串如下：

```
NSString *currentObject = [[NSString alloc] init]; 
```

这对于字符串来说是**完全**错误的（并非适用于所有类型）。An`NSString`是一个不可变对象，必须在创建时为其赋值。但是，类型*变量*`NSString *`包含对字符串的引用，或者`nil`- 当它不引用任何内容时。你只需要：

```
NSString *currentObject; 
```

声明将保存对`NSString`对象的引用的变量。如果您希望可以进一步使用：

```
NSString *currentObject = nil; 
```

所以变量以一个已知的值开始（否则局部变量会包含一个垃圾值，*实例*变量会自动设置为`nil`/ `0`/etc. 视情况而定）。但是，您将立即分配一个值，因此`nil`不需要分配 - 您不会意外使用垃圾值。

弄错这表明您可能不清楚对象和引用是如何工作的，并且您可能在声明和分配`NSMutableDictionary`.

其次，您应该使用`setObject:forKey:`来设置键/值：

```
[dict setObject:currentObject forKey:currentKey]; 
```

这两种方法有细微的不同，你通常想要`setObject`; 查看文档以了解差异。

高温高压

# ios - 为什么我不能在 lldb 中创建字符串？

> ID：11090686
> 
> 赞同：2
> 
> 时间：2012-06-18T20:39:41.980
> 
> 标签：ios, nsstring, nsdata, lldb

具体来说，为什么这不起作用？

```
(lldb) po [NSString stringWithCharacters:(char*)[data bytes] length:(int)[data length]]
error: Couldn't execute function; result was eExecutionDiscarded 
```

还有其他处理转储 NSData 的问题，但我认为这将是一个更好的解决方案。我很惊讶它没有用。只是试图理解为什么。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-19T15:24:27.550

可能是因为它期待一个`unichar`？尝试这个。

[如何在 Objective-C 中将 unichar 值转换为 NSString？](https://stackoverflow.com/questions/1775859/how-to-convert-a-unichar-value-to-an-nsstring-in-objective-c)

# c# - 文件传输占用大量 CPU

> ID：11090689
> 
> 赞同：5
> 
> 时间：2012-06-18T20:39:52.370
> 
> 标签：c#, asp.net, .net, web-services, ihttphandler

我正在尝试通过 IHttpHandler 传输文件，代码非常简单。但是，当我开始单次传输时，它会使用大约 20% 的 CPU。如果我将其扩展到 20 个同时传输，那么 CPU 非常高。有没有更好的方法可以让 CPU 更低？客户端代码一次只发送 64KB 的文件块。

```
public void ProcessRequest(HttpContext context)
{
      if (context.Request.Params["secretKey"] == null)
      {

      }
      else
      {
           accessCode = context.Request.Params["secretKey"].ToString();
      }

      if (accessCode == "test")
      {
           string fileName = context.Request.Params["fileName"].ToString();
           byte[] buffer = Convert.FromBase64String(context.Request.Form["data"]);
           string fileGuid = context.Request.Params["smGuid"].ToString();
           string user = context.Request.Params["user"].ToString();

           SaveFile(fileName, buffer, user);
      }
}

public void SaveFile(string fileName, byte[] buffer, string user)
{
      string DirPath = @"E:\Filestorage\" + user + @"\";

      if (!Directory.Exists(DirPath))
      {
          Directory.CreateDirectory(DirPath);
      }

      string FilePath = @"E:\Filestorage\" + user + @"\" + fileName;
      FileStream writer = new FileStream(FilePath, File.Exists(FilePath) ? FileMode.Append : FileMode.Create, FileAccess.Write, FileShare.ReadWrite);
      writer.Write(buffer, 0, buffer.Length);
      writer.Close();
} 
```

这是我的客户代码：

```
//Set filename from object
                string FileName;
                FileName = System.IO.Path.GetFileName(pubAttFullPath.ToString());

                //Open file
                string file = System.IO.Path.GetFileName(pubAttFullPath.ToString());
                FileStream fileStream = new FileStream(file, FileMode.Open, FileAccess.Read);
                //Chunk size that will be sent to Server
                int chunkSize = 65536;
                // Unique file name
                string fileName = smGuid.ToString() + "_" + FileName;
                int totalChunks = (int)Math.Ceiling((double)fileStream.Length / chunkSize);
                // Loop through the whole stream and send it chunk by chunk;
                for (int i = 0; i < totalChunks; i++)
                {
                    bool doRecieve = true;
                    int cpt = 0;
                    do
                    {
                        int startIndex = i * chunkSize;
                        int endIndex = (int)(startIndex + chunkSize > fileStream.Length ? fileStream.Length : startIndex + chunkSize);
                        int length = endIndex - startIndex;

                        byte[] bytes = new byte[length];
                        fileStream.Read(bytes, 0, bytes.Length);

                        //Request url, Method=post Length and data.
                        string requestURL = "http://localhost:16935/Transfer.doit";
                        HttpWebRequest request = (HttpWebRequest)WebRequest.Create(requestURL);
                        // Wait 5 min for answer before close connection.
                        request.Timeout = 300000;
                        request.Method = "POST";
                        request.ContentType = "application/x-www-form-urlencoded";

                        // Chunk(buffer) is converted to Base64 string that will be convert to Bytes on  the handler.
                        string requestParameters = @"fileName=" + fileName + @"&secretKey=test" + @"&currentChunk=" + i + @"&totalChunks=" + totalChunks + @"&smGuid=" + smGuid 
                        + "&user=" + userSID.ToString() +
                        "&data=" +  HttpUtility.UrlEncode(Convert.ToBase64String(bytes));

                        // finally whole request will be converted to bytes that will be transferred to HttpHandler
                        byte[] byteData = Encoding.UTF8.GetBytes(requestParameters);

                        request.ContentLength = byteData.Length;
                        try
                        {
                            Stream writer = request.GetRequestStream();
                            writer.Write(byteData, 0, byteData.Length);
                            writer.Close();
                            // here we will receive the response from HttpHandler
                            StreamReader stIn = new StreamReader(request.GetResponse().GetResponseStream());
                            string strResponse = stIn.ReadToEnd();
                            stIn.Close();
                            doRecieve = true;
                        }
                        catch (WebException webException)
                        {
                            if (webException.Status == WebExceptionStatus.ConnectFailure ||
                                webException.Status == WebExceptionStatus.ConnectionClosed ||
                                webException.Status == WebExceptionStatus.ReceiveFailure ||
                                webException.Status == WebExceptionStatus.SendFailure ||
                                webException.Status == WebExceptionStatus.Timeout)
                            {
                                Thread.Sleep(5000);
                                doRecieve = false;
                                cpt++;
                            }
                            else {
                                // if the exception is not those ones then get out
                                doRecieve = true;
                            }
                        }
                        catch (Exception e)
                        {
                            doRecieve = true;
                        }
                    }
                    // will try to send 3 times the current chunk before quitting
                    // can't try it so try it and give me the feedback
                    while(doRecieve == false && cpt < 3);
                 } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-18T21:13:40.933

I haven't tested this theory, but working with `FromBase64String` may be the cause. I found [this case](http://social.msdn.microsoft.com/Forums/en/netfxbcl/thread/83c6c7c7-ff7e-4941-8d7e-51cd78da6e77) where someone was running out of memory using this method.

You might try [FromBase64Transform](http://msdn.microsoft.com/en-us/library/system.security.cryptography.frombase64transform.aspx) instead, which is designed to handle a stream of data.

* * *

Or if you don't need to use base64 for any reason, check out [this solution from Scott Hanselman](http://www.hanselman.com/blog/ABackToBasicsCaseStudyImplementingHTTPFileUploadWithASPNETMVCIncludingTestsAndMocks.aspx).

# java - KeyListener 中的 Java 字符串比较失败

> ID：11090690
> 
> 赞同：3
> 
> 时间：2012-06-18T20:40:02.277
> 
> 标签：java, string, swing, keylistener

我在试图弄清楚为什么 KeyListener 不能完全执行时遇到了令人难以置信的沮丧。它一定是我不知道的 Java 中的东西。

我正在尝试使用 KeyListener 来捕捉用户通过“Enter”键将文本输入到 JTextArea 中。当用户按下 Enter 键时，他们输入到 JTextArea 中的 String 被保存`.getText();`，然后与另一个 String 进行比较，以查看它们是否匹配 using `.equalsIgnoreCase();`，但程序似乎完全忽略了这批代码。3 天来，我一直在试图发现我的错误，但什么也想不出来。

下面是我的代码示例。在这个例子中，我试图让程序`System.exit(0);`在用户输入单词“quit”的情况下执行。任何帮助表示赞赏。我真的希望我没有忘记一些愚蠢的事情。

```
playerInput.addKeyListener(new KeyAdapter() {
            public void keyReleased(KeyEvent e) {
                if(e.getKeyCode()==KeyEvent.VK_ENTER) {
                    String test = playerInput.getText();
                    String quit = "quit";
                    playerInput.setText("");
                    if(test.equalsIgnoreCase(quit))
                        System.exit(0);
                }
            }
            public void keyPressed(KeyEvent e) {}
            public void keyTyped(KeyEvent e) {}
        }); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-18T20:47:43.113

这应该有效：

```
playerInput.addKeyListener(new KeyAdapter() {
            public void keyReleased(KeyEvent e) {
                if(e.getKeyCode()==KeyEvent.VK_ENTER) {
                    String test = playerInput.getText().replaceAll("\\r|\\n", "");
                    String quit = "quit";
                    playerInput.setText("");
                    if(test.equalsIgnoreCase(quit))
                        System.exit(0);
                }
            }
            public void keyPressed(KeyEvent e) {}
            public void keyTyped(KeyEvent e) {}
        }); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-18T20:49:49.897

如果文档包含的文本包含“退出”一词，为什么不使用 DocumentListener 并检查它。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-18T20:46:24.353

用户是在输入“quit”还是“quit\n\r”……如果你明白我的意思。也许在`JTextArea`.

尝试`test.trim().equalsIgnoreCase(quit)`

# ruby-on-rails - Rails 测试不会通过唯一性：{ case_sensitive: false } set

> ID：11090695
> 
> 赞同：0
> 
> 时间：2012-06-18T20:40:13.743
> 
> 标签：ruby-on-rails, ruby-on-rails-3, unit-testing, testing

在我的 user.rb 模型中，我有：

```
validates :email, presence: true, 
                  format: { with: VALID_EMAIL_REGEX },
                  uniqueness: { case_sensitive: false } 
```

我有以下测试：

```
test "email address uniqueness regardless of case" do
    dup_user = User.new(name: "First Last", email: @user.email.upcase)
    dup_user.save
    assert !@user.valid?
end 
```

而那个测试不会通过。我也试过了，`assert !@user.save.valid?`以为保存会失败，但这也没有用。

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-18T21:53:28.230

你应该检查是否`dup_user`有效。

```
test "email address uniqueness regardless of case" do
    dup_user = User.new(name: "First Last", email: @user.email.upcase)
    assert ! dup_user.valid?
end 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-18T21:46:19.447

这是我最终做的事情：

在我的 user.rb 模型中，我有：

```
 validates :email, presence: true, 
                      format: { with: VALID_EMAIL_REGEX },
                      uniqueness: { case_sensitive: false } 
```

我有以下测试和设置：

```
def setup
    @user = User.new(name: "John Doe", email: "example@example.com",
             password: "foobar", password_confirmation: "foobar")
    @user.save 
end

test "email address uniqueness regardless of case" do
  dup_user = User.new(name: "First Last", email: @user.email.upcase)
  assert !dup_user.save
end 
```

简而言之，我正在做的是传递一个用户对象来评估为真，而不是保存部分。如果你做object.save.valid？您不是在询问保存是否有效，而是您询问的是 object.save 返回了一个有效的对象，而从 object.save 返回的是 false（而不是对象）。

# svg - Raphael 元素在缩放时与控件重叠

> ID：11090704
> 
> 赞同：0
> 
> 时间：2012-06-18T20:41:12.760
> 
> 标签：svg, zooming, raphael

我遇到了一个问题，我的 Zoom+ 按钮确实会缩放元素，但它们会随着元素的增长而重叠。

这是链接：http: [//jsfiddle.net/knottAverage/ArKDp/28/](http://jsfiddle.net/knottAverage/ArKDp/28/)

这是我用于缩放的功能+

```
$maxIcon.click(function(e) {
mapZoom /= mapMultiplier;
rsrGroupies.scale(mapZoom);
e.stopPropagation();
e.preventDefault();
rsr.setViewBox(0, 0, rsr.mapWidth, rsr.mapHeight);
});​ 
```

预先感谢您的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-18T23:34:32.903

大规模缩放集合正在做它应该做的事情 - 它正在缩放每个元素。相对于中心点翻译每个元素也需要额外的逻辑。

但我相信 viewbox 可以用来完成完全相同的效果。 [您的小提琴的这种变体](http://jsfiddle.net/kevindivdbyzero/Hg5RX/3/)演示了如何调整画布的视图区域以响应缩放，并添加拖放以支持导航到缩放的场地地图的隐藏区域。可悲的是，它也被严重破坏了——事实上，它的功能足以指出一个可能的解决方案向量。我希望你会发现它有帮助而不是激怒！

最棘手的事情可能是缩放按钮（和任何其他导航组件）将需要平移和缩放以*取消*对可视区域的操作。否则，它们将与画布的其余部分一起缩放和移动！建议在第一个文件的顶部创建第二个文件（使用绝对定位和适当的 z-index）并将导航元素放在最顶层。

祝你好运。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-27T07:45:26.600

在 SVG 容器顶部添加缩放按钮作为单独的 PNG 图像（通过 jQuery），使它们独立于 SVG，这样它们就不会随着 viewBox 的变化而放大（这就是我对 SVG 地图所做的）。

# visual-studio-2010 - 配置文件引导的优化可以用于简单的特定功能优化吗？

> ID：11090707
> 
> 赞同：2
> 
> 时间：2012-06-18T20:41:28.907
> 
> 标签：visual-studio-2010, performance, visual-c++, optimization, profiling

我正在使用 VS2010 并进行一些长时间运行的模拟，试图创建高度优化的 C++ 程序。我已经阅读了Visual Studio 中的[Profile-Guided Optimizations](http://msdn.microsoft.com/en-us/library/e7k32f4k%28v=vs.110%29.aspx)并认为它有点难以使用，因为您 (a) 构建二进制文件，(b) 运行测试并收集数据，然后 (c) 重建使用 PGO 的二进制文件。

问题是我已经知道我的瓶颈在哪里；因此，如果有一种方法可以告诉 VS 要优化哪些功能，我将省去上面漫长的构建过程，并且能够使用常规的构建过程。

有谁知道这样做的方法？也许是一种通过手动生成 PGO 文件来告诉 VS 要优化哪些功能的方法？

谢谢！

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-06-18T21:40:25.203

你已经知道你的瓶颈在哪里了吗？

真的吗？

为了好玩，让我们想象一下，有一个或多个更大的“瓶颈”，你不知道它们是什么或在哪里。

他们就是这样。他们很狡猾。他们可以隐藏在众目睽睽之下。

*[这显示了我是如何找到它们的。](https://scicomp.stackexchange.com/a/1870/1262)*

实际上，您可能需要编译器来优化代码。以我的经验，只有在我调整了我放入的那些没有编译器可以纠正的愚蠢东西之后才会发生这种情况。如果你认为*你*不会放入愚蠢的东西，那么，证明它。我们都可以，也可以。

# jquery - 根据 beforeSend 事件结果终止 jquery ajax 请求

> ID：11090708
> 
> 赞同：2
> 
> 时间：2012-06-18T20:41:29.117
> 
> 标签：jquery

有没有办法根据 beforeSend 结果终止 ajax 执行？

```
$.ajaxSetup({
    beforeSend: check,
});

function check() {
    if(success) { /* break ajax execution */ }
    else { /* continue */ }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-18T21:06:07.140

我看到可以在这里找到答案：[Stop $.ajax on beforeSend](https://stackoverflow.com/questions/10507079/stop-ajax-on-beforesend)。它应该如下所示：

```
$.ajaxSetup({
    beforeSend: check,
});

function check(xhr) {
    if(success) { xhr.abort(); }
    else { /* continue */ }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-18T20:47:01.713

您可以尝试使用 abort() 方法：

```
var xhr = $.ajax({     
    type: "POST",     
    url: "test",     
    data: "thedata",     
    success: function(msg){        alert( "Back again: " + msg );     } });  

//kill the request... try these on beforeSend
xhr.abort() 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-06-18T20:47:08.433

只需将它放在一个函数中：

```
$.ajax({
    beforeSend: function() {
      check();  
    },
}); 
```

# java - LIBGDX：当类扩展 scene2d.Stage 时未调用 hit() 方法

> ID：11090711
> 
> 赞同：2
> 
> 时间：2012-06-18T20:42:07.503
> 
> 标签：java, libgdx, extends, stage, hit

这是让我感到困惑的代码。我可能在这里遗漏了一些东西，但无法弄清楚。

```
public class TStage extends Stage {

    public TStage(float width, float height, boolean stretch) {
        super(width, height, stretch);
    }

    @Override
    public Actor hit(float x, float y) {
        Gdx.app.debug("HUNT", "in hit of TStage");
        return super.hit(x, y);
    }
}

public class TActor extends Actor {

    @Override
    public void draw(SpriteBatch batch, float parentAlpha) {
        // draw something here
    }

    @Override
    public Actor hit(float x, float y) {
        Gdx.app.debug("HUNT", "in hit of TActor");
        return null;
    }
}

    /* Code to set stage*/

    TStage stage = new TStage(Hunt.GAME_WIDTH, Hunt.GAME_HEIGHT, false);
    Gdx.input.setInputProcessor(stage);
    TActor actor1 = new TActor();
    stage.addActor(tactor); 
```

当我触摸屏幕

输出：

```
in hit of TActor 
```

我所期待的：

```
in hit of TStage  
in hit of TActor 
```

[编辑]
我将以下代码添加到 TStage 类

```
@Override
    public Actor touchDown(int x, int y, int pointer, int button) {
        Gdx.app.debug("HUNT", "in touchDown of TStage");
        return super.touchDown(x, y, pointer, button);
    } 
```

现在输出是：

```
in touchDown of TStage  
in hit of TActor 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-19T02:13:37.877

关于哪种方法做什么有些困惑。

该方法`hit()`返回位于这些坐标的演员。你想要的方法是`touchDown()`。javadocs 中几乎没有任何信息，因此请[在此处](http://code.google.com/p/libgdx-users/wiki/scene2d#Is_anybody_listening?_Time_for_some_action!)阅读。你会看到它`TActor.hit()`被调用了，因为这就是在那些坐标处`Stage.touchDown()`找到的方法。`Actor`

# c# - C# Datagrid 的 WHERE 子句的文本框

> ID：11090713
> 
> 赞同：3
> 
> 时间：2012-06-18T20:42:17.017
> 
> 标签：c#, sql, datagrid

（VS 2010 C# 网站）我有 TextBox1 来过滤 SQL 数据库中将显示在 Datagrid 中的 FirstNames，但我无法找出将用户输入从“TextBox1.Text”链接到 WHERE 子句的正确方法用于 Datagrid 过滤。我试过了：

```
SelectCommand="SELECT * FROM [TestName] WHERE ([TestFirstName] LIKE '%' + TextBox1.Text + '%')" 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-02T18:58:13.440

```
SelectCommand="SELECT * FROM [TestName] WHERE ([TestFirstName] LIKE '%' + @TestFirstName2 + '%')">
    <SelectParameters>
        <asp:ControlParameter ControlID="TextBox1" Name="TestFirstName2" 
            PropertyName="Text" Type="String" />
    </SelectParameters> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-18T20:46:03.187

试试这个：

```
SelectCommand="SELECT * FROM [TestName] WHERE ([TestFirstName] LIKE '%" + TextBox1.Text + "%')" 
```

注意 + TextBox1.Text + 周围的引号。您上面的示例似乎正在寻找文字字符串 TextBox1.Text，而不是 TextBox1.Text 的实际值。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-18T20:47:07.160

```
SelectCommand = "SELECT * FROM [TestName] WHERE ([TestFirstName] LIKE '% " + TextBox1.Text + "%')"; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-18T20:50:54.600

如果您使用 SqlDataSource 或 ObjectDataSource 将数据绑定到数据网格，则可以简单地将 WHERE 子句放入正在使用的 DataSource 的“FilterExpression”属性中。

```
protected void ObjectDataSource1_Selecting(object sender, ObjectDataSourceSelectingEventArgs e)
        {
            string filterstr = "";

            if (this.tbSearchEmpID.Text.Trim() != String.Empty)
            {
                filterstr += "EmpId LIKE '%" + this.tbSearchEmpID.Text.Trim() + "%'";
            }

            this.ObjectDataSource1.FilterExpression = filterstr;
        } 
```

# ruby-on-rails - Ruby on Rails：如何阻止用户更改 url 以查看另一个用户的页面？

> ID：11090715
> 
> 赞同：7
> 
> 时间：2012-06-18T20:42:23.680
> 
> 标签：ruby-on-rails, authorization

我已经得到它，以便客户页面上的显示视图链接到他们下的所有订单。当他们单击“显示”时，它会将他们带到该订单的显示视图。但是，如果他们要更改 url 中订单的 id，他们就可以看到其他人的订单。请有人可以帮助或建议我可以使用它的方式，以便如果有人尝试查看他们被定向到的订单以外的订单，他们将被重定向到他们的客户页面？我可以让重定向位正常工作，使用：

```
redirect_to customers_path(session[:customer_id]) 
```

但是我如何让应用程序确保客户只能查看该订单？我似乎无法使用那种检查订单 ID 是否等于 url 中的订单 ID 的逻辑，因为这总是会被证明的！

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-06-18T20:48:47.493

假设您的 Order 模型有一些“谁拥有这个订单”的概念，通常通过一个名为 的整数列`user_id`，您可以检查是否`session[:customer_id]`等于`order.user_id`（或任何您称之为的）。

您通常会将此授权代码保存在您的控制器中。

```
class OrdersController
  ...

  def show
    @order = Order.find params[:id]
    unless session[:customer_id] == @order.user_id
      flash[:notice] = "You don't have access to that order!"
      redirect_to customers_path(session[:customer_id])
      return
    end
  end

  ...
end 
```

随着您的应用程序变得越来越复杂，您可能会考虑使用[CanCan 之](https://github.com/ryanb/cancan)类的授权 gem来处理此逻辑。

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2012-06-18T20:52:12.057

我建议添加一个授权 gem，例如 CanCan，它可以让您设置用户是否有权执行某些操作（例如，编辑订单、查看订单等）。这可能会在很多方面派上用场；您可能希望拥有客户永远无法访问的管理页面（例如，用于添加新产品）。

设置好之后，您可以限制客户的访问权限，以便他们只能查看或编辑自己的订单。在 CanCan 中，您创建了一个名为abilities.rb 的类，它看起来像：

```
class Ability
  include CanCan::Ability

  def initialize(user)
    user ||= User.new # guest user (not logged in)
    if user.admin?
      can :manage, :all
    else
      can [:read, :update], Order, :user_id => user.id
    end
  end
end 
```

这一点`can [:read, :update], Order, :user_id => user.id`意味着“如果 order.user_id == user.id”（即当前用户的 id），则（非管理员）用户可以读取或更新订单。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-18T20:48:38.627

一个好的解决方案是首先删除相应的路线和视图。相反，为用户创建某种页面以查看他或她自己的订单。

我不确定您使用的是哪个用户身份验证 gem，但如果您使用的是 Devise，您可以编写如下代码：

```
<% current_user.orders.each do |order| %>
  <%= render order %>
<% end %> 
```

如果您想保留当前视图和路由层次结构，可以在用户页面上使用此代码。

```
<% if current_user.eql?(@user) %>
  <%= # show order history %>
<% end %> 
```

如果不使用 Devise，我想编写一个 current_user 辅助方法来实现相同的功能不会太难。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2015-07-15T00:24:54.787

使用来自 Devise 的 current_user 帮助器对 @BinaryMuse 的解决方案进行轻微修改，“IF”条件和不同的比较运算符 (!=)。

```
def show
@order = Order.find params[:id]
 if current_user.id != @order.user_id
    flash[:notice] = "MEAN MESSAGE HERE!"
    redirect_to orders_path(session[:current_user])
    return
  end
end 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-18T21:03:33.813

您还可以检查授权插件。最好设计它，以便您也可以用于其他功能。不要依赖客户端参数来查找用户的身份。更多信息在这里：[http ://www.rubyinside.com/authorization-permissions-plugin-for-rails-154.html](http://www.rubyinside.com/authorization-permissions-plugin-for-rails-154.html)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2016-07-20T12:29:40.727

```
(current_user.id == params[:id].to_i || is_writer?) || user_denied 
```

在我的情况下*是_writer？*检查用户是否可以修改订单而不是 *user_denied*是带有重定向和警报的方法

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2019-03-27T17:22:41.437

基本上，您需要为用户创建 Rails 管理员或管理员并向其添加验证，并在这些验证上设置管理员角色-

```
def set_admin

end 

before_action set-admin only :[:destroy, :update] 
```

添加管理员时，将布尔值默认设置为 false

# c# - 为 CLR 过程添加程序集

> ID：11090717
> 
> 赞同：2
> 
> 时间：2012-06-18T20:42:32.807
> 
> 标签：c#, sql-server, interop, clr

我正在尝试创建一个 CLR 过程来将 SQL 数据导出到 Excel，该过程将包含比其他选项（例如小计和突出显示）更多的功能。

这需要我引用`Microsoft.Office.Interop.Excel`dll，但我不确定在编译代码时如何实际包含程序集。

如何在我的 CLR 过程中包含 Excel 程序集？

```
using System;
using System.Collections.Generic;
using System.Text;
using System.Data.SqlClient;
using Excel = Microsoft.Office.Interop.Excel;
using System.Reflection;

public class ExportToExcel
{
[Microsoft.SqlServer.Server.SqlProcedure]
public static void ExportQueryResults(string queryText, string worksheetName, string fileName)
{
    using (SqlConnection cnn = new SqlConnection("context connection=true"))
    {
        //the temp list to hold the results in
        List<object[]> results = new List<object[]>();

        cnn.Open();
        //create the sql command
        SqlCommand cmd = new SqlCommand(queryText, cnn);
        using (SqlDataReader reader = cmd.ExecuteReader())
        {
            int fieldCount = reader.FieldCount;
            object[] headers = new object[fieldCount];
            for(int i = 0; i < fieldCount; i++)
            {
                headers[i] = reader.GetName(i);
            }

            //read the results
            while (reader.Read())
            {
                object[] values = new object[fieldCount];
                for (int i = 0; i < fieldCount; i++)
                {
                    values[i] = reader[i];
                }
                results.Add(values);
            }

            //convert the results into a 2-d array to export into Excel
            object[,] exportVals = new object[results.Count, fieldCount];

            for (int row = 0; row < results.Count; row++)
            {
                for (int col = 0; col < fieldCount; col++)
                {
                    exportVals[row, col] = results[row][col];
                }
            }

            Excel.Application _app = new Excel.Application();
            Excel.Workbook _book = _app.Workbooks.Add(Missing.Value);
            Excel.Worksheet _sheet = (Excel.Worksheet)_book.ActiveSheet;
            Excel.Range _range = (Excel.Range)_sheet.Cells[1, 1];

            _range = _sheet.get_Range(_sheet.Cells[1, 1], _sheet.Cells[results.Count, fieldCount]);
            _range.Value2 = exportVals;

            _sheet.Name = worksheetName;

            //remove any extra worksheets
            foreach(Excel.Worksheet sht in _book.Worksheets)
            {
                if (sht.Name != worksheetName)
                    sht.Delete();
            }

            _book.SaveAs(fileName
                , Excel.XlFileFormat.xlWorkbookDefault
                , Missing.Value
                , Missing.Value
                , false
                , false
                , Excel.XlSaveAsAccessMode.xlNoChange
                , Missing.Value
                , Missing.Value
                , Missing.Value
                , Missing.Value
                , Missing.Value);
        }
    }
}
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-18T20:56:35.130

在 SQL Server 中不能使用任意程序集。您只需要参考框架的一个[子集](http://msdn.microsoft.com/en-us/library/ms403279%28v=sql.90%29.aspx)并练习一些[基本规则](http://msdn.microsoft.com/en-US/library/ms403273%28v=sql.90%29)。我怀疑像 Excel 这样具有多层历史的怪物应用程序会加载到这个环境中。

您可能希望查看符合此标准的更简单的[替代功能。](http://archive.msdn.microsoft.com/SQLFinancials)

如果您需要更多，请考虑在客户端使用 Excel。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-19T17:56:20.767

经过一天的摸索几乎所有类型的错误后，我想出了一个解决我的问题的方法。

我很欣赏给出的答案/评论，虽然我同意可能有更有效/更安全的方法来实施解决方案，但使用互操作程序集是完成这个项目的最快和最熟悉的方法。

在我开始讨论之前，请意识到这个项目绝对需要自动过滤和其他更传统的 SQL Server 导出功能范围之外的格式。

**解决方案**

我创建了一个名为 的类库输出类型 Visual Studio 项目`SqlProcedures`，创建了一个名为的新类`ExportToExcel`并将其添加`Microsoft.Office.Interop.Excel`到我的引用中。

这是我`ExportToExcel.cs`文件中的代码：

```
using System;
using System.Collections.Generic;
using System.Text;
using System.Data.SqlClient;
using Excel = Microsoft.Office.Interop.Excel;
using System.Reflection;
using System.Runtime.InteropServices;

public class ExportToExcel
{
    [Microsoft.SqlServer.Server.SqlProcedure]
public static void ExportQueryResults(string queryText, string worksheetName, string fileName)
{
    using (SqlConnection cnn = new SqlConnection("context connection=true"))
    {
        //the temp list to hold the results in
        List<object[]> results = new List<object[]>();

        cnn.Open();
        //create the sql command
        SqlCommand cmd = new SqlCommand(queryText, cnn);
        using (SqlDataReader reader = cmd.ExecuteReader())
        {
            int fieldCount = reader.FieldCount;
            object[] headers = new object[fieldCount];
            for (int i = 0; i < fieldCount; i++)
            {
                headers[i] = reader.GetName(i);
            }

            //read the results
            while (reader.Read())
            {
                object[] values = new object[fieldCount];
                for (int i = 0; i < fieldCount; i++)
                {
                    values[i] = reader[i];
                }
                results.Add(values);
            }

            //convert the results into a 2-d array to export into Excel
            object[,] exportVals = new object[results.Count, fieldCount];

            for (int row = 0; row < results.Count; row++)
            {
                for (int col = 0; col < fieldCount; col++)
                {
                    exportVals[row, col] = results[row][col];
                }
            }

            Excel.Application _app = new Excel.Application();
            Excel.Workbook _book = _app.Workbooks.Add(Missing.Value);
            Excel.Worksheet _sheet = (Excel.Worksheet)_book.ActiveSheet;
            Excel.Range _range = (Excel.Range)_sheet.Cells[1, 1];
            _app.DisplayAlerts = false;

            //set the headers and freeze the panes
            _range = _sheet.get_Range(_sheet.Cells[1, 1], _sheet.Cells[1, fieldCount]);
            _range.NumberFormat = "@";
            _range.HorizontalAlignment = Excel.XlHAlign.xlHAlignLeft;
            _range.Value2 = headers;
            _range.Font.Bold = true;
            _range = _sheet.get_Range(_sheet.Cells[2, 1], _sheet.Cells[2, 1]);
            _range.EntireRow.Select();
            _range.Application.ActiveWindow.FreezePanes = true;

            _range = _sheet.get_Range(_sheet.Cells[2, 1], _sheet.Cells[results.Count, fieldCount]);
            _range.Value2 = exportVals;

            _range = _sheet.get_Range(_sheet.Cells[1, 1], _sheet.Cells[exportVals.Length, fieldCount]);
            _range.AutoFilter(1, Type.Missing, Excel.XlAutoFilterOperator.xlAnd, Type.Missing, true);
            _sheet.Cells.Columns.AutoFit();
            _sheet.Range["A1"].Select();

            _sheet.Name = worksheetName;

            //remove any extra worksheets
            foreach (Excel.Worksheet sht in _book.Worksheets)
            {
                if (sht.Name != worksheetName)
                    sht.Delete();
            }

            _book.SaveAs(fileName
                , Excel.XlFileFormat.xlExcel5
                , Missing.Value
                , Missing.Value
                , false
                , false
                , Excel.XlSaveAsAccessMode.xlNoChange
                , Missing.Value
                , Missing.Value
                , Missing.Value
                , Missing.Value
                , Missing.Value);

            //_book.Close(Missing.Value, Missing.Value, Missing.Value);
            _app.Application.Quit();

            GC.Collect();
            GC.WaitForPendingFinalizers();

            Marshal.ReleaseComObject(_range);
            Marshal.ReleaseComObject(_sheet);
            Marshal.ReleaseComObject(_book);
            Marshal.ReleaseComObject(_app);

            _range = null;
            _sheet = null;
            _book = null;
            _app = null;
            GC.Collect();
            GC.WaitForPendingFinalizers();
        }
    }
}
} 
```

成功构建 DLL 后，我将其复制到我的 SQL 服务器上的本地目录中。

为了运行该过程`ExportQueryResults`，我需要在`Microsoft.Office.Interop.Excel.dll`依赖的 SQL 服务器中添加几个程序集。

这是我的 SQL 代码：

```
ALTER DATABASE main SET TRUSTWORTHY ON;

create assembly [stdole] from
'C:\Program Files\Microsoft.NET\Primary Interop Assemblies\stdole.dll'
WITH PERMISSION_SET = unsafe
create assembly [Office] from
'C:\WINDOWS\assembly\GAC\office\12.0.0.0__71e9bce111e9429c\OFFICE.DLL'
WITH PERMISSION_SET = unsafe

create assembly [Vbe] 
    FROM 'C:\WINDOWS\assembly\GAC\Microsoft.Vbe.Interop\12.0.0.0__71e9bce111e9429c\Microsoft.Vbe.Interop.dll'
WITH PERMISSION_SET = unsafe

create assembly [Microsoft.Office.Interop.Excel.dll] 
from 'C:\WINDOWS\assembly\GAC\Microsoft.Office.Interop.Excel\12.0.0.0__71e9bce111e9429c\Microsoft.Office.Interop.Excel.dll'
WITH PERMISSION_SET = unsafe

create assembly SqlProcedures from 'c:\sql_data_reporting\SqlProcedures.dll'
WITH PERMISSION_SET = unsafe
go
create procedure ExportToExcel @queryText nvarchar(4000), @worksheetName nvarchar(32),     @fileName nvarchar(250)
as external name SqlProcedures.ExportToExcel.ExportQueryResults
go 
```

现在我知道 using`with permission_set = unsafe`是一个 nono，但这是一个“立即完成”项目，这是我能想到的最快的解决方案。

希望这个解决方案能为其他需要实现类似功能的人节省一些时间。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-18T21:03:13.177

我相信您可以像添加核心程序集一样简单地添加引用的程序集。问题是互操作程序集是 Excel COM 对象的一个​​薄包装器。这意味着除非您还在 SQL Server 上安装 Microsoft Excel，否则互操作将毫无价值。我什至不确定这是否可能，但这听起来是一个非常非常糟糕的主意。

# makefile - 自定义脚本的输出作为定义宏

> ID：11090724
> 
> 赞同：3
> 
> 时间：2012-06-18T20:43:10.107
> 
> 标签：makefile, cmake

我有使用 cmake 的 C++ 项目。我想`./myapp --version`基于 git 提交进行版本控制（意思是提供唯一的输出）。手动它就像

```
gcc ... -DVERSION=$(git rev-list|wc -l) 
```

如果在代码中定义，则使用 VERSION 宏。

这按预期工作。但是我应该如何将其写入`CMakeLists.txt`（为简单起见，我们使用 echo ）？我应该如何逃避它？

```
add_definitions(-DVERSION="$(echo 1)") 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-09T04:00:17.997

在 cmake 2.8.8 中，您可以：

```
add_definitions(demo -D`echo VERSION=\\`git rev-list HEAD|wc -l\\``) 
```

和：

```
int main(int argc, char *argv[]) {
  printf("Version: %d", VERSION); 
```

编译为：

```
/usr/bin/gcc   -std=c99 demo -D`echo VERSION=\`git rev-list HEAD|wc -l\`` -o CMakeFiles/demo.dir/src/demo.c.o   -c /home/doug/projects/libar/src/demo.c 
```

结果：

```
build$ ./demo
Version: 88 
```

这似乎是你真正想要的。

# sql - 通过 select * from exec(MySP) 创建视图

> ID：11090731
> 
> 赞同：1
> 
> 时间：2012-06-18T20:43:54.873
> 
> 标签：sql, sql-server-2008

我创建了具有动态列数的数据透视表，但是为了实现我需要创建一个字符串查询并使用 Exec('MyStringQuery') 运行它，这是我可以获得我想要的结果的唯一方法。

现在我想使用我的数据透视表创建一个视图。由于在视图中我无法运行 Exec(myQry)

我想创建一个函数并在那里运行我的查询，然后在我的视图中使用它，但我无法创建一个表变量来将结果放在那里，因为每次运行查询时我的列数都会有所不同。

我怎样才能做到这一点？

```
create View myView
as
select * from exec(MySP) 
```

当我尝试运行它时，它给了我一个错误。

非常感谢您的意见。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-19T16:22:39.503

我终于找到了我的问题的答案。
我创建了一个 Store 过程并使用了 OpenRowset 并创建了我的视图

```
Create MyView

AS

SELECT  *FROM 

  OPENROWSET( 'SQLNCLI',
                    'Server=SERVERNAME;Trusted_Connection=yes;',
                    'SET FMTONLY OFF; SET NOCOUNT ON; exec DatabaseName.dbo.MySP @A=1,@B=2') 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-18T20:46:43.337

你不能用视图来做这件事，对不起。您不能将参数传递给视图，也不能在视图中使用动态 SQL。您也不能在函数中执行动态 SQL，因此它不会在那里工作。恐怕你需要调用一个存储过程来做到这一点。

# java - 如何使用 AWS java SDK 列出安全组的规则

> ID：11090734
> 
> 赞同：0
> 
> 时间：2012-06-18T20:44:15.973
> 
> 标签：java, sdk, amazon-web-services, amazon

这里的动机是创建一种方法来查询我的 AWS 环境以获取配置的转储，对其进行序列化，然后能够再次运行查询以查看任何相关更改。

我的组标识符来自：

```
 private List<String> getSecurityGroups(InstanceNetworkInterface netInt) {
    List<String> result = new Vector<String>();

    List<GroupIdentifier> groups = netInt.getGroups();
    for(GroupIdentifier gi : groups) {
        result.add(gi.getGroupName());
    }

    return result;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-11T23:00:17.227

您可以在客户端对象（在我的示例中调用其实例）`describeSecurityGroup`上获取安全组列表。`AmazonEC2``ec2`

```
public List<SecurityGroup> findAllSecurityGroups() {
    DescribeSecurityGroupsRequest securityRequest = new DescribeSecurityGroupsRequest();
    DescribeSecurityGroupsResult securityDescription = ec2.describeSecurityGroups(securityRequest);
    return securityDescription.getSecurityGroups();
} 
```

一旦你有了 a `securityGroup`，你就可以调用`securityGroup.getIpPermissions()`，这会给你一个`List<IpPermission>`。

您可以查看[Javadoc](http://docs.amazonwebservices.com/AWSJavaSDK/latest/javadoc/index.html)以获取详细信息，尤其是有关[IpPermission](http://docs.amazonwebservices.com/AWSJavaSDK/latest/javadoc/com/amazonaws/services/ec2/model/IpPermission.html)的信息。

为了给你一个想法，允许任何 IP 在端口 80 上联系服务器`toString()`的`IpPermission`规则表示如下：

```
{IpProtocol: tcp, FromPort: 80, ToPort: 80, IpRanges: [0.0.0.0/0], } 
```

如果您只对特定的安全组感兴趣，您可以使用：

```
public SecurityGroup findOneSecurityGroupByName(String securityGroupName) {
    DescribeSecurityGroupsRequest securityRequest = new DescribeSecurityGroupsRequest();
    securityRequest.setGroupNames(Arrays.asList(securityGroupName));
    DescribeSecurityGroupsResult securityDescription = ec2.describeSecurityGroups(securityRequest);
    return securityDescription.getSecurityGroups().get(0);
} 
```

一些基本的集成测试，应该适用于任何 Amazon EC2 账户。

```
@Test
public void findsAllSecurityGroups() {
    assertThat(firewall.findAllSecurityGroups().size(), is(greaterThan(0)));
}

@Test
public void findsDefaultSecurityGroupByName() {
    SecurityGroup defaultGroup = firewall.findOneSecurityGroupByName("default");
    assertThat(defaultGroup.getGroupName(), is(equalTo("default")));
}

@Test(expected = AmazonServiceException.class)
public void throwsExceptionWhenfindingNonExistentSecurityGroup() {
    firewall.findOneSecurityGroupByName("inexistent");
} 
```

where`firewall`是包含`findOneSecurityGroupByName`和的类的实例`findsAllSecurityGroups`。

# android - 如何在尽可能保留顺序的同时更新“order by”列中的值？

> ID：11090740
> 
> 赞同：0
> 
> 时间：2012-06-18T20:44:50.193
> 
> 标签：android, sqlite

**平台：** Android 上的 SQLite。

**问题：**表有三列 - id、title 和 order。表中的数据有一些“重复”的订单记录，例如订单为“3”的记录有 2 条（示例如下）。订单价值也有“漏洞” - 例如，没有订单价值“2”。

示例表并选择拉取它：*select _id,title,order from table order by order;*

```
_id         TITLE      ORDER    
----------  ----------  ----------
5           First        0         
19          Second       1         
1           Third        3         
4           Fourth       3         
3           Fifth        5         
16          Sixt         7 
```

需要什么？有没有办法更新表中的当前记录以“重置” ORDER 列中的值，同时尽可能多地保留。更新后可能的最佳结果是：

```
_id         TITLE      ORDER    
----------  ----------  ----------
5           First        0         
19          Second       1         
1           Third        2         
4           Fourth       3         
3           Fifth        4         
16          Sixt         5 
```

任何人都知道如何在 Android 上运行的 SQLite 上执行此操作？如果这是 Oracle 和 SQLServer，我可以使用 #temp 表或游标，但在这里......？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-18T21:18:29.657

可能有更好的解决方案，但我会按照您想要的顺序简单地选择并将它们保存到一个数组中。然后，您可以使用 for 循环进行循环，并使用 for 循环迭代器值更新每条记录的 ORDER 字段。

# apache - htaccess：内部重定向，相对或绝对

> ID：11090749
> 
> 赞同：0
> 
> 时间：2012-06-18T20:45:22.757
> 
> 标签：apache, .htaccess

对于内部重定向，以下哪项是正确的（相对 URL 或绝对 URL）？

```
redirect 301 /mypage-ab / 
```

或者

```
redirect 301 /mypage-ab http://www.example.com/ 
```

有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-18T20:48:01.960

A`Redirect`永远是外部的。

*我想应该*可以使用路径，但是[手册](http://httpd.apache.org/docs/2.0/mod/mod_alias.html#redirect)中的所有示例都使用完整的 URL。

如果您想在内部重写 URL，请查看[`mod_rewrite`](http://httpd.apache.org/docs/2.0/misc/rewriteguide.html)或[`Alias`](http://httpd.apache.org/docs/2.0/mod/mod_alias.html)。

# jms - 注册持久订阅后重置 ActiveMQ

> ID：11090750
> 
> 赞同：1
> 
> 时间：2012-06-18T20:45:44.670
> 
> 标签：jms, activemq

我今天从我的 JMS 主题订阅者那里注册了一个持久订阅。我通过设置一个唯一的客户端 ID 并给订阅一个订阅名称来做到这一点：

```
connection.setClientId("worker" + this.pid);
session.createDurableSubscriber(xyzTopic, "xyzSubscription"); 
```

现在，当我开始工作时，我看到以下错误：

12/06/18 22:30:42 WARN broker.TransportConnection：无法添加连接 ID：xxxxxx-45841-1340045847830-1:1，原因：javax.jms.InvalidClientIDException：代理：本地主机 - 客户端：worker2 已从 tcp 连接://127.0.0.1:52796 12/06/18 22:30:42 WARN TransportConnection.Service：发生异步错误：java.lang.IllegalStateException：无法将生产者添加到尚未注册的连接：ID：xxxxxx- 45841-1340045847830-1:1

（主机名替换为 xxxxxx）

我仍在开发环境中，但我认为当我重新启动 ActiveMQ（使用 maven 目标 activemq:run）时，一切都会重置。然而，情况似乎并非如此。

**问题：** 如何重置整个 activeMQ 并清除所有持久化状态，例如持久订阅。

还有究竟是什么导致了这个错误？我的客户端没有显示任何异常，只有 activeMQ 显示上述错误以及几个相同的异常。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-19T20:00:36.950

在不了解更多信息的情况下，很难说出导致错误的原因，但要重置所有内容，您只需删除安装 ActiveMQ 的 ./data/ 目录的内容即可。

# backbone.js - 使 Backbone 获取不更新模型

> ID：11090755
> 
> 赞同：1
> 
> 时间：2012-06-18T20:46:02.507
> 
> 标签：backbone.js, fetch, backbone-relational

我正在尝试使用 Backbone 获取一些相关模型，使用主干-relational.js[并](https://github.com/PaulUithol/Backbone-relational)保持此操作与我在内存中的其他一些模型/集合互斥。例子：

```
user = new Backbone.User { id: 1 }
user.fetch() # also fetches user.posts, using RABL

user_posts = @user.get('posts') # Using backbone-relational.js
first_post = @user_posts.get(1)

first_post.get('title') # => 'Old title'
first_post.set({ title: 'Some new title' }) # or whatever

posts = new Backbone.Posts()
posts.fetch()
posts.get(1).get('title') # => 'Old title'
first_post.get('title') # => 'Old title' 
```

现在看起来这两件事应该是无关的，并且`first_post`应该仍然有“一些新的标题”，但事实并非如此。: ( 这会导致我程序的某些部分出现状态问题，这非常令人讨厌。

我应该清楚，我*想* `first_post.get('title')`保留它的新值，`'Some new title'`，而不调用`first_post.save()`。

编辑：我现在认为这是骨干关系正在做的事情。

任何帮助将不胜感激！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-02T18:48:00.833

原来与 backone-relational 插件有关：[https ://github.com/PaulUithol/Backbone-relational/issues/135](https://github.com/PaulUithol/Backbone-relational/issues/135)

# xampp - 如何将 localhost/site 更改为 site.dev

> ID：11090759
> 
> 赞同：0
> 
> 时间：2012-06-18T20:46:27.993
> 
> 标签：xampp

我使用 XAMPP 进行本地开发，我听说开发人员将 url 结构从 localhost/site 更改为 site.dev，但我不知道如何去做。

我怎样才能改变它，在改变它之前我应该​​知道什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-18T20:50:02.507

您可以在 hosts 文件中将 site.dev 指向 127.0.0.1 并在 apache 配置文件中为该 url 创建一个绑定，以便来自该 url 的请求指向 xampp 中的特定站点/文件夹。我过去曾为开发项目这样做过，并且通常效果很好。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-18T20:58:59.807

您需要在主机文件中添加一个条目以将 site.dev 映射到 localhost

```
127.0.0.1 site.dev www.site.dev 
```

并在apache中添加一个虚拟主机来检测它

```
<VirtualHost *:80>
    DocumentRoot /path/to/document/root/site/
    ServerName site.dev
    ServerAlias  www.site.dev
# Other directives here
</VirtualHost>

<VirtualHost *:80>
    DocumentRoot /path/to/document/root/
    ServerName localhost
# Other directives here
</VirtualHost> 
```

# iphone - AVAssetExportSession 的进度条

> ID：11090760
> 
> 赞同：25
> 
> 时间：2012-06-18T20:46:28.970
> 
> 标签：iphone, cocoa-touch, uiprogressview, avassetexportsession

我有一个将一个导出`AVMutableComposition`到`.mov`文件的应用程序，我希望用户使用进度条查看导出状态，就像发送短信或上传文件一样。

当我知道任务的持续时间（例如播放音频文件）时，我知道如何创建进度条，但由于没有设置导出的持续时间，我不确定如何继续。

我目前有一个活动指示器，但它不能提供最佳的用户体验。

有没有人有任何指示？

* * *

## 回答 #1

> 赞同：39
> 
> 时间：2012-06-25T21:21:13.250

不久前我想出了一个答案，所以我会发布它以防它可以帮助某人：

首先，在您调用的方法中，您`AVAssetExportSession`必须设置一个计时器，以便在`UIProgressView`您启动导出后更新您的：

```
//`AVAssetExportSession` code here
    self.exportProgressBarTimer = [NSTimer scheduledTimerWithTimeInterval:.1 target:self selector:@selector(updateExportDisplay) userInfo:nil repeats:YES];
... 
```

然后，您需要一种方法来更新您的显示，同时考虑到进度属性`AVAssetExportSession`从 0 到 1：

```
- (void)updateExportDisplay {
    self.exportProgressBar.progress = exportSession.progress;
    if (self.exportProgressBar.progress > .99) {
        [self.exportProgressBarTimer invalidate];
    }
} 
```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2018-07-21T14:38:56.210

斯威夫特 3 示例

使用通知中心向侦听器发送进度更新

```
//`AVAssetExportSession` code above
var exportProgressBarTimer = Timer() // initialize timer
if #available(iOS 10.0, *) {
    exportProgressBarTimer = Timer.scheduledTimer(withTimeInterval: 0.1, repeats: true) { timer in
    // Get Progress
    let progress = Float((exportSession?.progress)!);
    if (progress < 0.99) {
       let dict:[String: Float] = ["progress": progress]
       NotificationCenter.default.post(name: Notification.Name("ProgressBarPercentage"), object: nil, userInfo: dict)
    }
  }
}

// on exportSession completed
exportSession?.exportAsynchronously(completionHandler: {
   exportProgressBarTimer.invalidate(); // remove/invalidate timer
   if exportSession?.status == AVAssetExportSessionStatus.completed { 
      // [....Some Completion Code Here]
   }
}) 
```

然后在您想使用的任何地方设置通知中心侦听器

```
NotificationCenter.default.addObserver(self, selector: #selector(self.statusUpdate(_:)), name: NSNotification.Name(rawValue: "ProgressBarPercentage"), object: nil) 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2016-03-29T07:56:09.303

我在 iOS 8.0 中遇到过同样的问题，我使用 dispatch quee 解决了它

```
- (void)convertVideoToLowQuailtyWithInputURL:(NSURL*)inputURL outputURL:(NSURL*)outputURL handler:(void (^)(AVAssetExportSession*))handler{

[[NSFileManager defaultManager] removeItemAtURL:outputURL error:nil];
AVURLAsset *asset = [AVURLAsset URLAssetWithURL:inputURL options:nil];

exportSession2 = [[AVAssetExportSession alloc] initWithAsset:asset presetName:AVAssetExportPresetLowQuality];
exportSession2.outputURL = outputURL;
exportSession2.outputFileType = AVFileTypeQuickTimeMovie;

[exportSession2 exportAsynchronouslyWithCompletionHandler:^(void)
 {
     handler(exportSession2);
 }];

 dispatch_async(dispatch_get_main_queue(), ^(void){

      self.exportProgressBarTimer = [NSTimer scheduledTimerWithTimeInterval:.1 target:self selector:@selector(updateExportDisplay) userInfo:nil repeats:YES];
 }); 
```

}

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-10-06T12:30:08.277

使用下面的代码行。

```
AVAssetExportSession *session = [AVAssetExportSession exportSessionWithAsset:composition presetName:AVAssetExportPresetMediumQuality];
self.exportSession = session;

// 出力先（テンポラリファイル）の設定。
NSString *filePath = NSTemporaryDirectory();
filePath = [filePath stringByAppendingPathComponent:@"out.mov"];
[[NSFileManager defaultManager] removeItemAtPath:filePath error:nil];
session.outputURL = [NSURL fileURLWithPath:filePath];

// 出力タイプの設定。
session.outputFileType = AVFileTypeQuickTimeMovie;

// 非同期エクスポートの開始。
[session exportAsynchronouslyWithCompletionHandler:^{
    if (session.status == AVAssetExportSessionStatusCompleted) {
        // フォトアルバムへの書き込み。
        ALAssetsLibrary *library = [[ALAssetsLibrary alloc] init];
        [library writeVideoAtPathToSavedPhotosAlbum:session.outputURL completionBlock:^(NSURL *assetURL, NSError *error){
            if (error) {
                self.resultLabel.text = [NSString stringWithFormat:@"アセット書き込み失敗\n%@", error];
            } else {
                self.resultLabel.text = [NSString stringWithFormat:@"完了\n%@", assetURL];
            }
        }];
        [library autorelease];
    } else if (session.status == AVAssetExportSessionStatusCancelled) {
        self.resultLabel.text = @"エクスポート中断";
    } else {
        self.resultLabel.text = [NSString stringWithFormat:@"エクスポート失敗\n%@", session.error];
    }
}];

dispatch_async(dispatch_get_global_queue(DISPATCH_QUEUE_PRIORITY_LOW, 0), ^{
    while (session.status == AVAssetExportSessionStatusExporting) {
        dispatch_sync(dispatch_get_main_queue(), ^{
            self.progressView.progress = session.progress;
        });
    }
}); 
```

参考链接：[https ://github.com/keijiro/iOS4BookSampleCode/blob/master/3.3.SimpleExport/Classes/SimpleExportViewController.m](https://github.com/keijiro/iOS4BookSampleCode/blob/master/3.3.SimpleExport/Classes/SimpleExportViewController.m)

# apache - 测试和试验 nginx、apache 的最佳方法？

> ID：11090762
> 
> 赞同：0
> 
> 时间：2012-06-18T20:46:32.537
> 
> 标签：apache, nginx, virtual-machine, vps, sandbox

尝试本地安装 Web 服务器（如 nginx 和 apache）的最佳方法是什么，以便轻松丢弃并启动其中任何一个的新实例？我对这两种服务器技术都很陌生，我正在做很多调整以熟悉每种技术。结果，我经常弄乱我的装备，发现自己不得不回溯我的步骤，或者更糟糕的是，将这些该死的东西完全连根拔起并重新安装。

什么是最好的“沙盒”类型的解决方案？虚拟机？本地VPS？我可以轻松覆盖并重新开始的 liveUSB 映像？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-18T20:58:43.283

只需使用（a）单独的配置文件。如果是 linux 上的 apache2，请将 /etc/apache2/ 复制到 /etc/apache2b/，在 /etc/apache2b/sites-available/default 更改

```
<VirtualHost *:80> 
```

类似于

```
<VirtualHost *:88> 
```

并启动第二个 apache

```
apache2 -f /etc/apache2b/apache2.conf 
```

# xslt - XSLT - 删除与 Xpath 匹配的节点 + 属性

> ID：11090767
> 
> 赞同：4
> 
> 时间：2012-06-18T20:46:53.457
> 
> 标签：xslt, xpath, xslt-2.0

我正在努力寻找最好（有效）的方式来做到这一点。

我有一个中等大小的 XML 文档。根据特定设置，出于安全原因，需要过滤掉其中的某些部分。

我将在 XSLT 中执行此操作，因为它是可配置的，并且不需要更改任何代码。

我环顾四周，但运气不佳。

例如：

我有以下 XPath：

```
//*[@root='2.16.840.1.113883.3.51.1.1.6.1'] 
```

Whicrooth 为我提供了根属性等于特定 OID 的所有节点。在这些节点中，我希望删除除少数（例如**foo**和**bar**）之外的所有属性，然后添加另一个属性（例如**reason**）

对于具有特定属性的节点，我还需要有多个 XPath 表达式，它们可以在特定节点上运行到零，并以类似的方式清除它的内容。

我正在玩弄来自以下方面的信息：

[XPath 表达式选择除特定列表之外的所有 XML 子节点？](https://stackoverflow.com/questions/1791108/xpath-expression-to-select-all-xml-child-nodes-except-a-specific-list)

并按[XSL 参数的名称删除元素和/或属性](https://stackoverflow.com/questions/9385981/xslt-remove-elements-and-or-attributes-by-name-per-xsl-parameters)

当我可以访问我到目前为止所做的事情时，将很快更新。

例子：

转换前的 XML。 **更新：我想过滤掉扩展，然后是文档中与该扩展属性的值匹配的所有值：**

```
<root>
    <childNode>
        <innerChild root="2.16.840.1.113883.3.51.1.1.6.1" extension="123" type="innerChildness"/>
        <innerChildSibling/>
    </childNode>
    <animals>
     <cat>
       <name>123</name>
     </cat>
    </animals>
    <tree/>
    <water root="2.16.840.1.113883.3.51.1.1.6.1" extension="1223" type="liquidLIke"/>
</root> 
```

后

```
<root>
    <childNode>
        <innerChild root="2.16.840.1.113883.3.51.1.1.6.1" flavor="MSK"/> <!-- filtered -->
        <innerChildSibling/>
    </childNode>
    <animals>
      <cat>
        <name>****</name>
       </cat> <!-- cat was filtered -->
    </animals>
    <tree/>
    <water root="2.16.840.1.113883.3.51.1.1.6.1" flavor="MSK"/> <!-- filtered -->
</root> 
```

我能够使用 XSLT2。

我正在尝试这个没有任何运气（对于初学者）

```
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
    <xsl:output method="xml" indent="yes"/>

    <xsl:param name="OIDAttrToDelete" select="'extension'"/>

    <xsl:template match="node()|@*" name="identity">
        <xsl:copy>
            <xsl:apply-templates select="node()|@*"/>
        </xsl:copy>
    </xsl:template>

    <!-- Get all nodes for the OID -->
    <xsl:template match="//*[@root='2.16.840.1.113883.3.51.1.1.6.1']">
        <xsl:if test="name() = $OIDAttrToDelete">
            <xsl:attribute name="nullFlavor">MSK</xsl:attribute>
            <xsl:call-template name="identity"/>            
        </xsl:if>
    </xsl:template>    
</xsl:stylesheet> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-19T03:29:04.680

**这是一个完整的 XSLT 2.0 转换，它根据外部参数识别具有特定属性名称和值的元素，并为每个此类元素删除所有未列入白名单的属性并添加其他指定属性**：

```
<xsl:stylesheet version="2.0"
 xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
 <xsl:output omit-xml-declaration="yes" indent="yes"/>

 <xsl:param name="vFilters">
     <filter>
      <markerAttribute name="root">2.16.840.1.113883.3.51.1.1.6.1</markerAttribute>
      <whiteListedAttributes>
        <name>root</name>
        <name>foo</name>
      </whiteListedAttributes>
      <addAtributes flavor="MSK" reason="Demo"/>
     </filter>
 </xsl:param>

 <xsl:template match="node()|@*">
  <xsl:copy>
   <xsl:apply-templates select="node()|@*"/>
  </xsl:copy>
 </xsl:template>

 <xsl:template match=
 "*[for $cur in .,
        $m in $vFilters/filter/markerAttribute
     return
        $cur/@*[name() eq $m/@name and . eq $m]
   ]">
  <xsl:copy>
    <xsl:apply-templates select="@*"/>
    <xsl:copy-of select=
     "for $m
           in $vFilters/filter/markerAttribute
       return
         if(current()/@*
                      [name() eq $m/@name
                     and
                      . eq $m
                      ])
           then
             $m/../addAtributes/@*
           else ()
     "/>
    <xsl:apply-templates/>
  </xsl:copy>
 </xsl:template>

  <xsl:template match=
 "@*[for $cur in .,
         $p in ..,
         $m in $vFilters/filter/markerAttribute
     return
          $p/@*[name() eq $m/@name and . eq $m]
         and
          not(name($cur) = $m/../whiteListedAttributes/name)
    ]
  "/>
</xsl:stylesheet> 
```

**当此转换应用于以下 XML 文档时**（基于提供的，但添加了一个列入白名单的属性）：

```
<root>
    <childNode>
        <innerChild root="2.16.840.1.113883.3.51.1.1.6.1"
          a="b" b="c" foo="bar" type="innerChildness"/>
        <innerChildSibling/>
    </childNode>
    <animals>
        <cat>
            <name>bob</name>
        </cat>
    </animals>
    <tree/>
    <water root="2.16.840.1.113883.3.51.1.1.6.1"
    z="zed" l="ell" type="liquidLIke"/>
</root> 
```

**产生了想要的、正确的结果**——在已识别的元素上，所有非白名单属性都被删除，并添加了过滤器中指定的两个新属性：

```
<root>
      <childNode>
            <innerChild root="2.16.840.1.113883.3.51.1.1.6.1" foo="bar" flavor="MSK" reason="Demo"/>
            <innerChildSibling/>
      </childNode>
      <animals>
            <cat>
                  <name>bob</name>
            </cat>
      </animals>
      <tree/>
      <water root="2.16.840.1.113883.3.51.1.1.6.1" flavor="MSK" reason="Demo"/>
</root> 
```

**说明**：

外部参数`$vFilters`可以包含一个或多个过滤器，如下所示：

```
 <filter>
  <markerAttribute name="root">2.16.840.1.113883.3.51.1.1.6.1</markerAttribute>
  <whiteListedAttributes>
    <name>root</name>
    <name>foo</name>
  </whiteListedAttributes>
  <addAtributes flavor="MSK" reason="Demo"/>
 </filter> 
```

该`markerAttribute`元素指定标识属性的名称和值。`root`在这种情况下，过滤器标识（适用于）具有值为的属性的元素`"2.16.840.1.113883.3.51.1.1.6.1"`。

此过滤器中指定了两个列入白名单的属性名称：`root`和`foo`.

具有指定值的两个新属性将添加到此过滤器元素标识的每个属性上：`flavor="MSK"`和`reason="Demo"`。

外部参数`$vFilters`可以包含*许多*过滤器，每个过滤器标识不同的“类型”元素并指定一组不同的白名单属性名称和要添加的新属性。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-18T21:56:37.013

```
<xsl:param name="OIDAttrToDelete" select="'extension'" />

<xsl:template match="* | node()">
  <xsl:copy>
    <xsl:apply-templates select="* | node()" />
  </xsl:copy>
</xsl:template>

<xsl:template match="@*">
  <xsl:choose>
    <xsl:when test="../@root = '2.16.840.1.113883.3.51.1.1.6.1'">
      <xsl:copy-of select=".[not(contains($OIDAttrToDelete, name()))]" />
    </xsl:when>
    <xsl:otherwise>
      <xsl:copy-of select=".">
    </xsl:otherwise>
  </xsl:choose>
</xsl:template> 
```

笔记：

我创建了一个仅匹配属性并决定是否复制它们的模板。这样我就不必过多地干扰身份模板。

无需为身份模板命名。只需`<apply-templates>`使用适当的选择表达式调用，处理器就会自动调用它。

模板中的匹配表达式不是完整的 XPath 表达式。你不需要匹配`//*[predicate]`。使用`*[predicate]`就足够了。

如果您出于安全考虑，我会考虑使用白名单 ( `$OIDAttrToKeep`)。

如果`$OIDAttrToDelete`是值列表（例如逗号分隔），则应在测试中包含分隔符：

```
.[
  not(
    contains(
      concat(',', $OIDAttrToDelete, ','), 
      concat(',', name(), ',') 
    )
  )
] 
```

以避免部分名称匹配。

如果您的父 OID 应该是可配置的，您可以使用相同的技术：

```
<xsl:template match="@*">
  <xsl:choose>
    <xsl:when test="
      contains(
        concat(',', $OIDToStrip, ','),
        concat(',', ../@root, ',')
      )
    ">
    <!-- ... -->
    </xsl:when>
  </xsl:choose>
</xsl:template> 
```

# wpf - 获取用户控件中的属性以设置用户控件内标签的内容

> ID：11090771
> 
> 赞同：0
> 
> 时间：2012-06-18T20:47:02.180
> 
> 标签：wpf

我创建了一个具有标签和按钮的用户控件[（链接） 。](https://stackoverflow.com/q/11089895/721768)

我希望控件有一个名为的属性`Text`，用于设置标签的内容。

在 XAML 中

```
<my:SomeUserControl Text="Hello" /> 
```

这实际上设置了

```
<Label Content="Hello"> 
```

在我的用户控制中。

我怎样才能创建这个？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-18T20:52:15.317

在您的用户控件中创建 da[依赖属性。](http://msdn.microsoft.com/en-us/library/system.windows.dependencyproperty.aspx)在 xaml 中为您的用户控件命名，例如

```
<UserControl x:Name="myUserControl" 
```

并像这样将其绑定到您的 xaml 中。

```
<Label Content="{Binding ElementName=myUserControl, Path=Text}"> 
```

# ruby - 没有类/过程/对象的脚本的 RDoc

> ID：11090775
> 
> 赞同：3
> 
> 时间：2012-06-18T20:47:21.177
> 
> 标签：ruby, rdoc

如果内部没有任何结构，是否可以使用 RDoc 或任何其他文档生成器记录 ruby​​ 脚本？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-18T20:53:58.393

RDoc 真正设计用于具有结构的代码；对于你所说的那种事情，你可以看看[Rocco](http://rtomayko.github.com/rocco/)。（该链接也是 Rocco 生成的文档的示例。）

> Rocco 是 Docco 的 Ruby 端口，[Docco](http://jashkenas.github.com/docco/)是一个快速而肮脏的、一百行长的、有文化的编程风格的文档生成器。
> 
> Rocco 读取 Ruby 源文件并生成 HTML 格式的带注释的源文档。注释使用[Markdown](http://daringfireball.net/projects/markdown/)格式化，并与语法突出显示的代码一起显示，以提供注释效果。此页面是针对[其自己的源文件](http://github.com/rtomayko/rocco/blob/master/lib/rocco.rb#commit)运行 Rocco 的结果。

# c# - 如何获取网卡名称

> ID：11090780
> 
> 赞同：3
> 
> 时间：2012-06-18T20:47:46.453
> 
> 标签：c#, windows-server-2008-r2, ethernet, nic

有谁知道如何获取网卡名称

当我做 ipconfig/all 我可以得到这个

```
Ethernet adapter XC99HT:

   Connection-specific DNS Suffix  . : xx.xx.com
   Description . . . . . . . . . . . : HP NC382i DP Multifunction Gigabit Server
 Adapter
   Physical Address. . . . . . . . . : F4-CE-46-94-E8-B0
   DHCP Enabled. . . . . . . . . . . : No
   Autoconfiguration Enabled . . . . : Yes
   IPv4 Address. . . . . . . . . . . : 177.77.153.48(Preferred)
   Subnet Mask . . . . . . . . . . . : 255.255.255.0
   Default Gateway . . . . . . . . . : 177.77.153.1
   DNS Servers . . . . . . . . . . . : 177.77.124.129
                                       177.77.124.130
   Primary WINS Server . . . . . . . : 177.77.124.129
   Secondary WINS Server . . . . . . : 177.77.124.130
   NetBIOS over Tcpip. . . . . . . . : Enabled 
```

想通过使用/传递以太网名称“XC99HT”来获得“HP NC382i DP 多功能千兆服务器适配器”

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-06-18T20:53:51.710

像[这样](http://msdn.microsoft.com/en-us/library/system.net.networkinformation.networkinterface.name.aspx)的东西？

```
public static void ShowInterfaceSummary() 
```

{

```
NetworkInterface[] interfaces = NetworkInterface.GetAllNetworkInterfaces();
foreach (NetworkInterface adapter in interfaces)
{                
    Console.WriteLine ("Name: {0}", adapter.Name);
    Console.WriteLine(adapter.Description);
    Console.WriteLine(String.Empty.PadLeft(adapter.Description.Length,'='));
    Console.WriteLine("  Interface type .......................... : {0}", adapter.NetworkInterfaceType);
    Console.WriteLine("  Operational status ...................... : {0}", 
        adapter.OperationalStatus);
    string versions ="";

    // Create a display string for the supported IP versions.
    if (adapter.Supports(NetworkInterfaceComponent.IPv4))
    {
         versions = "IPv4";
     }
    if (adapter.Supports(NetworkInterfaceComponent.IPv6))
    {
        if (versions.Length > 0)
        {
            versions += " ";
         }
        versions += "IPv6";
    }
    Console.WriteLine("  IP version .............................. : {0}", versions);
    Console.WriteLine();
}
Console.WriteLine(); 
```

}

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-18T20:58:59.443

要在代码中正确执行此操作，您可能需要使用 WMI。WMI（Windows Management Intrumentation）是 Windows 中的“元数据库”，其中包含有关设备级别发生的所有事情的信息。您可以使用 .NET 中的 System.Management 命名空间访问它，主要是 ManagementObjectSearcher 类。您使用类似于 SQL 的语法搜索 WMI。这是一个返回所有活动网络适配器的基本查询：

```
select * from Win32_NetworkAdapterConfiguration where IPEnabled = true 
```

使用 IPConfig（以及更多）可以看到的几乎所有内容都可以从生成的 ManagementObjectCollection 中获得。不幸的是，我不知道对象的哪个字段会有数据“XC99HT”。

# python - 如何从 Django 中的错误电子邮件中删除敏感信息

> ID：11090781
> 
> 赞同：2
> 
> 时间：2012-06-18T20:47:51.413
> 
> 标签：python, django, django-views

我有一个接收敏感信息的 Django 站点。我使用 https/SSL，所以我很擅长这些东西。但是，我今天在发布某些信息时遇到了一个未处理的错误。在查看了通过电子邮件发送给我的错误报告后，我意识到（令我感到恐惧的是）敏感信息已经通过网络（在电子邮件中）未加密。

我在谷歌上做了一些搜索，但并没有真正找到关于这个主题的太多信息。看来我可能可以实现我的异常处理程序并将其插入

```
from django.core.handlers.base import BaseHandler 
```

但是，我真正想做的就是从 request.POST 中删除某些视图上的信息。似乎也许我可以为视图创建一个装饰器，其中包含我不希望包含在电子邮件中的已发布信息。

处理这个问题的最佳方法是什么？

编辑：添加版本信息。

我目前正在将 Django 1.3.1 与 PostgreSQL 9.1 数据库一起使用（在这里可能并不重要）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-18T20:56:57.047

Django 可能已经介绍过，它提供了用于过滤敏感信息的钩子：

[https://docs.djangoproject.com/en/dev/howto/error-reporting/#filtering-error-reports](https://docs.djangoproject.com/en/dev/howto/error-reporting/#filtering-error-reports)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-18T20:57:12.227

Django 1.4 仅支持这种过滤：[https ://docs.djangoproject.com/en/dev/howto/error-reporting/#filtering-error-reports](https://docs.djangoproject.com/en/dev/howto/error-reporting/#filtering-error-reports)

# git - GitHub命令强制签入

> ID：11090784
> 
> 赞同：1
> 
> 时间：2012-06-18T20:48:11.557
> 
> 标签：git, github

我的客户端上有与签入版本冲突的代码。有没有办法告诉 Git “忽略原始版本并强制我的版本覆盖它”？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-18T20:49:56.617

是的，您可以使用`git push -f`命令执行此操作。该`-f`命令是“强制”选项，它将您当前的 ref 推送到上游，即使您当前的历史记录不是从上游派生的。

**使用此命令很容易丢失工作。**当心。

# objective-c - UITextView 不会响应其框架中的更改

> ID：11090785
> 
> 赞同：1
> 
> 时间：2012-06-18T20:48:14.033
> 
> 标签：objective-c, ios

```
[message setBackgroundColor:[UIColor redColor]];
[message setFrame:CGRectMake(message.frame.origin.x, message.frame.origin.y, message.frame.size.width, 20)]; 
```

背景颜色会发生变化，因此 IB 中的连接很好，但 UITextView 的大小不会改变。我尝试了多种方法，但无法改变位置或大小。

如果我从按钮执行操作但不在 didFinishPickingMediaWithInfo 的回调中，它会起作用。

```
-(void)imagePickerController:(UIImagePickerController *)picker didFinishPickingMediaWithInfo:(NSDictionary *)info{

    [picker dismissViewControllerAnimated:NO completion:^{

        [UIView animateWithDuration:0.1
                          delay:0.0
                        options: UIViewAnimationCurveEaseOut // Doesnt really matter since its so fast
                     animations:^{
                         [message setFrame:CGRectMake(message.frame.origin.x, message.frame.origin.y, message.frame.size.width, 20)];
                     } 
                     completion:^(BOOL finished){[message setBackgroundColor:[UIColor redColor]]; }]; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-18T21:59:22.533

尝试这个：

```
[message setBackgroundColor:[UIColor redColor]];

[UIView animateWithDuration:0.1
delay:0.0
options: UIViewAnimationCurveEaseOut // Doesnt really matter since its so fast
animations:^{
    [message setFrame:CGRectMake(message.frame.origin.x, message.frame.origin.y, message.frame.size.width, 20)];
} 
completion:^(BOOL finished){ }]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-18T20:59:06.653

您从什么方法调用此代码？您的框架设置可能会被后续更改覆盖。框架尺寸尚未设置，`viewDidLoad`但它们应该在`viewWillAppear`调用时设置 - 所以在那里执行你的额外布局。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-18T22:54:19.283

我最近发现，要获得 UITextView 的内容大小（从而将其框架设置为“适合”其内容，无需滚动），您需要**先将**文本视图添加为子视图。在它成为子视图之前， contentSize 不会返回正确的值（也许设置框架不起作用？）。

只是猜测...

# bash - 如何绕过grep/egrep的影响？

> ID：11090786
> 
> 赞同：-1
> 
> 时间：2012-06-18T20:48:27.300
> 
> 标签：bash, grep

让我说清楚。

我写了一个 bash 脚本，它需要几个参数；它将首先将参数传递给 command `ps`，例如：

`$ ./myscript.sh -wef | egrep ".*somethingtomatch.*"`

脚本将传递`-wef | egrep ".*somethingtomatch.*"`给以`ps`生成`ps -wef | egrep ".*somethingtomatch.*"`,

然后我的脚本的其余部分将执行其他操作，**并将在屏幕上显示其他输出。**

但是，由于我对 bash 的原始输入是`$ ./myscript.sh -wef | egrep ".*somethingtomatch.*"`，因此由于`egrep`.

我该怎么做才能使这些其他输出可见并保持原始输入格式 - 我不想添加额外的引号或其他符号`$ ./myscript.sh -wef | egrep ".*somethingtomatch.*"`

非常感谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-18T20:53:51.343

> 脚本将传递给以`-wef | egrep ".*somethingtomatch.*"`生成`ps`结果`ps -wef | egrep ".*somethingtomatch.*"`

不，它将传递`-wef`给`ps`然后将程序的输出通过管道传输到`egrep ".*somethingtomatch.*"`.

您不想更改语法，因此无法解决您的问题。放松你的约束。

最简单的方法是将它作为第二个参数传递：`./myscript.sh -wef somethingtomatch`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-18T20:54:49.687

您*不能*将裸管道 ( `|`) 作为参数。时期。您*将*需要像`\|`. 因此，如果您不想在调用中添加任何符号，则唯一的解决方案是编写另一个 shell，或者使用另一个字符构建 bash 来管道......

# android - tabactivity showDialog(0)下的Android多个对话框

> ID：11090792
> 
> 赞同：2
> 
> 时间：2012-06-18T20:48:55.730
> 
> 标签：android, dialog, multidimensional-array, tabactivity, buttonclick

我想在选项卡对话框下创建多个 Activity。但问题是，当我按下按钮时，出现以下错误：and apps from bases.

> 06-18 19:57:06.444 E / AndroidRuntime (1061): $ android.view.WindowManager BadTokenException: Unable to add window - token $ android.app.LocalActivityManager 本地活动记录@ 44f6a3e8 无效，您的活动是否正在运行？

程序是**showDialog(0)**，并且是准确的。我已经搜索了很长时间，但不幸的是我找不到答案。请帮忙。如何显示多个 Tabactivitiy 对话框。?

**标签活动：**

```
public class main extends TabActivity {
 /** Called when the activity is first created. */
 @Override
 public void onCreate(Bundle savedInstanceState) {
 super.onCreate(savedInstanceState);
 setContentView(R.layout.main);

 Resources res = getResources();
 TabHost tb = getTabHost();
 TabHost.TabSpec spec;
 Intent inten;

 //tourism tab
 inten = new Intent().setClass(this, tum_yemekler.class);
 spec = tb.newTabSpec("tab1").setIndicator("Tüm Yemekler",res.getDrawable(R.drawable.hotel))
 .setContent(inten);
 tb.addTab(spec);

 //hotel tab
 inten = new Intent().setClass(this, contactgroupeinkaufliste.class);
 spec = tb.newTabSpec("tab2").setIndicator("Yemek Bul",res.getDrawable(R.drawable.wisata))
 .setContent(inten);
 tb.addTab(spec);

 //mall tab
 inten = new Intent().setClass(this, gunun_menusu.class);
 spec = tb.newTabSpec("tab3").setIndicator("Günün Menüsü",res.getDrawable(R.drawable.mall))
 .setContent(inten);
 tb.addTab(spec);

 //restourant tab
 inten = new Intent().setClass(this, yardim.class);
 spec = tb.newTabSpec("tab4").setIndicator("Yardım",res.getDrawable(R.drawable.restoran))
 .setContent(inten);
 tb.addTab(spec);

 tb.setCurrentTab(0);
 }
} 
```

**活动组：**

```
import java.util.ArrayList;

import android.app.ActivityGroup;
import android.content.Intent;
import android.os.Bundle;
import android.view.KeyEvent;
import android.view.View;

public class contactgroupeinkaufliste extends ActivityGroup {
    View rootView;

    public static   contactgroupeinkaufliste  ContactGroupEinkaufliste_;
    sayilar ddsayilar ;
    private  ArrayList<View> history1;

    @Override
public void onCreate(Bundle savedInstanceState) {
     super.onCreate(savedInstanceState);
     this.history1 = new ArrayList<View>();
     ContactGroupEinkaufliste_ = this;
  View view = getLocalActivityManager().startActivity("CitiesActivity", new
            Intent(this,secimliyemek_main.class)
            .addFlags(Intent.FLAG_ACTIVITY_CLEAR_TOP)).getDecorView();

// Replace the view of this ActivityGroup
replaceView(view);

 }

public void replaceView(View v) {

    // Adds the old one to history
     history1.add(v);

    // Changes this Groups View to the new View.
    setContentView(v);
}

public void back() {  
    if(history1.size() > 0) {  
    history1.remove(history1.size()-1);
        if(history1.size()<=0){
            finish();
        }else{
            setContentView(history1.get(history1.size()-1));
        }
    }else {  
        finish();  
    }  
}

@Override  
public void onBackPressed() {  
    contactgroupeinkaufliste.ContactGroupEinkaufliste_.back();
}

@Override
public boolean onKeyDown(int keyCode, KeyEvent event){
    if (keyCode == KeyEvent.KEYCODE_BACK){
    contactgroupeinkaufliste.ContactGroupEinkaufliste_.back();
        return true;
    }
    return super.onKeyDown(keyCode, event);

}

} 
```

**活动**

```
import java.util.ArrayList;
import java.util.LinkedList;
import java.util.List;

import android.app.Activity;
import android.app.ActivityGroup;
import android.app.AlertDialog;
import android.app.Dialog;
import android.content.Context;
import android.content.DialogInterface;
import android.content.Intent;
import android.os.Bundle;
import android.os.Handler;
import android.os.Message;
import android.view.KeyEvent;
import android.view.View;
import android.view.View.OnClickListener;
import android.widget.Button;
import android.widget.EditText;
import android.widget.Toast;

public class secimliyemek_main extends Activity {
  public static   secimliyemek_main  secimliyemek_main_;

        public static sayilar sayilarr;
        public static String  baslik  ;
        public static bilgideposu arraylistesi;
        public static String [] baharat  ;
        public static String [] option;
        public static boolean[] _selections  ;
        public static LinkedList<String> malzemeler =new  LinkedList<String>();
        protected Button Button_sebzeler;
    protected Button Button_baharatlar;
    protected Button Button_baklagiller;

    @Override
    public void    onCreate(Bundle savedInstanceState) 
    {
        super.onCreate(savedInstanceState);

        setContentView(R.layout.secimliyemek_main);

            Button_sebzeler = ( Button ) findViewById( R.id.sebzeler );
            Button_sebzeler.setOnClickListener( new ButtonClickHandler_sebzeler()  );
            Button_baharatlar = ( Button ) findViewById( R.id.baharat );
            Button_baharatlar.setOnClickListener( new ButtonClickHandler_baharat()  );
            Button_baklagiller = ( Button ) findViewById( R.id.baklagil);
            Button_baklagiller.setOnClickListener( new ButtonClickHandler_baklagiller()  );

       Button yemek_bul =(Button)findViewById(R.id.yemek_bul);

        yemek_bul.setOnClickListener(new OnClickListener() {

         public void onClick(View v) {
      View view1 = contactgroupeinkaufliste.ContactGroupEinkaufliste_.getLocalActivityManager().startActivity("secimliyemek_liste", 
              new Intent("com.faqih.tutorialtab.SECIMLIYEMEK_LISTE")
                .addFlags(Intent.FLAG_ACTIVITY_CLEAR_TOP)).getDecorView();

          // Replace the view of this ActivityGroup
      contactgroupeinkaufliste.ContactGroupEinkaufliste_.replaceView(view1);

         }
       });

    }

    public class ButtonClickHandler_sebzeler implements View.OnClickListener {
        public void onClick( View view ) {

              option =arraylistesi.sebzeler;
              baslik = "Sebzeler";

              boolean[] _selectionss =  new boolean[ option.length ];
              _selections=_selectionss;

              Button_sebzeler = ( Button ) findViewById( R.id.sebzeler );
       //-------------- error comes from here -----------------????
              showDialog(0); 

         }
    }

    public class ButtonClickHandler_baharat implements View.OnClickListener {
    public void onClick( View view ) {

          option =arraylistesi.baharatlar;
          baslik = "Baharatlar";

          boolean[] _selectionss =  new boolean[ option.length ];
          _selections=_selectionss;

          Button_baharatlar = ( Button ) findViewById( R.id.baharat );
          showDialog(2);

               }
    }

    public class ButtonClickHandler_baklagiller implements View.OnClickListener {
    public void onClick( View view ) {

          option =arraylistesi.baklagiller;
          baslik = "Baklagiller";

          boolean[] _selectionss =  new boolean[ option.length ];
          _selections=_selectionss;

          Button_baklagiller = ( Button ) findViewById( R.id.baklagil );
          showDialog(3);
     }
 }

    @Override
    protected Dialog onCreateDialog( int id ) 
    {
        final AlertDialog.Builder dialog = new AlertDialog.Builder(this);
        dialog.setMessage("Enter Holla message");
        EditText hollaMessage = new EditText(this);
        dialog.setView(hollaMessage);
        dialog.setCancelable(false);
        dialog.setPositiveButton("Send", new DialogInterface.OnClickListener() {
        public void onClick(DialogInterface dialog, int id) {
        List result = new ArrayList();
        }
        });
        dialog.setNegativeButton("Cancel", new DialogInterface.OnClickListener() { public void onClick(DialogInterface dialog, int which) { dismissDialog(0); } });
        AlertDialog alert = dialog.create();
        return alert;
     }

    public class DialogSelectionClickHandler implements DialogInterface.OnMultiChoiceClickListener
    {
        public void onClick( DialogInterface dialog, int clicked, boolean selected )
        {
            printSelectedPlanets(selected,clicked);
            Toast.makeText(secimliyemek_main.this, clicked +"  "+selected, Toast.LENGTH_SHORT).show();
        }
    }

    public class DialogButtonClickHandler implements DialogInterface.OnClickListener
    {
        public void onClick( DialogInterface dialog, int clicked )
        {

            switch( clicked )  
            {  
                case DialogInterface.BUTTON_POSITIVE:  
                    closeContextMenu();  
                    break;  

                case DialogInterface.BUTTON_NEGATIVE:  
                    break;  
            }  
            }  

    }

    protected void printSelectedPlanets(boolean clickedv, int clickedsv){

            if(clickedv == true){
            malzemeler.add(option[ clickedsv ]);
             Toast.makeText(secimliyemek_main.this, "eklenen: "+option[ clickedsv ] , Toast.LENGTH_SHORT).show();
            }
            if(clickedv== false){
            malzemeler.remove(option[ clickedsv]);
             Toast.makeText(secimliyemek_main.this, "cikarilan: "+option[ clickedsv ] , Toast.LENGTH_SHORT).show();
            }

    }
     public boolean onKeyDown(int keyCode, KeyEvent event){
        if (keyCode == KeyEvent.KEYCODE_BACK){
        contactgroupeinkaufliste.ContactGroupEinkaufliste_.  back();
            return true;
        }
        return super.onKeyDown(keyCode, event);
    } 
 } 
```

# powershell - Import-CSV Where-Object 作为数组

> ID：11090804
> 
> 赞同：0
> 
> 时间：2012-06-18T20:50:07.793
> 
> 标签：powershell

我有以下代码工作-基于stackoverflow上的巨大帮助-解析CSV文件。我想替换 $_.File - 与包含文件列表的第二个 CSV 文件中的数据匹配。

```
Import-csv "D:\NTFSInfo_C_.csv" -header("File","ParentName","Extension","Attributes","SizeInBytes","CreationDate","LastModificationDate","LastAccessDate","LastAttrChangeDate","Status","USN","FRN","ParentFRN","FileNameCreationDate","FileNameLastModificationDate","FileNameLastAccessDate","FileNameLastAttrModificationDate")|
  Where-Object{($_.File -match "null.sys") -or ($_.File -match "explorer.exe")} |
  Select-Object File, CreationDate, FileNameCreationDate, ParentName |
  Export-CSV -Path c:\NTFS_KNOW_IOC.csv -NoTypeInformation 
```

问题。如何将 TXT 或 CSV 中的文件名列表读取到数组中，然后在 Where-Object 中使用该数组，如上所示？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-18T21:06:54.520

```
$files = Get-Content files.txt
...

Where-Object{($files -match "null.sys") -or ($files -match "explorer.exe")} ... 
```

# java - 是否可以配置多个 Timer EJB

> ID：11090807
> 
> 赞同：0
> 
> 时间：2012-06-18T20:50:32.633
> 
> 标签：java, jakarta-ee, amazon-web-services, ejb-3.1, amazon-sqs

我有一个 EJB，它使用 @Schedule 注释以类似 cron 的方式执行一些企业逻辑。

我正在使用 JBoss 7.1 final。

问题是此方法正在使用来自 AWS SQS 服务的消息，在该 API 中，一次最多只能获取 10 条消息。这会导致大量消息被添加到 SQS，但消费速度不够快。所以我想问的是，是否有一种方法可以创建一个池并让 2 或 3 个 EJB 同时处理来自 SQS 的消息。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-19T11:18:18.963

我已经添加了一些澄清的评论，但无论如何这里有一个可能适用于您的案例的想法。

1.  使用预定的 EJB*顺序地*使用来自 SQS 队列的消息。由于您可以获取的消息数量显然受到限制，因此您可能需要多次调用 SQS 服务。现在不要处理消息，只需*将*它们发送到“中间”JMS 队列中。

2.  使用常规消息驱动 bean (MDB) 来处理“中间”JMS 队列中的消息。您可以指定池大小等并让应用程序。服务器管理负载。JMS 消息的处理将是并发的。

这将符合 EJB 规范，并且相对干净。不过，技术复杂性略有增加。此外，它假设最初的问题是顺序*处理*SQS 消息是根本问题，而不仅仅是*读取*SQS 消息。

# vim - 为 vim 命令行添加导航键绑定

> ID：11090808
> 
> 赞同：6
> 
> 时间：2012-06-18T20:50:41.080
> 
> 标签：vim, command-line, keyboard-navigation

也许我没有使用正确的术语，但我正在努力寻找一种方法来添加一些键绑定以在 vim 中导航命令行时使用。

一个示例是以下命令：

`:e /really/long/path/that/I/dont/want/to/reenter`

并意识到我实际上想要`:tabe`代替制表符，或者输入一个长的正则表达式模式并在其中发现一个错字。

显然，像`^`, `0`or之类的东西`b`只是作为字符输入，所以我想做的是为命令映射添加一些 emacs 绑定，例如`<C-a>`移动到行首，`<C-e>`移动到行尾和一些其他人在单词之间移动（至少那些不与其他有用的绑定冲突的）。

这可能吗？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-06-18T20:58:39.147

正如其他人所提到的，您的特定键绑定已经存在：

*   `Ctrl-b`将您带到命令行的开头，并且
*   `Ctrl-e`将您带到命令行的末尾。

为了获得完整的命令行编辑体验，您可以将 vim 命令行转换为可编辑的命令缓冲区来解决此类问题，而不是使用新的键绑定。

在命令行中键入时，点击`Ctrl-f`进入命令行缓冲区。您将处于正常模式，可以浏览和编辑命令行，以及与命令历史记录中的先前命令交互和编辑。

在您的示例中，一旦在命令行缓冲区中，您可以简单地使用`0itab`to 更改`e`为`tabe`.

点击`Enter`此缓冲区以执行光标所在的命令，然后`Ctrl-c`退出命令行缓冲区，将您放回命令行。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-06-18T20:54:43.347

我会这样做：

```
" adding emacs keybindings for command mode
cnoremap <c-a> <Home>
cnoremap <c-e> <End> 
```

## 编辑：

在`:help cmdline`我找到的帮助文件中

```
:cnoremap <C-A> <Home>
:cnoremap <C-F> <Right>
:cnoremap <C-B> <Left>
:cnoremap <Esc>b <S-Left>
:cnoremap <Esc>f <S-Right> 
```

最后两个是跳词的——快乐跳跃

# php - php preg_replace help 编译失败：括号不匹配

> ID：11090809
> 
> 赞同：1
> 
> 时间：2012-06-18T20:50:51.237
> 
> 标签：php, joomla, preg-replace, vertex

不确定我是否只是愚蠢或其他什么，但我在这里为 Shape5.com 工作，我在那里制作了 Vertex Framework .preg-replace]：编译失败：偏移量 67 处的括号不匹配

这是我们的代码

```
<?php
$script = "Hello window.addEvent('domready', function(){ new Fx.Accordion($$('div#template-sliders-116.pane-sliders > .panel > h3.pane-toggler'), $$('div#template-sliders-116.pane-sliders > .panel > div.pane-slider'), {onActive: function(toggler, i) {toggler.addClass('pane-toggler-down');toggler.removeClass('pane-toggler');i.addClass('pane-down');i.removeClass('pane-hide');Cookie.write('jpanesliders_template-sliders-116',$$('div#template-sliders-116.pane-sliders > .panel > h3').indexOf(toggler));},onBackground: function(toggler, i) {toggler.addClass('pane-toggler');toggler.removeClass('pane-toggler-down');i.addClass('pane-hide');i.removeClass('pane-down');if($$('div#template-sliders-116.pane-sliders > .panel > h3').length==$$('div#template-sliders-116.pane-sliders > .panel > h3.pane-toggler').length) Cookie.write('jpanesliders_template-sliders-116',-1);},duration: 300,opacity: false,alwaysHide: true}); });";
$script = preg_replace("/window.addEvent('domready', function(){ new Fx.Accordion(.*?)}); });/", '', $script);
echo $script;
?> 
```

问题是 Fx.Accordion 永远根据他们使用的模板而变化，这真的让我很烦恼正如我们所看到的那样，如果有人可以帮助它粉碎。

偏移量 67 是最后一个），是的，我尝试将其转义，将其删除，您将其命名为我尝试过：D

我敢打赌，这很简单，哈哈

谢谢戴夫

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-18T20:54:30.297

括号是 PCRE 中用于捕获分组的特殊字符，需要通过反斜杠转义，`{}`否则将是范围说明符和点`.`。

```
$script = preg_replace("/window\.addEvent\('domready', function\(\)\{ new Fx.Accordion\(.*?\)\}\); \}\);/", '', $script); 
```

我想我已经完全逃脱了。我认为这`(.*?)`不是一个捕获组。`?`那里实际上是不必要的，因为暗示`.*`任何字符的零个或多个。

```
$script = preg_replace("/window\.addEvent\('domready', function\(\)\{ new Fx.Accordion(.*?)\}\); \}\);/", '', $script);
//-----------------------------------------------------------------------Don't escape ^^^^^ 
```

更新：如果`(.*?)`打算作为非贪婪匹配组，则不要逃避它。

# javascript - 使用 javascript/jquery 对 JSON 数据进行分组/排序

> ID：11090817
> 
> 赞同：3
> 
> 时间：2012-06-18T20:51:22.190
> 
> 标签：javascript, jquery, json

我有一个 JSON 数据，我需要做一些类似 group by 的事情，我在这里之前问过这个问题，但我没有得到任何满意的答案，所以这次我想更深入地解释一下。

首先，谁能解释一下 javascript 和 sql 之间的区别，`groupby`因为`orderby`在 sql 中我们需要聚合函数才能使用`group by`. 但我不想要聚合函数之类的东西。在这里，我提供了一个非常示例的 JSON 数据和我正在寻找的输出。

所有作者姓名应按`sortby`字母数字顺序排列。

JSON数据：

```
var myObject = {
    "Apps": [
        {
            "Name": "app1",
            "id": "1",
            "groups": [
                {
                    "id": "1",
                    "name": "test group 1",
                    "category": "clinical note",
                    "author": "RRP"
                }, {
                    "id": "2",
                    "name": "test group 2",
                    "category": "clinical image",
                    "author": "LKP"
                }, {
                    "id": "3",
                    "name": "test group 3",
                    "category": "clinical document",
                    "author": "RRP"
                }, {
                    "id": "4",
                    "name": "test group 4",
                    "category": "clinical note",
                    "author": "John"
                }
            ]
        }
    ]
} 
```

预期输出：

```
John
  4 testgroup4 clinicalnote 
RRP
  1 testgroup1  clinicalnote
  3 testgroup3  clinicaldocument
LKP
  2 testgroup2 clinicalimage 
```

任何想法/建议/方向/想法都会有很大帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2014-02-09T07:55:05.777

你可以使用[Underscore.js](http://underscorejs.org/#chain)轻松做到这一点：

```
_.chain(myObject.Apps[0].groups).sortBy("author").groupBy("author").value(); 
```

输出一个 JSON 对象：

```
{
 "John":[{"id":"4","name":"test group 4","category":"clinical note","author":"John"}],
 "LKP":[{"id":"2","name":"test group 2","category":"clinical image","author":"LKP"}],
 "RRP":[{"id":"1","name":"test group 1","category":"clinical note","author":"RRP"},{"id":"3","name":"test group 3","category":"clinical document","author":"RRP"}]
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-18T21:01:14.077

对于这种情况，Javascript 中没有内置的“group by”或“order by”。您将不得不手动执行此操作。这样的事情可能会有所帮助：

```
var groups = myObject.Apps[0].groups;
var authors = {};
var authorNames = [];

for(var i = 0; i < groups.length; i++) {
    var group = groups[i];    

    if(typeof authors[group.author] === "undefined") {
        authors[group.author] = [];
        authorNames.push(group.author);
        authorNames.sort();
    }

    authors[group.author].push({
        id: group.id,
        name: group.name,
        category: group.category
    });       
} 
```

通常在关联数组中，您并不真正关心键的顺序，并且在迭代顺序时通常不能保证。我在这里所做的是按排序顺序维护一个单独的名称数组。然后我可以遍历该数组并使用这些值从关联数组中获取关联对象。

看看[小提琴](http://jsfiddle.net/Th6TG/)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-01-11T13:34:04.370

使用[一流的函数](https://en.wikipedia.org/wiki/First-class_function)通过键化简器和排序器创建通用组。我将从我[以前的答案中](https://stackoverflow.com/questions/53320017/partial-lenses-group-array-of-objects-by-property-use-prop-value-as-key/53320615#53320615)提取减速器。这样，您就可以按您喜欢的任何键进行排序和分组，就像您在 SQL 中所做的那样。

```
const groupBy = key => (result,current) => {
  const item = Object.assign({},current);
  if (typeof result[current[key]] == 'undefined'){
    result[current[key]] = [item];
  }else{
    result[current[key]].push(item);
  }
  return result;
};

const stringSortBy = key => (a,b) => {
   const sa = a[key];
   const sb = b[key];
   return sa < sb ? -1 : +(sa > sb);
};

const myObject = {
    "Apps": [
        {
            "Name": "app1",
            "id": "1",
            "groups": [
                {
                    "id": "1",
                    "name": "test group 1",
                    "category": "clinical note",
                    "author": "RRP"
                }, {
                    "id": "2",
                    "name": "test group 2",
                    "category": "clinical image",
                    "author": "LKP"
                }, {
                    "id": "3",
                    "name": "test group 3",
                    "category": "clinical document",
                    "author": "RRP"
                }, {
                    "id": "4",
                    "name": "test group 4",
                    "category": "clinical note",
                    "author": "John"
                }
            ]
        }
    ]
}

const categories = myObject.Apps[0].groups.reduce(groupBy('category'),{});
console.log(categories);
const sorted = myObject.Apps[0].groups.sort(stringSortBy('author'));
console.log(sorted);
```

# node.js - Jade + NodeJS：未按要求呈现

> ID：11090819
> 
> 赞同：0
> 
> 时间：2012-06-18T20:51:31.633
> 
> 标签：node.js, twitter-bootstrap, pug, express

我正在使用 Bootstrap 来设计我的网站。我的 index.jade 中有以下代码段：

```
form.form-inline.pull-right(action='http://localhost:1337/authenticated', method='POST')
  input.input-small(type='text', placeholder='Email', name='emailInput') 
  input.input-small(type='password', placeholder='Password', name='passwordInput')
  label.checkbox
    input(type='checkbox') Remember me
  button.btn(type='submit') Sign in 
```

呈现为

```
<form action="http://localhost:1337/authenticated" method="POST"
  class="form-inline pull-right">
  <input type="text" placeholder="Email" name="emailInput"
    class="input-small"><input type="password"
    placeholder="Password" name="passwordInput" class="input-small"><label
    class="checkbox"><input type="checkbox"></label>
  <button type="submit" class="btn">Sign in</button>
</form> 
```

但我需要它呈现为（注意标签，而不是缩进） **编辑：**实际上我需要相同的意图并且“记住我”出现

```
<form class="form-inline pull-right" action="http://localhost:1337/authenticated" method="POST">
  <input type="text" class="input-small" placeholder="Email" name="emailInput">
  <input type="password" class="input-small" placeholder="Password" name="passwordInput">
  <label class="checkbox">
    <input type="checkbox"> Remember me
  </label>
  <button type="submit" class="btn">Sign in</button>
</form> 
```

我该如何解决？Jade 不识别“标签”元素吗？ **编辑：**忘记“标签”元素，这是正确的。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-18T21:16:26.807

文本“记住我”需要是标签元素的子元素：

```
label.checkbox
  input(type='checkbox')
  | Remember Me 
```

您的示例将“记住我”作为输入元素的子元素，该元素无效且不会呈现。请参阅[https://github.com/visionmedia/jade#tag-text](https://github.com/visionmedia/jade#tag-text)。

# matlab - matlab中的多类型文本读取

> ID：11090821
> 
> 赞同：0
> 
> 时间：2012-06-18T20:51:37.750
> 
> 标签：matlab, file-io

我正在处理一个 matlab 项目。我有一个像这样的文本文件

```
AGE 1   1
SEX 2   2
NOP 3   0
SES 0   5
PDD 6   6
ACD 0   0
UDC 8   3 
```

我想使用 textread 从这个制表符分隔的文件中创建一个变量，如下面的示例。

```
x= 

    'AGE'   1   1
    'SEX'   2   0
    'NOp'   3   3
    'SES'   0   5
    'PDD'   6   6
    'ACD'   0   0
    'UDC'   8   3 
```

我该怎么做？我尝试了很多东西，但无法找到解决方案，请帮忙。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-18T21:10:21.933

你可以这样做：

```
Filename = 'testfile.txt';    
fid = fopen(Filename);
Output = textscan(fid, '%s %d %d', 'delimiter', ' ', 'MultipleDelimsAsOne', 1);
fclose(fid); 
```

然后你将拥有：

```
Output = 
{7x1 cell}    [7x1 int32]    [7x1 int32]

Output{1} =
'AGE'
'SEX'
'NOP'
'SES'
'PDD'
'ACD'
'UDC'

Output{2} =
       1
       2
       3
       0
       6
       0
       8

Output{3} =
       1
       2
       0
       5
       6
       0
       3 
```

然后扩展单元格数组元素，以便可以直接寻址每个元素：

```
x = [ Output{1}, num2cell(Output{2}), num2cell(Output{3}) ]

x = 
'AGE'    [1]    [1]
'SEX'    [2]    [2]
'NOP'    [3]    [0]
'SES'    [0]    [5]
'PDD'    [6]    [6]
'ACD'    [0]    [0]
'UDC'    [8]    [3] 
```

然后您可以直接处理这些元素：

```
x(1,1) = 
'AGE'

x(5,2) =
[6] 
```

# c - 与 OpenMP 同步，For 指令

> ID：11090831
> 
> 赞同：2
> 
> 时间：2012-06-18T20:52:12.833
> 
> 标签：c, multithreading, synchronization, openmp

我想编写一些示例代码来测试 Open MP API。我已经做了一个三级 For 循环，并在其中进行了计算。

问题是我的结果是错误的。

这是我的代码：

```
long value = 0;
#pragma omp parallel
{
#pragma omp for
for (int i=0;i<=9999;i++)
{
    value += (M_PI * i * i -12,33 * M_PI)- M_PI;

    for (int j=0;j<=888;j++)
    {
        value += (M_PI * j * i -12,33 * M_PI)- M_PI;

        for (int k=0;k<=777;k++)
        {
            value += (M_PI * k * j -12,33 * M_PI)- M_PI;    
        }
    }
}
} 
```

我的问题 ：

没有 Open MP，`value`变量的值为：`191773766` Whit Open MP，`value`变量的值为： `1092397966`

我认为这是一个同步问题，但如何解决呢？我已经阅读了很多关于 Open MP 的内容，但我不知道如何解决它。

非常感谢，

此致，

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-18T20:56:57.193

你错过了`reduction(+:value)`条款。

```
#pragma omp parallel reduction(+:value)  //  add reduction here
{
#pragma omp for 
```

您需要它的原因是因为您`value`在所有线程之间共享变量。所以他们异步更新它导致竞争条件。（缓存一致性也会对性能造成影响。）

该`reduction(+:value)`子句告诉编译器为每个线程创建一个单独的实例，`value`然后在最后总结它们。

* * *

**编辑：应 OP 要求的完整代码。**

```
int main() {

    double start = omp_get_wtime();

    long M_PI = 12;

    long value = 0;
#pragma omp parallel reduction(+:value)
{
#pragma omp for
for (int i=0;i<=9999;i++)
{
    value += (M_PI * i * i -12,33 * M_PI)- M_PI;

    for (int j=0;j<=888;j++)
    {
        value += (M_PI * j * i -12,33 * M_PI)- M_PI;

        for (int k=0;k<=777;k++)
        {
            value += (M_PI * k * j -12,33 * M_PI)- M_PI;    
        }
    }
}
}    
    double end = omp_get_wtime();
    printf("\n\nseconds = %f\n",end - start);

    cout << value << endl;

    system("pause");
    return 0;
} 
```

**输出：（没有 OpenMP）**

```
seconds = 0.007816
738123776 
```

**输出：（使用 OpenMP - 8 个线程）**

```
seconds = 0.012784
738123776 
```

如果您想要任何加速，您需要使任务*更大*。

# c# - 以正确的格式返回 JSONP WCF

> ID：11090835
> 
> 赞同：6
> 
> 时间：2012-06-18T20:52:27.047
> 
> 标签：c#, wpf, wcf, web-services, jsonp

我正在尝试输出正确包装的 JSONP 值以供 jQuery 使用。

我正在寻找的输出是：

```
jsoncallback({"Status": "OK"}) 
```

但是它输出的atm：

```
"jsoncallback({"Status": "OK"})" 
```

显然这不是正确的 JSONP 格式，因为 jQuery 请求无法处理响应。

我在 C# 中的 OperationContract 是：

```
[OperationContract]
[WebInvoke(Method = "GET",
   ResponseFormat = WebMessageFormat.Json,
   UriTemplate = "returndata?s={s}")]
Stream EchoWithGet(string s);

    public string EchoWithGet(string s)
    {
        string json = @"jsoncallback({'Status':'OK'})";
        Console.WriteLine("Call Made: " + s);
        return json;
    } 
```

我已经尝试使用`JSON.NET`以及`System.Web.Script`命名空间来使用`JavaScriptSerializer`.

但没有什么对我有用，我真正想做的就是去掉两个双引号。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-06-19T00:53:26.160

如果您使用 jQuery 提交 ajax 请求并请求`dataType: "jsonp"`，则 jQuery 将在请求中传递回调函数的名称（例如，`/returndata?s=hello&callback=jquery123456789`），因此在这种情况下返回常量“jsonCallback”将不起作用。

此外，在您的问题中，您有操作合同定义返回`Stream`，而在操作本身上您正在返回`string`- 那里有问题。

你需要做什么：你有两个选择。第一个是让 WCF 为您处理 JSONP 填充。您的操作需要返回具有属性“状态”的数据类型，然后返回它。您还需要启用[`CrossDomainScriptAccessEnabled`](http://msdn.microsoft.com/en-us/library/system.servicemodel.webhttpbinding.crossdomainscriptaccessenabled.aspx)端点使用的 WebHttpBinding 上的属性。您的操作将类似于以下代码：

```
public class MyType
{
    public string Status { get; set; }
}

[ServiceContract]
public class Service
{
    [WebGet(UriTemplate = "returndata?s={s}")]
    public MyType ReturnData(string s)
    {
        return new MyType { Status = "OK" };
    }
} 
```

第二个选项，如果您想自己创建 JSONP 代码，将在 URI 中为回调函数名称附加一个参数，然后在创建响应时使用它。您还需要将其作为 a 返回`Stream`，这样您就不会以字符串的形式获得响应（这可能是您现在所拥有的）。看起来像这样：

```
[ServiceContract]
public class Service
{
    [WebGet(UriTemplate = "ReturnData?s={s}&callback={callbackFunctionName}")]
    public Stream EchoWithGet(string s, string callbackFunctionName)
    {
        string jsCode = callbackFunctionName + "({\"Status\":\"OK\"});";
        WebOperationContext.Current.OutgoingResponse.ContentType = "application/javascript";
        return new MemoryStream(Encoding.UTF8.GetBytes(jsCode));
    }
} 
```

这个 jQuery 代码可以用来访问这个服务：

```
 function StackOverflow_11090835_Test() {
        var url = "/StackOverflow_11090835.svc/ReturnData";
        var data = { s: "Hello world" };
        $.ajax({
            type: 'GET',
            url: url,
            data: data,
            dataType: "jsonp",
            success: function (result) {
                $("#result").text(result.Status);
            }
        });
    } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-18T21:03:41.900

您需要评估 WCF 调用的输出。看到这个[小提琴](http://jsfiddle.net/dhoerster/7B2EL/)。

您从 WCF 调用中得到一个字符串。您基本上需要编译它然后执行它。

这是小提琴的代码：

```
function jsonCallback(obj){
    alert(obj.Status);
}

$(document).ready(function(){
    var js = "jsonCallback({'Status':'OK'})";
    eval(js);
});​ 
```

该`js`变量是 WCF 调用的输出。只要我`eval`它，它将编译和执行。

# android - 如何在Android中制作两个像素宽度分割器

> ID：11090836
> 
> 赞同：0
> 
> 时间：2012-06-18T20:52:41.423
> 
> 标签：android, android-layout, drawable

我正在开发一个简单的 Android 应用程序，它会在屏幕顶部有一个操作栏：

![在此处输入图像描述](../Images/863f00807d4e8f27b4bad0227f9353c2.png)

我已经有了渐变背景（可绘制）和箭头图标集的栏，但我不确定如何创建两个像素宽度拆分器。

左列像素的颜色是 ，右列`#5e5e5e`是`#181818`。

创建这种可重复使用的拆分器的最佳方法是什么（针对性能进行了优化）？

最好的办法是将这个拆分器作为一个小部件。

任何帮助将不胜感激！

**更新：**

条是`LinearLayout`带有渐变背景的，箭头是单个透明的`ImageView`。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-18T20:57:37.307

在左列使用右边距。或右栏的左边距。不需要专用的拆分器视图。

如果您绝对需要将拆分器作为视图，请使用`View`. 你可以给它一个背景和一个大小，这就足够了。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-20T17:10:42.297

我最终创建了一个 2x1 像素的 PNG 图像并将其用作 View 小部件的背景：

```
<View 
     android:layout_width="2px"
     android:layout_height="fill_parent"
     android:background="@drawable/splitter" 
/> 
```

# ios - 在iOS上，如何延迟cameraIris Animation的打开部分

> ID：11090838
> 
> 赞同：1
> 
> 时间：2012-06-18T20:53:03.177
> 
> 标签：ios, animation, camera

我正在手动显示虹膜动画：

```
- (void)playPictureTakenAnimation {
    CATransition *animation = [CATransition animation];
    animation.type = @"cameraIris";
    animation.duration = 0.8f;
    animation.timingFunction = UIViewAnimationCurveEaseInOut;
    irisAinmationView.opaque = 1.0f;
    [irisAinmationView.layer addAnimation:animation forKey:@"transitionViewAnimation"];
} 
```

我需要暂停动画，直到照片被拍摄并被处理，例如：

1.  快门关闭（动画的前半部分）
2.  拍摄并处理照片（动画暂停），然后
3.  重新打开快门（动画的后半部分）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-09T07:56:50.443

要控制起点和终点，请使用：

```
animation.startProgress = 0.0; // start
animation.endProgress = 0.5; // halfway 
```

和：

```
animation.startProgress = 0.5; // halfway
animation.endProgress = 1.0; // end 
```

随着：

```
- (void)animationDidStop:(CAAnimation *)theAnimation finished:(BOOL)flag 
```

在动画停止时获得控制权。

# debugging - Visual Studio - 附加到进程

> ID：11090839
> 
> 赞同：2
> 
> 时间：2012-06-18T20:53:03.637
> 
> 标签：debugging, visual-studio-2008

我试图了解“附加到进程”在 Visual Studio 中的用途。我正在寻找内存泄漏，我发现 WinDBG 至少可以说很难使用。我意识到还有其他商业替代品，例如 ANT Profiler。

“附加到进程”具体用于什么？我在网上搜索并找到了大量说明在 Visual Studio 中选择什么以及如何使用具有此功能的宏的文档，但没有说明具体用途的文档。

**更新 19/06/2012 格林威治标准时间 19:40** 我已设法将 Visual Studio 调试器附加到正在运行的进程（小型 VB.NET 程序）。但是，我注意到似乎不需要 PDB 文件，即我可以添加断点并在没有它们的情况下单步执行代码。在 Visual Studio 中附加到进程时是否需要 PDB 文件？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-18T20:55:50.217

如果您在不同的用户上下文中运行应用程序并需要对其进行调试，则可以附加到该进程。这个过程可以是本地的或远程的。

本质上，它用于调试已经运行的进程。

注意：您确实需要在 Visual Studio 中拥有此过程的源代码（或拥有Visual Studio 可以使用的指向同一可执行文件的[符号服务器）。](http://support.microsoft.com/kb/311503)

# php - 通过 Cron 作业运行 PHP

> ID：11090842
> 
> 赞同：1
> 
> 时间：2012-06-18T20:53:07.803
> 
> 标签：php, ubuntu, cron

我在 Ubuntu 上，并且有一个我一直在尝试运行的小型备份脚本。不幸的是，它没有执行备份。我在这里包含了两个 PHP 脚本，以防我遗漏了一些东西。

首先，这是我的 crontab 的样子

```
*/30 * * * * /usr/bin/php /var/www/mybackup.php 
```

上面的 cron 应该调用这个脚本：`mybackup.php`

```
 <?php
include('myfunctions.php');

   theBackup();

?> 
```

主要脚本是这样的。虽然当我手动运行它时它工作得很好，但它不能用 cron 运行。

```
<?php
/*
 * Script to back up the database
 * 
 *
*/

function getAllFiles($directory, $recursive = false) {
     $result = array();
     $handle =  opendir($directory);
     while ($datei = readdir($handle))
     {
          if (($datei != '.') && ($datei != '..'))
          {
               $file = $directory.$datei;
               if (is_dir($file)) {
                    if ($recursive) {
                         $result = array_merge($result, getAllFiles($file.'/'));
                    }
               } else {
                    $result[] = $file;
               }
          }
     }
     closedir($handle);
     return $result;
}

function getOldestTimestamp($directory, $recursive = true, $display ='file') {
     $allFiles = getAllFiles($directory, $recursive);
     $highestKnown = time();
     $highestFile = '';
     foreach ($allFiles as $val) {
          $currentValue = filemtime($val);
          $currentFile = $val;
          if ($currentValue < $highestKnown){
                $highestKnown = $currentValue;
                $highestFile = $currentFile;
          }
     }
    if($display=='file'){
        return $highestFile;
    } else {
        return $highestKnown;
    }
}

function theBackup(){

$sendfrom = "System Backup <admin@domain.com>";

$headers = 'Admin <admin@domain.com>' . "\n";
$headers .= 'MIME-Version: 1.0' . "\n";
$headers .= 'Content-type: text/html; charset=iso-8859-1' . "\n";

$filename = getOldestTimestamp('./app/db/',true,'file');
$filename = str_replace("./app/db/", "", $filename );

$backupfile = '/var/www/app/db/'.$filename;
$handle  = fopen($backupfile, 'w') or die('Cannot open file:  '.$backupfile); 

$dbhost  = "localhost";  
$dbuser  = "user";
$dbpass  = "password";
$dbname  = "db";

if(system("mysqldump -h $dbhost -u $dbuser  -p$dbpass  $dbname  > $backupfile") == false){
    mail('email@yahoo.com','My Backup','Back Up successfully completed',$headers );

  }else {
    mail('email@yahoo.com','My Backup','Back Up did NOT complete successfully please check the file/folder 

permission',$headers );

   }   
 }
?> 
```

上面的代码有什么我遗漏的吗？就像我说的，当我从浏览器运行 mybackup.php 时，它运行良好，但不是通过 cron。

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-18T21:00:19.280

我认为你需要完整的包含路径，你说：

```
include('myfunctions.php'); 
```

应该像

```
include('/var/www/myfunctions.php'); 
```

或任何地方。还要检查您的日志以查看您收到的错误消息

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-18T20:59:24.093

您正在使用绝对路径在 cron 作业中运行 php

```
*/30 * * * * /usr/bin/php /var/www/mybackup.php 
```

并且包含 URL 是相对的

```
include('myfunctions.php'); 
```

也尝试使用绝对 URL 来包含。

# visual-studio-2010 - VS 2010 中的 .cu 文件没有颜色

> ID：11090843
> 
> 赞同：3
> 
> 时间：2012-06-18T20:53:26.023
> 
> 标签：visual-studio-2010, cuda

我正在开发简单的 CUDA 应用程序。我按照[http://www.ademiller.com/blogs/tech/2010/10/visual-studio-2010-adding-intellisense-support-for-cuda-c/](http://www.ademiller.com/blogs/tech/2010/10/visual-studio-2010-adding-intellisense-support-for-cuda-c/)上给出的步骤操作，但 .cu 中仍然没有颜色文件。我的意思是一切都是黑色的，这可能是什么原因？我能够运行程序。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-24T05:36:28.707

![添加 cu 扩展名](../Images/20073bfbcb587ca8df13d686db722977.png)

这张图片说明了一切。转到工具 > 选项，然后在左栏中选择文本编辑器。然后点击文件扩展名，如图所示。在扩展名下输入 cu，选择 Microsoft Visual C++ 作为编辑器，然后点击添加。根据我的经验，这就是使 Visual Studio 使用 c++ 语法解释/着色我的 .cu 文件所必需的一切。

另请注意，这与您发布的链接所暗示的相似。这种方法只是对此的视觉描述。另请注意，我并没有真正执行该网站上列出的额外步骤，因为**共享**和**设备**以及所有颜色似乎并不那么重要。

希望有帮助。

# c++ - 分配给嵌套的 QVariantMap

> ID：11090846
> 
> 赞同：11
> 
> 时间：2012-06-18T20:53:44.497
> 
> 标签：c++, qt, qvariant, qmap

```
#include <QtCore/QCoreApplication>
#include <QVariant>
#include <QtDebug>

int main(int argc, char *argv[])
{
    QCoreApplication a(argc, argv);
    QVariantMap map;
    map["foo"] = QVariant(QVariantMap());
    map["baz"] = "asdf";
    qvariant_cast<QVariantMap>(map["foo"])["bar"] = "a";

    qDebug() << qvariant_cast<QVariantMap>(map["foo"])["bar"].toString();
    qDebug() << map["baz"].toString();

    return a.exec();
} 
```

我正在尝试分配给嵌套 QVariantMap 中的 QVariant。第一个 qDebug() 不输出任何内容，但第二个按预期输出“asdf”。如何将嵌套变量映射中的“bar”键分配给一个值？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-06-18T21:34:54.123

问题是 qvariant_cast 没有返回对其正在运行的 QVariant 内部的引用；它返回一个副本。因此，如果您用新的子地图覆盖顶级地图中的“foo”元素，代码将正常工作：

```
#include <QtCore/QCoreApplication>
#include <QVariant>
#include <QtDebug>

int main(int argc, char** argv)
{
    QCoreApplication a(argc, argv);
    QVariantMap map;
    map["foo"] = QVariant(QVariantMap());
    map["baz"] = "asdf";

    QVariantMap newMap;
    newMap["bar"] = "a";
    map["foo"] = QVariant(newMap);

    qDebug() << qvariant_cast<QVariantMap>(map["foo"])["bar"].toString();
    qDebug() << map["baz"].toString();

    return a.exec();
} 
```

大概，您想修改现有地图而不是覆盖它。您可以通过复制现有地图、添加新数据（这将导致深层复制）然后将地图写回中来完成此操作：

```
QVariantMap existingMap = qvariant_cast<QVariantMap>(map["foo"]);
existingMap["bar"] = "a";
map["foo"] = QVariant(existingMap); 
```

如果您正在考虑存储大量数据，您可能希望重新考虑使用 QVariant。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-28T12:49:21.963

或者你可以按照手推车不喜欢的方式来做。

```
#include <QtCore/QCoreApplication>
#include <QVariant>
#include <QtDebug>

int main(int argc, char *argv[])
{
    QCoreApplication a(argc, argv);
    QVariantMap map;
    map["foo"] = QVariant(QVariantMap());
    map["baz"] = "asdf";
    static_cast<QVariantMap>(map["foo"].data_ptr())["bar"] = "a";

    qDebug() << qvariant_cast<QVariantMap>(map["foo"])["bar"].toString();
    qDebug() << map["baz"].toString();

    return a.exec();
} 
```

或者，您可以安全且美观地完成这一切，并使用 QExplicitlySharedDataPointer 而不是直接使用 QVariantMap。像这样：

```
#include <QtCore>
#include <QtDebug>
class VarMap : public QVariantMap, public QSharedData {};
typedef QExplicitlySharedDataPointer<VarMap> SharedVarMap;
Q_DECLARE_METATYPE(SharedVarMap)
int main(int argc, char *argv[])
{
    QCoreApplication a(argc, argv);
    QVariantMap map;
    map["foo"] = SharedVarMap(new VarMap());
    map["baz"] = "asdf";
    map["foo"].value<SharedVarMap>()->["bar"] = "a";

    qDebug() << map["foo"].value<SharedVarMap>()->["bar"].toString();
    qDebug() << map["baz"].toString();

    return a.exec();
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2015-01-27T03:15:34.090

当 qvariant_cast 被执行时，对象被复制。你应该使用对象的指针。您可以尝试以下代码而不是 qvariant_cast 代码。

```
QVariantMap* m = (QVariantMap*)(map["foo"].data());
(*m)["bar"] = "a"; 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2015-03-18T12:32:25.793

```
template <typename T>
inline T& getStoredValueRef(QVariant &v)
{
    const auto type = qMetaTypeId<T>(static_cast<T*>(nullptr));
    auto& d = v.data_ptr();
    if (type == d.type)
    {
        auto data = reinterpret_cast<T*>(d.is_shared ? d.data.shared->ptr : &d.data.ptr);
        return *data;
    }
    throw std::runtime_error("Bad type");
} 
```

用它作为

```
(getStoredValueRef<QVariantMap>(map["foo"]))["bar"] = "a"; 
```

而且更深

```
(getStoredValueRef<QVariantMap>(
    (getStoredValueRef<QVariantMap>(map["foo"]))["bar"]))["zoo"] = "a"; 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2016-05-09T15:10:59.427

[从 Qt 5.1 开始](http://doc.qt.io/qt-5/qmap.html#QMap-1)，您可以使用[C++11 统一初始化语法](https://mbevin.wordpress.com/2012/11/16/uniform-initialization/)来构建嵌套`QMap`或`QVariantMap`轻松的：

```
QVariantMap fooMap{
    {"bar", "a"}
};

QVariantMap map{
    {"foo", fooMap},   // nested map
    {"baz", "asdf"}
};

qDebug() << qvariant_cast<QVariantMap>(map["foo"])["bar"].toString();  // outputs "a"
qDebug() << map["baz"].toString();    // outputs "asdf" 
```

# c# - C# 在上下文之外保存实体对象

> ID：11090852
> 
> 赞同：1
> 
> 时间：2012-06-18T20:54:01.650
> 
> 标签：c#, linq, entity-framework

我有一条来自以下 linq 查询的记录：

```
using (var context = new myEntities())
{
     var record = (from d in context.Student select d).SingleOrDefault();
} 
```

我通常为记录分配一个新值，如下所示：

```
record.Value = SomeNewValue; 
```

然后我会做一个

```
context.SaveChanges; 
```

这一切都很好。我的问题是：如果我将相同的记录传递给另一个函数，或者如果记录是从函数返回的，如何保存相同的记录？我正在寻找这样的东西：

```
context.SaveChanges(record); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-18T21:00:47.820

触发相关功能的操作应创建和管理`context`. 如果它是 ASP.NET MVC 应用程序，我鼓励您在请求开始时设置上下文并在`context.SaveChanges`完成时调用。在 winforms/WPF 应用程序中，您可能希望`context`在应用程序的整个生命周期内都保持这种状态，并`context.SaveChanges()`在任何可能更改数据的操作（如按下按钮）之后调用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-18T21:01:28.357

你的意思是你有一个类对象可以使用吗？如果是这样的话：

```
myEntities.Student.AddObject(student); //Where student is of type Student 
```

或者，如果您还没有，请即时创建一个：

```
myEntities.Student.AddObject(new Student()
           {
              Name = formData[Name],
              GPA = GetGPA(),
              Major = Convert.ToString(Major)
           }); 
```

不过，您仍然必须`SaveChanges`在此之后打电话。

**或者...**

如果您跟踪对象并在上述上下文之外使用它们，则可以修改属性的访问器，以便在修改对象的属性时调用该`SaveChanges()`方法并提交您的更改。只是想一想。

进一步阅读材料：http: [//msdn.microsoft.com/en-us/library/bb738695.aspx](http://msdn.microsoft.com/en-us/library/bb738695.aspx)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-18T21:05:37.283

也许你会喜欢这样的东西：

```
static class Utilities
{
    public static void SaveChanges( this MyEntity entity, Student record, Student SomeNewValue ) 
    {
         record.Value = SomeNewValue;
         entity.SaveChanges;
    }
} 
```

那么你可以像这里一样调用函数：

```
context.SaveChanges(record, SomeNewValue); 
```

# jquery - 带有 .before Jquery 的 FadeIn 元素

> ID：11090854
> 
> 赞同：1
> 
> 时间：2012-06-18T20:54:11.397
> 
> 标签：jquery

使用 jquery 的 .before 后如何淡入元素？

jQuery

```
$('.button').on("click", function(event){
   var html = '';
   html = '<div class="row new">Test</div>';

   $('.content .row:first').before(html);
}); 
```

HTML

```
<a class="button">Insert me and fade me</a>
<div class="content">
    <div class="row"></div>
    <div class="row"></div>
    <div class="row"></div>
</div> 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-18T21:00:06.970

```
$(function() {
$('.button').on("click", function(event){
   var html = '';
   html = '<div class="row new">Test</div>';

   $('.content .row:first').before($(html).fadeIn());
});
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-18T21:02:11.180

```
$('.button').on("click", function(event){
   var html = '<div class="row">Test</div>';
   $('.content .row:first').before(html).prev().hide().fadeIn(1000);
});​ 
```

`new`上课是不必要的。您已经知道第一行是新行（并且您必须在后续插入时删除该类）。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-18T21:02:24.687

添加这一行：`$('.row.new:last').hide().fadeIn();`

**jQuery** :

```
$('.button').on("click", function(event) {
    var html = '';
    html = '<div class="row new">Test</div>';
    $('.content .row:first').before(html);
    $('.row.new:first').hide().fadeIn();
});​ 
```

**[jsFiddle 示例](http://jsfiddle.net/j08691/KAtep/1/)**。

# c# - 洋葱架构日志记录 NHibernate

> ID：11090857
> 
> 赞同：3
> 
> 时间：2012-06-18T20:54:17.723
> 
> 标签：c#, nhibernate, ninject, nlog, onion-architecture

我正在使用基于洋葱架构的[这种](http://www.develop.com/onionarchitecture)实现的架构。我决定挑战自己，用 NLog 更改 NHibernates 默认记录器（log4net）。我了解如何配置 NLog，但在我的 LogerFactory 类中解决我的记录器的依赖项时遇到了麻烦。目前，我的 NHibernate 项目只知道我的日志接口。如何让我的 NHibernate 项目解决依赖关系？

这是我现在的程序结构：Console App 初始化 ninject 并设置我的模块，包括我的 LoggingModule 和我的 RepositoryModule。当我第一次需要我的存储库中的某些东西时，我的 SessionHelper 类会构建我的会话并配置 NHibernate。这是 NHibernate 调用我的 LoggerFactory 的地方（LoggerFactory 实现 NHibernates ILoggerFactory）。NHibernate 调用 LoggerFor(Type type); 类型作为 NHibernate.Cfg.Configuration 传入。从这里开始，我需要通过 ILoggingService 获取 NLog 的实例，这就是我感到困惑的地方。我如何在这里解决这种依赖关系？我的控制台应用程序知道分辨率，因为那是我构建内核并加载模块的地方。我只是在这里设置另一个内核吗？解决这个问题的最佳方法是什么？

编辑：这是我当前的代码：

程序.cs

```
namespace ZeroBase.ManualConsole
{
    class Program
    {
        static void Main(string[] args)
        {
            IKernel kernel = CreateKernel();

            CoreService service = new CoreService(
                kernel.Get<ZeroBase.Domain.Interfaces.IUserRepository>(), 
                kernel.Get<ZeroBase.Domain.Interfaces.ICommentRepository>());

            //.........

        }

        static IKernel CreateKernel()
        {
            IKernel kernel = new StandardKernel();
            RegisterServices(kernel);
            return kernel;
        }

        static void RegisterServices(IKernel kernel)
        {
            // Bind Core Service
            kernel.Bind<ICoreService>().To<CoreService>();

            // Add data and infrastructure modules
            var modules = new List<INinjectModule>
            {
                new ConfigModule(),
                new LoggingModule(),
                new RepositoryModule()
            };

            kernel.Load(modules);
        }

    }
} 
```

记录模块.cs

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;
using Ninject.Modules;
using ZeroBase.Infrastructure.Interfaces;
using NLog.Config;
using NLog;
using ZeroBase.Infrastructure.Logging;

namespace ZeroBase.Infrastructure.DependencyResolution
{
    public class LoggingModule : NinjectModule
    {
        public override void Load()
        {
            ILoggingService logger = GetLoggingService();
            Bind<ILoggingService>().ToConstant(logger);
        }

        private ILoggingService GetLoggingService()
        {
            ConfigurationItemFactory.Default.LayoutRenderers
                .RegisterDefinition("utc_date", typeof(UtcDateRenderer));
            ConfigurationItemFactory.Default.LayoutRenderers
                .RegisterDefinition("web_variables", typeof(WebVariablesRenderer));
            ILoggingService logger = (ILoggingService)LogManager.GetLogger("NLogLogger", typeof(LoggingService));
            return logger;
        }
    }
} 
```

存储库模块.cs

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;

using Ninject;
using Ninject.Modules;

using ZeroBase.Infrastructure.Interfaces;
using ZeroBase.Domain.Interfaces;
using ZeroBase.Infrastructure.Data;

namespace ZeroBase.Infrastructure.DependencyResolution
{
    public class RepositoryModule : NinjectModule
    {
        public override void Load()
        {
            SetupLogging();
            BindRepositories();
        }

        private void SetupLogging()
        {
            // Get logging service
            var loggingService = Kernel.Get<ILoggingService>();

        }

        private void BindRepositories()
        {
            // Get config service
            var configService = Kernel.Get<IConfigService>();

            // Bind repositories
            Bind<IUserRepository>().To<UserRepository>()
                .WithConstructorArgument("connectionString",    configService.ZeroBaseConnection);
            Bind<ICommentRepository>().To<CommentRepository>()
                .WithConstructorArgument("connectionString",    configService.ZeroBaseConnection);
        }
    }
} 
```

RepositoryBase.cs

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;
using ZeroBase.Domain.Interfaces;

namespace ZeroBase.Infrastructure.Data
{
    public class RepositoryBase<T> : IRepositoryBase<T>
    {
        protected SessionHelper _nhibernate;
        protected string _connectionString;

        public RepositoryBase(string connectionString)
        {
            _connectionString = connectionString;
            _nhibernate = new SessionHelper(_connectionString);
        }

        //....
    }
} 
```

SessionHelper.cs 构建 NHibernate 会话并进行配置。请注意，正在注入 connectionString。我可以在这里轻松地注入日志服务。

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;
using NHibernate;
using FluentNHibernate.Cfg;
using FluentNHibernate.Cfg.Db;
using ZeroBase.Infrastructure.Data;
using FluentNHibernate.Automapping;
using ZeroBase.Domain.Entities;
using ZeroBase.Infrastructure.Interfaces;

namespace ZeroBase.Infrastructure.Data
{
    public class SessionHelper
    {
        private ISessionFactory _sessionFactory;
        private string _connectionString;

        public SessionHelper(string connectionString)
        {
            _connectionString = connectionString;
        }

        private ISessionFactory SessionFactory
        {
            get
            {
                if (_sessionFactory == null)
                    InitializeSessionFactory();

                return _sessionFactory;
            }
        }

        private void InitializeSessionFactory()
        {
            _sessionFactory = Fluently.Configure()

                // Set up database connection
                .Database(MsSqlConfiguration.MsSql2005
                    .ConnectionString(x => x.Is(_connectionString))
                    //.ShowSql()
                )

                // Use class mappings
                .Mappings(m => m.FluentMappings
                    .AddFromAssemblyOf<UserMap>()
                    .AddFromAssemblyOf<ZeroBase.Infrastructure.Data.RACS3.UserMap>())

                .ExposeConfiguration(c => {
                        c.SetInterceptor(new AuditInterceptor());
                    }
                )

                .BuildSessionFactory();
        }

        public ISession OpenSession()
        {
            return SessionFactory.OpenSession();
        }
    }
} 
```

LoggerFactory.cs 通过 app.config 为 NHibernate 配置以用于其日志记录。这是我遇到依赖问题的地方。这与 NHibernate 并存。我可以在这里轻松地引用 NLog 并将其与 NHibernate 连接起来，但我不希望 NHibernate 关心我使用的日志记录框架。这就是为什么我只想处理我的接口并让 Ninject 注入我的具体实现。

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;
using NHibernate;
using ZeroBase.Infrastructure.Interfaces;

namespace ZeroBase.Infrastructure.Data
{
    public class LoggerFactory : ILoggerFactory
    {
        public IInternalLogger LoggerFor(Type type)
        {
            //ILoggingService logService;

            // Get resolved LoggingService

            //return new NLogLogger(LogManager.GetLogger(type.FullName));
            //return new Logger(logService.GetLogger(type.FullName));
            return null;
        }

        public IInternalLogger LoggerFor(string keyName)
        {
            //ILoggingService logService;

            // Get resolved LoggingService

            //return new NLogLogger(LogManager.GetLogger(keyName));
            //return new Logger(logService.GetLogger(keyName));
            return null;
        }
    }

    public class Logger : IInternalLogger
    {
        private readonly ILoggingService logger;

        public Logger(ILoggingService _logger)
        {
            logger = _logger;
        }

        //....
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-19T12:00:43.337

通过 Common.Logging 使用 NLog 和 NHibernate：

[http://nhibernate.info/doc/howto/various/using-nlog-via-common-logging-with-nhibernate.html](http://nhibernate.info/doc/howto/various/using-nlog-via-common-logging-with-nhibernate.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-20T19:01:19.147

为什么不能在初始化内核后立即将静态内核属性添加到 LoggerFactory 类并在 Program.Main 中设置它？

然后在您的 LoggerFor 实现中，您只需参考您的静态内核属性即可获得正确绑定的实现。

# drupal - 如何以编程方式将自定义 drupal 表中的字段拉入由 id 连接的 drupal 7 视图？

> ID：11090858
> 
> 赞同：1
> 
> 时间：2012-06-18T20:54:23.127
> 
> 标签：drupal, drupal-7

关于 drupal 7 - views 3.0 API，我已经配置了一个视图（来自 UI）以从自定义内容类型和它显示 id 的字段之一中提取数据。我想创建一个连接（我希望以编程方式）到我的自定义表，并显示映射到视图中 id 的文本。我遇到的问题是如何找出将其加入哪个表和字段？在我的内容类型中，我创建了 field_game 字段。我的自定义表有 gameid 作为主键。

也许是这样的？

```
$data['MYCUSTOMTABLE']['table']['join'] = array(
// Index this array by the table name to which this table refers.
// 'left_field' is the primary key in the referenced table.
// 'field' is the foreign key in this table.
'node' => array(
  'left_table' => '??????'
  'left_field' => 'field_game', 
  'field' => 'gameid',
),
); 
```

我搜索了高低，但没有什么能真正接近。任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-28T14:21:02.333

我在寻找类似问题时发现了这篇文章。但我已经破解了你的问题。

我把它放在 hook_views_query_alter($view, $query) 中：

```
if ($view->name == "kompasses") {

$ga_join = new views_join();
$ga_join->table = 'field_data_group_audience';
$ga_join->field = 'entity_id';
$ga_join->left_table = 'node';
$ga_join->left_field = 'nid';
$ga_join->type = 'inner';

$query->add_relationship('audience_node', $ga_join, 'node', null);
} 
```

这里要加入的表是：field_data_group_audience 和基表（来自名为“kompasses”的现有视图）。Audience_node 将是连接的表别名。

有关更多信息，请参阅：[http ://api.drupal.org/api/views/plugins%21views_plugin_query_default.inc/class/views_plugin_query_default/7](http://api.drupal.org/api/views/plugins%21views_plugin_query_default.inc/class/views_plugin_query_default/7)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-19T14:42:50.750

您已经接近了，但请检查一下：Views 在模块代码中提供了有关如何执行此操作的文档。查看views/docs/views.api.php 并阅读！

[http://drupalcontrib.org/api/drupal/contributions%21views%21views.api.php/7](http://drupalcontrib.org/api/drupal/contributions%21views%21views.api.php/7)是那里的源代码，充满了有用的评论（在底部查看源代码）。

基本上你需要实现 hook_views_data_alter 来告诉 Views 你的表。这将允许您加入。要显示连接字段，您需要在传递给 hook_views_data_alter 的数组中设置正确的处理程序。查看views.api.php中的第343行

```
<?php
// This table references the {node} table. The declaration below creates an
// 'implicit' relationship to the node table, so that when 'node' is the base
// table, the fields are automatically available.
$data['example_table']['table']['join'] = array(
  // Index this array by the table name to which this table refers.
  // 'left_field' is the primary key in the referenced table.
  // 'field' is the foreign key in this table.
  'node' => array(
    'left_field' => 'nid',
    'field' => 'nid',
  ),
);

// Next, describe each of the individual fields in this table to Views. This
// is done by describing $data['example_table']['FIELD_NAME']. This part of
// the array may then have further entries:
//   - title: The label for the table field, as presented in Views.
//   - help: The description text for the table field.
//   - relation: A description of any relation handler for the table field.
//   - field: A description of any field handler for the table field.
//   - sort: A description of any sort handler for the table field.
//   - filter: A description of any filter handler for the table field.
//   - argument: A description of any argument handler for the table field.
//   - area: A description of any handler for adding content to header,
//     footer or as no result behaviour.
//
// The handler descriptions are described with examples below.

// Node ID table field.
$data['example_table']['nid'] = array(
  'title' => t('Example content'),
  'help' => t('Some example content that references a node.'),
  // The nid is a foreign key to the {node} table. This allows us to (easily)
  // add a relationship handler for this table field, making all the table
  // fields for the related node available.
  'relationship' => array(
    'base' => 'node', // The name of the table to join with
    'field' => 'nid', // The name of the field to join with
    'handler' => 'views_handler_relationship',
    'label' => t('Example node'),
  ),
); 
```

# php - 除无效形式外未捕获

> ID：11090861
> 
> 赞同：0
> 
> 时间：2012-06-18T20:54:34.550
> 
> 标签：php, jquery, codeigniter

我试图弄清楚为什么我在控制台中收到此错误：未捕获的异常：无效的表格

当我加载页面时。

我相信导致它的原因是这个。我认为这是因为我一点一点地删除了，当我到达这部分时，它删除了我控制台中的错误。

```
<?php echo form_label('Booking Date', 'booking_date'); ?>
<?php 
$attributes = array(
'id' => 'datetime',
'name' => 'booking_date',
'class' => 'required hasDatepicker valid',
'type' => 'datetime',
'data-date-relative' => 'now' 
);
?>
<?php echo form_input($attributes); ?> 
```

所有代码

```
<h2 class="grid_12">Book Event</h2>
<div class="clear"></div>
<div class="grid_12">
<div class="box wizard" data-step="1">
    <div class="header">
        <?php echo img('assets/peach/img/icons/packs/fugue/16x16/shadeless/application--arrow.png'); ?>
        <?php echo heading('Book Event', 3); ?>
        <span></span>
    </div>
    <div class="content with-actions">
        <div class="steps">
            <ul>
                <li class="current">
                    <a href="#step_1">
                        <span>1</span>
                        <div>
                            <strong>Book Event</strong>
                            <small></small>
                        </div>
                    </a>
                </li>
                <li>
                    <a href="#step_2">
                        <span>2</span>
                        <div>
                            <strong>Schedule Matches</strong>
                            <small></small>
                        </div>
                    </a>
                </li>
                <li>
                    <a href="#step_3">
                        <span>3</span>
                        <div>
                            <strong>Verify Event</strong>
                            <small></small>
                        </div>
                    </a>
                </li>
            </ul>
        </div>
        <div class="wiz_page step_1">
            <div class="wiz_sidebar grid_3">
                <span>1</span>
                <div>
                   <strong>Book Event</strong>
                   <small></small>
                </div>
                <p></p>
            </div>
            <div class="wiz_content grid_9">
                <h3>Event Setup</h3>
                <?php echo form_open('newevent'); ?>
                    <?php echo form_label('Event Name', 'event_name'); ?>
                    <?php 
                    $options = array();
                    $options['default'] = 'Please Select An Option';
                    foreach ( $event_names AS $name ) 
                    {
                        $options[$name->id] = $name->event_name;
                    }
                    ?>
                    <?php echo form_dropdown('eventname', $options, 'default'); ?>
                    <?php echo form_label('Event Label', 'event_label'); ?>
                    <?php echo form_input('event_label', ''); ?>
                    <?php echo form_label('Booking Date', 'booking_date'); ?>
                    <?php 
                    $attributes = array(
                        'id' => 'datetime',
                        'name' => 'booking_date',
                        'class' => 'required hasDatepicker valid',
                        'type' => 'datetime',
                        'data-date-relative' => 'now'
                    );
                    ?>
                    <?php print_r($attributes); ?>
                    <?php echo form_input($attributes); ?>
                    <?php echo form_label('Arena', 'arenas'); ?>
                    <?php 
                    $options = array();
                    $options['default'] = 'Please Select An Option';
                    foreach ( $arenas AS $arena )
                    {
                        $options[$arena->id] = $arena->arena_name;
                    }
                    ?>
                    <?php echo form_dropdown('arenas', $options, 'default'); ?>
                    <?php echo form_label('Introduction', 'introduction'); ?>
                    <?php echo form_textarea('introduction', ''); ?>
                <?php echo form_close(); ?>
            </div>
        </div>
    </div>
    <div class="actions">
        <div class="actions-left">
            <button class="prev">&laquo; Back</button>
        </div>
        <div class="actions-right">
            <button class="next">Forward &raquo;</button>
        </div>
    </div> <!-- End of .content -->
    <div class="clear"></div>
</div>
</div> 
```

链接到实时页面：[链接](http://www.kansasoutlawwrestling.com/kowmanager/events/bookevent)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-18T21:11:26.540

这是一个 JavaScript 错误，它源自以下代码段：

```
$.each(ids, function () {
    if (this.indexOf('dp') == 0 || $('label[for=' + this + ']').length) {
        id = this;
    }
});

if (!id) {
    throw "Invalid form";
} 
```

如您所见，如果`id`计算结果为假，您将抛出“无效表单”异常。

# certificate - 如何签署 MSI？

> ID：11090865
> 
> 赞同：7
> 
> 时间：2012-06-18T20:54:53.773
> 
> 标签：certificate, code-signing, signtool

我的公司希望防止客户安装我们的产品时出现 UAC 弹出窗口。我们从 VeriSign（VeriSign Class 3 Code Signing 2010 CA）购买了一个证书，我得到了一个 MyCompany.cer 文件。

我通过双击它并选择“个人”商店来安装证书。它现在与其他几个证书一起出现在证书管理单元中。该管理单元表示其预期目的是“代码签名”。我通过复制指纹获得了 SHA1 哈希。

我尝试使用以下命令对 msi 进行签名：

```
signtool sign /sha1 <thumbprint> myInstaller.msi 
```

并收到一条消息“SignTool 错误：未找到符合所有给定条件的证书”。

如果我不使用“/sha1”，我会得到商店中大多数其他证书的列表——那些说它们的预期目的是“<All>”的证书没有列出。

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2014-03-18T22:25:30.163

这已经很老了，但我希望它可以帮助某人。

首先，您需要检查您是否拥有该 .cer 文件的私钥，如果您打开它，您应该会在某处看到一个 Key 图标，后跟以下句子：

```
You have a private key for this certificate 
```

请注意，您必须在生成密钥对（和 CSR）的同一台计算机上安装证书。显然，如果你没有私钥，你就不能签署任何东西。

# sql-server-2005 - 如何使用 XML FOR PATH 将命名空间添加到 SQL Server 2005 中的根节点

> ID：11090866
> 
> 赞同：1
> 
> 时间：2012-06-18T20:55:11.010
> 
> 标签：sql-server-2005, xml-namespaces, for-xml-path

我已经使用 SQL Server 2005 创建了 Select...FOR XML PATH 语句，并且需要向根节点添加多个命名空间和架构引用。

```
xsi:schemaLocation="http://somewhere/v1/ schemaname.xsd"
xmlns="http://somewhere/v1/"
xmlns:lom="http://somewhere/lom/v1/"
xmlns:a="http://somewhere/a/v1/"
xmlns:cf="http://somewhere/cf/v1/"
xmlns:co="http://somewhere/co/v1/"
xmlns:hx="http://somewhere/hx/v1/" 
xmlns:m="http://somewhere/m/v1/" 
xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" 
```

任何指针将不胜感激。

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-18T22:11:29.573

你可以尝试这样的事情：

```
with xmlnamespaces
  (
   default 'http://somewhere/v1/',
  'http://somewhere/lom/v1/' as lom,
  'http://somewhere/a/v1/' as a,
  'http://somewhere/cf/v1/' as cf,
  'http://somewhere/co/v1/' as co,
  'http://somewhere/hx/v1/' as hx,
  'http://somewhere/m/v1/' as m,
  'http://www.w3.org/2001/XMLSchema-instance' as xsi
  )
select 'http://somewhere/v1/ schemaname.xsd' as "@xsi:schemaLocation"

for xml path('element') 
```

结果：

```
<element xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" 
         xmlns:m="http://somewhere/m/v1/" 
         xmlns:hx="http://somewhere/hx/v1/" 
         xmlns:co="http://somewhere/co/v1/" 
         xmlns:cf="http://somewhere/cf/v1/" 
         xmlns:a="http://somewhere/a/v1/" 
         xmlns:lom="http://somewhere/lom/v1/" 
         xmlns="http://somewhere/v1/" 
         xsi:schemaLocation="http://somewhere/v1/ schemaname.xsd" /> 
```

# android - Android：C2DM 是否为每个 Registration_id 请求一个帖子？(1:1)

> ID：11090868
> 
> 赞同：0
> 
> 时间：2012-06-18T20:55:16.163
> 
> 标签：android, android-c2dm

[从https://www.google.com/accounts/ClientLogin](https://www.google.com/accounts/ClientLogin)获得`Auth`令牌后，我是否需要每次发送 1 条消息，还是可以一次向多个 (1:N)registration_ids 发送消息？`registration_id`

如果我必须通过每个 registration_id (1:1) 的 1 个帖子，我需要多久刷新一次我的 Auth 令牌才能使其失效

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-18T21:06:36.867

每个registration_id 必须是1 条消息。目前（2012 年 6 月），C2DM 不支持批量发送通知。

身份验证令牌应该可以使用很长时间，根据我的经验，它可以使用数天，甚至数周。当然，您可以检查 401 代码的发送响应，然后重新进行身份验证。

2012 年 6 月 27 日更新：Google 今天宣布弃用 C2DM 并用 GCM 取而代之。看起来 GCM 允许在一个 HTTP 调用中向多个设备发送通知。见这里：http: [//developer.android.com/guide/google/gcm/gcm.html#send-msg](http://developer.android.com/guide/google/gcm/gcm.html#send-msg)

# sum - SUM 不计算所有金额的总和

> ID：11090871
> 
> 赞同：0
> 
> 时间：2012-06-18T20:55:36.627
> 
> 标签：sum, abap

我试图总结一些价值观，但它一直给我奇怪的价值观。我正在发布代码以提供帮助，以及正在发生的事情的图像。

```
at end of kunnr.    

 soma-waers = <fs_main-waers.
 soma-wrbtr = <fs_main-wrbtr.
 soma-fwste = <fs_main-fwste.
 soma-hwaer = <fs_main-hwaer.
 soma-dmbtr = <fs_main-dmbtr.
 soma-hwste = <fs_main-hwste.
 APPEND soma TO it_soma.  

LOOP AT it_soma INTO soma.
   IF sy-tabix = 1.

     FORMAT COLOR COL_TOTAL INTENSIFIED OFF.
     SUM.
     WRITE: "/ sy-uline(137),
           / sy-vline NO-GAP,
             'Subtotal' NO-GAP,
            '-' NO-GAP,
            soma-waers,
            63 sy-vline NO-GAP,
            64 soma-wrbtr NO-GAP,
            sy-vline NO-GAP,
            soma-fwste NO-GAP,
            sy-vline NO-GAP,
            soma-hwaer NO-GAP,
            sy-vline NO-GAP,
            soma-dmbtr NO-GAP,
            sy-vline NO-GAP,
            soma-hwste NO-GAP,
            sy-vline NO-GAP,
           / sy-uline(137).

   ELSE.
   ENDIF.

 ENDLOOP.

 ENDAT. 
```

![在此处输入图像描述](../Images/708776816c4b9c784727d40ba937a255.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-18T21:14:14.493

I think you made a wrong code sequence.

Inside a `LOOP` you can use `AT-ENDAT`. Do not use a `LOOP` inside the `AT-ENDAT` like in your code.

Your code should more look like this:

```
LOOP AT it_soma INTO soma.
  AT END OF kunnr.    
     FORMAT COLOR COL_TOTAL INTENSIFIED OFF.
     SUM.
     WRITE: "/ sy-uline(137),
           / sy-vline NO-GAP,
             'Subtotal' NO-GAP,
            '-' NO-GAP,
            soma-waers,
            63 sy-vline NO-GAP,
            64 soma-wrbtr NO-GAP,
            sy-vline NO-GAP,
            soma-fwste NO-GAP,
            sy-vline NO-GAP,
            soma-hwaer NO-GAP,
            sy-vline NO-GAP,
            soma-dmbtr NO-GAP,
            sy-vline NO-GAP,
            soma-hwste NO-GAP,
            sy-vline NO-GAP,
           / sy-uline(137).
  ENDAT.
ENDLOOP. 
```

Other sources of Problems:

*   Your table must be sorted

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-06-19T10:03:53.680

最后我需要清除内部表。它现在工作正常。谢谢你。

# c++ - 对包含特殊字符的二维数组进行排序 C++

> ID：11090872
> 
> 赞同：0
> 
> 时间：2012-06-18T20:55:46.647
> 
> 标签：c++, arrays, special-characters

我想对这个数组进行排序，但是如果我没有在数组中放入任何带有特殊字符的字符串，那么这段代码就可以工作。如果我有类似的东西

> !\"#$%&'()*+,-./0123456789:;<=>?@

它不会工作。它在 Visual Studio 中崩溃。

这是代码：

```
#include <iostream>
#include <cstring>

using namespace std;

int main (){

    char data[10][40] = {     
      "",
      "Welcome",
      " !\"#$%&'()*+,-./0123456789:;<=>?@",
      "aBCDEFGHIJKLMNOPQRSTUVWXYZ[\\]^_`",
      "abcdefghijklmnopqrstuvwxyZ{||||||||||}",
      "CD_ROM",
      "ROM",
      "SCS",
      "3.5 Floppi",
      ""
    };

    cout<<"Printing the array as is"<<endl<<endl;

    for (int i=0; i<10; i++){
            cout<<data[i]<<endl;
    }

    cout<<endl<<"Ordering the data in Alphabetical order"<<endl<<endl;

    // bubble sort

    for (int i=0 ; i<10-1 ; ++i) {
            char Tcopy[17];
            for (int j=i+1 ; j<10 ; ++j) {
                    if (strcmp(data[i], data[j]) > 0) {
                            strcpy(Tcopy, data[i]);
                            strcpy(data[i], data[j]);
                            strcpy(data[j], Tcopy);
                    }
            }
    }

    cout<<"Printing the array Sorted"<<endl<<endl;

    for (int i=0; i<10; i++){
            cout<<data[i]<<endl;
    }

// Pause
    cout<<endl<<endl<<endl<<"Please Close Console Window"<<endl;
    cin.ignore('\n', 1024);
    return(0);
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-18T20:57:37.597

```
char data[10][40]
…
char Tcopy[17];
…
strcpy(Tcopy, data[i]); 
```

有你的问题。你的`Tcopy`数组太短了。您正在（可能）将 40 个字符复制到 17 个字符的数组中。您正在覆盖缓冲区的末尾，导致谁知道什么损坏。

尝试：

```
char Tcopy[40]; 
```

# powershell - Powershell get-item VersionInfo.ProductVersion 不正确/不同于 WMI

> ID：11090875
> 
> 赞同：6
> 
> 时间：2012-06-18T20:55:51.117
> 
> 标签：powershell, wmi-query, wmic, versioninfo

我试图理解为什么 Powershell 会为 DLL 文件返回与 Windows 资源管理器中的文件属性页面和 WMI 查询显示的不同的版本号。（如果这不能正确地作为编码问题，我提前道歉。）

场景：

运行以下 powershell 命令：

```
(get-item C:\windows\system32\rdpcorekmts.dll).VersionInfo.ProductVersion 
```

这将返回以下内容：

> 6.1.7600.16385

但是，此版本号不正确。从 Windows 资源管理器检查版本信息时，您会看到以下版本（抱歉，我尝试发布它的小屏幕截图，但我没有足够的代表；我是新来的）：

> 6.1.7601.17767

此外，WMIC 查询显示与 Windows 资源管理器相同的结果：

```
WMIC path CIM_DataFile WHERE (name="c:\\windows\\system32\\rdpcorekmts.dll") get Version 
```

WMIC 结果：

> 版本
> 
> 6.1.7601.17767

我真的不明白为什么他们会有所不同。我真的很想使用 Powershell 返回这个值，但现在我不确定我是否只是忽略了某些东西，或者我是否遇到了某种奇怪的错误，但是这两种方法之间的版本不匹配令人困惑。需要注意的是，我已经在 Powershell 中运行了一些变体以将其取回（例如 Get-ItemChild 和 Get-ItemProperty），但我得到了相同的错误版本结果。

关于为什么的任何想法？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-06-19T03:23:02.103

问题是您正在使用`ProductVersion`似乎在某处硬编码的属性，IE 和 WMI 只是从以下位置构建产品版本：

```
ProductMajorPart   : 6
ProductMinorPart   : 1
ProductBuildPart   : 7601
ProductPrivatePart : 17767 
```

同样适用`FileVersion`于：FileMajorPart、FileMinorPart、FileBuildPart、FilePrivatePart

试试看嘛 ：

```
(get-item C:\windows\system32\rdpcorekmts.dll).VersionInfo | fl * 
```

您可以测试：

```
(get-item C:\windows\system32\rdpcorekmts.dll).VersionInfo | % {("{0}.{1}.{2}.{3}" -f $_.ProductMajorPart,$_.ProductMinorPart,$_.ProductBuildPart,$_.ProductPrivatePart)} 
```

从 CMD.EXE 你可以尝试：

```
C:\>powershell -command "&{(get-item C:\windows\system32\rdpcorekmts.dll).VersionInfo | % {write-host ('{0}.{1}.{2}.{3}' -f $_.ProductMajorPart,$_.ProductMinorPart,$_.ProductBuildPart,$_.ProductPrivatePart)}}" 
```

# javascript - MeteorJS 身份验证何时到位？

> ID：11090877
> 
> 赞同：3
> 
> 时间：2012-06-18T20:55:52.463
> 
> 标签：javascript, node.js, meteor

有人问 MeteorJS 什么时候会进行身份验证......我想每个人都渴望听到这样一个很棒的平台的回复。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-18T20:55:53.053

根据分支作者的说法，他们今天刚刚完成了第一块并准备好输入/测试：

## [https://github.com/meteor/meteor/wiki/Getting-started-with-Auth](https://github.com/meteor/meteor/wiki/Getting-started-with-Auth)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-06T21:06:10.190

如果你想开始使用已有的东西，你可以使用[Meteorite](http://oortcloud.github.com/meteorite/)`auth`并使用Meteor 的分支创建一个项目：

```
mrt create newappname --branch auth 
```

然后，您可以通过阅读 Meteor Wiki 来了解如何添加各种身份验证方案并呈现预生成的模板以允许用户登录：[https ://github.com/meteor/meteor/wiki/Getting-started-with-认证](https://github.com/meteor/meteor/wiki/Getting-started-with-Auth)

例如，您获得一个模板，该模板通过将类似`{{> loginButtons}}`内容放入您的一个模板中来为整个登录按钮提供表单。

请记住，实现可能仍会发生变化，您需要在稍后阶段合并后将您的应用切换回以`master`保持`auth`最新状态。有一些应用程序正在使用`auth`，它们运行良好。例如，请参阅[大气](https://atmosphere.meteor.com)。

# windows - 用于替换文件数组中的文本的 Powershell 脚本。覆盖整个文件。我究竟做错了什么？

> ID：11090880
> 
> 赞同：0
> 
> 时间：2012-06-18T20:56:06.910
> 
> 标签：windows, powershell, text, replace

我正在尝试使用此脚本替换几个文件中的文本。尽管当我在我的 PC 上的目录上测试它时，它会不断替换整个文件的内容。我错过了什么？我对此很陌生...

```
$CTPath = "C:\path1"
$ECTPath = "C:\path2"
$FileExistCT = Test-Path $CTPath
$FileExistECT = Test-Path $ECTPath

If ($FileExistCT -eq $True)
{
    $filenames = @("Filepath1.vxm", "Filepath2.vxm", "Filepath3.vxm")
    foreach ($file in $filenames){
    $outputfile="$file" + ".out"

    Get-Content $file | Foreach-object
{
    $_ -replace "DISTS2D = 636.5", "DISTS2D = 642.9" `
} | Set-Content $outputfile
}
}
ElseIf ($FileExistECT -eq $True)
{
    $filenames = @("Filepath1.vxm", "Filepath2.vxm", "Filepath3.vxm", "Filepath4.vxm", "Filepath5.vxm", "Filepath6.vxm", "FilePath7.vxm")
    foreach ($file in $filenames){
    $outputfile="$file" + ".out"

Get-Content $file | Foreach
{
     $_ -replace "DISTS2D = 636.5", "DISTS2D = 642.9" `
} | Set-Content $outputfile
}
}
Else {Write-Host "VXM Files Not Found. Verify file path and try again."} 
```

我可能也会以一种非常迂回的方式来解决这个问题。但我需要让它工作。VXM 文件与任何旧文本文件一样被读取。当我使用这个脚本时，它会覆盖整个文件：

$_ -替换“DISTS2D = 636.5”、“DISTS2D = 642.9”`

但是当我使用基本替换功能对其进行测试时，它可以正常工作。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-18T23:21:51.537

而不是这种结构：

```
Get-Content $file | Foreach-object {
    $_ -replace "DISTS2D = 636.5", "DISTS2D = 642.9" `
} | Set-Content $outputfile 
```

我建议这样做：

```
$search = [regex]::Escape("DISTS2D = 636.5")    
(Get-Content $file) -replace $search, "DISTS2D = 642.9" | Set-Content $outputfile 
```

转义的正则表达式并不是特别需要，因为您只有一个特殊字符（点），但它可以确保没有误报匹配。

~~在您的原始代码中，您正在正则表达式更新输入文件的每一行并将其发送到 Set-Content。由于默认情况下 Set-Content 不附加，因此它应该只包含输入文件的最后一行。您可以将其替换为，`Out-File -Append`但如果您只是`-replace`对整个输入文件内容使用运算符，那么坚持使用`Set-Content`.~~

我不确定为什么您的输出文件中只有一行文本。我的猜测是因为您获得了 Set-Content 仅将最后一项放入管道中的单行文本，但我不确定您为什么将代码行作为文件的内容而不是更新的文本。在@msorens 在评论中质疑我的结论之后，我用一些 VMX 文件尝试了你的代码，它实际上对我有用，所以我不确定你为什么会遇到问题。

我对此稍作修改。

```
foreach ($file in $files){
    $outputfile = $file.FullName + ".out"
    Get-Content $file | Foreach-object {
        $_ -replace 'virtualHW.version = "7"', 'virtualHW.version = "andy"' `
    } | Set-Content $outputfile
} 
```

# php - 将 HTML 页面输出为 pdf

> ID：11090883
> 
> 赞同：0
> 
> 时间：2012-06-18T20:56:16.420
> 
> 标签：php, parsing, pdf

我有这个问题，只是理论上。

我做了一些查询结果并显示了一个 html 页面，我可以在那里插入一个下载链接，让我下载 html 文件但作为 pdf 文件吗？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-18T20:59:58.993

经过大量搜索，我发现了这个工具：[http](http://code.google.com/p/wkhtmltopdf/) ://code.google.com/p/wkhtmltopdf/ 它必须作为外部二进制文件运行，所以你可能需要一个专用服务器/VPS（不适用于共享主机)，但似乎是最好的。

它基于 WebKit 引擎（Safari 和 Chrome 也使用相同的引擎，以及它们的移动版本），因此它可能是最准确的 PDF 生成器（免费！）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-18T20:58:10.757

你可以。您只需要编写代码即可。也许一些搜索会帮助你找到[这个](https://stackoverflow.com/questions/564650/convert-html-to-pdf-in-net)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-18T20:58:58.253

这可能是最好的一个。html2PDF。它为您提供了很多功能。

[http://html2pdf.fr/en/default](http://html2pdf.fr/en/default)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-20T08:48:05.020

Zend 框架有一个名为 Zend_Pdf 的模块。示例在这里： http: [//framework.zend.com/manual/1.12/en/zend.pdf.usage.html](http://framework.zend.com/manual/1.12/en/zend.pdf.usage.html)

# css - 带有可见阴影的表格行

> ID：11090884
> 
> 赞同：1
> 
> 时间：2012-06-18T20:56:23.600
> 
> 标签：css

我正在寻找一种方法来实现这一目标：

设置一个表格，其中的行之间有空格，以显示它们的 box-shadow

我设法用 display:block 设置它。我怎么不知道如何用百分比扩展包含的 td 元素以便能够使用响应式设计

这是小提琴和应该向您展示我的意思的代码。 [http://jsfiddle.net/dN5DM/247/](http://jsfiddle.net/dN5DM/247/)

```
<table>
    <tr>
        <td>Item 1</td>
        <td>Item 2</td>
        <td>Item 3</td>
    </tr>
    <tr>
        <td>label A </td>
        <td>longLabel B</td>
        <td>short</td>
    </tr>
</table>

table{
    width : 100%;
    border: 0px;
    margin: 5px;  /* how? margin on both sides visible */
}
tr {
    display: block; 
    margin-bottom: 5px;
     -webkit-box-shadow: 0 5px 5px -2px rgba(0, 0, 0, 0.75);
    -moz-box-shadow: 0 5px 5px rgba(0,0,0,0.75);
    box-shadow: 0 5px 5px -2px rgba(0, 0, 0, 0.75);
}
td {
    height: 80px;
    border: 1px solid red;
    width: 33%;  /* how? expanding the tds to fill the whole row? */
} 
```

​</p>

感谢您的任何建议！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-25T11:06:22.117

好的，所以让它工作了，但没有你想要的那么接近（比如 95% ..:)）。这是我能得到的最接近的。

因为，您在表格行上使用了 display:block，它不再表现为表格行而是作为块元素，这就是为什么您的单元格没有占用 33%（原因，我不知道，也许有人知道）。但是，如果您需要将样式（阴影）应用于您需要执行此操作的行。

我试图将表格单元格更改为显示：块。表格单元格确实占据了整个空间，但现在表格行没有显示阴影（为什么？？？，我想是因为它们现在表现得像表格行，又回来了。）。所以，最后什么都不想了，我对表格单元格应用了阴影并删除了所有显示：块）。尤里卡，阴影确实显示了，唯一的事情是阴影现在在单元格而不是行上，并且在视觉上它可能不是你想要的 100% 的结果。无论如何，这是工作[小提琴](http://jsfiddle.net/dN5DM/267/)。

# iphone - timeIntervalSinceNow 错误用于暂停和恢复计时器

> ID：11090885
> 
> 赞同：0
> 
> 时间：2012-06-18T20:56:28.340
> 
> 标签：iphone

在我的代码中使用暂停计时器和恢复计时器来暂停和恢复计时器。出现错误 `'NSInvalidArgumentException', reason: '-[__NSCFNumber timeIntervalSinceNow]: unrecognized selector sent to instance 0x164590'`

暂停定时器和恢复定时器的代码

```
-(void)pauseTimer{
pauseStart = [[NSDate dateWithTimeIntervalSinceNow:0] retain];
previousFireDate = [[timer fireDate] retain];
[timer setFireDate:[NSDate distantFuture]];
}
-(void)resumeTimer{
float pauseTime = -1*[pauseStart timeIntervalSinceNow];
[timer setFireDate:[previousFireDate initWithTimeInterval:pauseTime sinceDate:previousFireDate]];
[pauseStart release];
[previousFireDate release];
} 
```

在播放暂停切换按钮中使用暂停和恢复计时器

```
-(void)playpauseAction:(id)sender {
if([audioPlayer isPlaying])
{
    [sender setImage:[UIImage imageNamed:@"Play Icon.png"] forState:UIControlStateSelected];
    [audioPlayer pause];
    [self pauseTimer];
}
else
{
    [sender setImage:[UIImage imageNamed:@"pause.png"] forState:UIControlStateNormal];
    [audioPlayer play];
    [self resumeTimer];
    if(isFirstTime == YES)
    {
        self.timer = [NSTimer scheduledTimerWithTimeInterval:11.0
                                            target:self
                                            selector:@selector(displayviewsAction:)
                                            userInfo:nil
                                            repeats:NO];
        isFirstTime  = NO;
    }    
} 
} 
```

知道应用程序为何终止以及如何解决此问题。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-18T23:04:33.390

当`resumeTimer`被调用两次`pauseStart`并被`previousFireDate`过度释放并且应用程序可能崩溃！

# android - Android NDK 工具链异常处理 seg faults

> ID：11090889
> 
> 赞同：2
> 
> 时间：2012-06-18T20:56:39.350
> 
> 标签：android, c++, exception, android-ndk, cross-compiling

我编写了一个简单的 C++ 测试程序来测试异常

```
#include <iostream>
#include <string>

inline bool isNumber(char c);

inline unsigned stringToNum(const char *str) {
    unsigned x = 0;
    const char *p = str;
    while(1) {
        if( !isNumber(*p) ) {  
            if( *p == 0 && p != str )
                break;
            throw 0;
        }
        x = x * 10 + *p++ - '0';
    }
    return x;
}

inline bool isNumber( char c ) {
    return c >= '0' && c <= '9';
}

int main() {
    std::string k = std::string("test");
    try {
        int p = stringToNum(k.c_str());
    } catch(...) {
        std::cout << "EXCEPTION THROWN";
    }
} 
```

我分两个阶段编译程序（我试图模拟一个更大的库发生的错误）。第一步看起来像

```
/Users/me/android-ndk-r8/toolchains/x86-4.4.3/prebuilt/darwin-x86/bin/i686-android-linux-g++ -c -fexceptions -frtti -Wnon-virtual-dtor -Woverloaded-virtual --sysroot "/Users/me/android-ndk-r8/platforms/android-14/arch-x86/"  -fPIC -fno-strict-aliasing -ggdb -pthread -Wall -Wsign-compare -Wno-unknown-pragmas -Winvalid-pch -O3 -Wl,-rpath-link=/Users/me/android-ndk-r8/platforms/android-14/arch-x86/usr/lib/ -L/Users/me/android-ndk-r8/platforms/android-14/arch-x86/usr/lib/ -nostdlib /Users/me/android-ndk-r8/platforms/android-14/arch-x86/usr/lib/crtbegin_dynamic.o -lc -lm -I/Users/me/android-ndk-r8/sources/cxx-stl/gnu-libstdc++/include -I/Users/me/android-ndk-r8/sources/cxx-stl/gnu-libstdc++/libs/x86/include exceptiontest.cpp 
```

接着：

```
/Users/me/android-ndk-r8/toolchains/x86-4.4.3/prebuilt/darwin-x86/bin/i686-android-linux-g++ -fexceptions -fPIC -pthread -rdynamic --sysroot "/Users/me/android-ndk-r8/platforms/android-14/arch-x86/" -fPIC -fno-strict-aliasing -ggdb -pthread -Wall -Wsign-compare -Wno-unknown-pragmas -Winvalid-pch -O3 -Wl,-rpath-link=/Users/me/android-ndk-r8/platforms/android-14/arch-x86/usr/lib/ -L/Users/me/android-ndk-r8/platforms/android-14/arch-x86/usr/lib/ -nostdlib /Users/me/android-ndk-r8/platforms/android-14/arch-x86/usr/lib/crtbegin_dynamic.o -lc -lm exceptiontest.o -L/Users/me/android-ndk-r8/toolchains/x86-4.4.3/prebuilt/darwin-x86/lib/gcc/i686-android-linux/4.4.3 -L/Users/me/android-ndk-r8/sources/cxx-stl/gnu-libstdc++/libs/x86 -lgnustl_shared -lgcc 
```

当我在设备上运行 a.out 时（将 libgnustl_shared.so 复制到 libs 目录），我得到一个段错误。我错过了什么？编译器标志？图书馆？等等

编辑：继承gdb的segfault的堆栈跟踪

```
#0  get_cie_encoding (cie=0x6107daff) at /Users/andrewhsieh/ndk-andrewhsieh/src.1-with-cherrypicks//build/../gcc/gcc-4.4.3/libgcc/../gcc/unwind-dw2-fde.c:267
#1  0x080b16d8 in classify_object_over_fdes (ob=0x80d8b68, this_fde=0x80d0a1c) at /Users/andrewhsieh/ndk-andrewhsieh/src.1-with-cherrypicks//build/../gcc/gcc-4.4.3/libgcc/../gcc/unwind-dw2-fde.c:615
#2  0x080b1a5d in search_object (ob=0x80d8b68, pc=<value optimized out>) at /Users/andrewhsieh/ndk-andrewhsieh/src.1-with-cherrypicks//build/../gcc/gcc-4.4.3/libgcc/../gcc/unwind-dw2-fde.c:726
#3  0x080b1f84 in _Unwind_Find_FDE (pc=0x80b10da, bases=0xbfa61204) at /Users/andrewhsieh/ndk-andrewhsieh/src.1-with-cherrypicks//build/../gcc/gcc-4.4.3/libgcc/../gcc/unwind-dw2-fde.c:989
#4  0x080b07db in uw_frame_state_for (context=<value optimized out>, fs=0xbfa6102c) at /Users/andrewhsieh/ndk-andrewhsieh/src.1-with-cherrypicks//build/../gcc/gcc-4.4.3/libgcc/../gcc/unwind-dw2.c:1128
#5  0x080b0af8 in uw_init_context_1 (context=0xbfa61230, outer_cfa=<value optimized out>, outer_ra=0x809aa14) at /Users/andrewhsieh/ndk-andrewhsieh/src.1-with-cherrypicks//build/../gcc/gcc-4.4.3/libgcc/../gcc/unwind-dw2.c:1447
#6  0x080b10db in _Unwind_RaiseException (exc=0x944d060) at /Users/andrewhsieh/ndk-andrewhsieh/src.1-with-cherrypicks//build/../gcc/gcc-4.4.3/libgcc/../gcc/unwind.inc:88
#7  0x0809aa14 in __cxa_throw ()
#8  0x0804b4a7 in main () at exceptiontest.cpp:13 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-19T16:47:27.887

正确答案：[Android NDK R5 和对 C++ 异常的支持](https://stackoverflow.com/questions/4663291/android-ndk-r5-and-support-of-c-exception)

不正确的旧答案（这不再是真的。感谢克里斯指出）：

Android 平台不支持 C++ 中的异常。这在 Bionic 文档中有明确说明。此外，您可以[在 android-ndk google 组上阅读此线程，](https://groups.google.com/forum/?fromgroups#!topic/android-ndk/idtn7R-_ZFA)以详细讨论该主题。

# java - 强制 java 7 只使用 JDBC 3.0，而不是 JDBC 4.0

> ID：11090895
> 
> 赞同：4
> 
> 时间：2012-06-18T20:57:05.600
> 
> 标签：java, jdbc, db2

好吧，标题几乎说明了一切。

有没有办法强制 Java 7 使用 JDBC 3.0 而不是 JDBC 4.0？

我希望答案是否定的，但我希望......好吧，这更像是一个冰雹玛丽。

你问，我为什么想做这样的事？

我们的数据库是 DB2。我们使用休眠。在迁移到 Java 7 的过程中（最终）我们遇到了这个错误：

[https://forum.hibernate.org/viewtopic.php?f=1&t=997798](https://forum.hibernate.org/viewtopic.php?f=1&t=997798)

并且，最后一个响应的倒数第二行指出，修复是在 jdbc3.0 驱动程序 (db2jcc) 中，而不是在 jdbc4.0 驱动程序 (db2jcc4) 中。

谢谢你。克拉克。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-18T21:17:22.540

如果您将 jdbc3 驱动程序而不是 jdbc4 驱动程序放在类路径中，并且确保避免在代码中调用自 JDBC4 以来存在的方法，那么一切都应该完美无缺。

许多数据库还不支持 JDBC4，但可以在 Java 7 中使用，前提是您只调用驱动程序支持的方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-18T21:24:06.800

将 jdbc3 驱动程序放入一个文件夹并编写一个仅从该文件夹加载的类加载器。使用该类加载器来加载驱动程序。然后，即使您的主机环境安装了其他驱动程序（即 jdbc4），您也可以使用此驱动程序。特别是，您可以完全控制使用哪个驱动程序。

# bash - 从源文件中查找函数调用的行号

> ID：11090899
> 
> 赞同：17
> 
> 时间：2012-06-18T20:57:36.660
> 
> 标签：bash, logging, scripting

我正在尝试找到一种方法来找出调用函数的文件和行号。该函数位于由我的脚本提供的库文件中。

**文件1：**

```
$source file2
$warn_me "Error: You didn't do something" 
```

**文件2：**

```
$function warn_me() {
$  message=????
$  echo ${message}
$} 
```

**期望的输出：** *$:file1:Line 2: Error: You didn't do something*

函数调用已经在许多文件中发生了很多次，所以我试图找到一种方法来做到这一点而不改变它。

以前，warn_me 函数是在每个使用它的文件中定义的，并且这样处理：

```
$local message="$BASH_SOURCE:(""${BASH_LINENO}): ""$*" 
```

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-06-18T21:19:20.727

你似乎在寻找[`caller`](http://wiki.bash-hackers.org/commands/builtin/caller)它。

```
$ cat h.sh 
#! /bin/bash
function warn_me() {
  echo "$@"
  caller 
}
$ cat g.sh 
#!/bin/bash
source h.sh
warn_me "Error: You didn't do something"
$ . g.sh
Error: You didn't do something
3 g.sh 
```

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2013-07-18T21:20:10.857

受@nosid 和@Wrikken 的启发，我编写了一个小函数来将当前堆栈跟踪放入一个名为$STACK 的变量中。向用户输出发生错误的位置可能很有用。太糟糕了 bash 没有内置的 printStackTrace ......希望有人可以在他们的项目中找到它。

```
function get_stack () {
   STACK=""
   local i message="${1:-""}"
   local stack_size=${#FUNCNAME[@]}
   # to avoid noise we start with 1 to skip the get_stack function
   for (( i=1; i<$stack_size; i++ )); do
      local func="${FUNCNAME[$i]}"
      [ x$func = x ] && func=MAIN
      local linen="${BASH_LINENO[$(( i - 1 ))]}"
      local src="${BASH_SOURCE[$i]}"
      [ x"$src" = x ] && src=non_file_source

      STACK+=$'\n'"   at: "$func" "$src" "$linen
   done
   STACK="${message}${STACK}"
} 
```

更新：我修正了一个错字并添加了一个错误消息参数。所以函数的第一个参数是要添加到堆栈跟踪的错误消息。顺便说一句，如果您的脚本在`bash`的标准输入上提供（在大多数情况下是个坏主意），那么第一个位置将会丢失。如果需要，则在`for`循环中将其更改为`i<$stack_size + 1`. 但正如我所说，将您的脚本提供给 bash 的标准输入并不是一个好主意，[这就是为什么](http://rboci.blogspot.com/2011/08/devil-is-in-details-binbash.html).

更新 2：我发现我对此有一个[较旧的答案](https://stackoverflow.com/a/18873979/520567)。想更好地将代码的更新版本保存在一个地方。所以决定做一个[要点](https://gist.github.com/akostadinov/33bb2606afe1b334169dfbf202991d36)。随时提出对要点的改进建议。如果发生任何更改，我会尝试更新此答案，但我不能保证。

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2012-06-18T21:18:10.490

有三个数组变量可用于此目的：

*   `FUNCNAME`
*   `BASH_SOURCE`
*   `BASH_LINENO`

有关详细信息，请参阅以下答案：

*   [https://stackoverflow.com/a/10707498/1305501](https://stackoverflow.com/a/10707498/1305501)

# javascript - 有没有办法将 MarkItUp 与客户端解析器和服务器模板一起使用？

> ID：11090905
> 
> 赞同：1
> 
> 时间：2012-06-18T20:57:42.090
> 
> 标签：javascript, markitup, pagedown

我正在尝试结合 MarkItUp！和 PageDown，到目前为止它运行良好。我正在使用 MIU 创建一个编辑器，然后给它我的自定义函数来解析文本`Markdown.Converter.js`。

但是，为什么我使用我的功能，MIU 不会从服务器加载模板，它只是创建一个新模板，`iframe`然后用于预览。这是一个问题，因为由于 XSS，不可能在该 iframe 上应用任何 CSS。

是否可以在 MIU 中使用客户端解析和自定义模板？从代码来看，这似乎不是一个选项，但也许以前有人尝试过解决这个问题？我也没有看到让我完全处理预览的选项（这也可以解决我的问题）？

注意：有问题的选项是`previewParser`。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-19T13:12:41.477

经过更多的挖掘，我得出的结论是，目前这是不可能的。所以我在 github 上分叉了 markItUp 并创建了一个作者欣然接受的[补丁。](https://github.com/markitup/1.x/pull/9)

现在你可以像这样使用它：

```
var settings = mySettings;

settings.previewHandler = function(data) {
    var converter = new Markdown.Converter();
    $('#some-element').html(converter.makeHtml(data));
};

$('#some-input').markItUp(settings); 
```

`previewHandler`您可以根据需要设置预览样式，或者对回调中的数据做任何您想做的事情。

# php - 表单提交遗漏了一个值

> ID：11090907
> 
> 赞同：2
> 
> 时间：2012-06-18T20:57:51.187
> 
> 标签：php, javascript, forms, google-chrome, submit

`submit`如果通过 Chrome v19 中的 javascript 提交，我的按钮的值将丢失。它适用于 IE8、IE9 和 FF12。我有以下显示问题的页面：

```
<html>
<head>
<script type="text/javascript">
    function submitorder()
    {
        document.openord.TYPE.value='Submitted using javascript';
        document.openord.submit();
    }
</script>
</head>

<body>
<pre>
The contents of $_REQUEST are:
<?php var_dump($_REQUEST); ?>
</pre>

<form method="post" action="showParms.php" name="openord">
    <input type="hidden" name="TYPE" value="Submitted the regular ol' way">
    <input type="hidden" name="NAME" value="Frederick Q. Larson">
    <input type="submit" name="TASK" value="Submit with Javascript" onclick='submitorder();'>
    <input type="submit" name="TASK" value="Normal Submit">
</form>
</body>
</html> 
```

单击“正常提交”，您将看到`TASK`如下值：

```
The contents of $_REQUEST are:
array(3) {
  ["TYPE"]=>
  string(29) "Submitted the regular ol' way"
  ["NAME"]=>
  string(19) "Frederick Q. Larson"
  ["TASK"]=>
  string(13) "Normal Submit"
} 
```

“使用 Javascript 提交”按钮并非如此：

```
The contents of $_REQUEST are:
array(2) {
  ["TYPE"]=>
  string(26) "Submitted using javascript"
  ["NAME"]=>
  string(19) "Frederick Q. Larson"
} 
```

在 IE 和 FF 中，单击“使用 Javascript 提交”时，您会看到：

```
The contents of $_REQUEST are:
array(3) {
  ["TYPE"]=>
  string(26) "Submitted using javascript"
  ["NAME"]=>
  string(19) "Frederick Q. Larson"
  ["TASK"]=>
  string(22) "Submit with Javascript"
} 
```

知道为什么 Chrome 会遇到这个问题吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-18T21:33:24.127

如果您只想提交带有通过 JavaScript 更改的参数的表单，那么

```
function submitorder() {
    document.openord.TYPE.value='Submitted using javascript';
} 
```

就足够了，因为当用户点击提交按钮时，表单会自动提交。

## “正确”的行为

根据[规范](http://www.w3.org/TR/html5/form-submission.html#constructing-form-data-set)，“4.10.22.4 构造表单数据集”部分：

> 可选地在提交者*提交者的上下文中为表单**表单*构造表单数据集的算法如下。如果没有另外指定，则*提交*者为空。 3.*循环*：对于控件中的每个元素字段，按树形顺序运行以下子步骤：     1\. 如果满足以下任一条件，则跳过此元素的这些子步骤：     • 字段元素是按钮，但不是提交者。 **`. . .`
>  *`. . .`***

 ***提交表单时使用此算法（[规范参考](http://www.w3.org/TR/html5/form-submission.html#submit-body)）。
显然，由于没有点击按钮，*提交*者是空的，因此没有提交元素。

在 Firefox 中，启动提交表单的功能的按钮似乎被标记为*submitter*。在没有（表单提交）按钮的情况下调用函数会显示与 Chrome 中相同的行为：http: [//jsfiddle.net/3fwcr/1/](http://jsfiddle.net/3fwcr/1/)。

当`event.preventDefault();`添加到按钮的`click`事件中时，表单也会像在 Chrome 中一样提交：http: [//jsfiddle.net/3fwcr/2/](http://jsfiddle.net/3fwcr/2/)。
显然，Firefox的默认提交仍然被触发，即使表单已经被提交（似乎违反规范：“如果表单已经被提交（..），那么中止这些步骤”（“这些步骤”=表单提交））。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-18T21:02:25.900

我认为这不是问题/错误，只是因为您使用 JavaScript 进行提交。您可以添加一些这样的代码：

```
var hiddenVal = document.createChild("input");
hiddenVal.setProperty("name", "TASK");
hiddenVal.setProperty("type", "hidden");
hiddenVal.setProperty("value", Submit with JavaScript");
document.openord.appendChild(hiddenVal); 
```***

# php - 在没有控制台的托管服务器上替代 sphinx 搜索

> ID：11090908
> 
> 赞同：0
> 
> 时间：2012-06-18T20:57:56.720
> 
> 标签：php, mysql, search, hosting, sphinx

我从 Virpus 转到了 inmotionhosting 的“电源计划”。瞧，使用该计划没有控制台访问权限，因此我无法像在 virpus 服务器上那样通过 SSH 连接到服务器并安装/设置 sphinx。我不打算在更高级的托管计划上花费额外的美元。

搜索是在大约 20,000 个单独的文本块上进行的，每个文本块大约 1 行到一个段落。

我在想我必须为我在 sphinx 中使用的高级搜索功能找到一个 PHP 替代方案？

大多数移动设备都是连接的，因此某种“将文本复制到本地机器并在本地索引”的解决方案已经过时了。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-19T07:30:28.167

您可能想尝试 Sphinx SaaS [http://indexden.com/](http://indexden.com/)如果您索引的文档少于 15K，他们会为您提供免费帐户。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-18T21:11:35.777

我认为唯一的方法是对数据库查询进行大量优化：另外，您可以向数据库表添加索引并尝试将常见查询结果存储在 memcached 或 APC 等中......如果安装在服务器上。 ..

从未尝试过[http://www.sphider.eu/](http://www.sphider.eu/)但也可能是一个解决方案。

# android - 阻止android动画按钮循环？

> ID：11090909
> 
> 赞同：0
> 
> 时间：2012-06-18T20:57:57.817
> 
> 标签：android, xml

在 Android 中，我通过在 button_pressed.xml 中引用以下 XML 创建了一个动画按钮：

```
 <?xml version="1.0" encoding="utf-8"?>
<animation-list xmlns:android="http://schemas.android.com/apk/res/android" >
        <item android:drawable="@drawable/btn_on_1" android:duration="30" />
        <item android:drawable="@drawable/btn_on_2" android:duration="30" />
        <item android:drawable="@drawable/btn_on_3" android:duration="30" />
        <item android:drawable="@drawable/btn_on_4" android:duration="30" />
        <item android:drawable="@drawable/btn_on_5" android:duration="30" />

</animation-list> 
```

它工作正常，但如果你按住按钮（按住它）动画循环。我可以在上面的 XML 中放入一个 XML 调用来防止动画循环吗？让它只运行一次动画？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-18T21:01:13.960

您可以简单地在按钮单击时调用动画（使用 onClickListener()）。只有当用户对按钮执行完全单击操作（按下 + 释放）时，这才会启动您的动画。

**编辑：**

```
yourButtonView.setOnClickListener(new View.OnClickListener() {
            @Override
            public void onClick(View view) {
                /* start the animation here */

            }
        }); 
```

# drupal - 将面板节点模板变体导出到面板页面

> ID：11090910
> 
> 赞同：0
> 
> 时间：2012-06-18T20:58:03.930
> 
> 标签：drupal

我正在尝试将所有面板节点模板变体导出到 Drupal 7 中的面板页面。到目前为止，我运气不佳，因为代码并不完全相同。有谁知道这样做的好方法，还是我应该尝试配置从变体导出中获得的代码以匹配导入所需的面板页面代码？我宁愿不这样做，因为我有 100 多个变体要导出到面板页面。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-20T04:41:43.490

如果您启用 Ctools 批量导出器，您可以一次选择您喜欢的任何变体并将它们导出到模块中（有点像功能）。然后我猜你需要永久启用该模块才能在其他站点上使用这些变体。是的，烦人的是您不能简单地导出整个面板页面。

# c# - TcpListener：“所有未分配的 IP”地址，如功能

> ID：11090917
> 
> 赞同：2
> 
> 时间：2012-06-18T20:58:33.680
> 
> 标签：c#, .net, sockets, networking, tcplistener

试图了解什么是更好的方法或更好的解决方案，考虑到将部署程序的目标机器可能有组合网卡或只是故障转移卡

我有一个通过端口 XXXX 托管服务的 Windows 服务。它不是 WCF 服务，而是一个简单的 TcpListner 和套接字绑定到服务的端口类型。目前，它被编写为在服务启动时绑定到一个 IP 地址，这很笨重。我正在寻找一种方法来使服务主机 IIS 类似于“所有未分配的 IP”功能，该功能似乎适用于组合和 NIC 故障转移模式。

我想到的选项是，

1.  使用**IPAddress.Any** ...我没有在 NIC 组合和故障转移中使用此模式的经验
2.  **或者使用System.Net.NetworkInformation.NetworkInterface.GetAllNetworkInterfaces()**结果遍历每个 NIC并绑定到**GetIPProperties().UnicastAddresses**

建议或如果有其他建议

提前致谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-18T21:00:04.310

绑定到 0.0.0.0。这意味着“所有本地地址”。

# arrays - PHP 查询——返回的数组值

> ID：11090922
> 
> 赞同：0
> 
> 时间：2012-06-18T20:58:44.383
> 
> 标签：arrays, cakephp

我在 cake PHP ($this->query(select...)) 中使用查询函数，我知道它返回一个值数组。如果查询只返回一个值，那么该值在数组中的位置是什么？

$element = $arrayName(0) 是否正确？

我正在尝试这样使用它：

```
$flowsheet_name = $this->query("select FLOWSHEET_NAME from FLOWSHEET_TEMPLATE where FLOWSHEET_ID = ".$value.";");
        $flowsheet_question = $flowsheet_name(0);
        array_push($this->$filedMethodMappings, $flowsheet_question => array(
                CaBase::KEY_MAPPING_LOGIC_COMPLEXITY => CaBase::LEVEL3_COMPLEXITY,
                CaBase::KEY_FIELD_LOGIC_NAME         => 'wsUnifiedKey',
                CaBase::KEY_FIELD_QUESTION_ID        => ''.$value,
                )
            ); 
```

但我不知道它是否有效。我在这里遇到双箭头错误：

```
$flowsheet_question => array( 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-18T23:30:07.580

在 CakePHP 中，查看数组中发生了什么的简单方法是：

```
debug($flowsheet_name); 
```

# javascript - 如何原型化 jQuery“DOM”类

> ID：11090923
> 
> 赞同：0
> 
> 时间：2012-06-18T20:58:48.337
> 
> 标签：javascript, jquery, html, dom

我想创建一个`inject()`可以在任何 jQuery DOM 对象上调用的函数。

例如, `$('div').inject()`, `$('#abc').inject()`, 甚至`$('nonStandardElement').inject()`;

我需要对其进行原型设计，因为它应该适用于尚未创建的元素。

我可以原型什么类（或类集）来完成这个？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-18T22:52:34.127

这称为[jQuery 插件](http://docs.jquery.com/Plugins/Authoring)。您向 jQuery 的原型对象添加方法，该对象公开为`jQuery.fn`：

```
jQuery.fn.inject = function inject() {
    /* do what you want */
    return this; // for chainability
}; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-18T21:04:02.220

没关系，想通了！

原来我可以将它直接添加到“jQuery”对象上，如

```
jQuery.prototype.inject = function(x){alert('x')} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-18T21:12:07.520

你可以像这样编写自己的 jquery 插件，

```
(function($){
 $.fn.inject= function() {

//code...
 };
})(jQuery); 
```

```
//Sample call
     $(selector).inject(); 
```

# objective-c - Objective-C 委托或自我正在变形类

> ID：11090926
> 
> 赞同：0
> 
> 时间：2012-06-18T20:58:57.767
> 
> 标签：objective-c, object, delegates, self

我有 2 个 UIViewControllers（A，B）。A 被设置为 B 的代表，然后 B 被呈现。协议设置在 B 的 header 中：

```
@protocol BDelegate <NSObject>
- (IBAction)finishOrder:(id)sender;

@end 
```

声明了委托属性：

```
@property (nonatomic, assign) id<BDelegate> delegate; 
```

A 设置 B.delegate = self; 然后按一个按钮 B 调用：

```
if (self.delegate) {
        [self.delegate finishOrder:nil];
    } 
```

但是，在第一次运行时 lldb 给了我：

```
-[UITextInteractionAssistant finishOrder:]: unrecognized selector sent to instance 
```

第二次运行：

```
-[NSInvocation delegate]: unrecognized selector sent to instance 
```

第三次运行：

```
-[__NSCFDictionary delegate]: unrecognized selector sent to instance 
```

第四次运行：

```
-[UITextTapRecognizer finishOrder:]: unrecognized selector sent to instance 
```

所以...没有代码更改，但是 self 从 A 更改为 NSInvocation 和 __NSCFDictionary 并且 B 的委托（A 的自己）更改为 UITextInteractionAssistant 和 UITextTapRecognizer ...从未见过类似的东西。有任何想法吗？谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-18T21:00:31.150

你在某处过度释放。尝试打开 Zombies，并使用 Instruments 追踪过度释放。

# ios - UITabBarController 的选项卡旋转和 willRotateToInterfaceOrientation 传播

> ID：11090931
> 
> 赞同：4
> 
> 时间：2012-06-18T20:59:09.617
> 
> 标签：ios

我的应用程序有四个选项卡：**A**、**B**、**C**和**D**。它们`UIViewController`由 管理`UITabBarController`。该应用程序支持旋转，因此每个视图控制器都返回`YES`到`shouldAutorotateToInterfaceOrientation`.

使用弹簧和支柱，大部分旋转由 iOS 自动完成。但是，tab **A**也需要进一步定位，在其 VC 的`willRotateToInterfaceOrientation`方法中完成。

When the VC for tab **A** is selected and the screen is rotated, that VC receives a `willRotateToInterfaceOrientation`message (propagated by iOS from `UITabBarController`), and the resulting rotation is correct.

但是，当所选选项卡为**B**并且屏幕旋转时，**不**调用`willRotateToInterfaceOrientation`屏幕。说得通。但是，如果我随后选择选项卡**A**，我只会得到应用其弹簧和支柱的结果，而没有其`willRotateToInterfaceOrientation`.

在为此苦苦挣扎了一段时间后，在网上找不到解决方案后，我想出了以下方法。我进行了子类化`UITabBarController`，并在其中`willRotateToInterfaceOrientation`调用了所有 VC，`willRotateToInterfaceOrientation`无论哪一个是`selectedViewController`：

```
- (void) willRotateToInterfaceOrientation:(UIInterfaceOrientation)toInterfaceOrientation duration:(NSTimeInterval)duration {
    if (self.viewControllers != nil) {
        for (UIViewController *v in self.viewControllers) 
            [v willRotateToInterfaceOrientation:toInterfaceOrientation duration:duration];
    }
} 
```

它有效，但它看起来像一个黑客，我的问题是我是否做对了。有没有办法告诉 iOS`willRotateToInterfaceOrientation`在屏幕旋转后第一次显示之前总是调用 VC？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-18T21:33:08.050

处理自定义布局的最佳方法是继承`UIView`和覆盖该`layoutSubviews`方法。`layoutSubviews`每当视图的大小发生变化时（以及其他时间），系统都会发送到视图。因此，当您的视图 A 即将以不同大小出现在屏幕上时（因为在视图 B 在屏幕上时界面已旋转），系统会向视图 A 发送`layoutSubviews`消息，即使它没有向视图控制器 A 发送`willRotateToInterfaceOrientation:`消息。

如果您的目标是 iOS 5.0 或更高版本，您可以覆盖子类的`viewDidLayoutSubviews`方法`UIViewController`并在那里进行布局，而不是子类化`UIView`。我更喜欢在我的视图中执行此操作`layoutSubviews`，以使我的视图特定逻辑与我的控制逻辑分开。

进行布局也是一个坏主意，`willRotateToInterfaceOrientation:`因为系统会在实际更改视图大小之前和旋转动画块之前发送该消息。它在旋转动画块内发送`willAnimateRotationToInterfaceOrientation:duration:`、`layoutSubviews`和`viewDidLayoutSubviews`消息，因此如果在旋转期间视图在屏幕上，则子视图的重新定位将被动画化。

# oracle - 如何在 Oracle 中将 TIMESTAMP 列更新为 TIMESTAMP WITH TIME ZONE

> ID：11090932
> 
> 赞同：5
> 
> 时间：2012-06-18T20:59:09.793
> 
> 标签：oracle, timezone, timestamp, data-migration, ddl

不幸的是，我有一对列被错误地定义为`TIMESTAMP(6)`而不是`TIMESTAMP(6) WITH TIME ZONE`. 我想将这些列从旧的错误数据类型迁移到新的正确数据类型。最重要的是，这些值似乎已在 E(S|D)T 中捕获，我需要 UTC 中的值。

到目前为止，我所拥有的最好的是：

```
alter table OOPSIE_TABLE add (
    NEW_COLUMN_A timestamp(6) with time zone,
    NEW_COLUMN_B timestamp(6) with time zone
);
update OOPSIE_TABLE set
    NEW_COLUMN_A = COLUMN_A,
    NEW_COLUMN_B = COLUMN_B
;
alter table OOPSIE_TABLE drop column (
    COLUMN_A,
    COLUMN_B
);
alter table OOPSIE_TABLE rename column NEW_COLUMN_A to COLUMN_A;
alter table OOPSIE_TABLE rename column NEW_COLUMN_B to COLUMN_B; 
```

`15-JUN-12 05.46.29.600102000 PM -04:00`不幸的是，当我想要`15-JUN-12 09.46.29.600102000 PM UTC`（或者 Oracle 会格式化它）时，这给我留下了看起来像 的数据。

我已经完成了`select dbtimezone from dual;`，它显示了我`+00:00`，所以我不知道如何继续。理想情况下，我可以在纯 DML 中执行此操作，并根据旧日期值（我确定在 America/New_York 时区）计算 DST。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-19T18:50:12.610

[在@JustinCave](https://stackoverflow.com/a/11106780/4203)的一点帮助下，我得到了以下解决方案，它完全实现了我想要的：

```
-- Rename the old columns so we can use them as a data source *AND* so
-- we can roll back to them if necessary.
alter table OOPSIE_TABLE rename column COLUMN_A to OLD_COLUMN_A;
alter table OOPSIE_TABLE rename column COLUMN_B to OLD_COLUMN_B;
-- Define COLUMN_A and COLUMN_B to have TIME ZONE support.
alter table OOPSIE_TABLE add (
    COLUMN_A timestamp(6) with time zone,
    COLUMN_B timestamp(6) with time zone
);
-- Populate the "new" columns with the adjusted version of the old data.
update OOPSIE_TABLE set
    COLUMN_A = from_tz(OLD_COLUMN_A, 'America/New_York') at time zone 'UTC',
    COLUMN_B = from_tz(OLD_COLUMN_B, 'America/New_York') at time zone 'UTC'
; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-19T07:12:04.803

对我来说它看起来不错。

```
`SELECT SYS_EXTRACT_UTC(TIMESTAMP '2012-06-15 05:46:20 -04:00') FROM DUAL;` 
```

给出：

```
2012-06-15 09:46:20 
```

您只需住在与 UTC 相差 4 小时的国家/地区。

也尝试类似：

```
SELECT to_char(new_column_a, 'YYYY-MM-DD HH24:MI:SS TZD'), sys_extract_utc(new_column_a) FROM oopsie_table; 
```

# c++ - 二进制字符串转换为整数

> ID：11090936
> 
> 赞同：0
> 
> 时间：2012-06-18T20:59:34.577
> 
> 标签：c++, indexing

试图将一串二进制输入转换为整数向量。我想在不使用内置 C++ 函数的情况下执行此操作。这是代码片段和执行错误（编译良好）。

示例输入：“1011 1001 1101”

应该以整数 11,9 和 13 的形式存储在向量中

```
#include <iostream>
#include <vector>
#include <string>
using namespace std;

int main()  
{
    string code,key;
    vector<int>digcode;
    vector<int>ans;
    cout<<"Enter binary code:\n";
    getline(cin,code);
    cout<<"Enter secret key:\n";
    cin>>key;

    for(int i=0;i<code.length();)
    {
        int j=2, num=0;
        while (code[i]!=' '&&i<code.length())
        {
        num*=j;
        if (code[i]=='1')
        num+=1;
            i++;
        }
        cout<<num<<" ";
        digcode.push_back(num);
        if(code[i]==' '&&i<code.length())
            i++;
    }
} 
```

错误消息：“调试断言失败！” “表达式：字符串下标超出范围”

除了最后一个数字之外的所有数字都被打印和存储。我已经通过 for 和 while 循环寻找下标变得太大的地方，但运气不佳。

任何帮助表示赞赏！谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-18T21:03:01.130

操作数的顺序错误：

```
while (code[i]!=' '&&i<code.length()) 
```

改成：

```
while (i < code.length() && code[i]!=' ') 
```

以下`if`语句相同。只有当第一个操作数为真时，才会评估第二个操作数，防止越界访问。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-18T21:03:18.467

按空格解析数字后？有一个`strtol()`函数可以提供基本转换并获取整数值。

[看这里](http://www.cplusplus.com/reference/clibrary/cstdlib/strtol/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-18T21:26:58.593

您的代码可以简化一点：

```
for (std::string line; ; )
{
    std::cout << "Enter a line: ";
    if (!std::getline(std::cin, line)) { break; }

    for (std::string::const_iterator it = line.begin(); it != line.end(); )
    {
        unsigned int n = 0;
        for ( ; it != line.end() && *it == ' '; ++it) { }
        // maybe check that *it is one of { '0', '1', ' ' }

        for ( ; it != line.end() && *it != ' '; ++it) { n *= 2; n += (*it - '0'); }
        std::cout << "   Read one number: " << n << std::endl;
    }
} 
```

# visual-studio-2010 - 与在单个解决方案中打开所有项目相比，为什么 Devenv 项目构建非常缓慢

> ID：11090937
> 
> 赞同：0
> 
> 时间：2012-06-18T20:59:34.970
> 
> 标签：visual-studio-2010, devenv

```
set Unified=C:\Workspaces\Main\Unified\UnifiedFX.sln
set Fullserver=C:\Workspaces\Main\Unified\FullServer\Tests\FullServer.Automation\FullServer.Automation.csproj
set Management=C:\Workspaces\Main\Unified\Management\Tests\Management.Automation\Management.Automation.csproj
set Move=C:\Workspaces\Main\Unified\Move\Tests\Move.Automation\Move.Automation.csproj
set d64="Debug|x64"
set d86="Debug|x86"

for %%a in (%d64%, %d86%) do (
      for %%b in (%Fullserver%, %Move%, %Management%) do (
                devenv %Unified% /build %%a /project %%b)) 
```

那是我的 .bat 文件。当我运行它时，它需要将近 90 秒才能完成。然而，我可以在几秒钟内从 Visual Studios 2010 中构建每个单独的项目，再加上在 x64 和 x86 之间切换所需的时间。为什么bat文件这么慢？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-18T21:03:44.770

您正在为每个项目加载 Visual Studio，我敢打赌这是最耗时的。

无需运行 devenv.exe 来运行构建，只需在 csproj 或 sln 文件上使用 MSBUILD.EXE。

# javascript - 用另一个替换字母表中的所有字母实例

> ID：11090942
> 
> 赞同：2
> 
> 时间：2012-06-18T20:59:55.123
> 
> 标签：javascript, jquery

我有英文字母：

```
abcdefghijklmnopqrstuvwxyz 
```

我还有另一个字母：

```
ypltavkrezgmshubxncdijfqow 
```

如果我有一个字符串。我想用新字母表中的等效字符替换每个字符。

因此，如果字符串是 abcde，则新字符串将是 yplta。

我试过了：

[http://jsfiddle.net/KvFCr/10/](http://jsfiddle.net/KvFCr/10/)

但没有走得很远，甚至不知道这是否是最好的方法。有没有更好的方法使用 jquery 和 javascript 来实现我想要的？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-18T21:07:48.430

```
var alphabet1  = "abcdefghijklmnopqrstuvwxyz";
var alphabet2  = "ypltavkrezgmshubxncdijfqow";
var message    = "encodethismessage".toLowerCase();

alert(encode(message,alphabet1,alphabet2));

function encode(message, alphabet1, alphabet2) {
    var newMessage = "";
    messageArr = message.split('');
    for(i in messageArr) {
        index = alphabet1.search(messageArr[i]);
        newMessage += alphabet2[index];
    }
    return newMessage;
} 
```

您必须小心，因为您不想触摸已经转换的角色。例如，如果您替换所有“a”然后所有“b”等，您将不会得到正确的结果。这应该有效，因为它转换每个字符而不是每个字符类。

只是想警告您替换密码不安全，因为只有简单的密码文本对它们进行攻击所以不要将其用于以安全为目标的任何事情。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-18T21:19:01.560

尝试：

```
var alpha1  = "abcdefghijklmnopqrstuvwxyz";
var alpha2  = "ypltavkrezgmshubxncdijfqow";
var str = "abcde";
var newstr = '';
for(var i=0;i<str.length;i++) {
    charPos = alpha1.indexOf(str.charAt(i));
    newstr += alpha2.charAt(charPos);
}
​console.log(newstr);​ 
```

**[jsFiddle 示例](http://jsfiddle.net/j08691/KvFCr/11/)**。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-18T21:16:56.330

您可以将函数作为参数传递给`string.replace`.

```
var s = 'ABCDEFGHIJKLMNOPQRSTUVWXYZ'.replace(/[A-Z]/g, function(str, p1, p2, offset, s) {
    var translate_table = {
        'A': 'Y',
        'B': 'P',
        'C': 'L',
        'D': 'T',
        'E': 'A',
        'F': 'V',
        'G': 'K',
        'H': 'R',
        'I': 'E',
        'J': 'Z',
        'K': 'G',
        'L': 'M',
        'M': 'S',
        'N': 'H',
        'O': 'U',
        'P': 'B',
        'Q': 'X',
        'R': 'N',
        'S': 'C',
        'T': 'D',
        'U': 'I',
        'V': 'J',
        'W': 'F',
        'X': 'Q',
        'Y': 'O',
        'Z': 'W'
    };
    return translate_table[str];
});

alert(s); 
```

[http://jsfiddle.net/GjG3H/](http://jsfiddle.net/GjG3H/)

# jquery - 解码序列化字符串并替换特殊字符

> ID：11090945
> 
> 赞同：1
> 
> 时间：2012-06-18T21:00:01.307
> 
> 标签：jquery, jquery

我对[jquery](/questions/tagged/jquery "显示标记为“jquery”的问题")很陌生。但是我一直在尝试将解码脚本添加到 JSFiddle 上的以下序列化（下面的链接），但收效甚微。

我想解码生成的字符串并将 & 替换为 + 并将 = 替换为空......然后提交字符串。当我添加解码变量时，序列化字符串一直在我身上消失。提前致谢。

[http://jsfiddle.net/dactivo/4Nmcx/](http://jsfiddle.net/dactivo/4Nmcx/)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-18T21:38:39.623

string.replace("=","").replace("&","+") - 用于替换您的特殊字符。(http://www.w3schools.com/jsref/jsref_replace.asp)

我认为您应该将“更改”事件绑定到“表单”元素。

# c# - Mac OS X 上的 Mono - 非法指令 4

> ID：11090946
> 
> 赞同：1
> 
> 时间：2012-06-18T21:00:01.950
> 
> 标签：c#, macos, mono

我正在通过单声道的 Terminal.app 在 Mac OS X Lion 上运行 C# 控制台应用程序。然而，我的许多运行时间较长的脚本最终都以一行写着“非法指令 4”结束。没有其他调试或错误信息。

有谁知道我可以如何尝试找出错误的原因？

谢谢你，克里斯

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-10-25T15:12:09.637

这是因为我使用了未移植到 Mono 的部分 .NET 库。就我而言，它是 SqlBulkCopy 类 ( `System.Data.SqlClient`)。

# sql - 格式化 Oracle 日期以使用 MS Access

> ID：11090951
> 
> 赞同：1
> 
> 时间：2012-06-18T21:00:11.473
> 
> 标签：sql, ms-access, oracle10g, ms-access-2007

我发现了一些关于此的问题，但似乎没有一个完全适合我的问题案例。

**概述**：数据在Oracle 10g 数据库中，要求包括使用MS Access 作为前端。

**问题**：表格包含与 MS Access 不兼容的日期字段。我*需要*在 MS Access 中根据日期和时间运行查询

**详情**：

1.  我不允许重新设计表格
2.  决定在服务器上创建新表并从旧表运行插入到新表
    *   可能听起来很奇怪，但考虑到限制，如果我复制数据，我可以做我想做的事
3.  对于新表，我想从旧表中获取日期/时间/时区字段，并将其插入到带有日期/时间的新表中，但去掉时区，将其单独放入一个字段中

最大的要求是让数据可用。如果我做一个 TO_CHAR 它变成一个字符串，我不能设置基于日期和时间的查询，因为它是一个静态文本字段。

任何帮助表示赞赏！谢谢 ！！！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-19T04:57:41.300

如果可能的话，我发现处理这些问题的最佳方法是通过视图链接到表格。然后，您可以在后台按照您希望的方式呈现数据，而无需更改表结构。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-19T13:39:53.310

我找到了答案。看这里：

[Oracle 日期函数](http://psoug.org/reference/date_func.html)

他们给出了一些用 to_date 包装 to_char 的示例。我将其格式化为将其转换为剥离时区的文本，然后用 to_date 将其包装以将其转换回与 MS Access 兼容的日期和时间字段。这是代码：

```
SELECT TO_DATE(TO_CHAR(table.date, 'DD-MON-YYYY HH24:MI:SS'),'DD-MON-YYYY HH24:MI:SS')
FROM table.date; 
```

# node.js - 带有 Socket.io 客户端支持的 Node.js 托管？

> ID：11090954
> 
> 赞同：4
> 
> 时间：2012-06-18T21:00:27.703
> 
> 标签：node.js, socket.io

我制作了一个 socket.io 客户端应用程序，它连接到我的 socket.io 服务器，然后他们可以进行任何需要的通信。

当我在一台机器甚至两台不同的本地机器上进行本地操作时，一切正常。所以我尝试在[cloud9](http://c9.io)上部署客户端，它一直抛出这个错误：

```
net.js:540
    connectReq = self._handle.connect(address, port);
Error: No local connects allowed for security purposes
    at connect (net.js:540:31)
    at net.js:607:9
    at Array.0 (dns.js:88:18)
    at EventEmitter._tickCallback (node.js:190:38) 
```

客户端代码是，*其中 [ip-address] 是我的服务器 IP 地址*：

```
var io = require('socket.io-client'),
socket = io.connect('[ip-address]', {
    port: 1337
}); 
```

有没有办法在 c9.io 上运行这样的 socket.io 客户端？

他们是否因为[这篇文章](http://www.ngenuity-is.com/blog/2011/nov/1/doing-evil-with-the-cloud-9-ide-and-socketio/)而阻止了它？

**是否有任何免费的 node.js 托管解决方案可以运行像上面这样的 socket.io 客户端应用程序？**

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-19T22:43:28.757

Depending on your needs you could create a free Heroku account. You wont have access to a database, and you're limited in resources, but if the app is small enough and efficient enough it could suffice.

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-19T15:25:38.570

[Nodejitsu](http://nodejitsu.com)目前是免费的 node.js 托管解决方案，一切正常（包括[socket.io](http://socket.io)）

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-12-15T14:42:29.503

OpenShift 使用端口 8080 和 Heroku 3000。

***客户端***代码必须是这样的：

```
// Wrong!:
// mySocket = io.connect(host, port);

// Right:
mySocket = io();
mySocket.on(....); 
```

***服务器***代码必须如下所示：

```
var express = require('express'),
    app = express(),
    server = require('http').Server(app),
    io = require('socket.io')(server);

app.use(express.static('path/to/public/html'));
server.listen(8080); // OpenShift 8080, Heroku 3000

io.on(...); 
```

[https://devcenter.heroku.com/articles/node-websockets#create-a-socket-io-client](https://devcenter.heroku.com/articles/node-websockets#create-a-socket-io-client)

# linqpad - linqpad 查询以连接 odata 中的两个实体

> ID：11090957
> 
> 赞同：0
> 
> 时间：2012-06-18T21:00:38.797
> 
> 标签：linqpad

我正在使用 linqpad。我连接了 ODATA。实体与关系列在左窗格中。有两个实体，称为产品和客户。我必须获取以pid开头的所有产品ID和以b开头的所有客户的名称。两者之间存在关系。产品是客户的孩子。我该怎么办？我从两天开始就在尝试，但无法弄清楚。任何人都可以帮忙吗？这是基本代码。我不知道该怎么做。

```
 from p in products
    where p.ProductId.StartsWith("Pid")
    from c in customers
    where c.Name.StartsWith("B")
    select new
    {
        p.Pid,
        c.Name
    }; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-18T22:46:27.127

您能否指定您希望两个实体之间的关系如何影响查询结果？您是否希望以上内容仅返回产品（ID 以给定值开头），然后仅返回名称以特定值开头的产品的客户？

不幸的是，这样的查询在 OData 中是无法表达的。您可以请求 ID 以特定值开头的所有产品以及所有相关客户。然后在客户端过滤客户。

例如，这将为您提供 ID 以特定值开头的所有产品及其所有客户：

```
from p in products
where p.ProductId.StartsWith("Pid")
select new Product
{
   ProductId = p.ProductId,
   Customers = p.Customers
}; 
```

# jquery - 在 jQuery 中解析布尔 json 值

> ID：11090958
> 
> 赞同：1
> 
> 时间：2012-06-18T21:00:42.803
> 
> 标签：jquery

在这个小提琴中，我只是想返回 true ：http: [//jsfiddle.net/WCFtp/](http://jsfiddle.net/WCFtp/) for jQuery key 'saved'

为什么我会收到错误“Uncaught SyntaxError: Unexpected token s”

下面的代码：

```
 var test = "{saved: true}";
        var jsonSaveResponse = jQuery.parseJSON(test);
        alert(jsonSaveResponse.saved); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-18T21:02:03.070

应该是`var test = '{"saved": true}';`。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-18T21:02:07.480

您的 JSON 无效。必须引用对象属性名称：

```
var test = '{"saved": true}'; 
```

请记住，JSON 是有效 Javascript 语法的子集。许多有效的 Javascript 是无效的 JSON。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-18T21:04:14.943

请参阅[parseJSON](http://api.jquery.com/jQuery.parseJSON/)文档。

> 传入格式错误的 JSON 字符串可能会导致抛出异常。例如，以下都是格式错误的 JSON 字符串：
> 
> {test: 1} （test 周围没有双引号）。
> 
> {'test': 1} （'test' 使用单引号而不是双引号）。

你会想用这个来代替：

```
var test = "{\"saved\": true}"; 
```

# javascript - jquery追加'x'数字图像元素将'x'应用于src和类

> ID：11090959
> 
> 赞同：0
> 
> 时间：2012-06-18T21:00:43.913
> 
> 标签：javascript, jquery, append

我有一个包含 590 张图片的目录，我的问题是能够单独使用 jquery 从该目录中提取图像并附加它们，我发现这些图像不能单独使用 jquery/javascript 完成。或者，我将图片重命名为 1.jpg,2.jpg ... 590.jpg 。如何使用 jquery 将 590 个图像附加到一个 div 让我留下应用于 src`'lq'+numberofappended+'.jpg'`和类的附加元素的数量`'image-'+numberofappended`

结果给我留下了以下

```
<div class="imagecontainer">
<img src="lq/1.jpg" class="image-1"/>
<img src="lq/2.jpg" class="image-2"/>
<img src="lq/3.jpg" class="image-3"/>
...
<img src="lq/590.jpg" class="image-590"/>
</div> 
```

如果我所拥有的内容过于广泛，我可以一次附加 50 张图像，并在每次到达页面末尾时应用 jquery 分页加载另外 50 张图像。

我个人知道如何在 jquery 中使用 append，但我不知道如何单独附加图像，以及根据哪个附加编号将其应用于 src 和类。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-18T21:12:00.673

制作图像 html 的数组。

```
var imgs=[];
for( i=1; i<= 590; i++){
    imgs.push('<img src="lq/'+i+'/.jpg" class="image-'+i+'"/>')
} 
```

现在您可以将它们全部添加：

```
 $('.imagecontainer').html(imgs.join('')); 
```

或者，您可以根据 UI 中最有效的方式（例如滚动事件）错开加载它们。使用 slice() 获取要用于 append() 的数组部分

添加前 50 个：

```
 var first50= imgs.slice(0,50);
 $('.imagecontainer').html(first50.join('')); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-18T21:05:51.310

for 循环应该可以解决问题，

```
var images = "";
for (var i = 1; i <= 5; i++) {
    images += '<img src="lq/'+i+'.jpg" class="image-'+i+'"/>'
}

$('.imagecontainer').append(images); 
```

输出

```
<div class="imagecontainer">
    <img src="lq/1.jpg" class="image-1">
    <img src="lq/2.jpg" class="image-2">
    <img src="lq/3.jpg" class="image-3">
    <img src="lq/4.jpg" class="image-4">
    <img src="lq/5.jpg" class="image-5">
</div> 
```

[演示](http://jsfiddle.net/HsyXr/1/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-18T21:08:32.153

干得好; 将图像存储在一个数组中，加入它们并一次性追加。

```
var images = [];

for (var i = 1; i <= 50; i++) {
    images.push('<img src="lq/'+i+'.jpg" class="image-'+i+'"/>');
}

$('.imagecontainer').append(images.join('\n')); 
```

# ios - NSBundle pathForResource:ofType: 和 UIImage imageWithContentsOfFile: 如何处理比例和设备修饰符？

> ID：11090963
> 
> 赞同：15
> 
> 时间：2012-06-18T21:01:06.840
> 
> 标签：ios, uiimage, retina-display, nsbundle

在我的 iOS 资源文件夹中，我有图像：

```
foo~iphone.png
foo@2x~iphone.png
foo~ipad.png
foo@2x~ipad.png 
```

我加载它们：

```
NSString *fileName = [[NSBundle mainBundle] pathForResource:@"foo" ofType:@"png"];
UIImage *image = [UIImage imageWithContentsOfFile:fileName]; 
```

实验上：

在 iPhone 上，`filename`is`/path/to/bundle/foo~iphone.png`和在视网膜 iPhone 上，它加载`@2x`版本。

在 iPad 上，`filename`is `/path/to/bundle/foo~ipad.png`，在视网膜 iPad 上，它加载`@2x`版本。

也就是说，它加载了我希望的图像，但`pathForResource`处理了设备修改器，并`imageWithContentsOfFile`处理了比例修改器。

我想知道为什么。的[文档](https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/Foundation/Classes/NSBundle_Class/Reference/Reference.html)没有说明`pathForResource`设备修饰符，而[文档](http://developer.apple.com/library/ios/#documentation/uikit/reference/UIImage_Class/Reference/Reference.html)没有说明`imageWithContentsOfFile`缩放修饰符。

是否有单独的文档准确说明每个功能的作用？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-12-21T14:56:44.380

的解释`imageWithContentsOfFile`在[相关文档](http://developer.apple.com/library/ios/#documentation/2DDrawing/Conceptual/DrawingPrintingiOS/SupportingHiResScreensInViews/SupportingHiResScreensInViews.html#//apple_ref/doc/uid/TP40010156-CH15-SW1)中，而不是在`UIImage`文档本身中：

> 在具有高分辨率屏幕的设备上，imageNamed:、imageWithContentsOfFile: 和 initWithContentsOfFile: 方法会自动查找名称中带有 @2x 修饰符的请求图像的版本。如果它找到一个，它会加载该图像。如果您不提供给定图像的高分辨率版本，图像对象仍会加载标准分辨率图像（如果存在）并在绘图期间对其进行缩放。
> 
> 加载图像时，UIImage 对象会根据图像文件的后缀自动将 size 和 scale 属性设置为适当的值。对于标准分辨率图像，它将 scale 属性设置为 1.0，并将图像大小设置为图像的像素尺寸。对于文件名中带有 @2x 后缀的图像，它将 scale 属性设置为 2.0 并将宽度和高度值减半以补偿比例因子。这些减半的值与您需要在逻辑坐标空间中用于渲染图像的基于点的尺寸正确相关。”

我不知道哪个文档解释了`pathForResource`.

# ruby - 将 Mongo 查询转换为 Ruby 数组的最佳方法？

> ID：11090969
> 
> 赞同：0
> 
> 时间：2012-06-18T21:01:29.373
> 
> 标签：ruby, mongodb, mongoid

假设我在 MongoDB 中有一个大型查询（出于本练习的目的，假设它返回 1M 条记录），例如：

```
users = Users.where(:last_name => 'Smith') 
```

如果我遍历这个结果，与每个成员一起工作，比如：

```
users.each do |user|
  # Some manipulation to "user"
  # Some calculation for "user"
  ...
  # Saving "user"
end 
```

我经常会遇到 Mongo 游标超时（因为保留的数据库游标超过了默认的超时长度）。我知道我可以延长光标超时时间，甚至将其关闭——但这并不总是最有效的方法。因此，我解决此问题的一种方法是将代码更改为：

```
users = Users.where(:last_name => 'Smith')
user_array = []
users.each do |u|
    user_array << u
end 
```

然后，我可以遍历 user_array（因为它是一个 Ruby 数组），进行操作和计算，而不用担心 MongoDB 超时。

这很好用，但必须有更好的方法——有人有建议吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-18T21:08:46.313

如果您的结果集太大而导致游标超时，则将其完全加载到 RAM 不是一个好主意。

一种常见的方法是批量处理记录。

1.  获取 1000 个用户（按 _id 排序）。
2.  处理它们。
3.  获取另一批 1000 个用户，其中 _id 大于最后处理用户的 _id。
4.  重复直到完成。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-18T21:11:07.777

对于长时间运行的任务，请考虑使用 rails runner。

runner 在 Rails 上下文中以非交互方式运行 Ruby 代码。例如：

```
$ rails runner "Model.long_running_method" 
```

有关详细信息，请参阅：

> [http://guides.rubyonrails.org/command_line.html](http://guides.rubyonrails.org/command_line.html)

# opengl - SDL 2.0 与 Code::Blocks

> ID：11090971
> 
> 赞同：1
> 
> 时间：2012-06-18T21:01:39.540
> 
> 标签：opengl, sdl, codeblocks

自从我拿起 SDL（不久前），我一直使用 Code::Blocks 和 MinGW 来开发......在 Windows 上。为 SDL 1.2 设置它既简单又快捷。

现在我想从 OpenGL 3.2 开始，因为我已经了解 SDL，所以我认为将它用于 OpenGL 是合乎逻辑的。所以我下载了支持 OpenGL 3.x 的 SDL 2.0，并尝试构建这些库。

我尝试`make install`使用 Cygwin，但它没有配置，因为我在 Windows 上。为了获得 .lib 和 .dll 文件，我按照 VisualC 的说明生成了它们。

但我很确定我不能将 *.lib 文件与 MinGW 一起使用。我不能。

所以我尝试使用 reimp 将 *.lib 文件转换为 *.a。它没有用，所有图书馆都被发现是“腐败的”。甚至我下载的 glew32.lib 并没有自己构建。我很迷茫。

我什至可以让它与 MinGW 一起使用，还是必须切换到 VisualStudio？

（我什至不知道 VC++ 2010 Express Edition 是否可用。我能够构建 VisualC 库的唯一原因是因为我使用了 Visual Studio Pro 试用版。VC++ 2010 不允许我更早这样做。）

**更新**：

我使用 MSYS 为 SDL 2.0 和 GLEW 构建 *.a 和 *.dll.a。我的项目已正确链接并且构建没有任何问题。但是，我无法运行它。

我收到错误“应用程序无法正确启动 (0xc00007b)”。

我知道这个问题是由于不正确的 *.dll 文件造成的。我已经链接了我构建的所有 *.dll.a 文件，但我不知道为什么会出现这个问题。

我究竟做错了什么？

（[这](http://pastebin.com/KqAR1PHi)是我写的测试程序的pastebin，但我怀疑现在的问题出在代码上。）

**更新 v2**：

我解决了。我只是将 *.dll 文件放入 System32 文件夹以及 SysWOW64 文件夹中。

然后，我只需要调试我的代码。目前，您不能简单地调用`SDL_Init(SDL_INIT_EVERYTHING)`，因为没有触觉支持。

现在我的东西已经工作了，我将开始开发。谢谢你的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-18T22:26:44.300

您可能想尝试安装[MSYS](http://www.mingw.org/wiki/MSYS)，它将为您提供 bash shell 和用于在 Windows 上构建库的实用程序。

# android - 安卓签名apk文件

> ID：11090973
> 
> 赞同：1
> 
> 时间：2012-06-18T21:01:44.363
> 
> 标签：android, apk, sign

我使用本教程签署我的 apk[链接](http://www.androiddevelopment.org/tag/keytool/)

但我已停止**签署您的申请**。

有

```
./sign-mac-example.sh ../DialANumber/deploy/DialANumber.apk
Enter passphrase: 
```

命令

这不是我在命令行中看到的内部或外部程序。

我用窗户。

我已经在工作空间中创建了所有文件夹：

*   androidkeys（我存储密钥 my-release-key.keystore 的地方）
*   部署（我导出我的apk文件的地方）

感谢帮助！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-18T21:08:42.507

我可以在教程中看到这部分比你引用的地方高一点：

> 写一个简短的脚本，让你的生活更轻松 只是为了让生活更轻松，我写了一个简短的脚本，每次都可以用来签署你的 Android APK 文件。您可以在下面下载它并将其放置在您放置密钥库的同一目录中（参见第 2 点）。

在这里，这个家伙定义了他调用的脚本`./sign-mac-example.sh`。然而，遗憾的是，这个脚本适用于 linux 和 mac，而不是 windows。

没关系，这个脚本中唯一真正关键的行是：

```
jarsigner -verbose -keystore my-release-key.keystore "$1" alias_name 
```

您也可以在 Windows 中使用它，只需将 "$1" 替换为`../DialANumber/deploy/DialANumber.apk`.

我实际上无法解释为什么这个家伙在这里使用额外的脚本。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-18T21:07:08.637

我推荐使用 Eclipse 来签署 Android 应用程序。

因此，您必须为 Eclipse 安装 Android SDK 和插件。创建一个项目 - 完成后，右键单击您的项目并单击导出。

该向导允许您创建一个新的密钥库或使用现有的密钥库来签署您的应用程序。

我尝试使用 Ubuntu 使用控制台对应用程序进行签名，但这很难 - 使用 Eclipse 非常简单，导出向导会创建 .apk

# html - 动态响应调整图像大小

> ID：11090974
> 
> 赞同：0
> 
> 时间：2012-06-18T21:01:46.190
> 
> 标签：html, css, media, responsive-design

我开始使用响应式设计并阅读了如何威胁图像（动态）：

```
.midiv { width: 300px; float: left; }

.midiv img { max-width: 100%; max-height: 100%; } 
```

但是当我加载网站时，它会显示图像的完整尺寸，在完整网站下载后它适合 div 的大小。

我也在标题区域使用它：

```
js/modernizr-2.0.6.js
js/css3-mediaqueries.js 
```

我的做法可能有什么问题？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-19T14:32:00.867

很难确定您的代码库有什么问题，这也有助于查看您的 HTML。

通常，我会将您的 .midiv 设置为最大宽度：300px，然后将您的 .midiv img 设置为显示：内联。

# intellij-idea - Intellij IDEA 中的错误列表在哪里？

> ID：11090975
> 
> 赞同：12
> 
> 时间：2012-06-18T21:01:47.527
> 
> 标签：intellij-idea

我曾经在 Eclipse 中养成使用错误列表检查错误和警告的习惯。IntelliJ IDEA 中有类似的东西吗？我没看到。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-18T21:16:56.813

Eclipse 一直在增量构建整个项目，即使在您根本没有接触/打开的类中也会发现所有编译错误。

IntelliJ 不会在每次更改时构建您的整个代码库，因此没有这样的视图。您可以获得的最接近的是*消息*视图（在`Alt`+下可用`0`），但它仅显示在物理打开有错误的文件时（或在构建整个项目时）发现的编译错误。

# 更新

IntelliJ IDEA 12 很可能具有[增量编译功能](http://confluence.jetbrains.net/display/IDEADEV/IDEA+12+EAP)：

> 目前支持：Java增量编译、Groovy、资源复制、UI Designer表单、Artifacts、Android、注解处理、非空检测

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-11-22T08:41:27.320

也可以查看滚动条上的红色小条纹来查找文件中的错误所在的位置（它们不能降低使用的方便性：/）

# cakephp - CakePHP 自定义函数（但不是全局的）

> ID：11090977
> 
> 赞同：0
> 
> 时间：2012-06-18T21:01:58.123
> 
> 标签：cakephp, controller

我有一个处理翻译的模块。

它不绑定到任何数据库，文件纯粹是这样的：

```
$arr["key1"]="text";
... 
```

我需要进行 Ajax 调用才能编辑该文件。每次访问页面时都会导入该文件，以提供我需要的任何文本内容（它可能不是世界上最好的东西，但它可以完成工作，而且它应该非常快，因为没有“XML解析”之类的东西，它只是存储在标准的 .php 文件中）。

为了处理这些将具有添加/编辑操作等操作的 ajax 调用，我制作了一个无模型的 TranslationController：

```
class TranslationsController extends AppController {
    public $uses = array(); // Model-less
    public $components = array('RequestHandler');
    public $helpers = array('Session');
    protected $translationFilePath;

    public function setItem() {
    }

    public function backupFile() {
    }
} 
```

我的问题很简单：**我应该将用于打开/写入/查找文件的自定义函数放在哪里？**

例如，我有一个从正在读取的行中提取密钥的函数。

我看过一些帖子，建议我们将数据放在模型中，但在我的情况下，我没有模型，而且这些函数没有链接到数据。所以它不应该在模型中，对吧？**我不希望它是全球性的。**

感谢您的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-19T17:03:56.570

为什么不使用 CakePHP 自带的内置翻译工具，它基于或多或少标准的 gettext 工具？

您正在做的只是重新发明轮子，并且可能会提出一个未经测试的定制翻译实现，这显然缺乏 CakePHP 已经为您提供的功能。例如，您如何处理复数？

CakePHP 为您提供 __(), __d(), __n(), __dn() 用于翻译，翻译文件作为纯文本文件存储在 APP/Locale/ 中，并使用 poedit 进行编辑。

见[http://www.gnu.org/software/gettext/](http://www.gnu.org/software/gettext/)和[http://book.cakephp.org/2.0/en/core-libraries/internationalization-and-localization.html](http://book.cakephp.org/2.0/en/core-libraries/internationalization-and-localization.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-19T07:11:55.657

听起来像是自定义数据源的用例：http: [//book.cakephp.org/2.0/en/models/datasources.html](http://book.cakephp.org/2.0/en/models/datasources.html)。

就个人而言，我只会在`app/Lib`您的应用程序文件夹中创建一个普通的 PHP 类。

# sql-server-2008 - 对 sys.sql_modules 的查询不返回任何行

> ID：11090982
> 
> 赞同：1
> 
> 时间：2012-06-18T21:02:22.600
> 
> 标签：sql-server-2008

奇怪的是，这在几周前就奏效了。我需要在所有存储过程中找到某个短语出现的所有实例。我们有数百个存储过程，所以我想用 SQL 告诉我它们都在哪里。我正在使用这个语句：

```
SELECT DISTINCT
o.name, o.type_desc
FROM sys.sql_modules m
JOIN sys.objects o ON m.object_id = o.object_id
WHERE m.definition LIKE '%view_cu_Account_Bills_b%' 
```

问题是返回零行。问题似乎与 sys.sql_modules 相关，如下查询：

```
SELECT TOP 5 * 
FROM sys.sql_modules 
```

还包含零行。在拥有数百个存储过程的数据库中，为什么 sys.sql_modules 中没有任何内容？我在 MS SQL Server 设置中遗漏了什么吗？（我使用的是 2008 版）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2016-05-11T11:51:01.977

是的，正如 Martin Smith 建议的那样，首先确保您的查询位于正确的数据库上下文中：

```
USE YOUR_DATABASE_NAME; 
```

否则，以下查询将不会返回任何内容：

```
SELECT TOP 5 * 
FROM sys.sql_modules; 
```

# django - 如何使用 ForeignKeys 建立模型链/树

> ID：11090983
> 
> 赞同：0
> 
> 时间：2012-06-18T21:02:23.927
> 
> 标签：django, django-models, foreign-keys, dry

我不知道我是否正确地表达了这个问题。如果我应该将其称为其他名称，请随时发表评论。

但这是我想要完成的，一些模型的层次结构如下：

```
Page <--- SubPage.1 <--- SubPage.1.1 <--- SubPage.1.1.1 ...
  |__________|                 ^                           ...and so on
  |                            |-- SubPage.1.1.2 ...
  |                            
 tags #m2m or some other object
      #with foreign key relation 
```

其他一些属性：

1.  子页面包含页面拥有的所有相同信息
2.  所有指向 Page 的外键和 m2m 字段也适用于 SubPage
3.  我希望能够快速访问父子页面和根页面而没有太多的数据库命中

那么坚持 DRY 理念的最佳方式是什么？

这就是我所拥有的：

```
class Page(models.Model):
    ....

class SubPage(Page):
    parent = models.ForeignKey('self', related_name = 'subpage_set', blank = 'True')
    root = models.ForeignKey(Page, related_name = 'rootpage_set') 
```

我不喜欢这种方式，但有几个原因。1) SubPage.root 是重复的，它只是在那里快速找到`Page`。2）保存`SubPage`对象也保存`Page`对象，我想将它们分开。

感谢您的帮助，谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-18T21:07:45.040

使用[django-mptt](https://github.com/django-mptt/django-mptt/)或[django-treebeard](https://tabo.pe/projects/django-treebeard/)。我个人更喜欢 django-mptt，但它们都是可以很好地处理关系层次结构的成熟项目。

# android - 需要使用 API 向 Google 地方信息添加位置。无法添加地址？

> ID：11090985
> 
> 赞同：0
> 
> 时间：2012-06-18T21:02:24.823
> 
> 标签：android, google-places-api

我有一个 android 应用程序可以毫无问题地向 google Places API 添加地点。我的应用程序还接收其他用户添加的地点。令我沮丧的是，我意识到添加地点时，没有办法包含地址，只有经度和纬度。我曾怀疑 Google 会在请求该地点时提供地址，但遗憾的是，“vincinity”值不包含在从该位置的 good 返回的 JSON 中。

我想我可以自己获取 lat 和 lng，然后进行地理编码（反向地理编码？.. API 文档通过了几次.. 我想如果有人知道一个小技巧，他们会在这个网站上（当然）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-19T00:54:13.593

'vicinity' 参数只有在地方报告请求被审核后才会返回。

目前只有少数受信任的应用程序提交的地方报告请求被审核以集成到 Google 地方信息中。我们仍在努力简化审核流程，以尽量减少垃圾邮件、不正确和重复的位置结果。

最好的选择是对返回的 lat lng 进行反向地理编码。

# c# - 将 Properties.Settings 绑定到文本框失败

> ID：11090990
> 
> 赞同：0
> 
> 时间：2012-06-18T21:02:49.193
> 
> 标签：c#, .net, wpf, data-binding

我想在 Settings.settings 中定义一个键和值，并通过 XAML 中*的声明*绑定值（而不是在命令后面的代码中）。

这是我一直在徒劳的尝试：

1.  使用 Visual Studio Express 2010 创建一个 WPF 项目“Exp1”。
2.  将一个名为“TextFromSettings”的键设置为值“Some Text from Setting”。
3.  将属性添加`xmlns:p="clr-namespace:Exp1.Properties;assembly=Exp1"`到标签。
4.  添加`Text="{Binding Path=TextFromSettings, Mode=TwoWay, Source={x:Static p:Settings.Default}}"`到标签

现在，预览窗口显示文本，但是编译器失败：

*“错误 1 ​​找不到类型‘设置’。请注意，类型名称区分大小写。”*

我哪里错了？

![在此处输入图像描述](../Images/7a6bc8f957f2da65d754d1aa0e01d5b8.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-18T21:14:03.533

Drop the `;assembly=Exp1` it's not allowed for references to the current assembly.

If anything it should be `;assembly=`, see [MSDN](http://msdn.microsoft.com/en-us/library/ms747086.aspx).

> **assembly** can be omitted if the **clr-namespace** referenced is being defined within the same assembly as the application code that is referencing the custom classes. Or, an equivalent syntax for this case is to specify **assembly=**, with no string token following the equals sign.

# javascript - 如何检索#div 的真实高度（包括溢出部分）

> ID：11090991
> 
> 赞同：1
> 
> 时间：2012-06-18T21:02:52.087
> 
> 标签：javascript, jquery, css, jquery-ui

与我使用它来检测用户何时向下浏览整个页面的方式相同：

```
 $(window).scroll(function(){
    var diff = $(window).scrollTop() + $(window).height() - $(document).height();
    if  ($(window).scrollTop() == $(document).height() - $(window).height()   || (diff < 5 && diff > -5)){
           console.log('yay!');
    }
 }); 
```

我想在对话框中做同样的事情，

我正在尝试这样：

```
$('#dialog').dialog();
$('#dialog').scroll(function(){
     var scroll = $('#dialog').scrollTop();
    var height = $('#dialog ul').outerHeight(true);
    if(scroll == height){
         $('#dialog').css('background','#999');
    }else{
        console.log('scrolltop is '+scroll+' and height is: '+height);
    }
}) 
```

演示：

[http://jsfiddle.net/AgFXz/](http://jsfiddle.net/AgFXz/)

我猜的问题是我没有检索整个#dialog 大小，而是可见（CSS 定义的属性）大小..

我怎么知道用户何时滚动到对话框滚动结束？

谢谢！！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-18T21:12:23.603

Use `$('#dialog ul')[0].scrollHeight` to get the scroll height of the element and then subtract the actual height `$('#dialog ul').outerHeight(true);` to know when the user has scrolled to the bottom.

```
var height = $('#dialog ul')[0].scrollHeight - $('#dialog ul').outerHeight(true); 
```

[DEMO](http://jsfiddle.net/AgFXz/1/)

This is what the console log says (I click the down arrow each time)

```
scrolltop is 40 and height is: 250
scrolltop is 80 and height is: 250
scrolltop is 120 and height is: 250
scrolltop is 160 and height is: 250
scrolltop is 200 and height is: 250
scrolltop is 240 and height is: 250 
```

At the end, both `scroll` and `height` are 250\. This doesn't show in the log but if you check it manually you'll see.

```
$('#dialog').scrollTop();
250 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-18T21:14:27.723

Have you tried scrollHeight property?

[https://developer.mozilla.org/en/DOM/element.scrollHeight](https://developer.mozilla.org/en/DOM/element.scrollHeight)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-18T21:20:41.793

正如每个人都注意到的那样，您应该使用`scrollHeight`.
但是您的演示中还有另一个问题：

```
#dialog ul{
    height:150px;
} 
```

当然`$('#dialog ul').outerHeight(true)`，`$('#dialog ul').innerHeight()`甚至`$('#dialog ul')[0].scrollHeight`等于 150。

你需要检查溢出元素的滚动高度，所以使用`$('#dialog')[0].scrollHeight`

# c# - c#datagridview的checkbox是否有事件

> ID：11090996
> 
> 赞同：0
> 
> 时间：2012-06-18T21:03:09.373
> 
> 标签：c#, events, datagridview, datagridviewcheckboxcell

我想知道每次有人检查datagridview的复选框时是否有一个事件。

我的目标是计算检查了多少行，但我希望每次用户检查时都刷新计数，这就是为什么我想知道您所做的每次检查是否都有一个事件。（就像在普通复选框中一样，checkBox_CheckedChanged）

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-18T21:07:07.017

不，没有（据我所知），但您可以使用这个简单的解决方法：

```
private void dgAreas_CellContentClick(object sender, DataGridViewCellEventArgs e)
{
    IsChecked = (bool)dgAreas[e.ColumnIndex, e.RowIndex].EditedFormattedValue
    ...

} 
```

您必须收听 CellContentClick 事件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-18T22:06:40.083

试试这个：

```
private void dataGridView1_CellContentClick(object sender, DataGridViewCellEventArgs e) {
    //Closing current edited cell (for prevent problems)
    this.dataGridView1.EndEdit();
    //Retrive the datasource from the gridView in a DataTable (in this case, i use a DataSource with Visual Studio Wizard
    DataTable source = ((DataSet)((BindingSource)this.dataGridView1.DataSource).DataSource).Tables[0];
    //The magic code line ("IdCierre is my checkeable field" in the grid). I use Linq
    this.label_contador.Text = source.AsEnumerable().Where(x => x.Field<bool>("IdCierre") == true).Count().ToString();
} 
```

# ios - 在使用帧 0,0,0,0 初始化的故事板中创建的 ScrollView

> ID：11090999
> 
> 赞同：6
> 
> 时间：2012-06-18T21:03:15.877
> 
> 标签：ios, uiscrollview, storyboard

我在情节提要中创建了一个 UIScrollView，将其作为属性链接到视图控制器，现在我正在尝试添加一些带有分页的子视图。但是，即使我以图形方式在情节提要中设置了尺寸，UIScrollView 的框架最终还是 0,0,0,0。即使我已经在情节提要中以图形方式指定了尺寸，我是否需要对尺寸进行硬编码？

另外，有点相关，是否可以自定义情节提要中的子视图以在此滚动视图中使用？除非它已经在控制器中，否则我似乎无法创建这样的视图。由于我只有一个控制器，并且可能有多个视图，我想以图形方式设置，我该如何做到这一点而不必以编程方式这样做？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-01-10T19:00:13.183

使用故事板**viewDidLayoutSubviews**可以获取所有视图的大小。**viewWillAppear**对我不起作用并且总是返回 (0,0,0,0);

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-15T21:38:23.657

使用情节提要，控制器的出口在 viewDidLoad 之前未连接，并且直到 viewWillAppear 才设置其大小，请参见此处：

[http://cs193p.m2m.at/lecture-8/](http://cs193p.m2m.at/lecture-8/)

> 一旦控制器完全实例化并且它的出口被连接起来， viewDidLoad: 就会被调用。因此，这是放置设置代码的好地方。然而，控制器的大小还没有设置，而是在 viewWillAppear: 中，它在视图出现在屏幕上之前被调用。

所以我认为 Enricos 的建议是正确的。只需尝试将与大小相关的内容放入 viewWillAppear。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-10T02:37:49.697

我发现当我访问 中的滚动视图时`viewWillAppear`，框架实际上会给出正确的数字。我以前试过这个，`awakeFromNib`也`viewDidLoad`得到了`0,0,0,0`框架。

奇怪的是，在 Storyboard 之前，您可以在 awakeFromNib 中获得正确的框架尺寸。这方面的一个例子是 Apple 的示例代码[PageControl](http://developer.apple.com/library/ios/#samplecode/PageControl/Introduction/Intro.html)之一。

所以简而言之，要回答这个问题，请尝试从`viewWillAppear`（假设您在 Storyboard 中创建 UIScrollView）访问它。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-08-09T06:55:41.033

这很简单：在情节提要设置中禁用*使用自动布局。*

![在情节提要设置中禁用使用自动布局（红色矩形）](../Images/6252759ad81785193eac823bff40e06c.png)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-10T02:09:58.577

您可能在尚未设置视图的行上设置断点。尝试这个：

```
- (id)initWithCoder:(NSCoder *)coder
{
    self = [super initWithCoder:coder];
    if (self) {
        CGRect frame = self.scrollView.frame;
        NSLog (@"FRAME IS %@", NSStringFromCGRect(frame));
    }
    return self;
} 
```