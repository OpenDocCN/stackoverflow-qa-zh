# StackOverflow 问答 11038000-11038999

# javascript - 不会崩溃浏览器的高效 Javascript 组合功能

> ID：11038001
> 
> 赞同：0
> 
> 时间：2012-06-14T17:05:35.843
> 
> 标签：javascript, optimization, combinations, performance, memory-efficient

我有一个程序，它涉及以下函数，用于计算给定数组的所有可能组合：

```
function combinations(arr, k) {
var i,
subI,
sub,
combinationsArray = [],
next;
for (i = 0; i < arr.length; i++) {
    if (k === 1) {
        combinationsArray.push([arr[i]]);
    } else {
        sub = combinations(arr.slice(i + 1, arr.length), k - 1);
        for (subI = 0; subI < sub.length; subI++) {
            next = sub[subI];
            next.unshift(arr[i]);
            combinationsArray.push(next);
        }
    }
}
return combinationsArray;
}; 
```

例如：

```
 combinations([1,2,3],2); 
```

返回：

```
[[1,2],[1,3],[2,3]] 
```

我在我的程序中经常使用它，特别是带有 12 个对象的数组参数，以从该数组返回两个对象的所有可能组合。有 66 种可能的组合。在我的程序中，我需要经常检查此函数返回的数组的对象元素的属性值，对它们进行比较，对它们运行条件等。但是当我调用使用这样的组合函数的函数时，浏览器会崩溃（ firefox 返回消息：“此页面上的脚本可能正忙，或者可能已停止响应。您可以立即停止脚本，在调试器中打开脚本，或者让脚本继续。”）它始终是上面的组合函数被调用，它崩溃了。

我发现了这个：[http](http://www.nczonline.net/blog/2009/01/13/speed-up-your-javascript-part-1/) ://www.nczonline.net/blog/2009/01/13/speed-up-your-javascript-part-1/ 这是提高调用代码效率的好方法重复函数（例如在组合函数中）。

如何有效地将组合功能与 ncsonline 的方法集成以阻止浏览器崩溃？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-14T17:10:01.640

这是使用[web workers](https://developer.mozilla.org/En/Using_web_workers)的一个很好的选择，它在一个单独的线程上运行你的代码。

这样，您就不会通过密集计算锁定 UI 线程（这就是您现在看到的）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-14T17:37:16.050

为什么要构建数组？您可以遍历所有组合并在循环内完成工作吗？这应该会大大加快您的逻辑并让您适应浏览器强加的限制。

# wordpress - Wordpress - “解析错误语法错误意外”？

> ID：11038004
> 
> 赞同：0
> 
> 时间：2012-06-14T17:05:39.650
> 
> 标签：wordpress, parsing, syntax

我在functions.php 中添加了一些内容，现在我的网站已关闭。我什至无法访问仪表板部分。

问题是我安装了一个缓存插件。如何禁用它？

网站是：（已删除）

请帮忙！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-14T17:18:43.730

如果您不显示您在functions.php 中所做的更改，那就没那么容易了

该错误`Parse error: syntax error, unexpected '}' in /public_html/wp-content/themes/imbalance2/functions.php on line 225`表明存在简单的语法错误。你确定所有的左括号和右括号都正确吗

使用以下查询禁用所有 WordPress 插件：

```
UPDATE wp_options SET option_value = '' WHERE option_name = 'active_plugins'; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-16T00:11:03.620

问题是切换到 VPS 后，我仍然使用 FTP 连接到旧文件。修好了，一帆风顺。

# c - 与按位运算混淆 | 和 <<

> ID：11038005
> 
> 赞同：3
> 
> 时间：2012-06-14T17:05:47.410
> 
> 标签：c, bit-manipulation

```
unsigned long long n = 0;
for (int i = 0; i <= 64; i+=2)
    n |= 1ULL << i;       //WHAT DOES THIS DO? AH! 
```

我试图围绕这段代码的第三行实际做了什么。有人请帮助清除这个！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-14T17:08:31.653

该行设置 n 的第 i^位。

*   `1ULL`是整数 1，类型为 unsigned long long。
*   `<<`是位移运算符。`1ULL << i`等于 2 ^i，或二进制：`100...0`i 零。
*   `n |= x;`是复合赋值运算符。它类似于写作`n = n | x;`。
*   运算符`|`是按位或运算符。

Wikipedia 有一个示例显示按位 OR 运算符在一般情况下的工作原理：

```
 0101 (decimal 5)
OR 0011 (decimal 3)
 = 0111 (decimal 7) 
```

**有关的**

*   [什么是按位移位（bit-shift）运算符，它们是如何工作的？](https://stackoverflow.com/questions/141525/absolute-beginners-guide-to-bit-shifting)
*   [位运算](http://en.wikipedia.org/wiki/Bitwise_operation)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-14T17:09:50.440

简单的`|= 1ULL << i`意思是设置第`i`th 位。for 每隔一个位循环一次，因此 64 位 unsigned long long 中的每个其他位都将设置为 1。

换句话说，你会得到一个有点像`...0101010101`.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-14T17:09:51.363

它将 1 左移 i 个位置，并将结果与​​ n 进行或运算。实际上它是在 n 中设置第 i 位。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-14T17:10:11.510

它二进制或 n 与值 1 位移 i 的值。

我相信 n 的（二进制）值将是：

0101010101010101010101010101010101010101010101010101010101010101

当循环完成时，虽然我还没有测试过..

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-06-14T17:13:59.920

```
n |= 1ULL << i;       //WHAT DOES THIS DO? AH! 
```

在右手边你有`"1ULL" which is a constant 1 unsigned long long`。你是`left bit shifting "1ULL" i number of times`。然后将“1ULL”左移的结果与 n 匹配以执行按位或。所以`n will be set to (n | (1ULL << i))`。

这整行或操作将 n 的第 i 位设置为 1。

# html - 形式：基于类别的子类别

> ID：11038015
> 
> 赞同：0
> 
> 时间：2012-06-14T17:06:29.030
> 
> 标签：html, forms

我正在尝试使用两个下拉选择菜单制作表单：一个选择类别，另一个选择子类别。我正在努力做到这一点，因此子类别选项基于他们首先选择的类别，我不知道从哪里开始，谷歌搜索让我空手而归。谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-14T17:13:03.073

搜索级联下拉菜单。这将需要一些 JavaScript 或者一些服务器端代码，但是使用这个搜索词你会发现很多......

并从这里开始[http://archive.plugins.jquery.com/plugin-tags/drop-down](http://archive.plugins.jquery.com/plugin-tags/drop-down)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-14T17:20:18.613

这就是您想要的：请注意，这仅使用 html 和纯 javascript。是的，您也可以使用 JQuery。

```
<html>
<head>

<script language="javascript" type="text/javascript">
function dropdownlist(listindex)
{

document.formname.subcategory.options.length = 0;

switch (listindex)
{
    case "category1" :
        document.formname.subcategory.options[0]=new Option("subcategory1.1","value1.1");
        document.formname.subcategory.options[1]=new Option("subcategory1.2","value1.2");
        document.formname.subcategory.options[2]=new Option("subcategory1.3","value1.3");
        break;

    case "category2" :
        document.formname.subcategory.options[0]=new Option("subcategory2.1","value2.1");
        document.formname.subcategory.options[1]=new Option("subcategory2.2","value2.2");
        document.formname.subcategory.options[2]=new Option("subcategory2.3","value2.3");
        break;

    case "category3" :
        document.formname.subcategory.options[0]=new Option("subcategory3.1","value3.1");
        document.formname.subcategory.options[1]=new Option("subcategory3.2","value3.2");
        document.formname.subcategory.options[2]=new Option("subcategory3.3","value3.3");
        break;

    default:
        document.formname.subcategory.options[0]=new Option("Select Category")
        break;
}
return true;
}
</script>
</head>

<title>Dynamic Drop Down List</title>

<body>

<form id="formname" name="formname" method="post" action="submitform.asp" >
<table width="50%" border="0" cellspacing="0" cellpadding="5">
<tr>
<td width="41%" align="right" valign="middle">Category :</td>
<td width="59%" align="left" valign="middle"><select name="category" id="category" onchange="dropdownlist(this.options[this.selectedIndex].value);">
<option value="">Select Category</option>
<option value="category1">category 1</option>
<option value="category2">category 2</option>
<option value="category3">category 3</option>
</select></td>
</tr>
<tr>
<td align="right" valign="middle">Sub Category :
</td>
<td align="left" valign="middle"><script type="text/javascript" language="JavaScript">
document.write('<select name="subcategory"><option value="">Select Sub-Category</option></select>')
</script>
<noscript><select name="subcategory" id="subcategory" >
<option value="">Select Sub-Category</option>
</select>
</noscript></td>
</tr>
</table>

</form> 

</body>
</html> 
```

# c# - C# 正则表达式到 NSRegularExpression

> ID：11038021
> 
> 赞同：1
> 
> 时间：2012-06-14T17:06:46.183
> 
> 标签：c#, regex

我有以下正则表达式，它可以让我获得创建索引语句的表名和列详细信息：

```
 Regex r = new Regex(@"create\s*index.*?\son\s*\[?(?<table>[\s\w]*\w)\]?\s*\((?:(?<cname>[\s\d\w\[\]]*),?)*\)", RegexOptions.Compiled | RegexOptions.IgnoreCase); 
```

我想在 Objective-C 中使用它。我尝试了以下方法：

```
 NSError * error = nil;
            NSRegularExpression *regex = [NSRegularExpression regularExpressionWithPattern: @"create\\s*index.*?\\son\\s*\\[?([\\s\\w]*\\w)\\]?\\s*\\((?:([\\s\\d\\w\\[\\]]*),?)*\\)"
                                                                                   options: NSRegularExpressionCaseInsensitive | NSRegularExpressionSearch
                                                                                     error: &error];
            if(nil != error)
            {
                NSLog(@"Error is: %@. %@", [error localizedDescription], error);
            }

            NSRange rangeOfFirstMatch = [regex rangeOfFirstMatchInString: createStatement options:0 range: NSMakeRange(0, [createStatement length])];

            NSArray *matches = [regex matchesInString: createStatement
                                              options: 0
                                                range: NSMakeRange(0, [createStatement length])]; 
```

这部分有效。它给了我三个范围。第一个包含整个字符串，第二个包含表名。问题是第三个是空的。

有人知道我哪里出错了吗？

编辑：我要解析的字符串是： CREATE INDEX cardSetIndex ON [card] (cardSetId ASC)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-14T18:58:43.060

您似乎遇到的问题是第二个捕获组被`(?: )*`. 由于它是可选的，它总是空白的。

你的正则表达式：

```
 create\s*index.*?\son\s*
 \[?
     ( [\s\w]*\w )
 \]?\s*
 \(
     (?:
        ( [\s\d\w\[\]]* )
        ,?
     )*
 \) 
```

将其更改为：

```
 create\s*index.*?\son\s*
 \[?
    ( [\s\w]*\w )
 \]?
 \s*
 \(
    (
      (?: [\s\d\w\[\]]* ,? )*
    )
 \) 
```

压缩和转义：

```
create\\s*index.*?\\son\\s*\\[?([\\s\\w]*\\w)\\]?\\s*\\(((?:[\\s\\d\\w\\[\\]]*,?)*)\\) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-14T17:46:34.923

你的问题对于你真正想要抓住的东西有点模糊，而且那个正则表达式非常粗糙，所以我无法从中收集到它。

`CREATE\s*INDEX\s*(\w+)\s*ON\s*(\[\w+\])\s*\((.+)\)`

这将获取第 1 组中的表名、第 2 组中的 ON 属性以及第 3 组中的以下属性。

# macos - 重新安装 Homebrew 的最佳/最安全方法是什么？

> ID：11038028
> 
> 赞同：100
> 
> 时间：2012-06-14T17:07:21.613
> 
> 标签：macos, homebrew

我在 Homebrew 中遇到权限问题：在我安装 Node 并尝试使用 Homebrew 告诉您使用的 curl 命令安装 npm 后，由于 EACCESS 错误，它会失败。我检查了节点文件夹，权限是a）用户不拥有（我必须chown）和b）没有写权限（我必须chmod 755）。

我已经解决了 NPM 的问题，但我不得不将其安装脚本作为 sudo 运行（这很糟糕！）。

我假设我必须以 root 或类似的身份安装 Homebrew。我希望重新安装能解决它，但我找不到如何重新安装 Homebrew 的来源。

当我在终端中重新运行安装程序时，我得到：

```
/usr/local/.git already exists! 
```

* * *

## 回答 #1

> 赞同：149
> 
> 时间：2016-04-16T05:02:44.790

*更新 2020 年 10 月 11 日以反映最新的 brew 更改。*

`Brew`已经提供了一个自行卸载的命令（这将**删除**您使用 Homebrew 安装的所有内容）：

```
/bin/bash -c "$(curl -fsSL https://raw.githubusercontent.com/Homebrew/install/master/uninstall.sh)" 
```

如果由于权限（例如以第二个用户身份运行）而无法运行此命令，请使用**sudo再次运行**

然后你可以再次安装：

```
/bin/bash -c "$(curl -fsSL https://raw.githubusercontent.com/Homebrew/install/master/install.sh)" 
```

* * *

## 回答 #2

> 赞同：52
> 
> 时间：2014-03-16T16:54:49.513

过程是清理然后使用以下命令重新安装：

```
rm -rf /usr/local/Cellar /usr/local/.git && brew cleanup
ruby -e "$(curl -fsSL https://raw.githubusercontent.com/Homebrew/install/master/install )" 
```

笔记：

*   `curl | bash (or ruby)`在运行命令之前始终检查命令
*   [http://brew.sh/](http://brew.sh/)（用于安装说明）
*   [https://raw.githubusercontent.com/Homebrew/install/master/install](https://raw.githubusercontent.com/Homebrew/install/master/install)（有关清理说明，请参阅“Homebrew 已安装”）

* * *

## 回答 #3

> 赞同：48
> 
> 时间：2012-06-14T17:15:19.957

尝试运行命令 `brew doctor` ，让我们知道你得到什么样的输出

编辑：并回答标题问题，这是来自他们的[常见问题解答](https://github.com/mxcl/homebrew/wiki/FAQ)：

> Homebrew 不会在其前缀之外写入文件。所以通常你可以只`rm -rf`安装它的文件夹。

因此，在此之后进行干净的重新安装（按照他们最新推荐的步骤）应该是您最好的选择。

* * *

## 回答 #4

> 赞同：10
> 
> 时间：2019-07-07T11:51:52.967

**适用于 Mac OS X Mojave 及更高版本**

要卸载 Homebrew，请运行以下命令：

```
sudo ruby -e "$(curl -fsSL https://raw.githubusercontent.com/Homebrew/install/master/uninstall)" 
```

要安装 Homebrew，请运行以下命令：

```
ruby -e "$(curl -fsSL https://raw.githubusercontent.com/Homebrew/install/master/install)" 
```

如果您遇到 Permission denied 问题，请尝试运行此命令，然后再次运行 install 命令：

```
sudo chown -R $(whoami):admin /usr/local/* && sudo chmod -R g+rwx /usr/local/* 
```

* * *

## 回答 #5

> 赞同：9
> 
> 时间：2013-03-29T15:17:40.420

重新安装 Homebrew 的方法是完全删除它并重新开始。[Homebrew FAQ](https://docs.brew.sh/FAQ#how-do-i-uninstall-homebrew)有一个指向用于卸载Homebrew的[shell 脚本的链接。](https://github.com/homebrew/install#uninstall-homebrew)

如果您安装的唯一东西`/usr/local`是自制软件本身，您可以`rm -rf /usr/local/* /usr/local/.git`将其清除。但`/usr/local/`它是所有额外二进制文件的标准 Unix 目录，而不仅仅是 Homebrew，所以你可能在那里安装了其他东西。在这种情况下[`uninstall_homebrew.sh`](https://gist.github.com/mxcl/1173223)是一个更好的选择。小心只删除自制软件的文件，而不要管其余的。

* * *

## 回答 #6

> 赞同：4
> 
> 时间：2021-03-25T17:38:29.500

对我来说，我需要执行以下步骤**从头开始****重新安装**brew 。

 **```
sudo rm -rf /usr/local/Cellar/
brew cleanup
sudo rm -rf $(brew --repo)
/bin/bash -c "$(curl -fsSL https://raw.githubusercontent.com/Homebrew/install/HEAD/install.sh)" 
```

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2017-07-09T10:26:54.630

对我来说，这个在没有 sudo 访问权限的情况下工作。

ruby -e "$(curl -fsSL [https://raw.githubusercontent.com/Homebrew/install/master/install](https://raw.githubusercontent.com/Homebrew/install/master/install) )"

更多参考请关注 [https://gist.github.com/mxcl/323731](https://gist.github.com/mxcl/323731)

[![在此处输入图像描述](../Images/3b3f1069b12c9d070610ac5f1501c9ac.png)](https://i.stack.imgur.com/vNLe6.png)**

# objective-c - If 语句可以判断分配是否有效？

> ID：11038031
> 
> 赞同：0
> 
> 时间：2012-06-14T17:07:53.020
> 
> 标签：objective-c, ios, if-statement

我有一个对象，如果成功则返回一个值，如果失败则返回 false（或 nil）。

我想将该值分配给一个变量

```
if(var1 = [object foo])
{
    //if the [object foo] returned a variable, goes here
}
else
{
    //[object foo] returned FALSE (or nil), go here
} 
```

If 语句是否可以检测分配是否有效？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-14T17:16:25.087

这没关系，但会产生警告，因为这是一个常见的错字（`=`而不是`==`）。要使该警告静音，请添加另一组括号，如下所示：

```
if ((var = [object foo])) ... 
```

由于这很容易导致误解，因此很多人会建议不要这样做。对于一个简单`if`的语句，首先进行分配要清楚得多：

```
var = [object for];
if (var) ... 
```

在`while`循环中，这更有用，但也被许多人认为是有害的。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-14T17:21:54.960

不确定我是否理解您的问题，但让我尝试解释一些您可以检查的情况

**1) 属性包含值**

```
if ([object foo])
{
    // If foo has a value associated to it that is not nil/false/zero
}
else
{
    // If foo equals nil, false or zero
} 
```

**2) 变量赋值成功**

```
if ((bar = [object myMethod]))
{
    // If myMethod returns any non-nil value
}
else
{
    // If myMethod returns nil
} 
```

**3) 之前的变量赋值成功**

```
bar = [object myMethod];

if (bar)
{
    // If bar has a value associated to it that is not nil/false/zero
}
else
{
    // If bar equals nil, false or zero
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-14T17:12:20.207

在 if 语句中使用`==`而不是。`=`

在 if 语句之前，您可能会`var1 = [object foo]` [看到比较运算符](http://www.techotopia.com/index.php/Objective-C_Operators_and_Expressions)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-14T17:13:12.703

如果您的意思是valid 变量包含预期结果，您可以针对预期结果对变量执行另一个if，或者null 来检查它。

# iphone - Objective-c：在数组中分配变量而不是字符串

> ID：11038035
> 
> 赞同：2
> 
> 时间：2012-06-14T17:08:18.197
> 
> 标签：iphone, objective-c, arrays, string, variables

我想在下面的代码中分配一个变量而不是字符串。首先，我从逗号分隔的目录列表创建一个数组。接下来对于数组中的每个目录，如果它们不存在，我想创建它们。

我如何从数组中分配目录而不是：@“templates/standard1/css” 我试过用 s 替换它，但没有成功。我可以 NSlog s，但它似乎没有创建目录。

```
NSArray *paths = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES);
NSString *documentsDirectory = [paths objectAtIndex:0];

NSString *theString = @"templates, templates/standard1, templates/standard1/css, themes, themes/plain, themes/plain/384";
NSArray *items = [theString componentsSeparatedByString:@","];
for (NSString *s in items) {
    NSString *dataPath = [documentsDirectory stringByAppendingPathComponent:@"templates/standard1/css"];
    if (![[NSFileManager defaultManager] fileExistsAtPath:dataPath]) {
        // Directory does not exist so create it
        [[NSFileManager defaultManager] createDirectoryAtPath:dataPath withIntermediateDirectories:YES attributes:nil error:nil];
    }

} 
```

任何帮助，将不胜感激 ：）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-14T18:09:30.850

我认为这些空间正在困扰您的目录。您将每个目录用“，”分隔，但正在搜索“，”（没有空格）。您可以从 中取出空格`theString`，也可以使用“，”作为分隔符，以使用字符串！！！

所以要么改变

```
NSString *theString = @"templates, templates/standard1, templates/standard1/css, themes, themes/plain, themes/plain/384"; 
```

对此

```
NSString *theString = @"templates,templates/standard1,templates/standard1/css,themes,themes/plain,themes/plain/384"; 
```

或者改变这个：

```
NSArray *items = [theString componentsSeparatedByString:@","]; 
```

对此：

```
NSArray *items = [theString componentsSeparatedByString:@", "]; 
```

但不是两者都有！！！

# c++ - 模板转换运算符，需要'const'关键字

> ID：11038036
> 
> 赞同：0
> 
> 时间：2012-06-14T17:08:20.583
> 
> 标签：c++, templates, casting, constants

我有一个模板类，称为`OneCell`，这里的定义：

```
template <class T>
class OneCell
{
.....
} 
```

我有一个从`OneCell`到 T 的演员表操作员，在这里

```
operator T() const
{
    getterCount++;
    return value;
} 
```

如您所见，我想在此方法中增加变量，但由于关键字`const`.

另一方面，如果我删除此关键字，则转换根本不起作用。

我能做些什么？

谢谢你，对我糟糕的英语感到抱歉。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-14T17:10:50.090

实际上`operator T() const`是一个*const 成员*函数，其中的`this`指针指向一个`const`对象，这反过来也产生了*getterCount* `const`。

解决方法是声明`getterCount`为mutable，如下图：

```
mutable size_t getterCount; 
```

现在`getterCount`可以在 const 成员函数中递增，这也意味着，即使对象是，它也可以递增`const`：

```
void f(OneCell const & cell)
{
    //incrementing getterCount!
    ++cell.getterCount; //ok, even though cell is const!
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-14T17:10:37.697

> 如您所见，我想在此方法中增加变量，但由于关键字 const 出现错误。另一方面，如果我删除此关键字，则转换根本不起作用。

它会起作用，但仅适用于`OneCell`.

> 我能做些什么？

去吧`mutable`，假设你改变了*按位常数*而不是*逻辑常数*。

```
mutable int getterCount; 
```

# c# - 将 OrderBy 表达式与 Where 表达式结合

> ID：11038048
> 
> 赞同：5
> 
> 时间：2012-06-14T17:08:52.183
> 
> 标签：c#, linq, expression, linq-expressions

我发现以下可以组合多个`Expression<Func<T,bool>>`表达式的问题：

[如何在没有调用的情况下合并两个 C# Lambda 表达式？](https://stackoverflow.com/questions/1131869/how-to-merge-two-c-sharp-lamba-expressions-without-an-invoke)

我想知道是否使用类似的技术将 .OrderBy`Expression<Func<Entity, Key>>`与 .Where合并`Expression<Func<Entity, bool>>`到一个类型的表达式中，或者从类型继承，`System.Linq.Expressions.Expression`.

我正在制作一个非常精简的 QueryProvider 风格的类，用于`T => T == ...`通过公共方法`.Where`和`.OrderBy`. 这是为了将此类构建的表达式传递给 QueryTranslator 以创建合适的 SQL。

这种风格的 QueryTranslator 在从 QueryProvider 调用时，通常将一个`System.Linq.Expressions.Expression`作为参数，然后将其转换为 SQL。

我可以理解并理解上述合并两个`.Where`Funcs 的问题。以下博客文章对此特别有用，我跟踪了每个示例：

[http://blogs.msdn.com/b/meek/archive/2008/05/02/linq-to-entities-combining-predicates.aspx](http://blogs.msdn.com/b/meek/archive/2008/05/02/linq-to-entities-combining-predicates.aspx)

这篇 CodeProject 文章也很有用：

[http://www.codeproject.com/Articles/24255/Exploring-Lambda-Expression-in-C](http://www.codeproject.com/Articles/24255/Exploring-Lambda-Expression-in-C)

但是，当将 .OrderBy Func 与 .Where Func 结合使用时，两者具有不同的通用参数。在 .Where 的情况下是 a `Func<Entity, bool>`，在 .OrderBy 的情况下是 a `Func<Entity, Key>`。

从表面上看，合并这两个表达式并不像合并两个具有相同通用参数的表达式那么简单。

内置的 Func-Expression-production-engine（不确定确切的术语）能够将 .Where Func 与 .OrderBy Func 结合起来。当这两个表达式合并为一个时，我很好奇引擎盖下会发生什么`System.Linq.Expressions.Expression`。是否有可能，如果是这样，您将如何将 an`Expression<Func<Entity, bool>>`与`Expression<Func<Entity,Key>>`假设 Entity 在每个表达式中的类型相同？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-14T19:28:25.417

```
public IQueryable<T> ApplyExpressions<T, TKey>(
  Expression<Func<T, TKey>> sortBy,
  Expression<Func<T, bool>> filterBy,
  IQueryable<T> source)
{
  return source.Where(filterBy).OrderBy(sortBy);
}

IQueryable<Customer> query = ApplyExpressions<Customer, int>(
  c => c.Age,
  c => c.Name.StartsWith("B"),
  myDC.Customers)

Expression queryExpression = query.Expression;  //tada 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-15T16:31:23.637

我认为这个问题之所以模棱两可，是因为它有点无法回答。

我正在尝试构建一个超级表达式，例如`IQueryable<>`表达式构建器如何在一个表达式中使用`.Where`和`.OrderBy`表达式。

但是，如果没有主题，我对表达式和表达式树的有限理解似乎表明这是不可能的。

要将`.Where`表达式与`.OrderBy`表达式组合成一个表达式，您需要 `MethodCallExpression`' 来分隔两个`LambdaExpression`s。

`MethodCallExpression`需要一个主题来调用方法。这是`IQueryable<>`使用的地方。

我已经更改了我的 Query 类以保持所有的`LambdaExpression`' 分开，然后将它们分别传递给 QueryTranslator。QT 将输出 SQL 合并到正确的位置。

这与分析一个超级表达式并根据表达式中的 's 将 `IQueryable<>`SQL 输出到正确位置的 QueryProvider 不同。`MethodCallExpression`

# git - 如何编辑 git config 以运行 Git 并包含来自 Windows 命令提示符的 Unix 工具

> ID：11038050
> 
> 赞同：3
> 
> 时间：2012-06-14T17:09:00.357
> 
> 标签：git

安装 git for windows 时，会要求用户从以下 3 个选项中进行选择：

1.  （默认）仅使用 Git Bash
2.  从 Windows 命令行运行 Git
3.  从 Windows 命令提示符运行 Git 和包含的 Unix 工具

我安装时选择了选项 1，但现在想更改为选项 3。我该怎么做？

编辑：
想要添加一些有用的链接来帮助安装 git：http:
[//mechanicalrevolution.com/blog/git_installation.html](http://mechanicalrevolution.com/blog/git_installation.html)
[http://www.diplo.co.uk/blog/2011/6/2/installing-git -on-windows.aspx](http://www.diplo.co.uk/blog/2011/6/2/installing-git-on-windows.aspx)
[http://gitscc.codeplex.com/](http://gitscc.codeplex.com/)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-14T17:53:37.750

从路径中删除`C:\Program Files (x86)\Git\bin`并将其替换为`C:\Program Files (x86)\Git\cmd`

此选项仅选择路径上的内容。如果您只是将 Git\cmd\ 目录添加到路径中，那么它会提供一个 git.cmd 和一个 gitk.cmd ，让您可以在 Windows 命令提示符下正常工作。

要编辑 PATH 环境变量，您需要使用控制面板系统设置页面中的高级系统设置对话框，然后单击环境变量按钮。不幸的是，编辑窗口非常小——通常有助于将 PATH 值复制到记事本中进行编辑，然后再将其粘贴回去。

或者，您可以选择正确的设置卸载并重新安装 Git。

# gcc - gcc __sync 内置函数和 x86

> ID：11038055
> 
> 赞同：2
> 
> 时间：2012-06-14T17:09:04.147
> 
> 标签：gcc

我在看一个[关于](https://stackoverflow.com/questions/9254082/should-64bit-compareswap-cas-work-on-a-32bit-machine-or-64bit-machine)原子比较和交换以及 gcc 内在函数的问题。我注意到从[gcc 手册](http://gcc.gnu.org/onlinedocs/gcc-4.7.1/gcc/_005f_005fsync-Builtins.html#g_t_005f_005fsync-Builtins)中引用的答案（注意我看到的答案是从早期版本的 gcc 中引用的，但我已经链接到最新版本的手册，因为我已经检查过是否有任何变化）。但是，当我查看手册中的文本时，我发现它似乎是引用`Itanium`而不是`x86`：

> 以下内置函数旨在与英特尔安腾处理器特定应用程序二进制接口第 7.4 节中描述的那些兼容。因此，它们背离了使用“__builtin_”前缀的正常 GCC 实践，并且它们被重载以便它们可以在多种类型上工作。

我的问题是为什么 gcc 引用 Itanium 文档，这会影响内在函数在 x86 上的工作方式吗？是否有任何差异，或者是否可以安全地假设即使 gcc 手册引用了 Itanium 手册，gcc 手册描述的所有内容都可以在 x86 系统上正常工作？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-14T17:40:40.510

我的理解是，很多 gcc 的 ABI 决策（egcs 分支）都是基于好船 Itanic 的 ABI 规范。这包括 C++ 符号的名称修改约定。当实际处理器可用时，我们付出了巨大的努力（[Project Trillian](http://en.wikipedia.org/wiki/Project_Trillian)）让 IA-64 Linux（和 GCC）准备就绪。语义旨在独立于平台，尽管它们将被内置函数替换`__atomic`。

# java - 无法确定当前目录

> ID：11038056
> 
> 赞同：72
> 
> 时间：2012-06-14T17:09:04.110
> 
> 标签：java, jvm

我正在尝试运行在 Netbeans 中成功创建的 .jar 文件，但收到以下错误：

> VM java.lang.Error 初始化期间发生错误：属性初始化：无法确定当前工作目录。在 java.lang.System.initProperties(Native Method) 在 java.lang.System.initializeSystemClass(System.java:1070)

我键入运行 .jar 的命令是

```
java -jar "/path to the dist forlder/EOPPrototype.jar" 
```

我的类路径如下：

```
CLASSPATH=/opt/netbeans-7.1.2/ide/modules/ext/mysql-connector-java-5.1.13-     bin.jar:/h/USERS/local/pagola/NetBeansProjects/mylib/dist/mylib.jar:/h/USERS/local/pagola/NetBeansProjects/EOPPrototype/build/classes:. 
```

我错过了什么？

* * *

## 回答 #1

> 赞同：202
> 
> 时间：2013-01-25T10:44:29.360

当我试图`java -version`在一个目录中调用时，我看到了同样的错误，我已经从另一个终端会话中删除了该目录。当然在那种情况下 java `could not determine the current working directory`，仅仅是因为它不存在。

* * *

## 回答 #2

> 赞同：32
> 
> 时间：2018-03-01T04:22:08.210

解决方案： cd 到另一个目录并再次运行该命令，这对我有用。

请参阅此处的说明：[https ://bugs.openjdk.java.net/browse/JDK-8186434](https://bugs.openjdk.java.net/browse/JDK-8186434)

* * *

## 回答 #3

> 赞同：11
> 
> 时间：2015-03-31T14:08:21.180

在 Fedora 21 中，我尝试在卸载后调用“java -version”，它给出了上述错误。关闭所有终端并再次打开它们并尝试。

应该管用。

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2012-06-29T12:06:34.770

我收到了相同的错误消息，但我不确定这是否与我不使用 Netbeans 的原因相同。我使用我的终端并使用`ant`.

我`cd`要到一个目录来运行一个`javafile.class`文件。我要运行的文件是更大包的一部分。包的目录结构如下所示：`a/b/c/javafile.class`. 、`a`和目录都是较大包的一部分`b`。`c`

要运行我的`javafile.class`，我`cd`会从那里进入`a`并运行文件：`java b/c/javafile`. 在我进行了一些更改并使用我的`ant`脚本重新编译后，我所在的目录已被删除并重新制作`ant`。所以，当我`javafile.class`再次运行时，我得到了你得到的错误。

`cd`我通过退出已删除和重新制作的目录`ant`然后再​​次运行我的目录来解决我的问题`javafile.class`。

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2017-07-05T05:54:00.637

也许你没有在你的工作站上正确配置 java 环境

以下配置是我在我的mac中所做的

```
vi ~/.bash_profile 
```

并在其中添加那些

```
JAVA_HOME=/Library/Java/JavaVirtualMachines/jdk1.8.0_40.jdk/Contents/Home
PATH=$JAVA_HOME/bin:$PATH:.
CLASSPATH=$JAVA_HOME/lib/tools.jar:$JAVA_HOME/lib/dt.jar:.
export JAVA_HOME
export PATH
export CLASSPATH 
```

代替

```
JAVA_HOME=/Library/Java/JavaVirtualMachines/jdk1.8.0_40.jdk/Contents/Home 
```

使用您的 jdk 版本，然后运行

```
source ~/.bash_profile 
```

立即使用这些配置，然后您可以检查

```
java -version 
```

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2014-08-14T23:00:52.997

我得到了同样的错误 -

> 初始化虚拟机时出错
> 
> java.lang.Error：属性初始化：无法确定当前工作目录。

只需执行“java -version”（您会认为不需要启动虚拟机来回答诸如“您是什么版本？”之类的简单问题）

pwd 目录路径的较高元素（斜杠之间的元素）中有空格。当我创建一个从/向下没有任何空格的当前工作目录时，“java -version”命令得到了正确的响应。

我的结论是他们在编程时没有考虑带有空格的目录。但那是 1.7 版。我现在已经加载了版本 8，所以希望它已经得到纠正。

* * *

## 回答 #7

> 赞同：3
> 
> 时间：2016-09-20T16:52:36.540

我在 Mac OS X 上遇到了这个错误，这是一个真正的错误，因为目录已经消失。我执行命令时所在的目录是`<PROJECT DIR>\target`.

> 问题是我在我运行的另一个终端中打开了两个终端，`mvn clean install`并且目标目录`PROJECT DIR`被删除并重新创建。

我执行 Java 命令的旧终端不在有效目录中。

> 文件描述符无效，因为该目录已被 Maven 删除。

当我移回父目录并更改回`target`目录时，该`java`命令开始按预期正常工作。

* * *

## 回答 #8

> 赞同：2
> 
> 时间：2016-05-27T10:41:03.047

在 CentOS 下，rhel、SL 还是 SLC？在 debian/ubuntu 下不是问题。

我发现您需要注销正在使用的 shell 并重新登录。最初没有为当前 shell 正确设置环境。登录后我看到： java -version 将工作。

还要确保 /etc/alternatives/java 实际上指向一些合理的东西，例如：

```
ls -lisa /etc/alternatives/java
72645 0 lrwxrwxrwx. 1 root root 46 May 27 11:29 /etc/alternatives/java -> /usr/lib/jvm/jre-1.7.0-openjdk.x86_64/bin/java 
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2013-08-20T06:15:05.320

刚才，我得到了同样的错误。因为我使用java来setreuid/setregid到apache:apache，当我改回root:root时，我在uid之前更改了gid，真正的结果是root:apache。一切都出错了，例如错误说“java.lang.Error：属性初始化：无法确定当前工作目录。”

你可以检查一下。

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2017-07-06T07:05:45.010

当我从 Eclipse 启动 tomcat 时，我的 Mac 出现了这个错误。设置 JAVA_HOME 并重新启动 eclipse 后，错误已修复。

* * *

## 回答 #11

> 赞同：-1
> 
> 时间：2016-11-30T05:17:13.687

如果您从只读目录发出“java -version”或其他 java 命令，您可能会收到此错误。例如在 centos 上使用 openjdk 8（作为非 root 用户）：

```
cd /usr/bin
java -version 
```

VM java.lang.Error 初始化期间发生错误：属性初始化：无法确定当前工作目录。

# android - Android：警报管理器和意图过滤器不起作用

> ID：11038057
> 
> 赞同：3
> 
> 时间：2012-06-14T17:09:18.727
> 
> 标签：android, android-intent, alarmmanager

所以我设置了一个触发意图的警报。我还有一个广播监听器，它有一个意图过滤器来捕捉该意图，但由于某种原因它不起作用。我不确定问题出在哪里（发送或接收或两者兼而有之）。

发送代码：

```
Intent reminderIntent = new Intent();
reminderIntent.setAction(INTENT_ACTION_ALARM); //INTENT_ACTION_ALARM is String "intent_myaction_alarm"

PendingIntent pendingIntent = PendingIntent.getBroadcast(context, 0, reminderIntent, 0);

Calendar time = Calendar.getInstance();
time.setTimeInMillis(System.currentTimeMillis());

alarmManager.set(AlarmManager.RTC, time.getTimeInMillis(), pendingIntent); 
```

接收代码：

```
IntentFilter intentFilter = new IntentFilter();
intentFilter.addAction(INTENT_ACTION_ALARM);

alarmReceiver = new BroadcastReceiver() {
  @Override
  public void onReceive(Context context, Intent intent) {
          // DO SOMETHING
   } 
};

context.registerReceiver(alarmReceiver, intentFilter); 
```

# ruby-on-rails-3 - Rails 3 中的基本嵌套路由

> ID：11038058
> 
> 赞同：0
> 
> 时间：2012-06-14T17:09:24.827
> 
> 标签：ruby-on-rails-3, rails-routing

*注意：我已经阅读了从内到外的路由和关于路由的引擎场博客文章。*

我正在建立一个梦幻体育联盟，我有一个联盟模型，它支持七种基本的宁静操作，它们都运行良好。

我添加了以下我的 routes.rb

```
 resources :leagues do
    member do
      get :invite
      post :sendem
    end 
```

在文件的后面，我有一个资源：用于基本操作的联盟

当我搜索路线时，我可以看到：

```
invite_league GET    /leagues/:id/invite(.:format)      {:action=>"invite", :controller=>"leagues"}
sendem_league POST   /leagues/:id/sendem(.:format)      {:action=>"sendem", :controller=>"leagues"} 
```

这是我所期望的。我在 League 控制器中有两个函数：“invite”，它创建用于收集电子邮件地址的表单，以及“sendem”，它调用邮件程序来实际发送邀请。

/league/:id/invite 的 get 确实会生成表单。我使用的表单标签如下所示：

```
<%= form_tag(sendem_league_path, :method => "post") do %> 
```

然而呈现的 HTML 看起来像：

```
<form accept-charset="UTF-8" action="/leagues/1" class="edit_league" id="edit_league_1" method="post"> 
```

因此在提交时会生成一个完全错误的 PUT。（它应该发布到 sendem 函数。）我对路由文件的更改出现在通用资源 :leagues 行上方，因此它*应该**具有*更高的优先级。

我确定我错过了一些非常简单的东西，但我没有想法。（和头发）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-17T04:30:39.460

您不应该使用 form_tag 来操作资源。您应该使用 form_for。查看[表单助手指南](http://guides.rubyonrails.org/form_helpers.html)- 第 2 节“处理模型对象”。它负责推断是对模型对象使用 POST 还是 PUT。例如，如果您的模型对象是新的，它将在“资源”的 URL 上使用 post。如果它已经是现有的数据库实体，它将使用 PUT 到该“资源”的 URL。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-17T14:25:34.383

ARGH 顶部的一些表单处理错误代码（@league 的表单）在页面上创建了第二个表单以进行编辑......（为简洁起见，上面的代码片段省略了）。原始代码似乎可以按预期工作，而其他代码已被注释掉。感谢 vladdruzh 说服我我走在了正确的轨道上，感谢 Salil 让我想到从上到下阅读呈现的 HTML。

# javascript - 匿名函数中对变量的意外引用

> ID：11038061
> 
> 赞同：2
> 
> 时间：2012-06-14T17:09:32.953
> 
> 标签：javascript

以下 JavaScript 有一些不需要的行为：

```
<html>
<script>
  function AddEventListener(el, listener)
  {
    el.addEventListener ? el.addEventListener('click', listener) : 
                          el.attachEvent('onclick', listener);
  }

  function Init(parent) 
  {
    var span = document.createElement("span");
    span.innerText = "Span1";

    AddEventListener(span, function() { alert(span.innerText); } ); 
    parent.appendChild(span);
    var span = document.createElement("span");

    span.innerText = "Span2";
    parent.appendChild(span);
  }
</script>
<body onload="Init(document.getElementById('drop'));">
  <div id='drop'></div>
</body>
</html> 
```

如果单击`Span1`，`Span2`将显示在警报窗口中。我明白为什么：javascript 变量范围。但我不知道如何解决它。

一些上下文：我使用`this.innerHTML`了除了在 IE8 中工作正常的方法。`this`指向 IE8 中的窗口，而不是事件侦听器的父级。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-14T17:13:00.373

您可以使用传递给您注册的每个事件的参数，而不是在单击回调中使用全局变量，`event`然后使用其`event.target`参数获取参与事件的 DOM 元素。

为此，您可以将事件侦听器注册更改为：`AddEventListener(span,function(event) {alert((event.target ? event.target : event.srcElement).innerText);});`

我在这里使用您的代码设置了一个示例：http: [//jsfiddle.net/dvirazulay/fTa6T/1/](http://jsfiddle.net/dvirazulay/fTa6T/1/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-14T17:15:46.930

您可以返回一个函数而不仅仅是声明一个函数，但我更喜欢@Dvir Azulay 的建议：

```
function CreateAlert(span)
{
    return function() { alert(span.InnerText); };
}

function Init(parent) 
{
    var span=document.createElement("span");
    span.innerText="Span1";
    AddEventListener(span, CreateAlert(span)); 
    parent.appendChild(span);
    var span=document.createElement("span");
    span.innerText="Span2";
    parent.appendChild(span);
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-14T17:13:49.723

试试这个：（将 span 的第二个定义更改为 span2）

```
<!DOCTYPE html>
<html>
<script>

function AddEventListener(el,listener)
{
  el.addEventListener ? el.addEventListener('click', listener) :     el.attachEvent('onclick', listener);
}

function Init(parent) 
{
 var span=document.createElement("span");
 span.innerText="Span1";
 AddEventListener(span,function() {alert(span.innerText);}); 
 parent.appendChild(span);
 var span2=document.createElement("span");
 span2.innerText="Span2";
 parent.appendChild(span2);
}
</script>
<body onload="Init(document.getElementById('drop'));">
<div id='drop'></div>
</body>
</html> 
```

# android - Android：在具有相同密度但大小不同的屏幕上拟合图像

> ID：11038063
> 
> 赞同：1
> 
> 时间：2012-06-14T17:09:42.670
> 
> 标签：android, android-layout

我有一个看起来像这样的布局：

```
 <LinearLayout>
     <ImageView>
     android:width="wrap_content"
     android:height:"wrap_content"
      ...
     </ImageView>

     <ImageView>
     android:width="wrap_content"
     android:height:"wrap_content"
      ...
     </ImageView>

     <ImageView>
     android:width="wrap_content"
     android:height:"wrap_content"
      ...
     </ImageView>

     <ImageView>
     android:width="wrap_content"
     android:height:"wrap_content"
      ...
     </ImageView>
 </LinearLayout> 
```

图像的大小使得它们在 540x960、275ppi 的屏幕上填满屏幕。但是当我在模拟器上运行我的应用程序时，最后一张图像被压扁了。

阅读[Supporting Multiple Screens](http://developer.android.com/guide/practices/screens_support.html)文档后，我了解到在 dp 中指定图像尺寸而不是“wrap_content”应该涵盖不同密度的屏幕。

但是不同尺寸的屏幕呢？例如，如果我有两个具有相同像素密度的不同尺寸的屏幕，我可能会遇到这样一种情况，即我的图像适合其中一个屏幕而不适合另一个屏幕，对吗？有两种不同的布局是唯一的解决方案吗？

例如，两个不同大小（但密度相同）的屏幕可能有 100 和 200 个垂直像素可用，并且图像大小为 150dps，因此它不适合第一个屏幕。我对吗？

提前致谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-14T17:23:06.613

几乎任何试图用设置的位图填充整个窗口而不愿意裁剪、缩放或留下未覆盖区域的 Android 应用程序都注定要失败。有这么多不同的纵横比和屏幕尺寸，不可能神奇地适应一组具有固定纵横比和尺寸的内容。即使您提供了另一种布局来处理不同尺寸的屏幕，但这并不能真正解决问题，因为毫无疑问，在某处存在第三台设备，其屏幕尺寸与您所涵盖的两者不同。

考虑使用一组图像，其中包含可以拉伸或裁剪而不会失去保真度的部分。这可能只是纯色、渐变、重复图案或其他东西。或者，如果合适，您可以只允许滚动。所有这些都取决于您的内容以及您想要实现的目标。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-14T17:27:48.843

注意 中的`android:scaleType`属性`ImageView`。默认情况下，系统使用`FIT_CENTER`来自 的值缩放图像`ImageView.ScaleType`。在这种情况下，系统会保持图像的原始纵横比，并确保它完全适合设备的一侧，无论是宽度还是高度。

# 编辑：

对不起，犯了大错。图像完全适合`ImageView`它的一侧。

# php - 模板不适用于自定义前端模块

> ID：11038068
> 
> 赞同：1
> 
> 时间：2012-06-14T17:09:55.433
> 
> 标签：php, xml, magento

我有一个模块命名空间/搜索，当我到达这里时安装了它。我从中获取了 <[namespace]_index_index> 内容并将其放在这里。这是来自当前工作的模块。

```
<reference name="root">
    <action method="setTemplate"><template>page/2columns-right.phtml</template></action>
 </reference>
 <reference name="content">
    <block type="search/search" name="search" template="ifi_search/index.phtml" />
</reference> 
```

我已将上述内容用作 helloworld 模块的模板。

```
<reference name="root">
    <action method="setTemplate"><template>page/2columns-right.phtml</template></action>
</reference>
<reference name="content">
    <block type="helloworld/helloworld" name="helloworld" template="helloworld/helloworld.phtml" />
</reference> 
```

在第二个示例中，我留下了一个完全空白的页面，开发人员模式已打开。根据我对该主题的了解，我没有任何其他信息可用于调试。如果我添加了任何有用的东西，请发表评论。我不确定此时是否可以重现此问题。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-14T17:19:02.157

您需要`output`在块声明中添加属性：

```
<block type="page/html" name="root" template="simple_page.phtml" output="toHtml"/> 
```

这会将块标记为输出块并将块渲染方法设置为`toHtml()`。输出块在调用中呈现入口点`Mage_Core_Controller_Varien_Action->renderLayout()`。

# css - 为什么 webkit 浏览器无法突出显示该站点中的选定文本？

> ID：11038070
> 
> 赞同：2
> 
> 时间：2012-06-14T17:10:00.667
> 
> 标签：css, google-chrome, safari, webkit, highlighting

网站：[http ://clandestinoangusto.it/](http://clandestinoangusto.it/)

嗨，谁能解释为什么 WebKit 浏览器无法突出显示上述网站中的选定文本？它在 IE 和 FF 上运行良好，但 chrome 和 safari 只显示突出显示光标，但无法选择文本。

可能是关于 CSS 的问题，但我根本无法修复它。

谢谢你。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-14T17:15:49.223

从体型中删除它

```
-webkit-user-select:none; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-14T22:43:32.883

我知道这已得到解答，但以下代码将让您设置突出显示的样式：

```
/* webkit, opera, IE9 */
::selection { background: tomato; }
/* mozilla firefox */
::-moz-selection { background: tomato; } 
```

可能有用。

# objective-c - 使用 NSMutableArray 和 NSUserDefaults

> ID：11038074
> 
> 赞同：-2
> 
> 时间：2012-06-14T17:10:16.747
> 
> 标签：objective-c, xcode

我正在尝试从 NSUserDefaults 创建一个 NSMutableArray，以便稍后添加/删除和编辑它

我的代码是

```
- (void)viewDidLoad {
[super viewDidLoad];

NSUserDefaults *ArrayTable = [NSUserDefaults standardUserDefaults];
[ArrayTable setObject:@"One" forKey:@"myArray"];
[ArrayTable setObject:@"Two" forKey:@"myArray"];
[ArrayTable setObject:@"Three" forKey:@"myArray"];
[ArrayTable setObject:@"Four" forKey:@"myArray"];
[ArrayTable setObject:@"Five" forKey:@"myArray"];
[ArrayTable synchronize];

NSMutableArray *array = [[NSMutableArray alloc] init];
array = [ArrayTable objectForKey:@"myArray"];
}

- (void)viewDidUnload
{
    [super viewDidUnload];
}

#pragma mark - Table View

- (NSInteger)numberOfSectionsInTableView:(UITableView *)tableView
{
    return 1;
}

- (NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section
{
    return [array count];
}

- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
    static NSString *CellIdentifier = @"Cell";

    UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier];
    if (cell == nil) {
        cell = [[UITableViewCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:CellIdentifier];
        cell.accessoryType = UITableViewCellAccessoryDisclosureIndicator;
    }
    cell.textLabel.text = [array objectAtIndex:indexPath.row];
    return cell;
} 
```

当我构建并运行时，什么都没有出现

我用谷歌搜索但没有任何帮助，我确定我不明白怎么做

我需要的是构建一个包含空数据的表格视图的应用程序，使用将填写数据添加/删除/编辑

有人可以帮我解释一下吗

先感谢您

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-14T17:19:46.503

首先，您将用户默认值中的数组分配给名为 的局部变量`array`。假设你有一个这个类的属性也叫`array`，这个本地赋值会屏蔽它。如果没有，当你试图调用`-count`一个字符串时你会崩溃。

`NSUserDefaults`对象是字典。每次调用`-setObject:forKey:`它时，实际上都是在*替换*之前为该键设置的对象。因此，在您的一系列调用结束时`-setObject:forKey:`，结果值为`NSString` **Five**。

您不能真正将可变对象存储在 中`NSUserDefaults`，而是在将其分配给局部变量或 ivar 时获取该对象的可变副本。要获得您可能期望的行为，您应该执行以下操作：

```
- (void)viewDidLoad
{
  // Create the array template and store it in NSUserDefaults
  NSArray* arrayTemplate = [NSArray arrayWithObjects:@"One", @"Two", @"Three", @"Four", @"Five", nil];
  NSUserDefaults* defaults = [NSUserDefaults standardUserDefaults];
  [defaults setObject:arrayTemplate forKey:@"myArray"];
  [defaults synchronize];

  // Retrieve a mutable copy of the array from user defaults and assign it to the
  // the property 'array' <- note, this should be an NSMutableArray
  self.array = [[defaults objectForKey:@"myArray"] mutableCopy]; // if not using arc, autorelease this here
} 
```

使用该示例代码，它应该按照您预期的方式运行，您可以继续。显然，设置数组`-viewDidLoad`然后立即读取可变副本是没有意义的。要记住的关键是`-setObject:forKey:`它将始终*替换*已为该键设置的任何对象。它不添加元素或类似的东西。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-14T17:15:35.567

您的问题是您将一堆字符串都设置为同一个键：

```
[ArrayTable setObject:@"yourvalue" forKey:@"myArray"]; 
```

只是不断覆盖您的最后一个值。为了将数组保存为默认值，您必须以另一种方式进行。这个问题可能会对您有所帮助：[array to defaults](https://stackoverflow.com/questions/350848/possible-to-save-an-integer-array-using-nsuserdefaults-on-iphone)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-14T21:09:57.753

由于您实际上并不希望与 NSUserDefaults 的内容有任何关系，因此您只是在询问如何初始化可变数组。以下是您尝试做的事情的方法：

```
NSMutableArray *array = [[NSMutableArray alloc] init];
[array addObject:@"One"];
[array addObject:@"Two"];
[array addObject:@"Three"];
[array addObject:@"Four"];
[array addObject:@"Five"]; 
```

或者，更简单地说：

```
NSMutableArray *array = [NSMutableArray arrayWithObjects:@"One", @"Two", @"Three", @"Four", @"Five", nil]; 
```

（这些并不完全相同。如果您使用 MRC，第一个创建一个您拥有的数组并且必须手动释放，而第二个创建一个自动释放的数组。如果您不了解其中的区别，第二个在你学习之前更好，但很快你应该去学习。）

如果你想知道为什么你所做的没有奏效，这里是：

```
NSUserDefaults *ArrayTable = [NSUserDefaults standardUserDefaults]; 
```

在这里，您正在复制一个 NSUserDefaults 对象，它不是数组或表；它是用户和系统偏好的包装器，就像具有额外功能的字典一样。

```
[ArrayTable setObject:@"One" forKey:@"myArray"]; 
```

此行将名为“myArray”的首选项添加到您的应用程序的用户域首选项，其值为“One”。

```
[ArrayTable setObject:@"Two" forKey:@"myArray"];
[ArrayTable setObject:@"Three" forKey:@"myArray"];
[ArrayTable setObject:@"Four" forKey:@"myArray"];
[ArrayTable setObject:@"Five" forKey:@"myArray"]; 
```

这些行反复更改“myArray”首选项的值，以“Five”结尾。

```
[ArrayTable synchronize]; 
```

这可确保您的首选项已保存到磁盘。

```
NSMutableArray *array = [[NSMutableArray alloc] init]; 
```

这将创建一个新的可变数组并将其存储在变量“array”中。

```
array = [ArrayTable objectForKey:@"myArray"]; 
```

这会从您的偏好中获取“五”字符串并将其存储到变量“数组”中。

这意味着您现在失去了对实际数组的唯一引用。

这也意味着变量的静态类型不再匹配动态类型。当您稍后调用 [array count] 或 [array objectAtIndex:n] 时，您会将这些消息发送到字符串，而不是数组，因此您可能会遇到异常或其他意外行为。（嗯，几乎可以保证无论你得到什么都会出乎意料，因为你认为你正在与一个由 5 个对象组成的数组交谈，而不是一个字符串。）

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-14T17:16:55.540

创建数组并将其添加到用户默认值。

```
- (void)viewDidLoad {
//...
NSArray * tmpArray = [NSArray arrayWithObjects:@"One",@"Two",@"Three",@"Four", @"Five", nil];

NSUserDefaults *ArrayTable = [NSUserDefaults standardUserDefaults];
[ArrayTable setObject:tmpArray forKey:@"myArray"];
[ArrayTable synchronize];

array = [[ArrayTable objectForKey:@"myArray"] mutableCopy]; 
// array has to be an ivar of your viewcontroller to access it outside of viewDidLoad
// define in your header like @property (nonatomic, strong) NSMutableArray * array;
// with @synthesize array; in the implementation 
```

}

# java - 除 a=!a 之外的任何用于否定布尔 var 的快捷操作符

> ID：11038075
> 
> 赞同：1
> 
> 时间：2012-06-14T17:10:27.737
> 
> 标签：java, boolean, variable-assignment, operator-keyword

只是为了学习，我在 java doc 中尝试过，但没有找到。也许与任何运营商的一些特殊技巧，如`!!`或`--`

我喜欢自动增量`i++ = i=i+i`

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-14T17:12:10.640

不，这是否定 a 的最短方法`boolean`。无论如何，它实际上只是一个字符，`++`而不是一个超级广泛使用的构造（至少与类似的东西相比`i++`）。

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2012-06-14T17:25:52.260

您可以使用否定功能

```
negate(java.lang.Boolean bool) 
```

# r - 将数据分解为每个级别并对其应用功能

> ID：11038076
> 
> 赞同：2
> 
> 时间：2012-06-14T17:10:30.943
> 
> 标签：r, split, dataframe, plyr, apply

我有以下数据集：

```
name1 <- c("P1", "P2", "IndA", "IndB", "IndC", "IndD", "IndE", "IndF", "IndG")
name2 <- c("P1", "P2", "IndH", "IndI", "IndJ", "IndK")
name3 <- c("P1", "P2", "IndL", "IndM", "IndN")
name <- c(name1, name2, name3)

A <- c(1, 3, 1, 2, 2, 5, 5, 1, 4, 1, 3, 3, 1, 4, 3, 1, 1, 3,2,1 )
B <- c(2, 4, 3, 4, 2, 2, 6, 2, 2, 1, 4, 3, 1, 1, 5, 2,2, 1, 2, 1 )
family  = c(rep(1, length (name1)), rep(2, length (name2)), rep(3, length (name3)))
mydf <- data.frame (family, name, A, B) 
```

以下是我要应用每个级别的家庭变量的过程：

```
dum.match<-rbind(expand.grid(c(mydf[1,3:4]),c(mydf[2,3:4])),
        expand.grid(c(mydf[2,3:4]),  c(mydf  [1,3:4])))
    newmydf<-cbind(mydf, correct = paste(mydf$A,mydf$B)%in%paste(dum.match$Var1,
        dum.match$Var2)) 
```

所以我生成了一个函数：

```
err.chk <- function (x) {
    dum.match<-rbind(expand.grid(c(x[1,3:4]),c(x[2,3:4])),
     expand.grid(c(x[2,3:4]),c(x[1,3:4])))
    newmydf<-cbind(x, correct = paste(x$A,mydf$B)%in%paste(dum.match$Var1,
     dum.match$Var2))
    return (newmydf)
    } 
```

现在我想为每个级别的家庭创建单独的 3 个数据集并应用上述函数并将结果组合到上述数据框中，并且附加列正确。我该怎么做 ？我试过跟随（结果很糟糕！）

```
 require(plyr) 
 aaply(mydf, 1, err.chk) 
```

**编辑：**

预期输出：

```
family name A B  correct 
1       1   P1 1 2  FALSE
2       1   P2 3 4  FALSE
3       1 IndA 1 3  TRUE
4       1 IndB 2 4  TRUE
5       1 IndC 2 2  FALSE
6       1 IndD 5 2  FALSE
7       1 IndE 5 6  FALSE
8       1 IndF 1 2  FALSE
9       1 IndG 4 2  TRUE

10      2   P1 1 1  FALSE
11      2   P2 3 4  FALSE
12      2 IndH 3 3  FALSE
13      2 IndI 1 1  FALSE
14      2 IndJ 4 1  TRUE
15      2 IndK 3 5  FALSE 

16      3   P1 1 2  TRUE
17      3   P2 1 2  TRUE
18      3 IndL 3 1  FALSE
19      3 IndM 2 2  TRUE
20      3 IndN 1 1  TRUE 
```

仅适用于family = 3（对于其他数据集类似）

```
 # just data for family 3
    name <- c("P1", "P2", "IndL", "IndM", "IndN")
    A <- c(1, 1, 3,2,1 )
    B <- c(2,2, 1, 2, 1)
    mydf <- data.frame (name, A, B)
    err.chk(fam3)

   name A B correct
16   P1 1 2    TRUE
17   P2 1 2    TRUE
18 IndL 3 1   FALSE
19 IndM 2 2    TRUE
20 IndN 1 1    TRUE 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-14T17:33:55.067

很难准确地遵循您正在做的事情，但是`plyr`您想使用一个`**ply`函数来接受您提供的数据类型并返回您的函数返回的数据类型。在这种情况下，`ddply`看起来是正确的选择。

如果你在第 3 行修复你的函数，你有一个`mydf$B`应该是`x$B`：

```
err.chk <- function (x) {
  dum.match <- rbind(expand.grid(c(x[1, 2:3]), c(x[2, 2:3])),
                     expand.grid(c(x[2, 2:3]), c(x[1, 2:3])))
  newmydf <- cbind(x, correct = paste(x$A, x$B) %in% paste(dum.match$Var1, dum.match$Var2))

  return (newmydf)
} 
```

使用它调用它`ddply`会给出合理的外观结果。

```
> ddply(mydf, .(family), err.chk)
   family name A B correct
1       1   P1 1 2   FALSE
2       1   P2 3 4   FALSE
3       1 IndA 1 3    TRUE
4       1 IndB 2 4    TRUE
5       1 IndC 2 2   FALSE
6       1 IndD 5 2   FALSE
7       1 IndE 5 6   FALSE
8       1 IndF 1 2   FALSE
9       1 IndG 4 2    TRUE
10      2   P1 1 1   FALSE
11      2   P2 3 4   FALSE
12      2 IndH 3 3   FALSE
13      2 IndI 1 1   FALSE
14      2 IndJ 4 1    TRUE
15      2 IndK 3 5   FALSE
16      3   P1 1 2    TRUE
17      3   P2 1 2    TRUE
18      3 IndL 3 1   FALSE
19      3 IndM 2 2    TRUE
20      3 IndN 1 1    TRUE 
```

# java - 如何将oracle数据库中的值汇总到java中？

> ID：11038079
> 
> 赞同：0
> 
> 时间：2012-06-14T17:10:44.357
> 
> 标签：java, sql, oracle, jdbc

我有一个连接到 Oracle 数据库的 java 应用程序。我有一个表单，用户在其中输入一个名为的 ID `COMMUNITY_ID`、一个名为的开始日期`START_DATE`和一个名为的结束日期`END_DATE`。

我希望应用程序在数据库中的表中搜索输入的值，当搜索结果正确时，我希望它显示总值的总和。

我有三种方法；每个方法负责搜索单个文本框。例如，第一个方法`total 1`搜索 ，`COMMUNITY_ID`第二个方法搜索 ，`START_DATE`最后一个方法搜索`END_DATE`。

我收到一条错误消息，指出结果集为空或已关闭。我不知道为什么，因为我没有清楚地理解信息。

以下是我的代码。如果有人知道如何解决它，请帮助我。

```
public void total3()
{
    ResultSet result;
    System.out.println("total 3");

    String endDate = this.EndTxtBox.getText();

    try
    {
        rs=st.executeQuery("select RECIPT_ID,COMMUNITY_ID,VALUE,START_DATE,END_DATE, ITEM_BOUGHT,REASON from RECIPTS where  END_DATE = '" +endDate+"'");
        //display();
        this.EndTxtBox.setText(rs.getString("END_DATE"));
    }
    catch(Exception ex)
    {

        JOptionPane.showMessageDialog(null, "Searched Failed" + ex);
    }

    try
    {
        result =  rs=st.executeQuery("select SUM(VALUE)from RECIPTS where END_DATE = '" +endDate+"'" );
        //result =  rs=st.executeQuery("select RECIPT_ID,COMMUNITY_ID,VALUE,START_DATE,END_DATE, ITEM_BOUGHT,REASON,SUM(VALUE)from RECIPTS group by RECIPT_ID,COMMUNITY_ID,VALUE,START_DATE,END_DATE, ITEM_BOUGHT,REASON ");
    }
    catch(Exception ex)
    {
        JOptionPane.showMessageDialog(null, "Error" + ex);
    }
} 
```

请问有什么想法吗？它有什么问题？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-14T17:22:10.053

您试图在转到第一行之前从结果集中读取：

```
if (rs.next()) {
    endDate = rs.getString("END_DATE");
} 
```

您的代码充满了不良做法：

*   将 UI 代码与数据库访问代码混合
*   捕捉异常
*   当您只对其中一个感兴趣时选择一大堆行和列
*   不使用准备好的语句
*   使用`result`和`rs`做同一件事
*   不关闭语句和结果集
*   使用字符串变量存储日期
*   缩进不佳且不一致

# python - 使用带有 Selenium 的 Scrapy 来渲染页面

> ID：11038082
> 
> 赞同：1
> 
> 时间：2012-06-14T17:11:03.297
> 
> 标签：python, selenium, scrapy

我解决了所有问题，唯一的问题是我得到了一个权限错误，因为我无法确切地知道如何将 Firefox 连接到这个脚本，我已经安装了插件，我可以让它从 UI 工作，但不能从这个脚本工作。

我该怎么做呢？

这是我的代码...

```
from scrapy.contrib.spiders.init import InitSpider
from scrapy.http import Request, FormRequest
from scrapy.contrib.linkextractors.sgml import SgmlLinkExtractor
from scrapy.contrib.spiders import CrawlSpider, Rule

from scrapy.spider import BaseSpider
from scrapy.selector import HtmlXPathSelector

from selenium import selenium

from linkedpy.items import LinkedPyItem

class LinkedPySpider(InitSpider):
    name = 'LinkedPy'
    allowed_domains = ['linkedin.com']
    login_page = 'https://www.linkedin.com/uas/login'
    start_urls = ["http://www.linkedin.com/csearch/results?type=companies&keywords=&pplSearchOrigin=GLHD&pageKey=member-home&search=Search#facets=pplSearchOrigin%3DFCTD%26keywords%3D%26search%3DSubmit%26facet_CS%3DC%26facet_I%3D80%26openFacets%3DJO%252CN%252CCS%252CNFR%252CF%252CCCR%252CI"]

    def __init__(self):
        InitSpider.__init__(self)
        self.verificationErrors = []
        self.selenium = selenium("localhost", 4444, "*firefox", "http://www.linkedin.com")
        self.log("\n\n\n Starting the Selenium Server! \n\n\n")
        self.selenium.start()
        self.log("\n\n\n Successfully, Started the Selenium Server! \n\n\n")

    def __del__(self):
        self.selenium.stop()
        print self.verificationErrors
        CrawlSpider.__del__(self)

    def init_request(self):
        #"""This function is called before crawling starts."""
        return Request(url=self.login_page, callback=self.login)

    def login(self, response):
        #"""Generate a login request."""
        return FormRequest.from_response(response,
                    formdata={'session_key': 'email@address.com', 'session_password': 'password'},
                    callback=self.check_login_response)

    def check_login_response(self, response):
        #"""Check the response returned by a login request to see if we aresuccessfully logged in."""
        if "Sign Out" in response.body:
            self.log("\n\n\nSuccessfully logged in. Let's start crawling!\n\n\n")
            # Now the crawling can begin..
            return self.initialized()
        else:
            self.log("\n\n\nFailed, Bad times :(\n\n\n")
            # Something went wrong, we couldn't log in, so nothing happens.

    def parse(self, response):
        hxs = HtmlXPathSelector(response)        
        sel = self.selenium
        sel.open(response.url)
        time.sleep(2.5)
        sites = sel.select('//ol[@id=\'result-set\']/li')
        items = []
        for site in sites:
            item = LinkedPyItem()
            item['title'] = site.select('h2/a/text()').extract()
            item['link'] = site.select('h2/a/@href').extract()
            items.append(item)
        return items 
```

# objective-c - objc_exception_throw 和 [NSException raise] 有什么区别？

> ID：11038083
> 
> 赞同：7
> 
> 时间：2012-06-14T17:11:25.107
> 
> 标签：objective-c, cocoa, exception, exception-handling

我一直在为 XCode 使用的一个有用技巧是[在 exceptions 上添加断点](https://stackoverflow.com/questions/1163981/how-to-add-a-breakpoint-to-objc-exception-throw)。

我想知道为什么我们需要添加两个断点——一个 for`objc_exception_throw`和一个 for `[NSException raise]`。

什么情况下一个覆盖，另一个不覆盖？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-19T13:13:11.277

您应该只在`objc_exception_throw`. 该方法`-[NSException raise]`调用`objc_exception_throw`，因此`objc_exception_throw`涵盖了所有`-[NSException raise]`涵盖的情况。反之则不正确：该`@throw`指令被编译为`objc_exception_throw`直接调用。这种方法显示了差异：

```
- (void)throwAndCatch
{
    @try {
        NSException *exception = [[NSException alloc] initWithName:@"Test" 
                                                            reason:@"test" 
                                                          userInfo:nil];
        @throw exception;
    }
    @catch (NSException *exception) {
        NSLog(@"Caught");
    }
} 
```

调用 时`-throwAndCatch`，断点 on`-[NSException raise]`无效，而断点 on`objc_exception_throw`将起作用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-01-18T00:46:38.417

以下是 Apple 文档中关于异常的内容：

> @throw 和 raise 之间的一个重要区别是后者只能发送到 NSException 对象，而 @throw 可以将其他类型的对象作为其参数（例如字符串对象）。Cocoa 应用程序应该只@throw NSException 对象。

这意味着如果您正在实现 a`Cocoa applciation project`并且如果您严格遵循 @throw 只有`NSExeption`对象，它们是相同的。

参考：[链接](https://developer.apple.com/library/mac/documentation/Cocoa/Conceptual/Exceptions/Tasks/RaisingExceptions.html)

# javascript - Rally App SDK 2.0：Rallymultiobjectpicker 的硬编码数据值

> ID：11038084
> 
> 赞同：0
> 
> 时间：2012-06-14T17:11:31.907
> 
> 标签：javascript, extjs, rally

是否可以为 rallymultiobjectpicker 输入硬编码值？我曾尝试使用与 rallycombobox 相同的方法，但它似乎不起作用。rallymultiobjectpicker 是否仅限于从 modelType 获取值？有没有办法从工件上的字段中获取值？还是严格针对对象？我想另一种选择是使用将 multiSelect 设置为“true”的 rallycombobox。但是，没有物理复选框，如果选择了很多选项，文本字段会变得非常拥挤。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-20T17:21:27.460

目前不支持对 rallymultiobjectpicker 使用硬编码值，但该选项将在 SDK 的未来版本中提供。

# cursor-position - xterm 活动行屏幕位置

> ID：11038085
> 
> 赞同：0
> 
> 时间：2012-06-14T17:11:44.150
> 
> 标签：cursor-position, xterm, x11

是否可以将 xterm 窗口中的活动行配置为显示在屏幕底部以外的位置？

虽然有一些优点，但我的显示器并没有放置在屏幕底部最容易触及的位置。它与位于屏幕顶部的网络浏览器地址栏冲突。

我想将活动线定位在窗口下方的 2/3 处。

# oracle - 在 oracle 中插入期间添加的尾随空间

> ID：11038089
> 
> 赞同：0
> 
> 时间：2012-06-14T17:11:54.177
> 
> 标签：oracle, oracle10g, oledbconnection

在 oracle 10g 中插入记录时遇到问题。我正在使用 oledb [带有 dbhelper 类] 从 asp.net 运行参数化查询。在查询中作为参数传递的字段的值，执行后在数据库的末尾有额外的空间。字段的数据类型是 varchar2。仅当使用 oledb 的 Oracle 提供程序建立连接时，才会出现此问题。当我使用 microsoft provider for oracle 时，最后没有插入额外的空间。

oracle 数据库是 64 位的。用于访问数据库的客户端是 11.2 版本......

这是一个已知问题还是我遗漏了一些东西。

建议一些东西，因为我已经没有想法了。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-15T11:09:35.343

就在我的脑海中，有两个想法浮现在脑海中。更改 INSERT 语句以截断其输入，如下所示：

```
INSERT INTO SOME_TABLE (FIELD1, FIELD2, FIELD3)
  VALUES (TRUNC(@param1), TRUNC(@param2), TRUNC(@param3)) 
```

第二种选择：编写一个存储过程，它接受参数作为输入并在 INSERT 语句中截断它们，如下所示：

```
CREATE OR REPLACE PROCEDURE INSERT_INTO_TABLE(pParam1  IN  VARCHAR2,
                                              pParam2  IN  VARCHAR2,
                                              pParam3  IN  VARCHAR2) IS
BEGIN
  INSERT INTO SOME_TABLE(FIELD1, FIELD2, FIELD3)
    VALUES (TRUNC(pParam1), TRUNC(pParam2), TRUNC(pParam3));
EXCEPTION
  WHEN OTHERS THEN
    NULL;  -- do something appropriate here
END INSERT_INTO_TABLE; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-19T06:43:49.983

如果使用 C#，请使用`Trim()`while 将参数传递给查询/存储过程来删除前导和尾随空格。例如：

```
param1= TextBox1.Text.Trim(); 
```

# c# - 使用 C# 读取 Excel 表，其中表格已合并单元格

> ID：11038090
> 
> 赞同：0
> 
> 时间：2012-06-14T17:12:00.863
> 
> 标签：c#, asp.net, html-table, import-from-excel

我正在尝试使用 C# 读取包含一些合并单元格的 Excel 工作表。我在另一篇文章中读到，从代码的角度来看，合并的单元格仍然存在，但它们只有空值。所以我尝试跳过空值，但我仍然得到不稳定的结果。这是我正在使用的代码。它应该使用电子表格中的值填充 HTML 表：

```
private void Output_Excel_File()
{
    string inputFileLocation = AppDomain.CurrentDomain.BaseDirectory + "/dashboard.xls";
    DataSet ds = Get_Spreadsheet_Data(inputFileLocation, "Dashboard Statistics");
    if (ds.Tables.Count > 0)
    {
        foreach (DataTable dt in ds.Tables)
        {
            int row = 0;
            foreach (DataRow dr in dt.Rows)
            {
                int col = 0;
                foreach (DataColumn dc in dt.Columns)
                {
                    string cellValue = dr[dc].ToString();
                    cellValue = Regex.Replace(cellValue, "\n", "<br /");
                    if (cellValue == "X" || cellValue == null)
                    {
                        col++;
                        continue;
                    }
                    string index = "r" + row.ToString() + "c" + col.ToString();
                    Literal cellTarget = (Literal)form1.FindControl(index);
                    cellTarget.Text = cellValue;
                    col++;
                }
                row++;
            }
        }
    }
} 
```

特别是我的索引已关闭并且行：

```
cellTarget.Text = cellValue; 
```

当索引与 HTML 中的索引不匹配时，总是会抛出空引用异常。

我用谷歌搜索和搜索，但我很难过。任何建议表示赞赏。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-14T17:16:08.143

据我记得，合并单元格的最左上角单元格将携带数据。合并组中的所有其他单元格引用都将为空。

编辑：如果你想跳过处理 r0c1（因为我认为它不存在）如果它是“X”或 Null，那么你将不得不做这样的事情：

```
foreach (DataColumn dc in dt.Columns)
{
    string cellValue = dr[dc].ToString();
    cellValue = Regex.Replace(cellValue, "\n", "<br /"); 
    if (cellValue != "X" | cellValue != null)
    {
        string index = "r" + row.ToString() + "c" + col.ToString();
        Literal cellTarget = (Literal)form1.FindControl(index);
        cellTarget.Text = cellValue; 
    }

    col++;
} 
```

另外我认为 cellValue 永远不会为空，但它可能是空的`""`，所以我喜欢使用：

```
if (cellValue != "X" | cellValue.Length == 0) 
```

编辑2：

您可能会对`NullRefference`收到的异常感到有些困惑。从我看到的不是因为它`cellValue`是空的，它来自：

```
(Literal)form1.FindControl(index); 
```

试图找到我认为不存在的 r0c1 并返回一个空控件（文字）。所以当你去使用

```
cellTarget.Text = cellValue; 
```

您会收到 NullReference 错误，因为对象本身`cellTarget`为空。

# php - PHP/MySQL 实践

> ID：11038092
> 
> 赞同：-1
> 
> 时间：2012-06-14T17:12:10.203
> 
> 标签：php, mysql

潜在雇主在看到以下功能时会怎么想：

```
function updTable{$table, $primary, $id, $key, $value){
    $primary = mysql_real_escape_string($primary);
    $id = (int) $id;
    $key = mysql_real_escape_string($key);
    $value = mysql_real_escape_string($value);
    $table = mysql_real_escape_string($table);

    mysql_query("UPDATE `{$table}` SET
                `{$key}`=`{$value}` 
                WHERE `{$primary}` = {$id}");

} 
```

这是不好的做法吗？有没有我应该阅读和了解的关于一般 php / mysql 设计指南（不是语法）的好文章？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-14T17:22:34.210

您处理数据库交互的方式是从过去开始的。 [准备好的语句](http://www.php.net/manual/en/pdo.prepared-statements.php)现在是常态，可以阻止许多与 SQL 相关的攻击。

此外，根据您的系统设计，您永远不需要这样的功能。如果您使用的是 MVC 模式，您将在模型中编写一个方法来处理某种类型的更新，而不仅仅是通用表更新。

看看这个函数，如果你想更新那个表中的多个列会发生什么？例如，如果您要更新 3 列，则必须调用数据库 3 次，而不是一次。

如果您想要一个非常通用的数据库层，请查看[Doctrine](http://docs.doctrine-project.org/projects/doctrine-dbal/en/latest/index.html)或制作与它非常相似的东西。

# c# - 为什么我不能将此字符串数组 ITEM 与字符串进行比较？

> ID：11038099
> 
> 赞同：0
> 
> 时间：2012-06-14T17:12:26.240
> 
> 标签：c#, visual-studio, collections, comparison, operators

```
StreamReader srr = new StreamReader(File.OpenRead("saved"));    
string[] slist = srr.ReadToEnd().Split('}');
                        System.Collections.Specialized.StringCollection clist = new System.Collections.Specialized.StringCollection();
                        for (int i = 0; i < slist.Length; i++) {
                            if (slist[i].Trim != "") // ERROR IS HERE
                            {
                                clist.Add(slist[i]);
                            }
                        } 
```

从我程序的另一部分，我将剪贴板中的当前文件列表保存到一个文件中，并通过用“}”分隔每个路径来做到这一点，有点像（ C:}D:}C:\Windows\Media }）。然后在这里，我打开文件，将其拆分为字符串数组，然后我需要检查每个路径是否为空字符串，但 Visual Studio 说“运算符'！='不能应用于'方法组'类型的操作数和'细绳'”。我没有将字符串数组直接与字符串进行比较（`slist[i]`）所以是什么原因造成的，这只是 VS 的问题还是我遗漏了什么？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-14T17:13:20.360

调用修剪（）：`if(slist[i].Trim() != "")`

# google-app-engine - AppEngine servlet 的冗长初始化

> ID：11038102
> 
> 赞同：0
> 
> 时间：2012-06-14T17:12:39.600
> 
> 标签：google-app-engine

在我的 AppEngine 应用程序中，servlet 需要很长时间才能初始化。这对于通常的 Tomcat 部署来说不是什么大问题，因为初始化只发生一次。但是，在 AppEngine 中，我注意到许多服务请求会导致 AppEngine 启动一个新进程并进行初始化，因此这些服务请求需要很长时间。

是否可以断开初始化与服务请求的连接？不知何故告诉 AppEngine 在后台进行初始化，这样当用户请求页面时，他就不必等待这么长时间了？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-15T00:20:37.460

您可以在应用程序的 App Engine 控制台的应用程序设置部分设置空闲实例或预热请求。这应该避免那些缓慢的初始化时间，因为您的应用程序将被预加载并准备就绪。

# language-agnostic - 扑克跟踪软件如何评估现场手牌

> ID：11038103
> 
> 赞同：3
> 
> 时间：2012-06-14T17:12:39.613
> 
> 标签：language-agnostic, poker

我只是好奇他们是如何制作这种软件的。

他们有吗？

*   捕获屏幕并使用 OCR 库来跟踪手部
*   确定手的记忆位置并直接从那里读取

还有什么？

编辑/我的意思是实时跟踪，而不是使用手牌历史

# google-app-engine - GAE：知道数据何时放入 Memcache

> ID：11038115
> 
> 赞同：0
> 
> 时间：2012-06-14T17:13:37.160
> 
> 标签：google-app-engine, memcached

我想知道何时将数据放在 Memcache 上……为什么？

我在 memcache 中有过期时间为 30 分钟的数据。

当有人在 5 分钟后询问存储时间时，我想更新此数据。

我是否必须放置 2 个数据，例如 key=>data 和 key_time=>date，或者可以知道数据何时存储？

我正在使用 Java。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-14T18:46:20.943

Key_time 选项以后可能很难管理。你将如何找到你的钥匙？

最好将其存储在字典中，即：

```
Key => {'time': time.time(), 'data': your_data} 
```

希望这可以帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-16T08:37:04.173

如果您想知道数据何时写入 memcache，只需将该信息与您的数据一起存储即可。例如，不要将值存储`"foo"`在 key下，而是存储`"bar"`tuple `("foo", current_timestamp)`，其中`current_timestamp`是您发出 put 请求的时间。

# java - 在 netbeans 中使用带有 .pfx 证书的 https webservice

> ID：11038121
> 
> 赞同：2
> 
> 时间：2012-06-14T17:13:57.960
> 
> 标签：java, web-services, jakarta-ee, https, pfx

我有一个来自客户的 .pfx 证书，应该使用他的服务。每次我尝试在我的 java 应用程序中使用该服务时，我的 netbeans 都会给我一个错误 403，告诉我检查 wsdl 文件或服务器是否正在运行。请任何人都可以告诉我如何在不出现此错误的情况下使用此服务的步骤吗？我正在使用 tomcat 6.0.29 和 netbeans 6.9

# android - Android：停止显示 LogCat 窗口

> ID：11038124
> 
> 赞同：2
> 
> 时间：2012-06-14T17:14:16.240
> 
> 标签：android, eclipse

我刚刚升级到最新版本的 SDK（版本 19），现在注意到在我调试时 LogCat 窗口总是出现。我关闭了它，但不久之后它又回来了。我觉得这很烦人。我怎样才能永久保持关闭状态。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-14T17:19:58.503

Go to Preferences > Android > LogCat and uncheck "Display logcat view when there are messages from an application in the workspace".

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-14T17:19:19.970

这可能有效：

做出自己的看法。当透视图处于您要保存的状态时，右键单击它。选择“另存为”。

# r - 如何在R中的数据框中的列中查找和删除具有相同连续值的一定数量的行？

> ID：11038125
> 
> 赞同：2
> 
> 时间：2012-06-14T17:14:17.400
> 
> 标签：r, dataframe

在我的数据框中，有一列以“声音”和“响应”为值。理想情况下，模式是两个声音后跟一个响应。但是，可能会出现三个声音后跟一个响应。

每当它在我的数据中发现这种模式时，我如何告诉 R 提出一个标志？在删除第三个声音行之前，我需要单独查看每个案例。

```
>df <- data.frame(V1=rep("SN", 7),  
             V3=c("Sound", "Sound", "Response", "Sound", "Sound", "Sound", "Response"), 
             V4=c("XYZc02i03", "XYZq02i03", 200, "ZYXc01i30", "ZYXq01i30", "ZYXc01i35", 100), 
             stringsAsFactors=FALSE) 

V1       V3        V4
SN    Sound XYZc02i03
SN    Sound XYZq02i03
SN Response       200
SN    Sound ZYXc01i30
SN    Sound ZYXq01i30
SN    Sound ZYXc01i35
SN Response       100 
```

因此，在找到三个连续的声音并删除其中的最后一个（即，在以下响应之前的那个）之后，我应该有这样的所需模式：

```
V1       V3        V4
SN    Sound XYZc02i03
SN    Sound XYZq02i03
SN Response       200
SN    Sound ZYXc01i30
SN    Sound ZYXq01i30
SN Response       100 
```

很抱歉，我一直在发布这些基本问题。一如既往，非常感谢任何想法！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-14T17:53:27.263

```
cumsum(rle(df$V3)$lengths)[rle(df$V3)$lengths == 3]
[1] 6 
```

这将返回“声音”连续第三个位置的向量。现在您可以轻松地删除它们或制作一些列来标记这些位置。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-14T17:54:22.793

我认为这会起作用，尽管可能有更简单的解决方案：

```
df <- data.frame(V1=rep("SN", 7),  
             V3=c("Sound", "Sound", "Response", "Sound", "Sound", "Sound", "Response"), 
             V4=c("XYZc02i03", "XYZq02i03", 200, "ZYXc01i30", "ZYXq01i30", "ZYXc01i35", 100), 
             stringsAsFactors=FALSE)

df

my.run <- rep(0,dim(df)[1])

if(df$V3[1]=='Sound') (my.run[1] = 1) else my.run[1] = 0

for (i in 2:dim(df)[1]) {

     if(df$V3[i]=='Sound') (my.run[i] = my.run[i-1] + 1) else my.run[i] = 0

}

df2 <- df[my.run < 3,]
df2 
```

# timestamp - 时间戳是否应该始终使用 UTC？

> ID：11038128
> 
> 赞同：12
> 
> 时间：2012-06-14T17:14:46.723
> 
> 标签：timestamp, utc, google-search

时间戳是否应该始终使用 UTC（如`2012-06-14T10:32:11+00:00`）而不是本地时间（如`2012-06-14T06:32:11-04:00`纽约）？

## 参考

1.  虽然不是 WordPress 问题，但我相信这将是一个很好的例子——核心开发人员开发的 WordPress 核心、主题和插件，如果在某处输出时间戳，似乎总是使用类似`get_the_date('c');`or的东西`get_the_modified_date('c');`——它总是以 UTC 格式输出时间戳，如`2012-06-14T10:32:11`**`+00:00`**。

2.  我刚刚遇到了[这个答案](https://stackoverflow.com/a/9943258)，它简单地指出“时间戳使用 UTC”。

## 问题

**时间戳应该**是 UTC 还是只是**推荐的做法**？（两者之间有很多区别。）本质上是这样的`2012-06-14T06:32:11-04:00`--错了吗？怎样`2012-06-14T10:32:11+00:00`更好？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-06-14T17:18:02.593

时间戳当然应该以 UTC 格式存储。日期的格式取决于该时区的要求。时间戳通常以 UTC 格式存储，因此显示到其他时区的转换更容易且可能。

通过仅将时间戳作为 UTC 存储在数据库中，您可以有效地将时区仅作为视图关注点。所有关于时间比较的数学和逻辑都可以假设在全球范围内同步。剩下的只是客户知道它在哪里，它在哪里的规则是什么，然后只是吐出结果。例如，通过 Chrome 开发者控制台在 JavaScript 中：

```
var dateObj = new Date();

console.log(dateObj);
// spits out local time
// if you and 23 other people in every time zone across the planet created
// a date object simultaneously you'd all see a different number
// adapted to your local time zones

var utcInMillis = dateObj.getTime();
// gives UTC in milliseconds.

console.log(utcInMillis);
// if you and 23 other people in every time zone across the planet created
// that same date object `dateObj` simultaneously you'd see the same number

console.log(new Date().getTime() - utcInMillis);
// how many milliseconds passed since utcinMillis was recorded and now 
```

var utcAsDateObj = 新日期（utcInMillis）；控制台.log(utcAsDateObj); //这就是从UTC以毫秒格式恢复到日期//对象是多么容易

一般来说，在有现代 Web 技术或类似选项的情况下，最不痛苦的事情是将所有内容存储为 UTC，然后将时区严格作为一个表示关注点。除了在当地环境中显示某人的时间外，您不需要任何本地时间。

即使您在后端遇到了一些愚蠢的非 UTC 时间戳，仍然值得通过在入口点转换并在出口点以任何可能的方式转换回客户端，使 UTC 成为您在客户端的规范化选项。整理出时区以及在哪些地方采用夏令时以及在哪些地方忽略它对 DIY 来说太混乱了，如果你真的必须触摸你需要变得更花哨的日期对象，这通常是不可避免的最终实际操作/比较日期/时间。

**没有**比将所有内容规范化为 UTC （以毫秒为单位）更简单的方法了，然后您将其作为当地时间在页面上吐出。

# html - 快速初学者 CSS，如何“范围”样式？

> ID：11038133
> 
> 赞同：3
> 
> 时间：2012-06-14T17:15:06.817
> 
> 标签：html, css

对不起，措辞不佳，我知道这是可能的，但我无法弄清楚谷歌是什么，所以我就这样解释它..

我有这个html：

```
<div class="navbar_links">
<ul>
<li><a href="www.google.com">Home</a></li>
<li><a href="www.google.com">About</a></li>
<li><a href="www.google.com">Speakers</a></li>
<li><a href="www.google.com">Exhibitors</a></li>
<li><a href="www.google.com">Agenda</a></li>
<li><a href="www.google.com">Location</a></li>
</ul>
</div> 
```

然后稍后我可能会有另一个列表..

我想要做的只是样式`<ul> / <li>`化类的项目`navbar_links`。不是因为在 html 中出现任何无序列表，只是在中找到的无序列表`<div class="navbar_links">`有人可以向我解释如何做到这一点吗？为了将来参考，让我知道它的“名称”，这样我就不必浪费时间在我知道我应该能够谷歌的东西上，对不起：P

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-14T17:16:50.077

使用`.navbar_links ul`或`.navbar_links li`取决于您实际想要的样式。这会将样式限制为仅属于类内的那些项目`navbar_links`。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-06-14T17:17:51.687

您正在寻找 CSS 选择器：[www.w3.org/TR/CSS2/selector.html](http://www.w3.org/TR/CSS2/selector.html)

在这种情况下，您可以编写以下内容：

```
.navbar_links ul {
  /* put styles for ul here */
} 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-06-14T17:16:48.533

像这样：

```
.navbar_links ul 
```

这是一个示例小提琴：http: [//jsfiddle.net/AWWmc/1](http://jsfiddle.net/AWWmc/1)

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-06-14T17:17:58.597

您可以使用：

```
.navbar_links ul 
```

做你想做的事。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-06-14T17:19:44.540

# ios - 使用 Mappy SDK IOS 在地图上添加标记

> ID：11038136
> 
> 赞同：0
> 
> 时间：2012-06-14T17:15:18.500
> 
> 标签：ios, mappy

我正在开发和 iphone 应用程序，我正在使用 Mappy SDK IOS。

我到达是为了显示地图并显示我当前的位置。但我在地图上添加一些标记时遇到问题。

我有一个 NSArray，其中包含一些具有经度和纬度属性的对象。我显示标记的代码是：

```
 - (void)viewDidLoad
{
    [super viewDidLoad];
    // Do any additional setup after loading the view from its nib.

    //initialisation mot de passe + user
    [MPInit initialisation:MAPPY_API_KEY];
    [RMMapView class];

    //show user location
    self.mapView.showsUserLocation = NO;
    self.mapView.showPoi = YES;

    //set delegate
    self.mapView.delegate = self;

    MPMarkerManager *markerManager = [self.mapView markerManager];
    MPMarkerCategory * category = [markerManager getCategory:@"storeLocations"];

    //remove old elements   
    [category.dataSource removeAllElements];

    //add markers on map
    for(int i=0; i<self.arrayStores.count; i++) {
        NSLog(@"add store %d on the map", i);
        NSDictionary* currentStore = [self.arrayStores objectAtIndex:i];
        float latitude  = [[currentStore objectForKey:@"latitude"] floatValue];
        float longitude = [[currentStore objectForKey:@"longitude"] floatValue];

        CLLocationCoordinate2D locationStore = CLLocationCoordinate2DMake(latitude, longitude);

        //create a new POI object with location 
        MPPoi * poi = [[MPPoi alloc] initWithUId:[currentStore objectForKey:@"title"] withLocation:locationStore];
        [category.dataSource addElement:poi];
        self.mapView.centerCoordinate = locationStore;
        [poi release];
    }

    //category settings 
    category.markerColor = [UIColor greenColor];
    //[category setOptimalZoom:YES];//set the zoom to be optimal : show all poi in the category
    [category setHideLabelOnTheFirstShow:NO];
    [category setAnimateAtFirstShow:YES];

} 
```

这是控制台上显示的日志：

```
2012-06-14 17:01:18.359 Koutoubia[609:607] MappyKit version:1.40
2012-06-14 17:01:18.672 Koutoubia[609:607] add store 0 on the map 
```

我做错了什么？？因为不显示标记

在文档上添加标记的文档是：

```
//add a marker on map
   MPMarkerManager *markerManager = [viewController.mapView markerManager];
   MPMarkerCategory * category = [markerManager getCategory:HMP_LOC_CATEGORY];
   //remove old elements    
   [category.dataSource removeAllElements];
   //create a new POI object with location  
   MPPoi * poi = [[MPPoi alloc] initWithUId:locationData.address withLocation:findLocation];
   [category.dataSource addElement:poi];
   [poi release]; 
```

文档的链接在[这里](http://connect.mappy.com/fr/iphone/1.30/tutorials/helloworld#Add_Mappy_POI_on_the_map)

有任何想法吗 ？？提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-15T09:15:44.547

我已经建立了解决方案，问题是我忘记初始化`MPMarkerCategory`并将其添加到`markerManager`方法中`viewDidLoad`：

```
//Marker initialization
    MPMarkerManager *markerManager = [self.mapView markerManager];
    //add a new category with green default color
    [markerManager addCategory:STORE_LOC_CATEGORY withColor:[UIColor greenColor]]; 
```

# vb.net - Visual Basic .NET 中的 MenuStrip

> ID：11038142
> 
> 赞同：2
> 
> 时间：2012-06-14T17:15:41.157
> 
> 标签：vb.net, menustrip

有人可以向我解释为什么会这样吗？当我尝试设置一个按名称调用它的 MenuStrip 项时，它会给我一个例外吗？

> Sample.exe 中出现“System.NullReferenceException”类型的未处理异常
> 
> 附加信息：对象引用未设置为对象的实例。

以下任一语句都会导致错误。

```
frmMenu.MenuStripfrmMenu.Items(key:="Enter").Enabled = False

frmMenu.MenuStripfrmMenu.Items("Enter").Enabled = False 
```

但是，当我使用整数调用 Items 时，它可以完美运行。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-14T17:56:59.857

您必须使用菜单项的*name属性，而不是**text*属性：

```
Public Sub New()
  InitializeComponent()

  Dim menu As New MenuStrip
  Dim menuOne As New ToolStripMenuItem("Menu One") With {.Name = "menuOne"}
  Dim menuTwo As New ToolStripMenuItem("Menu Two") With {.Name = "menuTwo"}
  menu.Items.Add(menuOne)
  menu.Items.Add(menuTwo)
  Me.Controls.Add(menu)

  menu.Items("menuOne").Enabled = False
  AddHandler menu.Items("menuTwo").Click, AddressOf Menu_Click
End Sub

Private Sub Menu_Click(ByVal sender As Object, ByVal e As EventArgs)
  MessageBox.Show("This menu works.")
End Sub 
```

# .net - 如何在泛型方法中指定对象类型？

> ID：11038153
> 
> 赞同：0
> 
> 时间：2012-06-14T17:16:34.037
> 
> 标签：.net, visual-studio-2005

我有以下代码来获取集合的对象类型：

```
Dim objType As Type = myCollection.[GetType]().GetProperty("Item").PropertyType 
```

那条线似乎有效，但是我需要将集合转换为指定集合类型的数据表，将对象类型作为参数传递的正确方法是什么？

我正在努力：

```
DataTableCollectionConverter.ConvertToDataTable(Of objType)(myCollection) 
```

但它甚至不被识别为有效代码

我正在使用 VS 2005，Net 2.0

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-14T17:22:05.460

你不能使用变量，即使是 type `Type`，作为泛型的类型参数。它们必须预先编译，而不是在运行时编译。这就是编译器抱怨的原因。

您必须使用该方法的弱类型版本，以某种方式依赖反射或使用 switch 语句为泛型方法提供正确的类型参数。

# c# - 最小化对自定义按钮 WPF 的影响

> ID：11038154
> 
> 赞同：0
> 
> 时间：2012-06-14T17:16:42.790
> 
> 标签：c#, wpf

所以情况是这样的：

我创建了一个自定义按钮来最小化我的 WPF 应用程序，

问题是它会立即最小化到任务栏（与具有 Win7 最小化效果的随机应用程序不同）。

我的问题是，当我的自定义按钮最小化时，我怎样才能把它放在我的自定义按钮上？

谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-14T17:59:03.447

你可以 P/Invoke [AnimateWindow](http://msdn.microsoft.com/en-us/library/windows/desktop/ms632669%28v=vs.85%29.aspx)来添加你想要的效果。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-15T09:23:12.530

在 Button Click 事件中使用它（边框导致最小化动画）

```
WindowStyle = WindowStyle.SingleBorderWindow;
WindowState = WindowState.Minimized; 
```

覆盖 OnActivate 以再次隐藏窗口最大化的边框

```
protected override void OnActivated(EventArgs e)
        {
            base.OnActivated(e);
            if (WindowStyle != WindowStyle.None)
            {
                Dispatcher.BeginInvoke(DispatcherPriority.ApplicationIdle, (DispatcherOperationCallback)delegate(object unused)
                {
                    WindowStyle = WindowStyle.None;
                    return null;
                }
               , null);
            }
        } 
```

# jquery - 多部分表单验证

> ID：11038160
> 
> 赞同：0
> 
> 时间：2012-06-14T17:16:58.520
> 
> 标签：jquery, validation, jquery-plugins

所以我有一个包含文本、整数和文件上传字段的多部分表单。
我可以将 dataAnnotations 和 validationMessageFor 用于 text 和 int 字段，但不能用于文件上传。所以我实现了以下代码来验证文件上传：

```
$(document).ready(function() {
          $("#Error").hide();
          var pdfFile = '<%=Model.PdfFile %>';
          if (pdfFile == null || pdfFile1 == "") {
              $("#Submit").click(function() {
                  var ext = $('#File').val().split('.').pop().toLowerCase();
                  var file = $('#File').val();
                  if ((!file || ext != 'pdf')) {
                      $('#Error').show();
                      return false;
                  }
                  return true;
              });
          }
      }); 
```

这段代码工作得很好，据我目前所知，但它在检查其他字段之前执行，所以它看起来很草率。换句话说，如果用户在点击提交时表单上有多个错误，则会显示文件上传的验证消息，但不会显示其他字段。如果用户随后上传了一个有效文件并再次单击提交，则会出现其他字段的验证消息。邋遢。所以我也尝试为文本框实现 jQuery 验证，但由于某种原因这不起作用：

```
$(document).ready(function () {
          $("#captionVal").hide();
          $("#Submit").click(function () {
              var caption = $("#Caption").val();
             if (!caption || caption == "") {
                  $("#captionVal").show();
                  return false;
              }
              return true;

          });
      }); 
```

似乎它总是将该字段读取为 null，因此它永远不会返回 true。

我尝试添加

```
$("Caption").change(function() { 
```

也

```
$("#Caption").bind(function() { 
```

在if语句前面，但无济于事。

我还尝试使用 jQuery 验证

```
$(document).ready(function () {
         $("#term").validate();
      }); 
```

但这根本没有做任何事情（也许我只是不明白如何使用插件？）

所以我的问题是，如何验证文本框？
我真正需要做的就是确保它们不为空，并且如果它们在提交单击时显示错误标签（不是弹出窗口）或者我如何使用验证插件？我已经下载了 .zip 文件并添加（并引用了） .validate.js 文件，但是 .validate 方法似乎没有做任何事情？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-14T17:33:57.530

确保您的表单字段具有 name 属性，并且您在插件声明期间或通过内置类功能指定验证规则。

您还可以在插件中添加自定义验证方法，并像已经内置的方法一样使用它：

例子：

```
<html>
<head>
   <script src="path/to/jquery.js">
   <script src="path/to/jquery-validator.js">
   <script>
    // Add a custom method for file validation (going off your logic - haven't tested)
    jQuery.validator.addMethod("file", function(value, element) { 
        var ext = value.split('.').pop().toLowerCase();
        return (!value || ext != 'pdf');
    }, "Please make sure your file has a valid PDF extension");

    // This will make the form pass all validation checks on submit and 
    //  display errors if any occur
    $('#myForm').validate();
   </script>
</head>
<body>
   <form id="myForm">
      <input type="text" name="email" class="required email" />
      <input type="text" name="username" class="required" />
      <input type="text" name="file" class="required file" />
      <input type="submit" value="Submit form and get your ass validated!" />
   </form>
</body>
</html> 
```

自定义验证方法参考：[http ://docs.jquery.com/Plugins/Validation/Validator/addMethod#namemethodmessage](http://docs.jquery.com/Plugins/Validation/Validator/addMethod#namemethodmessage)

**编辑**：刚刚注意到插件有一个内置的文件扩展验证方法：http: [//docs.jquery.com/Plugins/Validation/Methods/accept#extension](http://docs.jquery.com/Plugins/Validation/Methods/accept#extension)

**编辑 2：**这是不使用自定义方法（使用我刚刚发现的内置方法）进行验证的方法：

```
<input type="text" name="file" />

    $('#myForm').validate({
         rules: {
            file: {
                required: true,
                accept: "pdf"
             }
         }
    }); 
```

# ruby-on-rails - 在 Ruby on Rails 中调用外部 API 时如何处理错误/异常？

> ID：11038161
> 
> 赞同：8
> 
> 时间：2012-06-14T17:17:08.987
> 
> 标签：ruby-on-rails, api, exception-handling, ruby-on-rails-3.1, error-handling

我正在使用[ruby​​ 包装器 (createsend-ruby)与](https://github.com/campaignmonitor/createsend-ruby)[CampaignMonitor 的 API](http://www.campaignmonitor.com/api/)进行交互， 我只是想知道您在错误/异常处理方面有什么建议。我想只使用 begin/rescue/end 如下，但我只想知道是否有更好的技术来处理这类事情（当你处理 3rd-party API 时）。

```
begin
  list_id = CreateSend::List.create client_id, title, unsubscribe_page, confirmed_opt_in, confirmation_success_page
rescue Exception => e
  logger.error "[error] CampaignMonitor error: #{e}"
  return false
end 
```

例如，您会尝试捕获特定异常并单独处理它们吗？

```
rescue CreateSend::BadRequest => e 
```

或者这只是个人偏好和/或应用程序要求的问题？

感谢您的时间！

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-06-14T19:35:07.723

我通常从一个异常开始，将它们全部捕获并从那里开始。如果有一个特定的错误经常出现或需要以不同的方式处理，只需在底部的上方添加另一个救援块，以便在那里捕获异常。你做对了:)

尽可能避免`rescue Exception`，一个简单`rescue`的就可以了。

澄清一下，您可以进行任意数量的救援并确保：

```
begin
  do_something
rescue CS::BadRequest => e
  logger.error "..."
rescue CS::TimeoutError => e
  do_something_that_retries
rescue => e
  logger.error "..."
ensure
  send_email_to_admin
end 
```

# performance - ActiveMQ 5.6 中的慢代理

> ID：11038163
> 
> 赞同：1
> 
> 时间：2012-06-14T17:17:10.080
> 
> 标签：performance, response, activemq, scheduler, broker

我们最近从 ActiveMQ 4.0 迁移到 ActiveMQ 5.6，并注意到代理的响应时间减慢了大约 50-60 秒。我们使用默认的 ActiveMQ 5.6 设置并且没有配置任何参数。客户端使用 Java Impl 存根，应用服务器是 Jboss 5.1.0。我们在 ActiveMQ 中打开了 TRACE 日志记录以检查速度变慢的原因，但无法找到任何重要的东西。队列看起来因为某种原因正在等待，我们可以在日志中看到很多重复的以下行：

```
2012-06-11 02:04:38,523 | DEBUG | queue://dav/validator expiring messages .. | org.apache.activemq.broker.region.Queue | ActiveMQ Broker[localhost] Scheduler
2012-06-11 02:04:38,524 | DEBUG | dav/validator toPageIn: 0, Inflight: 0, pagedInMessages.size 0, enqueueCount: 0, dequeueCount: 0 | org.apache.activemq.broker.region.Queue | ActiveMQ Broker[localhost] Scheduler
2012-06-11 02:04:38,524 | TRACE | org.apache.activemq.broker.region.cursors.QueueStorePrefetch@e0420b:dav/validator,batchResetNeeded=false,storeHasMessages=false,size=0,cacheEnabled=true - fillBatch | org.apache.activemq.broker.region.cursors.AbstractStoreCursor | ActiveMQ Broker[localhost] Scheduler
2012-06-11 02:04:38,524 | TRACE | org.apache.activemq.broker.region.cursors.QueueStorePrefetch@e0420b:dav/validator,batchResetNeeded=false,storeHasMessages=false,size=0,cacheEnabled=true - fillBatch | org.apache.activemq.broker.region.cursors.AbstractStoreCursor | ActiveMQ Broker[localhost] Scheduler
2012-06-11 02:04:38,524 | DEBUG | queue://dav/validator expiring messages done. | org.apache.activemq.broker.region.Queue | ActiveMQ Broker[localhost] Scheduler
2012-06-11 02:04:39,824 | DEBUG | queue://dav/logger expiring messages .. | org.apache.activemq.broker.region.Queue | ActiveMQ Broker[localhost] Scheduler
2012-06-11 02:04:39,824 | DEBUG | dav/logger toPageIn: 0, Inflight: 0, pagedInMessages.size 0, enqueueCount: 1, dequeueCount: 1 | org.apache.activemq.broker.region.Queue | ActiveMQ Broker[localhost] Scheduler
2012-06-11 02:04:39,824 | TRACE | org.apache.activemq.broker.region.cursors.QueueStorePrefetch@1c64ed8:dav/logger,batchResetNeeded=false,storeHasMessages=true,size=0,cacheEnabled=true - fillBatch | org.apache.activemq.broker.region.cursors.AbstractStoreCursor | ActiveMQ Broker[localhost] Scheduler
2012-06-11 02:04:39,824 | TRACE | org.apache.activemq.broker.region.cursors.QueueStorePrefetch@1c64ed8:dav/logger,batchResetNeeded=false,storeHasMessages=true,size=0,cacheEnabled=true - fillBatch | org.apache.activemq.broker.region.cursors.AbstractStoreCursor | ActiveMQ Broker[localhost] Scheduler
2012-06-11 02:04:39,824 | DEBUG | queue://dav/logger expiring messages done. | org.apache.activemq.broker.region.Queue | ActiveMQ Broker[localhost] Scheduler
2012-06-11 02:04:39,824 | DEBUG | queue://dav/synchronizer expiring messages .. | org.apache.activemq.broker.region.Queue | ActiveMQ Broker[localhost] Scheduler
2012-06-11 02:04:39,824 | DEBUG | dav/synchronizer toPageIn: 0, Inflight: 0, pagedInMessages.size 0, enqueueCount: 1, dequeueCount: 1 | org.apache.activemq.broker.region.Queue | ActiveMQ Broker[localhost] Scheduler
2012-06-11 02:04:39,824 | TRACE | org.apache.activemq.broker.region.cursors.QueueStorePrefetch@1549ceb:dav/synchronizer,batchResetNeeded=false,storeHasMessages=true,size=0,cacheEnabled=true - fillBatch | org.apache.activemq.broker.region.cursors.AbstractStoreCursor | ActiveMQ Broker[localhost] Scheduler
2012-06-11 02:04:39,825 | TRACE | org.apache.activemq.broker.region.cursors.QueueStorePrefetch@1549ceb:dav/synchronizer,batchResetNeeded=false,storeHasMessages=true,size=0,cacheEnabled=true - fillBatch | org.apache.activemq.broker.region.cursors.AbstractStoreCursor | ActiveMQ Broker[localhost] Scheduler
2012-06-11 02:04:39,825 | DEBUG | queue://dav/synchronizer expiring messages done. | org.apache.activemq.broker.region.Queue | ActiveMQ Broker[localhost] Scheduler
2012-06-11 02:04:39,825 | DEBUG | queue://dav/executor expiring messages .. | org.apache.activemq.broker.region.Queue | ActiveMQ Broker[localhost] Scheduler
2012-06-11 02:04:39,825 | DEBUG | dav/executor toPageIn: 0, Inflight: 0, pagedInMessages.size 0, enqueueCount: 1, dequeueCount: 1 | org.apache.activemq.broker.region.Queue | ActiveMQ Broker[localhost] Scheduler
2012-06-11 02:04:39,825 | TRACE | org.apache.activemq.broker.region.cursors.QueueStorePrefetch@9b777a:dav/executor,batchResetNeeded=false,storeHasMessages=true,size=0,cacheEnabled=true - fillBatch | org.apache.activemq.broker.region.cursors.AbstractStoreCursor | ActiveMQ Broker[localhost] Scheduler
2012-06-11 02:04:39,825 | TRACE | org.apache.activemq.broker.region.cursors.QueueStorePrefetch@9b777a:dav/executor,batchResetNeeded=false,storeHasMessages=true,size=0,cacheEnabled=true - fillBatch | org.apache.activemq.broker.region.cursors.AbstractStoreCursor | ActiveMQ Broker[localhost] Scheduler 
```

我们可以从调度程序中看到上面的行，并怀疑它可能引入了等待，因此尝试使用标志 useScheduleSupport=false。我们还尝试了 persistent=false 标志，但它对时间没有影响。

这是我的 ActiveMQ.xml 文件：

```
<!--
    Licensed to the Apache Software Foundation (ASF) under one or more
    contributor license agreements.  See the NOTICE file distributed with
    this work for additional information regarding copyright ownership.
    The ASF licenses this file to You under the Apache License, Version 2.0
    (the "License"); you may not use this file except in compliance with
    the License.  You may obtain a copy of the License at

    http://www.apache.org/licenses/LICENSE-2.0

    Unless required by applicable law or agreed to in writing, software
    distributed under the License is distributed on an "AS IS" BASIS,
    WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
    See the License for the specific language governing permissions and
    limitations under the License.
-->
<!-- START SNIPPET: example -->
<beans
  xmlns="http://www.springframework.org/schema/beans"
  xmlns:amq="http://activemq.apache.org/schema/core"
  xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
  xsi:schemaLocation="http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans-2.0.xsd
  http://activemq.apache.org/schema/core http://activemq.apache.org/schema/core/activemq-core.xsd">

    <!-- Allows us to use system properties as variables in this configuration file -->
    <bean class="org.springframework.beans.factory.config.PropertyPlaceholderConfigurer">
        <property name="locations">
            <value>file:${activemq.conf}/credentials.properties</value>
        </property>
    </bean>

    <!--
        The <broker> element is used to configure the ActiveMQ broker.
    -->
    <broker xmlns="http://activemq.apache.org/schema/core" brokerName="localhost" dataDirectory="${activemq.data}" 
        useShutdownHook="false" useJmx="true" persistent="false">

        <!--
            For better performances use VM cursor and small memory limit.
            For more information, see:

            http://activemq.apache.org/message-cursors.html

            Also, if your producer is "hanging", it's probably due to producer flow control.
            For more information, see:
            http://activemq.apache.org/producer-flow-control.html
        -->
  <!--
        <destinationPolicy>
      <policyMap><policyEntries>

          <policyEntry topic="FOO.>">
            <dispatchPolicy>
              <strictOrderDispatchPolicy />
            </dispatchPolicy>
            <subscriptionRecoveryPolicy>
              <lastImageSubscriptionRecoveryPolicy />
            </subscriptionRecoveryPolicy>
          </policyEntry>

      </policyEntries></policyMap>
    </destinationPolicy>
  -->

<destinationPolicy>
            <policyMap>
              <policyEntries>
                <policyEntry topic=">" producerFlowControl="false" memoryLimit="1mb">
                  <pendingSubscriberPolicy>
                    <vmCursor />
                  </pendingSubscriberPolicy>
                </policyEntry>
                <policyEntry queue=">" producerFlowControl="false" memoryLimit="1mb">
                  <!-- Use VM cursor for better latency
                       For more information, see:

                       http://activemq.apache.org/message-cursors.html

                  <pendingQueuePolicy>
                    <vmQueueCursor/>
                  </pendingQueuePolicy>
                  -->
                </policyEntry>
              </policyEntries>
            </policyMap>
        </destinationPolicy>
        <!--
            The managementContext is used to configure how ActiveMQ is exposed in
            JMX. By default, ActiveMQ uses the MBean server that is started by
            the JVM. For more information, see:

            http://activemq.apache.org/jmx.html
        -->
        <managementContext>
            <managementContext createConnector="false"/>
        </managementContext>

        <!--
            Configure message persistence for the broker. The default persistence
            mechanism is the KahaDB store (identified by the kahaDB tag).
            For more information, see:

            http://activemq.apache.org/persistence.html
        -->
        <persistenceAdapter>
            <kahaDB directory="${activemq.data}/kahadb"/>
        </persistenceAdapter>

          <!--
            The systemUsage controls the maximum amount of space the broker will
            use before slowing down producers. For more information, see:
            http://activemq.apache.org/producer-flow-control.html
            If using ActiveMQ embedded - the following limits could safely be used:

        <systemUsage>
            <systemUsage>
                <memoryUsage>
                    <memoryUsage limit="20 mb"/>
                </memoryUsage>
                <storeUsage>
                    <storeUsage limit="1 gb"/>
                </storeUsage>
                <tempUsage>
                    <tempUsage limit="100 mb"/>
                </tempUsage>
            </systemUsage>
        </systemUsage>

          <systemUsage>
            <systemUsage>
                <memoryUsage>
                    <memoryUsage limit="64 mb"/>
                </memoryUsage>
                <storeUsage>
                    <storeUsage limit="100 gb"/>
                </storeUsage>
                <tempUsage>
                    <tempUsage limit="50 gb"/>
                </tempUsage>
            </systemUsage>
        </systemUsage>-->

        <!--
            The transport connectors expose ActiveMQ over a given protocol to
            clients and other brokers. For more information, see:

            http://activemq.apache.org/configuring-transports.html
        -->
        <transportConnectors>
            <transportConnector name="default" uri="tcp://localhost:61616?jms.useAsyncSend=true&amp;jms.prefetchPolicy.all=10&amp;wireFormat.maxInactivityDuration=0" discoveryUri="multicast://default"/>
        </transportConnectors> 
```

请帮助了解导致响应额外延迟的根本原因。这个额外的响应时间导致我们未能达到我们的生产标准响应时间限制。此外，客户端等待数据超时，因为它们被配置为在达到时间限制后自动关闭连接。

# ruby - 如何使用模块 mixin 向 ruby 类添加一个行为类似于哈希的方法？

> ID：11038170
> 
> 赞同：-1
> 
> 时间：2012-06-14T17:17:37.913
> 
> 标签：ruby, metaprogramming

假设我想使用 Ruby Module Mixin 元编程咒语定义一个方法名称（：key）（创建我自己的小 DSL）

```
module MyDsl

  def self.included(base)
    base.extend(ClassMethods)
  end

  module ClassMethods
    def mymethod(name)

      # name("key") 
      method_name = "#{name}".to_sym
      define_method(method_name) do |arg|
         # ...
      end

    end
  end

end 
```

如何定义方法

```
name[:key]
name[:key]=val
name[:key]+=3
name[:key]++ 
```

等等

Ruby define_method(method_name) 允许指定 [] 数组/散列访问并设置值、递增值等的语法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-15T22:37:21.893

您的方法`name`必须返回一个具有方法`[]`并已`[]=`定义的对象。这`+=`只是一个快捷方式，`++`在 Ruby 中没有。

如果您需要大多数方法`Hash`可用，请使用 Hash 或查看子类化[`DelegateClass(Hash)`](http://www.ruby-doc.org/stdlib-1.9.3/libdoc/delegate/rdoc/Object.html#method-i-DelegateClass)或[`SimpleDelegator`](http://www.ruby-doc.org/stdlib-1.9.3/libdoc/delegate/rdoc/SimpleDelegator.html)

# perl - Perl 从递归目录打开文件

> ID：11038174
> 
> 赞同：0
> 
> 时间：2012-06-14T17:17:51.687
> 
> 标签：perl, recursion

所以我的程序应该递归地遍历一个目录，然后对于目录中的每个文件，打开文件并搜索单词“error”“fail”和“failed”。然后它应该将这些单词出现的实例以及这些单词之后的行中的其余字符写入命令提示符中指定的文件。我在确保程序对目录中找到的文件执行搜索时遇到了一些麻烦。现在它确实通过目录进行递归，甚至创建一个要写出的文件，但是，它似乎没有搜索在递归中找到的文件。这是我的代码：

```
#!/usr/local/bin/perl

use warnings;
use strict;
use File::Find;

my $argument2 = $ARGV[0];
my $dir = "c:/program/Scripts/Directory1"; #directory to search through

open FILE, ">>$argument2" or die $!;   #file to write out 
my $unsuccessful = 0;
my @errors = ();
my @failures= ();
my @failures2 = ();
my @name = ();
my @file;
my $file;

my $filename;

opendir(DIR, $dir) or die $!;

while($file = readdir(DIR)){
next if($file =~ m/^\./);

foreach(0..$#file){
    print $_;
    open(FILELIST, '<', $_);    

    while(<FILELIST>){

    if (/Unsuccessful/i){
        $unsuccessful = 1;
    }
    if(/ERROR/ ){
        push(@errors, "ERROR in line $.\n");
        print  "\t\tERROR in line $.:$1\n" if (/Error\s+(.+)/);

    }
    if(/fail/i ){
        push(@failures, "ERROR in line $.\n");
        print FILE "ERROR in line $.:$1\n" if (/fail\s+(.+)/);

    }
    if(/failed/i ){
        push(@failures2, "ERROR in line $.\n");
        print FILE "ERROR in line $.:$1\n" if (/failed\s+(.+)/);

    }

    if ($unsuccessful){

    }

    }
    close FILELIST;

    }
}

closedir(DIR);
close FILE; 
```

所以，澄清一下，我的问题是“while()”循环中包含的搜索似乎没有在目录中找到的文件上递归执行。您可以就为什么会发生这种情况提供任何评论/建议/帮助将非常有帮助。我是 Perl 的新手，所以一些示例代码也可以帮助我理解你想说的话。非常感谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-14T17:39:19.273

通常，当我想对递归文件做某事时，我会从 find2perl 开始。-print 为我生成样板`wanted`文件，我可以修改该函数来做我想做的任何事情。

例如

```
# Traverse desired filesystems
File::Find::find({wanted => \&wanted}, '.');
exit;
sub wanted {
    return unless -f $File::Find::name;
    return unless -R $File::Find::name;
    open (F,"<",$File::Find::name) or warn("Error opening $File::Find::name : $!\n");

    while(<F>) {
        if(m/error/) { print; }
        if(m/fail/) { print; }
    }   
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-14T17:44:28.100

这是递归 perl 目录列表的示例。实际上，我可能会使用 file::find，或者实际上只是 grep -R，但我假设这是某种家庭作业：

```
 use strict;

my $dir = $ARGV[0];
my $level = 0;

depthFirstDirectoryList($dir, $level);

sub depthFirstDirectoryList{
    my ($dir, $level) = @_;

    opendir (my $ind, $dir) or die "Can't open $dir for reading: $!\n";

    while(my $file = readdir($ind)){
        if(-d "$dir/$file" && $file ne "." && $file ne ".."){
            depthFirstDirectoryList("$dir/$file", $level + 1);
        }
        else{
            no warnings 'uninitialized';
            print "\t" x $level . "file: $dir/$file\n";
        }
    }

} 

```

# algorithm - 遍历二叉树的 O(n) 时间非递归过程

> ID：11038177
> 
> 赞同：6
> 
> 时间：2012-06-14T17:18:11.560
> 
> 标签：algorithm, binary-tree

我正在阅读一本名为“**算法简介**”的书。我想你们很多人都知道。我刚刚碰到一个似乎相当困难的问题：

> 编写一个 O(n) 时间的非递归过程，给定一个 n 节点二叉树，打印出每个节点的键。在树本身之外使用不超过恒定的额外空间，并且在过程期间不要修改树，即使是临时的。

我看到还有这样一个问题：[How to traverse a binary tree in O(n) time without extra memory](https://stackoverflow.com/questions/718650/how-to-traverse-a-binary-tree-in-on-time-without-extra-memory)但主要区别是我不能修改树。我正在考虑使用一些访问过的标志，但我还没有提炼出正确的解决方案。这可能是我看不到的显而易见的事情。你将如何设计一种算法来解决这个问题？甚至一些指向答案的指针也将不胜感激。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-06-14T17:38:08.043

如果树在两个方向上链接，您可以这样做：

```
assert root.parent is null

now, old = root, null
while now != null:
    print now.label
    if leaf(now):
        now, old = now.parent, now
    else:
        if old == now.right:
            now, old = now.parent, now
        if old == now.left:
            now, old = now.right, now            
        if old == now.parent:
            now, old = now.left, now 
```

这以根、左、右顺序打印，但您可以得到任何您喜欢的顺序。

如果树只在一个方向上链接，我认为你不能做到这一点。你可以看看[森林砍伐](http://en.wikipedia.org/wiki/Deforestation_%28computer_science%29)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-12-24T01:51:21.633

有完整的代码（在 Ruby 中）。

**例如，我复制了与“算法简介”**一书中相同的“n 节点二叉树” 。

```
class Node
  attr_accessor :key, :parent, :left, :right

  def initialize(key, parent)
    @key = key
    @parent = parent
  end
end

class Tree
  def initialize(root)
    @root = root
  end

  def print_with_constant_space
    current, old = @root, nil
    while current do
      # Going UP
      if old && old.parent == current
        # Go right if exists
        # otherwise continue up
        next_node = (current.right || current.parent)
        current, old = next_node, current

      # Going DOWN
      else
        puts current.key

        # Go left if exists
        # otherwise go right if exists
        # otherwise go up
        next_node = (current.left || current.right || current.parent)
        current, old = next_node, current
      end
    end
  end
end

root         = Node.new(0, nil)
root.left    = (node_1  = Node.new(1, root))
node_1.left  = (node_2  = Node.new(2, node_1))
node_2.right = (node_3  = Node.new(3, node_1))
node_3.left  = (node_4  = Node.new(4, node_3))

node_1.right = (node_5  = Node.new(5, root))
node_5.left  = (node_6  = Node.new(6, node_5))
node_6.right = (node_7  = Node.new(7, node_5))
node_7.right = (node_8  = Node.new(8, node_5))
node_8.left  = (node_9  = Node.new(9, node_8))
node_9.right = (node_10 = Node.new(10, node_8))
node_8.right = (node_11 = Node.new(11, node_5))

node_5.right = (node_12 = Node.new(12, root))
node_12.left = (node_13 = Node.new(13, node_12))

tree = Tree.new(root)
tree.print_with_constant_space 
```

我希望它有帮助...

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-01-02T16:56:46.483

您将不得不按顺序遍历树。在同一本书中，在处理二叉搜索树一章的第一组练习中有一个提示。去引用：

> 有一个使用堆栈作为辅助数据结构的简单解决方案和一个更复杂但优雅的解决方案，它不使用堆栈但假设可以测试两个指针是否相等。

你可以在这里找到一个实现：http: [//tech.technoflirt.com/2011/03/04/non-recursive-tree-traversal-in-on-using-constant-space/](http://tech.technoflirt.com/2011/03/04/non-recursive-tree-traversal-in-on-using-constant-space/)

# java - isKeyDown 在 Java 中不起作用

> ID：11038178
> 
> 赞同：0
> 
> 时间：2012-06-14T17:18:32.273
> 
> 标签：java, image, input

我只是在玩一些 java 编程，所以当我按下一个键时，我想要一张图片在屏幕上移动。我怎么会收到一条消息说“Thu Jun 14 13:14:23 EDT 2012 INFO:Controllers not available”这是我在这个页面上的代码

```
public class Menu extends BasicGameState
{
    Image sun;
    int sunX = 200;
    int sunY = 200;

    public void init(GameContainer gc, StateBasedGame sbg) throws SlickException
    {
        sun = new Image("res/sun.png");
    }

    public void render(GameContainer gc, StateBasedGame sbg, Graphics g) throws SlickException
    {
        g.drawImage(sun, sunX, sunY);
    }

    public void update(GameContainer gc, StateBasedGame sbg, int delta) throws SlickException
    {
        Input input = gc.getInput();
        if(input.isKeyDown(Input.KEY_UP)); {sunY -= 1;}
        if(input.isKeyDown(Input.KEY_DOWN)); {sunY += 1;}
        if(input.isKeyDown(Input.KEY_LEFT)); {sunX -= 1;}
        if(input.isKeyDown(Input.KEY_RIGHT)); {sunX += 1;}
    }
} 
```

现在，如果我要像这样运行它，对象会在同一个位置说，但是如果我只有一个 if 语句，对象将在我不按键的情况下向方向移动，所以如果我有`if(input.isKeyDown(Input.KEY_UP)); {sunY -= 1;}`应用程序启动太阳向上移动并离开屏幕。我做错了什么导致这种情况发生？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-14T17:36:36.363

尝试将其更改 `if(input.isKeyDown(Input.KEY_UP)); {sunY -= 1;}` 为此：D

```
if(input.isKeyDown(Input.KEY_UP)) {sunY -= 1;} 
```

# javascript - Microsoft JScript 运行时错误：对象预期异常

> ID：11038179
> 
> 赞同：1
> 
> 时间：2012-06-14T17:18:36.127
> 
> 标签：javascript, asp.net, .net, .net-4.0, jscript

我在运行时遇到异常，有人可以提出什么问题吗？

```
Microsoft JScript runtime error: Object expected 
```

异常出现在第一行：

```
aspxAddHoverItems('tabMaster',[[['dxtcTabHover_Glass'],[''],['T0','T1','T2','T3'],['','T'],[[''],[''],[''],['']],['Img']],[['dxtcActiveTabHover_Glass'],[''],['AT0','AT1','AT2','AT3'],['','T'],[[''],[''],[''],['']],['Img']]]);

var dxo = new ASPxClientTabControl('tabMaster');
window['tabMaster'] = dxo;
dxo.uniqueID = 'ctl00$tabMaster';
dxo.RegisterServerEventAssigned(['TabClick']);
dxo.emptyHeight = true;
dxo.emptyWidth = true;
dxo.tabCount=4;
dxo.InlineInitialize(); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-14T17:22:58.983

`aspxAddHoverItems`正如错误所暗示的那样，根本无法识别。确保在您的项目中包含所有必要的引用和程序集。

这可能正是您所需要的：[如何：手动注册 DevExpress 扩展以开始在 MVC Web 应用程序中使用它们](http://documentation.devexpress.com/#AspNet/CustomDocument8163)

一些额外的阅读：[谷歌搜索：aspxAddHoverItems 没有定义](https://www.google.com/search?sugexp=chrome,mod=4&sourceid=chrome&ie=UTF-8&q=aspxAddHoverItems#hl=en&sclient=psy-ab&q=aspxAddHoverItems%20is%20not%20defined&oq=aspxAddHoverItems%20is%20not%20defined&aq=f&aqi=g-mK1&aql=&gs_l=serp.3..0i5i30.3394.4734.0.4774.15.10.0.2.2.0.172.885.6j3.9.0...0.0.oDABEIMe8PE&pbx=1&bav=on.2,or.r_gc.r_pw.r_cp.r_qf.,cf.osb&fp=b1b82b70972cdaaf&biw=1581&bih=1352)

# node.js - 无法使用 node.couchapp.js 推送 couchapp

> ID：11038180
> 
> 赞同：0
> 
> 时间：2012-06-14T17:18:36.210
> 
> 标签：node.js, couchapp

我正在尝试在 Windows 上推送一个简单的 couchapp，但我正在做某事。错误的。

首先，我使用 npm 安装 couchapp：

```
D:\test>npm -g install couchapp
D:\test>npm install couchapp 
```

我知道有两个不同的 couchapp，但我使用的是 node couchapp：

```
D:\test>couchapp
The "sys" module is now called "util". It should have a similar interface.
couchapp -- utility for creating couchapps

Usage:
  couchapp <command> app.js http://localhost:5984/dbname

Commands:
  push   : Push app once to server.
  sync   : Push app then watch local files for changes.
  boiler : Create a boiler project. 
```

现在我创建一个沙发应用程序：

沙发锅炉

这将创建一个 app.js 和一个包含简单 couchapp 的附件文件夹。现在我想把它推到couchdb：

```
couchapp push app.js http://localhost:5984/test 
```

这会导致以下错误：

```
node.js:201
        throw e; // process.nextTick error, or 'error' event on first tick
              ^
Error: Cannot find module 'app.js'
    at Function._resolveFilename (module.js:332:11)
    at Function._load (module.js:279:25)
    at Module.require (module.js:354:17)
    at require (module.js:370:17)
    at Object.<anonymous> (D:\test\node_modules\couchapp\bin.js:78:24)
    at Module._compile (module.js:441:26)
    at Object..js (module.js:459:10)
    at Module.load (module.js:348:31)
    at Function._load (module.js:308:12)
    at Array.0 (module.js:479:10) 
```

我在做什么错？请帮我

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-14T18:12:10.147

我不知道这个问题的答案，但我也许可以帮助您调试问题。如果您转到此[行](https://github.com/mikeal/node.couchapp.js/blob/master/bin.js#L11)并 console.log 的结果，`path.join(process.cwd(), path.normalize(pathname))`那么您可以找出 couchapp 试图获取您的 app.js 文件的位置。

另外，如果可能的话，您应该查看 kanso.js。上次我创建了一个 couchapp（六个月前）kanso.js 比 node.couchapp.js 好很多。

# javascript - 音频播放开始选框

> ID：11038200
> 
> 赞同：6
> 
> 时间：2012-06-14T17:19:50.937
> 
> 标签：javascript, html

我正在尝试找到一种方法来为 html 中的 marquee 标签设置时间标签。整个想法是以字幕格式显示歌曲的字幕，并且仅当用户单击开始播放音频时才开始字幕。

我正在使用以下代码播放音频文件，（在 html-5 中）

```
<audio controls="controls" loop="loop">
    <source src="song.ogg" type="audio/ogg" />
    <source src="song.mp3" type="audio/mpeg" />
    Your browser does not support the audio element.Please use chrome.
</audio> 
```

我正在做的是将此音频文件设置为自动播放，并让选框在页面加载时开始（这是默认设置），但这在高速网络上效果很好，对于低速网络，出现的问题是音频内容的加载会延迟，因此字幕文本开始在音频之前运行。这不酷

请建议我如何通过 javascript 完成此问题的解决方案？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-14T17:27:32.540

我不确定你如何开始你的字幕标签，但你应该等待`play`- 你的音频事件 - 元素这样做。当元素开始播放时，自动播放会触发此事件。

请注意，`marquee`不推荐使用 -tag，我会改用 css-transitions，它可以通过添加特定的 className 轻松触发。

给你的 media-Element 一个 id，这样你就可以使用 javascript 轻松访问它：

```
<audio id="audio" controls="controls" loop="loop">
    <source src="song.ogg" type="audio/ogg" />
    <source src="song.mp3" type="audio/mpeg" />
    Your browser does not support the audio element.Please use chrome.
</audio> 
```

和 JavaScript - 代码：

```
var audioEl = document.getElementById("audio");

audioEl.addEventListener('play',function(){
    //start your marquee in here
}); 
```

[您可以在W3C 页面](http://www.w3.org/TR/html5/media-elements.html#mediaevents)上找到媒体元素支持的所有事件，并说明它们何时被触发。这为您提供了有关如何与 javascript 中的媒体元素交互的概述。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-14T17:28:14.940

[http://jsfiddle.net/kykMs/1/](http://jsfiddle.net/kykMs/1/)

把你的歌名放在`span`最初：

```
<span id="song">Artist - Song Title</span> 
```

然后在页面加载时将其替换为`marquee`：

```
window.onload = function() {
    var elem = document.getElementById("song");

    var marq = document.createElement('marquee');
    marq.innerHTML = elem.innerHTML;

    document.getElementById("player").removeChild(elem);
    document.getElementById("player").appendChild(marq);
} 
```

# java - java中大整数流的统计

> ID：11038207
> 
> 赞同：6
> 
> 时间：2012-06-14T17:20:27.973
> 
> 标签：java, arraylist

我正在从文件中读取大量整数，最后我想从这些整数中获取一些基本统计数据（中位数、平均值、第 25 个百分位数、第 75 个百分位数等）。我可以随时随地计算其中的一些统计数字，但在我看来，计算第 25/75 个百分位数会很复杂。我认为最简单的方法是将整数放在一个列表中并从该列表中进行统计。但是，由于列表太大，它可能会因使用如此多的内存而减慢程序的速度。你们有什么建议吗？这就是我获取数据的方式和我想到的两个选项：

```
Scanner input = new Scanner(new File("name"));
ArrayList<Integer> lits= new ArrayList<Integer>();
while(input.hasNextLine()){
  list.add(Integer.parseInt(input.nextLine()));
}
doStatistics(list); 
```

或者

```
Scanner input = new Scanner(new File("name"));
while(input.hasNextLine()){
   //I dont know how I would acomplish this for the percentile stats
   acqquireStats(Integer.parseInt(input.nextLine()));
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-14T18:01:05.333

鉴于值的数量明显小于样本的数量，存储每个值的数量比存储每个值的数量更有意义。

```
Long[] samples = new Long[101];

while(input.hasNextLine()){
    try{
      samples[Math.max(0, Math.min(100, Integer.parseInt(input.nextLine())))];
    } catch (ParseException e){/*not a number*/}
} 
```

这给您留下了仅由一个小数组表示的大量数据。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-14T17:25:53.570

本文和 John D. Cook 是您最好的选择：

[http://www.codeproject.com/Articles/33781/Calculate-Percentiles-in-O-1-space-and-On-time](http://www.codeproject.com/Articles/33781/Calculate-Percentiles-in-O-1-space-and-O-n-time)

# c# - 强制加载 FlowDocument？

> ID：11038213
> 
> 赞同：0
> 
> 时间：2012-06-14T17:21:10.920
> 
> 标签：c#, wpf, printing, flowdocument

我正在尝试打印出用户正在查看的 FlowDocument。我编写了一个例程来创建原始文档的副本，这样更改（来自 PrintDialog）就不会反映到 DocumentViewer 中。

不幸的是，我的副本似乎丢失了绑定到其字段的所有信息。我已经尝试重置 DataContext，但副本的 IsLoaded 属性仍然返回 false，让我相信绑定没有发生。

有任何想法吗？

这是我用来复制文档的代码：

```
private static void AddDocument(FlowDocument from, FlowDocument to)
{
    TextRange tr = new TextRange(from.ContentStart, from.ContentEnd);

    using (System.IO.MemoryStream ms = new System.IO.MemoryStream())
    {
        TextRange tr2 = null;

        System.Windows.Markup.XamlWriter.Save(tr, ms);
        tr.Save(ms, DataFormats.XamlPackage, true);
        tr2 = new TextRange(to.ContentEnd, to.ContentEnd);
        tr2.Load(ms, DataFormats.XamlPackage);
    }
} 
```

这是我用来打印文档的代码：

```
public static void PrintFlowDocument(FlowDocument fd, string title)
{
    PrintDialog pd = new PrintDialog();
    IDocumentPaginatorSource idps = null;
    FlowDocument flowDoc = new FlowDocument();

    AddDocument(fd, flowDoc);

    flowDoc.DataContext = fd.DataContext;
    flowDoc.PageHeight = pd.PrintableAreaHeight;
    flowDoc.PageWidth = pd.PrintableAreaWidth;
    flowDoc.PagePadding = new Thickness(50);
    flowDoc.ColumnGap = 0;
    flowDoc.ColumnWidth = pd.PrintableAreaWidth;

    idps = flowDoc;

    if (pd.ShowDialog() == true)
    {
        pd.PrintDocument(idps.DocumentPaginator, title);
    }
} 
```

在此先感谢，
桑尼

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-14T17:48:12.920

注意到这条线的一些问题了吗？

```
tr2 = new TextRange(to.ContentEnd, to.ContentEnd); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-15T12:38:57.210

我有类似的问题，并发现将文档创建强制到后台线程使绑定有机会触发。否则，它不会发生在 UI 线程上。

因此，如果您的复制文档方法是一个函数，它将是这样的：

```
 Dim flowDoc As FlowDocument = 
                DirectCast(<ViewInstance>.UIDispatcher.Invoke(Function() 
                               AddFlowDocument(fd),
                               Windows.Threading.DispatcherPriority.Background), 
                           FlowDocument) 
```

# symfony - Symfony，如何在 Twig 扩展类中生成资产 URL？

> ID：11038214
> 
> 赞同：5
> 
> 时间：2012-06-14T17:21:32.380
> 
> 标签：symfony, twig

我有一个类扩展`\Twig_Extension`如下：

```
class MYTwigExtension extends \Twig_Extension
{

    protected $doctrine;

    protected $router;

    public function __construct(RegistryInterface $doctrine , $router)
    {
        $this->doctrine = $doctrine;
        $this->router = $router;

    }

    public function auth_links($user , $request)
    {
       // Some other codes here ...

       // HOW TO GENERATE $iconlink which is like '/path/to/an/image'

       $html .= "<img src=\"$iconlink\" alt=\"\" />  ";  

       echo $html;
    }

} 
```

我的问题是如何在 Twig 扩展中生成资产链接？我想替换我班上的资产助手。基本上我不知道我必须在这里注入或使用什么！提前致谢。

```
 <img src="{{ asset('img/icons/modules/timesheet.png') }}" alt="" /> 
```

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-06-14T18:32:13.407

您可以直接使用**templating.helper.assets**服务。

```
use Symfony\Component\DependencyInjection\ContainerInterface;

public function __construct(ContainerInterface $container)
{
    $this->container = $container;
} 
```

并像这样使用它：

```
$this->container->get('templating.helper.assets')->getUrl($iconlink); 
```

在这种情况下，直接注入**templating.helper.assets**不起作用，因为 twig 扩展不能在请求范围内。请参阅此处的文档：[https ://symfony.com/doc/2.3/cookbook/service_container/scopes.html#using-a-service-from-a-narrower-scope](https://symfony.com/doc/2.3/cookbook/service_container/scopes.html#using-a-service-from-a-narrower-scope)

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-08-14T17:14:14.380

我不想处理依赖注入容器。这就是我所做的：

```
use Twig_Environment as Environment;

class MyTwigExtension extends \Twig_Extension
{
    protected $twig;
    protected $assetFunction;

    public function initRuntime(Environment $twig)
    {
        $this->twig = $twig;
    }

    protected function asset($asset)
    {
        if (empty($this->assetFunction)) {
             $this->assetFunction = $this->twig->getFunction('asset')->getCallable();
        }
        return call_user_func($this->assetFunction, $asset);
    } 
```

我查看了`Twig_Extension`类代码，并在`initRuntime`那里找到了这个方法，可以在我们的自定义扩展类中被覆盖。它接收`Twig_Environment`作为参数！这个对象有一个`getFunction`方法，它返回一个`Twig_Function`实例。我们只需要传递函数名（`asset`在我们的例子中是 ）。

`Twig_Function`对象有一个`getCallable`方法，所以我们最终可以有一个可调用的函数`asset`。

我进一步为我自己的扩展类创建了一个`asset`方法。在它的其他任何地方，我都可以简单地调用并获得与模板中`$this->asset()`相同的结果。`{{ asset() }}`

**编辑**：清除缓存时，`getFunction`调用`initRuntime`会引发范围异常。所以我把它移到了自定义`asset`方法。它工作正常。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2016-04-10T16:17:36.987

这是 Symfony 2.8 的一种简单而干净的方法：

服务.yml：

```
app.twig_extension:
    class: Path\To\AcmeExtension
    arguments:
        assets: "@templating.helper.assets" 
```

在 TWIG 扩展中：

```
use Symfony\Bundle\FrameworkBundle\Templating\Helper\AssetsHelper;

class AcmeExtension
{
    protected $assets;

    public function __construct(AssetsHelper $assets)
    {
        $this->assets = $assets;
    }
} 
```

然后您可以在扩展的任何功能中使用它，如下所示：

```
$this->assets->getUrl('myurl'); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2021-11-10T15:00:29.407

在对我有用的**Symfony 5.3**中：（只需做资产扩展所做的事情并注入包）

```
 use Symfony\Component\Asset\Packages;
use Twig\Extension\AbstractExtension;
use Twig\Extension\ExtensionInterface;

class AppExtension extends AbstractExtension implements ExtensionInterface
{
    public function __construct(Packages $packages)
    {
        $this->packages = $packages;
    }

    // ... your other methods

    private function asset($path, $packageName = null)
    {
        return $this->packages->getUrl($path, $packageName);
    }
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2016-02-18T21:27:01.410

在适用于我的**Symfony 2.8中：**

```
# services.yml
services:
    app.twig_extension:
        class: AppBundle\Twig\AppTwigExtension
        public: false
        arguments:
            - @templating.helper.assets
        tags:
            - { name: twig.extension } 
```

AppTwigExtension 类：

```
namespace AppBundle\Twig;

use Symfony\Bundle\FrameworkBundle\Templating\Helper\AssetsHelper;

/**
 * Class AppTwigExtension
 * @package AppBundle\Twig
 */
class AppTwigExtension extends \Twig_Extension
{
    const IMG_PATH = 'bundles/app/images/';

    private $assetsHelper;

    public function __construct(AssetsHelper $assetsHelper)
    {
        $this->assetsHelper = $assetsHelper;
    }

    public function getFilters()
    {
        return array(
            new \Twig_SimpleFilter('img', array($this, 'imagePathFilter'))
        );
    }

    /**
     * Get image path relatively to host
     * Usage in Twig template: {{ 'my_image.png'|img }} - equal to
     * {{ asset('bundles/app/images/my_image.png') }} in Twig template:
     *
     * @param string $imageName (e.g. my_image.png)
     * @return string
     */
    public function imagePathFilter($imageName)
    {
        return $this->assetsHelper->getUrl(self::IMG_PATH . $imageName);
    }

    public function getName()
    {
        return 'app_twig_extension';
    }
} 
```

# php - 如何使用 YQL 在 Yahoo Mail 中创建文件夹？

> ID：11038217
> 
> 赞同：0
> 
> 时间：2012-06-14T17:21:41.310
> 
> 标签：php, api, yahoo, yql

我正在尝试这样做：

```
INSERT INTO ymail.folders(folder.folderInfo.name) VALUES('Lykebox') 
```

但我收到此错误：

> 表 'ymail.folders' 中的动词 'insert' 没有匹配的端点。

如果不可能，请告诉我使用 PHP 创建文件夹的任何方法。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-14T17:31:46.583

也许尝试使用[api](http://developer.yahoo.com/mail/docs/user_guide/CreateFolder.html#CreateFolderExamples)创建一个文件夹 **CreateFolder**将一个新的个人文件夹添加到用户的 MyFolder 列表中。文件夹名称只能是字母、数字以及连字符 (-)、空格 ( ) 和下划线 (_) 字符。

[这里](http://developer.yahoo.com/mail/docs/user_guide/JSON-RPCEndpoint.html#JSON-RPCSampleRequest)优先考虑 json 端点imho :)

# mysql - 从 MySQL 查询中排除多个 ID

> ID：11038218
> 
> 赞同：3
> 
> 时间：2012-06-14T17:21:51.747
> 
> 标签：mysql

希望这只是语法的一个例子。

我正在为 Wordpress 编写一个自定义搜索功能，除了我想排除几个依赖于他们 ID 的结果之外，一切都很好。

这适用于一个 ID

```
$sqlp_page ="select ID, post_title, post_name, post_excerpt from wp_posts where post_type='page' and ID != '236' ";
$sqlp_page .="and post_status='publish' ";
$sqlp_page .="and (post_title like '%".$_GET['s']."%' ";
$sqlp_page .="or post_content like '%".$_GET['s']."%') ";
$sqlp_page .="and post_status='publish' ";
$sqlp_page .="order by id ASC "; 
```

但我似乎不能为 ID 传递多个值。我已经在网上搜索并尝试了几种不同的方法，但似乎没有什么对我有用。

```
$sqlp_page ="select ID, post_title, post_name, post_excerpt from wp_posts where post_type='page' and ID != '236,239' "; 
```

或者

```
$sqlp_page ="select ID, post_title, post_name, post_excerpt from wp_posts where post_type='page' and ID != '236' or '239' "; 
```

和

```
$sqlp_page .="and ID != '236' ";
$sqlp_page .="and ID != '239' "; 
```

但似乎没有任何效果。非常感谢任何帮助。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-06-14T17:23:35.140

使用[`NOT IN`](http://www.techonthenet.com/sql/in.php)：

```
$sqlp_page ="select ID, post_title, post_name, post_excerpt 
from wp_posts where post_type='page' and ID NOT IN ('236','239') "; 
```

在内部`NOT IN`，您需要`ID`用逗号分隔多个值。

# javascript - 谷歌浏览器中的地理位置错误回调

> ID：11038221
> 
> 赞同：1
> 
> 时间：2012-06-14T17:22:00.370
> 
> 标签：javascript, google-chrome, geolocation

Google chrome 浏览器 (19.0.1084.56 m) 中有一个奇怪的错误（或功能？）。我正在尝试在我的页面上运行下一个 JavaScript 代码：

```
//...
function successCallback(position) {
    console.log('success');
}

function errorCallback(error) {
    console.log('error');
}

navigator.geolocation.getCurrentPosition(
    successCallback,
    errorCallback,
    {timeout: 1000});
//... 
```

浏览器问我：“站点名称想要跟踪您的物理位置 [允许] [拒绝] ...了解更多 [X]”。

当我单击允许/拒绝按钮时，回调函数工作正常。但是当我点击 [X] 按钮时没有任何反应:( 有没有办法检测点击 [X]？

PS 貌似 Firefox 有相同的功能[Firefox 11 和 GeoLocation 拒绝回调](https://stackoverflow.com/questions/9769409/firefox-11-and-geolocation-denial-callback)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-14T18:28:22.063

我相信**Chrome 没有****忽略**选项的回调。

如果我是你，我会尝试实现超时回调。

## 示例代码：

```
 _callback = false;
function successCallback(position) {
    _callback = true;
    console.log('success');
}

function errorCallback(error) {
     _callback = true; 
    console.log('error');
}

setTimeout(function(){if(!_callback)console.log('ignored')}, 10000); //chanche the timeout according your needs

navigator.geolocation.getCurrentPosition(
    successCallback,
    errorCallback,
    {timeout: 1000}); 
```

# c++ - c++。将二进制文件读入缓冲区后，如何以十六进制显示缓冲区？

> ID：11038226
> 
> 赞同：1
> 
> 时间：2012-06-14T17:22:09.570
> 
> 标签：c++, filestream, binaryfiles

基本上我想要做的是读取一个二进制文件，并在地址例如 0x8000 处提取 4 个连续值。例如，这 4 个数字是 89 ab cd ef。我想读取这些值并将它们存储到缓冲区中，然后将缓冲区转换为 int 类型。我尝试了以下方法：

```
ifstream *pF = new ifstream();  
buffer = new char[4];  
memset(buffer, 0, 4);  
pF->read(buffer, 4); 
```

当我尝试

```
cout << buffer << endl; 
```

什么都没有发生，我保证这个位置有值（我可以在十六进制查看器中查看二进制文件）。谁能告诉我将缓冲区转换为 int 类型并正确显示它的方法？谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-14T17:24:40.530

**更新**

```
int number = buffer[0];
for (int i = 0; i < 4; ++i)
{
    number <<= 8;
    number |= buffer[i];
} 
```

它还取决于 Little endian 和 Bit endian 符号。如果你用另一种方式组成你的号码，你可以使用`number |= buffer[3 - i]`

为了显示十六进制整数，您可以使用

```
#include <iomanip>
cout << hex << number; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-14T17:40:31.010

```
cout << hex << buffer[0] << buffer[1] << buffer[2] << buffer[3] << endl; 
```

见[http://www.cplusplus.com/reference/iostream/manipulators/hex/](http://www.cplusplus.com/reference/iostream/manipulators/hex/)

# hibernate - 使用 Hibernate Criteria 和 DISTINCT_ROOT_ENTITY 进行分页

> ID：11038234
> 
> 赞同：15
> 
> 时间：2012-06-14T17:22:30.263
> 
> 标签：hibernate, hibernate-criteria

我已经使用以下代码实现了分页：

```
public Paginacao<Anuncio> consultarPaginado(int pagina, Integer cidadeId) {

            Criteria criteria = this.sessionFactory.getCurrentSession().createCriteria(Anuncio.class);      
            criteria.add(Restrictions.eq("ativo", true));
            criteria.add(Restrictions.eq("statusLiberacao", AnunciosUtil.STATUS_ANUNCIO_LIBERADO));
            criteria.add(Restrictions.eq("statusVendaAnuncio", AnunciosUtil.STATUS_VENDA_ANUNCIO_DISPONIVEL));

            if (cidadeId != null) {
                criteria.add(Restrictions.eq("cidade.id", cidadeId));
            }

            criteria.addOrder(Order.desc("dataPostagem"));
            criteria.setProjection(Projections.rowCount());

            Long count = (Long) criteria.uniqueResult();

            Paginacao<Anuncio> paginacao = new Paginacao<Anuncio>();
            int qtdPaginas = (count.intValue() / 7) + 1;

            paginacao.setQtdPaginas(qtdPaginas);

            criteria.setProjection(null);// reseta a criteria sem a projeção
            criteria.setResultTransformer(CriteriaSpecification.DISTINCT_ROOT_ENTITY);

            if (pagina > qtdPaginas) {
                pagina = qtdPaginas;
            }
            pagina = pagina - 1;
            criteria.setFirstResult(pagina * ConstantesGenericas.MAXIMO_OBJETOS_RETORNADOS);
            criteria.setMaxResults(ConstantesGenericas.MAXIMO_OBJETOS_RETORNADOS);

            paginacao.setRegistros(criteria.list());

            return paginacao;
        } 
```

当我手动构建 SQL 查询并将其提交到数据库时，我得到 8 个结果。但是，当我尝试上面的代码时，在将 ResultTransformer 设置为 DISTINCT_ROOT_ENTITY e 之前得到 8 个结果（没有不同），在设置之后我得到 4 个结果。但是我应该得到 8 个结果（使用 DISTINCT），因为当我手动构建没有 distinct 的 SQL 时，我得到 11 个结果，而当我使用 DISTINCT 时，我得到正确的 8 个不同结果。

上面的代码有什么问题？

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2012-06-14T18:07:00.057

经过很长时间为我的问题寻找解决方案后，我设法解决了它。如果您创建一个使用 JOINS 检索 toMany 关联的条件或查询，然后您使用 setMaxResults 并将 ResultTransformer 设置为 DISTINCT_ROOT_ENTITY，则结果将与您预期的不同。

正如 JB Nizet 所说，假设您有 4 个 A 实体，每个实体有 3 个 B 实体，并假设您的查询检索所有 A 实体及其 B。

在这种情况下，SQL 查询将返回 12 行。如果使用 setMaxResults(7)，它将检索（例如）A1 及其 Bs 的三行，A2 及其 Bs 的三行，A3 及其第一个 B 仅检索 1 行。

并且由于您使用了 DISTINCT_ROOT_ENTITY，因此条件查询将仅返回三个实体：A1、A2 和 A3（它们将具有一组不完整的 B）。

为了解决这个问题，您必须将 toMany（通常是集合）关系的 FETCH MODE 设置为 SELECT 或 SUBSELECT，并且您基本上有两种方法可以实现此目的：

第一种方法是在属性上使用 @FetchMode(FetchMode.SUBSELECT) 注释，我不喜欢这种方法，因为它会导致每个查询都使用 SUBSELECT FETCH 来检索集合。但它会起作用。

另一种方法是在构建查询时为关系设置获取模式。我更喜欢这种方式，因为我可以根据需要自定义查询，并且不必对所有查询都使用 SUBSELECTS。所以，我这样做了：

```
public Paginacao<Anuncio> consultarPaginado(int pagina, Integer cidadeId) {

        Criteria criteria = this.sessionFactory.getCurrentSession().createCriteria(Anuncio.class);      
        criteria.add(Restrictions.eq("ativo", true));
        criteria.add(Restrictions.eq("statusLiberacao", AnunciosUtil.STATUS_ANUNCIO_LIBERADO));
        criteria.add(Restrictions.eq("statusVendaAnuncio", AnunciosUtil.STATUS_VENDA_ANUNCIO_DISPONIVEL));
        criteria.setFetchMode("imagens", FetchMode.SELECT);
        criteria.setFetchMode("pagamentos", FetchMode.SELECT);      

        if (cidadeId != null) {
            criteria.add(Restrictions.eq("cidade.id", cidadeId));
        }

        criteria.addOrder(Order.desc("dataPostagem"));
        criteria.setProjection(Projections.rowCount());

        Long count = (Long) criteria.uniqueResult();

        Paginacao<Anuncio> paginacao = new Paginacao<Anuncio>();
        int qtdPaginas = (count.intValue() / 7) + 1;

        paginacao.setQtdPaginas(qtdPaginas);

        criteria.setProjection(null);// reseta a criteria sem a projeção
        criteria.setResultTransformer(CriteriaSpecification.DISTINCT_ROOT_ENTITY);

        if (pagina > qtdPaginas) {
            pagina = qtdPaginas;
        }
        pagina = pagina - 1;
        criteria.setFirstResult(pagina * ConstantesGenericas.MAXIMO_OBJETOS_RETORNADOS);
        criteria.setMaxResults(ConstantesGenericas.MAXIMO_OBJETOS_RETORNADOS);

        paginacao.setRegistros(criteria.list());

        return paginacao;
    } 
```

希望它可以帮助其他人。;D

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2012-06-14T17:34:38.873

我不确定我是否正确理解了您的问题，但如果您的查询检索到带有 toMany 关联联接的实体，则分页将无法按预期工作。

实际上，假设您有 4 个 A 实体，每个实体有 3 个 B 实体，并且假设您的查询检索所有 A 实体及其 B。

在这种情况下，SQL 查询将返回 12 行。如果使用 setMaxResults(7)，它将检索（例如）A1 及其 Bs 的三行，A2 及其 Bs 的三行，A3 及其第一个 B 仅检索 1 行。

并且由于您使用了 DISTINCT_ROOT_ENTITY，因此条件查询将仅返回三个实体：A1、A2 和 A3（它们将具有一组不完整的 B）。

* * *

## 回答 #3

> 赞同：12
> 
> 时间：2014-05-12T20:24:30.923

这对我来说是个问题，我花了一些时间才想出一个适用于我所有场景的解决方案。

对于每个分页页面，您需要两件事，所有结果的总数和您的单页结果，但要做到这一点，您需要采取 3 个步骤。1) 获取总数，2) 获取页面的唯一 ID，以及 3) 获取第 2 步中找到的 id 的完整数据。您可以使用单个条件对象完成所有操作：

1) 使用不同的 id 获取总数（uniqueField = 您在实体类中的 id 的名称）

```
 Criteria criteria = session.createCriteria(YourEntity.class);
  Projection idCountProjection = Projections.countDistinct(uniqueField);
  criteria.setProjection(idCountProjection);
  //setup criteria, joins etc here
  int totalResultCount = ((Long)criteria.uniqueResult()).intValue(); 
```

2）重置投影并设置开始和长度（你想要不同的ID）

```
 criteria.setProjection(Projections.distinct(Projections.property(uniqueField)));
  criteria.setFirstResult(start); 
  criteria.setMaxResults(length);
  List uniqueSubList = criteria.list(); 
```

3) 重置投影并获得与 id 匹配的不同结果

```
 criteria.setProjection(null);
  criteria.setFirstResult(0); criteria.setMaxResults(Integer.MAX_VALUE);
  criteria.add(Restrictions.in(uniqueField, uniqueSubList));
  criteria.setResultTransformer(CriteriaSpecification.DISTINCT_ROOT_ENTITY);
  List searchResults = criteria.list();
  //and now, however you want to return your results
  Map<String, Object> searchResultsMap = new HashMap<String, Object>();
  searchResultsMap.put("searchResults", searchResults);
  searchResultsMap.put("totalResultCount", totalResultCount); 
```

# mysql - 使用 MySQL 对连接表应用过滤器

> ID：11038238
> 
> 赞同：1
> 
> 时间：2012-06-14T17:22:46.647
> 
> 标签：mysql, join, filter

我将一些数据存储在 MySQL 中，并希望过滤掉与给定条件匹配的行。

听起来很容易，但这并不容易，因为涉及到一些加入标准。

我确实有以下表格：

```
items : id, ...
genres: id, name:varchar, item_id 
```

每个项目都有多个流派。

如果至少一个流派确实与给定的流派名称（或一组名称）匹配，则查询应该过滤**掉项目。**

例如：

```
Item with id 1 has 3 genres
  - genre name = 'foo'
  - genre name = 'bar'
  - genre name = 'baz' 
```

如果给定的流派名称是 'bar'、['bar'、'baz'、'xyz'] 等，则项目 1 可能不是结果集的一部分。

我试图离开加入项目的流派并应用带有“genres.name NOT IN (?)”的 WHERE 语句。? 是给定的流派名称集。

这（当然）只适用于只有一种类型的项目。同样可以通过多个 WHERE 条件来实现： WHERE name <> 'a' AND name <> 'b' ...

任何想法如何正确完成此查询？

提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-14T17:42:39.180

你可以做这样的事情（[见 sqlfiddle](http://sqlfiddle.com/#!2/0070c/32)）：

```
select i.name as item, g.name as genre
from items as i
left join genres as g
  on i.id = g.item_id 
where i.id not in
      (select distinct g2.item_id from genres as g2
       where FIND_IN_SET(g2.name,'foo,bar')); 
```

如果您想检查多个流派名称，这种方式就可以工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-14T17:40:03.627

您可以使用相关子查询。
例子：

```
SELECT id 
FROM   items i
WHERE  NOT EXISTS (SELECT 1 
                   FROM   genres g
                   WHERE  g.`name` = 'bar' 
                   AND    i.id = g.item_id); 
```

相关子查询与其他子查询的不同之处在于它引用了外部查询。
为外部查询投影/选择的每一行运行相关子查询。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-14T18:05:46.877

好吧，希望我能理解您的要求，并且我认为 MySQL 和 T-SQL 在这方面将是相似的。这些是我假设您在示例中使用的示例表。

```
Table1
ID  NAME
1   Item 1
2   Item 2
3   Item 3
4   Item 4
5   Item 5
6   Item 6

Table2
ID  NAME    ITEM_ID
1   Genre 1   1
2   Genre 2   1
3   Genre 3   1
4   Genre 1   2
5   Genre 2   2
6   Genre 3   2
7   Genre 1   3
8   Genre 2   3
9   Genre 3   3
10  Genre 1   4 
```

如果项目符合您的条件之一，这是过滤**掉项目的 SQL。**

```
SELECT *
FROM table1 a, table2 b
WHERE a.id = b.item_id
AND b.name NOT IN ('Genre 1', 'Genre 2') 
```

从上述示例表查询返回的结果。

```
ID  NAME    ID_1    NAME_1  ITEM_ID
1   Item 1    3 Genre 3   1
2   Item 2    6 Genre 3   2
3   Item 3    9 Genre 3   3 
```

您也可以过滤掉genre_id (table2.id)。如果您打算使用子查询而不是硬编码值，那么您应该将“NOT IN”切换为“NOT EXISTS”并相应地重写“AND”部分，因为“NOT IN”不喜欢空值。

此查询还假定每个“项目”至少有 1 个“流派”。如果您想要所有“项目”（不包括符合您条件的项目），我相信您可以使用它。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-14T18:07:31.350

```
select * from items i where not exists 
(select '' from genres gen where gen.item_id = i.id and gen.name in ('foo','pop') ) 
```

A shorter ans simpler query. The inner query checks genre name in the keywords list , if the no row is returned then the current row of outer query is selected.
Verify the output [at here](http://sqlfiddle.com/#!2/1f8d6/2).

Thanks to [Kyra](https://stackoverflow.com/users/310613/kyra) ,i borrowed his schema from sql fiddle.

# google-maps-api-3 - 是否可以使用与互联网断开连接的谷歌地图？

> ID：11038240
> 
> 赞同：1
> 
> 时间：2012-06-14T17:22:53.993
> 
> 标签：google-maps-api-3

我的任务是构建一个离线 Web 应用程序，该应用程序将显示地图并显示对象的位置和路线。要求是它在网络浏览器中运行，但它将在断开连接的笔记本电脑上运行。它将接收连续的实时地图坐标数据并不断更新对象的位置，并显示历史路线数据。是否有可能以某种方式使用谷歌地图？我知道谷歌最近宣布了对离线地图的支持——但我感觉它是专门针对 Android 操作系统的，也专门针对移动设备的。如果没有，谷歌地图——是否有人对哪种地图技术、API 或软件最适合此类应用程序有任何建议？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-14T18:25:43.847

不，这是不可能的。您必须从网络动态加载地图，并且不允许缓存信息（*您可以临时缓存少量信息，但不能进行批量或海量下载）。

请参阅服务条款第 10.1.3 节：

[http://goo.gl/HX3Uj](http://goo.gl/HX3Uj)

# facebook - 将 Facebook 评论添加到我的网站对象

> ID：11038248
> 
> 赞同：0
> 
> 时间：2012-06-14T17:23:18.767
> 
> 标签：facebook, facebook-graph-api

有什么方法可以在不使用评论插件的情况下创建与我的对象相关的评论？Facebook Graph API 似乎是正确的方法，但我可以链接到我网站上的一个对象，而无需实际“发布”该对象作为 Facebook 上的帖子吗？令人惊讶的是，我在网上找不到任何有这个问题的人，所以也许我只是做错了。

我正在尝试发布到：

[https://graph.facebook.com/comments/?ids=http://iesgroup.ca/myappbeta/Item/1799633&message=test&access_token](https://graph.facebook.com/comments/?ids=http://iesgroup.ca/myappbeta/Item/1799633&message=test&access_token) ....

我确实在 access_token 中拥有 publish_stream 权限。我得到的只是“发生了未知错误”。

本质上，我已经使用 Open Graph 协议建立了自己的网站。我拥有的每件商品都有自己的带有适当 OG 标签的 URL。对于每个项目，我都能够获取 facebook 与之关联的评论。但如果不使用 facebook 评论插件，我实际上无法将新评论附加到该对象。我正在使用我自己的外观评论系统，所以我对使用 facebook 的模块不感兴趣。我正在使用 JavaScript API 来获取现有的评论。

请注意，如果我使用 Open Graph 协议，用户可以将操作发布到他们的时间线，但实际上不会将新评论与对象相关联。

想法？谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-14T22:37:32.720

我知道的唯一方法是使用 Facebook Graph API 并拥有一个 Facebook 网站应用程序，并使用服务器端代码将评论从您的网站直接重新发布到现有 Facebook 对象上的 Facebook 页面。它比简单的 Open Graph 实现要深入得多。但如果你不想使用 Facebook 的评论模块，我看不到任何其他选择。这是评论区的链接，[http://developers.facebook.com/docs/reference/api/Comment/](http://developers.facebook.com/docs/reference/api/Comment/)，但这只有在您完成其他所有设置后才有用。让您的网站达到这一点是一项艰巨的任务，但您将完全控制与 Facebook 交互的各个方面，因为您编写自己的代码。这是 FB Graph API 顶层的链接，因此您可以阅读更多相关信息。[http://developers.facebook.com/docs/reference/api/](http://developers.facebook.com/docs/reference/api/)

尼克 - www.meltedjoystick.com

# javascript - 如何计算 24 小时格式的两个时间之间的差异？

> ID：11038252
> 
> 赞同：25
> 
> 时间：2012-06-14T17:23:39.653
> 
> 标签：javascript, jquery, html

在 JavaScript 中，如何计算 24 小时格式的两个时间之间的差异？

`08:00:00`示例：获取从到过去了多少小时`23:00:00`。

下面我从两个下拉菜单中获取两个时间值，并尝试计算两个时间之间的小时差。我得到错误的结果...

工作示例：http: [//jsfiddle.net/VnwF7/1/](http://jsfiddle.net/VnwF7/1/)

**脚本：**

```
$(document).ready(function() {
    function calculateTime() {
             //get values
        var valuestart = $("select[name='timestart']").val();
        var valuestop = $("select[name='timestop']").val();

             //create date format       
        var timeStart = new Date("01/01/2007 " + valuestart);
        var timeEnd = new Date("01/01/2007 " + valuestop);

        var difference = timeEnd - timeStart;            
        var diff_result = new Date(difference);    

        var hourDiff = diff_result.getHours();

        $("p").html("<b>Total Hours:</b> " + hourDiff )          
    }
    $("select").change(calculateTime);
    calculateTime();
}); 
```

**HTML：**

```
<select name="timestart">
<option value="00:00:00">12:00 am</option>
<option value="01:00:00">1:00 am</option>
<option value="02:00:00">2:00 am</option>
<option value="03:00:00">3:00 am</option>
<option value="04:00:00">4:00 am</option>
<option value="05:00:00">5:00 am</option>
<option value="06:00:00">6:00 am</option>
<option value="07:00:00">7:00 am</option>
<option value="08:00:00">8:00 am</option>
<option value="09:00:00">9:00 am</option>
<option value="10:00:00">10:00 am</option>
<option value="11:00:00">11:00 am</option>
<option value="12:00:00">12:00 pm</option>
<option value="13:00:00">1:00 pm</option>
<option value="14:00:00">2:00 pm</option>
<option value="15:00:00">3:00 pm</option>
<option value="16:00:00">4:00 pm</option>
<option value="17:00:00">5:00 pm</option>
<option value="18:00:00">6:00 pm</option>
<option value="19:00:00">7:00 pm</option>
<option value="20:00:00">8:00 pm</option>
<option value="21:00:00">9:00 pm</option>
<option value="22:00:00">10:00 pm</option>
<option value="23:00:00">11:00 pm</option>
</select>

<select name="timestop">
<option value="00:00:00">12:00 am</option>
<option value="01:00:00">1:00 am</option>
<option value="02:00:00">2:00 am</option>
<option value="03:00:00">3:00 am</option>
<option value="04:00:00">4:00 am</option>
<option value="05:00:00">5:00 am</option>
<option value="06:00:00">6:00 am</option>
<option value="07:00:00">7:00 am</option>
<option value="08:00:00">8:00 am</option>
<option value="09:00:00">9:00 am</option>
<option value="10:00:00">10:00 am</option>
<option value="11:00:00">11:00 am</option>
<option value="12:00:00">12:00 pm</option>
<option value="13:00:00">1:00 pm</option>
<option value="14:00:00">2:00 pm</option>
<option value="15:00:00">3:00 pm</option>
<option value="16:00:00">4:00 pm</option>
<option value="17:00:00">5:00 pm</option>
<option value="18:00:00">6:00 pm</option>
<option value="19:00:00">7:00 pm</option>
<option value="20:00:00">8:00 pm</option>
<option value="21:00:00">9:00 pm</option>
<option value="22:00:00">10:00 pm</option>
<option value="23:00:00">11:00 pm</option>
</select>

<p></p> 
```

* * *

## 回答 #1

> 赞同：41
> 
> 时间：2012-06-14T17:31:08.607

您可以通过这种方式立即减去时间

```
var valuestart = $("select[name='timestart']").val();
var valuestop = $("select[name='timestop']").val();

//create date format          
var timeStart = new Date("01/01/2007 " + valuestart).getHours();
var timeEnd = new Date("01/01/2007 " + valuestop).getHours();

var hourDiff = timeEnd - timeStart; 
```

这是工作小提琴[http://jsfiddle.net/VnwF7/4/](http://jsfiddle.net/VnwF7/4/)

更新 - 计算我们是否包括第二天。只需添加以下 if 块

```
 if (hourDiff < 0) {
    hourDiff = 24 + hourDiff;
 } 
```

[http://jsfiddle.net/gfvhqat9/](http://jsfiddle.net/gfvhqat9/)

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-06-14T17:32:39.450

我将您的代码更改为仅使用差异而无需创建另一个日期对象：

```
$(document).ready(function() {    
function calculateTime() {
        //get values
        var valuestart = $("select[name='timestart']").val();
        var valuestop = $("select[name='timestop']").val();

         //create date format          
         var timeStart = new Date("01/01/2007 " + valuestart);
         var timeEnd = new Date("01/01/2007 " + valuestop);

         var difference = timeEnd - timeStart;             

         difference = difference / 60 / 60 / 1000;

    $("p").html("<b>Hour Difference:</b> " + difference)             

}
$("select").change(calculateTime);
calculateTime();
});​ 
```

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2018-08-10T10:45:37.863

试试这个方法

```
var time_start = new Date();
var time_end = new Date();
var value_start = "06:00:00".split(':');
var value_end = "23:00:00".split(':');

time_start.setHours(value_start[0], value_start[1], value_start[2], 0)
time_end.setHours(value_end[0], value_end[1], value_end[2], 0)

time_end - time_start // millisecond 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-06-14T17:33:37.563

它不是 Jquery，而是与 JavaScript 中的时间和日期相关的所有内容......

这可能会有所帮助：datejs [http://code.google.com/p/datejs/](http://code.google.com/p/datejs/)

这是文档中的一些日期和时间计算

```
 Date.today().set({ day: 15 })          // Sets the day to the 15th of the current month and year. Other object values include year|month|day|hour|minute|second.

        Date.today().set({ year: 2007, month: 1, day: 20 })

Date.today().add({ days: 2 })          // Adds 2 days to the Date. Other object values include year|month|day|hour|minute|second.

        Date.today().add({ years: -1, months: 6, hours: 3 })

Date.today().addYears(1)               // Add 1 year.
Date.today().addMonths(-2)             // Subtract 2 months.
Date.today().addWeeks(1)               // Add 1 week
Date.today().addHours(6)               // Add 6 hours.
Date.today().addMinutes(-30)           // Subtract 30 minutes
Date.today().addSeconds(15)            // Add 15 seconds.
Date.today().addMilliseconds(200)      // Add 200 milliseconds.

Date.today().moveToFirstDayOfMonth()   // Returns the first day of the current month.
Date.today().moveToLastDayOfMonth()    // Returns the last day of the current month.

new Date().clearTime()                 // Sets the time to 00:00 (start of the day).
Date.today().setTimeToNow()            // Resets the time to the current time (now). The functional opposite of .clearTime() 
```

编辑：由于这是一个相当古老的答案，我最近也使用 moment.js 进行与日期相关的操作，这也非常有用。 [http://momentjs.com/](http://momentjs.com/) [https://github.com/moment/moment/](https://github.com/moment/moment/)

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2012-06-14T17:36:06.123

对于这种特定情况，您不需要将它们转换为日期。就这样做

```
$(document).ready(function() {    
    function calculateTime() { 
        var hourDiff = 
        parseInt($("select[name='timestart']").val().split(':')[0],10) -         
        parseInt($("select[name='timestop']").val().split(':')[0],10);

        $("p").html("<b>Hour Difference:</b> " + hourDiff )         
    }
    $("select").change(calculateTime);
    calculateTime();
}); 
```

[工作小提琴](http://jsfiddle.net/joycse06/dzAya/)</p>

# java - 连续读取文件并执行操作

> ID：11038256
> 
> 赞同：0
> 
> 时间：2012-06-14T17:23:58.063
> 
> 标签：java, user-interface, file-io

我想连续读取文本文件，并在读取某一行时更改我在画布上显示的框的颜色（文本文件将不断更新）。现在，我在画布上绘制了一个绿色正方形，在文本文件中绘制了三个“测试”行，当它到达文本文件的第三行时，我想将正方形更改为红色。

这是我的代码，来自两个文件（myCanvas.java 和 myFileReader.java）。非常感谢正确方向的任何一点。

```
public class myCanvas extends Canvas{

    public myCanvas(){
    }

    public void paint(Graphics graphics){
        graphics.setColor(Color.green);
        graphics.fillRect(10, 10, 100, 100);
        graphics.drawRect(10,10,100,100);
    }

    public static void main(String[] args){
        myCanvas canvas = new myCanvas();
        JFrame frame = new JFrame("Live GUI");
        frame.setSize(400, 400);
        frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        frame.getContentPane().add(canvas);
        frame.setVisible(true);
        myFileReader read = new myFileReader();
        read.readFromFile();
        if(myFileReader.strLine == "This is the third line."){
        //change color
        }

}

public class myFileReader{
    public static String strLine;

public void readFromFile() 
{
    try{
        FileInputStream fstream = new FileInputStream(System.getProperty("user.dir")+"\\sample.txt");
        DataInputStream in = new DataInputStream(fstream);
        BufferedReader br = new BufferedReader(new InputStreamReader(in));
        while (true){
            strLine = br.readLine();
            if(strLine == null) {
                Thread.sleep(1000);
            }
        }
        }
    catch (Exception ex){
        System.err.println("Error: " + ex.getMessage());
    }
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-14T17:31:03.180

每次读取一行时，只需添加一个计数器并增加它。当计数器到达第三行时，使用 if 语句来完成您的任务

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-14T18:09:24.703

试试这个

```
1.Use BreakIterator class, with its static method getLineInstance(), 
  this will help you identify every line in the file.

2\. Create an HashMap with the colour as Key, and its RGB as Value.

3\. Parse every word in the line, which is obtained from
   BreakIterator.getLineInstance().

4\. Compare it with the Key in the HashMap, 
   if the word in the line happens to match the Key in
   the HashMap, then colour the box with the Value of the Key. 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-14T19:41:32.133

这是一种无需对代码进行太多更改即可完成的方法。

1.  `MyCanvas`在您的类中创建一个名为`currentColor`type的局部变量`Color`。仅供参考，Java 中的约定是类名以大写字母开头。
2.  更新您的`paint()`方法以将矩形的颜色设置为新变量`currentColor`，而不是静态绿色值。
3.  在您的主要方法中，您可以执行`canvas.currentColor = <new color here>;`然后`canvas.repaint()`. `repaint()`函数调用将擦除画布并使用您的函数重新绘制它`paint()`。

我认为您`FileReader`不会很好地处理不断修改的文件。

# ios - 如何将 APN 配置文件证书放入钥匙串

> ID：11038257
> 
> 赞同：0
> 
> 时间：2012-06-14T17:23:58.890
> 
> 标签：ios, xcode

我的笔记本电脑/手机已设置好并正在工作，以使我们的应用程序能够处理推送通知。然而，一位同事在使用他们的设置安装应用程序时收到“找不到有效的 aps-environment 权利字符串”。

我注意到 Xcode 的 Organizer 报告了 Apple Push Profile 的错误，说可以找到“没有有效的签名身份”（在供应门户网页上一切看起来都设置好了），并且还注意到在我的机器上我的钥匙串访问“我的证书”部分有一个推送证书。但是，在我同事的机器上，他们的钥匙串访问权限中没有这个。

我认为它的缺席是“没有有效的签名身份”的原因？如果是这样，他们如何将其添加到他们的钥匙串中？（我不记得它是如何到达那里的，也无法从谷歌搜索中轻易找到）。

TIA

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-14T23:15:27.550

我认为不需要，试试这个：

检查您在设备上有必要的配置文件 - 转到设置，然后是常规，配置文件，检查您的配置文件是否列出，尤其是推送配置文件。您也可以从 XCode 的 Organizer 部分检查这一点。在 Organizer 中有两个部分表示 Provisioning Profiles - 一个在 Library 的左上角（这是 XCode 中用于签名的配置文件等）。此外，您还会看到一个名为 Provisioning Profiles 的部分，用于连接的设备，这个是安装在手机上的配置文件。如果您没有在手机上安装它们，您可以从供应门户网站下载它们，然后单击管理器窗口底部的添加按钮。

在配置门户中，您还应该检查 Apple 推送配置文件是否包含证书： - 单击左侧菜单上的配置 - 您将看到您的配置文件列表，选择编辑 Apple 推送配置文件 - 您将看到证书部分，其中包含您项目中的开发人员或测试人员等列表，请确保选中他们的复选框。- 您还会看到一个设备部分，请确保您正在测试的设备已添加。

如果您在 XCode 或设备上有任何旧配置文件，请删除它们并从配置门户下载/刷新/安装所有新配置文件

# python - TypeError：“长”对象不可调用

> ID：11038259
> 
> 赞同：0
> 
> 时间：2012-06-14T17:24:00.910
> 
> 标签：python

我现在脑子里冒出一股蒸汽，但我不知道我的代码出了什么问题。以下是相关行：

```
 try:
   outport = record_dict[id][hash_ % len(record_dict[id])]
 except:
   fp.write("Problem-"+str(type(record_dict[id]))+"\n")
   fp.write("Problem-"+str(record_dict[id])+"\n")
   fp.write("Problem-"+str(len(record_dict[id]))+"\n") 
```

这是我得到的错误：

```
 File "xxxx.py", line 459, in yyyyy
    fp.write("Problem-"+str(len(record_dict[id]))+"\n")
  TypeError: 'long' object is not callable 
```

fp指向的内部文件：

```
Problem-<type 'list'>
Problem-[5, 6, 7, 8] 
```

我的代码有什么问题？我该如何调试它？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-14T17:25:09.950

您是否创建了一个名为`str`或`len`任何地方的变量？如果是这样，那是你的问题。（很可能，`len`因为`str`之前使用过没有任何问题）。

Python 内置函数不是保留的——这意味着您可以自由地将它们重新分配给您想要的任何对象。看起来您分配`len`了一个长整数，这是有道理的，因为`len`在其他语言中它是一个完全合理的变量名。

你应该从中得到的一点是要小心不要通过创建同名变量来“隐藏”内置函数。它会产生难以调试的问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-14T17:53:08.253

作为旁注：裸“except”子句是最糟糕的异常处理方案——您只是不知道会发生什么异常，并且您丢失了存储在异常回溯中的所有有用的调试信息。FWIW，sys.exit 实际上是通过引发由 python 运行时捕获的 SysExit 异常来实现的。

如果您处于循环中并且想要记录有关当前迭代异常的信息并继续下一项，请确保您没有捕获 SysExit 并学习使用日志记录模块：

```
import logging
# this will require some minimal conf somewhere, cf the fine manual
logger = logging.getLogger("my-logger-name")

def myfunction(somesequence):
    for item in somesequence:
        try:
            result = process(item)
        except Exception, e: 
            # in 'recent' python version this will not catch SysExit
            # please refer to the doc for your python version
            # if it's a slightly outdated version, uncomment the
            # following lines:
            # if isinstance(e, SysExit):
            #     raise
            logger.exception("got %s on item %s", e, item)
            continue
        else:
            # ok for this item
            do_something_with(result) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-05-09T14:08:30.410

我在不同的情况下遇到了这个问题：

```
slope = (nsize*iopsum - (osum)(isum)) / (nsize*oopsum - (osum)*2) 
```

当然，我得到它的原因`(osum)(isum)`是将 osum 解释为一个数字并试图在其上呼叫另一个数字。所以在它被解释之后它看起来像这样：1513（3541）这没有任何意义。

我通过在正确的位置添加 * 来修复它`(osum)*(isum)`

# dictionary - 在 Umbraco 中，有没有办法将字典字段添加到富文本编辑器中？

> ID：11038260
> 
> 赞同：0
> 
> 时间：2012-06-14T17:24:05.710
> 
> 标签：dictionary, tinymce, umbraco

我正在开发一个将在整个过程中使用多个关键字的网站。我们不希望人们浏览每一页并在旧信息上添加新信息，以便对这些特定值进行每次更改。我希望 umbraco 中的字典库能够提供帮助，因为它正在 XSLTSearch 中使用，但看起来我只能创建一个宏来搜索字典项并以这种方式插入它。

有没有办法只在字典中的富文本编辑器中插入一个字段而不只是制作一个宏？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-24T11:09:57.273

也许[Shortcodes](http://our.umbraco.org/projects/developer-tools/shortcodes)包可以满足您的需求。它允许您使用[宏参数语法](http://our.umbraco.org/wiki/reference/templates/umbracomacro-element/macro-parameters/advanced-macro-parameter-syntax)将属性放置在 RTE、模板甚至宏中。它还可以输出 RestExtension/base 方法的结果。

# android - 如何在屏幕中间添加标签

> ID：11038261
> 
> 赞同：0
> 
> 时间：2012-06-14T17:24:15.767
> 
> 标签：android

我想知道，如何在 Android 的屏幕中间添加选项卡。我正在使用 Actionbarsherlock 来获得 ICS 的外观和感觉。在这里，我可以在顶部或底部添加标签。

您是否知道在屏幕中间添加选项卡的任何方法或示例示例。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-14T17:38:18.010

考虑创建一个 LinearLayout 或 RelativeLayout 将 View 分成两半，然后在每一半中创建一个单独的片段。

请参阅相关：[嵌套片段是否有任何替代方法？](https://stackoverflow.com/questions/9736053/is-there-any-alternative-to-nested-fragments)

有关此操作的示例，请参阅 YouTube 的 4.0+ 应用程序。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-05-21T06:55:17.507

在屏幕中间创建选项卡的一种好方法是将 a`ViewPager`与 Jake Wharton 的[ViewPagerIndicator](http://viewpagerindicator.com/)和`TabPageIndicator`样式结合使用。

# javascript - 如何检查页面中的位置？

> ID：11038262
> 
> 赞同：0
> 
> 时间：2012-06-14T17:24:20.363
> 
> 标签：javascript, html, greasemonkey, userscripts

我使用这样的东西按条件单击页面上的元素：

```
var findElem = function(elems, text) {
    for (var i = 0; i < elems.length; i++) {
        if (elems[i].textContent == text) {
            return elems[i];
        } else {
            var result = findElem(elems[i].children, text);
            if (result != undefined) {
                return result;
            }
        }
    }
    return;
}

switch (document.getElementById('my_id').value) {
    case "1":
        findElem(document.documentElement.children, "blabla1").click();
        break;
    case "2":
        findElem(document.documentElement.children, "blabla2").click();
        break;
    default:
        break;
} 
```

我想在此代码中再添加一个条件。

我正在工作的页面是这样的：

```
<body id="something">

<div id="something2" class="container">
    <div id="header">
        <a class="hmm" href="somelink"></a>
        <a class="aname" target="_blank" href="anotherlink"></a>
    </div>

    <div id="anotherthing" class="anotherthing2">

<div class="differentthing " style="left: 2px; ">
    <div class="asdafad"></div>
</div> 
```

我得看看`differentthing`有没有`style`

简而言之，我想做这样的事情：

```
switch (document.getElementById('my_id').value) {
    case "1":
        ---if differentthing has no style attrib then---
        findElem(document.documentElement.children, "blabla1").click();
        break; 
```

所以如果`differentthing`页面部分是这样的

```
<div class="differentthing "> 
```

然后做事`findElem.click`。

如果是`<div class="differentthing " style="left: 2px; ">`那么什么都不做。

我希望我能描述一下。我怎样才能做到这一点？对不起我的英语不好。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-14T17:33:12.993

```
switch (document.getElementById('my_id').value) {
    case "1":
        // getting an array of elements with "differentthing" class
        var elements = document.getElementsByClassName("differentthing");

        // if there is just one and it does not have "style" attribute
        if (elements.length == 1 && !elements[0].getAttribute("style")){
            // perform some action
            findElem(document.documentElement.children, "blabla1").click();
        }        
        break; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-14T17:31:50.870

想查看一个元素是否没有样式？

对于初学者，使用 jquery

```
var hasStyle = $(".differentthing").attr("style")
if(hasStyle){/*...do your cool stuff...*/} 
```

attr 方法设置或返回元素的属性。对你来说，它是 style 属性。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-14T17:38:13.110

我认为您可以使用此功能来获取属性，在这种情况下为样式

[http://www.w3schools.com/dom/met_element_getattribute.asp](http://www.w3schools.com/dom/met_element_getattribute.asp)

```
<!DOCTYPE html>
<html>
   <head>
   </head>
<body>
   <p id="title" style="color:red">algo</p>

</body>
<script type="text/javascript">
  var prueba = document.getElementById('title').getAttribute('style');
  document.write(prueba);
</script>
</html> 
```

再举一个例子：

```
 switch (document.getElementById('my_id').value) {
   case "1":
    elements = document.getElementsByClassName('differentthing');
    for(x in elements){
       if(!x.getAttribute('style')){
           //dont have style attribute do something 
       }
    }
    findElem(document.documentElement.children, "blabla1").click();
    break; 
```

# objective-c - 如何正确释放 CF 对象对象？

> ID：11038264
> 
> 赞同：2
> 
> 时间：2012-06-14T17:24:31.137
> 
> 标签：objective-c, ios, memory-management, core-foundation

我有这个方法（别人写的！）

```
- (CGPDFDocumentRef)getPdf {
    NSArray *paths = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES);

    NSString *documentsDirectory = [paths objectAtIndex:0];

    NSString *pdfPath = [documentsDirectory stringByAppendingPathComponent:@"myLocalFileName.pdf"];

    NSURL *pdfURL = [NSURL fileURLWithPath:pdfPath];

    CGPDFDocumentRef pdf = CGPDFDocumentCreateWithURL((CFURLRef)pdfURL);

    return pdf;
} 
```

现在，我运行了分析并收到三个内存泄漏警告：

```
Call to function 'CGPDFDocumentCreateWithURL' returns a Core Foundation object with a +1 retain count
Object returned to caller as an owning reference (single retain count transferred to caller)
Object leaked: object allocated and stored into 'pdf' is returned from a method whose name ('getPdf') does not start with 'copy', 'mutableCopy', 'alloc' or 'new'.  This violates the naming convention rules given in the Memory Management Guide for Cocoa 
```

有人可以告诉我这里需要/应该做什么吗？我知道我应该在 CF 函数名称中使用 create 或 copy 来 CFRelease 一切。我不明白的是如何释放 pdf 并且仍然能够在函数结束时返回它。我错过了什么？谢谢你。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-17T17:59:45.537

您需要如下所示的 clang 源注释[http://cocoasamurai.blogspot.com/2012/01/clang-source-annotations.html](http://cocoasamurai.blogspot.com/2012/01/clang-source-annotations.html)

```
 #import <AppKit/AppKit.h>
@interface NSColor (CWNSColorAdditions)
-(CGColorRef)cw_cgColor CF_RETURNS_RETAINED;
@end 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-06-14T17:30:02.493

接收 pdf 的代码在完成后有责任 CFRelease 它。与 Cocoa 不同，CF 不支持自动释放，因此任何从 CF 函数返回的对象都是调用者拥有且必须处理的对象。

这也是命名约定，那些返回 CF 对象的函数应该相应地命名为`create`or`copy`

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-06-14T17:30:54.900

由于您要返回在函数中创建的对象，因此应正确命名函数本身以指示应释放它返回的对象。

而不是`getPdf`，您可以调用您的函数`createPdf`或`copyPdf`. 这将告诉调用者它应该`CFRelease`在完成时调用，并且还满足分析的请求。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2014-06-06T07:46:31.420

```
- (CGPDFDocumentRef)getPdf {
    NSArray *paths = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES);

    NSString *documentsDirectory = [paths objectAtIndex:0];

    NSString *pdfPath = [documentsDirectory stringByAppendingPathComponent:@"myLocalFileName.pdf"];

    NSURL *pdfURL = [NSURL fileURLWithPath:pdfPath];

    CGPDFDocumentRef pdf = CGPDFDocumentCreateWithURL((CFURLRef)pdfURL);

    return [pdf autorelease];
} 
```

我认为这可以解决您的问题。

# java - 运行 Java 应用程序时在何处保留 AWS 的 API 密钥的最佳实践

> ID：11038266
> 
> 赞同：1
> 
> 时间：2012-06-14T17:24:41.013
> 
> 标签：java, security, amazon-web-services

我有一个连接到 AWS 的 Java 应用程序来使用 EC2 和 S3 做各种事情，当部署到生产环境时，我显然希望将密钥保留在代码库之外。是否建议将密钥作为环境变量保留在服务器上，或者将文件放在我在启动时读取并设置访问密钥值或其他位置的某个位置？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-14T17:36:51.910

我写过类似的代码。最初，我`pem`在应用程序的资源文件夹中拥有文件和所有内容。很快，我们意识到将其作为源代码控制的一部分并不好。

由于这是一次性的，我们最终将文件保存到安装了部署应用程序的服务器上，该文件夹中的文件夹只有`R`运行部署应用程序的用户的 ead 权限。

因此，我的建议是将文件保存在远离源代码控制的安全位置。

# java - 使用 Java SIP 库实现 VoIP

> ID：11038274
> 
> 赞同：7
> 
> 时间：2012-06-14T17:25:16.890
> 
> 标签：java, voip

我想使用任何 Java SIP 库和 API 实现简单的 VoIP 应用程序。你能给我一个简单的 VOIP 应用程序示例吗？我没有得到任何包含 java IP 语音的资源或导师。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-14T18:29:01.350

对于代码示例，您可以查看[Jitsi](https://github.com/jitsi)的源代码 - 它支持 VoIP/SIP，以及许多 IM 协议。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-06-14T17:41:30.490

[这篇文章](http://www.javaworld.com/javaworld/jw-06-2006/jw-0619-sip.html?page=1)非常广泛地涵盖了这个领域。

# active-directory - 如何以编程方式向 AD 服务器注册服务？

> ID：11038275
> 
> 赞同：0
> 
> 时间：2012-06-14T17:25:20.547
> 
> 标签：active-directory

我有一个我写的新服务，需要在客户端的 AD 服务器上注册它。有没有关于如何做到这一点的教程？（Google 还没有对我好过。）我说的是 Microsoft 的 Active Directory 服务器。openLDAP 服务器有什么不同吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-21T16:00:04.023

“注册服务”不是核心 AD 动词……所以根据上面的问题，你要做什么还不是很清楚。有了更多关于您尝试使用此注册做什么的数据，我们可以提供更好的帮助。

通常，当人们问这个问题时，他们的意思是两件事之一： 0) 注册一个服务主体名称（又名 SPN）以用于遏制相互身份验证目的。1) 在目录中注册他们的服务，以便客户端可以发现该服务在网络上的存在并找到通往服务端点的方式。为此，他们通常使用 DNS、SCP（AD 架构中的一种对象类型，如果您出于自己的目的选择，则可以创建）或某种自定义对象类型（例如：Exchange）。

如果你的意思是别的东西，请大声...

# android - SQLite 数据库位置

> ID：11038276
> 
> 赞同：0
> 
> 时间：2012-06-14T17:25:24.990
> 
> 标签：android

使用 Eclipse 构建 Android 应用程序。当我创建/打开数据库 (SQLite) 时，我的日志表明它的位置是 /data/data/package/databases/dbname。有没有办法使用一个基于 Windows 的 SQLite 管理器来访问这个数据库，例如；SQLite 数据库浏览器。路径必须是设备上的路径，但我在 Windows 机器上找不到数据库。这个 Android 新手的任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-14T17:26:53.817

您可以在 Eclipse 中使用 DDMS 提取 db 文件。

谢谢先生，我忘了提到上面的“模拟器”............

这些链接将对您有所帮助

[Android eclipse DDMS - 无法在手机上访问数据/数据/以提取文件](https://stackoverflow.com/questions/4867379/android-eclipse-ddms-cant-access-data-data-on-phone-to-pull-files)

[Android Eclipse DDMS - 无法从根设备中提取文件](https://stackoverflow.com/questions/9797019/android-eclipse-ddms-cant-pull-file-from-rooted-device)

[如何从 DDMS 读取我的数据库](https://stackoverflow.com/questions/8321246/how-can-i-read-my-database-from-ddms)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-14T17:56:26.443

您实际上可以使用 BackupAgent 来访问数据库。您无法从像 Windows 这样的资源管理器中访问它，但是您可以对其进行编码。有关更多信息，请参阅此线程：

[Android 备份/恢复：如何备份内部数据库？](https://stackoverflow.com/questions/5282936/android-backup-restore-how-to-backup-an-internal-database)

# php - PHP调用链接并打开新标签并继续运行程序？

> ID：11038277
> 
> 赞同：2
> 
> 时间：2012-06-14T17:25:25.880
> 
> 标签：php, sql, backup

我正在尝试编写一个执行 sql 备份的 php 程序，并且我有很多数据库，我想将这些进程分成 3 个单独的进程。

我的 backup.php 文件接受一个字符串参数，还输出备份进度的文本数据。

所以这是我试图实现的逻辑。

```
while(there is still items in the list){
 open backup.php?s=listx
 x++
}
//continue with loop and open more processes 
```

有没有办法在新标签页中打开这些页面？我尝试使用 curl 但这似乎不起作用，我想我在某处读过 html 标签或 javascript 代码不在 php 代码中运行？

感谢您的帮助，如果我的描述含糊不清，请告诉我，我会尝试扩展它。这是我的 mainbackup.php 代码

```
<?php

// Doesnt open a new page for me..
function callpage($url)
{
  $ch = curl_init();
  $timeout = 1;
  curl_setopt($ch,CURLOPT_URL,$url);
  curl_setopt($ch,CURLOPT_RETURNTRANSFER,1);
  curl_setopt($ch,CURLOPT_CONNECTTIMEOUT,$timeout);
  curl_close($ch);
}

$link = mysql_connect('host', 'user', 'password');

//set each process to handle 60 databases
$limit=60;
$count=0;
$s="";

while ($row = mysql_fetch_assoc($link)) {
//echo $row['Database'] . "\n";
if($count <$limit)
{
    $count++;
    $s.= $row['dbs']. ",";
}
else
{
    //exec('php backup.php s='$s);
    $l='localhost/backup/backup.php?s=';
    $l.=$s;
    //window.open($l);
    callpage($l);
    //substr_replace($s ,"",-1);
    //echo "\n\n\n\n\n\n\n\n\n";

    $count=0;
        $s="";
    }

}

?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-15T17:50:05.153

以为我会在这里发布我的解决方案，以防其他人在寻找。使用 php 输出将打开选项卡的 javascript。写得很快，所以它也打开了错误的同一页面。我想你以后可以解决这个问题。

```
<?php
echo "<html><body>";
$link = mysql_connect('remotehost', 'user', 'password');
$res = mysql_query("selective databases");

$limit=80;
$count=0;
$s="";
$link = '<a href="javascript:open_wins()">start backup</a><script>function open_wins(){window.open("backup.php?s=';

while ($row = mysql_fetch_assoc($res)) {
    if($count <$limit)
    {
        $count++;
        $s.= $row['dbs']. ",";
    }
    else
    {
        $link.=$s;
        $link.='");window.open("backup.php?s=';

        $count=0;
        $s="";
    }

}
$link.='");window.close();}</script></html>';
echo $link;
echo "</html></body>";
?> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-14T19:56:03.033

您可以让备份过程为每个单独的数据集（您想要的选项卡）创建一个新页面，它将输出到这些页面，然后在原始页面上显示指向保存信息的页面的链接（使用 html 打开新标签）。

# php - implode() 二维数组的最简单方法是什么？

> ID：11038282
> 
> 赞同：22
> 
> 时间：2012-06-14T17:25:58.670
> 
> 标签：php, arrays

我是 PHP 新手，对它的工作原理不太了解。如果我有这样的二维数组（由数据库返回）：

```
array(3) {   
    [0]=> array(1) {         
        ["tag_id"]=> string(1) "5" 
    } 
    [1]=> array(1) {         
        ["tag_id"]=> string(1) "3" 
    } 
    [2]=> array(1) {         
        ["tag_id"]=> string(1) "4" 
    } 
} 
```

并想把它变成字符串`5,3,4`最快的方法是什么？我目前有一个令人讨厌的`foreach`循环，但希望它可以在一行中完成。一个标准`implode`给了我`Array,Array,Array`。

* * *

## 回答 #1

> 赞同：33
> 
> 时间：2012-06-14T17:30:31.960

[这会使用array_map](http://php.net/array-map)修改您的数组，但通过将其转换为`tag_id`'s的一维数组可能会更好。然后你可以像往常一样使用内爆：

```
$arr = array_map(function($el){ return $el['tag_id']; }, $arr);
$str = implode(',', $arr); 
```

如果您不想修改数组，则可以这样做：

```
$str = implode(',', array_map(function($el){ return $el['tag_id']; }, $arr)); 
```

[**键盘演示**](http://codepad.viper-7.com/DJZzqi)

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2015-01-07T01:57:12.377

您要求一个二维数组，这是一个适用于多维数组的函数。

```
function implode_r($g, $p) {
    return is_array($p) ?
           implode($g, array_map(__FUNCTION__, array_fill(0, count($p), $g), $p)) : 
           $p;
} 
```

我可以像这样展平数组结构：

```
$multidimensional_array = array(
    'This',
    array(
        'is',
        array(
            'a',
            'test'
        ),
        array(
            'for',
            'multidimensional',
            array(
                'array'
            )
        )
    )
);

echo implode_r(',', $multidimensional_array); 
```

结果是：

```
This,is,a,test,for,multidimensional,array 
```

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2016-12-25T06:57:28.377

```
// simplest
$str = implode(',',array_map('implode',$arr)); 
```

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2017-07-11T15:48:29.280

如果一个人只是想像在这种情况下那样内爆单个数组“列”，那么最简单的事情是：

```
implode(",", array_column($array,"tag_id")); 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-06-14T17:30:25.223

从[PHP implode() 手册](http://www.php.net/manual/en/function.implode.php#106085)中查看以下内容：

```
<?php
/**
 * Implode an array with the key and value pair giving
 * a glue, a separator between pairs and the array
 * to implode.
 * @param string $glue The glue between key and value
 * @param string $separator Separator between pairs
 * @param array $array The array to implode
 * @return string The imploded array
 */
function array_implode( $glue, $separator, $array ) {
    if ( ! is_array( $array ) ) return $array;
    $string = array();
    foreach ( $array as $key => $val ) {
        if ( is_array( $val ) )
            $val = implode( ',', $val );
        $string[] = "{$key}{$glue}{$val}";

    }
    return implode( $separator, $string );

}
?> 
```

如果您只想返回值（而不是键），只需将上面的内容修改为使用`$string[] = "{$val}";`.

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2016-07-08T07:05:07.163

一行命令

```
implode(',', array_map('implode', $arr, array_fill(0, count($arr), ''))) 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2016-02-06T15:56:58.073

```
function recursive_implode($connector=',', $array=[], $implod='keys'){

    if($implod=='keys'){

        $results=implode($connector,array_keys($array));
    }
    else{

        $results=implode($connector,$array);
    }

    foreach($array as $key=> $value){

        if(is_array($value)){

            $results.=$connector.recursive_implode($connector,$value,$implod);
        }
    }

    return $results;
} 
```

# iphone - 我可以将可能的源类型列为不可用的吗？

> ID：11038283
> 
> 赞同：0
> 
> 时间：2012-06-14T17:26:13.640
> 
> 标签：iphone, objective-c, ios, memory-leaks, uiimagepickercontroller

我目前有这个代码：

```
NSArray *mediaTypes = [UIImagePickerController availableMediaTypesForSourceType:imagePicker.sourceType];
imagePicker.mediaTypes = mediaTypes; 
```

但它导致了这种泄漏：

```
figremote_createpropertylistfrombinaryplistdata 
```

有人说用这个代替它：

```
CFStringRef mTypes[2] = { kUTTypeImage, kUTTypeMovie };

CFArrayRef mTypesArray = CFArrayCreate(CFAllocatorGetDefault(), (const void**)mTypes, 2, &kCFTypeArrayCallBacks);

imagePicker.mediaTypes = (NSArray*)mTypesArray;

CFRelease(mTypesArray); 
```

问题是，有些设备没有电影模式。如果我允许该模式并且它不可用，它会导致问题吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-14T18:25:19.923

据我所知，没有不支持视频模式的设备。如果设备不支持视频模式，则根本不支持摄像头。我的建议是检查设备是否完全支持相机。在这种情况下，下面的代码就可以了。

```
if ([UIImagePickerController isSourceTypeAvailable:UIImagePickerControllerSourceTypeCamera]) {
    NSLog(@"Device supports camera");
} else {
    NSLog(@"Device does not support camera");
} 
```

# android - Android 手机应用意图

> ID：11038286
> 
> 赞同：3
> 
> 时间：2012-06-14T17:26:43.960
> 
> 标签：android, android-intent

我想在手机上启动手机应用程序作为意图

我正在使用此代码

```
startActivity(getPackageManager().getLaunchIntentForPackage("com.android.phone")); 
```

但是该函数会抛出一个空指针 excaption，因此没有可启动的项目，但是我如何启动它以使用户观看电话日志

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-02T00:34:06.150

您需要某些权限...最好做

```
 Intent intent = new Intent(Intent.ACTION_MAIN, null);
 intent.addCategory(Intent.CATEGORY_LAUNCHER);
     List<ResolveInfo> packs = mContext.getPackageManager().queryIntentActivities(intent,     PackageManager.PERMISSION_GRANTED); 
```

然后你得到了你有权使用的东西的列表，然后对它进行排序以启动。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-14T19:42:51.507

我设法回答了我的问题，感谢您的回答，并没有完全满足我想要的东西，但在此基础上，我想通了

我只需要打电话

```
Intent intent = new Intent(Intent.ACTION_DIAL);

startActivity(intent); 
```

只打开电话应用程序

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-14T17:38:43.223

我已使用以下代码有意拨打电话号码，它可能对您有用。

```
String uri = "tel:" + phoneNumber.trim() ;
Intent intent = new Intent(Intent.ACTION_DIAL);
intent.setData(Uri.parse(uri));
startActivity(intent); 
```

* * *

## 回答 #4

> 赞同：-3
> 
> 时间：2012-12-18T11:29:44.250

我之前解决了这个问题，所以这里是：

```
Intent i = new Intent();
PackageManager manager = getPackageManager();
i = manager.getLaunchIntentForPackage("com.android.htcdialer");
i.addCategory(Intent.CATEGORY_LAUNCHER);
startActivity(i); 
```

# c# - 将 RDLC 数据源设置为对象的问题

> ID：11038288
> 
> 赞同：19
> 
> 时间：2012-06-14T17:26:51.103
> 
> 标签：c#, asp.net-mvc, reportviewer, rdlc

**背景：**

我的任务是将 Access 数据库应用程序转换为 ASP.Net C# MVC。这是我的第一个 MVC 应用程序。

有 10 份报告需要转换。我们正在使用 RDLC 文件和 reportviewer。我正在使用带有所有最新补丁的 Visual Studio 2010。我们正在连接一个由现有 Access 数据库填充的 SQL Server 数据库，因此表结构几乎是一成不变的，否则我们将不得不尝试转换 10 年的数据。

除了两份报告，我已经完成了所有报告。最终报告需要更多处理，而不仅仅是显示数据库中的数据。最简单的方法是创建一个 C# 对象并在服务器端进行所有处理，然后使用 RDLC 显示结果。

**问题**

我遇到的问题是 Visual Studio 无法将我创建的对象识别为潜在的数据源。每次我尝试“添加数据集”时，它都会弹出“数据源配置向导”，并且只提供 SQL Server 数据库作为可能的数据连接。我知道有一个屏幕允许您选择一个对象作为您的数据集，但我从来没有看到那个屏幕。

以下是对象（为清楚起见删除了处理功能）：

```
public class TurnAroundVal
{
    // Registration Package information
    public string dataType { get; set; }

    // Calculated totals; values only set through constructor or calculation function
    public int packageCount { get; private set; }
    public int dayCount { get; set; }
    public double avgTurnAround { get; private set; }
    public int upperRange { get; private set; }
    public int lowerRange { get; private set; }
}

public class TurnAroundVals
{
    // Public Variables
    public IEnumerable<TurnAroundVal> TurnArounds { get; private set; }
    public DatePass dates { get; set; }
    public int pkgTotal { get; private set; }
    public double dayTotal { get; private set; }
    public double avgAllTurnArounds { get; private set; }
} 
```

我也愿意使用“TurnAroundVal”的 IEnumerable 作为数据源，只需将日期、int 和 double 作为参数传递。要么工作。

**问题**

Visual Studio 2010 中是否有我缺少的设置以允许 RDLC 设计器查看我创建的对象？我什至认为这将适用于我定义的类，我错了吗？

**回答**

给出的所有建议都很有帮助，但最终让它对我有用的是在同一解决方案中创建一个临时的非 Web 项目并在那里创建 RDLC。当我去添加一个数据集时，它显示“对象”作为一个选项。您必须添加对 Web 项目的引用，以便您的对象可见，然后您可以选择您想要的并在 RDLC 中使用它。之后，您只需将 RDLC 文件拖放到您的 Web 项目中，删除临时项目，就可以开始了。请记住，您必须在代码中手动添加数据源，并且它们的名称必须与您在 RDLC 中指定的名称相同。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-14T18:22:58.927

1.  确保这些类与应用程序位于相同的命名空间中。
2.  在创建报告之前尝试构建应用程序
3.  启动报告向导。在 DataSouce 下选择您的 Web 应用程序的名称。
4.  在可用数据集下，您应该看到 Visual Studio 解释为您的“选择方法”。如果一切顺利，这应该是 TurnArounds。

您可能需要将类文件放在 App_Data 或 App_Code 文件夹中，但我不确定。

这也可能有帮助。

[http://msdn.microsoft.com/en-us/library/ms251692%28v=vs.100%29.aspx](http://msdn.microsoft.com/en-us/library/ms251692%28v=vs.100%29.aspx)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-03-11T10:04:10.177

Visual Studio does not recognize your class when you use only public members. When you use getter and setter instead, you can see your class when you choose your datasource.

There are some other wizards in Visual Studio that do not work with public members.

Cheers, Markus

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-20T12:14:48.273

将您的对象设置在相同的命名空间下，但在不同的项目上，然后在您的 UI 项目中引用该项目。

也尝试实施`INotifyPropertyChanged`.

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2018-02-01T09:34:57.323

**我在尝试在Visual Studio 2017**的 ASP.NET MVC 项目中创建 RDLC 报告时遇到了同样的问题，因此我将其添加为单独的答案，以明确这在 2018 年 1 月仍然是一个问题。

我的解决方案包括一个 C# 库项目和一个 MVC 客户端项目。

**在 C# 库项目中**添加报告（通过选择添加新项目，然后选择报告向导项目）会打开带有数据源配置向导的报告向导（我可以在其中选择是使用数据库、服务还是对象作为数据源）模态在它之上：

[![显示数据源配置向导的报告向导](../Images/a1c9a9ffcc5c7129f1dba6d79ac1f725.png)](https://i.stack.imgur.com/GywTU.png)

然而，选择**在 MVC 项目中**添加一个新的报告向导项只是打开了没有数据源配置向导的报告向导：

[![没有数据源配置向导的报表向导](../Images/80d3a8e1a9d20818e69767c92dba4fe9.png)](https://i.stack.imgur.com/YePf1.png)

我尝试将业务对象类添加到我的 MVC 项目中，重新编译它，然后再次向 MVC 项目添加报告，但我仍然得到第二个屏幕截图，所以看起来你只是在添加到时没有得到数据源配置向导出于某种原因，MVC 项目。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2019-03-08T01:53:00.537

在没有报表向导的情况下，我能够在 VS 2017 中将对象添加为数据源。[使用 c# 的 Winforms 应用程序] [PS 我是 NOOB，所以会有错误等，但我希望这有助于给出方向。] 我使用的步骤：

A部分 1.创建一个代表数据的对象，例如：对象/模型类在我的例子中它是一个约会对象

```
 class FutureVisitsModel
    {
        public DateTime StartDate {get; set;}
        public string Client_Id { get; set; }
        public string Treatment_Desc { get; set; }
        public string Service_Code { get; set; }

        public FutureVisitsModel()
        {
            DateTime startdate = StartDate;
            String clinetid = Client_Id;
            String treatmentdesc = Treatment_Desc;
            String serviceCode = Service_Code;
        }
    } 
```

B 部分：创建报告 2\. 向解决方案添加报告：右键单击解决方案，选择添加新项目并选择报告 [在此处输入图像描述](https://i.stack.imgur.com/aDbce.png) 3\. 打开空白报告 4\. 从工具箱中，将表格拖放到报告中 5\. 一个对话框打开以选择数据源 6\. 从您的解决方案中选择对象 [ ypu 将寻找您在 A 部分中创建的类

C 部分：创建报表查看器表单 7\. 在解决方案资源管理器中创建一个新表单“formRptViewer” 8\. 打开表单并添加报表查看器控件 9\. 如果您的工具箱中没有该控件，则需要安装报表来自 nugget 的查看器包或通过包管理器控制台安装。webforms 版本：安装包 Microsoft.ReportingServices.ReportViewerControl.WebForms winforms 版本：安装包 Microsoft.ReportingServices.ReportViewerControl.WinForms

9.1 在解决方案资源管理器中将报表查看器的控件设置为 public 单击 formRptViewer 旁边的下拉菜单以查看构成表单的文件 编辑此文件： formRptViewer.Designer.cs 将 reprtviewer 的控件更改为 public public Microsoft.Reporting .WinForms.ReportViewer ReportViewer1;

D 部分：创建数据表并将其发送到报告 10\. 创建数据表 DataTable dataTableFutureVisits = new DataTable(); [您需要用我们自己的数据填充数据表] 11\. 添加 using 语句 using Microsoft.Reporting.WinForms; 12.设置数据源并新建报表查看器实例

```
ReportDataSource rs = new ReportDataSource();
            rs.Name = "DataSet1";
            rs.Value = dataTableFutureVisits;
            FormRptViewer frm = new FormRptViewer();
            frm.ReportViewer1.LocalReport.DataSources.Clear();
            frm.ReportViewer1.LocalReport.DataSources.Add(rs);
            frm.ReportViewer1.LocalReport.ReportEmbeddedResource = "ChiroRecallList.RptFutureVisits.rdlc";
            // name the report with date
            frm.ReportViewer1.LocalReport.DisplayName = "Your File Name Goes Here" + "_" + DateTime.Now.ToString("yyyyMMdd HH:mm");
            frm.ShowDialog(); 
```

E 部分：更新报告：向数据表中添加列并在报告中显示它们[也用于删除列]

1.  在数据表中添加一列
2.  更改您的对象类以反映数据 [如 A 部分]
3.  打开报表并删除数据集 [不是数据源]
4.  在解决方案资源管理器中：有一个属性下拉列表展开
5.  展开数据源文件夹
6.  [删除以模型屏幕截图](https://i.stack.imgur.com/lBhU4.png)命名的数据源

7.  清理并重建解决方案 [截图](https://i.stack.imgur.com/5OIVt.png)

8.  打开报告并右键单击您的数据源并添加新数据集 [屏幕截图](https://i.stack.imgur.com/v3ht7.png)

# oracle - 如何在plsql中使用可变数组

> ID：11038290
> 
> 赞同：-1
> 
> 时间：2012-06-14T17:27:05.033
> 
> 标签：oracle, plsql, varray

下面的代码块抛出错误..

```
DECLARE
  TYPE dbadaptor IS VARRAY (9) OF VARCHAR2(20);
  min_date DATE;
  max_date DATE;
  db       dbadaptor := dbadaptor('wsf_ds_11765_c', 'wsf_ds_11750_c',
                                  'wsf_ds_11756_c', 'wsf_ds_11759_c',
                                  'wsf_ds_11706_c', 'wsf_ds_11709_c', 
                                  'wsf_ds_11751_c', 'wsf_ds_11708_c',
                                  'wsf_ds_11762_c');
BEGIN
  FOR i IN 1..9 LOOP
    SELECT
      from_sf_date(max(start_time)),
      from_sf_date(min(start_time))
    INTO max_date, min_date
    FROM db(i);
  END LOOP;
END; 
```

我在第 8 行收到错误“PL/SQL：ORA-00933：SQL 命令未正确结束”，这是因为 db(i)...。你能帮帮我吗

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-14T20:43:36.673

您的代码存在各种问题：

1.  您不能在 SQL 语句中访问 PL/SQL 中定义的数据类型。
2.  为了在 from 子句中访问数组，您需要使用该`table`函数。
3.  您正在尝试`start_time`从您的数组中进行选择，但您没有定义这样的列。您拥有的唯一列是具有未定义名称的字符串（将被引用为`column_value`）。

下面是一个示例，演示了问题 1 和 2 中引用的技术（我缺乏足够的信息来为问题 3 提供解决方案）。

```
CREATE TYPE dbadaptor AS VARRAY(9) OF VARCHAR2(20);

DECLARE
   min_date DATE;
   max_date DATE;
   db       dbadaptor
               := dbadaptor('wsf_ds_11765_c',
                            'wsf_ds_11750_c',
                            'wsf_ds_11756_c',
                            'wsf_ds_11759_c',
                            'wsf_ds_11706_c',
                            'wsf_ds_11709_c',
                            'wsf_ds_11751_c',
                            'wsf_ds_11708_c',
                            'wsf_ds_11762_c');
BEGIN    
   FOR db_value IN (SELECT COLUMN_VALUE AS CV FROM TABLE(db)) LOOP
      DBMS_OUTPUT.put_line(db_value.CV);
   END LOOP;    
END;
/ 
```

但是，这是循环遍历数组的低效方式。如果这就是你所做的一切，你最好只使用一个循环：

```
DECLARE
   type dbadaptor is VARRAY(9) OF VARCHAR2(20);
   min_date DATE;
   max_date DATE;
   db       dbadaptor
               := dbadaptor('wsf_ds_11765_c',
                            'wsf_ds_11750_c',
                            'wsf_ds_11756_c',
                            'wsf_ds_11759_c',
                            'wsf_ds_11706_c',
                            'wsf_ds_11709_c',
                            'wsf_ds_11751_c',
                            'wsf_ds_11708_c',
                            'wsf_ds_11762_c');
   i number;
BEGIN
   FOR i IN 1..9 LOOP
      DBMS_OUTPUT.put_line(db(i));
   END LOOP;
END;
/ 
```

# iphone - 更改单击 vclick 在第二次单击时不会在 JQM 中返回正确的 href

> ID：11038292
> 
> 赞同：0
> 
> 时间：2012-06-14T17:27:17.673
> 
> 标签：iphone, jquery-mobile

我想加快 JQM 中页面之间的转换。我做这个功能。

```
$(document).ready(function(event){
    // Do this once, first page load.
    // alert('pageinit');

    $('a').live('vclick', function () {             
        alert(this.href);
        $.mobile.changePage(this.href, {
            transition: "slideup"
        });                      
    });

    $('a').live('click', function(e) {
        e.preventDefault();
        return false;
    });

    //Inicializace
    //init();
}); 
```

问题是如果第一次单击项目，我无法获得正确的 href 值。

**我第一次得到：**

![在此处输入图像描述](../Images/2a083ab66dfc1bcab4454c691a4b6e65.png)

**但第二次我得到**

![在此处输入图像描述](../Images/1e6e4f503acdf4f1dbb25df2c0e46b81.png)

但是，如果我点击具有相同 href 的相同按钮，我应该获得相同的 URL。

如何在 JQM 中轻松快速地解决这个问题？

非常感谢您的帮助..

# c# - 如何通过 ODBC 连接在 c# 中传递 Informix 集合参数（LIST、SET、MULTISET）

> ID：11038298
> 
> 赞同：1
> 
> 时间：2012-06-14T17:27:42.110
> 
> 标签：c#, asp.net, sql, odbc, informix

我正在寻找一种在 C# 中传递 Informix 列表参数的方法。

我问了一个如何将多值参数传递给 Informix 的先前问题，但现在我需要从 C# 执行它。

相关问题在[这里](https://stackoverflow.com/questions/10825468/informix-how-to-pass-use-and-execute-multiple-values-in-a-single-parameter-to)。

在简历中，我有一个这样的程序。

```
CREATE PROCEDURE test_3(c LIST(CHAR(10) NOT NULL))
    RETURNING CHAR(10) AS r;
    DEFINE r CHAR(10);
    FOREACH SELECT * INTO r FROM TABLE(c)
        RETURN r WITH RESUME;
    END FOREACH;
END PROCEDURE; 
```

像这样在 Aqua Data Studio.8.0.22 中执行它可以正常工作

```
 EXECUTE PROCEDURE test_3('LIST{''stspols'',''stsrepo''}'); 
```

所以我做了一个简单的例子来说明如何在 c# 中执行它。

首先像一个`CommandType.Text`

```
string strParameters = "LIST{''stspols'',''stsrepo''}";
using (OdbcConnection oConnection = new OdbcConnection("DSN=MYDSN;UID=MYUID;PWD=MYPWD;"))
      {
           oConnection.Open();
           using (OdbcDataAdapter oCommand = new OdbcDataAdapter(string.Format("EXECUTE PROCEDURE test_3('{0}')", strParameters), oConnection))
           {                   
                using (DataTable dt = new DataTable())
                {
                            oCommand.Fill(dt);
                }

            }
      } 
```

这个工作正常。

所以我很好奇并试图执行它，但作为`CommandType.StoredProcedure`

```
string strParameters = "LIST{''stspols'',''stsrepo''}";
            using (OdbcConnection oConnection = new OdbcConnection("DSN=MYDSN;UID=MYUID;PWD=MYPWD;"))
            {
                oConnection.Open();
                using (OdbcCommand oCommand = new OdbcCommand("{CALL test_3(?)}", oConnection))
                {
                    oCommand.CommandType = CommandType.StoredProcedure;
                    OdbcParameter oParameter = new OdbcParameter("c", OdbcType.Char, 4000);
                    oParameter.Value = strParameters;
                    oCommand.Parameters.Add(oParameter);

                    using (OdbcDataAdapter oDataAdapter = new OdbcDataAdapter(oCommand))
                    {
                        using (DataTable dt = new DataTable())
                        {
                            oDataAdapter.Fill(dt);
                        }

                    }
                }

            } 
```

但现在我明白了`ERROR [HY000] [Informix][Informix ODBC Driver][Informix]Invalid collection literal value.`

所以在这一切之后，我的最后一个问题是

**我如何从 C# 执行这种 Informix 过程，将集合参数类型（LIST、SET、MULTISET）作为存储过程。**

显然我做错了什么。

提前感谢您的宝贵帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-15T16:48:44.623

双引号在原始 SQL 中是必需的，但在参数化查询中不应该是必需的。您应该能够替换：

```
string strParameters = "LIST{''stspols'',''stsrepo''}"; 
```

和：

```
string strParameters = "LIST{'stspols','stsrepo'}"; 
```

了解何时需要将引号加倍以及何时不需要加倍是很棘手的，但“不在占位符值中”是准确的。

# php - Chestnut：使用 OAuth'd jQuery 与 Twitter 交互

> ID：11038300
> 
> 赞同：1
> 
> 时间：2012-06-14T17:28:04.480
> 
> 标签：php, jquery, twitter, oauth

[免责声明：这里](https://stackoverflow.com/questions/6700106/twitter-oauth-authentication-in-javascript)和[这里](https://stackoverflow.com/questions/1769713/using-only-jquery-to-update-twitter-oauth)有类似的问题，但尚未解决。

据我了解，应该可以进行服务器端 (php) OAuth，然后使用 my-website-only-valid 访问令牌与 Twitter 交互？（因此不具危险性的标记。）

我想知道这是否仍然可能，推特从那时起是否发生了变化？我的 web 应用程序需要与 twitter 进行完全交互，但是 Twitter 设置的 350 个连接/小时/IP 限制是不够的，这就是为什么我需要连接到客户端的原因。

显然有一个叫做[Jitter](http://www.ohloh.net/p/jquery-jitter)的东西实现了这个，但是这个项目似乎已经死了，作者已经消失了。

Twitter 是否只是想阻止这种类型的访问（网络应用程序）？还是我错过了什么？

任何帮助深表感谢！

# c# - 如何在 IIS 上本地托管可通过 Internet 供客户端使用的 WCF 服务，并为其配置 SSL？

> ID：11038307
> 
> 赞同：-1
> 
> 时间：2012-06-14T17:28:53.400
> 
> 标签：c#, wcf, web-services, iis, hosting

我有一个 C# WCF 服务和我编写的客户端，以便企业员工可以在移动设备（目前是上网本）上的客户端上打卡/打卡。这已经过测试并且在开发中运行良好，现在是时候将其投入生产了。

生产是在企业办公室（即家庭办公室）运行 Win 2008 R2 x64 的 HP Proliant ML110 服务器。因为它是一个家庭办公室，只有一个普通的家庭有线互联网连接，所以我设置了一个免费的无 ip 动态 DNS 帐户和端口转发，以便网络流量正确地进入这个服务器。

从远程机器上，我可以访问托管在服务器上 IIS 上的 Web 服务的 WSDL，例如使用[http://example.no-ip.org/exampleService/LaborService 作为示例（不是实际的 URL）。 svc?wsdl](http://example.no-ip.org/exampleService/LaborService.svc?wsdl)，我可以通过互联网从远程机器上看到 WSDL。

现在，我需要能够使用 SSL 安全地托管它，并且需要正确配置 IIS 和 web 服务端点/客户端，以便远程客户端可以通过 Internet 进行身份验证并对该 web 服务进行 web 服务调用。

我遇到的问题是，我真的不知道 SSL 是如何工作的（至少我不知道使用它需要什么），而且我不知道如何配置 IIS 或 web 服务或客户端。

默认情况下，服务和客户端使用 wsHttpBinding 和 Windows 身份验证。我认为最好的事情是，因为这不是任何高度敏感的数据（只是员工姓名、身份证、参考代码/工作名称、身份证、参考代码/工作地点 id、姓名、参考代码/进出时间），将是具有使其工作所需的最低限度的安全性，因此我可以在远程客户端上进行连接。

所以现在，我有带有 IIS7 的 Windows 2008 和部署在其上的 C# WCF 服务，我可以从中连接本地客户端。我必须做些什么才能公开此信息？我知道有很多选择，但我认为我需要的是有人就最好的方法给我他们的意见，以及如何完成它的说明或指导（所以请我知道这是一个广泛的问题很多答案，但只需选择一个您认为最好的解决方案并向我解释；我将永远感激不尽）。

例如，我对如何部署 Web 应用程序一无所知；我不知道获得 SSL 证书需要什么，或者如果我有证书该怎么办，或者如何配置 IIS、服务和客户端以使用它。所以关于如何做这些事情的说明会很棒。

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-14T17:35:19.510

没有人可以回答所有这些都是一个答案。你需要做一些研究。查看[Essential Windows Communication Foundation (WCF): For .NET Framework 3.5](https://rads.stackoverflow.com/amzn/click/com/0321440064)或任何其他 WCF 书籍。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-14T21:55:41.517

[这](http://wcftutorial.net/WCF-IIS-Hosting.aspx)是一个带有屏幕截图的教程（在 WCF 托管下查看）。

对于 WCF 安全配置，请看这里：

[链接1](http://msdn.microsoft.com/en-us/library/ms731925.aspx) ,[链接2](http://wcfsecurity.codeplex.com/)

有关 SSL 说明和 IIS 配置，请查看此处：

[链接1](http://msdn.microsoft.com/en-us/library/ms734679.aspx) ,[链接2](http://msdn.microsoft.com/en-us/library/ff405740.aspx)

当您花一些时间仔细阅读这些站点时，您应该能够在不到 30 分钟的时间内设置您的配置。

请让我知道这是否有帮助。

# asp.net-mvc-3 - mvc - ActionNameAttribute 从资源中获取？

> ID：11038308
> 
> 赞同：2
> 
> 时间：2012-06-14T17:29:03.333
> 
> 标签：asp.net-mvc-3, resources, attributes

嗨，我一直在寻找一些解决方案，但我什么也没找到......

有没有办法通过 ActionNameAttribute 使用资源？

例如，在属性中使用 DisplayNameAttribute，我们可以求助于：

```
 [Display(Name = "labelForName", ResourceType = typeof(Resources.Resources))] 
    public string name{ get; set; } 
```

但我不知道如何将资源用于我的操作方法......

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-14T17:42:17.587

您可以编写自定义属性来完成此任务：

```
[AttributeUsage(AttributeTargets.Method, AllowMultiple=false, Inherited=true)]
public sealed class LocalizedActionNameAttribute : ActionNameSelectorAttribute
{
    public LocalizedActionNameAttribute(string name, Type resourceType)
    {
        Name = name;
        ResourceType = resourceType;
    }

    public Type ResourceType { get; private set; }
    public string Name { get; private set; }

    public override bool IsValidName(ControllerContext controllerContext, string actionName, System.Reflection.MethodInfo methodInfo)
    {
        var rm = new ResourceManager(ResourceType);
        var name = rm.GetString(Name);
        return string.Equals(actionName, name, StringComparison.OrdinalIgnoreCase);
    }
} 
```

接着：

```
[LocalizedActionName("Index", typeof(Resources.Resources))]
public ActionResult Index()
{
    return View();
} 
```

# objective-c - UIScrollView 和 UIKeyboard 的问题

> ID：11038309
> 
> 赞同：0
> 
> 时间：2012-06-14T17:29:04.940
> 
> 标签：objective-c, uiscrollview, uitextview

我这里有一些问题。我有一个 UITextView，当我点击里面时，它会被键盘关闭，所以，我在这里要做的是一个 UIScrollView，它让我可以看到我在 TextView 中写的内容......

到目前为止，这是我的代码：

```
-(void)keyboardWillShow {
    if (self.view.frame.origin.y >= 0)
    {
        [self setViewMovedUp:YES];
    }
    else if (self.view.frame.origin.y < 0)
    {
        [self setViewMovedUp:NO];
    }
}

-(void)keyboardWillHide {
    if (self.view.frame.origin.y >= 0)
    {
        [self setViewMovedUp:YES];
    }
    else if (self.view.frame.origin.y < 0)
    {
        [self setViewMovedUp:NO];
    }
}

-(void)setViewMovedUp:(BOOL)movedUp
{
    [UIView animateWithDuration:.3 animations:^{
        CGRect rect = self.view.frame;
        if (movedUp)
        {
            scrollView.contentSize = CGSizeZero;
            scrollView.frame = CGRectMake(0, 80, 320, 308);
//            rect.origin.y -= kOFFSET_FOR_KEYBOARD;
//            rect.size.height += kOFFSET_FOR_KEYBOARD;
        }
        else
        {
            scrollView.contentSize = CGSizeZero;
            scrollView.frame = CGRectMake(0, 190, 320, 308);
//            rect.origin.y += kOFFSET_FOR_KEYBOARD;
//            rect.size.height -= kOFFSET_FOR_KEYBOARD;
        }
        self.view.frame = rect;
    }];
}

- (void)viewWillDisappear:(BOOL)animated
{
    [[NSNotificationCenter defaultCenter] removeObserver:self
                                                    name:UIKeyboardWillShowNotification
                                                  object:nil];

    [[NSNotificationCenter defaultCenter] removeObserver:self
                                                    name:UIKeyboardWillHideNotification
                                                  object:nil];
} 
```

问题是代码不能正常工作，当我点击 textView 视图而不是上升时，它下降了......

有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-15T16:02:53.567

我得到了所有问题的答案！

```
- (void)textViewDidBeginEditing:(UITextView *)textView{

    [self scrollViewAsd:130];

}

- (void)textViewDidEndEditing:(UITextView *)textView{

    [self scrollViewAsd:0];

}

- (void)scrollViewAsd:(float) inset
{

    [UIView animateWithDuration:.3 animations:^{
        scrollView.contentInset = UIEdgeInsetsMake(0, 0, inset, 0);
        scrollView.contentOffset = CGPointMake(0, inset); 

    }];
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-15T08:27:59.973

这**已经**`UITextView`是一个滚动视图。当您输入的文本多于可见时，它应该会自动滚动。此外，用户可以随时自行滚动里面的文字。

# php - Abantecart 扩展解决方案

> ID：11038312
> 
> 赞同：-1
> 
> 时间：2012-06-14T17:29:19.357
> 
> 标签：php, open-source, e-commerce, shopping-cart

我正在为 abantecart 开发 git 证书扩展并遇到小问题。

我需要挂钩订单并允许客户提供礼券的详细信息，例如收件人的姓名和电子邮件。

我找到了2个解决方案：

1.  使用带有收件人姓名和电子邮件的产品（在这种情况下为礼券）选项。在将产品添加到购物车之前，这将是必需的。优点：简单。缺点：无法验证输入

2.  挂钩到结帐过程（最后一步），如果购买的产品是礼券，请询问详细信息。优点：更多控制
    缺点：我不知道该怎么做。

有什么建议，我应该怎么走？我需要有关示例的帮助，如何连接到结帐控制器

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-15T14:42:48.160

1.  在扩展目录中创建文件，例如。core/hooks.php 并将其包含在 main.php 中。前任：`include_once('core/hooks.php');`
2.  在 hooks.php 中编写如下内容：

    ```
    class ExtensionYourExtensionTextId extends Extension {

      public function onControllerCheckoutConfirm_InitData() {

          $this->baseObject->view->addHookVar('payment_pre', 'your value'));
          //or change array data of base controller
         $this->baseObject->data['some_key'] = 'your value';

     return ;}
    } 
    ```

[您可以在http://www.abantecart.com/document_wiki/index.php/AbanteCart_Extension%E2%80%99s_Developer_Guide#Hooks](http://www.abantecart.com/document_wiki/index.php/AbanteCart_Extension%E2%80%99s_Developer_Guide#Hooks)找到更多信息

# logging - 如何使用 Apache CXF 以简单的方式获取传入和传出的肥皂 xml？

> ID：11038313
> 
> 赞同：15
> 
> 时间：2012-06-14T17:29:21.727
> 
> 标签：logging, soap, cxf, interceptor

我一直在摆弄 CXF 上的服务器端拦截器。但似乎实现简单的传入和传出拦截器并不是一项简单的任务，它给了我一个包含 SOAP XML 的纯字符串。

我需要在拦截器中有纯 XML，以便我可以将它们用于特定的日志记录任务。标准的 LogIn & LogOut 拦截器不能胜任这项任务。是否有人愿意分享一些示例，说明我如何实现一个简单的传入拦截器，该拦截器能够获取传入的 SOAP XML 和传出拦截器以再次获取 SOAP XML？

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-06-15T15:04:10.557

在此处找到传入拦截器的代码： [Logging request/response with Apache CXF as XML](https://stackoverflow.com/questions/4592422/logging-request-response-with-apache-cxf-as-xml)

我的传出拦截器：

```
import java.io.OutputStream;

import org.apache.cxf.interceptor.Fault;
import org.apache.cxf.interceptor.LoggingOutInterceptor;
import org.apache.cxf.io.CacheAndWriteOutputStream;
import org.apache.cxf.io.CachedOutputStream;
import org.apache.cxf.io.CachedOutputStreamCallback;
import org.apache.cxf.message.Message;
import org.apache.cxf.phase.Phase;

public class MyLogInterceptor extends LoggingOutInterceptor {

    public MyLogInterceptor() {
        super(Phase.PRE_STREAM);
    }

    @Override
    public void handleMessage(Message message) throws Fault {
        OutputStream out = message.getContent(OutputStream.class);
        final CacheAndWriteOutputStream newOut = new CacheAndWriteOutputStream(out);
        message.setContent(OutputStream.class, newOut);
        newOut.registerCallback(new LoggingCallback());
    }

    public class LoggingCallback implements CachedOutputStreamCallback {
        public void onFlush(CachedOutputStream cos) {
        }

        public void onClose(CachedOutputStream cos) {
            try {
                StringBuilder builder = new StringBuilder();
                cos.writeCacheTo(builder, limit);
                // here comes my xml:
                String soapXml = builder.toString();
            } catch (Exception e) {
            }
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2014-04-01T12:48:12.807

我无法让上述解决方案为我工作。这是我开发的，希望它可以帮助其他人：

我的“传入”拦截器：

```
import org.apache.cxf.interceptor.LoggingInInterceptor;
import org.apache.cxf.interceptor.LoggingMessage;

public class MyCxfSoapInInterceptor extends LoggingInInterceptor {

    public MyCxfSoapInInterceptor() {
        super();
    }

    @Override
    protected String formatLoggingMessage(LoggingMessage loggingMessage) {
        String soapXmlPayload = loggingMessage.getPayload() != null ? loggingMessage.getPayload().toString() : null;

        // do what you want with the payload... in my case, I stuck it in a JMS Queue

        return super.formatLoggingMessage(loggingMessage);
    }
} 
```

我的“传出”拦截器：

```
import org.apache.cxf.interceptor.LoggingMessage;
import org.apache.cxf.interceptor.LoggingOutInterceptor;

public class MyCxfSoapOutInterceptor extends LoggingOutInterceptor {

    public MyCxfSoapOutInterceptor() {
        super();
    }

    @Override
    protected String formatLoggingMessage(LoggingMessage loggingMessage) {
        String soapXmlPayload = loggingMessage.getPayload() != null ? loggingMessage.getPayload().toString() : null;

        // do what you want with the payload... in my case, I stuck it in a JMS Queue

        return super.formatLoggingMessage(loggingMessage);
    }
} 
```

我添加到我的 spring 框架应用程序上下文 XML 中的东西（记得在 XML 文件中定义两个拦截器）......

```
 ...

    <cxf:bus>
        <cxf:inInterceptors>
            <ref bean="myCxfSoapInInterceptor"/>
        </cxf:inInterceptors>
        <cxf:inFaultInterceptors>
            <ref bean="myCxfSoapInInterceptor"/>
        </cxf:inFaultInterceptors>
        <cxf:outInterceptors>
            <ref bean="myCxfSoapOutInterceptor"/>
        </cxf:outInterceptors>
        <cxf:outFaultInterceptors>
            <ref bean="myCxfSoapOutInterceptor"/>
        </cxf:outFaultInterceptors>
    </cxf:bus>

    ... 
```

请注意，还有其他方法可以添加拦截器，例如通过注释，这将允许您仅拦截特定的肥皂服务。将拦截器添加到“总线”的上述方式将拦截您所有的肥皂服务。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2015-01-29T11:26:54.673

我只想再分享一个选项，如何同时获取传入和传出消息以用于某些记录目的，例如记录请求和对数据库的相应响应。

```
import javax.xml.namespace.QName;
import javax.xml.soap.SOAPMessage;
import javax.xml.soap.SOAPPart;
import javax.xml.transform.TransformerException;
import javax.xml.transform.TransformerFactory;
import javax.xml.transform.dom.DOMSource;
import javax.xml.transform.stream.StreamResult;
import javax.xml.ws.handler.MessageContext;
import javax.xml.ws.handler.soap.SOAPHandler;
import javax.xml.ws.handler.soap.SOAPMessageContext;
import java.io.StringWriter;
import java.util.Collections;
import java.util.Set;

public class CxfLoggingHandler implements SOAPHandler<SOAPMessageContext> {

private static final String SOAP_REQUEST_MSG_KEY = "REQ_MSG";

public Set<QName> getHeaders() {
    return Collections.EMPTY_SET;
}

public boolean handleMessage(SOAPMessageContext context) {
    Boolean outgoingMessage = (Boolean) context.get (MessageContext.MESSAGE_OUTBOUND_PROPERTY);
    if (outgoingMessage) {
        // it is outgoing message. let's work
        SOAPPart request = (SOAPPart)context.get(SOAP_REQUEST_MSG_KEY);
        String requestString = convertDomToString(request);
        String responseString = convertDomToString(context.getMessage().getSOAPPart());
        String soapActionURI = ((QName)context.get(MessageContext.WSDL_OPERATION)).getLocalPart();
        // now you can output your request, response, and ws-operation    
    } else {
        // it is incoming message, saving it for future
        context.put(SOAP_REQUEST_MSG_KEY, context.getMessage().getSOAPPart());
    }
    return true;
}

public boolean handleFault(SOAPMessageContext context) {        
    return handleMessage(context);
}

private String convertDomToString(SOAPPart soap){
    final StringWriter sw = new StringWriter();
    try {
        TransformerFactory.newInstance().newTransformer().transform(
                new DOMSource(soap),
                new StreamResult(sw));
    } catch (TransformerException e) {
        // do something
    }
    return sw.toString();
}
} 
```

然后将该处理程序与网络服务连接

```
<jaxws:endpoint id="wsEndpoint" implementor="#myWS" address="/myWS" >
    <jaxws:handlers>
        <bean class="com.package.handlers.CxfLoggingHandler"/>
    </jaxws:handlers>
</jaxws:endpoint> 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2015-04-30T11:28:24.540

将文本写入 StringBuffer 的示例，带有用于捕获一些自定义属性和过滤请求 XML 的钩子：

```
public class XMLLoggingInInterceptor extends AbstractPhaseInterceptor<Message> {

    private static final String LOCAL_NAME = "MessageID";

    private static final int PROPERTIES_SIZE = 128;

    private String name = "<interceptor name not set>";

    protected PrettyPrinter prettyPrinter = null;
    protected Logger logger;
    protected Level reformatSuccessLevel;
    protected Level reformatFailureLevel;

    public XMLLoggingInInterceptor() {
        this(LogUtils.getLogger(XMLLoggingInInterceptor.class), Level.INFO,  Level.WARNING);
    }

    public XMLLoggingInInterceptor(PrettyPrinter prettyPrinter) {
        this(LogUtils.getLogger(XMLLoggingInInterceptor.class), Level.INFO,  Level.WARNING);

        this.prettyPrinter = prettyPrinter;
    }

    public XMLLoggingInInterceptor(Logger logger, Level reformatSuccessLevel, Level reformatFailureLevel) {
        super(Phase.RECEIVE);
        this.logger = logger;
        this.reformatSuccessLevel = reformatSuccessLevel;
        this.reformatFailureLevel = reformatFailureLevel;
    }

    public XMLLoggingInInterceptor(PrettyPrinter prettyPrinter, Logger logger, Level reformatSuccessLevel, Level reformatFailureLevel) {
        this(logger, reformatSuccessLevel, reformatFailureLevel);
        this.prettyPrinter = prettyPrinter;
        this.logger = logger;
    }

    public void setName(String name) {
        this.name = name;
    }

    public void handleMessage(Message message) throws Fault {

        if (!logger.isLoggable(reformatSuccessLevel)) {
             return;
        }

        InputStream in = message.getContent(InputStream.class);
        if (in == null) {
            return;
        }

        StringBuilder buffer;

        CachedOutputStream cache = new CachedOutputStream();
        try {
            InputStream origIn = in;
            IOUtils.copy(in, cache);

            if (cache.size() > 0) {
                in = cache.getInputStream();
            } else {
                in = new ByteArrayInputStream(new byte[0]);
            }

            // set the inputstream back as message payload
            message.setContent(InputStream.class, in);

            cache.close();
            origIn.close();

            int contentSize = (int) cache.size();

            buffer = new StringBuilder(contentSize + PROPERTIES_SIZE);

            cache.writeCacheTo(buffer, "UTF-8");
        } catch (IOException e) {
            throw new Fault(e);
        }

        // decode chars from bytes
        char[] chars = new char[buffer.length()];
        buffer.getChars(0, chars.length, chars, 0);

        // reuse buffer
        buffer.setLength(0);

        // perform local logging - to the buffer 
        buffer.append(name);

        logProperties(buffer, message);

        // pretty print XML
        if(prettyPrinter.process(chars, 0, chars.length, buffer)) {
            // log as normal
            logger.log(reformatSuccessLevel, buffer.toString());
        } else {
            // something unexpected - log as exception
            buffer.append(" was unable to format XML:\n");
            buffer.append(chars); // unmodified XML

            logger.log(reformatFailureLevel, buffer.toString());
        }
    }

    /**
     * Gets theMessageID header in the list of headers.
     *
     */
    protected String getIdHeader(Message message) {
        return getHeader(message, LOCAL_NAME);
    }

    protected String getHeader(Message message, String name) {
        List<Header> headers = (List<Header>) message.get(Header.HEADER_LIST);

        if(headers != null) {
            for(Header header:headers) {
                if(header.getName().getLocalPart().equalsIgnoreCase(name)) {
                    return header.getObject().toString();
                }
            }
        }
        return null;
    }        

    /**
     * Method intended for use within subclasses. Log custom field here.
     * 
     * @param message message
    */

    protected void logProperties(StringBuilder buffer, Message message) {
        final String messageId = getIdHeader(message);
        if(messageId != null) {
            buffer.append(" MessageId=");
            buffer.append(messageId);
        }
    }

    public void setPrettyPrinter(PrettyPrinter prettyPrinter) {
        this.prettyPrinter = prettyPrinter;
    }

    public PrettyPrinter getPrettyPrinter() {
        return prettyPrinter;
    }

    public Logger getLogger() {
        return logger;
    }

    public String getName() {
        return name;
    }

    public Level getReformatFailureLevel() {
        return reformatFailureLevel;
    }

    public Level getReformatSuccessLevel() {
        return reformatSuccessLevel;
    }

    public void setReformatFailureLevel(Level reformatFailureLevel) {
        this.reformatFailureLevel = reformatFailureLevel;
    }

    public void setReformatSuccessLevel(Level reformatSuccessLevel) {
        this.reformatSuccessLevel = reformatSuccessLevel;
    }

    public void setLogger(Logger logger) {
        this.logger = logger;
    }
} 
```

有关带有输出拦截器的完整工作示例，请参阅我在 github 上的[CXF 模块。](https://github.com/greenbird/xml-formatter-components/tree/master/cxf)

# openid - 我们的场景推荐什么：OpenID + self-provider 还是 SAML？

> ID：11038322
> 
> 赞同：4
> 
> 时间：2012-06-14T17:30:23.863
> 
> 标签：openid, single-sign-on, dotnetopenauth, saml

这是我们的情况：

*   我们拥有一个使用 ASP.Net 4.0 开发的主门户
*   我们组织内还有一些其他门户网站，它们希望使用我们的门户网站进行身份验证和 SSO。这些门户可以在任何平台上：PHP、经典 ASP、JSP 等
*   还有一些我们也希望 SSO的*外部门户。*这些外部门户是事先众所周知的，并且它们处于封闭环境中：这意味着它们不喜欢使用随机的公共 OpenID 身份验证进行登录尝试。

我一直在阅读有关 StackOverflow 和一般情况下的各种文章，例如[OpenID 和 SAML 之间有什么区别？](https://stackoverflow.com/questions/7699200/what-is-the-difference-between-openid-and-saml)但我无法断定以下哪一项是上述情况的最佳选择：

*   OpenID 加上自提供者，使用像 DotNetOpenAuth ( [http://www.dotnetopenauth.net/](http://www.dotnetopenauth.net/) ) 这样的库。客户只会信任一个 OpenID 提供商：我们。
*   SAML，起诉像 ComponentSpace ( [http://www.componentspace.com/saml](http://www.componentspace.com/saml) )这样的库
*   还有其他更好的选择吗？

所有提示将不胜感激:)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-16T08:50:11.783

让我强调一下 OpenID 和 SAML 之间的一个重要区别。在 OpenID 中，服务提供者不与身份提供者耦合。服务提供者在对用户提供的 OpenID 标识符进行发现之前不知道身份提供者。但在 SAML 中，服务提供者与身份提供者耦合。它们之间存在预定义的信任。

因此，在调查您的案例时，最好的解决方案是使用 SAML。SAML 将允许您组织中的用户登录到该组织的门户。并且外部门户可以信任您组织的身份提供者，并让您组织的用户也可以登录到这些外部门户。或者，如果这些外部门户已经有自己的身份提供者，那么您可以使用 SAML（例如被动 STS）在外部身份提供者和您组织的身份提供者之间建立信任，并让您组织的用户登录到这些外部门户。

# .net - 未使用 InstanceContectMode = PerSession 调用 WCF Dispose()

> ID：11038327
> 
> 赞同：6
> 
> 时间：2012-06-14T17:30:42.553
> 
> 标签：.net, wcf

在 PerSession 中，如何让服务上的 Dispose() 触发？在下面的代码中 Dispose() 没有被调用。当我调用 .Close() 或让会话超时时都不会。

如果我将服务更改为 PerCall，则调用 Dispose()（每个方法调用）。使用 PerSession 我得到一个会话（用 serviceStartTime 测试）。

**服务**

```
[ServiceBehavior (InstanceContextMode=InstanceContextMode.PerSession)]
public class MagicEightBallService : IEightBall, IDisposable
{
    private DateTime serviceStartTime;
    public void Dispose()
    {
        Console.WriteLine("Eightball dispose ... " + OperationContext.Current.SessionId.ToString());
    }
    public MagicEightBallService()
    {
        serviceStartTime = DateTime.Now;
        Console.WriteLine("Eightball awaits your question " + OperationContext.Current.SessionId.ToString() + " " + serviceStartTime.ToLongTimeString());
    }
    public string ObtainAnswerToQuestion(string userQuestion)
    {
        return "maybe " + OperationContext.Current.SessionId.ToString() + " " + serviceStartTime.ToLongTimeString();
    } 
```

**客户**

```
 using (EightBallClient ball = new EightBallClient())
    {    
        while (true)
        {
            Console.Write("Your question: ");
            string question = Console.ReadLine();
            if (string.IsNullOrEmpty(question)) break;
            try
            {
                string answer = ball.ObtainAnswerToQuestion(question);
                Console.WriteLine("8-ball says: {0}", answer);
            }
            catch (Exception Ex)
            {
                Console.WriteLine("ball.ObtainAnswerToQuestion exception " + Ex.Message);
            }               
        }
        ball.Close();
     } 
```

**服务合约**

```
[ServiceContract (SessionMode = SessionMode.Required)]
public interface IEightBall
{
    [OperationContract]
    string ObtainAnswerToQuestion(string userQuestion);

    [OperationContract]
    sDoc GetSdoc(int sID);

    DateTime CurDateTime();
} 
```

**主持人**

```
<?xml version="1.0" encoding="utf-8" ?>
<configuration>
  <system.serviceModel>
    <bindings>
      <wsHttpBinding>
        <binding name="WSHttpBinding_ISampleService" 
                 closeTimeout="00:01:00" openTimeout="00:01:00" 
                 receiveTimeout="00:10:00" sendTimeout="00:10:00">
          <security mode="Message" />
          <reliableSession ordered="true"
                   inactivityTimeout="00:10:00"
                   enabled="true" />
        </binding>
      </wsHttpBinding>
    </bindings>
    <services>
      <service name="MajicEightBallServiceLib.MagicEightBallService"
               behaviorConfiguration="EightBallServiceMEXBehavior" >
        <endpoint address=""
                  binding="wsHttpBinding" bindingConfiguration="WSHttpBinding_ISampleService"
                  contract="MajicEightBallServiceLib.IEightBall">
        </endpoint>
        <endpoint address="mex"
                  binding ="mexHttpBinding"
                  contract="IMetadataExchange" />
        <host>
          <baseAddresses>
            <add baseAddress="http://localhost:8000/MagicEightBallService"/>
          </baseAddresses>
        </host>             
      </service>
    </services>
    <behaviors>
      <serviceBehaviors>
        <behavior name="EightBallServiceMEXBehavior">
          <serviceMetadata httpGetEnabled="true"/>
        </behavior>
      </serviceBehaviors>
    </behaviors>
  </system.serviceModel>
</configuration>

namespace MagicEightBallServiceHost
{
    class Program
    {
        static void Main(string[] args)
        {
            Console.WriteLine("**** Console Based WCF Host *****");

            using (ServiceHost serviceHost = new ServiceHost(typeof(MagicEightBallService)))
            {
                serviceHost.Open();
                Console.WriteLine("The service is running");
                Console.ReadLine();
            }
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-06-15T17:12:15.830

`Dispose()`方法将被解雇。唯一的问题是“什么时候？”。

该问题的答案取决于服务配置。

有几种可能的情况：

1.  绑定不支持会话
2.  正常会话
3.  可靠的会话

`Dispose()``PerSession`在上下文模式下关闭会话时触发。所以我们需要检查会话在不同场景下的存活时间。

对于某些配置（例如 default `BasicHttpBinding`），会话根本没有启动。在无会话配置 `PerCall`和`PerSession`上下文模式没有区别的情况下， `Dispose`方法将在您的主方法执行后很快被调用。

何时启用`Session`它可以由客户端或超时显式关闭。通常它是由客户端控制的。客户端在第一次调用服务之前启动会话，并在客户端对象关闭时关闭它。

```
ServiceClient proxy = new ServiceClient();
Console.WriteLine(proxy.GetData(123));
proxy.Close(); 
```

`proxy.Close()`上面的方法关闭服务器中的会话，然后执行`Dispose()`。

会话管理是一个很大的性能驱动因素，因为它需要在客户端和服务器之间执行额外的调用。

所以通常`Dispose`会在客户端想要关闭会话时调用。

如果客户端由于任何原因没有关闭会话，它将在一段时间后被服务主机关闭。该时间段由[Binding.ReceiveTimeout](http://msdn.microsoft.com/en-us/library/system.servicemodel.channels.binding.receivetimeout.aspx)属性控制。该属性的默认值为 10 分钟。

`Dispose()`如果在 10 分钟内没有人向具有特定会话 ID 的服务器发送请求，会话将被关闭并（被触发）。`receiveTimeout`可以通过在 web.config 中设置一些较短的值来更改此默认超时。

```
<wsHttpBinding>
  <binding name="wsHttpEndpointBinding" receiveTimeout="00:00:05">
  </binding>
</wsHttpBinding> 
```

[启用可靠](http://msdn.microsoft.com/en-us/library/system.servicemodel.reliablesession.inactivitytimeout.aspx)会话时，还会额外检查 ReliableSession.InactivityTimeout。它也默认为 10 分钟。

它在自托管和 IIS 托管服务中按预期工作。

尝试如下更新您的客户端代码进行测试：

```
using (EightBallClient ball = new EightBallClient())
{    
    ball.ObtainAnswerToQuestion("test");
    ball.Close();
} 
```

# c# - 如何在 Mono / MonoDevelop 中使用 System.Windows？

> ID：11038332
> 
> 赞同：2
> 
> 时间：2012-06-14T17:30:57.233
> 
> 标签：c#, .net, mono, monodevelop, rect

我正在尝试在 MonoDevelop 中使用 System.Windows 中的 Rect 结构，但是当我尝试添加对它的引用时，我在包列表中找不到 System.Windows。有很多像 System.Windows.Controls.... 和 System.Windows.Forms... 但不是 System.Windows 本身。如何在 MonoDevelop 中访问 Rect？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-14T17:34:27.780

[Rect](http://msdn.microsoft.com/en-us/library/system.windows.rect.aspx)结构在 WindowsBase.dll 中定义（如果针对 .NET 4）。您需要添加对该程序集的引用才能访问它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-14T17:47:07.030

试试
Android.Graphics.Rect

它在 Mono.Android.dll 中定义，在 mono 下没有对 Windows.Forms.Rect 的实现

# arrays - 从 Perl 中返回数组的子例程分配标量

> ID：11038333
> 
> 赞同：0
> 
> 时间：2012-06-14T17:30:58.067
> 
> 标签：arrays, perl

我有一个 Perl 子例程，它返回一个值数组，我想调用该子例程并在单个标量变量中捕获这些值。

我知道在初始化一组标量时如何做到这一点：

```
my ($workBenchId, $woId, $woTrayId, $trayId, $customerNumber) = SubRoutineA(); 
```

但我不确定如何使用同一组标量来做到这一点（因为我不能再次使用“我的”）：

```
($workBenchId, $woId, $woTrayId, $trayId, $customerNumber) = SubRoutineA(); 
```

感谢您的帮助 - 我是 Perl 的新手。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-14T17:35:22.070

你完全正确。

```
($workBenchId, $woId, $woTrayId, $trayId, $customerNumber) = SubRoutineA(); 
```

那似乎不起作用？

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-14T18:05:14.830

或者，您可以先定义变量，然后在不使用它们的情况下使用它们`my`：

```
my ($workBenchId, $woId, $woTrayId, $trayId, $customerNumber);
...
($workBenchId, $woId, $woTrayId, $trayId, $customerNumber) = SubRoutineA(); 
...
($workBenchId, $woId, $woTrayId, $trayId, $customerNumber) = SubRoutineA(); 
...
($workBenchId, $woId, $woTrayId, $trayId, $customerNumber) = SubRoutineA(); 
```

# rally - 如何在 Rally 自定义网格中查询没有任务的用户故事？

> ID：11038340
> 
> 赞同：1
> 
> 时间：2012-06-14T17:31:30.137
> 
> 标签：rally

如题

我尝试使用查询

```
(Tasks.length = 0) 
```

或者

```
(Tasks = null) 
```

但到目前为止还没有运气

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-15T14:40:32.520

假设您正在估计您的任务 - 此网格查询可能有效：

((CreationDate > 2012-5-01) AND (TaskEstimateTotal < 1))

请注意，我使用 CreationDate 来获取较小的故事集，但您不必这样做。

希望有帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-14T18:59:14.587

在 Rally 的 WSAPI 中，您不能根据子集合的内容来查询对象。

这意味着您无法找到没有任务或特定任务或类似内容的故事。查找一个故事是否有任何孩子也是如此。

这是我们在内部玩过的东西，但在我们的短期积压工作中，我们没有任何解决方案。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-01-07T18:58:31.223

您仍然可以使用**自定义网格**（现在它在 Rally中称为**客户列表）。**如果您想这样做，请按照以下步骤操作：

1.  构建报告并使用迭代作为过滤器。（或不，根据您的要求）
2.  在此报告上添加客户列表。
3.  添加查询（对于Team A和Team B，您可以根据需要添加更多团队）

    `((TaskEstimateTotal < 1) AND ((Project.Name = "Team A") OR (Project.Name = "Team B"))`

4.  添加另外两个过滤器以删除故事：

    一种。`Task Status = NONE`
    （删除有任务但还没有任务级别估计的故事。）

    湾。`Defect Status = None`
    （删除使用缺陷而不是任务的故事）

然后你应该有你需要的报告。

# jakarta-ee - Glassfish 无法启动，如何重置 glassfish 实例？

> ID：11038341
> 
> 赞同：1
> 
> 时间：2012-06-14T17:31:34.940
> 
> 标签：jakarta-ee, glassfish, derby, realm

我通过管理控制台对我的 glassfish jdbc 资源池进行了更改，我的最后一个更改是一个领域配置，我将用户表字段从“tablename”重命名为“db”。“tablename”作为尝试让 jdbcrealm auth 使用一个德比数据库，但现在我的 glassfish 实例无法启动。我已经卸载并重新安装了 netbeans 和 glassfish，目前出现此错误：

```
SEVERE: RAR8061: failed to load resource-adapter-config or RA [ __ds_jdbc_ra ], com.sun.appserv.connectors.internal.api.ConnectorRuntimeException: Unable to get active RA for module __ds_jdbc_ra
SEVERE: RAR8060: Unable to lookup pool [ SamplePool ], javax.naming.NamingException: Lookup failed for '__SYSTEM/pools/SamplePool' in SerialContext[myEnv={java.naming.factory.initial=com.sun.enterprise.naming.impl.SerialInitContextFactory, java.naming.factory.state=com.sun.corba.ee.impl.presentation.rmi.JNDIStateFactoryImpl, java.naming.factory.url.pkgs=com.sun.enterprise.naming} [Root exception is javax.naming.NameNotFoundException: pools]
SEVERE: RAR6017 : Failed to get connection pool object jdbc/sample via JNDI lookup : com.sun.appserv.connectors.internal.api.ConnectorRuntimeException: Lookup failed for '__SYSTEM/pools/SamplePool' in SerialContext[myEnv={java.naming.factory.initial=com.sun.enterprise.naming.impl.SerialInitContextFactory, java.naming.factory.state=com.sun.corba.ee.impl.presentation.rmi.JNDIStateFactoryImpl, java.naming.factory.url.pkgs=com.sun.enterprise.naming}
SEVERE: java.util.logging.ErrorManager: 5: Error in formatting Logrecord
SEVERE: java.lang.RuntimeException: Lookup failed for 'jdbc/sample' in SerialContext[myEnv={java.naming.factory.state=com.sun.corba.ee.impl.presentation.rmi.JNDIStateFactoryImpl, java.naming.factory.url.pkgs=com.sun.enterprise.naming}
    at org.glassfish.osgi.ee.resources.ResourceProxy.getActualObject(ResourceProxy.java:83)
    at org.glassfish.osgi.ee.resources.ResourceProxy.invoke(ResourceProxy.java:69)
    at $Proxy170.toString(Unknown Source)
    at java.text.MessageFormat.subformat(MessageFormat.java:1246)
    at java.text.MessageFormat.format(MessageFormat.java:836)
    at java.text.Format.format(Format.java:140)
    at java.text.MessageFormat.format(MessageFormat.java:812)
    at com.sun.enterprise.server.logging.UniformLogFormatter.uniformLogFormat(UniformLogFormatter.java:330)
    at com.sun.enterprise.server.logging.UniformLogFormatter.format(UniformLogFormatter.java:162)
    at java.util.logging.StreamHandler.publish(StreamHandler.java:179)
    at java.util.logging.ConsoleHandler.publish(ConsoleHandler.java:88)
    at java.util.logging.Logger.log(Logger.java:478)
    at java.util.logging.Logger.doLog(Logger.java:500)
    at java.util.logging.Logger.logp(Logger.java:669)
    at org.jvnet.hk2.osgiadapter.HK2Main$HK2ServiceTrackerCustomizer.addingService(HK2Main.java:284)
    at org.osgi.util.tracker.ServiceTracker$Tracked.customizerAdding(ServiceTracker.java:980)
    at org.osgi.util.tracker.ServiceTracker$Tracked.customizerAdding(ServiceTracker.java:906)
    at org.osgi.util.tracker.AbstractTracked.trackAdding(AbstractTracked.java:262)
    at org.osgi.util.tracker.AbstractTracked.track(AbstractTracked.java:234)
    at org.osgi.util.tracker.ServiceTracker$Tracked.serviceChanged(ServiceTracker.java:941)
    at org.apache.felix.framework.util.EventDispatcher.invokeServiceListenerCallback(EventDispatcher.java:932)
    at org.apache.felix.framework.util.EventDispatcher.fireEventImmediately(EventDispatcher.java:793)
    at org.apache.felix.framework.util.EventDispatcher.fireServiceEvent(EventDispatcher.java:543)
    at org.apache.felix.framework.Felix.fireServiceEvent(Felix.java:4260)
    at org.apache.felix.framework.Felix.registerService(Felix.java:3275)
    at org.apache.felix.framework.BundleContextImpl.registerService(BundleContextImpl.java:346)
    at org.apache.felix.framework.BundleContextImpl.registerService(BundleContextImpl.java:320)
    at org.glassfish.osgi.ee.resources.BaseResourceManager.registerResourceAsService(BaseResourceManager.java:131)
    at org.glassfish.osgi.ee.resources.JDBCResourceManager.registerJdbcResource(JDBCResourceManager.java:110)
    at org.glassfish.osgi.ee.resources.JDBCResourceManager.registerJdbcResources(JDBCResourceManager.java:74)
    at org.glassfish.osgi.ee.resources.JDBCResourceManager.registerResources(JDBCResourceManager.java:62)
    at org.glassfish.osgi.ee.resources.ResourceProviderService.registerResources(ResourceProviderService.java:114)
    at org.glassfish.osgi.ee.resources.ResourcesExtender.start(ResourcesExtender.java:72)
    at org.glassfish.osgijavaeebase.ExtenderManager$ExtenderTracker.addingService(ExtenderManager.java:142)
    at org.osgi.util.tracker.ServiceTracker$Tracked.customizerAdding(ServiceTracker.java:980)
    at org.osgi.util.tracker.ServiceTracker$Tracked.customizerAdding(ServiceTracker.java:906)
    at org.osgi.util.tracker.AbstractTracked.trackAdding(AbstractTracked.java:262)
    at org.osgi.util.tracker.AbstractTracked.trackInitial(AbstractTracked.java:185)
    at org.osgi.util.tracker.ServiceTracker.open(ServiceTracker.java:348)
    at org.osgi.util.tracker.ServiceTracker.open(ServiceTracker.java:283)
    at org.glassfish.osgijavaeebase.ExtenderManager.startExtenders(ExtenderManager.java:108)
    at org.glassfish.osgijavaeebase.ExtenderManager.access$300(ExtenderManager.java:66)
    at org.glassfish.osgijavaeebase.ExtenderManager$GlassFishServerTracker.addingService(ExtenderManager.java:185)
    at org.osgi.util.tracker.ServiceTracker$Tracked.customizerAdding(ServiceTracker.java:980)
    at org.osgi.util.tracker.ServiceTracker$Tracked.customizerAdding(ServiceTracker.java:906)
    at org.osgi.util.tracker.AbstractTracked.trackAdding(AbstractTracked.java:262)
    at org.osgi.util.tracker.AbstractTracked.trackInitial(AbstractTracked.java:185)
    at org.osgi.util.tracker.ServiceTracker.open(ServiceTracker.java:348)
    at org.osgi.util.tracker.ServiceTracker.open(ServiceTracker.java:283)
    at org.glassfish.osgijavaeebase.ExtenderManager.start(ExtenderManager.java:85)
    at org.glassfish.osgijavaeebase.OSGiJavaEEActivator.start(OSGiJavaEEActivator.java:66)
    at org.apache.felix.framework.util.SecureAction.startActivator(SecureAction.java:641)
    at org.apache.felix.framework.Felix.activateBundle(Felix.java:1977)
    at org.apache.felix.framework.Felix.startBundle(Felix.java:1895)
    at org.apache.felix.framework.Felix.setActiveStartLevel(Felix.java:1191)
    at org.apache.felix.framework.FrameworkStartLevelImpl.run(FrameworkStartLevelImpl.java:295)
    at java.lang.Thread.run(Thread.java:662)
Caused by: javax.naming.NamingException: Lookup failed for 'jdbc/sample' in SerialContext[myEnv={java.naming.factory.state=com.sun.corba.ee.impl.presentation.rmi.JNDIStateFactoryImpl, java.naming.factory.url.pkgs=com.sun.enterprise.naming} [Root exception is javax.naming.NamingException: Unable to lookup resource : jdbc/sample [Root exception is com.sun.appserv.connectors.internal.api.ConnectorRuntimeException: Lookup failed for '__SYSTEM/pools/SamplePool' in SerialContext[myEnv={java.naming.factory.initial=com.sun.enterprise.naming.impl.SerialInitContextFactory, java.naming.factory.state=com.sun.corba.ee.impl.presentation.rmi.JNDIStateFactoryImpl, java.naming.factory.url.pkgs=com.sun.enterprise.naming}]]
    at com.sun.enterprise.naming.impl.SerialContext.lookup(SerialContext.java:518)
    at com.sun.enterprise.naming.impl.SerialContext.lookup(SerialContext.java:455)
    at javax.naming.InitialContext.lookup(InitialContext.java:392)
    at javax.naming.InitialContext.lookup(InitialContext.java:392)
    at org.glassfish.osgi.ee.resources.ResourceProxy.getActualObject(ResourceProxy.java:81)
    ... 56 more
Caused by: javax.naming.NamingException: Unable to lookup resource : jdbc/sample [Root exception is com.sun.appserv.connectors.internal.api.ConnectorRuntimeException: Lookup failed for '__SYSTEM/pools/SamplePool' in SerialContext[myEnv={java.naming.factory.initial=com.sun.enterprise.naming.impl.SerialInitContextFactory, java.naming.factory.state=com.sun.corba.ee.impl.presentation.rmi.JNDIStateFactoryImpl, java.naming.factory.url.pkgs=com.sun.enterprise.naming}]
    at org.glassfish.javaee.services.ResourceProxy.throwResourceNotFoundException(ResourceProxy.java:119)
    at org.glassfish.javaee.services.ResourceProxy.create(ResourceProxy.java:95)
    at com.sun.enterprise.naming.impl.SerialContext.lookup(SerialContext.java:507)
    ... 60 more
Caused by: com.sun.appserv.connectors.internal.api.ConnectorRuntimeException: Lookup failed for '__SYSTEM/pools/SamplePool' in SerialContext[myEnv={java.naming.factory.initial=com.sun.enterprise.naming.impl.SerialInitContextFactory, java.naming.factory.state=com.sun.corba.ee.impl.presentation.rmi.JNDIStateFactoryImpl, java.naming.factory.url.pkgs=com.sun.enterprise.naming}
    at com.sun.enterprise.connectors.service.ConnectorResourceAdminServiceImpl.createConnectorResource(ConnectorResourceAdminServiceImpl.java:151)
    at com.sun.enterprise.connectors.ConnectorRuntime.createConnectorResource(ConnectorRuntime.java:297)
    at com.sun.enterprise.resource.deployer.JdbcResourceDeployer.deployResource(JdbcResourceDeployer.java:106)
    at org.glassfish.javaee.services.ResourceProxy.create(ResourceProxy.java:90)
    ... 61 more
Caused by: javax.naming.NamingException: Lookup failed for '__SYSTEM/pools/SamplePool' in SerialContext[myEnv={java.naming.factory.initial=com.sun.enterprise.naming.impl.SerialInitContextFactory, java.naming.factory.state=com.sun.corba.ee.impl.presentation.rmi.JNDIStateFactoryImpl, java.naming.factory.url.pkgs=com.sun.enterprise.naming} [Root exception is javax.naming.NameNotFoundException: pools]
    at com.sun.enterprise.naming.impl.SerialContext.lookup(SerialContext.java:518)
    at com.sun.enterprise.naming.impl.SerialContext.lookup(SerialContext.java:
SEVERE: 455)
    at javax.naming.InitialContext.lookup(InitialContext.java:392)
    at javax.naming.InitialContext.lookup(InitialContext.java:392)
    at com.sun.appserv.connectors.internal.api.ResourceNamingService.lookup(ResourceNamingService.java:223)
    at com.sun.appserv.connectors.internal.api.ResourceNamingService.lookup(ResourceNamingService.java:230)
    at com.sun.enterprise.connectors.service.ConnectorResourceAdminServiceImpl.createConnectorResource(ConnectorResourceAdminServiceImpl.java:111)
    ... 64 more
Caused by: javax.naming.NameNotFoundException: pools
    at com.sun.enterprise.naming.impl.TransientContext.resolveContext(TransientContext.java:310)
    at com.sun.enterprise.naming.impl.TransientContext.lookup(TransientContext.java:218)
    at com.sun.enterprise.naming.impl.TransientContext.lookup(TransientContext.java:219)
    at com.sun.enterprise.naming.impl.SerialContextProviderImpl.lookup(SerialContextProviderImpl.java:77)
    at com.sun.enterprise.naming.impl.LocalSerialContextProviderImpl.lookup(LocalSerialContextProviderImpl.java:119)
    at com.sun.enterprise.naming.impl.SerialContext.lookup(SerialContext.java:505)
    ... 70 more 
```

有没有办法将我的 glassfish 实例重置为其默认值，以便我可以再次开始使用它？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-21T14:11:09.470

如果您使用的是 Netbeans 捆绑的 Glassfish 3.1.2，则在进行更改时会自动备份 domain.xml 配置文件。我相信 Windows 的默认位置是 C:\Program Files\glassfish-3.1.2\glassfish\domains\domain1\config。

查找 domain.xml.bak。保存当前 domain.xml 的副本并将其替换为 domain.xml.bak 并启动服务器。

旧版本的 NetBeans 将 glassfish 配置存储在 C:\users 目录中，卸载程序时该目录并未完全删除。这就是为什么即使重新安装后问题仍然存在的原因。

# mysql - SQL查询 - 根据计数条件选择记录

> ID：11038342
> 
> 赞同：6
> 
> 时间：2012-06-14T17:31:40.697
> 
> 标签：mysql, sql, select

标题可能看起来不是很清楚 - 不知道如何用一行来解释问题。

我有 3 张桌子

```
话题
视频
TOPIC_VIDEO

```

一个主题可以有一个或两个视频。这些视频要么是示例视频，要么不是。

表中具有相关列名的示例数据

话题

```
TOPIC_ID | 姓名 | COURSE_ID
    1 | Excel - 加/减 | 1
    2 | Excel - 排序 | 1
    3 | Excel - 过滤器 | 1
    4 | Excel - 公式 | 1

视频

视频ID | VIDEO_URL
    10 | www.youtube.com?v=123
    12 | www.youtube.com?v=345
    13 | www.youtube.com?v=567
    14 | www.youtube.com?v=879
    15 | www.youtube.com?v=443

TOPIC_VIDEO

TOPIC_VIDEO_ID | TOPIC_ID | 视频ID | IS_SAMPLE    
      1 | 1 | 10 | 是
      2 | 2 | 12 | ñ
      3 | 3 | 13 | ñ
      4 | 3 | 14 | 是
      5 | 4 | 15 | ñ

```

所以我想做的是为给定的课程选择所有主题及其相应的视频。现在，如果一个主题有多个视频 - 我想选择 is_sample 为“N”的视频。

就像上面的例子一样——topic_id 3 有两个视频，video_id 13 和 14——所以应该选择 video_id 13。

这是我到目前为止的查询

```
选择主题。*,count(topic.topic_id),video.video_id,topic_video.is_sample
从主题
左加入 topic_video ON topic_video.topic_id = topic.topic_id
left join video ON video.video_id = topic_video.video_id
其中 course_id=1
按 topic.topic_id 分组

```

所以现在如果计数是 2 - 我想用 is_sample='N' 选择记录这是否可能，我该如何完成。非常感谢您的时间

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-14T17:42:04.567

解决这个问题的一种方法是

*   加入按主题计算计数的内联视图。
*   使用计数创建一个仅连接到 IS_SAMPLE = N 的 case 语句

```
SELECT * 
FROM   topic 
       LEFT JOIN (SELECT topic_id, 
                         Count(topic_id) t_count 
                  FROM   TOPIC_VIDEO 
                  GROUP  BY topic_id) t 
              ON topic.topic_id = t.topic_id 
       LEFT JOIN topic_video 
              ON topic_video.topic_id = topic.topic_id 
                 AND TOPIC_VIDEO.IS_SAMPLE = CASE 
                                               WHEN t.t_count = 2 THEN 'N' 
                                               ELSE TOPIC_VIDEO.IS_SAMPLE 
                                             END 
       LEFT JOIN video 
              ON video.video_id = topic_video.video_id 
```

[演示](http://sqlfiddle.com/#!2/8f737/7)

输出

```
| TOPIC_ID |                 NAME | COURSE_ID | T_COUNT | TOPIC_VIDEO_ID | VIDEO_ID | IS_SAMPLE |             VIDEO_URL |
-------------------------------------------------------------------------------------------------------------------------
|        1 | Excel - Add/Subtract |         1 |       1 |              1 |       10 |         Y | www.youtube.com?v=123 |
|        2 |         Excel - sort |         1 |       1 |              2 |       12 |         N | www.youtube.com?v=345 |
|        3 |       Excel - filter |         1 |       2 |              3 |       13 |         N | www.youtube.com?v=567 |
|        4 |     Excel - formulas |         1 |       1 |              5 |       15 |         N | www.youtube.com?v=443 | 
```

# xampp - XAMPP 虚拟主机无法识别 - 进入在线搜索

> ID：11038344
> 
> 赞同：0
> 
> 时间：2012-06-14T17:31:42.333
> 
> 标签：xampp, vhosts, virtual-hosts

我正在我的计算机上本地开发一个 Wordpress 站点。我有两个 Wordpress 安装，一个在**C:\xampp\htdocs\wordpress**内，另一个在**C:\My_Sites\medicalproject\wordpress**

我安装了 XAMPP，并通过键入**localhost/wordpress**访问第一个安装。第二次我创建了一个名为**medicalproject**的虚拟主机并访问它，我只需打开我的浏览器并输入**medicalproject**。

一切都很顺利，直到我尝试创建另一个主机用于测试目的。我看到它不起作用，所以我删除了新的虚拟主机，只剩下一个*医疗*项目。但问题并没有解决。发生的情况是浏览器（FF、IE、Chrome、Opera）无法识别*medicalproject*，而是运行谷歌搜索。Apache 正常启动，我可以访问*localhost*和*localhost/wordpress*，这是第一次安装。

我提到当我尝试添加第二个虚拟主机时，Avira Free Antivirus 阻止了对主机文件的访问，您必须在该文件中添加本地主机的环回 IP（127.0.0.1 和服务器名称）。我禁用了该功能，重新启动了几次并尝试但没有运气。

下面是我的 httpd-vhosts.conf 的样子。我提到这个确切的配置以前是有效的。

```
## Virtual Hosts
#
# If you want to maintain multiple domains/hostnames on your
# machine you can setup VirtualHost containers for them. Most configurations
# use only name-based virtual hosts so the server doesn't need to worry about
# IP addresses. This is indicated by the asterisks in the directives below.
#
# Please see the documentation at 
# <URL:http://httpd.apache.org/docs/2.2/vhosts/>
# for further details before you try to setup virtual hosts.
#
# You may use the command line option '-S' to verify your virtual host
# configuration.

#
# Use name-based virtual hosting.
#
NameVirtualHost *:80

#
# VirtualHost example:
# Almost any Apache directive may go into a VirtualHost container.
# The first VirtualHost section is used for all requests that do not
# match a ServerName or ServerAlias in any <VirtualHost> block.
#
##<VirtualHost *:80>
    ##ServerAdmin postmaster@dummy-host.localhost
    ##DocumentRoot "C:/xampp/htdocs/dummy-host.localhost"
    ##ServerName dummy-host.localhost
    ##ServerAlias www.dummy-host.localhost
    ##ErrorLog "logs/dummy-host.localhost-error.log"
    ##CustomLog "logs/dummy-host.localhost-access.log" combined
##</VirtualHost>

##<VirtualHost *:80>
    ##ServerAdmin postmaster@dummy-host2.localhost
    ##DocumentRoot "C:/xampp/htdocs/dummy-host2.localhost"
    ##ServerName dummy-host2.localhost
    ##ServerAlias www.dummy-host2.localhost
    ##ErrorLog "logs/dummy-host2.localhost-error.log"
    ##CustomLog "logs/dummy-host2.localhost-access.log" combined
##</VirtualHost>

<VirtualHost *:80>
    DocumentRoot "C:/xampp/htdocs"
    Servername localhost
</VirtualHost>

<VirtualHost *:80>
    DocumentRoot "C:\My_Sites\medicalproject\wordpress"
    ServerName medicalproject
    ErrorLog "C:\My_Sites\medicalproject\medicalproject.error.log"
    CustomLog "C:\My_Sites\medicalproject\medicalproject.access.log" combined
  <Directory "C:\My_Sites\medicalproject\wordpress">
    Order allow,deny
    Allow from all
  </Directory>
</VirtualHost> 
```

# box-api - 文件夹的电子邮件地址

> ID：11038349
> 
> 赞同：1
> 
> 时间：2012-06-14T17:31:54.863
> 
> 标签：box-api

您可以通过 box.net api 检索文件夹的指定电子邮件地址吗？我知道该功能在应用程序中可用，但不确定它是否可通过 API 访问。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-15T02:37:23.670

v1 API 中有此功能：http: [//developers.box.net/w/page/35640290/APiFunction_toggle_folder_email](http://developers.box.net/w/page/35640290/APiFunction_toggle_folder_email)

# dns - 多站点 favicon.ico 和 Google 的 favicon API

> ID：11038352
> 
> 赞同：1
> 
> 时间：2012-06-14T17:31:58.310
> 
> 标签：dns, parent-child, favicon

有没有办法告诉谷歌的 favicon API (http://s2.googleusercontent.com/s2/favicons?domain=example.com) 拉一个特定的 favicon.ico？

我在同一个域上有多个站点。当在我的 YouTube 频道的个人资料或 Google Plus 个人资料中添加到我的某个网站的链接时，它会自动显示与根域关联的网站图标。据我所知，API 将自动在根域中查找 favicon - 但有谁知道是否有办法告诉他们的 API 在子域中查找 favicon.ico ?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-19T18:45:14.160

您必须使用网络服务器中的重写规则将请求发送到适当的文件。例如，在 Apache 中你会使用这样的东西：

```
RewriteCond %{HTTP_HOST} ^example.com                                                                                                                                    
RewriteCond %{REQUEST_URI} ^/favicon.ico                                                                                                                                      
RewriteRule ^(.*) /favicon-example.ico [L] 
```

使用适当的[RewriteCond](http://httpd.apache.org/docs/2.2/mod/mod_rewrite.html#RewriteCond)指令适当地过滤您的站点。

当您说“同一域上有多个站点”时，您的意思是 example.com/foo 和 example.com/bar 是不同的站点吗？如果是这样，您可能应该将它们切换到子域（foo.example.com 和 bar.example.com）。

# algorithm - 嵌套算法的计算复杂度

> ID：11038356
> 
> 赞同：4
> 
> 时间：2012-06-14T17:32:13.183
> 
> 标签：algorithm, math, complexity-theory, big-o

给定一个数组 a [1,2,3,4,5,6,7,8,9,10] 假设我们有一个执行以下操作的算法：

```
for i in 0..a.length
  for j in 0..a.length
    ... 
```

这将具有 O(n^2) 的 Big O 运行时间，因为对于每个元素，它将遍历整个数组。

但是如果内部循环只从外部索引向前遍历呢？

```
for i in 0..a.length
  for j in i..a.length
    ... 
```

也就是说，相比之下，第一个算法将在每次迭代（外循环）时查看 n 个元素。第二个算法着眼于：

*   第一次迭代的 n 个元素
*   第二次迭代的 n-1 个元素
*   第三次迭代的 n-2 个元素
*   ...
*   最后一次迭代的 1 个元素

在为这种算法计算 Big O 运行时间时，它仍然是 O(n^2) 吗？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-06-14T17:35:07.750

这仍然是 O(n^2)。和 1 + 2 + ... + n 为 n(n+1)/2，即 O(n^2)。

更一般地，对于任何多项式函数 p(n)，p(1) + p(2) + ... + p(n) 的总和为 O(np(n))。这个证明要困难得多，因为你必须推理 n 的任意幂的总和，但它确实是真的。这意味着，例如，如果您将第三个循环嵌套在从 j 到 n 的内部循环之外，则运行时间将为 O(n^3)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-14T21:30:32.923

如果给定 a 是那个特定的数组，那么该算法的时间复杂度是恒定的（或 O(1)）。也许我从字面上读了你问的内容，但是对于 O(n^2) 的最严格限制，a 必须是像 [1,2,...,n] 这样的数组。如果 a 的大小明确为 10，则算法始终以相同的步数运行。

希望这个答案是不必要的，但我是离散数学课的助教，我们经常给出与此非常相似的技巧问题。如果我误解了这个问题，那么我为浪费您的时间而道歉！另外，已经发布的答案非常好！

# javascript - Wordpress Supsersized：图像大小不适合窗口

> ID：11038363
> 
> 赞同：1
> 
> 时间：2012-06-14T17:33:21.307
> 
> 标签：javascript, jquery, wordpress

我的[**Supersized**](http://buildinternet.com/2011/07/supersized-3-2-fullscreen-jquery-slideshow/) Slideshow jQuery 插件有问题，该插件已合并到 wordpress 的模板“shuttershot”中。直到最近，它运行良好。现在，我的背景滑块图像不会调整到适当的窗口。经过多次 Firebug 调整和寻找答案后，我不确定这个问题。
下面是CSS。

```
* {
    margin:0;
    padding:0;
}

body {
    background:#111;
}

img {
    border:none;
}

#supersized-loader {
    position:absolute;
    top:50%;
    left:50%;
    z-index:10;
    width:60px;
    height:60px;
    text-indent:-999em;
    background-color:#111;
    background:rgba(0,0,0,0.8) url(images/progress.gif) no-repeat center center;
    -webkit-border-radius:5px;
    -moz-border-radius:5px;
    border-radius:5px;
    margin:-30px 0 0 -30px;
}

#supersized {
    position:fixed;
    overflow:hidden;
    z-index:-999;
    height:100%;
    width:100%;
}

#supersized img {
    width:auto;
    height:auto;
    position:fixed;
    display:none;
    outline:none;
    border:none;
}

#supersized.speed img {
    -ms-interpolation-mode:nearest-neighbor;
    image-rendering:0;
}

#supersized.quality img {
    -ms-interpolation-mode:bicubic;
    image-rendering:optimizeQuality;
}

#supersized a {
    z-index:-30;
    position:absolute;
    overflow:hidden;
    top:0;
    left:0;
    width:100%;
    height:100%;
    background:#111;
}

#supersized a.prevslide {
    z-index:-20;
}

#supersized a.activeslide {
    z-index:-10;
}

#supersized a.prevslide img,#supersized a.activeslide img {
    display:inline;
}

#controls-wrapper {
    height:62px;
    width:100%;
    bottom:0;
    left:0;
    z-index:4;
    background:url(../img/nav-bg.png) repeat-x;
    position:fixed;
    margin:0 auto;
}

#controls {
    overflow:hidden;
    height:100%;
    text-align:left;
    z-index:5;
    padding:0 114px;
}

#slidecounter {
    float:left;
    color:#888;
    font:23px "Helvetica Neue", Helvetica, Arial, sans-serif;
    font-weight:700;
    text-shadow:#000 0 -1px 0;
    margin:19px 10px 18px 20px;
}

#slidecaption {
    overflow:hidden;
    float:left;
    color:#FFF;
    font:16px "Helvetica Neue", Helvetica, Arial, sans-serif;
    font-weight:700;
    text-shadow:#000 0 2px 0;
    margin:23px 20px 23px 0;
}

#navigation {
    float:right;
    margin:10px 20px 0 0;
}

#nextthumb,#prevthumb {
    z-index:6;
    display:none;
    position:fixed;
    bottom:12px;
    height:75px;
    width:100px;
    overflow:hidden;
    background:#ddd;
    border:2px solid #fff;
    -webkit-box-shadow:0 0 5px #000;
}

#nextthumb {
    right:12px;
}

#prevthumb {
    left:12px;
}

#nextthumb img,#prevthumb img {
    width:150px;
    height:auto;
}

#nextthumb:active,#prevthumb:active {
    bottom:10px;
}

#navigation > :hover,#nextthumb:hover,#prevthumb:hover {
    cursor:pointer;
} 
```

# css - 为移动设备创建网站时是 px 还是 em？

> ID：11038366
> 
> 赞同：4
> 
> 时间：2012-06-14T17:33:48.683
> 
> 标签：css, mobile, em

我正在创建一个网站，我希望它也为移动浏览器做好准备。理论上，使用 em 代替 px 将允许布局更容易地根据用户偏好调整大小。但如今，据我了解，现代浏览器可以调整 px 布局和 em 布局的大小，因此它可能不像几年前那样相关。

但是，移动浏览器呢？移动设备如何更好地使用其中一种？

如果您能帮我解答这个问题，我将不胜感激！

干杯。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-14T17:44:52.193

移动浏览器`font-size`完美地处理像素定义，因为它们用于渲染的不是通常的物理像素，而是屏幕像素。

[类似的问题](https://stackoverflow.com/questions/2515991/em-vs-px-for-mobile-browsers)有相同的答案：

> “当屏幕在现代移动浏览器上缩小时，px 将不是真正的实际像素。这些浏览器有效地模拟了具有桌面浏览器大小像素的桌面浏览器。”</p>

我完全同意这个说法

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-14T17:35:24.613

它真的没有任何区别。百分比对于宽度很有用，但对于字体，请根据您的偏好设置。

# wpf - Dispatcher.Invoke 循环冻结 UI

> ID：11038372
> 
> 赞同：0
> 
> 时间：2012-06-14T17:34:12.880
> 
> 标签：wpf, textbox, backgroundworker, dispatcher

我有日志跟踪应用程序，它在不定式循环中执行后台工作线程并检查某个 TXT 文件中的最新条目。一旦找到新条目，我将使用 Dispatcher.Invoke 更新屏幕上的 TextBox，并将最新条目添加到文本文件中。

问题在于，如果源文本文件每毫秒不断更新，那么用户界面就会冻结，因为 Dispatcher.Invoke 如此频繁地更新 Textbox。

想知道是否有任何解决方法。我可以从文本文件中获得更大的块，但不想破坏日志跟踪实时体验，也不想延迟通过 UI 线程向 TextBox 写入行，因为这会使我的应用程序与内部的实际数据不同步源文本文件。

这是后台工作人员 DoWork 方法

```
private void worker_DoWork(object sender, DoWorkEventArgs e)
{
  reader = new StreamReader(new FileStream(file.File, FileMode.Open, FileAccess.Read, FileShare.ReadWrite));
  lastMaxOffset = reader.BaseStream.Length;

  while (true)
  {
    if (worker.CancellationPending)
    {
      e.Cancel = true;
      break;
    }                

    if (reader.BaseStream.Length == lastMaxOffset)
      continue;

    reader.BaseStream.Seek(lastMaxOffset, SeekOrigin.Begin);

    string line = "";
    while ((line = reader.ReadLine()) != null)

    this.Dispatcher.Invoke(System.Windows.Threading.DispatcherPriority.Normal, (Action)(() =>
    {
      textLog.Text += "\r" + line;
      scrollViewer.ScrollToBottom();
    })); 

    lastMaxOffset = reader.BaseStream.Position;        
  }
} 
```

如您所见，UI 线程只是简单地将文本附加到 TextBox，而当它碰巧经常界面冻结时

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-06-14T17:40:24.047

Using`Dispatcher.Invoke`是一个同步调用，因此它实际上与在 UI 线程上执行此操作相同，因为调用`Invoke`阻塞直到 UI 执行请求的任务。如果你在短时间内做太多事情，你实际上是在阻塞 UI 线程。

相反，您应该使用`Dispatcher.BeginInvoke`哪些排队等待 UI 线程执行的工作，但不会阻塞。这会稍微好一点，就好像你在短时间内做的太多了，你仍然在 UI 线程中充斥着工作来做它会花费很多时间来做这项工作。

相反，最好的方法是将这些更改排队到 UI 线程，然后当队列达到定义的限制（即 100 行新文本）或超过特定时间量（比如 200 毫秒）时调用`Dispatcher.BeginInvoke`发送对 UI 的这些更改。这将为您提供最佳的 UI 响应能力。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-12-18T00:30:45.137

我同意 CodingGorilla 的回答。

使用 Dispatcher.Invoke 将导致同步调用。

这将与直接在 UI 线程上进行调用具有相同的结果。

调用将阻塞，直到 UI 执行请求的任务，如果这种情况快速连续发生，您的 UI 线程将阻塞，因此您将不会获得任何更新。

尝试用 Dispatcher.BeginInvoke 替换您的**Dispatcher.Invioke** **，**看看这是否能解决您的问题。

 **```
// Load in background
this.Dispatcher.BeginInvoke(new Action(() =>
{
    textLog.Text += "\r" + line;
    scrollViewer.ScrollToBottom();

})); 
```

同样如建议的那样，您可能希望循环休眠 1 毫秒；使用**Thread.Sleep(1)**；每隔一段时间，这样你就不会最终占用cpu。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-14T17:37:43.097

通过调用`Dispatcher.Invoke`您读取的每一行，您实际上是在使每一行将数据推送回 UI 线程，并等待它完成。

这可能会使整个例程比直接使用 UI 线程*慢*，因为您增加了开销，但不会将大部分工作拉入后台线程。

为了加快速度，您需要做一些事情来缓冲数据，并以更大的块发送数据。在这种情况下，由于您正在寻找新的日志条目，我建议您一次读取文件末尾的所有日志条目，并将整个块编组回您的 UI（而不是逐行执行） ）。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-13T12:54:59.340

抱歉，但在无限循环中读取文件既错误又……嗯……愚蠢。有像[FileSystemWatcher](http://msdn.microsoft.com/de-de/library/system.io.filesystemwatcher%28v=vs.80%29.aspx)这样定义明确的类，没有必要仅仅因为你想要文件的实时更新而将 100% 的负载放在你的 CPU 核心上。

我认为您对编程很陌生-好吧，我们都会犯错误并且必须学习，接受以下建议：

*   无休止的循环是自动编程错误
*   如果确实需要循环，建议在每次迭代之间让相应的线程**休眠****

# jquery-mobile - jQuery Mobile 水平字段集 - 布局问题

> ID：11038373
> 
> 赞同：1
> 
> 时间：2012-06-14T17:34:18.293
> 
> 标签：jquery-mobile

使用 jQuery Mobile 1.1，我想水平布局 2 组不同的单选按钮，中间有一些文本。我的目标是 iPad，所以它的显示屏比手机更宽。这是我正在尝试做的 HTML，但它在屏幕上看起来像废话，两组单选按钮卡在一起，并且文本出现在所有内容的右侧：

```
<fieldset data-role="controlgroup" data-type="horizontal">
        <input type="radio" name="rdoOptions" data-mini="true" id="rdoOption1" checked="checked" />
        <label for="rdoOption1">Option 1</label>
        <input type="radio" name="rdoOptions" data-mini="true" id="rdoOption2" />
        <label for="rdoOption2">Option 2</label>
        <input type="radio" name="rdoOptions" data-mini="true" id="rdoOption3" />
        <label for="rdoOption3">Option 3</label>
        <label>Sort By:</label>
        <input type="radio" name="rdoSort" data-mini="true" id="rdoSortName" checked="checked" />
        <label for="rdoSortName">Name</label>
        <input type="radio" name="rdoSort" data-mini="true" id="rdoSortDept" />
        <label for="rdoSortDept">Department</label>
    </fieldset> 
```

谢谢，

安迪

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-27T16:43:10.763

这可能有点突兀，但您是否尝试过使用 3 列布局，如下所示：

```
<div class="ui-grid-b">
<div class="ui-block-a">
    <fieldset data-role="controlgroup" data-type="horizontal">
        <input type="radio" name="rdoOptions" data-mini="true" id="rdoOption1" checked="checked" />
        <label for="rdoOption1">Option 1</label>
        <input type="radio" name="rdoOptions" data-mini="true" id="rdoOption2" />
        <label for="rdoOption2">Option 2</label>
        <input type="radio" name="rdoOptions" data-mini="true" id="rdoOption3" />
        <label for="rdoOption3">Option 3</label>
    </fieldset>
</div>
<div class="ui-block-b">
    <div style="padding-right:0.5em;text-align:right;">
        <label>Sort By:</label>
    </div>
</div>
<div class="ui-block-c">
    <fieldset data-role="controlgroup" data-type="horizontal">
        <input type="radio" name="rdoSort" data-mini="true" id="rdoSortName" checked="checked" />
        <label for="rdoSortName">Name</label>
        <input type="radio" name="rdoSort" data-mini="true" id="rdoSortDept" />
        <label for="rdoSortDept">Department</label>
    </fieldset>
</div> 
```

最初，我尝试使用 2 列布局：

```
<div class="ui-grid-a">
    <div class="ui-block-a">
        (first fieldset)
    </div>
    <div class="ui-block-b">
        <div data-role="fieldcontain">
            <fieldset data-role="controlgroup" data-type="horizontal">
                <legend>Sort By:</legend>
                <input type="radio" name="rdoSort" data-mini="true" id="rdoSortName" checked="checked" />
                <label for="rdoSortName">Name</label>
                ...
             </fieldset>
        </div>
    </div>
</div> 
```

但是第二列没有将图例与单选按钮列表放在同一行。所以我尝试了 3 列选项。

希望这可以帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-23T20:33:09.530

单选按钮需要严格强制才能保持与文本内联。在这个小提琴中，我申请了

> 显示：内联！重要；

到一个外部 div，然后

> 向左飘浮;

到内部 div。

[http://jsfiddle.net/den232/d56Vp/](http://jsfiddle.net/den232/d56Vp/)

祝你好运！

```
 .floatleft {
    float:left;
 }
.floatright {
    float:right;
 }
.forceinline{  /* Prevent fieldcontain from doing a BLOCK thing */
    display:inline !important;
}
.textwidth {  /* limit width of input fields */
    width:80px;
}
.closespacing { /* controls spacing between elements */
    margin:0px 5px 0px 0px;
 }
.bigselect {   /* centers select with big buttons */
    padding: 0px;
    margin:2px 5px 0px 0px;
 }
.biginputheight {   /* matches text input height to big buttons */
    padding-top:10px !important;
    padding-bottom:12px !important;
}
.miniinputheight { /* matches text input height to minibuttons */
    padding-top:5px !important;
    padding-bottom:5px !important;
}
<div data-role="page" class="type-home"> 
```

```
<ul data-role="listview">
  <li  data-role="fieldcontain">first LI line</li>
  <li  data-role="fieldcontain">

    <div data-role="fieldcontain" class= 'forceinline'>
      <div class='floatleft closespacing'>    
        <fieldset data-role="controlgroup" data-type="horizontal">
          <input type="radio" name="radio-view" id="radio-view-c" value="aa"  />
          <label for="radio-view-c">C1</label>
          <input type="radio" name="radio-view" id="radio-view-d" value="bb"  />
          <label for="radio-view-d">D1</label>
        </fieldset>
      </div>
    </div>

      <div class='floatleft closespacing'>
        Big Buttons<br>More Text
    </div>
    <div data-role="fieldcontain" class= 'forceinline'>
      <div class='floatleft closespacing'>    
        <fieldset data-role="controlgroup" data-type="horizontal">
          <input type="radio" name="radio-view" id="radio-view-a" value="aa"  />
          <label for="radio-view-a">A1</label>
          <input type="radio" name="radio-view" id="radio-view-b" value="bb"  />
          <label for="radio-view-b">B1</label>
        </fieldset>
      </div>
    </div>

  </li>
  <li  data-role="fieldcontain">

    <div data-role="fieldcontain" class= 'forceinline'>
      <div class='floatleft closespacing'>    
        <fieldset data-role="controlgroup" data-type="horizontal" data-mini='true'>
          <input type="radio" name="radio-view" id="radio-view-f" value="aa"  />
          <label for="radio-view-f">A3</label>
          <input type="radio" name="radio-view" id="radio-view-g" value="bb"  />
          <label for="radio-view-g">B3</label>
        </fieldset>
      </div>
    </div>

    <div class='floatleft closespacing'>    
        Small Buttons
    </div>

    <div data-role="fieldcontain" class= 'forceinline'>
      <div class='floatleft closespacing'>    
        <fieldset data-role="controlgroup" data-type="horizontal" data-mini='true'>
          <input type="radio" name="radio-view" id="radio-view-a" value="aa"  />
          <label for="radio-view-a">AA</label>
          <input type="radio" name="radio-view" id="radio-view-b" value="bb"  />
          <label for="radio-view-b">BB</label>
        </fieldset>
      </div>
    </div>

    <div  class='floatleft textwidth'>
      <input type="text" placeholder="e2" class='miniinputheight'></input>
    </div>  

  </li>
  <li  data-role="fieldcontain">last LI line</li>

</ul><!-- /listview --> 
```

# php - 在多嵌套数组中的相同键之间找到匹配项？

> ID：11038393
> 
> 赞同：0
> 
> 时间：2012-06-14T17:36:07.200
> 
> 标签：php, php-5.3, array-difference, array-key-exists

跟进这个[问题](https://stackoverflow.com/questions/11036969/find-a-key-exists-in-the-sub-keys-of-an-array)，我还有一个问题 - 我有两个相同的子键，但它们的键中有不同的数组组合`variant`，例如，

```
Array
(
    [1] => Array
        (
            [b] => Array
                (
                    [quantity_request] => 1
                    [time_created] => 1339688613
                    [variant] => Array
                        (
                         [0] => x
                         [1] => y
                        )

                )

        )

    [2] => Array
        (
            [b] => Array
                (
                    [quantity_request] => 1
                    [time_created] => 1339688631
                    [variant] => Array
                        (
                         [0] => x
                         [1] => z
                        )

                )

        )

    [3] => Array
        (
            [c] => Array
                (
                    [quantity_request] => 1
                    [time_created] => 1339688959
                    [variant] => Array
                        (
                        )

                )

        )

) 
```

那么，我怎样才能找到这个项目的匹配项，

```
 [b] => Array
                        (
                            [quantity_request] => 1
                            [time_created] => 1339688631
                            [variant] => Array
                                (
                                 [0] => x
                                 [1] => z
                                )

                        )

    function get_letter($letter,$array)
        {
            foreach($this->content as $k => $v)
            {
                if(array_key_exists($letter, $v))
                {
                    return $k;

                }
            }
            return false;

        }

list($key,$different) = get_letter('b',array("x","z")); // return 1 
```

如果有匹配，我想要这样的结果，

```
2 
```

有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-14T17:53:07.013

数组是按值进行比较的，所以这应该可以正常工作。

```
$key = array_search($needle, $haystack); 
```

`$needle`您要为其查找密钥的数组在哪里。

[http://php.net/manual/en/language.operators.comparison.php#language.operators.comparison.types](http://php.net/manual/en/language.operators.comparison.php#language.operators.comparison.types)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-14T17:57:31.087

您只需要添加：

```
if ($v['variant'] == $array) 
```

在您的`if`语句中将`variant`数组与作为参数传递的数组进行比较。

```
function get_letter($letter, $array)
{
     foreach($this->content as $k => $v)
     {
          if(array_key_exists($letter, $v))
          {
               if ($v['variant'] == $array)
                   return $k;
          }
     }

     return false;
} 
```

# android - 在为 Android 编码时，有没有办法单独获取设备每个内核的 CPU 使用率？

> ID：11038394
> 
> 赞同：3
> 
> 时间：2012-06-14T17:36:19.853
> 
> 标签：android, api, multicore, cpu-usage, usage-statistics

这是我第一次在这里提问。我试图进行充分的研究，所以如果我之前忽略了这个问题的帖子，我提前道歉。我正在查看是否可以在我的应用程序运行时获取它的使用情况统计信息。我正在运行一些性能相对较高的程序，并且我有兴趣了解计算在内核之间的分布情况（并在程序本身中显示此信息）。

再次，对不起，如果这篇文章充满了无知！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-14T18:02:39.997

您可以通过查看目录下的文件来检查 CPU 内核的数量 - /sys/devices/system/cpu/。这在无根电话上也是可能的。这是一个可以为您提供设备核心数量的功能 -

```
 public int getNumOfCpus() {

    class CPUFilter implements FileFilter {
        @Override
        public boolean accept(File pathname) {
            // Check if filename is "cpu0", "cpu1,...
            if (Pattern.matches("cpu[0-9]", pathname.getName())) {
                return true;
            }
            return false;
        }
    }

    try {
        // Get directory containing CPU info
        File dir = new File("/sys/devices/system/cpu/");
        File[] files = dir.listFiles(new CPUFilter());
        // Return the number of cores 
        return files.length;
    } catch (Exception e) {
        e.printStackTrace();
        return 1;
    }

} 
```

然后，您可以通过修改此处答案中提到的函数来获取每个内核的 CPU 利用率 - [Get Memory Usage in Android](https://stackoverflow.com/questions/3118234/how-to-get-memory-usage-and-cpu-usage-in-android)

# c# - .NET 如何对特殊字符进行排序？

> ID：11038398
> 
> 赞同：8
> 
> 时间：2012-06-14T17:36:38.200
> 
> 标签：c#, .net, sorting

为什么 .NET 对字符“+”和“^”进行排序的顺序与它们在[ASCII 表中](http://www.asciitable.com/)出现的顺序或 SQL 对它们的排序方式不同。

在[ASCII 表中](http://www.asciitable.com/)，“+”的值为 42，“^”的值为 94，但如果您运行如下代码：

```
var list = new List<string> { "+", "^", "!" };
list.Sort(); 
```

该列表将包含以下顺序的值：

{ "!", "^", "+" }

LINQ 排序生成相同的结果。有人能告诉我 .NET 是做什么的吗？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-06-14T17:38:20.870

.NET 不使用 ASCII，它使用 Unicode。当您执行字符串排序时，.NET（默认情况下）使用当前区域性的排序规则。在这种情况下，这些规则表明“^”在“+”之前。您可以使用“序数”字符串比较器获得您期望的结果：

```
var list = new List<string> { "+", "^", "!" };
list.Sort(StringComparer.Ordinal); // Order is "!", "+", "^" 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-14T17:39:25.747

这是由当前区域性集定义的，在[CompareInfo](http://msdn.microsoft.com/en-us/library/system.globalization.cultureinfo.compareinfo.aspx)属性中定义。每种文化都有特定于文化的字符串排序规则。

# r - 这是 xts 错误还是我不理解的功能？

> ID：11038401
> 
> 赞同：3
> 
> 时间：2012-06-14T17:37:03.690
> 
> 标签：r, finance, xts

我正在尝试运行此代码：

```
require(quantmod)
getSymbols("SPY")

data <- to.weekly(SPY)
# CentralPivot Point (P) = (High + Low + Close) / 3
center <- xts(rowSums(HLC(data))/3, order.by=index(data))
head(center)
head(Lo(data))
R1 <- (2*center) - Lo(data)  # First Resistance (R1) = (2*P) - Low
head(R1)
NROW(R1)

data <- to.monthly(SPY)
# CentralPivot Point (P) = (High + Low + Close) / 3
center <- xts(rowSums(HLC(data))/3, order.by=index(data))
head(center)
head(Lo(data))
R1 <- (2*center) - Lo(data)  # First Resistance (R1) = (2*P) - Low
R1
NROW(R1) 
```

哪个月度系列会产生明显意想不到的结果（例如，如果您尝试 rbind(data, R1) 会导致 R 崩溃）：

```
> require(quantmod)
> getSymbols("SPY")
[1] "SPY"
> 
> data <- to.weekly(SPY)
> # CentralPivot Point (P) = (High + Low + Close) / 3
> center <- xts(rowSums(HLC(data))/3, order.by=index(data))
> head(center)
               [,1]
2007-01-05 141.2600
2007-01-12 142.2433
2007-01-19 142.8633
2007-01-26 142.5633
2007-02-02 143.8333
2007-02-09 144.2300
> head(Lo(data))
           SPY.Low
2007-01-05  140.38
2007-01-12  140.25
2007-01-19  142.31
2007-01-26  141.58
2007-02-02  141.74
2007-02-09  143.39
> R1 <- (2*center) - Lo(data)  # First Resistance (R1) = (2*P) - Low
> head(R1)
            SPY.Low
2007-01-05 142.1400
2007-01-12 144.2367
2007-01-19 143.4167
2007-01-26 143.5467
2007-02-02 145.9267
2007-02-09 145.0700
> NROW(R1)
[1] 285
> 
> data <- to.monthly(SPY)
> # CentralPivot Point (P) = (High + Low + Close) / 3
> center <- xts(rowSums(HLC(data))/3, order.by=index(data))
> head(center)
             [,1]
Jan 2007 142.7100
Feb 2007 142.1167
Mar 2007 140.8533
Apr 2007 146.5233
May 2007 151.6267
Jun 2007 150.9633
> head(Lo(data))
         SPY.Low
Jan 2007  140.25
Feb 2007  139.00
Mar 2007  136.75
Apr 2007  141.48
May 2007  147.67
Jun 2007  148.06
> R1 <- (2*center) - Lo(data)  # First Resistance (R1) = (2*P) - Low
> R1
Data:
numeric(0)

Index:
NULL
> NROW(R1)
[1] 0 
```

这是关于我的会话的信息。

```
> sessionInfo()
R version 2.15.0 (2012-03-30)
Platform: x86_64-pc-linux-gnu (64-bit)

locale:
 [1] LC_CTYPE=en_US.UTF-8          LC_NUMERIC=C                 
 [3] LC_TIME=en_US.UTF-8           LC_COLLATE=en_US.UTF-8       
 [5] LC_MONETARY=en_US.UTF-8       LC_MESSAGES=en_US.UTF-8      
 [7] LC_PAPER=en_US.UTF-8          LC_NAME=en_US.UTF-8          
 [9] LC_ADDRESS=en_US.UTF-8        LC_TELEPHONE=en_US.UTF-8     
[11] LC_MEASUREMENT=en_US.UTF-8    LC_IDENTIFICATION=en_US.UTF-8

attached base packages:
[1] stats     graphics  grDevices utils     datasets  methods   base     

other attached packages:
[1] quantmod_0.3-18 TTR_0.21-0      xts_0.8-7       zoo_1.7-7      
[5] Defaults_1.1-1  rj_1.1.0-4     

loaded via a namespace (and not attached):
[1] grid_2.15.0    lattice_0.20-0 tools_2.15.0 
```

我在我的 Windows 机器上遇到了同样的问题，但配置略有不同......

实际上最大的问题是，如果你尝试

```
cbind(data, R1) 
```

R 闪退...

这是 xts 错误还是有其他问题？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-14T19:26:48.270

您需要`drop.time=TRUE`在调用中设置`to.monthly`.

```
data <- to.monthly(SPY, drop.time=TRUE)
# CentralPivot Point (P) = (High + Low + Close) / 3
center <- xts(rowSums(HLC(data))/3, order.by=index(data))
head(center)
head(Lo(data))
R1 <- (2*center) - Lo(data)  # First Resistance (R1) = (2*P) - Low
R1
NROW(R1) 
```

而且，正如我在评论中所说，调用`merge.xts`或`cbind.xts`在没有索引的 xts 对象上会导致段错误。它在“修复我”列表中。

# ruby-on-rails - Rails 3.2：尝试使用'Whenever' gem，但日志文件不断给出：在任何源中找不到 multi_json-1.1.0 (Bundler::GemNotFound) 错误

> ID：11038403
> 
> 赞同：1
> 
> 时间：2012-06-14T17:37:06.457
> 
> 标签：ruby-on-rails, ruby, bundler, gemfile, whenever

我正在尝试使用Whenever gem 来安排每周发送电子邮件的任务。我首先测试了每次更新用户时都会通过调用方法来发送电子邮件。所以现在，我尝试每周发送电子邮件而不是每次更新，但是我在 cron.log 文件中不断收到以下错误：

```
Could not find multi_json-1.1.0 in any of the sources (Bundler::GemNotFound) 
```

我已经做了很多研究，还没有发现任何东西，任何帮助都会很棒。我将在下面发布相关代码：

**应用程序/mailers/weekly_digest_test_mailer.rb**

```
class WeeklyDigestTestMailer < ActionMailer::Base
  default from: "from@example.com"

  def send_email(user)
    @user = user
    @last_question = @user.questions.last.description

    mail to: @user.email, subject: "This is a test email"
  end
end 
```

**应用程序/模型/user.rb**

```
def self.send_email_to_user
    WeeklyDigestTestMailer.send_email(self).deliver
end 
```

**配置/时间表.rb**

```
every 1.minute do
    runner "User.send_email_to_user", :environment => 'development', :output => 'log/cron.log'
end 
```

**宝石文件**

```
source 'https://rubygems.org'

gem 'rails', '3.2.0'
gem "bootstrap-tooltip-rails", "~> 0.1"
gem 'whenever', :require => false

group :production do
  gem "exception_notification", "~> 2.5.2", :require => 'exception_notifier'
  gem "mysql", "~> 2.8.1"
end

group :assets do
  gem 'sass-rails',   '~> 3.2.3'
  gem 'coffee-rails', '~> 3.2.1'
  gem 'uglifier', '>= 1.0.3'
end

gem "jquery-rails"
gem "devise", "~> 2.0.4"
gem 'gauge', git: 'git@github.com:AgilionApps/gauges.git'

gem "capistrano"
gem "capistrano-ext"

group :development do
  gem "awesome_print", "~> 1.0.2"
  gem "mail", "2.4.1"
end

group :test do
  gem "minitest", "~> 2.11.2"
  gem "turn", "~> 0.9.3"
  gem "mocha", "~> 0.10.4"
end

group :test, :development do
  gem "sqlite3", "~> 1.3.5"
end

group :staging do
  # gem "pg", "~> 0.13.1"
end 
```

**捆绑安装输出：**

```
Using rake (0.9.2.2) 
Using i18n (0.6.0) 
Using multi_json (1.1.0) 
Using activesupport (3.2.0) 
Using builder (3.0.0) 
Using activemodel (3.2.0) 
Using erubis (2.7.0) 
Using journey (1.0.3) 
Using rack (1.4.1) 
Using rack-cache (1.1) 
Using rack-test (0.6.1) 
Using hike (1.2.1) 
Using tilt (1.3.3) 
Using sprockets (2.1.2) 
Using actionpack (3.2.0) 
Using mime-types (1.17.2) 
Using polyglot (0.3.3) 
Using treetop (1.4.10) 
Using mail (2.4.1) 
Using actionmailer (3.2.0) 
Using arel (3.0.2) 
Using tzinfo (0.3.31) 
Using activerecord (3.2.0) 
Using activeresource (3.2.0) 
Using ansi (1.4.2) 
Using awesome_print (1.0.2) 
Using bcrypt-ruby (3.0.1) 
Using bundler (1.1.4) 
Using rack-ssl (1.3.2) 
Using json (1.6.5) 
Using rdoc (3.12) 
Using thor (0.14.6) 
Using railties (3.2.0) 
Using rails (3.2.0) 
Using bootstrap-tooltip-rails (0.1) 
Using highline (1.6.11) 
Using net-ssh (2.3.0) 
Using net-scp (1.0.4) 
Using net-sftp (2.0.5) 
Using net-ssh-gateway (1.1.0) 
Using capistrano (2.11.2) 
Using capistrano-ext (1.2.1) 
Using chronic (0.6.7) 
Using coffee-script-source (1.2.0) 
Using execjs (1.3.0) 
Using coffee-script (2.2.0) 
Using coffee-rails (3.2.2) 
Using orm_adapter (0.0.6) 
Using warden (1.1.1) 
Using devise (2.0.4) 
Using exception_notification (2.5.2) 
Using gauge (0.0.2) from git@github.com:AgilionApps/gauges.git (at master) 
Using jquery-rails (2.0.0) 
Using metaclass (0.0.1) 
Using minitest (2.11.2) 
Using mocha (0.10.4) 
Using mysql (2.8.1) 
Using sass (3.1.15) 
Using sass-rails (3.2.4) 
Using sqlite3 (1.3.5) 
Using turn (0.9.3) 
Using uglifier (1.2.3) 
Using whenever (0.7.3) 
Your bundle is complete! Use `bundle show [gemname]` to see where a bundled gem is installed. 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-09T14:01:51.653

我在 OS X 上遇到过类似的问题。主要是因为安装了不同版本的 Ruby。或者内置版本与我自己安装的版本相冲突。

检查事项：

1.  输入`which ruby`终端
2.  输出对您安装的内容有意义吗？
3.  您是否使用任何 Ruby 管理器（如[rvm](https://rvm.io//)或[rbenv](https://github.com/sstephenson/rbenv/)）？
4.  如果是这样，请检查您的路径`/.bash_profile`或`/.bashrc`查看它们指向的位置。[此链接](http://kakubei.blogspot.com.es/2012/04/ruby-managers.html)可能有助于安装和配置 rbenv。
5.  我使用 rbenv 所以我`bash_profile`在任何其他**$PATH**声明之前都有这个，以确保它首先获取这些可执行文件：

    > 导出 PATH="$HOME/.rbenv/bin:$PATH"

6.  怎么`gem env`说？这是正确的道路吗？
7.  我在本地运行 Ruby 1.9.3，但由于我们托管公司的问题，我不得不远程处理 1.8.7，所以我在本地安装了两个版本。我忘记更新`bundle install`正确版本的 Ruby 命令，当我遇到您所看到的错误时，我会挠头。希望你没有这个问题，但我只是指出它，以防它引导你走上正确的道路。
8.  分别与和做`bundle exec rails console`或`bundle exec rails server`做同样的事情？`rails console``rails server`
9.  如果他们没有，你在哪里安装捆绑包？简单`bundle install`或`bundle install --path vendor/bundle`？

希望其中一些可以帮助您查明问题。

如果您感到绝望，请删除 Ruby 的内置版本并使用 rvm 或 rbenv 安装一个新版本（在 rvm 遇到很多问题后，我更喜欢 rbenv）并再次尝试查看是否有效。

# sql - 连接三个表（链接表）

> ID：11038404
> 
> 赞同：0
> 
> 时间：2012-06-14T17:37:08.417
> 
> 标签：sql, join

在我写的查询方面需要帮助：

我有三张桌子

**公司**

```
id     name
1      Gary's 
```

**员工**

```
id     name         company_id
1      Tim Jones       1
2      Sam Adams       1 
```

**汇报给**

```
employee_id      reports_to_id
     1                 2 
```

我目前的查询是：

```
select 
   temp.company.name as comp_name, 
   temp.employee.name as employee_name, 
   temp.employee.id as employee_id 
from temp.employee, temp.employee
where temp.company.id = temp.employee.company_id and temp.company.id = 1 
```

这给了我以下输出：

```
comp_name    employee_name     employee_id
 Gary's       Tim Jones           1 
```

我需要这样的东西：

```
comp_name     employee_name    reports_to
Gary's         Tim Jones        Sam Adams 
```

修改我的查询以执行此操作的好方法是什么？我有一个查询，然后我获取这些结果并针对该结果集运行第二个查询（这是非常不必要的）。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-14T17:51:30.220

假设一名员工只向一个人报告，那么我们可以拥有（没有链接表）

```
Employee  (Id, Name, CompanyId, ReportsToId)
Company (Id, Name) 
```

然后你可以有一个类似于

```
select e.Name EmployeeName, c.Name CompanyName, r.Name ReportsTo
from
    Employee e
        inner join Company c on e.CompanyId = c.Id
        inner join Employee r on e.ReportsToId = r.Id
where
    e.CompanyId = 1 
```

如果员工向多人报告，那么我们将使用链接表

```
Employee  (Id, Name, CompanyId)
EmployeeReportsTo (EmployeeId, ManagerId)
Company (Id, Name)

select e.Name EmployeeName, c.Name CompanyName, r.Name ReportsTo
from
    Employee e
        inner join Company c on e.CompanyId = c.Id
        inner join EmployeeReportsTo ert on ert.EmployeeId = e.Id
        inner join Employee r on ert.ManagerId = r.Id
where
    e.CompanyId = 1 
```

# c++ - 如何创建包含（人工生成的）高斯（正态）分布的向量？

> ID：11038408
> 
> 赞同：2
> 
> 时间：2012-06-14T17:37:17.763
> 
> 标签：c++, algorithm, math, statistics

如果我有数据（每日股票图表是一个很好的例子，但它可能是任何东西），其中我只知道 X 单位销售的范围（高 - 低），但我不知道任何给定项目的确切价格卖。为简单起见，假设价格范围包含足够的桶（例如，40 美分范围内的 41 美分增量）以使这种分布可行。如何分配这些项目以形成存储在向量中的正常钟形曲线？它不必是完美的，而是现实的。

我（非常）天真的想法是假设由于随机数应该形成正态分布，我可以做一些事情，比如有一个二进制 RNG。例如，如果有 40 个存储桶，那么如果“0”出现 40 次，则第 0 个存储桶会递增，如果连续出现“1”多次，则第 39 个存储桶会递增。如果“1”出现 20 次，则它位于向量的中间。对每个项目执行此操作，直到计算完 X 个单位。这可能是正确的，也可能不是正确的，并且在任何情况下似乎都比必要的效率低得多。我正在寻找更明智的东西。

这不是家庭作业，只是一直困扰着我的一个问题，我的统计数据达不到标准。大多数文献似乎都是关于分析已经存在的分布，而不是关于如何人为地创建分布。

我想用 C++ 写这个，所以在 R 或 matlab 或诸如此类的预打包解决方案对我来说不太有用。

谢谢。我希望这是有道理的。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-14T17:56:12.807

> 大多数文献似乎都是关于分析已经存在的分布，而不是关于如何人为地创建分布。

有大量关于如何创建的文献。Box-Muller 变换、Marsaglia 极坐标法（Box-Muller 的一种变体）和 Ziggurat 算法是三个。（谷歌这些条款）。两种 Box-Muller 方法都易于实现。

更好的是，只需使用已经存在的实现这些算法之一的随机生成器。boost 和新的 C++11 都有这样的包。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-14T17:56:13.740

您描述的算法依赖于中心极限定理，该定理说定义为`n`属于*同一*`n`分布的随机变量之和的随机变量在增长到无穷大时趋于接近正态分布。来自计算机 PRNG 的均匀分布的伪随机变量构成了这个一般定理的一个特例。

为了获得更有效的算法，您可以将概率密度函数视为某种空间扭曲，它在中间扩展实轴并将其缩小到末端。

令 F: R -> [0:1] 是正态分布的累积函数，invF 是它的逆函数，x 是均匀分布在 [0:1] 上的随机变量，那么 invF(x) 将是一个正态分布的随机变量.

实现这一点所需要做的就是能够计算 invF(x)。不幸的是，这个函数不能用初等函数来表达。实际上，它是非线性微分方程的解。但是，您可以使用牛顿法有效地求解方程 x = F(y)。

我所描述的是*逆变换方法*的简化表示。这是一种非常通用的方法。有一些专门的算法可以更有效地从正态分布中采样。David Hammen 的回答中提到了这些。

# asp.net-mvc - T4 自我跟踪实体和模型验证

> ID：11038409
> 
> 赞同：1
> 
> 时间：2012-06-14T17:37:21.257
> 
> 标签：asp.net-mvc, entity-framework, validation, t4

我在我的项目中使用[EF4.x 自我跟踪实体](http://msdn.microsoft.com/en-us/library/ff407090.aspx)，并试图在我的 MVC4 Web 应用程序中实现模型验证，但是，我的模型状态似乎总是有效的。我正在使用 T4 模板来生成我的“伙伴”类。以下是 STE 及其伙伴之一的示例：

STE - 使用 T4 生成：

```
[DataContract(IsReference = true)]
[KnownType(typeof(Filing))]
public partial class FilingHistory: IObjectWithChangeTracker, INotifyPropertyChanged
{
   public int FilingHistoryId 
   {
     //Snipped for Brevity
   }
   // Navigation, ChangeTracking, Association Fix up snipped
} 
```

这是通过我编写的 T4 模板生成的好友类：

```
[MetadataType(typeof(FilingHistoryMetaData))]
public partial class FilingHistory
  {
    // Partial Class 
  }

public class FilingHistoryMetaData
{           
   [Display(Name = "Filing History Id")]
   [Required(ErrorMessage = "Filing History Id is Required.")]
   int FilingHistoryId { get; set; }    
   // Other properties snipped for Brevity
} 
```

我将从每个 MetaData 类中排除密钥，因为它们将自动创建（仅供参考）。此外，STE、空部分和伙伴类的命名空间是**相同的**

当我在 MVC4 中创建一个简单的控制器只是为了测试它时，使用创建模板，在 Create 的 HttpPost 操作上，我有一些代码，如下所示：

```
[HttpPost]
public ActionResult Create(FilingHistory filingHistoryToCreate)
 {
    if (ModelState.IsValid)  // THIS IS ALWAYS TRUE! even if i pass nothing<----
    {
            return Redirect("/");
    }

   return View(filingHistoryToCreate);
} 
```

我阅读了一堆 SO 链接，甚至浏览了 MSDN，我认为我已经正确设置了所有内容，即命名空间很好，所以没有裸部分类的东西在发生。

当我的视图呈现时，我将所有文本框都留空，我设置了一个断点以按实体检查并且没有设置任何内容，但模型是有效的。我还通过在文本框中输入一些垃圾来进行测试，以确保模型绑定工作正常，而且它是......

我也尝试使用控制台应用程序进行测试，我发现您必须采取额外的步骤来[注册 MetaData 类型](https://stackoverflow.com/questions/1755340/validate-data-using-dataannotations-with-wpf-entity-framework)，但我相信在 MVC 中这不是必需的。万一它对任何人有帮助 - 控制台应用程序和注册元数据类型也对我不起作用，所以我认为我的好友班可能是罪魁祸首？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-14T17:59:55.450

检查属性时似乎`DataAnnotationsModelMetadataProvider`正在寻找`public`属性。

改变你`FilingHistoryId`的`public`，它应该工作：

```
public class FilingHistoryMetaData
{           
   [Display(Name = "Filing History Id")]
   [Required(ErrorMessage = "Filing History Id is Required.")]
   public int FilingHistoryId { get; set; }    
   // Other properties snipped for Brevity
} 
```

# c++ - 默认初始化或检查 Null

> ID：11038415
> 
> 赞同：2
> 
> 时间：2012-06-14T17:37:49.200
> 
> 标签：c++, null, smart-pointers, default-constructor

我想知道在访问智能指针方法之前**为智能指针指定默认初始化还是进行`NULL`值检查更好？**

目前我一直在使用下面的方法来避免调用`increment()`指针`NULL`。**这是一种合理的做事方式，还是有我看不到的陷阱？**

*注意：我们使用自定义智能指针类，并且我当前配置中没有 Boost 库来测试编译此代码。这应该编译，但 YMMV。*

**例子.h**

```
#include <boost/shared_ptr.hpp>

class Foo
{
public:
  Foo() : mFoo(0) {}
  Foo(int rawValue) : mFoo(rawValue) {}

  void  increment() { mFoo++; }

private:
  int mFoo;
};

typedef boost::shared_ptr<Foo> FooSP;

class MyClass
{
public:
  MyClass() : mFoo(new Foo()) {}

  FooSP       foo() { return mFoo; }
  void        setFoo(FooSP newFoo) { mFoo = newFoo; }

private:
  FooSP mFoo;
}; 
```

**主文件**

```
#include <Example.h>

int main()
{
  MyClass temp;                    // Default-constructed
  temp.foo()->increment();         // Increment Foo's member integer
                                   // Before: mFoo = 0
                                   // After:  mFoo = 1
  FooSP tempFoo = new Foo(10);     // Create a Foo with a default size
  temp.setFoo(FooSP(new Foo(10))); // Explicitly set the FooSP member
  temp.foo()->increment();         // Increment the new FooSP
                                   // Before: mFoo = 10
                                   // After:  mFoo = 11
  return 0;
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-14T17:48:50.480

如果您使用智能指针作为指针类型的一般替代品，则无法摆脱对 null 的检查。这是因为使用具有默认构造函数的智能指针定义的类可能允许使用其默认构造函数创建智能指针。动态地创建一个新对象只是为了填充指针直到你可以设置它似乎是一种资源的浪费。

`shared_ptr`的构造函数是显式的，因此您的初始化`tempFoo`不会编译。如果你想保存一行代码，你可以避免像这样声明临时代码：

```
temp.setFoo(FooSP(new Foo(10))); 
```

也可以声明 `setFoo`获取常量引用的方法，避免在获取参数时操纵引用计数。

```
void setFoo(const FooSP &newFoo) { mFoo = newFoo; } 
```

或者`swap`在参数实例上使用。

```
void setFoo(FooSP newFoo) { std::swap(mFoo, newFoo); } 
```

如果我需要按照您的建议来实现某些东西，我将创建一个静态实例`Foo`作为空版本，然后让该`increment`方法在它是空版本时抛出异常。

```
class Foo
{
public:
  static Foo Null;
  //...
  void  increment() {
      if (this == &Null) throw Null;
      mFoo++;
  }
  //...
};

struct DeleteFoo {
    void operator () (Foo *t) const {
        if (t != &Foo::Null) delete t;
    }
};

class MyClass
{
public:
  MyClass() : mFoo(&Foo::Null, DeleteFoo()) {}
  //...
}; 
```

注意`FooSP`要正确处理的自定义删除器`Foo::Null`。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-14T18:02:20.807

> 在访问智能指针方法之前为智能指针指定默认初始化或执行 NULL 值检查更好吗？

没有适用于每种情况的正确答案（很快）。*如果*我不得不对一个或另一个犯错，我会在`NULL`没有默认初始化的情况下进行测试，因为这是一个明显的程序员错误，可以很容易地检测和纠正。

但是，我认为正确的答案是我们使用多个惯用语进行构造和初始化是有充分理由的，并且您应该*为您的程序选择最佳方法*。

通常，我将在较低级别的类以及复杂的较高级别的类中显式（无默认或无默认初始化）。当类是中级并且默认值和所有权更明显（通常是因为用例有限）时，默认值可能是明智的。

通常，您只想保持一致，以避免让客户感到惊讶。您还需要了解分配默认初始化对象的复杂性。如果创建起来又大又复杂，并且默认设置没有意义，那么当默认构造的对象是错误的选择时，您只是在浪费大量资源。

*   a) 不要在没有意义的地方应用默认值。默认值应该很明显。
*   b) 避免浪费分配。

除了您提到的方法之外，您还可以考虑其他一些角度：

*   匹配`Foo`中声明的构造函数`MyClass`。至少，那些属于`MyClass`.
*   如果可复制且高效复制，则将 a 传递`Foo`给`MyClass`的构造函数。
*   `Foo`将容器（在这种情况下为智能指针）传递给'`MyClass`的构造函数以消除任何歧义，并为客户端提供根据需要构建（并在共享指针的情况下共享）的选项`Foo`。

> 这是一种合理的做事方式，还是有我看不到的陷阱？

浪费分配。令人惊讶的结果。它可以限制功能。最明显、最广泛适用的问题是时间和资源消耗。

为了说明一些场景：

*   假设 Foo 每次构建时都会读取一个 1MB 的文件。当需要构造参数并且默认值不是正确的选项时，必须再次读取该文件。无辜的默认设置会使所需的磁盘 io 翻倍。
*   在另一种情况下，省略的构造参数可能是另一个大的或复杂的共享指针。如果不存在，Foo 可能会创建自己的 -- 当资源可以/应该被共享时。

构造函数参数通常非常重要，并且通常不应该从界面中删除。在某些情况下这样做当然没问题，但是随着包含对象的复杂性增加，这些便利可能会引入很多限制或引入很多不必要的分配和 CPU 时间。

在您的程序中使用这两种方法都很好。使用我概述的其他方法也很好。具体来说，*对问题使用正确的方法*是理想的——有多种方法可以实现理想的解决方案；你只需要在你的程序试图做的事情的背景下确定它是什么。所有这些方法都有各自的优点和缺点 - 通常与程序操作的上下文和公开的接口完美匹配。

# c# - 从 C# 查询 MS Access

> ID：11038416
> 
> 赞同：2
> 
> 时间：2012-06-14T17:37:51.027
> 
> 标签：c#, sql, ms-access, ms-access-2007

我是 C# 的新手。我正在尝试查询`*.accdb`数据库，但响应为 0 行并且数据网格保持清晰。查询工作从 MS Access。怎么了？

主窗体类

```
namespace WindowsFormsApplication1
{
    public partial class Form1 : Form
    {
        OleDbConnection database;

        public Form1()
        {
            InitializeComponent();
        }

        private void filterButton_Click(object sender, EventArgs e)
        {
            MessageBox.Show(nameFilter.Text);

            InitializeComponent();
            string connectionString = "Provider=Microsoft.ACE.OLEDB.12.0;Data Source=C:\\qwe.accdb;";
    try
    {
     database = new OleDbConnection(connectionString);
        database.Open();

        string queryString = "SELECT id FROM table1";
        loadDataGrid(queryString);
    }
    catch (Exception ex)
    {
        MessageBox.Show(ex.Message);
        return;
    }
        }

        public void loadDataGrid(string sqlQueryString) {

            OleDbCommand comm = new OleDbCommand();
            comm.CommandText = sqlQueryString;
            comm.CommandType = CommandType.Text;
            comm.Connection = database;

            Int32 returnValue = comm.ExecuteNonQuery();

            MessageBox.Show(returnValue.ToString());

            OleDbCommand SQLQuery = new OleDbCommand();
            DataTable data = null;
            dataGridView1.DataSource = null;
            SQLQuery.Connection = null;
            OleDbDataAdapter dataAdapter = null;
            dataGridView1.Columns.Clear(); // <-- clear columns

            SQLQuery.CommandText = sqlQueryString;
            SQLQuery.Connection = database;
            data = new DataTable();
            dataAdapter = new OleDbDataAdapter(SQLQuery);
            dataAdapter.Fill(data);
            dataGridView1.DataSource = data;

            MessageBox.Show(data.ToString());

            dataGridView1.AllowUserToAddRows = false; // <-- remove the null line
            dataGridView1.ReadOnly = true;          // <-- so the user cannot type 
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-14T18:56:13.887

为什么不采用以下方式：

```
private void filterButton_Click(object sender, EventArgs e)
{
    dataGridView1.Columns.Clear();
    MessageBox.Show(nameFilter.Text);
    InitializeComponent();
    string connectionString = "Provider=Microsoft.ACE.OLEDB.12.0;Data Source=C:\\qwe.accdb;";
    try
    {
        using (DataTable dt = new DataTable())
            {
                using (OleDbDataAdapter da = new OleDbDataAdapter(new SqlCommand("SELECT id FROM table1",new OleDbConnection(connectionString))))
                {
                    da.Fill(dt);
                    MessageBox.Show(dt.Rows.Count.ToString());
                    dataGridView1.DataSource = dt;
                    dataGridView1.Update();
                }
            }       

    }
    catch (Exception ex)
    {
        MessageBox.Show(ex.Message);
        return;
    }
} 
```

# php - PHP 和 InfowWindows

> ID：11038417
> 
> 赞同：0
> 
> 时间：2012-06-14T17:37:54.397
> 
> 标签：php, google-maps-markers

```
 while($DNB->fetch()){
?>
     var infowindow = new google.maps.InfoWindow({content: <?php echo $businessname ?>});
     var point  = new google.maps.LatLng(<?php echo $lat ?>, <?php echo $lon ?>);
     var marker = new google.maps.Marker({position: point, map:map});
     google.maps.even 
```

t.addListener(marker, 'click', function(){infowindow.open(map,marker);});

当我运行上面的代码时，地图没有显示。但是，当我用“blah”替换 php 标签时，它可以工作。我不确定为什么。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-14T17:40:07.560

尝试在 PHP 代码段周围加上引号。

```
var infowindow = new google.maps.InfoWindow({content: "<?php echo $businessname ?>"});
var point  = new google.maps.LatLng("<?php echo $lat ?>", "<?php echo $lon ?>");
var marker = new google.maps.Marker({position: point, map:map});
google.maps.event.addListener(marker, 'click', function(){infowindow.open(map,marker);}); 
```

# jquery - 添加仅附加一次的条件

> ID：11038418
> 
> 赞同：0
> 
> 时间：2012-06-14T17:37:58.123
> 
> 标签：jquery

这是我的 jQuery 片段

```
$(document).ready(function() {

$("#button").click(function(e) {
    $("body").append('Source:CIA World Factbook');
});

}); 
```

我只想通过单击按钮附加一次，

这是按钮的来源，

```
<div id="button"> Show Sources </div> 
```

我怎样才能实现它？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-14T17:38:45.190

```
$("#button").one('click', function(e) {
    $("body").append('Source:CIA World Factbook');
}); 
```

`.one()`只会执行一次点击事件。

阅读更多关于**[`.one()`](http://api.jquery.com/one)**

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-14T17:41:56.187

您可以`.one()`按照@thecodeparadox 的建议使用上面的方法（我对此绝对没有问题），这应该很好用。

*...但是如果您的按钮在单击一次后*完全没有用处，为什么不考虑隐藏它呢？

```
$('#button').on('click', function () {
    // do the reveal
    //
    // then hide this button
    $(this).hide();
}); 
```

将其保留在布局中似乎没有任何意义。让其他元素占据空间。

### 编辑

...甚至删除它。

```
$(this).remove(); 
```

# angularjs - Angular.js 中的 $resource 关系 [更新]

> ID：11038425
> 
> 赞同：4
> 
> 时间：2012-06-14T17:38:20.353
> 
> 标签：angularjs

> 我试图找出编写与其他模型相关的模型的最佳方法，例如具有 1 个或多个 OrderItems 的 Order。

加载订单时如何获取相应的 OrderItems？

```
angular
    .module('MyApp.services', ['ngResource'])
        .factory('Order', function($resource) {
            return $resource('/api/v1/Order/:orderId?format=json', {}, {});
        });
        .factory('OrderItem', function($resource) {
            return $resource('/api/v1/OrderItem/:orderitemId?format=json', {}, {});
        }); 
```

我在 get Order 上尝试了一个回调函数来加载 OrderItems，但没有奏效。

* * *

有一个非常相似的问题，但它已经过时了：[Angular.js 中的 $resource 关系](https://stackoverflow.com/q/9981090/599991)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-16T20:39:42.813

您可以将函数包装在另一个获取订单项的函数中吗？

```
myApp.factory('Order', function($resource) {
  var res = $resource('/api/Order/:orderId', {}, {
    '_get': { method: 'GET' }
  });

  res.get = function(params, success, error) {
    return res._get(params, function(data) { 
      doOrderItemStuff();
      success(data);
    }, error);
  }
  return res;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-17T22:54:24.563

在安迪回答之前，我正在控制器中解决它。为此，只需添加：

```
function OrderCtrl($scope, $routeParams, $resource, Order, OrderItem) {

    $scope.order = Order.get({
        orderId : $routeParams.orderId
    }, function(order) {
                doOrderItemStuff();
    });

} 
```

# c# - 确定行是否存在的最干净的方法？

> ID：11038427
> 
> 赞同：0
> 
> 时间：2012-06-14T17:38:21.603
> 
> 标签：c#, oracle, dotconnect

这是一个简单的“记录是否存在”问题的最安全/最佳代码：

```
. . . // "oc" is an OracleConnection component
const string sql = "SELECT COUNT(*) FROM CONGRESS WHERE IQ > WEIGHT"; //Most politicians have more pounds than sense
try {
    using (OracleCommand ocmd = new OracleCommand(sql, oc)) {
        return Convert.ToInt32(ocmd.ExecuteScalar()) > 0;
    }
. . . // the rest elided to spare the vertical scroll-bar bearings 
```

?

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-14T17:42:28.433

就像是

```
SELECT 1
  FROM dual
 WHERE EXISTS( SELECT 1
                 FROM congress
                WHERE iq > weight ) 
```

可能是最安全的选择，因为这允许 Oracle 在找到匹配行后立即停止执行查询，而不是扫描整个表以获得准确的计数。就像是

```
SELECT COUNT(*) 
  FROM congress
 WHERE iq > weight
   AND rownum <= 1 
```

也应该做同样的事情。在我看来，第一个查询更能表达您的意图，但也更冗长。

# c - 如何为函数指针创建 typedef

> ID：11038430
> 
> 赞同：40
> 
> 时间：2012-06-14T17:38:41.940
> 
> 标签：c, function-pointers, typedef

我认为如果我为函数指针创建了一个 typedef 会更容易使用函数指针，但我似乎让自己在一些语法或用法或关于函数指针的 typedef 的一些东西上绊倒了，我可以使用一些帮助。

我有

```
int foo(int i){ return i + 1;}
typedef <???> g;
int hvar;
hvar = g(3) 
```

这基本上就是我想要完成的事情。我是一个相当新的 C 程序员，这让我太过分了。什么代替`<???>`？

* * *

## 回答 #1

> 赞同：89
> 
> 时间：2012-06-14T17:42:29.847

你的问题不清楚，但我认为你可能想要这样的东西：

```
int foo(int i){ return i + 1;}

typedef int (*g)(int);  // Declare typedef

g func = &foo;          // Define function-pointer variable, and initialise

int hvar = func(3);     // Call function through pointer 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2017-12-09T18:27:39.123

你说的对。函数指针可以方便地用于指向具有相同返回类型并采用相同数量参数的不同函数。参数类型应与函数指针参数的声明相匹配。

在您的情况下，您可以将函数指针定义`g`为：

`typedef int (*g)(int);` //`typedef`函数指针。

`g`是函数返回`int`值并接受一个`int`参数的函数指针。

函数指针的用法可以用下面一个简单的程序来说明：

```
#include<stdio.h>

typedef int (*pointer_to_function)(int first_parameter_of_type_int, int second_parameter_of_type_int);

int my_function_returning_int_and_taking_two_int_arguments(int par1, int par2)
{
    int result = par1 + par2;
    return result;
}

int my_mul_function(int par1, int par2)
{
    int result = par1 * par2;
    return result;
}

int main()
{
    int res; // returning result will be here
    pointer_to_function my_fun_pointer; // declare function pointer variable;

    my_fun_pointer = my_function_returning_int_and_taking_two_int_arguments; // function pointer points to `my_function_returning_int_and_taking_two_int_arguments` function
    res = my_fun_pointer(2,3);       // Call function through pointer
    printf(" result of `my_function_returning_int_and_taking_two_int_arguments` = %d \n", res);

    my_fun_pointer = my_mul_function; // now function pointer points to another function: `my_mul_function` 
    res = my_fun_pointer(2,3);       // Call function through pointer
    printf(" result of `my_mul_function` = %d \n", res);

   return 0;
} 
```

输出：

```
result of `my_function_returning_int_and_taking_two_int_arguments` = 5 
result of `my_mul_function` = 6 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-05-19T20:50:41.680

函数返回函数指针的原始写法是

```
int (* call(void) ) (int,int); 
```

这`call`是一个函数，它只返回一个函数指针，它接受 2 个参数并返回一个整数值。注意括号，它们是绝对必要的。

这是代码：

```
#include<stdio.h>

int sum(int a,int b)   //sum is the function returned by call
{
   return a+b;
}

int (*call(void) ) (int ,int);

int main() {
  int (*p)(int,int);   // way to declare a function pointer
  p=call();
  printf("%d\n",(*p)(8,3));
}

int( *call(void) )(int,int) {
    return sum;
} 
```

# ajax - 具有困难 URL 设置的 AJAX Wordpress 站点

> ID：11038432
> 
> 赞同：0
> 
> 时间：2012-06-14T17:38:43.863
> 
> 标签：ajax, wordpress, url, themes

在这个使用 AJAX 的 WordPress 主题上，被证明是困难的。主题的开发者似乎无法找到问题或解决方案。

该站点运行良好，如果且仅当您键入的是完整的 URL“ [http://www.geigerandwood.com/#!//](http://www.geigerandwood.com/#!//) ” 如果您单独键入 .com 站点，它会出现但会失效.

我已经尝试过 301 重定向，甚至创建了一个带有重定向的静态页面，但仍然没有运气。我可以在代码中添加或更改某些内容以使其正常工作吗？

仅供参考 - 它已经在 OSX 和 Windows 上的常见网络浏览器上进行了测试。

这是我提出的问题的视频。[http://www.screenr.com/D1G8](http://www.screenr.com/D1G8)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-15T00:14:56.823

你用什么主题？

我对您的页面源代码的快速检查是，我只能`#!//`在此处找到与 is相关的内容

```
<div id="contentBoxScroll">
<a id="closeButton" href="#!//"></a>
<div class="dragcontainer">
<div id="contentBoxScrollDragger" class="dragger">
<div class="scroll_up"></div>
<div class="scroll_down"></div>
</div>
</div>
</div> 
```

我认为它必须是生成该 HTML 的脚本中的某些内容。我可以说更多，因为我看不到完整的来源。

# javascript - 在弹出窗口中模糊图像

> ID：11038434
> 
> 赞同：3
> 
> 时间：2012-06-14T17:38:45.827
> 
> 标签：javascript, css, popup

弹出窗口有什么方法不仅可以模糊文本，还可以模糊背景中的图像？我附上了一张视觉图。![在此处输入图像描述](../Images/ca1c97399f0267569c740056ba231eb6.png)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-14T17:53:23.973

也许[blur.js](http://blurjs.com/)可以帮助你！

留意[演示](http://blurjs.com/simpledemo.html)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-15T04:41:49.890

这就是你要找的。[CSS3 灯箱](http://tympanus.net/codrops/2011/12/26/css3-lightbox/)。

他们做了一个类似的弹出窗口实现，然后模糊背景。一探究竟。我相信它会对你正在做的事情有所帮助。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-15T10:47:12.990

*这就是stackoverflow的做法。*

**HTML**

```
<div class="popup">

    <div class="blur-bg"></div>

    <div class="popup-win"><img src="foo.jpg"/></div>
</div> 
```

**CSS**

```
 .blur-bg{
            position: absolute;
            top: 0px;
            z-index: 1000;
            opacity: 0.5;
            height: 2323px;
            left: 0px;
            width: 100%;
            background-color: black;
        }
    .popup-win{
            position: fixed;
            width: 400px;
            z-index: 1001;
            top: 50%;
            left: 50%;
            display: block;
            margin-top: -85px;
            margin-left: -215px;
            box-shadow: 0px 2px 5px rgba(0, 0, 0, 0.3);
            background-color: #fff;
            padding: 15px!important;
        } 
```

# iphone - 键盘不会出现在模态视图控制器中

> ID：11038436
> 
> 赞同：0
> 
> 时间：2012-06-14T17:39:05.373
> 
> 标签：iphone, ios4, uiwebview

我在模态视图控制器中有一个 UIWebView （使用[SVModalViewController](https://github.com/samvermette/SVWebViewController)）。在 iOS 4.2 中，当我点击输入文本字段时，键盘不会出现。页面滚动为键盘腾出空间的视图动画仍然发生，但没有出现。它在 iOS 5 中运行良好。

我正在调用`[self.window makeKeyAndVisible]`应用程序委托，所以这不是问题。

任何指导将不胜感激！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-14T23:51:25.920

解决方案：我需要让包含 UIWebView 的视图控制器成为第一响应者，然后，它就起作用了！

# apache - Liferay 的 SOLR 插件是什么意思？

> ID：11038437
> 
> 赞同：2
> 
> 时间：2012-06-14T17:39:05.427
> 
> 标签：apache, tomcat, solr, lucene, liferay

我正在使用 Liferay 6.1，并且正在尝试学习如何将搜索功能整合到 Liferay 门户中。我能够在 Liferay 的 tomcat 容器中运行 Apache SOLR，但我不明白 liferay 的 solr 插件是什么意思。

这是[链接](http://www.liferay.com/community/wiki/-/wiki/Main/Integrate+Solr+with+Liferay+portal)

有人可以解释使用插件（对于liferay）有什么好处以及它在使用SOLR之上完成了什么？

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-14T19:10:57.543

根据此[链接](http://www.liferay.com/web/guest/community/wiki/-/wiki/Main/Pluggable+Enterprise+Search+with+Solr)，它是从门户外部化搜索功能。

使用 Solr 代替 Lucene 为您提供了 Solr 的附加功能，例如复制、分片、通过 Carrot2 进行结果聚类、使用自定义分析器/词干等。

它还可以将搜索服务器处理卸载到单独的集群。

开辟了与门户 UI 分开的搜索驱动 UI（分面分类等）的可能性。

# php - CakePHP 从服务器中选择一个文件

> ID：11038440
> 
> 赞同：0
> 
> 时间：2012-06-14T17:39:12.243
> 
> 标签：php, cakephp

我正在构建一个基于 CakePHP 框架和[Croogo CMS](http://croogo.org)的应用程序。基本上会有一个简单的 Intranet 部分，在登录后用户将能够查看和下载一些文件。

在管理中，我正在计划一个简单的部分，管理员将从之前上传到 CMS 并放置在`/app/webroot/files`文件夹中的文件中选择文件。在这里，我想实现一个简单的**文件选择器**，让管理员轻松选择将添加到该 Intranet 的文件。

我在谷歌上搜索了一段时间，但没有发现任何有用的东西——只有关于文件上传的页面。

**我的问题**：是否有任何插件或类似于我需要的东西可以使用，还是我必须自己写下来？

如果没有什么可用的，我打算这样做：

*   管理员必须将 Intranet 专用文件直接上传到文件夹`/app/webroot/files/intranet/`
*   在 Intranet 文档管理部分中，我将列出所有现有文件，将它们`<ul>`作为链接填充到列表中，并使用`jQuery`在后台填充一些隐藏的表单字段，然后我将收集有关正在添加到 Intranet 的文件的信息

这是一个好方法还是你有更好更简单的解决方案？

非常感谢您提前回复！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-15T05:57:48.333

正如 Lector 所说，webroot 文件是公开的，因此您需要将它们保存到 webroot 之外的某个位置，也许在 app 内的另一个文件夹中。您可以使用[媒体视图](http://book.cakephp.org/2.0/en/views/media-view.html)来允许下载这些受限文件。您可以使用 PHP 显示某个文件夹中的所有文件，类似于[此处](http://www.clanthemes.com/tutorials-view-140-display-all-files-in-a-directory.html)的操作。

# asp.net-mvc - 强制 ko.mapping 创建一个具有映射属性的空数组

> ID：11038442
> 
> 赞同：4
> 
> 时间：2012-06-14T17:39:20.137
> 
> 标签：asp.net-mvc, knockout.js, knockout-mapping-plugin

我正在从 mvc4 中的模型在 Knockout 中创建视图模型。我正在使用映射插件。当前代码如下所示。

**首先：**我将需要的不同 MVC4 模型合并到一个 ko 视图模型中。

```
var mergedData = $.extend(true, {}, initialEventData,
    { "Tickets": initialTicketData }, { "TimeZones": timeZones }
); 
```

**第二：**我添加了一些映射以将计算函数添加到我的视图模型中。

```
var mapping = {
    'Tickets': {
        create: function (options) {
            return new updatedTicket(options.data);
        }
    }
}

var updatedTicket = function (data) {
    ko.mapping.fromJS(data, {}, this);

    this.formattedPrice = ko.computed(function () {
        return "$" + parseFloat(this.Price()).toFixed(2);
    }, this);
} 
```

**Finlly：**我应用绑定。

```
var eventViewModel = ko.mapping.fromJS(mergedData, mapping); 
```

**但是：**有时门票模型可能会空着回来。发生这种情况时，映射插件不会创建可观察数组（显然）。我需要创建一个带有映射属性的空数组，以便我可以推送新票。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-14T22:25:01.170

只需创建一个容器视图模型，您可以在其中创建默认票证数组......也在您的回调函数中，确保您使用引用“this”的变量

```
 var mapping = {
    'Tickets': {
        create: function (options) {
            return new updatedTicket(options.data);
        }
    }
}

var updatedTicket = function (data) {
    var self = this;
    ko.mapping.fromJS(data, {}, this);

    this.formattedPrice = ko.computed(function () {
        return "$" + parseFloat(self.Price()).toFixed(2);
    }, this);
}

var viewModel = function ( )  {
    this.Tickets = ko.observableArray([]);
    ko.mapping.fromJS(mergedData, mapping, this);
}

var eventViewModel = new viewModel(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-14T17:47:42.967

我只想在映射配置中添加一个检查。检查数据是否在 updatedTicket 函数中，如果没有，则手动创建一个可观察数组

# html - CSS、HTML 或 Jquery - 滚动条样式

> ID：11038443
> 
> 赞同：1
> 
> 时间：2012-06-14T17:39:21.743
> 
> 标签：html, css, scrollbar

如何创建这样的滚动条？

![在此处输入图像描述](../Images/6af0fad2ffa28f83d36ec401f1bff05b.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-14T17:41:58.697

您将要使用 CSS。

[http://beautifulpixels.com/goodies/create-custom-webkit-scrollbar/](http://beautifulpixels.com/goodies/create-custom-webkit-scrollbar/)

# rsync - 传输数百万张图像——RSync 不够好

> ID：11038445
> 
> 赞同：4
> 
> 时间：2012-06-14T17:39:27.623
> 
> 标签：rsync

我们有一个 130GB 大小的文件夹，其中包含数百万个微小 (5-20k) 图像文件，我们需要将其从旧服务器 (EC2) 移动到新服务器 (Hetzner, Germany)。

我们的 SQL 文件 SCP 很快就完成了——至少 20-30mb/s——而且前约 5gb 左右的图像传输也很快。

然后我们回家了一天，今天早上回来，我们的图像传输速度减慢到只有约 5kb/s。RSync 在达到工作负载的中间时似乎变慢了。我已经研究过替代方案，比如[gigasync](http://matthew.mceachen.us/geek/gigasync/)（这似乎不起作用），但每个人似乎都同意 rsync 是最好的选择。

我们有这么多文件，`ls -al`完成需要一个多小时，而且我所有尝试使用 python 将我们的传输批量传输到更小的部分都已经耗尽了所有可用的 RAM，但没有成功完成。

如何使用现成的工具和一些轻量级脚本以合理的速度传输所有这些文件？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-14T17:58:01.957

性能问题很可能不在于其`rsync`本身，而在于单个目录中有这么多文件。很少有文件系统能在像这样的单个大文件夹中表现良好。您可能会考虑重构该存储以使用子目录的层次结构。

但是，由于听起来您实际上是在进行一次性传输，因此您可以尝试类似 a 的方法`tar cf - -C <directory> . | ssh <newhost> tar xf - -C <newdirectory>`- 这可能会消除一些额外的每个文件通信`rsync`和额外的往返延迟，但我不'认为这不会有显着改善......

另外，请注意，如果`ls -al`需要一个小时，那么当您接近传输结束时，创建每个新文件可能会花费大量时间（几秒钟甚至几分钟），因为它首先必须检查目录中的每个条目，以查看它实际上是在创建新文件还是覆盖旧文件。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-14T17:58:42.833

我不知道它是否会明显更快，但也许是

```
cd /folder/with/data; tar cvz | ssh target 'cd /target/folder; tar xvz' 
```

会成功的。

如果可以的话，也许可以重组你的文件排列。在类似的情况下，我将文件按项目或仅按 1000 个分组在一起，这样一个文件夹就不会同时包含太多条目。

但我可以想象，`rsync`保持传输文件列表的必要性（否则我也非常喜欢）是造成速度缓慢的原因。如果`rsync`进程占用太多 RAM 以至于必须进行交换，那么一切都将丢失。

因此，另一种选择可能是`rsync`逐个文件夹。

# lotus-notes - 使用当前用户名填充的作者字段

> ID：11038450
> 
> 赞同：0
> 
> 时间：2012-06-14T17:39:40.443
> 
> 标签：lotus-notes

我有一个表单，其中有一个可编辑的作者字段。当我在 Lotus Notes 客户端中打开该表单时，作者字段将填充当前用户名。如果我将作者字段的默认值设置为作者名称字段（在计算模式或可编辑模式下），则不会发生这种情况。我正在使用 Lotus Notes 8.5.3。

为什么会这样？这是正常的行为吗。我想，这是*非常非常*基本的东西，但我第一次遇到这个。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-14T18:20:39.930

这种行为是正常的，当你考虑它时，它是有道理的。该 Authors 项中的值将是有权访问该文档的用户/组的列表。如果该字段不可编辑或未以任何其他方式更改并且用户进入，创建文档，然后保存，则该用户将不再有权访问它（假设此处具有作者权限）。

因此，将文档的创建者放在该字段中是有意义的，这样他们就可以默认访问它。

# performance - 有没有办法在 O(1) 中找到最大值并在 O(lgN) 中进行查找？

> ID：11038455
> 
> 赞同：2
> 
> 时间：2012-06-14T17:40:12.440
> 
> 标签：performance, algorithm, data-structures, big-o, max

假设您有很多（键、值）对象要跟踪，包括许多插入和删除。

你需要满足3个要求：

1.  在任意点以恒定时间获取最大密钥
2.  以对数时间查找任何键的值。
3.  插入和删除需要对数时间。

有没有可以做到这一点的数据结构？

我的想法：

优先级队列可以在恒定时间内获得最大值，但我无法查找值。二叉搜索树（2-3棵树）可以在对数时间内查找，但max也需要O（lgN）。如果我尝试跟踪 BST 中的最大值，则当我必须删除最大值并找到第二大时需要 O(lgN)。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-06-14T18:22:36.107

为什么我们需要那些花哨的数据结构？我认为一个跟踪 Max 节点的简单二叉搜索树可以很好地满足 OP 的要求。

1.  您可以使用 max 键跟踪节点：

    每当您插入一个新节点时，您都​​会将该键与前一个最大键进行比较以确定这是否是一个新的最大节点

    每当您删除最大节点时，都需要 O(logN) 才能找到下一个最大节点

2.  你肯定有 O(logN) 查找时间与 BST 的性质

3.  BST 的更新需要 O(logN) 时间

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-14T17:45:12.390

您可以并行使用两个数据结构-

1.  将键/值对存储在哈希表或平衡 BST 中以获得 O(log n) 查找，并且
2.  将所有值存储在最大堆中，以便您可以在 O(1) 时间内查找最大值。

这使得插入或删除需要 O(log n) 时间，因为这是从最大堆中插入或删除的时间复杂度。

希望这可以帮助！

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-06-14T17:53:25.270

跳过列表有一个摊销`O(logn)`查找，它们是一个链表，`min`所以`max`总是`O(1)`。[http://en.wikipedia.org/wiki/Skip_list](http://en.wikipedia.org/wiki/Skip_list)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-14T17:45:34.497

我知道哈希表的搜索时间为 O(1)，因为您使用键并且您可以立即查找该值。至于最大值，您可以在每次插入或删除值时不断跟踪它。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-06-14T17:53:16.757

按降序排序的列表怎么样？

1.  最大总是第一个，所以 O(1)。
2.  通过二进制搜索查找是 O(log n)。
3.  `n-i`插入/删除是 O(n)，因为从位置 i 插入/删除时您必须移动项目。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-06-15T07:29:58.437

由于您使用的是键值对，因此我建议您在 java 中使用 TreeMap 的最佳解决方案。

[您可以简单地使用Treemap](http://docs.oracle.com/javase/6/docs/api/java/util/TreeMap.html)中的以下 4 种方法。

*   用于插入和检索的 get() 和 put(key,value) 方法
*   lastKey() 用于查找最大键。
*   remove(key) 用于删除。

[.或使用本页](https://stackoverflow.com/questions/3435926/insert-delete-max-in-o1)中的以下结构

**定论：**

如果您要权衡空间复杂性并热衷于运行时间，您需要有 2 个数据结构。

使用 O(1) 的 HashMap 或 TreeMap 进行插入、检索和删除。

然后根据我提供的第二个链接，使用双堆栈数据结构来查找 o(1) 的最大值或最小值。

我认为这是我能给出的最好的解决方案。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-06-14T17:48:28.960

看一下*RMQ*（Range minimum-maximum Query）数据结构或者*segment tree*数据结构。它们都有 O(1) 查询时间，但是您必须以某种方式修改它们以存储值。

这是一篇不错的文章[http://community.topcoder.com/tc?module=Static&d1=tutorials&d2=lowestCommonAncestor](http://community.topcoder.com/tc?module=Static&d1=tutorials&d2=lowestCommonAncestor)

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2012-06-14T21:30:08.697

正如第一条评论所说，使用**max heap**。使用**hashmap**将指针存储到堆中。这些用于恒定时间查找和日志时间删除。

堆的实现非常简单。它们不需要像 BST 那样的平衡。哈希图通常内置在您选择的语言中。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2012-06-15T08:22:05.313

树数据结构中的删除已经是一个 O(logN) 操作，因此寻找第二大键不会改变操作的复杂性。

但是，您可以使元素无效而不是删除，并且如果您在数据结构中保留反向指针，则从最大移动到第二大可能是 O(N) 操作。

# asp.net-mvc-3 - 简单的 MVC 网络网格问题。我只想为表中的每一行添加一个唯一的 id

> ID：11038461
> 
> 赞同：1
> 
> 时间：2012-06-14T17:40:44.123
> 
> 标签：asp.net-mvc-3, viewmodel, webgrid

有人提出了这个答案：[mvccontrib grid - How to add <tr> id](https://stackoverflow.com/questions/9430538/mvccontrib-grid-how-to-add-tr-id,but)有没有优雅的方法？

我有一个如下表：

![在此处输入图像描述](../Images/9763a54358b92aaea08468a0d6e8913b.png)

## 我的问题

我只想为该表中的每一行添加一个唯一的 id

## 问题的详细解释

`<tr class="webgrid-row-style">`我实际上想要`@item.MvrMedsDetailsId.ToString()`在行 id 中设置一个动态值。像这样：

```
<tr class="webgrid-row-style" id=@item.MvrMedsDetailsId.ToString()>
should yield for each row in the table
<tr class="webgrid-row-style" id=1>
<tr class="webgrid-row-style" id=4>
<tr class="webgrid-row-style" id=17> 
```

## 整个代码

```
@model MedicalVariance.Models.ViewModels.AddMedicineModel
@using MedicalVariance.CustomHtmlHelpers
       <script src="@Url.Content("~/Scripts/ModalEditor.js")" type="text/javascript"></script>

 <!--Learn more about webgrid: http://msdn.microsoft.com/en-us/magazine/hh288075.aspx -->
 @{//razor starts 
     var grid = new WebGrid(source: Model.MedicineListGrid, canPage: true, rowsPerPage: 100, fieldNamePrefix: "details");

     grid.Pager(WebGridPagerModes.NextPrevious);
        @grid.GetHtml(//start of @grid.GetHtml()

                        tableStyle: "webgrid",
                        headerStyle: "webgrid-header",
                        footerStyle: "webgrid-footer",
                        alternatingRowStyle: "webgrid-alternating-row",
                        selectedRowStyle: "webgrid-selected-row",
                        rowStyle: "webgrid-row-style",
                        htmlAttributes: new { id = "start" },

       columns: grid.Columns
       (

                        grid.Column
                        (

                            columnName: "MvrMedsGenericName", //this comes from the webgrid model defintion
                            header: "Medicine Names",
                            canSort: false,
                            format:
                             @<text>
                               @Html.ActionLink((string)(item.MvrMedsGenericName.ToString()),
                                    "MedicineProfile", //action name
                                    "MedicineManagement", //controller name
                             new { PKMvrMedsId = item.PKMvrMedsId }, null) 
                             </text>
                         ),

                         grid.Column
                         (
                           columnName:"MvrMedsActualOrPotential",
                           header: "Actual Or Potential",
                           canSort:false,
                           format:
                           @<text>
                             <a href="#" class="ActualSelectedModal" id="@item.MvrMedsDetailsId.ToString()">@item.MvrMedsActualOrPotential.ToString()</a>
                             </text>

                         ),
                         grid.Column
                         (
                           columnName: "MvrMedsDoses",
                           header: "Doses Administered",
                           canSort: false,
                           format:
                           @<text>
                             <a href="#" class="DoseSelectedModal" id="@item.MvrMedsDetailsId.ToString()">@item.MvrMedsActualOrPotential.ToString()</a>
                             </text> 
                         ),

                         grid.Column
                         (
                           columnName: "MvrMedsCriticalBreakDownPoint",
                           header: "Critical Break Down Point",
                           canSort: false
                         ),
                          grid.Column
                          (
                            columnName: "MvrMedsOutcomes",
                            header: "Category Outcomes",
                            canSort: false
                          ),
                          grid.Column
                          (
                           columnName: "MvrMedsPreliminaryAnalysis",
                           header: "Preliminary Analysis",
                           canSort: false
                          ),
                             grid.Column
                          (
                           columnName: "MvrMedsPreliminaryAnalysis",
                           header: "Preliminary Analysis",
                           canSort: false
                          ),

                         grid.Column
                         (
                            columnName: "PKMvrMedsId",
                            header: "Delete",
                            format:
                         @<text>
                             @Html.ActionLink((string)(item.DeleteLabel.ToString()),
                                    "DeleteMedicine", //action name
                                    "MedicineManagement", //controller name
                         new { MvrId = item.MvrId, PKMvrMedsId = item.PKMvrMedsId }, null) 
                         </text>
                         )/*Please note that DeleteAdministrationError is registered in the global.asax*/

                        )
                       );//end of @grid.GetHtml() 
     } 
```

## 生成以下 HTML

```
<!--Learn more about webgrid: http://msdn.microsoft.com/en-us/magazine/hh288075.aspx -->
<table class="webgrid" id="start">

    <thead>

        <tr class="webgrid-header">

            <th scope="col">Medicine Names</th>
            <th scope="col">Actual Or Potential</th>
            <th scope="col">Doses Administered</th>
            <th scope="col">Critical Break Down Point</th>
            <th scope="col">Category Outcomes</th>
            <th scope="col">Preliminary Analysis</th>
            <th scope="col">Preliminary Analysis</th>
            <th scope="col">
                <a href="/MedicineManagement/ReloadMedicineList/1?detailssort=PKMvrMedsId&amp;detailssortdir=ASC">Delete</a>
            </th>

        </tr>

    </thead>
    <tbody>
        <tr class="webgrid-row-style">

            <td>
                <a href="/MedicineManagement/MedicineProfile/1">ACETAMINOPHEN</a> 
            </td>
            <td>
                <a href="#" class="ActualSelectedModal" id="1">Actual</a>
            </td>
            <td>    
                <a href="#" class="DoseSelectedModal" id="1">Actual</a>
            </td>
            <td>Administration</td>
            <td>A</td>
            <td>ssss</td>
            <td>ssss</td>
            <td>
                <a href="/MedicineManagement/DeleteMedicine/1/1">Delete</a> 
            </td>

        </tr>
        <tr class="webgrid-alternating-row">

            <td>
                <a href="/MedicineManagement/MedicineProfile/2">ABACAVIR SULFATE</a> 
            </td>
            <td>
                <a href="#" class="ActualSelectedModal" id="2">Actual</a>
            </td>
            <td>
                <a href="#" class="DoseSelectedModal" id="2">Actual</a>
            </td>
            <td>Administration</td>
            <td>E</td>
            <td>1212</td>
            <td>1212</td>
            <td>
                <a href="/MedicineManagement/DeleteMedicine/1/2">Delete</a> 
            </td>

        </tr>

        <tr class="webgrid-row-style">

            <td>
                <a href="/MedicineManagement/MedicineProfile/3">ALPRAZOLAM</a> 
            </td>
            <td>
                <a href="#" class="ActualSelectedModal" id="3">Actual</a>
            </td>
            <td>
                <a href="#" class="DoseSelectedModal" id="3">Actual</a>
            </td>
            <td>Administration</td>
            <td>E</td>
            <td>1212</td>
            <td>1212</td>
            <td>
                <a href="/MedicineManagement/DeleteMedicine/1/3">Delete</a> 
            </td>

        </tr>

    </tbody>

</table> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-14T18:21:30.550

很抱歉让您失望，但`WebGrid`您使用的助手不允许您在`<tr>`元素上设置除`class`.

从负责生成的 ASP.NET MVC 源代码中签出以下摘录`<tr>`：

```
private string GetTableBodyHtml(IEnumerable<WebGridColumn> columns, string rowStyle, string alternatingRowStyle, string selectedRowStyle)
{
    StringBuilder builder = new StringBuilder();
    int rowIndex = 0;
    foreach (WebGridRow row in this.Rows)
    {
        string str = this.GetRowStyle(rowIndex, rowStyle, alternatingRowStyle, selectedRowStyle);
        TagBuilder builder2 = new TagBuilder("tr");
        if (!string.IsNullOrEmpty(str))
        {
            builder2.MergeAttribute("class", str);
        }
        foreach (WebGridColumn column in columns)
        {
            string str2 = (column.Format == null) ? HttpUtility.HtmlEncode(row[column.ColumnName]) : Format(column.Format, row).ToString();
            builder2.InnerHtml = builder2.InnerHtml + GetTableCellHtml(column, str2 ?? string.Empty);
        }
        builder.Append(builder2.ToString());
        rowIndex++;
    }
    return builder.ToString();
} 
```

因此，您唯一的机会是编写一个完全自定义的帮助程序，使用另一个帮助您获得更多控制的帮助程序，例如 MvcContrib.Grid 和 Telerik Mvc Grid，或者使用 javascript 将其附加到 DOM。

# sql - 当 SQL 中的 LEFT 未与 JOIN 配对时，它会做什么？为什么会导致我的查询超时？

> ID：11038462
> 
> 赞同：1
> 
> 时间：2012-06-14T17:40:47.687
> 
> 标签：sql, timeout

我得到了以下声明：

`LEFT(f.field4, CASE WHEN PATINDEX('%[^0-9]%',f.field4) = 0 THEN LEN(f.field4) ELSE PATINDEX('%[^0-9]%',f.field4) - 1 END)=@DealNumber`

并且在联系写它的人时遇到了麻烦。有人可以解释该语句的作用，以及它是否是有效的 SQL 吗？该语句的目标是将 f.field for 中的数字字符与 DealNumber 进行比较。除了 DealNumber 末尾的通配符之外，DNumber 和 DealNumber 相同。

我试图在以下语句的上下文中使用它：

```
SELECT d.Description, d.FileID, d.DateFiled, u.Contact AS UserFiledName, d.Pages,   d.Notes
FROM Documents AS d
LEFT JOIN Files AS f ON d.FileID=f.FileID
LEFT JOIN Users AS u ON d.UserFiled=u.UserID
WHERE SUBSTRING(f.Field8, 2, 1) = @LocationIDString
AND f.field4=@DNumber OR LEFT(f.field4, CASE WHEN PATINDEX('%[^0-9]%',f.field4) = 0 THEN LEN(f.field4) ELSE PATINDEX('%[^0-9]%',f.field4) - 1 END)=@DealNumber" 
```

但是当我执行它时，我的代码会一直超时。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-14T18:33:28.623

`CASE`这是减慢速度的子句，而不是`LEFT`本身（尽管`LEFT`可能会阻止使用索引，这会产生影响）。

`CASE`决定了应该与什么进行比较，`@DealNumber`我认为它做了以下......

如果`f.field4`不以数字开头，请使用`LEFT(f.field4, LEN(f.field4))=@DealNumber`: 相当于`f.field4=@DealNumber`.
如果`f.field4`确实以数字开头，请使用`{those digits}=@DealNumber`.

这种计算效率不高。

我将尝试以下方法，它做出了一个**很大**的假设，即混合字符串可以转换为整数——也就是说，如果你转换`ABC`为整数，你会得到零，如果你转换，`123ABC`你会得到可以转换的东西，`123`. 我找不到任何说明这是否可能的文档。

```
AND f.field4=@DNumber
OR (f.field4=@DealNumber AND integer(f.field4)=0)
OR (integer(f.field4)=@DealNumber) 
```

第一行与您的`AND`. 第二行`f.field4=@DealNumber`仅在`f.field4`不以数字开头时才选择。第三行选择 的初始数字部分`f.field4`与 相同的位置`@DealNumber`。

As I say, there is an assumption here that `integer()` will work in this way. You may need to define a `CAST` function to do that conversion with strings. That's rather beyond me, although I would be confident that even such a function would be faster than a `CASE` as you currently have.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-14T17:43:56.057

从[文档](http://www.postgresql.org/docs/9.1/static/functions-string.html)：

> **左（str 文本，n int）**
> 
> 返回字符串中的前 n 个字符。当 n 为负时，返回除最后一个以外的所有 |n| 人物。

# android - Android - 网站的 CPU 利用率

> ID：11038463
> 
> 赞同：0
> 
> 时间：2012-06-14T17:40:49.617
> 
> 标签：android, cpu-usage, android-traceview

我使用过诸如 Top 之类的命令以及诸如 Traceview 之类的工具来了解本机 android 应用程序的 cpu 利用率。但是，我们可以在设备浏览器上运行网站时使用这些工具进行跟踪吗？如果可能的话，请分享你对如何做同样的想法....

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-14T18:06:09.853

Top 仍然可以工作，因为它不依赖进程的内部来检索 CPU 使用率。Traceview 不会，因为它确实如此。

您将观看的过程自然是浏览器。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-09-08T20:37:00.410

高通公司的 Trepn Profiler 工具可能会对此有所帮助。请检查

[https://developer.qualcomm.com/mobile-development/performance-tools/trepn-profiler](https://developer.qualcomm.com/mobile-development/performance-tools/trepn-profiler)

# msdtc - TransactionScope 如何与 DTC 和 WCF 配合使用？

> ID：11038465
> 
> 赞同：1
> 
> 时间：2012-06-14T17:41:07.173
> 
> 标签：msdtc

我有以下编码的 WCF 服务：

```
using (TransactionScope transScope = new TransactionScope(TransactionScopeOption.Required, new TransactionOptions { IsolationLevel = System.Transactions.IsolationLevel.ReadUncommitted }))
{
     security = new Security(GetConnection(SecurityConstants.DatabaseName));
     int userExists = security.UserRegistered(UserID,Pass);
     transScope.Complete();                
} 
```

我在 DBA 层有相同的方法来运行 IExecuteResult 查询，如您在此处看到的：

```
 [Function(Name = SecurityConstants.SP_Name)]
        public UserRegistered<IntegerOutput> IsUserExist(
        [Parameter(Name = "USERID", DbType  = "VarChar(15)")] string userID, 
        [Parameter(Name = "pass", DbType = "VarChar(25)")] string pass
            )
        {
            IExecuteResult result = this.ExecuteMethodCall(this,((MethodInfo)   (MethodInfo.GetCurrentMethod())), userID, pass);
            return ((ISingleResult<IntegerOutput>)(result.ReturnValue));
        } 
```

此外，我检查了 MSDTC 的配置，但是当我运行我的应用程序时，它面临“与底层事务管理器的通信失败”错误。我在本地机器和服务器端启用了 DTC，但我仍然有问题。你能告诉我它是用于网络设置还是我的本地机器或其他东西？请你帮助我好吗。

# sql - 登录 SQL 是一种不好的做法吗？

> ID：11038466
> 
> 赞同：3
> 
> 时间：2012-06-14T17:41:13.797
> 
> 标签：sql, tsql, logging

我在一家电子商务公司工作。我们的 DBA 最近告诉我，使用 SQL 进行日志记录是一种不好的做法，并建议使用平面文件和 grepping 代替。我以前从未听说过登录 SQL 是一种不好的做法，而且我在网上找不到任何可以证实这一点的东西。

当我说日志时，我的意思是记录用户操作，如登录、更改帐户信息等，以及他们的用户代理、IP 地址、帐户 ID 和事件信息等数据。

虽然随着时间的推移会导致很多行，但如果客户有问题，它可以非常容易地搜索。

**登录 SQL 是一种不好的做法，是否最好登录到文件？**

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-14T17:44:31.237

这样做的唯一问题是增加了数据库负载和增加了磁盘空间。除此之外，没有什么能阻止你这样做。实际上，能够查询您的日志并使其保持一致且易于备份是非常方便的。

与平面文件相比，您可以使用 SQL 在日志中添加更多结构。例如，您可以有以下列：

*   ID
*   约会时间
*   事件代码
*   信息
*   机器名称
*   HttpRequestID
*   用户名
*   用户身份
*   AdditionalDataXML：可查询的 XML 列，其中包含有关事件的结构化数据

很方便。我推荐它。

为什么您的 DBA 会抗拒？好吧，他说服你放弃它没有坏处。他没有得到一张漂亮的日志记录表的好处。但他必须维持它。激励是不对称的。

作为缓解措施，您可以每晚`TRUNCATE TABLE`清除日志项。也许在这样做之前将它们导出（bcp.exe）。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-14T17:44:47.803

也许他指的是使用**触发器**进行记录[是不好的做法](https://stackoverflow.com/questions/460316/are-database-triggers-evil)。触发器会导致很多意想不到的效果，并且可以被认为是不好的做法。

除了 SQL 通常用作日志存储之外，因此（如果您有足够的存储空间）这没有任何问题。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-06-14T17:59:01.450

交易存在问题。日志记录将成为事务的一部分，因此如果回滚，日志也会消失。

为了登录 SQL 工作，您需要设置一个单独的 DBMS 会话，这会使事情变得更加复杂。平面文件没有事务。在磁盘已满的情况下，它们也会（合理地）优雅地失败。您可以在不干扰交易的情况下管理（清除）它们。

而且，由于日志记录基本上是*仪器*，因此最好不要过多地干扰被监视的过程。

最后：如果您真的想要 SQL 的易用性，您总是可以选择将平面文件重新导入 DBMS 表。在单独的交易中。

顺便说一句：上述答案与维护*历史*无关。这是一个完全不同的球赛，应该被视为 DBMS+ 应用程序的一部分。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-06-14T19:47:59.213

看起来您的 DBA 宁愿将所有日志记录（SQL 或应用程序）转到一个平面文件以使用 grep。我完全不同意。我个人发现 SQL 比使用 grep 更容易搜索。该条款

```
 WHERE event_time BETWEEN '1/1/2012 1:00AM' AND '1/1/2012 1:10AM' 
```

比你从 grep 获得的任何东西都更容易编写和检索（假设索引）。

Microsoft 不认为日志记录对数据库有害，他们的企业库支持它： http: [//msdn.microsoft.com/en-us/library/ff664543 (v=pandp.50).aspx](http://msdn.microsoft.com/en-us/library/ff664543(v=pandp.50).aspx)

IIS 也支持它，大多数主要的日志库都包含数据库支持。

存储问题本身不一定是问题，您要么登录到应用程序中的文件，要么登录到数据库中的数据库文件。我看到的主要问题是在您进行事务时它是否会变得过于昂贵，并且如上所述，回滚事务导致回滚日志记录的问题。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-14T17:53:35.020

我以前没有听说过它被描述为“不好的做法”，你总是可以设置一个工作来清除超过一定年龄的记录（例如，我们只保留最后一个月的日志）。我想这也取决于谁将查看日志，因为并非所有应用程序支持人员都知道 SQL，而他们可以轻松地阅读文本文件。

# wordpress - 需要停止显示地图标记，直到计数低于 200

> ID：11038472
> 
> 赞同：3
> 
> 时间：2012-06-14T17:41:30.650
> 
> 标签：wordpress, google-maps-api-3

我们正在使用 Wordpress 创建一个站点，该站点集成了 Gmaps 系统以显示钓鱼点的位置。它由与每个州关联的帖子以及输入自定义字段的经度和纬度填充。地图工作正常。问题是某些州有 1000 多个标记，这会导致页面加载出现一些滞后，并且标记相互堆叠，使用起来很荒谬。我们想做的是在完全显示任何标记之前对引脚数量进行限制。澄清：

1.  例如，加利福尼亚州有 1000 多个湖泊，但亚利桑那州只有大约 165 个。如果总数超过 200，则应向访问者显示一条简单的消息，即“条目太多，请放大以查看选择”或类似内容。然后，
2.  当他们放大时，它会重新计算总数，当它低于 200 时（或者我们实际设定的任何限制，只有这么多州有更多）然后标记将根据放大的区域显示

他们到达状态页面时的视图显示了整个状态和所有标记。如果超过 200 个计数，那么它应该只是显示消息以放大等等。最终将列出超过 50,000 个湖泊，因此此修改将极大地帮助页面加载。

这是我们目前正在使用的代码，用于提取数据并显示地图：

```
<script type="text/javascript">
jQuery(document).ready(function(){
  function initialize() {
    var myLatlng = new google.maps.LatLng(<?php echo $center_final; ?>);
    var myOptions = {
      zoom: <?php echo $zoom; ?>,
      center: myLatlng,
      mapTypeId: google.maps.MapTypeId.<?php echo $type; ?>
    };
    var map = new google.maps.Map(document.getElementById("featured_overview"),  myOptions);
    <?php if(get_option('woo_maps_archive_scroll') == 'true'){ ?>
    map.scrollwheel = false;
    <?php } ?>
    <?php foreach($coords as $c_key => $c_value) { ?>
    var point = new google.maps.LatLng(<?php echo $c_value['coords']; ?>);
    var root = "<?php bloginfo('template_url'); ?>";
    var the_link = '<?php echo get_permalink($c_key); ?>';
    <?php $title = str_replace(array('&#8220;','&#8221;'),'"',get_the_title($c_key)); ?>
    <?php $title = str_replace('&#8211;','-',$title); ?>
    <?php $title = str_replace('&#8217;',"`",$title); ?>
    <?php $title = str_replace('&#038;','&',$title); ?>
    var the_title = '<?php echo html_entity_decode($title) ?>';
    var color = '<?php echo $c_value['color']; ?>';
    createMarker(map,point,root,the_link,the_title,color);
    <?php } ?>
  }
  initialize();
});
</script> 
```

任何帮助将不胜感激。在此先感谢所有人。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-12T05:30:39.143

为什么不使用[MarkerClusterer](http://google-maps-utility-library-v3.googlecode.com/svn/tags/markerclustererplus/2.0.9/examples/advanced_example.html)库。它专为此类场景而设计，因此您可以设置聚类的分辨率和距离。..您还可以绑定事件（如果您坚持使用 200 之类的数字）。

（实际上，我有一个未发布的 wordpress 插件就是这样做的 - 插入地图并在帖子的基础上修复集群）

# java - 在 Java 脚本或 DOJO 中将“6/14/2012:8:12 PM”转换为毫秒

> ID：11038474
> 
> 赞同：-1
> 
> 时间：2012-06-14T17:41:30.647
> 
> 标签：java, dojo, milliseconds

“6/14/2012:8:12 PM”希望使用 Java Script 或 Dojo 将其转换为毫秒（如 1338537600000）。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-14T17:44:17.173

两个步骤： 1\. 将您的字符串转换为 javascript 日期。2\. 调用 date.getTime()。

# objective-c - 问号的使用？设置变量时

> ID：11038476
> 
> 赞同：0
> 
> 时间：2012-06-14T17:41:36.563
> 
> 标签：objective-c, operators

> **可能重复：**
> [问号和冒号（？：三元运算符）在objective-c中是什么意思？](https://stackoverflow.com/questions/2595392/what-does-the-question-mark-and-the-colon-ternary-operator-mean-in-objectiv)

我知道我们设置`oldRow`为等于某个索引路径。我从未见过这种语法，也无法在我正在使用的书中找到解释。下面代码中的目的是`?`什么，这段代码到底是做什么的？

```
int oldRow = (lastIndexPath != nil) ? [lastIndexPath row] : -1; 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-14T17:44:42.453

```
int oldRow = (lastIndexPath != nil) ? [lastIndexPath row] : -1; 
```

相当于：

```
int oldrow = 0;
if (lastIndexPath != nil)
    oldRow = [lastIndexPath row];
else 
    oldRow = -1; 
```

该语法称为三元运算符并遵循以下语法：

```
condition ? trueValue : falseValue;

i.e oldRow = (if lastIndexPath is not nil ? do this : if it isn't do this); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-14T17:44:16.267

这是 if 语句的简写。基本上它与以下内容相同：

```
int oldRow;

if(lastIndexPath != nil)
{
    oldRow = [lastIndexPath row];
}
else
{
     oldRow = -1;
} 
```

条件赋值非常方便

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-14T17:44:09.747

此代码等于此代码

```
int oldRow;

if (lastIndexPath != nil)
   oldRow = [lastIndexPaht row];
else
   oldRow = -1; 
```

# jquery - 克隆下拉列表后JQuery更改所选值

> ID：11038477
> 
> 赞同：0
> 
> 时间：2012-06-14T17:41:38.260
> 
> 标签：jquery, select, clone

我有这个下拉菜单。我的其他下拉列表需要克隆：

```
<select name="general">
<option value="0" style="font-size:11px">Nothing</option>
<option class="dropdown_root" value="1">Admin</option>
<option class="dropdown_root_first_lvl" value="2">General</option>
<option class="dropdown_root_next_lvl" value="3">Group</option>
<option class="dropdown_root_next_lvl" value="4">Sales</option>
</select>

<select name="group">
</select> 
```

我的问题是我想克隆相同的内容，但我希望从列表“组”中选择的值是“组”......其值为 3

我试过这个：

```
var new_dd = $('select[name="general"] option').clone();
new_dd.val('3').attr('selected','selected').appendTo('select[name="group"]'); 
```

但我发现这个：

```
<select name="group">
<option value="3" style="font-size:11px" selected="selected">Nothing</option>
<option class="dropdown_root" value="3" selected="selected">Admin</option>
<option class="dropdown_root_first_lvl" value="3" selected="selected">General</option>
<option class="dropdown_root_next_lvl" value="3" selected="selected">Group</option>
<option class="dropdown_root_next_lvl" value="3" selected="selected">Sales</option>
</select> 
```

我想看到的是：

```
<select name="group">
<option value="0" style="font-size:11px">Nothing</option>
<option class="dropdown_root" value="1">Admin</option>
<option class="dropdown_root_first_lvl" value="2">General</option>
<option class="dropdown_root_next_lvl" value="3" selected="selected">Group</option>
<option class="dropdown_root_next_lvl" value="4">Sales</option>
</select> 
```

怎么可能得到这个？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-14T17:42:50.760

```
var new_dd = $('select[name="general"] option').clone();
new_dd
    .filter(function() { 
        return this.value == 3;  // filter for option with value=3
    }) // in this point I have only option with value=3
    .attr('selected', 'selected') // give selected to that option
    .end() // capture all options again
    .appendTo('select[name="group"]'); // append to target 
```

**[演示](http://jsfiddle.net/GUSv8/2/)**

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-14T17:46:56.197

试试这个：

```
$('select[name="general"] option').each(function(){
   $(this).clone().appendTo('select[name="general"]')
})

$('select[name="general"] option[value="3"]').prop("selected", true) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-14T18:10:52.820

这是一个演示。[http://jsfiddle.net/Simplybj/Eyq5x/](http://jsfiddle.net/Simplybj/Eyq5x/)

```
var new_dd = $('select[name="general"] option').clone();
new_dd.appendTo('select[name="group"]');
$('select[name="group"]').val( $('select[name="general"] option').eq(2).val() ).attr('selected',true); 
```

# java - java rest json API的Web服务器架构

> ID：11038478
> 
> 赞同：1
> 
> 时间：2012-06-14T17:41:42.330
> 
> 标签：java, json, rest, jetty, restlet

我将此配置用于高负载 Java JSON REST API：

*   带有 maven-jetty-plugin 的 Jetty 6.1.26

*   Java 1.7.0.5

*   Restlet 2.0.13 作为 RestFul 框架

*   Redis 2.4.14 作为数据库

结果是每台服务器每秒 1000 个请求。平均答案大小约为 1KB

服务器是一个 EC2 Amazon 实例：

```
High-CPU Extra Large Instance

7 GB of memory
20 EC2 Compute Units (8 virtual cores with 2.5 EC2 Compute Units each)
1690 GB of instance storage
64-bit platform
I/O Performance: High
API name: c1.xlarge 
```

一些问题：

1.  1000 个请求/秒可以吗？
2.  你有什么要改变的吗？有什么比 Jetty 更快的 Web 服务器或 Restlet 技术？也许泽西岛？
3.  Jetty 的任何性能提示或特殊配置？

# mongodb - Mongo：失去联系和收藏

> ID：11038485
> 
> 赞同：1
> 
> 时间：2012-06-14T17:42:04.903
> 
> 标签：mongodb, ruby-on-rails-3.1, mongoid

我在本地机器上运行了一个 Rails rake 任务，以便为我的 Mongo 集合播种。在我收到以下异常之前，它可能已经生成了大约 45,000 条记录：

```
Operation failed with the following exception: connection closed

Failed to connect to a master node at localhost:27017 
```

我在 Mac OS X 上，所以我尝试`mongo`并收到以下内容：

```
Error: couldn't connect to server 127.0.0.1 shell/mongo.js:84
exception: connect failed 
```

所以我`mongod`想这会简单地启动这个过程。它现在似乎已经索引了新的集合，因为它们都是空的。我是否覆盖了它们，或者它们可能仍然存在于某个地方？

我跑了`ls /data/db`，我看到`myapp_development.0`了`myapp_development.ns`。这能告诉我什么吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-14T19:07:29.250

听起来您的 MongoDB 数据目录设置为默认值 (/data/db) 以外的其他位置。重新启动可能会使用正确的 --dbpath 启动 mongod。

例如，如果您遵循 MAMP 安装指南，建议可能是将数据目录放在 /Applications/MAMP/db/mongo 中。

您应该能够通过在 mongo JS shell 中运行以下命令来找到使用的 dbpath：

```
db.adminCommand('getCmdLineOpts') 
```

查找“dbpath”的解析设置。

# java - 使用 Maven 构建 OSGI 声明式服务

> ID：11038487
> 
> 赞同：2
> 
> 时间：2012-06-14T17:42:13.723
> 
> 标签：java, service, osgi

我在使用 Maven 构建我的 OSGI 服务时遇到问题。我的`pom.xml`：

```
<plugin>
    <groupId>org.apache.felix</groupId>
    <artifactId>maven-bundle-plugin</artifactId>
    <version>2.0.1</version>
    <extensions>true</extensions>
    <configuration>
        <instructions>
          <Bundle-SymbolicName>${pom.artifactId}</Bundle-SymbolicName>
          <Service-Component>OSGI-INF/activator.xml</Service-Component>
          <Import-Package>org.osgi.framework</Import-Package>
        </instructions>
    </configuration>
</plugin> 
```

*当我使用Maven 安装*构建时，会生成 .jar 文件，但 OSGI-INF 文件夹不存在。我使用 Eclipse 和 m2e 插件。为什么 OSGI-INF 文件夹不在 .jar 文件中？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-14T18:34:49.747

所以如果你想使用 bnd 的内部注解框架，你不需要依赖 felix scr 插件。

```
 <dependency>
        <groupId>biz.aQute</groupId>
        <artifactId>bndlib</artifactId>
        <version>1.50.0</version>
    </dependency> 
```

完成此操作后，您可以告诉 bnd 使用 maven-bundle-plugin 的此配置选项生成声明式服务 xml：

```
 <Service-Component>*</Service-Component> 
```

这将为您生成 OSG-INF 内容。注释略有不同，它们记录在这里：[http ://www.aqute.biz/Bnd/Components](http://www.aqute.biz/Bnd/Components)

另外，您的进口商品看起来很时髦，我建议您这样做：

```
 <instructions>
         <Export-Package>{local-packages};version="${project.version}"</Export-Package>
         <Import-Package>*</Import-Package>
         <Private-Package>{local-packages}</Private-Package>
         <Service-Component>*</Service-Component>
    </instructions> 
```

# html - 如何覆盖 RadioButtonFor 的名称属性？

> ID：11038492
> 
> 赞同：4
> 
> 时间：2012-06-14T17:42:40.443
> 
> 标签：html, asp.net-mvc, razor, html-helper, radiobuttonfor

我正在尝试将使用 for 循环和 Razor 语法创建的单选按钮组合在一起。这是代码：

```
 @for (var i = 0; i < Model.Sessions.Count(); i++)
       {
            @Html.HiddenFor(it => it.Sessions[i].Id)
            @Html.RadioButtonFor(it => it.Sessions[i].Checkbox, "0", new {@class = "Sessions", @id = id, @name="Sessions"})
            @Html.LabelFor(it => it.Sessions[i].Name, Model.Sessions[i].Name)
            <span class="time-span"><em>@Model.Sessions[i].StartTime</em><em>@Model.Sessions[i].EndTime</em></span>
            <br />
       } 
```

for 循环内的第三行是问题所在。基本上名称不会改变，它始终是“Sessions[x].Checkbox”。复选框是自定义类的属性（布尔值）。我似乎无法调试 Razor 的东西，所以任何帮助将不胜感激，我猜这对这里的人来说是非常明显的。

*编辑* Dimitrov 的帖子很有帮助。下面是我使用的最终代码。我使用@class 和@id 属性能够使用Javascript 来选择最初选择的会话（因为这是一个编辑，而不是创建表单）。

```
 @for (var i = 0; i < Model.Sessions.Count(); i++)
    {
        @Html.HiddenFor(it => it.Sessions[i].Id)
        var SId = @Model.Sessions[i].Id;
        @Html.RadioButtonFor(it => it.selectedSession, Model.Sessions[i].Id, new { id = SId, @class = "Sessions" })
        @Html.LabelFor(it => it.Sessions[i].Name, Model.Sessions[i].Name)
        <span class="time-span"><em>@Model.Sessions[i].StartTime</em><em>@Model.Sessions[i].EndTime</em></span>
        <br />
    } 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-14T18:11:39.977

如果您希望能够只选择一个单选按钮，您需要在视图模型上有一个属性来保存选定的会话 id，如下所示：

```
public class SessionViewModel
{
    public int SelectedSessionId { get; set; }
    public IList<Session> Sessions { get; set; }
}

public class Session
{
    public int Id { get; set; }
    public string Name { get; set; }
} 
```

然后有一个控制器：

```
public class HomeController : Controller
{
    public ActionResult Index()
    {
        var model = new SessionViewModel
        {
            SelectedSessionId = 2,
            Sessions = Enumerable.Range(1, 5).Select(x => new Session
            {
                Id = x,
                Name = "session" + x,
            }).ToList()
        };
        return View(model);
    }

    [HttpPost]
    public ActionResult Index(SessionViewModel model)
    {
        return Content("Thank you for selecting session id: " + model.SelectedSessionId);
    }
} 
```

最后是一个观点：

```
@model SessionViewModel

@using (Html.BeginForm())
{
    for (var i = 0; i < Model.Sessions.Count(); i++)
    {
        @Html.HiddenFor(x => x.Sessions[i].Id)
        @Html.RadioButtonFor(x => x.SelectedSessionId, Model.Sessions[i].Id, new { id = "session_" + i })
        @Html.Label("session_" + i, Model.Sessions[i].Name)
        <br/>
    }
    <button type="submit">OK</button>
} 
```

# unix - 将 `grep -n` 输出与 `vim +` 组合的最佳方式

> ID：11038496
> 
> 赞同：0
> 
> 时间：2012-06-14T17:43:00.660
> 
> 标签：unix, grep, vi

这看起来可能非常有用，但我找不到答案......输出`grep -n`是这样的：

```
$ grep -inR Poinsot_1992 *
formulation_bc.tex:83:al.~\cite{Poinsot_1992a}, pressure is chosen over temperature as a convenient primitive
refs_final.bib:33594:@article{Poinsot_1992a, 
```

如何将它提供给 vim，以便它在找到表达式的行打开这两个文件。现在，我手动复制了不需要的行号。

```
vim formulation_bc.tex +83 
```

我可以修改 grep 输出结果的方式吗？提前致谢 ！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-14T18:03:59.620

其他方式：[file:line](http://www.vim.org/scripts/script.php?script_id=2184)插件教 vim 对待`file:line`like `file +line`。

# css - 响应式：如何浮动：左 li 居中对齐 ul？

> ID：11038498
> 
> 赞同：1
> 
> 时间：2012-06-14T17:43:08.163
> 
> 标签：css, position, responsive-design

这是我第一次尝试响应式设计，所以我保持简单。

我有一个`<ul>`居中对齐的，有 3 行图像。但是，如果最后一行只有 1 或 2 个图像，则整行居中对齐，我希望将图像向左对齐（因此它们与顶部的图像垂直对齐）。

这很容易用`float:left`. 但是，我希望每行上的图像数量适应窗口大小，同时保持`<ul>`屏幕居中。

这是一个[jsFiddle](http://jsfiddle.net/Cthulhu/gQBpU/2/)，底行只有一个项目，即居中。如果您调整窗口大小以使其变小，每行上的数字或项目将适应并且列表将在屏幕上保持居中，但最后一行仍将居中。有什么办法可以将最后一行左对齐？

**编辑：**根据要求，这是一些图片。这就是我正在寻找的：在屏幕`<ul>`上**居中**，但底行与左侧对齐。

![在此处输入图像描述](../Images/7a21d7e901f70871ef40ee61b8e3b348.png)

但是，如果我们调整窗口大小，列表会适应，但`<ul>`仍然在屏幕上**居中**，并且底行仍然向左对齐。

![在此处输入图像描述](../Images/5361874fda2feefbe2a35da65caf8f3e.png)

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-14T17:51:13.803

通常我会建议给 ul 一个固定的宽度和边距：0 auto; 居中，但是，如果您希望它随页面一起扩展，则只需给它一些固定的左右边距。

[http://jsfiddle.net/gQBpU/13/](http://jsfiddle.net/gQBpU/13/)

```
ul {
    max-width:800px;
    margin: 0 50px;
}

ul li {
    float: left;
}

ul li img {
    margin:5px;
} 
```

​</p>

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-06-14T17:47:08.363

如果您将所有图像放在一个中`li`，然后您这样做，`float: left`那么我认为它可能会起作用。

# sed - 使用 sed 时权限被拒绝的原因是什么？

> ID：11038499
> 
> 赞同：0
> 
> 时间：2012-06-14T17:43:11.040
> 
> 标签：sed, sh, permission-denied

在我的脚本中运行以下行会给我一个 Permission denied 错误：

```
$config_out | sed -e 's#name="in" value=""#name="in" value="1600"#' > $config_out".tmp" 
```

在我有之前`$config_out | sed -e 's#name="in" value=""#name="in" value="1600"#' > $config_out`，所以最后没有.tmp。我在某处读到，当您尝试将输出传输到您正在从中读取它的同一文件时，您会遇到错误。但是当我将它写入另一个文件时，我不知道为什么会出现该错误。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-14T17:52:29.873

是`$config_out`文件名还是命令名？如果它是一个文件，那么您需要`cat $config_out | sed ...`或`sed ... < $config_out > $config_out.tmp`。但是，如果它是一个命令，则第一个命令可能已被截断/覆盖（shell 脚本或 perl 脚本或其他什么？）。

# php - PHP Array：有没有办法强制所有数组键都是字符串？

> ID：11038509
> 
> 赞同：0
> 
> 时间：2012-06-14T17:43:37.657
> 
> 标签：php, arrays, overflow

编辑：我对我的问题做了一个演示：http: [//codepad.org/ByNdAdCI](http://codepad.org/ByNdAdCI)

我们使用以下逻辑在 32 位 php 中设置我们的数组：

```
 private function formatAvailableOptions($availableOptions) {
    $optionsAsArray = array();
    foreach($availableOptions as $option){
        $optionsAsArray[$option["entity_id"]] = $option["name"];
    }
    return $optionsAsArray;
} 
```

问题：

1.  `$option["entity_id"]`已经变得太大而无法适应 32 位 int，因此在创建时会`$optionsAsArray`溢出。例如

    $optionsAsArray[2147483648] = "嗨";

变成

```
$optionsAsArray[-2147483648] = "hi"; 
```

我需要索引为 2147483648，因为它与数据库中的 id 相关联

1.  此代码已交付给客户端，并且该逻辑在许多地方都使用，因此无法修改每个实例以

    `$optionsAsArray[strVal(2147483648)] = "hi";`

通过使用字符串类型作为关联数组的键使其正常运行。

在这种情况下，最好的解决方案是什么？是否有一个全局配置选项让我强制所有 php 数组使用字符串作为键来解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-14T18:07:24.970

似乎，它不喜欢浮点数作为键；）所以类型转换为浮点数失败。您已经在问题中提到了您的解决方案（`strVal($var)`，或`(string) $var`，或只是`"$var"`）。如果您的客户在 64 位中运行 PHP（他们应该这样做；））他们看不到任何区别。因为这显然是一个错误，您应该考虑修复它并向您的客户发布更新。没有任何选项或设置可以即时将 32 位安装转换为 64 位安装。

# css - 在wordpress页面内的div内的表单内居中输入类型文本？

> ID：11038514
> 
> 赞同：0
> 
> 时间：2012-06-14T17:43:49.770
> 
> 标签：css, forms, wordpress, input

我创建了一个简单的 get 方法表单，但无法将输入框居中。代码在 wordpress 中运行良好，但是当我插入 wordpress 页面时，输入框会错位。

这是我在 wordpress 页面上插入的代码。

```
<div class="homebox"> 
<form method="get" action="/home-quote-page.html" form name="quote" rel="nofollow" onsubmit="return ray.ajax()"> 
<p class="topquotetext">Enter your zip code:</p>
<p><input name="zipcode" class="zipbox" type="text" value="" size="5" maxlength="5"/>       </p>
<p><div style="getquote"><input type="image" src="/Photos/startquote.gif" alt="Start Your Quote" name="go" value='Submit'/></div></form></p>
<div id="load" style="display:none;">Finding...Please wait.</div>   
</div> 
```

这是CSS。一切正常，除了 .zipbox 它将允许我更改盒子的颜色和高度，仅此而已。无论我在框的宽度中输入什么数字，它都保持相同的宽度，它也不会在 div 内居中。

```
.homebox {
text-align: center;
width: 300px;
height: 268px; 
background: #2872bd url(/Photos/home-insurance-box.jpg) no-   repeat; }

.topquotetext {
font-family: sans-serif, Arial, Verdana; 
font-size:16px; 
color:#ffffff;
padding-top:70px;
text-align: center;
}

.zipbox {
width: 95px;
height: 25px;
text-align: center;
font-size: 24px;
margin-right: 10px;
margin-left: 10px;
margin-top: 5px;
border: #7F9DB9 1px solid;
background-color: #FFFED2;
}

.getquote {
width: 300px;
text-align: center;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-14T18:22:33.420

您是否将其粘贴到 WP 中的默认 WYSIWYG 中？如果是这样，WP 正在剥离你的一些标记。找到一个允许您粘贴标记的插件，或创建一个新模板并对此部分进行硬编码。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-14T23:27:32.537

当然，如果您`margin-left: 10px;`在 .zipbox 上使用它会居中并且`text-align: center`不会使元素居中，而只是将居中的文本。WordPress 没有任何问题，这只是您对元素进行样式设置的方式。

试试这个，稍微改变一下你的样式表。

```
.zipbox {
    width: 95px;
    height: 25px;
    display: block;
    overflow: hidden;
    clear: both;
    margin-top: 5px;
    margin-left: auto;
    margin-right: auto;
    font-size: 24px;
    border: #7F9DB9 1px solid;
    background-color: #FFFED2;
} 
```

并且还要确保父元素样式不影响`.zipbox`并且您不需要将`<input />`元素包裹在 中`<p></p>`，`<div></div>`而是将其包裹起来。

# jquery - 试图使 $(document).ready 与 load() 一起工作

> ID：11038516
> 
> 赞同：1
> 
> 时间：2012-06-14T17:44:02.610
> 
> 标签：jquery, ajax, document-ready

我正在使用加载功能加载我的页面。该页面包含轨道滑块的初始化代码（我使用基础）。图像加载但滑块未初始化。

加载slider.html的代码

```
$("a#1").click( function () {
    $("#center_content").load("pages/slider.html");
}); 
```

slider.html 中的代码

```
<div class="row">
    <div class="four columns">Welcome</div>
    <div class="eight columns" id="featured">
        <img src="images/slides/1.jpg" alt="Overflow: Hidden No More" />
        <img src="images/slides/2.jpg"  alt="HTML Captions" />
        <img src="images/slides/3.jpg" alt="and more features" />
        <img src="images/slides/1.jpg" alt="Overflow: Hidden No More" />
        <img src="images/slides/2.jpg"  alt="HTML Captions" />
        <img src="images/slides/3.jpg" alt="and more features" />
    </div>
</div>
<script type="text/javascript">
     $(document).ready(function() {
         $('#featured').orbit();
     });
</script> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-14T17:57:54.657

取自[文档](http://api.jquery.com/load/)：

> ### 脚本执行
> 
> 当使用没有后缀选择器表达式的 URL 调用 .load() 时，内容会在脚本被删除之前传递给 .html()。这会在脚本块被丢弃之前执行它们。但是，如果调用 .load() 时将选择器表达式附加到 URL，则脚本会在 DOM 更新之前被剥离，因此不会执行。

如果您需要在 html 中包含代码，我认为您不需要使用 $.ready()，因为脚本标记位于您尝试绑定的 html 之后。没有它它应该执行得很好。我猜您的代码不起作用，因为当 load() 函数解释脚本时，尚未插入 html。后来插入html的时候就没有代码可以执行了

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-14T17:53:50.077

我想这会有所帮助。完成后绑定轨道函数，`load`并在slider.html页面中移除绑定。

```
$(function(){
    $("a#1").click( function () {
        $("#center_content").load("pages/slider.html",function(){
             $('#featured').orbit();
        });
    });
}); 
```

# php - php 服务器端定时器 独立于客户端浏览器

> ID：11038521
> 
> 赞同：1
> 
> 时间：2012-06-14T17:44:22.610
> 
> 标签：php, javascript, jquery, timer

我需要一个像这样工作的计时器：

想象有人有时间做一些动作，我可以实现js和客户端代码，但是如果客户端关闭浏览器或我的页面，计时器将被卸载。我需要一些独立于客户操作的东西......帮助我......谢谢......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-14T17:45:46.243

保存开始操作的时间，然后在客户端提交结果时检查保存的时间以查看花费了多长时间。如果花费的时间太长，请采取一些措施。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-14T18:00:09.433

您可以将开始时间保存在附加了 id 的数据库中。然后将该 id 存储在一个 cookie 中，该 cookie 会在您的计时器在客户端浏览器中运行很久之后过期。这样，即使他们关闭浏览器，您也可以跟踪开始时间。（但他们仍然可以删除 cookie）。

当他们发送请求时，使用 cookie 从数据库中查找开始时间，并在他们的时间过期时采取行动。

如果即使用户没有向服务器发送另一个请求，您也需要处理计时器，您可以设置一个 cron 作业来查看数据库中的过期计时器。

# javascript - flashMovie.Play 不是函数

> ID：11038529
> 
> 赞同：0
> 
> 时间：2012-06-14T17:44:53.920
> 
> 标签：javascript, html, flash

我正在使用此代码通过 o​​nclick 命令为图像播放 swf。第一次单击时，我收到“flashMovie.Play 不是函数”错误。在第二次单击时，它可以工作，之后每次都可以。这是否与页面中其他元素的执行顺序冲突？第一次点击发生了什么使第二次点击正常工作？（这在 IE 中有效，但在 Firefox 中无效）

对此进行某种时间延迟可能会有所帮助吗？关于我如何尝试的任何建议？

```
<script language="JavaScript">
    function getFlashMovieObject(movieName)
    {
        if (window.document[movieName]) 
        {
            return window.document[movieName];
        }

        if (navigator.appName.indexOf("Microsoft Internet")==-1)
        {
            if (document.embeds && document.embeds[movieName])
                return document.embeds[movieName]; 
        }
        else // if (navigator.appName.indexOf("Microsoft Internet")!=-1)
        {
            return document.getElementById(movieName);
        }
    }

    function PlayFlashMovie(name)
    {
        var flashMovie=getFlashMovieObject(name);
        flashMovie.Play();     
    }
</script> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-16T07:36:58.030

如果在单击按钮之前未加载 Flash 电影，那么您可能会遇到此问题。我认为任何特定的时间延迟都不是一个好主意。最好弄清楚您*到底*在等待什么，然后实施正确的处理程序。

例如，如果您在做某事之前等待整个页面加载，而不是延迟 1 秒，请实现一个`document.onload`处理程序，如下所示：

```
document.onload = function () {
    //your code here
} 
```

附带说明一下，您可能会考虑使用[SWFObject](http://code.google.com/p/swfobject/)，因为它使您在 Flash 和 JavaScript 方面的生活变得更加轻松。

# python - 打印字典保存到文件中，然后复制到py文件中使用？

> ID：11038531
> 
> 赞同：1
> 
> 时间：2012-06-14T17:44:58.863
> 
> 标签：python, google-app-engine, python-2.7, webapp2

使用数据库，我想创建一个非常大的字典。如果我将它保存到磁盘，腌制时，它需要大约 10 MB 的空间。

我想做的是：

将此字典按原样保存到磁盘，以便打开该文本文档并将其复制到另一个 py 文件，这样我就不必每次都重新生成它，并且每当通过 web 应用程序调用 py 文档时，它是可迭代的。

我怎样才能做到这一点？

PS。我的应用程序在 Google 应用程序引擎上运行，我想像这样解决这个问题以避免 DB et al 资源使用。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-14T20:16:49.607

通过 files api 将其存储到 blobstore 中：

```
class YourDictModel(ndb.Model):
    data = ndb.BlobKeyProperty()

huge_dict = dict(...)

file_name = files.blobstore.create(mime_type='application/octet-stream')
with files.open(file_name, 'a') as f:
    f.write(marshal.dumps(huge_dict))

    # Finalize the file. Do this before attempting to read it.
    files.finalize(file_name)

    # Get the file's blob key
    blob_key = files.blobstore.get_blob_key(file_name)
    entity = YourDictModel(data = blob_key)

    entity.put() 
```

请注意：

*   您不能修改 blob，因此要修改它，您需要将 dict 读入内存，删除 blob，创建一个新 blob 并替换模型上的键。
*   字典越大，您就越有可能达到软进程大小限制。
*   我使用 marshal，但你可以使用 pickle、json 或任何你喜欢的东西。

**您无法从 GAE SDK 写入文件： [如何使用 python 和 Google AppEngine 编写或创建（当不存在时）文件](https://stackoverflow.com/questions/2680215/how-to-write-or-create-when-no-exist-a-file-using-python-and-google-appengine)**

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-14T17:59:47.683

首先，如果你的字典腌制需要 10MB，它可能会比你将它直接存储在 py 文件中使用更多的空间。如果您的字典仅包含基本类型，则可以仅使用普通打印

```
>>> print 'mydict = %s' %({'a': [1,2], 2: 'c'}, )
mydict = {'a': [1, 2], 2: 'c'} 
```

还要考虑到此类文件的加载时间将相当长。

其次，使用 Google App Engine 无法实现您想要做的事情，因为您无法动态更改项目的来源。除非那本词典永远不会改变。

谷歌应用引擎甚至对数据存储也有免费配额，所以我看不出试图绕过它的意义。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-14T21:04:54.433

听起来你只是想要一个可以作为 python 加载的字典的转储。这很容易：

```
>>> d = {'key': 'value'}
>>> print '%r' % (d, )
{'key': 'value'}
>>> print repr(d)
{'key': 'value'}
>>> open('/tmp/mydict.py', 'w').write(repr(d)) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-14T18:09:30.447

GAE 上文件的最大可接受大小为 10,485,760 字节。

[上传、下载和管理 Python 应用 - Google Developers](https://developers.google.com/appengine/docs/python/tools/uploadinganapp)

此外，这种大小的字典听起来效率不高。您保存在数据存储调用中的内容可能会在运行应用程序所需的实例小时数中丢失。

最后，从成本和性能的角度来看，仅使用数据存储可能会更好。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-14T18:10:31.933

您无法在 App Engine 中保存到磁盘。最接近的等价物是腌制并保存到 blobstore。

[https://developers.google.com/appengine/docs/python/blobstore/](https://developers.google.com/appengine/docs/python/blobstore/)

您必须自己进行测试以查看性能是否值得，但 Blobstore 可能比发出查询以一遍又一遍地重新生成此数据更便宜。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-06-14T20:03:47.247

老实说，我不明白您为什么要尝试这样做，因此无法想出可能有帮助的想法。

你能澄清你试图做什么而不是你想做的事情吗？

尽管如果我正确理解您，您想要做的是绕过资源使用。如果您使用该平台，则无法避免使用 GAE 资源。无论您做什么，您都会在 App Engine 上使用某种类型的资源。您可以将字典放在数据存储区、blobstore 或 memcache 中。您可以将数据发送到另一个 url，您可以下载和上传数据，但您仍在使用资源。

# r - 为什么使用大型 data.frame 更改列名需要很长时间？

> ID：11038534
> 
> 赞同：23
> 
> 时间：2012-06-14T17:45:28.250
> 
> 标签：r, dataframe, data.table

我`data.frame`在 R 中有 1900 万行和 90 列。我有足够的空闲 RAM 和 CPU 周期。似乎更改此数据框中的单个列名称对于 R 来说是一项非常激烈的操作。

```
system.time(colnames(my.df)[1] <- "foo")
   user  system elapsed 
 356.88   16.54  373.39 
```

为什么会这样？每一行是否都以某种方式存储列名？这是创建一个全新的数据框吗？看来此操作应在可忽略不计的时间内完成。[我在R 手册条目](http://stat.ethz.ch/R-manual/R-patched/library/base/html/colnames.html)中没有看到任何明显的内容。

我在 Windows 7 上运行 R（64 位）的 build 7600，并且在我当前的工作区中，在一个小的 data.frame 上设置 colnames 根据`system.time()`.

编辑：我知道使用的可能性`data.table`，老实说，我可以在去喝茶的同时等待 5 分钟让重命名完成。我感兴趣的是**正在发生什么，为什么？**

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-06-14T18:48:56.870

正如几位评论者所提到的，重命名数据框列很慢，因为（取决于您如何操作）它会复制*整个 data.frame*的 1 到 4 个副本。在这里，来自`data.table`的`?setkey`帮助页面，是我见过的展示这种行为的最佳方式：

```
DF = data.frame(a=1:2,b=3:4)       # base data.frame to demo copies
try(tracemem(DF))                  # try() for non-Windows where R is 
                                   # faster without memory profiling
colnames(DF)[1] <- "A"             # 4 copies of entire object
names(DF)[1] <- "A"                # 3 copies of entire object
names(DF) <- c("A", "b")           # 1 copy of entire object
`names<-`(DF,c("A","b"))           # 1 copy of entire object
x=`names<-`(DF,c("A","b"))         # still 1 copy (so not print method)
# What if DF is large, say 10GB in RAM. Copy 10GB just to change a column name? 
```

要（开始）理解**为什么**会这样做，您可能需要深入研究 R-devel 上的一些相关讨论。这里有几个：[R-devel：加速感知](http://r.789695.n4.nabble.com/speeding-up-perception-td3640920.html)和[R-devel：对 NAMES 感到困惑](http://r.789695.n4.nabble.com/Confused-about-NAMED-td4103326.html)

我对这些线程的印象派解读是：

1.  至少制作一份副本，以便在覆盖原件之前可以“尝试”对其进行修改。因此，如果要重新分配的值有问题，`[<-.data.frame`或者`names<-`可以“退出”并传递错误消息，而不会对原始对象造成任何损害。

2.  R-core 的几个成员对现在的情况并不完全满意。一些人解释说，在某些情况下“R 迷失了方向”；卢克·蒂尔尼（Luke Tierney）表示，他过去“在少数情况下曾尝试过与此复制有关的一些修改，但总是不得不退缩”；西蒙厄巴内克暗示“也可能会有一些事情发生”

（不过，正如我所说，这只是印象派：我根本无法完整了解 R 的内部细节！）

* * *

同样相关的是，如果您还没有看到它，以下是`names(z)[3] <- "c2"`“真正”之类的工作原理：

```
# From ?names<-
z <- "names<-"(z, "[<-"(names(z), 3, "c2")) 
```

* * *

**注意：**这个答案大部分来自 Matthew Dowle 对[this other question](https://stackoverflow.com/questions/10655438/rename-one-named-column-in-r/10655997#10655997)的回答。（我认为值得将它放在这里，并给它更多的曝光，因为它与您自己的问题非常相关）。

# facebook - /me/accounts 只返回应用程序，而不是页面

> ID：11038536
> 
> 赞同：1
> 
> 时间：2012-06-14T17:45:36.980
> 
> 标签：facebook, facebook-graph-api, accounts

我正在通过访问 检索帐户信息`/me/accounts`。对我来说，它写了 1 个页面和 4 个应用程序（正确的数字），但我的朋友只得到了他的 13 个应用程序的列表并且没有页面 - 因此该应用程序无法将他识别为页面管理员。我应该如何解决这个问题？它是一个错误吗？谢谢

编辑：我试过访问/me/accounts?type=page。我有 1 页。我的朋友得到了空数组。他肯定是几个页面的管理员。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2016-08-30T18:38:44.017

为权限请求添加此 facebook 范围标签，然后您将看到页面`manage_pages,pages_show_list`

# css - 富兰克林哥特式媒体在 Apple PC 上显示为 Times New Roman

> ID：11038541
> 
> 赞同：0
> 
> 时间：2012-06-14T17:45:59.510
> 
> 标签：css, font-face

我有一个网站，CSS 脚本通过以下方式设置字体：

`font-family:"Franklin Gothic Medium";`

但是在我朋友的 MAC 笔记本电脑上（现在尝试了两次），它显示为 Times New Roman……知道如何解决这个问题，或者我需要一种新字体吗？我认为富兰克林哥特式是一种非常基本的字体......

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-14T17:53:55.720

这是一个很好的教程，关于如何在您的网站中包含字体文件，以便其他没有字体的计算机可以直接从您的服务器获取它：http: [//www.miltonbayer.com/font-face/](http://www.miltonbayer.com/font-face/)

我还认真建议您研究一下可以为您完成所有工作的[Google Web Fonts](http://www.google.com/webfonts)。

# java - 使用 Apache Tomcat 模拟网络延迟？

> ID：11038544
> 
> 赞同：3
> 
> 时间：2012-06-14T17:46:03.857
> 
> 标签：java, tomcat, networking, servlets

是否可以将 Apache Tomcat 配置为模拟客户端在通过 localhost 从服务器请求数据时通常具有的网络延迟？我正在尝试测试 Java Servlet 应用程序的前端如何响应响应时间较慢的请求。

我知道我可以进入并添加`Thread.sleep(100)`到我所有的 Servlet Java 源文件中，但我宁愿有一个可以在 Tomcat 中而不是在我的实际应用程序中配置的解决方案。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-14T18:13:46.573

您可以通过在 localhost 上使用代理来模拟网络延迟，该代理会引入延迟、带宽限制甚至丢弃数据包。

DonsProxy 将完成这项工作。 [这是](http://chrisdegiere.com/2010/10/19/simulating-high-latency-low-bandwidth-connections/)一篇很好的文章，描述了如何配置它以模拟网络不佳的用户。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-14T17:54:48.687

您可以实现一个[servlet 过滤器](http://www.oracle.com/technetwork/java/filters-137243.html)并让它拦截所有请求。在每个请求中，您都将执行此 Thread.sleep 或其他操作。对您的 servlet 的所有请求都将被延迟。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-22T17:50:32.733

通过创建阀门，这在 Tomcat 中很容易实现。

创建一个从 tomcat 扩展 ValveBase 类的类。

里面的代码应该是这样的：

```
/**
 * {@inheritDoc}
 */
@Override
public void invoke(final Request request, final Response response) 
                   throws IOException, ServletException {

    if (randomDelay != 0) {
        long delay = minDelay + randomizer.nextInt(randomDelay);
        try {
            if (LOGGER.isDebugEnabled()) {
                LOGGER.debug("sleeping for " + delay + " ms");
            }
            Thread.sleep(delay);
        } catch (InterruptedException e) {
            if (LOGGER.isDebugEnabled()) {
                LOGGER.debug("someone wake me up : " + e.getMessage());
            }
        }
    }

    // let's continue !
    getNext().invoke(request, response);
} 
```

将它编译到一个 jar 中，然后放入 tomcat lib 目录（通常是 {catalina.home}/lib）。

最后在 server.xml 中添加阀门声明：

```
<Server ...>
  <Service name="Catalina">
   <Engine name="Catalina" defaultHost="localhost">
     (...)
     <Host name="localhost" ...>
       <Valve className="tools.tomcat.RandomDelayValve" /> 
```

HIH

# windows - 带有 MmMapIoSpace 的幻数

> ID：11038546
> 
> 赞同：2
> 
> 时间：2012-06-14T17:46:21.330
> 
> 标签：windows, memory-management, driver, kernel

因此，在使用 映射内存空间时`MmMapIoSpace`，我注意到在某个点之后，数据在写入时只是被丢弃了。没有抛出错误、断点甚至错误检查。一切正常，没有任何不良影响。

我决定做一个写/读测试（驱动程序会在每个字节写入 1 以达到*预期*大小的长度），阅读器（用户态）模式将读取并报告 1 的结束位置。

它得出的数字是 3208，这是一个看似不错的整数（/8=401、/256=12 等）

这是怎么回事？为什么我无法映射完整的缓冲区空间？

**编辑**在 64 位中它下降到 2492。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-15T08:52:18.863

我不是专家，但我不明白如何依赖 MmMapIoSpace 来完成您要求的操作，因为无法保证用户空间缓冲区在物理内存中是连续的。

相反，我认为您应该使用[`IoAllocateMdl`](http://msdn.microsoft.com/en-us/library/windows/hardware/ff548263%28v=vs.85%29.aspx)and[`MmProbeAndLockPages`](http://msdn.microsoft.com/en-us/library/windows/hardware/ff554664%28v=vs.85%29.aspx)锁定用户缓冲区，然后[`MmGetSystemAddressForMdlSafe`](http://msdn.microsoft.com/en-us/library/windows/hardware/ff554559%28v=vs.85%29.aspx)将其映射到系统地址空间。[此处描述了](http://msdn.microsoft.com/en-us/library/windows/hardware/gg463199.aspx)此过程。

如前所述，我认为映射失败的点（缓冲区中的 3208/2492 字节）可能只是页面的结尾，但这很容易验证：让用户空间应用程序报告未写入的第一个字节的（虚拟）地址而不是偏移量，并检查它是否是 4096 的倍数。

# php - 如何在一个 MySQL 查询中组合两个 PDO 语句？

> ID：11038547
> 
> 赞同：0
> 
> 时间：2012-06-14T17:46:24.863
> 
> 标签：php, mysql, pdo

根据我现在对 PDO 语句的了解以及我自己在 localhost 和 Google 上的经验 - 在一个查询中使用多个 PDO 语句存在一些困难。比如这种情况：

```
$stmt = $db_people->prepare("SELECT * FROM people WHERE online=1");
$stmt->execute();
$results_people = $stmt->fetch(PDO::FETCH_ASSOC); 
```

在此查询中，我可以执行简单的 PDO 语句，例如 fetch（例如）。但是当我想像这样使用 PDO 语句时：

```
$rows = $stmt->rowCount(); 
```

这是不可能的，并且该语句不会返回正确的行数。当我以另一种方式执行此操作并填充其中一个列名时 - rowCount 像这样正常工作：

```
$stmt = $db_people->prepare("SELECT name FROM people WHERE online=1");
$stmt->execute();
$rows = $stmt->rowCount(); 
```

然后像这样添加 fetch ：

```
$results_people = $stmt->fetch(PDO::FETCH_ASSOC); 
```

在此示例中将无法正常工作。我的问题是 - 如何在一个查询中组合两个不同的 PDO 语句？谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-14T18:28:06.380

答案可能取决于您尝试组合哪些操作。例如，如果您尝试`PDOStatement::rowCount()`与`SELECT`SQL 操作结合使用，那么可能值得注意[`PDOStatement::rowCount()`描述](http://www.php.net/manual/en/pdostatement.rowcount.php)`rowCount()`中的警告，即对于所有数据库中的 SELECT 语句来说，这并不是 100% 可靠的。

如果您尝试解决的问题特别限于计算 SELECT 的结果行，那么另一种方法是使用[`PDOStatement::fetchAll()`](http://www.php.net/manual/en/pdostatement.fetchall.php)并计算返回数组中的行数。

# .net - 预加载 my PictureBox (.net) 所需的图像

> ID：11038550
> 
> 赞同：0
> 
> 时间：2012-06-14T17:46:42.077
> 
> 标签：.net, picturebox, image-preloader

我目前正在我的一种形式上使用`ImageLocation`some `PictureBox`s 的属性。该位置在线，但图像需要在显示之前加载。问题是，图像有时会更改为其他图片，但正因为如此，由于图片尚未加载，它会在几秒钟内不显示任何内容。是否有可能在应用程序启动期间预加载特定的图像链接，以便图像不仅在设置为`ImageLocation`源时加载？

我正在使用 VB.net，但所有 .net 答案都是可用和赞赏的！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-14T20:06:39.693

您应该能够通过使用 Image 属性而不是 ImageLocation 属性来解决此问题。在应用程序启动期间，您可以将图像加载到变量中，当表单加载时，您可以将每个图像变量分配给其各自的 PictureBox 的 Image 属性。

# java - 使用 GSON 序列化 java 对象

> ID：11038553
> 
> 赞同：38
> 
> 时间：2012-06-14T17:47:04.543
> 
> 标签：java, json, gson

我想将此对象序列化为 JSON 字符串

```
public class Person {
   public String id;
   public String name;
   public Person parent;
} 
```

并获得如下结果：

```
{id: 1, name: "Joe", parent: 2} 
```

我试着用

```
Person p = new Person(1, "Joe", new Person(2, "Mike"));
Gson gson = new GsonBuilder()
            .registerTypeAdapter(Persona.class, new PersonSerializer()).create();
String str = gson.toJson(p); 
```

但不是那样，我得到了：

```
"1" 
```

个人序列化器：

```
public class PersonSerializer implements JsonSerializer<Person> {
    public JsonElement serialize(Person src, Type typeOfSrc, ...) {
        return new JsonPrimitive(src.id);
    }
} 
```

欢迎任何建议

谢谢，马里奥

* * *

## 回答 #1

> 赞同：65
> 
> 时间：2012-06-14T18:10:05.473

为了得到你想要的结果，你需要像这样编写序列化程序：

```
public static class PersonSerializer implements JsonSerializer<Person> {
    public JsonElement serialize(final Person person, final Type type, final JsonSerializationContext context) {
        JsonObject result = new JsonObject();
        result.add("id", new JsonPrimitive(person.getId()));
        result.add("name", new JsonPrimitive(person.getName()));
        Person parent = person.getParent();
        if (parent != null) {
            result.add("parent", new JsonPrimitive(parent.getId()));
        }
        return result;
    }
} 
```

结果为

```
 Person p = new Person(1, "Joe", new Person(2, "Mike"));
    com.google.gson.Gson gson = new GsonBuilder().registerTypeAdapter(Person.class, new PersonSerializer())
            .create();
    System.out.println(gson.toJson(p)); 
```

将会

```
{"id":1,"name":"Joe","parent":2} 
```

完整代码：

```
import java.lang.reflect.Type;

import com.google.gson.GsonBuilder;
import com.google.gson.JsonElement;
import com.google.gson.JsonObject;
import com.google.gson.JsonPrimitive;
import com.google.gson.JsonSerializationContext;
import com.google.gson.JsonSerializer;

public class GsonSimpleTest {

    public static class Person {
        public int id;
        public String name;
        public Person parent;

        public Person(final int id, final String name) {
            super();
            this.id = id;
            this.name = name;
        }

        public Person(final int id, final String name, final Person parent) {
            super();
            this.id = id;
            this.name = name;
            this.parent = parent;
        }

        public int getId() {
            return id;
        }

        public void setId(final int id) {
            this.id = id;
        }

        public String getName() {
            return name;
        }

        public void setName(final String name) {
            this.name = name;
        }

        public Person getParent() {
            return parent;
        }

        public void setParent(final Person parent) {
            this.parent = parent;
        }

    }

    public static class PersonSerializer implements JsonSerializer<Person> {
        public JsonElement serialize(final Person person, final Type type, final JsonSerializationContext context) {
            JsonObject result = new JsonObject();
            result.add("id", new JsonPrimitive(person.getId()));
            result.add("name", new JsonPrimitive(person.getName()));
            Person parent = person.getParent();
            if (parent != null) {
                result.add("parent", new JsonPrimitive(parent.getId()));
            }
            return result;
        }
    }

    public static void main(final String[] args) {
        Person p = new Person(1, "Joe", new Person(2, "Mike"));
        com.google.gson.Gson gson = new GsonBuilder().registerTypeAdapter(Person.class, new PersonSerializer())
                .create();
        System.out.println(gson.toJson(p));
    }

} 
```

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2016-10-24T08:49:40.560

你刚刚得到了答案。但是，我想通过使用 @JsonAdapter 注释的另一种方式与您分享。

像这样注释 Person bean

```
@JsonAdapter(PersonAdatper.class)
public class Person {
    public int id;
    public String name;
    public Person parent;
} 
```

创建自定义适配器

```
public  class PersonAdatper extends TypeAdapter<Person> {

    @Override
    public void write(JsonWriter writer, Person value) throws IOException {
        writer.beginObject();

        writer.name("id").value(value.getId());
        writer.name("name").value(value.getName());
        Person parent = value.getParent();
        if (parent != null) {
            writer.name("parent").value(parent.getId());
        }       
        writer.endObject();
    }

    @Override
    public Person read(JsonReader in) throws IOException {
        // do something you need
        return null;
    }

} 
```

将对象序列化为 json 字符串

```
Person p = new Person(1, "Joe", new Person(2, "Mike"));
Gson gson = new Gson();    
String result = gson.toJson(p); 
```

它产生如下输出：

```
{"id":1,"name":"Joe","parent":2} 
```

我从教程[GSON Annotations Example using JsonAdapter中找到了这种方式](http://javabycode.com/java-core/json-tutorial/gson-annotations-example-using-jsonadapter.html)

# c# - 删除 datagridview 图像列最后一行中的红色 x

> ID：11038555
> 
> 赞同：0
> 
> 时间：2012-06-14T17:47:07.367
> 
> 标签：c#, winforms, datagridview

我尝试使用以下两个代码示例，并且都删除了红色 x，但在显示时会导致无限循环。一旦由于某种原因将单元格设置为 RowPrePaint 中的 AddNewIndex .bmp，它就会再次调用 RowPrePaint。然后 e 再次为 0 并继续循环。有谁知道将值设置为 AddNewIndex .bmp 而不会导致 RowPrePaint 再次执行的方法？（或者去除红色 x 的不同方法？）另外，我下次知道，是什么导致 RowPrePaint 被多次调用？

```
 private void tableDocTypes_RowPrePaint(object sender, DataGridViewRowPrePaintEventArgs e)
    {
        if (e.RowIndex >= tableDocTypes.NewRowIndex)
            tableDocTypes.Rows[e.RowIndex].Cells[columnDocTypeImage.Index].Value = Properties.Resources.AddNewIndex;
    }

    private void tableDocTypes_RowPrePaint(object sender, DataGridViewRowPrePaintEventArgs e)
    {
        if (tableDocTypes.Rows[e.RowIndex].IsNewRow) 
            tableDocTypes.Rows[e.RowIndex].Cells[columnDocTypeImage.Index].Value = Properties.Resources.AddNewIndex;
    } 
```

还在构造函数中添加以下内容：

```
 InitializeComponent();
        tableDocTypes.Columns[columnDocTypeImage.Index].DefaultCellStyle.NullValue = Properties.Resources.AddNewIndex; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-14T18:19:27.963

当需要重新绘制行时，会触发 RowPrePaint。如果您连续修改某些内容，则需要重新绘制该行，递归无限。

我不完全清楚您要完成什么，但我的猜测是您想更改为特定单元格显示的内容。最好的方法之一是处理 CellFormatting 事件。在这种情况下，您更改传入`DataGridViewCellFormattingEventArgs.Value`的数据，而不是基础数据。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-14T19:17:44.783

如果您使用 DataSet 填充 DataGridView，请在创建表时添加以下代码：

```
DataTable dt = new DataTable();

dt.Columns.Add("ImageColumn");
dt.Columns["ImageColumn"].DataType = typeof(Byte[]); 
```

即使您从数据库中填充，也可以在将数据添加到表之前进行设置。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-09-28T06:46:57.160

```
Private Sub DGV_CellPainting(sender As Object, e As System.Windows.Forms.DataGridViewCellPaintingEventArgs) Handles DGV.CellPainting
    'get rid of that annoying red x
    If e.ColumnIndex = sender.Columns("ImageColumn").Index Then
        If e.RowIndex = sender.RowCount - 1 Then
            sender(e.ColumnIndex, e.RowIndex).Value = Nothing
        End If
    End If
End Sub 
```

尝试使用上面的 CellPainting 代码来摆脱这个非常烦人且耗时的错误。

# c++ - 在 C++ 中混淆混合数据类型

> ID：11038558
> 
> 赞同：1
> 
> 时间：2012-06-14T17:47:41.383
> 
> 标签：c++

我试图弄清楚这段代码发生了什么

```
int i = 10, j = 7, l;
unsigned int k;
double q = 3.56;
char c;

c = q * i * j;
l = c;
std::cout << l << "\n"; // result is -7
std::cout << c << "\n"; // result is ? 
```

我不明白为什么 l 结果是“7”，而对于 c，无论我更改值 i，j，c 的结果总是“？”。谁能指出我的原因？谢谢

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-14T17:51:37.657

结果`3.56 * 10 * 7`是 249.2。

如果`char`您系统上的类型是带符号的 8 位值，范围从 -128 到 127，那么尝试分配 249.2 将导致溢出。如果您分配给 a`int`而不是 a `char`，它将被存储为 249。

问号是因为 -7 不是可打印字符。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-14T17:51:24.710

char 的默认显示方法是它的 ascii/unicode 值。对于无法显示的值，一个 ? 显示。对于其他人，将显示等效字符。例如，65 的 char 值将显示`A`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-14T17:52:57.457

您将值 249.2 写入超出范围的有符号字符，因此将其转换为 ? 特点。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-14T17:53:54.023

3.56*7*10 是 249.200.....2。将其放入 char 时变为 -7，因为 char 是 8 位有符号值。-7 来自 249（截断）- 256。

# spring - Spring MVC 3 基于用户偏好语言的消息属性编程加载

> ID：11038561
> 
> 赞同：0
> 
> 时间：2012-06-14T17:47:55.683
> 
> 标签：spring, spring-mvc

我有 i18n 的基本 Spring MVC 3 设置，我可以根据用户在请求中传递的语言在页面上显示标签。例如：url?lang=fr、url?lang=de 等...

但实际要求是我必须为每个语言环境维护 2 个属性文件，例如对于法语，我将拥有 messages_fr_fr.properties 和 messages_fr_en.properties。同样对于德国语言环境，我将拥有messages_de_de.properties 和messages_de_en.properties。

这意味着当法语用户登录时，页面将显示法语标签，但如果他愿意，他可以从下拉菜单切换到英语。这需要编程加载消息属性，我该怎么做？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-14T18:17:24.950

从[参考资料](http://static.springsource.org/spring/docs/3.0.x/spring-framework-reference/html/mvc.html#mvc-localeresolver)来看，我相信 using`LocaleChangeInterceptor`可以帮助您在运行时更改语言并同样加载消息。[此处](http://www.mkyong.com/spring-mvc/spring-mvc-internationalization-example/)描述了一个更详细的示例。

# java - 任务在服务器上运行时 HTTP 请求超时

> ID：11038563
> 
> 赞同：1
> 
> 时间：2012-06-14T17:48:00.493
> 
> 标签：java, jakarta-ee, tomcat, spring-mvc

我有一个在 Tomcat 和 Spring 3.0 上运行的基于 Java EE 的 Web 应用程序。我的网页发送删除大量记录的请求。当请求在后台运行时，我收到超时错误消息：“发生内部错误”。

我认为这是浏览器超时问题。有没有办法解决它？在 Tomcat 的 web.xml 中，会话超时设置为 30。

我是否需要使用一些 Ajax 回调而不是发布请求？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-14T17:56:08.487

你在Tomcat前面使用Apache HTTP web server吗？

有几层超时：

1.  在 apache web 服务器级别（请参阅 mod_proxy 的超时设置，请参阅 mod_jk 的 worker.properties 文件）
2.  在 tomcat 连接器级别（有关套接字超时，请参阅 tomcat conf/server.xml）。
3.  在 web 应用程序会话过期级别（请参阅 tomcat webapps/WEB-INF/web.xml 会话超时设置
4.  数据库超时 - 进行长时间的数据库查询时，发生数据库查询超时并将您吐出。

这是做什么：

1.  确保您有正确的超时单位。有些事情使用秒，一些分钟，一些毫秒。确保你有正确的。
2.  使用 tcpdump 和连接到 Tomcat 的 java 调试器查看超时发生的位置。Tcpdump 很有用，因为您可以查看在发生超时之前一直在进行的网络流量。Java 调试器很有帮助，因为您需要查看服务器级别的请求到底发生了什么。

从这些中，您可以找到超时的最终来源并使用该信息更新此票证。

# ruby-on-rails-3 - 设计路线以仅使用自定义登录页面

> ID：11038564
> 
> 赞同：1
> 
> 时间：2012-06-14T17:48:02.640
> 
> 标签：ruby-on-rails-3, devise

我正在尝试学习设计，并且似乎遇到了一个与 SO 上的许多问题几乎相同的问题，但只是略有不同，以至于我在这些问题的线程中没有得到太大的牵引力。

我有一个非常简单的应用程序。用户可以登录和注销（并且启用了“忘记密码”的设计 - 我现在不关心它）就是*这样*。他们不能注册，不能编辑他们的个人资料，只能更改密码，除了登录和退出之外，他们不能做任何事情。（目前，帐户创建将在命令行中手动处理。）

我非常希望用户可以登录的唯一页面是“/”（`root_path`）。我已经让它工作了，你可以从“/”登录，这很棒。我遇到的问题是，如果您从 root_path 登录页面错误地输入了您的用户/密码组合，它会自动将您发送到 Devise 登录页面以继续尝试登录。**如何使 Devise 重定向到 root_path登录失败？**

这是我的路线 - 它们可能不是最佳的或配置不正确，我会很感激修复它们的指针：

```
root to: "core_pages#splash"

devise_for :users, skip: [:sessions]
as :user do
  # get 'signin' => 'devise/sessions#new', as: :new_user_session
  post 'signin' => 'devise/sessions#create', as: :user_session
  delete 'signout' => 'devise/sessions#destroy', as: :destroy_user_session,
    via: Devise.mappings[:user].sign_out_via
end

match '/home' => 'core_pages#home' 
```

请注意注释掉的“获取登录”行。系统在没有这条线的情况下工作，但令人惊讶的是（对我来说）“GET /signin”会导致 HTTP 400（OK）响应并呈现 Devise 登录模板。我希望它返回某种“无效请求”，或者只是默默地将用户重定向到`root_path`.

`rake routes`在这些路线上运行会给出：

```
 root        /                              core_pages#splash
       user_password POST   /users/password(.:format)      devise/passwords#create
   new_user_password GET    /users/password/new(.:format)  devise/passwords#new
  edit_user_password GET    /users/password/edit(.:format) devise/passwords#edit
                     PUT    /users/password(.:format)      devise/passwords#update
        user_session POST   /signin(.:format)              devise/sessions#create
destroy_user_session DELETE /signout(.:format)             devise/sessions#destroy
                home        /home(.:format)                core_pages#home 
```

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-16T03:12:17.030

您可以将您的`root_path`指向 Devise Sessions 控制器：“devise/sessions#new”（并将您的主视图移动到该页面）。此外，您可以将此行添加到您的路线中。

`get "/" => "devise/sessions#new", :as => :user_session`

这样做，当登录不成功时，您将返回主页（现在位于 devise/sessions/new 上）。

# xml - 如何从一个 perl 脚本调用多个 perl 脚本并生成输出？

> ID：11038567
> 
> 赞同：2
> 
> 时间：2012-06-14T17:48:09.267
> 
> 标签：xml, perl, xslt

我编写了一个以 xml 格式返回输出的多个脚本。我有 xsl 文件，它将为每个脚本从 xml 打印出一个漂亮的表。但是我需要编写一个脚本，在其中调用所有这些多个脚本并创建一个输出。？

这可以做到吗？如果可以的话，请给我一个如何做到这一点的例子。

```
 #Example Script 1

use strict;
use warnings;
use Data::Dumper;
use XML::Simple;
use Getopt::Long;

my $output = '';
my $debug = 0;
my $path;
GetOptions('path=s' => \$path,'output=s' => \$output, 'debug=i' => \$d
+ebug);

if($output eq ''){
    die ("parameter --output=s is missing");
}     
open my $xmloutput, ">", $outputFile or die "can not open $outputFile 
+";
 print $xmloutput "<?xml version=\"1.0\" encoding=\"UTF-8\"?>\n<?xml-s
+tylesheet type=\"text/xsl\" href=\"book.xsl\"?>\n<Books>\n";

my $parser = new XML::Simple;
my $data = $parser->XMLin("$path");
print $xmloutput " <bookDetails> \n";
print $xmloutput "  <bookName>$data</bookName> \n";
print $xmloutput " </bookDetails> \n";
print $xmloutput " </Books> \n";
close $xmloutput; 
```

示例 2

```
EXAMPLE 2
use strict;
use warnings;
use Data::Dumper;
use XML::Simple;
use Getopt::Long;

my $output = '';
my $debug = 0;
my $path;
GetOptions('path=s' => \$path,'output=s' => \$output, 'debug=i' => \$d
+ebug);

if($output eq ''){
    die ("parameter --output=s is missing");
}     
open my $xmloutput, ">", $outputFile or die "can not open $outputFile 
+";
 print $xmloutput "<?xml version=\"1.0\" encoding=\"UTF-8\"?>\n<?xml-s
+tylesheet type=\"text/xsl\" href=\"Piano.xsl\"?>\n<Piano>\n";

my $parser = new XML::Simple;
my $data = $parser->XMLin("$path");
print $xmloutput " <PianoDetails> \n";
print $xmloutput "  <PianoName>$data</PianoName> \n";
print $xmloutput " </PianoDetails> \n";
print $xmloutput " </Piano> \n";
close $xmloutput; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-14T17:54:21.227

编写一个控制脚本，按顺序运行您的其他每个工具。

如果子工具将它们的 XML 重新格式化输出写入`STDOUT`您可以捕获它并使用[管道打开](http://perldoc.perl.org/perlopentut.html#Pipe-Opens)语法在您的控制脚本中重新格式化它。如果他们保存文件，您需要收集每个文件，按摩并合并，然后清理。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-14T17:58:23.330

[您可以使用require](http://perldoc.perl.org/functions/require.html)依次运行多个 perl 脚本，无需使用系统调用。可以通过以下方式完成：

```
my @scripts_to_run = ('first.pl', 'second.pl', 'third.pl');
for my $script (@scripts_to_run) {
  require $script;
} 
```

...虽然有些东西告诉我这实际上应该用一个脚本来完成，只是用不同的参数调用。) 该脚本可以保存为模块，在编译时只包含*一次*，`use`然后使用您喜欢的任何参数（可能是文件名）作为模块方法调用。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-14T17:53:15.977

听起来您需要使用反引号（`）。

```
my $xmlout1 = `perl xmlscript1.pl`;
my $xmlout2 = `perl xmlscript2.pl`;
my $xmlout3 = `perl xmlscript3.pl`; 
```

等等

# macos - 无法在 mac 上为 csipsimple 配置被子

> ID：11038573
> 
> 赞同：3
> 
> 时间：2012-06-14T17:48:41.517
> 
> 标签：macos, date, sed, quilt

我正在尝试将被子配置为能够进行制作和安装，以便在 mac 上构建 csipsimple (http://code.google.com/p/csipsimple/wiki/HowToBuild)，但是，我遇到了以下问题当我尝试配置被子时。我安装了macports。

```
Sorry, you have a version of sed which doesn't understand constructs
of the form (foo|bar).  quilt needs it.  If you have access to
a version of sed which does understand such constructs, you can supply
its path with the '--with-sed=' option. 
```

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-03T10:06:29.470

安装 gsed

```
sudo port install gsed 
```

然后

```
./configure --with-sed=gsed 
```

# c# - 为 Visual Studio 和 SVN 创建本地数据库

> ID：11038574
> 
> 赞同：3
> 
> 时间：2012-06-14T17:48:44.637
> 
> 标签：c#, visual-studio, connection

目前我正在试验新的 Visual Studio 2012 和 MVC4。我想创建一个 .mdf 数据库并为其使用迁移。迁移部分在这里没有问题，但是在 subversion 上共享项目时，当其他人（在另一台 pc 上）打开它时，它会说键 'attachdbfilename' 的值无效。

我认为连接字符串有问题，但我不知道是什么。通过运行该项目，它会自动创建一个名为“CarDealer.DAL.CarDealerContext.mdf”的数据库。我手动将默认连接字符串编辑为以下内容：

```
<add name="DefaultConnection" providerName="System.Data.SqlClient" connectionString="Data Source=(LocalDB)\v11.0;AttachDbFilename=|DataDirectory|CarDealer.DAL.CarDealerContext.mdf;Integrated Security=True" /> 
```

如果有人可以更改此连接字符串，我会很高兴，以便我和同事可以在不同的 PC 上处理该项目 :) 在此先感谢。

只是让你知道。另一个人正在使用 VS 2010，它是否必须与 localDb v11 做一些事情？

- 更新 -

好吧，另一位同事对其进行了测试，我也在另一个系统上进行了测试。我们也得到了一个错误，但它不是同一个。它是以下[d.pr/i/g6NM](http://d.pr/i/g6NM)。使用以下连接字符串：

```
< add name="DefaultConnection" providerName="System.Data.SqlClient"  connectionString="Data Source=.\SQLExpress;AttachDbFilename=|DataDirectory|\CarDealer.DAL.CarDealerCont‌​ext.mdf;Integrated Security=True" /> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-14T17:52:19.853

您缺少反斜杠：

```
|DataDirectory|CarDealer.DAL.CarDealerContext.mdf 
```

应该

```
|DataDirectory|\CarDealer.DAL.CarDealerContext.mdf 
```

编辑：

如果他使用的是 VS2010，可能不喜欢 localdb。尝试改用 SQL Express 连接，看看是否能解决问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-18T21:18:37.080

我无法找出问题所在。使用 Visual Studio 2012 可能为时过早。我认为问题是，如前所述，是由不是最新的元素引起的。我只是在 VS 2010 中重建项目，并将继续这个项目..

# android - 我在这个简单的 android 代码中缺少什么？

> ID：11038578
> 
> 赞同：1
> 
> 时间：2012-06-14T17:49:04.153
> 
> 标签：android, multithreading

我试图做其他事情，但继续删除代码，认为简化事情将有助于识别我的错误。这就是我剩下的（经过大量简化），但我仍然不明白为什么它不应该这样做！

```
public class MyOwnTimerActivity extends Activity {

    int timeLeft = 5;
    TextView timerTextView;

    /** Called when the activity is first created. */
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);
        Button timerButton = (Button) findViewById(R.id.button1);
        timerTextView = (TextView) findViewById(R.id.timerText);

        Thread timer = new Thread() {
            public void run() {
                try {
                    sleep(3000);
                } 
                catch (InterruptedException e) {
                    e.printStackTrace();
                }
                finally{
                    timerTextView.setText("something");
                }
            }
        };
        timer.start();
    }
} 
```

错误：应用程序在 3 秒后崩溃，即在计时器关闭后。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-14T17:52:32.030

啊，是的））这是因为您尝试从非 UI 线程修改 UI

# 更新：

有几种方法可以从另一个线程修改 UI：

*   使用`Handler`具有覆盖`handleMessage()`方法 的类*   使用`Activity`带有调用`runOnUI()`方法的类，将`Runnable`对象传递`run()`给您修改 UI 的方法*   使用`View.post()`或`View.postDelayed()`方法

    在您的情况下，最后一个变体是最方便的。以这种方式修改您的代码：

    ```
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);
        Button timerButton = (Button) findViewById(R.id.button1);
        timerTextView = (TextView) findViewById(R.id.timerText);
        timerTextView.postDelayed(
            new Runnable() {
               @Override
               run() {
                   timerTextView.setText("something");
               }
            }, 3000);
    } 
    ```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-14T17:53:18.327

您不应该从工作线程更改 UI。使用在主线程上初始化的处理程序，并使用临时 Runnable 在主线程上执行 setText()。

```
Handler h = new Handler();
Thread timer = new Thread() { 
//...
    finally
    {
         h.post(new Runnable(){
             public void run()
             {
                 timerTextView.setText("something"); 
             }
         });
     } 
```

事实上，整个片段可以使用 Handler.postDelayed() 重写。但是你最终可能会想用线程做更多有趣的事情。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-14T17:54:55.867

您是否尝试过使用 runOnUI 从 UI 线程设置文本？你可以这样做：

```
runOnUiThread(new Runnable() { 
    public void run() 
    { 
        timerTextView.setText("something");
    } 
 }); 
```

请记住，您对 timerTextView 的引用以及您想要显示的任何文本都必须修改为最终变量，以便从另一个线程引用它。

# node.js - 为 ARM6 (Raspberry Pi) 交叉编译 Node.js

> ID：11038579
> 
> 赞同：25
> 
> 时间：2012-06-14T17:49:06.487
> 
> 标签：node.js, arm, cross-compiling, v8, raspberry-pi

我正在尝试让 node.js v0.7.9 为树莓派编译，但由于 node 和 v8 相当大，我希望能够在另一台更强大的 PC 上进行交叉编译。我正在使用`arm-bcm2708-linux-gnueabi`来自[https://github.com/raspberrypi/tools](https://github.com/raspberrypi/tools)的 linux-x86 工具链，并已使用它们成功地为系统构建其他可执行文件。我最终设置了 CC、CXX、CPP、STRIP、OBJCOPY 等。变量到环境变量中的工具链等价物并运行 configure with:`./configure --dest-cpu=arm --without-snapshot`以获得最终的可执行文件。将其复制到系统并运行它会产生以下错误：

```
Extension or internal compilation error at line 0.
Segmentation fault 
```

`node --version`但是，对于任何非 JavaScript 任务（如和）都不会发生分段错误`node --help`。是否有任何我可能缺少的 CFLAGS/CXXFLAGS 导致此问题？有点迷茫……

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-06-21T21:29:34.320

NodeJS 可用于一些 Linux 发行版的预编译： [https ://github.com/joyent/node/wiki/Installing-Node.js-via-package-manager](https://github.com/joyent/node/wiki/Installing-Node.js-via-package-manager)

由于 NodeJS 仍处于 Debian 测试阶段，为了在 Debian wheezy 下在我的 Raspberry Pi 上安装 NodeJS，我这样做：

```
sudo su
echo deb ftp://ftp.dk.debian.org/debian/ sid main > /etc/apt/sources.list.d/sid.list
apt-get update
apt-get install nodejs
rm /etc/apt/sources.list.d/sid.list
apt-get update
exit 
```

NodeJS 在我的 Raspberry Pi 上运行良好且稳定。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-06-29T22:33:55.853

请注意 - 这对我来说非常有用，但没有安装 NPM。因此，如果您想要 NPM（我认为您肯定会这样做），请确保运行

apt-get 安装 npm

在从更新列表中删除更新位置之前安装节点之后。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-10-13T12:43:39.653

自从最初提出这个问题以来，我一直在研究这个问题，甚至添加了一些补丁来帮助自动检测交叉编译器设置。存储库中的 Node.js（目前）是一个相当旧的版本，可能支持也可能不支持完整的硬浮点 (VFP) 架构。

有关完整详细的 HOWTO，请参阅 Nathan Rajlich 在[http://n8.io/cross-compiling-nodejs-v0.8/上的文章](http://n8.io/cross-compiling-nodejs-v0.8/)

[我已经在https://gist.github.com/3245130](https://gist.github.com/3245130)为其他不想为相同硬件经历所有这些麻烦的人发布了二进制文件

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2014-08-18T21:11:48.743

这是我编写的使用 Jenkins 为 ARMv6 (Raspbery Pi) 自动交叉编译 NodeJS 的脚本。

[https://gist.github.com/hertzg/12c2d7fc40f68ff6deeb](https://gist.github.com/hertzg/12c2d7fc40f68ff6deeb)

我使用了@Adam MW 的“包装”片段

该脚本将自动下载所需的所有内容并开始构建。

请注意，`v0.10.30`由于此问题，当前 ( ) 版本将无法编译： [https ://github.com/joyent/node/issues/8062#issuecomment-52541037](https://github.com/joyent/node/issues/8062#issuecomment-52541037)

运行`_PARAMS_NODEJS_SOURCE_ARCHIVE_URL=http://nodejs.org/dist/v0.10.29/node-v0.10.29.tar.gz`以获取最新的可交叉编译版本。

```
#!/bin/bash

set -e
set -x

### IF we dont have archive url prefix
if [ -z "$_PARAMS_NODEJS_SOURCE_ARCHIVE_URL" ]; then
    _PARAMS_NODEJS_SOURCE_ARCHIVE_URL=$(wget -qO- http://nodejs.org/dist/latest/ | egrep -o 'node-v[0-9\.]+.tar.gz' | tail -1);
    _PARAMS_NODEJS_SOURCE_ARCHIVE_URL="http://nodejs.org/dist/latest/"$_PARAMS_NODEJS_SOURCE_ARCHIVE_URL
fi

if [ -z "$_PRAMS_RPI_TOOLS_SOURCE_ARCHIVE_URL" ]; then
    _PRAMS_RPI_TOOLS_SOURCE_ARCHIVE_URL="https://github.com/raspberrypi/tools/archive/master.tar.gz"
fi;

NODEJS_SOURCE_ARCHIVE_FILENAME=$(basename $_PARAMS_NODEJS_SOURCE_ARCHIVE_URL)
NODEJS_SOURCE_DIRECTORY=${NODEJS_SOURCE_ARCHIVE_FILENAME%.tar.gz}
#Download NodeJS
echo "-> Searching for NodeJS "$NODEJS_SOURCE_ARCHIVE_FILENAME;
if [ ! -e "$PWD/$NODEJS_SOURCE_ARCHIVE_FILENAME" ]; then
    echo "--> Downloading from "$_PARAMS_NODEJS_SOURCE_ARCHIVE_URL;
    wget --no-check-certificate -O $NODEJS_SOURCE_ARCHIVE_FILENAME $_PARAMS_NODEJS_SOURCE_ARCHIVE_URL
    echo "--> Download finished!"
fi;

echo "--> Extracting"
rm -rf $NODEJS_SOURCE_DIRECTORY
tar --overwrite -xf $NODEJS_SOURCE_ARCHIVE_FILENAME

echo "--> Linking"
ln -snf "$PWD/$NODEJS_SOURCE_DIRECTORY" "$PWD/node"
echo "-> Done!"

echo "-> Searching Raspberry Pi Toolset";
if [ ! -d "$PWD/rpi" ]; then

    if [ ! -e "$PWD/rpi-tools.tar.gz" ] || [ -s "$PWD/rpi-tools.tar.gz" ]; then
        echo "--> Downloading from "$_PRAMS_RPI_TOOLS_SOURCE_ARCHIVE_URL
        wget --no-check-certificate -O "rpi-tools.tar.gz" $_PRAMS_RPI_TOOLS_SOURCE_ARCHIVE_URL
        echo "--> Download finished"
    else
        echo "--> Found rpi-tools.tar.gz."
    fi

    echo "--> Extracting"
    tar xf "rpi-tools.tar.gz"
    echo "--> Linking tools-master to rpi"
    ln -snf "$PWD/tools-master" "$PWD/rpi"
else
    echo "-> found"
fi;
echo "-> Done!"

echo "-> Cross-Compile..."

echo "--> Setup ENV"
export PATH="$PWD/rpi/arm-bcm2708/arm-bcm2708hardfp-linux-gnueabi/bin:"$PATH
export HOST="arm-bcm2708hardfp-linux-gnueabi"
export CC="${HOST}-gcc"
export CXX="${HOST}-g++"
export AR="${HOST}-ar"
export RANLIB="${HOST}-ranlib"
export LD="${HOST}-ld"
export CPP="${HOST}-gcc -E"
export STRIP="${HOST}-strip"
export OBJCOPY="${HOST}-objcopy"
export OBJDUMP="${HOST}-objdump"
export NM="${HOST}-nm"
export AS="${HOST}-as"

"${HOST}-gcc" --version
echo "--> Waiting 5s to contiue"
pushd "$PWD/node"
sleep 5

echo "--> Clean"
make clean

echo "--> Configure"
./configure --prefix=/ --without-snapshot --dest-cpu=arm --dest-os=linux

echo "--> Build"
VERSION=${NODEJS_SOURCE_DIRECTORY##node-}
export BINARYNAME=node-${VERSION}-linux-arm-armv6j-vfp-hard
mkdir ${BINARYNAME}
make install DESTDIR=${BINARYNAME} V=1 PORTABLE=1

echo "--> Pack"
cp README.md ${BINARYNAME}
cp LICENSE ${BINARYNAME}
cp ChangeLog ${BINARYNAME}
tar -czf ${BINARYNAME}.tar.gz ${BINARYNAME}

echo "--> Cleanup"
popd
mv $PWD"/node/${BINARYNAME}.tar.gz" "./"
echo "-> Done!" 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-09-13T06:24:36.807

我设法交叉编译nodejs 0.10版并在飞思卡尔i.MX6上运行它。我创建了一个交叉编译脚本来设置环境和执行 make。该脚本基本上只是为我的交叉编译工具设置了 CC、CXX 等变量，并为编译器设置了拱门和其他一些标志。然后它使用 dest-cpu=arm 运行配置，我尝试也链接到 V8 库（我也交叉编译），但是当我在配置中包含该标志和路径时它不会编译。当我编译节点时，它是否编译了它自己的 V8，因为我设法在不指向 V8 库的情况下进行编译（我可以看到它在编译过程中正在编译一些 V8 的东西）？

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2014-01-07T22:01:11.777

只是提醒一下，您现在可以这样做：

```
sudo apt-get install nodejs npm 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2015-02-19T17:36:54.320

对于节点 0.12，[http://conoroneill.net//download-compiled-version-of-nodejs-0120-stable-for-raspberry-pi-here](http://conoroneill.net//download-compiled-version-of-nodejs-0120-stable-for-raspberry-pi-here)有说明 + 预构建的二进制文件。

# ios - 如何将 UIActivityMonitor 添加到我的界面？

> ID：11038580
> 
> 赞同：0
> 
> 时间：2012-06-14T17:49:08.770
> 
> 标签：ios, uiwebview, uiactivityindicatorview

我有一个包含 UIWebView 的视图控制器。我想在右上角显示一个活动指示器，以便用户知道网页正在加载；但是在构建和运行时，活动监视器不显示。

我有一个名为 webView 的 UIWebView 插座和一个名为 activityIndi​​cator 的 UIActivityIndi​​catorView 插座。

这是我的实现：

```
- (void)viewDidLoad
{
    [super viewDidLoad];
    webView.delegate=self;
    [self.view addSubview:activityIndicator];
    NSString *fullURL = @"http://www.oncologyeducation.com"; NSURL *url = [NSURL URLWithString:fullURL]; NSURLRequest *requestObj = [NSURLRequest requestWithURL:url]; 
    [webView loadRequest:requestObj];
}

- (void)viewDidUnload
{
    [self setWebView:nil];
    [self setActivityIndicator:nil];
    [self setActivityIndicator:nil];
    [super viewDidUnload];
}

- (BOOL)shouldAutorotateToInterfaceOrientation:(UIInterfaceOrientation)interfaceOrientation
{
    if (interfaceOrientation==UIInterfaceOrientationPortrait || interfaceOrientation==UIInterfaceOrientationPortraitUpsideDown) {
        return NO;
    } else {
        return YES;
    }
}

- (BOOL)webView:(UIWebView *)webView shouldStartLoadWithRequest:(NSURLRequest *)request navigationType:(UIWebViewNavigationType)navigationType {
    return YES;
}

-(void) webViewDidStartLoad:(UIWebView *)webView{
    NSLog(@"load started");
    [activityIndicator startAnimating];
    activityIndicator.hidden = NO;
}

-(void) webViewDidFinishLoad:(UIWebView *)webView{
    NSLog(@"load finished");
    [activityIndicator stopAnimating];
    activityIndicator.hidden = YES;
}

-(void) webView:(UIWebView *)webView didFailLoadWithError:(NSError *)error{
    [activityIndicator stopAnimating];
    activityIndicator.hidden = YES;
}
@end 
```

在我的故事板上，我有一个连接到文件所有者的活动指示器视图。感谢您的任何建议！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-15T13:26:10.630

@CodaFi - 你是对的，那没有必要。无需添加子视图。

任何想要重用代码的人，都丢掉这行：

```
[self.view addSubview:activityIndicator]; 
```

事实证明，xCode 的行为有点不稳定，并且在编译时将错误的情节提要复制到项目中。我重命名了我的故事板，在项目设置中将其设置为新名称，并且指示器高兴地旋转！

# php - PHP：Postgresql 查询中的变量

> ID：11038584
> 
> 赞同：1
> 
> 时间：2012-06-14T17:50:00.033
> 
> 标签：php, postgresql

假设我有这两个变量

```
$number = 1;
$word = "one"; 
```

我想在 pg_query 中使用它们。

这就是我所拥有的：

```
$result = pg_query($con, 'UPDATE a SET z = ARRAY[{$number}] WHERE word = {pg_escape_literal($word)}'); 
```

但它不起作用..

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-14T17:52:27.797

要使用字符串插值，您必须使用双引号：

```
 $x = 3;
 "This works: $x"     // This works: 3
 'This does not: $x'; // This does not: $x 
```

您也无法将函数调用插入到字符串中，就像您尝试使用`{pg_escape_literal($word)}`. 您需要先转义变量，然后再将其插入字符串：

```
$word_esc = pg_escape_literal($word);
$result = pg_query(
  $con,
  "UPDATE a SET z = ARRAY[$number] WHERE word = $word_esc"
); 
```

你也可以使用`sprintf`：

```
$result = pg_query(
  $con,
  sprintf(
    "update a set z=ARRAY[%d] where word = %s",
    $number,
    pg_escape_literal($word)
  )
); 
```

但最好和最安全的是使用`pg_query_params`函数，因为您不会转义任何参数。而且很容易忘记并将您的站点暴露给 SQL 注入攻击。

```
$result = pg_query_params(
  'update a set z=ARRAY[$1] where word = $2',
  array($number,$word)
) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-14T17:51:50.107

使用双引号而不是单引号：双引号字符串[将变量扩展为它们的值](http://www.php.net/manual/en/language.types.string.php#language.types.string.parsing)。

# sharepoint - 有没有办法在共享点（谷歌可视化）Web 部件的饼图中超链接切片？

> ID：11038586
> 
> 赞同：-1
> 
> 时间：2012-06-14T17:50:01.780
> 
> 标签：sharepoint, web-parts, google-visualization

我正在使用 Microsoft Sharepoint 和 Google Analytics - 可视化集成。目前我有一个饼图。我的问题是是否有办法将图表中的切片超链接，以便它们可以链接到特定对象，并且有没有办法以最大切片的格式组织图例到最低？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-15T05:30:38.227

如果您使用的是 Google 图表工具库，您可以选择可供选择的饼图。

您所要做的就是收听`select` [饼图上的事件](https://developers.google.com/chart/interactive/docs/gallery/piechart#Events)。比使用`getSelection()`饼图的方法来获取选定的行。比你回到你的 dataTable 并根据所选行获取你想要的数据。

```
function drawVisualization() {
  // Create and populate the data table.
  var data = google.visualization.arrayToDataTable([
    ['Task', 'Hours per Day'],
    ['Work', 11],
    ['Eat', 2],
    ['Commute', 2],
    ['Watch TV', 2],
    ['Sleep', 7]
  ]);

  // Create and draw the visualization.
  var chart = new google.visualization.PieChart(document.getElementById('visualization'))
  chart.draw(data, {title:"So, how was your day?"});
  google.visualization.events.addListener(chart, 'select', function(){
    var row = chart.getSelection()[0].row;
    var element = data.getValue(row, 0);
    alert('You just selected: ' + element);
  });
}
​ 
```

例子：

[http://savedbythegoog.appspot.com/?id=7b92cc41120837bc319a69144925122670167cd7](http://savedbythegoog.appspot.com/?id=7b92cc41120837bc319a69144925122670167cd7)

在我的示例中，我只提醒选择的值。但是您可以使用 javascript 将用户重定向到不同的页面：

```
window.location.href = 'http://www.example.com'; 
```

# c++ - 延迟文件数据几分钟

> ID：11038587
> 
> 赞同：0
> 
> 时间：2012-06-14T17:50:04.917
> 
> 标签：c++, linux, bash, unix

在我的机器上，我有一个应用程序每秒重新生成的文件——它每次都包含不同的数据，因为它基于一些实时数据。

我想要一份此文件的副本，其中包含**原始文件 5 分钟前所包含的内容**。这在某种程度上很容易实现吗？我很乐意使用一些 BASH 脚本魔法来做到这一点，但是向该原始应用程序（用 c++ 编写）添加一些明智的、内存高效的代码也会让我满意 :)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-15T01:56:53.493

您用[linux](/questions/tagged/linux "显示标记为“linux”的问题")和[unix](/questions/tagged/unix "显示标记为“unix”的问题")标记了您的问题。此答案仅适用于 Linux。

您可以使用[inotify-tools](https://github.com/rvoicilas/inotify-tools/wiki/) ( [`inotifywait` `man`page](http://linux.die.net/man/1/inotifywait) ) 或[incron](http://incron.aiken.cz/) ( [`incrontab(5)` `man`page](http://linux.die.net/man/5/incrontab) ) 来查看目录并在文件关闭时制作文件副本。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-14T17:59:48.307

如果磁盘空间不是问题，您可以让程序每秒创建一个新文件，而不是写入同一个文件。您总共需要 300 个文件（`5 min * 60 sec/min)`. 要写入的文件名是`$somename + timestamp() % 300`。这样，要在 5 分钟前获取文件，您只需访问该文件`$somename + (timestamp()+1) % 300`。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-14T19:39:39.017

为了实现这一点，您需要空间来容纳 300 (5*60) 个文件中的每一个。由于您指出文件的大小仅为 50K 左右，因此这在 15MB 内存中是可行的（如果您不想弄乱文件系统）

它应该很简单：（类似）

```
struct {char* buf; size_t size} hist[300]; //initalize to all nulls.
int n = 0;
struct stat st;
for(;;sleep(1)){
    int ifd  = open("file", O_READ);
    int ofd = open("file-lag", O_WRITE);
    stat(ifd, &st);
    hist[n].size = st.st_size;
    if(hist[n].buf)
       free(hist[n].buf);
    buffer[n] = malloc(hist[n].size);
    read(ifd, hist.buf[n], hist[n].size);
    n = (n+1)%300;
    if(hist[n].buf)
        write(ofd, hist.buf[n], hist[n].size)
    close(ofd);
    close(ifd);
} 
```

# c - send、recvfrom、threads、“Broken Pipe”和 SO_RCVTIMEO 错误

> ID：11038588
> 
> 赞同：0
> 
> 时间：2012-06-14T17:50:21.623
> 
> 标签：c, multithreading, send, recv, epipe

我有一个用 C++ 编码的服务器，在 ubuntu 10.04 上运行，目前正在生产中，它表现出一个奇怪的错误。

### 语境 ：

每个连接到服务器的客户端都有一个套接字和两个线程

*   1个用于写入套接字的线程，
*   1个用于从套接字读取的线程。

套接字配置`::setsockopt`为`SO_RCVTIMEO`10 秒。

套接字上的每个都设置`::send`了标志`MSG_NOSIGNAL`（每个`::recvfrom`也设置了，但似乎应该没有影响）

### 漏洞 ：

我有一些证据（但不是 100% 肯定）以下情况可能很少发生：

*   `::recvfrom`被调用并阻塞，直到数据存在或达到超时
*   `::send`被调用并且套接字上的写入触发错误，返回`EPIPE`（Broken Pipe）错误
*   错误：`::recvfrom`仍然被阻止，并且永远不会返回，不知何故忽略了`SO_RCVTIMEO`选项

上述情况对您有意义吗？

### 指标：

该错误大约每周发生一次。在一周内，大约有：

*   使用了 20K 个套接字
*   30M`::recvfrom`被叫
*   60M`::send`调用

我应该使用超时功能`::select`吗？（假设超时实现将与那个不同`SO_RCVTIMEO`）

非常感谢您对此事的任何想法！

# hibernate - 如何在运行时设置获取类型？+ 休眠

> ID：11038589
> 
> 赞同：2
> 
> 时间：2012-06-14T17:50:24.417
> 
> 标签：hibernate

如何在休眠 3.2 的运行时设置获取类型？

```
session.beginTransaction();  
Customer customer = session.get(getCustomerId());  
session.save(customer);  
session.commit(); 
```

如果有可能在运行时更改获取类型（“lazy/eager”）。那么，当已经在 hibernate.mapping 文件中定义了一个获取模式，即“选择/加入”时，是否有任何影响？如果问题有任何错误对不起。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-14T18:00:53.290

您可以使用`join fetch`来指定要初始化的特定集合。

例如

```
from Cat as cat
inner join fetch cat.mate
left join fetch cat.kittens 
```

[在这里](http://docs.jboss.org/hibernate/orm/3.3/reference/en/html/queryhql.html)查看更多

或者您可以使用[条件 API](https://stackoverflow.com/questions/2206761/lazy-left-outer-join-using-the-hibernate-criteria-api)

# bash - 一种为每个 bash 测试 && 语句执行多个语句的方法

> ID：11038590
> 
> 赞同：24
> 
> 时间：2012-06-14T17:50:24.783
> 
> 标签：bash

有谁知道在 bash 测试中执行多个语句的方法？所以如果我使用：

```
[[ $Var = 1 ]] && echo "yes-1" || echo "no-1" 
```

然后设置`Var=1`输出为：`yes-1`
如果我设置`Var=2`则输出为：`no-1`

这项工作正如我所料。但是，如果我尝试添加另一个语句以在混合中执行并且它不起作用：

```
[[ $Var = 1 ]] && echo "yes-1";echo "yes-2" || echo "no-1";echo "no-2" 
```

这是有道理的，因为 bash 看到命令结束于；但是……这不是我想要的。

我已经尝试过分组、评估和功能，并且有过失败和成功，但我真正想做的就是将这项工作放在一条线上。有人有想法么？

* * *

## 回答 #1

> 赞同：43
> 
> 时间：2012-06-14T19:16:04.373

简单的命令分组应该可以工作；虽然语法可能有点棘手。

```
[[ $Var = 1 ]] && { echo "yes-1"; echo "yes-2"; } || { echo "no-1"; echo "no-2"; } 
```

需要注意的几点：

1.  `if-then-else`如果您做任何更复杂的事情，请注意@tvm 关于使用语句的建议。

2.  *大括号内的每个*命令都需要以分号结尾，即使是最后一个。

3.  每个大括号必须在两边用空格与周围的文本隔开。大括号不会导致单词中断`bash`，因此“{echo”是一个单词，“{ echo”是一个大括号后跟“echo”这个词。

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2012-06-14T18:49:14.420

考虑使用常规的 IF THEN ELSE 语句。&& 和 || 的使用 在这样的简单测试中是合理的：

```
[[ -z "$PATH" ]] && echo 'Disaster, PATH is empty!' || echo 'Everything ok!' 
```

但是，请考虑以下命令：

```
true && true && true && false && true || echo 'False!'
False! 
```

或者

```
true && { echo true; false ; } || { echo false; true ; }
true
false 
```

任何时候返回非零退出状态，|| 之后的命令 被执行。如您所见，即使是命令分组也无济于事。

subshel​​l 中的执行行为类似：

```
true && ( true; echo true; true; false ) || ( true; echo true; false )
true
true 
```

如果您需要正确的 IF 行为，只需使用常规 IF。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-14T18:25:12.067

使用子shell：

```
$ Var=1; [[ $Var = 1 ]] && ( echo "yes-1";echo "yes-2" ) || ( echo "no-1";echo "no-2"; )
yes-1
yes-2

$ Var=2; [[ $Var = 1 ]] && ( echo "yes-1";echo "yes-2" ) || ( echo "no-1";echo "no-2"; )
no-1
no-2 
```

# javascript - 如何使用 ExtendScript 从 InDesign 文档中的所有脚注引用中删除斜体和粗体样式？

> ID：11038591
> 
> 赞同：0
> 
> 时间：2012-06-14T17:50:28.083
> 
> 标签：javascript, adobe-indesign, extendscript, footnotes

我正在尝试使用 ExtendScript 从 InDesign 文档中的脚注引用中删除粗体和斜体样式。通过脚注引用，我的意思是出现在正文中的小数字。也就是说，我想从那个小数字中去掉斜体和粗体，而不是从实际的脚注中。这是我的尝试。它与我想要的完全相反，这意味着它从斜体和粗体中去除了实际的脚注，但没有去除正文中的小数字。

```
var document = app.activeDocument,
    stories = document.stories,
    nbStories = stories.length,
    story,
    footnotes,
    nbFootnotes,
    footnote,
    texts,
    nbTexts,
    text,
    i,
    j,
    k;
  for (i = 0; i < nbStories; i += 1) {
    story = stories[i];
    footnotes = story.footnotes;
    nbFootnotes = footnotes.length;
    for (j = 0; j < nbFootnotes; j += 1) {
      footnote = footnotes[j];
      texts = footnote.texts;
      nbTexts = texts.length;
      for (k = 0; k < nbTexts; k += 1) {
        text = texts[k];
        text.fontStyle = "Regular";
      }
    }
  } 
```

我怎样才能达到完全相反的效果？（即只去掉正文中的小数字，而不是实际的脚注）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-14T21:56:17.107

我建议您通过脚本使用 GREP，而不是遍历所有故事。脚注标记模式是“~F”。这将在文本标记和底部标题中捕获。要专门针对文本脚注标记，您可以重新调整模式以仅考虑跟随任何字符的标记。完成后，您将获得一组脚注标记，您可以在其上调用 changeGrep 以根据需要对标记进行样式化。您必须设置“注释”字符样式才能使此代码段正常工作。

```
function editFootNotesMarkers() 
```

{ var allresults, result, doc, characterStyle;

```
if ( !app.documents.length){ return; }
doc = app.activeDocument;

characterStyle = doc.characterStyles.itemByName ("note");
if ( !characterStyle.isValid){ return; }

app.findGrepPreferences.findWhat = "(?<=.)~F";
app.changeGrepPreferences.appliedCharacterStyle = characterStyle;

doc.changeGrep();

alert('done'); 
```

}

编辑脚注标记（）；

当然，这可以在没有任何脚本的情况下实现；）

洛伊克

# java - 在 Java EE 中使用 JPA 对表关系进行建模

> ID：11038592
> 
> 赞同：0
> 
> 时间：2012-06-14T17:50:34.977
> 
> 标签：java, jakarta-ee, jpa, glassfish

我的数据库中有两个 3 表：

```
团体
----------
groupId PK
姓名

```

```
用户帐号
----------
用户 ID PK

```

```
用户分组
----------
groupId PK FK 分组(groupId -> groupId)
userId PK FK user_account(userId -> userId)

```

在我的 UserAccount 实体中，我有以下行：

```
@JoinTable(name = "user_group", joinColumns = {
    @JoinColumn(name = "userId", referencedColumnName = "userId")}, inverseJoinColumns = {
    @JoinColumn(name = "groupId", referencedColumnName = "groupId")})
@ManyToMany
private List<Grouping> groupingList; 
```

这是为了显示所有表之间的关系。但是，当我部署时，我收到以下错误：

```
严重：准备应用程序时出现异常：异常 [EclipseLink-28018] (Eclipse Persistence Services - 2.3.2.v20111125-r10461): org.eclipse.persistence.exceptions.EntityManagerSetupException
异常描述：PersistenceUnit [com.dv_model_ejb_1.0-SNAPSHOTPU] 的预部署失败。
内部异常：异常 [EclipseLink-7220] (Eclipse Persistence Services - 2.3.2.v20111125-r10461): org.eclipse.persistence.exceptions.ValidationException
异常说明：实体类 [class com.dv.model.entity.UserAccount] 中带注释的元素 [field groupingList] 上的 @JoinColumns 不完整。当源实体类使用复合主键时，必须使用@JoinColumns 为每个连接列指定@JoinColumn。name 和 referencedColumnName 元素都必须在每个这样的 @JoinColumn 中指定。
本地异常堆栈：
异常 [EclipseLink-28018] (Eclipse Persistence Services - 2.3.2.v20111125-r10461): org.eclipse.persistence.exceptions.EntityManagerSetupException
异常描述：PersistenceUnit [com.dv_model_ejb_1.0-SNAPSHOTPU] 的预部署失败。
内部异常：异常 [EclipseLink-7220] (Eclipse Persistence Services - 2.3.2.v20111125-r10461): org.eclipse.persistence.exceptions.ValidationException
异常说明：实体类 [class com.dv.model.entity.UserAccount] 中带注释的元素 [field groupingList] 上的 @JoinColumns 不完整。当源实体类使用复合主键时，必须使用@JoinColumns 为每个连接列指定@JoinColumn。name 和 referencedColumnName 元素都必须在每个这样的 @JoinColumn 中指定。
    在 org.eclipse.persistence.exceptions.EntityManagerSetupException.predeployFailed(EntityManagerSetupException.java:221)
    在 org.eclipse.persistence.internal.jpa.EntityManagerSetupImpl.predeploy(EntityManagerSetupImpl.java:1402)
...

```

我不确定如何解释此错误消息。我假设我没有在我的实体中正确建模表关系。但我不确定为什么。在今天之前，这编译得很好。任何人都可以提供帮助吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-14T18:48:26.527

表的描述不一致（分组与组）并且实体映射中的连接表名称不是表名称之一。由于这些不一致，我假设以下表结构：

```
useraccount (userid PK)
grouping (groupdid PK, name)
user_grouping (userId PK, groupId PK)
- FK userId references to user_account.userid
- FK groupId references to grouping.groupId 
```

将其映射到两个实体的一种正确方法如下：

```
@Entity
public class UserAccount {
    @Id int userId;

    @JoinTable(name = "user_grouping", joinColumns = {
       @JoinColumn(name = "userId", referencedColumnName = "userId")},
       inverseJoinColumns = {
       @JoinColumn(name = "groupId", referencedColumnName = "groupId")})
       @ManyToMany
       private List<Grouping> groupingList;
    //get and set omitted.
}

@Entity
public class Grouping {
    @Id int groupId;
    String name;
    //get,set, and optional inverse side of relationship omitted
} 
```

# php - 使用 Google API 和 PHP 获取 Google Analytics 活动数据图表

> ID：11038593
> 
> 赞同：0
> 
> 时间：2012-06-14T17:50:35.553
> 
> 标签：php, google-analytics, google-api, google-analytics-api

是的。我想检索 GA 活动跟踪数据，但不知道如何使用 PHP。请帮我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-14T18:12:21.897

我建议查看[http://code.google.com/p/gapi-google-analytics-php-interface/](http://code.google.com/p/gapi-google-analytics-php-interface/)这是一个用于访问此类数据的 php 库。我认为有几个例子很好地说明了这一点。

希望它有帮助。

# ruby-on-rails - has_many 通过与基于关系表的条件的关系（Rails 2.3.5）

> ID：11038594
> 
> 赞同：1
> 
> 时间：2012-06-14T17:50:49.627
> 
> 标签：ruby-on-rails

我的关系如下。

```
companies_employee.rb
belongs_to :employee
belongs_to :company
validates_presence_of :role

employee.rb
has_many :companies_employees
has_many :companies, :through => :companies_employees

company.rb
has_many :companies_employees
has_many :managers, :through => :companies_employees, :source => :employee, conditions => {:role => "Manager"}
has_many :owners, :through => :companies_employees, :source => :employee, :conditions => {:role => "Owner"} 
```

我的问题是，当它检查条件时，它试图在employees 表中找到角色列，但角色列在company_employees 表中。有没有办法让它使用这个表中的东西来满足条件？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-14T19:09:53.800

尝试这样的事情：

```
has_many :managers, :through => :companies_employees, :source => :employee, conditions => ["employees.role = 'Manager"]
has_many :owners, :through => :companies_employees, :source => :employee, conditions => ["employees.role = 'Owner"] 
```

# java - 用于 Windows API GetShortPathName 的 Java 调用

> ID：11038595
> 
> 赞同：3
> 
> 时间：2012-06-14T17:50:50.657
> 
> 标签：java, winapi, short-filenames

我想在我的 java 类中使用本机 windows api 函数。

我感兴趣的函数是GetShortPathName。 [http://msdn.microsoft.com/en-us/library/aa364989%28VS.85%29.aspx](http://msdn.microsoft.com/en-us/library/aa364989%28VS.85%29.aspx)

我尝试使用它 - [http://dolf.trieschnigg.nl/eightpointthree/eightpointthree.html](http://dolf.trieschnigg.nl/eightpointthree/eightpointthree.html) 但在某些情况下，当我使用它时，java 会完全崩溃，所以它不是我的选择。

问题是我是否必须用例如 C 语言编写代码，制作 DLL，然后在 JNI/JNA 中使用该 DLL？或者也许我可以以不同的方式访问系统 API？

我会很感激你的意见。如果您可以发布一些代码作为示例，我将不胜感激。

...

我使用 JNA 找到了答案

```
 import com.sun.jna.Native;
import com.sun.jna.platform.win32.Kernel32;

public class Utils {

    public static String GetShortPathName(String path) {
        byte[] shortt = new byte[256];

        //Call CKernel32 interface to execute GetShortPathNameA method
        int a = CKernel32.INSTANCE.GetShortPathNameA(path, shortt, 256);
        String shortPath = Native.toString(shortt);
        return shortPath;

    }

    public interface CKernel32 extends Kernel32 {

        CKernel32 INSTANCE = (CKernel32) Native.loadLibrary("kernel32", CKernel32.class);

        int GetShortPathNameA(String LongName, byte[] ShortName, int BufferCount);
    }

} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2014-02-16T22:50:24.383

谢谢提示。以下是我改进的功能。它使用 Unicode 版本的 GetShortPathName

```
import com.sun.jna.Native;
import com.sun.jna.platform.win32.Kernel32;

public static String GetShortPathName(String path) {
    char[] result = new char[256];

    Kernel32.INSTANCE.GetShortPathName(path, result, result.length);
    return Native.toString(result);
} 
```

# c# - 卸载 SQL Server Express 2005，然后在 C# ClickOnce Winform App 中安装 SQL Server 2008 R2 Express

> ID：11038596
> 
> 赞同：3
> 
> 时间：2012-06-14T17:50:50.797
> 
> 标签：c#, .net, winforms, clickonce, sql-server-express

我的应用程序是使用 ClickOnce 在内部部署的，并且具有 SQL Server 2005 Express 的先决条件。

我想将我的用户升级到 SQL Server 2008 R2 Express。我有哪些选择不涉及我“触摸”所有 300 台笔记本电脑？

我的想法，仅在理论上，是完全放弃 SQL Server Express prereq，在我的应用程序中放置一个“升级”提示，并给用户几天的时间来点击它，然后重新添加 SQL Server Express 作为 prereq，但作为新版本。

我认为这会起作用，尽管我对其他建议持开放态度。但是，我的实际问题是如何完成“升级”提示。如何在 C# Winform 应用程序中卸载 SQL Server Express？

谢谢，

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-14T18:56:10.193

请参阅这篇关于如何静默安装 SQL Server 2008 R2 的[MSDN 文章](http://msdn.microsoft.com/en-us/library/dd239405%28v=sql.105%29.aspx)（但为什么不改为 2012 呢？:)

一个快速的作弊方法是（我已经使用非快速版本完成了此操作，但应该是相同的过程）首先进行手动升级以收集配置和设置的所有答案，然后**在**执行实际升级之前，在最后一步中你应该在底部看到答案（ini）文件的路径（见下图），如果取消并抓取该文件，则可以在命令行中运行它`Setup.exe /ConfigurationFile=MyConfigurationFile.INI`

![在此处输入图像描述](../Images/4ef66892d0ecf34d2afd6b3246ccdc11.png)

一旦你测试了它，你应该能够创建一些东西，将二进制文件和答案文件拉到用户的电脑中，并产生一个进程以静默模式运行安装程序。当然，您应该首先确保您的用户是管理员。

**卸载：** 使用卸载选项运行安装程序，如`Setup.exe /Action=Uninstall /FEATURES=SQL,AS,RS,IS,Tools /INSTANCENAME=MSSQLSERVER`，请参阅[卸载参数](http://msdn.microsoft.com/en-us/library/ms144259%28v=sql.105%29.aspx)部分。如果我没记错的话，您实际上可以执行**Setup.exe /Action=Uninstall /INSTANCENAME=MSSQLSERVER**来删除您要删除的特定实例的所有内容，但我可能错了，所以先测试

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-06-26T16:55:26.237

我正在处理类似的要求，以从 WinForms 应用程序自动从 SQL 2005 Express 升级到 SQL 2008 R2 Express。

您实际上不必卸载 SQL 2005 来进行升级。您可以直接从 2005 升级到 2008R2，无需任何卸载。

我的代码看起来像这样（经过修改以简化和删除专有内容）......

```
try
{

    //First, find the version of the currently installed SQL Server Instance
    string sqlString = "SELECT SUBSTRING(CONVERT(VARCHAR, SERVERPROPERTY('productversion')), 0, 5)";
    string sqlInstanceVersion = string.Empty;                

    //_database was initialized elsewhere - it's from Enterprise Library
    using (DbCommand cmd = _database.GetSqlStringCommand(sqlString))
    {
        sqlInstanceVersion = cmd.ExecuteScalar().ToString();
    }

    if (sqlInstanceVersion.Equals(String.Empty))
    {
        //TODO throw an exception or do something else
    }

    //11.00 = SQL2012, 10.50 = SQL2008R2, 10.00 = SQL2008, 9.00 = SQL2005, 8.00 = SQL2000
    switch (sqlInstanceVersion)
    {
        case "11.00":
        case "10.50":
        case "10.00":
            //Log that the version is already up to date and return
            return;
        case "9.00":
        case "8.00":
            //We are on SQL 2000 or 2005, so continue with upgrade to 2008R2
            break;
        default:
            //TODO throw an exception for unsupported SQL Server version
            break;
    }

    string upgradeArgumentString = "/Q /ACTION=upgrade /INSTANCENAME={0} /ENU /IACCEPTSQLSERVERLICENSETERMS";
    string instanceName = "YourInstanceNameHere";
    string installerFilePath = AppDomain.CurrentDomain.BaseDirectory + "\\SQLEXPR_x86_ENU.exe"; 

    if (!File.Exists(installerFilePath))
    {
        throw new FileNotFoundException(string.Format("Unable to find installer file: {0}", installerFilePath));
    }

    Process process = new Process
    {
        StartInfo = { FileName = installerFilePath, Arguments = String.Format(upgradeArgumentString, instanceName), UseShellExecute = false }
    };

    process.Start();

    if (process.WaitForExit(SQLSERVER_UPGRADE_TIMEOUT))
    {
        //Do something here when the process completes within timeout.
        //Probably look at exit code, or whatever to determine if it was successful
    }
    else
    {
        //The process exceeded timeout.  Do something about it; like throw exception, or whatever
    }
}
catch(Exception ex)
{
    //Handle your exceptions here
} 
```

# python - 以间隔将项目附加到python中的列表

> ID：11038597
> 
> 赞同：-1
> 
> 时间：2012-06-14T17:50:56.053
> 
> 标签：python, list, append, intervals

我对 python 很陌生，我正在尝试以间隔将项目从一个列表附加到另一个列表。到目前为止，我的代码是：

```
def place_item(a,b):
    interval = (4,8)
    for s in a:
        i = a.index(s)
        b[i:i] = [s]
    print b

a = ['a','b','c','d','e','f','g','h','i','j','k','l','m','n','o','p','q','r','s','t','u','v','w','x','y','z']

b = [''] * (3*26)

place_item(a,b) 
```

我得到的结果是列表中的前 26 个字母后跟 52 个 ' ' 空格，这是有道理的，因为我没有要求它多次生成“列表 a”或将项目放在“列表 a”中前一个列表之后的 4 到 8 个空格之间的间隔。所以基本上我试图循环“list a”并将其字母散布在“list b”中，相隔4和8个空格。而且我不知道该怎么做:(。有什么想法吗？

编辑：我将包括每个人向我指出的我忘记的内容。我希望项目之间的空格长度在 4 到 8 个字符之间，长度是为每个项目随机选择的。结果看起来像这样：

```
['a','','','','','','b','','','','','','','c','','','','','d'...] 
```

编辑 2：blob8108 指出使用这种方法我很快就会用完空间。是否有可能让一些字母按正常顺序排列（'a'、'b'、'c'、'd' 等），而其他字母与这些首字母隔开（例如'e'、'f ','g' 从 'a' 到 4-8 个空格，而 'h','i','j' 从 'b' 到 4-8 个空格）？结果可能如下所示：

```
['a','b','c','d','g','e','h','i',etc.] 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-15T09:27:51.570

你可以试试这个：

```
import random

abc = [chr(x) for x in range(97, 123)]
out = []

out.append(abc[0])
for item in abc[1:]:
    out += [''] * random.randrange(4, 8)
    out.append(item) 
```

不过，这确实具有可变长度输出。

如果这是你想要的，你将不得不更多地解释固定长度是如何工作的。

# android - 在 xml 中控制按钮图像的纵横比

> ID：11038599
> 
> 赞同：0
> 
> 时间：2012-06-14T17:51:02.700
> 
> 标签：android, xml

这可以做到吗？

```
<ImageButton
    android:id="@+id/test_button"
    android:layout_width="70% of screen width"
    android:layout_height="whatever is needed for the image to keep its original aspect ratio"
    android:background="@drawable/image" /> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-14T18:15:10.630

你应该能够使用这样的东西：

```
<ImageButton
    android:id="@+id/test_button"
    android:layout_width="200dp" // You can use any number here to use a specific size
                                 // You can use dp for density independent pixels
                                 // Or sp for screen independent pixels

    android:layout_height="wrap_content" // This will set the height to a size just big
                                         // enough to hold the image. 
```

# c - 函数调用 mips

> ID：11038606
> 
> 赞同：4
> 
> 时间：2012-06-14T17:51:42.053
> 
> 标签：c, mips

假设我们正在检查一个只有一个局部变量 x 的函数 f 的 MIPS 汇编代码：

```
void f(void) {
int x;
...
} 
```

我有两个问题：

1.  f 的函数 prologue 和 epilogue 对寄存器 $sp、$ra 和 $fp 做了什么，假设 $ra 和 $fp 是函数修改的唯一被调用者保存的寄存器。

2.  f 的 MIPS 汇编代码如何访问变量 x。

我的尝试：函数序言将寄存器 $ra 和 $fp 保存到调用堆栈中。Epilogue 函数通过将这些寄存器从堆栈中弹出来恢复这些寄存器，并将控制权返回到 $ra 中的地址。不确定 MIPS 如何访问变量 x，但我知道局部变量也存储在堆栈中。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-14T22:44:49.473

> **(a) f 的函数 prologue 和 epilogue 对寄存器 $sp、$ra 和 $fp 做了什么，假设 $ra 和 $fp 是函数修改的唯一被调用者保存的寄存器。**

（**$fp**是“帧指针”，也称为“基指针”，**$sp**是“堆栈指针”，**$ra**是“返回地址”）

要解释如何访问“ **int x** ”，了解它的存储方式和存储位置很重要。由于“ **int x** ”是一个局部变量，MIPS 将通过减去 32 位整数的字节数 (4) 为堆栈上的整数分配适当的空间（或者如果有空间，则使用 markgz 所说的方法）从堆栈指针。调用者的返回地址也被保存（另外 4 个字节），以便函数可以链接回调用者：

```
sub $sp, $sp, 8   #4 bytes for $ra + 4 bytes for 'int x' = 8 bytes allocated
sw $ra, 4($sp)    #note the order, $ra is always first
sw [int x], 0($sp) 
```

或者

```
addi $sp, $sp, -8  #an alternate to the code above
sw $ra, 4($sp)
sw [int x], 0($sp) 
```

同样，在函数调用结束时，函数将通过释放堆栈上的空间将寄存器恢复给调用者：

```
lw [int x], 0($sp)
lw $ra, 4($sp)
addi $sp, $sp, 8 
```

**我在使用帧指针 ( $fp** )方面没有很多经验，但是如果堆栈指针 ( **$sp** ) 在过程中更改值，则它不能再用作参考点，因此 ( **$fp** ) 需要它的位置（$sp 只是另一个寄存器）。

> **(b) f 的 MIPS 汇编代码如何访问变量 x。**

要访问“ **int x** ”，函数“ **f** ”可以将变量加载到临时寄存器中。

```
lw $t0, 0($sp)  #it can be any temporary register 
```

由于局部变量不会在函数调用之间保留，它们可以存储在临时寄存器中。本质上，“ **push** ”指令将是“ **sw** ”（“存储字”），而“ **pop** ”指令将是“ **lw** ”（“加载字”）。

另外，我知道 MIPS 可能会很痛苦，而这份[参考表](http://inst.eecs.berkeley.edu/~cs61c/resources/MIPS_Green_Sheet.pdf)确实帮助了我。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-14T20:47:56.983

[在此处](http://en.wikipedia.org/wiki/Calling_convention#MIPS)查看 MIPS 调用约定。通常，函数中的局部变量将保存在临时（调用者保存）寄存器 $t0 - $t9 中。如果函数本身调用一个函数，则局部变量会保存在堆栈中。

MIPS中没有`push`or`pop`指令，因此函数序言将堆栈指针递减足够的字数以允许该函数的所有堆栈存储需求，而函数尾声则撤消了这一点。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-11-10T15:32:12.547

> f 的函数 prologue 和 epilogue 对寄存器 $sp、$ra 和 $fp 做了什么，假设 $ra 和 $fp 是函数修改的唯一被调用者保存的寄存器。

`$sp`- 堆栈指针 `$fp`- 帧指针 `$ra`- 返回地址

函数序言和尾声是指您在函数开始时将返回地址寄存器（以及任何其他需要的寄存器）保存到堆栈中，并在函数结束时将值返回到它们各自的寄存器。

您可能已经注意到，MIPS 架构没有堆栈，您必须创建它（您可能需要查看您正在使用的模拟器或特定处理器的手册，因为为此召开的地址会有所不同）。

您将在主程序中保存 $sp 中指定的地址：

```
daddi $sp, $sp, 0x400 # this is the convention address for WinMIPS64's stack 
```

您可能出于多种原因想要使用堆栈，例如：

*   `$ra`在嵌套函数的情况下保存返回地址寄存器（ ）
*   对于`$fp`, 根据问题
*   `$s0-$s7`如果您在函数中使用它们，则保存寄存器。按照惯例，这些应该在使用时始终保存到堆栈中（在这种情况下不适用，但其他人可能正在阅读这个，所以）。

为此，您将使用上述用户所做的代码（代码可能会根据您使用的 MIPS 版本略有不同，请查看手册）。

要推送到堆栈，您必须使用上述代码模拟堆栈函数（为数据腾出空间，将数据保存在堆栈上）。请记住，当您按上述方式 PUSH 到堆栈时，您还必须 POP 等量以将其返回`$sp`到其原始位置。您以相反的顺序执行此操作（再次，如上面的用户所示）。

另外：因为 MIPS 中函数的调用指令（jal f - 跳转和链接）会自动将返回地址保存在单个寄存器中（`$ra`- 返回地址，还记得吗？），如果您使用递归或者如果您正在从第一个函数调用第二个函数，否则你会丢失主程序的返回地址，因为它会被下一次调用“踩到”。

`$fp`帧指针，例如，如果您已将许多寄存器值保存到堆栈中，并且您希望访问不同的操作数而不移动`$sp`仍指向堆栈顶部的操作数，则将使用帧指针。为此，您将加载 on 的值`$sp`，`$fp`然后添加位移值以四处移动。

它允许您从堆栈加载值，同时将它们保持`$sp`在同一个位置，因此允许您跟踪推送和弹出操作。

> f 的 MIPS 汇编代码如何访问变量 x。

按照惯例，MIPS 具有用于参数和返回值的特定寄存器。在 MIPS 中，要传递给函数的参数保存在寄存器中`$a0-$a3`，返回值保存在`$v0-$v1`. 可以在函数中使用的临时寄存器是，`$t0-$t9`但它们在从函数返回时不保留它们的值。但是，由于您可能会用完寄存器，因此您可能需要使用堆栈。按照惯例，`$s0-$s7`保存的*寄存器*的值通过使用堆栈来保存。

PS**重要提示：**我使用的是 WinMIPS64 模拟器。MIPS 汇编语言在寄存器大小、指令集和堆栈地址方面有所不同，请参考您的特定版本手册并检查哪些值适用于您的情况，因为这会影响您的代码。

# ios - iOS 重复记录不允许

> ID：11038609
> 
> 赞同：0
> 
> 时间：2012-06-14T17:51:52.793
> 
> 标签：ios, core-data

如果他/她插入重复的记录，我需要用警报停止用户：

```
列 1 列 2 列 3

(ABC) 允许

(BAL) 允许

(ABC) 不允许，因为它的记录重复

```

```
AppDelegate *appDelegate = [[UIApplication sharedApplication] delegate];
    NSManagedObjectContext *context = [appDelegate managedObjectContext];
    NSManagedObject *newAdds;
    newAdds = [NSEntityDescription insertNewObjectForEntityForName:@"Matches" inManagedObjectContext:context];

    [newAdds setValue:club01.text forKey:@"club01"];
    [newAdds setValue:club02.text forKey:@"club02"];
    [newAdds setValue:matchDateVar forKey:@"matchDate"];

    [newAdds setValue:matchTaypVar forKey:@"matchType"]; 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-14T19:01:50.520

您可能需要执行这样的检查：

```
NSFetchRequest* fetchRequest = [NSFetchRequest fetchRequestWithEntityName: @"Matches"];
fetchRequest.predicate = [NSPredicate predicateWithFormat: @"club01 == %@ AND club02 == %@ AND matchDate == %@", club01.text, club02.text, matchDateVar];
fetchRequest.fetchLimit = 1;

NSError* error = nil;
NSArray* tuples = [context executeFetchRequest: fetchRequest error: &error];
if ( tuples.count > 0 )
{
  // OOPS ! Entity already exists
} 
```

性能方面，您可能希望为 club01、club02、matchDate 添加索引。这将有很大帮助。

编辑：您还可以使用：

```
NSUInteger count = [context countForFetchRequest: fetchRequest error: &error]; 
```

而不是执行FetchRequest。甚至更好。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-06-14T21:03:38.333

现在好了。问题是日期/时间无法复制，因为秒数。

谢谢 :)

# django - Django - 在每个请求的基础上使用自定义模板加载器？

> ID：11038610
> 
> 赞同：2
> 
> 时间：2012-06-14T17:51:57.863
> 
> 标签：django, django-templates

在渲染模板时是否有一种较低级别的方法来提供加载器列表，而不是始终让 Django 使用该设置？

我只想为几个视图使用自定义模板加载器实例（我有我的理由）。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-14T18:14:53.093

看起来你必须自己编写一些代码才能做到这一点。让我们看一下加载模板的正常代码路径，如果您使用，例如，[源代码](https://github.com/django/django/blob/master/django/shortcuts/__init__.py#L14)`render_to_response`的相关部分是：

```
return HttpResponse(loader.render_to_string(*args, **kwargs), **httpresponse_kwargs) 
```

这是对 的调用[`django.template.loader.render_to_string`](https://github.com/django/django/blob/master/django/template/loader.py#L158)，它通过其他一些函数并最终调用[`find_template`](https://github.com/django/django/blob/master/django/template/loader.py#L120).

第一次`find_template`调用，在初始化全局`template_source_loaders`缓存的基础上`settings.TEMPLATE_LOADERS`。所以看起来没有你可以传入的额外参数或类似的东西。

一种可能性可能是在`django.template.loader.template_source_loaders`该视图的持续时间内添加一些加载器。我不知道这是否会导致其他问题；感觉很脏，但如果它有效，那就很容易了。（只需制作一个视图装饰器即可。）

如果您不想这样做，看起来您必须`render_to_string`使用自己的代码复制工作（如果您真的确定要使用按视图模板加载器，我接受它作为这个问题的前提，但我敢打赌实际上没有必要）。那里没有那么多代码，如果您事先知道要使用的特定加载器和单个模板名称，那实际上很容易。（这未经测试，但可能几乎可以工作。）

```
 def render_to_response_with_loader(loader, name,
           dictionary=None, context_instance=None, mimetype=None, dirs=None):

    # from find_template
    t, display_name = loader(name, dirs)

    # from get_template
    if not hasattr(t, 'render'):
        # template needs to be compiled
        t = django.template.loader.get_template_from_string(t, origin, template_name)

    # from render_to_string
    if not context_instance:
        rendered = t.render(Context(dictionary))
    else:
        # Add the dictionary to the context stack, ensuring it gets removed again
        # to keep the context_instance in the same state it started in.
        context_instance.update(dictionary)
        try:
            rendered = t.render(context_instance)
        finally:
            context_instance.pop()

     # from render_to_response
     return HttpResponse(rendered, mimetype=mimetype) 
```

如果您想支持多个可能的加载器或可能的文件名列表，只需从[django.template.loader](https://github.com/django/django/blob/master/django/template/loader.py#L120)复制相关代码。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-11T02:49:39.133

我最终通过按照 Dougal 的建议修改 template_source_loaders 来做到这一点。就像他说的那样，我不确定这是否安全（它会产生竞争条件吗？），但它目前适用于我的特定情况。与 Dougal 建议的其他方式相比，这样做的好处是它确保 {% extends %} 和 {% include %} 也使用修改后的加载器。这是我的带有自定义加载器的 render_to_string：

```
def render_to_string_with_loader(*args, **kwargs):
    """ Call render_to_string using ReportTemplateLoader to find templates. """
    import django.template.loader as loader
    old_loaders = settings.TEMPLATE_LOADERS
    settings.TEMPLATE_LOADERS = ('main.loaders.ReportTemplateLoader',)
    loader.template_source_loaders = None # force refresh from settings
    try:
        out = render_to_string(*args, **kwargs)
    finally:
        # use finally make sure template errors can't mess up later requests
        settings.TEMPLATE_LOADERS = old_loaders
        loader.template_source_loaders = None 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-11-06T15:59:31.030

这是一个老问题，但截至 2021 年（Django 3.2），这就是我所做的。

* * *

我需要什么：

*   根据请求提供不同的模板（在我的情况下是使用的域）
*   仅使用一个 Django 实例（= 1 IP/端口）

（一些多域解决方案是关于创建一个不同的新实例`DIRS`）

* * *

## 对于多站点/多域：

1.  加入[`'django.contrib.sites'`](https://docs.djangoproject.com/en/3.2/ref/contrib/sites/)进来`INSTALLED_APPS`_`settings.py`

    这启用了[Django 站点框架](https://docs.djangoproject.com/en/3.2/ref/contrib/sites/)

2.  添加[`'django.contrib.sites.middleware.CurrentSiteMiddleware'`](https://docs.djangoproject.com/en/3.2/ref/contrib/sites/#site-middleware)到`MIDDLEWARES`您的`settings.py`

    这`site`为 Django 处理的每个请求添加了一个属性

* * *

## 用于使用按请求模板

1.  创建额外的引擎

在`TEMPLATES`中`settings.py`

例如，我使用 Django 引擎。我再次创建了相同的引擎，并添加`DIRS`了可以获取模板的位置。

```
TEMPLATES = [
    {
        'BACKEND': 'django.template.backends.django.DjangoTemplates',
        'DIRS': [os.path.join(BASE_DIR, 'templates')]
        ,
        'APP_DIRS': True,
    },
    {
        'NAME': 'a.local',
        'BACKEND': 'django.template.backends.django.DjangoTemplates',
        'DIRS': [os.path.join(BASE_DIR, 'templates/a.local'),
                 os.path.join(BASE_DIR, 'templates')]
        ,
        'APP_DIRS': True,
    },
    {
        'NAME': 'b.local',
        'BACKEND': 'django.template.backends.django.DjangoTemplates',
        'DIRS': [os.path.join(BASE_DIR, 'templates/b.local'),
                 os.path.join(BASE_DIR, 'templates')]
        ,
        'APP_DIRS': True,
    }
] 
```

2.  使用`using`kwarg`render()`

设置要使用的渲染引擎`render()`

前： `render(request, 'template.html', context=context_data)`

后：`render(request, 'template.html', context=context_data, using=request.site.domain)`

（在我的情况下，`request.site.domain`是`a.local`or `b.local`，这正是我刚刚创建的引擎的名称）

3.  覆盖渲染（可选，hacky）

避免改变你所有的`render`地方。这很恶心，你不应该这样做。移至基于分类的视图。这里是。

```
def render(request, *args, **kwargs):
    return shortcut_render(request, *args, **kwargs, using=request.site.domain) 
```

# ios - 如何裁剪 UIImage 中的中心正方形？

> ID：11038622
> 
> 赞同：15
> 
> 时间：2012-06-14T17:52:33.137
> 
> 标签：ios, uiimage, crop

很抱歉这个问题，但我在 SO 中搜索了很多线程，但一无所获。

问题是：如何裁剪 UIImage 中的中心正方形？

我尝试了下面的代码，但没有成功。裁剪发生，但在左上角。

```
-(UIImage*)imageCrop:(UIImage*)original
{
    UIImage *ret = nil;

    // This calculates the crop area.

    float originalWidth  = original.size.width;
    float originalHeight = original.size.height;

    float edge = fminf(originalWidth, originalHeight);

    float posX = (originalWidth   - edge) / 2.0f;
    float posY = (originalHeight  - edge) / 2.0f;

    CGRect cropSquare = CGRectMake(posX, posY,
                                   edge, edge);

    // This performs the image cropping.

    CGImageRef imageRef = CGImageCreateWithImageInRect([original CGImage], cropSquare);

    ret = [UIImage imageWithCGImage:imageRef
                              scale:original.scale
                        orientation:original.imageOrientation];

    CGImageRelease(imageRef);

    return ret;
} 
```

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-06-14T18:59:41.560

添加更多信息，我在拍摄照片后使用此“裁剪”。

经过一些测试，我发现了一些有用的东西。

```
// If orientation indicates a change to portrait.
if(original.imageOrientation == UIImageOrientationLeft ||
   original.imageOrientation == UIImageOrientationRight)
{
    cropSquare = CGRectMake(posY, posX,
                            edge, edge);

}
else
{
    cropSquare = CGRectMake(posX, posY,
                            edge, edge);
} 
```

# android - 如何查找自定义扩展视图的视图

> ID：11038625
> 
> 赞同：1
> 
> 时间：2012-06-14T17:52:39.857
> 
> 标签：android, classcastexception

我有一个名为的类`CropImageView`，它是从`ImageView`. 但下面的陈述使`castException`：

```
CropImageView image = (CropImageView) findViewById(R.id.image); 
```

这是xml文件：

```
 <FrameLayout xmlns:android="http://schemas.android.com/apk/res/android"
        android:layout_width="fill_parent"
        android:layout_height="fill_parent">

    <RelativeLayout
            android:layout_width="fill_parent"
            android:layout_height="fill_parent"
            android:orientation="horizontal">

        <ImageView  android:id="@+id/image"
                android:background="#55000000"
                android:layout_width="fill_parent"
                android:layout_height="fill_parent"
                android:layout_x="0dip"
                android:layout_y="0dip"/>
    </RelativeLayout>
  </FrameLayout> 
```

你有什么建议吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-14T17:57:08.703

尝试在您的布局中使用`<com.your.package.CropImageView />`而不是。`<ImageView />`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-14T17:58:16.863

您应该`CropImageView`在`XML`. 就像是：

```
<your.package.CropImageView 
    android:id="@+id/image"
    android:background="#55000000"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:layout_x="0dip"
    android:layout_y="0dip"/> 
```

# objective-c - GCC 抱怨重复的定义（只有一个存在）

> ID：11038634
> 
> 赞同：1
> 
> 时间：2012-06-14T17:53:20.593
> 
> 标签：objective-c, gcc, linker-errors

在 Xcode 中处理大型项目时，我似乎只是遇到了一个又一个错误。这一次，GCC 抱怨结构打印函数的重复定义 - 一个是实际定义的（在不同的文件中），另一个是使用它的地方（在驱动程序中）。

我得到的具体错误是：

```
ld: duplicate symbol _fprintConfiguration in
/.../bits.build/Objects-normal/x86_64/Block.o and
/.../bits.build/Objects-normal/x86_64/bits.o 
```

其中 Block.o 包含定义， bits.o 包含驱动程序。

* * *

我已经对此进行了一些研究，但似乎每个问题都存在于人们实际上`#include`通过`#import`. 该`#import`指令不应该“智能”包含文件吗？还有其他原因我可能会收到此错误吗？我可以尝试其他解决方案吗？

谢谢你的帮助 ：）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-14T17:56:09.167

问题是您在多个翻译单元（`Block.o`和`bits.o`）中包含相同的定义。要解决此问题，请声明函数`inline`或将定义移动到（单个）源（非头）文件。

`#include`这与 vs.的问题是正交的`#import`。*那就是在同一个*翻译单元中多次包含相同的代码。

# javascript - 在 jQuery 中模拟悬停

> ID：11038638
> 
> 赞同：26
> 
> 时间：2012-06-14T17:53:27.893
> 
> 标签：javascript, jquery, konacha

目前，我有一些 jQuery/Javascript 代码可以在用户将鼠标悬停在某些元素上时切换 css 类“ui-state-hovered”，我想在 konacha 中编写一个测试来测试这段代码。

我将如何在 jQuery 的帮助下用 Javascript 编写这个函数？

如果用户将鼠标悬停在元素 $('.someClass li:first') 上，则返回 true，类 'ui-state-hovered' 存在。否则返回假。

我将如何模拟用户将鼠标悬停在该元素上？

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2012-06-14T17:58:42.213

尝试`mouseenter`并`mouseleave`

```
$('.someClass li:first').mouseenter().mouseleave(); 
```

来自 jQuery 文档

> 调用`$(selector).hover(handlerIn, handlerOut)`是以下的简写：`$(selector).mouseenter(handlerIn).mouseleave(handlerOut);`

**演示：http:** [//jsfiddle.net/skram/wh5N9/](http://jsfiddle.net/skram/wh5N9/)

尝试在下面检查将在悬停中添加的类

```
$("#test").mouseenter(function() {
    console.log('Has class hover ' + $(this).hasClass('ui-state-hovered'));
}).mouseleave(function() {
    console.log('Has class hover ' + $(this).hasClass('ui-state-hovered'));
}) 
```

**确保以上内容注册后`.hover`**

**演示：http:** [//jsfiddle.net/skram/wh5N9/2/](http://jsfiddle.net/skram/wh5N9/2/)

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-06-14T18:04:31.820

简写设置 mouseenter/mouseleave 事件

```
$(".someClass li:first").hover(
  // Mouse Over
  function(){
    $(this).addClass("ui-state-hovered");
  },
  // Mouse Out
  function(){
    $(this).removeClass("ui-state-hovered");
}); 
```

**编辑**

设置事件 mouseenter

```
$(".someClass li:first").mouseenter(function(){
    $(this).addClass("ui-state-hovered");
  } 
```

设置事件 mouseleave

```
$(".someClass li:first").mouseleave(function(){
    $(this).removeClass("ui-state-hovered");
}); 
```

模拟鼠标悬停：

```
$(".someClass li:first").trigger("mouseenter"); 
```

模拟鼠标移出：

```
$(".someClass li:first").trigger("mouseleave"); 
```

要检查一个类：

```
$(".someClass li:first").hasClass("ui-state-hovered"); 
```

如果有一个类，则返回 true：

```
function checkClass(elem, class){
  return $(elem).hasClass(class);
}; 
```

**编辑 2**

我以前从未使用过 Konacha，但如果我使用 solitr.com 上的[本指南作为我的指南](http://www.solitr.com/blog/2012/04/konacha-tutorial-javascript-testing-with-rails/)来尝试一下，我会说：

HTML

```
<div id="testDiv" class="foo">Some Text</div> 
```

jQuery

```
checkClass = function(elem, class){
    return $(elem).hasClass(class);
}; 
```

科纳查

```
describe('checkClass', function() {
    it('should be true if elem has class', function() {
        checkClass("#testDiv", "foo").should.be.true;
        checkClass("#testDiv", "bar").should.be.false;
    });
}); 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-06-14T17:56:55.647

看[这里](http://api.jquery.com/mouseover/)

```
$('someClass li:first').mouseover(); 
```

这应该触发事件

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2018-03-28T16:18:16.733

使用控制台，您可以尝试 $('#yourelement').trigger('mouseover');

* * *

## 回答 #5

> 赞同：-3
> 
> 时间：2012-06-14T18:07:29.087

悬停时写函数

```
$('.someClass li:first').hover(function(){
      return $(this).attr('class').indexOf('ui-state-hovered') > -1;
}); 
```

# c# - 使用 EWS 托管 API 1.2 获取约会的重复模式

> ID：11038646
> 
> 赞同：2
> 
> 时间：2012-06-14T17:53:51.733
> 
> 标签：c#, exchangewebservices, exchange-server-2010, ews-managed-api

我正在寻找正确的方法来获取与使用 EWS 托管 API 1.2 的约会相关联的重复模式。我的代码看起来像这样：

```
FindItemsResults<Item> findResults = service.FindItems(WellKnownFolderName.Calendar, view);

foreach (Appointment appointment in findResults)
{
    appointment.Load();

    if (appointment.IsRecurring)
    {
        // What is the recurrence pattern???
    }
} 
```

我可以做一个约会。Recurrence.ToString()，我会像 Microsoft.Exchange.WebServices.Data.Recurrence+WeeklyPattern 一样回来。显然我可以解析它并确定类型，但这似乎不是很干净。有没有更好的办法？

这里还有另一篇与此类似的帖子 - [EWS：访问约会重复模式](https://stackoverflow.com/questions/10656136/ews-accessing-an-appointments-recurrence-pattern)，但解决方案似乎并不完整。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-06T13:22:19.353

这是模式的完整列表。没有属性的原因是你可以使用什么模式，你必须将循环转换为模式。在我的项目中，我以这种方式解决了这个问题：

```
Appointment app = Appointment.Bind(service,id);
Recurrence.DailyPattern dp = app.Recurrence as Recurrence.DailyPattern;
Recurrence.DailyRegenerationPattern drp = app.Recurrence as Recurrence.DailyRegenerationPattern;
Recurrence.MonthlyPattern mp = app.Recurrence as Recurrence.MonthlyPattern;
Recurrence.MonthlyRegenerationPattern mrp = app.Recurrence as Recurrence.MonthlyRegenerationPattern;
Recurrence.RelativeMonthlyPattern rmp = app.Recurrence as Recurrence.RelativeMonthlyPattern;
Recurrence.RelativeYearlyPattern ryp = app.Recurrence as Recurrence.RelativeYearlyPattern;
Recurrence.WeeklyPattern wp = app.Recurrence as Recurrence.WeeklyPattern;
Recurrence.WeeklyRegenerationPattern wrp = app.Recurrence as Recurrence.WeeklyRegenerationPattern;
Recurrence.YearlyPattern yp = app.Recurrence as Recurrence.YearlyPattern;
Recurrence.YearlyRegenerationPattern yrp = app.Recurrence as Recurrence.YearlyRegenerationPattern;

if (dp != null)
{ 
//Do something
}
else if (drp != null)
{
//Do something
}
else if (mp != null)
{
//Do something
}
else if (mrp != null)
{
//Do something
}
else if (rmp != null)
{
//Do something
}
else if (ryp != null)
{
//Do something
}
else if (wp != null)
{
//Do something
}
else if (wrp != null)
{
//Do something
}
else if (yp != null)
{
//Do something
}
else if (yrp != null)
{
//Do something
} 
```

希望对你有帮助...

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-20T06:11:22.543

```
Microsoft.Exchange.WebServices.Data.Recurrence.IntervalPattern pattern = (Microsoft.Exchange.WebServices.Data.Recurrence.IntervalPattern)microsoftAppointment.Recurrence; 
```

这是你想要的？

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-07-03T09:23:00.270

我的2美分。我会通过检查类型来实现它：

```
if(app.Recurrence.GetType() == typeof(Recurrence.DailyPattern))
{
    // do something 
}
else if(app.Recurrence.GetType() == typeof(Recurrence.WeeklyPattern))
{
    // do something
}
... 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-07-08T14:06:16.303

我有另一种方法来解决我的项目中的问题。对我来说，它更容易阅读，但这是品味问题。

```
Appointment app = Appointment.Bind(service,id);
string[] split = app.Recurrence.ToString().Split('+');
if (split.Length != 2)
  return;

string pattern = split[1];

switch (pattern)
{
  case "DailyPattern":
    break;

  case "WeeklyPattern":
    break;

  case "MonthlyPattern":
    break;

  case "YearlyPattern":
    break;
} 
```

# asp.net-mvc-4 - 剑道模板条件格式

> ID：11038651
> 
> 赞同：20
> 
> 时间：2012-06-14T17:53:58.530
> 
> 标签：asp.net-mvc-4, kendo-ui

**免责声明：**这最初[发布](http://www.kendoui.com/forums/framework/templates/template-conditional-formatting-problem.aspx#2145567 "张贴")到 KendoUI 论坛，但没有收到任何答复。

我正在尝试在我的 ListView 模板中使用元素的条件格式。这个局部视图使用一个共享的 DataSource 来允许通过 Pager、一个两卡 ListView 和前面提到的模板进行导航。这是相关的模板代码：

```
<script id="contact-template" type="text/x-kendo-template">
<div id="ContactCard" class="IsActive${IsActive}">
    #if (Salutation === null || Salutation === '') {#<h4>#}else{#<h4>#=Salutation# #}##=FirstName# #=LastName#</h4>
    #if (Title === null || Title === '') {##}else{#<p>#=Title#</p>#}#
    <br />
    #if (Email == 0 || Email === '') {##}else{#<p><a href='mailto:#=LastName#,%20#=FirstName#%20<#=Email#>'>#=Email#</a></p>#}#
    #if (Phone === null  || Phone === '') {##}else{#<p>#=Phone##if (Extension === null || Extension === '') {#</p>#}else{# ext. #=Extension#</p>#}##}#
</div> 
```

我尝试了几种不同的方法来生成这段代码，包括一个简单的 if 和反向检查，`if (Salutation != null && Salutation != '')`但无济于事。我想我错过了一些关于如何从#if 部分引用数据源数据的内容？我尝试了类似`if (#=Salutation# != null && #=Salutation# != '')`的方法，但这引发了一个错误的模板错误。

这是输出：

![输出](../Images/f1c711a8dee0605e99861ec8a65446dd.png)

注意：忽略可怕的格式。这是预造型。

这是整个文件，供参考：

```
@model int   @* accountId  *@

<article id="contactArticle">
    <div id="contactList"></div>
    <footer><span id="pagerTotal"></span><a href="#" class="k-link" id="pageLeft" onclick="pageLeftOne()"><</a><div id="pager"></div><a href="#" class="k-link" id="pageRight" onclick="pageRightOne()">></a></footer>
</article>
<script id="contact-template" type="text/x-kendo-template">
    <div id="ContactCard" class="IsActive${IsActive}">
        #if (Salutation === null || Salutation === '') {#<h4>#}else{#<h4>#=Salutation# #}##=FirstName# #=LastName#</h4>
        #if (Title === null || Title === '') {##}else{#<p>#=Title#</p>#}#
        <br />
        #if (Email == 0 || Email === '') {##}else{#<p><a href='mailto:#=LastName#,%20#=FirstName#%20<#=Email#>'>#=Email#</a></p>#}#
        #if (Phone === null  || Phone === '') {##}else{#<p>#=Phone##if (Extension === null || Extension === '') {#</p>#}else{# ext. #=Extension#</p>#}##}#
    </div>
</script>
<script type="text/javascript">
    var currentPage = 1;
    var pages;
    var contactDataSource;

    //SNIP//   

    $(document).ready(function() {
        var init = 1;
        contactDataSource = new kendo.data.DataSource({
            transport: {
                read: {
                    url: '@Url.Action("ContactPager", "Contact")',
                    dataType: "json",
                    type: "POST",
                    timeout: 2000,
                    data: {
                        accountId: @Model
                    }
                }
            },
            schema: {
                data: "data",
                total: "total",
                type: "json",
                model: {
                    fields: {
                        Id: { type: "string"},
                        FirstName: { type: "string" },
                        LastName: { type: "string"},
                        Title: { type: "string", defaultValue: ''},
                        Salutation: { type: "string", defaultValue: ''},
                        Extension: { type: "string", defaultValue: ''},
                        Phone: { type: "string", defaultValue: ''},
                        Email: { type: "string", defaultValue: ''},
                        IsActive: {type: "boolean"} //,
                        //ReceivesDistributionEmails: {type: "boolean"}
                    }
                }
            },
            pageSize: 2
        });

        contactDataSource.read();

        contactDataSource.bind("change", function(e) {
            if (init) {
                init = 0;
                if (contactDataSource.total() < 1) {
                    //SNIP

                } else {
                    $("#pager").kendoPager({
                        dataSource: contactDataSource,
                        buttonCount: 5
                    });
                    //SNIP//     
                    pages = $("#pager").data("kendoPager").dataSource.totalPages();

                    $("#contactList").kendoListView({
                        dataSource: contactDataSource,
                        pageable: true,
                        template: kendo.template($("#contact-template").html())
                    });
                    kendo.init($("#contactList"));
                }
            }
        });
    });

</script> 
```

**TL;DR：**我如何获得一个剑道模板来根据数据源成员的价值来构建它的内容？

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2012-06-14T19:39:56.873

尝试将 null 用单引号括起来：

```
...
#if (Title != 'null' && Title != '')  { #
     <p>#=Title# </p> 
# } #
... 
```

尽管标签被留下，但这种表示法可以用作替代方法。它可以根据您尝试实现的格式来工作。

```
<p>${ Title != 'null' && Title != '' ? Title : ''} </p> 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2014-08-07T16:00:43.517

我知道这很旧，但我使用的另一个解决方案如下：

```
@(Html.Kendo().Grid<Object>()
    .Name("dataGrid")
    .DataSource(ds =>
        ds.Ajax()
            .Read(r => r.Action("Action", "Controller", new { area = "area" }))
            .ServerOperation(true)
            .PageSize(50)
            )
    .Columns(cols =>
    {
        cols.Bound(t => t.Property);
    })
    .Resizable(resizeable => resizeable.Columns(true))
    .Scrollable(t => t.Virtual(true))
    .Sortable()
    .Filterable()
    .ColumnMenu()
    .HtmlAttributes(new { style = "height:98%;width:100%;", @class="cssClass" })
    .Events(e => e.DataBound("onDataBound"))
    .Deferred()
    .ClientRowTemplate("<tr>" +
            "#=checkNull(Property)#" +
            "</tr>")
 ) 
```

然后，您可以添加一个*JavaScript*函数来检查该属性。

```
 function checkNull(item) {
        return item === null ? "" : item;
    } 
```

这很令人沮丧，所以它可能会帮助其他人。显然，您可以更改该功能以检查您喜欢的任何内容。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-04-28T12:47:30.993

对于快捷方式，您可以使用：

```
# if(property){ #
#: property #
# } # 
```

如果要根据值显示/隐藏（不是空字符串或 null）

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2015-12-15T21:46:40.907

我意识到这是一个旧线程，但是我的回答可能对某人有用。

你可以像这样内联你的条件：

```
groupHeaderTemplate: "${ value == 'D' ? 'Declined' : value == 'P' ? 'Pending' : value == 'A' ? 'Approved' : value }" 
```

# asp.net-mvc-3 - Telerik MVC Editor Insert Image - 仅显示加载动画和图像名称

> ID：11038653
> 
> 赞同：0
> 
> 时间：2012-06-14T17:54:08.253
> 
> 标签：asp.net-mvc-3, telerik, telerik-mvc, telerik-editor

我们目前正在使用 Telerik 的 MVC 编辑器，专门用于浏览要选择的图像。编辑器显示，允许弹出屏幕并在内容文件夹中查找所有图像，但是，加载动画微调器位于每个图像旁边，并且从不解析缩略图。每个微调器旁边都有每个图像的名称，所以我知道它至少在正确的位置寻找，但是它只会旋转而不会真正显示缩略图。

这是视图代码：

```
@{Html.Telerik().EditorFor(m => m.ProductImageSize.Filename)
                        .Tools(tools => tools.Clear().InsertImage())
                              .FileBrowser(browser => browser.Browse("Browse", "ProductImageBrowser")
                              .Thumbnail("Thumbnail", "ProductImageBrowser")
                              .Upload("Upload", "ProductImageBrowser")
                              .DeleteFile("DeleteFile", "ProductImageBrowser"))
                        .HtmlAttributes(new { style = "width:450px; height:400px;" })
                        .Render();
        } 
```

选择图像也可以！很难分辨您选择的是哪个图像，因为用户只有要关闭的图像的名称。

任何帮助深表感谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-15T14:20:28.700

通过升级我的 Telerik 版本，我能够“解决”这个问题。不是真正的解决方案，但从他们的支持页面来看，它似乎是在他们的代码中。

# ruby-on-rails-3 - 使用 Twilio 在 Rails 中接收文本时遇到问题。存储到数据库时接收 nil。

> ID：11038654
> 
> 赞同：1
> 
> 时间：2012-06-14T17:54:08.363
> 
> 标签：ruby-on-rails-3, post, twilio

我已经在我的 Twilio 帐户中设置了请求 URL，以便将其 POST 到：myurl.com/receivetext。它似乎已成功发布，因为当我使用 Heroku 控制台检查数据库时，我看到以下内容：

帖子 ID：5，正文：nil，来自：nil，created_at：“2012-06-14 17:28:01”，updated_at：“2012-06-14 17:28:01”

为什么它从身体和属性中接收 nil ？我无法弄清楚我做错了什么！创建和更新的 at 存储成功，但我关心的两个属性继续存储为 nil。

这是接收来自 Twilio 的 Post 请求的 Receive Text 控制器：

```
class ReceiveTextController < ApplicationController
  def index
    @post=Post.create!(body: params[:Body], from: params[:From])
  end
end 
```

编辑：当我转储参数时，我收到以下信息： "{\"controller\"=>\"receive_text\", \"action\"=>\"index\"}"

我通过将以下内容插入到我的 ReceiveText 控制器中来实现这一点。@params = Post.create!(body: params.inspect, from: "Dumping Params") 然后打开 Heroku 控制台以查找带有 from = "Dumping Params" 的数据库条目。

我使用以下命令 curl -X POST myurl.com/receivetext route -d 'AccountSid=AC123&From=%2B19252411234' 模拟了带有 curl 的 Twilio 请求

我再次检查了生产数据库，发现 curl 请求在获取 FROM 属性时确实有效。它存储了以下内容：

params.inspect 返回 "{\"AccountSid\"=>\"AC123\", \"From\"=>\"+19252411234\", \"co..."

我收到一条评论说：“只要 twilio 使用相同的方法（GET/POST）访问相同的 URL，它也应该填充 params 数组”我不知道如何使这个评论可行。我对rails很陌生。

这是我的数据库迁移（我将两个属性都设置为字符串。我尝试将其设置为文本，但也没有用）：

```
 class CreatePosts < ActiveRecord::Migration
   def change
    create_table :posts do |t|
    t.string :body
    t.string :from

    t.timestamps
   end
  end
 end 
```

这是我的帖子模型：

```
 class Post < ActiveRecord::Base
   attr_accessible :body, :from
 end 
```

路线（一切似乎都很好）：

```
 MovieApp::Application.routes.draw do
  get "receive_text/index"
  get "pages/home"
  get "send_text/send_text_message"

  root to: 'pages#home'

  match '/receivetext', to: 'receive_text#index'
  match '/pages/home', to: 'pages#home'
  match '/sendtext', to: 'send_text#send_text_message'
 end 
```

这是我的gemfile（以防有帮助）

```
 source 'https://rubygems.org'

  gem 'rails', '3.2.3'
  gem 'badfruit'
  gem 'twilio-ruby'
  gem 'logger'
  gem 'jquery-rails'

 group :production do
  gem 'pg'
 end

 group :development, :test do
  gem 'sqlite3'
 end

 group :assets do
  gem 'sass-rails',   '~> 3.2.3'
  gem 'coffee-rails', '~> 3.2.1'
  gem 'uglifier', '>= 1.0.3'
 end 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-18T17:08:46.143

哇！我终于弄清楚了为什么这不起作用。事实证明，我在我的 Twilio 帐户中创建了一个新的“APP”，并在我创建的这个附加应用程序中设置了 POST 目标 URL。问题在于我使用的是 Twilio 沙盒试用帐户，我需要将 POST url 粘贴到“测试您的应用程序”部分的沙盒输入字段中。

# android - 使用 BitmapRegionDecoder 平铺大图像

> ID：11038662
> 
> 赞同：3
> 
> 时间：2012-06-14T17:54:40.950
> 
> 标签：android, bitmap

我目前正在尝试将大图像 (1800x1800) 设置为 Google MapView 上的叠加层。我已经想出了如何平铺它，但我不太确定如何将每个平铺放在正确的位置。我正在使用 BitmapRegionDecoder 将较大的图像切成几个 100x100 的图块。我假设我将使用较大的`Rect`对象作为较大图像的框架，但我不太确定如何将每个较小的图像放置在框架内的适当位置。

```
Rect outerFrame = new Rect(0, 0, 1800, 1800);
            try {
                asset = this.getResources().getAssets().open("foo.png");
                decoder = BitmapRegionDecoder.newInstance(asset, false);

                for (int y = 0; y < 1800; y += 100)
                {
                    for (int x = 0; x < 1800; x += 100)
                    {
                        Rect innerTile = new Rect(x, y, x + 100, y + 100);
                        Bitmap region = decoder.decodeRegion(innerTile, null);
                        // Need something here
                    }
                }
            } catch (IOException e) {
                // TODO Auto-generated catch block
                e.printStackTrace();
            } 
```

# ruby-on-rails - 单击水豚后如何测试禁用提交按钮？

> ID：11038663
> 
> 赞同：6
> 
> 时间：2012-06-14T17:54:42.583
> 
> 标签：ruby-on-rails, testing, browser, capybara

我们正在尝试在单击某个提交按钮*后禁用它。*像这样的东西：

```
assert !page.has_css?("#review_button[disabled='disabled']")
click_button "Review"
assert page.has_css?("#review_button[disabled='disabled']") 
```

当然，问题在于表单在检查第二个断言之前提交。有什么方法可以禁用表单的实际提交，或者在检查第二个断言之前暂停它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-15T17:50:24.167

我记得遇到过同样的问题，但从未找到解决此问题的好方法，因为正如您所说，它只有在“审查”操作完成时才会进入下一个断言。

考虑到按钮所做的操作花费了很长时间（因此证明禁用按钮是合理的），我最终做的是让操作创建一个延迟作业作业，然后让它异步运行。然后很容易模拟它并让它休眠几秒钟（或者你有什么）来检查按钮是否被禁用。

# c# - C# 后台工作人员在第二次运行时冻结 UI

> ID：11038664
> 
> 赞同：3
> 
> 时间：2012-06-14T17:54:45.630
> 
> 标签：c#, backgroundworker

在我的 UI 中，当按下按钮时，将执行以下代码：

```
backgroundWorker1 = new BackgroundWorker();
backgroundWorker1.WorkerSupportsCancellation = true;
backgroundWorker1.WorkerReportsProgress = true;
backgroundWorker1.DoWork += new DoWorkEventHandler(backgroundWorker1_DoWork);
backgroundWorker1.ProgressChanged += new ProgressChangedEventHandler(backgroundWorker1_ProgressChanged);
backgroundWorker1.RunWorkerCompleted += new RunWorkerCompletedEventHandler(backgroundWorker1_RunWorkerCompleted);
backgroundWorker1.RunWorkerAsync(); 
```

这第一次效果很好。当我点击按钮（然后被禁用）时，我仍然可以在后台任务执行时移动窗口并单击内容。但是当后台工作者完成（按钮再次启用）并且我再次按下它时，后台工作者运行，但我不再控制窗口。

我不知道为什么这第二次不起作用。在后台工作程序运行之前或之后我需要做些什么以确保它不会阻塞 UI 线程？

谢谢！

**编辑：**在backgroundworker ProgressChanged 处理程序中，我更新了一个进度条和显示后台worker 距离的文本标签。它们不断更新，永远不会冻结。但是当我尝试拖动窗口或单击其他控件时，它们只会定期响应。

backgroundworker 访问一个类的实例，该实例是 UI 线程中的全局变量。想法是实例化对象，运行对象从后台工作人员的 DoWork 内部执行的长函数，然后在后台工作人员完成后访问该对象以查看结果。这可以吗？

在后台工作人员的 DoWork 中调用的这个对象的函数内部，访问了几个静态类。这会导致任何类型的线程问题吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-14T18:08:47.780

您可以通过`BackgroundWorker`两种方式使用。

1.  通过将其从工具箱拖放到窗体并在属性窗口中设置其属性和事件。

2.  通过以编程方式定义它。

可能你混合了这两种方法。

* * *

如果您使用第一种方法，则删除所有初始化代码（表单会自动为您完成！）并仅调用

```
backgroundWorker1.RunWorkerAsync(); 
```

* * *

如果您想使用第二种方法，请**不要**将其放在表单上。而是将其声明为成员变量。能够将其作为组件添加到表单的唯一目的是启用通过属性窗口设置属性和事件。`BackgroundWorker`不需要表单中的任何内容，并且可以完全独立于任何表单使用。然后在表单构造函数中设置工作者

```
backgroundWorker1 = new BackgroundWorker();
backgroundWorker1.WorkerSupportsCancellation = true;
backgroundWorker1.WorkerReportsProgress = true;
backgroundWorker1.DoWork += new DoWorkEventHandler(backgroundWorker1_DoWork);
backgroundWorker1.ProgressChanged +=
    new ProgressChangedEventHandler(backgroundWorker1_ProgressChanged);
backgroundWorker1.RunWorkerCompleted +=
    new RunWorkerCompletedEventHandler(backgroundWorker1_RunWorkerCompleted); 
```

并且仅在按钮单击处理程序中执行此操作

```
backgroundWorker1.RunWorkerAsync(); 
```

* * *

对于您在本节的工具箱中找到的大多数或所有组件，同样的注意事项也是如此`Components`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-14T18:16:50.570

如果可能的话，尝试使用[反应式扩展](http://msdn.microsoft.com/en-us/data/gg577609.aspx)......它非常适合异步处理。

# javascript - 根据表单中的选择更改表单中的变量

> ID：11038670
> 
> 赞同：0
> 
> 时间：2012-06-14T17:54:59.187
> 
> 标签：javascript, ruby-on-rails, forms

**2012 年 6 月 21 日更新**

我在 Rails 中有一个类似于电子商务结帐的表单。

用户在表单中选择开始时间、结束时间、日期、时间和价格偏好（每小时、每周、每天等）。该产品已经在数据库中设置了我要转换的价格（每小时、每周、每天等），我想根据价格偏好进行更改，然后与表单的其余部分一起提交。

我一直在关注 Ryan 在[动态选择菜单](http://railscasts.com/episodes/88-dynamic-select-menus-revised?view=asciicast)上的截屏视频，但我不确定如何将他的演示融入我的应用程序，因为我不希望用户只选择价格（每天/每小时/等） .)

Gear has_many line_items line_items 属于 Gear 和 Carts

下面是我的代码：

**齿轮模型（我在其中创建了价格变量）**

```
class Gear < ActiveRecord::Base
  attr_accessible :title, :size, :price, :sub_category_id, :user_id, :image, :image_a, :remote_image_url, :color, :year, :latefee, :cancellation, :minrental, :policy, :about, :address, :city, :state, :zip
  belongs_to :user
  belongs_to :sub_category
  has_one :category, :through => :sub_category
  has_many :comments, :dependent => :destroy 
  has_many :line_items
  has_many :calendars
  require 'carrierwave/orm/activerecord'
  mount_uploader :image, GearpicUploader
  mount_uploader :image_a, GearpicUploader
  before_destroy :ensure_not_referenced_by_any_line_item

  validates :title, presence: true
  validates :size,  presence: true
  validates :price, presence: true
  validates :sub_category_id, presence: true
  validates :user_id, presence: true

  def hourly_price
    price/24
  end

  def weekly_price
    price*7
  end

  def monthly_price
    weekly_price*4
  end
end 
```

**看法**

```
<div class="gearside_date_top">
    <%= form_for LineItem.new do |f| %>
    <p><%= render :partial => "price" %> / 
        <%= f.select :day_or_hour, [['day', 1], ['hour', 2]], :id => 'day_or_hour' %>
    </p>
</div> 
```

**部分给予查看**

```
<em>from</em>
<span id="gear_daily" style="font-size: 190%; color: #94cbfc;">$<%= @gear.price %></span>
<span id="gear_hourly" style="font-size: 190%; color: #94cbfc; display:none;">$<%= @gear.hourly_price %></span> 
```

**Javascript**

```
$('#day_or_hour').change(function() {

     var $index = $('#day_or_hour').index(this);

     if($('#day_or_hour').val() = '2') { 
     $('#gear_hourly').show(); 
     } 
     else {
     $('#gear_daily').show();//else it is shown

     }
}); 
```

我似乎无法让它工作。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-14T18:06:24.947

你可以把你的价格部分：

```
<div class="gearside_date_top">
  <%= form_for LineItem.new do |f| %>
  <%= render :partial => "price" %>
  <%= f.select :day_or_hour, [['day', 1], ['hour', 2]], :id => 'day_or_hour' %> 
```

**_price.html.erb**

```
<em>from</em><span style="font-size: 190%; color: #94cbfc;">$<%= @gear.price %></span> 
```

在你的 line_item.js 你把代码更新价格： **line_item.js**

```
$('#day_or_hour').change(function() {
  $.get("/cart/update_price", {option: $(this).val()}, function(data) {
  }
} 
```

在**cart_controller.rb 上**创建调用 line_item.rb total_price 的方法 update_price。

希望你能理解。

**编辑**

它看起来像这样。

```
def update_price
  @gear.price = LineItem.total_price(@gear)
  render :partial => 'price'
end 
```

# c# - 带有按钮的 ASP.NET 链接 Enter 键？

> ID：11038673
> 
> 赞同：9
> 
> 时间：2012-06-14T17:55:17.083
> 
> 标签：c#, asp.net, event-handling, webforms

我偶然发现了一个 ASP.NET Web 应用程序的小问题。

我的页面上有几个按钮，我想通过按 Enter 键来访问它们（取决于哪个`TextBox`是焦点）。

谷歌搜索帮助了我，我想，但没有。

这是我发现的：

```
tbEmail.Attributes.Add("onkeydown", "if(event.which || event.keyCode){if ((event.which == 13) || (event.keyCode == 13)) {document.getElementById('" + btRegister.UniqueID + "').click();return false;}} else {return true}; "); 
```

[来源](http://www.beansoftware.com/ASP.NET-Tutorials/Accept-Enter-Key.aspx)

这似乎不起作用，它仍然按下我现在不想按下的另一个按钮。

有什么建议么？

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2012-06-14T18:00:04.063

看起来您正在使用 Web 表单。

您可以将您正在做的事情包装在 a 中，并在面板内`Panel`设置属性。`DefaultButton`

```
<asp:Panel ID="LoginPanel" runat="server" DefaultButton="btLogin">
  <asp:TextBox ID="txtUser" runat="server" />
  <asp:TextBox ID="txtPass" runat="server" />
  <asp:Button ID="btLogin" runat="server">Login</asp:Button>
</asp:Panel> 
```

当用户在其中一个中输入数据`txtUser`然后`txtPass`按下`Enter`键时，他们将触发按钮`btLogin`。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-14T17:57:54.360

不要尝试使用 JavaScript - 将表单放入 an`<asp:Panel>`并将`DefaultButton`属性设置为按钮的 id。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-06-14T17:57:43.817

使用 jQuery 会容易得多。绑定到[按键](http://api.jquery.com/keypress/)事件。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-14T17:59:08.953

您可以为每个文本框使用一个按键事件，这将做不同的事情..所以：

```
private void a_keyPress(object sender, KeyPressEventArgs e)
{
    RadTextBox myBox = (RadTextBox)sender;

    if (e.KeyChar == (char)Keys.Return)
    {
        if (myBox.ID == "textbox1")
        // then do stuff...
    }
    else if //do stuff...
} 
```

# php - 在指定时间后删除 Mysql 行

> ID：11038675
> 
> 赞同：3
> 
> 时间：2012-06-14T17:55:48.563
> 
> 标签：php, mysql

我正在尝试创建一个计算机预订系统，用户可以在其中选择一台计算机并选择他将使用这台 PC 的时间。在那个时候其他人无法保留这台电脑，我需要找到一个解决方案，如何在他们的时间到期后自动删除所有包含保留电脑的行。谢谢你的建议。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-14T18:00:47.700

处理此问题的常用方法是在行`expires_at`上存储时间戳。`reservation`然后，您查找任何“开放”预订的查询将具有`WHERE 'expires_at' < NOW()`或类似的东西。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-14T18:00:45.683

如果您的服务器是 linux，您可以使用**cron 作业**在每个预订日期每天检查一次。如果这些日期已过期.. 修改后的油田储备可用。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-06-14T18:30:48.033

这是一个未经测试的答案，可能只是一个建议，但我刚开始研究这些，所以也对反馈感兴趣。我仍在研究可能性和缺点，但它可能很适合您的需要。

看看 MySQL Events，一篇关于它的文章在[这里](http://www.sitepoint.com/how-to-create-mysql-events/)，官方语法在[Mysql Docs](http://dev.mysql.com/doc/refman/5.1/en/create-event.html)。
根据文章：

> 事件类似于触发器。但是，事件不是响应数据更改而运行，而是可以安排在特定时间段内运行任意次数。实际上，这是一个仅限数据库的 cron 作业。

考虑到这一点，我设想了一个删除任何 >1 小时的程序（如果那是到期）。此过程将在新插入时触发以删除当时过期的任何内容，但**也会**在每 15 分钟左右运行一次的事件中触发，以便触发器的自动删除不依赖于其他人添加保留以触发该事件程序。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-06-14T18:07:33.817

通常我会这样做：

*   存储预订时，存储数据类型`date_from`和`date_to`两者`DATETIME`
*   当检查是否有计算机免费检查所有计算机并过滤时`WHERE '{$my_date}' >= date_to AND '{$my_date}' <= date_from`- 通过这个您应该能够获得在特定时间内未保留的所有 PC...

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-06-14T18:15:00.600

要在解决方案中完成，您需要运行一个 CRON 作业，该作业调用一个查询以删除所有具有 reservation_time + (15 * 60) < unix_timestamp() 的预留。

我假设您有时间进行预订或开始预订，并且正在使用 UNIX/Epoch 时间戳。

如果你知道它总是一个固定的时间间隔，即 15 分钟，而不是做 expires_now，你可以这样做：

```
DELETE FROM reservations WHERE  reservation_time + (15 * 60) < unix_timestamp() 
```

您可以研究的是从 PHP 管理 cron 作业，[http://www.highonphp.com/cron-job-manager](http://www.highonphp.com/cron-job-manager)。

上面的脚本将在创建预留时插入一个条目到 /etc/cron.d/ 中，您可以将其配置为在预期的预留结束时间运行。然后在将要执行的 php 文件中，您可以执行以下操作：

```
DELETE FROM reservations WHERE id = :id 
```

# xml - 如何用powershell修改本地xml？

> ID：11038677
> 
> 赞同：0
> 
> 时间：2012-06-14T17:56:04.797
> 
> 标签：xml, powershell

```
$doc = New-Object System.Xml.XmlDocument
$doc.Load(“http://nykdev101.us.net.intra/carlos/amoncalltracker-temp-3-2011.nsf/%28XMLView%29?OpenAgent&view=%28StaffDetailsByRotation%29”)
$xml = [xml]($doc)
$xml.Save("C:/TEMP/data.xml") 
```

我写的只是从远程 url 保存一个相同的 xml

这是原始的 .xml 文件：

```
<xml version="1.0">
  -<VIEW ID="DBA58FEDF4D">
   -<DOC ID="A1D46BAD94">
     -<APPNAME>
     <![CDATA[ 1042%2OPRC]]>
     </APPNAME>
    <RTN/>
  -<SUPPORTCONTACTNAME>
     -<![CDATA[Emelie%20Pierrel]]>
   </SUPPORTCONTACTNAME>
  -<STCONTACT>
     -<![CDATA[]]>
   </STCONTACT>
  -<NDCONTACT>
     -<![CDATA[]]>
   </NDCONTACT>
   -<RDCONTACT>
     -<![CDATA[201-850-6560]]>
   </RDCONTACT>
   -<THCONTACT>
   </THCONTACT>
   -<OFFICECONTACT>
   </OFFICECONTACT>
  </DOC> 
```

我想删除所有可能导致显示错误的“-”和“，”。

我要怎么写？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-14T18:19:21.907

```
$xmltext = Get-Content C:/TEMP/data.xml
$pattern = "-<"
$new = "<"
foreach($line in $xmltext) {
    $replace = [regex]::replace($line, $pattern, $new)
    echo $replace
} 
```

# html - CSS优化问题

> ID：11038686
> 
> 赞同：2
> 
> 时间：2012-06-14T17:56:43.307
> 
> 标签：html, css, less

我找到了一个我非常喜欢的 CSS 条纹和平铺组合。问题是，它让*一切变得*非常非常缓慢。我想知道，我应该使用什么技术来使这个 css 更加优化？还是技术本身要求太高？

我用[的少](http://lesscss.org/ "较少的")。

```
.head {
    .stripes;
    .angled;
}

.stripes {          
        -webkit-background-size: 50px 50px;
        -moz-background-size: 50px 50px;
        background-size: 50px 50px; /* Controls the size of the stripes */

        -moz-box-shadow: 1px 1px 8px gray;
        -webkit-box-shadow: 1px 1px 8px gray;
        box-shadow: 1px 1px 8px gray;
    }

.angled {
        background-color: @light-blue;
        background-image: -webkit-gradient(linear, 0 100%, 100% 0,
                                color-stop(.25, rgba(255, 255, 255, .2)), color-stop(.25, transparent),
                                color-stop(.5, transparent), color-stop(.5, rgba(255, 255, 255, .2)),
                                color-stop(.75, rgba(255, 255, 255, .2)), color-stop(.75, transparent),
                                to(transparent));
        background-image: -webkit-linear-gradient(45deg, rgba(255, 255, 255, .2) 25%, transparent 25%,
                            transparent 50%, rgba(255, 255, 255, .2) 50%, rgba(255, 255, 255, .2) 75%,
                            transparent 75%, transparent);
        background-image: -moz-linear-gradient(45deg, rgba(255, 255, 255, .2) 25%, transparent 25%,
                            transparent 50%, rgba(255, 255, 255, .2) 50%, rgba(255, 255, 255, .2) 75%,
                            transparent 75%, transparent);
        background-image: -ms-linear-gradient(45deg, rgba(255, 255, 255, .2) 25%, transparent 25%,
                            transparent 50%, rgba(255, 255, 255, .2) 50%, rgba(255, 255, 255, .2) 75%,
                            transparent 75%, transparent);
        background-image: -o-linear-gradient(45deg, rgba(255, 255, 255, .2) 25%, transparent 25%,
                            transparent 50%, rgba(255, 255, 255, .2) 50%, rgba(255, 255, 255, .2) 75%,
                            transparent 75%, transparent);
        background-image: linear-gradient(45deg, rgba(255, 255, 255, .2) 25%, transparent 25%,
                            transparent 50%, rgba(255, 255, 255, .2) 50%, rgba(255, 255, 255, .2) 75%,
                            transparent 75%, transparent);
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-20T13:05:32.960

几周前，我在 Firefox、Opera 和 Chrome 上测试了这种技术，使用简单的两种颜色渐变来获得垂直条纹。它适用于大背景尺寸，但是当您将其设置为只有几个像素时，浏览器需要更多时间来渲染它，尤其是在您最大化窗口时。Opera 和 Chrome 处理得很好。有时您会在 cpu 使用图上看到一个峰值，但这还不错。另一方面，Firefox 在 cpu 上发疯了。渐变和背景大小的实现方式很可能是问题。我认为至少现在使用图像会更好。您可能希望使用 base64 并将其放入您的 css 以避免另一个请求。

# asp.net - 使用选项卡式局部视图的 ASP.Net MVC3 主/详细信息

> ID：11038690
> 
> 赞同：0
> 
> 时间：2012-06-14T17:56:49.357
> 
> 标签：asp.net, asp.net-mvc-3, partial-views, master-detail

我正在针对 SQL Server 数据库开发我的第一个 ASP.Net MVC 3 Web 应用程序。我使用 Database First 从现有数据库创建 dbContext 和 Models。

我正在尝试创建 1-M 关系的主/详细视图。我有 TableA 与 TableB 和 TableC 相关，每个都有 1-M 关系。但是 TableB 和 TableC 彼此没有直接关系。

当用户从 TableA 转到记录的详细信息视图时，我希望它在视图顶部显示一个部分，其中包含来自 TableA 中列的数据。然后在下面我想要一组选项卡，每个相关表（TableB 和 TableC）都有一个选项卡。例如，当用户单击 TableB 选项卡时，我想加载一个部分视图，列出 TableB 中的所有相关记录。

有人可以帮我弄清楚如何做到这一点吗？我会发布代码，但我不确定从哪里开始。

我做了一些研究，发现了很多讨论 ViewModel 的帖子，但我不确定这与我的 TableA 模型有何不同，其中包括 TableB 和 TableC 的相关集合。我还发现了如何将每个关系中的记录加载到 TableA 详细信息视图中的不同表中，但这不包括我需要的选项卡功能。

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-20T15:37:13.380

我最终为每个子表创建了局部视图，并使用 AJAX ActionLink 根据选项卡加载局部视图。

TableA 视图的一部分（主）：

```
<div>
    <nav>
        <ul id="menu">
            <li>@Ajax.ActionLink("TableB", "TableATableBList", "TableB", New With {.id = Model.TableAID}, New AjaxOptions With {.UpdateTargetId = "partial-div"})</li>
            <li>@Ajax.ActionLink("TableC", "TableATableCList", "TableC", New With {.id = Model.TableAID}, New AjaxOptions With {.UpdateTargetId = "partial-div"})</li>
        </ul>
    </nav>
    <section>
        <div id="partial-div">
        </div>
    </section>
</div> 
```

表B控制器：

```
Public Class FlightlineController
        Inherits System.Web.Mvc.Controller

        Private db As MyEntities = New MyEntities

        '
        ' GET: /TableB/

        Function Index() As ViewResult
            Dim tableBs = db.TableBs.Include(Function(b) b.TableA)
            Return View(tableBs.ToList())
        End Function

        Function TableATableBList(ByVal id As Guid) As PartialViewResult
            Dim tableA As TableA = db.TableAs.Find(id)
            Return PartialView("TableBList", tableA.TableBs.ToList())
        End Function 
```

# c# - App.config：appSettings“文件”属性未从 Local.config 读取

> ID：11038694
> 
> 赞同：6
> 
> 时间：2012-06-14T17:57:02.823
> 
> 标签：c#, app-config

我有一个测试项目，其中`App.config`设置了一些设置的默认值。我想在本地级别覆盖这些设置，例如，每个开发人员都可以使用他们自己的凭据。

在我的 App.config 我有以下内容：

```
<appSettings file="Local.config">
    <add key="Username" value="USERNAME"/>
    <add key="Password" value="PASSWORD"/>
</appSettings> 
```

在 Local.config （在同一目录中）我有以下内容：

```
<appSettings>
    <add key="Username" value="wayne"/>
    <add key="Password" value="secret"/>
</appSettings> 
```

当我运行测试时，我希望获取 Username 的值会从 Local.config 返回“wayne”；相反，它是 App.config 中的“用户名”——似乎它实际上并没有检测到我想覆盖另一个文件中的设置。

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-06-14T18:15:32.237

我不想问，但是您确定将 Local.config 复制到输出目录吗？

# iphone - 是否可以在不越狱的情况下在 iOS / iPhone 上获取来电显示？

> ID：11038695
> 
> 赞同：0
> 
> 时间：2012-06-14T17:57:04.213
> 
> 标签：iphone, ios

我的印象是，如果没有越狱，就不可能在 iOS 上获取来电的来电显示。

那是对的吗？我在哪里可以找到可以告诉我类似情况的官方文档？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-14T17:59:09.743

是的，您是对的，如果不越狱，您就无法从 iPhone 获取该信息并且由于该信息不可用，您将找不到任何有关它的信息或文档

# java - Hibernate 不会将记录添加到关联中

> ID：11038698
> 
> 赞同：0
> 
> 时间：2012-06-14T17:57:12.260
> 
> 标签：java, hibernate

我有：n 关系 beetwen 对象（会议、人员），因为许多人可以参加许多会议。

我已经这样设置了

会议

```
 @ManyToMany(mappedBy = "meetings")
protected Set<Person> participants = new HashSet<Person>(); 
```

人

```
@ManyToMany(cascade = {CascadeType.ALL})
@JoinTable(name = "person_meeting",
        joinColumns = {@JoinColumn(name = "person_id")},
        inverseJoinColumns = {@JoinColumn(name = "meeting_id")}
)
protected Set<Meeting> meetings = new HashSet<Meeting>(); 
```

ID DB hibernate 为我创建了带有两个字段的表 meeting_participants：meeting_id、person_id。酷，正如我所愿。现在有问题的案例。我创建了会议对象并将其保存到数据库。比我创建一组用户，我将它添加到会议中

```
this.saveMeeting.setParticipants(set); 
```

休眠显示：

```
Hibernate: update Meeting set duration=?, meetingDate=?, room=? where meeting_id=? 
```

没有任何东西添加到关联中。我需要改变什么？

// 编辑我已经更改了字段的会议定义

```
@ManyToMany(mappedBy = "meetings", cascade = {CascadeType.ALL})
protected Set<Person> participants = new HashSet<Person>(); 
```

现在我得到错误

```
org.hibernate.HibernateException: Illegal attempt to associate a collection with two open sessions 
```

就是在这个方法中

```
public static Long add(Meeting meeting) {
    SessionFactory sf = null;
    Session session = null;

    sf = HibernateUtil.getSessionFactory();
    session = sf.openSession();

    session.beginTransaction();
    try{
        session.save(meeting);
        session.getTransaction().commit();
        session.flush();
    } catch(HibernateException e){
        session.getTransaction().rollback();
        e.printStackTrace();
        return new Long(-1);
    }
    session.close();

    return meeting.getId();
} 
```

导致问题的行是：

**session.save（会议）；**

**编辑**

好的，我已经正确关闭了会话。一切正常，但只有在我创建新对象时才能找到。当我想更新关联时，它不起作用。所以问题是。如何更新关联？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-14T18:18:54.827

这个问题每两天问一次。您刚刚初始化了关联的一侧，而您选择了 Hibernate 忽略的一侧。双向关联具有*所有者*方和*反*方。Hibernate 只考虑*所有者*方。而*所有者*方是*没有*`mappedBy`属性的一方。

所以需要初始化关联的另一端：

```
for (Participant p : set) {
    p.getMeetings().add(saveMeeting);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-14T20:18:10.900

我已经解决了这个问题。我没有考虑这个，所以我没有写它。Person 是一个顶级类，它被另外两个扩展。我已经更改了更新操作，以便它采用 Object 类的实例。这样我就可以更新关联

# c# - TimeSpan.ParseExact ASP.NET 4 C#

> ID：11038700
> 
> 赞同：3
> 
> 时间：2012-06-14T17:57:24.253
> 
> 标签：c#, datetime, .net-4.0

我正在使用 .NET 4 并在执行以下操作时收到 Input string not in correct format 错误：

```
TimeSpan dropTime=TimeSpan.ParseExact("01:33 PM", "hh:mm tt", CultureInfo.InvariantCulture);
```

我究竟做错了什么？我也尝试过TT，以防万一，但这样做。否则我的格式似乎匹配？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-14T18:01:02.417

`tt`不是[MSDN](https://stackoverflow.com/questions/11038700/timespan-parseexact-asp-net-4-c-sharp)`TimeSpan`上所见的有效格式说明符。

您要解析的是*时间*而不是*TimeSpan* -`PM`指定一天中的时间，而不是时间间隔（`TimeSpan`代表什么）并且不能直接由`TimeSpan`.

您可以`DateTime`先使用它来解析它并从中获取`TimeSpan`：

```
DateTime.ParseExact("01:33 PM", "hh:mm tt", CultureInfo.InvariantCulture).TimeOfDay 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-14T18:04:57.380

您必须改用该类`DateTime`：

```
TimeSpan dropTime=DateTime.ParseExact("01:33 PM", "hh:mm tt", CultureInfo.InvariantCulture).TimeOfDay; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-14T18:10:28.977

只需使用 DateTime 对象，请参阅我的示例代码：

```
DateTime dropTime = new DateTime();
DateTime.TryParse("01:33 PM", out dropTime); 
```

这会将您的字符串解析为日期时间。

最好的问候，格雷戈尔·普里马尔

# python - Google App Engine 上的 mlpy、numpy、scipy

> ID：11038701
> 
> 赞同：6
> 
> 时间：2012-06-14T17:57:24.970
> 
> 标签：python, google-app-engine, numpy, scipy

MlPy / SciPy 可以在 GAE 上使用吗？

我相信我已经正确导入了 NumPy，因为到目前为止它没有引发任何错误（GAE 1.6 附带了对 NumPy 的支持）。但是，从我读到的内容来看，我仍然需要导入 SciPy 和 MlPy，但到目前为止我还无法做到。是否有任何文档可以准确解释如何在 GAE 上设置 MlPy（如果可能的话）？

为什么我需要 MlPy 的主要原因是我需要进行 k-means 分析（找到一个集群中心点）。是不是有一个“lite”库可以避免设置 NumPy 和 MlPy 的所有麻烦？

谢谢。

**编辑：**

我正在尝试导入 scipy。我所做的是：

1.  已下载[scipy-0.11.0b1.tar.gz](http://sourceforge.net/projects/scipy/files/scipy/0.11.0b1/scipy-0.11.0b1.tar.gz/download)
2.  将“scipy”文件夹提取到我的 GAE App 文件夹中
3.  从 python 文件中，调用“import scipy”

我得到的错误是：

```
ImportError: Error importing scipy: you cannot import scipy while
        being in scipy source directory; please exit the scipy source
        tree first, and relaunch your python intepreter. 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-14T18:14:07.697

应该支持用纯 Python 编写的不需要 C 模块的库。

**可能**支持使用 C 模块的 Python 编写的库。以下是支持和不支持的 C 模块的链接。这可能有助于确定是否支持您要使用的库。

[Google App Engine Python 库支持](https://cloud.google.com/appengine/docs/standard/python/tools/built-in-libraries-27)

# c# - c# 正则表达式解析 ical 格式的文件并用结果填充对象

> ID：11038703
> 
> 赞同：3
> 
> 时间：2012-06-14T17:57:27.533
> 
> 标签：c#, regex, parsing, icalendar

我正在尝试解析具有以下格式的文件：

```
BEGIN:VEVENT
CREATED:20120504T163940Z
DTEND;TZID=America/Chicago:20120504T130000
DTSTAMP:20120504T164000Z
DTSTART;TZID=America/Chicago:20120504T120000
LAST-MODIFIED:20120504T163940Z
SEQUENCE:0
SUMMARY:Test 1
TRANSP:OPAQUE
UID:21F61281-FB76-467F-A2CC-A666688BD9B5
X-RADICALE-NAME:21F61281-FB76-467F-A2CC-A666688BD9B5.ics
END:VEVENT 
```

我需要在每行的冒号或半冒号后面找到值，并将它们放入对象中的道具中。我正在尝试使用 Regex 来做到这一点，但在我使用 Regex 之后，我基本上忘记了我所知道的一切（可能一年两次）。任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-14T19:33:28.970

**编辑**

这篇文章让我想到了 iCal 格式。

昨天之前，我不知道 iCal 格式是什么。但是，在阅读了 1998 年的规范之后，很明显，这个页面上的任何答案都不足以解析内容。而且，即使对于我下面的一般正则表达式，它也确实太复杂了。

考虑到这一点，这是一个仅解析行内容的解决方案，正如从一般行内容解析的规范中收集的那样。这是朝着正确方向迈出的一步，希望有人能从中受益。它不做续行，也不验证。

C# 代码

```
Regex iCalMainRx = new Regex(
 @" ^  (?<name> [^[:cntrl:]"";:,\n]+ )
       (?<parameter>
          ;
          (?<param_name> [^[:cntrl:]"";:,\n]+ )
           = 
          (?<param_value> 
             (?: (?:[^\S\n]|[^[:cntrl:]"";:,])*  | "" (?:[^\S\n]|[^[:cntrl:]""])* "" )
             (?: , (?: (?:[^\S\n]|[^[:cntrl:]"";:,])*  | "" (?:[^\S\n]|[^[:cntrl:]""])* "" ) )*
          )
        )*
        :
        (?<value> (?:[^\S\n]|[^[:cntrl:]])* )
     $ ", RegexOptions.IgnorePatternWhitespace);

Regex iCalPvalRx = new Regex(
 @" ^ (?<pvals> (?:[^\S\n]|[^[:cntrl:]"";:,])*  | "" (?:[^\S\n]|[^[:cntrl:]""])* "" )
      (?: ,+ (?<pvals> (?:[^\S\n]|[^[:cntrl:]"";:,])*  | "" (?:[^\S\n]|[^[:cntrl:]""])* "" ) )*
    $ ", RegexOptions.IgnorePatternWhitespace);

string[] lines = {
    "BEGIN:VEVENT", 
    "CREATED:20120504T163940Z", 
    "DTEND;TZID=America/Chicago:20120504T130000", 
    "DTSTAMP:20120504T164000Z", 
    "DTSTART;TZID=,,,America/Chicago;Next=;last=\"this:;;;:=\";final=:20120504T120000", 
    "LAST-MODIFIED:20120504T163940Z", 
    "SEQUENCE:0", 
    "SUMMARY:Test 1", 
    "TRANSP:OPAQUE", 
    "UID:21F61281-FB76-467F-A2CC-A666688BD9B5", 
    "X-RADICALE-NAME:21F61281-FB76-467F-A2CC-A666688BD9B5.ics", 
    "END:VEVENT", 
};

foreach (string str in lines)
{
    Match m_content = iCalMainRx.Match( str );
    if (m_content.Success)
    {
        Console.WriteLine("Key =   " + m_content.Groups["name"].Value);
        Console.WriteLine("Value = " + m_content.Groups["value"].Value);

        CaptureCollection cc_pname  = m_content.Groups["param_name"].Captures;
        CaptureCollection cc_pvalue = m_content.Groups["param_value"].Captures;
        if (cc_pname.Count > 0)
        {
            Console.WriteLine("Parameters: ");
            for (int i = 0; i < cc_pname.Count; i++)
            {
                // Console.WriteLine("\t'" + cc_pname[i].Value + "'  =   '" + cc_pvalue[i].Value + "'");
                Console.WriteLine("\t'" + cc_pname[i].Value + "' =");
                Match m_vals = iCalPvalRx.Match( cc_pvalue[i].Value );
                if (m_vals.Success)
                {
                    CaptureCollection cc_vals = m_vals.Groups["pvals"].Captures;
                    for (int j = 0; j < cc_vals.Count; j++)
                    {
                        Console.WriteLine("\t\t'" + cc_vals[j].Value + "'");
                    }
                }

            }
        }
        Console.WriteLine("-------------------------");
    }
} 
```

输出

```
Key =   BEGIN
Value = VEVENT
-------------------------
Key =   CREATED
Value = 20120504T163940Z
-------------------------
Key =   DTEND
Value = 20120504T130000
Parameters:
        'TZID' =
                'America/Chicago'
-------------------------
Key =   DTSTAMP
Value = 20120504T164000Z
-------------------------
Key =   DTSTART
Value = 20120504T120000
Parameters:
        'TZID' =
                ''
                'America/Chicago'
        'Next' =
                ''
        'last' =
                '"this:;;;:="'
        'final' =
                ''
-------------------------
Key =   LAST-MODIFIED
Value = 20120504T163940Z
-------------------------
Key =   SEQUENCE
Value = 0
-------------------------
Key =   SUMMARY
Value = Test 1
-------------------------
Key =   TRANSP
Value = OPAQUE
-------------------------
Key =   UID
Value = 21F61281-FB76-467F-A2CC-A666688BD9B5
-------------------------
Key =   X-RADICALE-NAME
Value = 21F61281-FB76-467F-A2CC-A666688BD9B5.ics
-------------------------
Key =   END
Value = VEVENT
------------------------- 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-14T18:03:57.187

对于简单的 ICAL 文件而不是 RegEx 来说，插入行并使用 IndexOf(":") 可能就足够了。

检查是否已经存在 ICAL 解析器和[相关问题 ical+C#](https://stackoverflow.com/questions/tagged/ical+c%23)。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-14T18:07:21.373

尝试：

```
(?<key>[^:;]*)[:;](?<value>[^\s]*) 
```

C# 片段：

```
Regex regex = new Regex(
@"(?<key>[^:;]*)[:;](?<value>[^\s]*)",
RegexOptions.None
); 
```

它以除冒号或分号之外的任何字符的字符串作为键，然后将除空格以外的任何其他字符作为值。

如果您想对其进行测试或进行更改，请查看我博客上的正则表达式检查器：http: [//blog.stevekonves.com/2012/01/an-even-better-regex-tester/](http://blog.stevekonves.com/2012/01/an-even-better-regex-tester/)（需要silverlight）

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-14T18:04:25.423

我会亲自为文件中的每一行使用 string.Split(':') 。如果您不想再次重新学习正则表达式，这也具有易于阅读和理解的好处！

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-14T18:08:44.303

用几个例子运行它，看看它是否符合你的要求。我收到了关于拆分或 IndexOf 的其他评论，但如果您期望分隔符是*冒号*或分号，那么正则表达式可能会更好。

```
string line = "LAST-MODIFIED:20120504T163940Z";
var p = Regex.Match(line, "(.*)?(:|;)(.*)$", RegexOptions.CultureInvariant | RegexOptions.IgnoreCase | RegexOptions.Singleline);
Console.WriteLine(p.Groups[0].Value);
Console.WriteLine(p.Groups[1].Value);
Console.WriteLine(p.Groups[2].Value);
Console.WriteLine(p.Groups[3].Value); 
```

# android - Android：用红色感叹号找出 Eclipse 中的错误

> ID：11038705
> 
> 赞同：2
> 
> 时间：2012-06-14T17:57:30.460
> 
> 标签：android, compiler-errors

当我在 Eclipse 中我的项目名称旁边看到一个红色感叹号时，我该如何确定错误是什么？没有错误信息。我得到的只是“您的项目包含错误......”

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-06-14T18:01:57.033

转到 Eclipse 中的 Problems 选项卡，那里将提供任何项目错误的详细列表。

如果未打开，请转到：窗口 > 显示视图 > 问题

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-14T17:59:49.513

它很可能是构建路径错误。右键单击项目-> 属性-> 构建路径。在那里寻找错误。

另外，查看错误日志...应该在那里弹出。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-14T17:58:58.793

在控制台中查找它...或者您的可绘制图像名称可能包含大写字母、空格或减号。在 res/drawable 文件夹中，只允许使用 0 到 9、a 到 z 和下划线_ 的名称

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-14T18:03:25.410

这是一个简单的解决方案。我开始时遇到了同样的问题。

您将在底部看到 3 个选项卡。“控制台”、“Logcat”、“错误”

> 如果是算术错误或您写下的内容有误，Logcat 很可能是找到它的最佳位置。您也可以在这里找到错误行。
> 
> 错误是系统中的系统错误。对 jars 或项目的不同要求需要这个版本和你的这个版本。

现在，如果你找不到这个 2\. 在屏幕的左下角，你会看到一个小列和一个 + 符号，单击它会得到错误和 logcat。

# html - 我们可以阻止打开 CSS、JS 文件吗？

> ID：11038719
> 
> 赞同：0
> 
> 时间：2012-06-14T17:58:19.517
> 
> 标签：html, css, blocking

我们在 HTML、PHP 页面中链接 CSS 和 JS 文件是很常见的。我们可以阻止直接从浏览器打开 CSS 和 JS 文件吗？由于任何人都可以查看源代码，因此他/她可以通过了解路径来打开这些文件。我们如何才能实现阻止这些文件？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-14T18:01:29.137

您需要设置您的 Web 服务器以仅在您的主机（查看 http 标头）引用时为静态内容（js、img、css）提供服务，但这不会完全阻止用户这样做。至于`php`用户看不到它，它在服务器上运行，并且大部分时间都会输出 inert `html`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-14T18:02:18.060

`Referer`基本块将强制浏览器在访问文件时发送有效的标头。这可以通过一些简单的 .htaccess 来完成：

```
RewriteEngine on
RewriteCond %{HTTP_REFERER} !your\.domain\.here [NC]
RewriteCond %{REQUEST_FILENAME} \.(css|js) [NC]
RewriteRule .* - [L,F] 
```

然而，这不是一个好主意，因为它很容易伪造引荐来源网址，或者添加到页面的链接以便浏览器自然发送它。此外，一些浏览器只是不显示引用标题。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-14T18:02:24.543

浏览器必须能够访问这些文件才能正确显示页面。您可以通过像缩小这样的基本方法，或者像[我如何混淆（保护）JavaScript 那样更复杂的方法来混淆 JS？](https://stackoverflow.com/questions/194397/how-can-i-obfuscate-javascript)

使用 CSS，您可以尝试类似的方法。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-14T18:11:54.390

查看以下资源，它们可能会有所帮助。

[http://www.iwebtool.com/html_encrypter](http://www.iwebtool.com/html_encrypter)

[http://www.catswhocode.com/blog/3-ways-to-compress-css-files-using-php](http://www.catswhocode.com/blog/3-ways-to-compress-css-files-using-php)

[http://refresh-sf.com/yui/](http://refresh-sf.com/yui/)

[http://www.n1studios.net/tutorials/php/css-file-protection.html](http://www.n1studios.net/tutorials/php/css-file-protection.html)

所有这些都以某种方式存在，并且**总有一种方法可以阅读它们**。你只能让它们难以阅读

# android - 使用 ADB 发送消息的编码问题

> ID：11038725
> 
> 赞同：1
> 
> 时间：2012-06-14T17:58:34.023
> 
> 标签：android, encoding, adb

我已经实现了一个服务来监听通过 ADB 发出的命令。通过 ADB 发送的命令示例如下所示：

> adb shell am startservice -a com.testandroid.SEND_SMS -e number 123123123 -e message "åäö"

现在，这里的问题是字符串“åäö”的编码似乎搞砸了。如果我将该字符串附加并立即将其输出到日志中，我会得到一个正方形“[]”，未知字符。如果我发送此消息，我会在消息应用程序中获得中文字符。只要我坚持使用非变音符号（我猜是 ASCII），一切正常。

我正在为此使用 Windows 7 和命令行。我没有触及命令行的编码，我试图通过获取字节字符来处理额外的字符串，将 UTF-8 作为编码参数传入，然后创建一个新的字符串传入 UTF-8 作为编码参数也有。不过没有骰子。

使用 getBytes() 时字节的值是 å：-27，ä：-92，ö：-74

我怎样才能让它演奏得很好，以便我至少可以使用变音符号？

所有这些在 Linux 中都可以正常工作。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-10-13T23:02:47.257

我遇到了同样的问题，但最后我得到了它的工作！

如果你使用例如 C#，你必须像下面的例子那样做：

**02.12.2019**

根据[protocol.txt](https://android.googlesource.com/platform/system/core/+/master/adb/protocol.txt#275)，ADB-Protocol 支持“智能套接字”。这些套接字可用于完成所有工作，adb.exe 中的 ADB-Client 可以。例如，如果要上传文件，则必须请求这样的“智能套接字”。之后，您必须遵循分配给服务的协议*（有关服务概述，请参见[SERVICE.txt](https://android.googlesource.com/platform/system/core/+/master/adb/SERVICES.TXT)）*，例如[SYNC.txt](https://android.googlesource.com/platform/system/core/+/master/adb/SYNC.TXT)中所述。

**13.10.2014**

```
public static List<string> ExecuteBG(string exe, string args, int timeOut = -1)
{
    if (File.Exists(exe) || exe == "cmd.exe")
    {
        ProcessStartInfo StartInfo = new ProcessStartInfo();
        StartInfo.FileName = exe;
        StartInfo.Arguments = Encoding.Default.GetString(Encoding.UTF8.GetBytes(args));
        StartInfo.CreateNoWindow = true;
        StartInfo.UseShellExecute = false;
        StartInfo.RedirectStandardError = true;
        StartInfo.RedirectStandardOutput = true;
        StartInfo.StandardErrorEncoding = Encoding.UTF8;
        StartInfo.StandardOutputEncoding = Encoding.UTF8;
        AutoResetEvent errorWaitHandle = new AutoResetEvent(false);
        AutoResetEvent outputWaitHandle = new AutoResetEvent(false);
        List<string> response = new List<string>();

        Process proc = new Process();
        proc.StartInfo = StartInfo;
        proc.ErrorDataReceived += (s, e) =>
        {
            if (String.IsNullOrEmpty(e.Data))
            {
                errorWaitHandle.Set();
            }
            else
            {
                response.Add(e.Data);
            }
        };
        proc.OutputDataReceived += (s, e) =>
        {
            if (String.IsNullOrEmpty(e.Data))
            {
                outputWaitHandle.Set();
            }
            else
            {
                response.Add(e.Data);
            }
        };
        proc.Start();
        proc.BeginErrorReadLine();
        proc.BeginOutputReadLine();
        proc.WaitForExit(timeOut);
        errorWaitHandle.WaitOne(timeOut);
        outputWaitHandle.WaitOne(timeOut);
        return response;
    }
    return new List<string>();
} 
```

真正重要的是这部分“StartInfo.Arguments = Encoding.Default.GetString(Encoding.UTF8.GetBytes(args));”，这里我们将 UTF8 字符串转换为 cmd 已知的 Windows“默认”字符集。因此，我们向 cmd 发送一个“已销毁”“默认”编码字符串，Android shell 会将其转换回 UTF8。所以我们有“üöäÜÖÄàè 等”之类的“变音符号”。

希望这可以帮助某人。

PS：如果您需要一个支持 UTF8 推/拉文件/文件夹的工作“框架”，还请查看[我的 AndroidCtrl.dll](http://forum.xda-developers.com/showthread.php?t=2772502)，它是 C# .NET4 编写的。

问候，塞巴斯蒂安

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-03T20:37:04.433

最后，问题出在 cmd.exe 或 adb.exe 中。直到其中一个或两个都更新为更加兼容，我将暂时无法使用它。

# azure - Azure：从 Blob 存储下载会导致权限错误？

> ID：11038726
> 
> 赞同：1
> 
> 时间：2012-06-14T17:58:37.767
> 
> 标签：azure, azure-blob-storage, azure-worker-roles

我已将一些文件上传到 Blob 存储，现在我正在使用 OnStart 方法检索这些文件并运行它们。现在我在本地工作。

使用以下代码：

```
using (var fileStream = System.IO.File.OpenWrite(@"C:\testfolder"))
            {
                blob.DownloadToStream(fileStream);
            } 
```

导致“拒绝访问路径 'C:\testfolder'。” 错误。

您认为这是什么原因造成的？并且 - 一旦项目实际推送到 Azure，这会成为一个问题吗？我可以在本地更改权限，但我希望一旦它实际上处于现场工作人员角色中，就不会成为问题。

任何帮助都是极好的 ：）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-14T18:13:11.363

从头开始 - 看起来 C:\testfolder 应该指定文件名，而不是位置。我已将其更改为 C:\testfolder\test.txt，它工作得很好:)。

# c++ - 将双端队列与 C 库一起使用

> ID：11038727
> 
> 赞同：0
> 
> 时间：2012-06-14T17:58:40.137
> 
> 标签：c++, c, stl, vector, deque

假设我有一个结构

```
struct s
{
     std::deque<Object> q; //won't work  with C library
} 
```

如果使用 C 库初始化带有 std::deque 的结构，那么它将不起作用。

```
struct s
{
     std::vector<Object> v; //would work with C library
} 
```

但是，这种带有 std::vector 的结构将适用于 C 库。我认为这是因为 deque 中的元素不连续，而 vector 中的元素是连续的。我认为这可能是一个原因，但不确定。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-14T18:03:49.837

这两个版本都不能`S`与 C 库一起使用。
这是因为 C 对类的布局方式（甚至它们中的内容）没有任何概念。

如果传递元素的地址，Vector 可以与 C 库一起使用。因为所有元素都在连续的内存中，所以它看起来像一个普通的指针，因此任何接受指针的 C 函数都可以工作。

```
struct Object { /* NORAML POD Object */ };

extern "C" void cFunctionCall(Object* data, size_t size);

std::vector<Object>   v;
// initialize v

cFunctionCall(&v[0], v.size()); // This will work because all members of v
                                // are in contiguous memory 
```

# gcc - 获取 a.out 文件中符号的位置

> ID：11038731
> 
> 赞同：0
> 
> 时间：2012-06-14T17:58:53.550
> 
> 标签：gcc, symbols, elf, dwarf

[这个问题](https://stackoverflow.com/questions/34732/how-do-i-list-the-symbols-in-a-so-file)很好地解释了如何获取 elf 文件的符号（变量、函数等）。

**现在我有了符号，我想知道它们在什么位置（模块）**。

例如，如果我编译一个由文件`main.c`和. 还假设程序包含全局变量**int Counter。**那么我怎么知道变量**Counter**位于 main.c 中呢？`someFile.h``someFile.c``main.c`

 ***** * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-15T19:13:35.937

答案在[这里](https://stackoverflow.com/a/11056685/637142)。.****

# java - 引导类路径未与 -source 1.6 Java 错误一起设置

> ID：11038736
> 
> 赞同：1
> 
> 时间：2012-06-14T17:59:03.583
> 
> 标签：java, compilation, compiler-errors, lwjgl, slick2d

我现在正在制作一个基于 slick 的游戏，但是每次编译它时，我都会得到一个未与 -source 1.6 错误一起设置的引导类路径。虽然它可以编译，但我可以在 dist 文件夹中找到它，但是每当我运行 .jar 时，绝对没有任何反应。

我将 dist 文件夹压缩并上传到此处，以便您查看。

[http://dementedgames.site88.net/Zips/Tesr.zip](http://dementedgames.site88.net/Zips/Tesr.zip)

提前致谢。

编辑：我在命令行中运行了这段代码来测试它，我得到了这个错误。

```
Microsoft Windows [Version 6.1.7601]
Copyright (c) 2009 Microsoft Corporation.  All rights reserved.

C:\Users\Kyle>java -jar "C:\Users\Kyle\Documents\NetBeansProjects\Lawu\dist\Lawu
.jar"
test
Exception in thread "main" java.lang.UnsatisfiedLinkError: no lwjgl in java.libr
ary.path
        at java.lang.ClassLoader.loadLibrary(ClassLoader.java:1738)
        at java.lang.Runtime.loadLibrary0(Runtime.java:823)
        at java.lang.System.loadLibrary(System.java:1028)
        at org.lwjgl.Sys$1.run(Sys.java:73)
        at java.security.AccessController.doPrivileged(Native Method)
        at org.lwjgl.Sys.doLoadLibrary(Sys.java:66)
        at org.lwjgl.Sys.loadLibrary(Sys.java:95)
        at org.lwjgl.Sys.<clinit>(Sys.java:112)
        at org.lwjgl.opengl.Display.<clinit>(Display.java:132)
        at org.newdawn.slick.AppGameContainer$1.run(AppGameContainer.java:39)
        at java.security.AccessController.doPrivileged(Native Method)
        at org.newdawn.slick.AppGameContainer.<clinit>(AppGameContainer.java:36)

        at lawu.Lawu.main(Lawu.java:29)

C:\Users\Kyle> 
```

# c# - Winform 工具提示内存泄漏。来自 timer_tick 的自我处置控制

> ID：11038742
> 
> 赞同：1
> 
> 时间：2012-06-14T17:59:20.247
> 
> 标签：c#, winforms, memory-leaks

是否有可能在多次调用此函数时：

```
void Func(String spr, PictureBox pictureBox)
{
    ToolTip toolTip = new ToolTip();
    toolTip.Show(spr, pictureBox, 1000);
} 
```

会发生内存泄漏吗？

功能完成后工具提示是否仍然有可能只是超出范围并自行处理？

如果第一个问题的答案是“是”，那么创建我自己的从 timer_tick 自行处置的工具提示是一个好的解决方案吗？

```
public partial class MyToolTip : ToolTip
{
    public MyToolTip()
    {
        InitializeComponent();
        timer.Interval = this.AutomaticDelay;
    }

    private void timer_Tick(object sender, EventArgs e)
    {
        this.Dispose();
    }
} 
```

如果在这种情况下这不是必需的，那么它是否适用于其他已知物体寿命的情况，或者它只是糟糕的设计？

我选择了这个解决方案，因为我希望能够同时显示许多工具提示。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-14T18:02:25.797

方法执行后，该`ToolTip`对象仍将存在于内存中，并且每次调用该方法时`ToolTip`都会创建一个新实例。最好重用现有的`ToolTip`. 例如

```
 ToolTip toolTip = new ToolTip();
 void Func(String spr, PictureBox pictureBox)
 {

     toolTip.Show(spr, pictureBox, 1000);
 } 
```

**编辑** 对于多个工具提示并显式处理（在 GC 之外）而不需要自定义对象，您可以尝试一些东西（有点 hacky ;)），例如：

```
 var toolTip= new ToolTip();
 toolTip.Show(spr, pictureBox);
 new System.Threading.Timer(o => tt.Dispose(), null, 1000, System.Threading.Timeout.Infinite); 
```

上面的方法会起作用，不过，重用计时器可能会更好。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-14T18:05:36.570

垃圾收集器最终会在必要时清除 ToolTip 使用的内存，因此没有理由担心自己会处理它。

尽管如此，使用单个 ToolTip 对象而不是每次要显示提示时都创建新的工具提示要好得多。

# tortoisesvn - tortoisesvn 修订号：相同的编号，不同的内容？

> ID：11038750
> 
> 赞同：0
> 
> 时间：2012-06-14T18:00:05.597
> 
> 标签：tortoisesvn

对于项目中的主干和分支，修订日志是否不应该针对特定文件的修订号（例如 123）显示相同的内容，而不管它是在分支还是主干上查看的？

我正在通过主干和分支日志查看文件修订版 123，内容肯定不同。我一直在搞乱合并，但这会如何影响历史文件？

我对此感到完全困惑，因为我希望它们是相同的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-14T18:02:25.893

> 对于项目中的主干和分支，修订日志是否不应该针对特定文件的修订号（例如 123）显示相同的内容，而不管它是在分支还是主干上查看的？

如果它是创建分支*后*的修订版，则不会。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-14T18:04:48.387

如果您正在通过特定修订号查看存储库，您会在特定修订 (*) 处看到该目录的状态。这意味着说分支是在修订版 99 中创建的；如果在分支中的修订版 100 和主干中的修订版 101 中修改了文件，您将在两个目录中看到文件的不同内容。

(*) 与 HEAD 版本相同，尽管在这种情况下数字是隐含的（解析为可用的最新版本号）

# sql-server - 在 sql server 2012 中为西班牙语选择了什么排序规则？

> ID：11038760
> 
> 赞同：2
> 
> 时间：2012-06-14T18:00:58.103
> 
> 标签：sql-server, collation, sql-server-2012

在 sql server 2012 中为西班牙语选择了什么排序规则？

在 MySQL 中始终使用 utf8_bin，但在 SQL Server 中不是一个选择。语言是拉丁美洲西班牙语还是 utf8_bin 的任何替代语言？

## 编辑

**Modern_Spanish_CI_AS**和**Modern_Spanish_bin 有**什么区别？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-14T18:05:20.260

您可以使用 nvarchar/nchar 类型（在 SQL Server 中实际上是 UCS-2）来代替“utf8”，它可以
存储*任何*字符。虽然，varchar/char 对于西班牙语可能没问题。我知道它适用于其他西欧语言

然后你会选择一个排序规则（用于排序和比较），比如`Modern_Spanish_Bin`
All Spanish 除了一个似乎使用这个[说 MSDN](http://msdn.microsoft.com/en-us/library/ms143508%28v=sql.105%29)。“一”是`Traditional_Spanish_Bin`

这与 charset 在排序规则中且一切都是 varchar 的 MySQL 略有不同。SQL Server 将排序/比较（排序规则）与存储（数据类型 varchar 与 nvarchar）分开

编辑：

*   Modern_Spanish_CI_AS：忽略大小写所以 a = A 但比较重音 à <> a
*   Modern_Spanish_bin：仅查看位模式。所以一个 <> A

[MSDN](http://msdn.microsoft.com/en-us/library/ms143515%28v=sql.105%29)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-14T18:04:37.093

是`Traditional_Spanish_ci_ai`你要找的吗？

# android - 如何获得第一个运行的进程？

> ID：11038766
> 
> 赞同：2
> 
> 时间：2012-06-14T18:01:40.553
> 
> 标签：android

我正在为我的安全应用程序创建一项服务，该服务将在每秒检查特定进程是否启动并弹出密码对话框。任何人只有在输入密码时才能使用该应用程序。我的问题是我的计时器反复显示对话框。所以我应用“c”变量来运行这个对话框一次，但这只会在我启动应用程序时出现。在那之后！应用程序直接打开而不先显示对话框`

```
private static Timer timer = new Timer(); 
        private Context ctx;
      private  int c=0;
    @Override
    public IBinder onBind(Intent arg0) {
        // TODO Auto-generated method stub
        return null;
    }
      public void onCreate() 
        {
              super.onCreate();
              ctx = this; 
              startService();
        }

        private void startService()
        {           
            timer.scheduleAtFixedRate(new mainTask(), 0, 5000);
        }

        private class mainTask extends TimerTask
        { 
            public void run() 
            {
                toastHandler.sendEmptyMessage(0);
            }
        }   
    @Override
    public int onStartCommand(Intent intent, int flag,int startId){
        /* Timer timer = new Timer();
            timer.scheduleAtFixedRate(new TimerTask() {
                public void run() {   

                                dial();
                            }
                        }                       
                     }
                   }, 0, 1000);*/
        return START_STICKY;    
    }
    @Override
    public void onDestroy(){

        super.onDestroy();
        timer.cancel();
        Toast.makeText(this, "Service Stoped", Toast.LENGTH_LONG).show();
    }
     private final Handler toastHandler = new Handler()
        {
            @Override
            public void handleMessage(Message msg)
            {
                Toast.makeText(getApplicationContext(), "test", Toast.LENGTH_SHORT).show();
                ActivityManager actvityManager = (ActivityManager) getSystemService(ACTIVITY_SERVICE);
            List<RunningAppProcessInfo> procInfos = actvityManager.getRunningAppProcesses();
            for(int i = 0; i < procInfos.size(); i++){
                if(procInfos.get(i).processName.equals("com.android.music")) {
                    Toast.makeText(getApplicationContext(), "music is running", Toast.LENGTH_LONG).show();
                  c++;
                  if(c==1){
                    int pid = android.os.Process.getUidForName("com.android.music");
                     android.os.Process.killProcess(pid);
                    Intent ii = new Intent();
                       ii.setClass(APP_SeeL_Password.this,Setappdetail.class);
                       ii.setFlags(Intent.FLAG_ACTIVITY_NEW_TASK);
                       startActivity(ii); 
                  }
                    //timer.cancel();
                  }
                } 
           }
        };  ` 
```

这是我的对话活动

```
 public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.custom_dialoge);
    LayoutParams params = getWindow().getAttributes(); 
    params.width = LayoutParams.FILL_PARENT; 
     getWindow().setAttributes((android.view.WindowManager.LayoutParams) params);
    // TODO Auto-generated method stub

EditText et=(EditText)findViewById(R.id.editText2);
  str=et.getText().toString();
  LockOrNot getpinvar=new LockOrNot(this);
     getpinvar.open();
      ptr=getpinvar.getpin(1);
     getpinvar.close();
Button okb=(Button)findViewById(R.id.button1); 
```

okb.setOnClickListener(new View.OnClickListener() {

```
 public void onClick(View arg0) {
        // TODO Auto-generated method stub

        if(str.equals(ptr)==true){
        Intent LaunchIntent = getPackageManager().getLaunchIntentForPackage("com.android.music");
        startActivity( LaunchIntent );}
    }
});
Button cancelb=(Button)findViewById(R.id.button2);
cancelb.setOnClickListener(new View.OnClickListener() {

    public void onClick(View arg0) {
        // TODO Auto-generated method stub
        Intent startMain = new Intent(Intent.ACTION_MAIN);
        startMain.addCategory(Intent.CATEGORY_HOME);
        startMain.setFlags(Intent.FLAG_ACTIVITY_NEW_TASK);
        startActivity(startMain);
    }
}); 
```

}

# jsf - 在 JSF 中动态更改 h:datatable 单元格颜色或样式

> ID：11038769
> 
> 赞同：6
> 
> 时间：2012-06-14T18:01:56.423
> 
> 标签：jsf, datatable

我有一个数据表，我想根据对内容运行的一些分析来更改单元格的颜色。该表链接到一个 Comment 对象数组，我给出了一个 String cssClass，一旦运行分析就会更新。这就是我尝试插入数据表的 rowClasses 属性的方法。它不起作用，我认为问题可能是我无法从数据表声明内部访问为数据表的每一行创建的变量。

数据表代码：

```
<h:dataTable value="#{post.comments}" var="comment" class="hs-table" rowClasses="#{comment.cssClass}" >
             <h:column>
                   #{comment.name}
             </h:column>
             <h:column>
                   #{comment.email}
             </h:column>
             <h:column>
                   #{comment.msg}
             </h:column>
 </h:dataTable> 
```

评论类：

```
public class Comment {
private String msg;
private String email;
private String name;
private Date date;
private String cssClass;

public Comment(){
    cssClass = "normColumn";
}
epublic String getCssClass() {
    return cssClass;
}

public void setCssClass(String cssClass) {
    this.cssClass = cssClass;
} 
```

}

在托管 bean 中更新 cssClass 的位置：

```
if(tone>0)
            c.setCssClass("commentPos");
        else if(tone<0)
            c.setCssClass("commentNeg"); 
```

班级永远不会被分配。我做错了什么，或者这根本不可能？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-06-14T18:07:14.410

在标准的 JSF`<h:dataTable>`组件中，`rowClasses`不幸的是，该属性不是按行计算的。它是按表评估的。然而，像 Tomahawk 和 PrimeFaces 这样的组件库支持您在它们`<t:dataTable>`和`<p:dataTable>`.

使用标准 JSF`<h:dataTable>`组件，您需要提供所有行类的逗号分隔字符串。这看起来像这样：

```
public String getRowClasses() {
    StringBuilder rowClasses = new StringBuilder();

    for (Comment comment : comments) {
        if (rowClasses.length() > 0) rowClasses.append(",");
        rowClasses.append(comment.getCssClass());
    }

    return rowClasses.toString();
} 
```

然后将其引用为

```
<h:dataTable ... rowClasses="#{post.rowClasses}"> 
```

### 也可以看看：

*   [`<h:dataTable>`标签文档](http://docs.oracle.com/javaee/6/javaserverfaces/2.1/docs/vdldocs/facelets/h/dataTable.html)- 列出所有属性和接受的值

# java - 动态生成 JNLP

> ID：11038773
> 
> 赞同：11
> 
> 时间：2012-06-14T18:02:05.677
> 
> 标签：java, dynamic, jnlp, java-web-start

我需要动态地将参数传递给 JNLP，为此我尝试使用扩展的 servlet，`JnlpDownloadServlet`然后包含一个将所有 JNLP XML 写入其中的 jsp。

但是当我调用下载的 JNLP 时，我得到了`BadFieldException`.

## 小服务程序

```
public class TestServlet extends JnlpDownloadServlet {  
public void service(ServletRequest req, ServletResponse res)  throws ServletException, IOException {  
HttpServletRequest request = (HttpServletRequest) req;
res.setContentType("application/x-java-jnlp-file");
request.getRequestDispatcher("/jnlp.jsp").include(request, res);  
} 
```

## jnlp.jsp

用于转储动态 JNLP：

```
<?xml version="1.0" encoding="UTF-8"?>
<jnlp spec="1.0+" codebase=<%=request.getScheme() + "://"+ request.getServerName() + ":" + request.getServerPort()+ request.getContextPath() + "/" %> href="test.jnlp">
  <information>
   <title>Demo</title>
   <vendor>Sun Microsystems, Inc.</vendor>
  </information>
  <security>
   <all-permissions/>
  </security>
  <resources>
   <j2se version="1.6+" href="http://java.sun.com/products/autodl/j2se"/>
   <jar href="lib/test.jar" main="true" />
  </resources>
  <application-desc name="Dynamic Tree Demo Application" main-class="org.Test" width="300"   height="300">
       <argument><%=request.getParameter("arg1")%></argument>  
       <argument><%=request.getParameter("arg2")%></argument>
  </application-desc>
  <update check="background"/>
</jnlp> 
```

我看不到在下载的 JNLP 中正确接收到请求参数，但上述内容`request.getScheme`似乎`request.getServerName`工作正常。由于没有正确接收到参数值，我`BadFieldException`在 JNLP 尝试执行时得到。

如何解决这个问题？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-15T07:27:28.607

从逻辑上讲，`href="test.jnlp"`应该类似于`href="test.jnlp?arg1=blah&arg2=tah"`.

AFAIU JWS 客户端将使用JNLP 中规定 的确切`coodebase`/回到服务器。`href`

另外，一定要听 bestsss 怎么说。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-25T15:40:33.830

也许因为有用而老了，但我实际上修补了 Sun servlet 代码。有一个 JnlpFileHandler 类，在其中完成了实际的替换......只是说...... ;-) 如果有人感兴趣，我可以给你代码，包括一点解释。我并没有为此浪费太多时间，但我只能说，我真的希望 SUN 的其余代码更加尊重 OO 原则......

# objective-c - 仅在 x 轴上捏缩放 UIScrollView

> ID：11038775
> 
> 赞同：2
> 
> 时间：2012-06-14T18:02:14.130
> 
> 标签：objective-c, ios, uiscrollview, uigesturerecognizer, uipinchgesturerecognizer

我希望能够在 UIScrollView 上捏缩放，以便子视图仅在 x 轴上展开/收缩。

我创建了一个 UIScrollView，并使用 addSubview 添加 UIViews。每个 UIView 中都有一个 UILabel 。我应该在数组中保留这些 UIViews 吗？

当我缩放时，我不希望文本大小受到影响，只是每个框的宽度。我想我也需要最小和最大缩放级别。

Apple 的garageband 应用程序中使用了类似的东西。知道怎么做吗？

```
1.
-------------------------
|                       |
|  ------   -------  -- |
|  |  1 |   |  2  |  | 3|   < 10 UIView subclass boxes on a UIScollView,
|  |    |   |     |  |  |     with a UILabel in each UIView
|  ------   -------  -- |
|                       |
-------------------------

2.
-------------------------
|                       |
|  ----------   --------|  
|  | 1 more |   | 2     |    < During zoom-in pinch, boxes are stretched
|  |        |   |       |      in x-axis only. Label remains same font size
|  ----------   --------|      and left aligned, showing more text
|                       |
------------------------- 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-17T03:26:12.950

（连续第二次，我用一个比原来的前提简单得多的答案来回答我自己的 Q。我想在提问之前我应该​​总是从另一个角度看..）

对于我想要缩放的 UIView（仅限 x 轴），我将视图子类化并添加此方法：

```
- (void)setTransform:(CGAffineTransform)newValue;
{
    newValue.d = 1.0;
    [super setTransform:newValue];
} 
```

当然，我遇到了添加到此 UIView 的 UILabel 的问题。标签被拉伸。所以答案是干脆不添加到UIView中，而是直接添加到滚动视图中。然后，如果您有几个浮点数作为属性，代表标签的原始 x 原点和宽度，您可以在滚动视图缩放时使用滚动视图的比例计算这些：

```
-(void)scrollViewDidZoom:(UIScrollView *)scrollView
{
    float scale = self.scrollView.zoomScale;
    self.label.frame = CGRectMake(self.originalXorigin*scale, self.label.frame.origin.y, self.originalWidth*scale, self.label.frame.size.height);
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-14T18:39:38.260

> 我应该在数组中保留这些 UIViews 吗？

这绝对是个人喜好或设计约束决定。如果您必须在循环中更新这些视图，或者提供某种简单的访问来修改它们的内容，那么是的，它们应该存储在某种介质中（是数组还是字典，由您决定）。

> 我想我也需要最小和最大缩放级别。

那么你运气不好，有一个普通的 old `UIPinchGestureRecognizer`。但老实说，在条件检查中对您的视图进行编码并不难？

> Apple 的garageband 应用程序中使用了类似的东西。知道怎么做吗？

当然，制作一个`UIPinchGestureRecognizer`对象并使用[scale](http://developer.apple.com/library/ios/documentation/uikit/reference/UIPinchGestureRecognizer_Class/Reference/Reference.html#//apple_ref/occ/instp/UIPinchGestureRecognizer/scale)属性来确定一个 x 因子，然后将其`CGAffineTransform()`用于`UIView`.

# c# - 如何单元测试输入到方法的列表小于 100

> ID：11038786
> 
> 赞同：3
> 
> 时间：2012-06-14T18:03:17.000
> 
> 标签：c#, unit-testing, moq

我有这个测试

```
[Test]
public void SaveInventoryItemLoad_Will_Call_WCF_Service_SaveInventoryItemLoad()
{ 
    adapter.SaveInventoryItemLoad(new List<InventoryItemLoadProxy>());
    itemMasterBusinessClientMock.Verify(x => x.SaveInventoryItemLoad(It.IsAny<List<InventoryItemLoadProxy>>()), Times.Once());
} 
```

很好，因为我在 WCF 端测试过该方法做了我想要的，所以我只需要说“嘿，你调用了服务吗？是的！”。现在虽然...我需要将所述列表分解为 10 个或更少的块，即 23 个项目的列表将是 10、10 和 3 个的三个列表。所以第一步当然是编写一个单元测试来验证我没有将十多个项目推送到 SaveInventoryItemLoad 方法。我当然可以验证该方法被调用了 X 次，但这不是我想要的。我想确保提供给该方法的列表 <= 10 但我似乎无法弄清楚如何。我控制了起订量快速入门，但不知道该怎么做。

我虽然这会以某种方式做到这一点

```
// Verify setter with an argument matcher
mock.VerifySet(foo => foo.Value = It.IsInRange(1, 5, Range.Inclusive)); 
```

但我似乎无法做到这一点。我想我以前从未遇到过这种情况。有人知道怎么做吗？

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-14T18:09:08.200

我没有使用 Moq，只有 Rhino.Mocks，但我认为您应该能够将原始代码从更改`It.IsAny<List<InventoryItemLoadProxy>>`为限制它不是*任何*列表，而是不超过 10 个项目的列表。

从网上快速浏览，语法可能类似于`It.Is<List<InventoryItemLoadProxy>>(list => list.Count <= 10)`.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-14T18:09:43.410

这是代码：

```
itemMasterBusinessClientMock.Verify(x => x.SaveInventoryItemLoad(It.Is<List<InventoryItemLoadProxy>>(l=>l.Count < 100)), Times.Once()); 
```

这里有几个[例子](http://code.google.com/p/moq/wiki/QuickStart)。

# android - 解析 xml（仅存储选定的数据）

> ID：11038791
> 
> 赞同：0
> 
> 时间：2012-06-14T18:03:30.893
> 
> 标签：android, eclipse, google-maps, xml-parsing

我在变量“结果”中有一个来自 Web 服务的 xml 输出

它看起来像这样，

```
<ArrayOfSeriesRecord xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
xmlns:xsd="http://www.w3.org/2001/XMLSchema" 
xmlns="http://hiscentral.cuahsi.org/20100205/">

<SeriesRecord>
<ServCode>IIHRTippingB</ServCode>
<ServURL>
http://his08.iihr.uiowa.edu/tippingbucket/cuahsi_1_0.asmx?WSDL
</ServURL>
<location>IIHR:CC00</location>
<VarCode>IIHR:Precipitation</VarCode>
<VarName>Precipitation</VarName>
<beginDate>9/25/2006 12:00:00 AM</beginDate>
<endDate>5/7/2011 12:00:00 AM</endDate>
<ValueCount>161738</ValueCount>
<Sitename>CC00</Sitename>
<latitude>41.736152648925781</latitude>
<longitude>-91.931015014648438</longitude>
<datatype>Continuous</datatype>
<valuetype>FieldObservation</valuetype>
<samplemedium>Precipitation</samplemedium>
<timeunits>minute</timeunits>
<conceptKeyword>Precipitation</conceptKeyword>
<genCategory/>
<TimeSupport>15</TimeSupport>
</SeriesRecord> 
```

我需要解析这个 xml 以获取纬度和经度并将其绘制在谷歌地图上..

知道我该怎么做..请帮忙

提前谢谢.. :))

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-14T18:12:11.667

我最喜欢的解析 xml 的方法是使用 JAXB。您需要一个 XML Schema Definition 文件来说明 XML 的结构。然后使用 JAXB 生成表示元素的 Java 类。然后您可以将 XML/数据编组和解组进出这些对象。

```
//Read an XML file (or string, stream, etc...) into Java classes
JAXBContext context = JAXBContext.newInstance("org.my.jaxb.classes");
Unmarshaller unmarshaller = context.createUnmarshaller();

JAXBElement<ArrayOfSeriesRecord> rootJaxb = (JAXBElement<ArrayOfSeriesRecord>)unmarshaller.unmarshal(new File("file.xml"));
ArrayOfSeriesRecord root = rootJaxb.getValue();
List<SeriesRecord> seriesRecords = root.getSeriesRecord(); 
```

XSD 示例

```
//Example xsd
<?xml version="1.0" encoding="UTF-8"?>
<xsd:schema xmlns:xsd="http://www.w3.org/2001/XMLSchema">
    <xsd:element name="ArrayOfSeriesRecord" type="ArrayOfSeriesRecordType"></xsd:element>

    <xsd:complexType name="ArrayOfSeriesRecordType">
        <xsd:sequence>
            <xsd:element name="SeriesRecord" type="SeriesRecordType" maxOccurs="unbounded"></xsd:element>
        </xsd:sequence>
    </xsd:complexType>

    <xsd:complexType name="SeriesRecordType">
        <xsd:sequence>
            <xsd:element name="ServCode" type="xsd:string"></xsd:element>
        </xsd:sequence>
    </xsd:complexType>
</xsd:schema> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-14T18:10:41.023

您可以使用 xml 解析器（如 tinyXml： http: [//sourceforge.net/projects/tinyxml/](http://sourceforge.net/projects/tinyxml/)）来解析文档，然后只需选择经度和纬度标签内部文本值。

# design-patterns - 应用程序设置管理器的单例模式的替代方案

> ID：11038795
> 
> 赞同：5
> 
> 时间：2012-06-14T18:03:47.610
> 
> 标签：design-patterns, singleton, settings, application-settings

我已经阅读了单例导致代码出现问题的所有原因，但在以下场景中我找不到替代方案。

我有一个 Java Swing 应用程序。用户可以通过 GUI 设置影响应用程序的显示和功能的设置，这些设置从 XML 配置文件中存储和检索。加载应用程序时，会构造一个 SettingsManager 对象。在构造函数中，设置管理器解析 XML 配置文件并将所有设置存储在本地以供快速访问（我将其称为缓存）。当应用程序中的设置发生更改时，该设置会立即写入文件，但缓存会同时更新。

# 问题

如果设置管理器的多个实例被创建，当一个实例中的一个设置被改变时，其他的缓存变得陈旧。如果不使用单例，解决此问题的一种可能方法是不使用缓存并始终从文件中检索设置。这不是一个可怕的想法，但它并不可取。如果我这样做了，我想我必须做一些额外的工作才能使其线程安全。

# 为什么单例有帮助

如果 SettingsManager 是 Singleton，则只有一个缓存，因此它永远不会过时。但是，我已经看到这不是一个好主意，因为它现在本质上是一个全局变量，不需要访问设置的类现在可以访问它们。从我一直在阅读的内容来看，还有很多其他问题。

那么有没有其他方法可以在不使用单例的情况下解决问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-14T19:45:35.440

Let me follow up on Brady's answer and suggest that the method on the "handle-body" class be declared **protected**. This would limit its availability. Another technique would be to put the class in a package that contains the name "internal" (e.g. com.mycorp.abc.internal). That may not limit access, but it does send a clear message to other developers that the class/method really shouldn't be used.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-14T19:26:51.360

您可以实现它，以便在类内部将 SettingsManager 作为 Singleton 进行管理（此类显然不会是单例），并且此类实例只会注入到那些需要它的类中。手柄体（AKA 桥）可以很好地工作。

这将为您提供两者中最好的：

*   SettingsManager 只实例化一次，它的缓存也是如此。并且缓存永远不会过时。
*   只有需要它的对象才能访问它

显然，这个句柄主体类（或任何其他解决方案）可以在任何地方实例化，从而绕过依赖注入。所以我不确定这个问题的完美解决方案是否存在，但这可以让你更接近一些。

# mysql - 创建一个字段名称可能包含 INT 和 VARCHAR 的 MySQL 表

> ID：11038800
> 
> 赞同：0
> 
> 时间：2012-06-14T18:04:12.117
> 
> 标签：mysql, sql, macos, terminal, phpmyadmin

我对 MySQL 数据库/表的创建非常陌生。

我正在尝试在 MySQL 中设置一个 SQL 表。到目前为止，我已经完成了所有命令。我在数据集中注意到的一件事是，某些数据（供应商）的名称中同时包含整数和 varchar。

我该如何解决这个问题？我无法编辑数据，因为某些供应商的名称如 M5 和类似的东西。

另外，我在 Mac 上使用 phpMyAdmin，如果有帮助的话！

先感谢您！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-14T18:06:07.427

使用 varchar，它允许包含 0-9 的 ascii 字符。

# python - 使用带有空格的 unicode 字符串作为 Django url 变量

> ID：11038801
> 
> 赞同：0
> 
> 时间：2012-06-14T18:04:12.193
> 
> 标签：python, django

使用包含空格的 unicode（特别是希伯来语）字符串是否存在问题。

其中一些还包括诸如 "%" 之类的字符。

我遇到了一些问题，因为这是我的第一个 Django 项目，我想在进一步调试之前排除这个问题。

如果这种 url 存在已知的 Django 问题，是否有解决方法？

我知道我可以重新格式化文本来解决其中的一些问题，但由于我正在准备一个使用原始开放政府数据集（完全合法）的网站，我想尽可能地坚持原始格式。

谢谢您的帮助

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-14T18:17:56.403

[在这里](https://stackoverflow.com/questions/1547899/which-characters-make-a-url-invalid)查看有关导致无效（或有效）URL 的相当全面的讨论。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-14T21:34:41.503

Django 对于 unicode URL 或 URL 中的空格不应该有任何问题（尽管您可能需要注意确保空格是 urlecoded ( `%20`)。

但是，无论哪种方式，在 URL 中使用空格都是不好的形式。除非它是 urlencoded，否则它不能保证工作，然后这只是另一件需要担心的事情。最好将最终将成为 URL 一部分的任何字段设置为 a `SlugField`（因此不允许以空格开头）或`slugify`在将其放入 URL 之前运行该值：

在模板中：

```
http://domain.com/{{ some_string_with_spaces|slugify }}/ 
```

或者在python代码中：

```
from django.template.defaultfilters import slugify

u'http://domain.com/%s/' % slugify(some_string_with_spaces) 
```

# c# - C# SQLXMLBulkLoad4Class - 循环中的 SQLConnection 后跟崩溃

> ID：11038804
> 
> 赞同：0
> 
> 时间：2012-06-14T18:04:27.750
> 
> 标签：c#, sql-server-express, sqlxml

我有一段代码即使在循环中也能完美运行。该块将连接，抓取一个 xml 文件，并将其加载到数据库中，如果在循环中将对源目录中的所有 xml 文件执行此操作。

```
[STAThread]
static void BulkLoad(string file, string schemaFile, string tempFile, string connString) //Bulk Loads the XML into SQL - process needs to complete before any other datamanipulation
    {
            // Using the class to use SQL XML Bulk Load (version 4.0)
            SQLXMLBulkLoad4Class objBL = new SQLXMLBulkLoad4Class();
            // ConnString - from Form - format is different as it uses the SQLXMLBulkLoad Class
            //string Connstring = this.ConnString.Text;
            objBL.ConnectionString = (connString);

            //Error Log File if needed
            objBL.ErrorLogFile = "errorLog.xml";
            objBL.KeepIdentity = false;  
            objBL.ForceTableLock = true;
            objBL.CheckConstraints = false;
            objBL.XMLFragment = false;
            objBL.Execute((schemaFile), (tempFile)); 
    } 
```

我的挑战是我需要处理新导入的数据。因此，作为同一循环的一部分，我调用其他块，例如：

```
public void BulkCopyNonRegulated()
    {
        // Create source connection
        // ConnStr - is the Main Database
        string sourceConnStr = this.ConnStr.Text;
        SqlConnection source = new SqlConnection(sourceConnStr);
        // Create destination connection
        // destConnStr - destination database
        string destConnStr = this.NonRegConStr.Text;
        SqlConnection destination = new SqlConnection(destConnStr);
        // Open source and destination connections.
        source.Open();
        destination.Open();
        //cmd.ExecuteNonQuery();
        // Select data from Source table
        SqlCommand cmd = new SqlCommand("SelNonRegCommodities", source);
        //cmd = new SqlCommand("SELECT * FROM Products", source);
        // Execute reader
        SqlDataReader reader = cmd.ExecuteReader();
        // Create SqlBulkCopy
        SqlBulkCopy bulkData = new SqlBulkCopy(destination);
        // Set destination table name
        bulkData.DestinationTableName = "_TEMP";
        // Write data
        bulkData.WriteToServer(reader);
        // Close objects
        bulkData.Close();
        source.Close();
        } 
```

现在这个块也可以工作 - 第一次通过循环。如果这个块存在，第一个 xml 文件将被加载，并被这个块改变，那么当循环开始在第二个文件上时，它将在 objBL 处出错。执行此错误：

```
System.Runtime.InteropServices.COMException occurred
Message=Error connecting to the data source.
Source=Microsoft XML Bulkload for SQL Server
ErrorCode=-2147467259
StackTrace:
   at SQLXMLBULKLOADLib.SQLXMLBulkLoad4Class.Execute(String bstrSchemaFile, Object vDataFile)
   at DataLoader.Imports.BulkLoad(String file) in C:\MyDocs\Visual Studio 2010\Projects\PathFinder2\PathFinder\Imports.cs:line 375
InnerException: 
```

然后，我需要删除数据库，然后重新附加它以便能够访问它。我认为这个错误来自一个保持打开的连接，但我找不到。我什至添加了：destination.Close(); GC.Collect(); GC.WaitForPendingFinalizers();

认为这是我所缺少的，但没有这样的运气。
谁能给我一个关于我在这里俯瞰什么的提示？

谢谢你。

# sql - SQL Server：查找/加入可变长度字符串

> ID：11038811
> 
> 赞同：2
> 
> 时间：2012-06-14T18:04:52.553
> 
> 标签：sql, sql-server

我正在尝试编写一个查询，该查询将返回表中最接近的匹配项。该表表示一个层次结构，如下所示：

```
Hier_Code Group1 Group2 Group3
_________ ______ ______ ______
A         1      1      5 
AA        1      2      5
AAA       1      2      5
AAB       1      3      5
AB        2      3      5
ABA       2      3      5
ABB       2      3      5 
```

我正在搜索的值可能不完全匹配，在这种情况下，我希望它们“汇总”到下一个级别以找到匹配项。例如：

```
Value     Returns:  
A         1      1      5 (Perfect match)
AAC       1      2      5 (AA is closest)
AABB      1      3      5 (AAB is closest) 
```

这个想法是，您将一次从搜索词中删除一个字符，直到找到匹配项。我试过用递归 CTE 做这个，也用 WHILE 循环无济于事。

有什么建议么？

提前致谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-14T18:17:39.727

试试这个：

```
SELECT top 1 Group1, Group2, Group3 
FROM temp 
WHERE 'AABB' like Hier_Code + '%'
GROUP BY Group1, Group2, Group3
ORDER BY MAX(len(Hier_Code)) desc 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-14T18:12:53.813

这是一个启动器，您可以使用它来创建一些动态 SQL：

```
 select id from t
           where g1 = 1 and g2 = 1 and g3 = 5

           union

           select id from t
           where g1 = 1 and g2 = 1 

           union

           select id from t
           where g1 = 1 
```

UNION 的默认行为是消除重复，这样在这三个 select 执行后，结果集中不会出现超过一次的 id。

问题是有几种排列：

```
 {g1, g2, g3}, {g1, g3},  {g1, g2}, {g2, g3} 
```

所以你不能像我在我的例子中那样简单地去掉最后的条件。

# asp.net - 服务器标签格式不正确，ASP 中继器数据源

> ID：11038812
> 
> 赞同：5
> 
> 时间：2012-06-14T18:04:53.567
> 
> 标签：asp.net

我收到解析器错误消息 The server tag is not wellformed for the following line。

```
 <asp:Repeater runat="server" DataSource="<%# ((MultilistField)((Item)Container.DataItem).Fields["Tags"]).GetItems() %>">
                    <ItemTemplate>
                        <sc:FieldRenderer ID="FieldRenderer1" runat="server" FieldName="Tag name" Item="<%# Container.DataItem %>"/>
                    </ItemTemplate>
                    <SeparatorTemplate>
                        /
                    </SeparatorTemplate>
                </asp:Repeater> 
```

语法看起来不错，但我不确定的一件事是您是否可以在其中使用 ".Field["tags"] 元素。

我已经尝试查找它，但找不到类似的问题。我希望有人向我提供一些关于解析器为什么抱怨这条线的见解。

谢谢

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-06-14T18:09:21.043

我现在想到的是使用单引号字符串：

```
<asp:Repeater runat="server" DataSource='<%# ((MultilistField)((Item)Container.DataItem).Fields["Tags"]).GetItems() %>' > 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-14T18:09:29.993

您在属性中有双引号。这让解析器感到困惑——它无法判断属性在哪里结束。

将属性括在单引号中以修复它：

```
DataSource='<%# ((MultilistField)((Item)Container.DataItem).Fields["Tags"]).GetItems() %>' 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-14T18:10:38.900

尝试 ' 而不是 " 它可能会起作用

否则尝试从后面的代码绑定

```
<asp:Repeater runat="server" DataSource='<%# ((MultilistField)((Item)Container.DataItem).Fields["Tags"]).GetItems() %>' > 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-14T18:08:45.843

你有结束标签吗？IE

```
</asp:Repeater> 
```

否则，您在标签声明的末尾缺少 / 。

```
<asp:Repeater runat="server" DataSource="<%# ((MultilistField)((Item)Container.DataItem).Fields["Tags"]).GetItems() %>" /> 
```

# python - Python 类和列表

> ID：11038815
> 
> 赞同：0
> 
> 时间：2012-06-14T18:05:09.243
> 
> 标签：python, python-3.x

我的问题如下：我有一个 100 行的文本，每行包含姓氏、名字和一个房间，格式为“姓氏，名字房间”，房间包含 3 个元素“建筑,floor,office" 像 "A.15.10" 所以一条完整的线将是

```
 "name, name A.15.10" 
```

我想制作一个具有“A.15.10”之类的属性建筑物、楼层、办公室和储藏室的教室。具有 familyname、givenname、room 属性的类。我想将此文件中的所有信息加载到一个包含姓氏、名字、房间的数组中并打印出来。直到现在我没有上课。

```
 file=open('file.txt','r')
   data=file.readlines()
   k=len(data)
   c=list(range(k))
   for i in range(k):
       c=data.split()
   for i in range(k):
       d=c[i][2].split('.') 
```

现在元素 c[i][0] 是姓氏 c[i][1] 是给定的名字，而 c[i][3] 是房间。在我再次拆分元素 c[i][3] 以使建筑物具有地板和房间之后。我怎么能按班级拥有所有这些。对不起，如果我没有很好地解释这个问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-14T18:34:49.150

除了使用类，namedtuples 可能是更简单的替代方案。您还可以使用正则表达式一步解析文件：

```
import re
from collections import namedtuple
from itertools   import starmap

Entry    = namedtuple('Entry', ['familyname', 'givenname', 'building', 'floor', 'office'])
entry_re = re.compile(r'([^,]*), (.*) ([^\.]*)\.([^\.]*)\.([^\.]*)\n')

with open('file.txt','r') as f:
    entries = starmap(Entry, entry_re.findall(f.read()))

for entry in entries:
    print('familyname:', entry.familyname)
    print('givenname:', entry.givenname)
    print('building:', entry.building)
    print('floor:', entry.floor)
    print('office:', entry.office)

# Output:
# familyname: name
# givenname: name
# building: A
# floor: 15
# office: 10 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-14T18:18:17.383

创建一个具有所有必需属性的教室。对于构造函数，您有几个选择。

1）创建一个接受所有字段的构造函数。

2) 创建一个构造函数，它将文件中的一行作为字符串，构造函数拆分并提取字段。

关于您发送的代码的评论：

```
 file=open('file.txt','r')
   data=file.readlines()
   k=len(data)
   c=list(range(k)) # You are never using c after assignment. 

   for i in range(k):
       c=data.split() # You would want to split data[i] and not data
   for i in range(k):
       d=c[i][2].split('.') # This can go in the previous loop with 
                            # d = c[2].split('.') 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-14T18:32:27.627

这是使用类的代码重构。如果没有关于预期输出的更多细节，很难判断这是否完全满足您的需求。

```
class Room:
    def __init__(self, building, floor, office):
        self.building = building
        self.floor = floor
        self.office = office 

class Entry:
    def __init__(self, lastname, firstname, room):
        self.lastname = lastname
        self.firstname = firstname
        self.room = room 

entries = []
file=open('file.txt','r')
for line in file.readlines():
    lastname, remaining = line.split(', ')
    firstname, remaining = remaining.split(' ')
    building, floor, office = remaining.split('.')
    room = Room(building, floor, office)
    entry = Entry(lastname, firstname, room)
    entries.append(entry)
file.close() 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-14T18:42:17.403

您可以使用 re 来解析文件。

```
 finder = re.compile( r"""
                    (?P<last>\w+),\s+        # Last name 
                    (?P<first>\w+)\s+        # First Name 
                    (?P<building>[A-D]).     # Building Letter
                    (?P<floor>\d+).          # Floor number 
                    (?P<room>\d+)            # Room Number
                    """, re.VERBOSE )

for line in open( "room_names.txt", 'r' ):
    matches = finder.match( line )
    print( matches.group( 'last', 'first' ) )
    print( matches.group( 'building' ,'floor','room') ) 
```

我的重新技能@Trevor 有点太慢了；）

# json - Chrome 扩展设置本地主页？

> ID：11038816
> 
> 赞同：0
> 
> 时间：2012-06-14T18:05:09.713
> 
> 标签：json, google-chrome, google-chrome-extension

由于它似乎不存在，我正在尝试制作一个 chrome 扩展来将我的新标签页设置为本地 .html 文件。这是我到目前为止所拥有的：

```
{
  "name": "MyHomepage",
  "version": "1.0",
  "manifest_version": 2,
  "description": "Set an HTML page as your New Tab page",
  "browser_action": {
    "default_icon": "icon.png"
  },
  "chrome_url_overrides" : {
    "newtab": "/Users/shortname/Documents/Home.html"
  }
} 
```

但是，当我加载一个新页面时，它给了我这个：没有找到该网址的网页：chrome-extension://(gibberish)//Users/shortname/Documents/Home.html Chrome 似乎正在沙箱化我的扩展不知何故。有没有办法让它访问我的本地文件？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-14T18:14:27.980

Chrome 的扩展 API 不允许直接从磁盘读取或写入磁盘。

如果你想这样做，你必须在你的扩展中使用一个 NPAPI 插件： [http ://code.google.com/chrome/extensions/npapi.html](http://code.google.com/chrome/extensions/npapi.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-12-04T11:50:32.697

您可以使用本机消息而不是 NPAPI [https://developer.chrome.com/extensions/messaging#native-messaging](https://developer.chrome.com/extensions/messaging#native-messaging)

# java - Java转义序列语法错误

> ID：11038817
> 
> 赞同：0
> 
> 时间：2012-06-14T18:05:10.260
> 
> 标签：java

我正在尝试使用代码行创建一个字符串数组，以便程序一旦达到标记就可以覆盖现有代码的一部分。我的问题出现在这一行：

```
var finalTitle = (str.replace("()", ("(" + num + ")"))); 
```

当我试图将该行转换为有效字符串时，我知道引号可能有点难以解析。这是我到目前为止所拥有的：

```
"var finalTitle = (str.replace(\"()\", (\"(\" + num + \")\")));" 
```

但是，eclipse 不会停止抱怨这一行的语法不正确。有谁知道如何正确格式化这一行？或者更具体地说，如何将引号解析为字符串？

这是我正在填充的字符串数组的示例。我将循环遍历它，每次迭代都会向 .js 文件写入一个新行：

```
String[] lines = {"var patientTree = getPatientMenuTree();", "var rootNode = patientTree.getNodeById('Patients');", "var str = rootNode.title;", "var num = patientArray.length;", "var finalTitle = (str.replace(\"()\", (\"(\" + num + \")\")));" }; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-14T18:08:47.793

它应该可以正常工作。尝试分配给一个变量：

```
String text = "var finalTitle = (str.replace(\"()\", (\"(\" + num + \")\")));"; 
```

**更新**

~~`};"`在行尾附近，您有一个不应该存在的额外内容：~~

 ~~```
String[] lines = {"...", "...", "...", "..." };" }; 
```~~  ~~我看到你已经修复了这个错误。~~

# java - 在 html 中显示一个 sqlite 数据库查询

> ID：11038818
> 
> 赞同：0
> 
> 时间：2012-06-14T18:05:12.653
> 
> 标签：java, javascript, html, perl, sqlite

所以这就是我所拥有的，我有一个带有 3 个表的 SQLite 数据库：状态、更新日期和用户。该数据库位于服务器上。我需要对此运行以下查询：

```
SELECT USR.name, USR.cymer_id, ST.license
FROM
users USR,
status ST,
upd_ate UD
WHERE
UD.upt_id = (select max(p2.upt_id) from upd_ate p2)
AND ST.cymer_id = USR.cymer_id
AND ST.upt_id = UD.upt_id
ORDER BY USR.name 
```

然后使用 HTML 在网页上显示结果。

我想知道有没有办法使用 java/javascript 来做到这一点？或者有什么方法可以编写 java/perl/javascript 代码来获取输出的 xml/text 然后显示它？

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-14T18:12:45.140

在**Perl**中，使用[CGI](http://perldoc.perl.org/CGI.html)生成 HTML 页面和[DBI](http://search.cpan.org/author/TIMB/DBI/DBI.pm)用于数据库查询：

```
#!/usr/bin/perl

use strict;
use warnings;
use CGI;
use DBI;

my $q = CGI->new;
print $q->header, $q->start_html('hello'), '<table>';

my $dbh = DBI->connect("dbi:SQLite:dbname=mydatabase.db", "", "", {});

my $query = <main::DATA>;
my $query_handle = $dbh->prepare($query);
$query_handle->execute();
$query_handle->bind_columns(\my($id, $name, $license));

while($query_handle->fetch()) {
  print "<tr><td>$id</td><td>$name</td><td>$license</td></tr>\n"
}

$query_handle->finish;
$dbh->disconnect;

print '</table>', $q->end_html;

__DATA__
SELECT USR.cymer_id, USR.name, ST.license
FROM users USR, status ST, upd_ate UD
WHERE
  UD.upt_id = (select max(p2.upt_id) from upd_ate p2)
  AND ST.cymer_id = USR.cymer_id
  AND ST.upt_id = UD.upt_id
ORDER BY USR.name 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-11-07T17:01:33.537

在**Perl**（在 Unix 机器上）中，一种快速而简单的方法是：

```
open( HTML, ">$htmlFile" or die "**error: unable to write to file '$htmlFile', $!\n" );
print HTML `echo "SELECT * FROM holds;" | sqlite3 -html holds_data.db`;
close( HTML ); 
```

我还没有尝试在 Windows 中使用它。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-14T18:10:11.833

您需要为此编写一些服务器端代码。服务器端 JavaScript 有多种选择：[Node.js](http://nodejs.org)、[经典 ASP](http://enwp.org/Classic_ASP)。你知道你的网络服务器是否支持这些吗？它是 Windows 还是 *nix 服务器？它是您的家庭服务器、公司的服务器还是托管服务器？

在带有 JavaScript 的经典 ASP 中，它可能看起来像：

```
<%@Language="javascript"%>
<html><body><table>
<%
var conn = Server.CreateObject("ADODB.Connection");
conn.Open("Provider=OleSQLite.SQLiteSource;Data Source=PATH_TO_DATABASE");

var rs = conn.Execute("SELECT USR.cymer_id, USR.name, ST.license
    FROM users USR, status ST, upd_ate UD
    WHERE   UD.upt_id = (select max(p2.upt_id) from upd_ate p2)
        AND ST.cymer_id = USR.cymer_id
        AND ST.upt_id = UD.upt_id ORDER BY USR.name");

rs.MoveFirst();
while(!rs.EOF)
{
%>
<tr>
<td><%=Server.HtmlEncode(rs["cymer_id"])%></td>
<td><%=Server.HtmlEncode(rs["name"])%></td>
<td><%=Server.HtmlEncode(rs["license"])%></td>
</tr>
<%
    rs.MoveNext();
}
rs.Close();
conn.Close();

%>
</table></body></html> 
```

您需要安装[SQLite OLE DB 提供程序](http://cherrycitysoftware.com/ccs/providers/provsqlite.aspx)。另存为ASP文件，插入正确的数据库路径。在某些版本的 IIS 上，您必须显式启用经典 ASP。Connection 和 Recordset 对象由[Microsoft ADO 库](http://msdn.microsoft.com/en-us/library/windows/desktop/ms678086%28v=vs.85%29.aspx)提供。

# html - 将 margin-bottom 应用于元素

> ID：11038827
> 
> 赞同：1
> 
> 时间：2012-06-14T18:05:48.497
> 
> 标签：html, css, margin

我尝试使用 margin-bottom 定位 div 元素。由于某种原因，margin-bottom 似乎不会影响元素的位置。我尝试寻找答案，尽管所有答案都与 相关`position:absolute`，但我仍然无法让它发挥作用。

但是，我确实设法使用负边距顶部来定位它，但我仍然很想知道是什么导致它不起作用。

这是显示 HTML/CSS的[小提琴。](http://jsfiddle.net/btadB/3/)
（我说的是图像。margin-bottom 设置为 100px。）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-14T18:29:03.163

尝试将位置绝对属性放在具有“productImage”类的 DIV 中。像这样，例如：

```
.productImage {
    display: block;
    float: left;
    position: absolute;
    left: 450px;
    top: 60px;
} 
```

使用这个我已经成功地操纵了图像。我希望它可以帮助你。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-14T18:07:47.653

考虑添加`display: block`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-14T18:16:08.433

仅当元素以某种方式通过底部定位时，底部的边距才有效。现在，它的定位基于其顶部，并且由 H1 设置。如果您不希望 H1 成为一个块，请将其设置为`display:inline-block`. 您还可以将宽度设置为段落的宽度。

正如您所指出的，这就是负边距顶部起作用的原因。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-14T18:31:21.350

使用以下方法之一：

*   负数（或只是更小）`margin-top`
*   `position: relative`和一个否定的`top`

进一步说明：

在正常的文档流中，margin-bottom 只会影响后面元素的位置，因为正常的块级元素会随着子元素的高度而扩展它们的高度。因此，元素的位置由它之前的元素以及它自己的 margin-top 决定。

# api - 如何拦截 node.js 快速请求

> ID：11038830
> 
> 赞同：28
> 
> 时间：2012-06-14T18:06:09.573
> 
> 标签：api, node.js, express, intercept

在快递中，我定义了一些路线

```
app.post("/api/v1/client", Client.create);
app.get("/api/v1/client", Client.get);
... 
```

我已经定义了如何在客户端控制器中处理请求。在我的控制器中处理请求之前，有没有办法可以对请求进行一些预处理？我特别想使用访问级别的概念检查 API 调用者是否有权访问路由。任何意见，将不胜感激。

* * *

## 回答 #1

> 赞同：64
> 
> 时间：2012-06-14T18:13:59.073

你可以通过几种方式做你需要的事情。

这将放置一个中间件，该中间件将在到达路由器之前使用。确保路由器添加`app.use()`后。中间件顺序很重要。

```
app.use(function(req, res, next) {
  // Put some preprocessing here.
  next();
});
app.use(app.router); 
```

您还可以使用路由中间件。

```
var someFunction = function(req, res, next) {
  // Put the preprocessing here.
  next();
};
app.post("/api/v1/client", someFunction, Client.create); 
```

这将为该路线执行预处理步骤。

注意：确保您的`app.use()`调用在您的路由定义之前。定义路由会自动将 app.router 添加到中间件链中，这可能会将其置于用户定义的中间件之前。

# jquery - jqGrid在日期和时间之间插入@

> ID：11038832
> 
> 赞同：1
> 
> 时间：2012-06-14T18:06:09.917
> 
> 标签：jquery, jqgrid, special-characters

我对 jqGrid 有点陌生，想知道如何在输出日期和时间之间插入 @ 符号。我在这里发帖是因为我必须将其发送给在服务器上部署它的工程师，并且我想在发送之前对此发表意见。不幸的是，现在我没有办法即时测试这个。

我现在拥有的是：

```
formatoptions: {srcformat:'Y-m-d H:i:s',newformat:'m/d/Y H:i:s'} 
```

这可以很好地读取输入并准确显示日期和时间。我的问题是，我想在日期/时间列中实现类似 05/10/2012 @ 02:11:53 的内容。这样的事情合适吗？

```
formatoptions: {srcformat:'Y-m-d H:i:s',newformat:'m/d/Y' + '@' + 'H:i:s'} 
```

感谢您的任何回复。:-)

编辑：为了更清楚为什么我不能测试这个，这是因为他们设置了一个服务器环境来将 json 数据读入 jqgrid 表。对于大多数事情，我可以在本地环境中测试 jquery，但我无法读取他们正在使用的相同 json 数据......

# java - 远程数据库连接长时间打开

> ID：11038836
> 
> 赞同：0
> 
> 时间：2012-06-14T18:06:43.767
> 
> 标签：java, database, sql-server-2008, connection, database-connection

我正在通过远程连接在 mssql server 2008 数据库上执行一些 crud。我在 Java 中有业务逻辑，在 finally 块中具有用于连接、语句和结果集 close() 的紧密代码。
我的疑问是，即使我完成工作，连接端口仍然打开，关闭所有连接大约需要 20 分钟。我可以使用 netstat -a 命令查看打开的连接。
我需要快速关闭连接，因为每个操作都会多次打开/关闭连接。因此，我看到大量连接打开。长时间保持业务逻辑已经关闭的如此多不需要的连接是非常不安全和昂贵的。我正在使用最新的 jtds.jar 文件。任何提示或建议将不胜感激。
谢谢，
阿克谢

```
Connection conn = null;
PreparedStatement ps = null;

ResultSet rs = null;

try {
    // Do stuff
    ...

} catch (SQLException ex) {
    // Exception handling stuff
    ...
} finally {
    if (rs != null) {
        try {
            rs.close();
        } catch (SQLException e) { /* ignored */}
    }
    if (ps != null) {
        try {
            ps.close();
        } catch (SQLException e) { /* ignored */}
    }
    if (conn != null) {
        try {
            conn.close();
        } catch (SQLException e) { /* ignored */}
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-18T13:52:05.683

对不起，谢谢你们抽出时间来回答我的问题。连接关闭是一个没有正确关闭的框架调用。我无法访问它，所以我认为这不是问题。再次感谢您的时间和指导。

# c# - 如何在数据库绑定的应用程序之间进行有效的通信？

> ID：11038849
> 
> 赞同：2
> 
> 时间：2012-06-14T18:07:46.857
> 
> 标签：c#, .net, sql-server, inter-process-communicat

我们有许多不同的老式客户端-服务器 C# WinForm 客户端应用程序，它们本质上是数据库的前端。然后有一个 C# 服务器端 Windows 服务等待客户端应用程序提交订单，然后处理它们。

服务器端服务确定是否有工作要做的方式是轮询数据库。多年来，由于无数的业务规则，轮询等待订单的逻辑变得更加复杂。因此，即使无事可做，轮询存储过程本身也会使用相当多的 SQL Server 资源。再加上订单在提交的那一刻就被处理的要求，并且您遇到了性能问题，因为数据库正在不断地被轮询。

该设置现在实际上工作正常，但负载即将通过屋顶，很明显，它无法承受。

在一堆不同的客户端应用程序和服务器端 Windows 服务之间进行通信的一些有效方法是什么，它们比当前方法更具前瞻性？

数据库服务器是 SQL Server 2005。如果它真的涉及到最新的 SQL Server，我可能有能力购买最新的 SQL Server，但我宁愿不打那场战斗。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-14T18:25:19.547

您可以通过多种方式通知客户。

*   [您可以使用像NServiceBus](http://nservicebus.com/)这样的现成解决方案，将信息从服务器发布到客户端或其他服务器。NServiceBus 使用 MSMQ 以一种非常简单且持久的方式将一条消息发布给多个订阅者。
*   您可以使用 MSMQ 或其他排队产品从服务器发布消息，这些消息将传递给客户端。
*   您可以在 Windows 服务上托管 WCF 服务，并使用双工通道从每个客户端连接到它。每次发生变化时，服务都会通知相应的客户甚至所有客户。这对代码来说更复杂，但也更灵活。您可能可以将足够的信息发送回客户端，使他们根本不需要轮询数据库。
*   您可以让服务向所有客户端广播一个 UDP 数据包，以通知他们需要提取的更改。您可能可以在数据包中添加足够的信息，以允许客户端决定是否需要从服务器提取数据。这对于服务器和网络来说是非常轻量级的，但它假定所有客户端都在同一个局域网中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-14T18:11:49.447

也许您可以利用[SqlDependency](http://msdn.microsoft.com/en-us/library/system.data.sqlclient.sqldependency.aspx)仅在数据实际更改时接收通知。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-14T18:21:55.290

您可以使用任何消息传递中间件（如 MSMQ、JMS 或 TIBCO）在客户端和服务之间进行通信。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-14T18:49:02.393

到目前为止，最简单，也最可能是最便宜的答案是简单地购买一台更大的服务器。

否则，您将面临早期失败的可能性很高的开发工作。我所说的失败并不是说你最终会刮掉你最终构建的任何东西。相反，我的意思是您在调试无数业务规则时启动更改并且订单将被搞砸。

坦率地说，我不会考虑在压力下进行沟通变革。假设您关于短期内负载“穿过屋顶”的说法。

如果您的风险敞口必须是第一天 100% 正常运行（当您预计订单大量增加时这是正常的），并且没有任何问题，那么只需升级数据库服务器即可。哎呀，我什至**不会**在上面安装最新的 sql server。相反，只需购买一台更大的机器，安装完全相同的操作系统和数据库服务器（以及补丁级别）并移动您的数据库。

然后查看您的架构，以确定哪些需要消失，哪些可以挽救。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-06-14T20:17:25.063

如果每个人都连接到 SQL Server，那么还有[Service Broker](http://technet.microsoft.com/en-us/library/ms166104%28v=sql.105%29.aspx)的选项。与迄今为止推荐的其他消息传递/队列解决方案不同，它完全包含在您的数据库中（无需部署、管理和配置单独的产品），它针对您的备份/恢复和高可用性需求提供单一故事（无需单独的备份对于消息存储，没有单独的 DR/HA，无论您的 DB 解决方案是什么，也是您的消息解决方案），并通过统一的编程 API (SQL)。

即使一切都在一个 SQL Server 实例中（即多个 SQL 服务实例之间无需通过网络进行通信），Service Broker 仍然拥有无人能比的王牌：[激活](http://msdn.microsoft.com/en-us/library/ms171617%28v=sql.105%29.aspx)。通过激活，您完全无需轮询，因为系统本身会在有事件要处理时启动您的处理代码（将“激活”）。处理代码可以是内部的（T-SQL 过程或 SQLCLR .Net 过程）或外部的（请参阅[外部激活](http://blogs.msdn.com/b/sql_service_broker/archive/2008/11/21/announcing-service-broker-external-activator.aspx)器）。

# php - 如何读取 php 套接字连接响应？

> ID：11038853
> 
> 赞同：3
> 
> 时间：2012-06-14T18:07:52.753
> 
> 标签：php, sockets, fread

以下是我的套接字连接请求和响应顺序。

```
$socket = socket_create(AF_INET, SOCK_STREAM, 0);
$connection = socket_connect($socket, $Host, $Port);
$Md5CheckSum = md5($msg); 
$WillWait = 'SOAP  '. $Md5CheckSum. '  WILL_WAIT'."\n";
socket_write($socket,$WillWait);                        
socket_write($socket,$msg);
socket_write($socket,  SoapSender::$TERM_CHAR);
sleep(1);
$buf = socket_read($socket, 2048);
//socket_write($socket,"&\r\n");
echo "$buf\n"; 
```

请有人告诉我如何阅读我在最后一个 socket_write 请求后收到的响应。我整天都在寻找这个答案，但无法通过谷歌找到任何帮助。

非常感谢您的时间。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-14T18:16:48.913

应该使用两个函数：

```
stream_set_blocking($socket, true); 
```

和

```
stream_get_contents($socket); 
```

在您的流上设置一个块需要在您的应用程序继续执行脚本之前返回数据。

如果不设置流块，有时延迟会导致您的 PHP 脚本认为没有响应，从而导致您无法接收数据。

此外，使用 stream_get_contents 从套接字中提取。默认情况下，这将获取完整的缓冲区。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-11-29T16:18:25.323

正确的方法是使用socket_read，而不是其他人建议的stream_get_contests。

这是一个例子：

```
$sock = socket_create(AF_INET, SOCK_STREAM, SOL_TCP);

$result = socket_connect($sock, "10.197.24.40", "5000");

$request = '{ "request" : { "id" : "some_function_id",  "data": "55555555-5"} }';

// We send the request
socket_write($sock,$request);

socket_read($sock,1000000);

socket_close($sock); 
```

我已经在实时环境中测试了这段代码，它可以正常工作。

# iphone - UIBarButtonItem 标题更改

> ID：11038854
> 
> 赞同：1
> 
> 时间：2012-06-14T18:07:54.423
> 
> 标签：iphone, objective-c, uibutton, uinavigationbar, uibarbuttonitem

我有以下 UIBarButton 项：

```
 UIButton *backButton = [[UIButton alloc] initWithFrame:CGRectMake(0.0f, 100.0f, 45.0f, 30.0f)];
    [backButton setBackgroundImage:backButtonImage forState:UIControlStateNormal];
    [backButton addTarget:self action:@selector(back:) forControlEvents:UIControlEventTouchDown];
    backButton.titleLabel.text = @"Back";
    backButton.titleLabel.font = [UIFont fontWithName:@"texgyreadventor-regular.otf" size:20.0f];
    backButton.titleLabel.textColor = [UIColor whiteColor];
    UIBarButtonItem *backItem = [[UIBarButtonItem alloc] initWithCustomView:backButton];
    _backItem = backItem; 
```

在其他一些方法中，我将其设置在导航栏上，如下所示：

`[self.navigationItem setLeftBarButtonItem:_backItem];`

到目前为止，一切都按预期工作。但就在我将它添加到顶部的导航栏之前，我想更改它的文本。这是我尝试做的一件事：

`self.navigationItem.leftBarButtonItem.title = @"NEW TITLE";`

然而，这不起作用。如何在运行时动态添加标题？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-15T13:26:21.757

您可以使用以下命令再次访问该按钮：

```
UIView* view = self.navigationItem.leftBarButtonItem.customView;
UIButton* button = (UIButton*)view;
[button setTitle: @"NEW TITLE" forState: UIControlStateNormal]; 
```

您是否正在启动 iOS Nayefc，我看到您最近几天有很多问题 :)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2015-03-11T16:37:55.600

对于任何正在寻找的人（就像我刚才一样），在较新版本的 iOS 中，接受的答案不再有效。它变成了 barButton.title，这是一个读写`String?`（在 Swift 中）或`NSString`（在 Obj-C 中）。

* * *

## 回答 #3

> 赞同：-4
> 
> 时间：2012-06-14T18:12:13.300

代替

```
self.navigationItem.leftBarButtonItem.title = @"NEW TITLE"; 
```

采用

```
UIButton *backButton = (UIButton *)self.navigationItem.leftBarButtonItem.customView;
backButton.titleLabel.text = @"changed"; 
```

**更新**：如果您想在将标题添加到导航栏之前更改标题，请执行以下操作

```
UIButton *backButton = (UIButton *)_backItem.customView;
backButton.titleLabel.text = @"changed"; 
```

* * *

## 回答 #4

> 赞同：-6
> 
> 时间：2012-06-18T18:16:27.757

这是修复：

```
 [button setTitle:@"Back" forState:UIControlStateNormal]; 
```

必须定义状态。

# java - 安卓 c2dm 服务

> ID：11038855
> 
> 赞同：0
> 
> 时间：2012-06-14T18:07:56.070
> 
> 标签：java, android

尝试实现 google C2DM 服务。

```
registrationIntent.putExtra("app", PendingIntent.getBroadcast(context,0,new Intent(), 0));
registrationIntent.putExtra("sender","example@gmail.com");
context.startService(registrationIntent); 
```

几乎每个教程都包含这行代码。这是我必须编码的服务吗？或者Android是否知道如何处理这种类型的意图。我从具有默认构造函数的辅助类调用此方法。我将当前的 Context 传递给上面的这个方法来创建注册 Intent。有人对它的工作原理或我的程序将去哪里有一些见解吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-14T18:12:02.970

你遗漏了最有趣的一段代码

```
Intent registrationIntent = new Intent("com.google.android.c2dm.intent.REGISTER"); 
```

> 这是我必须编码的服务吗？或者Android是否知道如何处理这种类型的意图。

请注意，意图位于*com.google.android.c2dm*域中。设备上的 Android C2DM 实现知道如何处理此意图，您将启动自己的服务来处理它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-14T18:15:42.490

不，您不必编写服务。您需要向 Google 的服务发送意图。您省略了创建意图的第一行，其中包含服务名称。通常是这样的：

　　　　Intent 注册Intent = new Intent("com.google.android.c2dm.intent.REGISTER");

该行`com.google.android.c2dm.intent.REGISTER`标识了 Google 的服务。

现在，您仍然需要编写将接收注册结果（ID 或错误）的广播接收器。还有一个接收器来接收实际的 C2DM 消息。

# iis - 我应该在 IIS 管理器中键入什么作为 localhost 的用户名和密码？

> ID：11038859
> 
> 赞同：0
> 
> 时间：2012-06-14T18:08:08.230
> 
> 标签：iis, windows-7, iis-manager

我正在尝试连接到 localhost 上的默认网站 - 但 IIS 要求我提供凭据（我知道我可以使用管理员帐户，但我正在尝试在 IIS 未以管理员身份运行时登录）。我尝试输入 Windows 的管理员用户名和密码，但它不接受它们。

我正在使用 Windows 7 家庭高级版。

我应该输入什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-14T18:35:44.100

好的 - 所以启用了匿名。接下来要检查的是网站运行的身份是否可以访问网站文件夹。IIS 中的每个站点都在一个应用程序池中运行，每个池都在一个用户帐户下运行。所以首先找出你正在运行的应用程序池。在右侧单击高级属性并检查您的应用程序池的名称。然后关闭该窗口并双击左侧网站上方的应用程序池。单击您的站点正在运行的应用程序池，然后单击右侧的高级属性。在启动的对话框中，在流程模型下检查 Identity 的值。然后检查您网站文件夹的权限，并确保该身份对该文件夹具有最低限度的读取和执行权限。

添加了另一个答案，因为上面的文字超出了评论限制

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-14T18:12:30.100

如果您尝试为要运行的站点设置您的身份，那么您需要将其作为本地系统帐户运行，或者您需要在计算机上创建一个新的用户帐户并使用这些凭据。

# perl - Perl 中等效的 Java 接口

> ID：11038861
> 
> 赞同：1
> 
> 时间：2012-06-14T18:08:17.217
> 
> 标签：perl, interface

> **可能重复：**
> [我可以在 Perl 中创建类似 Java 的接口吗？](https://stackoverflow.com/questions/1072439/can-i-create-java-like-interfaces-in-perl)

Perl 如何支持类似 Java 的接口？

[http://en.wikipedia.org/wiki/Interface_(Java)](http://en.wikipedia.org/wiki/Interface_(Java))

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-14T18:26:15.273

如果你使用[Moose](http://search.cpan.org/perldoc?Moose) ，你可以只用一个语句来创建[角色。](http://search.cpan.org/perldoc?Moose%3a%3aRole)`requires`

# path - 我不知道如何为 Cuda 添加 .dll 的路径

> ID：11038863
> 
> 赞同：1
> 
> 时间：2012-06-14T18:08:29.667
> 
> 标签：path, cuda, add

我对 CUDA 和 C 完全陌生。我的最终目标是为 CUDA 改编一个 FORTRAN 程序。现在，我无法运行一个简单的“Hello world”程序。

我已经能够使用`nvcc hello_test.cu --machine32`which 创建可执行文件进行编译。但是，当我尝试运行 .exe 时，我收到一条系统错误消息，说明：

> 程序无法启动，因为您的计算机缺少 cudart32_32_9.dll。尝试重新安装程序以解决此问题

我想我还没有添加这个文件的路径（我可以在“C:\ProgramData\NVIDIA Corporation\NVIDIA GPU Computing SDK 4.2\C\common\bin\”中找到）；但我不知道如何添加路径。任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-14T18:10:34.877

你可以走几条路线。要么只复制 DLL 并将其放在与可执行文件相同的目录中。

或者您可以在Windows的[PATH环境变量](http://support.microsoft.com/kb/310519)中添加您提到的路径。然后它应该能够找到DLL。

# css - 三列响应式等高，带 边框。如何在 CSS 中制作它？

> ID：11038865
> 
> 赞同：1
> 
> 时间：2012-06-14T18:08:39.697
> 
> 标签：css, equals

如何制作具有相同高度的多个列，每个部分之间有一个边框并保持响应...（见下图）。我知道如果您有**两**列，则可以使用背景图像，但是当有更多列时，整个响应部分都会继续进行。

编辑：这是我制作的 jsfiddle：http: [//jsfiddle.net/kF9LA/](http://jsfiddle.net/kF9LA/)

![所需布局的模型](../Images/57dc70ebe9ca59998d7dc57649b170af.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-14T18:31:31.880

那么两张背景图像呢，一张的边框距左侧 1/3，另一张的边框距右侧 1/3 呢？`background-position:33.3% 0;`然后分别用和将它们应用到一对容器中`background-position:66.6% 0;`。

类似于使用中间有边框的单个图像，并且`background-position:50% 0;`

**编辑：**

运行[快速测试](http://jsfiddle.net/Matt_Coughlin/sD8Fe/7/)后，这似乎有效，而且流畅/响应迅速。

HTML

```
<div class="container">
    <div class="bg1">
        <div class="bg2">
            <div class="content">...</div>
        </div>
    </div>
</div> 
```

CSS

```
.container {width:100%; border:2px solid #000;}

/* Tile a 2x1 image for the border */
.bg1 {background:url(img/border.png) repeat-y 33.3% 0;}
.bg2 {background:url(img/border.png) repeat-y 66.6% 0;} 
```

**编辑2：**

`height:200px;`从 .content 中删除，并在[demo](http://jsfiddle.net/Matt_Coughlin/sD8Fe/7/)中添加了一些文本内容，以显示高度可以根据内容增长。将两个 bg 图像替换为单个 2x1 图像。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-14T18:25:28.803

我在[这里](https://stackoverflow.com/a/10905779/1284654)的一个类似线程中有几个答案。最好的方法完全取决于您是否需要用户*直观地*看到 div 的高度相同。如果您的最终站点看起来像这个模型（唯一的视觉提示是边框），您不一定需要使用 MJT 的方法，而是可以使用背景图像，像[这样](http://kristinachilds.com/example/testes2.html)。

如上面链接中的评论所述，此方法不适用于水平流动布局，但如果您有固定宽度的布局，则可以将背景图像用于任意数量的列。只要确保你的数学是正确的:)

但是，如果您的布局需要完全流畅，MJT 的方法是最好的。它需要额外的标记，但是是防弹的。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-14T18:13:48.933

您可以查看 Matthew James Taylor 的解决方案：http: [//matthewjamestaylor.com/blog/equal-height-columns-cross-browser-css-no-hacks](http://matthewjamestaylor.com/blog/equal-height-columns-cross-browser-css-no-hacks)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-14T18:17:41.500

实现这一点的最简单方法就是使用带有边框的单元格的表格，但如果您手头有很多时间，@nebulousGirl 建议的 CSS 方法就是最好的方法。

# jquery - jQuery以及如何将表格滚动到某一行

> ID：11038867
> 
> 赞同：2
> 
> 时间：2012-06-14T18:08:45.123
> 
> 标签：jquery

我有一个包含大约 500 行的 HTML 表。我在页面上有一个输入文本框，用户可以在其中输入一些文本以在表格行中搜索，当他们单击 Enter 按钮时，页面会执行一些 jQuery 来查找并突出显示包含他们输入的文本的行。当然，亮点无非就是改变行的背景颜色。

**问题** 假设最终突出显示的行在用户当前表视图的下方（或上方），我如何滚动页面以使新突出显示的行进入视图？

我尝试了以下测试，但它不起作用。（只想将网页滚动到表格的最后一行）。

```
var rowPos = tbl.find('tr:last').position();
$("form:first").scrollTop(rowPos.top); 
```

谢谢您的帮助！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-14T18:16:17.417

你应该试试这个：

```
 window.scrollTo(0,200); 
```

或者如果你想使用 jquery 的话：

```
$("html").scrollTop(); 
```

确保你的窗口有滚动条

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-14T18:24:33.160

尝试这个

```
$("html,body").animate({scrollTop: rowPos.top}, 800); 
```

# perl - "$|++" 和 "$|=1" 有什么区别

> ID：11038873
> 
> 赞同：4
> 
> 时间：2012-06-14T18:09:11.693
> 
> 标签：perl

有人可以帮忙澄清一下吗？另外，请提及是否有“$|”的其他表示。

提前致谢。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-06-14T18:15:53.660

我所知道的没有实际区别；`$|`只存储一个布尔值（0 或 1），因此递增它永远不会导致除 1 之外的任何值。微微优化器可能会告诉您 ++ 更快。

另一方面，减少它就像一个切换，但我想不出在生产代码中这样做的任何充分理由：你想要它打开还是关闭。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-14T18:17:26.743

`$|`是超级神奇的，所以`$|++`和`$| = 1;`但是当你可以做你的意思时为什么要依赖魔法（`$| = 1;`）？

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-14T18:16:37.433

$的价值| 从 0 开始，所以 $|++ 从 0 递增到 1 而 $| = 1 将其设置为 1。但是请注意，它的值永远不能通过递增或赋值设置为高于 1，例如 $| = 2 仍为 1。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-15T10:16:28.713

`$|`您几乎肯定不想像现代代码那样摆弄低级细节。这要好得多，而且更明显可读性写成

```
use IO::Handle;
STDOUT->autoflush(1); 
```

# java - Java Applet 文本在翻转时突出显示

> ID：11038874
> 
> 赞同：1
> 
> 时间：2012-06-14T18:09:18.497
> 
> 标签：java, swing, text, highlight, japplet

我试图弄清楚如何制作不可编辑的文本（不是 JTextField），当鼠标滑过它时，其背景颜色会发生变化。我尝试使用 JButton 实现 ActionListener 并隐藏元素以使按钮看起来只是文本，但它只允许我在翻转时更改图标并检测何时单击按钮。另一个想法是使用 MouseListener 并声明文本周围矩形的特定坐标，在 mouseMoved 时它可以启动突出显示。但是，对于不同的字符串长度和自动换行等存在问题。什么是最好的对象和侦听器组合，以实现鼠标悬停时突出显示的文本字段的效果？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-14T19:33:06.787

嗯，也许使用 foucs 监听器，当字段获得 foucs 时选择所有文本？

```
import java.awt.*;
import java.awt.event.*;
import javax.swing.*;

public class TextField extends JTextField {

public TextField(String text) {
    super(text);

    addFocusListener(new FocusAdapter() {

        @Override
        public void focusGained(FocusEvent fe) {
             selectAll();
        }
    });
}

public static void main(String[] args) {
    EventQueue.invokeLater(new Runnable() {

        public void run() {
            JFrame f = new JFrame();
            f.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);

            JTextField tf = new JTextField("normal field");
            f.add(tf, BorderLayout.CENTER);

            TextField ftf =
                    new TextField("funny text field");
            f.add(ftf, BorderLayout.SOUTH);

            f.pack();
            f.setVisible(true);
        }
    });
}
} 
```

编辑：

嗯，实际上找到了一种更好的方法，使用上述方法，您必须单击文本字段才能获得焦点，现在我使用线程检查鼠标何时悬停在组件坐标上，然后突出显示该字段，我使用布尔值来控制突出显示，因为持续突出显示会引发错误。希望这是你想要的：

```
import java.awt.*;
import javax.swing.*;

public class TextFieldHighlight extends JTextField {

    static JTextField ftf;

    public static void main(String[] args) {
        EventQueue.invokeLater(new Runnable() {

            public void run() {
                JFrame f = new JFrame();
                f.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);

                ftf = new JTextField("Highlight");
                ftf.setEditable(false);
                f.add(ftf, BorderLayout.CENTER);
                f.pack();
                f.setVisible(true);
                Thread thread = new Thread(new Runnable() {

                    boolean focused = false;

                    @Override
                    public void run() {
                        while (true) {
                            if (mouseIsOverDisplayPanel()) {
                                if (ftf.hasFocus() && focused == false) {
                                    ftf.selectAll();
                                    focused = true;
                                } else if (!ftf.hasFocus()) {
                                    focused = false;
                                }
                            }
                        }
                    }
                });
                thread.start();
            }
        });

    }

    private static boolean mouseIsOverDisplayPanel() {

        if (MouseInfo.getPointerInfo().getLocation().x >= ftf.getLocationOnScreen().x
                && MouseInfo.getPointerInfo().getLocation().x <= ftf.getLocationOnScreen().x + ftf.getWidth()
                && MouseInfo.getPointerInfo().getLocation().y >= ftf.getLocationOnScreen().y
                && MouseInfo.getPointerInfo().getLocation().y <= ftf.getLocationOnScreen().y + ftf.getHeight()) {

            return true;

        } else {

            return false;

        }
    }
} 
```

# algorithm - 解决以下问题的想法

> ID：11038883
> 
> 赞同：-2
> 
> 时间：2012-06-14T18:09:36.997
> 
> 标签：algorithm

^(在图书馆)里有`N`书的页数由 给出。这些书将分配给学生，使得分配给任何学生的书的最大页数总和与最小页数总和之间的差值在分配给任何学生的书籍中，对于给定的输入是最小的。书籍也按一定的顺序排列，这个顺序永远不能改变。`i`^(`b_i``K`)

例如：

假设`B[]`包含每本书的页数。

然后对于`N=6` `K=3` `B={3,7,8,2,6,4}`，输出将是`0`因为我们可以将书 1 和 2 给学生 1，将书 3 和 4 给学生 2，剩下的给学生 3。这使得学生 1 的 10 页 2 的 10 页和 3 的 10 页，因此差异为 0

同样，当`B={3,6,8,2,6,4}`最小差异为 1 时。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-14T18:29:20.730

这是一个贪婪`O(nklogk)`算法的想法，可以让你开始。首先，将书籍从大到小排序。然后取出最大的未分配的书并将其分配给总页数最少的孩子。继续这样做，直到所有的书都被分配。每本书的作业都要求您根据孩子的总页数对他们进行排序。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-14T18:35:41.570

w=B 中页面的总和，您应该计算 w/n 以找到有限的答案。如果 w/n 是整数，这意味着您有这个问题。是否有 x 个元素的总和等于 w/n。这似乎NP问题

# ios - 如何在 XCode 4.3 中为仅限 iPhone 的应用程序指定 iPad Retina 图标？

> ID：11038887
> 
> 赞同：4
> 
> 时间：2012-06-14T18:10:02.503
> 
> 标签：ios, xcode, icons

我的 iPhone 应用程序图标在 iPhone/Retina 和 iPad 中显示良好。但在 iPad 视网膜（模拟器和设备）上，我得到一个显然包含应用程序开始屏幕的图标：

![在此处输入图像描述](../Images/81275a4daa95a8331f2671af7602b551.png)

鉴于我的应用程序仅适用于 iPhone（不是“通用”），Xcode 4.3 中没有添加 iPad 视网膜图标的选项。

如何让我的应用程序图标在 iPad Retina 设备上正确显示？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-14T20:51:38.183

在 Xcode 中，添加图标和启动图像的目标摘要界面仅仅是 Info.plist 文件的图形界面。当您制作 iPhone 唯一目标时，iPad 部分的图形界面将被隐藏。要将信息添加到图形界面未涵盖的 Info.plist 文件，请移至 Info 选项卡并在此处输入。要添加 Retina iPad 图标，请将名为 Icon-72@2x.png 和 Icon-Small-50@2x.png 的图标添加到 Info 部分的 Icon files 数组中。还将具有正确名称的图标的实际 144 x 144 和 100 x 100 png 表示添加到 Xcode 项目和目标中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-09T18:00:14.240

我的应用程序也遇到了这个问题，当我去编辑 Info.plist 文件时发现 Default@2x.png 在图标列表中 - 不知道它是如何到达那里的，但是这个项目一直在进行一段时间，这可能是 XCode 升级过多的结果。

从 plist 中的条目中删除它也解决了视网膜 iPad 上的问题。我仍将添加额外的 iPad 图标以防万一，但如果其他人遇到问题，则值得检查 XCode 在这些条目中添加的内容。

# c# - 完成或取消外部应用程序后返回菜单

> ID：11038890
> 
> 赞同：0
> 
> 时间：2012-06-14T18:10:10.460
> 
> 标签：c#, .net, windows, process, exit

我正在编写一个引用多个外部实用程序和防病毒应用程序的界面。在这种情况下，我有一个菜单，其中包含 Malwarebytes、CCleaner、Windirstat 等选项。

我的问题是，如果您取消外部程序，我会收到一个错误，整个界面会出现调试错误“操作已被用户取消”。

我需要的是恢复主界面，以便在取消或完成时可以选择另一个工具。

到目前为止，这是我的代码的主要部分。请记住，我已经用 c# 编程了 3 天了：

```
private void ccleanerButton_Click(object sender, EventArgs e)
{
    //set p as new process
    Process p = new Process();
    //select the process file name
    p.StartInfo.FileName = "ccsetup.exe";
    //Start things up
    p.Start();          
} 
```

当我调试时（在 Visual Studio C# 2010 Express 中），“p.Start();” 是突出显示的内容。如您所知，这是简单的流程调用。我一直在谷歌，这个论坛和其他人，但我似乎没有提出正确的问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-14T18:26:25.193

启用心理调试器。. .

Process.Start 抛出带有消息的 Win32Exception，“系统找不到指定的文件”

解决方案：将 StartInfo.Filename 设置为要执行的文件的完整路径。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-14T18:17:47.523

如果要关闭主 GUI 窗口和所有子窗口，则关闭进程的正确方法是使用[CloseMainWindow；如果要关闭 GUI 的子窗口，则使用](http://msdn.microsoft.com/en-us/library/system.diagnostics.process.closemainwindow.aspx)[Kill](http://msdn.microsoft.com/en-us/library/system.diagnostics.process.kill.aspx)。

# javascript - 如何确定网络视频的当前状态（正在播放|已停止）

> ID：11038894
> 
> 赞同：0
> 
> 时间：2012-06-14T18:10:23.363
> 
> 标签：javascript, vb.net, flash, video

如何确定用户何时开始或停止在网页上播放视频？例如，此页面上的视频：

[http://www.novamov.com/video/exm71hcwt1aly](http://www.novamov.com/video/exm71hcwt1aly)

我需要能够从客户端上运行的单独 .NET 应用程序中确定这一点。

# utf8-decode - 我网站上的 UTF-8 编码问题

> ID：11038911
> 
> 赞同：0
> 
> 时间：2012-06-14T18:11:45.503
> 
> 标签：utf8-decode

我坚持使用我的网站的编码，它没有将网站正确编码为 utf-8，但无法弄清楚我在哪里做错了这里是检查它是否有人有兴趣帮助我的示例。例如此链接：www.mkmeme.com/meme/eoj37h

当您查看源代码时，标记代码是：

```
<title>&#1046;&#1077;&#1085;&#1072;&#1090;&#1072; &#1090;&#1088;&#1077;&#1073;&#1072; &#1076;&#1072; &#1079;&#1085;&#1072;&#1077; 70 &#1088;&#1072;&#1073;&#1086;&#1090;&#1080;!..... </title> 
```

并且正确的代码需要是

```
<title>Жената треба да знае 70 работи!.....</title> 
```

希望有人能帮我解决这个问题

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-14T18:18:19.723

它对我来说正确地出现在浏览器中......

![标签标题截图](../Images/7c7843b7c3b02369299b107003253383.png)

我建议按原样离开。此外，这些项目是 html 实体，因此您需要将它们解码为 html 实体。

# html - 哪些流行网站正在使用 HTML5 History API？

> ID：11038923
> 
> 赞同：0
> 
> 时间：2012-06-14T18:12:25.467
> 
> 标签：html, browser-history

我正在研究 HTML5 History API，并好奇哪些流行网站正在使用它。考虑到 IE9 和旧版浏览器不支持它，我意识到仅使用 History API 是不切实际的，所以我对那些使用提供 hash-bang 回退支持的 History API 库的网站更感兴趣，例如 history.js .

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-14T18:18:21.630

Facebook 和 Pinterest，在我脑海中浮现。据报道，Twitter 也正在从 hashbangs 转向 pushState（最终）。我假设 Facebook 推出了自己的解决方案。Pinterest 似乎正在使用 Backbone.js，但如果它不是香草，我不会感到惊讶。

# c# - 实现扩展方法接口 C#

> ID：11038924
> 
> 赞同：2
> 
> 时间：2012-06-14T18:12:26.153
> 
> 标签：c#, interface, extension-methods

我是 C# 的新手，在理解如何实现接口的扩展方法方面存在问题。我没有找到任何关于这个问题的材料。从我发现的关于 C# 中的一般扩展方法的材料中，我期望以下简单的演示示例工作：

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;
namespace testExtension
{
public  interface  IcheckThingsOut
{
   bool x();
}
public static class extensionInterface
{
   public static bool y(this IcheckThingsOut bla) { return true;}
}
public class implementInteface : IcheckThingsOut
{
   bool IcheckThingsOut.x()
   {
       return true;
   }
   bool IcheckThingsOut.y()
   {
       return false;

   }
}
} 
```

但是编译器仍然不满意。我错过了什么，这里的正确语法是什么（与代码具有相同的语义）？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-14T18:17:24.063

你搞砸了扩展方法和接口的概念。扩展方法只是在静态类上调用静态方法的一种编译器方便的方法。它们不扩展接口。编译器在使用扩展方法时所做的是：

```
 IcheckThingsOut instance = new IcheckThingsOutImpl();
  instance.y(); 
```

...将转换为：

```
 IcheckThingsOut instance = new IcheckThingsOutImpl();
  extensionInterface(instance, y); 
```

如您所见， y 不是您界面上的方法。这就是为什么您不能在实现中显式实现它的原因。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-14T18:17:27.697

您似乎希望使用的是“扩展方法”。`extensionInterface`为此目的，您的课程已正确实施。

但是，创建扩展方法实际上并不扩展您的接口，因此尽管您可以调用，但您不能在隐式或显式`myIcheckThingsOut.y()`实现的类中重新实现该方法。`IcheckThingsOut`

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-14T18:15:53.390

您不能更改“扩展”类或接口内的扩展方法的实现。扩展方法是实现。

扩展方法提供了一种将方法“添加”到接口或类的方法。整个想法是您正在扩展的接口或类并不“知道”这些方法。换句话说，您“添加”功能而不改变类或接口本身。

（请注意，虽然符号表明您正在向接口添加方法，但实际上这些方法就运行时而言是普通的静态方法）。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-14T18:17:15.480

```
bool IcheckThingsOut.y()
{
    return false;

} 
```

错了： IcheckThingsOut 没有为 function 提供原型`y`。它应该只是

```
bool y()
{
    return false;
} 
```

因为它只是遮蔽了另一种方法

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-14T18:15:53.737

IcheckThingsOut 没有 bool y()

# android - 需要添加两个微调器的值并填充到编辑文本中

> ID：11038928
> 
> 赞同：0
> 
> 时间：2012-06-14T18:12:34.017
> 
> 标签：android, spinner

我很难让微调器填充一个值。我有两个微调器，每个都有多个项目可供选择。它们需要一起添加并填充到编辑文本框中。

我还有一个折扣 % 编辑文本，用户将在其中输入折扣。两个旋转器的总和需要按在此框中输入的金额进行折扣。

谁能帮我解决这个问题。我目前不在我正在编程的计算机上，所以我无法粘贴我目前拥有的代码，但对于这个例子，你可以使用，微调器“A”，微调器“B”，编辑文本“成本”，编辑文本“折扣”

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-14T18:28:59.000

究竟是什么问题？你不能得到选定的微调器值吗？

请在此处查看微调器示例[以及](http://developer.android.com/reference/android/widget/Spinner.html)此处的[文档](http://developer.android.com/resources/tutorials/views/hello-spinner.html)。特别是寻找 setOnItemSelectedListener()。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-14T18:29:42.953

尝试这样的事情：

```
int subtotal = Integer.parseInt((String) spinnerA.getSelectedItem()) * Integer.parseInt((String) spinnerB.getSelectedItem());
double discount = Double.parseDouble(discountEditText.getText().toString()) / 100;

double total = subtotal * (1.0 - discount); 
```

（这假设您已确保折扣字段是有效的 Double 并期望输入像`10`%。）

# ruby-on-rails - 忽略 rspec 中的验证失败

> ID：11038929
> 
> 赞同：0
> 
> 时间：2012-06-14T18:12:34.253
> 
> 标签：ruby-on-rails, ruby-on-rails-3, validation, rspec, callback

我需要测试一个正在运行的回调`before_validation`，但是因为我只想测试回调，所以我不希望在验证失败时测试失败，此时我得到：

```
ActiveRecord::RecordInvalid:
       Validation failed: Preview Invalid video ID 
```

我已经尝试了很多东西。我相信我的回调方法在使用时没有被调用，`.save(:validate => false)`因为它运行在`before_validation`.

但是当我做这样的事情时：

```
show = FactoryGirl.build :show
show.should_receive :parse_url
show.save 
```

我明白了

```
Failure/Error: show.should_receive :parse_url
   (#<Show:0x007fd9954699e0>).parse_url(any args)
       expected: 1 time
       received: 0 times 
```

尽管我在模型中的代码：

```
before_validation :parse_url, :on => :save 
```

除了方法调用之外，我还想在格式化后检查字段。

我会非常感谢任何帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-14T19:46:45.350

Well, you can always just catch the ActiveRecord::RecordInvalid error when it fires, and yet still test the behaviour of your before_validation. Because you catch the error, the RSpec test won't fail.

# ios - iOS UITableView 内容未加载 - 未使用属性访问结果

> ID：11038931
> 
> 赞同：0
> 
> 时间：2012-06-14T18:12:35.187
> 
> 标签：ios, twitter, uitableview

我正在尝试从 Twitter 加载包含内容的表格。该表在 UIView 中并在 drawRect() 中创建......但我不断收到警告：

```
Property access result unused - getters should not be used for side effects 
```

在各个。

我的桌子上什么都没有。

这是我的 .h 文件：

```
#import <UIKit/UIKit.h>
#import <QuartzCore/QuartzCore.h>
#import <Twitter/Twitter.h>

#import "ColorController.h"

@interface TwitterController : UIView <UITableViewDelegate, UITableViewDataSource> { 

UIButton* btnCloseView; 
UITableView* tblTweets;
UIImageView* imgTwitterIcon;

ColorController* colorManager;

NSMutableArray* tweetsArray;

NSString* twitterID;

}

@property (nonatomic, retain) NSString* twitterID;

- (void) getTweets; 

- (void) closeWin;

@end 
```

和我的.m

```
#import "TwitterController.h"

@implementation TwitterController

@synthesize twitterID;

- (id)initWithFrame:(CGRect)frame
{
self = [super initWithFrame:frame];
if (self) {

    colorManager = [ColorController new];
}
return self;
}

- (void)drawRect:(CGRect)rect {

imgTwitterIcon = [[UIImageView alloc] initWithImage:[UIImage imageNamed:@"imgTwitterBird"]];
CGRect twitterIconFrame = [imgTwitterIcon frame];
twitterIconFrame.origin.x = 50.0;
twitterIconFrame.origin.y = 20.0;

tblTweets = [[UITableView alloc] initWithFrame:CGRectMake(50.0, 25.0, 220.0, 500.0)];
tblTweets.separatorStyle = UITableViewCellSeparatorStyleSingleLine;
tblTweets.separatorColor = [colorManager setColor:176.0:196.0:222.0];
tblTweets.layer.borderWidth = 1.0;
tblTweets.rowHeight = 20.0;
tblTweets.scrollEnabled = YES;
tblTweets.delegate.self;
tblTweets.dataSource.self;

UIImage* imgCloseButton = [UIImage imageNamed:@"btnCloseWindow.png"];
CGSize imageSize = imgCloseButton.size;
btnCloseView = [[UIButton alloc] initWithFrame: CGRectMake(220.0, 550.0, imageSize.width, imageSize.height)];
[btnCloseView setImage:[UIImage imageNamed:@"btnCloseWindow.png"] forState:UIControlStateNormal];
[btnCloseView addTarget:self action:@selector(closeWin:) forControlEvents:UIControlEventTouchUpInside];

[self getTweets];
[self addSubview:tblTweets];
[self addSubview:imgTwitterIcon];
[self addSubview:btnCloseView];

}

- (void) getTweets { 

//array to hold tweets
tweetsArray = [[NSMutableArray alloc] init];

///set up a NSURL to the twitter API
NSURL* twitterAPI = [NSURL URLWithString:[NSString stringWithFormat:@"https://api.twitter.com/1/statuses/user_timeline.json?include_entities=true&include_rts=true&screen_name=%@&count=10", twitterID]];

//get last 10 tweets (max is 20)
TWRequest *twitterRequest = [[TWRequest alloc] initWithURL:twitterAPI 
            parameters:nil requestMethod:TWRequestMethodGET];

// Notice this is a block, it is the handler to process the response
[twitterRequest performRequestWithHandler:^(NSData *responseData, NSHTTPURLResponse *urlResponse, NSError *error) {
    if ([urlResponse statusCode] == 200)  {

        // The response from Twitter is in JSON format
        // Move the response into a dictionary and print
        NSError *error;        
        NSDictionary *tweetsDict = [NSJSONSerialization JSONObjectWithData:responseData options:0 error:&error];

        for(NSDictionary* thisTweetDict in tweetsDict) { 

            [tweetsArray addObject:[thisTweetDict objectForKey:@"text"]];
        }

        [tblTweets reloadData];
    }
    else
        NSLog(@"Twitter error, HTTP response: %i", [urlResponse statusCode]);
}];

} 
```

#pragma mark 表管理

```
- (NSInteger)numberOfSectionsInTableView:(UITableView *)tableView {
return [tweetsArray count];
NSLog(@"%i", [tweetsArray count]);
}

- (NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section {
return [tweetsArray count];
}

- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath {

static NSString *CellIdentifier = @"tableCell";

UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier];
if (cell == nil) {
    cell = [[UITableViewCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:CellIdentifier];
}

cell.textLabel.textColor = [UIColor colorWithRed:66.0/255.0 green:66.0/255.0 blue:66.0/255.0 alpha:1];
cell.textLabel.font = [UIFont fontWithName:@"Helvetica-Bold" size: 13.0];
cell.textLabel.text = [tweetsArray objectAtIndex:indexPath.row];
CGRect cellFrame = [cell frame];
cellFrame.size.height = 25.0;

return cell;
}

- (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath {

NSString* thisTweet = [tweetsArray objectAtIndex:indexPath.row];
}

#pragma mark Close Window

- (void) closeWin { 

NSMutableDictionary* userData = [[NSMutableDictionary alloc] init];

[userData setObject:@"closeTwitter" forKey:@"theEvent"];

[[NSNotificationCenter defaultCenter] postNotificationName:@"theMessenger" object:self userInfo: userData];

}

@end 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-14T18:17:54.330

drawRect 用于在此视图中绘制内容，使用绘图函数您应该将视图添加到`layoutSubviews`

而不是`- (void)drawRect:(CGRect)rect`使用`- (void)layoutSubviews`

这可能会或可能不会解决您的问题，但它仍然是正确的方法

# php - silex.phar 重定向我

> ID：11038936
> 
> 赞同：0
> 
> 时间：2012-06-14T18:13:05.373
> 
> 标签：php, symfony1, silex

我正在使用本地域 mysite.dev，当我访问将由 silex 提供的 url 时，它会将我重定向到 www.mysite.dev

我能够在我的代码中挑出导致问题的行：

```
require_once __DIR__.'/vendor/silex.phar'; 
```

有人知道对此有什么补救措施吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-26T18:04:27.603

[PHP 配置](http://silex.sensiolabs.org/doc/phar.html#php-configuration)部分的建议可能有助于解决您的问题。

不过，我建议您按照文档的建议通过 Composer 安装 Silex：

> 不推荐使用 Silex phar 文件。您应该使用 Composer 来安装 Silex 及其依赖项或下载其中一个档案。

# android - 单击按钮时如何启动新活动？

> ID：11038940
> 
> 赞同：2
> 
> 时间：2012-06-14T18:13:29.507
> 
> 标签：android

我已经知道如何在单击按钮时启动一个新活动，但是我在一个布局上有三个按钮。我希望该 ONE 活动上的三个按钮中的每一个都链接到其他三个活动。

我有一个我称之为“主要”的活动，按钮 1 被称为服务，我想将它链接到服务活动。按钮 2 称为搜索，我希望它转到搜索活动，第三个是“地图”，我想链接到地图活动。

有人可以帮我吗？谢谢

编辑：另外，我是 Android 编码的初学者，你能详细解释一下吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-14T18:18:57.293

那么问题出在哪里？只需设置您的类将实现`View.OnClickListener`并覆盖`onClick()`您得到的方法。

```
public class MainActivity extends Activity implements View.OnClickListener {
   // body
}

@Override
public void onClick(View view) {
   switch (view.getId()) {

      case R.id.serviceBtn:
         Intent serviceIntent = new Intent(this, ServiceActivity.class);
         startActivity(serviceIntent);
         break;
      case R.id.searchBtn:
         Intent searchIntent = new Intent(this, SearchActivity.class);
         startActivity(searchIntent);
         break;
      case R.id.mapBtn:
         Intent mapIntent = new Intent(this, MapActivity.class);
         startActivity(mapIntent);
         break;
   } 
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-14T18:20:09.337

将`onclick`监听器绑定到所有三个按钮。在侦听器中，检索按钮的 ID。创建一个类型的变量`Class`。根据按钮 ID 的值，将其初始化为要调用的活动的类。然后`Intent`为该类构造一个，并调用`startActivity()`.

编辑 hawaii.five-0：这是我的做法：

```
@Override
public void onClick(View view) {
   Class c = null;
   switch (view.getId()) {
      case R.id.serviceBtn:
         c = ServiceActivity.class;
         break;
      case R.id.searchBtn:
         c = SearchActivity.class;
         break;
      case R.id.mapBtn:
         c = MapActivity.class;
         break;
   } 
   Intent i = new Intent(YourActivity.this, c);
   startActivity(i);
} 
```

编辑2：

```
class CurrentActivity extends Activity
    implements OnClickListener  
{
    void onCreate(Bundle b)
    {
        //Other initialization goes here...

        ((Button)findViewById(R.id.MyButton1)).setOnClickListener(this);
        ((Button)findViewById(R.id.MyButton2)).setOnClickListener(this);
        ((Button)findViewById(R.id.MyButton3)).setOnClickListener(this);
    }

} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-14T18:18:48.053

它很容易亲爱的。只需将此代码放在按钮单击事件上

```
Intent myIntent = new Intent(CurrentActivity.this, NextActivity.class);
CurrentActivity.this.startActivity(myIntent); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-06-10T10:38:50.893

*单击按钮时*很容易**启动新活动** 。我已经给出了这个例子。

 *```
// R.id.btnAdd -> which is present in your layout page
Button btnStart = (Button) findViewById(R.id.btnAdd); // declare button
// declare listener evernt for button
OnClickListener listener = new OnClickListener() {

   @Override
   public void onClick(View v) {
        // declare the Intent for moving another activity
        Intent view = new Intent(YourCurrentClassName.this,
        anotherClassName.class);
        // startActivity is used to navigating the view
        startActivity(view);
    }
};
// set the listener evernt to button
btnStart.setOnClickListener(listener); 
```*

# mysql - CakePHP 登录失败

> ID：11038941
> 
> 赞同：0
> 
> 时间：2012-06-14T18:13:33.360
> 
> 标签：mysql, cakephp, authentication, cakephp-2.0, bluehost

我有一个简单的 cakephp 应用程序，我使用本教程[Simple Authentication and Authorization Application](http://book.cakephp.org/2.0/en/tutorials-and-examples/blog-auth-example/auth.html)构建。我的代码块与教程中的完全相同。

我使用 Apache/MySQL 在我的计算机上运行它，一切正常。当我将它部署到我的共享主机（Bluehost）时，我开始出现登录失败。

我检查了本地和服务器上的 MySQL 数据库。不同之处在于我的本地数据库中的密码是散列的，但托管数据库上的密码是普通的。（运行的代码完全相同。）（我想明确这一点，这不是我的意图，显然是不同的行为，但我不知道它的原因是什么。）

这是我的桌子：

```
CREATE TABLE users (
    id INT UNSIGNED AUTO_INCREMENT PRIMARY KEY,
    username VARCHAR(50),
    password VARCHAR(50),
    role VARCHAR(20),
    created DATETIME DEFAULT NULL,
    modified DATETIME DEFAULT NULL
); 
```

这些是我的控制器分别用于注册和登录的相关方法：

```
public function add() {
    if ($this->request->is('post')) {
        $this->User->create();
        if ($this->User->save($this->request->data)) {
            $this->Session->setFlash(__('The user has been saved'));
            $this->redirect(array('action' => 'index'));
        } else {
            $this->Session->setFlash(__('The user could not be saved. Please, try again.'));
        }
    }
}

public function login() {
    if ($this->request->is('post')) {
        if ($this->Auth->login()) {
            $this->redirect($this->Auth->redirect());
        } else {
            $this->Session->setFlash(__('Invalid username or password, try again'));
        }
    }
} 
```

最后这是我模型的 beforeSave() 方法：

```
public function beforeSave() {
    if (isset($this->data[$this->alias]['password'])) {
        $this->data[$this->alias]['password'] = AuthComponent::password($this->data[$this->alias]['password']);
    }
    return true;
} 
```

在我的本地计算机上，我可以先添加一个用户，然后再使用该用户登录。在服务器上，我可以添加一个用户，但是当我想登录时，我看到错误消息“用户名或密码无效，请重试”

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-14T18:27:33.650

看起来您需要定义 beforeSave 函数以接受默认参数。这似乎是 cakephp 和 php 5.4 之间的问题

```
public function beforeSave($options = array()) {
    if (isset($this->data[$this->alias]['password'])) {
        $this->data[$this->alias]['password'] = AuthComponent::password($this->data[$this->alias]['password']);
    }
    return true;
} 
```

有关更多信息，请参见此处：http:
[//community.webfaction.com/questions/8397/cakephp-2-auth-failing-on-production-only](http://community.webfaction.com/questions/8397/cakephp-2-auth-failing-on-production-only)

# c# - 在 C# 中使用 twitter api 登录

> ID：11038943
> 
> 赞同：-1
> 
> 时间：2012-06-14T18:13:39.057
> 
> 标签：c#, c#-4.0, c#-3.0, twitter

我正在开发一个应用程序，我将在其中提供我的 twitter 用户名和密码以登录到 twitter 帐户。我看过[twitter](https://dev.twitter.com/docs/twitter-libraries#dotnet) API，但这对我没有帮助，因为它们都不包含 Visual Studio 上的任何可执行代码。`.sln`文件是也不起作用。任何可以帮助我提供示例代码的人。温柔地谢谢你

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-14T18:17:02.800

CodeProject 上的这篇文章应该为您指明正确的方向。

[http://www.codeproject.com/Articles/247336/Twitter-OAuth-authentication-using-Net](http://www.codeproject.com/Articles/247336/Twitter-OAuth-authentication-using-Net)

这是另一篇关于设置 Twitter 身份验证的好文章。

[http://www.voiceoftech.com/swhitley/index.php/2009/03/twitter-oauth-with-net/](http://www.voiceoftech.com/swhitley/index.php/2009/03/twitter-oauth-with-net/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-14T18:22:05.227

看看这个教程[C# Twitter 客户端](http://www.srikanthtechnologies.com/blog/dotnet/twitterclient.aspx)

HTH。

# jquery - jquery循环插件：没有循环

> ID：11038947
> 
> 赞同：-2
> 
> 时间：2012-06-14T18:13:47.167
> 
> 标签：jquery, plugins, cycle

如果我希望此页面上的插件自动移动，我应该添加什么？

jquery 循环帮助文件中似乎没有对此选项的引用。

[http://jquery.malsup.com/cycle/pager3.html](http://jquery.malsup.com/cycle/pager3.html)

谢谢，

为什么我会收到此消息？

所有新问题都经过“最低质量”过滤器，该过滤器检查极差问题的特征。您的问题已被过滤器捕获。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-14T18:15:44.793

这是`timeout`参数。设置为

```
$('#slideshow').cycle({ 
    fx:     'turnDown', 
    speed:  'fast', 
    timeout: 2000, 
    pager:  '#nav', 
    pagerAnchorBuilder: function(idx, slide) { 
        // return selector string for existing anchor 
        return '#nav li:eq(' + idx + ') a'; 
    } 
}); 
```

它的价值在`milliseconds`. 在那之后，它将更改为下一个图像。

检查此选项参考页[http://jquery.malsup.com/cycle/options.html](http://jquery.malsup.com/cycle/options.html)

# c# - Java MD5 散列与 C# MD5 散列不匹配

> ID：11038954
> 
> 赞同：4
> 
> 时间：2012-06-14T18:14:22.360
> 
> 标签：c#, java, md5, hash, message-digest

我对加密/散列知之甚少。

我必须散列一个加密密钥。Java中的例子是这样的......

```
String encryptionKey = "test";

    MessageDigest messageDigest = MessageDigest.getInstance("MD5");
    messageDigest.update(encryptionKey.getBytes("UTF-8"), 0, encryptionKey.length());
    byte[] encryptionKeyBytes = messageDigest.digest(); 
```

如果我错了，现在纠正我，但上面的代码使用 MD5 算法对字符串进行哈希处理。

当我在 C# 中散列相同的字符串时，我想要相同的结果。

我当前的 C# 代码如下所示...

```
string encryptionKey = "test";

        var md5 = MD5.Create();
        var keyBytes = Encoding.UTF8.GetBytes(encryptionKey);
        byte[] encryptionKeyBytes = md5.ComputeHash(keyBytes); 
```

但结束字节结果不匹配。

Java得到...

```
[0] 9   
[1] -113    
[2] 107 
[3] -51 
[4] 70  
[5] 33  
[6] -45 
[7] 115 
[8] -54 
[9] -34 
[10]    78  
[11]    -125    
[12]    38  
[13]    39  
[14]    -76 
[15]    -10 
```

C#得到...

```
 [0] 9   byte
    [1] 143 byte
    [2] 107 byte
    [3] 205 byte
    [4] 70  byte
    [5] 33  byte
    [6] 211 byte
    [7] 115 byte
    [8] 202 byte
    [9] 222 byte
    [10]    78  byte
    [11]    131 byte
    [12]    38  byte
    [13]    39  byte
    [14]    180 byte
    [15]    246 byte 
```

我需要我的 C# 代码来获得与 Java 代码相同的结果（而不是相反），有什么想法吗？

谢谢你。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-06-14T18:21:03.860

实际上，结果*是*相同的。与其他整数类型一样，字节值可以解释为有符号或无符号。例如，如果解释为无符号，则`10001111`对应于（您的第二个 C# 值）。`143`但是，如果解释为有*符号*（使用[二进制补码](http://en.wikipedia.org/wiki/Two%27s_complement)），则其值为`-113`（您的第二个 Java 值）。

因此，这种差异似乎是由于您的值被格式化为用 Java 签名但在 C# 中未签名造成的。如果要在 C# 中获取有符号字节，可以使用：

```
sbyte[] encryptionKeyBytesSigned = 
    encryptionKeyBytes.Select(b => (sbyte)b).ToArray(); 
```

但是，请注意，这不仅仅是仅在显示值时出现的格式问题。保存到文件时，两个结果应该相同。

# javascript - 将 div 同时滑入和滑出页面视图

> ID：11038958
> 
> 赞同：1
> 
> 时间：2012-06-14T18:14:51.643
> 
> 标签：javascript, jquery, html, css, jquery-animate

我对javascript相当陌生。我已经改编了一些脚本，我发现它可以做一些类似于我需要的事情，但它也不能像我想要的那样工作。我为冗长的解释道歉。

我有 6 个按钮，按钮 1 -3 负责左侧的 div，按钮 4 - 6 负责右侧的 div。

当脚本运行时，所有的 div 都不应该是可见的。

单击按钮#1 时，div#1 从左侧滑出，然后从容器左侧定位到它自己的宽度。这对于对应于 button#2 和 button#3 的 div#2 和 div#3 是相同的。一次只能看到 1 个 div，因此 button#2 将隐藏 div#1 和 div#3 并显示 div#2 等。所有其他按钮都一样。

单击按钮#4 时，div#4 从右侧滑出，并从容器右侧定位到其自己的宽度。单击另一个按钮时隐藏的 div 与上面相同，一次只能看到 1 个 div。

帮助将不胜感激。

```
<script type="text/javascript" src="jquery.min.js"></script>
<script type="text/javascript">

$(window).load(function(){

   $('.button-left').click(function() {
    var index = $(this).index(".button-left");
    var $box = $(".box-left:eq(" + index + ")");

    $(".box-left").not($box).animate({
        left: '150%'
    }, 500);

    if ($box.offset().left < 0) {
        $box.css("left", "150%");
    } else if ($box.offset().left > $('#container').width()) {
        $box.animate({
            left: '25%',
        }, 500);
    }
});

    $('.button-right').click(function() {
    var index = $(this).index(".button-right");
    var $box = $(".box-right:eq(" + index + ")");

    $(".box-right").not($box).animate({
        left: '150%'
    }, 500);

    if ($box.offset().left < 0) {
        $box.css("left", "150%");
    } else if ($box.offset().left > $('#container').width()) {
        $box.animate({
            left: '105%',
        }, 500);
    }
});
});

</script>
<style type="text/css">
#container {
    position: absolute;
    margin: 0px;
    margin-left:auto;
    margin-right:auto;
    padding: 0px;
    width:1024px;
    height:568px;
    overflow: hidden;
    background-color:#999999;
}

.box-left {
    position: absolute;
    width: 200px;
    height: 300px;
    line-height: 300px;
    font-size: 50px;
    text-align: center;
    border: 2px solid black;
    left: 150%;
    top: 100px;
    margin-left: -25%;
}

.box-right {
    position: absolute;
    width: 200px;
    height: 300px;
    line-height: 300px;
    font-size: 50px;
    text-align: center;
    border: 2px solid black;
    top: 100px;
    margin-left: -25%;

}

#box1 {
    background-color: green;
    left:260px;
}

#box2 {
    background-color: yellow;
}

#box3 {
    background-color: red;
}

#box4 {
    background-color: orange;
    right:0px;
}

#box5 {
    background-color: purple;
}

#box6 {
    background-color: brown;
}
</style>

<div class="button-left"><a href="#">Click Box #1</a> </div>
<div class="button-left"><a href="#">Click Box #2</a> </div>
<div class="button-left"><a href="#">Click Box #3</a> </div>

<div class="button-right"><a href="#">Click Box #4</a> </div>
<div class="button-right"><a href="#">Click Box #5</a> </div>
<div class="button-right"><a href="#">Click Box #6</a> </div>

<div id="container">

    <div id="box1" class="box-left">Box #1</div>
    <div id="box2" class="box-left">Box #2</div>
    <div id="box3" class="box-left">Box #3</div>
    <div id="box4" class="box-right">Box #4</div>
    <div id="box5" class="box-right">Box #5</div>
    <div id="box6" class="box-right">Box #6</div>

</div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-14T18:40:34.737

[jsfiddle.net/KFqvf](http://jsfiddle.net/KFqvf)

这是一个我认为你想要的jsfiddle。只需要简单的jquery动画功能来左右滑动，以及一个简单的菜单来选择项目！

希望这可以帮助

# java - 为某些类型扩展泛型类？

> ID：11038962
> 
> 赞同：3
> 
> 时间：2012-06-14T18:15:08.323
> 
> 标签：java, generics

如果说我有一些通用类，例如：

```
public class Attribute<T> {

} 
```

现在是否可以为特定类型提供特定方法？即为某些类型扩展泛型类？

例如：

我想添加额外的方法`Attribute<String>`，但不是为了说`Attribute<Integer>`。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-14T18:20:47.773

Java 中没有这种直接的可能性。

但是您可以`StringAttribute`扩展`Attribute<String>`并添加您想要的方法。您可以以依赖注入方式创建一种工厂，它将构造例如`Attribute<Integer>`for`Integer`和`StringAttribute`for `String`。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-14T18:20:22.267

不是直接的，但你可以这样做......

```
public class StringAttribute extends Attribute<String>
{
    public String myNewMethod() ...
    ....
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-14T18:21:07.793

你可以这样做：

```
public abstract class Attribute<T> {
    public abstract T getValue();
}

public class Attr1 extends Atrribute<String> {

   @Override 
   public String getValue() {
      return "smth"
   }
} 
```

创建一个抽象类，该类将具有泛型类型`T`和具有相同泛型类型的抽象方法。然后其他类可以通过指定真实对象而不是泛型来扩展它。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-14T18:22:57.163

你的类应该是抽象的：

```
public abstract class Attribute<T> {
  void someMethod(T object);
} 
```

然后添加子类，例如：

```
public AttributeString<T extends String> extends Attribute<T>{
    void someMethod(T object){
    }
} 
```

# java - 请求 URL 中的括号是合法的，但不是 URI (Java)？

> ID：11038967
> 
> 赞同：6
> 
> 时间：2012-06-14T18:15:15.527
> 
> 标签：java, url, servlets, uri

显然，URI 路径中不允许使用括号。

我不确定这是否是 Tomcat 问题，但我收到的请求路径包含`]`.

换句话说

```
request.getRequestURL() == "http://localhost:8080/a]b"
request.getRequestURI() == "/a]b" 
```

BTW getRequestURL() 和 URI 通常被转义，即`http://localhost:8080/a b`

```
request.getRequestURL() == "http://localhost:8080/a%20b" 
```

因此，如果您尝试这样做：

```
new URI("http://localhost:8080/a]b")
new URI(request.getRequestURL()) 
```

它将因 URI 解析异常而失败。如果我逃脱了会使`%20`双重逃脱的路径。

**如何将 Servlet 请求 URL 转换为 URI？**

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-14T19:47:40.787

Java 的 URI 似乎非常严格，需要对[Excluded US-ASCII Charset](https://www.rfc-editor.org/rfc/rfc2396#section-2.4.3)进行转义。

为了解决这个问题，我只对那些减去`'%'`and的字符进行编码，`'#'`因为 URL 可能已经包含这些字符。我使用了 Http Clients URI utils，由于某种原因不在 HttpComponents 中。

```
private static BitSet badUriChars = new BitSet(256);
static {
    badUriChars.set(0, 255, true);
    badUriChars.andNot(org.apache.commons.httpclient.URI.unwise);
    badUriChars.andNot(org.apache.commons.httpclient.URI.space);
    badUriChars.andNot(org.apache.commons.httpclient.URI.control);
    badUriChars.set('<', false);
    badUriChars.set('>', false);
    badUriChars.set('"', false);
}

public static URI toURIorFail(String url) throws URISyntaxException {
    URI uri = URIUtil.encode(url, badUriChars, "UTF-8");
    return new URI(uri);
} 
```

编辑：这里有一些相关的 SO 帖子（更多内容）：

*   [哪些字符使 URL 无效？](https://stackoverflow.com/questions/1547899/which-characters-make-a-url-invalid/1547922#1547922)

# java - 如何记录一些 RESTful 服务响应信息 apache 日志文件？

> ID：11038969
> 
> 赞同：0
> 
> 时间：2012-06-14T18:15:30.630
> 
> 标签：java, apache, access-log

我有一个简单的 java RESTful 服务，它查询数据库并根据请求参数发回响应。我需要根据 apache access_log 生成一些简单的报告，例如每天的查询数、类似查询的数量等。

我需要生成的报告之一是列出返回零结果的查询。我想知道如何实现这一目标。我不能依赖 apache 日志中的响应大小，因为仍然会返回结果为零的响应 xml。

如果查询没有返回结果并将其打印在 apache 日志中，我正在考虑设置一个自定义 cookie。

```
 LogFormat "%h %l %u %t \"%r\" %>s %b \"%{Referer}i\" \"%{User-Agent}i\" \"%{Cookie}i\"" combined-cookie 
```

不确定这是否可行，或者说实话，这是正确的方法。

任何指针将不胜感激。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-14T19:05:35.597

如果您确定“无结果”响应是*NNN*字节，并且您知道任何其他响应都会不同（更大），那么您可能会在访问日志中查询大小为*NNN*的响应。但这有点小题大做，如果空响应的大小因任何原因发生变化，就会变得脆弱。

我认为 Apache 没有任何内置功能来检查响应的内容并根据数据的某些属性设置变量。（你可能会用 mod_ext_filter 做一些非常老套的事情，但这不值得麻烦，而且性能可能会受到影响。）

听起来您已经能够更改产生响应的服务器代码。既然是这样，我不会尝试使用 Apache 日志记录。相反，我会为您的服务器添加一些额外的日志记录功能。每个响应都可以将一行输出到不同的日志文件。这些行可能如下所示：

```
2012-06-14 14:02:15.345 count=0 status=Completed
2012-06-14 14:02:15.906 count=12 status=Completed
... 
```

然后，您需要的报告类型变得更容易。

但是，如果您绝对必须使用 Apache，那么我的建议是发明一个新的 HTTP 标头，例如`X-Query-Result`，然后调整您的服务器以在每个响应上设置该标头。例如：

```
X-Query-Result: count=0 status=Completed 
```

然后类似于您的建议，`\"%{X-Query-Result}i\"`在您的日志格式中使用。我会选择这个而不是 cookie 只是为了避免与 cookie 相关的额外“重量”。

# asp.net - AspNet + IE8：auth cookie 并不总是设置

> ID：11038974
> 
> 赞同：1
> 
> 时间：2012-06-14T18:15:38.200
> 
> 标签：asp.net, cookies, internet-explorer-8, forms-authentication

背景：

*   AspNet C# 3.5 Web 应用程序
*   IIS 7
*   表单认证
*   在*web.config*`<forms />`中，设置中没有“域”
*   cookie 名称：.exampleAuth

有时，并且仅在 IE8 中，会话身份验证 cookie 未在浏览器中设置。用户登录后，他可以看到 web 应用程序的 default.aspx 页面，但如果他单击任何地方，他就会断开连接。没有授权cookie。`AspNet_SessionId`cookie 创建得很好，作为我们应用程序管理的另一个。

看起来它正在发生，因为我们删除了“域”属性`Web.Config`以允许`example.com`和`example2.net`url 用于 Web 应用程序。

Cookie 是`FormsAuthentication.GetAuthCookie(user.Id, true);`像以前一样创建的。

IE7、IE9、FF、Chrome 都可以。IE8 有时（假设 95% 的时间没问题，5% 的用户断开连接）。对于某些用户，关闭 IE8（不刷新 cookie 和缓存）可以解决问题。

还有一件事：如果我们启用 IE8 的“cookie alert popup”，我们可以看到 auth cookie**有时会**在登录后设置两次。首先是`Expiration=Session`，然后是`Expiration=Now+1h20`（会话设置为 200 ！）

# c# - SQL Server CE 中的数据消失

> ID：11038983
> 
> 赞同：2
> 
> 时间：2012-06-14T18:16:15.420
> 
> 标签：c#, entity-framework, sql-server-ce

我在使用带有 C# 和 EF 的本地 SQL Server CE 数据库时遇到问题。

我有一个新创建的数据库文件，其中包含一个表和三列。我使用 EF 添加了一些数据。我的添加数据的程序可以读取该数据。

如果我用 vs2010 打开表，表是空的。之后我再次启动我的程序，现在也没有数据了。

有人知道这里出了什么问题吗？

再见

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-14T18:25:40.473

转到 Sql CE 数据库的属性并将**复制到输出**设置为**“如果较新”**

检查您运行程序的程序和添加的更新转到`$projectname$\bin\Debug`或`\Release`检查那里的数据库。

**这背后的原因：**

Normal 数据库文件的默认属性将 Build Action 设置为“Content”，将 Copy To Output 选项设置为“Copy Always”。然后每次构建时，Visual Studio 项目中的数据库都会复制到构建或发布文件夹中，并使用运行时添加的数据覆盖现有数据库。

# ajax - 如何选择多个按钮并动态显示这些过滤结果？

> ID：11038987
> 
> 赞同：0
> 
> 时间：2012-06-14T18:16:38.293
> 
> 标签：ajax, button, dynamic, expressionengine, categories

我有 9 个不同的类别，我想选择它们（通过单击或取消单击按钮）并在我选择要过滤的内容时显示结果。我将其设置为具有 3 个不同的行，并且只选择了 3 个类别。

我怎么能在 EE 中做到这一点！？使用 AJAX？查询？我该如何开始？

我查看了 Isotope，但我不确定 EE 是否有办法做到这一点，该方法与类别选择和显示结果相关，无需提交按钮。

我附上了一张我想要完成的图片。（浅灰色框代表选择的按钮）请帮助我！

![左边的框是我的按钮，右边的空间是显示内容的地方](../Images/6058973c6a187b2fb0d7bd6bf612e839.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-14T18:24:35.710

@Francheska 所以.. 我喜欢向你介绍[jsfiddle](http://jsfiddle.net/)，如果你设置一个演示、代码或其他东西来开始，我会很棒的！无论如何，请尝试检查[此](http://delicious.com/desandro/re%3aisotope+fiddle)链接。那里有很多自定义示例。

祝你好运！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-25T12:54:22.717

这是一个基于 jQuery 的解决方案，但请记住，这仅适用于 javascript。正如您在评论中提到的，请查看 LowSeg2Cat 为禁用 JS 的用户执行此操作的方法。

EE 代码如下所示：

```
{!-- List all of your categories --}

{exp:channel:categories channel="stuff" style="linear"}
{if count == "1"}<ul id="categories">{/if}
    <li><a href="#" data-category="{category_url_title}">{category_name}</a></li>
{if count == total_results}</ul>{/if}
{/exp:channel:categories}

{!-- List all of your entries --}

{exp:channel:entries channel="stuff" limit="1000"}
{if count == "1"}<ul id="entries">{/if}
    <li data-categories="{categories backspace="1"}{category_url_title} {/categories}">{title}</li>
{if count == total_results}</ul>{/if}
{/exp:channel:entries} 
```

这是使它运行的javascript：

[http://jsfiddle.net/5WezD/4/](http://jsfiddle.net/5WezD/4/)

# java - Java调用层次分析

> ID：11038999
> 
> 赞同：0
> 
> 时间：2012-06-14T18:17:30.787
> 
> 标签：java, struts

有什么工具可以用来帮助我分析 Java 代码的调用层次结构吗？我本质上是在寻找一种方法来选择一种方法，生成层次结构，然后将层次结构路径的最高级别部分（所有根）序列化到磁盘，以便我可以获得一些统计信息并更好地了解风险如果要重构此代码，/testing 工作量。

我的最终目标是针对 Java Web 应用程序中的任何给定方法（无论它位于哪个层），找出给定方法使用的应用程序的所有入口点（Struts 操作、Web 服务）。Eclipse 有一个很好的工具，我一直使用它来构建调用层次结构，但是我正在分析的方法被大量使用，以至于我无法手动扩展树并手动输入所有内容。

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-04T18:53:00.053

看看[Cobertura](http://cobertura.sourceforge.net/)。它是一个监控测试覆盖率的工具，但它没有理由不能用于你需要的东西。报告（[示例报告](http://cobertura.sourceforge.net/sample/frame-summary.html)）非常全面，可让您深入查看哪些行已执行，现在执行了多少次。

一个类似的工具是[Emma](http://emma.sourceforge.net/index.html)，它比 Cobertura 更新得更晚。我从未使用过 Emma，所以我无法评论它的效果如何。[示例报告](http://emma.sourceforge.net/coverage_sample_a/index.html)看起来与 Cobertura 的类似。