# StackOverflow 问答 12480000-12480999

# css - CSS 大小转换以保持在父 div 内

> ID：12480002
> 
> 赞同：3
> 
> 时间：2012-09-18T15:19:20.913
> 
> 标签：css, size, css-transitions

我想要一个图像框架，当我将鼠标悬停在它上面时，里面的图像会放大一点（我正在使用大小转换），但框架将保持相同的大小。

现在会发生什么，即使框架具有固定的宽度和高度，它仍然会随图像一起缩放

HTML：

```
<div class="img-wrapper">
  <img class="thumbnail" src="http://placekitten.com/400/200">
</div> 
```

和 CSS

```
.img-wrapper {
  width: 400px;
}
.thumbnail {
  width: 400px;
}

.thumbnail {
  -webkit-transition: all 0.2s ease-out;
  -moz-transition: all 0.2s ease-out;
  transition: all 0.2s ease-out;
}

.thumbnail:hover {
  width: 500px;

  -webkit-transition: all 0.2s ease-out;
  -moz-transition: all 0.2s ease-out;
  transition: all 0.2s ease-out;
} 
```

[http://codepen.io/pen/KCJny](http://codepen.io/pen/KCJny)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-18T15:22:38.120

解决此问题的一种方法是设置溢出：隐藏；

所以，这可能有效：

```
.img-wrapper {
  width: 400px;
  height:200px;
  overflow:hidden;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-18T15:59:47.677

如果您希望图像保持居中（作为 Brian 答案的补充），您可以这样做：

```
.thumbnail {
  width: 400px;
  position:relative;
  left:50%;
  margin-left:-200px;
}

.thumbnail:hover {
  width: 500px;
  margin-left:-250px;
  -webkit-transition: all 0.2s ease-out;
  -moz-transition: all 0.2s ease-out;
  transition: all 0.2s ease-out;
} 
```

# c - C 新手...在未完成的函数声明中获得“UArray2.h:19: error: expected ')' before '*' token”

> ID：12480004
> 
> 赞同：0
> 
> 时间：2012-09-18T15:19:26.093
> 
> 标签：c, struct

我正在为学校做一个 CS 项目，但我似乎遇到了这个非常无用的奇怪错误。我和我的搭档似乎无法弄清楚。

它在第一个函数声明我的 .h 文件（ UArray2_new)。

紧随其后的是在函数声明的每一行上重复的“错误：预期的 ')' 之前的 '*' 标记”。有任何想法吗？我在我的里面包含了一个空白的 main，所以你可以看到它不可能是一个编译问题。我使用“gcc -Wall -Wextra -Werror UArray2.c”进行编译。

```
//UArray2.h                                                                  
#include <stdlib.h>
#include <stdio.h>

#ifndef UARRAY2_INCLUDED
#define UARRAY2_INCLUDED

struct UArray2_T{
    int width, height;                                                     
};   

extern UArray2_T * UArray2_new(int height, int width, int size);
extern void UArray2_free(UArray2_T * uarray2);                                                                
extern void * UArray2_at(UArray2_T * uarray2, int column, int row);
extern int UArray2_size(UArray2_T * uarray2);
extern int UArray2_columns(UArray2_T * uarray2);
extern int UArray2_rows(UArray2_T * uarray2);
static int UArray2_index(UArray2_T * uarray2, int col, int row);

#endif 
```

这是.c文件

```
//UArray.c                                                                          
#include <stdlib.h>
#include <stdio.h>
#include "UArray2.h"                                                             

int main()
{

     return 0;
}

UArray2_T * UArray2_new(int height, int width, int size)
{
    T newArray=malloc(sizeof(UArray2_T));
    newArray->height=height;
    newArray->width=width;
    (void) size;                            
    return newArray;
}

void UArray2_free(UArray2_T * uarray2)
{
    (void) uarray2;
    //need to write                                                                 

}

void * UArray2_at(UArray2_T * uarray2, int column, int row)
{

    (void) uarray2;
    int index=UArray2_index(uarray2, column, row);
    (void) index;
    //if(index>0 && index<=column*row)                                              
    //return UArray_at(uarray2->UArray, index);                                     
    //else                                                                          
    //throw an error                                                                
    char * k="hi"; //dummy variables
    return k;
}

int UArray2_size(UArray2_T * uarray2)
{
    //UArray_size(uarray2->UArray);                                                 
    return 0;
}
int UArray2_columns(UArray2_T * uarray2){
    return uarray2->width;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-18T15:21:22.397

在任何地方`UArray2_T *`，您都应该将其替换为`struct UArray2_T *`. 这`struct`您引用类型时，关键字是必需的`C`（但*不是*in ）。`C++``struct`

避免这种情况的标准方法是使用`typedef`，例如：

```
typedef struct {
    int width, height;                                                     
} UArray2_T; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-18T15:21:03.617

在 C 中，saying`struct Foo`并*没有*引入一个新的类型叫做`Foo`. 该类型称为`struct Foo`.

您可以为类型名称创建别名，如下所示：

```
typedef struct UArray2_T UArray2_T; 
```

这样做应该可以解决您的错误。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-18T15:25:11.990

我会将结构移动到 .c 文件中。这将隐藏结构的内部结构。

```
struct UArray2_T { // move to the .c file
    int width, height;                                                     
}; 
```

向 .h 文件添加前向声明，如下所示：

```
struct UArray2_T; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-18T15:25:32.833

您需要 typedef 您的结构，或在任何地方使用 struct 关键字。我喜欢这种风格：

```
typedef struct {
    int data1;
    char data2;
} newtype; 
```

# javascript - javascript onclick撇号引号问题

> ID：12480006
> 
> 赞同：1
> 
> 时间：2012-09-18T15:19:28.570
> 
> 标签：javascript, html, syntax

好的，我从 ajax 调用中获取了一些数据，需要通过 javascript 将值作为参数存储到 onclick 元素中。

例如

```
output = "<a href = '#' onclick = 'deleteFileName('" + trim(splitString[i]) + "')'> delete File </a>"; 
```

这表现得很奇怪。当我用 chrome 检查元素时，输出如下所示

```
<a href="#" onclick="deleteFileName("0design mockup.xlsx')'> delete File </a> 
```

它显然应该是这样的

```
<a href = "#" onclick = "deleteFileName('0design mockup.xlsx')"> 
```

该参数是一个字符串，所以我需要它周围的引号。这可能不是最好的方法，但为什么要让前两个引号成为双引号，然后是最后两个单引号？

*这是一个使用 ajax 调用来收集信息的 JSP 服务器。函数“deleteFileName(fileNameIn)”是一个 ajax 调用。（我不相信这是必要的信息，但你永远不知道）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-18T15:28:46.487

您不能对 onclick 的值和函数调用使用相同类型的引号。一个需要单引号，另一个需要双引号（放在哪里不重要）。否则，您将使用函数调用的第一个单引号关闭 onclick 属性。

例子：

```
output = "<a href = '#' onclick = 'deleteFileName(\"" + trim(splitString[i]) + "\")'> delete File </a>"; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-18T15:22:37.793

与其查看信息，我建议您直接 wget 或 curl 页面（或使用浏览器的查看源代码功能）。这些天来，我发现许多浏览器会在检查器中巧妙地错误地显示信息，以试图很好地格式化所有内容。

从等式中删除浏览器是一个很好的第一步，因为这将准确地告诉您问题发生在哪里。

# c# - 有序的不同

> ID：12480010
> 
> 赞同：3
> 
> 时间：2012-09-18T15:19:53.030
> 
> 标签：c#, linq, sql-order-by, distinct

我有以下

```
IList<Project> projects = (from update in dbContext.TicketUpdates
               where update.TicketUpdatesEmployeeID == Profile.EmployeeID
               orderby update.TicketUpdatesEndDate descending
               select update.Ticket.Project).Distinct().ToList(); 
```

我知道这`Distinct()`不能保证订单，但我不能在之后重新排序，因为投影丢失了我用来订购的字段。我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-18T15:37:08.717

**使用 GroupBy**
*更新的新解决方案：* 实际上有一个更简单的解决方案：

```
IList<Project> projects = (from update in dbContext.TicketUpdates where update.TicketUpdatesEmployeeID == Profile.EmployeeID)
    .GroupBy(tu=>tu.Ticket.Project)
    .Select(group=>group.First())
    .OrderByDescending(tu=>tu.TicketUpdatesEndDate)
    .Select(tu=>tu.Ticket.Project)
    .ToList(); 
```

（我刚刚看到，在我写这篇文章的时候，其他人也发布了类似的答案）

* * *

**使用自定义 IEqualityComparer 的旧解决方案**（我不确定这是否适用于 linq2sql）

有一个[采用自定义 IEqualityComparer 的 Distinct 重载](http://msdn.microsoft.com/en-us/library/bb338049.aspx)。*因此，在*投影数据之前，请使用自定义 IEqualityComparer 对 TicketUpdates 进行 Distinct 。

IEqualityComparer 应该将所有 TicketUpdates 视为相等，如果它们具有相同的项目。这样，具有相同项目的 TicketUpdates 将被丢弃。

（请注意，您无法控制将丢弃*哪些*具有相同项目的 TicketUpdates。因此，如果具有相同项目的这些 TicketUpdates 具有不同的 EndDates，则您需要一个涉及 GroupBy 的解决方案。

```
IList<Project> projects = (from update in dbContext.TicketUpdates where update.TicketUpdatesEmployeeID == Profile.EmployeeID)
    .Distinct(new ProjectComparer())
    .OrderByDescending(tu=>tu.TicketUpdatesEndDate)
    .Select(tu=>tu.Ticket.Project)
    .ToList();

// Your comparer should look somewhat like this 
// (untested code! And I do not know all the details about your class structure)
class ProjectComparer : IEqualityComparer<TicketUpdates>
{
    // Products are equal if their names and product numbers are equal. 
    public bool Equals(TicketUpdates x, TicketUpdates y)
    {

        //Check whether the compared objects reference the same data. 
        if (Object.ReferenceEquals(x, y)) return true;

        //Check whether any of the compared objects is null. 
        if (Object.ReferenceEquals(x, null) || Object.ReferenceEquals(y, null))
            return false;

        //Check whether projects are equal. 
        //(perhaps do a null check for Ticket!)
        return x.Ticket.Project== y.Ticket.Project;
    }

    // If Equals() returns true for a pair of objects  
    // then GetHashCode() must return the same value for these objects. 

    public int GetHashCode(TicketUpdates x)
    {
        //Check whether the object is null 
        if (Object.ReferenceEquals(x, null)) return 0;

        // null check for Ticket and Project?
        return x.Ticket.Project.GetHashCode();
    }

} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-18T15:37:44.433

我认为您最好的选择是发布流程以保留订单：

```
var projects = (from update in dbContext.TicketUpdates
           where update.TicketUpdatesEmployeeID == Profile.EmployeeID
           orderby update.TicketUpdatesEndDate descending
           select update.Ticket.Project);
var seen = new HashSet<Project>();
foreach (var project in projects)
{
    if (seen.Add(project))
    {
        // A distinct project
    }
} 
```

或者你可以*滥用* `GroupBy`：

```
var projects = dbContext.TicketUpdates
    .Where(uu => uu.TicketUpdatesEmployeeID == Profile.EmployeeID)
    .GroupBy(uu => uu.Ticket.Project)
    .OrderByDescending(gg => gg.Max(uu => uu.TicketUpdatesEndDate))
    .Select(gg => gg.Key); 
```

通过使用`GroupBy`跨`uu.Ticket.Project`每个更新将按其关联的项目进行分组。如果您有 10 个项目和 30 个更新分布在其中，那么在该阶段的输出中您将有 10 个组（每个项目一个）。接下来，我们按组的最新结束日期对组进行排序，这会保留您要查找的降序。最后，我们从每个`IGrouping`项目中选择密钥。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-18T15:47:11.437

您可以使用 GroupBy 运算符获取唯一记录，然后对新记录集进行排序。

```
var projectList = dbContext.TicketUpdates.GroupBy(p => p.TicketUpdatesEmployeeId)
                    .Where( r => r.TicketUpdatesEmployeeId == Profile.EmployeeId)
                    .Select(r => r.First())
                    .OrderByDesc(q => q.TicketUpdatesEndDate)
                    .Select(n => n.First()).Ticket.Project; 
```

# macos - D 编译器 DMD 不链接目标文件

> ID：12480014
> 
> 赞同：2
> 
> 时间：2012-09-18T15:19:56.533
> 
> 标签：macos, compiler-construction, linker, d, dmd

我有一个名为“dprogram.d”的 d 源文件，并在 mac osx 的终端中使用命令 $ dmd dprogram.d 创建可执行文件。根据官方文档，编译器将自动编译源代码并链接 .o 目标文件（http://dlang.org/dmd-linux.html#linking），但似乎没有这样做。

编译器将创建一个 .o 文件，但不是可执行文件，我从终端得到的唯一反馈是一条消息：“gcc：没有这样的文件或目录”，就好像 gcc 试图链接目标文件但找不到它一样。

在 mac osx 上使用 dmd（数字火星 D）编译器编译 .d 源的正确方法是什么？

（编辑：在 Windows 上它确实可以工作，它会自动创建 .exe，但在 mac osx 上它不会）

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-18T16:16:02.260

听起来 gcc 要么没有正确安装，要么你的 PATH 中缺少。dmd 使用 gcc 在底层进行链接，所以如果它不存在，那么链接将不起作用。如果你解决了这个问题，那么 dmd 应该将链接作为构建的一部分。

# .net - MVC 中的客户端证书颁发者（指纹）

> ID：12480015
> 
> 赞同：4
> 
> 时间：2012-09-18T15:19:57.750
> 
> 标签：.net, asp.net-mvc-3, ssl-certificate

在 MVC 应用程序中，我需要验证客户端证书是否由特定 CA 签名/颁发。

我知道如何获取`Request.ClientCertificate`和`X509Certificate2`从中获取，但我不知道如何检查发行人。
`Request.ClientCertificate.Issuer`给出了 Issuer 的主题，但我认为这还不够安全。

我希望能够检查颁发者指纹，那么如何从客户端证书中检索它？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-17T15:48:08.517

```
// get the X509 from HTTP client certificate
var x509 = new X509Certificate2(this.Request.ClientCertificate.Certificate);

// create the certificate chain by using the machine store
var chain = new X509Chain(true);
chain.ChainPolicy.RevocationMode = X509RevocationMode.Offline;
chain.Build(x509);

// at this point chain.ChainElements[0] will contain the original
// certificate, the higher indexes are the issuers.
// note that if the certificate is self-signed, there will be just one entry.
var issuer = chain.ChainElements[1].Certificate.Thumbprint; 
```

# xml - 包括 XML 文档的要点

> ID：12480018
> 
> 赞同：1
> 
> 时间：2012-09-18T15:20:23.823
> 
> 标签：xml, xslt, points

我有一个 XML 文档，一个标签的描述很长，所以我想用几个要点格式化它

例如，

```
<description>This course is an introduction to the information technologies required for secure, practical information systems for electronic commerce.
Topics will be chosen from areas such as document representation (XML, DTDs, XML Schema, XSLT, CSS), security (encryption, public key, symmetric key, 
PKI, authentication); kinds of attack and vulnerabilities, electronic trading (spontaneous, deliberative, auctions), electronic document management 
(metadata, search, digital libraries, management and processing), recent developments and maturation of the area, 
such as web application frameworks, web services, the semantic web , mobile commerce</description> 
```

我希望这是一些类似的东西

*   本课程介绍安全、实用的电子商务信息系统所需的信息技术。
*   主题将从文档表示
    （XML、DTD、XML Schema、XSLT、CSS）、安全性（加密、公钥、对称密钥、PKI、身份验证）等领域中选择；各种攻击和
    漏洞、电子交易（自发、慎重、
    拍卖），
*   电子文档管理（元数据、搜索、数字图书馆、管理和处理）、该领域的最新发展和成熟，例如网络应用程序框架、网络服务、语义网络、移动商务

为此，我相信我应该更改我的 XSL 文件中的某些内容，即

```
<xsl:template match="/">
    <html>
    <head>
        <title> Course Catalogue </title>
    </head>
    <body bgcolor="#FF9999">
        <xsl:for-each select="xsi:catalogue/xsi:course">
            <br />
            <xsl:apply-templates select="xsi:title" />
            <br />
            <xsl:apply-templates select="xsi:year" />
            <br />
            <xsl:apply-templates select="xsi:science" />
            <br />
            <xsl:apply-templates select="xsi:area" />
            <br />
            <xsl:apply-templates select="xsi:subject" />
            <br />
            <xsl:apply-templates select="xsi:unit" />
            <br />
            <xsl:apply-templates select="xsi:description" />
            <br />
            <xsl:apply-templates select="xsi:outcomes" />
            <br />
            <xsl:apply-templates select="xsi:incompatibility" />
        </xsl:for-each>
    </body>
    </html>
</xsl:template> 
```

对于 xsi:description，

```
<!-- The template for course description --> 
<xsl:template match="xsi:description">
    <div style="font-family:times;font-size:16">
        <span style="color:#000"> 
            Course Description: 
        </span> 
        <xsl:value-of select="." />
    </div>
</xsl:template> 
```

我应该如何包括要点？谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-20T16:45:59.120

您将不得不决定分隔符以将您的描述拆分为项目符号。这是一个使用句点和分号作为分隔符的示例：

### 模板：

```
<xsl:template match="xsi:description">
    <div style="font-family:times;font-size:16">
        <span style="color:#000">Course Description:</span> 
        <ul>
            <xsl:analyze-string select="string()" regex=".*?[\.;]" flags="sm">
                <xsl:matching-substring>
                    <li><xsl:value-of select="."/></li>
                </xsl:matching-substring>
                <xsl:non-matching-substring>
                    <li><xsl:value-of select="."/></li>
                </xsl:non-matching-substring>
            </xsl:analyze-string>
        </ul>            
    </div>
</xsl:template> 
```

### 输出：

```
<div style="font-family:times;font-size:16">
    <span style="color:#000">Course Description:</span>
    <ul>
        <li>This course is an introduction to the information technologies required for secure, practical information systems for electronic commerce.</li>
        <li>Topics will be chosen from areas such as document representation (XML, DTDs, XML Schema, XSLT, CSS), security (encryption, public key, symmetric key, PKI, authentication);</li>
        <li> kinds of attack and vulnerabilities, electronic trading (spontaneous, deliberative, auctions), electronic document management (metadata, search, digital libraries, management and processing), recent developments and maturation of the area, such as web application frameworks, web services, the semantic web , mobile commerce</li>
    </ul>
</div> 
```

`.*?[\.;]`如果您想使用不同的规则来分解段落，您可以将正则表达式值更改为其他值。

# mercurial - 优化 Mercurial 存储库大小

> ID：12480025
> 
> 赞同：4
> 
> 时间：2012-09-18T15:20:41.743
> 
> 标签：mercurial

如何优化 Mercurial 存储库以使旧版本占用最少的空间？

我知道 Mercurial 已经对现有的提交进行了分组和压缩。但是，有没有办法强制手动运行此操作，以便尽可能多地节省空间，而不考虑速度？是否可以在一个流中打包尽可能多的存储库，更改压缩算法——任何更好地压缩旧变更集的方法？

我现在没有很多大型存储库，但我确实有一些中型到大型的存储库，它们可以在早期历史中使用一些收缩。

* * *

`git gc [--aggressive]`对于非 git 专家来说，Git 似乎有一些神奇的功能，可以减少杂乱无章并压缩存储库。它`git repack`也[似乎也在](http://metalinguist.wordpress.com/2007/12/06/the-woes-of-git-gc-aggressive-and-how-git-deltas-work/)做同样的事情，尽管有一些额外的专家选项。至少在我看来是这样的：变更集可以以不同的方式“打包”。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-18T18:52:27.220

您是否尝试过使用mercurial/contrib 目录中的[shrink-revlog.py扩展名？](https://bitbucket.org/mirror/mercurial/src/tip/contrib/shrink-revlog.py)在非常多分支的存储库上，它可能会显着减少清单的大小（OTOH，它对我从颠覆转换的回购中的近 1GB 清单的影响为零）。

# ios - 如何使用 Annots 创建 PDF？

> ID：12480026
> 
> 赞同：5
> 
> 时间：2012-09-18T15:20:40.550
> 
> 标签：ios, annotations, pdf-generation, core-graphics, podofo

我正在尝试在具有注释（例如小部件和链接）的代码中生成 PDF。我可以生成 PDF 并修改页面的文档信息和 MediaBox，但我不知道如何添加到注释中。我尝试将其添加到页面字典中，但由于某种原因 PDF 不接受它。

有谁知道如何在新创建的 PDF 中添加注释？下面是我必须生成 PDF 的代码和我试图添加到其中的测试注释字典：

```
-(void) createPDFFile: (CGPDFPageRef) pageRef{

CGContextRef pdfContext;

CFStringRef path;

CFURLRef url;

CFMutableDictionaryRef myDictionary = NULL;

 NSArray *paths = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES); 
 NSString *documentsDirectory = [paths objectAtIndex:0]; // Get documents folder
 const char *filepath = [[documentsDirectory stringByAppendingString:@"/fileTest.pdf"] UTF8String];

path = CFStringCreateWithCString (NULL, filepath, kCFStringEncodingUTF8);

url = CFURLCreateWithFileSystemPath (NULL, path,  kCFURLPOSIXPathStyle, 0);

CFRelease (path);

myDictionary = CFDictionaryCreateMutable(NULL, 0,

                                         &kCFTypeDictionaryKeyCallBacks,

                                         &kCFTypeDictionaryValueCallBacks); 

CFDictionarySetValue(myDictionary, kCGPDFContextTitle, CFSTR("My PDF File"));

CFDictionarySetValue(myDictionary, kCGPDFContextCreator, CFSTR("My Name"));

CGRect pageRect = self.bounds;
pdfContext = CGPDFContextCreateWithURL (url, &pageRect, myDictionary); // 5

CFRelease(myDictionary);

CFRelease(url);

CGRect mediaBox;
mediaBox = CGRectMake (0, 0, pageRect.size.width, 100);
CFStringRef myKeys[1];

CFTypeRef myValues[1];

myKeys[0] = CFSTR("MediaBox");

myValues[0] = (CFTypeRef) CFDataCreate(NULL,(const UInt8 *)&mediaBox, sizeof (CGRect));

CFDictionaryRef pageDictionary = CFDictionaryCreate(NULL, (const void **) myKeys,
                                                    (const void **) myValues, 1,
                                                    &kCFTypeDictionaryKeyCallBacks,
                                                    & kCFTypeDictionaryValueCallBacks);
CFMutableDictionaryRef pageDictionaryMutable = CFDictionaryCreateMutableCopy(NULL, 0, pageDictionary);

CFMutableDictionaryRef  metaDataDictionary = CFDictionaryCreateMutable(NULL, 0, &kCFTypeDictionaryKeyCallBacks,&kCFTypeDictionaryValueCallBacks); 

CFDictionarySetValue(metaDataDictionary, CFSTR("DA"), CFSTR("/Helvetica 10 Tf 0 g"));
CFDictionarySetValue(metaDataDictionary, CFSTR("F"), CFSTR("4"));
CFDictionarySetValue(metaDataDictionary, CFSTR("FT"), CFSTR("Tx"));
CFDictionarySetValue(metaDataDictionary, CFSTR("Subtype"), CFSTR("Widget"));
CFDictionarySetValue(metaDataDictionary, CFSTR("T"), CFSTR("undefined"));
CFDictionarySetValue(metaDataDictionary, CFSTR("Type"), CFSTR("Annot"));
CFDictionarySetValue(metaDataDictionary, CFSTR("V"), CFSTR(""));
CFMutableArrayRef array = CFArrayCreateMutable(kCFAllocatorDefault,0, &kCFTypeArrayCallBacks);
CFArrayInsertValueAtIndex(array, 0, metaDataDictionary);

CFDictionarySetValue(pageDictionaryMutable, CFSTR("Annots"), array);

CGPDFContextBeginPage (pdfContext, pageDictionaryMutable);

CGPDFContextEndPage (pdfContext);

CGContextRelease (pdfContext);

CFRelease(pageDictionary);} 
```

打印出 CFMutableDictionary pageDictionaryMutable 表明 Annots 字典应该添加到 PDF 以及 MediaBox：

```
(gdb) po pageDictionaryMutable
{
    Annots =     (
                {
            DA = "/Helvetica 10 Tf 0 g";
            F = 4;
            FT = Tx;
            Subtype = Widget;
            T = undefined;
            Type = Annot;
            V = "";
        }
    );
    MediaBox = <00000000 00000000 00008044 0000c842>;
} 
```

Media Box 需要，但 Annots 不需要。请帮助任何人！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-24T21:18:23.680

看看 PoDoFo 库：[http ://podofo.sourceforge.net](http://podofo.sourceforge.net)

PoDoFo 在 GPL 和 LGPL 下获得部分许可。

有了它，您可以修改 pdf 文件并为其添加注释。它可以移植到 iOS。查看文档，如果它可以处理您想要的内容并了解它是如何工作的。

如果您有兴趣，还可以查看[GitHub 上的这个示例项目](https://github.com/xil3f/podofo_iOS_sample)。在那里，我将库集成到了一个 iOS 项目中，您可以使用 iPad 添加 FreeText 和 Square Annotations。

# c# - C#，可为空的十进制

> ID：12480029
> 
> 赞同：3
> 
> 时间：2012-09-18T15:20:44.833
> 
> 标签：c#, asp.net

在我的数据库中，v1 字段是可为空的字段。但如果值为空，我定义 0 （默认）。

```
public decimal? v1 {
  get {
    return this._v1; 
  }
  set {
    this._v1 = value ?? 0M;
  }
} 
```

所以现在， v1 不再是可为空的变量。

但我不能这样做，

```
decimal v2 = v1; 
```

**错误消息说，不能隐式转换类型“十进制？” 为“十进制”。**

在这种情况下，我是否必须像这样转换为十进制？

```
decimal v2 = Convert.ToDecimal(v1); 
```

这是非常烦人的工作。代码看起来也很脏。

有人知道更好的解决方案吗？请给我建议。

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-09-18T15:22:03.797

不，您不必转换`decimal?`，您可以从类型访问基础值，`Nullable`例如

```
decimal v2 = v1.Value; 
```

为类型分配默认值`Nullable`并不使其不可为空，它只是意味着它有一个值。可空类型有一个`HasValue`属性可以帮助您确定这一点。

只是为了记录，我不建议将值默认为`0`它可能更有意义，让它默认`null`考虑它确实*可以*为空。如果您需要在您的应用程序中有一个默认值，您可能需要使用该`GetValueOrDefault`方法，例如

```
decimal v2 = v1.GetValueOrDefault(0m); 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-09-18T15:24:52.813

`decimal?`将 a 转换为`decimal`但值为`0`when的最简单方法`null`，您可以执行以下操作：

```
decimal? a = null;
decimal b = a.GetValueOrDefault(0m); // will contain 0 when null, otherwise the value 
```

阅读[GetValueOrDefault](http://msdn.microsoft.com/en-us/library/72cec0e0%28v=vs.90%29.aspx)

您也可以`GetValueOrDefault`不带参数调用，这将产生`default(T)`，在 Decimal 的情况下为 0，但我喜欢明确。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-09-18T15:59:13.517

我很好奇您为什么要将您的应用程序代码变量定义为可为空，但如果它为空则将其设置为 0。如果将空值从数据库传递到您的应用程序变量，是否只是为了避免异常？如果您的应用程序并不绝对需要可为空的十进制变量，只需在读取它时检查它是否存在 DbNull：

```
decimal myAppVal = rdr["DbColumn"] == DBNull.Value 
   ? default(decimal) 
   : (decimal) rdr["DbColumn"]; 
```

或显式设置 0.0M 而不是使用默认值（十进制）

设计方面，如果您发现自己经常这样做，那么我建议创建一个通用扩展方法来从数据库中读取值。通过这种方式，您可以确保避免无效转换并处理异常，但更重要的是，在出现空值的情况下返回默认值。;)

类似的东西（我只是在这里吐口水）：

```
public static T CastFromDbTo<T>(object readerObject)
{
    T returnVal = default(T);
    if (readerObject is T)
    {
        var myValue = (T) readerObject;
        returnVal = readerObject != DbNull.Value && myValue != null
                ? (T) readerObject 
                : default(T);
    }
    return returnVal;
} 
```

然后你可以像这样抓住你的价值：

```
var myAppValue = HelperClass.CastFromDbTo<decimal>(rdr["DbColumn"]); 
```

或实际进行扩展：

```
public static T CastFromDbTo<T>(this object readerObject)
{
    T returnVal = default(T);
    if (readerObject is T)
    {
        var myValue = (T) readerObject;
        returnVal = readerObject != DbNull.Value && myValue != null
                ? (T) readerObject 
                : default(T);
    }
    return returnVal;
} 
```

那么你可以这样做：

```
var myAppVal = rdr["DbColumn"].CastFromDbTo<decimal>(); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-18T15:22:37.513

您分配给 v1 的值是`decimal`，但类型仍然是`decimal?`。这就是为什么你不能评估它。

尝试

```
decimal v2 = v1.Value; 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-09-18T15:23:32.863

可空类型具有属性`Value`和`HasValue`。

> **HasValue** - 获取一个值，该值指示当前 Nullable 对象是否有值。
> 
> **Value** - 如果 HasValue 为 true，则如果不是 null，则它包含该值。

```
decimal v2;

if (v1.HasValue) // check for null
{
  v2 = v1.Value;
} 
```

查看[MSDN - Nullable 类型（C# 编程指南）](http://msdn.microsoft.com/en-us/library/1t3y8s4s.aspx)

# vb.net - vb.net - 多个数据绑定下拉框中的不同值？

> ID：12480031
> 
> 赞同：1
> 
> 时间：2012-09-18T15:20:50.463
> 
> 标签：vb.net, frameworks, entity

我才刚刚开始在 VS2010 中使用实体框架，所以很抱歉如此基础。我确定这个问题之前已经在这里提出过，但我无法将答案解码为我正在寻找的内容。

我有 4 个下拉框，都绑定到同一个源（表位置）

```
cmbBin is bound to Locations and displays Locations.Bin
cmbRoom is bound to Locations and displays Locations.Room
cmbBuilding is is bound to Locations and displays Locations.Building
cmbSite is bound to Locations and displays Locations.Site 
```

由于一个垃圾箱可以在> 1 个房间中，并且该房间名称可能在> 1 个建筑物中，依此类推，我试图按如下方式显示结果

**所有**箱子都显示在第一个组合/下拉框中。在此 bin 出现的任何房间、建筑物和站点中，填充剩余的下拉列表**而不重复**（即房间“1A”中可能有 1000 个项目，我只希望“1A”显示一次而不是一千次）。

这肯定是显而易见的，但我就是想不通。有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-19T15:03:27.803

解决了。放弃数据绑定并进行手动绑定（当第一个保管箱发生更改时更改其他保管箱）并在最后拍打 .Distinct 。

# r - 在 R 中使用 lm() 进行一系列独立拟合

> ID：12480034
> 
> 赞同：1
> 
> 时间：2012-09-18T15:21:07.720
> 
> 标签：r, lm

我想`lm()`在 R 中使用来拟合一系列（实际上是 93 个）单独的线性回归。根据 R`lm()`帮助手册：

*“如果响应是矩阵，则线性模型通过最小二乘法分别拟合到矩阵的每一列。”*

只要 Y 响应矩阵中没有丢失的数据点，此方法就可以正常工作。当存在缺失点时，不是用可用数据拟合每个回归，而是丢弃在任何列中具有缺失数据点的每一行。有没有办法指定`lm()`应该独立地适合 Y 中的所有列，而不是丢弃单个列缺少数据点的行？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-18T16:49:44.850

如果您希望在 and 之间进行回归`n`，则不要指定 with而是应该使用 R 的[apply 函数](https://stackoverflow.com/questions/3505701/r-grouping-functions-sapply-vs-lapply-vs-apply-vs-tapply-vs-by-vs-aggrega)：`Y1, Y2, ..., Yn``X``lm()`

```
# create the response matrix and set some random values to NA
values <- runif(50)
values[sample(1:length(values), 10)] <- NA
Y <- data.frame(matrix(values, ncol=5))
colnames(Y) <- paste0("Y", 1:5)
# single regression term
X <- runif(10)

# create regression between each column in Y and X
lms <- lapply(colnames(Y), function(y) {
  form <- paste0(y, " ~ X")
  lm(form, data=Y)
})

# lms is a list of lm objects, can access them via [[]] operator
# or work with it using apply functions once again
sapply(lms, function(x) {
  summary(x)$adj.r.squared
})
#[1] -0.06350560 -0.14319796  0.36319518 -0.16393125  0.04843368 
```

# jquery - 只有一个带有 JQuery 范围滑块的句柄

> ID：12480035
> 
> 赞同：0
> 
> 时间：2012-09-18T15:21:11.057
> 
> 标签：jquery, html, css, jquery-ui, coffeescript

我尝试使用 jQuery Slider 在我的网站上实现一个滑块。“正常”滑块工作正常，但在范围滑块处缺少最大手柄。

的HTML：

```
<dd id="search-diameter">
              <div class="variable-range">
                <span class="lower">7.5</span>
                <span class="upper">11.0</span>
                mm
                <div id="slider-diameter" class="slider"></div>
              </div>
    </dd> 
```

CSS：

```
.slider {
margin-left: 0.6em;
margin-right: 0.6em;
}

.ui-slider.ui-slider-horizontal .ui-slider-handle {
background: url("sliders.png") no-repeat scroll center top transparent;
border: medium none;
cursor: pointer;
height: 20px;
margin: 0 0 3px -8px;
outline: medium none !important;
top: -6px;
width: 20px;
} 
```

和 CoffeeScript：

```
$('#slider-diameter').slider
min: 7.5
max: 11.0
range: true
step: 0.1
value: [7.5, 11.0]
slide: (event, ui) ->
  $("#search-diameter .lower").text ui.values[0]
  $("#search-diameter .upper").text ui.values[1] 
```

之后它看起来： ![在此处输入图像描述](../Images/77ae5e7b338e5a4c7147d847769374bc.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-18T17:13:27.503

如果要为范围滑块提供两个值，则需要使用`values`not 。`value`来自[精美手册](http://docs.jquery.com/UI/Slider#option-value)：

> **数值**编号
> 
> 如果只有一个手柄，则确定滑块的值。如果有多个句柄，则确定第一个句柄的值。

还有：[_](http://docs.jquery.com/UI/Slider#option-values)

> **值**数组
> 
> 此选项可用于指定多个句柄。如果 range 设置为 true，则“values”的长度应为 2。

问题是您使用`value`的是数组，但它需要一个数字。你应该说：

```
values: [7.5, 11.0]
# ---^ 
```

例如：http: [//jsfiddle.net/ambiguous/PrHyV/](http://jsfiddle.net/ambiguous/PrHyV/)

# javascript - Kiosk web-app：请求失败后重新提交数据

> ID：12480037
> 
> 赞同：0
> 
> 时间：2012-09-18T15:21:19.047
> 
> 标签：javascript, ios, kiosk, zepto

我已经构建了一个在 iPad 上运行的网络应用程序，可以有效地用作信息亭。该应用程序收集姓名、地址和电子邮件等基本数据。然后将其发送到远程 MySQL 数据库。

如果 WiFi/3G 连接中断，我有什么办法可以保护这些条目？例如，失败的提交可以存储在数组或 localStorage 中，直到重新建立连接。

这听起来可行吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-23T11:32:55.443

我发现这是解决简单问题的一种过于复杂的方法。我现在将 JSON 字符串保存到 localStorage 并每隔*n*秒将这些字符串推送到实时服务器。检查`window.navigator.online`; 如果 AJAX 请求成功，则清除 localStorage 记录。

# jquery - MVC3 jQuery 从 TextBox Blur 更新模型

> ID：12480040
> 
> 赞同：0
> 
> 时间：2012-09-18T15:21:26.567
> 
> 标签：jquery, asp.net-mvc-3, razor

首先，让我说我对 MVC3 很陌生，所以我可能正在做一些不太正确的事情。我试图寻找答案，但我想我可能使用了错误的搜索词。

**问题：-* *我有一个表单，允许用户输入 From 值和 To 值。输入 From 值后，我想使用 jQuery 更新模型上的 StartTime 值。然后，我将继续填写表格，填写 To 和 Quantity，最后单击 OK 并将值发送回 Controller。

*当 From 文本框失去焦点时，如何更新模型上的 StartTime？*

```
public class DetailsModel
{
    public string From{get;set;}
    public string To {get;set;}
    public int Quantity{get;set;}
    public DateTime StartTime{get;set;}
} 
```

在我看来，有一些 jQuery 如下

```
<script type="text/javascript">
    $(function () {
        $('#From').blur(function () {
            alert('Work out how to set StartTime On Model here');
        });
    });
</script> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-18T15:29:48.787

简短的回答：你不能。一旦页面进入客户端，模型就消失了。它不存在。

更新模型的唯一方法是将值发布回服务器。

您可能想要做的是更改本地客户端上的值，使用隐藏字段来保存更新的值，一旦您最终将它们发布回服务器。然后，您在本地更新 StartTime 以反映这一点。

您对服务器和客户端的分离有一个根本的误解。该模型仅存在于服务器上，而不存在于客户端上。您想在客户端上进行更改，这很好..但您必须在本地跟踪这些更改，然后稍后再提交。

另一种方法是继续向服务器发布更新.. 但这是非常浪费的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-18T16:12:51.717

是的，首先，您可以使用javascript获取当前时间，无需去服务器。如果您真的想访问服务器，您可以使用 Ajax 并将值存储在隐藏字段中。

```
$(function () {

    $('#From').blur(function () {

        $.get('getTime', function(data){               
            $('#someHiddenField').val(data);
        });

    });

}); 
```

或者你可以非常疯狂并创建一个名为 startTime 的会话变量并在那里设置时间。然后，当您提交表单时，从那里获取值。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-18T16:19:18.390

```
 $('input[name=From]').change(function () {
        $('#StartTime').val(set_your_value_here);
    } 
```

我发现输入更改比模糊更有效。

# asp.net-mvc - ASP.NET MVC 按 DropDownList 中的选定项对列表进行排序

> ID：12480041
> 
> 赞同：0
> 
> 时间：2012-09-18T15:21:31.660
> 
> 标签：asp.net-mvc

我的数据库中有一个列表。在我的视图中，我有一个包含类别的 DropDownList。一个类别包含许多列表。

当我选择一个特定的类别时，我希望只显示那些选择了该类别的列表。

我主要担心的是如何生成 JQuery 以在我的 ListingController 中调用我的 SortListing 方法。

这是当前的 HTML (Razor)：

```
@Html.DropDownListFor(m => m.Categories, Model.Categories, "Select a Category") 
```

我的排序列表方法：

```
public List<Listing> SortListing(string categoryId)
{
    var listings = new List<Listing>();

    foreach (var listing in _service.ListAllEntities<Listing>())
    {
        if (listing.CategoryId == categoryId)
        {
            listings.Add(listing);
        }
    }

    return listings;
} 
```

**编辑**我有以下内容。将 categoryGuid 设为 null。

这是我的代码：

```
 $(function () {
        $('#SelectedCategoryGuid').change(function () {
            var url = $(this).data('url');
            var categoryId = $(this).val();
            $.ajax({
                url: url,
                type: 'GET',
                cache: false,
                data: { categoryId: categoryId },
                success: function (result) {
                    // TODO: manipulate the result returned from the controller action
                }
            });
        });
    });

</script>

<h2>Index</h2>
@Html.ActionLink("Create New Listing", "Create")
<br/>
<strong>Filter Listings</strong>
@Html.DropDownListFor(
    m => m.SelectedCategoryGuid, 
    Model.Categories, 
    "Select a Category", 
    new {
        id = "SelectedCategoryGuid",
        data_url = Url.Action("SortListing", "Listing") 
    }
) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-18T15:32:00.500

> 我主要担心的是如何生成 JQuery 以在我的 ListingController 中调用我的 SortListing 方法。

实际上，您还应该有其他担忧，我将在整个回答过程中尝试涵盖这些担忧。

`DropDownListFor`你的助手有问题。您在模型上使用了相同的属性来绑定选定的类别值和错误的类别列表。DropDownListFor 帮助器的第一个参数表示一个 lambda 表达式，指向视图模型上的原始类型属性：

```
@Html.DropDownListFor(
    m => m.CategoryId, 
    Model.Categories, 
    "Select a Category", 
    new { 
        id = "categoryDdl",
        data_url = Url.Action("SortListing", "Listing") 
    }
) 
```

然后订阅`.change()`事件并触发 AJAX 请求：

```
$(function() {
    $('#categoryDdl').change(function() {
        var url = $(this).data('url');
        var categoryId = $(this).val();
        $.ajax({
            url: url,
            type: 'GET', 
            cache: false,
            data: { categoryId: categoryId },
            success: function(result) {
                // TODO: manipulate the result returned from the controller action
            }
        });
    });
}); 
```

现在让我们看一下您的`SortListing`控制器操作，因为它存在问题。在 ASP.NET MVC 标准约定中规定控制器操作必须返回 ActionResults。在您的情况下，您似乎返回了一些`List<Listing>`. 所以你必须决定的第一件事是你想使用的格式。一种可能性是将这些列表作为 JSON 格式的值返回：

```
public ActionResult SortListing(string categoryId)
{
    var listings = _service
        .ListAllEntities<Listing>()
        .Where(x => x.CategoryId == categoryId)
        .ToList();

    return Json(listings, JsonRequestBehavior.AllowGet);
} 
```

在这种情况下，在您的 AJAX 成功回调中，您将收到此列表集合，并且您必须更新您的 DOM：

```
success: function(result) {
    // result represents an array of listings
    // so you could loop through them and generate some DOM elements
} 
```

另一种可能性是让您的控制器操作返回部分视图：

```
public ActionResult SortListing(string categoryId)
{
    var listings = _service
        .ListAllEntities<Listing>()
        .Where(x => x.CategoryId == categoryId)
        .ToList();

    return PartialView("Listings", listings);
} 
```

然后你就会有一个对应的局部视图：

```
@model List<Listing>
@foreach (var listing in Model)
{
    <div>@listing.SomeProperty</div>
} 
```

然后在成功回调中，您将刷新一些包含占位符：

```
success: function(result) {
    $('#SomeDivIdThatWrapsAroundTheListingsPartial').html(result);
} 
```

因此，回顾一下，您可以让控制器操作返回 JSON，然后使用 javascript 手动构建相应的 DOM 树，或者返回一个已包含相应标记的局部视图，并使用此局部刷新一些包含 div。

# java - JAXP、JDOM、DOM4J 和 XERCES 有什么区别？

> ID：12480046
> 
> 赞同：7
> 
> 时间：2012-09-18T15:21:54.037
> 
> 标签：java, xml, jdom, jaxp

它们有什么区别？都说JAXP只是一个API规范，JDOM和DOM4J都实现了，对吗？而且它们都需要一个 XML 解析器，就像 XERCES 一样，对吗？提前致谢！

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-09-18T17:08:00.020

[**JAXP (JSR-206)**](http://www.jcp.org/en/jsr/detail?id=206)

是一组用于 Java XML 解析器的标准 API。它涵盖以下领域：

*   DOM（`org.w3c.dom`包）
*   SAX（`org.xml.sax`包）
*   StAX/JSR-173 ( `java.xml.stream`)
*   XSLT ( `javax.xml.transform`)
*   XPath ( `javax.xml.xpath`)
*   验证 ( `javax.xml.validation`)
*   数据类型 ( `javax.xml.datatype`)

该标准是由来自许多公司和个人的代表组成的专家组制定的。作为标准，这意味着有多个实现（Xerces 实现 JAXP），并且可以包含在 JDK 中。

**施尔塞斯**

是一个开源 Java XML 解析器，提供符合 JAXP 标准的 DOM 和 SAX 实现。

**JDOM 和 DOM4J**

是开源 Java XML 解析器。

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2012-09-18T15:32:24.727

你在比较苹果和汽车。

*   JAXP 是现在与 JDK 捆绑在一起的 API
*   JDOM 是一个不同的 API，也是一个库
*   DOM4J 也是一个不同的 API 和库

*   XERCES 是一个用 Java 实现的 XML 解析器。XERCES 的一个版本也捆绑在 JDK 中。

您使用哪种 API 很大程度上取决于个人喜好。我喜欢 JDOM 部分是因为我习惯使用它。类似地，XML 解析器也有几种实现。如果您使用最新的 JDK 进行 Java 编程，您将能够使用 JAXP，而无需添加外部库。

# c# - 为标签数组元素创建 eventHandler

> ID：12480049
> 
> 赞同：2
> 
> 时间：2012-09-18T15:22:02.197
> 
> 标签：c#, label

我想知道我应该如何为标签数组中的每个数组元素分配一个 eventHandler。我知道不可能为每个事件处理程序创建一个方法，那么解决方案是什么？谢谢！

```
for(int i = 0, i < 10; i++)
{
    lbs[i] = new Label();
    lbs[i].Location = new System.Drawing.Point(76 + f, 164);
    lbs[i].Size = new System.Drawing.Size(49, 17);
    //able to perform this, but wont able to create a method for this
    lbs[i].Click += new System.EventHandler(lbs[i]_Click);
}

//can't do this, what is alternative?
public void lbs[i]_Click(object sender, EventArgs e)
{

} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-18T15:29:10.630

您的函数名称无效（您不能`[]`在函数名称中包含）尝试更改`lbs[i]_Click`为`lbs_Click`.

```
for(int i = 0; i < 10; i++)
{
    lbs[i] = new Label();
    lbs[i].Location = new System.Drawing.Point(76 + f, 164);
    lbs[i].Size = new System.Drawing.Size(49, 17);
    lbs[i].Name = "label" + i;

    //able to perform this, but wont able to create a method for this
    lbs[i].Click += new System.EventHandler(lbsi_Click);
}

public void lbsi_Click(object sender, EventArgs e)
{
    var label = sender as Label;
    if(label != null && label.Name == "label1"){
        //event was raised from label1
    }
} 
```

# grails - 如果我在 Grails 域中更新作为复合 id 一部分的列，model.save() 会起作用吗？

> ID：12480050
> 
> 赞同：1
> 
> 时间：2012-09-18T15:22:02.857
> 
> 标签：grails, dns, grails-orm

域有 4 列组成一个复合 ID：

```
id composite: ['exemptionTermCode', 'exemptionCode', 'exemptionClassification', 'exemptionPayType'] 
```

在控制器中，一个 REST 服务的丑陋模仿，我有这个代码：

```
else if (request.method == "PUT" && params.rowid) {
  def a = WaiverExemption.find("from WaiverExemption as e where e.exemptionRowId = ?", [params.rowid])
  if (params.exemptionPay) a.exemptionPayType = params.exemptionPay
  if (params.exemptionClassification) a.exemptionClassification = params.exemptionClassification
  if (params.exemptionCode) a.exemptionCode = params.exemptionCode
  if (params.exemptionPriority) a.exemptionPriority = parseLong(params.exemptionPriority)
  if (params.exemptionTempFlag) a.exemptionTempFlag = params.exemptionTempFlag
  a.exemptionUserId = session.licensePlate
  a.save(flush: true, failOnError: true) 
```

我在控制台上没有任何错误。我可以单步执行，并在监视窗口中查看模型对象，并且我看到正确的属性已更新。save() 完成后，我在 model.errors 中看到以下内容：

*grails.validation.ValidationErrors：0 个错误*

没有例外。不会使调试器崩溃。纳达。后续命令全部执行。但是，在 Oracle 方面，已更新的记录肯定仍未更新。我花了一段时间（直到昨天才知道 .errors）才走到这一步，我可以使用 gorm 方法进行插入和删除。我不明白为什么 save() 失败，我没有像过去那样遇到验证问题。我不会以不唯一 pk 的方式更新字段，如果我这样做了，我希望这会引发错误。

我在这里缺少什么吗？

我正在使用 rowid 来搜索记录，因为当我更新它时，我已经丢失了用于查找它的部分 pk。Rowid 设置为可更新的 false。

[编辑] 我也试过在保存后做 a.refresh() 。这失败了，它无法找到具有该键的记录（这是您所期望的，因为它实际上并没有运行更新查询。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-18T20:19:08.170

如果您更改作为复合 ID 一部分的字段，恐怕您将不得不删除旧实例并创建一个新实例。这就是我之前解决问题的方法。

# curl - Invalid token error with Paypal Invoice api when executed using cURL

> ID：12480052
> 
> 赞同：2
> 
> 时间：2012-09-18T15:22:06.317
> 
> 标签：curl, paypal, paypal-sandbox

I am getting an invalid token error when I try to execute the following:

```
curl -s --insecure -H "X-PAYPAL-SECURITY-USERID:<paypal sandbox user id>" -H "X-PAYPAL-SECURITY-PASSWORD:<paypal sandbox password>" -H "X-PAYPAL-SECURITY-SIGNATURE:<paypal sandbox security signature>" -H "X-PAYPAL-REQUEST-DATA-FORMAT:NV" -H "X-PAYPAL-RESPONSE-DATA-FORMAT:JSON" -H "X-PAYPAL-APPLICATION-ID:APP-80W284485P519543T" https://svcs.sandbox.paypal.com/Invoice/CreateAndSendInvoice  -d "requestEnvelope.errorLanguage=en_US&invoice.merchantEmail=merchant_1328956628_per@gmail.com&invoice.payerEmail=payer_1329716425_biz@gmail.com&invoice.currencyCode=USD&invoice.itemList.item(0).name=Banana+Leaf+--+001&invoice.itemList.item(0).description=Banana+Leaf&invoice.itemList.item(0).quantity=1&invoice.itemList.item(0).unitPrice=1&invoice.itemList.item(0).taxName=Tax1&invoice.itemList.item(0).taxRate=10.25&invoice.paymentTerms=Net10" 
```

I get the following error:

{"responseEnvelope":{"timestamp":"2012-09-18T08:06:27.801-07:00","ack":"Failure","correlationId":"2d3c5f95a76d9","build":"3566933"},"error":[{"errorId":"570054","domain":"PLATFORM","subdomain":"Application","severity":"Error","category":"Application","message":"Invalid token"}]}

I am unable to find what is going wrong with the parameters being sent here for getting invalid token error. Please help.

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-19T03:13:10.423

确保您的商家电子邮件 (invoice.merchantEmail) 与您沙盒帐户中的商家电子邮件地址相同。

# php - Wordpress A-Z search result

> ID：12480065
> 
> 赞同：1
> 
> 时间：2012-09-18T15:22:39.397
> 
> 标签：php, wordpress

As per [this post](https://stackoverflow.com/questions/9710532/how-to-add-a-z-filter-to-wordpress-search-result) I am trying to add an A-Z directory where it will just list posts that start with the relevant letter using the TwentyEleven theme and I'm struggling. I have added the code to search.php and added the links. These display OK, but when I click on a letter it just refreshes and goes to the home page (the links are on the home page).

The link is in the format www.domain.com/?&letter=t

Does anyone have any ideas?

# jquery - 将元素附加到另一个元素

> ID：12480067
> 
> 赞同：0
> 
> 时间：2012-09-18T15:22:49.730
> 
> 标签：jquery, html, append

我正在动态构建一个`<div>`带有子元素的元素。其中一个子元素是我需要为其设置加载事件的图像。当我尝试`.appendTo()`不`<div>`附加图像时。我可以在萤火虫中看到每个元素（`contentItem`和`$img`）都存在但没有被附加。

```
var buildContentItem = function (src, caption, date, userName) {
    var contentItem =
        '<div class="contentItem">' +
            '<a href="javascript: void(0);"></a>' +
            '<div class="detailsWrapper">' +
                '<span class="date">' + date + ': </span>' +
                '<span class="userName">' + userName + '</span>' +
                '<div class="caption">' + caption + '</div>' +
            '</div>' +
        '</div>';

    var $img = $('<img>', {
        load: function () {
            console.log('loaded');
            images.push($.Deferred(function (promise) {
                promise.resolve();
            }).promise());
        }
    }).appendTo($(contentItem).find('a'));
    $img.attr('src', src).attr('alt', caption);

    return contentItem;
}; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-19T12:29:56.100

我返回的 contentItem 只是一个字符串。当我附加它时`$img`，`$(contentItem)`并没有对字符串进行更改。这是修复...

```
var buildContentItem = function (src, caption, date, userName) {
    var contentItem =
        '<div class="contentItem">' +
            '<a href="javascript: void(0);"></a>' +
            '<div class="detailsWrapper">' +
                '<span class="date">' + date + ': </span>' +
                '<span class="userName">' + userName + '</span>' +
                '<div class="caption">' + caption + '</div>' +
            '</div>' +
        '</div>';

    var $img = $('<img>', {
        load: function () {
            console.log($(this).position().left);
            images.push($.Deferred(function (promise) {
                promise.resolve();
            }).promise());
        }
    });
    // the fix below
    contentItem = $(contentItem).find('a').append($img).parent();
    $img.attr('src', src).attr('alt', caption);

    return $('<div>').append(contentItem.clone()).html();
}; 
```

# php - PHP Can't connect to MySQL on the production server

> ID：12480070
> 
> 赞同：0
> 
> 时间：2012-09-18T15:23:00.133
> 
> 标签：php, mysql, dedicated-server

I'm having problems with connections with MySQL through PHP script.

The MySQL user is **root** and I added GRANTS to **root@'%'** so I can connect from anywhere.

Lets assume my MySQL host as "**bigboy.com.br**"

The funny part is, from my local machine, on my test server, the script can connect to the MySQL server normally. But on the dedicated server where MySQL is running, the same PHP script gives me "Access denied for '**root**'@'**bigboy.com.br**'" error.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-18T15:25:50.850

如果要允许远程连接，还必须将 my.cnf 中的 bind-address 设置为 0.0.0.0

编辑后给你重启mysql服务器。

在您的防火墙上，需要打开端口 3306。不要忘记在服务器和客户端上打开它。

# java - SWT ExpandItem Image property in Linux

> ID：12480072
> 
> 赞同：1
> 
> 时间：2012-09-18T15:23:06.513
> 
> 标签：java, linux, image, swt

I developed an SWT dialog in Eclipse (WindowsSO) which contains a `ExpandBar` with some `ExpandItem`s. All of these have text and image, and in Windows everything is rendered as it should be, however in linux, only the image is shown and text is not rendered.

Does anyone know why?

# crystal-reports - 如果值不包含某种格式，则要排除的水晶公式

> ID：12480073
> 
> 赞同：0
> 
> 时间：2012-09-18T15:23:11.723
> 
> 标签：crystal-reports

我正在尝试从某个字段（table.value）中排除与此格式 AA#####A 不匹配的任何值。例如，如果他们输入 APT12345T 或 PT12345PT 且无值，那么我想将其从报告中排除。它需要匹配示例 AP12345P。我可以使用什么选择公式来完成此操作。任何帮助都非常感谢在此先感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-18T15:32:23.010

尝试阅读 Crystal 的关于 mid() 和 isnumeric() 函数的帮助主题。

* * *

这是帮助文件中的一个示例：

> 示例 以下示例适用于 Basic 和 Crystal 语法：
> 
> 中("abcdef", 3, 2)
> 
> 返回“cd”。

所以，在你的情况下，你想把你的价值分成三部分，

```
mid(table.value,1,2)
mid(table.value,3,5) 
mid(table.value,8,1) 
```

并建立一个由三部分组成的布尔变量，其中：

1.  第一部分不是数字（），或者在'AA'和'ZZ'之间，或者你想测试字母，
2.  第二部分 isnumeric()，和
3.  第三部分通过与第一部分相同的测试。

你在哪里卡住了？

* * *

像这样的东西：

```
not isnumeric(mid({table.field},1,2)) and
isnumeric(mid({table.field},3,5) and
not isnumeric(mid({table.field},8,1)) 
```

# c - 如何在C中将树数据写入文件？

> ID：12480078
> 
> 赞同：2
> 
> 时间：2012-09-18T15:23:23.627
> 
> 标签：c, serialization, data-structures, tree, fwrite

我正在查看类似的问题，但没有找到解决方案。我的结构类似于具有 2 个以上节点的树。我还有一个指向根的指针。

```
typedef struct tree
{
   char *name;
   struct tree *children
}TREE; 
```

我想将此数据写入文件，但只是感到困惑，所以很想得到一些帮助

我想使用：

```
int writeData(TREE *root , char *filename){

    FILE *f = NULL;
    int numWritten = 0;

fopen_s(&f , filename, "w+" );
fwrite(root , sizeof(TREE) , ??? , f); 
```

}

我不知道该写什么，如果我对每个元素都有孩子，所以我想把它们都扔掉——我该怎么做？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-18T15:28:30.643

嗯，这个问题被称为“序列化结构化数据”——基本上它**与解析相反。**问题是您不能只将内存中数据结构的原始二进制数据转储到文件中 - 当地址更改时，它在下次启动程序时没有意义。您必须提出一种能够描述您的数据结构并将其写入文件的格式。然后，当然，如果您想稍后从文件中恢复数据结构，您还必须为该格式编写解析器。

我建议使用 JSON——它是一种轻量级、易于编写和易于阅读的数据格式，而且它也是通用的——它是存储简单抽象数据类型的理想选择。[这是我的库](http://github.com/H2CO3/libjsonz)，可以从基本数据类型（例如数组、关联数组、字符串、数字......）生成和解析 JSON

> 如果我对每个元素都有孩子，那么我怎么能把它们都扔掉

对于这个问题：您可能正在寻找[递归。](http://en.wikipedia.org/wiki/Recursion_%28computer_science%29)当您经过每个节点/叶子时，您需要递归遍历您的数据树并生成表示您的数据结构的数据（假设您的数据结构类似于图/树）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-19T20:18:57.617

您可以复制工作数据结构，以便将所有使用的 TREE 存储在 TREE 数组中，并将所有 TREE 指针更改为数组的索引，然后将整个 TREE 数组存储在二进制文件中。哦，char 指针也必须是指向存储的单个字符数组的指针。

不如 YAML 或 JSON 可读，但如果您需要二进制格式...

# python - Return a tuple from a function and place into another function python

> ID：12480087
> 
> 赞同：0
> 
> 时间：2012-09-18T15:24:04.133
> 
> 标签：python

This description may be a bit complicated so I will try to keep it short.

I have the following code that is working correctly...

```
def singlelist():
    from datetime import datetime
    from subprocess import Popen
    from subprocess import PIPE
    output=Popen(["sar","-r"], stdout=PIPE).communicate()[0]
    date=datetime.now()
    date=str(date).split()[0]
    listtimeval=[]
    for line in output.split('\n'):
        if line == '' or 'Average' in line or 'kb' in line or 'Linux' in line or 'RESTART' in line:
            pass
        else:
            (time,ampm,field1,field2,field3,field4,field5,field6,field7) = line.split()
            listtimeval.append((time + " "+ ampm + "," + field3).split(','))
    updatelist= [ [str(date) + " " +x[0],x[1]] for x in listtimeval]
    return updatelist

val=singlelist() 
```

...notice how time,ampm,etc are not defined previously...

I am trying to make this more dynamic as the output of sar will not always have the same number of columns.

What I want to do is this...

```
def fields(method):
    if method == '-r':
        nf = (time,ampm,field1,field2,field3,field4,field5,field6,field7)
    return nf

def singlelist(nf):
    from datetime import datetime
    from subprocess import Popen
    from subprocess import PIPE
    output=Popen(["sar","-r"], stdout=PIPE).communicate()[0]
    date=datetime.now()
    date=str(date).split()[0]
    listtimeval=[]
    for line in output.split('\n'):
        if line == '' or 'Average' in line or 'kb' in line or 'Linux' in line or 'RESTART' in line:
            pass
        else:
            nf = line.split()
            listtimeval.append((time + " "+ ampm + "," + field3).split(','))
    updatelist= [ [str(date) + " " +x[0],x[1]] for x in listtimeval]
    return updatelist

method='-r'
nf=fields(method)
val=singlelist(nf) 
```

However I am getting this...

```
Traceback (most recent call last):
  File "./Logic.py", line 110, in <module>
    nf=fields(method)
  File "./Logic.py", line 58, in fields
    nf = (time,ampm,field1,field2,field3,field4,field5,field6,field7)
NameError: global name 'time' is not defined 
```

How can I accomplish this?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-19T02:41:02.627

跟进皮埃尔的回答：您可以分配给未声明的变量（隐式创建它），如果没有未定义的变量错误，您不能分配 FROM 它。

您似乎还让那个糟糕的函数做了很多不相关的事情——加载模块、调用子进程、解析和重新解析数据。如果您将其分解如下，可能更容易理解和维护：

```
import datetime
from itertools import izip
from subprocess import Popen, PIPE

def call_sar(options, columns):
    sar  = Popen(["sar"]+options, stdout=PIPE)  # create subprocess
    res  = sar.communicate()[0]                 # get stdout text
    data = res.splitlines()[3:-1]               # grab the relevant lines
    return (dict(izip(columns, row.split())) for row in data)

def get_system_stats(mode, fmt=None):
    modes = {   # different ways to call sar, and the values returned by each
        "all_cpus": ('-r',    'time ampm cpu user_pct nice_pct system_pct iowait_pct steal_pct idle_pct'),
        "each_cpu": ('-P',    'time ampm cpu user_pct nice_pct system_pct iowait_pct steal_pct idle_pct'),
        "mem":      ('-r',    'time ampm memfree_kb memused_kb memused_pct buffers_kb cached_kb commit_kb commit_pct active_kb inactive_kb'),
        "swap":     ('-S',    'time ampm swapfree_kb swapused_kb swapused_pct swapcad_kb swapcad_pct'),
        "all_io":   ('-b',    'time ampm ts read_ts write_ts read_bs write_bs'),
        "each_io":  ('-p -d', 'time ampm dev ts read_ss write_ss avg_req_sz avg_queue_sz avg_wait'),
        "switch":   ('-w',    'time ampm proc_s switch_s'),
        "queue":    ('-q',    'runq_sz plist_sz avg_load_1 avg_load_5 avg_load_15 blocked')
    }
    if mode in modes:
        options, columns = modes[mode]
        data = call_sar(options.split(), columns.split())
        if fmt is None:
            # return raw data (list of dict)
            return list(data)
        else:
            # return formatted data (list of str)
            return [fmt.format(**d) for d in data]
    else:
        raise ValueError("I don't know mode '{}'".format(mode)) 
```

现在您可以轻松地定义您的函数，如下所示：

```
def single_list():
    today = datetime.datetime.now().date()
    fmt   = "{} {} {} {}".format(today, '{time}', '{ampm}', '{memused_pct}')
    return get_system_stats("mem", fmt) 
```

注意：我是在 Windows 7 机器上编写的，所以我没有 sar 并且无法实际运行测试它 - 它没有语法错误，我*认为*它应该可以正常工作，但它可能需要微调。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-18T15:29:34.033

*   你还没有`time`在你的`fields`函数中定义。好吧，`(time,ampm,field1,field2,field3,field4,field5,field6,field7)`该函数中没有定义...
*   你不使用`nf`in `singlelist`，除了重新分配它。你想达到什么目的？
*   您可以修改`fields`以接受参数`(time,ampm,field1,field2,field3,field4,field5,field6,field7)`中的`method`参数，但是您将如何定义它们？您仍然需要`fields`从`singlelist`.

# user-interface - 在 GAS FlexTable 中为单个单元格设置样式 ...不可能吗？

> ID：12480088
> 
> 赞同：0
> 
> 时间：2012-09-18T15:24:13.863
> 
> 标签：user-interface, google-apps-script, flextable

似乎无法在 GAS FlexTable 中设置单个单元格的样式（例如，更改标题行的背景颜色）。那是对的吗？

[我在这里](https://developers.google.com/apps-script/class_flextable)看到的唯一方法是 .setStyleAttribute() 和 .setStyleAttributes() ，它们都在整个应用程序或作为对象的整个 flextable 上运行。

此外，我没有看到从 .getCell() 或 .getRow() 等灵活表返回单个单元格或单元子集的方法。

因此，我是否正确得出结论，此时无法在 GAS 灵活表中设置单个单元格的样式？（对不起，如果这个问题的答案很明显，“没有办法做到这一点。”但我想我最好在放弃之前先咨询专家。）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-22T03:48:28.517

setWidget 很贵

我拉出关于`500X12`flextable 中的表格，发现使用 setText 至少快两倍。

再说一次，我也无法弄清楚如何在调用 setText 时更改 flexTable 中的字体大小。背景、字体颜色等有效，但字体大小无效。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-18T16:51:04.583

为单个单元格设置样式是通过以下方式完成的：

方法 setStyleAttribute(row, column, attribute, value) - 在此 FlexTable 的单元格上设置 CSS 样式。

您必须向下滚动到FlexTable 页面上第**二次出现 setStyleAttribute。**由于这两种方法的 HTML 锚都是 #setStyleAttribute ，因此您总是得到第一个。

getCell 方法不会有用，因为 flextable 单元格不是小部件。

还有一个 setStyleAttributes(row, column, attributes) 方法...

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-18T19:28:56.680

有一种非常简单的方法可以做到这一点。不要使用 FlexTable.setText() 来设置内容，而是使用 FlexTable.setWidget()。你可以添加一个标签和你想要的样式，每个标签都可以有自己的样式

# postgresql - PostgreSQL 中的 DISTINCT WHERE 查询

> ID：12480102
> 
> 赞同：0
> 
> 时间：2012-09-18T15:24:48.557
> 
> 标签：postgresql

我试图将 where 子句放在 postgresql 的 select distinct 查询中，但没有运气。

我想做以下事情：

```
select distinct on (state_or_county) state_or_county 
from locations 
where country = "USA" 
```

我在mysql中做过很多次，不明白为什么这不起作用。

有人可以更正查询吗？或者解释为什么它不起作用？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-18T15:30:00.843

在 postgresql 中，字符串文字必须用单引号括起来：

```
select distinct on (state_or_county) state_or_county 
from locations 
where country = 'USA' 
```

如果需要，双引号用于标识符：

```
select distinct on ("state_or_county") "state_or_county" 
from "locations" 
where "country" = 'USA' 
```

# iphone - 如何隐藏 UITableView？

> ID：12480107
> 
> 赞同：0
> 
> 时间：2012-09-18T15:25:00.587
> 
> 标签：iphone, uitableview

当在我的视图控制器中按下一个按钮时，它会显示一个`UIView`包含`UISearchBar`和`UISearchDisplayController`的按钮`UITableView`（将视图的隐藏属性更改为否）。当我在表格视图中选择一行时，我将视图的属性设置为`hidden=YES`，但它不会隐藏 tableView。可能是什么问题？

我实现了`UITableViewDelegate`协议并收到 `tableView:didSelectRowAtIndexPath:`消息（我在那里设置了视图`hidden=YES` ）。

请注意，当我从中调用视图时`hidden=YES`，`searchBarCancelButtonClicked:`它会成功隐藏。

我认为这`UISearchDisplayController`是造成问题的原因。

一些代码：

```
-(void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath
{
    self.searchView.hidden = YES; // hide successfully the tableView.
}

-(void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath   *)indexPath
{
    self.searchView.hidden = YES; //doesn't hide the tableView.
} 
```

编辑：发现问题，请参阅下面的答案。简而言之，我添加了`[self.searchDisplayController setActive:NO];`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-18T16:15:09.400

发现了问题 - 我需要添加`[self.searchDisplayController setActive:NO];`，现在它可以工作了。

代码：

```
-(void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath  
{
    [self.searchDisplayController setActive:NO]; //Added line of code.
    self.searchView.hidden = YES; // Now it works!
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-18T15:28:11.417

试试这个：

```
 tableview.hidden = YES; 
```

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2012-09-18T15:29:43.190

[self.yourview setHidden: 是];

如果 tableview 在视图内，它也应该隐藏

# ruby - 给定客户 ID，我如何获得 Faye 客户？

> ID：12480122
> 
> 赞同：2
> 
> 时间：2012-09-18T15:25:39.760
> 
> 标签：ruby, faye

Faye 允许您监控各种事件，例如`handshake`或`subscribe`。这些回调块只提供`client_id`值而不是客户端本身。例如：

```
server = Faye::RackAdapter.new(mount: '/faye', timeout: 45)

server.bind(:handshake) do |client_id|
  puts "Received handshake from #{client_id}"
end 
```

给定的情况下，我如何访问客户端`client_id`？或者我如何在握手中访问更多信息，例如请求标头中提供的 cookie（如果该信息甚至可用）？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-20T19:29:13.517

我认为我最初的问题是基于对 Faye 在两个方面的工作方式缺乏了解。我不会删除我的问题，而是将为遇到类似问题的其他人回答它。（如果我的回答有任何错误，请评论或编辑！）

首先，由于 Faye 在 Bayeux 协议方面的实现方式，任何时候都无法访问已连接的客户端。所有通信都是通过频道广播进行的，这意味着所有监听频道的连接都将收到正在发送的消息。

其次，我在问题中粘贴的代码涉及[监控](http://faye.jcoglan.com/ruby/monitoring.html)。我真正在寻找的是一个[extension](http://faye.jcoglan.com/ruby/extensions.html)。

为了根据我的原始问题实现身份验证，我需要传递所需的任何身份验证值（无论是 cookie 值、身份验证令牌等）作为`message['ext']`值的一部分（根据扩展页面上的示例）。然后，在服务器端，我需要监听`/meta/handshake`通道上的消息，在`message['error']`值的情况下设置为某个值。

# javascript - HTML 标签隐藏最近的控件

> ID：12480123
> 
> 赞同：0
> 
> 时间：2012-09-18T15:25:41.300
> 
> 标签：javascript, html, webkit

我有以下html代码

```
<html>
   <script>
      function test(){              
        document.getElementById('lblUser').innerText="test html";                   
      }
  </script>     
  <a href="#">LINK1</a>
  <label id="lblUser"/>         
  <a href="#">LINK2</a>
  <script type="text/javascript">test();</script>       
</html> 
```

调用**test()**时LINK2 消失。这似乎是因为**lblUser.innerText**的变化。但是显示 LINK2 的可能方式是什么？为什么会这样？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-18T15:28:25.167

Label 的实现取决于 doctype，尽量不要将 label 作为自闭合标签。

```
 <label id="lblUser"></label> 

  <a href="#">LINK2</a>

  <script>
      function test(){              
        document.getElementById('lblUser').innerText="test html";                   
      }
      test();
  </script> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-18T15:29:58.440

标签标签不会自动关闭。

因此，您的浏览器将其视为围绕 text2 元素的容器，当您设置 HTML 时，标签的内部内容会被删除，这就是 text2 消失的原因。

你应该有它：

```
<label id="lblUser">...</label> 
```

# c# - 限制 Pivot 中的后退导航

> ID：12480124
> 
> 赞同：-2
> 
> 时间：2012-09-18T15:25:41.380
> 
> 标签：c#, wpf, windows-phone-7, xaml, windows-phone-7.1

我创建了一个包含 8 个数据透视项目的数据透视页面。我不希望我的第一个数据透视项目向后导航意味着当它到达第八页时，它应该导航到其他页面。还有可能编写我自己的滑动功能数据透视页面中的事件。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-19T13:18:35.353

首先，我同意 Gambit 的评论，即这是非标准行为，通常违背用户对 UI 行为的合理预期。我会在没有令人信服的理由的情况下警告它。

也就是说，您可以使用and集合停止`SelectionChanged`事件中枢轴上的循环。`AddedItems``RemovedItems`

```
private void Pivot_SelectionChanged( object sender, SelectionChangedEventArgs e ) {
    if( e.AddedItems[0].Equals( PivotItem1 ) && e.RemovedItems[0].Equals( PivotItem8 ) ) {
        Pivot.SelectedIndex = 0;
    } else if( e.RemovedItems[0].Equals( PivotItem8 ) ) {
        NavigationService.Navigate( new Uri( "/NextPage.xaml", UriKind.Relative ) );
    }
} 
```

# matlab - 单个矩阵列/行/元素的句柄——Matlab

> ID：12480125
> 
> 赞同：1
> 
> 时间：2012-09-18T15:25:49.813
> 
> 标签：matlab

我目前正在使用 Matlab，并且正在绘制矩阵行的内容，其中每一列都是一个独立的数据集。由于矩阵很大，我不想完成为每个数据集单独编写绘图标签的繁琐任务，所以我想知道是否有一种特定的方法可以为每一列包含一个句柄/名称这样它会自动应用绘图标签，并在矩阵中添加或删除列时进行相应调整？

谢谢！

细节（如果有帮助）：光纤放大器中的放大自发辐射 (ASE)。行用作离散化 ASE 光谱的存储，列是沿光纤放大器的给定位置（它是这个位置 - 沿着与列对应的光纤的距离 - 我想用作标签）并且每个元素都包含电源信息。该图给出了光纤中 ASE 沿其长度方向不同位置的光谱功率。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-18T15:58:25.267

如果标签是指情节图例，则可以使用单元格来做到这一点。考虑矩阵 A

```
A = repmat([1:3], 3, 1)

A =

 1     2     3
 1     2     3
 1     2     3 
```

您可以调用 plot 来绘制矩阵的列

```
plot(A); 
```

在这里，您将在 y=1、2 和 3 处获得 3 条水平线。您可以按如下方式创建图例

```
l{1} = 'dataset1';
l{2} = 'dataset2';
l{3} = 'dataset3'; 
```

然后你输入

```
legend(l) 
```

显示传奇。但是，没有人会为您创建图例，因此您必须自己创建元胞数组。当然，你可以自动完成，例如上面的图例可以通过一个简单的循环来创建

```
for i=1:size(A, 2)
   l{i} = ['dataset' num2str(i)];
end 
```

# clearcase - 单个目录的 ClearCase 权限

> ID：12480128
> 
> 赞同：1
> 
> 时间：2012-09-18T15:25:51.177
> 
> 标签：clearcase, clearcase-ucm

我正在尝试在我们的 VOB 中创建一个文件夹，每个人都可以读取它，但只有一组可以写入。这就是我所做的，但我开始认为我错过了一些东西......

1.  我创建了一个新的 Windows 组并将特定用户添加到其中。
2.  我将此组添加到 vob 组列表中。（它是否也必须添加到 PVOB 中？）
3.  我将文件夹上的“组”所有者更改为该组。
4.  我将此组添加到我的 CLEARCASE_GROUPS 环境变量中（并重新启动。）

更新时我仍然收到“权限被拒绝”，并且无法在文件夹下添加任何文件。我真的错过了一步吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-18T16:40:48.407

您还需要：

*   将此组添加到您的`CLEARCASE_PRIMARY_GROUP`
*   然后创建一个动态视图（它将被这个组保护）
*   然后挂载这个vob
*   并尝试在其中创建一个文件夹。

有关具体示例，另请参阅“[如何限制 ClearCase (Windows Server) 中的 VOB 读取访问？](https://stackoverflow.com/a/966021/6309) ”。

我提到了一个动态视图，因为用它来测试 Vob 访问和文件夹创建会更容易/更快。一旦它工作，在相同的条件下创建一个快照视图，它也应该工作。

注意：如果此 Vob 是[UCM 组件 Vob](https://stackoverflow.com/a/9579131/6309)，我建议至少将该组添加到其关联 pvob 的辅助组中。

# php - PHP preg_split Apache 和 Powershell 等效

> ID：12480129
> 
> 赞同：0
> 
> 时间：2012-09-18T15:26:02.860
> 
> 标签：php, windows, linux, apache, powershell

## 我在建造什么：

该脚本使用 GIT-POSH 归档工作目录，并使用 Windows Powershell SSH 模块将其发送到 Linux Apache 服务器。

为方便起见，该脚本还需要报告本地计算机和 Apache 服务器上的现有文件。

## 问题：

这是我需要字符串操作来分隔命名约定中的每个块的地方。

我打算使用下划线`block_block`，直到我意识到一些块已经包含下划线。这是我决定用括号封装每个块的时候`[block][block]`

> 在 PHP 中，我会使用 preg_split 将每个部分拉出到关联数组中。

```
[product][branch_name][date][time][commit_hash] 
```

## 预期用途：

```
--> Get-Product $string
--> product123
--> Get-Branch $string
--> branch123 
```

## 我的问题：

*   如何`preg_split`使用 powershell 和 apache 以相同的方式使用此字符串？
*   支持相同操作的更好命名约定？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-19T08:25:14.350

PHP`preg_split`可以用`System.RegularExpressions.Split()`. 有一些注意事项，即`Split()`会为它替换的标记返回空字符串，因此需要进行一些过滤。像这样，

```
$data = "[product][branch_name][date][time][commit_hash]"
$arr = [Regex]::Split($data, "[\[\]]") | ? { $_.length -gt 0 }
$arr 
```

输出：

```
product
branch_name
date
time
commit_hash 
```

如果没有过滤子句`? { $_.length -gt 0 }`- 它将排除长度为零的字符串对象 - 输出会略有不同：

```
product

branch_name

date

time

commit_hash 
```

这种行为[记录](http://msdn.microsoft.com/en-us/library/8yttk7sy.aspx "MSDN")在 MSDN 中。

# knockout.js - Mixed Knockout and Server side rendering

> ID：12480138
> 
> 赞同：11
> 
> 时间：2012-09-18T15:26:48.307
> 
> 标签：knockout.js

I have some pages that I need to render via the server side to make them search engine friendly. For search engines, it should function as a classic website. For users, I want to make the interface more interactive. My thought is to render the page server side, then use knockout and jquery to fetch the data again via ajax and bind it to the page.

I'm concerned about having flashes of no content, or duplicated content. Is there a best practice/pattern for cases like this?

The process would look like this:

1.  Render page using server side, including a long list of html elements.
2.  Use jQuery to fetch the same data already rendered to the page.
3.  Clear server side content with jquery.
4.  Bind ajax to knockout template, which effectively renders the page as it was previously.
5.  Subsequent clicks to page through data by a normal user uses ajax and knockout to render the data.
6.  Search engine can follow standard links to see the same data as the user.

The part I'm hung up on is how to pre-render, clear, and re-render with knockout/jquery.

Maybe my thought process is off a bit, I'd love to hear feedback.

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-06-28T12:01:32.017

它是可行的，基本上是从服务器端填充您的数据，但是从淘汰部分将“数据绑定”属性添加到您的输入中，通过获取字段值来设置您的可观察值。

这是一个简单表格的示例：

MVC部分：

```
public ActionResult Index()
{
    Person newPerson = new Person()
    {
        FirstName = "John",
        LastName = "Smith"
    };

    return View(newPerson);
} 
```

而你的观点：

```
<div id="main">
    <div>
        First Name:
        @Html.TextBoxFor(p => p.FirstName, new { data-bind = "value: firstName" })
    </div>
    <div>
        Last Name:
        @Html.TextBoxFor(p => p.LastName, new { data-bind = "value: lastName"})
    </div>

    <input type="button" data-bind="click: showValues" value="Show" />
</div> 
```

最后是你的淘汰赛部分：

```
var personViewModel = function () {

    var self = this;

    self.firstName = ko.observable($("#FirstName").val());
    self.lastName = ko.observable($("#LastName").val());

    self.showValues = function () {
        alert(self.firstName() + " " + self.lastName());
    }
};

ko.applyBindings(new personViewModel()); 
```

希望这适用于您的情况。

编辑：修复 data_bind 到 data-bind 的错字

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2015-06-17T11:30:39.703

您可以尝试淘汰预渲染绑定处理程序。它基本上按照 Tamim 的建议做，但它处理 foreach 并适用于任何数据绑定。

[https://www.npmjs.com/package/knockout-pre-rendered](https://www.npmjs.com/package/knockout-pre-rendered)

您还可以考虑使用“通用”的 React - 您可以使用相同的代码在服务器和客户端上呈现页面。由于 React 使用差异引擎，因此当服务器呈现的内容被客户端呈现的内容替换时，不会出现闪烁。

[http://facebook.github.io/react/](http://facebook.github.io/react/)

[http://reactjs.net/](http://reactjs.net/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2017-04-28T14:34:14.643

您可以使用 Node 和一个简单的 DOM 实现（如 domino）呈现淘汰赛：

*   要点 - [https://gist.github.com/kaheglar/10afd535e4970ad9ec6accd62b6ceb03](https://gist.github.com/kaheglar/10afd535e4970ad9ec6accd62b6ceb03)。
*   可运行示例 - [https://runkit.com/kaheglar/58d4df9993b2030014579f47](https://runkit.com/kaheglar/58d4df9993b2030014579f47)。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-01-04T07:07:42.550

除了 Knockout 之外，这还使用了[Durandal](http://durandaljs.com)，但我遇到了同样的问题，这是我想出的解决方案：

[https://github.com/bestguy/durandal-delayed-composition](https://github.com/bestguy/durandal-delayed-composition)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-08-29T12:13:03.893

也可以使用[peTemplate](http://peknockout.codeplex.com/)绑定。对于 tempate 和 foreach 绑定，它不会重新生成 HTML，而是使用服务器端生成的 HTML。您唯一需要做的就是用几个指定数据键的属性来注释服务器中的 HTML。

# asp.net - 如何在我的 asp.net 列表视图中显示导航属性集合的第一个元素（使用实体框架）？

> ID：12480155
> 
> 赞同：0
> 
> 时间：2012-09-18T15:28:05.793
> 
> 标签：asp.net, entity-framework

我正在使用列表视图来显示我网站的所有用户的列表。一个用户可以上传多个图像，所以当我使用实体框架生成模型时，创建了 2 个实体：用户和图像。用户有一个图像集合的导航属性，而图像有一个单个用户的导航属性。

我现在正试图在我的列表视图 1 中显示用户上传的图像（如果他上传了任何图像）。显示哪一张都没有关系。

我创建了一个 EntityDataSource，并将“图像”添加到它的包含属性中。然后，我将我的列表视图分支到数据源。通常，为了显示导航属性的内容，我使用类似的东西

```
<asp:Label ID="fn" runat="server" Text='<%# Eval("Users.Firstname") %>' /> 
```

但是，由于它是我要显示的集合的列，我可以使用这样的东西吗？如果是这样，管理用户没有上传任何图像的情况的正确方法是什么？

`<asp:image ID="img" runat="server" ImageUrl='<%# Eval("Images[0].path") %>' AlternateText="" />`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-18T18:00:43.513

`Eval`正在使用反射，它在更复杂的术语上有其局限性。你不应该害怕直接投射：

```
 <asp:image ID="img" runat="server" 
  ImageUrl='<%# ((YourObjectType)Container.DataItem).Images[0].path") %>' 
  AlternateText="" /> 
```

请注意，为了强制转换，`YourObjectType`您可能必须向`<@Import >`页面添加指令（或者使用完整的类型名称，包括命名空间）。

# xpages - Using the Extension Library Navigator

> ID：12480157
> 
> 赞同：0
> 
> 时间：2012-09-18T15:28:13.527
> 
> 标签：xpages, navigator, xpages-extlib

Does anyone know of a good tutorial or YouTube video that explains how to set up and use the Navigator in the IBM Xpages Extension Library?

It is a bit confusing with all the options, types of nodes, and Select & Submit Values. Hope to find something that shows the simple way to use this tool along with some of the Advanced capabilities.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-21T16:36:36.733

我做了一个快速的 youtube 视频，我只展示了它最简单的用法。请享用

[http://www.youtube.com/watch?v=adtyIAo3bZE](http://www.youtube.com/watch?v=adtyIAo3bZE)

你有什么特别想知道的吗？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-23T19:17:03.890

希望一本好的教程是 XPages Extension Library 书。它详细介绍了所有各种节点类型。

# objective-c - Cattextlayer 字符串大小和颜色

> ID：12480160
> 
> 赞同：0
> 
> 时间：2012-09-18T15:28:27.110
> 
> 标签：objective-c, ios, fonts, catextlayer

我很难理解如何以不同的大小、颜色定义 catextlayer 的某些部分以及如何添加换行符？

我需要像这样格式化一页文本：

标题（尺寸 20 HelveticaNeue-Light，黑色）

/n 换行符

第 1 段（尺寸 15 HelveticaNeue-Light，黑色）

/n 换行符

第 2 段（尺寸 15 HelveticaNeue-Light，自定义颜色）

目前我只有标题文字，有人可以帮我吗？

```
 CATextLayer *TextLayer = [CATextLayer layer];
    TextLayer.bounds = CGRectMake(0.0f, 0.0f, 245.0f, 290.0f);
    TextLayer.string = @"Title";
    CTFontCreateWithName((CFStringRef)@"HelveticaNeue-Light", 0.0, NULL);
    TextLayer.backgroundColor = [UIColor blackColor].CGColor;
    TextLayer.position = CGPointMake(162.0, 250.0f);
    TextLayer.wrapped = YES;
    TextLayer.fontSize = 20;
    [self.view.layer addSublayer:TextLayer]; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-18T17:52:21.077

听起来您想使用属性字符串。如果您有 Apple Developer 帐户，您可以在文档中了解更多信息。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-11-03T06:28:21.410

这是应该工作的代码：

```
NSMutableParagraphStyle *paragraphStyle = [[NSMutableParagraphStyle alloc] init];

paragraphStyle.lineBreakMode = NSLineBreakByWordWrapping;
paragraphStyle.alignment = NSTextAlignmentLeft;
NSAttributedString *string= [[NSAttributedString alloc] initWithString:@"#We enjoy rftef gdfg dfgdfg dfgdfg dfgdfg dgdfg dgdfg gdfg dfgdfg dgdfg"
                                  attributes:[NSDictionary
                                              dictionaryWithObjectsAndKeys:[UIFont systemFontOfSize:11],
                                              NSFontAttributeName,
                                              paragraphStyle, NSParagraphStyleAttributeName,nil]];

CATextLayer *subtitle1Text = [[CATextLayer alloc] init];
[subtitle1Text setFont:@"Helvetica-Bold"];
[subtitle1Text setFontSize:18];
[subtitle1Text setFrame:overlayLayer1.bounds];
[subtitle1Text setString:string]; 
```

# c - 您如何在 C 中验证用户输入？

> ID：12480168
> 
> 赞同：1
> 
> 时间：2012-09-18T15:28:43.533
> 
> 标签：c, validation

好的，所以我想先说我对 C 知之甚少。我在高中独立学习它，所以我向你们寻求帮助。我正在使用 C1，但我不知道那是 # 还是 ++ 或者只是 C，甚至它们之间的区别是什么。无论如何，我的问题是如何确保用户输入整数而不是浮点数，或者确保该人没有在浮点输入中输入 & 符号。

我在记事本中编码并将它们保存为 .c 文件，然后在命令提示符下 gcc ，如果这能让您了解我正在使用的内容。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-18T15:32:16.047

您可以使用头文件[`ctype.h`](http://en.wikipedia.org/wiki/C_character_classification)中声明的函数，尤其是函数[`isdigit`](http://pubs.opengroup.org/onlinepubs/009695399/functions/isdigit.html)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-18T15:45:07.627

好吧，根据您对 gcc 的评论，我想您正在编程 C。但是进入这个问题，如果您正在使用`scanf`，那么它几乎会检查所有内容，您只需要知道如何使用它，例如：

```
int main(void)
{
    float input;
    if(scanf("%f", &input) == 1)
    {
        printf("OK, I could read your float: %f.\n", input);
    }
    else
    {
        printf("Not OK, I couldn't read your float.\n");
    }
    return 0;
} 
```

如果我输入`5.4654`，它将打印正确的数字。如果我输入`5.4&654`它将打印`5.4`，因为那里有一个浮点数，它一直到`&`字符。但是，如果我输入`abc`，它将失败，并且打印它无法读取您的浮点数。

这样做的原因是因为`scanf`返回成功读取数据的数量。因此，如果您要求`"%f %f %d"`，则必须检查返回值是否为`3`，如果是，则一切正常，尽管随机字符会妨碍但未被读取。

或者，在谈论整数类型（和类似类型）时，您可以[使用`ctype.h`](http://pubs.opengroup.org/onlinepubs/009695399/basedefs/ctype.h.html).

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-18T20:21:08.010

最好的方法是使用[fgets()](http://pubs.opengroup.org/onlinepubs/9699919799/functions/fgets.html)读取输入行并解析这些行。对于数字输入，用于整数的[strtol()](http://pubs.opengroup.org/onlinepubs/9699919799/functions/strtol.html)和/或用于浮点数的[strtod()是最全面的函数。](http://pubs.opengroup.org/onlinepubs/9699919799/functions/strtod.html)

例如

```
#include <errno.h>
#include <stdio.h>
#include <stdlib.h>

int main(void) {
    char line[100];
    char *err;
    int intval;

    printf("Enter a number:\n");
    fgets(line, sizeof line, stdin);

    errno = 0;
    intval = strtol(line, &err, 10);
    /* check for errors */
    if (errno) /* error */;
    if (*err != '\n') /* error */;

    return 0;
} 
```

# spring - Intellij 使用 spring 错误地突出显示 bean 定义中的错误

> ID：12480174
> 
> 赞同：0
> 
> 时间：2012-09-18T15:28:52.470
> 
> 标签：spring, intellij-idea

![错误地高调错误](../Images/b0c77a00f75430db2df408b8abdde7bd.png)

![正确的应用上下文](../Images/43713772a697743b8da8a8da76a8e016.png)

`Could not autowire bean should be off type ..NamedPArameterJDBCTemplate`

在两个方面哪个是错误的......？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-18T15:38:28.617

XML 文件中类属性值的开头有一个空格。

# oauth - 升级授权码是确定性的吗？

> ID：12480175
> 
> 赞同：0
> 
> 时间：2012-09-18T15:28:52.417
> 
> 标签：oauth, google-drive-api, google-authentication

我阅读了评论“// 升级代码后有时我们不会获得刷新令牌。” 在示例 DrEdit 代码[https://code.google.com/p/google-drive-sdk-samples/source/browse/java/src/com/google/drive/samples/dredit/CredentialMediator.java](https://code.google.com/p/google-drive-sdk-samples/source/browse/java/src/com/google/drive/samples/dredit/CredentialMediator.java)第 292 行。

“有时”是什么意思？是否有文件描述了我将获得和不会获得刷新令牌的情况？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-18T18:39:31.187

刷新令牌在两种情况下提供：

*   请求刷新令牌，offline=true
*   请求未自动批准

换句话说，当用户第一次授权您的应用并且您设置了offline=true 时，您将获得一个刷新令牌。除非用户撤销访问权限，否则该用户的后续授权将自动获得批准。在这种情况下，不会发出刷新令牌。

如果您需要强制发出刷新令牌，请在请求中添加approval_prompt=force。

# java - Can I create a BufferedImage from a JPanel without rendering in a JFrame?

> ID：12480181
> 
> 赞同：12
> 
> 时间：2012-09-18T15:29:15.327
> 
> 标签：java, swing, jframe, jpanel, bufferedimage

Is it possible to create a BufferedImage from a JPanel without first rendering it in a JFrame? I've searched everywhere I can think of and cannot find an answer. Can anyone help?

Here is some sample code. If I don't un-comment the JFrame code, my BufferedImage is blank.

```
 test(){
//      JFrame frame = new JFrame();
        JPanel panel = new JPanel();
        Dimension dim = new Dimension(50,50);
        panel.setMinimumSize(dim);
        panel.setMaximumSize(dim);
        panel.setPreferredSize(dim);
        JLabel label = new JLabel("hello");
        panel.add(label);
//      frame.add(panel);
//      frame.pack();
        BufferedImage bi = getScreenShot(panel);

        //...code that saves bi to a jpg
    }

    private BufferedImage getScreenShot(JPanel panel){
        BufferedImage bi = new BufferedImage(panel.getWidth(), panel.getHeight(), BufferedImage.TYPE_INT_ARGB);
        panel.paint(bi.getGraphics());
        return bi;
    } 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-09-19T00:25:59.760

See [this answer](https://stackoverflow.com/a/5853992/418556) to [Swing: Obtain Image of JFrame](https://stackoverflow.com/q/5853879/418556) as well as [Why does the JTable header not appear in the image?](https://stackoverflow.com/q/7369814/418556) for tips on painting components that have not yet been rendered. I expect the fix to your problem is shown in the label of `LabelRenderTest.java`.

```
JLabel textLabel = new JLabel(title);
textLabel.setSize(textLabel.getPreferredSize()); 
```

![](../Images/b7c0f850e0b42d0b8cc83f84d5598571.png)

## Update

```
Dimension dim = new Dimension(50,50);
panel.setSize(dim);  // very important!
panel.setMinimumSize(dim);
panel.setMaximumSize(dim);
panel.setPreferredSize(dim);
// ... 
```

Or here is the complete source. The size of the label also needs to be set.

```
import java.awt.Color;
import java.awt.Dimension;
import java.awt.image.BufferedImage;

import javax.swing.*;

public class RenderTest {

    RenderTest() {
        JPanel panel = new JPanel();
        panel.setBackground(Color.RED);
        Dimension dim = new Dimension(50,50);
        panel.setSize(dim);
        panel.setMinimumSize(dim);
        panel.setMaximumSize(dim);
        panel.setPreferredSize(dim);
        JLabel label = new JLabel("hello");
        label.setSize(label.getPreferredSize());
        panel.add(label);

        BufferedImage bi = getScreenShot(panel);
        JOptionPane.showMessageDialog(null, new JLabel(new ImageIcon(bi)));
    }

    private BufferedImage getScreenShot(JPanel panel){
        BufferedImage bi = new BufferedImage(
            panel.getWidth(), panel.getHeight(), BufferedImage.TYPE_INT_ARGB);
        panel.paint(bi.getGraphics());
        return bi;
    }

    public static void main(String[] args) {
        new RenderTest();
    }
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-09-18T17:35:28.947

EDIT2: Basically Andrew Thompson is right in his answer, a frame is not necessary. At the same time it can be practical to have one, because a call to pack() will make the layout managers work. I deleted the first part of my original answer, left is the memory-related part. Note that calling dispose on the Graphics is still needed even without a frame.

About your running out of heap space when using frames: this should not happen. Probably you only need to call [dispose()](http://docs.oracle.com/javase/6/docs/api/java/awt/Window.html#dispose%28%29) on the frames when you are done with them. If that does not help, I would suggest asking it in a separate question. From the dispose docs:

> Releases all of the native screen resources used by this Window, its subcomponents, and all of its owned children. That is, the resources for these Components will be destroyed, any memory they consume will be returned to the OS, and they will be marked as undisplayable. (...) Note: When the last displayable window within the Java virtual machine (VM) is disposed of, the VM may terminate.

EDIT: some more thoughts:

*   reusing the same JFrame object should also work. Add panel, call pack, create image, remove panel, repeat
*   don't forget to call [dispose()](http://docs.oracle.com/javase/6/docs/api/java/awt/Graphics.html#dispose%28%29) on the Graphics objects created by you as well
*   In worst case you can restart the JVM from a script from time to time

# cuda - 将二维数组复制到已知可变宽度的 GPU

> ID：12480182
> 
> 赞同：1
> 
> 时间：2012-09-18T15:29:17.223
> 
> 标签：cuda, gpu, gpgpu, nvidia

我正在研究如何将每行的可变宽度的二维数组复制到 GPU 中。

```
int rows = 1000;
int cols;
int** host_matrix = malloc(sizeof(*int)*rows);
int *d_array;
int *length;

... 
```

每个都`host_matrix[i]`可能有不同的长度，我知道`length[i]`，这就是问题开始的地方。我想避免复制虚拟数据。有更好的方法吗？

根据这个[线程](https://stackoverflow.com/questions/5029920/how-to-use-2d-arrays-in-cuda)，这不是一个聪明的方法：

```
cudaMalloc(d_array, rows*sizeof(int*));  
for(int i = 0 ; i < rows ; i++)    {  
    cudaMalloc((void **)&d_array[i], length[i] * sizeof(int)); 
} 
```

但我想不出任何其他方法。还有其他更聪明的方法吗？可以使用 cudaMallocPitch 和 cudaMemCpy2D 改进它吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-18T20:33:11.213

在 CUDA 中为 GPU 分配指针数组的正确方法是这样的：

```
int **hd_array, **d_array;
hd_array = (int **)malloc(nrows*sizeof(int*));
cudaMalloc(d_array, nrows*sizeof(int*));  
for(int i = 0 ; i < nrows ; i++)    {  
    cudaMalloc((void **)&hd_array[i], length[i] * sizeof(int)); 
}
cudaMemcpy(d_array, hd_array, nrows*sizeof(int*), cudaMemcpyHostToDevice); 
```

（免责声明：用浏览器编写，从未编译，从未测试，使用风险自负）

这个想法是您首先在*主机*内存中组装设备指针数组的副本，然后将其复制到设备。对于有 1000 行的假设情况，这意味着 1001 次调用`cudaMalloc`，然后 1001 次调用`cudaMemcpy`只是为了设置设备内存分配并将数据复制到设备中。这是一个*巨大的*间接费用惩罚，我建议不要尝试它；表现将非常糟糕。

如果您有*非常*参差不齐的数据并且需要将其存储在设备上，我是否建议您借鉴所有参差不齐的数据问题的根源 - 大型非结构化稀疏矩阵 - 并为您的数据复制其中一种稀疏矩阵格式。使用经典的[压缩稀疏行](http://en.wikipedia.org/wiki/Sparse_matrix#Compressed_sparse_row_.28CSR_or_CRS.29)格式作为模型，您可以执行以下操作：

```
int * data, * rows, * lengths;

cudaMalloc(rows, nrows*sizeof(int));
cudaMalloc(lengths, nrows*sizeof(int));
cudaMalloc(data, N*sizeof(int)); 
```

在此方案中，将所有数据存储在单个线性内存分配`data`中。锯齿状数组的第 i 行从 开始，`data[rows[i]]`每行的长度为`length[i]`。这意味着您只需要三个内存分配和复制操作即可将任意数量的数据传输到设备，而不是`nrows`在您当前的方案中，即。它将开销从 O(N) 减少到 O(1)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-08-09T23:19:20.080

我会将所有数据放入一个数组中。然后用行长度组成另一个数组，使得 A[0] 是第 0 行的长度，依此类推。所以 A[i] = length[i] 那么你只需要在卡上分配 2 个数组并调用 memcopy 两次。
当然这是一些额外的工作，但我认为性能方面会有所改进（当然取决于你如何使用卡上的数据）

# flash - Unity3d 和 Flash 的应用程序性能和统计监控

> ID：12480183
> 
> 赞同：3
> 
> 时间：2012-09-18T15:29:16.907
> 
> 标签：flash, unity3d, performance-testing

我的 Unity3d 和 Flash 应用程序（例如游戏）需要一些性能监视器。它必须从用户的机器上收集统计数据，并给我一些分析，如统计数据和报告生成器功能/

我想获得一些成熟的 MMO 性能监控解决方案，而不是自己构建整个东西。我需要在服务器上收集值，每个构建、每个用户配置和东西都有某种报告。

最终目标是能够记录我的游戏在不同硬件配置下的表现，并能够在进一步构建出现后对其进行跟踪。我希望它对用户不可见，并希望我的问题是我无法猜测正确的关键字组合来搜索它。

希望这能让它更清楚，并提前感谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-19T13:54:52.580

如果您只是在寻找硬件性能，请尝试： [Lumos](http://www.uselumos.com/) 看起来它是由[Unity 社区中的某个人](http://forum.unity3d.com/threads/90905-Lumos-game-analytics)设计的。我对他们的包裹没有直接的经验，所以它可能只会让你部分受益。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-19T01:23:31.957

自动化性能和测试的行业标准是[HP 的 LoadRunner](http://www8.hp.com/ca/en/software-solutions/software.html?compURI=1175451#.UFkoXrXA8eU)。根据您的描述，这听起来像是完美的解决方案，因此我鼓励您看看该产品。但是我必须指出，LoadRunner 的学习曲线和价格都很陡峭。实际上，除非您是一家大型企业，否则可能不值得麻烦。

您可能想查找替代方案，例如[Load Storm](http://loadstorm.com/)、[webload](http://www.radview.com/product/Execution-environment/Load-generation.aspx)等......开发人员使用这些工具通过[“虚拟机自动负载生成器”测试服务器上的负载压力。](http://www.youtube.com/watch?v=HEvSsM40MsI)它们在服务器上生成负载，然后根据允许开发人员进行修改的当前设置收集统计数据。

我以 LoadRunner 为例，只是为了为您指明正确的方向（再次，它的价格太疯狂了……尽管它是一个很好的工具）。最终，您将不得不选择适合您需求的东西，但请确保您进行研究。我真诚地希望这会有所帮助并邀请其他人对此进行扩展...

您可能想看看的另一个工具是[Bench4q](http://forge.ow2.org/projects/jaspte/)。尽管它确实是电子商务工具，但我知道可以对其进行[修改](http://download.forge.objectweb.org/jaspte/Bench4Q-Manual-1.3.0.pdf)以满足您的需求，这意味着。

小心。

# php - 检查用户是否登录到php中的包含文件中

> ID：12480188
> 
> 赞同：0
> 
> 时间：2012-09-18T15:29:35.630
> 
> 标签：php, include, server-side

我有一个代码来检查用户是否登录这是调用 userlog.php 的代码

```
 <?php
if (!isset($_SESSION['idx'])) { 
if (!isset($_COOKIE['idCookie'])) {
$logOptions = '<a href="register.php">Register Account</a>
&nbsp;&nbsp; | &nbsp;&nbsp; 
<a href="login.php">Log In</a>';
echo $logOptions;
}
}
else{//do something } 
```

如果我将此代码原样包含在所有文件中，则此代码可以正常工作。当我将文件放入单独的文件并将其包含到所有文件中时，它没有正确执行。所有文件的else条件都不同，所以我有

```
syntax error, unexpected '}' in index.php on line 43 
```

当我将 else 放在 index.php 文件中并且 if 在 userlog.php 中阻止时，会发生以下错误

```
syntax error, unexpected T_ELSE in index.php on line 9 
```

那么如何使用包含来管理这种情况。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-18T15:34:37.673

您只是缺少正确的打开和关闭大括号。在您给出的代码中，您的 else 块没有编辑。您已经注释掉了那部分代码。我正在引用这条线

```
else{//do something } 
```

创建正确的`if-else`块并包含，应该可以解决这个错误。

`Ctrl`在 Eclipse 之类的 IDE 中，您可以使用++快速`Alt`跳转到匹配的大括号进行`P` 验证。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-18T15:36:57.120

***公司.php***

```
<?php
$loggedIn = FALSE;

if ( !isset($_SESSION['idx']) ) { 
    if ( !isset($_COOKIE['idCookie']) ) {
        $logOptions = '<a href="register.php">Register Account</a>
        &nbsp;&nbsp; | &nbsp;&nbsp; 
        <a href="login.php">Log In</a>';
        echo $logOptions;
    }
} else {
    $loggedIn = TRUE;
}
?> 
```

***索引.php***

```
<?php
require_once('inc.php');

if ( $loggedIn == TRUE ) {
    // do your stuff
}
?> 
```

# mysql - 选择表中具有特定列的相同数据的两行

> ID：12480193
> 
> 赞同：1
> 
> 时间：2012-09-18T15:29:44.060
> 
> 标签：mysql, sql

表（合同）中有一个称为服务位置的列。我必须显示服务位置与表中任何其他行匹配的所有行。

```
 Table Example

 A    B    C
 1    2    3
 3    2    1
 2    5    3 
```

我需要一个查询，其中将根据第二列的比较返回第一行和第二行。我假设我需要使用 HAVING COUNT( `B`) > 1

我想出了这个

```
SELECT  `contract_number` 
FROM  `contracts` 
WHERE  `import_id` =  'fe508764-54a9-41f7-b36e-50ebfd95971b'
GROUP BY  `service_location_id` 
HAVING COUNT(`service_location_id` ) >1 
```

但它不会产生我真正需要的东西。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-18T15:37:40.203

`Having`会这样做，但你需要像这样使用它

```
SELECT  *
FROM    Contracts
        INNER JOIN
        (   SELECT  B
            FROM    Contracts
            GROUP BY B
            HAVING COUNT(*) > 1 -- MORE THAN ONE ROW WITH THE SAME VALUE
        ) dupe
            ON dupe.B = Contracts.B 
```

但是，根据您的索引，您可能会发现自联接性能更好：

```
SELECT  DISTINCT t1.*
FROM    contracts t1
        INNER JOIN contract` t2
            ON t1.B = t2.B
            AND t1.A <> t2.A 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-05-31T08:29:07.263

选择 * 从 `sheet1` 哪里 `C` （

`C` 从 `sheet1` GROUP BY `C` HAVING COUNT( ) >1 ) ORDER `C`BY `C` LIMIT 0 , 5000 中选择

# android - 导入eclipse后Android Api示例应用程序中的编译错误

> ID：12480196
> 
> 赞同：0
> 
> 时间：2012-09-18T15:29:51.777
> 
> 标签：android

我已将 android api 示例应用程序导入 Eclipse。我在导入时遇到编译错误以及在何处使用此 R。Api 级别很好，我看不到 R.class 正在生成。请找出我的问题并帮我解决这个问题。

```
`import com.example.android.apis.R;` 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-18T16:43:54.487

清理项目（去项目->清理）...如果没有解决手动添加库（右键单击项目->属性->搜索'java构建路径）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-05-24T18:33:11.937

我终于调试了为什么这还没有建立。（我让它在较旧的 SDK 中运行。）

在尝试了这里的各种建议无济于事后，我发现该项目缺少 res/values/strings.xml 中的 accessibility_node_provider_instructions 字符串资源。此外，它还需要 PrintBitmap.java 的 android-support-v4.jar 库。

这适用于 Android 4.4.2 (API 19)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-18T15:47:12.913

检查AndroidManifest.xml的manifest标签中的包名是否正确`com.example.android.apis`

如果您已通过创建 api 示例项目。eclipse -> New -> Android Sample Project 你不应该有任何带有包的项目。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-20T14:30:39.783

项目中没有添加jre系统库，添加后问题得到解决。

# php - php语法错误语法错误，意外'['，期望'）'str_replace，PSR-0 Autoloader

> ID：12480199
> 
> 赞同：-1
> 
> 时间：2012-09-18T15:29:55.880
> 
> 标签：php, syntax, str-replace, autoloader, psr-0

我正在涉足 WordPress 插件的“轻量级”PSR-0 AutoLoader，它在我的本地开发服务器上运行良好，但是当我将它推送到 WPEngine 的一个登台服务器时，我得到了这个：

解析错误：语法错误，第 30 行 /nas/wp/www/staging/ahsodesigns/wp-content/plugins/AhSoFunctionality/start.php 中的意外 '['，期待 ')'

这是自动加载器，

```
// lightweight psr-0 autoloader
spl_autoload_register(function ($classname) {
    // make sure we're only loading classes from our directory,
    if (preg_match('/AhSo/',$classname)) {
        $classname = ltrim($classname, "\\");
        preg_match('/^(.+)?([^\\\\]+)$/U', $classname, $match);
        $classname = str_replace("\\", "/", $match[1])
            . str_replace(["\\", "_"], "/", $match[2])
            . ".php";
        include_once $classname;
    }
}); 
```

问题就在这条线上，

```
$classname = str_replace("\\", "/", $match[1])
            . str_replace(["\\", "_"], "/", $match[2])
            . ".php"; 
```

显然它不喜欢括号......我已经尝试了一些快速的事情，比如将连接全部移动到一行。不走运，我猜这可能是某种 php.ini 的东西，或者我在 WPEngine 的 php 配置中不喜欢的流氓行结束字符。该文件是在 phpStorm 中构建的，带有 Unix 行分隔符“\n”。我希望我有更多的时间来处理它，但你知道这是怎么回事。再次感谢堆栈。最好的。资源。曾经。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-18T15:34:13.703

您使用的是 php 5.4 数组表示法，较低的 PHP 版本不支持它。将其更改为

```
$classname = str_replace("\\", "/", $match[1])
        . str_replace(array("\\", "_"), "/", $match[2])
        . ".php"; 
```

# embedded - TI OMAPL137 U-Boot 错误：“未找到以太网。”

> ID：12480206
> 
> 赞同：3
> 
> 时间：2012-09-18T15:30:13.393
> 
> 标签：embedded, ethernet, u-boot, texas-instruments

我正在尝试启动一个 DA830 REV A 板，该板是用未加载 Linux 的 U-Boot 发送给我的。我能够构建 DaVinci Linux 和根文件系统，现在我想使用 tftp 加载 Linux。我启动了开发板，但收到“未找到以太网”的错误消息。以下是董事会的启动内容：

```
SF: Detected W25Q32 with page size 4 KiB, total 4 MiB
In:    serial
Out:   serial
Err:   serial
Net:   Read from EEPROM @ 0x50 failed
Board Net Initialization Failed
No ethernet found.
U-Boot > 
```

我发现一个论坛提示未设置以太网地址，我检查了：

```
U-Boot > env print ethaddr
ethaddr=FF:FF:FF:FF:FF:FF 
```

而且确实没有设置。我尝试使用以下设置它并收到错误：

```
U-Boot > setenv ethaddr 01:02:03:04:05:06
Can't overwrite "ethaddr" 
```

我还尝试使用以下设置它，但它仍然没有设置：

```
U-Boot > env set -f ethaddr 01:02:03:04:05:06
U-Boot > env print ethaddr
ethaddr=FF:FF:FF:FF:FF:FF 
```

我不知道下一步该尝试什么。也许我的交换机配置不正确？？

# android - Android标签设计问题

> ID：12480207
> 
> 赞同：0
> 
> 时间：2012-09-18T15:30:15.067
> 
> 标签：android, android-layout

我在设计 Android 选项卡方面几乎不需要任何帮助。如下图所示，标签看起来很丑而且很宽。我怎样才能使它看起来更薄，因为我只想要一些没有太多空白空间的文本。

![在此处输入图像描述](../Images/eb929b5b9a5bd5359edfa758d7f60656.png)

我的第二个问题显示在下图中，我正在从第一个选项卡的其他活动中加载数据，但它看起来非常变形，如下图所示。在其他活动中，我有 ScrollView。

![在此处输入图像描述](../Images/ebed7433d25006e312041c078de3cdf8.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-18T17:00:33.783

通过这种方法，您可以创建自定义选项卡

创建一个布局来表示 TabIndicator

这是 tab_indicator.xml

```
<?xml version="1.0" encoding="utf-8"?>

<TextView xmlns:android="http://schemas.android.com/apk/res/android"
          android:id="@+id/tv_tabTitle"
              android:layout_width="fill_parent"
              android:layout_height="35dp"
              android:background="@drawable/bg_tab_indicator"
              android:gravity="center"
              android:textSize="15sp"
              android:textColor="@drawable/tv_tab_indicator_title"
              android:text="Tab title"
              /> 
```

这是 bg_tab_indicator.xml 可绘制对象

```
<?xml version="1.0" encoding="utf-8"?>

<selector xmlns:android="http://schemas.android.com/apk/res/android">

    <!-- Unselected tab -->
    <item android:state_focused="false"
          android:state_selected="false"
          android:state_pressed="false"
          android:drawable="@drawable/bg_tab_indicator_unselected"/>

    <!-- Selected tab -->
    <item android:state_focused="false"
          android:state_selected="true"
          android:state_pressed="false"
          android:drawable="@drawable/bg_tab_indicator_selected"/>

    <!-- Pressed tab -->
    <item android:state_pressed="true"
          android:drawable="@drawable/bg_tab_indicator_pressed"/>

    <!-- Selected tab using dial pad -->
    <item android:state_pressed="false"
          android:state_focused="true"
          android:state_selected="true"
          android:drawable="@drawable/bg_tab_indicator_selected"/>

</selector> 
```

现在在你的 TabActivity

```
@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.tab_activity);
    //if you are not using TabActivity then use findViewById(id) to find tabHost
    final TabHost tabHost = getTabHost();
    tabHost.setup();
    //if you are not using TabActivity then use findViewById(id) to find tabWidget
    TabWidget tabWidget = getTabWidget();
    tabWidget.setDividerDrawable(R.drawable.divider_tab);
    addTab("Tab1", tabHost, R.id.tab1);
    addTab("Tab2", tabHost, R.id.tab2);
    addTab("Tab3", tabHost, R.id.tab3);
} 
```

这是 addTab 方法

```
private void addTab(String label, TabHost tabHost, int content){
    TabHost.TabSpec tabSpec = tabHost.newTabSpec(label)
           .setIndicator(indicatorView(label))
           .setContent(content);
    tabHost.addTab(tabSpec);
} 
```

该方法生成indicatorView

```
private View indicatorView(String label){
    View view = layoutInflater.inflate(R.layout.tab_indicator, null);
    TextView textView = (TextView) view;
    textView.setText(label);
    return view;
} 
```

希望对你有帮助

# java - 在 unix 中忽略非 ascii csv 分隔符

> ID：12480213
> 
> 赞同：0
> 
> 时间：2012-09-18T15:30:46.317
> 
> 标签：java, unix, csv, utf-8

我正在尝试从从数据库中检索到的数据创建一个 csv 文件。数据本身包含逗号、管道和任意数量的分隔符。我们选择使用非 ascii 破管符号 ¦ 作为分隔符，这也必须存在于 xml 配置文件和 java 测试文件中。

当我们的 java 文件部署到 unix 时，它抱怨找到了一个无效字符，我猜是因为它在 ascii 文件中找到了一个非 ascii 字符。

所以我们将文件转换为 UTF-8，在 Windows 中，这将 ¦ 字符显示为 � 字符。所以我们从一个 UTF-8 网站复制了破管符号。这现在可以在 windows 和 unix 中编译。但是，在 Windows 中，测试运行良好，但在 unix 中却不行，因为它将 ¦ 解释为 Â¦

谁能建议我应该如何处理这些文件以及它们应该采用什么格式？

我现在能想到的唯一其他解决方案是使用 ascii 字符的组合作为分隔符，我真的不想这样做。

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-18T16:11:20.903

一般的[方法](http://en.wikipedia.org/wiki/Comma-separated_values#Toward_standardization)是引用可能包含分隔符的字段。然后通过使用两个引号来表示嵌入的引号来处理它们。这可能需要比您当前所做的更多的预处理/后处理，但会使您的代码更加健壮（如果数据库字段开始使用嵌入式管道字符会发生什么情况？）。

opencsv[项目](http://opencsv.sourceforge.net/)可以处理这个用例。

# python - 如何使用 SSH 作为子进程来停止阻塞进程

> ID：12480215
> 
> 赞同：1
> 
> 时间：2012-09-18T15:30:50.420
> 
> 标签：python, ssh, subprocess, paramiko

我实际上尝试做的事情：

使用 python 脚本`nc`在远程主机上使用 SSH 启动（netcat）。这个 netcat 应该监听传入的 TCP 连接。可能没有人想连接到远程主机，因此必须终止 netcat 进程。

我的第一个想法是使用`nc`远程主机上进程的 PID 并执行一个简单的`kill [PID]`命令。但是我无法从`nc`远程主机上的进程中获取进程 ID。

到目前为止，我尝试过的是使用`paramiko`and `sshpass`。

我的`paramiko`代码：

```
 import os, sys, paramiko

    ssh = paramiko.SSHClient()
    ssh.set_missing_host_key_policy(paramiko.AutoAddPolicy())

    ssh.connect(host, username=user, password=password)
    stdin, stdout, stderr = ssh.exec_command("nc -l -p"+port+"&")
    print stdout.readlines() 
```

使用`sshpass`：

```
 sshProcess = subprocess.Popen(["sshpass", "-p", password, "ssh", user+"@"+hostaddress, "nc", "-l", "-p", str(destPort),"&"], stdout=subprocess.PIPE, stdin=None)
    print sshProcess.stdout.read() 
```

我在普通的linux终端上尝试了该`sshpass`方法，并返回了netcat进程的pid。但是在 python 脚本中尝试这两种方法得到了相同的结果：整个脚本被阻止而不是返回 PID。如果我不尝试读取输出——这意味着删除`stdout.readlines()`或`sshProcess.stdout.read()`——脚本不会被阻止，但我也没有获得远程主机上 netcat 进程的 PID。

我正在使用 Linux 机器，远程主机也运行 Linux。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-19T09:07:40.240

Remove与 then同步`"&"`执行，然后 kill只是杀死子进程（）。`nc``ssh -t``nc``p.terminate()`

查看[如何在 timeout 时停止读取子进程标准输出](https://stackoverflow.com/a/4418891/4279)。

# c# - c# excel dll - 无法添加对指定文件的引用 - regasm

> ID：12480218
> 
> 赞同：2
> 
> 时间：2012-09-18T15:30:59.423
> 
> 标签：c#, dll, windows-vista, excel-2007, regasm

在另一台计算机上部署和注册 a时，尝试在编辑器中添加对的引用时`.Net` `Excel.dll`出现错误。`Can't add a reference to the specified file``DLL``VBA`

我已经创建了`Excel.dll`在我的机器上运行良好的 in `C#`in和. 在我的计算机上的编辑器中添加对 dll 的引用没有问题。我的问题是部署在另一台正在运行的机器上，并且. 我将dll复制到这台计算机并用于注册dll。`Visual Studio``Windows 7``Office 2010``Excel VBA``Vista``Excel 2007``regasm`

谁能指出我正确的方向？这里是代码和 regasm：

> C:\Windows\Microsoft.NET\Framework\v4.0.30319\regasm.exe excelDll.dll

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;
using System.Windows.Forms;
using System.Runtime.InteropServices;

namespace TestDll
{
[ClassInterface(ClassInterfaceType.AutoDual)]
public class Test
{
    public string HelloWorld
    {
        get
        {
            return "Hello World";
        }
    }

    public void sayGoodbye1()
    {
        MessageBox.Show("Say Goodbye");

    }

    public string sayGoodbye2()
    {
        return "Say Goodbye";
    } 
  }
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-10T11:06:20.087

您需要为 excel 注册类型库才能在 References 中查看您的 dll。

IE`regasm.exe excelDll.dll /tlb:excelDll.tlb`

标记。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2014-07-07T03:17:31.877

我最近遇到并设法解决了这个问题——尽管我不能声称完全理解我的解决方案*为什么*有效。

我的两个系统都运行 Windows 7 x64。一个有 Excel 2010，另一个有 Excel 2007。

所有 C# 程序集都设置为“平台目标：任何 CPU”。主程序集设置为“注册 COM 互操作”。整个东西是使用由 Visual Studio Installer 项目创建的 MSI 安装的。

我发现如果我将 Visual Studio 安装程序项目“目标平台”设置为“x64”，则它在 Excel 2010 中有效，但在 Excel 2007 中无效。相反，如果我将 Visual Studio 安装程序项目“目标平台”设置为“x86” "，它适用于 Excel 2007，但不适用于 Excel 2010。

可悲的是，我无法同时在同一台机器上测试两个 Excel 版本——但至少这可能会让它为你工作！

# vba - Windows 上次从待机或休眠状态恢复是什么时候？

> ID：12480222
> 
> 赞同：1
> 
> 时间：2012-09-18T15:31:07.027
> 
> 标签：vba

VBA 中是否有任何方法（如 api）来确定 Windows 上次从待机状态恢复的时间等？我不是想触发一个事件，只是能够在我需要的时候查找它的时间。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-18T17:18:32.027

考虑到您的要求（不尝试触发事件），我应该告诉您不能这样做。尽管[此链接](http://www.xtremevbtalk.com/showthread.php?t=306116)可能对您有所帮助

编辑：

```
Imports Microsoft.Win32

Public Class Form1

    Private Sub Form1_Load(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles MyBase.Load
        AddHandler SystemEvents.PowerModeChanged, AddressOf mypmc
    End Sub

    Public Sub mypmc(ByVal sender As Object, ByVal e As PowerModeChangedEventArgs)
Dim iFileNum As Integer     'File number for output text file.
strOutputFile = "c:\log.txt"
iFileNum = FreeFile
Open strOutputFile For Output As #iFileNum

        If e.Mode = PowerModes.Suspend Then
          Print #1, "Suspending" &  TimeValue(Now)
        End If
        If e.Mode = PowerModes.Resume Then
             Print #1, "Resuming" &  TimeValue(Now)
        End If
    End Sub
End Class 
```

# .net - 自托管 WCF 服务的视觉反馈

> ID：12480223
> 
> 赞同：3
> 
> 时间：2012-09-18T15:31:08.117
> 
> 标签：.net, wcf, windows-services, self-hosting

我有一个在服务器上托管 WCF 服务的 Windows 服务。我正在使用`InstanceContextMode.PerSession`属性。根据我的要求，服务运行良好。

我现在想为 WCF 服务实现视觉反馈，例如记录器，最好在 Windows 窗体的列表框中。我希望所有客户的所有呼叫和后续操作都记录在此表单中。我读到有一个服务的用户界面不是一个好主意。有人可以指出我以线程安全的方式实现这一目标的方向。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-18T17:16:27.233

我认为最简单的答案就是[**这个**](http://www.i-avington.com/Posts/Post/creating-a-custom-trace-listener-for-wcf)。基本上，您可以做的是为您的 wcf 服务定义一个自定义跟踪侦听器。您可以修改示例以获得所需的结果。

**自定义跟踪实现**如下所示：

```
namespace WcfTrace.Trace
{
    public class WebTraceListener : TraceListener
    {
        public override void Write(string message)
        {
            //write you custom code here
            Debug.WriteLine(message);
        }

        public override void WriteLine(string message)
        {
            //write your custom code here
            Debug.WriteLine(message);
        }
    }
} 
```

**您的服务主机上的**配置必须包括以下内容：****

 **```
<system.diagnostics>
    <sources>
      <source name="System.ServiceModel" switchValue="Information, ActivityTracing" propagateActivity="true">
        <listeners>
          <add name="xml" />
        </listeners>
      </source>
      <source name="System.ServiceModel.MessageLogging">
        <listeners>
          <add name="xml" />
        </listeners>
      </source>
    </sources>
    <sharedListeners>
      <add name="xml" type="WcfTrace.Trace.WebTraceListener,WcfTrace.Trace" />
    </sharedListeners>
  </system.diagnostics>

  <system.serviceModel>
    <diagnostics>
      <messageLogging
      logEntireMessage="true"
      logMalformedMessages="false"
      logMessagesAtServiceLevel="true"
      logMessagesAtTransportLevel="false"
      maxMessagesToLog="300000"
      maxSizeOfMessageToLog="200000"/>
    </diagnostics>
  </system.serviceModel> 
```

我个人喜欢这个想法，独立于客户端的跟踪器类（您提到的带有列表框的应用程序）可以使用来自此自定义跟踪实现的信息，以及将来可以做的任何其他事情。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-18T15:49:13.490

该服务没有 UI，但主机可以。

这只是一个控制台主机，但它显示来自服务的文本。

Service 中的那些 Console.WriteLine 显示在主机中。

```
namespace MagicEightBallServiceHost
{
    class Program
    {
        static void Main(string[] args)
        {
            Console.WriteLine("**** Console Based WCF Host *****");

            using (ServiceHost serviceHost = new ServiceHost(typeof(MagicEightBallService)))
            {
                serviceHost.Open();
                Console.WriteLine("The service is running");
                Console.ReadLine();
            }

[ServiceBehavior (InstanceContextMode=InstanceContextMode.PerSession)]
    public class MagicEightBallService : IEightBall, IDisposable
    {
        private DateTime serviceStartTime;
        public void Dispose()
        {

            Console.WriteLine("Eightball dispose ... " + OperationContext.Current.SessionId.ToString() + " " + serviceStartTime.ToLongTimeString());          
        }
        public MagicEightBallService()
        {
            serviceStartTime = DateTime.Now;
            Console.WriteLine("Eightball awaits your question " + OperationContext.Current.SessionId.ToString() + " " + serviceStartTime.ToLongTimeString());
        }
        public string ObtainAnswerToQuestion(string userQuestion)
        {
            Console.WriteLine("Eightball ObtainsAnser " + OperationContext.Current.SessionId.ToString() + " " + serviceStartTime.ToLongTimeString());
            return "maybe " + OperationContext.Current.SessionId.ToString() + " " + serviceStartTime.ToLongTimeString() ;
        } 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-18T16:57:15.083

您所说的本质上是让您的 Windows 服务中的 WCF 服务在发生“有趣”的事情时向 UI 前端提供事件通知。幸运的是，有一个[Publish-Subscribe Framework](http://www.idesign.net/idesign/DesktopDefault.aspx?tabindex=5&tabid=11#Operations)由[Programming WCF Services](https://rads.stackoverflow.com/amzn/click/com/0596805489)的作者[Juval Lowy](http://www.idesign.net)开发。详细信息在[这篇出色的 MSDN 文章](http://msdn.microsoft.com/en-us/magazine/cc163537.asp)中进行了描述，源代码可在[Lowy 的网站上](http://www.idesign.net/idesign/DesktopDefault.aspx?tabindex=5&tabid=11#Operations)免费获得。

这个框架的巧妙之处在于它将发布者（例如，您的 Windows 服务中的 WCF 服务）与任何订阅者（例如，您的 GUI）分离。发布者“发布”Pub/Sub 服务感兴趣的事件，该服务始终可用。从发布者的角度来看，有没有订阅者并不重要。Pub/Sub 服务负责将事件路由到所有注册的订阅者。这样，您的 Windows 服务中的 WCF 服务会在事件发生时发布事件，您的 GUI 将在加载/退出时订阅/取消订阅 Pub/Sub 服务，并且 Pub/Sub 服务将在事件发生时通知您的 GUI。

我在我的项目中使用了这个设置，它工作得非常好。

***编辑：*** 我理解希望拥有自己的 UI 来显示来自 Windows 服务托管的 WCF 服务的事件。另一种选择是利用可从 Windows 本机事件查看器 (eventvwr.msc) 访问的应用程序日志。如果这种方法可以接受，请查看我[在此处](https://stackoverflow.com/questions/593454/easiest-language-for-creating-a-windows-service/593803#593803)的说明，了解如何从您的 Windows 服务进行设置。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-18T18:00:50.053

[使用log4net](http://logging.apache.org/log4net/)之类的东西来记录您要显示的代表感兴趣的 Web 服务活动的信息。通过使用 log4net，您只需更改配置文件即可过滤记录的信息类型。您还可以通过登录配置文件来更改信息的位置和方式。您可以为 log4net 配置的附加程序之一是[SysLogAppender](https://stackoverflow.com/questions/2011768/log4net-syslog-appender-example)。这会将日志信息发送到远程[SysLog 服务器](http://en.wikipedia.org/wiki/Syslog)（它也可以与 Web 服务一起部署）。有许多 SysLog 服务器可用，例如[Kiwi](http://www.solarwinds.com/products/kiwi_syslog_server/)这将提供日志事件的滚动显示，并提供对某些事件的过滤器和操作（例如：发生错误时向管理员发送电子邮件）。还有可用的[开源 SysLog 服务器](http://sourceforge.net/projects/syslog-server/)。这有效地将日志信息的查看和处理与实际日志记录分离。**

# javascript - 放入字段的文本会产生奇怪的字符

> ID：12480224
> 
> 赞同：0
> 
> 时间：2012-09-18T15:31:08.100
> 
> 标签：javascript, html, razor

我有一个 JavaScript 函数，因此我将一些文本放入其中

```
@{
   var price = @HttpUtility.UrlDecode(Request.QueryString["MaxBudget"]);
   <script type="text/javascript">
      PopulateFormInput('SearchMaxBudget', '@price', 'modal-search-budget-box');
   </script>
} 
```

现在，MaxBudget 是“100-199 英镑”，但由于某种原因，当我执行这段代码时，我在文本框中得到了这个。

![在此处输入图像描述](../Images/c11cc62b664ab5af8befce50f94aedb7.png)

我已经检查了调试器，传递给 PopulateFormInput 的值是“100 英镑-199 英镑”，并将这个值静态地传递到另一个地方（即传递硬编码文本“100 英镑-199 英镑”）可以正常工作。为什么会失败？

谢谢，

萨钦

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-18T16:14:18.267

这是解决方案，适合任何有兴趣的人

```
@{
                    <script type="text/javascript">
                        PopulateFormInput('SearchMaxBudget', getParameterByName('MaxBudget'), 'modal-search-budget-box');

                        function getParameterByName(name) {
                            name = name.replace(/[\[]/, "\\\[").replace(/[\]]/, "\\\]");
                            var regexS = "[\\?&]" + name + "=([^&#]*)";
                            var regex = new RegExp(regexS);
                            var results = regex.exec(window.location.search);
                            if (results == null)
                                return "";
                            else
                                return decodeURIComponent(results[1].replace(/\+/g, " "));
                        }
                    </script>
                } 
```

# jquery - Jquery 不会通过 .change 触发

> ID：12480225
> 
> 赞同：0
> 
> 时间：2012-09-18T15:31:09.240
> 
> 标签：jquery, json

我得到以下 jquery 代码：

```
$('.sub').change(function(event) {
$.post( 'get_products.php', $("#products_search").serialize(),
  function( data ) {
      console.log(data);
  },
  'json'
);
}); 
```

并有像

```
<input type="text" name="lkj" id="lkj" class="sub" value="" onfocus="if(this.value == 'Search keyword') {this.value=''}" onblur="if(this.value == ''){this.value ='Search keyword'}"  /> 
```

表格是这样的：

```
<form action="#" method="POST" name="products_search" id="products_search"> 
```

但是，当我更改 lkj 中的值时，jquery ajax 调用不会触发。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-18T15:34:05.603

对于 type=text 输入字段，不会立即触发 change 事件。当字段失去焦点时触发。如果用户从不跳出或在输入字段之外单击，则永远不会触发更改。

这与复选框和单选按钮不同，它们会立即触发更改事件

在将任何事件侦听器绑定到它之前，输入也必须存在于 DOM 中。如果它是动态注入的，那么你可以使用

```
$('body').on('change', '.sub', function() {
  // your code goes here
}); 
```

此外，为了确保您的代码在 DOM 加载后被调用

```
$(document).ready(function() {

}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-18T15:46:16.347

尝试将此示例与`on('change')`事件绑定一起使用：

```
<form action="#" method="POST" name="products_search" id="products_search">
    <input type="text" name="lkj" class="sub" placeholder="Search keyword"  />
</form>​
<script type="text/javascript">
$(function(){
    $('.sub').on('change', function(event){
        $.post( 
            'get_products.php', 
            $("#products_search").serialize(),
            function( data ) {
              console.log(data);
            },
            'json'
        );          
    });​
});
</script> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-18T15:48:30.993

尝试使用超时的键控：

```
$('.sub').keyup(function(event) {

    if( $(this).timeout ) clearTimeout( $(this).timeout );

    $(this).timeout = setTimeout(function(){

        alert('posting...');

        $.post( 'get_products.php', $("#products_search").serialize(),
            function( data ) {
                console.log(data);
            }, 'json'
        );

    },250);

}); 
```

确保将其包裹在`$(function() { ... })`;

# .net - 为什么 Visual Studio 设计器要实例化控件的基类？

> ID：12480230
> 
> 赞同：2
> 
> 时间：2012-09-18T15:31:25.107
> 
> 标签：.net, visual-studio, instantiation, windows-forms-designer

我有一个表单，它基于我拥有的另一种标准表单（支持透明度的表单），它在运行时通过自己的类型标识自己。然而，在设计器中，我设置了一些消息框输出，它们在设计时显示它在设计器控件堆栈的顶部标识为父类型。

示例代码

```
Public Class SpecificForm
    Inherits GenericForm
    Implements IUsefulInterface
    ...
End Class

Public Class GenericForm
    Inherits System.Windows.Forms.Form
    ...
End Class 
```

我在表单上有控件，可以让他们的父母知道如何正确绘制。在运行时它可以正常工作，因为特定类型实现了一个携带绘图信息的接口。骑自行车穿过父母产量

```
"Control1" As System.Windows.Forms.Control, parented by
"MainForm1" As SpecificForm, parented by
Nothing 
```

作为设计时间，尽管在父母之间循环会产生

```
"Control1" As System.Windows.Forms.Control, parented by
"MainForm1" As GenericForm, parented by
"" As System.Windows.Forms.Design.DesignerFrame+OverlayControl, parented by
"" As System.Windows.Forms.Design.DesignerFrame, parented by
"" As System.Windows.Forms.Control, parented by
Nothing 
```

在运行时 MainForm 标识为 SpecificForm 类型，在设计时由设计器托管是可以理解的，但它现在标识为 GenericType。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-19T17:29:25.187

我尊重你提出这个问题的事实。但是，不要误会我的意思，这个问题有点天真。您观察到了大多数人没有观察到的现象（恭喜您作为 WinForms 程序员已接近成熟！--我是认真的，而不是讽刺的......）

现在，我说你的问题有点幼稚，因为这就像在问“为什么圆这么圆？”。下一个解释可能听起来有点多余，但它是唯一的一个：

在`SpecificForm`设`SpecificForm`_ **_** `GenericForm` _运行时上下文。）

我再说一遍， 的设计者`SpecificForm`没有`SpecificForm`“正在运行”的实例，而是`GenericForm`. 设计器中不`SpecificForm`存在实例，**因为**，好吧..**您正在设计它！**

我使用这个确切的解释来指导另一个用户理解他所看到的内容： [https](https://stackoverflow.com/a/12499053/1426433) ://stackoverflow.com/a/12499053/1426433 。但是你自己注意到了。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-19T17:58:07.020

此外，为了进一步记录您所看到的内容，您可以进行以下实验：

创建一个简单的`UserControl`调用`FooUserControl`，它将用于显示一个带有创建位置的堆栈跟踪的消息框：

```
using System;
using System.Windows.Forms;

namespace Test {
    public partial class FooUserControl : UserControl {
        public FooUserControl() {
            InitializeComponent();
            MessageBox.Show(Environment.StackTrace);
        }
    }
} 
```

构建您的项目，然后打开您的任何表单设计器，例如，打开一个名为的表单的设计器`FooForm`（它可能是您的设计`SpecificForm`器或您正在创作的任何其他控件。）您将其拖放`FooUserControl`到设计器的那一刻表面您会看到一个消息框，上面写着类似的内容；

![在此处输入图像描述](../Images/08e526c2fc61e00b65f82e13571cf9b2.png)

每次重新打开此设计器时，您都会看到如下内容：

![在此处输入图像描述](../Images/7b31880d782edbc748d32dfe574ea48d.png)

然而，每次“运行”应用程序时，您都会看到如下内容：

![在此处输入图像描述](../Images/d0dc0183e5cf6532301faa834b4f931c.png)

这就是说，**Windows 窗体设计器甚至没有执行任何名为`FooForm.InitializeComponent()`**. 该方法**仅在运行时**执行，因为它仅在运行时执行正在设计的控件的构造函数，然后调用`FooForm.InitializeComponent()`.

信不信由你，设计师所做的实际上是逐句解析 FooForm.Designer.cs 文件中的行（可能使用 CodeDOM）。

希望这些解释有所帮助。

# javascript - 使用时间更新脚本时 Safari 出现 Nan 错误

> ID：12480232
> 
> 赞同：0
> 
> 时间：2012-09-18T15:31:31.047
> 
> 标签：javascript, mobile-safari, nan

我试图使用发布[在这里](https://stackoverflow.com/questions/7280795/any-jquery-plugin-which-automatic-update-time-for-all-the-posts-of-a-page)的发布时间更新脚本。它工作得很好，除了在 Mobile Safari 上它会产生 NAN 错误。我试图打印出每个变量以查看 NAN 的来源，但没有骰子。如果有人可以帮助我找出错误是在哪里产生的，我应该能够找到解决办法。或者甚至帮助我弄清楚如何最好地找到错误的来源。实际代码如下。

```
<script src="js/jquery-1.6.3.min.js"></script>
<script>
$(document).ready(function(){   
$.fn.UpdateSince = function(interval) {

var times = this.map(function(){ return { e: $(this), t: parseInt($(this).html()) }; });
var format = function(t) {
    if (t > 60) {
        return Math.floor(t / 60) + ' minutes ago'
    } else {
        return t + ' seconds ago';
    }
}

var update = function(){
    var now = new Date().getTime();
    $.each(times, function(i, o){
        o.e.html(format(Math.round((now - o.t) / 1000)));
    });
};            
window.setInterval(update, interval);
update();

return this;
}
}); 
</script>
<script>
$(document).ready(function(){   
$('.TimeSince').UpdateSince(1000);
}); 
</script> 
```

编辑：Mobile Safari 调试控制台没有显示错误，但所有输出整数都是 NaN。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-18T16:12:53.920

我的猜测是它在这里：

```
var times = this.map(function(){ return { e: $(this), t: parseInt($(this).html()) }; }); 
```

如果`$(this).html()`为空，它将失败。

# javascript - 折叠响应设计的水平菜单

> ID：12480240
> 
> 赞同：5
> 
> 时间：2012-09-18T15:32:13.940
> 
> 标签：javascript, css, user-interface, drop-down-menu, responsive-design

我有一个看起来像这样的菜单：

```
|Home|Options|Settings|Tools|Preferences|Edit| 
```

当手机有很多水平空间时这很好，但是当具有狭窄视口的设备访问页面时，我希望菜单看起来像

```
|Home|Options|Settings|+MORE+| 
```

单击“更多”菜单会在垂直下拉菜单中显示其他项目。

我不想设置手动断点，因为我不知道各个菜单项在显示时的宽度。

我的菜单目前只是一`<li>`组`<ul>`

水平布局的 CSS 是

```
#menu ul, #menu li { margin: 0; padding: 0; list-style: none; }
#menu ul { overflow: auto; }
#menu li { float: left; }
#menu  a { display: block; padding: 0.5em; text-decoration: none; border-right: 1px solid #fff; font-size: 110%; } 
```

我不愿意使用像 jQuery 这样的东西——即使最小化，它对于旧的移动浏览器来说仍然是一个很大的开销。媒体查询对于某些手机也有问题，所以我想避免依赖这些。

关于 CSS 和（简单）JavaScript 根据浏览器的宽度自动隐藏元素的任何想法？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-18T16:16:55.147

实际上，您可以完全不使用 JavaScript，只需使用[**媒体查询**](https://developer.mozilla.org/en-US/docs/CSS/Media_queries)（它确实[*具有出色的支持*](http://caniuse.com/#feat=css-mediaqueries)+ 我提出的这个解决方案是移动设备的第一个）和[**`:nth-last-child`**](https://developer.mozilla.org/en-US/docs/CSS/:nth-last-child)（Opera Mini 甚至再次[支持](http://caniuse.com/#feat=css-sel3)）。

# [演示](http://dabblet.com/gist/3744065)

（调整大小以查看其工作原理）

你需要有这样的结构：

```
<nav id='menu'>
    <ul>
        <li><a href='#'>Home</a></li>
        <li><a href='#'>Options</a></li>
        <li><a href='#'>Settings</a></li>
        <li><a href='#'>Tools</a></li>
        <li><a href='#'>Preferences</a></li>
        <li><a href='#'>Edit</a></li>
        <li><a href='#'>+ MORE +</a></li>
    </ul>
</nav> 
```

然后你需要选择**Tools**、**Preferences**和**Edit**并将它们设置`display`为`none`：

```
#menu li:nth-last-child(-n+4):not(:last-child) { display: none; } 
```

`li:nth-last-child(-n+4)`仅选择最后的前四个列表项。您添加`:not(:last-child)`条件是因为您希望显示**+ MORE +**列表项。

为了更好地理解结构化伪类，您可以使用[**这个工具**](http://lea.verou.me/demos/nth.html)。

最后，您需要使用媒体查询来更改大屏幕的显示设置：

```
@media (min-width: 30em) {
    #menu li:nth-last-child(-n+4):not(:last-child) { display: block; }
    #menu li:last-child { display: none; }
} 
```

我使用`em`基于媒体查询而不是基于媒体查询的`px`原因有两个：

*   一、[**本文**](http://blog.cloudfour.com/the-ems-have-it-proportional-media-queries-ftw/)；
*   二，我自己的网站在缩放上看起来像垃圾，因为我`px`在一年前使用了基于媒体的查询；

* * *

**编辑**：为了使菜单在单击时展开并使显示的菜单元素的数量随屏幕宽度而变化，我对结构进行了更多更改：

```
<nav id='menu'>
    <a tabindex=1 class='ctrl' href='#'>+ MORE +</a>
    <ul>
        <li><a href='#' class='menu-link'>Home</a></li>
        <li><a href='#' class='menu-link'>Options</a></li>
        <li><a href='#' class='menu-link'>Settings</a></li>
        <li><a href='#' class='menu-link'>Tools</a></li>
        <li><a href='#' class='menu-link'>Preferences</a></li>
        <li><a href='#' class='menu-link'>Edit</a></li>
    </ul>
</nav> 
```

并且还稍微更改了 CSS：

```
#menu .ctrl { float: right; }
#menu ul, #menu li { margin: 0; padding: 0; list-style: none; }
#menu ul { overflow: auto; }
#menu li { float: left; }
#menu li:nth-last-child(-n+5) { display: none; }
#menu a {
    padding: 0.5em;
    text-decoration: none;
    border-right: 1px solid #fff;
    font-size: 110%;
}
#menu li a { display: block; }
#menu li:first-child a { border-left: 1px solid #fff; }
#menu .ctrl:focus, #menu .ctrl:active { display: none; outline: 0; }
#menu .ctrl:focus ~ ul li, #menu .ctrl:active ~ ul li { display: block; }

@media (min-width: 15em) {
    #menu li:nth-child(2) { display: block; }
}
@media (min-width: 20em) {
    #menu li:nth-child(3) { display: block; }
}
@media (min-width: 25em) {
    #menu li:nth-child(4) { display: block; }
}
@media (min-width: 30em) {
    #menu .ctrl ~ ul li { display: block; }
    #menu .ctrl { display: none; }
} 
```

# [**演示**](http://dabblet.com/gist/3748950)

（我还在每 5em 处添加了一个带有垂直线的背景，以便在调整浏览器窗口大小时清楚地显示屏幕的宽度）

此方法应该在没有 JavaScript 的情况下工作 - 在桌面浏览器、Opera Mobile、Android 浏览器和 iOS Safari 中进行了测试。不过，我不知道 Opera Mini - 我必须对其进行测试。

**编辑#2**：不，它在 Opera Mini 中对我不起作用（菜单已折叠，但单击**+ MORE +**链接不会展开它）。试图让它与 JavaScript（无库）一起使用，但这在 Opera Mini 中也不起作用（尽管它适用于桌面浏览器）。

**编辑#3**：也尝试使用 jQuery 做同样的事情。这次它也适用于 Opera Mini。真的很慢（至少对我来说），但它确实有效。这是我使用的：

```
$('.ctrl').click(function() {
    $(this).css({'display': 'none'}).next().children().css({'display': 'block'});
}); 
```

* * *

**EDIT#4**：现在尝试了该`:target`方法 -[**演示**](http://dabblet.com/gist/3749419)（也仅限 CSS）。在我使用 Chrome 的笔记本电脑上工作正常（尚未在其他桌面浏览器中测试），在 Opera Mini 中不起作用（菜单已折叠，单击**+ MORE +**链接不会展开它）。不过可以在 Opera Mobile 中使用。

# iis-7.5 - 在 IIS 7.5 上部署 asp.net 4.5 应用程序

> ID：12480243
> 
> 赞同：-1
> 
> 时间：2012-09-18T15:32:19.287
> 
> 标签：iis-7.5, asp.net-4.5

我有一个简单的 asp.net 4.5 应用程序。我试图在 IIS 7.5（win server 2008 R2）上部署它，但它似乎不起作用。

我想知道是否可以在 IIS 7.5 上部署它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-19T07:16:11.493

谢谢@GrandMasterFlush，@Michael。我试图在其上部署项目的机器上没有安装 .net framework 4.5。在我要求管理员安装 .net framework 4.5 后，它运行良好。

# javascript - 检测添加到视频元素的属性并对其进行操作

> ID：12480247
> 
> 赞同：0
> 
> 时间：2012-09-18T15:32:43.657
> 
> 标签：javascript, jquery, html5-video

我需要在内容加载后监听添加到**视频标签的****controls="controls"属性，即通过用户操作 DOM。**

 **这样做的原因是因为我有一组自定义控件，并且不希望人们重新添加默认控件值。

我尝试了几件事：

```
$(document).ready(function(){
    $('#vidplayer').live(function(){
        var attr = $(this).attr('controls');
        if(attr)
        {
            $(this).removeAttr('controls');
        }
    });
}); 
```

和

```
$(document).ready(function(){
    $('#vidplayer').change(function(){
        var attr = $(this).attr('controls');
        if(attr)
        {
            $(this).removeAttr('controls');
        }
    });
}); 
```

我对事件监听做了很多研究，但我很难理解它，我希望这里的人有知识可以提供帮助！

视频标签的 ID 是**#vidplayer**

除此之外，如果有人知道一起禁用控件或禁用全屏模式的方法，那么这**同样**有用！

希望我已经完全解释了自己。

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-18T16:41:50.810

如果您不想诉诸轮询机制（带有定期检查的 setInterval），则必须使用已弃用的[突变事件](https://developer.mozilla.org/en-US/docs/DOM/Mutation_events)（DOMAttrModified），因为它们会杀死浏览器性能或大多数浏览器中尚未实现的[突变观察者](http://hacks.mozilla.org/2012/05/dom-mutationobserver-reacting-to-dom-changes-without-killing-browser-performance/).

我不能在这里测试它，因为我的浏览器（chrome）还没有实现它们。但事情应该是这样的：

```
// select the target node
var target = document.getElementById('videoelement');

// create an observer instance
var observer = new MutationObserver(function(mutations) {
    $(target).removeAttr('controls');
});

// configuration of the observer:
var config = { attributes: true, childList: false, characterData:   false }

// pass in the target node, as well as the observer options
observer.observe(target, config); 
```**

# html - 如何使用css使页脚粘在屏幕底部

> ID：12480248
> 
> 赞同：1
> 
> 时间：2012-09-18T15:32:42.797
> 
> 标签：html, css, cordova

我正在制作一个 phonegap 应用程序。我正在尝试在页脚中创建一个选项卡，并希望将其粘贴在屏幕底部，因此当用户向下滚动时，它应该保持在那里并始终可见。我当前的代码确实在底部显示标签导航，但是当我滚动时，标签也会上下滚动。请帮助我如何解决它。

这是我的代码

```
<header>
    header
</header>
<section class="contents">
</section>
<footer>
    <ul class="nav">
        <li><a href="#">Home</a></li>
        <li><a href="#">Profile</a></li>
        <li><a href="#">Photo</a></li>
    </ul>
</footer> 
```

这是我的CSS

```
footer {
  position: fixed;
  bottom: 0;
  width: 100%;
  border: 1px solid red; }
  footer .nav {
    list-style-type: none;
    margin: 0;
    padding: 0;
    width: 100%; }
      footer .nav li {
      display: inline-block;
      margin-right: -0.2em;
      height: 20%;
      padding: 5% 10.7%;
      background: #ccc; }
         footer .nav li a {
         width: 100%;
         height: 100%;
         text-decoration: none; } 
```

# java - 将枚举实例引用为该类型的另一个实例的字段是否合法？

> ID：12480249
> 
> 赞同：0
> 
> 时间：2012-09-18T15:32:47.633
> 
> 标签：java, enums, static-members

```
enum Day{SAT,SUN,MON,TUE,WED,THURS,FRI}

class Plan{
    Day d;

    public plan(Day d)
    {
        this.d=d;
    }

    Day getDay()
    {
        return d;
    }
}

class tester{
    public static void main(String[] args){
        Plan p=new Plan(Day.SAT);

        Day e=p.getDay();

        System.out.println(e.MON);
    }
} 
```

在 main 函数`e`中用 初始化了`Day.SAT`，但是为什么`e.MON`没有报错呢？初始化它有意义吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-18T15:39:03.933

枚举值几乎是“唯一”`static final`字段。在 Java 中，您可以通过引用访问静态字段。但是，您*不应该这样*做，因为它令人困惑。

本质上，这两行做同样的事情（假设在`Day e`它们上面的某个地方有一个定义）：

```
System.out.println(Day.MON); // sane, normal way
System.out.println(e.MON); // supported, but discouraged way. 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-18T15:40:45.930

e.MON 是“喜欢”通过该类的实例变量访问该类的静态成员，因此不会显示错误。

# css - CSS相邻选择器递归？

> ID：12480252
> 
> 赞同：1
> 
> 时间：2012-09-18T15:32:55.687
> 
> 标签：css

我想在一张图像上放置几行文本，它们之间的间隔相等。

我认为使用相邻的选择器是这样的：

```
.text-box + .text-box{
    margin-top:40px;
} 
```

会在每个连续元素之间引入 40 px 的间隔`text-box`，但我发现它只适用于第二个和第一个元素之间，因此第三个元素放置在与第二个元素相同的位置，即与第一个元素有 40px 的边距元素，而我期望第二个元素的边距为 40px，因此距第一个元素的边距为 40+40px。

有可能这样做吗？

这是我的代码：CSS：

```
.text-box{
    z-index:100;
    position:absolute;
    right: 600px;
    background-color:#404042;
    color:#ffffff;
    padding:6px 10px;
}

.text-box + .text-box {
    margin:40px 0px;
} 
```

HTML：

```
<div class="container">
    <div id="logo"><img src="images/image.jpg"></div>
    <div class="text-box">some text</div>
    <div class="text-box">some other text</div>
     <div class="text-box">some other text</div>
 </div> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-18T15:39:17.693

问题在于你的绝对定位。删除它，可以应用边距。

演示图像上的文本（这似乎是意图）：http: [//jsfiddle.net/EqXYA/1/](http://jsfiddle.net/EqXYA/1/)

# objective-c - if 语句出错 -xcode

> ID：12480258
> 
> 赞同：1
> 
> 时间：2012-09-18T15:33:31.060
> 
> 标签：objective-c, c, if-statement

伙计们，我做错了什么？

```
if (numberstring.intValue <=15) {
    rankLabel.text = @"A1";
}
else if (numberstring.intValue >16 && <=40){       
    rankLabel.text = @"A2";
} 
```

我在“<=40”上收到错误..

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-18T15:36:48.113

你错过了一个变量引用：

```
if (numberstring.intValue <=15) {
    rankLabel.text = @"A1";
}                                  //        vv here vv
else if (numberstring.intValue >16 && numberstring.intValue <= 40){       
    rankLabel.text = @"A2";
} 
```

作为一个可选的附加项，它看起来像是`numberstring`一个`NSString`对象，您反复将其转换为整数以测试各种范围。该操作非常昂贵，因此最好进行一次转换：

```
int value = [numberstring intValue];
if (value <=15) {
    rankLabel.text = @"A1";
}
else if (value >16 && value <= 40){       
    rankLabel.text = @"A2";
} 
```

另请注意，该`intValue`方法不是属性，因此我将避免使用 Objective-C 2.0 点语法来访问它并使用正常的方法调用机制。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-18T15:45:41.683

运算符将`&&`两个子句链接在一起。但是，每个子句都是独立的，因此如果删除另一个子句，则每个子句都必须在语法上正确。如果将此规则应用于您的条件，您会发现`"<=40"`它本身在语法上是不正确的。因此，您需要引用正在比较的值，如下所示：

```
if (numberstring.intValue > 16 &&
    numberstring.intValue <= 40)    // this is syntactically correct on its own 
```

# linux - 颠覆升级 1.6 -> 1.7 挂钩基础设施不兼容

> ID：12480261
> 
> 赞同：0
> 
> 时间：2012-09-18T15:33:49.583
> 
> 标签：linux, svn, hook, upgrade, svn-hooks

我打算将我公司的 subversion 服务器从 1.6 升级到 1.7。服务器在 linux (Ubuntu AFAIK) 上运行。

我已经阅读了所有这些：

[Subversion 1.7 发行说明](http://subversion.apache.org/docs/release-notes/1.7.html)

我也读过这些帖子：

[subversion-client-version-confusion](https://stackoverflow.com/questions/7893396/subversion-client-version-confusion)
[如何升级-svn-server-from-1-6-to-1-7](https://stackoverflow.com/questions/8565096/how-to-upgrade-svn-server-from-1-6-to-1-7)

此时此地，我知道如何执行此操作。没什么大不了的。我最关心的是当前的 hooks 基础设施。bash 和 perl 中有几个脚本。

就目前而言，我没有发现任何有关挂钩基础设施更改的信息，但也许我错过了一些已知问题？我应该知道有什么反对升级的吗？

PS：`Try and see what comes`方法绝对不可用。我希望升级尽可能流畅。存储库用户甚至不应该注意到任何更改。在这件事上我不能让自己失败。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-18T15:53:56.797

> 试试看什么方法是绝对不可用的...

是的，可以使用 try and see what come 方法。您构建您的 Subversion 1.6 环境的副本，对 Subversion 1.7 进行更改，并测试直到一切正确。

除非您复制和测试，否则我看不出如何实现安静升级的目标。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-18T21:19:58.740

Subversion 兼容性保证你的钩子脚本在 1.6 和 1.7 中的调用完全相同。在 1.7（和未来版本）中，可以将更多参数传递给脚本，但旧参数仍然与旧行为匹配。因此，如果您像模板一样创建脚本，忽略“额外”参数，您应该不会看到差异。

Subversion 1.7 自 1.6 以来没有更改存储库格式，因此您甚至可以（意外地）在升级后使用 1.6 中的 svnlook 访问存储库。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-19T00:46:01.293

我想这取决于你用钩子做什么......

如果你的钩子正在使用`svnlook`，你应该没有问题。如果您使用的是 API（如 Python API），那么只要您在做某种`svnlook`类型的事情，您可能也可以。

如果你在不应该戳和戳的地方戳和戳，你可能会开始遇到问题。例如`svnlook`，你不做，而是做`svn`。有几个地方的参数发生了变化。另外，如果你做了一个 svn checkout（一个绝对禁止的钩子）然后查看`.svn`目录，你会得到一个惊喜。遵守规则，线条上的颜色，你的钩子不会有任何问题。

我不知道从 Revision 1.1 到 Revision 1.7 的任何问题会影响行为良好的 hooks，而且我怀疑只要我们还在 Subversion 1.x 中你就不会遇到任何问题。当 Subversion 2.x 出来时，所有的赌注都没有了。

是的，钩子的工作方式发生了一些变化。start-commit 钩子有一个 1.4 及更早版本中没有的额外字段（功能字段），但不会影响当前钩子。而且，在 Subversion 1.5 或 1.6 中，用户现在可以在提交时设置修订属性。这些不会影响当前的挂钩，但可能是您想要合并到当前挂钩中的功能。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-24T01:36:01.657

升级已执行并成功。**Subversion 服务器已更新，没有问题。**挂钩的设计没有任何黑客或斜线，尊重规则和常识。这是有风险的，但很有前途，而且是有利可图的（现在结账速度很快）。

只是为了完整起见：有一个连续的集中管理客户端升级。并且存在一些问题，但不是关键和可预测的。转换 svn 客户端 1.6 -> 1.7.7 工作副本格式更改后。每个现有的工作副本都必须手动升级（或清除并再次检查干净）。

服务器升级是安全的。

# design-patterns - 依赖注入将依赖传递给其他具体类型

> ID：12480264
> 
> 赞同：2
> 
> 时间：2012-09-18T15:33:51.173
> 
> 标签：design-patterns, dependency-injection, constructor-injection

我确信这没什么大不了的，应用程序也不大，但我正在尝试在任何我可以的地方练习 DI，以获得经验。我有以下类，它所做的只是解析用户在控制台应用程序中输入的一些参数，并根据传入的参数返回一个 ICommand 实例。在控制台应用程序中使用命令的设计取自 Mark Seeman 的书 Dependency Injection 。网。我的问题是 ICommand 类的一个实现需要一个 IDocumentService 实例。现在为了确保我可以满足对 ICommand 的依赖，我正在使用构造函数注入将 IDocumentService 传递给 Parser。这对我来说似乎很奇怪，因为我认为如果一个类具有依赖项，它应该使用该依赖项，而不仅仅是将其传递给依赖项。同时，我认为如果我构建一个抽象的 IDocumentServiceFactory 以便 Parser 类可以在文档根之后解析 IDocumentService，那将是矫枉过正。感谢任何解决此设计问题的指导。

```
public class GasTranParser
{
    private readonly IArchiveService service;
    public GasTranParser(IArchiveService service)
    {
        if(service == null)
            throw new ArgumentNullException("service");
    }

    ICommand Parse(IEnumerable<string> args)
    {
        if (args == null || args.Count() != 1)
            return new HelpCmd();

        List<string> argsList = args.ToList();

        return new GasTranComposerCmd(service, argsList[0]);
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-20T21:59:59.560

一般来说，我认为传递依赖项没有任何问题，但在您的特定示例中，您似乎希望将 ICommandFactory 传递给您的 GasTranParser，并让具体的 CommandFactory 使用适当的服务创建 GasTranComposerCmd 实例：

```
public class GasTranParser
{
    private readonly ICommandFactory command_factory;

    public GasTranParser(ICommandFactory command_factory) { ... }    

    ICommand Parse(IEnumerable<string> args)
    {
        if (args == null || args.Count() != 1)
            return new HelpCmd();

        List<string> argsList = args.ToList();

        return command_factory(argList[0]);
    }
} 
```

# php - ImageMapster php从数据库保存和恢复

> ID：12480271
> 
> 赞同：0
> 
> 时间：2012-09-18T15:34:12.063
> 
> 标签：php, mysql, save, restore, imagemapster

有没有一种快速的方法来选择 ImageMapster 地图的状态并保存到数据库，然后检索它并显示保存的地图。

例如：我想将几个状态编码为红色和一些绿色（我现在正在工作），然后使用 jQuery ajax 保存在数据库中。然后稍后返回地图并从数据库中恢复选定的颜色。

我只需要知道如何获取 (key, fillColor) 并恢复它，我就可以处理 php 和 mysql 的东西。

目前我使用：

key = $('#mapimg').mapster('get');

获取所有键，但我还需要填充颜色。

谢谢，罗伯特坎贝尔

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-18T16:23:10.483

目前没有直接的方法可以查询 ImageMapster 中特定区域的活动渲染选项。据推测，您在某个时候分配了它们，所以我会在插件之外跟踪它们。例如，抽象您用来分配红色或蓝色状态的代码。

```
var stateData = {}, image = $('#my-image')

// color: the color to render the area
// selected: true or false

function setState(selected, key, color) {
    stateData[key] = fillColor;
    image.mapster('set',selected,key, {fillColor: color } );
} 
```

然后使用该功能选择/取消选择区域，而不是直接调用 mapster。现在当你去保存数据时，你可以从你的参考中查找颜色：

```
var activeKeys = image.mapster('get');   // returns a comma-separated list
var activeStates = [];
for(var key in activeKeys.split(',')) {
   activeStates.push({
      state: key,
      color: stateData[key]
   });
}

// now activeStates is an array of objects, one for each selected area, 
// containing the area key and the color. Save this info to your db. 
```

.. 或类似的东西。

# jquery - /statuses/user_timeline 仍然可以通过 JavaScript 读取吗？

> ID：12480274
> 
> 赞同：6
> 
> 时间：2012-09-18T15:34:17.787
> 
> 标签：jquery, twitter, twitter-oauth

我之前使用过一些 jQuery 来阅读 twitter 上的推文：

```
$.ajax('https://api.twitter.com/1/statuses/user_timeline.json', {
    crossDomain: true,
    data: {
        screen_name: 'twitterapi',
        count: 5
    },
    dataType: 'jsonp'
}).done(function (tweets) {
    console.log(tweets);
}); 
```

由于 twitter 正在弃用他们的 1.0 API，并要求 1.1 API 使用 OAuth，我一直在试图弄清楚是否仍然可以以相同的方式获取推文数据。

只需将网址更改为：

```
https://api.twitter.com/1.1/statuses/user_timeline.json 
```

结果是`400 Bad Request`没有消息的响应。

我知道有一个 twitter 工具可以为请求创建 OAuth 签名，但我不确定如何将它与 JSONP 请求一起使用，或者即使*它*可以与 JSONP 请求一起使用。

Twitter 1.1 API 中是否仍然可以读取用户的时间线？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-18T16:33:08.957

如果您查看 Twitter 的[错误代码和响应](https://dev.twitter.com/docs/error-codes-responses)，状态代码`400`意味着：

> 请求无效。随附的错误消息将解释原因。这是 1.0 版本限速期间将返回的状态码。在 API v1.1 中，未经身份验证的请求被视为无效，您将收到此响应。

因此，虽然`400`过去的代码表示您超出了速率限制，但现在它也会在请求未通过身份验证时返回。

要对请求进行身份验证，您必须添加 Oauth`Authorization`标头。有一些[库](https://dev.twitter.com/docs/twitter-libraries#javascript)可以帮助解决这个问题，但问题是要生成 Oauth 签名，您必须将应用程序的密钥（包括密钥）硬编码到客户端代码中，这会将其公开-用户（不是一个好主意）。

您最好的选择是在您的服务器上设置一个代理 - 让服务器使用 Oauth 标头进行 GET，并使用 ajax 从您的服务器获取推文。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-10T23:21:28.317

[redhotvengeance 是正确的，截至 2013 年 3 月](https://dev.twitter.com/docs/faq#10647)，服务器端是您唯一安全的选择，除了我推荐的解决方案是设置一个 cronjob 并将结果缓存在某处。使用代理是快速达到[速率限制](https://dev.twitter.com/docs/rate-limiting/1.1)的好方法！

例如，如果您计划使用 API 的[user_timeline](https://dev.twitter.com/docs/api/1.1/get/statuses/user_timeline)部分，则每 15 分钟限制为 15 个请求，因此如果您的页面每小时点击次数超过 60 次，您将把这 400 个错误换成[429 个错误](https://dev.twitter.com/docs/error-codes-responses)！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-07-03T09:39:35.790

如此处所述[，](https://stackoverflow.com/a/17443029/1799869)关于能够使用纯客户端 JS 获取用户时间线的方法：

如果我们愿意，我们仍然可以解析他们的页面并使用纯客户端 JS 重新实现至少一些丢失的功能。

我们需要的是：一个可以处理 HTTPS 页面的 CORS 代理（我唯一知道的是 YQL API）以及如何在其公共页面上检索信息的知识。记住这一点，我们可以从用户那里获取最近的 20 条推文，就像我在演示中所做的那样：http: [//jsbin.com/agejol/1](http://jsbin.com/agejol/1)（单击“在 JSBin 中编辑”以查看代码）

PS 我知道这可能违反了他们的政策，但我关心它就像他们在放弃所有客户端 API 时关心我们一样关心它。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-18T16:55:17.800

实际上，我只是将其发布为对其他几个问题的回答。抱歉重复了，但我认为这将为您节省很多时间：

我刚刚更新了一个[插件](http://zkniebel.github.com/jquery-twitter-feed/)来使用 Twitter 1.1 API。不幸的是，根据 Twitter 的要求，您将不得不从服务器端代码执行实际请求。但是，您可以将响应传递给插件，它会处理其余的事情。我不知道您正在运行什么框架，但我已经添加了用于在 C# 中发出请求的示例代码，并将很快添加 PHP 的示例代码。

祝你好运！:)

# c#-4.0 - 实体框架 5：上下文已更新，但视图未更新

> ID：12480275
> 
> 赞同：0
> 
> 时间：2012-09-18T15:34:19.130
> 
> 标签：c#-4.0, view, entity-framework-5

我在我的软件中使用工作单元和存储库模式。表单上有一个 dataGridView，它从下一个方式获取数据：

```
acceptedBonusesGrid.DataSource = _unitOfWork.DocumentRepository.GetDocumentsInfo(); 
```

GetDocumentsInfo 位于 DocumentRepository 中。GetDocumentsInfoes - 是带有连接的复杂视图：

```
public IQueryable<GetDocumentsInfo> GetDocumentsInfo()
{
     return _context.GetDocumentsInfoes;
} 
```

当用户双击记录时，会出现编辑该记录的表单。我将工作单元发送到表格：

```
CorrectionAcceptedForm corrForm = new CorrectionAcceptedForm(_unitOfWork, docNum); 
```

表单打开，工作单元的链接正在使用中：

```
public CorrectionAcceptedForm(UnitOfWork unitOfWork, int docNum)
{
    InitializeComponent();
    _unitOfWork = unitOfWork;

    _documentData = _unitOfWork.DocumentRepository.GetById(docNum);

    AssignValues();
} 
```

用户在记录中进行更改并保存更改：

```
private void SaveBill(int billId)
{
    if (ValidateChildren())
    {
        SaveSupplierAddress();
        Bill billData = _documentData.Bills.FirstOrDefault(bill => bill.BillId == billId);
        if (billData != null)
        {
            billData.Description = descriptionTextbox.Text;
            billData.Price = Convert.ToDecimal(priceTextbox.Text.Replace('.', ','));
            _unitOfWork.Save();
        }
    }
} 
```

当此更正表单关闭时，主表单上的数据网格会重新加载：

```
acceptedBonusesGrid.DataSource = null;
acceptedBonusesGrid.Columns.Clear();
acceptedBonusesGrid.DataSource = _unitOfWork.DocumentRepository.GetDocumentsInfo(); 
```

但是在重新加载之后 - datagrid 中的所有行都是旧的，那是在进行更改之前。问题是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-05T10:58:20.147

3个月后我发现了问题。GetDocumentsInfo() 必须是这样的：

```
 public IQueryable<GetDocumentsInfo> GetDocumentsInfo()
    {
        _context.GetDocumentsInfoes.MergeOption = MergeOption.OverwriteChanges;
        return _context.GetDocumentsInfoes;
    } 
```

现在，当我在子表单中进行更改时，我的 DataGrid 会更新。

# android - Android - 是否可以获取桌面网络快捷方式的信息？

> ID：12480276
> 
> 赞同：1
> 
> 时间：2012-09-18T15:34:19.740
> 
> 标签：android, shortcut, desktop-shortcut

我正在尝试创建一个应用程序，该应用程序提供您在设备上安装的其他一些特定应用程序的信息。Android 允许您从包名中获取这些应用的信息，例如图标、名称、版本等。

但是，我的应用程序也将能够显示设备上的网页快捷方式，其中一些已预安装在系统文件夹中。

我的问题是，有没有办法从这些快捷方式中获取信息？他们是否有一个 ID，我可以从中获取快捷方式图标、url 链接、给定名称？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-18T16:39:47.633

您有 ApplicationInfo ：请参阅此代码片段：[http](http://www.androidsnippets.com/get-installed-applications-with-name-package-name-version-and-icon) ://www.androidsnippets.com/get-installed-applications-with-name-package-name-version-and-icon 。在 GooglePlay 上，android 应用程序使用它们的包名称来识别，您可以使用它重定向到应用程序信息。“market://details?id="查看此链接了解更多信息：http: [//developer.android.com/distribute/googleplay/promote/linking.html](http://developer.android.com/distribute/googleplay/promote/linking.html)

```
final Intent mainIntent = new Intent("android.intent.action.CREATE_SHORTCUT", null);

final List pkgAppsList = context.getPackageManager().queryIntentActivities( mainIntent, 0); 
```

看到这个问题：[如何获取已安装的 android 应用程序列表并选择一个运行](https://stackoverflow.com/questions/2695746/how-to-get-a-list-of-installed-android-applications-and-pick-one-to-run)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-18T16:35:36.933

Android没有桌面快捷方式等功能。（如果我错了请纠正我）

桌面快捷方式是特定主屏幕应用程序的功能。处理所有这些将非常困难。

# php - NodeJS 和 Socket.io - 定义服务器和套接字问题

> ID：12480277
> 
> 赞同：0
> 
> 时间：2012-09-18T15:34:25.480
> 
> 标签：php, node.js, curl, socket.io

这可能是一个简单的错误。我有一个运行 socket.io 的 nodejs 服务器，我已经在服务器中完成了所有工作。

但是，我希望能够通过 PHP 将 CURL 发布到节点服务器，并让它发出数据。我可以让服务器接收请求，但是当我尝试发出数据时，我收到一个错误，指出未定义套接字。

这在我的代码中很明显。我的问题是，在设置服务器之前如何要求 socket.io？希望我的代码段将有助于解释我的问题：

```
var http = require('http')
, url = require('url')
, fs = require('fs')
, server;

server = http.createServer(function(req, res) {
// your normal server code
var path = url.parse(req.url).pathname;
switch (path){
   case '/':
     res.writeHead(200, {'Content-Type': 'text/html'});
     res.write('<h1>Hello! <a href="/index.html">Enter</a></h1>');
     res.end();
     break;
   case '/index.html':
     fs.readFile(__dirname + path, function(err, data){
        if (err) return send404(res);
        res.writeHead(200, {'Content-Type': path == 'json.js' ? 'text/javascript' : 'text/html'})
        res.write(data, 'utf8');
        res.end();
     });
    break;
   case '/write.html':
     fs.readFile(__dirname + path, function(err, data){
        if (err) return send404(res);
        res.write(data, 'utf8');
        res.end();
     });
   break;
  case '/post':
     console.log(req.toString());
     socket.broadcast.emit('user', {state: 'PHP Post', userid: 'PHP'});
     res.writeHead(200);
     res.end();
   break;

  default: send404(res);
}
}),

send404 = function(res){
   res.writeHead(404);
   res.write('404');
   res.end();
};

server.listen(843);

// socket.io 
var io = require('socket.io').listen(server);

// Regular socket.io events 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-18T16:02:31.130

> 在设置服务器之前如何要求 socket.io？

那部分很简单；在文件的顶部，执行以下操作：

```
var http = require('http')
, url = require('url')
, fs = require('fs')
, socketIO = require('socket.io')  // <-- added line
, server; 
```

在底部：

```
var io = socketIO.listen(server); 
```

问题是，在您的`POST`处理程序中，您正在使用`socket.broadcast.emit`，但`socket`未定义。您是否尝试向*所有*Socket.IO 用户发送消息？如果是这样，您可以使用`io.sockets.emit`; 我可能会做这样的事情：

```
var http = require('http')
, url = require('url')
, fs = require('fs')
, server
, io;

...

case '/post':
   console.log(req.toString());
   io.sockets.emit('user', {state: 'PHP Post', userid: 'PHP'});
   res.writeHead(200);
   res.end();
 break;

...

io = require('socket.io').listen(server); 
```

如果您尝试将数据发送到单个套接字或除特定套接字之外的每个套接字（这是您通常使用的`socket.broadcast`方式），您将需要以某种方式将 HTTP 请求映射到 Socket.IO 套接字；[为此使用会话很常见](http://www.danielbaulig.de/socket-ioexpress/)。

# c# - 遍历静态类的属性以填充列表？

> ID：12480279
> 
> 赞同：25
> 
> 时间：2012-09-18T15:34:27.617
> 
> 标签：c#, static, iteration

我有一类字符串常量，如何循环获取字符串并填充列表框？

```
static class Fields
{
    static readonly string FirstName = "FirstName";
    static readonly string LastName = "LastName";
    static readonly string Grade = "Grade";
    static readonly string StudentID1 = "StudentID";
    static readonly string StudentID2 = "SASINumber";
}

public partial class SchoolSelect : Form
{
    public SchoolSelect()
    {
        InitializeComponent();

        //SNIP

        // populate fields
        //Fields myFields = new Fields(); // <-- Cant do this
        i = 0;
        foreach (string field in Fields) // ???
        { 
            fieldsBox.Items.Insert(i, Fields ???
        }
    } 
```

我无法创建 Fields 的新实例，因为它是一个静态类。如何在不手动插入每个字段的情况下将所有字段放入列表框中？

* * *

## 回答 #1

> 赞同：49
> 
> 时间：2012-09-18T15:37:09.457

用这样的东西尝试反射：

（更新后的版本）

```
 Type type = typeof(Fields); // MyClass is static class with static properties
        foreach (var p in type.GetFields( System.Reflection.BindingFlags.Static | System.Reflection.BindingFlags.NonPublic))
        {
            var v = p.GetValue(null); // static classes cannot be instanced, so use null...
            //do something with v
            Console.WriteLine(v.ToString());
        } 
```

# linux - 执行远程命令时出现 SSH 错误：“stdin: is not a tty”

> ID：12480284
> 
> 赞同：25
> 
> 时间：2012-09-18T15:34:45.650
> 
> 标签：linux, bash, ssh, debian, remote-execution

我正在尝试使用 ssh 连接到机器一，然后使用 ssh 连接到另一台机器。但是得到这个错误：

```
ssh user@computerone.com 'ssh otheruser@computertwo.com'

stdin: is not a tty 
```

* * *

## 回答 #1

> 赞同：30
> 
> 时间：2012-09-21T19:20:40.093

登录到 shell 时，远程主机假定连接是由人类用户完成的。因此，可以合理地预期他们可以控制客户端的*标准*。也就是说，用户正在通过键盘在终端上进行输入。如果远程主机检测到用户不是人类（因为输入的不是终端 - tty，而是另一个进程），它可能会警告用户这种意外情况。

* * *

所讨论的不当行为的演示以及如何避免它（`man ssh`并寻找 -t 以获得更彻底的解释）。

```
$ ssh -t genja.org 'ssh raptor.lan hostname\; uptime'
host: genja.lan 
raptor
 21:17:27 up 3 days, 15 min,  1 user,  load average: 0.00, 0.00, 0.00
Connection to genja.org closed.

$ ssh genja.org uptime 
host: genja.lan 
 21:17:43 up 12 days, 17:40,  1 user,  load average: 0.30, 0.08, 0.02 
```

...和错误：

```
$ ssh  genja.org 'ssh raptor.lan hostname\; uptime'
host: genja.lan 
Permission denied (publickey,keyboard-interactive). 
```

* * *

您可能想创建一个隧道：

```
ssh -L 4444:raptor.lan:22 genja.org 
```

然后，在另一个终端上：

```
ssh -p 4444 localhost will give you a conenction straight to "raptor.lan" 
```

如果对端没有配置 DNS 别名，则使用 192.168.0.11 等 IP 地址。

# php - 我需要一个用于用户帖子的表格（只允许查看朋友、特定人员等）

> ID：12480285
> 
> 赞同：-1
> 
> 时间：2012-09-18T15:34:53.233
> 
> 标签：php, mysql, post, friend, privacy

用户发布消息时，可以选择：只允许查看好友、特定人员等。

mysql表：

```
Post

post_id   post_nr    user_id    privacy option
1         1          2          allowed for friend id1
2         1          2          allowed for friend id2
or
1         1          2          allowed for friends id1,allowed for friend id2 .? 
```

我如何在 mysql 中为一篇文章注册多个选项（隐私）？桌子的设计好吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-18T15:47:30.767

`privacy_option`您可以通过将表连接到表来解决它`post`。

```
post

post_id post_nr user_id
1       1       2

privacy_option

post_id friend_id
1       3
1       4 
```

这样，每个帖子可以列出几个朋友，您可以使用简单的`JOIN`. 确保标记`privacy_option.post_id`为指向 的外键`post.post_id`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-18T15:48:54.413

最好为隐私选项设置一个单独的表格。而且我不确定您所说的 "post_nr" 是什么意思。

## 表：POST

## post_id | post_nr | 用户身份

## 表：隐私

## post_id | 隐私选项

# xml - Perl XML 解析器和 Expat

> ID：12480286
> 
> 赞同：0
> 
> 时间：2012-09-18T15:34:55.993
> 
> 标签：xml, perl, xml-parsing

我有一个包含大量数据的巨大 XML 文件，我需要创建一个 perl 脚本来解析 XML 并仅提取所需的数据。

我被告知要使用 expat，我想知道是否有人有任何关于如何使用 perl 和 expat 解析 XML 的好的教程或文章。

希望这是有道理的，我对 perl 真的很陌生。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-18T16:15:34.477

通过诸如[XML-Twig](http://search.cpan.org/dist/XML-Twig/)或[XML-Rules](http://search.cpan.org/dist/XML-Rules/)之类的包装器间接使用 expat 可能是最简单的。但也可以使用[XML-LibXML](http://search.cpan.org/dist/XML-LibXML/)（使用 libxml 而不是 expat）中的 XML::LibXML::Reader 之类的拉式解析器进行解析。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-08-20T11:13:34.127

如果，如您所说，XML 文件很大并且只需要一些选定的数据，那么 XML::Reader:RS 应该可以完成这项工作：它使用 XML::Parser 作为底层解析模块，而后者又使用 expat 解析XML。

以下代码片段仅解析来自可能巨大的 XML 文件所需的信息。它只使用少量内存：

```
use strict;
use warnings;

use XML::Reader::RS;

my $rdr = XML::Reader::RS->new(\*DATA, { mode => 'branches' },
  { root => '/info/line[@cat="A"]', branch => [ '/' ] });

while ($rdr->iterate) {
    my ($line) = $rdr->value;

    for ($line) {
        $_ = '' unless defined $_;
    }

    print "line = '$line'\n";
}

__DATA__
<info>
  <line cat="xyz">abc</line>
  <line cat="xyz">abc</line>
  <line cat="xyz">abc</line>
  <line cat="xyz">abc</line>
  <line cat="xyz">abc</line>
  <line cat="A">Data 0000001</line>
  <line cat="A">Data 0000002</line>
  <line cat="xyz">abc</line>
  <line cat="xyz">abc</line>
  <line cat="xyz">abc</line>
  <line cat="xyz">abc</line>
  <line cat="xyz">abc</line>
  <line cat="xyz">abc</line>
  <line cat="xyz">abc</line>
  <line cat="xyz">abc</line>
  <line cat="xyz">abc</line>
  <line cat="xyz">abc</line>
</info> 
```

（但是，XML::Reader::RS 并不是最快的，如果你想要速度和内存效率，那么你应该考虑直接使用 XML::Parser）

# asp.net - 本地 LAN 上的文件系统与网站的 Web 部署 - 哪个更好？

> ID：12480288
> 
> 赞同：3
> 
> 时间：2012-09-18T15:34:58.257
> 
> 标签：asp.net, visual-studio-2012, web-publishing

我们的生产网站可通过我们的本地 LAN 访问。自从它可用以来，我已经使用文件系统部署将我们的站点转移到生产环境中。我知道 Web Deploy 已经有一段时间了，但是随着 VS2012 的发布，我想知道使用 Web Deploy 优于文件系统是否有特定的优势，请记住我们是通过 1Gbps 连接发布的。另外，我不使用 Publishing 的任何数据库更新功能。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-18T19:28:52.067

这真的是你喜欢的更好。我都试过了，没有看到任何真正的优势可以让一个更优秀

# c# - 列表中的排序列表

> ID：12480289
> 
> 赞同：0
> 
> 时间：2012-09-18T15:34:59.800
> 
> 标签：c#, linq, list, sorting

我有两节课

```
public class X
{
    string title;
}

public class Y
{
    string name;
    IList<X> testList;
} 
```

我有一个如下列表

```
IList<Y> myList = new List<Y>(); 
```

我想根据名称和标题对 myList 进行排序

我该怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-18T15:37:54.197

试试这样的，

```
 var sorted = lstY.OrderBy(c => c.name).ToList().Select(d => { d.testList.OrderBy(f => f.title); return d; }); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-18T15:39:31.717

```
myList.OrderBy(x => x.name).ThenBy(y => y.testList.Min(z=>z.title)); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-18T15:45:30.240

这是一种选择，但不是唯一的选择。向 Y 类添加公共或内部 getter：

```
public IEnumerable<X> TestList{get{return testList.OrderBy(x=>x.title);}} 
```

检索 Y 列表时，显然可以按名称对其进行排序：

```
myList.OrderBy(y=>y.name); 
```

对于您正在执行的任何处理，例如显示 Y 的列表，您将在 TestList 中显示 Y.name 和 foreach X，X.title 将被排序。

甚至没有第二个吸气剂：

```
myList.OrderBy(y=>y.name).Select(y=>new{y.name, testList=y.testList.OrderBy(t=>t.title)}).Dump(); 
```

# java - java 应用程序应该如何在运行时发现扩展？

> ID：12480290
> 
> 赞同：3
> 
> 时间：2012-09-18T15:35:09.703
> 
> 标签：java

我想在预定义的目录中查找扩展 jar 并检查它们的清单。那些匹配的应该被加载，那些不匹配的应该被卸载。

Now, I can do it a primitive way - mandate that each extension pass the name of its bootstrapper on the command line and then for each jar found in the directory try and load any of the given bootstrapper types. Something like this:

```
java -jar myapp.jar --pluginDir=c:/a/b/c --exts="classA;classB;classC" 
```

Then myapp would iterate over all the files inside the `pluginDir` and try to load each of `classA`, `classB` or `classC`. Once a `classX` is successfully loaded, it is removed from the list. The search stops when either all the extensions are found and loaded or there are no more jars in the plugin dir.

A slightly more javaish approach seems to be writing something in the manifest of extension jars and check the manifest of each found jar.

Can anyone show a working code snippet of this approach or of anything better, if there is?

**EDIT**

A quote from the postgre JDBC driver README file (see [https://stackoverflow.com/a/12480373/80002](https://stackoverflow.com/a/12480373/80002)):

```
INSTALLING THE DRIVER

To install the driver, the postgresql.jar file has to be in the classpath.

ie: under LINUX/SOLARIS (the example here is my linux box):

    export CLASSPATH=.:/usr/local/pgsql/share/java/postgresql.jar 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-18T15:39:43.323

为此目的有[ServideLoader类。](http://docs.oracle.com/javase/6/docs/api/java/util/ServiceLoader.html)JDBC 驱动程序就是建立在这个原则之上的。希望，它有所帮助。

# haskell - New state of the art in unlimited generation of Hamming sequence

> ID：12480291
> 
> 赞同：7
> 
> 时间：2012-09-18T15:35:20.910
> 
> 标签：haskell, recursion, generator, primes, hamming-numbers

(this is exciting!) I know, the subject matter is well known. The state of the art (in Haskell as well as other languages) for efficient generation of unbounded increasing sequence of Hamming numbers, without duplicates and without omissions, has long been the following (AFAIK - and btw it is equivalent to the [original Edsger Dijkstra's code](http://web.cecs.pdx.edu/~cs410aph/Lectures/Smalltalk%20II/Dijkstra%20on%20Hamming%27s%20Problem.pdf) too):

```
hamm :: [Integer]
hamm = 1 : map (2*) hamm `union` map (3*) hamm `union` map (5*) hamm
  where
    union a@(x:xs) b@(y:ys) = case compare x y of
        LT -> x : union  xs  b
        EQ -> x : union  xs  ys
        GT -> y : union  a   ys 
```

The question I'm asking is, **can you find the way to make it more efficient** in any significant measure? Is it still the state of the art or is it in fact possible to improve this to run *twice faster* and with better [empirical orders of growth](http://en.wikipedia.org/wiki/Analysis_of_algorithms#Empirical_orders_of_growth) to boot?

If your answer is *yes*, please show the code and discuss its speed and empirical orders of growth in comparison to the above (it runs at about `~ n^1.05 .. n^1.10` for first few hundreds of thousands of numbers produced). Also, if it exists, can this efficient algorithm be extended to producing a sequence of smooth numbers with any given set of primes?

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-09-18T17:56:09.540

如果一个常数因子^((1))的加速很重要，那么我可以提供一个更高效的版本：

```
hamm :: [Integer]
hamm = mrg1 hamm3 (map (2*) hamm)
  where
    hamm5 = iterate (5*) 1
    hamm3 = mrg1 hamm5 (map (3*) hamm3)
    merge a@(x:xs) b@(y:ys)
        | x < y     = x : merge xs b
        | otherwise = y : merge a ys
    mrg1 (x:xs) ys = x : merge xs ys 
```

您可以轻松地将其推广到平滑给定素数集的数字：

```
hamm :: [Integer] -> [Integer]
hamm [] = [1]
hamm [p] = iterate (p*) 1
hamm ps = foldl' next (iterate (q*) 1) qs
  where
    (q:qs) = sortBy (flip compare) ps
    next prev m = let res = mrg1 prev (map (m*) res) in res
    merge a@(x:xs) b@(y:ys)
        | x < y     = x : merge xs b
        | otherwise = y : merge a ys
    mrg1 (x:xs) ys = x : merge xs ys 
```

它更有效，因为该算法不会产生任何重复并且它使用更少的内存。在您的版本中，当产生一个附近的汉明数时`h`，列表的一部分和之间`h/5`必须`h`在内存中。在我的版本中，只有完整列表和之间的部分，`h/2`以及3-5列表和之间的部分需要在内存中。由于 3-5-list 更稀疏，并且 k-smooth 数字的密度降低，这两个列表部分需要的内存比完整列表的较大部分要少得多。`h``h/3``h`

两种算法产生第`k`^(th)汉明数的一些时间，每个目标相对于前一个目标的经验复杂度，不包括和包括 GC 时间：

```
 k            Yours (MUT/GC)               Mine (MUT/GC)
 10^5           0.03/0.01                    0.01/0.01      -- too short to say much, really
2*10^5          0.07/0.02                    0.02/0.01
5*10^5          0.17/0.06  0.968  1.024      0.06/0.04      1.199    1.314
 10^6           0.36/0.13  1.082  1.091      0.11/0.10      0.874    1.070
2*10^6          0.77/0.27  1.097  1.086      0.21/0.21      0.933    1.000
5*10^6          1.96/0.71  1.020  1.029      0.55/0.59      1.051    1.090
 10^7           4.05/1.45  1.047  1.043      1.14/1.25      1.052    1.068
2*10^7          8.73/2.99  1.108  1.091      2.31/2.65      1.019    1.053
5*10^7         21.53/7.83  0.985  1.002      6.01/7.05      1.044    1.057
 10^8          45.83/16.79 1.090  1.093     12.42/15.26     1.047    1.084 
```

可以看到，MUT 时间之间的因子大约是 3.5，但 GC 时间相差不大。

^((1))好吧，它看起来是恒定的，而且我认为这两种变体具有相同的计算复杂度，但我没有拿出纸笔来证明这一点，我也不打算这样做。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-09-18T18:32:17.210

所以基本上，既然 Daniel Fischer 给出了他的答案，我可以说我最近遇到了这个问题，我认为这是一个令人兴奋的发展，因为经典代码自 Dijkstra 以来已为人所知很久了。

Daniel 在经典版本中正确识别了必须删除的重复生成的冗余。

**[截至 2012 年 8 月 26 日，原始发现 (AFAIK) 的功劳归于 Rosettacode.org 的贡献者 Ledrug](http://rosettacode.org/mw/index.php?title=Hamming_numbers&diff=143055&oldid=142784)**。当然还有**[Daniel Fischer 的独立发现，这里](https://stackoverflow.com/a/12482407/849891)**(2012-09-18)。

稍微改写一下，代码是：

```
import Data.Function (fix)

hamm = 1 : foldr (\n s -> fix (merge s . (n:) . map (n*))) [] [2,3,5] 
```

与通常的合并实现，

```
merge a@(x:xs) b@(y:ys) | x < y     = x : merge xs b
                        | otherwise = y : merge a ys
merge [] b = b
merge a [] = a 
```

与经典版本相比，它提供了大约 2.0 倍 - 2.5 倍的加速。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-12-27T01:54:44.330

好吧，这比我想象的要容易。这将在我家里的慢速 PC 上在 0.05 秒内完成 1000 次 Hammings。今天下午在工作中，不到 600 次的更快 PC 时间以零秒出现。

这从 Hammings 那里得到了 Hammings。它基于在 Excel 中执行速度最快。

我在 250000 之后得到了错误的数字，使用`Int`. 数字增长非常大非常快，所以`Integer`必须使用肯定，因为`Int`是有界的。

```
mkHamm :: [Integer] -> [Integer] -> [Integer] -> [Integer] 
       -> Int -> (Integer, [Int])
mkHamm ml (x:xs) (y:ys) (z:zs) n =  
   if n <= 1
       then (last ml, map length [(x:xs), (y:ys), (z:zs)])
       else mkHamm (ml++[m]) as bs cs (n-1)
     where
         m = minimum [x,y,z]
         as = if x == m then xs ++ [m*2] else (x:xs) ++ [m*2]
         bs = if y == m then ys ++ [m*3] else (y:ys) ++ [m*3]
         cs = if z == m then zs ++ [m*5] else (z:zs) ++ [m*5] 
```

测试，

```
> mkHamm  [1] [2] [3] [5] 5000
(50837316566580,[306,479,692])        -- (0.41 secs)

> mkHamm  [1] [2] [3] [5] 10000
(288325195312500000,[488,767,1109])   -- (1.79 secs)

> logBase 2 (1.79/0.41)     -- log of times ratio = 
2.1262637726461726          --   empirical order of growth

> map (logBase 2) [488/306, 767/479, 1109/692] :: [Float]
[0.6733495, 0.6792009, 0.68041545]     -- leftovers sizes ratios 
```

这意味着此代码的运行时[增长的经验顺序](https://en.wikipedia.org/wiki/Analysis_of_algorithms#Empirical_orders_of_growth)高于二次（*`~n^2.13`*在 GHCi 提示下测量、解释）。

此外，该序列的三个悬垂的过度生产片段的大小各为*`~n^0.67`*ie *`~n^(2/3)`*。

*此外，此代码是非惰性代码：只有在*计算完*最后*一个元素后才能访问结果序列的第一个元素。

问题中最先进的代码是线性的，在兴趣点之后正好过量产生*0个元素，并且非常懒惰：它立即开始产生它的数字。*

因此，尽管这张海报对之前的答案有了巨大的改进，但它仍然比原来的答案差很多，更不用说它出现在前两个答案中的改进了。

**12.31.2018**

只有最优秀的人才接受教育。@Will Ness 还在 GoalKicker.com “Haskell for Professionals”中撰写或共同撰写了 19 个章节。免费的书是宝藏。

我已经提出了一个可以做到这一点的函数的想法，就像这样。我很担心，因为我认为它会像某些现代语言一样复杂且涉及逻辑。我决定开始写作，并惊讶于 Haskell 可以如此轻松地实现甚至是糟糕的想法。

我生成唯一列表没有困难。我的问题是我生成的列表不能很好地结束。即使当我使用对角化时，它们也会留下剩余值，从而使它们的使用充其量是不可靠的。

这是一个重新设计的 3 和 5 列表，最后没有任何残留。去国有化是为了减少剩余价值，而不是为了消除无论如何从未包括在内的重复。

```
g3s5s n=[t*b|(a,b)<-[ (((d+n)-(d*2)), 5^d) | d <- [0..n]],
                t <-[ 3^e | e <- [0..a+8]],
             (t*b)<-(3^(n+6))+a]                                       

ham2 n = take n $ ham2' (drop 1.sort.g3s5s $ 48) [1]

ham2' o@(f:fo) e@(h:hx) = if h == min h f
                      then h:ham2'  o (hx ++ [h*2])
                      else f:ham2' fo ( e ++ [f*2]) 
```

该`twos`列表可以通过所有`2^e`s 乘以每个 s来生成，`3s5s`但是当`2^0`包括恒等式时，总的来说，它是 Hammings。

**2019 年 3 月 25 日**

嗯，最后。我前段时间知道这一点，但最终如果没有多余的价值就无法实施。问题是如何不产生笛卡尔积导致的多余部分。我经常使用 Excel，但看不到要从笛卡尔积工作表中排除的值模式。然后，尤里卡！这些函数生成每个领先因素的列表。限制每个列表中的值的值是第一个列表的终点。完成此操作后，所有的 Hammings 都会生成，没有多余的。

汉明斯的两个函数。第一个是新的 3 和 5 列表，然后用于创建与 2 的倍数。倍数是 Hammings。

```
h35r  x = h3s5s x (5^x)
h3s5s x c = [t| n<-[3^e|e<-[0..x]],
                m<-[5^e|e<-[0..x]], 
                t<-[n*m],
             t <= c ]

a2r n = sort $ a2s n (2^n)
a2s n c =   [h| b<-h35r n, 
                a<-[2^e| e<-[0..n]],
                h<-[a*b],
             h <= c ] 
```

`last $ a2r 50`

1125899906842624

（0.16 秒，321,326,648 字节）

2^50

1125899906842624

（0.00 秒，95,424 字节

这是一种替代的、更干净、更快、内存使用更少的实现。

```
gnf n f = scanl (*) 1 $ replicate f n

mk35   n = (\c->      [m| t<- gnf 3 n, f<- gnf 5  n,    m<- [t*f], m<= c]) (2^(n+1))
mkHams n = (\c-> sort [m| t<- mk35  n, f<- gnf 2 (n+1), m<- [t*f], m<= c]) (2^(n+1)) 
```

`last $ mkHams 50`

2251799813685248

（0.03 秒，12,869,000 字节）

`2^51`

2251799813685248

**2019 年 5 月 6 日**

好吧，我尝试过不同的限制，但总是回到最简单的东西。我选择最少的内存使用，因为它似乎也是最快的。

我还选择使用`map`隐式参数。

我还发现`mergeAll`from`Data.List.Ordered`比`sort`or `sort`and更快`concat`。

我也喜欢创建子列表，这样我可以更轻松地分析数据。

然后，由于@Will Ness 切换到`iterate`而不是`scanl`编写更清晰的代码。同样由于@Will Ness，我停止使用最后一个 2s 列表并切换到一个确定所有长度的值。

我确实认为递归定义的列表更有效，前一个数字乘以一个因子。

只是将函数分成两个并没有什么区别，所以 3 和 5 的倍数是

```
m35 lim = mergeAll $ 
          map (takeWhile (<=lim).iterate (*3)) $
               takeWhile (<=lim).iterate (*5)  $ 1 
```

并且 2s 每个乘以 3s 和 5s 的乘积

```
ham n = mergeAll $
        map (takeWhile (<=lim).iterate (*2)) $ m35 lim 
    where lim= 2^n 
```

编辑功能后，我运行它

`last $ ham 50`

1125899906842624

（0.00 秒，7,029,728 字节）

然后

`last $ ham 100`

1267650600228229401496703205376

（0.03 秒，64,395,928 字节）

它可能更好用`10^n`，但为了比较我再次使用`2^n`

**2019 年 5 月 11 日**

因为我更喜欢无限和递归列表，所以我有点痴迷于使这些无限。

`Data.Universe.Helpers`我开始使用@Daniel Wagner 和他的作品给我留下了深刻的印象和启发，`+*+`但`+++`后来又添加了我自己的无限列表。我必须按照`mergeAll`我的清单工作，但后来意识到无限的 3 和 5 倍数正是它们应该是的。所以，我添加了 2s 和`mergeAll`d 一切，它们就出来了。以前，我愚蠢地认为`mergeAll`不会处理无限列表，但它确实做得非常好。

当 Haskell 中的列表是无限的时，Haskell 只计算需要的内容，即惰性列表。附加条件是它确实从一开始就计算。

现在，由于 Haskell 倍数直到想要的极限，所以函数中不需要限制，也就是说，不再需要`takeWhile`. 速度提升令人难以置信，内存也降低了，

以下是在我的具有 3GB RAM 的慢速家用 PC 上。

```
tia = mergeAll.map (iterate (*2)) $
      mergeAll.map (iterate (*3)) $ iterate (*5) 1 
```

最后 $ 拿 10000 tia

288325195312500000

（0.02 秒，5,861,656 字节）

**6.5.2019** 我学会了如何`ghc -02`所以以下是 50000 Hammings 到 2.38E+30。这进一步证明我的代码是垃圾。

```
INIT    time    0.000s  (  0.000s elapsed)
MUT     time    0.000s  (  0.916s elapsed)
GC      time    0.047s  (  0.041s elapsed)
EXIT    time    0.000s  (  0.005s elapsed)
Total   time    0.047s  (  0.962s elapsed)

Alloc rate    0 bytes per MUT second
Productivity   0.0% of total user, 95.8% of total elapsed 
```

**2019 年 6 月 13 日**

@Will Ness rawks。他对上述内容进行了简洁而优雅的修改，`tia`事实证明它的速度是`GHCi`. 当我`ghc -O2 +RTS -s`反对我的时候，我的速度是我的几倍。必须达成妥协。

***所以，我开始阅读我在 R. Bird's Thinking Functionally with Haskell***中遇到的关于融合的内容，并且几乎立即尝试了这个。

```
mai n = mergeAll.map (iterate (*n))
mai 2 $ mai 3 $ iterate (*5) 1 
```

对于 100K Hammings，它与 Will's 匹配为 0.08，`GHCi`但真正让我感到惊讶的是（也适用于 100K Hammings。）这一点，尤其是经过的时间。100K最高可达2.9e+38。

```
 TASKS: 3 (1 bound, 2 peak workers (2 total), using -N1)

  SPARKS: 0 (0 converted, 0 overflowed, 0 dud, 0 GC'd, 0 fizzled)

  INIT    time    0.000s  (  0.000s elapsed)
  MUT     time    0.000s  (  0.002s elapsed)
  GC      time    0.000s  (  0.000s elapsed)
  EXIT    time    0.000s  (  0.000s elapsed)
  Total   time    0.000s  (  0.002s elapsed)

  Alloc rate    0 bytes per MUT second

  Productivity 100.0% of total user, 90.2% of total elapsed 
```

# html - IE8中的高度渲染错误？

> ID：12480295
> 
> 赞同：2
> 
> 时间：2012-09-18T15:35:32.547
> 
> 标签：html, internet-explorer-8, height, rendering

我有以下页面...

[http://jsfiddle.net/8JxkW/4/](http://jsfiddle.net/8JxkW/4/)

它由 3 个工具栏控件组成。但是，我已将页面精简到最低限度以本地化我遇到的问题。

在 IE9 标准模式下呈现时，每个工具栏都以 26 像素的高度正确呈现。在 Chrome 中也是如此。

但是在 IE8 标准模式下，第二个工具栏以 27px 的高度呈现。奇怪的是，IE 开发工具和 jQuery 都表明 3 个工具栏的高度相同。但是，如果您在图形程序中仔细检查它们，您会发现第二个工具栏的高度增加了 1px。

**我可以简单地将其归结为 IE8 渲染错误吗？**如果是这样，我该如何解决？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-20T19:59:48.323

将 a`max-height:26px;`放在工具栏上会阻止它结束吗？

# android - 尝试使用平台 4.1 的 adb 安装 android apk 包时失败 [INSTALL_FAILED_CONTAINER_ERROR]

> ID：12480302
> 
> 赞同：20
> 
> 时间：2012-09-18T15:35:56.767
> 
> 标签：android

我为我的 android 应用程序生成了一个 apk 包。我尝试使用**adb**命令在 android 平台 4.1（级别 16）上安装包（apk），但它会产生错误：

```
Failure [INSTALL_FAILED_CONTAINER_ERROR] 
```

当尝试在同一平台（4.1 级别 16）上使用 eclipse（运行按钮）运行时，它可以正常工作

平台 2.1 和平台 3.2 不会重现此行为

* * *

## 回答 #1

> 赞同：80
> 
> 时间：2013-01-30T04:29:25.287

您需要在`AndroidManifest.xml`. 你需要做的改变是。改变 ：

```
android:installLocation="preferExternal" 
```

至

```
android:installLocation="auto" 
```

这对我有用。

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2013-07-04T08:44:12.723

如果`android:installLocation`设置为`"preferExternal"`并且您的 AVD 的 SD 卡太小，则会发生这种情况。增加 SD 卡的大小或更改`installLocation`为`auto`in `AndroidManifest.xml`。

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2015-08-07T19:35:36.737

在更改 MainActivity 的名称后删除我的应用程序时出现此错误。如果应用程序由于空间问题未安装或手机认为包已损坏但**删除 dalvik 缓存并重新启动**为我解决了它，请识别。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2015-12-01T23:59:34.430

尝试安装包含为不同架构编译的本机库的 apk 时，也会返回 INSTALL_FAILED_CONTAINER_ERROR。

收到错误后，尝试从“adb shell”运行“logcat”。如果它报告 java IOException “无法提取本机代码”，那么您需要在为本机库架构创建的 avd 上安装 apk，或者在您的 avd/设备架构的 apk 中包含本机库。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-11-13T09:03:33.203

我无法更改构建清单，所以对我来说，解决方案是卸载 SD 卡，安装应用程序，然后将其重新安装。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2017-04-14T06:09:39.570

我改变`installLocation="auto"`了清单但不起作用。我发现我的 SD 卡有问题。

所以，我`android:installLocation="preferExternal`改为`internalOnly`. 它对我有用！

# javascript - iframe src更改时的jQuery切换类

> ID：12480303
> 
> 赞同：1
> 
> 时间：2012-09-18T15:35:58.273
> 
> 标签：javascript, jquery, iframe, toggle, soundcloud

我正在使用一个名为 Stratus 的 SoundCloud.com 音乐播放器插件。该插件允许您在指向 soundcloud 轨道的任何锚点上设置“stratus”类，单击时，会将轨道动态添加到播放器并开始播放。jsfiddle 示例：http: [//jsfiddle.net/2CCS6/](http://jsfiddle.net/2CCS6/)

除了我在下面的切换之外，我还想在 iframe 的 src 更改时从（this）切换或删除“暂停”。我将所有 .stratus 链接设置为播放按钮，问题是当它们被点击时，它们（视觉上）保持在播放状态。通过切换类暂停，我可以显示一个暂停图标来指示活动的轨道和暂停功能。

我这里的版本适用于点击功能，但它似乎干扰了它下面的功能。至于在 iframe src 更改时切换...我正在研究 this.contentWindow.location 但由于域不匹配而不确定这是否会起作用。

```
$('a.stratus').click(function() {
  $(this).toggleClass('pause');
  $.postMessage($(this).attr('href'), src, $('#stratus iframe')[0].contentWindow);
  return false;
});
return $.receiveMessage(function(e) {
  return $('#stratus').toggleClass('open');
}, root_url); 
```

谢谢你尽你所能的帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-18T16:16:30.523

我相信每次 src 属性更改时都会触发 .load 方法。

```
 $('#frameId').load(function () {
    $(this).toggleClass('pause');
 }); 
```

# ruby-on-rails - 使用 Rails Rest 路由的 json 响应中的简单分页

> ID：12480306
> 
> 赞同：0
> 
> 时间：2012-09-18T15:36:05.057
> 
> 标签：ruby-on-rails, ruby-on-rails-3, json, rest, pagination

我正在构建一个简单的服务（API），它将使用 Ruby on Rails 返回用户对象的 json 响应。因为它返回一个对象数组，所以我想添加分页功能（：next_page，：prev），如下所示。

```
"nextpage":www.domain.com/users?page=2&per_page=5 
```

目前我有一条返回 url 的宁静路线。`www.domain.com/users`如何在我的索引操作中重建 url 以及如何利用`limit`和`offset`在这种情况下使分页工作？我想在每页返回 5 个项目。对不起，我知道这是一个新手问题，这是我第一次创建服务，如果有人能告诉我如何做，`nextpage`我将不胜感激，我将`prev`自己实施。我已经尝试寻找教程来做到这一点，但他们都没有显示动作/方法中的逻辑。谢谢 **注意：我不想使用 will_paginate，我只需要构建简单的分页**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-18T17:14:27.860

只需将您的页面和 page_per 附加到任何操作的链接即可。假设你有标准的基于资源的路由，即

配置/路由.rb：

```
resources :users 
```

所以你会生成以下路线

GET '/users' => 'users#index'

如果您将此 url 发送到您的 rails 应用程序：

'/users?page=2&per_page=5'

你仍然会得到 index 动作，但是你会有两个额外的参数，你可以这样做：

控制器/users_controller.rb

```
def index
  if params[:page]
     # do your custom pagination
  else
     @users = User.all
  end
end 
```

# iphone - IOS app切换动画“A”与动画“B”在同一个地方

> ID：12480311
> 
> 赞同：0
> 
> 时间：2012-09-18T15:36:20.003
> 
> 标签：iphone, objective-c, ios, xcode, ios5

我有2个动画。应用程序加载时的第一个，第二个将保持用户体验的其余部分。

简而言之，这就是我想做的事情

1) 应用加载时加载的动画“A”。2）然后我想隐藏动画“A”并将其替换为相同坐标上的动画“B”3）让动画“B”在任何其他时间或以 30 秒或 45 秒的间隔播放

动画A

```
[UIView animateWithDuration:2.5 
                      delay:2.0 
                    options:UIViewAnimationCurveEaseIn
                 animations:^{[buhoButton setFrame:CGRectMake(91, 185, 130, 130)];}completion:nil]; 
```

动画B

```
animation.animationImages = [NSArray arrayWithObjects:[UIImage imageNamed:@"Buho128x128_0.png"],
                                  [UIImage imageNamed:@"Buho128x128_1.png"],
                                  [UIImage imageNamed:@"Buho128x128_2.png"],
                                  [UIImage imageNamed:@"Buho128x128_3.png"],
                                  [UIImage imageNamed:@"Buho128x128_4.png"],
                                  [UIImage imageNamed:@"Buho128x128_3.png"],
                                  [UIImage imageNamed:@"Buho128x128_2.png"],
                                  [UIImage imageNamed:@"Buho128x128_1.png"],
                                  [UIImage imageNamed:@"Buho128x128_0.png"], nil];
[animation setAnimationRepeatCount:-1];
animation.animationDuration = 1;
[animation startAnimating]; 
```

这可能吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-18T15:56:16.390

尝试将动画 B 的代码放入动画 A 的完成块中：

```
[UIView animateWithDuration:2.5 
                  delay:2.0 
                options:UIViewAnimationCurveEaseIn
             animations:^{[buhoButton setFrame:CGRectMake(91, 185, 130, 130)];}
             completion:^(BOOL finished){/*Animation B code here*/;}
]; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-18T17:36:13.223

如果您想控制动画 B 何时触发，您可以使用 CABAsicAnimation ，其中 removedOnCompletion = YES 用于动画 A（放置在您的 viewDidLoad 中）和 removedOnCompletion = NO 用于动画 B（放置在处理您的触发事件的位置）。

# android - 是否能够通过互联网在我朋友的安卓手机上调试我的安卓应用程序？

> ID：12480312
> 
> 赞同：0
> 
> 时间：2012-09-18T15:36:24.310
> 
> 标签：android, debugging

我的 android 应用程序在我的手机上运行良好。我将它发送给我的朋友，它在我朋友的手机上崩溃了，但我无法获取错误日志。

是否能够通过互联网将我的应用程序直接部署到我朋友的手机上？我可以通过 logcat 看到错误消息。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-18T15:39:27.620

[ACRA](https://github.com/KevinGaudin/acra)可以在这里为您提供帮助。它将允许您从应用程序的远程用户那里收集错误报告。

# r - 列意味着在有限的行范围内

> ID：12480318
> 
> 赞同：1
> 
> 时间：2012-09-18T15:36:43.043
> 
> 标签：r, statistics, mean

我正在新墨西哥州处理气候数据，我是一名 R 新手。我正在尝试用手段替换 NA，但我的 df 中有 37 个不同的站点。我想要 DF$STATION.NAME （在第 1 列中）唯一的列的方法。我不能使用来自一个位置的数据来找到另一个位置的平均值......显然。所以我真的应该为每个月、每个站点设置一个平均值。

我的数据按第 1 列中的 station.name 垂直组织，并在随后的列中按 jan-dec 月份的读数进行组织，包括末尾的总列（右）。读数或观测值是每个月的每个台站，在几年内（台站名称在每个新年的新行中列出。）

我需要用给定 station.name 中给定月份的 CLDD 总和替换 NA，我该怎么做？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-19T06:04:56.880

[尝试在https://stats.stackexchange.com/](https://stats.stackexchange.com/)上问这个问题（如[统计](/questions/tagged/statistics "显示标记为“统计”的问题")标签所建议的那样），那里的 R 用户可能比一般编程网站上的多。我还在您的问题中添加了[r](/questions/tagged/r "显示标记为“r”的问题")标签。

将您的数据拆分为站月子集，在那里填充缺失值，然后将它们重新组合成一个大矩阵，这并没有错！

另请参阅： [替换 R 中缺失值的均值或模式](https://stackoverflow.com/questions/7731192/replace-mean-or-mode-for-missing-values-in-r)

请注意，使用均值、中位数或众数填充缺失值的常见做法很流行，但可能会稀释您的结果，因为这显然会减少方差。除非你有一个强有力的物理论据，为什么以及如何插入缺失值，否则如果你能找到一种可以直接处理缺失值的方法会更优雅。

# sql - 包含在“WHERE...IN”子句中时 udf 中的奇怪错误

> ID：12480321
> 
> 赞同：5
> 
> 时间：2012-09-18T15:36:50.080
> 
> 标签：sql, sql-server-2008, user-defined-functions

我有一个拆分字符串的函数（为清楚起见粘贴在末尾）。此功能在单独使用时按预期工作。例子：

```
SELECT value
FROM dbo.mg_fn_Split('2#1','#') 
```

退货

```
-- value --
--   2   --
--   1   --
----------- 
```

但是当在“WHERE IN”子句中使用时，如本例所示（稍后将详细介绍 tableA）：

```
SELECT * FROM TableA WHERE TableA.id IN
(
  SELECT value
  FROM dbo.mg_fn_Split('2#1','#')
) 
```

我收到错误：“传递给 LEFT 或 SUBSTRING 函数的长度参数无效。”

此处以 TableA 为例。使用不同的表（假设它们有 id 列）有时会返回正确的结果，而在其他表上我会得到错误。

我假设它与执行顺序有关，但我仍然看不到什么会“破坏”该功能。

我正在寻找“正在发生的事情”的解释，而不是“改用它”。我知道我可以使用连接来获取结果。

函数定义：

```
-- Description: Returns a table containing the results of a string-split operation.
-- Params:
--      DelimitedList: The string to split
--      Delimiter: The delimiter char, defaults to ','
-- Columns:
--      Position - The char index of the item
--      Value - The actual item
-- =============================================
CREATE Function [dbo].[mg_fn_Split]
(   
    @DelimitedList nvarchar(max)
    , @Delimiter nvarchar(2) = ','
)
RETURNS TABLE 
AS
RETURN 
    (
    With CorrectedList As
        (
        Select Case When Left(@DelimitedList, Len(@Delimiter)) <> @Delimiter Then @Delimiter Else '' End
            + @DelimitedList
            + Case When Right(@DelimitedList, Len(@Delimiter)) <> @Delimiter Then @Delimiter Else '' End
            As List
            , Len(@Delimiter) As DelimiterLen
        )
        , Numbers As 
        (
        Select TOP( Coalesce(DataLength(@DelimitedList)/2,0) ) Row_Number() Over ( Order By c1.object_id ) As Value
        From sys.columns As c1
            Cross Join sys.columns As c2
        )
    Select CharIndex(@Delimiter, CL.list, N.Value) + CL.DelimiterLen As Position
        , Substring (
                    CL.List
                    , CharIndex(@Delimiter, CL.list, N.Value) + CL.DelimiterLen     
                    , CharIndex(@Delimiter, CL.list, N.Value + 1)                           
                        - ( CharIndex(@Delimiter, CL.list, N.Value) + CL.DelimiterLen ) 
                    ) As Value
    From CorrectedList As CL
        Cross Join Numbers As N
    Where N.Value <= DataLength(CL.List) / 2
        And Substring(CL.List, N.Value, CL.DelimiterLen) = @Delimiter
    ) 
```

**编辑：**我设置了一个小提琴来展示这个： [http ://sqlfiddle.com/#!3/9f9ff/3](http://sqlfiddle.com/#!3/9f9ff/3)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-10T23:31:00.490

当您在内部查询中的数据如下时会发生这种情况。

SELECT value FROM dbo.mg_fn_Split('#','#') --------------> 你会在这里得到错误。

SELECT value FROM dbo.mg_fn_Split('2#1','#') -------------> 这里没有错误。

SELECT value FROM dbo.mg_fn_Split('2','#') --------------------> 这里没有错误。

SELECT value FROM dbo.mg_fn_Split('','#') ----------------------> 这里没有错误。

所以基本上当你要拆分的数据和分隔符相同时，就会发生错误。

问题在于这些陈述。

```
 " Select Case When Left(@DelimitedList, Len(@Delimiter)) <> @Delimiter Then @Delimiter Else '' End
        + @DelimitedList
        + Case When Right(@DelimitedList, Len(@Delimiter)) <> @Delimiter Then @Delimiter Else '' End" 
```

如果你把它改成

```
 Select Case When Left(@DelimitedList, Len(@Delimiter)) <> @Delimiter Then @Delimiter Else '1' End
        + @DelimitedList
        + Case When Right(@DelimitedList, Len(@Delimiter)) <> @Delimiter Then @Delimiter Else '1' End 
```

那么它会很好......你所做的只是添加'1'而不是''......希望这会有所帮助。

# java - SoundPool：“加载（字符串路径，int优先级）”中的“路径”是什么

> ID：12480330
> 
> 赞同：0
> 
> 时间：2012-09-18T15:37:04.603
> 
> 标签：java, android, methods, soundpool

[这是我几天前偶然发现的一个问题。](https://stackoverflow.com/questions/12094370/android-soundpool-loadstring-path-int-priority)

问题是询问应该如何使用“load(String path, int priority)”方法，以及“path”变量应该是什么样的语法。不幸的是，该问题的所有答案都给出了错误的答案。他们都没有提到“load(String, int)”方法的使用，甚至没有人回答“路径”应该是什么样子。

我无法提出解决方案。有人可以帮忙吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-18T16:00:36.947

路径只是文件在android文件系统中的路径。

例如，如果我拖放`foo.mp3`到我的 android 文件系统，它会被放置在`/mnt/sdcard/foo.mp3`我会传递`/mnt/sdcard/foo.mp3`给 load 方法。

基本路径 ( `/mnt/sdcard/`) 可能因手机而异，因此您可以使用 查询`Environment.getExternalStorageDirectory()`。

据我所知，它不能与资源一起使用，而只是文件系统中的文件。

此外，可能应该包括来自[Android 文档](http://developer.android.com/reference/android/os/Environment.html#getExternalStorageDirectory%28%29)的这个注释，这样“sdcard”就不会令人困惑。我的手机甚至没有外部 sdcard，但是我的 android 文件系统中的所有文件都放在 /sdcard/ 文件夹中，我不知道为什么。

> 注意：不要被这里的“外部”这个词弄糊涂了。最好将此目录视为媒体/共享存储。它是一个文件系统，可以保存相对大量的数据，并且在所有应用程序之间共享（不强制执行权限）。传统上这是一张 SD 卡，但它也可以作为设备中的内置存储实现，与受保护的内部存储不同，并且可以作为文件系统安装在计算机上。

# css - appendChild 可能在 IE9 中保持悬停 css 状态

> ID：12480333
> 
> 赞同：1
> 
> 时间：2012-09-18T15:37:09.393
> 
> 标签：css, hover, move, appendchild

我正在努力使一个简单的函数在 IE9 中工作。它在 Chrome 和 FF 中完美运行。目的是有 2 个“ul”列表并在点击时在它们之间移动“li”元素。我想在第一个容器（MultiListAvailableElements）中有蓝色背景的 li 元素，在鼠标悬停时变为绿色。在第二个容器（MultiListSelectedElements）中相反 - 绿色背景，鼠标悬停时变为蓝色。

问题是，在 IE9 元素中，在我将它们附加到相反列表之后，它们的行为就像它们永远不会松开悬停状态一样。我必须将鼠标移到它们上方（并移出）以使它们看起来像它们应该的那样。因此，例如，我从第一个容器中单击蓝色元素，它移动到第二个容器并且仍然是蓝色（第二个容器中的蓝色仅用于悬停状态，默认情况下它应该是绿色的，因为鼠标不再位于元素上方，因为该元素已移动到不同的位置）。然后我必须将鼠标移出第二个容器中的元素以使它们恢复正常（绿色）。

HTML：

```
<div style="height: 210px; width: 600px;">
    <div class="MultiListAvailableElements">
        <ul id="OptionsUL">
            <li id="id1" onclick="MLAdd(this)">1</li>
            <li id="id2" onclick="MLAdd(this)">2</li>
            <li id="id3" onclick="MLAdd(this)">3</li>
            <li id="id4" onclick="MLAdd(this)">4</li>
            <li id="id5" onclick="MLAdd(this)">5</li>
        </ul>
    </div>
    <div class="MultiListSelectedElements">
        <ul  id="SelectedUL">
        </ul>
    </div>
</div> 
```

CSS：

```
/* ------------------------------------ Available Elements --- */
.MultiListAvailableElements {
    overflow-y: scroll;
    width: 250px;
    height: 200px;
    border: 1px solid black;
}
.MultiListAvailableElements ul {
    margin: 0px;
    padding: 0px;
    list-style-type: none;
}
.MultiListAvailableElements ul li {
    background-color: #e5ecff;
    border: 1px solid #c3caff;
    width: 180px;
    text-align: center;
    margin-bottom: 2px;
    padding: 2px;
    cursor: pointer;
    cursor: hand;
    font-family: arial;
    font-size: small;
}
.MultiListAvailableElements ul li:hover {
    background-color: #e5ffec;
    border: 1px solid #a3ffaa;
}

/* ------------------------------------ Selected Elements --- */
.MultiListSelectedElements  {
    overflow-y: scroll;
    width: 250px;
    height: 200px;
    border: 1px solid black;
}
.MultiListSelectedElements ul {
    margin: 0px;
    padding: 0px;
    list-style-type: none;
}
.MultiListSelectedElements ul li {
    background-color: #e5ffec;
    border: 1px solid #a3ffaa;
    width: 180px;
    text-align: center;
    margin-bottom: 2px;
    padding: 2px;
    cursor: pointer;
    cursor: hand;
    font-family: arial;
    font-size: small;
}
.MultiListSelectedElements ul li:hover  {
    background-color: #e5ecff;
    border: 1px solid #c3caff;
} 
```

JavaScript：

```
function MLAdd(Obj) {
    document.getElementById("SelectedUL").appendChild(document.getElementById(Obj.id));
    document.getElementById(Obj.id).onclick = function () { MLDel(Obj); }
}
function MLDel(Obj) {
    document.getElementById("OptionsUL").appendChild(document.getElementById(Obj.id));
    document.getElementById(Obj.id).onclick = function () { MLAdd(Obj);
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-19T12:05:22.723

您实际上不必克隆。只需将其删除并将其附加到其他位置即可。此外，您不必从 DOM 请求元素，因为您已经将它作为参数传递给函数（它来自`this`原始函数调用中的 ）。

```
function MLAdd(Obj) {
    Obj.parentNode.removeChild(Obj);
    document.getElementById("SelectedUL").appendChild(Obj);
    Obj.onclick = function () { MLDel(Obj); }
} 
```

我还会缓存 document.getElementById("SelectedUL") 的结果，方法是将其设置在闭包内的变量中，但我将把它留给你自己弄清楚。

# ruby-on-rails - 如何重构“共享”方法？

> ID：12480334
> 
> 赞同：5
> 
> 时间：2012-09-18T15:37:15.447
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, methods, refactoring

我正在使用 Ruby on Rails 3.2.2，我想从我的模型/类中“提取”一些方法。也就是说，在不止一个类/模型中，我有一些方法（注意：方法与*用户授权*相关，被命名为“ [CRUD](http://en.wikipedia.org/wiki/Create,_read,_update_and_delete)方式”），它们实际上是相同的；所以我认为[DRY](http://en.wikipedia.org/wiki/Don%27t_repeat_yourself)方法是将这些方法放在“共享”模块或类似的东西中。

*实现这一目标的常见且正确的方法是什么？*例如，我应该将“共享”代码放在哪里（在哪些目录和文件中）？如何在我的类/模型中包含提到的方法？你有什么建议？

*注意*：我正在寻找“Ruby on Rails Way to make things”。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-09-18T16:00:47.427

一种流行的方法是使用 ActiveSupport 关注点。然后，您通常会将通用逻辑放置在`app/concerns/`or`app/models/concerns/`目录下（根据您的偏好）。一个说明性的例子：

```
# app/concerns/mooable.rb
module Mooable
  extend ActiveSupport::Concern

  included do
    before_create :say_moo

    self.mooables
      where(can_moo: true)
    end
  end

  private

  def say_moo
    puts "Moo!"
  end
end 
```

在模型中：

```
# app/models/cow.rb
class Cow < ActiveRecord::Base
  include Mooable
end 
```

为了使其以这种方式工作，您必须将以下行添加到`config/application.rb`

```
config.autoload_paths += %W(#{config.root}/app/concerns) 
```

更多信息：

*   [http://chris-schmitz.com/extending-activemodel-via-activesupportconcern/](http://chris-schmitz.com/extending-activemodel-via-activesupportconcern/)
*   [http://blog.waxman.me/extending-your-models-in-rails-3](http://blog.waxman.me/extending-your-models-in-rails-3)
*   [http://api.rubyonrails.org/classes/ActiveSupport/Concern.html](http://api.rubyonrails.org/classes/ActiveSupport/Concern.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-18T15:55:39.897

我的回答与 RoR 没有直接关系，而与 Ruby 有更多关系。

在 Ruby 中可以通过多种方式共享通用代码。在我看来，最明显的方法是创建包含代码的 Ruby 模块，然后将它们包含在您的类/模型中。这些共享模块通常位于应用根目录的 lib 目录下。例如：

```
# lib/authorizable.rb

module Authorizable
  def method1
     #some logic here
  end

  def method2
     #some more logic here
  end
end

# app/models/user.rb

 class User < ActiveRecord::Base
    include Authorizable
 end 
```

User 类现在可以调用属于 Authorizable 模块的 method1 和 method2。您可以将此模块包含在您想要的任何其他 Ruby 类中，这样您就可以干燥您的代码。

# ruby-on-rails - 创建一个表，其中包含用户首次看到的页面，而不是 cookie。是不好的做法吗？

> ID：12480335
> 
> 赞同：0
> 
> 时间：2012-09-18T15:37:17.553
> 
> 标签：ruby-on-rails, ruby, database, cookies

我试图避免客户端cookie，因为不同的浏览器会再次显示我的应用程序中的页面。

用户只需要在第一次看到它时才能看到它。然后我在这样的表中思考：

**表：**用户 x pages_that_viewed

```
user_id      seen_page         seen_profile        seen_another_page...

  12         2012-12-12 

  13         2012-12-12         2012-12-12 
```

然后我每次都必须将表用户加入这个用户......

然后另一个解决方案是将这些列直接添加到用户表中。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-18T16:03:19.163

根据您拥有的页面数量和计划添加的页面数量，每个附加页面都需要修改数据库架构。一般来说，这不是一个好主意。您可以改为为每个用户每页创建一条记录。user_id、page_id 上的索引。如果您想知道他们何时访问它，第三个字段将是日期，否则将使用布尔值。另一种选择是使用位图，但如果您需要日期，这将不起作用，但是每页只需要 1 条记录来跟踪所有用户访问。

位图字段将存储类似 001000100011110010 的内容，其中每个数字代表一个 user_id 并存储对该页面的访问。前任。user_id 12，将是第 12 位 0 或 1 等。在访问时，您将更新 1 个字段并将第 N 位设置为 1。位图通常非常快并支持一些额外的操作，如联合、交叉等。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-18T16:04:21.113

我认为列会更具成本效益，更少的查询......

尝试一个布尔游览列，然后当有人登录到您的应用程序时，只需获取该列并将其存储在会话中

```
session[:tour] ||= @user.tour 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-18T16:52:25.957

在阅读了您的最后一条评论后，我提出了这个想法，我认为您应该在用户和页面之间建立一个多对多关联的关系，然后您可以有一个联结表 pages_users，其中包含 user_id 和 page_id 列，然后在每次渲染时检查当前用户是否有当前页面。我认为这是最好的方法。

# android - 如何在我的邮件服务器中创建（或注册）新的 pop3 电子邮件帐户

> ID：12480337
> 
> 赞同：3
> 
> 时间：2012-09-18T15:37:30.893
> 
> 标签：android, pop3, mail-server

我正在创建一个具有 API 来创建新的 pop3 电子邮件帐户的 android 应用程序。我正在使用圆形网络邮件客户端创建新的电子邮件帐户（手动）。但我需要以编程方式创建新帐户。我已经在互联网上进行了搜索。但我没有得到任何样品。任何人都可以提供一些提示或示例以在 android 中创建（或注册）新的 pop3 电子邮件帐户。

[我的问题与此](https://stackoverflow.com/questions/11560247/create-email-account-from-type-existing-account-services)类似。

我的目标是为任何邮件服务器创建新的电子邮件帐户。我知道每个邮件服务器的 API 都有不同的。我可以创建通用 API 来为任何邮件服务器创建新的电子邮件帐户吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-26T12:39:49.657

除非您控制电子邮件服务器或找到允许这样做的电子邮件服务器，否则我认为您无法按照您的要求进行操作。大多数“公共”pop3 服务器会阻止此类事情，以防止垃圾邮件发送者创建帐户。出于这个原因，雅虎、GMail 等网站使用验证码等。

[通过 API 创建 gmail、facebook 和 twitter 帐户？](https://stackoverflow.com/questions/3956050/create-gmail-facebook-and-twitter-account-through-api)

如果您与某些特定的电子邮件提供商建立了受信任的关系，那么您可以在有限的基础上实现这一点，但旨在通过 API 在任何地方创建电子邮件帐户不会走得太远。

# javascript - 调用同一个 jQuery 插件实例

> ID：12480339
> 
> 赞同：0
> 
> 时间：2012-09-18T15:37:36.213
> 
> 标签：javascript, jquery

我在下面编写了一个 jQuery 插件，并希望能够为元素上的同一个实例再次调用它。

插件去...

```
(function($) {
    $.fn.myPlugin = function(options){

        var settings = {
            color: null
        };

        if (options) {  
            $.extend(settings, options);
        }

        return this.each(function(){
            var self = this;
            var pics = $('li', self);

            function refresh() {
                pics = $('li', self);
            };

            $('a', self).click(function(){
                pics.filter(':last').remove();
                alert(settings.color);
                refresh();
                return false;
            });
        });
    }
})(jQuery); 
```

在页面中，这被称为...

```
$('#test').myPlugin({ color: 'blue' }); 
```

现在我想为同一个实例调用同一个插件，但将字符串`refresh`作为选项传递，而所有其他变量都是相同的（所以颜色仍然是`blue`）例如..

```
$('#test').myPlugin('refresh'); 
```

这将执行该`refresh()`功能。

我怎么能用上面的方法做到这一点？

**编辑：**为了更清楚，我正在考虑 jQuery UI 如何处理他们的插件。在[可排序](http://jqueryui.com/demos/sortable/)插件中，您可以执行`$("#sortable").sortable();`然后`$("#sortable").sortable('refresh');`在同一元素上执行。这就是我想要达到的目标。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-18T15:55:15.917

您可以存储您的实例[`.data()`](http://api.jquery.com/data/)并在创建实例时对其进行检查。

就像是：

```
$.fn.doStuff = function () {
  var ob = $(this);
  var data = ob.data();
  if (data.doStuff !== undefined) {
    return data.doStuff;
  }
  doStuff;
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-18T15:51:58.950

```
(function($) {
$.fn.myPlugin = function(options){
    var init = function($self, ops){
        $self.find("a").click(function(){
            pics.filter(':last').remove();
            alert(settings.color);
            refresh();
            return false;
        });
    };  

    this.refresh = function(){
       //your code here
    };

    return this.each(function(){
        var self = this;
        var pics = $('li', self);
        var settings = {
            color: null
        };    

        var ops = $.extend(true, settings, options);

        init($(this), ops);            

    });
}
})(jQuery); 
```

尝试这样的事情。你可以像 $().myPlugin().refresh(); 这样调用 refresh();

# html - 在 IE8 中修复项目的 z-index

> ID：12480342
> 
> 赞同：1
> 
> 时间：2012-09-18T15:37:49.317
> 
> 标签：html, css, iframe, alert

我有这个 CSS 代码： http: [//lawb.co.il/style.css](http://lawb.co.il/style.css)

我将它用于此站点[http://nave.net23.net](http://nave.net23.net)

正如您在 google chrom、firefox、IE9 中看到的那样，它工作得很好，问题是当我在 IE8 或 IE7 中打开这个网站时，整个表单都在 iframe 标签中，而在 IE8 中，表单覆盖了幻灯片图像和主要部分. 如果我将 iframe z-index 样式更改为零，则当某人未正确填写表单中的所有字段时，应显示的警报，在“下方”安装在其上方的幻灯片中...你能帮我修复它吗所以警报将在文本上方，而幻灯片和 iframe 标签将同时在它们下方？十分感谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-18T15:54:15.140

在 IE 中，默认情况下 iframe 背景不采用透明颜色，您必须为`allowTransparency="true"`iframe 提供属性才能实现。

# mongodb - 不同类型的MongoDB节点

> ID：12480344
> 
> 赞同：0
> 
> 时间：2012-09-18T15:37:53.390
> 
> 标签：mongodb

我正在构建一个监控插件，旨在检测 - 除其他事项外 - 任何给定的 Mongo 节点已关闭。这些是我正在寻找的节点类型：`mongo-s`、`mongo-d` `configsvr`、副本集，以及构成副本集的各个分片——主分片、辅助分片和仲裁器。我正在从`getShardMap`命令中收集节点列表，并分别查询每个节点以找出它是哪种类型。我可能需要注意其他类型的节点吗？如果是这样，我在哪里可以找到 Mongo 命令中列出的它们？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-18T20:02:49.010

我认为您已经涵盖了不同“类型”的节点，但您可能还想监视每个副本集中每个节点的当前“状态”（除了是 PRIMARY 或 SECONDARY，节点还可以位于RECOVERY 状态，或处于 ROLLBACK 状态等）。您可以使用 replSetGetStatus 命令查询状态。此处列出了不同的状态： [http ://www.mongodb.org/display/DOCS/Replica+Set+Commands#ReplicaSetCommands-state](http://www.mongodb.org/display/DOCS/Replica+Set+Commands#ReplicaSetCommands-state)

# jquery - 似乎某些对象引用保留在内存中？

> ID：12480345
> 
> 赞同：0
> 
> 时间：2012-09-18T15:37:53.780
> 
> 标签：jquery

[代码](http://jsfiddle.net/pfnw9/1/)：

# HTML

```
<a id="go" href="javascript:void(0);">Start</a>

<div id="container">
    <div class="example" id="example1">1</div>
    <div class="example" id="example2">2</div>
    <div class="example" id="example3">3</div>
</div> 
```

# jQuery

```
$('#go').click(function () {
    InitDragDrop();
});

function InitDragDrop() {
    var BoxImmagineFutura = null;

    $('#boxTemp').remove();
    BoxImmagineFutura = $('<div/>', { id: 'boxTemp', class: 'boxTempClass', text: 'Added' });
    BoxImmagineFutura.appendTo($("#container"));

    $('.example').mousedown(function (e) {
        BoxImmagineFutura.insertBefore("#example2");
        BoxImmagineFutura.show();
    });
} 
```

# CSS

```
.example, #boxTemp
{
    float:left;
    width:40px;
    height:40px;
    margin:10px;
    border:1px solid #000000;
    cursor:pointer;
}

#boxTemp
{
    background-color:red;
    display:none;
}
​ 
```

为了 ：

1.  点击开始初始化函数/处理程序；
2.  单击一个 div（当您按下鼠标时，您将显示已添加框）；
3.  再次点击开始重置所有变量；
4.  比再次单击一个 div ：为什么有两个已添加的 div？我已经删除了前一个`$('#boxTemp').remove();`

你能帮我解决这个麻烦吗？如果我删除`BoxImmagineFutura.insertBefore("#example2");`，则该 div 没有“克隆”。

# 第一次编辑：

是的，每次我调用 InitDragDrop() 我也应该 unbind `mousedown()`，但这并不能解释我的问题

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-18T15:52:35.590

把你从你的职能中拉`var BoxImmagineFutura = null;`出来。此外，您不需要将其`BoxImmagineFutura.appendTo($("#container"));`作为`insertBefore`句柄插入 DOM。

**[jsFiddle 示例](http://jsfiddle.net/j08691/pfnw9/3/)**

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-18T15:47:08.423

您只是在鼠标悬停时隐藏 BoxImmagineFutura 而不是删除。如果你仔细看的话， $('#boxTemp').remove(); 当您单击开始时，只会调用一次。并且在第一个实例 '#boxTemp' 不存在所以 $('#boxTemp').remove(); 什么都不做。接下来，当您将鼠标放在“.example”上时，它将简单地在“#example2”之前插入另一个 div，而当您“mouseup”时，您只是隐藏了这个 div。

如果你只是移动 $('#boxTemp').remove(); 而不是那样 在“mouseup”事件中，您的问题将得到解决。

你也没有为克隆做任何事情。这意味着，一旦你使用了 BoxImmagineFutura，它就消失了。

# java - 两个相对布局垂直显示

> ID：12480349
> 
> 赞同：1
> 
> 时间：2012-09-18T15:38:04.027
> 
> 标签：java, android, layout, user-interface

这是 XML 代码：

```
 <?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_height="fill_parent" android:layout_width="fill_parent">
    <RelativeLayout
        android:layout_width="fill_parent"
        android:layout_height="wrap_content">
    <TextView android:layout_height="wrap_content"
        android:layout_width="wrap_content" android:text="Welcome"
        android:layout_centerInParent="true" android:textSize="20sp"/>
    </RelativeLayout>
    <RelativeLayout
        android:layout_width="fill_parent"
        android:layout_height="wrap_content">
    <TextView android:layout_height="wrap_content"
        android:layout_width="wrap_content" android:text="Welcome"
        android:layout_centerInParent="true" android:textSize="20sp"/>
    </RelativeLayout>
</RelativeLayout> 
```

这不是真正的场景（UI 设计不是那个代码，但我将其呈现为简化）。我从这段代码中得到的除了是 TextViews 将相对地（以垂直方式）一个一个地显示。喜欢：

```
 Welcome
                     Welcome 
```

但相反，输出如下：

```
 Welcome 
```

就像，它们嵌套在一起，彼此堆叠。我将宽度布局设置为填充父级，那么为什么其他布局没有下降？它覆盖了第一个相对布局。

**我必须有 2 个布局，所以请不要建议我只创建一个布局。**

谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-18T15:41:54.463

您需要设置布局的关系。

试试我在下面所做的修改。

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_height="fill_parent" android:layout_width="fill_parent">
    <RelativeLayout
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:layout_alignParentTop="true"
        android:id="@+id/top_rel>
    <TextView android:layout_height="wrap_content"
        android:layout_width="wrap_content" android:text="Welcome"
        android:layout_centerInParent="true" android:textSize="20sp"/>
    </RelativeLayout>
    <RelativeLayout
        android:layout_width="fill_parent"
        android:layout_height="wrap_content" 
        android:layout_below="@id/top_rel>
    <TextView android:layout_height="wrap_content"
        android:layout_width="wrap_content" android:text="Welcome"
        android:layout_centerInParent="true" android:textSize="20sp"/>
    </RelativeLayout>
</RelativeLayout> 
```

我已经给出了顶部布局，`android:id="@+id/top_rel"`以使其更容易识别。

我还告诉它使用`android:layout_alignParentTop="true"`.

`RelativeLayout`然后通过使用将较低的布局放置在顶部的下方`android:layout_below="@id/top_rel"`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-18T15:44:51.327

首先，给第一个文本视图对应的相对布局的一些 id。然后使用 id，为第二个相对布局添加 layout_below 属性。这样它将显示在第一个文本视图的下方..

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_height="fill_parent" android:layout_width="fill_parent">

 <RelativeLayout
        android:id = "@+id/first_layout"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content">
    <TextView android:layout_height="wrap_content"
        android:layout_width="wrap_content" android:text="Welcome"
        android:layout_centerInParent="true" android:textSize="20sp"/>
    </RelativeLayout>
    <RelativeLayout
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:layout_below="@id/first_layout">
    <TextView android:layout_height="wrap_content"
        android:layout_width="wrap_content" android:text="Welcome"
        android:layout_centerInParent="true" android:textSize="20sp"/>
    </RelativeLayout>
</RelativeLayout> 
```

# asp.net - 如何将 csv 文件上传到 Intranet VB.NET 站点上的 SQL 数据库

> ID：12480350
> 
> 赞同：0
> 
> 时间：2012-09-18T15:38:06.600
> 
> 标签：asp.net, sql-server, vb.net, csv, intranet

我在将 CSV 文件上传到我的 SQL 数据库时遇到问题。我正在尝试通过 Intranet 站点上的文件上传技术来实现这一点。Intranet 站点供我和另一位用户上传这些 CSV 文件（以防我们中的一个人出局）。

我使用了以下内容；

```
 Dim errorList As String = String.Empty
    Dim returnValue As Integer = 0
    Dim SQLCon As New SqlClient.SqlConnection
    Dim SQLCmd As New SqlClient.SqlCommand
    Dim ErrString As String

    Dim countRecs As Integer = 0
    Dim batchid As Integer = GetNextBatchNumber("PartsImport")

    Using tf As New TextFieldParser(fileandpath)
        tf.TextFieldType = FileIO.FieldType.Delimited
        tf.SetDelimiters(",")

        SQLCon.ConnectionString = ConfigurationManager.ConnectionStrings("DB00ConnectionString").ConnectionString
        SQLCon.Open()
        SQLCmd.CommandType = CommandType.Text
        SQLCmd.Connection = SQLCon

        Dim recAdded As String = Now.ToString
        Dim row As String()
        While Not tf.EndOfData

            Try
                row = tf.ReadFields()
                Dim x As Integer = 0
                If countRecs <> 0 Then
                    Try
                      SQLCmd.CommandText = "insert into [Base].[PartsImport] " _
                      + " (ID,PartName,PartID,Price,ShipAddress) " _
                      + " values ('" + row(0) + "','" + row(1) + "','" _
                      + row(2) + "','" + row(3) + "','" + row(4) + "')"
                        SQLCmd.ExecuteNonQuery()

                    Catch ex As Exception
                        ErrString = "Error while Creating Batch Record..." & ex.Message
                    End Try
                End If

            Catch ex As MalformedLineException
                errorList = errorList + "Line " + countRecs + ex.Message & "is not valid and has been skipped." + vbCrLf
            End Try
            countRecs = countRecs + 1
        End While

        SQLCon.Close()
        SQLCon.Dispose()
        SQLCmd.Dispose() 
```

当我单击表单按钮上传时，它给了我一条成功消息，但是当我查看实际表格时，它仍然是空白的。

有任何想法吗？欣赏它

谢谢戴夫

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-18T16:14:16.833

```
private void UploaddataFromCsv()
        {
            SqlConnection con = new SqlConnection(@"Data Source=local\SQLEXPRESS;Initial Catalog=databaseName;Persist Security Info=True;User ID=sa");
            string filepath = "C:\\params.csv";
            StreamReader sr = new StreamReader(filepath);
            string line = sr.ReadLine();
            string[] value = line.Split(',');
            DataTable dt = new DataTable();
            DataRow row;
            foreach (string dc in value)
            {
                dt.Columns.Add(new DataColumn(dc));
            }

            while ( !sr.EndOfStream )
            {
                value = sr.ReadLine().Split(',');
                if(value.Length == dt.Columns.Count)
                {
                    row = dt.NewRow();
                    row.ItemArray = value;
                    dt.Rows.Add(row);
                }
            }
            SqlBulkCopy bc = new SqlBulkCopy(con.ConnectionString, SqlBulkCopyOptions.TableLock);
            bc.DestinationTableName = "[Base].[PartsImport]";
            bc.BatchSize = dt.Rows.Count;
            con.Open();
            bc.WriteToServer(dt);
            bc.Close();
            con.Close();
        } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-18T20:34:53.737

尝试捕获 SqlException 并查看您的请求是否存在格式问题。如果 ID 上有标识列，则不应从 CSV 显式设置它，因为这可能会导致潜在的重复项被提交到您的数据库。另外，我怀疑您的类型中有一些类型不匹配，因为您在似乎是数字列的地方加上引号。我建议您考虑将查询中的字符串连接替换为使用参数来避免不正确的引号转义问题（即，如果您的 PartName 为“O'Reily's auto parts”会发生什么？）这样的事情可能会奏效。请注意，我在 LINQ 世界中待了这么久，这里可能有一些语法错误。

```
SQLCon.ConnectionString = ConfigurationManager.ConnectionStrings("DB00ConnectionString").ConnectionString
        SQLCon.Open()
        SQLCmd.CommandType = CommandType.Text  'Setup Command Type
        SQLCmd.CommandText = "insert into [Base].[PartsImport] " _
                      + " (PartName,PartID,Price,ShipAddress) " _
                      + " values (@PartName, @PartID, @Price, @ShipAddress)'"
        Dim partNameParam = New SqlParameter("@PartName", SqlDbType.VarChar)
        Dim partIdParam = New SqlParameter("@PartID", SqlDbType.Int)
        Dim partPriceParam = New SqlParameter("@Price", SqlDbType.Money)
        Dim partAddressParam = New SqlParameter("@ShipAddress", SqlDbType.VarChar)
        SQLCmd.Parameters.AddRange(  {partNameParam, partIdPAram, partPriceParam, partAddressParam})
        SQLCmd.Connection = SQLCon

        Dim recAdded As String = Now.ToString()
        Dim row As String()
        While Not tf.EndOfData

            Try
                row = tf.ReadFields()
                Dim x As Integer = 0
                If countRecs <> 0 Then
                    Try
                       partNameParam.Value = row[1]
                       partIdParam.Value = row[2]
                       partPriceParam.Value = row[3]
                       partAddressParam.Value = row[4]

                       SQLCmd.ExecuteNonQuery()

                    Catch ex As Exception
                        ErrString = "Error while Creating Batch Record..." & ex.Message
                    End Try
                End If

            Catch ex As MalformedLineException
                errorList = errorList + "Line " + countRecs + ex.Message & "is not valid and has been skipped." + vbCrLf
            End Try
            countRecs = countRecs + 1
        End While

        SQLCon.Close() 'TODO: Change this to a Using clause
        SQLCon.Dispose() 
        SQLCmd.Dispose() 'TODO: Change this to a Using clause 
```

话虽如此，如果您要插入大量项目，批量复制示例是一个更好的答案。

# php - MYSQL 和 PHP 重新编号元素

> ID：12480359
> 
> 赞同：0
> 
> 时间：2012-09-18T15:39:00.987
> 
> 标签：php

除了我试图从 1 开始重新编号表“example2”上的所有项目之外，我的代码有效。例如，我在表上输入了 3 个元素，其中包含（“url”，“number”）。number 用于跟踪元素，因此如果删除了数字 2，我需要剩余的两个元素来调整第一个仍然是 1 而第三个变为 2 的位置。这就是我所拥有的：

```
<?php
 $field1_name = $_POST['Number'];
 $size = 0;
 $con = mysql_connect("localhost", "*****", "*****") or die(mysql_error());
 mysql_select_db("test") or die(mysql_error());
 mysql_query("DELETE FROM example2 WHERE number='$field1_name'") 
 or die(mysql_error()); 
 $result = mysql_query("SELECT COUNT(*) FROM example2");
 $row = mysql_fetch_assoc($result);
 $size = $row['COUNT(*)'];
 $l = 1; while ($l <= $size) { $temp = "${"example2_$l"}"; 
 mysql_query("UPDATE example2                                              
 SET number = '$temp' WHERE number = $l"); mysql_query($query)or 
 die(mysql_error());$temp++; $l++;};

 mysql_close($con);
 ?>
  <script language="javascript" type="text/javascript">
    window.location = 'table.html';
  </script> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-19T01:41:13.763

您的`while`循环有点令人困惑-您调用`mysql_query`了两次，第二次使用未定义的变量`$query`（我假设是调试工作的结果）。

一个更简单的解决方案可能是从所有大于删除元素的元素中减去一个：

```
<?php

 $con = mysql_connect("localhost", "*****", "*****") or die(mysql_error());

 $field1_name = mysql_real_escape_string($_POST['Number']);

 mysql_select_db("test") or die(mysql_error());
 mysql_query("DELETE FROM example2 WHERE number='$field1_name'") 
    or die(mysql_error()); 

 mysql_query("UPDATE example2 SET number = number - 1 WHERE number > '$field1_name'") 
    or die(mysql_error());

 mysql_close($con);

?> 
```

我还为您的输入添加了一些转义，因为您本来就容易受到 SQL 注入的攻击。您可能需要考虑使用[PDO](http://www.php.net/manual/en/ref.pdo-mysql.php)或[MySQLi](http://www.php.net/manual/en/book.mysqli.php)作为更强大的解决方案。

# magento - Magento Fancybox

> ID：12480362
> 
> 赞同：0
> 
> 时间：2012-09-18T15:39:09.160
> 
> 标签：magento, fancybox

我是结帐页面中的 Magento 新手。我有一个文本字段，文本字段的 onblur 将打开一个精美的框弹出窗口。所以在 checkout.phtml 中我放置了一个 div 以在弹出窗口中显示它们的内容并将 CSS 属性显示设置为无。

在模糊中，我调用了一个 JS 函数并加载了弹出框，为此我编写了 JS 函数 - jQuery(".zipformcont").fancybox().trigger('click');

zipformcont 是 div 的类名。

问题是弹出正在加载错误 - “无法加载请求的内容。请稍后再试。”

请帮我解决这个问题。谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-18T15:45:21.200

而不是使用 .trigger(); 为什么不这样调用fancybox：

```
jQuery.fancybox(); 
```

Fancybox 根据其连接的选择器触发。不是它要打开的div。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-21T19:32:03.350

```
jQuery(function(){
   jQuery('#zipcode').blur(function(){
      jQuery.fancybox({
         "content":$('#formcontainer'),
         "hideOnContentClick": true,
         "hideOnOverlayClick": true
      });
   });
}); 
```

这应该这样做并摆脱 onblur 属性

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-24T16:23:22.543

我尝试了另一种选择，现在它工作正常。 **选项** 1) 使用 CSS 属性创建了一个 div - 显示为无

```
<div style="display:none"><a id="azcodelink" href="#zipcode_form">test</a></div> 
```

2）在textfield中，Onblur调用了一个JS函数

```
<input type="text" name="namefld" id="namefld" value="" onblur="openpopup()" /> 
```

3）在JS函数中，我触发了“azcodelink”的点击函数

```
function openpopup() {
    $("#azcodelink").trigger('click');
} 
```

4) id - zipcode_form - 有弹出内容

```
<form id="zipcode_form">
...
</form> 
```

就这样..

感谢您的支持。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-11-02T07:58:06.660

```
<script type="text/javascript">
jQuery.noConflict();
jQuery(document).ready(function(){
jQuery(".fancybox").fancybox({
        openEffect  : 'none',
        closeEffect : 'none',
        iframe : {
            preload: false
        }
    });
});     
</script>

<script type="text/javascript" src="http://dev.smartparcelbox.com/skin/frontend/rwd/default/js/jquery.fancybox.pack.js"></script 
```

# python - 如何在 python 中递归生成目录大小，如 du 。做？

> ID：12480367
> 
> 赞同：1
> 
> 时间：2012-09-18T15:39:26.180
> 
> 标签：python, filesystems, operating-system

可以说我的结构是这样的

```
/-- am here
/one/some/dir
/two
/three/has/many/leaves
/hello/world 
```

并说 /one/some/dir 包含一个大文件，500mb，/three/has/many/leaves 在每个文件夹中包含一个 400mb 文件。

我想为每个目录生成大小，以获得这个输出

```
/ - in total for all
/one/some/dir 500mb
/two 0 
/three/has/many/leaved - 400mb
/three/has/many 800
/three/has/ 800+someotherbigfilehere 
```

我该怎么办？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-09-18T15:49:08.773

看看[`os.walk`](http://docs.python.org/library/os.html#os.walk)。具体来说，文档有一个查找目录大小的示例：

```
import os
from os.path import join, getsize
for root, dirs, files in os.walk('python/Lib/email'):
    print root, "consumes",
    print sum(getsize(join(root, name)) for name in files),
    print "bytes in", len(files), "non-directory files"
    if 'CVS' in dirs:
        dirs.remove('CVS')  # don't visit CVS directories 
```

这应该很容易根据您的目的进行修改。

* * *

这是针对您的评论的未经测试的版本：

```
import os
from os.path import join, getsize
dirs_dict = {}

#We need to walk the tree from the bottom up so that a directory can have easy
# access to the size of its subdirectories.
for root, dirs, files in os.walk('python/Lib/email',topdown = False):

    # Loop through every non directory file in this directory and sum their sizes
    size = sum(getsize(join(root, name)) for name in files) 

    # Look at all of the subdirectories and add up their sizes from the `dirs_dict`
    subdir_size = sum(dirs_dict[join(root,d)] for d in dirs)

    # store the size of this directory (plus subdirectories) in a dict so we 
    # can access it later
    my_size = dirs_dict[root] = size + subdir_size

    print '%s: %d'%(root,my_size) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-10-02T14:21:42.067

实际上，如果目录中有符号链接，@mgilson 答案将不起作用。为了允许你必须这样做：

```
dirs_dict = {}
for root, dirs, files in os.walk(directory, topdown=False):
    if os.path.islink(root):
        dirs_dict[root] = 0L
    else:
        dir_size = getsize(root)

        # Loop through every non directory file in this directory and sum their sizes
        for name in files:
             full_name = join(root, name)
             if os.path.islink(full_name):
                 nsize = 0L
             else:
                 nsize = getsize(full_name)
             dirs_dict[full_name] = nsize
             dir_size += nsize

        # Look at all of the subdirectories and add up their sizes from the `dirs_dict`
        subdir_size = 0L
        for d in dirs:
            full_d = join(root, d)
            if os.path.islink(full_d):
                dirs_dict[full_d] = 0L
            else:
                subdir_size += dirs_dict[full_d]

        dirs_dict[root] = dir_size + subdir_size 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-01-03T18:59:33.393

以下脚本打印指定目录的所有子目录的目录大小。该脚本应该独立于平台 - Posix/Windows/等。它还尝试从缓存递归函数的调用中受益（如果可能）。如果省略参数，则脚本将在当前目录中运行。输出按目录大小从大到小排序。因此，您可以根据需要对其进行调整。

PS 我使用配方[578019](http://code.activestate.com/recipes/578019/)以人性化的格式显示目录大小

```
from __future__ import print_function
import os
import sys
import operator

def null_decorator(ob):
    return ob

if sys.version_info >= (3,2,0):
    import functools
    my_cache_decorator = functools.lru_cache(maxsize=4096)
else:
    my_cache_decorator = null_decorator

start_dir = os.path.normpath(os.path.abspath(sys.argv[1])) if len(sys.argv) > 1 else '.'

@my_cache_decorator
def get_dir_size(start_path = '.'):
    total_size = 0
    if 'scandir' in dir(os):
        # using fast 'os.scandir' method (new in version 3.5)
        for entry in os.scandir(start_path):
            if entry.is_dir(follow_symlinks = False):
                total_size += get_dir_size(entry.path)
            elif entry.is_file(follow_symlinks = False):
                total_size += entry.stat().st_size
    else:
        # using slow, but compatible 'os.listdir' method
        for entry in os.listdir(start_path):
            full_path = os.path.abspath(os.path.join(start_path, entry))
            if os.path.islink(full_path):
                continue
            if os.path.isdir(full_path):
                total_size += get_dir_size(full_path)
            elif os.path.isfile(full_path):
                total_size += os.path.getsize(full_path)
    return total_size

def get_dir_size_walk(start_path = '.'):
    total_size = 0
    for dirpath, dirnames, filenames in os.walk(start_path):
        for f in filenames:
            fp = os.path.join(dirpath, f)
            total_size += os.path.getsize(fp)
    return total_size

def bytes2human(n, format='%(value).0f%(symbol)s', symbols='customary'):
    """
    (c) http://code.activestate.com/recipes/578019/

    Convert n bytes into a human readable string based on format.
    symbols can be either "customary", "customary_ext", "iec" or "iec_ext",
    see: https://en.wikipedia.org/wiki/Binary_prefix#Specific_units_of_IEC_60027-2_A.2_and_ISO.2FIEC_80000

      >>> bytes2human(0)
      '0.0 B'
      >>> bytes2human(0.9)
      '0.0 B'
      >>> bytes2human(1)
      '1.0 B'
      >>> bytes2human(1.9)
      '1.0 B'
      >>> bytes2human(1024)
      '1.0 K'
      >>> bytes2human(1048576)
      '1.0 M'
      >>> bytes2human(1099511627776127398123789121)
      '909.5 Y'

      >>> bytes2human(9856, symbols="customary")
      '9.6 K'
      >>> bytes2human(9856, symbols="customary_ext")
      '9.6 kilo'
      >>> bytes2human(9856, symbols="iec")
      '9.6 Ki'
      >>> bytes2human(9856, symbols="iec_ext")
      '9.6 kibi'

      >>> bytes2human(10000, "%(value).1f %(symbol)s/sec")
      '9.8 K/sec'

      >>> # precision can be adjusted by playing with %f operator
      >>> bytes2human(10000, format="%(value).5f %(symbol)s")
      '9.76562 K'
    """
    SYMBOLS = {
        'customary'     : ('B', 'K', 'M', 'G', 'T', 'P', 'E', 'Z', 'Y'),
        'customary_ext' : ('byte', 'kilo', 'mega', 'giga', 'tera', 'peta', 'exa',
                           'zetta', 'iotta'),
        'iec'           : ('Bi', 'Ki', 'Mi', 'Gi', 'Ti', 'Pi', 'Ei', 'Zi', 'Yi'),
        'iec_ext'       : ('byte', 'kibi', 'mebi', 'gibi', 'tebi', 'pebi', 'exbi',
                           'zebi', 'yobi'),
    }
    n = int(n)
    if n < 0:
        raise ValueError("n < 0")
    symbols = SYMBOLS[symbols]
    prefix = {}
    for i, s in enumerate(symbols[1:]):
        prefix[s] = 1 << (i+1)*10
    for symbol in reversed(symbols[1:]):
        if n >= prefix[symbol]:
            value = float(n) / prefix[symbol]
            return format % locals()
    return format % dict(symbol=symbols[0], value=n)

############################################################
###
###  main ()
###
############################################################
if __name__ == '__main__':
    dir_tree = {}
    ### version, that uses 'slow' [os.walk method]
    #get_size = get_dir_size_walk
    ### this recursive version can benefit from caching the function calls (functools.lru_cache)
    get_size = get_dir_size

    for root, dirs, files in os.walk(start_dir):
        for d in dirs:
            dir_path = os.path.join(root, d)
            if os.path.isdir(dir_path):
                dir_tree[dir_path] = get_size(dir_path)

    for d, size in sorted(dir_tree.items(), key=operator.itemgetter(1), reverse=True):
        print('%s\t%s' %(bytes2human(size, format='%(value).2f%(symbol)s'), d))

    print('-' * 80)
    if sys.version_info >= (3,2,0):
        print(get_dir_size.cache_info()) 
```

样本输出：

```
37.61M  .\subdir_b
2.18M   .\subdir_a
2.17M   .\subdir_a\subdir_a_2
4.41K   .\subdir_a\subdir_a_1
----------------------------------------------------------
CacheInfo(hits=2, misses=4, maxsize=4096, currsize=4) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-06-30T19:35:45.433

我用这段代码实现了这一点：

```
def get_dir_size(path=os.getcwd()):

    total_size = 0
    for dirpath, dirnames, filenames in os.walk(path):

        dirsize = 0
        for f in filenames:
            fp = os.path.join(dirpath, f)
            size = os.path.getsize(fp)
            #print('\t',size, f)
            #print(dirpath, dirnames, filenames,size)
            dirsize += size
            total_size += size
        print('\t',dirsize, dirpath)
    print(" {0:.2f} Kb".format(total_size/1024)) 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2020-08-20T22:27:17.950

我使用`pathlib`模块实现了这一点。以下代码将为给定目录树中的每个子目录计算正确的目录大小。

* * *

> **注意：**如果您只想计算给定根目录的总大小，*而*不是使用此代码计算所有单个子目录的总大小，那么您必须摆脱外部循环，即 -`for sub in subdir:`并相应地替换`ls = list(sub.rglob('*.*'))`并`ls = list(dir_path.rglob('*.*'))`更正缩进。

* * *

`Python 3.7.6`因此，这是使用on生成的示例代码`Windows`。

```
import os 
from pathlib import Path

# Set home/root path
dir_path = Path('//?/C:/Downloads/.../.../.../.../...')

# IMP_NOTE: If the path is 265 characters long, which exceeds the classic MAX_PATH - 1 (259) character
# limit for DOS paths. Use an extended (verbatim) path such as "\\\\?\\C:\\" in order 
# to access the full length that's supported by the filesystem -- about 32,760 characters. 
# Alternatively, use Windows 10 with Python 3.6+ and enable long DOS paths in the registry.

# pathlib normalizes Windows paths to use backslash, so we can use
# Path('//?/D:/') without having to worry about escaping backslashes.

# Generate a complete list of sub-directories
subdir = list(x for x in dir_path.rglob('*') if x.is_dir())

for sub in subdir:
    tot_dir_size = 0
    ls = list(sub.rglob('*.*'))
    # print(sub, '\n')
    # print(len(ls), '\n')
    for k in ls:
        tot_dir_size += os.path.getsize(k)
    # print(format(tot_dir_size, ',d'))
    print("For Sub-directory: " + sub.parts[-1] + "   ===>   " + 
          "Size = " + str(format(tot_dir_size, ',d')) + "\n")

# path.parts ==> Provides a tuple giving access to the path’s various components
# (Ref.: pathlib documentation) 
```

* * *

> **输出：**

* * *

```
 For Sub-directory: DIR_1   ===>   Size = 5,600,621,618

For Sub-directory: DIR_2   ===>   Size = 9,113,492,347

For Sub-directory: DIR_3   ===>   Size = 928,986,489

For Sub-directory: DIR_4   ===>   Size = 2,125,250,470 
```

# mysql - SELECT 中单个字段的双重替换

> ID：12480371
> 
> 赞同：1
> 
> 时间：2012-09-18T15:39:31.810
> 
> 标签：mysql

如何在同一字段上运行带有两个替换的选择？

```
SELECT `id`, `name`, `address`, REPLACE( `info`, '|', '-' ) AS `info` 
INTO OUTFILE '/tmp/" . $SESSION . "NET_SCAN.csv' 
FIELDS TERMINATED BY '|' 
ENCLOSED BY '' 
LINES TERMINATED BY '\n' 
FROM `net_scan`; 
```

我想在同一字段上运行辅助 REPLACE。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-18T15:41:02.107

只是`REPLACE`在它自己内部使用。

```
REPLACE(REPLACE(field, 'bad', 'good'), 'better', 'worse') 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-18T15:40:46.167

```
replace(REPLACE( `info`, '|', '-' ), 'x', 'y')) 
```

# google-drive-api - 是否可以使用转换字段使用 Microsoft Office 文件中的数据更新 Google Docs 文件？

> ID：12480376
> 
> 赞同：1
> 
> 时间：2012-09-18T15:39:49.007
> 
> 标签：google-drive-api

我希望能够远程编辑 Google Docs 文件。我可以将文件导出为 Office 等可编辑格式，但无法将编辑后的数据填回原处。我总是可以删除原始文件并通过上传新文件并将其转换回 Google Docs 格式来替换它，但这会删除所有修订历史记录。

API似乎表明文件更新功能支持转换字段，但我没有成功让它工作。这可能吗？

在我的测试中，我有一个 Google 演示文稿，并尝试使用二进制数据中的 MS PPTX 文件对其进行更新，将 mime 类型设置为“application/vnd.openxmlformats-officedocument.presentationml.presentation”并设置 convert=true, all使用 Drive 的 Objective-C 库。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-19T15:37:07.177

将 mimeType 留空，并设置 convert=true。使用 convert=true，它只能转换为一种类型的 Google Docs。

是的，您将丢失修订历史记录。

# php - 使用 foreach 函数插入错误重复

> ID：12480379
> 
> 赞同：-1
> 
> 时间：2012-09-18T15:39:56.023
> 
> 标签：php

我有这段代码允许我在数据库中插入一些信息：

```
$att_id=$_REQUEST['att_id'];

$date=$_REQUEST['date'];
$pdv=$_REQUEST['checkbox'];

foreach($date as $val) {
foreach ($pdv as $pdv1) {
$values_arr[] = "('" . $val . "','" . $pdv1 . "','" . $att_id . "')";

$values = implode(", ", $values_arr);

$sql="INSERT INTO date_pdv (date,id_pdv,att_id) VALUES $values";
mysql_query($sql)or die(mysql_error());
}
} 
```

现在，要点是，如果数组 date 有这个值 [1,2] 并且数组 pdv 有这个值 [1,2,3] 我应该在数据库中得到的是：

```
1-1
1-2
1-3
2-1
2-2
2-3 
```

但我没有......我在数据库上得到重复的值......我应该使用数组的任何长度......等等吗？谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-19T07:16:25.853

```
$att_id=$_REQUEST['att_id'];
$date=$_REQUEST['date'];
$pdv=$_REQUEST['checkbox'];

foreach($date as $val) {
  foreach ($pdv as $pdv1) {
    $values_arr[] = "('" . $val . "','" . $pdv1 . "','" . $att_id . "')";
  }
}
$values = implode(", ", $values_arr);
$sql="INSERT INTO date_pdv (date,id_pdv,att_id) VALUES $values";
mysql_query($sql)or die(mysql_error()); 
```

您在循环的每次迭代中运行插入查询，这就是为什么您最终会得到大量重复行的原因。

注意闭环上`}`的位置`foreach`

# asp.net-mvc - 使用 asp.net/MVC Razor/Telerik 自定义复选框图像

> ID：12480380
> 
> 赞同：1
> 
> 时间：2012-09-18T15:40:02.090
> 
> 标签：asp.net-mvc, checkbox, telerik

我使用带有 Razor 的 asp.net MVC3 并且我有 Telerik 控件可用。有没有办法使用 MVC HTML 帮助程序或 Telerik MVC 控件来制作适用于图像的自定义复选框？

例如 - 我们可以使用两个灯泡图像作为复选框，而不是使用带或不带复选标记的框。用户将单击“关闭”灯泡图像，该图像将切换到“打开”图像以指示选中，并且用户将单击“打开”灯泡图像将切换到“关闭”图像以指示未选中。

（仅供参考 - 我找到了一个使用 css 的示例，这对于寻找 css 解决方案的其他人来说看起来很有希望 -

[http://www.wufoo.com/2011/06/13/custom-radio-buttons-and-checkboxes/](http://www.wufoo.com/2011/06/13/custom-radio-buttons-and-checkboxes/)）

谢谢！

# vb.net - 使用 Angus J Clipper 库在 vb.net 中勾勒 GraphicsPath 文本

> ID：12480382
> 
> 赞同：1
> 
> 时间：2012-09-18T15:40:07.910
> 
> 标签：vb.net, gdi+, polygon, outline, graphicspath

我正在使用 DrawString 在 GDI+ GraphicsPath 中创建文本，然后将其作为路径输出到 PDF。

目前这一切都运行良好。

我遇到问题的时间是所选字体导致轮廓相互重叠。我有一个图像示例，虽然是一个新用户，但我无法上传它......（似乎毫无意义......？......）

我找到了一个[图书馆](http://www.angusj.com/delphi/clipper.php)，也找到了一个与我在这个[博客中寻找的相同的人](http://mkramar.blogspot.ca/2012/07/graphicspath-outline-in-c-alternative.html)

尽管我不断从库中获得一个空的解决方案，但我已将代码片段转换为 vb.net。

有没有其他人设法传入一个包含字符串的 graphicsPath 并使用这个或类似的库检索概述的文本？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-19T01:58:35.233

这是一些有效的 C# 代码...

```
 using ClipperLib;

    static public void PathToPolygon(GraphicsPath path, Polygons polys, Single scale)
    {
        GraphicsPathIterator pathIterator = new GraphicsPathIterator(path);
        pathIterator.Rewind();
        polys.Clear();
        PointF[] points = new PointF[pathIterator.Count];
        byte[] types = new byte[pathIterator.Count];
        pathIterator.Enumerate(ref points, ref types);
        int i = 0;
        while (i < pathIterator.Count)
        {
            Polygon pg = new Polygon();
            polys.Add(pg);
            do {

                IntPoint pt = new IntPoint((int)(points[i].X * scale), (int)(points[i].Y * scale));
                    pg.Add(pt);
                i++;
            }
            while (i < pathIterator.Count && types[i] != 0);
        }
    }

    static private PointF[] PolygonToPointFArray(Polygon pg, float scale)
    {
        PointF[] result = new PointF[pg.Count];
        for (int i = 0; i < pg.Count; ++i)
        {
            result[i].X = (float)pg[i].X / scale;
            result[i].Y = (float)pg[i].Y / scale;
        }
        return result;
    }

    private void DrawBitmap()
    {
        Font f = new Font("Arial", 90);
        Pen myPen = new Pen(Color.FromArgb(196, 0xC3, 0xC9, 0xCF), (float)0.6);
        SolidBrush myBrush = new SolidBrush(Color.FromArgb(127, 0xDD, 0xDD, 0xF0));
        path.Reset();
        Polygons polys;
        path.AddString("ABC", f.FontFamily, (int)f.Style, f.Size, new Point(100, 100), null);
        path.Flatten();
        //scale all points up by 100 because Clipper uses integer coordinates
        PathToPolygon(path, polys, 100);
        path.Reset();
        //offset polys remembering to multiply delta by scaling amount ...
        polys = Clipper.OffsetPolygons(polys, 7 * 100, JoinType.jtRound);
        for (int i = 0; i < polys.Count(); i++)
        {
            //reverses scaling ...
            PointF[] pts2 = PolygonToPointFArray(polys[i], 100);
            path.AddPolygon(pts2);
        }
        newgraphic.FillPath(myBrush, path);
        newgraphic.DrawPath(myPen, path);
    } 
```

![在此处输入图像描述](../Images/ba2f167a58615ce57ff585e5dcff8a6c.png)

# ios - 如何在没有冲突的情况下使用开源 iOS 库？

> ID：12480387
> 
> 赞同：6
> 
> 时间：2012-09-18T15:40:38.380
> 
> 标签：ios, json

我正在编写一个 iOS 库 (SDK)，我需要 JSON 解码支持。有很多选择，但问题是上游冲突。

如果我将 JSONKit 添加到我的库中，而另一个第三方库也这样做，那么想要同时使用我的库和另一个库的上游用户将遇到冲突。

这样看来，由于存在冲突的风险，我不可能将任何第三方库添加到我的库中。如何使用 iOS 库作为我的依赖项，而不会给上游开发人员造成冲突？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-19T07:27:35.337

> 如何使用 iOS 库作为我的依赖项，而不会给上游开发人员造成冲突？

只需指定该第三方库是您的库的依赖项，提供适当的项目链接，以及任何必要的说明、版本信息等。

如果该软件包/发行版不适合分发（例如，它们只有一堆源文件），则创建一个包含适当静态库目标的公共项目（fork）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-18T18:57:05.393

我们有同样的问题。这是我对如何解决它的想法（也许我们可以一起找出一个强大的解决方案）。对于版本控制，我们使用 Git：

*   一种选择是简单地使用您自己的标识符为库中的所有类添加前缀。这样，即使该类是 JSONKit 的一部分，我仍然会在它前面加上我自己的标识符（“JG”）以获取类名“JGJSONKit.h”。以这种方式，发生碰撞的可能性要小得多。

    这种方法的缺点是应该更新第三方存储库（例如 JSONKit），但是，将这些更改拉入我们库的 JSONKit 版本更加困难。

    但是，如果此代码打算作为静态库导出（因为您仍然保持对代码的完全控制，并且您可以手动将更改拉入第三方存储库并适当地重命名它们，那么这可能是可以接受的，如果您应该在以后的静态库更新中选择这样做）。

*   我考虑过的另一个选择是使用 Git 子模块。如果您的库是开源的（或者至少对有权访问它的开发人员开放源代码——不一定公开可用），这个解决方案似乎会更好。这样，开发人员可以选择**不**包含他们已经在自己的项目中使用的任何子模块。

想法？

**编辑：**

这是我们提出的解决方案：

1) 按照本教程，我们将共享代码（不是第三方编写的）封装到一个带有静态库目标的项目中，并将我们的共享资源（xib 和图像）封装到一个包中：

[https://github.com/jverkoey/iOS-Framework](https://github.com/jverkoey/iOS-Framework)

2) 我们创建了一个 Git 存储库，其中包含上述静态库和捆绑包。

3）我们分叉了所有需要的第三方库（因此我们可以根据需要对它们进行更改），并将原始存储库添加为每个分叉存储库中的另一个远程库（以便在上游进行更改，我们可以轻松地将它们拉入我们自己的叉）

4）我们将**-objc**添加到“其他链接器”标志（**重要**）中，以便所有类别在运行时都能正常工作。

总而言之，该解决方案对我们来说几乎是完美的：

我们通过隐藏第三方库（**不**包括在公共头文件中而是私有的）来避免冲突，或者我们警告这些库在项目中用于公开暴露的头文件并且开发人员不应再次添加它们（他们可以使用而是已经包含的代码，通过通过所述 Git 子模块方法包含它们的简单性来保持最新）

我希望这对你的努力也有帮助！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-18T22:02:53.407

我查看了 JSONKit，发现它不是静态库，它是一个 src 文件，可以复制到您的项目中。

您项目中的所有课程等都必须以您的（咳嗽）全球唯一的两个字母前缀作为前缀，包括您从互联网上复制和粘贴的课程。

如果 JSONKit 是一个库，你会更好。您的库将依赖于 JSONKit，但不包含它，并且由使用您的库构建应用程序的人来确保 JSONKit 也被包含并链接 - 没有冲突（尽管分发依赖于其他第三方的库不属于您分发的库本质上有些棘手）。

如果其他人将此 JSONKit 文件粘贴到他们的库中然后分发它们，那么您只有两个选项*

修改 JSONKit.h 和 .m，为所有符号添加前缀（您必须对包含为源的任何代码执行此操作）或选择其他内容（NSJSONSerialization？）。

这并不意味着您不能拥有第三方库依赖项（或者这样做很危险），只是将源文件复制到您的项目中与添加库依赖项不同。

* *arghh，好的 3.. 你可以弱链接 JSONKit 中的所有符号，并让库用户提供 JSONKit.m，但问题仍然是其他库..*

TLDR .. 避免使用 JSONKit，它不适合在要分发的库中“按原样”使用。

# php - 什么是最快的？循环内部或外部的条件？

> ID：12480388
> 
> 赞同：8
> 
> 时间：2012-09-18T15:40:42.713
> 
> 标签：php, performance, for-loop, foreach, performance-testing

什么是最快的？要*在循环内部或外部基于循环外部的变量*执行条件，或者它甚至重要（编译器是否为您执行），或者您是否应该使用完全不同的解决方法？

**示例 #1 与循环内的条件（单个 foreach）：**

```
$test = 2;  
foreach ($list as $listItem) {
    if ($test == 1) {
        $listItem .= " - one";
    } else if ($test == 2) {
        $listItem .= " - two";
    } else if ($test == 3) {
        $listItem .= " - three";
    }
} 
```

**示例 #2 与循环外的条件（对于多个 foreach 非常难看）：**

```
$test = 2;  
if ($test == 1) {
    foreach ($list as $listItem) {
        $listItem .= " - one";
    }
} else if ($test == 2) {
    foreach ($list as $listItem) {
        $listItem .= " - two";
    }
} else if ($test == 3) {
    foreach ($list as $listItem) {
        $listItem .= " - three";
    }
} 
```

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-09-18T15:40:42.713

正如您可能已经猜到的那样，示例 #2 更快，并且编译器不会为您执行此操作。

## 概述

![循环图内部或外部条件](../Images/5460a1d03467e1789c2cdf937b87f58c.png)

* * *

## 性能测试

**示例 #1，循环内的条件：**

```
Time taken: 0.2501 seconds
Time taken: 0.2336 seconds
Time taken: 0.2335 seconds
Time taken: 0.2319 seconds
Time taken: 0.2337 seconds 
Average:    0.2364 seconds 
```

和代码：

```
<?php
    $list = array();
    for ($i = 0; $i < 1000000; $i++) {
        $list[] = md5(rand(0, 100000) * $i);
    }
    $a = microtime(true);
    $test = 2;
    foreach ($list as $listItem) {
        if ($test == 1) {
            $listItem .= " - one";
        } else if ($test == 2) {
            $listItem .= " - two";
        } else if ($test == 3) {
            $listItem .= " - three";
        }
    }
    echo "Time taken: " . number_format(microtime(true) - $a, 4) . " seconds";
?> 
```

**示例 #2，循环外的条件：**

```
Time taken: 0.1424 seconds
Time taken: 0.1426 seconds
Time taken: 0.1364 seconds
Time taken: 0.1348 seconds
Time taken: 0.1347 seconds
Average:    0.1382 seconds 
```

和代码：

```
<?php
    $list = array();
    for ($i = 0; $i < 1000000; $i++) {
        $list[] = md5(rand(0, 100000) * $i);
    }
    $a = microtime(true);
    $test = 2;
    if ($test == 1) {
        foreach ($list as $listItem) {
            $listItem .= " - one";
        }
    } else if ($test == 2) {
        foreach ($list as $listItem) {
            $listItem .= " - two";
        }
    } else if ($test == 3) {
        foreach ($list as $listItem) {
            $listItem .= " - three";
        }
    }
    echo "Time taken: " . number_format(microtime(true) - $a, 4) . " seconds";
?> 
```

*好吧，这对于循环之外的条件来说是一个非常明显的胜利，但是如果我们尝试与布尔值而不是 int 进行比较呢？*

**示例 #3，在循环内部条件，但用布尔值代替：**

```
Time taken: 0.1845 seconds
Time taken: 0.1821 seconds
Time taken: 0.1745 seconds
Time taken: 0.1777 seconds
Time taken: 0.1767 seconds
Average:    0.1791 seconds 
```

和代码：

```
<?php
    $list = array();
    for ($i = 0; $i < 1000000; $i++) {
        $list[] = md5(rand(0, 100000) * $i);
    }
    $a = microtime(true);
    $test = 2;
    $result1 = ($test == 1);
    $result2 = ($test == 2);
    $result3 = ($test == 3);
    foreach ($list as $listItem) {
        if ($result1) {
            $listItem .= " - one";
        } else if ($result2) {
            $listItem .= " - two";
        } else if ($result3) {
            $listItem .= " - three";
        }
    }
    echo "Time taken: " . number_format(microtime(true) - $a, 4) . " seconds";
?> 
```

*有趣的。如果我们使用诸如 的内置函数会[`array_walk`](http://www.php.net/manual/en/function.array-walk.php)怎样？*

**示例 #4 [`array_walk`](http://www.php.net/manual/en/function.array-walk.php)，：**

```
Time taken: 0.4950 seconds
Time taken: 0.4946 seconds
Time taken: 0.4947 seconds
Time taken: 0.4937 seconds
Time taken: 0.4918 seconds
Average:    0.4940 seconds 
```

和代码：

```
<?php
    function append_string($value, $suffix) {
        return $value . $suffix;
    }

    $list = array();
    for ($i = 0; $i < 1000000; $i++) {
        $list[] = md5(rand(0, 100000) * $i);
    }
    $a = microtime(true);
    $test = 2;
    if ($test == 1) {
        array_walk($list, "append_string", " - one");
    } else if ($test == 2) {
        array_walk($list, "append_string", " - two");
    } else if ($test == 3) {
        array_walk($list, "append_string", " - three");
    }
    echo "Time taken: " . number_format(microtime(true) - $a, 4) . " seconds";
?> 
```

**什么？！** *您可能认为内置函数会将其抽象为 C 或 C++ 函数，这可能非常好，但问题是函数调用使此方法非常慢。*

* * *

## 优点缺点

*示例 #1 专业人士*

*   您不必多次声明循环（如果您有多个条件，这可能会很烦人）

*示例 #1 缺点*

*   它是前 3 个测试中最慢的一个（比*示例 #2慢 71%，比**示例 #3*慢 32% ）

*示例 #2 专业人士*

*   其中最快的一个

*示例 #2 缺点*

*   它需要您多次声明循环（与您拥有的条件数量一样多）

*示例#3 专业人士*

*   您不必多次声明循环，就像在*示例 #1中一样*
*   它比*#example 1更快*

*示例#3 缺点*

*   它仍然比*#example 2*慢（大约 30%）
*   看起来更乱

*示例 #4 专业人士*

*   语法看起来很简单

*示例 #4 缺点*

*   它是其中最慢的一个（比第二慢的大约 100%（*例如 #1*））。可能是因为它必须调用一个函数 1,000,000 次。
*   您不在全局范围内，必须使用全局范围内的`global`所有变量。

* * *

## 结论

PHP 编译器不会为你做这件事，如果你想要性能，你应该去*例如 #2*，**但是**这个测试是用一个包含一百万个条目的数组进行的。您的数组可能不会有那么多条目，因此您可能会使用*示例 #1*或*示例 #3*。**哦，不要去*例如 #4***。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-18T15:49:24.077

如果条件测试的结果在循环期间不会改变，那么将测试移出循环总是会更快。（做一次显然比多次做同样的事情要快）。

但是，当将条件移出循环时，您不想为每种情况一遍又一遍地重复相同的代码。这就是[`array_map`](http://www.php.net/manual/en/function.array-map.php)进来的地方。例如：

```
function append_str($value, $suffix) {
    return $value . $suffix;
}

if ($test == 1)
    array_map("append_str", $list, " - one");
else if ($test == 2)
    array_map("append_str", $list, " - two");
else if ($test == 3)
    array_map("append_str", $list, " - three"); 
```

这允许您检查条件一次*并重*用您的代码来处理每种情况。如示例中所示，您可以对每种情况的函数调用进行参数化，并且可以根据需要使函数 ( `append_str`) 变得复杂。

*注意：值得对此进行基准测试以进行比较，因为`array_map`' 循环可能是在 C/C++ 中执行的，这应该比原生 PHP 循环更快（类似于 Perl 的`map`函数）。*

# java - 关于分位数估计的可重复性

> ID：12480394
> 
> 赞同：2
> 
> 时间：2012-09-18T15:40:51.997
> 
> 标签：java, bigdata, colt

我需要找到大量数据流的任意分位数（不适合内存），并且结果需要是可重复的，即对于同一个流，结果应该是相同的。为此，我一直在使用 colt，结果不可重复。

是否有另一个图书馆通过这些要求？

我必须做什么才能使分位数分箱的结果可与 colt 重复（我使用的是 1.2.0）？我在随机数中使用了随机种子，但看起来 colt 引入了自己的随机性。我想不通。

对于两次不同的运行，我得到以下结果。如果它们是可重复的，结果将是相同的：

```
[0.0990242124295947, 0.20014652659912247, 0.2996443961549412]
[0.09994965676310263, 0.20079195488768953, 0.29986981667267676] 
```

这是生成它的代码：

```
public class QuantileTest {

    public static void main(String[] args) throws IOException, Exception {
        QuantileBin1D qBins = new QuantileBin1D(false, Long.MAX_VALUE, 0.001, 0.0001, 64, null);
        Random rand = new Random(0);
        for (int i = 0; i < 1500000; i++) {
            double num = rand.nextDouble();;
            qBins.add(num);
        }

        DoubleArrayList qMarks = new DoubleArrayList(new double[] {0.1, 0.2, 0.3});
        double[] xMarks = qBins.quantiles(qMarks).elements();
        System.out.println(Arrays.toString(xMarks));
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-23T10:14:10.000

由于您没有向 QuantileBin1D 提供 RandomEngine，因此仍然存在一些随机性。在某些类（RandomSampler 是我发现的第一次出现）中，将创建一个似乎不可重复的默认 RandomEngine。

```
if (randomGenerator==null) randomGenerator = cern.jet.random.AbstractDistribution.makeDefaultGenerator();
    this.my_RandomGenerator=randomGenerator; 
```

您应该将构造函数更改为 new QuantileBin1D(false, Long.MAX_VALUE, 0.001, 0.0001, 64, new DRand());

with`cern.jet.random.engine.DRand`是默认构造函数记录在

> 构造并返回一个带有默认种子的随机数生成器，该种子是一个**常量**。

这应该导致非随机结果。

# xquery - Marklogic cts：或在循环中查询

> ID：12480395
> 
> 赞同：2
> 
> 时间：2012-09-18T15:41:00.297
> 
> 标签：xquery, marklogic

我想`cts:or-query`在 for 循环中创建一个。我怎样才能做到这一点？

我的逻辑的一个例子：

```
let $query := for $tag in (1,2,3,4,5)
return myquery 
```

我想得到最终的查询，例如：

```
let $query := cts:or-query(
    (
    cts:element-query(xs:QName("ts:tag"),'1'),
    cts:element-query(xs:QName("ts:tag"),'2'),
    cts:element-query(xs:QName("ts:tag"),'3'),
    cts:element-query(xs:QName("ts:tag"),'4'),
    cts:element-query(xs:QName("ts:tag"),'5')
    )
) 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-18T19:02:56.800

对于这个特定的例子，最好写一个shotgun-OR：

```
cts:element-value-query(xs:QName("ts:tag"), xs:string(1 to 5)) 
```

这将表现得像一个或查询，但会更有效率。请注意，我将您更改`cts:element-query`为元素值查询。这可能是也可能不是您想要的，但每个查询词都应该尽可能精确。

您还可以使用 FLWOR 表达式来生成查询。这对于 and-query 语义很有用，在此之前的技术没有帮助。

```
let $query := cts:and-query(
  for $i in ('dog', 'cat', 'rat')
  return cts:word-query($i))
return cts:search(collection(), $query)[1 to 20] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-18T20:17:21.313

这将起作用：

```
let $query := cts:or-query(
  for $val in ('1', '2', '3', '4', '5')
  return cts:element-query(xs:QName("ts:tag"), $val)
) 
```

FLWOR 循环返回 cts:element-query 的序列。

# libtiff.net - 是否可以更新现有的 tiff 目录图像

> ID：12480399
> 
> 赞同：1
> 
> 时间：2012-09-18T15:41:05.653
> 
> 标签：libtiff.net

**背景**：我的应用程序允许用户在多页 tiff 中选择他们想要查看和绘制形状的目录。允许使用简单的形状，例如圆形或方形。

**ISSUE** : 在用户编辑了我的多页 tiff 中的一张图片后，是否可以只更新修改后的目录？您似乎无法使用 libtiff.net api 执行此操作。

看来我需要重新创建整个 tiff 和每个目录来处理这种情况。

谢谢，

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-18T18:53:13.260

恐怕，*在一般情况下*，不可能使用库仅更改 TIFF 中的一个目录。

您可以重写目录，使其指向文件中的另一个位置（放置更改的栅格数据的位置）。但是，这种方法会由于光栅重复而导致不必要的文件大小增加。

您可以就地替换栅格和目录，但在大多数情况下，更改后的栅格大小不会相同，您可能很容易遇到不同类型的损坏问题。

因此，我建议您采用“重新创建整个 tiff”的方法。

不要忘记，您可能会在不解压缩/重新压缩的情况下复制未更改的栅格数据。

# javascript - 在 Angular JS 中将用户定义的函数放在哪里？

> ID：12480400
> 
> 赞同：35
> 
> 时间：2012-09-18T15:41:10.797
> 
> 标签：javascript, model-view-controller, scope, angularjs

在我看来，我想渲染：

```
<p>
  {{ say() }}
</p> 
```

where`say`是这样定义的：

```
say = function() {
  return "Hello World";
} 
```

我可以在我的控制器中定义它：

```
function TestCtrl($scope) {
  $scope.say = function() { ... };
} 
```

但是它只能在该控制器内访问。

如果我在 Angular 文件结构之外定义函数，它不会呈现任何内容。如果我在我的`controllers.js`文件中定义它，但在控制器功能范围之外，则相同。

放置我的函数的正确位置在哪里，以便我可以在任何控制器中呈现它？

* * *

## 回答 #1

> 赞同：48
> 
> 时间：2012-09-18T16:43:05.633

一种方法是[创建一个](https://docs.angularjs.org/guide/services)具有您希望在多个控制器之间共享的功能的服务。有关更多信息，请参阅[此帖子](https://stackoverflow.com/q/12008908/1207991)。

完成此操作后，您可以将创建的服务注入任何控制器并使用如下`say()`代码访问该函数：

```
function TestCtrl($scope, myService){
   $scope.say = myService.say;
} 
```

您定义`myService`为：

```
angular.module('myApp', [])
    .factory('myService', function () {
        return {
            say: function () {
                return "Hello World";
            }
        }
    }); 
```

这是一个带有示例的[jsFiddle 。](http://jsfiddle.net/v3tGd/)

# symfony - 在缓存中找不到 Symfony2 和教义 2 实体管理器

> ID：12480401
> 
> 赞同：0
> 
> 时间：2012-09-18T15:41:11.793
> 
> 标签：symfony, doctrine-orm, cache-control, symfony-2.1

由于 symfony 2.1.1 升级，我的服务器在访问任何 url 上的域时都会出现以下错误：

```
Fatal error: Class 'EM5056f1cdb2579_546a8d27f194334ee012bfe64f629947b07e4919\
__CG__\Doctrine\ORM\EntityManager' not found in /home/<host>/<site>
/app/cache/prod/appProdProjectContainer.php on line 115 
```

清除（prod）缓存会有所帮助，但这每天都会在 cronjob 之后发生——这可能是什么？我的 cronjob 运行`--env=prod`

# java - 向表中的列添加删除按钮

> ID：12480402
> 
> 赞同：8
> 
> 时间：2012-09-18T15:41:15.193
> 
> 标签：java, button, swt, jface, tableviewer

是否可以将*删除*按钮添加到表格中的单元格？

我有一个有 5 列的表，我想添加第 6 列。我希望第 6 列的每一行都有一个删除按钮。

示例行：

> | 10002 | 部分 | 金属 | 001 | 是 | `Remove` |

这样，用户只需单击按钮即可删除任何不需要的行。

我在表中有一个标记列，它是`ComboBox`. 我创建了一个扩展类`EditingSupport`。

我是否需要创建另一个类扩展`EditingSupport`，但创建一个按钮而不是`ComboBox`？

**编辑**

```
public class AplotDataTableViewer extends TableViewer
{

    public AplotDataTableViewer(Composite parent, int style) 
    {
        super(parent, style);

        Table table = getTable();
        GridData gridData = new GridData(SWT.FILL, SWT.FILL, true, true);
        table.setLayoutData(gridData);
        createColumns();
        table.setHeaderVisible(true);
        table.setLinesVisible(true);
        setContentProvider(new ArrayContentProvider());
    }

    private void createColumns() {

      String[] titles = { "ItemId", "RevId", "PRL", "Dataset Name", "EC Markup" };
      int[] bounds = { 150, 150, 100, 150, 100 };

      TableViewerColumn col = createTableViewerColumn(titles[0], bounds[0], 0);
      col.setLabelProvider(new ColumnLabelProvider() {
         public String getText(Object element) {
            if(element instanceof AplotDataModel.AplotDatasetData)
               return ((AplotDataModel.AplotDatasetData)element).getDataset().toString();
            return super.getText(element); 
            }
         }); 

      col = createTableViewerColumn(titles[1], bounds[1], 1);
      col.setLabelProvider(new ColumnLabelProvider() {
         public String getText(Object element) {
            if(element instanceof AplotDataModel.AplotDatasetData)
               return ((AplotDataModel.AplotDatasetData)element).getRev().toString();
            return super.getText(element); 
            }
         });

      col = createTableViewerColumn(titles[2], bounds[2], 2);
      col.setLabelProvider(new ColumnLabelProvider() {
         public String getText(Object element) {
            if(element instanceof AplotDataModel.AplotDatasetData)
               return ((AplotDataModel.AplotDatasetData)element).getPRLValue().toString();
            return super.getText(element); 
            }
         });
      col = createTableViewerColumn(titles[3], bounds[3], 3);
      col.setLabelProvider(new ColumnLabelProvider() {
         public String getText(Object element) {
            if(element instanceof AplotDataModel.AplotDatasetData)
               return ((AplotDataModel.AplotDatasetData)element).getDatasetName().toString();
            return super.getText(element); 
            }
         });

       col = createTableViewerColumn(titles[4], bounds[4], 4);
       col.setLabelProvider(new ColumnLabelProvider() {
          public String getText(Object element) {
             if(element instanceof AplotDataModel.AplotDatasetData)
                return ((AplotDataModel.AplotDatasetData)element).getMarkupValue();
             return super.getText(element); 
             }
          });

       col.setEditingSupport(new OptionEditingSupport(this));

    }

    private TableViewerColumn createTableViewerColumn(String header, int width, int idx) 
    {
        TableViewerColumn column = new TableViewerColumn(this, SWT.LEFT, idx);
        column.getColumn().setText(header);
        column.getColumn().setWidth(width);
        column.getColumn().setResizable(true);
        column.getColumn().setMoveable(true);

        return column;
    }
} 
```

**编辑**

```
col = createTableViewerColumn(titles[5], bounds[5], 5);
   col.setLabelProvider(new ColumnLabelProvider() {
      @Override
      public void update(ViewerCell cell) {
         TableItem item = new TableItem(getTable(),SWT.NONE);
         Button button = new Button(getTable(),SWT.NONE);
         button.setText("X");
         getControl().setBackground(item.getBackground());
         TableEditor editor = new TableEditor(getTable());
         editor.grabHorizontal  = true;
         editor.grabVertical = true;
         editor.setEditor(button , item, columnIndex);
         editor.layout();
         }
      }); 
```

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2012-09-19T00:23:04.720

这是示例工作版本。

```
public class TableEditorTest {

    /**
     * @param args
     */
    public static void main(String[] args) {
        Display display = new Display();
        Shell shell = new Shell(display);

        shell.setLayout(new FillLayout());

        TableViewer viewer = new TableViewer(shell);
        viewer.getTable().setHeaderVisible(true);
        viewer.getTable().setLinesVisible(true);
        viewer.setContentProvider(new ArrayContentProvider());

        TableColumn column = new TableColumn(viewer.getTable(), SWT.NONE);
        column.setText("First Name");
        column.setWidth(100);
        TableViewerColumn firstNameCol = new TableViewerColumn(viewer, column);
        firstNameCol.setLabelProvider(new ColumnLabelProvider(){

            @Override
            public String getText(Object element) {
                Person p = (Person)element;

                return p.getFirstName();
            }

        });

        column = new TableColumn(viewer.getTable(), SWT.NONE);
        column.setText("Last Name");
        column.setWidth(100);
        TableViewerColumn lastNameCol = new TableViewerColumn(viewer, column);
        lastNameCol.setLabelProvider(new ColumnLabelProvider(){

            @Override
            public String getText(Object element) {
                Person p = (Person)element;

                return p.getLastName();
            }

        });

        column = new TableColumn(viewer.getTable(), SWT.NONE);
        column.setText("Actions");
        column.setWidth(100);
        TableViewerColumn actionsNameCol = new TableViewerColumn(viewer, column);
        actionsNameCol.setLabelProvider(new ColumnLabelProvider(){
            //make sure you dispose these buttons when viewer input changes
            Map<Object, Button> buttons = new HashMap<Object, Button>();

            @Override
            public void update(ViewerCell cell) {

                TableItem item = (TableItem) cell.getItem();
                Button button;
                if(buttons.containsKey(cell.getElement()))
                {
                    button = buttons.get(cell.getElement());
                }
                else
                {
                     button = new Button((Composite) cell.getViewerRow().getControl(),SWT.NONE);
                    button.setText("Remove");
                    buttons.put(cell.getElement(), button);
                }
                TableEditor editor = new TableEditor(item.getParent());
                editor.grabHorizontal  = true;
                editor.grabVertical = true;
                editor.setEditor(button , item, cell.getColumnIndex());
                editor.layout();
            }

        });

        Person p1 = new Person();
        p1.setFirstName("George");
        p1.setLastName("Burne");

        Person p2 = new Person();
        p2.setFirstName("Adam");
        p2.setLastName("Silva");

        Person p3 = new Person();
        p3.setFirstName("Nathan");
        p3.setLastName("Cowl");

        List<Person> persons = new ArrayList<Person>();
        persons.add(p1);
        persons.add(p2);
        persons.add(p3);

        viewer.setInput(persons);

        shell.open();
        while(!shell.isDisposed())
        {

            if(!display.readAndDispatch())
            {
                display.sleep();
            }
        }

        display.dispose();

    }

    private static class Person
    {

        String firstName;
        String lastName;

        Person()
        {

        }

        public String getFirstName() {
            return firstName;
        }

        public String getLastName() {
            return lastName;
        }

        public void setFirstName(String firstName) {
            this.firstName = firstName;
        }

        public void setLastName(String lastName) {
            this.lastName = lastName;
        }

    }

} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2014-07-15T06:00:28.023

除了@sambi.reddy 的回答之外，还有一条评论说 - “*确保在查看器输入更改时处理这些按钮*”。这就是我必须做的才能让那部分工作。

我使用的框架有一个 IStructuredContentProvider 的实现，所以在重写的 inputChanged(...) 中，我必须输入以下代码：-

```
@Override
public void inputChanged(Viewer viewer, Object oldInput, Object newInput) {

    // This will dispose of all the control button that were created previously
    if (((TableViewer)viewer).getTable() != null && ((TableViewer)viewer).getTable().getChildren() != null) {
        for (Control item : ((TableViewer)viewer).getTable().getChildren()) {
            // at this point there are no other controls embedded in the viewer, however different instances may require more checking of the controls here.
            if ((item != null) && (!item.isDisposed())) {  
                item.dispose();
            }
        }
    }
} 
```

这工作正常，除非您有一个刷新表（即 viewer.setInput(List)）调用作为按钮操作的结果。当我添加这个时，以下行有时会返回仍然存在但正在处理的按钮：

```
if(buttons.containsKey(cell.getElement())) 
```

所以我需要将这一行更新为：

```
if (buttons.containsKey(cell.getElement()) && !buttons.get(cell.getElement()).isDisposed()) 
```

如果仍然需要它们，这会导致重新创建任何处理按钮。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-04-23T10:26:24.410

所选答案的一件重要事情是，您不应该在每次更新方法调用时创建 TableEditor 的实例，这会降低性能甚至使应用程序无法响应。

```
@Override
        public void update(ViewerCell cell) {

            TableItem item = (TableItem) cell.getItem();
            Button button;
            if(buttons.containsKey(cell.getElement()))
            {
                button = buttons.get(cell.getElement());
            }
            else
            {
                button = new Button((Composite) cell.getViewerRow().getControl(),SWT.NONE);
                button.setText("Remove");
                buttons.put(cell.getElement(), button);
                TableEditor editor = new TableEditor(item.getParent());
                editor.grabHorizontal  = true;
                editor.grabVertical = true;
                editor.setEditor(button , item, cell.getColumnIndex());
                editor.layout();
            }
        } 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-18T16:10:00.550

下面的代码应该适合你

```
TableItem item = (TableItem) item;
Button button = new Button(table,swt.none);
button.setText("Remove");
control.setBackground(item.getBackground());
TableEditor editor = new TableEditor(table);
editor.grabHorizontal  = true;
editor.grabVertical = true;
editor.setEditor(button , item, columnIndex);
editor.layout(); 
```

# objective-c - 重新加载保留在内存中的 ViewController

> ID：12480403
> 
> 赞同：0
> 
> 时间：2012-09-18T15:41:18.627
> 
> 标签：objective-c, uitableview, uiviewcontroller

我正在尝试重新加载已创建并保留但当前未显示的视图控制器。我不能使用 poptorootviewcontrolleranimated 因为视图控制器没有存储在导航堆栈中。这样做的原因是用户应该能够在视图之间移动，而不必导航回所有以前的视图。换句话说，我正在尝试实现标签栏应用程序的功能。变得棘手的地方是我使用的是 Facebook 样式的拆分视图，左侧有一个表格视图。

到目前为止我有

```
- (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath {
appDelegate = [[UIApplication sharedApplication] delegate];
switch (indexPath.section) {
    case 0:
        if (appDelegate.firstViewController.isViewLoaded) { 
```

我不确定下一行代码应该是应该加载的视图是什么

```
appDelegate.firstViewController 
```

因为这已经被创建并被设置为 rootViewController

```
applicationDidFinishLaunching 
```

希望这是有道理的，任何帮助将不胜感激！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-18T17:25:15.110

如果您使用的是[UISplitViewController](http://developer.apple.com/library/ios/#documentation/uikit/reference/UISplitViewController_class/Reference/Reference.html)，则需要将其 viewControllers 属性设置为索引 1 为您要显示的视图控制器。

# variables - 在 32 位内存和 32 位处理器中，CPU 如何访问单个字节的内存

> ID：12480407
> 
> 赞同：13
> 
> 时间：2012-09-18T15:41:39.537
> 
> 标签：variables, architecture, bus

我非常了解 32 位或 64 位系统的含义。所以基本上所有的寄存器或字长都是 32 位或 64 位。

为简单起见，让我们采用 32 位系统，假设我正在用 C 语言编写程序。如果我声明一个 int 类型，则说“int a = 5;” 然后为 var a 保留一个字长的内存位置。所以当我想访问它时，我可以使用该内存位置的字地址来访问它。

但假设我有 4 个字符“char a,b,c,d;” 因为它是一个字节，每个字节都放在一个字中，所以如果我只想访问 char b，我该怎么办？（说内存是字节可寻址的）现在说 b 是字中的第三个字节...... .那么它是怎么上公共汽车的？第 3 个字节不是硬连线到总线的第 17 到第 24 行吗？那么当只访问 b 时，其他 24 行会发生什么？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-19T02:15:49.917

您的问题的答案很大程度上取决于您使用的编译器以及 CPU、内存控制器和内存架构（高速缓存和外部内存）的内部工作原理。
您只能控制编译器（假设您使用的是 C 或 C++ 编译器）。当您使用小于字长的变量时，编译器有不同的模式。有速度优化和内存优化的标志。根据打开这些标志中的哪一个，编译器可能会选择生成将所有四个变量（在您的情况下）打包成一个单词的代码。或者编译器可以选择为每个变量分配一个内存字，但使用一个特定的字节来存储实际值。编译器针​​对每种情况执行此操作的方式是为 CPU 生成不同的指令集。在后一种情况下，如果从内存中读取变量，则将整个字放在总线上，然后放入通用寄存器。在前一种情况下，该字被放入寄存器，但随后该字可以按位移位，并且可以通过使用逻辑与运算将其他位清零。这样，正确的字节将在寄存器中。或者可能是 CPU 架构支持一个字中的字节级访问，在这种情况下，它只会由 CPU 执行一个操作。最后，了解内部发生的事情是个好主意，但您不会太在意，因为从您的角度来看，编译器生成的指令集将正常工作。您唯一关心的是编写性能敏感软件时。在这种情况下，您需要了解 CPU 和内存的详细信息以及编译器支持的标志。这样，正确的字节将在寄存器中。或者可能是 CPU 架构支持一个字中的字节级访问，在这种情况下，它只会由 CPU 执行一个操作。最后，了解内部发生的事情是个好主意，但您不会太在意，因为从您的角度来看，编译器生成的指令集将正常工作。您唯一关心的是编写性能敏感软件时。在这种情况下，您需要了解 CPU 和内存的详细信息以及编译器支持的标志。这样，正确的字节将在寄存器中。或者可能是 CPU 架构支持一个字中的字节级访问，在这种情况下，它只会由 CPU 执行一个操作。最后，了解内部发生的事情是个好主意，但您不会太在意，因为从您的角度来看，编译器生成的指令集将正常工作。您唯一关心的是编写性能敏感软件时。在这种情况下，您需要了解 CPU 和内存的详细信息以及编译器支持的标志。了解内部发生的事情是个好主意，但您不会太在意，因为从您的角度来看，编译器生成的指令集将正常工作。您唯一关心的是编写性能敏感软件时。在这种情况下，您需要了解 CPU 和内存的详细信息以及编译器支持的标志。了解内部发生的事情是个好主意，但您不会太在意，因为从您的角度来看，编译器生成的指令集将正常工作。您唯一关心的是编写性能敏感软件时。在这种情况下，您需要了解 CPU 和内存的详细信息以及编译器支持的标志。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-07T13:35:26.030

这取决于汇编程序，它可以选择给出一个内存字或一个字节。
所以现在即使你的单词中有 4 个不同的字符，会发生的情况是它们都被一次访问，但只有你需要的一个被操作。即它们都从内存进入处理器，然后只考虑你想要的字节，其他的被拒绝。

# wix - 如何找到 WiX RemotePayload 的 CertificatePublicKey 哈希

> ID：12480408
> 
> 赞同：11
> 
> 时间：2012-09-18T15:41:41.517
> 
> 标签：wix, code-signing, public-key-encryption, authenticode

我正在尝试解析 WiX RemotePayload 哈希，但我不确定如何`CertificatePublicKey`找到该属性。

例如，来自 WiX 3.6 源的 .NET 4.0 包定义：

```
 <Fragment>
    <util:RegistrySearchRef Id="NETFRAMEWORK40"/>

    <WixVariable Id="WixMbaPrereqPackageId" Value="NetFx40Redist" />
    <WixVariable Id="WixMbaPrereqLicenseUrl" Value="$(var.NetFx40EulaLink)" />

    <PackageGroup Id="NetFx40Redist">
      <ExePackage
          InstallCommand="/q /norestart /ChainingPackage &quot;[WixBundleName]&quot;"
          RepairCommand="/q /norestart /repair /ChainingPackage &quot;[WixBundleName]&quot;"
          UninstallCommand="/uninstall /q /norestart /ChainingPackage &quot;[WixBundleName]&quot;"
          PerMachine="yes"
          DetectCondition="NETFRAMEWORK40"
          Id="NetFx40Redist"
          Vital="yes"
          Permanent="yes"
          Protocol="netfx4"
          DownloadUrl="$(var.NetFx40RedistLink)"
          Compressed="no"
          Name="redist\dotNetFx40_Full_x86_x64.exe">
        <RemotePayload
            Size="50449456"
            Version="4.0.30319.1"
            ProductName="Microsoft .NET Framework 4"
            Description="Microsoft .NET Framework 4 Setup"
            CertificatePublicKey="672605E36DD71EC6B8325B91C5FE6971390CB6B6"
            CertificateThumbprint="9617094A1CFB59AE7C1F7DFDB6739E4E7C40508F"
            Hash="58DA3D74DB353AAD03588CBB5CEA8234166D8B99"/>
      </ExePackage>
    </PackageGroup>
  </Fragment> 
```

来自**wix36-sources\src\ext\NetFxExtension\wixlib\NetFx4.wxs**

我可以找到 sha1 `Hash`...`fciv -sha1 dotNetFx40_Full_x86_x64.exe`

> 58da3d74db353aad03588cbb5cea8234166d8b99 dotnetfx40_full_x86_x64.exe

`CertificateThumbprint`我可以通过文件的属性对话框轻松找到匹配项，或者使用`signtool`它显示以下输出

```
C:\redist>signtool verify /v /ph dotNetFx40_Full_x86_x64.exe

Verifying: dotNetFx40_Full_x86_x64.exe
Signature Index: 0 (Primary Signature)
Hash of file (sha1): 8E8582D10521962F45F33935C38A2412C4F2D4C7

Signing Certificate Chain:
    Issued to: Microsoft Root Authority
    Issued by: Microsoft Root Authority
    Expires:   Thu Dec 31 03:00:00 2020
    SHA1 hash: A43489159A520F0D93D032CCAF37E7FE20A8B419

        Issued to: Microsoft Code Signing PCA
        Issued by: Microsoft Root Authority
        Expires:   Sat Aug 25 03:00:00 2012
        SHA1 hash: 3036E3B25B88A55B86FC90E6E9EAAD5081445166

            Issued to: Microsoft Corporation
            Issued by: Microsoft Code Signing PCA
            Expires:   Mon Mar 07 18:40:29 2011
            SHA1 hash: 9617094A1CFB59AE7C1F7DFDB6739E4E7C40508F

The signature is timestamped: Thu Mar 18 21:13:46 2010
Timestamp Verified by:
    Issued to: Microsoft Root Authority
    Issued by: Microsoft Root Authority
    Expires:   Thu Dec 31 03:00:00 2020
    SHA1 hash: A43489159A520F0D93D032CCAF37E7FE20A8B419

        Issued to: Microsoft Timestamping PCA
        Issued by: Microsoft Root Authority
        Expires:   Sun Sep 15 03:00:00 2019
        SHA1 hash: 3EA99A60058275E0ED83B892A909449F8C33B245

            Issued to: Microsoft Time-Stamp Service
            Issued by: Microsoft Timestamping PCA
            Expires:   Thu Jul 25 15:11:15 2013
            SHA1 hash: 4D6F357F0E6434DA97B1AFC540FB6FDD0E85A89F

SignTool Error: The signing certificate is not valid for the requested usage.
        This error sometimes means that you are using the wrong verification
        policy. Consider using the /pa option.

Number of files successfully Verified: 0
Number of warnings: 0
Number of errors: 1 
```

什么工具可以提供哈希`CertificatePublicKey`？

**编辑：**不使用热量，我想了解哈希的来源。

**编辑：**我知道这是如何在 WiX 源代码中完成的并且我可以执行
`heat payload file -out file.wxs`，但我正在寻找一些可以在不使用热量的情况下提供预期哈希的外部工具。这真的只是为了满足我的好奇心。

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-09-19T10:15:22.547

如果您查看 heat 工具的源代码，它使用该`Microsoft.Tools.WindowsInstallerXml.Cab.Interop.NativeMethods.HashPublicKeyInfo`函数生成`CertificatePublicKey`.

```
byte[] publicKeyIdentifierHash = new byte[128];
uint publicKeyIdentifierHashSize = (uint)publicKeyIdentifierHash.Length;

Microsoft.Tools.WindowsInstallerXml.Cab.Interop.NativeMethods.HashPublicKeyInfo(
    certificate.Handle, 
    publicKeyIdentifierHash, 
    ref publicKeyIdentifierHashSize);

StringBuilder sb = new StringBuilder(((int)publicKeyIdentifierHashSize + 1) * 2);
for (int i = 0; i < publicKeyIdentifierHashSize; ++i)
{
    sb.AppendFormat("{0:X2}", publicKeyIdentifierHash[i]);
}

this.PublicKey = sb.ToString(); 
```

您显然可以使用此代码生成指纹，或者根据[公钥指纹](https://en.wikipedia.org/wiki/Public_key_fingerprint)上的 wiki 页面，您也可以使用命令行

```
ssh-keygen -lf /path/to/key.pub 
```

问题是从证书生成一个符合[RFC4716](https://www.ietf.org/rfc/rfc4716.txt)的 ssh-keygen pub 文件，这就是我被难住的地方。

我个人只使用 heat 命令行：

```
heat.exe payload PATH_TO_FILE -o Output.wxs 
```

并且不用担心它在工作时实际在做什么！:)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-08T17:08:37.803

您可以在文件属性对话框中找到有关签名的所有信息：

1.  在文件属性对话框中，单击签名选项卡。 ![文件属性](../Images/3b66ca364c5e4288aff6f9b55e5bdb4d.png)

2.  单击详细信息，然后单击“查看证书”。 ![查看证书](../Images/9ee7dee35f474bddae7afb816b07bca6.png)

3.  可以在“详细信息”选项卡上找到“公钥”等属性。 ![证书详情](../Images/f2c531446a2a0486f004a06bb233d5ba.png)

4.  ~~如果您需要此公钥的散列，则可以使用标准散列工具通过使用“复制到文件”按钮并散列该文件来获取它。~~

    我错了，“复制到文件”不会导出选定的属性，而是导出整个证书。您可以将此值复制并粘贴到哈希程序或十六进制编辑器中以获取哈希。

# bash - 我如何执行 c=bin\jlogin -c "exit" $value |grep "Error" >>test

> ID：12480409
> 
> 赞同：0
> 
> 时间：2012-09-18T15:41:42.590
> 
> 标签：bash

我该如何执行

```
c=bin\jlogin -c "exit" $value |grep "Error" >>test  in bash 
```

我想将返回值存储在 c 变量中。$value 包含一些以前解析的数据..我想将完整的字符串作为命令运行，但是当我运行 shell 时出现错误

```
=bin\jlogin command not found. 
```

小子帮助我发生了什么以及我如何解决它！搜索谷歌，但它没有显示像用户定义的变量这样复杂的结果，提前谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-18T15:49:34.010

我不确定`\j`这里是什么意思，但我认为您正在寻找的是反引号运算符：

```
c=`((bin/jlogin -c "exit" $value ; echo $? >&3) | grep "Error" >> test) 3>&1)` 
```

这会将 jlogin 的退出值重定向到句柄 3，然后将其重定向回 STDOUT，该 STDOUT 将被复制到`$c`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-18T15:50:15.537

这是你想要做的吗？：

```
/bin/jlogin -c exit "$value" | grep Error >>test
c=$? 
```

这将运行命令`/bin/jlogin -c exit "$value"`，将其输出通过管道传输到`grep Error >>test`. 如果找到字符串，它将设置`$c`为，如果没有找到。`0``Error``1`

# jquery - IE8 中 jQuery('title') 的“页面错误”，调试器未检测到

> ID：12480410
> 
> 赞同：0
> 
> 时间：2012-09-18T15:41:49.673
> 
> 标签：jquery, internet-explorer, debugging

我的代码在 Chrome 或 Firefox 中运行时按预期工作。然而，在 Internet Explorer 中出现错误。不幸的是，调试器只从调用堆栈中获取顶层，这意味着它将获取我自己脚本中第一个函数调用的行号，以及压缩 jQuery 的 4 行中的第 3 行。此外，错误令人困惑：

> 对象不支持此属性或方法

在 jQuery 源中链接时看起来很奇怪；这两个错误都不适用于调用对象方法的行。在我的脚本中调用的函数作为错误的行号给出如下：

```
$('title').text('Student accommodaton in '+loc.title);
$('fieldset.search').data('loc',loc.loc_id).find('p.locs').slideUp().end().find('ul.blurb').hide();
$('nav.top').find('li.index a').attr('href',loc.url)
.end().find('p.user').addClass('show');
$('header.title').find('h2').each(function(loc){
    return function(){
        $(this).data('text',$(this).text()).text('Student accommodation in '+loc.title);
    }
}(loc))
.end().find('p').fadeIn();
$('section.register h3:first').textPrepend('Scroll down and '); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-18T15:41:49.673

原来错误是由以下代码引起的

```
$('title').text('Student accommodaton in '+loc.title); 
```

我通过一次删除一行发现了这一点，因为我使用的是没有像样的调试软件的 IETester。而下面的代码：

```
$('p').text().text('Test'); 
```

将正确指示返回的对象（文本字符串）没有方法`.text()`，似乎 using`$('title')`返回一个更抽象的错误，因为 jQuery 尝试应用该方法。因此错误的行号是错误的，因为它传播回函数堆栈。

简而言之，在更改标题时使用

```
document.title='Test'; 
```

如果您在 jQuery 源代码中出现错误，请首先查找`<head>`您可能正在使用的任何奇怪的选择器或元素选择器。

# mysql - 如何通过在mysql中加入两个表来更新一个表？

> ID：12480413
> 
> 赞同：2
> 
> 时间：2012-09-18T15:41:57.440
> 
> 标签：mysql, sql

我有两张表，一张用于 regcourses，另一张名为 coursegroups。

**课程组表**

```
CREATE TABLE coursesgroup (
  csgrec int(11) unsigned NOT NULL auto_increment,
  courseID int(11) default NULL,
  classID int(11) default NULL,
  studgroup varchar(20) default NULL,
  studnum int(11) default NULL,
  PRIMARY KEY  (csgrec)
) ENGINE=InnoDB DEFAULT CHARSET=latin1; 
```

***课程表：***

```
CREATE TABLE regcourses (
  regrec int(11) unsigned NOT NULL auto_increment,
  regsemrec int(11) default NULL,
  regstudID int(11) default NULL,
  regcourseID int(11) default NULL,
  regstatus int(11) default '0',
  yearsem int(11) default '2012',
  monthsem1 int(11) default '3',
  classID int(11) default '1',
  PRIMARY KEY  (regrec)
) ENGINE=InnoDB DEFAULT CHARSET=latin1; 
```

**插入语句：**

```
INSERT INTO coursesgroup VALUES ('2', '20', '1', 'BBA1009A1', '11');
INSERT INTO coursesgroup VALUES ('3', '20', '1', 'BBA1009B1', '4');

INSERT INTO regcourses VALUES ('2', '1', '98', '47', '0', '2012', '3', '1');
INSERT INTO regcourses VALUES ('4', '1', '98', '101', '0', '2012', '3', '1'); 
```

对于课程组表中 csgrec 列的特定值，我想将 regcourses 表的 regstatus 字段更新为“2”。所以我的更新代码是：

```
UPDATE regcourses JOIN coursesgroup ON regcourses.regcourseID = coursesgroup.courseID 
Set regcourses.regstatus =2
WHERE  coursesgroup.csgrec=3 
```

但我的查询影响了这么多行而不是一行。因为我只想更改 csgrec=3 并且我的查询会影响与`regcourses.regcourseID = coursesgroup.courseID condition`. 请帮助我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-18T15:48:56.283

首先，运行这个查询：

```
SELECT * FROM regcourses
JOIN coursesgroup ON regcourses.regcourseID = coursesgroup.courseID 
WHERE  coursesgroup.csgrec=3 
```

（这与您的更新基本相同，没有进行任何更新。）这会告诉您您的加入是否错误；如果您匹配的行太多。

从您的`insert`陈述中，我看不出应该发生什么——从您显示的四行中，没有什么应该符合该连接条件。尝试插入并查看首先返回了多少行。

# batch-file - 在 Auto Weekly FTP 下载中更改文件名

> ID：12480415
> 
> 赞同：0
> 
> 时间：2012-09-18T15:42:13.947
> 
> 标签：batch-file

我有一个包含以下命令的 SCR 文件

```
open myftp.myserver.com
myusername
mypassword
lcd "c:\myfolder"
cd webfolder
get myfile09202012 
```

我每周运行一次带有 BAT 文件的脚本作为 Windows 任务。本周，要下载的文件名为“myfile09202012”。下周，文件名将是“myfile09272012”。我将如何创建一个脚本来每周自动生成新文件名？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-18T16:37:13.087

将此批处理文件的输出通过管道传输到您的脚本文件，然后以正常方式运行生成的脚本。

```
@echo off
echo open myftp.myserver.com
echo myusername
echo mypassword
echo lcd "c:\myfolder"
echo cd webfolder
for /f "tokens=2-4 delims=/ " %%a in ('echo %date%') do echo get myfile%%a%%b%%c 
```

它将使用当前日期生成文件名

要将整个批处理合并到另一个批处理文件中，最终会是这样的：

```
@ECHO OFF
cd c:\myfolder
echo open myftp.myserver.com > mySCRfile.SCR 
echo myusername >> mySCRfile.SCR 
echo mypassword >> mySCRfile.SCR 
echo lcd "c:\myfolder" >> mySCRfile.SCR 
echo cd webfolder >> mySCRfile.SCR 
for /f "tokens=2-4 delims=/ " %%a in ('echo %date%') do echo get myfile%%a%%b%%c >> mySCRfile.SCR 
ftp -s:mySCRfile.SCR 
```

或者

```
@ECHO OFF
cd c:\myfolder
call MakeTheScr > mySCRfile.SCR 
ftp -s:mySCRfile.SCR 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-10T15:57:24.500

我最终使用了以下约定

```
get myfile%date:~4,2%%date:~7,2%%date:~10% 
```

如果您输入命令 'echo %date%'，您将收到格式为 'Wed 10/10/2012' 的今天日期字符串 '%date:~4,2%' 在第 4 个占位符处返回上述格式，并且返回接下来的 2 个字符。

# sitecore - 如何使用 Sitecore API 清除特定的 XSLT 缓存？

> ID：12480417
> 
> 赞同：0
> 
> 时间：2012-09-18T15:42:25.647
> 
> 标签：sitecore, sitecore6

我想使用 Sitecore API 清除 XSLT 的缓存。有什么办法可以做到吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-18T19:20:46.970

是的，有一种方法可以从特定网站的 API 中清除缓存。使用此代码清除特定网站的 xsl 缓存。

```
SiteContext mySite = Sitecore.Configuration.Factory.GetSite("mywebsite");
XslCache xslCache = CacheManager.GetXslCache(mySite);
xslCache.Clear(); 
```

请记住，如果您有一个带有 CMS 服务器和（多个）前端服务器的环境，那么以这种方式清除缓存只会清除特定服务器上的缓存，而不是所有服务器上的缓存。

# unix - 如何在 Cent OS 5.8 上安装 YUM

> ID：12480419
> 
> 赞同：1
> 
> 时间：2012-09-18T15:42:29.643
> 
> 标签：unix, installation, centos, rpm, yum

我无意中成功卸载了它。我找到了 yum-3.2.22-39.e15.centos.noarch.rpm 包，当我尝试安装它时说依赖项失败：

yum-3.2.22-39.el5.centos.noarch 需要 yum-fastestmirror

所以我得到了它并尝试安装它，但我得到了更多失败的依赖项：

yum-plugin-fastestmirror-1.1.30-14.el6.noarch 需要 rpmlib(FileDigests) <= 4.6.0-1 yum-plugin-fastestmirror-1.1.30-14.el6 需要 yum >= 3.0。 yum-plugin-fastestmirror-1.1.30-14.el6.noarch 需要 noarch rpmlib(PayloadIsXz) <= 5.2-1

如何快速正确地安装 YUM 而不会出现不断出现的依赖问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-19T07:45:49.780

我得到了解决方案：

[http://www.linuxquestions.org/questions/linux-general-1/install-yum-934200/](http://www.linuxquestions.org/questions/linux-general-1/install-yum-934200/)

确保在 RPM 上安装快速镜像时添加 nodep 标志。

# wordpress - 如何为WordPress中的每个帖子分配多个图像？

> ID：12480421
> 
> 赞同：0
> 
> 时间：2012-09-18T15:42:43.153
> 
> 标签：wordpress, wordpress-theming

我有一个名为“投资组合”的自定义帖子类型。

在每个帖子中，我需要分配 X 个图像，用作前端的幻灯片放映。

我想插件是节省一些工作的最佳方式，但我尝试过的所有“滑块”插件都过于完整，并且最常使用短代码插入帖子。

我只想在前端获得一组可以循环播放的图像，因为无论如何它很可能在 the_content() 的区域之外。

或者，如果您可以在单独的选项卡中创建“幻灯片”，然后通过下拉菜单或其他方式将其分配给帖子。

此外，如果幻灯片中可以有 HTML 内容，那就太好了；）

TL, DR: 寻找一个灵活的 WordPress 后端“幻灯片”管理器，它不依赖于简码，并让我在前端拥有完全的权力来编写我自己的 html、css 和 js。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-18T16:38:56.337

找到了这个成功的:)

[http://www.deluxeblogtips.com/meta-box/](http://www.deluxeblogtips.com/meta-box/)

# macos - 如何在 OS X 中卸载 SBT？

> ID：12480422
> 
> 赞同：9
> 
> 时间：2012-09-18T15:42:44.480
> 
> 标签：macos, sbt, uninstallation

我想从我的 Mac 中删除 SBT（简单构建工具）。我该怎么做呢？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-09-19T10:15:49.117

这取决于你如何安装它。如果它是通过自制软件完成的，您应该只在命令行中运行：

```
$ brew uninstall sbt 
```

另一种解决方案是手动删除启动器脚本

```
$ which sbt
/Users/bam/bin/sbt
$ rm /Users/bam/bin/sbt 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2016-02-16T22:55:50.000

您还需要从 /usr/local/etc 手动删除 sbtopts 和 sbtopts.default

# android - 如何在 Android 中获取 html 源代码？

> ID：12480423
> 
> 赞同：1
> 
> 时间：2012-09-18T15:42:44.887
> 
> 标签：android, html, eclipse, parsing

我需要将网页源提取到 Android 中的字符串。我尝试使用 HttpClient、HttpGet 和 HttpResponse 来实现，但这种方法不起作用。我必须尝试/捕获此方法的每个初始化，无论如何，应用程序强制关闭。

```
 public static String getHtmlSource(String webPage){
            HttpClient client = new DefaultHttpClient();
            URI url = null;
            try {
                url = new URI("http://www.kinopoisk.ru/film/581493");
            } catch (URISyntaxException e) {
                // TODO Auto-generated catch block
                e.printStackTrace();
            }
            HttpGet request = new HttpGet(url);
            HttpResponse response = null;
            try {
                response = client.execute(request);
            } catch (ClientProtocolException e) {
                // TODO Auto-generated catch block
                e.printStackTrace();
            } catch (IOException e) {
                // TODO Auto-generated catch block
                e.printStackTrace();
            }

            String html = "";
            InputStream in = null;
            try {
                in = response.getEntity().getContent();
            } catch (IllegalStateException e) {
                // TODO Auto-generated catch block
                e.printStackTrace();
            } catch (IOException e) {
                // TODO Auto-generated catch block
                e.printStackTrace();
            }
            BufferedReader reader = new BufferedReader(new InputStreamReader(in));
            StringBuilder str = new StringBuilder();
            String line = null;
            try {
                while((line = reader.readLine()) != null)
                {
                    str.append(line);
                }
            } catch (IOException e) {
                // TODO Auto-generated catch block
                e.printStackTrace();
            }
            try {
                in.close();
            } catch (IOException e) {
                // TODO Auto-generated catch block
                e.printStackTrace();
            }
            html = str.toString();
            return html;
        } 
```

**日志猫**

```
09-18 19:28:07.989: W/dalvikvm(5708): threadid=1: thread exiting with uncaught exception (group=0x41f64300)
09-18 19:28:08.029: E/AndroidRuntime(5708): FATAL EXCEPTION: main
09-18 19:28:08.029: E/AndroidRuntime(5708): java.lang.RuntimeException: Unable to start activity ComponentInfo{com.gavrilov.egor.movies/com.gavrilov.egor.movies.MoviesList}: android.os.NetworkOnMainThreadException
09-18 19:28:08.029: E/AndroidRuntime(5708):     at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2059)
09-18 19:28:08.029: E/AndroidRuntime(5708):     at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2084)
09-18 19:28:08.029: E/AndroidRuntime(5708):     at android.app.ActivityThread.access$600(ActivityThread.java:130)
09-18 19:28:08.029: E/AndroidRuntime(5708):     at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1195)
09-18 19:28:08.029: E/AndroidRuntime(5708):     at android.os.Handler.dispatchMessage(Handler.java:99)
09-18 19:28:08.029: E/AndroidRuntime(5708):     at android.os.Looper.loop(Looper.java:137)
09-18 19:28:08.029: E/AndroidRuntime(5708):     at android.app.ActivityThread.main(ActivityThread.java:4745)
09-18 19:28:08.029: E/AndroidRuntime(5708):     at java.lang.reflect.Method.invokeNative(Native Method)
09-18 19:28:08.029: E/AndroidRuntime(5708):     at java.lang.reflect.Method.invoke(Method.java:511)
09-18 19:28:08.029: E/AndroidRuntime(5708):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:786)
09-18 19:28:08.029: E/AndroidRuntime(5708):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:553)
09-18 19:28:08.029: E/AndroidRuntime(5708):     at dalvik.system.NativeStart.main(Native Method)
09-18 19:28:08.029: E/AndroidRuntime(5708): Caused by: android.os.NetworkOnMainThreadException
09-18 19:28:08.029: E/AndroidRuntime(5708):     at android.os.StrictMode$AndroidBlockGuardPolicy.onNetwork(StrictMode.java:1117)
09-18 19:28:08.029: E/AndroidRuntime(5708):     at java.net.InetAddress.lookupHostByName(InetAddress.java:385)
09-18 19:28:08.029: E/AndroidRuntime(5708):     at java.net.InetAddress.getAllByNameImpl(InetAddress.java:236)
09-18 19:28:08.029: E/AndroidRuntime(5708):     at java.net.InetAddress.getAllByName(InetAddress.java:214)
09-18 19:28:08.029: E/AndroidRuntime(5708):     at org.apache.http.impl.conn.DefaultClientConnectionOperator.openConnection(DefaultClientConnectionOperator.java:137)
09-18 19:28:08.029: E/AndroidRuntime(5708):     at org.apache.http.impl.conn.AbstractPoolEntry.open(AbstractPoolEntry.java:164)
09-18 19:28:08.029: E/AndroidRuntime(5708):     at org.apache.http.impl.conn.AbstractPooledConnAdapter.open(AbstractPooledConnAdapter.java:119)
09-18 19:28:08.029: E/AndroidRuntime(5708):     at org.apache.http.impl.client.DefaultRequestDirector.execute(DefaultRequestDirector.java:360)
09-18 19:28:08.029: E/AndroidRuntime(5708):     at org.apache.http.impl.client.AbstractHttpClient.execute(AbstractHttpClient.java:555)
09-18 19:28:08.029: E/AndroidRuntime(5708):     at org.apache.http.impl.client.AbstractHttpClient.execute(AbstractHttpClient.java:487)
09-18 19:28:08.029: E/AndroidRuntime(5708):     at org.apache.http.impl.client.AbstractHttpClient.execute(AbstractHttpClient.java:465)
09-18 19:28:08.029: E/AndroidRuntime(5708):     at com.gavrilov.egor.movies.ParseHtmlPage.getHtmlSource(ParseHtmlPage.java:32)
09-18 19:28:08.029: E/AndroidRuntime(5708):     at com.gavrilov.egor.movies.MoviesList.onCreate(MoviesList.java:30)
09-18 19:28:08.029: E/AndroidRuntime(5708):     at android.app.Activity.performCreate(Activity.java:5008)
09-18 19:28:08.029: E/AndroidRuntime(5708):     at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1079)
09-18 19:28:08.029: E/AndroidRuntime(5708):     at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2023) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-18T15:50:45.333

可能是您在清单中没有 INTERNET 权限吗？

编辑：啊，你是在主线程上做的，不是吗？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-18T16:08:46.313

请参阅此问题以解决异常：[如何修复 android.os.NetworkOnMainThreadException？](https://stackoverflow.com/questions/6343166/android-os-networkonmainthreadexception). 对于 HTML 解析，您可以使用：http: [//jsoup.org/](http://jsoup.org/)

# javascript - 更改 cloneNode 后的 innerhtml 不起作用

> ID：12480425
> 
> 赞同：0
> 
> 时间：2012-09-18T15:42:49.890
> 
> 标签：javascript, html, html-table, innerhtml, clonenode

我有一个大约有 50 行的表。每行的最后一个单元格是一个图像，单击该图像我会在该特定行的每个单元格中显示文本框，以便用户可以编辑值。为此，我在单击图像时编写了一个 Javascript，我将遍历该特定行并将每个 td 的 innerHTML 更改为具有一个文本框。

```
function insertEdittableRow(ids){  
     var row = $(ids).closest("tr");

     var tdvar = row.find('td[class=mainServer]')[0];

      var servname = tdvar.innerHTML.trim();

      tdvar.innerHTML = "'<'INPUT id=updServerName class=TextBoxStyle value='" + servname 
                +"' type=text name=updServerName/> ";

    } 
```

这工作正常。我想做的第二步是排序。

单击表格标题时，我正在对表格进行排序。javascript 的排序是这样的。它占用所有行，将其放入具有旧索引（行号）的数组中并进行排序。然后它遍历数组并创建一个新的排序 tbody。表中旧的未排序的 tbody 将替换为这个新的排序的。

```
 for(var i=0, len=arrayOfRows.length; i'<'len; i++) {
       newTableBody.appendChild(rows[arrayOfRows[i].oldIndex].cloneNode(true));
    }

    table.replaceChild(newTableBody,tbody); 
```

这也很好用。

但问题是，现在，如第一部分所述，单击最后一个单元格中的图像按钮不起作用。我将调试器放在那个 javascript 函数中，它会在那里命中并形成文本并分配给最后一个 td 的 innerHTML，但是在页面中我看不到文本框。

总之，文本框在排序之前作为 innerHTML 插入，但是在我使用 cloneNode 进行排序后，创建了一个新的排序 tBODY 并插入到表中，innerHTML 分配不起作用。

任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-20T14:20:55.280

作为一种解决方法，我在排序时停止了 cloneNode 。相反，我为行的每个单元格做了 createElement 和 appendChild 并将行 appendChild 到 tbody

# android - 从 C++ 访问 OBB 文件

> ID：12480430
> 
> 赞同：0
> 
> 时间：2012-09-18T15:43:12.890
> 
> 标签：android, android-ndk, apk

我有一个大型游戏（50mb+），所以我需要使用谷歌提供的 APK 扩展库。

我已经设法解决了下载部分，但现在我需要知道从本机端访问 .obb 文件的最佳方式。

有[ZipResourceFile](http://developer.android.com/guide/google/play/expansion-files.html#ZipLib)，但是如何从 C++ 中有效地使用它？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-21T12:16:22.977

与 Assets 不同，ExternalStorage 中的文件可以使用普通的 posix 函数访问。我所需要的只是获取 Obb 文件的正确路径。

目录可以这样计算：

```
File root = Environment.getExternalStorageDirectory();
String path = root.toString() + Constants.EXP_PATH + getPackageName(); 
```

文件名是这样计算出来的：

```
String filename = isMainFile ? "main." : "patch.") + versionCode + "." + getPackageName() + ".obb" 
```

# qt - Qt 垂直菜单

> ID：12480432
> 
> 赞同：3
> 
> 时间：2012-09-18T15:43:25.900
> 
> 标签：qt, menu

我正在尝试使用具有以下示例结构的 Qt 应用程序创建一个垂直菜单：

```
    语
      |--> 选择
         |--> 英文
      |--> 加载
    图片
      |--> 保存格式
         |--> JPEG
         |--> 位图
      |--> JPEG 质量
         |--> 超高
         |--> 高
         |--> 低

```

等等。理想情况下，我`QMenuBar`不仅希望用于实现顶级菜单项，还希望用于实现所有子菜单。我还想利用可用于触发这些不同选项的信号/插槽。一些选项是 On 和 Off 种类，并且能够用复选标记或其他东西快速反映所选的选择将是理想的。

我可以对 进行布局，`QMenuBar`并将其放置在`QVBoxLayout`. 但是，我想要做的是将其方向从水平更改为垂直。当谈到 Qt 编程时，我是一个新手，我的搜索没有产生正确的功能或小部件来获得此功能。

所有的指针和提示表示赞赏。

这是一张图片，显示了我要完成的工作。

![菜单结构](../Images/79a06fb8016ae0d6bbb1f20baaa62880.png)

用户已选择“传感器显示”并显示 3 个子选项（压力、平移和倾斜、辐射），并且默认情况下会移至第一个选项（压力），该选项恰好有 2 个子选项（开、离开）。

与我在上面的文本菜单中描述的“树视图”相反，子菜单都需要水平显示。

问候

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-03T20:52:42.320

我已经实现了一个类似于您上图的菜单。我完全用 QML 构建它，并集成了来自 C++ 源代码的所有数据模型、信号和插槽。

查看[RSS 新闻示例](http://doc.qt.digia.com/4.7-snapshot/demos-declarative-rssnews.html)作为起点。在此示例中，他们向您展示了如何使用 QML 构建水平菜单。

制作上述模型的基础是：

*   您需要构建三个 QML 列表视图（在数据模型中填充列表，格式化列表中每个元素在委托中的外观）
*   逻辑可以用 C++ 或 QML 编写，如果您的列表非常长且复杂，我建议使用基于状态的方法。单击第一列中的一个列表元素将必须显示/隐藏/滚动第二个列表，依此类推。

如果您将 QML 列表视图元素连接到适当的信号和插槽，则可以在 C++ 中执行上述所有操作。

我希望这会有所帮助。

# vbscript - 用于检查注册表中 IPv6 状态的 VBScript 子例程...返回 -1

> ID：12480435
> 
> 赞同：0
> 
> 时间：2012-09-18T15:43:28.830
> 
> 标签：vbscript, registry, wmi, ipv6

我的脚本中有这个子例程，当值实际上是十六进制的 0xfffffff 时，它返回 -1 作为 strIPV6Status 的值。

任何想法为什么会发生这种情况？

```
'**************************************************************************
'IP Address Configuration: Check if ipv6 is disabled
'**************************************************************************
Sub CheckIPV6()
   WScript.Echo("Check if IPv6 is disabled")
   WScript.Echo("------------------------------------")
   Const strIPV6Key = "SYSTEM\CurrentControlSet\services\TCPIP6\Parameters\"
   strValueName = "DisabledComponents"
   Set objRegistry = GetObject("winmgmts:\\" & strComputer & "\root\default:StdRegProv")
   objRegistry.GetDWORDValue HKEY_LOCAL_MACHINE, strIPV6Key,strValueName,strIPV6Status
   WScript.Echo(strIPV6Key & strValueName & " = " & strIPV6Status & vbCrLf)

End Sub 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-18T15:49:08.780

不知道问题是什么......相信 0xffffffff 是 -1 的十六进制表示（有符号的 32 位整数）

# css - 在链接周围创建方形边框

> ID：12480436
> 
> 赞同：0
> 
> 时间：2012-09-18T15:43:30.033
> 
> 标签：css, hyperlink, hover, border

我想在链接周围创建一个边框，在整个链接周围形成一个正方形`:hover`。我怎样才能达到这个效果？

![链接边界](../Images/07b7d0cbfc2a1a3537e063f4b2e70429.png)

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-09-18T15:47:50.310

HTML

```
<a href="#">one</a><br/>
<a href="#">two</a><br/>
<a href="#">three</a><br/>
<a href="#">four</a><br/> 
```

CSS

```
a:hover{
 border:1px solid red;  
} 
```

[小提琴](http://jsfiddle.net/wBLdj/)

# php - 按字段名称过滤页面（高级自定义字段和 Wordpress）

> ID：12480438
> 
> 赞同：0
> 
> 时间：2012-09-18T15:43:37.317
> 
> 标签：php, wordpress

我正在使用 Wordpress 和高级自定义字段。

我希望能够创建显示不同页面摘录或过滤它们的页面。

示例：我有 10 个不同的页面，每个页面都是关于酒店的，它们在字段（高级自定义字段）中存储了有关酒店、酒店名称、位置、设施等的各种信息。

这 10 个酒店是一个主页的子页面，主页上显示所有酒店，但仅显示酒店的某些详细信息，例如描述的摘录和图像。

我创建了另一个名为“类别”的高级自定义字段，以尝试测试是否可以使其正常工作，我只为一些实际的酒店相关页面填写了“酒店”字段。

我正在努力做的是编写一些代码，以便该页面仅显示“酒店”类别下的酒店，我在模板文件中编写代码，因此列出所有酒店的主要酒店页面正在使用这个模板。

所有人都在使用页面而不是帖子，所有信息都通过高级自定义字段插件存储在字段中。

我认为代码应该正在使用`if`并且`else`功能可以正常工作。

如果有人可以帮助我解决这个问题，将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-19T02:53:58.893

您似乎想查询将某个自定义字段设置为特定值的页面。为此，您可以在页面模板中使用元查询，如下所示：

```
<?php
$args = array(
    'post_type' => 'page',
    'meta_query' => array(
        array(
            'key' => 'Category',
            'value' => 'Hotel',
            'compare' => 'LIKE'
        )
    ),
        'posts_per_page' => get_option('posts_per_page')
 );
$hotel_query = new WP_Query( $args );
?> 
```

有关自定义字段的更高级查询，请查看[WP_Query 中有关自定义字段参数的文档](http://codex.wordpress.org/Class_Reference/WP_Query#Custom_Field_Parameters)。

获取自定义查询后，您可以像往常一样遍历结果：

```
<ul>
<?php if ( $hotel_query->have_posts() ) : while ( $hotel_query->have_posts() ) : $hotel_query->the_post(); ?>
    <li><?php the_title(); ?></li>

<?php endwhile; endif; ?>
</ul> 
```

# executable - 使用代码修改器保护软件

> ID：12480439
> 
> 赞同：4
> 
> 时间：2012-09-18T15:43:40.327
> 
> 标签：executable, reverse-engineering, cracking

之前有人问过这个问题： [您是否曾经使用过代码虚拟器或 vmprotect 来防止逆向工程？](https://stackoverflow.com/questions/354676/have-you-ever-used-code-virtualizer-or-vmprotect-to-protect-from-reverse-enginee)

但是现在它已经 4 岁了，我觉得可以再问一个类似的问题，因为从那时起事情可能已经发生了很大变化。

我们正在考虑使用诸如`VMProtect`.

我们想知道的是使用 VMProtect 等软件的缺点是什么？它是流行的软件吗？它是否受到许多防病毒误报的困扰？我们还应该考虑什么？有没有更流行的替代品，或比较它们的研究？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2016-02-19T21:24:22.340

是的，从那以后发生了新的事情。

市场上出现了很多新的Anti-temper软件，每个都有自己的技术。一些像 Arxan 和 whiteCryption ......

还有一个名为 Denuvo 的新的反脾气系统，它似乎几乎不可能进行逆向工程。

VMProtect 似乎创建了一个虚拟处理器并在那里运行其加密代码，这可能会在那里有一些巨大的性能损失，如果性能对你的代码来说并不重要，请忽略这一点。

所以，有很多选项可供您选择，但请记住，每个保护程序在这方面都是平等的：它们并非不可能进行逆向工程，因此您不能只中继保护系统来保护您的软件，有些保护您的软件的良好做法是：

*   不要使用“30 天试用”的想法，如果您想提供免费示例，请制作一个未编译重要功能的演示。
*   加密软件，确保只有购买它的人才有解密它的密钥。
*   不要让任何人免费下载完整的软件，即使是加密的，也要确保只有客户才能下载。
*   在代码上打水印，基本上软件里面有客户的信息，这样就可以知道从哪里泄露了。
*   使软件绑定到它安装的特定机器（一些反脾气可能会这样做）

使用防篡改保护您的软件的一些缺点是：

*   性能损失（某些技术只会损害非时间重要功能的性能）。
*   增加可执行文件的大小。
*   内存使用量增加。
*   以及其他可能是特定于程序的..

# delphi - TRichEdit 控件中的分页符

> ID：12480440
> 
> 赞同：3
> 
> 时间：2012-09-18T15:43:42.650
> 
> 标签：delphi, delphi-xe2

我试图找到一种在使用 RichEdit Controls 打印方法时在 Delphi 中强制分页的方法。由于某些愚蠢的原因，Rich Edit 控件忽略了 \page 命令。

有谁知道这样做的方法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-18T16:17:30.983

不幸的是，TRichEdit 控件只是忽略了显示框，据我所知，没有办法强制它显示页面。

如果您想要的目标是打破页面，以便打印机可以将其拆分为多张纸，正如@SertacAkyuz 所说，在这种情况下，`\page`将被解析并且页面将正确地打印在单独的纸中。

但是，如果您的目标是以图形方式显示分页符，那么您将依赖第三方组件。

# facebook - Facebook 注册小部件在移动 Safari 上不起作用

> ID：12480441
> 
> 赞同：0
> 
> 时间：2012-09-18T15:43:50.547
> 
> 标签：facebook, mobile, registration

是否预计 Facebook 注册小部件不能在移动浏览器上运行？特别是 iOS 5 上的移动 Safari？

当我使用预先填写的表格点击注册按钮时，我收到以下错误：

API 错误代码：3 API 错误描述：未知方法。错误消息：此显示类型不支持此方法

有谁知道让它在移动设备上运行的解决方法？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-19T08:35:05.650

这里也一样... - 与 iOS5 无关，仅与 iPhone 相关。在 iPad 上一切正常。这是一个“显示类型”消息。

这不是路线图问题，而是 facebook 上的（可能）错误：报告[http://developers.facebook.com/bugs/459538657419091?browse=search_504d8f7477b589301226256](http://developers.facebook.com/bugs/459538657419091?browse=search_504d8f7477b589301226256)

在那里提交您的详细信息，希望尽快修复。

雪儿

文森特 YEL - 你的情绪直播

# ios - Xcode 测试中的 Apple Mach-O 链接器错误

> ID：12480442
> 
> 赞同：0
> 
> 时间：2012-09-18T15:43:51.093
> 
> 标签：ios, xcode, unit-testing, linker-errors

我必须在我的项目中包含单元测试。如果我从目标依赖项中排除 ApplicatioTest（在构建阶段），则应用程序可以正常工作。但是，如果我包含 ApplicationTest，然后构建应用程序以供运行，它有时会（但不是每次）给出“Apple Mach-O 链接器错误”，然后经过一些尝试，没有任何更改，应用程序会再次构建。错误数有时为 25，有时为 1。请给我提意见。

问候

# c# - 如果数字小于 10，则添加 0

> ID：12480444
> 
> 赞同：5
> 
> 时间：2012-09-18T15:43:57.130
> 
> 标签：c#, .net, formatting

> **可能重复：**
> [2 char int 上的 C# int ToString 格式？](https://stackoverflow.com/questions/9281078/c-sharp-int-tostring-format-on-2-char-int)

对不起，这很简单，但我正在躲避这个。几乎我有一个包含 36 条记录的列表，如果 id 小于 10，我需要它返回 01、02、03...09，而不是 1、2、3...9。

这是我到目前为止的代码，我认为这会起作用。这是 C# .NET：

```
for (int i = 1; i <= 36; i++)
{
    if (i.ToString().Length == 1)
    {
        i.ToString().PadLeft(2,'0');
    }

    Response.Write("Test: " + i);
} 
```

任何帮助将不胜感激，在此先感谢！

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-09-18T15:48:38.287

你不需要 IF，使用 ToString

```
int i = 5;

i.ToString("00"); //returns 05 
```

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2012-09-18T15:47:34.490

你的问题`i`还是一个整数，需要赋值给一个字符串

```
 for (int i = 1; i <= 36; i++)
    {
        var iString = i.ToString();

        if(iString.Length == 1)
        {
            iString = iString.PadLeft(2,'0'); //RIGHT HERE!!!
        }
        Response.Write("Test: " + iString);
    } 
```

但是，这段代码大部分是多余的，`if`不需要声明。Pad 只会在给定的长度 (2) 内使用零。如果它已经是 2 个或更多字符长，则不会填充任何内容。你只需要这个

```
 for (int i = 1; i <= 36; i++)
    {
        var iString = i.ToString().PadLeft(2,'0');
        Response.Write("Test: " + iString);
    } 
```

就此而言，不再需要该变量。

```
 for (int i = 1; i <= 36; i++)
    {
        Response.Write("Test: " + i.ToString().PadLeft(2,'0'));
    } 
```

如果你一直用零填充，而不是其他字符，你可以这样做

```
 for (int i = 1; i <= 36; i++)
    {
        Response.Write("Test: " + i.ToString("00"));
    } 
```

你应该养成使用的习惯`string.Format`

```
 for (int i = 1; i <= 36; i++)
    {
        Response.Write(string.Format("Test: {0}", i.ToString("00")));
    } 
```

`string.Format`为了进一步简化：

```
 for (int i = 1; i <= 36; i++)
    {
        Response.Write(string.Format("Test: {0:00}", i));
    } 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-09-18T15:47:52.573

你可以试试

```
var list = new List<string>();
for (int i = 1; i <= 36; i++)
{
    var result = string.Empty; 
    if(i < 10)
    {
         result = string.Format("0{0}", i);
    }
    else
    {
        result = i.ToString();
    }
    list.Add(result);
} 
```

注意：在调用 Response.Redirect 之前连接你的值

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-09-18T15:48:01.323

您没有对以下行做任何事情：

```
i.ToString().PadLeft(2,'0'); 
```

`i`仍然只是一个整数，当你以后使用它时，它的字符串表示不会在它前面有一个 0。您需要保存该值的字符串以便稍后打印。

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2012-09-18T15:48:47.187

您无需检查`i.ToString().Length == 1`：

```
for (int i = 1; i <= 36; i++)    
    Response.Write("Test: " + i.ToString().PadLeft(2,'0')); 
```

查看MSDN 中的[PadLeft](http://msdn.microsoft.com/en-US/library/92h5dc07.aspx)以获得说明。共同签名：

```
public string PadLeft(int totalWidth, char paddingChar) 
```

您也可以使用[String.Format](http://msdn.microsoft.com/en-US/library/system.string.format.aspx)：

```
for (int i = 1; i <= 36; i++)    
    Response.Write("Test: " + i.ToString("00")); 
```

另一种方式 - 使用[LINQ](http://msdn.microsoft.com/en-US/library/bb397926.aspx)：

```
foreach (var number in Enumerable.Range(1, 36).Select(i => i.ToString("00")))
  Response.Write("Test: " + number); 
```

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2012-09-18T15:47:51.917

您只是将 i 转换为字符串并丢弃结果。在`Response.Write("Test: " + i);`您打印 i 而不是将其转换为字符串时。尝试：

```
for (int i = 1; i <= 36; i++)
{
    if (i.ToString().Length == 1)
    {
           Response.Write(i.ToString().PadLeft(2,'0'));
    }
} 
```

# .net - 无法加载 Exchange powershell 管理单元：“Microsoft.Exchange.Data.Directory.Globals”的类型初始化程序引发异常

> ID：12480447
> 
> 赞同：12
> 
> 时间：2012-09-18T15:44:16.130
> 
> 标签：.net, powershell, exchange-server, nlog, exchange-server-2010

我有以下代码创建一个加载了 Exchange 2010 管理单元的 PowerShell 运行空间。

```
Dim runspaceConfig = RunspaceConfiguration.Create()

Dim snapInException As PSSnapInException = Nothing
runspaceConfig.AddPSSnapIn("Microsoft.Exchange.Management.PowerShell.E2010", snapInException)

Dim runspace = RunspaceFactory.CreateRunspace(runspaceConfig)
runspace.Open() 
```

自安装 Visual Studio 2012 以来，在执行将管理单元添加到运行空间配置的行时，我开始收到以下错误。

```
System.Management.Automation.Runspaces.PSSnapInException occurred
  HResult=-2146233087
  Message=Cannot load Windows PowerShell snap-in Microsoft.Exchange.Management.PowerShell.E2010 because of the following error: The type initializer for 'Microsoft.Exchange.Data.Directory.Globals' threw an exception.
  Source=System.Management.Automation
  WasThrownFromThrowStatement=False
  StackTrace:
       at System.Management.Automation.Runspaces.RunspaceConfigForSingleShell.LoadCustomPSSnapIn(PSSnapInInfo mshsnapinInfo)
       at System.Management.Automation.Runspaces.RunspaceConfigForSingleShell.LoadPSSnapIn(PSSnapInInfo mshsnapinInfo)
       at System.Management.Automation.Runspaces.RunspaceConfigForSingleShell.LoadPSSnapIn(PSSnapInInfo mshsnapinInfo, PSSnapInException& warning)
       at System.Management.Automation.Runspaces.RunspaceConfigForSingleShell.DoAddPSSnapIn(String name, PSSnapInException& warning)
       at System.Management.Automation.Runspaces.RunspaceConfiguration.AddPSSnapIn(String name, PSSnapInException& warning) 
```

我已经能够确认 nlog 以某种方式导致了这个问题。在创建 powershell 运行空间之前创建 nlog 记录器的组合会导致错误。

如果我从我的应用程序配置中删除 nlog 配置部分并仅创建一个空的 nlog 记录器，则管理单元加载时不会出现错误。此外，如果我将 nlog 配置保留在我的应用程序配置中但不创建 nlog 记录器，则管理单元也会成功加载。

*   我已经尝试在 x64 和 x86 中构建项目。
*   我已经重新安装了交易所管理工具。
*   我曾尝试在交换环境中的另一台机器上进行测试。

如果有人可以提供任何可以帮助我解决此问题的建议，我将不胜感激。

谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-24T19:01:47.697

经过进一步调查，我发现 .NET 4.5 是一个就地更新，这意味着 .NET 4.0 被覆盖并在安装时替换为 .NET 4.5。我不知道导致此问题的 .NET 4.5 中发生了什么变化，但通过卸载 .NET 4.5 并切换回 Visual Studio 2010 解决了这个问题。希望微软在不久的将来会有一些更新来解决这个问题并允许我再次使用 Visual Studio 2012。

有关就地更新的更多信息，请参阅以下文章。 [http://www.devproconnections.com/article/net-framework/net-framework-45-versioning-faces-problems-141160](http://www.devproconnections.com/article/net-framework/net-framework-45-versioning-faces-problems-141160)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2017-02-24T15:30:11.003

我已经调查了 Microsoft Exchange 程序集中的实际错误，问题是 Microsoft.Exchange.Diagnostics.dll 程序集的 ExTraceConfiguration 类（内部）枚举了当前应用程序域中的所有加载程序集。如果它找到 System.IdentityModel 或 System.ServiceModel，它会使用反射为它们配置一些跟踪。但是反射代码与.net 4.5 ServiceModel不兼容，出现错误。检测到错误后（检查空条件）尝试跟踪，但代码当前正在配置跟踪所以 => 硬崩溃。

解决方案是在 Microsoft.Exchange.Diagnostics.dll 上使用反射，加载 ExTraceConfiguration 类型并运行它的类型初始化程序：

```
type.TypeInitializer.Invoke(null, null); 
```

在 System.ServiceModel 有机会在您的应用程序域中加载之前。此初始化程序是一个静态构造函数，每个进程只能运行一次，因此之后如果需要，您可以安全地加载 ServiceModel。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-11-25T20:12:11.560

这似乎是一个已知的错误。有一个微软连接报告：

[https://connect.microsoft.com/VisualStudio/feedback/details/770748/powershell-exception-after-4-5-upgrade#tabs](https://connect.microsoft.com/VisualStudio/feedback/details/770748/powershell-exception-after-4-5-upgrade#tabs)

微软的回应是他们已经“向 Exchange 团队记录了 [the] 问题”

作为一种解决方法，您可以执行以下操作之一：

*   卸载 .NET 4.5
*   将应用程序的目标框架更改为 2.0 或 3.5。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-11-22T08:57:55.240

我的生产服务器具有完全相同的错误输出。但是，我有一个使用 .Net 4.5 框架的具有相同配置的测试服务器，但没有这个问题。所以我认为卸载 .Net 4.5 不会解决我的问题。

我的解决方案是我发现在生产服务器中 IIS 中的**ASP.Net Impersonation设置已****启用**。

在我禁用它之后，可以创建我的 powershell 运行空间，可以添加“Microsoft.Exchange.Management.PowerShell.E2010”管理单元，我的应用程序工作正常！

似乎它有某种许可问题。

# php - 如何从动态创建的嵌套无序列表构建下拉菜单？

> ID：12480448
> 
> 赞同：0
> 
> 时间：2012-09-18T15:44:22.920
> 
> 标签：php, jquery, drop-down-menu, unordered

我有一个在嵌套无序列表的循环中动态生成的无序列表。我想只显示`<h4> nested list name </h4>`然后，当单击时，将显示子列表。

这是创建列表的整个代码块：

```
 <ul class="faceted-menu">
<?php
    // Loop through faceted menus
    while(shopp('collection.facet-menus')) :

    // Skip menus with no options
    if ( ! shopp('collection.facet-menu-has-options')) continue;
?>
<li>
    <h4 style="color: #303030;"><?php
    // current facet filter name
    shopp('collection.facet-name'); ?></h4>
    <ul class="facet-option" style="display:none;">
        <?php
        // Loop through filter options for this faceted menu
        while(shopp('collection.facet-options')) : ?>
            <li>
                <a href="<?php
                    // toggle url for current filter option
                    esc_url(shopp('collection.facet-option-link')); ?>"><?php
                    // the full label of the facet filter option
                    shopp('collection.facet-option-label'); ?></a>&nbsp;(<span class="count"><?php
                // the number of products sharing this facet
                shopp('collection.facet-option-count'); ?></span>)
            </li>
        <?php endwhile; ?>
    </ul>
</li>
<?php endwhile; ?>
    </ul> 
```

以下是我尝试过的两个 jQuery 脚本，但都未能成功：

```
 $("ul.faceted-menu li").click(function(event) { 
$(this).find("ul.facet-option").removeAttr('style'); 
    }); 
```

和：

```
 $("ul.faceted-menu li").live('click', function() { 
$(this).find("ul.facet-option").removeAttr('style');  
    }); 
```

我愿意接受任何建议。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-18T16:29:10.267

试试这个：单击菜单 li 时，它将显示 .facet 选项。

```
 $("ul.faceted-menu li").click(function() { 
     $(".facet-option", this).show();
  }); 
```

如果您需要在单击时隐藏其他菜单

```
 $("ul.faceted-menu li").click(function() { 
     $(".facet-option").hide();
     $(".facet-option", this).show();
  }); 
```

# r - 计算R中的频率和项数的比率？

> ID：12480456
> 
> 赞同：0
> 
> 时间：2012-09-18T15:44:35.367
> 
> 标签：r, list, numbers, frequency

我有一大堆数据保存在一个长列表中。这是前六个记录的示例：

```
A <- list(c("JAMES","CHARLES","JAMES","RICHARD"),  
c("JOHN","ROBERT","CHARLES"),  
c("CHARLES","WILLIAM","CHARLES","MICHAEL","WILLIAM","DAVID","CHARLES","WILLIAM"),  
c("CHARLES"),  
c("CHARLES","CHARLES"),  
c("MATTHEW","CHARLES","JACK")) 
```

我想计算每个记录中每个唯一术语出现的相对频率之和与每个术语出现的记录数的比率。

我计算分子，即每个唯一术语在每个记录中出现的相对频率的总和，如下所示：

```
> B <- lapply(A, function(x)table(x)/length(x))  
> aggregate(unlist(B), list(names(unlist(B))), FUN=sum)  
Group.1         x  
1  CHARLES 3.2916667  
2    DAVID 0.1250000  
3     JACK 0.3333333  
4    JAMES 0.5000000  
5     JOHN 0.3333333  
6  MATTHEW 0.3333333  
7  MICHAEL 0.1250000  
8  RICHARD 0.2500000  
9   ROBERT 0.3333333  
10 WILLIAM 0.3750000 
```

不过，我不确定如何计算分母，即每个术语出现的记录数是否正确。我只知道如何计算每个词在数据集中出现的次数：

```
> table(unlist(A))  

CHARLES   DAVID   JACK   JAMES    JOHN MATTHEW MICHAEL RICHARD  ROBERT WILLIAM  
   9       1       1       2       1       1       1       1       1       3 
```

但是有些术语在一条记录中出现不止一次，我想省略这些重复以获得这样的结果：

```
CHARLES   DAVID   JACK   JAMES    JOHN MATTHEW MICHAEL RICHARD  ROBERT WILLIAM  
   6       1       1       1       1       1       1       1       1       1 
```

如何做到这一点？
根据我的示例，我想获得类似于此的最终输出：

```
Group.1         x  
1  CHARLES 0.5486111  
2    DAVID 0.1250000  
3     JACK 0.3333333  
4    JAMES 0.5000000  
5     JOHN 0.3333333  
6  MATTHEW 0.3333333  
7  MICHAEL 0.1250000  
8  RICHARD 0.2500000  
9   ROBERT 0.3333333  
10 WILLIAM 0.3750000 
```

那么如何计算每个术语出现的记录数，即分母和比率本身？

非常感谢您的考虑！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-18T16:45:20.833

聚合时，而不是`sum`，只需使用`mean`：

```
aggregate(unlist(B), list(names(unlist(B))), FUN=mean)  
#    Group.1         x
# 1  CHARLES 0.5486111
# 2    DAVID 0.1250000
# 3     JACK 0.3333333
# 4    JAMES 0.5000000
# 5     JOHN 0.3333333
# 6  MATTHEW 0.3333333
# 7  MICHAEL 0.1250000
# 8  RICHARD 0.2500000
# 9   ROBERT 0.3333333
# 10 WILLIAM 0.3750000 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-18T16:07:32.133

```
B <- lapply(A, unique)
B
table(unlist(B))

CHARLES   DAVID    JACK   JAMES    JOHN MATTHEW MICHAEL RICHARD  ROBERT WILLIAM 
      6       1       1       1       1       1       1       1       1       1 
```

从较早的帖子（您确实*应该*引用 user0815）。将唯一性粘贴在该表调用中。

```
 BL <- lapply(A, function(x)table(unique(x))/length(x))
 ## turn list into a vector
 B <- unlist(BL)

 aggregate(B, list(names(B)), FUN=sum)
#------------
   Group.1         x
1  CHARLES 2.5416667
2    DAVID 0.1250000
3     JACK 0.3333333
4    JAMES 0.2500000
5     JOHN 0.3333333
6  MATTHEW 0.3333333
7  MICHAEL 0.1250000
8  RICHARD 0.2500000
9   ROBERT 0.3333333
10 WILLIAM 0.1250000 
```

# asp.net-mvc - 具有嵌套必需属性的可选模型属性

> ID：12480457
> 
> 赞同：2
> 
> 时间：2012-09-18T15:44:36.337
> 
> 标签：asp.net-mvc

使用如下代码：

```
public class FooModel {

    public BarModel Bar { get; set; }

}

public class BarModel {

    [Required]
    public string Baz { get; set; }

} 
```

我想以`FooModel.Bar`一种形式呈现，但它是可选的。但是，如果没有在文本框中输入任何内容，表单将不会提交`BarModel.Baz`。有没有办法让嵌套模型成为`FooModel`可选而不需要删除`RequiredAttribute`？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-18T15:45:32.047

> 有没有办法让 FooModel 中的嵌套模型成为可选，而不必删除 RequiredAttribute？

不是我知道的。我会建议您使用将适应您的视图要求的视图模型（即具有`Baz`可选的属性）：

```
public class FooModel 
{
    public BarViewModelModel Bar { get; set; }
}

public class BarViewModelModel 
{
    public string Baz { get; set; }
} 
```

这就是为什么您应该始终使用视图模型并且永远不要将域模型传递给视图的原因之一。如您所见，您的域模型不适合视图的特定要求。您可以在某些视图中有一些属性是必需的，而在其他视图中是可选的。

# css - Flex4 外部样式表 PropertyReference

> ID：12480462
> 
> 赞同：4
> 
> 时间：2012-09-18T15:44:57.163
> 
> 标签：css, apache-flex, flex4, stylesheet

我正在尝试将样式属性声明为某个变量的值。通过调用“PropertyReference”在组件中很容易做到这一点。前任：

```
<fx:Style>
  ...
  s|TextInput {
    color: PropertyReference("some.other.package.MyClass.colorVariable");
  }
</fx:Style> 
```

但是，我正在尝试在外部样式表中执行此操作，并将其加载到`<s:Application>`带有`<fx:Style source="myStyles.css"/>`. 虽然这不会编译。看起来使用PropertyReference本身是可以的，但是它就像它无法解析我要使用的变量的路径一样。

有人知道如何正确执行此操作吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-04T09:14:46.673

当您使用 包含您的 css`<fx:Style source=""/>`时，它必须仅包含 CSS。由于您需要在 CSS 中添加程序代码，您可以尝试[在运行时加载样式表](http://help.adobe.com/en_US/flex/using/WS2db454920e96a9e51e63e3d11c0bf69084-7f8c.html)

# php - 将数据写入数组，然后写入 mysql 表

> ID：12480463
> 
> 赞同：1
> 
> 时间：2012-09-18T15:44:56.680
> 
> 标签：php, mysql

我有一个通过多个不同屏幕的网站，并且让用户输入数据，是否可以在这些页面之间链接信息？例如，如果我在第一个屏幕中获得名字、姓氏、电话号码。州、城市、第二页中的 zip 等几页我可以将数据从第一个屏幕一直传递到最后一个屏幕，然后将它们发布到数据库吗？

注意：我们这样做的全部原因是限制我们在此过程中执行的数据库写入量。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-18T16:20:21.777

使用 jquery 制作一个表单并进行这样的设计，而不是通过创建不同的页面并一次提交整个数据，而不是通过 GET 或 POST 获取数据

或者，如果您想在不同页面之间执行此操作，您可以使用[html5 webstorage](http://diveintohtml5.info/storage.html)并在成功提交时删除存储

# c# - Word 加载项搜索永远循环

> ID：12480465
> 
> 赞同：0
> 
> 时间：2012-09-18T15:45:06.693
> 
> 标签：c#, ms-word

这是我第一次在这里提出问题，所以这里是：

我正在搜索具有“标题 1”或“标题 2”样式名称的 word 文档中的文本。找到后，我将一个新范围设置为该文本的开头和文档的结尾，并调用一个方法来查找该范围中的第一个表和数字列 1，如果第二列有文本。现在，当我的代码找到完全匹配的第一条记录时，我的问题就发生了。一切正常，但 Find.Execute 进入一个永远循环并一遍又一遍地寻找相同的文本。我希望它继续搜索直到文档结束。这是我的代码，提前致谢：

```
 public void TextFind(object findText, string reqCode)
    {
        Document doc = Application.ActiveDocument;
        Range docRange = doc.Sections[1].Range;
        var intCount = 0;
        docRange.SetRange(0, docRange.Characters.Count);
        if (findText == null) throw new ArgumentNullException("findText");
        docRange.Find.Execute(findText, Forward: true, Wrap: WdFindWrap.wdFindStop);
        while (docRange.Find.Found)
        {
            intCount++;
            Style style = docRange.get_Style();
            var styleName = style.NameLocal;
            if (styleName == "Heading 1" || styleName == "Heading 2")
            {
                var endRange = doc.Sections[1].Range;
                var docRange2 = docRange;
                docRange2.SetRange(docRange.Start, endRange.End);
                ApplyNumberingToTable(docRange2, reqCode);
            }
            docRange.Find.Execute(findText, Forward: true, Wrap: WdFindWrap.wdFindStop);
        }

        MessageBox.Show(intCount.ToString());
    } 
```

并且是我试图诊断问题的尝试`intCount`。`MessageBox`

尝试第二个包括：

所以我仍然卡住了，我试图将搜索到的范围添加到列表中，并在列表上运行 foreach，但每次范围更改时，列表中对该范围的引用也会更改。我一生都无法弄清楚 t5o 如何在我的 while 循环中实例化 Range。这是我的代码：

```
public void TextFind(object findText, string reqCode)
    {
        Document doc = Application.ActiveDocument;
        Range docRange = doc.Sections[1].Range;
        var intCount = 0;
        if (findText == null) throw new ArgumentNullException("findText");
        var rangelist = new List<Range>();
        var i = 0;
        while (docRange.Find.Execute(findText, Forward: true, Wrap: WdFindWrap.wdFindStop))
        {
            rangelist = new List<Range> {docRange};
            intCount++;
        }
        foreach ( var range in rangelist)
        {
            Style style = range.get_Style();
            var styleName = style.NameLocal;
            if (styleName != "Heading 1" && styleName != "Heading 2") continue;
            var endRange = doc.Sections[1].Range;
            range.SetRange(range.Start, endRange.End);
            ApplyNumberingToTable(range, reqCode);
        }
        if (intCount == 0) return;
        MessageBox.Show(rangelist.ToString());
    } 
```

**仍在寻找解决此问题的方法。谢谢，**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-18T15:51:04.893

根据[此处](http://msdn.microsoft.com/en-us/library/microsoft.office.interop.word.find.execute.aspx)的文档，该方法本身返回一个布尔值，说明它是否已成功找到搜索。也许您应该捕获此变量并将其用于您的 while 语句，而不是 Found 属性。我目前无法对此进行测试；今天晚些时候将返回结果。

也许尝试：

```
 while (docRange.Find.Execute(findText, Forward: true, Wrap: WdFindWrap.wdFindStop))
        {
            intCount++;
            Style style = docRange.get_Style();
            var styleName = style.NameLocal;
            if (styleName == "Heading 1" || styleName == "Heading 2")
            {
                var endRange = doc.Sections[1].Range;
                var docRange2 = docRange;
                docRange2.SetRange(docRange.Start, endRange.End);
                ApplyNumberingToTable(docRange2, reqCode);
            }
            docRange.Find.Execute(findText, Forward: true, Wrap: WdFindWrap.wdFindStop);
        } 
```

# python - 不使用 for 循环的等距元素的矩阵计算

> ID：12480467
> 
> 赞同：5
> 
> 时间：2012-09-18T15:45:13.750
> 
> 标签：python, matrix, numpy

我有 2D numpy 数组和一个带有一些坐标 (i, j) 的中心（坐标表示行和列）。对于从 0 到图像边缘的每个可能距离，我需要对距中心相同距离（简单欧式距离）的所有数组元素求和，即结果是一维数组，其中第 0 个元素给出距离中的像素总和0 从中心（即只是中心），第一个元素是距离 1 像素处的所有像素的总和，依此类推。

我的感觉是，这应该可以在没有 for 循环的情况下完成，但不幸的是我不知道足够的矩阵 python 技巧来解决这个问题。

非常感谢你！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-18T15:56:03.423

我不确定这是否是您想要的，但它可能会有所帮助：

```
import numpy as np
#create data arrays to work with.
x = np.arange(10)
y = np.arange(10)
v = np.arange(100).reshape(10,10) 
#indices of the "center" of the grid
i,j = 5,5 

#Now calculated the distance of each point to the center point on the grid
#Note that `None` is the same as `np.newaxis`
r = np.sqrt((x[:,None] - x[i])**2 + (y[None,:]-y[j])**2)

#Now sum all the points that are closer than 10 units away.
np.sum(v[r<=10]) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-18T19:02:06.363

你可以使用`np.bincount`...

```
a = np.random.random((20, 22))

def distance(array, xpos, ypos):
    # probably a gazillion methods to create the actual distances...
    # if you array is large and you are only interested to a certain size
    # you sould probably slice out a smaller one first of course.
    dists = np.sqrt(np.arange(-xpos, array.shape [0]-xpos, dtype=float)[:,None]**2
          + np.arange(-ypos, array.shape [1]-ypos, dtype=float)[None,:]**2)
    return dists

# Prepare which bins to use:
dists = distance(a, 10, 11).astype(int)

# Do a bincount with weights.
result = np.bincount(dists.flat, weights=a.flat)
# and add them up:
result = np.add.accumulate(result) 
```

And`result`是一个数组，`result[distance]`对所有距离更小或相等的值求和。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-18T19:25:46.547

我会建议一个策略，但现在没有时间建议工作代码。执行以下操作：（请注意，您不能选择精确的距离，而是选择连续的、连续的距离范围，因为很少有点会处于精确的给定距离）。

1.  从数组中创建一个KDTree；
2.  取给定圆内每个点的总和，因为圆线性增加；
3.  通过从外圆中减去内圆来计算每个圆之间的“外壳”值。

它应该是这样的（当然你必须填写一些空白）：

```
import numpy
from scipy.spatial import KDTree

tree = scipy.spatial.KDTree(reshaped_array)
sums = [numpy.sum(tree.query_ball_point(dist)) for dist in xrange(desired_distances)]
desired_result = numpy.diff(sums) 
```

希望这可以帮助！

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-18T16:03:56.467

创建一些样本点：

```
>>> import numpy as np
>>> vals = np.array([[1,2],[3,4.5],[5,6]])
>>> vals
array([[ 1\. ,  2\. ],
       [ 3\. ,  4.5],
       [ 5\. ,  6\. ]]) 
```

计算中心点：

```
>>> center = np.mean(vals, axis=0)
>>> center
array([ 3\.        ,  4.16666667]) 
```

计算距中心点的距离：

```
>>> d = vals - center
>>> dist_from_center = np.sqrt(d[:,0]*d[:,0] + d[:,1]*d[:,1])
>>> dist_from_center
array([ 2.94863434,  0.33333333,  2.71313677]) 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-09-18T17:05:24.860

这不会很好地扩展到超大型阵列，而且它不是那么强大，但无论如何它有点可爱。

制作一个测试数组：

```
In [148]: import numpy as np

In [149]: m = np.random.random((8, 9))

In [150]: m
Out[150]: 
array([[ 0.36254361,  0.92449435,  0.36954906,  0.13007562,  0.95031795,
         0.1341706 ,  0.6417435 ,  0.25467616,  0.72431605],
       [ 0.75959927,  0.53992222,  0.76544104,  0.94409118,  0.27048638,
         0.44747388,  0.42691671,  0.75695594,  0.10366086],
       [ 0.12424304,  0.06642197,  0.08953764,  0.66546555,  0.30932551,
         0.50375697,  0.1344662 ,  0.31008366,  0.13953257],
       [ 0.28643294,  0.12986936,  0.39022482,  0.72869735,  0.84537494,
         0.62683481,  0.88539889,  0.35697751,  0.96332492],
       [ 0.67678959,  0.60373389,  0.15151052,  0.53586538,  0.50470088,
         0.39664842,  0.93584004,  0.97386657,  0.50405521],
       [ 0.04613492,  0.53676995,  0.60119919,  0.5559467 ,  0.09392262,
         0.69938864,  0.35719754,  0.79775878,  0.16634076],
       [ 0.00879703,  0.60874483,  0.25390384,  0.48368248,  0.52770161,
         0.64563258,  0.27353424,  0.86046696,  0.04489414],
       [ 0.80883157,  0.44484305,  0.52325907,  0.49172028,  0.46731106,
         0.06400542,  0.75671515,  0.55930335,  0.70721442]]) 
```

获取索引：

```
In [151]: centre = (3,5)

In [152]: ii = np.indices(m.shape)

In [153]: ii
Out[153]: 
array([[[0, 0, 0, 0, 0, 0, 0, 0, 0],
        [1, 1, 1, 1, 1, 1, 1, 1, 1],
        [2, 2, 2, 2, 2, 2, 2, 2, 2],
        [3, 3, 3, 3, 3, 3, 3, 3, 3],
        [4, 4, 4, 4, 4, 4, 4, 4, 4],
        [5, 5, 5, 5, 5, 5, 5, 5, 5],
        [6, 6, 6, 6, 6, 6, 6, 6, 6],
        [7, 7, 7, 7, 7, 7, 7, 7, 7]],

       [[0, 1, 2, 3, 4, 5, 6, 7, 8],
        [0, 1, 2, 3, 4, 5, 6, 7, 8],
        [0, 1, 2, 3, 4, 5, 6, 7, 8],
        [0, 1, 2, 3, 4, 5, 6, 7, 8],
        [0, 1, 2, 3, 4, 5, 6, 7, 8],
        [0, 1, 2, 3, 4, 5, 6, 7, 8],
        [0, 1, 2, 3, 4, 5, 6, 7, 8],
        [0, 1, 2, 3, 4, 5, 6, 7, 8]]])

In [154]: di = ii[0]-centre[0], ii[1]-centre[1] 
```

获取平方距离：

```
In [155]: dr2 = (di[0]**2+di[1]**2)

In [156]: dr2
Out[156]: 
array([[34, 25, 18, 13, 10,  9, 10, 13, 18],
       [29, 20, 13,  8,  5,  4,  5,  8, 13],
       [26, 17, 10,  5,  2,  1,  2,  5, 10],
       [25, 16,  9,  4,  1,  0,  1,  4,  9],
       [26, 17, 10,  5,  2,  1,  2,  5, 10],
       [29, 20, 13,  8,  5,  4,  5,  8, 13],
       [34, 25, 18, 13, 10,  9, 10, 13, 18],
       [41, 32, 25, 20, 17, 16, 17, 20, 25]]) 
```

并用于`bincount`获得总和：

```
In [158]: np.bincount(dr2.flat, m.flat)
Out[158]: 
array([ 0.62683481,  2.63117922,  1.88433263,  0\.        ,  2.23253738,
        3.63380441,  0\.        ,  0\.        ,  3.05475259,  2.13335292,
        3.27793323,  0\.        ,  0\.        ,  3.36554308,  0\.        ,
        0\.        ,  0.19387479,  1.89418207,  1.3926631 ,  0\.        ,
        2.12771579,  0\.        ,  0\.        ,  0\.        ,  0\.        ,
        3.05014562,  0.80103263,  0\.        ,  0\.        ,  0.8057342 ,
        0\.        ,  0\.        ,  0.44484305,  0\.        ,  0.37134064,
        0\.        ,  0\.        ,  0\.        ,  0\.        ,  0\.        ,
        0\.        ,  0.80883157]) 
```

# jquery - 如何使用jquery访问td内的div标签的类属性

> ID：12480469
> 
> 赞同：-1
> 
> 时间：2012-09-18T15:45:17.470
> 
> 标签：jquery

我已经渲染了下表

```
 <table id="layout" width="100%" border="0" cellspacing="6" cellpadding="0">
        <tr>
           <td>
             <div style="position: static;" class="type_normal type_common" title="33">33</div>
           </td>
           <td>
             <div style="position: static;" class="type_selected ticket_type_common" title="34">33</div>
           </td>
        </tr>
   </table> 
```

我的要求是单击特定单元格，我想要 div 标签的值和类。

```
 $("#layout").delegate('tr td','click',function(){
            var seat_selected=$(this).text();
            seat_selected=$(this).html();
            }
        }); 
```

使用 $(this).text 给我数字 33。使用 $(this).html() 给出 td 内的整个部分（我得到整个 div）。但我只想要 div 标签的类。将 div 标签的类名获取到变量的过程是什么。

我的要求是检查 div 标签中的特定类并将 div 标签更改为另一个类。例如，如果我单击的单元格具有带有类 (type_normal type_common) 的 div 标签，我想将 div 标签的类更改为 (type_selected type_common)

请指教。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-18T15:47:53.133

您可以通过以下方法获取类名，

```
var classOfDiv = $(this).find('div').attr('class'); 
```

你的代码是

```
$("#layout").delegate('tr td', 'click', function() {
        var seat_selected = $(this).text();
        seat_selected = $(this).html();
        var classOfDiv = $(this).find('div').attr('class'); 
        if($(this).find('div').attr('class') == "type_normal type_common")
            $(this).find('div').attr('class', 'type_selected type_common')
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-18T16:05:24.647

```
$("#layout").on('click', 'tr td', function() {
    var seat_selected = $(this).children(":first").attr('class')
    alert(seat_selected)
}); 
```

在这里测试它：http: [//jsfiddle.net/RASG/mqLfd/](http://jsfiddle.net/RASG/mqLfd/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-18T15:48:34.873

```
$(this).find('div').attr('class') 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-18T15:48:42.233

在`click`事件处理程序的回调函数中，`this`指的是`<td>`元素。然后，您可以使用`.find()`jQuery 函数来选择该元素内与给定选择器匹配的元素。在你的情况下，这看起来像这样：

```
var $tdDiv = $(this).find('div'); 
```

这为您提供了一个 jQuery 对象，其中包含`<div>`您的元素`<td>`，然后您可以使用该`className`属性来获取其当前类：

```
var divClass = $tdDiv.prop('className'); 
```

然后你可以使用该`.text()`函数来获取它的“值”：

```
var divValue = $tdDiv.text(); 
```

编辑：基于添加到问题的其他信息，特别是这部分：

> 我的要求是检查 div 标签中的特定类并将 div 标签更改为另一个类。例如，如果我单击的单元格具有带有类 (type_normal type_common) 的 div 标签，我想将 div 标签的类更改为 (type_selected type_common)

您可以使用该`.hasClass()`函数来检查jQuery对象中的元素是否具有特定的类，`addClass()`添加类的`removeClass()`函数和删除类的函数（或用于`toggleClass()`添加或删除，取决于该类是否已经在元素上）。

```
var $tdDiv = $(this).find('div.type_common.type_normal')
$tdDiv.removeClass('type_normal').addClass('type_selected'); 
```

# php - PHP中的Mysql表索引

> ID：12480470
> 
> 赞同：0
> 
> 时间：2012-09-18T15:45:19.920
> 
> 标签：php, mysql, indexing

我有一个 MYsql 数据库，其中包含书籍、作者和其他详细信息的名称。

哪个索引引擎可以搜索它们？

我想使用[Sphider](http://www.sphider.eu/)。

它适用于`MySQL`数据库吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-18T16:10:06.793

如果您的所有数据都已经在 mysql 数据库中，那么您不需要任何搜索/索引引擎。使用 PHP 中可用的扩展之一来查询 mysql 数据库：[MySQLi 或 PDO](http://php.net/manual/en/mysqlinfo.api.choosing.php)。
阅读扩展的文档，了解如何使用这些功能。

然后您将能够编写 PHP/MySQL 代码来操作数据库中的数据。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-18T16:10:50.063

解决方案 1：对包含要搜索的记录的表使用 MyISAM 表引擎。然后，您可以在要搜索的列上创建索引，然后应用全文搜索功能。 [http://dev.mysql.com/doc/refman/5.5/en/fulltext-search.html](http://dev.mysql.com/doc/refman/5.5/en/fulltext-search.html)

注意：当使用 MyISAM 时，您将没有事务能力，并且表可能会损坏（恢复很困难）。此外，从 MySQL 5.6.4 开始，InnoDB 具有全文支持（尽管它是一项新功能，因此它可能存在错误并且基准仍然不够充足）。

解决方案 2：使用 Sphinx 搜索服务器。它是超快速的分布式搜索系统。Sphinx 将从 MySQL 数据库中提取您想要索引的字段并对其进行索引。然后，您可以使用 Sphinx SQL 来获取与您的查询匹配的文档 ID，或者使用 Sphinx API（为知名语言提供）来获取文档 ID 匹配。 [http://sphinxsearch.com/](http://sphinxsearch.com/)

在索引和查询服务方面，Sphinx 非常快。值得一看。我会推荐它。

# django - django中是否有任何瓷砖类型的概念

> ID：12480471
> 
> 赞同：2
> 
> 时间：2012-09-18T15:45:20.263
> 
> 标签：django, templates, generics, filter

我正在 django 中寻找以下功能

我正在写一个网站，它包含许多页面，例如：主页（显示所有书籍），详细信息（所选书籍详细信息），搜索（根据搜索显示书籍）。

现在主页包含精选书籍，刚刚出版的书籍，最着名的书籍等块。详细信息页面显示所选书籍的详细信息，它应该显示特色书籍，最着名的书籍。

现在我的问题是特色，着名的书块被重复了，所以有什么方法可以单独保留模板代码（html）以及单独的视图方法。所以如果我从带有参数的主模板中调用这些迷你模板。

这样我就可以保持更通用的方式，并且将来如果我想更改某些内容，我也可以在一个地方完成，而无需重复代码。

我想用过滤器来做，但这是一个好方法吗？还是 django 提供了任何机制？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-18T15:52:43.313

您可以将可重用的 HTML 块隔离到模板中，然后使用[`{% include %}`](https://docs.djangoproject.com/en/dev/ref/templates/builtins/?from=olddocs#include)标记将它们包含在其他模板中。

它们不带参数，但您可以设置主模板以便正确设置变量，或者使用[`{% with %}`](https://docs.djangoproject.com/en/dev/ref/templates/builtins/?from=olddocs#with)标签在`{% include %}`

作为一个具体的例子，您的视图代码可以设置这样的书籍列表：

```
def book_detail_view(request, book_id):
    # Get the main book to display
    book = Book.objects.get(id=book_id)
    # Get some other books
    featured_books = Book.objects.filter(featured=True).exclude(id=book_id)
    just_in_books = Book.objects.filter(release_data__gte=last_week, featured=False).exclude(id=book_id)

    return render("book_template.html",
                  dict(book=book,
                       featured_books=featured_books,
                       just_in_books=just_in_books)) 
```

然后，在您的模板（book_template.html）中：

```
<h1>Here's your book</h1>
<!-- fragment uses a context variable called "book" -->
{% include "book_fragment.html" %}

<h2>Here are some other featured books:</h2>
{% for featured_book in featured_books %}
    <!--Temporarily define book to be the featured book in the loop -->
    {% with featured_book as book %}
        {% include "book_fragment.html" %}
    {% endwith %}
{% endfor %}

<h2>Here are some other books we just received:</h2>
<!-- This is a different way to do it, but might overwrite
     the original book variable -->
{% for book in just_in_books %}
    {% include "book_fragment.html" %}
{% endfor %} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-18T15:56:41.467

这就是[模板标签](https://docs.djangoproject.com/en/dev/howto/custom-template-tags/)的用途。一旦您编写了适当的包含标签，您就可以简单地`{% load books %} ... {% newbooks %} .. {% featuredbooks %} ... etc.`将包含相关信息的 div 放在您需要的任何地方。

# ios5 - NSNumberFormatter numberFromString doesn't return number from currency string

> ID：12480480
> 
> 赞同：0
> 
> 时间：2012-09-18T15:45:37.460
> 
> 标签：ios5, nsnumberformatter

```
numberFormatter = [[NSNumberFormatter alloc] init];
numberFormatter.numberStyle = NSNumberFormatterCurrencyStyle;    
NSLog(_priceTF.text);
NSNumber *price = [numberFormatter numberFromString:_priceTF.text];
NSLog([price stringValue]); 
```

Console output: 25 kr

P.S. : price is nil.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-18T16:33:03.117

Currently, I get NSNumber so (but that's weird):

```
NSString *priceNoCurrency = [_priceTF.text stringByReplacingOccurrencesOfString:numberFormatter.currencySymbol withString:@""];
NSNumber *price = @(priceNoCurrency.integerValue); 
```

# linux - 如何在终端中查看 HZ？

> ID：12480486
> 
> 赞同：24
> 
> 时间：2012-09-18T15:45:59.070
> 
> 标签：linux, clock

我看过这个[http://kaasxxx.wordpress.com/2008/01/22/linux-hz-checker/](http://kaasxxx.wordpress.com/2008/01/22/linux-hz-checker/) 但脚本似乎不起作用。无论如何知道在Linux终端中检查“HZ”的简单方法吗？

* * *

## 回答 #1

> 赞同：32
> 
> 时间：2012-09-18T16:52:22.617

这个问题没有统一的答案，因为在某些情况下，您的内核可能是“无滴答”编译的，根本不使用常规定时器中断。但是，如果您使用的是传统内核和传统发行版，则可以`.config`在 /boot 下找到当前内核的文件，其中包含`grep 'CONFIG_HZ=' /boot/config-$(uname -r)`.

* * *

## 回答 #2

> 赞同：17
> 
> 时间：2019-01-02T05:51:05.957

HZ 的值可以这样确定：

```
$ getconf CLK_TCK
100 
```

运行内核的任何编译时选项都可以使用`getconf`. 请记住，HZ 是可配置的：

> $ 男人 7 次
> 
> HZ 的值因内核版本和硬件平台而异。在 i386 上，情况如下：在 2.4.x 及以下的内核上，HZ 为 100，jiffy 值为 0.01 秒；从 2.6.0 开始，HZ 提高到 1000，即 0.001 秒。从内核 2.6.13 开始，HZ 值是内核配置参数，可以是 100、250（默认值）或 1000，产生的 jiffies 值分别为 0.01、0.004 或 0.001 秒。从内核 2.6.20 开始，可以使用更多频率：300，该数字可平均划分为常见的视频帧速率（PAL，25 HZ；NTSC，30 HZ）。
> 
> times(2) 系统调用是一个特例。它以内核常量 USER_HZ 定义的粒度报告时间。用户空间应用程序可以使用 sysconf(_SC_CLK_TCK) 确定该常量的 c 值。

通常情况下，您可能需要在`_SC_`使用`getconf`.

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2017-04-04T16:17:35.790

有许多不同的方法可以提示您的设置是什么。在一些单核系统上，这个技巧很方便：

```
/ # cat /proc/interrupts | grep -i time; sleep 10; cat /proc/interrupts | grep time
 16:   10404858      INTC  68 Level     gp_timer
 16:   10514798      INTC  68 Level     gp_timer 
```

它显示了 10 秒内的刻度数。睡觉。这里大约有 100'000。除以 10 得到大约 10'000 HZ。

这在多核系统上可能会让人感到困惑，因为它将是一个每个核心的列表。

另一种选择是检查您是否可以掌握原始内核配置。它将被存储在

```
/proc/config.gz 
```

解压并打开文件。搜索看起来相似的部件

```
CONFIG_HZ_FIXED=0
# CONFIG_HZ_100 is not set
# CONFIG_HZ_200 is not set
# CONFIG_HZ_250 is not set
# CONFIG_HZ_300 is not set
# CONFIG_HZ_500 is not set
# CONFIG_HZ_1000 is not set
CONFIG_HZ_10000=y
CONFIG_HZ=10000
CONFIG_SCHED_HRTICK=y 
```

只是为了警告你；10'000 与正常设置相差甚远。实验装置。

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2017-06-13T14:52:26.387

**更新：根据 scai 的评论编辑答案。**

在 Bash 中，“HZ”计算看起来像

```
$ awk '{print$22/'$(tail -n 1 /proc/uptime|cut -d. -f1)"}" /proc/self/stat
100 
```

意思是：取uptime的第22个值，除以“self”进程的开始时间。

这仅提供始终为 100 的 USER_HZ 变量，而不是内核的 CONFIG_HZ 变量。

注：古代只有*一个*HZ 变量。我猜想“#define USER_HZ 100”是在拆分时引入的。而且我还猜想**在终端/外壳使用中，您需要 USER_HZ 而不是 CONFIG_HZ**。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2019-09-10T23:07:39.190

您正在寻找的是正在运行的内核的配置内部`/proc/config.gz`（如果已启用，则在大多数系统上都是如此）。

因此，您可以使用以下方法检查生成的滴答率：

```
zcat /proc/config.gz | grep CONFIG_HZ 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2021-03-09T02:30:51.187

似乎实现同样事情的另一种方法是通过检查`cat /proc/sys/kernel/sched_min_granularity_ns`以获取调度增量的纳秒粒度。有关调度程序如何工作的更多详细信息，请查看此页面：[https ://www.kernel.org/doc/Documentation/scheduler/sched-design-CFS.txt](https://www.kernel.org/doc/Documentation/scheduler/sched-design-CFS.txt)

# python - 未解决的导入：带有扭曲模块的 PyDev 中的反应器

> ID：12480487
> 
> 赞同：2
> 
> 时间：2012-09-18T15:46:08.843
> 
> 标签：python, twisted, pydev

似乎我的 Eclipse PyDev 无法识别 Twisted 中的某些模块。当我导入反应器模块协议模块和工厂模块时：

```
from twisted.internet import reactor
from twisted.internet.protocol import Protocol, Factory 
```

PyDev 会通知我：

> 未解决的导入：reactor
> 
> 未解决的导入：协议
> 
> 未解决的导入：工厂

但代码可以按预期工作（没有错误）。

如何解决这个问题呢？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-19T20:43:12.323

任何 python 包文件夹都会发生这种情况...... Eclipse 从不自动配置它们。正如 Glyph 所说，您应该将源文件夹/zip/jar 或 egg 添加到 PyDev - PYTHONPATH。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-18T17:29:52.847

右键单击项目，单击属性，选择 PyDev - PYTHONPATH，然后将`twisted`包的位置添加到您的 PYTHONPATH。

如果 Twisted 已经安装，这对你来说应该是自动的。请[针对 PyDev 提交一个错误](http://sourceforge.net/tracker/?atid=577329&group_id=85796&func=browse)以表明这一点。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-08-05T10:48:29.093

在我的情况下，里面的东西太多了`PYTHONPATH`，而不是太少了。在*Window > Preferences > PyDev > Interpreter Python*添加新的 Python 2 解释器时，Eclipse 会自动添加`/usr/lib/python2.7/site-packages/`. 这打破了我的进口。

在全局设置和项目设置中删除`site-packages`from的子目录。`PYTHONPATH`之后使用*File > Restart*。

# php - 使用 foreach 循环查找变量 POST 数据

> ID：12480493
> 
> 赞同：1
> 
> 时间：2012-09-18T15:46:24.397
> 
> 标签：php, variables, post, foreach

为什么这不起作用？

```
// I'm sending this data: $_POST['amount_1'] = '3';
$val = '1'; // This is coming from a foreach loop, but I'm specifying here for simplicity
echo $_POST['amount_'.$val]; // Returns null
echo $_POST['amount_1']; // Returns 3 
```

尝试获取 POST 值时是否不允许使用变量？

**编辑：**每个请求发布更多代码。

```
$outgoing = array();

foreach($_POST as $key => $val):
    if(strpos($key,'_number_')){ // Matching 'item_number_' would return false because of 0-indexing
        $item_id = $val;
        $test = str_replace('item_number_',$key); // Realized when pasting this that I didn't have a $replacement defined.
        $quantity = $_POST['quantity_'.$test];

        $name = $_POST['lp-name'];
        $email = $_POST['lp-email'];
        $phone = $_POST['lp-phone'];

    array_push($outgoing,array($test,$item_id,$quantity,$name,$email,$phone));
    }
endforeach;

$json = json_encode($outgoing); 
```

现在工作。我的 str_replace() 中没有`$replacement`定义。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-18T16:13:25.497

您可以在表单元素中使用数组表示法，而不是这样做：

```
<form>
    <input name='amount[]' value='this is first'>
    <input name='amount[]' value='this is second'>
    <input name='amount[]' value='this is last'>
</form> 
```

提交此表单将以数组格式发送数据：

```
echo $amount[0]; // this is first
echo $amount[1]; // this is second
echo $amount[2]; // this is last 
```

最好的祝愿，

科尔文

# apple-touch-icon - 为什么我收到 apple-touch-icon-precomposed.png 错误

> ID：12480497
> 
> 赞同：266
> 
> 时间：2012-09-18T15:46:38.530
> 
> 标签：apple-touch-icon

我创建了一个新的 rails3 项目，但我在服务器日志中多次看到以下日志。为什么我会收到这些请求，我该如何避免这些请求？

> 2012-09-18 20:03:53 +0530 开始为 192.168.6.2 获取“/apple-touch-icon-precomposed.png”
> 
> ActionController::RoutingError (没有路由匹配 [GET] "/apple-touch-icon-precomposed.png"):

我没有在任何地方给出这个链接，也不想在任何地方渲染这个图像。我不知道为什么要尝试加载此资源。

* * *

## 回答 #1

> 赞同：239
> 
> 时间：2012-10-02T02:04:18.560

如果设备所有者将站点添加到其中，我猜苹果设备会发出这些请求。这相当于网站图标。解决方法是添加2个100×100的png文件，分别保存为apple-touch-icon-precomposed.png和apple-touch-icon.png，上传到服务器根目录。之后，错误应该消失了。

> 我注意到日志中有很多对 apple-touch-icon-precomposed.png 和 apple-touch-icon.png 的请求，这些请求试图从站点的根目录加载图像。我最初认为这是移动主题和插件的错误配置，但后来发现如果设备所有者将站点添加到 Apple 设备会发出这些请求。

资料来源：[*为什么网站管理员应该分析他们的 404 错误日志*（2012 年 3 月；作者 Martin Brinkmann）](http://www.ghacks.net/2012/03/16/why-webmasters-should-analyze-their-404-error-log/)

* * *

## 回答 #2

> 赞同：77
> 
> 时间：2013-08-15T15:30:17.987

如果用户从 Safari Web 浏览器（Apple 设备）访问您的站点。如果未按`<head>`以下顺序定义，浏览器会尝试获取站点图标：

1.  苹果触摸图标 57x57-precomposed.png
2.  苹果触摸图标 57x57.png
3.  苹果触摸图标precomposed.png
4.  苹果触摸icon.png

要解决此问题，请为 Safari Web 浏览器或 Apple 设备定义图标。将这样的内容添加到您网站的 head 部分：

```
<link rel="apple-touch-icon" href="/custom_icon.png"/> 
```

如果您想保持`<head>`清洁，请使用正确的名称将图标上传到站点的根目录。

**默认图标大小为**57px 。

[您可以在iOS 开发者库](https://developer.apple.com/library/ios/documentation/AppleApplications/Reference/SafariWebContent/ConfiguringWebApplications/ConfiguringWebApplications.html)中找到更多详细信息。

* * *

## 回答 #3

> 赞同：10
> 
> 时间：2016-12-26T23:55:01.193

如果您在此处结束谷歌搜索，这是一个简单的配置，可防止此错误填满 Web 服务器日志：

**阿帕奇虚拟主机**

```
Redirect 404 /apple-touch-icon-precomposed.png
<Location /apple-touch-icon-precomposed.png>
    ErrorDocument 404 "apple-touch-icon-precomposed does not exist"
</Location> 
```

**Nginx 服务器块：**

```
location =/apple-touch-icon-precomposed.png {
        log_not_found off;
        access_log off;
} 
```

`apple-touch-icon.png`PS：您是否也想添加`favicon.ico`。

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2012-12-19T19:00:44.813

请注意，即使用户没有将站点添加到他们的 iOS 主屏幕上，也会发生这种情况 - 例如，每当您使用 iOS 版 Chrome 打开页面时，它都会执行`GET "/apple-touch-icon-precomposed.png"`.

我已经在我的 ApplicationController 中处理了这个和其他非 HTML 404 请求，如下所示：

```
respond_to do |format|
  format.html { render :template => "error_404", :layout => "errors", :status => 404 }
  format.all { render :nothing => true, :status => 404 }
end 
```

`format.all`响应会处理此 PNG 文件（我的站点不存在该文件）之类的图像。

* * *

## 回答 #5

> 赞同：5
> 
> 时间：2016-09-22T16:28:28.770

我终于解决了！！这是 Mac 设备上的**Web Clip**功能。如果用户想在 Dock o Desktop 中添加您的网站，它会请求此图标。

```
You may want users to be able to add your web application 
or webpage link to the Home screen. These links, represented 
by an icon, are called Web Clips. Follow these simple steps 
to specify an icon to represent your web application or webpage
on iOS. 
```

**更多信息：** [https ://developer.apple.com/library/content/documentation/AppleApplications/Reference/SafariWebContent/ConfiguringWebApplications/ConfiguringWebApplications.html](https://developer.apple.com/library/content/documentation/AppleApplications/Reference/SafariWebContent/ConfiguringWebApplications/ConfiguringWebApplications.html)

**如何解决？：** 添加一个图标来解决问题。

* * *

## 回答 #6

> 赞同：5
> 
> 时间：2017-03-11T15:05:33.560

如果您不关心在各种 Apple 设备上看起来漂亮的图标，只需添加

`get '/:apple_touch_icon' => redirect('/icon.png'), constraints: { apple_touch_icon: /apple-touch-icon(-\d+x\d+)?(-precomposed)?\.png/ }`

到您的`config/routes.rb`文件和一些`icon.png`到您的`public`目录。重定向到`404.html`而不是`icon.png`工作。

* * *

## 回答 #7

> 赞同：4
> 
> 时间：2015-02-20T22:25:54.790

如果像我一样不想将这些文件添加到 Rails 应用程序中，那么有一个像[quiet_assets这样的 gem 会在你的日志中消除这些错误：](https://github.com/evrone/quiet_assets)

[https://github.com/davidcelis/quiet_safari](https://github.com/davidcelis/quiet_safari)

* * *

## 回答 #8

> 赞同：2
> 
> 时间：2017-03-07T13:31:53.370

另一种解决方案是简单地将路由添加到您的**routes.rb**

它基本上捕获了 Apple 请求并将 404 呈现给客户端。这样您的日志文件就不会杂乱无章。

```
# routes.rb at the near-end
match '/:png', via: :get, controller: 'application', action: 'apple_touch_not_found', png: /apple-touch-icon.*\.png/ 
```

然后将方法“apple_touch_not_found”添加到您的*application_controller.rb*

```
# application_controller.rb
def apple_touch_not_found
  render  plain: 'apple-touch icons not found', status: 404
end 
```

* * *

## 回答 #9

> 赞同：-1
> 
> 时间：2012-12-18T16:37:26.460

同样的事情也发生在我身上。是的，正如@Joao Leme 所说，这似乎与用户将网站添加到其设备主屏幕的书签有关。

但是，我注意到即使日志中有错误，它也在幕后发生，用户永远不会看到错误。我假设设备请求特定于其分辨率的触摸图标（不存在），直到默认为一般`apple-touch-icon`或`apple-touch-icon-precomposed`，如果存在，或者生成当前页面的小屏幕截图。

FWIW，将图标放在 /public 目录中。

* * *

## 回答 #10

> 赞同：-1
> 
> 时间：2017-04-13T11:07:20.253

只需创建称为适当名称的零大小文件。

该请求将得到满足，无需额外的数据传输或更多的日志记录行。

* * *

## 回答 #11

> 赞同：-4
> 
> 时间：2012-09-18T15:54:21.703

尝试更改链接

```
/apple-touch-icon-precomposed.png 
```

到：

```
<%=asset_path "apple-touch-icon-precomposed.png" %> 
```

# php - 当我在 php 中将信息从一个页面发布到另一个页面时，什么也没有发生

> ID：12480504
> 
> 赞同：1
> 
> 时间：2012-09-18T15:47:15.613
> 
> 标签：php, html, login, system, profile

我正在使用 php 进行登录系统。登录和注册本身可以工作，但我在登录后，页面使用 php 打印一个带有隐藏的用户名和密码输入的 html 表单，提交按钮将这些输入发布到“配置文件”php页面，它显示来自该用户的消息，并允许用户发布新消息。登录.php：

```
<html>
<head>
<title>Login</title>
<?php
if(isset($_POST['submit1'])){
    $canconnect=false;
    $user_name="root";
    $password="";
    $database="users";
    $server="localhost";
    $user=$_POST['username'];
    $pass=$_POST['pass'];
    $db_handle=mysql_connect($server,$user_name,$password);
    $db_found=mysql_select_db($database,$db_handle);
    if($db_found){
        $SQL="SELECT * FROM users";
        $result=mysql_query($SQL);
        while($db_field=mysql_fetch_assoc($result)){
            if(($user==$db_field['Username'])&&($pass==$db_field['Password'])){
                $canconnect=true;
            }
        }
        mysql_close($db_handle);
        if($canconnect){
            print("Welcome, ".$user."<br><form name='ftoprof' method='post' action='profile.php'><input type='hidden' name='hiduser' value='<?php echo $user;?>'/><input type='hidden' name='hidpass' value='<?php echo $pass;?>'/><input type='submit' name='profsub' value='View Profile'/></form>");
        }else{
            print("Username or password incorrect, please try again.");
        }
    }else{
        print("Users Database not found.");
        mysql_close($db_handle);
    }
}else{
    print("Enter Username and corresponding Password.");
}
?>
</head>
<body>
<form name="form1" method="post" action="login.php">
<input type="text" name="username" value="User"/>
<input type="text" name="pass" value="password"/>
<input type="submit" name="submit1" value="Submit"/>
</form>
Don't have an account? <a href="signup.php">Sing Up</a>
</body>
</html> 
```

我不知道问题出在此处还是在 profile.php 上：

```
<html>
<head>
<title>Profile</title>
<?php
if(isset($_POST['profsub'])){
$user=$_POST['hiduser'];
$pass=$_POST['hidpass'];
$canconnect=false;
$username="root";
$password="";
$server="localhost";
$database="users";
$db_handle=mysql_connect($server,$username,$password);
$db_found=mysql_select_db($database,$db_handle);
if($db_found){
    $SQL="SELECT * FROM users";
    $result=mysql_query($SQL);
    while($db_field=mysql_fetch_assoc($result)){
    if(($user==$db_field['Username'])&&($pass==$db_field['Password'])){
        $canconnect=true;
    }
    }
    $SQL="SELECT * FROM messages";
    $result=mysql_query($SQL);
    while($db_field=mysql_fetch_assoc($result)){
    print($db_field['message']."<br><br>");
    }if($canconnect){
    print("<form name='mesform' method='post' action='profile.php'><input type='hidden' name='user' value='<?php echo $user; ?>'/><input type='text' name='message' value='message'/><input type='submit' name='messub' value='submit'/></form>");
    }
}else{
    print("Database not found");
}
}elseif(isset($_POST['messub'])){
$mes=$_POST['message'];
$user=$_POST['user'];
$server="localhost";
$username="root";
$password="";
$database="users";
$db_handle=mysql_connect($server,$username,$password);
$db_found=mysql_select_db($database,$db_handle);
if($db_found){
        $SQL="INSERT INTO messages (User, Message) VALUES ('{$user}','{$mes}')";
        $result=mysql_query($SQL);
    }else{
        print("Database not found");
    }

}else{
print("No user's profile to display");
}
?>
</head>
<body>
</body>
</html> 
```

我在登录页面输入用户名和密码，它会弹出一个按钮，上面写着“查看个人资料”。用户数据库表有用户名密码电子邮件和电源（管理员）。Messages db 表只有 Message 和 User（发布它）。当我单击“查看个人资料”按钮时，它会将我带到个人资料页面，但该页面上什么也没有显示，我不知道问题是什么，我不知道会导致什么情况在这。请告诉我我需要对我的代码做些什么才能使其工作。顺便说一句，我正在我的计算机上运行一个带有 wamp 的“服务器”，因此我使用了 localhost。这是我的第一个 php 项目，所以我没想到在没有任何帮助的情况下第一次尝试就完美，是的，我意识到密码使用文本我会改变它，如果我让它工作（输入类型 =“密码”

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-18T15:57:09.787

```
print("Welcome, $user <br><form name='ftoprof' method='post' action='profile.php'><input type='hidden' name='hiduser' value='$user'/><input type='hidden' name='hidpass' value='$pass'/><input type='submit' name='profsub' value='View Profile'/></form>"); 
```

替换后的行

```
if($canconnect){ 
```

上面的行可能会解决问题

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-18T19:20:03.420

请！出于对安全的热爱，请勿使用此代码！

正如@TimG 在评论“PDO，PDO，PDO”中所说

只是为了帮助教育你，让我提一下这段代码的两个主要问题：

**问题1**

此 select 语句询问所有用户，然后在他们之间循环。数据库查询应该使用一个`WHERE`子句来限制它移动的数据量。

```
$SQL="SELECT * FROM users";
while($db_field=mysql_fetch_assoc($result)){
  if(($user==$db_field['Username'])&&($pass==$db_field['Password'])){
      $canconnect=true;
  }
} 
```

**ISSUE2**真正的杀手：

```
$SQL="INSERT INTO messages (User, Message) VALUES ('{$user}','{$mes}')"; 
```

这是等待发生的 SQL 注入攻击。您可以在该术语上搜索更多信息，但简而言之——SQL 注入攻击是最常见、最简单和最危险的漏洞之一。从字面上看，这段代码是通往数据库其余部分的大门。

**问题 3**纯文本密码

以纯文本形式存储密码是一个非常糟糕的主意。这里有很多关于如何加盐和加密密码的讨论。

如果您要学习 PHP 中的数据库编程，请避免学习垃圾的心痛，并从一开始就学习 PDO 和安全性。

# sql - 创建查询以显示具有特定子查询联接的小计时出现问题

> ID：12480506
> 
> 赞同：1
> 
> 时间：2012-09-18T15:47:29.503
> 
> 标签：sql, sql-server

我正在尝试创建一个查询以列出一系列连接中所有（美国）状态的计数，以便它为未出现在其余数据中的表中定义的所有状态显示 0。

到目前为止，这是我想出的：

```
SELECT s.StateName,s.StateNum, COUNT(s.StateNum) as [count]
FROM States AS s
INNER JOIN StateIncludeInClueReport as scr ON scr.statenum = s.StateNum
LEFT JOIN Staging_Policy sp ON CONVERT(TINYINT,SUBSTRING(sp.ProducerCode,1,2)) = s.StateNum
left JOIN (SELECT MIN(sip.QuoteId)AS QuoteId,sip.rmId FROM Staging_Policy sip GROUP BY sip.RMID) as sq ON sq.QuoteId = sp.QuoteID
INNER JOIN dbo.ResultMaster AS rm ON rm.rmID = sq.RMID
INNER JOIN dbo.CreditReport AS cr ON rm.rmID = cr.rmID AND cr.PolType = 'AUTO 3.0'
GROUP BY CONVERT(TINYINT,SUBSTRING(sp.ProducerCode,1,2)), s.StateName, s.StateNum
ORDER BY s.StateNum 
```

但我仍然没有看到其他数据中没有出现的记录。

[我用给定的 scema 和示例数据创建了一个 sqlFiddle。](http://sqlfiddle.com/#!3/31ee8/13)

电流输出：

```
STATENAME   STATENUM    COUNT
Kentucky    16          14
Ohio        34          4 
```

所需的输出将是：

```
STATENAME   STATENUM    COUNT
Arkansas    3           0
Georgia     10          0
Indiana     13          0
Kentucky    16          14
Missouri    24          0
Ohio        34          4
Tennessee   41          0
Texas       42          0
Virginia    45          0 
```

我不是真正的 SQL 专家，这确实给我带来了麻烦。有人会对我做错了什么有一些见解吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-18T16:03:12.807

我对您的查询进行了一些更改，包括`LEFT JOIN`在大多数连接上使用：

```
SELECT s.StateName,
  s.StateNum,
  isNull(COUNT(cr.PolType), 0) as [count]
FROM States AS s
INNER JOIN StateIncludeInClueReport as scr 
  ON scr.statenum = s.StateNum
LEFT JOIN Staging_Policy sp 
  ON CONVERT(TINYINT,SUBSTRING(sp.ProducerCode,1,2)) = s.StateNum
LEFT JOIN 
(
  SELECT MIN(sip.QuoteId)AS QuoteId, sip.rmId 
  FROM Staging_Policy sip GROUP BY sip.RMID
) as sq 
  ON sq.QuoteId = sp.QuoteID
LEFT JOIN dbo.ResultMaster AS rm 
  ON rm.rmID = sq.RMID
LEFT JOIN dbo.CreditReport AS cr 
  ON rm.rmID = cr.rmID
  AND cr.PolType = 'AUTO 3.0'
GROUP BY CONVERT(TINYINT,SUBSTRING(sp.ProducerCode,1,2)), s.StateName, s.StateNum
ORDER BY s.StateNum; 
```

# 请参阅[带有演示的 SQL Fiddle](http://sqlfiddle.com/#!3/31ee8/44)

# php - 使用循环将图像路径添加到数组，然后解析路径

> ID：12480508
> 
> 赞同：1
> 
> 时间：2012-09-18T15:47:29.497
> 
> 标签：php, jquery, html

我正在尝试实现图像搜索。我正在遍历文件夹中的图像，将它们添加到数组中，然后将图像路径与输入字符串匹配并使用 jquery 动态返回它，所以...

1) 将 /path/images/ 中的所有图像添加到数组 $a[]

2) 解析图像路径以匹配输入字符串

3) 将匹配路径添加到 $result[]

比较看起来像这样：

```
$result = array();
if (strlen($input) > 0)
{ 
for($i=0; $i<count($a); $i++) 
{
    if (strtolower($input)==strtolower(substr($a[$i],0,strlen($input))))
    {
        array_push($result, $a[$i]);
    }
 }

} 
```

一切正常......我遇到的唯一问题是：

当我添加这样的图像时，它可以解析它并且它可以工作：

```
$a[]="image1.jpg";
$a[]="image2.jpg";
$a[]="image3.jpg"; 
```

但是当我像这样循环并添加到 $a 时，它不会：

```
$a = glob('../images/all_comics/*.{jpg,gif,png}', GLOB_BRACE); 
```

$a[] = "string" 和使用 glob 技术有区别吗？

谢谢！

# php - 您如何按位移动 php 中数据类型为字符串的十六进制字符串？

> ID：12480516
> 
> 赞同：0
> 
> 时间：2012-09-18T15:47:52.437
> 
> 标签：php, binary, hex

我有一个 2 字节长的十六进制字符串，需要将第一个字节向左按位移动一个字节，然后将第二个字节添加到它。两个字符串都来自一个 32 字符长的字符串。字符串来自我正在解析的数据文件。

```
$hex="05E000752F0100D0A500503891FB199A"; //example line of data from file

$vcanvbatt=(base_convert(((base_convert(substr($hex,12,2),16,2)<<8)+base_convert(substr($hex,14,2),16,2)),2,10))/100; 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-18T16:02:06.077

您根本不需要转换为二进制，只需移动十进制数字即可。如果我正确理解您需要的数学，这应该有效：

```
$byte1 = hexdec(substr($hex, 12, 2));
$byte2 = hexdec(substr($hex, 14, 2));
$result = ($byte1 << 8) + $byte2; 
```

# c++ - 这是对具有抽象基类和 unique_ptr 成员的五法则的正确应用吗？

> ID：12480521
> 
> 赞同：-1
> 
> 时间：2012-09-18T15:48:10.667
> 
> 标签：c++, inheritance, polymorphism, move-semantics, unique-ptr

尝试使用复制/移动 ctors/赋值运算符和 dtor（五规则）的实现来解决与抽象基类相关的错误[C2248 ，并且出现了一些问题：](http://msdn.microsoft.com/en-us/library/tsbce2bh(v=vs.80).aspx)

1) 为什么在自动处理 unique_ptr 数据成员时适用主要与 dtor 相关的 5 规则？dtor 实现应该留空正确，因为一旦它们的所有者超出范围，unique_ptrs 就会自动销毁？

2) 假设另一个类具有相同类型向量的 std::unique_ptr 类型成员。为了让这个类是可复制的，它必须有一个复制 ctor 和复制赋值运算符来克隆 unique_ptr 数据成员？我已经看到了这个[解决方案](https://stackoverflow.com/questions/8988303/how-to-declare-a-vector-of-unique-ptrs-as-class-data-member)，但似乎原始发帖人只是切换到 shared_ptr 只是为了消除错误而很少考虑所有权管理。这是正确的策略吗？

3) 考虑与上述问题 2 有关 unique_ptr 向量的相同情况。dtor 是否应该包括对 clear() 向量的调用？

4) Derived1 的赋值运算符不正确。但是基类应该具有复制和移动赋值运算符，因为它具有复制/移动 ctor（4/5 规则）。这些实际上不能在类之外使用，因为它是抽象的，因此不会分配实例。但是我如何利用派生类中的这段代码呢？每个派生类都需要能够移动/复制基本数据成员及其自己的数据成员。我不知道该怎么办。

```
 #include <algorithm>
#include <memory>
#include <vector>
#include <iostream>

class Base{

public:
    Base() : m_subBases(){};

    /*  copy ctor */
    Base(const Base& other) : m_subBases(){
        *this = other;
    };

    /*  move ctor */
    Base(Base&& other) : m_subBases(){
        *this =std::move( other);
    };

    /*  Move assignment operator*/
    Base& operator=(Base&& other){
        m_subBases = std::move(other.m_subBases);
        return *this;
    };

    /*  Copy assignment operator */
    Base& operator=(const Base& other){
        for(int i = 0; i < other.m_subBases.size(); i++)
            m_subBases.push_back(other.m_subBases[i]->clone());

        return *this;
    };

    /* virtual dtor */
    virtual ~Base(){
        m_subBases.clear();
    };

    /* Used for creating clones of unique_ptrs */
    virtual std::unique_ptr <Base> clone() const= 0;

    /* Do something */
    virtual void execute(float f) = 0;

    //Omitted data member access methods

protected:
    std::vector < std::unique_ptr <Base> > m_subBases;
};

class Derived1 : public Base{

public:
    Derived1() :  Base(){};

    /*  copy ctor */
    Derived1(const Derived1& other) : Base(other){
        *this = other;
    };

    /*  move ctor */
    Derived1(Derived1&& other) : Base(std::move(other)){
        *this = std::move(other);
    };

    /*  Move assignment operator*/
    Derived1& operator=(Derived1&& other){

        //This is redundant when called in the move ctor because
        // of the call to Base(std::move(other))
        m_subBases = std::move(other.m_subBases);

        m_string = other.m_string;
        return *this;
    };

    /*  Copy assignment operator */
    Derived1& operator=( const Derived1& other){

        //This is redundant when called in the copy ctor because
        // of the call to Base(other)
        for(int i = 0; i < other.m_subBases.size(); i++)
            m_subBases.push_back(other.m_subBases[i]->clone());

        m_string = other.m_string;
        return *this;
    };

    /* virtual dtor */
    virtual ~Derived1(){};

    /* Used for creating clones of unique_ptrs */
    virtual std::unique_ptr <Base> clone() const{
        return std::unique_ptr <Base> (new Derived1(*this));
    };

    virtual void execute(float f){
        std::cout << "Derived1 " << f << std::endl; 
    };
protected:

    std::string m_string;
}; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-18T16:33:09.253

我想提供一种替代方法。正如@Tony The Lion 已经建议的那样，不是可怕的五规则，而是令人愉快的零规则。我的提议的完整实现已经由几个人编码，@R 中有一个很好的版本[。Martinho Fernandes 的图书馆](http://hg.tumtumtree.me/wheels/src/c8e1b8979492/include/wheels/smart_ptr/value_ptr.h%2B%2B)，但我将提供一个简化版本。

首先，让我们回顾一下：

**零规则：**不要编写复制或移动构造函数、复制或移动赋值运算符或析构函数。相反，*组成*您的组件类，这些组件处理*单一职责*并封装相关单个资源的所需行为。

有一个明显的警告：当你*设计*单一职责类时，你当然必须遵守：

**五法则：**如果您编写复制或移动构造函数、复制或移动赋值运算符或析构函数中的任何一种，则必须实现所有五种。（但这条规则需要的“五个”函数实际上是：Destructor、Copy-Const、Move-Const、Assignment 和 Swap。）

我们开始做吧。首先，您的消费者：

```
struct X;

struct Base
{
    std::vector<value_ptr<X>> v;
};

struct Derived : Base
{
}; 
```

请注意两者`Base`并`Derived`遵守零规则！

我们需要做的就是实施`value_ptr`。如果指针对象是非多态的，则执行以下操作：

```
template <typename T>
class value_ptr
{
    T * ptr;
public:
    // Constructors
    constexpr value_ptr()      noexcept : ptr(nullptr) { }
    constexpr value_ptr(T * p) noexcept : ptr(p)       { }

    // Rule of Five begins here:
    ~value_ptr() { ::delete ptr; }
    value_ptr(value_ptr const & rhs) : ptr(rhs.ptr ? ::new T(*rhs.ptr) : nullptr) { }
    value_ptr(value_ptr && rhs) noexcept : ptr(rhs.ptr) { rhs.ptr = nullptr; }
    value_ptr & operator=(value_ptr rhs) { swap(rhs); return *this; }
    void swap(value_ptr & rhs) noexcept { std::swap(rhs.ptr, ptr); }

    // Pointer stuff
    T & operator*() const noexcept { return *ptr; }
    T * operator->() const noexcept { return ptr; }
};

template <typename T, typename ...Args>
value_ptr<T> make_value(Args &&... args)
{
    return value_ptr<T>(::new T(std::forward<Args>(args)...));
} 
```

如果您想要处理多态基类指针的智能指针，我建议您要求您的基类提供一个虚`clone()`函数，并实现 a `clone_ptr<T>`，其复制构造函数如下所示：

```
clone_ptr(clone_ptr const & rhs) : ptr(rhs.ptr ? rhs.ptr->clone() : nullptr) { } 
```

# actionscript-3 - 如何将 StageVideo 旋转 90 度

> ID：12480525
> 
> 赞同：2
> 
> 时间：2012-09-18T15:48:28.507
> 
> 标签：actionscript-3, apache-flex, flex4.6

我有一个移动应用程序，当您播放 stagevideo 时，我将允许横向模式。

我很熟悉创建一个 veiwport 并让 stagevideo 在 ios 上播放。我正在检测设备方向何时改变，然后我想在方向改变时旋转 stagevideo 对象。我没有找到有关如何执行此操作的任何示例或文档。

我注意到 Rectangle 对象具有可以设置的 topLeft 和 bottomRight 值。我想知道更改值是否可以解决问题，或者如果我将 X 和 Y 设置为现在为“0、0”的角，是否会创建一个新的视口设置 X、Y 和宽度和高度将旋转视频旋转后？换句话说，如果我在横向中顺时针旋转我的手机，那么新的视口将是这样的。

```
sv.viewPort = new Rectangle(0, view.stage.stageHeight, view.stage.stageHeight, view.stage.stageWidth); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2016-10-21T19:22:59.907

您可以通过旋转编码来旋转 StageVideo 类播放的视频！例如，在 After Effects 中，只需在将包含视频的合成嵌套到新合成后旋转它即可。然后渲染。然后使用 StageVideo 将其拾取。瞧。

# php - 开始和结束之间的每个日期的 JSON MySQL 添加到 JSON 编码

> ID：12480526
> 
> 赞同：0
> 
> 时间：2012-09-18T15:48:29.373
> 
> 标签：php, arrays, associative-array, json

我在 MySQL 中有一个表，其中有一个`startdate`和`enddate`。

1 行的示例是（忽略整个命名）：

```
eg 
startdate -> 20121224
endate -> 20121226
title -> name
etc 
```

我当前的脚本效果很好，并为每一行添加到 JSON，但是.....我想....为每个 mysql 行获取 startdate 和 enddate，对于包含在 startdate 和 enddate 中的每个日期添加到 JSON编码。

**因此，而不是上面的 1 行返回示例：**

```
[{
    "user": "378",
    "date": "UNIX_TIMESTAMP(startdate)",
    "title": "name",
    "description": "6 Days",
    "url": "UNIX_TIMESTAMP(enddate)",
    "bmanager": "manager name",
    "academic_year": "20120801",
    "division": "division name",
    "manager_id": "3"
}] 
```

* * *

**它将为每个日期的一行返回 3 个 JSON：**

```
[{
    "user": "378",
    "date": "UNIX_TIMESTAMP(1st date)",
    "title": "name",
    "description": "6 Days",
    "url": "UNIX_TIMESTAMP(1st date)",
    "bmanager": "manager name",
    "academic_year": "20120801",
    "division": "division name",
    "manager_id": "3"
}, {
    "user": "378",
    "date": "UNIX_TIMESTAMP(2nd date)",
    "title": "name",
    "description": "6 Days",
    "url": "UNIX_TIMESTAMP(2nd date)",
    "bmanager": "manager name",
    "academic_year": "20120801",
    "division": "division name",
    "manager_id": "3"
}, {
    "user": "378",
    "date": "UNIX_TIMESTAMP(3rd date)",
    "title": "name",
    "description": "6 Days",
    "url": "UNIX_TIMESTAMP(3rd date)",
    "bmanager": "manager name",
    "academic_year": "20120801",
    "division": "division name",
    "manager_id": "3"
}, ] 
```

* * *

**JSON**

```
<?php
    header('Content-type: text/json');

    $lmanager = $_GET["lmanager"];

    $sqldata = mysql_query('
    SELECT
    requests.user,
    UNIX_TIMESTAMP(requests.start_date) AS date,
    requests.employee AS title, 
    requests.days AS description,
    UNIX_TIMESTAMP(requests.end_date) AS url,
    business.line_manager AS bmanager,
    requests.academic_year,
    business.academic_year,
    business.division,
    line_managers.userid AS manager_id
    FROM requests 
    INNER JOIN holiday_entitlement_business_manual AS business ON requests.user=business.userid AND requests.academic_year=business.academic_year
    INNER JOIN line_managers ON business.line_manager=line_managers.name
    WHERE requests.approved = 1 AND line_managers.userid = '.$lmanager.'
    ');

    $posts = array();

    while($row = mysql_fetch_assoc($sqldata))
    {
        $row['date'] = $row['date'].'000';
        $row['url'] = $row['url'].'000';
        $row['description'] = $row['description'].' Days';
        $posts[] = $row;
    }

    mysql_free_result($sqldata);
    die(json_encode($posts));
?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-18T16:04:17.823

将此添加到您的 sql 选择查询中：

```
select datediff(requests.end_date, requests.start_date) as numdays 
```

然后做这样的事情：

```
while($row = mysql_fetch_assoc($sqldata))
{
    for($i = 0; $i < $row['numdays']; $i++){
        $row['date'] = $row['date']+$i*24*60*60; // add 24 hours in seconds to the start_date stamp
        $posts[] = $row;
    }
} 
```

你可能需要调整它，

# mysql - MySQL 如果 join table.col 存在 case 作为查询本身的一部分？

> ID：12480529
> 
> 赞同：0
> 
> 时间：2012-09-18T15:48:30.717
> 
> 标签：mysql, database, relational-database

我在这里遇到了一个奇怪的情况，我尝试通过 SQL 来解决，所以我不必在应用程序中进行太多修改:)。有什么方法可以判断查询中的查询中是否存在列？（Table2 并不总是加入到查询中）

```
SELECT * FROM
Table1 as T1
join Table2 as T2 on t1.id = t2.fk
WHERE
T1.something > 10 OR (IF(table and column exists in the query T2.col, 1, 0); 
```

我的替代方法是始终加入 Table2（在这种情况下很痛苦）。任何 SQL 大师/天才可以提供帮助吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-18T16:40:04.170

我通过一个简单的解决方法解决了这个问题。所以，为了参考...

```
SELECT *
FROM Table1 as T1
WHERE T1.something > 10 OR ((SELECT ....) = 1) 
```

# c# - 如何从 Java 应用程序编译 c#/c++ 文件

> ID：12480534
> 
> 赞同：1
> 
> 时间：2012-09-18T15:48:41.650
> 
> 标签：c#, java, c++, compiler-construction

我只是在研究编译器，我想知道是否可以从 Java 应用程序编译 c# 和 c++ 文件（例如，要从 Java 应用程序编译 java，您可以使用 JavaCompiler API）。我已经在网上寻找过这个，但我能找到的只是从 c# 和 c++ 编译 java 文件的方法，而不是相反。

如果是这样，您可以为此使用哪些 API？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-18T15:57:24.933

如果您知道用于编译和执行 .cpp 文件的系统命令（对 c# 不太了解），您可能需要查看[此](http://www.java-samples.com/showtutorial.php?tutorialid=8).cpp 文件。它详细介绍了如何从 Java 程序执行系统命令。传递用于编译所需文件的系统命令`Runtime.getRuntime().exec()`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-18T16:17:49.297

考虑学习如何从 Java 代码调用 ant 并使用类似[这种 ant 增强](http://codemesh.com/products/junction/doc/ant_cpp.html)的东西。

免责声明：我对这个产品一无所知，但通过搜索“can ant build c++?”找到了它。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-18T16:38:14.903

对于 Windows 中的 C#：编译器 (csc.exe) 是 Windows 上 .Net 安装的一部分，可以在众所周知的位置找到（如`%windir%\Microsoft.NET\Framework\v3.5`.Net 3.5）。同一位置还包含可以构建项目文件 (*.csproj) 的 MSBuild.exe。

如果使用 Csc.exe 编译单个文件，您的代码可能需要提供引用库的位置。

# c# - 除非处于调试模式，否则链接到 SQL Server 的 C# 程序不会运行更新查询

> ID：12480541
> 
> 赞同：1
> 
> 时间：2012-09-18T15:49:00.807
> 
> 标签：c#, sql-server

我有一个与用 C# 编写的 SQL 服务器交互的程序。我正在使用带有参数化的存储过程。

我有一个更改标志的操作，然后循环遍历列表框，为每个项目更改数据库中的标志。当我运行程序时，它会更改标志，但不会更改列表框的标志；但是当我在调试模式下运行它时它确实如此。

C#代码：

```
DialogResult results = MessageBox.Show("Warning: This action is irreversable." + System.Environment.NewLine + "Are you sure you want to make " /*MPI Number and Rev*/ + " active?", "Confirm MPI Rev Status Change", MessageBoxButtons.YesNo);
            if (results == DialogResult.Yes)
            {
                //Set previous CID
                SqlConnection PreviousCIDConnection = new SqlConnection();
                SqlCommand PreviousCIDCommand = new SqlCommand("dbo.ViewMPI_PreviousCIDActive", PreviousCIDConnection);
                PreviousCIDCommand.Parameters.AddWithValue("@MPINumber", MPINumber);
                DataSet PreviousCIDDataset = ViewMPIScreen.GetValues(PreviousCIDCommand);
                PreviousCID = System.Convert.ToInt32(PreviousCIDDataset.Tables[0].Rows[0][0].ToString());

                //Mark the selected copy locations as destroyed
                for (int i = 0; i < LocationsCheckedListBoxActivate.Items.Count; i++)
                {
                    if (LocationsCheckedListBoxActivate.GetItemChecked(i))
                    {
                        SqlConnection DeleteLocConnection = new SqlConnection();
                        SqlCommand DeleteLocCommand = new SqlCommand("dbo.UndestroyedCopies_Destroy", DeleteLocConnection);
                        DeleteLocCommand.Parameters.AddWithValue("@RCID", System.Convert.ToInt32(ActivateLocDatatable.Rows[i][8].ToString()));
                        DeleteLocCommand.Parameters.AddWithValue("@EngID", EngID);
                        DeleteLocCommand.Parameters.AddWithValue("@IssueDestroyDate", DateTime.Now.ToString());
                        ViewMPIScreen.ChangeValues(DeleteLocCommand);//Calls the method in ViewMPIScreen.cs that deletes, updates, or inserts data into the database
                    }
                }
                //Make the old revision inactive and the new revision active
                SqlConnection ActivateConnection = new SqlConnection();
                SqlCommand ActivateCommand = new SqlCommand("dbo.ActivateMPI_Activate", ActivateConnection);
                ActivateCommand.Parameters.AddWithValue("@PreviousCID", PreviousCID);
                ActivateCommand.Parameters.AddWithValue("@CID", CurrentCID);
                ViewMPIScreen.ChangeValues(ActivateCommand);

                this.DialogResult = DialogResult.OK;
                this.Close();
            } 
```

未运行的程序：

```
CREATE PROCEDURE [dbo].[UndestroyedCopies_Destroy]
    @RCID               INT,
    @EngID              SMALLINT,
    @IssueDestroyDate   SMALLDATETIME
AS
BEGIN
    SET NOCOUNT ON
    --Who destroyed the copy and issued the new copy
    UPDATE
        dbo.tbl51RevCopies
    SET
        EngID = EngID
    WHERE
        RCID = @RCID;
    --When the copy was issues and the previous destroyed
    UPDATE
        dbo.tbl51RevCopies
    SET
        IssueDestroyDate = @IssueDestroyDate
    WHERE
        RCID = @RCID;
    --Flag that says the copy was destroyed
    UPDATE
        dbo.tbl51RevCopies
    SET
        Destroyed = 1
    WHERE
        RCID = @RCID;
END
GO 
```

# java - 来自 Java 的 Base64 字符串损坏

> ID：12480553
> 
> 赞同：2
> 
> 时间：2012-09-18T15:49:53.210
> 
> 标签：java, cordova, base64, decode

我有一个我修改过的 phonegap 插件。Java 部分输出一个 base64 字符串：

```
package org.apache.cordova;

import java.io.ByteArrayOutputStream;
import java.io.File;

import org.apache.cordova.api.Plugin;
import org.apache.cordova.api.PluginResult;
import org.json.JSONArray;

import android.annotation.TargetApi;
import android.graphics.Bitmap;
import android.os.Environment;
import android.util.Base64;
import android.view.View;

public class Screenshot extends Plugin {

    @Override

    public PluginResult execute(String action, JSONArray args, String callbackId) {
        // starting on ICS, some WebView methods
        // can only be called on UI threads
        final Plugin that = this;
        final String id = callbackId;
        super.cordova.getActivity().runOnUiThread(new Runnable() {
            //@Override
            @TargetApi(8)
            public void run() {
                View view = webView.getRootView();

                view.setDrawingCacheEnabled(true);
                Bitmap bitmap = Bitmap.createBitmap(view.getDrawingCache());
                view.setDrawingCacheEnabled(false);

                File folder = new File(Environment.getExternalStorageDirectory(), "Pictures");
                if (!folder.exists()) {
                    folder.mkdirs();

                }

                File f = new File(folder, "screenshot_" + System.currentTimeMillis() + ".png");
                System.out.println(folder);
                System.out.println("screenshot_" + System.currentTimeMillis() + ".png");

                ByteArrayOutputStream baos = new ByteArrayOutputStream();  
                bitmap.compress(Bitmap.CompressFormat.PNG, 100, baos);
                byte[] b = baos.toByteArray();
                String base64String = Base64.encodeToString(b, Base64.DEFAULT);
                String mytextstring = "data:image/png;base64,"+base64String;
                System.out.println(mytextstring);

                that.success(new PluginResult(PluginResult.Status.OK, mytextstring), id);
            }
        });

        PluginResult imageData = new PluginResult(PluginResult.Status.NO_RESULT);
        imageData.setKeepCallback(true);
        System.out.println("imageData=============>>>>>"+imageData);
        return imageData;
    }

} 
```

然后我将它传递给一些 Javascript，然后将字符串发送到服务器。我检查了 .php 文件接收到的字符串，base64 字符串是相同的。但是，当我解码 base64 字符串时，它似乎已损坏。举个更好的例子，将此文本文件的内容复制到解码器中。

[http://dl.dropbox.com/u/91982671/base64.txt](http://dl.dropbox.com/u/91982671/base64.txt)

**注意：**当 .php 文件尝试对其进行解码时 data:image/png;base64, 在前面，我刚刚将其删除，以便您将其粘贴到解码器中。

解码器在这里找到：

[http://www.motobit.com/util/base64-decoder-encoder.asp](http://www.motobit.com/util/base64-decoder-encoder.asp)

我能想到的是，由于某种原因，我可能无法从 Java 中正确输出 base64 字符串。有谁知道发生了什么？或者是什么原因造成的？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-19T08:08:08.623

昨晚我玩了几个小时，并考虑了其中一些建议。

首先，我在编码之前检查了图像。很好。

然而，在它进入 Javascript 之前对其进行解码表明它已损坏，这意味着它必须与 Java 编码过程有关。为了解决这个问题，我并没有声称 100% 理解它为什么会发生，但问题似乎在于这段代码：

```
String mytextstring = "data:image/png;base64,"+base64String; 
```

以及在将其发送到 Javascript 和 PHP 解码器之前添加“data:/image/png;base64”的方式。为了解决这个问题，我从 Java 代码中删除了它，所以它变成了：

```
String mytextstring = base64String; 
```

在我将它发送到服务器的 JavaScript 函数中，我将它添加到那里的字符串中，这很有效，我收到了一个未损坏的图像。以防万一有人想知道/关心我添加它的Javascript函数如下：

```
function returnScreenshotImage(imageData) { 
    base64string = "data:image/png;base64,"+imageData;
    console.log("String: "+base64string);

    var url = 'http://www.websitename.co.uk/upload.php';
    var params = {image: imageData};

    document.basicfrm.oldscreenshotimg.value = document.basicfrm.screenshotimg.value;

    // send the data
    $.post(url, params, function(data) {
           document.basicfrm.screenshotimg.value = data;

           });    
} 
```

如您所见：

```
base64string = "data:image/png;base64,"+imageData; 
```

添加以前由 Java 添加的部分。这现在有效。希望这对未来的人们有所帮助。如果有人愿意评论广告，请解释为什么会这样，如果他们知道，请随意。:)

# facebook - 在哪里下载适用于 Visual Studio 的 Facebook sdk？

> ID：12480555
> 
> 赞同：-1
> 
> 时间：2012-09-18T15:50:01.163
> 
> 标签：facebook, visual-studio, windows-phone

我正在尝试使用 VisualStudio 制作一个 Windows Phone 应用程序，该应用程序有一个按钮，当我单击该按钮时，它会在 facebook 用户中发布一个句子和图像。它总是一样的，所以我将对句子和图像进行硬编码。

为此，我认为我需要下载 Facebook sdk 并将 Facebook.dll 添加到我的参考项目中，但我不知道在哪里下载 sdk 以及如何添加它。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-18T16:22:27.393

developer.facebook.com/docs/sdks/ 对此感到抱歉...

在 codeplex 上试试这个 FB SDK，它有一些电话示例和 FB SDK。 [http://facebooktoolkit.codeplex.com/](http://facebooktoolkit.codeplex.com/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-18T11:54:33.497

试用 Facebook C# SDK，您可以从 github 或[nuget获取](http://nuget.org/packages/Facebook)[Facebook C# SDK](http://csharpsdk.org/)。

Codeplex 上托管的 Facebook Toolkit SDK 已被废弃。

# java - 如何在 iTextRenderer 转换中显示小于等于

> ID：12480559
> 
> 赞同：2
> 
> 时间：2012-09-18T15:50:10.463
> 
> 标签：java, pdf, xhtml, itext, flying-saucer

我已经尝试了我所知道的一切，但仍然无法让 ≥ 和 ≤ 字符显示在我的由 Flying Saucer 的 iTextRenderer 从 xHTML 生成的 PDF 中。当然，它们在我的浏览器中显示为 HTML。我尝试了不同的 xml 编码类型、文档类型，并使用十进制和十六进制值而不是快捷方式名称。尽管如此，没有显示错误，但我在字符应该存在的地方得到了一个空格。

有没有人使用带有 ≤ 和 ≥ 特殊符号的 iTextRenderer 成功地将 xhtml 转换为 pdf，如果是，如何？

解决方案：好的，我解决了这个问题。事实证明，我确实需要使用以下 Java 代码行将 Verdana 字体嵌入到 PDF 中：

```
renderer.getFontResolver().addFont("/Library/Fonts/Verdana.ttf", BaseFont.IDENTITY_H, BaseFont.EMBEDDED);
renderer.getFontResolver().addFont("/Library/Fonts/Verdana Bold.ttf", BaseFont.IDENTITY_H, BaseFont.EMBEDDED);
renderer.getFontResolver().addFont("/Library/Fonts/Verdana Italic.ttf", BaseFont.IDENTITY_H, BaseFont.EMBEDDED);
renderer.getFontResolver().addFont("/Library/Fonts/Verdana Bold Italic.ttf", BaseFont.IDENTITY_H, BaseFont.EMBEDDED); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-19T17:51:47.157

解决方案：好的，我解决了这个问题。事实证明，我确实需要使用以下 Java 代码行将 Verdana 字体嵌入到 PDF 中：

```
renderer.getFontResolver().addFont("/Library/Fonts/Verdana.ttf", BaseFont.IDENTITY_H, BaseFont.EMBEDDED);
renderer.getFontResolver().addFont("/Library/Fonts/Verdana Bold.ttf", BaseFont.IDENTITY_H, BaseFont.EMBEDDED);
renderer.getFontResolver().addFont("/Library/Fonts/Verdana Italic.ttf", BaseFont.IDENTITY_H, BaseFont.EMBEDDED);
renderer.getFontResolver().addFont("/Library/Fonts/Verdana Bold Italic.ttf", BaseFont.IDENTITY_H, BaseFont.EMBEDDED); 
```

# algorithm - 用已经支持它们的语言实现数据结构/算法

> ID：12480561
> 
> 赞同：1
> 
> 时间：2012-09-18T15:50:23.070
> 
> 标签：algorithm, data-structures, programming-languages, implementation

用您选择的语言实现您自己的数据结构和算法版本是否有意义，即使它们已经受到支持，知道已经注意调整它们以获得最佳性能？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-18T15:56:36.400

有时候是的。您可能需要针对特定​​情况优化数据结构，或为其提供一些特定的额外功能。

一个 java 示例是[apache Lucene](http://lucene.apache.org/core/)（一个成熟的、广泛使用的信息检索库）。尽管`Map<S,T>`接口和实现已经存在——出于性能问题，它的使用还不够好，`int`因为`Integer`它[`IntToIntMap`](http://lucene.apache.org/core/old_versioned_docs/versions/3_5_0/api/all/org/apache/lucene/util/collections/IntToIntMap.html)把`Map<Integer,Integer>`.

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-18T16:20:53.680

该问题包含一个错误的假设，即存在“最佳性能”之类的东西。

*如果已经存在的代码针对**您的特定使用模式*进行了优化以获得最佳性能，那么您就不可能在性能方面对其进行改进，并且尝试这样做是徒劳的。

但是，它并未针对您的特定用途进行调整以获得最佳性能。假设它完全经过调整，它的设计旨在平均具有良好的全面性能，涵盖许多可能的使用模式，其中一些与您无关。

因此，原则上可以通过自己实现代码，应用一些对您有帮助的调整，并且（如果实施者完全认为该调整）可能会在其他地方阻碍其他用户。但这没关系，他们不必使用您的代码。也许你喜欢杜鹃散列，而他们喜欢线性探测。

实施者可能没有考虑调整的原因包括：他们不如你聪明（很少见，但确实发生了）；当他们编写代码时并没有发明调整，并且他们没有遵循该结构/算法的最新技术；他们有更好的事情来处理他们的时间，而你没有。在这些情况下，一旦你完成，他们可能会接受你的补丁。

除了性能之外，还有一些其他原因，您可能想要一个与您的语言支持的数据结构非常相似的数据结构，但添加或删除了一些特定的行为。如果你不能在现有结构之上实现它，那么你可能会从头开始。显然，这样做的成本很高，无论是前期还是未来的支持，但如果值得，那么你就去做。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-18T15:58:24.043

当您使用编译语言（如 C、Assembly..）时，这可能是有意义的。使用解释型语言时，您可能会损失性能，因为本机结构解析器已经编译，不会浪费时间“解释”新结构。只有当本机结构或算法缺少您需要的东西时，您才会这样做。

# c# - C# 单元测试 StreamWriter 参数

> ID：12480563
> 
> 赞同：12
> 
> 时间：2012-09-18T15:50:29.310
> 
> 标签：c#, unit-testing, streamwriter

我有一堆类都实现了一个接口，其中一个参数是 StreamWriter。

我需要检查 StreamWriter 的内容。

我试图找到一种方法来避免在测试服务器上写入文本文件并打开它们来检查内容。

有没有办法快速将 StreamWriter 内容/流转换为 StringBuilder 变量？

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-09-18T15:53:44.763

您无法*检查*. `StreamWriter`您可以检查它正在写入的底层流。因此，您可以`MemoryStream`在单元测试中使用 a 并将其指向`StreamWriter`它。完成写入后，您可以从中读取。

```
[TestMethod]
public void SomeMethod_Should_Write_Some_Expected_Output()
{
    // arrange
    using (var stream = new MemoryStream())
    using (var writer = new StreamWriter(stream))
    {
        // act
        sut.SomeMethod(writer);

        // assert
        string actual = Encoding.UTF8.GetString(stream.ToArray());
        Assert.AreEqual("some expected output", actual);
    }
} 
```

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2012-09-18T15:54:12.503

我建议您将参数更改为`TextWriter`if at all possible - 此时您可以使用`StringWriter`.

或者，您可以在 a`StreamWriter`周围创建 a [`MemoryStream`](http://msdn.microsoft.com/library/system.io.memorystream.aspx)，然后稍后测试它的内容`MemoryStream`（通过倒带它，或者只是调用[`ToArray()`](http://msdn.microsoft.com/en-US/library/system.io.memorystream.toarray.aspx)以将完整内容作为字节数组获取。如果您真的想测试*文本*，那么使用起来肯定更简单一个`StringWriter`。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-18T15:56:40.680

在这种情况下，您需要模拟测试用例。你可以使用像 rhino mocks 这样的框架。mocking 框架的那个优点是，你可以验证对象的内容，但你不必打服务器或占用服务器资源。

此链接将为您提供基本示例： http: [//www.codeproject.com/Articles/10719/Introducing-Rhino-Mocks](http://www.codeproject.com/Articles/10719/Introducing-Rhino-Mocks)

# android - Android ActionbarSherlock 自定义

> ID：12480564
> 
> 赞同：1
> 
> 时间：2012-09-18T15:50:29.293
> 
> 标签：android, actionbarsherlock

我正在开发一个外观不同的应用程序，具体取决于 API 调用的结果。此调用返回一组数据，其中还包含有关应用程序外观的信息。由于我在运行时获得了这些信息，因此我无法编辑 styles.xml 来设计我正在使用的 ActionBarSherlock。

想知道的是，有没有办法仅从代码中自定义 ActionBar？我的意思不仅仅是图标、标题或背景。但是 textcolors 和 menuitems 等等。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-18T16:09:33.687

执行以下操作，其中操作栏是带有一堆按钮的布局，您可以以编程方式重新设置样式

```
//ActionBar Functions
protected void initActionBar()
{
    // Inflate the custom view for action bar
    View customNav = LayoutInflater.from(this).inflate(R.layout.actionbar, null);

    // Attach to the action bar
    getSupportActionBar().setCustomView(customNav);
    getSupportActionBar().setDisplayShowCustomEnabled(true);
    getSupportActionBar().setDisplayShowHomeEnabled(false);
    getSupportActionBar().setDisplayShowTitleEnabled(false);
    setActionBar();
} 
```

# asp-classic - 将外来字符转换为正常字符

> ID：12480565
> 
> 赞同：2
> 
> 时间：2012-09-18T15:50:30.777
> 
> 标签：asp-classic, vbscript

我有一个国际照片网站。当办公室上传来自国外的照片时，标题和标题有时会带有外国字符，例如：

```
1\. François Hollande
2\. ValŽrie Trierweiler 
```

这些数据按原样存储在数据库中（MySQL – latin1_swedish_ci）。现在，在搜索 Francois 时，没有法语字符，用简单的英语，那些特定的照片不会显示。

现在这不仅仅是法语字符的问题——其他国家也是如此。这怎么可能，在我提交到我的数据库之前，将这些外来字符转换为普通字符，例如：

1.  弗朗索瓦·奥朗德

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-18T19:03:41.863

您可以使用`Adodb.Stream`字符`ascii`集来完成。这是一个例子：

```
With Server.CreateObject("Adodb.Stream")
    .Charset = "ascii"
    .Open
    .WriteText "François Hollande ValŽrie Trierweiler ÖÇŞİĞÜöçşığü ôûõòùìñ"
    .Position = 0
    Response.Write .ReadText
End With 
```

`Francois Hollande ValZrie Trierweiler OCSIGUocsigu ouoouin`以上脚本必须准确打印。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-01-17T16:31:47.860

像这样它可以是一个函数

```
Function unaccent(strg)
    With Server.CreateObject("Adodb.Stream")
    .Charset = "ascii"
    .Open
    .WriteText strg
    .Position = 0
    unaccent = .ReadText
    End With
End Function 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-18T16:17:32.463

[这个答案](https://stackoverflow.com/questions/249087/how-do-i-remove-diacritics-accents-from-a-string-in-net)很可能会涵盖您的情况。

您不需要外部库，并且可以使用多种方法检查一致性，使用正则表达式是我个人对不太大字符串的偏好。

# c# - 不能加倍。解析字符串

> ID：12480569
> 
> 赞同：4
> 
> 时间：2012-09-18T15:50:46.067
> 
> 标签：c#, string, parsing

我在将字符串解析为双精度时遇到问题。我有`StreamWriter`一个文本文件的阅读行。文本文件有以下几行：

```
17-09-2012: (100,98)
17-09-2012: (50,57) 
```

现在，我想使用括号内的值，将它们加在一起并将它们显示在文本框中。到目前为止，我有以下内容：

```
int counter = 0;
double res = 0;
string line;

System.IO.StreamReader file = new System.IO.StreamReader("d:\\test.txt");
while ((line = file.ReadLine()) != null)
{
    string par = Regex.Match(line, @"\(([^)]*)\)").Value;
    double par2 = double.Parse(par);
    res += par2;

    counter++;
}
file.Close();
textBox1.Text = res.ToString(); 
```

但是，显然输入字符串的格式不正确，我觉得这很奇怪，因为正则表达式应该删除除括号内的数字之外的所有内容。我什至通过将字符串写入文本框而不先将它们添加在一起来检查这一点，它显示了`"100,9850,57"`. 真的，我不明白，为什么它不能将字符串转换为双精度。

我希望你能告诉我，我做错了什么。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-18T15:57:16.933

您的“par”变量包含一个类似于：“(100,98)”的字符串，这就是它无法解析的原因。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-18T15:58:55.633

将您的正则表达式更改为`(?<=\()(([^)]*))(?=\))`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-18T16:01:03.483

将您的正则表达式设置为`(?<=\()(([^)]*))(?=\))`并使用此帮助程序应该可以解决您的问题：

```
 public static double ParseDouble(string input)
        {
            // unify string (no spaces, only . )
            string output = input.Trim().Replace(" ", "").Replace(",", ".");

            // split it on points
            string[] split = output.Split('.');

            if (split.Count() > 1)
            {
                // take all parts except last
                output = String.Join("", split.Take(split.Count() - 1).ToArray());

                // combine token parts with last part
                output = String.Format("{0}.{1}", output, split.Last());
            }

            // parse double invariant
            double d = Double.Parse(output, CultureInfo.InvariantCulture);
            return d;
        } 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-18T15:58:24.207

您可以尝试使用 - 基于`InvariantCulture`

```
 var culture = CultureInfo.InvariantCulture;
 double result = double.Parse(par , culture); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-18T15:58:31.537

您可以强制 double.Parse 使用`,`用作小数分隔符的区域性，如下所示：

```
CultureInfo culture = new CultureInfo("de-DE");
double d = double.Parse(par, culture); 
```

如果您希望您的程序也可以在具有不同区域设置的计算机上运行，​​那么这无论如何都是一个好主意。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-09-18T17:02:47.933

我通过尝试使其工作，抓住：

```
string par = Regex.Match(line, @"(?<=\()(([^)]*))(?=\))").Value;
                try
                {
                    double par2 = double.Parse(par);
                    res += par2;
                }
                catch
                {
                } 
```

谢谢大家的帮助。

# jquery-ui - JQuery Sortable\Serialize 问题

> ID：12480571
> 
> 赞同：0
> 
> 时间：2012-09-18T15:50:54.440
> 
> 标签：jquery-ui, serialization, jquery-ui-sortable

我有一个使用 PHP 从数据库生成列表的文档

```
$q = "SELECT * FROM display ORDER BY diplay_order ASC";
$r = @mysqli_query ($dbc, $q);

echo "<ul id='categoryorder'>";

while ($item = mysqli_fetch_array($r)) {

echo "<li><div id='" . $item['ad_type'] . "_" . $item['unique_id'] . "'>
      <form name='remove' action='saveable.php' method='get'>
      <input type='submit' value='remove' />
      <input type='hidden' name='id' value='" . $item['unique_id'] . "'>
      </form>" .$item['unique_id'] . "</div></li>";     
}

echo "</ul>"; 
```

然后我使这些可排序的工作正常，但我无法让序列化工作，它只是创建一个空数组。

```
$(document).ready(function() {                             
   $('ul#categoryorder').sortable({ 
    update: function() {
        var order = $("ul#categoryorder").sortable("serialize");
        alert(order);
    }                                         
});
}); 
```

然后警报框就空了。我对此很陌生，任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-18T16:03:13.540

您需要添加`id`到`<li>`标签。更改这部分 PHP 代码，

```
echo "<li id='" . $item['ad_type'] . "_" . $item['unique_id'] . "'><div><form name='remove' action='saveable.php' method='get'><input type='submit' value='remove' /><input type='hidden' name='id' value='" . $item['unique_id'] . "'></form>" .$item['unique_id'] . "</div></li>"; 
```

添加`id`到`<li>`.

# android - 在 Android 上将 Google 日历与我自己的日历应用同步

> ID：12480573
> 
> 赞同：1
> 
> 时间：2012-09-18T15:50:56.530
> 
> 标签：android, google-calendar-api, android-calendar

您好，过去几天我一直在寻找很多东西，现在我很困惑该怎么做。

**尝试做：**创建我自己的日历并在日历上显示所有事件。我现在有 XML 文件中的所有事件，一切正常。现在我将我的日历应用程序与我的 OWN 谷歌日历帐户连接以从我自己的谷歌日历帐户中获取**（只读）**所有事件，因为我不想再使用 XML 文件了。当我想稍后更新事件时，这不是一个好主意。我不希望用户必须输入用户名/密码才能连接 Google 日历。我想对它进行硬编码。

**问题：**我通过使用 G-Data Google Api 为 iphone 做了类似的事情，它完全符合我的要求。但是，G-Data Google Api与 Android**不兼容。**然后我搜索并发现 ppl 建议使用 Google_api_java_client 代替。

这是一个[链接](http://samples.google-api-java-client.googlecode.com/hg/calendar-android-sample/instructions.html)，它可以通过让用户输入用户名和密码来连接谷歌日历帐户。然而，这不是我想要的。我想在我的代码中硬编码用户名和密码，但他们使用的是 OAuth，那么我无法硬编码我的用户名/密码。[我也从这个链接](http://code.google.com/p/google-api-java-client/wiki/ClientLogin)尝试了 ClientLogin ，但它也不起作用。它不断向我抛出错误[“GoogleTransport 无法解析”](https://groups.google.com/forum/?fromgroups=#!topic/prediction-api-discuss/B3oJevuTkhI)。我搜索了此错误的解决方案，请大家推荐我回到 OAuth。这真的让我现在很困惑。

我希望有人经历过这个并有解决方案，请帮助我/指导我如何在 android 上实现它。我只想从我自己的谷歌日历帐户中读取数据，请不要从本机日历应用程序中读取数据。

[我找到的最后一条信息是向 allcalendars 提要URL](https://developers.google.com/google-apps/calendar/v2/developers_guide_protocol#RetrievingAllCalendars)发送经过身份验证的 GET 请求。但是，我从来没有这样做过，如果您认为它应该工作，请协助我。

我真的很感激任何帮助。非常感谢你。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-21T14:45:37.650

您已经获得了 Android 日历创建部分的权利，您现在只需要从您的 google 日历中读取事件即可将它们添加到您新创建的 Android 日历中。

这简单。

1.  从[Google 日历网络应用程序](https://www.google.com/calendar/render)公开您的日历。（无论如何，在您的应用程序中嵌入您的登录名/密码是一个坏主意，任何人都可以窃取它）。
2.  在**公共日历 URL**部分附近的“议程参数”页面上，您将能够复制公共*AgendaId*（格式为`xxxYYYzzz@group.calendar.google.com`）。
3.  从您的应用程序中，向此网址发出 http GET 请求[https://www.google.com/calendar/feeds/AgendaId%40group.calendar.google.com/public/full?alt=json&orderby=starttime&max-results=15&singleevents= true&sortorder=ascending&futureevents=true](https://www.google.com/calendar/feeds/AgendaId%40group.calendar.google.com/public/full?alt=json&orderby=starttime&max-results=15&singleevents=true&sortorder=ascending&futureevents=true)（将*AgendaId*替换为实际值），您将能够以 json 格式读取未来事件。
4.  要调整格式 (json/xml) 或返回条目的数量，请阅读此处的文档：[https ://developers.google.com/gdata/docs/2.0/reference#Queries](https://developers.google.com/gdata/docs/2.0/reference#Queries)

另外，请注意这是旧 API。新 API 需要您注册一个帐户才能使用它，并且每天限制为 10 000 个免费请求。

# php - drupal 6 node_load 宽度条件

> ID：12480576
> 
> 赞同：-1
> 
> 时间：2012-09-18T15:51:09.410
> 
> 标签：php, drupal-6

情况如下：

我有两种内容类型。内容类型 a 具有内容类型 b 的 cck 引用字段。

现在我正在尝试从内容类型 a 中加载所有引用到内容类型 b 的节点。

这是我拥有的代码。

```
$nidcur =  $fields['nid']->content;

$node = node_load(array("field_micselect" => $nidcur));

dpm($node); 
```

所以我想加载所有与 nid $nidcur 相关的节点。

谢谢你

狼人

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-19T12:53:13.683

如果其他人正在寻找这个，这里是有效的代码。

```
 $nidcur =  $fields['nid']->content;

   $referenced_nodes = db_query("SELECT `field_FIELD_NAME_nid` AS `nid` FROM {content_field_FIELD_NAME} WHERE field_NAME_nid = " . $nidcur);
  while ($referenced_node = db_fetch_object($referenced_nodes)) {
    $node = node_load(array('nid' => $referenced_node->nid));

   } 
```

# c# - 通过反射修饰 DataType 属性

> ID：12480577
> 
> 赞同：4
> 
> 时间：2012-09-18T15:51:16.390
> 
> 标签：c#, reflection

假设这个场景

```
public class CustomerMetaData
{

    [DataType(DataType.EmailAddress)]       
    public String EmailAddress {get;set;}

    [DataType(DataType.Url)]       
    public String UrlUser {get;set;}

} 
```

我需要通过**反射**获取此类上所有属性的 DataType，但是在广泛的网络搜索中，我没有找到围绕此类 DataAttribute 的任何解决方案。

我再解释一下，我不需要知道属性的数据类型 Like、String、Boolean ....) 我需要 [DataType(DataType.....)] 属性的一部分。

提前致谢。

一些想法？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-18T15:55:27.213

您需要 GetCustomAttributes 方法。

这是来自记忆，但它会是这样的：

```
PropertyInfo[] props = typeof(CustomerMetaData).GetProperties();
foreach(PropertyInfo p in props)
{
    object[] attribs = p.GetCustomAttributes(false);
    // do something with the attributes
} 
```

查找 GetProperties 和 GetCustomAttributes 方法以确保参数：如果您的任何属性是非公共的，则必须指定一些附加信息来获取它们的信息。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-04-11T13:44:17.047

经过5年的思考...

```
PropertyInfo[] props = typeof(CustomerMetaData).GetProperties();
foreach(PropertyInfo p in props)
{
    IEnumerable<DataTypeAttibute> dataTypeAttrs = p.GetCustomAttributes<DataTypeAttribute>(false);
    foreach(var attr in dataTypeAttrs)
    {
        DataType dataType = attr.DataType;
        // do something with the datatype
    }
} 
```

# c# - 在类声明中使用 new 关键字

> ID：12480578
> 
> 赞同：1
> 
> 时间：2012-09-18T15:36:05.127
> 
> 标签：c#, declaration

有人可以在下面的代码中解释 new 关键字的使用吗？

```
public class TableList<T> : ObservableCollection<T> where T : ITable, new() 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-18T15:44:01.267

假设这是 C#：

它是一个[泛型约束](http://msdn.microsoft.com/en-us/library/sd2w2ew5.aspx)，这意味着 T 必须有一个无参数的构造函数

没有它你不能构造一个新的 T()

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-18T15:45:13.397

这是泛型的事情。这意味着任何用于替换 T 的类都必须有一个不带参数的构造函数。

IE。用你的例子，如果你写

```
var list = new TableList<Foo>(); 
```

Foo 必须有一个默认构造函数，否则它不会编译。

这样做的原因是它允许 TableList 类的作者说

```
var item = new T(); 
```

并且编译器可以将其（特别是对于 TableList<Foo>）翻译为

```
var item = new Foo(); 
```

不用担心 Foo 可能不会通过默认构造函数实例化。

# sql-server - 从远程执行存储过程插入本地表

> ID：12480587
> 
> 赞同：2
> 
> 时间：2012-09-18T15:52:20.947
> 
> 标签：sql-server, sql-server-2008

我试过这个：

```
insert into MyTable (col1, col2... coln)
exec remoteServer.remoteDB.dbo.StoredProcedure.

The operation could not be performed because the OLE DB provider 'SQLOLEDB' was unable to begin a distributed transaction. 
```

本地服务器是 SQL 2000，远程是 2008。

任何的想法？当我尝试执行存储过程时，事情运行顺利，我得到了结果`SELECT`所以问题在于复制。

我已经尝试启用 MSDTC 及其配置（如此[处所示](http://support.microsoft.com/kb/816701)）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-18T16:44:41.833

假设您还没有尝试过，请尝试将此标注包装在`DISTRIBUTED TRANSACTION`

[http://msdn.microsoft.com/en-us/library/ms188386.aspx](http://msdn.microsoft.com/en-us/library/ms188386.aspx)

```
BEGIN DISTRIBUTED TRAN

...

COMMIT TRANSACTION 
```

# javascript - ie8 (Windows XP) 上的 d3 svg 图表

> ID：12480588
> 
> 赞同：2
> 
> 时间：2012-09-18T15:52:33.147
> 
> 标签：javascript, internet-explorer-8, svg, raphael, d3.js

有没有人成功让 d3.js (svg) 在 ie8 上工作（Windows XP 版本：8.0.6001.18702）？

[d34raphael](http://webmonarch.github.com/d34raphael/examples.html)解决方案适用于 Windows 7 上的 IE8（版本：8.0.7601.17514）。但是 Windows XP (8.0.6001.18702) 上的 IE8 不同，d34raphael 不适用于此版本。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-30T16:55:33.997

我推荐 r2d3.js

[https://github.com/mhemesath/r2d3/](https://github.com/mhemesath/r2d3/)

请务必阅读自述文件以使其正常运行。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-10-25T05:07:40.667

r2d3 对图片和文字的支持不是很好，

我建议 ：

[https://github.com/shawnbot/aight](https://github.com/shawnbot/aight)

# c# - 无法在 C# 中使用 Windows 窗体计时器停止计时

> ID：12480592
> 
> 赞同：1
> 
> 时间：2012-09-18T15:52:58.347
> 
> 标签：c#, forms, timer

我已经在我的构造函数中初始化了一个 Windows 窗体计时器（并通过编写“pTimer.Enabled = true”将其设置为在适当的时间运行。在构造函数中 -

```
 pTimer = new Timer();
            pTimer.Enabled = false; 
            pTimer.Interval = timerSpeed;
            pTimer.Tick += new EventHandler(pTimer_Tick); 
```

在计时器回调中，我正在检查我的工作是否已完成。一旦它是，我想停止计时器（在某种意义上它不会继续调用 pTimer_Tick 回调）并关闭正在执行日志记录的流写入器。

```
 private void pTimer_Tick(object sender, EventArgs e)
           {
                bool tempFinished = finished();
                log("finished() in timer tick = " + tempFinished.ToString());
                if (tempFinished)
                {
                     if (pTimer.Enabled == true)
                     {
                         log("We are going to stop the timer");
                         pTimer.Enabled = false;
                         Application.DoEvents();
                         log("We are going to close the streamwriter");
                         //myStreamWriter.Close();
                     }
                }
           } 
```

似乎会出现以下行为：

1.  在pTimer_Tick回调中第一次finished()==true之后，我们记录“finished() in timer tick = True”，代码达到pTimer.Enabled = false
2.  最初，我没有注释掉关闭流写入器，这会产生错误，因为它继续尝试写入从 pTimer_Tick 回调记录的代码
3.  如果我们注释掉 myStreamWriter.Close(); （如上所述），1.发生后，代码确实似乎不断重新进入pTimer_Tick回调，它在到达“bool tempFinished=finished()”行时运行finished()方法，并将内部日志记录到finished () 方法表明它将再次按预期输出“true”，但下一行的日志记录“log(”finished() in timer tick = “+ tempFinished.ToString());” 永远不会宕机，接下来出现在日志中的是再次访问finished()函数的代码。

有人对这里可能出现的问题有任何建议吗？

谢谢！克里斯

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-09-18T16:52:11.650

您正在通过设置`Enabled`属性来启动和停止计时器。尽管您在评论中声称这已经足够了，但我不相信。

尝试改用`Start`和`Stop`计时器功能。

# jquery - 返回数组 jquery

> ID：12480593
> 
> 赞同：0
> 
> 时间：2012-09-18T15:52:58.340
> 
> 标签：jquery, arrays

我在 jquery 中返回数组时遇到问题。我使用 ajax 来响应来自 mysql 的数据，我必须添加它做数组并返回。

这是我的代码：

```
function addOption()
    {
         itemsarray = [];

        $.ajax({
            type: "POST",
            url: "",
            data:{
                option: 'com_zamowienia',
                view: 'zamowienia_lista',
                task: 'getStatusy'
            },
            success: function(data){
                var obj = $.parseJSON(data);         
                    for (x=0; x<obj.length; x++) {
                        itemsarray.push(obj[x].nazwa);
                }
            }
        });

        return itemsarray;
    } 
```

当我使用：警报（addOption（））。我看到空警报

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-18T15:54:04.153

由于***AJAX***是异步的，所以你不能这样返回数组。

所以，你应该使用回调函数来获取数组：

```
function addOption(callback)
    {
         itemsarray = [];

        $.ajax({
            type: "POST",
            url: "",
            data:{
                option: 'com_zamowienia',
                view: 'zamowienia_lista',
                task: 'getStatusy'
            },
            success: function(data){
                var obj = $.parseJSON(data);         
                for (x=0; x<obj.length; x++) {
                        itemsarray.push(obj[x].nazwa);
                }
                // return you itemsarray through callback function parameter
                callback(itemsarray);
            }
        });
    } 
```

像这样调用函数：

```
addOption(function(myarr) {
   console.log( myarr );
}); 
```

# recursion - 方案：简单递归

> ID：12480596
> 
> 赞同：0
> 
> 时间：2012-09-18T15:53:13.287
> 
> 标签：recursion, scheme

我的递归函数将给定面积乘以 1.5，直到达到 100,000。输出应该是它必须乘以 1.5 的次数。我想我了解我需要做的大部分事情，但我不确定在我的 (if) 语句中放什么。

```
(define area-multiplier
  (lambda (area)
    (if (< 100000 area)
        0         ;what do I put here?
        (+ 1 (area-multiplier (* area 1.5)))))) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-18T16:45:13.950

用一个例子来思考这个问题。在这种情况下，相关的例子是

```
(area-multiplier 100000) 
```

和

```
(area-multiplier 100001) 
```

这些应该产生什么？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-18T16:26:56.407

你所拥有的很好，除了如果你想让 100000 返回 0，那么`<`将`<=`. :-)

# cucumber - 避免在 Gherkin 中重复自己

> ID：12480598
> 
> 赞同：6
> 
> 时间：2012-09-18T15:53:15.570
> 
> 标签：cucumber, specflow, gherkin

所以我已经使用 specflow 一段时间了，有些事情一直困扰着我。

这是我们当前使用的场景示例：

```
Scenario: Select a region via selection button
    When I select "Scotland" from Available Regions
    And I click on the "Select One" button
    Then Available Regions does not contain "Scotland"
    And Selected Regions contains "Scotland" 
```

是否有避免在几乎每条线路上都说“苏格兰”的方法？或者它是否使它更具可读性，我应该坚持下去？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-18T17:58:52.737

在我尝试回答您的问题之前，我建议您花点时间阅读一下 Dan North 的[Who's domain is it Anyway](http://dannorth.net/2011/01/31/whose-domain-is-it-anyway/)。

所以首先我想去掉那一行`And I click on the "Select One" button`，因为我认为这应该是隐含的一部分`When I select "Scotland" from Available regions`。

现在你有

```
Scenario: Select a region 
    When I select "Scotland" from Available Regions
    Then Available Regions does not contain "Scotland"
    And Selected Regions contains "Scotland" 
```

你可以把它写成

```
Scenario: Select a region 
    When I select "Scotland" from Available Regions
    Then Available Regions does not contain the last selected region
    And Selected Regions contains the last selected region 
```

有很大的不同吗？好吧，可能不是。

随着我花更多时间在 cucumber 上，我发现它有助于重构场景，就像重构场景背后的代码一样。在 C#/SpecFlow 我们可以实现

```
 Then Available Regions does not contain "Scotland" 
```

和

```
 [Then("Available Regions does not contain (.*)")]
    public void ThenAvailableRegionsDoesNotContain(string region)
    {
        AvailableRegions.Contains(region).ShouldBeFalse();
    } 
```

和

```
 Then Available Regions does not contain the last selected region 
```

和

```
 [Then("Available Regions does not contain the last selected region")]
    public void ThenAvailableRegionsDoesNotContainLastSelectedRegion()
    {
        ThenAvailableRegionsDoesNotContain(LastSelectedRegion);
    } 
```

老实说，这取决于你。你喜欢哪种方言

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-27T09:25:47.163

有趣的例子！

正如其他人所说，通常建议在您的场景中避免实施细节 - 这就是步骤定义的用途。但是你已经知道了。

然后我要问的问题是：你要向谁证明这种行为？谁有兴趣断言您可以通过正式测试单击按钮或双击？如果您的答案不是“没人”，那么这可能适用：

“当这个场景被写出来时，你可以想象利益相关者可能不太在乎......**一旦我们开始引入选项......细节......突然变得有趣**......

**在这一点上，我希望这个场景会增加一些更细粒度或更低级别的场景，每个场景都描述了我们支持的不同 [选项]。这些新方案将针对不同的利益相关者。**"

*来自 Dan North 的“这到底是谁的领域？”的评论。*

也许您希望以两种形式编写场景：一个更高级别的只是演示用户可以为业务人员选择区域（*如何*不重要），另外两个用于显示不同选项的不同利益相关者。

所以，一旦你决定你所做的事情*是*值得的，我可能会重复“苏格兰”（一个单一值的表在这里是多余的）。

稍微不同的是，我还建议：

```
Then Available Regions should not contain "Scotland"
And Selected Regions should contain "Scotland" 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-30T09:44:51.140

我建议修改这个场景的标题。“选择一个地区”并没有真正告诉你，从这个例子中可以期待什么。它可能是当您选择一个区域时触发的一些复杂行为，或者是一个微小的 UI 细节，例如所选区域从可用区域移动到所选区域列表。

如果我正确理解了您的示例，则为后者，因此我建议使用如下标题：

```
Scenario: Selected region should be moved from available to selected regions 
```

拥有更具表现力的标题具有恕我直言的优势：

1) 当您正在寻找某个细节时，您可以更快地在活文档中导航并找到相关示例：阅读富有表现力的标题总是比阅读整个示例并逆向工程其意图更快。

2）对于更复杂的场景（这个例子似乎不是），一个表达场景意图的富有表现力的标题有助于读者更快地理解场景的细节。

为了使场景更有趣，我会将断言合并为一个步骤，因为您实际上想要断言所选项目已从可用列表移动到所选列表：

```
Scenario: Selected region should be moved from available to selected regions
  When I select "Scotland" from "Available Regions"
  Then "Scotland" should be moved from "Available Regions" to "Selected Regions" 
```

我认为这非常接近我在对话中向某人解释这个细节的方式。我不介意在这里重复“苏格兰”，尽管有些人可能更喜欢用“所选地区”替换“苏格兰”，正如 AlSki 已经指出的那样。这是一个品味问题，我通常会尝试听在关于场景的对话中使用了哪些实际单词，这应该总是在写下来之前发生。

作为一个小提示，我想提一下，我的印象是这是一个涉及相当低级 UI 细节的场景。当我选择一个特定区域时（如果选择一个区域有任何特定的业务相关性），我会更感兴趣，它有什么更高层次的影响。如果你真的想在场景中描述和自动验证这样一个低级 UI 细节，我会考虑在我如何描述场景时展示这一点：

```
Scenario: Selected region should be moved from available to selected regions list
  When I select "Scotland" from the "Available Regions" list
  Then "Scotland" should be moved from the "Available Regions" to "Selected Regions" list 
```

当然，我现在只是假设您正在描述场景中列表的详细 UI 行为，因为您没有在原始场景中编写列表。如果不是关于 UI，即您所描述的内容，则应该对场景进行不同的表述以更好地表达这一点。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-19T14:21:37.183

虽然我同意@AlSki 的观点，一些重构是个好主意，但您可以使用`Examples`语法多次使用相同的值：

```
Scenario Outline: Select a region
  Given do this "<value>"
  And do that "<value>"
  When we perform "<value>"
  Then we get "<value>"
Examples:
  | value    |
  | Scotland | 
```

您还可以将多个条目添加到表中，以每次使用不同的值多次运行相同的测试：

```
...
Examples:
  | value    |
  | Scotland |
  | England  |
  | Wales    | 
```

[这是一个](https://github.com/cucumber/cucumber/blob/master/examples/i18n/en/features/addition.feature)具有多个值的示例，它允许您执行以下操作：

```
Scenario Outline: Select a region
  Given do this "<value>" with "<area>"
  And do that "<value>"
  When we perform "<value>"
  Then we get "<result>"
Examples:
  | value    | area   | result |
  | Scotland | North  | 40     |
  | Scotland | South  | 100    |
  | England  | West   | 200    |
  | England  | North  | 180    | 
```

# c# - WCF 服务 - 实例化一个类

> ID：12480599
> 
> 赞同：0
> 
> 时间：2012-09-18T15:53:20.417
> 
> 标签：c#, wcf, class, dll, reference

我正在创建一个 WCF 服务（.NET 4.0/c#）...我在项目中添加了一个新类，我试图像这样实例化它：

```
 MyNewClass inst = new MyNewClass(); 
```

...但我在该行收到了著名的“对象引用未设置对象的实例”消息。

我可能做错了什么？

编辑：

这是课程：

```
using System;
using bla, bla, blah...

public class MyNewClass
{
  private string cnn1 = ConfigurationManager.ConnectionStrings["connection_string_1"].ConnectionString;
  private string cnn2 = ConfigurationManager.ConnectionStrings["connection_string_2"].ConnectionString;

  public string Conn(string s)
  {
    string cnn = string.Empty;

    switch (s)
    {
      case "Server1":
        cnn = cnn1;
        break;
      case "Server2":
        cnn = cnn2;
        break;
    }

    return cnn;

  }

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-18T16:46:50.147

您应该传入一个配置对象，而不是调用 ConfigurationManager。这将允许您使用 appconfig / webconfig 的类独立。

例如，也许

```
public MyClass(string conn1, string conn2)
{...} 
```

或者至少在访问属性之前检查 null，

例如，将其更改为在构造函数中

```
private string cnn1;

public MyClass()
{
    if (ConfigurationManager.ConnectionStrings["connection_string_1"] != null)
    cnn1 = ConfigurationManager.ConnectionStrings["connection_string_1"].ConnectionString;
} 
```

# hibernate - 不属于 JPA 的 Hibernate 功能

> ID：12480602
> 
> 赞同：1
> 
> 时间：2012-09-18T15:53:34.267
> 
> 标签：hibernate, jpa, jpa-2.0

您能指出一些不属于 JPA 规范的 Hibernate 特性吗？我已经搜索了一段时间，找不到与此主题相关的任何内容。

具体的例子会很有帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-20T15:42:17.470

用于休眠特定注释的 javadocs 可能是一个不错的起点。 [http://docs.jboss.org/hibernate/orm/4.1/javadocs/org/hibernate/annotations/package-summary.html](http://docs.jboss.org/hibernate/orm/4.1/javadocs/org/hibernate/annotations/package-summary.html)

# java - 将工件从詹金斯复制到另一个具有新名称的服务器

> ID：12480603
> 
> 赞同：4
> 
> 时间：2012-09-18T15:53:34.573
> 
> 标签：java, copy, continuous-integration, jenkins, artifact

我有一些自动构建 Java 应用程序的工作。我希望它自动将其推送到其他服务器。我找到了一个通过 ssh 复制工件的插件，但使用它我最终在远程服务器上得到了 app-1.0-SNAPHSHOT.jar、app-1.1-SNAPHSHOT.jar 等等。

我想把它作为 app.jar 代替，每次都覆盖旧的。是否有这样做的“智能”方式，或者我应该只制作一个寻找最新的shell脚本并覆盖它？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-18T22:30:07.407

如果您使用的是 Maven 项目，我建议您使用[Mojo 的 Ship Maven 插件](http://www.mojohaus.org/ship-maven-plugin/)来通过您的构建脚本进行传输。

如果您想通过 Jenkins 插件执行此操作，则有以下插件选项：

*   [通过 SSH 发布](https://wiki.jenkins-ci.org/display/JENKINS/Publish+Over+SSH+Plugin)
*   [发布到 FTP 服务器](https://wiki.jenkins-ci.org/display/JENKINS/Publish+Over+FTP+Plugin)
*   [发布到 Windows 文件共享](https://wiki.jenkins-ci.org/display/JENKINS/Publish+Over+CIFS+Plugin)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-18T17:07:32.177

我只是在我的构建脚本中做对了。为什么所有额外的管理？在蚂蚁中，

```
<copy todir="${remote}"> 
    <globmapper from="*" to="app.jar"/>
    ...
</copy> 
```

工作得很好。

# jquery - jQuery 验证插件 - 检查字段是否有效（但不显示验证消息）

> ID：12480610
> 
> 赞同：10
> 
> 时间：2012-09-18T15:53:45.617
> 
> 标签：jquery, jquery-validate

我正在使用 jQuery 验证插件，并定义了一个表单验证函数，如下所示。基于一些用户操作，我正在运行一个自定义 JS 函数，在该函数中我只想检查电子邮件和电话字段是否有效。**但**我不想验证它们，即我不想显示验证错误，我只需要检查它们的值是否有效。

就像是

```
$('#email').isvalid(); 
```

我已经检查了 Validator 的[元素](http://docs.jquery.com/Plugins/Validation/Validator/element#element)方法，但它验证了元素，而不仅仅是检查它的值是否有效。所以换句话说，我正在寻找一种以编程方式运行规则的方法。任何帮助表示赞赏！

下面的表单验证器功能：

```
var validator = $("#olForm").validate({
    rules: {
        "email": {
             required: true,
             email: true
        },
        "phone": {
             required: true,
             digits: true,
             minlength: 9,
             maxlength: 11
        }
    }
}); 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-09-21T04:41:22.937

回应原jsfiddle，请看这个版本：

[http://jsfiddle.net/33PGQ/23/](http://jsfiddle.net/33PGQ/23/)

这可以通过三种方式进行修改：首先，在底部，一个简单的布尔值设置为等于两个字段是否有效（然后发出警报）。由于每个 valid() 调用都返回一个布尔值，您可以简单轻松地检查所有表单元素的有效性。

其次，使用没有内部代码的自定义 showErrors 函数扩展了 validate 选项。此函数会覆盖验证错误的默认行为，这样虽然可以检查字段的内部有效性并处理字段的有效性，但不会显示实际的错误文本，从而启用所有验证规则但消除显示验证结果。

最后，虽然在最初的问题中没有明确要求，但我添加了可选的“onsubmit:false”设置，它会覆盖 validate 调用的默认行为，即阻止表单提交，除非所有验证规则都已成功检查。如果您想阻止提交（我假设您会这样做），可以将其删除，但我认为这是一个需要注意的有用功能。我将它包括在这里，以防您遇到特殊情况，即使表单验证失败，您也希望提交表单。

绝对值得查看用于验证的选项列表；您可以通过多种方式调整验证器的行为以完全适合您的需求。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2015-11-03T09:31:25.843

有一个未记录的方法**check()**专门执行此操作而没有实际设置字段样式或显示任何错误：

```
var validator = $('form').validate();
if( validator.check('#email') ){
  // this field is valid but no styling was applied
} 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2015-09-25T13:14:24.283

有一个[方便的方法称为`.checkForm()`](https://github.com/jzaefferer/jquery-validation/blob/60387834b88e34bc2590593852361b94a119018c/src/core.js#L399-L405)（截至 2015 年 9 月未记录），这使得这非常容易。与 call 不同`.valid()`，它在被调用时不会显示表单错误：

```
// Returns a boolean
$('form').validate().checkForm(); 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-09-18T15:56:07.523

听起来您正在寻找 .valid() 方法。请注意，您仍然必须对整个表单运行 validate() 才能初始化小部件。

[http://docs.jquery.com/Plugins/Validation/valid](http://docs.jquery.com/Plugins/Validation/valid)

# php - php拆分包含成对值的字符串的最佳方法

> ID：12480611
> 
> 赞同：-1
> 
> 时间：2012-09-18T15:53:45.907
> 
> 标签：php, string, split, explode

我有一个以下格式的字符串：

```
$str='a1_b1,a2_b2,a3_b3' 
```

其中 a 和 b - 一些正数。我需要拆分它以获得两个格式的字符串：

```
'a1,a2,a3' and 'b1,b2,b3' 
```

非常原始的方法是：

```
$temp=explode(',', $str);
$str1='';
$str2='';
for($i=0;$i<count($temp);$i++){
   $temp2=explode('_',$temp[$i]);
   $str1.=$temp2[0].',';
   $str2.=$temp2[1].',';        
} 
```

是否有可能让它更智能然后在循环中爆炸？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-18T16:29:26.183

与接受的答案没有太大区别，但使用更少的代码

```
<?php 
$str = 'a1_b1,a2_b2,a3_b3';
$temp=explode(',', $str);
foreach($temp as $tem)
    list($str_a[], $str_b[])=explode('_',$tem);

$str1 = implode(',', $str_a); 
$str2 = implode(',', $str_b); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-18T17:32:58.260

可能最简单的方法（也恰好使用最少的代码并且没有循环）是使用 PHP 的[`parse_str()`](http://us3.php.net/manual/en/function.parse-str.php)函数：

```
// Assuming $str = 'a1_b1,a2_b2,a3_b3'
$str = str_replace([',', '_'], ['&', '='], $str);
parse_str($str, $arr);
// Your key/value pairs are now in $arr
$keys = implode(',', array_keys($arr));
$values = implode(',', array_values($arr)); 
```

当然，`parse_str()`需要标准`foo=bar&baz=boz`格式，因此如果可能，您应该使用该格式而不是为`foo_bar,baz_boz`自己节省一步。但是，如果这不可能，那么您可以`str_replace()`像我上面所做的那样简单地使用来进行适当的替换。

**注意：**我使用了 PHP 5.4 短数组语法`[...]`。如果您使用的是 < PHP 5.4，请将其更改为`array(...)`。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-18T16:01:41.607

最好的方法是组织字符串的格式，这样它就不会进入您需要执行此操作的阶段。但我假设你不能这样做，因此在这里发布这个问题，

除非您想使用正则表达式，否则您所做的是一个很好的方法。

```
$str = 'a1_b1,a2_b2,a3_b3' ;
$exp = explode(',', $str);

$a = array();
$b = array();

foreach($exp as $i)
{
    $sep = explode('_', $i);
    $a[] = $sep[0];
    $b[] = $sep[1];
}

// at this point a and b are arrays so if you want to do better things to the data
// you can use arrays instead of manually concatenating the items with commas

$a_str = implode(',', $a); // a1,a2,a2
$b_str = implode(',', $b); // b1,b2,b2 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-18T16:02:09.693

```
$temp=explode(',', $str);
$str1='';
$str2='';
$str_a = array();
$str_b = array();
for($i=0;$i<count($temp);$i++){
   $temp2=explode('_',$temp[$i]);
   $str_a[]=$temp2[0];
   $str_b[]=$temp2[1];        
}
$str1 = implode(',', $str_a);
$str2 = implode(',', $str_b); 
```

哦，这没有什么比这更聪明了……

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-18T16:09:36.470

我真的想不出更好的方法来做到这一点。最好的办法是不要陷入一开始就需要这样做的情况，但我们能做些什么呢？

只是为了提供另一种（不是更好）做同样事情的方式，您可以使用[`strtok`](http://www.php.net/manual/en/function.strtok.php).

```
$str='a1_b1,a2_b2,a3_b3';

$tok = strtok($str, "_,");

$i = 0;
$a = array();
$b = array();
while ($tok !== false) {
    if ($i++ %2) $b[] = $tok;
    else $a[] = $tok;
    $tok = strtok("_,");
}

echo implode(',', $a); //a1,a2,a3
echo implode(',', $b); //b1,b2,b3 
```

你的方式更清晰，更容易理解，所以我会坚持下去。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-09-18T16:22:28.067

假设 PHP >= 5.3.0：

```
$str = 'a1_b1,a2_b2,a3_b3';

$array = array_map(function($n) {  return explode("_", $n); }, explode(",", $str));
$aString = implode(",", array_map(function($n) { return $n[0]; }, $array));
$bString = implode(",", array_map(function($n) { return $n[1]; }, $array));

var_dump($aString);
var_dump($bString); 
```

输出：

```
string 'a1,a2,a3' (length=8)
string 'b1,b2,b3' (length=8) 
```

严格来说仍然循环，但更漂亮:)

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-09-18T17:28:07.937

```
 $str = 'a1_b1,a2_b2,a3_b3' ;
 $arr = preg_split("/[\s,_]/" , $str);  
 $str1 = $str2 = '';
 for($i=0; $i<count($arr); $i++) {       
  $str1 .= $arr[$i] ;

  if(isset($arr[$i+1])) 
    $str2 .= $arr[$i+1];

  if(isset($arr[$i+2])) {
    $str1 .= ','; 
    $str2 .= ',';
  }

   $i++;
 } 
```

# java - 从主方法中的类访问包含变量的非静态方法？

> ID：12480612
> 
> 赞同：2
> 
> 时间：2012-09-18T15:53:47.483
> 
> 标签：java, variables, methods, static

我正在学习 java 并试图创建一个简单的程序来帮助我找到一种方法（如果有的话）来访问同一类的 main 方法中的非静态方法。这是我到目前为止所拥有的

```
import java.util.Scanner;

public class MethodVariables

{

    public int num1;
    public int num2;
    public int add = (num1 + num2);
    public int sub = (num1 - num2);

    public static void main(String[] args)
    {
        Scanner input = new Scanner (System.in);

        System.out.println("Please enter the first number: ");
        String num1 = input.nextLine();
        System.out.println("Please enter the second number: ");
        String num2 = input.nextLine();
        input.close();

        // I know these wouldn't work this way but this is just to show what I am trying to accomplish
        addition(add);    
        subtraction(sub);
    }

    public void addition(int add)
    {
        System.out.println("The sum of the two is: " +add);
    }

    public void subtraction(int sub)
    {
        System.out.println("The diference of the two is: "+sub);
    }
} 
```

如果有人知道我忽略了什么，我将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-18T15:55:08.990

当然，只需在以下位置创建类的实例`main`：

```
MethodVariables instance = new MethodVariables();

instance.addition(num1);
instance.subtraction(num2); 
```

因为`addition`和`subtraction`是*实例方法*，所以你总是需要一个类的实例来调用它们。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-18T16:06:27.383

这与原始问题无关，但值得指出：

```
public int add = (num1 + num2); 
```

这不会像您期望的那样工作。如果你想要一个添加两个数字的函数，只需创建一个添加两个数字的函数。

```
public int add(int num1, int num2) {
    return num1 + num2;
}

public int subtract(int num1, int num2) {
    return num1 - num2;
} 
```

# firefox - GWT FormPanel 方法被输入参数替换

> ID：12480614
> 
> 赞同：0
> 
> 时间：2012-09-18T15:53:58.677
> 
> 标签：firefox, gwt, post

我们在我正在维护的 GWT 应用程序中发现了一个奇怪的新错误，我不确定它何时成为问题。可能使用新的 Firefox 版本。

我们使用 FormPanel 向服务器发送 POST 请求，基本上就像我在网上看到的许多示例一样。但是由于我们实际上想要一个 PUT 请求，因此隐藏的输入参数之一被命名为“method”，并且具有“put”的值。

现在，当我在 Fiddler 中查看来自 Firefox 的请求时，它正在被转换为带有 QueryString 中所有参数的 GET 请求。在 IE 和 Chrome 中，参数位于 POST 请求的正文中。

我在警报中显示了 FormPanel.getMethod() 的值，在 IE 和 Chrome 中显示字符串“post”，而在 firefox 中显示“object HTMLInputElement”。不幸的是，托管模式调试不适用于此项目。

显然，FormPanel 的 getMethod() 函数返回的是名为 method 的隐藏输入参数，而不是 Firefox 中实际表单的方法。

从技术上讲，我应该避免更改 servlet，因为它来自我们使用的 OpenSource 项目，尽管我发现我可以通过在两端将隐藏输入参数的名称更改为“_method”来解决这个问题。

有没有人见过这样的事情？我在 Google 中找不到任何内容。

更新：我们使用 GWT 2.3 以防万一

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-19T00:01:24.823

可以在此处找到一些见解[大多数 Web 浏览器中是否提供 PUT、DELETE、HEAD 等方法？](https://stackoverflow.com/questions/165779/) 我还建议使用 XMLHttpRequest。在这种情况下，您 [很可能] 不必在服务器端进行任何更改。

如果您使用提交按钮，您可以在其 clickHandler 函数中编写：

```
submitMyForm(yourTextBox.getText(), self); 
// self - is the instance of main class (named UploadForm here), needs to be passed here for future reference 
```

然后是更多（您可以根据需要进行调整）：

```
private native void submitMyForm(String text, UploadForm handler)/*-{
   var fd = new FormData();
   fd.append("textValue", text);

   var xhr = new XMLHttpRequest();
   var upload = xhr.upload;

   readyStateChangeHandler = function () {
      if (xhr.readyState == 4) {
         if (xhr.status == 200) {
           var serverResponse = eval(xhr.responseText); // optional               
           handler.@com.project.UploadForm::onUploadIsDone(Lcom/google/gwt/core/client/JavaScriptObject;)(serverResponse);
         } else {
           handler.@com.project.UploadForm::onUploadFailed(I)(status);
         }
      }
   };

   xhr.onreadystatechange = readyStateChangeHandler;
   xhr.open("PUT", yourActionUrlHere);
   xhr.send(formData);
}-*/; 
```

# c# - 关闭时保存小数据的最佳方法

> ID：12480615
> 
> 赞同：0
> 
> 时间：2012-09-18T15:53:59.600
> 
> 标签：c#

每分钟我都想保存一些数据以防关闭。数据非常小（字）。

**笔记：**

1.  **我保存的文件是同时写入的，而且很多。每个线程都会写一些东西，然后不会停止改变它。每个新线程都会添加更多文本并更改其文本。**
2.  我写给它的大部分内容都是像地址这样的小字。
3.  我需要一种以最佳方式从文件中提取信息的好方法。DB 会很好，但一些程序员说它只用于非常大的信息。
4.  我不在乎文件的大小。
5.  我不在乎我将拥有多少文件。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-18T16:06:13.657

您可以使用文本文件，您必须确保文件在程序关闭时关闭。如果您打算继续添加到文件中，那么您必须想办法在文件增长时将文件滚动到另一个文件中，这并非易事。或者你可以只使用像 Sqlite 这样的小型数据库，你不会有任何麻烦。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-18T17:08:01.290

尝试创建一个`DataTable()`并存储/绑定到它。然后每X时间你可以做一个：

```
DataTable t = new DataTable();
t.WriteXml(YourFileName, XmlWriteMode.WriteSchema); 
```

恢复使用：

```
DataTable t = new DataTable();
t.ReadXml(YourFileName); 
```

# java - 在 Window 的服务器上运行的 Java 应用程序能否通过 Windows 身份验证连接到 SQL Server

> ID：12480619
> 
> 赞同：4
> 
> 时间：2012-09-18T15:54:09.090
> 
> 标签：java, sql-server, windows, jdbc, windows-authentication

在我问问题之前，让我先介绍一下背景。我在一家主要运行 Windows 的商店。我们有几个在 Windows Server 上运行的批处理应用程序（主要是 2003）。这些批处理应用程序大部分是用 C# 和 C++ 编写的；但是，我们有一些用 Java 编写的应用程序。

批处理 Java 应用程序使用 JDBC 连接到 SQL Server 2005 数据库。请注意，我们没有使用应用程序服务器。

目前，我们将数据库连接信息（数据库、用户名和密码）存储在 Windows 注册表中。

不幸的是，这些非常不友好的审计员（幽默的尝试很糟糕）对我们在 Windows 注册表中存储数据库连接信息的决定并不满意。我们现在正在更新我们的批处理应用程序以使用 Windows 身份验证连接到 SQL Server。

对 C# 和 C++ 应用程序使用 Windows 身份验证不是问题；但是，我坚持采用 Java 应用程序的方向。

谁能建议是否可以使用 Windows 身份验证从 Windows 服务器上运行的 Java 批处理应用程序连接到 SQL Server 2005 数据库？同样，我们没有使用应用程序服务器。

如果这是可能的，您推荐的方法是什么？

我有一个简单地加密密码的策略，这将使审计员感到高兴，但是我希望我的所有批处理应用程序都通过 Windows 身份验证连接到 SQL Server。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-20T19:22:03.327

您可以使用 Windows 身份验证从 Java 程序连接到 SQL Server，如下所示：

1.  为将用于运行程序的应用程序创建一个 Windows 帐户。此帐户的凭据将用于连接到服务器。
2.  [从这里](http://www.microsoft.com/en-us/download/details.aspx?displaylang=en&id=11774)获取 Microsoft JDBC Driver for SQL Server 。
3.  如下配置 JDBC URL：

    ```
    jdbc:sqlserver://<hostname>;databaseName=<DBName>;integratedSecurity=true 
    ```

4.  配置从命令行运行 Java 程序的启动器以包含以下 JVM 参数：

    ```
    -Djava.library.path="<jdbc driver dll location>" 
    ```

    其中 location 是之前下载的 JDBC 驱动安装或解压的目录。就`C:\Program Files\sqljdbc_4.0.2206.100_enu\sqljdbc_4.0\enu\auth\x64`我而言。正如 Luke Woodward 在评论中提到的，应根据用于运行这些程序的 JVM 选择 dll。

通过上述配置，与 SQL Server 建立的连接将使用运行 java 程序/进程的域用户的 Windows 身份验证凭据。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-22T08:12:52.373

第一步是设置 ODBC，你可以去控制面板 -> 管理工具 -> ODBC。添加一个新的 DSN 以按照向导设置使用 Windows 身份验证帐户连接 MS SQL Server。第二步与使用 SQL Server 身份验证帐户相同。但唯一的变化是连接字符串改为：jdbc:odbc:dsn-name。不再需要使用用户名/密码，因为它已经连接到服务器。

# objective-c - 如何在下载后而不是在重新加载单元格后立即显示 tableview 图像

> ID：12480626
> 
> 赞同：1
> 
> 时间：2012-09-18T15:54:26.490
> 
> 标签：objective-c, ios

我有一个显示用户列表的表格视图。每个单元格中的头像图像使用 UIImageView+AFNetworking 异步下载并使用 UIImage+TPAdditions 显示。这是我的代码片段，来自 cellForRowAtIndexPath：

```
if (cell==nil){
    cell = [[UITableViewCell alloc] initWithStyle:UITableViewCellStyleSubtitle reuseIdentifier:SimpleTableIdentifier];
}

cell.textLabel.text = [[global.people objectAtIndex:indexPath.row]name];

// setImageWithUrl:placeholderImage: is taken from UIImageView+AFNetworking

NSString* imgURL =  [[global.people objectAtIndex:indexPath.row]avatar_url];
UIImageView* imgV = [[UIImageView alloc]init];
[imgV setImageWithURL:[NSURL URLWithString:imgURL] placeholderImage:[UIImage imageNamed:@"icon.png"]];

//These are just for formatting and are taken from UIImage+TPAdditions

cell.imageView.image = [imgV.image imageScaledToSize:CGSizeMake(43,43)];
cell.imageView.layer.masksToBounds = YES;
cell.imageView.layer.cornerRadius = 5.0; 
```

现在，当应用程序加载时，我们只会看到占位符图像，直到用户上下滚动 tableview。然后将来自 URL 的头像图像加载到每个单元格的图像视图中。我想这样做，这样就不需要滚动了——我希望头像图像在下载后立即“弹出”到它们各自单元格的表格视图中。我知道 NSNotification 可能对我有帮助，但我不确定在哪里/如何使用它。我对iOS相当陌生。任何人都可以引导我完成它吗？谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-18T17:19:31.360

您需要在视图上调用[setNeedsDisplay](http://developer.apple.com/library/ios/documentation/uikit/reference/uiview_class/uiview/uiview.html#//apple_ref/occ/instm/UIView/setNeedsDisplay)以强制刷新。您将在异步调用的完成处理程序中调用它。

# jquery - Jquery来自Json Data的几个选择元素检测变化

> ID：12480631
> 
> 赞同：0
> 
> 时间：2012-09-18T15:54:31.467
> 
> 标签：jquery, html, javascript-events

我有一个 ajax 查询，它提取一些 json 数据并使用 .append() 为每个用户生成一行，其中包含几个选择元素，这很好用。它生成的选择之一的示例如下：

```
 <select name="mailBox" id="mailBox1" class="mailbox">
      <option value="25">25 GB</option>
      <option value="50" selected="selected">50 GB</option>
      <option value="75">75 GB</option>
      <option value="100">100 GB</option>
      <option value="0">No Mail Box</option>
    </select> 
```

我想做的是当用户更改所选值时我想做一个ajax发布来更新数据库，但是我无法检测到更改请求

我试过这个：

```
$(function() {
    $('select').change(function(){
        // I have just stuck an alert in to show me if it has detected the change
    alert('hello');
    });
}); 
```

我也尝试过使用 $('.mailbox') 并直接引用 ID $('#mailBox1') 并且无法检测到任何更改。如果选择框是静态 html，代码可以正常工作

编辑*完整的 Jquery 代码：

```
 $(function() {
          var csrf = $('[name="csrf_test_name"]').val();
           $.ajax({                                      
                  url: '/index.php/ajax/getCompanyUsers', data: {csrf_test_name: csrf}, dataType: 'json',  success: function(data)        
                  {
                    for (var i in data)
                    {

                        var email = data[i].email;
                        var files = data[i].file;

                        var emailForm = '<select name="mailBox" id="mailBox' + paramID + '" class="mailbox"><option value="25">25 GB</option><option value="50">50 GB</option><option value="75">75 GB</option><option value="100">100 GB</option><option value="0">No Mail Box</option></select>  ';
                        var filesForm = '<select name="fileStorage" id="fileStorage' + paramID + '" class="filestorage"><option value="25">25 GB</option><option value="50">50 GB</option><option value="75">75 GB</option><option value="100">100 GB</option><option value="0">No File Storage</option></select>';

                      $('#wrapper').append('<div class="company-users-email">' + emailForm + '</div>' + '<div class="company-users-filestorage">' + filesForm + '</div>');

                     $("#mailBox" + paramID + " option[value='" + email + "']").attr("selected","selected");
                     $("#fileStorage" + paramID + " option[value='" + files + "']").attr("selected","selected");

                    } 
                  } 
                });

              $('.mailbox').bind("change", function(e){ alert("hello") });      
    }); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-18T15:56:30.663

这有效：

```
$(function() {
    $('#mailBox1').bind("change", function(e){ alert("hello") });
}); 
```

[http://jsfiddle.net/ej8Aa/](http://jsfiddle.net/ej8Aa/)

# django - 使用 Django 的复杂表单

> ID：12480634
> 
> 赞同：1
> 
> 时间：2012-09-18T15:54:47.683
> 
> 标签：django, django-forms

考虑以下调查问题：

> ### 你喜欢这个问题吗？（选一个）
> 
> *   是的
> *   没有为什么
>     *   我不喜欢它的格式
>     *   我不喜欢措辞
>     *   其他原因：......
> *   其他回复（请注明）............

我试图代表一系列问题，其中一些是这样的。有些更简单（只是一个选择列表）。但是我在尝试用 Django 和它自己的表单处理方式来解决这个问题时遇到了一些问题。我们有以下问题：

*   我们需要服务器端验证。只能指定一个选项。在上面的“其他”选择的情况下，那些需要后续字符域。

*   我们需要在选项中添加一个字符域！我相当确定我可以通过模板破解这些内容，但请记住这一点。

*   只是为了使事情复杂化，问题及其答案需要是可编辑的。我已经使用 YAML 完成了这项工作，并且可以生成表单，效果很好。

那么破解 Django 表单系统以允许我这样做的最佳方法是什么？我应该完全打扰`django.forms`还是只写一些以自己的方式完成所有事情的东西？你会*怎么*做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-18T18:26:50.773

如果你想避免处理表单，我建议使用 jquery 的 $.ajax() 方法。基本上，您只需要创建一个空白表单模型来捕获 POST，然后您就可以获取数据并按照您的意愿使用它。这是一个例子：

```
#models.py
class BlankForm(forms.Form):    

    def __unicode__(self):
        return "BlankForm"

#views.py
def my_view(request):

    if request.method == 'POST':
        if 'answer' in request.POST:
            form = BlankForm(request.POST)

            if form.is_valid():
                foo = request.POST.__getitem__('add')
                bar = request.POST.__getitem__('bar')
                baz = request.POST.__getitem__('baz')
                #Do stuff with your data:
                return HttpResponse('ok') 
```

然后在您的网页中，您可以使用以下内容：

```
<script type="text/javascript">

        function getCookie(name) {
            var cookieValue = null;
            if (document.cookie && document.cookie != '') {
                var cookies = document.cookie.split(';');
                for (var i = 0; i < cookies.length; i++) {
                    var cookie = jQuery.trim(cookies[i]);
                    // Does this cookie string begin with the name we want?
                    if (cookie.substring(0, name.length + 1) == (name + '=')) {
                        cookieValue = decodeURIComponent(cookie.substring(name.length + 1));
                        break;
                    }
                }
            }
            return cookieValue;
        }

        function csrfSafeMethod(method) {
            // these HTTP methods do not require CSRF protection
            return (/^(GET|HEAD|OPTIONS|TRACE)$/.test(method));
        }

        var csrftoken = getCookie('csrftoken');

        $.ajaxSetup({
            crossDomain: false, // obviates need for sameOrigin test
                beforeSend: function(xhr, settings) {
                    if (!csrfSafeMethod(settings.type)) {
                    xhr.setRequestHeader("X-CSRFToken", csrftoken);
                }
            }
        });

        $.ajax({
            type: 'POST',
            data: {
                'answer': true,
                'foo': foo,
                'bar': bar,
                'baz': baz
            },
            dataType: 'application/json'
        });
    }

</script> 
```

所有关于 cookie 和 CSRF 令牌的东西都与 django 的 CSRF 保护系统有关。基本上，您需要担心的只是编辑 $.ajax() 方法中的 Data 字段

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-18T16:00:29.283

各种选项将是`ForeignKey`另一个包含响应的表。您必须在该 FK 中有多个字段来保存主要答案和子答案，并且您必须适当地重新组合（或重新排序，如果您需要明确的顺序）。您还需要 a`CharField`以保持“其他”响应。将这两个字段封装在自定义字段中并使用自定义小部件在表单中显示控件可能是最简单的。

# javascript - 无法使用 jquery 在 dom 上添加属性准备就绪

> ID：12480636
> 
> 赞同：0
> 
> 时间：2012-09-18T15:54:54.363
> 
> 标签：javascript, jquery, jquery-1.4

我[在 jsfiddle 上有代码](http://jsfiddle.net/3mZVc/)。

我们使用的 jquery 1.4.4 目前还无法更新到较新的版本，我可以在其中让我的代码正常工作。

所以我需要在 domready 或 pageload 上，将 attr 添加到众多`<a`标签中。有人可以帮我找出一种方法，可以使用 javascript 和/或所需版本的 jquery。

谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-18T15:59:33.133

您可以使用***[.attr(index, callback)](http://api.jquery.com/attr/#attr2)***过程轻松完成，如下所示：

```
$('a').attr('href', function(index, oldAttr) {
    if (oldAttr.indexOf('test') >= 0) {
        $(this)
            .removeAttr('onclick')
            .get(0)
            .setAttribute("onclick", "test");
    }
});​ 
```

***[演示](http://jsfiddle.net/3mZVc/7/)***

但是，如果您想使用，请`.each()`尝试如下：

```
$('a').each(function(index, element) {
    var el = $(element),
        hasHref = !el.attr('href'); // return true, if no href
    if( !hasHref ) {
        var href = el.attr('href'); 
        if( href.match('test').length || href.match('test-page').length ) {
         el
           .removeAttr("onclick")
           .get(0)
           .setAttribute("onclick", "test");
        }
    }
});​ 
```

***[演示](http://jsfiddle.net/3mZVc/8/)***

# java - 将 POJO 数组绑定为请求参数

> ID：12480642
> 
> 赞同：2
> 
> 时间：2012-09-18T15:55:15.587
> 
> 标签：java, spring-mvc

我尝试在表单中发送请求：

```
list=Apple1&list=Apple2&list=Apple3 
```

而 Apple 是一个以 JSON 序列化的复杂对象：

```
 {"param1":"value1", "param2":"value2"} 
```

我在 Spring 中定义了一个 Dispatcher Servlet 来接收此类请求，其方法如下：

```
request(@RequestParam("list") POJO[] pojos){
//handle request
} 
```

将单个 POJO 发送到这样的方法是没有问题的

```
request(@RequestParam("single") POJO pojos){
//handle request
} 
```

但是一旦我尝试传输一个数组，Spring就会因异常而死，例如：

```
java.lang.NoSuchMethodException: [Lmy.package.Apple;.<init>() 
```

如何教调度程序 servlet 正确反序列化数组？谢谢你的帮助

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-24T13:07:58.963

当我将 @RequestParam 注释添加到我的调度程序 servlet 实现的接口时，我遇到了这个错误，而不是调度程序 servlet 本身。在这种情况下，Spring 将忽略注释并尝试直接实例化苹果数组，这将导致您提供的错误消息：`java.lang.NoSuchMethodException: [Lmy.package.Apple;.<init>()`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-18T18:50:20.640

您得到的异常意味着您的应用程序希望`Apple`有无参数构造函数并且无法找到它（在[Oracle 的故障排除页面](http://docs.oracle.com/javase/tutorial/reflect/member/ctorTrouble.html)之后）：

> 由于请求了零参数构造函数并尝试传递参数，因此引发 IllegalArgumentException。如果向构造函数传递了错误类型的参数，则会引发相同的异常。
> 
> ```
> $ java ConstructorTroubleAgain int
> java.lang.NoSuchMethodException: ConstructorTroubleAgain.<init>(int)
>         at java.lang.Class.getConstructor0(Class.java:2706)
>         at java.lang.Class.getConstructor(Class.java:1657)
>         at ConstructorTroubleAgain.main(ConstructorTroubleAgain.java:26) 
> ```

这可能意味着......任何东西。Jackson 从 JSON 字符串反序列化到 Apple 的效果好吗？您的 Apple 对象是如何创建的？是否`Apple1`正确转义字符串？你也可以试试

```
list[]=Apple1&list[]=Apple2&list[]=Apple3 
```

和

```
request(@RequestParam("list[]") Apple[] apples) 
```

因为上次我发现如果没有`[]`部分，Spring 不能很好地处理数组。

# c++ - 如何传递没有指针的结构数组？C++

> ID：12480644
> 
> 赞同：-4
> 
> 时间：2012-09-18T15:55:14.627
> 
> 标签：c++, arrays, function, structure

您好，我对如何在不使用指针的情况下正确地通过具有结构的函数传递数组感到非常困惑。我们只应该使用不包含指针的第 1-8 章。如果有人有任何建议或链接可以帮助您，这是我的代码，谢谢！

```
const int MAX_DATA = 10000;

struct Inventory
{
   double sku;
   double count;
   double cost;
   string title;
};

void addMovie(Inventory data[], double count);
void allInfo(Inventory data[], double count);

int main ()
{
   Inventory data[MAX_DATA];
   int choice;
   int i = 0;
   double count = 0;
   return 0;
}

void addMovie(Inventory data[], double count)
{
int i = 0;

cout << "Please enter the name of the movie you wish to add " << endl;

cin >> data[i].title;
cin.ignore();
cout << "Please enter the SKU " << endl;
cin >> data[i].sku;
cout << "You have successfully added " << data[i].title << " : " << data[i].sku <<    endl;
i++;
count++;

}

void allInfo(Inventory all[], double count)
{
    for (int i = 0; i < count; i++)
    {
       cout << "Title: " << all[i].title << endl;
       cout << "SKU: " << all[i].sku << endl;
       i++;
    }
} 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-09-18T16:14:43.993

对于固定大小的数组，这样的事情应该可以工作，通过引用传递数组：

```
template <unsigned long N>
void addMovie(Inventory (&data)[N], unsigned long& count)
{
  std::cout << "addMovie has an array of size " << N << "\n";
}

...

Inventory data[MAX_DATA];
unsigned long counter = 0;
addMovie(data, counter); 
```

请注意，这使您必须确保不要超出数组的范围。

使用 a 会更容易`std::vector<Inventory>`，在这种情况下，您不必担心维度或通过引用语法奇怪的 passign 数组：

```
void addMovie(std::vector<Inventory>& data)
{
  std::cout << "addMovie has an array of size " << data.size() << "\n";
  Inventory invent = ....;
  data.push_back(invent)
}

....
std::vector<Inventory> data;
addMovie(data); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-09-18T18:09:35.740

如果将其包装在值类型中，则可以直接传递或引用。这是在标准类中为您整齐打包的`std::array`，但如果您愿意，您可以编写自己的结构或类。

除了通过引用、指针或值之外，在 C++ 中无法传递任何内容。因此，由于禁止使用指针，因此值或引用*必须*是正确答案。这意味着无论是胡安的答案还是我的答案都必须是正确的。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-09-18T18:37:32.267

你问，

> 如何在不使用指针的情况下通过具有结构的函数正确传递数组。

我认为那里的关键词短语*带有`struct`*.

您可以按如下方式执行此操作，通过*引用*传递而不是传递指针：

```
#include <assert.h>         // assert
#include <iostream>         // std::wcout, std::endl
#include <stddef.h>         // ptrdiff_t
#include <stdlib.h>         // abort
#include <string>           // std::string
#include <utility>          // std::begin, std::end
using namespace std;

typedef ptrdiff_t Size;

template< class Collection >
Size nElements( Collection& c ) { return end( c ) - begin( c ); }

wostream& operator<<( wostream& stream, string const& s )
{
    return (stream << s.c_str());
}

void error( string const& message )
{
    wcerr << "!" << message << endl;
    abort();
}

struct Person
{
    string      name;
    int         birthYear;
};

struct Persons
{
    int         count;
    Person      data[10000];
};

void addTo( Persons& persons, string const& name, int const birthYear )
{
    if( persons.count == nElements( persons.data ) )
    {
        error( "Max capacity exceeded." );
    }

    Person& person = persons.data[persons.count];

    person.name = name;
    person.birthYear = birthYear;

    ++persons.count;
}

int main()
{
    Persons     persons = {};       // All zeroed out.

    addTo( persons, "Maria", 1990 );
    addTo( persons, "Eliza", 1965 );

    assert( persons.count == 2 );

    for( int i = 0;  i < persons.count;  ++i )
    {
        wcout
            << i << ": " << persons.data[i].name
            << " born " << persons.data[i].birthYear
            << endl;
    }
} 
```

请注意，此代码仅说明了如何执行您显然要求的操作，即学习练习。

对于实际代码，使用例如 a`std::vector`而不是固定大小的数组。

* * *

## 回答 #4

> 赞同：-3
> 
> 时间：2012-09-18T16:10:02.513

`void addMovie(Inventory data[], double count)`应该没事。

`[]`指变相的`data`指针。 `data`可以取消引用`*data`以获取数组中的第一个值，就像通过索引获取它一样`data[0]`。

`Inventory data[]`和之间的唯一区别`Inventory* data`是您告诉代码的读者您的意思是分配对象的连续数组（顺便说一句，它的大小可以是 0、1 或内存限制内的任何其他整数）。

编译器和运行时不会区分两者。调用数组方法 as`addMovie(0x0, 0)`将与指针版本一样工作。

此外，由于您尝试`count`在方法中更新，您可能希望通过引用来获取它，`double &count`并且如果计数是整个项目而不是部分值，您可能还希望使用整数`int& count.`

# javascript - jQuery 在 JavaScript 执行更改时捕获下拉列表的更改事件

> ID：12480649
> 
> 赞同：1
> 
> 时间：2012-09-18T15:55:31.803
> 
> 标签：javascript, jquery, html-select, jquery-1.7

我希望能够使用 jQuery 检测下拉列表的选定值何时发生变化。下拉列表的选定值被其他 JavaScript 更改，因此我希望能够捕获此事件。

我可以看到下拉列表发生变化，但是以下代码未正确捕获事件。事件是否`change`仅在**用户**执行而不是其他代码时捕获事件？

```
$('select[name=b_country]').live('change', function() {
    alert('the country dropdown has changed');
});

<select name="b_country" style="display: block;"> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-18T16:01:16.980

是的，只有用户交互触发事件。否则，如果不进入无限循环，您将无法（重新）设置侦听器中的值。

如果您想通知其他（侦听）脚本您更改了值，您可以手动触发事件。使用 jQuery，这很容易：

```
$('select[name=b_country]').val(…).change(); 
```

# javascript - stuts2 动作和 jquery ajax

> ID：12480651
> 
> 赞同：0
> 
> 时间：2012-09-18T15:55:37.047
> 
> 标签：javascript, jquery, ajax, struts2

> **可能重复：**
> [如何在 struts2 中使用 $.ajax() 方法](https://stackoverflow.com/questions/12474993/how-use-ajax-method-in-struts2)

简单地，

**1** . sombody 可以告诉我如何通过 jquery ajax 调用 struts 动作吗？（不是 struts jquery 插件）

**2** .以及如何获得结果以及如何将html输出（结果）正确发送到目标div？

**3** .我们应该改变struts配置中的结果类型吗？

**4** .ajax 内容加载后如何运行javascript？

**5** .以及我应该知道的关于 jquery ajax 和 javascript 运行的 struts 操作的任何其他事情。

请有人可以为此或干净的答案分享最佳参考。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-18T16:40:43.133

虽然你可以很容易地在网上找到这些信息的零碎。让我们把它放在同一页上。

Ans 1::Include the js file of JQuery and Write your ajax call。

```
$(document).ready(function() {
$.ajax({
    type: "POST",   //Default is GET
    cache : false, 
    data: sendingData,           //Data you need to send if in JSON format
    dataType: 'json',     //If json is required
    contentType: 'application/json; charset=utf-8',
    url: "MYACTIONNAME.action",          //URL you need to pass
    success: function(value) {
        alert(value.properties);        
    },
    error: function (xhr, ajaxOptions, thrownError) {
        $(".errors").html("Please Try Again");
        //console.log(xhr.status + thrownError);
    }
}); 
```

});

那是为了发送 JSON 并从动作类中检索 JSON。 [可以在此处找到 JSON 的配置以及其他答案](https://stackoverflow.com/a/12266588/1085285)

答案 2::

```
$(document).ready(function() {
        $("#div").load("MYActionName.action"); //can do that through $.ajax also
}); 
```

如果您只想显示加载的 HTML(converted JSP) 的一部分，请使用

```
$("#divToReplaceWithNewOne").hide().load('MyActionName.action #newDivWhichWillbeFilled').fadeIn(1000);  //with animation 
```

Ans 3:: 这完全取决于你想要什么。如果你想要pdf或其他东西，你必须配置。

a) 整个 JSP

```
<action name="MYActionName" class="MYActionNameBean" method ="execute">
            <result name="success" type="dispatcher">
                <param name="location">/jsp/MyNewPage.jsp</param>
            </result>
        </action> 
```

b) 仅通过 ActionClass 处理流和设置内容

```
<action name="MYActionName" class="MYActionNameBean"    method="execute">
            <result type="stream">
                    <param name="contentType">text/html</param>
                    <param name="inputName">inputStream</param>
            </result>
        </action> 
```

方法：：

```
public String execution() throws Exception {
        try{
            PrintWriter outWriter = null;
            StringBuffer sbf = new StringBuffer("");
            HttpServletResponse httpResponse = ServletActionContext.getResponse();
            try {
                outWriter = httpResponse.getWriter();
                                        sbf.append("String to be sent to View");
                    }

            } catch (IOException e) {
                // TODO Auto-generated catch block
                e.printStackTrace();
            }
            finally{

                if(outWriter!=null){
                    httpResponse.setContentType("text/html");
                    outWriter.println(sbf.toString());
                    outWriter.flush();
                    outWriter.close();
                }
            }

        }catch (Exception e) {
            throw new MyOwnException(e);
        }
        return null;
        } 
```

c) 以 JSON 作为结果。(struts2-json 插件)

```
<action name="MYActionName" class="MYActionNameBean"    method="execute">
            <result type="json"></result>   
        </action> 
```

d) PDF

```
<action name="DownloadPdf" class="PrintPdfActionBean" method="executeViewPdf">
            <result name="success" type="stream">
                <param name="contentType">application/pdf</param>
                <param name="inputName">fileInputStream</param>
                <param name="contentDisposition">attachment; filename="${fileName}.pdf"</param>  //filename is variable in action class
                <param name="bufferSize">4096</param>
            </result>
        </action> 
```

答：：4。这就是所有 JQuery 在成功/完成/延迟回调中，您可以将您的 js 示例片段：：

```
success: function(value) {
            var respStat = data.status; 
                var errorStat = data.errorsMessages;
                if(respStat =="success"){
                    responseMsg.removeClass().addClass('successMessage').html("Your changes have been saved successfully.").fadeOut(4000);
                    }
                else{
                    responseMsg.removeClass().addClass('errorMessage').html(errorStat[0]).show();
                }
}, 
```

# javascript - Node.js：尝试使用 NSSM 将包装在永久监视器中的脚本安装为 Windows 服务

> ID：12480655
> 
> 赞同：1
> 
> 时间：2012-09-18T15:55:49.643
> 
> 标签：javascript, windows, node.js

我有一个 net.connect 脚本，我试图将它作为服务安装在 Windows XP 机器上。

在我尝试包含永久监视器之前，该应用程序使用 NSSM 正确安装。

手动启动永久监控脚本时，它也可以正常工作。

我试图在应用程序本地和全局安装永久监视器，但无论哪种方式都会产生相同的结果。

服务安装，然后立即暂停。它无法启动。

谁能看到我做错了什么？

Forever-Monitor 代码：

```
// nstream.js

var forever = require('forever-monitor');

var child = new (forever.Monitor)('nstream.0.0.3.js', {
  silent: true,
});

child.on('exit', function () {
});

child.start(); 
```

从 CMD 提示符发出 NSSM 命令：

```
c:\avl\src\nssm.exe install "Test" "c:\program files\nodejs\node.exe" "c:\avl\bin\nstream\nstream.js" 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-22T20:54:54.870

事实证明，解决方案是添加 sourceDir 选项：

```
// nstream.js

var forever = require('forever-monitor');

var child = new (forever.Monitor)('nstream.0.0.3.js', {
  silent: true,
  sourceDir: 'c:/avl/bin/nstream'
});

child.on('exit', function () {
});

child.start(); 
```

# c++ - OOP - 这应该怎么做？

> ID：12480656
> 
> 赞同：2
> 
> 时间：2012-09-18T15:55:52.873
> 
> 标签：c++, oop, function

我有一个具有以下变量/成员的类：

> 名
> 
> 姓
> 
> 年龄
> 
> 地址等。。

我想为每个返回值的方法创建 getter 方法。根据班级的不同，这可能会变得很大。

有没有一种更快或更面向对象的方法可以让我只使用一种方法来做到这一点？我能想到的唯一方法是有一个方法，该方法接受要返回的变量名称的参数；但是，该方法的类型会根据它是否返回字符串、int 等而改变。

有没有人有办法解决吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-18T16:18:36.320

为什么你需要课外的那些价值观？如果您有不在`Person`其中的代码调用 4 或 5 个`Person GetWhatever()`方法并将字符串粘合在一起，在它们之间填充逗号等等，将该代码移动到`Person`. 做到这一点就足够了，外面的代码`Person`不需要调用你的吸气剂。

有些类是无逻辑的，它们只保存值，并且它们期望外部对象完成所有工作。在 C++ 中，为此使用结构可以使您的意图清晰。如果你坚持外部代码`Person`需要任意访问 Person 的元素，它可能是一个结构，而不是一个类。如果您坚持它是一个类，请通过添加一些实际的业务逻辑来证明它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-18T15:59:13.060

不，没有“更好”的方式仍然是面向对象的。您应该为每个需要在类外部访问的私有成员变量定义一个公共“getter”方法。如果要从类外部设置变量，您还应该定义一个 setter 方法。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-18T17:35:44.297

如果您想轻松定义 setter/getter - 在单个成员级别进行。使用 setter/getter 制作成员模板并将其定义为类的公共元素：

```
template <class Type>
class Member {
public:
  Member(const T& value = T()) : value(value) {}
  void setValue(const Type& t) { value = t; }
  T getValue() const { return value; } 
private:
  T value;
}; 
```

在你的课堂上使用它：

```
class Person {
public:
   Member<std::string> firstName;
   Member<std::string> lastName;
   Member<std::string> address;
   Member<unsigned>    age;
}; 
```

和用法：

```
int main() {
   Person one;
   one.firstName.setValue("Joe");
   one.age.setValue(33);
} 
```

如果您需要一些约束（如范围检查），请定义一些 RangeCheckingMember 模板。如果您需要成员相互依赖 - 然后通过指针/引用在它们之间建立关系。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-18T16:55:35.877

好吧。因为你知道你想要什么。

```
void get(int flag, void *return_value) 
```

将`return_value`类型转换为您想要的。

谢谢

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-18T15:58:33.440

考虑使用在给定类型中采用默认值的模板成员函数进行参数查找。

```
template<typename ValueType>
const ValueType& get(const KeyType& key, const ValueType& default value) {
   ...
}; 
```

您仍然必须枚举（或以其他方式列出）`KeyType`所有值（或`std::string`在较大情况下使用可能没问题的值）并在`ValueType`.

因此，在您决定需要任意大或完全动态的值之前，这并不能真正帮助您。此时，您需要实现一个映射，它可以包含任何需要可怕的联合或来自映射中使用的公共基类的模板包装器派生类的类型。

这样做的好处是一个`getKeys()`方法可以显示类中所有可用的键——这对于动态 GUI 和消息处理非常有用。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-09-18T16:05:47.337

如果您使用的库中的所有内容都是某个 Object 类（例如 QObject）的子类，则可以使用 a`map of (string, object)`来保存所有数据，然后通过以下方式访问它：

```
Object get(string name) { return memebers[name]; }

members is std::map<std::string, Object> 
```

当然，您将需要使用类型转换。

```
Button* my_var = static_cast<Button*>(my_class.get("my_button")); 
// get returns Object 
```

如果你使用[Qt](http://en.wikipedia.org/wiki/Qt_%28framework%29) ，你也可以使用[Qt 的属性系统](http://www.developer.nokia.com/Community/Wiki/How_to_use_Q_PROPERTY)。这不是标准的 c++，但 qmake 和 moc 可以在许多操作系统上工作。

# sql - SQL Sybase 查询奇怪的行为

> ID：12480657
> 
> 赞同：0
> 
> 时间：2012-09-18T15:55:54.497
> 
> 标签：sql, sybase

我在同一个 Sybase 数据库中有 2 个结构完全相同的表，但它们是单独的表。

此查询适用于以下两个之一：

```
select * from table1 where 
QUOTA_FIELD >
(SELECT 
 count(ACCOUNT) FROM 
 table1 As t1
where SECTOR = t1.SECTOR
AND 
STATUS = 'QUOTA'
) 
```

但是对于第二张表，我必须将其更改为：

```
select * from table2 as tref where 
QUOTA_FIELD >
(SELECT 
 count(ACCOUNT) FROM 
 table2 As t2
where tref.SECTOR = t2.SECTOR
AND 
STATUS = 'QUOTA'
) 
```

这将在哪里执行是有限制的，这意味着它需要像第一个查询一样工作。

有没有人知道为什么第一个可能会按预期工作而第二个不会？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-28T14:35:58.597

由于我还不能发表评论，这里作为对“有人......？”这个问题的回答：

不，我找不到任何人 :)

第一个查询无法正常工作，因为它会将列与自身进行比较（只要列名都是普通的 ASCII 字符而不是一些看起来相似的 UNICODE 字符）。请证明此查询的结果在每种情况下都与查询 2 的结果相同。

此外，第二个查询通常会这样完成：`where SECTOR = tref.SECTOR`...

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-02-16T20:14:33.893

您可能正在查询 #1 中寻找类似的内容：

```
select * from table1 t2 where 
QUOTA_FIELD >
(SELECT 
 count(ACCOUNT) FROM 
 table1 As t1
where t2.SECTOR = t1.SECTOR          
AND 
t1.STATUS = 'QUOTA'
) 
```

这明确指定子查询中的表正在与外部查询中的表（共同相关子查询）连接。

如果可行，请在查询 #2 中使用相同的想法

# c# - Visual Studio 使用 Runtime.Serialization 生成我的服务引用之一，但其他服务引用使用 ServiceModel 生成

> ID：12480659
> 
> 赞同：3
> 
> 时间：2012-09-18T15:55:59.370
> 
> 标签：c#, .net, web-services, soap, service-reference

我正在为 Visual Studio 2010 中的 .asmx 文件生成两个服务参考合同。

我以相同的方式创建了两个服务引用。我右键单击“服务引用”->“添加服务引用..”->“发现”->重命名命名空间->确定。

这是来自 References.cs 的最顶级的自动生成的代码，用于正确生成的服务：

```
namespace CableSolve.Web.Api.Tests.ComponentServicesProxy {
    [System.CodeDom.Compiler.GeneratedCodeAttribute("System.ServiceModel", "4.0.0.0")]
    [System.ServiceModel.ServiceContractAttribute(Namespace="http://www.cormant.com/cswebapi", ConfigurationName="ComponentServicesProxy.ComponentServicesSoap")]
    public interface ComponentServicesSoap { 
```

这是不正确生成的服务的代码：

```
namespace CableSolve.Web.Api.Tests.WorkflowServicesProxy {
    using System.Runtime.Serialization;
    using System;
    [System.Diagnostics.DebuggerStepThroughAttribute()]
    [System.CodeDom.Compiler.GeneratedCodeAttribute("System.Runtime.Serialization", "4.0.0.0")]
    [System.Runtime.Serialization.DataContractAttribute(Name="OrderDto", Namespace="http://www.cormant.com/cswebapi")]
    [System.SerializableAttribute()]
    public partial class OrderDto : object, System.Runtime.Serialization.IExtensibleDataObject, System.ComponentModel.INotifyPropertyChanged { 
```

很明显，WorkflowServicesProxy 使用 System.Runtime.Serialization，而 ComponentServicesProxy 使用 System.ServiceModel。

我不确定是什么触发了我使用 System.Runtime.Serialization 生成的第二个服务引用。有谁知道这会导致什么？我的 OrderDto 类没有 DataContractAttribute，但是，它确实有其他属性：

```
[Serializable]
[XmlRoot("Order"), SoapType("Order")]
public class OrderDto : IDto 
```

此服务参考之前已正确生成代码。似乎在两个构建之间它发生了变化。

我的两项服务的声明是相同的：

```
[WebService(Namespace = "http://www.cormant.com/cswebapi")]
[WebServiceBinding(ConformsTo = WsiProfiles.BasicProfile1_1)]
[ToolboxItem(false)]
public class WorkflowServices : WebService

[WebService(Namespace = "http://www.cormant.com/cswebapi")]
[WebServiceBinding(ConformsTo = WsiProfiles.BasicProfile1_1)]
[ToolboxItem(false)]
public class ComponentServices : WebService 
```

服务参考配置相同：

![在此处输入图像描述](../Images/821012d5fe5d3a44ca5d872e254b26ed.png)

**更新：**虽然我尝试了建议的答案但没有成功，但我学到了一些信息。如果我从我的 asmx 文件中删除所有代码并重新生成服务引用，它确实会交换回 ServiceModel。所以，代码本身就有一些东西。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-18T16:10:44.060

您部分回答了自己的问题

> 我的 OrderDto 类没有 DataContractAttribute

再加上我打赌它`OrderDTO`位于程序集中`CableSolve.Orders`并且客户端和服务器都共享该程序集这一事实。

因为它（技术上）是一种已知类型，并且没有明确标记为数据协定，所以代码生成器使用 DLL 的引用并用于`Runtime.Serialization`序列化和传输对象，而不是`ServiceModel`.

![在此处输入图像描述](../Images/a697e1840521a0c78ea103c23b9e5529.png)

作为“解决方案”，将“全部重用”更改为另一个选项，并选中除您引用的通用程序集中的框之外的所有框。

# xml - XML 模式中的模块化是什么意思？

> ID：12480665
> 
> 赞同：1
> 
> 时间：2012-09-18T15:56:06.590
> 
> 标签：xml, xsd, schema-design

XML 模式中的模块化是什么意思？即给定一个xsd，可以做些什么来使其模块化？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-18T21:20:18.667

我将通过组件的可重用性和它们耦合的强度（或更确切地说是弱点）来衡量模块化。例如，复杂类型被命名并从元素声明中引用的模式比类型出现在元素声明中的内联模式更模块化，因为这些类型可以被重用于其他元素（可能在改进它们之后）通过扩展或限制）。

有些人可能会更多地在模式文档（因此 xs:include）级别上查看模块化，但我认为这可能不那么重要。

当然，将一个系统分解为尽可能多的最小组件不一定是正确的做法。还有其他因素需要考虑。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-18T17:22:15.023

这意味着将 XSD（文件）分解为两个或多个 XSD，通过最常见的 xsd:include/xsd:import 链接在一起。这种“打破”将根据指导模块化的原则来完成。例如：

*   使用建模领域中的主题领域（客户、帐户、产品、计费、交易，是一些例子）。
*   通过重用实施或采用模型（实施某种类型系统或层次结构）
*   将专有扩展与核心标准分离。
*   等等

人们在封装代码时会考虑的大多数原则都适用于良好的 XSD 模块化。

# facebook - 使用 Insights 表中的 FQL 检索 page_fans

> ID：12480666
> 
> 赞同：0
> 
> 时间：2012-09-18T15:56:06.840
> 
> 标签：facebook, facebook-fql

我正在尝试`page_fans`使用以下 FQL 查询（[见解表](http://developers.facebook.com/docs/reference/fql/insights/)）检索。

```
SELECT metric, value FROM insights WHERE object_id=182929845081087 AND metric='page_fans' AND end_time=1334905200 AND period=86400 
```

但是当我进行上述查询时，我只是得到空白数据。

```
{
  "data": [
  ]
} 
```

我可以通过更改`metric`上述查询中的值来检索其他指标。

例如。我`page_engaged_users`只需更改`metric`上述查询中的值即可。

```
SELECT metric, value FROM insights WHERE object_id=182929845081087 AND metric='page_engaged_users' AND end_time=1334905200 AND period=86400

{
  "data": [
    {
      "metric": "page_engaged_users", 
      "value": 35
    }
  ]
} 
```

我试图检索的第一个查询有什么问题`page_fans`？

而且我知道我也可以使用其他方式检索 page_fans ！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-18T18:39:49.177

如果您查看见解文档，请注意在最后一列中该`page_fans`指标仅适用于生命周期`period`。将您的查询更改为`period=0`or `period=period('lifetime') ，您将获得数据。

如果您希望在给定日期添加新粉丝，请使用`page_fan_adds`带有 的指标`period('day')`。

如果您请求任何其他时间段，您将收到错误或没有数据（这意味着除了您之外的其他人*可以*请求该指标用于不同的时间段）。

另一个问题可能是您请求的数据太新。在您的查询中，您正在查看 2012-04-20，所以您应该没问题。当我对此进行测试时，如果我使用的日期大于 2012 年 9 月 15 日（2012 年 9 月 18 日），我没有得到任何数据。

# javascript - 我的 Greasemonkey 脚本如何自动重新加载页面并自动单击按钮？

> ID：12480667
> 
> 赞同：2
> 
> 时间：2012-09-18T15:56:08.817
> 
> 标签：javascript, click, greasemonkey, reload

我是 JavaScript 的初学者。我需要知道这是否可行，如果可以，该怎么做。

我想创建一个 Greasemonkey 脚本，它会每小时自动重新加载一个网页，然后在重新加载页面后，我希望它为我单击一个按钮。

那可能吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-19T02:57:01.367

*   如需点击内容，请参阅[此答案](https://stackoverflow.com/a/8192413/331508)。

*   另请[参阅`location.reload()`](http://www.w3schools.com/jsref/met_loc_reload.asp).

*   另请参阅[更好的 javascript 参考`setTimeout()`](https://developer.mozilla.org/en-US/docs/DOM/window.setTimeout)。

*   由于可以通过 AJAX 加载按钮（需要问题中的更多信息），请参考[实用`waitForKeyElements()`程序](https://gist.github.com/2625891)，以处理 AJAX 延迟/修改。

*   开始学习[jQuery](http://jquery.com/) ; 它将为您节省大量的悲伤和努力。

*   确定所需按钮的 jQuery 选择器。您可以使用*Firebug*之类的工具来帮助解决此问题（请注意，jQuery 选择器和 CSS 选择器大部分相同，但 jQuery 具有更多选项/功能）。

    例如，如果页面的 HTML 有一个如下所示的部分：

    ```
    <div id="content">
        <p>Blah, blah, blather...</p>

        <h2>Your available actions:</h2>
        <button class="respBtn">Like</button>
        <button class="respBtn">Hate</button>
        <button id="bestOption" class="respBtn">Nuke them all</button>
    </div> 
    ```

    然后 3 个按钮的选择器可能（分别）：

    1.  `$("#content button.respBtn:contains('Like')");`
    2.  `$("#content button.respBtn:contains('Hate')");`
    3.  `$("#bestOption");`（总是使用`id`, 如果元素有一个。）

总而言之，这是一个**完整的 Greasemonkey 脚本**，它可以重新加载并单击：

```
// ==UserScript==
// @name     _Reload and click demo
// @include  http://YOUR_SERVER.COM/YOUR_PATH/*
// @require  http://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js
// @require  https://gist.github.com/raw/2625891/waitForKeyElements.js
// @grant    GM_addStyle
// ==/UserScript==
/*- The @grant directive is needed to work around a major design
    change introduced in GM 1.0.
    It restores the sandbox.
*/

waitForKeyElements ("#bestOption", clickTargetButton);

function clickTargetButton (jNode) {
    var clickEvent = document.createEvent ('MouseEvents');
    clickEvent.initEvent ('click', true, true);
    jNode[0].dispatchEvent (clickEvent);
}

//--- Reload after 1 hour (1000 * 60 * 60 milliseconds)
setTimeout (location.reload, 1000 * 60 * 60); 
```

# search - SOLR - 对“EXTRA”单词较少的较小文档进行更好的排名

> ID：12480668
> 
> 赞同：0
> 
> 时间：2012-09-18T15:56:11.643
> 
> 标签：search, solr, ranking, elevation, solr-boost

我的 SOLR 文档是葡萄酒实体。当用户搜索关键字“Haut Bailly”（这是来自波尔多的葡萄酒）时，我想首先获得一个标题长度较短的匹配文档，例如：

1.  "Château Haut-Bailly - Pessac-Léognan"
2.  "Château Haut-Bailly La Parde de Haut Bailly - Pessac-Léognan"

然而，对于默认的 solr 查询，关键字“haut bailly”会返回以下排名：

1.  "Château Haut-Bailly La Parde de Haut Bailly - Pessac-Léognan"
2.  "Château Haut-Bailly - Pessac-Léognan"

有没有我可以使用的参数来增加更接近短语搜索（就长度而言）和更短字段（这里是标题）的匹配分数？所以在这里正确的葡萄酒（“Château Haut-Bailly - Pessac-Léognan”）出现在排名中？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-18T17:13:00.110

我认为默认评分已经可以做到这一点（如果您没有使用 omitNorms 省略规范）。第一个文档得分较高，因为它进行了两次搜索（很可能它也匹配 Haut-Bailly 或其中一个单词，具体取决于您使用的标记器/解析器）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-19T04:03:19.837

使用重复过滤器可能有效 [http://wiki.apache.org/solr/AnalyzersTokenizersTokenFilters#solr.RemoveDuplicatesTokenFilterFactory](http://wiki.apache.org/solr/AnalyzersTokenizersTokenFilters#solr.RemoveDuplicatesTokenFilterFactory)

# android - 在 Jenkins maven 构建中挂起 Android 模拟器

> ID：12480670
> 
> 赞同：1
> 
> 时间：2012-09-18T15:56:16.017
> 
> 标签：android, maven, android-emulator, jenkins, robotium

我正在使用 Jenkins、Maven 和 Robotium 构建一个 Android 项目。很多时候，几乎每次构建，在构建失败后，由于 Robotium 或 JUnit 测试失败，一些模拟器会继续 100% 运行。如何确保 Jenkins 在构建后杀死模拟器？该项目是一个多配置项目，在许多不同的 Android 版本、分辨率和语言环境上运行测试。

Jenkins 在 Mac OS X 10.7.4 上运行。

谢谢马库斯

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-04T16:22:43.287

您可以将通用仿真器选项设置为`Delete emulator after build`.

# php - CakePHP shell 单元测试

> ID：12480681
> 
> 赞同：5
> 
> 时间：2012-09-18T15:57:03.933
> 
> 标签：php, unit-testing, cakephp, cakephp-2.0

我想为我正在创建的 CakePHP shell 编写单元测试，但在[测试文档](http://book.cakephp.org/2.0/en/development/testing.html)或烘焙中没有提到它们：

```
---------------------------------------------------------------
Bake Tests
Path: /home/brad/sites/farmlogs/app/Test/
---------------------------------------------------------------
---------------------------------------------------------------
Select an object type:
---------------------------------------------------------------
1\. Model
2\. Controller
3\. Component
4\. Behavior
5\. Helper
Enter the type of object to bake a test for or (q)uit (1/2/3/4/5/q) 
```

由于 CakePHP 似乎没有默认的 shell 测试设置，我的基本 shell 测试的结构应该是什么样的？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-18T16:13:37.097

从 Mark Story 的[AssetCompress](https://github.com/markstory/asset_compress/tree/2.x/Test/Case)和 CakeDC 的[Migrations](https://github.com/CakeDC/migrations/tree/master/Test/Case)中的示例来看，只需模仿其他测试的目录结构：

```
Test/
  Case/
    Console/
      Command/
        Task/
          MyShellTaskTest.php
        MyShellTest.php 
```

您的测试可以扩展 CakeTestCase 对象，就像任何其他通用测试一样：

```
class MyShellTest extends CakeTestCase {
} 
```

如果需要，您可以覆盖基本 shell，就像使用 Controller 测试一样：

```
class TestMyShell extends MyShell {
} 
```

没什么特别的，只要遵守约定。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-03-14T07:08:53.080

我认为 app/lib/lib/Cake/Console/Command/TestShellTest.php 可以作为参考。

1、在app/Test/Case/Console/Command/yourfile.php中创建文件，使用`App::uses('your class', 'relative path').`
例如：

```
App::uses('yourShellClass', 'Console/Command');
App::uses('ShellDispatcher', 'Console');
App::uses('Shell', 'Console'); 
```

2、从你的shell类A编写一个模拟类B，其函数使用A类中的数据返回。例如：

```
 class TestYourShellClass extends YourShellClass {
         public function F1 ($parms){
               //if you need use database here, you can 
               //$this->yourModel = ClassRegistry::init('yourModel');
               return $this->_F1($parms);      
         }

    } 
```

3、编写A类的测试类，需要在启动时初始化。例如：

```
 class YourShellClassTest extends CakeTestCase {
        public function setUp()
        {
            parent::setUp();
            $out = $this->getMock('ConsoleOutput', [], [], '', false);
            $in = $this->getMock('ConsoleInput', [], [], '', false);
            $this->Shell = $this->getMock(
                // this is your class B, which mocks class A.
                'TestYourShellClass',
                ['in', 'out', 'hr', 'help', 'error', 'err', '_stop', 'initialize', '_run', 'clear'],
                [$out, $out, $in]
            );
            $this->Shell->OptionParser = $this->getMock('ConsoleOptionParser', [], [null, false]);
        }

        /**
         *  tear down method.
         *  
         *  @return void
         */
        public function tearDown()
        {
            parent::tearDown();
            unset($this->Dispatch, $this->Shell);
        }       
   } 
```

4、测试功能可以这样。

```
 /**
 *  test _F1.
 *  
 *  @return void
 */
public function testF1()
{
    $this->Shell->startup();
    $return = $this->Shell->F1();
    $expectedSellerCount = 14;
    $this->assertSame($expectedSellerCount, $return);
} 
```

然后你可以在[http://yourdomain/test.php查看结果](http://yourdomain/test.php)

# google-chrome-extension - chrome.extension 中的第二个图标

> ID：12480682
> 
> 赞同：0
> 
> 时间：2012-09-18T15:57:04.963
> 
> 标签：google-chrome-extension

我可以在一个浏览器操作中有多个图标吗？或者创建新的扩展？我想要一个两个图标，每个图标都可以执行其他操作，第一个图标->保存我的 url（我有这个），第二个从我的服务器读取这个 url（这个我也有），但我需要第二个图标扩大。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-20T05:19:36.717

此时您不能拥有多个图标。我会建议两种选择：

*   创建一个显示两个选项（保存和读取）的 popup.html 页面
*   使用切换操作，`chrome.browserAction.setIcon`当您单击浏览器图标时会更改您的图标。

# android - Android 询问使用哪个应用程序来扫描条形码

> ID：12480687
> 
> 赞同：0
> 
> 时间：2012-09-18T15:57:18.120
> 
> 标签：android, zxing, barcode-scanner

我在我的应用程序中使用 zxing 来扫描条形码，我已经让它扫描得很好。但是，我们有几个应用程序可以进行扫描（每个客户使用不同的品牌应用程序），我看到当我启动 Activity 扫描条形码时，手机会询问我要使用哪个应用程序。这样做有两个问题。首先，我希望每个应用程序在单击扫描按钮时始终使用 ITSELF 作为扫描应用程序，其次，我不希望另一个我没有编写的应用程序尝试使用我的应用程序扫描条形码。

如何执行第一项并防止第二项？我试图找到一些东西放入清单中，也许，但没有想出任何东西。

编辑 - 这是清单（隐藏了一些信息）（应用程序显示 LoginActivity，然后是带有扫描按钮的屏幕（MainActivity），然后将条形码发送到返回更多信息的网站，显示在 ResultActivity 中）：

```
<?xml version="1.0" encoding="utf-8"?>
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
    package="com.MyCompany.MyApp"
    android:versionCode="1"
    android:versionName="1.0" >

    <uses-sdk
        android:minSdkVersion="8"
        android:targetSdkVersion="10" />

    <uses-permission android:name="android.permission.CAMERA" />
    <uses-permission android:name="android.permission.INTERNET" />
    <uses-permission android:name="android.permission.ACCESS_NETWORK_STATE" />
    <uses-permission android:name="android.permission.READ_PHONE_STATE" />
    <uses-permission android:name="android.permission.ACCESS_FINE_LOCATION" />

    <uses-feature
        android:name="android.hardware.camera"
        required="true" />

    <application
        android:icon="@drawable/logo"
        android:label="@string/app_name"
        android:theme="@style/MyTheme" >
        <activity
            android:name="com.MyCompany.MyApp.LoginActivity"
            android:clearTaskOnLaunch="true"
            android:label="@string/app_name"
            android:windowSoftInputMode="stateHidden" >
            <intent-filter>
                <action android:name="android.intent.action.MAIN" />

                <category android:name="android.intent.category.LAUNCHER" />
            </intent-filter>
        </activity>
        <activity
            android:name="com.MyCompany.MyApp.MainActivity"
            android:label="@string/app_name" >
        </activity>
        <activity
            android:name="com.MyCompany.MyApp.HelpActivity"
            android:label="@string/app_name" >
        </activity>
        <activity
            android:name="com.MyCompany.MyApp.ResultActivity"
            android:label="@string/app_name" >
        </activity>
        <activity
            android:name="com.google.zxing.client.android.CaptureActivity"
            android:configChanges="orientation|keyboardHidden"
            android:exported="false"
            android:theme="@android:style/Theme.NoTitleBar.Fullscreen"
            android:windowSoftInputMode="stateAlwaysHidden" >
            <intent-filter>
                <action android:name="com.google.zxing.client.android.SCAN" />

                <category android:name="android.intent.category.DEFAULT" />
            </intent-filter>
        </activity>
    </application>

</manifest> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-10-08T12:57:40.290

解决方案是在 Intent 上设置 Action

Intent intent = new Intent(this, com.google.zxing.client.android.CaptureActivity.class); 意图.setAction(com.google.zxing.client.android.Intents.Scan.ACTION); startActivityForResult(intent, 0);

这对我有用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-18T16:18:22.107

它们实际上是同一个问题......您是否通过使用其扫描仪的意图调用 zxing？如果是这样，您自己的应用程序可能正在侦听相同的意图，这会导致它们在您开始扫描时做出反应。

您可以检查清单以查找具有扫描意图过滤器的活动。

- - - - - -更新 - - - - -

CaptureActivity 具有 Scan 的意图过滤器。这就是原因。如果您将 zxing 的代码嵌入到您的应用程序中而不是调用他们的应用程序，则可以删除此意图过滤器。

# actionscript-3 - 当我更改自定义组件中的属性名称时，flash 编译器会抛出 ReferenceError

> ID：12480688
> 
> 赞同：2
> 
> 时间：2012-09-18T15:57:21.190
> 
> 标签：actionscript-3, flash, custom-component, referenceerror

我正在构建一个自定义 Datagrid 组件，并且我有三个参数属性：

```
[Collection] _columns
[Inspectable] _headerHeight
[Inspectable] _rowHeight 
```

这一切都编译得很好，但是我需要更改有关`_columns`变量的内容，并且改为创建`_columnData`以存储来自`DataProvider`.

现在，`ReferenceError`每次我尝试*Test Movie*时它都会抛出一个，说`columnData`无法创建该属性，尽管它已在 Flash Professional IDE 的参数列表中列出。

我唯一能想象的是，Flash 以某种方式缓存了我的类的早期版本，但是当我重建组件时，Flash IDE 会根据我的元数据正确更新自己。我已经清除了所有的东西`~/Library/Application Support/Adobe/Flash CS5/CodeModel`，重新启动了 Flash，删除了 ASO 文件，我已经将所有文件移到了新机器上，甚至在新的 FLA 中从头开始构建组件（使用相同的类） - 没有任何效果.

导致错误的代码复制如下：

```
private var _columnData:Object;
private var _headerHeight:Number = 40;
private var _rowHeight:Number = 40;

[Collection(collectionClass="musicone.components.data.DataCollection", collectionItem="musicone.components.controls.datagrid.DatagridColumn", identifier="item")]
public function get columnData():Object {
    return _columnData;
}
public function set columnData(value:Object):void {
    _columnData = value;

    var _forceClass:DataCollection = value as DataCollection;
    //updateColumns();
    draw();
}

[Inspectable(type="Number", defaultValue=40)]
public function get headerHeight():Number {
    return _headerHeight;
}
public function set headerHeight(value:Number):void {
    _headerHeight = value;
    draw();
}

[Inspectable(type="Number", defaultValue=40)]
public function get rowHeight():Number {
    return _rowHeight;
}
public function set rowHeight(value:Number):void {
    _rowHeight = value;
    draw();
} 
```

编辑：我认为我的代码被缓存在某处的主要原因之一是 draw() 函数中的更改没有显示在任何地方 - 换句话说，我可以保证我的更改产生效果的唯一地方是在 Flash IDE 中。也就是说，同样的错误发生在不同的机器上这一事实让我相信这是内在的......

# c# - 如果退出，Linq 多重连接

> ID：12480689
> 
> 赞同：0
> 
> 时间：2012-09-18T15:57:22.600
> 
> 标签：c#, linq, entity-framework

我正在努力实现这段代码。如果有人帮助，将不胜感激。

```
var result = (from fv in db.UsFavourites.Where(m => m.UserID == currentUserId)
                      join ad in db.CtArticleDetails.Where(m => m.ArticleStatusId == ConfigHelper.Published) on fv.ArticleReferenceID equals ad.ArticleReference
                      join pcs in db.PcPages.Where(m => m.Status == ConfigHelper.Published) on fv.PageReferenceID equals pcs.Reference
                      join prd in db.PrProducts.Where(m => m.ProductStatusID == ConfigHelper.Published) on fv.ProductReferenceID equals prd.ProductReference
                      select new FavouriteModel
                      {
                          FavouriteId = fv.FavouriteID,
                          Title = ad.Title ?? pcs.PageName ?? prd.Name,
                          Url = ad.Title ?? pcs.PageName ?? prd.Name,
                          ArticleReferenceID = (int)fv.ArticleReferenceID,
                          PageReferenceID = (int)fv.PageReferenceID,
                          ProductReferenceID = (int)fv.ProductReferenceID
                      }); 
```

基本上，我正在尝试加入 3 个表，如您所见：ad、pcs、prd。如果 Pcs 不存在，则代码应忽略。任何人都可以建议吗？

添加了数据库设计以明确： ![在此处输入图像描述](../Images/379f22f4435e5e08f82a8514a8942b6a.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-18T16:07:09.800

我认为您正在寻找左连接

*   `pcs` `db.PcPages`

*   `ad` `db.CtArticleDetails`

`DefaultIfEmpty`用于使其成为左连接

```
var result = (from fv in db.UsFavourites.Where(m => m.UserID == currentUserId)
                      from ad in db.CtArticleDetails.Where(m => m.ArticleStatusId == ConfigHelper.Published) 
                                                    .Where(m => fv.ArticleReferenceID == m.ArticleReference)
                                                    .DefaultIfEmpty()
                      from pcs in db.PcPages.Where(m => m.Status == ConfigHelper.Published)
                                            .Where(m => fv.PageReferenceID == m.Reference)
                                            .DefaultIfEmpty()
                      join prd in db.PrProducts.Where(m => m.ProductStatusID == ConfigHelper.Published) on fv.ProductReferenceID equals prd.ProductReference
                      select new FavouriteModel
                      {
                          FavouriteId = fv.FavouriteID,
                          Title = ad.Title ?? pcs.PageName ?? prd.Name,
                          Url = ad.Title ?? pcs.PageName ?? prd.Name,
                          ArticleReferenceID = (int)fv.ArticleReferenceID,
                          PageReferenceID = (int)fv.PageReferenceID,
                          ProductReferenceID = (int)fv.ProductReferenceID
                      }); 
```

# jquery - 将两个饼图合并或分组为一个饼图

> ID：12480693
> 
> 赞同：0
> 
> 时间：2012-09-18T15:57:41.990
> 
> 标签：jquery, jqplot

**[JSFIDDLE](http://jsfiddle.net/kXrfR/4/)**

如何使用jqplot将两个饼图合并为一个饼图

```
var firstv=30;
            var secondv=40;
            var thirdv=30;
            var name1="giri";
            var name2="shiva";
            var name3="nanda";
    var data =  [[name1, firstv],[name2, secondv],[name3,thirdv]];

var plot1 = jQuery.jqplot('chart1', [data],
        {
            grid: {
                shadow: false,
                background: '#FFFFFF',                                                                                          
            },
            seriesDefaults: {
                // Make this a pie chart.
                renderer: jQuery.jqplot.PieRenderer,
                rendererOptions: {
                    showDataLabels: true,
                    padding: 20,
                    startAngle: 270
                }
            },
            legend: {
                show: true,
                location: 'e',
                fontSize: 11,
                marginTop: 10,                                
            }
        }); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-19T00:09:47.603

仍然不确定你在追求什么，但猜测一下。

鉴于此数据：

```
var firstv=10;
var secondv=20;
var thirdv=70;
var name1="ram";
var name2="kumar";
var name3="manju";

var data1 = [[name1, firstv],[name2, secondv],[name3,thirdv]]; 
```

和：

```
var firstv=30;
var secondv=40;
var thirdv=30;
var name1="giri";
var name2="shiva";
var name3="nanda";

var data2 =  [[name1, firstv],[name2, secondv],[name3,thirdv]]; 
```

然后将两个数据集合并在一起：

```
 var plot2 = jQuery.jqplot('chart2', [$.merge(data,data2)], //using jquery to merge the two datasets
  {
      grid: {
          shadow: false,
          background: '#FFFFFF',                                                                                          
      },
      seriesDefaults: {
          // Make this a pie chart.
          renderer: jQuery.jqplot.PieRenderer,
          rendererOptions: {
              showDataLabels: true,
              padding: 20,
              startAngle: 270
          }
      },
      legend: {
          show: true,
          location: 'e',
          fontSize: 11,
          marginTop: 10,                                
      }
  }); 
```

产生：

![在此处输入图像描述](../Images/cfc95374be8934f503e1317fe23832f4.png)

# ruby - 在 SketchUp 中需要 ruby gems

> ID：12480694
> 
> 赞同：1
> 
> 时间：2012-09-18T15:57:44.470
> 
> 标签：ruby, plugins, sketchup

我一直试图在网上搜索如何在 SketchUp 中要求 ruby​​gems，但一直无法找到具体的方法。

下面是我的插件`C:\Program Files\Google\Google SketchUp 8\Plugins\gems.rb`：

```
$: << 'C:/Ruby186/lib/ruby/site_ruby/1.8'
$: << 'C:/Ruby186/lib/ruby/site_ruby/1.8/i386-msvcrt'
$: << 'C:/Ruby186/lib/ruby/site_ruby'
$: << 'C:/Ruby186/lib/ruby/1.8'
$: << 'C:/Ruby186/lib/ruby/1.8/i386-mingw32'
$: << '.'
require 'rubygems' 
```

我收到以下错误：

```
Error: #<LoadError: C:/Ruby186/lib/ruby/1.8/i386-mingw32/thread.so: 127: The specified procedure could not be found.   - C:/Ruby186/lib/ruby/1.8/i386-mingw32/thread.so>
(eval):14
C:/Ruby186/lib/ruby/1.8/thread.rb:5
C:/Ruby186/lib/ruby/site_ruby/1.8/rubygems.rb:11:in `require'
C:/Ruby186/lib/ruby/site_ruby/1.8/rubygems.rb:11
(eval):14:in `require'
(eval):14 
```

但是，thread.so 正好在`C:/Ruby186/lib/ruby/1.8/i386-mingw32`：

```
C:\Ruby186\lib\ruby\1.8\i386-mingw32>ls
Win32API.so    digest.so      fcntl.so   openssl.so   sdbm.so      version.h
bigdecimal.so  dl.h           gdbm.so    racc         socket.so    win32
config.h       dl.so          iconv.so   rbconfig.rb  st.h         win32ole.so
curses.so      dlconfig.h     intern.h   re.h         stringio.so  zlib.so
dbm.so         dln.h          io         regex.h      strscan.so
defines.h      enumerator.so  missing.h  ruby.h       syck.so
digest         env.h          nkf.so     rubyio.h     thread.so
digest.h       etc.so         node.h     rubysig.h    util.h 
```

尝试在 SketchUp Ruby 面板中进行测试：

```
> require 'bigdecimal'
true
> require 'curses'
true
> require 'dbm'
true
> require 'digest'
true
> require 'digest/md5'
Error: #<LoadError: C:/Ruby186/lib/ruby/1.8/i386-mingw32/digest/md5.so: 126: The specified procedure could not be found.   - C:/Ruby186/lib/ruby/1.8/i386-mingw32/digest/md5.so>
(eval):14
(eval):14
> require 'digest\md5'
Error: #<LoadError: C:/Ruby186/lib/ruby/1.8/i386-mingw32/digest\md5.so: 126: The specified procedure could not be found.   - C:/Ruby186/lib/ruby/1.8/i386-mingw32/digest\md5.so>
(eval):14
(eval):14
> require 'digest/sha1'
Error: #<LoadError: C:/Ruby186/lib/ruby/1.8/i386-mingw32/digest/sha1.so: 126: The specified procedure could not be found.   - C:/Ruby186/lib/ruby/1.8/i386-mingw32/digest/sha1.so>
(eval):14
(eval):14
> require 'digest\sha1'
Error: #<LoadError: C:/Ruby186/lib/ruby/1.8/i386-mingw32/digest\sha1.so: 126: The specified procedure could not be found.   - C:/Ruby186/lib/ruby/1.8/i386-mingw32/digest\sha1.so>
(eval):14
(eval):14
> require 'digest\sha2'
true
> require 'digest/sha2'
true 
```

# 2 个问题

1.  为什么里面的文件`C:/Ruby186/lib/ruby/1.8/i386-mingw32`有的可以正确需要，有的不能，提示LoadError？
2.  为什么最后两行都返回`true`？是否与加载问题有关？

# 环境

*   Windows 7的
*   红宝石 1.8.6
*   SketchUp 8.0.14346

PS。[另一个同样的问题在这里](http://www.smustard.com/forum/viewtopic.php?f=6&t=96)

# transfer - 验证 LFTP 传输成功

> ID：12480695
> 
> 赞同：5
> 
> 时间：2012-09-18T15:57:48.800
> 
> 标签：transfer, verify, lftp

我正在使用 lftp 将文件从本地传输到仅允许 SFTP 访问的远程服务器。我使用以下语法传输文件：

```
lftp -c "open -u $UN,$Pass sftp://$Server ; mirror -R $Directory" 
```

在传输文件时，这一切正常。由于我将其用作嵌入在 .sh 文件中的 cron 并且有时 lftp 失败（原因不明）。

如何使用一些退出代码或可用于确保转移正确性的东西来验证转移？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-10T08:53:50.153

我认为，您必须将其包装在 shellscript 中。

shellscript 必须生成一个 lftp 脚本，例如：

```
set xfer:log true
set xfer:log-file "/path/to/somewhere/$DATESTAMP.log"
lcd "/path/of/source"
open -u $UN,$Pass sftp://$Server
mirror -R $Directory
quit 
```

由 执行`lftp -f $ScriptName`。

之后，解析生成的日志文件；AFAIK 它只包含成功的转移。

```
awk '{print $3,$6}' $DATESTAMP.log | sed -r -e 's/ [0-9]+-/ /' 
```

以上将生成每个文件传输的文件和字节列表。例如，您可以遍历结果并与实际文件大小进行比较

```
# WARNING: Script assumes that filename contains no space.
while read fname fsize; do
  # The following line used if the lftp runs from e.g. the source folder
  actualname=$Prefix/$fname
  actualsize=$(stat -c "%s" "$actualname")
  if (( actualsize != fsize )); then
    # Some error handling code here
  fi
done <<< "$(awk '{print $3,$6}' $DATESTAMP.log | sed -r -e 's/ [0-9]+-/ /')" 
```

**注意：**我在那里使用“herestring”而不是管道，以启用`while`循环内的变量操作。

# cuda - cuda 全局和共享内存访问时间

> ID：12480696
> 
> 赞同：3
> 
> 时间：2012-09-18T15:57:49.157
> 
> 标签：cuda

最近我正在研究CUDA。我想知道 CUDA 内存访问时间。

在 CUDA Programming Guide 中写了内存访问时间：

*   全局内存访问时间为 400 ~ 600 Cycle
*   共享内存（L1 Cache）访问时间为 20 ~ 40 Cycle

我认为 Cycle 与时钟相同。它是否正确 ？如果那是正确的，那么我检查了内存访问时间。主机是固定的，但内核代码有 3 个版本。这是我的代码：

* * *

> 主机代码

```
float* H1  = (float*)malloc(sizeof(float)*100000);
float* D1;

for( int i = 0 ; i < 100000 ; i++ ){
    H1[i]  = i;
}

cudaMalloc( (void**)&D1,   sizeof(float)*100000);
cudaMemcpy( D1, H1,    sizeof(float)*100000, cudaMemcpyHostToDevice );

cudaPrintfInit();
test<<<1,1>>>( D1 );
cudaPrintfDisplay(stdout, true);

cudaPrintfEnd(); 
```

* * *

> 内核版本 1

```
float Global1;
float Global2;
float Global3;

int Clock;

Clock = clock();
Global1 = Dev_In1[1];
Clock = clock() - Clock;
cuPrintf("Global Memory Access #1 : %d\n", Clock );

Clock = clock();
Global2 = Dev_In1[2];
Clock = clock() - Clock;
cuPrintf("Global Memory Access #2 : %d\n", Clock );

Clock = clock();
Global3 = Dev_In1[3];
Clock = clock() - Clock;
cuPrintf("Global Memory Access #3 : %d\n", Clock ); 
```

结果

全局内存访问#1：882
全局内存访问#2：312
全局内存访问#3：312

我认为第一次访问不是缓存所以需要 800 个周期，但第二次访问第三次访问需要 312 个周期，因为 Dev_In[2]、Dev_In[3] 被缓存..

* * *

> 内核版本 2

```
int Global1, Global2, Global3;              
int Clock;              

Clock = clock();                
Global1 = Dev_In1[1];               
Clock = clock() - Clock;                
cuPrintf("Global Memory Access #1 : %d\n", Clock );             

Clock = clock();                
Global2 = Dev_In1[50000];               
Clock = clock() - Clock;                
cuPrintf("Global Memory Access #2 : %d\n", Clock );             

Clock = clock();                
Global3 = Dev_In1[99999];               
Clock = clock() - Clock;                
cuPrintf("Global Memory Access #3 : %d\n", Clock ); 
```

结果

全局内存访问#1：872
全局内存访问#2：776
全局内存访问#3：782

我认为在第一次访问时没有缓存 Dev_In1[50000] 和 Dev_In2[99999]

所以...#1,#2,#3 迟到了...

* * *

> 内核版本 3

```
int Global1, Global2, Global3;                  
int Clock;                  

Clock = clock();                    
Global1 = Dev_In1[1];                   
Clock = clock() - Clock;                    
cuPrintf("Global Memory Access #1 : %d\n", Clock );                 

Clock = clock();                    
Global1 = Dev_In1[50000];                   
Clock = clock() - Clock;                    
cuPrintf("Global Memory Access #2 : %d\n", Clock );                 

Clock = clock();                    
Global1 = Dev_In1[99999];                   
Clock = clock() - Clock;                    
cuPrintf("Global Memory Access #3 : %d\n", Clock ); 
```

结果

全局内存访问#1：168
全局内存访问#2：168
全局内存访问#3：168

我不明白这个结果

Dev_In[50000]、Dev_In[99999]没有缓存，但是访问时间非常快！！只是，我使用了 1 个变量....

所以..我的问题是gpu周期== gpu时钟？

在 result1、result2、result3 中，为什么 result3 中的内存访问时间非常快？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-19T10:57:45.537

由于@phoad 所述的原因，您的评估无效。在内存访问之后和时钟停止之前，您应该重用内存读取值以使指令依赖于未完成的负载。否则，GPU 会一个接一个地发出独立的指令，并且在时钟启动和加载后立即执行时钟结束。[我建议你在这里](http://www.stuffedcow.net/research/cudabmk)试试 Henry Wong 准备的微基准测试套装。使用这套衣服，您可以检索各种微架构细节，包括内存访问延迟。如果你只需要内存延迟，尝试由 Sylvain Collange 开发的[CUDA 延迟会更容易。](http://homepages.dcc.ufmg.br/~sylvain.collange/ware/cuda_latency.tar.gz)

# php - 复选框和 jquery ajax

> ID：12480697
> 
> 赞同：1
> 
> 时间：2012-09-18T15:57:50.487
> 
> 标签：php, jquery, ajax, checkbox

我试图创建一个模块，每当检查复选框时，数据库中指示的价格将添加到总费用中，并将显示结果。如何从数据库（sql）中获取值/插入 php 代码并显示所选框的结果？

```
<script>
function updateTextArea() { 
    var allVals = [];
    $('#c_b :checked').each(function() {
        allVals.push($(this).val());
    });
    $('#t').val(allVals)
}
$(function() {
    $('#c_b input').click(updateTextArea);
    updateTextArea();
}); 
```

索引.php

```
$queryPaymentLab = "select * from requestedlab where patient_ID='6' AND paid='0'";
$resultPaymentLab = mysql_query($queryPaymentLab);
$countRowsPaymentLab=mysql_num_rows($resultPaymentLab);

if($countRowsPaymentLab > 0){
while($fetchLab=mysql_fetch_array($resultPaymentLab)){
    $labservice_ID=$fetchLab['labservice_ID'];

    $queryPrice = "select * from labservices where labservice_ID='".$labservice_ID."'";
    $resultPrice = mysql_query($queryPrice);
    $fetchPrice=mysql_fetch_array($resultPrice);

    $labService=$fetchPrice['labService'];
    $labPrice=$fetchPrice['labPrice'];
    $totalLab+=$labPrice;
    $totalHBill+=$labPrice;

    echo "<tr><td><input type='checkbox' name='labservice_ID' value='$labservice_ID'/></td>
    <td>Laboratory</td><td>$labService</td><td>$totalHBill</td></tr>";
}
} 
```

显示总费用..

```
 $queryPrice = "select * from labservices where labservice_ID='".$labservice_ID."'";
    $resultPrice = mysql_query($queryPrice);

    while($fetchPrice=mysql_fetch_array($resultPrice)){   
        $labPrice=$fetchPrice['labPrice'];
        $total+=$labPrice;
    }

    echo "<strong>Total:</strong>
    <strong>$total</strong>"; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-18T17:15:48.520

为什么不考虑使用 HTML5`data`属性？

HTML：

```
<?php 
// Use PHP to dynamically fetch the data-price values and generate the HTML below
?>
<span class="item" data-price="100">...</span>
<span class="item" data-price="90">...</span>
<span class="item" data-price="130">...</span>

USD: <span class="price">0</span> 
```

JS：

```
function updateCost() {
    $('.item').each(
        function() {
            if ($(this).children('input:checkbox').is(':checked')) {
                var oldPrice = parseInt($('.price').text());
                var newPrice = oldPrice + parseInt($(this).data('price'));
                $('.price').text(newPrice);
            }
        }
    );
 } 
```

*   为每个复选框调用`updateCost()`事件`onchange`
*   确保取消选中复选框会从总价中适当地减去价格！
*   **不要忘记在提交时汇总并检查价格，否则您很容易出现欺诈性购买！**

这样您就可以避免不必要的 Ajax 并且代码保持干净。抱歉，如果这不是您想要的，请告诉我，以便我能提供更好的帮助。

如果您有某种市场，成本本身正在实时更新，这将需要一些外部帮助。对于市场，只需调用`data-price`适当地更新每个项目的属性的 Ajax 函数！:)

# linux - cron 在运行 R 脚本时遇到问题

> ID：12480705
> 
> 赞同：1
> 
> 时间：2012-09-18T15:58:30.583
> 
> 标签：linux, r, cron

我有一个 R 脚本，可以从 R 内部或命令行运行得很好。它的操作非常简单。它只需要一些定期更新的数据，进行一些分析，制作一些图，然后将它们保存到磁盘。我想在某种程度上与数据更新同步地自动运行它，所以我试图在 cron 作业下运行它。在将图像写入磁盘之前，它一切正常。然后它告诉我它无法打开第一个图像，并且失败了。我已经尝试了所有我能想到的东西：检查运行目录中的权限，确保 cron 以我的身份运行，将我的 cron 命令从“R CMD BATCH”切换到“Rscript”。没有任何效果。同样，该脚本从 R 内部或从命令行运行得很好。有人对我还能做什么有任何想法吗？（顺便提一句，

有问题的代码似乎是：

```
png(file=nd_pic_image_names[1],height=720,width=720) 
```

返回的错误是：

```
Error in X11(paste("png::", filename, sep = ""), g$width, g$height, pointsize,  : 
unable to start device PNG
Calls: png
In addition: Warning message:
In png(file = nd_pic_image_names[n], height = 720, width = 720) :
 unable to open connection to X11 display ''
Execution halted 
```

我不明白“X11”的东西。我在代码中的任何地方都没有对 X11() 的引用，并且我没有尝试在打开（或尝试打开）我的 PNG 文件之前进行绘图。谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-18T16:17:37.723

开始简单：

1.  添加一个简单地执行单个命令的 cronjob，也许`format(Sys.time())`是通过 Rscript 文件——主要是为了（向你自己）证明你可以运行 R 脚本

2.  将现有代码转换为可以在命令行运行的 R 脚本。确保您对环境变量等没有依赖项

3.  将您的脚本添加为 cronjob。如果失败，请通过添加到 1 中创建的脚本来逐步完成。

# tree - 四叉树搜索不返回根

> ID：12480713
> 
> 赞同：1
> 
> 时间：2012-09-18T15:58:59.470
> 
> 标签：tree, this, quadtree

第一次来这里，希望大家帮忙。

所以我做了一个四叉树函数，给定 i=1:4 坐标 (localmaplon[i],localmaplat[i])，它搜索并返回 4 个四叉树节点，这样我就可以看到 localmap 在哪些四叉树中。

我遇到的问题是在第一个解决方案之后，它将四叉树节点设置为它搜索的四叉树而不是根节点：

我的 cout 看起来像这样：

```
i: 1 //good.
i: 10 //good.
i: 11 //good.
i: 12 //good.
i: 13 //good.
index returned: 13 //good.
index returned: 13 //good.
index returned: 13 //good.
index returned: 13 //good.
index returned: 13 //good.
0 index: 13 //good.
index: 13 <-- returns index 13! //good.
i: 13 <--Starts the next getQuadTree on index 13\. Desired effect is 1 like above code.
index returned: 13 //bad
0 index: 13 //bad
index: 13 //bad
i: 13 //bad
index returned: 13 //bad
0 index: 13 //bad
index: 13 //bad
i: 13 //bad
index returned: 13 //bad
0 index: 13 //bad
index: 13 //bad 
```

你们能帮我弄清楚我做错了什么吗！这是两个功能。这是solveLocalBuckets函数：

```
//Solve for local buckets in a local map using the quadtree    
QuadTree QuadTree::solveLocalBuckets(Robot* Bot) {
float *ptrLat;
float *ptrLon;
ptrLat=&Bot->localmaplat[0];
ptrLon=&Bot->localmaplon[0];

MatrixXf bucketMatrix(1, Bot->localmapsize);
vector <QuadTree> vecQt;
vecQt.push_back(*this);

for (int i=0; i<Tad->localmapsize; i++) {
    vecQt.push_back(vecQt[0].getQuadTree((ptrLat+i), (ptrLon+i)));
    cout << "0 index: " << vecQt[0].index << endl;
    cout << "index: " << vecQt[i+1].index << endl;
}

return vecQt[0];
} 
```

这是 getQuadTree 函数。

```
//Gets a quadtree given a latitude and longitude from a quadtree.
QuadTree QuadTree::getQuadTree(float* tlat, float* tlon) {

cout << "i: " << this->index << endl;

if (hasChild) {
    if (*tlon >= centerLon) {
        if (*tlat >= centerLat) {
            //Qaudrant 1
            if (NE->hasChild) {
                *this = NE->getQuadTree(tlat, tlon);
            } else {
                cout << "index returned: " << this->index << endl;
                return *NE;
            }
        } else if (*tlat < centerLat) {
            //Qaudrant 4
            if (SE->hasChild) {
                *this = SE->getQuadTree(tlat, tlon);
            } else {
                cout << "index returned: " << this->index << endl;
                return *SE;
            }
        } else {
            ROS_INFO("Robot latitidue data corrupt.");
        }
    } else if (*tlon < centerLon) {
        if (*tlat >= centerLat) {
            //Quadrant 2
            if (NW->hasChild) {
                *this = NW->getQuadTree(tlat, tlon);
            } else {
                cout << "index returned: " << this->index << endl;
                return *NW;
            }
        } else if (*tlat < centerLat) {
            //Quadrant 3
            if (SW->hasChild) {
                *this = SW->getQuadTree(tlat, tlon);
            } else {
                cout << "index returned: " << this->index << endl;
                return *SW;
            }
        } else {
            ROS_INFO("Robot latitidue data corrupt.");
        }

    } else {
        ROS_INFO("Robot longitutde data corrupt.");
    }
}
cout << "index returned: " << this->index << endl;
return *this;
} 
```

# android - Titanium：处理文本字段上的后退按钮事件

> ID：12480715
> 
> 赞同：0
> 
> 时间：2012-09-18T15:59:10.163
> 
> 标签：android, titanium, back-button

## 问题

我想使用钛处理文本字段上的后退按钮。

我知道窗口上有一个事件 android:back 但它不会在文本字段上触发。

如何使用钛处理文本字段上的后退按钮（或键盘隐藏事件）？

编辑：这里有一些代码和说明来说明我想说的：

## 重现步骤：

1.  单击文本字段 > 触发焦点事件，显示键盘
2.  回击按钮 > 键盘被隐藏但未调用模糊事件且文本字段未失去焦点

## 代码：

```
var textfield = Ti.UI.createTextfield();
textfield.addEventListener('android:back', function() {
  // this method is never called, so this event does not run on textfield
});

textfield.addEventListener('focus', function() {
  // this method is called at step 1
});

textfield.addEventListener('blur', function() {
  // this method is not called at step 2 because 
  // the back button only hide the keyboard but the focus is not lost
});

// what code should I use to catch event when the keyboard is hidden 
// when pressing the back button ? 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-18T21:55:20.750

`blur`每当键盘关闭时都会触发该事件。[这是它的文档。](http://docs.appcelerator.com/titanium/2.1/index.html#!/api/Titanium.UI.TextField-event-blur)

`textField`假设您创建了一个类型的对象，您可以很容易地听它`Titanium.UI.TextField`：

```
textField.addEventListener('blur', function(e) {
    var val = e.value; // Get current value when the keyboard closed (the right way) as opposed to textField.value (the wrong way)
    alert("The text is : "+value);
}); 
```

如果你想监听`android:back`事件，你必须在窗口上监听。

```
var win = Ti.UI.currentWindow; 
win.addEventListener('android:back', function(e) {
    // do crazy things
}); 
```

根据文档，这应该可以工作，如果不是钛的错误？

# android - onActivityResult 调用被中间活动延迟

> ID：12480719
> 
> 赞同：3
> 
> 时间：2012-09-18T15:59:14.453
> 
> 标签：android, android-activity

我有一个启动活动 B 的活动 A：

```
activityA.startActivityForResult(new Intent(activityA, B.class), REQUESTCODE_B); 
```

在 Activity B 中单击按钮时，会执行一个从 Aie 启动 Activity C 的方法

```
activityA.startActivityForResult(new Intent(activityA, C.class), REQUESTCODE_C); 
```

在活动 C 中单击按钮时，通过调用 finish() 将其关闭，而 B 保持活动状态。

现在我希望调用activityA 的onActivityResult() 方法，但它只在activityB 完成后调用。我可以想象这是设计使然，但是有没有办法直接让activityA知道activityC已经完成？并且没有活动 B 或 C 必须明确了解 A？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-18T17:57:03.087

这是非常糟糕的做法。当您启动 ActivityC 时，您不能确定 ActivityA 没有被 Android 破坏。Android 可以随时销毁后台活动。当您调用 ActivityC.finish() 时，ActivityA 可能不存在。然后，当您调用 ActivityB.finish() 时，Android 从活动堆栈创建 ActivityA 并为已完成的活动调用 onActivityResult() 方法（我不确定按哪个顺序）。告诉我们您无法将 ActivityC 的结果返回到 ActivityB 的原因。

# iphone - iOS 中的动画文本

> ID：12480721
> 
> 赞同：1
> 
> 时间：2012-09-18T15:59:24.720
> 
> 标签：iphone, objective-c, ios, xcode

有没有人在动画文本或字符方面有经验？是否可以从左到右为角色设置动画？在我的应用程序中，我有三个点，我想一个一个地制作动画。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-18T16:12:51.270

UILabel 类继承自[UIView](http://developer.apple.com/library/ios/#DOCUMENTATION/UIKit/Reference/UIView_Class/UIView/UIView.html#//apple_ref/occ/cl/UIView)并且可以使用可动画属性（如框架、中心和边界）进行[隐式动画。](https://developer.apple.com/library/mac/#documentation/Cocoa/Conceptual/CoreAnimation_guide/Articles/AnimatingLayers.html)这意味着只需更改这些属性即可生成动画。

# android - 如何获取拍摄日期并显示？

> ID：12480724
> 
> 赞同：1
> 
> 时间：2012-09-18T15:59:37.810
> 
> 标签：android, date

我有这个活动，第一个活动是在 sdcard 中显示图片并将其加载到 gridview 中。第二个活动是当您在 gridview 中单击图片时，它将显示图像的完整大小。我想要的是我的第二个活动，我还想显示被点击的图片的“拍摄日期”。如何获取拍摄日期并显示它。

这是我的第一个活动。

```
public class MainActivity extends Activity {

public class ImageAdapter extends BaseAdapter {

    private Context mContext;
    ArrayList<String> itemList = new ArrayList<String>();

    public ImageAdapter(Context c) {
        mContext = c;
    }

    void add(String path) {
        itemList.add(path);
    }

    @Override
    public int getCount() {
        return itemList.size();
    }

    @Override
    public Object getItem(int arg0) {
        // TODO Auto-generated method stub
        return null;
    }

    @Override
    public long getItemId(int position) {
        // TODO Auto-generated method stub
        return 0;
    }

    @Override
    public View getView(int position, View convertView, ViewGroup parent) {
        ImageView imageView;
        if (convertView == null) { // if it's not recycled, initialize some
                                    // attributes
            imageView = new ImageView(mContext);
            imageView.setLayoutParams(new GridView.LayoutParams(220, 220));
            imageView.setScaleType(ImageView.ScaleType.CENTER_CROP);
            imageView.setPadding(8, 8, 8, 8);
        } else {
            imageView = (ImageView) convertView;
        }

        Bitmap bm = decodeSampledBitmapFromUri(itemList.get(position), 220,
                220);

        imageView.setImageBitmap(bm);
        return imageView;
    }

    public Bitmap decodeSampledBitmapFromUri(String path, int reqWidth,
            int reqHeight) {

        Bitmap bm = null;
        // First decode with inJustDecodeBounds=true to check dimensions
        final BitmapFactory.Options options = new BitmapFactory.Options();
        options.inJustDecodeBounds = true;
        BitmapFactory.decodeFile(path, options);

        // Calculate inSampleSize
        options.inSampleSize = calculateInSampleSize(options, reqWidth,
                reqHeight);

        // Decode bitmap with inSampleSize set
        options.inJustDecodeBounds = false;
        bm = BitmapFactory.decodeFile(path, options);

        return bm;
    }

    public int calculateInSampleSize(

    BitmapFactory.Options options, int reqWidth, int reqHeight) {
        // Raw height and width of image
        final int height = options.outHeight;
        final int width = options.outWidth;
        int inSampleSize = 1;

        if (height > reqHeight || width > reqWidth) {
            if (width > height) {
                inSampleSize = Math.round((float) height
                        / (float) reqHeight);
            } else {
                inSampleSize = Math.round((float) width / (float) reqWidth);
            }
        }

        return inSampleSize;
    }

}

ImageAdapter myImageAdapter;

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);

    GridView gridview = (GridView) findViewById(R.id.gridview);
    myImageAdapter = new ImageAdapter(this);
    gridview.setAdapter(myImageAdapter);

    String ExternalStorageDirectoryPath = Environment
            .getExternalStorageDirectory().getAbsolutePath();

    String targetPath = ExternalStorageDirectoryPath + "/test/";

    Toast.makeText(getApplicationContext(), targetPath, Toast.LENGTH_LONG)
            .show();
    File targetDirector = new File(targetPath);

    File[] files = targetDirector.listFiles();
    for (File file : files) {
        myImageAdapter.add(file.getAbsolutePath());
    }
}

gridview.setOnItemClickListener(new OnItemClickListener() {
            public void onItemClick(AdapterView<?> parent, View v,
                    int position, long id) {

ImageView img = myImageAdapter.getView(position, v, parent);
                img.buildDrawingCache(); 
                Bitmap bmap = img.getDrawingCache();
                Intent intent = new Intent(MainActivity.this,
                        Imageviewer.class);
                Bundle bundle = new Bundle();
                    String par=myimageadpter.getpath(position);
                             bundle.putString("imagepath", par);
                intent.putExtras(bundle);
                startActivityForResult(intent, 0);

            }
        }); 
```

这是第二个活动

```
public class ImageViewer extends Activity {
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);

    Bundle bundle = this.getIntent().getExtras();

    String s=bundle.getString("imagepath");
    Bitmap Imagefrompath = BitmapFactory.decodeFile(s);
            ImageView img=(ImageView) findViewById(R.id.imageView1);
            img.setImageBitmap(Imagefrompath );

}

} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-18T18:37:57.323

1.  检查文件是否存在于您的路径中，
2.  尝试获取文件创建日期（如果可用），
3.  如果创建的日期不可用，则选择上次修改日期。

.

```
File file = new File(filePath);
if(file.exists()) //Extra check, Just to validate the given path
{
    ExifInterface intf = null;
    try 
    {
        intf = new ExifInterface(filePath);
        if(intf != null)
        {
            String dateString = intf.getAttribute(ExifInterface.TAG_DATETIME);
            Log.i("PHOTO DATE", "Dated : "+ dateString); //Display dateString. You can do/use it your own way        
        }
    }
    catch (IOException e)
    {
    }
    if(intf == null)
    {
        Date lastModDate = new Date(file.lastModified());
        Log.i("PHOTO DATE", "Dated : "+ lastModDate.toString());//Dispaly lastModDate. You can do/use it your own way
    }
} 
```

# javascript - Bootstrap Typeahead 中的数据源不起作用

> ID：12480726
> 
> 赞同：2
> 
> 时间：2012-09-18T15:59:41.343
> 
> 标签：javascript, jquery, twitter-bootstrap

这里非常直截了当的问题。我这里有这段代码。

```
<script src="{{ STATIC_URL }}js/typeahead_data_countries.js"></script>

<script type="text/javascript">
$(document).ready(function(){
    $('.typeahead').typeahead({
       source: country_array
   })
});

</script> 
```

其中 typeahead_data_countries 是： var country_array = new Array("Afghanistan", "Albania", "Algeria",...);

变量被正确加载，但整个 typeahead 不起作用。但是，如果我这样做：

```
<input type="text" style="margin: 0 auto;" data-provide="typeahead" data-items="4" data-source='["Afghanistan", "Albania"]'/> 
```

它有效，但我不想要那个......

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-18T16:37:25.707

我认为您的示例中的问题基于混合两种不同的方式来初始化typahead（js和data-*）。这个例子对我有用：

```
<input class="typeahead" type="text"/>
<script type="text/javascript">
     $(function(){
          $('.typeahead').typeahead({
             items:4,
             source: ['Aaaa', 'Abbb', 'Accc']
          });
     });
</script> 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-12-18T11:15:52.007

有趣的是，我得到这个工作的唯一方法是删除 $(function(){ }): 围绕其他所有内容。因此：

```
<input class="typeahead" type="text"/>
<script type="text/javascript">

    $('.typeahead').typeahead({
        items:4,
        source: ['Aaaa', 'Abbb', 'Accc']
    });

</script> 
```

# sql - Oracle PL/SQL 存储过程

> ID：12480731
> 
> 赞同：1
> 
> 时间：2012-09-18T15:59:59.767
> 
> 标签：sql, oracle, sqlplus

我正在尝试为项目创建两个存储过程，但在两个表上都出现错误：

```
Member (MemberID, MembershipID, name, city.....)
RentalQueue (MovieID, DVDID, DateAdded)
DVD (DVID ID, Name..)
Rental(RentalID, MemberID, DVDID RequestDate,ShippedDate,ReturnDate) 
```

二 存储过程描述和代码

1.) 为客户的出租队列添加标题的 PL/SQL sp。此过程应将客户 ID 和电影标题 ID 以及电影在队列中的位置作为 IN 参数。该过程还应确保不能添加重复的标题，您需要在代码中添加一些错误处理。

```
Create procedure add_to_queue (customerID number, titleID number) as
v_count number;
begin
        select count(memberid,dvdid) 
        from rentalqueue 
        where memberid=customerid and dvdid=titleid;

     if v_count = 1 then
        raise_application_error(20000, 'This film is already  in the rentalqueue for 
        this user');
     else 
          execute immediate ’insert into rentalqueue          
          values(’||customerid||’,’||titleid||’,’||sysdate||’)’;
     end if;
end; 
```

2.) PL/SQL 存储过程，一旦请求发货，就从客户的租赁队列中删除一个标题。此过程应将客户 ID 和电影标题 ID 作为 IN 参数。

```
 Create procedure delete_from_queue (customerID number, titleID number) as
    v_count number;
begin
        select count(memberid,dvdid) 
        from rentalqueue 
        where memberid=customerid and dvdid=titleid;

        if v_count = 1 then
           execute immediate ’delete from rentalqueue 
           where memberid=’||customerid||’ and dvdid=’||titleid;
        else 
        raise_application_error(20000, 'This film was not in the rentalqueue for this  
        user');
       end if;
 end; 
```

编译错误我得到两个如下。我知道前两个错误与我所做的 SELECT 语句有关，但不知道出了什么问题。

```
Error(4,20): PL/SQL: SQL Statement ignored
Error(4,27): PL/SQL: ORA-00909: invalid number of arguments
Error(6,41): PLS-00103: Encountered the symbol "’" when expecting one of the
    following:     ( - + case mod new not null <an identifier>    
<a double-quoted delimited-identifier> <a bind variable>    continue avg count current
 exists max min prior sql stddev    sum variance execute forall merge time timestamp 
interval    date <a string literal with character set specification>
    <a number> <a single-quoted SQL string> pipe    <an alternatively-quoted string
 literal with character set specification>    <an alternatively 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-18T16:14:55.727

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-18T16:32:24.937

# android - IOS Mobile Safari背景图片位置与CSS

> ID：12480732
> 
> 赞同：2
> 
> 时间：2012-09-18T15:59:59.737
> 
> 标签：android, css, ios, mobile, mobile-safari

这似乎是一个奇怪的问题，我希望我只是忽略了一些东西，但我有一个与背景图像的链接，它位于它的左侧。下面的样式在桌面浏览器和 Android 浏览器中运行良好，但似乎不会影响移动 safari 中的位置。

```
.load-more-link.ajax-spinner {
background: url(images/ajax-loader-dark.gif) no-repeat 20%;
margin: 0 auto;
width: 200px;
} 
```

我是否忽略了某些事情或有人遇到过类似的问题？如何在移动 Safari 中定位此背景图像？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-18T14:57:29.017

您应该使用 X 和 Y 坐标完成背景样式快捷方式以解决任何歧义：

```
background: url(images/ajax-loader-dark.gif) no-repeat 20% 0%; 
```

或者你可以单独写出 position 属性：

```
background-image: url(images/ajaxloader-dark.gif);
background-position: 20% 0%;
background-repeat:no-repeat; 
```

*编辑*

当然，您可以尝试摆弄这些百分比。我不知道您的标记是什么样的，但是如果图像在其他东西后面，则图像可能会被遮挡。

# authentication - IIS/Coldfusion：匿名内容的身份验证请求

> ID：12480734
> 
> 赞同：3
> 
> 时间：2012-09-18T16:00:03.517
> 
> 标签：authentication, iis, coldfusion

我们有一个需要身份验证才能访问的管理站点。网站上的页面被包裹在一个 Coldfusion 自定义标签中，其中包括所有样式和 JS，以及一些其他信息。

我最近制作了自定义标签包装器的副本。我将副本放在与原始文件相同的目录中（通过 Coldfusion 管理员映射），并重命名了文件。我在新的自定义标签中添加了一些 css/js 包含。我将网站中使用的自定义标签从旧的更改为新的。

现在，当非管理员用户访问该站点时 - 以前访问过该站点并且在该站点具有旧的自定义标签包装器时没有任何问题的相同用户 - 他们被要求多次登录。他们可以点击取消，并且一些 CSS 样式不呈现，但页面的其余部分显示正常。

我自动假设问题出在我添加到新自定义标签的新 CSS 或 JS 文件之一中。但是，我在 IIS 中分别检查了每个文件，它们都打开了匿名访问。即使从自定义标签中删除它们也不会改变用户被要求登录的事实（通常每次访问页面时 3 次）。

对所有现有的 CSS 和 JS 文件启用匿名访问。我分别检查了每个文件（不仅仅是在目录级别，也设置为匿名访问）。新的自定义标签本身是否与它有关。自定义标签是通过 ColdFusion 管理员映射的，所以我不确定如何检查它的 IIS 身份验证设置......它不会作为网站的一部分显示在那里。

还有什么可以查的？？？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-19T00:11:43.823

这听起来像是 IIS 身份验证问题，而不是冷融合问题。如果标签映射不正确，您将收到冷融合错误，提示未找到自定义标签。

如果您复制了文件，那么您至少需要将 IUSR 添加到该文件中，否则将没有人可以访问。

“IUSR_ComputerName 用户帐户用于匿名访问 IIS。默认情况下，当用户访问使用匿名身份验证的网站时，该用户将映射到 IUSR_ComputerName 帐户。”

[http://www.microsoft.com/technet/prodtechnol/WindowsServer2003/Library/IIS/3648346f-e4f5-474b-86c7-5a86e85fa1ff.mspx?mfr=true](http://www.microsoft.com/technet/prodtechnol/WindowsServer2003/Library/IIS/3648346f-e4f5-474b-86c7-5a86e85fa1ff.mspx?mfr=true)

仔细检查 IIS 中的网站条目是否 32 位或 64 位选项对于您的冷融合实例是正确的（如果您有一个 64x 框，您可能有一个 32 位冷融合实例），因此需要将其设置为 32 位 - 这有当基于 Windows 的身份验证和匿名身份验证都已打开时，对我造成了与权限相关的问题。

# version-control - 可以/应该避免频繁的合并（例如通过变基）？

> ID：12480736
> 
> 赞同：3
> 
> 时间：2012-09-18T16:00:10.383
> 
> 标签：version-control, mercurial, merge, branch, dvcs

我正在一个由 5 名开发人员组成的团队中开展一个更大的项目，我们使用 Mercurial 作为 VCS。

我们都倾向于在本地工作和提交，直到我们认为可以推送一个功能/修复，然后合并并推送我们的更改。我通常每天推送（并因此与远程合并）几次，其他大多数人也是如此。

这通常会导致“合并混乱”：多个开发人员拉取、合并和推送变更集。生成的历史不是很漂亮，有时看起来像这样：

![合并杂波](../Images/b3b84ef055fb1f9850818f5eb6e11a10.png)

我怀疑人们是否可以在混乱中分离出特定的变更集，或者甚至弄清楚它是如何/以何种方式影响的（至少我对前景感到不寒而栗）。

如果合并是必要的，我想上面的历史会很好，但是大多数这些合并可以通过重新定位（安全地）避免，因为每个开发人员都在处理与其他任务或多或少隔离的特定任务。

**实际问题：**

*   VCS 历史看起来像上面这样“正常”吗？应该避免这样的历史吗？
*   如何避免这样的历史？

关于“避免”部分：由于我们处理的任务有些孤立（后端、前端、Web），我们可以将它们拆分为分支，甚至可能是单独的存储库。不过，这些项目并不是完全独立的，所以我认为分成几个 repos 会带来更多的痛苦而不是收获。我不确定命名分支是否会更好，因为从那时起我们经常在那里有 3 个以上的分支，这些分支必须经常合并到主干中。

变基似乎是一种选择，特别是因为许多变更集彼此完全独立——但这将决定是否变基的负担交给开发人员。可能会有冲突，然后一个人毕竟必须合并。这很可能会导致人们一开始就没有变基，所以我们又回到了现在的状态。

现在我想不出另一种让历史看起来更干净的选择。现在可能不是什么大问题，但是当突然有 20 个开发人员时会发生什么？如果历史是一个大迷宫，那它的意义何在？如果有几十个交叉点，我认为很难跟踪变更集的影响。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-18T17:33:11.820

您所看到的或多或少是，当您有多个开发人员都在同一个存储库上工作时应该发生什么。

唯一真正的解决方法是重写历史，特别是如果你已经进行了本地提交。你需要拉，变基，然后推。

编辑：关于你的修订图有一件事让我印象深刻。有*很多*分支从这些分支分支并在这些子分支之间合并。看起来，嗯，很混乱。如果您的分支和合并像看起来那样混乱，那么您的团队可能会从更结构化的分支和合并方法中受益。

启发[git-flow](https://github.com/nvie/gitflow)的[“成功的 Git 分支模型”](http://nvie.com/posts/a-successful-git-branching-model/)也可以应用于 Mercurial 存储库。 [hgflow](https://bitbucket.org/yinwm/hgflow)是一个有助于实现它的扩展。

如果这看起来结构太多，那么您总能找到另一种前进的方式。但是，可能值得投入一些想法并引起您团队的注意。

另请参阅：[commit-pull-merge-push 或 pull-merge-commit-push？](https://stackoverflow.com/questions/3241018/commit-pull-merge-push-or-pull-merge-commit-push)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-20T10:00:24.093

是的，使用**[rebase](http://mercurial.selenic.com/wiki/RebaseExtension)**并避免*Noisy*合并它的**安全**（自 hg-2.1 起）和**简单**的.

你是一个由 5 名开发人员组成的小团队。上述所有合并很可能发生，因为*“我在部分 X 上做了一些提交，而 Bob 在部分 Y 上工作”*。这些合并不会带来任何有用的信息，也没有人关心独立使用你的*微分支*。

当分支具有良好的语义时（例如：用于修复错误的*稳定分支、用于新功能的**默认*分支）或当更改需要很长时间才能*成熟*并值得与其他更改合并时，将分支保留在历史记录中很有用。其他合并对我来说只是噪音。

自从引入[阶段](http://mercurial.selenic.com/wiki/Phases)（Mercurial 2.1）以来**，使用 rebase 是非常安全的，**因为（默认情况下）Mercurial 将只允许您对本地变更集进行 rebase。您的新工作流程可能如下所示：

*   克隆
*   黑客
*   犯罪
*   黑客
*   犯罪
*   拉
*   变基
*   *测试*
*   推

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-18T18:12:01.860

您正在查看太多抽象级别，然后抱怨它看起来太复杂。有一个选项可以将您的视图限制在分支的主线中。用它。仅在您有特定需求时才深入研究合并的分支。拥有可用且不需要的历史记录比使用变基销毁它要好。

# java - 如何将方法重构为仅接受类型子集的通用方法？

> ID：12480741
> 
> 赞同：3
> 
> 时间：2012-09-18T16:00:30.727
> 
> 标签：java, generics, refactoring

在成功编写了一种方法来完成它应该做的事情之后（下面大大缩短了示例），我想将它重构为不限于返回 a `List`of`MyEntity`而是返回 a `List<SomeType extends MyParentEntity>`。所以它应该只能接受那些扩展 my`MyParentEntity`但能够指定另一种类型（`List<MyOtherEntity>`等`List<MyAwesomeEntity>`）的类型。

缩短示例：

```
 public static List<MyEntity> getFavList(Context context) {

        String prefKey = buildKey( new MyEntity() );
        List<MyEntity> entityList = new ArrayList<MyEntity>();

        SharedPreferences settings = context.getSharedPreferences(prefKey, 0);

        GSON gson = new GSON();
        MyEntity entity = gson.fromJson(settings.getString(0, null), MyEntity.class);

        entityList.add(entity);

        return entityList;
    } 
```

我搜索了很多，但我没有找到正确的方法来使这项工作没有任何编译器错误。我将不胜感激任何导致解决方案的指针。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-18T16:33:36.320

您将需要传入`Class`和要传递给的对象`buildKey`。

```
public static <T extend MyParentEntity> List<T> getFavList(
    Context context, Class<T> clazz, T key
) {

    String prefKey = buildKey(key);
    List<T> entityList = new ArrayList<T>();

    SharedPreferences settings = context.getSharedPreferences(prefKey, 0);

    GSON gson = new GSON();
    MyEntity entity = gson.fromJson(settings.getString(0, null), clazz);

    entityList.add(entity);

    return entityList;
} 
```

（我不知道`buildKey`应该是什么。）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-18T16:18:02.743

必须从方法参数中获取有关具体实现的信息`MyParentEntity`（不能从返回类型推断 - 废话）。所以你必须修改参数。

我会尝试：

```
public static <T extends MyParentEntity> List<T> getFavList(Context context, Class<T> clazz) {

        String prefKey = buildKey( clazz.newInstance() );
        List<T> entityList = new ArrayList<T>();

        SharedPreferences settings = context.getSharedPreferences(prefKey, 0);

        GSON gson = new GSON();
        MyEntity entity = gson.fromJson(settings.getString(0, null), clazz);

        entityList.add(entity);

        return entityList;
    } 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-18T17:19:08.043

由于 Java 具有类型擦除（在此处阅读有关它的内容[http://docs.oracle.com/javase/tutorial/java/generics/erasure.html](http://docs.oracle.com/javase/tutorial/java/generics/erasure.html)），因此您将无法轻松地获取给定的类型参数`List<Something>`.

Java中有两个地方可以欺骗类型擦除。一种是通过创建已参数化的事物的子类。Guava 和 Gsons 都使用了这种技巧`TypeToken`。

请参阅下面的示例：

```
List<MyThing> l = gson.fromJson("[{}, {}]", new TypeToken<List<MyThing>>(){}.getType()); 
```

请注意，您在这里创建了一个匿名类，它派生自参数化的 TypeToken - 正如我之前解释的那样，这允许我们在**Runtime**`List<MyThing>`期间保留 Type 。

 **更多信息可以在 Gson 文档中找到：[https](https://sites.google.com/site/gson/gson-user-guide) ://sites.google.com/site/gson/gson-user-guide 或 StackOverflow，这里：[如何使用 GSON 或 Java 中的其他 JSON 库反序列化列表？](https://stackoverflow.com/questions/4318458/how-to-deserialize-a-list-using-gson-or-another-json-to-java)

PS：我看到你只想返回这个列表中的一个元素（现在？）......？我的回答是实际上从 JSON 中解组这样的元素列表——我猜你接下来会这样做吗？;-) 如果您只想返回“列表中的单个元素”，请使用`Collections.singletonList()`或 Guava `ImmutableList.of()`，因为它们是不可变的（一件好事）并且内存占用比“普通列表”低得多。

干杯，康拉德

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-18T16:08:03.543

正如@keyboardsurfer 已经指出的那样，泛型信息在运行时不可用，因此您还应该向方法提供具体类以便能够实例化它（无论如何您都需要它才能在 中使用它`gson.fromJson()`）。

要做到这一点，只需传递`Class`of `T`，这样您就可以参考`T.class`和制作`new T()`. 以下问题有更多详细信息：[Instantiating a generic class in Java](https://stackoverflow.com/q/1090458/851811)。

例如（根据需要添加`try/catch`子句`newInstance()`）：

```
public static <T extends MyParentEntity> List<T> getFavList(Context context, Class<T> clazz) {

    String prefKey = buildKey( clazz.newInstance() );
    List<T> entityList = new ArrayList<T>();

    SharedPreferences settings = context.getSharedPreferences(prefKey, 0);

    GSON gson = new GSON();
    T entity = gson.fromJson(settings.getString(0, null), clazz);

    entityList.add(entity);

    return entityList;
} 
```

编译器将接受

```
List<MyEntity> list = getFavList(ctx, MyEntity.class);
List<MyAwesomeEntity> list = getFavList(ctx, MyAwesomeEntity.class); 
```**

# android - 如何阻止数组适配器在 Android 中加载整个数据列表？

> ID：12480747
> 
> 赞同：0
> 
> 时间：2012-09-18T16:01:00.787
> 
> 标签：android

因此，我正在编写无尽适配器的 hacky 版本，但我想检查是否可以在特定位置或计数之后停止加载数据，即使我已经向其传递了大量数据列表。

我的意思是这样的：

```
public View getView(final int position, View convertView, ViewGroup parent) {
        View v = convertView;
        if (position(count) < 25)
               {
                       load data into the layout.
        }
           return convertView;
} 
```

目前，如果我尝试这样的事情，我会得到一个空指针异常。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-18T17:51:58.183

您可能需要在[getCount()](http://developer.android.com/reference/android/widget/Adapter.html#getCount%28%29)中指定要显示的视图数量，并在您希望显示更多视图时增加它。像这样的东西可能会起作用（注意：我还没有测试过）

```
private class MyAdapter extends BaseAdapter {
    private int currentMax;
    private ArrayList<MyType> items;

    public MyAdapter(int max, ArrayList<MyType> items){
        currentMax = max;
        this.items = items;
    }

    public void showMore(int howMany){
        currentMax += howMany;
    }

    @Override
    public int getCount(){
        return currentMax;
    }

    /* snip (getview etc.) */
} 
```

然后使用和增加

```
MyAdapter adapter = new MyAdapter(25, items);
getListView().setAdapter(adapter);

/* you now want to show more */

// Increase limit
adapter.showMore(10);
// Let the adapter know something's chagned
adapter.notifyDataSetChanged(); 
```

# qt - 从 QGraphicsScene 中删除单个项目/QLineF

> ID：12480750
> 
> 赞同：4
> 
> 时间：2012-09-18T16:01:12.977
> 
> 标签：qt, drawing, qgraphicsscene

`qgraphicsscene`我已经在with中绘制了一个网格`QLineF`，您可以将自定义`qgraphicsitems`作为网格中的块添加到场景中。我希望能够以不同的间距和索引重绘网格（索引只是较粗的线）。

我的问题是我不知道如何删除这些线条。我可以从场景中删除所有内容，但这需要做太多工作，因为我必须将所有自定义项目复制到一个数组中，然后将它们重新添加到场景中。我尝试将指针列表放入行中，但无法删除指针。我还考虑将这些行作为子项添加到 a`qgraphicsitem`并删除该项目，这将导致删除所有行，但您不能将父项设置为行。

如何从 a 中删除特定的行组件`QGraphicsScene`？

**像这样：`scene->removeItem(..pointer..);`我错误地将结果捕获`scene->addItem(..)`为对象，然后将其存储为 &reference。当我将结果存储为指针时，我能够再次操作该项目。**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-15T09:39:26.510

您可以使用 QGraphicsItemGroup - [http://qt-project.org/doc/qt-4.8/qgraphicsitemgroup.html](http://qt-project.org/doc/qt-4.8/qgraphicsitemgroup.html)，类似于...

```
void Grid::addVerticalLineAt(qreal xCoord)
{
    QRectF sceneRect = scene()->sceneRect();
    QGraphicsLineItem* line = scene()->addLine(xCoord, mapFromScene(sceneRect.top()), xCoord, mapFromScene(sceneRect.bottom()));
    (QGraphicsItemGroup*)(this->gridLines)->addToGroup(line);
}
void Grid::Refresh(qreal p_Scale)
{
    delete this->gridLines;                     //deletes all lines underneath
    gridLines = new QGraphicsItemGroup(this);   //construct this _before_ you start calling addXXXLineAt
    qreal spacing = BASIC_SPACING * p_Scale;
    for(qreal curXCoord = sceneRect.left(); curXCoord < sceneRect.right(); curXCoord += spacing) //each spaced point in scenerect 
    {
        addVerticalLineAt(curXCoord);
    }
} 
```

... 应该管用。

另一种方法是添加另一个名为 Grid 的 QGraphicsItem，并通过在 QGraphicsLineItem ctor 中设置父项，将所有 QLineF 分配给该项目。

# ios5 - 如何将现有的 iPhone/iPad 应用程序升级到 iOS6 和 iPhone 5 兼容

> ID：12480755
> 
> 赞同：2
> 
> 时间：2012-09-18T16:01:38.917
> 
> 标签：ios5, ios6, iphone-5

我想知道在这个阶段是否真的有必要让我们正在开发的应用程序与 iOS6 和 iPhone5 兼容。我正在开发一个处于最后阶段的 iPhone 应用程序。在 10 天内，我必须将其提交到应用商店。那么，如果有必要让我们现在/正在开发的应用程序兼容iOS6和iPhone5，应该采取哪些步骤呢？如果没有必要，那么我应该采取哪些其他预防措施？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-18T18:51:37.953

您需要使用 Xcode 4.5 GM。要在 iPhone 5 和新 iPod 上启用新分辨率，您需要提供适当大小的启动图像。您还必须确保您的视图独立于分辨率并正确调整大小。你可以在模拟器上测试。

由于您将使用新的 Xcode，您不妨“现代化”您的代码以使用[新的 Objective C 文字语法](http://clang.llvm.org/docs/ObjectiveCLiterals.html)来处理数组、字典和`NSNumber`对象。这将使您的代码更具可读性（这可能值得商榷，但这是我的观点）。这些是编译器添加的，应该适用于任何 iOS 目标。

其他 SDK 添加（例如自动布局支持）可能与您无关，因为您现在也希望针对较旧的 iOS 设备。但是值得看一下文档来熟悉。

视图和窗口的自动旋转流发生了变化。再次检查文档以了解更改以及如何为 iOS6 做准备。

# android - 在 Android 上的 USB 设备连接上启动应用程序

> ID：12480757
> 
> 赞同：0
> 
> 时间：2012-09-18T16:01:44.390
> 
> 标签：android

我有 2 台设备 mk802（android 设备）和 ACS122（rfid 读卡器）。我想开发可以做这些事情的小型应用程序，但首先我想问一下当我将阅读器插入 mk802 时是否可以自动启动应用程序。

我可以在 usbmanager 的文档中看到 ACTION_USB_ACCESSORY_ATTACHED。那么我可以创建一些可以识别设备（ACS122）的侦听器（意图？），如果是这样，它将启动我的应用程序？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-18T20:33:31.820

如果您的 Android 设备支持它，您可能无需编写任何代码就可以做到这一点，因为我的 Sony 有一个应用程序是为他们的设备设计的，但在 Google Play 上可用，称为[liveware](https://play.google.com/store/apps/details?id=com.sonyericsson.extras.liveware)。它可能只能在最新版本的 ICS 上运行，但如果您能找到较旧的 liveware 版本，它应该可以在早至 2.3 的设备上运行。

连接设备后，它将提示您选择一个应用程序以在将来连接设备时启动。

您也可以按照上面的原始想法编写代码。这在示例 USB 程序“launcher”中得到了很好的证明，该程序从 12 级开始随 API 一起提供。

我相信，您可能会遇到“附件”意图，因为只有符合 Android USB 附件扩展的附件才会被检测到。也就是说，如果您实际上是在主机模式下运行，那么要查找的是“ACTION_USB_DEVICE_ATTACHED”，根据我的经验，这更有可能对您有用。

# entity-framework - EF5 DB first-在创建上下文对象时出现错误，即表上没有键但有

> ID：12480758
> 
> 赞同：0
> 
> 时间：2012-09-18T16:01:47.130
> 
> 标签：entity-framework

我有一个现有的表，已带到设计器表面 (EDMX)。当我去添加代码生成对象并选择 EF 5.x 自我跟踪实体时，我收到一个错误，即表上没有定义 ket，即使实际表中有一个简单的标识字段。该键还显示在设计器中，并在属性中标记为实体键。

我唯一能想到的是该字段的名称可能会导致问题。（“唯一标识”）

有任何想法吗？蒂亚杰

这是相关表的创建脚本

```
CREATE TABLE [MySchema].[ActivityStaging](
[UnqID] [int] IDENTITY(1,1) NOT NULL,
[SEQN] [nvarchar](10) NULL,
[SFDCID] [nvarchar](32) NOT NULL,
[IMISID] [nvarchar](10) NULL,
[RELATEDTOIMISID] [nvarchar](10) NULL,
[ASSIGNEDTO] [nvarchar](40) NULL,
[ACTIVITYTYPE] [nvarchar](40) NOT NULL,
[SUBJECT] [nvarchar](80) NOT NULL,
[ACTIVITYDATE] [datetime] NOT NULL
 CONSTRAINT [PK_ActivityStaging] PRIMARY KEY CLUSTERED 
(
[UnqID] ASC
)WITH (PAD_INDEX = OFF, STATISTICS_NORECOMPUTE = OFF, IGNORE_DUP_KEY = OFF, ALLOW_ROW_LOCKS = ON, ALLOW_PAGE_LOCKS = ON) ON [PRIMARY]
) ON [PRIMARY] TEXTIMAGE_ON [PRIMARY]
GO 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-18T16:08:55.353

身份字段不是主键。您可以编写表格并将其粘贴到此处吗？我想查看定义的键以及它的数据类型。

# e-commerce - 将 Sitecore 电子商务与 Chase Paymentech Orbital 集成

> ID：12480759
> 
> 赞同：2
> 
> 时间：2012-09-18T16:01:48.263
> 
> 标签：e-commerce, authorization, sitecore, payment-gateway

我一直在研究支付网关，例如 authorize.net 和 Orbital（Chase Paymentech 的网关）。我的项目范围主要基于 Sitecore 电子商务模块的使用，该模块内置了 authorize.net，但是：

我想知道如果客户是 Chase Merchant，是否可以将 Sitecore 电子商务模块与 Orbital 支付网关集成？

**更新**：经过更多研究，我注意到轨道网关已与不同的购物车集成，但我不知道如何确定是否可以利用 Sitecore 电子商务。查看轨道 API。

**更新 2：Chase Orbital** Gateway 有一个托管支付服务，允许将托管支付页面用作商家网站上的结帐，并带有演示模板（网站上的实际页面）。我认为这是一个很好的第一步。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-23T19:57:16.137

Chase 实际上支持与 authorize.net 集成作为实现选项之一。但是，这样做的一个主要缺点是您必须拥有两个不同的帐户，一个用于 authorize.net，一个用于 Chase。

Chase 还支持使用嵌入式表单（使用 iframe）、重定向到其网站上的子域（可以自定义为看起来就像您的网站一样）以及用于处理付款的自定义 Web 服务。

很抱歉，我无法提供更多细节 - 我在 Chase 与 Sitecore 的电子商务模块集成方面的经验相当有限。所有这些选项都可以通过在 API 中研究它们的实现或联系 Chase 来探索。

祝你好运！:)

# python - 哪个容器代表对象的双行列表？

> ID：12480760
> 
> 赞同：1
> 
> 时间：2012-09-18T16:01:49.357
> 
> 标签：python, qt

我有一个对象数组，它们将在 UI 中由两行 UI 元素表示。第一行将由 a `QLabel`、 some`QPushButtons`和 a组成`QComboBox`。第二行将是一长`QLineEdit`。当对象被添加到底层数组或从底层数组中删除时，或者当这些对象的属性发生变化时，容器应该能够被更新。哪个 Qt 小部件将是提供这些对象的可滚动列表的首选容器？

两个明显的容器是`QListView`or `QTableView`。然而，这些似乎都没有清楚地处理双排概念，特别`QLineEdit`是影响整个第二排的长。

# android - 如何使 ListView 的页眉或页脚不可点击

> ID：12480762
> 
> 赞同：33
> 
> 时间：2012-09-18T16:02:06.203
> 
> 标签：android, listview, android-listview

我正在`ListView`使用方法`setHeaderView()`和`setFooterView()`和 a向 a 添加页脚和页眉视图`ViewInflater`。这工作得很好。

但是如何防止页眉或页脚视图触发`onListItemClick`事件？当然，我可以捕捉事件并检查它是来自页眉还是页脚，但这只能解决问题的一部分，因为单击时页眉和页脚仍然保持焦点。

* * *

## 回答 #1

> 赞同：65
> 
> 时间：2012-09-18T16:22:42.133

只需使用[ListView#addHeaderView(View v, Object data, boolean isSelectable);](http://developer.android.com/reference/android/widget/ListView.html#addFooterView%28android.view.View,%20java.lang.Object,%20boolean%29) 和匹配`addFooter()`方法。

* * *

**参数的目的`Object data`。**

ListView 源代码将`data`参数描述为：

> 支持视图的数据。这是从 ListAdapter#getItem(int) 返回的。

这意味着如果我使用`listView.getAdapter().getItem(0);`它将`data`从我们的标题中返回对象。

* * *

我将用一个例子来详细说明：

```
listView = (ListView) findViewById(R.id.list);
String[] array = new String[] {"one", "two", "three"};
adapter = new ArrayAdapter<String>(this, android.R.layout.simple_list_item_1, array); 
```

接下来让我们添加一个标头并设置适配器：

```
listView.addHeaderView(view, "Potato", false);
listView.setAdapter(adapter); 
```

稍后如果我们问：

```
Log.v("ListAdapter", listView.getAdapter().getItem(0));  // output: "Potato" 
Log.v("ArrayAdapter", adapter.getItem(0));               // output: "one" 
```

# c# - 如何重构表单线程的代码？

> ID：12480767
> 
> 赞同：0
> 
> 时间：2012-09-18T16:02:17.067
> 
> 标签：c#, multithreading, forms, refactoring

在我的主要形式中，我有一个计时器，它每隔几秒更新一次文本框中的值，代码如下：

```
public partial class Form1 : Form
{
    static int column = 2;
    static int row = 100;
    System.Windows.Forms.TextBox[,] textbox = new System.Windows.Forms.TextBox[column, row];

    delegate void StringParameterDelegate(int j, string value);
    DisplayTimer displayTimer = new DisplayTimer();
    System.Threading.TimerCallback displayCallback;
    System.Threading.Timer displayTimerThread;

    public Form1()
    {
        InitializeComponent();

             //set the array for name and update time 

        for (int k = 0; k < column; k++)
        {
            for (int j = 0; j < row; j++)
            {
                textbox[k, j] = new System.Windows.Forms.TextBox();
                textbox[k, j].Size = new Size(160, 18);
                textbox[k, j].Name = "textbox_" + k + "_" + j;

                if (j >= 100)
                {
                    textbox[k, j].Location = new System.Drawing.Point((k * 160) + 20, (j * 18) + 30);
                }

                textbox[k, j].Visible = true;
                Controls.Add(textbox[k, j]);
            }
        }

        displayCallback = new System.Threading.TimerCallback(timeDisplay);
        displayTimerThread = new System.Threading.Timer(displayCallback, displayTimer, 3000, 3000);
                // more code
    }

    public void timeDisplay(object timerObject)
    {
        DisplayTimer t = (DisplayTimer)timerObject;  

        for (int j = 0; j < t.row; j++)
        {
            string value = t.outputTime[j].ToString("yyyy/MM/dd HH:mm:ss.fff");
            writeToTextBox(j, value);
        }
    }

    public void writeToTextBox(int j, string value)
    {
        if (InvokeRequired)
        {
            BeginInvoke(new StringParameterDelegate(writeToTextBox), new object[] { j, value });
            return;
        }
        // Must be on the UI thread if we've got this far
        textbox[1, j].Text = value;
    } 
```

现在上面的代码运行良好，没有发生错误。但是我的程序中有 3 个表单使用相同的方法 timeDisplay 和 writeToTextBox，我必须在表单中复制代码 3 次。我试图重构这两种方法并将其放入一个新类中。我的 writeToTextBox 方法出现以下错误。

> 错误 1 ​​当前上下文中不存在名称“InvokeRequired”
> 
> 错误 2 当前上下文中不存在名称“BeginInvoke”
> 
> 错误 3 当前上下文中不存在名称“文本框”

我如何有效地重构它？一些工作代码片段将非常有帮助，在此先感谢

编辑：下面是问题的正确代码：它运行良好，没有任何错误。谢谢都铎王朝

```
class DisplayTimer
{
    public int numberOfRow = 0;
    public int column = 0;
    public DateTime[] outputTime;
    public System.Windows.Forms.TextBox[,] textbox;
    delegate void StringParameterDelegate(TextBox textbox, string value);

    public void timeDisplay(object timerObject)
    {
        DisplayTimer t = (DisplayTimer)timerObject;

        for (int j = 0; j < t.numberOfRow; j++)
        {
            string value = t.outputTime[j].ToString("yyyy/MM/dd HH:mm:ss.fff");

            if (value != "0001/01/01 00:00:00.000")
            {
                writeToTextBox(textbox[column, j], value);
            }
        }
    }

    public void writeToTextBox(TextBox textbox, string value)
    {
        if (textbox.InvokeRequired)
        {
            textbox.BeginInvoke(new StringParameterDelegate(writeToTextBox), new object[] { textbox, value });
            return;
        }
        // Must be on the UI thread if we've got this far
        textbox.Text = value;
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-18T16:25:38.220

如果将方法移到`Form1`类之外，则至少需要将控件作为参数添加到方法中，因为`BeginInvoke`和`InvokeRequired`被调用`this`。您可以只传递文本框数组并在其上调用调用：

```
public void writeToTextBox(int j, string value, TextBox[,] textBoxes)
{
    TextBox textBox = textBoxes[1, j];
    if (textBox.InvokeRequired)
    {
        textBox.BeginInvoke(new StringParameterDelegate(writeToTextBox), new object[] { j, value, textBoxes });
        return;
    }
    // Must be on the UI thread if we've got this far
    textBox.Text = value;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-18T16:25:40.980

InvokeRequired 和 BeginInvoke 需要适当的命名空间（使用...）。

textbox 是 Forms 类的变量，需要传递到您的新类中。

# php - 尝试在 Ajax 之前/期间调用 dimmer/throbber

> ID：12480768
> 
> 赞同：0
> 
> 时间：2012-09-18T16:02:21.667
> 
> 标签：php, ajax, jquery, throbber

这是我想要/正在尝试做的事情。

有一个表格。该表单有一个提交按钮。提交按钮的 onMouseDown() 事件是：

```
<input type='submit' value='Search' name='save' id='save' onmousedown = 'DimOn("test.php", "SearchResultDiv")' /> 
```

现在，单击按钮后，我希望它按确切顺序执行三件事。

1) 使页面变暗。

2) 执行 Ajax 查询，并填充搜索结果。

3) 删除 Dim。

**编辑：**

甚至尝试在 jQuery 对象中使用 beforeSend 和 Complete 事件

```
function DimOn(sUrl, sElement) 
{
    jQueryAjax(sUrl, sElement);
}

function jQueryAjax(sUrl, sElement) 
{
    $.ajax({
        url: sUrl,
        type: 'GET',
        async: false,
        cache: false,
        timeout: 1000,
        beforeSend: function(){
            $('#dim').fadeIn();
        },  
        complete : function(){
            $('#dim').fadeOut();
        },      
        error: function(){
            return true;
        },
        success: function(msg){ 
            if (msg != '')
                PopulateResponse(msg, sElement, false);
            else 
                PopulateResponse("An Error Has Occured.", sElement, false);
        }
    });
} 
```

目前，它似乎会这样做：

2) 执行 Ajax 查询，并填充搜索结果。

2) 使页面变暗。

3) 删除 Dim。

结果填充的位置（需要十秒钟）并且调光器非常快速地闪烁。

请各位程序员帮帮我，我对这项技术并不陌生，为什么我关闭了异步，试图让事情按顺序发生，但仍然没有 DICE。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-19T13:59:02.460

我用这个函数解决了这个问题：

```
function jax(sUrl, sElement, bEval, sType, bAsync) 
{
    $.ajax({
        url: sUrl,
        type: sType,
        async: true,
        cache: false,
        timeout: 30000,
        error: function()
        {
            return true;
        },
        beforeSend: function(){
            $('div#dim').fadeIn(400);
        },  
        complete : function(){
            $('div#dim').fadeOut(200);
            if(sUrl.search(/scroll=true/ig) != -1)
                goToByScroll(sElement);

        },                      
        success: function(msg){ 
            if (msg != '')
            {
                PopulateResponse(msg, sElement, bEval);
            }
            else
            {
                PopulateResponse("An error has occurred.", sElement, bEval)
                //Coming soon, ajax call to php file to log javascript failure.
            }
        }
    });
} 
```

这个 CSS

```
div#dim
{
    background-color:#000;
    -ms-filter:"progid:DXImageTransform.Microsoft.Alpha(Opacity=60)";
    filter: alpha(opacity=60);
    opacity:.6;
    height:100%;
    width:100%;
    position:fixed;
    top:0;
    left:0;
    z-index:1005;
    display:none;
    cursor:wait;
}

div#dim div
{

    position:relative;
    top:400px;
    z-index:1006;
    text-align:center;
    cursor:wait;
}

div#dim div img
{
    z-index:1007;
    text-align:center;
    border:none;
    cursor:wait;
} 
```

和这个 HTML

```
<div id='dim'><div style="text-align:center;"><img src="Images/Loading/loading10.gif" alt="Loading... please wait" title="Loading... please wait" /></div></div> 
```

# java - Objectify - 使用get获取给定父母的孩子？

> ID：12480769
> 
> 赞同：0
> 
> 时间：2012-09-18T16:02:23.550
> 
> 标签：java, google-app-engine, google-cloud-datastore, objectify

我正在尝试获取给定父键的所有子级。我可以使用如下查询/祖先方法来实现这一点：

```
List<Tire> list= ofy.query(Tire.class).ancestor(new    Key<Car(Car.class,carID))).list(); 
```

这样做的问题是查询方法不通过缓存。如何使用 get 获取相同的列表？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-18T17:46:16.573

您可以执行仅键查询，然后对键执行 get()。这仍然会影响数据存储，但它可以将您的成本降低到每次读取 1 个读取操作 + 1 个小操作（而不是每次读取 1 个读取操作 + 1 个读取操作）。

如果您使用 Objectify4，它会自动为您执行此操作（请参阅 Query.hybrid() 方法）。

# regex - 如何仅在 django url 中传递预定义的值？

> ID：12480771
> 
> 赞同：0
> 
> 时间：2012-09-18T16:02:30.320
> 
> 标签：regex, django, django-urls

我的网址就像 -

```
urlpatterns = patterns('network.network_api.views',

(r'^network/license/(?P<flag>\w{4,12})/?$',             'Check_License'),

) 
```

在这里我只想允许标记（激活或停用），请帮助我，我应该在我的网址中进行哪些更改。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-18T16:07:52.047

尽管在 url 中包含硬编码标志似乎是一个不错的解决方案，但我认为最好将这样的逻辑留给视图，并且如果两个支持的标志中都不包含标志，则会引发错误。我认为这更灵活，以防您将来需要添加标志。

以下是如果您仍然希望在 url 中添加一个标志。它确保您用于添加条件的组不会被正则表达式拾取：

```
url(r'^network/license/(?P<flag>(?:ACTIVATE)|(?:DEACTIVATE))/$', 'Check_License'), 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-18T16:06:04.483

这应该有效。

```
url(r'^network/license/(?P<flag>(ACTIVATE|DEACTIVATE){1})/$', 'Check_License'), 
```

# c# - 如何以编程方式显示文本框的键盘？

> ID：12480773
> 
> 赞同：5
> 
> 时间：2012-09-18T16:02:32.750
> 
> 标签：c#, silverlight, windows-phone-7

我在 Windows Phone 页面上有一个文本框，我想在页面加载后立即显示键盘。

当我导航到这个页面时，有什么方法可以让这个文本框已经聚焦？

我考虑过使用`Guide.BeginShowKeyboardInput()`，但我认为这在 silverlight 中不是一个好的解决方案。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-09-18T16:14:58.303

是的，我不会手动显示键盘。对于那些拥有带有物理键盘的设备的人来说，这可能是一种烦恼。在页面的加载事件中，您只需在要选择的文本框上调用 Focus 方法。键盘应根据需要自动显示。

```
private void PhoneApplicationPage_Loaded(object sender, RoutedEventArgs e)
{
            txtLongitude.Focus();
} 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-09-18T16:12:44.960

覆盖[`OnNavigatedTo`](http://msdn.microsoft.com/en-us/library/system.windows.controls.page.onnavigatedto%28v=VS.95%29.aspx#Y0)页面的方法。

```
protected override void OnNavigatedTo(NavigationEventArgs e)
{
  base.OnNavigatedTo(e);

  // Set focus to the TextBox, this will pop up the 
  // virtual keyboard
  myTextBox.Focus();
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-06-07T20:12:02.930

如果您在事件中使用它，您可以`textBox.Focus()`通过 a调用：`Dispatcher``OnNavigatedTo`

```
protected override void OnNavigatedTo(NavigationEventArgs e)
{
    base.OnNavigatedTo(e);

    if (e.NavigationMode != NavigationMode.Back)
    {
        Dispatcher.InvokeAsync(() => ShowKeyboard());
    }
}

private void ShowKeyboard()
{
    textBox.Focus();
} 
```

此处的`if`语句确保仅在未从“后退”按钮导航到页面时才显示键盘。

# cryptography - 如何从 OpenSSL 中的 ECDSA 私钥获取公钥？

> ID：12480776
> 
> 赞同：6
> 
> 时间：2012-09-18T16:02:41.980
> 
> 标签：cryptography, openssl, public-key-encryption, elliptic-curve

我提供这个示例应用程序来显示我的问题

```
#include <stdio.h>
#include <stdlib.h>
#include <openssl/ec.h>
#include <openssl/bn.h>

int main()
{
     EC_KEY *pkey = NULL;
     EC_POINT *pub_key = NULL;
     const EC_GROUP *group = NULL;
     BIGNUM start;
     BIGNUM *res;
     BN_CTX *ctx;

     BN_init(&start);
     ctx = BN_CTX_new();

     res = &start;
     BN_hex2bn(&res,"3D79F601620A6D05DB7FED883AB8BCD08A9101B166BC60166869DA5FC08D936E");
     pkey = EC_KEY_new_by_curve_name(NID_secp256k1);
     group = EC_KEY_get0_group(pkey);
     pub_key = EC_POINT_new(group);

     EC_KEY_set_private_key(pkey, res);

     assert(EC_POINT_bn2point(group,res, pub_key, ctx)); // Null here

     EC_KEY_set_public_key(pkey, pub_key);

    return 0;
} 
```

我想要做的是从私钥显示公钥（应该是椭圆私钥）。在遇到类似问题之前我不知道该怎么做

[如何提供 OpenSSL 随机数据以用于 ECDSA 签名？](https://stackoverflow.com/questions/1171207/how-do-i-feed-openssl-random-data-for-use-in-ecdsa-signing)

这是我指出自己如何获取公钥并使用 EC_POINT_bn2point 而不是根据 OpenSSL 源在内部执行 BN_hex2bn 的 hex2point 的地方。

那么，为什么 EC_POINT_bn2point 返回 NULL？我正在认真考虑重新编译 OpenSSL 并放置一些调试程序来找出它失败的原因。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-09-18T17:54:17.987

ECDSA 私钥*d*（整数）和公钥*Q*（一个点）由*Q = dG*计算，其中*G*是非秘密域参数。[Suite B Implementer's Guide to FIPS 186-3 (ECDSA)](http://nsa.gov/ia/_files/ecdsa.pdf)详细描述了 ECDSA。

OpenSSL 使用[ECDSA_generate_key](http://cvs.openssl.org/fileview?f=openssl/crypto/ecdsa/ecs_key.c&v=1.2.2.1)生成密钥对。它的作用是随机生成一个私钥，然后通过*Q = dG*乘法计算公钥：

```
/* pub_key is a new uninitialized `EC_POINT*`.  priv_key is a `BIGNUM*`. */
if (!EC_POINT_mul(ecdsa->group, pub_key, priv_key, NULL, NULL, ctx)) goto err; 
```

所以你可以做同样的事情。如果我有私钥，我会将其设置为`EC_KEY`or`ECDSA`结构中的私钥。然后我会在上面配置域参数。最后我会做得到`EC_POINT_mul`公钥点。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-06-12T09:31:05.397

工作示例：

```
// using figures on: https://en.bitcoin.it/wiki/Technical_background_of_version_1_Bitcoin_addresses
// gcc -Wall ecdsapubkey.c -o ecdsapubkey -lcrypto
#include <stdio.h>
#include <stdlib.h>
#include <openssl/ec.h>
#include <openssl/obj_mac.h>
#include <openssl/bn.h>

int main()
{
     EC_KEY *eckey = NULL;
     EC_POINT *pub_key = NULL;
     const EC_GROUP *group = NULL;
     BIGNUM start;
     BIGNUM *res;
     BN_CTX *ctx;

     BN_init(&start);
     ctx = BN_CTX_new(); // ctx is an optional buffer to save time from allocating and deallocating memory whenever required

     res = &start;
//     BN_hex2bn(&res,"3D79F601620A6D05DB7FED883AB8BCD08A9101B166BC60166869DA5FC08D936E");
     BN_hex2bn(&res,"18E14A7B6A307F426A94F8114701E7C8E774E7F9A47E2C2035DB29A206321725");
     eckey = EC_KEY_new_by_curve_name(NID_secp256k1);
     group = EC_KEY_get0_group(eckey);
     pub_key = EC_POINT_new(group);

     EC_KEY_set_private_key(eckey, res);

     /* pub_key is a new uninitialized `EC_POINT*`.  priv_key res is a `BIGNUM*`. */
     if (!EC_POINT_mul(group, pub_key, res, NULL, NULL, ctx))
       printf("Error at EC_POINT_mul.\n");

//     assert(EC_POINT_bn2point(group, &res, pub_key, ctx)); // Null here

     EC_KEY_set_public_key(eckey, pub_key);

     char *cc = EC_POINT_point2hex(group, pub_key, 4, ctx);

     char *c=cc;

     int i;

     for (i=0; i<130; i++) // 1 byte 0x42, 32 bytes for X coordinate, 32 bytes for Y coordinate
     {
       printf("%c", *c++);
     }

     printf("\n");

     BN_CTX_free(ctx);

     free(cc);

     return 0;
} 
```

另请参阅[http://wiki.openssl.org/index.php/Elliptic_Curve_Cryptography](http://wiki.openssl.org/index.php/Elliptic_Curve_Cryptography) - 对于库

[http://www.nsa.gov/ia/_files/ecdsa.pdf](http://www.nsa.gov/ia/_files/ecdsa.pdf) - 用于算法

[http://cs.ucsb.edu/~koc/ccs130h/notes/ecdsa-cert.pdf](http://cs.ucsb.edu/~koc/ccs130h/notes/ecdsa-cert.pdf) - 用于数学

# python - 父级的变量名与子级不同

> ID：12480783
> 
> 赞同：1
> 
> 时间：2012-09-18T16:03:17.887
> 
> 标签：python, default-arguments

我正在编写一个简单的 Pong 游戏。我希望我的 Paddle 和我的 Ball 对象都从 DynamicObj 继承，DynamicObj 是一个父类，它有一个`update`使用基本的简单欧拉积分来标记位置的方法。问题是 Paddle 对象的位置存储在 rect 中（因此使用 rect.x 访问 x pos），而 Ball 对象的位置存储在 ax 和 y 值中。有没有办法让它们都继承自同一个能够标记它们位置的类？

这是我到目前为止所拥有的：

```
class DynamicObj:
    def __init__(self, vel):
        self.vel = vel
    def update(self, delta):
        self.x += self.vel.x * delta
        self.y += self.vel.y * delta

class Ball(DynamicObj):
    def __init__(self, x, y, radius, vel):
        self.x = x
        self.y = y
        self.radius = radius
        self.vel = vel

class Paddle(DynamicObj):
    def __init__(self, rect, vel):
        self.rect = rect
        self.vel = vel
        #what I want is to create self.x and self.y that respectively point to the same place as self.rect.x and self.rect.y 
```

我在考虑可能用`property`.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-18T16:32:45.277

是的，[属性](http://docs.python.org/library/functions.html#property)会有所帮助：

```
class Paddle(DynamicObj):
    # ...
    @property
    def x(self):
        return self.rect.x 
```

现在你的桨将有一个只读字段`x`。如果你想要一个二传手，用`@x.setter`它来装饰它。

但我仍然认为你的想法是错误的。就矩形而言，操作通常要容易得多。如果您碰巧使用 pygame，它有许多巧妙的方法。只要让你的每一个对象要么基于一个矩形类，要么有一个统一的方式来获取它（即一个接口）。

你会问，到底为什么要使用矩形作为圆形球？那是因为*粗略*的碰撞检测对于矩形来说很便宜（再次参见 pygame 的有效方法）。如果两个矩形不发生碰撞，那么由它们包围的形状复杂的对象也肯定不会发生碰撞。只有当边界矩形发生碰撞时，您才必须运行可能更昂贵的精确碰撞检查。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-18T16:17:30.407

你是说，这个？

```
class Paddle(DynamicObj):
def __init__(self, rect, vel):
    self.x = rect.x
    self.y = rect.y
    self.vel = vel 
```

编辑：好的，所以我会留下这个“答案”作为澄清......

# ipad - 仅捕获两个手指触摸并通过 div 传递所有其他点击等

> ID：12480786
> 
> 赞同：2
> 
> 时间：2012-09-18T16:03:43.473
> 
> 标签：ipad, events, touch

我在 iframe 顶部有一个带有 div 的 iframe。我想做的是捕获 div 上的任何两根手指触摸，如果 div 检测到单指触摸/单击等，则将该事件传递给 div 下方的 iframe。我知道我可以使用 pointer-events: none 将所有点击等通过元素传递到其下方的 iframe。但这也会通过两指触摸/点击。我希望顶部的 div 传递不是两指触摸的所有内容，并在两指触摸时捕获事件。这看起来可能吗？提前感谢您的帮助。

# php - 刷新 div onClick

> ID：12480789
> 
> 赞同：0
> 
> 时间：2012-09-18T16:04:02.793
> 
> 标签：php, javascript, jquery

我在 wordpress 中使用了很棒的 CodaSlider 来向我的页面添加一个选项卡式功能，但遇到了一些问题。

CodaSlider 使用一个查看当前内容并自动定义高度的脚本，但是，我可以选择打开/关闭滑块内的 div 以显示更多内容，但是由于滑块已经定义了一个高度，它不会自动更新。

我的想法是添加一段 JQuery 来刷新滑块的 div 从而显示新内容，而不必一直重新加载整个页面。

到目前为止，这就是我所拥有的：

```
<div class="video-centre">
  <div class="video-title"> <img src="<?php echo get_bloginfo('template_url') ?>/images/video-propertiesforsale.jpg" alt="properties for sale" /> </div>
    <div class="video-point"> <img src="<?php echo get_bloginfo('template_url') ?>/images/video-point.jpg" alt="video pointer" /> </div>
    <div class="video-thumb">
      <div class="coda-slider" id="slider-id">
        <div>
          <h2 class="title"><span>Crouch End</span></h2>
          <?php the_field('crouch_end'); ?>
            <p class="video-more2"><a href="javascript:animatedcollapse.show(['expandable-2'])" id="refresh">View More</a></p>
            <div id="expandable-2">
            <?php the_field('properties_for_sale_hidden'); ?>
            <p class="video-close2"><a href="javascript:animatedcollapse.hide(['expandable-2'])" id="refresh">Close</a></p>
         </div>
        </div>

<script>
var $r = jQuery.noConflict();
    $r(function() {
      $r("#refresh").click(function(evt) {
         $r(".panel").load("index.php")
         evt.preventDefault();
      })
    })
</script> 
```

我遇到的问题是脚本加载了整个页面，而不是它应该加载的实际内容，我似乎无法让它做我想做的事。

我希望以上内容可以理解，在我的脑海中听起来不错：S

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-18T16:09:59.867

是的，`.load`旨在加载页面的全部内容。你可以运行`.load`，然后通过孩子们得到你想要的：

```
var div = $('<div/>').load('index.php');
$('.panel').replaceWith(div.find('.panel')); 
```

# android - 底部而不是顶部的操作栏

> ID：12480790
> 
> 赞同：0
> 
> 时间：2012-09-18T16:04:06.793
> 
> 标签：android

我正在开发一个应用程序，它需要底部的操作栏而不是默认的顶部（不是拆分操作栏）。

我的应用程序在横向模式下运行，它用于汽车，我需要在底部有一个操作栏，因为它更易于使用。

是否可以将操作栏移动到底部？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-18T16:16:02.760

Button 上不可能有操作栏。尝试实现您的自定义视图。如果您的应用程序用于汽车，请尝试使用仪表板设计模式。可能重复：[Android - 更改 android 操作栏的位置](https://stackoverflow.com/questions/10128357/android-change-position-of-android-action-bar)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-18T16:38:07.970

> 是否可以将操作栏移动到底部？

不，对不起。您将不得不摆脱默认的操作栏（例如，使用`Theme.NoActionBar`）并创建您自己的“汽车栏”，您的活动在底部使用。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-12-23T08:19:48.743

是的。在这种情况下是不可能的。取而代之的是使页脚和菜单项之类的布局使用弹出窗口。

```
@Override
protected void onCreate(Bundle savedInstanceState) {
    // TODO Auto-generated method stub
    super.onCreate(savedInstanceState);
    setContentView(R.layout.tabhost);
    init();
    popupInit();

}

@Override
public void onClick(View v) {
    // TODO Auto-generated method stub

     //Creating the instance of PopupMenu  
    PopupMenu popup = new PopupMenu(TestingActivity.this,v);  
    //Inflating the Popup using xml file  
    popup.getMenuInflater().inflate(R.menu.main, popup.getMenu());  

    //registering popup with OnMenuItemClickListener  
    popup.setOnMenuItemClickListener(new PopupMenu.OnMenuItemClickListener() {  
     public boolean onMenuItemClick(MenuItem item) {  
          Toast.makeText(TestingActivity.this,"You Clicked : ",Toast.LENGTH_SHORT).show();
      return true;  
     }  
    });  

    popup.show();//showing popup menu

}

public void init() { 
    popupButton = (Button) findViewById(R.id.popupbutton);  
    insidePopupButton = new Button(this); 
    secondPopupButton = new Button(this);
    layoutOfPopup = new LinearLayout(this); 
    insidePopupButton.setText("OK");
    secondPopupButton.setText("OK");
    //layoutOfPopup.setOrientation(1);  
    layoutOfPopup.addView(insidePopupButton); 
    layoutOfPopup.addView(secondPopupButton); 
} 

public void popupInit() { 
    popupButton.setOnClickListener(this); 
    insidePopupButton.setOnClickListener(this); 
    popupMessage = new PopupWindow(layoutOfPopup, LayoutParams.WRAP_CONTENT,
    LayoutParams.WRAP_CONTENT); 
    popupMessage.setContentView(layoutOfPopup); 
} 
```

# c# - 来自控件的javascript多个输入

> ID：12480791
> 
> 赞同：0
> 
> 时间：2012-09-18T16:04:06.697
> 
> 标签：c#, javascript, controls

我有这样的东西

```
<button onclick="JavascriptFunction();">HTTPPost Button</button>

<script type="text/javascript" language="javascript">
function JavascriptFunction() {
    var url = '@Url.Action("PostMethod")';
    var data = $('input[name="MyTextBlock"]').serialize();
    $("#divLoading").show();
    $.post(url, data,
            function (data) {
                $("#PID")[0].innerHTML = data;
                $("#divLoading").hide();
            });
}
</script> 
```

我想在其中传递多个控件（包括文本框和下拉菜单）如何将其添加到 var 数据中？谢谢。我还应该提到 MyTextBlock 是一个文本框。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-18T16:11:27.973

在这条线上，

```
var data = $('input[name="MyTextBlock"]').serialize(); 
```

您可以将要序列化的所有元素包含在查询字符串中。例如，如果您的下拉菜单有 id `dropdown`，您可以这样做：

```
var data = $('#dropdown, input[name="MyTextBlock"]').serialize(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-18T16:07:37.793

你想使用[`.serializeArray`](http://api.jquery.com/serializeArray/)而不是`.serialize`，它将你的表单变成一个数组而不是一个字符串。您可以调用`.serializeArray`整个表单来获取全部内容。

# django - 即使我正确填写了 .po，{% trans "something" %} 也无法正常工作

> ID：12480793
> 
> 赞同：0
> 
> 时间：2012-09-18T16:04:18.493
> 
> 标签：django, internationalization

我拼命想让它工作，但我没有运气。我检查了这个主题，但似乎他没有正确填写 msgstr，我做到了！

[{% trans "string" %} 不适用于模板，但 {% trans variable %} 可以](https://stackoverflow.com/questions/12101811/trans-string-not-working-on-templates-but-trans-variable-does)

我在做 - django-admin makemessages -l en-us - django-admin compilemessages

```
#: templates/dashboard.html:8 templates/dashboard.html.py:10
msgid "test"
msgstr "test test"

#: templates/dashboard.html:11
msgid "customers"
msgstr "xxxxxxxxxx" 
```

提前致谢

# php - Paypal IPN HTTP/1.1 - 根本不提供任何响应，它是一个空字符串

> ID：12480794
> 
> 赞同：5
> 
> 时间：2012-09-18T16:04:20.383
> 
> 标签：php, paypal, paypal-ipn

**这种无法解释的可能会影响或将影响成千上万的网站管理员。**

问题是 Paypal 根本没有对此请求作出响应。以下是我使用的示例代码以及我的程序员的评论：

我的订单日期 - 重复了 5 次！为什么？谁知道...这仅意味着 PayPal 尝试对该脚本进行 5 次 IPN，但均未成功。仅当我将 HTTP 更新为 1.0 并重新上传脚本时，PayPal 才会出现“已验证”响应。在那之后，贝宝仍在查询它。似乎当 HTTP = 1.1 时，PayPal 正在正确获取所有内容，但没有正确响应；然后由于某种原因返回为同一付款创建另一个响应。使用 HTTP 1.0，一切都像一朵花：一个请求，一个响应，一切正常。我不知道它有什么问题... 0 并重新上传脚本。在那之后，贝宝仍在查询它。似乎当 HTTP = 1.1 时，PayPal 正在正确获取所有内容，但没有正确响应；然后由于某种原因返回为同一付款创建另一个响应。使用 HTTP 1.0，一切都像一朵花：一个请求，一个响应，一切正常。我不知道它有什么问题... 0 并重新上传脚本。在那之后，贝宝仍在查询它。似乎当 HTTP = 1.1 时，PayPal 正在正确获取所有内容，但没有正确响应；然后由于某种原因返回为同一付款创建另一个响应。使用 HTTP 1.0，一切都像一朵花：一个请求，一个响应，一切正常。我不知道它有什么问题...

附言。我们不是在谈论“无效”响应。'INVALID' 响应实际上是成功的一部分——但在 HTTP 1.1 的情况下，PayPal 根本不提供任何响应，它是一个空字符串。”

```
<?php

$req = 'cmd=_notify-validate';
$r='';

foreach ($_POST as $key => $value) {
$value = urlencode(stripslashes($value));
$req .= "&$key=$value";
$r.="{$key}: {$value}\n";
}

// post back to PayPal system to validate
$header .= "POST /cgi-bin/webscr HTTP/1.1\r\n";
$header .= "Content-Type: application/x-www-form-urlencoded\r\n";
$header .= "Host: www.paypal.com\r\n";
$header .= "Content-Length: " . strlen($req) . "\r\n\r\n";
$fp = fsockopen ('www.paypal.com', 80, $errno, $errstr, 30);
#I also tried: $fp =fsockopen('ssl://www.paypal.com',443,$err_num,$err_str,30);

if (!$fp) {
$r.="----\nHTTP ERROR\n";
// HTTP ERROR
} else {

$r.="----\nReceived IPN request\n";

fputs ($fp, $header . $req);

while (!feof($fp)) {
$res = fgets ($fp, 1024);
}
fclose ($fp);

if (strcmp ($res, 'VERIFIED') == 0) {

$proceed=TRUE;

}
else{
$proceed=FALSE;
}
}

?> 
```

PS。这是`notify_url`我们使用的脚本的一部分：

```
<input type="hidden" name="notify_url" value="{$main_url}/index.php?action=ipn&amp;user_id={$user_id}" /> 
```

当它在沙盒中测试时它正在工作..

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-09-18T21:53:25.787

改变这个：

```
// post back to PayPal system to validate
$header .= "POST /cgi-bin/webscr HTTP/1.1\r\n";
$header .= "Content-Type: application/x-www-form-urlencoded\r\n";
$header .= "Host: www.paypal.com\r\n";
$header .= "Content-Length: " . strlen($req) . "\r\n\r\n";
$fp = fsockopen ('www.paypal.com', 80, $errno, $errstr, 30);
#I also tried: $fp =fsockopen('ssl://www.paypal.com',443,$err_num,$err_str,30); 
```

对此：

```
// post back to PayPal system to validate
$header .= "POST /cgi-bin/webscr HTTP/1.1\r\n";
$header .= "Content-Type: application/x-www-form-urlencoded\r\n";
$header .= "Host: www.paypal.com\r\n";
$header .= "Content-Length: " . strlen($req) . "\r\n";
$header .= "Connection: close\r\n\r\n";
$fp = fsockopen ('ssl://www.paypal.com', 443, $errno, $errstr, 30); 
```

和这个：

```
if (strcmp ($res, 'VERIFIED') == 0) { 
```

对此：

```
if (strcmp (trim($res), 'VERIFIED') == 0) { 
```

它几乎可以保证工作。

您当前的设置失败，因为 PayPal 在 fsockopen 欣然接受的响应中发送了 Connection: keep-alive 标头，因此它使连接保持打开状态。
而像 cURL 这样的 HTTP 库会自动关闭连接。

我的一般建议是；如果您不想控制连接到 PayPal 的每一位，请使用 HTTP 库，例如 cURL，而不是 fsockopen，后者只是一个普通的 TCP 连接。
（PayPal 在[https://www.paypal.com/ipn](https://www.paypal.com/ipn)和[https://www.paypal.com/pdt](https://www.paypal.com/pdt)提供了使用 cURL 的示例代码）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-26T09:01:25.850

在上面的代码中，您可以替换：

```
if (strcmp ($res, "VERIFIED") == 0) { 
```

和

```
if (strcmp (trim($res), "VERIFIED") == 0) { 
```

唯一的区别是修剪

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-09-10T05:03:12.980

我添加了以下行，这很好用

$res = 修剪（$res）；

参考链接

1.  [http://www.johnboy.com/blog/http-11-paypal-ipn-example-php-code](http://www.johnboy.com/blog/http-11-paypal-ipn-example-php-code)
2.  [http://www.johnboy.com/scripts/paypal-ipn/paypal_ipn_1_1.phps](http://www.johnboy.com/scripts/paypal-ipn/paypal_ipn_1_1.phps)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-18T19:21:40.823

我发现了这个[http://www.justmyusecase.com/2012/09/subject-action-required-update-your.html](http://www.justmyusecase.com/2012/09/subject-action-required-update-your.html)

看起来您只需要修剪“已验证”字符串。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-23T12:51:16.493

Since middle of December 2012 we did not receive any IPN from PayPal. There are no entries in the web servers access or error logs that indicates that PayPal is trying to send IPNs since then.

So i had a phone call with the german paypal support today (After more then 2 hours in the waiting line - i reached finally somebody).

**They confirmed to me, that there is a problem with some accounts (No sending of IPN) and that they try to fix it. So before you try to change your Scripts, watchout for the server log files first!**

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-02-10T21:57:44.147

好吧，我的 IPN 有类似的东西

尝试更改 PayPal 上的 IPN 编码

我的帐户 => 我的个人资料 => 我的销售工具 => 语言编码

* * *

## 回答 #7

> 赞同：-1
> 
> 时间：2012-09-18T18:38:41.540

我也有这个问题，PP 拒绝承认有问题。我不知道该怎么办，但客户会在四个月后发疯。

您应该进行的一项更改是：

```
$header .= "POST /cgi-bin/webscr HTTP/1.1\r\n"; // wrong  
$header .= "POST cgi-bin/webscr HTTP/1.1\r\n"; // right (according to PP) 
```

# python - coltrane教程的django url匹配失败

> ID：12480799
> 
> 赞同：0
> 
> 时间：2012-09-18T16:04:26.093
> 
> 标签：python, django

菜鸟问题可以肯定。我正在研究 Practical Django Projects, Second Edition 的 coltrane 项目。

我的 urlpattern 条目是：

```
(r'^blog/(?P<year>\d{4})/(?P<month>\w{3})/(?P<day>\d{2})/(?P<slug>[-\w]+)/$', 'coltrane.views.entry_detail'), 
```

实际网址为：127.0.0.1:8000/blog/2012/sep/17/thank-you-very-much

实际 URL 不会触发与 urlpattern 条目关联的视图 - 'coltrane.views.entry_detail'。相反，它会在 url 模式元组的末尾触发包罗万象的模式。包罗万象的模式是：

```
(r'', include('django.contrib.flatpages.urls')), 
```

当浏览器尝试加载页面时，manage.py 报告：[18/Sep/2012 10:59:31] "GET /blog/2012/sep/17/thank-you-very-much HTTP/1.1" 404 1667

调试页面报告 Page not found, No FlatPage 与给定查询匹配。

据我所知，一切都井井有条。那么我在这里的简单 NOOB 错误是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-18T16:19:08.117

改变“P？” 在捕捉蛞蝓场时到“？P”。(P?[-\w]+) => (?P[-\w]+)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-18T17:02:00.480

您必须在 url 末尾附加斜杠，因为您的正则表达式定义斜杠应在 url ( `/$`)末尾匹配

所以改成：

```
127.0.0.1:8000/blog/2012/sep/17/thank-you-very-much/ 
```

# javascript - 在 IE7 中插入 HTMLElement 对象后，JQuery .find() 失败

> ID：12480802
> 
> 赞同：1
> 
> 时间：2012-09-18T16:04:56.870
> 
> 标签：javascript, jquery, dom, internet-explorer-7

我有一对正在传递给函数的 HTMLElement 对象。一个是容器 div，第二个是附加到容器的。这按预期工作。为了以后找到子元素，我为这种类型的元素赋予了一个唯一的类（可以有多个）。这也按预期工作。但是，当我稍后去操作子元素时，jQuery .find(".myClass") 无法返回任何结果。以下代码在 chrome 和 ie8/9 中返回 1，但在 ie7 中返回 0：

```
$(document).ready(function(){
    var insert = document.createElement("div");
    insert.setAttribute("class","insertedElement");
    insert.appendChild(document.createTextNode("Some Text"));
    $(document.getElementById("container")).append(insert);
    alert($("#container").find(".insertedElement").length);
}); 
```

这是在 JSFiddle 中：http: [//jsfiddle.net/tYfqk/](http://jsfiddle.net/tYfqk/)

知道这里发生了什么，或者我该如何纠正它？

另外，请原谅上面做作的 $("document.getElementById("container")).append(insert); ，这只是为了说明我的对象是作为 DOM 元素出现的，而不是 jQuery 对象。我知道 $(" #container").append(insert); 在那里会更有意义，但即使你改变了问题仍然存在。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-18T16:10:17.723

旧版本的 IE 不允许您通过将“类”设置为属性来设置类。请改用 jQuery“addClass”。

```
$(insert).addClass("insertedElement"); 
```

或者只是设置“className”属性：

```
insert.className = "insertedElement"; 
```

（“class”这个词在 JavaScript 中是保留的，所以属性是“className”。）一般来说，像“className”、“id”、“name”、“value”、“type”、“href”等DOM 元素可以并且（我认为）应该被视为对象属性，而不是属性。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-18T16:24:30.823

此外，jQuery 1.8 已经修复了这个问题；）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-18T16:16:07.847

查看这段代码，我认为它应该在 IE7 中工作

```
$(document).ready(function(){

    var insert = $('<div></div>').addClass('insertedElement').text("Some Text");

    insert.appendTo($("#container"));

    alert($("#container").find(".insertedElement").length);

}); 
```

# jquery - 循环 jQuery 函数来检查 div 位置

> ID：12480803
> 
> 赞同：2
> 
> 时间：2012-09-18T16:05:01.373
> 
> 标签：jquery, loops

我有一堆浮动的 div，我有一个函数可以检查每个 div 的位置，如果 div 的左侧位置为 0，那么它将向其中添加一个类。

但是，当浏览器调整大小时，浮动 div 会发生变化，例如我从连续 4 个开始，然后当我将浏览器调整为较小时，它们会下降到 3，然后是 2，等等。

我希望能够循环我的函数，以便它不断检查 div 的左侧位置以查看它是否为 0 ...我现在似乎无法让它 wrk，我尝试了 setInterval 和窗口调整大小函数，这是我的代码：

```
$('.box').each(function(index, item){
   if($(this).position().left == 0){
      $(this).removeClass('right');
      $(this).addClass('left');
   } else {
      $(this).removeClass('left');
      $(this).addClass('right');
   }
}); 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-18T16:07:29.503

### *[jsBin 演示](http://jsbin.com/icalum/2/edit)*（调整窗口大小以查看更改）

```
function checkPositions(){    
    $('.box').each(function(){
       var myPos = $(this).position().left == 0 ?
       $(this).removeClass('right').addClass('left') :           
       $(this).removeClass('left').addClass('right') ;
    });  
}
checkPositions(); // check on DOM ready

$(window).resize(function(){  // and do it on window resize
    checkPositions();
}); 
```

# html - 为什么我的 UL 菜单与其他元素重叠？

> ID：12480808
> 
> 赞同：0
> 
> 时间：2012-09-18T16:05:34.833
> 
> 标签：html, css

为什么我的 UL 菜单与内容 div 重叠？我是否缺少分隔标题/内容的结构的一部分？

[http://jsfiddle.net/DBdHs/](http://jsfiddle.net/DBdHs/)

CSS

```
.wrapper { margin: 0 auto; width: 80%; margin-top: 2em !important; }

#top-nav {
    list-style-type: none;
    color: #f5f5f5;
}

#top-nav li {
    float:left;
    height: 40px;
    line-height: 40px;
    background: #ffffff;
    color: #414141;
}

#top-nav li span {
    padding-bottom: .4em;
    padding-left: 3em;
    padding-right: 3em;
}

#top-nav li:hover span{
    color: black;
    border-bottom: 5px solid #FF9A00;
    cursor: pointer;
}

#content {
    margin: 0 auto;
    background:#fff;
    border: 1px solid #eaeaea;
    min-height: 150px;
    padding: 25px;
}

.row { width: 100%;}​

<div class="wrapper">
  <header>
    <div class="row">
      <ul id="top-nav">
        <li><span>home</span></li>
        <li><span>photos</span></li>
        <li><span>projects</span></li>
        <li><span>about me</span></li>
      </ul>
    </div>
  </header>

<div id="content">Welcome to my home on the internet.</div>
</div>​ 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-18T16:06:50.097

```
header {
    overflow: hidden;
} 
```

将此添加到您的 CSS 中。

你没有清理你的花车。`clear: both;`您可以在菜单后添加一个清除 div ( )，或者添加`overflow: hidden`; 到你的标题。

这是一个演示 - [http://jsfiddle.net/spacebeers/DBdHs/1/](http://jsfiddle.net/spacebeers/DBdHs/1/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-18T16:08:41.923

放入`#content{clear:both;}`你的CSS，所以身体将始终保持在标题下方。

# sql - 跳过特定条件和正确使用 Lead() 的 SQL 差距

> ID：12480818
> 
> 赞同：1
> 
> 时间：2012-09-18T16:06:18.123
> 
> 标签：sql, postgresql, gaps-and-islands, postgresql-8.4, window-functions

**(PostgreSQL 8.4)**继续我[之前的示例](https://stackoverflow.com/questions/12467567/detect-sql-island-over-multiple-parameters-and-conditions)，我希望进一步了解使用窗口函数处理间隙和孤岛。考虑下表和数据：

```
CREATE TABLE T1
(
  id SERIAL PRIMARY KEY,
  val INT,   -- some device
  status INT -- 0=OFF, 1=ON
);

INSERT INTO T1 (val, status) VALUES (10, 0);
INSERT INTO T1 (val, status) VALUES (11, 0);
INSERT INTO T1 (val, status) VALUES (11, 1);
INSERT INTO T1 (val, status) VALUES (10, 1);
INSERT INTO T1 (val, status) VALUES (11, 0);
INSERT INTO T1 (val, status) VALUES (10, 0); 
```

如前所述，设备会打开和关闭，这一次我希望提取一个特定的序列：

*   显示所有`ON`不重复的新状态记录（同一设备连续两次）
*   `OFF`从当前`ON`设备显示适当的状态

我能得到的最接近的是：

```
SELECT * FROM  (
  SELECT *
       ,lag(val, 1, 0) OVER (PARTITION BY status ORDER BY id) last_val
       ,lag(status, 1, -1) OVER (PARTITION BY val ORDER BY id) last_status
  FROM   t1
  ) x
WHERE  (last_val <> val OR last_status <> status)
AND    (status = 1 OR last_status <> -1)
ORDER BY id 
```

这会过滤掉样本不包含的更多虚假数据，但本质上是关于取出后续重复项（无论状态如何）和`OFF`不匹配的顶级记录。Records `3`, `4`, `5`and`6`被返回，但我不想要第五个，它`OFF`是在 new 之后出现的`ON`。所以我需要跳过这个差距并为`OFF`当前活动的设备寻找下一个合适的设备。

1.  10 关闭——在这种情况下是假的，但会弄乱 lag()
2.  11 关闭——在这种情况下是假的，但会弄乱 lag()
3.  11 开启 -- 好的，新序列，包含在 SELECT 中
4.  10 次打开 -- 好的，新序列，包含在 SELECT 中
5.  11 关闭——消息来晚了，需要忽略间隙
6.  10 次关闭 -- 好的，正确关闭到第 4 行，需要包含在 SELECT 中

一旦正确过滤，我想[`lead()`](http://www.postgresql.org/docs/8.4/interactive/functions-window.html)在这一切之上使用来获取下一行的 id（想象一个时间戳）以及过滤掉所有不是`ON`状态的记录。我想这将需要三个嵌入式 SELECT 语句。这将使我清楚地了解设备处于活动状态的时间，直到另一个`ON`或适当转弯的条件`OFF`。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-19T20:57:19.360

### 使用窗口函数查询

```
SELECT *
FROM  (
   SELECT *
         ,lag(val, 1, 0)    OVER (PARTITION BY status ORDER BY id) AS last_val
         ,lag(status, 1, 0) OVER w2 AS last_status
         ,lag(next_id)      OVER w2 AS next_id_of_last_status
   FROM  (
      SELECT *, lead(id) OVER (PARTITION BY status ORDER BY id) AS next_id
      FROM   t1
      ) AS t
   WINDOW w2 AS (PARTITION BY val ORDER BY id)
  ) x
WHERE (last_val <> val OR last_status <> status)
AND   (status = 1 
       OR last_status = 1
          AND ((next_id_of_last_status > id) OR next_id_of_last_status IS NULL)
      )
ORDER  BY id 
```

除了[我们已经拥有的](https://stackoverflow.com/a/12467777/939860)，我们还需要有效的 OFF 开关。

如果设备在 ( )之前`OFF`切换并且之后的下一个操作在相关切换( ) 之后进行，则切换有效。`ON``last_status = 1``ON``OFF``next_id_of_last_status > id`

我们必须提供最后一次`ON`操作的特殊情况，所以我们检查`NULL`加法（`OR next_id_of_last_status IS NULL`）。

来自`next_id_of_last_status`我们从中获取的同一窗口`last_status`。因此我为显式窗口声明引入了额外的语法，所以我不必重复自己：

```
WINDOW w2 AS (PARTITION BY val ORDER BY id) 
```

我们需要在之前的子查询（subquery `t`）中获取最后一个状态的下一个 id。

如果您已经理解了所有*这些*`lead()`，那么在此查询之上进行处理以到达最终目的地应该没有问题。:)

### PL/pgSQL 函数

一旦变得如此复杂，就该切换到程序处理了。

这个相对简单的**plpgsql 函数**削弱了复杂窗口函数查询的性能，原因很简单，它只需扫描整个表一次。

```
CREATE OR REPLACE FUNCTION valid_t1 (OUT t t1)  -- row variable of table type
  RETURNS SETOF t1 LANGUAGE plpgsql AS
$func$
DECLARE
   _last_on int := -1;  -- init with impossible value
BEGIN

FOR t IN
   SELECT * FROM t1 ORDER BY id
LOOP
   IF t.status = 1 THEN
      IF _last_on <> t.val THEN
         RETURN NEXT;
         _last_on := t.val;
      END IF;
   ELSE
      IF _last_on = t.val THEN
         RETURN NEXT;
         _last_on := -1;
      END IF;
   END IF;
END LOOP;

END
$func$; 
```

称呼：

```
SELECT * FROM valid_t1(); 
```

# python - 硒悬停在元素上

> ID：12480819
> 
> 赞同：0
> 
> 时间：2012-09-18T16:06:18.233
> 
> 标签：python, selenium, hover

如何将鼠标悬停在某个元素上一段时间，组合框子菜单中有隐藏的项目，除非我在子菜单上悬停 1-5 秒，否则它不会显示。基本上在python中，我如何设置将鼠标悬停在元素上的时间量？

至今：

```
from selenium import webdriver
from selenium.webdriver.common.action_chains import ActionChains

firefox = webdriver.Firefox()
firefox.get('')
element_to_hover_over = firefox.find_element_by_id("")

hover = ActionChains(firefox).move_to_element(element_to_hover_over)
hover.perform() 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-18T17:23:08.510

我认为您正在寻找类似[time.sleep的东西](http://docs.python.org/library/time.html#time.sleep)

```
# Pause for 5 seconds
import time
time.sleep(5) 
```

尽管如果您使用 1-5 秒作为超时条件，您也可以使用 Selenium 的`WebDriverWait`功能（请参阅[文档](http://seleniumhq.org/docs/04_webdriver_advanced.html#explicit-waits)）等待 1-5 秒后发生的任何事情。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-19T16:49:10.327

我建议寻找一种创造性的方式来解决它。通常，悬停菜单通过 javascript 片段激活或停用可见性，并且选项的实际编码在它们出现在网页上之前在功能上就在那里。如果您使用 selenium 刮取隐藏文本的组合框元素，然后使用 selenium 的内置 select 函数来操作组合框，您可能会找到一种方法来操作组合框，而无需求助于实际的鼠标操作（一个错误且不是很操作网页的可靠方法）。

# opengl - 如何在 openGL 纹理上使用 Cuda NPP（NVIDIA 性能基元）

> ID：12480821
> 
> 赞同：2
> 
> 时间：2012-09-18T16:06:26.743
> 
> 标签：opengl, cuda, textures

我目前正在开发一个项目，我在其中进行大量视频处理。该项目使用 C++、openGL 和 glsl。最近我向它添加了一些 CUDA 例程，以进行一些更高级的图像处理工作。我设法在 cuda 中使用 openGL 纹理，但是现在我正在尝试使用带有 openGL 纹理作为输入的一些 cuda 的 npp 函数（没有成功）。

例如我想计算平均值和标准差。预处理输入openGL纹理的偏差：

```
//I first connect the cudaGraphicsResource to a cudaArray 
//cudaGraphicsResource_t inputImage is input passed from openGL framework
cudaGraphicsMapResources(1,&inputImage);
cudaArray* inputImgArray = NULL;
cudaGraphicsSubResourceGetMappedArray(&inputArray, inputImage,0,0);

//Next I do some preparationwork and cast the cudaArray to a Npp8u* and give
//it as an input source imagebuffer to the npp routine.
NppiSize roi={imgwidth, imgheight};
int bufferSize = 0;
nppiMeanStdDev8uC1RGetBufferHostSize(roi,bufferSize);
double mean = 0;
double stdDev = 0;
Npp8u* scratch =  nppsMalloc_8f(bufferSize);
int stepSize = imgWidth * sizeof(unsigned char);
NppStatus status = nppiMean_stdDev_8u_C1R((Npp8u*)inputImgArray, stepSize, roi, scratch,&mean,&stdDev);

//cleanup
nppsFree(bufferSize);
cudaGraphicsUnmapresources(1,&inputImage); 
```

nppiMean_stdDev_8u_C1R 函数总是返回错误代码：NPP_MEMCPY_ERROR。我到处查看手册，但找不到这是否是使用 NPP 和 opengl 纹理的正确方法。我在互联网上也找不到任何东西。我不敢相信我是第一个试图用 NPP 做这些事情的人。也许我只是错过了一份重要文件中的一个重要章节:-)。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-19T00:09:07.020

您需要将设备指针传递给 NPP，而不是 CUDA 数组。所以在你的情况下，我认为你想使用[`cudaGraphicsResourceGetMappedPointer`](http://developer.download.nvidia.com/compute/cuda/4_2/rel/toolkit/docs/online/group__CUDART__INTEROP_ge7f893864a3d38a630e71a99f5a4e17f.html#ge7f893864a3d38a630e71a99f5a4e17f)而不是`cudaGraphicsSubResourceGetMappedArray`.

例如：（**免责声明**：此代码是在浏览器中编写的，未经测试，未经验证。）

```
//I first connect the cudaGraphicsResource to a cudaArray 
//cudaGraphicsResource_t inputImage is input passed from openGL framework
cudaGraphicsMapResources(1,&inputImage);
unsigned char* inputPtr = NULL; // to hold device pointer to input image
size_t inputSize;
cudaGraphicsResourceGetMappedPointer((void**)&inputPtr, &inputSize, inputImage);

//Next I do some preparation work and cast the device pointer to a Npp8u* and give
//it as an input source imagebuffer to the npp routine.
NppiSize roi={imgwidth, imgheight};
int bufferSize = 0;
nppiMeanStdDev8uC1RGetBufferHostSize(roi, &bufferSize); // note & missing from original!
double mean = 0;
double stdDev = 0;
Npp8u* scratch =  nppsMalloc_8f(bufferSize);
int stepSize = imgWidth * sizeof(unsigned char);
NppStatus status = nppiMean_stdDev_8u_C1R((Npp8u*)inputPtr, stepSize, roi, scratch, &mean, &stdDev);

//cleanup
nppsFree(bufferSize);
cudaGraphicsUnmapresources(1,&inputImage); 
```

# c# - Xdocument.load() 不会随着 xml 文件更新而刷新

> ID：12480823
> 
> 赞同：1
> 
> 时间：2012-09-18T16:06:32.983
> 
> 标签：c#, linq-to-xml

我正在尝试构建一个小型桌面记分牌，它可以在 C# 中获取和显示现场比赛得分。现在，当我在单击按钮时调用 Xdocument.load(url) 方法时，它仅第一次加载最新分数，然后即使 Xdocument.load() 被定义为在按钮单击时运行（以及何时运行），它也会继续显示相同的分数表单加载，但我认为这不会有所作为）。现在我在 google 和 stackoverflow 上发现的内容类似于查看文件何时更新以及相关内容。但所有这些都是针对本地 xml 文件的。我该如何解决我的问题？

```
 public Form1()
    {
        InitializeComponent();
       // WebRequest.DefaultCachePolicy = new RequestCachePolicy(RequestCacheLevel.Revalidate);   
        feed = XDocument.Load(url);

    }

    private void button1_Click(object sender, EventArgs e)
    {
        feed = XDocument.Load(url + "?_=" + Guid.NewGuid().ToString());
         feed=XDocument.Load(url);
       // var nofmlive = feed.Root.Element("match").Attribute("srs");
        var output = GetItems();
        foreach (var v in output) {
       //rest of the code,,just to get and show data of all matches which are currently live 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-18T16:11:31.353

也许`XDocument`正在缓存数据。尝试通过附加一个 Guid 查询字符串参数来破坏缓存：

```
var doc = XDocument.Load(url + "?_=" + Guid.NewGuid().ToString()); 
```

如果您在 url 中已经有查询字符串参数，请调整`?`with 。`&`

您也可以尝试更改缓存策略，但这种方法的缺点是它对所有 HTTP 请求都是全局的：

```
WebRequest.DefaultCachePolicy = new RequestCachePolicy(RequestCacheLevel.Revalidate);
var doc = XDocument.Load(url); 
```

或者，您可以尝试使用 WebClient 加载 XML，然后将其提供给 XDocument：

```
using (var client = new WebClient())
{
    string xml = client.DownloadString("http://synd.cricbuzz.com/j2me/1.0/livematches.xml?_=" + Guid.NewGuid().ToString());
    var doc = XDocument.Parse(xml);
} 
```

# c# - 是否有从字符串 [] 创建 CSV 值的标准方法？

> ID：12480827
> 
> 赞同：0
> 
> 时间：2012-09-18T16:06:43.247
> 
> 标签：c#, algorithm, csv, refactoring, richtextbox

我想从富文本框中的项目创建一个 CSV 字符串。我知道肯定有比我拼凑出来的更好的方法：

```
string CSVDuckbills = GetLinesAsCSV(richTextBoxDuckbills.Lines);
...
private string GetLinesAsCSV(string[] DuckbillLines)
{
    string DuckbillCSV = string.Empty;
    foreach (string item in DuckbillLines)
    {
        DuckbillCSV += string.Format("{0},", item);
    }
    return DuckbillCSV;
} 
```

一方面，我必须在最后去掉一个多余的逗号。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-18T16:10:08.660

您可以[`string.Join`](http://msdn.microsoft.com/en-us/library/system.string.join.aspx)更简单地使用：

```
string DuckbillCSV = string.Join(",", DuckbillLines); 
```

# c++ - 我的 Blackberry 10 Cascades（C++、Qt 和 QML）示例应用程序在启动时崩溃并出现以下错误

> ID：12480833
> 
> 赞同：2
> 
> 时间：2012-09-18T16:07:14.760
> 
> 标签：c++, qt, qml, blackberry-10

我正在尝试在 QNX Momentics IDE 中使用 C++、Qt 和 QML 制作示例 Blackberry 10 Cascades 应用程序，并在 Blackberry 10 Dev Alpha Simulator 中运行它。当我开始运行它时，我收到以下错误消息：

ApplicationPrivate::declarativeEngine：从非 UI 线程调用的错误 QThread(0x8067e48) ApplicationPrivate::declarativeEngine：从非 UI 线程调用的方法

我已经尝试在谷歌上搜索这些错误消息 - 但我只找到了一些实际适用于我的情况的链接 - 这些问题的解决方案似乎不适用于我。

我知道这与我试图从不同的 qml 文档中调用不同的类有关。（这是我之前遇到的问题——这就是我首先制作这个示例应用程序的原因——看看我是否可以弄清楚如何从不同的 qml 文档中调用不同的类）。

这是我的示例应用程序的代码。有 7 个文件 ( `main.qml`, `main.cpp`, `app.cpp`, `app.hpp`, `Page2.cpp`, `Page2.h`, `Page2.qml`)。如果有人能帮我解决这个问题，我将不胜感激 - 因为我不确定我做错了什么。

谢谢你。

（我已经从其他 6 个文件中取出`main.cpp`并减少了我认为是这个问题的关键部分的代码）。

我知道这个问题与我的`Page2`班级和`Page2.qml`文件有关。

（我认为问题是我必须做一些事情才能从多个 qml 文件中调用 qt 代码——我只是不知道那是什么）。

`main.qml`：

* * *

```
import bb.cascades 1.0

//-- create one page with a label and text
Page {
    content: Container {
        Button {
            text: "Page 2"
            onClicked: app.goToPage2
        }
    }
} 
```

* * *

从`app.cpp`

* * *

```
App::App()
{
    qmlRegisterType<App>("GDLiteBB", 1, 0, "app");
    qmlRegisterType<Page2>("GDLiteBB", 1, 0, "Page2");

    QmlDocument *qml = QmlDocument::create("main.qml");
    qml->setContextProperty("app", this);

    AbstractPane *root = qml->createRootNode<AbstractPane>();
    Application::setScene(root);
}

void App::goToPage2() {
    Page2::getInstance();
} 
```

* * *

从`app.hpp`

* * *

```
class App : public QObject
{
    Q_OBJECT
public:
    App();

    Q_INVOKABLE void goToPage2();
}; 
```

* * *

`Page2.cpp`

* * *

```
QmlDocument * Page2::qml_ = QmlDocument::create("Page2.qml");
AbstractPane * Page2::root_ = qml_->createRootNode<AbstractPane>();
Label * Page2::label_ = root_->findChild<Label *>("label");

Page2::Page2() : QObject() {
    ++count_;
    page2_ = this;
    qml_->setContextProperty("Page2", this);
    Application::setScene(root_);
}

Page2 *Page2::getInstance() {
    return page2_ ? page2_ : new Page2();
}

void Page2::setLabel() {
    label_->setText("This is page 2");
} 
```

* * *

`Page2.h`

* * *

```
class Page2 : public QObject {
    Q_OBJECT

    static Page2 *page2_;
    static unsigned int count_;

    static bb::cascades::QmlDocument *qml_;
    static bb::cascades::AbstractPane *root_;
    static bb::cascades::Label *label_;

    Page2();
public:
    static Page2 *getInstance();
    virtual ~Page2();

    Q_INVOKABLE void setLabel();
}; 
```

* * *

`Page2.qml`

* * *

```
import bb.cascades 1.0
import GDLiteBB 1.0

Page {
    content: Container {
        Button {
            text: "Set Label"
            onClicked: Page2.setLabel()
        }
        Label {
            objectName: "Label"
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-11T18:32:42.907

我认为您的问题是以下几行：

```
QmlDocument * Page2::qml_ = QmlDocument::create("Page2.qml");
AbstractPane * Page2::root_ = qml_->createRootNode<AbstractPane>();
Label * Page2::label_ = root_->findChild<Label *>("label"); 
```

一旦应用程序代码加载到内存中，这些对象就会被创建，这意味着它发生在事件循环开始之前`main()`。所有继承自 QObject 的类都需要在事件循环开始后创建，在事件循环结束前销毁。

# jquery - 使用 jQuery 展开/折叠 ul 列表 - 有问题

> ID：12480838
> 
> 赞同：12
> 
> 时间：2012-09-18T16:07:29.427
> 
> 标签：jquery

我正在尝试创建一个博客存档列表，该列表按年和月显示所有文章（我已经使用 PHP/MySQL 完成了）

现在我正在努力做到这一点，以便在页面加载时，所有年份都被折叠，除了最近的一年/月，而且每个年份都会在点击时折叠/展开。

目前，我的 jQuery 单击功能将打开或关闭所有 li 元素，而不仅仅是我单击的那个。我对 jQuery 还是很陌生，所以不知道如何让它只影响我单击的列表部分。

任何帮助都会很重要！

到目前为止，这是我的代码（列表是从 PHP/MySQL 循环生成的）

```
<ul class="archive_year">
<li id="years">2012</li>
    <ul class="archive_month">
        <li id="months">September</li>
            <ul class="archive_posts">
                <li id="posts">Product Review</li>
                <li id="posts">UK men forgotten how to act like Gentlemen</li>
                <li id="posts">What Do Mormons Believe? Ex-Mormon Speaks Out</li>
                <li id="posts">Here is a new post with lots of text and a long title</li>
            </ul>
        <li id="months">August</li>
            <ul class="archive_posts">
                <li id="posts">A blog post with an image!</li>
            </ul>
    </ul>
<li id="years">2011</li>
    <ul class="archive_month">
        <li id="months">July</li>
            <ul class="archive_posts">
                <li id="posts">New Blog!</li>
            </ul>
    </ul>
<li id="years">2009</li>
    <ul class="archive_month">
        <li id="months">January</li>
            <ul class="archive_posts">
                <li id="posts">Photography 101</li>
            </ul>
    </ul>
</ul>​ 
```

到目前为止，这是 jQuery：

```
$(document).ready(function() {

//$(".archive_month ul:gt(0)").hide();

$('.archive_month ul').hide();

$('.archive_year > li').click(function() {
    $(this).parent().find('ul').slideToggle();
});

$('.archive_month > li').click(function() {
    $(this).parent().find('ul').slideToggle();
});

}); 
```

我正在试验 $(".archive_month ul:gt(0)").hide(); 但它没有按预期工作，它会切换打开和关闭。

有什么帮助/想法吗？

此外，这里是一个现场例子的小提琴：http: [//jsfiddle.net/MrLuke/VNkM2/1/](http://jsfiddle.net/MrLuke/VNkM2/1/)

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2012-09-18T16:16:39.190

先说问题：

1.  **ID-s 必须是唯一的！**
2.  你必须正确嵌套你的`<li>`-s

* * *

这是解决问题的方法 -[**演示**](http://jsfiddle.net/VNkM2/2/)

***jQuery***

```
$('.archive_month ul').hide();

$('.months').click(function() {
    $(this).find('ul').slideToggle();
}); 
```

***HTML*** *（固定）*

```
<ul class="archive_year">
<li class="years">2012
    <ul class="archive_month">
        <li class="months">September
            <ul class="archive_posts">
                <li class="posts">Article 1</li>
                <li class="posts">Article 2</li>
                <li class="posts">Article 3</li>
                <li class="posts">Article 4</li>
            </ul>
        </li>
        <li class="months">August
            <ul class="archive_posts">
                <li class="posts">Article 1</li>
            </ul>
        </li>
    </ul>
</li>
<li class="years">2011</li>
    <ul class="archive_month">
        <li class="months">July
            <ul class="archive_posts">
                <li class="posts">Article 1</li>
            </ul>
        </li>
    </ul>
</li>
<li class="years">2009</li>
    <ul class="archive_month">
        <li class="months">January
            <ul class="archive_posts">
                <li class="posts">Article 1</li>
            </ul>
        </li>
    </ul>
</ul> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-07-19T09:39:18.113

我用它来显示我 ERP 中发票的历史记录，它就像一个魅力：

*   列表仅显示最后一个事件 (last `li`)
*   带有隐藏事件计数的“显示更多”元素
*   onclick，显示所有隐藏的事件并隐藏我的“显示更多”元素

在下面的示例中，已单击第二行“显示更多”元素：

[![ERP 发票历史 ul>li 带有隐藏元素的列表](../Images/3b0db3e8d39d2a3f57fc0031ee8c0611.png)](https://i.stack.imgur.com/lu90O.png)

**HTML / Smarty 模板：**

```
<td class="col-xs-2" id="iv-status-{$invoice.sale_invoice_id}">
    <ul class="history" id="history-{$invoice.sale_invoice_id}">
        {if $invoice.events|@count > 1}
            <li class="history-more">
                <i class="fal fa-ellipsis-h"></i> 
                afficher {$invoice.events|@count} évènements
            </li>
        {/if}
        <li class="history-hidden">
            <b>{$invoice.dates.created.timeline}</b><br>
            <i class="fal fa-file-plus"></i> Facture créée par {$invoice.log.employee.firstname}
        </li>
        {foreach $invoice.events as $ev}
            {if $ev.event == 'download'}
                <li class="history-hidden">
                    <b>{$ev.dates.timeline}</b><br>
                    <i class="fal fa-download"></i> Facture téléchargée par {$ev.employee.firstname}
                </li>
            {/if}
            {if $ev.event == 'print'}
                <li class="history-hidden">
                    <b>{$ev.dates.timeline}</b><br>
                    <i class="fal fa-print"></i> Facture imprimée par {$ev.employee.firstname}
                </li>
            {/if}
            ...
            {if $ev.event == 'close'}
                <li class="history-hidden">
                    <b>{$ev.dates.dateline}</b><br>
                    <i class="fal fa-file-check"></i> Facture clôturée par {$ev.employee.firstname}
                </li>
            {/if}
        {/foreach}
    </ul>
</td> 
```

**jQuery :**

```
$('.history').each(function() {
    $('.history li:last-child')
        .addClass('history-last')
        .removeClass('history-hidden');
    $(this).children('li.history-more').click(function(e) {
        ul = $(this).parent('ul').attr('id');
        $('#' + ul).children('li.history-more').hide();
        $('#' + ul).children('li.history-hidden').show();
    });
}); 
```

**CSS：**

```
li.history-more {
    cursor: pointer;
}
li.history-hidden {
    display: none;
} 
```

# interrupt - 中断合并

> ID：12480842
> 
> 赞同：3
> 
> 时间：2012-09-18T16:07:38.147
> 
> 标签：interrupt

以为它会发生在像千兆网络这样的高速网络中，但仍然想知道我们正在寻找这种现象发生的典型速度是多少。它会发生在支持 5-10 Mbps 最大速度的网络上吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2014-02-16T20:08:02.717

中断合并是一个非常有趣的概念，它有很多详细的方面。看看这个[视频](http://www.youtube.com/watch?v=MEftEMt-f7c)和这篇[文章](http://virtualirfan.com/history-of-interrupts)，了解中断是如何工作的以及如何理解它们的背景知识。

简而言之，在大多数中断合并方案中，有两个变量控制它们：

*   最大中断延迟延迟 (MIDL)。就像最后期限：一旦控制器收到硬件完成，允许等待多长时间才能中断处理器。延迟的想法是限制每秒中断可能发生的次数，并幸运地在指定时间段内到达更多硬件完成。
*   最大聚结计数 (MCC)。IO 控制器向处理器提供中断传递之前的硬件完成次数。

令人着迷的中断历史，尤其是关于 Edsgar Djikstra 是如何被他们吓坏的（视频也讨论了这一点）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-18T20:32:28.793

当设备每秒产生超过 5000 个中断时，中断合并是有意义的。合并以事务延迟为代价提高吞吐量，这对于批量数据移动是有意义的。对延迟敏感的工作负载可能不希望以任何线路速率合并。无论如何，接收全尺寸数据包的 10Mbps 线路每秒约为 650 个数据包，因此可能不值得。一条 100Mbps 的线路可以达到该速率的 10 倍，因此中断合并开始变得有意义。在 1Gbps 时，合并对于吞吐量变得非常重要。

对于您是否会看到合并的问题，最直接的答案取决于您的特定网络设备是否支持此功能。平台不能单方面对设备强加中断合并。

# css - 如何更改引导链接的颜色

> ID：12480847
> 
> 赞同：2
> 
> 时间：2012-09-18T16:08:02.640
> 
> 标签：css, ruby-on-rails, ruby, twitter-bootstrap, twitter-bootstrap-rails

我正在使用 twitter bootstrap，我有一些这样的代码：

```
<%= link_to "Create", new_something_path %> 
```

它将文本呈现为浅蓝色，将其突出显示为链接。

我将如何引用该元素以通过 css 更改它？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-18T16:22:11.497

给链接一个类名

```
<%= link_to 'Create', new_something_path , :class => "newsomething"%> 
```

将以下内容添加到您的 CSS.SCSS 文件中

```
 a.newsomething{
      color: #000;
      &:hover {
         color: #000;
       }
     } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-18T16:20:53.930

`link_to`您可以通过在哈希中设置CSS 类或 id 来添加它`html_options`，这是`link_to`帮助程序的最后一个参数。

例如，使用 Ruby 1.9 哈希语法（`:key => 'value'`如果使用 Ruby 1.8，则转换为）：

只是 CSS 选择器`.new-something-class`：

`<%= link_to "Create", new_something_path, class: 'new-something-class' %>`

或与 CSS 选择器的链接`#new-something-id`和`.new-something-class`：

`<%= link_to "Create", new_something_path, class: 'new-something-class', id: 'new-something-id' %>`

然后，您可以`.css`像往常一样在文件中引用此元素。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-09-18T16:13:41.700

如果您安装了 twitter 引导程序：

```
<%= link_to 'Create', new_something_path , :class => "btn btn-primary some-class"%> 
```

css

```
.some-class{
   color: black;
   ....    
} 
```

# hibernate - 如何使用hibernate根据其多对多属性查询某个实体的列表，而不过滤掉多对多属性上的项目？

> ID：12480854
> 
> 赞同：0
> 
> 时间：2012-09-18T16:08:24.673
> 
> 标签：hibernate, many-to-many, criteria

我有一个`Foo`与多对多关系的实体类`Bar`

```
...
<class name="Foo">
    ...
    <set name="bars" table="FooBar" lazy="true" batch-size="100" fetch="select">
        <key column="FooID" />
        <many-to-many column="BarID" class="Bar" />
    </set>
    ...
</class>
... 
```

我正在尝试制作一个搜索屏幕，允许用户搜索`Foo`附加到特定`Bar`. `Bar`每个附加的所有s`Foo`都应显示在搜索结果中。

所以我尝试了这段代码：

```
criteria.createAlias("bars", "bar", CriteriaSpecification.LEFT_JOIN);
criteria.add(Restrictions.eq("bar.id", barID)); 
```

`Foo`这可以很好地过滤记录。但它也会过滤`bars`属性。所以我添加了这一行：

```
criteria.setFetchMode("bars", FetchMode.SELECT) 
```

但这并没有做任何事情。

我在休眠会话的 Bar 上没有任何休眠过滤器。谁能帮我？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-10T22:10:49.717

Tom，由于您想返回`Foo`附加到特定 s 的 s `Bar`，因此您不需要使用左连接。您可以使用内部连接，然后`Bar`将通过 N+1 个选择获取 s（1 个选择以获取过滤`Foo`后的 s，然后每个`Foo`返回一个选择以获取其`Bar`s）。

我上面的代码与您的代码非常相似，我注意到左连接会强制`Bar`s 集合从初始结果集中加载，而内连接将使用 N+1 选择。我还尝试指定获取模式无效。就我而言，我不能使用内连接，因为我使用需要左连接的过滤器。例如：

```
criteria.add(Restrictions.not(Restrictions.ilike("bar.name", "FizzBuzz"))); 
```

在这种情况下，应该返回`Foo`没有's 的 a，因为它没有名为“FizzBu​​zz”的名称，但使用内部连接将消除所有没有s 的内容。如果其他人可以为汤姆的问题提供仍然使用左连接的替代答案，将不胜感激！`Bar``Bar``Foo``Bar`

编辑：我发现了一个 Hibernate 错误报告，其中指出“如果将它与 createCriteria 结合以添加限制，则会忽略criteria.setFetchMode”：

[https://hibernate.onjira.com/browse/HHH-3524](https://hibernate.onjira.com/browse/HHH-3524)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-19T11:46:02.940

当您对集合项目有过滤器时，集合不会被初始化，并且稍后会在访问时懒惰地获取。也许 Hibernate 无法匹配 bar 和 barId。尝试

```
criteria.createAlias("bars", "bar", CriteriaSpecification.LEFT_JOIN);
criteria.add(Restrictions.eq("bar.id", barID)); 
```

# quicksort - 如果所有输入数字都相等，快速排序需要多少次比较

> ID：12480855
> 
> 赞同：0
> 
> 时间：2012-09-18T16:08:30.790
> 
> 标签：quicksort

我有一个相同的 N 个数字数组。我正在对其应用快速排序。在这种情况下，排序的时间复杂度应该是多少。

我仔细研究了这个问题，但没有得到确切的解释。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-18T16:22:38.703

它总是会进行相同的比较计数（如果您使用纯快速排序），因为它必须检查所有数字（除非您添加一些特殊功能，它将检查像这样的特殊情况）。但它不必切换任何数字，所以这是最好的情况，因此它的复杂度应该是（n log n）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-23T01:10:28.897

一个天真的快速排序算法将是`O(n^2)`. 即使它具有*更智能*的枢轴选择算法也是如此。为了避免`O(n^2)`，快速排序算法需要为每个主元（小于、等于、大于）将数字分成 3 个集合。

更智能的枢轴选择算法是：

*   一个基于启发式（例如，选择从第一个元素、中间元素和最后一个元素获得的候选枢轴的中位数）
*   一个用于`O(n log n)`保证 - 不会在这里讨论，但这样的算法可以保证枢轴来自，例如，排序数组的 25-75% 之间。

然而，大多数普通的快速排序算法将数字划分为小于或大于枢轴的数字。等于枢轴的那些与大于或小于枢轴的那些任意捆绑。

在所有数字相等的情况下，每个分区将只产生一个分区 - 因此每次仅将剩余分区的大小减少 1。

为了避免这种情况，快速排序算法需要将数字分成 3 组 - 小于、大于和等于主元。

# python - 使用 QXmlStreamReader 解析 XML 不会返回所有元素

> ID：12480871
> 
> 赞同：3
> 
> 时间：2012-09-18T16:09:24.197
> 
> 标签：python, xml, qt, pyqt, qxmlstreamreader

我正在尝试`XML`使用`QXmlStreamReader`. 使用以下代码，我只能从示例 xml 文件中获取第一个测试用例。

```
from PyQt4.QtCore import QXmlStreamReader, QFile, QIODevice

class TestcaseReader(object):
    def __init__(self, filename):
        file = QFile(filename)
        file.open(QIODevice.ReadOnly)
        self.xml = QXmlStreamReader(file)

        while not self.xml.atEnd():
            self.xml.readNext()
            if self.xml.isStartElement():
                if self.xml.name() == "Testcase":
                    self.parse_testcase()

    def parse_testcase(self):
        print("Parse Testcase")
        while self.xml.readNextStartElement():
            if self.xml.name() == "Type":
                measurement = self.xml.readElementText()
                print("Type: " + measurement)
            elif self.xml.name() == "Attributes":
                name = self.xml.attributes().value("name")
                strname = self.xml.attributes().value("strname")
                elementtype = self.xml.attributes().value("type")
                value = self.xml.attributes().value("value")
                print("Attributes: ", name, strname, elementtype, value)

if __name__ == "__main__":
    print("XML Reader")
    xml = TestcaseReader("test.xml") 
```

这是我的 XML 文件：

```
<?xml version="1.0" encoding="UTF-8" ?>
<Testcases>
    <Testcase>
        <Type>Testtype1</Type>
        <Attributes name="testattr1" strname="Testattribute 1" type="float" value="1.0">
        <Attributes name="testattr2" strname="Testattribute 2" type="str" value="test">
    </Testcase> 
    <Testcase>
        <Type>Testtype2</Type>
        <Attributes name="testattr1" strname="Testattribute 1" type="float" value="2.0">
        <Attributes name="testattr2" strname="Testattribute 2" type="str" value="test">
    </Testcase>
</Testcases> 
```

`Testcase`从QXmlStreamReader解析第一个`Testcases`返回后，它位于末尾，因此停止进一步解析。如何从 xml 文件中读取所有测试用例？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-18T17:15:45.677

由于数据 QXmlStreamReader 以增量方式读取数据，因此 QIODevice 的缓冲区中可能并非所有数据都可用。从慢速设备（例如网络套接字）读取数据时尤其如此，但从本地文件读取数据时也会发生这种情况。

[阅读QXmlStreamReader 文档的“增量解析”部分中](http://qt-project.org/doc/qt-4.8/QXmlStreamReader.html#incremental-parsing)有关如何处理以块形式到达的数据的更多信息。

此外，您的 XML 无效，它应该读取`<Attributes ... />`而不是`<Attributes ...>`. 例如，对于第一个：

```
<Attributes name="testattr1" strname="Testattribute 1" type="float" value="1.0"/> 
```

QXmlStreamReader 的 error()、errorString()、errorLine() 和 errorColumn() 应该为您提供调试此类问题所需的所有信息。（检查错误并正确报告它们是一种很好的做法）。

# xcode - 模拟停止后的 Xcode 4.4.1 CPU hog

> ID：12480875
> 
> 赞同：0
> 
> 时间：2012-09-18T16:09:36.380
> 
> 标签：xcode, cpu-usage

我的 Xcode 似乎发生了一些事情。

第一次运行项目时它运行良好，但是当我停止执行时，100% 的 CPU 一直被 Xcode 吃掉，如果我再次尝试运行项目，CPU 升级到吃掉几乎 200% 的 CPU 然后冻结 Xcode .

如果杀死 Xcode 然后再次启动它，该过程会重复，只有第一次运行顺利，当停止时 CPU 会以 100% 的速度被占用。

在寻找答案时，我注意到在等待大约 15 分钟左右内存被占用 100% 后，Xcode 突然释放它。

尝试重新启动 Xcode 和计算机，但没有成功。

请问有什么建议吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-18T16:18:46.580

冒着听起来像“修复磁盘权限”灵丹妙药的风险，您可能想尝试删除项目的 DerivedData 文件夹。它在`~/Library/Developer/Xcode/DerivedData`。有多个报告（一些来自我信任的人）表明 Xcode 经常因为该文件夹中的数据损坏而感到困惑。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-21T04:08:59.880

似乎 Xcode 4.5 解决了这个问题。

# android - android相机保存文件错误

> ID：12480881
> 
> 赞同：0
> 
> 时间：2012-09-18T16:10:06.577
> 
> 标签：android, camera

我正在开发一个基于相机功能的安卓应用程序。我在我的程序中遇到了一些我无法弄清楚的问题。My`mCurrentImagePath`在初始化时始终为空。logcat 显示它永远不会命中`takepicture()`函数，因此它永远不会被赋予值。我试图让线程休眠，以便稍后对位图的操作可以等到相机很好地保存图片，但它仍然无法正常工作。但是如果我不看我拍的照片，应用程序运行完美，它可以很好地保存照片。我也尝试使用`bitmapfactory.decodebyte()`直接对元数据进行操作，但也失败了。任何人都可以告诉我我错了哪一部分？那真的很有帮助。非常感谢你！！！

```
private static final String IMAGE_DIRECTORY ="sdcard/DCIM/Camera";
public static String mCurrentImagePath = null;
private CameraView cv;
private Camera mCamera = null;

public Camera.PictureCallback pictureCallback = new Camera.PictureCallback() {

    public void onPictureTaken(byte[] data, Camera camera) {

        try{
            isFinish = false;
            long timeTaken = System.currentTimeMillis();
            mCurrentImagePath = IMAGE_DIRECTORY + "/"+ createName(timeTaken) + ".jpg";
            File file = new File(mCurrentImagePath);
            Log.d("path", "mCurrentImagePath_takepicture = " + mCurrentImagePath);
            FileOutputStream fos = new FileOutputStream(file);
            fos.write(data);
            fos.flush();
            fos.close();
            Toast.makeText(OpenASURF.this, "saving the picture", Toast.LENGTH_SHORT).show();
            isFinish = true;
        }
        catch(IOException e) {
            e.printStackTrace();
        }
        mCamera.startPreview();
        // TODO Auto-generated method stub
    }
}; 

cv.setOnClickListener(new View.OnClickListener() {
    public void onClick(View v) {
        if(mCamera != null) {
            mCamera.takePicture(null, null, pictureCallback);
            // let the system wait until finish taking the pictures.
            //while(isFinish == false) {
            try {
                Thread.sleep(20000);
            } catch (InterruptedException e) {
                // TODO Auto-generated catch block
                e.printStackTrace();
            }
            //}
            Log.d("path", "mCurrentImagePath_over1 = " + mCurrentImagePath);
            Bitmap bmp = null;

            bmp = BitmapFactory.decodeFile(mCurrentImagePath);
            Log.d("path", "mCurrentImagePath_over2 = " + mCurrentImagePath);
        } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-18T20:51:27.147

是否`IMAGE_DIRECTORY`正确？我希望它是`/sdcard/DCIM/Camera`，带有开头的正斜杠。

更好的是以正确的方式获取图像路径：[DIRECTORY_PICTURES](http://developer.android.com/guide/topics/media/camera.html#saving-media)

```
File path = Environment.getExternalStoragePublicDirectory(Environment.DIRECTORY_PICTURES);
File file = new File(path, "DemoPicture.jpg"); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-19T07:07:42.757

不管你等多久`takePicture()`，`onPictureTaken()`回调只会在你`OnClick()`返回后被调用：它们都使用应用程序主线程。

你可以打电话

```
BitmapFactory.decodeFile(mCurrentImagePath); 
```

在您的 中`onPictureTaken()`，或者您可以将事件发布`onPictureTaken()`到您的活动中。

# ios - 找不到头文件

> ID：12480882
> 
> 赞同：3
> 
> 时间：2012-09-18T16:10:07.817
> 
> 标签：ios, xcode, import, header-files

我正在开发一个 iphone 应用程序，一切都很顺利，直到我尝试导入 NSFetchedResultsController.h。当我输入这个 Xcode 时，它​​为我完成了。但现在它给出了错误：找不到 NSFetchedResultsController.h 文件。

我像这样包括它：

```
#import "NSFetchedResultsController.h" 
```

我在整个互联网上寻找答案，但没有任何效果。（有些事情需要 Xcode 4.3 才能工作）。

我在雪豹上使用 Xcode 4.2。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-18T18:18:21.157

“NSFetchedResultsController.h”是 CoreData 框架的一部分，你必须

```
#import <CoreData/CoreData.h> 
```

您还必须将 CoreData 框架添加到与您的应用程序链接的库中：

*   在 Xcode 中选择您的目标。
*   单击“构建阶段”。
*   在“Link Binary With Libraries”部分，单击“+”并添加“CoreData.framework”。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-09-18T20:04:56.873

事实上，在大多数情况下，您确实不需要手动导入标头。只需添加 Coredata.framework 来构建阶段，如下所示：

![在此处输入图像描述](../Images/b55151ad18688f88d45ede1ec72f1df3.png)

![在此处输入图像描述](../Images/a08e4fc0d245a5c9b5f04a85263d7b71.png)

现在在项目导航器中查看左侧，您会看到添加了 CoreData.framework。打开 Header 文件夹，您就可以找到 NSFetchedResultsController.h。为了测试它的存在，你可以输入：

> 核心数据/NSFet

瞧，代码建议告诉你你想要什么。看下面的图片：

![在此处输入图像描述](../Images/75f0861ef6b9f0dc0b8111b53b2ac6c9.png)

重要提示：这仅适用于 iOS 3 或更高版本

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-09-19T09:50:57.327

抱歉，如果这个讨论对于高级程序员来说是非常基础的，但它可能对最近迁移到 Cocoa 的高级程序员或 Cocoa/Xcode 的初学者有用。这可能值得一看。

当您想添加默认情况下不包含的新标头时，您可以先在 Google 中搜索 Apple Developer 中的该类引用（您可以直接从 Xcode > Organizer（在 Xcode 窗口的右上角）执行此操作）您应该会看到一个像这样的页面：

![在此处输入图像描述](../Images/72457bee5055a314dd8e6491ac5e6c5b.png)

最重要的两件事是： 1- 框架 2- 继承自，
然后检查您的构建阶段中的框架> 将二进制文件与库链接，如果不存在则添加它。通过 This ，您将永远不会遇到这样的问题。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-18T16:16:08.877

检查项目文件夹中是否存在该文件，如果是，进入项目，选择目标部分下的应用程序，进入构建阶段，打开编译源然后添加文件`NSFetchedResultsController.m`。

# javascript - 按类名获取上一个/上一个元素

> ID：12480886
> 
> 赞同：0
> 
> 时间：2012-09-18T16:10:38.863
> 
> 标签：javascript

让我们估计我们有如下排列的元素：

```
<div><input class="elementToGet" value="1"></div>           // st elementToGet
<div><span class"button">get prev elementToGet</span></div> // Nr1
<div><span class"button">get prev elementToGet</span></div> // Nr2
<div><span class"button">get prev elementToGet</span></div> // Nr3
<div><input class="elementToGet" value="2"></div>           // nd elementToGet
<div><span class"button">get prev elementToGet</span></div> // Nr4
<div><span class"button">get prev elementToGet</span></div> // Nr5
<div><span class"button">get prev elementToGet</span></div> // Nr6 
```

如何获得`elementToGet`每个跨度的前一个？

例如，从 4 开始编号的元素将获得第二个`elementToGet`.

无需框架的 Javascript。

```
function getPrev(className) {
    var items = [], myPosts = document.getElementsByClassName(className);

    for (var i = 0; i < myPosts.length; i++) {

        // I have no ideas what to do next

        items.push(myPosts[i]);
    }
    return items[0];
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-18T16:27:57.467

[`parentNode`](https://developer.mozilla.org/en-US/docs/DOM/Node.parentNode)要得到你想要的，你可以`div`使用`span`. 然后你可以使用[`previousSibling`](https://developer.mozilla.org/en-US/docs/DOM/Node.previousSibling)遍历 DOM 并使用找到你想要的输入。~~[`childNodes`](https://developer.mozilla.org/en-US/docs/DOM/Node.childNodes)~~ [`firstChild`](https://developer.mozilla.org/en-US/docs/DOM/Node.firstChild)

我很快就破解了：

```
var span = document.getElementsByClassName('button')[4], // one of the "button" spans
    div = span.parentNode, // get the span's parent div
    ele,  // variable to hold the element we are looking for
    temp; // temp var for the loop

while ((div = div.previousSibling) !== null) {  // Loop through all the previous divs
    temp = div.firstChild;  // get the div's children
    if (temp && temp.className === 'elementToGet') { // does it's 1st child have the class?
        ele = temp;  // we found it!
        break;
    }
}
alert(ele.value);​ 
```

演示：http: [//jsfiddle.net/zH4SU/1/](http://jsfiddle.net/zH4SU/1/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-18T16:13:06.673

如果您使用的是 JQuery，您可以使用[.closest()](http://api.jquery.com/closest/)，它会向上遍历 DOM 树

# javascript - frameBuffer, html5 canvas Audio API, 不安全操作错误

> ID：12480892
> 
> 赞同：0
> 
> 时间：2012-09-18T16:11:04.723
> 
> 标签：javascript, html, canvas, html5-audio

我只是在玩 html5 画布，我想为声音播放制作频谱。我已经遵循了几个教程，但它一直告诉我该操作不安全。我从这里复制粘贴了直接代码：[https](https://developer.mozilla.org/en-US/docs/Introducing_the_Audio_API_Extension) ://developer.mozilla.org/en-US/docs/Introducing_the_Audio_API_Extension我知道 frameBuffer 有效，因为我也尝试了这里的代码片段：[http://videos.mozilla。 org/serv/blizzard/audio-slideshow/#slide2](http://videos.mozilla.org/serv/blizzard/audio-slideshow/#slide2)

它似乎在这个站点上运行完美，但是当我将代码复制到我的站点时，它就不起作用了。

这是一个jsfiddle（必须在FF 14中打开>）：http: [//jsfiddle.net/6GMVC/2/](http://jsfiddle.net/6GMVC/2/)

我得到的错误是：

```
SecurityError: The operation is insecure.
var frameBuffer = event.frameBuffer; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-18T16:23:17.783

看起来像一个跨域错误——这里有一个类似问题的讨论：

[“安全错误”代码：音频 API 示例中的“1000”](https://stackoverflow.com/questions/5677985/security-error-code-1000-in-audio-api-example)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-18T16:48:37.253

大多数浏览器拒绝对许多 html5 元素使用跨域包含。尝试使用位于同一服务器/域/本地主机上的音频文件

如果您没有为您的项目运行服务器，（仅使用 .html 文件即可）尝试从本地主机服务器打开它，而不是（例如）桌面上的文件夹

在这里你可以找到一个免费使用的 apache 服务器[http://www.apachefriends.org/en/xampp.html](http://www.apachefriends.org/en/xampp.html)

# asp.net - 这些在 ASP.NET Web Forms 4.5 中引用捆绑 CSS 的方法有什么区别？

> ID：12480895
> 
> 赞同：12
> 
> 时间：2012-09-18T16:11:18.177
> 
> 标签：asp.net, css, bundle, webforms, .net-4.5

我使用 Visual Studio 2012 和内置模板（在 Add -> New Project 下）创建了一个面向 .NET Framework 4.5 的全新 ASP.NET Web Forms Web 应用程序项目。在默认提供的 Site.Master 页面中，我看到一些包含页面上的 CSS 的标记，如下所示：

```
<webopt:BundleReference runat="server" Path="~/Content/css" /> 
```

但是，我注意到我可以使用其他代码来代替......

```
<%: Styles.Render("~/Content/css") %> 
```

当我查看呈现的页面时，结果似乎是一样的。使用 webopt:BundleReference 和使用 Styles.Render 有什么区别？

其中一种方法比另一种更好吗？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-09-18T17:31:09.560

该`<%: Styles.Render %>`语法适用于 ASP.NET MVC（它不能使用 ASP.NET 控件，因为它们没有真正的页面上下文可供使用）。该`BundleReference`控件用于 WebForms。

ASP.NET MVC 可以使用 WebForms 作为视图引擎来替代 Razor（您会看到太多的“@”符号），这就是为什么会有一些交叉。

我想他们添加了 Control 以保持一致，而不是要求 WebForms 人员使用页面的呈现功能（`<%`标签）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-11T21:30:43.093

> 当我查看呈现的页面时，结果似乎是一样的。使用 webopt:BundleReference 和使用 Styles.Render 有什么区别？

据了解，BundleReference 不仅用于包含脚本和样式引用，还用于将它们捆绑在一起以提高带宽效率。请参阅教程[捆绑和缩小](http://www.asp.net/mvc/tutorials/mvc-4/bundling-and-minification)。我认为后者只是包含一个或多个符合 URL 模式的脚本的助手。

# sql - 根据特定列从 cfquery 中删除重复项

> ID：12480900
> 
> 赞同：1
> 
> 时间：2012-09-18T16:11:32.523
> 
> 标签：sql, coldfusion, cfquery

我有两个具有相同列名的 cfquery 结果。我想以这样一种方式合并它们，即我根据特定的列删除重复项。

所以它应该像合并查询 1 和查询 2，其中 query1.column1 > query2.column1 的值

有没有办法通过 MS SQL 完成这项工作？

我的结果集目前是这样的

```
|name |value| temp_id
test1   1     001
test1   2         001
test2   2         002
test2   1         002 
```

我想获得具有不同列（名称）和最大值的行

所以从上面的例子中我想要

值为 2 的 test1 和值为 2 的 test 2

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-18T17:22:46.570

如果您只想获取名称和最大值，那么您可以这样做

```
SELECT name, MAX(value) AS value
FROM yourtable
GROUP BY name 
```

# php - 如何移动 wordpress 插件的输出

> ID：12480901
> 
> 赞同：0
> 
> 时间：2012-09-18T16:11:45.373
> 
> 标签：php, html, css, wordpress, plugins

我想做的是将wordpress插件生成的内容移动到页面的另一部分。该插件是“Tweet、Like、Share 和 Google +1”。它基本上允许您在帖子中轻松插入标准分享按钮（Tweet、g+、like、share..）。

在它的控制面板中，我可以决定是否将其显示在帖子顶部、帖子底部或两者兼而有之。问题是我使用的模板有一个特定的部分，旨在嵌入这些共享选项（share_box div），因此，我想在那里显示按钮。

这就是我所拥有的： ![我有的](../Images/615911c9466a81d766d736d932a8c2f4.png)

这就是我想要的： ![我想要的是](../Images/f22e7e37da3631657a07900ba952cb9e.png)

我没有编辑插件的经验，但如果提供了这些按钮的某种代码，我将能够自己完成这项任务。

如果我转到插件 > 编辑器并选择此插件，我可以编辑插件文件 - “only-tweet-like-share-and-google-1/tweet-like-plusone.php”。

因为可能有必要看一下，所以我把它贴在这里 - [http://pastebin.com/jNecxvtT](http://pastebin.com/jNecxvtT)

如何使插件将其内容输出到 share_box div？

谢谢 ：）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-18T16:34:08.307

我会帮你走的。该插件使用 Wordpress 过滤器挂钩自动将其创建的输出附加到每个帖子的末尾。过滤钩是；

```
add_filter('the_content', 'disp_social',1); 
```

因此它运行该方法`disp_social()`并将返回的内容应用到您的帖子末尾。

您将修改作为参数传入的 $content ，以便将其包装在允许您对其进行样式设置的标记中。在下面的例子中，我将它包装在一个带有 class 的 div 中`social_div`。如果您保持变量名称相同，那么`return $content`出现在各个地方的变量不需要更改。

```
function disp_social($content) {

   $oldcontent = $content;
   $content = '<div class="social_div">'. $oldcontent .'</div>';

} 
```

# ffmpeg - 如何对多个比特率输出文件使用 ffmpeg / x264 2-Pass 编码

> ID：12480902
> 
> 赞同：3
> 
> 时间：2012-09-18T16:11:45.600
> 
> 标签：ffmpeg, x264

在对多个输出文件执行 2-Pass 编码时，我收到了错误

```
ratecontrol_init: can't open stats file 1 ffmpeg2pass-2.log 
```

我的设置是执行一次第一遍，然后进行多次第二遍编码，以使用相同的第一遍结果输出具有不同目标比特率的文件。

```
ffmpeg -y -i $INPUT_FILE -an -vcodec libx264 -pass 1 -b:v 700k -f rawvideo /dev/null

ffmpeg -y -i $INPUT_FILE -i out-aud.mp4 \
$AUDIO_OPTIONS_P2 -vcodec libx264 -pass 2 -b:v 250k -f mp4 out-250.mp4 \
$AUDIO_OPTIONS_P2 -vcodec libx264 -pass 2 -b:v 500k -f mp4 out-500.mp4 \
$AUDIO_OPTIONS_P2 -vcodec libx264 -pass 2 -b:v 700k -f mp4 out-700.mp4 
```

此序列导致上面列出的错误。我通过代码检查发现的是 ffmpeg/x264 为每个第二遍编码路径寻找一组不同的第一遍文件。第一个编码路径使用最初创建的文件集

```
ffmpeg2pass-0.log
ffmpeg2pass-0.log.mbtree 
```

第二个编码路径需要具有名称的第一遍文件

```
ffmpeg2pass-2.log
ffmpeg2pass-2.log.mbtree 
```

第三个编码路径需要名字以 ffmpeg2pass-4* 等开头的 first-pass 文件。

我的解决方案是在运行第二遍命令之前使用每次通过所需的新名称创建指向最初创建的文件集的软链接。

```
ln -s ffmpeg2pass-0.log ffmpeg2pass-2.log
ln -s ffmpeg2pass-0.log.mbtree ffmpeg2pass-2.log.mbtree
ln -s ffmpeg2pass-0.log ffmpeg2pass-4.log
ln -s ffmpeg2pass-0.log.mbtree ffmpeg2pass-4.log.mbtree 
```

这似乎有效，因为它产生了我需要的输出编码。但是，我不知道这种方法是否合法。通过使用一个比特率（700k）的第一遍输出作为其他比特率的第二遍编码的输入，我是否获得了次优的编码结果？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-12-02T11:25:17.430

使用该[`passlogfile`选项](https://ffmpeg.org/ffmpeg.html)并在第一遍设置日志文件名。您可以在第二遍中使用相同的选项，并在第二遍中使用相同的日志文件。但是，您需要考虑相同的 fps 和 bframes 与第一遍相同。

# firefox - Firefox 在新选项卡中提交针对 iframe 的表单

> ID：12480906
> 
> 赞同：0
> 
> 时间：2012-09-18T16:11:50.933
> 
> 标签：firefox, iframe, target

我正在实现相同的旧假 AJAX 文件上传。**我可以在 StackOverflow 上找到的每个建议的解决方案都不起作用：**

1.  将`id`属性设置为`name`与`<iframe>`
2.  对`<iframe>`标签进行硬编码
3.  通过 JQuery生成`<iframe>`节点

我正在开发最后一个版本（15.01）。有什么建议么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-18T16:41:01.503

问题是`src`设置为的属性`about: none;`。这导致了意外的行为。

# image - 图像大小 - 通过 css 强制大小，或将图像创建为特定大小

> ID：12480907
> 
> 赞同：0
> 
> 时间：2012-09-18T16:11:54.147
> 
> 标签：image, css

将图像强制为特定尺寸约束（宽度和高度）还是将图像构建到特定尺寸更好。拍摄大图像并将其限制为小于原始文件的特定宽度/高度是否会影响性能？谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-18T16:14:30.003

唯一的性能损失是浪费的带宽，具体取决于原始文件的大小。如果页面上的图像很小，为什么要下载一个巨大的图像。

# svn - 在 SVN 存储库中搜索

> ID：12480910
> 
> 赞同：2
> 
> 时间：2012-09-18T16:12:06.023
> 
> 标签：svn, search, repository

我们有一个大型的 SVN 存储库在工作，可能有几百个项目分布在该存储库中。排序文件夹中的所有内容等。我只是想知道是否有任何方法可以搜索文件/文件夹？或者至少列出所有目录，然后我至少可以在我的编辑器中 CTRL+F 。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-18T16:22:10.010

您可以将整个 Subversion 存储库导出到您的工作站，并在那里进行搜索。

我写了一个 Eclipse 插件，扩展了 Subclipse 并添加了搜索功能。由于插件必须将每个文件导出到我的工作站才能进行搜索，因此需要很长时间。

# c# - 有没有办法“打乱”事件监听器的调用顺序？

> ID：12480911
> 
> 赞同：2
> 
> 时间：2012-09-18T16:12:07.830
> 
> 标签：c#, events, random, event-handling

我使用以下代码设置了一个测试控制台应用程序：

```
using System;

class Program
{
    static void Main(string[] args)
    {
        var myEventGenerator = new EventGenerator();
        for (int i = 0; i < 10; i++)
            new EventListener(myEventGenerator);

        while (Console.ReadLine().Length == 0)
            myEventGenerator.TriggerEvent();
    }
}

class EventListener
{
    private static int numberOfInstances = 0;
    private int instanceNumber;

    public EventListener(EventGenerator eg)
    {
        eg.EventHappened += EventHappened;
        instanceNumber = numberOfInstances++;
    }

    void EventHappened(object sender, EventArgs e)
    {
        Console.WriteLine("Event Caught in Instance " + instanceNumber);
    }
}

class EventGenerator
{
    public event EventHandler EventHappened;

    public void TriggerEvent()
    {
        Console.WriteLine("Event Begin");
        if (EventHappened != null)
            EventHappened.Invoke(this, new EventArgs());
        Console.WriteLine("Event End");
    }
} 
```

应用程序的输出是：

```
Event Begin
Event Caught in Instance 0
Event Caught in Instance 1
Event Caught in Instance 2
Event Caught in Instance 3
Event Caught in Instance 4
Event Caught in Instance 5
Event Caught in Instance 6
Event Caught in Instance 7
Event Caught in Instance 8
Event Caught in Instance 9
Event End 
```

似乎事件侦听器是根据他们订阅事件的顺序触发的。

但是，如果我不希望这些事件侦听器按该顺序发生怎么办？如果我希望它是随机的怎么办？或者，如果我想指定不同的顺序？有没有办法做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-18T16:28:10.303

没有任何方法可以更改事件处理程序调用与其挂钩的事件的顺序。查看[此页面](http://msdn.microsoft.com/en-us/library/aa664605%28VS.71%29.aspx)了解更多信息。

这是重要的片段：

> 其调用列表包含多个条目的委托实例的调用通过按顺序同步调用调用列表中的每个方法来进行。每个所谓的方法都传递给委托实例的相同参数集。如果这样的委托调用包含引用参数（第 10.5.1.2 节），则每次方法调用都会引用同一个变量；调用列表中的一种方法对该变量的更改将对调用列表下方的方法可见。如果委托调用包含输出参数或返回值，则它们的最终值将来自列表中最后一个委托的调用。

如果你想要这种控制，你必须编写某种类来为你做这件事。

# php - codeigniter conditional routing

> ID：12480912
> 
> 赞同：1
> 
> 时间：2012-09-18T16:12:09.403
> 
> 标签：php, codeigniter, config, routes

I am trying to setup routing based on the 1st URI segment.

I have a rule:

```
$route['(:any)'] = pages/view_page/$1; 
```

I want to make my routes conditional so that if a controller of the name of URI segment 1 is called it goes to the controller as normal. If no controller exists then go to the pages/view_page function.

I have tried wrapping the $route rule with an if statement that checks URI segment 1 and uses that to see if a file exists to match it but this doesn't seem to work.

Does anybody have any suggestions for how to do this without having to write lots of route configurations.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-18T18:03:59.953

Since the routing overrides are simple regexp based transformations, you can't really embed "is that would work otherwise" kind of logic directly. This leaves you with basically two options:

1.  `(:any)`在“catch all”规则之前列出您要明确工作的路线
2.  使用[`$route['404_override']`](http://ellislab.com/codeigniter/user-guide/general/routing.html)保留的路由来指示当没有找到控制器时应该加载哪个控制器。但是，请检查传入的 url，并调用`show_404()`并输出正确的 404 http 状态代码以查找缺少的静态资产等。

# visual-studio-2010 - Load UI Vs Visual Studio 2010 for WCF Load testing

> ID：12480913
> 
> 赞同：3
> 
> 时间：2012-09-18T16:12:22.020
> 
> 标签：visual-studio-2010, wcf, soapui, load-testing, loadui

We want to do load testing for our wcf services and we are considering LOAD UI from www.soapui.org and Load testing support in Visual Studio 2010 Ultimate. I want to know what you guys think of them, if any of you any experiences and think one is better than the other.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-18T18:56:33.897

I am a user of Visual Studio Load Testing since 2 years, and I find it very powerfull and easy to use. Load testing is not limited to WCF : you can load test your integration tests, a web site, a database, ... in fact, everything. Because it is a MS application, it is also fully compatible with all MS products : it's easier to call a WCF service from a unit test than another technology (how to test nettcpbinding ?). You can also use the Visual Studio Profiler for instrumenting your code (and see what line of code is expensive or ADO.net interactions). You can also easily extend the load testing by many extensibility points.

One important thing is that VS laod testing is "intrusive". It will note only collect response time, request lengths, ... but also all performance counters, database queries, ... All this metrics are saved in a dedicated database like SQLExpress for reporting. There is an AddOn for Excel.

**Juste one important note (available for all load testing solutions !)** :

You can run load tests from a developer machine or even a single dedicated machine, but you usually can't generate enough traffic to really see how the application responds (you machine can simulate 500 concurrent users because of limited CPU/Memory/Network) . In order to simulate a lot of users, you'll set up what is known as a Load Test Rig. ![test rig](../Images/752a8aba9fc28a9bd340d834bfec6de3.png)

A test rig is made up of a Test Controller machine and one or more Test Agent machines as shown in Figure 1\. The controller manages and coordinates the agent machines and the agents generate load against the application. The test controller is also responsible for collecting performance monitor data from the servers under test and optionally from the test rig machines.

The only real requirement is Visual Studio Ultimate 2010 or 2012 (no changes). But as @chrismead said, Visual Studio 2010 Ultimate allows you to stress test your application with 250 virtual users. However, with the Visual Studio 2010 Load Test Feature Pack, active Visual Studio Ultimate with MSDN subscribers are provided a license key to generate UNLIMITED virtual users without having to purchase the Visual Studio Load Test Virtual User Pack 2010/2012.

Personnaly, I have never used loadUI even if I am a soapUI user. Maybe because I don't have the needs.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-18T18:17:47.260

You might want to create some sample tests using Visual Studio. In the past (even with Ultimate), I found that Microsoft will disable all but one of your processors unless you buy something called a Test Pack or something like that.

I personally use SoapUI itself for load testing and not LoadUI. I was enthusiastic about LoadUI and gave it a try, but could not get it to work properly with my SoapUI project. If you do try out LoadUI, you might want to compare it against the load test features in SoapUi as well because in my opinion LoadUI is not mature enough yet.

# cognos - 如何在 Cognos 中将页脚/页眉拆分为多个单元格？

> ID：12480915
> 
> 赞同：1
> 
> 时间：2012-09-18T16:12:29.040
> 
> 标签：cognos, cognos-8

添加页脚或页眉（组页脚或整体/列表页脚）时，它被创建为单个数据项单元格。无法将任何可插入对象添加到页脚/页眉中，而且我没有看到任何方法可以从右键单击菜单或单元格的属性中拆分单元格/添加更多单元格。

如何在 Cognos 中将页脚或页眉拆分为多个单元格？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-18T16:12:29.040

要拆分页脚或页眉，您需要选择页脚/页眉，然后进入**结构**菜单，在**页眉和页脚**子菜单下，选择**拆分列表行单元格**。

这是 Cognos 8 中菜单的位置：

![结构菜单、页眉和页脚，然后拆分列表行单元格](../Images/bee3f6ff03b606195f9cfeac006b15e0.png)

您现在可以为每个页眉或页脚更改每个单独单元格中的数据/文本/任何项目。

注意拆分会将您的页脚拆分为报告中每个列表项的一个单元格；如果您有 4 个列表项，您将获得 4 个单元格。您可以按住 Ctrl 键并单击以选择多个页脚单元格，然后使用同一菜单中的“合并列表行单元格”来合并单元格，从而获得所需的单元格数量。

[我从 IBM 的文档中](http://publib.boulder.ibm.com/infocenter/c8bi/v8r4m0/index.jsp?topic=/com.ibm.swg.im.cognos.ug_cr_rptstd.8.4.0.doc/ug_cr_rptstd_id22012cr_rptstd_frmat_rep_add_header_or_f.html)发现了这一点以及有关页眉和页脚的更多信息。

# ruby-on-rails - 使用 Rspec 测试 Rails ActiveRecord before_create 方法

> ID：12480919
> 
> 赞同：2
> 
> 时间：2012-09-18T16:12:47.410
> 
> 标签：ruby-on-rails, ruby-on-rails-3, unit-testing, activerecord, rspec

我发现[那个 stackoverflow 旧帖子](https://stackoverflow.com/questions/993941/rails-unit-testing-a-before-create)建议`model_entity.send(:before_create)`但现在它不起作用。那么，我该如何测试应该执行的方法`before create, update, destroy`。还有另一篇[文章](https://stackoverflow.com/questions/6605199/testing-before-create-method-in-rspec-and-rails-3)，但我不知道在我的情况下我应该做什么。

```
class User < ActiveRecord::Base

  before_create do |user|
    user.secure_token = UUID.new.generate
  end
end 
```

关键是我可以用这段代码创建一个方法，然后调用它。还有其他方法吗？

一般来说，如果我想测试仅在我的模型中的 after_create 方法，我应该创建模型对象并检查它。但是，我想，这是不必要的行动。我可以在不创建任何实例的情况下检查此方法。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2014-02-21T01:09:23.557

有一种干的方法：

```
expect{ user.save }.to change{ user.secure_token } 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-20T12:43:45.953

刚刚发现了一个棘手的问题。如果您需要验证实际结果，请单独验证，因为`:secure_token=`如果您使用`.should_receive(:secure_token=)`. 例子：

型号如上：

```
describe "verifies that secure_token= is called" do
  @user = User.new
  @user.should_receive(:secure_token=)
  @user.save
end

describe "verifies the result is set" do
  @user = User.new
  @user.save
  expect(@user.secure_token).not_to be_empty
end 
```

但是如果你把 expect not 和 should_receive 放在同一个测试中，那么测试就会失败。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-18T17:11:28.753

如果您使用的是 rspec，我猜您可以这样做：

```
@user = User.new
@user.should_receive(:secure_token)
@user.save 
```

# c# - 无法解析日期时间

> ID：12480922
> 
> 赞同：0
> 
> 时间：2012-09-18T16:12:52.463
> 
> 标签：c#, asp.net, datetime

```
var date = "05/18/2012";

DateTime.ParseExact(date, "yyyy/MM/dd", CultureInfo.InvariantCulture)

DateTime.Parse(date); 
```

我认为这里的问题是日期应该是日/月/年。问题是客户想要这种格式。该系统必须能够以英语和法语运行。我希望以相同的方式解析所有日期，以便它们都采用格式 - yyyy/MM/dd。

前面的例子似乎都不起作用。

编辑：我可以将日期设置为 2012/05/18 格式，但如何为 DateTime.Now 执行此操作？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-18T16:14:09.967

它应该是

```
string date = "05/18/2012";
DateTime dateA = DateTime.ParseExact(date, "MM/dd/yyyy", CultureInfo.InvariantCulture);
string newDate = dateA.ToString("yyyy-MM-dd"); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-18T16:17:12.510

ParseExact 允许你告诉解析器日期的格式。所以在你的例子中你说它是 yyyy/MM/dd 所以你应该有像“2012/05/18”这样的日期设置才能正确解析。

这是示例。

```
var date = "05/18/2012";
var date2 = "2012/05/18";

var pDate = DateTime.Parse(date);
var pDate2 = DateTime.ParseExact(date2, "yyyy/MM/dd", null);

Console.WriteLine("Normal Date Formated: " + pDate.ToString("yyyy/MM/dd"));
Console.WriteLine("Your Format, Parsed: " + pDate2.ToShortDateString());
Console.WriteLine("DateTime.Now Formatted: " + DateTime.Now.ToString("yyyy/MM/dd")); 
```

输出

```
Normal Date Formated: 2012/05/18
Your Format, Parsed: 5/18/2012
DateTime.Now Formatted: 2012/09/18 
```

# c# - 如何在 Sitecore 中创建新页面

> ID：12480924
> 
> 赞同：0
> 
> 时间：2012-09-18T16:12:52.933
> 
> 标签：c#, .net, web-config, sitecore, ascx

我需要在 Sitecore 中添加一个页面：

*   `abc.com/link1?id=1*something=BLABLA`
*   `abc.com/link2?id=2*something=BLABLA`
*   `abc.com/linkN?id=N*something=BLABLA`

上面的所有链接都代表一个页面，该页面反过来为用户提供基于`link1`, `link2`...的模板`linkN`。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-18T16:57:02.273

这也是一个可能证明有帮助的链接[Learn sitecore](http://learnsitecore.cmsuniverse.net/en/Developers/Articles/2011/03/Info-site-8-unified-page-editor.aspx)。非常简洁，我的一般方法是创建一个模板，在内容下创建一个页面，然后分配一个将其链接到 asp.net 内容的布局。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-18T17:37:24.143

在我看来，您可以只创建三个新项目（**link1**、**link2**和**linkN**）。这些项目可以共享相同的“基本”模板，其中包含它们共有的所有内容（布局、通用/共享控件等）。在那里形成，如果您需要每个项目略有不同，您可以为从基本模板继承的每个项目创建一组新的模板（推荐），或者直接修改每个项目的演示详细信息。

也就是说，如果你真的需要一个接受多个路由和查询字符串的***项目***，你有几个选择：

1.  如果该项目存在于您站点的根目录中，您可以创建一个项目并为您希望路由到该项目的任何其他名称创建[别名。](http://sdn.sitecore.net/Articles/Administration/Aliases.aspx)例如，名为**link**的项目可以具有 **link1**、**link2**、**linkN**等的别名。查询字符串将适用于所有别名页面。使用这种方法，您不会像您描述的那样更改“布局”。相反，您的布局（或一个或多个子布局）将对可用的查询字符串做出反应并提供不同的视图和/或行为。我喜欢称这使子布局“更智能”:)

2.  如果您需要一个更强大的解决方案，允许在站点根目录之外进行路由，您可能需要考虑在 HttpRequest 管道中扩展 UrlResolver。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-18T18:51:28.100

如果您想使用单个项目来处理所有三个链接，您还可以使用通配符项目，您可以在其中从 httpcontext 读取查询字符串，并根据查询字符串执行任何您想做的事情。

看到您的问题时，我想到的另一件事是：您想通过查询来实现什么？可能是我，但这看起来有点像您正在尝试使用基于 joomla（或其他 cms）的 url 技术创建一个 Sitecore 站点。

# grails - 使用 createCriteria 和基于 belongsTo 属性的顺序

> ID：12480925
> 
> 赞同：0
> 
> 时间：2012-09-18T16:12:54.333
> 
> 标签：grails, belongs-to, createcriteria

我有下一个方案：

```
class UserProfile {
    String title
    String firstName
    String lastName 
    static belongsTo = [user:User]
    static constraints = {
            user nullable:true , unique:true
            title nullable:true, blank:true
            firstName blank:false
            lastName nullable:true, blank:true
    }
}

class User {
    String username
    String password
    boolean enabled 
    String email    
    static constraints = {
        username size:6..40, blank:false, nullable: false, unique: true
        email email:true, size:6..40, blank:false, nullable: false, unique: true
        password size:5..64, password:true, blank:false, nullable: false
    }   
    String toString(){username}
} 
```

我需要`UserProfile`有用户的电子邮件订购的列表！

我尝试：

```
UserProfile.createCriteria().listDistinct({
    if(params.orderBy){
        if(params.orderBy=="email"){
        //the exception says that the element has no such property to both cases    
            order("user.email", ascDesc)
            //order("email", ascDesc)               
        }else{
            order("${params.orderBy}", ascDesc)
        }
    }

}) 
```

所以当我想通过电子邮件订购时，异常表明该元素对这两种情况都没有这样的属性。注意：`ascDesc`是一个变量`String`，它可以是`asc`或`desc`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-18T18:35:56.867

如果你添加

```
createAlias('user', 'u') 
```

到您的标准关闭的顶部，那么您应该可以按`'u.email'`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-23T11:50:29.223

```
if (params.orderBy == "email") { 
    user { 
        order ("email", ascDesc) 
    } 
} 
```

无需手动创建别名也应该可以工作

# ios - 如何在情节提要中加载没有按钮的视图控制器？

> ID：12480929
> 
> 赞同：2
> 
> 时间：2012-09-18T16:13:12.023
> 
> 标签：ios, xcode, storyboard, viewcontroller

我想加载没有按钮的视图控制器。我将标识符设置为 10 并尝试使用

```
if(...){ 
    //load ViewController2
    [[self storyboard] instantiateViewControllerWithIdentifier:@"10"];
} 
```

但什么也没发生。

有了这个功能，它也`s doesn`不起作用

```
 UIViewController *vc = [[self storyboard] instantiateViewControllerWithIdentifier:@"10"];

[self.navigationController pushViewController:vc]; 
```

这是我的项目 [http://www.sendspace.com/file/kfjhd5](http://www.sendspace.com/file/kfjhd5)

有什么问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-18T16:18:23.063

`instantiateViewControllerWithIdentifier:`正如它所说，调用将实例化一个视图控制器。而已。如果你想真正展示它，你必须使用一个变量并将它推送到你的视图控制器堆栈。

```
UIViewController *vc = [[self storyboard] instantiateViewControllerWithIdentifier:@"10"];
[self.navigationController pushViewController:vc]; 
```

当然，您必须使用 a[`UINavigationController`](http://developer.apple.com/library/ios/documentation/UIKit/Reference/UINavigationController_Class/Reference/Reference.html)来执行此操作。

# html - 强制元素与兄弟元素高度相同？

> ID：12480933
> 
> 赞同：0
> 
> 时间：2012-09-18T16:13:25.747
> 
> 标签：html, css

我有以下标记：

HTML

```
<div class="container">
    <div class="sidebar">
        info <br/>
        info <br/>
    </div>
    <div class="post">
        post <br/>
        post <br/>
        post <br/>
        post <br/>
    </div>
</div> 
```

CSS

```
container {
    float:left;
    width:100%;
}
.sidebar {
    float:left;
    clear:both;
    background-color: #eee;
    width:150px;
}
.post {
    background-color: #ccc;
    margin-left:150px;
} 
```

如何使用 HTML/CSS 强制侧边栏采用帖子的高度？侧边栏和帖子的高度都可以改变大小，但帖子的高度总是大于侧边栏的高度。

JSFiddle：http: [//jsfiddle.net/KK4Yc/](http://jsfiddle.net/KK4Yc/)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-18T16:24:42.370

除非你用假列伪造它，否则没有 JavaScript 就无法做到这一点。如果你想使用 jQuery，它是单行的：

```
​$('.sidebar').height($('.post').height());​ 
```

**[jsFiddle 示例](http://jsfiddle.net/j08691/KK4Yc/1/)**

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-18T16:56:44.770

好的，我不太确定为什么其他海报会如此长，您只需要利用`parent->child`dom 元素自动具有的关系的好处：

```
.container {
  overflow: hidden;
  border: 1px solid #ff0000;
}

.sidebar {
  background-color: #eee;
  float: left;
  clear: both;
  width: 150px;
}

.sidebar-wrapper {
  background: #eee;
  overflow: hidden;
}

.post {
  margin-left: 150px;
  background-color: #ccc;
} 
```

以上是您需要的所有 CSS *（只要您有“固定颜色”或“重复背景图像”侧边栏）*，以下是标记：

```
<div class="container">
  <div class="sidebar-wrapper">
    <div class="sidebar">
      info <br/>
      info <br/>
    </div>
    <div class="post" style="background: green;">
      post <br/>
      post <br/>
      post <br/>
      post <br/>
    </div>
  </div>
</div> 
```

显然*（从 HTML/CSS 的角度来看相当烦人）*如果您没有“纯色”或“重复背景”区域，那么您将不得不使用 j08691 的 javascript 方法或 Diodeus 的固定高度容器方法*（尽管 Diodeus 似乎现在已经更改了代码，并包含了 caligula 答案的一部分——我猜是偶然的？）*。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-18T16:34:23.917

正如[j08691](https://stackoverflow.com/users/616443/j08691)所说，可以通过 JS 来实现。但是您可以尝试不同的方法，例如使用纯 css 将灰色 bg-image 添加到`.container`，这样看起来侧边栏会延伸到底部，或者添加具有相同目的的附加元素（[FIDDLE](http://jsfiddle.net/KK4Yc/2/)）：

```
.container {
    float:left;
    width:100%;
    overflow:hidden;
    position: relative;
}
#bg {
    background-color: #eee;
    width:150px;
    height: 100%;
    position: absolute; 
}
.sidebar {
    float:left;
    clear:both;
    background-color: #eee;
    width:150px;
    height: 100%;
    position:relative;
}

<div class="container">
    <div id="bg"></div> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-18T16:18:53.697

如果容器具有固定高度，则可以，否则需要使用 JavaScript。

```
 body, html { height:100% }

    .container {
        width:100%;
        height:500px;
        border:1px solid #ff0000
    }

#bg {
    background-color: #eee;
    width:150px;
    height: 100%;
    position: absolute; 
}
.sidebar {
    float:left;
    clear:both;
    background-color: #eee;
    width:150px;
    height: 100%;
    position:relative;
} 
```

# excel - Excel - 条件格式 - 插入行

> ID：12480934
> 
> 赞同：26
> 
> 时间：2012-09-18T16:13:26.820
> 
> 标签：excel, conditional-formatting

*在“应用于”中使用偏移或间接似乎不起作用。插入行/秒后是否有其他方法可以阻止条件格式中断*

我有一个范围的条件格式，例如 $O$19:$O$105。条件是'如果单元格值> 10'，它被格式化为红色。

问题是 - 当我在 excel 中插入一行时，这个格式范围会分裂，我得到 2 个格式规则。例如，如果我在第 20 行插入新行，则范围分别为 $O$19、$O$21:$O$105 和 $O$20 的 2 条规则。

通常对于上述条件，如果规则被分成多个范围，则可能无关紧要。但是对于像“突出显示前 10 名”这样的条件，它会导致不希望的结果。

我尝试了以下方法，但运气不佳：

1.  尝试使用间接 - 但 excel 似乎可以解决公式并保存格式规则，因此不能按预期使用插入
2.  尝试使用偏移量 - 这里再次 excel 解决了与上述相同的范围。

任何人都知道如何编写不与行插入中断的条件格式？

> [编辑] 我意识到插入行不会导致条件格式规则的拆分。我还复制一行并粘贴到正在执行此操作的插入行中。如果我选择特殊粘贴并只选择公式，它工作正常。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2014-05-15T17:17:15.907

我知道这是一个旧线程，但这是另一个超级简单且效果很好的解决方案。

只需根据需要插入新的行或列。然后选择并复制具有正确条件格式的行/列。Past Special 进入您刚刚创建的新行/列，然后选择“所有合并条件格式”选项。您的条件格式规则现在应该会自动更新。

快乐 Excel ing =)

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2013-05-30T08:53:14.680

这是条件格式的普遍问题。如果您插入行或移动内容，Excel 假定您希望条件格式随单元格移动，并且您希望插入具有原始格式的单元格（或根本不插入）。

所以它尽量根据变化来分割格式化的范围。不幸的是，“最好的”不是很好。在幸运的情况下，您的格式规则会在您不注意的情况下重复；在不幸的情况下，它们会在部分或全部应用范围内中断。

如果您使用 ListObjects（又名“Excel 表格”），这尤其是一个问题。插入一些行，重新排序，拖动一些值，下次你查看条件格式列表时，你有几十到几百个重复的规则。（例如： http: [//blog.contextures.com/archives/2012/06/21/excel-2010-conditional-formatting-nightmare/](http://blog.contextures.com/archives/2012/06/21/excel-2010-conditional-formatting-nightmare/)）

以我的经验，解决混乱的最快方法是删除所有规则并重新创建（或不重新创建）。

一些旁注：

*   适用范围始终是绝对的。没有办法解决这个问题。
*   更糟糕的是，条件格式被视为易失公式，这意味着它们会在很多情况下重新计算（打开另一个文件、滚动等）。如果您没有注意到拆分，它们可能会在一段时间后显着减慢整个应用程序。
*   如果您使用 VBA，您可能想要使用 Worksheet_Calculate 事件，至少在您的公式引用其他工作表时（请注意名称！）

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2014-11-04T02:10:39.000

I was having this problem while trying to create reports - once they're finished they don't need to change, but while I'm making them, I keep adding new lines and each new line mucks up the conditional formatting.

This is by no means a good solution, but it was the best I could find without resorting to VBA - which was to:

a) Make the conditional formatting rules apply to a whole column or more at a time

for example instead of setting conditional formatting on C2 and C17, put an extra column, and write "this one" in rows 2 and 17, and then set the formatting for the whole of column C to be "if the other column says 'this one' then apply this format"

b) Change the Applies To to be just $C$1:$C$2.

c) Make changes and insert rows and stuff

d) Then go back and change the Applies To to be $C:$C

That way, while you change things and add things, the conditional formatting isn't there, but then you put it all back later.

If, at a later date, you need to add a few more rows, first change it from $C:$C to $C$1:$C$2, then make the changes, and then put it back to $C:$C. That way you don't have to completely rewrite all the formatting rules from scratch as you would if you do what I've done previously which was just delete them all, curse, and start again ;)

Obviously if you're planning on inserting rows up at the top in row 1 or 2, that won't work, but you could always set it to some other rows that you know you won't change.

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2018-01-05T02:03:12.250

虽然这是一个很老的话题，但我的 Excel 工作表在插入新行时也遇到了重复条件格式的问题。

我能够解决它。让我分享给其他人，它可能也有帮助。

就我而言，我所有的条件格式规则都应用于整个表格。我意识到插入新行时只有某些规则是重复的。这些规则是基于公式比较不同行中的值。

就我而言，我想在相邻两行的值不同时呈现水平边框，例如：

```
=$A2 <> $A1 
```

如果我使用 OFFSET 来引用前一行，一切都是正确的，没有重复的条件格式规则。

```
=$A2<>OFFSET($A2; -1; 0) 
```

我实际上将这些条件格式公式放入隐藏列中，但结果应该是相同的。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2014-12-04T19:17:31.443

对我有用的是，当您插入一行时，不要从另一行复制格式。仅复制特殊粘贴公式。然后条件格式不会被拆分。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2013-12-12T17:30:56.767

我意识到这是一篇旧帖子，但我遇到了同样的问题，并且已经想出了如何不获取拆分条件格式规则。

在我的 Excel 2010 电子表格中，我在 B 列中输入了日期。有时我会用手指粗略地输入日期，这就是我想有条件地格式化它们的原因。最初，我选择了一个范围 (B2:B1960)，因此我在条件格式规则中的公式将是“=B2:B1960>TODAY()”。

好吧，在我去现有行之间插入新行之前，它工作得很好。正如 OP 所描述的那样，规则将分裂。我碰巧查看了几个不同的网站，发现一个 Microsoft Office 网站向我指出了答案。它提到要突出显示要格式化的范围，但将公式更改为“=B2>TODAY()”。

由于更改了公式，我现在可以在现有行之间插入新行，而不是像以前那样获得拆分规则。这是该网页的链接。[http://office.microsoft.com/en-us/excel-help/use-a-formula-to-apply-conditional-formatting-HA102809768.aspx](http://office.microsoft.com/en-us/excel-help/use-a-formula-to-apply-conditional-formatting-HA102809768.aspx)

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2012-09-20T19:20:35.687

我意识到插入行不会导致条件格式规则的拆分。我还复制一行并粘贴到正在执行此操作的插入行中。如果我选择特殊粘贴并只选择公式，它工作正常。

但是，我想知道是否需要在条件格式的“应用于”字段中使用“间接”或“偏移”。如果是这样，那将是一个问题。

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2014-12-30T14:09:21.220

您要做的是 1）插入新行 2）复制要克隆的行 3）粘贴特殊的“合并条件格式”

如果您希望其他人共享您创建的工作簿，则不直观且需要大量用户培训

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2018-12-07T16:21:09.557

这对我来说足够好......

```
Sub ConditionalFormattingRefresh()
'
' ConditionalFormattingRefresh Macro
'

'Generales
Dim sh As Worksheet
Dim tbl As ListObject
Dim selectedCell As Range
Set sh = ActiveSheet
Set tbl = Range("Plan").ListObject
Set selectedCell = ActiveCell

'Rango a copiar
Dim copyRow As Range
Set copyRow = tbl.ListRows(1).Range

'Rango a restaurar
Dim startCell As Range
Dim finalCell As Range
Dim refreshRange As Range
Set startCell = tbl.DataBodyRange.Cells(2, 1)
Set finalCell = tbl.DataBodyRange.Cells(tbl.ListRows.Count, tbl.ListColumns.Count)
Set refreshRange = Range(startCell.Address, finalCell)

'Ocultar procesamiento
Application.ScreenUpdating = False
Application.EnableEvents = False

'Borrar formato corrupto
refreshRange.FormatConditions.Delete

'Copiar
copyRow.Copy
'Pegar formato
tbl.DataBodyRange.PasteSpecial Paste:=xlPasteFormats, Operation:=xlNone, SkipBlanks:=False, Transpose:=False
Application.CutCopyMode = False

'Retornar a la normalidad
selectedCell.Select
    Application.ScreenUpdating = True
Application.EnableEvents = True

End Sub 
```

* * *

## 回答 #10

> 赞同：1
> 
> 时间：2018-09-14T16:58:51.680

我同意之前发布的内容；复制和粘贴值（或粘贴公式）完全可以不拆分条件格式。

我对此有点懒惰。而且我不希望那些使用我的电子表格的人不得不这样做。我也不相信他们会记得复制和粘贴值。:(

我不知道这个解决方案是否能满足您的需求，但我在每次打开工作簿时都删除了所有条件格式并重新应用正确的条件格式。

由于每次打开工作簿时都会运行此宏，因此用户无需更改复制和粘贴的方式。他们不需要知道宏甚至在那里。他们不需要手动运行宏；它是自动的。我觉得这创造了更好的用户体验。

请记住，此代码需要复制并粘贴到“此工作簿”模块中；不是常规模块。

```
Private Sub Workbook_Open()
'This will delete all conditional formatting and reapply the conditional formatting properly.
'After copying and pasting the conditional formatting get split into two or more conditional formattings. After a few
'weeks there are so many conditional formattings that Excel crashes and has to recover.

Dim ws As Worksheet, starting_ws As Worksheet

Set starting_ws = ActiveSheet   'remember which worksheet is active in the beginning
Application.ScreenUpdating = False
For Each ws In ThisWorkbook.Worksheets
    If ws.Name <> "InvErr" Then
        ws.Activate
        Cells.FormatConditions.Delete
        ''Every Other Row Tan
        Range("A4:M203").FormatConditions.Add Type:=xlExpression, Formula1:="=ISODD(ROW(A4))"
        Range("A4:M203").FormatConditions(Range("A4:M203").FormatConditions.Count).SetFirstPriority
        Range("A4:M203").FormatConditions(1).Interior.PatternColorIndex = xlAutomatic
        Range("A4:M203").FormatConditions(1).Interior.ThemeColor = xlThemeColorDark2
        Range("A4:M203").FormatConditions(1).Interior.TintAndShade = 0
        Range("A4:M203").FormatConditions(1).StopIfTrue = False

        ''Highlight Duplicates Red
        Columns("B").FormatConditions.AddUniqueValues
        Columns("B").FormatConditions(Columns("B").FormatConditions.Count).SetFirstPriority
        Columns("B").FormatConditions(1).DupeUnique = xlDuplicate
        Columns("B").FormatConditions(1).Font.Color = -16383844
        Columns("B").FormatConditions(1).Font.TintAndShade = 0
        Columns("B").FormatConditions(1).Interior.PatternColorIndex = xlAutomatic
        Columns("B").FormatConditions(1).Interior.Color = 13551615
        Columns("B").FormatConditions(1).Interior.TintAndShade = 0
        Columns("B").FormatConditions(1).StopIfTrue = False
    End If
Next

starting_ws.Activate   'activate the worksheet that was originally active
Application.ScreenUpdating = True

End Sub 
```

* * *

## 回答 #11

> 赞同：1
> 
> 时间：2016-09-08T03:25:42.103

我对这个确切问题的解决方案是从源副本中清除格式。脚步：

1.  将源复制到剪贴板
2.  打开新的excel文档
3.  选择性粘贴，选择公式（复制值和公式并省略格式）
4.  将此复制到剪贴板
5.  现在，您可以在使用之前将其粘贴回源，也可以使用条件格式将空白行插入工作表（注意仅插入行不会更改条件格式规则的范围）并将剪贴板内容粘贴到新行中。

这对我使用 MS Excel 2016 有效

* * *

## 回答 #12

> 赞同：1
> 
> 时间：2021-10-28T17:08:08.070

1.  将条件格式应用于整个列，例如“$A:$A”。删除不同的单元格引用，例如“$A2: $A10”。

2.  不要使用“插入行”，因为它会破坏条件格式。相反，将新数据条目作为新行附加到 Excel 表的最后一行之后。如果正在使用 vba，请使用它来识别最后一行。

3.  使用“所有合并条件格式”选项“选择性粘贴”从最后一行到新行的列的当前公式和格式。

    last_row = Cells(Rows.Count, 1).End(xlUp).Row

    行（last_row）。复制

    行（last_row + 1）.PasteSpecial xlPasteAllMergingConditionalFormats

4.  根据需要使用 vba 重新排序表。

    例如 Range("A:AU").AutoFilter Field:=46, Criteria1:="TRUE"

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2012-09-18T16:37:12.033

这是一个类似的线程，可能会让你走上正轨：

[如何将 Worksheet_Change 事件用于条件格式？](https://stackoverflow.com/questions/1911091/how-to-use-the-worksheet-change-event-for-conditional-formatting)

它概述了 R1C1 样式格式的解决方法，它可能不受插入（未经测试）以及我在评论中提到的 VBA 方法的影响。

* * *

## 回答 #14

> 赞同：0
> 
> 时间：2014-11-20T00:54:52.397

我发现了一个简单的过程，似乎可以始终如一地插入新的行或列，并保持条件格式规则的连续性（至少在 Office 2010 中），如下所示：

1.  在包含要保留的条件格式的行或列的上方、下方或左侧或右侧执行所需数量的新行或列的简单“插入”。

注意 a) 您的条件格式会自动应用于插入的行或列，而无需您进一步执行任何操作。格式应该是从相邻的行或列继承的。b) 任何边框格式也应该被复制到新插入的单元格中。

2.  选择与新插入的行、列或范围相邻的行、列或范围（通过单击它），其中包含要复制的条件格式（以及公式和数据，如果适用）。

3.  将鼠标悬停在所选范围的左下角或右下角，直到您看到一个加号“+”出现（不要将其与行调整大小小工具混淆，因为它们看起来很相似）。

4.  左键单击并按住“+”，然后拖动所需的行、列或要格式化的范围，然后松开。

注意：我创建了仅引用一个单元格的条件格式规则：示例）在标题为“格式化此公式为真的值：”的字段中，创建一个规则，例如 ... =AND($B8="",$C8=" ",$D8="",$K8<>""), 其中这条规则适用于说范围... =$B$8:$D$121,$J$8:$M$121。

* * *

## 回答 #15

> 赞同：0
> 
> 时间：2018-03-30T16:33:02.790

我正在构建一个解决方案，其他具有混合 Excel 技能水平的人将发挥作用，所以我需要一些更容易和更一致的东西，而不是让他们记住以某种方式复制和粘贴。

在 Excel 2016 中，您可以从选定范围插入一个表，然后您可以使用结构化引用（例如：tblTOP[Type]，以引用名为 tblTOP 的表的类型列中的数据）。

然后我在微软的网站上找到了这个答案，它显示了在 CF 的公式部分引用表格的有效方法： [条件格式结构化引用](https://answers.microsoft.com/en-us/msoffice/forum/msoffice_excel-mso_winother-mso_2013_release/conditional-formatting-structured-references/6f51ff96-c003-4e86-829f-d7e61705e4cc)

* * *

所以，有了这个既定...

这就是我正在使用的：

[tblTop Columns](https://i.stack.imgur.com/ru19e.png)

我设置了条件格式，以便当我将 Type 值更改为 A 到 E 之间的任何位置时，它会将该行更改为相应的颜色。（示例：B 将行变为绿色）

这是通过使用公式*=INDIRECT("tblTOP[Type]")="B"完成的*

但是，当我去添加一行时，我将相同的格式应用于第二行:(。

[在两行之间破坏了CF](https://i.stack.imgur.com/GDMdl.png)

## 有效的 CF 公式

长话短说，我想出以下公式，将我的 CF 规则应用于该特定行，并且不会影响任何添加或删除的行：

=INDIRECT("tblTOP[@Type]")="B"

在结构化引用前面添加“@”可以让事情发生在给定的行上。好的。

所以现在我可以通过标签或使用上下文菜单添加新行，它等待类型选择来确定该行的颜色。

[新行添加干净](https://i.stack.imgur.com/sC5aR.png)

[新行按预期工作](https://i.stack.imgur.com/sOjrK.png)

我没有使用粘贴单元格对其进行测试，因为此表的目的是让最终用户根据需要输入数据并添加/删除行，所以我不能说这是否适用于粘贴行。

希望这对表格中条件格式的人有所帮助。

* * *

## 回答 #16

> 赞同：0
> 
> 时间：2015-09-26T12:30:17.603

在 2013 年，一旦您发现您的格式规则已被拆分/复制，请为每种格式定义一个新的命名范围。然后将应用设置为 =[命名范围]。Excel 将用实际范围替换命名范围。然后删除重复的格式。

* * *

## 回答 #17

> 赞同：-1
> 
> 时间：2015-07-14T09:30:10.633

我通过以下步骤让它在 Excel Mac 2011 上工作

*   插入新行
*   复制它上面的一个（已经应用了条件格式）
*   突出显示新行和`PASTE SPECIAL -> MERGE CONDITIONAL FORMATTING`。

CF 规则保持未拆分并更新为包含一个附加行。

# mongodb - 使用 apt-get 安装 mongodb-10gen 失败

> ID：12480935
> 
> 赞同：28
> 
> 时间：2012-09-18T16:13:33.717
> 
> 标签：mongodb

将 mongodb-10gen 安装为[http://docs.mongodb.org/manual/tutorial/install-mongodb-on-debian/](http://docs.mongodb.org/manual/tutorial/install-mongodb-on-debian/)但出现以下错误：

```
dpkg: error processing /var/cache/apt/archives/mongodb-10gen_2.2.0_amd64.deb (--unpack):
 trying to overwrite '/usr/bin/mongoimport', which is also in package mongodb-clients 1:1.4.4-3
configured to not write apport reports
                                      dpkg-deb: subprocess paste killed by signal (Broken pipe)
Errors were encountered while processing:
 /var/cache/apt/archives/mongodb-10gen_2.2.0_amd64.deb
E: Sub-process /usr/bin/dpkg returned an error code (1) 
```

* * *

## 回答 #1

> 赞同：60
> 
> 时间：2012-09-18T16:13:33.717

这里有一个错误[https://jira.mongodb.org/browse/SERVER-6910](https://jira.mongodb.org/browse/SERVER-6910)

apt-get 首先删除 mongodb-clients，然后安装 mongodb-10gen 应该可以工作。

# c - C中全局结构变量的最佳使用

> ID：12480941
> 
> 赞同：2
> 
> 时间：2012-09-18T16:13:48.263
> 
> 标签：c, struct, global-variables

我有一个全局变量结构：

```
typedef struct {
    int myvar1;
    int myvar2;
    int myvar3;
    ...
    int myvar10;
} t_myStruct myGlobalData; 
```

我无法避免这种全局结构，所以我必须使用它。我有三个使用它的选项：

*   在任何函数中使用“原样”全局变量。IE：

    ```
    int myFunc(void) {
        myGlobalData.myvar1 = ...
        myGlobalData.myvar10 = myGlobalData.myvar5 + ...
    } 
    ```

*   声明一个本地指针并使用它：

    ```
    int myFunc(void) {
        t_myStruct * p;

        p = &myGlobalData;
        p->myvar1 = ...
        ...
        p->myvar10 = p->myvar5 + ...
    } 
    ```

*   使用 local var 然后复制到全局结构：

    ```
    int myFunc(void) {
        t_myStruct localStruct;

        localStruct.myvar1 = ...
        localStruct.myvar10 = localStruct.myvar5 + ...
        myGlobalData = localStruct ;
    } 
    ```

可以解释一下一般来说什么是最好的方法，为什么？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-09-18T16:16:18.943

选择更多的抽象。如果您可以将参数更改为`myFunc`，则进行其签名：

```
int myFunc(t_myStruct *arg)
{
    arg->myvar1 = ... 
```

现在函数本身根本不依赖于全局变量的存在。对于需要在`struct`这种类型的 a 上操作的任何其他功能也是如此。如果必须使用全局变量，则*尽可能*隔离它的使用，即在尽可能少的地方使用全局变量。

如果您无法更改函数签名，我会从您的问题中选择最直接的选项：第一个。直接对全局变量进行操作即可。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-18T17:10:13.867

在您列出的三个选项中，IMO，第一个是最好的。只需小心使用全局结构即可。

第一个和第二个选项几乎相同，但是每当您开始不必要地使用指针时，事情就会变得混乱，人们往往会犯更多的错误。

第三种选择只是一个坏主意。现在您希望每个函数都确保在完成后写回数据？如果函数`A()`和函数`B()`都在对全局结构进行编辑怎么办？`A()`完成后放回数据，然后`B()`第二次完成并覆盖`A()`数据？现在你需要额外的保护机制......这只是一个坏主意。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-18T18:15:35.430

首先，为什么它如此*不可避免*？其次，为什么只有这三个选项？

如果您必须访问全局，您的第一个选择并非不合理 - 它已经是全局的，它还能变得更糟吗？

您的第二个选择完全没有意义。

您的第三个选项也没有什么优点，并且 memcpy 是不必要的，您可以直接分配一个结构：

```
myGlobalData = localStruct ; 
```

在多线程应用程序中，没有一个解决方案是可取的。

所以答案不是以上两种。相反，如果没有真正的理由不这样做，则将全局限定为`static`使其在定义它的模块之外不可见，然后在同一模块中定义适当的访问函数。

即使没有静态声明，访问函数也是一个好方法，因为您可以验证参数、确保数据一致性、在必要时应用互斥，并且在调试期间您可以通过仅在访问函数中设置断点来捕获所有访问，而不是在*任何地方*否则可能会发生访问。

您或许应该阅读[A Pox on Globals](http://embedded.com/electronics-blogs/break-points/4025723/A-pox-on-globals) - 它指的是嵌入式系统，但同样适用于桌面应用程序。

# iphone - 如何从不同的 .m 文件中的数组中获取项目？

> ID：12480942
> 
> 赞同：4
> 
> 时间：2012-09-18T16:13:49.437
> 
> 标签：iphone, ios, nsarray

我`NSNumber`在一个名为`level.m`. 在另一个文件中`game.m`，我想“获取”这个数组并将其每个对象更改为单独的整数。

我尝试过使用`NSUserDefaults`，但这似乎是一种非常尴尬的方式来做我想做的事情。有没有更好的办法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-18T16:18:47.473

是的，有比使用 NSUserDefaults 更好的方法！

您可以直接从 game.m 访问数组。首先，您必须将 level.h 导入到 game.m 中（像这样：）`#import "level.h"`。

现在假设您要 int 数组中索引 0 处的数字值。你可以这样做：`int myNumber = [[[name_of_level_class name_of_array] objectAtIndex:0] intValue];`

快速`NSLog`将证明`myNumber`整数将等于您在 level.m 中数组中 0 索引处的任何数字

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-09-18T16:20:23.773

将您的数组添加到 AppDelegate 中，它将能够在整个应用程序中全局访问。

在 AppDelegate 中创建属性并合成您的数组。

您可以使用 AppDelegate 的实例在您想要的地方使用

# c# - ASP.NET Web 服务上的不同会话变量值

> ID：12480943
> 
> 赞同：1
> 
> 时间：2012-09-18T16:13:51.387
> 
> 标签：c#, asp.net, web-services, session-variables

我已经尝试解决这个问题两天了，我还没有在网上找到任何有用的东西。奇怪的是，这曾经有效..！在更改 Web 服务器上的一些设置后（不幸的是，我不记得确切的更改）它停止工作:(

这是发生的事情；

我在 aspx 页面上有一个隐藏字段，其值设置为 page_load （aspx.cs，代码隐藏）上的当前日期时间字符串（长日期时间字符串，包括秒数）。同时，这个随机值以相同的方法记录在下一行的会话变量中。

比（简单解释）我将此值发送到 Web 服务，在该服务中我检查此值与存储在会话变量中的值。你猜怎么着..有不一样的！这曾经有效，但不再有效，我不知道发生了什么变化或出了什么问题。由于这个字符串的值是日期时间值（以秒为单位），我可以看到这个值“大部分时间”改变了 2 秒。当我在 IIS 上调试代码时（通过附加工作进程），我可以看到从会话中恢复的值比从隐藏字段恢复的值晚 2 秒。

这在我的开发机器上工作，问题是，它不能在 Web 服务器上工作（Windows server 2008 r2）

我知道你可以提出一些替代方案，我自己也可以想到这种方法的替代方案，但我真的对解决这里的难题非常感兴趣......

任何帮助是极大的赞赏。

谢谢。

编辑：简单的方法

**page_load 上的方法调用**

```
addSecureString(System.DateTime.Now.Second.ToString()); 
```

**记录变量的方法**

```
protected void addSecureString(string s) {

        string secureS = "111" + s;
        Session.Add("securestring", secureS);
        hdnss.Value = Session["securestring"].ToString();

} 
```

**在网络服务上**

```
string tocheck = Session["securestring"]; 
```

hdnss -> 页面上隐藏字段的 id 注意：我正在使用日期时间的 Seconds 值，因为这是重要的部分并且正在改变..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-18T16:34:27.463

让您的 Web 服务与会话交互时有一些特殊注意事项：http: [//msdn.microsoft.com/en-us/library/aa480509.aspx](http://msdn.microsoft.com/en-us/library/aa480509.aspx)

# php - 用php编写sql查询

> ID：12480945
> 
> 赞同：0
> 
> 时间：2012-09-18T16:13:55.347
> 
> 标签：php, sql

我有一个 sql 查询，如图所示：

```
select * from some_table where some_name_id = 
(select some_name_id from some_names where some_name = 'FALL' 
   and some_other_id = 1) 
and year(some_start_date) = 2012 and some_other_id = 1; 
```

请注意，`'FALL'`开始日期和开始日期`some_other_id`将从我正在读取的文件中动态输入。我需要的只是帮助在 php 中写出该查询。当涉及到这些东西时，我有点菜鸟。还是用php弄湿了我的脚。

我忘了提到我必须使用 Doctrine 模型。不知道这是否有所作为。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-18T16:39:40.170

查看[PDO](http://php.net/manual/en/book.pdo.php)。它比程序命令需要更多的时间来适应`mysql_`，但完全值得。

```
$my_id = // whatever;
$my_name = // whatever;
$db_obj = new PDO (/* connection string */);

$query_str = "select * from some_table where some_name_id = 
    (select some_name_id from some_names where some_name = :name 
        and some_other_id = 1) 
    and year(some_start_date) = 2012 and some_other_id = :id";
$query_obj = $db_obj->prepare ($query_str); // creates a PDOStatement object
$query_obj->bindParam(":name", $my_name); // essentially replaces :name with $my_name*
$query_obj->bindParam(":id", $my_id); // essentially replaces :id with $my_id*
$query_obj->execute(); // executes the query
while ($row = $query_obj->fetch (PDO:FETCH_ASSOC)) {
    /* some code */
}; 
```

*注 1：注释中的*bindParam 解释过于简单化了。值得阅读 PDO 以及 bindParam 如何实际工作以获取更多信息。

注 2：很多人更喜欢命名`$query`$query_str 和 $query_obj `$result`。我更喜欢这种方式，但这只是一种风格。

# php - 正则表达式 - 从内到外替换

> ID：12480946
> 
> 赞同：2
> 
> 时间：2012-09-18T16:14:00.347
> 
> 标签：php, css, regex, preg-match, stylesheet

所以我正在为样式表构建一个解析器。在我的 CSS 文件中，我将解析如下内容：

```
body {
   background-image: &gradient(#1073b8, &saturate(#1073b8, -20), 40);
} 
```

结果将是这样的值：

```
body {
   background-image: url(/cache/graident12345.png);
} 
```

这是我的`&gradient()`函数的输出，我捕获并执行。但是其中一个论点`&gradient()`是 的结果`&saturate()`，所以它是分层的，我需要`preg_replace()`从内到外处理它们，但我该怎么做呢？所以首先 catch 和 parse `&saturate()`，返回一个颜色 HEX 值，解析时会在字符串中`&gradient()`。我当前的查找代码如下所示：

```
if (preg_match("/\&(gradient|saturate)\((.*?)\)/", $value, $m)){
   $arg = explode(", ", $m[2]); # splits argument to the function
   if ($m[1] == "saturate"){
       $value = str_replace($m[0], saturate($arg[1], $arg[2]);
   }
} 
```

我将添加功能，因为我使它们可用。或者，在正则表达式中也捕获函数名称。

我说清楚了吗？有任何想法吗？:)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-18T17:59:35.550

您可以使用正则表达式和递归函数进行一些有趣的解析。我已经模拟了一些适用于您的场景的东西，请随时根据您的需要对其进行调整。

[http://ideone.com/66tV0](http://ideone.com/66tV0)

如果您需要对正在发生的事情进行任何解释，请告诉我，但它基本上是通过对一个正则表达式模式的函数的递归调用来创建一个递归结构`&functionname([args...])`。

# javascript - dojo 1.6 中 onClick 标记内的函数超出范围

> ID：12480947
> 
> 赞同：0
> 
> 时间：2012-09-18T16:14:02.060
> 
> 标签：javascript, foreach, onclick, dojo, dom-events

我正在`forEach`循环制作按钮，但是当我尝试为`onClick`按钮的标签创建一个函数时，它说`this.foo()`这不是一个函数。代码如下：

```
 dojo.forEach(buttonIds, function(btn, i) {
               var button = new dijit.form.Button({
                    id: buttonIds[i]+'.'+widgetId,
                    label: buttonLabel[i],
                    onClick: function () {
                        dojo.hitch(this, this.foo());}
}); 
```

现在也许`dojo.connect()`在这里更合适，但我不知道如何将按钮 ID 作为第一个参数，因为如果我理解正确，那么 connect 看起来像`dojo.connect(button.id, 'onClick', this, foo())`. 不幸的是，此语句也会导致相同的错误。这可能是一个微不足道的范围问题，但我是 dojo 的新手，所以任何帮助都将不胜感激！

编辑：对不起，`dojo.connect()`错误是`button is undefined`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-19T04:13:29.667

我认为连接应该如下所示：

```
dojo.connect(dijit.byId(buttonIds[i]+'.'+widgetId), 'onclick', this.foo); 
```

**注意'onclick'**中的小写**'c'** ，而foo之后没有**'()' 。**

 ****至于`onClick`按钮构造函数中的参数，`dojo.hitch`接受并返回一个在第一个参数范围内执行的函数，因此：

```
onClick:dojo.hitch(this, this.foo); 
```

应该管用

您试图在函数的执行中而不是函数本身（注意函数名称后没有'（）;'）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-19T08:06:44.397

`dojo.forEach`实际上接受三个参数（[source](http://dojotoolkit.org/documentation/tutorials/1.6/arrays/)）：

> dojo.forEach 方法接受三 (3) 个参数：一个要迭代的数组、一个为数组的每个项目调用的函数（或回调）（包括已分配的索引之间的未分配索引，如上所述），以及**一个可选对象用作调用回调的范围**。

您`this`的 in`dojo.hitch`指向回调函数，添加`this`为第三个参数：

```
dojo.forEach(buttonIds, function(item, index, items) { /*callback*/ }, this);

// or alternatively
var self = this;
dojo.forEach(buttonIds, function(item, index, items) { /*use self instead of this here*/ }); 
```

我不确定你要达到什么目标，但这是我的猜测：

```
dojo.require("dijit.form.Button");

dojo.ready(function() {

    dojo.declare("Spam", null, {

        constructor: function() {
            this.buttonIds = ["button1", "button2", "button3"];         
        },

        createButtons: function() {
            dojo.forEach(this.buttonIds, function(item, index, items) {
                var button = new dijit.form.Button({
                    id: item,
                    label: item
                });
                button.onClick = dojo.hitch(this, "foo", button);
                button.placeAt(dojo.body());
            }, this);      
        },

        foo: function(widget, event) {
            console.log(widget.id);
        }
    });

    var spam = new Spam();
    spam.createButtons();

}); 
```

在 jsFiddle 上查看它的实际效果：http: [//jsfiddle.net/phusick/mcnjt/](http://jsfiddle.net/phusick/mcnjt/)****

# windows-8 - Windows 8 App Cert Kit 不再运行？

> ID：12480949
> 
> 赞同：4
> 
> 时间：2012-09-18T16:14:05.773
> 
> 标签：windows-8, microsoft-metro, app-certification-kit

我正在尝试对我的 Metro 应用程序进行 App Cert 检查，但它不再运行了！还有其他人有同样的问题吗？我在整个互联网上进行了搜索，甚至没有一个相关的结果。

它在几个小时前成功运行，但现在它根本不会运行。旋转的光标显示，表明它即将打开 - 但它没有。

我试过重新启动我的电脑，打开/关闭 Visual Studio，打开/关闭我的应用程序。它只是不运行。我试过以管理员身份运行，我什至尝试从它的实际位置运行它——而不是仅仅使用开始屏幕上的快捷方式图标——但它就是无法运行。

该怎么办？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-19T00:44:11.203

我设法解决了这个问题。

以管理员身份运行 CMD.exe，然后输入以下命令：

*   `cd C:\Program Files\Windows Kits\8.0\App Certification Kit`
*   `appcert.exe reset`

CMD 现在应该说：

> 成功重置测试配置。

现在，输入：

*   `appcertui`

现在应该会出现 Windows 应用认证工具包。

# wpf - 具有全行选择和动画的 WPF Treeview

> ID：12480951
> 
> 赞同：1
> 
> 时间：2012-09-18T16:14:14.233
> 
> 标签：wpf, treeview

我想用 WPF Treeview 模仿 OSX-Mail 中的 Treeview-Control，但不知道如何开始。在屏幕截图中，“MAILBOXES”和“SMART MAILBOXES”是文件夹。将鼠标悬停在每个文件夹上会淡入“显示”或“隐藏”按钮。单击该按钮会滑出子项（屏幕截图中的“收件箱”、“发送”和“今天”）。如何使用 WPF 获得类似的东西？树视图是一个不错的选择吗？

非常感谢！

[截屏](http://i.stack.imgur.com/JvL0Y.jpg)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-18T16:27:38.433

StackOverflow 上通常不会回答这样的一般性问题。我会试一试，但我只有时间提供您可以做什么的大纲。

我的经验是不惜一切代价避免使用 TreeView。它只是不符合逻辑并且在搜索节点时它很昂贵。

我认为您可以通过使用 ItemTemplate 是 Expander 控件的ItemsControl**来**获得**所需**的**行为。****ItemsControl**绑定到代表您的文件夹的对象集合。

 ******然后，您可以**DataTemplate****扩展器**的标题来模仿悬停行为。标题将是两个**TextBlocks**。一个用于标识扩展器，即“MAILBOXES”，另一个用于“显示”/“隐藏”标签。

本质上，“显示”和“隐藏”是一个 TextBlock，其中文本由附加到**Expander的****IsExpanded**属性的**DataTrigger**设置。如果**IsExpanded**为 true，则将 Text 设置为“Hide”，如果为 false，则将其设置为“Show”。

 ****然后对于位于每个文件夹中的其余项目，您可以将**ItemsControl**或**ListBox**放入**Expander**。**将ItemsControl**或**ListBox ItemsSource**绑定到每个文件夹中的项目。然后，您可以使用相应的**ItemTemplate**来设计那些您选择的项目。**********

# iphone - 围绕颜色的 UIButton 模式是什么？

> ID：12480955
> 
> 赞同：0
> 
> 时间：2012-09-18T16:14:28.833
> 
> 标签：iphone, xcode, design-patterns

我知道绿色是行动/提交，红色是破坏性/删除，但是灰色和黄色按钮呢？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-18T21:17:27.353

请随时编辑这篇文章并添加其他发现。
我看了看系统应用程序，这就是我发现的：

# 红色的

如您所述，红色按钮用于指示破坏性后果。这非常一致地使用，示例包括：

*   在电话应用程序中删除联系人
*   在照片应用程序中删除照片
*   在笔记应用程序中删除笔记

# 蓝色的

在系统应用程序中，蓝色用于表示按钮使用户退出编辑模式，而不恢复或引入新的更改。这些按钮大多被命名为“完成”，除了用户选择多个项目以通过使用其他按钮应用操作的列表。在这种情况下，他们的标题是“取消”。
例子：

*   在邮件应用程序中选择要删除/移动/标记的邮件时，名为“取消”的按钮为蓝色。
*   在照片应用程序中选择多张照片以共享/删除/...时，“取消”按钮也是蓝色的。
*   在电话应用程序中编辑联系人时，“完成”按钮为蓝色。

例外：

*   在提醒 App 中，白色按钮的作用相同。
*   照片应用程序中将视频发布到 YouTube 的按钮是蓝色的
*   蓝色还用于通过相机应用程序浏览照片时返回相机，并在语音备忘录应用程序中浏览以前的录音时返回录音。
*   蓝色用于指示语音备忘录应用程序中在扬声器和听筒之间切换的按钮状态

请注意，在照片应用程序中编辑单张照片时，“取消”按钮是黑色的，因为它会撤消对照片所做的更改。

# 绿色的

正如您所说，绿色按钮用于提交/购买/开始某些东西。例子：

*   在 AppStore 和 iTunes 应用程序中购买项目的按钮是绿色的。
*   在时钟应用程序中，绿色按钮启动计时器或秒表。
*   在 Messages App 中发送 SMS（不是 iMessage）是通过绿色按钮完成的。

例外：同样，在照片应用程序中将视频发布到 YouTube 的按钮是蓝色的，而恕我直言，它应该是绿色的。

# 黄色

我知道的按钮使用黄色的唯一情况是在“照片”应用程序中编辑电影或照片时保存所做更改的按钮。

# 灰色的

与黄色一样，我只知道灰色按钮的两个示例。时钟应用程序中用于暂停/恢复计时器以及标记圈数/重置秒表的按钮。

# asp.net-mvc - ASP.NET MVC4 路由问题 - 无法为路由生成 URL

> ID：12480964
> 
> 赞同：0
> 
> 时间：2012-09-18T16:15:12.607
> 
> 标签：asp.net-mvc, routing, routes, asp.net-mvc-4, asp.net-mvc-routing

我的应用程序中设置了两条路线：

```
routeCollection.MapRoute("CustomerActivity",
                         "Customer/{id}",
                         new { controller = "CustomerActivity", action = "DisplayDetails" },
                         new { id = @"^\d$" });
routeCollection.MapRoute("CustomerSearch",
                         "Customer/{*pathInfo}",
                         new
                            {
                             controller = "CustomerSearch",
                             action = "DisplaySearch"
                            }); 
```

传入的 URL 被正确地路由到正确的控制器/动作配对。但是在视图中，我需要生成一个 Anchor 来查看客户的详细信息：

```
@Html.ActionLink(Model.Name, "DisplayDetails", "CustomerActivity", new { id = Model.Id }, null) 
```

问题在于它实际上并没有选择任何路线。我相信这是因为对 CustomerActivity 路线的限制。

我也试过使用`RouteLink`没有太多运气：

```
@Html.RouteLink(Model.Name, "CustomerActivity", new { id = Model.Id }) 
```

我无法取消对 CustomerActivity 的约束，因为这是阻止一切落入该路线的原因。

在没有约束的情况下添加 CustomerActivity 的副本似乎可以解决问题，但我没有留下深刻的印象：

```
routeCollection.MapRoute("CustomerActivity",
                         "Customer/{id}",
                         new { controller = "CustomerActivity", action = "DisplayDetails" },
                         new { id = @"^\d$" });
routeCollection.MapRoute("CustomerSearch",
                         "Customer/{*pathInfo}",
                         new
                            {
                             controller = "CustomerSearch",
                             action = "DisplaySearch"
                            });
routeCollection.MapRoute("CustomerActivityUrlCreation",
                         "Customer/{id}",
                         new { controller = "CustomerActivity", action = "DisplayDetails" }); 
```

我能想到的唯一另一件事是从根本上区分 URL 并摆脱对 CustomerActivity 的约束，但我不想这样做。还有其他人对如何解决这个问题有任何其他建议吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-18T16:23:04.977

这应该有效。我怀疑您`Model.Id`的值大于 9，因此无法通过仅允许一位数的约束。所以尝试通过允许多个数字来调整约束：

```
routes.MapRoute(
    "CustomerActivity",
    "Customer/{id}",
    new { controller = "CustomerActivity", action = "DisplayDetails" },
    new { id = @"^\d+$" }
); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-18T18:16:40.910

```
Try this...It will work

routeCollection.MapRoute("CustomerActivity",
                         "{controller}/{action}/{id}",
                         new { controller = "CustomerActivity", action = "DisplayDetails" },
                         new { id = @"^\d$" });

routeCollection.MapRoute("CustomerSearch",
                         "CustomerSearch/DisplaySearch/{*pathInfo}",
                         new
                            {
                             controller = "CustomerSearch",
                             action = "DisplaySearch"
                            }); 
```

# java - Informatica 中的 Java 转换

> ID：12480965
> 
> 赞同：0
> 
> 时间：2012-09-18T16:15:14.893
> 
> 标签：java, informatica-powercenter

我可以在 Java 转换中编写 sql 查询吗？有没有可能？

我需要做这样的查询

```
String ID = select id from tablename where name='XXXX'. 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-21T13:19:38.497

您应该能够在 Java 转换中使用 JDBC 库。您可以从 Informatica Marketplace 应用程序下载演示此功能的示例映射

[https://community.informatica.com/solutions/mapping_jdbc_read_java_transformation](https://community.informatica.com/solutions/mapping_jdbc_read_java_transformation)

# php - 静态网站索引问题

> ID：12480967
> 
> 赞同：-1
> 
> 时间：2012-09-18T16:15:20.467
> 
> 标签：php, indexing, title

我有一个用 PHP 编写的静态网站。作为初学者，我非常想知道两件事。
- 如何在搜索引擎中索引搜索结果。顺便说一下，这个网站将从我的另一个网站获取一些结果....
正如我所说的，它是一个基于 php 的静态网站，它只有一些页面......
它的搜索页面 url 是这样的：
`www.mysite.com/results.php?q=free+antivirus+download`
- 和我的另一个问题是如何使用变量更改搜索结果页面标题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-18T17:12:35.787

看看谷歌的网站管理员工具。您可以在那里添加您的网站，并查看 google indexex 您的网站。

还有一些关于如何使您的网站对 SEO 更友好的提示，例如 sitemap.xml 或 robots.txt

您网站上的每个页面都必须有一个唯一的 url，以便 google 索引该页面。您提供的示例对 SEO 不太友好。

# objective-c - iTunesArtwork - 需要在应用程序包中？

> ID：12480968
> 
> 赞同：4
> 
> 时间：2012-09-18T16:15:21.920
> 
> 标签：objective-c, ios, app-store, itunes, appstore-approval

我们正在努力为我们正在开发的 iOS 新游戏压缩 50MB wifi 限制。

是否有任何理由将 iTunes 艺术作品包含在应用程序包中？包括 1024x1024 一个和 512x512 一个？当您在他们的网站上提交应用程序时，iTunes connect 需要一个 1024x1024 图标，那么为什么您的应用程序也需要它呢？

我问的原因是 1024x1024 PNG 大约是 1MB，这将帮助我们压缩到 50MB 以下。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-18T16:16:45.663

我昨天提交了一个 App Bundle 中没有 iTunes Artworks 的 App。

恕我直言，它有效

# c# - 从 DataAdapter 填充 DataTable - 选择了错误的列作为主键

> ID：12480969
> 
> 赞同：5
> 
> 时间：2012-09-18T16:15:29.000
> 
> 标签：c#, sql-server, ado.net, datatable, dataadapter

我正在通过从数据库中提取数据来填充`datatable`对象。由于某种原因，错误的列被设置为数据表上的主键。我已经尝试过，但无济于事。`dataadapter``MS-SQL``FillSchema``MissingSchemaAction.AddWithKey`

正确的主键在 SQL Server 数据库架构中正确定义，并由非聚集唯一索引支持`PK_x`。

数据适配器选择作为主键的列是由聚集唯一索引支持的唯一列。

这是表中仅有的两列。

DataAdapter 如何从 SQL 中检索表模式？我已经询问了 sys 表（sys.tables、sys.index_columns、sys.indexes），它们指示了正确的主键模式。是什么赋予了？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-10-29T12:16:27.903

“如果在 SQL Server 表中的一列或多列上定义了唯一聚集索引，并且在单独的一组列上定义了主键约束，则将返回聚集索引中列的名称。要返回名称或主键列的名称，在 SELECT 语句中使用查询提示来指定主键索引的名称。有关指定查询提示的详细信息，请参阅[查询提示 (Transact-SQL](http://msdn.microsoft.com/library/ms181714.aspx) )

[http://msdn.microsoft.com/EN-US/library/152bda9x(v=VS.110,d=hv.2).aspx](http://msdn.microsoft.com/EN-US/library/152bda9x(v=VS.110,d=hv.2).aspx)

# spring - 如何使用 Arquillian 在应用服务器容器中测试 Spring？

> ID：12480975
> 
> 赞同：1
> 
> 时间：2012-09-18T16:15:50.393
> 
> 标签：spring, tomcat, testng, jboss-arquillian

我们正在尝试使用 TestNG 框架在嵌入式 tomcat 容器上运行基于 Spring 的代码的集成测试。

我们尝试使用现有的 Arquillian Spring Extension，但没有取得多大成功。也许一些缺少的配置。我们已按照[此帖子的说明进行操作](http://arquillian.org/blog/2012/08/17/arquillian-extension-spring-1-0-0-Beta1/)

我们的 pom 包含以下依赖项：

```
 <dependency>
        <groupId>org.jboss.arquillian</groupId>
        <artifactId>arquillian-bom</artifactId>
        <version>1.0.2.Final</version>
        <scope>test</scope>
        <type>pom</type>
    </dependency>
    <dependency>
        <groupId>org.jboss.arquillian.testng</groupId>
        <artifactId>arquillian-testng-container</artifactId>
        <version>1.0.2.Final</version>
        <scope>test</scope>
    </dependency>
    <dependency>
        <groupId>org.testng</groupId>
        <artifactId>testng</artifactId>
        <version>6.8</version>
        <scope>test</scope>
    </dependency>
    <!-- Spring Extension -->
    <dependency>
        <groupId>org.jboss.arquillian.extension</groupId>
        <artifactId>arquillian-service-container-spring</artifactId>
        <version>1.0.0.Beta1</version>
        <scope>test</scope>
    </dependency>
    <!-- testing END --> 
```

我们还在我们的 pom.xml 中添加了一个 Tomcat 嵌入式配置文件。

```
 <profile>
        <id>arquillian-tomcat-embedded-7</id>
        <activation>
            <activeByDefault>true</activeByDefault>
        </activation>
        <dependencies>
            <dependency>
                <groupId>org.jboss.arquillian.container</groupId>
                <artifactId>arquillian-tomcat-embedded-7</artifactId>
                <version>1.0.0.CR3</version>
                <scope>test</scope>
            </dependency>
            <dependency>
                <groupId>org.apache.tomcat.embed</groupId>
                <artifactId>tomcat-embed-core</artifactId>
                <version>7.0.30</version>
                <scope>provided</scope>
            </dependency>
            <dependency>
                <groupId>org.apache.tomcat.embed</groupId>
                <artifactId>tomcat-embed-jasper</artifactId>
                <version>7.0.30</version>
                <scope>provided</scope>
            </dependency>
            <dependency>
                <groupId>org.apache.tomcat</groupId>
                <artifactId>tomcat-juli</artifactId>
                <version>7.0.30</version>
            </dependency>
            <dependency>
                <groupId>org.eclipse.jdt.core.compiler</groupId>
                <artifactId>ecj</artifactId>
                <version>3.7</version>
                <scope>test</scope>
            </dependency>

            <!-- Weld servlet for testing CDI injections -->
            <dependency>
                <groupId>org.jboss.weld.servlet</groupId>
                <artifactId>weld-servlet</artifactId>
                <version>1.1.9.Final</version>
            </dependency>
        </dependencies>
    </profile> 
```

我们的`arquillian.xml`样子...

```
<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<arquillian xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
xmlns="http://jboss.org/schema/arquillian"
xsi:schemaLocation="http://jboss.org/schema/arquillian http://jboss.org/schema/arquillian/arquillian_1_0.xsd">

<container qualifier="tomcat" default="true">
    <configuration>
        <property name="unpackArchive">true</property>
    </configuration>
</container> 
```

我们还尝试将以下几行添加到我们的`arquillian.xml`

```
<extension qualifier="spring">
    <property name="autoPackage">true</property>
    <property name="springVersion">3.0.0.RELEASE</property>
    <property name="cglibVersion">2.2</property>

    <property name="includeSnowdrop">true</property>
    <property name="snowdropVersion">2.0.3.Final</property>

    <property name="customContextClass">org.jboss.spring.vfs.context.VFSClassPathXmlApplicationContext</property>
</extension> 
```

我们创建了一个空测试并检查嵌入式 Tomcat 是否启动并且测试是否运行。下一步是验证 Arquillian Spring Extension 是否正常工作，为此我们尝试将 Spring bean 注入到我们的测试中。

问题是`@SpringConfiguration`注释根本不可用。所以我们猜测我们缺少一些配置。关于如何进行的任何线索？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-18T22:48:58.093

您正在使用 arquillian-service-container-spring 工件，它是嵌入式 Spring 容器。要与另一个容器一起使用，您需要使用 arquillian-service-deployer-spring-3 和 arquillian-service-integration-spring-inject 工件。

service-deployer 向部署添加自动添加 Spring 依赖项，而 service-integration-spring-inject 在测试用例中添加 @Inject/@Autowire 支持。

见[https://github.com/arquillian/arquillian-showcase/blob/master/spring/spring-inject/pom.xml#L43](https://github.com/arquillian/arquillian-showcase/blob/master/spring/spring-inject/pom.xml#L43)

可以在这里找到多个其他示例： [https ://github.com/arquillian/arquillian-showcase/tree/master/spring](https://github.com/arquillian/arquillian-showcase/tree/master/spring)

# android - 对 ArrayAdapter 或 ArrayList 的内容进行排序

> ID：12480984
> 
> 赞同：4
> 
> 时间：2012-09-18T16:16:13.230
> 
> 标签：android, arraylist, android-arrayadapter

我正在开发 android 项目，并且正在使用从 SQLite 数据库中检索数据的 ListView。

我正在使用 ArrayList 制作数据集，然后将此 ArrayList 添加到 ArrayAdapter 中。

当从数据库中检索数据时，我告诉 SQLite 进行排序，以便在将所有内容添加到 ListView 时按字母顺序排列。在某些时候，信息将被动态添加到 ListView 中，而无需再次从数据库中重新获取所有内容。但是，我想按字母顺序保留所有内容。

我将如何做到这一点，我是对 DataSet 进行排序，然后调用 notifyDataSet Changes 还是直接在 ArrayAdapter 上进行排序。我已经研究过在 ArrayAdapter 上执行排序，但这需要一个使用 Comparator 的参数，但不确定这是什么，并且找不到任何可能对我想要实现的目标有帮助的工作示例。

下面是填充数组并设置列表适配器的代码

```
ArrayList<Spanned> passwords = managePasswordList.getPasswordList();
        if (passwords != null && passwords.size() > 0)
        {
            passwordArrayAdapter = new ArrayAdapter<Spanned>(getActivity().getApplicationContext(), 
                    android.R.layout.simple_list_item_activated_1, passwords);
            setListAdapter(passwordArrayAdapter);
            myListView.setTextFilterEnabled(true);
            txtNoRecords.setVisibility(View.GONE);
        }
        else
        {
            txtNoRecords.setVisibility(View.VISIBLE);
        } 
```

然后我将数据添加到数据集并使用以下内容刷新列表视图

```
String company = Encryption.decrypt(passwords.get(i).company);
                    String username = Encryption.decrypt(passwords.get(i).username);
                    details = Html.fromHtml(company + "<br />" + "<small><font color=\"#767676\">" + username + "</b></small>"); 
```

passwords.add（详细信息）；
passwordArrayAdapter.notifyDataSetChanged();

感谢您的任何帮助，您可以提供。

**更新 1** 我已经尝试按照 Nick Bradbury 的建议进行操作，但比较器有问题。我有以下代码，但我不知道从这里去哪里。

```
SQLiteDatabase myDb = null;
        Cursor cursor = null;
        ArrayList<Spanned> passwords = new ArrayList<Spanned>();
        try
        {
            myDb = context.openOrCreateDatabase("PasswordManager", Context.MODE_PRIVATE, null);
            cursor = myDb.rawQuery("SELECT * FROM password ASC", null);
            while (cursor.moveToNext())
            {
                final String company = Encryption.decrypt(cursor.getString(2));
                final String username = Encryption.decrypt(cursor.getString(4));
                Spanned details = Html.fromHtml(company + "<br />" + "<small><font color=\"#767676\">" + username + "</b></small>");
                passwords.add(details);

                Collections.sort(passwords, new Comparator<Spanned>() {

                    public int compare(Spanned lhs, Spanned rhs) {
                        return 0;
                    }
                });
            }
        }
        catch (SQLiteException ex)
        {
            common.showBasicAlertDialog("Unfortunately something has gone wrong.\n\nWe will fix this as soon as we can", false);
            Log.e("Database Error", ex.toString());
            return null;
        } 
```

在 return 语句中，我不知道该怎么做，我试过`return lhs.compareTo`了，但是 lhs 和 rhs 变量没有 compareTo 函数，所以我不知道该怎么做。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-09-18T17:35:47.983

这是一个使用 Comparator 对 ArrayList 进行排序的简单示例。在此示例中，ArrayList 定义为：

```
public class StatusList extends ArrayList<Status> 
```

此 ArrayList 的排序例程可能如下所示：

```
public void sort() {
    Collections.sort(this, new Comparator<Status>() {                
        @Override
        public int compare(Status item1, Status item2) {
            return item2.getDate().compareTo(item1.getDate());
        }
    });
} 
```

将 <Status> 替换为 ArrayList 包含的任何对象，然后更改比较以比较您希望排序的对象的值。

# cross-browser - Internet Explorer 9 中的盒子阴影重影

> ID：12480990
> 
> 赞同：5
> 
> 时间：2012-09-18T16:16:31.870
> 
> 标签：cross-browser, internet-explorer-9, css

尝试在 Internet Explorer 9 上使用框阴影时，我遇到了一些重影、伪影或只是一般的不稳定现象。

目标是有一组文本区域，当聚焦时，将用框阴影突出显示。这在大多数浏览器中都没有任何问题，但是在 IE9 中循环浏览元素时，我看到以下行为：

![盒子阴影示例](../Images/59ea78266904915c3c2ab62f625492b3.png)

在上面的示例中，第三个文本区域失去焦点到第二个文本区域。方框阴影的左右两侧在第三个文本区域不会消失，也不会在第二个文本区域出现。

重现的代码如下。在第二个和第三个文本区域之间切换焦点时会出现此问题。

**HTML**

```
<label>Text Area 1:</label>
<textarea class="sampleClass"></textarea><br /><br />
<label>Text Area 2:</label>
<textarea  class="sampleClass"></textarea><br /><br />
<label>Text Area 3:</label>
<textarea  class="sampleClass"></textarea><br /><br /> 
```

**CSS**

```
.sampleClass
{
    border:1px solid #ccc;
}

.sampleClass:focus
{
    box-shadow: 0px 0px 12px rgba(255,0,0,.8);
} 
```

代码也可以在[这里](http://jsfiddle.net/vfKEp/)看到。

这里到底发生了什么？

* * *

## 回答 #1

> 赞同：-2
> 
> 时间：2012-09-29T22:28:00.137

我有一个小窍门……在很多情况下，我们可以使用 PIE！

[http://css3pie.com/](http://css3pie.com/)

它“使 Internet Explorer 6-9 能够呈现几个最有用的 CSS3 装饰功能。”

这对我帮助很大！