# StackOverflow 问答 10056000-10056999

# java - 从 Jlist 组件中选择文本

> ID：10056005
> 
> 赞同：1
> 
> 时间：2012-04-07T16:06:53.370
> 
> 标签：java, swing, selection, jlist, jtextpane

我有一个 Jlist，该组件是包含字符串的 JTextpane，例如“hello world”我想通过选择 Jlist 组件来选择单词“hello”我如何知道选择了哪个单词，“hello”或“world”我使用方法 Jtextpane。 getSelection() 但它不起作用任何帮助将不胜感激！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-12-20T07:59:16.723

我猜您的意思是您正在创建`JTextPane`s 作为列表单元格渲染器中的组件。这里的问题是单元格渲染器返回的组件仅用于绘制单元格内容，没有组件的实际功能可用。

一个解决方案是不使用 a`JList`而是使用`JTextPane`带有 HTML 内容的 big 。

# java - 正确使用 Facelet 模板和复合组件

> ID：10056008
> 
> 赞同：7
> 
> 时间：2012-04-07T16:06:56.020
> 
> 标签：java, jsf-2, custom-component, composite-component, tagfile

我仍然不确定是否正确使用 JSF 模板和复合组件。我需要创建一个企业 Web 应用程序，它会有很多页面。每个页面都有相同的页眉、菜单、页脚，当然还有不同的内容（= JSF 模板）。每个页面上的内容都由可重复使用的“盒子”（= JSF 复合组件）组成。这些框由一些文件、按钮等组成。我的解决方案是否正确？或者我应该使用其他技术，如自定义组件、装饰......？

布局.xhtml

```
<h:body>
    <ui:insert name="main_menu">
        <ui:include src="/xhtml/template/main_menu.xhtml"/>
    </ui:insert>
    <ui:insert name="header">
        <ui:include src="/xhtml/template/header.xhtml"/>
    </ui:insert>
    <ui:insert name="content"/>
    <ui:insert name="footer">
        <ui:include src="/xhtml/template/footer.xhtml"/>
    </ui:insert>
</h:body> 
```

customer_overview.xhtml：

```
<html xmlns:cc="http://java.sun.com/jsf/composite/composite_component">
<h:body>
    <!-- Facelet template -->
    <ui:composition template="/xhtml/template/layout.xhtml">
        <ui:define name="content">
            <!-- Composite Components -->
            <cc:component_case_history
                caseList="#{customerOverviewController.cases}"
            />
            <cc:component_customer
                ....
            />
            ...
        </ui:define>
    </ui:composition>
</h:body> 
```

component_case_history.xhtml

```
<html xmlns:composite="http://java.sun.com/jsf/composite">
<composite:interface>
    <composite:attribute name="cases" type="java.util.List"/>
</composite:interface>

<composite:implementation>
    <!-- using of "cases" -->
    ...
</composite:implementation> 
```

CustomerOverviewController.java

```
@ManagedBean
@ViewScoped
public class CustomerOverviewController {
    public List<Case> getCases() {
        ...
    }
} 
```

**编辑 2012-04-27**

基于： [何时使用 <ui:include>、标记文件、复合组件和/或自定义组件？](https://stackoverflow.com/questions/6822000/when-to-use-uiinclude-tag-files-composite-components-and-or-custom-componen)

我认为我应该使用 Facelet 模板 + Facelet 标记文件，而不是 Facelet 模板 + 复合组件。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-08T10:42:52.893

## 布局、模板

### 布局.xhtml：

> 每个页面都有相同的页眉、菜单、页脚......

在这种情况下，您可以省略页眉、菜单、页脚的 ui:insert 标记。

```
<h:body>
    <ui:include src="/xhtml/template/main_menu.xhtml"/>
    <ui:include src="/xhtml/template/header.xhtml"/>
    <ui:insert name="content"/>
    <ui:include src="/xhtml/template/footer.xhtml"/>
</h:body> 
```

你也可能有一个没有名字的 ui:insert，所以如果你想进一步简化：

```
<h:body>
    <ui:include src="/xhtml/template/main_menu.xhtml"/>
    <ui:include src="/xhtml/template/header.xhtml"/>
    <ui:insert/>
    <ui:include src="/xhtml/template/footer.xhtml"/>
</h:body> 
```

### customer_overview.xhtml：

如果您在 layout.xhtml 中有没有名称的 ui:insert，则此处不需要 ui:define：

```
<ui:composition template="/xhtml/template/layout.xhtml">
        <!-- Composite Components -->
        <cc:component_customer/>
        <cc:component_case_history
            caseList="#{customerOverviewController.cases}"
        />
        ...
</ui:composition> 
```

此外，您应该将模板放在用户无法直接访问的文件夹中 (WEB-INF)。

## 可重复使用的“盒子”

您的复合组件之一如下所示：

```
<cc:component_customer/> 
```

没有任何属性的组件是非常可疑的。

*   它有什么作用？
*   显示用户名？
*   如果您不传递任何属性，它如何获取用户名？

一个组件应该是独立的，对于其他可重复使用的部分，请使用 ui:insert 代替。

# objective-c - 将对象添加到具有多对多关系的核心数据中的 NSSet

> ID：10056014
> 
> 赞同：6
> 
> 时间：2012-04-07T16:07:38.897
> 
> 标签：objective-c, ios, core-data, many-to-many

我有一个包含餐厅和气氛的核心数据结构，其中餐厅可以有很多气氛，而气氛可以有很多餐厅。所以我建立了两个多对多的关系，两者都是苹果文档中所述的逆向关系，形成了一个多对多的关系。

但是，我在将对象添加到创建的集合时遇到了麻烦。例如，当我使用这样的代码时，

```
Atmosphere *atmosphere = [Atmosphere atmosphere:aId inManagedObjectContext:context];
[restaurant addAtmospheresObject:atmosphere]; 
```

它崩溃并出现一个奇怪的错误：

```
EXC_BREAKPOINT (code=EXC_I386_BPT, subcode=0x0) 
```

请问大家有没有遇到过这种情况？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-04-07T17:16:56.270

看起来您没有`atmosphere`正确创建对象。试试这个：

```
Atmosphere *atmosphere = [NSEntityDescription 
   insertNewObjectForEntityForName:@"Atmosphere" 
            inManagedObjectContext:context];
// further configuration
if (restaurant) {
   [restaurant addAtmospheresObject:atmosphere];
} 
```

# php - 将 $_POST 值添加到购物车

> ID：10056016
> 
> 赞同：0
> 
> 时间：2012-04-07T16:08:04.030
> 
> 标签：php, shopping-cart, cart

我曾经为我的网站下载过这个购物车脚本。但现在我想为购物车添加一个值，但不知道如何...... :(

我有以下代码：

产品.php

```
<form method="post" action="cart.php?action=update">
  <div class="quantity">
    <input type="text" name="qty<?php echo(''.$pinfo->id.''); ?>" value="1" /><span>&nbsp;&nbsp;&chi;</span>
  </div>
  <div class="add-quantity">
    <input class="nice-s" type="submit" name="product-quantity-submit" value="ORDER" />
  </div>
</form> 
```

购物车.php

```
$cart = $_SESSION['cust_cart'];

if(isset($_GET['action'])) {

$action = sanitize($_GET['action']);
switch ($action) {
    case 'add':
        if ($cart) {
            $cart .= ','.$_GET['id'];
        } else {
            $cart = $_GET['id'];
        }
        break;
    case 'delete':
        if ($cart) {
            $items = explode(',',$cart);
            $newcart = '';
            foreach ($items as $item) {
                if ($_GET['id'] != $item) {
                    if ($newcart != '') {
                        $newcart .= ','.$item;
                    } else {
                        $newcart = $item;
                    }
                }
            }
            $cart = $newcart;
        }
        break;
    case 'update':
/*  if ($cart) { */
        $newcart = '';
        foreach ($_POST as $key=>$value) {
            if (stristr($key,'qty')) {
                $id = str_replace('qty','',$key);
                $items = ($newcart != '') ? explode(',',$newcart) : explode(',',$cart);
                $newcart = '';
                foreach ($items as $item) {
                    if ($id != $item) {
                        if ($newcart != '') {
                            $newcart .= ','.$item;
                        } else {
                            $newcart = $item;
                        }
                    }
                }
                for ($i=1;$i<=$value;$i++) {
                    if ($newcart != '') {
                        $newcart .= ','.$id;
                    } else {
                        $newcart = $id;
                    }
                }
            }
        }
/*  }  */
    $cart = $newcart;
    break;
}

}
$_SESSION['cust_cart'] = $cart; 
```

我想知道的是；如何通过 product.php 页面向购物车添加另一个值，其中包含以下字段：

```
 <div class="size">
    <select name="size">
       <option value="16 INCH">16 INCH</option>
       <option value="19 INCH">19 INCH</option>
       <option value="22 INCH">22 INCH</option>
  </div> 
```

提前谢谢！！二）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-07T16:12:53.840

将`<select>`块放在`<form>`标签内（**并确保关闭您的标签`<select>`！**您的示例未显示正确的语法。）您应该能够通过访问变量来获取值`$_POST["size"]`。

我不知道如何处理这些数据，但我建议将每个选项的值更改为不带空格的值。

# c++ - 尝试用codelite编译

> ID：10056018
> 
> 赞同：2
> 
> 时间：2012-04-07T16:08:12.230
> 
> 标签：c++, c, compilation, codelite

我刚刚下载了这个[tarball](http://libtheoraplayer.svn.sourceforge.net/viewvc/libtheoraplayer/trunk/) ...现在我想编译它，因为我在*trunk/projects/gcc*中找到了一个自述文件，上面写着：

> 该项目中的 Linux GCC 和 Windows MinGW 版本通过 CodeLite 项目文件得到支持。Codelite 是一个非常酷的开源 C++ IDE，可以在这里找到：http: [//www.codelite.org/](http://www.codelite.org/)其他 GCC 构建方法不受积极支持，但欢迎贡献者和维护者这样做！只需给我写信，我会了解如何将您添加到项目的 svn 写入访问列表中。

所以我安装了codelite 3.5并用codelite打开了*trunk/projects/gcc/libtheoraplayer.workspace*，但是当我尝试运行项目（播放按钮）时没有任何反应..有什么想法吗？

**无论如何，如果有人知道如何以其他方式编译该 tarball，我将很高兴使用它..我使用 configure-make 尝试过，但我没有得到它..**

Ubuntu 11.10

哈维尔

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-20T23:07:07.610

我是您要编译的库的作者。问题是，我以前使用过 CodeLite，但后来停止并因此删除了所有 CodeLite 项目文件。这是因为我没有足够的时间在其他更重要的项目文件旁边维护它们。

如果您有兴趣为此项目维护 codelite 文件，请在项目论坛上发帖，我将指导您设置文件和预处理器宏。

项目页面链接： http: [//libtheoraplayer.cateia.com/wiki/index.php/Main_Page](http://libtheoraplayer.cateia.com/wiki/index.php/Main_Page)

# c# - 在 MVC3 的嵌套集合模型中使用 TextBoxFor？

> ID：10056020
> 
> 赞同：1
> 
> 时间：2012-04-07T16:08:18.297
> 
> 标签：c#, asp.net, asp.net-mvc-3, razor, nested-class

我有以下型号：

```
public class EvaluationCriteriaItem
{
    public int ID { get; set; }
    public string Name { get; set; }
    [Required(ErrorMessage = "*")]
    public int Score { get; set; }
    public List<EvaluationCriteriaItem> Children { get; set; }
}

public class UserPanelModel
{
    public List<SelectListItem> OrganizationsList { get; set; }
    public List<EvaluationCriteriaItem> EvaluationCriteriaList { get; set; }
} 
```

我用 Razor 从上面的模型创建了一个 TreeView ：

```
@using AssessmentSystem.Models
@section Header{
    <link href="@Url.Content("~/Content/jquery.treeview.rtl.css")" rel="stylesheet" type="text/css" />
    <script type="text/javascript" src="@Url.Content("~/Scripts/jquery.treeview.user.js")"></script>
    <style type="text/css">
        input[type="text"], input[type="password"]
        {
            width: 40px;
            margin-right: 10px;
            direction: ltr;
        }
        .treeview .hover, .filetree div.file:hover
        {
            cursor: default;
        }
    </style>
    <script type="text/javascript">
        $(document).ready(function () {
            $('input[type="text"]').keydown(function (event) {
                if (event.keyCode == 46 || event.keyCode == 8 ||
                    event.keyCode == 9 || event.keyCode == 27 ||
                        (event.keyCode == 65 && event.ctrlKey === true) ||
                            (event.keyCode >= 35 && event.keyCode <= 39))
                    return;
                else if ((event.keyCode < 48 || event.keyCode > 57) &&
                    (event.keyCode < 96 || event.keyCode > 105))
                    event.preventDefault();
            });
        });
    </script>
}
@helper TreeView(List<EvaluationCriteriaItem> childrens)
    {
        for (int i=0; i<childrens.Count; i++)
        {
            if (childrens[i].Children != null && childrens[i].Children.Count > 0)
            {
    <li>
        <div class="folder">
            <div>
                <span id="@string.Format("span_{0}", childrens[i].ID)">@childrens[i].Name</span>
            </div>
        </div>
        <ul>
            @TreeView(childrens[i].Children)
        </ul>
    </li>
            }
            else
            {
    <li>
        <div class="file">
            <div>
                <span id="@string.Format("span_{0}", childrens[i].ID)">@childrens[i].Name</span>
                @Html.TextBox("ScoreFor_", childrens[i].Score == 0 ? "" : childrens[i].Score.ToString(), new { maxlength = 3 })
            </div>
        </div>
    </li>
            }
        }
}
@if (!MvcHtmlString.IsNullOrEmpty(Html.ValidationMessage("InvalidData")))
{
    <div style="width: 250px; margin: 20px auto; color: red;">
        @Html.ValidationMessage("InvalidData")
    </div>
}
@using (Html.BeginForm("SubmitScore", "UserPanel"))
{
    <table class="register-table">
        <tr>
            <td>
                Organization :
            </td>
            <td>
                @Html.DropDownListFor(x => x.OrganizationsList, Model.OrganizationsList)
            </td>
        </tr>   
    </table>
    <div style="width: 50%; margin: 0 auto;">
        <ul id="EvaluationCriteriaTreeView" class="filetree">
            @TreeView(Model.EvaluationCriteriaList)
        </ul>
        <br />
        <div style="text-align: center;">
            <input type="submit" value="Submit Score" /></div>
    </div>
}
<script type="text/javascript">
    $("#EvaluationCriteriaTreeView").treeview({
        animated: "fast"
    });
</script> 
```

但是因为我正在使用`@Html.TextBox`我不能使用服务器模型验证。
我如何`@Html.TextBoxFor`在最佳情况下使用。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-07T16:37:02.847

我建议在这种情况下使用 MVC Display/EditorTemplates 而不是助手。使用模板，您可以获得自动收集支持，并且您可以使用强类型模型。

[https://web.archive.org/web/20151112171922/http://blogs.msdn.com/b/nunos/archive/2010/02/08/quick-tips-about-asp-net-mvc-ui-助手和模板.aspx](https://web.archive.org/web/20151112171922/http://blogs.msdn.com/b/nunos/archive/2010/02/08/quick-tips-about-asp-net-mvc-ui-helpers-and-templates.aspx)

[https://web.archive.org/web/20150908050041/http://blogs.msdn.com/b/nunos/archive/2010/02/08/quick-tips-about-asp-net-mvc-editor-模板.aspx](https://web.archive.org/web/20150908050041/http://blogs.msdn.com/b/nunos/archive/2010/02/08/quick-tips-about-asp-net-mvc-editor-templates.aspx)

# ruby-on-rails - Rails Time.zone 解析无法按预期工作

> ID：10056025
> 
> 赞同：3
> 
> 时间：2012-04-07T16:08:50.817
> 
> 标签：ruby-on-rails, ruby, timezone, activesupport

我在测试部署到不同时区（PDT 和 CDT）的两个不同登台服务器的 rails 应用程序时遇到了这个问题。两台服务器都有使用默认 UTC config.time_zone 的导轨。除了时区配置不同之外，两台服务器的时钟设置都正确。

以下是我在 Rails 控制台中看到的内容：

在系统时区为 CDT 的服务器上，

```
Time.zone.parse("Mon May 28 2012 00:00:00 GMT-0700 (PDT)")
 => Mon, 28 May 2012 05:00:00 UTC +00:00 
```

在系统时区为 PDT 的服务器上，

```
Time.zone.parse("Mon May 28 2012 00:00:00 GMT-0700 (PDT)")
 => Mon, 28 May 2012 07:00:00 UTC +00:00 
```

该字符串`Mon May 28 2012 00:00:00 GMT-0700 (PDT)`是客户端发送的任意日期时间值。这是使用通过 rails params 集合传入的 javascript Date 对象时的常见场景。

**为什么两个结果`Time.zone.parse(identical_date_time_string)`不同？**

如果我在两个系统上运行以下命令，结果显示正确：

```
"Mon May 28 2012 00:00:00 GMT-0700 (PDT)".to_time
 => 2012-05-28 07:00:00 UTC 
```

我在 ubuntu 上运行带有 ruby​​ 1.9.3-p125 的 rails 3.2.3。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-07T16:21:00.970

`ActiveSupportTimeZone.parse`不尝试从给定字符串中提取时区信息。它只是提取日期和时间并将其转换为具有给定（本地）时区的 TimeWithZone。

`str.to_time`会注意到“GMT-0700”行，但会产生一个没有时区的时间。

您可以通过提取“GMT .....”部分并将其转换为接近但不完全是时区的 UTC 偏移量来捏造它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-11T03:24:40.350

这是我的做法

```
> Time.zone = "Hawaii"
=> "Hawaii"
> Time.zone.parse("Tue Mar 13 2012 13:00:00 GMT+1300 (NZDT)".sub("GMT",""))
=> Mon, 12 Mar 2012 14:00:00 HST -10:00
> Time.zone = "UTC"
=> "UTC"
> Time.zone.parse("Tue Mar 13 2012 13:00:00 GMT+1300 (NZDT)".sub("GMT",""))
=> Tue, 13 Mar 2012 00:00:00 UTC 00:00 
```

# ruby-on-rails - 规范。如何检查对象方法是否被调用？

> ID：10056027
> 
> 赞同：7
> 
> 时间：2012-04-07T16:09:01.547
> 
> 标签：ruby-on-rails, ruby, rspec

我正在为控制器编写规范：

```
it 'should call the method that performs the movies search' do
  movie = Movie.new
  movie.should_receive(:search_similar)
  get :find_similar, {:id => '1'}
end 
```

我的控制器看起来像：

```
def find_similar
 @movies = Movie.find(params[:id]).search_similar
end 
```

运行 rspec 后，我得到以下信息：

```
Failures:
1) MoviesController searching by director name should call the method that performs the movies search
 Failure/Error: movie.should_receive(:search_similar)
   (#<Movie:0xaa2a454>).search_similar(any args)
       expected: 1 time
       received: 0 times
 # ./spec/controllers/movies_controller_spec.rb:33:in `block (3 levels) in <top (required)>' 
```

我似乎理解并接受，因为在我的控制器代码中，我调用了类（电影）方法，但我看不到任何将“find_similar”与规范中创建的对象连接起来的方法。

所以问题是-> 检查方法是否在规范中创建的对象上调用的方法是什么？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-07T17:00:12.527

```
it 'should call the method that performs the movies search' do
  movie = Movie.new
  movie.should_receive(:search_similar)
  Movie.should_receive(:find).and_return(movie)
  get :find_similar, {:id => '1'}
end 
```

[值得一提的是，我完全反对这些 stub-all-things 测试，它们只会使代码更改更加困难，实际上只测试代码结构。]

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-07T16:20:48.100

起初，您的电影尚未持久化。

其次，不是事实，那将有 id`1`

所以试试这个

```
it 'should call the method that performs the movies search' do
  movie = Movie.create
  movie.should_receive(:search_similar)
  get :find_similar, {:id => movie.id}
end 
```

# java - Android 的确切下载次数

> ID：10056032
> 
> 赞同：1
> 
> 时间：2012-04-07T16:09:28.710
> 
> 标签：java, php, android, firefox-addon, google-play

据我所知，除非您已连接到您的 Google plus 帐户，否则您无法获得下载您的应用程序的确切用户数量。真的吗？（我还没有 google play（android 市场）帐户，我的应用程序还没有上市，所以我只想确保我在这里说的是有效的东西。）

有什么办法可以以编程方式获取下载次数，最好是实时获取？

根据我的发现，市场上没有让我这样做的 API。那么如何实现呢？

我需要获取该值并实时更新我的​​网站和博客上的图表。

任何人都可以为此提出解决方法吗？我想到的一件事是：要么在我的家用机器上制作一个 Firefox 扩展，自动连接到我的 Google plus 帐户，获取所需的值并通过 ftp 或其他方式更新页面，或者我可以使用 PHP 代替 Firefox 扩展在本地进行解析等。但我需要让我的家用机器一直开着，我真的不想这样做。

还有其他想法吗？我真的需要那个确切的值，我需要它是自动化的:)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-07T16:14:37.173

默认情况下不可能。唯一存在的数字最多仅每天更新一次。

您需要设计自己的方法来计算下载量，例如要求您的用户在您自己的服务上注册。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-07T16:24:52.457

当用户下载应用程序时，您可以让它回调到您网站上的脚本，该脚本会为您进行统计。显然，应用程序应该只在第一次运行时调用它（但是，根据你实现它的方式，可能会在每次刷新应用程序的缓存/数据时调用）。如果您没有需要注册的服务，您可以在后台完成。

# php - PHP Transaction-like sql required?

> ID：10056037
> 
> 赞同：0
> 
> 时间：2012-04-07T16:10:07.473
> 
> 标签：php, curl, transactions

I used cURL to authenticate first then login via POST to a cms.

Then another POST again to ask the cms to generate a new code number (eg voucher code) and grab the csv from url that contain about 70 lines per page.

I can explode each line and get the last line for the new code number that is generated before.

My question is if many requests are created by many customers, is it possible to accidentally reading the same voucher code? Although cURL get the csv file pretty fast, should I make sure that a request must be completed first before another? like a sql transaction.

Though I read somewhere php do not run in parallel, since I am a beginner in all these and someone asked me if my script can cause that for multiple requests. THanks in advance.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-07T16:44:04.847

The only way you will get the same voucher code is if the remote server generates the same code twice. You are correct in saying `php do not run in parallel` but concurrency has nothing to do with your specific case, there is no way the two HTTP response get mixed up with each other because they are sent back to you in different TCP streams. The underlying TCP/IP stack of the OS will prevent collisions.

Regardless of this, you should be able to check for collisions after you have received the data. For example, if you are inserting it into an SQL database, you can create a unique index on the field that holds the code, and the database will prevent you from inserting duplicated rows.

As a side note, you say you `can explode each line` which is true, but you may wish to have a look at [`fgetcsv()`](http://www.php.net/manual/en/function.fgetcsv.php) and [`str_getcsv()`](http://www.php.net/manual/en/function.str-getcsv.php), which will parse the line for you and take into account escape sequences and all sorts of edge-cases that you code will not account for. If you want to perform multiple cURL requests at once, you may also want to have a look at [`curl_multi_exec()`](http://www.php.net/manual/en/function.curl-multi-exec.php), which will allow you to execute several requests at once and speed up the execution of your script.

# ios - 关闭 UIViewController 后如何重新加载 tableView

> ID：10056043
> 
> 赞同：1
> 
> 时间：2012-04-07T16:10:47.130
> 
> 标签：ios, tableview, reloaddata

我使用以下方法来呈现一个名为 DictAddSubSecondCell 的 UIViewController：

```
// UIViewControler 1
- (IBAction)addWord:(id)sender{
dictAddSubSecondCellController = [[DictAddSubSecondCell alloc] initWithNibName:@"DictAddSubSecondCell" bundle:nil];
[self presentModalViewController:dictAddSubSecondCellController animated:YES];
[dictAddSubSecondCellController release];
} 
```

当我单击 DictAddSubSecondCell 中的按钮时：

```
- (IBAction)dismissAction:(id)sender{ 
[self dismissModalViewControllerAnimated:YES];
} 
```

UIViewControler 1 的 tableView 没有重新加载它的数据，但我在 viewWillApear 方法中添加了一个方法：

```
[self.table reloadData]; 
```

但它仍然无法正常工作。我对此一无所知。对我有什么建议吗？谢谢。

这是 UIViewcontroller 1 的完整源代码：

```
//
//  DictAddSubSecond.m
//
//  Created by Samuel Armstrong on 4/8/12.
//  Copyright 2012 __MyCompanyName__. All rights reserved.
//

#import "DictAddSubSecond.h"
#import "DictionaryList.h"

@implementation DictAddSubSecond
@synthesize dictList, table, editButton;
@synthesize dictAddSubSecondCellController;

- (IBAction)addWord:(id)sender
{
    dictAddSubSecondCellController = [[DictAddSubSecondCell alloc] initWithNibName:@"DictAddSubSecondCell" bundle:nil];
    [self presentModalViewController:dictAddSubSecondCellController animated:YES];
    [dictAddSubSecondCellController release];
}

- (IBAction)toggleEdit {
    [self.table setEditing:!self.table.editing animated:YES];

    if (self.table.editing) {
        [editButton setTitle:@"Done"];
        [editButton setStyle:UIBarButtonItemStyleDone];
    }
    else {
        [editButton setTitle:@"Edit"];
        [editButton setStyle:UIBarButtonItemStyleBordered];

    }
}

- (IBAction)dismissAction:(id)sender
{
    [self dismissModalViewControllerAnimated:NO];
}

- (id)initWithNibName:(NSString *)nibNameOrNil bundle:(NSBundle *)nibBundleOrNil
{
    self = [super initWithNibName:nibNameOrNil bundle:nibBundleOrNil];
    if (self) {
        // Custom initialization
    }
    return self;
}

- (void)didReceiveMemoryWarning
{
    // Releases the view if it doesn't have a superview.
    [super didReceiveMemoryWarning];

    // Release any cached data, images, etc that aren't in use.
}

#pragma mark - View lifecycle

- (void)refreshTableData
{
    NSString *path = [NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES) objectAtIndex:0];
    NSString *file = [path stringByAppendingPathComponent:@"dictWithWords.tmp"];
    if (dictList == nil) {
        NSMutableArray *array = [[NSMutableArray alloc] initWithContentsOfFile:file];
        if ([array objectAtIndex:0] != nil) {
            dictList = [[NSMutableArray alloc] initWithCapacity:1];
            self.dictList = array;
            [array release];
        }
        else
        {
            dictList = [[NSMutableArray alloc] initWithCapacity:1];
        }
    }
    [self.table reloadData];

}

- (void)viewWillAppear:(BOOL)animated
{
    [super viewWillAppear:animated];

    [self refreshTableData];
}

- (void)someMethodToReloadTable:(NSNotification *)notification 
{
    [table reloadData];  
}

- (void)viewDidLoad
{
    [super viewDidLoad];
    // Do any additional setup after loading the view from its nib.
    [[NSNotificationCenter defaultCenter] addObserver:self selector:@selector(someMethodToReloadTable) name:@"reloadTable" object:nil];

}

- (void)viewDidUnload
{
    [super viewDidUnload];
    // Release any retained subviews of the main view.
    // e.g. self.myOutlet = nil;
    [[NSNotificationCenter defaultCenter] removeObserver:self name:@"reloadTable" object:nil];

}

- (BOOL)shouldAutorotateToInterfaceOrientation:(UIInterfaceOrientation)interfaceOrientation
{
    // Return YES for supported orientations
    return (interfaceOrientation == UIInterfaceOrientationPortrait);
}

#pragma mark -
#pragma mark Table View Data Source Methods

- (NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section
{
    return [dictList count];
}

- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
    static NSString *MoveMeCellIdentifier = @"MoveMeCellIdentifier";
    UITableViewCell *cell = [self.table dequeueReusableCellWithIdentifier:MoveMeCellIdentifier];

    if (cell == nil) {
        cell = [[[UITableViewCell alloc] initWithStyle:UITableViewCellStyleSubtitle reuseIdentifier:MoveMeCellIdentifier] autorelease];

        //A Boolean value that determines whether the cell shows the reordering control.
        cell.showsReorderControl = YES;

    }
    NSUInteger row = [indexPath row];

    cell.textLabel.text = [dictList objectAtIndex:row];
    cell.accessoryType = UITableViewCellAccessoryDisclosureIndicator;
    return cell;
}

#pragma mark -
#pragma mark Table View Delegate Methods
- (void)tableView:(UITableView *)tableView commitEditingStyle:(UITableViewCellEditingStyle)editingStyle forRowAtIndexPath:(NSIndexPath *)indexPath
{
    NSUInteger row = [indexPath row];
    [self.dictList removeObjectAtIndex:row];
    [tableView deleteRowsAtIndexPaths:[NSArray arrayWithObject:indexPath] 
                     withRowAnimation:UITableViewRowAnimationMiddle];
}

- (UITableViewCellEditingStyle)tableView:(UITableView *)tableView editingStyleForRowAtIndexPath:(NSIndexPath *)indexPath
{
    return UITableViewCellEditingStyleDelete;
}

// Asks the data source whether a given row can be moved to another location in the table view.
- (BOOL)tableView:(UITableView *)tableView canMoveRowAtIndexPath:(NSIndexPath *)indexPath
{
    return YES;
}

//Tells the data source to move a row at a specific location in the table view to another location.
- (void)tableView:(UITableView *)tableView moveRowAtIndexPath:(NSIndexPath *)fromIndexPath toIndexPath:(NSIndexPath *)toIndexPath
{
    NSUInteger fromRow = [fromIndexPath row];
    NSUInteger toRow = [toIndexPath row];

    id object = [[dictList objectAtIndex:fromRow] retain];
    [dictList removeObjectAtIndex:fromRow];
    [dictList insertObject:object atIndex:toRow];
    [object release];
}

@end 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-07T16:17:56.103

尝试调用它`viewDidAppear:`而不是`viewWillAppear:`.

# iphone - 如何将表格视图页脚颜色设置为与导航相同？

> ID：10056044
> 
> 赞同：0
> 
> 时间：2012-04-07T16:10:59.230
> 
> 标签：iphone, objective-c, ios, xcode

我试过这个：

```
- (UIView *)tableView:(UITableView *)tableView viewForFooterInSection:(NSInteger)section
{
    CGRect footerFrame = CGRectMake(0.0, self.tableView.bounds.size.height - kCustomRowHeight, self.tableView.bounds.size.width, kCustomRowHeight);
    UIView *footerView = [[UIView alloc] initWithFrame:footerFrame];
    footerView.backgroundColor = self.navigationController.navigationBar.backgroundColor;
    return footerView;
} 
```

但这会使页脚视图不可见。

但这有效：

```
- (UIView *)tableView:(UITableView *)tableView viewForFooterInSection:(NSInteger)section
{
    CGRect footerFrame = CGRectMake(0.0, self.tableView.bounds.size.height - kCustomRowHeight, self.tableView.bounds.size.width, kCustomRowHeight);
    UIView *footerView = [[UIView alloc] initWithFrame:footerFrame];
    footerView.backgroundColor = [UIColor redColor];
    return footerView;
} 
```

那么如何使页脚与导航栏具有相同的背景颜色呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-07T16:22:34.423

为什么您尝试阅读 navigationController 属性真的很痛苦，我不明白为什么它`footerView`是不可见的。不过，对于您当前的问题...为什么不尝试通过设置自己的 RGB`alpha`值来复制颜色？

# javascript - 如何在表格中删除或添加 2 行

> ID：10056046
> 
> 赞同：0
> 
> 时间：2012-04-07T16:11:11.033
> 
> 标签：javascript, jquery, html-table

当我单击右侧的篮子图标时，我也想删除当前`<tr>`和黄色。`<tr>`

这是一个屏幕截图：

![在此处输入图像描述](../Images/8f8d85ed217d3198b54dffee365c92a2.png)

这是我想通过单击删除的两行的 html 代码：

```
<tr>
              <td class="bar_td" colspan=7>
                <strong>PRESTATION 2</strong>
              </td>
            </tr>
            <tr class="ligne_suppr">
              <td class="jr_td">
                <img class="jour_prest" src="img/ico/jour_presta.png" alt="" width="16" height="16" /> Mardi 24 jan 2011
                <p>ou</p>
                <img class="jour_prest" src="img/ico/jour_presta.png" alt="" width="16" height="16" /> Mercredi 25 jan 2011
              </td>
              <td class="cr_td">
                <select>
                  <option value="h9">10h30</option>
                  <option value="h10">11h30</option>
                </select>
                <select>
                  <option value="h11">10h30</option>
                  <option value="h12">11h30</option>
                </select>
              </td>
              <td class="rp_td">
                <select>
                  <option value="h13" SELECTED>2h00</option>
                  <option value="h14">3h00</option>
                </select>
              </td>
              <td class="mn_td">
                <select>
                  <option value="h15">2h00</option>
                  <option value="h16" SELECTED>6h00</option>
                </select>
              </td>
              <td class="tt_td">
                <strong>8h.</strong>
              </td>
              <td class="pttc_td">
                <strong>148 &#8364;</strong>
              </td>
              <td class="cor_td">
                <a href="#">
                  <img src="img/ico/corbeille.png" alt="" width="13" height="13" />
                </a>
              </td>
            </tr> 
```

和 Javascript 代码：

```
<script>
          $(".ligne_suppr a").click(function(e) {
            e.preventDefault();
            ($(this).parent()).parent().remove();
          })
        </script> 
```

但是使用此代码，我只能删除大`<tr>`的和黄色的 One。

你有什么想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-07T16:29:13.623

当您没有选择两行的特定方法时，这基本上很难做到。

创建一个全局 javascript 函数以通过获取元素的 id 来删除元素

```
function deleteRows(row, yellow) {
    row = document.getElementById(row);    
    row.parentNode.removeChild(row);

    yellow = document.getElementById(yellow);
    yellow.parentNode.removeChild(yellow);
} 
```

使用 jQuery 你可以做这样的事情

```
$(".ligne_suppr a").click(function(e) {
    e.preventDefault();
    var toprow = $(this).closest("tr");
    toprow.prev().remove(); // remove the yellow
    toprow.remove(); // remove the row
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-07T16:21:50.670

```
$('.ligne_suppr a').click(function(e) {
  e.preventDefault();
  var parent = $(this).parent().parent();  // parent <tr> of the anchor tag
  var previous = parent.prev();        // <tr> before the parent <tr>

  parent.remove();
  previous.remove();
}); 
```

# opengl - OpenGL 中使用 Stencil Buffer 的门户 - 如何避免在门户前面绘制东西？

> ID：10056047
> 
> 赞同：4
> 
> 时间：2012-04-07T16:11:13.807
> 
> 标签：opengl, portal, stencil-buffer

我正在尝试通过模板缓冲区使用 OpenGL 来实现门户。该技术对我来说似乎很简单：将门户渲染到模板缓冲区，渲染从目标门户后面的虚拟相机观看的场景（仅限于模板缓冲区），将门户渲染到深度缓冲区，渲染正常视图。

但是，当我这样做时，虚拟相机和目标门户之间的对象将被绘制在门户前面，从而导致图像错误（因为我只想绘制可以通过门户看到的对象 -那些在门户“后面”的）。如果我直视门户，我可以简单地使用近剪裁平面，但对于似乎不起作用的任意视图。

为了更好地解释，这是我的问题的图：

[![传送门问题绘图](../Images/29598ea1f0aa07c99bac9062c7fc95a3.png)](https://i.stack.imgur.com/oysSZ.png)
[（来源：[42prozent.de](http://www.42prozent.de/ss/portalproblem.png)）]

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-07T17:09:13.847

也许[`glClipPlane`](http://www.opengl.org/sdk/docs/man/xhtml/glClipPlane.xml)是你想要的？或者你可以看看[Oblique Near Plane Clipping](http://www.terathon.com/code/oblique.html)，尝试做一些时髦的投影数学，将你的近平面修改为门户的近平面。

# android - 如何在日历对象中设置选择时间？

> ID：10056048
> 
> 赞同：1
> 
> 时间：2012-04-07T16:11:17.210
> 
> 标签：android, service, calendar, alarmmanager

对不起，如果这个问题有点误导。

我之前问了另一个问题，在它的帮助下我走到了这一步。这是问题所在。

我应该在特定时间启动服务。现在...如果我使用日历对象中的当前时间立即启动服务，服务就会启动，但是当我手动设置时间时，服务不会启动。这是代码：

```
 Calendar myCal = Calendar.getInstance();
    myCal.set(Calendar.HOUR_OF_DAY, 21);
    myCal.set(Calendar.MINUTE, 4);

    // Will use putExtras here to give service the details of which profile to activate
    Intent intent = new Intent(Create.this, AutoBot.class);
    PendingIntent pintent = PendingIntent.getService(Create.this, 0, intent, 0);
    AlarmManager alarm = (AlarmManager)getSystemService(Context.ALARM_SERVICE);
    alarm.setRepeating(AlarmManager.RTC_WAKEUP, myCal.getTimeInMillis(), 5*1000, pintent); 
```

现在这在技术上应该可行，但事实并非如此。这就是为什么我需要你的帮助:(

另外，如果我有多个触发器（警报本身），那么 setRepeating 的第三个参数是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-07T16:21:32.063

我认为您还需要设置日月和年。以毫秒为单位的日期是 1970 年 1 月 1 日

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-07T20:35:09.263

我认为此链接可能会回答您的问题。它解释了系统中存在一个限制，即警报管理器持有的唤醒锁在交付给服务时会过早释放。请参阅此讨论：[http ://groups.google.com/group/android-developers/browse_thread/thread/2b98206d18a0192f/](http://groups.google.com/group/android-developers/browse_thread/thread/2b98206d18a0192f/)

希望这可以帮助。

# android - Android中的Sqlite文件在哪里

> ID：10056052
> 
> 赞同：1
> 
> 时间：2012-04-07T16:11:56.413
> 
> 标签：android, sqlite, cordova

我使用 PhoneGap 创建了一个 Sqlite 数据库并访问它来读取数据。所以我想找出 Sqlite 文件在我的 android 设备中的位置。请让我看看

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-07T16:33:59.330

如果您使用phonegap，那么您的数据库将位于位置

```
/data/data/package-name/app_database/file__0/0000000000000001.db 
```

您所有的表格都将存储在那里....

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-07T16:13:39.327

如果你的包裹是`com.exampl.hello`那么

```
/data/data/com.example.hello/databases/databasefile 
```

`databasefile`您的数据库的名称在哪里。

# flash - 从 Flash CS4 项目升级到 Flash CS5 的正确方法是什么？

> ID：10056054
> 
> 赞同：0
> 
> 时间：2012-04-07T16:12:12.873
> 
> 标签：flash, flash-cs5, flash-cs4

我想知道是否有从 Flash CS4 升级到 CS5 的正确方法。我所做的只是在 CS5 中打开现有的 CS4 项目并将其保存为 CS5。它似乎有效，但我想知道：我在过渡中错过了什么吗？我是否需要对项目进行额外的修改才能在 CS5 中更好地工作？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-07T16:19:45.063

答案显然是：NO。你不需要做任何事情。

# jquery - 获取上传文件数

> ID：10056062
> 
> 赞同：1
> 
> 时间：2012-04-07T16:13:02.763
> 
> 标签：jquery, file, count, uploader

我从[这里](https://github.com/blueimp/jQuery-File-Upload)使用 jquery 上传器，我想知道如何获取已添加但未上传的文件总数。

新版本没有具体的文档，所以谁能告诉我我该怎么做？

因为我需要这样“ `uploading 1 of n files`”

在[文档](https://github.com/blueimp/jQuery-File-Upload/wiki/Options)中说：

```
$('#fileupload').bind('fileuploadadded', function (e, data) {
  //Here I need to get the upload count.
 }); 
```

如果我如下所示，它会给我计数为 1

```
var totalfiles = data.files.length; 
alert(totalfiles); 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-04-07T16:24:35.653

在文档之后，有一个名为“fileuploadadd”的事件，每次将文件添加到队列时都会触发该事件，因此您可以创建一个计数器并在调用事件时将其递增。

```
var filestoupload =0;     
$('#fileupload').bind('fileuploadadd', function (e, data) {
      filestoupload++;
     }); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-10-23T05:50:12.853

上传前获取上传文件数。

```
 $('#fileupload').fileupload({
        ...
        change: function (e, data) {
            var idx=0;
            $.each(data.files, function (index, file) {
                idx++;
            });
            alert(idx);
        }
        ...
   }); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-02-06T07:27:12.013

我使用这种方式来计算fileupload jquery中上传的文件和文件总数

```
var uploadedFileCount = 0;
var totalFileCount = 0;
$("#fileupload").fileupload({
   dataType: 'json',
   url: url,
   autoUpload: true,
   done: function (e, data) {
        //Some code
        uploadedFileCount = uploadedFileCount + 1;
      $("#UploadCount").html(uploadedFileCount + " of" + totalFileCount);
    }
  }).on('fileuploadadd', function (e, data) {
        totalFileCount = totalFileCount + 1;
    }); 
```

# sql - 使用 UNION 时如何返回源表名？

> ID：10056063
> 
> 赞同：2
> 
> 时间：2012-04-07T16:13:05.837
> 
> 标签：sql

如果我使用 UNION 从 5 个表中选择列，然后从结果中选择一个特定值，我如何确定该值来自哪个表？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-04-07T16:16:25.497

在您要提取的其他列的列中提供表名称：

```
SELECT
  'table1' AS tablename,
  *other columns*
FROM table1

UNION ALL

SELECT
  'table2' AS tablename,
  *other columns*
FROM table2

UNION ALL

… 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-04-07T16:14:43.010

在结果列表中添加一列，说明数据来自哪个表。例如：

```
select 'table1' tableName,
       columnA,
       columnB
from table1
union
select 'table2' tableName,
       columnC,
       columnD 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-27T13:37:07.780

```
SELECT columnA, columnB, 'Table 1' FROM table1
UNION ALL
SELECT columnA, columnB, 'Table 2' FROM table2 
```

这将添加一列，显示数据来自哪个表。至少在甲骨文中工作......

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-07-20T12:20:03.513

```
select col 1, col 2, 'users' as table_name from users
union all
select col 1, col 2, 'vendors' as table_name from vendors; 
```

'table_name' 将包含源名称。

希望这有效

# c++ - for 循环没有正确执行？

> ID：10056065
> 
> 赞同：2
> 
> 时间：2012-04-07T16:13:21.440
> 
> 标签：c++

好的，我有这个任务，我必须提示用户输入关于 5 个不同篮球运动员的数据。我的问题提示在 for 循环中，循环第一次执行第一个玩家很好，但是当需要输入第二个玩家信息时，前两个问题提示一起在同一行，我已经摆弄了这个，只是无法弄清楚，我确定这是我显然缺少的一些小东西，感谢您提供有关如何解决此问题的任何建议。

这是输出：

```
Enter the name, number, and points scored for each of the 5 players.
Enter the name of player # 1: Michael Jordan
Enter the number of player # 1: 23
Enter points scored for player # 1: 64
Enter the name of player # 2: Enter the number of player # 2: <------- * questions 1 and 2 * 
```

这是我的代码：

```
#include <iostream>
#include <string>
#include <iomanip>
using namespace std;

//struct of Basketball Player info
struct BasketballPlayerInfo
{
    string name; //player name

    int playerNum, //player number
        pointsScored; //points scored

};

int main()
{
    int index; //loop count
    const int numPlayers = 5; //nuymber of players
    BasketballPlayerInfo players[numPlayers]; //Array of players

    //ask user for Basketball Player Info
    cout << "Enter the name, number, and points scored for each of the 5 players.\n";

    for (index = 0; index < numPlayers; index++)
    {
        //collect player name
        cout << "Enter the name of player # " << (index + 1);
        cout << ": ";
        getline(cin, players[index].name);

        //collect players number
        cout << "Enter the number of player # " << (index + 1);
        cout << ": ";
        cin >> players[index].playerNum;

        //collect points scored
        cout << "Enter points scored for player # " << (index + 1);
        cout << ": ";
        cin >> players[index].pointsScored;
    }

 system("pause");
return 0;

} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-07T16:17:58.100

在您读取一个数字（例如，`int`）后，输入缓冲区中仍有一个您尚未读取的换行符。当您读取另一个数字时，它会跳过任何空白（包括换行以查找数字。但是，当您读取*string*时，输入缓冲区中的换行被读取为空字符串。

为了使其工作，您需要在尝试读取字符串之前从输入缓冲区中取出换行符。

# ruby - 红宝石中的时间操纵

> ID：10056066
> 
> 赞同：31
> 
> 时间：2012-04-07T16:13:26.787
> 
> 标签：ruby, time

我想创建一个位于未来 20 分 10 秒的 DateTime 实例。我在 irb 中尝试了 Time 和 DateTime ，但似乎找不到真正有意义的方法。我只能向 DateTime 对象添加天数，并且只能向 Time 对象添加秒数。

没有比总是将我想添加的时间转换为秒更好的方法吗？

* * *

## 回答 #1

> 赞同：64
> 
> 时间：2012-04-07T16:27:22.217

A`Time`是一个纪元以来的秒数，而 a`DateTime`是一个纪元以来的天数，这就是为什么添加`1`到 a`DateTime`会增加一整天。但是，您可以添加一天中的部分时间，例如

```
d = DateTime.now
d + Rational(10, 86400) 
```

将增加 10 秒`d`（因为一天有 86400 秒）。

如果您使用的是 Rails，Active Support 会添加一些辅助方法，您可以这样做

```
d + 20.minutes + 10.seconds 
```

哪个会做正确的事情`d`是 a`DateTime`或 a `Time`。您可以单独使用 Active Support，而现在您可以只获取您需要的部分。我似乎记得这东西在`activesupport/duration`. 我相信还有一些其他的宝石也可以在时间处理方面提供帮助。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-04-07T16:27:53.803

假设您需要 Active Support 或者您正在从事 Rails 项目。在 Ruby 中执行此操作的一种非常简单且易读的方法是：

```
DateTime + 5.minutes
Time + 5.minutes 
```

也适用于`seconds`, `hours`, `days`, `weeks`, `months`, `years`.

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2017-07-14T12:02:39.003

只需使用 Active Support Time 扩展。与尝试手动执行此操作相比，它们非常方便且不易出错。您可以只导入您需要的模块：

```
# gem 'activesupport'
require 'active_support/core_ext/numeric/time.rb'
DateTime.now + 20.minutes 
```

* * *

注意：是的，这违背了 StackOverflow 方远离 3rd 方库的路线，但是当它们实际上是标准库时，你不应该避免使用它们，显着降低风险，并提供更好的代码清晰度。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2019-11-22T12:09:29.180

如上所述，您可以添加`seconds`到 Time 对象，因此如果您调用`to_time`DateTime 对象，则可以向其添加秒数：

```
DateTime.strptime("11/19/2019 18:50","%m/%d/%Y %H:%M") + 1 => adds a day

(DateTime.strptime("11/19/2019 18:50","%m/%d/%Y %H:%M").to_time) +1 => adds a second 
```

这不需要添加宝石。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2020-05-24T16:39:06.787

## 纯 Ruby（无 Rails）

```
class Numeric
  def minutes; self/1440.0 end
  alias :minute :minutes

  def seconds; self/86400.0 end
  alias :second :seconds
end 
```

其中 1440 是分钟数，86400 是一天中的秒数。基于 Rails 的做法。

然后你可以让魔法发生：

```
d + 20.minutes + 10.seconds 
```

来源：[https ://github.com/rails/rails/blob/v6.0.3.1/activesupport/lib/active_support/core_ext/numeric/time.rb](https://github.com/rails/rails/blob/v6.0.3.1/activesupport/lib/active_support/core_ext/numeric/time.rb)

# c# - 在wp7上的c#中从dll中提取资源

> ID：10056070
> 
> 赞同：1
> 
> 时间：2012-04-07T16:13:50.857
> 
> 标签：c#, windows-phone-7, resources

我有一个需要从 dll 中提取资源的 WP7 应用程序。我有 DLL 二进制文件和一个标识资源的字符串（“@AppResLib.dll,-100”）

如何从 dll 中提取资源？

# php - var_dump 或 print_r 和 html 编码

> ID：10056074
> 
> 赞同：10
> 
> 时间：2012-04-07T16:14:22.313
> 
> 标签：php, xss, html-entities, var-dump

```
<?php 

$x = array("<b>","<i>","b","i","<h1>hello</h1>");
print_r ($x);
echo "<hr>";
var_dump ($x); 
```

在 html 源代码中输出这个！

```
Array
(
    [0] => <b>
    [1] => <i>
    [2] => b
    [3] => i
    [4] => <h1>hello</h1>
)
<hr>array(5) {
  [0]=>
  string(3) "<b>"
  [1]=>
  string(3) "<i>"
  [2]=>
  string(1) "b"
  [3]=>
  string(1) "i"
  [4]=>
  string(14) "<h1>hello</h1>"
} 
```

显然，我可能会被 XSS 攻击！
如何确保数组值是 htmlencoded？

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2015-03-15T20:30:27.490

虽然这个问题有一个公认的答案，但我认为大卫莫罗的答案是最好的/最简单的/最实用的（使用`print_r` `true`标志）：

```
echo "<pre>".htmlentities(print_r($some_array, true))."</pre>"; 
```

无论如何，这是另一个使用输出缓冲的解决方案：

```
<?php

ob_start();
print_r($some_array);
$buffer = ob_get_clean();
echo "<pre>".htmlentities($buffer)."</pre>";

?> 
```

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2013-04-27T14:20:44.407

我发现knittl的代码不起作用。我必须进行一些小的更改才能使其正常工作，如下所示：

```
array_walk_recursive($inputarray, function(&$v) { $v = htmlspecialchars($v); }); 
```

现在这在 PHP5.3+ 中工作正常

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2015-02-19T18:12:08.543

或者您可以将 print_r 保存为字符串，然后使用设置为 true 的第二个参数对其进行转义。

```
$arr = array('<script>alert("hey");</script>');
$str = print_r($arr, true);
echo htmlentities($str); 
```

**输出：**

```
Array
(
   [0] => <script>alert("hey");</script>
) 
```

脚本未执行

* * *

## 回答 #4

> 赞同：7
> 
> 时间：2012-10-12T07:01:49.653

[这个 PHP 手册注释](http://www.php.net/manual/en/function.var-dump.php#103626)中描述了一个对我有用的函数。

他的替换功能`var_dump`实现为：

```
function htmlvardump()
{
    ob_start(); 
    $var = func_get_args(); 
    call_user_func_array('var_dump', $var); 
    echo htmlentities(ob_get_clean());
 } 
```

这在 PHP 5.3+ 中适用于我。

（请注意，原始来源中有错字）。

* * *

## 回答 #5

> 赞同：5
> 
> 时间：2012-04-07T16:48:42.133

一个简单的解决方案是使用[`array_walk_recursive`](http://php.net/array_walk_recursive)：

```
array_walk_recursive($inputarray, function(&$v) { $v = htmlspecialchars($v); }); 
```

* * *

## 回答 #6

> 赞同：4
> 
> 时间：2015-09-30T14:17:33.823

```
echo <pre>;
echo htmlspecialchars(print_r($key['value'], true));
echo '</pre>'; 
```

我使用此代码从没有 sql 数据库中输出一个数组值（包含 adsense 代码）。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2012-04-07T20:16:51.427

感谢 Knittl，这就是我想出的。按我想要的方式工作！

```
<?php 

$x = array("tag1" => "<b>","tag2" => "<i>","tag3" => "b","tag4" => "i","tag5" => "<h1>hello</h1>");

echo "<hr><pre>";
blp_print_r ($x);
echo "<hr>";
print_r($x);
echo "</pre><hr>"; 

/*

outputs this in the browser normal view

new one... 

Array
(
        ['tag1'] => <b>
        ['tag2'] => <i>
        ['tag3'] => b
        ['tag4'] => i
        ['tag5'] => <h1>hello</h1>
)

traditional one...

Array
(
    [tag1] => 
    [tag2] => 
    [tag3] => b
    [tag4] => i
    [tag5] => 
hello

)

*/

function blp_print_r($inputarray){
    echo "Array\n(\n";
    echo "<blockquote>";
    array_walk($inputarray,"html_encoder");
    echo "</blockquote>";
    echo ")";
}

function html_encoder($current_val,$current_key){

    echo "['" , htmlentities($current_key, ENT_QUOTES, "UTF-8") , "']", " => ";
    echo htmlentities($current_val, ENT_QUOTES, "UTF-8") , "\n";
}

?> 
```

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2014-01-04T07:14:03.543

我发现这个页面很有帮助，但我确实将函数修改为递归，walker 处理函数在回显键后检查值处的数组，然后回调该数组上的原始函数。我认为这使它成为一个真正的'递归 htmlentity 函数，因此有了新名称......

```
function htmlentities_print_r( $inputarray ) {

    echo "<pre>" ;

         array_walk( $inputarray , "html_encoder" ) ;

    echo "</pre>";

}

function html_encoder($current_val,$current_key){

    echo "['" , htmlentities($current_key, ENT_QUOTES, "UTF-8") , "']", " => ";

    if ( is_array( $current_val ) ) {

        blp_print_r( $current_val ) ;

    } else {

        echo htmlentities($current_val, ENT_QUOTES, "UTF-8") , "\n";

    }
} 
```

# android - xml中的Android图形颜色

> ID：10056078
> 
> 赞同：2
> 
> 时间：2012-04-07T16:14:51.813
> 
> 标签：android, xml, colors, android-edittext

在我的应用程序中，我有一些`text.setTextColor(Color.GRAY)`. 现在，我想在我的 xml 文件中为其他颜色不变的字段使用此类中的相同颜色。

我在 xml 文件中找到的所有`@color`内容仅包含条目“black”，并且`@android:color/`还有一些其他奇怪的条目，例如“dark_gray”，但没有简单的“gray”。

如何在我的 xml 文件和代码中获得相同的颜色，而无需创建自己的资源。我相信这必须是可能的，否则会很奇怪。

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-25T15:46:04.880

我一直在寻找同样的东西，所以我根据列出的 Android 帮助文档整理了这个简单的资源文件。

```
<?xml version="1.0" encoding="utf-8"?>
<resources>
    <color name="sysBlack">#FF000000</color>
    <color name="sysBlue">#FF0000FF</color>
    <color name="sysCyan">#FF00FFFF</color>
    <color name="sysDkGray">#FF444444</color>
    <color name="sysGray">#FF888888</color>
    <color name="sysGreen">#FF00FF00</color>
    <color name="sysLtGray">#FFCCCCCC</color>
    <color name="sysMagenta">#FFFF00FF</color>
    <color name="sysRed">#FFFF0000</color>
    <color name="sysTransparent">#00000000</color>
    <color name="sysWhite">#FFFFFFFF</color>
    <color name="sysYellow">#FFFFFF00</color>
</resources> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-07T16:59:06.573

您可以在 XML 文件中使用以下颜色代码

0xff888888 - 灰色。

请参阅此[链接](http://developer.android.com/reference/android/graphics/Color.html)以获取颜色

# asp.net - 如何使用 asp.net 网页从 Plesk10 获取数据

> ID：10056080
> 
> 赞同：0
> 
> 时间：2012-04-07T16:15:05.837
> 
> 标签：asp.net, hosting, plesk, billing, self-hosting

我正在尝试创建一个最终用户友好的网页，该网页可以从 Plesk10 面板访问所需的信息。

我有一个经销商虚拟主机计划。我在托管计划中拥有管理员权限。在我的主机中，我可以创建新用户删除挂起或更新等。我可以为用户创建一个单独的 plesk 面板......

**现在我的问题是：**

我想创建一个从 plesk10 面板获取用户信息的页面，并授予一些执行一些简单任务的权限，例如添加/删除/更改密码/更新自己的电子邮件帐户，获取空间使用信息，创建/更改 ftp 连接名称或密码。和一个账单/发票/和付款细节

如何从 Plesk10 获取此数据并将数据更新到 Plesk10

请给我建议以完成此任务。或给我任何与此问题相关的网络链接。

谢谢

JS

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-07T20:09:39.563

在他们的网站上记录了 Plesk 的 API：http: [//download1.parallels.com/Plesk/PP10/10.1.1/Doc/en-US/online/plesk-api-rpc-guide/index.htm](http://download1.parallels.com/Plesk/PP10/10.1.1/Doc/en-US/online/plesk-api-rpc-guide/index.htm)

他们有 c#、vb.net 和 php 示例。

# android - ActionBarSherlock 动画移动位置

> ID：10056083
> 
> 赞同：4
> 
> 时间：2012-04-07T16:15:11.980
> 
> 标签：android, android-animation, actionbarsherlock

我的 ActionBarSherlock Actionbar 中有一个启动 AsyncTask 的菜单选项。我试图让图标在后台任务运行时进行动画处理。我让它工作了，除了当我点击图标时，图标本身会向右“跳”几个像素，而且非常明显。不完全确定是什么导致了这种情况发生。

这是我到目前为止所拥有的：

```
private MenuItem refreshItem;   

private void DoRefresh() 
{
    final LayoutInflater inflater = (LayoutInflater)activity.getSystemService(Context.LAYOUT_INFLATER_SERVICE);
    final ImageView ivRefresh = (ImageView)inflater.inflate(R.layout.refresh_view, null);

    final Animation rotation = AnimationUtils.loadAnimation(activity, R.anim.refresh);
    ImageView ivRefresh.startAnimation(rotation);

    refreshItem.setActionView(ivRefresh);

    //AsyncTask is kicked off here
}

@Override
public boolean onOptionsItemSelected(final MenuItem item) 
{
    if (item.getItemId() == R.id.refresh) {
        refreshItem = item;
        this.DoRefresh();
        return true;
    } else {
        return super.onOptionsItemSelected(item);
    }
} 
```

refresh_view.xml

```
<?xml version="1.0" encoding="utf-8"?>

<ImageView xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:src="@drawable/refresh"
/> 
```

刷新.xml

```
<rotate
    xmlns:android="http://schemas.android.com/apk/res/android"
    android:fromDegrees="0"
    android:toDegrees="360"
    android:pivotX="50%"
    android:pivotY="50%"
    android:repeatCount="infinite"
    android:interpolator="@android:anim/linear_interpolator"
    android:duration="1100" 
/> 
```

更新：

一直在玩这个，没有运气。它与动画无关，因为如果我禁用动画，图标仍然会跳到右侧。如果我注释掉`setActionView`，图标不会跳转，所以它与此有关。一点头绪都没有，快把我逼疯了。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-01T19:03:55.090

Alex Fu，您的文章非常有帮助，但可以进行一些改进。

每次在 onAnimationEnd 中重新启动动画是低效的。相反，在开始之前将动画重复计数设置为无限，然后当动作完成时，将重复计数设置为 0。动画将结束当前循环，然后调用 onAnimationEnd，您可以在其中调用 setActionView(null)。

我还遇到了 ActionBarSherlock 和本机 ICS ActionBar 的问题（至少在模拟器中，还没有在真实设备上测试过，因为我没有），动画的最后几帧与调用 setActionView(null) 后的静态按钮。我的解决方案是将正在动画的 ImageView 包装在 LinearLayout 中，然后在 LinearLayout 上调用 setVisibility(View.GONE)。如果您为视图设置动画，使用 setVisibility 隐藏它是行不通的，但隐藏它的父级会。

以下是所有相关代码：

layout/actionbar_progress.xml（请注意，我添加了 id，尽管只有 ImageView 需要一个）：

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@+id/actionbar_progress_container"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content" >

    <ImageView xmlns:android="http://schemas.android.com/apk/res/android"
        android:id="@+id/actionbar_progress_image"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:padding="5dp"
        android:src="@drawable/ic_action_refresh"
        style="@style/Widget.Sherlock.ActionButton"
        />
</LinearLayout> 
```

动画/refresh_rotate.xml：

```
<?xml version="1.0" encoding="utf-8"?>
<rotate xmlns:android="http://schemas.android.com/apk/res/android"
    android:fromDegrees="0"
    android:toDegrees="360"
    android:pivotX="50%"
    android:pivotY="50%"    
    android:duration="1000"
    android:interpolator="@android:anim/linear_interpolator"
    android:repeatCount="infinite">

</rotate> 
```

repeatCount 设置为无限，但这不是必需的，因为 java 代码必须将其设置为无限。

在 onCreateOptionsMenu 我有

```
...
menuInflater.inflate(R.menu.main, menu);

mRefreshItem = menu.findItem(R.id.menu_refresh);
... 
```

这只是为了避免每次单击刷新按钮时都执行 findItem 。

在 onOptionsItemSelected 中：

```
@Override
public boolean onOptionsItemSelected(MenuItem item) {
    switch (item.getItemId()) {

    ...

        case R.id.menu_refresh:
            refresh();
            break;

    ...

    }
} 
```

刷新方法只是一个 5 秒延迟的虚拟帖子；它调用 refreshAnim 来启动动画，然后在完成后调用 refreshAnimEnd 来停止动画：

```
private void refresh() {
    refreshAnim();
    getWindow().getDecorView().postDelayed(
        new Runnable() {
            @Override
            public void run() {
                refreshAnimEnd();
            }
        }, 5000);
} 
```

以下是最重要的部分，附有评论：

```
private void refreshAnim() {
    LayoutInflater inflater = (LayoutInflater) this.getSystemService(Context.LAYOUT_INFLATER_SERVICE);
    //The inflated layout and loaded animation are put into members to avoid reloading them every time.
    //For convenience, the ImageView is also extracted into a member
    if (mRefreshIndeterminateProgressView == null || mRefreshRotateClockwise == null) {
        mRefreshIndeterminateProgressView = inflater.inflate(R.layout.actionbar_progress, null);
        mRefreshRotateClockwise = AnimationUtils.loadAnimation(this, R.anim.refresh_rotate);
        mRefreshImage = mRefreshIndeterminateProgressView.findViewById(R.id.actionbar_progress_image);
    }
    //reset some stuff - make the animation infinite again,
    //and make the containing view visible
    mRefreshRotateClockwise.setRepeatCount(Animation.INFINITE);
    mRefreshIndeterminateProgressView.setVisibility(View.VISIBLE);
    mRefreshRotateClockwise.setAnimationListener(new AnimationListener() {
        @Override
        public void onAnimationStart(Animation animation) {}

        @Override
        public void onAnimationRepeat(Animation animation) {}

        @Override
        public void onAnimationEnd(Animation animation) {
            //This is important to avoid the overlapping problem.
            //First hide the animated icon
            //setActionView(null) does NOT hide it!
            //as long as the animation is running, it will be visible
            //hiding an animated view also doesn't work
            //as long as the animation is running
            //but hiding the parent does.
            mRefreshIndeterminateProgressView.setVisibility(View.GONE);
            //make the static button appear again
            mRefreshItem.setActionView(null);
        }
    });
    mRefreshItem.setActionView(mRefreshIndeterminateProgressView);
    //everything is set up, start animating.
    mRefreshImage.startAnimation(mRefreshRotateClockwise);
}

private void refreshAnimEnd() {
    //sanity
    if ( mRefreshImage == null || mRefreshItem == null ) {
        return;
    }
    Animation anim = mRefreshImage.getAnimation();

    //more sanity
    if (anim != null) {
        //let the animation finish nicely
        anim.setRepeatCount(0);
    } else {
        //onAnimationEnd won't run in this case, so restore the static button
        mRefreshItem.setActionView(null);
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-11-05T15:08:51.147

如果您使用的是普通的 ActionBar，只需将其添加到您的**img_layout.xml中：**

```
style="?android:attr/actionButtonStyle" 
```

或者使用 SherLock 操作栏：

```
style="@style/Widget.Sherlock.ActionButton" 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-11T09:21:03.623

我不知道这是否会产生任何影响，但如果您使用这些`pivot`值，您可能会解决这个问题。也许只在一个轴上旋转？

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-04-14T13:33:06.603

如果菜单选项是操作项，则应将样式 Widget.Sherlock.ActionButton 应用于 ImageView 以保持一致性。阅读我写的这篇文章，了解如何正确地为动作项设置动画。[http://alexfu.tumblr.com/post/19414506327/android-dev-animate-action-items](http://alexfu.tumblr.com/post/19414506327/android-dev-animate-action-items)

# macos - Mac OS X 应用程序可以阻止 dlopen 加载库吗？

> ID：10056087
> 
> 赞同：10
> 
> 时间：2012-04-07T16:15:32.623
> 
> 标签：macos, cocoa, dlopen, dyld

经过仔细调试后，我在我的应用程序中发现了一个错误，该错误植根于加载有问题的 Apple 包的系统框架中：

```
/System/Library/CoreServices/MLTEFile.bundle 
```

我确信我没有从该捆绑包的服务中受益，并且怀疑许多应用程序是否受益。事实上，我通过研究 Xcode 本身了解到，捆绑包不能加载到 Xcode 的内存空间中，因为捆绑包不兼容垃圾收集。

所以理想情况下，我也想阻止这个包被加载到我的应用程序中。一种方法是在我自己的应用程序中要求 GC，但我不打算这样做。任何人都可以想出一种方法来规避系统框架调用`dlopen()`这个库的尝试吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-07T16:41:40.910

感谢 Twitter 上的许多有用回复，我能够在这里提供 dyld 的“插入”功能作为潜在的解决方案。搜索“依赖库中的插入函数”：

[https://developer.apple.com/library/mac/#documentation/DeveloperTools/Conceptual/DynamicLibraries/100-Articles/UsingDynamicLibraries.html#//apple_ref/doc/uid/TP40002182-SW10](https://developer.apple.com/library/mac/#documentation/DeveloperTools/Conceptual/DynamicLibraries/100-Articles/UsingDynamicLibraries.html#//apple_ref/doc/uid/TP40002182-SW10)

这里的简短示例：

[http://toves.freeshell.org/interpose/](http://toves.freeshell.org/interpose/)

还有一个用于在此处声明插入的简化宏：

[http://www.opensource.apple.com/source/dyld/dyld-97.1/include/mach-o/dyld-interposing.h](http://www.opensource.apple.com/source/dyld/dyld-97.1/include/mach-o/dyld-interposing.h)

我对这里展示的各种方法感到有些困惑。似乎有一种机制可以在 DYLD 名称表中宣传 _interpose 愿望，以及一种完全（？）不同的机制，它依赖于使用 dlsym(RTLD_NEXT, ...) 链接到原始文件。在 Apple 的可下载示例（来自第一个文档链接）中，他们使用 dlsym 技术，但我不清楚这是否隐含地导致了插入的发生。

# java - JPA 不坚持孩子

> ID：10056090
> 
> 赞同：1
> 
> 时间：2012-04-07T16:15:39.433
> 
> 标签：java, database, jpa

以下场景：

我有

用户对象：

```
...
@Column(name = "TITLE")
private String title;
@NotNull
@NotEmpty
@Column(name = "STREET_ADRESS")
private String streetAdress;
@NotNull
@NotEmpty
@Column(name = "CITY")
private String city; 
```

...

```
@OneToMany(fetch = FetchType.EAGER)
@NotNull
@NotEmpty
protected Set<Role> roles = new HashSet<Role>();

    Role roleDaoById = roleService.getRoleByName(RoleName.User.toString());
    Set<Role> roles = new HashSet<Role>();
    roles.add(roleDaoById);
    member.setRoles(roles);
    member.setSuspend(false);
    member.setPlayer(true);
memberService.addMember(member); 
```

我的问题是角色已经在数据库中可用。这就是我通过 roleService 加载它们的原因。我调用 memberService.addMember，这用 em.persist(member) 调用我的 dao。但是这个调用确实再次保存了角色，并且我得到了角色对象的重复键错误。我只想保存成员，然后为角色创建连接表条目。

我能做些什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-07T21:03:40.373

您的关系用户 - 角色是多对多（一个用户具有多个角色，多个用户可以具有相同的角色），但是您使用一对多对其进行了注释。

# wpf - 列表框中的嵌套数据网格

> ID：10056091
> 
> 赞同：1
> 
> 时间：2012-04-07T16:15:41.040
> 
> 标签：wpf, xaml, binding, datagrid, listbox

我有一个嵌套在 ListBox 的 ItemTemplate 内的数据网格。我正在尝试使用它来显示类似树的数据结构。我的课程如下。

我的数据上下文中的对象包含一个`List<Section>`命名的`Sections`，我的 ListBox 绑定到这个。每个都`Section`包含一个`List<Item>`命名`Items`的，每个 ItemTemplate 中的 DataGrid 都绑定到这个。

当我运行应用程序时，我在绑定的行从 XAML 中获得了一个空引用异常。有没有更好/替代的方法来做到这一点，或者我错过了绑定的技巧？

```
<Window.Resources>
    <CollectionViewSource x:Key="SectionSource" /><!-- this is initialized and filled with an ObservableCollection<Section> Sections when the window loads-->
</Window.Resources>

<ListBox x:Name="lstIngredients" ItemsSource="{Binding Source={StaticResource SectionSource}}">
    <ListBox.ItemTemplate>
        <DataTemplate>
            <DataTemplate.Resources>
                <CollectionViewSource x:Key="itemsSource" Source="{Binding Items}"/>
            </DataTemplate.Resources>

<DataGrid x:Name="dgItems" IsReadOnly="false" AutoGenerateColumns="False" SelectionMode="Single" SelectionUnit="FullRow" IsSynchronizedWithCurrentItem="True" 
    DataContext="{Binding}"
    ItemsSource="{Binding Source={StaticResource Items}}"
    EnableRowVirtualization="false" 
    VirtualizingStackPanel.VirtualizationMode="Standard"
        <DataGrid.Columns>
<DataGridTemplateColumn Width="2*" Header="{lex:LocText ChickenPing.Shared:Strings:Measurement}">
            <DataGridTemplateColumn.CellTemplate>
                <DataTemplate>
                    <TextBlock x:Name="quantity" Text="{Binding Measurement}" TextTrimming="CharacterEllipsis" TextAlignment="Left"/>
                    <!-- Null reference on this line caused by the binding. If I set this to any DependencyProperty on an Item object, I get a null reference-->
                </DataTemplate> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-10T08:16:39.310

我最终将其归结为在其中一个 TemplateColumns 中设置的事件。将事件从

`<TextBlock x:Name="quantity" Text="{Binding Measurement}" GotFocus="txt_GotFocus" />`

至

```
<Style x:Key="FocusableTextbox" TargetType="{x:Type TextBox}"> 
    <EventSetter Event="GotFocus" Handler="txt_GotFocus" /> 
</Style>
...
<TextBlock x:Name="quantity" Text="{Binding Measurement}" Style={StaticResource FocusableTextbox} /> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-07T17:48:28.900

这需要是路径

```
 ItemsSource="{Binding Source={StaticResource Items}}"

 ItemsSource="{Binding Path=PropertyThatIsCollection}" 
```

并删除 DataContext 行

# c++ - “未在此范围内声明”错误

> ID：10056093
> 
> 赞同：36
> 
> 时间：2012-04-07T16:15:51.790
> 
> 标签：c++

[所以我正在编写这个简单的程序来使用此处](http://en.wikipedia.org/wiki/Determination_of_the_day_of_the_week#Gaussian_algorithm)找到的高斯算法计算任何日期的日期。

```
#include <iostream>
using namespace std;

//Using the Gaussian algorithm
int dayofweek(int date, int month, int year ){
    int d=date;
    if (month==1||month==2)
        {int y=((year-1)%100);int c=(year-1)/100;}
    else
        {int y=year%100;int c=year/100;}
    int m=(month+9)%12+1;
    int product=(d+(2.6*m-0.2)+y+y/4+c/4-2*c);
    return product%7;
}

int main(){
    cout<<dayofweek(19,1,2054);
    return 0;
} 
```

这是一个非常简单的程序，更令人费解的是输出。

```
:In function  dayofweek(int, int, int)’:
:19: warning:  unused variable ‘y’
:19: warning: unused variable ‘c’
:21: warning: unused variable ‘y’
:21: warning: unused variable ‘c’
:23: error: ‘y’ was not declared in this scope
:25: error: ‘c’ was not declared in this scope 
```

它说我的变量未使用，但又说它没有声明？谁能告诉我怎么了。

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2012-04-07T16:21:39.723

变量的范围始终是它所在的块。例如，如果您执行类似的操作

```
if(...)
{
     int y = 5; //y is created
} //y leaves scope, since the block ends.
else
{
     int y = 8; //y is created
} //y leaves scope, since the block ends.

cout << y << endl; //Gives error since y is not defined. 
```

解决方案是在 if 块之外定义 y

```
int y; //y is created

if(...)
{
     y = 5;
} 
else
{
     y = 8;
} 

cout << y << endl; //Ok 
```

在您的程序中，您必须将 y 和 c 的定义从 if 块移到更高的范围内。您的函数将如下所示：

```
//Using the Gaussian algorithm
int dayofweek(int date, int month, int year )
{
    int y, c;
    int d=date;

    if (month==1||month==2)
    {
         y=((year-1)%100);
         c=(year-1)/100;
    }
    else
    {
         y=year%100;
         c=year/100;
    }
int m=(month+9)%12+1;
int product=(d+(2.6*m-0.2)+y+y/4+c/4-2*c);
return product%7;
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-07T16:23:42.550

这是基于您的问题的简化示例：

```
if (test) 
{//begin scope 1
    int y = 1; 
}//end scope 1
else 
{//begin scope 2
    int y = 2;//error, y is not in scope
}//end scope 2
int x = y;//error, y is not in scope 
```

在上面的版本中，您有一个被称为`y`范围 1 的变量，以及另一个被称为`y`范围 2 的不同变量。然后您尝试引用一个以`y`. 结尾命名的变量，并且看`if`不到这样的变量`y`因为该范围内不存在这样的变量。

您可以通过放置`y`在包含所有对它的引用的最外层范围内来解决问题：

```
int y;
if (test) 
{
    y = 1; 
}
else 
{
    y = 2;
}
int x = y; 
```

我用简化的代码编写了这个例子，让你更清楚地理解这个问题。您现在应该能够将该原则应用于您的代码。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-07T16:18:05.610

您需要在 if/else 语句的范围之外声明 y 和 c。变量只在它声明的范围内有效（并且范围用 { } 标记）

```
#include <iostream> 
using namespace std; 
//Using the Gaussian algorithm 
int dayofweek(int date, int month, int year ){ 
int d=date; 
int y, c;
if (month==1||month==2) 
        {y=((year-1)%100);c=(year-1)/100;} 
else 
        {y=year%100;c=year/100;} 
int m=(month+9)%12+1; 
int product=(d+(2.6*m-0.2)+y+y/4+c/4-2*c); 
return product%7; 
} 

int main(){ 
cout<<dayofweek(19,1,2054); 
return 0; 
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-07T16:20:34.893

这里

```
{int y=((year-1)%100);int c=(year-1)/100;} 
```

您声明并初始化变量`y, c`，但在它们超出范围之前您根本没有使用它们。这就是你收到`unused`消息的原因。

稍后在函数中，`y, c`未声明，因为您所做的声明仅保留在它们所在的块内（大括号之间的块`{...}`）。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2021-11-23T17:49:39.457

我只是想补充一点，对我来说，错误是由于其中一个文件头保护中的粗心错误造成的。代替：

```
#ifndef MY_AWESOME_HEADER_H
#define MY_AWESOME_HEADER_H
...
#endif // MY_AWESOME_HEADER_H 
```

我有

```
#ifdef MY_AWESOME_HEADER_H
#define MY_AWESOME_HEADER_H
...
#endif // MY_AWESOME_HEADER_H 
```

* * *

## 回答 #6

> 赞同：-3
> 
> 时间：2017-01-08T14:08:43.337

```
#include <iostream>
using namespace std;
class matrix
{
    int a[10][10],b[10][10],c[10][10],x,y,i,j;
    public :
        void degerler();
        void ters();
};
void matrix::degerler()
{
    cout << "Satırları giriniz: "; cin >> x;
    cout << "Sütunları giriniz: "; cin >> y;
    cout << "İlk matris elamanlarını giriniz:\n\n";
    for (i=1; i<=x; i++)
    {
        for (j=1; j<=y; j++)
        {
            cin >> a[i][j];
        }
    }
    cout << "İkinci matris elamanlarını giriniz:\n\n";
    for (i=1; i<=x; i++)
    {
        for (j=1; j<=y; j++)
        {
            cin >> b[i][j];
        }
    }
}

void matrix::ters()
{
    cout << "matrisin tersi\n";
    for (i=1; i<=x; i++)
    {
        for (j=1; j<=y; j++)
        {
    if(i==j)
    {
    b[i][j]=1;
    }
    else
    b[i][j]=0;
    }
}
float d,k;
    for (i=1; i<=x; i++)
    {
    d=a[i][j];
        for (j=1; j<=y; j++)
        {
    a[i][j]=a[i][j]/d;
            b[i][j]=b[i][j]/d;
    }
        for (int h=0; h<x; h++)
        {
            if(h!=i)
    {
       k=a[h][j];
               for (j=1; j<=y; j++)
               {
                    a[h][j]=a[h][j]-(a[i][j]*k);
                    b[h][j]=b[h][j]-(b[i][j]*k);
               }
    }
    count << a[i][j] << "";
    }
    count << endl;
}  
}
int main()
{
    int secim;
    char ch;    
    matrix m;
    m.degerler();
    do
     {
    cout << "seçiminizi giriniz\n";
    cout << " 1\. matrisin tersi\n";
    cin >> secim;
    switch (secim)
    {
        case 1:
            m.ters();
            break;
    }
    cout << "\nBaşka bir şey yap/n?";
    cin >> ch;
    }
    while (ch!= 'n');
    cout << "\n";
    return 0;
} 
```

# java - 在 enum / switch 语句中使用保留字，最好的解决方法？

> ID：10056094
> 
> 赞同：1
> 
> 时间：2012-04-07T16:15:56.633
> 
> 标签：java

我正在编写一个使用扫描仪读取令牌/值对的平面文件解析器。正在读取的文件包含令牌“类”。令牌稍后在 switch 语句中使用，并使用（Java 7 之前的）valueOf(token) Java 习惯用法来生成枚举值。（我使用 Java6 是为了与 GWT 兼容。）作为一种解决方法，我在枚举中使用大写值和 valueOf(token.toUpperCase())。

```
public enum ParseTags {
    CODE, CLASS, INSTRUCTOR, HOURS;
}

// . . . 

token = scanner.next();
value = scanner.next();

switch (ParseTags.valueOf(token.toUpperCase())) {
case CODE:
    entry.setCode(value);
    break;
case CLASS:
    entry.setClass(value);
    break; 
```

因为这是被编译成 javascript，所以我想避免每次迭代时额外的“toUpperCase()”操作；不确定目标平台上的性能。有没有更优雅的方式来表示枚举中的保留字？这可以通过 Java7 的 String 开关很好地处理，但同样，我仅限于 Java6sdk。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-07T16:17:04.780

您现在正在做的事情是首选的方式。`toUpperCase`如果这是一个瓶颈，我会感到非常震惊。

也就是说，我可能会考虑类似

```
enum ParseTags {
  CODE {
    public void set(Entry entry, String value) { 
      entry.setCode(value);
    }
  },
  ...;
  public abstract void set(Entry entry, String value);
} 
```

所以你可以做

```
ParseTags.valueOf(token.toUpperCase()).set(entry, value); 
```

# java - 从定义 SOAP 消息的 XSD 生成 Java 源

> ID：10056096
> 
> 赞同：0
> 
> 时间：2012-04-07T16:16:06.877
> 
> 标签：java, soap, xsd

我有一个定义远程设备的 SOAP 消息的 XSD。我想使用这个 XSD 并从中生成 Java 源代码来创建这些消息。XSD 中的一条消息的示例如下：

```
<xs:element name="get-ethernet-stats">
    <xs:annotation>
        <xs:documentation>Ethernet stats information</xs:documentation>
    </xs:annotation>
    <xs:complexType>
        <xs:sequence>
            <xs:element name="mode" type="response-mode"/>
        </xs:sequence>
    </xs:complexType>
</xs:element>
<xs:element name="get-ethernet-stats-resp">
    <xs:complexType>
        <xs:annotation>
            <xs:documentation>Ethernet Stats</xs:documentation>
        </xs:annotation>
        <xs:sequence>
            <xs:element ref="status"/>
            <xs:element name="result" minOccurs="0">
                <xs:complexType>
                    <xs:sequence>
                        <xs:element name="rx" type="xs:int"/>
                        <xs:element name="tx" type="xs:int"/>
                        <xs:element name="drops" type="xs:int"/>
                    </xs:sequence>
                </xs:complexType>
            </xs:element>
        </xs:sequence>
    </xs:complexType>
</xs:element> 
```

关于如何做到这一点的任何建议？我查看了 JAXB，但没有原始源文件，当我运行“xjc file.xsd”来获取源文件时，这里是输出的一部分：

```
parsing a schema...
compiling a schema...
[ERROR] A class/interface with the same name "file.MemosReceipt" is already in use. Use a class customization to resolve this conflict.
  line 7669 of file:/Users/rwb7041/Documents/file/xsd/file.xsd.xsd

[ERROR] (Relevant to above error) another "MemosReceipt" is generated from here.
  line 8242 of file:/Users/rwb7041/Documents/file/xsd/file.xsd.xsd

[ERROR] A class/interface with the same name "file.InstructionsReceipt" is already in use. Use a class customization to resolve this conflict.
  line 7720 of file:/Users/rwb7041/Documents/file/xsd/file.xsd.xsd

[ERROR] (Relevant to above error) another "InstructionsReceipt" is generated from here.
  line 8341 of file:/Users/rwb7041/Documents/file/xsd/file.xsd.xsd

[ERROR] Two declarations cause a collision in the ObjectFactory class.
  line 7686 of file:/Users/rwb7041/Documents/file/xsd/file.xsd.xsd

[ERROR] (Related to above error) This is the other declaration.   
  line 8267 of file:/Users/rwb7041/Documents/file/xsd/file.xsd.xsd

[ERROR] Two declarations cause a collision in the ObjectFactory class.
  line 8626 of file:/Users/rwb7041/Documents/file/xsd/file.xsd.xsd

[ERROR] (Related to above error) This is the other declaration.   
  line 6114 of file:/Users/rwb7041/Documents/file/xsd/file.xsd.xsd

Failed to produce code. 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-07T16:45:38.990

我建议你看看[jaxws-rt-2.1.4.jar](http://mirrors.ibiblio.org/pub/mirrors/maven2/com/sun/xml/ws/jaxws-rt/2.1.4/jaxws-rt-2.1.4.jar)。这允许两种方式提供要在 SOAP 消息中发送的 XML：
(1) 仅提供正文内容；代码负责根据检索到的 wsdl 添加 Envelope/Header/Body 和命名空间
(2) 提供完整的 Envelope 和命名空间

那时不需要代码生成。

参见例如 [jaxws-guide.html](http://axis.apache.org/axis2/java/core/docs/jaxws-guide.html)

# php - Facebook Batch API 洞察请求

> ID：10056097
> 
> 赞同：7
> 
> 时间：2012-04-07T16:16:06.977
> 
> 标签：php, javascript, ajax, facebook, facebook-graph-api

对于一个项目，我必须在很长一段时间（例如 1-2 年）的 facebook 上获取页面的见解。

我首先尝试做一个请求，但结果证明只请求

```
/PAGE_ID/insights?since=xxx&until=xxx 
```

不会返回我想要的所有数据（它以某种方式抑制数据，好像答案的大小有一些限制）。

然后我尝试拆分日期范围（例如 01.04.2011-01.04.2011 -> 01.04.2011-01.08.2011-01.12.2011-01.04.2011），这也没有像我想要的那样工作.

我的下一个方法是仅请求我需要的洞察力值，例如“page_stories、page_impressions、...”。请求看起来像这样

```
/PAGE_ID/insights/page_impressions/day?since=xxx&until=xxx 
```

这实际上有效，但不适用于 ajax。它有时似乎放弃了一些请求（特别是如果我更改了谷歌浏览器中的浏览器选项卡），我需要确保所有请求都返回答案。考虑到一个请求至少需要 2 秒并且日期范围为 2 年，同步解决方案将花费太多时间，我可能有大约 300 个单个请求，这需要太长时间才能完成。

最后，我偶然发现了 facebook 执行批量请求的能力，这正是我所需要的。它可以在一次调用中打包多达 50 个请求，从而显着降低带宽。这就是我卡住的地方。facebook api 提供了一些关于如何使用它的示例，但是当我在 Graph Explorer 中和通过 php facebook api sdk 测试它们时，它们都不起作用。我试图打包这个请求

```
PAGE_ID/insights/page_fan_adds/day?since=1332486000&until=1333695600 
```

进入批处理请求但失败。

似乎api被窃听了。当我使用问号“？”时，它总是给我这个错误 在“relative_url”字段中。

```
{
  "error": {
    "message": "batch parameter must be a JSON array", 
    "type": "GraphBatchException"
  }
} 
```

这是我尝试过的：

这些给出了“必须是 JSON 数组”错误：

```
?batch=[{"method":"GET","relative_url":"/PAGE_ID/insights/page_fan_adds/day?since=1332486000&until=1333695600"}] 
```

这两个实际上返回数据，但它们忽略了参数：

```
?batch=[{"method":"GET","relative_url":"/PAGE_ID/insights/page_fan_adds/day","body":"since=1332486000 until=1333695600"}]
?batch=[{"method":"GET","relative_url":"/PAGE_ID/insights/page_fan_adds/day","body":"since=1332486000,until=1333695600"}]
?batch=[{"method":"GET","relative_url":"/PAGE_ID/insights/page_fan_adds/day","body":{"since":"1332486000","until":"1333695600"}}] 
```

这个告诉我这是一个“不支持的发布请求”：

```
?batch=[{"method":"POST","relative_url":"/PAGE_ID/insights/page_fan_adds/day","body":"since=1332486000 until=1333695600"}] 
```

有人可以帮忙吗？

* * *

## 回答 #1

> 赞同：30
> 
> 时间：2012-04-08T15:14:16.127

我终于找到了解决我的问题的方法。facebook文档中没有提到它，但是对于这个请求

```
?batch=[{"method":"GET","relative_url":"/PAGE_ID/insights/page_fan_adds/day?since=1332486000&until=1333695600"}] 
```

为了正常工作，我们必须使用类似的功能

```
urlencode() 
```

对 json 部分进行编码。这样查询就像一个魅力。一个php示例：

```
$insights = $facebook->api('?batch=['.urlencode('{"method":"GET","relative_url":"/PAGE_ID/insights/page_fan_adds/day?since=1332572400&until=1333782000"}').']'
    ,'post',array('access_token' => $this->facebook->getAccessToken())); 
```

结果是：

```
?batch=[%7B%22method%22%3A%22GET%22%2C%22relative_url%22%3A%22%2FPAGE_ID%2Finsights%2Fpage_fan_adds%2Fday%3Fsince%3D1300086000%26until%3D1307862000%22%7D] 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-11-14T09:30:48.993

这个例子是使用一个`array`ID 来发出一个带有 urlencoding 的批处理请求。

```
$postIds = [
    'XXXXXXXXXXXXXXX_XXXXXXXXXXXXXXX',
    'XXXXXXXXXXXXXXX_XXXXXXXXXXXXXXX',
    'XXXXXXXXXXXXXXX_XXXXXXXXXXXXXXX',
    'XXXXXXXXXXXXXXX_XXXXXXXXXXXXXXX',
    'XXXXXXXXXXXXXXX_XXXXXXXXXXXXXXX',
];

$queries = [];
foreach( $postIds as $postId ) {
    $queries[] = [
        'method'        => 'GET',
        'relative_url'  => '/' . $postId . '/comments?summary=1&filter=stream&order=reverse_chronological',
    ];
}

$requests = $facebook->post( '?batch=' . urlencode( json_encode( $queries ) ) )->getGraphNode(); 
```

# sql - 可变数量的集合作为 SQL 数据库表

> ID：10056099
> 
> 赞同：1
> 
> 时间：2012-04-07T16:16:13.767
> 
> 标签：sql, table-variable

更多关于特定问题的数据库模型的问题。问题如下：

我有许多对象构成了固定表中的行，它们都是不同的（当然）。人们想创建包含可变数量的这些存储对象的集合。这些集合是用户定义的，因此没有硬编码。每组将由一个数字来表征。

我的问题是：有经验的 SQL 程序员能给我什么建议来实现这样的功能。我最直接的方法是使用表变量或临时表为每个这样的集合创建一个表。最后，一个已经存在的表，其中包含集合的名称（作为让用户知道数据库中当前存在哪些集合的一种方式）。

如果效率不高，我会寻找什么方向来解决这个问题？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-07T17:03:17.063

表变量和临时表是短暂的，范围很窄，可能不是您想要使用的。每组一张桌子也不是我会选择的解决方案。

听上去你需要三张桌子。一种用于对象，一种用于集合，一种用于对象与集合之间的关系。

像这样的东西（使用 SQL Server 语法来描述表）。

```
create table [Object]
(
  ObjectID int identity primary key,
  Name varchar(50)
  -- more columns here necessary for your object.
)

go

create table [Set]
(
  SetID int identity primary key,
  Name varchar(50)
)

go

create table [SetObject]
(
  SetID int references [Object](ObjectID),
  ObjectID int references [Set](SetID),
  primary key (SetID, ObjectID)
) 
```

这是 m:m 关系作为一个漂亮的图片： ![在此处输入图像描述](../Images/4fcfecfe22a72df4a13d121d92b8fd23.png)

# java - 共享首选项不起作用

> ID：10056100
> 
> 赞同：0
> 
> 时间：2012-04-07T16:16:15.187
> 
> 标签：java, android, string, sharedpreferences

当用户登录时，我正在为另一个活动保存两个字符串，这样我就可以保存他们的数据以供下次使用（最终用户易于使用）。无论如何，我已经设置了代码并运行它并且字符串没有被传递。为了确保 sharedPreferences 正常工作，我设置了一个 toast，看看它是否与我估算的信息相匹配。

1类：

```
uname = (EditText) findViewById(R.id.txt_username);
        String username = uname.getText().toString();

        pword = (EditText) findViewById(R.id.txt_password);
        String password = pword.getText().toString();

        SharedPreferences settings = getSharedPreferences(PREFS_NAME, 0);
        SharedPreferences.Editor editor = settings.edit();
        editor.putString("key1", username);
        editor.putString("key2", password);
        editor.commit(); 
```

第二类：

```
private void Test() {
        // TODO Auto-generated method stub
        SharedPreferences settings = getSharedPreferences(PREFS_NAME, 0);
        String username = settings.getString("key1", null);
        String password = settings.getString("key2", null);
         if(username.equals("irock97")) {
            Toast.makeText(getApplicationContext(), "yaya", Toast.LENGTH_SHORT).show();
        } else {
            Toast.makeText(getApplicationContext(), "fail", Toast.LENGTH_SHORT).show();
        }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-07T16:19:21.287

代替 ：

```
if(username =="irock97") 
```

采用：

```
if(username.equals("irock97")) 
```

来测试是否`String`相等。与`==`您一起测试对象引用相等性。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-07T16:20:03.423

代替：

```
username == "irock97" 
```

和：

```
username.equals("irock97") 
```

`==`用于检查 2 个字符串引用是否引用了内存中的同一对象。

`equals()`用于检查 2 个字符串引用是否引用相同的对象或 2 个具有相同字符串值的不同对象。

除此之外，您需要检查字符串引用是否不是`null`第一个：

```
if(username != null && username.equals("irock97")) 
```

* * *

**编辑：**

此外，您忘记调用`show()`方法来显示 Toast：

```
Toast.makeText(getApplicationContext(), "yaya", Toast.LENGTH_SHORT).show(); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-07T16:20:07.543

记住：

== 测试引用相等性。

equals 测试值相等。

所以改变

```
if(username =="irock97") 
```

并使用：

```
if(username.equals("irock97")) 
```

**但要注意空值！**

"==" 可以很好地处理空字符串，但是从空字符串调用 ".equals" 会导致异常：

```
String s1 = null;
String s2 = null;

s1 == s2; // ok, it's true
s1.equals(s2); // throws an exception ! 
```

编辑：你需要打电话`show()`

```
Toast.makeText(getApplicationContext(), "yaya", Toast.LENGTH_SHORT).show(); 
```

# time - Jquery FullCalendar 事件时隙悬停方法

> ID：10056107
> 
> 赞同：5
> 
> 时间：2012-04-07T16:16:39.710
> 
> 标签：time, hover, fullcalendar

我已经启动并运行了 FullCalendar，它非常好。我的问题是如何最好地实现时隙悬停功能。如果用户可以在他们悬停的任何给定时间段上获得视觉提示，那将是非常好的。

我找到了以下链接[http://code.google.com/p/fullcalendar/issues/detail?id=269](http://code.google.com/p/fullcalendar/issues/detail?id=269)，它提供了一个在议程单元格行中添加新结构以提供对单个单元格的访问的解决方案。但是，表明此解决方案将导致 FullCalendar 变得迟缓。

在我开始研究 FullCalendar 代码之前，我想我会问其他人是否有任何想法或解决方案。

我对接近这个的想法如下：

1.  将占位符事件添加到每个时间段。用户不会看到这些事件，但这些不可见的事件可用于允许“悬停”标记。我在这里担心的是，添加额外的事件会导致 FullCalander 变得迟缓。此外，拖放功能可能会受到影响。

2.  FullCalender 可以确定用户单击的时间段。是否可以使用获取时间段单击的代码来为悬停突出显示提供参考？

3.  其他？

我正在考虑将选项 2 作为开始的地方。但是，如果有人对可行的解决方案有其他想法，我会很高兴听到。

如果我想出一个解决方案，我会在这里发布。

谢谢，

吉姆

这是 FullCalendar 站点的链接：http://fullcalendar.io/[我](http://fullcalendar.io/)
发现使用它非常好。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2014-11-12T10:05:46.893

下面的代码对我有用。

```
$('.ui-widget-content').hover(function(){
    if(!$(this).html()){    
        for(i=0;i<7;i++){
            $(this).append('<td class="temp_cell" style="border: 0px; width:'+(Number($('.fc-day').width())+2)+'px"></td>');
        }

        $(this).children('td').each(function(){
            $(this).hover(function(){
                $(this).css({'background-color': '#ffef8f', 'cursor': 'pointer'});
            },function(){
                $(this).prop('style').removeProperty( 'background-color' );
            });
        });
    }
},function(){
    $(this).children('.temp_cell').remove();
}); 
```

确保在实例化日历的代码之后添加它，如果 JQuery 日历的 defaultView 属性是“AgendaWeekly”，它应该按原样工作。

干杯，米

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-07T10:48:01.270

我遇到了同样的问题，因为有时很难看到您实际点击的是哪个时间段。为了解决这个问题，我写了一行来改变 fullcalendar.js。不是理想的解决方案，但它是一个快速修复。

这是行：

```
"<input type='hidden' class='timeslot-value' value='" + formatDate(d, opt('axisFormat')) +"'>" + 
```

并将其放置在内部（代码行 3080 附近）：

```
"<th class='fc-agenda-axis " + headerClass + "'>" +
((!slotNormal || !minutes) ? formatDate(d, opt('axisFormat')) : '&nbsp;') +
"</th>" +
"<td class='" + contentClass + "'>" +
"<input type='hidden' class='timeslot-value' value='" + formatDate(d, opt('axisFormat')) +"'>" +
"<div style='position:relative'>&nbsp;</div>" +
"</td>" + 
```

现在，您只需将工具提示悬停在所有具有 .ui-widget-content 类的 fc-slot 上（`<td>`您在上面的代码中看到）。并获取隐藏的输入值以显示在该工具提示中。

如果是 jQuery，您可以使用 live 事件并获取相应的第一个孩子并获取其值。

如果 extJS

```
Ext.onReady(function(){

Ext.QuickTips.init();

var tip = Ext.create('Ext.tip.ToolTip', {
    target: 'your-calendar-id',
    width: 140,
    minHeight: 30,
    delegate: '.ui-widget-content',
    autoHide: false,
    renderTo: Ext.getBody(),
    listeners: {
        beforeshow: function updateTipBody(tip) {
            tip.update('<dl><dt style="font-weight: 600;"><?php echo $this->translate('Start time')?>: </dt><dd>' + Ext.get(this.triggerElement).first().getValue() + '</dd></dl>');
        }
    }
}); 
}); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-12-02T22:16:32.690

我意识到这实际上不是一个答案，而是对先前答案的评论，但我还没有达到评论答案的声誉。

WRT 对@user4243287 的回答我必须采取的一个额外步骤是在初始化我的日历时将此逻辑放在“viewRender”选项中，以确保在几周之间移动时它继续工作。

# python - Python：遍历文件中的url

> ID：10056112
> 
> 赞同：1
> 
> 时间：2012-04-07T16:17:32.503
> 
> 标签：python, loops, rss, feedparser

我正在尝试遍历带有 url 列表的文本文件，并让我的 python 脚本解析文件中的每个 url。

该代码只处理文件中的最后一行，它应该处理每一行并将结果附加到文件中。

我不知道该怎么做，感谢您的帮助。谢谢！

```
import feedparser # pip install feedparser
from BeautifulSoup import BeautifulStoneSoup
from BeautifulSoup import BeautifulSoup
import re

urls = open("c:/a2.txt", "r") # file with rss urls

for lines in urls:

    d = feedparser.parse(lines) # feedparser is supposed to process every url in the file(urls)

statusupdate = d.entries[0].description

soup = BeautifulStoneSoup(statusupdate)

for e in d.entries:
    print(e.title)
    print(e.link)
    print(soup.find("img")["src"])
    print("\n") # 2 newlines

# writes title,link,image to a file and adds some characters
    f = open(r'c:\a.txt', 'a')
    f.writelines('"')
    f.writelines(e.title)
    f.writelines('"')
    f.writelines(",")
    f.writelines('"')
    f.writelines(e.link)
    f.writelines('"')
    f.writelines(",")
    f.writelines('"')
    f.writelines(soup.find("img")["src"])
    f.writelines('"')
    f.writelines(",")
    f.writelines("\n")
f.close() 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-07T16:23:50.663

```
for lines in urls:
    d = feedparser.parse(lines) 
```

这个循环一直在继续，它不断地为变量重新分配一些东西`d`。这意味着，当循环完成时，`d`将具有与最后一行关联的值。

如果您希望处理每一行，则需要对`d`. 例如，您可以将每一个都放在`d.entries[0].description`一个列表中，然后遍历该列表来处理它。

* * *

```
urls = open("c:/a2.txt", "r") # file with rss urls
results = []
for lines in urls:
    results.append(feedparser.parse(lines))
contents = []
for r in results:
    statusupdate = r.entries[0].description
    soup = BeautifulStoneSoup(statusupdate)
    for e in r.entries:
        contents.append((e.title, e.link, soup.find("img")["src"]))
with open(r'c:\a.txt', 'a') as f:
    for c in contents:
        f.writelines('"')
        f.writelines(c[0])
        f.writelines('"')
        f.writelines(",")
        f.writelines('"')
        f.writelines(c[1])
        f.writelines('"')
        f.writelines(",")
        f.writelines('"')
        f.writelines(c[2])
        f.writelines('"')
        f.writelines(",")
        f.writelines("\n") 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-07T16:23:34.327

也许您不应该`feedparser.parse()`每次都将返回的值分配给同一个变量？

至少在您当前的缩进中，这是循环内唯一发生的事情。 `statusupdate = d.entries[0].description`只运行一次并对 的最后一个值进行操作`d`，因为它在循环之外。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-07T16:27:34.717

您的程序中有几个问题

1.  您正在循环输入文件而不处理数据。处理只发生在最后一行。
2.  您正在循环打开输出文件（尽管处于附加模式）。

我的建议是将输出文件的 open 语句保留在循环之外，并且所有语句都应该缩进，以便它在循环中迭代输入文件的部分。

# javascript - 如何计算一类的 div，即一类容器 div 的子级？

> ID：10056113
> 
> 赞同：0
> 
> 时间：2012-04-07T16:17:33.830
> 
> 标签：javascript, jquery, html

我想计算每个容器中 ('.child') 的数量，并在每个容器内附加一个带有计数的句子。

```
<div class='container'>
     <div class='child'></div>
     <div class='child'></div>
     <div class='child'></div>
     <div class='child'></div>
</div>

<div class='container'>
     <div class='child'></div>
     <div class='child'></div>
</div> 
```

你会怎么做？你需要id还是可以只用类来完成？我想找到一种干净的方式来做这件事。非常感谢提前

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-07T16:21:27.417

```
$('.container').each(function(i, obj){
    var children = $(this).find('.child').length;
    $('<p>' + children + ' elements.</p>').appendTo( $(this) );
}); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-07T16:23:15.360

使用 .length 获取其来源的计数

例子...

```
alert($('.container').children().length); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-07T16:30:24.183

这是一个简单的示例，可以处理您要查找的内容

**jQuery**

```
<script>
    $(function(){
        $('.container').each(function(){
            var count=0,child=$(this).find('.child');
            if(child.length>0) {
                count++;
                child.each(function(){
                    $(this).text('This is child number '+count);
                    count++;
                });
            }
        });
    });
</script> 
```

**HTML**

```
<div class="container">
    <div class="child"></div>
    <div class="child"></div>
    <div class="child"></div>
    <div class="child"></div>
</div>
<div class="container">
    <div class="child"></div>
    <div class="child"></div>
</div> 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-07T16:46:09.637

检查这个[小提琴](http://jsfiddle.net/2cK8g/)

你不需要额外的东西给上面的 html 结构

```
 $('.container').each(function(){

    $(this).prepend('<label> No of children:'
                    +$(this).find('div.child').size()
                    +'</label>');
  }); 
```

# wordpress - Disqus 将我之前的 wordpress 评论标记为匿名访客发布的

> ID：10056114
> 
> 赞同：1
> 
> 时间：2012-04-07T16:17:47.040
> 
> 标签：wordpress, comments, disqus

我拥有一个已有 8 年历史的博客，我在其中发布了相当多的博客文章和评论。

昨天，我刚刚安装了 Disqus。它似乎工作得很好：我设法将我的旧评论导出到 Disqus，所以它以应有的方式显示它们......

**...除了它不会将我的旧评论**（我在安装 Disqus 之前发布的评论）识别**为我自己的**：我的旧评论被标记为由匿名访客发布，尽管我的 Wordpress（管理员）用户电子邮件是相同的作为我用于我的 Disqus 个人资料的那个（这很奇怪，因为人们希望 Disqus 能够识别我的评论）。

我可以做些什么来让 Disqus 识别我之前的评论并将它们重新归因于我的 Disqus 个人资料？

谢谢你的帮助 ！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-03-10T16:28:04.887

如果您编辑您的 Disqus 个人资料，则有一个名为“合并”的选项

如果您使用相同的电子邮件地址，它会将您之前的所有 WordPress 评论与您的​​ Disqus 帐户相关联。

# c# - C#双重加法 - 奇怪的行为

> ID：10056117
> 
> 赞同：2
> 
> 时间：2012-04-07T16:17:58.493
> 
> 标签：c#, math, c#-4.0, double, addition

```
public static void Main()
{
    Dictionary<string, double> values = new Dictionary<string, double>();
    values.Add("a", 0.002);
    values.Add("b", 0.003);
    values.Add("c", 0.012);

    // Summing iteratively.
    double v1 = 615.0;
    foreach (KeyValuePair<string, double> kp in values)
    {
        v1 += kp.Value;
    }

    Console.WriteLine(v1);

    // Summing using the Sum method.
    double v2 = 615.0;
    v2 += values.Values.Sum();

    Console.WriteLine(v2);

    Console.ReadLine();
} 
```

当我在调试器中查看 v1 的值时，它给出的值为 615.01699999999994，但对于 v2，它给出的值为 615.017。由于某种原因，Sum 方法会产生准确的结果，而对它们进行迭代求和则不会。（当我打印这两个值时，它们是相同的，但我认为这是由于 WriteLine 方法所做的一些舍入。）

有人知道这里发生了什么吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-07T16:38:32.390

浮点数学本质上不是 100% 准确并且有错误。将不同数字相加的顺序会影响浮点误差的大小。如果这些计算完全准确很重要，您应该使用十进制，而不是双精度。

这与使用 Sum 与手动对数据求和没有任何关系。在第一个中，您将每个数字添加到 615，在第二个中，您将所有数字相互添加，*然后*将它们添加到 615。这是添加相同数据的不同顺序。根据您使用的数字，任何一种方法都可能导致或多或少的错误。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-07T16:51:30.143

double/float 的问题在于它们是二进制数，内部也称为 1000110.10101001，因此仅代表您的值的近似表示。

阅读 Jon Skeet 的解释：[.NET 中十进制、浮点和双精度的区别？](https://stackoverflow.com/questions/618535/what-is-the-difference-between-decimal-float-and-double-in-c/618596#618596)

# c# - 为什么我在类属性上得到这个“无限循环”？

> ID：10056119
> 
> 赞同：3
> 
> 时间：2012-04-07T16:18:01.420
> 
> 标签：c#, .net, properties, stack-overflow

这是我的代码上的属性：

```
public KPage Padre
{
    get
    {
        if (k_oPagina.father != null)
        {
            this.Padre = new KPage((int)k_oPagina.father);
        }
        else
        {
            this.Padre = null;
        }

        return this.Padre;
    }
    set { }
} 
```

但它说：

> App_Code.rhj3qeaw.dll 中出现“System.StackOverflowException”类型的未处理异常

为什么？我该如何解决？

# 编辑

更正代码后，这是我的实际代码：

```
private KPage PadreInterno;
public KPage Padre
{
    get
    {
        if (PadreInterno == null)
        {
            if (paginaDB.father != null)
            {
                PadreInterno = new KPage((int)paginaDB.father);
            }
            else
            {
                PadreInterno= null;
            }
        }

        return PadreInterno;
    }
} 
```

你有什么想法？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-07T16:18:52.077

该属性正在调用自身...通常属性调用基础字段：

```
 public KPage Padre
   {
       get
       {
           if (k_oPagina.father != null)
           {
               _padre = new KPage((int)k_oPagina.father);
           }
           else
           {
               _padre = null;
           }

           return _padre;
       }
       set { }
   }

   private KPage _padre; 
```

您的旧代码递归调用`get`该`Padre`属性，因此出现异常。

如果您的代码只“获取”并且不需要存储该值，您也可以完全摆脱支持字段：

```
 public KPage Padre
   {
       get
       {
           return k_oPagina.father != null
              ? new KPage((int)k_oPagina.father)
              : (KPage)null;
       }
   } 
```

也就是说，我会把它放在一个方法中。

这也是你前几天问的问题：

[发生“System.StackOverflowException”类型的未处理异常](https://stackoverflow.com/questions/10018356/an-unhandled-exception-of-type-system-stackoverflowexception-occurred)

# opencv - opencv直方图

> ID：10056122
> 
> 赞同：1
> 
> 时间：2012-04-07T16:18:19.527
> 
> 标签：opencv

嘿，我试图制作一个显示帧减法的直方图，代码正在运行，但我得到了没有结果的灰色窗口。命令窗口上的消息是：编译器没有对齐堆栈变量。Libavcodec 已被错误编译，可能非常缓慢或崩溃。这不是 libavcodec 中的错误，而是编译器中的错误。您可以尝试使用 gcc >= 4.2 重新编译。不要向 FFmpeg 开发人员报告崩溃。OpenCV 错误：未知函数中的断言失败 (images[j].channels() == 1)，文件 ........\ocv\opencv\src\cv\cvhistogram.cpp，第 137 行

这是有人有想法的代码吗？谢谢您的帮助.....

```
int main()  
{  

    int key = 0; 

     CvCapture* capture = cvCaptureFromAVI( "macroblock.mpg" ); 
     IplImage* frame = cvQueryFrame( capture );
     IplImage* currframe = cvCreateImage(cvGetSize(frame),IPL_DEPTH_8U,3);
     IplImage* destframe = cvCreateImage(cvGetSize(frame),IPL_DEPTH_8U,3);
   IplImage* imgHistogram = 0;
       CvHistogram* hist;

        if ( !capture ) 

    {  
        fprintf( stderr, "Cannot open AVI!\n" );  
        return 1;  
        }

      int fps = ( int )cvGetCaptureProperty( capture, CV_CAP_PROP_FPS );

      cvNamedWindow( "dest", CV_WINDOW_AUTOSIZE );
      cvNamedWindow( "imgHistogram", CV_WINDOW_AUTOSIZE );

      while( key != 'x' )
          {
              frame = cvQueryFrame( capture );
        currframe = cvCloneImage( frame );
         frame = cvQueryFrame( capture );

              cvSub(frame,currframe,destframe);

               int bins = 256;
            int hsize[] = {bins};
            float max_value = 0, min_value = 0;
            float value;
            int normalized;
             float xranges[] = {0, 256};
            float* ranges[] = {xranges};
          IplImage* planes[] = {destframe};

    hist = cvCreateHist(1, hsize, CV_HIST_ARRAY, ranges,1);
    cvCalcHist(planes, hist, 0, NULL);
    cvGetMinMaxHistValue(hist, &min_value, &max_value);
  //  printf("Minimum Histogram Value: %f, Maximum Histogram Value: %f\n", min_value, max_value);
  imgHistogram = cvCreateImage(cvSize(bins, 50),IPL_DEPTH_8U,3);
    cvRectangle(imgHistogram, cvPoint(0,0), cvPoint(256,50), CV_RGB(255,255,255),-1);

      for(int i=0; i < bins; i++){
        value = cvQueryHistValue_1D(hist, i);
        normalized = cvRound(value*50/max_value);
        cvLine(imgHistogram,cvPoint(i,50), cvPoint(i,50-normalized), CV_RGB(0,0,0));

      }

              if(key==27 )break;
              cvShowImage( "dest",destframe);
              cvShowImage( "imgHistogram",imgHistogram);

               key = cvWaitKey( 1000 / 10 );
               }  
           cvDestroyWindow( "dest" );
           cvReleaseCapture( &capture );
           return 0;
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-14T14:12:49.987

由于您试图显示一维直方图，因此直方图平面需要为灰度。因此，您需要`cvSub()`先将生成的图像从转换为灰度。尝试

```
IplImage *gray = NULL;
gray = cvCreateImage(cvGetSize(frame), IPL_DEPTH_8U, 1);

while(key != 'x') {
    ...
    cvSub(frame, currframe, destframe);
    cvCvtColor(destframe, gray, CV_BGR2GRAY);
    ...
    IplImage* planes[] = {gray};
    ..
} 
```

请让我知道这对你有没有用。

# c# - 如果未安装 .Net Framework，则运行安装程序

> ID：10056123
> 
> 赞同：0
> 
> 时间：2012-04-07T16:18:30.400
> 
> 标签：c#, frameworks

我该怎么做这样的事情：当用户启动我的 C# 应用程序时，如果他没有安装 .Net 框架，那么应用程序启动设置？

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-07T16:22:56.490

您不能这样做，因为您的应用程序属于.Net 的功能。你需要做的是建立一个设置。Visual Studio 本身带有一个安装项目，或者您可以使用例如 inno-setup (http://www.jrsoftware.org/isinfo.php)。

编辑：这是一个与 inno-setup 一起使用的有用项目。 [http://www.codeproject.com/Articles/20868/NET-Framework-1-1-2-0-3-5-Installer-for-InnoSetup](http://www.codeproject.com/Articles/20868/NET-Framework-1-1-2-0-3-5-Installer-for-InnoSetup)

# iphone - 将 UILabel 定位在圆圈中

> ID：10056127
> 
> 赞同：0
> 
> 时间：2012-04-07T16:18:56.827
> 
> 标签：iphone, ios, uilabel, drawrect

我想将 UILabel 放置在我的 Circle 的中心，但我似乎无法影响标签的位置。我似乎只能通过改变 CGRect 框架的高度来影响标签的位置。更改其他值根本不会影响位置。

这是我的 Circle.m 代码

```
- (id)initWithFrame:(CGRect)frame radius:(CGFloat)aRadius color:(UIColor*) aColor {
    self = [super initWithFrame:frame];
    if (self) {
        self.opaque = NO;

        [self setRadius:aRadius];
        [self setColor:aColor];
    }
    return self;
}

- (void)drawRect:(CGRect)rect
{

    NSString *string = @"1";
    UIFont* font = [UIFont systemFontOfSize:80];
    UILabel *label = [[UILabel alloc] init];
    label.text = string;
    label.textColor = [UIColor whiteColor];
    label.font = font;

    CGRect frame = label.frame;
    frame = CGRectMake(10, 10, 0, 85);
    label.frame = frame;

    CGContextRef contextRef = UIGraphicsGetCurrentContext();
    [color setFill];
    circle = CGRectMake(0, 0, radius, radius);

    CGContextAddEllipseInRect(contextRef, circle);
    CGContextDrawPath (contextRef, kCGPathFill);
    [label drawRect:circle];

} 
```

和我的 viewController.m

```
- (void)viewDidLoad
{
    [super viewDidLoad];
    CGFloat radius = 70;
    CGRect position = CGRectMake(0, 0, radius, radius);
    Circle *myCircle = [[Circle alloc] initWithFrame:position radius:radius color:[UIColor redColor]];
    [self.view addSubview:myCircle];

} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-08T04:31:54.370

You should not be allocating new `UIView`s in `drawRect:` (and `UILabel` is a subclass of `UIView`). There are a few good ways of doing what you want, but none of them involve allocating a new `UILabel` in `drawRect:`.

One way is to make your Circle give itself a `UILabel` subview in its initializer, and center the label in `layoutSubviews`. Then in `drawRect:`, you just draw the circle and don't worry about drawing the label's text:

```
@implementation Circle {
    UILabel *_label;
}

@synthesize radius = _radius;
@synthesize color = _color;

- (id)initWithFrame:(CGRect)frame radius:(CGFloat)aRadius color:(UIColor*) aColor {
    self = [super initWithFrame:frame];
    if (self) {
        self.opaque = NO;

        [self setRadius:aRadius];
        [self setColor:aColor];

        _label = [[UILabel alloc] init];
        _label.font = [UIFont systemFontOfSize:80];
        _label.textColor = [UIColor whiteColor];
        _label.text = @"1";
        [_label sizeToFit];
        [self addSubview:_label];
    }
    return self;
}

- (void)layoutSubviews {
    [super layoutSubviews];
    CGSize mySize = self.bounds.size;
    _label.center = CGPointMake(mySize.width * 0.5f, mySize.height * 0.5f);
}

- (void)drawRect:(CGRect)rect {
    [self.color setFill];
    CGSize mySize = self.bounds.size;
    CGFloat radius = self.radius;
    [[UIBezierPath bezierPathWithOvalInRect:CGRectMake(mySize.width * 0.5f, mySize.height * 0.5f, self.radius, self.radius)] fill];
} 
```

# xcode4 - 如何摆脱 XCode4 中的“丢失文件”消息？

> ID：10056132
> 
> 赞同：0
> 
> 时间：2012-04-07T16:19:47.073
> 
> 标签：xcode4

我有这个使用 Storyboard 的 iPad 应用程序。有一些文件被标记为丢失，这些文件曾经在应用程序中。消息真的让我很烦...

![在此处输入图像描述](../Images/0e67e852a9582a38619e5fe9e84721ec.png)

我做了一个干净的重建，但它们仍然存在。我如何摆脱这些消息？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-07T16:24:49.797

您是否直接从文件系统中删除它们（例如使用 Finder 或终端）而不是通过 Xcode？你的项目没有镜像文件系统，所以当你从外部删除文件时，Xcode 仍然希望它们在那里。在左侧面板的项目导航器中找到引用并将其删除。将来，通过 Xcode 删除文件，它会询问您是否需要从文件系统中删除文件。

如果您已经这样做了，但仍然发现问题，则可能是 Xcode 错误。退出并重新打开 Xcode。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-10T07:40:51.047

听起来他们仍然处于版本控制之下。我的解决方案是通过终端强制删除它们。

# java - Java Hash Multi Map（具有多个值的键）实现

> ID：10056135
> 
> 赞同：3
> 
> 时间：2012-04-07T16:20:02.647
> 
> 标签：java, hashmap, guava, colt, trove4j

从[这里](http://b010.blogspot.it/2009/05/speed-comparison-of-1-javas-built-in.html)，我发现 Colt`OpenIntIntHashMap`和 Trove 的`TIntIntHashMap`性能和内存使用比 Java 内置`HashMap`或 Guava更好`HashMultimap`。

Colt's`OpenIntIntHashMap`或 Trove's 是否`TIntIntHashMap`允许具有多个值的键，如`HashMultimap`? 如果不是，那么`HashMultimap`实现 Colt 或 Trove 的性能和内存效率的好方法是什么？

注意：我已经测试过 Guava 的`HashMultimap`，但它的性能和内存效率对我来说似乎很差。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-07T16:30:17.620

```
Multimaps.newSetMultimap(
  TDecorators.wrap(new TIntObjectHashMap<Collection<Integer>>()),
  new Supplier<Set<Integer>>() {
    public Set<Integer> get() {
      return TDecorators.wrap(new TIntHashSet());
    }
  }); 
```

# ajax - Asp.Net Mvc Account Controller JSon and View?

> ID：10056137
> 
> 赞同：0
> 
> 时间：2012-04-07T16:20:05.063
> 
> 标签：ajax, json, asp.net-mvc-4

I m beginner asp.net mvc developer.And I don't understand, Why has used both Json and ActionResult in Account controller(for register, login and etc.) in default asp.net MVC 4 project?

Thanks.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-07T17:32:21.697

It's because in the ASP.NET MVC 4 the Login and Register forms are shown in a jQuery dialog and both forms POST to the Account controller using AJAX. The other actions that return views are similar to what existed in previous versions. For example if the user has javascript disabled he won't be able to use jQuery dialog and AJAX and he will fallback to standard HTML.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-07T17:28:47.307

Do you means having both JsonResult and ActionResult for (register and login view) in default MVC 4 template?

It means two views for both Register & Login form. One is using with ajax and the other is as normal view.

```
eg: Click on "Register" link on top, it will popup ajax "Register" view. 
    Click on "Login" link on top -> click "Register", it will show as normal view. 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-08T03:25:39.450

Alariza,

As Darin pointed out, there are two action methods for each form (Register & Login). One action method is used for the popup version of the view and the other is for the normal view.

Don't get discouraged by the negative comments.

# arrays - 在 Android 中显示多个字符串数组

> ID：10056150
> 
> 赞同：0
> 
> 时间：2012-04-07T16:21:14.840
> 
> 标签：arrays, string

我目前正在构建一个 Book-App（有点）。所以有很多字符串，用户可以选择他想从哪一行开始阅读。例如，第一章的字符串数组中有 200 个字符串。用户想从第 20 行开始阅读（因为他之前已经阅读了这些行）。如何显示 20-200 的所有字符串？我有：

```
 Resources res = getResources();
    String[] Book= res.getStringArray(R.array.ChapterOne);
    TextView ChapterOne= (TextView) findViewById(R.id.Text);
    SuraAlFateha.setText(Book[20]); 
```

但这只是显示第 20 行。但我希望它显示从 20 (20-200) 开始的所有行。我怎样才能做到这一点？谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-07T16:30:14.317

设置文本时，您需要一次设置所有文本，例如：

```
String resultString = '';

for ( int i = 20; i < Book.length; i++ )
    resultString = resultString + "\n" + Book[i];

SuraAlFateha.setText( resultString.substring( 1 ) ); 
```

或类似的东西。

但是，您应该在开始附加字符串之前计算您需要多少空间并保留它，否则您的运行时和内存使用量可能会变得非常高。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-07T16:38:17.367

Book[20] 只会为您提供数组的第 20 个元素，如果您希望获取 20 到末尾的文本，则需要将元素范围连接成一个字符串。

您可以使用[文本](http://developer.android.com/reference/android/text/TextUtils.html#join%28java.lang.CharSequence,%20java.lang.Object%5B%5D%29)和[数组](http://developer.android.com/reference/java/util/Arrays.html#copyOfRange%28T%5B%5D,%20int,%20int%29)实用程序来简化此操作。

```
String joinedLines = TextUtils.join("\n", java.utils.Arrays.copyOfRange(Book, 20, Book.length));
SuraAlFateha.setText(joinedLines); 
```

# wpf - 如何监控 WPF 应用程序中是否存在用户交互？

> ID：10056151
> 
> 赞同：4
> 
> 时间：2012-04-07T16:21:20.477
> 
> 标签：wpf

我有一个 WPF 应用程序，我的目的是在 30 秒内没有任何用户交互（无触摸、无点击等）时，该应用程序可以自动导航到主页。我不知道实施它。有人可以给我一些建议吗？十分感谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-07T16:40:37.050

连接 MainWindow 上的 PreviewMouseMove 以重置计时器。此计时器设置为在 30 秒内滴答作响。如果该计时器计时，请导航到该主页。

（这是假设您没有额外的 Windows，因此您需要将它们连接到同一个 PreviewMouseMove）

# .net - EPPlus - 如何打印列标题而不是列名

> ID：10056152
> 
> 赞同：0
> 
> 时间：2012-04-07T16:21:25.453
> 
> 标签：.net, excel, epplus

我在我的 .net 程序中使用了梦幻般的 EPPlus 组件。我在 DataTable 中有我的数据，并像这样填写我的 excel 电子表格：

```
ws.Cells["A3"].LoadFromDataTable(newTable, true, TableStyles.Medium9); 
```

但是，列标题会打印出我的列名，而不是翻译后的标题。

理论上，我可以在调用上面的代码之前简单地使用更改列名，但实际上我的列具有相同的标题，不允许作为名称。

我最后的手段是在上述代码运行后更改单元格值，但我宁愿不这样做。

对此问题的任何帮助将不胜感激。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-17T18:26:00.183

您必须重新编译 ExcelRangeBase.cs 中更改第 1542 行的代码

```
_worksheet.Cell(row, col++).Value = dc.ColumnName; 
```

类似于>>

```
_worksheet.Cell(row, col++).Value = String.IsNullOrEmpty(dc.Caption) ? dc.ColumnName : dc.Caption; 
```

干杯，

# git - 如何解决由“git stash apply”引起的“删除/修改”冲突

> ID：10056165
> 
> 赞同：20
> 
> 时间：2012-04-07T16:22:59.367
> 
> 标签：git

我最近做了 a `git stash`，然后在分支上做了一些工作并提交了它，并在尝试做 a 时遇到了这些错误`git stash apply`：

```
CONFLICT (delete/modify): app/controllers/orders_controller.rb deleted in Updated upstream and modified in Stashed changes. Version Stashed changes of app/controllers/orders_controller.rb left in tree.
CONFLICT (content): Merge conflict in app/models/product.rb 
```

`git status`显示以下内容：

```
 $ git status
# On branch develop
# Your branch is ahead of 'origin/develop' by 16 commits.
# Unmerged paths: 
#   (use "git reset HEAD <file>..." to unstage)
#   (use "git add/rm <file>..." as appropriate to mark resolution)
#
#   deleted by us:      app/controllers/orders_controller.rb
#   both modified:      app/models/product.rb 
```

标记为“删除/修改”的文件是我添加的一个新文件，在`stash`.
我想回到我之前的状态`git stash`——有未提交的本地更改。你能建议如何做到这一点吗？

谢谢。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2019-02-21T11:17:46.380

这对我有用。

做一个-

```
git mergetool 
```

然后你会被要求选择修改或删除的文件或中止，然后再做一次 -

```
git mergetool 
```

这将解决合并冲突，您可以隐藏您的更改。

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2012-04-07T16:34:11.860

您正在将存储弹出到不同的状态；有一个额外提交的状态。更糟糕的是，正如你所知，提交引入了合并冲突。

你有两个选择：

1.  将该存储弹出到最新提交并解决冲突
2.  将存储弹出到先前的提交中。

听起来#2 是你想要做的。采用：

```
 git stash branch new_branch [<stash>]  # <stash> will be the last one if not provided. 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2018-12-07T11:10:02.597

在我的情况下`git add <file>`帮助：

这是示例[https://gist.github.com/SgtPooki/10efd02b066a8704b776](https://gist.github.com/SgtPooki/10efd02b066a8704b776)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-07T16:40:29.253

你需要解决冲突！由于您更新了最新的存储库，因此在最新的存储库中修改了 project.rb 和 orders_controller.rb 这两个文件。同时，你本地的change（stash）也修改了这两个文件，当你应用它们时，会有冲突。

您需要解决冲突才能应用本地更改。

对于第一个文件，orders_controller.rb 最新的 repo 被删除了，当你推送你以后的提交时，你想保留它还是不保留它？

对于第二个文件 project.rb，您需要解决文件中的冲突。

# silverlight - 如何创建 xaml (silverlight) 动画，如 attacted 图像？

> ID：10056169
> 
> 赞同：0
> 
> 时间：2012-04-07T16:23:36.873
> 
> 标签：silverlight, windows-phone-7, xaml

我想创建像这张图片一样的动画，我想知道我该如何开始呢？在silverlight xaml中 ![在此处输入图像描述](../Images/e8361896b6548bd276f97e9f7ff31381.png)

此条将在动画中增加或减少

谢谢你的帮助

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-07T20:11:41.257

我将创建图像叠加层以创建网格效果，并在图像下绘制实心矩形。使用标准 XAML 动画为矩形设置动画。甚至更好：动画覆盖条形顶部的黑色覆盖矩形。

从 windows 手机发送。

# internet-explorer - IE 显示/隐藏带有属性的 div

> ID：10056173
> 
> 赞同：1
> 
> 时间：2012-04-07T16:23:51.410
> 
> 标签：internet-explorer, attributes, hide, show

我正在研究隐藏并具有“显示”按钮的 div。单击后，它会显示 div“anotherdiv”的内容。并且按钮的文本更改为“隐藏”。以下是我的jQuery代码：

```
<button id = "visible" value = "0">SHOW</button>
$("#visible").click(function(){
  $this = $(this);
  var divValue = $this.attr('value');
  if (divValue == 1){
      $this.attr('value','0');
      $('#anotherdiv').slideUp(1000);
      $this.text('HIDE');
  }else{
      $this.attr('value','1');
      $('#anotherdiv').slideDown(1000);
      $this.text('HIDE');    
  }
}); 
```

此代码在 Firefox、Chrome 和 Safari 上运行良好。但是在 IE 上，它在第一步起作用，当单击 SHOW 按钮时，“anotherdiv”打开，botton 的文本更改为“HIDE”，value 属性更改为 '1' 。但是当点击“HIDE”按钮时，IE并没有捕捉到value属性。我怎么解决这个问题。Stackoverflow中有一些类似的帖子，但我找不到明确的答案。谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-07T16:46:34.823

数据属性应以“data-”前缀存储。关于自定义数据属性的有用网站：http: [//html5doctor.com/html5-custom-data-attributes/](http://html5doctor.com/html5-custom-data-attributes/)

这个更新的版本在 IE8 上对我有用：http: [//jsfiddle.net/vSMK6/2/](http://jsfiddle.net/vSMK6/2/)

# c++ - typedef, enum, bool, Bool ------困惑

> ID：10056174
> 
> 赞同：2
> 
> 时间：2012-04-07T16:24:03.113
> 
> 标签：c++, class, constructor, boolean, typedef

我有一个 logicAND 类，构造函数应该评估两个布尔值的 AND 操作，它是这样工作的：

```
class logicAND{
public:
  logicAND(bool a,bool b):value(a&&b){}
  bool output(){return value;}
private:
  bool value;
};
int main(){
  bool m=false;
  bool n=true;
  logicAND t1(m,n);
  t1.output();
} 
```

然后，我在课前添加了一些旧式宏：

```
typedef enum { False = 0, True = 1 } Bool;
#define bool Bool
#define true True
#define false False

class logicAND{
public:
  logicAND(bool a,bool b):value(a&&b){}
  bool output(){return value;}
private:
  bool value;
};
int main(){
  bool m=false;
  bool n=true;
  logicAND t1(m,n);
  t1.output();
} 
```

现在我不能让它工作了。似乎主要问题在于构造函数类型不匹配。

感谢指出陷阱，原因和解决方案。谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-07T16:41:38.513

主要问题是您为什么要这样做。你想让宏做什么，也就是说，为什么你想让布尔值成为枚举？但是，要查看出了什么问题，您必须查看在 preprossesor 替换了您的宏之后您的代码是什么样子：

```
class logicAND
{
public:
    logicAND(Bool a,Bool b):value(a&&b){} //Expects two Bools which works. Now it trys to do a&&b, this actually is well defined for enums. However it returns a bool (!) which cannot be stored in "value" since that is a Bool.
    Bool output(){return value;}
private:
    Bool value; //This now is a Bool! Not a real bool
}; 
```

所以它中断的原因是你试图将 a&&b 返回的 bool 存储在一个 Bool 类型的变量中。解决此问题的明显方法是删除宏。或者你需要解释你为什么需要它们。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-07T16:41:54.233

之后`#define bool Bool`，成员`value`变为 enum Bool 类型。
你试图用 a && b 来初始化它，它不是 enum Bool 类型，而是基本类型 bool。
这就是你得到编译器错误的原因。

修复：将构造函数替换为：

```
logicAND(bool a,bool b):value((Bool)(a&&b)){}; 
```

# android - ExpandableListView - 父视图之上的子视图

> ID：10056177
> 
> 赞同：1
> 
> 时间：2012-04-07T16:24:21.350
> 
> 标签：android, expandablelistview

我实现了一个包含可扩展列表视图的 android 应用程序

我想知道是否可以将列表展开，这意味着子视图出现在父视图上方而不是在其下方

# java - 忽略 ASCII 艺术中的转义序列

> ID：10056183
> 
> 赞同：8
> 
> 时间：2012-04-07T16:24:47.980
> 
> 标签：java, escaping, backslash, ascii-art

对于我的命令行界面，一开始有一点 ASCII 艺术通常很好，但那些通常包含许多反斜杠。

例如：

```
System.out.println("  _____ _______       _____ _  __ ");
System.out.println(" / ____|__   __|/\   / ____| |/ / ");
System.out.println("| (___    | |  /  \ | |    | ' /  ");
System.out.println(" \___ \   | | / /\ \| |    |  <   ");
System.out.println(" ____) |  | |/ ____ \ |____| . \  ");
System.out.println("|_____/   |_/_/    \_\_____|_|\_\ "); 
```

但是由于每个都`\`需要是一个，`\\`这在代码中通常看起来很丑陋，并且很难找到/修复“字体”中的错误。有没有办法告诉 Java 不要使用转义序列？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-07T16:27:36.277

不，Java 没有 C# 的“逐字字符串文字”之类的东西。如果您想做 ASCII 艺术，请考虑将其放入文本文件并从代码中加载。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-07T16:28:48.290

从文件中读取“图像”，该文件可以在您的 jar 库中:)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-13T04:05:58.310

讨厌挖掘这个线程，但对于其他正在寻找这个的人来说......尝试使用unicode！

例如：\u0092 = "\"

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-07T16:29:05.960

对不起，伙计。不存在这样的动物。

# python - python 2.7：使用 Tkinter 在 GUI 编程中设置菜单时出现分段错误

> ID：10056188
> 
> 赞同：3
> 
> 时间：2012-04-07T16:25:19.430
> 
> 标签：python, segmentation-fault, tkinter

每次我想运行这段代码时都会遇到分段错误：

```
from Tkinter import *
def gui():  
        root=Tk()
        menubar=Menu(root)
        filemenu=Menu(menubar,tearoff=0)
        filemenu.add_command(label='New',command=gui)
        filemenu.add_command(label='Close',command=root.quit)
        menubar.add_cascade(label='File',menu=filemenu)
        helpmenu=Menu(menubar,tearoff=1)
        helpmenu.add_separator()
        helpmenu.add_command(label="Help")#ajouter commande
        helpmenu.add_command(label='About...')#ajouter commande
        helpmenu.add_cascade(label='Help',menu=helpmenu)
        root.mainloop()

gui() 
```

有什么建议吗？我该怎么办 ？先感谢您。MFF

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-07T16:45:04.193

段错误是由以下原因引起的：

```
helpmenu.add_cascade(label='Help',menu=helpmenu) 
```

快速浏览一下文档后，这完全可以理解为什么会给您带来问题。添加级联“添加分层菜单项”。您正在将 helpmenu 添加为 helpmenu 中的菜单。

我相信你在这里的意思是

```
menubar.add_cascade(label="Help", menu=helpmenu) 
```

# javascript - Javascript 常见问题解答下拉菜单

> ID：10056191
> 
> 赞同：0
> 
> 时间：2012-04-07T16:25:41.817
> 
> 标签：javascript, html, css, drop-down-menu

我试图创建一个简单的常见问题解答下拉列表，但由于某种原因它不起作用。你介意看看吗？

多谢你们！

CSS

```
#faqs h3    { cursor:pointer; }
#faqs h3.active { color:#d74646; }
#faqs div { height:0; overflow:hidden; position:relative; }
#faqs div p { padding:0; margin-bottom:15px; } 
```

JavaScript：

```
$(document).ready(function() {
    $('#faqs h3').each(function() {
        var tis = $(this), 
            state = false, 
            answer = tis.next('div')
                        .hide()
                        .css('height','auto')
                        .slideUp();

            tis.click(function() {
                state = !state;
                answer.slideToggle(state);
                tis.toggleClass('active',state);
            });
    });
}); 
```

HTML

```
<div id="faqs">
    <h3>This is question 1?</h3>
        <div>
            <p>This is the answer to question #1.</p>
        </div>
    <h3>This is question 2?</h3>
        <div>
            <p>This is the answer to question #2.</p>
        </div>
</div> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-31T04:29:02.360

以下功能可用于您需要的功能：

**HTML**

```
<div id="QA">
  <ul>
    <li>Question 1</li>
    <li>Answer 1</li>
    <li>Question 2</li>
    <li>Answer 2</li>
  </ul>
  <ul>
    <li>Question 3</li>
    <li>Answer 3</li>
    <li>Question 4</li>
    <li>Answer 4</li>
  </ul>

</div> 
```

**JavaScript：**

```
<script type="text/javascript">
    function toggle(tag) {
        var x=document.getElementsByName(tag)[0];
        var a = x.parentNode
        if (a.style.display=='block'){
            a.style.display='none'
        }else{
            a.style.display='block'     
        }
    }

    function init() {
        //this function will add show hide functionality to paired list items,
        //as long as the answer is a list item straight after the question list item.
        //You can also have as many separate lists as you want.
        //all lists must be contained within a div with id QA

        var obj = document.getElementById('QA');
        var elements = obj.getElementsByTagName('li');
               var index = 1 
        //add javascript to question elements
              //you could also add styling to question elements here
        for (var i=0; i < elements.length; i+=2){
            var element = elements[i]; 
            element.innerHTML = "<a href='javascript:toggle(" + index + ")'>" + element.innerHTML + "</a>"
            index = index + 1
        } 
        //add bookmark to answer elements and add styling
        var index = 1
        for (var i=1; i < elements.length; i+=2){
            var element = elements[i]; 
            element.innerHTML = "<a name='" + index + "' id='" + index + "'></a>" + element.innerHTML 
            index = index + 1
                 element.style.padding = '0px 0px 10px 20px' //add indent to answer
                       element.style.listStyleType = 'none' //remove bullet
            element.style.display = 'none' //hide answer element
        }       
     }

window.onload = init; 

</script> 
```

# android - android中的游标和SQLite出错

> ID：10056192
> 
> 赞同：0
> 
> 时间：2012-04-07T16:25:46.280
> 
> 标签：android, database, sqlite, cursor

读取数据库时，游标出错：

```
04-07 18:11:25.672: ERROR/AndroidRuntime(5801): android.database.CursorWindowAllocationException: Cursor window allocation of 2048 kb failed. # Open Cursors=666 (# cursors opened by this proc=666) 
```

它发生在线上

```
cursor.getCount() 
```

整个文件是 8kb，它有 32 行，但 ID 从 737 到 768，问题出在哪里？

（我注意到如果ID低于600，没有问题）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-01-30T12:02:49.350

You should really be closing the cursor in a `finally` block, to ensure that it's closed even if an exception happens.

```
public News getNewsWithID(int id){
    Cursor c = bdd.query(TABLE_NEWS, new String[] {COL_ID, COL_ASSO, COL_DATE, COL_HEURE, COL_TYPE, COL_TITRE, COL_CONTENU, COL_SERVEURID}, COL_ID +"='"+ id +"'" , null, null, null, null);
    try {
        return cursorToNews(c);
    } finally {
        c.close();
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-01-30T11:59:00.467

（OP 在问题编辑中回答的问题。转换为社区 wiki 答案。请参阅[没有答案的问题，但问题在评论中解决（或在聊天中扩展）](https://meta.stackoverflow.com/questions/251597/question-with-no-answers-but-issue-solved-in-the-comments)）

OP写道：

> 我解决了这个问题。我的代码是：

```
public News getNewsWithID(int id){
        Cursor c = bdd.query(TABLE_NEWS, new String[] {COL_ID, COL_ASSO, COL_DATE, COL_HEURE, COL_TYPE, COL_TITRE, COL_CONTENU, COL_SERVEURID}, COL_ID +"='"+ id +"'" , null, null, null, null);
        return cursorToNews(c);
    } 
```

> 我改为：

```
public News getNewsWithID(int id){
        Cursor c = bdd.query(TABLE_NEWS, new String[] {COL_ID, COL_ASSO, COL_DATE, COL_HEURE, COL_TYPE, COL_TITRE, COL_CONTENU, COL_SERVEURID}, COL_ID +"='"+ id +"'" , null, null, null, null);
        News temp = cursorToNews(c);
        c.close();
        return temp;
    } 
```

我认为光标在 onDestroy() 上已关闭。

# javascript - 从 Div 创建图像

> ID：10056193
> 
> 赞同：0
> 
> 时间：2012-04-07T16:25:57.960
> 
> 标签：javascript, canvas, html5-canvas

我是帆布新手。我正在使用以下代码从另一个图像在画布中插入图像。当我尝试使用代码从 div 创建图像时

```
 <!DOCTYPE html><html> 
        <head> 
            <title>test</title> 
            <script type="text/javascript">
            var colour="#ccc",bgcolour="#fff";
            function paint(hhh){
               canvas = document.getElementById('canvas'); 
               ctx = canvas.getContext('2d');
               var img=document.getElementById('mine');
               ctx.drawImage(img,0,0);
            }
        </script> 
        </head> 
        <body  onload="paint('scribble');"  >
            <canvas id="canvas" style="border:solid 1px;" width="400" height="400">g</canvas>  <div id="mine">canvas</div>
        </body> 
    </html> 
```

它不工作。 **我的问题是如何从 div 而不是另一个图像中绘制图像？**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-07T16:38:01.030

问题是您不能从不是图像的元素或另一个画布元素绘制到画布上。查看这篇 MDN 文章以获取更多信息**[使用带有画布的图像](https://developer.mozilla.org/en/Canvas_tutorial/Using_images)**

另一个问题是您在事件中将 div 视为图像，div 没有`onload`事件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-08T02:28:11.427

您可以在 Canvas 上使用 drawImage 绘制的唯一图像是在图像对象的“src”属性中声明的图像。规格可在[此处找到](http://www.w3schools.com/jsref/prop_img_src.asp)。

我不知道有什么方法可以将 div 标签的内容放入图像对象中，而且我认为这并不是一件容易的事。你应该考虑替代方案...

# javascript - JavaScript REGEX 使用自定义函数扩展`/pattern/`

> ID：10056194
> 
> 赞同：0
> 
> 时间：2012-04-07T16:26:04.593
> 
> 标签：javascript, regex

我知道我可以做到这一点...

```
RegExp.prototype.xtend = function(){ console.log(123) }
y = new RegExp(/pattern/)
y.xtend() 
```

我想以这种格式扩展正则表达式模式：`/pattern/`，所以我可以做......

```
/pattern/.xtend() 
```

* * *

编辑：这是语法问题

原来它是一个缺少的分号。我需要在正则表达式模式之前使用分号，否则会出现语法错误。

感谢所有的评论。现在效果很好。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-11T08:38:09.713

原来它是一个缺少的分号。我需要在正则表达式模式之前使用分号，否则会出现语法错误。

我在 Firebug 控制台中运行它，它会自动返回最后一行的值......但是因为第三行之后没有分号，第四行以正则表达式开头，所以出现错误。

```
RegExp.prototype.xtend = function(){ console.log(123) }
y = new RegExp(/pattern/)
y.xtend()
/pattern/.xtend() 
```

添加分号可以解决问题...

```
RegExp.prototype.xtend = function(){ console.log(123) }
y = new RegExp(/pattern/)
y.xtend(); // <~~ this semi-colon fixes the issue
/pattern/.xtend() 
```

感谢所有的评论。现在效果很好。

# android - Android 当我站在一个地方时，我得到了更多 locationChangeEvent

> ID：10056196
> 
> 赞同：0
> 
> 时间：2012-04-07T16:26:43.203
> 
> 标签：android, performance, zero, locationlistener

我做了一个简单的GPS。应用程序。对于 android，将路线坐标存储到文件中。我很困惑，当我站在一个地方时，我得到了更多的 onLocationChanged 事件。事件来临时，Location中的方位和速度当然为零，但它很感兴趣，因为我在注册LocationListener时使用了1米作为minDistance。（minTime 为零）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-07T16:49:25.347

您确定 getLatitude 和 getLongitude 返回的值与它们之前的值相同吗？普通 GPS 只能精确到一两米，所以在我看来，您的 GPS 传感器感知到的随机移动位置可能是问题所在。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-07T18:19:36.367

当您的应用程序运行时，您可能会注册更多 GPS 卫星，这可能会改变您的位置并减少从所有 gps 信号接收到的所有时间的错误。此外，当您静止不动时，位置将变得越来越准确，可以将 gps 信号精度降低到 cms，请参阅：[http ://atarist.home.xs4all.nl/geo/gps_accuracy.htm 和](http://atarist.home.xs4all.nl/geo/gps_accuracy.htm)[实时](http://en.wikipedia.org/wiki/Real_Time_Kinematic)wiki 链接[运动学](http://en.wikipedia.org/wiki/Real_Time_Kinematic)，尤其是当您连接到参考信号时

# javascript - 有没有一种巧妙的方法来浮动项目以创建带有可扩展项目的网格，而不会使用 HTML/CSS/JS 浪费这么多空间？

> ID：10056197
> 
> 赞同：0
> 
> 时间：2012-04-07T16:26:49.880
> 
> 标签：javascript, html, css, user-interface, css-float

我使用 float 构建了一个非常基本的 div 网格：

![](../Images/77f5c51185532ebed30eefca4b670a32.png)

但是，当扩展放置在右侧栏中的一项时，会发生以下情况（请原谅我用来说明我要实现的目标的粗略/蹩脚的箭头）：

![](../Images/1fcf00bdaa686fd66808f3285ab73dbb.png)

这是我所期望的，但不是我真正想要的。我正在寻找一种巧妙的方法，让盒子 A 和 B 向上移动以填充空位，并将项目 CH 向上移动一排，以便最有效地利用可用空间。

这是我为说明这个问题而创建的 JSFiddle（抱歉，它不可点击，再次堆栈溢出代表......）：

[http://jsfiddle.net/VDV6S/4/](http://jsfiddle.net/VDV6S/4/)

我将不胜感激任何建议。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-07T17:00:52.773

你需要[jQuery Masonry](http://masonry.desandro.com/)或类似的东西。

或者，您可以手动将项目分成两列：http: [//jsfiddle.net/thirtydot/VDV6S/5/](http://jsfiddle.net/thirtydot/VDV6S/5/)

另一种选择是使用[CSS3 columns](https://developer.mozilla.org/en/CSS3_Columns)，但是[浏览器支持](http://caniuse.com/multicolumn)可能不可接受。

# java - DAOFactory - 缺少依赖

> ID：10056198
> 
> 赞同：0
> 
> 时间：2012-04-07T16:26:51.160
> 
> 标签：java, jsf, jsf-2

我想实现这个[例子](http://balusc.blogspot.com/2008/10/effective-datatable-paging-and-sorting.html)这是到目前为止的代码：

```
import java.io.Serializable;
import java.math.BigDecimal;
import javax.enterprise.context.SessionScoped;
// or import javax.faces.bean.SessionScoped;
import javax.inject.Named;
/* include SQL Packages */
import java.sql.Connection;
import java.sql.PreparedStatement;
import java.sql.ResultSet;
import java.sql.SQLException;
import java.util.ArrayList;
import java.util.Arrays;
import java.util.HashMap;
import java.util.List;
import java.util.Map;
import javax.annotation.PostConstruct;
import javax.sql.DataSource;
import javax.annotation.Resource;
import javax.faces.component.UICommand;
import javax.faces.context.FacesContext;
import javax.inject.Inject;
import javax.servlet.http.HttpServletRequest;
import javax.servlet.http.HttpSession;
// or import javax.faces.bean.ManagedBean; 
import javax.faces.event.ActionEvent;

import org.glassfish.osgicdi.OSGiService;

//http://balusc.blogspot.com/2008/10/effective-datatable-paging-and-sorting.html

@Named("SessionsController")
@SessionScoped
public class Sessions implements Serializable {

    /* Call the Oracle JDBC Connection driver */
    @Resource(name = "jdbc/Oracle")
    private DataSource ds;
    // DAO.
    private static ActiveSessionsDAO dao = DAOFactory.getInstance("javabase").getActiveSessionsDAO();
    // Data.
    private List<ActiveSessions> dataList;
    private int totalRows;
    // Paging.
    private int firstRow;
    private int rowsPerPage;
    private int totalPages;
    private int pageRange;
    private Integer[] pages;
    private int currentPage;
    // Sorting.
    private String sortField;
    private boolean sortAscending;
    // Constants ----------------------------------------------------------------------------------
    private static final String SQL_LIST_BY_ORDER_AND_LIMIT =
            "SELECT * FROM ACTIVESESSIONSLOG ORDER BY %s %s LIMIT ?, ?";
    private static final String SQL_COUNT =
            "SELECT count(*) FROM ACTIVESESSIONSLOG";

    private static class DAOFactory {

        public DAOFactory() {
        }
    }

    private static class ActiveSessions {

        public ActiveSessions() {
        }

        private ActiveSessions(long aLong, String string, Integer integer) {
            throw new UnsupportedOperationException("Not yet implemented");
        }
    }
    // Properties ---------------------------------------------------------------------------------
    private DAOFactory daoFactory;

    // Constructors -------------------------------------------------------------------------------

    Sessions(DAOFactory daoFactory) {
        this.daoFactory = daoFactory;
        // Set default values somehow (properties files?).
        rowsPerPage = 10; // Default rows per page (max amount of rows to be displayed at once).
        pageRange = 10; // Default page range (max amount of page links to be displayed at once).
        sortField = "ASESSIONID"; // Default sort field.
        sortAscending = true; // Default sort direction.
    }

    // Paging actions -----------------------------------------------------------------------------
    public void pageFirst() {
        page(0);
    }

    public void pageNext() {
        page(firstRow + rowsPerPage);
    }

    public void pagePrevious() {
        page(firstRow - rowsPerPage);
    }

    public void pageLast() {
        page(totalRows - ((totalRows % rowsPerPage != 0) ? totalRows % rowsPerPage : rowsPerPage));
    }

    public void page(ActionEvent event) {
        page(((Integer) ((UICommand) event.getComponent()).getValue() - 1) * rowsPerPage);
    }

    private void page(int firstRow) {
        this.firstRow = firstRow;
        loadDataList(); // Load requested page.
    }

    // Sorting actions ----------------------------------------------------------------------------
    public void sort(ActionEvent event) {
        String sortFieldAttribute = (String) event.getComponent().getAttributes().get("sortField");

        // If the same field is sorted, then reverse order, else sort the new field ascending.
        if (sortField.equals(sortFieldAttribute)) {
            sortAscending = !sortAscending;
        } else {
            sortField = sortFieldAttribute;
            sortAscending = true;
        }

        pageFirst(); // Go to first page and load requested page.
    }

    // Loaders ------------------------------------------------------------------------------------
    private void loadDataList() {

        // Load list and totalCount.
        try {
            dataList = dao.list(firstRow, rowsPerPage, sortField, sortAscending);
            totalRows = dao.count();
        } catch (Exception e) {
            throw new RuntimeException(e); // Handle it yourself.
        }

        // Set currentPage, totalPages and pages.
        currentPage = (totalRows / rowsPerPage) - ((totalRows - firstRow) / rowsPerPage) + 1;
        totalPages = (totalRows / rowsPerPage) + ((totalRows % rowsPerPage != 0) ? 1 : 0);
        int pagesLength = Math.min(pageRange, totalPages);
        pages = new Integer[pagesLength];

        // firstPage must be greater than 0 and lesser than totalPages-pageLength.
        int firstPage = Math.min(Math.max(0, currentPage - (pageRange / 2)), totalPages - pagesLength);

        // Create pages (page numbers for page links).
        for (int i = 0; i < pagesLength; i++) {
            pages[i] = ++firstPage;
        }
    }

    // Getters ------------------------------------------------------------------------------------
    public List<ActiveSessions> getDataList() {
        if (dataList == null) {
            loadDataList(); // Preload page for the 1st view.
        }
        return dataList;
    }

    public int getTotalRows() {
        return totalRows;
    }

    public int getFirstRow() {
        return firstRow;
    }

    public int getRowsPerPage() {
        return rowsPerPage;
    }

    public Integer[] getPages() {
        return pages;
    }

    public int getCurrentPage() {
        return currentPage;
    }

    public int getTotalPages() {
        return totalPages;
    }

    // Setters ------------------------------------------------------------------------------------
    public void setRowsPerPage(int rowsPerPage) {
        this.rowsPerPage = rowsPerPage;
    }

    // Actions ------------------------------------------------------------------------------------
    /**
     * Returns list of ActiveSessions items starting at the given first index with the given row count,
     * sorted by the given sort field and sort order.
     * @param firstRow First index of rows to be returned.
     * @param rowCount Amount of rows to be returned.
     * @param sortField Field to sort the data on.
     * @param sortAscending Whether to sort data ascending or not.
     * @return list of ActiveSessions items starting at the given first index with the given row count,
     * sorted by the given sort field and sort order.
     * @throws DAOException If something fails at DAO level.
     */
    public List<ActiveSessions> list(int firstRow, int rowCount, String sortField, boolean sortAscending)
            throws Exception {
        Object[] values = {firstRow, rowCount};

        if (ds == null) {
            throw new SQLException();
        }

        String sortDirection = sortAscending ? "ASC" : "DESC";
        String sql = String.format(SQL_LIST_BY_ORDER_AND_LIMIT, sortField, sortDirection);
        Connection conn = ds.getConnection();
        PreparedStatement preparedStatement = null;
        ResultSet resultSet = null;
        List<ActiveSessions> dataList = new ArrayList<ActiveSessions>();

        try {
            conn.setAutoCommit(false);
            boolean committed = false;
//            connection = daoFactory.getConnection();
            preparedStatement = conn.prepareStatement(sql);
            resultSet = preparedStatement.executeQuery();
            while (resultSet.next()) {
                dataList.add(mapActiveSessions(resultSet));
            }
        } catch (SQLException e) {
            throw new Exception(e);
        } finally {
            conn.close();
        }

        return dataList;
    }

    /**
     * Returns total amount of rows in table.
     * @return Total amount of rows in table.
     * @throws DAOException If something fails at DAO level.
     */
    public int count() throws Exception {
//        Connection connection = null;
        PreparedStatement preparedStatement = null;
        ResultSet resultSet = null;
        int count = 0;

        try {
//            connection = daoFactory.getConnection();
            Connection conn = ds.getConnection();
            preparedStatement = conn.prepareStatement(SQL_COUNT);
            resultSet = preparedStatement.executeQuery();
            if (resultSet.next()) {
                count = resultSet.getInt(1);
            }
        } catch (SQLException e) {
            throw new Exception(e);
        } finally {
            //close the connection
        }

        return count;
    }

    /**
     * Map the current row of the given ResultSet to ActiveSessions.
     * @param resultSet The ResultSet of which the current row is to be mapped to ActiveSessions.
     * @return The mapped ActiveSessions from the current row of the given ResultSet.
     * @throws SQLException If something fails at database level.
     */
    private static ActiveSessions mapActiveSessions(ResultSet resultSet) throws SQLException {
        return new ActiveSessions(
                resultSet.getLong("ASESSIONID"),
                resultSet.getString("USERID"),
                resultSet.getObject("value") != null ? resultSet.getInt("value") : null);
                /*
                CREATE TABLE ACTIVESESSIONSLOG(
                    ASESSIONID VARCHAR2(30 ) NOT NULL,
                    USERID VARCHAR2(30 ),
                    ACTIVITYSTART TIMESTAMP(6),
                    ACTIVITYEND TIMESTAMP(6),
                    ACTIVITY CLOB
                )
                */
    }
} 
```

我注意到 Netbeans 在这一行给了我一个错误：

```
private static ActiveSessionsDAO dao = DAOFactory.getInstance("javabase").getActiveSessionsDAO(); 
```

错误信息是：

```
cannot find symbol
  symbol:   class ActiveSessionsDAO
  location: class com.DX_57.HM_57.Sessions

cannot find symbol
  symbol:   method getInstance(java.lang.String)
  location: class com.DX_57.HM_57.Sessions.DAOFactory 
```

我必须导入哪些依赖项？我可以简化代码并仅使用简单的 JDBC 连接从数据库中获取数据吗？

最好的祝愿

# java - HQL：变量列

> ID：10056199
> 
> 赞同：2
> 
> 时间：2012-04-07T16:27:04.140
> 
> 标签：java, hibernate, hql

我可以为“where”限制设置变量值：

```
Query criteria = session.createQuery(
  "select test.col1, test.col2, test.col3
  "from Test test " +
  "where test.col = :variableValue ");
criteria.setInteger("variableValue", 10); 
```

但是可以像这样设置变量列吗？

```
String variableColumn = "test.col1";
Query criteria = session.createQuery(
  "select test.col1, test.col2, test.col3
  "from Test test " +
  "where :variableColumn = :variableValue ");
criteria.setInteger("variableValue", 10);
criteria.setString("variableColumn", variableColumn); 
```

这是结果：

```
Exception in thread "main" Hibernate: select .... where ?=? ...
org.hibernate.exception.SQLGrammarException: could not execute query
    at org.hibernate.exception.SQLStateConverter.convert(SQLStateConverter.java:92)
    ...
    at _test.TestCriteria.main(TestCriteria.java:44)
Caused by: com.microsoft.sqlserver.jdbc.SQLServerException: Conversion failed when converting the nvarchar value 'test.col1' to data type int.
    ... 
```

**更新**（工作解决方案）：

```
Query criteria = session.createQuery(
  "select test.col1, test.col2, test.col3
  "from Test test " +
  "where (:value1 is null OR test.col1 = :value1) AND 
         (:value2 is null OR test.col2 = :value2) " 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-07T16:37:04.153

您可以将列名设置为字符串的一部分。为了安全起见，您可以手动执行 SQL 转义，但最终您可以实现这一点。

为避免 SQL 注入，您可以使用`commons`类：

```
String escapedVariableColumn = org.apache.commons.lang.StringEscapeUtils.escapeSql(variableColumn);

Query criteria = session.createQuery(
  "select test.col1, test.col2, test.col3
  "from Test test " +
  "where " + escapedVariableColumn + " = :variableValue ");
criteria.setInteger("variableValue", 10); 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-04-07T16:38:34.743

这在您的应用程序中是否有意义：

```
String query =  "select test.col1, test.col2, test.col3" + 
  "from Test test " +
  "where {columnName} = :variableValue ";
Object variableValue = // retrieve from somewhere
String columnName = // another retrieve from somewhere
query = query.replace("{columnName}", columName);
// Now continue as always 
```

这通常是一个*简单*的查询构造函数。您可能需要将此想法重构为一个单独的基于实用程序/实体的类，以在执行前细化（例如 SQL 注入）查询。

# jquery - jQuery-闪烁的菜单栏

> ID：10056200
> 
> 赞同：0
> 
> 时间：2012-04-07T16:27:15.483
> 
> 标签：jquery

我想开发一个菜单栏，一旦用户将鼠标光标放在选项卡上，选项卡就会向上扩展。实际上它工作得很好，尽管存在一个问题：如果用户将鼠标光标放在一个选项卡上，然后非常快速地将其移动到选项卡上方，则选项卡开始非常频繁地上下移动，看起来好像它会闪烁。

这是我如何实现它的一个例子：http: [//jsfiddle.net/enne87/wLGDG/34/](http://jsfiddle.net/enne87/wLGDG/34/)

当我说“将光标移到选项卡上然后向上”时，我希望您知道我的意思。如果没有，我可以给你看一个视频，它更准确地说明了我的意思。

顺便提一句。这是动画的javascript代码：

```
 $('#primaryMenu ul.menu li:nth-child(1)').hover(
  function () {
      $(this,this).stop(true,true).animate({bottom: '+=55'}, 300, function() {}); 
  },
  function () {
      $(this,this).stop(true,true).animate({bottom: '-=55'}, 300, function() {});
  }
); 
```

我将非常感谢您的帮助。

干杯，恩

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-07T17:07:24.870

我知道这不是固定代码，但问题是：

### 问题

您实际上是在为整个`li`节点的位置设置动画，这正在创建工件。为其他读者澄清：

1.  转到小提琴上的实时样本并从下方接近菜单项。不要移动鼠标
2.  向上动画将完成，但现在可以看到鼠标触发“离开”并且它会开始向下移动
3.  向下动画将完成，但随后触发“进入”并再次开始，无限循环。

闪烁来自更极端的版本：

1.  从菜单下方接近。动画开始向上移动
2.  将鼠标向上移向动画项目

当您移动鼠标时，会触发向上的“停止”，将元素直接发送到动画的顶部。但随后您将再次重新输入该元素，如果它尚未位于顶部则触发动画。当元素尚未位于顶部时向上移动鼠标将触发“离开”，将元素直接发送到底部。

*哇*

### 修复

那么，修复？不是为菜单的位置设置动画，而是设计一种动画高度的方法，使其不是向下推而是向上推（使用当前的 CSS，简单地动画高度将`li`向下扩展灰色，而不是向上）。这将涉及修改 CSS 以适应该开关。如果设计要求整个块需要保持 200px 高（给人一种它*正在*移动的错觉），那么事件应该绑定到某种透明容器而不是`LI`.

### 无关的东西

与此同时，原始代码存在一些基本问题：

1.  为什么是`$(this,this)`mouseenter/mouseleave 的选择器？第二个可选选择器是上下文。对两者使用相同的选择器不会创建上下文，因此您应该只使用`$(this)`.

2.  事件不需要绑定两次。它们都`li`符合相同的描述，所以你可以让你的选择器寻找：

```
$('#primaryMenu ul.menu li').hover( /* ... */); 
```

`li`或者，如果出于某种原因指定哪些事件实际上很关键，请将它们组合在一起：

```
$('#primaryMenu ul.menu li:nth-child(1), #primaryMenu ul.menu li:nth-child(2)') 
```

# java - 如何使用 APV PDF 查看器

> ID：10056205
> 
> 赞同：0
> 
> 时间：2012-04-07T16:27:38.633
> 
> 标签：java, android, pdf, apvpdf

所以我想在我的应用程序中查看 PDF，我遇到了 APV PDF，但我就是不明白如何使用它的说明

[http://code.google.com/p/apv/wiki/Building](http://code.google.com/p/apv/wiki/Building)

**为什么不是要下载的jar库？**

**为什么我必须编译一些.so文件，为什么我不能下载它们？**

我浏览了源代码，这里有一个演示应用程序：

[http://code.google.com/p/apv/source/browse/#hg%2Fpdfview](http://code.google.com/p/apv/source/browse/#hg%2Fpdfview)

我将它作为 Android 项目复制到 eclipse 中，它可以编译，但是当我在编译的应用程序中运行并选择 PDF 时出现错误

```
 java.lang.UnsatisfiedLinkError: parseFile 
```

我知道这与我上面的问题有关，所以希望我能得到一些答案。

这可能与我没有经验的 NDK 有关。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-09T16:10:42.370

我的脑洞扩大了！

1) 你不能有一个 Jar，因为这是 C 代码，所以它将在 NDK 中运行，因此等价于一个`.so`文件。

2）我不知道他们为什么不让你只下载一个`.so`文件*（以及拥有源代码）*，但似乎这个项目只是一个入门项目，即你应该获取源代码并对其进行修改。因此，如果您只有一个`.so`文件，则无法执行此操作。每次更改源代码时，`/jni/pdfview2`都必须重新运行脚本`build-native.sh`，这将为您重新创建库 ( `.so`) 文件！

我得到的是`UnsatisfiedLinkError`因为`.so`我使用的库是针对与 Java 文件试图引用的不同版本的代码构建的。因此我的链接不满意！

危险！

# javascript - Javascript - 从字符串中提取特定数字

> ID：10056210
> 
> 赞同：3
> 
> 时间：2012-04-07T16:27:55.307
> 
> 标签：javascript, regex

我正在尝试从字符串中提取特定数字，但我不确定如何执行它。

该字符串的形式为：

```
center=43.571464,7.129565&zoom=12&size=480x225&markers=color:red%7Clabel:1%7C43.580293713725936,7.115145444335894&markers=color:red%7Clabel:2%7C43.56512073056565,7.121668576660113&sensor=false 
```

我想要的数组是接近末尾的标记坐标，具体来说：

```
[43.580293713725936,7.115145444335894,43.56512073056565,7.121668576660113] 
```

我想我可以使用它们的精度（15）来挑选这些数字，但我不知道这是否是最好的。在使用正则表达式时，我是个黑客。现在我所拥有的最好的是：

```
str.match(/[-+]?[0-9]*\.?[0-9]+/g) 
```

但这只是给了我所有的数字。

非常感谢帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-07T16:44:27.367

您可以尝试使用以下正则表达式

```
/\d+\.\d{7,}/g 
```

这假设：

*   标记坐标在点之后总是有 7 个或更多数字
*   字符串的其他部分不包含类似的模式，点后有超过 7 个数字

示例（[JSFiddle](http://jsfiddle.net/4n7xp/)）：

```
str.match(/\d+\.\d{7,}/g); 
```

我选择 7 的原因是因为样本中的其他数字有 6，所以排除了它们。如果您知道坐标始终具有固定的小数位数，那么您可以只使用该特定数字而无需`,`像这样：

```
/\s+\.\d{10}/g 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-07T16:43:38.257

如果您的字符串正在`str`使用此正则表达式。

```
var coordinates = decodeURIComponent(str).match(/([\d.]{10,})/g); 
```

[http://jsfiddle.net/CHfcT/](http://jsfiddle.net/CHfcT/)

# algorithm - 起始位置和一组所需节点之间的最小生成树

> ID：10056212
> 
> 赞同：4
> 
> 时间：2012-04-07T16:28:30.563
> 
> 标签：algorithm, search, graph-theory, shortest-path, minimum-spanning-tree

我正在尝试确定最佳搜索案例以与我编写的搜索算法进行比较。

我有一组标记为“必需”的节点和一个标记为“开始”的节点，其余的标记为“可选”。鉴于我的第一个扩展是“开始”节点，我想找到我需要扩展以发现所有必需节点的最佳节点数。

*   我相信我正在寻找的是最小生成树，但会修剪所有不以“必需”节点结尾的分支。这是[斯坦纳树问题](http://en.wikipedia.org/wiki/Steiner_tree_problem)吗？
*   如果我的图表未加权，Steiner 树和最小生成树的大小是否相同？
*   如果我能对树的大小说些什么呢？即类似（最小生成树大小的大小=平均最短路径*＃所需节点......我认为这不是真的，但能够根据连通性或其他东西计算平均值会很好）。

几点注意事项：

1.  这不是旅行销售问题，因为我不需要在每个所需节点之间存在路径，我只想发现每个所需节点。
2.  我的图表是无向且未加权的（或就此而言同样加权）
3.  我的图表平均有大约 100 个必需节点，可能还有数千个可选节点

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-07T17:06:14.167

> 我有一组标记为“必需”的节点和一个标记为“开始”的节点，其余的标记为“可选”。鉴于我的第一个扩展是“开始”节点，我想找到我需要扩展以发现所有必需节点的最佳节点数。

如果扩展节点的成本可以是任意的，那么这就是节点加权施泰纳树问题，在合理的复杂性理论假设下，它没有比率为 o(log n) 的多项式时间逼近算法。

> 我相信我正在寻找的是最小生成树，但会修剪所有不以“必需”节点结尾的分支。

不，这通常不是最优的。例如，使用图表

```
 s
      /|\
     / | \
    *  |  *
   /   |   \
  /    |    \
 r1----*----r2, 
```

一种可能的 MST 看起来像`/|\`或被`/\`修剪时，但最佳解决方案看起来像`_|_`.

> 如果我能对树的大小说些什么呢？

从理论上讲，您可以通过求解 Steiner 树的整数程序的 LP 松弛的对偶来获得下限（实际上使用您正在考虑的大小的图形，如果求解器可以确定，我不会感到惊讶最优的 Steiner 树）。

然而，实际上，这并不是人们评估搜索算法的方式。

# node.js - 使用 nginx proxy_buffering 和 node js 强大的管道 POST 正文

> ID：10056214
> 
> 赞同：4
> 
> 时间：2012-04-07T16:28:40.550
> 
> 标签：node.js, post, ssl, nginx, buffer

我的设置可能看起来有点奇怪，但不应该太牵强：我有一个 apache2 实例服务器 php 页面和静态文件。我有一个`POST`使用[node-formidable](https://github.com/felixge/node-formidable)处理文件上传（）的节点 js 服务器。最重要的是，我使用`nginx 1.0.14`. 为了使用节点服务器上传 php 文件中的表单，我决定安装 nginx，这样我就可以保持相同的域、端口和协议。所以基本上我有 /upload 我想（直接）管道到我的节点 js，最好完全在代理之外。其余的由 apache2 服务器处理：

```
location /upload {
    client_max_body_size        10m;
    client_body_buffer_size     128k;
    proxy_connect_timeout       600;
    proxy_send_timeout          600;
    proxy_read_timeout          600;
    proxy_buffer_size           4k;
    proxy_buffers               4 32k;
    proxy_busy_buffers_size     64k;
    proxy_temp_file_write_size  64k;
    send_timeout                600;
    proxy_buffering             off;
    proxy_pass https://node_backend;
}
location / {
    proxy_set_header Host $http_host;
    proxy_pass https://apache_backend;
} 
```

这是基于[https://stackoverflow.com/a/1167559](https://stackoverflow.com/a/1167559)

我的问题是 nginx 在将整个 POST 请求从 nginx 发送到节点 js 之前对其进行缓冲。在我的节点 js 被命中之前，我可以将其验证为 Chrome 中的进度指示器计数一直到 100%（从 0-100% 即时上传（因为它是从本地主机发送到本地主机的））。

我不明白为什么`proxy_buffering off`没有按我期望的方式工作（它不应该缓冲，而是在收到请求时将请求传递给后端）。

或者......这可能以其他方式吗？

非常感谢任何提示/帮助。

*   卡斯帕

*   注意：我尝试过使用`nginx_tcp_proxy_module`不是很广泛的。我考虑过使用`Varnish`它，因为它能够做我想做的事，[基于 url 直接管道到 node-js](https://serverfault.com/a/371008)（作者 btw 的优秀博客文章，非常值得一读），但是我正在运行一个 https 服务器（实际上是两个）所以我不确定是否`Varnish`可以这样做（`https`不支持，所以我必须包装它，但是有两个域（证书）这是不可能的）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2016-05-28T05:19:21.807

当前的[文档](http://nginx.org/en/docs/http/ngx_http_proxy_module.html#proxy_buffering)明确说明该`proxy_buffering`指令仅影响*响应*而不是请求的缓冲。

> 启用或禁用来自代理服务器的响应缓冲。

缓冲 POST 请求所需的指令是恰当命名的`proxy_request_buffering`. 同样，来自[当前文档](http://nginx.org/en/docs/http/ngx_http_proxy_module.html#proxy_request_buffering)：

> 启用或禁用客户端请求正文的缓冲。

（对于 Casper 来说，值得注意的是该`proxy_request_buffering`指令是在 nginx 版本 1.7.11 中添加的，在提出这个问题[几年后发布。）](http://nginx.org/2015.html)

# c - 将函数分配给C中的函数字段

> ID：10056217
> 
> 赞同：0
> 
> 时间：2012-04-07T16:28:51.470
> 
> 标签：c, struct, segmentation-fault

我正在尝试将函数分配给变量字段，但出现分段错误。这是代码：

```
typedef struct node{
    int info;
    struct node *link;
    void* (*make) (int x);
}node;

void* make_node(int x)
{
    node* new_node = (node*)malloc(sizeof(node));
    new_node->info = x;
    new_node->link = NULL;
    return new_node;
}

int main(){
  struct node *n;
  n->make = make_node;
  return 0;
} 
```

有什么问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-07T17:30:42.880

您进入 main() 的 n 变量未初始化。make_node() 函数将为节点结构保留空间，那么为什么不在 main() 中调用它呢？你可以试试下面的代码。

```
typedef struct {
    int info;
    struct node *link;
    void* (*make) (int x);
} node;

void *make_node(int x)
{
    node* new_node = malloc(sizeof(node));
    new_node->info = x;
    new_node->link = NULL;
    return new_node;
}

int main() {
  struct node *n;
  n = make_node(1);

  free (n);
  return 0;
} 
```

ps 避免强制转换 malloc 返回

当您在节点内使用 struct node *link 时，ps2 请注意同样的问题

ps3 记得释放（）未使用的 malloc（）ed 变量。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-07T16:36:41.053

您需要为堆上的节点分配一些空间，或者只使用结构的普通变量而不是指针。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-07T16:32:15.337

您忘记为 n 赋值。

1.  将 make_node 的返回类型更改为 node*
2.  做 n=make_node(x)

我强烈建议您阅读[http://www.amazon.com/gp/aw/d/0131103628/ref=redir_mdp_mobile](https://rads.stackoverflow.com/amzn/click/com/0131103628) 这将是您现在可以做的最好的事情。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-07T17:10:13.527

`n`您可以通过以下方式在堆栈上分配空间：

```
int main() {
  struct node n;
  n.make = make_node;
  return 0;
} 
```

否则，您必须将其分配在堆上，可能作为全局变量或使用`malloc()`.

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-07T18:58:33.430

使用现有的基础架构，您可以编写：

```
typedef struct node
{
    int            info;
    struct node   *link;
    void        *(*make)(int x);
} node;

void *make_node(int x)
{
    node* new_node = (node*)malloc(sizeof(node));
    new_node->info = x;
    new_node->link = NULL;
    new_node->make = make_node;
    return new_node;
}

int main(void)
{
    struct node *n = make_node(1);
    ...use the newly allocated node...
    return 0;
} 
```

这会在您尝试写入之前分配节点。它还通过将每个字段设置为已知值来完全初始化节点。如果您需要`make`成员的不同函数指针，您可以在之后进行调整。

# jquery - 不能让 JCarousel 工作

> ID：10056219
> 
> 赞同：1
> 
> 时间：2012-04-07T16:29:10.893
> 
> 标签：jquery, jcarousel, jcarousellite

我需要使用“Jcarousel”插件或“Jcarousel lite”，但他们从不与我合作，不知道为什么以及我做错了什么！这是我的实现， [http:](http://uluva.com/carousel/) //uluva.com/carousel/ 在此先感谢。

JavaScript：

```
<script>
$(document).ready(function() {
    $('#mycarousel').jcarousel({
        vertical: true,
        scroll: 2
    });
});
</script> 
```

HTML：

```
<div id="sliders">
    <ul id="mycarousel" class="jcarousel jcarousel-skin-ie7">
        <li><img src="thumb.jpg" alt="" width="70" height="70" ></li>
        <li><img src="thumb.jpg" alt="" width="70" height="70" ></li>
        <li><img src="thumb2.jpg" alt="" width="70" height="70" ></li>
        <li><img src="thumb2.jpg" alt="" width="70" height="70" ></li>
        <li><img src="thumb2.jpg" alt="" width="70" height="70" ></li>
        <li><img src="thumb2.jpg" alt="" width="70" height="70" ></li>
    </ul>
</div> 
```

# c - C编程中的rand（）问题？

> ID：10056221
> 
> 赞同：2
> 
> 时间：2012-04-07T16:29:27.197
> 
> 标签：c, random, compilation

> **可能重复：**
> [为什么我总是用 rand() 得到相同的随机数序列？](https://stackoverflow.com/questions/1108780/why-do-i-always-get-the-same-sequence-of-random-numbers-with-rand)

所以，是的，这可能看起来有点无聊，但由于我在 Java 变得通情达理后自学 C 语言，所以我已经遇到了一些麻烦。我正在尝试在 C 中使用 rand() 函数，但我只能调用一次，当它调用时，它总是生成相同的随机数，即 41。我使用的是 Microsoft Visual C++ 2010 Express，并且我已经设置好了它可以编译 C 代码，但唯一不起作用的是这个 rand() 函数。我试过包括一些常用的库，但没有任何效果。这是代码：

```
#include "stdafx.h"
#include "stdio.h"
#include "conio.h"
#include "stdlib.h"

int main(void)
{
    printf("%d", rand()); //Always prints 41

    return 0;
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-07T16:32:15.727

这是因为`rand()`它总是从执行开始时的同一点初始化其伪随机序列。

您必须在使用之前输入一个真正随机的种子才能`rand()`获得不同的值。这可以通过函数来​​完成，该函数`srand`将根据传递的种子移动序列。

尝试：

```
srand(clock());   /* seconds since program start */
srand(time(NULL));   /* seconds since 1 Jan 1970 */ 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-07T16:31:39.760

你必须播种`rand()`。

`srand ( time(NULL) );`通常用于初始化随机种子。除此以外，

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-07T16:31:49.550

在调用 rand() 之前，您需要一个种子。尝试调用“ `srand (time (NULL))`”

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-04-07T16:33:43.687

您必须首先使用 srand() 初始化随机种子。

```
#include "stdafx.h"
#include "stdio.h"
#include "conio.h"
#include "stdlib.h"

int main(void)
{
    srand(time(NULL)); // Initialise the random seed.
    printf("%d", rand());
    return 0;
} 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-04-07T16:41:23.890

`rand()`给出一个随机值，但您需要先播种它。问题是，如果您使用相同的种子多次（可能）执行您的代码`srand(time(NULL))`，那么`rand()`; 将始终给出相同的值。

然后，第二个选项是执行，正如 Thiruvalluvar 所说，`srand(time(NULL))`然后`rand()`.

上面的一个会给你1000个随机数。尝试执行这段代码，看看会发生什么：

```
srand (time(NULL));
for (int i=0; i<1000; i++)
    {
    printf ("Random number: %d\n", rand());
    } 
```

希望能帮助到你！

# android - Google Play 上的沙盒模式？

> ID：10056223
> 
> 赞同：1
> 
> 时间：2012-04-07T16:29:48.973
> 
> 标签：android, mobile, google-play, admob

我想做将我的应用程序“发布”到 Google Play（android 市场）的过程，
我的应用程序尚未准备好，但 AdMob 要求它进行注册。

所以，我还不想发布我的应用程序，尽管我想在我的应用程序中结合 AdMob
有没有办法在不真正发布您的应用程序的情况下注册到 google play？
或者，在未注册 Google Play 的情况下使用 adMob SDK？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-09T16:25:03.523

AdMob 注册的包字段是**可选**的。您可以将该字段留空，稍后在准备发布应用程序时填写。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-09T08:25:48.790

您可以将您的应用程序添加到 Google Play，并且有功能 Publish 或 Unpublish。如果您想添加但不发布应用程序。当您的应用程序准备就绪时，添加为其他版本的应用程序。

# wordpress - 可以在 wordpress 中为我的 nextgen Gallery 分配类别吗？

> ID：10056229
> 
> 赞同：0
> 
> 时间：2012-04-07T16:30:27.727
> 
> 标签：wordpress, nextgen-gallery

我想向我的画廊添加类别，以便在侧边栏小部件中列出我的类别，然后单击该类别将显示该类别下的所有画廊。这可能吗？如果不是nextgen，那么还有其他什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-22T07:03:23.450

在 NextGen 中，您可以创建不同的并在小部件中调用它们，将出现一个下拉列表并从中选择任何类别并切换到该类别...

# sql-server - 为通用 crm 软件设计具有自定义字段的数据模型的推荐方法是什么？

> ID：10056231
> 
> 赞同：1
> 
> 时间：2012-04-07T16:30:41.830
> 
> 标签：sql-server, entity-framework, database-design, ef-code-first, entity-attribute-value

我想使用 SQL Server 2008 开发一个通用的 CRM 应用程序。

应用程序必须使用一些扩展技术启用自定义用户字段。

我阅读了很多关于不同选项的信息，例如：

*   可观察模式，以及
*   实体属性值 (EAV)

但不幸的是，这些选项很难实现，我知道应用程序性能会受到影响，而且使用 Entity Framework Code First 来查询存储库也很困难。

我将不胜感激其他一些简单的选项来实现。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-07T16:44:47.657

大多数时候，像这样的包扩展系统用于将用户定义的列添加到现有表中。

您可以允许用户定义他们自己的表，这些表放置在他们自己的（隔离的）模式中。管理此扩展过程的管理 UI 将需要运行构建这些用户定义表所需的 DDL 代码。如果它们被定义为预定义表的扩展，您的系统应在其扩展的预定义表和用户定义表之间强制执行 1:1 关系。如果需要，您还可以允许独立的用户定义表。

创建用户定义表后，使用（预定义）映射表将用户定义表/列连接到 CRM UI 中的预定义字段。如果您还允许用户定义 UI 表单和字段，那么您的映射表也可以/而不是与这些相关联。

# .net - .NET 中由于事件处理程序导致的内存泄漏示例？

> ID：10056232
> 
> 赞同：6
> 
> 时间：2012-04-07T16:30:46.323
> 
> 标签：.net, events, memory, memory-leaks, event-handling

人们不断地谈论由于未释放的事件侦听器而发生的内存泄漏。我认为这是一个非常重要的问题。非常严肃，非常重要……如果它真的存在的话。

我已经尝试自己重现这个问题，但我所有的尝试都失败了：我就是不能让我的应用程序泄漏内存:(虽然听起来不错，但我仍然担心：也许我错过了一些东西。

那么也许有人可以提供一个非常简单的导致内存泄漏的源代码示例？

我创建了一个小型 VB.NET 应用程序作为演示：它包含一个 Windows 窗体和一个类。

Windows 窗体：它有一个集合对象（名为“c”）和两个按钮：一个用于将 10 个项目添加到集合中，另一个用于清除集合：

```
Public Class Form1

Dim c As New Collection

Private Sub btnAddItem_Click(sender As System.Object, e As System.EventArgs) Handles btnAddItem.Click
    For i As Integer = 1 To 10
        Dim m As New MyType
        c.Add(m)
    Next

    Me.Text = c.Count
End Sub

Private Sub btnClear_Click(sender As System.Object, e As System.EventArgs) Handles btnClear.Click
    For Each item As MyType In c
        item.Dispose()
    Next
    c.Clear()

    Me.Text = c.Count
End Sub
End Class 
```

MyType 类：它有很大的 m_Image 对象，它很大，所以你可以看到你的内存真的被 MyType 实例占用了:)

```
Imports System.Drawing

Public Class MyType 
Implements IDisposable

Private m_Image As Bitmap

Public Sub New()
    AddHandler Application.Idle, AddressOf Application_Idle

    m_Image = New Bitmap(1024, 1024)
End Sub

Private Sub Application_Idle(sender As Object, e As EventArgs)

End Sub

#Region "IDisposable Support"
Private disposedValue As Boolean

Protected Overridable Sub Dispose(disposing As Boolean)
    If Not Me.disposedValue Then
        If disposing Then
            m_Image.Dispose()
        End If
    End If
    Me.disposedValue = True
End Sub

Public Sub Dispose() Implements IDisposable.Dispose
    Dispose(True)
    GC.SuppressFinalize(Me)
End Sub
#End Region

End Class 
```

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-04-07T16:34:33.590

这是一个非常直接的例子

```
class MyType
{
    public static event EventHandler ExampleEvent;

    public MyType()
    {
        ExampleEvent += (sender, e) => OnExampleEvent();
    }
    private void OnExampleEvent() { }
} 
```

的任何实例都`MyType`将订阅该`ExampleEvent`事件。此事件未附加到任何特定对象，因此它永远不会留下内存。这将在应用程序期间将所有实例保存`MyType`在内存中。

**编辑**

正如评论中所要求的，这里是一个`MyType`实例在不再使用后长时间留在内存中的演示

```
class Program
{
    static void Main(string[] args)
    {
        WeakReference weakRef = new WeakReference(new MyType());
        for (var i = 0; i < 10; i++)
        {
            GC.Collect();
            GC.WaitForPendingFinalizers();
        }

        Console.WriteLine("Still Alive: {0}", weakRef.IsAlive);
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-08T09:08:45.777

After more investigation (thanks to clues from @JaredPar), I found out that memory leak occurs when we have such conditions:

1.  Create reference REF1 to new object which has public procedure or function (for example procedure PRC1()).
2.  From any place in your code add event handler: link any event (for example EVNT1) to PRC1 procedure in REF1 object.
3.  Remove REF1 (set it to null or Nothing in VB). From this moment you have no references to the object you have created in step 1.
4.  However object stays in memory, since it is logical: it possesses a code (PRC1) which is executed when event fires (EVNT1).

While I don't give you any advice how to free your memory in such situation, I hope this description will help you design better architecture and avoid memory leaks.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-04T22:17:11.830

事件成为内存（和 CPU 时间！）泄漏的最常见模式发生在对象向另一个对象请求通知某事发生时，以便它可以更新一些仅对短期对象感兴趣的信息。如果事件订阅继续存在，即使曾经关心它的所有对象都被放弃了，只要做通知的对象继续存在，就会浪费内存，并且每次对象执行通知都会浪费CPU时间. 如果可以创建和放弃无限数量的此类事件订阅，它们将构成无限内存泄漏。

# php - jQuery .load 和 PHP 会话开始

> ID：10056233
> 
> 赞同：1
> 
> 时间：2012-04-07T16:30:58.033
> 
> 标签：php, jquery, session, load

我目前正在使用 PHP 和 jQuery 开发游戏，有时我需要使用 jQuery 中的 .load() 将 PHP 页面加载到 div 中。该页面将根据他们的登录信息、帐户 id 等加载一些玩家信息，并存储在 内部的数组中`$_SESSION["arrayname"]`。

它在所有网站上都能完美运行，除了那些使用 jQuery load() 的网站。在easyphp上，我没有收到任何错误，但在我的网络主机服务器上，我得到了这个：

> 警告：session_start() [function.session-start]：无法发送会话缓存限制器 - 第 6 行的 fr/game/map.php 中的标头已发送（输出开始于 /fr/game/map.php:1）

**这是我的代码：**

```
<?php
 require_once("../../connectionRO.inc.php");

//used to check if we see the array in session, and i dont when i load it with jquery
if(!ISSET($_SESSION["comptejeu"])) 
{
    require_once('../../classInfoCompte.php');
    session_start(); 
    require_once('../../lg.php');
    require_once("./glg.php");
}

$ic = new infoCompte;
    $ic = $_SESSION["comptejeu"];   
?> 
```

我知道在这一点上，很多东西在加载之前已经输出到页面。谁能指出一种更好的方法来从该数组中检索我需要的信息以从我的类中构建我的对象？

谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-07T16:36:07.573

由于您收到此错误`output started at /fr/game/map.php:1`（注意：第**1**行），因此我会`<?php`在`/fr/game/map.php`.

确保开头`<`是文件中**的第一个**字符。如果您的文件是 UTF-8，请确保它是**没有**BOM 的 UTF-8，或者将其转换为 ASCII。

错误的：

```
<?php

```

对：

```
<?php 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-07T16:38:35.617

您的 PHP 文件中有一些空白，classInfoCompute.php 中有一些空白，或者有一个函数/方法调用触发了此文件或 classInfoCompute 文件中的输出。会话依赖于 cookie，而 cookie 依赖于 HTTP 标头。输出内容后，标头已发送，您无法发送新标头。

Stack Overflow 上有很多问题和答案都涵盖了这个问题，但归结为要么将问题扫到地毯下（使用输出缓冲），要么正确修复它（通过在调用之前找到导致内容输出的原因） session_start 并删除它或将其移到脚本的后面，或者将 session_start 移到脚本的前面）。

如果您的脚本混合了 HTML 和 PHP，请确保 session_start 出现在 HTML 的第一位之前。否则，您将不得不四处寻找空白。如果文件保存为 UTF-8，那么您的文本编辑器可能已将不必要的字节顺序标记 (BOM) 附加到文件的开头。确保您的文件在没有 BOM 的情况下保存，因为它将被视为内容并触发输出到客户端（并在输出的开头放置一个奇怪的字符）。

# tomcat - NoClassDefFoundError (Digester) 与 Tomcat 和 MyFaces

> ID：10056234
> 
> 赞同：1
> 
> 时间：2012-04-07T16:31:01.353
> 
> 标签：tomcat, jsf, myfaces

我很好地将 Tomcat 与 Eclipse 一起使用。现在我无法启动服务器。尝试启动时出现以下异常。事情进展顺利。我不知道有什么改变，但显然有什么改变了。

```
Apr 7, 2012 12:28:29 PM org.apache.catalina.core.StandardContext listenerStart
SEVERE: Exception sending context initialized event to listener instance of class org.apache.myfaces.webapp.StartupServletContextListener
java.lang.NoClassDefFoundError: org/apache/commons/digester/Digester
    at org.apache.myfaces.config.impl.digester.DigesterFacesConfigUnmarshallerImpl.<init>(DigesterFacesConfigUnmarshallerImpl.java:42)
    at org.apache.myfaces.config.FacesConfigurator.getUnmarshaller(FacesConfigurator.java:262)
    at org.apache.myfaces.config.FacesConfigurator.feedStandardConfig(FacesConfigurator.java:566)
    at org.apache.myfaces.config.FacesConfigurator.configure(FacesConfigurator.java:487)
    at org.apache.myfaces.webapp.AbstractFacesInitializer.buildConfiguration(AbstractFacesInitializer.java:296)
    at org.apache.myfaces.webapp.Jsp21FacesInitializer.initContainerIntegration(Jsp21FacesInitializer.java:73)
    at org.apache.myfaces.webapp.AbstractFacesInitializer.initFaces(AbstractFacesInitializer.java:118)
    at org.apache.myfaces.webapp.StartupServletContextListener.contextInitialized(StartupServletContextListener.java:111)
    at org.apache.catalina.core.StandardContext.listenerStart(StandardContext.java:4779)
    at org.apache.catalina.core.StandardContext.startInternal(StandardContext.java:5273)
    at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:150)
    at org.apache.catalina.core.ContainerBase$StartChild.call(ContainerBase.java:1566)
    at org.apache.catalina.core.ContainerBase$StartChild.call(ContainerBase.java:1556)
    at java.util.concurrent.FutureTask$Sync.innerRun(Unknown Source)
    at java.util.concurrent.FutureTask.run(Unknown Source)
    at java.util.concurrent.ThreadPoolExecutor$Worker.runTask(Unknown Source)
    at java.util.concurrent.ThreadPoolExecutor$Worker.run(Unknown Source)
    at java.lang.Thread.run(Unknown Source)
Caused by: java.lang.ClassNotFoundException: org.apache.commons.digester.Digester
    at org.apache.catalina.loader.WebappClassLoader.loadClass(WebappClassLoader.java:1711)
    at org.apache.catalina.loader.WebappClassLoader.loadClass(WebappClassLoader.java:1556)
    ... 18 more
Apr 7, 2012 12:28:29 PM org.apache.catalina.core.StandardContext startInternal
SEVERE: Error listenerStart
Apr 7, 2012 12:28:29 PM org.apache.catalina.core.StandardContext startInternal
SEVERE: Context [/webApp_appNameT] startup failed due to previous errors
Apr 7, 2012 12:28:29 PM org.apache.catalina.core.StandardContext listenerStop
SEVERE: Exception sending context destroyed event to listener instance of class org.apache.myfaces.webapp.StartupServletContextListener
java.lang.IllegalStateException: No Factories configured for this Application. This happens if the faces-initialization does not work at all - make sure that you properly include all configuration settings necessary for a basic faces application and that all the necessary libs are included. Also check the logging output of your web application and your container for any exceptions!
If you did that and find nothing, the mistake might be due to the fact that you use some special web-containers which do not support registering context-listeners via TLD files and a context listener is not setup in your web.xml.
A typical config looks like this;
<listener>
  <listener-class>org.apache.myfaces.webapp.StartupServletContextListener</listener-class>
</listener>

    at javax.faces.FactoryFinder.getFactory(FactoryFinder.java:172)
    at org.apache.myfaces.context.servlet.FacesContextImplBase.getApplication(FacesContextImplBase.java:131)
    at org.apache.myfaces.webapp.AbstractFacesInitializer._dispatchApplicationEvent(AbstractFacesInitializer.java:239)
    at org.apache.myfaces.webapp.AbstractFacesInitializer.destroyFaces(AbstractFacesInitializer.java:273)
    at org.apache.myfaces.webapp.StartupServletContextListener.contextDestroyed(StartupServletContextListener.java:153)
    at org.apache.catalina.core.StandardContext.listenerStop(StandardContext.java:4819)
    at org.apache.catalina.core.StandardContext.stopInternal(StandardContext.java:5466)
    at org.apache.catalina.util.LifecycleBase.stop(LifecycleBase.java:232)
    at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:160)
    at org.apache.catalina.core.ContainerBase$StartChild.call(ContainerBase.java:1566)
    at org.apache.catalina.core.ContainerBase$StartChild.call(ContainerBase.java:1556)
    at java.util.concurrent.FutureTask$Sync.innerRun(Unknown Source)
    at java.util.concurrent.FutureTask.run(Unknown Source)
    at java.util.concurrent.ThreadPoolExecutor$Worker.runTask(Unknown Source)
    at java.util.concurrent.ThreadPoolExecutor$Worker.run(Unknown Source)
    at java.lang.Thread.run(Unknown Source)
Apr 7, 2012 12:28:29 PM org.apache.catalina.loader.WebappClassLoader checkThreadLocalMapForLeaks
SEVERE: The web application [/webApp_appNameT] created a ThreadLocal with key of type [java.lang.ThreadLocal] (value [java.lang.ThreadLocal@1d98a]) and a value of type [org.apache.myfaces.config.RuntimeConfig] (value [org.apache.myfaces.config.RuntimeConfig@1712651]) but failed to remove it when the web application was stopped. Threads are going to be renewed over time to try and avoid a probable memory leak.
Apr 7, 2012 12:28:29 PM org.apache.catalina.loader.WebappClassLoader checkThreadLocalMapForLeaks
SEVERE: The web application [/webApp_appNameT] created a ThreadLocal with key of type [java.lang.ThreadLocal] (value [java.lang.ThreadLocal@18aab40]) and a value of type [org.apache.myfaces.context.servlet.StartupFacesContextImpl] (value [org.apache.myfaces.context.servlet.StartupFacesContextImpl@f102d3]) but failed to remove it when the web application was stopped. Threads are going to be renewed over time to try and avoid a probable memory leak.
Apr 7, 2012 12:28:29 PM org.apache.catalina.loader.WebappClassLoader checkThreadLocalMapForLeaks
SEVERE: The web application [/webApp_appNameT] created a ThreadLocal with key of type [java.lang.ThreadLocal] (value [java.lang.ThreadLocal@f07355]) and a value of type [org.apache.myfaces.context.servlet.StartupFacesContextImpl] (value [org.apache.myfaces.context.servlet.StartupFacesContextImpl@23f1bb]) but failed to remove it when the web application was stopped. Threads are going to be renewed over time to try and avoid a probable memory leak.
Apr 7, 2012 12:28:29 PM org.apache.coyote.AbstractProtocol start
INFO: Starting ProtocolHandler ["http-bio-8080"]
Apr 7, 2012 12:28:29 PM org.apache.coyote.AbstractProtocol start
INFO: Starting ProtocolHandler ["ajp-bio-8009"]
Apr 7, 2012 12:28:29 PM org.apache.catalina.startup.Catalina start
INFO: Server startup in 1756 ms 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-20T13:54:10.713

我有同样的问题。Eclipse 中的 Webapp 和 Tomcat 运行良好，然后 Eclipse 冻结；我不得不用 TaskManager 杀死它。但是，当我重新启动 tomcat 时，出现了上面的错误 java.lang.NoClassDefFoundError: org/apache/commons/digester/Digester。

这没有意义，因为 webapp 之前运行良好。我通过*清理 eclipse tomcat webapp 目录*解决了这个问题。

1.  转到 Servers 选项卡 -> 右键单击​​您的 webapp -> Clean Module 目录。
2.  转到服务器选项卡 -> 右键单击​​使用的 Tomcat 实例 -> 清理...

之后错误消失了，webapp 又像以前一样运行了。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-07T16:34:38.007

```
Caused by: java.lang.ClassNotFoundException: org.apache.commons.digester.Digester 
```

这只是告诉您运行时类路径中缺少提到的类。正如包名所暗示的，它是 Apache Commons Digester，可在[http://commons.apache.org/digester 获得](http://commons.apache.org/digester)。如果您下载 JAR 文件并将其放在 webapp 的运行时类路径所涵盖的路径之一中，例如`/WEB-INF/lib`，那么这个问题应该会消失。

# android - 为 Android 上的相机应用程序拦截 onActivityResult()

> ID：10056235
> 
> 赞同：0
> 
> 时间：2012-04-07T16:31:07.023
> 
> 标签：android, android-intent, null, camera

在我的应用程序中，我试图让用户可以按下一个按钮，这将允许他们使用手机上的相机应用程序拍照。

我正在按照 Android 开发人员指南 (http://developer.android.com/guide/topics/media/camera.html#intent-收到）

我在使用 onActivityResult() 方法时遇到问题，它显然需要 3 个参数

```
@Override
protected void onActivityResult(int requestCode, int resultCode, Intent data) {
    if(requestCode == CAPTURE_IMAGE_ACTIVITY_REQUEST_CODE) {
        if(resultCode == RESULT_OK) {
            Log.w("borre","Image saved to:\n" + data.getData());
        } else if (resultCode == RESULT_CANCELED) {
            // User cancelled the image capture
        } else {
            // Image capture failed, advise user
        }
    }
} 
```

但目前，数据 Intent 以 null 形式返回，因此在 Intent 参数上调用任何方法都会引发 NullPointerException

这是我用来调用相机应用程序的代码（它与指南中的代码基本相同）

```
Intent intent = new Intent(MediaStore.ACTION_IMAGE_CAPTURE);

Uri fileUri = getOutputMediaFileUri(MEDIA_TYPE_IMAGE);
intent.putExtra(MediaStore.EXTRA_OUTPUT, fileUri);

startActivityForResult(intent, CAPTURE_IMAGE_ACTIVITY_REQUEST_CODE); 
```

有没有人遇到过这个问题或知道为什么这个 Intent 会返回为空？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-07T17:03:19.550

`intent.setDataAndType()`当您启动 Acitivty.like 时，您正在获取数据部分 null bez 您没有设置

```
 public static final String IMAGE_UNSPECIFIED = "image/*"; 
    Intent intent = new Intent(Intent.ACTION_PICK, null);  
    intent.setDataAndType(MediaStore.Images.Media.EXTERNAL_CONTENT_URI, IMAGE_UNSPECIFIED);  
    startActivityForResult(intent, 3);  

    protected void onActivityResult(int requestCode, int resultCode, Intent data) { 
    if (resultCode == 0)  
       return; 
    if (requestCode == 2) {  
       Uri uri=data.getData();  //YOU GET DATA HERE
        }  
//OR
if (requestCode == 3) {  
 Bundle extras = data.getExtras();  
 if (extras != null) {  
 Bitmap photo = extras.getParcelable("data");  
 ByteArrayOutputStream stream = new ByteArrayOutputStream();  
 photo.compress(Bitmap.CompressFormat.JPEG, 75, stream);// (0 - 100)????  
 imageView.setImageBitmap(photo);  
  }  
} 
```

或者在您的情况下获取图像路径使用：

```
if (requestCode == CAPTURE_IMAGE_ACTIVITY_REQUEST_CODE) {  
     //pic path
      File picture = new File(Environment.getExternalStorageDirectory() + "/temp.jpg");  
   } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-07T16:53:47.700

在类范围内声明 imageUri = null ...

使用下面的代码并尝试::

```
takephoto.setOnClickListener(new View.OnClickListener() {
    @Override
    public void onClick(View v) {
        // TODO Auto-generated method stub
        Calendar cal = Calendar.getInstance();
        File file = new File(Environment.getExternalStorageDirectory(),(cal.getTimeInMillis()+".jpg"));
        if (!file.exists()) {
            try {
                file.createNewFile();
            } catch (IOException e) {
                // TODO Auto-generated catch block
                e.printStackTrace();
            }
        } else {
            file.delete();
            try {
                file.createNewFile();
            } catch (IOException e) {
                // TODO Auto-generated catch block
                e.printStackTrace();
            }
        }
        imageUri = Uri.fromFile(file);
        Intent i = new Intent(android.provider.MediaStore.ACTION_IMAGE_CAPTURE);
        i.putExtra(MediaStore.EXTRA_OUTPUT, selectedImageUri);
        startActivityForResult(i, 0);
    }
}); 
```

这里也是 onactivityresult 方法:::

```
@Override
protected void onActivityResult(int requestCode, int resultCode, Intent data) {
    switch (requestCode) {
        case 0:
            if (resultCode == RESULT_OK) {
                try {
                    Bitmap bitmap = MediaStore.Images.Media.getBitmap(getApplicationContext().getContentResolver(), imageUri);
                    //imageVIew.setImageBitmap(bitmap);
                } catch (FileNotFoundException e) {
                    // TODO Auto-generated catch block
                    e.printStackTrace();
                } catch (IOException e) {
                    // TODO Auto-generated catch block
                    e.printStackTrace();
                }
            }
            break;
    }
} 
```

# java - java.lang.AbstractMethodError：抽象方法未实现

> ID：10056239
> 
> 赞同：0
> 
> 时间：2012-04-07T16:31:38.727
> 
> 标签：java, android, themes, logcat

我目前正在将 Android 应用程序移植到我的手机上，并且取得了不错的进展。但是，我目前有一个错误，我不知道出了什么问题：

> 06 21:05:24.301 E/AndroidRuntime(2871): java.lang.AbstractMethodError: 抽象方法未实现 04-06 21:05:24.301 E/AndroidRuntime(2871): 在 android.content.pm.PackageManager.getInstalledThemePackages(PackageManager .java) 04-06 21:05:24.301 E/AndroidRuntime(2871): at com.tmobile.thememanager.provider.ThemesProvider$VerifyInstalledThemesThread.verifyPackages(ThemesProvider.java:291) 04-06 21:05:24.301 E/AndroidRuntime (2871): 在 com.tmobile.thememanager.provider.ThemesProvider$VerifyInstalledThemesThread.run(ThemesProvider.java:230)

顺便说一下，这是从 logcat 中获取的。

这是该 Java 文件的代码：[单击我](https://github.com/tmobile/themes-platform-vendor-tmobile-providers-ThemeManager/blob/master/src/com/tmobile/thememanager/provider/ThemesProvider.java)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-07T16:51:27.980

您可能正在使您的代码与旧版本的 Android API 兼容，而现在最新版本有额外的方法需要实现才能在最新版本中运行。

我不确定这是否是您的问题，但假设这是正在发生的事情，您可以加载基于 SDK 版本的类，如 Stack Overflow 的另一篇文章所述：[android 兼容性问题](https://stackoverflow.com/questions/5822672/android-compability-problem)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-02-01T07:58:20.770

*使用改造*和*OKHttp*时我遇到了类似的问题。就我而言，我必须更改以下内容：

*   编译'com.squareup.okhttp3:okhttp:3.0.0-RC1'
*   编译 'com.squareup.okhttp3:logging-interceptor: **3.3.1** '

至：

*   编译'com.squareup.okhttp3:okhttp:3.0.0-RC1'
*   编译 'com.squareup.okhttp3:logging-interceptor: **3.0.0-RC1** '

它帮助我避免了错误。

# c# - 客户端 GET 请求不返回任何内容？

> ID：10056247
> 
> 赞同：2
> 
> 时间：2012-04-07T16:32:35.250
> 
> 标签：c#, wcf, web-services, rest

我认为我的 GET 方法出了点问题，因为当我尝试运行一段客户端代码时，我没有得到任何返回。

我的 GET 操作合约如下所示：

```
 [OperationContract] 
    [WebInvoke(Method = "GET", 
    BodyStyle = WebMessageBodyStyle.Bare, 
    RequestFormat = WebMessageFormat.Xml, 
    ResponseFormat = WebMessageFormat.Xml, 
    UriTemplate = "/Group/{TagName}")]
    List<Group> GetGroupsCollection(string TagName);

    public List<Group> GetGroupsCollection(string TagNames)
    {
        List<Group> groups = (from g in Groups 
                where
                    (from t in g.Tags where t.TagName == TagNames select t).Count() > 0
                select g).ToList();
    return groups;
    } 
```

现在我没有任何数据来测试它，所以我必须从客户端手动添加组和标签，**然后**我尝试将标签添加到组中，我这样做是这样的：

```
 [OperationContract]
    [WebInvoke(Method = "POST", BodyStyle = WebMessageBodyStyle.Bare, RequestFormat = WebMessageFormat.Xml, ResponseFormat = WebMessageFormat.Xml, UriTemplate = "/AddTagtoGroup/{group}/{tag}")]
    void AddTagtoGroup(string group, string tag);

    public void AddTagtoGroup(string group, string tag)
    {
        var result = Groups.Where(n => String.Equals(n.GroupName, tag)).FirstOrDefault();
        if (result != null)
        {
            result.Tags.Add(new Tag() { TagName = tag });
        }
    } 
```

从客户端这是这样完成的：

```
 private void AddTagetoGroup_Click(object sender, EventArgs e)
    {
        string uriAddTagtoGroup = string.Format("http://localhost:8000/Service/AddTagtoGroup/{0}/{1}", textBox6.Text, textBox7.Text);
        byte[] arr = Encoding.UTF8.GetBytes(uriAddTagtoGroup);
        HttpWebRequest req = (HttpWebRequest)WebRequest.Create(uriAddTagtoGroup);
        req.Method = "POST";
        req.ContentType = "application/xml";
        req.ContentLength = arr.Length;
        Stream reqStrm = req.GetRequestStream();
        reqStrm.Write(arr, 0, arr.Length);
        reqStrm.Close();
        HttpWebResponse resp = (HttpWebResponse)req.GetResponse();
        MessageBox.Show(resp.StatusDescription);
        reqStrm.Close();
        resp.Close();
    } 
```

我得到的消息是好的，一切似乎都很好。

现在我遇到问题的客户端代码是这样的：

```
 string uriGetGroupsCollection = "http://localhost:8000/Service/GetGroupsCollection/{TagName}";
    private void button8_Click(object sender, EventArgs e)
    {
        string tagUri = uriGetGroupsCollection.Replace("{TagName}", textBox8.Text);

        XDocument xDoc = XDocument.Load(tagUri); //this line gives 404 error not found.
        var Tag = xDoc.Descendants("Group")
            .Select(n => new
            {
                Tag = n.Element("GroupName").Value,
            })
            .ToList();
        dataGridView3.DataSource = Tag;
    } 
```

这与我首先提到的 GET 操作有关。所以我不确定如何找出它的客户端代码做错了什么还是我的实际`GetGroupsCollection`方法？

所以我的问题与向组添加标签有关：

```
 public void AddTagtoGroup(string group, string tag)
    {
        var result = Groups.Where(n => String.Equals(n.GroupName, tag)).FirstOrDefault();
        if (result != null)
        {
            result.Tags.Add(new Tag() { TagName = tag });
        }
    } 
```

或者它与客户端代码有关`GetGroupsCollection`？

我更新了我的问题以反映我之前遇到的小错误，哪个 surfen 解决了（404 错误），但这并没有解决我没有得到任何东西的问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-07T17:17:50.240

我认为您的网址有误：

```
string uriGetGroupsCollection = "http://localhost:8000/Service/GetGroupsCollection/{TagName}"; 
```

因为您像这样定义了 URITemplate：`"/Group/{TagName}"`

```
[OperationContract] 
[WebInvoke(Method = "GET", 
BodyStyle = WebMessageBodyStyle.Bare, 
RequestFormat = WebMessageFormat.Xml, 
ResponseFormat = WebMessageFormat.Xml, 
UriTemplate = "/Group/{TagName}")]
List<Group> GetGroupsCollection(string TagName); 
```

因此，您在客户端中的 URL 应如下所示：

```
string uriGetGroupsCollection = "http://localhost:8000/Service/Group/{TagName}"; 
```

**或**将您的 URITemplate 更改为：

```
UriTemplate = "/GetGroupsCollection/{TagName}")] 
```

**更新**

你`AddTagtoGroup`还有一个错字。

```
 var result = Groups.Where(n => String.Equals(n.GroupName, tag)).FirstOrDefault(); 
```

应该：

```
 var result = Groups.Where(n => String.Equals(n.GroupName, group)).FirstOrDefault(); 
```

# ios - 获取加速度计数据并将其发送到 Mac

> ID：10056250
> 
> 赞同：-3
> 
> 时间：2012-04-07T16:33:08.397
> 
> 标签：ios, macos, networking, accelerometer

我需要将数据从加速度计（从我的 iPhone）发送到 Mac。我需要一种将这些数据发送到 Mac 的方法。

数据应实时发送。不应有任何延误。将数据发送到 Mac 的最佳方法是什么。

1.) 是通过蓝牙还是通过网络？

2.）我需要知道是否有任何教程/示例代码来获取加速度计。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-07T16:40:13.213

iPhone 上的蓝牙仅允许使用 GameKit 框架与其他 iPhone 连接 wifi 和点对点游戏。

而且，如果您尝试通过服务器进行操作，那么我认为无论如何它都不会是实时的..（如果您尝试使用加速度计控制某些东西，则延迟会很明显。）

这个问题的答案是我能找到的最好的答案...... [Mac 应用程序和 iOS 应用程序之间的蓝牙/WiFi](https://stackoverflow.com/questions/7982340/bluetooth-wifi-between-mac-app-and-ios-app)

希望这对您有所帮助..如果我发现其他内容会在此处更新。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-07T16:52:01.493

对于#1，您的接近程度将决定您的选择。如果您可以保证 iPhone 将在蓝牙范围内，那么您可能会使用蓝牙。如果你的 Mac 有一个固定的 IP 地址，那么你可以使用网络。如果要求实时，那么它可能需要蓝牙。

对于 #2，iOS 文档将 UIAccelerometer 类的示例代码列出为：AccelerometerGraph、BubbleLevel、GLGravity 和 oalTouch。

# javascript - 为什么我的 JavaScript 函数“a”没有定义？

> ID：10056253
> 
> 赞同：5
> 
> 时间：2012-04-07T16:33:32.337
> 
> 标签：javascript

当我调用我的 JavaScript 函数 B 时，Firefox 中的 JavaScript 控制台说函数 A 未定义，但在 Chrome 浏览器上已定义。当我在正文段中调用函数“A”时：

```
<input type="button" onclick="A()" value=" ..A.. "> 
```

Firefox 表示未定义函数 B。为什么？

```
<html>
    <head>
        <script language="javascript" type="text/javascript">
            function B() {
                alert(" hi B ");
                document.write('<br><br><input type="button" onClick="A()" value=" ..A..">');
            };

            function A() {
                alert(" hi A");
                document.write('<br><br><input type="button" onclick="B()" value=" ..b..">');
                if (window.WebCL == undefined) {
                    alert("Unfortunately your system does not support WebCL. ");
                    return false;
                }
            }
        </script>
    </head>
    <body>
        <input type="button" onclick="B()" value=" ..B.. ">
    </body>
</html> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-07T17:22:46.757

第一次写入清除文档内容，导致函数A未定义

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-07T17:26:03.253

问题是您`document.write`在页面加载后调用，这有效地清除了页面的现有内容，包括嵌入的脚本。您应该改用[DOM 操作方法](http://www.howtocreate.co.uk/tutorials/javascript/dombasics)。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-07T18:03:22.593

试试这个：

```
<html>
<head>
<script language="javascript" type="text/javascript">

var  A = function() {
   alert(" hi A");
   document.write('<br><br><input type="button" onclick="B()" value=" ..b..">');
   if (window.WebCL == undefined) {
     alert("Unfortunately your system does not support WebCL. ");
     return false;
   }
 }  

 function B(){
   alert(" hi B ");     
   document.body.innerHTML = ('<br><br><input type="button" onClick="new A()" value=" ..A..">'); 
 }

    </script>
    </head>

<body>
   <input type="button" onclick="B()" value=" ..B.. ">
</body>

</html> 
```

# ruby - Ruby - 字符串操作

> ID：10056254
> 
> 赞同：1
> 
> 时间：2012-04-07T16:33:39.847
> 
> 标签：ruby, string

我有这个简单的帮手：

```
def printe_result(data)
  a_var = ('<a href="http://'+data.a_value+'>A</a>' unless (data.a_value.nil? || data.a_value.empty?))
  b_var = ('<a href="http://'+data.b_value+'>B</a>' unless (data.b_value.nil? || data.b_value.empty?))
  c_var = ('<a href="http://'+data.c_value+'>C</a>' unless (data.c_value.nil? || data.c_value.empty?))

  return ...
end 
```

`a_value`, `b_value`,`c_value`我从数据库中获取。如果值是字符串，我想将它们保存到相应的变量中，然后所有变量作为一个字符串返回，其中的值用逗号分隔，例如：

```
"<a href=http://a>A</a>, <a href=http://b>B</a>, <a href=http://c>C</a>" 
```

只有存在变量时，如何才能合并变量？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-07T16:48:10.480

```
def printe_result(data)
  { 'A' => data.a_value, 'B' => data.b_value, 'C' => data.c_value }.map do |name, val|
    "<a href='http://#{val}'>#{name}</a>" unless val.blank?
  end.compact.join(',')
end 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-07T16:45:00.783

就像是

```
 [[a_value,'A'],[b_value,'B'],[c_value,'C']].select {|(value, label)| !value.blank?}.
    map {|(value, label)| %q[<a href="http://#{value}">#{label}</a>]}.join(',') 
```

应该做到这一点：使用 select 消除带有空白标签的对， map 将标签转换为所需的文本，并 join 将字符串连接在一起。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-07T16:37:26.263

我希望我能正确回答您的问题 - 您可以使用该`defined?(variable_name)`方法检查是否已定义变量。

我希望这有帮助！

# c - C中的文件处理：无法理解输出

> ID：10056256
> 
> 赞同：-1
> 
> 时间：2012-04-07T16:33:44.193
> 
> 标签：c, file-handling

我编译了这个（gcc编译器）：

```
#include< stdio.h>

 main() {

    unsigned char ch;
    FILE *fp;
    fp=fopen("trial","r");
    while((ch=getc(fp))!=EOF)
        printf("%c",ch);
    fclose(fp);
} 
```

它给出了以下内容：

```
Warning: comparison is always true due to limited range of the data type 
```

执行时，终端上会打印出无穷无尽的字符流。（假设我在编译程序之前创建了一个名为“trial”的文件并在文件中写入了一些文本。）

请解释警告......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-07T16:37:08.370

因为 EOF 是 -1 而你`ch`是 unsigned char 这意味着 ch 永远不会变成 -1。

而是使用`int ch;`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-07T16:36:08.927

`getc()`返回一个`int`. 您正在使用该分配将其截断（并更改签名）`unsigned char`，因此它永远不会匹配`EOF`. 只需将类型更改为`ch`即可`int`。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-07T16:37:19.273

`getc`有充分的理由返回一个整数。EOF 指示符超出了普通字符的范围，否则您可能会将合法字符与 EOF 指示符混淆。但是，您将结果分配给将答案限制在`char`值范围内的字符。简而言之，您永远不会知道何时以这种方式到达文件末尾。在将其与 EOF 进行比较*后*，将“ch”设为`int`类型或将调用结果分配给`getc`类型`unsigned char`。

 ** * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-07T16:40:47.893

The `EOF` value in C is an `int` while `ch` here is a `char`. The `char` type is smaller than `int` and hence can represent less values than `int` can. `EOF` is one of the values which `char` simply can't ever represent and hence `ch` will never be equal to `EOF`.

In this scenario `getc` actually returns an `int` so it can represent `EOF`. But you are immediately shrinking it to a `char` and losing that extra information.

Here's a way to properly write this.

```
int cur;
FILE *fp;
fp=fopen("trial","r");
while((cur = getc(fp))!=EOF) {
  unsigned char ch = cur;
  printf("%c",ch);
}
fclose(fp); 
```*

# .net - MonoTouch 错误 MT2002：无法解析参考

> ID：10056259
> 
> 赞同：5
> 
> 时间：2012-04-07T16:34:02.883
> 
> 标签：.net, ios, xamarin.ios

我正在开发一个使用大量反射的 iOS/MonoTouch 项目。一切都很好，但是当我编译**Debug|iPhone**版本时，我得到了错误：

> **错误 MT2002：无法解析参考：System.Boolean System.Reflection.PropertyInfo::op_Equality(System.Reflection.PropertyInfo,System.Reflection.PropertyInfo)**

有趣的是 Release|iPhone 版本运行良好。

有什么问题？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-08T20:52:16.487

内部命名为的`==`运算符重载可在 .NET 4.0 及更高版本上使用。IOW 它在MonoTouch 附带的版本中不可用（它是 Silverlight 2.1 配置文件的超集）。`PropertyInfo``op_Equality``mscorlib.dll`

**发生的事情可能是构建Debug**时使用的预编译程序集的不同版本（相对于**Release**）。此版本使用 MonoTouch 中不可用的方法，这将导致在链接或 AOT-ing 应用程序时出错。

**解决方案：**使用 MonoTouch 附带的 mscorlib.dll 版本重新编译此程序集。这将避免对`op_Equality`（和使用`Equals`）的引用，并且构建应该可以正常工作。

# java - 两种不同子类分配的差异

> ID：10056262
> 
> 赞同：1
> 
> 时间：2012-04-07T16:34:29.237
> 
> 标签：java, allocation

Animal 是 Cat 类的父类。

```
public static void main (String[] args)
{
Animal myCat1 = new Cat;  //Allocation 1
Cat myCat2 = new Cat;    //Allocation 2
} 
```

两个分配的区别是什么？每个都是真的，不是吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-07T16:37:40.063

```
Animal myCat1 = new Cat(); 
```

这被称为`polymorphism`超类引用可以包含子类对象的地方。

阅读 Java 教程：[多态性](http://docs.oracle.com/javase/tutorial/java/IandI/polymorphism.html)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-04-07T16:38:33.237

这些都不是有效的。你需要`()`. 除此之外：

*   第一个通过其超类引用实例
*   第二个通过它的类来引用它

您可以通过任何超类引用任何对象，最多`Object`. 这就是多态性。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-07T16:44:18.330

回答您的问题：没有区别 - 在这两种情况下，“new Cat ()”都分配了 Cat 类的一个实例。两者都是正确的 - myCat1 是动物（实际上是猫），而 myCat2 是猫。

# php - 使用ajax从数据库中提取数据并保存最后一个选择

> ID：10056266
> 
> 赞同：0
> 
> 时间：2012-04-07T16:34:53.800
> 
> 标签：php, mysql, ajax, codeigniter

我`mysql`使用 ajax 每 10 秒从我的表中选择一个随机行。

问题是我想防止两次（一一）选择相同的行。我可以使用会话来保留最后选择的行 ID，但我希望它是服务器端的。

我还可以使用最后一次选择 unix 时间将更新查询发送到数据库，但我想防止服务器过载并且我关心性能......所以这个想法不是那么好。

由于您可以有更多与性能相关的经验，我想从您那里获得一些关于上述问题的想法。提前谢谢你们。

// 我已经放置了`codeigniter`标签，因为这个东西可能对这个问题很重要。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-08T11:15:10.383

我认为在服务器端的用户会话中存储最后选择的记录 id 是最好的解决方案。通过这种方式，您可以获得该用户最后选择的 ID，并将其从查询中排除。

如果您计划创建一个额外的数据库表来保存最后选择的 id，请记住，您的网站可能有多个并发访问者，因此您必须为每个访问者存储最后选择的 ID，假设 ID 不能是独一无二的。

如果每个访问者必须同时看到相同的ID，上一段的想法可能是一个可能的解决方案，甚至可以在需要查询的表中添加一个布尔字段并将其设置为当前记录的true和false对于所有其他人。您必须在查询中使用时间戳，以确保每 10 秒间隔仅返回一条与上一条不同的新唯一记录。

# coldfusion - 区分大小写的coldfusion IF 语句

> ID：10056267
> 
> 赞同：0
> 
> 时间：2012-04-07T16:34:59.190
> 
> 标签：coldfusion, case-sensitive

我现在运行一个coldfusion应用程序，登录后向数据库发送查询，查找与表单中输入的用户名和密码相同的行。

目前，它完全不区分大小写。但是，我想在密码字段中添加区分大小写的功能，以便用户必须拥有准确的密码。有没有办法在coldfusion中做一个区分大小写的IF语句？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-07T17:21:38.193

您可以 hash() 两个值并比较哈希值。

```
<cfif Hash( DBPassword ) EQ Hash( SubmittedPassword )>
      <!--- Login Code --->
 </cfif> 
```

此外，您不应该将密码作为纯文本存储在数据库中。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-04-07T17:29:16.810

如此处所述： [http ://www.irt.org/script/3018.htm](http://www.irt.org/script/3018.htm)

似乎你可以使用：

```
<cfif Compare(string1,string2) eq "0">...</cfif> 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-04-08T14:44:37.833

另外一个选项：

如果您的数据库支持区分大小写，请将您的表设置为使用区分大小写的排序规则 - 然后您的用户查找查询将对存储和提供的用户名/密码进行区分大小写的比较。然后，您不必使用 CF 进行任何查询后字符串比较（运行少 1 个进程 = 好 :)

+1 对 Leigh 关于以纯文本形式存储密码的警告。

# jquery - jquery代码在将外部页面加载到div时工作

> ID：10056269
> 
> 赞同：0
> 
> 时间：2012-04-07T16:35:24.997
> 
> 标签：jquery

我找到了[使用 jquery 刷新动态 php div](https://stackoverflow.com/questions/10054595/refresh-dynamic-php-div-using-jquery)的这个问题/答案。[亚历克斯](https://stackoverflow.com/a/10054668/1122111)和[TJ。](https://stackoverflow.com/a/10054661/1122111)这个问题的答案。两次方法对我有用！但是当我将外部页面加载到我的 div 我的 jquery 库和其他 jquery 代码对我不起作用时我遇到了大问题:(。我需要解决这个问题。

示例加载 1：

```
 $(document).ready(function () {
        $('.click').on('click', function (e) {
            e.preventDefault();
            $('.messagelist').html('Please wait...');
            $.ajax({
                type : 'GET',
                url : 'messages.php',
                dataType : 'html',
                success : function (response) {
                    $('.messagelist').html(response);    
                }
            });
        });
    });
 <a class="click" href="#"> Link TO refresh Div </a>
 <div class="messagelist">
 <div class="togglespan"><span>+</span></div>
 <div class="togglediv"></div>
 </div> 
```

加载 2：

```
 <script type="text/javascript">
    $(function(){
        $('.click').on('click', function(e){
            e.preventDefault();
            $('.messagelist').text('Please wait...');
            $('.messagelist').load('list.php');
        });
    });
    </script>
    <a class="click" href="#"> Link TO refresh Div </a>
    <div class="messagelist">
    <div class="togglespan"><span>+</span></div>
    <div class="togglediv"></div>
    </div> 
```

例如，现在我的页面中有用于切换 div 的代码。这不起作用。真的在我的外部页面中，我需要切换 div。如何修复工作 jquery 库的加载外部页面和所有外部页面的代码？有一个基本的方法可以做到这一点。谢谢

```
$(".togglespan").click(function () {
    if ($(this).next(".togglediv").is(":hidden")) {
        $(this).next(".togglediv").slideDown("slow");
        $(this).children('span').html('+');
    } else {
        $(this).next(".togglediv").slideUp("slow");
        $(this).children('span').html('-');
    }
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-07T16:53:49.540

您需要事件委托。试试这个而不是你的切换代码：

```
$(".messagelist").on('click', '.togglespan', function (e){
    if ($(this).next(".togglediv").is(":hidden")) {
        $(this).next(".togglediv").slideDown("slow");
        $(this).children('span').html('+');
    } else {
        $(this).next(".togglediv").slideUp("slow");
        $(this).children('span').html('-');
    }
}); 
```

# javascript - 如何使用静态变量数组？

> ID：10056270
> 
> 赞同：0
> 
> 时间：2012-04-07T16:35:29.227
> 
> 标签：javascript

这有点尴尬，但我需要一个静态变量数组。每次调用函数时，我都需要访问这些变量。基本上，我有一个由当前称为 elapsed_time 的单个变量“控制”的效果函数。

但是，对于传递给函数的每个元素，我都需要一个 elapsed_time，这样我就可以确保不在同一个元素上运行效果......（对于我的淡入淡出函数，这会导致闪烁效果）。

我想用`element.id`来命名我的变量。

我刚刚读到一篇文章，说关联数组并不是真正的关联数组，你不应该[在这里使用它们。](http://www.mennovanslooten.nl/blog/post/54)

以下是我需要更新的当前功能。

```
/**
 *    Effects
 */

var Effects = function( element ) 
{
    this.element = element;
};

Effects.prototype.fade = function( direction, max_time ) 
{
    Effects.elapsed = 0;
/*
    Effects.arrayHold = [];
    Effects.arrayHold.push( this.element.id );
*/
    var persist_element = this.element;
    function next() 
    {
        Effects.elapsed += 10;
        if ( direction === 'up' )
        {
            persist_element.style.opacity = Effects.elapsed / max_time;
        }
        else if ( direction === 'down' )
        {
            persist_element.style.opacity = ( max_time - Effects.elapsed ) / max_time;
        }
        if ( Effects.elapsed <= max_time ) 
        {
            setTimeout( next, 10 );
        }
    }
    next();
    return true;
}; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-07T21:46:21.083

只需使用对象而不是数组

# xml - 使用 swfmill 反向编译返回不同的结果

> ID：10056271
> 
> 赞同：1
> 
> 时间：2012-04-07T16:35:43.857
> 
> 标签：xml, flash, reverse-engineering, swfmill

我有这个非常简单的 SWF 文件[http://www.2shared.com/document/OgYwRBR6/test2.html](http://www.2shared.com/document/OgYwRBR6/test2.html)，我只是用 swfmill 将它转换为 xml。

这是结果：[http ://pastebin.com/Ug​​vfeYT6](http://pastebin.com/UgvfeYT6)

不幸的是，反向（用 swfmill 编译 xml）返回一个奇怪的结果，可以在这里看到[http://www.2shared.com/document/4Zwd1Ggn/complex.html](http://www.2shared.com/document/4Zwd1Ggn/complex.html)

我不是要求调试，但有人知道为什么会这样吗？

**更新**

为了创建上面的文件，我在控制台中使用了下面的代码：

`swfmill swf2xml demo.swf demo.xml`- 创建 xml

`swfmill simple demo.xml demo2.swf`- 重新创建瑞士法郎

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-12T16:14:49.737

你应该做

```
swfmill swf2xml demo.swf demo.xml
swfmill xml2swf demo.xml demo2.swf 
```

`swfmill simple`允许您从更易于手工编写的更简单的 XML 方言编译 SWF。“简单”方言与完整方言有很大不同，尽管如果您知道自己在做什么，则可以在某种程度上将两者混合，这就是为什么您会得到接近您想要的东西的原因。

这是一个可以理解的错误，swfmill 的文档相当残暴。这很大程度上是我的错——对此感到抱歉！

# delphi - Delphi xe2中给定类的初始化变量

> ID：10056272
> 
> 赞同：2
> 
> 时间：2012-04-07T16:35:48.037
> 
> 标签：delphi, delphi-xe2

很抱歉不得不问这个问题，但我显然不了解 Delphi 的基本内容。

当您声明 TIdSSLIOHandlerSocketOpenSSL 之类的类的变量时，您必须将其初始化为什么？显然，如果它是一个字符串或一个整数，那么必要的值将是一个整数上的字符串，但在这种情况下它不太明显（对于像我这样无能的人）。[不启动它会导致访问冲突，我理解为什么在 about.com](http://delphi.about.com/od/objectpascalide/a/delphi-variable-might-not-have-been-initialized-w1036.htm)上找到一篇关于它的文章，但该文章没有解释要启动什么。

下面是给出访问冲突的代码，因为我没有启动变量客户端（它是一个没有 gui 的应用程序）

```
program New;

uses
  Windows, Messages, SysUtils, Variants, Classes,
  Sockets, IdBaseComponent, IdComponent,
  IdTCPConnection, IdTCPClient, IdIOHandler, IdIOHandlerSocket, IdIOHandlerStack,
  IdServerIOHandler, IdSSL, IdSSLOpenSSL;

function Handshake(target: string; port: integer) : string;
var client: TIdSSLIOHandlerSocketOpenSSL;
begin
client.Create();
client.Port := port;
client.Destination := target;
client.Destroy;
end;

begin

  Handshake('127.0.0.1',15);

end. 
```

为我的无知道歉，

ñ

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-07T16:38:23.667

您需要使用语法`TIdSSLIOHandlerSocketOpenSSL.Create`调用构造函数并将结果保存到实例变量：

```
function Handshake(target: string; port: integer) : string;
var
  client: TIdSSLIOHandlerSocketOpenSSL;
begin
  client := TIdSSLIOHandlerSocketOpenSSL.Create;
  try
    client.Port := port;
    client.Destination := target;
    Result := ...;//don't forget to assign the return value to something
  finally
    client.Free;
  end;
end; 
```

也用于`try/finally`在遇到异常时保护对象的生命周期。该`finally`块将始终执行，前提是执行通过了 try。

并且要销毁一个对象，您应该调用`Free`而不是`Destroy`. 这在这里无关紧要，但是当您在另一个对象的析构函数中销毁对象时非常重要。要了解有关`Free`我向您推荐（我知道的不谦虚）主题的更多信息，请参阅我的[另一个答案](https://stackoverflow.com/questions/8548843/why-should-i-not-use-if-assigned-before-using-or-freeing-things/8550628#8550628)。

# python - 删除节点的随机边直到 degree = 1 networkx

> ID：10056274
> 
> 赞同：0
> 
> 时间：2012-04-07T16:35:55.003
> 
> 标签：python, networkx

如果我使用随机几何图创建二分图 G，其中节点在半径内连接。然后我想确保所有节点都具有特定的度数（即只有一个或两个边）。我的主要目标是获取其中一个节点集（即节点类型 a），并为每个节点确保它具有我设置的最大度数。因此，例如，如果一个节点 i 的度数为 4，则删除节点 i 的随机边，直到其度数为 1。

在生成边之后，我编写了以下代码在图形生成器中运行。它删除边，但直到所有节点的度数都为 1。

```
for n in G:
    mu = du['G.degree(n)']
    while mu > 1:
            G.remove_edge(u,v)
    if mu <=1:
            break
return G 
```

完整功能如下：

```
import networkx as nx
import random

def my_bipartite_geom_graph(a, b, radius, dim):

    G=nx.Graph()
    G.add_nodes_from(range(a+b))
    for n in range(a):
        G.node[n]['pos']=[random.random() for i in range(0,dim)]
        G.node[n]['type'] = 'A'

    for n in range(a, a+b):
        G.node[n]['pos']=[random.random() for i in range(0,dim)]
        G.node[n]['type'] = 'B'

    nodesa = [(node, data) for node, data in G.nodes(data=True) if data['type'] == 'A']
    nodesb = [(node, data) for node, data in G.nodes(data=True) if data['type'] == 'B']

    while nodesa:
        u,du = nodesa.pop()
        pu = du['pos']
        for v,dv in nodesb:
            pv = dv['pos']
            d = sum(((a-b)**2 for a,b in zip(pu,pv)))
            if d <= radius**2:
                G.add_edge(u,v)

    for n in nodesa:
        mu = du['G.degree(n)']
        while mu > 1:
            G.remove_edge(u,v)
        if mu <=1:
           break
    return G 
```

回复 jared 之类的词。我尝试使用您的代码以及我必须进行的一些更改：

```
def hamiltPath(graph):

    maxDegree = 2
    remaining = graph.nodes()
    newGraph = nx.Graph()
    while len(remaining) > 0:
        node = remaining.pop()
        neighbors = [n for n in graph.neighbors(node) if n in remaining]
        if len(neighbors) > 0:
            neighbor = neighbors[0]
            newGraph.add_edge(node, neighbor)
            if len(newGraph.neighbors(neighbor)) >= maxDegree:
                remaining.remove(neighbor)

    return newGraph 
```

这最终会从我希望它不会的最终图中删除节点。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-07T21:17:55.057

假设我们有一个二分图。如果您希望每个节点的度数为 0、1 或 2，则执行此操作的一种方法如下。如果你想做一个*匹配*，要么查找算法（我不记得了），要么将 maxDegree 更改为 1，我认为它应该作为匹配来工作。无论如何，如果这不符合您的要求，请告诉我。

```
def hamiltPath(graph):
    """This partitions a bipartite graph into a set of components with each
    component consisting of a hamiltonian path."""
    # The maximum degree
    maxDegree = 2

    # Get all the nodes.  We will process each of these.
    remaining = graph.vertices()
    # Create a new empty graph to which we will add pairs of nodes.
    newGraph = Graph()
    # Loop while there's a remaining vertex.
    while len(remaining) > 0:
        # Get the next arbitrary vertex.
        node = remaining.pop()
        # Now get its neighbors that are in the remaining set.
        neighbors = [n for n in graph.neighbors(node) if n in remaining]
        # If this list of neighbors is non empty, then add (node, neighbors[0])
        # to the new graph.
        if len(neighbors) > 0:
            # If this is not an optimal algorithm, I suspect the selection
            # a vertex in this indexing step is the crux.  Improve this
            # selection and the algorthim might be optimized, if it isn't
            # already (optimized in result not time or space complexity).
            neighbor = neighbors[0]
            newGraph.addEdge(node, neighbor)
            # "node" has already been removed from the remaining vertices.
            # We need to remove "neighbor" if its degree is too high.
            if len(newGraph.neighbors(neighbor)) >= maxDegree:
                remaining.remove(neighbor)

    return newGraph

class Graph:
    """A graph that is represented by pairs of vertices.  This was created
    For conciseness, not efficiency"""

    def __init__(self):
        self.graph = set()

    def addEdge(self, a, b):
        """Adds the vertex (a, b) to the graph"""
        self.graph = self.graph.union({(a, b)})

    def neighbors(self, node):
        """Returns all of the neighbors of a as a set. This is safe to
        modify."""
        return (set(a[0] for a in self.graph if a[1] == node).
                union(
                set(a[1] for a in self.graph if a[0] == node)
                ))

    def vertices(self):
        """Returns a set of all of the vertices. This is safe to modify."""
        return (set(a[1] for a in self.graph).
                union(
                set(a[0] for a in self.graph)
                ))

    def __repr__(self):
        result = "\n"
        for (a, b) in self.graph:
            result += str(a) + "," + str(b) + "\n"
        # Remove the leading and trailing white space.
        result = result[1:-1]
        return result

graph = Graph()
graph.addEdge("0", "4")
graph.addEdge("1", "8")
graph.addEdge("2", "8")
graph.addEdge("3", "5")
graph.addEdge("3", "6")
graph.addEdge("3", "7")
graph.addEdge("3", "8")
graph.addEdge("3", "9")
graph.addEdge("3", "10")
graph.addEdge("3", "11")

print(graph)
print()
print(hamiltPath(graph))
# Result of this is:
# 10,3
# 1,8
# 2,8
# 11,3
# 0,4 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-08T10:31:11.883

我不知道这是否是您的问题，但是当我阅读最后两个块时，我的 wtf 检测器快疯了：

```
while nodesa:
     u,du = nodesa.pop()
     pu = du['pos']
     for v,dv in nodesb:
         pv = dv['pos']
         d = sum(((a-b)**2 for a,b in zip(pu,pv)))
         if d <= radius**2:
             G.add_edge(u,v)

for n in nodesa:
    mu = du['G.degree(n)']
    while mu > 1:
        G.remove_edge(u,v)
    if mu <=1:
       break 
```

*   你永远不会进入 for 循环，因为 nodea 需要为空才能到达它
*   即使 nodea 不为空，如果 mu 是 an `int`，您在最后一个嵌套中也会有一个无限循环，`while`因为您从未修改它。
*   即使你设法打破这个`while`说法，那么你有`mu > 1 == False`. 所以你立即跳出你的`for`循环

你确定你在这里做你想做的事吗？你能添加一些评论来解释这部分发生了什么吗？

# shell - 向上箭头键搜索 zsh shell 给出的 2 个单词

> ID：10056275
> 
> 赞同：6
> 
> 时间：2012-04-07T16:35:58.690
> 
> 标签：shell, zsh

使用 zsh/oh-my-zsh/iterm2，这是浏览终端命令历史记录的绝佳方式。

如果我`knife cookbook upload application`几天前发出命令并获取命令，我可以执行`k`or`kni`或`knif`并按向上箭头键，它将遍历以`knife`word 开头的命令历史记录。

但是如果运行了以 开头的类似命令`knife`，我将不得不使用向上箭头键遍历这些命令。

但是如果我想搜索多个单词，比如 get commands with both `knife node`，zsh 不支持这个并且开始显示以 just 开头的命令`knife`。

那么，有没有什么办法可以得到以两个单词开头的命令呢？这样我只需键入两个单词并按向上箭头键即可仅显示那些以键入的两个单词开头的命令。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-07T19:15:39.793

除了@Shep 答案，我建议将`<C-r>`行为从仅搜索普通字符串更改为搜索全局模式：

```
bindkey "\C-r" history-incremental-pattern-search-backward 
```

. 在这种情况下，您将通过搜索获得所需的结果`knife*node`。顺便说一句，如果你这样做了`knife node<Up>`，zsh 应该搜索以 开头的命令`knife node`，而不仅仅是以`knife`. 但它不会搜索包含两者并由其他单词分隔的命令`knife`，`node`也不会搜索包含`knife node`不在行首的命令（谈论`history-beginning-search-backward`小部件）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-07T16:45:27.953

也许不完全是您要查找的内容，但键入 Cr 将打开一个向后命令搜索，它将搜索您输入的任何字符串，从最近的字符串开始。要获取第二个最新的，请再次按 control-r（依此类推）。

另请参阅超级用户的[相关线程](https://superuser.com/questions/197813/cycle-through-matches-in-zsh-history-incremental-pattern-search-backward)。

# android - Java - 将 16 位 Mono PCM 原始数据转换为立体声

> ID：10056280
> 
> 赞同：2
> 
> 时间：2012-04-07T16:36:28.317
> 
> 标签：android, audio, mixing, audiotrack

我将两个 16 位 PCM 样本混合到一个短缓冲区中。

```
// This is our buffer for PCM audio data
mp3Buffer = new short[minBufferSize];
wavBuffer = new short[minBufferSize];
mixedBuffer = new short[minBufferSize]; 
```

我正在用来自 mp3 和 wav 文件的样本填充这些缓冲区。我发现 wav 文件将始终是单声道的，而 mp3 将始终是立体声的。

我读过，如果您“只需分配两倍于原始 PCM 数据大小的缓冲区，并且对于原始缓冲区中的每个样本，将其两次放入新缓冲区中”

```
short[] stereoWavBuffer = new short[minBufferSize];
int k = 1;
for (int j = 0; j < minBufferSize / 2; j += 2)
{
    stereoWavBuffer[j] = wavBuffer[j];
    stereoWavBuffer[k] = wavBuffer[k];
     k += 2;

                }
                // TO DO -  Add the 2 buffers together

                for (int i = 0; i < minBufferSize; i++){
                    mixedBuffer[i] = (short)(mp3Buffer[i] + stereoWavBuffer[i]);
                }

                track.write(mixedBuffer, 0, minBufferSize); 
} 
```

我怎样才能做到这一点？我试过了，但现在的 wav 音频速度正常，但听起来像花栗鼠。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-07T20:49:14.570

在我看来，您的第一个 for 循环应该是

```
j < minBufferSize - 1 
```

/2 意味着您永远不会读取所有波形缓冲区或写入整个立体声缓冲区 - 即使您只读取一半波形缓冲区，因为这是所有数据，因为它是单声道，您仍然需要写入整个立体声缓冲区。此外，您需要将 J 增加 1 而不是 2，以便读取每个单声道样本。

速度问题似乎是因为您应该在 j 和 k 处设置 stereowavebuffer 都等于在 j 处的 wavebuffer。看来您实际上只是复制了原始单声道文件的一半。然后将其播放为立体声（即：双倍字节率）。

我认为第一个循环应该看起来更像这样

```
int k = 0;
for (int j = 0; j < minBufferSize / 2; j++) //Assuming you only have half a buffer since mono???
{
    stereoWavBuffer[k] = wavBuffer[j];
    stereoWavBuffer[k+1] = wavBuffer[j];
     k += 2;
} 
```

- 编辑以修复错误的 ipad 打字！

# python - Python 流程控制的最佳实践

> ID：10056289
> 
> 赞同：3
> 
> 时间：2012-04-07T16:37:25.463
> 
> 标签：python, web-services, architecture, operating-system

这是我做任何系统级编程的第一次 hack（到目前为止主要是 LAMPhp，特别是 Drupal，Web 开发）。

由于具有非常特定功能的库的可用性，我将 Python 用于即将进行的项目。我需要运行，根据需要重新启动，监视和响应多个 Python 脚本进程的输出，理想情况下，通过来自另一个主程序的 HTTP API 进行控制，该主程序保留需要运行的进程数据库，以及有关这些进程的一些元数据（参数、pid 等）。我计划用 PHP 构建这个主程序，因为我在这方面有更多的经验，因此需要一个好的 HTTP API。

这种类型的系统有一些最佳实践吗？一些初步研究将我引向了 supervisord（显然，它内置了 XML-RPC），但我想在继续测试之前，我应该检查一下实际上已经走在这条路上的群众的智慧。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-23T00:06:33.910

我不能说我一直走这条路，但我正在努力走这条路。我会研究 Python 的多处理库。有网络透明库。您可以采取以下几种方法： 1\. 创建一个控制所有其他流程的流程。使此过程成为您可以使用 PHP 控制的服务器。2\. 确定如何让 PHP 与这些联网的 Python 进程通信。然而，它们可能仍需要从中央 Python 进程启动。

# cross-platform - Free Pascal/Lazarus下如何跨平台获取config文件夹/文件？

> ID：10056297
> 
> 赞同：1
> 
> 时间：2012-04-07T16:38:25.990
> 
> 标签：cross-platform, configuration-files, freepascal, lazarus, fpc

是否有一组函数可以为您提供放置应用程序配置的文件和/或文件夹？

我希望它仅在每个系统的适当位置返回文件夹和/或文件。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-07T16:41:28.500

您正在寻找的功能如下：

*   `GetAppConfigDir`-[维基页面](http://www.freepascal.org/docs-html/rtl/sysutils/getappconfigdir.html)
*   `GetAppConfigFile`-[维基页面](http://www.freepascal.org/docs-html/rtl/sysutils/getappconfigfile.html)

这些函数将使用`ApplicationName`内容来确定应用程序的名称。[`OnGetApplicationName`](http://www.freepascal.org/docs-html/rtl/sysutils/ongetapplicationname.html)您可以使用回调更改该行为。

[您可以在Multiplatform Programming Guide](http://wiki.lazarus.freepascal.org/Multiplatform_Programming_Guide) wiki 页面上查看它们为每个系统返回的内容。

# mysql - 如何防止 Hibernate 使用 MySQL 将主机名附加到用户名

> ID：10056302
> 
> 赞同：0
> 
> 时间：2012-04-07T16:38:36.670
> 
> 标签：mysql, hibernate, jdbc

我将 Hibernate 与 JPA 和 MySQL 一起使用。

我被拒绝访问。

java.sql.SQLException：用户“用户名”@“主机名”的访问被拒绝（使用密码：是）

我知道用户名/密码没问题。问题是驱动程序在末尾附加了@'hostname'。我怎样才能防止这种情况？

但是授权只针对用户名，而且机器不同，所以我不能为每个主机名授权。（我不在乎它是否安全，它是一个开发服务器）。

我以这种方式创建了数据库：

```
create database mydbname character_set utf8 collate utf8_general_ci;
GRANT ALL ON mydbname.* TO username IDENTIFIED BY 'password'; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-07T16:58:56.417

您需要授予所有必须访问 MySQL 的机器。

如果您有很多机器并且您不想授予每一台您可以执行的操作：

```
GRANT ALL ON mydbname.* TO username@'%' IDENTIFIED BY 'password'; 
```

或者

```
GRANT ALL ON mydbname.* TO username@'192.168.1.%' IDENTIFIED BY 'password'; 
```

如果您不这样做，客户端将无法连接到您的数据库

欲了解更多信息：[http ://dev.mysql.com/doc/refman/5.1/en/grant.html](http://dev.mysql.com/doc/refman/5.1/en/grant.html)

# jquery-ui - 设置宽度/高度 jQuery UI

> ID：10056304
> 
> 赞同：0
> 
> 时间：2012-04-07T16:38:58.500
> 
> 标签：jquery-ui, height, width

我对 jQuery UI 有点陌生。

我有：

```
// dialog profile options
$(document).ready(function() {
        var $dialog = $('<div></div>')
            .html('This dialog will show every time!')
            .dialog({
                autoOpen: true,
                title: 'Basic Dialog'
            });

        $('#setAccountSettings').click(function() {
            $dialog.dialog('open');
            // prevent the default action, e.g., following a link
            return false;
        });
}); 
```

如何设置`minWidth`为 600 和`minHeight`200？抱歉，我对此有些陌生。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-07T16:44:03.367

您可以在初始化对话框时将 minHeight 和 minWidth 设置为选项

```
 .dialog({
            autoOpen: true,
            title: 'Basic Dialog',
            minWidth: 600,
            minHeight: 200

        }); 
```

[您可以在http://jqueryui.com/demos/dialog/](http://jqueryui.com/demos/dialog/)上阅读有关可用选项的更多信息

# javascript - Jquery Mobile Navbars 填充错误：太窄

> ID：10056308
> 
> 赞同：1
> 
> 时间：2012-04-07T16:39:15.313
> 
> 标签：javascript, jquery-mobile

**问题：**

我的导航栏看起来不像[http://jquerymobile.com/test/docs/toolbars/footer-persist-a.html示例中的导航栏](http://jquerymobile.com/test/docs/toolbars/footer-persist-a.html)

我在做什么错/不同？

**JS 小提琴：http:** [//jsfiddle.net/OpnSrce/dUcUF/](http://jsfiddle.net/OpnSrce/dUcUF/)

**编码：**

```
<!DOCTYPE HTML>
<html>
    <head>
        <meta charset = "utf-8">
        <meta name = "viewport" content = "width=device-width, initial-scale=1">
        <title>AD&amp;D Spellbook</title>
        <style>
            @import url('http://code.jquery.com/mobile/1.1.0-rc.2/jquery.mobile-1.1.0-rc.2.min.css');
        </style>
        <script src = "http://code.jquery.com/jquery-1.7.1.min.js"></script>
        <script src = "http://code.jquery.com/mobile/1.1.0-rc.2/jquery.mobile-1.1.0-rc.2.min.js"></script>
    </head>

    <body>
        <div data-role = "page" data-theme = "b">
            <div data-role = "header" data-position = "fixed" data-theme = "b">
            </div>
            <div data-role = "content" data-theme = "b">

            </div>
            <div data-role = "footer" data-position = "fixed" data-theme = "b">
                <div data-role = "navbar">
                    <ul>
                        <li>All Spells</li>
                        <li>Memorized Spells</li>
                        <li>Known Spells</li>
                    </ul>
                </div>
            </div>
        </div>
    </body>
</html> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-07T18:26:05.737

好的，我改变了我的答案第一个版本是错误的。您缺少的是`<a>`页脚中的标签。

```
<div data-role="navbar">
    <ul>
        <li><a href="">All Spells</a></li>
        <li><a href="">Memorized Spells</a></li>
        <li><a href="">Known Spells</a></li>
    </ul>
</div> 
```

# java - 鼠标控制形状绘制

> ID：10056309
> 
> 赞同：0
> 
> 时间：2012-04-07T16:39:47.527
> 
> 标签：java, graphics, awt, paint, mouselistener

我们如何像在绘画中一样在 Java 中绘制形状？

例如，如果我想绘制矩形，此命令将绘制它：

```
g2.fill3DRect(mt, mf, 45, 45, true); 
```

但是如何像在绘画中那样在运行时使用鼠标来增加或减小对象或形状的大小？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-07T16:55:18.620

使用[鼠标侦听](http://docs.oracle.com/javase/tutorial/uiswing/events/mouselistener.html)器获取鼠标按下后的位置。IE

```
g2.fill3DRect(mt, mf, mouse.getX(), mouse.getY(), true); 
```

但是在每次绘制之前通过在整个屏幕上绘制一个矩形来清除屏幕，这样就不会同时出现一百万个矩形。这当然是最基本的例子。研究双重缓冲和练习。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-07T16:50:35.253

实现一个包含形状属性的形状对象。

您的面板应该维护一个它在需要时绘制的形状列表。也可以将一种形状附加到鼠标上。

然后在您的面板上注册一个鼠标监听器，它将：

*   如果您移动鼠标，请更新您的形状并重新绘制面板。
*   当你 mouseDown 时创建一个新形状
*   当你 mouseUp 时释放形状

# dhcp - 探测 DHCP 服务器并转储收到的 DNS 主机配置

> ID：10056310
> 
> 赞同：4
> 
> 时间：2012-04-07T16:39:59.943
> 
> 标签：dhcp

我想验证 dhcp 服务器配置，即客户端是否获得正确的 DNS 服务器、域名等。我有一个有效的 DHCP 设置，以及一台具有静态 IP 地址的计算机，我可以从该地址向 DHCP 发送 DHCP 请求服务器。

我正在寻找一个图书馆（或程序）来请求租约并转储所有信息。

到目前为止，我已经看到：

*   dhcping -- 有效，但不写出它收到的租约
*   pydhcpd -- 未开发，alpha (?)
*   pydhcplib -- 没有文档，不确定它是否真的可以发送包或者只是封装；dhquery 应该基于这个库工作，并声称可以部分完成我想要的，但是在修复 client.SendDhcpPacketTo 上的 API 更改后，它没有收到任何响应。

是否有任何现有的脚本或库可以打印或接收 DHCP 服务器发出的 DNS 信息？任何语言都是可接受的（Perl？Java？）。

最终，我想把它放到 Nagios 检查脚本中。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-07T18:38:49.880

我刚刚分叉了 dhclient，创建了[dhcprobe](https://github.com/JohannesBuchner/DHCProbe)

使用 DHCProbe，可以从 DHCP 服务器请求租用，并转储结果以验证配置。

详细模式下的示例：

```
 $ sudo ./dhcprobe -v -s 172.20.205.1
Got answer from: 172.20.205.1
option 53 DHCP message type 6 (DHCPNAK)
option 54 Server identifier 172.20.205.1
option  1 Subnet mask 255.255.255.0
option  3 Router 172.20.205.1
option 15 Domain name slh.local
option  6 DNS server 172.20.200.250
option 51 IP address leasetime 
option 58 T1 
option 59 T2 
```

这允许验证域名、DNS 服务器等在 DHCP 服务器中是否正确配置。

来源和信息在这里：[https ://github.com/JohannesBuchner/DHCProbe](https://github.com/JohannesBuchner/DHCProbe)

# git - 在我自己的仓库中使用 git 子模块

> ID：10056311
> 
> 赞同：1
> 
> 时间：2012-04-07T16:39:59.767
> 
> 标签：git, vim, git-submodules, pathogen

我是 git 的新手，所以问题可能真的很愚蠢，对此感到抱歉。我的意思是，我什至在这里发现了与我非常接近的 stackoverflow 问题，但仍然不明白如何正确解决问题。

我有 github repo 和我的 dotfiles，包括 vim。我正在使用带有 vim 的**病原体**，所以自然的方式是让插件接缝成为

```
git submodule add https://github.com/msanders/snipmate.vim.git vim/bundle/snipmate
...
git submodule init
git submodule update
git submodule foreach git submodule init
git submodule foreach git submodule update 
```

我在某个地方找到的。最后四个命令我只是添加到我的设置脚本中，以便在每次克隆这个 repo 时运行。

**第一个问题**总是`git status`向我展示

```
# modified:   vim/bundle/snipmate (untracked content)
# ... 
```

在该`# Changed but not updated:`部分并`git add vim/bundle/snipmate`没有帮助。这很烦人。

**第二个问题**是我显然不想将**snipmate**片段保留为默认值，我想更改它们，并且由于**病原体**片段存储在**snipmate**文件夹中，该文件夹是子模块，而不是我自己的 repo。当然，我可以`clone`在那里简单地使用它们，或者甚至创建其中一些的分支，但这似乎不是一个好的解决方案：

*   可以在 github 上找到我自己的代码与其他代码的混淆；
*   我不是真的要*修改*snipmate，我要配置它；
*   所有这些都使得更新三十部分插件变得复杂甚至不可能。

也许有人可以帮助找到“正确”的答案？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-07T20:40:44.690

您可以从阅读[snipmate 的文档](https://github.com/garbas/vim-snipmate/blob/master/doc/snipMate.txt#L180)开始，该文档指出您自己的片段的默认推荐位置是 (假设您的东西在`~/.vim`)下`~/.vim/snippets/<filetype>.snippets`。在插件目录之外，在子模块之外。

是的，Git 子模块很酷，但它们可能不是管理 Vim 配置的完美解决方案。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-02T04:48:32.940

我将 snipmate 和病原体与 vim 一起使用。Pathogen 使使用子模块成为可能（而且更容易！）

我的 snipmate 插件安装在这里：

```
.vim/bundle/snipmate 
```

我的片段安装在这里：

```
.vim/bundle/snipmate-snippets 
```

一个示例片段在这里：

```
.vim/bundle/snipmate-snippets/snippets/c.snippets 
```

我还有一个带有片段的特定工作回购。他们在这儿：

```
.vim/bundle/work/snippets/cpp.snippets 
```

只要您的运行时路径 ( `:help rtp`) 中有一个片段文件夹，就可以了。这就是病原体的魔力。

为了设置我的子模块，我做了：

```
git submodule add git://github.com/garbas/vim-snipmate.git bundle/snipmate
git submodule add git://github.com/honza/snipmate-snippets.git bundle/snipmate-snippets 
```

当我想更新我的 vim 存储库时，我会这样做：

```
git pull origin master
git submodule update --init 
```

如果我实际上更改了子模块的遥控器（例如，如果我在 github 上分叉了 snipmate 并希望将我的本地仓库指向新的分叉），我更改 .gitmodules 并执行以下操作：

```
git submodule sync 
```

通过使用子模块，它将更容易更新`git submodule git pull origin`，更容易修改并将更新推送回维护者。

# c - 在这种情况下，缓存一致性如何影响性能

> ID：10056319
> 
> 赞同：7
> 
> 时间：2012-04-07T16:40:49.230
> 
> 标签：c, multithreading, multiprocessing, multicore, x86-64

假设核心 A 正在修改变量 X，而核心 B 正在读取该变量 (X)。当然在这种情况下，缓存一致性协议会更新核心 B 的缓存，因为 X 已被核心 A 修改，这种缓存一致性当然会减慢核心 B 上的执行速度。但是，这种缓存一致性也会影响核心 A 的性能吗？假设变量 X 驻留在其缓存中。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-07T16:53:22.817

是的。它可以通过多种方式影响性能。人们使用的标准协议是 MSI（修改、共享、无效）的一些变体，有时会在协议中添加 O（所有者）和通常 E（独占）。在您的示例中，核心 A 将以修改（或独占）状态开始，核心 B 的读取将强制核心 A 将其更改为共享状态。此操作会占用缓存中的周期，因为在任何给定时间内核可以执行的操作非常多。这对核心 A 的影响不是很大，因为它不在关键路径中。更大的影响是 Core A 是否再次写入。由于缓存行处于共享（或无效）状态，它必须发出请求将自身升级到 M 或 E。该请求必须转到 Core B。此操作在关键路径上，写入可以' t 完成，直到缓存块升级。也就是说，写入通常会被缓冲，并且处理器通常不会在此操作上被阻塞。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-07T16:48:28.140

是的，在当今使用 ME(O)SI 一致性协议的微架构上，它也会减慢 A 的更新速度`X`。这样做的原因是 B 的读取将`X`在复制之前将包含缓存行的缓存线置于“共享”状态，然后 A 的写入必须使 B 的副本无效才能进入“独占”状态，然后才能再次修改它。

综上所述，A 的写入`X`实际上可能不会停止 A 的执行管道。这取决于架构和编程语言的*内存一致性模型*，以及写入是作为原子操作还是作为后续的写入栅栏被强制退出。

# label - 多行 gtk.Label 忽略 xalign=0.5

> ID：10056320
> 
> 赞同：4
> 
> 时间：2012-04-07T16:40:57.280
> 
> 标签：label, alignment, pygtk, word-wrap

打开换行时，gtk.Label 无法居中对齐。示例代码：

```
import pygtk
pygtk.require('2.0')
import gtk

class testwin(gtk.Window):
   def __init__(self):
      gtk.Window.__init__(self)
      width,height = 300,300
      self.set_size_request(width,height)
      self.set_position(gtk.WIN_POS_CENTER)
      self.set_title("test window")

      label = gtk.Label("test text")
      label.set_line_wrap(True)
      label.set_justify(gtk.JUSTIFY_CENTER)
      label.set_alignment(0.5,0.5)
      label.connect("size-allocate",lambda l,s: l.set_size_request(s.width-1, -1))

      self.add(label)
      self.connect("destroy", gtk.main_quit)
      self.show_all()

testwin()
gtk.main() 
```

它看起来像这样，这意味着它左对齐： http://m45.img-up.net/?up= [pic122x97.png](http://m45.img-up.net/?up=pic122x97.png)

如果您注释掉第 14 行 (set_line_wrap) 一切都很好：[http ://o54.img-up.net/?up=pic2y00p9.png](http://o54.img-up.net/?up=pic2y00p9.png)

请注意， yalign 工作正常。因此，当换行打开时，gtk.Misc.set_alignment-function 中的第一个参数似乎无效。

使用 Fedora 16、64 位、gtk 3.2.4、pygtk 2.24.0、python 2.7.2

问题：这是故意的还是错误的？它应该如何制作或有可用的解决方法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-07T20:00:40.997

这不是一个真正的答案，但它不适合评论。

我猜这是一个错误。当我将您的代码转换为在[PyGObject](https://live.gnome.org/PyGObject)（PyGTK 的继任者）上运行时，它会按您的预期工作。

```
from gi.repository import Gtk

class testwin(Gtk.Window):
   def __init__(self):
      Gtk.Window.__init__(self)
      width,height = 300,300
      self.set_size_request(width,height)
      self.set_position(Gtk.WindowPosition.CENTER)
      self.set_title("test window")

      label = Gtk.Label("test text")
      label.set_line_wrap(True)
      label.set_justify(Gtk.Justification.CENTER)
      label.set_alignment(0.5,0.5)
      label.connect("size-allocate",lambda l,s: l.set_size_request(s.width-1, -1))

      self.add(label)
      self.connect("destroy", Gtk.main_quit)
      self.show_all()

testwin()
Gtk.main() 
```

当然，如果您卡在 PyGTK 上并且无法立即切换到 PyGObject，那么这个答案并不能解决您的问题。

# html - 使用 .css 文件中的 !important 覆盖内联样式

> ID：10056321
> 
> 赞同：1
> 
> 时间：2012-04-07T16:41:04.167
> 
> 标签：html, css

我知道从技术上讲你不能这样做，因为内联总是需要总统。带有样式的内联元素：

```
element.style {
    width: 185px !important;
} 
```

然后在 style.css 文件中：

```
.something ul li {
     width: 179px !important;
} 
```

我想也许如果我得到更具体的信息，我可以覆盖它，即使我知道这在技术上是不可能的。

我也不想使用 JS 来覆盖它。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-07T16:48:02.123

我假设您的意思不是总统，而是“优先权”。

我一直都知道，您可以使用您概述的方法从 css 文件中覆盖内联样式。例如，这个 url 准确地解释了这个过程：[http ://css-tricks.com/override-inline-styles-with-css/](http://css-tricks.com/override-inline-styles-with-css/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-07T17:01:51.830

不要过度夸大使用`!important`. 你看看后果是什么。您通常会以一种合理的方式很好地构建您的选择器。`!important`只应在特殊情况下使用。那么你不会遇到突然比内联样式更具体的选择器的问题。

# android - 将粘性页脚添加到片段

> ID：10056328
> 
> 赞同：0
> 
> 时间：2012-04-07T16:41:51.893
> 
> 标签：android, android-layout, android-fragments

我正在尝试为我的片段布局添加页脚。在将所有内容转换为片段之前，我工作得很好，现在页脚显示在列表片段上方，而不是下方：

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:orientation="vertical"
    android:layout_height="fill_parent"
    android:layout_width="fill_parent"
>
    <!-- Footer -->     
    <TextView 
            android:id="@+id/footer" 
            android:background="#919191"
            android:layout_width="fill_parent" 
            android:layout_height="wrap_content" 
            style="@style/Footer"
            android:layout_alignParentBottom="true"
         />
    <!-- Footer -->

    <fragment android:name="com.app.ListingFragment"
            android:id="@+id/fragmentListing"
            android:layout_width="fill_parent"  
            android:layout_height="fill_parent" 
            android:layout_above="@id/footer"
     />

 </LinearLayout>

<style name="Footer">
    <item name="android:textColor">#ffffff</item>
    <item name="android:padding">2dip</item>
    <item name="android:background">#919191</item>
</style> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-07T17:55:18.693

LinearLayout 不理解“layout_alignParentBottom”和“layout_above”。您应该删除它们，然后将 TextView 与片段交换。

“layout_alignParentBottom”和“layout_above”仅适用于嵌入在 RelativeLayouts 中的视图。

# sql - 列在选择列表中无效，因为它不包含在聚合函数或 GROUP BY 子句 SQL Server 中

> ID：10056343
> 
> 赞同：3
> 
> 时间：2012-04-07T16:43:56.317
> 
> 标签：sql, sql-server

这是我的查询：

```
SELECT r.CALLID  AS MultiRES,
c.CallDate AS CallDate,
cr.Institution AS Institution,
cr.Branch AS Branch
FROM tblResolution r
INNER JOIN tblcall c ON c.CallID=c.CallID AND c.CallDate=c.CallDate
INNER JOIN tblCaller cr ON cr.Institution = cr.Institution AND cr.Branch=cr.Branch
GROUP BY r.CALLID HAVING COUNT(*) > 1; 
```

但是当我运行它时出现错误，我知道我需要用 group by 子句做一些事情，我只是不知道把它放在哪里。

编辑：刚刚弄清楚出了什么问题：

```
SELECT r.CALLID  AS MultiRES,
c.CallDate AS CallDate,
cr.Institution AS Institution,
cr.Branch AS Branch
FROM tblResolution r
INNER JOIN tblcall c ON c.CallID=c.CallID AND c.CallDate=c.CallDate
INNER JOIN tblCaller cr ON cr.Institution = cr.Institution AND cr.Branch=cr.Branch
GROUP BY c.CallDate,cr.Institution,cr.Branch, r.CALLID HAVING COUNT(*) > 1; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-07T16:46:54.010

select 子句中的所有内容都需要在 group by 子句中，除非它是聚合函数（例如`count`or `sum`）：

```
SELECT r.CALLID  AS MultiRES,
c.CallDate AS CallDate,
cr.Institution AS Institution,
cr.Branch AS Branch
FROM tblResolution r
INNER JOIN tblcall c ON c.CallID=c.CallID AND c.CallDate=c.CallDate
INNER JOIN tblCaller cr ON cr.Institution = cr.Institution AND cr.Branch=cr.Branch
GROUP BY r.CALLID, c.CallDate, cr.Institution, cr.Branch
HAVING COUNT(*) > 1; 
```

# ruby-on-rails - Rails 中的复杂渲染

> ID：10056351
> 
> 赞同：0
> 
> 时间：2012-04-07T16:44:30.150
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, mongodb, mongoid

大约一个星期以来，我一直在尝试渲染视图。我有一个需要能够导出集合的应用程序，因此我决定使用在 Web 浏览器中呈现为 a`.txt`和的 line partial 。`.csv`到目前为止，在让整个集合渲染（逐行）方面做得很好。但是，我无法让某些集合对象（在本例中为产品）根据某个属性（大小元素）复制自己。

下面的代码是我现在陷入困境的地方

### 控制器

```
class PexportController < ApplicationController
  layout 'csv'

  def index
  end

  def show
    @feed_template = params[:id]
    @products = Product.find :all
    @products.each do |product|
      unless product.size.nil? || product.size.empty? || product.size.kind_of?(Fixnum)
        @products << new_products_for(product)
      end
    end

    respond_to do |format|
      format.html
      format.text
    end
  end

  private

  def new_products_for(product = {})
    products = Array.new
    product.size.each do |p|
      products << Product.new(p.attributes)
    end
    products
  end
end 
```

看法

```
<%= render partial: 'pexport/p', collection: @products %> 
```

部分的

```
<%= p.sku %>  <%= p.name %> <%= p.price %> ...... 
```

我基本上只需要让控制器方法工作。我用于行复制器的属性 :size 只是一个像这样的数组`[1,2,3]`。而且我希望包含此尺寸属性的产品根据其尺寸数组中的尺寸数量来复制自己。我什至不确定我是否要马上去做，但它已经到了我要绕圈子的地步，所以我想我会发布它。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-07T17:13:41.017

如果我了解您在做什么，您有一个产品列表，但如果其中一些产品条目有多个尺寸，则它们应该显示为多个产品。假设这是正确的，您的逻辑有点偏离：`new_products_for`返回一个数组，该数组作为**单个元素**添加到数组末尾`@products`。所以你的部分将不知道如何处理它。你可以尝试这样的事情：

```
@my_products = Product.find :all
@products = []
@my_products.each do |p|
  if p.size.blank? || p.size.kind_of?(Fixnum)
    @products << p 
  else
    @products += new_products_for(p)
  end
end 
```

另外，我建议您使该`Product.new`行更明确：

```
products << Product.new(:sku => p.sku, :name => p.name, ...) 
```

`p.attributes`将为您提供模型的**所有**属性，包括`id`, `created_at`，`updated_at`这可能会干扰您正在做的事情。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-07T18:19:06.233

替代答案：是否有某些原因需要在控制器中复制整个对象？您可以通过在您的视图中执行以下操作来简化事情：

```
<% if p.size.is_a?(Array) %>
  <% p.size.each do |s| %>
    <%= p.sku %>  <%= p.name %> <%= p.price %> <%= s %>
  <% end %>
<% else %>
  <%= p.sku %>  <%= p.name %> <%= p.price %> <%= p.size %>
<% end %> 
```

或者类似的东西。

# jquery - 标签是否有“onsuccess”属性？

> ID：10056363
> 
> 赞同：5
> 
> 时间：2012-04-07T16:46:11.277
> 
> 标签：jquery, html, image

`<img>`标签有`"onsuccess"`属性吗？喜欢`"onerror"`。

我正在加载图像。我用 JQuery 绑定了一个事件，它改变了 image `onerror`。`"ONERROR Image loaded successfuly"`如果`onerror image`成功加载，我想显示警报。否则会显示 alert `"ONERROR image not found"`。

**编辑：** onload 加载图像后显示警报。但没有告诉我们，`"your real image is loaded"`或者`"browser's default error image is loaded"`。检查这里...

```
http://jsfiddle.net/extremerose71/cHuu6/6/ 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-04-07T17:43:30.983

如果你写了类似的东西：

```
<img id="im3" src="http://ssl.gstatic.com/gb/images/j_f11bbae8.png" />​ 
```

并且还写道：

```
$(window).load(function() {
   $("#im3").load( function (){
      alert('load');
   }).error( function (){
      alert('error');
   });
}); 
```

（因为`jsfiddle` `onLoad`对应于`$(window).load`），你永远不会得到任何`alert`，因为`$(window).load`在所有资源都已经加载后会被调用。

但是，如果您要从中`src`删除`img`：

```
<img id="im3"/>​ 
```

然后添加这个

```
$("#im3").attr('src','http://ssl.gstatic.com/gb/images/j_f11bbae8.png' )​​​​​​​​​​​​​​; 
```

行后`load`和`error`听众，你会看到一个`alert`。

所以主要问题是，您在图像已经加载或加载失败之后添加了侦听器。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-04-07T16:58:22.270

我认为你可以使用

```
function loadImage()
{
    alert("Image is loaded");
}
function errorImage()
{
    alert("Image not loaded");
}
<img src="someImg.png" onload="loadImage()" onerror="errorImage()" /> 
```

参考：[onload](http://www.w3schools.com/jsref/event_img_onload.asp)和[onerror](http://www.w3schools.com/jsref/event_img_onerror.asp)。

> 成功加载图像时，onload 事件处理程序（loadImage 函数）将触发，如果未加载图像，则 onerror 事件处理程序（errorImage 函数）将触发。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-04-07T16:57:34.737

是的，您可以这样做，请[在此处](http://www.w3schools.com/jsref/dom_obj_image.asp)阅读。您可以使用：

*   负载
*   错误
*   中止

所有主流浏览器都支持这三个事件。

[您也可以在MDN DOM 事件参考](https://developer.mozilla.org/en/DOM/DOM_event_reference)中找到这三个事件。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-07T17:01:56.260

您可以使用`onerror`和`onload`事件处理程序来做到这一点

```
var im = document.getElementById('imageid');
im.onload = function() {
   //handler
};

im.onerror = function() {
   //handler
}; 
```

# gwt - Guice Persist + Maven + GWT

> ID：10056368
> 
> 赞同：2
> 
> 时间：2012-04-07T16:47:30.107
> 
> 标签：gwt, maven, jpa-2.0, guice

我试图用 maven、gwt、gwt-platform 和 guice-persist 做一个例子。

但是，我遇到了麻烦。

当我尝试使用 运行示例时`mvn gwt:run`，出现以下异常：

```
1) Error injecting constructor, javax.persistence.PersistenceException: [PersistenceUnit: exemplo] Unable to build EntityManagerFactory   at br.net.meditec.Exemplo.server.inject.AppInitializer.<init>(AppInitializer.java:9)   while locating br.net.meditec.Exemplo.server.inject.AppInitializer  1 error    at com.google.inject.internal.InjectorImpl$4.get(InjectorImpl.java:987)     at com.google.inject.internal.InjectorImpl.getInstance(InjectorImpl.java:1013)  at br.net.meditec.Exemplo.server.inject.GuiceServletConfig.getInjector(GuiceServletConfig.java:24)  at com.google.inject.servlet.GuiceServletContextListener.contextInitialized(GuiceServletContextListener.java:45)    at org.mortbay.jetty.handler.ContextHandler.startContext(ContextHandler.java:543)   at org.mortbay.jetty.servlet.Context.startContext(Context.java:136)     at org.mortbay.jetty.webapp.WebAppContext.startContext(WebAppContext.java:1220)     at org.mortbay.jetty.handler.ContextHandler.doStart(ContextHandler.java:513)    at org.mortbay.jetty.webapp.WebAppContext.doStart(WebAppContext.java:448)   at com.google.gwt.dev.shell.jetty.JettyLauncher$WebAppContextWithReload.doStart(JettyLauncher.java:468)     at org.mortbay.component.AbstractLifeCycle.start(AbstractLifeCycle.java:39)     at org.mortbay.jetty.handler.HandlerWrapper.doStart(HandlerWrapper.java:130)    at org.mortbay.jetty.handler.RequestLogHandler.doStart(RequestLogHandler.java:115)  at org.mortbay.component.AbstractLifeCycle.start(AbstractLifeCycle.java:39)     at org.mortbay.jetty.handler.HandlerWrapper.doStart(HandlerWrapper.java:130)    at org.mortbay.jetty.Server.doStart(Server.java:222)    at org.mortbay.component.AbstractLifeCycle.start(AbstractLifeCycle.java:39)     at com.google.gwt.dev.shell.jetty.JettyLauncher.start(JettyLauncher.java:672)   at com.google.gwt.dev.DevMode.doStartUpServer(DevMode.java:509)     at com.google.gwt.dev.DevModeBase.startUp(DevModeBase.java:1068)    at com.google.gwt.dev.DevModeBase.run(DevModeBase.java:811)     at com.google.gwt.dev.DevMode.main(DevMode.java:311) Caused by: javax.persistence.PersistenceException: [PersistenceUnit: exemplo] Unable to build EntityManagerFactory     at org.hibernate.ejb.Ejb3Configuration.buildEntityManagerFactory(Ejb3Configuration.java:914)    at org.hibernate.ejb.Ejb3Configuration.buildEntityManagerFactory(Ejb3Configuration.java:889)    at org.hibernate.ejb.HibernatePersistence.createEntityManagerFactory(HibernatePersistence.java:56)  at javax.persistence.Persistence.createEntityManagerFactory(Persistence.java:83)    at javax.persistence.Persistence.createEntityManagerFactory(Persistence.java:60)    at com.google.inject.persist.jpa.JpaPersistService.start(JpaPersistService.java:94)     at br.net.meditec.Exemplo.server.inject.AppInitializer.<init>(AppInitializer.java:10)   at br.net.meditec.Exemplo.server.inject.AppInitializer$$FastClassByGuice$$96bdac91.newInstance(<generated>)     at com.google.inject.internal.cglib.reflect.$FastConstructor.newInstance(FastConstructor.java:40)   at com.google.inject.internal.DefaultConstructionProxyFactory$1.newInstance(DefaultConstructionProxyFactory.java:60)    at com.google.inject.internal.ConstructorInjector.construct(ConstructorInjector.java:85)    at com.google.inject.internal.ConstructorBindingImpl$Factory.get(ConstructorBindingImpl.java:254)   at com.google.inject.internal.InjectorImpl$4$1.call(InjectorImpl.java:978)  at com.google.inject.internal.InjectorImpl.callInContext(InjectorImpl.java:1024)    at com.google.inject.internal.InjectorImpl$4.get(InjectorImpl.java:974)     at com.google.inject.internal.InjectorImpl.getInstance(InjectorImpl.java:1013)  at br.net.meditec.Exemplo.server.inject.GuiceServletConfig.getInjector(GuiceServletConfig.java:24)  at com.google.inject.servlet.GuiceServletContextListener.contextInitialized(GuiceServletContextListener.java:45)    at org.mortbay.jetty.handler.ContextHandler.startContext(ContextHandler.java:543)   at org.mortbay.jetty.servlet.Context.startContext(Context.java:136)     at org.mortbay.jetty.webapp.WebAppContext.startContext(WebAppContext.java:1220)     at org.mortbay.jetty.handler.ContextHandler.doStart(ContextHandler.java:513)    at org.mortbay.jetty.webapp.WebAppContext.doStart(WebAppContext.java:448)   at com.google.gwt.dev.shell.jetty.JettyLauncher$WebAppContextWithReload.doStart(JettyLauncher.java:468)     at org.mortbay.component.AbstractLifeCycle.start(AbstractLifeCycle.java:39)     at org.mortbay.jetty.handler.HandlerWrapper.doStart(HandlerWrapper.java:130)    at org.mortbay.jetty.handler.RequestLogHandler.doStart(RequestLogHandler.java:115)  at org.mortbay.component.AbstractLifeCycle.start(AbstractLifeCycle.java:39)     at org.mortbay.jetty.handler.HandlerWrapper.doStart(HandlerWrapper.java:130)    at org.mortbay.jetty.Server.doStart(Server.java:222)    at org.mortbay.component.AbstractLifeCycle.start(AbstractLifeCycle.java:39)     at com.google.gwt.dev.shell.jetty.JettyLauncher.start(JettyLauncher.java:672)   at com.google.gwt.dev.DevMode.doStartUpServer(DevMode.java:509)     at com.google.gwt.dev.DevModeBase.startUp(DevModeBase.java:1068)    at com.google.gwt.dev.DevModeBase.run(DevModeBase.java:811)     at com.google.gwt.dev.DevMode.main(DevMode.java:311) Caused by: org.hibernate.HibernateException: Could not instantiate dialect class   at org.hibernate.service.jdbc.dialect.internal.DialectFactoryImpl.constructDialect(DialectFactoryImpl.java:82)  at org.hibernate.service.jdbc.dialect.internal.DialectFactoryImpl.buildDialect(DialectFactoryImpl.java:64)  at org.hibernate.engine.jdbc.internal.JdbcServicesImpl.configure(JdbcServicesImpl.java:146)     at org.hibernate.service.internal.StandardServiceRegistryImpl.configureService(StandardServiceRegistryImpl.java:75)     at org.hibernate.service.internal.AbstractServiceRegistryImpl.initializeService(AbstractServiceRegistryImpl.java:159)   at org.hibernate.service.internal.AbstractServiceRegistryImpl.getService(AbstractServiceRegistryImpl.java:131)  at org.hibernate.cfg.SettingsFactory.buildSettings(SettingsFactory.java:71)     at org.hibernate.cfg.Configuration.buildSettingsInternal(Configuration.java:2273)   at org.hibernate.cfg.Configuration.buildSettings(Configuration.java:2269)   at org.hibernate.cfg.Configuration.buildSessionFactory(Configuration.java:1738)     at org.hibernate.ejb.EntityManagerFactoryImpl.<init>(EntityManagerFactoryImpl.java:88)  at org.hibernate.ejb.Ejb3Configuration.buildEntityManagerFactory(Ejb3Configuration.java:904)    at org.hibernate.ejb.Ejb3Configuration.buildEntityManagerFactory(Ejb3Configuration.java:889)    at org.hibernate.ejb.HibernatePersistence.createEntityManagerFactory(HibernatePersistence.java:56)  at javax.persistence.Persistence.createEntityManagerFactory(Persistence.java:83)    at javax.persistence.Persistence.createEntityManagerFactory(Persistence.java:60)    at com.google.inject.persist.jpa.JpaPersistService.start(JpaPersistService.java:94)     at br.net.meditec.Exemplo.server.inject.AppInitializer.<init>(AppInitializer.java:10)   at br.net.meditec.Exemplo.server.inject.AppInitializer$$FastClassByGuice$$96bdac91.newInstance(<generated>)     at com.google.inject.internal.cglib.reflect.$FastConstructor.newInstance(FastConstructor.java:40)   at com.google.inject.internal.DefaultConstructionProxyFactory$1.newInstance(DefaultConstructionProxyFactory.java:60)    at com.google.inject.internal.ConstructorInjector.construct(ConstructorInjector.java:85)    at com.google.inject.internal.ConstructorBindingImpl$Factory.get(ConstructorBindingImpl.java:254)   at com.google.inject.internal.InjectorImpl$4$1.call(InjectorImpl.java:978)  at com.google.inject.internal.InjectorImpl.callInContext(InjectorImpl.java:1024)    at com.google.inject.internal.InjectorImpl$4.get(InjectorImpl.java:974)     at com.google.inject.internal.InjectorImpl.getInstance(InjectorImpl.java:1013)  at br.net.meditec.Exemplo.server.inject.GuiceServletConfig.getInjector(GuiceServletConfig.java:24)  at com.google.inject.servlet.GuiceServletContextListener.contextInitialized(GuiceServletContextListener.java:45)    at org.mortbay.jetty.handler.ContextHandler.startContext(ContextHandler.java:543)   at org.mortbay.jetty.servlet.Context.startContext(Context.java:136)     at org.mortbay.jetty.webapp.WebAppContext.startContext(WebAppContext.java:1220)     at org.mortbay.jetty.handler.ContextHandler.doStart(ContextHandler.java:513)    at org.mortbay.jetty.webapp.WebAppContext.doStart(WebAppContext.java:448)   at com.google.gwt.dev.shell.jetty.JettyLauncher$WebAppContextWithReload.doStart(JettyLauncher.java:468)     at org.mortbay.component.AbstractLifeCycle.start(AbstractLifeCycle.java:39)     at org.mortbay.jetty.handler.HandlerWrapper.doStart(HandlerWrapper.java:130)    at org.mortbay.jetty.handler.RequestLogHandler.doStart(RequestLogHandler.java:115)  at org.mortbay.component.AbstractLifeCycle.start(AbstractLifeCycle.java:39)     at org.mortbay.jetty.handler.HandlerWrapper.doStart(HandlerWrapper.java:130)    at org.mortbay.jetty.Server.doStart(Server.java:222)    at org.mortbay.component.AbstractLifeCycle.start(AbstractLifeCycle.java:39)     at com.google.gwt.dev.shell.jetty.JettyLauncher.start(JettyLauncher.java:672)   at com.google.gwt.dev.DevMode.doStartUpServer(DevMode.java:509)     at com.google.gwt.dev.DevModeBase.startUp(DevModeBase.java:1068)    at com.google.gwt.dev.DevModeBase.run(DevModeBase.java:811)     at com.google.gwt.dev.DevMode.main(DevMode.java:311) Caused by: java.lang.ClassCastException: org.hibernate.dialect.PostgreSQLDialect cannot be cast to org.hibernate.dialect.Dialect   at org.hibernate.service.jdbc.dialect.internal.DialectFactoryImpl.constructDialect(DialectFactoryImpl.java:73)  at org.hibernate.service.jdbc.dialect.internal.DialectFactoryImpl.buildDialect(DialectFactoryImpl.java:64)  at org.hibernate.engine.jdbc.internal.JdbcServicesImpl.configure(JdbcServicesImpl.java:146)     at org.hibernate.service.internal.StandardServiceRegistryImpl.configureService(StandardServiceRegistryImpl.java:75)     at org.hibernate.service.internal.AbstractServiceRegistryImpl.initializeService(AbstractServiceRegistryImpl.java:159)   at org.hibernate.service.internal.AbstractServiceRegistryImpl.getService(AbstractServiceRegistryImpl.java:131)  at org.hibernate.cfg.SettingsFactory.buildSettings(SettingsFactory.java:71)     at org.hibernate.cfg.Configuration.buildSettingsInternal(Configuration.java:2273)   at org.hibernate.cfg.Configuration.buildSettings(Configuration.java:2269)   at org.hibernate.cfg.Configuration.buildSessionFactory(Configuration.java:1738)     at org.hibernate.ejb.EntityManagerFactoryImpl.<init>(EntityManagerFactoryImpl.java:88)  at org.hibernate.ejb.Ejb3Configuration.buildEntityManagerFactory(Ejb3Configuration.java:904)    at org.hibernate.ejb.Ejb3Configuration.buildEntityManagerFactory(Ejb3Configuration.java:889)    at org.hibernate.ejb.HibernatePersistence.createEntityManagerFactory(HibernatePersistence.java:56)  at javax.persistence.Persistence.createEntityManagerFactory(Persistence.java:83)    at javax.persistence.Persistence.createEntityManagerFactory(Persistence.java:60)    at com.google.inject.persist.jpa.JpaPersistService.start(JpaPersistService.java:94)     at br.net.meditec.Exemplo.server.inject.AppInitializer.<init>(AppInitializer.java:10)   at br.net.meditec.Exemplo.server.inject.AppInitializer$$FastClassByGuice$$96bdac91.newInstance(<generated>)     at com.google.inject.internal.cglib.reflect.$FastConstructor.newInstance(FastConstructor.java:40)   at com.google.inject.internal.DefaultConstructionProxyFactory$1.newInstance(DefaultConstructionProxyFactory.java:60)    at com.google.inject.internal.ConstructorInjector.construct(ConstructorInjector.java:85)    at com.google.inject.internal.ConstructorBindingImpl$Factory.get(ConstructorBindingImpl.java:254)   at com.google.inject.internal.InjectorImpl$4$1.call(InjectorImpl.java:978)  at com.google.inject.internal.InjectorImpl.callInContext(InjectorImpl.java:1024)    at com.google.inject.internal.InjectorImpl$4.get(InjectorImpl.java:974)     at com.google.inject.internal.InjectorImpl.getInstance(InjectorImpl.java:1013)  at br.net.meditec.Exemplo.server.inject.GuiceServletConfig.getInjector(GuiceServletConfig.java:24)  at com.google.inject.servlet.GuiceServletContextListener.contextInitialized(GuiceServletContextListener.java:45)    at org.mortbay.jetty.handler.ContextHandler.startContext(ContextHandler.java:543)   at org.mortbay.jetty.servlet.Context.startContext(Context.java:136)     at org.mortbay.jetty.webapp.WebAppContext.startContext(WebAppContext.java:1220)     at org.mortbay.jetty.handler.ContextHandler.doStart(ContextHandler.java:513)    at org.mortbay.jetty.webapp.WebAppContext.doStart(WebAppContext.java:448)   at com.google.gwt.dev.shell.jetty.JettyLauncher$WebAppContextWithReload.doStart(JettyLauncher.java:468)     at org.mortbay.component.AbstractLifeCycle.start(AbstractLifeCycle.java:39)     at org.mortbay.jetty.handler.HandlerWrapper.doStart(HandlerWrapper.java:130)    at org.mortbay.jetty.handler.RequestLogHandler.doStart(RequestLogHandler.java:115)  at org.mortbay.component.AbstractLifeCycle.start(AbstractLifeCycle.java:39)     at org.mortbay.jetty.handler.HandlerWrapper.doStart(HandlerWrapper.java:130)    at org.mortbay.jetty.Server.doStart(Server.java:222)    at org.mortbay.component.AbstractLifeCycle.start(AbstractLifeCycle.java:39)     at com.google.gwt.dev.shell.jetty.JettyLauncher.start(JettyLauncher.java:672)   at com.google.gwt.dev.DevMode.doStartUpServer(DevMode.java:509)     at com.google.gwt.dev.DevModeBase.startUp(DevModeBase.java:1068)    at com.google.gwt.dev.DevModeBase.run(DevModeBase.java:811)     at com.google.gwt.dev.DevMode.main(DevMode.java:311) 
```

如果我通过 eclipse 运行模块，我会遇到另一个异常：

```
1) Error injecting constructor, javax.persistence.PersistenceException: No Persistence provider for EntityManager named exemplo
  at br.net.meditec.Exemplo.server.inject.AppInitializer.<init>(AppInitializer.java:9)
  while locating br.net.meditec.Exemplo.server.inject.AppInitializer

1 error
    at com.google.inject.internal.InjectorImpl$4.get(InjectorImpl.java:987)
    at com.google.inject.internal.InjectorImpl.getInstance(InjectorImpl.java:1013)
    at br.net.meditec.Exemplo.server.inject.GuiceServletConfig.getInjector(GuiceServletConfig.java:24)
    at com.google.inject.servlet.GuiceServletContextListener.contextInitialized(GuiceServletContextListener.java:45)
    at org.mortbay.jetty.handler.ContextHandler.startContext(ContextHandler.java:543)
    at org.mortbay.jetty.servlet.Context.startContext(Context.java:136)
    at org.mortbay.jetty.webapp.WebAppContext.startContext(WebAppContext.java:1220)
    at org.mortbay.jetty.handler.ContextHandler.doStart(ContextHandler.java:513)
    at org.mortbay.jetty.webapp.WebAppContext.doStart(WebAppContext.java:448)
    at com.google.gwt.dev.shell.jetty.JettyLauncher$WebAppContextWithReload.doStart(JettyLauncher.java:468)
    at org.mortbay.component.AbstractLifeCycle.start(AbstractLifeCycle.java:39)
    at org.mortbay.jetty.handler.HandlerWrapper.doStart(HandlerWrapper.java:130)
    at org.mortbay.jetty.handler.RequestLogHandler.doStart(RequestLogHandler.java:115)
    at org.mortbay.component.AbstractLifeCycle.start(AbstractLifeCycle.java:39)
    at org.mortbay.jetty.handler.HandlerWrapper.doStart(HandlerWrapper.java:130)
    at org.mortbay.jetty.Server.doStart(Server.java:222)
    at org.mortbay.component.AbstractLifeCycle.start(AbstractLifeCycle.java:39)
    at com.google.gwt.dev.shell.jetty.JettyLauncher.start(JettyLauncher.java:672)
    at com.google.gwt.dev.DevMode.doStartUpServer(DevMode.java:509)
    at com.google.gwt.dev.DevModeBase.startUp(DevModeBase.java:1068)
    at com.google.gwt.dev.DevModeBase.run(DevModeBase.java:811)
    at com.google.gwt.dev.DevMode.main(DevMode.java:311)
Caused by: javax.persistence.PersistenceException: No Persistence provider for EntityManager named exemplo
    at javax.persistence.Persistence.createEntityManagerFactory(Persistence.java:89)
    at javax.persistence.Persistence.createEntityManagerFactory(Persistence.java:60)
    at com.google.inject.persist.jpa.JpaPersistService.start(JpaPersistService.java:94)
    at br.net.meditec.Exemplo.server.inject.AppInitializer.<init>(AppInitializer.java:10)
    at br.net.meditec.Exemplo.server.inject.AppInitializer$$FastClassByGuice$$96bdac91.newInstance(<generated>)
    at com.google.inject.internal.cglib.reflect.$FastConstructor.newInstance(FastConstructor.java:40)
    at com.google.inject.internal.DefaultConstructionProxyFactory$1.newInstance(DefaultConstructionProxyFactory.java:60)
    at com.google.inject.internal.ConstructorInjector.construct(ConstructorInjector.java:85)
    at com.google.inject.internal.ConstructorBindingImpl$Factory.get(ConstructorBindingImpl.java:254)
    at com.google.inject.internal.InjectorImpl$4$1.call(InjectorImpl.java:978)
    at com.google.inject.internal.InjectorImpl.callInContext(InjectorImpl.java:1024)
    at com.google.inject.internal.InjectorImpl$4.get(InjectorImpl.java:974)
    ... 21 more 
```

在第一个错误中，似乎没有找到 PostgreSQLDialect，在第二个错误中，似乎没有找到 persistence.xml 本身。

我创建了一个包含以下内容的类，它工作得很好：

```
public class DaoInjectionTest {
    public static void main(String[] args) {
        Injector injector = Guice.createInjector(new DaoModule(),
                new JpaPersistModule("exemplo"));
        injector.getInstance(AppInitializer.class);

        injector.getInstance(RacaDao.class).save(new Raca("cachorro pastor alemao"));
    }
} 
```

所以，我无法理解发生了什么。有人可以帮忙吗？

如果有帮助，[我的项目代码在 github 中](https://github.com/caarlos0/Minicurso-GWT-Meditec/tree/master/Exemplo)。

非常感谢。

# c++ - 使用基类静态 const 变量构造基类，可以吗？

> ID：10056370
> 
> 赞同：1
> 
> 时间：2012-04-07T16:47:38.893
> 
> 标签：c++, inheritance, static, constructor, constants

我有一个基类和派生类。基类构造函数有一些静态 const 变量。可以在派生类构造函数中使用它来构造基类变量吗？

一个示例代码将是

```
 //Base.hpp    
  class Base {
   public:
        Base(int value_, long sizee_);
   private:
        int value;
        int sizee;
   protected:
        static const int ONE = 1;
        static const int TWO = 2;
        static const long INT_SIZE = (long)sizeof(int);
        static const long LONG_SIZE = (long)sizeof(long);
  };

  //Base.cpp
  Base::Base(int value_,int sizee_):value(value_),sizee(sizee_) {
  }

  //Derived.hpp
  class Derived: class Base {
    public:
          Derived();
  };

  //Derived.cpp
  Derived::Derived():Base(ONE+TWO,INT_SIZE+LONG_SIZE) {
  } 
```

这里 ONE,TWO,INT_SIZE,LONG_SIZE 是基类静态变量，我将使用它来构造基类本身。这种方法好吗？请指教。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-07T16:50:27.550

是的，没关系。在您创建`Dervide`对象时，所有`static`成员都已初始化。也就是说，除非你有`static` `Derived`对象。

# multithreading - How Can I fix "The process cannot access the file because it is being used by another process" Error

> ID：10056373
> 
> 赞同：0
> 
> 时间：2012-04-07T16:48:05.777
> 
> 标签：multithreading, c#-4.0, file-io, parallel-processing

As you can see below, I have Parallel.For loop. If run the program while file does not exist , it gives an error like "The process cannot access the file 'C:\ShowTime Error Logs\logFile.txt' because it is being used by another process."

However if file exist there is no error. I'm confused, my code already create the file even if file does not exist. Why it gives me an error if the file does not exist before run the program. And How can I fix it?

Thx

```
ErrorLog el = new ErrorLog();
        Parallel.For(0, 100000, delegate(int i)
    {
        el.WriteToShowTimeLog("logFile", "", "", (i).ToString(), "", "", @"C:\");
    }); 
```

ErrorLog class has a function and static variable

```
private static readonly object lock_ = new object();
    public  void WriteToShowTimeLog(string fileName, string errorMessage, string description, string movieID, string theaterID, string showTimeDate, string folderPath)
    {
        string filePath = folderPath + @"\ShowTime Error Logs\" + fileName + ".txt";
        lock (lock_)
        {

            if (!Directory.Exists(folderPath + @"\ShowTime Error Logs"))
            {
                Directory.CreateDirectory(folderPath + @"\ShowTime Error Logs");
            }

            if (!File.Exists(filePath))
            {
                File.Create(filePath);
            }

            using (StreamWriter dosya = new StreamWriter(filePath,true))
            {

                dosya.WriteLine("TheaterID:        " + theaterID);
                dosya.WriteLine("MovieID:          " + movieID);
                dosya.WriteLine("Show Time Date:   " + showTimeDate);
                dosya.WriteLine("Hata Mesajı:      " + errorMessage);
                dosya.WriteLine("Açıklama:         " + description);
                dosya.WriteLine("Hata Alınan Zaman:" + DateTime.Now);
                dosya.WriteLine("-------------------------------------------------------------------------------------------------------");
                dosya.Close();

            }
        }
    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-07T16:51:26.970

You need to include the file checking and creation in the lock, otherwise you can create it from two separate thread simultaneously, producing the error you see.

**EDIT**

The `File.Create` returns an open file. Then the StreamWriter tries to open it again. You probably should simple set options for the streamwriter to use rather than trying to create it and then re-create it for the StreamWriter.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-07T16:55:01.450

Anything outside the lock can be run in any order by any thread. Don't make assumptions to the contrary. In this case, you might have thread #1 check if the file exists. Since it doesn't, it enters the if clause and thread #2 takes over. Thread #2 checks if the file exists. Since it doesn't, also thread #2 enters the if clause and creates the file. Once thread #1 takes over again, surprise! File has already been created even if it had "just" checked that it didn't exist.

Most output streams will automatically create the file that's having data poured in, so it might not even be necessary to have that section.

# sencha-touch - 为什么在 setActiveItem 之后宽度会发生变化？

> ID：10056374
> 
> 赞同：0
> 
> 时间：2012-04-07T16:48:06.190
> 
> 标签：sencha-touch

我有一个带有“卡片”布局的 MainView 有 2 项：MenuView 和 TestView。当我为 MenuView 设置 Active 时，它​​的宽度等于 MainView 的宽度，即 1280。在点击 menuView 中的按钮后的下一个操作中，我设置了 TestView，但它的宽度仅为 0。谁能为我解释一下？并给我一种将TestView的宽度设置为1280的方法。这是我在sencha touch 1中的代码：

```
'Ext.regController('MainController',{
  'index': function(options){
    if (!Test.views.mainView){
        Test.views.mainView = new Test.views.MainView();
    }

    console.log('mainView width: '+ Test.views.mainView.getWidth());
    console.log('menuView width: '+ Test.views.menuView.getWidth());

    Test.views.mainView.setActiveItem(Test.views.menuView);
},

'start': function(options){
    console.log('testView width: '+ Test.views.testView.getWidth());
    Test.views.mainView.setActiveItem(Test.views.testView);
}
});

Test.views.MainView = Ext.extend(Ext.Panel, {
  fullscreen : 'true',
  layout : 'card',
  cardSwitchAnimation : 'slide',
  initComponent : function (){
    Ext.apply(Test.views, {
        menuView: new Test.views.MenuView(),
        testView: new Test.views.TestView()
    });

    this.items = [Test.views.menuView, Test.views.testView]

    Test.views.MainView.superclass.initComponent.call(this);
}
    });

   Test.views.MenuView = Ext.extend(Ext.Panel,{
initComponent: function(){
    this.startButton = new Ext.Button({
        text: 'Start',
        ui: 'action',
        scope: this,
        handler: function(){
            Ext.dispatch({
                controller: Test.controllers.mainController,
                action: 'start'
            });
        }
    });

    this.exitButton = new Ext.Button({
        text: 'Exit',
        ui: 'action',
        scope: this,
        handler: function(){
        }
    });

    this.items = [this.startButton, this.exitButton]

    Test.views.MenuView.superclass.initComponent.call(this);
 }
  });

  Test.views.TestView = Ext.extend(Ext.Panel,{
   initComponent: function(){
    this.html = 'test';

    Test.views.TestView.superclass.initComponent.call(this);
}
  }); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-09T21:00:55.743

您可以使用 setWidth() 设置宽度；

```
Test.views.testView.setWidth('50px'); 
```

# javascript - 如何记录每个浏览器控制台日志事件

> ID：10056377
> 
> 赞同：1
> 
> 时间：2012-04-07T16:48:32.167
> 
> 标签：javascript, browser, console

将某些内容记录到控制台时是否会触发某些事件？我想获取所有日志并创建一个日志文件并将其发送到服务器进行调试。

我执行的 console.log() 命令很容易，但我也需要它来处理意外错误或警告。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-07T21:06:12.210

如果您需要捕获实际错误，请使用类似这样的内容

```
window.addEventListener('error', onError)
var errors = [];
function onError(message){
    errors.push(message);
} 
```

否则，micha的代码很棒

# android - 如何在活动之间共享 actie sip 会话？（安卓）

> ID：10056379
> 
> 赞同：1
> 
> 时间：2012-04-07T16:49:11.450
> 
> 标签：android, android-activity, sip

我的应用在几个活动中与 sip 服务器连接。我还没有找到将注册的 sip 会话传递给下一个活动的方法。这意味着每次用户进入应用程序内的新活动时，应用程序都需要在 sip 服务器上“重新注册”。

有谁知道解决方案？

亲切的问候，

卢卡斯·斯瓦森堡

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-07T17:44:43.257

我认为一个好的解决方案是在 Android 服务中注册 sip 服务器。当应用程序启动时启动服务，当您的活动在设备上启动/停止时，根据需要绑定/取消绑定到该服务。当最后一个活动退出时，停止服务。

为了使绑定/取消绑定更容易，您可以对您的活动进行超类化并在 onResume() 和 onPause() 中进行适当的调用。

希望对你有用！

# emacs - 如何启动 dired plus

> ID：10056380
> 
> 赞同：3
> 
> 时间：2012-04-07T16:49:23.707
> 
> 标签：emacs, dired

我已将[dired plus](http://emacswiki.org/emacs/DiredPlus)文件放入`~/.emacs.d`，添加`(require 'dired+)`到我的`~/.emacs`文件中并重新启动 Emacs。如何启动 dired plus？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-07T17:00:54.203

Dired+ 将功能添加到 dired，因此您不必像这样启动 Dired+ - 只需像往常一样运行 dired（例如`M-x dired`）并且添加的功能应该可用。

如果 Dired+ 没有加载，请确保它`~/.emacs.d`在您的加载路径中 - 如有必要，将此行添加到您的 init 文件中：

```
(add-to-list 'load-path "~/.emacs.d") 
```

**编辑：**正如 event_jr 所说，您应该避免添加`.emacs.d`到您的`load-path`- 在 中创建一个新目录，在`~/.emacs.d`那里安装您的 Emacs Lisp 文件，然后将该目录添加到`load-path`. 鉴于您安装 Dired+ 文件的位置，我的回答旨在解决您的直接问题，而不是建议在`~/.emacs.d`.

# iphone - NSRangeException 错误

> ID：10056381
> 
> 赞同：0
> 
> 时间：2012-04-07T16:49:24.463
> 
> 标签：iphone, objective-c, xcode

我是 obj c n00b 如果这是一个愚蠢的问题，请原谅我，但是当这个 JSON 调用发生时我的应用程序崩溃了，而且之前没有。我 95% 肯定这与服务器上的 php 调用有关。希望对此有任何想法。:)

谢谢！

这是它打破的地方......

```
else if([ret_st hasPrefix:@"Account veri"]){

    NSMutableArray *Array=[ret_st componentsSeparatedByString:@"_"];
    appDelegate.user_id=[Array objectAtIndex:1]; 
```

NSLog(@"user_id %@",appDelegate.user_id);

2012-04-07 09:43:51.094 App[57919:15e03] request requestType=signup&name=Test&email=test@test.com&password=test&zip=90084&id=22 return_strr 帐户已验证204 2012-04-07 09:43:51.094 App[57919 :15e03] *** 由于未捕获的异常 'NSRangeException' 导致应用程序终止，原因：'*** -[__NSArrayI objectAtIndex:]: index 1 beyond bounds [0 .. 0]' ***第一次抛出调用堆栈：(0x1a23022 0x1e0ccd6 0x1a0f644 0xdb5d 0x10a85d 0x19f7936 0x19f7d3 0x195a790 0x1959d84 0x1959c9b 0x230d7d8 0x230d88a 0x442626 0x279d 0x2065) 终止调用抛出异常

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-07T16:52:46.657

在某个地方，您有一个数组，其中一个对象位于索引 0（边界 [0 .. 0]）处，但您要求索引 1 处的对象（索引 1 超出范围）。检查您的`objectAtIndex:`电话代码。

# php - sql没有插入记录

> ID：10056385
> 
> 赞同：0
> 
> 时间：2012-04-07T16:49:52.663
> 
> 标签：php, mysql, sql

我正在尝试在我的数据库中插入一条记录。这是我的 php 代码：

```
mysql_query("INSERT INTO answers(answer)
        VALUES('answer')");
        if(mysql_affected_rows() > 0) {
            echo "Reply successful!";
        } else {
            echo "We were not able to add your reply.";
            exit();
        } 
```

我确保我已连接到我的数据库。我在另一个我知道我的 sql 会运行的页面上尝试了这个，但它仍然没有插入记录......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-07T16:58:23.703

尝试通过`$answer`而不是`answer`. 您还应该阅读[SQL injection](http://en.wikipedia.org/wiki/Sql_injection)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-07T16:59:17.900

添加

`echo mysql_error();`

看问题

# swing - 点击按钮后 JLabel 不会改变

> ID：10056389
> 
> 赞同：0
> 
> 时间：2012-04-07T16:50:22.897
> 
> 标签：swing, jlabel, settext

基本上，我希望在单击“btnCalculate”按钮时更改“lblIndividualScore”的文本......但是当我单击它时，标签不会改变。我在它后面放了一个 println，我知道一切都被正确计算了……它不会改变。

下面是代码部分，有什么想法吗？

这是动作监听器片段

```
else if (e.getSource() == btnCalculate) {
  setClassification();
  setTargetOrLight();
  setProneTotal();
  setStandingTotal();
  setKneelingTotal();
  setIndividualTotal();
} 
```

这是动作监听器调用的内容

```
public void setClassification() {
  classification = (String)cmbClassification.getSelectedItem();

  if (classification.equals("Senior") && target) {
    txtProne2.setEditable(true);
    txtKneeling2.setEditable(true);
    txtStanding2.setEditable(true);
    txtProne2.setVisible(true);
    txtKneeling2.setVisible(true);
    txtStanding2.setVisible(true);
    lblStanding.setText("Standing");
    lblKneeling.setText("Kneeling");
  }
  else if (classification.equals("Intermediate") || (classification.equals("Senior") && !target)) {
    txtProne2.setEditable(false);
    txtKneeling2.setEditable(false);
    txtStanding2.setEditable(false);
    txtProne2.setVisible(false);
    txtKneeling2.setVisible(false);
    txtStanding2.setVisible(false);
    lblStanding.setText("Standing");
    lblKneeling.setText("Kneeling");
  }
  else {
    txtProne2.setEditable(false);
    txtKneeling2.setEditable(false);
    txtStanding2.setEditable(false);
    txtProne2.setVisible(false);
    txtKneeling2.setVisible(false);
    txtStanding2.setVisible(false);
    lblStanding.setText("Prone");
    lblKneeling.setText("Prone");
  }
}

public void setTargetOrLight() {
  if (((String)cmbTarget.getSelectedItem()).equals("Target Rifle")) {
    target = true;
  }
  else {
    target = false;
  }
}

public void setProneTotal() {
  try {
    if (classification.equals("Senior") && target) {
      int prone1 = 0;
      int prone2 = 0;
      prone1 = Integer.parseInt(txtProne1.getText());
      prone2 = Integer.parseInt(txtProne2.getText());
      proneTotal = prone1 + prone2;
    }
    else if (classification.equals("Intermediate") || (classification.equals("Senior") && !target)) {
      proneTotal = Integer.parseInt(txtProne1.getText());
    }
    else {
      int prone1 = Integer.parseInt(txtProne1.getText());
      int prone2 = Integer.parseInt(txtStanding1.getText()); 
      int prone3 = Integer.parseInt(txtKneeling1.getText()); 
      proneTotal = prone1 + prone2 + prone3;
    }
  }
  catch(NumberFormatException nfe) {
    System.err.println(nfe + ": You must enter a valid number - Prone");
  }
}

public void setStandingTotal() {
  try {
    if (classification.equals("Senior") && target) {
      int standing1 = 0;
      int standing2 = 0;
      standing1 = Integer.parseInt(txtStanding1.getText());
      standing2 = Integer.parseInt(txtStanding2.getText());
      standingTotal = standing1 + standing2;
    }
    else if (classification.equals("Intermediate") || (classification.equals("Senior") && !target)) {
      standingTotal = Integer.parseInt(txtStanding1.getText());
    }
    else {
      standingTotal = 0;
    }
  }
  catch (NumberFormatException nfe) {
    System.err.println(nfe + ": You must enter a valid number - Standing");
  }
}

public void setKneelingTotal() {
  try {
    if (classification.equals("Senior") && target) {
      int kneeling1 = 0;
      int kneeling2 = 0;
      kneeling1 = Integer.parseInt(txtKneeling1.getText());
      kneeling2 = Integer.parseInt(txtKneeling2.getText());
      kneelingTotal = kneeling1 + kneeling2;
    }
    else if (classification.equals("Intermediate") || (classification.equals("Senior") && !target)) {
      kneelingTotal = Integer.parseInt(txtKneeling1.getText());
    }
    else {
      kneelingTotal = 0;
    }
  }
  catch (NumberFormatException nfe) {
    System.err.println(nfe + ": You must enter a valid number - Kneeling");
  }
}

public void setIndividualTotal() {
  individualTotal = proneTotal + kneelingTotal + standingTotal;
  lblIndividualTotal.setText("" + individualTotal);
  System.err.println(individualTotal);
} 
```

如上所述，我有那个结尾 println 'System.err.println(individualTotal);' 打印总数，它确实打印了，所以数字到了，但 lbl 没有改变。

如果您还有其他需要，请告诉我。

编辑：

setClassification() 方法中的 setTexts 也不起作用。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-07T17:16:50.830

请发布[SSCCE](http://sscce.org/)而不是长代码。请参阅下面的示例 SSCCE，它在按下 a`JLabel`时更新 a 的文本`JButton`，并且无需任何花哨的步骤即可工作。当您设法创建一个 SSCCE 来重现您的问题时，您很可能会知道是什么导致了您的问题，如果不知道，我们不必通过不相关的代码行

```
import javax.swing.JButton;
import javax.swing.JFrame;
import javax.swing.JLabel;
import javax.swing.JPanel;
import java.awt.EventQueue;
import java.awt.FlowLayout;
import java.awt.event.ActionEvent;
import java.awt.event.ActionListener;

public class ChangeLabelText {
  public static void main( String[] args ) {
    EventQueue.invokeLater( new Runnable() {
      @Override
      public void run() {
        JFrame frame = new JFrame( "TestFrame" );
        JPanel content = new JPanel( new FlowLayout(  ) );
        final JLabel label = new JLabel( "Label" );
        content.add( label );
        JButton button = new JButton( "Change text" );
        button.addActionListener( new ActionListener() {
          @Override
          public void actionPerformed( ActionEvent e ) {
            label.setText( "Another text" );
          }
        } );
        content.add( button );
        frame.getContentPane().add( content );
        frame.pack();
        frame.setDefaultCloseOperation( JFrame.EXIT_ON_CLOSE );
        frame.setVisible( true );
      }
    } );
  }
} 
```

# c++ - 动态数组堆损坏

> ID：10056390
> 
> 赞同：2
> 
> 时间：2012-04-07T16:50:23.370
> 
> 标签：c++, dynamic, corruption, heap-corruption

我有以下课程：

```
template <typename T>
class matrix
{
private:
    int _n;
    T* array;
public:
    matrix(): _n(0) 
    {
        array = new T[_n * _n];
    }
    matrix(int n): _n(n)
    {
        if( n < 0 )
            throw "Invalid array size!";
        array = new T[_n * _n];
    }
    ~matrix()
    {
        delete[] array;
    }
    void Set(const int x, const int y,const T val)
    {
        if( ( x<0 || x>_n ) && ( y<0 || y>_n) )
            throw "Invalid index";
        array[x*_n + y] = val;
    }
    T& Get(const int x, const int y)
    {
        if( ( x<0 || x>_n ) && ( y<0 || y>_n) )
            throw "Invalid index";
        return array[x*_n + y];
    }
}; 
```

并以这种方式使用它：

```
matrix<int> k(5);
k.Set(5,5,6);
cout<<k.Get(5,5); 
```

问题是调用 Set 时出现堆损坏错误。我究竟做错了什么？（我猜这是我访问它们数组元素的方式）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-07T16:53:47.003

可以在索引 0-4 处访问 5 元素数组。您将 5 传递给`x`and `y`，这会导致在访问`array`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-07T16:54:49.543

C++ 中的数组是 0-base，这意味着如果你有一个数组`int x[5]`，`x[5]`则无效。

你的条件应该是`if( ( x<0 || x>=_n ) && ( y<0 || y>=_n) )`和`if( ( x<0 || x>=_n ) && ( y<0 || y>=_n) )`

要设置最后一个元素，您需要

```
k.Set(4,4,6); 
```

并打印它：

```
cout<<k.Get(4,4); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-07T16:55:17.847

磨损的是你必须从 0 开始计数。如果你创建一个大小为 n*n 的数组，你可以将元素访问到 (n-1)*(n-1)。您的示例创建一个大小为 5*5=25 的数组并尝试访问元素 25。但是 24 是您数组包含的最高元素。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-07T16:56:58.743

您正在将数组以外的索引索引到内存中，这就是您收到错误的原因。

问题在于索引。C++ 中数组的索引从 0 开始，因此对于您的 k(5) 声明，它会生成一个索引为 0-4 的 5 数组，因此索引 5 不是有效的有效索引。您应该将签入集更改为 x>=_n 和 y>=_n，因为 5 的索引无效。

# c++ - g++ 与 python.h，如何编译

> ID：10056393
> 
> 赞同：9
> 
> 时间：2012-04-07T16:50:34.147
> 
> 标签：c++, python, makefile

我用 g++ 编译了一个测试代码，没有任何问题。

```
#include "Python.h"  

int main(int argc, char** argv)  
{  
    Py_Initialize();  
    PyRun_SimpleString("import pylab");  
    PyRun_SimpleString("pylab.plot(range(5))");  
    PyRun_SimpleString("pylab.show()");  
    Py_Exit(0);  
} 
```

`g++ -o test test.cpp -I/usr/include/python2.7/ -lpython2.7` 工作正常并运行。

但是当我尝试将此代码嵌入另一个项目时，它失败了。这真的让我很困惑。

Makefile 如下所示。

```
CXX=g++  
CXXFLAGS=-DIB_USE_STD_STRING -Wall -Wno-switch -g  
ROOT_DIR=..  
BASE_SRC_DIR=${ROOT_DIR}/PosixSocketClient  
INCLUDES=-I${ROOT_DIR}/Shared/ -I${BASE_SRC_DIR} -I/usr/include/python2.7  
LIBRARY=-L/usr/lib/python2.7/config  
TARGET=eu  

$(TARGET):  
    $(CXX) $(CXXFLAGS) $(INCLUDES) -o EClientSocketBase.o -c   $(BASE_SRC_DIR)/EClientSocketBase.cpp  
    $(CXX) $(CXXFLAGS) $(INCLUDES) -o EPosixClientSocket.o -c   $(BASE_SRC_DIR)/EPosixClientSocket.cpp  
    $(CXX) $(CXXFLAGS) $(INCLUDES) -o PosixTestClient.o -c PosixTestClient.cpp  
    $(CXX) $(CXXFLAGS) $(INCLUDES) -o Main.o -c Main.cpp
    $(CXX) $(LIBRARY) -lpython2.7 -o $@ EClientSocketBase.o EPosixClientSocket.o PosixTestClient.o Main.o 

clean:  
    rm -f $(TARGET) *.o 
```

该项目编译良好并运行，我所做的唯一更改是在 Main.cpp 文件中添加测试代码。警告/错误消息显示：

> 在 /usr/include/python2.7/Python.h:8:0 包含的文件中，
> 来自 Main.cpp:15：
> /usr/include/python2.7/pyconfig.h:1158:0：警告：“_POSIX_C_SOURCE”重新定义 [默认启用]
> /usr/include/features.h:163:0: 注意：这是之前定义的位置
> /usr/include/python2.7/pyconfig.h:1180:0: warning: "_XOPEN_SOURCE " redefined [默认启用]
> /usr/include/features.h:165:0: 注意：这是之前定义
> g++ -L/usr/lib/ -lpython2.7 -ldl -lutil -o eu EClientSocketBase的位置.o EPosixClientSocket.o PosixTestClient.o Main.o
> Main.o：在函数Py_Initialize' /home/bbc/TWS/IBJts/cpp/eu-ats/Main.cpp:82 中：未定义对PyRun_SimpleStringFlags' 的引用`main':
> /home/bbc/TWS/IBJts/cpp/eu-ats/Main.cpp:81: undefined reference to`
> `PyRun_SimpleStringFlags'
> /home/bbc/TWS/IBJts/cpp/eu-ats/Main.cpp:83: undefined reference to`
> /home/bbc/TWS/IBJts/cpp/eu-ats/Main.cpp:84：未定义对Py_Exit'collect2 的 引用：ld 返回 1 退出状态 make：*** [eu] 错误 1 `PyRun_SimpleStringFlags'
> /home/bbc/TWS/IBJts/cpp/eu-ats/Main.cpp:85: undefined reference to`

 *有什么帮助吗？谢谢你！

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-08-26T15:22:56.133

看看卢卡斯对答案的评论：

“要摆脱 _POSIX_C_SOURCE 警告，请确保在所有其他头文件之前包含 Python.h。”

我有同样的问题。我使用 Boost Python，所以对我来说，我将 boost/python.hpp 的包含移到了 .cpp 文件的第一行。

（Lukas，将您的评论发布为答案，以便提问的人可以将其标记为正确答案，并且该问题不会在 StackOverflow 中保持“未回答”。）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-04-01T22:36:31.733

这是 Python 中的一个错误：[https ://bugs.python.org/issue1045893](https://bugs.python.org/issue1045893)

如果您首先包含 Python.h，编译器不会抱怨，但 GNU libc 的 /usr/include/features.h 将在定义 _GNU_SOURCE 时覆盖它：

#undef _POSIX_C_SOURCE #define _POSIX_C_SOURCE 200809L #undef _XOPEN_SOURCE #define _XOPEN_SOURCE 700*

# php - 用于 Windows 的 Suhosin

> ID：10056396
> 
> 赞同：2
> 
> 时间：2012-04-07T16:50:54.987
> 
> 标签：php, suhosin

我想知道是否可以在不完全重新编译 php 库的情况下为 php 安装 Suhosin。我环顾四周，只能找到 Linux 和其他 Windows 替代品的资源。我确实偶然发现了一个 Windows 资源，但它需要在启用 Suhosin 的情况下重新编译 php，有没有办法在现有的已编译 php 库上执行此操作？

我尝试`php -f suhosin-patch-5.3.9-0.9.10.patch`在 cmd 中提供控制台输出，但没有编译实际文件，因此此时无法安装扩展。

这是 Windows 资源： [http ://board.deioncube.in/showthread.php?tid=96](http://board.deioncube.in/showthread.php?tid=96)

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-07T17:04:25.557

`-f`是编译解释器的标志，它使解释器执行指定的**php**源代码。suhosin 是 php 解释器的一个补丁，它是用**C**编写的。

所以必须[下载](http://php.net/downloads.php)php解释器的源码，应用suhosin，然后[重新编译](https://wiki.php.net/internals/windows/stepbystepbuild)php。

# ruby-on-rails - 将数组传递给 select_tag

> ID：10056397
> 
> 赞同：13
> 
> 时间：2012-04-07T16:51:00.913
> 
> 标签：ruby-on-rails, select

我目前有这个作为搜索：

```
 <%= form_tag users_path, :controller => 'users', :action => 'townsearch', :method => 'get' do %>
    <%= select_tag :county, params[:county] %>
    <%= submit_tag 'search'%>
 <% end %> 
```

我的用户模型中有以下列表：

```
 COUNTY_OPTIONS = [ "Avon", "Bedfordshire", "Berkshire", "Borders", "Buckinghamshire", "Cambridgeshire","Central",
                 "Cheshire", "Cleveland", "Clwyd", "Cornwall", "County Antrim", "County Armagh", "County Down",
                 "County Fermanagh", "County Londonderry", "County Tyrone", "Cumbria", "Derbyshire", "Devon",
                 "Dorset", "Dumfries and Galloway", "Durham", "Dyfed", "East Sussex", "Essex", "Fife", "Gloucestershire", 
                 "Grampian", "Greater Manchester", "Gwent", "Gwynedd County", "Hampshire", "Herefordshire", "Hertfordshire",
                 "Highlands and Islands", "Humberside", "Isle of Wight", "Kent", "Lancashire", "Leicestershire", "Lincolnshire",
                 "Lothian", "Merseyside", "Mid Glamorgan", "Norfolk", "North Yorkshire", "Northamptonshire", "Northumberland",
                 "Nottinghamshire", "Oxfordshire", "Powys", "Rutland", "Shropshire", "Somerset", "South Glamorgan", "South Yorkshire",
                 "Staffordshire", "Strathclyde", "Suffolk", "Surrey", "Tayside", "Tyne and Wear", "Warwickshire", "West Glamorgan",
                 "West Midlands", "West Sussex", "West Yorkshire", "Wiltshire", "Worcestershire"] 
```

我想知道如何将所有 County_options 列表添加到下拉菜单中？

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2012-04-07T17:04:38.817

查看. [_](http://api.rubyonrails.org/classes/ActionView/Helpers/FormTagHelper.html#method-i-select_tag) _`select_tag`

它说：

```
select_tag(name, option_tags = nil, options = {}) 
```

where`option_tags`是一个包含选择框选项标签的字符串。您可以使用其他辅助方法将容器转换为选项标签字符串。

第一个例子：

```
select_tag "people", options_from_collection_for_select(@people, "id", "name")
# <select id="people" name="people"><option value="1">David</option></select> 
```

这会从特定模型数据生成选择标签。

对于您的示例，您应该使用[`options_for_select`](http://apidock.com/rails/ActionView/Helpers/FormOptionsHelper/options_for_select).

```
<%= form_tag users_path, :controller => 'users', :action => 'townsearch', :method => 'get' do %>
    <%= select_tag :county, options_for_select(User::COUNTY_OPTIONS) %>
    <%= submit_tag 'search'%>
 <% end %> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-07T17:05:55.267

我相信你想使用`collection_select`助手。

[http://api.rubyonrails.org/classes/ActionView/Helpers/FormOptionsHelper.html#M001593](http://api.rubyonrails.org/classes/ActionView/Helpers/FormOptionsHelper.html#M001593)

另见相关：[Rails 中的下拉框](https://stackoverflow.com/questions/995923/drop-down-box-in-rails)

# android - Android - 垂直方向有效，水平方向空白

> ID：10056403
> 
> 赞同：1
> 
> 时间：2012-04-07T16:51:36.820
> 
> 标签：android, android-viewpager, android-orientation

我正在实现一个在垂直方向上按预期工作的 ViewPagerIndicator。当我在水平方向进行测试时，通过在运行时切换（物理转动手机）或当应用程序以水平模式启动时（在应用程序启动之前手机是水平的），我会在 ViewPagerIndicator 应该是的空白处得到一个空白区域。我有一个 layout/main.xml 和 layout-land/main.xml ，其中有几个按预期显示的按钮（在垂直模式下垂直堆叠，在水平模式下作为网格）。当我按下“编辑”按钮时，我启动了编辑活动：

```
public class ATEditActivity extends Activity {
    static final int OFFSCREEN_PAGE_LIMIT = 5;
ViewPager pager = null;

    /** Called when the activity is first created. */
    @Override
    public void onCreate(Bundle savedInstanceState)
    {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.edit);

        int iPage = 2;  // set the page based on caller's intentions
        Bundle bndlExtras = getIntent().getExtras();
        if (bndlExtras != null) {
        iPage = bndlExtras.getInt("PAGE");
        }

        ATViewPagerAdapter adapter = new ATViewPagerAdapter(this);

        pager = (ViewPager) findViewById(R.id.awesomepager);
        pager.setOffscreenPageLimit(OFFSCREEN_PAGE_LIMIT);
        pager.setAdapter(adapter);

        TitlePageIndicator indicator = (TitlePageIndicator) findViewById(R.id.TitlePageIndicator);
        indicator.setViewPager(pager);
        indicator.setCurrentItem(iPage);
    }
} 
```

编辑.xml：

```
<?xml version="1.0" encoding="UTF-8"?>
<LinearLayout
    xmlns:android="http://schemas.android.com/apk/res/android"
    android:background="#FFFFFF"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:layout_marginLeft="0dp"
    android:layout_marginRight="0dp">

<EditText
    android:id="@+id/etName"
    android:inputType="textAutoComplete"
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:background="@drawable/edit_text"
    android:layout_margin="4dp"
    android:hint="@string/name" />

<com.viewpagerindicator.TitlePageIndicator
    android:id="@+id/TitlePageIndicator"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    style="@style/Widget.MyTitlepageIndicator" />

    <android.support.v4.view.ViewPager
        android:id="@+id/awesomepager"
        android:layout_width="match_parent"
        android:layout_height="match_parent" />

</LinearLayout> 
```

关于为什么 ViewPagerIndicator 不会以水平模式显示的任何想法？是否需要更多信息？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-10T23:13:35.283

在尝试了我能想象到的一切三四天之后，我终于确定我的项目中一定有什么东西真的搞砸了，所以我创建了一个新项目，它只包含让 ViewPagerIndicator 工作所需的最少代码量。新项目现在正在使用“开箱即用”的两个方向。我不知道是什么原因导致我的旧项目仅在水平方向上失控，但我会让新项目走上正轨，并在短时间内加快速度，因为它正在按预期工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-07T18:12:58.567

您可能需要覆盖`onConfigurationChanged()`查看[参考](http://developer.android.com/reference/android/app/Activity.html)，因为您的应用需要再次检索资源并绘制所有内容。

# android - NullPointerException 和意图 Android

> ID：10056404
> 
> 赞同：1
> 
> 时间：2012-04-07T16:51:54.237
> 
> 标签：android, android-intent, nullpointerexception, runtimeexception

我有一个开关类来确定手机或平板电脑，并且在创建意图时出现空指针异常。我只是想知道是什么导致了这种情况，因为这两个活动都存在并且开关正常工作，因为它在平板电脑手机上时在开关上出错的意图。

以下是启动相应活动的初始活动的代码：

```
package jack.beastapps.TimerPlus;

import android.app.Activity;
import android.content.Context;
import android.content.Intent;
import android.os.Bundle;
import android.util.DisplayMetrics;

public class SplashScreen extends Activity {
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
}

public boolean isTablet() { 
try { 
    Context context = this;
    // Compute screen size 
    DisplayMetrics dm = context.getResources().getDisplayMetrics(); 
    float screenWidth  = dm.widthPixels / dm.xdpi; 
    float screenHeight = dm.heightPixels / dm.ydpi; 
    double size = Math.sqrt(Math.pow(screenWidth, 2) + 
                            Math.pow(screenHeight, 2)); 

    // Tablet devices should have a screen size greater than 6 inches 
    return size >= 6; 
} catch(Throwable t) { 
    return false; 
}
}{
if ( isTablet() == true ) {
        Intent tablet = new Intent(SplashScreen.this, TabletActivity.class);
       startActivity(tablet);
}
else {
        Intent phone = new Intent(SplashScreen.this, PhoneActivity.class);
        startActivity(phone);
} 
```

这是启动时强制关闭的 logcat：

```
09:34:08.454: E/AndroidRuntime(12322): FATAL EXCEPTION: main
04-07 09:34:08.454: E/AndroidRuntime(12322): java.lang.RuntimeException: Unable to         instantiate activity        
ComponentInfo{jack.beastapps.TimerPlus/jack.beastapps.TimerPlus.SplashScreen}:   java.lang.NullPointerException
04-07 09:34:08.454: E/AndroidRuntime(12322):    at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1880)
04-07 09:34:08.454: E/AndroidRuntime(12322):    at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1981)
04-07 09:34:08.454: E/AndroidRuntime(12322):    at android.app.ActivityThread.access$600(ActivityThread.java:123)
04-07 09:34:08.454: E/AndroidRuntime(12322):    at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1147)
04-07 09:34:08.454: E/AndroidRuntime(12322):    at android.os.Handler.dispatchMessage(Handler.java:99)
04-07 09:34:08.454: E/AndroidRuntime(12322):    at android.os.Looper.loop(Looper.java:137)
04-07 09:34:08.454: E/AndroidRuntime(12322):    at android.app.ActivityThread.main(ActivityThread.java:4424)
04-07 09:34:08.454: E/AndroidRuntime(12322):    at java.lang.reflect.Method.invokeNative(Native Method)
04-07 09:34:08.454: E/AndroidRuntime(12322):    at java.lang.reflect.Method.invoke(Method.java:511)
04-07 09:34:08.454: E/AndroidRuntime(12322):    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:787)
04-07 09:34:08.454: E/AndroidRuntime(12322):    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:554)
04-07 09:34:08.454: E/AndroidRuntime(12322):    at dalvik.system.NativeStart.main(Native Method)
04-07 09:34:08.454: E/AndroidRuntime(12322): Caused by: java.lang.NullPointerException
04-07 09:34:08.454: E/AndroidRuntime(12322):    at android.content.ContextWrapper.getPackageName(ContextWrapper.java:127)
04-07 09:34:08.454: E/AndroidRuntime(12322):    at android.content.ComponentName.<init>(ComponentName.java:75)
04-07 09:34:08.454: E/AndroidRuntime(12322):    at android.content.Intent.<init>(Intent.java:3122)
04-07 09:34:08.454: E/AndroidRuntime(12322):    at jack.beastapps.TimerPlus.SplashScreen.<init>(SplashScreen.java:36)
04-07 09:34:08.454: E/AndroidRuntime(12322):    at java.lang.Class.newInstanceImpl(Native Method)
04-07 09:34:08.454: E/AndroidRuntime(12322):    at java.lang.Class.newInstance(Class.java:1319)
04-07 09:34:08.454: E/AndroidRuntime(12322):    at android.app.Instrumentation.newActivity(Instrumentation.java:1023)
04-07 09:34:08.454: E/AndroidRuntime(12322):    at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1871)
04-07 09:34:08.454: E/AndroidRuntime(12322):    ... 11 more 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-12T18:49:26.290

this 不能在从构造函数调用的方法中使用，因为对象还不存在。您应该在 onCreate() 中创建 Intent。在 onCreate() 之前没有运行来自 Activity 的代码（除了构造函数或静态初始化程序）。所以在 onCreate() 之前你不需要它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-12-12T14:58:29.683

您的代码没有正确缩进，很难理解您在做什么。

你能试试这个吗：（正如@Dirk Jäckel 建议的那样）

```
package jack.beastapps.TimerPlus;

import android.app.Activity;
import android.content.Context;
import android.content.Intent;
import android.os.Bundle;
import android.util.DisplayMetrics;

public class SplashScreen extends Activity {

    public void onCreate(Bundle savedInstanceState) 
    {
        super.onCreate(savedInstanceState);

        if ( isTablet() == true ) {
            Intent tablet = new Intent(SplashScreen.this, TabletActivity.class);
            startActivity(tablet);
        }
        else {
            Intent phone = new Intent(SplashScreen.this, PhoneActivity.class);
            startActivity(phone);
        }
    }

    public boolean isTablet() 
    { 
        try { 
            Context context = this;
            // Compute screen size 
            DisplayMetrics dm = context.getResources().getDisplayMetrics(); 
            float screenWidth  = dm.widthPixels / dm.xdpi; 
            float screenHeight = dm.heightPixels / dm.ydpi; 
            double size = Math.sqrt(Math.pow(screenWidth, 2) + 
                        Math.pow(screenHeight, 2)); 

            // Tablet devices should have a screen size greater than 6 inches 
            return size >= 6; 
        } catch(Throwable t) { 
            return false; 
        }
    }
} 
```

如果您仍然收到错误，请告诉使用

# java - Java 和缓存：预取和对齐？

> ID：10056407
> 
> 赞同：1
> 
> 时间：2012-04-07T16:52:12.620
> 
> 标签：java, caching

在 Java 中，是否存在与 GNU C 扩展`prefetch`等功能的等价物`align(64)`，即高速缓存行对齐？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-07T16:58:36.620

我不知道，因为它在按需编译系统中没有意义。对于 Java，运行时优化器的工作是解决这些问题，最好的结果将取决于当前平台，该平台可能会或可能不会受益于所提供的`prefetch`结构`align`。

# c# - 我可以使用处理器选择我的程序吗？

> ID：10056411
> 
> 赞同：0
> 
> 时间：2012-04-07T16:53:01.257
> 
> 标签：c#

> **可能重复：**
> [如何在 .NET 中设置处理器关联？](https://stackoverflow.com/questions/2510593/how-can-i-set-processor-affinity-in-net)

我有 i7 930x 。我的电脑有 cpu 4core.And 8 处理器（线程 8）
所以.. 处理器 1 , 2 ,3 ,4 .... 8.

但我只想要 1 号处理器。我不想使用其他物理。

c# 是可能的吗？

示例）我的计算程序使用 cpu No1。

```
 my sound program using cpu No2.<br>

        my Network A Program using cpu No1.<br>

        my Network B Program using cpu No3.<br> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-07T16:55:10.903

可以为线程/进程设置处理器关联掩码来完成此操作。对于一些使用线程池和工作队列的高性能程序，它可以提高性能。在所有其他情况下，最好让操作系统处理调度。

# android - 具有editText并排表行的问题

> ID：10056420
> 
> 赞同：0
> 
> 时间：2012-04-07T16:54:04.990
> 
> 标签：android

我无法实现表格行。我的编码不允许我向我的 editText 控件添加自定义宽度。有人可以指出表tableRow2可能存在什么问题吗？我希望英尺和英寸 editText 彼此并排，宽度为 40dp。提前致谢！

```
<TableLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:id="@+id/LinearLayout01" android:layout_width="wrap_content"
android:layout_height="wrap_content" android:orientation="horizontal">

<TableRow android:layout_height="wrap_content" android:id="@+id/tableRow1"
    android:padding="5dp" android:layout_width="fill_parent">

    <TextView android:layout_width="fill_parent"
        android:layout_height="wrap_content" android:text="@string/grainBinType"
        android:textSize="14sp" />

    <Spinner android:id="@+id/spinner1" android:layout_height="wrap_content"
        android:layout_width="200dp" android:paddingLeft="8dp"
        android:entries="@array/grainBinTypes" android:prompt="@string/rfDefault" />

</TableRow>

<TableRow android:layout_height="wrap_content" android:id="@+id/tableRow2"
    android:padding="5dp" android:layout_width="wrap_content">

    <TextView android:layout_width="fill_parent"
        android:layout_height="wrap_content" android:text="@string/radiusOfBin"
        android:textSize="14sp" android:paddingRight="8dp" />

    <EditText android:id="@+id/editTextFeet"
        android:layout_width="40dp" android:layout_height="wrap_content"
        android:inputType="number" android:textColor="#008000" android:ems="10"
        android:paddingRight="8dp" />

    <TextView android:layout_width="fill_parent"
        android:layout_height="wrap_content" android:text="@string/feet"
        android:textSize="14sp" android:paddingRight="8dp" />

    <EditText android:id="@+id/editTextinches"
        android:layout_width="40dp" android:layout_height="wrap_content"
        android:inputType="number" android:textColor="#008000" android:ems="10" />

    <TextView android:layout_width="fill_parent"
        android:layout_height="wrap_content" android:text="@string/inches"
        android:textSize="14sp" />
</TableRow> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-07T17:29:25.613

首先，如果我们使用 tablelayout，那么我们通常使用表格行，并且在每个表格行中，所有元素必须相等。我的意思是在您的第一个表格中，您有两个元素，而在第二个表格中，您有五个元素。那就是问题所在。在第一个表格行中更改微调器 40dp 的宽度也会影响到 Edittext.... 我建议您使用 LinearLayout 来满足您的要求...

使用下面的代码

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@+id/LinearLayout01"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:orientation="vertical" >
<LinearLayout android:layout_height="wrap_content" android:id="@+id/tableRow1"
    android:padding="5dp" android:layout_width="fill_parent">
    <TextView
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="@string/grainBinType"
        android:textSize="14sp" />
    <Spinner android:id="@+id/spinner1" android:layout_height="wrap_content"
        android:layout_width="200dp" android:paddingLeft="8dp"
        android:entries="@array/grainBinTypes" android:prompt="@string/rfDefault" />

</LinearLayout>

<LinearLayout
    android:id="@+id/tableRow2"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:padding="5dp" >

    <TextView
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:paddingRight="8dp"
        android:text="@string/radiusOfBin"
        android:textSize="14sp" />

    <EditText
        android:id="@+id/editTextFeet"
        android:layout_width="40dp"
        android:layout_height="wrap_content"
        android:ems="10"
        android:inputType="number"
        android:paddingRight="8dp"
        android:textColor="#008000" />

    <TextView
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:paddingRight="8dp"
        android:text="@string/feet"
        android:textSize="14sp" />

    <EditText
        android:id="@+id/editTextinches"
        android:layout_width="40dp"
        android:layout_height="wrap_content"
        android:ems="10"
        android:inputType="number"
        android:textColor="#008000" />

    <TextView
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="@string/inches"
        android:textSize="14sp" />
</LinearLayout>

</LinearLayout> 
```

# google-maps - 地图错误：切换视角时标记到处移动。使固定？

> ID：10056424
> 
> 赞同：7
> 
> 时间：2012-04-07T16:55:07.823
> 
> 标签：google-maps, google-maps-api-3, google-maps-markers

谷歌 Javascript 地图 API 3.5

基本问题是，如果您在俯视图中有一个位于固定地标（如消火栓）上方的标记，那么您切换到 45 度视图，则标记不再显示在消火栓顶部。反之亦然（将标记放置在 45 度视图中，然后切换到头顶）。

重现：

在此处查看示例：[www.zingjet.com/maptest.html](http://www.zingjet.com/maptest.html)

- 创建一个带有可拖动标记的基本谷歌地图网页。在具有 45 度图像的区域上具有初始标记/地图位置：（尝试：33.501472920248354，-82.01948559679795）。我不确定它是否会在所有区域都显示此问题，因此请尝试从该点开始。

- 确保您在接近最大值和卫星视图中放大

- 关闭 45 度图像

- 固定点上的位置标记（人行道拐角处、房屋烟囱等）

-更改为 45 度视图。

- 请注意，标记位置已移动

- 尝试旋转 45 度，看看标记如何相对于图像上的原始点移动。

- 切换回头顶，标记位于原始位置。

**为什么它是一个问题**：不知道该信任什么。哪个视图显示该标记的准确位置？无法创建允许人们在一个视图中放置标记并在另一个视图中查看它们的网页。主要矛盾。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-22T15:32:11.500

**更新 2**

> *   **演示：** [http ://bit.ly/IhpeBu](http://bit.ly/IhpeBu)

```
 var map, marker, overlay, latlng, zoom = 20;
        function initialize() {
            latlng = new google.maps.LatLng(33.501472920248354, -82.01948559679795);
            var myOptions = {
                zoom : zoom,
                center : latlng,
                tilt : 0,
                mapTypeId : google.maps.MapTypeId.SATELLITE
            }
            map = new google.maps.Map(document.getElementById("map_canvas"), myOptions);
            overlay = new google.maps.OverlayView();
            overlay.draw = function() {
            };
            overlay.onRemove = function() {
            };
            overlay.setMap(map);
            marker = new google.maps.Marker({
                position : latlng,
                map : map,
                draggable : true,
                title : "Hello World!"
            });

            google.maps.event.addListener(map, 'zoom_changed', function() {
                zoom = map.getZoom();
            });

            google.maps.event.addListener(map, 'dragend', function() {
                overlay.setMap(map);
            });

            google.maps.event.addListener(marker, 'dragend', function(evt) {
                var tilt = map.getTilt();
                latlng = new google.maps.LatLng(evt.latLng.lat(), evt.latLng.lng());
                if(tilt === 45) {
                    var projection = overlay.getProjection();
                    var latlng2pixel = projection.fromLatLngToContainerPixel(marker.getPosition());

                    var delta = 0;
                    switch(zoom) {
                        case 20:
                            delta = 45;
                            break;
                        case 19:
                            delta = 12;
                            break;
                        case 18:
                            delta = 4;
                            break;
                    }
                    latlng = projection.fromContainerPixelToLatLng(new google.maps.Point(latlng2pixel.x, (latlng2pixel.y + delta )));
                }
            });

            google.maps.event.addListener(map, 'tilt_changed', function() {
                var tilt = map.getTilt();
                if(tilt === 45) {
                    var delta = 0;
                    switch(zoom) {
                        case 20:
                            delta = 65;
                            break;
                        case 19:
                            delta = 32;
                            break;
                        case 18:
                            delta = 16;
                            break;
                    }
                    var projection = overlay.getProjection();
                    var latlng2pixel = projection.fromLatLngToContainerPixel(marker.getPosition());
                    var pixel2latlng = projection.fromContainerPixelToLatLng(new google.maps.Point(latlng2pixel.x, (latlng2pixel.y - delta )));
                    marker.setPosition(pixel2latlng);
                } else {
                    marker.setPosition(latlng);
                }
            });
        } 
```

**注意：** 上面的代码工作如下：

1.  应用自定义叠加层以使用； `google.maps.MapCanvasProjection object` ^([文档](https://developers.google.com/maps/documentation/javascript/reference?hl=it-IT#MapPanes))
2.  找到标记的像素位置；
3.  添加到`y`(top = lng) 的 45 度（缩放 20 时为 45 像素）加上`20`标记图标高度的像素（x 始终保持不变，因为度数的变化是一种简单的视错觉；））；
4.  将这些像素位置转换为有效的 latlng 位置；
5.  观察`tilt`方法是否从`0`到`45`，反之亦然，并通过设置新坐标采取相应的行动。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-16T13:05:29.037

您可能要做的就是破解它。就谷歌而言，可能没有错误，并且地图上的点“出现”在不同的地方，因为 45 度视图改变了地图上的视角，因此离散的纬度将如何物理地出现在地图上（缩放变化时可能会发生类似的事情）。您需要做的是弄清楚视图之间的增量是什么，然后挂钩“tilt_changed”事件并适当地调整您的标记。学习 delta 的一种好方法是挂钩“dblclick”事件，以提醒您鼠标所在的 latlng：

```
google.maps.event.addDomListener(map, 'dblclick', function(MouseEvent){
        alert(MouseEvent.latLng.lat()+" "+MouseEvent.latLng.lng());
    }); 
// make sure you disable the maps default zoom on double click 
//or choose a different event or it will get annoying :) 
```

然后 dblclick 标记“应该”的屏幕并创建一个相应地调整标记的函数。从理论上讲，您可以定义一个适用于任何角度的函数，这样您所要做的就是将每个标记的位置传递给tilt_changed 上的函数。让我知道这对你来说是否是一个好的开始:)

# apache - SSL 域名不匹配（仅限 IE9）

> ID：10056429
> 
> 赞同：0
> 
> 时间：2012-04-07T16:55:46.747
> 
> 标签：apache, ssl, internet-explorer-9

您好，提前感谢您的帮助！

这是我安装了 ssl 证书的问题（从 godaddy 到托管在 ec2 实例上的 apache）。在除 IE9 之外的所有情况下，它都可以正常工作。IE9 显示域不匹配错误。Quayls显示相同

[https://www.ssllabs.com/ssldb/analyze.html?d=https%3A%2F%2Famplify-social.com&hideResults=on](https://www.ssllabs.com/ssldb/analyze.html?d=https%3A%2F%2Famplify-social.com&hideResults=on)

两者都显示 domU-12-31-39-10-61-F2 的安全域，而不是 SAN 的 www.amplify-social.com

所有其他人都显示正确的证书[http://www.sslshopper.com/ssl-checker.html#hostname=www.amplify-social.com](http://www.sslshopper.com/ssl-checker.html#hostname=www.amplify-social.com)

我假设 quayls 用来判断不匹配的任何方法都与 IE9 相同，但我终生无法弄清楚如何解决它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-07T17:41:29.193

您显然在服务器上使用多个证书，期望服务器名称指示，客户端在启动连接时请求特定的主机名。

某些客户端不支持此功能（Windows XP 上的任何 Internet Explorer 版本、Java 版本 7（至少）、.Net`SslStream`版本 4.5（至少）以及某些移动设备等）。

当客户端未发送此扩展时，服务器将回退到其默认证书。在这种情况下，它回退到对 有效的证书`domU-...`。

您可以使用以下方法使用 OpenSSL 进行检查：

```
openssl s_client -servername your.server.name -connect your.server.name:443 
```

（尝试使用和不使用服务器名称选项。）

除非您实际上也托管了某些东西，否则请`domU-...`删除该虚拟主机并将您的主网站的虚拟主机设为默认主机（或不要将其设为默认主机）。当然，如果您希望能够在同一个 IP 地址（和端口）上为多个启用 SSL 的虚拟主机提供服务，这将导致问题：没有 SNI，您只能使用一个。

# mysql - 投票系统数据库设计

> ID：10056432
> 
> 赞同：0
> 
> 时间：2012-04-07T16:56:08.087
> 
> 标签：mysql, mongodb, postgresql, redis, database

我需要在系统中存储项目的投票（按 id）。我估计它会有大约 500 万张选票。每张选票包括：

*   投票项目的id
*   用户数据1
*   用户数据2
*   约会时间

“userdata”字段将用于在投票结束时检测作弊者。投票期间，所有选票均应登记。

我需要能够检索两种信息：

*   大约每1分钟）每个“投票项目的id”有多少票
*   大约每 1 小时）在将一些过滤器应用于“用户数据”字段后，每个“投票项目的 id”有多少票（比如两者在某个日期时间间隔内必须是唯一的，或类似的东西）......我不想要能够以 SQL 查询的形式编写这些过滤器...我想遍历所有约 500 万票并创建一个新的表/数据结构，该结构将具有结果，然后将其返回给应用程序

插入投票应该没什么大不了的（大约每秒 2 次，所以我想任何数据库都可以很好地处理它）

我倾向于使用 mongoDB 之类的东西，因为迭代 DB 和创建过滤器需要“脚本”。但也许它可以通过存储过程上的 SQL 或键值（Redis？5mi 投票应该适合小于 2 GB 的 RAM）数据库来解决？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-07T17:05:01.220

我认为图形数据库是您所需要的。我可以推荐 OrientDB (http://www.orienttechnologies.com/)。这是一个非常酷且功能齐全的开源图形数据库。它是用 Java 编写的，但您可以使用不同的客户端驱动程序。1.0 稳定版即将发布（< 2 周）。如果你想试一试，你可以在云端免费使用它（http://www.nuvolabase.com/），所以你不需要安装和配置它。它是完整的模式、混合模式和少模式，支持图形、sql、集群等等，您可以根据需要灵活地对数据进行建模。

# jquery - 我应该使用 expando 还是缓存 jQuery 对象？

> ID：10056433
> 
> 赞同：2
> 
> 时间：2012-04-07T16:56:13.953
> 
> 标签：jquery, sorting

受Learning jQuery 1.3（第三版中没有）的第7章的启发，我整理了这个排序例程：

```
var rows = $table.find('tbody > tr').get();
$.each(rows, function(index, row) {
      var $cell = $(row).children('td').eq(column);
      $(row).data('sortKey',$cell);
});
rows.sort(function(a, b) {
      if ($(a).data('sortKey') < $(b).data('sortKey'))
            return -sortDirection;
      if ($(a).data('sortKey') > $(b).data('sortKey')) 
            return  sortDirection;
      return 0;
}); 
```

但我不喜欢在每一行都使用`$(a)`and `$(b)`。

**问：**有没有办法可以缓存`$(a)`和`$(b)`？作者使用了他称之为*expando*的东西。

> 这种附加到 DOM 元素但不是普通 DOM 属性的属性称为 expando。这是存储键的方便位置，因为我们需要每个表行元素一个。现在，我们可以在比较器函数中检查这个属性，我们的排序明显更快。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-07T17:02:12.547

您可以在此处进行两项优化。

首先是使用[`$.data`](http://api.jquery.com/jquery.data)而不是[`$.fn.data`](http://api.jquery.com/data)：

```
$.data(a, 'sortKey') // quick
$(a).data('sortKey') // slow 
```

这是优越的，因为它不需要构造一个新的 jQuery 对象——你认为这是一个性能问题是正确的。

二是缓存 的结果`data`，所以只需要做一次。

```
rows.sort(function(a, b) {
    var aKey = $.data(a, 'sortKey'),
        bKey = $.data(b, 'sortKey');
    if (aKey < bKey) return -sortDirection;
    if (aKey > bKey) return  sortDirection;
    return 0;
}); 
```

第三个优化（因为一个孤独的答案是买二送一）是使用 jQuery 1.7，它在速度和其他功能上都比 1.3 好得多。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-07T16:58:53.530

当然，只需将它们存储在一个局部变量中，如下所示：

```
rows.sort(function(a, b) {
    var aKey = $(a).data('sortKey');
    var bKey = $(b).data('sortKey');
    if (aKey < bKey) return -sortDirection;
    if (aKey > bKey) return sortDirection;
    return 0;
});​ 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-07T17:01:58.377

作者解释说，您需要将每一行的排序键存储在*某个地方*，但您不必*使用*jQuery 的`.data`工具来存储它。取而代之的是，他选择在 DOM 元素上创建一个新属性：

```
$.each(rows, function(index, row) {
    var $cell = $(row).children('td').eq(column);
    row.sortKey = $cell; // creates a new property!
}); 
```

当然，上面的代码假定不存在已命名的属性`sortKey`（覆盖它，无论它是什么，都可能导致各种问题）。这是一个合理的假设。

之后，您还必须通过用于存储排序键的相同机制来检索排序键：通过访问被比较的两行上的属性：

```
rows.sort(function(a, b) {
      if (a.sortKey < b.sortKey)
            return -sortDirection;
      if (a.sortKey > b.sortKey)
            return  sortDirection;
      return 0;
}); 
```

由于直接访问属性比通过 jQuery`.data`和用于实现它的代码要快得多，因此可以显着提高速度。唯一的缺点是你失去了 jQuery 抽象数据存储的便利性（保证“正常工作”，你不需要关心它是*如何*工作的），因为你现在已经承担了实现数据存储的责任（在这里，通过在 DOM 元素上创建新属性）。

作为说明，作者使用术语“expando”来准确描述所有 JavaScript 对象的这个属性：您可以随时在它们上创建新属性。

# c++ - 试图写一个简单的二十一点，但有错误我不明白

> ID：10056435
> 
> 赞同：1
> 
> 时间：2012-04-07T16:56:34.550
> 
> 标签：c++

我的代码有问题。它给出了随机错误，我不知道为什么.. 我是 C++ 的新手，所以请多多包涵>.>

这是有问题的代码：

```
while (!IsGameOver) {
    struct decktype deck = DeckInit();
    struct card card = PickACard(deck);
    PrintHand(TextCard(card));
} 
```

无论我做什么，'PrintHand' 的参数都会导致编译错误。这是两个功能。

```
char *TextCard(struct card &card) {
    char str[22];
    sprintf(str,"%s of %s (%d)",card_num[card.number],card_type[card.color],card.value);
    return str;
}

struct card PrintHand(char &cardtext) {
    struct card card;
    return card;
} 
```

PrintHand 还没有完成，但我不知道如何使它工作。基本上我想要做的是从 TextCard 提供一个字符串以在 PrintHand 中使用。能否请你帮忙？非常感激。

编辑：

此刻的结构‘卡’是这样的。

```
struct card {
    int color;
    int number;
    int value;
    char *hand;
    int totalvalue;
}; 
```

错误类似于“无法将某物转换为某物”。对不起，我不能更具体：/

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-07T17:13:08.767

`PrintHand`期望对 的引用`char`，但您（即`TextCard`）提供指向 的指针`char`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-07T17:18:22.907

有几个错误。

```
struct card PrintHand(char &cardtext) {
    struct card card;
    return card;
} 
```

不使用cardtext，但真正的错误是从TextCard传递给它的值是char *，所以这应该是`struct card PrintHand(char *cardtext)`

然后：

```
char *TextCard(struct card &card) {
    char str[22];
    sprintf(str,"%s of %s (%d)",card_num[card.number],card_type[card.color],card.value);
    return str;
} 
```

这将返回 str，即堆栈上 str[0] 的地址，并在 TextCard 返回后消失，因此不应**使用**该返回值。`new`函数中 char 数组的一些存储将其返回，并让调用者清理，或者从调用者传入一个 char 数组。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-07T17:34:39.400

您不能创建局部变量并从函数中返回它。改用*malloc*或*new*。

```
char str[22];

char * str = (char *) malloc(22* sizeof(char)); OR
String str = "sometext" + "othertext"; 
```

我不知道，你想在这里做什么：

```
struct card PrintHand(char &cardtext) {
    struct card card;
    return card;
} 
```

如果您只想打印文本，请执行以下操作：

```
void PrintHand(char * cardtext) { // * instead of &
   printf("%s", cardtext);
} 
```

# zombie.js - browser.visit 只是一串html

> ID：10056436
> 
> 赞同：0
> 
> 时间：2012-04-07T16:56:43.797
> 
> 标签：zombie.js, headless-browser

使用zombie.js，

有没有办法直接指定僵尸应该访问的文件：

```
browser.visit('<html><head></head><body><body></html>', ...) 
```

例如：不是 url，只是一个字符串。

我知道它支持`file://path/to/my/page.html`，但我只想直接用标记提供它。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-10T08:27:05.670

Zombie 的主要作者在这里回答了这个问题：[https ://github.com/assaf/zombie/issues/314](https://github.com/assaf/zombie/issues/314)

答案是不。”

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-18T17:41:36.297

Zombie 做不到，但 Capsela[浏览器](http://www.capsela.org/docs/symbols/src/_home_capsela_capsela.org_node_modules_capsela_lib_Browser.js.html)类可以 - 只需在 Browser 的实例上调用 loadDocument。

# sql - 根据非事务性任务的结果更新数据库表的最佳方法是什么

> ID：10056439
> 
> 赞同：2
> 
> 时间：2012-04-07T16:57:02.350
> 
> 标签：sql, transactions

我有一个数据库表，每行代表一个任务。该行还包含一个字段 [Completed]，如果任务已成功完成，则该字段应为 true，否则每隔一段时间为 false。

让我们假设任务由以下函数表示：

```
bool Task(int TaskId); 
```

它在任务成功时返回 true，在失败时返回 false。

根据任务的结果更新任务表的已完成字段的最佳方法是什么？

A 曾想过要接近：

一个。

```
BEGIN TRANSACTION

UPDATE TASKS SET Completed = 1 WHERE TaskId=@SpecificTask

if (Task(SpecificTask))
    COMMIT TRANSACTION
else
    ROLLBACK TRANSACTION 
```

B.

```
if (Task(SpecificTask))
    UPDATE TASKS SET Completed = 1 WHERE TaskId=@SpecificTask 
```

如何避免任务成功但无法完成数据库更新？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-07T18:42:18.053

```
begin tran
if (Task(SpecificTask))
    UPDATE TASKS SET Completed = 1 WHERE TaskId=@SpecificTask
commit 
```

不要对失败的任务使用回滚。它的性能很差，出于语义原因，我也会避免使用它。毕竟你的函数确实成功了，所以 tran 应该有序地提交。

# php - PHP preg_match 范围

> ID：10056440
> 
> 赞同：3
> 
> 时间：2012-04-07T16:57:17.003
> 
> 标签：php, preg-match

我想使用 preg_match 来匹配数字 1 - 21。如何使用 preg_match 做到这一点？如果数字大于 21，我不想匹配任何东西。

```
example preg_match('([0-9][0-1]{0,2})', 'Johnathan 21'); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-07T17:21:42.363

[从上面的评论](https://stackoverflow.com/questions/10056440/php-preg-match-range#comment12869026_10056440)复制：

我建议在 PHP 代码中简单匹配`([0-9]{1,2})`（可能包含在 中`\b`，基于输入格式）并稍后过滤数值。

另请参阅[Raymond Chen 对此主题的看法](http://blogs.msdn.com/b/oldnewthing/archive/2006/05/22/603788.aspx)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-07T17:02:29.987

字面上地：

```
preg_match('~ (1|2|3|4|5|6|7|8|9|10|11|12|13|14|15|16|17|18|19|20|21)$~', 'Johnathan 21'); 
```

但也许这更漂亮：

```
preg_match('~ ([1-9]|1[0-9]|2[01])$~', 'Johnathan 21'); 
```

# c# - 根据当前 URL 创建规范 URL 有什么好处？

> ID：10056449
> 
> 赞同：8
> 
> 时间：2012-04-07T16:58:27.917
> 
> 标签：c#, asp.net-mvc, canonical-link

我有一个用 C# 编写的 MVC3 应用程序，我想为其生成 rel=canonical 标签。在寻找自动实现这一目标的方法时，我遇到了[这篇文章](https://stackoverflow.com/questions/5396724/generating-an-canonical-automatically-for-mvc3-webapplication)。

我在我的开发环境中实现了它，它按预期工作并生成标签，例如

`<link href="http://localhost/" rel="canonical" />`.

我的问题是，这有什么好处？规范 URL 不应该明确指向我想要它指向的位置（即我的生产站点），而不是 URL 碰巧是什么？

我提出这个问题的原因是因为我的托管服务提供商（暂时保持匿名）还生成了另一个指向我的网站的 URL（相同的 IP 地址只是不同的主机名，我不知道为什么，他们声称这是为了反向 DNS 目的- 这是另一个主题）。但是，我已经开始看到我的页面出现在这个镜像 URL 下的 Google 搜索结果中。对 SEO 不利，因为它是“重复内容”。现在，我通过简单地将我的 IIS 站点配置为仅响应对我的站点域的请求来修复它，但是，现在是查看规范 URL 可以在此处提供的解决方案类型的好时机。

使用上面帖子中的解决方案，如果有人要访问镜像站点，rel=canonical 链接标记将输出一个包含 MIRRORED URL 的规范 URL，这根本不是我想要的。`<link rel="canonical" href="http://www.productionsite.com" />`无论地址栏中的 URL是什么，它都应该是，对吧？我的意思是，这不是规范 URL 的重点还是我错过了什么？

假设我是对的，是否有一种公认的通用方法可以为 MVC3 应用程序生成规范 URL？我显然可以为每个页面单独定义它们，或者我可以简单地将`rawUrl.Host`我链接的解决方案中的参数替换为硬编码的域名，我只是想知道为什么我看到这么多人们以这种方式生成规范 URL 的例子似乎不符合目的（至少在我的例子中）。他们试图通过将当前 URL 插入 rel=canonical 链接元素来解决什么问题？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-08T01:57:56.613

很好的问题，您对镜像站点仍然被标记为规范感到满意。实际上，您必须先解决几个问题，然后才能更难地敲击您的“链接汁”。

我怀疑主要原因是因为 MVC 在设计上是一个 URL 重写/路由系统。因此，根据最初请求的 URL 发生的消息，人们正试图将规范链接设置为“确定的”最终 URL 格式，然后重写。话虽如此，我认为您已经拨入了大多数人所拥有的疏忽——即“到达页面的 URL 怎么样，没有预料到并被重写为 URL 的有效、规范路径？” 这里的答案是在你发现它们时重写这些“错误请求”。例如：如果您重写了您的 ISP 的镜像域请求，那么当它到达加载的页面时，它现在是一个有效的 url；这是因为它已被您的重写规则“修复”。有道理？那么你' 您需要更新您的 MVC 路由以处理您的 ISP 创建的错误路由。注意：在构建规范链接值时，您必须确保不使用最初请求的 URL，而是使用最终重写的 URL。

继续阅读我的 WWW 与非 WWW 提示，以及您提到的有关不处理无效 url 的问题。

人们这样做也是因为您的网站已经“镜像”了人们总是忘记的另一个域。“WWW”子域。

信不信由你，尽管存在争议，但许多人表示拥有 www.yourdomain.com/mypage.htm 和 yourdomain.com/mypage.htm 实际上会因“重复”内容而损害您的页面排名。我怀疑这就是人们在那里显示“相同域”的原因，因为它实际上是去掉了“WWW”的域。（我使用重写规则使 www 与 no-www 保持一致。）

此外，请注意“将我的 IIS 站点配置为仅响应对我站点域的请求”，因为如果 Google 仍然在那里看到链接并认为它们是您站点的一部分，它实际上可能只是因为您的页面无法加载而受到惩罚（即404s）我建议有一个重写规则，将它们发送到您的“真实”域，或者*至少*将规范链接设置为仅使用您的“真实”域与WWW一致存在或不存在。（有人争论哪个更好，只要你保持一致，我认为这并不重要。）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-12-15T16:59:21.993

> 他们试图通过将当前 URL 插入 rel=canonical 链接元素来解决什么问题？

**没有任何！**他们只会让事情变得更糟！他们只是被误导了

这件事有误导性的答案，这里还有堆栈溢出，已被**接受**和**投票**！

整个概念是为每个页面生成一个**唯一的链接 ID**，在规范标签中具有不同的内容。

因此，为您的规范标签生成唯一链接的好方法是基于。

**控制器名称**、**动作名称**和**语言**。这 3 个变体将提供**不同的**内容。

**域**，**协议**和**字母大小写** **不！**

请参阅此处的问题和我的答案以获得更好的理解。

[MVC 自动生成 rel="canonical"](https://stackoverflow.com/questions/5396724/generating-an-canonical-automatically-for-mvc3-webapplication/41169178#41169178)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-10-22T00:23:19.697

根据当前 URL 创建规范 URL 没有任何好处。您应该根据数据库信息等静态内容创建规范 URL。例如，如果您的 URL 包括一本书的标题。您应该从数据库中提取该书名，并从那个而不是当前页面的 URL 创建规范 URL。这样，如果缺少部分 URL 并且页面仍然显示，则规范 URL 将始终相同。

# c - 为什么需要说明符限定符列表？

> ID：10056451
> 
> 赞同：1
> 
> 时间：2012-04-07T16:58:37.027
> 
> 标签：c, gcc, bit-fields, specifier

我编译了这个（gcc编译器）：

```
#include <stdio.h>

main() {

    struct {
        a:1;
        b:2;
    } t;

    t.b=6;
    t.a=2;
    printf("%d %d",t.a,t.b);
} 
```

显示的错误是：

'a' 之前的预期说明符限定符列表

为什么在默认情况下将未命名的数据变量作为 int 时需要它。请解释...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-07T17:07:36.460

这是[C 语言标准](http://www.open-std.org/jtc1/sc22/wg14/www/docs/n1124.pdf)所要求的。根据第 6.7.2.1 节第 4 部分：

> 位域的类型应该是 _Bool、signed int、unsigned int 或其他一些实现定义的类型的限定或非限定版本。

# php - MySql在where子句中使用if else获取条件记录

> ID：10056452
> 
> 赞同：0
> 
> 时间：2012-04-07T16:58:40.910
> 
> 标签：php, mysql, sql

在我的网站中，我必须存储两种类型的交货日期合同交货日期和订单的调整交货日期。基本上合同日期是订单时产品的交货日期。调整日期是日期的调整者，可以更小或更大然后合同日期

表如下：

```
id   product_name  condeldat adjdeldate
----------------------------------------
1     drilling      2011-05    2012-01
2     lathe         2012-06 
```

我必须检查是否有任何产品已调整日期然后选择调整日期否则合同日期

完成以下查询：

```
select id,
       product_name,
       if(adjdeldat is not NULL, adjdeldat, condeldat) as delivery_date     
 from orders 
```

上面的查询工作正常，但我必须得到任何交货日期的产品（如果（adjdelcat 不是 NULL，adjdeldat，condetdat））> 去年（现在它将是 2011 年）。所以我的问题是如何在哪里应用相同的条件条款？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-07T17:19:40.717

使用有表达：

```
 select id, product_name,
 if(adjdeldat is not NULL, adjdeldat, condeldat) as delivery_date     
 from orders  HAVING delivery_date BETWEEN 'beginDate' AND 'endDate' 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-07T17:21:25.677

使用派生表/内联视图：

```
SELECT x.id, x.product_name, x.delivery_date  
  FROM (SELECT o.id, o.product_name, IFNULL(o.adjdeldat, o.condeldat) AS delivery_date
          FROM ORDERS o) x
 WHERE x.delivery_date BETWEEN '2011-01-01' AND '2011-12-31' 
```

*   `COALESCE`您可以用 ANSI或 CASE 语句替换 IFNULL
*   始终比较具有相同数据类型的值，否则您的查询不能使用索引（如果存在）
*   根据操作，优化器可能会使用谓词推送（在这种情况下不太可能）将外部查询的过滤推送到内部查询中

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-07T17:04:50.113

您需要使条件等同于`if else`using `AND`,`OR`

试试下面：

```
SELECT id,product_name,if(adjdeldat is not NULL,adjdeldat,condeldat) as delivery_date 
FROM orders  
WHERE ((adjdeldat is NULL and left(condeldat) > 2011) OR left(adjdeldat) > 2011) 
```

对于去年动态获取，您可以使用：

```
(left(curdate(),4)-1) in place of 2011 
```

# android - Android无法保存到数组

> ID：10056455
> 
> 赞同：1
> 
> 时间：2012-04-07T16:58:59.537
> 
> 标签：android, arrays

我有全局数组。当我想以某种方法保存某些东西并从该数组中显示它之后，它会出现错误 NullPointerException。数组是对象类型。代码是这样的

```
class Something {
   public CoordinatesObject[] coordinates;

   Something() {
      coordinates = new CoordinatesObject[4];
   }

   public String myMethod() {
      if (coordinates.length==0){
      coordinates[0] = new CoordinatesObject(0,0);
      }
   }
   return Integer.toString(coordinates[0].getX());
} 
```

怎么了？

对不起，我已经更新了代码。我在构造函数中创建了一个新数组

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-07T17:19:49.737

您使用以下行创建了一个数组：

```
coordinates = new CoordinatesObject[4]; 
```

然后您尝试像这样创建 CoordinatesObject ：

```
if (coordinates.length==0){
     coordinates[0] = new CoordinatesObject(0,0);
} 
```

但是 coordinate.length 将等于 4，这意味着不会创建 CoordinatesObject 类的对象。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-07T17:00:31.030

您实际上需要为数组分配空间，现在您只是没有引用任何内容。

另请注意，数组是固定长度的，您可能需要考虑使用集合（如列表），具体取决于您的需要。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-07T17:02:01.780

您还必须使用 new 创建数组。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-07T17:02:37.977

目前，您有一个 NULL 引用。正如之前的海报所指出的，您需要为您的数组定义和创建一些空间。

# objective-c - IOS 从网络接收视频

> ID：10056460
> 
> 赞同：0
> 
> 时间：2012-04-07T16:59:31.577
> 
> 标签：objective-c, ios, networking, avfoundation, bonjour

**更新** - 我已经修复了下面代码中的一些错误，并且图像显示在另一台设备上，但我还有另一个问题。当视频捕获打开时，“主”设备连续发送数据，有时此捕获出现在“从”设备上，并且在很短的时间内，图像“闪烁”为空白并在短时间内重复此操作。对此有任何想法吗？

我正在开发一个需要将实时摄像头捕获和实时麦克风捕获发送到网络中的另一台设备的应用程序。

我已经使用 TCP 服务器完成了设备之间的连接并使用 bonjour 发布它，这就像一个魅力。

最重要的部分是从“主”设备发送和接收视频和音频，并在“从”设备上渲染。

首先，这里有一段代码，应用程序在其中获取相机样本缓冲区并在 UIImage 中进行转换：

```
@implementation AVCaptureManager (AVCaptureVideoDataOutputSampleBufferDelegate)

- (void)captureOutput:(AVCaptureOutput *)captureOutput didOutputSampleBuffer:(CMSampleBufferRef)sampleBuffer fromConnection:(AVCaptureConnection *)connection
{
  dispatch_sync(dispatch_get_main_queue(), ^{
    NSAutoreleasePool *pool = [[NSAutoreleasePool alloc] init];

    UIImage *image = [self imageFromSampleBuffer:sampleBuffer];
    NSData *data = UIImageJPEGRepresentation(image, 0.2);

    [self.delegate didReceivedImage:image];
    [self.delegate didReceivedFrame:data];

    [pool drain];
  });
}

- (UIImage *) imageFromSampleBuffer:(CMSampleBufferRef) sampleBuffer
{
  CVImageBufferRef imageBuffer = CMSampleBufferGetImageBuffer(sampleBuffer);

  CVPixelBufferLockBaseAddress(imageBuffer, 0);

  size_t width = CVPixelBufferGetWidth(imageBuffer);
  size_t height = CVPixelBufferGetHeight(imageBuffer);
  size_t bytesPerRow = width * 4;

  CGColorSpaceRef colorSpace = CGColorSpaceCreateDeviceRGB();

  void *baseAddress = CVPixelBufferGetBaseAddress(imageBuffer);

  CGContextRef context = CGBitmapContextCreate(
                                               baseAddress,
                                               width,
                                               height,
                                               8,
                                               bytesPerRow,
                                               colorSpace,
                                               kCGImageAlphaNoneSkipFirst | kCGBitmapByteOrder32Little
                                               );

  CGImageRef quartzImage = CGBitmapContextCreateImage(context);

  UIImage *image = [UIImage imageWithCGImage:quartzImage];
  CGImageRelease(quartzImage);
  CGColorSpaceRelease(colorSpace);
  CGContextRelease(context);
  CVPixelBufferUnlockBaseAddress(imageBuffer, 0);

  return image;
}

@end 
```

消息“[self.delegate didReceivedImage:image];” 只是为了测试主设备上的图像捕获，这个图像在捕获设备上工作。

接下来是关于如何将其发送到网络：

```
- (void) sendData:(NSData *)data
{
  if(_outputStream && [_outputStream hasSpaceAvailable])
  {
    NSInteger bytesWritten = [_outputStream write:[data bytes] maxLength:[data length]];

    if(bytesWritten < 0)
      NSLog(@"[ APP ] Failed to write message");

  }
} 
```

看我正在使用 RunLoop 来写入和读取流，我认为这比不断地打开和关闭流要好。

接下来，我在从设备上收到“NSStreamEventHasBytesAvailable”事件，处理此事件的代码是：

```
case NSStreamEventHasBytesAvailable:
      /*I can't to start a case without a expression, why not?*/
      NSLog(@"[ APP ] stream handleEvent NSStreamEventHasBytesAvailable");
      NSUInteger bytesRead;
      uint8_t buffer[BUFFER_SIZE];

      while ([_inputStream hasBytesAvailable])
      {
        bytesRead = [_inputStream read:buffer maxLength:BUFFER_SIZE];
        NSLog(@"[ APP ] bytes read:  %i", bytesRead);

        if(bytesRead)
          [data appendBytes:(const void *)buffer length:sizeof(buffer)];
      }

      [_client writeImageWithData:data];

      break; 
```

BUFFER_SIZE 的值为 32768。我认为 while 块不是必需的，但我使用它是因为如果我在第一次迭代时无法读取所有可用字节，我可以在下一次读取。

所以，这就是重点，流来正确，但在 NSData 上序列化的图像似乎已损坏，接下来，我只是将数据发送到客户端......

```
[_client writeImageWithData:data]; 
```

...并使用客户端类中的数据创建一个 UIImage 像这样简单...

```
[camPreview setImage:[UIImage imageWithData:data]]; 
```

在 camPreview（是的 UIImageView）中，我有一个图像只是为了在屏幕上显示占位符，当我从网络获取图像并传递给 camPreview 时，占位符变为空白。

其他的想法是关于输出，当我开始捕获时，我接收数据的第一部分，我从系统收到这条消息：

> 错误：ImageIO：JPEG 损坏的 JPEG 数据：标记 0xbf 之前的 28 个无关字节
> 
> 错误：ImageIO：JPEG 不支持的标记类型 0xbf

过了一会儿，我收到了这条消息。

关键是找到图像没有显示在“从”设备上的原因。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-10T17:21:51.717

我不确定您发送图像的频率，但即使不是很频繁，我想我也会扫描 JPEG 数据中的 SOI 和 EOI 标记，以确保您拥有所有数据。这是我很快找到的一个[帖子](https://stackoverflow.com/questions/4585527/detect-eof-for-jpg-images)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-16T16:35:52.200

我找到了在渲染之前检查 jpeg 格式的[答案。](https://stackoverflow.com/questions/9265343/imageio-error-jpeg-corrupt-jpeg-data-premature-end-of-data-segment-iphone)

这解决了我的问题，现在我可以显示从“主”ios 设备到“从”ios 设备的视频捕获。

# console - 从控制台读取而不暂停程序

> ID：10056469
> 
> 赞同：2
> 
> 时间：2012-04-07T17:00:41.093
> 
> 标签：console, d

我使用 d 编程语言制作了一个小型 opengl 程序。我想做的是让程序从控制台读取输入。我曾尝试使用 readf()、getc() 和其他一些函数。但我的问题是我不希望程序在寻找输入时暂停。

我试图四处寻找解决方案，但找不到任何解决方案。所以如果有人知道如何检查控制台中是否真的写了一些东西，如果是的话，请阅读。或者如果存在从控制台读取的任何函数，但如果没有写入任何内容，则将被忽略。

我主要想知道如何在 d 中执行此操作，但 c++ 的解决方案也可能有用。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-07T17:06:22.630

您需要使用单独的线程。像这样的事情是在 D 中做到这一点的一种方法：

```
import std.stdio, std.concurrency;

void main()
{
    // Spawn a reader thread to do non-blocking reading.
    auto reader = spawn(()
    {
        // Read console input (blocking).
        auto str = readln();

        // Receive the main thread's TID and reply with the string we read.
        receive((Tid main) { send(main, str); });
    });

    // ... This is where you can do work while the other thread waits for console input ...

    // Let the reader thread know the main thread's TID so it can respond.
    send(reader, thisTid);

    // Receive back the input string.
    receive((string str) { writeln("Got string: ", str); });
} 
```

这会产生一个单独的线程，它会等待控制台输入，而您的主线程可以做其他工作。

# java - 如何让我的 java 代码仅搜索 a 到 z 和 0 到 9

> ID：10056474
> 
> 赞同：-1
> 
> 时间：2012-04-07T17:00:59.583
> 
> 标签：java, encoding, split, char

1.  我的 java 代码运行大约需要 10-15 分钟（输入文件是 7200+ 行长的查询列表）。如何让它在短时间内运行以获得相同的结果？
2.  如何使我的代码仅搜索 aA 到 zZ 和 0 到 9？
3.  如果我不执行 #2，我的输出中的某些字符会显示为“？”。我该如何解决这个问题？

    ```
    // no parameters are used in the main method
    public static void main(String[] args) {

    // assumes a text file named test.txt in a folder under the C:\file\test.txt
    Scanner s = null;
    BufferedWriter out = null;
    try {
        // create a scanner to read from the text file test.txt
        FileInputStream fstream = new FileInputStream("C:\\user\\query.txt");
        DataInputStream in = new DataInputStream(fstream);
        BufferedReader br = new BufferedReader(new InputStreamReader(in));
        // Write to the file
        out = new BufferedWriter(new FileWriter("C:\\user\\outputquery.txt"));

        // keep getting the next String from the text, separated by white space
        // and print each token in a line in the output file
        //while (s.hasNext()) {
        //  String token = s.next();
        //  System.out.println(token);
        //  out.write(token + "\r\n");
        //}
        String strLine="";
        String str="";

         while ((strLine = br.readLine()) != null)   {

                str+=strLine;
                }
               String st=str.replaceAll(" ", "");
               char[]third =st.toCharArray();
              System.out.println("Character     Total");
              for(int counter =0;counter<third.length;counter++){
                  //String ch= "a";
                 char ch= third[counter];
              int count=0;
              for ( int i=0; i<third.length; i++){
                 // if (ch=="a")
                  if (ch==third[i])
              count++;
            }
            boolean flag=false;
            for(int j=counter-1;j>=0;j--){
                //if(ch=="b")
                if(ch==third[j])
            flag=true;
            }
            if(!flag){
            System.out.println(ch+"                  "+count);
            out.write(ch+"                  "+count);
            }
            }

        // close the output file
        out.close();
    } catch (IOException e) {
        // print any error messages
        System.out.println(e.getMessage());
    }
    // optional to close the scanner here, the close can occur at the end of the code
    finally {
        if (s != null) {
            // close the input file
            s.close();
        }
            }
    } 
    ```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-07T17:04:08.473

对于这样的事情，我不会推荐 java，尽管完全有可能使用 GAWK 或类似的东西要容易得多。GAWK 也有类似 java 的语法，所以很容易上手。你应该检查一下。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-07T17:04:29.143

SO 并不是真正提出如此广泛的how-do-I-do-this-question 的地方，但我将向您推荐以下有关[Java 中的正则表达式和文本匹配的](http://javamex.com/tutorials/regular_expressions/string_matches.shtml)页面。此外，请查看[Javadocs 以了解 regexes](http://docs.oracle.com/javase/6/docs/api/java/util/regex/Pattern.html#sum)。

如果您点击该链接，您应该得到您想要的，否则您可以在 SO 上发布更具体的问题。

# javascript - 如何使用 D3 将 javascript 变量显示为文本

> ID：10056475
> 
> 赞同：1
> 
> 时间：2012-04-07T17:01:20.323
> 
> 标签：javascript, d3.js

我是 JavaScript 新手。我正在使用 D3 构建一些图表。我想显示鼠标在 SVG 元素上的点击次数。

目前我可以显示椭圆并可以跟踪椭圆上的点击次数。我想覆盖椭圆上不断变化的鼠标点击次数。

我让它工作，以便显示初始变量，但无法解决如何显示变量更改（即额外的鼠标点击）。我想要它，以便在单击椭圆后立即更新文本。

我的代码如下。

```
<!DOCTYPE html>
<html>
<head>
    <script type="text/javascript" src="http://mbostock.github.com/d3/d3.js"></script>
</head>
<body>
    <div id="viz"></div>
    <script type="text/javascript">
    var clicks = 0;
    var sampleSVG = d3.select("#viz")
        .append("svg:svg")
        .attr("width", 400)
        .attr("height", 800);    
    sampleSVG.append("svg:ellipse")
        .style("stroke", "gray")
        .style("fill", "white")
        .attr("rx", 20)
        .attr("ry", 25)
        .attr("cx", 50)
        .attr("cy", 50)
        .on("mouseover", function(){d3.select(this).style("fill", "aliceblue");})
        .on("mouseout", function(){d3.select(this).style("fill", "white");})
        .on("click", function(){clicks = clicks+1
                    })
    sampleSVG.append("svg:text")
        .text(clicks)
        .attr("x", 50)
        .attr("y", 50)
        .attr("fill", "black"); 
    </script>
</body>
</html> 
```

我尝试将 sampleSVG.text(clicks) 添加到我的 onclick 函数，但它不起作用。

同样作为一个更普遍的问题，我的文本（var clicks）应该附加到sampleSVG还是应该创建一个新变量sampleText并将其覆盖在sampleSVG上？

谢谢您的帮助

R

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-11T16:23:41.107

Saying`sampleSVG.text(clicks)`设置外层 svg:svg 元素的文本内容，删除所有包含的元素；您只想设置 svg:text 元素的文本内容。您可以在单击时选择文本元素：

```
.on("click", function() {
  clicks = clicks + 1;
  sampleSVG.select("text").text(clicks);
}) 
```

或者，当您创建文本元素时，您可以保存对它的引用：

```
var sampleText = sampleSVG.append("text")
    .text(clicks)
    .attr("x", 50) 
```

然后您可以通过单击访问此元素：

```
.on("click", function() {
  clicks = clicks + 1;
  sampleText.text(clicks);
}) 
```

# html - CSS Div 元素仅在有边框时起作用

> ID：10056479
> 
> 赞同：0
> 
> 时间：2012-04-07T17:01:38.707
> 
> 标签：html, css

我正在为一个新的基础设计一个网站，我已将 4 月 15 日定为完成它的最后期限。除了编辑内容和微调设计外，它已准备就绪。在微调中，我正在与一个令人讨厌的小问题搏斗，我想请人帮我解决。问题很简单：除非它周围有边框，否则站点结构中的一个分区将无法按我希望的那样运行。以前从未见过如此不稳定的事情。

该问题似乎与元素在布局中的交互方式有关。首先，有一个包含背景图像的 html 标记，一条小溪的 jpeg，远处有一些建筑物，以及由位于背景图像底部的分区标记 (#greengrass) 创建的绿草丛。div#greengrass 的样式被设置为向下延伸，因为内容 div 位于其顶部，并延长。正是这个#greengrass 元素表现得很笨拙，除非它周围有边框。

具体来说，如果它的边框被移除，它会向上突出并覆盖背景图像，即使定位在背景图像结束的位置。因此，它的向上投影使整个页面背景变为绿色。但是当它有边界时，小溪的背景图像就会像阳光明媚的春日一样明亮。

因此，我有一个问题：为什么分区边界的缺失或存在会影响其行为？这是基金会测试站点的 URL：http: [//postmaterial.org/tests/signin-ap.php](http://postmaterial.org/tests/signin-ap.php)。在顶部中心，我添加了一个链接，可让您在有边框和无边框 div#greengrass 效果之间切换。我不知道标签行为的原因，希望得到解释。谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-07T17:21:49.230

没有#greengrass 的边界，其子元素的负边距顶部会塌陷（并将整个构造拉出视线，向上），因此，#greengrass 不再被顶部向下推得足够多。

边框防止折叠边距，如 display:inline-block 或 display:table 或 float:left 在这种情况下会（溢出：隐藏在这里不是一个选项）。在旧的 IE 中，任何像 zoom:1 这样的 haslayout 触发器都应该这样做。不过，我没有测试它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-07T17:49:51.510

回答您的问题：“为什么该部门边界的缺失或存在会影响其行为？” 我同意 ichao（正如他的回答所述），即利润率下降是问题所在。

但是，我认为解决方案是只保留 a`border-top: 1px solid #009900`因为它只是防止边距崩溃所需的顶部边框。这将防止水平滚动条出现。

# cloud-foundry - 安装 MicroCloudFoundry 时出错

> ID：10056481
> 
> 赞同：0
> 
> 时间：2012-04-07T17:01:49.180
> 
> 标签：cloud-foundry

我正在使用 Fedora-16（64 位）操作系统。我已在 CloudFoundry 注册并下载“ *micro-1.2.0.zip* ”和“*VMware-Player-4.0.2-591240.x86_64.bundle*”。我已经成功安装了“ *VMware-Player* ”。那么如何正确安装“*微云代工*”呢？

当提取它并运行“micro.vmx”文件时，我收到了几条交战消息，最后得到了这个错误消息，

**此内核需要 x86_64 CPU，但仅检测到 i686 CPU。无法启动 - 请使用适合您 CPU 的内核**

如果有人知道我该如何解决这个问题或者安装“ *MicroCloudFoundry* ”的正确方法是什么，请帮助我。谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-09T18:06:58.623

您还必须检查处理器兼容性。这是您可以检查处理器兼容性的链接：

[http://downloads.vmware.com/d/details/processor_check_5_5_dt/dCpiQGhkYmRAZQ](http://downloads.vmware.com/d/details/processor_check_5_5_dt/dCpiQGhkYmRAZQ)

# web-services - 使用 Lisp 的 Web 服务

> ID：10056482
> 
> 赞同：18
> 
> 时间：2012-04-07T17:01:50.450
> 
> 标签：web-services, rest, lisp

我对使用 Lisp 来支持现代 RESTful Web 服务感到好奇，但考虑到许多变体和实现，很难知道从哪里开始。

我确信有人将 Lisp 用于与 Web 相关的应用程序（只是在 SO 显示的问题中搜索），但我想知道是否**有任何 Lisp 实现比其他更适合 Web 服务？**（原生 unicode 支持，例如，内置的网络相关库、性能等）

我不是在寻找 unicode “hacks” 或 web 框架。我最感兴趣的是你开箱即用的东西。尽管我对 CLISP 上的 Common Lisp（作为本科计算机科学课程的一部分的通用多项式计算器）有一些小的经验，但我还没有将自己与任何 Lisp 派生或实现保持一致。很高兴知道这个问题是否有特别好的选择，尤其是那些实际以这种方式使用过 Lisp 的人。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-04-07T18:02:52.100

**[Racket](http://racket-lang.org/)**的标准库包含一个[网络服务器库](http://docs.racket-lang.org/continue/index.html)。我玩过它，但觉得它不适合我喜欢的 Lisp 交互方式。它确实有一些不错的特性，比如基于持续的控制流，所以值得一看。

就个人经验而言，**Common Lisp**是 Web 开发的绝佳选择。这就是我的博客的实现 方式[。Hunchentoot](http://weitz.de/hunchentoot/)简单而强大，而且非常 Lispy。交互式编程得到了支持，并且可以想象，并且有诸如 Websockets 之类的插件（不过我还不需要）。

也就是说，**[Clojure](http://clojure.org/)**中的 Web 编程同样令人愉快。[我已经使用 Clojure 和Noir](http://webnoir.org/)为我的家人实现了一个基于 Web 的社区中心。在风格上，Noir 非常类似于 Hunchentoot 和[cl-who](http://weitz.de/cl-who/)的组合。作为奖励，访问 Java 库非常有用。（在我的例子中，实现 OpenID 登录支持，这在 Common Lisp 中是很困难的，但在 Clojure 中是轻而易举的。）因此，如果您的应用程序需要与第三方 Web 服务或数据格式交互，我建议采取Clojure 又好又长。

REST 接口在 Hunchentoot/Noir 风格的 Web 框架中也很容易实现。在这方面我无法判断 Racket 的 Web 服务器，因为我对它还不够熟悉。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-04-08T07:27:05.123

我知道一个可能适合您的需要：[Clack](http://clacklisp.org/)

Clack 是受 Python 的 WSGI 和 Ruby 的 Rack 启发的 Common Lisp 的 Web 应用程序环境。

希望能帮助到你。

# php - 在 PHP 中显示 MySQL 执行时间

> ID：10056487
> 
> 赞同：0
> 
> 时间：2012-04-07T17:02:11.643
> 
> 标签：php, mysql, counting, decimal-point

我一直在网上寻找这个，但找不到一个好的答案。我有一个小型站点搜索，我想显示执行 mysql 查询所花费的时间（类似于 Google）。我一直在尝试使用 microtime() 但我得到了像 1.342524564267782e25 这样的大字符串......我只想要一个简单的数字，后面有两个小数（0.15）。提前致谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-07T17:04:20.550

使用四舍五入修正小数点

```
$time = microtime();
echo round($time, 2); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-07T17:06:30.330

```
$ms = microtime(true);
mysql_query($sql);
$ms = microtime(true) - $ms;
echo $ms.' secs'; //seconds
echo ($ms * 1000).' millisecs'; //millseconds 
```

# python - Google App Engine 上的 IPv6 到 IPv4

> ID：10056492
> 
> 赞同：1
> 
> 时间：2012-04-07T17:02:31.047
> 
> 标签：python, google-app-engine, ipv6, ipv4

我们使用的服务要求我们提供 V4 格式的 IP。我们驻留在 GAE 上的应用程序报告（使用 python 的 os.environ["REMOTE_ADDR"]）为一些用户提供 V6 格式的 IP。是否可以在 GAE 上将 IP 从 V6 转换为 V4？GAE 是否支持[6to4](http://en.wikipedia.org/wiki/6to4)过渡机制？

谢谢，伊甸园

* * *

更新：虽然无法将 IPv6 转换为 IPv4，但可以将应用程序的访问权限限制为仅限使用 IPv4 的应用程序。在我的情况下，这是一个可以接受的解决方案。请参阅：[GAE IPv6 托管](http://support.google.com/a/bin/answer.py?hl=en&answer=177065)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-07T17:47:00.273

6to4 是一种向只有 IPv4 上行链路的网络提供 IPv6 的已弃用方法。我认为这与您的问题无关。

非常简短的回答：全世界都在慢慢开始启用 IPv6，而 Google 是积极致力于 IPv6 支持的公司之一。您将不得不处理 IPv6 支持。

更长一点的答案：IPv6 是与 IPv4 不同的协议。您不能将 IPv6 地址“转换”为 IPv4 地址。IPv4 地址和 IPv6 地址无关。如果您的应用程序无法处理 IPv6，那么您最好的选择可能是在检测到 IPv6 地址时用“假” IPv4 地址覆盖 os.environ["REMOTE_ADDR"]。

如果您选择了永远不会出现在 Internet 上的内容，例如 192.0.2.0，那么您稍后可以轻松查看哪些条目是由 IPv6 客户端引起的。但是，您将无法再识别客户端，因为 IPv6 地址中的 128 位永远不能放入虚假的 IPv4 地址。如果 IP 地址对您很重要，您真的*应该*调整您的应用程序以正确处理 IPv6...

# objective-c - 从 userdata 在 Objective C/C 中创建 Lua 全局变量

> ID：10056500
> 
> 赞同：0
> 
> 时间：2012-04-07T17:03:57.037
> 
> 标签：objective-c, ios, lua

我正在开发一个库以允许在 iOS 5.x 中编写游戏的 Lua (5.2) 脚本。我创建了一个类并添加了绑定以允许从 Lua 创建和访问它。从 Lua 调用的 C 初始化方法如下所示：

```
static int newGeminiObject(lua_State *L){
    GeminiObject *go = [[GeminiObject alloc] initWithLuaState:L];

    GeminiObject **lgo = (GeminiObject **)lua_newuserdata(L, sizeof(GeminiObject *));
    *lgo = go;

    luaL_getmetatable(L, GEMINI_OBJECT_LUA_KEY);
    lua_setmetatable(L, -2);

    lua_newtable(L);
    lua_setuservalue(L, -2);

    NSLog(@"New GeminiObject created");

    // add this new object to the globall list of objects
    [[Gemini shared].geminiObjects addObject:go];

    return 1;

} 
```

这分配了一个在其他地方设置的元表，以提供对各种方法的访问。此外，它附加一个表作为用户值，以允许脚本代码将属性分配给对象。

我可以毫无问题地在 Lua 脚本中创建这些对象：

```
require "gemini"
x = gemini.new()
x:addEventListener("touch", objectTouched) 
```

这里 objectTouched 是在别处定义的处理触摸事件的 Lua 方法。这里`addEventListener`将它绑定到`touch`事件。

这些对象工作得很好。但是，当我尝试从 C 创建一个时，我遇到了问题。我可以创建对象，但尝试将其分配给全局然后在脚本中调用它失败。

以下 C 代码运行

```
-(void) addRuntimeObject {
    GeminiObject *rt = [[GeminiObject alloc] initWithLuaState:L];
    GeminiObject **lruntime = (GeminiObject **)lua_newuserdata(L, sizeof(GeminiObject *));
    *lruntime = rt;

    // set the metatable - effectively declaring the type for this object
    luaL_getmetatable(L, GEMINI_OBJECT_LUA_KEY);
    lua_setmetatable(L, -2);

    // add a table to hold anything the user wants to add
    lua_newtable(L);
    lua_setuservalue(L, -2);

    // create an entry in the global table
    lua_setglobal(L, "Runtime");

    // empty the stack
    lua_pop(L, lua_gettop(L));
} 
```

这应该定义一个名为“运行时”的全局。试图从这样的脚本中访问这个变量

```
Runtime:addEventListener("enterFrame", enterFrame) 
```

导致以下错误：

`attempt to index global 'Runtime' (a userdata value)`

这是一个 userdata 值，但是当我直接在 Lua 中创建一个时，这似乎并不重要。元表绑定提供对方法和元方法的访问。同样，如果对象是从 Lua 创建的，这很好用，而不是在 C 中创建时。

关于我在这里做错了什么的任何想法，或者从用户数据创建全局的正确方法是什么？

编辑

基于以下关于 GEMINI_OBJECT_LUA_KEY 混淆的评论，我想我会列出绑定中实际使用的代码：

```
static const struct luaL_Reg geminiObjectLib_f [] = {
    {"new", newGeminiObject},
    {NULL, NULL}
};

static const struct luaL_Reg geminiObjectLib_m [] = {
    {"addEventListener", addEventListener},
    {"__gc", geminiObjectGC},
    {"__index", l_irc_index},
    {"__newindex", l_irc_newindex},
    {NULL, NULL}
};

int luaopen_geminiObjectLib (lua_State *L){
    // create the metatable and put it into the registry
    luaL_newmetatable(L, GEMINI_OBJECT_LUA_KEY);

    lua_pushvalue(L, -1); // duplicates the metatable

    luaL_setfuncs(L, geminiObjectLib_m, 0);

    // create a table/library to hold the functions
    luaL_newlib(L, geminiObjectLib_f);

    NSLog(@"gemini lib opened");

    return 1;
} 
```

此代码注册了为`GeminiObjects`. 调用`luaL_newmetatable`创建一个新的元表并将其在注册表中与 key 相关联`GEMINI_OBJECT_LUA_KEY`。 `GEMINI_OBJECT_LUA_KEY`只是在标头中定义的唯一字符串。 `luaL_setfuncs`实际上将函数指针添加到元表，使它们可用作对象的方法。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-10T23:34:43.577

如果有人仍然感兴趣，我从 Lua 邮件列表上的好心人那里得到了我的问题的答案。这里的问题是`luaopen_geminiObjectLib`在我调用`addRuntimeObject`.

由于 iOS 不支持动态库，因此我通过将指向它们的指针添加到Lua 源的`preloadedlibs`数组中来静态添加我的库。`linit.c`不幸的是，以这种方式添加的库直到`require('libname')`在 Lua 脚本中执行后才会加载。由于我在执行 Lua 脚本之前调用了我的`addRuntimeObject`方法，因此尚未加载该库。

解决方案是在同一个文件`luaopen_geminiObjectLib`中添加指向数组的指针。这会导致在 Lua 启动时加载库而无需脚本。`loadedlibs``linit.c``require`

# java - 好的线程设计：“线程中的方法”或“方法中的线程”

> ID：10056507
> 
> 赞同：3
> 
> 时间：2012-04-07T17:04:34.183
> 
> 标签：java, multithreading, algorithm

这只是关于实际线程设计的一般问题。我专门在android上使用Java，但一般设计将是这个问题的更好焦点。

它足够简单，这是线程中更好的方法或方法中的线程。

例子，

假设我们有 3 个方法/功能/随便什么。

```
public void readMail()
{
    //Logic...
}
public void postQuestion()
{
    //Logic...
}
public void answerQuestion()
{
    //Logic...
} 
```

是不是更好

* * *

## A：方法中的线程

```
public void readMail()
{
    new Thread(new Runnable()
    {
        public void run()
        {
            //Logic
        }
    }).start();
} 
```

然后像在任何 OO 情况下一样调用您的方法。说

```
Email.readMail(); 
```

* * *

## B：线程内的方法

```
//note this could be inside a method or a class that extends runnable
new Thread(new Runnable()
{
    public void run()
    {
        readMail();
        postQuestion();
        answerQuestion();
    }
}).start(); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-07T17:05:07.790

第二个选项更适合被重写以使用`Executor`s 等，所以我更喜欢那个版本。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-04-07T17:34:18.040

> 线程内的方法

*   **[+]**如果您的方法不需要确保并发执行的属性，或者它们具有确定性的运行时行为（时间和性能），那么这种方法可以对应用程序的并发进行高级管理；即并发性保持在对象级别而不是方法级别。
*   **[-]**由于并发性保持在线程/对象级别，应用程序可能会失去*响应*性的概念。一个用户可能正在“发布问题”，而另一个用户正在“获取答案”；两者可以同时处理。

> 带方法的线程

*   **[+]**更细粒度的并发控制：每个方法都成为操作系统级别的一个执行单元。这就是为什么正如@LouisWasserman 所提到的，也许利用`Executor`框架会更有意义。
*   **[-]**通常线程*资源丰富*且*昂贵*；所以这意味着当您在高频/负载应用程序中使用对一种方法进行多次调用时，您将遇到性能问题。特别是，如果存在方法间数据/逻辑依赖关系。在这方面，*同步*也成为一个问题，这就是为什么使用*Actor*模型可以提供更多帮助的原因。

我建议阅读更多关于[Actor 模型](http://en.wikipedia.org/wiki/Actor_model)及其可用实现的信息。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-08T15:39:11.033

我更喜欢：

* * *

## C：一个线程一个对象

```
public class Test {
  public static class MailReader implements Runnable {
    public void readMail() {
      //Logic...
    }
    @Override
    public void run() {
      while (!Thread.currentThread().isInterrupted()) {
        readMail();
      }
    }
  }

  public static class QuestionPoster implements Runnable {
    public void postQuestion() {
      //Logic...
    }
    @Override
    public void run() {
      while (!Thread.currentThread().isInterrupted()) {
        postQuestion();
      }
    }
  }

  public static class QuestionAnswerer implements Runnable {
    public void answerQuestion() {
      //Logic...
    }
    @Override
    public void run() {
      while (!Thread.currentThread().isInterrupted()) {
        answerQuestion();
      }
    }
  }
  public static void main(String[] args) throws FileNotFoundException {
    new Thread(new QuestionAnswerer()).start();
    new Thread(new QuestionPoster()).start();
    new Thread(new MailReader()).start();
  }
} 
```

这允许所有的可能性，而无需任何额外的 grok 努力。如果您希望回复的邮件多于发布的问题，请制作更多`MailReader`的 s。

如果你看到

```
for ( int i = 0; i < 10; i++ ) {
  new Thread(new MailReader()).start();
} 
```

您*确切地*知道打算做什么，并且您*知道*这将起作用。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-07T17:13:53.667

在第一个设计 (A) 中，每个方法实际上都是一个单独的线程，而在第二个设计 (B) 中，您只有一个线程。
这在很大程度上取决于您的应用程序逻辑和每个方法执行的操作：
如果您需要并行运行您的方法，那么 A 是正确的答案，但如果您需要在一个线程中顺序执行所有方法，那么 B 将是您的选择。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-07T18:47:44.147

如果您正在构建一个实用程序供其他程序员使用，请注意客户端程序员可能根本不关心线程，可能只想编写一个单线程程序。除非有很好的理由这样做，否则您不应该强迫他们将线程问题拖到一个程序中，否则该程序可以在单线程中正常工作。这是否意味着您的库不能在内部使用线程？不！但是对于*调用者*来说，你的方法应该*是*单线程的（除了它们的返回速度比没有线程实现时更快）。

你怎么能做到这一点？当有人调用你的一个方法时，阻塞调用线程，并将任务传递给一个工作线程池，后者可以并行执行它。工作线程完成任务后，解除对调用线程的阻塞，让它返回一个值给调用者。

通过这种方式，您可以获得并行性的性能优势，而无需强制调用者处理线程问题。

现在，另一方面，即使您决定您的库不需要在*内部*使用线程，您*仍然*应该使其成为线程安全的，因为客户端程序员可能想要使用线程。

换句话说，“方法中的线程”的决定没有理由吗？和“线程中的方法？” 需要耦合。如果这样做有性能优势，您可以使用“线程方法”，但这不应该影响调用者。（他们应该能够调用该方法并取回所需的返回值，而不必担心您是否在内部使用线程）。

如果您的模块是线程安全的，那么它也不会受到*调用者*是否使用线程的影响。所以如果客户端程序员想要使用线程，他们也可以使用“线程中的方法”。在某些情况下，您可能*同时*拥有“线程中的方法”和“方法中的线程”——您的模块可能在内部使用工作线程池 + 任务队列，并且您可能有多个调用者线程将任务推入队列并等待结果。

现在，虽然我说的好像您正在构建一个库，但实际上您可能只是构建供您自己使用的代码。但不管怎样，同样的原则也适用。如果你想使用线程来提高性能，最好将线程的使用封装在接口后面，这样程序的其余部分就不必知道或关心模块 XYZ 是否使用线程。同时，最好让每个模块都是线程安全的，这样调用者就可以决定是否使用线程。

# matlab - Matlab：三角形网格到规则（方形）网格的转换

> ID：10056508
> 
> 赞同：2
> 
> 时间：2012-04-07T17:04:35.463
> 
> 标签：matlab

mI 目前拥有一个心脏的三角形网格模型，该模型已加载到 Matlab 中以供进一步操作。当前的问题是我需要心脏的常规（方形）网格模型才能执行图像的正确纹理映射。任何人都可以提供可以将当前 TRIANGULAR 网格模型转换为常规 SQUARE 模型的函数甚至另一个程序吗？谢谢 ：）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-08T20:16:12.770

FEX 提交[GridTriMesh](http://www.mathworks.ch/matlabcentral/fileexchange/14646-gridtrimesh)取得了不错的成绩。

# c++ - C ++检查向量中是否存在元素

> ID：10056518
> 
> 赞同：3
> 
> 时间：2012-04-07T17:05:48.940
> 
> 标签：c++, vector

我正在使用向量，需要检查向量中的特定位置是否存在元素，例如`myvec[7]`

我需要在循环之外工作，并且能够对向量中的任何给定点执行此检查。使用向量执行此操作的最有效方法是什么？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-07T17:08:03.207

这是您正在寻找的支票：`(myvec.size() >= 8)`。在 C++ 中，向量中没有空白元素 - 即向量元素具有连续索引。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-07T17:29:47.020

有两种方法可以做到这一点。

下一个代码示例将假设我们想要对向量 v 中的元素 v[n] 做一些事情。

*方式一：*

```
if(n<v.size()) 
    //do something with v[n]
else
    //do something else 
```

*方式二：*

```
//do something using v.at(n) instead of v[n] 
```

如果您尝试访问不在向量中的元素，这将引发异常。

使用哪一个？视情况而定。
如果元素不在向量中，你可以工作吗？使用第一种方法。
拥有此元素对您的代码至关重要。使用第二种方法，让 STL 为您检查它的存在，不要忘记捕获异常。

# php - 用 PHP 中的类扩展特征？

> ID：10056520
> 
> 赞同：36
> 
> 时间：2012-04-07T17:06:06.163
> 
> 标签：php, oop, traits

为什么我们不允许在 PHP 中使用类扩展 Traits？

例如：

```
Trait T { }

Class C use T {}
/* or */
Class C extends T {} 
```

这种语法有什么潜在的冲突吗？我不这么认为。

* * *

## 回答 #1

> 赞同：45
> 
> 时间：2012-04-07T17:46:54.147

PHP手册是这样说的：

> Traits 是一种在 PHP 等单继承语言中重用代码的机制。Trait 旨在通过使开发人员能够在生活在不同类层次结构中的几个独立类中自由地重用方法集来减少单继承的一些限制。Traits 和类组合的语义以降低复杂性的方式定义，并避免与多继承和 Mixins 相关的典型问题。

如果你想扩展一个特征，那么它可能应该是一个类。如果您想在一个类中使用一组方法并希望在其他类中使用，但感觉不适合扩展该类（例如。`class Animal extends Vehicle`），那么在 PHP 5.4 中它可以作为一个 trait 很好地工作。

为了更直接地回答这个问题，您不会“扩展”特征，但您可以创建本身使用其他特征的特征。根据 PHP 手册：

```
trait Hello {
    public function sayHello() {
        echo 'Hello ';
    }
}

trait World {
    public function sayWorld() {
        echo 'World!';
    }
}

trait HelloWorld {
    use Hello, World;
}

class MyHelloWorld {
    use HelloWorld;
} 
```

您可以认为这是一种在逻辑组中维护您的特征并引入一些模块化的方法。

编辑：看过一些评论后，我认为值得注意的是，在基类中使用特征也意味着特征在任何扩展它的类中，并且特征的功能优先于基类。将它放在子类中只会使特征的功能对父/基类不可用。

```
Parent > Trait > Child 
```

[http://php.net/manual/en/language.oop5.traits.php](http://php.net/manual/en/language.oop5.traits.php)

* * *

## 回答 #2

> 赞同：32
> 
> 时间：2016-06-07T19:01:18.600

您可以在某种程度上扩展特征。扩展 mrlee 的答案，当你`use`有一个特征时，你可以重命名它的方法。

例如，假设您有一个由您的框架定义的“父”特征：

```
trait FrameworkTrait {
    public function keepMe() {
        // Framework's logic that you want to keep
    }

    public function replaceMe() {
        // Framework's logic that you need to overwrite
    }
} 
```

只需拉入父特征，将其`replaceMe`方法重命名为其他名称，然后定义您自己的`replaceMe`方法。

```
trait MyTrait {
    use FrameworkTrait {
        FrameworkTrait::replaceMe as frameworkReplaceMe;
    }

    public function replaceMe() {
        // You can even call the "parent" method if you'd like:
        $this->frameworkReplaceMe();

        // Your logic here
    }
} 
```

然后在你的课上：

```
class MyClass {
    use MyTrait;
} 
```

现在这个类的对象可以这样做：

```
$obj = new MyClass();

$obj->keepMe();             // calls "parent" trait
$obj->replaceMe();          // calls "child" trait
$obj->frameworkReplaceMe(); // calls "parent" trait 
```

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2012-04-07T17:08:21.407

只有类可以扩展。特征*不是*类。它们可以被类使用/包含，但它们本身不是类。如果您认为需要扩展特征，那么它可能应该是一个类，可能是一个抽象类，而不是一个特征。

# scala - Play 2.0 模板 - Scala `match` 和 `val` 不在视图模板中编译

> ID：10056521
> 
> 赞同：9
> 
> 时间：2012-04-07T17:06:07.367
> 
> 标签：scala, pattern-matching, template-engine, playframework-2.0

我在 Play 2.0 模板中有以下代码：

```
@content.toString.lines.map{
    case line =>     // i put `case` here as another attempt to make it work
    line match {
        case "" => @Html("")
        case _ => <li>@Html(line)</li>   /*CRASH*/
    }   
} 
```

它在标记线上失败，说`not found: value line`. 它的第二个变体：

```
@for(line <- content.toString.lines){
    @line match {                            /*CRASH*/
        case "" => @Html("")
        case _ => <li>@Html(line)</li>
    }   
} 
```

在标记线上失败，声称`'case' expected but identifier found`.

**更新：**

同样的事情适用于`val`：

```
@val headID = "head" 
```

想出`illegal start of simple expression`。

**更新结束**

我想知道，我做错了什么以及如何正确实现Play 模板中的`match-case`结构和分配？`val`

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2012-04-08T17:17:59.147

# `match`在模板中使用表达式

您需要用大括号（“{”和“}”）将模板的 HTML 内容括起来：

```
@for(line <- content.toString.lines) {
  @line match {
    case "" => { }
    case _ => { <li>@Html(line)</li> }
  }
} 
```

在您的特定情况下，以下代码会更好地恕我直言：

```
@content.toString.lines.collect {
  case line if !line.isEmpty => { <li>@Html(line)</li> }
} 
```

# 定义值

您可以使用帮助程序定义值`defining[T](value: T)(usage: T => Html)`：

```
@defining(1 + 2 * 3) { value =>
  <div>@value</div>
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-12-10T09:58:45.737

我发现在外面添加一个 {} 来包含整个代码会起作用

```
@{content.toString.lines.map{ line => 
  line match {
    case "" =>  @Html("")
    case _ => <li>@Html(line)</li> 
}} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-08T10:45:53.250

以下似乎对我有用

```
@content.toString.lines.map{ line => 
    line match {
      case "" =>  @Html("")
     case _ => <li>@Html(line)</li> 
} 
```

眼睛很难看，但是您可以`target/scala-2.9.1/src_managed/main/views/html/index.template.scala`在 play 项目目录中查看它在字符串文字中的内容。

至于 val 分配，我不知道，但[@defining](http://www.playframework.org/documentation/2.0/ScalaTemplates)可能会有所帮助

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-12-14T05:05:23.947

此错误的另一个常见原因是将起始大括号放在单独的行上：

```
@x match {
case y => 
  { //offending brace, put it back on the same line as case
  } //This can go anywhere
} 
```

# php - CakePHP Validation 不显示消息

> ID：10056523
> 
> 赞同：0
> 
> 时间：2012-04-07T17:06:19.010
> 
> 标签：php, validation, cakephp, cakephp-model

我最近才开始使用 CakePHP，并且无法在我为测试表单而创建的联系人应用程序中工作。一旦我`$validate`在模式中设置了数组，星号就会出现在表单上，​​但是，当我提交表单时，我仍然没有收到验证消息。这是我的代码：

**/app/View/Contacts/index.ctp**

```
<h1>Contact Form</h1>
<?php
echo $this->Form->create('Contact');
echo $this->Form->input('name');
echo $this->Form->input('age');
echo $this->Form->end('Submit This Form!!!');
?> 
```

**/app/Controller/ContactsController.php**

```
<?php
    class ContactsController extends AppController {

    public $helpers = array('Html', 'Form');

    public function index() {

    }
}
?> 
```

**/app/Model/Contact.php**

```
<?php
class Contact extends AppModel {
    var $useTable = false;

    public $validate = array(
        'name' => array(
            'rule' => 'notEmpty',
            'message' => 'Cannot leave this field blank.'
        ),
        'age' => array(
            'rule' => 'notEmpty',
            'message' => 'Cannot leave this field blank.'
        )
    );
}
?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-07T17:20:30.533

您的错误很可能出现在您没有向我们展示的代码中：您如何在控制器中处理表单数据。您可能忘记将数据设置为模型。

在此处查看本教程：http: [//www.dereuromark.de/2011/12/15/tools-plugin-part-2-contact-form/](http://www.dereuromark.de/2011/12/15/tools-plugin-part-2-contact-form/)

我猜你的空（！）索引操作。你根本什么都没做。那应该如何触发验证？

我参考上面的链接。它向您展示了如何使用 set() 和 validates() 来验证这样的表单。基本上可以归结为：

```
if ($this->request->is('post') || $this->request->is('put')) {
    $this->ContactForm->set($this->request->data);
    if ($this->ContactForm->validates()) {
    }
} 
```

PS：由于“联系人”在这里并不是一个真正的词，并不意味着应该意味着什么，我建议您将控制器重命名为“ContactController”。这也使网址`/contact`

# objective-c - 当用户从代码中输入错误密码时摇动窗口

> ID：10056528
> 
> 赞同：8
> 
> 时间：2012-04-07T17:06:27.780
> 
> 标签：objective-c, xcode, macos, cocoa

当我们在 OSX 中需要密码的程序中输入错误密码时，窗口会抖动我如何在我的程序中实现它？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-04-07T17:23:18.723

当用户输入错误密码时使用下面的代码

```
static int numberOfShakes = 8;
    static float durationOfShake = 0.5f;
    static float vigourOfShake = 0.05f;

    CGRect frame=[self.view.window frame];
    CAKeyframeAnimation *shakeAnimation = [CAKeyframeAnimation animation];

    CGMutablePathRef shakePath = CGPathCreateMutable();
    CGPathMoveToPoint(shakePath, NULL, NSMinX(frame), NSMinY(frame));
    int index;
    for (index = 0; index < numberOfShakes; ++index)
    {
        CGPathAddLineToPoint(shakePath, NULL, NSMinX(frame) - frame.size.width * vigourOfShake, NSMinY(frame));
        CGPathAddLineToPoint(shakePath, NULL, NSMinX(frame) + frame.size.width * vigourOfShake, NSMinY(frame));
    }
    CGPathCloseSubpath(shakePath);
    shakeAnimation.path = shakePath;
    shakeAnimation.duration = durationOfShake;

    [self.view.window setAnimations:[NSDictionary dictionaryWithObject: shakeAnimation forKey:@"frameOrigin"]];
    [[self.view.window animator] setFrameOrigin:[self.view.window frame].origin]; 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2015-07-31T21:54:31.447

这是@SajjadZare 在 Swift 中的回答：

斯威夫特 2.0：

```
 let numberOfShakes:Int = 8
        let durationOfShake:Float = 0.5
        let vigourOfShake:Float = 0.05

        let frame:CGRect = (self.view.window?.frame)!
        let shakeAnimation = CAKeyframeAnimation()

        let shakePath = CGPathCreateMutable()
        CGPathMoveToPoint(shakePath, nil, NSMinX(frame), NSMinY(frame))

        for _ in 1...numberOfShakes {
            CGPathAddLineToPoint(shakePath, nil, NSMinX(frame) - frame.size.width * CGFloat(vigourOfShake), NSMinY(frame))
            CGPathAddLineToPoint(shakePath, nil, NSMinX(frame) + frame.size.width * CGFloat(vigourOfShake), NSMinY(frame))
        }

        CGPathCloseSubpath(shakePath)
        shakeAnimation.path = shakePath
        shakeAnimation.duration = CFTimeInterval(durationOfShake)
        self.view.window?.animations = ["frameOrigin":shakeAnimation]
        self.view.window?.animator().setFrameOrigin(self.view.window!.frame.origin) 
```

斯威夫特 3.0：

```
let numberOfShakes:Int = 8
    let durationOfShake:Float = 0.5
    let vigourOfShake:Float = 0.05

    let frame:CGRect = (self.view.window!.frame)
    let shakeAnimation = CAKeyframeAnimation()

    let shakePath = CGMutablePath()
    shakePath.move(to: CGPoint(x: NSMinX(frame), y: NSMinY(frame)))

    for _ in 1...numberOfShakes {
        shakePath.addLine(to: CGPoint(x:NSMinX(frame) - frame.size.width * CGFloat(vigourOfShake), y: NSMinY(frame)))
        shakePath.addLine(to: CGPoint(x:NSMinX(frame) + frame.size.width * CGFloat(vigourOfShake), y: NSMinY(frame)))
    }

    shakePath.closeSubpath()
    shakeAnimation.path = shakePath
    shakeAnimation.duration = CFTimeInterval(durationOfShake)
    self.view.window?.animations = ["frameOrigin":shakeAnimation]
    self.view.window?.animator().setFrameOrigin((self.view.window?.frame.origin)!) 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-07T17:31:42.960

我为积木而疯狂。这是一个应该工作的块版本，也是......

```
- (void)shakeView:(UIView *)view times:(NSInteger)times completion:(void (^)(BOOL finished))completion {

    if (times <= 0) {
        completion(YES);
    } else {
        UIViewAnimationOptions options = UIViewAnimationOptionBeginFromCurrentState;
        [UIView animateWithDuration:0.1 delay: 0.0 options: options 
                         animations:^{
                             view.frame = CGRectOffset(view.frame, 6.0, 0.0);  // shake to
                         }
                         completion:^(BOOL finished){
                             [UIView animateWithDuration:0.1 delay: 0.0 options:options 
                                              animations:^{
                                                  view.frame = CGRectOffset(view.frame, -6.0, 0.0);  // shake fro
                                              }
                                              completion:^(BOOL finished) {
                                                  [self shakeView:view times:times-1 completion:completion];
                                              }];
                         }];
    }
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-02-01T22:47:52.620

我就是这样做的：

```
-(void)shakeLayer:(CALayer*)layer{
    int repeats = 4;
    float time = 0.04;
    float movement = 5;
    for(int x = 0; x < repeats; x++){
        dispatch_after(dispatch_time(DISPATCH_TIME_NOW, (int64_t)(x*(time*4) * NSEC_PER_SEC)), dispatch_get_main_queue(), ^{
            CABasicAnimation *posAnimation = [CABasicAnimation animationWithKeyPath:@"transform.translation.x"];
            [posAnimation setFromValue:[NSNumber numberWithFloat:0]];
            [posAnimation setToValue:[NSNumber numberWithFloat:movement]];
            [posAnimation setBeginTime:0.0];
            [posAnimation setDuration:time];

            CABasicAnimation *negAnimation = [CABasicAnimation animationWithKeyPath:@"transform.translation.x"];
            [negAnimation setFromValue:[NSNumber numberWithFloat:movement]];
            [negAnimation setToValue:[NSNumber numberWithFloat:-movement]];
            [negAnimation setBeginTime:time];
            [negAnimation setDuration:time*2];

            CABasicAnimation *posAnimation2 = [CABasicAnimation animationWithKeyPath:@"transform.translation.x"];
            [posAnimation2 setFromValue:[NSNumber numberWithFloat:-movement]];
            [posAnimation2 setToValue:[NSNumber numberWithFloat:0]];
            [posAnimation2 setBeginTime:time*3];
            [posAnimation2 setDuration:time];

            CAAnimationGroup *group = [CAAnimationGroup animation];
            [group setDuration:time*4];
            [group setAnimations:[NSArray arrayWithObjects:posAnimation, negAnimation, posAnimation2, nil]];

            [layer addAnimation:group forKey:nil];
        });
    }
} 
```

# php - 此站点似乎有未经授权的尝试访问您位于以下位置的数据库

> ID：10056538
> 
> 赞同：0
> 
> 时间：2012-04-07T17:07:42.713
> 
> 标签：php, mysql, wordpress

我正在尝试构建我将使用它的自定义 WORDPRESS 备份解决方案。

该文件将在 wp-content 中。

该文件名为backup.php

当我尝试通过调用[http://myblog/wp-content/backup.php](http://myblog/wp-content/backup.php)访问数据库时，出现以下错误：

> 此站点似乎有未经授权的尝试访问您位于[http://myblog.com](http://myblog.com)的数据库。尝试已停止。

PHP 文件：

```
include ('../wp-config.php');

$con = mysql_connect(DB_HOST, DB_USER, DB_PASSWORD);

mysql_query('use ' . DB_NAME, $con);

$username = 'admin';
$password = 'password';

$r = mysql_query("SELECT id FROM " . $table_prefix . "users WHERE user_login = '" .    $username . "' AND user_pass = md5('" . $password . "')", $con);

if (mysql_num_rows($r) > 0) {
    //code for backup here
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-07T18:36:16.603

创建 MySQL 用户帐户时，可以指定该帐户可用于连接的服务器。

肯定有'localhost' 或'%' 的选项（即任何主机）。也可以指定一个命名主机 / 代替。

如果您未指定一个（取决于您如何设置用户帐户），则可能是“localhost”是默认值，并且如果数据库位于与您的 Wordpress 站点不同的主机/域上，那么这可能是原因的问题。

无论哪种方式，都值得检查您用于连接的 DB 用户帐户（DB_USER、DB_PASSWORD 等）是否有权从保存您的 Wordpress 站点的主机/域进行连接。

我快速查看了它在 phpMyAdmin 下的位置，但我现在可以访问的是共享主机，它似乎无法让我看到权限表。phpMyAdmin 主页上通常有一个“Priveliges”链接 - 遵循该链接（并在必要时使用文档），这应该可以让你到达那里。

# c# - 覆盖表单事件

> ID：10056541
> 
> 赞同：1
> 
> 时间：2012-04-07T17:08:16.257
> 
> 标签：c#, winforms, datagridview

我正在尝试覆盖 datagridview 的标准排序方法。如何让应用程序使用我的函数（方法？）而不是默认函数？当用户单击列时应触发此事件。

```
private void dataGridView1_ColumnHeaderMouseClick(object sender, DataGridViewCellMouseEventArgs e)
{
    //Sort stuff.
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-07T17:50:51.727

我认为这个**[主题](http://www.daniweb.com/software-development/csharp/threads/248778/datagridview-my-own-sorting-method)**对你来说会很有趣，因为它符合你的要求。

通常，您可以使用几种技术在 DataGridView 中进行自定义排序，具体取决于您的要求。

1.  使用程序排序。（您需要手动调用 Sort）

2.  使用 SortCompare 事件，该事件将在 ColumnHeaderMouseClick 上调用。（用于绑定 DataGridView）

3.  创建您自己的 System.Collections.IComparer。（用于未绑定的datagridview）

两者都可以在[msdn 页面找到](http://msdn.microsoft.com/en-us/library/ms171608.aspx)。还请找到此[页面](http://msdn.microsoft.com/en-us/library/95scxcdy.aspx)，解释何时可以使用哪种技术。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-07T17:13:15.003

您不能*覆盖*事件，因为在实际控制方法执行*后*引发事件。为了*能够*在您需要扩展控制并覆盖其中的*函数**之前*执行某些操作，如下所示：`DataGrid`

 **伪代码*

```
public class MyDataGrid : DataGridView
{
    public override void ColumnHeaderMouseClick(...)
    {
       //insert here your code and comment last line, so base class will not call it's own implementation

       base.ColumnHeaderMouseClick(...); //after execution of this, the event is reaised
    }
} 
```

Riminder：这是如何处理这种情况的基本方法，您必须检查此代码是否适用于*您的*情况。

希望这可以帮助。*

# asp.net-mvc-3 - asp.net mvc actionlink 使用错误的路由

> ID：10056544
> 
> 赞同：3
> 
> 时间：2012-04-07T17:08:40.190
> 
> 标签：asp.net-mvc-3, asp.net-mvc-2, routing

我遇到了 html.actionlink 的问题。我定义了两条路线：

```
routes.MapRoute(
                "AdminDefault",
                "Admin/{controller}/{action}/{id}",
                new { controller = "Home", action = "Index", id = UrlParameter.Optional }
            );
routes.MapRoute(
                "Default",
                "{controller}/{action}/{id}",
                new { controller = "Page", action = "Details", id = "0" }
            ); 
```

当我希望它使用默认控制器时，actionlink 正在使用 AdminDefault。如何让它使用默认路由而不使用路由链接？

添加更多信息。我有一个简单的操作（home/index），它显示了一个视图（index.cshtml），在那个视图中我有：

```
@Html.ActionLink("About", "About", "Home") 
```

当我希望它是“/Home/About”时，它会生成一个“/Admin/Home/About”的 url，defaultadmin 路由是这样我可以稍后创建链接到 /admin/controller/action 的任何管理页面，但我希望默认生成的 url 不在管理员之下。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-08T01:48:19.027

如果您从区域中的视图中使用 Html.ActionLink，则默认情况下它将将该区域传递给该链接。

要覆盖它，您可以像这样调用 Html.ActionLink ：

```
@Html.ActionLink("linkText", "actionName", "controllerName", new {Area = "AreaName"}, null); 
```

其中'new {Area = "AreaName"}' 是路由对象值，'null' 是 html 属性。

因此，您可以使用 'new {Area = ""}'

# android - hackbook教程中的代码似乎不适用于手机

> ID：10056546
> 
> 赞同：2
> 
> 时间：2012-04-07T17:08:49.423
> 
> 标签：android, facebook

我正在使用来自官方[链接](http://developers.facebook.com/docs/mobile/android/hackbook/)的 hackbook 的代码，但是当我在我的手机上测试它时，会发生一些奇怪的事情。

当我第一次启动时，我按下登录并获得了微调器，但没有出现登录窗口。我的起始页上有 bacj。然后我取消了 facebook，一切正常。我再次安装了 facebook，一切都恢复正常了。但后来我升级了我的 fb 应用程序，也没有工作。我得到以下信息：

1）按下登录按钮什么都不做。似乎正在加载，但随后我进入相同的起始页面 2）按下状态更新让我强制关闭 3）按下请求要求我登录（它应该让我得到一个警告 - 需要登录而不打开登录窗口） 4 ）所有其他选项都会给我警告-请先登录。

有没有人遇到过类似的事情？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-06T14:32:20.397

好吧，这就是我所做的。到目前为止，Facebook 在 SSO 方面存在问题（单点登录——这意味着如果您登录 Facebook，则任何其他使用 Facebook 的应用程序都必须“看到”您已登录）。所以我禁用了 SSO。这意味着即使您在 FB 中登录，当您第一次启动我的应用程序时，您也必须再次登录。这是如何做到的：

在您的代码中进行调用的授权的某处：

```
mFacebook.authorize(activity, permissions, activityCode, listener); replace activityCode with FORCE_DIALOG_AUTH 
```

或者只是谷歌它：禁用 SSO

这是一个有趣的链接，它建议如何正确设置 SSO，这对我也不起作用，所以我选择了 2 号选项 - 禁用 SSO。

[关联](http://sean.lyn.ch/2011/07/android-the-facebook-sdk-sso-and-you/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-12T11:16:41.543

我没有通过第一个屏幕时遇到了同样的问题，登录什么也没做。

我的解决方案是用我自己的程序的 ID 更改 Hackbook AppID（通过在 developers.facebook.com 页面上制作新应用程序获得 ID。

在那之后，该应用程序运行得更好。还有一些“不幸的是，Hackbook for Android 已经停止”的错误，但至少更进一步。

# jquery - Gamequery 的碰撞功能的奇怪行为

> ID：10056550
> 
> 赞同：0
> 
> 时间：2012-04-07T17:09:53.823
> 
> 标签：jquery, collision, gamequery

我正在尝试使用*碰撞（）*处理游戏中的碰撞，但我不明白发生了什么。这是一个摘要：

```
 $("#screen").playground({height: PLAYGROUND_HEIGHT, width: PLAYGROUND_WIDTH});
$.playground().addSprite("wall",{animation:anim_mur, posx: 0, posy: -100, width: PLAYGROUND_WIDTH, height: PLAYGROUND_HEIGHT+300})
    .addSprite("table",{animation:anim_tableau, posx: 459, posy: 122, width: PLAYGROUND_WIDTH, height: PLAYGROUND_HEIGHT});
$.playground().addGroup('enemies', {width: 320, height: 280}).end()
            .addSprite("sp_bed",{animation:anim_bed, posx: PLAYGROUND_WIDTH-400, posy: 210, width: 320, height: 280}) 
```

然后我处理那里的碰撞

```
$("#sp_viseur").collision("#enemies").each(function(){
    alert('test');
    }); 
```

我在另一个函数中用精灵填充“敌人”组。我希望在“sp_viseur”精灵与“enemies”组的精灵碰撞时调用该函数。但该函数从未被调用！我又运行了一些测试，所以我有一个问题：“碰撞”函数如何工作吗？它使用 css 属性（左、上...）还是 gamequery 属性（posx、posy）？

谢谢。

PS：“sp_viseur”像其他精灵一样添加到操场上。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-08T08:57:36.717

抱歉，我意识到我的答案并不完全符合您的要求：

.collision() 不会返回与组的碰撞，因此您必须向 .collision 选择器添加一个将应用于所有敌人精灵的类，例如 .collision('#enemies,.enemies')。Gamequery 使用 posx 和 posy 属性，但如果您使用 .x() 和 .y() 函数，它们应该是同步的。

# eclipse - eclipse，maven，添加依赖项不起作用

> ID：10056551
> 
> 赞同：1
> 
> 时间：2012-04-07T17:10:02.383
> 
> 标签：eclipse, maven

我在 eclipse 中创建了一个 java 项目，maven2 已经安装在 eclipse 中，我为这个项目启用了 Maven 依赖项管理，但是当我想通过键入 cxf 来执行“添加依赖项”时，它一直在搜索一段时间然后我得到了这个：

搜索错误：搜索错误

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-08T02:34:04.190

我发现这个解决方案对我有用。

**解决方案**：在未正确构建的项目中，右键单击该项目并选择`Properties`，然后选择`Mave`n。取消选中标有的框`Resolve dependencies from Workspace projects`，点击`Apply`，然后`OK`。再次右键单击您的项目并执行`Maven->Update Snapshots`（或更新依赖项），当您的项目重新构建时，您的错误应该会消失（如果您启用了自动构建，则会自动消失）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-05-06T07:58:02.887

如果在制作该解决方案之后人们告诉您并且您的**添加依赖项**没有找到 make this，我就会喜欢这个问题。右键单击您的项目和**propoties**转到**maven**并取消选中**Resolve dependencies from workspace project**如果它没有出现则重新启动您的 IDE 在**窗口**中-->**显示视图**-->在添加**maven 存储库**后单击**其他**并在转到**全局后添加它****存储库**->右键单击**中央（****[http://repo.maven.apache.org/maven2l](http://repo.maven.apache.org/maven2l)****）**并单击**重建索引**这将需要很多时间，但请等待，完成后**重新启动**********你的日食。********

 ******* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-08-20T07:54:16.043

我发现这个解决方案对我有用。

在未正确构建的项目中，右键单击该项目并选择属性，然后选择 Maven。

取消选中标有“解决工作区项目中的依赖项”的框，点击应用，然后点击确定。

再次右键单击您的项目并执行 Maven->Update Snapshots（或 Update Dependencies），当您的项目重新构建时，您的错误应该会消失（如果您启用了自动构建，则会自动消失）。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-04-25T20:53:13.557

我有类似的问题。通过执行上述步骤并使用突出显示框中的正则表达式解决了该问题。 [![在此处输入图像描述](../Images/392c78aff758bc92ab607ba3bb5b81f9.png)](https://i.stack.imgur.com/BdkFp.png)******

# ios - 如何在 Interface Builder 中使用 QLPreviewController？

> ID：10056554
> 
> 赞同：4
> 
> 时间：2012-04-07T17:10:38.920
> 
> 标签：ios, cocoa-touch, quicklook

是否可以在 Interface Builder 中使用 QLPreviewController？我正在使用情节提要和 segues，如果也有 QLPreviewController 的表示形式，那就太好了。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-08T14:57:30.093

几周前我问了同样的问题。据我所知，QuickLook 框架没有任何代表。但是以编程方式完成此操作应该不会太难。

我想你有一个 UITableView。然后`QLPreviewControllerDataSource`在您的标头中实现，并在您的实现中使用以下两种方法：

```
- (NSInteger) numberOfPreviewItemsInPreviewController: (QLPreviewController *) controller;
- (id <QLPreviewItem>) previewController: (QLPreviewController *) controller previewItemAtIndex: (NSInteger) index; 
```

不要为单元设置 segue 并离开情节提要方法。而是在`tableView:didSelectRowAtIndexPath:`创建 QLPreviewController 的新实例并将其推送到导航控制器的堆栈中。

```
PreviewController* previewController = [[PreviewController alloc] init];
[previewController setDataSource:self];
[previewController setDelegate:self];
[previewController setCurrentPreviewItemIndex:indexPath.row];
[self.navigationController pushViewController:previewController animated:YES]; 
```

# java - 为什么我的程序不会将信息写入文件？

> ID：10056556
> 
> 赞同：1
> 
> 时间：2012-04-07T17:10:47.130
> 
> 标签：java, file-io, alphabetical

我必须创建一个程序，从已经按字母顺序排列的两个文件中读取名称和 ID 号，并将它们完全按字母顺序组合到第三个文件中。文件的组织方式如下...

姓氏，名字 ID（例如 rbb091020） 姓氏，名字 ID

出于某种原因，我的文件读取了这两个文件并创建了第三个文件，但它没有向第三个文件写入任何内容。

这是我的代码...

```
import java.io.*;
import java.util.Scanner;

public class Combine_Files
{
public static void main(String[]args) throws IOException
{
    String filename1 = "";
    String filename2 = "";
    String combinedFileName = "";
    String response = "";
    String nextName1 = "";
    String nextName2 = "";
    String nextIDNumber1 = "";
    String nextIDNumber2 = "";
    boolean okToOverwrite = false;
    Scanner keyboard = new Scanner(System.in);

    System.out.println("What is the name of the first file?");
    filename1 = keyboard.nextLine();

    File file1 = new File(filename1);

    if (!file1.exists())
    {
        System.out.println(file1 + " does not exist.\nTerminating Program.");
        System.exit(0);
    }

    System.out.println("What is the name of the second file?");
    filename2 = keyboard.nextLine();

    File file2 = new File (filename2);
    if (!file2.exists())
    {
        System.out.println(file2 + " does not exist.\nTerminating Program.");
        System.exit(0);
    }   

    System.out.println("What is the name of the file that you wish to create?");
    combinedFileName = keyboard.nextLine();
    File combinedFile = new File (combinedFileName);

    while (combinedFile.exists() && !okToOverwrite)
    {
        System.out.println("\nError, a file named " +
            combinedFileName + " already exists." +
            "\nWould you like to overwrite this file?" +  
            "\nEnter Y for Yes or N for No.");
        response = keyboard.nextLine();

        // Add input validation on response

        if (response.equalsIgnoreCase("Y"))
        {
            okToOverwrite = true;
        }
        else 
        {
            System.out.println("Enter a new filename.");
            combinedFileName = keyboard.nextLine();
            combinedFile = new File(combinedFileName);
        }
    }

    if (file1.exists() && file2.exists())
    {

        Scanner list1 = new Scanner(file1);
        Scanner list2 = new Scanner(file2);
        PrintWriter outputFile = new PrintWriter(combinedFile);

            while (list1.hasNext() && list2.hasNext())
            {
                nextName1 = list1.nextLine();
                nextName2 = list2.nextLine();

                if(nextName1.compareToIgnoreCase(nextName2) <0)
                {
                    outputFile.print(nextName1);
                    nextName1 = list1.nextLine();
                    outputFile.print(nextName1);
                }
                else if(nextName1.compareToIgnoreCase(nextName2) >0)
                {
                    outputFile.println(nextName2);
                    nextName2 = list2.nextLine();
                    outputFile.println(nextName2);
                }
                else
                {
                    outputFile.println(nextName1);
                    nextName1 = list1.nextLine();
                    outputFile.println(nextName1);
                    outputFile.println(nextName2);
                    nextName2 = list2.nextLine();
                    outputFile.println(nextName2);
                }       
            }

            while (list1.hasNext() && !list2.hasNext())
            {
                outputFile.println(nextName1);
            }

            while (list2.hasNext() && !list1.hasNext())
            {
                outputFile.println(nextName2);
            }       
    }
}   
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-07T17:16:26.527

当您使用编写器类时，`PrintWriter`您需要确保`flush()`每次要将某些内容打印到 STDOUT 或文件时都调用该方法。所以基本上每当你调用`PrintWriter`它写入内部缓冲区的任何打印方法时，调用`flush()`都会将缓冲区发送到适当的输出流。

```
 while (list1.hasNext() && list2.hasNext())
        {
            nextName1 = list1.nextLine();
            nextName2 = list2.nextLine();

            if(nextName1.compareToIgnoreCase(nextName2) <0)
            {
                outputFile.print(nextName1);
                nextName1 = list1.nextLine();
                outputFile.print(nextName1);
            }
            else if(nextName1.compareToIgnoreCase(nextName2) >0)
            {
                outputFile.println(nextName2);
                nextName2 = list2.nextLine();
                outputFile.println(nextName2);
            }
            else
            {
                outputFile.println(nextName1);
                nextName1 = list1.nextLine();
                outputFile.println(nextName1);
                outputFile.println(nextName2);
                nextName2 = list2.nextLine();
                outputFile.println(nextName2);
            }
            outputFile.flush(); // <--- flush added here       
        }

        while (list1.hasNext() && !list2.hasNext())
        {
            outputFile.println(nextName1);
            outputFile.flush(); // <--- flush added here 
        }

        while (list2.hasNext() && !list1.hasNext())
        {
            outputFile.println(nextName2);
            outputFile.flush(); // <--- flush added here 
        } 
```

这些调用`flush()`应该写入文件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-07T17:21:32.663

这个程序有逻辑错误。当我使用长度不均匀的文件进行测试时，它会在最后两个 while 循环之一中陷入无限循环，并且确实会写入输出文件，直到程序被强制终止。如果文件长度相同，则扫描仪无法读取 if/else 子句之一中的一行。

# iphone - IOS上的SQLite与phonegap

> ID：10056559
> 
> 赞同：2
> 
> 时间：2012-04-07T17:11:25.367
> 
> 标签：iphone, ios, sqlite, cordova

我可以使用 phonegap（没有限制）将 Sqlite 与 IOS 一起使用吗？如果您有任何基于此主题的文章或论文，请提供给我。非常感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-07T17:17:51.243

这是您问题的一个很好的答案.... [https://stackoverflow.com/a/8395768/919545](https://stackoverflow.com/a/8395768/919545)

# sql - 使用excel连接到远程sql数据库

> ID：10056560
> 
> 赞同：3
> 
> 时间：2012-04-07T17:11:47.300
> 
> 标签：sql, excel

我正在使用 SQL Server 2008 R2 和 Microsoft Excel。

*   我将服务器设置为通过 Windows 用户*或*数据库用户登录
*   我**可以**使用数据库用户登录数据库
*   我**可以**使用我的 Silverlight 应用程序连接到数据库
*   我**无法**弄清楚如何在 Excel 中从远程 PC 连接

我去了 Excel -> 数据 -> 从其他来源 -> 从 SQL Server

我的服务器名称是`WIN2K8-01\DATABASENAME`，所以在 Excel 中我输入`IP\WIN2K8-01\DATABASENAME`了用户名和密码。

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-04-11T23:05:47.877

无法连接到 SQL Server 可能有多种原因：

A) 它不允许远程连接

B）有防火墙或其他任何东西可以避免远程计算机连接

C) 您没有运行 SQL Browser 服务

故障排除步骤：

1）在远程计算机中打开 cmd 并运行`ping win2k8-01`您应该从您的计算机获得响应。如果不是，则存在网络连接问题

2）检查“SQL Browser服务”是否正在您的计算机中运行（服务，在管理工具中，在控制面板中）如果没有将其启动类型设置为自动并启动它。这允许远程计算机获取有关可用实例以及如何连接到它们的信息。如有疑问，[请看这里](http://msdn.microsoft.com/en-us/library/ms189093.aspx)

3) 确认 TCP/IP 已启用。如果未启用[如何：为数据库实例启用 TCP/IP 协议](http://msdn.microsoft.com/en-us/library/bb909712%28VS.90%29.aspx)

4) 验证您的服务器是否允许远程连接。为此，请打开 SSMS，连接到您的服务器，右键单击，打开属性，然后在“连接”选项卡上查找“允许远程连接”。确保选中此选项。[如有疑问，请看这里](http://blogs.msdn.com/b/walzenbach/archive/2010/04/14/how-to-enable-remote-connections-in-sql-server-2008.aspx)

5) 禁用计算机中的防火墙（Windows 防火墙或任何第三方防火墙，如防病毒软件安装的防火墙）

尝试使用与本地计算机相同的连接配置进行连接。它现在应该可以工作了。

如果您无法使用 Excel 进行连接，您应该尝试使用远程计算机上的其他工具进行连接（您可以在该计算机上安装 SSMS 并尝试连接）。

这应该有效。如果不让我知道什么是失败的。

如果它正常工作，请再次启用防火墙并尝试再次连接。如果不能，则需要将[防火墙配置为允许 SQL Server 连接](http://msdn.microsoft.com/en-us/library/cc646023.aspx)。这样做，然后再试一次。不要忘记允许在 UDP 端口 1434 上连接到 SQL Server 浏览器，除了 TCP 上的数据库实例端口。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-08-13T18:34:19.890

这是 Lean Software 的一篇文章，展示了将 Excel 连接到远程 Web 服务器以报告/编辑/传输数据的步骤。

这篇文章提到了 EDT Excel 工具——但是在连接字符串和设置防火墙和 SQL Server 选项方面的技术步骤是通用的。

[http://www.leansoftware.net/en-us/help/excel-database-tasks/worked-examples/how-to-securely-connect-excel-to-remote-web-server.aspx](http://www.leansoftware.net/en-us/help/excel-database-tasks/worked-examples/how-to-securely-connect-excel-to-remote-web-server.aspx)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-07T17:28:53.477

通过 excel 连接的语法是`<SERVERNAME OR IP>\INSTANCENAME`（如果您安装了默认实例，则不需要 INSTANCENAME）。

这意味着在 Excel 中你应该去 Data - From other sources - SQL Server - 只输入你想要连接的 IP。在那里，您将获得连接到特定数据库和表的选项。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-20T09:10:34.107

你可以插入EXCEL服务器名称：WIN2K8-01\sqlexpress, 1433

# batch-file - 批处理文件 ping -t 命令

> ID：10056565
> 
> 赞同：0
> 
> 时间：2012-04-07T17:13:31.637
> 
> 标签：batch-file, ping

我正在制作一个批处理文件，以查找 ping -t 的平均时间。如何从 ping 输出中提取时间。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-07T17:35:59.660

从下面的代码中你会得到一些提示。

```
SET CONNECT=YES
PING google.com | FIND "time=" > NUL
IF ERRORLEVEL 1 SET CONNECT=NO
ECHO You have %CONNECT% active connection to the Internet 
```

# excel - 用逗号将选定单元格合并为一个单元格

> ID：10056566
> 
> 赞同：3
> 
> 时间：2012-04-07T17:13:34.570
> 
> 标签：excel, vba

我如何将选定单元格中的单元格合并为一个单元格，选定的单元格数量会有所不同，它可能是 5 个或更多单元格，但所有单元格都会像 A1、A2、A3 等一样继续。我已经阅读了文章将 [多个单元格合并为一个在excel中使用宏？](https://stackoverflow.com/questions/2089756/combine-multiple-cells-into-one-in-excel-with-macro) 但是我如何将上述链接答案用于选定的单元格。我正在使用 Excel 2007，所以我希望它是可压缩的代码。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-07T21:16:12.520

我认为这应该可以解决问题。它基本上使用范围变量来处理选择。然后它用所选单元格的值填充一个数组。CSV 是包含您的结果的变量。

请注意，`selectedCells`这里是一个变量，而不是 Excel 中的一些特殊函数。

[此代码在 Excel 2002 中有效 - 在其他版本中不确定。]

```
Dim selectedCells As Range
Dim rng As Range
Dim i As Integer
Dim values() As String
Dim CSV As String

' you may need some error handling here in case your selection
' isn't a range
Set selectedCells = Selection

ReDim values(selectedCells.Count - 1)

i = 0
For Each rng In selectedCells
  ' you may want some error handling here when populating the array
  values(i) = CStr(rng.Value)
  i = i + 1
Next rng

CSV = Join(values, ",") 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2020-05-23T10:10:57.750

只需尝试以下代码复制，粘贴并保存即可。||||||||||||

```
Required Data   Result     Code
1            1,2,3,4,5,    =darksider_con(A1:A5)
2       
3       
4       
5 
```

* * *

```
Function darksider_con(rng As range) As String
Dim cell As range
Dim result As String
For Each cell In rng
result = result & cell.Value & ","
Next
darksider_con = result
End Function 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-05-23T11:40:40.433

对于 1D 或 2D 范围。可应用于包含空白单元格的范围。我们也可以指定一个快捷键`Ctrl+Shift+M`，比如 MS word 中用于合并表格中的单元格的快捷键是`Alt+M`

**注意**.. 宏结果无法撤消。所以，首先在样本数据上尝试这个宏。但是，如果在同一合并范围上运行，而:的值未更改，则此`MergeCellsWithComma`宏的结果可以通过第二个过程撤消。`restoreMergedCells`**`Public variable`**`valRng`

确保在两个过程中都相同`rowDelimiter`。`cellDelimiter`

```
Public valRng As String
'______________________________________________________________

Sub MergeCellsWithComma()
If Selection.MergeCells = True Then Exit Sub
Application.DisplayAlerts = False

rowDelimiter = "}"
cellDelimiter = "|"

Dim rng As Range: Set rng = Selection
If rng Is Nothing Then Exit Sub
On Error GoTo 0
Dim cL As Range
valRng = ""
For i = 1 To rng.Rows.Count
    For Each cL In Application.Index(rng, i, 0)
    'If cL <> "" Then valRng = valRng & cL & cellDelimiter
    'We can remove this if condition and keep only
    valRng = valRng & cL & cellDelimiter
    'in case we want the resulting string to show blank cells as well.
    'It would be better to do so if 'the original data needs to be restored
    Next
    'Following is a separate delimiter for rows in the selection.
    'If not needed comment it
    valRng = Left(valRng, Len(valRng) - 1) & rowDelimiter
    ' instead of rowDelimiter one can use Chr(10) for line break
Next

valRng = Left(valRng, Len(valRng) - 1)
rng.MergeCells = True
Range(rng(1, 1).Address) = valRng
Application.DisplayAlerts = True

End Sub 
```

为行创建不同的分隔符背后的想法：如果出现任何问题，我们应该能够使用以下过程恢复合并的单元格。如果在运行此过程之前更改了**`Public variable`**:的值，则将其分配为。`valRng``valRng = Selection.Cells(1, 1).Value`

```
Sub restoreMergedCells()
If Selection.MergeCells = False Then Exit Sub
rowDelimiter = "}"
cellDelimiter = "|"

Selection.MergeCells = False
Dim valRngRowsCells

'If value of Public variable: valRng is changed before running this procedure
valRng = Selection.Cells(1, 1).Value
valRngRows = Split(valRng, rowDelimiter)
' rowDelimiter or Chr(10) whatever applied in above macro
a = LBound(valRngRows): x = UBound(valRngRows)

If InStr(1, valRngRows(1), cellDelimiter, 1) > 0 Then
valRngRowsCells = Split(valRngRows(1), cellDelimiter)
b = LBound(valRngRowsCells): y = UBound(valRngRowsCells)

ReDim valRngRowsCells(0 To x, 0 To y)

For i = a To x
    For j = b To y
    valRngRowsCells(i, j) = Split(valRngRows(i), cellDelimiter)(j)
    Next
Next

'Range(Cells(1, 1), Cells(x + 1, y + 1)) = valRngRowsCells
Selection.Value = valRngRowsCells
Else
Selection.Value = Application.Transpose(valRngRows)
End If

End Sub 
```

# amazon-web-services - 为什么通过 CloudFormation 创建的 CloudWatch 请求计数警报会产生“数据不足”？

> ID：10056569
> 
> 赞同：7
> 
> 时间：2012-04-07T17:13:43.690
> 
> 标签：amazon-web-services, amazon-elb, autoscaling, amazon-cloudformation, amazon-cloudwatch

我正在为我的应用程序使用[AWS CloudFormation ，并尝试通过相应的模板发出请求计数警报。](http://aws.amazon.com/cloudformation/)我可以成功地直接为[Elastic Load Balancer](http://aws.amazon.com/elasticloadbalancing/)发出请求计数警报，但是当我尝试通过 CloudFormation 模板实现相同功能时，[Amazon CloudWatch](http://aws.amazon.com/cloudwatch/)中的警报状态是“数据不足”。

我的 ELB JSON 是：

```
"ElasticLoadBalancer": {
  "Type": "AWS::ElasticLoadBalancing::LoadBalancer",
  "Properties": {
    "AvailabilityZones": {
      "Fn::GetAZs": ""
    },
    "Listeners": [
      {
        "LoadBalancerPort": "80",
        "InstancePort": {
          "Ref": "WebServerPort"
        },
        "Protocol": "HTTP"
      }
    ],
    "HealthCheck": {
      "Target": {
        "Fn::Join": [
          "",
          [
            "HTTP:",
            {
              "Ref": "WebServerPort"
            },
            "/"
          ]
        ]
      },
      "HealthyThreshold": "3",
      "UnhealthyThreshold": "5",
      "Interval": "30",
      "Timeout": "5"
    }
  }
}, 
```

我的警报 JSON 是：

```
"StatisticAlarmLow": {
  "Type": "AWS::CloudWatch::Alarm",
  "Properties": {
    "AlarmDescription": "Alarm if there are too many unhealthy hosts.",
    "MetricName": "RequestCount",
    "Namespace": "AWS/ELB",
    "Statistic": "Sum",
    "Period": "60",
    "EvaluationPeriods": "2",
    "ComparisonOperator": "LessThanThreshold",
    "Threshold": "1500",
    "AlarmActions": [
      {
        "Ref": "WebServerScaleUpPolicy"
      }
    ],
    "Unit": "Count",
    "Dimensions": [
      {
        "Name": "AutoScalingGroupName",
        "Value": {
          "Ref": "WebServerGroup"
        }
      }
    ]
  }
},

"StatisticAlarmHigh": {
  "Type": "AWS::CloudWatch::Alarm",
  "Properties": {
    "AlarmDescription": "Alarm if there are too many unhealthy hosts.",
    "MetricName": "RequestCount",
    "Namespace": "AWS/ELB",
    "Statistic": "Sum",
    "Period": "60",
    "EvaluationPeriods": "2",
    "ComparisonOperator": "GreaterThanThreshold",
    "Threshold": "4000",
    "AlarmActions": [
      {
        "Ref": "WebServerScaleUpPolicy"
      }
    ],
    "Unit": "Count",
    "Dimensions": [
      {
        "Name": "AutoScalingGroupName",
        "Value": {
          "Ref": "WebServerGroup"
        }
      }
    ]
  }
}, 
```

从上面它会生成以“数据不足”为状态的警报。谁能告诉我可能是什么原因？如果有任何示例/示例模板可用于在 ELB 上使用请求计数警报，将不胜感激。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-07T21:33:39.400

The [Elastic Load Balancing (ELB)](http://aws.amazon.com/elasticloadbalancing/) fragment alarm fragment of your [Amazon CloudFormation](http://aws.amazon.com/cloudformation/) template seems okay, but your [Amazon CloudWatch](http://aws.amazon.com/cloudwatch/) fragment contains a presumably incorrect dimension, insofar it references an *AutoScalingGroupName* named *WebServerGroup* - this isn't a supported dimension as per section *Dimensions for Elastic Load Balancing Metrics* on page [Monitoring Your Load Balancer Using CloudWatch](http://docs.amazonwebservices.com/ElasticLoadBalancing/latest/DeveloperGuide/US_MonitoringLoadBalancerWithCW.html), stating *Elastic Load Balancing data can be aggregated along any of the following dimensions*:

*   **LoadBalancerName** - *Limits the metric data to Amazon EC2 instances that are connected to the specified load balancer.*
*   **AvailabilityZone** - *Limits the metric data to load balancers in the specified Availability Zone.*

# html - HTML 中的 Div 不随 CSS 向左浮动

> ID：10056573
> 
> 赞同：2
> 
> 时间：2012-04-07T17:13:58.287
> 
> 标签：html, css

我的类名为“header-body-right”的 div 似乎没有浮动到名为“header-body-center”的 div 的左侧，我不明白为什么，这是我的 HTML，

```
 <!DOCTYPE HTML>
<HTML>
 <HEAD>
  <TITLE>  </TITLE>
  <meta charset="UTF-8" />
  <link href="main.css" rel="stylesheet" type="text/css">
  <META NAME="Generator"    CONTENT="Notepad">
  <META NAME="Author"       CONTENT="00">
  <META NAME="KEYWORDS"     CONTENT="" />
  <META NAME="DESCRIPTION"  CONTENT="" />
 </HEAD>

 <BODY>

    <div class="header-top">

    </div>

    <div class="header-body">

        <div class="header-body-centre">
            <div class="logo">
            <img src="logo.png" />
            </div>
        </div>

        <div class="header-body-right">
            test
        </div>

    </div>

    <div class="navbar">

    </div>

    <div class="content-container">

    </div>
 </BODY>

</HTML> 
```

我用于代码的 CSS 发布在下面，

```
 body
{   
    margin:0px;
    padding:0px;
}

.header-top
{
    height:11px;
    width:100%;
    background-image: url('HeaderTopNav.png');
    background-repeat: repeat-x;
}
.header-body
{
    width:100%;
    height:100px;
}
.header-body-centre
{
    margin: 0 auto;
    height:100%;
    width:70%;
}

.header-body-right
{
    width:15%;
    height:100px;
        float:left;

}

.navbar
{
    height:35px;
    width:auto;
    border: 1px solid green;
}
.logo
{
    margin-top:35px;
    float:left;
}

.quickNav
{
    float:right;

}

.container
{
    margin: 0 auto;
    background-color: #fff;
    border: 2px solid #c9c8c8;
    border-bottom: none;
    height:auto;
    overflow:hidden;
    width: 1000px;
    clear:both;
 } 
```

谁能明白为什么？我试过浮动 header-bosy-center 并减小 header-body-right 的宽度，但没有任何效果。谁能看到我做错了什么？我没主意了。谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-07T17:18:42.663

为了让元素并排，您必须浮动两个元素。这个 css 浮动 .header-body-center 也离开了，导致元素并排出现。

```
.header-body-centre
{
    margin: 0 auto;
    height:100%;
    width:70%;
    float: left;
} 
```

由于浮动元素的行为方式，您之前的样式不起作用。当一个元素浮动时，它会脱离文档的正常流程。它向左或向右移动，直到它接触到它的包含框或另一个浮动元素的边缘。

[https://developer.mozilla.org/en/CSS/float](https://developer.mozilla.org/en/CSS/float)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-01-23T10:59:23.857

给你伙计：http: [//jsfiddle.net/YpAN8/1/](http://jsfiddle.net/YpAN8/1/)

```
.header-body-centre
{
    height:100%;
    width:70%;
    float:left;
    margin-left:15%;
    background-color: yellow; /* remove this */
    margin-left:
}

.header-body-right
{
    width:15%;
    height:100px;
    float:left;
    background-color: red; /* remove this */

} 
```

# algorithm - 是否有可用的实线跟踪库/算法？

> ID：10056574
> 
> 赞同：1
> 
> 时间：2012-04-07T17:13:58.023
> 
> 标签：algorithm, trace

考虑到实际上必须从图片或实时视频源中进行跟踪，是否有免费提供的算法或库可用于从一端到另一端跟踪一条线？

以此为例，想象将您的手机摄像头对准一张白纸，上面有一条黑线。是否有算法/库可以帮助我实现黑线的跟踪，然后在预览时在手机上以数字方式将其显示为蓝线？

这是否与光线追踪有关？

我更喜欢 C 库，因为它执行速度最快，但我对 java 或 js 也很满意！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-07T17:20:09.147

[OpenCV](http://opencv.willowgarage.com/wiki/)包含大量的视觉/识别算法，被广泛使用，并且是开源的。

它包括算法，直到人脸识别，所以我认为线追踪在它的范围内。

可能值得补充的是，为了突出高对比度线，无需将其标识为“线”。而是使用卷积或加权阈值突出显示一堆非常不同的像素值（有点像生命游戏的一代:-)

# iphone - 带有 NSDate 的 UILocalNotification

> ID：10056576
> 
> 赞同：0
> 
> 时间：2012-04-07T17:14:28.093
> 
> 标签：iphone, uilocalnotification

我通读了 UILocalNotification 的文档，示例显示使用 NSDateComponents，然后设置周、日、月等以安排通知。我基本上是在尝试做类似于每天在特定时间重复的闹钟。我在 UIPickerView 有一段时间，我从那时起为我的对象创建了一个 NSDate。所以我抓紧时间，尝试像这样安排通知：

```
 NSDate *date = [dateFormatter dateFromString:s];
    NSCalendar *calender = [NSCalendar currentCalendar];
    NSLog(@"%@", s);
    UILocalNotification *note = [[UILocalNotification alloc] init];
    note.alertAction = alarm.name;
    note.alertBody = alarm.note;
    note.fireDate = date;
    note.timeZone = [[NSCalendar currentCalendar] timeZone];
    note.repeatInterval = NSDayCalendarUnit;
                             note.timeZone = [NSTimeZone systemTimeZone];

    [[UIApplication sharedApplication] scheduleLocalNotification:note]; 
```

我可以这样做吗？还是我必须使用 NSDateComponents。我的代码目前没有触发通知，我想知道是否有可能以这种方式触发通知，或者您是否必须使用 NSDateComponents。

另外，如果我必须使用 NSDateComponents，我如何才能获得当天，以便我可以设置当天的闹钟，并且我假设从那里repeatInterval 将在接下来的几天生效。

非常感谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-07T18:29:27.173

只要firedate 是一个有效的NSDate，就会触发一个通知。这是我在 App Time 中使用的代码

```
 UILocalNotification *localNotification = [[UILocalNotification alloc] init]];

        localNotification.fireDate = [NSDate date];

        localNotification.timeZone = [NSTimeZone defaultTimeZone];
        localNotification.alertBody = @"some string";
        localNotification.repeatInterval = NSWeekCalendarUnit;
        localNotification.repeatCalendar = [NSCalendar currentCalendar];
        localNotification.soundName = UILocalNotificationDefaultSoundName;

        [[UIApplication sharedApplication] scheduleLocalNotification:localNotification]; 
```

检查您传递给 firedate 的日期是有效的 NSDate。我不确定您使用的时区重复代码是否是必需的？这可能会导致问题。

# continuous-integration - 带有 go 依赖包的可重现版本

> ID：10056582
> 
> 赞同：1
> 
> 时间：2012-04-07T17:15:58.493
> 
> 标签：continuous-integration, go, packaging, release-management

我正在阅读“如何编写 Go 代码”教程，我不禁想知道如何建立一个稳定的工作流程。

自然地，我的代码会受到源代码控制，比如 Git。现在我希望能够执行以下操作：

*   构建我的项目的可执行文件 - 并确保对于给定的 Git 版本，可执行文件将构建相同的。
*   为我的项目运行连续构建，以便在每次提交时激活。我需要确保无论连续构建所做的事情在我的工作站上都​​是可重现的。
*   创建我的项目的版本。我需要知道如果我从我的代码的相同 git 版本再次执行它，可以重新创建一个版本。

Go 为它提供了“go get”工具——但这就是我感到困惑的地方。应该支持这一点的工具“go get”设置了依赖包的源代码控制仓库。这给了我以下问题：

1.  我不能将依赖包置于我自己的源代码控制之下。这意味着，如果我和我的合作者，或者我和我的持续构建系统之间存在任何环境差异，我们将很难弄清楚这些差异。
2.  如果网络出现故障，我将无法从头开始构建我的代码。或者，换一种说法，我的持续构建系统每次构建发布时都必须访问所有这些外部服务器。这可能很脆弱，甚至不是我愿意让外界知道的事情。
3.  Go 定义了将包版本与基础语言同步的约定，但不能保证包作者会遵循该约定。如果他们不这样做，一个干净的工作区将选择一个可能被破坏的任意版本。
4.  如果我依赖的项目被放弃，我可能会失去构建程序的能力。

我可以通过手动导入依赖项目的代码而不使用“go get”来解决这些问题 - 但是，我正在避免使用专门为该用途设计和推广的语言的工具。

有什么建议么？我错过了什么吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-07T20:45:52.873

go get 只使用源 repo 使用的分布式版本控制系统。它将使用 repo 的本地副本。我将尝试在这里解决您的每一个问题。

1.  您当然可以在本地 repo 中进行修改并在需要时将它们提交到那里。
2.  go get 使用它首先构建的本地存储库，除非您明确告诉它更新。
3.  go get 不会吹走它仍然存在的存储库。由于 go get 所理解的所有源代码控制系统都是分布式源代码控制系统，因此您没有理由不能自己保持项目的分支。

# html - 固定页眉、页脚和侧边栏，滚动内容区域位于中心

> ID：10056583
> 
> 赞同：40
> 
> 时间：2012-04-07T17:16:01.963
> 
> 标签：html, css

从这个[Demo Template](http://jsfiddle.net/kFBuD/91/)开始，我想创建这个布局：

![在此处输入图像描述](../Images/f142802dc67f1f2a4df77217d1587a44.png)

但我有以下问题：

*   两个侧边栏不包含在可滚动内容 div 中。
*   内容 div 不采用固定大小
*   可滚动内容溢出时不显示滚动条
*   如果使用浏览器的主滚动条是首选

有人可以帮我解决这些问题吗？

* * *

## 回答 #1

> 赞同：48
> 
> 时间：2012-04-07T17:49:30.780

# 使用[`display:grid`](https://developer.mozilla.org/en-US/docs/Web/CSS/CSS_Grid_Layout)

这使用了 CSS 的几个新功能，您选择的浏览器可能支持也可能不支持。其中包括[网格布局](https://caniuse.com/#feat=css-grid)、[CSS 变量](https://caniuse.com/#feat=css-variables)和[`position:sticky`](https://caniuse.com/#feat=css-sticky). CSS 变量可以使用静态值来解决，而 Grid/`position:sticky`可以使用[`@supports`](https://developer.mozilla.org/en-US/docs/Web/CSS/@supports).

```
/* Remove unnecessary margins/padding */
html, body { margin: 0; padding: 0 }

.wrapper {
  display: grid;
  /* Header and footer span the entire width, sidebars and content are fixed, with empty space on sides */
  grid-template-areas:
    "header header header header header"
    "empty_left sidebar_1 content sidebar_2 empty_right"
    "footer footer footer footer footer";
  /* Only expand middle section vertically (content and sidebars) */
  grid-template-rows: 0fr 1fr 0fr;
  /* 100% width, but static widths for content and sidebars */
  grid-template-columns: 1fr 100px 400px 100px 1fr;
  /* Force grid to be at least the height of the screen */
  min-height: 100vh;
}
.header {
  grid-area: header;

  /* Stick header to top of grid */
  position: sticky;
  top: 0;
  /* Ensure header appears on top of content/sidebars */
  z-index: 1;

  /* General appearance */
  background-color: #FCFF34;
  text-align: center;
  font-size: 1rem;
  line-height: 1.5;
  padding: 1rem;
}
/* Save header height to properly set `padding-top` and `margin-top` for sticky content */
:root {
  --header-height: calc(1rem * 1.5 + 1rem * 2);
}

.sidebar-1 {
  grid-area: sidebar_1;
}
.sidebar-2 {
  grid-area: sidebar_2;
}
.sidebar-1,
.sidebar-2 {
  display: flex;
  flex-direction: column;
  position: sticky;
  top: 0;

  /* Styling to match reference */
  background-color: #BC514F;
}

.content {
  grid-area: content;

  /* General appearance */
  background-color: #99BB5E;
}
.footer {
  grid-area: footer;

  /* Stick footer to bottom of grid */
  position: sticky;
  bottom: 0;

  /* General appearance */
  background-color: #FCFF34;
  text-align: center;
  font-size: .8rem;
  line-height: 1.5;
  padding: .5rem;
}
/* Save footer height to properly set `bottom` and `min-height` for sticky content */
:root {
  --footer-height: calc(.8rem * 1.5 + .5rem * 2);
}

.sticky-spacer {
  flex-grow: 1;
}
.sticky-content {
  position: sticky;
  bottom: var(--footer-height);
  min-height: calc(100vh - var(--footer-height));
  box-sizing: border-box;

  --padding: 10px;
  padding:
    calc(var(--header-height) + var(--padding))
    var(--padding)
    var(--padding);
  margin-top: calc(0px - var(--header-height));
}
```

```
<div class="wrapper">
<div class="header">Header (Absolute)</div>
<div class="sidebar-1">
  <div class="sticky-spacer"></div>
  <div class="sticky-content">Sidebar 1 Absolute position, Fixed width</div>
</div>
<div class="content">
  <div class="sticky-spacer"></div>
  <div class="sticky-content">
    Scrollable content<br><br>
    line 1<br><br>
    line 2<br><br>
    line 3<br><br>
    line 4<br><br>
    line 5<br><br>
    line 6<br><br>
    line 7<br><br>
    line 8<br><br>
    line 9<br><br>
    line 10<br><br>
    line 11<br><br>
    line 12<br><br>
    line 13<br><br>
    line 14<br><br>
    line 15<br><br>
    line 16<br><br>
    line 17<br><br>
    line 18<br><br>
    line 19<br><br>
    line 20
  </div>
</div>
<div class="sidebar-2">
  <div class="sticky-spacer"></div>
  <div class="sticky-content">
    Sidebar 2 Absolute position, Fixed width<br><br>
  line 1<br><br>
  line 2<br><br>
  line 3<br><br>
  line 4<br><br>
  line 5<br><br>
  line 6<br><br>
  line 7<br><br>
  line 8<br><br>
  line 9<br><br>
  line 10
  </div>
</div>
<div class="footer">Footer (Absolute)</div>
</div>
```

# 主内容容器中的滚动条

内容框（包括侧边栏）可以设置为任何类型的宽度（百分比、像素等）。只有可滚动的内容区域会滚动（侧边栏/页脚/页眉只会溢出框）。我建议添加一些媒体查询来突破侧边栏，这样内容就不会隐藏在较小的设备上，或者`min-height`在内容框上设置 a 并`min-width`在`body`.

```
html, body {
    height:100%;
    margin:0;
    padding:0;
}
header{
    width: 100%;
    background: yellow;
    position: fixed; 
    top: 0;
    height: 60px !important;
    opacity:.8;
}

.content {
    position:relative;
    height: 100%;
    width:600px; /* Sizing - any length */
    padding:60px 0 30px 0; /* Header height and footer height */
    margin:0 auto 0 auto; /* Center content */
    -moz-box-sizing:border-box;
    -webkit-box-sizing:border-box;
    -o-box-sizing:border-box;
    -ms-box-sizing:border-box;
    box-sizing:border-box;
}

.sidebar1, .sidebar2 {
    background: red;
    top:60px;
    bottom:30px;
    width: 100px;
    position:absolute;
    -moz-box-sizing:border-box;
    -webkit-box-sizing:border-box;
    -o-box-sizing:border-box;
    -ms-box-sizing:border-box;
    box-sizing:border-box;
}

.sidebar1 {
    left:0;
}

.sidebar2 {
    right: 0;
}

#scrollable2 {
    background:green;
    height: 100%;
    min-width: 300px;
    margin-left: 100px;
    margin-right: 100px;
    overflow:auto;
    -moz-box-sizing:border-box;
    -webkit-box-sizing:border-box;
    -o-box-sizing:border-box;
    -ms-box-sizing:border-box;
    box-sizing:border-box;
}

footer {
    width: 100%;
    background: yellow;
    position: fixed; 
    bottom: 0;
    height: 30px;
}
```

```
<!-- Always on top: Position Fixed-->
<header>
    header
</header>
<!-- Fixed size after header-->
<div class="content">
    <!-- Always on top. Fixed position, fixed width, relative to content width-->
    <div class="sidebar1">
        sidebar-left
    </div>
    <!-- Scrollable div with main content -->
    <div id="scrollable2">
        content-main<br>
        content-main<br>
        content-main<br>
        content-main<br>
        content-main<br>
        content-main<br>
        content-main<br>
        content-main<br>
        content-main<br>
        content-main<br>
        content-main<br>
        content-main<br>
        content-main<br>
        content-main<br>
        content-main<br>
        content-main<br>
        content-main<br>
        content-main<br>
        content-main<br>
        content-main<br>
        content-main<br>
        content-main<br>
        content-main<br>
        content-main<br>
        content-main<br>
        content-main<br>
        content-main<br>
        content-main<br>
        content-main<br>
        content-main<br>
        content-main<br>
    </div>
    <!-- Always on top. Fixed position, fixed width, relative to content width -->
    <div class="sidebar2">
        sidebar-right
    </div>
</div>
<!-- Always at the end of the page -->
<footer>
    footer
</footer>
```

# 使用浏览器的主滚动条

虽然可以使用浏览器的主滚动条，但它也会导致侧边栏随页面滚动。

```
html, body {
    height:100%;
    margin:0;
    padding:0;
}
header{
    width: 100%;
    background: yellow;
    position: fixed; 
    top: 0;
    height: 60px !important;
    z-index:100;
}

.content {
    position:relative;
    min-height: 100%;
    width:600px; /* Sizing - any length */
    padding:60px 0 30px 0; /* Header height and footer height */
    margin:0 auto 0 auto; /* Center content */
}

.sidebar1, .sidebar2 {
    background: red;
    height:100%;
    width: 100px;
    top:0;
    padding-top:60px;
    position:absolute;
    -moz-box-sizing:border-box;
    -webkit-box-sizing:border-box;
    -o-box-sizing:border-box;
    -ms-box-sizing:border-box;
    box-sizing:border-box;
}

.sidebar1 {

    left:0;

}

.sidebar2 {
    right: 0;
}

#scrollable2 {
    height:100%;
    background:green;
    min-width: 300px;
    margin-left: 100px;
    margin-right: 100px;
    -moz-box-sizing:border-box;
    -webkit-box-sizing:border-box;
    -o-box-sizing:border-box;
    -ms-box-sizing:border-box;
    box-sizing:border-box;
}

footer {
    width: 100%;
    background: yellow;
    position: fixed; 
    bottom: 0;
    height: 30px;
}
```

```
<!-- Always on top: Position Fixed-->
<header>
    header
</header>
<!-- Fixed size after header-->
<div class="content">
    <!-- Always on top. Fixed position, fixed width, relative to content width-->
    <div class="sidebar1">
        sidebar-left
    </div>
    <!-- Scrollable div with main content -->
    <div id="scrollable2">
        content-main<br>
        content-main<br>
        content-main<br>
        content-main<br>
        content-main<br>
        content-main<br>
        content-main<br>
        content-main<br>
        content-main<br>
        content-main<br>
        content-main<br>
        content-main<br>
        content-main<br>
        content-main<br>
        content-main<br>
        content-main<br>
        content-main<br>
        content-main<br>
        content-main<br>
        content-main<br>
        content-main<br>
        content-main<br>
        content-main<br>
        content-main<br>
        content-main<br>
        content-main<br>
        content-main<br>
        content-main<br>
        content-main<br>
        content-main<br>
        content-main<br>
    </div>
    <!-- Always on top. Fixed position, fixed width, relative to content width -->
    <div class="sidebar2">
        sidebar-right
    </div>
</div>
<!-- Always at the end of the page -->
<footer>
    footer
</footer>
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-05T10:11:09.580

**编辑**
1.Add`position`属性作为`absolute`您要修复的 div 。
2.保持身体`overflow`属性`auto`。

注意：将 body 的 z-index 设置为 -1 将使 body 的其余部分无法访问。
参考： http: [//limpid.nl/lab/css/fixed/](http://limpid.nl/lab/css/fixed/)

# vb.net - 在已经存在的文本文件 VB.NET 中写入文本

> ID：10056584
> 
> 赞同：4
> 
> 时间：2012-04-07T17:16:25.737
> 
> 标签：vb.net, text, lines, streamwriter

我一直在开发一款街机游戏，就像每一款优秀的街机游戏一样，它都有一个集成的记分牌，这样玩家就可以看到谁的得分更高。我的问题是，每次输入新的得分线时，它都会删除文本文件中的所有先前行。我一直在使用的代码如下：

```
 If player1 > 25 Then

        objReader.Close()
        MsgBox("O " + jogador1 + " ganhou.")
        tab1.Enabled = False

        Dim wrtScore As String = "C:\Documents and Settings\Joao\My Documents\Visual Studio 2010\Projects\flaghunter\flaghunter\deposito\scores.txt"
        Dim objWriter As New System.IO.StreamWriter(wrtScore)

        wrtScore = wrtScore.Trim()

        objWriter.WriteLine(jogador1 + " " + Str(player1))

        objWriter.Close()

    End If 
```

感谢您的关注和任何帮助。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-04-07T17:19:13.863

改用[File.AppendText](http://msdn.microsoft.com/en-us/library/system.io.file.appendtext.aspx)：

```
 // This text is always added, making the file longer over time
    // if it is not deleted.
 Using sw As StreamWriter = File.AppendText(path)
        sw.WriteLine("This")
        sw.WriteLine("is Extra")
        sw.WriteLine("Text")
 End Using 
```

如果文件第一次不存在，这将创建文件，如果文件已经存在，则附加文本

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-04-07T17:19:16.890

`Dim objWriter As New System.IO.StreamWriter(wrtScore, TRUE)` 附加到文件：D

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-11-11T14:24:54.053

附加到文件的开头，尝试加载内容然后覆盖文件并将内容放在底部。就像是：

```
Dim sr as New StreamReader("path/to/file.ext")
Dim text as String = sr.ReadToEnd()
sr.Close()
Dim sw as New StreamWriter("path/to/file.ext")
sw.WriteLine("New stuff")
sw.WriteLine("More New Stuff")
sw.WriteLine(text) ' Add original content back
sw.Close() 
```

# php - PHPMyAdmin 中的 MySQL 数据类型没有改变...？

> ID：10056587
> 
> 赞同：1
> 
> 时间：2012-04-07T17:16:36.537
> 
> 标签：php, mysql

好的，我正在做一个 php 大学项目，我必须让学生注册，提交他们的详细信息——名字、姓氏、电话号码、身份证号码等。

起初我使用 int 作为 id 号，但我不打算用它做任何数学运算，所以我将其更改为 varchar，但是在此更改之后，我提交的所有示例仍然出现最大 int 值“2147483647”当我将其指定为 varchar，为什么会发生这种情况以及如何修复它。

如果有帮助，则表字段的排序规则都是 latin1_swedish_ci。我不是 MySQL 专家，所以如果您需要了解此问题的任何其他信息，请询问。

编辑：我还将字段的值更改回 bigint，它仍然在表中抛出 2147483647，即使我输入了 8888888888888（13 个字符），所以使用 varchar 或 bigint 我仍然得到 2147483647，我做错了什么？

更新：尝试更改字段的最大值时，我从 phpmyadmin 收到以下错误。

```
 SQL query:

ALTER TABLE  `student` CHANGE  `idno`  `idno` BIGINT( 99999999999999 ) NOT NULL

MySQL said: 

#1439 - Display width out of range for column 'idno' (max = 4294967295) 
```

更新：取出 intval() 解决了这个问题

```
 $id_number=intval($_POST['id_number']);
 $id_number=($_POST['id_number']); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-07T17:22:37.373

`varchar`除非您确实需要在 ID (PK?) 字段中使用字母，否则不要用作 ID。使用整数更快。也许 PHP 脚本正在尝试将 DB 更改`varchar`为整数，因此将 ID 更改回`int`.

你真的需要`bigint`吗？未签名`int`可能绰绰有余。 [http://dev.mysql.com/doc/refman/5.0/en/integer-types.html](http://dev.mysql.com/doc/refman/5.0/en/integer-types.html)

更新：如果您需要确保该值是一个整数，您应该检查它的数据类型。

```
if(is_int($my_value)){
  //do the script
}
  else{
    //echo error message
  } 
```

如果该值来自 DB（数据类型为整数的列），一切都应该没问题，但检查一下不会有什么坏处……

# c# - 删除实体框架中的对象映射多对多关系

> ID：10056593
> 
> 赞同：5
> 
> 时间：2012-04-07T17:17:01.113
> 
> 标签：c#, entity-framework

在 ASP.NET MVC 中，我有三个表： `Users`, `Roles`, `UsersInRoles`（标准多对多连接表）。当我将它映射到 EF 时，它创建了两个实体类型：`Users`和`Roles`. 现在我想使用如下代码删除一些用户：

```
var aspnetUsers = _db.aspnet_Users.Single(a => a.UserId == id);
_db.aspnet_Users.DeleteObject(aspnetUsers); 
```

我当然做不到，因为在表中的 SQL 级别中`UsersInRoles`有一个连接的行。

如何从 EF 级别删除该行（`UsersInRoles`表未映射）？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-07T18:07:47.540

`SaveChanges()`在调用上下文之前，您需要从用户对象中删除所有角色：

```
var aspnetUser = _db.aspnet_Users.Single(a => a.UserId == id);

foreach(var role in aspnetUser.Roles.ToArray())
{
    aspnetUser.Roles.Remove(role);
}

_db.aspnet_Users.DeleteObject(aspnetUser);

_db.SaveChanges(); 
```

这将防止数据库中的引用约束导致的异常，并确保UsersInRoles表中的相应记录被删除。

# perl - 更快的方法来执行“perl -anle 'print $F[1]' *manyfiles* > result”（'cut' 失败）

> ID：10056595
> 
> 赞同：2
> 
> 时间：2012-04-07T17:17:21.857
> 
> 标签：perl

我需要多个文件中每一行的第二个字段。'cut' 不起作用，因为有些行有前导空格。

```
perl -anle 'print $F[1]' *manyfiles* > result 
```

*确实*有效，但速度很慢。

有没有更快的方法来做到这一点？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-07T18:16:33.713

我猜测自动拆分模式很慢，因为通过拆分线获得的整个数组必须存储在内存中。如果您的文件有很长的行，这一点尤其重要。这个怎么样：

`perl -ne 'print $1, "\n" if m/^\s*\S+\s+(\S+)/'`

这里我们不处理超出第二个单词的行部分。您还可以在使用`index`和`substr`代替正则表达式时测试性能。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-07T17:20:00.263

```
awk '{print $2}' files ... > result 
```

可能更快。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-07T17:22:02.913

在使用剪切脚本之前，您不能用 sed 删除前导空格吗？

例如： `sed -e 's/^[ \t]*//'`将产生一个文件流，不带前导空格。只需将其通过管道传输到您的脚本中即可。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-07T22:10:04.757

```
sed -rn 's/\s*[^\s]+\s+([^\s]+).*/\1/p' file1 file2 > parsed_text 
```

应该更快。

或者您可以使用它来构建文件列表：

```
find /path/to/files/ -type f -iname "*" -print0 | xargs -0 -I {} sed … 
```

（'iname' 只是掩码的例子，如果你不使用它会更快）

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-04-07T18:35:44.220

[Parallel::ForkManager](http://search.cpan.org/perldoc/Parallel%3a%3aForkManager)可能会有所帮助，尤其是当您不需要按源文件对输出进行分组时。但是，增加同时访问磁盘的进程数量也可能会导致速度变慢，但值得一试。

以下示例取自`Parallel::ForkManager`手册页（已更正前版本中存在的明显错误）：

```
#!/usr/bin/env perl

use strict; use warnings;

use Parallel::ForkManager;

my ($maxproc) = @ARGV;
my @files = ('01' .. '10');

my $pm = Parallel::ForkManager->new($maxproc);

for my $file (@files) {
    my $pid = $pm->start and next;
    my $ret = open my $h, '<', $file;

    unless ($ret) {
        warn "Cannot open '$file': $!";
        $pm->finish;
    }

    while (my $line = <$h>) {
        next unless $line =~ /^\s*\S+\s+(\S+)/;
        print "$1\n";
    }

    $pm->finish;
}

$pm->wait_all_children; 
```

我用 10 个文件运行上面的脚本，每个文件有 1_000_000 行。在每个文件中，20% 的行都有一些前导空格。请参阅[Parallel::ForkManager 可以加速看似 IO 绑定的任务吗？](http://blog.nu42.com/2012/04/can-parallelforkmanager-speed-up.html)详情。

```
＃ 同步
# echo 3 > /proc/sys/vm/drop_caches
$ /usr/bin/time -f '%Uuser %Ssystem %Eelapsed %PCPU' ./process.pl 1 > 输出
24.44user 0.93system 0:29.08elapsed 87%CPU

$ rm 输出
＃ 同步
# echo 3 > /proc/sys/vm/drop_caches
$ /usr/bin/time -f '%Uuser %Ssystem %Eelapsed %PCPU' ./process.pl 2 > 输出
24.95user 0.91system 0:18.31elapsed 141%CPU

$ rm 输出
＃ 同步
# echo 3 > /proc/sys/vm/drop_caches
$ /usr/bin/time -f '%Uuser %Ssystem %Eelapsed %PCPU' ./process.pl 4 > 输出
24.70user 0.88system 0:17.45elapsed 146%CPU

$ rm 输出
＃ 同步
# echo 3 > /proc/sys/vm/drop_caches
$ /usr/bin/time -f '%Uuser %Ssystem %Eelapsed %PCPU' ./process.pl 1 > 输出
25.31user 0.95system 0:29.72elapsed 88%CPU
```

所以在我看来，利用你所有的核心有一些好处。

我没有尝试任何其他建议来查看使用 Perl+ [Parallel::ForkManager](http://search.cpan.org/perldoc/Parallel%3a%3aForkManager)是否比其中任何一个更好。

这种方法的一个明显缺点是它将交错来自源文件的行。在您的特定情况下，这可能很重要，也可能无关紧要。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-04-07T21:05:41.527

如果以下还不够好，

```
perl -nE'say /^\s*\S+\s+(\S+)/' * 
```

我会尝试

```
perl -ple's/^\s+//' * | cut 
```

如果这不是一次性的事情并且速度真的很重要，您可以用 C 编写一个小的修剪工具来替换`perl`上面的内容。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-04-11T12:13:10.160

我想为这些解决方案添加一些数字。aaqp.txt文件为 130 MB，*有*1,000,000 行，平均有 7 个字段。我实际上为此生成了 50+GB 的样本数据，但我太不耐烦了，无法等待其中任何一个完成。

```
$ time perl -anle 'print $F[1]' aaqg.txt > result

real    0m18.526s
user    0m18.368s
sys     0m0.089s

$ time awk '{print $2}' aaqg.txt  > result

real    0m4.051s
user    0m3.592s
sys     0m0.091s

$ time perl -nE 'say $1 if m/\s*\S+\s+(\S+)/' aaqg.txt > result

real    0m2.009s
user    0m1.901s
sys     0m0.066s

$ time perl -nE'say /^\s*\S+\s+(\S+)/' aaqg.txt > result

real    0m2.069s
user    0m1.813s
sys     0m0.069s 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2012-04-07T18:22:08.073

***珀尔：***

```
perl -ne 'print "$1\n" if m/\s*\S+\s+(\S+)/' manyfiles >result 
```

***非 Perl：***

```
awk '{print $2}' manyfiles >result 
```

# websphere - 在 WebSphere 8 上焊接

> ID：10056600
> 
> 赞同：3
> 
> 时间：2012-04-07T17:18:39.263
> 
> 标签：websphere, cdi, jboss-weld

是否可以用 Weld 替换 WebSphere 8 的 CDI 提供程序（OpenWebBeans）？如果做不到这一点，有没有办法在 WebSphere 中完全禁用 CDI？

为什么我需要这个？我们有一个针对 Weld 开发的项目，不幸的是我们发现它依赖于许多 Weld 特性。我们能够通过`org.jboss.weld.environment.servlet.Listener`在 Tomcat 和 Jetty 中成功引导 Weld，但 WebSphere 的内置 CDI 实现似乎有干扰。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-08T22:39:49.197

不，不可能在 WebSphere Application Server 中替换或禁用 CDI。我唯一（不满意）的建议是重新编写代码以避免出现这种特殊情况。

# php - MySQL 到 SQL Server - 关键字“mictest”附近的语法不正确

> ID：10056602
> 
> 赞同：0
> 
> 时间：2012-04-07T17:19:07.243
> 
> 标签：php, sql, sql-server, migration

首先，我尝试使用 SQL Server Migration Assistant for MySql 来迁移我的数据库，它运行良好。

但是现在，我的代码有一些问题。

我在 MYSQL 版本上有这一行：

```
$fct="SELECT * FROM `users` WHERE `USER` LIKE CONVERT( _utf8 '$LOGIN' USING latin1 ) COLLATE latin1_swedish_ci AND `PASS` LIKE CONVERT( _utf8 '$PASS'USING latin1 ) COLLATE latin1_swedish_ci"; 
```

这条线工作得很好，但是当我尝试把它放在我的 SQL 版本上时，我得到：

错误：（`SQLSTATE[42000]: [Microsoft][SQL Server Native Client 10.0][SQL Server]Incorrect syntax with the keyword 'mictest'.`这是我的 $LOGIN）

我虽然这是“引号”的问题，所以我也尝试了这个，但它不起作用：

```
$fct="SELECT * FROM users WHERE USER LIKE CONVERT( _utf8 '$LOGIN' USING latin1 ) COLLATE latin1_swedish_ci AND PASS LIKE CONVERT( _utf8 '$PASS' USING latin1 ) COLLATE latin1_swedish_ci"; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-03T20:47:05.487

如果您从 MYSQL DB 进行了迁移，只需检查 ... `USING latin1 ) COLLATE latin1_swedish_ci`... 是否始终有用且正确。

一些错误可能来自于此。我希望它会帮助你。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-07T17:21:29.753

尝试删除之后的空格`_utf8`：

```
CONVERT( _utf8'$LOGIN' USING latin1 )
              ^---no space 
```

# php - 从其祖父文件夹中获取文件的路径

> ID：10056609
> 
> 赞同：1
> 
> 时间：2012-04-07T17:19:48.477
> 
> 标签：php, relative-path

我有一个具有以下路径的 php 文件

```
Shubhmangalam/admin/welcome_image_edition/delete_image.php 
```

和具有以下路径的图像文件

```
Shubhmangalam/welcome_images/image_1.jpg 
```

我想删除我知道可以使用 unlink() 方法完成的 image_1.jpg 文件。但问题是`.php` 文件和`.jpg`文件的父文件夹不同，它们的文件系统级别也是如此。 .而且我找不到正确的方法来获取删除 image_1.jpg 文件的路径。

现在 delete_image.php 上的代码是相应的

```
<?php
$image=$_REQUEST['image'];
if(unlink("./../welcome_images/".$image))
   echo "Successfully Deleted";
else 
   echo "Wrong";
?> 
```

现在上面是服务器脚本代码，我想通过获取适当的路径来删除图像。我不想要实际路径，而是项目文件夹中的路径`Shubhmangalam`

提前致谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-07T17:28:33.970

```
 Shubhmangalam/admin/welcome_image_edition/delete_image.php 
```

那是：

```
 __FILE__ 
```

和具有以下路径的图像文件

```
 Shubhmangalam/welcome_images/image_1.jpg 
```

那是：

```
 dirname(dirname(__DIR__)) . '/welcome_images/image_1.jp'; 
```

在第一个文件中。为了您自己的利益，请使用[魔法常数`__FILE__`，`__DIR__`](http://php.net/manual/en/language.constants.predefined.php)例如：

```
if (unlink(__DIR__."/../../welcome_images/".$image))
{
    ... 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-07T17:24:26.007

对这种类型的代码要非常小心。您没有完全过滤 $_REQUEST 值，它允许恶意用户在您的服务器上指定任何文件，例如：

```
http://example.com/delete_image.php?image=../../../../../../../../../etc/passwd 
```

您可以使用绝对路径来解决您的路径问题：

```
unlink('/path/leading/to/your/welcome_images/' . $image); 
```

这使您不必再为必须找出适当的相对路径而烦恼。

# list - LISP 中的列表评估（缺点的奇怪行为）

> ID：10056618
> 
> 赞同：2
> 
> 时间：2012-04-07T17:20:43.320
> 
> 标签：list, lisp, scheme, racket, cons

我目前正在玩 LISP。一切都很好，但我无法理解以下问题。

我有这个附加操作：

```
(define (append l1 l2)
   (if (eq? l1 null)
      l2
      (cons (first l1)
            (myappend (rest l1) l2)))) 
```

我这样使用它：

```
(myappend (cons (cons 1 2) null) '(4 5)) 
```

[Racket](http://racket-lang.org/)中的结果 是：

```
 '((1 . 2) 4 5) 
```

但为什么？在我看来，它应该是**'(1 2 4 5)**，因为 cons 返回一个列表，而 myappends 附加两个列表。有谁能够帮助我？LISP 在做什么？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-04-07T17:28:07.060

`cons`返回一个点对，不一定是一个列表。

`(cons 1 2)`返回`(1 . 2)`

`(cons 1 null)`返回`(1)`

`(cons 1 (cons 2 null))`返回`(1 2)`

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-04-08T07:22:26.497

A`(cons 1 2)`将返回一个对象，其第一个指针 ( `car`) 指向 1，另一个 ( `cdr`) 指向 2，这就是它以点对方式打印的原因。

此外，您可能想更深入地了解，我建议您阅读[CL：对符号计算的温和介绍](http://www.cs.cmu.edu/~dst/LispBook/)，“6.4\. 比较 CONS、LIST 和 APPEND”，它很好地解释了这些主题。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-07T17:33:33.967

试试 (cons 1 2) 返回什么。是清单吗？

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-05-25T13:22:05.027

致@ThomasUhrig：以下信息可能会对您有所帮助。

虽然我们在这里讨论的是 Lisp 语言，但我注意到一本名为[“The Little Schemer (4th edition)”](http://books.google.com/books?id=xyO-KLexVnMC&lpg=PA9&dq=little+schemer+%22law+of+cons%22&pg=PA9&redir_esc=y#v=onepage&q=little%20schemer%20%22law%20of%20cons%22&f=false)的著名书籍的**第 8 页和第 9 页**中的一行帮助我完全理解了 2 个令人费解的事实：

```
 Why (cons 1    2) does not look like '(1 2)?
    Why (cons 1 '(2)) does     look like '(1 2)?
    ----
    > (cons 1 2)
    (1 . 2)
    > (cons 1 '(2))
    (1 2)
    > '(1 2)
    (1 2) 
```

> 只需阅读**“缺点法则”**：
> 
> 原**语** *`cons`*有 2 个参数。
> 
> 的第二个参数*`cons`*必须是一个列表。
> 
> 结果是一个列表。
> 
> **在实践中：** ( **cons** AB) 适用于***所有值 A 和 B***，并且
> 
> > （**汽车**（**缺点**AB））= A
> > 
> > ( **cdr** (**缺点**AB)) = B

# ios - 动画有时不会发生

> ID：10056619
> 
> 赞同：0
> 
> 时间：2012-04-07T17:20:52.907
> 
> 标签：ios, core-animation

我正在构建一个类似专注的游戏。按下按钮即可翻转瓷砖。然后我检查两个瓷砖是否翻转。当我不做检查时，瓷砖会按预期翻转。当我进行检查时，第一块瓷砖正确翻转。如果第二个图块与第一个图块匹配，则有时第二个图块在它们都执行消失动画之前不会执行翻转动画。

```
-(void)twoTilesFlipped {

NSInteger i = 0;
for (i = 0; i < [bottomLayers count]; i++)
{
    if ([[flippedStatus objectAtIndex:i] isEqualToString: @"flipped"]) 
    {
        CALayer *tileOne = [bottomLayers objectAtIndex:i];
        NSInteger y = 0;
        for (y = 0; y < [bottomLayers count]; y++) 
        {
            if (y == i) 
            {
                continue;
            }

            if ([[flippedStatus objectAtIndex:y] isEqualToString: @"flipped"])

            {
                CALayer *tileTwo = [bottomLayers objectAtIndex:y];
                if (tileOne.contents == tileTwo.contents) {
                    _matchLabel.text = @"It's a match!";
                    [self disappearTheTiles:tileOne :tileTwo :i :y];
                    [self isGameOver];
                } else {
                    _matchLabel.text = @"Not a match!";
                    [self flipTheTilesBack:i :y];
                }
            }
        } return;

    }
}} 
```

我是 iOS 编程的新手（以及一般的编程（有点））。

哦，这是翻转瓷砖的方法：

```
- (void)flipTiles:(UIButton *)buttonPressed {
int b = buttonPressed.tag;

CALayer *top = [topLayers objectAtIndex:b];
CALayer *bot = [bottomLayers objectAtIndex:b];

if ([[flippedStatus objectAtIndex:b] isEqualToString: @"flipped"]) 
{
    top = [bottomLayers objectAtIndex:b];
    bot = [topLayers objectAtIndex:b];
}

CAAnimation *topAnimation = [self flipAnimationWithDuration:0.75f forLayerBeginningOnTop:YES scaleFactor:0.75f];
CAAnimation *bottomAnimation = [self flipAnimationWithDuration:0.75f forLayerBeginningOnTop:NO scaleFactor:0.75f];

CGFloat zDistance = 1500.0f;
CATransform3D perspective = CATransform3DIdentity; 
perspective.m34 = -1\. / zDistance;
top.transform = perspective;
bot.transform = perspective;

topAnimation.delegate = self;
[CATransaction begin];
[top addAnimation:topAnimation forKey:@"buttonPressed"];
[bot addAnimation:bottomAnimation forKey:@"buttonPressed"];

[CATransaction commit];
if ([[flippedStatus objectAtIndex:b] isEqualToString: @"notFlipped"]) {
    [flippedStatus replaceObjectAtIndex:b withObject:[NSString stringWithFormat:@"flipped"]];
} else {
    [flippedStatus replaceObjectAtIndex:b withObject:[NSString stringWithFormat:@"notFlipped"]];
}
//NSLog(@"And if we got here, why didn't it flip? Huh?!");} 
```

日志打印，但有时瓷砖在消失动画之前不会翻转。

我试图尽可能清楚，但我无法理解为什么它有时会起作用而不是其他时候。我认为这与“for”循环和嵌套的“ifs”有关，但我不明白为什么动画没有发生，特别是因为 NSLog 总是出现在控制台中......

我在这里和其他网站上查看了很多与动画相关的问题 - 阅读了书籍和教程中的许多动画部分，但到目前为止，没有任何答案可以作为答案。当然，如果有人需要查看，我可以提供整个项目...

我曾尝试在战略位置添加时间间隔，但无济于事。我也尝试过跟踪瓷砖的翻转状态，但这似乎不起作用。-animationDidStop 中是否有办法判断第二个图块是否已完成翻转？我想我要问的是，有没有办法命名 CAAnimation（就像 UIViewAnimation 一样），以便我可以判断特定动画是否完成？（是的 - 键值编码很好地解决了这个问题！）

在 Bill 的帮助下，我现在已经开始标记动画的关键代码。结果动画确实播放了，但是在消失动画之后-这不是我需要发生的。所以我需要进行某种检查以确保在消失动画发生之前两次翻转都发生了。任何想法表示赞赏！

添加更多跟踪后，似乎消失动画发生在翻转动画之前 - 但只是有时。对我来说具有挑战性的部分是弄清楚如何告诉消失动画仅在两个翻转动画都发生后才发生。正在努力！建议仍然鼓励！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-18T15:51:24.043

我一直在尝试，最终做到了：

```
-(void)buttonPressed: (UIButton*)buttoni 
{
    [self flipTiles:(UIButton *)buttoni];
    [NSTimer scheduledTimerWithTimeInterval:2.0
                                     target:self
                                   selector:@selector(twoTilesFlipped)
                                   userInfo:nil
                                    repeats:NO];
} 
```

我没有在其他地方胡说八道，而是将计时器放在这种方法中，它似乎可以工作。当然，其他一些事情现在不起作用，但我认为这只是调整！谢谢！

# javascript - 如何让嵌入式函数多次运行

> ID：10056620
> 
> 赞同：1
> 
> 时间：2012-04-07T17:20:52.987
> 
> 标签：javascript

我的问题是如何让一个函数的多个实例运行。下面是我的功能 - 一个简单的淡入淡出功能。我遇到的问题是，当它第二次被调用时，它会放弃第一次调用。因此，如果用户单击一个按钮，它将显示一条消退的消息。

如果用户单击另一个按钮，则先前的淡入淡出消息将停止在当前的不透明度级别。

**?**

什么是停止机制？之前的功能哪里去了？

**功能**

```
function newEffects(element, direction, max_time ) 
{
    newEffects.arrayHold = [];
    newEffects.arrayHold[element.id] = 0;

    function next() 
    {
        newEffects.arrayHold[element.id] += 10;
        if ( direction === 'up' )
        {
            element.style.opacity = newEffects.arrayHold[element.id] / max_time;
        }
        else if ( direction === 'down' )
        {
            element.style.opacity = ( max_time - newEffects.arrayHold[element.id] ) / max_time;
        }
        if ( newEffects.arrayHold[element.id] <= max_time ) 
        {
            setTimeout( next, 10 );
        }
    }
    next();
    return true;
}; 
```

**召唤**

```
newEffects(this.element, 'down', 4000 ); 
```

**旧对象**

```
/**
 *    Effects - causes all elements that are fading to sync. to same opacity level as they share the same elapsed time.
 */

var Effects = function( element ) 
{
    this.element = element;
};

Effects.prototype.fade = function( direction, max_time ) 
{
    Effects.elapsed = 0;
    var persist_element = this.element;
    function next() 
    {
        Effects.elapsed += 10;
        if ( direction === 'up' )
        {
            persist_element.style.opacity = Effects.elapsed / max_time;
        }
        else if ( direction === 'down' )
        {
            persist_element.style.opacity = ( max_time - Effects.elapsed ) / max_time;
        }
        if ( Effects.elapsed <= max_time ) 
    {
            setTimeout( next, 10 );
        }
    }
    next();
    return true;
}; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-07T17:52:41.643

尝试这个

```
function newEffects(element, direction, max_time ) 
{
    var mt=max_time;
    var dir=direction; 
    var el=document.getElementById(element);
    var newEffects={};
    newEffects.arrayHold = [];
    newEffects.arrayHold[el.id] = 0;

    function next() 
    {
        newEffects.arrayHold[el.id] += 10;
        if ( dir === 'up' )
        {
            el.style.opacity = newEffects.arrayHold[el.id] / mt;
        }
        else if ( dir === 'down' )
        {
            el.style.opacity = ( mt - newEffects.arrayHold[el.id] ) / mt;
        }
        if ( newEffects.arrayHold[el.id] <= mt ) 
        {
            setTimeout( next, 10 );
        }
    } next();
}; 
```

一个例子是[here](http://jsfiddle.net/xYbWq/3/)。

> 在父函数中使用 var 关键字声明每个变量以保留每个项目的单独实例，这就是 clouser 的工作方式。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-07T17:26:50.507

看起来您正在递归调用 next() 。我很惊讶你的代码没有崩溃。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-07T18:13:04.167

考虑这段代码：

```
function foo() {
    foo.bar = 5;
    alert(foo.bar); // alerts 5
}
foo();
alert(foo.bar); // alerts 5 instead of undefined! 
```

Foo 是一个具有属性的对象，但也可以作为函数调用。任何设置的属性都将持续存在，即使在函数调用之外。（事实上​​，这是一种制作[Javascript 伪类](http://www.phpied.com/3-ways-to-define-a-javascript-class/)的方法，它对自己的目的很有用。）

您可以做的是通过以下两种方式之一返回此“类”的新实例：

```
function fadeEffect(element) {
    this.element = element;
    this.fadeTimeLeft = 1000;
    this.fade = function() {
        this.fadeElement.style.opacity -= .01; // Replace with working
                                               // opacity decreaser.
        this.fadeTimeLeft -= 1;
        if (this.fadeTimeLeft > 0) {
            setTimeout(this.fade, 10);
        }
    }
}

signInButtonFade = new fadeEffect(document.getElementById("signinfade")); 
```

或者在 Javascript 的对象文字表示法中，您可能更了解[JSON](http://www.json.org/)：

```
function fadeEffect(element) {
    return {
        "fadeElement": element,
        "fadeTimeLeft": 1000,
        "fade": function() {
            this.fadeElement.style.opacity -= .01; // Replace with working
                                                   // opacity decreaser.
            this.fadeTimeLeft -= 1;
            if (this.fadeTimeLeft > 0) {
                setTimeout(this.fade, 10);
            }
        },
        "init": function() {
            // When using this format, no code is executed automatically,
            // so we have a "constructor" that we execute manually when
            // making the object.
            this.fade();
        }
    }
}

signInButtonFade = generateFade();
signInButtonFade.init(); 
```

（显然，实际的不透明度降低不起作用。）

您还可以将这些淡入淡出效果中的每一个存储在一个数组中，然后检查是否有任何先前的淡入淡出效果正在应用于元素。如果有，那么您可以阻止该淡入淡出或劫持它以另一种方式淡入淡出，或者完全采用其他方式。

```
fadeArray = new Array();
fadeArray.push(new fadeEffect(document.getElementById("fadeElement"));

// Do other adding fade stuff, etc...

// Now we add a new fade effect. This could easily be put into a function:
fadeEffectAlreadyExists = false;
for (i in fadeArray) {
    if (i.element == document.getElementById("fadeElement2")) {
        fadeEffectAlreadyExists = true;
        break;
    }
}
if (!fadeEffectAlreadyExists) {
    fadeArray.push(new fadeEffect(document.getElementById("fadeElement2")));
} 
```

虽然这很好（在我看来，这是正确的方法），但您可以通过用“this”替换函数体中的每个“newEffects”实例来保留现有函数，然后使用`fade = new newEffects(element, direction, max_time);`它已经与第一种方法有很多共同之处。

# jquery - Grails 中 js 资源的可靠刷新 - 开发环境

> ID：10056626
> 
> 赞同：0
> 
> 时间：2012-04-07T17:21:33.360
> 
> 标签：jquery, browser-cache, grails-2.0

...有没有一种可靠的方法来刷新 Grails 应用程序中的 JavaScript 资源，而不需要清理和重新启动它？我注意到，在进行 ajax 调用时，有时可能需要一段时间才能刷新某些更改。

例如：

```
$.ajax({
    type    : thisType,
    url     : thisUrl,
    data    : thisData,
    statusCode :  {
        200 : function(){
                console.clear();
                console.log( 'status code 200');
        },
        401 : function(){
                console.clear();
                console.log('log in to continue');
        }

... omitted stuff ...

}); 
```

当状态码为 200 时，我会得到预期的控制台输出，但不是在我预期的 401 时。稍后说明获得预期的 401 输出等其他代码。

这是否表明浏览器缓存有问题？我正在使用 Chrome、Grails 2.0.2、jQuery 1.6 和 IntelliJ 的最新发行版

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-07T17:57:28.120

以我个人的经验，大部分时间都是浏览器缓存。当我使用 chrome 测试我的 webapps 时，我通常通过转到右下角**Web Tools**下的**设置，然后单击****Disable cache**来禁用缓存。

 ****除此之外，我的 Web 应用程序会很快刷新它们的资源，而且我只有在修改布局时才会发现问题，这些问题通常会迫使我重新启动开发服务器。****

# objective-c - Objective-C 文字颜色

> ID：10056633
> 
> 赞同：0
> 
> 时间：2012-04-07T17:22:23.550
> 
> 标签：objective-c, ipad

我正在为 iPad 编写一个应用程序，它会告诉我们是否有人在网球比赛的场上。基本上，只是一个具有名称列表的应用程序，每个名称旁边都有一个开/关按钮。一旦按下开启按钮，他们的名字就会变成红色，因此他们在场上。

我将如何使用可分配给按钮的可编辑字体颜色加载名称等的 excel 列表？

谢谢，路易斯。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-07T17:32:59.063

以下是步骤：

1.  在 Excel 文件中的每个名称旁边都有一个状态列（1 或 0）。
2.  导出为 CSV 格式。
3.  在您的应用程序中读入文件。（有很多方法可以做到这一点：导入 Xcode，通过网络下载等，取决于您的需要。）
4.  解析文件（通过使用返回字符和分隔符）。
5.  根据状态设置表格视图中的颜色。

# c# - 更改另一个应用程序的输入语言

> ID：10056637
> 
> 赞同：5
> 
> 时间：2012-04-07T17:22:52.343
> 
> 标签：c#, c++, winapi, keyboard, input-language

我想更改活动窗口的输入语言。问题是活动窗口不是我的应用程序。我知道，`InputLanguage.CurrentInputLanguage = lang;`但它改变了我的 WinForms 应用程序的语言，而不是活动应用程序的语言。

摘要：我的情况是我的程序监听任何键盘事件（即使它没有聚焦）并在我按下时执行代码`F1`。

我希望按此键`F1`将记事本中的语言更改为希伯来语，这是我按 F1 时的活动应用程序。

我对低级解决方案或高级解决方案感兴趣。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2018-05-27T08:09:45.983

您应该知道另一个应用程序`hWnd`并为它发布消息

```
 public void InputLangChangeRequest(IntPtr hwnd, InputLanguage language)
    {
        IntPtr handle = InputLanguage.Handle;
        PostMessage(hwnd, WM_INPUTLANGCHANGEREQUEST, IntPtr.Zero, handle);
    } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-26T17:45:41.240

这可能是[远程应用程序上此 Switch 输入语言的副本](https://stackoverflow.com/questions/1261494/switch-input-language-on-remote-application)

这个参考也可以提供帮助。[http://msdn.microsoft.com/en-us/library/ms724947](http://msdn.microsoft.com/en-us/library/ms724947)

# github - 如何获取 GitHub 克隆统计信息？

> ID：10056638
> 
> 赞同：45
> 
> 时间：2012-04-07T17:23:10.983
> 
> 标签：github, statistics

GitHub 的“Stats & Graphs”选项卡中曾经有一个“Clones”子选项卡（例如[https://github.com/TeamMentor/TeamMentor-Documentation/graphs/impact](https://github.com/TeamMentor/TeamMentor-Documentation/graphs/impact)），但现在已经不存在了。

还有其他方法可以获取这些统计信息吗？

如果我们能让[Gauges](http://get.gaug.es/)显示 Git 克隆、推送、拉取、GitHub 页面视图等，那就太好了。

* * *

## 回答 #1

> 赞同：53
> 
> 时间：2014-08-12T17:04:27.283

至少关于克隆，您现在（2014 年 8 月 12 日）有一个专用图表。
（2019 年`Insights / Traffic`：）

请参阅“[克隆图](https://github.com/blog/1873-clone-graphs)”

> 我们的流量图表选项卡向您显示了有关谁在网络上访问您的存储库的大量信息。
> **我们在此选项卡中添加了一个新图表，显示 git clone 活动**。
> 
> ![https://cloud.githubusercontent.com/assets/395621/3867646/2c340b8a-2009-11e4-8823-9ddda44b51e0.png_git 克隆流量图](../Images/9107b81b1de575a08be457f6c1f44fde.png)
> 
> 您可以使用它来找出：
> 
> *   **您的存储库的源代码在一天内实际克隆了多少次**，以及
> *   **克隆了多少个唯一的 GitHub 用户（或匿名 IP 地址）**。
> 
> 有关流量图的更多信息，[请查看文档](https://help.github.com/articles/about-repository-graphs#traffic)。

请注意，您还会看到引荐网站和唯一身份访问者

* * *

2021 年 1 月更新：[Jan-Philip Gehrcke 博士在](https://stackoverflow.com/users/145400/dr-jan-philip-gehrcke)[评论](https://stackoverflow.com/questions/10056638/how-to-get-github-clone-stats/25270050?noredirect=1#comment116315932_25270050)中报告：

> 为了定期收集流量/访问数据（例如克隆、视图），我构建了一个 GitHub Action: [`jgehrcke/github-repo-stats`](https://github.com/jgehrcke/github-repo-stats):
> 它自动：
> 
> *   将数据快照保存在 git 存储库中，
> *   聚合它们，并且
> *   生成带有图表的报告，然后可以跨越整个数据收集周期！
> 
> 自述文件中的演示报告。

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2014-03-12T14:10:34.020

快速更新：
谷歌现在提供了一个直接的 API 调用，可以在 github 上的 README 文件中使用，以将统计数据直接收集到谷歌分析。如果您已有 Google Analytics 帐户，则需要将其升级为通用帐户。这是管理页面上的快速按钮。如果不升级新的 api 将无法工作 - 我们花了一段时间来解决这个问题。更多信息：[https ://developers.google.com/analytics/devguides/collection/upgrade/?hl=en_US](https://developers.google.com/analytics/devguides/collection/upgrade/?hl=en_US)

这是我们对 google 通用统计 API 的新调用：

```
[![analytics](http://www.google-analytics.com/collect?v=1&t=pageview&_s=1&dl=https%3A%2F%2Fgithub.com%2Fproject-imas%2Fapp-password&_u=MAC~&cid=1757014354.1393964045&tid=UA-XTZ530-2)]() 
```

Githalytics.com 不再需要，并解释了为什么该站点已启动但不再运行。当 Githalytics 在 1 月底出现故障时，我们发现这一点很困难，直到 2 月下旬我们才注意到，所以我们丢失了大约一个月的网站访问统计数据。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-11-01T23:09:53.287

目前（2012 年 10 月）的答案是，不，这是不可能的。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2016-07-06T05:56:17.497

现在超级简单！

更新路径：“REPO -> Graphs -> TRAFFIC”

[![在此处输入图像描述](../Images/d9e305eb799f3faeedb681723a54e18c.png)](https://i.stack.imgur.com/JiLFL.png)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2019-09-03T06:41:57.833

最新的是：

github用户名>>回购名称>>洞察力> Traphic

```
 datanapps >> GoogleExoplayer >> Insight (select Top tab) >> Traphic (select left side option) 
```

请检查图像流：

[![在此处输入图像描述](../Images/18fa508fc114e7586ed4dce6db48f2ad.png)](https://i.stack.imgur.com/QmkGR.png)

希望它会帮助你。

# c++ - 获取进程的基地址

> ID：10056641
> 
> 赞同：5
> 
> 时间：2012-04-07T17:23:36.197
> 
> 标签：c++, minesweeper, readprocessmemory, base-address

我正在尝试制作一个从 Minesweeper 读取计时器值的程序。（操作系统是windows 7 64bit）

使用作弊引擎我找到了变量的基地址，但每次运行 Minesweeper 时它都会改变。

我需要做什么才能自动找出基地址？

它与可执行基地址有关吗？

这是我的代码：

```
#include <windows.h>
#include <iostream>
using namespace std;

int main()
{
    DWORD baseAddress = 0xFF1DAA38;//always changing
    DWORD offset1 = 0x18;
    DWORD offset2 = 0x20;
    DWORD pAddress1;
    DWORD pAddress2;

    float value = 0;
    DWORD pid;
    HWND hwnd;

    hwnd = FindWindow(NULL,"Minesweeper");
    if(!hwnd)//didn't find the window
    {
        cout <<"Window not found!\n";
        cin.get();
    }
    else
    {
        GetWindowThreadProcessId(hwnd,&pid);
        HANDLE phandle = OpenProcess(PROCESS_VM_READ,0,pid);//get permission to read
        if(!phandle)//failed to get permission
        {
            cout <<"Could not get handle!\n";
            cin.get();
        }
        else
        {
            ReadProcessMemory(phandle,(void*)(baseAddress),&pAddress1,sizeof(pAddress1),0);
            ReadProcessMemory(phandle,(void*)(pAddress1 + offset1),&pAddress2,sizeof(pAddress2),0);
            while(1)
            {
                ReadProcessMemory(phandle,(void*)(pAddress2 + offset2),&value,sizeof(value),0);
                cout << value << "\n";
                Sleep(1000);
            }
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-07T17:35:45.203

```
#pragma comment( lib, "psapi" )

DWORD GetModuleBase(HANDLE hProc, string &sModuleName) 
{ 
   HMODULE *hModules; 
   char szBuf[50]; 
   DWORD cModules; 
   DWORD dwBase = -1; 
   //------ 

   EnumProcessModules(hProc, hModules, 0, &cModules); 
   hModules = new HMODULE[cModules/sizeof(HMODULE)]; 

   if(EnumProcessModules(hProc, hModules, cModules/sizeof(HMODULE), &cModules)) { 
      for(int i = 0; i < cModules/sizeof(HMODULE); i++) { 
         if(GetModuleBaseName(hProc, hModules[i], szBuf, sizeof(szBuf))) { 
            if(sModuleName.compare(szBuf) == 0) { 
               dwBase = (DWORD)hModules[i]; 
               break; 
            } 
         } 
      } 
   } 

   delete[] hModules; 

   return dwBase; 
} 
```

# javascript - 非常奇怪的 jQuery / AJAX 行为

> ID：10056642
> 
> 赞同：0
> 
> 时间：2012-04-07T17:24:04.143
> 
> 标签：javascript, jquery, ajax, alert

我有一个对服务器的 Ajax 调用，只有当我传递`alert();`给它时才有效。无法弄清楚出了什么问题。任何人都可以帮忙吗？

客观的

1.  如果在 PrettyPhoto iFrame 中单击“更新”按钮 - 然后 (a) 调用服务器以运行更新后端数据库的 PHP 脚本，(b) 关闭 PrettyPhoto 窗口，以及 (c) 刷新页面
2.  如果在 PrettyPhoto iFrame 中单击“不更新”按钮 - 只需 (a) 关闭 PrettyPhoto 窗口，然后 (b) 刷新页面

**这不起作用（即，没有对服务器进行 Ajax 调用）：**

```
jQuery.support.cors = true; // needed for ajax to work in certain older browsers and versions

$('input[name="status"]').on("change", function() {

    if ($('input:radio[name="status"]:checked').val() == 'Y') {

        $.ajax({
            url: 'http://mydomain.com/dir/myPHPscript.php?param=' + $('#param').val() + '&id=' + ( $('#id').val() * 1 ) + '&mode=' + $('#mode').val()
        });

    }

    window.parent.closePP();

    window.top.location.href = $('#redirect').val();    // reloads page

}); 
```

**这有效！（即，当我有 alert() 存在时，对服务器进行 Ajax 调用）：**

```
jQuery.support.cors = true; // needed for ajax to work in certain older browsers and versions

$('input[name="status"]').on("change", function() {

    if ($('input:radio[name="status"]:checked').val() == 'Y') {

        $.ajax({
            url: 'http://mydomain.com/dir/myPHPscript.php?param=' + $('#param').val() + '&id=' + ( $('#id').val() * 1 ) + '&mode=' + $('#mode').val()
        });

        alert('this makes it work');

    }

    window.parent.closePP();

    window.top.location.href = $('#redirect').val();    // reloads page

}); 
```

谢谢。

**根据答案进行了多次修改——仍然无法正常工作。这是最新的：**

```
jQuery.support.cors = true; // needed for ajax to work in certain older browsers and versions

$('input[name="status"]').on("change", function() {

if ($('input:radio[name="status"]:checked').val() == 'Y') {

    $.ajax({
        url: 'http://mydomain.com/dir/myPHPscript.php?param=' + $('#param').val() + '&id=' + ( $('#id').val() * 1 ) + '&mode=' + $('#mode').val(),
        success: functions(data) {var $doNothing = data;}
    });

}

window.parent.closePP();
window.top.location.href = $('#redirect').val();    // reloads page

}); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-07T17:25:01.693

您需要在 Ajax 回调中完成其余的工作

见[jquery ajax](http://api.jquery.com/jQuery.ajax/)

```
$('input[name="status"]').on("change", function() {
    if ($('input:radio[name="status"]:checked').val() == 'Y') {
        $.ajax({
            url: 'http://mydomain.com/dir/myPHPscript.php?param=' + $('#param').val() + '&id=' + ( $('#id').val() * 1 ) + '&mode=' + $('#mode').val()
        },
        success:function() {
          window.parent.closePP();
          window.top.location.href = $('#redirect').val();    // reloads page
        });
     }
     else {
          window.parent.closePP();
     }
 }); 
```

您也可以只获取数据：

```
$('input[name="status"]').on("change", function() {
    if ($('input:radio[name="status"]:checked').val() == 'Y') {
        $.get('http://mydomain.com/dir/myPHPscript.php?param=' + $('#param').val() + '&id=' + ( $('#id').val() * 1 ) + '&mode=' + $('#mode').val(), 
         function() {
          window.parent.closePP();
          window.top.location.href = $('#redirect').val();    // reloads page
        });
     }
     else {
          window.parent.closePP();
     }
 }); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-07T17:25:36.100

AJAX 是异步的。该`$.ajax()`调用将向服务器发起一个请求，然后脚本的其余部分将继续执行，即使请求正在返回服务器。

alert() 用于“减慢”/暂停其余代码，允许 ajax 请求完成。

你需要做的是：

```
$.ajax({
    url: '....';
    success: someFunction;
}); 
```

当 ajax 调用成功时，它会调用`someFunction()`.location.href 。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-07T17:38:47.173

你可以试试这个：

```
$('input[name="status"]').on("change", function() {

    if ($('input:radio[name="status"]:checked').val() == 'Y') {

       $.ajax({
          url: '....',
          success: function(data) {
                    window.parent.closePP();
                    window.top.location.href = $('#redirect').val();  
                   }
       });      

    }
    else{

       window.parent.closePP();

       window.top.location.href = $('#redirect').val();    // reloads page
    }
}); 
```

# python - 使用 Django 进行两步用户注册

> ID：10056643
> 
> 赞同：1
> 
> 时间：2012-04-07T17:24:06.560
> 
> 标签：python, django, django-forms

我正在使用 Django 创建一个网站，并且想要一个相当常见的两步用户注册。我的意思是用户填写一些基本用户信息+一些应用程序特定信息（有点像优惠券价值）。提交后，将发送一封电子邮件以确保电子邮件地址有效。此电子邮件应包含一个链接以单击以“完成”注册。当点击链接时，用户被标记为已验证并且他们被引导到一个新页面以完成可选的“用户配置文件”类型信息。

所以，很基本的东西。我做了一些研究，发现 James Bennett 的 django-registration。我确实知道 James 是谁，并且过去在 PyCons 和 DjanoCons 上见过他。显然，世界上很少有人比 James 更了解 Django（所以，我知道代码/应用程序的质量很好）。但是，这似乎有点过度杀戮。我已经阅读了文档并且有点困惑（也许我今天只是有点密集）。我相信如果我确实使用 django-registration，我将需要一些自定义表单等。

还有什么我应该评估的吗？或者有没有关于使用 django-registration 的好的教程或视频？我做了一些谷歌搜索，但没有找到任何东西。但是，我怀疑这可能是很多非常常见的词并没有真正找到你正在寻找的东西的情况（django 用户注册教程/示例）。

或者只是一种情况，使用 Django 表单等构建自己的解决方案同样容易？

这是我正在使用的技术堆栈：

```
Python 2.7.2 
Django 1.3.1
PostgreSQL 9.1
psycopg2 2.4.1
Twitter Bootstrap 2.0.2 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-07T17:29:46.053

django-registration 实际上很容易上手，但取决于您正在查看的文档，它似乎有点难以承受。您在看[快速入门指南](https://bitbucket.org/ubernostrum/django-registration/src/27bccd108cde/docs/quickstart.rst)吗？

您真正需要做的就是安装它，在您的设置和 urls.py 中各添加一行，然后制作一些模板。我认为那里可能有更好的示例模板，但[这里是我的一个旧项目的](https://github.com/daily-gazette/gazjango/tree/master/gazjango/templates/registration)示例模板。

该项目使用将个人资料信息放入原始注册表单的方法，这意味着制作[一个简单的 RegistrationForm 子类](https://github.com/daily-gazette/gazjango/blob/master/gazjango/accounts/forms.py)，制作一个[小型注册后端](https://github.com/daily-gazette/gazjango/blob/master/gazjango/accounts/registration_backends.py)，并将[其侵入注册 urls](https://github.com/daily-gazette/gazjango/blob/master/gazjango/accounts/registration_urls.py)。（现在可能有更好的方法来做到这一点；我最初是在 4 年前写的，两年没碰过它。但这很有效，而且不是很困难。）

然后，您可以通过添加到 activation_complete 页面的链接，或者更直接地通过更改 django-registration 中我不知道的一些设置来重定向以填写选项用户配置文件信息。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-07T17:45:29.123

[检查 Pinax](http://pinaxproject.com/)，因为它试图简化网站的所有样板方面。

# delphi - 自定义组件创建 - 如何在工具面板中添加代表组件的小图标？

> ID：10056653
> 
> 赞同：6
> 
> 时间：2012-04-07T17:25:34.113
> 
> 标签：delphi, icons, delphi-2009, custom-component

请记住，我已经阅读了所有关于将组件图标添加到自定义组件的说明。当我们谈论 24x24 像素的图标大小时，我能够做到这一点。将组件拖放到表单上时，我会看到该图标。但是，我看不到在浏览 Tool Palette 时应该显示的 16x16 小图标。

我[读过](https://stackoverflow.com/questions/3319276/delphi-non-visual-component-image)我应该命名我的另外两个 BMP 文件，它们包含在 DCR 文件中，如下所示：

MyComponentName16 [适用于 16x16 BMP 文件]

MyComponentName32 [用于 32x32 BMP 文件]

不幸的是，这似乎不起作用，我试图重新启动 Delphi 几次，希望它可能是不刷新某些东西但没有任何成功的情况。

有任何想法吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-04-08T12:09:17.983

您可以尝试清除 IDE 包缓存：

*   从 Delphi IDE 中卸载组件的包
*   在注册表中浏览到以下键
    `HKEY_CURRENT_USER\Software\CodeGear\BDS\6.0\Package Cache\`
*   查找并删除与您的包名称对应的键（如`MyPackage.bpl`）
*   现在浏览器到下一个键
    `HKEY_CURRENT_USER\Software\CodeGear\BDS\6.0\Palette\Cache\`
*   查找并删除与您的包名称对应的键（如`MyPackage.bpl`）
*   最后尝试重新安装您的软件包；现在它应该出现正确的图标

来源：[`http://www.lnssoftware.ca/blog/?p=140`](http://www.lnssoftware.ca/blog/?p=140)

作为另一种解决方法，您可以尝试使用未记录的命令行参数运行 Delphi IDE：

```
c:\Program Files (x86)\CodeGear\RAD Studio\6.0\bin\bds.exe -nocache 
```

# css - 多div居中

> ID：10056656
> 
> 赞同：0
> 
> 时间：2012-04-07T17:25:38.680
> 
> 标签：css, html

我有 2 个 div，里面有 3 个 div，所有 2 个都包裹在一个大 div 周围。我尝试将其居中，但它不起作用。这是我的代码：

```
<div stye="margin-left:auto; margin-right:auto; width: 1210px;">
<div id="left" style=" float:left; width: 606px; height: 506px;">

    <div style="top:0px; float:left; width:300px; border: 2px solid #FF0; height:502px; text-align:center; font-family: Myriad Pro, Arial, sans-serif; color:#FFF;"><h1>A picture of a cool guy wearing our shirt will go in here.</h1></div>

    <div style="top:0px; float:left; width:300px; border: 2px solid #FF0; border-left:0px; height:200px; text-align:center; font-family: Myriad Pro, Arial, sans-serif; color:#FFF;"><h1>A product image will go in here.</h1></div>  

    <div style="top:0px; float:left; width:300px; border: 2px solid #FF0;border-top:0px; border-left:0px; height:300px; text-align:center; font-family: Myriad Pro, Arial, sans-serif; color:#FFF;"><h1>A tight product image will go in here.</h1></div>  

</div>
<div id="left" style="float:left; width: 604px; height: 506px;">

    <div style="top:0px; float:right; width:300px; border: 2px solid #FF0; border-left:0px; height:502px; text-align:center; font-family: Myriad Pro, Arial, sans-serif; color:#FFF;"><h1>A picture of a cool guy wearing our shirt will go in here.</h1></div>

    <div style="top:0px; float:left; width:300px; border: 2px solid #FF0; border-left:0px; height:200px; text-align:center; font-family: Myriad Pro, Arial, sans-serif; color:#FFF;"><h1>A product image will go in here.</h1></div>  

    <div style="top:0px; float:left; width:300px; border: 2px solid #FF0;border-top:0px; border-left:0px; height:300px; text-align:center; font-family: Myriad Pro, Arial, sans-serif; color:#FFF;"><h1>A tight product image will go in here.</h1></div>  

</div>
</div> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-07T17:27:46.203

边距：0 自动；宽度：1210px；

你还有一个错字“麦粒肿”:)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-07T17:29:36.453

您应该使用 CSS 类来提高效率。您还有两个带有`id="left"`. 元素 ID 是唯一的，因此您应该改用一个类。

```
<style type="text/css">
.myclass {
    top:0px; float:left; width:300px; border: 2px solid #FF0; height:502px; text-align:center; font-family: Myriad Pro, Arial, sans-serif; color:#FFF;
}
</style>
<!-- this div gets all style from .myclass definition -->
<div class="myclass">content</div> 
```

还要使 div 居中，添加样式`margin: auto;`

# c# - 更改 WPF 数据网格行颜色

> ID：10056657
> 
> 赞同：8
> 
> 时间：2012-04-07T17:25:40.100
> 
> 标签：c#, wpf, datagrid, colors, row

我有一个填充了 ObserverableCollection 的 WPF 数据网格。

现在我想根据程序启动时的行内容以及运行时是否发生变化来为行着色。

```
System.Windows.Controls.DataGrid areaDataGrid = ...;
ObservableCollection<Area> areas;
//adding items to areas collection
areaDataGrid.ItemsSource = areas;

areaDataGrid.Rows  <-- Property not available. how to access rows here?

CollectionView myCollectionView = (CollectionView)CollectionViewSource.GetDefaultView(areaDataGrid.Items);
((INotifyCollectionChanged)myCollectionView).CollectionChanged += new NotifyCollectionChangedEventHandler(areaDataGrid_Changed);
...

void areaDataGrid_Changed(object sender, NotifyCollectionChangedEventArgs e)
{
    //how to access changed row here?
} 
```

如何在启动和运行时访问行？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-04-07T17:29:50.077

使用[`RowStyle`](http://msdn.microsoft.com/en-us/library/system.windows.controls.datagrid.rowstyle.aspx). 您可以使用[`Triggers`](http://msdn.microsoft.com/en-us/library/system.windows.style.triggers.aspx)有条件地更改颜色，或者将其绑定到`Brush`项目的属性并分别更改该属性。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-11-30T04:14:09.510

要通过代码而不是触发器来更改它，它可能如下所示。您可以将数据作为数组访问，然后进行比较。在此示例中，我将比较第 4 列以查看它是否大于 0，并比较第 5 列以查看它是否小于 0，否则只需将其绘制为默认颜色。在那里尝试/捕获它，因为需要添加一些逻辑来查看它是否是有效的行......或者你可以忽略下面的错误（虽然不是很好的做法）但应该可以按原样使用.

```
 private void DataGrid_LoadingRow(object sender, DataGridRowEventArgs e)
    {
        try
        {
            if (Convert.ToDouble(((System.Data.DataRowView)(e.Row.DataContext)).Row.ItemArray[3].ToString()) > 0)
            {
                e.Row.Background = new SolidColorBrush(Colors.Green);
            }
            else if (Convert.ToDouble(((System.Data.DataRowView)(e.Row.DataContext)).Row.ItemArray[4].ToString()) < 0)
            {
                e.Row.Background = new SolidColorBrush(Colors.Red);
            }
            else
            {
                e.Row.Background = new SolidColorBrush(Colors.WhiteSmoke);
            }
        }
        catch
        {
        } 
    } 
```

# symfony - DoctrineExtensions SoftDeleteable

> ID：10056661
> 
> 赞同：3
> 
> 时间：2012-04-07T17:26:14.947
> 
> 标签：symfony, doctrine-orm

我正在使用doctrine2设置symfony2，并且我想使用我遵循的每一步的DoctrineExtensions（Gedmo），并且大多数都在工作，但是我找不到需要更改SoftDeleteable才能工作的配置文件。

[https://github.com/l3pp4rd/DoctrineExtensions/blob/master/doc/softdeleteable.md](https://github.com/l3pp4rd/DoctrineExtensions/blob/master/doc/softdeleteable.md)

```
$config = 新教义\ORM\配置；

// 你的配置..

$config->addFilter('soft-deleteable', 'Gedmo\SoftDeleteable\Filter\SoftDeleteableFilter');

```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2015-08-21T13:43:55.797

我自己遇到了这个问题并通过将以下内容添加到我的 config.yml 来修复它

```
doctrine:
    ...
    orm:
        ...
        filters:
            softdeleteable:
                class: Gedmo\SoftDeleteable\Filter\SoftDeleteableFilter
                enabled: true 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-01T10:38:19.800

I believe the problem is that you're using symfony 2.0 which includes doctrine 2.1\. The version of the DoctrineExtensions you're looking at doesn't support doctrine 2.1.

If you flick to the doctrine2.1.x branch in github it doesn't mention softdeletable unfortunately.

# linux - 如何在 Linux 服务器上归档来自 Apache SVN 的旧版本

> ID：10056662
> 
> 赞同：1
> 
> 时间：2012-04-07T17:26:27.593
> 
> 标签：linux, apache, svn, version-control, revision-history

我有一个网站，用户可以通过该网站编写自己的剧本。

此剧本以修订的形式保存。

Apache SVN 已安装。

我只想保存每个用户文档的最后 5 个修订。

但问题出在后端，所有修订都存储在一个名为“Docsrepo”的文件夹中，并且在 1 个文件夹中归类为 1000 个修订。像这样它有234个文件夹。

意思是 234*1000 次修订。

现在我想归档所有这些修订，只保留每个文档的最后 5 个修订。

我怎么做？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-08T00:56:17.537

如果您查看文件夹，您会看到每个修订都存储为单独的文件，因此您可以看到大小。这些文件中的每一个实际上都在存储签入之间的增量或差异，因此它们应该非常小。

使用更高版本的 SVN，您可以运行“svnadmin pack”命令，它将 1 个文件夹中的所有文件组合成一个更大的文件。这有助于提高性能，因为操作系统将能够更好地缓存单个文件，但是，它仅适用于已满的旧文件夹 - 即不会添加到它们的文件夹。虽然它运行起来很安全，而且您可以随意运行它（有些人在每次签到时运行它，有些人每周或每月运行它）。

现在，您不能只删除旧文件，因为您已经看到每个文件只包含它与以前版本之间的差异，所以如果您删除旧文件，SVN 将无法重新创建整个文件基于随时间发生的所有变化。

这有点复杂。SVN 使用一种叫做[skip-deltas](http://svn.apache.org/repos/asf/subversion/trunk/notes/skip-deltas)的东西，它是“检查点”，它存储所有先前差异的汇总，这意味着您可以获得更好的性能。但是，这仍然不意味着您可以删除旧文件，除非您知道可以重新创建每个文件（而且我猜您不会知道每个文件实际签入了多少次）。

* * *

所以..要回答你的问题：

您可以转储和加载您的存储库，忽略古老的文件。这涉及到 svnadmin dump 和 svnadmin load 命令。[您](http://svnbook.red-bean.com/en/1.7/svn.reposadmin.maint.html#svn.reposadmin.maint.migrate.svnadmin)只使用最后 5 个修订号将存储库转储到转储文件中，然后将转储文件加载到新的存储库中。（我认为还有基于日期的倾销选项）。

请注意，您不能保留每个文件的最后 5 个修订版。您只能转储一系列修订。

显然，这是一项手动的管理任务，通常用于删除没人会再看到的古老修订。没有自动“仅保留最后 5 个修订版”选项。删除修订的需求很小，但是 SVN 非常擅长保持快速性能，并且增量很小，因此不需要删除历史记录。如果您真的磁盘空间不足，那么转储/加载选项是您最好的选择。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-07T17:37:17.073

可能可以在 SVN 中添加一个钩子，这样当用户签入新修订版时，您可以放弃最旧的修订版。但是，您确实意识到 SVN 并没有保留每个脚本的 1000*234 完整副本，对吗？SVN 只保存每个版本之间的差异。

# java - 仅从号码中获取联系人姓名

> ID：10056663
> 
> 赞同：0
> 
> 时间：2012-04-07T17:26:34.750
> 
> 标签：java, android, eclipse, cursor, contacts

假设我有一个编辑文本和一个按钮。在编辑文本中，您将输入一个数字，然后当您点击按钮时，它将显示联系信息或返回该联系人的姓名。

我尝试了各种没有运气的方法。我成功获得最远的一个是以下......但我没有运气返回这个名字。

```
Cursor phoneCursor = null;
    contactList = new HashMap<String,String>();

  try{
       Uri uContactsUri = ContactsContract.CommonDataKinds.Phone.CONTENT_URI;

      String strProjection = ContactsContract.CommonDataKinds.Phone.DISPLAY_NAME;

      phoneCursor = getContentResolver().query(uContactsUri, null, null, null, strProjection);
      phoneCursor.moveToFirst();

      String name = "";
      String phoneNumber = "";

       int nameColumn = phoneCursor.getColumnIndex(Phone.DISPLAY_NAME);
       int phoneColumn = phoneCursor.getColumnIndex(Phone.NUMBER);

           phoneCursor.moveToNext();

        }
    }
    catch(Exception e){
        Log.e("[SmsMain] getContactData", e.toString());
    }
    finally{
       if(phoneCursor != null){
          phoneCursor.close();
          phoneCursor = null;
       }
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-07T17:48:16.277

使用以下方法获取联系人姓名，如果号码不存在，则返回相同的号码而不是姓名。

```
private String getContactNameFromNumber(String number) {
        // define the columns I want the query to return
        String[] projection = new String[] {
                Contacts.Phones.DISPLAY_NAME,
                Contacts.Phones.NUMBER };

        // encode the phone number and build the filter URI
        Uri contactUri = Uri.withAppendedPath(Contacts.Phones.CONTENT_FILTER_URL, Uri.encode(number));

        // query time
        Cursor c = getContentResolver().query(contactUri, projection, null,
                null, null);

        // if the query returns 1 or more results
        // return the first result
        if (c.moveToFirst()) {
            String name = c.getString(c
                    .getColumnIndex(Contacts.Phones.DISPLAY_NAME));
            return name;
        }

        // return the original number if no match was found
        return number;
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-07T17:36:12.633

为此，您需要使用[此处所述的优化的 PhoneLookup 提供程序](http://developer.android.com/reference/android/provider/ContactsContract.PhoneLookup.html)

Uri uri = Uri.withAppendedPath(PhoneLookup.CONTENT_FILTER_URI, Uri.encode(phoneNumber)); 光标 cursor = resolver.query(uri, new String[]{PhoneLookup.DISPLAY_NAME},null,null,null);

有关更多详细信息，请参阅此[链接](http://www.higherpass.com/Android/Tutorials/Working-With-Android-Contacts/)

# javascript - 将用户控件添加到页面时，Javascript 停止工作

> ID：10056668
> 
> 赞同：1
> 
> 时间：2012-04-07T17:27:37.247
> 
> 标签：javascript, asp.net

我正在使用 asp.net 和 c# 开发网站。我有一个索引页面，其中 javascript 用于滑动图像。我创建了一个名为 NewsBar.ascx 的用户控件。在 NewsBar.ascx 用户控件中，有用于滑动新闻的 javascript。两个脚本都运行完美。但是每当我将用户控件导入索引页面时。图像滑动 javascript 停止工作。

这个问题的任何想法或解决方案？

索引页 javasrcipt “标题部分”

```
<link rel="stylesheet" type="text/css" href="engine1/style.css" />
<style type="text/css">a#vlb{display:none}</style>
<script type="text/javascript" src="engine1/jquery.js"></script>
<script type="text/javascript" src="engine1/wowslider.js"></script> 
```

“身体的一部分”

```
 <div id="wowslider-container1">
        <div class="ws_images">
        <span><img src="1.jpg" alt="" title="" id="wows0"/></span>
        <span><img src="2.jpg" alt="" title="" id="wows1"/></span>
        <span><img src="3.jpg" alt="" title="" id="wows2"/></span>
        </div>
        <div class="ws_bullets"><div>
        <a href="#wows0" title=""><img src="../data1/tooltips/1.jpg" alt="+2Wings"/>1</a>
        <a href="#wows1" title=""><img src="../data1/tooltips/2.jpg" alt="College1"/>2</a>
        <a href="#wows2" title=""><img src="../data1/tooltips/3.jpg" alt="College2"/>3</a>
        </div></div>
    </div>
    <script type="text/javascript" src="engine1/script.js"></script> 
```

新闻栏用户控制

```
<link rel="stylesheet" href="../../Resources/Styles/NewsBar/style-newsticker.css" type="text/css" media="screen" />
<script src="../../Resources/Scripts/NewsBar/jquery-1.5.2.min.js" type="text/javascript"></script>
<script src="../../Resources/Scripts/NewsBar/jcarousellite_1.0.1c4.js" type="text/javascript"></script>
<script type="text/javascript">
$(function () {
    $("#newsticker-demo").jCarouselLite({
        vertical: true,
        hoverPause: true,
        btnPrev: ".previous",
        btnNext: ".next",
        visible: 3,
        auto: 3000,
        speed: 500
    });
}); 
```

我已经在 web.config 中注册了用户控件并使用

```
<uc5:NewsBar runat="server" /> 
```

在 index.aspx 页面中调用用户控件。

# actionscript-3 - AS3 - graphics.clear()

> ID：10056671
> 
> 赞同：0
> 
> 时间：2012-04-07T17:27:51.887
> 
> 标签：actionscript-3

我从上下文菜单中调用下面的函数，图形被清除。如果调用来自另一个函数，它不会。为什么它不起作用？

```
 function removeFrame(e:Event=null):void{
            holder.graphics.clear();
            }

        function cleanIt(e:Event=null):void{ 
        removeFrame() 
    } 
    // NOT working by calling it like this:
        cleanIt() 

// It's Working if I call the function directly from the right-click menu:
 menuitem1.addEventListener(ContextMenuEvent.MENU_ITEM_SELECT,cleanIt); 
```

谢谢。乌里

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-07T17:38:00.440

你能显示更多代码，函数是如何调用的？看起来它是一个事件监听器函数，它可以改变什么`this`意思的范围（即。`this.holder`）。您可以将函数类设置为级别：`function removeFrame(e:Event=null):void{`并将其放在类中。尽管如果不看更多代码就很难准确判断。

我在 fla 文件中尝试过

```
import flash.display.Sprite;
import flash.ui.ContextMenu;
import flash.ui.ContextMenuItem;

var holder:Sprite = new Sprite();
holder.graphics.beginFill(0x443311,1);
holder.graphics.drawCircle(10,10,300);
addChild(holder);   
var cm:ContextMenu = new ContextMenu();
var menuitem1:ContextMenuItem = new ContextMenuItem("HAHA")
cm.customItems.push(menuitem1);
contextMenu = cm;

function removeFrame(e:Event=null):void{
    holder.graphics.clear();
}

function cleanIt(e:Event=null):void{ 
    removeFrame() 
}

cleanIt();
menuitem1.addEventListener(ContextMenuEvent.MENU_ITEM_SELECT,cleanIt); 
```

并且`cleanIt`适用于两者，需要更多信息或代码才能知道发生了什么。

# cakephp - CakePHP / Croogo 插件问题

> ID：10056676
> 
> 赞同：0
> 
> 时间：2012-04-07T17:28:08.150
> 
> 标签：cakephp, cakephp-1.3

我遇到了 Croogo 和 CakePHP 1.3 的一个奇怪问题。我有一个名为“Ride”的插件。其中我有模型：骑行、报价、服务和位置。它们都有自己的控制器，它们扩展了 RideAppController，扩展了 AppController，模型也扩展了 RideAppModel/ AppModel...等。出于某种原因，Ride 和 Quote 在前端和管理（admin_index 和 index）中都表现出色。我也在激活中添加所有 acos。

但是服务和位置根本**不起作用**，只显示一个通用的“在此服务器上找不到请求的地址”。错误...我不明白为什么 Ride 和 Quote 工作，但其他两个不工作？！模型或控制器中实际上没有任何内容。有什么想法吗？提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-17T14:42:44.093

我能够通过将模型和控制器重命名为其他名称并更新rides_activation.php 来解决这个问题。不确定这些名称是否保留。

# iphone - 为 MKMapView 上的第一个和最后一个 MKAnnotation 设置 MKPinAnnotationColorRed

> ID：10056677
> 
> 赞同：2
> 
> 时间：2012-04-07T17:28:19.477
> 
> 标签：iphone, ios, mkmapview, mkannotationview, mkpinannotationview

我有一个`NSArray`自定义`MKAnnotation`，我需要为第一个/最后一个注释设置一个红色引脚颜色，否则设置一个绿色引脚。该程序的行为不像我想要的那样，绿色引脚每次都以随机方式与两个不同的注释相关联，不像我想要的那样与第一个和最后一个相关联。

所以，这就是我在我的控制器中所做的：

```
- (void)viewDidLoad
{   
    [super viewDidLoad];   
    //load set a coords from file etc...  
    //self.coordinates is the array of annotations   
    [self.myMap addAnnotations:self.coordinates];  
} 
```

然后在 viewForAnnotation: 回调中：

```
- (MKAnnotationView *) mapView:(MKMapView *)mapView viewForAnnotation:(id <MKAnnotation>) annotation{
    NSString *ident = @"MY_IDENTIFIER";
    MKPinAnnotationView *annView=(MKPinAnnotationView *)[self.myMap dequeueReusableAnnotationViewWithIdentifier:ident];
    if(self.myMap.userLocation==annotation){
        return nil;
    }
    if(annView == nil){
        annView=[[MKPinAnnotationView alloc] initWithAnnotation:annotation reuseIdentifier:ident];
        annView.animatesDrop=TRUE;
        annView.canShowCallout = YES;
        annView.rightCalloutAccessoryView=[UIButton buttonWithType:UIButtonTypeDetailDisclosure];
        annView.calloutOffset = CGPointMake(-5, 5);
        int currIdxAnn=[self.myMap.annotations indexOfObject:annotation];
        int lastIdxAnn=[self.myMap.annotations indexOfObject:[self.myMap.annotations lastObject]];
        /*
        if (currIdxAnn==0 || currIdxAnn==lastIdxAnn) {
            annView.pinColor=MKPinAnnotationColorRed;
        }else {
            annView.pinColor=MKPinAnnotationColorGreen;
        }*/
         CustomAnnotation *an=(CustomAnnotation *)annotation;
         if (an.tag==98||an.tag==99) {
            annView.pinColor=MKPinAnnotationColorGreen;
         }else {
            annView.pinColor=MKPinAnnotationColorRed;
         }

    }
    return annView;
} 
```

似乎该方法`addAnnotations:`不像我相信的那样工作，可能以与数组不同的顺序加载注释。可能吗？
我也尝试过类似的过程，`didAddAnnotationViews:`但没有好的结果。

一些提示？谢谢。

PS：当我写完这个问题时，我发现[了这个](https://stackoverflow.com/a/9543136/251513)回复，似乎证实了我的理论。有人已经遇到过类似的问题吗？

**编辑**：经过几次测试，我意识到完成我想要的最好的方法是首先为我的第一个/最后一个注释设置一个标签：

```
CustomAnnotation *first=[self.coordinates objectAtIndex:0];
first.tag=98;
CustomAnnotation *last=[self.coordinates objectAtIndex:[self.coordinates indexOfObject:[self.coordinates lastObject]]];
last.tag=99; 
```

然后如您所见，我稍微修改`viewForAnnotation`了注释以了解注释是我要查找的注释。然后诀窍就是调用在后台线程中添加注释的函数，例如：

```
[self performSelectorInBackground:@selector(addAllAnnot) withObject:nil];

-(void)addAllAnnot{

    [self.myMap addAnnotations:self.coordinates];
} 
```

经过一周的测试，这对我有用，如果有人有更好的想法，将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-07T17:46:54.630

查看您在答案中提到的答案，我认为您无法确定添加这些注释的顺序或它们在地图视图的内部列表中的索引。

那么你有什么选择..？与往常一样，最基本的 - 对 MKAnnotation 类进行子类化并向其添加一个属性，通过该属性您可以区分正在添加的注释。因此，只需在数组中添加这些注释时设置属性...希望这可以解决您的问题..

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-07T17:45:22.823

我不会指望地图返回的数组。mapkit 可能以一种对您来说并不明显的方式对其进行了优化。

我会从您计算的坐标中保留一个变量。或者，如果您不想要，只需包含第一个和最后一个注释的数组。

# assembly - 程序集加载和执行问题

> ID：10056685
> 
> 赞同：0
> 
> 时间：2012-04-07T17:29:10.620
> 
> 标签：assembly, x86, nasm

我正在尝试开发汇编代码，允许我加载和执行（通过用户输入）2 个其他汇编 .EXE 程序。我有两个问题：

-我似乎无法将路径名分配给有效的寄存器（或者语法可能不正确）

-我需要能够在第一个程序（可能是其中一个）开始执行后执行另一个程序。

这是我到目前为止所拥有的：

```
mov ax,cs ; moving code segment to data segment
mov ds,ax

mov ah,1h ; here I read from keyboard
int 21h
mov dl,al

cmp al,'1' ; if 1 jump to LOADRUN1 
JE LOADRUN1 
popf

cmp al,'2' ; if 1 jump to LOADRUN2 
JE LOADRUN2
popf

LOADRUN1:
    MOV AH,4BH
    MOV AL,00
    LEA DX,[PROGNAME1] ; Not sure if it works
    INT 21H

LOADRUN2:
    MOV AH,4BH
    MOV AL,00
    LEA DX,[PROGNAME2] ; Not sure if it works
    INT 21H

; Here I define the bytes containing the pathnames
PROGNAME1 db 'C:\Users\Usuario\NASM\Adding.exe',0 
PROGNAME2 db 'C:\Users\Usuario\NASM\Substracting.exe',0 
```

我只是不知道如何通过在“父”程序中的输入来启动另一个程序，在一个程序已经执行之后。

在此先感谢您的帮助！我很乐意提供任何其他信息。

-我使用的是 NASM 16 位，Windows 7 32 位。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-07T17:53:53.203

您使用 lea 描述变量地址的方式是`lea R16, [VARIABLE]`，因此在您的代码中，您应该使用：

```
LEA DX, [PROGNAME1] 
```

我无法有效地对此进行测试，因为我只有 64 位版本的 windows，它不会按原样运行此代码

# iphone - 您如何使 NSObject “全局”/在所有方法中可用？

> ID：10056694
> 
> 赞同：0
> 
> 时间：2012-04-07T17:29:51.943
> 
> 标签：iphone, objective-c, cocoa, methods, nsobject

我对 Objective-c 编程有点陌生，无法理解如何在一种方法中创建 NSObject 并在另一种方法中使用它。

例如：

我有一个具有名字、姓氏等属性的用户对象。

```
@interface UserObject : NSObject

@property (nonatomic, retain) NSString *userID, *firstName, *lastName, *profilePic, *fullName, *email, *twitter, *followingCount, *followerCount;

@end 
```

在我的 profileViewController.h 中，我将 currentUser 声明为`@property (retain, nonatomic) UserObject *currentUser;`

现在，问题来了。我有这个 IBAction

```
- (IBAction)followUser:(id)sender {
    NSLog(currentUser.firstName);
} 
```

从服务器接收到 json 数据后，我运行了一个名为 ConnectionDidFinishLoading 的方法并在里面 ->

```
- (void)connectionDidFinishLoading:(NSURLConnection *)connection {
    [connection release];

    NSString *json = [[NSString alloc] initWithData:responseData encoding:NSUTF8StringEncoding];
    [responseData release];
    NSDictionary *dataArray = [json JSONValue];

    UserObject *currentUserData = [[UserObject alloc] init];
    currentUserData.firstName = [dataArray objectForKey:@"first_name"];
    currentUserData.lastName = [dataArray objectForKey:@"last_name"];

    currentUser = currentUserData;        

    [dataArray release];
    [json release];
    [currentUserData release];
} 
```

现在，问题来了。当我运行这个 IBAction 时，应用程序崩溃了。

```
- (IBAction)followUser:(id)sender {
NSLog(@"%@",currentUser.firstName);
} 
```

我很确定这是因为 currentUser 不适用于此方法。有没有办法让 currentUser 对象成为全局对象，这样我就可以用任何方法来获取它？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-07T18:07:23.420

我认为您对实例变量和属性之间的区别感到困惑。您`currentUser`直接设置实例变量，它不保留对象 - 所以假设您不使用 ARC，它会过早地被销毁。您需要将`currentUser`设置为以下之一的行更改：

```
currentUser = [currentUserData retain];
// OR
self.currentUser = currentUserData; 
```

`self.currentUser`语法是您访问属性的方式。如果没有点，您将直接访问 ivar。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-07T17:32:44.330

**试试这个 ：**

```
NSLog(@"%@",currentUser.firstName); 
```

***提示：** `%s`用于 C 风格的字符串。*

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-07T17:50:16.310

问题很可能是您在`followUser:`从服务器接收任何数据之前调用该方法，因此`currentUser`尚未创建，因此它是一个空/悬空指针，这很可能会使您的应用程序崩溃。在使用它之前进行测试以确保 currentUser 不为零：

```
if(currentUser) {
    //do what you want
    //if currentUser is nil, this if statement will evaluate to false
    NSLog(@"%@", currentUser.firstName);
} 
```

# linux - 如何使用 m68k-uclinux-gcc 设置堆栈大小？

> ID：10056695
> 
> 赞同：1
> 
> 时间：2012-04-07T17:29:53.877
> 
> 标签：linux, gcc, stack, uclinux

有谁知道为 m68K gcc 交叉编译器设置堆栈大小的 CLI 选项是什么？

我尝试在我的 CFLAGS 中使用 -Wl,-stack_size,0x0000f000，但运行 m68k-uclinux-flthdr 似乎表明它仍设置为 0x1000？

```
[fred@localhost q4cgi]$ m68k-uclinux-flthdr a
一个
    魔术：bFLT
    版本：4
    建造日期：2012 年 4 月 7 日星期六 10:23:44
    条目：0x44
    数据开始：0xcec0
    数据结束：0xe5f4
    BSS 结束：0x107f0
    堆栈大小：0x1000
    重新定位开始：0xe5f4
    重定位计数：0x5c1
    标志：0x1（加载到 RAM）

```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2016-06-14T12:12:10.133

使用 -s 选项，例如 --->

```
m68k-uclinux-flthdr -s 16000 
```

上面的命令会将堆栈大小更改为 16 kb（大约）

同样你可以有任何尺寸

# charts - 需要有关 jasperreport 图表的帮助

> ID：10056696
> 
> 赞同：2
> 
> 时间：2012-04-07T17:30:18.993
> 
> 标签：charts, jasper-reports

我有一份报告，我需要使用它来创建 xy 图表。我已经做了几个图表并且没有回来这个错误。

该报告编译良好。当我在应用程序中执行图表时，出现以下错误：

空“方向”参数

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-28T07:41:12.430

我有同样的问题。我的问题是我的类路径上有旧版本的 jasperreport.jar。验证你的罐子

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-12T16:54:38.020

对于条形图，我遇到了同样的错误。我们使用 ireport 4.1.2，它有一个错误：当您选择“方向”作为“垂直”时，jrxml 文件不会使用此属性更新。所以你需要切换到'XML'视图并添加： <bar3DPlot> <plot orientation="Vertical" ... > </bar3DPlot>

# asp.net-mvc - 我可以创建没有成员资格的 ASP.NET 用户吗？

> ID：10056699
> 
> 赞同：3
> 
> 时间：2012-04-07T17:30:43.333
> 
> 标签：asp.net-mvc, oauth, asp.net-membership

我正在实现 OAuth（我的第一次），现在我花了一段时间研究如何使用 ASP.NET MVC 来实现它（我不想使用 OpenID）

我已经解决了（目前）：

*   获取 OAuth accessToken
*   检索 Facebook（或 google 等）用户 ID
*   检查此 ID 的 db 表 - （专门为 OAuth 注册创建的表）
*   如果找到 ID，我想使用 FormsAuth.SetAuthCookie() 并且，
*   *为他们分配一个角色以访问网站的会员区域*- 但此时尚未进行会员注册，因此没有角色因此无法访问网站的会员区域，这是我的问题。

我玩弄了使用 username=Fb.ID 和 Password=Random 以编程方式创建 asp 用户的想法（存储在上面提到的 OAuth db 表中）并以编程方式登录它们，但是

**A** : 好像真的很啰嗦

**B** : 像这样存储这个密码似乎是错误的

我应该创建一个用户并以实用的方式登录吗？

使用 asp.net 会员资格和 OAuth 时是否有最佳实践？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-08T09:14:14.773

获取 FB Id 或 OpenId 后，您需要像这样保存身份验证 cookie：

```
 HttpCookie httpCookie = FormsAuthentication.GetAuthCookie(openId, remember);
    httpCookie.Expires = DateTime.Now.AddMonths(1);
    HttpContext.Current.Response.SetCookie(httpCookie); 
```

然后你可以在 Global.asax 中设置角色

```
protected void Application_AuthenticateRequest(Object sender, EventArgs e)
{
    var context = HttpContext.Current;
    if (context.User != null && context.User.Identity.IsAuthenticated)
    {
        var user = new Dao<User>().GetByOpenId(context.User.Identity.Name);
        context.User = new GenericPrincipal(context.User.Identity, 
            new[] { Enum.GetName(typeof(UserRole), user.Role) });
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-08T07:08:14.457

通过 LiveId 实现用户身份验证时（从您的问题的角度来看，这与 OAuth 登录非常相似）我更喜欢使用具有**空**密码或**通用**密码（在 AppSettings 中配置）的成员资格提供程序来创建用户。我可以使用 FormsAuthentication.Authenticate 方法，并设置身份验证 cookie。

通过这种方法，我可以使用 RoleProvider 来存储额外的角色，并使用 ProfileProvider 来存储我无法通过 LiveId 获得的额外配置文件数据。

当您提供替代登录方法（例如针对管理员）时，请确保只有具有该管理员角色的用户才能通过替代登录方法登录。

# wiki - 具有 Mediawiki 外观和感觉的 Wiki 引擎，具有访问控制和文章评级

> ID：10056703
> 
> 赞同：0
> 
> 时间：2012-04-07T17:31:53.220
> 
> 标签：wiki, mediawiki, wiki-engine

我正在寻找一个 wiki 引擎，它具有 Mediawiki 的外观和感觉，但具有页面级访问控制。到处寻找各种 wiki 引擎，但它们似乎都没有保留 Mediawiki 的确切外观和感觉，尽管大多数版本都支持访问控制。

如果你知道，请指导我。以下是我的要求

1.  Mediawiki 的外观和感觉
2.  访问控制
3.  用户对文章进行评分的能力。
4.  能够创建用户配置文件

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-07T19:32:03.947

听起来您只需要向 mediawiki 添加一些扩展。

看看这 2 个（我会提供更多，但这个网站不会让我发布超过 2 个链接）：

[http://www.mediawiki.org/wiki/Extension:Rating](http://www.mediawiki.org/wiki/Extension:Rating)

[http://www.mediawiki.org/wiki/Extension:SocialProfile](http://www.mediawiki.org/wiki/Extension:SocialProfile)

还有一些允许您限制对 mediawiki 页面的访问（包括一个称为：访问控制）

# web-services - 如何在 Mule Flow 中使用 SOAP Web 服务？

> ID：10056704
> 
> 赞同：3
> 
> 时间：2012-04-07T17:32:06.373
> 
> 标签：web-services, soap, jax-ws, cxf, mule

我从 Mule 流程开始，并看到了我已经看到这个页面[http://www.mulesoft.org/documentation/display/MULE3CONCEPTS/Using+Mule+with+Web+Services](http://www.mulesoft.org/documentation/display/MULE3CONCEPTS/Using+Mule+with+Web+Services)和[http://www.mulesoft.org /documentation/display/MULEWS/Consuming+SOAP+Web+Services+in+Mule](http://www.mulesoft.org/documentation/display/MULEWS/Consuming+SOAP+Web+Services+in+Mule)这个也是。他们没有多大帮助。目前，我有一个简单的 mule 流程，如下所示。

**流定义**

```
<?xml version="1.0" encoding="UTF-8"?>

<mule xmlns="http://www.mulesoft.org/schema/mule/core" xmlns:http="http://www.mulesoft.org/schema/mule/http"
    xmlns:cxf="http://www.mulesoft.org/schema/mule/cxf" xmlns:doc="http://www.mulesoft.org/schema/mule/documentation"
    xmlns:spring="http://www.springframework.org/schema/beans" xmlns:core="http://www.mulesoft.org/schema/mule/core"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" version="CE-3.2.1"
    xsi:schemaLocation="
http://www.mulesoft.org/schema/mule/http http://www.mulesoft.org/schema/mule/http/current/mule-http.xsd 
http://www.mulesoft.org/schema/mule/cxf http://www.mulesoft.org/schema/mule/cxf/current/mule-cxf.xsd 
http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans-3.0.xsd 
http://www.mulesoft.org/schema/mule/core http://www.mulesoft.org/schema/mule/core/current/mule.xsd ">
    <flow name="EchoFlow" doc:name="EchoFlow">
        <http:inbound-endpoint exchange-pattern="request-response"
            host="localhost" port="8081" path="service/echoflow" doc:name="HTTP" />
        <cxf:jaxws-client operation="" serviceClass="com.myapp.demo.ServiceAImplService" 
            doc:name="SOAP"/>
        <outbound-endpoint address="http://localhost:8080/ServiceA/services/" doc:name="Generic"/>
    </flow>
</mule> 
```

我正在使用骡工作室。有一个 HTTP 入站端点需要响应。我尝试配置将调用实际 Web 服务的 jax-ws 客户端。该服务的 WSDL 是：

**wsdl 文件**

```
<?xml version='1.0' encoding='UTF-8'?><wsdl:definitions name="ServiceAImplService" targetNamespace="http://service.demo.myapp.com/" xmlns:soap="http://schemas.xmlsoap.org/wsdl/soap/" xmlns:tns="http://service.demo.myapp.com/" xmlns:wsdl="http://schemas.xmlsoap.org/wsdl/" xmlns:xsd="http://www.w3.org/2001/XMLSchema">
  <wsdl:types>
<schema xmlns="http://www.w3.org/2001/XMLSchema" xmlns:soap="http://schemas.xmlsoap.org/wsdl/soap/" xmlns:tns="http://service.demo.myapp.com/" xmlns:wsdl="http://schemas.xmlsoap.org/wsdl/" xmlns:xsd="http://www.w3.org/2001/XMLSchema">
<import namespace="http://service.demo.myapp.com/" schemaLocation="http://localhost:8080/ServiceA/services/ServiceAImplPort?xsd=serviceaimpl_schema1.xsd"/>
</schema>
  </wsdl:types>
  <wsdl:message name="helloResponse">
    <wsdl:part element="tns:helloResponse" name="parameters">
    </wsdl:part>
  </wsdl:message>
  <wsdl:message name="hello">
    <wsdl:part element="tns:hello" name="parameters">
    </wsdl:part>
  </wsdl:message>
  <wsdl:portType name="IServiceA">
    <wsdl:operation name="hello">
      <wsdl:input message="tns:hello" name="hello">
    </wsdl:input>
      <wsdl:output message="tns:helloResponse" name="helloResponse">
    </wsdl:output>
    </wsdl:operation>
  </wsdl:portType>
  <wsdl:binding name="ServiceAImplServiceSoapBinding" type="tns:IServiceA">
    <soap:binding style="document" transport="http://schemas.xmlsoap.org/soap/http"/>
    <wsdl:operation name="hello">
      <soap:operation soapAction="urn:Hello" style="document"/>
      <wsdl:input name="hello">
        <soap:body use="literal"/>
      </wsdl:input>
      <wsdl:output name="helloResponse">
        <soap:body use="literal"/>
      </wsdl:output>
    </wsdl:operation>
  </wsdl:binding>
  <wsdl:service name="ServiceAImplService">
    <wsdl:port binding="tns:ServiceAImplServiceSoapBinding" name="ServiceAImplPort">
      <soap:address location="http://localhost:8080/ServiceA/services/ServiceAImplPort"/>
    </wsdl:port>
  </wsdl:service>
</wsdl:definitions> 
```

如您所见，我不太确定如何配置 jax-ws 客户端。那么，我究竟如何在这个流程中使用 SOAP Web 服务。

* * *

我的第二个问题：如何转换有效负载以从一个 Web 服务调用另一个 Web 服务（均为 SOAP）。流量会是什么？

* * *

最后，如何合并有效载荷？比如说，我有三个并行调用的 Web 服务，它们的响应都一起返回。如何合并有效负载以便我可以在另一个服务中读取它（在组合来自多个并行调用的服务的响应之后）？

* * *

* * *

什么是等效的实现

```
 <pattern:web-service-proxy name="ex-proxy"
        inboundAddress="http://localhost:8081/xxx"
        outboundAddress="http://xx.xx.com/XXX_WS/xxxWService.asmx" /> 
```

使用 CXF 代理服务/客户端？这给我带来了另一个问题，什么时候使用 CXF-service，什么时候使用 CXF-client？最后，是否有 Mule Flow Orchestration 的详细文档或示例/教程？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-08T22:32:49.040

尝试使用 CXF 代理（服务和客户端）。在这种情况下，您会将原始 XML 放入流中。当然，如果需要，您可以将其反序列化为 java，例如通过 XML-To-Object 转换器 (XStream)。

[http://www.mulesoft.org/documentation/display/MULE3USER/Proxying+Web+Services+with+CXF](http://www.mulesoft.org/documentation/display/MULE3USER/Proxying+Web+Services+with+CXF)

从那里开始，有几种方法可以在中间转换有效负载。要么通过java（如上所述）并转换java层对象，要么编写一个执行转换的XSLT表。或者使用Java和/或Mule提供的其他工具（脚本，xpath等）转换XML。

您可能想再次详细解释聚合案例。您是要合并响应以供将来使用，还是要进行一个 Web 服务调用 -> 扇出 -> 聚合 -> 响应？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-08T13:06:31.033

1) 通常，您应该使用“代理服务”而不是“JAX-WS”来使用远程 Web 服务。

2) 使用链接路由器在多个端点之间传递响应。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-26T12:10:57.093

如果您有权访问 Web 服务的*服务端点接口*，则可以像这样在一个简单的 Java 组件中轻松使用 Web 服务：

```
public class CityServiceComponent {

    public String process(String input) {

        // list of cities
        StringBuilder output = new StringBuilder();

        // create service factory
        JaxWsProxyFactoryBean serviceFactory = new JaxWsProxyFactoryBean();
        // set service endpoint interface
        serviceFactory.setServiceClass(CityService.class);
        // set wsdl location
        serviceFactory.setAddress("http://localhost:8080/city-service-provider/CityService?wsdl");
        // init city service
        CityService cityService = (CityService) serviceFactory.create();

        // call city service and get all available cities
        List<City> cities = cityService.findAll();

        // build list of cities
        for (City city : cities) {

            output.append(city.toString());
            output.append("\n");
        }

        // forward output message
        return output.toString();

    }

} 
```

希望这可以帮助...

# css - 多个背景位置

> ID：10056714
> 
> 赞同：0
> 
> 时间：2012-04-07T17:33:46.307
> 
> 标签：css, background-image

我想问是否可以为同一背景图像声明多个背景位置。

我有一个名为类的跨度，`page_heading`我希望这个类显示相同的图像两次，一次在文本的开头，一次在文本的结尾。

HTML：

```
<h1><span class="page_heading">Text</span></h1> 
```

CSS：

```
.page_heading {
  padding: 0 30px 0 30px;
  background: #ff6600;
  background: #ff6600 url('../img/star.png') no-repeat 0 50%;
} 
```

我想这样做（我知道这是不对的，只是为了理解）：

```
.page_heading {
  padding: 0 30px 0 30px;
  background: #ff6600;
  background: #ff6600 url('../img/star.png') no-repeat 0 50%;
  background: #ff6600 url('../img/star.png') no-repeat 100% 50%;
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-07T17:36:57.577

您可以使用多背景的 CSS3 功能，这将完全满足您的需求（[浏览器支持](http://caniuse.com/multibackgrounds)也不错）。

```
background: url('../img/star.png') no-repeat 0 50%,
            url('../img/star.png') no-repeat 100% 50%;
background-color: #ff6600 
```

这个解决方案的问题是没有办法在不符合标准的浏览器中使用直接的 CSS 实现相同的效果。您可以考虑的后备措施是修改 DOM 结构以包含另一个包装元素，该元素将采用 HTML 中的一个背景，或者对 Javascript 做同样的事情。在后一种情况下，请注意 IE8（如果我没记错的话）`background`如果无法解析它会拒绝整个属性。所以你会有 CSS

```
/* IE8: at least get one of the backgrounds */
background: url('../img/star.png') no-repeat 0 50%;

/* CSS3 conformant browsers: both backgrounds; IE8 ignores this completely */
background: url('../img/star.png') no-repeat 0 50%,
            url('../img/star.png') no-repeat 100% 50%; 
```

# objective-c - 从 .txt 文件中解密 NSStrings 的 Objective-C 最佳方法

> ID：10056716
> 
> 赞同：0
> 
> 时间：2012-04-07T17:33:53.830
> 
> 标签：objective-c, public-key-encryption, encryption

我有一个 .txt 文件，其中包含我的应用程序使用的 NSString（使用私钥加密）（使用公钥解密）。对于一个字符串，一切都很好，但是，如果我有另一个要使用的 NSString，我必须使用该加密的 NSString 创建另一个单独的 .txt 文件。我知道必须有一种方法可以将所有 NSStrings 放在一个文件中并以某种方式解析它，尽管我不确定如何实现这一点。可以使用包含所有加密字符串的 .plist 文件来完成吗？

这是我用一个 NSString 解密 .txt 文件的代码示例：

```
NSString *filePath = @"/path/to/file.txt";

    if ([[NSFileManager defaultManager] fileExistsAtPath:filePath]) {
        crypto = [[MyCrypto alloc] initWithPublicKey:publicKeyData privateKey:privateKeyData];

        NSError *err;

        theString = [NSString stringWithContentsOfFile:filePath encoding:NSUTF8StringEncoding error:&err];

        if (!theString) {
            NSLog(@"error: %@", err);
        }

[crypto setClearTextWithString:theString];
decryptedTextData = [crypto decrypt];
NSLog(@"Decrypted: %@", theString);

... 
```

* * *

如果有人可以举例说明这个主题，我将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-07T17:54:55.123

制作一个for循环并将您的解密代码放入其中，然后修改该行

```
 theString = [NSString stringWithContentsOfFile:filePath encoding:NSUTF8StringEncoding error:&err]; 
```

到以下（假设`i`是循环变量）：

```
 theString = [array objectAtIndex:i]; 
```

您`array`在代码的初始化部分中创建的位置，使用：

```
NSArray *array = [NSArray arrayWithContentsOfFile:@"file.txt"]; 
```

指定的文件也必须是一个有效的 PLIST，一个数组是它的根元素。例子：

```
<plist>
<array>
    <string>alshnj369537nwlzba</string>
    <string>9ö876534tzhwjukmhnlfb</string>
    <!-- et cetera... -->
</array>
<plist> 
```

希望这可以帮助。

# c# - 重新创建 Windows Phone 系统应用程序动画的简单方法？

> ID：10056717
> 
> 赞同：1
> 
> 时间：2012-04-07T17:34:15.347
> 
> 标签：c#, silverlight, windows-phone-7, xaml, animation

我真的很喜欢系统应用程序（人物、消息、邮件、音乐+视频等）在转换时动画的方式。所以在我的应用程序中，我想使用相同的样式，以便更好地与整个手机融合（而且它们看起来很漂亮）。我已经在silverlight 工具包中四处寻找可以用来执行此操作的预设动画，但我很难找到相同的动画。

更具体地说，当您从联系人列表（以及其他一百个地方）中选择一个联系人时，我无法找到与“幻灯片/枢轴”动画等效的动画。

这些动画是否可以作为预设在某处使用？还是我必须尝试使用​​故事板自己制作它们？

我对silverlight动画了解不多，所以我尽量避免学习，但如果我真的必须这样的话。

谢谢你的帮助！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-07T17:36:51.890

您可以从 Silverlight Toolkit 轻松获得这些转换。 [http://silverlight.codeplex.com](http://silverlight.codeplex.com)

此外，这里是实施它们的快速指南：http: [//codifying.wordpress.com/2010/12/19/wp7-how-to-create-beautiful-page-transition-in-5-minutes/](http://codifying.wordpress.com/2010/12/19/wp7-how-to-create-beautiful-page-transition-in-5-minutes/)

# gcc - 在 Ubuntu 11.10 中使用 gcc 链接错误

> ID：10056724
> 
> 赞同：3
> 
> 时间：2012-04-07T17:34:56.667
> 
> 标签：gcc, linker, linker-errors

我正在尝试在 C 中编译和运行一个简单的“Hello World”程序，但出现了一个奇怪的错误，即某些 C stdlib 函数的多重定义

.c 文件是：

```
#include <stdio.h>
#include <stdlib.h>

int main(int argc, char **argv) {

  printf("hello world\n");
  return 0;
} 
```

我用来编译和创建可执行文件的命令是：

```
gcc -Werror -Wall src/main.c -o bin/m.o
gcc -Werror -Wall bin/m.o -o bin/m 
```

编译部分运行良好，但在第二个命令中，我调用 GCC 链接器来创建可执行文件，但出现以下错误：

```
bin/m.o: In function `_fini':
(.fini+0x0): multiple definition of `_fini'
/usr/lib/gcc/x86_64-linux-gnu/4.6.1/../../../x86_64-linux-gnu/crti.o:(.fini+0x0): first defined here
bin/m.o: In function `__data_start':
(.data+0x0): multiple definition of `__data_start'
/usr/bin/ld: /usr/lib/debug/usr/lib/x86_64-linux-gnu/crt1.o(.debug_info): relocation 0 has invalid symbol index 10
/usr/bin/ld: /usr/lib/debug/usr/lib/x86_64-linux-gnu/crt1.o(.debug_info): relocation 1 has invalid symbol index 11
/usr/bin/ld: /usr/lib/debug/usr/lib/x86_64-linux-gnu/crt1.o(.debug_info): relocation 2 has invalid symbol index 2
/usr/bin/ld: /usr/lib/debug/usr/lib/x86_64-linux-gnu/crt1.o(.debug_info): relocation 3 has invalid symbol index 2
/usr/bin/ld: /usr/lib/debug/usr/lib/x86_64-linux-gnu/crt1.o(.debug_info): relocation 4 has invalid symbol index 10
/usr/bin/ld: /usr/lib/debug/usr/lib/x86_64-linux-gnu/crt1.o(.debug_info): relocation 5 has invalid symbol index 12
/usr/bin/ld: /usr/lib/debug/usr/lib/x86_64-linux-gnu/crt1.o(.debug_info): relocation 6 has invalid symbol index 12
/usr/bin/ld: /usr/lib/debug/usr/lib/x86_64-linux-gnu/crt1.o(.debug_info): relocation 7 has invalid symbol index 12
/usr/bin/ld: /usr/lib/debug/usr/lib/x86_64-linux-gnu/crt1.o(.debug_info): relocation 8 has invalid symbol index 2
/usr/bin/ld: /usr/lib/debug/usr/lib/x86_64-linux-gnu/crt1.o(.debug_info): relocation 9 has invalid symbol index 2
/usr/bin/ld: /usr/lib/debug/usr/lib/x86_64-linux-gnu/crt1.o(.debug_info): relocation 10 has invalid symbol index 11
/usr/bin/ld: /usr/lib/debug/usr/lib/x86_64-linux-gnu/crt1.o(.debug_info): relocation 11 has invalid symbol index 12
/usr/bin/ld: /usr/lib/debug/usr/lib/x86_64-linux-gnu/crt1.o(.debug_info): relocation 12 has invalid symbol index 12
/usr/bin/ld: /usr/lib/debug/usr/lib/x86_64-linux-gnu/crt1.o(.debug_info): relocation 13 has invalid symbol index 12
/usr/bin/ld: /usr/lib/debug/usr/lib/x86_64-linux-gnu/crt1.o(.debug_info): relocation 14 has invalid symbol index 12
/usr/bin/ld: /usr/lib/debug/usr/lib/x86_64-linux-gnu/crt1.o(.debug_info): relocation 15 has invalid symbol index 12
/usr/bin/ld: /usr/lib/debug/usr/lib/x86_64-linux-gnu/crt1.o(.debug_info): relocation 16 has invalid symbol index 12
/usr/bin/ld: /usr/lib/debug/usr/lib/x86_64-linux-gnu/crt1.o(.debug_info): relocation 17 has invalid symbol index 12
/usr/bin/ld: /usr/lib/debug/usr/lib/x86_64-linux-gnu/crt1.o(.debug_info): relocation 18 has invalid symbol index 12
/usr/bin/ld: /usr/lib/debug/usr/lib/x86_64-linux-gnu/crt1.o(.debug_info): relocation 19 has invalid symbol index 12
/usr/bin/ld: /usr/lib/debug/usr/lib/x86_64-linux-gnu/crt1.o(.debug_info): relocation 20 has invalid symbol index 19
/usr/lib/gcc/x86_64-linux-gnu/4.6.1/../../../x86_64-linux-gnu/crt1.o:(.data+0x0): first defined here
bin/m.o: In function `__data_start':
(.data+0x8): multiple definition of `__dso_handle'
/usr/lib/gcc/x86_64-linux-gnu/4.6.1/crtbegin.o:(.data+0x0): first defined here
bin/m.o:(.rodata+0x0): multiple definition of `_IO_stdin_used'
/usr/lib/gcc/x86_64-linux-gnu/4.6.1/../../../x86_64-linux-gnu/crt1.o:             (.rodata.cst4+0x0): first defined here
bin/m.o: In function `_start':
(.text+0x0): multiple definition of `_start'
/usr/bin/ld: /usr/lib/debug/usr/lib/x86_64-linux-gnu/crt1.o(.debug_line): relocation 0 has invalid symbol index 2
/usr/lib/gcc/x86_64-linux-gnu/4.6.1/../../../x86_64-linux-gnu/crt1.o:/build/buildd    /eglibc-2.13/csu/../sysdeps/x86_64/elf/start.S:109: first defined here
bin/m.o: In function `_init':
(.init+0x0): multiple definition of `_init'
/usr/lib/gcc/x86_64-linux-gnu/4.6.1/../../../x86_64-linux-gnu/crti.o:(.init+0x0): first     defined here
/usr/lib/gcc/x86_64-linux-gnu/4.6.1/crtend.o:(.dtors+0x0): multiple definition of     `__DTOR_END__'
bin/m.o:(.dtors+0x8): first defined here
/usr/bin/ld: error in bin/m.o(.eh_frame); no .eh_frame_hdr table will be created.
collect2: ld returned 1 exit status 
```

顺便说一句，当我运行带有 bash 执行前缀的 mo 文件时，它工作得很好

从来没有用 C 或任何东西编程过，我正在尝试开始，但这让我退缩了

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-04-07T17:38:55.307

您需要`-c`在编译步骤中使用，否则您的`m.o`对象将是完全链接的可执行文件。例子：

```
gcc -Werror -Wall -c src/main.c -o bin/m.o
gcc -Werror -Wall bin/m.o -o bin/m 
```

如果您的程序不仅仅是由单个翻译单元组成，那么差异将立即显而易见。如果你有`file1.c`and `file2.c`，例如：

```
gcc -c file1.c -o file1.o
gcc -c file2.c -o file2.o
gcc file1.o file2.o -o app 
```

是正确的，而如果您有：

```
gcc file1.c -o file1.o
gcc file2.c -o file2.o
gcc file1.o file2.o -o app 
```

在您到达最后的链接阶段之前，第一行和第二行都会失败，因为它们会丢失符号。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-07T17:39:23.950

```
gcc -Werror -Wall src/main.c -o bin/m.o
gcc -Werror -Wall bin/m.o -o bin/m 
```

第一个您省略了该`-c`选项，因此它创建了一个完全链接的可执行文件。ELF 对象的一个​​特点是可执行文件和目标文件之间没有显着差异，因此它是另一个运行的完全有效的输入`ld`——但是你会得到链接到完整程序中的符号与要链接到的符号冲突新的那一个。

教训：`gcc -c`只做编译时使用

```
gcc -Werror -Wall -c src/main.c -o bin/m.o # this needs -c so it only compiles
gcc -Werror -Wall bin/m.o -o bin/m         # this links, so no -c 
```

# django - Django 表单字段中 Compress 和 Clean 方法的区别

> ID：10056726
> 
> 赞同：0
> 
> 时间：2012-04-07T17:35:20.417
> 
> 标签：django, custom-fields

我正在为信用卡到期字段编写自定义日期字段。我注意到在自定义字段示例中，我们需要覆盖两个主要部分，清理和压缩方法。

我知道我们可以在 clean 方法中验证和更改字段值的返回值。但是压缩方法呢？为什么我们需要它以及 clean 和 compress 方法之间的区别是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-07T22:21:44.393

`compress`只存在于 的子类[`MultiValueField`](https://docs.djangoproject.com/en/1.3/ref/forms/fields/#multivaluefield)。正如那里的文档所解释的那样，您使用它来代替`clean`将多个值（每个字段一个）转换为单个值。

对于所有其他类型的字段，您使用`clean`.

# html - 最大化单元格宽度的 CSS 表格属性

> ID：10056727
> 
> 赞同：-1
> 
> 时间：2012-04-07T17:35:22.627
> 
> 标签：html, css, html-table

我的 CSS 中有这个：

```
ES{
max-width:20px;
word-wrap:break-word;

} 
```

我的桌子看起来像这样......

```
<table border="1" cellpadding="2" class="ES" >
<tr>
    <td><input name="rbeso" type="radio" id="rblimpet" value="limpet" title="Seafood" /><b>The Doctor Limpet</b> Fresh from the sea! Crab flakes, alfredo sauce and mozzarella cheese.</td>

</tr> 
```

我希望单元格具有最大宽度，但似乎没有什么区别......

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-07T17:37:51.753

错字：

```
.ES {
^--missing 
```

如果没有`.`，您正在为一些不存在的`<es>`标签定义一个 CSS 规则，而不是一个 CSS 类。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-07T17:40:10.097

请参阅小提琴的代码和演示

小提琴：http: [//jsfiddle.net/RwXkz/](http://jsfiddle.net/RwXkz/)

演示：http: [//jsfiddle.net/RwXkz/embedded/result/](http://jsfiddle.net/RwXkz/embedded/result/)

屏幕截图：http: [//img685.imageshack.us/img685/1528/80290481.jpg](http://img685.imageshack.us/img685/1528/80290481.jpg)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-07T17:44:31.870

要根据表的类定义元素的样式，您需要类似：

```
.ES td{
max-width:20px;
word-wrap:break-word;
} 
```

我认为您不需要 word-wrap 属性，默认情况下它应该会中断。

如果您在此更改后仍然遇到列宽问题，您可能需要明确指定列的宽度（不是“max-width”而是“width”），您也可以在表/“ES”样式。

```
table.ES, .ES { width: 300px; } 
```

或者

```
table.ES, .ES { width: 100%; } 
```

通常，表格的一个优点是列将根据列内容动态生成适当的宽度。

您可能希望在您知道会变小的列上指定宽度，为表格指定宽度，并让具有较大字段值的列自动调整其宽度。

# node.js - Node.JS 用 Mocha 测试 DOM？

> ID：10056728
> 
> 赞同：6
> 
> 时间：2012-04-07T17:35:24.003
> 
> 标签：node.js, mocha.js

我正在尝试使用 Mocha 测试框架在我的 Node.JS 应用程序中进行一些简单的视图测试...

例如，考虑到我在测试中设置的记录数，我想测试`<ol>`页面上是否有`n` `<li>`子项。

我尝试使用[Apricot](https://github.com/silentrob/Apricot)来做到这一点，虽然我让它工作，但当它失败时，错误消息非常无用......而且，它并不总是有效。

我喜欢的是一种简单的方法来测试 HTML 元素的响应正文，这样我就可以确定它们是否与它们应该显示的数据匹配。

这是我在当前状态下的测试：[https ://gist.github.com/2330685](https://gist.github.com/2330685)

有谁知道我该怎么做？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-04-08T10:29:15.353

也将评论发布为答案。

对于 DOM 操作或元素查找，我建议使用出色的[librarycheerio](https://github.com/MatthewMueller/cheerio)，它可以将 html 作为字符串加载，然后使用类似 jQuery 的选择器。而且它似乎真的很轻。我用 request + Cheerio 组合替换了 JSDOM。

# java - Java从数组中删除重复项？

> ID：10056729
> 
> 赞同：8
> 
> 时间：2012-04-07T17:35:30.883
> 
> 标签：java, arrays, duplicates

我应该读入一个包含许多不同电子邮件地址的文件并使用数组将它们打印出来。问题是我需要消除重复的电子邮件。

我能够让我的 try/catch 工作并打印出电子邮件地址。但是，我不确定如何删除重复项。我还不了解哈希码或如何使用哈希码`Set`。任何援助将不胜感激。

这是我到目前为止所拥有的：

```
import java.util.Scanner;
import java.io.*;

public class Duplicate {
   public static void main(String[] args) {

      Scanner keyboard = new Scanner(System.in);
      System.out.println("Enter file name: ");
      String fileName = keyboard.nextLine();
      if (fileName.equals("")) {
         System.out.println("Error: User did not specify a file name.");
      } else {
         Scanner inputStream = null;

         try {
            inputStream = new Scanner(new File(fileName));
         } catch (FileNotFoundException e) {
            System.out.println("Error: " + fileName + " does not exist.");
            System.exit(0);
         }

         String[] address = new String[100];

         int i = 0;
         while (inputStream.hasNextLine()) {
            String email = inputStream.nextLine();
            // System.out.println(email);

            address[i] = email;
            System.out.println(address[i]);
            i++;
         }
      }
   }
} 
```

* * *

## 回答 #1

> 赞同：33
> 
> 时间：2012-04-07T17:39:25.977

简单的解决方案是使用 Set of java,

所以设置自动删除重复值

并且在您的代码中，您有数组而不是转换数组以直接使用代码设置

```
Set<T> mySet = new HashSet<T>(Arrays.asList(someArray)); 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-04-07T17:47:01.573

学习`Set`。你学习它所花费的时间少于你编写一些不使用它的东西所花费的时间。

我会让你开始。替换这个：

`String[] address = new String[100];`

有了这个：

`Set<String> addresses = new HashSet<String>();`

和这个：

`address[i] = email;`

有了这个：

`addresses.add(email);`

你不再需要`i`了。

你完成了。如果您想打印所有内容：

```
for (String address : addresses) {
     System.out.println (address);
} 
```

这几乎涵盖了它。想要所有东西都自动排序吗？将`HashSet`以上内容替换为`TreeSet`。现在去阅读[这个优秀的教程](http://docs.oracle.com/javase/tutorial/collections/index.html)，这样下一次，你可以更快地自己完成这一切。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-04-07T17:37:19.723

您可以尝试遍历数组中的每个元素，将其添加到另一个元素，检查第二个数组是否包含下一项，如果它确实跳过它。然后只需用第二个替换第一个数组。（`ArrayList`虽然在这种情况下更好）。

所以是这样的：

```
List<String> FinalList = new ArrayList<String>();
for(string temp : adress)
{
if(!FinalList.contains(temp))
  FinalList.add(temp);
} 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-04-07T17:39:39.393

把它们读成一个[`HashSet`](http://docs.oracle.com/javase/6/docs/api/java/util/HashSet.html)代替。这将为您处理重复项。

```
Set<String> addresses = new HashSet<String>();
addresses.add("a@a.com");
addresses.add("a@a.com");
addresses.add("a@a.com");
System.out.println(addresses.size()); 
```

将打印`1`。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2015-08-24T05:33:47.587

根据需要使用 ArrayUtil 类。除了删除重复项之外，我还编写了一些方法。此类是在不使用任何 Collection 框架类的情况下实现的。

```
public class ArrayUtils {
/**
 * Removes all duplicate elements from an array. 
 * @param arr Array from which duplicate elements are to be removed.
 * @param removeAllDuplicates true if remove all duplicate values, false otherwise 
 * @return Array of unique elements.
 */
public static int[] removeDuplicate(int[] arr, boolean removeAllDuplicates)         {
    int size = arr.length;

    for (int i = 0; i < size;) {
        boolean flag = false;

        for (int j = i + 1; j < size;) {
            if (arr[i] == arr[j]) {
                flag = true;
                shrinkArray(arr, j, size);
                size--;
            } else
                j++;
        }

        if (flag && removeAllDuplicates) {
            shrinkArray(arr, i, size);
            size--;
        } else
            i++;
    }

    int unique[] = new int[size];
    for (int i = 0; i < size; i++)
        unique[i] = arr[i];

    return unique;
}

/**
 * Removes duplicate elements from an array. 
 * @param arr Array from which duplicate elements are to be removed.
 * @return Array of unique elements.
 */
public static int[] removeDuplicate(int[] arr) {
    return removeDuplicate(arr, false);
}

private static void shrinkArray(int[] arr, int pos, int size) {
    for (int i = pos; i < size - 1; i++) {
        arr[i] = arr[i + 1];
    }
}

/**
 * Displays the array.
 * @param arr The array to be displayed.
 */
public static void displayArray(int arr[]) {
    System.out.println("\n\nThe Array Is:-\n");

    for (int i = 0; i < arr.length; i++) {
        System.out.print(arr[i] + "\t");
    }
}

/**
 * Initializes the array with a given value.
 * @param arr The array to be initialized.
 * @param withValue The value with which the array is to be initialized.
 */
public static void initializeArray(int[] arr, int withValue) {
    for (int i = 0; i < arr.length; i++) {
        arr[i] = withValue;
    }
}

/**
 * Checks whether an element is there in the array. 
 * @param arr The array in which the element is to be found.
 * @param element The element that is to be found.
 * @return True if found false otherwise
 */
public static boolean contains(int arr[], int element) {
    for(int i=0; i< arr.length; i++) {
        if(arr[i] == element)
            return true;
    }

    return false;
}

/**
 * Removes a element from an array.
 * @param arr The array from which the element is to removed.
 * @param element The element to be removed
 * @return The size of the array after removing.
 */
public static int removeElement(int[] arr, int element) {
    int size = arr.length;
    for(int i=0; i< arr.length; i++){
        if(arr[i] == element){
            shrinkArray(arr, i, arr.length);
            size--;
        }
    }
    return size;
}

/**
 * Counts unique elements in an array.
 * @param arr The required array.
 * @return Unique element count.
 */
public static int uniqueElementCount(int arr[]) {
    int count = 0;
    int uniqueCount=0;
    int[] consideredElements = new int[arr.length];

    initializeArray(consideredElements, 0);

    for(int i=0;i<arr.length;i++) {
        int element = arr[i];
        for(int j=i+1;j<arr.length; j++){
            if(element != arr[j] && !contains(consideredElements, element)){
                consideredElements[count++] = element;
            }
        }
    }

    for(int i=0;i< consideredElements.length;i++)
        if(consideredElements[i]!=0)
            uniqueCount++;

    return uniqueCount;
}
} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2019-11-11T17:57:56.597

*从数组*中删除重复项**

 *```
T[] array = {…}; 
```

*自 Java 10 以来*获得*`Set` *没有重复项** 

 *```
Set<T> set = Set.copyOf(Arrays.asList(array)); 
```

数组元素的顺序丢失

*得到一个**没有重复*的新数组

 *```
Arrays.stream(array).distinct().toArray(T[]::new); 
```

保留数组元素的顺序

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2017-05-13T20:12:25.267

如果要删除重复项，可以尝试以下操作：

```
String[] address = new String[100]; // the array that contains all addresses
ArrayList<String> uniqueAddresses = new ArrayList<String>(); // create arraylist to contain all non-repeated addresses
for(String addr : address){ // cycle through the entire array
   if(!uniqueAddresses.contain(addr)){ // check if the address already there
      uniqueAddresses.add(addr); // add it
   }
} 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2016-07-15T05:41:33.383

请使用以下代码删除整数数组中的重复项。

```
/*
 * To change this license header, choose License Headers in Project Properties.
 * To change this template file, choose Tools | Templates
 * and open the template in the editor.
 */
package test123;

import java.util.ArrayList;
import java.util.HashSet;

/**
 *
 * @author krawler
 */
public class Test123 {

    /**
     * @param args the command line arguments
     */
     public static ArrayList<Integer> removeDuplicates(ArrayList<Integer> list) {

	// Store unique items in result.
	ArrayList<Integer> result = new ArrayList<>();

	HashSet<Integer> set = new HashSet<>();

	for (Integer item : list) {

	    if (!set.contains(item)) {
		result.add(item);
		set.add(item);
	    }
	}
	return result;
    }

    public static void main(String[] args) {

	ArrayList<Integer> list = new ArrayList<>();
	list.add(12);
	list.add(12);
	list.add(8);
	list.add(6);
	list.add(4);
	list.add(4);
        list.add(2);
        list.add(1); 
           //int a[]={12,12,8,6,4,4,2,1}

	ArrayList<Integer> unique = removeDuplicates(list);
	for (int element : unique) {
	    System.out.println(element);
	}
    }
}

/*run:
12
8
6
4
2
1
BUILD SUCCESSFUL (total time: 0 seconds)*/
```

* * *

## 回答 #9

> 赞同：-1
> 
> 时间：2012-04-07T17:38:37.723

我想到的第一件事是对数组进行排序，然后检查下一个元素是否等于当前元素。如果是，则删除当前元素。

哦，当您不知道文件中存储了多少电子邮件时，数组可能不是最好的方法。我会采取某种列表，这样我就不必关心文件中有多少电子邮件地址。

* * *

## 回答 #10

> 赞同：-1
> 
> 时间：2012-04-07T17:39:23.573

您可以编写一个在数组上运行的函数，一次接收一封电子邮件，当它找到相同的地址时，只需将其设置为 null。当您在阵列上运行以打印它时，仅当它不为空时才打印电子邮件***

# iphone - AFNetworking AFMultipartFormData 如何设置密钥

> ID：10056731
> 
> 赞同：1
> 
> 时间：2012-04-07T17:35:41.877
> 
> 标签：iphone, objective-c, ios, afnetworking

我想像以前一样使用setkey“FileData”将（POST）图像上传到服务器（用ASIHTTPRequest编写并且它有效）

```
[self.request setData:imageData withFileName:dateFormatted andContentType:@"image/jpeg" forKey:@"Filedata"]; 
```

使用 AFNetworking 我设置如下：

```
NSMutableURLRequest *afRequest = [httpClient multipartFormRequestWithMethod:@"POST" path:@"" parameters:paramsDic constructingBodyWithBlock: ^(id <AFMultipartFormData>formData) {
        [formData appendPartWithFileData:imageData name:@"Filedata" fileName:dateFormatted mimeType:@"image/jpeg"];
    }]; 
```

似乎名称实际上不起作用...我应该如何设置密钥？@马特

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-08T08:23:59.597

我想通了，问题是我添加了这一行

```
[afRequest setValue:@"application/x-www-form-urlencoded; charset=UTF8" forHTTPHeaderField:@"Content-Type"]; 
```

但是我仍然不知道为什么，我将此行添加到其他http请求并且它可以工作，但是文件上传。我检查了服务器，当用这一行进行文件上传时，服务器收到很多......嗯......想想如何描述它，大量的信件......如下：

> 内容类型：图像/jpeg^M ^M ÿØÿà^@^PJFIF^@^A^A^@^@^A^@^A^@^@ÿá^@XExif^@^@MM^@*^@ ^@^@^H^@^B^A^R^@^C^@^@^@^A^@^A^@^@<87>i^@^D^@^@^@^A ^@^@^@

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-04-07T17:51:31.793

嗨，我正在上传音频/图像文件，如下所示，请使用 ASIHTTPRequest 检查它并使其正常工作。

```
NSURL *audiourl = [NSURL URLWithString:@"Your Url"];
ASIFormDataRequest *request = [ASIFormDataRequest requestWithURL:audiourl];
NSData *postData = [NSData dataWithContentsOfURL:SoundPath];
//SoundPath is your audio url path of NSDocumentDirectory.
[request addData:postData withFileName:@"mynewfile.png" andContentType:@"image/png"   forKey:@"FileData"];
[request setDelegate:self];
[request startasynchronous]; 
```

谢谢

# multicore - 多核处理器推荐书籍

> ID：10056736
> 
> 赞同：1
> 
> 时间：2012-04-07T17:36:49.863
> 
> 标签：multicore

需要写一篇多核处理的文章，有什么好书推荐吗？谢谢！:)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-07T17:53:25.450

[Computer Architecture: A Quantitative Approach](http://mkp.com/news/computer-architecture-5th-edition-a-quantitative-approach-by-john-l-hennessy-david-a-patterson) , 5th Edition by John L. Hennessy & David A. Patterson 或[Computer Architecture: A Quantitative Approach](https://rads.stackoverflow.com/amzn/click/com/0123704901) 4th Edition

涵盖高水平的东西，并且可能在附近的图书馆中。

也是[计算机组织和设计，修订的第四版，第四版：](http://textbooks.elsevier.com/web/product_details.aspx?isbn=9780123747501)同一作者的硬件/软件接口。

但是[Wikipedia 多核](http://en.wikipedia.org/wiki/Multi-core_processor)处理器可以让您从大量参考资料开始。

[多核处理器——必需品](http://www.csa.com/discoveryguides/multicore/review.pdf)看起来是一个相对简单的起点。

# c# - 将 MonoTouch 中已经存在的 NSObject 编组到派生类实例

> ID：10056742
> 
> 赞同：0
> 
> 时间：2012-04-07T17:37:37.430
> 
> 标签：c#, xamarin.ios

我有一个第 3 方 Obj-C 库（我已经为其编写了 MonoTouch 绑定），它通过函数中的参数返回数据（`NSDictionary`感兴趣的[人可以使用 ZBar iPhone SDK](http://zbar.sourceforge.net/iphone/)）`UIImagePickerControllerDelegate``FinishedPickingMedia`

我已经绑定了我希望存储在这个字典（`ZBarSymbol`）中的实例的类。

正如我所料，MonoTouch 运行时在编组时不可能检查所有这些集合实例，并且我的 MonoTouch 代码只`NSObject`在字典中看到一个实例（如果这个假设是错误的，它**应该是**一个`ZBarSymbol`实例，有人可以让我知道）。

我尝试使用以下代码手动将`NSObject`over 编组为 a ：`ZBarSymbol`

```
public override void FinishedPickingMedia (UIImagePickerController picker, NSDictionary info)
{
    var result = info[ZBarSDK.BarcodeResultsKey];
    var symbol = result as ZBarSymbol;
    if ( symbol != null )
    {
        // This never works obviously.   
    }
    else
    {
        symbol = new ZBarSymbol(result.Handle);
        Console.WriteLine("Data = " + symbol.Data);
    }
} 
```

采用指针的 ZBarSymbol 的构造函数工作正常。但是尝试访问任何成员（例如，该`Data`属性会导致以下异常：

```
MonoTouch.Foundation.MonoTouchException: Objective-C exception thrown.  
Name: NSInvalidArgumentException  
Reason: -[ZBarSymbolSet data]: unrecognized selector sent to instance 0x8d2960  
    at ZBar.ZBarSymbol.get_Data () [0x00000] in <filename unknown>:0  
    at ZBarMonoTouchTest.ZBarMonoTouchTestViewController+BarcodeReaderCallback.FinishedPickingMedia (MonoTouch.UIKit.UIImagePickerController picker, MonoTouch.Foundation.NSDictionary info) [0x00197] in /Users/tyson/Projects/ZBarMonoTouchTest/ZBarMonoTouchTestViewController.cs:112  
    at MonoTouch.UIKit.UIApplication.Main (System.String[] args, System.String principalClassName, System.String delegateClassName) [0x00042] in /Developer/MonoTouch/Source/monotouch/src/UIKit/UIApplication.cs:29  
    at ZBarMonoTouchTest.Application.Main (System.String[] args) [0x00000] in /Users/tyson/Projects/ZBarMonoTouchTest/Main.cs:17 
```

那么是否可以在应用程序代码中编组这些类？如果是这样，怎么做？或者更好的是，如果有人可以告诉我如何设置绑定，以便自动发生（但我不确定这是否可能）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-07T18:56:11.433

> 正如我所料，MonoTouch 运行时在编组时不可能检查所有这些集合实例，并且我的 MonoTouch 代码只在字典中看到 NSObject 的一个实例（如果这个假设是错误的，它应该是一个 ZBarSymbol 实例，有人可以请让我知道）。

结果我错了——MonoTouch 运行时会为你执行这个自动编组，即使是在 NSDictionarys 中的实例。

上面的问题是它根本没有返回 a `ZBarSymbol`- 它正在返回 a `ZBarSymbolSet`。如果您仔细观察，异常实际上暗示了这一点 - “原因：-[ZBarSymbolSet 数据]：”

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-05T10:58:27.140

万一有人对这个神秘的 zBar 委托的工作原理感兴趣......经过一番战斗...... zBarSymbolSet 有一个 IEnumerator！这将返回一个适当的ZBarSymbol，您可以使用 .Data 属性来获取结果条形码。这也将其作为可订阅事件传递：

```
public class zScannerDelegate : ZBarReaderDelegate
{
public delegate void ScanResult(string scanstrring);
public event ScanResult ScannedCode;
public zScannerDelegate ()
{
}
public override void FinishedPickingMedia (UIImagePickerController picker, NSDictionary info)
{

    ZBarSymbolSet result = null;

    string retstr = string.Empty;
    foreach (var sresult in info.Values) {
        if (sresult is ZBarSymbolSet) {
            result = sresult as ZBarSymbolSet;
            break;
        }
    }
    if (result != null) {
        foreach (var itema in result) {
            Console.WriteLine (itema.Data);
            retstr = itema.Data;
            ScanResult ret = ScannedCode;
            if (ret != null)
                ret(retstr);
        }
    }
}

} 
```

# objective-c - AVCaptureSession 启动内存警告

> ID：10056746
> 
> 赞同：2
> 
> 时间：2012-04-07T17:38:25.073
> 
> 标签：objective-c, ios, memory-management, avcapturesession

每次我启动 AVCaptureSession 时，我都会收到一条内存警告，导致一段时间后崩溃。
我正在异步启动会话，仪器工具说应用程序消耗大约 2 MB 内存。你知道如何克服这个问题吗？2MB 分配的内存太多了吗？

谢谢！[iOS 4.3，ARC]

```
@autoreleasepool {
    //Init capture session
    session = [[AVCaptureSession alloc] init];
    session.sessionPreset = AVCaptureSessionPresetPhoto;

    //Resize container view
    CGRect cameraContainerFrame = cameraContainerView.frame;
    cameraContainerFrame.size = CGSizeMake(320, 426);
    cameraContainerView.frame = cameraContainerFrame;

    CALayer *viewLayer = [cameraContainerView layer];
    [viewLayer setMasksToBounds:YES];

    //Create preview layer
    captureVideoPreviewLayer = [[AVCaptureVideoPreviewLayer alloc] initWithSession:session];

    CGRect bounds = [cameraContainerView bounds];
    [captureVideoPreviewLayer setFrame:bounds];

    if ([captureVideoPreviewLayer isOrientationSupported]) {
        [captureVideoPreviewLayer setOrientation:AVCaptureVideoOrientationPortrait];
    }    
    [captureVideoPreviewLayer setVideoGravity:AVLayerVideoGravityResizeAspectFill];

    [viewLayer addSublayer:captureVideoPreviewLayer];

    //Get input device
    captureDevice = [AVCaptureDevice defaultDeviceWithMediaType:AVMediaTypeVideo];

    if ([captureDevice lockForConfiguration:nil]){
        captureDevice.focusMode = AVCaptureFocusModeContinuousAutoFocus;
        captureDevice.whiteBalanceMode = AVCaptureWhiteBalanceModeContinuousAutoWhiteBalance;
        [captureDevice unlockForConfiguration];
    }

    NSError *error = nil;
    AVCaptureDeviceInput *input = [AVCaptureDeviceInput deviceInputWithDevice:captureDevice error:&error];
    if (!input) {
        // Handle the error appropriately.
        DLog(@"ERROR: trying to open camera: %@", error);
    }
    //Add input to session
    [session addInput:input];

    //Output
    stillImageOutput = [[AVCaptureStillImageOutput alloc] init];
    NSDictionary *outputSettings = [NSDictionary dictionaryWithObject:AVVideoCodecJPEG forKey:AVVideoCodecKey];
    [stillImageOutput setOutputSettings:outputSettings];
    [session addOutput:stillImageOutput];

    //Save state
    cameraSessionInitialized = YES;
    [session startRunning];
} 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-04-26T23:21:45.650

```
session.sessionPreset = AVCaptureSessionPresetMedium; 
```

If you don't care about quality, this does get rid of memory warnings. I'm trying to figure out how to get it working with the AVCaptureSessionPresetPhoto.

# haskell - 列表中分离元素的总和

> ID：10056748
> 
> 赞同：1
> 
> 时间：2012-04-07T17:38:29.747
> 
> 标签：haskell

> **可能重复：**
> [拆分列表并从子列表中求和？](https://stackoverflow.com/questions/9775072/split-list-and-make-sum-from-sublist)

我试图解决这个问题。我需要对列表中的元素进行总和，这些元素仅用“0”相互分隔。例如，我可以有这样的输入：[1,2,3,0,3,4,0,2,1]，输出应该是 [6,7,3]。

到目前为止，我设法做这样的事情：

```
cut (x:xs) | x > 0 = x : (cut xs)
       | otherwise = []

first  (xs) = ( (foldl (+) 0 (cut          (xs)))   ) : []
second (xs) = ( (foldl (+) 0 (cut (reverse (xs))))  ) : []

test (xs) = first(xs) ++ second(xs) 
```

问题是这只适用于我的列表中只有 1 个“0”实例。

我试图通过编辑我的剪切功能来解决这个问题：

```
cut [] = []
cut (x:xs) | x > 0 = foldl (+) 0 ( x : cut xs) : []
       | x == 0 = (cut xs) 
```

但我不知道如何调整它，所以它会将总和分开。现在它只是将所有元素的总和作为输出。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-07T17:42:19.200

你可以把你的问题分成两个任务

1.  将列表拆分为零部分。
2.  总结部分。

对于第一个任务，我们有[`Data.List.Split`](http://hackage.haskell.org/package/split-0.1.4.2)导出[`splitOn`](http://hackage.haskell.org/packages/archive/split/0.1.4.2/doc/html/Data-List-Split.html#v%3asplitOn)函数的模块。它正是我们需要的：

```
> splitOn [1] [0,0,0,1,0,0,0,1,0]
[[0,0,0],[0,0,0],[0]] 
```

对于第二个任务，有众所周知的[`map`](http://hackage.haskell.org/packages/archive/base/4.5.0.0/doc/html/Data-List.html#v%3amap)-function 将函数应用于列表的每个元素。在我们的例子中，这个函数是[`sum`](http://hackage.haskell.org/packages/archive/base/4.5.0.0/doc/html/Data-List.html#v%3asum)：

```
> map sum [[1,2,3],[4,5,6],[7,8,9]]
[6,15,24] 
```

所以：

```
> :m +Data.List.Split
> map sum . splitOn [0] $ [1,2,3,0,3,4,0,2,1] 
[6,7,3] 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-07T18:01:41.083

即使您无法按照 Matvey 的建议安装[拆分](http://hackage.haskell.org/package/split)包并使用 Data.List.Split，您仍然可以使用一般方法：

1.  将带有分隔符的怪异列表拆分`0`为更常规的列表列表。
2.  对每个列表求和。

所以

```
yourFunction = map sum . split 
```

现在我们必须编写`split`.

```
split :: [Int] -> [[Int]] 
```

一般来说，当我们想把一个列表拉开来合成一些新的东西时，我们需要使用折叠。

```
split = foldr cons nil where 
```

`nil`这里应该是你想成为的任何东西`split []`。

```
 nil = --TODO: exercise for you; clue: NOT [] 
```

`cons`同时将您的一个数字与折叠的上一步的答案结合起来。显然，您需要根据数字是否为`0`.

```
 cons 0 xss        = --TODO
    cons x (xs : xss) = --TODO; why will this pattern match never fail? 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-08T08:25:03.113

对于家庭作业，您绝对应该遵循戴夫的回答。然而，这里有一个更高级的解决方案，使用`groupBy`作为穷人的`split`：

```
import Data.List (groupBy)

map sum $ groupBy (const (/=0)) list 
```

这可能看起来很可爱，但请注意，在子列表的开头仍然存在零，因此如果这很重要（例如，如果您需要产品而不是总和），您不能在不更改的情况下使用此解决方案

**[解释]**

`groupBy`查看当前组的第一个元素是否与列表的当前元素“组合在一起”。在这种情况下，当前元素将被添加到组中，否则将启动一个新组。例如

```
groupBy (\x y -> x `mod` y == 0) [81,3,9,25,5]
--[[81,3,9],[25,5]] 
```

这里测试成功`81 'mod' 3`和`81 'mod' 9`，但不成功`81 'mod' 25`，它开始了一个新组。再次，`25 'mod' 5`是成功的。

但在我们的例子中，只要不为 0，所有元素都“适合”当前组，因此我们甚至不必查看第一个元素。如果找到 0，则开始一个新组。

`const (/=0)`表示 just `\_ y -> y /= 0`，所以不管第一个参数是什么，它只是测试第二个元素不为 0。要了解原因，请查看定义：

```
const :: a -> b -> a
const a _ =  a 
```

现在我们的 lambda 可以写成

```
\x y -> const (/= 0) x y 
```

由于从`const`调用中只有两个参数中的第一个“存活”，我们有

```
\x y -> (/= 0) y 
```

... 或者...

```
\_ y -> y /= 0 
```

# rack - Rack Warden：我如何访问传递给失败的消息！方法？

> ID：10056751
> 
> 赞同：3
> 
> 时间：2012-04-07T17:38:45.290
> 
> 标签：rack, warden

当 Warden 中的身份验证策略失败时，可以将消息传递给该`fail!`方法。如何在我的默认失败应用程序操作中访问此消息，以便我可以将其显示在 Flash 消息中？我试过`request.env['warden'].message`了，但是在查看了`Warden::Proxy`这个变量的代码之后，它只是为获胜策略设置的。想法？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2014-10-30T09:28:34.590

使用时失败还是失败！方法，您可以从环境守望者对象中获取失败消息。

例子：

```
def unauthenticated
  flash[:alert] = env["warden"].message unless env["warden"].message.blank?
end 
```

[http://www.rubydoc.info/github/hassox/warden/Warden/Proxy#message-instance_method](http://www.rubydoc.info/github/hassox/warden/Warden/Proxy#message-instance_method)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-10T08:06:33.743

也许失败策略的另一种方式（来自最近的文档）是使用`throw(:warden, :foo => 'bar')`. 你抛出的任何东西都将在你的失败应用程序中可用`request.env['warden.options']`，包括所需的 url 字符串。高温高压

# c# - C# Visual Studio 2008 中 write_text 方法的单元测试？

> ID：10056754
> 
> 赞同：1
> 
> 时间：2012-04-07T17:39:00.673
> 
> 标签：c#

有没有办法对不返回任何内容的模块进行单元测试。`My function is a void function and it formats the output and write it to a text file.` 我不确定如何对这种方法进行单元测试。

任何建议...谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-07T17:41:26.393

传递依赖！

不要直接写入*文件*，而是让您的方法写入*流*。

此抽象允许您在文件流上执行该方法以进行正常程序操作，但对于您的单元测试，您可以传入内存流，然后在方法调用后验证是否已将适当的文本写入流。

或者，您可以将写入流或文件与准备要写入的实际内容分开。这将允许您断言正确的内容是独立于实际写出而准备的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-07T17:41:49.957

您可以编写一个测试来检查输出文件中预定义值的存在和格式。

# matlab - 二维二进制矩阵转换为黑白图像

> ID：10056755
> 
> 赞同：-4
> 
> 时间：2012-04-07T17:39:05.667
> 
> 标签：matlab, image-processing

我有一个二维二进制矩阵。如何将其转换为黑白图像？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-07T17:50:15.803

你应该写

```
I = mat2gray(A) 
```

你可以做一个

```
imshow(I) 
```

看到它工作。

# wiki - Mediawiki 为外部链接创建模板

> ID：10056761
> 
> 赞同：1
> 
> 时间：2012-04-07T17:39:46.023
> 
> 标签：wiki, mediawiki

一些媒体维基使用模板或类似的东西在没有外部链接图标的文章中创建 Twitter 链接。

例如，在[http://www.minecraftwiki.net/wiki/Mojang_AB](http://www.minecraftwiki.net/wiki/Mojang_AB)中，每个员工都有一个 twitter 链接，这不仅是指向 twitter.com 的外部链接，而且就像源中的 [twitter:notch|@notch]。

有谁知道如何将此功能添加到我的 mediawiki 中？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-02-07T09:47:52.283

如果您只想删除外部链接图标，您可以将链接包装在 中`<span class="plainlinks">`，如下所示：

```
 <span class="plainlinks">http://stackoverflow.com/</span> 
```

甚至

```
 <span class="plainlinks">[http://stackoverflow.com Stack Overflow]</span> 
```

创建 Twitter 用户页面链接的模板可能如下所示：

```
<includeonly><span class="plainlinks twitterlink">[https://twitter.com/{{{1}}} @{{{1}}}]</span></includeonly> 
```

或者，安装了扩展 StringFunctions（以允许使用和不使用 @ 符号的输入）：

```
<includeonly><span class="plainlinks twitterlink">[https://twitter.com/{{#replace:{{{1}}}|@|}} @{{#replace:{{{1}}}|@|}}]</span></includeonly> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-07T17:52:53.717

这些链接称为跨wiki[链接](http://www.mediawiki.org/wiki/Manual%3aInterwiki)，您可以通过插入`interwiki`表格将它们添加到您的wiki。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-07T19:19:40.993

您可能会发现这些网站很有趣：

[http://www.mediawiki.org/wiki/Extension:Twitter4wiki](http://www.mediawiki.org/wiki/Extension:Twitter4wiki)

[http://www.mediawiki.org/wiki/Extension:TwitterFeed](http://www.mediawiki.org/wiki/Extension:TwitterFeed)

# visual-studio - OpenCL 堆栈溢出。如何解决？

> ID：10056762
> 
> 赞同：2
> 
> 时间：2012-04-07T17:39:48.007
> 
> 标签：visual-studio, debugging, error-handling, opencl, stack-overflow

当我尝试从 OpenCL in Action 的源代码中运行缩减程序时遇到问题。

我使用 Visual Studio 2008。这是错误：

> Reduction.exe 中 0x013526a7 中的未处理异常：0xC00000FD：堆栈溢出。

在 asm 文件中，光标是

> 测试 dword ptr [eax],eax ; 探测页面。

我试图调试它，但是当我在 main 函数中放置一个断点时，调试开始了，但程序并没有继续运行。

我不知道真正的问题是什么。

这些是源文件：reduction.cpp

```
#define _CRT_SECURE_NO_WARNINGS
#define PROGRAM_FILE "reduction_complete.cl"

#define ARRAY_SIZE 1048576
#define KERNEL_1 "reduction_vector"
#define KERNEL_2 "reduction_complete"

#include <math.h>
#include <stdio.h>
#include <stdlib.h>
#include <string.h>
#include <time.h>

#ifdef MAC
#include <OpenCL/cl.h>
#else
#include <CL/cl.h>
#endif

/* Find a GPU or CPU associated with the first available platform */
cl_device_id create_device() {

   cl_platform_id platform;
   cl_device_id dev;
   int err;

   /* Identify a platform */
   err = clGetPlatformIDs(1, &platform, NULL);
   if(err < 0) {
      perror("Couldn't identify a platform");
      exit(1);
   } 

   /* Access a device */
   err = clGetDeviceIDs(platform, CL_DEVICE_TYPE_GPU, 1, &dev, NULL);
   if(err == CL_DEVICE_NOT_FOUND) {
      err = clGetDeviceIDs(platform, CL_DEVICE_TYPE_CPU, 1, &dev, NULL);
   }
   if(err < 0) {
      perror("Couldn't access any devices");
      exit(1);   
   }

   return dev;
}

/* Create program from a file and compile it */
cl_program build_program(cl_context ctx, cl_device_id dev, const char* filename) {

   cl_program program;
   FILE *program_handle;
   char *program_buffer, *program_log;
   size_t program_size, log_size;
   int err;

   /* Read program file and place content into buffer */
   program_handle = fopen(filename, "r");
   if(program_handle == NULL) {
      perror("Couldn't find the program file");
      exit(1);
   }
   fseek(program_handle, 0, SEEK_END);
   program_size = ftell(program_handle);
   rewind(program_handle);
   program_buffer = (char*)malloc(program_size + 1);
   program_buffer[program_size] = '\0';
   fread(program_buffer, sizeof(char), program_size, program_handle);
   fclose(program_handle);

   /* Create program from file */
   program = clCreateProgramWithSource(ctx, 1, 
      (const char**)&program_buffer, &program_size, &err);
   if(err < 0) {
      perror("Couldn't create the program");
      exit(1);
   }
   free(program_buffer);

   /* Build program */
   err = clBuildProgram(program, 0, NULL, NULL, NULL, NULL);
   if(err < 0) {

      /* Find size of log and print to std output */
      clGetProgramBuildInfo(program, dev, CL_PROGRAM_BUILD_LOG, 
            0, NULL, &log_size);
      program_log = (char*) malloc(log_size + 1);
      program_log[log_size] = '\0';
      clGetProgramBuildInfo(program, dev, CL_PROGRAM_BUILD_LOG, 
            log_size + 1, program_log, NULL);
      printf("%s\n", program_log);
      free(program_log);
      exit(1);
   }

   return program;
}

int main() {

   /* OpenCL structures */
   cl_device_id device;
   cl_context context;
   cl_program program;
   cl_kernel vector_kernel, complete_kernel;
   cl_command_queue queue;
   cl_event start_event, end_event;
   cl_int i, err;
   size_t local_size, global_size;

   /* Data and buffers */
   float data[ARRAY_SIZE];
   float sum, actual_sum;
   cl_mem data_buffer, sum_buffer;
   cl_ulong time_start, time_end, total_time;

   /* Initialize data */
   for(i=0; i<ARRAY_SIZE; i++) {
      data[i] = 1.0f*i;
   }

   /* Create device and determine local size */
   device = create_device();
   err = clGetDeviceInfo(device, CL_DEVICE_MAX_WORK_GROUP_SIZE,     
         sizeof(local_size), &local_size, NULL);    
   if(err < 0) {
      perror("Couldn't obtain device information");
      exit(1);   
   }

   /* Create a context */
   context = clCreateContext(NULL, 1, &device, NULL, NULL, &err);
   if(err < 0) {
      perror("Couldn't create a context");
      exit(1);   
   }

   /* Build program */
   program = build_program(context, device, PROGRAM_FILE);

   /* Create data buffer */
   data_buffer = clCreateBuffer(context, CL_MEM_READ_WRITE |
         CL_MEM_USE_HOST_PTR, ARRAY_SIZE * sizeof(float), data, &err);
   sum_buffer = clCreateBuffer(context, CL_MEM_WRITE_ONLY, 
         sizeof(float), NULL, &err);
   if(err < 0) {
      perror("Couldn't create a buffer");
      exit(1);   
   };

   /* Create a command queue */
   queue = clCreateCommandQueue(context, device, 
         CL_QUEUE_PROFILING_ENABLE, &err);
   if(err < 0) {
      perror("Couldn't create a command queue");
      exit(1);   
   };

   /* Create kernels */
   vector_kernel = clCreateKernel(program, KERNEL_1, &err);
   complete_kernel = clCreateKernel(program, KERNEL_2, &err);
   if(err < 0) {
      perror("Couldn't create a kernel");
      exit(1);
   };

   /* Set arguments for vector kernel */
   err = clSetKernelArg(vector_kernel, 0, sizeof(cl_mem), &data_buffer);
   err |= clSetKernelArg(vector_kernel, 1, local_size * 4 * sizeof(float), NULL);

   /* Set arguments for complete kernel */
   err = clSetKernelArg(complete_kernel, 0, sizeof(cl_mem), &data_buffer);
   err |= clSetKernelArg(complete_kernel, 1, local_size * 4 * sizeof(float), NULL);
   err |= clSetKernelArg(complete_kernel, 2, sizeof(cl_mem), &sum_buffer);
   if(err < 0) {
      perror("Couldn't create a kernel argument");
      exit(1);   
   }

   /* Enqueue kernels */
   global_size = ARRAY_SIZE/4;
   err = clEnqueueNDRangeKernel(queue, vector_kernel, 1, NULL, &global_size, 
         &local_size, 0, NULL, &start_event);
   if(err < 0) {
      perror("Couldn't enqueue the kernel");
      exit(1);   
   }
   printf("Global size = %zu\n", global_size);

   /* Perform successive stages of the reduction */
   while(global_size/local_size > local_size) {
      global_size = global_size/local_size;
      err = clEnqueueNDRangeKernel(queue, vector_kernel, 1, NULL, &global_size, 
            &local_size, 0, NULL, NULL);
      printf("Global size = %zu\n", global_size);
      if(err < 0) {
         perror("Couldn't enqueue the kernel");
         exit(1);   
      }
   }
   global_size = global_size/local_size;
   err = clEnqueueNDRangeKernel(queue, complete_kernel, 1, NULL, &global_size, 
         NULL, 0, NULL, &end_event);
   printf("Global size = %zu\n", global_size);

   /* Finish processing the queue and get profiling information */
   clFinish(queue);
   clGetEventProfilingInfo(start_event, CL_PROFILING_COMMAND_START,
         sizeof(time_start), &time_start, NULL);
   clGetEventProfilingInfo(end_event, CL_PROFILING_COMMAND_END,
         sizeof(time_end), &time_end, NULL);
   total_time = time_end - time_start;

   /* Read the result */
   err = clEnqueueReadBuffer(queue, sum_buffer, CL_TRUE, 0, 
      sizeof(float), &sum, 0, NULL, NULL);
   if(err < 0) {
      perror("Couldn't read the buffer");
      exit(1);   
   }

   /* Check result */
   actual_sum = 1.0f * (ARRAY_SIZE/2)*(ARRAY_SIZE-1);
   if(fabs(sum - actual_sum) > 0.01*fabs(sum))
      printf("Check failed.\n");
   else
      printf("Check passed.\n");
   printf("Total time = %lu\n", total_time);

   /* Deallocate resources */
   clReleaseEvent(start_event);
   clReleaseEvent(end_event);
   clReleaseMemObject(sum_buffer);
   clReleaseMemObject(data_buffer);
   clReleaseKernel(vector_kernel);
   clReleaseKernel(complete_kernel);
   clReleaseCommandQueue(queue);
   clReleaseProgram(program);
   clReleaseContext(context);
   return 0;
} 
```

reduction_complete.cl

```
__kernel void reduction_vector(__global float4* data, 
      __local float4* partial_sums) {

   int lid = get_local_id(0);
   int group_size = get_local_size(0);

   partial_sums[lid] = data[get_global_id(0)];
   barrier(CLK_LOCAL_MEM_FENCE);

   for(int i = group_size/2; i>0; i >>= 1) {
      if(lid < i) {
         partial_sums[lid] += partial_sums[lid + i];
      }
      barrier(CLK_LOCAL_MEM_FENCE);
   }

   if(lid == 0) {
      data[get_group_id(0)] = partial_sums[0];
   }
}

__kernel void reduction_complete(__global float4* data, 
      __local float4* partial_sums, __global float* sum) {

   int lid = get_local_id(0);
   int group_size = get_local_size(0);

   partial_sums[lid] = data[get_local_id(0)];
   barrier(CLK_LOCAL_MEM_FENCE);

   for(int i = group_size/2; i>0; i >>= 1) {
      if(lid < i) {
         partial_sums[lid] += partial_sums[lid + i];
      }
      barrier(CLK_LOCAL_MEM_FENCE);
   }

   if(lid == 0) {
      *sum = partial_sums[0].s0 + partial_sums[0].s1 +
             partial_sums[0].s2 + partial_sums[0].s3;
   }
} 
```

我不知道是什么导致stackoverflow...

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-07T17:50:12.760

我没有看到任何递归，所以我的猜测是`float data[ARRAY_SIZE];`将`#define ARRAY_SIZE 1048576`4MB 放在堆栈上，这非常大。尝试将其更改为动态分配。

# java - MySQL 不会插入双精度值

> ID：10056774
> 
> 赞同：3
> 
> 时间：2012-04-07T17:42:14.740
> 
> 标签：java, mysql, insert, double, zero

我有一个 MySQL 数据库，我从 Java 类向表中插入行。一切正常，但今天，我无法插入双精度值。插入的不是值，而是 0。这是我的 Java 代码：

```
String str = "INSERT INTO PLAYERS (p_name, p_radius, p_lat, p_lon, p_offset) "; 
str += "VALUES ('"+p.getName()+"', "+p.getRadius()+", ";
str += p.getLatitude()+", "+p.getLongitude()+", "+p.getOffset()+")";

PreparedStatement st = connection.prepareStatement(str, Statement.RETURN_GENERATED_KEYS);
st.executeUpdate(); 
```

我还打印了 str 字符串，当我在 MySQL 查询浏览器上执行它时，它会正确插入。字符串 str 如下：

```
INSERT INTO PLAYERS (p_name, p_radius, p_lat, p_lon, p_offset) 
VALUES ('John', 5, 37.976088, 23.7358438, -1011) 
```

这是表创建语句：

```
CREATE TABLE  PLAYERS (player_id int(11) NOT NULL AUTO_INCREMENT,
p_name varchar(30) DEFAULT NULL,
p_lat double NOT NULL,
p_lon double NOT NULL,
p_score int(11) NOT NULL DEFAULT '0',
p_highscore int(11) NOT NULL DEFAULT '0',
p_game_id int(11) NOT NULL DEFAULT '0',
p_status int(11) NOT NULL DEFAULT '0',
p_radius int(11) NOT NULL,
p_offset bigint(20) NOT NULL,
PRIMARY KEY (player_id)
) 
```

我在插入过程中检查了表格，并且看到了正确插入的值。之后，当我刷新查询浏览器时，值再次为 0 ......所以参数化语句没有任何区别。

* * *

**终于我明白了。非常抱歉，是我的错！当我的应用程序结束时，我有一个将这些值设置为 0 的方法。谢谢您的反馈！**

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-07T17:51:19.703

您应该使用参数化语句。尝试改用此代码：

```
String str = "INSERT INTO PLAYERS (p_name, p_radius, p_lat, p_lon, p_offset) VALUES(?,?,?,?,?)";
PreparedStatement st = connection.prepareStatement(str, Statement.RETURN_GENERATED_KEYS);
st.setString(1, p.getName());
st.setDouble(2, p.getRadius());
st.setDouble(3, p.getLatitude());
st.setDouble(4, p.getLongitude());
st.setInt(5, p.getOffset());
st.executeUpdate(); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-07T17:46:13.870

查看此[链接](http://docs.oracle.com/javase/tutorial/jdbc/basics/prepared.html)和为 PreparedStatement 参数提供值的部分。有时，如果您不使用参数化，它会截断双精度。除其他原因外，它确实是一个很好的最佳实践。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-07T17:52:10.803

试试这个：

```
String str = "INSERT INTO PLAYERS (p_name, p_radius, p_lat, p_lon, p_offset) VALUES (?, ?, ?, ?, ?)"; 

PreparedStatement st = connection.prepareStatement(str, Statement.RETURN_GENERATED_KEYS);
st.setString(1, p.getName());
st.setDouble(2, p.getRadius());
st.setDouble(3, p.getLatitude());
st.setDouble(4, p.getLongitude());
st.setInt(5, p.getOffset());
st.executeUpdate(); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-09T11:31:41.260

终于我明白了。非常抱歉，是我的错！当我的应用程序关闭时，我有一个将这些值设置为 0 的方法。再次，我真的很抱歉。我的应用程序很大，所以我无法立即看到。谢谢您的反馈！

# c++ - 使用元编程处理窗口消息

> ID：10056777
> 
> 赞同：1
> 
> 时间：2012-04-07T17:42:38.443
> 
> 标签：c++, winapi, metaprogramming, wrapper, template-meta-programming

我正在学习如何包装一些基本的 WinAPI 功能（如创建窗口）。我为窗口类和一个基本窗口编写了一个包装类。

在我的窗口过程的实现中，我一直密切关注此链接中描述的消息路由器：[创建 Win32 窗口包装器](http://www.gamedev.net/page/resources/_/technical/general-programming/creating-a-win32-window-wrapper-class-r1810)。

`this`这是将我的基本窗口类的指针传递给`CreateWindowEx`函数并将其附加到窗口的想法`SetWindowLongPtr`。消息路由器作为窗口过程传递给我创建的每个窗口类，它调用每个窗口具有的窗口过程作为私有函数。（消息路由器是我的基本窗口类的朋友）

我现在的主要问题是我应该如何处理我的窗口收到的消息。我不喜欢作者在上面的链接中使用的解决方案，因为如果我必须为要处理的每个窗口消息注册一个回调函数，我会觉得这很烦人。我还想在单独的控制器类而不是窗口类本身中处理这些消息。

在我看来，最佳解决方案是：

```
BasicWindow window("Window Class", program_instance);
window.create()

Controller controller;
window.setController(controller); 
```

从那里开始，我希望窗口能够自行确定控制器为哪些消息提供回调。

我已经有了一些想法：

1.  有一个控制器的抽象基类，它有各种回调函数的原型。但是这样，即使我不需要它们，我也必须在每个控制器中处理它们（例如，我不必在普通的编辑控件中处理 WM_PAINT。）所以这太死板了。

2.  让每个控制器都有一个函数，它返回一个无符号整数的数组/向量，告诉窗口控制器处理哪些消息。这很烦人，因为每次我为控制器添加另一个消息的新回调函数时，我都不能忘记更新向量。这种方法的另一个缺点是，我必须将这个向量保存在`BasicWindow`类中，或者每次调用 windows 窗口过程时从控制器请求它，并且我必须搜索向量是否包含窗口接收到的消息。

3.  我最近的想法是某种预处理。由于我不考虑在运行时更改窗口的控制器，我认为这可能是预处理甚至元编程有用的情况。我只阅读了几篇关于元编程的文章，并没有太多的线索，但我认为这可能是一个合适的解决方案。我想到的是以下内容：

    *   在我的控制器中，我想为我的回调函数添加某种限定符。类似的东西`void paint() <WM_PAINT>;`
    *   然后我希望编译器在 Windows 窗口过程中生成一个 if 语句，该语句在`paint`收到 WM_PAINT 消息时调用该函数。这将节省我对向量/数组的运行时检查，并使其非常轻松且仍然可以灵活地编写我的控制器。

就我个人而言，我会喜欢我在 3 中描述的方式。不幸的是，正如我之前提到的，我的元编程技能几乎不存在。我希望你们中的一些人能把我推向正确的方向。

[编辑] 睡个好觉后，我也许可以更好地解释我在寻找什么。

我有一个`Controller`在编译时完全知道的类。它应该看起来像这样：

```
class Controller {
public:
    Controller(DeviceContext& device_context);
    ~Controller();

    // If WM_PAINT is received by the window it is supposed to call
    void paint();
    // WM_RESIZE
    void resize(LPARAM lParam);
    ...
private:
    // class members needed during the performance of the callback functions
    ...
}; 
```

在我的`BasicWindow`课堂上，我有一个由消息路由器调用的窗口过程，如上所述。它看起来有点像：

```
LRESULT CALLBACK BasicWindow::WindowProc(UINT message, WPARAM wParam, LPARAM lParam)
{
    // Here I want the magic to happen. I want the compiler to somehow figure out
    // which messages are handled by the controller and generate code like
    if (message == WM_PAINT)
        controller->paint();

    return 0;
} 
```

我的主要问题是我不知道是否和/或如何做到这一点。也许我可以进一步澄清我的问题。

# jquery - 如何解析来自该网页的信息..？

> ID：10056779
> 
> 赞同：0
> 
> 时间：2012-04-07T17:42:44.093
> 
> 标签：jquery, android, asp.net, parsing, html-parsing

我需要解析显示的天气信息以及显示的相应图像。 [http://www.tportal.hr/vijesti/vrijeme/hrvatska7dana](http://www.tportal.hr/vijesti/vrijeme/hrvatska7dana) 我该怎么做？似乎该页面似乎正在使用 JQuery ..？我需要它用于我正在尝试使用的 android 应用程序。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-07T17:58:32.240

我过去曾尝试过类似的事情。我使用正则表达式从网站中提取数据，因为 HTML 很差，而且 XML 序列化是没有选择的。

该网站不使用 jQuery 加载天气数据。但数据只是在页面本身。该网站总是返回具有不同数据的相同 HTML，因此正则表达式是一种选择。

您可以使用正则表达式从页面上的 .mData div 中提取数据。我认为在像 google appengine 服务器这样的服务器上处理这个并以 json 格式返回数据会更容易。

另一种选择是要求他们为他们的服务创建一个 rss 提要或 API，如果他们这样做，你的生活会轻松很多。

# sorting - 使用 Coq 的快速排序证明

> ID：10056782
> 
> 赞同：2
> 
> 时间：2012-04-07T17:42:52.473
> 
> 标签：sorting, quicksort, coq

我正在写一篇关于使用 Coq 系统对快速排序算法进行程序验证的论文。我在 Coq 中定义了一个快速排序，但我的主管和我自己都不太习惯使用策略来编写实际的证明。有没有人可以帮助解决 coq 证明的那一部分？以下是我们迄今为止提出的建议：

```
Inductive nat : Type :=
   | O : nat
   | S : nat -> nat.

Check (S (S (S (S O)))).

Definition isZero (n:nat) : bool :=
  match n with
   O => true
   |S p => false
  end.

Inductive List: Set :=
 | nil: List
 | cons: nat -> List -> List.

Fixpoint Concat (L R: List) : List :=
 match L with
 | nil => R
 | cons l ls => cons l (Concat ls R)
end.  

Fixpoint Less (n m:nat) :=
  match m with
   O => false
  |S q => match n with
          O => true
         |S p => Less p q
         end
  end.      

Fixpoint Lesseq (n m:nat) :=
  match n with
   O => true
  |S p => match m with
           O => false
          |S q => Lesseq p q
          end
  end.

Fixpoint Greatereq (n m:nat) :=
  match n with
   O => true
  |S p => match m with
           O => true
          |S q => Greatereq p q
          end
  end.

Fixpoint Allless (l:List) (n:nat) : List :=
  match l with
   nil => nil
  |cons m ls => match Less n m with
                 false => Allless ls n
                |true => cons m (Allless ls n)
                end
end.               

Fixpoint Allgeq (l:List) (n:nat) : List :=
  match l with
   nil => nil
  |cons m ls => match Greatereq n m with
                 false => Allgeq ls n
                |true => cons m (Allgeq ls n)
                end
end.  

Fixpoint qaux (n:nat) (l:List) : List := 
  match n with
  O => nil
 |S p => match l with
         nil => nil
        |cons m ls => let low := Allless ls m in
                     (let high := Allgeq ls m in 
                     Concat (qaux p low) (cons m (qaux p high)))
        end
 end.

Fixpoint length (l:List) : nat :=
 match l with
  nil => O
|cons m ls => S (length ls)
end.

Fixpoint Quicksort (l:List) : List := qaux (length l) l. 
```

我知道要证明有效，我们需要引理或定理，但是我不确定在那之后从哪里开始。谢谢您的帮助 ：）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-09T09:17:19.637

将您的问题视为“符号测试”的问题。编写一个函数来测试您的输出是否正确，然后显示您的初始代码和测试函数的所有组合都按预期工作。

这是我最喜欢的数据类型排序算法测试功能。

```
Fixpoint sorted (l : List) : bool :=
  match l with cons a l' =>
    match l' with cons b l'' =>
      if Lesseq a b then sorted l' else false
    | nil => true
    end
  | nil => true
  end. 
```

那么您可以通过以下方式开始证明：

```
Lemma Quicksort_sorted : forall l, sorted (Quicksort l) = true. 
```

但是在证明主要引理之前，您必须证明许多中间引理。所以形式证明真的很像测试，除了你要确保完全覆盖测试。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-10T16:46:15.110

你可以证明你的代码有很多很好的定理。

*   定义一个函数 pos，它将一个数字和一个列表映射到列表中数字的索引。

*   Th 1：对于所有列表 S，以及 S 中的 a、b，(a <= b) <-> (pos a (sort S)) <= (pos b (sort S))。这将是排序函数的正确性定理。

*   Th 2：（排序（排序 S））=排序 S

*   定义函数 min 和 max 以找到列表 S 的最小和最大元素。

*   Th 3：排序列表的最小元素的pos为0。

*   Th 4：有序列表的倒数最大元素的pos为0。

从排序例程中抽象出一个谓词，以便您可以将其作为参数传递。

*   第 5 题：证明 (sort <= S) = (reverse (sort >= S))

等等。你可以无限继续这个广告。这很有趣。:-)

# winforms - Windows C# 中的 DataGridView

> ID：10056786
> 
> 赞同：0
> 
> 时间：2012-04-07T17:43:33.740
> 
> 标签：winforms, c#-4.0

我可以设计windows窗体控件的datagridview吗，比如webcontrol的Datalistview。

像垂直对齐datagridview（列和数据）。

有什么建议吗？

# go - 在 Go 中打开与 .go 源文件在同一目录中的文件

> ID：10056787
> 
> 赞同：4
> 
> 时间：2012-04-07T17:43:44.383
> 
> 标签：go

在源文件 $PWD/dir/src.go 中时，我使用

```
os.Open("myfile.txt") 
```

它在 $PWD 中查找 myfile.txt （看起来很正常）。

有没有办法告诉 Go 在与 src.go 相同的目录中查找 myfile.txt ？我需要类似`__FILE__`Ruby 的东西。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-04-07T20:26:31.823

Go 不是一种解释性语言，因此在与源文件相同的位置查找文件没有任何意义。go 二进制文件已编译，并且不需要存在源文件即可运行二进制文件。因此，Go 没有与**FILE**等价的东西。runtime.Caller 函数返回编译二进制文件时的文件名。

我想也许如果我们了解您为什么真正想要这个功能，我们可以为您提供更好的建议。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-07T18:15:15.337

一个可能的替代骨架：

```
func __FILE__() (fn string) {
        _, fn, _, _ = runtime.Caller(0)
        return 
} 
```

详情[在这里](http://golang.org/pkg/runtime/#Caller)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-12-03T11:18:04.377

使用包[osext](https://github.com/kardianos/osext)

它提供的函数`ExecutableFolder()`返回当前运行的程序可执行文件所在的文件夹的绝对路径（对于 cron 作业很有用）。它是跨平台的。

[在线文档](http://godoc.org/github.com/kardianos/osext)

```
package main

import (
    "github.com/kardianos/osext"
    "fmt"
    "log"
)

func main() {
    folderPath, err := osext.ExecutableFolder()
    if err != nil {
        log.Fatal(err)
    }
    fmt.Println(folderPath)
} 
```

您还可以获得完整的可执行路径（类似于`__FILE__`）：

```
package main

import (
    "github.com/kardianos/osext"
    "fmt"
)

func main() {
    exeAbsolutePath, _ := osext.Executable()
    fmt.Println(exeAbsolutePath)
} 
```

# google-chrome - WebSQL changeVersion 总是失败

> ID：10056788
> 
> 赞同：1
> 
> 时间：2012-04-07T17:43:50.407
> 
> 标签：google-chrome, local-storage

我正在尝试在 Chrome 中创建一个书签扩展，并且我想利用 WebSQL 在本地存储有关书签的各种信息。这是我到目前为止所做的：

```
(function() {
  var Home,
    __bind = function(fn, me){ return function(){ return fn.apply(me, arguments); }; };

  window.requestFileSystem = window.requestFileSystem || window.webkitRequestFileSystem;

  Home = (function() {

    function Home() {
      this.onDBInit = __bind(this.onDBInit, this);      this.db = openDatabase("Journal", "", "Bookmarks Stats", 5 * 1024 * 1024, this.onDBInit, this.onDBError);
    }

    Home.prototype.onDBInit = function(db) {
      console.log(db.version);
      db.changeVersion("", "1.0", this.initDB, this.onDBError);
      return console.log(db);
    };

    Home.prototype.initDB = function(t) {
      console.log(t);
      return t.executeSql('CREATE TABLE bookmarks (id, title, url)');
    };

    Home.prototype.onDBError = function(e) {
      return console.log(e);
    };

    return Home;

  })();

  window.Registerable(Home);

}).call(this); 
```

出于某种原因，changeVersion*总是*失败。我曾尝试删除数据库、重启 chrome 等。Chrome 版本：18。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-21T10:24:13.203

以我有限的经验，changeVersion 确实适用于 Chrome。我也在[这里](http://html5doctor.com/introducing-web-sql-databases/#comment-28482)阅读了有关它在 Safari 上无法正常工作的投诉，但确实如此。

但是，有两个问题：

捕获 1：

通常，changeVersion*似乎*失败（它给出错误并且 db.version 仍将返回旧值），但事务回调将触发，并且当您重新打开网页及其数据库时，版本号将是正确的。

捕获 2：

看来您必须提供准确的五个参数，包括三个回调。如果你不提供这五个参数，例如你只做前三个，那么当前版本将保持不变。因此，如果您按照每个人都提到的[本教程中的说明进行操作，您会感到失望。](http://blog.maxaller.name/2010/03/html5-web-sql-database-intro-to-versioning-and-migrations/)

Windows 上的 Chrome 和 Safari 就是这种情况。

参数有： 1：预期版本 2：新版本 3：事务回调（您可以在此处执行 SQL 作为版本更改的一部分） 4：失败回调（如果版本更改或事务回调失败） 5：成功回调（如果版本更改和交易回调成功）

我尚未在 iOS 设备上对此进行测试，但它符合此处提供的 Safari 规范： [https ://developer.apple.com/library/safari/#documentation/iphone/conceptual/safarijsdatabaseguide/usingthejavascriptdatabase/usingthejavascriptdatabase.html](https://developer.apple.com/library/safari/#documentation/iphone/conceptual/safarijsdatabaseguide/usingthejavascriptdatabase/usingthejavascriptdatabase.html)

在**Opera**中，changeVersion 等待将 db.version 设置为其新值，直到您使用 executeSql 执行了实际的 sql 事务。所以我使用了一个没有进一步后果的 SELECT 语句。这实际上不必在事务回调中：在尝试了一大堆 changeVersion 命令后，我在浏览器控制台中尝试了单独的 executeSql 语句时发现了它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-08-07T03:53:08.757

这是 Chrome 错误：您无法使用值中的空字符串更改数据库的版本。

并且根据调用 creationCallback 中的[规范](http://www.w3.org/TR/webdatabase/)（在您的情况下，函数 onDBInit）版本的数据库暴露给一个空字符串：

> 无论给定的数据库版本如何，都会使用具有空字符串作为其版本的数据库调用回调

这个错误是两年前发现并[详细描述的](https://code.google.com/p/chromium/issues/detail?id=324593)，但仍未纠正。

我通过以下方式决定了这个问题：我删除了creationCallback的数据库结构的初始化，并使其成为数据库的第一个事务。

```
var db = openDatabase("Journal", "0.1", "Bookmarks Stats", 5 * 1024 * 1024);
db.transaction(function (t) {
    t.executeSql('CREATE TABLE IF NOT EXISTS bookmarks (id, title, url)');
}); 
```

# c# - 剪贴板无法使用 setdataobject 恢复数据

> ID：10056789
> 
> 赞同：1
> 
> 时间：2012-04-07T17:44:12.527
> 
> 标签：c#, wpf, clipboard

我在恢复数据时遇到了问题，如果您阅读了评论，这里是代码，那么我认为您会理解问题，并希望知道如何解决此问题。

```
var oldclip = System.Windows.Clipboard.GetDataObject(); //Here we save the clipboard
var oldpoint = CursorPosition;
CursorPosition = new System.Drawing.Point((Convert.ToInt32((rect.Width - rect.X) * 0.45) + rect.X), Convert.ToInt32((rect.Height - rect.Y) * 0.75) + rect.Y);
DoLeftMouseClick();
SetForegroundWindow(hwnd);
System.Threading.Thread.Sleep(20);
System.Windows.Forms.SendKeys.SendWait("^a^c{ESCAPE}"); // here we go select all text and then copy it to the clipboard
if (System.Windows.Clipboard.GetDataObject().GetDataPresent(DataFormats.Text)) //if the clipboard has text then we do something with it to get that info in the blabla here
{
    //...blabla //
}
System.Windows.Clipboard.SetDataObject(oldclip); // HERE I want to restore the clipboard but that fails! After this when I CTRL+P(paste) then it returns nothing,(while it should still have the same "oldclip" data no?? 
```

编辑：我对如何解释我的问题有了更好的了解。可以说我有 2 个按钮，按钮保存和按钮恢复。我们得到一个变量：

```
 IDataObject oldclip; 
```

按钮保存代码为：

```
oldclip = System.Windows.Clipboard.GetDataObject(); 
```

我们得到了恢复按钮代码

```
System.Windows.Clipboard.SetDataObject(oldclip); 
```

现在我复制一些文本“randomtext123”。我按下保存按钮。然后我去复制一些其他文本“otherrandomtext”。现在，如果我按下恢复按钮，我希望剪贴板数据再次成为“randomtext123”，但这不会发生。（因为如果我在恢复按钮之后粘贴它不会做任何事情，就像剪贴板上什么都没有一样）。希望你现在更好地理解这个问题:)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-11T11:23:23.720

这应该会产生预期的结果：

```
public class ClipboardBackup
{
    Dictionary<string, object> contents = new Dictionary<string,object>();

    public void Backup()
    {
        contents.Clear();
        IDataObject o = Clipboard.GetDataObject();
        foreach (string format in o.GetFormats())
            contents.Add(format, o.GetData(format));
    }

    public void Restore()
    {
        DataObject o = new DataObject();

        foreach (string format in contents.Keys)
        {
            o.SetData(format, contents[format]);
        }

        Clipboard.SetDataObject(o);
    }
} 
```

PS你可能不想这样做。看到这个答案：[https ://stackoverflow.com/a/2579846/305865](https://stackoverflow.com/a/2579846/305865)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-07T18:19:11.840

根据[MSDN 文档](http://msdn.microsoft.com/en-us/library/ms597039.aspx)，如果要使用系统剪贴板，必须将权限设置为 AllClipboard：

> 获得访问系统剪贴板上数据的权限。关联枚举：AllClipboard

我刚刚测试过，在您的代码库中运行此代码将解决问题：

```
 UIPermission clipBoard = new UIPermission(PermissionState.None);
    clipBoard.Clipboard = UIPermissionClipboard.AllClipboard; 
```

# c++ - C++ 多继承内存寻址问题

> ID：10056790
> 
> 赞同：3
> 
> 时间：2012-04-07T17:44:29.093
> 
> 标签：c++, inheritance, mingw32

请忽略 #include 部分，假设它们已正确完成。这也可能是特定于实现的（但 vtables 的概念也是如此），但我只是好奇，因为它增强了我对多重继承的可视化。（顺便说一下，我使用的是 MinGW 4.4.0）

初始代码：

```
class A {
public:
   A() : a(0) {}
   int a;
};

//Edit: adding this definition instead
void f(void* ptrA) {
   std::cout<<((A*)ptrA)->a;
}
//end of editing of original posted code

#if 0
//this was originally posted. Edited and replaced by the above f() definition
void f(A* ptrA) {
   std::cout<<ptrA->a;
}
#endif 
```

这是编译并生成目标代码。

在我使用的其他一些编译单元中（在包含上述代码的头文件之后）：

```
class C : public B , public A {
public:
   int c;
}objC;

f(&objC); // ################## Label 1 
```

objC 的内存模型：

```
//<1> stuff from B
//<2> stuff from B
//<3> stuff from A : int a
//<4> stuff from C : int c 
```

`&objC`将在上面假设的内存模型中包含 <1> 的起始地址，编译器如何/何时将其转移到 <3>？是否在检查 call at 期间发生`Label 1`？

**编辑：：**

因为 Lable 1 似乎是一个赠品，只是让它对编译器来说更加模糊。请参阅上面的编辑代码。现在编译器什么时候做，在哪里做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-07T18:05:04.397

简短回答：如果编译器知道基类和派生类之间的关系，它将在强制转换操作期间调整指针值。

假设您的 C 类对象实例的地址位于地址 100。假设 sizeof(C) == 4。sizeof(B) 和 sizeof(A) 也是如此。

当演员发生如下情况时：

```
C c;
A* pA = &c;  // implicit cast, preferred for upcasting
A* pA = (A*)&c; // explicit cast old style
A* pA = static_cast<A*>(&c); // static-cast, even better 
```

pA 的指针值将是 c 的内存地址加上 C 中“A”开始的偏移量。在这种情况下，假设 sizeof(B) 也是 4，pA 将引用内存地址 104。

所有这些都适用于将派生类指针传递给需要基类指针的函数。隐式转换将与指针偏移调整一样发生。

同样，对于向下转换：

```
C* pC = (C*)(&a); 
```

编译器将在分配期间负责调整指针值。

所有这一切的一个“陷阱”是当一个类在没有完整声明的情况下前向声明时：

```
 // foo.h
 class A;  // same as above, base class for C
 class C;  // same as above, derived class from A and B

 inline void foo(C* pC)
 {
      A* pA = (A*)pC; // oops, compiler doesn't know that C derives from A.  It won't adjust the pointer value during assigment
      SomeOtherFunction(pA); // bug! Function expecting A* parameter is getting garbage
 } 
```

这是一个真正的错误！

我的一般规则。避免使用旧的“C 风格”转换并倾向于使用 static_cast 运算符，或者仅依赖隐式转换而不使用运算符来做正确的事情（用于向上转换）。如果转换无效，编译器将发出错误。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-07T18:06:05.373

是的，你说得很对。

要完全理解这种情况，您必须知道编译器在两点上知道什么：

1.  在标签 1 处（正如您已经确定的那样）
2.  内部函数 f()

    (1) 编译器知道 C 和 A 的确切二进制布局以及如何从 C* 转换为 A*，并将在调用站点进行转换（标签 1）

    (2) 然而，在函数 f() 内部，编译器只（需要）知道 A*，因此将自己限制为 A 的成员（在这种情况下为 int a），并且不能混淆特定实例是否为其他任何东西的一部分。

# get - Nginx 具有干净的 URL、获取参数和 PHP-FPM

> ID：10056792
> 
> 赞同：2
> 
> 时间：2012-04-07T17:44:39.593
> 
> 标签：get, nginx, clean-urls, php

我很想知道是否有可能以某种方式配置 nginx，以便它解析 url 参数，而无需`.php`在发送参数之前在文件名的末尾指定。

例如，假设我有一个帐户模块，它根据发送的参数处理要加载帐户的哪个方面。如果参数是`?sk='login'`，它将加载登录模块。如果是`?sk='register'`，它将加载注册模块 - 依此类推。

问题是，当我键入时，当我尝试打印数组中的值时`http://host/account?sk='login'`，我什么也得不到。`$_GET`问题是干净的 URL*确实*加载了应该管理参数的文件，除非我在文件名末尾指定`$_GET`，否则它不会实际*处理。* `$_GET``.php`

我猜想有一个 nginx 或 php-fpm 配置以某种方式允许这样做。

这可能吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-07T20:01:52.050

我想到了：

使用 nginx 的想法是定义一个位置，指定该位置的根，然后*使用*`try_files`参数指定`$uri`变量和`.php`要执行的文件。

 *例如：

```
location /somelocation {
    root /path/to/somelocation/on/server;
    try_files $uri /somelocation/somefile.php?key=$args;
} 
```

而不是打字`http://host/somelocation?key='someargument'`，你会指定`/somelocation?someargument`

从那里开始，当你调用`$_GET[ 'key' ]`你的 php 时，它会输出`someargument`一个`key`. 密钥可以是您指定的任何内容。*

# iphone - iPhone - 多个目标多个启动图像的噩梦

> ID：10056794
> 
> 赞同：5
> 
> 时间：2012-04-07T17:45:05.583
> 
> 标签：iphone, ios, xcode, ipad

我有一个项目有 2 个应用程序，每个应用程序有两种风格，iPhone 和 iPad。因此，该项目有 4 个目标。显然不是通用的。

为了简单起见，我们将每个应用程序称为 AAA 和 BBB。

启动图像的名称如下：

**iPhone AAA**

*   AAAiPhone.png
*   AAAiPhone@2x.png

**iPad AAA**

*   AAAiPad-Portrait@2x.png
*   AAAiPad-Portrait.png
*   AAAiPad-Landscape@2x.png
*   AAAiPad-Landscape.png

BBB 图像具有相同的名称结构，名称中使用 BBB 而不是 AAA。

我已将此 UILaunchImageFile 添加到每个 plist，如下所示：

*   AAA for iPhone ... 启动图像 (iPhone) = AAAiPhone.png
*   AAA for iPad ... 启动图像 (iPad) = AAAiPad.png
*   BBB for iPhone ... 启动图像 (iPhone) = BBBiPhone.png
*   BBB for iPad ... 启动图像 (iPad) = BBBiPad.png

当我将图像拖到 Xcode 上的正确占位符时，它适用于 AAA，但是当我为 BBB 这样做时，它会覆盖所有 AAA 图像。它似乎忽略了 info.plist 信息。

有什么线索吗？

谢谢

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-04-07T18:32:37.723

这是因为图像被重命名为 Default.png（或每个目标的另一个名称）。

你需要这样做：

在您的 plist 中为每个目标添加一个条目。iPad：启动图像 (iPad) iPhone 启动图像 (iPhone)

![在此处输入图像描述](../Images/7dfb053fb886e9b5095642172378daf6.png)

为每个目标使用不同的字符串。将带有该字符串的图像放置到您的资源文件中（还要确保在所需的目标中只有所需的图像处于活动状态）。

**示例**：

*   目标 1

    *   plist: 启动图像 (iPad) = AAADefaultiPad
    *   放置文件：AAADefaultiPad@2x.png 和 AAADefaultiPad.png
*   目标 2

    *   plist: 启动图像 (iPad) = BBBDefaultiPhone
    *   放置文件：AAADefaultiPhone@2x.png 和 BBBDefaultiPhone.png

**编辑 1：** 像将图像文件放置到图形资源中一样放置图像。不要将它放在目标“摘要”下的图像空间中。

对我来说效果很好。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-18T01:05:03.217

我已经编写了说明以及 GitHub 项目。

[https://github.com/brennanMKE/MultipleTargets](https://github.com/brennanMKE/MultipleTargets)

为了完全支持单个 Xcode 项目的多个目标构建，您需要处理许多步骤和细节。该样本地址...

1.  每个构建目标的唯一应用标识符
2.  独特的发射图形
3.  独特的应用程序图标
4.  自定义 C 标志来管理每个构建目标的不同功能

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-24T19:13:29.910

当我不得不添加 Retina 图标和启动图像时，我遇到了关于多个目标（iPhone）X 多个启动图像/多个图标的问题。为了解决这个问题，我必须在 plist 中执行以下操作：

*   关于图标（低分辨率和视网膜）：在每个目标中，我删除了条目图标文件（iOS 5），并添加了另一个（图标文件）。然后我将此行（图标文件）修改为图标文件（基本上，单数类型为字符串，复数自动变为数组），并添加图像文件引用，如下所示：

![info.plist - 图标](../Images/e5bba5412d727c6a7f783b61fc196568.png)

*   关于启动图像（低分辨率和视网膜）：我按照 Jonas 的建议做了，但使用了具有视网膜规格（640 x 960）的图像。它适用于低分辨率和高分辨率。

![info.plist - 使用高分辨率 png 文件启动图像](../Images/dd1594605e4a452c884cbba7f348f156.png)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-08-26T07:23:29.883

其实很简单：

1.  在 plist 中使用要替换文件名中的“默认”的字符串定义“启动图像”。Default.png 变为 MyAppName.png 等。

2.  只需创建符合默认文件名的文件名，例如：

我的应用程序名称.png

MyAppName@2x.png

MyAppName-568h@2x.png

MyAppName-Landscape@2x~ipad.png

MyAppName-横向~ipad.png

MyAppName-Portrait@2x~ipad.png

MyAppName-Portrait~ipad.png

# python - Python：计算非整数的阶乘

> ID：10056797
> 
> 赞同：8
> 
> 时间：2012-04-07T17:45:41.907
> 
> 标签：python, floating-point, factorial

我想知道是否有一种快速的 Pythonic 方法来计算非整数的阶乘（例如 3.4）？当然，模块`factorial()`中的内置函数`Math`是可用的，但它只适用于积分（我这里不关心负数）。

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-04-07T17:46:58.393

你会想要使用[`math.gamma(x)`.](http://docs.python.org/dev/library/math.html#math.gamma)

[伽玛函数](http://en.wikipedia.org/wiki/Gamma_function)是阶乘函数对实数的扩展。

请注意，与阶乘函数相比，该函数移动了 1。`math.factorial(n)`也是如此`math.gamma(n + 1)`。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-07T17:48:02.603

在 Python 2.7 或 3.2 中，您可以使用`math.gamma(x + 1)`. 在旧版本中，您需要一些外部库，例如 SciPy。

# c# - C# Web 浏览器消息框 - 复制警报文本

> ID：10056800
> 
> 赞同：1
> 
> 时间：2012-04-07T17:46:29.170
> 
> 标签：c#, browser, alerts

我想使用网络浏览器制作一个程序，所以我制作了帐户密码更改器（用于游戏网站），当我单击更改密码时它会更改它，但我不确定它是否会在网络浏览器中显示密码已更改的警报或旧通行证无效等我想复制警报文本以知道它已更改，或者现在有人可以帮助我吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-08T16:36:01.987

如果您使用的是 Windows 窗体的 webbrowser 类，[请在您的 webbrowser 站点上实现 IDocHostShowUI](http://social.msdn.microsoft.com/Forums/en-US/ieextensiondevelopment/thread/8b0712ca-0b92-4e3d-a243-27af57a57213/)。

如果您使用的是 aximp 生成的包装类，请[在容器的 IOleClientSite 实现上实现 IDocHostShowUI](http://www.codeproject.com/Articles/18935/The-most-complete-C-Webbrowser-wrapper-control)。

当控件调用 IDocHostShowUI::ShowMessage 方法时，文本将传递给您

# android - 添加jsoup.jar后，还是找不到org.jsoup.Jsoup；

> ID：10056801
> 
> 赞同：0
> 
> 时间：2012-04-07T17:46:34.053
> 
> 标签：android, jsoup

我已经添加了jsoup.jar，但是为什么我不能导入org.jsoup.Jsoup：

![在此处输入图像描述](../Images/b41083cb50cf37cc615589de9fcfeadb.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-11T04:06:50.497

你可以这样做...

```
import org.jsoup.*; 
```

它将导入 JSoup 模块...

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-08T06:37:30.657

我一直在寻找与这个问题完全相同的答案。在搜索 - 并找到 - 你的问题时，我还找到了这个答案：[https](https://stackoverflow.com/a/3643015/1087283) ://stackoverflow.com/a/3643015/1087283我复制并粘贴了以下示例：http: [//xjaphx.wordpress.com/2012/02/04 /android-xml-adventure-parsing-html-using-jsoup/](http://xjaphx.wordpress.com/2012/02/04/android-xml-adventure-parsing-html-using-jsoup/)它就像一个魅力。希望这可以帮助。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-01T15:00:05.823

我有同样的问题，我解决了。问题是您添加了 javadoc jar 而不是核心 jar。在 Jsoup 的[下载](http://jsoup.org/download)部分，您可能下载了 jsoup-version-javadoc.jar 而不是 jsoup-version.jar。

我在 Eclipse 完成时有相同的列表，但是，当然，核心不在那里。因此，只需下载核心的 .jar 文件，然后像以前一样添加它。

# ruby-on-rails - Rails 3 中的 tap 方法 - 我是否正确理解了 API 文档？

> ID：10056803
> 
> 赞同：6
> 
> 时间：2012-04-07T17:46:45.530
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3.2

我正在将 rails 2 应用程序升级到 rails 3.2 并且遇到了所谓的成语。

`person.tap |p| do`

当我用谷歌搜索它时，[它似乎已被弃用或移动](http://apidock.com/rails/Object/tap)。我的理解正确吗？

我问是因为我可以在 SO 上找到一些例子。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-04-07T18:08:43.563

该方法[自 1.8.7 以来](https://ruby-doc.org/core-1.8.7/Object.html#method-i-tap)`tap`一直在Ruby 中：

> **点击{|x|...} => obj**
> 
> 屈服于`x`块，然后返回`x`。此方法的主要目的是“利用”方法链，以便对链中的中间结果执行操作。

请注意，1.8.6 没有`Object#tap`. 大概`tap`是在旧版本的 Rails 中（作为猴子补丁`Object`），但在 1.8.7 中被添加到 Ruby 本身。由于 1.8.6 现在相当古老，Rails 版本已被弃用，并且在最近的 Rails 版本中被完全删除。

[`Object#tap`](https://ruby-doc.org/core/Object.html#method-i-tap)仍然存在，所以`tap`它本身并没有被弃用，只是 Rails 猴子补丁版本已被删除。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-04-07T18:13:00.047

从 1.9.0 和 1.8.7 开始，`Object#tap`monkey 补丁`ActiveSupport`已被弃用，因为它已成为 Ruby 的一部分。

# python - python比较两个日期

> ID：10056804
> 
> 赞同：0
> 
> 时间：2012-04-07T17:46:49.360
> 
> 标签：python, linux

我减去两个日期并计算小时差

```
c_date = "2011-03-23 12:52:14"
c_obj_date = datetime.datetime.strptime(c_date, "%Y-%m-%d %H:%M:%S")
n_date = datetime.datetime.now().strftime("%Y-%m-%d %H:%M:%S")
print "Creation Date:", c_date
print "Current Date: ", n_date
hours = abs(n_date - c_obj_date).total_seconds() / 3600.0
print hours 
```

但是这给了我这个错误：

```
 File "./eight.py", line 69, in zabbix_result
    hours = abs(n_date - c_obj_date).total_seconds() / 3600.0
TypeError: unsupported operand type(s) for -: 'str' and 'datetime.datetime' 
```

我正在使用python2.4

更新：

我现在用

```
n_date = datetime.datetime.now() 
```

但total_seconds() 在python2.4 中不起作用？？知道如何减去两个日期时间对象并获得小时差吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-07T17:53:08.287

查看错误消息。操作数左侧的类型是 a `str`。问题出在第三行。尝试删除该`strftime`部分。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-07T17:53:35.377

的类型`n_date`是字符串。的类型`c_obj_date`是日期时间，这意味着您不能从另一个中减去一个。这也是错误消息所说的。

您可能打算执行以下操作：`datetime.datetime.now() - c_obj_date`. 您现在有一个[`timedelta`](http://docs.python.org/library/datetime.html#timedelta-objects)，您可以使用以下方法获取秒数。

该[`total_seconds()`](http://docs.python.org/library/datetime.html#datetime.timedelta.total_seconds)方法是在 Python 2.7 中引入的，而您使用的是 Python 2.4，因此它不起作用。如果您希望在 Python 2.4 中执行此操作，只需按照文档中的计算方法：

```
(td.microseconds + (td.seconds + td.days * 24 * 3600) * 10**6) / 10**6 
```

其中`td`等于`datetime.datetime.now() - c_obj_date`。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-07T17:54:33.103

您需要使用 datetime 对象。

更改此行：

```
n_date = datetime.datetime.now().strftime("%Y-%m-%d %H:%M:%S") 
```

和：

```
n_obj_date = datetime.datetime.now() 
```

并将以下内容调整为：

```
print "Creation Date:", c_date
print "Current Date: ", n_obj_date.strftime("%Y-%m-%d %H:%M:%S")
hours = abs(n_obj_date - c_obj_date).total_seconds() / 3600.0
print hours 
```

这样，您将在两个日期时间对象之间进行减法。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-07T17:55:16.090

strftime 将时间对象转换为字符串，strptime 将字符串解析为时间对象。

因此 n_date 是一个字符串。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-04-07T17:58:37.437

n_date 是一个字符串，c_obj_date 是一个 datetime.datetime 对象。我不确定你从哪里得到 .total_seconds() 方法（它不是 timedelta 成员......）。尝试这样的事情：

```
c_date = "2011-03-23 12:52:14"
 c_obj_date = datetime.datetime.strptime(c_date, "%Y-%m-%d %H:%M:%S")
 n_date = datetime.datetime.now()

 打印“创建日期：”，c_date
 打印“当前日期：”，n_date

 absdiff = abs(n_date - c_obj_date)
 小时 = (absdiff.days * 24 * 60 * 60 + absdiff.seconds) / 3600.0

 打印时间

```

# php - mediawiki 皮肤中的作者/编辑 ID 列表

> ID：10056811
> 
> 赞同：0
> 
> 时间：2012-04-07T17:47:56.440
> 
> 标签：php, mediawiki

我正在为 mediawiki 皮肤编写一个 hack，该皮肤显示所有编辑页面的用户（包括作者）的照片。

我已经*（成功地）编写了一个扩展程序，允许用户上传自己的照片。图像以 user_id 作为名称存储在 /images/ 目录中。

所以我的问题是如何从页面本身提取编辑用户 ID 列表？

我假设它是这样的：

```
<?php foreach($this->data['revisions_user_id'] as $editorID) ?> 
```

但我不认为 'revisions_user_id' 是正确的元素有没有人知道正确的元素？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-03T14:51:30.887

使用 SQL 查询从“修订”表中获取用户信息。像这样：

```
$dbr = wfGetDB( DB_SLAVE ); 
$res = $dbr->select ('revision', array('DISTINCT rev_user', 'rev_user_text'), 'rev_page="' . $this->data['articleid'] . '"', 'GROUP BY rev_user'); 
```

wfGetDB() 是 mediawiki 数据库接口 (FYI)。

# c++ - 在 Windows 上使用 Qt 和 opencv 构建问题

> ID：10056817
> 
> 赞同：2
> 
> 时间：2012-04-07T17:48:17.620
> 
> 标签：c++, windows, qt, opencv

我想用 Qt 创建一个 gui 应用程序，在 Windows XP 上使用 opencv。我以前使用过 Qt 和 opencv，但从来没有一起使用过。长话短说，我无法让 opencv 与 Qt 一起工作。

在我搜索的所有论坛上，只有少量信息散布在各处，通常没有答案，我在这里总结了我所采取的所有步骤。

1.  下载了Windows的Qt SDK（4.6.3），用了一段时间，成功。
2.  下载了适用于 Windows 的 opencv 2.3.1 megapack，包含二进制文件。我成功地编译了包括 opencv 在内的 Qt 项目，但是任何 opencv 函数调用都会导致崩溃。我在一些论坛上读到 Windows megapack 中的二进制文件不支持 Qt，我必须自己构建 opencv
3.  我下载了最新版本的 CMake (2.8)。
4.  我从这里下载了opencv的源代码：http: [//code.opencv.org/svn/opencv/branches/2.3/](http://code.opencv.org/svn/opencv/branches/2.3/)
5.  我下载了我拥有的 Qt 版本的源代码（4.6.3）
6.  我找到了旧版本的 Visual Studio 2005
7.  我用 CMake 创建了一个 VS2005 项目，检查了对 Qt 的支持。（`WITH_QT`选中）
8.  我在VS2005中构建了opencv。它创建了大多数库，但不是全部。`Highgui`是失败者之一。问题：`Qt\4.6.3\src\corelib\global\qconfig.h`没有找到。`qconfig.h`我下载的源中根本没有！我找到了一些模板`qconfig-large.h`等`qconfig-small.h`，所以我将其中一个重命名为`qconfig.h`. 现在我得到了一个充满链接器错误的屏幕。
9.  我下载了最新的 Qt 源代码（4.8.1）。现在有一个`qbenchmark.h`包含`QtTest/qbenchmarkmetric.h`找不到的源文件。
10.  我放弃了，尝试了 MinGW。
11.  我下载了最新的MinGW（2011.11.18）
12.  我将 CMake 设置为生成 MinGW makefile，但出现以下错误：

.

```
CMake Error at C:/Program Files/CMake 2.8/share/cmake-2.8/Modules/Platform/Windows-g++.cmake:1 (INCLUDE):
  include could not find load file:
C:/Program Files/CMake 2.8/share/cmake-2.8/Modules/Platform/Windows-gcc.cmake
Call Stack (most recent call first):
C:/Program Files/CMake 2.8/share/cmake-2.8/Modules/CMakeCXXInformation.cmake:59 (INCLUDE) 
```

没错，Modules/Platform 目录中有一个`Windows-g++.cmake`文件，但它引用`Windows-gcc.cmake`了不存在的文件！

有没有人设法在 Windows 上构建带有 Qt 支持的 opencv，如果是，如何？

**编辑**：

问题肯定出在 Qt 源代码上。我设法生成了一个 MinGW makefile，并且构建一切正常，直到它停止，`src/testlib/qtestsystem.h`因为有一个包含`QtCore/qelapsedtimer.h`文件位于完全不同的目录中！**Qt 是否发布了不完整的源代码，**还是我做错了什么？

**编辑2**

我的折磨还在继续。我清理了所有东西并重新开始。这次甚至没有尝试 Visual Studio。

1.  我下载了带有源代码的最新 Qt 库（4.8.1）
2.  我下载了最新的MinGW（2011.11.18）
3.  使用 CMake，我成功创建了一个 Makefile，并使用 MinGW 构建了它。我有一些闪亮的新库（`libopencv_core231`，等）。我很高兴，但是我这么快就庆祝是多么错误啊！！
4.  我下载了最新的Qt SDK（奇怪的是4.8.0，所以我设置Qt Creator使用4.8.1）并创建了一个没有opencv的测试程序，看看它是否有效。有效！
5.  我尝试使用opencv，只是读取和显示图像。它没有用。`exited with code -1073741511`
6.  我尝试在`.exe`Qt Creator 之外直接运行。它抱怨失踪`libstdc++-6.dll`
7.  我搜索了它，在我的 MinGW 安装中找到（c:\mingw\bin，958 KB），在我的 Qt 安装中找到一个（c:\qt\mingw\bin，793 KB） - 这个 mingw 是捆绑的与 Qt。
8.  我尝试了两者，将它们复制到我所在的同一文件夹中`.exe`，但都没有奏效。我得到“程序入口点 _ZNSt9exceptionD2Ev 不能位于动态链接库 libstdc++-6.dll 中。” 既。这是在调试中，所以我尝试了发布，我得到了一个类似的错误，没有找到其他一些入口点。
9.  我搜索了论坛，发现我应该静态链接 libstdc++ 的建议。我`-static-libgcc -static-libstdc++`在行`QMAKE_LFLAGS =`和`QMAKE_LFLAGS_DEBUG =`文件中插入`c:\Qt\mkspecs\win32-g++\qmake.conf`。即使在重新启动 Qt Creator 并重建之后，这也完全没有影响。如果我不复制`libstdc++-6.dll`，它仍然需要它。

当然，我没有 opencv 的简单测试程序从`exe`不需要任何运行`libstdc++-6.dll`，所以这意味着我的 opencv 构建负责？我想重新构建 opencv，但我找不到任何涉及 libstdc++ 的 CMake 设置！

**这可能是一个线索：** 使用其中一个`libstdc++-6.dll`文件时，有关缺少入口点的错误提到了 QtGui4.dll。我有一个调试版本，所以它应该是 QtGui* *d* *4.dll，不是吗？`libstdc++`调试和发布有不同的s吗？无论哪种方式，我都尝试构建版本，但它也没有工作，同样的错误

这个星球上没有一个人尝试在 Windows xp 上将 Qt 与 QtCreator 和 opencv 2.3 一起使用并成功了吗？通过搜索所有论坛和 Qt 档案，我找不到任何人。我已经准备好在 Linux 中进行开发，但无论如何我迟早需要一个 Windows 版本。

[我试图抵制黑暗面的诱惑，它在我耳边低语，忘记 Qt、MinGW、g++、opencv，并尝试在 Visual Basic 中破解一些东西。哦，恐怖！]

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-21T13:57:40.543

仅供参考，我基本上经历了结合 Qt 和 OpenCV 的噩梦。这是我的经验：

1.  我用 Qt Creator 2.4.1 下载了 Qt SDK 4.7.4 并安装了它，没问题。
2.  我下载并安装了 OpenCV 2.4.2，但不知道 MinGW 已经附带了它......
3.  我下载了 MinGW 编译器，它的版本当然与 Qt 已经附带的版本不同
4.  这完全搞砸了我的 CMake，即使我明确告诉 CMake 使用 Qt gcc.exe 和 g++.exe，它也使用了我新安装的 MinGW 中的一些东西。可能是因为我急切地将每个目录添加到我的 PATH 变量中。我真是个傻瓜！
5.  CMake 无法生成任何有用的文件，所以我放弃并安装了 OpenCV 超级包，希望这会让事情变得更容易。6.我花了好几个小时想知道，为什么超级包中的 Qt 和 OpenCV 不能一起正常工作。我一直不太明白。我遇到了其他用户在此处描述的相同错误，例如控制台程序在包含某些 OpenCV 后立即崩溃。奇怪的是，我可以从 FileExplorer 手动启动可执行文件（我将所有你能想到的 .dll 添加到项目文件夹中：opencv_core242.dll、opencv_highgui242.dll、QtCore4.dll、QtGui4.dll 等等...... ) 但我无法从 Qt Creator 环境中启动我的小测试程序。
6.  我使用depends.exe分析了我的DLL是否存在问题，发现即使我使用MinGW编译器将所有内容配置为DEBUG，我的程序仍然尝试使用QtCore4.dll而不是QtCore4d.dll ...所以我最好的猜测是，它混合了调试和发布版本。
7.  我放弃了使用 superpack 并再次尝试先使用 CMAKE，然后使用 Qt MinGW 版本构建 OpenCV，并确保为调试模式设置所有内容并启用 QT 选项。但到目前为止还没有运气
8.  我停止使用 MinGW 并切换到 MSVC2010，效果更好。但是我仍然无法调试程序，因为似乎缺少 MSVC2010 调试器引擎。我真的不知道如何手动添加它，但我仍在努力

所以我可以肯定地说，对于没有经验的人来说，使用 Qt 和 OpenCV 绝非易事！

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-07T18:03:48.287

您应该从源代码构建 OpenCV，就像您已经做过的那样，这并不麻烦。请注意，最新版本的 OpenCV 可以使用和不使用 Qt 构建。Highgui 可以选择使用 Qt！使用或不使用 Qt 构建是您的选择。

我很长一段时间都在使用 Qt 库和 OpenCV。我从未使用过 SDK，而是使用了为相应 VS 版本构建的库。见这里：http: [//qt.nokia.com/downloads/downloads#qt-lib](http://qt.nokia.com/downloads/downloads#qt-lib)

您可以为 VS2008 和 VS2010 使用它，但也可以为 VS2005 构建更早的版本。旧版本的 Visual Studio 太烂了，为什么还要使用它们。

然后，我在 CMake 项目中将它们组合在一起从来没有遇到过问题。它遵循以下原则：

```
find_package(OpenCV)
find_package(Qt4 ${VOLE_MINIMUM_QT_VERSION} COMPONENTS QtCore QtGui)
find_package(Qt4 ${VOLE_MINIMUM_QT_VERSION} COMPONENTS QtOpenGL) 
```

...

```
qt4_wrap_cpp(moc_sources ${vole_module_moc_sources})
qt4_wrap_ui(uic_sources ${vole_module_ui_sources})
qt4_add_resources(rcc_sources ${vole_module_rcc_sources}) 
```

你知道的，通常的东西。

五个星期后，您可能会在 Windows 下运行它，而在 GNU/Linux 下，它是 shell 中的三个命令。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-08T00:37:52.857

您可能会更轻松地使用 OpenCV 配置 Qt Creator。[这篇文章](http://www.laganiere.name/opencvCookbook/chap1.shtml)展示了如何一步一步地实现这一目标！它还显示了几个屏幕截图以帮助完成此过程。

# c# - 选择后删除 DropDownList 值

> ID：10056818
> 
> 赞同：0
> 
> 时间：2012-04-07T17:48:19.577
> 
> 标签：c#, asp.net, asp.net-mvc-3, asp.net-mvc-3-areas

我不知道这是否是我的问题的措辞方式，但我想要的只是一种方式，当用户在下拉菜单中选择一个选项，然后按下提交下拉菜单中的值，该下拉菜单中选择不显示在那里。我尝试了以下方法：

```
<div class="editor-field">
                @Html.DropDownList("GameIDFK", String.Empty)
                @Html.ValidationMessageFor(model => ViewBag.GameIDFK)
            </div>

    [HttpPost]
    public ActionResult Create(tblReview tblreview, FormCollection formCollection)
       {
                if (ModelState.IsValid)
                {

                    db.tblReviews.Add(tblreview);
                    db.SaveChanges();
                   // return RedirectToAction("Index");  
                }
                 int gameid=Convert.ToInt32(formCollection["GameIDFK"]);
                var userGames = (from g in db.tblGames where g.UserName== User.Identity.Name && g.GameID!=gameid select g).ToList();
                ViewBag.GameIDFK = new SelectList(userGames, "GameID", "GameName");
                return View(new tblReview { UserName = @User.Identity.Name });
    } 
```

this just removes one value and when another is selected the pervious one comes back, also when i refresh the page all values return.

我还尝试了以下方法：

```
<script type="text/javascript">
    $(function() {
        $('#GameIDFK').change(function() {
            $('option:selected', this).remove();
        });
    });
</script> 
```

这样做是当我单击它完全消失的值并且当我刷新该值时返回。

我正在使用 MVC3 C# 并且想要一种方式，当用户选择游戏（例如 GTAIV）并按下从下拉 GTAIV 中提交的值时，即使我重新刷新或注销并再次登录，我也希望从下拉列表从下拉列表中消失，但我不想从数据库中删除它，只是希望下拉列表中的选定值在按下提交按钮后消失。

我的控制器：

```
using System;
using System.Collections.Generic;
using System.Data;
using System.Data.Entity;
using System.Linq;
using System.Web;
using System.Web.Mvc;
using Game.Models;

namespace Game.Controllers
{ 
    public class ReviewController : Controller
    {
        private gamezoneDBEntities db = new gamezoneDBEntities();

        //
        // GET: /Review/

        public ViewResult Index()
        {
            var Info = db.tblReviews.Include(x => x.tblGame).Where(UserInfo => UserInfo.UserName.Equals(User.Identity.Name)).ToList();
            return View(Info); 
        }

        //
        // GET: /Review/Details/5

        public ViewResult Details(int id)
        {
            tblReview tblreview = db.tblReviews.Find(id);
            return View(tblreview);
        }

        //
        // GET: /Review/Create

        public ActionResult Create()
        {
            var userGames = db.tblGames.Where(g => g.UserName == User.Identity.Name);
            ViewBag.GameIDFK = new SelectList(userGames, "GameID", "GameName");
            return View(new tblReview { UserName = @User.Identity.Name });

        } 

        //
        // POST: /Review/Create

        [HttpPost]
        public ActionResult Create(tblReview tblreview)
        {
            if (ModelState.IsValid)
            {
                db.tblReviews.Add(tblreview);
                db.SaveChanges();
                return RedirectToAction("Index");  
            }

            var userGames = db.tblGames.Where(g => g.UserName == User.Identity.Name);
            ViewBag.GameIDFK = new SelectList(userGames, "GameID", "GameName");
            return View(new tblReview { UserName = @User.Identity.Name });
        }

        //
        // GET: /Review/Edit/5

        public ActionResult Edit(int id)
        {
            tblReview tblreview = db.tblReviews.Find(id);
            ViewBag.GameIDFK = new SelectList(db.tblGames, "GameID", "GameName", tblreview.GameIDFK);
            return View(tblreview);
        }

        //
        // POST: /Review/Edit/5

        [HttpPost]
        public ActionResult Edit(tblReview tblreview)
        {
            if (ModelState.IsValid)
            {
                db.Entry(tblreview).State = EntityState.Modified;
                db.SaveChanges();
                return RedirectToAction("Index");
            }
            ViewBag.GameIDFK = new SelectList(db.tblGames, "GameID", "GameName", tblreview.GameIDFK);
            return View(tblreview);
        }

        //
        // GET: /Review/Delete/5

        public ActionResult Delete(int id)
        {
            tblReview tblreview = db.tblReviews.Find(id);
            return View(tblreview);
        }

        //
        // POST: /Review/Delete/5

        [HttpPost, ActionName("Delete")]
        public ActionResult DeleteConfirmed(int id)
        {            
            tblReview tblreview = db.tblReviews.Find(id);
            db.tblReviews.Remove(tblreview);
            db.SaveChanges();
            return RedirectToAction("Index");
        }

        protected override void Dispose(bool disposing)
        {
            db.Dispose();
            base.Dispose(disposing);
        }
    }
} 
```

我的模型：

```
namespace Game.Models
{
    using System;
    using System.Collections.Generic;

    public partial class tblReview
    {
        public int ReviewID { get; set; }
        public string Recomendation { get; set; }
        public string AvoidOrBuy { get; set; }
        public string Score { get; set; }
        public int GameIDFK { get; set; }
        public string UserName { get; set; }

        public virtual tblGame tblGame { get; set; }
    }
} 
```

我的观点：

```
@model Game.tblReview

@{
    ViewBag.Title = "Create";
}

<h2>Create</h2>

<script src="@Url.Content("~/Scripts/jquery.validate.min.js")" type="text/javascript"></script>
<script src="@Url.Content("~/Scripts/jquery.validate.unobtrusive.min.js")" type="text/javascript"></script>

@using (Html.BeginForm()) {
    @Html.ValidationSummary(true)
    <fieldset>
        <legend>tblReview</legend>

        <div class="editor-label">
            @Html.LabelFor(model => model.ReviewID)
        </div>
        <div class="editor-field">
            @Html.EditorFor(model => model.ReviewID)
            @Html.ValidationMessageFor(model => model.ReviewID)
        </div>

        <div class="editor-label">
            @Html.LabelFor(model => model.Recomendation)
        </div>
        <div class="editor-field">
            @Html.EditorFor(model => model.Recomendation)
            @Html.ValidationMessageFor(model => model.Recomendation)
        </div>

        <div class="editor-label">
            @Html.LabelFor(model => model.AvoidOrBuy)
        </div>
        <div class="editor-field">
            @Html.EditorFor(model => model.AvoidOrBuy)
            @Html.ValidationMessageFor(model => model.AvoidOrBuy)
        </div>

        <div class="editor-label">
            @Html.LabelFor(model => model.Score)
        </div>
        <div class="editor-field">
            @Html.EditorFor(model => model.Score)
            @Html.ValidationMessageFor(model => model.Score)
        </div>

        <div class="editor-label">
            @Html.LabelFor(model => model.GameIDFK, "tblGame")
        </div>
        <div class="editor-field">
            @Html.DropDownList("GameIDFK", String.Empty)
            @Html.ValidationMessageFor(model => model.GameIDFK)

        </div>

        <div class="editor-label">
            @Html.LabelFor(model => model.UserName)
        </div>
        <div class="editor-field">
            @Html.EditorFor(model => model.UserName)
            @Html.ValidationMessageFor(model => model.UserName)
        </div>

        <p>
            <input type="submit" value="Create" />
        </p>
    </fieldset>
}

<div>
    @Html.ActionLink("Back to List", "Index")
</div> 
```

我已经在这几个星期了，没有结果，请帮助我，谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-07T18:12:19.380

我分析了你的问题，看来你必须建立某种持久性机制来记住用户的选择。例如，用户删除 GTA IV，那么您必须修改数据库并存储下拉元素的 ID、用户 ID 以及布尔值 IsVisible。刷新时，您必须同时下载列表并显示可见的元素。

有了这种数据，我不知道哪种持久性实现会更好。您需要分析您的用户故事，因为也许您可以将这个“可见性”选项存储在 cookie 中。这取决于您的功能和要求。

编辑：

尝试这个

```
[HttpPost]
public ActionResult Edit(tblReview tblreview, string selectedValue)
{
    if (ModelState.IsValid)
    {
        db.Entry(tblreview).State = EntityState.Modified;
        db.SaveChanges();
        return RedirectToAction("Index");
    }
    ViewBag.GameIDFK = new SelectList(db.tblGames.Where(x=>x.GameID != tblreview.GameIDFK), "GameID", "GameName");
    return View(tblreview);
} 
```

# c++ - gtkmm 按钮着色

> ID：10056822
> 
> 赞同：1
> 
> 时间：2012-04-07T17:48:33.130
> 
> 标签：c++, button, colors, background, gtkmm

我试图在单击按钮时更改按钮的背景颜色。我已经很好地将按钮连接到单击方法，但我似乎找不到正确的 c++ 语法来创建它。我已经看到它是在 python 中完成的，但这并不能完全帮助我。有人有教程或知道语法吗？

编辑：这是有道理的。谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-07T23:08:34.463

按钮没有颜色，它们包含一个子对象并在按下时发出信号，就是这样。

您可能会将标签作为子对象放入 Button 中。标签是由 Pango 呈现的文本，可让您设置属性。您认为的 Button 颜色实际上是 Label 文本的背景颜色。

Gtk 相当复杂，但可以让你做任何事情。如果您想使用 Gtk 做很多事情，请查找有关 Pango（文本）和 Cairo（图像）的教程。如果您想要一个更简单的独立小部件集，请查看 wx 或 tk。

# android - 有没有办法在清单中多次声明相同的活动？

> ID：10056823
> 
> 赞同：2
> 
> 时间：2012-04-07T17:48:34.850
> 
> 标签：android, android-manifest

我需要它是因为每个实例在声明参数上都有一些差异，例如：launchMode。谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-07T17:55:49.927

派生为清单提供单独名称的活动

```
class ActA extends MyActivity {}
class ActB extends MyActivity {}
class ActC extends MyActivity {} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-07T17:50:41.037

伟大但相同的活动不能在清单文件中多次声明。通过声明我们在编译时没有任何错误。

但不会在运行时启动所需的活动，并且可能由于活动名称冲突而导致运行时异常。

# ruby-on-rails - Rails 路由错误：应用程序无法执行 POST

> ID：10056825
> 
> 赞同：0
> 
> 时间：2012-04-07T17:49:14.710
> 
> 标签：ruby-on-rails, rails-routing

我正在研究 Ryan Bates 的 Railscast #124：Beta 邀请。我已经准备好所有代码，但我还没有真正让事情正常工作。当我尝试发送邀请电子邮件时，我收到此消息。

```
 Routing Error       
    No route matches [POST] "/invitations" 
```

如果我在 Routes.rb 中将资源名称复数，则会出现不同的路由错误。

```
 Routing Error
    uninitialized constant InvitationsController 
```

我究竟做错了什么？

这是我的 Routes.rb 文件。

```
 resources :users, :invitation
  resources :sessions, :only => [:new, :create, :destroy]

  match '/hunts', :to => 'hunts#index'

  match '/signup/',  :to => 'users#new'
  match '/signin',  :to => 'sessions#new'
  match '/signout', :to => 'sessions#destroy'
  match '/contact', :to => 'pages#contact'
  match '/about',   :to => 'pages#about' 
  match '/help',    :to => 'pages#help'

  root :to => "pages#home"
  match ':controller(/:action(/:id(.:format)))'
end 
```

还有我的邀请控制器。

```
class InvitationController < ApplicationController

  def new
    @invitation = Invitation.new
  end

  def create
    @invitation = Invitation.new(params[:invitation])
    @invitation.sender = current_user
    if @invitation.save
      if logged_in?
        Mailer.deliver_invitation(@invitation, signup_url(@invitation.token))
        flash[:notice] = "Thank you, invitation sent."
        redirect_to root_path
      else
        flash[:notice] = "Thank you, we will notify when we are ready."
        redirect_to root_path
      end
    else
      render :action => 'new'
    end
  end

end 
```

更新：这是要求的信息。意见/邀请/html.erb

```
 <%= form_for @invitation do |f| %>
      <p>
        <%= f.label :recipient_email, "Friend's email address" %><br />
        <%= f.text_field :recipient_email %>
      </p>
      <p><%= f.submit "Invite!" %></p>
    <% end %> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-07T17:55:53.313

`rake routes`是一个非常有用的工具，您可以使用它来查看为您的应用程序定义的所有路由。

您添加`resources :invitation`了定义以下路线

```
invitation_index GET    /invitation(.:format)          invitation#index
                 POST   /invitation(.:format)          invitation#create
  new_invitation GET    /invitation/new(.:format)      invitation#new
 edit_invitation GET    /invitation/:id/edit(.:format) invitation#edit
      invitation GET    /invitation/:id(.:format)      invitation#show
                 PUT    /invitation/:id(.:format)      invitation#update
                 DELETE /invitation/:id(.:format)      invitation#destroy 
```

请注意，您正在调用`InvitationController`的操作。

因此，您的路线 -> 控制器映射没有任何问题。

您只是发布到一条不存在的路线。当您将路由名称复数时，您最终会得到一个不存在的控制器 ( `InvitationsController`)。

只需更改您发布到的 URL，您就可以开始了。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-07T19:21:18.067

`resources`调用时尝试使用复数`config/routes.rb`：

```
resources :users, :invitations 
```

发生这种情况是因为您将`Invitation`模型 ( `@invitation`) 的一个实例传递给此帮助器，它使类名复数以知道在哪里提交。
此外，由于`@invitation`尚未保存在数据库中（`@invitation.new_record?`返回`true`），因此`form_for`将表单的方法设置为“POST”。

此信息意味着对“邀请”的 POST 请求由“invitations#create”（类的`create`方法`InvitationsController`）处理。这是**配置上的约定**，如果您想以 RESTful 方式访问邀请并`resources`在您的`config/routes.rb`事物中使用必须以某种方式命名以开箱即用（或者您可以简单地使用一些覆盖表单的“action”属性表单助手选项）。

顺便说一句，如果您想以不同的方式进行操作，您应该阅读[Rails 路由指南](http://guides.rubyonrails.org/routing.html)，看看是否有一些选项可以帮助您定义邀请路由规则，并查看[Rails 入门指南的 REST 章节](http://guides.rubyonrails.org/getting_started.html#rest)。

**更新**：我错过了“如果我在 Routes.rb 中将资源名称复数，我会收到不同的路由错误”这句话。

顺便说一句，问题是您的控制器类名称是“InvitationController”，而`form_for`助手生成的表单提交给“/invitations”。

# cocos2d-iphone - 使用 CCLayerPanZoom 和 CCRenderTexture 时，CCSprite 子坐标变换失败？

> ID：10056828
> 
> 赞同：0
> 
> 时间：2012-04-07T17:49:35.547
> 
> 标签：cocos2d-iphone, kobold2d

谢谢阅读。

我正在 Cocos2D 1.x 中进行设置，其中我有一个巨大的 CCLayerPanZoom 在一个可以自由平移和缩放的场景中。每一帧，我都必须在顶部额外绘制一个 CCRenderTexture 以创建“黑暗”（我正在切断光线）。效果很好。

现在我在表面上添加了单个精灵，它们由 Box2D 管理。这也有效。我可以转换到光源应该在的 RenderTexture，并且它们渲染得很好。

然后我想通过在场景中添加一个 CCLayer 在顶部添加一个 HUD 层。该层需要包含多个堆叠在一起的精灵，作为用户界面元素。

只是，所有这些元素都无法在我需要它们的位置绘制：正好在屏幕的中心。添加到 HUD 层的 Sprite 全部关闭，我已经迭代了几乎所有变体“convertToWorldSpace”、“convertToNodeSpace”等。

就好像 CCPanZoomLayer 在后台的不断缩放会抛出每一帧上方图层中的锚点，并且重置它们没有帮助。它们似乎都默认为它们所连接的节点边界框​​的角之一，就好像它们的变换在绘图时被阻止或设置为零一样。

有没有人遇到过这个问题？使用 CCLayerPanZoom 并在每帧顶部绘制自定义 CCRenderTexture 时，这是一个已知问题吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-08T06:00:52.873

哈！我找到了罪魁祸首！Cocos2D 使用 Zwoptex 数据的方式存在错误。（我使用的是 Cocos2D v 1.0.1）。

似乎在加载 Zwoptex v3 数据时，在计算实际的精灵帧锚点时会忽略精灵帧的修剪偏移数据。效果是在定义中（例如在 plist 中）具有修剪偏移的精灵上没有锚点正确设置其锚点。真的很奇怪......我想知道这是否发生在其他人身上？这是一个明显的问题。

以下是如何重现： 为 zwoptex v3 格式的精灵帧创建任何数据（使用修剪数据的格式）。确保你确实有一个修剪过的精灵，即偏移量必须大于零，并且图像大小必须大于源。加载精灵，并尝试将其定位在屏幕中心。你会看到它关闭了。以下是正确计算锚点的方法：

```
 CCSprite *floor = [CCSprite spriteWithSpriteFrameName:@"Menu_OmeFloor.png"]; //create a sprite
        CCSpriteFrame *frame=[[CCSpriteFrameCache sharedSpriteFrameCache] spriteFrameByName:@"Menu_OmeFloor.png"]; //get its frame to access frame data
        [floor setTextureRectInPixels:frame.rect rotated:frame.rotated untrimmedSize:frame.originalSizeInPixels]; //re-set its texture rect
        //Ensure that the coordinates are right: Texture frame offset is not counted in when determining normal anchor point:
        xa = 0.5 + (frame.offsetInPixels.x / frame.originalSizeInPixels.width);
        ya = 0.5 + (frame.offsetInPixels.y / frame.originalSizeInPixels.height);
        [floor setAnchorPoint:ccp(xa,ya)];
        floor.position=(where you need it); 
```

将 xa/ya 公式中的 0.5 替换为所需的锚点值。

# iphone - dismissModalViewControllerAnimated 仅适用于默认动画

> ID：10056831
> 
> 赞同：0
> 
> 时间：2012-04-07T17:50:04.320
> 
> 标签：iphone, objective-c, ios5, modalviewcontroller

我有一个奇怪的问题......在标签栏应用程序中，在我调用的 tabBarController 中：

```
[myController setModalTransitionStyle:UIModalTransitionStyleFlipHorizontal];
self presentModalViewController:myController animated:YES]; 
```

myController 得到呈现，一切正常，但是当我尝试（从 myController 中）关闭它时：

```
[[self presentingViewController] dismissModalViewControllerAnimated:YES]; 
```

它会关闭动画，当 myController 突然重新出现时，我几乎可以看到我的 tabBarController 活动视图。使其工作的唯一方法是使用默认的过渡样式：

```
UIModalTransitionStyleFlipHorizontal 
```

其他所有动画，甚至试图在没有动画的情况下关闭 myController 都会导致该问题。

关闭调用后， myController 的 viewWillDisappear 和 viewDidDisappear 被调用。myController 的 viewWillAppear 和 viewDidAppear 在重新出现时不会被调用。再次调用dismiss函数什么都不做。我几乎可以肯定没有什么会再次呈现 myController ，就像它根本没有完全消失一样。

我尝试将 myController 替换为带有空视图的全新控制器，但没有任何改变。

这听起来像一个愚蠢的问题，但我真的无法理解...... PS：我正在使用 iOS5、storyboard、ARC，这是一个 iphone 应用程序，我正在使用模拟器（无法在 iphone 上尝试片刻）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-07T18:57:21.323

是否从模态呈现的 VC 中调用了解雇？尝试这个：

```
[self dismissModalViewControllerAnimated:YES]; 
```

# asp.net - 如何检测移动设备的屏幕分辨率？

> ID：10056840
> 
> 赞同：2
> 
> 时间：2012-04-07T17:50:34.473
> 
> 标签：asp.net, jquery-mobile, asp.net-4.0

我是移动网络应用程序开发的新手，我在 jqueryMobile 和 asp.net 中编写了一个小应用程序，但是我遇到了屏幕高度问题，当我在 Opera 模拟器中测试我的应用程序时，对于大屏幕尺寸，我的应用程序看起来很小，有没有办法检测和调整高度和宽度，使它看起来像一个原生应用程序并填满整个屏幕。

![在此处输入图像描述](../Images/2fc28d6ba7fab5bf52777a4d33e853b3.png)

![在此处输入图像描述](../Images/3d3097b08c372ae9a618ed1e56db2090.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-07T18:02:18.773

在不知道您的 css 标记看起来如何的情况下尝试添加以下元标记：

```
<meta name="viewport" content="user-scalable=1.0,initial-scale=1.0,minimum-scale=1.0,maximum-scale=1.0"> 
```

这将确保您的页面以正确的比例开始（并且不允许捏缩放）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-07T18:00:14.110

您可以阅读 css 技巧来制作 CSS 目标屏幕尺寸

[http://css-tricks.com/css-media-queries/](http://css-tricks.com/css-media-queries/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-07T18:19:23.387

尝试添加以下代码段：

```
<meta name="viewport" content="width=device-width"> 
```

从你说的应该可以满足你的需求。

您可以在此处找到有关视口元标记的更多信息[https://developer.mozilla.org/en/Mobile/Viewport_meta_tag](https://developer.mozilla.org/en/Mobile/Viewport_meta_tag)

您还可以考虑其他一些元标记。

```
<meta name="HandheldFriendly" content="True">

<meta name="MobileOptimized" content="320"/> 
```

其中大部分是我从探索 html5 移动样板中学到的。对于任何移动应用程序来说，这都是一个坚如磐石的起点。如果您之前没有检查过，我相信它会帮助您很多[http://html5boilerplate.com/mobile](http://html5boilerplate.com/mobile)

# android - 我可以制作一个 Android 按钮模板吗？

> ID：10056843
> 
> 赞同：9
> 
> 时间：2012-04-07T17:50:44.533
> 
> 标签：android

我当前的应用程序中有几个按钮。除了它们的文本和标签之外，它们都是相同的。如果我不必为每个按钮重复所有按钮配置信息，main.xml 会好很多。

有没有办法将按钮定义为模板，然后将其用作模板进行更多操作？

在这个例子中，我有以下 10 个：

```
 <Button
            android:id="@+id/button"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:padding="10dp"
            android:text="Y"
            android:typeface="monospace"
            android:textSize="12pt"
            android:tag="Y"
            android:textColor="@color/button_text"
            android:background="@drawable/grey_blank_48x48"
            android:onClick="onButtonClicked"/> 
```

如果我有一个，然后是其中的 9 个，那就太好了：

```
 <Button2
            android:text="N"
            android:tag="N"/> 
```

**解析度**

就像@Luksprog 所说的那样：

```
<style name="ASR33_button" >
    <item name="android:id">@+id/button</item>
    <item name="android:layout_width">wrap_content</item>
    <item name="android:layout_height">wrap_content</item>
    <item name="android:padding">10dp</item>
    <item name="android:textColor">@color/button_text</item>
    <item name="android:background">@drawable/grey_blank_48x48</item>
    <item name="android:onClick">onButtonClicked</item>
    <item name="android:typeface">monospace</item>
    <item name="android:textSize">12pt</item>
</style> 
```

与 main.xml 有这样的事情：

```
 <Button
            style="@style/ASR33_button"
            android:tag="Y"
            android:text="Y"
            />

   <Button
            style="@style/ASR33_button"
            android:tag="N"
            android:text="N"
            /> 
```

这一天。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-04-07T18:03:36.107

我们[`style`](http://developer.android.com/guide/topics/ui/themes.html)：

```
<?xml version="1.0" encoding="utf-8"?>
<resources>
    <style name="btnlook" >
        <item name="android:id">@+id/button</item>
        <item name="android:layout_width">wrap_content</item>
        <item name="android:layout_height">wrap_content</item>
        <item name="android:padding">10dp</item>
        <item name="android:textColor">@color/button_text</item>
        <item name="android:background">@drawable/grey_blank_48x48</item>
        <item name="android:onClick">onButtonClicked</item>
        <item name="android:typeface">monospace</item>
        <item name="android:textSize">12pt</item>
    </style>
</resources> 
```

然后在您的 xml 布局中：

```
<Button
            style="@style/btnlook"
            android:text="N"
            android:tag="N"/> 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-07T17:56:43.267

您可以制作一个自定义视图来扩展按钮并设置所有重复的内容。然后您可以按照您的描述使用它，但使用完全限定的名称，而不仅仅是短名称。

```
class MyButton extends Button {
    public MyButton() {
        // Set the values you want
    }
} 
```

在 XML 中：

```
<com.me.myapp.MyButton
    android:text="N"
    android:tag="N" /> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-07T17:56:07.637

您可以创建一个`selector`

```
<?xml version="1.0" encoding="UTF-8"?> 
<shape xmlns:android="http://schemas.android.com/apk/res/android" 
     android:shape="rectangle">
    <solid android:color="#AAFFFFFF"/>
    <corners android:bottomRightRadius="7dp"
        android:bottomLeftRadius="7dp" 
        android:topLeftRadius="7dp"
        android:topRightRadius="7dp"/> 
```

并设置 10 按钮`android:background="@drawable/that_selecter"`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-07T17:58:56.867

这样做的唯一方法是使自定义按钮子类化按钮。

# jquery - 在完成 jquery 文件上传时触发 asp.net 事件

> ID：10056852
> 
> 赞同：0
> 
> 时间：2012-04-07T17:51:35.710
> 
> 标签：jquery, asp.net, file, upload

我正在使用 jquery 文件上传将图像上传到 asp.net 服务器（http://www.webtrendset.com/2011/06/22/complete-code-example-for-using-blueimp-jquery-file-upload-控制在-asp-net/)

文件上传完成后，我需要触发一个 asp.net 事件（或单击隐藏的 asp.net 按钮）。我尝试将代码添加到完成的功能，但我没有让它工作。

按钮无法到达...

```
 done: function (e, data) {
 document.getElementById('<%=Button1.ClientID%>').click(); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-07T18:18:51.343

是否触发了完成功能？您可以使用 jquery 单击您的按钮，例如；

```
$('input[id$=Button1]').click(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-07T18:24:20.073

您可以尝试这样做以使用 javascript 执行回发事件：

```
__doPostBack('<%= Button1.ClientID  %>', ''); 
```

我还建议您在 web.config 中使用 ClientIDMode = static，这样您就不必以编程方式确定元素的 ID。

# java - 中断Java中的线程

> ID：10056853
> 
> 赞同：2
> 
> 时间：2012-04-07T17:51:44.537
> 
> 标签：java, multithreading

我想优雅地关闭线程。我在互联网上看到了很多代码，并在这里进行了查询。我认为有两种关闭方法。

1.  使用布尔标志。一旦标志发生变化，我们就可以在 run 方法中破坏那里的代码。
2.  使用中断方法。

我的问题是为什么要避免使用布尔标志来优雅地关闭线程，当我运行示例程序时它运行良好。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-07T17:56:44.400

但是，flag 没有任何问题`boolean`：

*   您需要记住同步/可见性（至少要挂上`volatile`标志）

*   为什么在已经实现的情况下添加一个额外的标志（`interrupted`）？

*   其他库/容器可能会尝试中断您的线程（毕竟，他们不知道您的标志！）所以您仍然需要支持`InterruptedException`和/或`isInterrupted()`标志

*   中断线程也可以中断 I/O 调用和`Thread.sleep()`. 您的自定义标志不能

# amazon-ec2 - 扩展 ec2 保留实例的使用

> ID：10056854
> 
> 赞同：5
> 
> 时间：2012-04-07T17:51:48.850
> 
> 标签：amazon-ec2

一年前我们购买了一个预留实例。它现在启动并运行。现在快到期了，我想再交一年的钱，继续作为预留实例使用。但是当我尝试“购买预留实例”时，它没有显示当前预留实例的任何选项。如果我右键单击我现有的实例，唯一的选择是“购买更多类似这些”......而不是关于扩展当前保留实例的任何内容。我怎样才能继续使用我现有的预留实例？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-17T06:10:48.370

EC2 Reserved Instance 的概念与之前的服务器托管概念不同。

这里没有“继续”的概念。您只需在当前预留实例到期后立即购买另一个 EC2 预留实例，AWS 将自动按照您的预留实例价格率计算每小时价格。但请确保您购买的新预留实例具有正确的参数（实例大小、区域、区域...）。

希望这些信息对您有所帮助。

# wordpress - Wordpress 特色图片 url 使用绝对主机路径并添加额外的 / 导致页面中断。为什么会这样？

> ID：10056857
> 
> 赞同：2
> 
> 时间：2012-04-07T17:52:36.043
> 
> 标签：wordpress

我将一个站点从我的测试服务器迁移到了实时服务器。一切正常传输，只有特色图像被破坏并且不显示。即使我重新上传图像，URL 的呈现也不正确。

测试服务器是[http://dave-conner.com](http://dave-conner.com)

实时服务器是[http://qmpdirect.com](http://qmpdirect.com)

发生问题的页面是[http://qmpdirect.com/cpap-kits/](http://qmpdirect.com/cpap-kits/)

第一个图像路径应该是：http: [//qmpdirect.com/wp-content/uploads/2012/02/sleepstyle600-37440_184x184.jpg](http://qmpdirect.com/wp-content/uploads/2012/02/sleepstyle600-37440_184x184.jpg)

而是呈现为：/home/content/28/9036828/html//wp-content/uploads/2012/02/sleepstyle600-37440_184x184.jpg

如果有人能告诉我为什么会发生这种情况以及如何解决它，我将不胜感激。我已经把头撞在墙上有一段时间了。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-09T00:57:45.773

登录到您的 phpmyadmin，进入您的数据库，在第 3 页找到 upload_path

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-11T03:50:54.870

发现了问题。数据库中临时文件的位置仍设置为旧服务器的绝对托管路径。一旦我将其更改为实时服务器的绝对托管路径，问题就得到了纠正。我仍然不确定为什么这会导致图像损坏，因为 wordpress 将这些图像移动到永久文件夹但是......问题解决了。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-20T23:35:24.517

有同样的问题，由大卫康纳解决方案解决。我如何解决的详细信息：

*   使用 phpmyadmin，转到`wp_options`表
*   在第 4 页（默认分页为 30 行/页），您将找到一个名为 et_images_temp_folder `with the`option_id = 154的选项
*   用新的绝对服务器路径替换 option_value
*   执行查询示例：

    ```
    UPDATE  `yourdatabase`.`wp_options` 
    SET `option_value` = '/home/yourwebsite/public_html/wp-content/uploads/et_temp'
    WHERE `wp_options`.`option_id` = 154; 
    ```

# objective-c - iOS：UIView 的简单物理

> ID：10056858
> 
> 赞同：1
> 
> 时间：2012-04-07T17:52:40.423
> 
> 标签：objective-c, ios, ios5, quartz-2d, uiviewanimation

我有一个用户通过在方法`UIView`中设置其中心来拖动。`touchesMoved:`当用户放手时，我希望`UIView`根据他们移动它的速度和方向从屏幕上掉下来。

我是否需要通过将`UIView`的最后一个中心点与其新的中心点进行比较来以某种方式创建一个向量？`NSTimer`并且每隔一段时间用?减去一个固定的量到向量的 y 值

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-07T18:00:43.067

是的，在计算中你需要相当多的物理知识

1.  刷卡速度
2.  滑动方向

您将需要使用该`touchesMoved`方法和计时器来跟踪滑动的时间量以及对象新位置的坐标。这应该是相当直截了当的。一旦你找到了那些你可以简单地`UIAnimation`为对象添加一个移动到它的新位置。

~**一个建议：**

我建议您查看`Cocos2D`该库并将其与您的应用程序集成。您将不需要自己实现`touch delegate`方法和计算事物〜有库：）它有很多库，特别是用于移动对象（或者`sprites`如果您希望以这种方式调用它们）并且您有动画方法`easeInEaseOut`，等等。可能会影响移动的物体。如果您正在开发某种游戏，请查看`chipMunk`Cocos2D 中的引擎。

# css - CSS浮动左右具有动态宽度？

> ID：10056860
> 
> 赞同：0
> 
> 时间：2012-04-07T17:52:47.433
> 
> 标签：css, layout, dynamic, css-float

我试图让两列并排（左/右浮动），但它们都有动态文本。

[![截屏](../Images/cda1eaf89569edaf26037fca80384fac.png)](https://i.stack.imgur.com/Sc9IH.png) ！

[链接到代码](https://jsfiddle.net/vR3eE/)

```
<div class="news-item">
    <div class="news-pic">
        <a href="#">
            <img src="" width="126" height="80" alt="">
        </a>
    </div>
    <div class="news-description">        
        <h3><a href="#">Long post title this is. What is this? this is a long post title. Even longer. (dynamic)</a></h3>   
        <a href="#" class="category-name">Longer category name (dynamic)</a>        
        <div style="clear:both"></div>
        <small><i>Published {{ post.published|date:"j. F Y" }}</i></small>
        <p class="text-min">Blah blah body</p>
        <div style="clear:both"></div>
    </div>
    <div style="clear: both"></div>
</div> 
```

```
html, body {
    font-size: 13px;
    font-family: arial;
}

.news-item {
    padding: 10px 10px 10px 10px;
    border: 1px solid #f2f2f2;
    cursor: default;
    width: 658px;
    margin: 10px 0 20px 0;
    border-radius: 5px;
}

.news-pic {
    display: inline-block;
    vertical-align: top;
    padding: 3px;
    border: 1px solid #DADADA;
    margin-right: 10px;
    background: white;
}

.news-description {
    margin-left: 0;
    display: inline-block;
    width: 510px;
}

.news-description h3 {
    margin: 0;
    float: left;
    font-size: 15px;
}

.news-description h3 a {
    text-decoration: none;    
    color: #137541;
}

.category-name {
    border-top-left-radius: 3px;
    border-bottom-left-radius: 3px;
    text-decoration: none;
    padding: 1px 4px 1px 5px;
    font-weight: bold;
    border: 1px solid #dadada;
    border-right: none;
    background: rgba(215, 214, 214, .2);
    color: #807f7f;
    white-space: nowrap;
    display: inline-block;
    font-size: 10px;    
    margin-right: -11px;
    z-index: 5;
    float: right;
} 
```

我试图让左边的主文本在到达正确的类别时“中断”成一个新行（这也是动态的，所以它不能是静态宽度）。仅使用 CSS 是否有可能？还是我必须伸手去拿 JS？

非常感谢！:)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-07T18:33:56.797

确保文本没有浮动，并且按钮在 HTML 中的文本之前和右侧都浮动

[http://jsfiddle.net/vR3eE/4/](http://jsfiddle.net/vR3eE/4/)

# python - 无法在 gae 中运行简单的 helloworld（python 2.7）

> ID：10056861
> 
> 赞同：6
> 
> 时间：2012-04-07T17:52:51.713
> 
> 标签：python, google-app-engine

我正在尝试在 google-appengine 1.6.4 中为 python 2.7运行[官方的 helloworld程序。](https://shadyabhi@github.com/shadyabhi/helloworld.git)

不能运行一个简单的helloworld真是令人沮丧。我会很感激这里的任何帮助。

我遇到的错误：-

```
shadyabhi@MBP-archlinux ~/codes/gae $ dev_appserver.py helloworld/
INFO     2012-04-06 23:25:55,030 appengine_rpc.py:160] Server: appengine.google.com
INFO     2012-04-06 23:25:55,034 appcfg.py:582] Checking for updates to the SDK.
INFO     2012-04-06 23:25:56,709 appcfg.py:616] This SDK release is newer than the advertised release.
WARNING  2012-04-06 23:25:56,710 datastore_file_stub.py:513] Could not read datastore data from /tmp/dev_appserver.datastore
INFO     2012-04-06 23:25:56,773 dev_appserver_multiprocess.py:647] Running application dev~helloworld on port 8080: http://localhost:8080
INFO     2012-04-06 23:25:56,774 dev_appserver_multiprocess.py:649] Admin console is available at: http://localhost:8080/_ah/admin
WARNING  2012-04-06 23:26:00,928 py_zipimport.py:139] Can't open zipfile /usr/lib/python2.7/site-packages/setuptools-0.6c11.egg-info: IOError: [Errno 13] file not accessible: '/usr/lib/python2.7/site-packages/setuptools-0.6c11.egg-info'
ERROR    2012-04-06 23:26:01,101 wsgi.py:189] 
Traceback (most recent call last):
  File "/opt/google-appengine-python/google/appengine/runtime/wsgi.py", line 187, in Handle
    handler = _config_handle.add_wsgi_middleware(self._LoadHandler())
  File "/opt/google-appengine-python/google/appengine/runtime/wsgi.py", line 239, in _LoadHandler
    raise ImportError('%s has no attribute %s' % (handler, name))
ImportError: <module 'helloworld' from '/home/shadyabhi/codes/gae/helloworld/helloworld.pyc'> has no attribute app
INFO     2012-04-06 23:26:01,110 dev_appserver.py:2884] "GET / HTTP/1.1" 500 -
ERROR    2012-04-06 23:26:01,479 wsgi.py:189] 
Traceback (most recent call last):
  File "/opt/google-appengine-python/google/appengine/runtime/wsgi.py", line 187, in Handle
    handler = _config_handle.add_wsgi_middleware(self._LoadHandler())
  File "/opt/google-appengine-python/google/appengine/runtime/wsgi.py", line 239, in _LoadHandler
    raise ImportError('%s has no attribute %s' % (handler, name))
ImportError: <module 'helloworld' from '/home/shadyabhi/codes/gae/helloworld/helloworld.pyc'> has no attribute app
INFO     2012-04-06 23:26:01,486 dev_appserver.py:2884] "GET /favicon.ico HTTP/1.1" 500 - 
```

* * *

## 回答 #1

> 赞同：36
> 
> 时间：2012-04-15T01:34:37.443

如果您使用的是 python2.7 库，则本教程会出错

此行不正确：

```
application = webapp2.WSGIApplication([('/', MainPage)], debug=True) 
```

正确的行应该是：

```
app = webapp2.WSGIApplication([('/', MainPage)], debug=True) 
```

WSGI 处理程序正在抱怨，因为它正在寻找一个名为“app”的属性。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-04-07T18:08:15.637

[您在 github 上的文件和官方的 google hellworld 教程](https://developers.google.com/appengine/docs/python/gettingstartedpython27/helloworld)之间的一个区别是您的 helloworld 文件似乎没有命名为 helloworld.py。可能会有所帮助？

此外，您是否需要 helloworld 顶部的 PROJECT_DIR 变量？

如果您正在努力使基本教程正常工作，那么您应该做的第一件事是确保您的项目与谷歌示例完全相同。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-07T18:32:03.373

通过检查您的 git 存储库，我看到 helloworld 不是 .py 文件。
将其重命名为 helloworld.py ，您应该一切顺利。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-17T20:17:12.613

这段代码对我有用（注意“应用程序”替换为“应用程序”）：

```
app = webapp.WSGIApplication(
  [('/', MainHandler),
    ('/upload', UploadHandler),
    ('/serve/([^/]+)?', ServeHandler),
  ], debug=True)

if __name__ == '__main__':
  run_wsgi_app(app) 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-01T08:25:24.050

直接从 Google 网站复制代码后，我收到 500 错误。以上都没有奏效。

我所要做的就是更改每行代码的缩进（即，将空格更改为制表符）和宾果游戏。

这对我有用。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-07-29T11:11:45.803

使用运行时 python 2.7 时，您不必使用 main 函数

删除这个

```
if __name__ == '__main__':
      run_wsgi_app(app) 
```

并简单地调用

```
app = webapp.WSGIApplication(
[('/', MainHandler),
('/upload', UploadHandler), 
('/serve/([^/]+)?', ServeHandler),], debug=True) 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2015-04-01T21:33:54.957

一直在做python 2.7[官方的hello world](https://cloud.google.com/appengine/docs/python/gettingstartedpython27/helloworld)教程，在配置文件app.yaml中发现同样的错误最后一行写着

脚本：helloworld.application

*它应该是*

脚本：helloworld.app

# ios - Xcode 中 Info.plist 文件上的多个图标条目

> ID：10056865
> 
> 赞同：10
> 
> 时间：2012-04-07T17:53:14.003
> 
> 标签：ios, iphone, xcode, ipad, icons

当我在 Xcode 4 上导入在 Xcode 3 上启动的项目时，它会为*Info.plist*文件上的图标添加另一组条目。像这样的东西：

![在此处输入图像描述](../Images/1236dec18864227e6276e73ad792751c.png)

有时还有一个`"Icon file"`单独的条目称为（单数文件，而不是复数）。

所有这些条目都需要吗？

另一个问题：为什么将启动图像`Default.png`和`Default@2x.png`添加到图标部分？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-04-07T18:20:58.027

您只需要包含所有图标 (57x57,72x72,114x114,144x144) 的条目`Icon files`（复数）。您可以删除`Icon files (iOS 5)`以及`Icon file`（单数）。

该`Default.png`部分中的 's 是完全错误的，并且可能由于 Xcode 中的错误而被放置在那里。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-07T22:04:39.283

就像 Jonas 说的，你可以删除 (iOS 5) 部分。

然而，这显然是一个新增功能，而且很可能苹果公司正在推进这些变化是有原因的。

我会清理它并保留它以实现前向兼容性。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-10-28T21:22:55.050

您不必指定@2x 版本，它们会自动为 ipad 挑选，[此处的开发页面](https://developer.apple.com/library/ios/qa/qa1686/_index.html)仅在项目中列出 1x 版本。
项目 0：图标 - 它是 57x57
项目 1：Icon-72 - 它是 72x72
项目 2：Icon-Small - 它是 29-29
项目 3：Icon-Small-50 - 它是 50x50

将这些 .png 格式的文件以及 @2x 添加到您的项目中，因此将它们中的 8 个放在一起。

将 Default.png 及其 2x 版本也添加到 proj 并在启动图像中仅指定 Default.png

乙

# android - 在 VideoView 中打开 RTSP 视频

> ID：10056870
> 
> 赞同：4
> 
> 时间：2012-04-07T17:53:36.460
> 
> 标签：android, rtsp, android-videoview, google-tv

我不想在我的应用程序内的 VideoView 中打开托管在远程服务器上的 .3gp 视频。使用的协议是 RTSP。我不断收到此错误：

```
04-07 19:26:32.528: E/MediaPlayer(7358): Unable to to create media player
04-07 19:26:32.536: W/VideoView(7358): Unable to open content: rtsp://v2.cache1.c.youtube.com/CiULENy73wIaHAk-BOiQ3AO9gBMYDSANFEgGUglwbGF5bGlzdHMM/0/0/0/video.3gp
04-07 19:26:32.536: W/VideoView(7358): java.io.IOException: setDataSource failed.: status=0x80000000 
```

流正在工作并且应该支持编解码器。找不到问题。我已经在 Sony GTV 盒子和 ICS 平板电脑上试过了。

这是我正在使用的代码：

```
videoview.setVideoURI(Uri.parse(viduri));

        MediaController mc = new MediaController(PlayerActivity.this);

        videoview.setMediaController(mc);

        videoview.requestFocus();

        videoview.setOnPreparedListener(new MediaPlayer.OnPreparedListener() {

            public void onPrepared(MediaPlayer arg0) {
                progressBar.setVisibility(View.GONE);
                videoview.start();
            }
        }); 
```

有没有人有同样问题的经验？有什么解决办法吗？错误消息不是很有帮助...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-07T18:15:06.600

我看到的是找不到这个流。您是否使用 YouTube 数据 API 获取此 Youtube 视频？

# mongodb - 如何将写入文本文件的数据保存到 mongo db 中？

> ID：10056874
> 
> 赞同：0
> 
> 时间：2012-04-07T17:54:11.837
> 
> 标签：mongodb

我有一个包含以下数据的文本文件

```
 {"i":1, "j":2}
  {"k":3, "l":10}
  {"i":4, "w":30} 
```

每行代表一个可以保存在 mongo db 中的简单文档

这些行还可以包含其他信息，这只是一个示例

我的问题是，是否可以逐行读取文本文件并在某种程度上创建每行表示的文档并将其保存在 mongo db 中？

如果是的话，我会怎么做（或者至少，接近它）？

提前致谢

编辑：语言是 JAVA，抱歉没提

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-07T18:04:51.330

你可以使用这个场景

从文件中读取每一行

并插入到 mongodb

例如。

```
db.mydata.insert({"i":1, "j":2}); 
```

# ios5 - Ui Picker 视图错误无法解决

> ID：10056875
> 
> 赞同：0
> 
> 时间：2012-04-07T17:54:19.223
> 
> 标签：ios5, uipickerview

仍在尝试找出 UI 选择器视图，现在已经有 2 天了，出于某种原因，我只是坚持这一点。请就我做错了什么提供任何建议。我有一个黄色三角形表示“不完整的实现”和一个红色三角形表示“使用未声明的标识符 numberOfComponentsinPickerView”

。H

```
#import <UIKit/UIKit.h>

@interface pick3 : UIViewController <UIPickerViewDataSource, UIPickerViewDelegate> {  

UIPickerView *select;    
NSArray *list;

}

@property (strong, nonatomic) IBOutlet UIPickerView *select;

@end 
```

.m

```
#import "pick3.h"

@interface pick3 ()

@end

@implementation pick3
@synthesize select;

- (id)initWithNibName:(NSString *)nibNameOrNil bundle:(NSBundle *)nibBundleOrNil
{
self = [super initWithNibName:nibNameOrNil bundle:nibBundleOrNil];
if (self) {
    // Custom initialization
}
return self;
}

- (void)viewDidLoad
{
[super viewDidLoad];
// Do any additional setup after loading the view.

{

     list = [[NSArray alloc] initWithObjects:@"Employed", @"Student", @"Retired",     @"Homemaker", @"Self-employed", @"Unemployed", @"Other", nil];
}

-(NSInteger)numberOfComponentsInPickerView:(UIPickerView *)pickerView
{
    //One column
    return 1;
}

-(NSInteger)pickerView:(UIPickerView *)pickerView numberOfRowsInComponent:(NSInteger)component
{
    //set number of rows
    return list.count;
}

-(NSString *)pickerView:(UIPickerView *)pickerView titleForRow:(NSInteger)row forComponent:(NSInteger)component
{
    //set item per row
    return [list objectAtIndex:row];
}

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-07T20:20:27.617

这只是你`viewDidLoad:`方法上的一个错字。

您的“列表”之前有一个额外的“{”，文件末尾有一个额外的“}”。只需删除它们就可以了。

试试这个：

```
- (void)viewDidLoad
{
[super viewDidLoad];
// Do any additional setup after loading the view.

     list = [[NSArray alloc] initWithObjects:@"Employed", @"Student", @"Retired",     @"Homemaker", @"Self-employed", @"Unemployed", @"Other", nil];
} 
```

# php - PHP 和服务器，“路径信息”

> ID：10056881
> 
> 赞同：1
> 
> 时间：2012-04-07T17:55:00.707
> 
> 标签：php, url

在用 PHP 构建网站时，我发现 URL 能够包含不属于的额外信息，即

```
http://www.mydomain.com/index.php/extrainformation 
```

我已经读过它是分开的，`$_SERVER['PATH_INFO']`但需要找到一种方法来阻止显示此信息，因为它显示在 Google 搜索结果中。我可以通过在 .htaccess 文件中添加条件来防止这种情况吗？

有什么见解吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-07T19:17:29.077

该信息在技术上是一个有效的 URL，即使它被您的网页忽略。因此，如果像谷歌这样的搜索引擎找到了一个包含额外信息的 URL，可能是通过一个链接，并且它会拉出一个有效的网页，他们会将其显示在他们的结果中。

您可以通过以下几种方式解决此问题：

1.  使用[规范 URL](http://googlewebmastercentral.blogspot.com/2009/02/specify-your-canonical.html)指定正确的 URL，无需额外信息
2.  如果将垃圾信息附加到 URL，则执行[301 重定向](https://www.google.com/search?aq=f&sourceid=chrome&ie=UTF-8&q=301%20redirect)到没有垃圾信息的 URL
3.  返回 URL 无效的错误 (HTTP 40x)

这三者都将阻止 Google 将具有此类 URL 的页面编入索引

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-07T19:19:59.713

这些看起来像 Apache 的多视图。将此添加到您的 htaccess 文件中：

```
Options -MultiViews 
```

# javascript - 使用 player.play(songURI) 时 Spotify 崩溃

> ID：10056882
> 
> 赞同：0
> 
> 时间：2012-04-07T17:55:05.990
> 
> 标签：javascript, spotify

我正在 OSX 机器上为 Spotify (JavaScript) 开发，当我尝试播放歌曲时应用程序崩溃。

我对 API 的调用是：`player.play(trackURI);`

发生的情况是 Spotify 客户端将播放歌曲大约 1/4 秒，然后它会崩溃。我确实相信正是这种方法使客户端崩溃，因为我已经对其进行了调试。

如果您需要任何其他信息，并且对为什么会发生这种情况有任何线索，我期待着回复。

* * *

更多信息：

所以，我设法复制了它。发生的事情是我已经注册了`EVENT_CHANGE`这样的活动`player.observe(models.EVENT.CHANGE, function (e) {`

当歌曲结束并开始新的歌曲时，我想播放假队列中的下一首歌曲。因此，我`player.play(nextSongId)`在 EVENT.CHANGE 被触发时调用`e.data.curtrack == true`。

然后我猜 Spotify 会尝试播放其队列中的下一首歌曲，但后来我想播放我自己的下一首歌曲，所以 Spotify 崩溃了。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-10T23:10:02.437

我认为问题在于，当您告诉 Spotify 播放下一首曲目时，您的观察者会一遍又一遍地被调用。每次您执行 player.play 时，它都会触发另一个 EVENT.CHANGE，并且您将尝试再次播放该曲目。

要验证，请尝试输入 a`console.log("playing next track")`并观察 js 控制台以查看它是否发生。

如果是，请尝试检查是否为`player.track.uri === queue[index].uri`假，然后播放队列中的下一首曲目

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-15T16:03:20.297

经过一些修复后，我认为这是因为我在之前调用过 player.play(trackURI) 之后几乎立即调用了它。发生这种情况是因为我正在更改一首歌曲，这触发了 EVENT.CHANGE 事件，然后我再次调用 player.play()。请参阅这段代码，了解处理歌曲更改的好方法。

```
player.observe(models.EVENT.CHANGE, function (e) {

    // Only update the page if the track changed
    if (e.data.curtrack == true && !justChangedSong) {
        var songId = queue.shift();
        if (songId != null)
        {
            player.play(songId);
            justChangedSong = true;
        }
    }
    else if (justChangedSong)
    {
        justChangedSong = false;
    }
}); 
```

此外，如果您有一个名为“下一首歌曲”左右的按钮，请将其连接到`playNextSong()`方法：

```
function playNextSong()
{
    var songId = queue.shift();
    if (songId != null)
    {
        player.play(songId);
        justChangedSong = true;
    }
} 
```

似乎 Spotify 不再崩溃了。干杯!

# java - 调用 dispose 方法后访问模态对话框变量

> ID：10056886
> 
> 赞同：2
> 
> 时间：2012-04-07T17:55:32.040
> 
> 标签：java, swing, nullpointerexception, modal-dialog, dispose

情况：主窗体调用带有文本框的模态jDialog，其中用户填写参数以创建或修改某个类的实例，称为ClassA。

当对话框需要修改现有实例时，它作为参数传入构造函数。否则 jDialog 将创建一个新的 ClassA 实例。

问题：主窗体需要访问那个新实例，我认为将整个主窗体作为参数传递，并让对话框通过方法调用将新实例推入其中是不干净的代码，因为这样可以完美地重新可用的独立对话框仅可用于需要特定类名和方法来接收新实例的单个主窗体。

在单击 OK 按钮后，通过调用 getClassAInstance() 方法（在修改现有实例时也可以调用该方法），使主窗体从 jdialog 获取新实例更为合乎逻辑。该方法在相关 jdialog 的新实例上的“setVisible(true)”方法之后调用。对话框出现，主窗体的线程会一直休眠，直到对话框关闭（因为它是模态的）。OK 按钮调用 jDialog 的 dispose() 方法，然后下一条语句是主窗体对 jDialog 的 getClassAInstance() 调用。

这是代码中的相同内容..

```
ClassAInstanceMakerDialog imd = new ClassAInstanceMakerDialog(this, true);
imd.setVisible(true);
//imd.dispose(); after OK button click
System.out.println(imd.getClassAInstance()); //return a new ClassA instance

//output: whatever ClassA.toString() should return, works fine 
```

问题：我试过了，它似乎工作得很好。但是，这是一个好的代码吗？getClassAInstance() 方法返回“null”是否有任何危险，因为垃圾收集器在处理 jDialog 之后并且在主窗体完成调用之前收集了 ClassA 实例？

如果我没有说清楚，请原谅我，我不是以英语为母语的人。如果您想看一些代码，请告诉我...

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-07T18:09:32.580

我认为访问保存 ClassA 实例的对话框实例的成员变量是完全合法的，对话框实例在超出范围之前不会被垃圾收集，而不仅仅是因为你调用了 dispose 。

我会稍微偏爱一个解决方案，在该解决方案中定义一个带有签名的事件处理程序接口

someThingHappened(ClassA toThisObject)，使您的主窗体或任何可能感兴趣的 ClassA 事物实现该接口，从而可以在对话框可见之前将侦听器添加到对话框。

这样，您将稍微放松对话框和主窗体之间的耦合。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-07T18:06:44.887

我认为这不会`dispose()`为垃圾收集设置 JDialog，而只是释放资源。该对话框仍然可以根据[Window API](http://docs.oracle.com/javase/7/docs/api/java/awt/Window.html)重复使用（因为 JDialog 从 Window 继承了此方法）：

> 释放此 Window、其子组件及其所有子组件使用的所有本机屏幕资源。也就是说，这些组件的资源将被销毁，它们消耗的任何内存都将返回给操作系统，并且它们将被标记为不可显示。
> 
> 通过随后调用 pack 或 show 重建本机资源，可以使 Window 及其子组件再次可显示。重新创建的 Window 及其子组件的状态将与这些对象在 Window 被释放时的状态相同（不考虑这些操作之间的其他修改）。
> 
> 注意：当 Java 虚拟机 (VM) 中的最后一个可显示窗口被处理掉时，VM 可能会终止。有关详细信息，请参阅 AWT 线程问题。

只要仍然存在对 JDialog 对象的有效*可达*引用，它就不会被垃圾回收。我认为处理对话框的成本是您的代码将需要花费（非常）一点时间来重新创建资源。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-08T22:45:06.320

`IDisposable`拥有一个可以在`Dispose`调用之后使用的包含属性或方法来返回有关在调用之前发生的事情的信息是完全合理和适当的`Dispose`。与其盲目地强制规定已处置对象的任何和所有方法都应抛出`ObjectDisposedException`，不如考虑哪些方法和属性对已处置对象有意义或没有意义。尝试访问已处置的对象应`ObjectDisposedException` *优先于重新获取已释放的资源或逃避由于处置而发生的其他一些异常*。如果方法或属性访问可以在没有任何释放资源的情况下成功，则通常应该允许这样做。

# jsf-2 - 有什么方法可以识别对使用 java 创建的 Web 应用程序的请求来自同一个客户端？

> ID：10056888
> 
> 赞同：2
> 
> 时间：2012-04-07T17:55:51.907
> 
> 标签：jsf-2, glassfish

如果用户在应用程序中有一些活动，当用户下次返回应用程序时，有没有办法找出请求来自同一台 PC？
问题的另一方面是保护应用程序免受机器人攻击。

以防万一解决方案依赖于 AS，我对部署在 Glassfish v3.x 上的 Web 应用程序特别感兴趣。我的应用程序是用 JSF2 创建的，但我认为这并不重要。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-07T18:01:56.543

您可以将包含唯一令牌的 cookie 写入浏览器，并将其存储在数据库的用户配置文件中。当用户再次登录时，将唯一令牌传递给服务器并与存储在数据库中用户配置文件中的令牌进行比较。

我只是做了一些阅读，似乎获取 MAC 地址是不可能的：[如何从 HttpServlet 获取客户端的 MAC 地址？](https://stackoverflow.com/questions/839973/how-to-get-a-clients-mac-address-from-httpservlet)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-07T18:04:46.513

注意：可靠识别返回用户的唯一方法是通过身份验证。使用 cookie，您实际上是在检查来自同一浏览器的返回连接。

如果用户清除 cookie、重新安装浏览器、使用其他浏览器或使用其他计算机，您的 Web 应用程序很可能不会记住它们。话虽如此，这是一种无需身份验证即可识别返回用户的方法：

[HttpSession](http://docs.oracle.com/cd/E17802_01/webservices/webservices/docs/1.6/api/javax/servlet/http/HttpSession.html)是检测返回用户的一种方法。当用户在您的 Web 应用程序上有活动时，您可以存储唯一标识该用户的密钥。这会在他们的浏览器中放置一个 cookie，以便当他们返回时，您的 Web 应用程序可以从会话中提取该数据。

**从 HttpSession javadocs：**

> 提供一种在多个页面请求或访问网站时识别用户并存储有关该用户的信息的方法。

**记录用户活动：**

```
ArrayList activity = new ArrayList<String>();

activity = (ArrayList<String>) request.getSession().getAttribute("activity");

if(activity == null)
    activity = new ArrayList<String();

activity.add("Searched for parts for Ford Thunderbird");
request.getSession().setAttribute("activity", activity); 
```

**显示用户活动：**

```
ArrayList activity = new ArrayList<String>();
activity = (ArrayList<String>) request.getSession().getAttribute("activity");

if(activity == null) {
    log.info("No activity to display. New user");

} else {
    for(String a : activity) {
        log.info(a);
    }
} 
```

**在 web.xml 中设置超时：**

```
<!-- Define the default session timeout for your application,
     in minutes.  From a servlet or JSP page, you can modify
     the timeout for a particular session dynamically by using
     HttpSession.getMaxInactiveInterval(). -->

<session-config>
  <session-timeout>30</session-timeout>    <!-- 30 minutes -->
</session-config> 
```

# c - C程序：在编译时长度未知时设置字符串数组

> ID：10056891
> 
> 赞同：0
> 
> 时间：2012-04-07T17:56:29.130
> 
> 标签：c

我正在尝试调整此处“数组接口示例”部分中显示的示例代码，

[http://orclib.sourceforge.net/doc/html/group_g_bind.html *_* _](http://orclib.sourceforge.net/doc/html/group__g__bind.html)

他们在其中放置一个字符串数组`tab_str`, 以`OCI_BindArrayOfStrings`使用：

```
char tab_str[1000][21];
...
OCI_BindArrayOfStrings(st, ":s", (char*) tab_str, 20, 0); 
```

问题是，上面的例子在编译时就知道数组长度，而我必须在程序运行时从数据库中下载这个长度。所以我想创建一个字符串数组，调用`my_tab_str`并将它放在下面的代码行中：

```
OCI_BindArrayOfStrings(st, ":s", (char*) my_tab_str, 20, 0); 
```

我的问题是如何设置`my_tab_str`？这是我的代码（使用编译`gcc -std=C89`）：

```
int i, arraysize;
char person_name[20] = "";
char * my_tab_str;
...
strncpy(person_name, "John Smith", 19);
arraysize = <this value is downloaded from database>;
...
my_tab_str = malloc( arraysize * sizeof(char) * (strlen(person_name)+1) );
for(i=0;i<arraysize;i++) {
    strncpy( my_tab_str[i], person_name, strlen(person_name) );
} 
```

目标是将“John Smith”（例如 10 个字节）加上一个空终止字符（我认为它是由编译器自动添加的）到 strings 数组的每个元素中`my_tab_str`。

我收到编译警告：`warning: passing argument 1 of 'strncpy' makes pointer from integer without a cast /usr/include/string.h:131: note: expected 'char * __restrict__' but argument is of type 'char'`

请注意，`OCI_BindArrayOfStrings`此处描述了该功能：

[http://orclib.sourceforge.net/doc/html/group_g_bind.html#ga502cd4785691b17955f5d99276e48884 *_* _](http://orclib.sourceforge.net/doc/html/group__g__bind.html#ga502cd4785691b17955f5d99276e48884)

并期望一个字符串数组作为参数。有关示例实现，请参阅上面第一个链接中的示例代码。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-07T18:03:09.023

对于字符串数组，您需要将 my_tab_str 声明为`char**`，然后为其分配内存。

```
my_tab_str = malloc(ROWS * sizeof(char*)); //ROW is no of strings 
```

然后，

```
for(int i=0;i<ROWS;i++)
my_tab_str[i] = malloc(COLUMNS * sizeof(char)); //COLUMN is the size for each string. 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-07T18:02:42.143

~~从您的帖子中，该函数期望作为参数的内容并不完全清楚。我假设它是一个`char **`.~~

在这种情况下，您需要执行以下操作：

```
// Allocate an array of pointers
char **my_tab_str = calloc(arraysize, sizeof(*my_tab_str));

// Allocate room for each string in turn
for (int i = 0; i < arraysize; i++) {
    // person_name comes from somewhere
    const int len = strlen(person_name);
    my_tab_str[i] = calloc(len+1, sizeof(*my_tab_str[i]));
    strncpy(my_tab_str[i], person_name, len);
} 
```

 ~~**更新**

好的，所以看起来该函数需要 a `char *`，它指向一个连续的一维数组，其中包含所有连接的字符串，以及字符串的数量和每个字符串的长度。在这种情况下，您需要执行以下操作：

```
const int len = strlen(person_name);

// Big 1D array
char *my_tab_str = calloc(arraysize*(len+1), sizeof(*my_tab_str));

// Put each string into the 1D array, at regular intervals
for (int i = 0; i < arraysize; i++) {
    strncpy(&my_tab_str[i*(len+1)], person_name, len);
} 
```

不过，这只是一个猜测，因为该功能确实没有得到很好的记录。

显然，在某些时候，您还需要一些清理代码来仔细`free`处理所有内容。

如果你想非常小心，你应该添加错误处理代码来检查每个`calloc`for的结果`NULL`，但这会使示例混乱，所以我省略了它。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-07T18:11:00.880

看来，通过字符串，它们的意思是`unsigned char *`. 您想要一个这些数组，并且它们使用（有些不寻常的）约定，即字符串数组是一个连续的内存块，因此您将其声明为：

```
unsigned char *my_tab_str;
size_t namesize = 20; // Better still, use a #define so 20 isn't a mysterious magic number 
```

你初始化它如下：

```
my_tab_str = malloc( arraysize * sizeof( unsigned char *) * (namesize+1) ); // +1 for the null

for( int i = 0; i < arraysize; ++i )
    {
    strncpy( &my_tab_str[i*(namesize+1)], person_name, namesize );
    } 
```

第一行 (malloc) 为`arraysize`字符串分配足够的内存，每个字符串都有空间`namesize`，外加一个空值。`strncpy`复制到它们每个中的最大 字节数`namesize`，后跟一个空值 ('\0')。每次我们传递一个指向下一个位置的指针，即`namesize+1`超出前一个位置的字节。~~

# java - 如何在 javac/java 类路径中添加多个 .jar 文件 - 适用于 Debian Linux

> ID：10056895
> 
> 赞同：11
> 
> 时间：2012-04-07T17:56:56.417
> 
> 标签：java, linux, debian

如何在 javac/java 类路径中添加多个 .jar 文件 - 对于 Debian Linux。

我在用，

> javac -cp a.jar folder1\folder2\b.jar Test.java

但是，它给出了 Invalid flag 错误。谁能帮我编译和运行它？

* * *

## 回答 #1

> 赞同：34
> 
> 时间：2012-04-07T17:57:54.237

用冒号分隔类路径条目`:`，而不是空格。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-08T21:33:59.103

此外，您应该使用 '/' 而不是 '\' 作为目录分隔符。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2018-04-24T09:18:47.233

使用 Powershell 时还要使用引号 " 来指定类路径：

```
 javac -cp ".;folder1\folder2\b.jar" Test.java 
```

# windows-7 - 重启后如何停止在 Windows 7 中安装更新？

> ID：10056896
> 
> 赞同：1
> 
> 时间：2012-04-07T17:56:57.353
> 
> 标签：windows-7, shutdown, updates

我的 Windows 7 在关机时开始安装更新。在我错误地手动强制关机后，重新启动后我有一条消息：“正在安装更新：42 个中的 10 个”，即继续安装更新。如果有什么方法可以停止这个过程？比如，以保护模式或类似的方式启动 Windows，就像在 Windows XP 中可用的那样？我不是在问将来如何禁用自动更新安装，而是在问如何在更新过程已经启动后停止它。

谢谢， 科斯蒂亚

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-03T14:05:36.727

安装过程开始后无法终止，只能长按电源按钮并在重新启动后禁用自动。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-11-03T16:16:57.053

# 解决方案 ！

1）使用以下代码创建一个**.bat**（**CMD**）文件：

```
sc stop wuauserv 
```

2) 将该文件放入 STARTUP 文件夹 ( **`%appdata%\Microsoft\Windows\Start Menu\Programs\Startup`**)

# php - android php发布问题

> ID：10056897
> 
> 赞同：0
> 
> 时间：2012-04-07T17:57:06.210
> 
> 标签：php, android

我目前正在开发一个 android 应用程序，该应用程序通过我在本地运行的 php 脚本检索 mysql 数据，但我不断收到 httpconnection 错误，指出它无法连接到脚本（http://127.0.0.1/regions .php) 我在我的本地服务器上运行。代码如下：

```
import org.json.JSONArray;
import org.json.JSONException;
import org.json.JSONObject;
import org.apache.*;
import org.apache.http.*;
import org.apache.http.client.HttpClient;
import org.apache.http.client.entity.UrlEncodedFormEntity;
import org.apache.http.client.methods.HttpPost;
import org.apache.http.impl.client.DefaultHttpClient;

import android.app.Activity;
import android.content.Context;
import android.os.Bundle;
import android.util.Log;
import android.view.Window;
import android.widget.*;

import java.io.*;
import java.util.ArrayList;
import java.util.List;

import com.paypal.android.MEP.*;

public class ShoppingCartActivity extends Activity {

    JSONArray jArray;
    List<NameValuePair> nameValuePairs = new ArrayList<NameValuePair>();

    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        requestWindowFeature(Window.FEATURE_NO_TITLE);      
        setContentView(R.layout.main);
        InputStream is = null;
        StringBuilder sb = null;
        String result = null;

        //http post
        try{
            HttpClient httpclient = new DefaultHttpClient();
            HttpPost httppost = new HttpPost("http://127.0.0.1/regions.php");
            httppost.setEntity(new UrlEncodedFormEntity(nameValuePairs));
            HttpResponse response = httpclient.execute(httppost);
            HttpEntity entity = response.getEntity();
            is = entity.getContent();//this holds returned content
        }catch(Exception e){
            Log.e("log_tag", "Error in http connection"+e.toString());
        }

        //convert response to string
        try{
            BufferedReader reader = new BufferedReader(new InputStreamReader(is,"iso-8859-1"),8);
            sb = new StringBuilder();
            sb.append(reader.readLine() + "\n");
            String line="0";

            while ((line = reader.readLine()) != null) {
                sb.append(line + "\n");
            }

            is.close();
            result=sb.toString();

            Toast.makeText(getApplicationContext(), result.toString(), Toast.LENGTH_LONG).show();

        }catch(Exception e){
            Log.e("log_tag", "Error converting result "+e.toString());
        }

        //parsing data
        int reg_id;
        String reg_name;
        try{
        jArray = new JSONArray(result);
        JSONObject json_data=null;

        for(int i=0;i<jArray.length();i++){
                json_data = jArray.getJSONObject(i);
               reg_id=json_data.getInt("RegionID");
               reg_name=json_data.getString("RegionName");
        }

        }catch(JSONException e1){
            Toast.makeText(getBaseContext(), "No Regions Found", Toast.LENGTH_LONG).show();
        }catch (ParseException e1){
            e1.printStackTrace();
        }
    }

} 
```

* * *

这是我要发布到的 php 脚本：

```
<?php
$conn = mysql_connect("127.0.0.1","",""); 
mysql_select_db("thebigchoice") or die(mysql_error()); 

$query = mysql_query("SELECT * FROM REGIONS WHERE RegionName LIKE 's%'", $conn) or die(mysql_error());

while($row = mysql_fetch_assoc($query)) {

 $data[] = $row;

   } 

print json_encode($data); 

mysql_close($conn); 

?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-07T17:59:15.837

尝试使用`10.0.2.2`而不是`127.0.0.1`（在 android 代码中）这里的解释：[网络地址](http://developer.android.com/guide/developing/devices/emulator.html#networkaddresses)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-07T18:02:35.577

您正在尝试访问本地主机，但这是计算机的本地主机，而不是 Android 设备。如果您在真实设备上运行代码，该设备需要与计算机位于同一网络中，并且您应该将主机更改为您机器的网络 ip，而不是 localhost ( `127.0.0.1`) 的 ip。

如果您在模拟器上运行，那么正如@enrmarc 所写，您可以尝试使用这个特殊的 IP 来访问桌面的本地主机。

`127.0.0.1`->`10.0.2.2`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-07T18:03:23.127

在android代码中，`HttpPost("http://127.0.0.1/regions.php");`可能无效

因为开发机器和测试设备的本地主机是不同的。

您可以将开发机和测试设备连接到网络并获取开发机的网络地址进行测试

或者将php脚本上传到免费主机进行测试

快乐编码：D

# openmpi - 你如何检查 OpenMPI 的版本？

> ID：10056898
> 
> 赞同：33
> 
> 时间：2012-04-07T17:57:11.927
> 
> 标签：openmpi

我正在具有 OpenMPI 的服务器上编译我的代码，但我需要知道我使用的是哪个版本，以便阅读正确的文档。是否有一个常量`<mpi.h>`可以打印以显示我的当前版本？

* * *

## 回答 #1

> 赞同：38
> 
> 时间：2018-01-26T12:32:05.310

如[本教程](http://mpitutorial.com/tutorials/installing-mpich2/)中所述，您还可以检查运行命令的 MPI 版本：

```
mpiexec --version 
```

或者

```
mpirun --version 
```

在您的终端中。

* * *

## 回答 #2

> 赞同：24
> 
> 时间：2012-04-07T18:02:29.027

使用 OpenMPI，最简单的方法是运行`ompi_info`；前几行将为您提供所需的信息。在您自己的代码中，如果您不介意特定于 OpenMPI 的内容，您可以查看 mpi.h 中的 use `OMPI_MAJOR_VERSION`、`OMPI_MINOR_VERSION`和`OMPI_RELEASE_VERSION`。这显然不适用于 MPICH2 或其他 MPI 实现。

更标准的是，作为 MPI-3 的一部分，有一个名为[MPI_Get_library_version](https://www.open-mpi.org/doc/v3.1/man3/MPI_Get_library_version.3.php)的标准 MPI 例程，它在运行时为您提供详细的库信息。这足够小并且足够有用，新版本的 MPI 实现将很快拥有它——例如它在 OpenMPI 1.7 开发主干中——但它现在并不能真正帮助你。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-04-07T18:03:05.130

我不熟悉 OpenMPI，但 MPI 有一个函数 MPI_Get_Version，请检查你的 mpi.h 以获得类似的函数。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2020-08-06T20:44:05.973

您还可以获得编译器包装器（例如`mpicxx`/ `mpic++`/ `mpicc`/ `mpifort`）来自的 OpenMPI 版本：

```
mpicxx --showme:version 
```

如果（出于任何原因）您有不同版本的 MPI 编译器包装器和执行器，这将很有用。

（`mpicxx --showme`还会向您显示 MPI 的安装位置以及使用的编译器标志，请参阅[手册](https://www.open-mpi.org/doc/v4.0/man1/mpic++.1.php)了解更多信息。）

# google-chrome-extension - Chrome 扩展可选权限不会评估回调函数

> ID：10056902
> 
> 赞同：1
> 
> 时间：2012-04-07T17:57:31.170
> 
> 标签：google-chrome-extension

我在使用Chrome 扩展的[可选权限 API时遇到了问题。](http://code.google.com/chrome/extensions/permissions.html)在以下扩展的最小示例中，我希望脚本首先检查权限是否存在，如果不存在，则请求权限并修改令牌以说明权限存在。我通过扩展的选项页面实现了这一点，成功由一个从红色变为蓝色的正方形表示。失败由保持红色的方块表示。

有趣的是，脚本只有在我在 Chrome 的 Inspector 中设置断点并逐步执行时才有效。当扩展程序在没有断点的情况下运行时，它无法工作（甚至不会提示权限）。我将此作为[Chrome 的错误](http://code.google.com/p/chromium/issues/detail?id=122449)提交，但我真的想知道我是否做错了什么。

清单.json

```
{
"description": "Permissions Tester",
"name": "Permissions Tester",
"options_page": "options.html",

"optional_permissions": [ "http://api.labs.crossref.org/" ],

"version": "1.0.0"
} 
```

选项.html

```
<script>
function setCrossrefPermission() {
    var perm;

    chrome.permissions.contains({
        origins: ['http://api.labs.crossref.org/']
    }, function(result) {
        if(!result) {
            chrome.permissions.request({
                origins: ['http://api.labs.crossref.org/']
            }, function(granted) {
                perm = granted;
            });
        } else {
            perm = true;
        }
    });

    return perm;
}

function hitIt() {
    if( setCrossrefPermission() ) document.getElementById("notify").style.backgroundColor = "blue";
}
</script>

<html>
<body>

<div style="width: 100px; height:100px; background-color:red;" id="notify"></div>
<input type="submit" id="button" onclick="hitIt(); return false;" value="Accept Permission" />

</body>
</html> 
```

[我在这里](http://web.missouri.edu/~mdmnq5/comp/perm_test.crx)将其作为 CRX 上传，以便于安装和尝试。或者您可以简单地加载上面的解压扩展。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-07T18:57:31.917

`chrome.permissions.request`不幸的是，您无法调用`chrome.permissions.contains`回调函数，因为它不在正确的上下文中。此外，您实际上也不需要事先检查权限。

```
function setCrossrefPermission() {
    chrome.permissions.request({
      origins: ['http://api.labs.crossref.org/']
    }, function(granted) {
      return granted;
    });
} 
```

对于已接受的权限提示，不会显示警告消息。

# php - PHP函数，为每个适配器返回（在Windows中）Rx和Tx？

> ID：10056903
> 
> 赞同：1
> 
> 时间：2012-04-07T17:57:34.697
> 
> 标签：php, debugging, function, networking

这应该为每个适配器（输出成对）返回 Rx 和 Tx 的原始值，只有适配器传输了多于零的数据。

```
<?php
//windows network usage testing
function win_netinfo(){
    ob_start();
    $wmi = new COM("Winmgmts://");
    $nets = $wmi->execquery("SELECT * FROM Win32_PerfRawData_Tcpip_NetworkInterface WHERE BytesSentPersec > 1");
        foreach ($nets as $net)
        {
            $net_txbytes = $net->BytesSentPersec;
            $net_rxbytes = $net->BytesReceivedPersec;
            if ($net_txbytes < 0) {
            $net_txbytes = $net->BytesTotalPersec - $net->BytesReceivedPersec;

            }
            if ($net_rxbytes < 0) {
            $net_rxbytes = $net->BytesTotalPersec - $net->BytesSentPersec;
            }
            return $net_txbytes . "</br>"; //When it RETURNS it only shows the FIRST value... :/ WHAT DO?
            }
}
echo win_netinfo();

?> 
```

输出应该是这样的：

```
21936313136
12345163517
13647613
87653467
546254
246247
87653642
24583462 
```

（对于每个适配器，每隔一行是 Rx 或 Tx）。

当前有效的代码：

```
<?php
    # Peport All Errors
    error_reporting(E_ALL);

    # Create Object
    $wmi = new COM("Winmgmts://");

    # Get net info
    $oss = $wmi->execquery("SELECT * FROM Win32_PerfRawData_Tcpip_NetworkInterface");

    # Show net info
    foreach($oss as $os)
    {
        echo "BytesReceivedPerSec: " . $os->BytesReceivedPerSec . "<br />";
        echo "BytesSentPerSec: " . $os->BytesSentPerSec . "<br />";
        echo "BytesTotalPerSec: " . $os->BytesTotalPerSec . "<br />";
        echo "Caption: " . $os->Caption . "<br />";
        echo "CurrentBandwidth: " . $os->CurrentBandwidth . "<br />";
        echo "Description: " . $os->Description . "<br />";    
        echo "Frequency_Object: " . $os->Frequency_Object . " kb<br />";
        echo "Frequency_PerfTime: " . $os->Frequency_PerfTime . "<br />";
        echo "Frequency_Sys100NS: " . $os->Frequency_Sys100NS . "<br />";
        echo "Name: " . $os->Name . "<br />";
        echo "OutputQueueLength: " . $os->OutputQueueLength . "<br />";
        echo "PacketsOutboundDiscarded: " . $os->PacketsOutboundDiscarded . "<br />";
        echo "PacketsOutboundErrors: " . $os->PacketsOutboundErrors . "<br />";
        echo "PacketsReceivedNonUnicastPerSec: " . $os->PacketsReceivedNonUnicastPerSec . "<br />";
        echo "PacketsReceivedPerSec: " . $os->PacketsReceivedPerSec . "<br />";
        echo "PacketsReceivedUnicastPerSec: " . $os->PacketsReceivedUnicastPerSec . "<br />";
        echo "PacketsReceivedUnknown: " . $os->PacketsReceivedUnknown . "<br />";
        echo "PacketsSentNonUnicastPerSec: " . $os->PacketsSentNonUnicastPerSec . "<br />";
        echo "PacketsSentPerSec: " . $os->PacketsSentPerSec . "<br />";
        echo "PacketsSentUnicastPerSec: " . $os->PacketsSentUnicastPerSec . "<br />";
        echo "Timestamp_Object: " . $os->Timestamp_Object . "<br />";
        echo "Timestamp_PerfTime: " . $os->Timestamp_PerfTime . "<br />";
        echo "Timestamp_Sys100NS: " . $os->Timestamp_Sys100NS . "<br />";   
        echo "<br /><br /><br />";     
    }

?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-07T18:27:55.737

您在第一次迭代后返回，因此只有一个结果，下面是我将如何通过创建一个数组并返回它来做到这一点：

```
<?php
//windows network usage testing
function win_netinfo(){
    $wmi = new COM("Winmgmts://");
    $nets = $wmi->execquery("SELECT * FROM Win32_PerfRawData_Tcpip_NetworkInterface WHERE BytesSentPersec > 1");
    $return=array();
    $i=0;
    foreach ($nets as $net){

        $return[$i]['name']=$net->Name;

        if ($net->BytesSentPersec < 0) {
            $return[$i]['net_txbytes'] = $net->BytesTotalPersec - $net->BytesReceivedPersec;
        }else{
            $return[$i]['net_txbytes'] = $net->BytesSentPersec;
        }

        if ($net->BytesReceivedPersec < 0) {
            $return[$i]['net_rxbytes'] = $net->BytesTotalPersec - $net->BytesSentPersec;
        }else{
            $return[$i]['net_rxbytes'] = $net->BytesReceivedPersec;
        }
        $i++;
    }
    return $return;
}

$adapters=win_netinfo();
/*Array
Array
(
    [0] => Array
        (
            [name] => VirtualBox Host-Only Ethernet Adapter
            [net_txbytes] => 5095956
            [net_rxbytes] => 0
        )

    [1] => Array
        (
            [name] => Belkin 54g Wireless USB Network Adapter
            [net_txbytes] => 532337967
            [net_rxbytes] => 5252455518
        )

)
*/
?> 
```

并输出数组，如下所示：

```
<?php
foreach($adapters as $adapter){
    echo '<p>'.$adapter['name'].' - Sent: '.$adapter['net_txbytes'].' bytes - Received: '.$adapter['net_rxbytes'].' bytes</p>';
}
?> 
```

# google-app-engine - AppEngine 事务

> ID：10056905
> 
> 赞同：0
> 
> 时间：2012-04-07T17:57:55.103
> 
> 标签：google-app-engine, google-cloud-datastore

我必须向 PropertyList 添加 50 个实体的值。我必须确保没有其他代码同时更改特定实体的 PropertyList。让一个大交易改变所有 50 个实体，还是让 50 个小交易只改变一个实体更好？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-07T18:52:55.577

如果您确实需要您的帖子所说的内容（对许多实体的更新，并且仅在每个实体上进行交易安全），那么您可以使用许多小交易。

如果您必须保证在此期间没有更改许多实体，您应该使用一个事务，您的所有实体都在同一个实体组中。请注意，实体组的推荐更新限制为每秒一次。如果您确实必须以事务方式更新 50 个实体，并且由于某种原因不能将它们放入同一个实体组中，您应该考虑重新组织您的数据。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-04-29T22:02:54.243

这个要求很可能意味着您可能要重新考虑您的设计。

目前您正在解决“如何实现这个”问题。

也许您想分享您的原始问题，以便更好地解决“这就是它应该如何工作”的问题

期待。

-J

# javascript - 是否可以在没有页面回发的情况下更改 iframe 的来源？

> ID：10056908
> 
> 赞同：1
> 
> 时间：2012-04-07T17:58:26.387
> 
> 标签：javascript, asp.net, iframe, asp.net-ajax, src

我只是想知道，是否可以在没有页面回发的情况下更改 iframe 的来源？如果是，那么如何。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-07T18:27:19.327

如果我的问题是正确的，答案是否定的。

如果您要更改 iframe 的来源，则会在其中加载一个新页面。

如果您的标记是

```
<iframe id='myframe' src='http://www.abc.com' ></iframe> 
```

你也是，

```
document.getElementById('myframe').src = 'http://www.xyz.com'; 
```

它将重新加载并打开 xyz.com。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-07T18:20:46.847

使用 jquery.attr() 方法，您可以更改 src 参数。

```
$("#myifrm").attr("src","your url here"); 
```

要查看工作示例，请查看以下内容：http: [//jsfiddle.net/YCDtj/](http://jsfiddle.net/YCDtj/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-07T18:49:32.327

第一次加载： $(document).ready(function() { var myIframe = document.getElementById('yourIFrameID');

```
if(myIframe != undefined || myIframe != null)
myIframe.src = "newSource";
}); 
```

并从您想要的任何地方调用以下 setIFrameSrc() 函数。

```
function setIFrameSrc(newURL)
{
var myIframe = document.getElementById('yourIFrameID'); 

if(myIframe != undefined || myIframe != null)
myIframe.src = newURL;

} 
```

# c++ - 异常处理 - set_unexpected() 无法调用

> ID：10056909
> 
> 赞同：2
> 
> 时间：2012-04-07T17:58:27.123
> 
> 标签：c++

```
#include "iostream"
#include "conio.h"
#include "exception"
#include "cstdlib"
using namespace std;

void myunexpected () 
{
    cerr << "unexpected called\n";
    throw 0;     // throws int (in exception-specification)
}

void myfunction () throw (int) 
{
    throw 'x';   // throws char (not in exception-specification)
}

int main (void) 
{
    set_unexpected (myunexpected);
   try 
   {
      myfunction();
   }
   catch (int) { cerr << "caught int\n"; }
   catch (...) { cerr << "caught other exception (non-compliant compiler?)\n"; }
   getch();
   return 0;
} 
```

> > 输出（在 Visual Studio 2008 上执行时）：捕获其他异常（不兼容的编译器？）
> > 
> > 但是，我期望输出是：
> > 
> > 意外调用
> > 
> > 捕捉到 int
> > 
> > 注意：我在 Visual Studio 2008 上执行了这个程序。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-07T18:07:03.373

是的，根据标准，输出应该是^([#1])：

> 出乎意料的调用
> 被捕获的int

gcc 给出了**[准确的结果](http://ideone.com/NRtDV)**。

请注意，MSVC 在处理异常规范方面是出了名的错误。异常规范被认为是**[失败的实验](http://www.gotw.ca/publications/mill22.htm)**。
AFAIK，MSVC 不实现异常规范，除了空的（`throw()`/ `nothrow`）

C++03 标准：

[#1] **15.5.2`unexpected()`函数[except.unexpected]**

> 该`unexpected()`函数不应返回，但它可以抛出（或重新抛出）异常。如果它抛出先前违反的异常规范允许的新异常，则搜索另一个处理程序将在调用其异常规范被违反的函数时继续......

# asymptotic-complexity - 确定渐近符号

> ID：10056911
> 
> 赞同：0
> 
> 时间：2012-04-07T17:58:34.050
> 
> 标签：asymptotic-complexity

我有一组问题，我得到一个 f(n) 和 g(n)，我应该确定 f(n) 在哪里是 O(g(n))、Ω(g(n)) 或 Θ( g(n))

而且我还必须确定正确关系的 c(s) 和 n0。

我该如何着手解决这样的问题？

这是我遇到的问题的一个例子

f(n)= lg(n^2) g(n)=n lg(n)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-07T18:05:43.500

您需要将 f(n) 简化为易于与 g(n) 进行比较的形式。对于您的情况：

> f(n) = log(n ² )
> f(n) = 2 log(n)

对于该示例，这应该足以回答您的问题-该过程对于该集合的其余部分几乎相同。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-08T12:12:58.410

您可以使用限制执行此操作，如下所示

极限，因为 n 趋于无穷大（对不起，我不知道如何在这里产生数学方程） f(n)/g(n)

如果得到的值为

**一个常数**然后`f(n) = Θ(g(n))`

**那么**无穷大**`f(n) = Ω(g(n))`**

 ****那么**零**`f(n)= O(g(n))`****

# php - 正则表达式匹配“foo/bar”而不是“foobar”

> ID：10056918
> 
> 赞同：0
> 
> 时间：2012-04-07T17:59:09.760
> 
> 标签：php, regex

我正在寻找一个正则表达式，我可以在我的标记器中使用它来编译配置文件。这是 php 中一个类的一个片段：

```
private $token = array(
    "PATH" => "([a-zA-Z\_-]+\.|\*\.)+([a-zA-Z\_-]+|\*)",
    "MIXED" => "[a-zA-Z0-9-_\(\)\/]{2,}",
    "STRING" => "[a-zA-Z-_]{2,}"
);

private function getToken($string) {
    foreach($this->token as $name => $pattern) {
        preg_match("/^".$pattern."/", $string, $match);
        if(!empty($match))
            return array($name, $match[0]);
    }

    return false;
} 
```

“MIXED”应该匹配“foo/bar”而不是“foobar”，“STRING”应该匹配“foobar”而不是“foo/bar”。目前“foobar”和“foo/bar”是“混合”的。

我如何以单一模式写下这个“AND NOT”？

谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-07T18:25:46.390

此模式将匹配包含至少一个斜杠的任何字母、数字、下划线、连字符和斜杠序列：

```
[a-zA-Z0-9-_/]*\/[a-zA-Z0-9-_/]* 
```

因此，这让您大致了解如何`abc`在匹配时拒绝令牌`ab/c`。这与区分浮点常量和整数常量非常相似。

您可能应该将输入`foo/bar(255)`标记为四个标记：`foo/bar` `(` `255`和`)`.

否则执行这个斜杠要求很复杂。天真的方式意味着`MIXED`可能是这样的：

```
foo(255/255)
foo(/) 
```

甚至：

```
)/- 
```

只是因为它在某处包含斜线，不一定在您想要的位置。

明确您的要求。

# c# - RichTextBox 图片问题

> ID：10056919
> 
> 赞同：0
> 
> 时间：2012-04-07T17:59:10.383
> 
> 标签：c#, .net, image, bitmap, richtextbox

我有 2 个 RichTextBoxes。他们所做的只是将值从一个传递到另一个。

因此，如果您在一个文本框中写了一些东西，请按 Enter，它会将其传递给另一个文本框。

```
richTextBox1.Text += richTextBox2.Text; 
```

当我粘贴图像并将其发送到另一个文本框时，图像只是被一个空格替换。

任何想法如何处理这个？

PS我尝试了来自互联网的文件和来自我的计算机的文件。都没有工作。谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-07T18:12:34.997

该`Text`属性仅处理文本。尝试使用该`Rtf`属性，因为它应该包含所有格式和图像。

# sql - xp_cmdshell 的单行替代方案？我尝试了几件事

> ID：10056924
> 
> 赞同：2
> 
> 时间：2012-04-07T17:59:56.593
> 
> 标签：sql, sql-server, sql-server-2008, tsql, sql-server-2000

您好 Microsoft SQL Server 大师，

好吧，我有一个 Microsoft SQL Server 2000，如下所述：

```
Microsoft SQL Server  2000 - 8.00.2039 (Intel X86) 
May  3 2005 23:18:38 
Copyright (c) 1988-2003 Microsoft Corporation
Desktop Engine on Windows NT 5.2 (Build 3790: Service Pack 2) 
```

我需要从这个 Microsoft SQL Server 执行操作系统命令，我使用下面的查询检查了我是否具有系统管理员权限，它返回“1”，这确认了我的权限。

```
SELECT IS_SRVROLEMEMBER('sysadmin', 'sa'); 
```

我尝试了传统的 xp_cmdshell 并没有发生任何事情，只是为了确保它正常工作，我尝试了著名的：

```
EXEC xp_cmdshell 'dir c:\'; EXEC master.dbo.xp_cmdshell 'dir c:\';
EXEC master..xp_cmdshell "dir c:\"; 
```

并且都没有返回任何内容，这让我相信 xp_cmdshell 不可用。我知道 xp_cmdshell 在 Microsoft SQL Server 2005 中默认禁用，但在 2000 中没有，无论如何，我尝试以相同的方式重新启用它，但它失败了。

我查看了互联网，发现这种方法可以为 Microsoft SQL Server 2000 重新启用 xp_cmdshell：

```
exec sp_addextendedproc 'xp_cmdshell', 'xplog70.dll'

exec sp_addextendedproc xp_cmdshell, 'C:\Program Files\Microsoft SQL Server\MSSQL\Binn\xplog70.dll' 
```

但是，它仍然不起作用。我发现另一篇文章告诉有时管理员会删除这些文件，我认为这可能是我的情况，文章说如果它被删除，我可以执行“xp_msver”，在我的情况下它也不会返回任何内容。

参考： http: [//support.microsoft.com/kb/891984](http://support.microsoft.com/kb/891984)

我还尝试了我在互联网上找到的这个查询，以查看 xp_cmdshell 是否存在并且它没有返回任何内容（但这可能是我奇怪的 SQL 客户端的限制，请参见下文）。

```
if exists (select * from dbo.sysobjects where id = object_id(N’[dbo].[ xp_cmdshell]‘) and OBJECTPROPERTY(id, N’IsExtendedProc’) = 1); 
```

所以，我真的遇到了麻烦，我在 Google 进行了研究，发现了潜在的解决方案，例如 Job agent、SSIS 包、CLR 存储过程、sp_OACreate（和朋友）和 SQLCMD，但没有任何效果。也许我做错了，但我的另一个限制是我只能从一个跳转框（Linux）访问这个 Microsoft SQL Server 2000，它有一个非常奇怪的 sql-server 客户端，不接受多行查询，因此，我无法成功尝试以下潜在的解决方案：

1#工作代理

```
DECLARE @jobID uniqueidentifier, @cmd varchar(1000) 

SET @cmd = 'netstat -na > c:\connections.txt'

EXEC msdb.dbo.sp_add_job @job_name = '_tmp_MakeDirectory', @enabled  = 1, @start_step_id = 1, @owner_login_name='sa', @job_id = @jobID OUTPUT 

EXEC msdb.dbo.sp_add_jobstep @job_id = @jobID, @step_name = 'Create Backup Folder', @step_id = 1, @subsystem = 'CMDEXEC', @command = @cmd

EXEC msdb.dbo.sp_add_jobserver @job_id = @jobID

EXEC msdb.dbo.sp_start_job @job_id = @jobID, @output_flag = 0 

WAITFOR DELAY '000:00:05' -- Give the job a chance to complete

IF EXISTS (SELECT name FROM msdb.dbo.sysjobs WHERE name = '_tmp_MakeDirectory')
BEGIN
     EXEC msdb.dbo.sp_delete_job @job_name = '_tmp_MakeDirectory'
END 
```

2#SQLCMD

```
CREATE PROCEDURE SQLCMD_TEST
AS
    !!MKDIR "netstat -na > c:\connections.txt"
    :OUT "C:\TEST\test.TXT"
    SELECT @@VERSION AS 'SERVER VERSION'
    !!DIR
GO
    SELECT @@SERVERNAME AS 'SERVER NAME'
GO 

EXEC SQLCMD_TEST 
```

不幸的是，我没有任何其他方法可以访问此 Microsoft SQL Server，我知道这不是最好的方法，但它就是这样，我无能为力。因此，我需要一个解决方案来在具有所有这些限制的 Microsoft SQL Server 2000 上执行操作系统命令。有人可以为单行查询移植上述两种方法中的任何一种吗？

非常欢迎任何其他带有示例的建议。

非常感谢。

问候。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-08T01:45:57.100

在 CLR 支持出现之前，我曾经使用 xp_cmdshell。不幸的是，您的版本远离 CLR 支持 (SQL Server 2005) 和 system.io 命名空间。但是，您可以创建自己的扩展存储过程，该过程可以访问文件系统并创建目录。有关更多信息，请参见此处：http: [//www.devarticles.com/c/a/SQL-Server/Extended-Stored-Procedures-Intro-And-10-Cool-Examples/](http://www.devarticles.com/c/a/SQL-Server/Extended-Stored-Procedures-Intro-And-10-Cool-Examples/)

顺便说一下，xp_cmdshell 是一个扩展存储过程。

# c# - Html 编码在 Chrome 中导致新行

> ID：10056925
> 
> 赞同：2
> 
> 时间：2012-04-07T18:00:00.627
> 
> 标签：c#, asp.net, html, asp.net-mvc, html-encode

在我的注册表单中，我使用 asp.net 不显眼的验证来检查用户名是否存在。如果发现冲突，我的 JsonResult 方法将返回以下内容：

```
This is already in use. How about \u003cstrong\u003efoo123\u003c/strong\u003e? 
```

我使用 Microsoft 的不显眼验证在我的视图中显示：

```
@Html.ValidationMessageFor(m => m.Username) 
```

这导致它在页面源中显示如下：

```
This is already in use. How about
<strong>foo123</strong>
? 
```

如您所见，文本分为三行。这在 Firefox 中不是问题，但在 Chrome 中，这些新行会导致显示的文本以与`<br />`. 我相信编码应该归咎于此 - 谁能解释为什么？这个问题有什么解决办法吗？

先感谢您。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-07T19:26:03.020

如果它们在实际页面上显示为带有换行符，那么我要做的第一件事就是检查`<strong/>`标签，看看是否有任何 CSS 将其定义为`display:block;`或覆盖`white-space`属性。

如果您关心 DOM 资源管理器的输出……这就是 Chrome 显示 DOM 树的方式。这三行都是单独的节点（2 个文本节点和 1 个元素节点），因此它们被视为相等。如果您检查我的答案的第一段，您会看到同样的事情。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-07T19:29:10.320

在没有尝试过的情况下，您可以尝试将字符串中的换行符替换为......什么都没有？

```
@Html.ValidationMessageFor(m => m.Username).ToString().Replace(Environment.NewLine, ""); 
```

感觉真的很奇怪，这将是问题，因为它只是在 Chrome 中，请仔细检查 CSS 规则。或者只是将验证消息包含在 p-tag 中？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-03-19T06:22:25.687

尝试使用 css 进行调整。

```
 \u003cdiv\u003e 
  This is already in use. How about \u003cstrong\u003efoo123\u003c/strong\u003e?
\u003c/div\u003e? 
```

我认为这是由于一些填充问题。上传生成的页面Html代码。

# android - 用于实现短信侦听器并提取消息正文和号码并通过 http 请求发送的 Android 应用

> ID：10056930
> 
> 赞同：0
> 
> 时间：2012-04-07T18:00:28.040
> 
> 标签：android

这是 .java 文件：包 sms1.android.pkg；导入 java.io.OutputStreamWriter；导入 java.net.HttpURLConnection；导入 java.net.URL；导入 java.net.URLConnection；导入 java.net.URLEncoder；导入 android.content.BroadcastReceiver；导入android.content.Context；导入android.content.Intent；导入android.os.Bundle；导入android.telephony.SmsMessage；

```
public class Sms1Activity extends BroadcastReceiver {
private static final String SMS_RECEIVED = "android.provider.Telephony.SMS_RECEIVED";
public void onReceive(Context _context, Intent _intent) {
    if (_intent.getAction().equals(SMS_RECEIVED)) {
    Bundle bundle = _intent.getExtras();
    if (bundle != null) {
    Object[] pdus = (Object[]) bundle.get("pdus");
    SmsMessage[] messages = new SmsMessage[pdus.length];
    for (int i = 0; i < pdus.length; i++)
    messages[i] = SmsMessage.createFromPdu((byte[]) pdus[i]);
    for (SmsMessage message : messages) {
    String msg = message.getMessageBody();
    String to = message.getOriginatingAddress();

    try {
    // Construct data 
    String data = URLEncoder.encode("test", "UTF-8") + "=" + URLEncoder.encode(msg, "UTF-8");
    data = data +"&"+ URLEncoder.encode("mobile", "UTF-8") + "=" + URLEncoder.encode(to, "UTF-8");  
    // Send data
    URL url = new URL("http://www.medibeep.in/xyz.php");
    URLConnection conn = url.openConnection();
    HttpURLConnection httpConnection = (HttpURLConnection)conn;
    conn.setDoOutput(true);
    OutputStreamWriter wr = new      OutputStreamWriter(httpConnection.getOutputStream());
    wr.write(data);
    wr.flush();
    wr.close();
} catch (Exception e) {
}
   }
    }
    }
    }
    } 
```

这是 .manifest 文件：

```
<uses-sdk android:minSdkVersion="8" />
<uses-permission android:name="android.permission.RECEIVE_SMS"/>
<uses-permission android:name="android.permission.INTERNET"/>

<application
    android:icon="@drawable/ic_launcher"
    android:label="@string/app_name" >
    <activity
        android:name="sms1.android.pkg.Sms1Activity"
        android:label="@string/app_name" >
        <intent-filter>
            <action android:name="android.intent.action.MAIN" />

            <category android:name="android.intent.category.LAUNCHER" />
        </intent-filter>
    </activity>
</application>

</manifest> 
```

.apk 文件崩溃没有错误。有人能帮我吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-07T18:04:03.280

`android.provider.Telephony.SMS_RECEIVED`在 AndroidManifest 中注册接收器为

```
 <receiver android:name=".Sms1Activity"> 
        <intent-filter> 
            <action android:name=
                "android.provider.Telephony.SMS_RECEIVED" /> 
        </intent-filter> 
    </receiver>

<uses-permission android:name="android.permission.RECEIVE_SMS"/> 
```

# mysql - 在 MySQL 中将转义的 UTF-16（JSON 实体）转换回正常的 UTF-8

> ID：10056932
> 
> 赞同：1
> 
> 时间：2012-04-07T18:00:48.700
> 
> 标签：mysql, utf-8, utf-16

我如何转换这样的数据

```
\u0441\u043e\u0432\u0440\u0435\u043c\u0435\u043d 
```

在 MySQL 中恢复正常的 UTF8？甚至可能吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-07T18:24:41.773

您可以通过将数据读取为二进制并将其转换为目标字符集来在 mysql 中的字符集之间进行转换，如下所示（如果您有一个名为的表`example`和一个名为的列`data`：

```
UPDATE `example` SET data=CONVERT(CONVERT(`data` USING binary) USING utf8); 
```

JSON \uXXXX 实体采用十六进制 UTF-16 编码，因此如果您有支持 utf-16 的 mysql 版本，则可以将它们转换为 utf-8。下面的功能向您展示了如何做到这一点。首先，您 unhex() 这些值，然后从 UTF-16 转换为 UTF-8：

```
DELIMITER @@
CREATE FUNCTION Unjson (instring TEXT CHARACTER SET utf8)
RETURNS TEXT CHARACTER SET utf8
BEGIN

  DECLARE i INT DEFAULT 0;
  DECLARE c VARCHAR(1);
  DECLARE utfstr TEXT CHARACTER SET utf16 DEFAULT "";
  DECLARE outstring TEXT CHARACTER SET utf8 DEFAULT "";

  WHILE i < CHAR_LENGTH(instring) DO
    SET i = i + 1;
    SET c = SUBSTRING(instring, i, 1);
    IF c = "\\" THEN
      SET c = SUBSTRING(instring, i + 1, 1);
      IF c = "u" THEN
        SET utfstr = CONCAT(utfstr, UNHEX(SUBSTRING(instring, i + 2, 4)));
        SET i = i + 5;
      END IF;
    ELSE
      IF utfstr != "" THEN
        SET outstring = CONCAT(outstring, CONVERT(utfstr USING utf8));
        SET utfstr = "";
      END IF;
      SET outstring = CONCAT(outstring, c);
    END IF;
  END WHILE;
  IF utfstr != "" THEN
    SET outstring = CONCAT(outstring, CONVERT(utfstr USING utf8));
  END IF;

  RETURN outstring;
END@@
DELIMITER ; 
```

有了这个 MySQL 函数，您可以使用以下方法转换表：

```
UPDATE `table_name` SET `column_name`=Unjson(`column_name`); 
```

我正在使用 MySQL 5.5，但我认为 5.0 不支持 utf-16，因此您可能需要检查您的 MySQL 版本...

（是的，我建议您在生产环境中运行它之前进行备份......）；）

# linux - MongoDB 数据库从一个操作系统迁移到另一个操作系统

> ID：10056933
> 
> 赞同：4
> 
> 时间：2012-04-07T18:00:51.053
> 
> 标签：linux, macos, mongodb

我正在用 Python 构建一个需要 MongoDB 的 Web 应用程序。我在 Mac OS X 上安装了 MongoDB。对于我的应用程序，我想要一个 Linux VPS。我想知道是否可以将 MongoDB 集合从 Mac 迁移到 Linux。系统的字节序是否会导致问题？还有什么可能？我不是数据库或操作系统方面的专家。如果我们可以迁移，有人可以指点我一个指南或程序吗？提前致谢。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-07T18:11:59.423

您可以只运行 mongoexport，它将您的数据库转储到 JSON 或 CSV 格式的文件中。

然后，在您的新机器上，您可以使用从 mongoexport 获得的输入文件运行 mongoimport，一切都应该在那里。

mongoexport：[http ://www.mongodb.org/display/DOCS/mongoexport](http://www.mongodb.org/display/DOCS/mongoexport)

mongoimport：[http ://www.mongodb.org/display/DOCS/Import+Export+Tools?focusedCommentId=4554852#ImportExportTools-mongoimport](http://www.mongodb.org/display/DOCS/Import+Export+Tools?focusedCommentId=4554852#ImportExportTools-mongoimport)

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-04-12T07:37:31.707

虽然导出和重新导入确实有效，但这将在新位置从头开始重新创建所有索引。对于复杂的指数，这可能需要几天时间。

我不会对二进制文件兼容感到惊讶 - 所以我会首先尝试关闭原始服务器，将整个数据目录复制到新位置。确保您运行的是完全相同版本的 mongo 服务器软件（例如 2.0.x，64 位和 10gen 的官方二进制文件，并且具有相同的配置选项）。

我很确定这将正确启动，并且所有数据和索引都将准备就绪。这基本上只是拍摄数据文件的二进制快照。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-07T18:10:44.403

mongodb 有很多用于导出和导入数据库的工具。查看： [http ://www.mongodb.org/display/DOCS/Import+Export+Tools](http://www.mongodb.org/display/DOCS/Import+Export+Tools)

# iphone - 配对 dispatch_resume 和 dispatch_suspend 以强制应用程序终止

> ID：10056934
> 
> 赞同：0
> 
> 时间：2012-04-07T18:01:18.987
> 
> 标签：iphone, ios, ios5, grand-central-dispatch

如果您通过 GCD 创建和管理计时器`dispatch_source_create, dispatch_resume and dispatch_suspend`，我知道您必须始终确保对于每个 dispatch_suspend，都必须有一个匹配的`dispatch_resume`.

因此，当应用程序进入后台模式时，您将调用 dispatch_suspend 并在接收`applicationDidBecomeActive`时调用`dispatch_resume`先前暂停的计时器源。

当`dispatch_resume`应用程序被强制终止时（通过调出后台运行的应用程序列表）呢？你需要担心这一切吗？我假设当应用程序重新启动时，`application:didFinishLaunchingWithOptions`就像应用程序正在干净启动一样被调用。这个假设是否正确？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-07T20:56:39.303

是的。如果您的后台应用程序被用户通过多任务托盘杀死，或者被系统杀死以释放内存，则再次启动该应用程序将与第一次启动它一样。

# ajax - Ajaxupload 和 Spring MVC

> ID：10056935
> 
> 赞同：3
> 
> 时间：2012-04-07T18:01:20.023
> 
> 标签：ajax, spring, upload, ajaxuploader

如果您通过普通格式上传文件，那么它可以工作。如果您使用 ajaxupload 加载文件/文件，则没有任何效果。

错误：

```
org.springframework.web.multipart.MultipartException: The current request is not a multipart request 
```

代码：

```
@RequestMapping (value = "/ upload", method = RequestMethod.POST)
public void upload (@ RequestParam MultipartFile file, 
HttpServletRequest request, HttpServletResponse response) 
```

目的 - 使用 ajax 的多重引导文件，任何人都可以有一个 Spring 的工作示例。

我有一个单独的 servlet 接收`HttpServletRequest`和解析一切都很好。在客户端ajaxupload。

如果你在这个类中尝试一个简单的 Spring MVC 传输请求，他拒绝工作，认为请求不是多部分的。Spring是作为锯切原始请求获得的？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-08T13:30:00.760

请更改 fileupload.js ，搜索并注释掉具有“application/octet-stream”的行

并添加以下行： xhr.setRequestHeader("Content-Type", "multipart/form-data");

# objective-c - 平移手势识别器中断 UIButton 突出显示

> ID：10056936
> 
> 赞同：1
> 
> 时间：2012-04-07T18:01:39.923
> 
> 标签：objective-c, ios, cocoa-touch, uibutton, uipangesturerecognizer

我将 UIPanGestureRecognizer 和 UITapGestureRecognizer 添加到 UIButton 以获得自定义效果。但是当我平移按钮时，之前点击引起的突出显示消失了。我怎样才能摆脱它？或者给我一种在被触摸时手动处理视图的高亮效果的方法。谢谢。

# django - 仅由一个函数接收到的 django 信号

> ID：10056940
> 
> 赞同：0
> 
> 时间：2012-04-07T18:02:22.940
> 
> 标签：django, django-signals

我有一个发送信号的模型：

```
class WMTransaction(models.Model):
    def save(self, *args, **kwargs):
        if self.status == 'completed':
            self.completed = datetime.datetime.now()
            try:
                old = WMTransaction.objects.get(pk=self.pk)
                if old.status == 'processing':
                    print 'sending signal'
                    payment_done.send(self)
            except:
                pass
        super(WMTransaction, self).save(*args, **kwargs) 
```

我也有 2 个模块中的接收器：

```
@receiver(payment_done, dispatch_uid="make_this_signal_unique", weak=False)
def subscribe(sender, **kwargs):
    print 'subscribing'
    # processing 
```

和：

```
@receiver(payment_done, dispatch_uid="this_signal_is_also_unique", weak=False)
def buy(sender, **kwargs):
    print 'buying'
    # processing 
```

问题是**订阅**功能被调用，而**购买**- 不是......两个模块都在已安装的应用程序中，这些模块的其他功能正常工作。信号有什么问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-08T08:41:36.807

是否已安装 module_B 并`buy`实际执行了定义？`payment_done.receivers`行前检查`payment_done.send`。

# android - 通过 RDP 使用虚拟 android 设备时如何克服性能问题

> ID：10056944
> 
> 赞同：0
> 
> 时间：2012-04-07T18:02:42.067
> 
> 标签：android, amazon-ec2, avd, rdp

我正在尝试在 android 平板电脑上为 android 开发。到目前为止，最好的选择似乎是在 RDP 上使用 Amazon ec2 实例。

Eclipse 像这样工作得很好。

唯一的问题是 Android 虚拟设备在 RDP 上的显示速度非常慢。

屏幕锁定带来了挑战，因为单击按住拖动不能很好地翻译。

是否有任何可行的替代执行 android 可执行文件？有什么方法可以加快 AVD 显示的速度吗？有什么办法可以禁用屏幕锁定？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-13T06:02:03.067

这不是直接的答案，而是另一种方法：

可以使用[TerminalIDE](https://play.google.com/store/apps/details?id=com.spartacusrex.spartacuside)在设备上进行开发。
可以使用[AIDE](https://play.google.com/store/apps/details?id=com.aide.ui)在设备上进行开发。

# macos - NSOutlineView 选择父级

> ID：10056948
> 
> 赞同：2
> 
> 时间：2012-04-07T18:02:56.293
> 
> 标签：macos, cocoa, nstableview, nsoutlineview, osx-tiger

我有一个 NSOutlineView，上面有几个项目。每个人有 3 个孩子（地点、照片和社交）。他们都有相同的孩子。假设用户选择了地点，有谁知道我如何检测哪个项目是所选项目的父项？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-07T19:08:51.740

-[NSOutlineView selectedRow]（继承自 NSTableView）
-[NSOutlineView itemAtRow:]
-[NSOutlineView parentForItem:]

# linux - 如何安装特定版本的 gcc

> ID：10056949
> 
> 赞同：2
> 
> 时间：2012-04-07T18:02:58.193
> 
> 标签：linux, gcc

大家好，这是一个基本问题，但看来我今天必须做一些系统管理员，我想知道安装非常特定版本的 gcc 的最佳方法。我在一个盒子上有一个版本，我希望在另一个裸盒子上也有同样的版本。我做了一个 gcc -v 这就是回来的。那么试图在一个裸机上复制以下配置 - 这是一项艰巨的任务吗？我知道怎么做 sudo apt-get，这就是这里所需要的吗？

```
kensey@yadda.com:~/cdev$ gcc -v
Using built-in specs.
COLLECT_GCC=gcc
COLLECT_LTO_WRAPPER=/usr/lib/gcc/x86_64-linux-gnu/4.6/lto-wrapper
Target: x86_64-linux-gnu 
```

配置：../src/configure -v --with-pkgversion='Ubuntu/Linaro 4.6.3-1ubuntu3'--with-bugurl=file:///usr/share/doc/gcc-4.6/README。错误 --enable-languages=c,c++,fortran,objc,obj-c++,go --prefix=/usr --program-suffix=-4.6 --enable-shared --enable-linker-build-id -- with-system-zlib --libexecdir=/usr/lib --without-included-gettext --enable-threads=posix --with-gxx-include-dir=/usr/include/c++/4.6 --libdir=/ usr/lib --enable-nls --with-sysroot=/ --enable-clocale=gnu --enable-libstdcxx-debug --enable-libstdcxx-time=yes --enable-gnu-unique-object --enable -plugin --enable-objc-gc --disable-werror --with-arch-32=i686 --with-tune=generic --enable- checks=release --build=x86_64-linux-gnu --host= x86_64-linux-gnu --target=x86_64-linux-gnu

```
Thread model: posix
gcc version 4.6.3 (Ubuntu/Linaro 4.6.3-1ubuntu3) 
```

蒂亚！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-07T18:20:23.533

所以这只是标准的 Ubuntu 12.04 Precise Penguin GCC 版本。

只需使用 apt-get 在另一个盒子上安装 gcc 包（假设它运行的是 12.04），您将获得相同的版本。

如果另一个盒子没有运行 12.04 但运行的是 Debian 或 Ubuntu，您可以**尝试**从 /etc/apt/sources.list 临时添加精确的存储库，使用 apt-get 安装此 gcc 版本，然后删除存储库。（不建议）

# ruby-on-rails - 仅在存在关联时才显示链接？

> ID：10056958
> 
> 赞同：0
> 
> 时间：2012-04-07T18:03:49.140
> 
> 标签：ruby-on-rails, ruby-on-rails-3

在我的应用程序中， a与订阅者`Product`有很多是 a ：`subscriptions``User`

```
class User
  has_many :products
  has_many :subscriptions, :foreign_key => :subscriber_id
end

class Product
  belongs_to :store
  has_many :subscriptions, :as => :subscribable
end

class Subscription
  belongs_to :subscriber, :class_name => "User"
  belongs_to :subscribable, :polymorphic => true
end 
```

我将如何根据产品是否订阅来显示链接块？

```
<% if #@product.subscription.present? %> 
   <%= link_to "Unsubscribe", { :controller => "products", :action => "unsubscribe_product", :id => product.id }, :method => :delete %>
 <% else %>
   <%= link_to "Subscribe", { :controller => "products", :action => "subscribe_product", :id => product.id }, :method => :post %>
<% end %> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-07T18:18:17.397

我会建议在用户类中使用方法

```
class User
  def subscribed_for?(subscribable)
    subscriptions.where(:subscribable_id => subscribable.id, :subscribable_type => subscribable.type).any?
  end

end 
```

并供查看使用

```
<% if current_user.subscribed_for?(product) %> 
   <%= link_to "Unsubscribe", { :controller => "products", :action => "unsubscribe_product", :id => product.id }, :method => :delete %>
 <% else %>
   <%= link_to "Subscribe", { :controller => "products", :action => "subscribe_product", :id => product.id }, :method => :post %>
<% end %> 
```

# php - 多对多关系选择和排序

> ID：10056960
> 
> 赞同：1
> 
> 时间：2012-04-07T18:04:28.553
> 
> 标签：php, mysql, many-to-many

我在两张表之间有一个多对多的关系：人和收藏夹。我有三列：

```
person_id         int(8)
favorites_id      int(8)
is_main_favorite  enum('y','n') 
```

作为：

```
person_id | favorite_id | is_main_favorite

2         | 1           |   'y'
2         | 2           |   'n'
3         | 1           |   'n'
3         | 2           |   'n'
1         | 1           |   'y'
1         | 2           |   'y' 
```

我正在使用 PHP 和 MySQL。

我如何检索`person_id`具有（`favorite_id`1 和 2 一起）并通过`person id`具有更多排序结果`is_main_favorite ='y'`，因此结果应为：

```
person_id 

1          (because he has favorite_id 1 and 2 and have two is_main_favorite = 'y')
2          (because he has favorite_id 1 and 2 and have one is_main_favorite = 'y') 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-07T18:10:16.633

大概是这样的：

```
SELECT
    a.person_id
FROM
    table AS a,
    table AS b
WHERE
    a.person_id = b.person_id AND
    a.favorite_id = 1 AND
    b.favorite_id = 2
ORDER BY
    ( IF( a.is_main_favorite = "y", 1, 0 )
      +
      IF( b.is_main_favorite = "y", 1, 0 ) ) DESC 
```

顺便说一句：您可能希望在数据库中存储 1/0 而不是 y/n，这样您就不需要 IF 调用

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-07T18:26:43.033

```
SELECT p.person_id
FROM person AS p, favorites AS f1, favorites AS f2
WHERE p.person_id = f1.person_id AND
      p.person_id = f2.person_id AND
      f1.favorite_id IS NOT NULL AND
      f2.favorite_id IS NOT NULL
ORDER BY
( IF( f1.is_main_favorite = "y", 1, 0 )
  +
  IF( f2.is_main_favorite = "y", 1, 0 ) ) DESC 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-07T18:09:16.650

# 解决方案

```
SELECT `person_id`
FROM `persons`
LEFT JOIN `favorites` AS `one`
 ON `favorites`.`person_id` = `persons`.`person_id`
LEFT JOIN `favorites` AS `two`
 ON `favorites`.`person_id` = `persons`.`person_id`
WHERE `one`.`favorite_id` = ?
AND `two`.`favorite_id` = ?
ORDER BY (
 IF(`one`.`is_main_favorite` = "y", 1, 0)
 +
 IF(`two`.`is_main_favorite` = "y", 1, 0)
) DESC 
```

## 这个怎么运作

首先，该`favorites`表被连接到该`persons`表两次，每次都作为它自己的表（`one`和`two`）。然后，`favorite_id`检查两个 s 以查看它们是否存在。如果它们都存在，则该行包含在结果集中，并按`is_main_favorite`（如果有两个“y”，则为 2，如果有一个“y”，则为 1，或 0）的计数排序。

# android - 在我的视图子类中使用 xml 文件

> ID：10056963
> 
> 赞同：0
> 
> 时间：2012-04-07T18:04:50.227
> 
> 标签：android, android-layout

我有一个创建视图子对象的活动类

```
public class DaDActivity extends Activity {
   /** Called when the activity is first created. */
   @Override
   public void onCreate(Bundle savedInstanceState) {
      super.onCreate(savedInstanceState);
      setContentView(new DragSurface(this));
   }
} 
```

这是我的 DragSurface.java

```
public class DragSurface extends View{

   public DragSurface(Context context) {
        super(context);
        setFocusable(true);

   }
} 
```

而且我有dragsurface.xml文件，但我不知道如何在我的DragSurface.java中使用这个xml文件。我的意思是我希望DragSurface.java在dragsurface.xml中使用背景、按钮或类似的东西，但我无法链接。 java到.xml

感谢帮助..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-07T18:16:07.170

```
LayoutInflater inflater = (LayoutInflater)context.getSystemService(Context.LAYOUT_INFLATER_SERVICE);
View view  = inflater.inflate(R.layout.yourlayout,null); 
```

尝试上面的行来扩充您的 xml 文件。试试下面的代码:::

```
public class DaDActivity extends Activity {
   /** Called when the activity is first created. */
   @Override
   public void onCreate(Bundle savedInstanceState) {
      super.onCreate(savedInstanceState);
      setContentView(new DragSurface(this).createView());
   }
} 
```

这是我的 DragSurface.java

```
public class DragSurface extends View{

   public DragSurface(Context context) {
        super(context);
        setFocusable(true);
   }
   public View createView(){
        LayoutInflater inflater = (LayoutInflater)context.getSystemService(Context.LAYOUT_INFLATER_SERVICE);
        View view  = inflater.inflate(R.layout.yourlayout,null);
        return view; 
     }
} 
```

# android - 如何获取除默认信息 Android 之外的 LinkedIn 个人资料信息

> ID：10056973
> 
> 赞同：0
> 
> 时间：2012-04-07T18:06:19.583
> 
> 标签：android, integration, linkedin, access-token

我正在获取用户的默认信息，例如名字和姓氏一个 URL（站点标准 URL），但我想访问 User_id 和 smilar 信息。我遵循“https://developer.linkedin.com/documents/profile-api”并像下面的代码一样实现。请帮帮我。我尝试了很多东西，但都没有成功。

```
public class LinkedInTestActivity extends Activity {

    public static final String CONSUMER_KEY = "XXXXXXXXXXXXXXXX";
    public static final String CONSUMER_SECRET = "XXXXXXXXXXXXXXXX";`enter code here`
    LinkedInAccessToken accessToken;
    public static final String APP_NAME = "LITest";
    public static final String OAUTH_CALLBACK_SCHEME = "x-oauthflow-linkedin";
    public static final String OAUTH_CALLBACK_HOST = "callback";
    public static final String OAUTH_CALLBACK_URL = OAUTH_CALLBACK_SCHEME+ "://" + OAUTH_CALLBACK_HOST;

    final LinkedInOAuthService oAuthService = LinkedInOAuthServiceFactory.getInstance().createLinkedInOAuthService(CONSUMER_KEY,CONSUMER_SECRET);
    final LinkedInApiClientFactory factory = LinkedInApiClientFactory.newInstance(CONSUMER_KEY, CONSUMER_SECRET);
    LinkedInRequestToken liToken;
    LinkedInApiClient client;

    TextView tv = null;

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);
        tv = (TextView) findViewById(R.id.tv);
        liToken = oAuthService.getOAuthRequestToken(OAUTH_CALLBACK_URL);
        Log.e("liToken.getAuthorizationUrl()",""+liToken.getAuthorizationUrl());
        Intent i = new Intent(Intent.ACTION_VIEW, Uri.parse(liToken.getAuthorizationUrl()));
        startActivity(i);
    }

    @Override
    protected void onNewIntent(Intent intent) {
        String verifier = intent.getData().getQueryParameter("oauth_verifier");
        Log.e("Verifier-------->",""+verifier);
        Log.e("liToken-------->",""+liToken);
        accessToken = oAuthService.getOAuthAccessToken(liToken, verifier);
        Log.e("accessToken-------->",""+accessToken.getToken());
        client = factory.createLinkedInApiClient(accessToken);
        client.postNetworkUpdate("LinkedIn Android app test");
        //      Person p = client.getProfileByUrl("http://api.linkedin.com/v1/people/~", ProfileType.STANDARD);

        Person p =client.getProfileForCurrentUser();
        p.getDateOfBirth();
        p.getApiStandardProfileRequest();
        p.getSiteStandardProfileRequest().getUrl();
        p.getHeadline();
        tv.setText(p.getLastName() + ", " + p.getFirstName()+ " DOB "+ p.getDateOfBirth());

        if (accessToken == null) {
            throw new IllegalArgumentException("access token cannot be null.");
        }
        try {
            URL url = new URL(LinkedInApiUrls.GET_CONNECTIONS_FOR_CURRENT_USER);
            HttpURLConnection request = (HttpURLConnection) url.openConnection();

            final OAuthConsumer consumer = getOAuthConsumer();
            consumer.setTokenWithSecret(accessToken.getToken(), accessToken.getTokenSecret());
            consumer.sign(request);
            request.connect();

            DefaultHttpClient httpclient = new DefaultHttpClient();
            HttpPost post = new HttpPost("http://api.linkedin.com/v1/people/~:(id,first-name,last-name,industry,headline,public-profile-url)");
            consumer.sign(post); // here need the consumer for sign in for post the share
            org.apache.http.HttpResponse response = httpclient.execute(post);
            Log.e("response",""+response.getHeaders(verifier).toString());

    } 

    protected OAuthConsumer getOAuthConsumer() {
        DefaultOAuthConsumer consumer = new DefaultOAuthConsumer(CONSUMER
_KEY, CONSUMER_SECRET);
consumer.setMessageSigner(new HmacSha1MessageSigner());
consumer.setSigningStrategy(new AuthorizationHeaderSigningStrategy());
return consumer;
    }
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-15T12:55:30.790

要获取更多用户详细信息，应使用 Person 对象，如下所示，

请更换这个，

```
Person p =client.getProfileForCurrentUser(); 
```

和，

```
Person profile = client.getProfileForCurrentUser(EnumSet.of(
                ProfileField.ID, ProfileField.FIRST_NAME,
                ProfileField.LAST_NAME, ProfileField.HEADLINE,
                ProfileField.INDUSTRY, ProfileField.PICTURE_URL,
                ProfileField.DATE_OF_BIRTH, ProfileField.LOCATION_NAME,
                ProfileField.MAIN_ADDRESS, ProfileField.LOCATION_COUNTRY)); 
```

因此，您可以获得更详细的信息。使用此配置文件对象，

```
 System.out.println("PersonID : " + profile.getId());
        System.out.println("Name : " + profile.getFirstName() + " "
                + profile.getLastName());
        System.out.println("Headline : " + profile.getHeadline());
        System.out.println("Industry : " + profile.getIndustry());
        System.out.println("Picture : " + profile.getPictureUrl());
        DateOfBirth dateOfBirth = profile.getDateOfBirth();
        System.out.println("DateOfBirth : " + dateOfBirth.getDay() + "/"
                + dateOfBirth.getMonth() + "/" + dateOfBirth.getYear());
        System.out.println("MAin Address : " + profile.getMainAddress());
        Location location = profile.getLocation();
        System.out.println("Location:" + location.getName() + " - "
                + location.getCountry().getCode()); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-18T15:27:39.360

我使用这种方法点击了 url，它对我有用：-

```
private OAuthConsumer getConsumer() {
        OAuthConsumer consumer = new CommonsHttpOAuthConsumer(CONSUMER_KEY, CONSUMER_SECRET);
        consumer.setTokenWithSecret(accessToken.getToken(), accessToken.getTokenSecret());
        return consumer;
    }

} 
```

# maven - 如何在公共 Maven/Ivy 存储库中搜索特定类？

> ID：10056975
> 
> 赞同：39
> 
> 时间：2012-04-07T18:06:27.493
> 
> 标签：maven, ivy

[有像http://mvnrepository.com/](http://mvnrepository.com/)这样的网站可以搜索“工件”并给出定义，我可以将其添加到我的项目中，以便从公共存储库自动下载库。

但是这个特定的示例（mvnrepository.com）（我实际上知道的唯一工作）按定义限制为“按组、工件或描述搜索”，而我想按类全名搜索。例如，我想输入`org.apache.commons.lang.NotImplementedException`获取`<dependency org="commons-lang" name="commons-lang" rev="2.6"/>`（或类似）作为答案。有这方面的设施吗？

* * *

## 回答 #1

> 赞同：46
> 
> 时间：2012-04-07T18:35:58.540

如果您想搜索类，您应该使用[http://search.maven.org](http://search.maven.org)并单击“高级搜索”...这是针对 Maven Central

* * *

## 回答 #2

> 赞同：21
> 
> 时间：2012-04-07T21:21:13.353

~~[@khmarbaise](https://stackoverflow.com/a/10057208/1288294)的答案 是直截了当的，但如果您可能想搜索几个额外的公共 Maven 存储库（如 JBoss），不仅是 Maven Central，我建议使用[http://grepcode.com](http://grepcode.com)。~~

**编辑：**不幸的是，我曾经强烈推荐过这样的东西的[http://grepcode.com现在已经死了。](http://grepcode.com)目前我不知道比[https://search.maven.org更好的地方，](https://search.maven.org) [@khmarbaise](https://stackoverflow.com/a/10057208/1288294)已经回答了。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-09-23T08:32:27.030

我建议尝试所有的搜索引擎。现在我已经浪费了几个小时来考虑如何上传一个工件，而事实证明它已经存在于 repo 中。这是`junit-addons`groupId*和*artifactId *，*可以在[pom](http://search.maven.org/remotecontent?filepath=junit-addons/junit-addons/1.4/junit-addons-1.4.pom)中验证。我的尝试：

1.  [http://mvnrepository.com](http://mvnrepository.com) - 没有
2.  [http://search.maven.org](http://search.maven.org) -**是的**
3.  [http://grepcode.com](http://grepcode.com) - 没有
4.  [http://jarfinder.com](http://jarfinder.com) - 是的，但只能直接下载，不适用于 maven

我是一个专家新手，所以我不能说第二个链接是最好的。尽管 tt 对我来说是唯一有帮助的。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2020-02-29T06:28:35.597

[https://javalibs.com/](https://javalibs.com/)是一个很好的在线搜索 maven repos 的网站。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2021-04-22T13:06:36.440

另一个搜索引擎：[JAR-Download.com](https://jar-download.com/)：

*   类搜索页面：[在 Maven 存储库中搜索类](https://jar-download.com/maven-repository-class-search.php)。
*   为方便参考，**存档**搜索页面：[Search classes in the Maven repository](http://web.archive.org/web/20210422130353/https://jar-download.com/maven-repository-class-search.php)。

# c# - 如何调用函数但不等待完成 - ASP.NET

> ID：10056981
> 
> 赞同：2
> 
> 时间：2012-04-07T18:07:15.293
> 
> 标签：c#, asp.net, amazon-s3, cron

我有一个页面，我在其中进行了一些文件操作，当文件完成后，我需要上传到 amazon s3。有时文件可能很大，因此提交时的用户需要等待太多。我怎么能做类似的东西

1.  文件操作
2.  完成后，我将文件名参数发送到某个函数
3.  我不需要等待该功能，我想在上传完成之前使用 Response.Redirect 。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-04-07T18:15:38.690

最简单的方法：

```
ThreadPool.QueueUserWorkItem(YourUploadMethod); 
```

下面有一些评论与此争论，所以我写了这个：

```
 protected void Page_Load(object sender, EventArgs e)
    {
        ThreadPool.QueueUserWorkItem(YourUploadMethod);

        Response.Redirect("http://google.com");
    }

    public void YourUploadMethod(object state)
    {
        Thread.Sleep(7000);
    }// breakpoint: I was redirected to google and then debugger stopped me here 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-07T18:09:01.080

您需要在不同的线程上启动该方法 - 因为您不必等待函数返回，所以您不需要回调。

查看[`Thread`](http://msdn.microsoft.com/en-us/library/system.threading.thread.aspx)班级和[`Task`](http://msdn.microsoft.com/en-us/library/system.threading.tasks.task.aspx)班级。

# webserver - 不支持浏览器的 Web 服务器错误代码？

> ID：10056983
> 
> 赞同：2
> 
> 时间：2012-04-07T18:07:19.733
> 
> 标签：webserver, error-code

我知道标准没有定义这样的代码，但是人们普遍使用的不支持浏览器版本的标准错误代码，如果没有，这是可用于此类场景的最接近的匹配：415、406、501

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-07T18:18:40.313

如果您可以控制目标客户，则可以发明自己的状态代码。否则，如果客户端是 Web 浏览器，那么您选择的内容不会有太大的不同，但 501 接缝就像最接近的匹配一样。

# c - 使用 Arduino mega 2560 与最大的 Arduino2max 数字引脚通信

> ID：10056985
> 
> 赞同：0
> 
> 时间：2012-04-07T18:07:24.060
> 
> 标签：c, serial-port, arduino, max, max-msp-jitter

我正在努力将 Arduino Mega 2560 连接到最大 msp，我已经调整了 Arduino2max arduino 代码和最大补丁。

我已经调整了 max 补丁，并成功地将 arduino 的所有 16 个模拟输入转换为 max，但无法将 13 号以上的任何数字引脚转换为 max msp。我想知道是否有人对此有任何成功？

任何帮助和意见将不胜感激！

非常感谢

乔

这是改编自 Arduino2max v.5 的 arduino 代码，可在此处找到[http://www.arduino.cc/playground/Interfacing/MaxMSP](http://www.arduino.cc/playground/Interfacing/MaxMSP)

```
int x = 0;              
int ledpin = 13;

void setup ()
{
// 115200 is the default Arduino Bluetooth speed
Serial.begin(115200);
///startup blink
digitalWrite(13,HIGH);              
delay(600);
digitalWrite(13,LOW);
pinMode(13,INPUT);
}

void loop()
{ 
// Check serial buffer for characters
if (Serial.available() > 0){  
if (1){     //Serial.read() == 'r') { // If an 'r' is received then read the pins 
// Read and send analog pins 0-15
for (int pin= 0; pin<=15; pin++)
{ 
 x = analogRead(pin);
 sendValue (x);
}

// Read and send digital pins 2-53
for (int pin= 2; pin<=53; pin++)

{         
 x = digitalRead(pin);
 sendValue (x);
}

 // Send a carriage return to mark end of pin data.
    Serial.println(); 
 // add a delay to prevent crashing/overloading of the serial port
delay (5);                        
 }
}
}
// function to send the pin value followed by a "space".
void sendValue (int x){ 
 Serial.print(x);
 Serial.print(32, BYTE);
 } 
```

再次感谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-06T15:12:25.353

我建议您使用 OSC 协议在 Arduino Mega 和 Max 之间进行通信。我使用图书馆 ardosc。没有关于它的文档，但它并不难使用，它是一个很好的库。

如果你不能使用它，不要犹豫，问我一些解释

# javascript - 验证javascript中的连字符只有一个

> ID：10056992
> 
> 赞同：2
> 
> 时间：2012-04-07T18:08:16.213
> 
> 标签：javascript

所以我试图在 javascript 中验证我的文本字段，以便它只有一个连字符。

我设法做到了，所以它们不能并排，但这是低效的，因为用户仍然可以在其他地方输入连字符。

我试图做的是：

```
if (surname.indexOf("-") > 1)

{

 err += "You cannot use more than one hyphen (-) for Client Surname";

} 
```

但这没有用。我也试过 >=2 还是不行。

你会建议研究或尝试什么？

谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-07T18:11:01.630

```
if ((surname.length - surname.replace('-', '').length) >= 2) {
     err += "You cannot use more than one hyphen (-) for Client Surname";
} 
```

基本上，取原始字符串的长度并将其与删除所有连字符的字符串长度进行比较。如果差值为 2 或更多，则表示超过 1 个连字符。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-07T18:14:34.247

您可以使用 .match() + 正则表达式来执行此操作。

```
if(surname.match(/\-/g).length>1) err+='Too many hyphens!'; 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-07T18:14:37.537

不……这是我朋友的一个简单解决方案：

```
var str="My-Name-Is-Jhon";
var count = str.match(/-/g);  
alert(count.length); 
```

它会提醒你 3。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-04-07T18:16:27.597

```
function tooManyHyphens(str){
  return str.split("-").length < 3;
}

var test1 = "Something-Something";
var test2 = "some-thing-some";
var test3 = "some";

console.log(tooManyHyphens(test1));
console.log(tooManyHyphens(test2));
console.log(tooManyHyphens(test3)); 
```

[http://jsfiddle.net/p9rHe/1/](http://jsfiddle.net/p9rHe/1/)

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-04-07T18:10:42.640

```
var hyphens = 0;

for(var i = 0; i<surname.length; i++) {
    if(surname.charAt(i) == "-") hyphens++;
    if(hyphens > 1) {
        err += "You cannot use more than one hyphen (-) for Client Surname";
        break;
    }
} 
```

# c++ - char数组的内存分配

> ID：10056994
> 
> 赞同：0
> 
> 时间：2012-04-07T18:08:24.923
> 
> 标签：c++, memory-management, memory-leaks, valgrind

我有以下代码：

```
Document document;
char *buf = new char[str.size()+1];
buf[str.size()] = '\0';
memcpy(buf, str.c_str(), str.size());
//string parsing
if (document.ParseInsitu<0>(buf).HasParseError()) {
    cerr << "Failed to parse string ";
}
delete[] buf; 
```

当我用 valgrind 检查程序时，我得到了这个：

```
==29765== Invalid read of size 1
==29765==    at 0x402A682: bcmp (mc_replace_strmem.c:679)
==29765==  Address 0x49626a2 is 2 bytes inside a block of size 214 free'd
==29765==    at 0x402759B: operator delete[](void*) (vg_replace_malloc.c:409)

==29765== Invalid read of size 1
==29765==    at 0x402901A: strlen (mc_replace_strmem.c:282)
==29765==    by 0x41ABE4A: std::basic_string<char, std::char_traits<char>, std::allocator<char> >::basic_string(char const*, std::allocator<char> const&) (in /usr/lib/i386-linux-gnu/libstdc++.so.6.0.16)
==29765==  Address 0x49626a8 is 8 bytes inside a block of size 214 free'd
==29765==    at 0x402759B: operator delete[](void*) (vg_replace_malloc.c:409)

==29765== Invalid read of size 1
==29765==    at 0x4029D0E: memcpy (mc_replace_strmem.c:635)
==29765==    by 0x41ABD15: char* std::string::_S_construct<char const*>(char const*, char const*, std::allocator<char> const&, std::forward_iterator_tag) (in /usr/lib/i386-linux-gnu/libstdc++.so.6.0.16)
==29765==    by 0x41ABE65: std::basic_string<char, std::char_traits<char>, std::allocator<char> >::basic_string(char const*, std::allocator<char> const&) (in /usr/lib/i386-linux-gnu/libstdc++.so.6.0.16)
==29765==    by 0x2C23: ???
==29765==  Address 0x49626b2 is 18 bytes inside a block of size 214 free'd
==29765==    at 0x402759B: operator delete[](void*) (vg_replace_malloc.c:409) 
```

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-07T18:11:43.147

```
buf[json.size()] = '\0'; 
```

这不应该是：

```
buf[str.size()] = '\0'; 
```

?

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-08T17:18:41.720

问题是我释放`buf`得太早了。我认为解析器会复制输入，这显然是错误的。

# playframework - 升级游戏！框架到 2.0 版？

> ID：10056997
> 
> 赞同：3
> 
> 时间：2012-04-07T18:09:11.487
> 
> 标签：playframework, playframework-2.0

我很好奇是否可以升级我的 Play！1.2\. 4 应用到版本 2？我知道用最新版本的 Symfony 进行这样的升级很痛苦，但使用 Play 可能更容易！？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-07T18:36:16.370

不，他们改变了一切：路由文件格式、模板表达式语言、整个控制器返回 api（现在通过 Akka 完全异步）。Play2.0 是一个完全不同的产品，我认为它更像是 Scala 堆栈而不是 Java 堆栈。例如，当您创建一个新应用程序时，系统会提示您输入：

1.  斯卡拉应用
2.  Java 应用程序
3.  ...

# php - php 文本到图像 imagettftext()

> ID：10056999
> 
> 赞同：0
> 
> 时间：2012-04-07T18:09:24.390
> 
> 标签：php, html, apache, xampp

```
header("Content-type: image/jpeg");
$image= imagecreate(120,50);

$txt="hello world!";
$bg=    imagecolorallocate($image,255,255,255);
$clr=   imagecolorallocate($image,0,0,0);

imagettftext($image,12,0,5,35,$clr,'font.ttf',$txt);

imagejpeg($image); 
```

* * *

这适用于 Windows 7 上的本地 xampp 服务器，
但是当我将其上传到服务器时，它不显示图像

* * *

但是当我用 imagestring() 替换 imagettftext() 时它可以工作，
我确信我已经上传了 font.ttf 文件。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-07T18:17:37.690

```
<?php
// Set the enviroment variable for GD
putenv('GDFONTPATH=' . realpath('.'));
// Name the font to be used (note the lack of the .ttf extension)
$font = 'SomeFont';
?> 
```

来自php手册