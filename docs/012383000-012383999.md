# StackOverflow 问答 12383000-12383999

# java - 请解释一下 Kernighan 的比特计数算法背后的逻辑

> ID：12383002
> 
> 赞同：23
> 
> 时间：2012-09-12T07:18:20.173
> 
> 标签：java, algorithm, bit-manipulation, bit

在阅读[整数时间复杂度的位计数算法（Brian Kernighan）](https://stackoverflow.com/questions/12380478/bits-counting-algorithm-brian-kernighan-in-an-integer-time-complexity)之后，这个问题直接出现。有问题的Java代码是

```
int count_set_bits(int n) {
  int count = 0;
    while(n != 0) {
      n &= (n-1);
      count++;
    }
 } 
```

我想了解`n &= (n-1)`这里实现了什么？我在另一个漂亮的算法中看到了类似的构造，用于检测数字是否是 2 的幂，例如：

```
if(n & (n-1) == 0) {
    System.out.println("The number is a power of 2");
} 
```

* * *

## 回答 #1

> 赞同：37
> 
> 时间：2012-09-12T07:23:42.690

在调试器中单步执行代码对我有帮助。

如果你从

```
n = 1010101 & n-1=1010100 => 1010100
n = 1010100 & n-1=1010011 => 1010000
n = 1010000 & n-1=1001111 => 1000000
n = 1000000 & n-1=0111111 => 0000000 
```

所以这个迭代4次。每次迭代都会以这样一种方式递减该值，即设置为 1 的最低有效位消失。

递减一位将翻转最低位，并将每一位翻转到第一个位。例如，如果您有 1000....0000 -1 = 0111....1111，无论它必须翻转多少位，它都会停在那里，而其他任何位都保持不变。当您和 this`n`设置了最低位并且只有最低位变为`0`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2017-04-10T02:54:22.170

从数字中减去 1 会切换所有位（从右到左）直到最右边的设置位（包括最右边的设置位）。因此，如果我们将一个数字减 1 并对其自身进行按位 & `(n & (n-1))`，我们将取消设置最右边的设置位。这样我们就可以在循环中从右到左一个一个地取消设置1。

> 循环迭代的次数等于设置的位数。

资料来源：[Brian Kernighan 的算法](http://www.geeksforgeeks.org/count-set-bits-in-an-integer/)

# zend-framework - 为什么 Zend Framework 2.0 小于 1.2？

> ID：12383003
> 
> 赞同：1
> 
> 时间：2012-09-12T07:18:23.143
> 
> 标签：zend-framework, frameworks

我下载了 Zend Framework 2.0 的新版本，发现它的功能比 1.2 版本少，无论是在框架文件夹还是在外部。是什么原因？Zend 是否有一个新的政策，包括一些功能作为扩展，或者这与变得更轻量级有关？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-12T07:30:44.727

Zend_Service(S) 现在每个人都有自己的存储库和自己的生命周期，通过这种方式，服务可以很快适应供应商 API 的变化。

Zend_Date、Zend_Currency、... 和其他语言环境组件已被 PHP 5.3 API（DateTime、NumberFormat 等）取代，还有一个用于翻译的新 i18N 组件。

其他组件未使用，其他组件不够稳定，无法与主发行版一起使用。

在这里，您可以获得主要发行版和其他组件的完整存储库列表[https://github.com/zendframework/](https://github.com/zendframework/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-12T07:34:00.013

在 zf2.0 中仅包含标准组件，即对应用程序开发必不可少的组件。其余组件可以按需包含。

[您可以在http://framework.zend.com/downloads/](http://framework.zend.com/downloads/)中阅读更多相关信息

[Matthew Weier O'Phinney http://framework.zend.com/wiki/display/ZFDEV2/Zend+Framework+2.0+Requirements](http://framework.zend.com/wiki/display/ZFDEV2/Zend+Framework+2.0+Requirements)解释了使这种轻量级的原因

# iphone - 在我的 XCode 项目中找不到 DIOSConfig.h 文件

> ID：12383004
> 
> 赞同：-1
> 
> 时间：2012-09-12T07:18:35.020
> 
> 标签：iphone, ios, drupal-services

我们正在为一个 drupal 网站制作一个 iphone 应用程序。我们想使用 XML-RPC 进行通信。

我们已将 DIOS sdk 和 AFNetwork 库添加到 XCode 项目中。根据我查看的两个教程，下一步是修改一个名为 DIOSConfig.h 的文件，并在该文件中给出 drupal 服务函数的 url。但我找不到那个文件。

我必须在不同的文件中输入网址吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-12T07:27:21.800

您需要修改**Settings.h**文件

参考这个链接[https://github.com/workhabitinc/drupal-ios-sdk](https://github.com/workhabitinc/drupal-ios-sdk)

# c# - 应用程序崩溃时是否会触发终结器？

> ID：12383005
> 
> 赞同：1
> 
> 时间：2012-09-12T07:18:36.317
> 
> 标签：c#, exception, crash, finalizer

当应用程序崩溃时，无论是在正常运行时还是在 Visual Studio 调试器中运行时，都会触发终结器吗？

# mysql - 同一张表上的插入触发器中的更新语句

> ID：12383021
> 
> 赞同：0
> 
> 时间：2012-09-12T07:19:38.887
> 
> 标签：mysql, sql, triggers

我想在同一张表上编写一个包含 UPDATE 语句的触发器，如下所示：

```
create trigger AFTER INSERT ON myTable
   FOR EACH ROW BEGIN
    update myTable set ... where ...
   end 
```

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-12T07:23:46.230

[引用 MySQL 文档](http://dev.mysql.com/doc/refman/5.5/en/faqs-triggers.html#qandaitem-B-5-1-9)：

> 触发器也可以影响其他表，但不允许修改已被调用函数或触发器的语句使用（用于读取或写入）的表。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-12T07:29:25.027

您可以这样做（更新已触发后插入触发器的表）但为避免递归，您的 FOR INSERT 和 FOR UPDATE 触发器必须是单独的过程。另一个问题是 Microsoft SQL Server 只为任何更新语句调用一次 FOR UPDATE 触发器。SQL Server 中没有 FOR EACH ROW。在 FOR INSERT TRIGGER 中使用单个 UPDATE... table... WHERE 语句同时更新大量行。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-12T07:50:56.770

我认为这是不可能的。

我创建一个表脚本如下

```
CREATE TABLE `tbl1` (
    `id` INT(10) NULL DEFAULT NULL,
    `msg` VARCHAR(50) NULL DEFAULT NULL
) 
```

然后我使用以下查询在该表上创建了触发器

```
delimiter |
create trigger trigger1 before insert on tbl1 for each row begin
update tbl1 set msg='insert occured in tbl1' where id=5;
end
|
delimiter ; 
```

当我尝试运行以下查询时

```
insert into tbl1 values (1,'ddd'); 
```

我收到以下错误

“无法更新存储函数/触发器中的表 'tbl1'，因为它已被调用此存储函数/触发器的语句使用”

所以这是不可能的。欲了解更多信息，请访问 [http://bugs.mysql.com/bug.php?id=50684](http://bugs.mysql.com/bug.php?id=50684)

# etl - 如何使用 Scriptella 对多个文件进行 ETL？

> ID：12383025
> 
> 赞同：3
> 
> 时间：2012-09-12T07:19:58.490
> 
> 标签：etl, scriptella

我有多个由日志报告生成的日志文件 1.csv、2.csv 和 3.csv。我想读取这些文件并使用 Scriptella 同时解析它们。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-18T10:34:03.673

Scriptella 不提供开箱即用的并行作业执行。相反，您应该使用操作系统或编程环境提供的作业调度程序（例如，通过向 ExecutorService 提交作业来运行多个 ETL 文件）。

这是一个导入指定为系统属性的单个文件的工作示例：

**ETL 文件**：

```
<!DOCTYPE etl SYSTEM "http://scriptella.javaforge.com/dtd/etl.dtd">
<etl>
    <connection id="in" driver="csv" url="$input"/>
    <connection id="out" driver="text"/>
    <query connection-id="in">
        <script connection-id="out">
            Importing: $1, $2
        </script>
    </query>
</etl> 
```

**并行运行文件的 Java 代码：**

```
//Imports 3 csv files in parallel using a fixed thread pool
public class ParallelCsvTest {
    public static void main(String[] args) throws EtlExecutorException, MalformedURLException, InterruptedException {
        final ExecutorService service = Executors.newFixedThreadPool(3);
        for (int i=1;i<=3;i++) {
            //Pass a name as a parameter to ETL file, e.g. input<i>.csv
            final Map<String,?> map = Collections.singletonMap("input", "input"+i+".csv");
            EtlExecutor executor = EtlExecutor.newExecutor(new File("parallel.csv.etl.xml").toURI().toURL(), map);
            service.submit((Callable<ExecutionStatistics>)executor);
        }
        service.shutdown();
        service.awaitTermination(10, TimeUnit.SECONDS);
    }
} 
```

运行此示例创建 3 个 csv 文件 input1.csv、input2.csv 和 input3.csv 并将它们放在当前工作目录中。CSV 文件示例：

```
Level, Message
INFO,Process 1 started
INFO,Process 1 stopped 
```

# mysql - 瞻博网络钢带半径 SBR JDBC 连接字符串

> ID：12383026
> 
> 赞同：1
> 
> 时间：2012-09-12T07:20:00.120
> 
> 标签：mysql, jdbc, solaris, dsn

我有一个简单的问题，但我需要帮助

有一个 Radius 服务器需要使用 jdbc 驱动程序连接到 mysql 数据库，但我没有得到正确的连接字符串

我所做的是

“连接=DSN=jdbc:mysql://xxxx:3306/SteelBeltedRadius;UID=xxxx;PWD=xxxxx”

但我得到“初始 SQL 连接尝试失败”

我在用着

操作系统：SUN SOLARIS 10，

MySQL服务器：5.5.27

# javascript - JS（或 mootools，如果愿意）鼠标是否退出到另一个元素？

> ID：12383027
> 
> 赞同：2
> 
> 时间：2012-09-12T07:20:04.550
> 
> 标签：javascript, mootools, onmouseover, onmouseout

好的，所以，我有一个奇怪的情况，我多次遇到过。我正在寻找一个简单/最好的解决方案，而不是我之前使用的过于复杂的解决方案（并且已经忘记了）。

你看，我有一个幻灯片。我还有几个按钮浮动在幻灯片顶部（可见此处： http: [//marsxplr.com/view-13378](http://marsxplr.com/view-13378)）

现在，当用户的鼠标移到幻灯片上时，这些按钮就会出现。然而，当用户的鼠标移到按钮上的那一刻，mouseleave 被调用（即使鼠标在技术上仍然在幻灯片上！）。这会导致按钮在鼠标移过它们时消失，这显然不是我想要发生的事情。

我解决了这个问题，然后让每个按钮在收到鼠标悬停时重新显示它自己。

但是现在，我们有一个问题......

该按钮位于幻灯片的最边缘。这意味着当调用 mouseleave 时，会发生以下两种情况之一：

A：鼠标离开了按钮但没有离开幻灯片，并且在幻灯片上调用了 mouseEnter 意味着不应该采取任何行动，因为幻灯片最终会负责将按钮隐藏在其 mouseleave 中。

B：鼠标只是离开了幻灯片和按钮，这意味着我们应该隐藏按钮！

所以我的问题是，我如何区分这两种可能性？是的，是的，一种解决方案是始终使按钮隐藏其自身 - 并依靠幻灯片重新显示按钮......但我担心幻灯片 onmouseenter 会在某些浏览器上的按钮 onmouseleave 之前被调用！正如您可能知道的那样，这可能会导致问题。事实上，想到这里，我已经很容易受到这种影响。例如，如果鼠标从幻灯片转到按钮，并且我的幻灯片的 onmouseleave 在 onmousleave 之后被调用，导致按钮仍然消失......

所以，长话短说，我需要知道以下两件事之一：

*   这些事件的调用顺序是否有保证？
*   或者有没有办法告诉鼠标在调用 mouseleave 时实际去了哪里？

正如您在上面的示例中看到的那样，我使用的是 mootools，所以 mootools 解决方案很好。然而，看到一个 vanilla-js 解决方案也会很有趣。

编辑： **我的按钮是浮动的并位于单独的 z-index 上，因此不会发生父子 DOM 关系的标准操作**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-12T07:31:25.290

[标准 DOM 事件没有这样](https://developer.mozilla.org/en-US/docs/DOM/event.relatedTarget%20%20%20%20%5B1%5D%3a%20http://jsfiddle.net/4Y7ux/)的问题。

至于顺序，它从**最深**的元素**一直**到文档根目录。

当顺序颠倒时，还有一个可选的（参见`false`下面代码中的参数）**捕获阶段。**从根到光标下的每个内部元素（用于鼠标事件）。

要检查事件实际发生在原始元素的哪个内部元素上，您可以检查`target`事件对象的属性：

```
el.addEventListener('mouseout', function (e) {
    var target = e.target;
    if (target.classList.contains('whatever')) {
        // Do something
    }
}, false); 
```

根据 Georges Oates Larsen 的评论，还有[`relatedTarget`](https://developer.mozilla.org/en-US/docs/DOM/event.relatedTarget%20%20%20%20%5B1%5D%3a%20http://jsfiddle.net/4Y7ux/)，专为涉及多个元素的事件而设计。

# sql - 关于将更多信息添加到现有查询中的 Sql 查询

> ID：12383037
> 
> 赞同：0
> 
> 时间：2012-09-12T07:20:38.687
> 
> 标签：sql

```
Select c1.Eventid, c1.Place, c1.competitornum, c2.competitornum
From Results c1, Results c2
Where c1.Place = c2.Place
and c1.Eventid = c2.Eventid
and c1.competitornum < c2.competitornum 
```

以下查询允许从假设表“结果”中显示在某项赛事中并列的参赛者。即在一个事件中获得相同的位置。

我需要扩展查询以显示有关事件的更多详细信息 - 代替事件 ID，我需要显示来自假设的其他/第二个表“事件”的事件性别、距离和样式。

如何扩展查询以包含事件表中的必要信息？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-12T08:11:34.287

我假设在 Events 表中有一个 Eventid 列。

```
SELECT X.*, e.eventgender, e.distance , e.style
FROM Events e
INNER JOIN
        (Select c1.Eventid, c1.Place, c1.competitornum, c2.competitornum
        From Results c1, Results c2
        Where c1.Place = c2.Place
        and c1.Eventid = c2.Eventid
        and c1.competitornum < c2.competitornum)X
ON x.Eventid = e.Eventid 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-12T07:24:55.280

要显示来自相关表的数据，您可以使用**[`JOIN`](http://en.wikipedia.org/wiki/Join_%28SQL%29)**它们。

```
Select e.eventgender, e.distance, e.style, 
       c1.Place, c1.competitornum, 
       c2.competitornum
From Results c1, Results c2
LEFT OUTER JOIN Events e ON e.Eventid = c1.Eventid
Where c1.Place = c2.Place
and c1.Eventid = c2.Eventid
and c1.competitornum < c2.competitornum 
```

# telerik - Telerik Radeditor 目录

> ID：12383039
> 
> 赞同：1
> 
> 时间：2012-09-12T07:20:42.157
> 
> 标签：telerik, radeditor, tableofcontents

我想在 Telerik radeditor 中有一个像目录这样的词。我已经启用它来编辑列表项，所以在 sharepoint 的列表项显示中，目录应该通过向下滚动到正确的标题来工作。我尝试使用如下锚标记添加一个片段，但它会在一个新窗口中以 dispform 的形式打开链接。有任何想法吗？谢谢

```
 <snippet name="Table of Content">
      <![CDATA[
<a href="#one">One</a>
<br/>
<a href="#two" >Two</a>
<br/>
<a href="#three" >Three</a>
<br/>
<a href="#four" >Four</a>
<br/>
<a href="#five" >Five</a>
<br/>
<a href="#six" >Six</a>
<br/>
<a href="#seven" >Seven</a>
<br/>
<a href="#eight">Eight</a>
<br/>
<a href="#nine">Nine</a>
<br/>
<a href="#ten" >Ten</a>
<br/>

<a name="one" />
<h1>This is number One</h1>
<br/>
<a name="two" />
<h1>This is number Two</h1>
<br/>

<a name="three" />
<h1>This is number Three</h1>
<br/>
<a name="four" />
<h1>This is number Four</h1>
<br/>
<a name="five" />
<h1>This is number Five</h1>
<br/>
<a name="six" />
<h1>This is number Six</h1>
<br/>
<a name="seven" />
<h1>This is number Seven</h1>
<br/>
<a name="eight" />
<h1>This is number Eight</h1>
<br/>
<a name="nine" />
<h1>This is number Nine</h1>
<br/>
<a name="ten" />
<h1>This is number ten</h1>
<br/>

                ]]>
    </snippet> 
```

# java - StatusListener 和 TwitterStream 类在 jar 中不可用

> ID：12383042
> 
> 赞同：1
> 
> 时间：2012-09-12T07:20:55.237
> 
> 标签：java, twitter, twitter4j

我正在尝试使用 twitter4j 访问 twitter API。我正在通过[Streaming API](http://twitter4j.org/en/code-examples.html)（第 9 点）尝试它。但是**StatusListener**和**TwitterStream**不存在。我也检查了 jar，它们也不存在。我添加了

```
 <dependency>
       <groupId>org.twitter4j</groupId>
       <artifactId>twitter4j-core</artifactId>
       <version>2.2.5</version>
   </dependency> 
```

在 pom.xml 中添加 jars。TwitterStream 自 2.2.0 以来似乎出现在[twitter4j](http://twitter4j.org/en/javadoc/twitter4j/TwitterStream.html)中。我使用的是**2.2.5**，这是最新的稳定版本。但这些类仍然不存在于 jar 中。请告诉我其他人是否有同样的问题或有解决方案。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-14T10:50:10.160

twitter4j-stream 需要在 pom 中添加以下依赖项。

```
<dependency>
<groupId>org.twitter4j</groupId>
<artifactId>twitter4j-stream</artifactId>
<version>2.2.0</version> 
```

# php - 使用 foreach 循环，我们如何使用 ob_start() 回显数据

> ID：12383043
> 
> 赞同：0
> 
> 时间：2012-09-12T07:20:55.213
> 
> 标签：php, loops, ob-start

我们使用 Jquery Ui 设计了一个进度条。我们需要一个可以提供数值数据的程序。该代码不起作用

**PHP代码**

```
<?php
 ob_start();
 $array = array(10,20,30,40,50,60,70,80,90,100);
 foreach($array as $a ){
echo $a;
 sleep(1);
ob_end_clean();
 }
 echo 100 ;
 ?> 
```

PHP 代码用于回显单个项目，它清除现有数据，以便我们的 Ajax 程序可以获取实际的数值数据。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-12T07:25:14.970

如果您没有实际更新，则需要使用参数向您的 php 脚本发送请求：

```
$(function() {
    $("#progressbar").progressbar({ value: 0 });
    setTimeout(function(){ updateProgress(0); }, 500);
});
function updateProgress(data) {
    $.get(url+'?progress='+data, function(data) {
        // data contains whatever that page returns     
        if (data < 100) {
            $("#progressbar").progressbar({value: parseInt(data)});
            $("#progresstext").html("<p>    Loading...<p>");
            setTimeout(function(){ updateProgress(data); }, 500);
        } else {
            $("#progressbar").progressbar({value: 100});
        }
    }); 
} 
```

和你的 PHP 脚本：

```
<?php
    echo (int)$_GET['progress']+10;
?> 
```

# algorithm - 河内塔的复杂性？

> ID：12383044
> 
> 赞同：13
> 
> 时间：2012-09-12T07:21:03.950
> 
> 标签：algorithm, complexity-theory

我最近正在解决河内塔问题。我使用“分而治之”的策略来解决这个问题。我将主要问题分为三个较小的子问题，因此产生了以下递归。

> T(n)=2T(n-1)+1

解决这个导致

> O(2^n) [指数时间]

然后我尝试使用记忆技术来解决它，但是这里的空间复杂度也是指数级的，堆空间很快就耗尽了，对于更大的 n，问题仍然无法解决。

有没有办法在不到指数的时间内解决这个问题？解决问题的最佳时间是什么时候？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-09-12T07:38:24.783

这取决于您所说的“解决”是什么意思。3个钉子和`n`圆盘的河内塔问题需要`2**n - 1`移动来解决，所以如果你想枚举移动，你显然不能做得更好，`O(2**n)`因为枚举`k`事物是`O(k)`。

另一方面，如果您只想知道所需的移动次数（不枚举它们），计算`2**n - 1`是一种更快的操作。

另外值得注意的是，移动的枚举可以迭代地完成，`O(n)`空间复杂度如下（`disk1`是最小的磁盘）：

```
while true:
    if n is even:
        move disk1 one peg left (first peg wraps around to last peg)
    else:
        move disk1 one peg right (last peg wraps around to first peg)

    if done:
        break
    else:
        make the only legal move not involving disk1 
```

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2012-09-12T07:39:42.710

您可以解决递归并获得封闭形式。

T(n) = 2*T(n-1) + 1

T(n) = 2 * ( 2 * T(n-2) + 1) + 1

T(n) = (2 ^ 2) * T(n-2) + 2^1 + 2^0

T(n) = (2^k) * T(nk) + 2^(k-1) + 2^(k-2) + ... + 2^0

解决这个封闭的结果是

T(n) = (2^n) - 1 与 T(0) = 0

现在使用平方取幂。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-09-12T08:40:30.043

不幸的是，不可能在更短的时间内解决这个问题，因为改变所有河内塔位置所需的移动次数是指数级的。因此，根据步数 O(T)，最佳解是线性的，因此尾数解是指数 O(2^n)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-10-17T11:57:26.473

恰好有 2^n-1 次移动，所以要列出它们，我们不能做得比 O(2^n) 时间复杂度更好。

在 O(1) （好吧，如果您采用任意大小的整数，则为 O(log n)）空间中可以枚举必要的移动：

```
(define (fbs n i) (if (even? n) (fbs (/ n 2) (+ i 1)) i))

(define (fb n) (fbs n 1))

(define (hanois n i m) 
  (
    cond 
    ((= i m) "DONE")
    (else 
          (define k (fb i))
          (print "move disk " k " " (if (even? (+ n k)) "left" "right"))
          (hanois n (+ 1 i) m))))

(define (hanoi n) (hanois n 1 (expt 2 n))) 
```

[方案]

请注意，由于算术（以及`fb`查找最低有效设置位的位置的算法），该算法具有 log n 的开销。任何涉及计数器上任何类型的递增/递减的简单解决方案都将具有相同的开销。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2017-11-10T10:08:24.150

这在一定程度上取决于您接受哪种表示形式。想象以下表示：

```
OneMove
    from : integral
    to   : integral

Solution
    step_one   : optional reference to Solution
    step_two   : OneMove
    step_three : optional reference to Solution 
```

这种表示实际上可以以线性复杂度创建，因为其中涉及大量重复。

我刚刚试了一下，为高度 64 构建这样的解决方案花费了不到一毫秒的时间。当然，单步执行仍然需要 2 ^n -1 步。

您没有指定语言，但如果您想要 C++ 中的代码，请写一行。

# javascript - jqGrid 列的动态宽度取决于具有最大宽度的内容

> ID：12383057
> 
> 赞同：1
> 
> 时间：2012-09-12T07:22:02.277
> 
> 标签：javascript, jquery, jqgrid, grid

我正在使用带有选项 autowidth : true 和 shrinkToFit: true 的 jqGrid 并且没有在 colModel 中指定宽度，因为我的网格和它的列是动态的，所以我不知道哪一列分配什么宽度。我的问题是因为我无法为列指定宽度，所以我希望 jqGrid 根据该列中的最大长度内容缩小列宽，以便其他列可以使用该空间。我知道这可能会为多行内容产生非常大的宽度，但我想 colModel 中是否有像 max-width 这样的选项也可以解决这个问题。

在一行中：我可以让 jqGrid 具有动态宽度列，其中宽度将被计算出来吗？

# android - 如何在 android 中播放 .pls？

> ID：12383059
> 
> 赞同：3
> 
> 时间：2012-09-12T07:22:05.953
> 
> 标签：android, android-mediaplayer

Android 媒体播放器：我可以从 URL 播放 .mp3 文件。在玩 .pls 时会变得很糟糕。

代码：

```
try{
String url=".pls url";
mediaPlayer = new MediaPlayer();
mediaPlayer.setAudioStreamType(AudioManager.STREAM_MUSIC);
mediaPlayer.setDataSource(url);
mediaPlayer.prepare();
mediaPlayer.start();
}catch(Exception 
System.out.println("@@ Exception while playing: "+e);
mediaPlayer .release();
mediaPlayer = null;
} 
```

错误：

```
09-12 12:44:04.026: E/MediaPlayer(704): error (1, -2147483648)
09-12 12:44:04.026: I/System.out(704): @@ Exception while playing: java.io.IOException: Prepare failed.: status=0x1 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-12T08:10:05.427

如果`pls`您的意思是播放列表信息文件，则媒体播放器无法处理`pls`文件。

.pls 文件不是媒体文件。所以你不能播放 .pls 文件。通常 .pls 由应用程序处理，应用程序从 pls 文件中提取信息并播放 pls 指向的音乐文件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-10-20T14:42:28.550

```
String musicUlrPath;
LinkedList<String> streamingUrlList;

        streamingUrlList=new LinkedList<String>();

    ExecuteArrayList executeArrayList=new ExecuteArrayList();
                    executeArrayList.execute("blank");

class ExecuteArrayList extends AsyncTask<String, String, String>

        {

            @Override
            protected String doInBackground(String... params) {
                // TODO Auto-generated method stub
                try {

                streamingUrlList=getStreamingUrl(pathFromJson);//you are geting path during json response 

                } catch (Exception e) {
                        e.printStackTrace();

                       }
                return null;

            }

            @Override
            protected void onPostExecute(String result) {
                // TODO Auto-generated method stub

                musicUlrPath=(streamingUrlList.get(0));

            }

        }

    public LinkedList<String> getStreamingUrl(String url) {

        Log.i(LOGTAG, "get streaming url");
        final BufferedReader br;
        String murl = null;
        LinkedList<String> murls = null;
        try {
            URLConnection mUrl = new URL(url).openConnection();
            br = new BufferedReader(
                    new InputStreamReader(mUrl.getInputStream()));
            murls = new LinkedList<String>();
            while (true) {
                try {
                    String line = br.readLine();

                    if (line == null) {
                        break;
                    }
                    murl = parseLine(line);
                    if (murl != null && !murl.equals("")) {
                        murls.add(murl);

                    }
                } catch (IOException e) {
                    e.printStackTrace();
                }
            }
        } catch (MalformedURLException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        } catch (IOException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        }
        Log.i(LOGTAG, "url to stream :" + murl);
        return murls;
    }

    private String parseLine(String line) {
        if (line == null) {
            return null;
        }
        String trimmed = line.trim();
        if (trimmed.indexOf("http") >= 0) {
            return trimmed.substring(trimmed.indexOf("http"));
        }
        return "";
    } 
```

现在设置提取的路径

```
mediaPlayer.setDataSource(musicUlrPath); 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-03-28T07:47:13.207

```
Extract pls file in notepad , It will show like this
playlist]
File1=Alternative\everclear -URL
Title1=Everclear - So Much For The Afterglow
Length1=233    
File2=Comedy\Weird Al - Everything You Know Is Wrong.mp3   
.
.   
NumberOfEntries=5    
Version=2.

Use that URL in Media player.It will work. 
```

# java - 如何动态生成具有特定列的sql查询

> ID：12383060
> 
> 赞同：0
> 
> 时间：2012-09-12T07:22:06.960
> 
> 标签：java, sql

我有几张桌子。我也有疑问。我的问题是使用 Java 动态生成 SQL 查询。

我在单独的表中有以下字段：

```
 Collumn name          status
po_number,               Y
unit_cost,               Y
placed_date ,            Y
date_closed,             Y
scheduled_arrival_date   Y
date_closed              Y 
order_quantity           Y
roll_number              N
product_sku              N
product_category_name    N
rec_vendor_quantity      Y  
vendor_name              Y
et_conversion_unit_quantity Y 
```

当状态为时我必须从中生成查询`Y`，这里的问题是上述列的一些时间

以下查询是上述查询的输出：

在这里，我已经包含了所有列，但我必须排除状态为 的列`N`，请帮助我使用 java 构造查询。

```
select
pi.po_number,poi.unit_cost,pi.placed_date CreateDate,
case when isnull(pi.date_closed) then pi.scheduled_arrival_date  
else pi.date_closed end as ReceviedDate,
poi.order_quantity,poi.roll_number,p.product_sku product_name,
pc.product_category_name,poi.rec_vendor_quantity,pv.vendor_name,p.et_conversion_unit_quantity,pi.note
from
purchase_order as pi,
purchase_order_inventory as poi,
product_vendors as pv,
products AS p,
product_categories AS pc
where
pi.purchase_order_id=poi.purchase_order_id and
pc.product_category_id=p.product_category_id and
poi.product_id = p.product_id and
poi.product_category_id=pc.product_category_id and
pi.vendor_id=pv.product_vendor_id and
( ( pi.date_closed  >= '2012-01-01' and pi.date_closed <='2012-09-05 23:59:59' ) 
or ( pi.scheduled_arrival_date  >= '2012-01-01' and pi.scheduled_arrival_date <='2012-09-05 23:59:59') ) and
pi.po_type=0 
and pi.status_id = 0 and  poi.transaction_type = 0  
order by pi.po_number 
```

更新 ：

询问 ：`STEP 1:`

`SELECT rcm.id,rcm.tablename,rcm.columnname,rcm.size,rcm.displayorder,rcm.isactive FROM report_customise_master rcm where rcm.tablename !='employee' and rcm.isactive='Y' order by rcm.displayorder;`

第 2 步：构造查询的 Java 方法：

```
public Map getComplexReportQuery() {
    String query = "SELECT rcm.id,rcm.tablename,rcm.columnname,rcm.size,rcm.displayorder,rcm.isactive FROM report_customise_master rcm where rcm.tablename !='employee' and rcm.isactive='Y' order by rcm.displayorder;";
    String tableName = "", from = "", select = "";
    StringBuffer sb = new StringBuffer();
    Map<String, List<String>> resultsMap = new LinkedHashMap<String, List<String>>();
    Map<String, String> displayOrderMap = new LinkedHashMap<String, String>();
    Map queryMap = new LinkedHashMap();
    if (!query.isEmpty() || query.length() > 0) {
        sb.append(query);
    }

    Connection connection = getConnection();
    if (connection != null) {
        try {
            PreparedStatement reportQueryPS = connection.prepareStatement(sb.toString());
            ResultSet reportQuery_rst = reportQueryPS.executeQuery();
            List<String> tables = new ArrayList<String>();;
            if (reportQuery_rst != null) {
                StringBuilder selectQuery = new StringBuilder(" SELECT ");
                StringBuilder fromQuery = new StringBuilder(" FROM ");
                while (reportQuery_rst.next()) {
                    tableName = reportQuery_rst.getString("tablename");
                    List<String> columns = resultsMap.get(tableName);
                    if (columns == null) {
                        columns = new ArrayList<String>();
                        resultsMap.put(tableName, columns);
                    }
                    columns = resultsMap.get(tableName);
                    String columnName = reportQuery_rst.getString("columnname");

                    columns.add(columnName);
                }
                tableName = "";
                for (Entry<String, List<String>> resultEntry : resultsMap.entrySet()) {
                    tableName = resultEntry.getKey();
                    List<String> columns = resultEntry.getValue();
                    int i = 0;
                    for (String column : columns) {
                        selectQuery.append(tableName + "." + column);
                        if (i != columns.size()) {
                            selectQuery.append(",");
                        } else {
                            selectQuery.append("");
                        }
                        i++;
                    }
                    if (!tables.contains(tableName)) {
                        tables.add(tableName);
                    }
                }
                //to remove comma at the end of line
                select = selectQuery.toString().replaceAll(",$", "");
                tableName = "";
                int i = 0;
                for (String table : tables) {
                    fromQuery.append(table);
                    fromQuery.append(" ");
                    fromQuery.append(table);
                    if (i != tables.size()) {
                        fromQuery.append(",");
                    } else {
                        fromQuery.append("");
                    }
                    i++;
                }
                from = fromQuery.toString().replaceAll(",$", "");
                queryMap.put("query", select + from);
            }
            //from = from+"ORDER BY "+orderbyColumn+" "+sort+" ";
        } catch (Exception ex) {
            ex.printStackTrace();
        } finally {
            try {
                closeConnection(connection, null, null);
            } catch (Exception ex) {
                ex.printStackTrace();
            }
        }
    } else {
        System.out.println("Connection not Established. Please Contact Vendor");
    }
    return queryMap;// return the map/ list which  contains query and sory and display order
} 
```

STEP 3 : 结果查询
`{query= SELECT purchase_order.po_number,purchase_order.placed_date,purchase_order.date_closed,purchase_order.scheduled_arrival_date,purchase_order_inventory.unit_cost,purchase_order_inventory.order_quantity,purchase_order_inventory.roll_number,purchase_order_inventory.rec_vendor_quantity,products.product_sku,products.et_conversion_unit_quantity,product_categories.product_category_name ,product_vendors.vendor_name FROM purchase_order purchase_order,purchase_order_inventory purchase_order_inventory,products products,product_categories product_categories,product_vendors product_vendors}`

但这不是我想要的，请帮助我构建我给出的查询。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-12T07:28:31.937

**两个查询**

您需要进行两个查询：

1.  查询启用了哪些字段
2.  构建第二个查询字符串（你想要动态构建的那个）

之所以这样，是因为 SQL 查询必须在查询任何数据之前告知将包含哪些列。事实上，它将用于构建内部 DB 查询计划，即 DB 电机将用于检索和组织您询问的数据的方式。

**查询所有列**

是否需要只查询那些字段？您不能查询所有内容并使用相关数据吗？

**加入**

查看更新的问题，我猜您需要动态添加 where 条件才能正确连接表。我应该做的是有一个参考告诉我当有桌子时要添加什么组合。

至少有两种选择：

1.  基于存在的表对（例如：“如果存在 A 和 B，则添加 A.col1 = B.col2”）
2.  基于存在的表（“如果存在 B，则添加 A.col1 = B.col2；A 应该存在”

根据您的示例，我认为第二个选项更合适（并且易于实施）。

所以我应该`Map<String, JoinInfo>`在 JoinInfo 至少有一些静态的地方：

```
JoinInfo
+ conditionToAdd // by example "A.col1 = B.col2"
+ dependsOnTable // by example "A" to indicate that A must be present when B is present 
```

所以你可以使用：

1.  添加表的信息应该是（例如：即使 A 没有选定的列，也必须存在才能与 B 连接）
2.  将 conditionToAdd 包含到 where 子句中

无论如何...我认为您遇到了很多麻烦。为什么这么有活力？

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-12T07:38:00.293

你必须一步一步地接近这件事。

首先，您必须创建一个查询，该查询将返回所有具有`status='Y'`

然后，您将 COLUMN_NAME 放入字符串列表中。

```
List<String> list = new List<String>();
while(rs.next()){
  list.add(rs.getString(columnNumber));
} 
```

然后你必须循环`List`并动态生成你的第二个 sql 语句

```
String sqlSelect = "SELECT ";
String sqlFrom = " FROM SOME_OTHER_TABLE "
String sqlWhere = " WHERE SOME_CONDITION = 'SOME_VALUE' "

for(String x : list){
  sqlFrom += x +" , "+;
}
//here make sure that you remove the last comma from sqlFrom  because you will get an SQLException

String finalSql = sqlSelect + sqlFrom + sqlWhere ; 
```

# c# - 如何显示Repeater中有两个以上空格的数据？

> ID：12383064
> 
> 赞同：0
> 
> 时间：2012-09-12T07:22:16.373
> 
> 标签：c#, asp.net, excel, repeater

我将数据库中的数据放入我的数据集中![在此处输入图像描述](../Images/4654f9482c271c9c61eb902219372c50.png)，然后绑定到我的转发器控件，但它一直显示为“Prince Antony G”。它消除了空间。
而且我将这些数据导出到excel中，在excel中也删除了空格。
我需要数据库中的任何显示数据。任何想法来解决这个问题。

**在堆栈溢出问题框中还删除了两个单词之间的更多空格**

我的 Excel 编码：

```
 DataTable dt = new DataTable("Report");
    DataRow dr;
    dt.Columns.Add("Name");   

    for (int i = 0; i < dt_Status.Rows.Count; i++)
    {
        dr = dt.NewRow();

        dr["Name"] ="<pre>"+ dt_Status.Rows[i]["NAME"].ToString() +"</pre>";
        dt.Rows.Add(dr);
    }

    HttpResponse response = HttpContext.Current.Response;

    // first let's clean up the response.object
    response.Clear();
    response.Charset = "";

    // set the response mime type for excel
    response.ContentType = "application/vnd.ms-excel";
    response.AddHeader("Content-Disposition", "attachment;filename=Report.xls");

    // create a string writer
    using (StringWriter sw = new StringWriter())
    {
        using (HtmlTextWriter htw = new HtmlTextWriter(sw))
        {
            // instantiate a datagrid
            DataGrid dg = new DataGrid();
            dg.DataSource = dt;
            dg.DataBind();
            dg.RenderControl(htw);
            response.Write(sw.ToString());
            response.End();
        }
    } 
```

更新我的代码后，我得到了 excel 输出：

![在此处输入图像描述](../Images/79eb4eb20a2b2753425b195ff7b3b8d6.png)

我需要在单个单元格中显示。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-12T07:28:48.693

html 不能识别多个空格。

你把你的数据放在`<pre></pre>`标签之间，说它是按格式的。

或者您可以将空格替换为`&nbsp;`. 这是一个[不间断的空格字符](http://en.wikipedia.org/wiki/Non-breaking_space)。

空格用于格式化你的 html 代码，因此如果你有多个空格，它会被包装成一个。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-12T07:41:02.717

一个简单方便的东西：

```
string value = String.Join(" ", "Prince Antony G".Split(new char[] {' '}, 
StringSplitOptions.RemoveEmptyEntries)); 
```

# css - JQuerymobile 和 Bartender Tabbar - 单独的图标

> ID：12383067
> 
> 赞同：2
> 
> 时间：2012-09-12T07:22:38.040
> 
> 标签：css, jquery-mobile

我对 JQM 和 CSS 很陌生，所以如果这是一个简单的问题，我很抱歉......

我一直在玩 Bartender Tabbar (http://www.stokkers.mobi/valuables/bartender.html) 和 JQM。Bartender 标签栏带有一个菜单图标示例精灵。我想用库中的单个图标替换这些图标，例如 glyphish。

我不确定我需要编辑 Bartender CSS 文件的哪些部分以使它们加载单个图标...任何帮助将不胜感激。

我想我需要编辑下面的部分（来自 Bartender.css）：

```
/* ============= SEPERATE CSS-SPRITES  ======================= */

/*   7b. SEPERATE */

/*   REGULAR  */

.soloSprite li a .ui-btn-inner
{
    display: inline-block;
    position: static;
    height: 30px;
    width: 30px;
    background-color: none;
    background: url("sprite_lo-res.png") no-repeat; 
    background-size: 300px 44px; 
    -o-background-size: 300px 44px;
    -webkit-background-size: 300px 44px;
    -moz-background-size: 300px 44px;
    -ms-background-size: 300px 44px;    
}

.soloSprite li a[data-icon="features"] span:only-child 
{
    background-position:    0px 0px
}

.soloSprite li a[data-icon="brands"] span:only-child
{
    background-position:  -60px 0px
}

.soloSprite li a[data-icon="fees"] span:only-child
{
    background-position:  -30px 0px
}

.soloSprite li a[data-icon="contact"] span:only-child
{
    background-position:  -90px 0px
}

.soloSprite li a[data-icon="about"] span:only-child
{
    background-position: -120px 0px
}

.soloSprite .ui-icon::before
{
    filter: progid:DXImageTransform.Microsoft.gradient(GradientType=0,startColorStr=#40ffffff,EndColorStr=#12ffffff);zoom: 1;
    background-image: -webkit-gradient(linear, left top, left bottom, from(rgba(255,255,255,.15)), to(rgba(255,255,255,.0)));
    background-image:  -webkit-linear-gradient(top, rgba(255,255,255,.25) 0%, rgba(255,255,255,.07) 48%, rgba(255,255,255,.0) 48.5%, rgba(255,255,255,.0) 100% ); 
    background-image: -ms-linear-gradient(top, rgba(255,255,255,.25) 0%, rgba(255,255,255,.07) 48%, rgba(255,255,255,.0) 48.5%, rgba(255,255,255,.0) 100% ); 
    background-image: -moz-linear-gradient(top, rgba(255,255,255,.25) 0%, rgba(255,255,255,.07) 48%, rgba(255,255,255,.0) 48.5%, rgba(255,255,255,.0) 100% ); 
    background-image: -o-linear-gradient(top, rgba(255,255,255,.25) 0%, rgba(255,255,255,.07) 48%, rgba(255,255,255,.0) 48.5%, rgba(255,255,255,.0) 100% );
    background-image: linear-gradient(top, rgba(255,255,255,.25) 0%, rgba(255,255,255,.07) 48%, rgba(255,255,255,.0) 48.5%, rgba(255,255,255,.0) 100% );    
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-15T18:53:55.557

我收到了 Bartender 的创建者的回复……如果不使用他提供的标准模板创建自己的图标集，就很难做到这一点。

# html - td:first-child 似乎在 IE 中不起作用

> ID：12383068
> 
> 赞同：1
> 
> 时间：2012-09-12T07:22:41.023
> 
> 标签：html, css

我是 HTML 新手，我只是想制作一个基本表格，我可以在其中指定 CSS 中列的宽度。

我正在创建一组 HTML 帐户（35 页文档），因此表格是我需要制作的基础，并且在整个 html 中将使用大约 5 个标准表格。

我已经快速开始了，下面的代码似乎完全符合我的需要，但是 td:first-child 在 IE 中不起作用。

我已经搜索过，它是支持的。谁能告诉我我做错了什么？另外，如果有更好的方法，请告诉我。

```
<html>
<head>
    <title>Company Accounts</title>
    <style type="text/css">
        table { width: 264mm; border: 1px solid; table-layout:fixed}
        td {border: 1px solid; padding: 5px}

        .T1C1 td:first-child {width: 10mm; text-align:right}
        .T1C2 td:first-child + td {width: 50mm}
        .T1C3 td:first-child + td + td {width: 10mm; text-align:right}
        .T1C4 td:first-child + td + td + td {width: 50mm; text-align:right}
    </style>
</head>
<body>
    <table class="T1C1 T1C2 T1C3 T1C4">
        <tr> <td>1</td> <td>2</td>  <td>3</td>  <td>4</td> </tr>
        <tr> <td>1</td> <td>2</td>  <td>3</td>  <td>4</td> </tr>
        <tr> <td>1</td> <td>2</td>  <td>3</td>  <td>4</td> </tr>
        <tr> <td>1</td> <td>2</td>  <td>3</td>  <td>4</td> </tr>
        <tr> <td>1</td> <td>2</td>  <td>3</td>  <td>4</td> </tr>
    </table>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-12T10:09:21.050

`:first-child`伪类是 IE 在[Quirks Mode](http://www.cs.tut.fi/~jkorpela/quirks-mode.html)中不支持的众多 CSS 功能之一。正如评论中提到的，这就是为什么添加 doctype 会有所帮助的原因。但这不仅仅是任何文档类型。它必须是在 IE 中触发“标准模式”的一个，例如`<!doctype html>`，放置在 HTML 文档的开头。

这个特殊的怪癖在 Microsoft 文档中明确描述：“注意伪类仅在标准兼容模式下启用（严格！DOCTYPE）。” [http://msdn.microsoft.com/en-us/library/ie/cc848865%28v=vs.85%29.aspx](http://msdn.microsoft.com/en-us/library/ie/cc848865%28v=vs.85%29.aspx) 然而，文档中的“严格”一词具有误导性，除了列出的文档类型链接页面 [http://msdn.microsoft.com/en-us/library/ie/ms535242%28v=vs.85%29.aspx](http://msdn.microsoft.com/en-us/library/ie/ms535242%28v=vs.85%29.aspx) HTML5 doctype`<!doctype html>`也可以，

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-12T08:18:32.323

这是此 css 伪类的参考：[https ://developer.mozilla.org/en-US/docs/CSS/:first-child](https://developer.mozilla.org/en-US/docs/CSS/:first-child)

您可以在那里找到浏览器兼容性表。

页面底部有一些针对 IE 的警告：

> 动态添加元素时，Internet Explorer 7 不会更新样式。在 Internet Explorer 8 中，如果通过单击链接动态插入元素，则在链接失去焦点之前不会应用第一个子样式。

# android - 更新 ListView 的最佳方法是什么？

> ID：12383069
> 
> 赞同：0
> 
> 时间：2012-09-12T07:22:43.300
> 
> 标签：android, multithreading, listview, tabs

再会，

我在 Android 中制作了我的测试应用程序，并发现了一些困难的时刻要自己完成。

我有两个选项卡片段和主机活动（创建两个选项卡片段）和操作栏（actionbarsherlock）。一个片段允许添加一些关于产品的信息并将其持久化到 SQLite 中。其他片段有一个列表视图，显示数据库中的所有产品。

问题是，在第一个选项卡中，我将数据保存在不同的线程中，延迟时间为 5 秒，因此您单击“将产品添加到数据库”按钮，5 秒后它将被添加。但是点击后我可以切换到另一个带有 listview 的选项卡，情况如下：来自第一个片段的数据由于延迟而尚未持久化，但在持久化后，listview 没有任何变化 - listview 不知道变化。当它注意到数据库中有更改时，我需要自动更新列表视图。我怎样才能做到这一点？我使用 ArrayAdapter 将数据填充到列表视图中。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-12T07:28:25.540

我认为您需要使用广播接收器，并在其中调用方法 refreshDrawableState() 为您列出。接收者分别是你的活动。

# arrays - JSON数组推送

> ID：12383070
> 
> 赞同：7
> 
> 时间：2012-09-12T07:22:45.967
> 
> 标签：arrays, json

我有这个示例数组，用于将条目插入到 YUI 数据表中

```
var book = {
        "id" : "po-0167",
        "date" : new Date(1980, 2, 24),
        "quantity" : 1,
        "amount" : 4,
        "title" : "A Book About Nothing"
    }; 
```

我可以通过这样做获得相同的数组吗？

```
 var book = [];

    var booktemp = {
        "id" : "po-0167"
    };
    book.push(booktemp);

    booktemp = {
        "date" : new Date(1980, 2, 24)
    };
    book.push(booktemp);

    booktemp = {
        "quantity" : 1
    };
    book.push(booktemp);

    booktemp = {
        "amount" : 4
    };
    book.push(booktemp);

    booktemp = {
        "title" : "A Book About Nothing"
    };
    book.push(booktemp); 
```

我在这里尝试的是编写一个通用方法，它将遍历结果列表并能够在将来形成一个条目。

```
var resultsArray = [];
for( int i = 0; i < array.features.length; i ++)
{ 
    var resultsFeatureArray = [];
    for( att in array.features[i].attributes)
    {
        var temp = { 
            att : array.features[i].attributes[att]
        }
        resultsFeatureArray.push(temp);
    }
    resultsArray.push(resultsFeatureArray);
} 
```

那么我怎样才能使数组与本书代码的第一段相同呢？

添加了我的整个示例代码，注释书数组似乎可以工作，但未注释的部分似乎无法显示行

```
<script type="text/javascript">

YAHOO.util.Event.addListener(window, "load", function() {

    YAHOO.example.Data = {
        bookorders: [
        ]
    }

    var bookorders = [];    

    /*
    var book = {
        "id" : "po-0167",
        "date" : new Date(1980, 2, 24),
        "quantity" : 1,
        "amount" : 4,
        "title" : "A Book About Nothing"
    };
    */
    var book = [];

    var booktemp = {
        "id" : "po-0167"
    };
    book.push(booktemp);

    booktemp = {
        "date" : new Date(1980, 2, 24)
    };
    book.push(booktemp);

    booktemp = {
        "quantity" : 1
    };
    book.push(booktemp);

    booktemp = {
        "amount" : 4
    };
    book.push(booktemp);

    booktemp = {
        "title" : "A Book About Nothing"
    };
    book.push(booktemp);

    bookorders.push(book);

    YAHOO.example.Basic = function() {

        var myColumnDefs = [
            {key:"id", sortable:true, resizeable:true},
            {key:"date", formatter:YAHOO.widget.DataTable.formatDate, sortable:true, sortOptions:{defaultDir:YAHOO.widget.DataTable.CLASS_DESC},resizeable:true},
            {key:"quantity", formatter:YAHOO.widget.DataTable.formatNumber, sortable:true, resizeable:true},
            {key:"amount", formatter:YAHOO.widget.DataTable.formatCurrency, sortable:true, resizeable:true},
            {key:"title", sortable:true, resizeable:true}
        ];

        var myDataSource = new YAHOO.util.DataSource(bookorders);
        myDataSource.responseType = YAHOO.util.DataSource.TYPE_JSARRAY;

        myDataSource.responseSchema = {
            fields: ["id","date","quantity","amount","title"]
        };
        var myDataTable = new YAHOO.widget.DataTable("basic",
                myColumnDefs, myDataSource);

        return {
            oDS: myDataSource,
            oDT: myDataTable
        };
    }();

}); 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-12T09:23:54.867

我尝试并找到了解决方案，因为 att 和 values 在我推送后将成为对象

```
var temp = new Object();
    temp["id"] = "po-0167";
    temp["date"] = new Date(1980, 2, 24);
    temp["quantity"] = 1;
    temp["amount"] = 4;
    temp["title"] = "A Book About Nothing";

bookorders.push(temp); 
```

这将使其显示在数据表中，通用部分将通过使用 temp[att] = attributes[att]; 进行迭代

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-12T07:43:12.077

```
var book = {
        "id" : "po-0167",
        "date" : new Date(1980, 2, 24),
        "quantity" : 1,
        "amount" : 4,
        "title" : "A Book About Nothing"
    }; 
```

它不是数组。
数组是

```
var books =[{
   "id" : "po-0167",
   "date" : new Date(1980, 2, 24),
   "quantity" : 1,
   "amount" : 4,
   "title" : "A Book About Nothing"
}] 
```

在您的示例中进行操作后，您将获得下一个数组

```
var book2 =[{
   "id" : "po-0167"
},{
   "date" : new Date(1980, 2, 24)
   },{
   "quantity" : 1
},{
   "amount" : 4
},{
   "title" : "A Book About Nothing"
}] 
```

这是不一样的。
您必须执行以下操作：

```
var book = new Array();

var booktemp = {
   "id" : "po-0167",
   "date" : new Date(1980, 2, 24),
   "quantity" : 1,
   "amount" : 4,
   "title" : "A Book About Nothing"
};  

book.push(booktemp); 
```

**PS。**
`var arr = []`并且`var arr = new Array()`是相同的并非所有浏览器都适用于`var arr = []`

# c# - MySql C# 插入错误。不正确的字符串值：'\xE1ra'

> ID：12383072
> 
> 赞同：0
> 
> 时间：2012-09-12T07:22:48.057
> 
> 标签：c#, .net, mysql, mysql-workbench

我正在使用 C# .NET Mysql 连接器，并且在运行此查询时：

```
INSERT INTO convos (`userid`,`time`,`from`,`content`,`read`,`deleted`, `ip`, `source`, `charname`, `to`) VALUES ('3', '1347396787', 'Chára', '........', '0', '0', '0.0.0.0:0000', 'C', 'óóóíííí', 'óóóíííí'); 
```

我收到以下错误：

> 不正确的字符串值：第 1 行的列 'from' 的 '\xE1ra'

我了解我的编码，一切都是为 utf8、utf8_general_ci 配置的。数据库、表和列配置为 utf8。数据是从客户端以 utf8 格式发送的。

如果我使用像 Workbench 这样的 3rd 方工具来插入查询或使用 mysql 命令行，它工作正常。我不知道连接器是否存在错误，或者我需要在插入之前对这些值做其他事情？

任何的想法？

谢谢

mysql中有什么可以转换为正确的类型吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-12T07:33:02.357

我相信您需要更改列的字符集：

对那些使用 UTF-8 的列使用下面的代码。

```
ALTER TABLE database.table MODIFY COLUMN col VARCHAR(255)  
CHARACTER SET utf8 COLLATE utf8_general_ci NOT NULL; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-12T07:39:17.487

[带有 N 的 Unicode 字符串前缀](http://support.microsoft.com/kb/239530)

首先查看您的表 convos 并确保列数据类型是 nchar、nvarchar 和当您在 SQL Server 中处理 Unicode 字符串常量时，您必须在所有 Unicode 字符串前面加上前缀 N

酪氨酸：

```
 insertQuery = "INSERT INTO convos (`userid`,`time`,`from`,`content`,`read`,`deleted`, `ip`, `source`, `charname`, `to`) VALUES
 (N'3', N'1347396787', N'Chára', N'........', N'0', N'0', N'0.0.0.0:0000', N'C', N'óóóíííí', N'óóóíííí')"; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-12T09:35:16.603

我想通了，这需要一段时间，但似乎我设置字符集的频率太高了。数据库、表、列都是UTF8。当我建立连接时，连接字符串中有“CHARSET=UTF8”。每次我建立连接时，我也在运行“SET NAMES 'utf8' COLLATE 'utf8_general_ci'”。我删除了 CHARSET=UTF8 和“SET NAMES 'utf8' COLLATE 'utf8_general_ci'”，现在它们都可以正常工作了。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-12T07:33:43.930

更新它

```
INSERT INTO convos (`userid`,`time`,`from`,`content`,`read`,`deleted`, `ip`, `source`, `charname`, `to`) VALUES ('3', '1347396787', 'Chara', '........', '0', '0', '0.0.0.0:0000', 'C', 'óóóíííí', 'óóóíííí'); 
```

我认为你的第三个值中的“chara”给出了它

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-06-07T17:11:27.770

对于尝试了所有建议但没有任何效果的人（比如我自己），值得检查一下 MySQL 类型是您在 C# 中映射到的字段的类型。我的文本字段被自动映射为**MySqlDbType.Blob**，这导致了错误。我将类型更改为**MySqlDbType.Text**，我不再看到错误。

这是我对类似线程的原始回复： [https ://stackoverflow.com/a/16989466/2199026](https://stackoverflow.com/a/16989466/2199026)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2018-03-30T04:19:09.773

如下配置mysql。它将解决从 java 或 C# 插入 mysql 时的 unicode 错误

[在此处输入图像描述](https://i.stack.imgur.com/4Kp7A.png)

# string - 如何使用 XPath 或 XQuery 选择字符串中的字符？

> ID：12383075
> 
> 赞同：0
> 
> 时间：2012-09-12T07:22:59.150
> 
> 标签：string, select, xpath, xquery

我有以下 XML 文件：

```
<unit id="u-1.01"/>
<unit id="u-2.01"/> 
```

我想选择*id*属性的第三个字符：在这种情况下，字符是**1**和**2**。

选择字符并将其分配给变量的最简单方法是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-12T09:06:43.197

在 XQuery 1.0 中

```
let $char := substring(@id, 3, 1) return ... 
```

在 XPath 2.0 中

```
for $char in substring(@id, 3, 1) return ... 
```

两者都假设`<unit>`元素是上下文项

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-12T07:48:28.813

有两种方法：

```
foreach (XmlNode item in n.ChildNodes)
        {
            string valToFind = item.Attributes["id"].Value;
            int pos=val.IndexOf(".");
            string finalVal = val.Substring(2, pos-2);//either this 
            string finalVal = val.Split('-')[1].Split('.')[0];//or this(both will work for you)

        } 
```

# magento - 用于创建网站、商店和商店视图的 magento api

> ID：12383082
> 
> 赞同：2
> 
> 时间：2012-09-12T07:23:22.490
> 
> 标签：magento

我找不到使用 Soap 在 Magento 中创建网站、商店和商店视图的 Magento api。

你可以帮帮我吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-12T11:35:05.033

它不在 API 中！

如果您遵循此问题的答案，则可以在代码中执行此操作：

[https://stackoverflow.com/a/8313029/1617149](https://stackoverflow.com/a/8313029/1617149)

当然你可以扩展 API：

[http://www.magentocommerce.com/wiki/doc/webservices-api/custom-api](http://www.magentocommerce.com/wiki/doc/webservices-api/custom-api)

...并编写您自己的模块来满足您的需求。

祝你好运！

# c# - 为什么 VB.NET 属性的 setter 需要类型化参数，为什么是 ByVal？

> ID：12383084
> 
> 赞同：12
> 
> 时间：2012-09-12T07:23:30.757
> 
> 标签：c#, vb.net

在 C# 中，属性的 setter`value`关键字将自动与属性的类型相同。

例如，在 C# 中，类型`value`为`string`

```
private string str = string.Empty;
public string MyText 
{
    get { return str; }
    set { str = value; }
} 
```

如果我们将此片段转换为 VB.Net，我们会得到

```
Private str As String = String.Empty
Public Property MyText() As String
    Get
        Return str 
    End Get
    Set(ByVal value As String)
        str = value
    End Set
End Property 
```

**问题**

1.  为什么 set 有这条线`Set(ByVal value As String)`？值类型不应该自动为字符串。这边走。

    ```
    Private str As String = String.Empty
    Public Property MyText() As String
        Get
            Return str 
        End Get
        Set
            str = value
        End Set
    End Property 
    ```

    那有什么用？

2.  我无法更改`BYVal`为`ByRef`（我试过了，它给出了错误），那还有什么用呢？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-09-12T07:37:09.717

您*可以省略*该`(ByVal value As String)`部分。Visual Studio 将继续添加它，但语言和编译器都不需要它。

您可以使用除 之外的参数名称`value`。另请注意，从 VS2010 SP1 开始，您可以省略`ByVal`关键字。

* * *

**例子：**

```
Class Test

    Private str As String = String.Empty

    Public Property MyText() As String
        Get
            Return str 
        End Get
        Set
            str = value
        End Set
    End Property

    Public Property MyText2() As String
        Get
            Return str 
        End Get
        Set(something As String)
            str = something
        End Set
    End Property

End Class 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-12T07:30:52.870

我认为，它是 Visual basic 语法的一部分。`OptionStrict`如果未打开，您可以省略数据类型。但如果指定类型，则必须与属性类型相同。

[来自 MSDN - Set 语句 (Visual Basic)](http://msdn.microsoft.com/en-us/library/6b85bc00.aspx)

> *数据类型*
> 如果 Option Strict 为 On，则为必需。value 参数的数据类型。指定的数据类型**必须与**声明此 Set 语句的属性的数据类型相同。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-12T07:36:05.597

因为你*可以*在 VB 中更改参数的*名称*：

```
Public Property MyText() As String
    Get
        Return str
    End Get
    Set(ByVal val As String)
        str = val
    End Set
End Property 
```

您不能更改为`ByVal`，`ByRef`因为属性参数只能按值传递。但 VB 有时倾向于陈述不可改变的事实。

开发人员*可以*（理论上）让您拥有：

```
Set(val) 
```

因为没有其他东西是可以改变的。但是他们选择使属性的参数类似于`Function`s 和`Sub`s 的参数。

* * *

实际上，您根本不必*指定*参数。根据 VB 语言规范 (9.7.2)：

> 如果指定了参数列表，则它必须有一个成员，该成员不能有除 之外的修饰符`ByVal`，并且其类型必须与属性的类型相同。该参数表示正在设置的属性值。如果省略参数，`Value`则隐式声明一个名为的参数

和（9.5.2）：

> 未指定`ByRef`或`ByVal`默认为的参数`ByVal`。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-12T07:38:20.400

如果值为 ByRef，则 Setter 将能够修改调用者的值。允许属性设置器产生这样的副作用是没有意义的。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-12T17:22:01.807

例如，您可以将 value 设为枚举并对其进行选择案例并以这种方式设置值。您不必将属性的 set 调用限制为仅传递相同的值类型，这是一个不错的功能

# ios - 如何将核心数据添加到实用程序应用程序

> ID：12383089
> 
> 赞同：1
> 
> 时间：2012-09-12T07:23:46.107
> 
> 标签：ios, core-data, utility

我在 xcode（版本 4.4.1）中制作了一个简单的 ios 实用程序应用程序，但我意识到我需要在持久内存中存储一​​个整数。据我所知，使用核心数据是实现这一目标的最佳方式。我已将核心数据框架添加到我的应用程序中，但我不知道需要添加哪些代码才能使其正常工作。

有人可以帮忙吗

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-12T07:35:57.240

如果你只需要存储/检索一个整数，`NSUserDefaults`应该是要走的路。

**保存**

```
NSUserDefaults *prefs = [NSUserDefaults standardUserDefaults];

// saving an NSInteger
[prefs setInteger:42 forKey:@"integerKey"];

// This is suggested to synch prefs, but is not needed (I didn't put it in my tut)
[prefs synchronize]; 
```

**检索**

```
NSUserDefaults *prefs = [NSUserDefaults standardUserDefaults];

// getting an NSInteger
NSInteger myInt = [prefs integerForKey:@"integerKey"]; 
```

参考： http: [//www.icodeblog.com/2008/10/03/iphone-programming-tutorial-savingretrieving-data-using-nsuserdefaults/](http://www.icodeblog.com/2008/10/03/iphone-programming-tutorial-savingretrieving-data-using-nsuserdefaults/)

# php - 我的sql代码中的错误在哪里

> ID：12383092
> 
> 赞同：0
> 
> 时间：2012-09-12T07:23:57.510
> 
> 标签：php, mysql, sql

```
$fname = addslashes($fname);
$lname = addslashes($lname);
$dob = addslashes($dob);
$email = $_POST['email'];
$sql = 
 "INSERT INTO subscriber 
    (fname, lname, dob) 
  VALUES
    ('".$fname."', '".$lname."', '".$dob."') 
  WHERE email='".$email."'";

$register = mysql_query($sql) or die("insertion error"); 
```

我在 sql 查询“插入错误”中遇到错误。删除 WHERE 语句后，查询正在将数据插入数据库。什么是错误。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-09-12T07:24:55.727

您不能`where`在插入语句中使用。您可能正在考虑更新？

```
$sql = "update subscriber set fname='".$fname."', lname = '".$lname."', dob = '".$dob."'  WHERE email='".$email."'"; 
```

如果您的电子邮件是唯一值，您还可以将插入与更新结合起来，如下所示：

```
insert into 
    subscriber (fname, lname, dob, email) 
    values ('".$fname."', '".$lname."', '".$dob."', '".$email."') 
        on duplicate key update set fname='".$fname."', lname='".$lname."', dob='".$dob."' 
```

如果没有匹配的电子邮件，则第二个语法将插入一行（同样，这必须设置为表上的唯一约束），如果已经有一个，它会将数据更新为您的值通过了。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-09-12T07:25:19.040

基本上`INSERT`声明不能有where。唯一的 time`INSERT`语句可以在 where 使用 using 时`INSERT INTO...SELECT`使用。

选择语句的唯一语法是

```
INSERT INTO TableName VALUES (val1, val2, ..., colN)
and
INSERT INTO TableName (col1, col2) VALUES (val1, val2) 
```

另一个是

```
INSERT INTO tableName (col1, col2)
SELECT col1, col2
FROM tableX
WHERE .... 
```

基本上它所做的是将所有被选中的记录插入到另一个表中（*也可以是同一个表*）。

还有一件事，使用**[PDO](http://php.net/manual/en/book.pdo.php)**或**[MYSQLI](http://php.net/manual/en/book.mysqli.php)**

使用 PDO 扩展的示例：

```
<?php

    $dbh = new PDO('mysql:host=localhost;dbname=test', $user, $pass);
    $stmt = $dbh->prepare("INSERT INTO REGISTRY (name, value) VALUES (?, ?)");
    $stmt->bindParam(1, $name);
    $stmt->bindParam(2, $value);

    // insert one row
    $name = 'one';
    $value = 1;
    $stmt->execute();

?> 
```

这将允许您使用单引号插入记录。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-12T07:32:36.473

哎呀！！！！您不能使用`WHERE`带有语句的子句`INSERT`..如果您针对特定行，请使用`UPDATE`

```
$sql = "Update subscriber set fname = '".$fname."' , lname = '".$lname."' , dob = '".$dob."' 
WHERE email='".$email."'";
$register = mysql_query($sql) or die("insertion error"); 
```

# django - mongoengine继承django

> ID：12383093
> 
> 赞同：1
> 
> 时间：2012-09-12T07:23:59.907
> 
> 标签：django, inheritance, mongoengine

我试过这个例子：[http](http://mongoengine-odm.readthedocs.org/en/latest/tutorial.html?highlight=query%20document%20inheritance#posts) ://mongoengine-odm.readthedocs.org/en/latest/tutorial.html?highlight=query%20document%20inheritance#posts 但不适合我。

我想存储来自天气 api 的数据： [http ://api.met.no/weatherapi/locationforecast/1.8/?lat=46.079001;lon=14.51860012](http://api.met.no/weatherapi/locationforecast/1.8/?lat=46.079001;lon=14.51860012)

所以我有这样的models.py

```
import mongoengine

class Weather(mongoengine.Document):
    created = mongoengine.DateTimeField
    latitude = mongoengine.DecimalField
    longitude = mongoengine.DecimalField
    model_name = mongoengine.StringField

class Precipitation(Weather):
    dateFrom = mongoengine.DateTimeField(required=True)
    dateTo = mongoengine.DateTimeField(required=True)
    precipitation = mongoengine.DecimalField
    symbol = mongoengine.IntField(min_value=1, max_value=23)

class State(Weather):
    temperature = mongoengine.DecimalField
    windDirection = mongoengine.StringField
    windAngle = mongoengine.DecimalField 
```

尝试保存数据，例如：models.State.objects.create(temperature=17)

什么都没有保存！

我知道我在字段定义中缺少构造函数的参数，但我真的不知道如何实现它。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-12T08:32:07.313

您需要类实例，例如：

```
import mongoengine

class Weather(mongoengine.Document):
    created = mongoengine.DateTimeField()
    latitude = mongoengine.DecimalField()
    longitude = mongoengine.DecimalField()
    model_name = mongoengine.StringField()

class Precipitation(Weather):
    dateFrom = mongoengine.DateTimeField(required=True)
    dateTo = mongoengine.DateTimeField(required=True)
    precipitation = mongoengine.DecimalField
    symbol = mongoengine.IntField(min_value=1, max_value=23)

class State(Weather):
    temperature = mongoengine.DecimalField()
    windDirection = mongoengine.StringField()
    windAngle = mongoengine.DecimalField() 
```

# jquery - Jquery自动完成是指使用的texbox

> ID：12383097
> 
> 赞同：0
> 
> 时间：2012-09-12T07:24:32.237
> 
> 标签：jquery

嗨，我正在使用此网页[http://www.devbridge.com/projects/autocomplete/jquery/中的 jquery 自动完成功能](http://www.devbridge.com/projects/autocomplete/jquery/)

用法很简单

```
var options = { 
       serviceUrl:'Autocomplete', 
       minChars:3,
       deferRequestBy:200, 
       onSelect: function(value, data){ 
           alert('You selected: ' + value + ', ' + data); 
       }
 };

$('#someTextBox').autocomplete(options); 
```

我的问题是，如果我能以某种方式知道 onSelect 已应用于 someTextBox 因为如果我想在多个文本框上使用它，那么只有一个`onSelect`功能可能会很好。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-12T07:46:56.493

好的，我只是将 jquery 自动编译代码返回函数更改为此

```
onSelect: function (i) {
    var me, fn, s, d;
    me = this;
    fn = me.options.onSelect;
    s = me.suggestions[i];
    d = me.data[i];
    me.el.val(me.getValue(s));
    if ($.isFunction(fn)) { fn(s, d, me.el[0].id); }
}, 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-12T07:31:00.267

您可以对需要应用效果的所有文本框使用相同的文本框 ID。因此，通过在 js 中调用 textbox id，它将自动应用于所有具有相同 id 的 textboxex

# c - 为什么带有错误的结构会导致分段错误

> ID：12383099
> 
> 赞同：0
> 
> 时间：2012-09-12T07:24:39.173
> 
> 标签：c, struct

这是我的代码：

```
struct queue {
        int queue_arr[5];
        int rear;
        int front;
};

int main()
{
        struct queue q;
        int choice;

        queue_init(q);
}

queue_init(struct queue *q)
{
        int i = 0;
        q->rear = -1;
        q->front = -1;
        for (; i < MAX; i++) {
                q->queue_arr[i] = 0;
        }
} 
```

它会在执行时导致分段错误：

```
[root@workmachine test_cpp]# ./queue  Segmentation fault (core dumped) 
```

如果我删除结构，我将使用`int queue_arr[5]; int rear; int front;`全局分段错误消失。为什么？以及如何避免使用结构？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-12T07:26:01.763

您应该传递地址：

```
queue_init(&q);
           ^ 
```

我很惊讶它按原样编译。

# search - 搜索蜘蛛的机器人引擎名称

> ID：12383101
> 
> 赞同：1
> 
> 时间：2012-09-12T07:24:55.240
> 
> 标签：search, web-crawler

*   谷歌机器人
*   微软机器人
*   雅虎
*   冰机器人
*   googlebot 图像

这就是所有的大搜索引擎蜘蛛？或者有人知道更著名的蜘蛛？

我在那里写的蜘蛛的名字是最新的吗？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-12T07:29:49.783

这是所有类型的用户代理（机器人蜘蛛和其他）[用户代理](http://www.user-agents.org/)的列表，您可以使用确切的字符串名称来验证

# android - 相机服务器死机 - 某些设备中仍然存在错误 100

> ID：12383103
> 
> 赞同：5
> 
> 时间：2012-09-12T07:24:57.933
> 
> 标签：android, camera, video-recording

我正在尝试开发带有前后摄像头的录像机。该应用程序可以在后置（默认）和前置摄像头之间切换。当应用程序激活前置摄像头时，我按下录制按钮，应用程序进入错误方法，我释放并初始化相机和录制，但错误再次出现。任何想法？更新：我用下面的代码更新了 onError 方法，我认为我没有很好地发布和初始化相机，因为当应用程序执行此方法时，表面支架是黑色的并且没有给我什么相机看到

在这里，我的代码：

onError 方法：

```
 public void onError(MediaRecorder mr, int what, int extra) {
    stopRecording();

    //if Error 100, app must release the Camera object and instantiate a new one.
    if (what == 100) {
        if (error_100  == 2) { //Error 100 persists, change camera
            if (Camera.getNumberOfCameras() <= 1) {
                //No mas camaras para app
            } else {
                if (selected_camera == FRONT_CAMERA) {
                    selected_camera=BACK_CAMERA;
                } else {
                    selected_camera=FRONT_CAMERA;
                }
                selected_camera_button.setEnabled(false);
                Toast.makeText(this, "Initializing other camera", Toast.LENGTH_SHORT).show();
            }

        } else { //No camera init finish activity
            if (error_100 == 3) {
                Toast.makeText(this, "Initialize cameras failed", Toast.LENGTH_SHORT).show();
                finish();
            } else {
                Toast.makeText(this, "Recording error has occurred. Stopping the recording", Toast.LENGTH_SHORT).show();
            }
        }
        error_100++;

        initCamera();
        initCameraRecorder();
    }
} 
```

还有另一种方法：

```
/** Initializes the back/front camera */
private boolean initCamera() {
    try {
        camera  = getCameraInstance(selected_camera);

        Camera.Parameters camParams = camera.getParameters();
        camParams.set( "cam_mode", 1 );
        camParams.set("orientation", "portrait");

        checkCameraFlash(camParams);

        //Establish the rotation angle camera
        setAngleCameraRotation();
        camera.setDisplayOrientation(angle_rotation_camera);

        setRequestedOrientation(ActivityInfo.SCREEN_ORIENTATION_PORTRAIT);

        Establish 4:3 ratio and 480x640 if is posible
        setAspectResolutionCamera(camParams);

        camera.setParameters(camParams);

        //Camera eye
        video_view.getHolder().setFixedSize(height_video, width_video);

        LinearLayout.LayoutParams lp = new LinearLayout.LayoutParams(height_video, width_video);
        video_view.setLayoutParams(lp);

        camera.lock();

        surface_holder = video_view.getHolder();
        surface_holder.addCallback(this);
        surface_holder.setType(SurfaceHolder.SURFACE_TYPE_PUSH_BUFFERS);

        setPreviewCamera();

    } catch(Exception e) {
        Log.v("RecordVideo", "Could not initialize the Camera");
        return false;
    }
    return true;
}

/** Initializes the camera recorder before starts the recording */
private void initCameraRecorder() {

    if(media_recorder != null) return;

    String timeStamp = new SimpleDateFormat("yyyyMMdd_HHmmss").format(new Date());
    output_file_name = Environment.getExternalStoragePublicDirectory(Environment.DIRECTORY_DCIM) + File.separator + timeStamp + ".mp4";

    File outFile = new File(output_file_name);
    if(outFile.exists()) {
        outFile.delete();
    }

    try {
        camera.stopPreview();
        camera.unlock();
        media_recorder = new MediaRecorder();
        media_recorder.setCamera(camera);

        media_recorder.setAudioSource(MediaRecorder.AudioSource.CAMCORDER);
        media_recorder.setVideoSource(MediaRecorder.VideoSource.CAMERA);

        CamcorderProfile profile = CamcorderProfile.get(CamcorderProfile.QUALITY_HIGH);
        profile.videoBitRate = 885000;              //Medium quality
        profile.videoFrameHeight = height_video;
        profile.videoFrameWidth = width_video;
        media_recorder.setProfile(profile);

        media_recorder.setMaxDuration(21000);       // limit to 21 seconds
        media_recorder.setOrientationHint(setOrientationCameraRecorder());
        media_recorder.setPreviewDisplay(surface_holder.getSurface());
        media_recorder.setOutputFile(output_file_name);

        media_recorder.prepare();
        Log.v("RecordVideo", "MediaRecorder initialized");

    } catch(Exception e) {
        Log.v("RecordVideo", "MediaRecorder failed to initialize");
        e.printStackTrace();
    }
}

/** Starts the recording video */
private void beginRecording() {
    media_recorder.setOnInfoListener(this);
    media_recorder.setOnErrorListener(this);
    media_recorder.start();
    record_button.setTextColor(getResources().getColor(android.R.color.holo_red_dark));
}

/** Stops the recording video */
private void stopRecording() {
    if (media_recorder != null) {
        media_recorder.setOnErrorListener(null);
        media_recorder.setOnInfoListener(null);
        try {
            media_recorder.stop();
        } catch(IllegalStateException e) {
            // This can happen if the recorder has already stopped.
            Log.e("INFO:", "Got IllegalStateException in stopRecording");
        }
        releaseRecorder();
        record_button.setTextColor(getResources().getColor(android.R.color.black));
        releaseCamera();
    }

    video_task.cancel(true);

    output_file_name.isEmpty();

} 
```

# objective-c - 如何获取服务器上上传的图像是横向还是纵向模式 iphone

> ID：12383105
> 
> 赞同：0
> 
> 时间：2012-09-12T07:25:09.053
> 
> 标签：objective-c, ios, uiimageview, uiimageorientation, loading-image

我是目标 c 的新手。

我有两个问题。

我想做的是显示像 iphone galary 这样的图像。我正在使用滚动视频。我尝试在许多帖子中使用 fgalary 和其他提到的 galary，但它们不符合我的要求，因为我必须在其中进行许多自定义。

//修改评论

我想要做的是以单独的帧大小显示以移植模式拍摄的图像，如 CGRectMake(0, 0, 243, 314)，如果图像是在横向模式下拍摄的，则以单独的帧显示，如 CGRectMake(0, 0, 300, 200)..所有图像都上传到服务器上，就像之前我在同一帧中显示所有图像一样，所以图像在显示时看起来会拉伸，所以我就是这样做的。

我什至尝试从服务器获取图像加载的高度和宽度，如下面的代码所示，但这甚至不适用于从服务器加载的图像。请建议我一些更好的方法来解决我的问题。

我的代码

```
-(void)viewWillAppear:(BOOL)animated
{

//new code
float newWidth = 320 * [memoryData.memoryItemData count];
mailScrollView = [[UIScrollView alloc] initWithFrame:CGRectMake(0, 0, 320, 380)]; 
[mailScrollView setContentSize:CGSizeMake(newWidth, 380)];
[mailScrollView setPagingEnabled:YES];
[mailScrollView setShowsHorizontalScrollIndicator:NO];
int xcoordinate = 0;
int totalWidth,reminaderWidth;
for(int x=0;x<[memoryData.memoryItemData count];x++){
    currentItem = x;
    memoryItems *dataItem = (memoryItems*)[memoryData.memoryItemData objectAtIndex:currentItem];
    UIView *newImageView = [[UIView alloc] init];
    UIImageView *displayCurrentImage = [[UIImageView alloc] init];
    UIImageView *DescriptionView = [[UIImageView alloc] init];

    //for loading image using NYXProgressiveImageView
    //[displayCurrentImage loadImageAtURL:[NSURL URLWithString:dataItem.memoeryItemFullUrl]];

    //for lading image using UIImageView+WebCache.h
    [displayCurrentImage setImageWithURL:[NSURL URLWithString:dataItem.memoeryItemFullUrl]];

    UITextView *descriptionText = [[UITextView alloc] init];
    UILabel *dateLabel= [[UILabel alloc] init];
    UILabel *titleLabel= [[UILabel alloc] init];
    //for flip image
    UIButton *flipBtnImg = [UIButton buttonWithType:UIButtonTypeCustom];
    UIButton *flipBtnCmt = [UIButton buttonWithType:UIButtonTypeCustom];
    displayCurrentImage.userInteractionEnabled = YES;
    DescriptionView.userInteractionEnabled = YES;
    NSLog(@"height of data %f and width of image %f",displayCurrentImage.image.size.height,displayCurrentImage.image.size.width);
    if(displayCurrentImage.image.size.width < displayCurrentImage.image.size.height){                                xcoordinate=xcoordinate+38;
        flipBtnImg.frame = CGRectMake(208, 280, 30, 30);
        flipBtnCmt.frame = CGRectMake(208, 280, 30, 30);
        dateLabel.frame = CGRectMake(10, 10, 230, 20);               
        titleLabel.frame = CGRectMake(10, 35, 230, 30);
        descriptionText.frame = CGRectMake(10, 70, 230, 100);
        newImageView.frame = CGRectMake(xcoordinate, 22, 243, 314);
        displayCurrentImage.frame = CGRectMake(0, 0, 243, 314);
        DescriptionView.frame = CGRectMake(0, 0, 243, 314);                
        totalWidth = 243;
        reminaderWidth = 39;                         
    }else{                
        xcoordinate=xcoordinate+10;
        flipBtnImg.frame = CGRectMake(265, 165, 30, 30);
        flipBtnCmt.frame = CGRectMake(265, 165, 30, 30);
        dateLabel.frame = CGRectMake(10, 10, 290, 20);
        titleLabel.frame = CGRectMake(10, 35, 290, 20);
        descriptionText.frame = CGRectMake(10, 60, 290, 100);
        newImageView.frame = CGRectMake(xcoordinate, 80, 300, 200);
        displayCurrentImage.frame = CGRectMake(0, 0, 300, 200);   
        DescriptionView.frame = CGRectMake(0, 0, 300, 200);
        totalWidth = 300;
        reminaderWidth= 10;                
    }
    //for image setting
    //[displayCurrentImage setImageWithURL:[NSURL URLWithString:dataItem.memoeryItemFullUrl]];
    //displayCurrentImage.contentMode = UIViewContentModeScaleAspectFit;
    //[displayCurrentImage loadImageAtURL:[NSURL URLWithString:dataItem.memoeryItemFullUrl]];
    //end here

    //for description view
    //for date
    dateLabel.text = @" September 2012";
    dateLabel.backgroundColor = [UIColor clearColor];
    dateLabel.font = [[Globals sharedInstance] getSingleViewFont];

    //for title
    titleLabel.text = @" ROHGIT";
    titleLabel.backgroundColor = [UIColor clearColor];
    titleLabel.font = [[Globals sharedInstance] getSingleViewFont];

    //for description
    descriptionText.text = @"ROHIT test description";
    descriptionText.delegate =self;
    descriptionText.backgroundColor = [UIColor clearColor];
    descriptionText.font = [[Globals sharedInstance] getSingleViewFont];
    descriptionText.userInteractionEnabled = YES;
    //for description

    [DescriptionView addSubview:dateLabel];
    [DescriptionView addSubview:titleLabel];
    [DescriptionView addSubview:descriptionText];
    DescriptionView.hidden = YES;
    //description view end here
    displayCurrentImage.backgroundColor = [UIColor clearColor];
    //flipBtnImg.tag = currentImageIndex;

    //for flip btn
    [flipBtnImg setImage:[UIImage imageNamed:@"flip_img.png"] forState:UIControlStateNormal];                            
    [flipBtnImg addTarget:self action:@selector(flipImageClickedMultiple:) forControlEvents:UIControlEventTouchUpInside];
    flipBtnImg.tag = (currentItem *100)+2;
    flipBtnImg.backgroundColor = [UIColor clearColor];
    //flip btn end here
    //for flip comment
    [flipBtnCmt setImage:[UIImage imageNamed:@"flip_img.png"] forState:UIControlStateNormal];                           
    [flipBtnCmt addTarget:self action:@selector(flipImageClickedMultipleComm:) forControlEvents:UIControlEventTouchUpInside];
    flipBtnCmt.tag = (currentItem*100)+6;
    flipBtnCmt.backgroundColor = [UIColor clearColor ];
    //flip btn end here
    DescriptionView.backgroundColor = [UIColor colorWithRed:247/255.0 green:247/255.0 blue:214/255.0 alpha:1];

    [DescriptionView.layer setBorderColor: [[UIColor whiteColor] CGColor]];
    [DescriptionView.layer setBorderWidth: 5.0];

    [newImageView addSubview:displayCurrentImage];
    displayCurrentImage.tag = (currentItem*100)+3;
    [newImageView addSubview:DescriptionView];
    DescriptionView.tag = (currentItem*100)+4;

    newImageView.backgroundColor = [UIColor clearColor];
    [displayCurrentImage.layer setBorderColor: [[UIColor whiteColor] CGColor]];
    [displayCurrentImage.layer setBorderWidth: 5.0];        
    [displayCurrentImage addSubview:flipBtnImg];
    [DescriptionView addSubview:flipBtnCmt];
    [mailScrollView addSubview:newImageView];
    xcoordinate = xcoordinate + totalWidth + reminaderWidth;
    //currentImageIndex++;
}
mailScrollView.backgroundColor = [UIColor clearColor];
[self.view addSubview:mailScrollView];
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-12T09:25:35.643

这种类型你需要像这样打印/检测....

```
switch (self.rawImage.image.imageOrientation)
    {
        case UIImageOrientationUp:
            // would get you an exact copy of the original 
            NSLog(@"image orientation up");
            break;

        case UIImageOrientationUpMirrored:
            tran = CGAffineTransformMakeTranslation(rect.size.width, 0.0);
            tran = CGAffineTransformScale(tran, -1.0, 1.0);
            break;

        case UIImageOrientationDown:
            tran = CGAffineTransformMakeTranslation(rect.size.width,
                                                    rect.size.height);
            tran = CGAffineTransformRotate(tran, M_PI);
            break;

        case UIImageOrientationDownMirrored:
            tran = CGAffineTransformMakeTranslation(0.0, rect.size.height);
            tran = CGAffineTransformScale(tran, 1.0, -1.0);
            break;

        case UIImageOrientationLeft:
            bnds = swapWidthAndHeight(bnds);
            tran = CGAffineTransformMakeTranslation(0.0, rect.size.width);
            tran = CGAffineTransformRotate(tran, 3.0 * M_PI / 2.0);
            break;

        case UIImageOrientationLeftMirrored:
            bnds = swapWidthAndHeight(bnds);
            tran = CGAffineTransformMakeTranslation(rect.size.height,
                                                    rect.size.width);
            tran = CGAffineTransformScale(tran, -1.0, 1.0);
            tran = CGAffineTransformRotate(tran, 3.0 * M_PI / 2.0);
            break;

        case UIImageOrientationRight:
            bnds = swapWidthAndHeight(bnds);
            tran = CGAffineTransformMakeTranslation(rect.size.height, 0.0);
            tran = CGAffineTransformRotate(tran, M_PI / 2.0);
            break;

        case UIImageOrientationRightMirrored:
            bnds = swapWidthAndHeight(bnds);
            tran = CGAffineTransformMakeScale(-1.0, 1.0);
            tran = CGAffineTransformRotate(tran, M_PI / 2.0);
            break;

        default:
            // orientation value supplied is invalid
            assert(false);
            return nil;
    } 
```

我希望这能解决你的问题

# tomcat - 访问控制允许来源：* 在 tomcat 中

> ID：12383109
> 
> 赞同：33
> 
> 时间：2012-09-12T07:25:14.890
> 
> 标签：tomcat, http-headers

我想在我的 tomcat 容器中设置一个默认的 http 标头 -

> 访问控制允许来源：*

从 stackoverslow 和 google 上的各种不同链接，大多数都指向一个[资源](http://www.skill-guru.com/blog/2011/02/23/cross-domain-scripting-settings-on-tomcat/)。[这](http://feed.openmrs.org/tag/tomcat)再次说明了如何做到这一点。我已经复制了相同的内容，但仍然没有显示标题。这就是我所做的：1）在tomcat的/lib文件夹中复制cors.jar文件2）在web.xml中插入这个文本

```
<filter>
    <filter-name>CORS</filter-name>
    <filter-class>com.thetransactioncompany.cors.CORSFilter</filter-class>
    <init-param>
     <param-name>cors.allowOrigin</param-name>
        <param-value>*</param-value>
    </init-param>
    <init-param>
     <param-name>cors.supportedMethods</param-name>
        <param-value>GET, POST, HEAD, PUT, DELETE</param-value>
    </init-param>
    <init-param>
     <param-name>cors.supportedHeaders</param-name>
        <param-value>Content-Type, Last-Modified</param-value>
    </init-param>
    <init-param>
        <param-name>cors.exposedHeaders</param-name>
        <param-value>Set-Cookie</param-value>
    </init-param>
    <init-param>
        <param-name>cors.supportsCredentials</param-name>
        <param-value>true</param-value>
    </init-param>
</filter>

<filter-mapping>
    <filter-name>CORS</filter-name>
    <url-pattern>/*</url-pattern>
</filter-mapping> 
```

它不起作用，我很无助。我的tomcat版本是-6.0.6。请帮忙。

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2013-07-03T20:35:34.153

在撰写本文时，当前版本的 Tomcat 7 (7.0.41) 具有内置的 CORS 过滤器[http://tomcat.apache.org/tomcat-7.0-doc/config/filter.html#CORS_Filter](http://tomcat.apache.org/tomcat-7.0-doc/config/filter.html#CORS_Filter)

* * *

## 回答 #2

> 赞同：16
> 
> 时间：2014-03-04T06:36:34.590

出现此问题的原因是未将`jar`文件包含在项目中。我只是将它包含在tomcat lib中。`web.xml`现在在作品中使用以下内容：

```
<filter>
    <filter-name>springSecurityFilterChain</filter-name>
    <filter-class>
        org.springframework.web.filter.DelegatingFilterProxy
    </filter-class>
</filter>

 <filter-mapping>
    <filter-name>springSecurityFilterChain</filter-name>
    <url-pattern>/*</url-pattern>
</filter-mapping>

<filter>
    <filter-name>CORS</filter-name>
    <filter-class>com.thetransactioncompany.cors.CORSFilter</filter-class>

    <init-param>
        <param-name>cors.allowOrigin</param-name>
        <param-value>*</param-value>
    </init-param>
    <init-param>
        <param-name>cors.supportsCredentials</param-name>
        <param-value>false</param-value>
    </init-param>
    <init-param>
        <param-name>cors.supportedHeaders</param-name>
        <param-value>accept, authorization, origin</param-value>
    </init-param>
    <init-param>
        <param-name>cors.supportedMethods</param-name>
        <param-value>GET, POST, HEAD, OPTIONS</param-value>
    </init-param>
</filter>

<filter-mapping>
    <filter-name>CORS</filter-name>
    <url-pattern>/*</url-pattern>
</filter-mapping> 
```

以及您的项目依赖项中的以下内容：

```
<dependency>
    <groupId>com.thetransactioncompany</groupId>
    <artifactId>cors-filter</artifactId>
    <version>1.3.2</version>
</dependency> 
```

* * *

## 回答 #3

> 赞同：10
> 
> 时间：2013-02-12T15:56:57.040

改变这个：

```
<init-param>
    <param-name>cors.supportedHeaders</param-name>
    <param-value>Content-Type, Last-Modified</param-value>
</init-param> 
```

对此

```
<init-param>
    <param-name>cors.supportedHeaders</param-name>
    <param-value>Accept, Origin, X-Requested-With, Content-Type, Last-Modified</param-value>
</init-param> 
```

我必须这样做才能让任何事情发挥作用。

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2017-07-04T02:49:51.810

尝试这个。

1.编写自定义过滤器

```
 package com.dtd.util;

    import javax.servlet.*;
    import javax.servlet.http.HttpServletResponse;
    import java.io.IOException;

    public class CORSFilter implements Filter {

        @Override
        public void init(FilterConfig filterConfig) throws ServletException {

        }

        @Override
        public void doFilter(ServletRequest servletRequest, ServletResponse servletResponse, FilterChain filterChain) throws IOException, ServletException {
            HttpServletResponse httpResponse = (HttpServletResponse) servletResponse;
            httpResponse.addHeader("Access-Control-Allow-Origin", "*");
            filterChain.doFilter(servletRequest, servletResponse);
        }

        @Override
        public void destroy() {

        }
    } 
```

2.添加到web.xml

```
<filter>
    <filter-name>CorsFilter</filter-name>
    <filter-class>com.dtd.util.CORSFilter</filter-class>
</filter>

<filter-mapping>
    <filter-name>CorsFilter</filter-name>
    <url-pattern>/*</url-pattern>
 </filter-mapping> 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-11-01T17:39:05.277

请再次检查您的 web.xml。你可能会犯一些愚蠢的错误。由于我的应用程序使用相同的 init-param 配置运行良好...

如果问题仍然存在，请复制粘贴 web.xml。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2014-03-03T21:41:30.170

更改 IP 地址（笔记本电脑无线 DHCP）后，我不得不重新启动浏览器，这是我在 Web 应用程序中提到的“跨主机”，这解决了问题。

还要确保浏览器/主机添加的所有 cors 标头都被接受/允许，方法是将 then 包含在 cors.allowed.headers 中

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2021-02-08T08:08:30.693

我将*cors.support.credentials*设置为*true*以及*cors.allowed.origins*作为 *，这不起作用。

当 cors.allowed.origins 为 * 时，*cors.support.credentials*应为*false*（默认值或不应显式设置）。

[https://tomcat.apache.org/tomcat-7.0-doc/config/filter.html](https://tomcat.apache.org/tomcat-7.0-doc/config/filter.html)

# symfony - Symfony2，PagerFanta 结果

> ID：12383112
> 
> 赞同：3
> 
> 时间：2012-09-12T07:25:35.840
> 
> 标签：symfony, doctrine, pagerfanta

如何将结果作为来自 Symfony2.1.1 中 PagerFanta 的数组？

```
 $adapter = new \Pagerfanta\Adapter\DoctrineORMAdapter($query);
        $pager = new \Pagerfanta\Pagerfanta($adapter);
        $pager->setMaxPerPage(45);
        $data = $pager->getCurrentPageResults(); 
```

结果`print_r($data);`

```
ArrayIterator Object
(
    [storage:ArrayIterator:private] => Array
        (
            [0] => Trucking\MainBundle\Entity\Sparcs Object
                (
                    [id:Trucking\MainBundle\Entity\Sparcs:private] => 77940
                    [container:Trucking\MainBundle\Entity\Sparcs:private] => MEDUUUU
                    ...
                    ...
                    ... 
```

我想得到结果`getQuery->getArrayResult();`

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-12T07:41:42.193

1.  我会做查询

    ```
    $array = $query->getResult(Query::HYDRATE_ARRAY); 
    ```

2.  使用 ArrayAdapter

    ```
    $adapter = new ArrayAdapter($array);
    $pagerfanta = new Pagerfanta($adapter); 
    ```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-11-26T23:00:59.747

您必须将水合模式设置为从适配器查询：

```
$adapter = new DoctrineORMAdapter($queryBuilder);
$adapter->getQuery()->setHydrationMode(Query::HYDRATE_ARRAY);
$pager = new Pagerfanta($adapter); 
```

# c# - microsoft.ace.oledb.12.0 提供程序未在本地计算机上注册

> ID：12383115
> 
> 赞同：1
> 
> 时间：2012-09-12T07:25:40.257
> 
> 标签：c#, asp.net

我有以下程序，我想在 MS-Access 中插入值。我收到错误“microsoft.ace.oledb.12.0 提供程序未在本地计算机上注册”

我已经按照一些开发人员的建议安装了数据库引擎，但我仍然收到错误消息。

我正在使用 VS-2008 和 MS-Access-2007 在 Vista 机器上编写代码。

请帮我解决错误

公共部分类Form1：表格

```
{
    public Form1()
    {
        InitializeComponent();
    }
    OleDbConnection con;
    OleDbCommand cmd;
    private void btnSubmit_Click(object sender, EventArgs e)
    {
        try
        {
             con = new OleDbConnection("Provider=Microsft.ACE.Oledb.12.0;Data Source=C:\\Users\\Satish\\Documents\\Testing.accdb");
            con.Open();
            string cmdText = "Insert Into UserDetail (UsrName,Age,Address,MobileNo) Values ('" + txtName.Text.ToString().Trim() + "','" + txtAge.Text.ToString().Trim() + "','" + txtAddress.Text.ToString().Trim() + "','" + txtMobile.Text.ToString().Trim() + "')";
             cmd = new OleDbCommand(cmdText, con);
            cmd.ExecuteNonQuery();
            con.Close();

        }
        catch (Exception ex)
        {
            MessageBox.Show(ex.Message);
        }

    }

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-12T08:04:09.113

尝试将高级编译配置更改为 x86。这通常是因为您拥有 64 位操作系统。

在VS2008中

构建 -> 配置管理器 -> 活动解决方案平台： -> 新建 -> 键入或选择新平台 -> x86 -> 确定

**编辑：**

尝试以下操作：

去

```
C:\Windows\SysWOW64 
```

打开`odbcad32.exe`

如果您在列表中找不到 excel，只需单击添加并添加它

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-12T13:16:33.100

我之前在安装了 Office 2003 而不是 Office 2007 的用户计算机上部署应用程序时遇到过这个问题。在我看来，您计算机上的 Office 版本没有正确安装。

一种可能的解决方法是将您的 Provider 更改为以前的版本，例如 Microsoft.ace.oledb.4.0，然后查看相同的错误是否仍然存在。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-12T07:31:12.560

你可以注册你的程序集`RegSrv32`

因为您使用`COM`, 并且 COM 必须重新注册。

链接：http: [//msdn.microsoft.com/en-us/library/ms859484.aspx](http://msdn.microsoft.com/en-us/library/ms859484.aspx)

RegSrv32 允许您在注册库中注册您的 COM（microsoft.ace.oledb.12.0 提供程序）

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-09-24T08:42:53.907

您需要检查的第一件事是您的应用程序的构建配置。

*   如果您已经**在 x86 平台下构建了项目**，那么为了解决您的问题，您应该在您的机器上安装以下软件包：

    1.  要使用“Microsoft.ACE.OLEDB.12.0”提供程序，您必须先 **安装 Microsoft Access Database Engine 2010 Redistributable** ，此安装可在以下网址获得：http: [//www.microsoft.com/download/en/details.aspx ?id=13255](http://www.microsoft.com/download/en/details.aspx?id=13255)。

        安装完成后，尝试运行您的应用程序，如果这很好地解决了问题，如果没有，请继续执行步骤 2。

    2.  下一步是一个无法解释的解决方法，它适用于 Office 2010，即使它是 Office 2007 的数据连接组件。我不太确定为什么会这样，但它确实有效，并且已被证明在几乎所有情况下都有效。您需要**安装 2007 Office System 驱动程序：数据连接组件**，此安装位于：http: [//www.microsoft.com/download/en/confirmation.aspx?id=23734](http://www.microsoft.com/download/en/confirmation.aspx?id=23734)。

        安装完成后，尝试运行您的应用程序，这应该可以解决问题。

*   如果您尝试运行**在 x64 或 AnyCPU 平台下构建的应用程序**，我建议您首先验证它在 x86 平台下是否按预期运行。如果它不在该 x86 平台下运行，请执行第一部分中的步骤并验证它是否按预期运行。

    我确实读到了包括 OLEDB 数据库驱动程序在内的 MS Access 驱动程序只能在 x86 平台下工作，并且在 x64 或 AnyCPU 平台下不兼容。但这似乎是不真实的。我在构建 x86 时验证了我的应用程序正在运行，然后我使用被动标志安装了 Access 数据库引擎。

    1.  首先在本地下载文件你可以在这里下载安装：http: [//www.microsoft.com/en-us/download/details.aspx?id=13255](http://www.microsoft.com/en-us/download/details.aspx?id=13255)
    2.  使用带有“/被动”标志的命令提示符进行安装。 **在命令提示符下运行以下命令：'AccessDatabaseEngine_x64.exe /passive'**

    在这两个步骤之后，我设法在 x64 或 AnyCPU 构建配置中运行我的应用程序。这似乎解决了我的问题。

注意：步骤的顺序似乎有所不同，因此请遵循。

# javascript - 使用 javascript 在客户端上使用 web 服务

> ID：12383121
> 
> 赞同：0
> 
> 时间：2012-09-12T07:26:11.660
> 
> 标签：javascript, web-services, webservice-client

我发现在客户端上使用 Web 服务的做法并不常见，对此我有疑问。在客户端使用 Web 服务是不好的做法吗？暴露 web 服务是否会使您的应用程序处于危险之中。在服务器上而不是客户端上调用 Web 服务的主要动机是什么，因为逻辑表明对服务器的调用次数会变得更少，整个过程会移动得更快？

谢谢舒维克

PS：我不确定是否与我认为的广泛实践相反，如果是这样，那么我的想法可能完全错误。因为我找不到任何关于谷歌搜索的真实文章，所以我问了这个问题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-12T07:32:12.700

它完全取决于 Web 服务的性质以及您对它们的处理方式，如果 Web 服务是开放的并且不需要身份验证或证书验证，那么您显然可以从客户端加载它。

如果 Web 服务公开了一些您不想向最终用户公开的关键信息，则将其加载到服务器上是一种做法。

如果你想对 web 服务返回的数据做一个业务逻辑，又不想把逻辑暴露给外部世界，你可以在服务器上做。

我会说这完全取决于 Web 服务的类型以及您使用 Web 服务所做的工作。

例如：如果它是一个开放的天气 web 服务，没有身份验证等，我认为将它放在服务器上没有任何价值，除非你想增加服务器上的负载

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-12T07:34:37.380

浏览此[Sun Link](http://java.sun.com/blueprints/webservices/using/webservbp2.html)

完全取决于你想在那里使用的网络服务类型。

这可能会帮助您进一步发展。

# php - 捕获所有常见类型的重定向、标头、元、JavaScript 等

> ID：12383122
> 
> 赞同：-1
> 
> 时间：2012-09-12T07:26:13.330
> 
> 标签：php, javascript, redirect, http-headers, http-redirect

如果通过任何方式重定向 URL，我需要一个测试 URL 的函数。

到目前为止，我已经使用 cURL 来捕获标头重定向，但显然还有更多方法可以实现重定向。

例如。

```
<meta http-equiv="refresh" content="0;url=/somewhere/on/this/server" /> 
```

或 JS 脚本

```
window.location = 'http://melbourne.ag'; 
```

等等

我想知道是否有人有涵盖所有这些的解决方案。我会继续研究我的，并将结果发布在这里。

此外，一种快速的解析方式

```
<meta http-equiv="refresh"... 
```

在 PHP 中的任何人？

我认为这将包含在 PHP 的原生 get_meta_tags() 中……但我想错了：/

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-12T09:16:37.117

它可以为标记语言完成（任何简单的标记解析器都可以），但一般不能用于像 JavaScript 这样的编程语言。

在 Web 文档中的程序中重定向相当于停止该程序。您正在要求一个能够判断另一个*任意*程序是否会停止的程序。这在计算机科学中被称为[停机问题](http://en.wikipedia.org/wiki/Halting_problem)，是第一个不可判定的问题。

也就是说，您只能*正确*判断资源*子集*是否会发生重定向。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-10-06T05:35:27.267

到了一半，我会在编写 JS 检查时添加它们......

```
 function checkRedirect($url){
    // returns the redirected URL or the original
    $ch = curl_init();
    curl_setopt($ch, CURLOPT_HEADER, true);
    curl_setopt($ch, CURLOPT_RETURNTRANSFER, true);
    curl_setopt($ch, CURLOPT_URL, $url);
    $out = curl_exec($ch);

    $out = str_replace("\r", "", $out);

    $headers_end = strpos($out, "\n\n");
    if( $headers_end !== false ) { 
        $out = substr($out, 0, $headers_end);
    }   

    $headers = explode("\n", $out);
    foreach($headers as $header) {
        if(strtolower(substr($header, 0, 10)) == "location: " ) { 
            $target = substr($header, 10);
            return $target;
        }   
    }   

     return $url;
 } 
```

# openssl - 客户证书

> ID：12383127
> 
> 赞同：0
> 
> 时间：2012-09-12T07:26:44.367
> 
> 标签：openssl

我构建了一个客户端软件来与服务器通信。连接应该是安全的（SSL）我使用用于 linux 的 openssl 库。在 SSL 握手期间，服务器询问我的客户端证书，但我没有。当我用浏览器连接到该服务器浏览器保存证书，我找到了它。然后我把它放在我的源代码中，如下所示：

```
if (SSL_CTX_use_certificate_file(ctx, "client.crt", SSL_FILETYPE_PEM) <= 0)
{
    ERR_print_errors_fp(stderr);
    exit(1);
} 
```

但是服务器仍然向我发送我的客户端证书请求并断开连接。我想我还需要一个文件 - 我必须发送但我不知道在哪里可以找到它的密钥文件。有人可以帮忙吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-12T08:29:46.947

假设您可以找到您的私钥，您可以简单地使用`int SSL_CTX_use_PrivateKey_file(SSL_CTX *ctx, const char *file, int type`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-23T14:54:51.237

正如 Jumbogram 所说，您必须将匹配的私钥加载到您尝试加载的证书文件中。您不能只生成一个新密钥并使用它，因为密钥和使用该密钥签名的证书不匹配。

相反，使用 openssl 生成一个新的密钥和证书对，并将 SSL_CTX_* 函数指向它们。

# php - 此扩展不支持 InvalidArgumentException 驱动程序“ORM”

> ID：12383130
> 
> 赞同：0
> 
> 时间：2012-09-12T07:27:05.560
> 
> 标签：php, symfony, doctrine-orm

我不知道为什么在使用此文档[http://sylius.readthedocs.org/en/latest/bundles/SyliusAssortmentBundle.html安装 Sylius Assortment Bundle 后显示此错误“[InvalidArgumentException] Driver “ORM” is unsupported for this extension”](http://sylius.readthedocs.org/en/latest/bundles/SyliusAssortmentBundle.html)

在 config.yml 添加这些行后显示错误：

```
sylius_assortment:
    driver: ORM
    classes:
        model:
            product: Application\Bundle\AssortmentBundle\Entity\Product 
```

请任何人建议我我做错了什么..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-24T06:38:32.260

驱动程序名称已更改为，`doctrine/orm`而不仅仅是`ORM`. 文档已过时。我已经修复它并添加了一个拉取请求。它应该很快就会更新。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-12T07:34:29.043

使用 YAML（配置格式），您必须保留缩进

所以用空格缩进 sylius_assortment 的主体：

```
sylius_assortment:
    driver: ORM
    classes:
        model:
            product: Application\Bundle\AssortmentBundle\Entity\Product 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-13T09:21:54.267

我解决了。我只是添加了这段代码。然后它工作了。

```
sylius_assortment:
    driver: doctrine/orm
    classes:
        model:
            product: Application\Bundle\AssortmentBundle\Entity\Product 
```

# boost - 如何在 WDK 环境中使用 boost 库

> ID：12383131
> 
> 赞同：1
> 
> 时间：2012-09-12T07:27:05.870
> 
> 标签：boost, wdk

我想编译我的 c plus plus 项目，它使用带有 WDK 而不是 VisualStudio 的 boost 库。

我的电脑操作系统是Windows7-64bit，WDK版本是7.6，boost库版本是1.51

一旦我编译了我的源代码项目，WDK 编译器就会发生错误：

```
e:\lib\boost_1_51_0\boost\array.hpp(72) : error C2039: 'ptrdiff_t' : is not a member of 'std' . 
```

整个项目的文件内容如下：

文件来源：

```
TARGETTYPE=PROGRAM
TARGETNAME=helloworld

UMENTRY=main
USE_MSVCRT=1
USE_NATIVE_EH=1

#
# use iostream package and STL
#
USE_IOSTREAM=1
USE_STL=1
STL_VER=70

#
# my boost library root directory
#
BOOST_INC_PATH=E:\lib\boost_1_51_0

INCLUDES=$(BOOST_INC_PATH)
TARGETLIBS=$(SDK_LIB_PATH)\user32.lib

SOURCES=HelloWorld.cpp

UMTYPE=console
UMBASE=0x4000000 
```

文件 HelloWorld.cpp：

```
#include <iostream>
#include <vector>
#include <string>
#include <boost/array.hpp> 

void InvokeVector()
{
    //invoke STL's vector
    std::vector<std::string> vec;
    vec.push_back("Entry ");
    vec.push_back("of ");
    vec.push_back("Vector");
    vec.push_back("……\n");
    //print vec
    for (int i=0; i<vec.size(); i++) {
        std::cout<<vec.at(i);
    }
}

void InvokeBoost()
{
    //invoke Boost's array<T, N>
    boost::array<int, 3> arr = {1, 2, 3};
    for (int i=0; i<arr.size(); i++) {
        std::cout<<"arr["<<i<<"]"<<"is" <<arr[i]<<std::endl;
    }
}

int main()
{
//  InvokeVector();  //run normally
    InvokeBoost(); //it will occure an error
    return 0;
} 
```

你能教我如何解决这个问题吗？任何帮助将不胜感激！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-14T02:40:04.197

简短的回答：没有。

但是你可以移植一些。

这里解释得很好：[NT Insider:Guest Article: C++ in an NT Driver](http://www.osronline.com/article.cfm?article=490)

> 内核中 C++ 的主要问题之一是该语言的大多数“好”特性在该模式下不直接可用。有些很容易重新创建，我们将看到如何做到这一点。但是，应该忘记一些特性，例如 C++ 异常，它们与内核异常不同。
> 
> 这些特性必须被遗忘，因为内核模式不支持它们。翻译：不编译。如果您有时间和精力，您可能会尝试将它们移植到内核模式，但坦率地说，异常对于内核模式来说太慢了。这将对您的 C++ 编码风格产生影响，这是您应该牢记的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-11-01T10:47:09.590

更长的答案 - 是的

只需添加

typedef int ptrdiff_t;

在拉入升压头之前，一切都会很好地进行基本升压

# c# - 为什么我的 asyncResult 总是为空？

> ID：12383132
> 
> 赞同：0
> 
> 时间：2012-09-12T07:27:10.270
> 
> 标签：c#, asynchronous, iasyncresult

我有以下使用异步操作的程序，但返回的 IAsyncResult.AsyncState 始终为空。

我做错了什么？

```
public interface ICommandService
{
[OperationContract(AsyncPattern = true)]
IAsyncResult BeginLogin(string userName, string password, AsyncCallback callback, object state);

string EndLogin(IAsyncResult result);
}

class CommandService : ICommandService
{
    public string Login(string userName, string password)
    {            
        return "dorcohen";
    }

    private Func<string, string, string> _LoginDelgateObject;

    public IAsyncResult BeginLogin(string userName, string password, AsyncCallback callback, object state)
    {
        Func<string, string, string> function = new Func<string, string, string>(Login);
        _LoginDelgateObject = function;
        IAsyncResult result = function.BeginInvoke(userName, password, callback, state);
        return result;
    }

    public string EndLogin(IAsyncResult result)
    {
        CommandService test = result.AsyncState as CommandService;
        return test._LoginDelgateObject.EndInvoke(result);
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-12T07:33:17.003

`BeginLogin`你不能在方法中使用下面的代码吗

```
function.BeginInvoke(userName, password, callback, this); 
```

# sql - MS SQL 2005-回滚更新查询

> ID：12383137
> 
> 赞同：0
> 
> 时间：2012-09-12T07:27:43.293
> 
> 标签：sql, sql-server-2005, rollback

我正在使用 MS SQL Server 2005 企业版。我执行了一个更新查询来影响一行和一列中的记录。

```
update HS_SM_USERACCOUNT 
set ACCOUNTPOLICYTYPE=1  
where EMP_NUMBER='000540' and USERID='03510410@' 
```

之前调用的列在 WHERE 子句中为该特定条件`ACCOUNTPOLICYTYPE`保存值。`1`现在我想在不再次执行更新查询的情况下获得以前的状态。

会`ROLLBACK`帮助我吗？请帮助我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-12T07:31:10.127

不，它已经改变了。如果您想知道它是什么，请从备份中恢复

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-12T07:33:00.453

除非您在 TRANSACTION 范围内执行上述查询 - 即在`BEGIN TRAN`/`COMMIT / ROLLBACK TRAN`块内，否则该`ROLLBACK`命令将毫无用处。

在这种情况下，除了恢复该表数据的旧备份之外，您无法恢复使用上述语句更新的状态

# jquery - 防止可排序

> ID：12383138
> 
> 赞同：0
> 
> 时间：2012-09-12T07:27:49.553
> 
> 标签：jquery, asp.net-mvc-3

我正在使用[jquery 可排序功能](http://jqueryui.com/demos/sortable/)，但我遇到了一些问题。

我的标题 'Name' 'Date from' 'Date To' 'Priority' 是可移动的，它不应该是。我不能把它放在桌子上的其他任何地方，这也是不可能的，所以没关系。

第一个表的代码：

**HTML：**

```
<table id="sort" class="table table-striped table-bordered table-condensed">
    <tbody>
        <tr>
            <th class="cellWidth40"> Name</th>
            <th class="cellWidth20"> Date from </th>
            <th class="cellWidth20"> Date to </th>
            <th class="cellWidth15"> Priority</th>
            <th></th>
        </tr>
    </tbody>
    @foreach (var item2 in Model.ContinuousRouteModels.Where(p => p.Active).OrderBy(p => p.Priority))
    {
        <tr class="priorityRow">
            <td id="tableDragSort">
                @Html.HiddenFor(modelItem => item2.Id, new { @class = "routeIdentifier" })
                @Html.DisplayFor(modelItem => item2.Name)
            </td>
            <td>
                @Html.DisplayFor(modelItem => item2.ValidFrom)
            </td>
            <td>
                @Html.DisplayFor(modelItem => item2.ValidTo)
            </td>
            <td class="routePriority">
                <span>@Html.DisplayTextFor(modelItem => item2.Priority)</span>
            </td>
            <td class="cellWidth5">
                <a href="@Url.Action("Copy", "Route", new { id = item2.Id })"><i class="icon-file" alt="Kopiere rute" ></i></a>
                <a href="@Url.Action("Edit", "Route", new { id = item2.Id })"><i class="icon-edit" alt="Redigere rute"></i></a>
                <a class="deleteLink" href="@Url.Action("DeleteRoute", "Route", new { id = item2.Id })"><i class="icon-trash" alt="Slette rute"></i></a>
            </td>
        </tr>
    }
</table> 
```

**查询：**

```
$("#sort tbody").css("cursor", "n-resize");
$("#sort tbody").sortable({
    helper: fixHelper,
    opacity: 0.5,
    update: function(event, ui) {
        updatePriorityTable();
    }
}).disableSelection(); 
```

**第二张表：**

“您的路由模式 ID 延迟”

我的另一个应该几乎相同的表具有不同的行为。此表中的表头可以移动，也可以放在表内。两者都不应该

有谁知道出了什么问题？

第二个表的代码：

**HTML：**

```
<table id="RoutePatternBusStops" class="table table-striped table-bordered table-condensed" style="width:270px">
                <tbody>
                    <tr>
                        <th style="text-align: left">Your routepattern</th>
                        <th>Id</th>
                        <th>Delay</th>
                    </tr>
                </tbody>
                @foreach (var item2 in Model.RoutePatternBusStops.OrderBy(p => p.Delay))
                {
                    <tr>
                        <td>
                            <input name="RoutePatternBusStops.BusStopId" type="hidden" value="@item2.BusStop.Id">@item2.BusStop.Name
                        </td>
                        <td>
                            @item2.BusStop.Id
                        </td> 
                        <td>
                            <input type="text" style="width: 20px" name="RoutePatternBusStops.Delay" value="@item2.Delay">
                        </td>
                    </tr>
                }

            </table> 
```

**查询：**

```
$("#RoutePatternBusStops tbody").css("cursor", "n-resize");
    $("#RoutePatternBusStops tbody").sortable({
        helper: fixHelper,
        opacity: 0.5,
        update: function(event, ui) {

        }
    }).disableSelection(); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-12T07:29:54.620

把标题放在`<thead></thead>`里面`<tbody></tbody>`

# postgresql - 同时在多个postgresql实例中更改DDL？

> ID：12383141
> 
> 赞同：1
> 
> 时间：2012-09-12T07:28:01.987
> 
> 标签：postgresql, database-schema, ddl, database-administration

1 个服务器上运行 4 个 postgresql 实例。我想同时对所有这些进行 ddl 更改。

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-12T08:08:29.423

编写一个 shell 脚本（如果你在 *nix 上）或`.cmd`批处理文件 / `.vbs`（如果你在 Windows 上）来做。让脚本调用`psql -f /path/to/ddl.sql`和 IP/端口、数据库名称等。

或者，使用 Python 等具有适当 PostgreSQL 绑定的语言编写脚本。让脚本循环遍历数据库并为每个数据库运行 DDL。例如，在 Python 中，以下（未经测试的）脚本应该可以解决问题：

```
import psycopg2
conn_definitions = [
    "dbname=db1 port=5432 host=127.0.0.1",
    "dbname=db2 port=5432 host=127.0.0.1",
    "dbname=db3 port=5432 host=127.0.0.1",
    "dbname=db4 port=5432 host=127.0.0.1",
]
ddl = """
    CREATE TABLE blah (
        blah integer
    );
    CREATE INDEX blah_blah_idx ON blah(blah);
"""
connections = []
cursors = []
for conn_info in conn_definitions:
    conn = psycopg2.connect(conn_info)
    curs = conn.cursor()
    cursors.append(curs)
    connections.append(conn)
 for curs in cursors:
    curs.execute("BEGIN;")
 for curs in cursors:
    curs.execute(ddl)
 for curs in cursors:
    curs.execute("COMMIT;")
 for conn in connections:
    conn.close() 
```

如果需要，可以通过将 DDL 拆分为您循环的语句数组来进行增强，以便您可以执行每个语句的错误处理。

`select datname from pg_database`您还可以通过为每个主机连接到一个数据库并运行以获取其他数据库的列表来动态生成连接。

# jquery-ui - 在 IE8 的下一行找不到 HighChart 'tooltip' 对象

> ID：12383156
> 
> 赞同：0
> 
> 时间：2012-09-12T07:28:49.050
> 
> 标签：jquery-ui, highcharts

我正在使用带有 JQuery（ASP.Net、C#、MVC）的 HighCharts 在我的网页上显示图表。我使用下面的代码在页面加载时最初显示工具提示。当鼠标移出图表区域时，还可以保留工具提示和十字准线。感谢@jugal-thakkar 的回答

```
chart = new Highcharts.Chart({
... <my chart options go here>
...
});

...
chart.tooltip.refresh([chart.series[0].points[1]]);
chart.tooltip.hide = function () { };
chart.tooltip.hideCrosshairs = function () { }; 
```

参考我之前的帖子[在这里](https://stackoverflow.com/questions/12349249/show-highcharts-tooltip-when-chart-loads/12350047#12350047)，我遇到了 IE8 浏览器的问题。首次加载页面时未找到工具提示对象。然后刷新页面后，它开始正常工作。

我在这里错过了任何 IE8 修复吗？想知道为什么它只在第一次时才找到工具提示对象！

这是 IE8 上 F12 中的控制台登录：

```
'tooltip' is null or not an object 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-17T01:03:17.643

工具提示对象在`document.onreadystatechange`以 状态触发之前不会被实例化`complete`。

如果您将以下内容添加到您的代码中，那么它应该推迟尝试提升工具提示，直到它被创建

```
document.attachEvent('onreadystatechange', function () {
    if (document.readyState === 'complete') {
        chart.tooltip.refresh([chart.series[0].points[1]]);
        chart.tooltip.hide = function () { };
        chart.tooltip.hideCrosshairs = function () { };
    }
}); 
```

# c#-4.0 - 如何在 Windows Phone 8 中获得实时相机预览

> ID：12383162
> 
> 赞同：1
> 
> 时间：2012-09-12T07:29:00.703
> 
> 标签：c#-4.0

我想在 Windows phone8 中创建一个应用程序。在这个应用程序中，我想在 Windows phone 8 中使用 C# 在多帧中显示具有不同效果的实时相机预览。请给我一个解决方案

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-18T16:09:24.637

要在 Windows phone 8 中使用相机，您需要使用`PhotoCamera`对象。最好像这样创建这个对象`OnNavigatedTo`：

```
protected override void OnNavigatedTo (System.Windows.Navigation.NavigationEventArgs e) 
{ 
    if (PhotoCamera.IsCameraTypeSupported(CameraType.Primary) == true) 
    { 
        cam = new PhotoCamera(CameraType.Primary); 
        cam.CaptureImageAvailable += new EventHandler<Microsoft.Devices.ContentReadyEventArgs>(cam_CaptureImageAvailable); 
        viewfinderBrush.SetSource(cam); 
    }
    else 
    {
        txtMessage.Text = "A Camera is not available on this device."; }
    }   
}
// dispose when we leave
protected override void OnNavigatingFrom (System.Windows.Navigation.NavigatingCancelEventArgs e) 
{ 
    if (cam != null) 
    { 
        cam.Dispose(); 
    } 
} 
```

要实际从相机捕获图像，您可以调用cam 对象上的***CaptureImage方法。***

# javascript - 混淆错误与 if 语句

> ID：12383173
> 
> 赞同：1
> 
> 时间：2012-09-12T07:29:41.453
> 
> 标签：javascript, regex, if-statement, greasemonkey

我有一个 Greasemonkey 脚本，可以跟踪`unicreatures.com`.

我想计算的一件事是点击页面上的某些链接，但不是所有链接。

这些需要计算， `http://unicreatures.com/explore.php?area=sea&id=89&key=bf12` 这些不应该计算， `http://unicreatures.com/explore.php?area=sea&gather=5&enc=394844&r=`

有人帮我找出了一个可以满足我要求的正则表达式，但我必须将每个不同的探索位置 ( `area=**`) 编码到其中，所以我认为这行不通。

**正则表达式版本**

```
var links = document.getElementsByTagName( 'a' );

for ( var i = 0; i < links.length; i++ ) {
var link = links[i];
if ( /area=sea(?!\&gather)/.test( link.href )) {
    link.addEventListener( 'click', function () {
localStorage.steps=Number(localStorage.steps)+1
       // alert(localStorage.steps + ' in Sargasso' );
    }, true );
}
} 
```

显然，我不想要十亿个 if 语句用于 的不同值`area=`，而且我找不到将变量添加到正则表达式的方法。

**所以我终于找到了一些字符串操作命令并将其放在一起：**

```
var url = window.location.href;
var startOf=url.indexOf("=")+1;
var endOf=url.indexOf("&");
var loc =url.substring(startOf,endOf);

var links = document.getElementsByTagName( 'a' );

for ( var i = 0; i < links.length; i++ ) {
var link = links[i];
if (url.indexOf("area=")>=0 && url.indexOf("gather=")<0) {
    link.addEventListener( 'click', function () {
localStorage.steps=Number(localStorage.steps)+1
localStorage[loc+"Steps"]=Number(localStorage[loc+"Steps"])+1
        alert(localStorage[loc+"Steps"] +" in local"+loc);
    }, true );
}
} 
```

出于某种原因，即使第二个条件为假，它也很重要。这是我在某处出现语法错误的简单案例，还是Greasemonkey错误？我在控制台中没有任何错误。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-12T07:53:25.000

尝试调整您的正则表达式版本，而不是这样：

```
if ( /area=sea(?!\&gather)/.test( link.href )) { 
```

使用这个正则表达式：

```
if ( /area=(\w*)&id=/.test( link.href )) { 
```

这将匹配所有具有“area”参数后跟“id”参数的链接，这似乎足以匹配您想要的链接。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-12T08:07:02.203

预过滤链接并测试**link.href**，而不是`url`之前代码设置的页面地址。

```
var linksWithArea   = document.querySelectorAll ("a[href*='area=']");

for (var J = linksWithArea.length - 1;  J >= 0;  --J) {
    var link        = linksWithArea[J];
    if ( ! /gather=/i.test (link.href) ) {
        link.addEventListener ('click', function () {
            localStorage.steps          = Number(localStorage.steps) + 1;
            localStorage[loc+"Steps"]   = Number(localStorage[loc+"Steps"]) + 1;
            alert(localStorage[loc+"Steps"] +" in local"+loc);
        }, true );
    }
} 
```

# grails - 如何安装 gradle-grails-plugin？

> ID：12383176
> 
> 赞同：2
> 
> 时间：2012-09-12T07:30:03.357
> 
> 标签：grails, gradle, grails-plugin

在这里完成 gradle nooby。

我希望能够从 gradle 执行 grails 构建命令，如“grails compile”、“grails test-app”等。

我在以下网址找到了 Peter Ledbrook 的 grails-gradle-plugin：[https](https://github.com/grails/grails-gradle-plugin) ://github.com/grails/grails-gradle-plugin 。

克隆存储库我得到一些文件和文件夹。在自述文件中它说“通过 buildscript {} 包含所需的 JAR 并‘应用’插件”。我肯定得到了应用部分，但是如何添加 JAR？哪个罐子？是否需要对下载插件文件夹中的build文件使用gradle并编译jar？那些我得到 jar 我应该把它放在哪里以及如何将它包含在我的项目 build.gradle 文件中？

我有一种感觉，这将非常容易，但我就是无法让它发挥作用。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-05T07:31:58.693

在 Gradle 中，jar 被添加到构建脚本或通过`dependencies`闭包添加到您的应用程序类路径中，例如

```
dependencies { 
  compile "org.grails:grails-crud:1.3.4"
  compile "org.grails:grails-gorm:1.3.4"
  compile "ch.qos.logback:logback-core:1.0.7"
  compile "org.slf4j:slf4j-api:1.7.2"
} 
```

`compile`是许多配置之一的名称（还有`test`等`runtime`），例如 " `org.grails:grails-crud:1.3.4`" 是对公共存储库之一中的 jar 的引用，它们也在`repositories`关闭时的脚本中指定。

[您可以在http://gradle.org/docs/current/userguide/dependency_management.html](http://gradle.org/docs/current/userguide/dependency_management.html)中阅读有关 Gradle 依赖管理的更多信息。

对于您的 Grails 项目，您需要定义一个类似于 README 中描述的 build.gradle 文件。

尽管我今天尝试使用该插件和`gradle init`命令创建一个简单的 Grails 项目，但没有成功。我为此创建了一个问题：[https](https://github.com/grails/grails-gradle-plugin/issues/16) ://github.com/grails/grails-gradle-plugin/issues/16 。

# qt - 适合tabwidet Qt的标签文本

> ID：12383177
> 
> 赞同：3
> 
> 时间：2012-09-12T07:30:12.683
> 
> 标签：qt

我的 Qt 应用程序中有一个带有两个选项卡的选项卡小部件。当我将选项卡的标签文本设置为“差异”之类的长词时，一些文本会超出选项卡的边界并且不会显示。如何解决此问题，以使整个标签文本完全适合选项卡？

谢谢，拉克什。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-12T07:40:11.323

我想[`elideMode`](http://doc.qt.nokia.com/4.7-snapshot/qtabwidget.html#elideMode-prop)对你会有帮助。

尝试将值设置为`Qt::ElideNone`不会在文本中显示省略号，所以我猜它可能会显示整个文本。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-12T07:44:01.433

Qt 从操作系统接收这种风格。默认情况下，Windows 文本不会被截断。您可以使用手动设置它

```
QTabWidget::setElideMode( Qt::ElideNone ); 
```

# opengl - Mesa 与 OpenGL 驱动程序有何不同？

> ID：12383178
> 
> 赞同：20
> 
> 时间：2012-09-12T07:30:15.103
> 
> 标签：opengl, mesa

说 Mesa 是 OpenGL 的实现到底是什么意思？我的Nvidia卡的驱动程序没有实现所有的OpenGL功能等吗？因此，鉴于我的 Nvidia 卡的驱动程序正在接受 Opengl 调用并将它们交给硬件，Mesa 究竟做了什么？有人可以澄清 Mesa 和驱动程序之间的区别吗？

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2012-09-12T09:05:52.417

> 有人可以澄清 Mesa 和驱动程序之间的区别吗？

Mesa 为基于 DRI2/DRM 架构的开源 GPU 驱动程序提供客户端 OpenGL 接口。或者换句话说：它也是驱动程序的一部分。

如果您安装了 NVidia 或 AMD 的专有驱动程序，则不需要 Mesa。如果您想使用开源驱动程序（nouveau、radeon、radeonhd、intel），您*需要*Mesa。

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2017-02-14T20:46:55.467

相信 LinuxQuestions.org 论坛成员 geeman2.0 对此事提供了很好的解释：

> OpenGL 和 Mesa 并不是真正的两个单独的选择，而是 Mesa 是一种特定类型的 OpenGL。
> 
> OpenGL 只是一个接口，它定义了绘制 3d 图形所需的一组标准函数。它不涉及使这些函数发生的实际代码，它只指定函数被调用的内容以及它们应该做什么。
> 
> openGL 实现提供了运行 OpenGL 标准指定的方法的实际代码。如果没有安装实现，您将无法运行任何 opengl 程序。
> 
> Mesa 只是众多 OpenGL 实现中的一种，并且是 linux 发行版中包含的最标准的一种。它在软件中完成所有工作，这就是为什么它很慢。
> 
> 当您为精美的显卡安装 Nvidia 或 ATI 驱动程序时，这些驱动程序会提供在显卡上运行的新 OpenGL 实现。这个实现将取代 Mesa 实现，但它仍然是一个 openGL 实现。也就是说，所有的 Mesa/ATI/NVidia 驱动程序都实现了相同的一组功能，它们只是以不同的方式实现，它们都是 openGL。

[来源](http://www.linuxquestions.org/questions/linux-software-2/opengl-vs-mesa-what%27s-the-diff-351037/#post1788870)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-11-26T05:27:52.760

> 说 Mesa 是 OpenGL 的实现到底是什么意思？

首先，OpenGL 是Khronos 和显卡制造商（Nvidia、ATI、Intel 等）之间创建的**API 规范，它就像是对硬件能够执行什么功能的协议。**

*Mesa 是一个用于 3D 计算机图形的软件库，它提供了一个通用的 Khronos 兼容 OpenGL 实现，用于在多个平台上渲染 3D 图形。*因此，例如，如果您正在运行 Linux，您可能必须安装 Mesa 才能生成任何类型的图形。对于 Microsoft Windows [，已经安装了一个实现](https://docs.microsoft.com/en-us/windows/win32/opengl/opengl)。

> 我的Nvidia卡的驱动程序没有实现所有的OpenGL功能等吗？

是的，您的 Nvidia 卡驱动程序实现了 OpenGL 功能。

> 因此，鉴于我的 Nvidia 卡的驱动程序正在接受 Opengl 调用并将它们交给硬件，Mesa 究竟做了什么？

您的程序与 Mesa 通信，Mesa 与您的显卡驱动程序通信，驱动程序与实际 GPU 通信，GPU 将信号发送到监视器，让您最终观看绘图。

# c# - 通过ajax从客户端调用来执行C#方法

> ID：12383179
> 
> 赞同：0
> 
> 时间：2012-09-12T07:30:18.833
> 
> 标签：c#, javascript, asp.net, ajax, webmethod

我正在尝试使用这种技术执行服务器端方法：

Javascript Ajax 函数

```
function storeLocal(brand, type) {
    $.ajax({
        type: "POST",
        contentType: "application/json; charset=utf-8",
        data: "{brand:'" + brand + "'}",
        url: "Jquery Site.Master/storeLocal",
        datatype: "json",
        success: OnSuccess(brand),
    });
}

function OnSuccess(brand) {
    alert(brand);
} 
```

C#方法：

```
[WebMethod]
public static object storeLocal(string brand)
{
    HttpContext.Current.Session.Add("Brand", brand);
} 
```

要执行的代码行是：

```
<li>
    <a class="strong" onclick="storeLocal('petzl','harness')" href="About.aspx">Harnesses</a>
</li> 
```

但它没有正确执行我的代码中是否有任何特殊错误？我使用这种方法的原因是因为我想要一个小项目的动态菜单，并希望在会话中存储用户在会话中选择的特定“li”，以便我可以在重定向页面中加载内容。非常感谢阿德里安

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-12T07:32:30.547

您的方法中没有返回可能是问题，您的方法应该如下所示

```
[WebMethod]
 public static object storeLocal(string brand)
 {
     HttpContext.Current.Session.Add("Brand", brand);
     return "value" +brand;
 } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-12T07:37:54.477

根据您的`ajax`请求，我可以看到几个错误：

1.  `url`参数值不是正确的 URL 。
2.  你没有`OnSuccess`正确分配你的方法。

尝试将其更改为：

```
function storeLocal(brand, type) { 
    $.ajax({ 
        type: "POST", 
        contentType: "application/json; charset=utf-8", 
        data: "{brand:'" + brand + "'}", 
        url: "ProperSiteUrl/storeLocal", 
        datatype: "json", 
        success: OnSuccess, 
    }); 
} 
```

而且您不会从您的`storeLocal`网络方法中返回任何内容。尝试将其更改为：

```
 [WebMethod]  
 public static object storeLocal(string brand)  
 {  
     HttpContext.Current.Session.Add("Brand", brand);  
     return ...;
 } 
```

此外，您将 JSON 发送到服务器，但是，对于单个参数，您可能会发现将其作为键/值对发送更容易，例如

```
...
data: "brand=" + brand
... 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-12T07:39:37.923

我不确定您的代码是否正确！你已经给出了 href 和 onclick 并且页面可能会在 onclick ajax 事件完成之前导航到 about.aspx。

尝试删除 href 或将 onclick 事件放入 href='javascript:storelocal()' 并从 webmethod 返回值。

在 webmethod 中保留一个断点并查看内容是否正在传递给 webmethod。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-12T08:52:40.710

网址和成功看起来不太好。

1 - 在 ajax 调用中，您没有将参数传递给成功函数。它将由 c# 中指定的 webmethod 返回一些东西。您在数据属性中指定数据，并将其用作传递给 webmethod 的参数。

2 - 您不能使用母版页调用 webmethod，它必须在您正在工作的页面中指定。aspx 文件不是主文件。该页面继承自 master，但它不是 master。是具有母版页文件规范的页面。

试试这个来识别错误，看看返回了什么

```
error: function (error) {
    alert(JSON.stringify(error));
} 
```

# c# - Web 响应标头中的 Unicode 数据

> ID：12383184
> 
> 赞同：2
> 
> 时间：2012-09-12T07:30:34.590
> 
> 标签：c#, unicode, http-headers, httpresponse, httpwebresponse

我开发了 web api，它使用 POST 方法接受文件，进行操作并使用 HTTP 响应返回它们。Web api 在 http 标头中返回附加数据，例如输出文件名。问题是，然后我使用 HttpWebResponse 发布和接收响应我在响应标头值中得到了乱码文件名，并且 unicode 字符丢失了。

例如，如果我提交`наталья.docx`文件，我会得到`Ð½Ð°ÑÐ°Ð»ÑÑ.pdf`.

完整的响应标头

```
Pragma: no-cache
Transfer-Encoding: chunked
Access-Control-Allow-Origin: *
Result: True
StoreFile: false
Timeout: 300
OutputFileName: Ð½Ð°ÑÐ°Ð»ÑÑ.pdf
Content-Disposition: attachment; filename=Ð½Ð°ÑÐ°Ð»ÑÑ.pdf
Cache-Control: no-cache, no-store
Content-Type: application/pdf
Date: Wed, 12 Sep 2012 07:21:37 GMT
Expires: -1
Server: Microsoft-IIS/7.5
X-AspNet-Version: 4 
```

我正在阅读这样的标题值

```
HttpWebResponse webResponse = FormUpload.MultipartFormDataPost(postdatatoserver);
using (Stream clientResponse = webResponse.GetResponseStream())
if (webResponse.StatusCode == HttpStatusCode.OK)
{
   Helpers.CopyStream(clientResponse, outStream);
   webHeaderCollection = webResponse.Headers;
} 
```

我不确定当我从响应标头中读取加扰字符时是否应该将它们解码为 un​​icode，或者当我从 Web api 服务器发送数据时我可能需要将编码包含到响应标头中？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-12T09:24:30.220

请参阅[http://msdn.microsoft.com/en-us/library/system.net.webresponse.getresponsestream.aspx](http://msdn.microsoft.com/en-us/library/system.net.webresponse.getresponsestream.aspx)：

```
Stream ReceiveStream = myWebResponse.GetResponseStream();
Encoding enc = System.Text.Encoding.UTF8;

// Pipe the stream to a higher level stream reader with the required encoding format. 
StreamReader readStream = new StreamReader(ReceiveStream, enc); 
```

你也可以试试

```
System.Text.Encoding.Default
or
System.Text.Encoding.UTF7
or
System.Text.Encoding.Unicode
or 
System.Text.Encoding.GetEncoding(1251)
or 
System.Text.Encoding.GetEncoding(1252)
or
System.Text.Encoding.GetEncoding(20866) 
```

请参阅此处以获取更长的列表：
[http ://www.pcreview.co.uk/forums/system-text-encoding-getencoding-whatvalidstrings-t1406242.html](http://www.pcreview.co.uk/forums/system-text-encoding-getencoding-whatvalidstrings-t1406242.html)

**编辑：**

> 当前 [RFC 2045] 语法将参数值（以及因此的 Content-Disposition 文件名）限制为 US-ASCII。

因此，无论 StreamReader 编码如何，HTTP 标头始终以 ASCII 格式传输。
IE不符合标准，所以有一个解决方法：UrlEncode the filename

所以当你写回文件时你需要这样做：

```
// IE needs url encoding, FF doesn't support it, Google Chrome doesn't care
if (Request.Browser.IsBrowser ("IE"))
{
    fileName = Server.UrlEncode(fileName);
}

Response.Clear ();
Response.AddHeader ("content-disposition", String.Format ("attachment;filename=\"{0}\"", fileName));
Response.AddHeader ("Content-Length", data.Length.ToString (CultureInfo.InvariantCulture));
Response.ContentType = mimeType;
Response.BinaryWrite(data); 
```

根据 [Content-Disposition 标头中的 Unicode，](https://stackoverflow.com/questions/2543584/non-unicode-in-content-disposition-header) 您可以添加星号，并附加正确的编码。

# java - 打开附件面板的操作

> ID：12383187
> 
> 赞同：2
> 
> 时间：2012-09-12T07:30:44.073
> 
> 标签：java, itext

是否有打开附件面板的操作？不是马上，而是当用户按下一些文本时？

我知道，`writer.setViewerPreferences(PdfWriter.PageModeUseAttachments)`但我不希望它立即打开。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-12T07:49:32.253

这可以使用 JavaScript 操作来完成：

```
Chunk c = new Chunk("Show / Hide attachment panel");
c.setAction(PdfAction.javaScript("app.execMenuItem('ShowHideFileAttachment');", writer));
document.add(new Paragraph(c)); 
```

请注意，这不适用于所有查看器（应用程序 = Adob​​e Reader），如果人们禁用 Javascript，它将无法正常工作。

# git - 如何在特定提交时从存储库中浅层克隆所有文件？

> ID：12383195
> 
> 赞同：0
> 
> 时间：2012-09-12T07:31:03.667
> 
> 标签：git

我正在尝试从特定提交的存储库中~~提取浅层克隆所有文件。~~我想在不影响现有存储库的 HEAD 的情况下将这些文件提取到备用位置。

这是我正在运行以获取这些文件的命令...

```
git --git-dir="C:\temp\repository" --work-tree="C:\temp\files" checkout -f "e2f4b8cf188c87db6a11c6f421b06f701dd6b07b" 
```

上面的命令可以提取我想要的文件，但我的问题是这让我的存储库带有一个分离的 HEAD。

提取这些文件的最佳方法是什么？

可能重复：[如何浅克隆深度为 1 的特定提交？](https://stackoverflow.com/questions/31278902/how-to-shallow-clone-a-specific-commit-with-depth-1)

**编辑澄清：**

*   有一个提交到此存储库的自动化过程。（这就是为什么我不想分离 HEAD）
*   我想从特定点从存储库中提取所有文件。（我知道提交 ID）
*   我想将这些文件提取到备用位置。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-12T12:47:27.213

我很难说出你想要什么，所以这里有一些方法可以在提交时获取提交或存储库状态。假设提交是`1234abcd`

1）两种查看存储库状态的方法`1234abcd`：

```
git checkout 1234abcd ;# 'detached HEAD' state; just don't commit new work    
git reset --hard 1234abcd ;# fully reset to the commit, abandon uncommitted work 
```

2) 压缩存储库状态`1234abcd`

```
git archive -o myfile.zip 1234abcd ;# zip up into 'myfile.zip' 
```

3）创建一个电子邮件补丁`1234abcd`

```
git format-patch -M 1 1233abcd 
```

4) 输出 git patch 格式，以便您可以重复使用它（例如`git apply`，将读取 的输出`git diff`，您可以将后者通过管道传输到前者）

```
git diff 1234abcd 1234abcd~1 | git apply ;# create and reapply the patch to the index
git diff 1234abcd 1234abcd~1 > outfile.txt ;# redirect it to an outfile 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-12T07:36:33.527

从另一个 repo 获取分支（不要拉，即不要合并分支），然后从另一个分支中挑选提交。这将对当前分支进行特定更改并以其完整历史记录提交。

有关 Git Cherry Pick 的更多详细信息：http: [//git-scm.com/docs/git-cherry-pick](http://git-scm.com/docs/git-cherry-pick)

# c++ - 局部变量与指针性能

> ID：12383196
> 
> 赞同：3
> 
> 时间：2012-09-12T07:31:05.523
> 
> 标签：c++

对于下面的代码示例，通过指针 - num_ptr 执行方法“增量”的速度明显慢于局部变量 - num。我认为它与虚拟方法有关，但我不明白为什么。请帮忙解释一下。我试图从这个例子中理解性能问题。

```
#include <iostream>

const long long iterations_count = 1000000;

// a number interface
struct number {        
    virtual void increment() = 0;
};

struct concrete_number:number
{
    long long a;
    concrete_number(long long p){
        a = p;
    }
    void increment()
    {
        a+=1;
    }
};

int main() {

    concrete_number num(0);
    concrete_number* num_ptr = &num;

    for (long long i = 0; i < iterations_count; i++) {
        num.increment();
    }

    for (long long i = 0; i < iterations_count; i++) {
        num_ptr->increment();
    }
    std::getchar();
} 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-12T07:32:43.463

`num.increment();`静态解析，`num_ptr->increment();`将动态解析（该函数通过动态调度调用，因为它是`virtual`）。

但是，在完全优化的情况下，编译器应该会产生类似的结果。

没有优化：

```
 num.increment();
00341453  lea         ecx,[num]  
00341456  call        concrete_number::increment (341186h) 
```

对比

```
 num_ptr->increment();
00341490  mov         eax,dword ptr [num_ptr]  
00341493  mov         edx,dword ptr [eax]  
00341495  mov         esi,esp  
00341497  mov         ecx,dword ptr [num_ptr]  
0034149A  mov         eax,dword ptr [edx]  
0034149C  call        eax  
0034149E  cmp         esi,esp  
003414A0  call        @ILT+340(__RTC_CheckEsp) (341159h) 
```

通过优化，至少对我而言，这两个调用都是内联的。

# javascript - SVG xml 到图像

> ID：12383197
> 
> 赞同：0
> 
> 时间：2012-09-12T07:31:08.130
> 
> 标签：javascript, html, svg

我有一个 svg 代码，我想将其转换为`<img>`. 知道怎么做吗？

```
<svg xmlns="http://www.w3.org/2000/svg" width="58" height="308">
    <foreignObject width="100%" height="100%">
        <h3 style="padding:0;margin:0;text-align:center;font-size:16px;">Legend</h3>
        <ul style="position: relative; font-size: 12px; list-style-type: none; margin-left: 20px; min-width: 15px; ">
            <li style="position:absolute;top:17.5px">1</li>
            <li style="position:absolute;top:43.5px">0</li>
            <li style="position:absolute;top:66.5px">0</li>
            <li style="position:absolute;top:90.5px">0</li>
            <li style="position:absolute;top:113.5px">0</li>
            <li style="position:absolute;top:136.5px">0</li>
            <li style="position:absolute;top:159.5px">0</li>
            <li style="position:absolute;top:183.5px">0</li>
            <li style="position:absolute;top:206.5px">0</li>
            <li style="position:absolute;top:229.5px">0</li>
            <li style="position:absolute;top:253.5px">0</li>
        </ul>
        <div style="position: relative; display: block; width: 15px; height: 256px; border-bottom-width: 1px; border-bottom-style: solid; border-bottom-color: black; background-image: url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAA8AAAEACAYAAABs9ywrAAAC7klEQVRoQ+3bW0iUQRTA8bOJJSammGilYpKJiWJuJJHRIhUaRZikoGGBRSxFiVgRXTYqugihEYmVhN2ITUS8sIgspYaUlImgJVJJSmgXzCgJw/ySEh/CxTj/p2CHGeZlfhw4zPcxDHNMItI4OSamP832u8/cTBNLTk6OqdWGSYyZqcj02IPg2QR7EexNsA/B8wj2JziA4ECCgwheSHAIwWEEhxMcQXAkwVEERxMcQ3AcwfEEJxC8guCVBK8ieDXBawheS3AywesI3kBwCsEbCd5E8BaC0whOJ3gbwZkEZxG8neAcgncSnEvwboL3EGwleC/B+wnOIzif4AKCDxN8hOCjBB8HeNxG8CmCzxB8luDzBBcSfJHgIoIvEXyZ4BKCSwm+RnAZwTcILif4NsF3Cb5HsJ3gCoIrCa4iuBpgo45gB8H1BDcQ7CT4AcGNBDcT3ELwY4JbCX5KcBvB7QR3ENxJ8AuCuwnuIfg1wb0EvyW4n+B3BA8S/IHgTwQPETxM8FeCRwj+TvAowWMEjwP8wwD4C8GDBPcS/JLg5wS3EOwkuJbg+wTfJLiU4GKCzxF8guCDBO8jOJfgLILTCE4l2EJwIsFmw1P/PMJs+BG8iOClBC8nOIngFILTCc4h2EpwAcE2ggsJvkJwOcEVBDsIbiK4jeBugvsJHiJ4FOAxA+ARgj8T/J7gPoJfEdxFcDvBrQQ3E+wk2EFwFcF2gm8RXEZwCcFFBF8g+DTBxwg+RPABgq0E7yJ4B8HZBGcQvJXgzQSnEryeYAvBSQQnEmwmOI7gZQRHEryY4FCCgwmeT7AfwXMJnkPwLIAT5Kf+yBwv4LAeK9/0kWNkWI+j5aMeR8mAHi+RPj2OkDd6HC49ehwmXXocIh16vECe6XGQPNHjQHmkxwHyUI/9pUGPfQXcVvhIjT6yt1TqsZfY9dhT7uixh4CLJZNc10cWuerGLgoJp60ddCfMddmlO2FTuXF/Va62yX+8SSx/lzD/68/gFwryaXEkBvE8AAAAAElFTkSuQmCC); "></div>
    </foreignObject>
</svg> 
```

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-09-12T08:02:47.487

这种转换不能在 XML 或 HTML 中执行。问题不在于标记代码，而在于您需要将一种媒体转换为另一种媒体。此外，您正在将基于文本的格式更改为基于二进制 (BLOB) 的格式。您需要将 svg 代码保存到与 XML 兼容的 SVG 文件中，然后使用一些在线图像转换应用程序，例如：

*   [http://www.online-utility.org/image_converter.jsp](http://www.online-utility.org/image_converter.jsp)
*   [http://image.online-convert.com/convert-to-svg](http://image.online-convert.com/convert-to-svg)
*   [http://www.fileformat.info/convert/image/svg2raster.htm](http://www.fileformat.info/convert/image/svg2raster.htm)

# sql - 不能在 INTO 或 VALUES 子句中使用组项目

> ID：12383201
> 
> 赞同：2
> 
> 时间：2012-09-12T07:31:19.173
> 
> 标签：sql, oracle, cobol

此 sql 似乎还可以，但在编译过程中遇到错误..

```
SELECT COUNT(*)
INTO :W9-TOT-TRXN
FROM IRC02
WHERE SUBSTR(P9_IRC_PST_DT,1,6) = :Ws-DATE-YM
AND F9_IRC_FI = :W9-FI-PARAM
AND P9_IRC_PRIN_CRN = :F9-IR025-CRN
AND F9_IRC_LOC_ACCT = :F9-IR025-LOC-ACCT 
```

错误信息如下：

文件 RCCO.cbl 中第 757 行第 60 列的错误

```
 WHERE SUBSTR(P9_IRC_PST_DT,1,6) = :Ws-DATE-YM 
```

PCB-S-00204，不能在 INTO 或 VALUES 子句中使用组项目

```
01 Ws-DATE-YMD.
03 Ws-DATE-YM.
   05 W9-DATE-YY      PIC 9(04) VALUE ZEROES.
   05 W9-DATE-MM      PIC 9(02) VALUE ZEROES.
03 W9-DATE-DD         PIC 9(02) VALUE ZEROES. 
```

任何的想法 ？谢谢 ：）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-17T21:47:57.657

您还可以使用 REDEFINES 来避免添加 MOVE 语句：

```
03 Ws-DATE-YM.
   05 W9-DATE-YY      PIC 9(04) VALUE ZEROES.
   05 W9-DATE-MM      PIC 9(02) VALUE ZEROES.
03 Wx-DT-YM PIC 9(6) REDEFINES Ws-DATE-YM. 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-12T08:19:49.607

[如错误所述，组项目不能用作`where`子句](http://docs.oracle.com/cd/E11882_01/appdev.112/e10826/pco04dat.htm#sthref494)中的主变量。您需要单独引用基本项目，例如：

```
SELECT COUNT(*)
INTO :W9-TOT-TRXN
FROM IRC02
WHERE SUBSTR(P9_IRC_PST_DT,1,4) = :Ws-DATE-YM.W9-DATE-YY
AND SUBSTR(P9_IRC_PST_DT,5,2) = :Ws-DATE-YM.W9-DATE-MM
AND F9_IRC_FI = :W9-FI-PARAM
AND P9_IRC_PRIN_CRN = :F9-IR025-CRN
AND F9_IRC_LOC_ACCT = :F9-IR025-LOC-ACCT 
```

或者也许性能更高：

```
WHERE SUBSTR(P9_IRC_PST_DT,1,6) = :Ws-DATE-YM.W9-DATE-YY || :Ws-DATE-YM.W9-DATE-MM 
```

虽然我来自文档而不是经验，但这是完全未经测试的；也不确定您是否需要`Ws-DATE-YMD`在两个部分之前都包含父级，或者它会对一个级别感到满意。

# domain-driven-design - DDD：“文章”中的“评论”应该是聚合根吗？

> ID：12383203
> 
> 赞同：3
> 
> 时间：2012-09-12T07:31:21.170
> 
> 标签：domain-driven-design, aggregateroot

我开始设计第一个简单的 DDD 风格的应用程序，并且开始了解这些概念是如何协同工作的。

如果我设计一个经典的博客应用程序，文章类将是我的聚合根之一。我想检索文章、管理和删除所有相关数据（出版日期、作者...）。我对评论有困难。起初，评论似乎是文章聚合的一部分：评论是针对一篇文章创建的，如果我删除一篇文章，我将删除相关评论。

然后我想在博客上显示一个小框，其中包含博客上发布的最新评论，用于任何文章。所以看起来我想从我的数据存储中检索评论（并且只有评论）。根据我对 DDD 思想的理解，这使它成为一个聚合根。但这似乎并不完全正确，因为 Comment 似乎强烈依赖于 Article。

你会如何建模？

谢谢。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-09-12T14:41:12.827

当您考虑它时，您可能会发现为什么 a`Comment`应该是一个*Aggregate*本身的各种原因：

*   你想列出最新的评论
*   您可能希望列出特定用户的所有评论
*   您可能希望嵌套评论（评论是对另一评论的回复）
*   您可能希望通过管理界面批准/拒绝评论
*   用户可能想要编辑或删除他/她的评论
*   ...

我将以下作为一般经验法则：使您的聚合尽可能小。如有疑问，请选择更多聚合。

通过这种方式建模，您可以将评论附加到多个对象，例如`Article`和`User`

```
Comment
    string Text
    string UserName
    bool IsApproved

Article
    string Title
    string Body
    ...
    List<CommentIds> CommentIds

User
    string UserName
    ...
    List<CommentIds> CommentIds

ListOfTenLatestComments
    List<CommentIds> CommentIds 
```

# android - Statelist drawable android：state_enabled在xml中不起作用

> ID：12383204
> 
> 赞同：14
> 
> 时间：2012-09-12T07:31:22.437
> 
> 标签：android, statelistdrawable

我正在尝试将禁用状态添加到我现有的 statelist drawable 中，但它不起作用。

最初，我有这个代码：

```
<?xml version="1.0" encoding="utf-8"?>
<selector xmlns:android="http://schemas.android.com/apk/res/android">
<item android:drawable="@drawable/store_item_background_selected" android:state_selected="true"/>
<item android:drawable="@drawable/store_item_background"/>
</selector> 
```

它适用于选中和未选中。

现在我想像这样添加 android:state_enabled="false" ：

```
<?xml version="1.0" encoding="utf-8"?>
<selector xmlns:android="http://schemas.android.com/apk/res/android">
<item android:drawable="@drawable/store_item_background_selected" android:state_selected="true"/>
<item android:drawable="@drawable/store_item_background" android:state_enabled="true"/>
<item android:drawable="@drawable/store_item_background_disabled"/>
</selector> 
```

并且它永远不会切换到禁用的图像。

有任何想法吗？

编辑

我添加`setEnabled(false)`到视图的构造函数中，我正在设置这个 statelist drwable，现在我看到了禁用的图像，但是一旦我将视图设置为启用，它就不会再次切换到禁用状态。

* * *

## 回答 #1

> 赞同：42
> 
> 时间：2015-09-04T08:58:31.383

尽管这是一个非常古老的问题，但应该按以下顺序编写选择器：

1.  禁用状态优先
2.  按下状态第二
3.  最后正常状态

```
<?xml version="1.0" encoding="utf-8"?>
<selector xmlns:android="http://schemas.android.com/apk/res/android" android:exitFadeDuration="@android:integer/config_shortAnimTime">
    <item android:drawable="@color/due_gray" android:state_enabled="false" />
    <item android:drawable="@color/whizdm_primary_dark_color" android:state_pressed="true" />
    <item android:drawable="@color/whizdm_primary_color" />
</selector> 
```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-09-12T07:44:31.623

试试这个

```
<?xml version="1.0" encoding="utf-8"?>
<selector xmlns:android="http://schemas.android.com/apk/res/android">

<item android:drawable="@drawable/store_item_background_selected" android:state_enabled="true" android:state_selected="true"/>
<item android:drawable="@drawable/store_item_background" android:state_enabled="true"/>
<item android:drawable="@drawable/store_item_background_disabled" android:state_enabled="false"/>

</selector> 
```

# java - 为什么这个语句在 java 中运行良好但在 android 中运行不佳？

> ID：12383210
> 
> 赞同：0
> 
> 时间：2012-09-12T07:32:06.647
> 
> 标签：java, android, httpclient

```
SchemeRegistry supportedSchemes = new SchemeRegistry();
supportedSchemes.register(new Scheme("http", 80, PlainSocketFactory.getSocketFactory())); 
```

该语句在 java 中运行良好，但在 android 中运行不佳？我在引用的依赖项和 android 依赖项中添加了 httpclient_4.1.3.jar。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-12T07:39:38.520

Scheme 没有这样的构造函数，正如您[在此处](http://developer.android.com/reference/org/apache/http/conn/scheme/Scheme.html)看到的那样，您可以使用[类似的](http://developer.android.com/reference/org/apache/http/conn/scheme/Scheme.html#Scheme%28java.lang.String,%20org.apache.http.conn.scheme.SocketFactory,%20int%29)构造函数。这是来自链接的 Javadoc 页面的示例：

```
Scheme https = new Scheme("https", new MySecureSocketFactory(), 443);
SchemeRegistry.DEFAULT.register(https); 
```

或者让你的代码适应这个：

```
Scheme http = new Scheme("http", PlainSocketFactory.getSocketFactory(), 80);
SchemeRegistry.DEFAULT.register(http); 
```

# soap - 在 Camel 中执行粘性负载平衡

> ID：12383214
> 
> 赞同：0
> 
> 时间：2012-09-12T07:32:12.620
> 
> 标签：soap, xpath, load-balancing, apache-camel

嗨，我想基于 SOAP 会话在 apache camel 中执行粘性负载平衡，该会话嵌入在第一个响应的 ServiceGroupID 节点中。

我写了一个小路线如下：

```
from(uri)
.loadBalance().sticky(xpath(query).namespaces(env).namespaces(wsa).namespaces(ax))
.to(BE1,BE2); 
```

其中 URI 是请求传递到的字符串，BE1 和 BE2 是两个后端服务器。

我的查询是

```
String query = "/soapenv:Envelope/soapenv:Header/wsa:ReplyTo/wsa:ReferenceParameters/axis2:ServiceGroupId/text()"; 
```

如果我没记错的话，这个查询将从我的 SOAP 标头中提取 servicegroupID。

但是当我尝试执行平衡时，由于某种原因，请求没有被传递到同一个后端服务器。

我的环境、 wsa 和 ax 是命名空间，它们是：

```
Namespaces env = new Namespaces("soapenv", "http://schemas.xmlsoap.org/soap/envelope/");
Namespaces wsa = new Namespaces("wsa", "http://www.w3.org/2005/08/addressing");
Namespaces ax = new Namespaces("axis2", "http://ws.apache.org/namespaces/axis2"); 
```

我在这里做错了吗？如果是这样呢？我将不胜感激任何帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-12T15:32:51.613

也在邮件列表中讨论 [http://camel.465427.n5.nabble.com/Performing-Sticky-load-balancing-in-Camel-tp5719170.html](http://camel.465427.n5.nabble.com/Performing-Sticky-load-balancing-in-Camel-tp5719170.html)

请不要同时在多个地方开始同一个话题。如果你这样做，那么至少告诉我们，这样我们就会知道这一点。

当人们花时间帮助你时，当它已经在另一个地方得到回答时，他们会感到不安！

# php - 在php中编码一个字符串

> ID：12383216
> 
> 赞同：0
> 
> 时间：2012-09-12T07:32:18.787
> 
> 标签：php, mysql, character-encoding

我正在执行以下语句。

```
$mystring = <<<EOT
UPDATE sites_niche SET `short_review` = REPLACE(`short_review`, 'â€™',"'");
EOT; 
```

但是，它不起作用，因为如果我将它放在我的 phpmyadmin 中它会起作用。`â€™`罪魁祸首是这个角色根本没有被替换的坏角色。

我试图将更新语句打印到屏幕上，我得到了这个：

```
UPDATE sites_niche SET `short_review` = REPLACE(`short_review`, 'Ã¢â‚¬â„¢',"'"); 
```

我认为字符串一进入数据库就会出现乱码。我的问题是如何对这些字符集进行编码，`â€™`以便它们一进入数据库就不会出现乱码。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-12T07:53:04.353

我可以在您的帖子中看到两个问题。

如果您不知道您的编码格式是什么，您可以使用 php mb_detect() 函数来检查字符编码格式并使用识别的格式进行以下解决方案

1.  从 php 更新到 mysql

解决方案： - 负责连接到 Mysql 的 php 代码应该使用

```
mysql_set_charset ( string $charset [, resource $link_identifier = NULL ] ) 
```

2.打印时出现乱码

解决方案： - 您必须在页面 doctype 声明中设置字符编码，否则您会看到这个乱码

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-09-12T07:38:28.197

您可以使用 iconv 扩展[http://es.php.net/manual/en/function.iconv.php](http://es.php.net/manual/en/function.iconv.php)或 mbstring [http://es.php.net/manual/en/function.mb-convert-encoding.php](http://es.php.net/manual/en/function.mb-convert-encoding.php)将字符串从一个字符集转换为另一个字符集

# maven - 如何从 CloudBees 部署到私有 Maven 存储库？

> ID：12383226
> 
> 赞同：3
> 
> 时间：2012-09-12T07:32:51.407
> 
> 标签：maven, jenkins, hudson, maven-3, cloudbees

我想将 CloudBees 用于我的 CI 环境，但我也想将我的 Maven 工件部署到我现有的私有 Nexus 存储库。在我当前的本地 Hudson 设置中，我使用 .m2/settings.xml 文件中的用户名/密码设置，如下所示：

```
...
<servers>
    <server>
        <id>my-repository</id>
        <username>username</username>
        <password>password</password>
    </server>
</servers>
... 
```

如何/在哪里可以在 CloudBees 上配置这些凭据？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-12T20:39:26.563

您可以将这些放在您的私人 webdav 文件存储中：[http ://wiki.cloudbees.com/bin/view/DEV/Sharing+Files+with+Build+Executors](http://wiki.cloudbees.com/bin/view/DEV/Sharing+Files+with+Build+Executors)

然后，只需通过传递“-s”选项将 Maven 指向这里，或者单击 Maven 构建的“高级”部分并在“备用设置文件”字段中添加路径。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-02-20T07:38:48.207

您应该按照此分步指南进行操作：

[http://developer.cloudbees.com/bin/view/DEV/Accessing+under+an+external+Maven+repository](http://developer.cloudbees.com/bin/view/DEV/Accessing+under+an+external+Maven+repository)

# xcode - 如何在 cocos2d xcode 中为整个场景设置背景图像？

> ID：12383228
> 
> 赞同：2
> 
> 时间：2012-09-12T07:33:00.437
> 
> 标签：xcode, cocos2d-iphone

我正在使用 cocos2D。我想为整个场景设置背景图像，只是我在场景中获取图像，但它没有覆盖整个屏幕。任何人都可以提供一些有关此的信息。

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-12T11:43:49.690

使用尺寸等于屏幕尺寸的图片（非视网膜 iPhone/iPod 为 480x320，视网膜 iPhone/iPod 为 960x640，iPad 为 1024x768，视网膜 iPad 为 2048x1536）。如果要拉伸图片以使其充满整个屏幕，请更改它的`scaleX`和`scaleY`属性：

```
CGSize winSize = [[CCDirector sharedDirector] winSize];
CGSize imageSize = image.contentSize;
imageSprite.scaleX = winSize.width / imageSize.width;
imageSprite.scaleY = winSize.height / imageSize.height; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-09-17T13:59:53.460

为 cocos2d 3.x 设置背景

```
CGSize wSize=[[CCDirector sharedDirector] viewSize];
CGSize scrSize={640,1136};
CCSprite* background1 = [CCSprite spriteWithFile:@"1136.png"];
background1.anchorPoint=ccp(0, 0);
background1.scaleX=wSize.width/scrSize.width;
background1.scaleY=wSize.height/scrSize.height;
[self addChild:background1]; 
```

# java - 使用 MapReduce 将 CSV 文件加载到 Hbase 表中

> ID：12383237
> 
> 赞同：2
> 
> 时间：2012-09-12T07:33:34.197
> 
> 标签：java, hadoop, mapreduce, hbase

我需要将 csv 文件的数据加载到 hbase 表中。我有上述格式的csv文件

CSV 文件：读取 Detachcard.csv

```
year  class    days   mm   
   1964   9     20.5     8.8          
   1964  10     13.6     4.2      
   1964  11     11.8     4.7     
   1964  12      7.7     0.1       
   1965   1      7.3     0.8       
   1965   2     6.5     0.1         
   1965   3     10.8     1.4         
   1965   4     13.2     3.5         
   1965   5     16.1     7.0         
   1965   6     19.0     9.2          
   1965   7     18.7    10.7       
   1965   8     19.9    10.9          
   1965   9      16.6     8.2 
```

在上面的文件中，第一行是列限定符名称，第二行是列限定符的值。现在我需要使用 mapreducing 程序将此数据加载到 hbase 表中。如何将这些数据读入 put 命令和行自动增量？我不知道这种格式。请任何人指导我或向我展示一些示例以将此类数据加载到 hbase 表中

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-12T10:18:19.370

使用 csvreader ，用这个 jar 对 csv 文件进行操作非常容易。找到 csvreader jar 并将其放在 jre 中。

```
CsvReader products = new CsvReader("CSV file path ");

        products.readHeaders();

        while (products.readRecord())
        {
            String productID = products.get("year");
            String productName = products.get("class");
            String supplierID = products.get("day");
            String categoryID = products.get("mm");

        }

        products.close(); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-12T10:19:48.910

我认为您的数据是 'tab : \t' 分隔的。您可以做的是，读取/解析映射器中的每一行并创建一个放置对象，然后将其传递给 hbase。

检查此链接： [以编程方式将数据批量加载到 HBase 的最快方法是什么？](https://stackoverflow.com/questions/8750764/what-is-the-fastest-way-to-bulk-load-data-into-hbase-programmatically/8751176#8751176)

# python - 为什么 setup.py 在安装过程中会运行模块 __init__.py？

> ID：12383246
> 
> 赞同：3
> 
> 时间：2012-09-12T07:34:33.197
> 
> 标签：python, setup.py

我正在使用 setup.py 安装一个包：

```
python setup.py install 
```

我`__init__.py`正在安装的包中包含一些包级别检查，其中一项检查属性是否在`settings.py`. 由于它是一个可再分发`settings.py`的包，因此不会通过包交付，但用户必须注意在其项目范围的 settings.py 中正确设置设置。

```
from django.core.exceptions import ImproperlyConfigured
from django.conf import settings

#check if settings are properly set
if not hasattr(settings, 'PACKAGE_SPECIFIC_SETTING'):
    raise ImproperlyConfigured('Please add the PACKAGE_SPECIFIC_SETTING setting to your settings.py') 
```

现在我想知道为什么调用`setup.py install`运行我的`__init__.py`（并崩溃，因为它，并不奇怪，没有找到任何设置。）

我本来希望`setup.py`只复制我的包而不运行任何代码。每当另一个使用我的包的应用程序将我的包导入他的代码时，都应该运行该代码。

编辑：根据要求包含 setup.py

```
#!/usr/bin/env python
# vim: ai ts=4 sts=4 et sw=4 coding=utf-8

from distutils.core import setup

setup(
    name='django-simple-lock',
    version=__import__('lock').__version__,
    license = 'GNU Lesser General Public License (LGPL), Version 3',

    requires = ['python (>= 2.5)', 'django (>= 1.3)'],
    provides = ['lock'],

    description='Simple locking implementation as a reusable'
                'Django app.',
    long_description=open('README.rst').read(),

    url='http://github.com/mr-stateradio/django-simple-lock',

    packages=['lock', 'lock.tests'],

    classifiers = [
        'Development Status :: 4 - Beta',
        'Environment :: Web Environment',
        'Framework :: Django',
        'Intended Audience :: Developers',
        'License :: OSI Approved :: GNU Library or Lesser General Public License (LGPL)',
        'Programming Language :: Python',
        'Topic :: Database',
        'Topic :: Software Development :: Libraries :: Python Modules',
    ],
) 
```

编辑：包括回溯：

```
/Users/Me/.virtualenvs/django1_4/bin/python setup.py install
Traceback (most recent call last):
  File "setup.py", line 9, in <module>
    version=__import__('lock').__version__,
  File "/01_Development/django-simple-lock/lock/__init__.py", line 8, in <module>
    raise ImproperlyConfigured('Please add the PACKAGE_SPECIFIC_SETTING setting to your settings.py') 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-12T07:41:40.300

你`setup.py`是可执行的python。它作为 python 脚本运行以发现您的包分发配置。

您`setup.py`运行此代码：

```
 version=__import__('lock').__version__, 
```

这会导入您的`lock`包，因此`__init__.py`会加载该包中的文件。删除该调用，您的设置将成功。将版本存储在其他地方。

请注意，引用甚至如此明确地告诉您：

```
 File "setup.py", line 9, in <module>
    version=__import__('lock').__version__, 
```

最佳做法是将版本存储在文件中（[此处](https://github.com/Pylons/pyramid/blob/master/setup.py)和[此处](https://github.com/mitsuhiko/flask/blob/master/setup.py)`setup.py`的一些示例）。Django 项目确实使用了这个[技巧](https://github.com/django/django/blob/master/setup.py)，但[*它只*](https://github.com/django/django/blob/master/django/__init__.py)[包含版本信息](https://github.com/django/django/blob/master/django/__init__.py)，没有别的。[`__import__`](https://github.com/django/django/blob/master/setup.py)[`__init__.py`](https://github.com/django/django/blob/master/django/__init__.py)

 ** * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-09-12T07:41:21.007

```
version=__import__('lock').__version__ 
```

您正在导入包以获取版本，但为了导入它，它`__init__.py`正在运行（因为这就是`__init__.py`Python 包中所做的 - 这是导入包时运行的内容）。

您可以将您`setup.py`的版本更改为静态字符串（并记住在发布时更新它），一切都会正常工作。*

# oracle - 需要在oracle中显示十进制值

> ID：12383253
> 
> 赞同：0
> 
> 时间：2012-09-12T07:34:46.133
> 
> 标签：oracle

如果数字具有十进制值，我需要显示 3 个十进制值，因为假设数字没有小数，那么将在小数点后显示零我尝试使用 TO_CHAR 函数但是当我将 to_char 转换为 TO_NUMBER 时，它显示的数字是四舍五入的值

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-12T07:39:36.030

你的问题有点模糊，但我想你需要类似的东西

```
TO_CHAR(n, '999G990D000') 
```

显示零。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-12T07:40:31.050

如果您有权更改 SCHEMA，那么您可以这样做：

```
ALTER TABLE TABLENAME Modify Attrib Number(10,3); 
```

# java - 如何使用 Morphia 将对象集合保存到 MongoDB？

> ID：12383257
> 
> 赞同：1
> 
> 时间：2012-09-12T07:35:08.827
> 
> 标签：java, mongodb, morphia

我目前正在迭代一组对象并一个一个地保存它们。我想有一种方法可以直接保存整个集合吗？

请注意，我以后需要能够检索每个单独的对象（而不是整个集合）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-12T11:14:04.123

来自 DataStore 类的 javadoc。可能在旧版本上不可用。即使这我认为是内部迭代并一次保存一个 - 但它可能会得到优化，所以最好使用它而不是自己迭代。

```
<T> Iterable<Key<T>>
save(Iterable<T> entities) 
          Saves the entities (Objects) and updates the @Id field
<T> Iterable<Key<T>>
save(Iterable<T> entities, com.mongodb.WriteConcern wc) 
          Saves the entities (Objects) and updates the @Id field, with the WriteConcern
<T> Iterable<Key<T>>
save(T... entities) 
          Saves the entities (Objects) and updates the @Id field 
```

[http://morphia.googlecode.com/svn/site/morphia/apidocs/com/google/code/morphia/Datastore.html#save(java.lang.Iterable](http://morphia.googlecode.com/svn/site/morphia/apidocs/com/google/code/morphia/Datastore.html#save(java.lang.Iterable) )

# javascript - 将 json 数据发送到网格中

> ID：12383258
> 
> 赞同：0
> 
> 时间：2012-09-12T07:35:09.797
> 
> 标签：javascript, jquery, json

我收到一堆我想在某个网格中显示的 json 对象。我想避免在我的 js 中手动编码`echo div or echo table tr td, ...`

```
 success: function (result) {
                    $.each(result, function (i, item) {                           
                      //this I want to avoid  
                       document.getElementById("myTable").innerHTML = item.Title;
                    });
                }, 
```

这些怎么做？

谢谢

# php - Smarty 猫逃脱 html

> ID：12383261
> 
> 赞同：0
> 
> 时间：2012-09-12T07:35:35.370
> 
> 标签：php, escaping, smarty, html-select

我有简单的代码：

```
{html_checkboxes values=$user_data['names']['id'] output = $user_data['names']['user_name']|cat:' | Status: '|cat:$user_data['names']['status'] escape=false} 
```

在数组`$user_data['names']['status']`中存储了用户状态`<span style="color: red">User</span>`，所以我需要像*用户名 |一样显示它 状态：用户*（红色用户），但 smarty 将其切断。没有 cat，它只有 1 个变量就可以了。

我也测试过`{user_data['names']['status']}`，`"lol"|cat:$user_data['names']['status']`而且`$user_data['names']['user_name']|cat:' | Status: '|cat:$user_data['names']['status']`- 它工作正常。问题出在哪里？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-12T08:13:01.150

根据版本（Smarty2 / Smarty3），您可能需要以下之一：

```
{html_checkboxes values=$user_data.names.id output={$user_data.names.user_name|cat:' | Status: '|cat:$user_data.names.status} escape=false} 
```

将您的值分配给一个变量以使事情变得简单：

```
{assign var="foo" value=$user_data.names.user_name|cat:' | Status: '|cat:$user_data.names.status}
{html_checkboxes values=$user_data.names.id output=$foo escape=false} 
```

或将 {capture} 用于更复杂的事情（消除对`cat`修饰符的需要）：

```
{capture assign="foo"}{$user_data.names.user_name|cat:' | Status: '|cat:$user_data.names.status}{/capture}
{html_checkboxes values=$user_data.names.id output=$foo escape=false} 
```

# python - 将变量作为参数传递给 networkx.add_edge() 属性

> ID：12383265
> 
> 赞同：3
> 
> 时间：2012-09-12T07:35:43.397
> 
> 标签：python, networkx

我正在尝试在 python 中编写以下代码。

```
g = networkx.Digraph()
g.add_edge(1,2,x = 2) 
```

这里的“x”是一个变量。但 networkx 似乎将此作为属性的名称。我需要将 x 内部的内容作为属性的名称传递。我该怎么做？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-12T08:10:22.620

```
g = networkx.Digraph()
g.add_edge(1, 2, **{x: 2}) 
```

了解[如何在 Python 中使用 *args 和 **kwargs](http://www.saltycrane.com/blog/2008/01/how-to-use-args-and-kwargs-in-python/)。或者，`networkx`也允许您直接将其作为字典提供：

```
g.add_edge(1, 2, {x: 2}) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-12T08:11:13.493

[`add_edge`](http://networkx.lanl.gov/reference/generated/networkx.DiGraph.add_edge.html)需要一个`dict`for 属性。您只需将属性/值对放在 a 中`dict`：

```
g.add_edge(1, 2, {x:2})
# or more explicitly
g.add_edge(1, 2, attr_dict={x:2}) 
```

例子：

```
In [25]: g = networkx.DiGraph()

In [26]: x = 'some string'

In [27]: g.add_edge(1, 2, {x:2})

In [28]: g[1][2]
Out[28]: {'some string': 2} 
```

# python - 我rabbitmq的qps在rabbitmq-c中piki 1000只有80，这是怎么回事？

> ID：12383270
> 
> 赞同：0
> 
> 时间：2012-09-12T07:36:08.950
> 
> 标签：python, c, rabbitmq

我已经安装了rabbitmq，在python中使用pika和在C中使用rabbitmq-c进行测试。

除了将侦听器端口修改为我自己的之外，我没有对 rabbitmq 做任何事情。

生产者通宵工作，将足够的消息放入rabbitmq，大约1000K的持久消息。

客户是用 C 和 python 编写的，但它的 qps 每个队列只有 80。

网上的文章说他们的单队列可以达到15000 qps，那我怎么了？*我需要配置一些关于rabbitmq的基本内容吗？*

每条消息大约 100 Btyes 长，我用的是consume ack，队列和消息都是持久的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-11-21T05:33:16.243

为了获得良好的吞吐量，应该监控：

1.  流量控制：基于内存，确保正确设置警报级别以避免连接阻塞。基于连接，检查发布者和消费者费率是否合适以避免流量控制）
2.  为消费者设置适当的 Qos 值。

# python - Sockjs - 在 Python 代码中向 sockjs-tornado 发送消息

> ID：12383272
> 
> 赞同：6
> 
> 时间：2012-09-12T07:36:23.417
> 
> 标签：python, django, websocket

我`https://github.com/mrjoes/sockjs-tornado`用于 Django 应用程序。我可以很容易地从 javascript 控制台发送消息。但是我想在 Django 中创建一个信号，并在信号激活后发送 json 字符串。

谁能给我一种在 Python 中向 sockjs-tornado 套接字服务器发送特定消息的方法？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-12T18:01:15.370

如何处理它的选项很少：

1.  在您的 Tornado 服务器中创建简单的 REST API，并使用此 API 从 Django 发布您的更新；
2.  使用 Redis。Tornado 可以订阅更新密钥，当有事情发生时，Django 可以发布更新到这个密钥；
3.  使用 ZeroMQ（AMQP 等）将更新从 Django 发送到 Tornado 后端（1 和 2 的变体）。

在大多数情况下，它是第一种或第二种选择。有些人更喜欢使用第三个选项。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-10T21:26:54.877

我写了[djazator](https://github.com/mike-grayhat/djazator)，简单易用的 django 插件。它使用 zeromq 将消息从 django 传递到 sockjs-tornado。此外，它可以向经过身份验证的 django 用户子集发送消息。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-07-31T07:39:03.380

我只是把它放在[https://github.com/amagee/sockjs-client](https://github.com/amagee/sockjs-client)上，以便从 Python 直接与 SockJS 服务器对话（使用 xhr 流）。

# android - 将本地 html 文件从资产文件夹加载到 webview

> ID：12383278
> 
> 赞同：1
> 
> 时间：2012-09-12T07:36:59.247
> 
> 标签：android, webview

将本地 html 文件从资产加载到 web 视图时出现问题。HTML 页面有 javascript 代码，所以我使用了 webview.setJavaScriptEnabled(true) 来启用它。它加载了 html 页面，但不是所有的小部件都正确加载。有什么建议么...

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-12T07:47:26.927

```
public class ViewWeb extends Activity {  

        public void onCreate(Bundle savedInstanceState) {  
            super.onCreate(savedInstanceState);
            setContentView(R.layout.webview);  
            WebView wv;  
            wv = (WebView) findViewById(R.id.webView1);  
            wv.loadUrl("file:///android_asset/hello.html");   
        }  
    } 
```

# android - 在某些设备上，纹理在 GLES1 中消失

> ID：12383280
> 
> 赞同：0
> 
> 时间：2012-09-12T07:37:02.743
> 
> 标签：android, opengl-es, andengine, textures

我正在 Andengine GLES1 上开发游戏。我使用 8 个 BitmapTextureAtlases 1024x1024。在大多数设备上，一切正常。但是在某些设备上（在 HTC 渴望 S 和 LG P540 上）一些纹理会在游戏过程中消失，一些纹理会闪烁。为什么会发生这种情况以及如何解决？有什么想法吗？提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-12T12:59:22.530

创建引擎时，请尝试调整如下选项：

```
engineOptions.getRenderOptions().disableExtensionVertexBufferObjects();
engine = new Engine(engineOptions); 
```

我有同样的问题（纹理在执行过程中消失了），这解决了它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-12T09:01:02.410

我认为这是因为 BitmapTextureAtlas 的尺寸非常大。尝试减小其大小并重试。

# sockets - Socket.SendTo() 和 headerincluded

> ID：12383282
> 
> 赞同：0
> 
> 时间：2012-09-12T07:37:14.287
> 
> 标签：sockets, tcp, header, packet

我已经使用套接字名称空间在两个系统之间建立连接，现在我能够发送和接收消息，现在我想获取有关已接收数据包的信息，例如标头信息（发件人地址，ttl 和 ...）

```
int sendCount = 1;// Number of times to send the response
int bufferSize = 4096;// Size of the send and receive buffers
IPAddress localAddress = IPAddress.Any;
SocketType sockType;
ProtocolType sockProtocol;
int rc;
Socket clientSocket;
byte[] receiveBuffer, sendBuffer;
Socket serverSocket = null; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-12T08:00:23.830

您不会使用 TCP 接收数据包，而是接收字节流。

一旦你拥有它，你就可以从接受的套接字中获取发送者的远程地址和远程端口。

如果不去你不想去的低得多的层，你根本无法获得数据包的 TTL，相信我。

# joomla - 在 joomla 2.5 中实现新型 ACL

> ID：12383284
> 
> 赞同：2
> 
> 时间：2012-09-12T07:37:18.923
> 
> 标签：joomla, joomla2.5

我正在创建一个用于管理潜在客户的组件[从前端提交潜在客户或客户潜在客户]，在这个组件中我想实现这样的 ACL。

我的客户要求...

```
SuperAdmin
|—  Manager
|—|— Administrator 
```

*考虑`Administrator`下`Manager`。请不要与joomla默认ACL比较。*

所有线索都显示给超级管理员。超级管理员会将线索分配给其他用户。

如果登录的用户是一个`Manager`，他可以看到所有的用户都领导着那些在`Manager`组和`Administrator`组下的人。

如果登录用户是a `Administrator`，他没有权限查看其他线索，因为管理员没有任何子组，它是最后一个组。

我正在使用以下查询

```
$query->select( 'c.id as groupid,c.title AS group_name');
$query->from('#__usergroups AS c');
$query->join('LEFT', '#__usergroups AS s ON (s.lft <= c.lft AND s.rgt >= c.rgt) OR (s.lft > c.lft AND s.rgt < c.rgt)' );
$query->where('s.id = "'.$UG.'"');
$query->order('c.lft');
$db->setquery($query);
$gids           = $db->loadResultArray();
$gids           = implode(",",$gids); 
```

`$UG`=> 登录用户 groupid。

如果登录用户是`Manager`，`$UG`是`6`

**输出**

```
 groupid    group_name
   1         Public
   6         Manager
   7         Administrator 
```

如果登录用户是`Administrator`，`$UG`是。`7`它也返回相同的答案....我希望输出为

如果已`Manager`登录

**输出将是**

```
 groupid    group_name
   6      Manager
   7     Administrator 
```

如果已`Administrator`登录

**输出将是**

```
 groupid    group_name
   7    Administrator 
```

或为空

任何人请帮助我....

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-12T09:37:54.203

最后我找到了答案

**`AND s.lft <= c.lft AND s.rgt >= c.rgt`**在`where`条件中添加行

```
$query->select( 'c.id as groupid,c.title AS group_name');
$query->from('#__usergroups AS c');
$query->join('LEFT', '#__usergroups AS s ON (s.lft <= c.lft AND s.rgt >= c.rgt) OR (s.lft > c.lft AND s.rgt < c.rgt)' );
$query->where('s.id = "'.$UG.'" AND s.lft <= c.lft AND s.rgt >= c.rgt ');
$query->order('c.lft');
$db->setquery($query);
$gids           = $db->loadResultArray(); 
```

![在此处输入图像描述](../Images/a348d1cbc5aec81f98644abf69068c84.png)

# php - PHP MYSQL 分页结果

> ID：12383285
> 
> 赞同：0
> 
> 时间：2012-09-12T07:37:24.360
> 
> 标签：php, mysql, data-paging

我想创建 php 分页，基页是“第 1 页”，页面链接应该从“第 2 页”开始，将“第 1 页”链接作为普通文本而不是链接，当我在“第二页”时“第 1 页”文本成为指向“首页”的链接。

喜欢：在基本页面上时。`/orders.php`

```
<div id="page-links">
<b>1</b>, 
<a href="/orders.php?pagenum=2">2</a>, 
<a href="/orders.php?pagenum=3">3</a>
</div> 
```

在第 2 页时。`/orders.php?pagenum=2`

```
<div id="page-links">
<a href="/orders.php?pagenum=1">1</a>, 
<b>2</b>, 
<a href="/orders.php?pagenum=3">3</a>
</div> 
```

我有这个 php 页面：

```
 <table>
      <?php
      $orders_check_raw = "select * from " . $orders . " where customers_id = '" . (int) $user_id . "'";
      $orders_check_query = mysql_query( $wpdb->prepare( $orders_check_raw ) );
      while ($orders_check = mysql_fetch_array( $orders_check_query )) {
        $blog_details = get_blog_details( $orders_check['blog_id'] );
        ?>

        <tr>
          <th class="check-column"><input type="checkbox" name="order[]" value=""></th>
          <td><?php echo str_pad( $orders_check['orders_id'], 7, '0', STR_PAD_LEFT ) . '<span style="display:none;">' . ltrim( str_pad( $orders_check['orders_id'], 7, '0', STR_PAD_LEFT ), '0' ) . '</span>'; ?></td>
          <td><?php echo $orders_check['payment_method']; ?></td>
          <td><?php echo date_short( $orders_check['date_purchased'] ); ?></td>
          <td><?php echo status_name( $orders_check['orders_status'] ); ?></td>
        </tr>
      <?php } ?>
    </tbody>
    </table> 
```

谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-12T07:46:22.773

我认为您可以使用 $_GET 和 if...else 语句来实现您想要的结果。对于 if..else [http://www.w3schools.com/php/php_if_else.asp](http://www.w3schools.com/php/php_if_else.asp)和对于 GET [http://php.net/manual/en/reserved.variables.get.php](http://php.net/manual/en/reserved.variables.get.php)。

```
if($_GET['pagenum']==1){
   echo '<div id="page-links"><b>1</b>, <a href="/orders.php?pagenum=2">2</a>, <a href="/orders.php?pagenum=3">3</a></div>';
}
else if (....) {
   ...
}
else (...) {
   ...
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-12T07:57:23.800

理想情况下，您应该定义一个常量来显示每页的条目。基于此，您应该为数据库查询设置偏移量。

例如：

```
define('ENTRIES_PER_PAGE', 15);

$orders_check_raw = "SELECT * FROM " . $orders . " WHERE customers_id = '" . (int) $user_id . "'";

$offset = $_GET['pagenum'] * ENTRIES_PER_PAGE;
$orders_check_raw .= "LIMIT " . ENTRIES_PER_PAGE . ", " . $offset;

$orders_check_query = mysql_query( $wpdb->prepare( $orders_check_raw ) ); 
```

希望这可以帮助。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-09-12T08:07:47.740

你可以自己写一个php分页，这将需要一些努力。

或者

检查[这个网站](http://www.phpeasystep.com/phptu/29.html)。它有关于如何使用 PHP 和 MySQL 创建分页的指南？你会发现它很有用。

它是可配置的，以下是一些简短的设置：

1.  连接到您的数据库的代码
2.  你的表名。
3.  每面显示的相邻页数。
4.  每页显示的项目数。

# visual-studio-2010 - 如何在 Visual Studio 2010 中加载 bmp 文件

> ID：12383286
> 
> 赞同：0
> 
> 时间：2012-09-12T07:37:30.283
> 
> 标签：visual-studio-2010, visual-studio, mfc, bmp

我对 Visual Studio C++ 很陌生。我正在尝试从我的系统中加载具有特定路径的 bmp 文件并将其显示在 mfc 的图片控件上，但我无法这样做。任何人都可以在这里指导我。我尝试了以下但我收到一个错误..

代码：

```
filePath = "images/0000.4d.bmp";
ASSERT(filePath);

HBITMAP hBitmap= NULL;
hBitmap = (HBITMAP) LoadImage (
  0, 
  filePath, 
  IMAGE_BITMAP, 
  0, 0, 
  LR_LOADFROMFILE | LR_CREATEDIBSECTION | LR_DEFAULTSIZE);

IDB_PICTURE2.LoadBitmapW(MAKEINTRESOURCE(hBitmap));
m_picture.SetBitmap(IDB_PICTURE2); 
```

当我尝试加载 bmp 文件时发生错误。谢谢你。

错误：

```
Detected memory leaks!
Dumping objects ->
f:\dd\vctools\vc7libs\ship\atlmfc\src\mfc\strcore.cpp(156) : {525} normal block at 0x0034B848, 54 bytes long.
 Data: <   x            > 84 CF B1 78 12 00 00 00 12 00 00 00 01 00 00 00 
f:\dd\vctools\vc7libs\ship\atlmfc\src\mfc\wincore.cpp(4500) : {518} client block at 0x0034B708, subtype c0, 56 bytes long.
a CObject object at $0034B708, 56 bytes long
f:\dd\vctools\vc7libs\ship\atlmfc\src\mfc\strcore.cpp(156) : {511} normal block at 0x0034B1C8, 42 bytes long.
 Data: <   x            > 84 CF B1 78 0C 00 00 00 0C 00 00 00 01 00 00 00 
f:\dd\vctools\vc7libs\ship\atlmfc\src\mfc\occmgr.cpp(195) : {510} normal block at 0x0034B170, 24 bytes long.
 Data: <                > E8 03 00 00 00 00 00 00 E9 03 00 00 00 00 00 00 
f:\dd\vctools\vc7libs\ship\atlmfc\src\mfc\occmgr.cpp(181) : {509} normal block at 0x0034B120, 16 bytes long.
 Data: <                > FF FF FF FF 00 00 00 00 00 00 00 00 00 00 00 00 
c:\documents and settings\raja hadi ashraf\my documents\visual studio 2010\projects\mirrorimage\mirrorimage\mirrorimage.cpp(59) : {505} client block at 0x0034AFB0, subtype c0, 12 bytes long.
a CObject object at $0034AFB0, 12 bytes long
f:\dd\vctools\vc7libs\ship\atlmfc\src\mfc\strcore.cpp(156) : {494} normal block at 0x0034CDF8, 22 bytes long.
 Data: <   x            > 84 CF B1 78 02 00 00 00 02 00 00 00 01 00 00 00 
Object dump complete.
The program '[0x62C] mirrorImage.exe: Native' has exited with code 3 (0x3). 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-12T09:23:58.107

首先测试你的 hBitmap 它不是 NULL 然后调用：

```
m_picture.SetBitmap( hBitmap ); 
```

其他：

1.  IDB_PICTURE2 只是你的 resource.h 文件中的一个#define。在编译时它只会被一个数字代替，即它不是一个可以调用方法的类。
2.  MAKEINTRESOURCE 用于将资源 id 转换为 LPCTSTR 以与方法一起使用。它不会将 hBitmap 转换为资源。
3.  您列出的“错误”只是一些调试信息。这不是真正的错误。如果 LoadBitmap 返回 NULL，则调用 GetLastError 以获取额外信息。

# java - 如何从 java.util.date 转换为 JodaTime 并获得相同的日期

> ID：12383287
> 
> 赞同：5
> 
> 时间：2012-09-12T07:37:38.000
> 
> 标签：java, datetime, jodatime

我遵循这个问题：[从 java.util.date 转换为 JodaTime](https://stackoverflow.com/questions/5042587/convert-from-java-util-date-to-jodatime)

我有日期：Sun Jan 01 00:00:00 CET 1854 现在我想将其转换为 joda 日期时间：

> DateTime dateTime = new DateTime(date);

现在当我打印这个日期时，我得到了：1853-12-31T23:57:44.000+00:57:44

出了什么问题，为什么我的日期改变了？我怎样才能得到相同的日期？

更新：

我使用日历获取日期：

```
Calendar cal1 = Calendar.getInstance();
cal1.set(1854, 0, 1, 0, 0, 0);
cal1.getTime() 
```

更新2：

可能有毫秒问题：

```
 Calendar cal1 = Calendar.getInstance();
    cal1.set(1854, 0, 1, 0, 0, 0);
    DateTime start = new DateTime(1854, 1, 1, 0, 0, 0);
    System.out.println(start.getMillis());
    System.out.println(cal1.getTime().getTime()); 
```

因为这段代码返回：

```
-3660598664000
-3660598799438 
```

但我不知道为什么

更新3：

![在此处输入图像描述](../Images/334bca96fa7e5541fc9a38a5a89216e7.png)

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-09-13T11:33:36.377

Joda-Time 使用准确的时区数据库，该数据库在时区开始之前有多年的[本地平均时间 (LMT)](https://en.wikipedia.org/wiki/Local_mean_time)。引用维基百科：

> 当地平均时是太阳时的一种形式，它修正当地视时的变化，在特定经度形成统一的时标。

JDK 不使用 LMT，因此时代不同。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-09-12T08:42:56.227

好的，我解决了。不是很好，但重要的是它有效

```
 Calendar calendar = Calendar.getInstance();
    calendar.setTime(datum);

    DateTime current = new DateTime(calendar.get(Calendar.YEAR), calendar.get(Calendar.MONTH) + 1,
            calendar.get(Calendar.DAY_OF_MONTH), 0, 0, 0); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-12T07:43:51.497

如果您将日期作为 java.util.date 的类型，则可以使用

```
java.util.Date date = ....
DateTime dateTime = new DateTime(date.getTime()); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-12T08:13:06.530

这段代码

```
Calendar cal1 = Calendar.getInstance();
    cal1.set(1854, 0, 1, 0, 0, 0);
    DateTime start = new DateTime(cal1.getTime());
    System.out.println(start);
    System.out.println(cal1.getTime()); 
```

输出：

```
1854-01-01T00:00:00.941Z
Sun Jan 01 00:00:00 GMT 1854 
```

我想毫秒差异是日历选择现在的saem时间，开始毫秒计数。而 joda-time 选择午夜。或者类似的钝器。我尽量远离java内置的日历和日期，它们是可憎的。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2016-05-21T23:15:50.077

[JodaStephen](https://stackoverflow.com/a/12405303/642706)的答案是正确的，应该被接受。

Joda-Time 团队已指示我们迁移到 Java 8 及更高版本中内置的 java.time 框架。所以我很想在 java.time 中尝试这个问题并比较结果。

问题说输入数据是`CET`从 UTC 偏移的，但问题中的代码忽略了这一事实。我下面的代码使用 UTC 前一小时的偏移量来解释`CET`.

## java.time

这意味着比[UTC](https://en.wikipedia.org/wiki/Coordinated_Universal_Time)[`CET`](http://www.timeanddate.com/time/zones/cet)提前一小时。由于我们只有一个[offset-from-UTC](https://en.wikipedia.org/wiki/UTC_offset)而不是[full time zone](https://en.wikipedia.org/wiki/List_of_tz_database_time_zones)，所以我使用类 for 。[`OffsetDateTime`](http://docs.oracle.com/javase/8/docs/api/java/time/OffsetDateTime.html)`+01:00`

```
LocalDateTime localDateTime = LocalDateTime.of ( 1854 , 1 , 1 , 0 , 0 , 0 , 0 ); // The nineteenth century.
ZoneOffset offset = ZoneOffset.of ( "+01:00" );  // “CET” means one hour ahead of UTC.
OffsetDateTime odt = OffsetDateTime.of ( localDateTime , offset );
Instant instant = odt.toInstant ();  // A moment on the timeline in UTC, with resolution in nanoseconds.
long m = instant.toEpochMilli ();

System.out.println ( "odt: " + odt + " | millis: " + m ); 
```

> odt: 1854-01-01T00:00+01:00 | 毫：-3660598800000

## 乔达时间

相同的代码，但使用 Joda-Time 2.9.3。

```
DateTimeZone zone = DateTimeZone.forOffsetHoursMinutes ( 1 , 0 );
DateTime dateTime = new DateTime ( 1854 , 1 , 1 , 0 , 0 , zone );
long millis = dateTime.getMillis ();

System.out.println ( "dateTime: " + dateTime + " | millis: " + millis ); 
```

> 日期时间：1854-01-01T00:00:00.000+01:00 | 毫：-3660598800000

结果与 java.time 相同。

## java.util.日历

仅供比较。通常您应该避免使用旧的 java.util.Date/.Calendar 类，因为它们已被证明设计不佳、令人困惑且麻烦。

```
Calendar calendar = Calendar.getInstance ();
calendar.set ( 1854 , 0 , 1 , 0 , 0 , 0 );
TimeZone zone = TimeZone.getTimeZone ( "GMT+01:00" );
calendar.setTimeZone ( zone );
long millis = calendar.getTimeInMillis ();

System.out.println ( "calendar: " + calendar + " | millis: " + millis ); 
```

> 日历：java.util.GregorianCalendar[time=-3660598799715,areFieldsSet=true,areAllFieldsSet=false,lenient=true,zone=sun.util.calendar.ZoneInfo[id="GMT+01:00",offset=3600000,dstSavings =0,useDaylight=false,transitions=0,lastRule=null],firstDayOfWeek=1,minimalDaysInFirstWeek=1,ERA=1,YEAR=1854,MONTH=0,WEEK_OF_YEAR=1,WEEK_OF_MONTH=1,DAY_OF_MONTH=1,DAY_OF_YEAR= 1,DAY_OF_WEEK=1,DAY_OF_WEEK_IN_MONTH=1,AM_PM=0,HOUR=0,HOUR_OF_DAY=0,MINUTE=0,SECOND=0,MILLISECOND=285,ZONE_OFFSET=3600000,DST_OFFSET=0] | 毫秒：-3660598799715

结果不同。在这里，我们`-3660598799715`与`-3660598800000`java.time 和 Joda-Time 相比，差异为`285`.

# `Europe/Brussels`

我还尝试了所有三个时区`Europe/Brussels`而不是UTC偏移量。

在 java.time. 使用`ZonedDateTime`类而不是`OffsetDateTime`.

```
LocalDateTime localDateTime = LocalDateTime.of ( 1854 , 1 , 1 , 0 , 0 , 0 , 0 ); // The nineteenth century.
ZoneId zoneId = ZoneId.of ( "Europe/Brussels" );
ZonedDateTime zdt = ZonedDateTime.of ( localDateTime , zoneId );
Instant instant = zdt.toInstant ();  // A moment on the timeline in UTC, with resolution in nanoseconds.
long m = instant.toEpochMilli ();

System.out.println ( "zdt: " + zdt + " | millis: " + m ); 
```

> zdt: 1854-01-01T00:00+00:17:30[欧洲/布鲁塞尔] | 毫：-3660596250000

在乔达时代。只有第一行不同。

```
DateTimeZone zone = DateTimeZone.forID ( "Europe/Brussels" ); 
```

> 日期时间：1854-01-01T00:00:00.000+00:17:30 | 毫：-3660596250000

在 java.util.Calendar 中。`TimeZone`除该行之外的一些代码：

```
TimeZone zone = TimeZone.getTimeZone ( "Europe/Brussels" ); 
```

> 日历：java.util.GregorianCalendar[time=-3660598799151,areFieldsSet=true,areAllFieldsSet=false,lenient=true,zone=sun.util.calendar.ZoneInfo[id="Europe/Brussels",offset=3600000,dstSavings=3600000 ,useDaylight=true,transitions=184,lastRule=java.util.SimpleTimeZone[id=Europe/Brussels,offset=3600000,dstSavings=3600000,useDaylight=true,startYear=0,startMode=2,startMonth=2,startDay=- 1,startDayOfWeek=1,startTime=3600000,startTimeMode=2,endMode=2,endMonth=9,endDay=-1,endDayOfWeek=1,endTime=3600000,endTimeMode=2]],firstDayOfWeek=1,minimalDaysInFirstWeek=1,ERA =1,YEAR=1854,MONTH=0,WEEK_OF_YEAR=1,WEEK_OF_MONTH=1,DAY_OF_MONTH=1,DAY_OF_YEAR=1,DAY_OF_WEEK=1,DAY_OF_WEEK_IN_MONTH=1,AM_PM=0,HOUR=0,HOUR_OF_DAY=0,MINUTE=0 ,SECOND=0,MILLISECOND=849,ZONE_OFFSET=3600000,DST_OFFSET=0] | 毫秒：-3660598799151

所有三个使用都`Europe/Brussels`与他们的版本不同，偏移量为`+01:00`.

再次 java.time 和 Joda-Time 彼此一致（`-3660596250000`），而与`Calendar`（`-3660598799151`）不同，相差`2,549,151`（大约 42 分半钟）。

# codeigniter - Codeigniter 全局错误覆盖

> ID：12383288
> 
> 赞同：0
> 
> 时间：2012-09-12T07:37:38.810
> 
> 标签：codeigniter, error-handling

Codeigniter 中有没有办法覆盖全局错误。例如，如果发生 DB 错误或 PHP 严重错误，它不会显示错误本身，而是显示“我们的管理员正在解决问题”之类的内容，并且错误只是被记录并通过电子邮件发送。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-12T08:00:51.693

Codeigniter 允许您以自己的方式处理错误消息，具体取决于 HTTP 状态。[有关错误处理，](http://codeigniter.com/user_guide/general/errors.html)请参阅此文档

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-12T09:17:38.453

除了@Pos5e5s3dFr3ak 的回答之外，您还应该手动处理尽可能多的错误。例如，如果您有一个数据库错误，您的代码应该确认（或“捕获”）它并可能加载适当的视图，或者将其传递到将通过电子邮件记录错误的库，而不是显示预期的结果。

此方法可用作替代方法，或作为原始答案的补充 - 有时您不需要仅通过其 HTTP 响应状态代码来定位错误。

例如，您可能会发现正在使用的数据库引擎已关闭。如果是这种情况（您必须确定它是否确实已关闭 - 即您没有得到所需的响应），`example.com/error/database`例如，您可以将用户传递给 。

# java - mysql：在表中找不到记录

> ID：12383290
> 
> 赞同：0
> 
> 时间：2012-09-12T07:37:47.177
> 
> 标签：java, mysql

在我的 java 程序中，使用如下更新查询，

```
update unsub_tbl set stat=1 where stat=0 and emp_id='4441' and action='1'; 
```

如果`unsub_tbl`为空，则尝试使用上述更新查询进行更新会出现异常：

> java.sql.SQLException：在“unsub_tbl”中找不到记录

但它并没有在相同的条件下一直给出例外。为什么它有时只给出例外？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-12T07:45:14.503

似乎这是 MySQL 4.0.14+ 的错误

参考[MySQL 错误](http://bugs.mysql.com/bug.php?id=1574)

# php - Symfony 替换身份验证检查功能

> ID：12383298
> 
> 赞同：-2
> 
> 时间：2012-09-12T07:38:22.997
> 
> 标签：php, authentication, symfony

我对 Symfony 有点陌生。我需要检查用户是否在每个页面请求上都登录。我创建了一个登录屏幕，并将 IP 地址、会话 ID、登录时间、用户名、ID 和其他一些变量存储在用户表和会话变量中。现在我必须在每个页面请求中检查许多这些变量变量。有人可以告诉我在哪里进行检查吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-12T07:45:50.893

您可能想要创建一个“preExecute”方法，即在您的任何控制器操作之前执行的方法。看看这里： [如何在 Symfony2 中创建类似 Zend preDispatch 方法](https://stackoverflow.com/questions/7293075/how-to-create-a-something-like-zend-predispatch-method-in-symfony2)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-12T08:44:05.533

Symfony 有一个非常先进的安全组件，你应该使用它而不是滚动你自己的安全。它将为您节省大量的头痛。在此处阅读有关此安全组件的信息：

[http://symfony.com/doc/current/book/security.html](http://symfony.com/doc/current/book/security.html)

我还建议你使用 FOSUserBundle，它是 symfony 安全性的一个很好的补充，它提供了高级用户处理。您可以在此处找到此捆绑包：

[https://github.com/FriendsOfSymfony/FOSUserBundle](https://github.com/FriendsOfSymfony/FOSUserBundle)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-12T07:48:15.737

您可以检查是否授予 IS_AUTHENTICATED_ANONYMOUSLY、IS_AUTHENTICATED 或 IS_AUTHENTICATED_FULLY

在控制器中，您可以使用 security.context 进行检查

[http://symfony.com/doc/current/book/security.html#securing-a-controller](http://symfony.com/doc/current/book/security.html#securing-a-controller)

# java - java内存选项

> ID：12383301
> 
> 赞同：0
> 
> 时间：2012-09-12T07:38:28.543
> 
> 标签：java, jakarta-ee, memory-management

我正在使用 Java 版本 1.6.0_21。

这些是我设置的内存选项：

```
export MEM_OPTS="-Xmx3072m -Xms3072m -XX:NewSize=1024m -XX:MaxNewSize=1024m -XX:+UseTLAB -XX:MaxPermSize=512m 
```

我的服务器有 10 GB RAM。

> Java 运行时环境检测到一个致命错误：java.lang.OutOfMemoryError：为 Chunk::new 请求了 32776 字节。交换空间不足？内部错误 (allocation.cpp:215), pid=28197, tid=44 错误: Chunk::new JRE version: 6.0_21-b06 Java VM: Java HotSpot(TM) Server VM (17.0-b16 mixed mode solaris-sparc)

任何的想法？为什么会出现这种情况，因为我的服务器上有 10 GB 内存？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-12T07:44:43.930

检查以下帖子类似的问题

[java.lang.OutOfMemoryError：为 Chunk::new 请求了 1958536 个字节。交换空间不足](https://stackoverflow.com/questions/4435819/java-lang-outofmemoryerror-requested-1958536-bytes-for-chunknew-out-of-swap)

```
-XX:CompileCommand=exclude,org/apache/velocity/runtime/directive/Foreach,render 
```

[https://confluence.atlassian.com/pages/viewpage.action?pageId=219023686](https://confluence.atlassian.com/pages/viewpage.action?pageId=219023686)

我认为上面的命令可能会有所帮助

# c# - 为什么自定义验证器不能应用于不包含任何值的字段？

> ID：12383304
> 
> 赞同：0
> 
> 时间：2012-09-12T07:38:32.987
> 
> 标签：c#, webforms

我只是有点卡住自定义验证。我创建了一个网页，在该网页下我对不同的字段（如名字、姓氏等）应用了自定义验证...但是，当我尝试对不包含任何值的字段应用自定义验证时，自定义验证不会被触发，无论是在客户端还是服务器端。我试图找到关于为什么会发生这种情况的答案，并且我知道自定义验证不能应用于不包含任何值的字段。

但是，这可以通过必填字段验证器来完成。

我想实现如果用户输入了名字和姓氏，那么他们也应该输入地址，使其成为强制性的。当我尝试对地址文本框进行自定义验证时，它不会被触发。请帮忙

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-12T08:40:09.417

将`ValidateEmptyText`属性设置为 true。 [http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.customvalidator.validateemptytext.aspx](http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.customvalidator.validateemptytext.aspx)

# java - Java MessageDigest 与 iOS CCHmac-sha256

> ID：12383305
> 
> 赞同：1
> 
> 时间：2012-09-12T07:38:37.317
> 
> 标签：java, ios, cryptography

现在我需要 CCHmac-sha256 的帮助。当我在 iOS 和 Java 中消化纯文本时，我没有得到相同的输出。请参考以下代码并指导我解决此问题。

**iOS 代码**

```
CCHmac(kCCHmacAlgSHA256,cKey,strlen(cKey),cData,strlen(cData),cHMAC);   
NSData *hashedPassword2 = 
    [NSData dataWithBytes:cHMAC length:CC_SHA256_DIGEST_LENGTH]; 
```

我正在将此 nsdata 转换为 base32 字符串

**Java 代码**

```
MessageDigest md = MessageDigest.getInstance("SHA-256");    
md.update(s1.getBytes());    
byte[] h = md.digest();    
Base32 base32 = new Base32();    
String base32_h = replaceIllegalCharacters(base32.encodeAsString(h));    
System.out.println("\n"+base32_h+"\n");    
String cc1 = base32_h.substring(0, 4); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-12T08:01:06.230

您的 Java 示例正在执行 SHA-256 哈希，而不是 HMAC。

您需要使用`Mac`not的实例`MessageDigest`。

# java - 如何为 gmaven 插件设置 JDK 版本？

> ID：12383306
> 
> 赞同：2
> 
> 时间：2012-09-12T07:38:37.020
> 
> 标签：java, maven, groovy, gmaven-plugin, gmaven

是否可以强制 gmaven 插件使用与 JAVA_HOME 中指定的不同的 JDK？我们需要使用 Java 7 构建一个特定的项目，但大多数开发人员会将 JAVA_HOME 设置为 Java 6 安装，因为我们所有其他项目仍使用 Java 6。

我们得到的错误信息是：

```
[ERROR] Failed to execute goal org.codehaus.gmaven:gmaven-plugin:1.4:generateStubs (default) on   project XYZ: Execution default of goal org.codehaus.gmaven:gmaven-plugin:1.4:generateStubs failed: An API incompatibility was encountered while executing org.codehaus.gmaven:gmaven-plugin:1.4:generateStubs: java.lang.UnsupportedClassVersionError: <snip> : Unsupported major.minor version 51.0 
```

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-12T08:35:15.103

[Maven Enforcer 插件](http://maven.apache.org/plugins/maven-enforcer-plugin/usage.html)是一种需要特定 JDK 版本的简单方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-04-13T11:24:09.230

您可以在 ide 或 bat/sh 文件中为 maven 任务指定 JAVA_HOME，例如 [Intellige Idea](http://i.stack.imgur.com/F9HXd.png)

并且无需更改系统环境变量

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-09-18T14:17:06.117

您可以在 maven-complier-plugin 配置中设置备用 jdk。看[这里](http://maven.apache.org/plugins/maven-compiler-plugin/examples/compile-using-different-jdk.html)

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-09-12T08:28:20.897

[来自maven-compiler-plugin 的](http://maven.apache.org/plugins/maven-compiler-plugin/examples/set-compiler-source-and-target.html)示例配置

```
<project>
  [...]
  <build>
    [...]
    <plugins>
      <plugin>
        <groupId>org.apache.maven.plugins</groupId>
        <artifactId>maven-compiler-plugin</artifactId>
        <version>2.5.1</version>
        <configuration>
          <source>1.6</source>
          <target>1.6</target>
        </configuration>
      </plugin>
    </plugins>
    [...]
  </build>
  [...]
</project> 
```

默认情况下，maven 使用 Java 1.4，而不是 JAVA_HOME 变量中设置的 Java。

# back - Javascript 在两个连续页面上返回

> ID：12383307
> 
> 赞同：2
> 
> 时间：2012-09-12T07:38:42.423
> 
> 标签：back, javascript

所以，我遇到了一个问题：我有 2 个（或更多）连续页面，用户可以点击它们。在每个页面的底部都有一个“返回”按钮（使用 Javascript 的 history.go(-1);），以便用户能够返回到上一个视图。

现在我的问题是：当用户在第 3 页并单击按钮时，他会返回第 2 页（直到这里一切都很好），但是当他返回第 2 页并单击该页面上的后退按钮时，而不是更进一步回到第 1 页，他被送回（或转发？）到第 3 页。这个问题有没有解决方案，我尝试了谷歌，但找不到任何东西。

提前致谢！:)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-12T07:44:19.637

您的问题是 Javascript 的行为与将浏览器返回到上一页时的行为完全相同。您不能更明确地处理页面之间的导航吗？用指向实际脚本\页面的链接替换 ​​history.go(-1)？

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-12T07:47:02.763

用于`window.location`将用户送回上一页而不是`history.go(-1)`. 如果用户登陆您流程中的第二页，则后退按钮将毫无用处。

# c++ - boost::dijkstra_shortest_paths 覆盖内部图权重？

> ID：12383313
> 
> 赞同：2
> 
> 时间：2012-09-12T07:39:13.847
> 
> 标签：c++, dijkstra, boost-graph

我正在使用 Boost Graph Library 来存储具有`double`边权重和`double`顶点权重的无向图。在我的代码中的几个地方，我需要应用 Dijkstra 算法来搜索最短路径。这工作得很好，直到我决定我想用我自己的权重临时覆盖存储的边权重（只是暂时的，图形权重不得修改）。我的代码基本上是这样的：

```
 // Initial typedefs

  typedef boost::property<boost::edge_weight_t, double> edge_weight_t;
  typedef boost::property<boost::vertex_discover_time_t, double> vertex_weight_t;
  typedef boost::adjacency_list<boost::vecS,
                                boost::vecS,
                                boost::undirectedS,
                                vertex_weight_t,
                                edge_weight_t> graph_t;

 // In a function, where graph is a const reference of type graph_t

 std::vector<double> pathLengths( boost::num_vertices( graph ) );

 boost::property_map<graph_t, boost::edge_weight_t>::type weightMap;
 boost::graph_traits<graph_t>::edge_iterator e_it, e_it_end;
 for( boost::tie( e_it, e_it_end ) = boost::edges( graph );
      e_it != e_it_end;
      ++e_it )
 {
   weightMap[ *e_it ] = 1.0;
 }

 boost::dijkstra_shortest_paths( graph,
                                 boost::vertex( vertex, graph ),
                                 boost::distance_map( &pathLengths[0] ).weight_map( weightMap ) ); 
```

虽然在上面的代码中`graph`是一个*const 引用*，但是图的边权重会在之后*改变*。我究竟做错了什么？或者更具体地说，如何临时覆盖加权图中的边权重？

显然，我可以简单地存储当前的边权重，用我的权重替换它们，然后再将它们改回来。但是，我确信**我**有错，我不想忽视这个问题。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-24T05:24:15.257

我相信，我也有同样的问题——我想暂时（对于搜索算法的特定运行）修改边权重，而不是永久更改图形本身。经过一番搜索，我找到了这个，它允许您注册一个用于生成权重的函子。这用作 weight_map 参数：

[http://www.boost.org/doc/libs/1_51_0/boost/property_map/function_property_map.hpp](http://www.boost.org/doc/libs/1_51_0/boost/property_map/function_property_map.hpp)

# java - 使用 Hibernate + JPA 插入时出现无效状态异常，如何记录无效值？

> ID：12383317
> 
> 赞同：0
> 
> 时间：2012-09-12T07:39:35.600
> 
> 标签：java, hibernate, jpa, validation

使用 JPA 在 Hibernate 中插入实体时出现 InvalidStateException。我了解到异常来自 Hibernate 的 ValidateEventListener 类。它被扔了，但我无处可抓。

有谁知道我怎样才能捕捉到这个异常，以便记录无效值？

```
@Override
public T create(T entity) {
    getEntityManager().persist(entity);
    return entity;
  } 
```

当我包围持久性时，我无法捕捉到 InvalidstateException。它已经走了。

# msdeploy - 使用 MS Deploy 仅部署数据库

> ID：12383324
> 
> 赞同：0
> 
> 时间：2012-09-12T07:40:01.157
> 
> 标签：msdeploy

我可以使用 MS Deploy 仅部署数据库而不部署部署包中的 Web 应用程序吗？

如果是这样，怎么办？

该网站运行在与数据库不同的服务器上（Web 服务器与 db 服务器），因此我宁愿不让它将整个包部署到数据库服务器。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-23T23:24:31.767

[MSDeploy 不会将整个包部署到`MsDeploy.axd`](https://stackoverflow.com/questions/12273055/is-the-entire-package-uploaded-to-msdeploy-axd)，因此部署大量只是为了部署数据库并没有真正听到那么多。

如果您真的不希望出于同步目的检查网站，您有两种选择：

1.  部署包并通过添加跳过 iisApp`-skip:objectName=iisApp,setAcl`

2.  拆分`dbFullSql`成另一个包

无论哪种方式，我都建议继续通过应用程序服务器而不是直接部署到数据库服务器。

# sql - 列出存储在列中的记录类型

> ID：12383330
> 
> 赞同：0
> 
> 时间：2012-09-12T07:40:34.417
> 
> 标签：sql

我需要找到存储在列中的记录类型。

例如一列有这些行：

```
0000
0123
0123
0456
0465
0456
0789 
```

我需要做什么查询才能得到这个列表：

```
0000
0123
0456
0789 
```

我将处理的记录包含数千条记录。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-12T07:41:42.217

use `DISTINCT`，它的作用是只选择结果中的唯一值。

```
SELECT DISTINCT colname
FROM tabelname 
```

# [*SQLFiddle 演示*](http://sqlfiddle.com/#!2/2ef02/1)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-12T07:42:15.653

```
SELECT DISTINCT Yourcol
FROM TABLENAME; 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-12T07:49:32.997

它会给你独特的结果。

```
Select Distinct ColumnName from TableName order by Columname 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-12T08:06:45.470

假设 Sql Server 数据库

如果您要求**列信息**

```
SELECT 
   COLUMN_NAME
  ,DATA_TYPE  
FROM   
  INFORMATION_SCHEMA.COLUMNS 
WHERE   
  TABLE_NAME = 'TableA' 
  AND COLUMN_NAME = 'Column1' 
```

**结果**

```
COLUMN_NAME    DATA_TYPE
Column1        int 
```

为了获得**不同的记录**

```
SELECT DISTINCT <Your Column Name>
FROM <Your Table Name> 
```

# php - 在javascript中嵌入php

> ID：12383333
> 
> 赞同：-2
> 
> 时间：2012-09-12T07:41:01.990
> 
> 标签：php, javascript

嗨，我是所有 html javascript 和 php 的新手。这是假设将输入从 html 表单保存到我的数据库...但我不知道为什么这不起作用...代码似乎进入 php 部分以执行命令...请告知谢谢

```
<html>
<script type = "text/javascript">
   function processInputs()
   {
      //get data from html form
      var email_data;
      email_data=document.getElementById('txtInput').value;
      //document.write(email_data);

      <?php
         //connect database
         $con = mysql_connect("localhost","admin","password");
         if (!$con)
           {
           die('Could not connect: ' . mysql_error());
           }

         mysql_select_db("internet", $con);
         $newemail = $_GET['email_data'];
         echo $newemail;
         //query
         mysql_query("INSERT INTO user_data (email) VALUES ($newemail)");

         mysql_close($con);
      ?>
   }
</script>

<FORM action="test.php" method="post">
    <INPUT type="text" value="this is a text" name"txtInput" id="txtInput" />
</FORM>

<button type="button" onclick=processInputs() >click!</button> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-12T07:44:45.897

你有多个缺陷：

1.  您不能像这样将 PHP 脚本“嵌入”到 javascript 函数中，因为您应该使用 AJAX - 试试[jQuery](http://www.jquery.com)。PHP 是服务器端，Javascript 是基于浏览器的。
2.  你那里有一个 MySQL 注入孔，你应该`$_GET`用`mysql_real_escape_string()`
3.  停止使用`mysql_*`，因为这些功能已被弃用。[阅读这篇文章](http://wiki.hashphp.org/PDO_Tutorial_for_MySQL_Developers)
4.  `onclick`无效，应该是`<button type="button" onclick="processInputs()">click!</button>`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-12T07:52:22.557

如果你有这样的看法——

> 在某些用户操作（例如按钮单击/悬停等）上调用 js 函数会触发 php 代码并填充数据，

那么**你错了**。

PHP 是一种服务器端脚本语言，您不能这样使用它。完整的页面在服务器端解析并作为对浏览器的响应。要进行动态更新，请使用将调用 php 页面并为您填充 html 的*Ajax 调用。*

我建议参考[coredogs.com](http://coredogs.com/lesson/javascript-connection)网站以更好地了解 php 流程。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-09-12T07:46:26.400

你的函数没有被调用！！！改变这个

> onClick = processInputs()

至

> onClick = "processInputs()"

并尝试使用警报语句来查看是否正在调用函数

您也不能在脚本标签中包含 php 脚本

# wordpress - 将循环从旧域重定向到新子域

> ID：12383336
> 
> 赞同：1
> 
> 时间：2012-09-12T07:41:11.323
> 
> 标签：wordpress, .htaccess, mod-rewrite, redirect, loops

我对 .htaccess 重写规则集有疑问。带有 Joomla 模板的 www.OldDomain.com 正在停用，新网站是一个基于 Wordpress 的网站，地址为[http://newdomain.com/subfolder](http://newdomain.com/subfolder)。

出于某种原因，我收到以下消息：“此网页有一个重定向循环”，但无论我尝试什么都行不通。新的 Wordpress 站点具有由 wordpress 生成的对 url 友好的链接。我试图上传一个默认的 wordpress .htaccess 但它也不起作用。

谁能指出我正确的方向如何解决这个问题？先感谢您。

旧站点位于与新站点具有相同域名的另一台服务器上。

域的新服务器上的当前 .htaccess 文件如下：

```
RewriteEngine on
RewriteCond %{HTTP_HOST} ^newdomain\.com$
RewriteRule (.*) http://www.newdomain.com/$1 [R=301,L]
RewriteRule ^$ beta/ [L] 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-02T08:30:14.153

您可以使用以下内容：

```
RewriteEngine On
RewriteBase /
RewriteCond %{HTTP_HOST} !newdomain.com$ [NC]
RewriteRule ^(.*)$ http://www.newdomain.com/beta/$1 [L,R=301] 
```

# cmake - 如何将变更日志添加到使用 CPack 创建的 RPM

> ID：12383339
> 
> 赞同：0
> 
> 时间：2012-09-12T07:41:18.733
> 
> 标签：cmake, changelog, cpack

在典型的规范文件中有一个更改日志部分。我现在使用 CPack 并且想知道如何添加这样的部分。我在网上找不到有关这方面的信息。

例如，我可以使用外部文件并将其指示给 CPack 吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-18T12:59:57.367

如果您打包 RPM 文件，请使用 CPACK_RPM_CHANGELOG_FILE

可用于在规范文件中嵌入变更日志。引用的文件将被读取并直接放在 %changelog 部分之后。

# jquery - 如何使用 jquery 获取孩子的特殊优势。？

> ID：12383348
> 
> 赞同：0
> 
> 时间：2012-09-12T07:41:52.527
> 
> 标签：jquery

海我有以下 html 列表。

```
<ol id="queryList">
  <li id="queryLi1">
     <span class="contentParent">First Level</span>
      <ul class="content">
        <li id="innerList594" class="content">
             Second Level
              <ul class="content">
                    <li>
                        Third Level
                        <textarea id="text1" cols="3" style="width: 250px"></textarea>
                        <input id="button1" type="button"  value="Save" >
                   </li>
             </ul>
        </li>
      </ul>
    </li>
    <li id="queryLi2">
      <span class="contentParent">First Level</span>
      <ul class="content">
        <li id="innerList525" class="content">
              Second Level
              <ul class="content">
                    <li>
                        Third Level
                        <textarea id="text2" cols="3" style="width: 250px"></textarea>
                        <input id="button2" type="button" value="Save">
                   </li>
             </ul>
        </li>
      </ul>
    </li>
      .
      .
      .(etc.,) 
```

在此列表中，当我单击时，`Save button1`我想获取其上升`<li id="queryLi1"><span class="contentParent">` 元素。与所有列表项相同..例如，如果我单击`Save button2`我想采取`<li id="queryLi2"><span class="contentParent">`..

我试过这样

```
 var ascende = $(this).closest('.contentParent'); 
```

但我没有得到它..任何人都可以帮助我..

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-12T07:44:02.887

`.contentParent`不是直系亲属，你需要找到最近的共同父母，然后从那里遍历：

```
var ascende = $(this).closest('#queryLi1').find('.contentParent'); 
```

如果您需要对许多项目执行此操作，请在最外层添加一个类名`LI`并使用类选择器而不是`#queryLi1`.

或者，找到一个兄弟，然后遍历 f.ex：

```
var ascende = $(this).parents('ul').slice(-1).prev(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-12T07:55:53.053

您可以通过获取该班级的父母列表`content`并获取最后一个父母，然后检查该班级的兄弟姐妹的跨度来做到这一点`contentParent`。这确实假设没有更多`ul`的元素具有`content`更进一步的 dom 类。

```
var span = $(this)
        .parents('ul.content')
        .last()
        .siblings('span.contentParent'); 
```

[http://jsfiddle.net/UQhte/](http://jsfiddle.net/UQhte/)

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-09-12T07:54:24.687

您可以使用 .parents() jquery 方法。

```
$(this).parents('.contentParent'); 
```

这将检索第一个找到的祖先。这是一个小提琴：http: [//jsfiddle.net/HLATf/3/](http://jsfiddle.net/HLATf/3/)

# ruby - Ruby对象设计系列方法

> ID：12383350
> 
> 赞同：1
> 
> 时间：2012-09-12T07:41:54.240
> 
> 标签：ruby, oop

我正在尝试将一个字符串从一个混乱（“SOME.String_With-bits.txt”）解析为一个干净的字符串（“Some String With Bits”）。我希望能够调用一个很好的简单方法并获得清理后的字符串 - 例如。`clean_string = NameParser::parse(messy_string)`

我正在尝试在这里做一个很好的可测试设计，但我真的很难想出一个结构（实际的解析代码没问题）。解析字符串非常复杂，我想将这些阶段分开。我试过这个：

```
class NameParser
  def self.parse(name)
    name = self.correct_case(name)
    name = self.correct_whitespace(name)
    name = self.remove_extension(name)
    return name
  end

  def self.correct_case(name) ....
  def self.correct_whitespace(name) ....
  def self.remove_extension(name) ....
end 
```

它看起来很可怕。我能做些什么？谁能指出我在 Github 上某个地方的类似实现？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-12T08:18:32.027

我认为以下代码可以做到这一点：

```
class Object
  def chain_methods(start_value, *methods)
    methods.inject(start_value) { |last, method| self.send(method, last) }
  end
end 
```

以及用法：

```
NameParser.chain_methods(name, :correct_case, :correct_whitespace, :remove_extension) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-12T08:23:06.380

为了避免编写太多基于类的程序，而是编写更多基于对象的程序，您可以删除所有的自我。方法，并制作一个方便的方法 self.parse 如果你喜欢：

```
def self.parse string
  new.parse(string) 
end 
```

或者使用初始化中的字符串创建解析器。这在一定程度上取决于您如何使用它，哪种感觉最好。

# c# - 在sql中的特定列中输入数据

> ID：12383351
> 
> 赞同：0
> 
> 时间：2012-09-12T07:41:56.790
> 
> 标签：c#, asp.net, sql

我有一个从数据库中的成员表中检索电子邮件的文本框。用户可以编辑他们的电子邮件并更新新的电子邮件。我的问题是，如何用新电子邮件替换旧电子邮件？sql的查询是什么？

```
SqlConnection conn = new SqlConnection(ConfigurationManager.ConnectionStrings["Connection"].ConnectionString);
    SqlCommand cmd = new SqlCommand("Insert into aspnet_membership("i dont know how whether to write all columns or only email);

    cmd.CommandType = CommandType.Text;
    cmd.Parameters.AddWithValue("@email", Textbox2.Text); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-12T07:45:41.497

> 我的问题是，如何用新电子邮件替换旧电子邮件？

在这种情况下，您需要 a`UPDATE`而不是`INSERT`：

```
 SqlCommand cmd = new SqlCommand("UPDATE aspnet_membership SET 
          email = @email WHERE userID = @userID", conn); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-12T07:44:30.890

它将像任何其他简单的更新 SQL 查询一样工作：

```
update TableName set Columname = @Value where Username = @Value 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-12T07:44:26.520

您需要使用更新查询而不是插入查询。

在此处查看语法：

[http://www.w3schools.com/sql/sql_update.asp](http://www.w3schools.com/sql/sql_update.asp)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-12T07:46:11.543

从 MSDN [http://msdn.microsoft.com/en-us/library/ms186862.aspx检查此链接](http://msdn.microsoft.com/en-us/library/ms186862.aspx)

选择替换('abcdefghicde','cde','xxx'); 去

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-12T07:46:41.863

因为您想要`Update`EmailID，所以您的查询应该是

```
SqlCommand cmd = new SqlCommand("Update aspnet_membership set email=@email where  UserID=@UserID"); 
```

这应该对您有用，因为您`Insert`正在尝试的查询，这将始终插入新记录而不是更新旧记录..

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-09-12T07:49:57.410

试试这个：您可能需要 UserId 和新电子邮件来替换给定现有用户的现有电子邮件地址。

```
SqlConnection conn = new SqlConnection(ConfigurationManager.ConnectionStrings["Connection"].ConnectionString);
SqlCommand cmd = new SqlCommand("UPDATE aspnet_membership SET email = @newEmail WHERE UserID = @userID");

cmd.Connection = conn;
cmd.CommandType = CommandType.Text;
cmd.Parameters.AddWithValue("@email", Textbox2.Text);
cmd.Parameters.AddWithValues("@UserId", YourUserId);

conn.open();
cmd.ExecuteNonQuery();
conn.close(); 
```

# backbone.js - Backbone.js Collection 获取成功返回

> ID：12383366
> 
> 赞同：0
> 
> 时间：2012-09-12T07:43:15.747
> 
> 标签：backbone.js, backbone.js-collections

我正在尝试使用类似于下面的代码从 Backbone.js Collection fetch 获取返回。我如何绕过休息？

```
var myData = getCollection();

getCollection(){
   this.collection = fetchCollection.fetch({
     success: function(collection, data) {
       collectionData = fetchCollection.toJSON();
       return collectionData; 
     }
  },this);
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-12T07:49:38.237

`fetch`调用底层同步方法，`Backbone.sync`. 您可以覆盖单个集合或模型的同步方法，也可以替换`Backbone.sync`为您自己的。例如，一种这样的替代同步实现是 Backbone localStorage 适配器，它存储到 localStorage，而不是使用 REST 与服务器通信。

# html - 将视频嵌入我的网站

> ID：12383368
> 
> 赞同：0
> 
> 时间：2012-09-12T07:43:27.080
> 
> 标签：html, video, embed

有没有办法从这个网站嵌入视频？[http://azdrama.net/watch-online-divas-in-distress-episode-01-21600.html](http://azdrama.net/watch-online-divas-in-distress-episode-01-21600.html)

我尝试在查看源模式下复制链接，但是一段时间后视频地址会发生变化。

如果有人可以提供帮助，我们将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-12T08:01:28.493

```
<iframe frameborder="0" marginwidth="0" marginheight="0" scrolling="no" width="665" height="460" src="http://azdrama.net/getvideo/embed.php?id=MTU2LDIxOCwyMTgsMjEzLDE2MywxNTYsOTksMTAwLDE2MiwxNTksMTU0LDE5OSwyMTcsMTQ4LDE2NywxNTIsMTUxLDE0NiwyMDEsMTYwLDE1OSwyMDIsMTU4LDE0OSw5OSwxOTYsMjEyLDE2MCw5NywxNjQsMTU0LDk3LDE2NCwyMDYsMjEzLDIxNywxNTksMTQ1LDE0OSwxMDQsMTQ5LDE1NywxMzgsMjA4LDE4MywxMTgsMTE5LDExOCwxNjUsMjA1LDE2NSwxNzEsMTQ1LDE1MSwxMzIsOTcsMTIzLDE0NiwyMTQsMTA2LDEwNCwxMzMsMTIxLDExOCwxMjcsMTc1LDIyNCwxNTEsMTY3LDIwMywxMzksMTY4LDE2NiwxNDMsMTA5LDIwMCwyMjMsMTQwLDE2OSwxMDQsMTAxLDE2MywyMDAsMTUwLDE0NSwyMTUsMTExLDE0OCwxNTgsMjExLDIwMiwxNTAsMTY2LDE2NCwxNTUsMTYwLDE1OQ==&amp;w=665&amp;h=435"></iframe>​ 
```

# php - 使用 PHP 刷新页面

> ID：12383371
> 
> 赞同：185
> 
> 时间：2012-09-12T07:43:33.307
> 
> 标签：php, refresh

如何定期使用 PHP 刷新页面？如果我不能通过 PHP 做到这一点，最好的推荐方案是什么？

* * *

## 回答 #1

> 赞同：338
> 
> 时间：2014-01-02T07:48:17.173

你可以用 PHP 做到这一点：

```
header("Refresh:0"); 
```

它刷新您当前的页面，如果您需要将其重定向到另一个页面，请使用以下内容：

```
header("Refresh:0; url=page2.php"); 
```

* * *

## 回答 #2

> 赞同：119
> 
> 时间：2012-09-12T07:44:59.967

在[PHP](http://en.wikipedia.org/wiki/PHP)中，您可以使用：

```
$page = $_SERVER['PHP_SELF'];
$sec = "10";
header("Refresh: $sec; url=$page"); 
```

或者只使用 JavaScript 的`window.location.reload()`.

* * *

## 回答 #3

> 赞同：20
> 
> 时间：2013-07-31T14:49:25.467

您当然可以使用 PHP 定期刷新页面：

```
<?php
    header("refresh: 3;");
?> 
```

这将每三秒刷新一次页面。

* * *

## 回答 #4

> 赞同：17
> 
> 时间：2014-07-31T09:44:42.007

这很容易在 PHP 中使用[header() ：](https://php.net/manual/en/function.header.php)

```
header('Refresh: 1; url=index.php'); 
```

* * *

## 回答 #5

> 赞同：14
> 
> 时间：2012-09-12T07:45:30.427

除了刷新页面的所有 PHP 方法外，页面还将使用以下 HTML 元标记进行刷新：

```
<meta http-equiv="refresh" content="5"> 
```

见*[Meta refresh](http://en.wikipedia.org/wiki/Meta_refresh)* - *“在给定时间间隔后自动刷新当前网页或框架”*

您可以在`content`值内设置时间。

* * *

## 回答 #6

> 赞同：14
> 
> 时间：2014-11-04T16:24:43.277

我找到了两种刷新 PHP 内容的方法：

**1\. 使用 HTML`meta`标签：**

```
echo("<meta http-equiv='refresh' content='1'>"); //Refresh by HTTP 'meta' 
```

**2.使用PHP刷新率：**

```
$delay = 0; // Where 0 is an example of a time delay. You can use 5 for 5 seconds, for example!
header("Refresh: $delay;"); 
```

* * *

## 回答 #7

> 赞同：3
> 
> 时间：2017-04-21T09:02:37.633

`header('Location: .');`似乎在 Chrome、Firefox、Edge 和 Internet Explorer 11 中刷新页面。

* * *

## 回答 #8

> 赞同：2
> 
> 时间：2014-09-22T04:50:06.993

像这样回显`meta`标签：

URL 是刷新后页面应重定向到的位置。

```
echo "<meta http-equiv=\"refresh\" content=\"0;URL=upload.php\">"; 
```

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2012-09-12T07:44:29.250

[PHP](http://en.wikipedia.org/wiki/PHP)是服务器端语言，因此您无法使用 PHP 刷新页面，但 JavaScript 是刷新页面的最佳选择：

```
location.reload(); 
```

访问*[Location reload() 方法](http://www.w3schools.com/jsref/met_loc_reload.asp)*。

* * *

## 回答 #10

> 赞同：1
> 
> 时间：2012-09-12T08:13:01.633

您可以使用 JavaScript 刷新。您可以在 div 中给出要刷新的内容，而不是完整的页面刷新。然后通过使用 JavaScript，您可以只刷新特定的 div，它比完整的页面刷新更快。

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2012-09-12T07:46:18.203

你不能在[PHP](http://en.wikipedia.org/wiki/PHP)中做到这一点。一旦页面被加载，PHP 就会死掉并且失去控制。

你有几个选择：

*   使用[JavaScript](http://en.wikipedia.org/wiki/JavaScript)
*   使用刷新元标记，`<meta http-equiv="refresh" content="5">`

我认为[刷新元标记](http://en.wikipedia.org/wiki/Meta_refresh)是最简单和最方便的。

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2017-03-09T11:28:36.913

在 PHP 中添加此元标记可能会有所帮助：

```
echo '<META HTTP-EQUIV="Refresh" Content="0; URL=' . $location . '">'; 
```

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2017-09-19T21:39:18.000

一个技巧是在 URL 的末尾添加一个随机数。这样您就不必每次都重命名文件。例如：

```
echo "<img src='temp.jpg?r=3892384947438'>" 
```

只要随机数不同，浏览器就不会缓存它，但是web服务器会忽略它。

* * *

## 回答 #14

> 赞同：0
> 
> 时间：2022-01-13T14:41:01.407

将以下函数添加到您的项目中：

```
function redirect($filename) {
    if (!headers_sent())
        header('Location: '.$filename);
    else {
        echo '<script type="text/javascript">';
        echo 'window.location.href = \''.$filename.'\';';
        echo '</script>';
        echo '<noscript>';
        echo '<meta http-equiv="refresh" content="0;url=\''.$filename.'\'" />';
        echo '</noscript>';
    }
    exit();
} 
```

函数调用：

```
redirect($_SERVER['REQUEST_URI']); 
```

# javascript - Javascript变量赋值 - 类别明智

> ID：12383373
> 
> 赞同：0
> 
> 时间：2012-09-12T07:43:37.823
> 
> 标签：javascript

我添加了一个 javascript 变量，

模型：{}

我想将数据添加到其中的类别中

```
model[id][type1] = data1;
model[id][type2] = data2;
model[id][type3] = data3;
so on.. 
```

我怎样才能在 Javascript 中做到这一点。我们在 Javascript 中使用继承。

- 谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-12T07:46:27.540

采用：

```
model[id] = {};
model[id][type1] = data1;
model[id][type2] = data2;
model[id][type3] = data3; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-12T08:12:26.830

这个对我有用。

```
 var model = new Object();
        model["id1"] = {};
        model["id1"]["type1"] = "data1";
        model["id1"]["type2"] = "data2";

        model["id2"] = {};
        model["id2"]["type1"] = "data1";
        model["id2"]["type2"] = "data2";

    alert(model["id1"]["type2"]); 
```

# objective-c - 如何在 Objective-c 的宏中定义数组？

> ID：12383374
> 
> 赞同：8
> 
> 时间：2012-09-12T07:43:37.863
> 
> 标签：objective-c, ios, macros, xcode4.2, nsarray

有没有可能在objective-c的宏中定义数组。

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-09-12T07:51:50.477

是的，您可以在宏中定义数组。例如

```
#define MY_ARRAY [NSMutableArray arrayWithObjects:someObj1, someObj2, nil] 
```

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2014-03-07T22:15:06.773

你也可以这样做：

```
#define MY_ARRAY @[ @"foo", @"bar" ] 
```

# java - 将 Class.forName 对象强制转换为此对象实现的接口时发生 ClassCastException

> ID：12383376
> 
> 赞同：2
> 
> 时间：2012-09-12T07:43:46.970
> 
> 标签：java, android, classcastexception

我想为 android 创建一些插件示例，所以我有 3 个项目：

*ExternalLibInterface* - 包含`IExternalLib`并构建到`externallibinterface.jar`文件

```
 package com.example.externallibinterface;    
  public interface IExternalLib {
    public String someMethod( String param );
  } 
```

*ExternalLib* - 包含`externallibinterface.jar`和`SomeClass implements IExternalLib`，构建到`externallib.apk`

```
 package com.example.externallib;
   import com.example.externallibinterface.IExternalLib;
   public class SomeClass implements IExternalLib {
       public String someMethod(String arg0) {
           return arg0;
       }
   } 
```

*SomeApp* - 包含`externallibinterface.jar`和活动类 - 我从中加载外部 apk 和类的应用程序。

```
 import com.example.externallibinterface.IExternalLib;    
   import dalvik.system.PathClassLoader;

   public class MainActivity extends Activity {

       @Override
       public void onCreate(Bundle savedInstanceState) {
           super.onCreate(savedInstanceState);
           setContentView(R.layout.activity_main);

           String apkToLoad = null;

           String externalPackagePath = "com.example.externallib";
           String externalClassPath = "com.example.externallib.SomeClass";

           try {
               apkToLoad = getPackageManager()
                    .getApplicationInfo( externalPackagePath, MODE_PRIVATE ).sourceDir;
           } catch ( PackageManager.NameNotFoundException e ) {
               e.printStackTrace();
           }

           PathClassLoader pathClassLoader = 
                   new PathClassLoader( apkToLoad, 
                ClassLoader.getSystemClassLoader() );

           try {
               Class<?> c = Class.forName( externalClassPath, true, pathClassLoader );

               Object someClassInstance = c.newInstance();
                       //exception ClassCastException here
               IExternalLib i = (IExternalLib) someClassInstance;
               i.someMethod( "some string" );               
           } catch (ClassNotFoundException e1) {            
            e1.printStackTrace();
           } catch (InstantiationException e) {
            e.printStackTrace();
           } catch (IllegalAccessException e) {         
            e.printStackTrace();
           } catch ( ClassCastException e ) {
            e.printStackTrace();
           }
       }
   } 
```

但是当我投到我`Object someClassInstance`得到. 为什么？被定义在第 3 位 (in )。`IExternalLib``ClassCastException``IExternalLib``externallibinterface.jar`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-12T07:50:22.573

尝试以下操作：

```
Class<? extends IExternalLib> l_clazz; // our expected class
Class<?> clazz = Class.forName("com.example.externallib.SomeClass"); // our unknown class

// check if our unknown class can be cast to our expected class
if ((l_clazz = clazz.asSubclass(IExternalLib.class)) != null) {
    IExternalLib i = l_clazz.newInstance();
    i.someMethod( "some string" );
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-01-22T11:37:08.403

当不同的类加载器加载类时可能会发生这种情况。确保一次构建整个设置，以便只有一个类加载器负责加载类。当您只是将特定的 .war 文件重新部署到现有系统上时，这种情况经常发生。请参阅此以获得更多见解[无法转换为已实现的接口](https://stackoverflow.com/questions/8035877/cant-cast-to-implemented-interface)

# wpf - WPF 显示文本和图片的可能性

> ID：12383382
> 
> 赞同：0
> 
> 时间：2012-09-12T07:44:02.813
> 
> 标签：wpf, text, image

我正在寻找一种在一个 wpf 元素中显示文本和图片的可能性。是否有可以执行此操作的 WPF 控件？或者为此提供其他选择？

目前我使用一个简单的文本框来显示文本，但现在我应该在一个框中显示文本和图片。

谢谢你的帮助

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-12T07:48:55.197

在您放置文本框的任何地方，您都可以放置一个容器控件（例如 StackPanel），并且在该容器中您可以放置​​任意数量的控件，例如 Image 和 TextBlock

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-21T05:31:40.127

```
 <Grid>
        <Grid.ColumnDefinitions>
            <ColumnDefinition Width="Auto"/>
            <ColumnDefinition Width="*"/>
        </Grid.ColumnDefinitions>
        <Image Grid.Column="0" Source="{Binding ImageSource}" Width="55"/>
        <TextBlock Grid.Column="1" Text="{Binding Name}" Height="25" HorizontalAlignment="Stretch" VerticalAlignment="Center"/>
     </Grid> 
```

试试这个..希望有一个视图模型可以提供两个属性 ImageSource 和 Name

# iphone - 具有 playerduel 功能的应用程序没有收到推送通知

> ID：12383383
> 
> 赞同：0
> 
> 时间：2012-09-12T07:44:12.793
> 
> 标签：iphone, ios, xcode

我正在开发支持 playerduel 框架的应用程序。在其中两个玩家可以互相玩。人可以向另一个人发送挑战。我遵循以下文档。 [https://docs.urbanairship.com/display/DOCS/Getting+Started%3A+iOS%3A+Push](https://docs.urbanairship.com/display/DOCS/Getting+Started%3A+iOS%3A+Push)

当我从命令行（用于测试）发送通知时，我可以收到通知，如上述文档中所述。但是我玩游戏的时候。当有人向另一人发送挑战时，Playerdual 无法发送通知。

应用程序代码：-

```
- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions {    

//Init Airship launch options
NSMutableDictionary *takeOffOptions = [[[NSMutableDictionary alloc] init] autorelease];
[takeOffOptions setValue:launchOptions forKey:UAirshipTakeOffOptionsLaunchOptionsKey];

// Create Airship singleton that's used to talk to Urban Airship servers.
// Please populate AirshipConfig.plist with your info from http://go.urbanairship.com
[UAirship takeOff:takeOffOptions];

// Register for notifications
[[UAPush shared]registerForRemoteNotificationTypes:(UIRemoteNotificationTypeBadge |
                                     UIRemoteNotificationTypeSound |
                                     UIRemoteNotificationTypeAlert)];

// Override point for customization after application launch.
self.appStarted  = YES;
UIImage *bgImage= [UIImage imageNamed:@"default.png"];
[PlayerDuel initializeWithGameKey:@"gamekey" andBackground:bgImage
                      andDelegate:[navigationController.viewControllers objectAtIndex:0] andOrientation:UIInterfaceOrientationPortrait];

- (void)application:(UIApplication *)application didRegisterForRemoteNotificationsWithDeviceToken:(NSData *)deviceToken {
NSLog(@"deviceToken:- %@",deviceToken);
// Updates the device token and registers the token with UA
[[UAPush shared] registerDeviceToken:deviceToken];
[PlayerDuel registerDeviceToken:deviceToken]; 
```

}

```
- (void)application:(UIApplication *)application didReceiveRemoteNotification:(NSDictionary *)userInfo {

for (id key in userInfo) {
    NSLog(@"key: %@, value: %@", key, [userInfo objectForKey:key]);
}    

NSLog(@"remote notification: %@",[userInfo description]);

NSDictionary *apsInfo = [userInfo objectForKey:@"aps"];

NSString *alert = [apsInfo objectForKey:@"alert"];

NSLog(@"Received Push Alert: %@", alert);

NSString *sound = [apsInfo objectForKey:@"sound"];

NSLog(@"Received Push Sound: %@", sound);
NSString *itemName = @"my app";
NSString *messageTitle = [apsInfo objectForKey:@"alert"];
UIApplicationState state = [application applicationState];
if (state == UIApplicationStateActive){
    AudioServicesPlaySystemSound(1007);
 [self _showAlert:messageTitle withTitle:itemName];
}
else{
    UIViewController *viewController = navigationController.visibleViewController;
    //        NSLog(@"Controller Name:-  %@",viewController);
    [viewController.view reloadInputViews];
    [viewController playerDuelStartGame:nil];
}
NSString *badge = [apsInfo objectForKey:@"badge"];

NSLog(@"Received Push Badge: %@", badge); 
```

}

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-12T08:31:11.713

如果推送通知直接通过 Urban Airship 而不是通过 PlayerDuel 工作，您可能没有在 PlayerDuel 的开发者网站中指定正确的城市飞艇详细信息。确保将 Urban Airship 的 Master Secret 而不是 App Secret 放在 PlayerDuel 的网站上。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-12T13:38:21.547

我使用 App Secrete 作为 Urban Airship Key: . 这是错误的。当我将其值更改为 App Key 时。它工作正常。

# ios - IOS：XMPP-Framework 消息归档示例

> ID：12383387
> 
> 赞同：2
> 
> 时间：2012-09-12T07:44:28.720
> 
> 标签：ios, frameworks, xmpp

任何人都可以帮助我使用 XMPP-Framework for iOS 吗？我想在客户端存档我的消息。在网上阅读了很多之后，我发现 XEP-0136 Modul 很有用……但我现在不知道如何使用它。

谢谢

# c++ - 是“使用命名空间标准；” 豁免过度代码规则？

> ID：12383396
> 
> 赞同：0
> 
> 时间：2012-09-12T07:44:54.820
> 
> 标签：c++

[http://community.topcoder.com/tc?module=Static&d1=help&d2=ratedEvent](http://community.topcoder.com/tc?module=Static&d1=help&d2=ratedEvent)的规则 指定库导入语句（#include、imports、using、Imports）被豁免。但是在 C++ 中，using 语句不是用于导入库。

任何人都可以确认是否`using namespace std;`免除了过度/额外代码规则？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-12T07:48:42.047

`using namespace std;`是否过度可能存在争议；它实现了一种功能，但它是一种语法功能，而不是功能功能。

但是，无论如何使用它[从来都不是一个好主意](https://stackoverflow.com/questions/1452721/why-is-using-namespace-std-considered-a-bad-practice-in-c)（因为它会污染当前的命名空间），因此我建议在任何情况下都不要使用它。您的代码中的一些`std::`前缀没有任何问题，编写起来并不多，然后至少可以轻松地看到来自 std 命名空间的内容！

# ssrs-2008 - 我需要知道是否可以按照定义创建 SSRS 报告

> ID：12383399
> 
> 赞同：0
> 
> 时间：2012-09-12T07:45:12.533
> 
> 标签：ssrs-2008, reporting-services

我有一个用户应该能够定义的带有 3 个参数的查询：

**AND (ORION_SCHED.TRIP.DATE_TIME = '09/11/2012')
AND (ORION.CUST.COUNTRY = 'BE')
AND (ORION_SCHED.TRIP.ID_SHIFT ='1')**

*   DATE_TIME 应该是一个日期选择器
*   具有定义值的国家下拉菜单
*   具有定义值的 ID_SHIFT 下拉菜单

我想这不是问题？

此查询的结果将返回数据集

![在此处输入图像描述](../Images/e4bc5f4aa017308555237ceef8e21a83.png)

我的实际问题：我希望以这种方式呈现结果

![在此处输入图像描述](../Images/ddc6ad9c938fec478f5768cda374cdca.png)

所以总是3个数据块彼此相邻，每个块的数据都是在TRUCK_ID列上过滤的查询结果（返回数据集的子选择）

每个块的空单元格很好，这些是每个 TRUCK_ID 的非唯一值，我不希望在每一行都重复，但就像我说的很好。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-12T18:15:48.490

我将在返回 1,2 或 3 的查询中添加一个新列（对于每个不同的 TRUCK_ID。然后我将使用 3 Tablix（您的报告中的每列一个）并通过您在查询中添加的新列过滤数据。

然后，您只需对每个 tablix 上的 TruckID 进行分组并使用该格式。它应该工作。

# c# - RichTextBox - 每 3 个字符在文本颜色之间交替。C＃

> ID：12383402
> 
> 赞同：1
> 
> 时间：2012-09-12T07:45:16.490
> 
> 标签：c#, colors, hex, richtextbox, alternate

我在富文本框中显示十六进制数据，如下所示：

`64 73 67 66 34 33 74 67 35 34 36 79 37 35 79 36`
`33 67 35 36 67 35 36 33 79 68 34 36 37 38 72 74`

我希望它每 3 个字符显示为不同的颜色。即每个位（2个数字和一个具体的空格）是不同的颜色。

我尝试做的只是在设计器模式下将文本颜色设置为蓝色，以便将处理时间减半。然后我将每 2 3 个字符更改为红色。

但是，这就是正在发生的事情：

![http://i.imgur.com/ZzDtO.png](../Images/38ee0210f7561815521ed914164bb13b.png)

这是代码：

```
for (int i = 0; i < richTextBox1.TextLength; i++)
    if (i % 4 == 1)
    {
        richTextBox1.SelectionStart = i;
        richTextBox1.SelectionLength = 2;
        richTextBox1.SelectionColor = Color.Red;
    } 
```

很明显我的数学是错误的，我想不出任何可行的方法。我已经尝试过 i % 3 = 0、selectionLength = 3 等等。

PS如果这会很慢，你能建议其他方法吗？如果你想看的话，这里是完整的代码：http: [//pastebin.com/vHMfnZW1](http://pastebin.com/vHMfnZW1)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-12T08:35:19.637

我不确定我得到了你想要做什么（我看不到图像），无论如何我会这样做：

```
 for (int i = 3; i < richTextBox1.TextLength; i += 6)
        {
            richTextBox1.SelectionStart = i;
            richTextBox1.SelectionLength = 2;
            richTextBox1.SelectionColor = Color.Red;
        } 
```

根据您的评论进行编辑。

这是因为更改选择是一项缓慢的操作。事情可以更好地对字符串进行操作，并利用您可以设置 RichTextBox 的 Rtf 属性。您可以在慢循环之后检查控件的 Rtf 属性，以了解您必须构建什么，它是一个字符串，由定义使用的字体和颜色的部分、实际文本和一个简单的结束部分组成。

特别是要使用蓝色和红色，您可以定义此“颜色表” `{\\colortbl ;\\red0\\green0\\blue255;\\red255\\green0\\blue0;}`，然后使用代码`\\cf1` 和`\\cf2` 分别指定蓝色和红色。

这段代码应该更快：

```
 StringBuilder sb = new StringBuilder();
        sb.Append("{\\rtf1\\ansi\\ansicpg1250\\deff0\\deflang1050{\\fonttbl{\\f0\\fnil\\fcharset238 Microsoft Sans Serif;}}\r\n{\\colortbl ;\\red0\\green0\\blue255;\\red255\\green0\\blue0;}\r\n\\viewkind4\\uc1\\pard\\f0\\fs17");
        string[] col = new string[] { "\\cf1 ", "\\cf2 " };
        int idxCol = 0;
        for (int i = 0; i < myText.Length; i++)
        {
            if (i % 3 == 0)
            {
                sb.Append(col[idxCol]);
                idxCol = (idxCol + 1) % 2;
            }
            sb.Append(myText[i]);
        }
        sb.Append("\\par\r\n}\r\n");

        richTextBox1.Rtf = sb.ToString(); 
```

请注意，我并不深入了解 RTF 语法，只知道颜色部分，因为它过去对我很有用。我认为第一部分和最后一部分是不变的。如您所见，颜色定义为 RGB，并由常量字符串“\cf”引用，后跟颜色表中的索引（基于 1）。

你可以在[这里](http://www.microsoft.com/en-us/download/details.aspx?id=10725)找到完整的规范和一些更简单但我发现[在这里](http://www.pindari.com/rtf1.html)有用的东西。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-12T08:14:27.327

像这样的东西？

```
for (int i = 0; i < richTextBox1.TextLength; i++)
    var oldStart = richTextBox1.SelectionStart;
    var oldLength = richTextBox1.SelectionLength;
    if (richTextBox1.Text[i-1] == ' ')
    {

        richTextBox1.Select(i);
        richTextBox1.SelectionColor = Color.Red;
    }
    // Restore selection
    richTextBox1.Select(oldStart, oldLength);
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-12T08:27:57.687

我能够通过这样做来解决这个问题：

```
for (int i = 0; i < richTextBox1.TextLength; i++)
{
    if (richTextBox1.Text[i] == ' ')
    {
        if (colourIt == true)
        {
            richTextBox1.SelectionStart = i;
            richTextBox1.SelectionLength = 3;
            richTextBox1.SelectionColor = Color.Red;
            colourIt = false;
        }
        else colourIt = true;

    }
} 
```

谢谢您的帮助 ：）

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-12T08:59:55.860

我不确定你想要达到什么目的。但也许这会有所帮助：

```
 for (int i = 0; i < richTextBox1.TextLength; i++)
        if (i % 6 == 2)
        {
            richTextBox1.SelectionStart = i - 2;
            richTextBox1.SelectionLength = 3;
            richTextBox1.SelectionColor = Color.Red;
        } 
```

# apache - apache mod_jk 向所有集群节点发送请求

> ID：12383405
> 
> 赞同：1
> 
> 时间：2012-09-12T07:45:20.733
> 
> 标签：apache, cluster-computing, load-balancing, sticky

我有一个分布式集群系统。我已经设置了 apache 服务器并设置了负载平衡（mod_jk）条件。粘性会话也是真实模式。我是否可以向所有 tomcat 集群节点发送一些特殊请求（在请求标头控制之后）？有什么规则或方法吗？

不需要回传给客户端，所有节点都可以通过特殊的 url 得到通知就足够了。我已经配置了 uriworkermap.properties，负载均衡器节点有 3 种状态（活动、禁用、停止）。有没有通过配置uriworkermap.properties 或者workers.properties 的解决方案？

为了解决这个问题，建议 mod_jk 的替代品？

# c# - 密码保护 PDF 文件

> ID：12383409
> 
> 赞同：14
> 
> 时间：2012-09-12T07:45:36.750
> 
> 标签：c#

我有以下内容：

*   例程 X 每天创建一个 PDF 文件。
*   例程 Y 将此文件附加到 Outlook 电子邮件并将其发送给收件人。

以上都在VBA中。它们是从 C# 控制台应用程序调用的。

创建 PDF 后，我需要对其进行密码保护。在不购买第三方软件的情况下通过 VBA 做到这一点是相当复杂的。

使用 C# 最简单的解决方案是什么？

（我怀疑我们花费的金额与答案的复杂性之间存在反比关系！）

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2012-09-12T07:57:46.620

[PDFSharp](http://www.pdfsharp.net/)应该能够使用密码保护 PDF 文件：

```
// Open an existing document. Providing an unrequired password is ignored.
PdfDocument document = PdfReader.Open(filename, "some text");

PdfSecuritySettings securitySettings = document.SecuritySettings;

// Setting one of the passwords automatically sets the security level to 
// PdfDocumentSecurityLevel.Encrypted128Bit.
securitySettings.UserPassword  = "user";
securitySettings.OwnerPassword = "owner";

// Don't use 40 bit encryption unless needed for compatibility reasons
//securitySettings.DocumentSecurityLevel = PdfDocumentSecurityLevel.Encrypted40Bit;

// Restrict some rights.
securitySettings.PermitAccessibilityExtractContent = false;
securitySettings.PermitAnnotations = false;
securitySettings.PermitAssembleDocument = false;
securitySettings.PermitExtractContent = false;
securitySettings.PermitFormsFill = true;
securitySettings.PermitFullQualityPrint = false;
securitySettings.PermitModifyDocument = true;
securitySettings.PermitPrint = false;

// Save the document...
document.Save(filename); 
```

参考：
[http ://www.pdfsharp.net/wiki/ProtectDocument-sample.ashx](http://www.pdfsharp.net/wiki/ProtectDocument-sample.ashx)

# ios - 有人知道这个错误是什么意思吗？会很胖并且 ar(1) 将无法对其进行操作

> ID：12383411
> 
> 赞同：4
> 
> 时间：2012-09-12T07:45:43.557
> 
> 标签：ios, xcode, rubymotion

我正在使用 SSPullToRefresh 编译我的应用程序（它是一个 Rubymotion 应用程序）并不断收到此消息：

```
will be fat and ar(1) will not be able to operate on it 
```

有谁知道这意味着什么以及我应该如何处理它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-06T23:26:44.517

看来问题已得到解决。

[https://github.com/HipByte/RubyMotion/issues/41](https://github.com/HipByte/RubyMotion/issues/41)

# websphere - 无法使用 Jython 脚本 (WAS 7) 永久更改日志详细信息级别

> ID：12383413
> 
> 赞同：0
> 
> 时间：2012-09-12T07:45:47.213
> 
> 标签：websphere, jython, websphere-7

我正在尝试使用 Jython 脚本更改 WebSphere 的日志详细信息级别：

```
..
AdminTask.setTraceSpecification('[-serverName server1 -nodeName qnode -traceSpecification com.ibm.*=all=enabled]')
AdminConfig.save()
.. 
```

成功运行脚本后，我正在检查“日志记录和跟踪 > {server_name} > 诊断跟踪服务 > 更改日志详细信息级别。运行时选项卡反映了我在脚本中输入的设置（traceSpecification），但配置选项卡仍然存在没有改变，所以，我的设置没有保存到配置中。我已经尝试重新启动我的服务器，所以我确定是这种情况。

根据 setTraceSpecification 的文档，此“命令还将跟踪规范保存在配置中”。好吧，不是我的情况：）你知道我做错了什么吗？

任何帮助将非常感激

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-13T08:41:56.190

正如我所发现的， setTraceSpecification() 还有一个 persist 参数，如果您想将设置永久更改为 WAS 配置，则必须设置该参数：

```
..
AdminTask.setTraceSpecification('[-serverName myserver -nodeName mynode -persist true -traceSpecification com.ibm.*=all=enabled]')
AdminConfig.save()
.. 
```

不幸的是，[WAS 7 InfoCenter](http://pic.dhe.ibm.com/infocenter/wasinfo/v7r0/topic/com.ibm.websphere.base.doc/info/aes/ae/rxml_7libserver.html)对这个选项只字未提，而 WebSphere CloudBurst Appliance InfoCenter 有一个包含它的[示例。](http://pic.dhe.ibm.com/infocenter/wscloudb/v1r1m1/topic/com.ibm.websphere.cloudburst.doc/pc/pcr_configtrace_sample.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-12T12:57:33.267

我认为您可能还需要在脚本中保存配置：

```
if (AdminConfig.hasChanges()):
    AdminConfig.save() 
```

# sitemap - 让谷歌根据搜索者的语言显示两个不同的网站

> ID：12383416
> 
> 赞同：0
> 
> 时间：2012-09-12T07:45:52.873
> 
> 标签：sitemap, seo

嗨，我创建了一个谷歌网络管理员工具帐户并发送了 2 个站点地图：一个用于意大利语，一个用于我的站点的英语。现在，我的网站在索引中有一个脚本，如果他是意大利人，它会将用户重定向到 mywebsite.it/it，否则它将转到 mywebsite.it/en。问题是现在谷歌的爬虫（显然不是意大利语）只能看到英文版的网站，而不是两者。

有没有办法让它根据语言爬行并显示两个不同的网站？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-13T10:58:12.333

你使用 JavaScript 来重定向人们吗？最好使用服务器端重定向，例如使用**.htaccess**

但是，当您从索引页面链接两种语言版本并且 Google 接受了您的站点地图时，您的站点应该可以被编入索引。爬虫访问您的意大利网站可能还需要一些时间。

* * *

更新：您可以/应该为您的网站的用户添加一个语言切换器，并将`head`您网站区域中的翻译与`link`元素`rel="alternate`和`hreflang="it`相应的链接。`"en"`. 参见[谷歌：rel="alternate" hreflang="x"](http://support.google.com/webmasters/bin/answer.py?hl=en&answer=189077)

# jquery - 使用jquery选择div中的第三个输入框

> ID：12383417
> 
> 赞同：1
> 
> 时间：2012-09-12T07:46:00.317
> 
> 标签：jquery

我有一个`div`名为*foxcontainer*，里面有一个表单，在表单内，每个输入框都在自己的 div 中，并且都没有名称（第一个 foxcontainer 除外）。

如何使用 jquery 在该表单中选择第二个（或第三个）输入框，以便我可以将 datepicker 应用于它？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-09-12T07:47:59.760

例如，您可以[`:eq()`](http://api.jquery.com/eq-selector/)在选择器中使用：

```
$("#foxcontainer input:eq(1)");  // for 2nd input box 
```

另一种选择是使用[`slice()`](http://api.jquery.com/slice/)：

```
$("#foxcontainer input").slice(2, 3);    // for 3rd input box 
```

**演示：http:** [//jsfiddle.net/BU4Tf/](http://jsfiddle.net/BU4Tf/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-12T07:48:18.883

您可以通过选择器获得这些，要获得第二个输入，您可以尝试

```
var input2nd  =$('#foxcontainer input:eq(1)'); 
```

为了获得第三个输入，您可以尝试

```
var input3rd = $('#foxcontainer input:eq(2)'); 
```

或使用 find 功能

```
var $foxcontainer  = $('#foxcontainer');
var input2nd = $foxcontainer.find('input:eq(1)');
var input3rd = $foxcontainer.find('input:eq(2)'); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-12T07:49:56.850

使用 jQuery`:eq()`选择器。所以： `var second = $('#foxcontainer input:eq(1);`

注意计数从 0 开始，所以第二个是 1。

# magento - 如何在观察者中获取订单状态？

> ID：12383423
> 
> 赞同：3
> 
> 时间：2012-09-12T07:46:27.820
> 
> 标签：magento, events, orders, observers

在事件下`sales_order_save_after`，我在观察者中有一些代码来获取订单状态。

```
public function saveBookingInfoFromOrder(Varien_Event_Observer $observer){                
        $order = $observer->getEvent()->getOrder();

        //$last_orderid = $order->getIncrementId();

        $last_orderid = $order->getId();
        $order_status = $order->getStatus();
} 
```

但是，订单状态尚未到来。为什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-12T10:27:46.947

事件`sales_order_save_after`有点棘手。第一次触发时 Order 尚未提交给 DB，更重要的是 - 它实际上还没有设置 State 和 Status。

如果您想获得 Status，还有其他更适合您的活动：

1.  `sales_order_payment_place_end``Mage_Sales_Model_Order_Payment::place`- 完成后立即在方法中触发`$order->setState`。该`place`函数本身是一个用于订单保存交易过程的 afterCommit 回调。

2.  `sales_order_save_commit_after`- 当所有 afterCommits 被处理时触发

3.  `sales_model_service_quote_submit_success`- 这是`Mage_Sales_Model_Service_Quote::submitOrder`方法中的最后一个事件 - 在它被调度的那一刻，订单肯定会拥有所有数据，并且您可以确定在订单创建过程中没有错误。

# visual-studio - 如何在解决方案资源管理器中搜索项目？

> ID：12383425
> 
> 赞同：1
> 
> 时间：2012-09-12T07:46:31.557
> 
> 标签：visual-studio

我的解决方案资源管理器中有几十个文件夹中有600多个项目，在窗口中滚动不容易找到项目。

如何按名称搜索或快速定位项目？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-17T06:15:38.513

我现在查找项目的方法是打开我的项目文件夹并查找`*.vcxproj`与解决方案资源管理器具有相同项目名称和相同层次结构的文件。

通过这个我会知道是否有一个项目，以及它将在 VC 的解决方案资源管理器中的哪个文件夹。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-03-13T11:21:18.113

You should start the command window (located on view - other windows - command window), then type the word: `of` and then type your project name and file name, you could only type partial names, it'll autocomplete for you.

For example, after openning the command window start typing:

`of yourprojectname\web.config`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-12T18:09:37.087

在您的搜索栏中，输入“>of”（不带引号），然后输入您要查找的任何内容。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2021-07-28T11:16:21.880

在 Visual Studio 2019 中，[解决方案资源管理器](https://docs.microsoft.com/en-us/visualstudio/ide/use-solution-explorer?view=vs-2019)视图中有一个搜索字段：

[![在此处输入图像描述](../Images/d701055474f2ebb770b0990a7516294e.png)](https://i.stack.imgur.com/JWHqc.png)

当您在 2012 年提出这个问题时，该功能不存在。

# android - 如何在 AsyncTask 中从 JSON 创建新的数据类型并将其发送到另一个活动。安卓

> ID：12383426
> 
> 赞同：0
> 
> 时间：2012-09-12T07:46:36.673
> 
> 标签：android, json, android-asynctask

我是 Android 开发的新手，这一定是一个简单的问题，但我想不通。我的应用程序得到一个 json 格式： `[ { 'src':1, 'title':'The Black Eyed Peas - Lets Get It Started', 'id':1, 'slots':[0,10], 'prev':[0,1,2,3] }, { 'src':2, 'title':'Carly Ray Jepsen - Call Me Maybe', 'id':2, 'slots':[0,10], 'prev':[0,1,2,3] }, { 'src':3, 'title':'Kris Kross - Jump', 'id':3, 'slots':[0,10], 'prev':[0,1,2,3] }, .... //several identical ]` 然后我解析它。

```
 for(int i = 0; i<json.length(); i++)
                    {
                        JSONObject jo = (JSONObject) json.get(i);

                        String src = jo.getString("src");
                        String title = jo.getString("title");
                        String id = jo.getString("id");
                        //What should do next?

                      } 
```

我需要创建一个新的数据类型来使用。我必须怎么做？PS对不起我的英语不好

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-12T08:00:31.673

实现 ParseAble 类并将带有对象的意图发送到另一个活动

```
 public class JSONDATA implements Parcelable {

        private String src;
        private String title;
        private String id;

        // Collect from json array
        public JSONDATA(JSONObject jo) {
            try {
                String src = jo.getString("src");
                String title = jo.getString("title");
                String id = jo.getString("id");
            } catch (JSONException e) {
                // TODO Auto-generated catch block
                e.printStackTrace();
            }
        }

        public static Parcelable.Creator<JSONDATA> getCreator() {
            return CREATOR;
        }

//read from Intent;
        private JSONDATA(Parcel in) {
            src = in.readString();
            title = in.readString();
            id = in.readString();
        }

        @Override
        public int describeContents() {
            // TODO Auto-generated method stub
            return 0;
        }

        @Override
        public void writeToParcel(Parcel dest, int flags) {
            dest.writeString(src);
            dest.writeString(title);
            dest.writeString(id);
        }

        public static final Parcelable.Creator<JSONDATA> CREATOR = new Parcelable.Creator<JSONDATA>() {
            public JSONDATA createFromParcel(Parcel in) {
                return new JSONDATA(in);
            }

            public JSONDATA[] newArray(int size) {
                return null;
            }
        };

    } 
```

然后

```
 Intent intent = new Intent();
    JSONObject jo = (JSONObject) json.get(i);
    JSONDATA data = new JSONDATA(jo);
    intent.putExtra("DATA", data);
    sendBroadCastIntent(i,"YOUR_ACTIVITY"); 
```

# vala - vala 中的 GtkColorChooser 对话框

> ID：12383427
> 
> 赞同：2
> 
> 时间：2012-09-12T07:46:41.203
> 
> 标签：vala, gtk3

我想在我的应用程序中使用颜色选择器对话框 - [https://github.com/satya164/gtk-theme-config](https://github.com/satya164/gtk-theme-config)

我在 vala 中找不到任何有关 ColorChooserDialog 的文档。目前我正在使用颜色按钮来选择颜色。但是我在编译时收到了以下弃用警告，我使用的是 Vala 0.16.1 和 GTK3.6（警告不会出现在 GTK3.4 中）。我找不到有关使用 ColorChooser 对话框的示例。如果有人可以帮助我实现 ColorChooserDialog，我将不胜感激。

```
valac --pkg gtk+-3.0 -X -lm gtk-theme-config.vala -o gtk-theme-config
/home/satya/Workspace/gtk-theme-config/gtk-theme-config.vala.c: In function ‘theme_pref_window_set_values’:
/home/satya/Workspace/gtk-theme-config/gtk-theme-config.vala.c:1013:2: warning: ‘gtk_color_button_set_rgba’ is deprecated (declared at /usr/include/gtk-3.0/gtk/gtkcolorbutton.h:100): Use 'gtk_color_chooser_set_rgba' instead [-Wdeprecated-declarations]
/home/satya/Workspace/gtk-theme-config/gtk-theme-config.vala.c:1016:2: warning: ‘gtk_color_button_set_rgba’ is deprecated (declared at /usr/include/gtk-3.0/gtk/gtkcolorbutton.h:100): Use 'gtk_color_chooser_set_rgba' instead [-Wdeprecated-declarations]
/home/satya/Workspace/gtk-theme-config/gtk-theme-config.vala.c:1019:2: warning: ‘gtk_color_button_set_rgba’ is deprecated (declared at /usr/include/gtk-3.0/gtk/gtkcolorbutton.h:100): Use 'gtk_color_chooser_set_rgba' instead [-Wdeprecated-declarations]
/home/satya/Workspace/gtk-theme-config/gtk-theme-config.vala.c:1022:2: warning: ‘gtk_color_button_set_rgba’ is deprecated (declared at /usr/include/gtk-3.0/gtk/gtkcolorbutton.h:100): Use 'gtk_color_chooser_set_rgba' instead [-Wdeprecated-declarations]
/home/satya/Workspace/gtk-theme-config/gtk-theme-config.vala.c:1025:2: warning: ‘gtk_color_button_set_rgba’ is deprecated (declared at /usr/include/gtk-3.0/gtk/gtkcolorbutton.h:100): Use 'gtk_color_chooser_set_rgba' instead [-Wdeprecated-declarations]
/home/satya/Workspace/gtk-theme-config/gtk-theme-config.vala.c: In function ‘theme_pref_window_on_selected_color_set’:
/home/satya/Workspace/gtk-theme-config/gtk-theme-config.vala.c:1499:2: warning: ‘gtk_color_button_get_rgba’ is deprecated (declared at /usr/include/gtk-3.0/gtk/gtkcolorbutton.h:103): Use 'gtk_color_chooser_get_rgba' instead [-Wdeprecated-declarations]
/home/satya/Workspace/gtk-theme-config/gtk-theme-config.vala.c: In function ‘theme_pref_window_on_panelbg_color_set’:
/home/satya/Workspace/gtk-theme-config/gtk-theme-config.vala.c:1519:2: warning: ‘gtk_color_button_get_rgba’ is deprecated (declared at /usr/include/gtk-3.0/gtk/gtkcolorbutton.h:103): Use 'gtk_color_chooser_get_rgba' instead [-Wdeprecated-declarations]
/home/satya/Workspace/gtk-theme-config/gtk-theme-config.vala.c: In function ‘theme_pref_window_on_panelfg_color_set’:
/home/satya/Workspace/gtk-theme-config/gtk-theme-config.vala.c:1536:2: warning: ‘gtk_color_button_get_rgba’ is deprecated (declared at /usr/include/gtk-3.0/gtk/gtkcolorbutton.h:103): Use 'gtk_color_chooser_get_rgba' instead [-Wdeprecated-declarations]
/home/satya/Workspace/gtk-theme-config/gtk-theme-config.vala.c: In function ‘theme_pref_window_on_menubg_color_set’:
/home/satya/Workspace/gtk-theme-config/gtk-theme-config.vala.c:1553:2: warning: ‘gtk_color_button_get_rgba’ is deprecated (declared at /usr/include/gtk-3.0/gtk/gtkcolorbutton.h:103): Use 'gtk_color_chooser_get_rgba' instead [-Wdeprecated-declarations]
/home/satya/Workspace/gtk-theme-config/gtk-theme-config.vala.c: In function ‘theme_pref_window_on_menufg_color_set’:
/home/satya/Workspace/gtk-theme-config/gtk-theme-config.vala.c:1570:2: warning: ‘gtk_color_button_get_rgba’ is deprecated (declared at /usr/include/gtk-3.0/gtk/gtkcolorbutton.h:103): Use 'gtk_color_chooser_get_rgba' instead [-Wdeprecated-declarations] 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-12T07:58:32.163

将您的 Vala 升级到最新的 0.17.x 版本（或者暂时忽略警告——它们不会造成任何伤害）。

# java - 使用反射在构造函数中创建带参数的对象

> ID：12383433
> 
> 赞同：1
> 
> 时间：2012-09-12T07:47:07.250
> 
> 标签：java, reflection, constructor

我无法理解以下代码：

```
Constructor<T>[] constructors = (Constructor<T>[]) clazz.getConstructors();  
for(int i = 0; i < constructors.length; i++){  
  Constructor<T> constructor = constructors[i];    
  if (constructor.getParameterTypes().length>0){    
    T instanceObject = constructor.newInstance(new Object[constructor.getParameterTypes().length]);  
        break;  
  }  

} 
```

为清楚起见，省略`try/catch`了其他内容。
我不明白这是如何工作的：`T instanceObject = constructor.newInstance(new Object[constructor.getParameterTypes().length]);`
它调用一个有参数的构造函数，但作为参数传递`Object`？
这是如何运作的？传递`Object`独立于实际的形式参数？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-12T07:50:29.293

它试图传递所有的虚拟参数`null`。这可以给你一个对象，但这并不意味着它将是一个有用的对象。;)

我不确定为什么它会跳过零长度构造函数，因为这是你可能无法成功传递参数的一个构造函数。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-12T07:51:47.247

一个对象数组，其元素数量等于构造函数中的参数数量，因此：

```
new Object[constructor.getParameterTypes().length]) 
```

# ios - 如何激活 UINavigationController 并在它们之间切换

> ID：12383435
> 
> 赞同：1
> 
> 时间：2012-09-12T07:47:13.463
> 
> 标签：ios, uinavigationcontroller, tabbar

`TabBarController`我基于`UIViewController`and构建了自己的`UIButtons`。我用 UINavigationController(s) 准备了我的 viewControllers。

如何激活这些视图，如何在它们之间切换以及如何将 myTabBarController 保持在顶部？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-12T08:34:08.827

你的结构应该是这样的：

```
TabBarController
|
|
|____NavController1
|    |
|    |
|    |____RootVC1
|
|
|____NavController2
|    |
|    |
|    |____RootVC2
|
|
|____NavController3
|    |
|    |
|    |____RootVC3
| 
```

在您的应用委托中，您将根视图控制器设置为您的 tabBarController 控制器。

然后对于每个自定义选项卡切换按钮，您可以告诉 tabBarController 根据按下的按钮设置选定的索引：

```
-(void)button1Pressed
{
    myTabBarController.selectedIndex = 1;

    // you might want to set your button's enabled graphic and set other button to disable graphic
} 
```

# python - 使用点符号（如 DataFrame）访问 Pandas 系列项目

> ID：12383436
> 
> 赞同：4
> 
> 时间：2012-09-12T07:47:20.517
> 
> 标签：python, pandas

是否可以通过点符号而不是括号符号访问系列项目？

```
s = pandas.Series(dict(a=4, b=4))
print s['a']  # works
print s.a     # fails 
```

正如我们可以对 DataFrame 做的那样：

```
df = pandas.DataFrame([dict(a=4, b=4), dict(a=4, b=4)])
print df['a']  # works
print df.a     # works 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-12T08:55:04.140

I get the behaviour by overloading the Series.__get_attr__ method :

```
def my__getattr__(self, key):
    # If attribute is in the self Series instance ...
    if key in self:
        # ... return is as an attribute
        return self[key]
    else:
        # ... raise the usual exception
        raise AttributeError("'Series' object has no attribute '%s'" % key)

# Overwrite current Series attributes 'else' case
pandas.Series.__getattr__ = my__getattr__ 
```

Then I can access Seriee items with attributes :

```
xx = pandas.Series(dict(a=44, b=55))
xx.a 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-09-12T08:30:24.320

不可能。您可以将 Series 转换为单列 DataFrame。

# ruby-on-rails - Ruby on Rails 自定义路由

> ID：12383441
> 
> 赞同：0
> 
> 时间：2012-09-12T07:47:47.000
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, rest, routes

我对 REST 路由感到困惑：

我有一个用户注册表单，用户可以在其中注册。我使用**form_for**作为表单生成器 -

```
<%= form_for @user do |f| %> 
```

我想要实现的事情：路径之类的`users/signup`会导致用户控制器和注册（这很明显）动作，而不是`users/new`（GET）。而且我还希望能够发布到相同的方法（而不是“用户”（POST））=>所以，基本上，POST和GET的注册操作。

我也想知道，如果我需要使用`new_users_path`而不是“@user”（所以它看起来像这样：

```
<%= form_for new_users_path do |f| %> 
```

在 *form_for* - 因为，当我使用 时`new_users_path`，出于某种原因，我得到了字段名称：*name="/users/new[username]"*而不是*name="user[username]"*

有人可以帮我解决这个问题吗？

提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-12T08:20:08.933

通过使用：

```
 match 'users/signup', via: [:post, :get]
  resources :users, except: [:new, :create] 
```

该`rake routes`命令给出：

```
users_signup POST|GET /users/signup(.:format)   users#signup
       users GET      /users(.:format)          users#index
   edit_user GET      /users/:id/edit(.:format) users#edit
        user GET      /users/:id(.:format)      users#show
             PUT      /users/:id(.:format)      users#update
             DELETE   /users/:id(.:format)      users#destroy 
```

用法：

```
<%= form_for User.new, url: users_signup_path do |f| %> 
```

我希望这是你想要的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-12T08:01:43.717

你必须检查它的api：

```
form_for(record_or_name_or_array, *args, &proc) 
```

第一个参数应该是一个对象（例如“记录”），而不是“路线”。

如果你希望它接受一个 url，请检查`form_tag`

来下载一个[可搜索的API](http://railsapi.com/)。

# c - 在文件中搜索特定行 c 代码

> ID：12383443
> 
> 赞同：0
> 
> 时间：2012-09-12T07:47:53.157
> 
> 标签：c, file, file-io

我正在研究 C。我想问一下在文件中搜索特定行（或多行）的最佳方法是什么？有人可以给我一个例子。我有 2 个文件，我想看看这两个文件是否 80% 相同。我考虑在其中一个文件中搜索另一个文件中的一些特定行。谢谢

我需要一些 C 代码中的示例。这是一个小例子

```
int compareFile(FILE* file_compared, FILE* file_checked)
{
    bool diff = 0;
    int N = 65536;
    char* b1 = (char*) calloc (1, N+1);
    char* b2 = (char*) calloc (1, N+1);
    size_t s1, s2;

    do {
        s1 = fread(b1, 1, N, file_compared);
        s2 = fread(b2, 1, N, file_checked);

        if (s1 != s2 || memcmp(b1, b2, s1)) {
            diff = 1;
            break;
        }
      } while (!feof(file_compared) || !feof(file_checked));

    free(b1);
    free(b2);

    if (diff) return 0;
    else return 1;
} 
```

如何返回相同行的百分比？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-12T07:49:52.283

你试过[http://www.text-compare.com/](http://www.text-compare.com/)了吗？这是比较两个文件并找出差异的简单方法。

如果你真的需要在 C 中实现，为什么不使用两个文件处理程序，每个换行符读取字符串，比较两个字符串，如果匹配则保留它们，如果不匹配，则遍历字符以查找差异。

或者您可以加载主文件，然后将比较文件与主文件中的每一行进行比较，看看是否有任何行给出匹配 > 75% 并显示更改。

你能展示你到目前为止所做的事情吗？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-12T08:55:06.870

[差异算法](http://c2.com/cgi/wiki?DiffAlgorithm)的真正问题是您不能简单地逐行比较。假设这些文件实际上是相同的，但是一个文件*在文件的开头多了*一行。一个天真的（逐行`memcmp`）实现将导致 100% 的差异......

你可能有很多阅读要做。上面的链接可能会为您提供一个起点。

再说一次，如果你不是在看家庭作业/重新发明轮子风格的作业，你可能想在现有工作的基础上再接再厉。比如，通过`diff -y --suppress-common-lines | wc -l`和 plain运行这两个文件`wc -l`，收集这两个调用的输出，并计算百分比。是的，这看起来很粗糙，但它比编写自己的差异算法更容易和更快*。*您还将受益于该`diff`工具的未来改进，其维护者将*所有*时间都花在这些东西上。

再说一次，我会在 bash 中执行此操作，而不是在 C 中。;)

# xcode - 将旧的“English.lproj”约定更新为现代的“en.lproj”？

> ID：12383448
> 
> 赞同：0
> 
> 时间：2012-09-12T07:48:14.010
> 
> 标签：xcode, localization, internationalization, country-codes

我正在开发一个具有旧依赖项的新项目。依赖项具有本地化，在具有较长格式名称（English.lproj、German.lproj 等）的目录中排序，但新项目使用较新的国家代码（en.lproj、de.lproj）。

有没有一种无忧的方法来处理这个问题？旧的依赖项也用于其他一些项目，所以如果可能的话，我想避免把它撕得太多。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-12T14:51:07.770

我希望有比这更好的方法（也许您可以尝试 XCode 项目验证功能，例如[此处显示的](http://mobiledevelopertips.com/xcode/xcode-4-project-modernization.html)，您永远不知道），但此处记录了手动编辑：[http ://eschatologist.net/blog/?p =224](http://eschatologist.net/blog/?p=224)

这是一份三年前的文件，所以它可能已经过时了。

# open-source - 浏览器中可用的开源音频/视频流媒体工具有哪些？

> ID：12383454
> 
> 赞同：1
> 
> 时间：2012-09-12T07:48:28.597
> 
> 标签：open-source, web, streaming, html5-video

我正在构建一个可扩展的基于网络的会议产品，它允许用户使用网络浏览器相互交互。我需要支持聊天和视频通话。实现这一点的最佳选择是什么？

这个问题有几个要素——

如果我们需要使用扩展下载也没关系。外部应用程序是否可以免费使用 Google talk 语音视频插件？

是否可以纯粹使用 HTML5 功能构建这样的应用程序？

Flash 和 HTML 之间哪个更好（从性能角度来看）

请分享您可能有的任何其他想法。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-02T09:25:06.453

你可以试试[http://incubator.apache.org/openmeetings/](http://incubator.apache.org/openmeetings/)。它涵盖了许多基本功能，并且是开源的。

HTML5 (webRTC) 并未在所有浏览器中实现，规范也不是最终版本。所以你不会找到任何生产解决方案，只是一些原型。

# c - 从文件读取时我的 C 程序中的分段错误

> ID：12383459
> 
> 赞同：-2
> 
> 时间：2012-09-12T07:48:56.867
> 
> 标签：c, segmentation-fault

我正在尝试从文件中获取每一行并进行一些字符串操作。但是我的一段代码抛出了段错误。我将同一行作为不同的程序测试了相同的东西，它工作正常。但是当我从文件中读取并执行字符串操作时，它会引发分段错误。

变量声明：

```
char *pch3,str1[100],str2[100]

 pch3 = strtok(line3,",");
                        while(pch3!=NULL)
                        {
                                if(strcmp(pch3,"?") == 0)
                                {
                                       strcat(str1,"0");
                                       strcat(str1,",");
                                }
                                else
                                {
                                       strcat(str1,pch3);
                                       strcat(str1,",");
                                }
                                pch3 = strtok(NULL,",");
                        }
                        strlen1=strlen(str1);
                        memcpy(str2,str1,strlen1-1);
                        fp2=fopen("breast-cancer-wisconsin-miscellaneous-cleansed.data","a");
                        fprintf(fp2,"%s\n",str2);
                        fclose(fp2); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-12T07:55:29.127

您不初始化`str1`and `str2`，这意味着当您使用`strcat`它时，它会尝试查找前一个字符串的结尾，但这可以在 中的任何位置`str1`，即使在`str1`不`str1`包含零的情况下也是如此。

将声明更改为此，它应该会更好地工作：

```
char *pch3, str1[100] = "", str2[100] = ""; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-12T08:36:40.220

要考虑的一个特殊细节： strtok() 修改您作为第一个参数传入的字符串。以下代码有效：

```
#include <stdio.h>
#include <string.h>

void processLine (const char *line3) {
  char *pch3 = NULL, str1[100] = "", str2[100] = "";
  int strlen1 = 0;
  FILE* fp2 = NULL;

  pch3 = strtok (line3, ",");
  while (pch3 != NULL) {
      if (strcmp (pch3, "?") == 0) {
          strcat (str1, "0");
          strcat (str1, ",");
      } else {
          strcat (str1, pch3);
          strcat (str1, ",");
      }
      pch3 = strtok (NULL, ",");
    }

  strlen1 = strlen (str1);
  memcpy (str2, str1, strlen1 - 1);
  fp2 = fopen ("breast-cancer-wisconsin-miscellaneous-cleansed.data", "a");
  fprintf (fp2, "%s\n", str2);
  fclose (fp2);
}

main () {
  char input[100] = "first,?,second,third,fourth,?";
  processLine (input);
} 
```

同样，请考虑使用更多的缓冲区溢出安全函数，例如 strncat() 而不是 strcat()，并添加保护或至少检查缓冲区长度以避免缓冲区溢出的断言。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-12T07:55:12.273

虽然这不能解决您当前的问题，但请考虑使用 stat(3) 和 mmap(3)。然后您可以处理内存区域。或者，您可以使用 fgets(3)/feof(3)/ferror(3) 进行循环并处理每一行输入。

请通过 memset 将所有缓冲区初始化为零。

你也可以做

```
char str1[100] = { 0 }; 
```

strcat(3) 也是邪恶的，你可以尝试使用 snprintf(3) 代替，或者 strncat(3) 如果你知道你在做什么。阅读相关手册页以获取更多信息。

# c# - dataSet.RejectChanges() 抛出异常

> ID：12383467
> 
> 赞同：2
> 
> 时间：2012-09-12T07:49:18.877
> 
> 标签：c#, asp.net

我有一个**缓存数据管理器**，它从数据库中获取数据并将其返回到网格。每次数据管理器必须获取一些数据时，都有一种清除数据集的方法，该方法由一些其他方法组成，但也使用`_dataset.rejectChanges()`方法。

**问题：** _dataSet.rejectChanges() 方法抛出“ **RowNotInTableException：**该行已从表中删除并且没有任何数据。BeginEdit() 将允许在该行中创建新数据。” 而且这个异常不是每次都抛出，而是**随机**的。（我怀疑其他用户与我的缓存数据管理器进行交互，这会导致一些奇怪的问题）
其他用户是否有可能导致这个问题（如何？）。有什么修复吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-12T07:57:58.700

A`cached data manager`是 ASP.NET 应用程序中的危险信号。

`DataSet`实例方法不是线程安全的，因此如果多个线程正在更新缓存的 DataSet，那么所有的赌注都会被取消，并且您可以期待随机的“heisenbugs”。

使用锁定，甚至更好地重新考虑缓存可更新数据集的设计。

# android - NoSuchMethodError Notification.Builder.build()

> ID：12383468
> 
> 赞同：3
> 
> 时间：2012-09-12T07:49:20.873
> 
> 标签：android

```
 Notification noti = new Notification.Builder(context)
            .setContentTitle("TITLE").setContentInfo("INFO")
            .build();
notificationManager.notify(ID,noti); 
```

我对来自谷歌页面的样本有疑问。而且我有异常 NoSuchMethodError 我不知道发生了什么所以我使用旧的不推荐使用的方法和通知 noti.setLatestEventInfo 但我确信还有另一种解决方案。有任何想法吗？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-03-22T13:54:08.480

[Notification.Builder.build()](http://developer.android.com/reference/android/app/Notification.Builder.html#build%28%29)是 API 级别 16。

在 4.0.4 中，您应该使用[getNotification()](http://developer.android.com/reference/android/app/Notification.Builder.html#getNotification())。

或者你最好使用[NotificationCompat](http://developer.android.com/reference/android/support/v4/app/NotificationCompat.html)。

# events - 骨干重复事件

> ID：12383469
> 
> 赞同：1
> 
> 时间：2012-09-12T07:49:24.563
> 
> 标签：events, backbone.js, views, duplicates

我刚刚开始学习 Backbone 并且刚刚注意到我的代码中有一个错误，但我不确定如何解决它。

每次在 ControlView 中单击按钮时，它都会加载与该按钮单击关联的视图。伟大的！但是，如果您单击一个按钮 (#button-1)，单击相邻的按钮 (#button-2)，然后再次单击第一个按钮 (#button-1) - 我们现在将拥有该视图的两个实例，当然导致重复事件。这意味着每次我在该视图中提交表单时，都会收到 n + 2 个 HTTP 请求。

我已经调整了我的代码以在第一次初始化时创建视图，然后在每次需要时呈现这些视图。这是最好的方法吗？

非常感谢！

```
 var ControlView = Backbone.View.extend({

    el: $(".btn-group"),

    active: 'btn-primary',

    initialize: function()
    {
        _.bindAll(this, 'account', 'password');
        this.account();
    },

    events: {
        "click button.account"  : "account",
        "click button.password" : "password"
    },

    account: function()
    {
        this.reset();
        this.state("button.account");

        profile.fetch({
            success: function()
            {
                AccountView.render();
            }
        });
    },

    password: function()
    {
        this.reset();
        this.state("button.password");

        PasswordView.render();
    },

    state: function(element)
    {
        $(element).addClass(this.active);
    },

    reset: function()
    {
        $(this.el).find("button").removeClass(this.active);
    },

});

AccountView = new AccountView({model:profile});
PasswordView = new PasswordView({model:user});

ControlView = new ControlView; 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-12T10:14:26.007

Backbone 使用**el**元素委托将事件附加到子元素。它不会将事件直接绑定到选择器。问题是，您正在重用相同的元素。

```
el: $(".btn-group") 
```

每次您的视图呈现一组新事件时，都会附加到**el**。但是因为**el**永远不会从 dom 中删除，所以事件会不断增加。触发时，所有委托事件都将触发。

主干事件假定，**el**元素每次都会由视图本身呈现。这样，在重新渲染视图时，所有先前委托的事件都会被销毁。

# c++ - try 块中的禁止地址访问

> ID：12383470
> 
> 赞同：0
> 
> 时间：2012-09-12T07:49:27.380
> 
> 标签：c++, linux, crash, try-catch

我有一个用户空间代码如下，

```
try
{
some code
...
code that tries accessing forbidden address
...
some code
}
catch (all exceptions)
{
some logs
} 
```

内核是否会向`SIGSEGV`用户进程发送此无效访问的信号以及行为将是什么`default`（没有安装任何信号处理程序）。请问系统`crash`。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-12T08:58:16.173

An exception is not generated in this case. You need to set the signal handler. Take a look into [man signal](http://unixhelp.ed.ac.uk/CGI/man-cgi?signal%207) how to do it.

For [example](http://www.linuxprogrammingblog.com/code-examples/sigaction) :

```
#include <stdio.h>
#include <unistd.h>
#include <signal.h>
#include <string.h>

static void hdl (int sig, siginfo_t *siginfo, void *context)
{
    printf ("Sending PID: %ld, UID: %ld\n",
            (long)siginfo->si_pid, (long)siginfo->si_uid);
}

int main (int argc, char *argv[])
{
    struct sigaction act;

    memset (&act, '\0', sizeof(act));

    /* Use the sa_sigaction field because the handles has two additional parameters */
    act.sa_sigaction = &hdl;

    /* The SA_SIGINFO flag tells sigaction() to use the sa_sigaction field, not sa_handler. */
    act.sa_flags = SA_SIGINFO;

    if (sigaction(SIGTERM, &act, NULL) < 0) {
        perror ("sigaction");
        return 1;
    }

    while (1)
        sleep (10);

    return 0;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-12T07:55:13.813

> 尝试访问禁止地址的代码

你不能用`C++ exceptions`. 只有`platform-dependent`解决方案。

# c# - 无法读取 XML 数据

> ID：12383473
> 
> 赞同：0
> 
> 时间：2012-09-12T07:49:33.743
> 
> 标签：c#, xml-parsing, gzip, webclient, httprequest

我想从远程服务器读取 xml 文件，但不知何故服务器没有响应我的请求。因此，Gzip 会抛出“GZip 标头中的幻数不正确”异常。任何想法？

```
 private static string GetFile()
    {
        Uri uri = new Uri(@"http://www.iddaa.com.tr/XML/IDDAAMACPROGRAMI/index.htm?iddaadrawid=12.09.2012&iddaadrawide=13.09.2012&foraccess=KSsec654");

        string xmlFile;

        HttpWebRequest req = (HttpWebRequest) HttpWebRequest.Create(uri);
        req.UserAgent =
            "MOZILLA/5.0 (WINDOWS NT 6.1; WOW64) APPLEWEBKIT/537.1 (KHTML, LIKE GECKO) CHROME/21.0.1180.75 SAFARI/537.1";
        req.Accept = "text/html,application/xhtml+xml,application/xml;q=0.9,*/*;q=0.8";
        req.Headers.Add("Accept-Encoding", "gzip,deflate");

        using (GZipStream zip = new GZipStream(req.GetResponse().GetResponseStream(),
                                               CompressionMode.Decompress))
        {
            var reader = new StreamReader(zip);
            xmlFile = reader.ReadToEnd();
        }

        return xmlFile;
    } 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-12T07:51:58.417

您不需要使用 gzip。`HttpWebRequest`如果服务器将 gzip 标头发送到响应，它将自动为您执行此操作。

但是您甚至可以使用[WebClient](http://msdn.microsoft.com/en-us/library/system.net.webclient.aspx)进一步简化您的代码：

```
private static string GetFile()
{
    using (var client = new WebClient())
    {
        client.Headers[HttpRequestHeader.UserAgent] = "MOZILLA/5.0 (WINDOWS NT 6.1; WOW64) APPLEWEBKIT/537.1 (KHTML, LIKE GECKO) CHROME/21.0.1180.75 SAFARI/537.1";
        client.Headers[HttpRequestHeader.Accept] = "text/html,application/xhtml+xml,application/xml;q=0.9,*/*;q=0.8";
        client.Headers[HttpRequestHeader.AcceptEncoding] = "gzip,deflate";
        var xmlFile = client.DownloadString("http://www.iddaa.com.tr/XML/IDDAAMACPROGRAMI/index.htm?iddaadrawid=12.09.2012&iddaadrawide=13.09.2012&foraccess=KSsec654");
        return xmlFile;
    }
} 
```

或 .NET 4.5 中引入的新[HttpClient](http://msdn.microsoft.com/en-us/library/system.net.http.httpclient.aspx)类：

```
private async Task<string> GetFile()
{
    using (var client = new HttpClient() { BaseAddress = new Uri("http://www.iddaa.com.tr") })
    {
        client.DefaultRequestHeaders.UserAgent.Add(new ProductInfoHeaderValue("MOZILLA", "5.0"));
        client.DefaultRequestHeaders.UserAgent.Add(new ProductInfoHeaderValue("(WINDOWS NT 6.1; WOW64)"));
        client.DefaultRequestHeaders.UserAgent.Add(new ProductInfoHeaderValue("APPLEWEBKIT", "537.1"));
        client.DefaultRequestHeaders.UserAgent.Add(new ProductInfoHeaderValue("(KHTML, LIKE GECKO)"));
        client.DefaultRequestHeaders.UserAgent.Add(new ProductInfoHeaderValue("CHROME", "21.0.1180.75"));
        client.DefaultRequestHeaders.UserAgent.Add(new ProductInfoHeaderValue("SAFARI", "537.1"));

        client.DefaultRequestHeaders.Accept.Add(new MediaTypeWithQualityHeaderValue("text/html"));
        client.DefaultRequestHeaders.Accept.Add(new MediaTypeWithQualityHeaderValue("application/xhtml+xml"));
        client.DefaultRequestHeaders.Accept.Add(new MediaTypeWithQualityHeaderValue("application/xml", 0.9));
        client.DefaultRequestHeaders.Accept.Add(new MediaTypeWithQualityHeaderValue("*/*", 0.8));

        client.DefaultRequestHeaders.AcceptEncoding.Add(new StringWithQualityHeaderValue("gzip"));
        client.DefaultRequestHeaders.AcceptEncoding.Add(new StringWithQualityHeaderValue("deflate"));
        var result = await client.GetAsync("/XML/IDDAAMACPROGRAMI/index.htm?iddaadrawid=12.09.2012&iddaadrawide=13.09.2012&foraccess=KSsec654");
        result.EnsureSuccessStatusCode();
        return await result.Content.ReadAsStringAsync();
    }
} 
```

# python - 计算列表中值的数量

> ID：12383481
> 
> 赞同：-4
> 
> 时间：2012-09-12T07:50:00.897
> 
> 标签：python, list, count

> **可能重复：**
> [在python中获取列表的大小？](https://stackoverflow.com/questions/1712227/get-the-size-of-a-list-in-python)

我需要能够计算列表中总共有多少个值。例如。[1,5,9,4,6]，有 5 个值。我试过使用

list.count() 函数，但它返回一个值的多少。

有什么方法可以计算列表中有多少个值？

谢谢

（结果/金额也需要存储在变量中。）

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-12T07:50:48.713

```
len(your_list) 
```

请阅读您最喜欢的 Python 教程。

# web-services - 如何编写用于访问 Web 服务的 RestTemplate (GET , POST)

> ID：12383482
> 
> 赞同：0
> 
> 时间：2012-09-12T07:50:09.470
> 
> 标签：web-services, spring, webservice-client, resttemplate, webservicetemplate

**我无法形成使用 REST Web 服务 GET 和 POST 的请求参数，请任何人根据以下情况进行指导。**

如果我有如下的 REST Web 服务，它需要两个字符串参数

***使用 webservice 的通用 Web URL：***

/myWs/sayHello?name=Peter&msg=Hai

//如何传递参数以获取 GET 和 POST 结果。

```
 org.springframework.web.client.RestTemplate restTemplate = new RestTemplate();
 String url = "http://localhost:8080/myWs/sayHello";
 Map<String, String> vars = new HashMap<String, String>();
 vars.put("name", "peter");
 vars.put("msg", "Hai");
 String result = restTemplate.getForObject(url+"/{name}/{msg}", String.class, vars);
 String result1 = restTemplate.postForObject(url,  vars,String.class);

 System.out.println("GET result : "+result + "\nPOST result1"+result1); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-05T00:48:56.877

这就是我通常执行获取的方式：

一种。休息模板请求

```
// Create a new RestTemplate instance
RestTemplate restTemplate = new RestTemplate();

// Add the Jackson message converter
restTemplate.getMessageConverters().add(new MappingJackson2HttpMessageConverter());

// Parameters
StringBuilder params = new StringBuilder();
params.append("?lat=");
params.append(lat);
params.append("&lng=");
params.append(lng);

// Make the HTTP GET request, marshaling the response from JSON to an array of Stations
Object results = restTemplate.getForObject(URL + params.toString(), ServiceStationJsonModel.class); 

// Do Something with the result 
```

湾。网络服务

```
@RequestMapping(value=URL, method = RequestMethod.GET, produces = "application/json")
public @ResponseBody Object nearmeServiceStationRequest(HttpServletRequest request) {

    String lat = request.getParameter("lat");
    String lng = request.getParameter("lng");
    // Do something with params
    ...
    return obj;
} 
```

您还可以使用**@PathVariable**注释来获取参数。[可以在此处](http://johnathanmarksmith.com/spring/java/javaconfig/programming/spring%20java%20configuration/spring%20mvc/web/rest/spring%20test%20framework/2013/06/12/how-to-make-a-web-service-with-spring-mvc-and-test-with-spring-test-framework/)找到有关如何执行帖子的示例以及示例

希望这可以帮助。

# r - geom_bar 的颜色

> ID：12383489
> 
> 赞同：1
> 
> 时间：2012-09-12T07:50:37.473
> 
> 标签：r, ggplot2

我无法控制 ggplot 中条形图的颜色

```
require(mice)
require(ggplot2)
impute <- mice(nhanes, seed = 101)
ldt <-complete(impute,"long", include=TRUE)
ldt$Imputed<-ifelse(ldt$".imp"==0,"Observed","Imputed")

ggplot(ldt[!is.na(ldt$hyp),], aes(x= factor(hyp), colour=Imputed)) + 
  geom_bar() + 
  facet_wrap(~.imp, nrow = 1) +
  scale_y_continuous(expand = c(0,0)) 
```

这使： ![在此处输入图像描述](../Images/34e2e65291e48815858a6a620a3af388.png)

但是我希望条形图充满颜色，所以我尝试了：

```
ggplot(ldt[!is.na(ldt$hyp),], aes(x= factor(hyp))) + 
  geom_bar(colour = Imputed) + 
  facet_wrap(~.imp, nrow = 1) +
  scale_y_continuous(expand = c(0,0)) 
```

但这给出了错误：

```
Error in do.call("layer", list(mapping = mapping, data = data, stat = stat,  : 
  object 'Imputed' not found 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-12T08:00:40.510

在您的第一次尝试中使用`fill=Imputed`而不是。`colour=Imputed`

```
ggplot(ldt[!is.na(ldt$hyp),], aes(x= factor(hyp), fill=Imputed)) + 
  geom_bar() + 
  facet_wrap(~.imp, nrow = 1) +
  scale_y_continuous(expand = c(0,0)) 
```

您可以改为设置`fill=Imputed`，`geom_bar`但您必须将其包装在对 的调用中`aes`，就像在对 的调用中一样`ggplot`。

![在此处输入图像描述](../Images/acfa682c62f49765c2fdfbd82d735a59.png)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-12T08:00:43.787

而不是`colour = Imputed`在原始美学映射中使用，使用`fill = Imputed`

```
ggplot(ldt[!is.na(ldt$hyp),], aes(x= factor(hyp), fill=Imputed)) + 
  geom_bar() + 
  facet_wrap(~.imp, nrow = 1) +
  scale_y_continuous(expand = c(0,0)) 
```

# xml - Jmeter-如何从 HTTP 采样器的响应中读取 xml 属性值

> ID：12383491
> 
> 赞同：3
> 
> 时间：2012-09-12T07:50:46.840
> 
> 标签：xml, testing, xpath, jmeter, httpresponse

如何从 HTTP 采样器的响应中获取属性值并在其他采样器中使用该变量？

另一个问题是我想从中获取属性值的 HTTP 采样器有多个同名元素，所以我必须遍历整个节点并获取属性的值，我该如何实现呢？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-14T20:03:10.900

假设你有：

```
<toto>
    <titi name="123" />
    <titi name="321" /> 
</toto> 
```

如果我了解您想要检索 2 个值**123**和**321**

请执行下列操作：

*   添加一个[XPath_Extractor](http://jmeter.apache.org/usermanual/component_reference.html#http://jmeter.apache.org/usermanual/component_reference.html#XPath_Extractor)作为 HTTP Sampler 的子项：

    ```
    XPath Query : /toto/titi/@name
    Reference Name : fullAnswer 
    ```

*   添加一个[BeanShell 采样器](http://jmeter.apache.org/usermanual/component_reference.html#BeanShell_Sampler)：

    ```
    int number = Integer.parseInt(vars.get("fullAnswer_matchNr"));
    StringBuilder builder = new StringBuilder();
    for(int i=0;i<number;i++) {
        builder.append(vars.get("fullAnswer_"+(i+1)));
    }
    vars.put("body", builder.toString()); 
    ```

*   您将获得 JMeter 变量：

    ```
    body=123321
    fullAnswer=123
    fullAnswer_1=123
    fullAnswer_2=321
    fullAnswer_matchNr=2 
    ```

# java - 动态设置 jTextField 值

> ID：12383493
> 
> 赞同：2
> 
> 时间：2012-09-12T07:50:49.930
> 
> 标签：java, swing, for-loop, jtextfield, settext

首先，我是java新手。最近遇到这样的问题。

我有一个整数数组，例如，

```
 int[] data={32,12,31,89,90}; 
```

然后，我有 5 个 jTextFields。

我将它们命名为 jNum0、jNum1、...、jNum4。问题是根据我正在处理的程序

我需要**使用循环**在相应的文本框中打印数组中的每个值。

喜欢：

```
for(int i=0;i<=4;i++){ 
//<jNum+i>.setText(data[i]);
// This actually doesn't work
} 
```

有没有办法做到这一点？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-12T07:55:43.563

更好地创建一个“文本字段数组”

```
TextField tf[] = new TextField[5]; 
```

在此之后，调用`for loop`为

```
for(int i=0;i<=4;i++)
{
     tf[i].setText(data[i]);
} 
```

它会起作用的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-12T07:54:30.460

尝试通过创建 JTextField 数组并通过索引引用每个 JTextField 来解决。您将能够通过索引访问每个 JTextField，您的问题将得到解决。

jText 只是类，与 Java 中的任何其他类一样，您可以轻松创建 jText 类型的对象数组。

如需更多帮助，请使用此链接：

[创建 JTextField 数组](http://www.coderanch.com/t/367570/java/java/create-Array-JTextField)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-12T07:56:40.037

你有 hata 在数组中。将 jTextFields 也放入数组中。

```
JTextField[] fields = new JTextField[5];
for(int i = 0; i < fields.length; i++) {
    fields[i] = new JTextField();
}

for(int i = 0; i < fields.length; i++) {
    fields[i].setText(data[i]);
} 
```

# cmd - 从 sox 获取 .wav 的平均振幅（仅）

> ID：12383496
> 
> 赞同：2
> 
> 时间：2012-09-12T07:51:05.933
> 
> 标签：cmd, wav, sox

```
C:\Program Files\sox-14-4-0>sox Sample.wav -n stat 
```

上面的代码给出了以下结果

```
Samples read:             26640
Length (seconds):      3.330000
Scaled by:         2147483647.0
Maximum amplitude:     0.515625
Minimum amplitude:    -0.734375
Midline amplitude:    -0.109375
Mean    norm:          0.058691
Mean    amplitude:     0.000122
RMS     amplitude:     0.101146
Maximum delta:         0.550781
Minimum delta:         0.000000
Mean    delta:         0.021387
RMS     delta:         0.041831
Rough   frequency:          526
Volume adjustment:        1.362 
```

现在我只需要平均幅度。怎么做？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-15T02:43:14.977

有几种方法。

方法一：

```
"C:\Program Files\sox-14-4-0\sox" Sample.wav -n stat | find "Mean    amplitude: " > %TMP%\amp.tmp
set /p meanAMP=<%TMP%\amp.tmp
set meanAMP=%meanAMP:*:     =%
del %TMP%\amp.tmp
echo %meanAMP% 
```

* * *

方法二：

```
for /f "tokens=1-3" %%x in ('"%ProgramFiles%\sox-14-4-0\sox" Sample.wav -n stat') do (
  if "%%x %%y"=="Mean amplitude:" set meanAMP=%%z
)
echo %meanAMP% 
```

* * *

## 最快的：

方法三：

```
for /f "skip=7 tokens=1-3" %%x in ('"%ProgramFiles%\sox-14-4-0\sox" Sample.wav -n stat') do (
  if "%%x %%y"=="Mean amplitude:" set meanAMP=%%z
)
echo %meanAMP% 
```

* * *

方法四：

```
for /f "tokens=1-3" %%x in ('"%ProgramFiles%\sox-14-4-0\sox" Sample.wav -n stat ^| find "Mean    amplitude:"') do (
  set meanAMP=%%z
)
echo %meanAMP% 
```

我怀疑方法 3 将是最快的，因为：

方法一使用了很多步骤，包括外部程序`find`、临时文件的创建、访问和删除，以及变量的重新定义。

方法 2 检查 的所有输出`SOX`。

`find`方法 4 使用减慢执行速度的外部程序。

方法 3 实际上跳过了输出的前 7 行，`SOX`然后开始评估输出。

**注意：**方法 2-4 都可以在一行上完成，只需删除`(`and `)`。

**编辑：**修复了代码中的一些错误。

**注意：**要从命令提示符使用方法 1 应该按原样工作。方法 2-4 需要将所有`%%`的 ' 更改为`%`'。

例如，您可以将其直接粘贴到`cmd`：

```
for /f "skip=7 tokens=1-3" %%x in ('"%ProgramFiles%\sox-14-4-0\sox" Sample.wav -n stat') do (
  if "%x %y"=="Mean amplitude:" set meanAMP=%z
)
echo %meanAMP% 
```

请注意，这几乎是方法 3 的精确副本，除了我分别将`%%x`、`%%y`和更改`%%z`为`%x`、`%y`和`%z`。

# iphone - 从选择器 iphone 中选择值后，故事板中不显示任何内容

> ID：12383505
> 
> 赞同：1
> 
> 时间：2012-09-12T07:51:43.243
> 
> 标签：iphone, xcode, ios5, storyboard, uipickerview

我在程序中包含了一个 UIPicker。它包含 2 个内容，例如 A 和 B。我需要假设如果用户从选择器中选择了 A，它应该移动另一个故事板。我可以移动到另一个视图，但它什么也没显示。我将粘贴下面的代码：-

```
- (void)pickerView:(UIPickerView *)thePickerView didSelectRow:(NSInteger)row inComponent:(NSInteger)component 

 {

     DemoViewController *demo =[[DemoViewController alloc] init];

     AnotherViewController *another =[[AnotherViewController alloc] init];

     NSString *content=[aray objectAtIndex:row];

      if ([content isEqualToString:@"A"]) 
      {

            [self presentModalViewController:demo animated:YES]; 

      } 
      else {

            [self presentModalViewController:another animated:YES]; 

           } 
```

}

谁能告诉我为什么我得到一个空白的故事板？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-12T08:30:32.027

在情节提要中显示另一个场景，您使用执行“segue”，例如

> [self performSegueWithIdentifier:@"demo" sender:self];

确保保留所选值的实例变量，然后在“准备转场”中将此值传递给目标视图控制器，例如

> [segue.destinationViewController setChosenValue:self.pickedValue];

# iphone - Cocos2d：如何在不使用 Box2d 的情况下找到精灵的半径？

> ID：12383509
> 
> 赞同：0
> 
> 时间：2012-09-12T07:51:50.040
> 
> 标签：iphone, ios, cocos2d-iphone, game-engine

我有一个圆形的精灵。而且我不想使用 Box2d 物理机制，即创建身体并获取半径。

cocos2d 中是否有任何机制来检测精灵的形状是圆形的，并且我们可以通过编程获得精灵的半径？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-12T08:27:33.553

如果你只是简单地创建你的 CCSprite 而不设置框架宽度和大小，而是只使用图像文件的名称，你不能简单地获取 CCSprite 的 frame.bound 吗？

假设你的精灵是圆形的（我假设是完美的圆形），那么你的圆的半径本质上就是你的盒子的宽度或高度（同样，我假设是一个完美的圆形）。

# internet-explorer-10 - IE10 - 设置特定的浏览器和文档模式

> ID：12383511
> 
> 赞同：7
> 
> 时间：2012-09-12T07:52:00.203
> 
> 标签：internet-explorer-10

我需要一个旧的 Web 应用程序才能在 IE10 中正确显示。使用IE的开发者工具，配置IE10兼容浏览器模式和IE5 Quirks文档模式，证明是最佳配置。

当浏览器为 IE10 时，使用页面代码隐藏调整响应标头以包含“X-UA-Compatible”HTTP 标头，文档模式正确设置为 IE5 Quirks 模式，但浏览器模式仍卡在 IE10 上。

虽然 Web 应用程序被重构为跨浏览器兼容，但如何在不要求用户设置任何配置（兼容性视图设置）或使用开发人员工具栏的情况下调整模式。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-30T15:49:05.123

尝试将文档类型设置为： `<meta http-equiv="X-UA-Compatible" content="IE=5quirks"/>` 这将呈现与旧版本 IE 中的 quirks 模式相同的方式。

# html - 内容不会与向左浮动的 div 的标题标签左对齐

> ID：12383512
> 
> 赞同：1
> 
> 时间：2012-09-12T07:52:04.070
> 
> 标签：html, css, styles, css-float, text-align

我正在尝试将内容添加到无序列表的右侧，但希望它与列表左对齐（即向左浮动）。当我只添加段落和图像时，它可以正常工作，但如果我使用标题标签，它会将所有内容推到列表的底部。

见： http: [//www.advantly.com/guides/features/](http://www.advantly.com/guides/features/)

左边的无序列表向左浮动

```
<div id="vertmenu" style="float: left;"> 
```

style.css 中标题标签的样式如下：

```
h1,h2,h3,h4,h5,h6 { clear: both }
.clear { clear: both }
.clearfix:after {
  display: block;
  visibility: hidden;
  content: ".";
  clear: both;
  text-indent: -9999px;
  height: 0;
} 
```

感谢任何可以提供帮助的人！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-12T09:00:47.403

试试这个：

```
#vertmenu {
    float:left;
    width:200px;
}

#benefits-content {
    margin-right:210px;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-12T07:55:53.537

您可以将其添加到您的标题 css 中：

```
display: inline-block; 
```

这是你的#commentsbox。

```
clear: both; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-12T08:00:01.090

你为什么不把内容也浮起来呢？尝试将其添加到您想要右侧的内容的容器中：

```
float: left;
width: 600px; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-12T08:54:15.500

这是一个非常基本的示例，说明如何浮动位于容器元素中的几个元素。以此为指导，您应该不会错太多。

[http://jsfiddle.net/N3FPJ/](http://jsfiddle.net/N3FPJ/)

# java - 使用调用方法的线程对象引用

> ID：12383513
> 
> 赞同：0
> 
> 时间：2012-09-12T07:52:16.997
> 
> 标签：java, multithreading

我可以在线程对象上调用方法吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-12T07:55:51.053

看来你已经改变了问题。

> 我可以在线程对象上调用方法吗？

最简单的方法是使用 ExecutorService 并提交 ia 任务以调用特定方法。

* * *

对于你原来的问题。

> 我可以重新连接吗？？

我不知道有什么理由你不能。

> 请让我知道这种方法的影响是什么？

您可能需要等待一小段时间，因为它可能会反复失败，并且您不想向服务器发送垃圾邮件或使您的机器过载。我会添加一个

```
Thread.sleep(periodBetweenReconnectesInMillisSeconds); // or something sorter 
```

几秒的重试周期（例如 2000 秒）可能没问题。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-12T08:16:02.850

是的，您可以在线程对象上调用方法...

但请解释一下您想以哪种方式使用它？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-12T08:21:47.930

当然可以，因为 Thread 对象是一个普通对象。唯一的区别是，在你调用之后`Thread.start()`，它的`run()`方法将在不同的堆栈上执行。此堆栈也称为线程，这可能会导致误解。您必须区分 stack 和`java.lang.Thread`，后者是堆栈的接口。当你调用任何方法时，它都会在当前堆栈上执行，即在调用者方法运行的堆栈上。这样你甚至可以调用`Thread.run()`- 但同样，它会同步执行，而不是并行执行。

# c# - http响应中丢失的Unicode字符

> ID：12383517
> 
> 赞同：1
> 
> 时间：2012-09-12T07:52:30.030
> 
> 标签：c#, asp.net, unicode, httpresponse

> **可能重复：**
> [Content-Disposition 标头中的非 Unicode](https://stackoverflow.com/questions/2543584/non-unicode-in-content-disposition-header)

我的网络应用程序允许用户下载文件，使用下面的代码。某些文件名具有 Unicode 字符，这些字符在文件下载过程中丢失。例如，如果 Web 应用程序发送文件名`наталья.docx`，则 Web 浏览器下载对话框显示文件名，如`Ð½Ð°ÑÐ°Ð»ÑÑ.docx`. 如何解决这个问题呢？

```
var outputFileName = path+ "наталья.docx";
context.Response.ContentType = WebHelper.GetMimeType(outputFileName);
context.Response.AddHeader("Content-Disposition", string.Format("{0}; filename={1}", "attachment", outputFileName));
context.Response.BinaryWrite(binaryData);
context.Response.Flush();
context.ApplicationInstance.CompleteRequest(); 
```

# php - 通过在发送 html 结尾之前加载 js/css 来提高站点性能

> ID：12383520
> 
> 赞同：0
> 
> 时间：2012-09-12T07:52:41.170
> 
> 标签：php, html, performance, apache, template-engine

我正在为我的网站 (XML/XSLT) 使用模板系统。该系统将在完成所有工作后将生成的 HTML 输出。这会导致浏览器仅在生成所有 HTML 后才开始下载所有内容的行为。在某些页面上，这是在 1 秒或更长时间之后。

现在，我想尝试加快速度，让浏览器在所有工作完成之前下载 css/js 文件（可能还有图片精灵）。

我显然不能直接发送整个头部，因为每个页面的标题、关键字和描述都不同，并且只发送头部的一部分似乎不起作用。

有没有人建议如何做到这一点？

我正在使用 apache 和 php。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-12T07:58:10.340

您几乎无法控制浏览器如何下载呈现页面所需的内容。这取决于浏览器的实现。

chrome 中有一个不错的选项，可以显示下载内容的时间线。以下是如何构建 stackoverflow 的示例：

![在此处输入图像描述](../Images/e816967d01fd1041c2fbfd39d97ef2c5.png)

# c# - 匹配括号中的整数

> ID：12383524
> 
> 赞同：1
> 
> 时间：2012-09-12T07:52:51.007
> 
> 标签：c#, .net, regex, string

> **可能重复：**
> [匹配括号之间的整数](https://stackoverflow.com/questions/12370794/matching-an-integer-between-the-brackets)

匹配括号之间的整数的正则表达式是什么？例如，

```
"ASDF[ 4 ]"

"ZXCd[6]"

"qwerr   [    77 ]" 
```

匹配的字符串将是 "4","6","77"

问题是，我不知道任何可以匹配整数并忽略空格的正则表达式。有什么想法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-12T07:55:00.173

试试这个，

```
(?<=\[\s*)\d+(?=\s*\]) 
```

# customization - 是否可以在不使用皮肤的情况下连接到 SugarCRM 数据库？

> ID：12383528
> 
> 赞同：1
> 
> 时间：2012-09-12T07:53:03.830
> 
> 标签：customization, sugarcrm, skin

我已经设计了一个 UI，现在有网页了。现在我想使用和修改来自 SugarCRM 数据库的信息。有没有办法将我的网页连接到数据库？

UI 需要组合来自多个数据库的信息，因此制作自定义皮肤并将其导入 SugarCRM 看起来不是一个选项。

有没有办法连接点？我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-12T22:23:57.743

我建议将您的设计转换为 Sugar 中的新主题。查看 /themes 目录以获取现有主题。你可以以此为起点。

否则，您需要使用 REST API 重做所有在 Sugar 中已经完成的逻辑。取决于你的要求是什么。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-04T17:33:08.140

假设您有一个典型的 SugarCRM 设置，是的，您可以设置一个简单的 PHP 脚本来连接到多个数据库并呈现您需要的字段。您要连接到哪些数据库？

但是，访问 SugarCRM 数据的推荐方法是通过 REST API 进行。这将更好地确保/保护您的 SugarCRM 实例的完整性。它需要预先进行一些设置，但非常值得花时间。您最不想要的是外部脚本更改您的糖实例数据并破坏您的数据库。此外，破译 SugarCRM 数据库架构并编写查询可能会花费您同样长的时间（如果不是更长的话）。您的脚本可以调用 REST API 并获取您需要提供的任何数据。

所以是的，您可以通过 PHP 脚本直接查询 Sugar DB（如果您知道自己在做什么），但最好使用 REST API 并让它返回您需要的对象/数据，而不是弄乱数据库.

# objective-c - EDMessage 导入框架

> ID：12383530
> 
> 赞同：1
> 
> 时间：2012-09-12T07:53:06.073
> 
> 标签：objective-c, ios, ios5

我如何在我的项目中起诉 EDMessage 框架？能否提供一些步骤。

我想使用发送邮件

```
NSString *text; // assume this exists this

headerFields = [NSMutableDictionary dictionary]; 
[headerFields setObject:@"Joe User <joe@example.com>" forKey:@"To"]; 
[headerFields setObject:@"Hi there" forKey:@"Subject"];

text = [text stringWithCanonicalLinebreaks];

mailAgent = [EDMailAgent mailAgentForRelayHostWithName:@"mail.example.com"]; 
[mailAgent sendMailWithHeaders:headerFields andBody:text]; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-12T12:13:46.670

我是几年前将 EDMessage 从垃圾箱中取出的人，根据我的经验，如果你能让它在 iOS 上运行，我会感到非常惊讶——而且它真的很大。我知道很多人在 iOS 上使用“MailCore”在 Apple 框架之外发送邮件——你看过吗？

# templates - JavaFX 2.0 - 样式/模板现有控件

> ID：12383533
> 
> 赞同：6
> 
> 时间：2012-09-12T07:53:17.473
> 
> 标签：templates, styles, radio-button, controls, javafx-2

我对 WPF 和 JavaFX 2.0 的新手非常有经验。我即将将 Silverlight 项目迁移到 JavaFX 2.0。两本 Apress 书籍和几个线程无法回答我的问题（也许我看不到或理解答案，因为我的 WPF 影响了预期）。

我需要的是一个具有 RadioButton 功能但 UI 完全不同的控件。我的 RadioButton 有一个文本，一个图像，没有按钮，文本下方有一条线（矩形）。如果未选择 RadioButton，则文本和图像是透明的，图像是灰度的，矩形不可见。如果它被选中，文本和图像是不透明的，图像被着色并且矩形变得可见（所有通过动画改变）。

我知道如何为现有的 JavaFX 2.0 控件设置皮肤，但我不知道如何以这种方式设置 RadioButton 的样式/皮肤。

在 WPF 中，我只是为我的 RadioButton 样式创建了一个新模板……正如我所提到的，也许这些 WPF 影响了对 JavaFX 2.0 的期望是我的障碍。

谢谢...

编辑：

似乎无法为现有控件创建另一个模板（？）： [JavaFX 2.0 render controls inside control](https://stackoverflow.com/questions/8253304/javafx-2-0-render-controls-inside-control?rq=1)

那么实现我的 RadioButton 的最佳方式是什么？我为 ToggleGroup 烦恼...

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-13T00:23:06.800

有许多方法可以设置样式或模板 JavaFX 控件。

1.  预构建的 JavaFX 控件可通过[css](http://docs.oracle.com/javafx/2/css_tutorial/jfxpub-css_tutorial.htm)设置样式。

2.  还可以对预构建的 JavaFX 控件进行子类化以修改其功能和外观。一个[示例](https://gist.github.com/1962045)是 IntField，它创建了一个自定义为仅编辑整数的 TextField。

3.  通常，您可以通过将一堆现有控件放在布局[Pane](http://docs.oracle.com/javafx/2/api/javafx/scene/layout/Pane.html)或[Group](http://docs.oracle.com/javafx/2/api/javafx/scene/Group.html)中来构建自定义组件。通过参数化构造合并组件的方法或类，您可以通过代码有效地模板化自定义组件构造。这是使用这种方法构建的[数字和模拟时钟组件](https://gist.github.com/3388637)的示例（并且可以通过 css 设置样式）。

4.  [您还可以使用fxml 文档介绍中](http://docs.oracle.com/javafx/2/api/javafx/fxml/doc-files/introduction_to_fxml.html#custom_components)的方法，通过不同的 fxml 文件管理自定义组件的布局。fxml 可以使用像[velocity](http://velocity.apache.org/)这样的模板语言生成，或者可以为不同的布局编写一些不同的静态 fxml 文件。静态或生成的 fxml 也可以从网络服务器动态提供，如需要时动态生成的 html 站点。

5.  构建自定义控件的另一种方式与 JavaFX 团队的方式相同（通过为控件创建外观和行为类）。从 JavaFX 2.2 开始（甚至可能在未来的 JavaFX 版本中），这最适合库创建者，例如从事[jfxtras](http://jfxtras.org/)工作或直接为JavaFX 项目的 [开源控制存储库做出贡献的库创建者。](http://hg.openjdk.java.net/openjfx/8/master/rt/file/tip/javafx-ui-controls/)

6.  另请注意，在 css 中，您可以为控件指定外观类，例如 RadioButton 具有以下 css：

```
    。单选按钮 {
        -fx-skin: "com.sun.javafx.scene.control.skin.RadioButtonSkin";
    }

```

因此，您正在考虑自定义 RadioButton 外观的一种方法是：

1.  从我之前链接的开源 JavaFX 存储库中获取[RadioButtonSkin](http://hg.openjdk.java.net/openjfx/8/master/rt/file/tip/javafx-ui-controls/src/com/sun/javafx/scene/control/skin/RadioButtonSkin.java)类源的副本。
2.  将它复制到一个新的类名（例如 LinedRadioButtonSkin）。
3.  修改它以获得您想要的外观。
4.  为您的项目创建自定义 CSS 样式表。
5.  在自定义 css 样式表中`-fx-skin`，将类的属性设置`.radio-button`为使用新的 LinedRadioButtonSkin 类。

只要您的新皮肤正确实现并连接到现有的[ButtonBehaviour](http://hg.openjdk.java.net/openjfx/8/master/rt/file/tip/javafx-ui-controls/src/com/sun/javafx/scene/control/behavior/ButtonBehavior.java)类，类似于现有 RadioButtonSkin 类的工作方式，那么您应该自动获得与现有单选按钮相同的基于皮肤的新单选按钮的行为。例如，按钮将响应鼠标点击、键盘加速器、触摸事件、与 ToggleGroups 交互等，与现有的 RadioButtonSkin 完全相同，并且可以使用现有的[RadioButton](http://docs.oracle.com/javafx/2/api/javafx/scene/control/RadioButton.html) api 访问。也就是说，按钮保留了 RadioButton 的感觉（行为），但可以通过使用不同的内部组件、布局和 css 样式来完全不同。

如果您决定采用自定义皮肤路线并在此过程中需要帮助，请考虑联系 jfxtras 团队的成员并将您的新皮肤捐赠给 jfxtras 项目。

**警告**

JavaFX 2.2 中的 Skin 和 Behavior 类是私有实现 api，而不是公开支持的 api，并且在将来过渡到公共 api 时会发生变化（计划用于 JavaFX 的下一个主要版本 - JavaFX/JDK 8） - 所以如果你使用这些今天，请谨慎行事。一旦它们过渡到公共 API，我希望您会看到有关如何使用这些类创建自己的控件的更多信息和教程。

包名称和 api 方法将随着 api 的变化而改变，以构建您自己的控件，从皮肤和行为转换从内部私有实现到公共 api。例如`com.sun.javafx.scene.control.behavior.BehaviorBase`可能变为`javafx.scene.control.behavior.Behavior`，因此如果您创建一个扩展 BehaviorBase 的类，它不会针对新版本的 JavaFX 运行，直到您修改类的源以引用新名称和 api 并重新编译它。

出于同样的原因，在 API 公开和最终版本之前，不会有关于这个主题的好书，因为本书中包含的针对私有 api 编写的任何示例代码一旦公开 api 就会过时，并且两者都不会不针对公共 api 编译，也不针对较新版本的 JavaFX 执行。

# python - Ubuntu12.04中使用Python3的lxml内存泄漏

> ID：12383537
> 
> 赞同：4
> 
> 时间：2012-09-12T07:53:34.163
> 
> 标签：python, memory, lxml

我刚刚在 Ubuntu12.04 电脑上安装，`lxml`安装`easy_install`了 Python 3.2.3。 `lxml`是最新的3.0Alpha版本。

我尝试了以下代码：

```
import lxml.html

def proc_tweet(ss):
    html=lxml.html.fragment_fromstring(ss)
    ps=html.xpath("//p[@node-type='feed_list_content']")

def test():
    ss=''
    f=open('test')
    for l in f: ss+=l.strip()
    f.close()
    while True: proc_tweet(ss)

if __name__=='__main__':
    test() 
```

这里，'test' 是一个文件，包含一个简短的 HTML 片段：

```
<dl action-type="feed_list_item" mid="3409553360609821" class="feed_list W_linecolor"> 
    <dd class="content"> 
        <p node-type="feed_list_content">This is a drill.</p> 
    </dd> 
    <dd class="clear"></dd> 
</dl> 
```

问题是`lxml`随着时间的推移会吞噬我所有的记忆。我试过这个

```
del ps
del html 
```

它不起作用。有谁知道为什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-28T18:29:09.810

这是在 3.0 beta 1 中修复的错误。

为了将来参考，最好将软件工具的问题直接报告给维护它的项目，而不是将其发布在 Internet 上的任意位置。启动板错误跟踪器是报告 lxml 错误的正确位置。github 跟踪器主要用于拉取请求。

# visual-studio - Visual Studio Pre/Post Build Event - 将文件复制到安装项目中的目录

> ID：12383538
> 
> 赞同：0
> 
> 时间：2012-09-12T07:53:47.050
> 
> 标签：visual-studio, setup-project, post-build-event, pre-build-event

我在安装项目中有一个名为“SSRS_Repor”的文件夹。现在我希望当我为我的项目创建设置时，我想将我的项目中存在的名为“report”的文件夹中的所有文件复制到设置项目中存在的文件夹 SSRS_Repor 中。请指导我该怎么做。我知道这可以像为设置前/后构建事件编写脚本一样完成，但没有正确意识到。我有一个样本

```
copy /Y "$(TargetDir)$(ProjectName).dll" "$(SolutionDir)lib\$(ProjectName).dll" 
```

但不清楚在哪里设置它。

如果有人详细告诉我所有步骤，那将会很有帮助。谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-15T01:37:55.393

右键单击您可以在右侧找到的解决方案资源管理器上的项目，然后单击“属性”。

然后转到树中“配置属性”下的“构建事件”，然后展开它。您应该看到“预构建事件”/“预链接事件”/“构建后事件”。

# python - 在 Django 中通过 IP 地址进行身份验证

> ID：12383540
> 
> 赞同：18
> 
> 时间：2012-09-12T07:53:52.497
> 
> 标签：python, django, authentication

我有一个小型 Django 应用程序，我想将其限制为某些用户。来自特定网络的任何人都应该能够看到该视图，而无需任何进一步的身份验证，仅基于 IP 地址。应该要求来自此 IP 范围之外的任何其他人输入密码并根据默认的 Django 用户管理进行身份验证。

我假设我必须为此编写一个自定义身份验证后端，但文档让我感到困惑，因为该`authenticate()`函数似乎需要用户名/密码组合或令牌。我不清楚如何在这里使用 IP 地址进行身份验证。

在 Django 中实现基于 IP 地址的身份验证的正确方法是什么？我更愿意将尽可能多的现有库函数用于与安全相关的代码，而不是自己编写所有代码。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-09-12T13:07:44.533

这种身份验证有两种合适的方法：

*   **作为装饰器：**如果某些视图（但不是很多）需要这个检查，那么最好为此编写一个装饰器（就像@Jingo 写的那样）
*   **作为中间件：**如果需要由所有（或许多）视图完成检查，而不是使用装饰器，编写[中间件](https://docs.djangoproject.com/en/1.4/topics/http/middleware/#middleware)是更好的解决方案。

示例中间件可能类似于：

```
ALLOWED_IP_BLOCKS = [......]

class NeedToLoginMiddleware(object):
    def process_request(self, request):
        ip = request.META['REMOTE_ADDR']
        if not ip in ALLOWED_IP_BLOCKS: #ip check
            if not request.user.is_authenticated(): #if ip check failed, make authentication check
                return HttpResponseRedirect(...)
        return None 
```

*   您可以使用列表或@Jingo 提到的正则表达式进行 ip 检查。
*   如果您正在使用 django 身份验证并且`REMOTE_ADDR`不在`ALLOWED_IP_BLOCKS`列表中，则可以使用`is_authenticated`检查相关用户是否已登录。但是要`is_authenticated`在自定义中间件中使用，您的自定义中间件**必须放在 之后** `AuthenticationMiddleware`，因为`request.user`设置在该级别上。

    ```
    MIDDLEWARE_CLASSES = (
        ...
        'django.contrib.auth.middleware.AuthenticationMiddleware',
        'path.to.my.NeedToLoginMiddleware',
        ...
    ) 
    ```

    *   如果一些视图不需要此身份验证，那么您可以列出*异常 url*并从中获取请求 url`request.path`并检查请求 url 是否需要 ip 检查/身份验证。

[有关自定义中间件类](https://docs.djangoproject.com/en/1.4/topics/http/middleware/#writing-your-own-middleware)的更多信息

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-09-12T08:56:52.880

为此，您还可以编写一个小型装饰器：

```
def login_by_ip(view_func):
    def authorize(request, *args, **kwargs):
        user_ip = request.META['REMOTE_ADDR']
        for ip in allowedIps.allowedIps:
            authenticated_by_ip = re.compile(ip).match(user_ip)
            if authenticated_by_ip:
                return view_func(request, authenticated_by_ip, *args, **kwargs)
        return HttpResponseRedirect('/redirect/path/')
    return authorize 
```

在我的例子中，allowedIps 是一个文件（allowedIps.py），它将允许 IP 的正则表达式存储在一个元组中，如下所示：

```
allowedIps = ('^XXX\.XXX\..+\..+$','^XXX\.XXX\.XXX\..+$', '^XXX\.XXX\.XXX\.XXX$') 
```

希望这可以帮助或给出一个想法。注意：如果您将 authenticated_by_ip 返回到装饰视图，您的视图将必须接受该参数，如果您不需要它也可以省略它。您还可以更精确地定义正则表达式以仅接受最多三位的数字。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-12-30T00:08:18.730

IMO，如果它是一个小型的非性能关键站点，那么用 Django 解决这个问题就可以了。

最好使用您的 Apache 或 Nginx 服务完全阻止未经授权的用户。例如，在 Nginx 中，我的站点配置中有这些行：

```
include allowed_ips.conf;
deny all;
error_page 403 forbidden.html; 
```

allowed_ips.conf 在 /etc/nginx 中，看起来像这样：

```
allow 110.222.333.222;  # J Bloggs (sys admin)
allow 777.222.0.0/16;   # Government owned
... 
```

我相信这会更好，因为相对较慢的 Django 进程永远不会被阻止的 IP 触及。如果您出于性能或安全原因而阻止机器人或其他国家/地区地址范围，这很重要。

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2015-08-10T14:59:16.467

你可以试试这个装饰器。我已经测试了它的工作正常：

```
allowedIps = ['129.0.0.1', '127.0.0.1']
def allow_by_ip(view_func):
    def authorize(request, *args, **kwargs):
        user_ip = request.META['REMOTE_ADDR']
        for ip in allowedIps:
            if ip==user_ip:
                return view_func(request, *args, **kwargs)
        return HttpResponse('Invalid Ip Access!')
    return authorize 
```

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2012-09-12T07:58:12.350

无需为您编写的用例编写身份验证后端。在中间件层编写一个基于 IP 的调度程序可能就足够了

如果您的应用程序的 url 匹配，则 process_request 应检查经过身份验证的 django 用户并将该用户与白名单匹配。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-09-12T11:40:36.277

```
def login_by_id(request):
    ip = request.META['REMOTE_ADDR']
    try: UserProfile.objects.get(allow_ip=ip)
    except UserProfile.DoesNotExist: return HttpResponseRedirect('././')
    else:
        # auth here 
```

您需要`allow_ip`在 UserProfile 模型中保存注册或编辑用户页面上的更改

# javascript - 节点 -> Cocoa 应用程序数据流

> ID：12383541
> 
> 赞同：0
> 
> 时间：2012-09-12T07:53:52.857
> 
> 标签：javascript, cocoa, node.js, design-patterns, cocoa-bindings

我对节点服务器和客户端可可应用程序之间的通信有疑问。我需要每三秒钟从我的服务器向特定客户端发送一次消息。

我真的不知道该怎么做。你有什么想法吗？（WebSockets 可能不是最好的方式（它的可可）？？）

谢谢！

# iphone - 在 iphone sdk 中计算 NSMutabledictionary

> ID：12383543
> 
> 赞同：-2
> 
> 时间：2012-09-12T07:54:07.877
> 
> 标签：iphone, ios, xcode

> **可能重复：**
> [如何在 iphone 中获取 NSMutableDictionary 计数？](https://stackoverflow.com/questions/8815375/how-to-get-nsmutabledictionary-count-in-iphone)

如何`NSMutableDictionary`在iphone中计数。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-12T07:58:39.103

```
NSLog(@"Count : %d",[yourDictionary count])
OR
NSArray *keys = [yourDictionary allKeys];
NSLog(@"Count : %d", [keys count]); 
```

# sql - SQLServer 的 UNION 性能比 UNION ALL 好？

> ID：12383549
> 
> 赞同：5
> 
> 时间：2012-09-12T07:54:39.637
> 
> 标签：sql, sql-server-2008, sql-server-2008-r2, database-performance, query-tuning

我知道 UNION ALL 应该比 UNION 具有更好的性能（请参阅：[union 与 union all 的性能](https://stackoverflow.com/questions/3627946/performance-of-union-versus-union-all)）。

现在，我有这个巨大的存储过程（有很多查询），其中最终结果是两个部分的 SELECT，它们之间有一个 UNION。由于两个数据集彼此都是陌生的，我可以使用 UNION ALL 假设更好（没有不同的操作）。

我已经在几个数据库上检查过它，它工作正常。问题是我的一个客户给了我他的数据库进行性能调整，当我调查它时，我注意到如果我将 UNION ALL 更改为 UNION，性能会更好一些（！）。这就是我在存储过程中所做的所有更改。

有人可以解释一下这种情况是如何发生的吗？？？

谢谢，
齐夫

**更新：**
附加两个查询的执行计划（差异部分）： ![在此处输入图像描述](../Images/d1afafd63a3a43a670aa436e02ba843e.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-12T10:18:37.610

您引用了指向[本文](http://blog.sqlauthority.com/2009/03/11/sql-server-difference-between-union-vs-union-all-optimal-performance-comparison/)的另一个主题。

如果你在这里检查这个是两个不同的执行计划。最大的区别是`Distinct Sort`性能更差。

在您的示例中，两个执行计划与物理操作 Merge Join 具有相同的步骤（仅逻辑操作不同）。甚至估计都是一样的。

现在我真的很好奇：这两个查询之间的差异有多大？

如果您没有执行以下操作，请再次重复您的测试：
1）在运行 PRC 之前使用以下行：

```
DBCC FREEPROCCACHE
DBCC DROPCLEANBUFFERS 
```

这使缓存清晰，您可以在这两种情况下进行“冷运行”。您也可以在此处查看另[一篇文章](http://blog.sqlauthority.com/2007/03/23/sql-server-stored-procedure-clean-cache-and-clean-buffer/)。

2) 重复运行几次以查看平均值。

差别还存在吗？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-12T08:07:26.040

如果您有一些重复的行，就会发生这种情况。UNION 语句有效地对结果集执行 SELECT DISTINCT。如果您知道返回的所有记录在您的联合中都是唯一的，请使用 UNION ALL，因为它可以提供更快的结果。但是，对于您的情况下的重复项，我猜想有足够数量的重复项可以使 UNION 更快 - 您可以测试这个计数重复项并删除它们。然后运行 ​​UNION ALL 可能会重新成为“赢家”......

我希望这有帮助。

# html-parsing - 如何使用 Beautiful Soup 解析器抓取多个 HTML 表格？

> ID：12383550
> 
> 赞同：0
> 
> 时间：2012-09-12T07:54:41.000
> 
> 标签：html-parsing, beautifulsoup

抱歉这个愚蠢的问题......刚开始使用python（但我喜欢它）。

**问题：** 我想从[中心抓取数据以记录叙利亚的中提琴](http://vdc-sy.org/index.php/en/martyrs/1/c29ydGJ5PWEua2lsbGVkX2RhdGV8c29ydGRpcj1ERVNDfGFwcHJvdmVkPXZpc2libGV8c2hvdz0xfGV4dHJhZGlzcGxheT0wfA==)。目前我正在使用这个刮板来收集数据。问题是我只能访问一行，而不是从表中刮掉所有行。首选输出应如下所示

姓名 状态 性别 省份 地区 死亡日期 死亡原因

```
import urllib2
from BeautifulSoup import BeautifulSoup
f = open('syriawar.tsv', 'w')
f.write("Row" + "\t" + "Data" + "\n")

for x in range (0,249):

syria = "file" + "\t" + str(x)
print "fetching data ... " + syria

url ='http://vdc-sy.org/index.php/en/martyrs/' + str(x) + '/c29ydGJ5PWEua2lsbGVkX2RhdGV8c29ydGRpcj1ERVNDfGFwcHJvdmVkPXZpc2libGV8c2hvdz0xfGV4dHJhZGlzcGxheT0wfA==' 

page = urllib2.urlopen(url)
soup = BeautifulSoup(page)

sentence = soup.findAll('tr')[3].text

words = sentence
Data = str(words)

f.write(str(x) + "\t" + Data + "\n" )

f.close() 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-13T00:38:55.047

您需要另一层迭代。您应该首先调用 findAll('tr') 来获取所有行。然后删除作为标题和空的行，然后遍历剩余的行并在这些元素上调用 .text 以获取所需行的文本。从内部循环中将每一行写入文件。

这是固定的脚本。请注意，必须使用 utf-8 编解码器，因为该页面在文本中包含 unicode。您应该验证这是否得到了您想要的一切。空标签导致 Beautiful Soup 出现一些问题。

```
import urllib2
from bs4 import BeautifulSoup
import codecs

f = codecs.open('syriawar.tsv', 'w', 'utf-8')
f.write("Row" + "\t" + "Data" + "\n")

for x in range (0,249):

  syria = "file" + "\t" + str(x)
  print "fetching data ... " + syria

  url ='http://vdc-sy.org/index.php/en/martyrs/' + str(x) + '/c29ydGJ5PWEua2lsbGVkX2RhdGV8c29ydGRpcj1ERVNDfGFwcHJvdmVkPXZpc2libGV8c2hvdz0xfGV4dHJhZGlzcGxheT0wfA=='

  page = urllib2.urlopen(url)
  soup = BeautifulSoup(page)

  rows = soup.findAll('tr')

  i = 0;
  for row in rows[3:]:
     if i%2 == 0:
        f.write(str(i/2) + "\t" + row.text + "\n" )
     i += 1

f.close() 
```

另一种巧妙的方法是使用[Scrapemark](http://arshaw.com/scrapemark/)。它适用于表格和列表。

# java - 这个奇怪的继承循环是什么？

> ID：12383552
> 
> 赞同：2
> 
> 时间：2012-09-12T07:55:00.453
> 
> 标签：java, debugging, inheritance

     我使用多态数组创建了一个基本的继承程序。从父类开始，循环遍历该数组，并且每个索引处的每个对象（从子类创建）执行父类的实例方法。

     作为一个实验，我在其父类类型的子类构造函数中创建了一个对象，并从那里执行父类的实例方法。

     由于我不知道的原因，这导致实例方法（从子类的构造函数执行）*执行的次数作为父类的多态数组的长度*（如果多态数组有**5 个**元素，则子-class' 方法调用将被执行**5**次）。

* * *

这是父类：

```
public class MyClass
{
    // instance variables
    protected String name;
    protected String numStrings;

    // constructor
    public MyClass(String name)
    {
        this.name = name;
    }

    // instance method
    public void getDescription()
    {
        System.out.println("The " + name + " has " + numStrings + " strings.");
    }

    // main method
    public static void main(String[] args)
    {
        MyClass[] instruments = new MyClass[2];

        instruments[0] = new Child("Ibanez bass guitar");
        instruments[1] = new Child("Warwick fretless bass guitar");

        for(int i = 0, len = instruments.length; i < len; i++)
        {
            instruments[i].getDescription();
        }
    } // end of main method
} // end of class MyClass 
```

...这是子类：

```
public class Child extends MyClass
{
    // constructor
    public Child(String name)
    {
        super(name); // calling the parent-class' constructor
        super.numStrings = "four";

        MyClass obj = new MyClass("asdf");
        obj.getDescription();
    }
} // end of class Child 
```

...这是输出：

```
The asdf has null strings.
The asdf has null strings.
The Ibanez bass guitar has four strings.
The Warwick fretless bass guitar has four strings. 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-12T08:03:39.443

任何地方都没有奇怪的继承循环。您创建两个子实例，每个子实例都执行此代码

```
 MyClass obj = new MyClass("asdf");
    obj.getDescription(); 
```

并按预期打印“asdf 有空字符串。”。请注意，它`obj`已准备好进行垃圾收集，因为在此代码执行后它不再可访问。也就是说，这两行是不必要的，它们唯一的作用是输出“The asdf has null strings”。当您编写 super("something") 时，已经调用了超类的构造函数。

然后，两个 Child 对象最终被打印出来，并带有正确的值。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-12T07:57:53.037

有问题的行是这样的：

```
MyClass obj = new MyClass("asdf"); 
```

如果你只是简单地调用 getDescription() 而不是 obj.getDescription()，应该没问题。由于 'Child' 扩展了 'MyClass' 超级构造函数调用用于初始化超类中的所有内容（假设您现在可以将其想象为隐式`new MyClass("...")`），因此您不必显式实例化 'MyClass'。

# c# - VirusTotal API 使用情况？

> ID：12383553
> 
> 赞同：2
> 
> 时间：2012-09-12T07:55:02.430
> 
> 标签：c#

所以我得到了这个

```
public class VirusTotal
{
    public string APIKey;
    string scan = "https://www.virustotal.com/api/scan_file.json";
    string results = "https://www.virustotal.com/api/get_file_report.json";

    public VirusTotal(string apiKey)
    {
        ServicePointManager.Expect100Continue = false;
        APIKey = apiKey;
    }

    public string Scan(string file)
    {
        var v = new NameValueCollection();
        v.Add("key", APIKey);
        var c = new WebClient() { QueryString = v };
        c.Headers.Add("Content-type", "binary/octet-stream");
        byte[] b = c.UploadFile(scan, "POST", file);
        var r = ParseJSON(Encoding.Default.GetString(b));
        if (r.ContainsKey("scan_id"))
        {
            return r["scan_id"];
        }
        throw new Exception(r["result"]);
    }

    public string GetResults(string id)
    {
        Clipboard.SetText(id);
        var data = string.Format("resource={0}&key={1}", id, APIKey);
        var c = new WebClient();
        string s = c.UploadString(results, "POST", data);
        var r = ParseJSON(s);
        foreach (string str in r.Values)
        {
            MessageBox.Show(str);
        }
        if (r["result"] != "1")
        {
            throw new Exception(r["result"]);
        }
        return s;
    }

    private Dictionary<string, string> ParseJSON(string json)
    {
        var d = new Dictionary<string, string>();
        json = json.Replace("\"", null).Replace("[", null).Replace("]", null);
        var r = json.Substring(1, json.Length - 2).Split(',');
        foreach (string s in r)
        {
            d.Add(s.Split(':')[0], s.Split(':')[1]);
        }
        return d;
    }
} 
```

但是如果我输入了 URL 我会认为它是扫描的，但是我如何检索扫描回来并开始扫描过程

抱歉，我是 api 新手，我并没有真正得到 webclient thx 的帮助

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-12T08:03:57.023

您实际上不需要在此处指定任何 URL。

当您上传文件进行扫描时，您会返回由 VirusTotal 生成的唯一请求 ID。该 ID 是`Scan`函数的返回值。如果您将此值存储在变量中，然后在调用中指定它，`GetResults`那么您应该得到结果。

代码将如下所示：

```
VirusTotal vtObject = new VirusTotal("%Your_API_key_here%");
string resultID = vtObject.Scan("%your_file_name_here%");
string results = vtObject.GetResults(resultID); 
```

另请注意，文件扫描需要一些时间，因此您很可能会在`results`. 您可能希望`GetResults`在一段时间后随后调用，以便在 VT 处理您的文件后获取实际扫描数据。

# c++ - 简单 SWITCH 中的分段错误 11

> ID：12383558
> 
> 赞同：0
> 
> 时间：2012-09-12T07:55:26.690
> 
> 标签：c++

```
int main(){
MyBase *mb;
int choice;

cout << "Select: ";
cin >> choice;

switch (choice) {
    case 1:
        mb = new Test1();
        break;
    case 2:
        mb = new Test2();
        break;
    case 3:
        mb = new Test3();
        break;
    case 4:
        mb = new Test4();
        break;
    case 5:
        mb = new Test5();
        break;
    case 6:{
        LinkTest t;
        t.start();
        break;
    }
    default:
        return 0;
}

if(mb != 0){
    mb->start();
    delete mb;     
}

return 0;
} 
```

如果选择是 6，为什么在检查 mb 是否为 NULL 时会出现分段错误？

我是 C++ 新手，只是做一些练习。如何在不影响 LinkTest 类的情况下解决此问题？谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-12T07:57:16.110

你还没有初始化`mb`；C++ 不会为您做到这一点。而对于`choice`6 的情况，`mb`它不会被分配任何值，因此稍后当您对照 0 检查它时它不会被初始化，并且可以保存任何随机值（该随机值可能是 0，但在大多数情况下它不会t 是；它将只包含变量现在所在的内存部分中的任何值）。尝试

```
MyBase *mb = NULL; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-12T07:57:41.943

当您在函数范围内声明变量时，它们通常是所谓的“堆栈变量”。这意味着它们驻留在堆栈内存中，通常包含大量以前使用的“垃圾”。因此，在声明时未初始化“mb”变量时，初始值是未定义的（无论发生在堆栈中该位置的什么），通常非零。因此，您应该在声明时初始化 mb：

```
MyBase* mb = 0; 
```

顺便说一句，我注意到'switch'中的'case 6：'没有将mb设置为任何东西......

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-12T07:57:32.113

您需要将 mb 初始化为`NULL`，否则如果`choice`不在 1..5 范围内，`mb`则将未定义。改变：

```
MyBase *mb; 
```

到：

```
MyBase *mb = NULL; 
```

# php - 检查特定变量是否在 wordpress 中具有值

> ID：12383561
> 
> 赞同：-1
> 
> 时间：2012-09-12T07:55:45.397
> 
> 标签：php, wordpress

我想在 div 之前检查变量值，以便如果变量为空，则隐藏处于 if 条件的 div，反之亦然。

例如：

```
<?php $var=has_post_thumbnail();
if(!empty($var)){ ?>
<div>//some code that is shown only if var has some value</div>
<?php } ?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-12T08:00:43.983

```
<?php if(isset($var)) // or check for empty if you want that way{ ?>
    <div> yes variable is set </div>
<?php } else { ?>
    <div> variable not set division </div>
<?php } ?> 
```

# ruby-on-rails - 如何在rails中的imagewick上调整图像大小

> ID：12383562
> 
> 赞同：1
> 
> 时间：2012-09-12T07:55:44.837
> 
> 标签：ruby-on-rails, imagemagick, paperclip

我只想调整大于特定尺寸的图像，而不是像

```
 has_attached_file :avatar ,:styles => {:small => "120*120>",:thumb => "50*50>"} 
```

默认情况下，它不应调整任何尺寸小于上述尺寸的图像。但是，如果给出了一个小尺寸的图像，`32*32`那么它也在调整它的大小。

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-13T12:28:53.610

我实际上得到了答案

> :styles 而不是 :small => "120*120>" 它应该是 "120x120>"

# javascript - JQM 事件“pageinit”不触发

> ID：12383563
> 
> 赞同：0
> 
> 时间：2012-09-12T07:55:46.033
> 
> 标签：javascript, cordova, jquery-mobile

我正在制作一个 jQueryMobile 和 PhoneGap 应用程序。我需要在页面初始化中调用 ajax。不幸的是，它永远不会触发：

```
$("#kontakty").bind('pageinit', function() { 
```

在文件中：

```
<div data-role="page" id="kontakty"> 
```

从页面 A.html 导航到 kontakty.html 时，我的事件不会被触发。我尝试用 live 替换 bind，但没有成功。我还尝试了 pageshow、pageinit、pagechange... 以及 jQM 文档中的所有方法。

奇怪的是，当我用文档更改“#kontakty”时，它起作用了。但我不能让它永久化，因为它会与我打开的所有其他 .html 文件一起调用（这不好）。

提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-12T08:17:40.847

看看[这里](https://stackoverflow.com/questions/7544023/how-to-initialize-pages-in-jquery-mobile-pageinit-not-firing)可能是你的 JavaScript 不在`<div data-role=..`

我还将您的 .bind 更改为 .live ，就像他们在文档中所做的那样。

# python - 比较python中集合之间的相似性

> ID：12383565
> 
> 赞同：2
> 
> 时间：2012-09-12T07:55:50.960
> 
> 标签：python, similarity

我在 python 中有两个句子，它们代表用户在输入中作为图像检索软件查询的词集：

```
sentence1 = "dog is the"
sentence2 = "the dog is a very nice animal" 
```

我有一组带有描述的图像，例如：

```
sentence3 = "the dog is running in your garden" 
```

我想恢复所有描述与用户插入的查询“非常接近”的图像，但是与描述相关的这部分应该在 0 和 1 之间进行标准化，因为它只是考虑地理标记的更复杂研究的一部分和图像的低级特征。

鉴于我使用以下方法创建了三组：

```
set_sentence1 = set(sentence1.split())
set_sentence2 = set(sentence2.split())
set_sentence3 = set(sentence3.split()) 
```

并将集合之间的交集计算为：

```
intersection1 = set_sentence1.intersection(set_sentence3)
intersection2 = set_sentence2.intersection(set_sentence3) 
```

我怎样才能有效地标准化比较？

我不想使用 levensthein 距离，因为我对字符串相似性不感兴趣，而是对集合相似性感兴趣。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-12T07:59:53.003

也许像这样的指标：

```
Similarity1 = (1.0 + len(intersection1))/(1.0 + max(len(set_sentence1), len(set_sentence3)))
Similarity2 = (1.0 + len(intersection2))/(1.0 + max(len(set_sentence2), len(set_sentence3))) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-12T09:25:46.470

你试过[difflib](http://docs.python.org/library/difflib.html)吗？

来自文档的示例：

```
>>> s1 = ['bacon\n', 'eggs\n', 'ham\n', 'guido\n']
>>> s2 = ['python\n', 'eggy\n', 'hamster\n', 'guido\n']
>>> for line in context_diff(s1, s2, fromfile='before.py', tofile='after.py'):
...     sys.stdout.write(line)  
*** before.py
--- after.py
***************
*** 1,4 ****
! bacon
! eggs
! ham
  guido
--- 1,4 ----
! python
! eggy
! hamster
  guido 
```

# ios - 如何用 UED 给我的字符串获得颜色？

> ID：12383571
> 
> 赞同：0
> 
> 时间：2012-09-12T07:55:58.290
> 
> 标签：ios

我的 UED 告诉我颜色必须是 #595959 和 #333333。

但是我应该在 UIColor 中使用哪种委托方法来获取上面字符串的颜色？

任何人？

谢谢你 。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-12T12:11:28.077

```
@implementation UIColor (Hex) 

+ (UIColor *)colorWithHex:(NSUInteger)hex // accepts values like 0x556677
{
    CGFloat colors[3];

    for(int i=0; i<3; ++i) {
        NSUInteger val = hex & 0xFF;
        colors[i] = (CGFloat)val/255.0f;
        hex >>= 8;
    }
    return [UIColor colorWithRed:colors[2] green:colors[1] blue:colors[0] alpha:1.0f];
} 
```

@结尾

# php - ORDER BY % 在原始 while 循环内计算

> ID：12383574
> 
> 赞同：4
> 
> 时间：2012-09-12T07:56:15.190
> 
> 标签：php, mysql

我想根据主要结果查询中的数学总和答案对结果进行排序，这就是我的意思：

我当前的代码如下所示：

```
$query  = "SELECT * FROM foo WHERE foobar='{$fobo}' ORDER BY id DESC";
$result = mysql_query($query);

 while($row = mysql_fetch_array($result))
 {

   $percent = round((100 * $row['wins'] / ($row['wins'] + $row['loses'])));

     echo 'blah blah blah' . $percent;

} 
```

如您所见，我目前按 ID 订购：

```
$query  = "SELECT * FROM foo WHERE foobar='{$fobo}' ORDER BY id DESC"; 
```

但我想按`$percent`答案排序，但那是在 while 循环内计算的。

我尝试创建一个查询并将其放在主要结果查询之前：

```
$p  = "SELECT wins, loses FROM foo WHERE foobar='{$fobo}'";
$pr = mysql_query($p);

$pow = mysql_fetch_array($pr);
$percent = round((100 * $pow['wins'] / ($pow['wins'] + $pow['loses']))); 
```

但那吐出来

> 警告：mysql_fetch_array() 期望参数 1 是资源，布尔值

我认为 % 计算可以在主查询中完成，而不是我认为会做的 php sum ，但我不知道那个查询是什么。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-12T07:59:19.960

无需在循环内计算`percentage`值，然后使用另一个循环进行排序，您可以在一个查询中执行此操作，如下所示：

```
$query  = "SELECT foo.*,
                  ROUND((100 * wins / (wins + loses))) AS percentage
           FROM foo
           WHERE foobar='{$fobo}'
           ORDER BY percentage ASC";

$result = mysql_query($query);

while($row = mysql_fetch_array($result))
{
   echo 'blah blah blah' . $row['percentage'];
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-12T08:02:06.577

您可以在 order by 子句中执行计算

```
SELECT *
FROM tableName
ORDER BY ROUND((100*wins) / (wins+loses)) DESC 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-12T07:59:25.710

您可以使用这样的列号：

```
select
    col1,
    col2
    round((100*wins)/wins+loses)
from
    foo
where
    foobar='{$fobo}'
group by
    col1,
    col2
order by
    3 
```

# jquery - 如何使用 jQuery 打开和关闭背景可见性？

> ID：12383583
> 
> 赞同：0
> 
> 时间：2012-09-12T07:57:11.060
> 
> 标签：jquery, html, css

我有以下CSS：

```
#load-icon
{
    background: url(/Images/loaders/mask-loader.gif);
    background-repeat: no-repeat;
    z-index: 99; width: 32px; height: 32px;
    z-index: 99; 
    margin-top: 9px;
    margin-bottom: 9px;
    margin-right: 5px; 
    display: none;
} 
```

我正在使用以下代码使其可见和不可见：

```
$(document).ajaxStart(function () {
    $('#load-icon').show(500);
});
$(document).ajaxStop(function () {
    $('#load-icon').hide();
}); 
```

然而，背景用于间距，当它被隐藏时，#load-icon 不使用空间，这不是我想要的。

我怎样才能使#load-icon 始终使用 32px 的空间并且 gif 变得可见或不可见？如果它更容易，我不太关心淡入或淡出持续时间。

这是一个小提琴，它显示了它的使用位置：[fiddle](http://jsfiddle.net/BcPjz/4/)

更新：我真的需要一种不涉及将背景图像设置为无然后返回 gif 的方法。那是因为我很可能使用不同的 CSS 样式并且我无法将 gif 名称编码到我的 javascript 中。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-12T07:59:49.523

你应该在jquery背景中设置无..即

```
$(document).ready(function(e) {
    var loadicon = $('#load-icon').css('background');
    $('#load-icon').css('background','none');

    $(document).ajaxStart(function () {
        $('#load-icon').css('background',loadicon);
    });
    $(document).ajaxStop(function () {
        $('#load-icon').css('background','none');
    });
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-12T08:20:41.050

```
$(document).ajaxStart(function () {
    $('#load-icon').fadeTo(0,0.0);
});
$(document).ajaxStop(function () {
    $('#load-icon').fadeTo(0,1.0);
}); 
```

# java - 在 Vaadin 中打开文件链接

> ID：12383584
> 
> 赞同：0
> 
> 时间：2012-09-12T07:57:14.707
> 
> 标签：java, tomcat, hyperlink, vaadin

我正在尝试使用以下代码在 Vaadin 的新窗口中打开指向文件的链接：

```
getWindow().open(new ExternalResource("./uploads/file.png"), "_blank"); 
```

我将文件存储在 /uploads/ 下的 webapp 文件夹中，托管在 Tomcat 服务器上。但是当我单击触发上述代码的按钮时，会打开一个新窗口，其中包含前一个窗口的内容和指向该文件的 URL，但不会触发文件下载。

如何在新窗口中打开下载链接？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-12T09:02:33.943

首先，您的意思是“../uploads/file.png”吗？（即 Web 应用程序之外的资源。）

您正在使用[ExternalResource](https://vaadin.com/docs/framework/application/application-resources.html)，这基本上意味着您正在浏览器中打开一个 URL。URL“./uploads/file.png”指向应用程序，您会看到相同的窗口。

相反，您可以使用[FileResource](https://vaadin.com/docs/framework/application/application-resources.html)让 Vaadin 应用程序提供文件。在这种情况下，我建议不要使用相对路径，因为它们可能因部署服务器而异。

如果您想**在相同的 Web 应用程序上下文中****直接**使用 Tomcat提供文件，您应该在 web.xml 中定义“./uploads”不会**映射**回您的应用程序。

 ****确保这一点的最简单方法是将 Vaadin 应用程序放在“/application/*”（或类似）路径下。如果中间没有 FileResource，这是更有效的方法。缺点是应用程序 URI 发生了变化，并且对用户可见。****

# python - 按名称顺序迭代文件，Python

> ID：12383586
> 
> 赞同：1
> 
> 时间：2012-09-12T07:57:17.977
> 
> 标签：python, file, iteration

我正在迭代一堆文件，如下所示：

```
for file in glob('./*.dat'):
            print file 
```

输出始终如下：

```
./SAN0.dat
./SAN4.dat
./SAN1.dat
./SAN2.dat
./SAN3.dat
./SAN5.dat
./SAN6.dat
./SAN7.dat 
```

我如何按名称顺序迭代它们（`SAN1.dat`例如，意思是第二个）？

谢谢！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-12T07:58:28.230

```
for file in sorted(glob('./*.dat')): 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-12T07:59:08.387

```
lst = glob('./*.dat')
lst.sort() 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-03-04T06:06:01.390

以下是在python中按文件名顺序迭代文件的最简单方法-

```
import os
for file in sorted(os.listdir(path)) 
```

# c# - 在 TabControl 中对 TabPages 进行分组

> ID：12383590
> 
> 赞同：3
> 
> 时间：2012-09-12T07:57:29.343
> 
> 标签：c#, winforms

如何在 TabControl 中对 TabPages 进行分组：第一组 - 在第一行，第二组 - 在第二行。

图片例如：
![在此处输入图像描述](../Images/9b528c9d29143dc6140abb08f210cb70.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-12T08:29:55.393

将 TabControl 的 Multiline 属性设置为 true

![在此处输入图像描述](../Images/8545d69a2504fe364f498d80d8756653.png)

# regex - 显示 JSF 中的所有验证器消息

> ID：12383593
> 
> 赞同：0
> 
> 时间：2012-09-12T07:57:36.253
> 
> 标签：regex, validation, jsf-2

当我在 1 个字段中输入值时，我会立即显示所有验证消息，它也显示所有其他字段的验证消息。我已通过以下方式对所有字段应用验证：

```
<td>User Name</td>
                            <td>
                            <h:inputText id="txtName" styleClass="text-box" value="#{UserSearch.Name}" validatorMessage="Please enter a valid name." maxlength="75">
                            <f:validateRegex pattern="^([A-Za-z])*$" />
                            </h:inputText>
                            <h:message for="txtName" styleClass="Error" /> 
```

任何人都可以帮助背后的基本问题是什么。提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-13T10:35:53.260

我相信您正在寻找的解决方案与可以使用 ajax 完成的部分提交表单有关。

我自己正在使用对 ajax 有很大帮助的 primefaces，我的注册表如下所示：

```
<p:outputLabel value="#{msg.email}" for="email" />                    
                            <p:inputText id="email" value="#{registrationBean.email}" required="true" validatorMessage="#{msg.wrong_email}" requiredMessage="#{msg.email_required}" >
                                <f:validateRegex pattern="[\w\.-]*[a-zA-Z0-9_]@[\w\.-]*[a-zA-Z0-9]\.[a-zA-Z][a-zA-Z\.]*[a-zA-Z]" />
                                <p:ajax partialSubmit="@this" update="messages" />
                            </p:inputText> 
```

# cassandra - Cassandra 查询错误：无效操作和异常

> ID：12383600
> 
> 赞同：1
> 
> 时间：2012-09-12T07:57:53.147
> 
> 标签：cassandra

我正在尝试使用 cli 中的 Cassandra CounterColumnFamily 进行一些基本查询。我基本上有一个列族“page_view_counts”，其中行键作为 url。每行有 3 个与之相关的计数（展示次数、转化次数和收入）。我已经索引了其中一个计数，因为我想检索转换 > 10 等的行。

这是描述 page_view_counts 的输出：

```
 ColumnFamily: page_view_counts
  Key Validation Class: org.apache.cassandra.db.marshal.UTF8Type
  Default column value validator: org.apache.cassandra.db.marshal.CounterColumnType
  Columns sorted by: org.apache.cassandra.db.marshal.UTF8Type
  GC grace seconds: 864000
  Compaction min/max thresholds: 4/32
  Read repair chance: 0.1
  DC Local Read repair chance: 0.0
  Replicate on write: true
  Caching: KEYS_ONLY
  Bloom Filter FP chance: default
  Column Metadata:
    Column Name: conversion
      Validation Class: org.apache.cassandra.db.marshal.CounterColumnType
      Index Name: page_view_counts_conversion_idx
      Index Type: KEYS
  Compaction Strategy: org.apache.cassandra.db.compaction.SizeTieredCompactionStrategy
  Compression Options:
    sstable_compression: org.apache.cassandra.io.compress.SnappyCompressor 
```

我的列族中的一些示例数据：

```
RowKey: row27
=> (counter=conversion, value=27000)
=> (counter=impression, value=54000)
=> (counter=revenue, value=81000)
------------------- 
RowKey: row29
=> (counter=conversion, value=29000)
=> (counter=impression, value=58000)
=> (counter=revenue, value=87000)
------------------- 
RowKey: row81
=> (counter=conversion, value=81000)
=> (counter=impression, value=162000)
=> (counter=revenue, value=243000) 
```

但是当我执行以下查询时出现这些错误：

```
[default@hector] get page_view_counts where conversion>23;
invalid operation for commutative columnfamily page_view_counts
[default@hector] get page_view_counts where conversion=long('1000');
invalid operation for commutative columnfamily page_view_counts
[default@hector] get page_view_counts where conversion=1000;
invalid operation for commutative columnfamily page_view_counts
[default@hector] get page_view_counts where KEY='row81';
java.lang.NumberFormatException: An hex string representing bytes must have an even length
[default@hector] get page_view_counts where KEY=bytes('row81');
java.lang.RuntimeException: java.lang.RuntimeException: org.apache.cassandra.db.marshal.MarshalException: cannot parse 'row81' as hex bytes
[default@hector] get page_view_counts where KEY=utf8('row81');
invalid operation for commutative columnfamily page_view_counts 
```

有人可以帮我吗？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-21T18:13:18.910

试试这个：

```
assume page_view_counts keys as UTF8Type;
get page_view_counts['row81']; 
```

# iphone - CFNetwork 错误：由于 URL 格式错误，连接失败

> ID：12383602
> 
> 赞同：1
> 
> 时间：2012-09-12T07:57:58.750
> 
> 标签：iphone, ios, debugging, cfnetwork

在运行 iphone 应用程序时，我多次收到以下错误

```
The connection failed due to a malformed URL 
```

在`CFNetwork Error Codes Reference`，我得到了这个错误由​​ CFNetwork 触发的信息

*   何时以及为何触发此错误？
*   如何摆脱这个错误？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-12T08:34:51.897

NSURLConnection 有一个方法 canHandleRequest 将返回一个布尔值，无论 url 是否有效，例如

```
NSString *strUrl = [NSString stringWithFormat:@"http://test.com/stopBoard/%i",busStopCode];
NSURL *url = [NSURL URLWithString:strUrl];
NSURLRequest *request = [[NSURLRequest alloc] initWithURL:url 
                                              cachePolicy:NSURLRequestReloadIgnoringLocalAndRemoteCacheData 
                                          timeoutInterval:20.0];
// a cache policy of NO must be used otherwise the previous query is used if the phone is not online

BOOL canGo = [NSURLConnection canHandleRequest:request];
if(canGo){
    connection = [[NSURLConnection alloc] initWithRequest:request 
                                                 delegate:self 
                                         startImmediately:YES];

} else {
    self.errorMessage = @"\n\nurl check failed\n\n";
    return NO;
} 
```

# mediawiki - 语义媒体维基表格

> ID：12383607
> 
> 赞同：1
> 
> 时间：2012-09-12T07:58:14.320
> 
> 标签：mediawiki, semantic-mediawiki

我正在使用语义媒体维基形式。我想更改 URL，我需要页面 URL 中的表单字段名称。例如：国家、州、城市的详细信息出现在我的表格中。我想将这三个细节添加到 URL 中。我该如何添加？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-09T20:12:14.830

我不确定我是否正确理解了您的问题，但是您想使用 url 中的一些数据预加载您的表单吗？在这种情况下，这取决于您在谈论什么形式。SF 带有用于编辑的表格和用于查询的表格。

*查询表单可以预加载来自 url 的数据（虽然推荐的方式是通过一个特殊的解析器函数），见[http://www.mediawiki.org/wiki/Extension:Semantic_Forms/Linking_to_forms](http://www.mediawiki.org/wiki/Extension:Semantic_Forms/Linking_to_forms)

*在编辑表单中，您只能使用预定义的模板，如下所示：`{{#forminput:form=MyForm|query string=preload=Template:MyPreloadTemplate}}`

# selenium - 存在模态对话框（警告：服务器未提供任何堆栈跟踪信息）

> ID：12383608
> 
> 赞同：4
> 
> 时间：2012-09-12T07:58:16.190
> 
> 标签：selenium, selenium-webdriver

我目前使用 Selenium Web 驱动程序。(2.24.1)- 编程语言--JAVA

我想以仅 HTML 格式保存网页，所以我使用机器人类来保存网页。

我正在循环使用此保存功能（n 次）。

这适用于循环中的少数情况，但随机（可能是第 1 次或第 3 次......第 n 次）失败并显示错误消息“线程“主”org.openqa.selenium.UnhandledAlertException：模态对话框中的异常存在（警告：服务器未提供任何堆栈跟踪信息）”

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-06-24T04:29:31.120

好吧，这取决于模态对话框是什么，但我会检查三件事。

**首先**，您很可能需要升级您的 Web 驱动程序
我注意到您正在使用 Webdriver **2.2.24**，如果您还使用 FireFox 作为浏览器，您需要将您的 WebDriver 升级到**2.2.26**或更高版本。“防止 firefox 更新、检查和警告扩展和插件更新”发生了变化，如果发生任何这些事情，它们也会引发一个模式对话框。

**其次**，它可能是您正在测试的站点引发的对话框
javascript alert() 或 window.Prompt() 是该站点为执行任何数量的操作而引发的模态对话框的示例。您可以使用 WebDriver 与这些对话框进行交互。

**第三**，如果以上都不是，获取对话框的屏幕截图对话框可能不是您可以通过 WebDriver API 访问的内容，因此您需要编写代码来获取整个屏幕截图（通过谷歌搜索应该很容易）。或者您可以在运行代码时录制视频会话。

# c++ - 复制构造函数调用 boost::multi_index_container 中的自定义排序谓词

> ID：12383610
> 
> 赞同：1
> 
> 时间：2012-09-12T07:58:18.167
> 
> 标签：c++, boost, copy-constructor, boost-multi-index

我`boost::multi_index_container`用来为一组对象提供多个视图和排序顺序。最近，我想使用自定义排序谓词对容器进行排序，该谓词（本质上）预先计算所有对象的属性值，然后使用这些值对它们进行排序（参见下面的示例代码）。

`operator()`容器已正确排序，但我注意到使用此谓词进行排序比使用仅访问我的对象的*内部*属性的谓词进行排序需要更长的时间。

进一步的调查表明，我的谓词的（隐式定义的）复制构造函数经常被调用。由于谓词的每个副本都包含完整属性映射的副本，因此需要很长时间。

我已经通过向我的对象添加内部属性来解决这个问题，但我仍然不相信这是最好的做法。所以，我想知道：

*   为什么复制构造函数经常被调用？
*   我是否正确定义了我的谓词？谓词不应该包含这么多内部数据吗？
*   有什么比定义另一个内部对象属性更好的解决方案？

这是我的代码的相关部分。我没有详细描述这个`Object`类，因为它的属性不会导致问题。

```
class Predicate
{
public:
  Predicate()
  {
    // fill _attributes map with attribute values for all objects
  }

  bool operator()(const Object& a, const Object& b) const
  {
    std::map<Object, double>::const_iterator firstPos = _attributes.find( a );
    std::map<Object, double>::const_iterator secondPos = _attributes.find( b );

    // throw error if one of the objects could not be found

    return( firstPos->second < secondPos->second );
  }

private:
  std::map<Object, double> _attributes;
};

// Later, in order to sort the container
_container.sort( Predicate() ); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-12T08:05:41.970

一种解决方案是在谓词之外构建一次属性映射，并让谓词保存`const`对映射的引用。另一种选择是将`std::ref`或传递`boost::ref`给谓词到您的排序函数。`Predicate`这将避免不必要的`std::map`数据成员副本。

```
Predicate p; // builds map internally
_container.sort( boost::ref(p) ); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-12T21:07:40.177

比较对象被复制——这种情况模拟了 C++ 标准算法的情况，并且有一些原因导致比较对象不被引用，我们不需要深入研究。

解决方案是`boost::ref`结合使用`boost::bind`：

```
#include <boost/bind.hpp>
#include <boost/ref.hpp>

...

Predicate p;
_container.sort(boost::bind<bool>(boost::ref(p),_1,_2)); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-13T20:13:57.470

@Gnosophilon，原因是：函数对象是由 C++ 以`operator()`允许具有非常量的方式定义的。这将使以下内容非法：

```
template<typename F>void call(const F& f){f();}

struct foo{void operator()(){}};

int main()
{
  call(foo());
} 
```

因为`foo()`被捕获为 const 引用，`foo::operator()`而不是 const。更糟糕的是，临时的诸如`foo()`总是被捕获为 const，所以添加这个重载

```
template<typename F>void call(F& f){f();} 
```

也不会工作。唯一的解决方案是按值捕获，它假设函数对象的复制成本很低。

在 C++11 中，这可以通过右值引用来解决，但事情仍然保持不变。

# android - 我无法使用选择器更改背景

> ID：12383612
> 
> 赞同：0
> 
> 时间：2012-09-12T07:58:24.640
> 
> 标签：android, android-selector

我为 ListFragment 使用选择器

我的 ListFragment 的 xml

```
<LinearLayout xmlns:tools="http://schemas.android.com/tools"
    xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@+id/LinearLayout1"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:background="#F1F4F2"
    android:orientation="horizontal" >

    <fragment
        android:name="usanin.max.gps_logger.Fragment_Left"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:layout_weight="5" />

       <FrameLayout
           android:id="@+id/frag_content"
           android:layout_width="match_parent"
           android:layout_height="fill_parent"
           android:layout_weight="2" />

</LinearLayout> 
```

项目 ListFragment 的 xml

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:background="@drawable/arrow"
    android:orientation="horizontal" >

    <LinearLayout
        android:id="@+id/linearLayout1"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_gravity="center_vertical|left"
        android:layout_marginBottom="5dp"
        android:layout_marginLeft="5dp"
        android:layout_marginTop="5dp"
        android:layout_weight="1"
        android:gravity="center_vertical"
        android:orientation="vertical" >

        <TextView
            android:id="@+id/tvDescr"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_gravity="center_vertical" >
        </TextView>
    </LinearLayout>

    <ImageView
        android:id="@+id/ivImage"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_gravity="center_vertical"
        android:maxHeight="20dp"
        android:minHeight="20dp" >
    </ImageView>

</LinearLayout> 
```

按下按钮我使用选择器 arrow.xml

```
<item android:state_focused="true" android:state_pressed="true"><shape>
        <gradient android:angle="90.0" android:endColor="#BA55D3" android:startColor="#800080" android:type="linear" />

        <corners android:radius="5.0dp" />
    </shape></item>
<item android:state_focused="false" android:state_pressed="true"><shape>
        <gradient android:angle="90.0" android:color="#F1F4F2" android:endColor="#53AC71" android:startColor="#53AC71" android:type="linear" />

        <corners android:radius="5.0dp" />
    </shape></item>
<item android:state_activated="true"><shape>
        <gradient android:angle="90.0" android:endColor="#3DF5E9" android:startColor="#3DF5E9" android:type="linear" />

        <corners android:radius="5.0dp" />
    </shape></item>
<item><shape>
        <gradient android:angle="90.0" android:endColor="#8E9C8B" android:startColor="#8E9C8B" android:type="linear" />

        <corners android:radius="5.0dp" />
    </shape></item> 
```

但是我有一个问题，当我按下按钮时 - 颜色背景改变了

我试图在按下“android:background”时设置选择器但不起作用

![在此处输入图像描述](../Images/4e353d4c58339f99fe1e118fdeaf8448.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-12T08:17:50.117

你应该`android:listSelector="@null"`在你的名单上设置。您的问题是默认选择器可见的透明角。

我假设您使用[ListFragment](http://developer.android.com/reference/android/app/ListFragment.html)，对吗？因此，在某些时候（xml 或代码），您需要将 ListView 放在某个地方。

如果您以编程方式生成列表视图，请尝试在您`onViewCreated()`的 ListFragment 中使用它：

```
getListView().setSeletor(android.R.color.transparent); 
```

# synchronization - Microsoft Sync Framework，windows mobile device -> WCF -> sql server，可能吗？

> ID：12383619
> 
> 赞同：0
> 
> 时间：2012-09-12T07:58:43.133
> 
> 标签：synchronization, compact-framework, microsoft-sync-framework

我已经从同步框架网页下载了一个示例，该示例演示了 sql ce 和 sql server 通过 wcf 服务进行同步的过程。

我想在台式机上创建访问 wcf 服务的 windows 移动应用程序。有可能这样的场景吗？

1.  是否有用于紧凑框架的专用 Microsoft.Services 程序集？

这是我的 wcf 合约接口：

```
public interface IRelationalSyncContract
{
  void Initialize(string scopeName, string hostName);
  void BeginSession(SyncProviderPosition position);
  SyncBatchParameters GetKnowledge();
  GetChangesParameters GetChanges(uint batchSize, SyncKnowledge destinationKnowledge);
  SyncSessionStatistics ApplyChanges(ConflictResolutionPolicy resolutionPolicy, ChangeBatch sourceChanges, object changeData);
  bool HasUploadedBatchFile(string batchFileid, string remotePeerId);
  void UploadBatchFile(string batchFileid, byte[] batchFile, string remotePeerId);
  byte[] DownloadBatchFile(string batchFileId);
  void EndSession();
  void Cleanup();
} 
```

我收到以下错误：“System.Xml.Serialization.IXmlSerializable”类型是在未引用的程序集中定义的。

如何解决问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-12T08:07:32.497

您下载的示例适用于较新的协作/点对点提供商。

Windows Mobile 设备不支持 SQLCeSyncProvider。

看看使用较旧的 SQLCeClientSyncProvider，请参阅：[演练：创建偶尔连接的智能设备应用程序](http://msdn.microsoft.com/en-us/library/cc488004%28v=vs.90%29)

# knockout.js - 儿童数组的淘汰赛映射

> ID：12383621
> 
> 赞同：0
> 
> 时间：2012-09-12T07:59:00.547
> 
> 标签：knockout.js, knockout-mapping-plugin

我正在尝试使用 knockoutjs 和以下数据源创建级联下拉列表：

```
[{"$id":"1",
  "Id":1,
  "Name":"Nikon",
  "Cameras":[{
       "$id":"2",
       "Id":1,
       "Name":"D90"},
      {"$id":"3",
       "Id":2,
       "Name":"D5100"},
      {"$id":"4",
       "Id":3,
       "Name":"D700"}]},
 {"$id":"5",
  "Id":2,
  "Name":"Canon",
  "Cameras":[{
       "$id":"6",
       "Id":4,
       "Name":"550D"},
      {"$id":"7",
       "Id":5,
       "Name":"600D"},
      {"$id":"8",
       "Id":6,
       "Name":"650D"}]},
 {"$id":"9",
  "Id":3,
  "Name":"Sony",
  "Cameras":[]},
 {"$id":"10",
  "Id":4,
  "Name":"Pentax",
  "Cameras":[]},
 {"$id":"11",
  "Id":5,
  "Name":"Olympus",
  "Cameras":[]},
 {"$id":"12",
  "Id":6,
  "Name":"Panasonic",
  "Cameras":[]},
 {"$id":"13",
   "Id":7,
   "Name":"Leica",
   "Cameras":[]}] 
```

我尝试使用用于 knockoutjs 的映射插件将此 json 映射到我的公司对象：

```
$.getJSON(url, function (data) {
      $.each(data, function () {
        companies.push(ko.mapping.fromJS(this));
      });
}); 
```

但似乎没有映射 Cameras 数组。你能告诉我为什么会这样吗？谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-13T12:20:11.257

Wrapping your list in an object using *companies* as key should make your code work.

```
var Model = function () {
   this.companies= ko.observableArray();        
};
var model = new Model();
ko.applyBindings(model);
ko.mapping.fromJS({companies: data}, mappingOptions, model); 
```

see this [fiddle](http://jsfiddle.net/gbos/RrfsF/) (changing value in input boxes shows that Cameras array is mapped).

# javascript - Backbone LayoutManager 渲染问题

> ID：12383622
> 
> 赞同：0
> 
> 时间：2012-09-12T07:59:01.303
> 
> 标签：javascript, backbone.js

我正在使用包含 Backbone.LayoutManager 的 bbb（Backbone Boilerplate）。我有[以下小提琴。](http://jsfiddle.net/3uaLk/1/)当您调用 layout.render() 方法时，它会渲染布局内的所有视图吗？因为当我渲染布局和获取我的集合时，它会在每个实例上调用 beforeRender 和 serialize 方法。所以每个方法都被调用了两次。一次是在布局渲染上，一次是在获取我的收藏时。您可以使用列出的小提琴进行测试。如果是这样，那为什么我不能覆盖我的个人视图渲染方法，这也在上面列出。我的印象是这是可能的。

调用 layout.render() 时，如何防止我的布局内的视图被渲染？在空集合上调用每个方法是非常低效的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-24T09:55:21.623

我对分页器代码不太熟悉，但看起来你缺少回调函数来捕获来自 twitter api 的返回。这似乎会导致集合 init 中的“重置”被触发，从而导致调用第二个 render()。

我认为您需要将 server_api 内容添加到分页器代码中以定义回调。

```
server_api: {
   '$callback': 'callback'
} 
```

然后这应该填充集合。

尽管您需要查看分页器文档以获取更多信息。

# jquery - 我可以从单个 id 中删除多类吗

> ID：12383623
> 
> 赞同：0
> 
> 时间：2012-09-12T07:59:02.880
> 
> 标签：jquery, class

我想在 jQuery 中删除一个多类，我有一个像这样的 id 元素

```
<div id="progress">content here</div> 
```

有时它看起来像这样

```
<div id="progress" class="progress progress-danger">content here</div> 
```

或者它看起来像这样

```
<div id="progress" class="progress progress-warning">content here</div> 
```

我的问题是如果我想从中删除所有类`progress-*`。

我需要删除它 X 行类型我得到了我的进步课程。

像这样

```
$('#progress').removeClass('progress-danger');
$('#progress').removeClass('progress-warning'); 
```

有人可以帮助我吗，

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-12T08:26:03.460

`.attr()`可以将函数作为第二个参数，因此使用它可以解析使用 RegExp、f.ex 找到的每个元素的类名：

```
$('#progress').attr('class', function() {
    return this.className.replace(/progress-[a-z]+/g,'');
});​ 
```

[http://jsfiddle.net/nVLzF/1/](http://jsfiddle.net/nVLzF/1/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-12T08:01:45.980

您可以将多个类名传递给 removeClass 函数：

```
$('#languageProgress').removeClass('progress-danger progress-warning'); 
```

[http://jsfiddle.net/nygSe/1/](http://jsfiddle.net/nygSe/1/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-12T08:06:28.397

您可以获得所有类名的数组并循环它们：

```
var $progress = $('#progress');
var classList = $progress[0].className.split(/\s+/);
$.each(classList, function(index, item){
    if (item.indexof('progress-') == 0) {
       $progress.removeClass(item);
    }
}); 
```

如果您不只是想检查单个元素，则可以使用@Alessandro Minoccheri 答案中的选择器并循环`.each()`：

```
var $progress = $("div[class^='progress-'],div[class*='progress-']");
$progress.removeClass(function(index, classList){
    var item = this;
    var removeClasses = [];
    $.each(classList.split(/\s+/), function(index, className){
        if (className.indexOf('progress-') === 0) {
            removeClasses.push(className);
        }
    });
    return removeClasses.join(' ');
});​ 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-09-12T08:04:52.983

```
$("div[class^='progress'],div[class*='progress']").removeClass(); 
```

这将删除类以“progress”开头的类元素和包含由“progress”声明的类的元素。

# ctags - ctags 用于在 vim 中自动完成 c++ 库函数

> ID：12383624
> 
> 赞同：-1
> 
> 时间：2012-09-12T07:59:06.000
> 
> 标签：ctags, omnicomplete

在学习了一些教程之后，我尝试使用丰富的 ctags 来自动完成例如 openGL 函数。我使用了命令

```
ctags -R --languages=C,C++ --c++-kinds=+p --fields=+iaS --extra=+q ./ 
```

在 freeglut.h、glew.h 等所在的目录中。然后将其复制到 .vimrc 文件中指向的目录（在我的 .vimrc 中使用 'set tags+=./myTag/tags'）当我尝试自动完成一些 glut 函数时，我没有列出函数参数，只有函数本身完成，但没有参数。

另一方面，当我将上面的 ctags 命令应用于主文件所在目录中的 .cpp 文件时，它会使用函数参数自动完成。我可能在这里遗漏了一些重要信息。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-12T18:50:20.707

首先，我厌倦了手动管理 ctags，为此我编写了插件[Indexer](http://goo.gl/IEmtZ)。它提供了无痛的自动标签生成，并使标签保持最新。有关详细信息，请参阅文章：[Vim：为您的项目提供方便的代码导航](http://dmitryfrank.com/articles/vim_project_code_navigation)，其中详细解释了 Indexer + Vimprj 的用法。

其次，对于代码自动完成，我建议你使用[clang_complete](http://goo.gl/Za7pT)。它通过真正的编译器提供**真正的**、完美的 C/C++/Objective-C 完成，而不是通过标签的丑陋方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-03-13T11:38:40.440

在您的 .vimrc 文件中，在添加标记文件之前，添加目录。因此，如果您在 $HOME/.vim/tags 目录中添加了标签，则需要添加以下行 set tags=~/.vim/tags

提到 OmniCppComplete 的部分（在您的 .vimrc 中）可能是这样的：

```
" configure tags - add additional tags here or comment out not-used ones
    " Setting the directory...
    set tags=~/.vim/tags 
        " Adding the tag files
        set tags+=~/.vim/tags/cpp
        set tags+=~/.vim/tags/gl
        set tags+=~/.vim/tags/sdl
        set tags+=~/.vim/tags/qt4
" set tags+=/home/yonatan/.vim/tags/standard 
" build tags of your own project with Ctrl-F12
map <C-F12> :!ctags -R --sort=yes --c++-kinds=+p --fields=+iaS --extra=+q .<CR>

" OmniCppComplete
let OmniCpp_NamespaceSearch = 1
let OmniCpp_GlobalScopeSearch = 1
let OmniCpp_ShowAccess = 1
let OmniCpp_ShowPrototypeInAbbr = 1 " show function parameters
let OmniCpp_MayCompleteDot = 1 " autocomplete after .
let OmniCpp_MayCompleteArrow = 1 " autocomplete after ->
let OmniCpp_MayCompleteScope = 1 " autocomplete after ::
let OmniCpp_DefaultNamespaces = ["std", "_GLIBCXX_STD"]
" automatically open and close the popup menu / preview window
au CursorMovedI,InsertLeave * if pumvisible() == 0|silent! pclose|endif
set completeopt=menuone,menu,longest,preview 
```

# javascript - 为什么本站无法通过JS访问元素？

> ID：12383626
> 
> 赞同：0
> 
> 时间：2012-09-12T07:59:10.447
> 
> 标签：javascript

我正在谈论的网站：[https ://sephir.ch/vfi/user/lernendenportal/index.cfm](https://sephir.ch/vfi/user/lernendenportal/index.cfm)

我想制作一个简单的书签，将我的电子邮件和密码填充到这两个文本框中。我的 JS 代码适用于任何其他网站，但不适用于这个网站。

HTML：

```
 <input type="text" name="email" size="40" maxlength="60" class="tdschwarz" autocomplete="off"> 
```

JS：

```
 javascript:function fill() {alert(document.getElementsByName("email")[0].value);} fill(); 
```

错误：

```
 Uncaught TypeError: Cannot read property 'value' of undefined 
```

你们有什么想法为什么它不起作用？提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-12T08:07:39.283

得到它`window.mainFrame.document`：

```
javascript:function fill() {alert(window.mainFrame.document.forms['login'].email.value);} fill(); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-12T08:01:46.543

因为email字段在一个框架内，所以`document`对象和字段的不一样。

为了访问该字段，首先您必须获取它所属的文档对象。检查 DOM，您必须访问`#mainFrame`框架：

```
var frame = document.getElementsByName("mainFrame")[0]; 
```

现在你可以得到元素：

```
var email = frame.contentDocument.getElementsByName("email")[0]; 
```

这适用于现代浏览器。在 IE8 和更早版本中，有一个很好的`document.frames`属性可以让事情变得更容易：

```
var email = document.frames.mainFrame.document.getElementsByName("email")[0]; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-12T08:05:21.307

输入在 iframe 中。您需要首先获取 iframe，然后获取输入元素。

```
document.getElementsByName('mainFrame')[0].contentDocument.getElementsByName('email')[0] 
```

# android - 如何在 android 上以编程方式从下载管理器将下载的文件保存在 sd 卡上

> ID：12383635
> 
> 赞同：4
> 
> 时间：2012-09-12T07:59:34.913
> 
> 标签：android, android-sdcard, android-internet

在我的应用程序中，我有下载（图像）功能，用于从 url 下载文件。下载发生应该显示在通知栏中，以便我使用下载管理器类下载文件。这工作正常，但下载的图像没有存储在 sdcard 中的任何位置。

我已经提到了下载管理器的[**网址**](http://android-er.blogspot.in/2011/07/sample-code-using-androidappdownloadman.html)。

**我的要求是我需要将下载图像保存到带有通知栏指示的 sdcard。** **在上面的链接上修改代码以在 sdcard 上保存图像**

我对上面链接中的代码有一些疑问，我可以使用相同的代码下载音频或视频文件吗？

请帮我。

编辑问题：

我试过了

```
 filepath = Environment.getExternalStorageDirectory().getPath()+"/download/cm.png";
        Uri destinationUri = Uri.parse(filepath);
        request.setDestinationUri(destinationUri); 
```

在单击按钮上的首选项管理器之前。但我无法在 sdcard 上获取文件。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-09-12T12:10:09.633

这是我用的。

```
 Uri downloadUri = Uri.parse(DOWNLOAD_FILE);
        DownloadManager.Request request = new DownloadManager.Request(downloadUri);
        request.setDescription("Downloading a file");
        long id =  downloadManager.enqueue(request.setAllowedNetworkTypes(DownloadManager.Request.NETWORK_WIFI |DownloadManager.Request.NETWORK_MOBILE)
                .setAllowedOverRoaming(false)
                .setTitle("File Downloading...")
                .setDescription("Image File Download")
                .setDestinationInExternalPublicDir(Environment.DIRECTORY_DOWNLOADS, "cm.png")); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-12T08:04:10.283

在您引用的代码中，文件在最后打开。此时，可以考虑将其复制到 SDCard 中。

否则（更好）使用[http://developer.android.com/reference/android/app/DownloadManager.Request.html](http://developer.android.com/reference/android/app/DownloadManager.Request.html) setDestinationUri(android.net.Uri) 指定您要下载文件的位置。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-05-02T13:16:20.320

```
 downloadmanager = (DownloadManager) context.getSystemService(Context.DOWNLOAD_SERVICE);
    Toast.makeText(context, "Downloading...", Toast.LENGTH_LONG).show();
    Uri uri = Uri.parse("---- url here ------");
    request = new DownloadManager.Request(uri);
    request.setAllowedNetworkTypes(DownloadManager.Request.NETWORK_WIFI | DownloadManager.Request.NETWORK_MOBILE);
    request.setAllowedOverRoaming(false);
    request.setTitle("---- title here ------");
    String mimeType = MimeTypeMap.getSingleton().getMimeTypeFromExtension(MimeTypeMap.getFileExtensionFromUrl("---- url here ------");
    request.setMimeType(mimeType);
    request.setDescription("---- descripation here ------");
    if("---- titlehere ------" != null){
        request.setDestinationInExternalPublicDir(Environment.DIRECTORY_DOWNLOADS, "---- title here ------");
    }

    request.setNotificationVisibility(DownloadManager.Request.VISIBILITY_VISIBLE_NOTIFY_COMPLETED);
    Long reference = downloadmanager.enqueue(request); 
```

# java - 在 Filter 阶段验证 Jersey 请求参数

> ID：12383637
> 
> 赞同：0
> 
> 时间：2012-09-12T07:59:38.637
> 
> 标签：java, validation, parameters, jersey

我正在寻找一种简单的方法来验证正确的正文/查询/表单/等参数是否传递到请求中。（并且还警告未知/不需要的参数）我知道我可以在实际资源类中注入请求的上下文并以这种方式检查所有参数，但是在过滤器中是否有这样做？

我已经研究了`UriInfo`and`ExtendedUriInfo`这将允许我获取资源类/方法但不显示参数。

`Resource`班级：

```
 @GET
    @Path("/{img_id}")
    @Produces("application/json")
    public Response getImgWithId(
        @PathParam("img_id") @DefaultValue("0") long imgId,
        @QueryParam("user_id") @DefaultValue("-1") long userId) 
```

我想确保用户传递一个`img_id`路径参数，而他们唯一可以传递的其他参数是`user_id`. 任何其他参数都应该收到警告。

我可以通过检查 vals/注入上下文在此方法中做到这一点，但是有没有办法`ContainerRequestFilter`在应用程序入口的实现中做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-12T14:54:21.663

我认为你可以继承 com.sun.jersey.spi.container.servlet.ServletContainer。

```
public class MyServletContainer extends
    com.sun.jersey.spi.container.servlet.ServletContainer {

@Override
public void service(javax.servlet.http.HttpServletRequest request,
        javax.servlet.http.HttpServletResponse response) {
    // do your check
    if (requestCheck()) {
        super.service(request, response);
    } else {
        //write your warning info in response...
    }
} 
```

}

在 web.xml 中：

```
<servlet>
    <servlet-name>RESTService</servlet-name>
    <servlet-class>com.test.MyServletContainer</servlet-class>
    <init-param>
        <param-name>com.sun.jersey.config.property.packages</param-name>
        <param-value>com.chihuo.resource</param-value>
    </init-param>
    <load-on-startup>1</load-on-startup>
</servlet>
<servlet-mapping>
    <servlet-name>RESTService</servlet-name>
    <url-pattern>/rest/*</url-pattern>
</servlet-mapping> 
```

# python - 管理页面django上的动态生成ForeignKey字段

> ID：12383638
> 
> 赞同：0
> 
> 时间：2012-09-12T07:59:40.647
> 
> 标签：python, autocomplete, django-admin

我有模型：

```
class CompanyInfo(models.Model):
    name = models.CharField('Имя компании',max_length=250)

class Staff(models.Model):
    company_name = models.ForeignKey(CompanyInfo)
    date = models.DateField( )
    name = models.CharField( max_length=30, )

class Relation(models.Model):
    company_name = models.ForeignKey(CompanyInfo)
    who = models.ForeignKey(Staff, related_name="who")
    with_whom = models.ForeignKey(Staff, related_name="with_whom")
    info = models.CharField( max_length=30, ) 
```

如何在管理页面上创建动态生成字段`WHO`和`WITH_WHOM`表单元素？我选择了`COMPANY_NAME`, 和字段`WHO`，并且`WITH_WHOM`只显示该公司的人员。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-12T09:24:42.237

您能否详细说明*动态生成字段*的含义？否则，恐怕很难帮助您，因为您的问题是什么并不清楚。

除此之外，我告诉你，你的模型设计很奇怪，尤其是你的`Relation`模型。如果您想在同一模型的两个实例之间建立多对一的关系（我认为这就是您要在这里完成的工作），那么您应该这样编写并摆脱您的`Relation`模型：

```
class Staff(models.Model):
    with_whom = models.ForeignKey('self') 
```

# asp.net - 使用列表将文本框中的多个值插入数据库

> ID：12383641
> 
> 赞同：0
> 
> 时间：2012-09-12T07:59:55.500
> 
> 标签：asp.net, sql

1.  这是所需的图像，我想通过此页面中的提交按钮通过姓名、员工代码和电子邮件 ID 插入多个值。

2.  我的数据库包含以下字段 ID（主键）、姓名（varchar 50）、员工代码（varchar 50）、电子邮件 ID（varchar 50）。

3.  在数据层，我的代码如下：

    ```
    public static bool AddParticipantlistemployeecode(DimensionQuestion dimension)
       {
           bool result;

           using (var helper = new DbHelper())
           {
               _cmdtext = "sp_NewGeneratedUniqueCode";

               var success = new SqlParameter("@Success", SqlDbType.Bit, 1,    ParameterDirection.Output, true, 0, 0,
                                              "Result", DataRowVersion.Default, 0);

               foreach (string s in dimension.CandidateName)
               {
                   if (s.Trim().Length > 0)
                   {
                       var parameter = new[]
                                    {
                                       // new   SqlParameter("@CompanyName",dimension.CompanyName  ),
                                        new SqlParameter("@CandidateName",s  ),
                                        new SqlParameter("@EmployeeCode",s  ),
                                        new SqlParameter("@EmailId",s  ),                                                                             
                                        success,
                                    };
                       helper.ExecuteScalar(_cmdtext, CommandType.StoredProcedure, parameter);
                   }
               }

               result = (bool)success.Value;
           }

           return result;
       } 
    ```

4.  在模型层：

    ```
    using System.Text;
    using System.Collections.Generic;
    namespace Cengrow.Survey.Core.Model
    {
    public class DimensionQuestion
    {
        public string CompanyName { get; set; }
       // public string DimensionNumber { get; set; }
        public List<string> CandidateName { get; set; }
        public List<string> EmployeeCode { get; set; }
        public List<string> EmailId { get; set; }
        public int DimensionName { get; set; }
        public string Section { get; set; }
        //public string Rating { get; set; }
        public List<string> Questions { get; set; }
        //public string Question2 { get; set; }
        //public string Question3 { get; set; }
        //public string Question4 { get; set; }
        //public string Question5 { get; set; }
        //public string Question6 { get; set; }
        //public string Question7 { get; set; }
        //public string Question8 { get; set; }
        //public string Question9 { get; set; }
        //public string Question10 { get; set; }
        //public string Question11 { get; set; }
        //public string Question12 { get; set; }
        //public string Question13 { get; set; }
        //public string Question14 { get; set; }
        //public string Question15 { get; set; }

    }
    } 
    ```

5.  最后在业务逻辑上的按钮点击：

    ```
    protected void Button1_Click(object sender, EventArgs e)
        {
            try
            {
                FillObjects();

                //if (InsertData.InsertCandidateCompany(_CandidateCompanyInformation )) 
                if (InsertData.AddParticipantlistemployeecode(_DimensionQuestion))
                {
                    ShowMessage("Information is saved");
                    //Reset();

                }
                else
                {
                    ShowMessage("Please try again");

                }
            }
            finally
            {
                _DimensionQuestion = null;

            }
        }

     private void FillObjects()
        {
            List<string> sp = new List<string>();
            _DimensionQuestion = new Cengrow.Survey.Core.Model.DimensionQuestion();
           // _DimensionQuestion.CompanyName = txtCompanyName.Text.Trim();

            sp.Add(txtName1.Text.Trim());
            sp.Add(txtName2.Text.Trim());
            sp.Add(txtName3.Text.Trim());
            sp.Add(txtName4.Text.Trim());
            sp.Add(txtName5.Text.Trim());
            sp.Add(txtName6.Text.Trim());
            sp.Add(txtName7.Text.Trim());
            sp.Add(txtName8.Text.Trim());
            sp.Add(txtName9.Text.Trim());
            sp.Add(txtName10.Text.Trim());
            sp.Add(txtName11.Text.Trim());
            sp.Add(txtName12.Text.Trim());
            sp.Add(txtName13.Text.Trim());
            sp.Add(txtName14.Text.Trim());
            sp.Add(txtName15.Text.Trim());
            sp.Add(txtName16.Text.Trim());
            sp.Add(txtName17.Text.Trim());
            sp.Add(txtName18.Text.Trim());
            sp.Add(txtName19.Text.Trim());
            sp.Add(txtName20.Text.Trim());
            sp.Add(txtName21.Text.Trim());
            sp.Add(txtName22.Text.Trim());
            sp.Add(txtName23.Text.Trim());
            sp.Add(txtName24.Text.Trim());
            sp.Add(txtName25.Text.Trim());
            _DimensionQuestion.CandidateName = sp;

            sp.Add(txtEmployeeCode1.Text.Trim());
            sp.Add(txtEmployeeCode2.Text.Trim());
            sp.Add(txtEmployeeCode3.Text.Trim());
            sp.Add(txtEmployeeCode4.Text.Trim());
            sp.Add(txtEmployeeCode5.Text.Trim());
            sp.Add(txtEmployeeCode6.Text.Trim());
            sp.Add(txtEmployeeCode7.Text.Trim());
            sp.Add(txtEmployeeCode8.Text.Trim());
            sp.Add(txtEmployeeCode9.Text.Trim());
            sp.Add(txtEmployeeCode10.Text.Trim());
            sp.Add(txtEmployeeCode11.Text.Trim());
            sp.Add(txtEmployeeCode12.Text.Trim());
            sp.Add(txtEmployeeCode13.Text.Trim());
            sp.Add(txtEmployeeCode14.Text.Trim());
            sp.Add(txtEmployeeCode15.Text.Trim());
            sp.Add(txtEmployeeCode16.Text.Trim());
            sp.Add(txtEmployeeCode17.Text.Trim());
            sp.Add(txtEmployeeCode18.Text.Trim());
            sp.Add(txtEmployeeCode19.Text.Trim());
            sp.Add(txtEmployeeCode20.Text.Trim());
            sp.Add(txtEmployeeCode21.Text.Trim());
            sp.Add(txtEmployeeCode22.Text.Trim());
            sp.Add(txtEmployeeCode23.Text.Trim());
            sp.Add(txtEmployeeCode24.Text.Trim());
            sp.Add(txtEmployeeCode25.Text.Trim());
            _DimensionQuestion.EmployeeCode = sp;

            sp.Add(TextBox1.Text.Trim());
            sp.Add(TextBox2.Text.Trim());
            sp.Add(TextBox3.Text.Trim());
            sp.Add(TextBox4.Text.Trim());
            sp.Add(TextBox5.Text.Trim());
            sp.Add(TextBox6.Text.Trim());
            sp.Add(TextBox7.Text.Trim());
            sp.Add(TextBox8.Text.Trim());
            sp.Add(TextBox9.Text.Trim());
            sp.Add(TextBox10.Text.Trim());
            sp.Add(TextBox11.Text.Trim());
            sp.Add(TextBox12.Text.Trim());
            sp.Add(TextBox13.Text.Trim());
            sp.Add(TextBox14.Text.Trim());
            sp.Add(TextBox15.Text.Trim());
            sp.Add(TextBox16.Text.Trim());
            sp.Add(TextBox17.Text.Trim());
            sp.Add(TextBox18.Text.Trim());
            sp.Add(TextBox19.Text.Trim());
            sp.Add(TextBox20.Text.Trim());
            sp.Add(TextBox21.Text.Trim());
            sp.Add(TextBox22.Text.Trim());
            sp.Add(TextBox23.Text.Trim());
            sp.Add(TextBox24.Text.Trim());
            sp.Add(TextBox25.Text.Trim());
            _DimensionQuestion.EmailId  = sp;
         } 
    ```

**数据未正确进入数据库**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-12T10:35:18.643

您正在向所有三个参数添加相同的值：

```
new SqlParameter("@CandidateName",s  ),
new SqlParameter("@EmployeeCode",s  ),
new SqlParameter("@EmailId",s 
```

在所有情况下，您都添加了“s”，即 CandidateName。

编辑：候选人应该是一个类：

```
public class Candidate
{
    public string Name { get; set; }
    public string EmployeeCode { get; set; }
    public string Email { get; set; }

    public Candidate(string name, string code, string email)
    {
        this.Name = name;
        this.EmployeeCode = code;
        this.Email = email;
    }
} 
```

那么您的 DimensionQuestion 应该包含一个

```
List<Candidate> Candidates 
```

代替

```
public List<string> CandidateName { get; set; }
public List<string> EmployeeCode { get; set; }
public List<string> EmailId { get; set; } 
```

然后你 FillObjects 方法将候选对象添加到候选列表

```
Candidates.Add(new Candidate(txtName1.Text.Trim(), 
                                txtEmployeeCode1.Text.Trim(), 
                                TextBox1.Text.Trim()));

Candidates.Add(new Candidate(txtName2.Text.Trim(), 
                                txtEmployeeCode2.Text.Trim(), 
                                TextBox2.Text.Trim())); 
```

最后你的数据层应该是：

```
foreach (Candidate candidate in dimension.Candidates)
           {
               if (!String.IsNullOrEmpty(candidate.Name))
               {
                   var parameter = new[]
                                {
                                   // new   SqlParameter("@CompanyName",dimension.CompanyName  ),
                                    new SqlParameter("@CandidateName",candidate.Name  ),
                                    new SqlParameter("@EmployeeCode",candidate.Code  ),
                                    new SqlParameter("@EmailId",candidate.Email  ),                                                                             
                                    success,
                                };
                   helper.ExecuteScalar(_cmdtext, CommandType.StoredProcedure, parameter);
               }
           } 
```

# asp.net - ASP.Net 中的 Crystal Report 传递参数值并且没有有效的报表源

> ID：12383645
> 
> 赞同：1
> 
> 时间：2012-09-12T08:00:14.670
> 
> 标签：asp.net, crystal-reports

我无法在 ASP.Net 网页上显示 Crystal 报表。该网站只是一个内部网站，因此您会看到我已将文件路径编码到该网站中。我想我已经很接近让这个工作了，但我显然错过了一些东西。任何人都可以帮忙吗？

他是我的代码：

```
void BindReport()
{
    ReportDocument rd = new ReportDocument();

    //Report is saved on an external server which I have full access too
    rd.Load(@"\\MyServer\Reports\MyReport.rpt");
    rd.SetDatabaseLogon("UserName", "Password", "MyServer", "MyDatabase", true);
    //The Report has 2 parameter and links directly to a stored procedure on a SQL Server
    rd.SetParameterValue("@uspDateFrom", new DateTime(2012, 05, 01));
    rd.SetParameterValue("@uspDateTo", new DateTime(2012, 05, 31));
    CrystalReportViewer1.ReportSource = rd;
    CrystalReportViewer1.ReuseParameterValuesOnRefresh = true;
    CrystalReportViewer1.RefreshReport();
}

//I call my report on a button click
protected void buttonPreviewReport_Click(object sender, EventArgs e)
{
    BindReport();
} 
```

当报告尝试运行时，我会弹出一个对话框，询问我的参数值，即使我已经传递了它们！？即使我在对话框提示中输入它们，我也会收到一条消息，指出没有可用的有效报告源。

有人有什么想法吗？

我正在使用 ASP.Net 4.0

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-12T08:06:15.507

我在使用 Crystal Report 时遇到过同样的问题。

```
 ParameterFields paramFields = new ParameterFields();

  ParameterField paramField = new ParameterField();

  ParameterDiscreteValue discreteVal = new ParameterDiscreteValue();

  paramField.ParameterFieldName = "@examid";// This is how you can send Parameter Value to the Crystal Report

 // Set the first discrete value and pass it to the parameter.
   discreteVal.Value = ddlAllExam.SelectedValue;//Value from DropDown

   paramField.CurrentValues.Add(discreteVal);

   paramFields.Add(paramField);

   CrystalReportViewer1.ParameterFieldInfo = paramFields;

   string datasource = System.Configuration.ConfigurationManager.AppSettings["Data Source"].ToString();

   string Database = System.Configuration.ConfigurationManager.AppSettings["Database"].ToString();

   string Userid = System.Configuration.ConfigurationManager.AppSettings["Userid"].ToString();

   string Password = System.Configuration.ConfigurationManager.AppSettings["Password"].ToString();

    ReportDocument report = new ReportDocument();

    report.Load(Server.MapPath("~/Reports/AllExamReport.rpt"));//Here you can give the Path of external Server

    report.SetDatabaseLogon(Userid, Password, datasource, Database);

    CrystalReportViewer1.ReportSource = report; 
```

希望对你有帮助。！！！

# jquery - 动态分面搜索

> ID：12383646
> 
> 赞同：0
> 
> 时间：2012-09-12T08:00:16.853
> 
> 标签：jquery, asp.net, linq

我被分配对空缺职位进行概述。我创建了一个名为 Job 的类，我加载了一个包含 SQL Server 中所有打开的作业的列表。我的老板希望我进行动态多面搜索。

例如，工作具有功能（销售经理）、功能区域（销售）、位置（华盛顿）...列表（工作）是动态的，过滤器选项是动态的（我的工作对象的不同属性）。

我将如何以最好的方式编写代码？由于我的控件是动态的，因此重新创建 On_Init 中选中的所有动态复选框会很痛苦。

IMO 客户端将是最好的方法（我有一个所有工作，并根据 html 类制作脚本过滤器）。请注意，可能有约 500 个职位空缺。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-12T12:11:53.800

我最终使用了这个 JavaScript 库，它使用了 Underscore.js 和 jQuery。 [http://eikes.github.com/facetedsearch/](http://eikes.github.com/facetedsearch/)

这不是我需要的 100%，我需要添加一些样式支持并允许输出到不同的元素。

# lua - 更改以在电晕中显示对象位置

> ID：12383652
> 
> 赞同：0
> 
> 时间：2012-09-12T08:00:45.407
> 
> 标签：lua, coronasdk, moai

我是新来编程这个问题可能听起来很简单。我创建了一个对象作为一个名为 box 的模块

```
box = {}
m={}
m.random = math.random

function box:new(x,y)
     box.on=false
     local box = display.newRect(0,0,100,100)
     box:setFillColor(m.random(120,200),m.random(120,200),m.random(120,200))
     box.x = x
     box.y = y
     box.type = "box"

     return box
end

return box 
```

在我的 main.lua 中，我想创建尽可能多的盒子，就像冒险游戏一样，我如何切换两个盒子的位置，例如我点击其中一个，然后它被选中，然后我只需点击另一个他们互相改变位置。提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-12T17:57:04.157

我不知道 Corona，但你正在做的事情的一般逻辑是这样的：

*   添加一个事件处理程序，允许您检测何时单击框。
*   添加一些跟踪所选框的方法。
*   单击框时：
    *   如果尚未选择框，则选择当前框
    *   如果之前选择了另一个框，则与当前框交换
    *   如果单击了已选中的框，则忽略（或关闭选中状态）

* * *

一般想法（不确定这是否是有效的 Corona 事件处理，但应该让你接近）：

```
box = {}
m={}
m.random = math.random

-- track the currently selected box
local selected = nil

function box:new(x,y)
     box.on=false
     local box = display.newRect(0,0,100,100)
     box:setFillColor(m.random(120,200),m.random(120,200),m.random(120,200))
     box.x = x
     box.y = y
     box.type = "box"
     function box:touch(event)
         if not selected then
             -- nothing is selected yet; select this box
             selected = self
             -- TODO: change this box in some way to visually indicate that it's selected
         elseif selected == self then
             -- we were clicked on a second time; we should probably clear the selection
             selected = nil
             -- TODO: remove visual indication of selection
         else
             -- swap positions with the previous selected box, then clear the selection
             self.x, self.y, selected.x, selected.y 
                 = selected.x, selected.y, self.x, self.y
             selected = nil
         end
     end
     return box
end 
```

# java - Apache hadoop map减少任务冻结

> ID：12383655
> 
> 赞同：2
> 
> 时间：2012-09-12T08:01:17.463
> 
> 标签：java, apache, ubuntu, hadoop

在我设置 hadoop 多节点集群后，我确实运行了著名的 wordcount map reduce 示例。但我没有得到任何输出，只是冻结了任务。在这里我得到什么..

```
12/09/12 13:01:29 INFO input.FileInputFormat: Total input paths to process : 3
12/09/12 13:01:29 INFO util.NativeCodeLoader: Loaded the native-hadoop library
12/09/12 13:01:29 WARN snappy.LoadSnappy: Snappy native library not loaded
12/09/12 13:01:30 INFO mapred.JobClient: Running job: job_201209121300_0002
12/09/12 13:01:31 INFO mapred.JobClient:  map 0% reduce 0%
12/09/12 13:01:45 INFO mapred.JobClient:  map 33% reduce 0%
12/09/12 13:01:48 INFO mapred.JobClient:  map 100% reduce 0%
12/09/12 13:01:54 INFO mapred.JobClient:  map 100% reduce 11% 
```

但是master和slave的log都没有异常。但是在从属任务跟踪器中，日志会连续打印。

```
2012-09-12 13:23:14,573 INFO org.apache.hadoop.mapred.TaskTracker:     attempt_201209121300_0002_r_000000_0 0.11111112% reduce > copy (1 of 3 at 0.04 MB/s) > 
```

在此之前我确实配置了hadoop单节点，运行上面的任务，我得到了成功的输出。

ps：1.我有两个节点，作为主从工作。两个 ip 地址都在两个节点的 /etc/hosts 中。
2.可以ssh到每个master和slave，无需密码。（无密码登录）
3\. 在 master 中运行 start-dfs.sh 后，它也在从机中运行（我用 jps 检查）
4\. 这是我遵循的教程。 [http://www.michael-noll.com/tutorials/running-hadoop-on-ubuntu-linux-multi-node-cluster/](http://www.michael-noll.com/tutorials/running-hadoop-on-ubuntu-linux-multi-node-cluster/)
5.两台机器都禁用了防火墙。

我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-13T05:45:46.073

最后我成功了。这就是我所做的。我在运行 map reduce 作业时检查了错误的日志。每个作业 hadoop 都会生成一些作业日志，这些日志位于 logs/userlogs/job_id/* 中。因此，当我检查这些日志时，我终于可以看到一些异常，即 UnknownHostException。所以我发现了我的问题。将带有 ipadress 的从属计算机名称添加到我的主控 /etc/host 并重新启动 hadoop map reduce 作业。
我们可以在 UI 中查看上述作业日志
1.首先转到 jobtracker.jsp
2.单击作业3.
您可以查看当前正在运行的内容或单击 map 或 reduce 并查看日志。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-12T20:45:43.213

我会考虑玩`mapred.reduce.slowstart.completed.maps`物业。默认情况下，它设置为**5%**，这意味着在完成 5% 的映射器任务时开始随机播放。您的映射器*似乎*已完成，但即使进度条显示 100% ，最后一个映射器也可能以某种方式卡住。在这种情况下，洗牌也会挂起，因为它正在等待最后一张地图完成。

除此之外，您还可以更改`mapred.reduce.parallel.copies`（随机复制时的并行复制线程数）以查看它是否更适合您的硬件。

# jquery - Select2 加载远程数据与占位符下拉列表的混合

> ID：12383656
> 
> 赞同：7
> 
> 时间：2012-09-12T08:01:20.613
> 
> 标签：jquery, ajax, jquery-select2

我是 Javascript、jQuery、Ajax 和 JSON 世界的新手。

我需要做的是混合 SELECT2 可用的 2 个选项

占位符

```
$("#e2_2").select2({
    placeholder: "Select a State"
}); 
```

和

加载远程数据

```
$("#e6").select2({
     placeholder: "Search for a movie",
     minimumInputLength: 1,
     ajax: { // instead of writing the function to execute the request we use Select2's convenient helper
         url: "http://api.rottentomatoes.com/api/public/v1.0/movies.json",
         dataType: 'jsonp',
         data: function (term, page) {
             return {
                 q: term, // search term
                 page_limit: 10,
                 apikey: "ju6z9mjyajq2djue3gbvv26t" // please do not use so this example keeps working
             };
         },
         results: function (data, page) { // parse the results into the format expected by Select2.
             // since we are using custom formatting functions we do not need to alter remote JSON data
             return {
                 results: data.movies
             };
         }
     },
     formatResult: movieFormatResult, // omitted for brevity, see the source of this page
     formatSelection: movieFormatSelection, // omitted for brevity, see the source of this page
     dropdownCssClass: "bigdrop" // apply css that makes the dropdown taller
 }); 
```

从 Select 网站可以看出，这些选项完全不同。当我单击加载远程数据字段时，它会打开一个搜索选项。但我不想那样。我希望下拉菜单中包含 PlaceHolder 示例中的可用选项。

在占位符示例中，下拉列表中可用的选项在 HTML 中进行了硬编码。我需要的是，当您打开时，它会转到 json 文件并返回 json 上可用的信息。

理想的做法是将占位符 Select2 的 UI 与另一个 Select2 示例中的加载远程日期的功能（在服务器上获取 json）一起使用。

任何想法？如果 2 不能组合，我愿意接受任何超快速的 Ajax 解决方案。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-11-15T22:12:22.027

如果您只需要通过 ajax 将数据加载到您的 select2（无需通过远程 api 搜索），您可以这样做：

```
$.get( "/path/to/your/data.json", function(data){window.ajaxData=data;});
$("#e2_2").select2({data: window.ajaxData, placeholder: "Select a State"}); 
```

（使用全局变量通常是不好的做法，但这只是一个例子）

# c# - 'out' 参数与泛型/模板参数：最佳实践

> ID：12383664
> 
> 赞同：4
> 
> 时间：2012-09-12T08:01:55.793
> 
> 标签：c#, generics, out

我正在做一些数据解析并遇到了这个问题。假设我们想将一些解析`byte[]`为结构。我想将执行此操作的 C# 代码包装到静态方法中。

原始代码（我正在修改一段）阅读：

```
public class DiagnosticUndefined : BaseDiagnostic
{
    StructDiagnosticUndefined bufferAllocation;

    public DiagnosticUndefined(byte[] buff)
    {
        bufferAllocation = (StructDiagnosticUndefined)DiagnosticUtil.parseStruct(buff, typeof(StructDiagnosticUndefined));
    }
} 
```

我想为此使用通用函数，但如何进行？考虑：

```
public static class Util {
    public static T Convert<T>(byte[] data) {...}
    public static void Convert<T>(byte[] data, out T structure) {...}
} 
```

第一个更符合正常过程，但缺点是编译器无法推断数据类型，因此我的调用将如下所示：

```
SomeStruct s;
s = Util.Convert<SomeStruct>(data); 
```

另一种方法是：

```
SomeStruct s;
Util.Convert(data, out s); 
```

我喜欢第二种方法，因为它将类型推断委托给编译器，即更少的运行时错误。另一方面，我倾向于避免使用 MSDN 支持的 out 参数：http: [//msdn.microsoft.com/en-us/library/ms182131.aspx](http://msdn.microsoft.com/en-us/library/ms182131.aspx)。我完全赞成“不要以复杂的方式解决简单问题”的范式，但这次我无法区分......

任何提示，意见？

**更新**

代码示例被简化了，变量实际上是一个成员，所以我不能“单行”。我还使用编组将数据转换为结构：

```
GCHandle handle = GCHandle.Alloc(data, GCHandleType.Pinned);
T output = (T)Marshal.PtrToStructure(handle.AddrOfPinnedObject(), typeof(T));
handle.Free(); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-12T08:06:45.197

我会将第一个修改为：

```
SomeStruct s = Util.Convert<SomeStruct>(data); 
```

然后继续。

原因是阅读和维护的代码更少。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-12T08:05:53.577

**编辑由@Nebula 建议**

第一种情况，似乎完全有效：

```
var s = Util.Convert<SomeStruct>(data); 
```

`out`当您希望从通话中返回某些内容时使用，但*不*用于声明性目的。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-12T08:12:02.943

两种方法，无需创建`SomeStruct`对象：

```
 SomeStruct s = new SomeStruct(); 
```

因为我相信你在`Convert`方法中创建了这个对象。对于第二种方法，正确性应该是：

```
SomeStruct s;
Util.Convert(data, out s); 
```

因为`out`不需要初始化参数。如果您只是更改属性`s`而不更改指针或在内部创建对象`Convert`，`out`则也不需要：

```
SomeStruct s = new SomeStruct();
Util.Convert(data, s); 
```

恕我直言，方法1应该更好，更具可读性。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-12T08:09:39.750

我很确定在这种情况下使用泛型不会给您带来太多优势。但如果你坚持... 有什么问题

```
var s = Util.Convert<SomeStruct>(d); 
```

另外，转换和解析不是一回事，不要互换使用。

# ruby-on-rails - 如何在没有插件的情况下在 Rails 中上传文件

> ID：12383668
> 
> 赞同：0
> 
> 时间：2012-09-12T08:02:28.273
> 
> 标签：ruby-on-rails, file-upload, ruby-on-rails-3.2

我对 Rails 非常陌生，我一直在研究如何将文件上传到 Rails 中的目录我发现了这个[Upload Files](https://stackoverflow.com/questions/9568753/how-to-upload-files-in-rails)但我不太了解它，我无法让它工作。

这是我的观点：

```
<%= form_for :upload, :html => {:multipart => true} do |f| %>
  <%= f.file_field :my_file %>
  <%= f.submit "Upload" %>
<% end %> 
```

这是我的控制器：

```
def upload
  path = File.join("public/folder", upload["datafile"].original_filename)
  File.open(path, "wb") { |f| f.write(upload["datafile"].read) }
end 
```

我也尝试过[Rails Guides的上传文件部分](http://guides.rubyonrails.org/form_helpers.html)

它说堆栈级别太深，有人可以帮助并尝试尽可能简单地向我解释这一点吗？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-12T10:21:27.007

在 ROR 中上传类似

```
name =  upload['datafile'].original_filename
directory = "public/data"
# create the file path
path = File.join(directory, name)
upload_file = File.new(upload['datafile'], "rb").read
# write the file
File.open(path, "wb") {|f| f.write(upload_file) }; 
```

使用它可能会对您有所帮助............

# java - 在 Spring 的 WebApplicationInitializer 中排序侦听器

> ID：12383671
> 
> 赞同：3
> 
> 时间：2012-09-12T08:02:44.547
> 
> 标签：java, spring

我有一个自定义的 ServletContextListener 用于初始化和启动 Cron4J 调度程序。

```
public class MainListener implements ServletContextListener {
    @Value("${cron.pattern}")
    private String dealHandlerPattern;

    @Autowired
    private DealMoqHandler dealMoqHandler;
} 
```

如图所示，我正在自动装配侦听器中的一些对象，并希望 Spring 管理侦听器的实例化。我正在使用程序化 web.xml 配置`WebApplicationInitializer`，但到目前为止，Listener 没有被自动装配（每当我尝试访问所谓的自动装配对象时都会出现 NullPointerExceptions）。

添加 ContextLoaderListener 后，我已经尝试添加我的客户侦听器，如下所示：

```
public class CouponsWebAppInitializer implements WebApplicationInitializer {
    @Override
    public void onStartup(ServletContext container) throws ServletException {
        AnnotationConfigWebApplicationContext rootContext = new AnnotationConfigWebApplicationContext();
        rootContext.register(SpringAppConfig.class);

        // Manage the lifecycle of the root application context
        container.addListener(new ContextLoaderListener(rootContext));

        container.addListener(new MainListener()); //TODO Not working
    } 
```

我检查了这些过去的问题[Spring - Injecting a dependency into a ServletContextListener](https://stackoverflow.com/questions/4746041/spring-injecting-a-dependency-into-a-servletcontextlistener) and [dependency injection servlet listener](https://stackoverflow.com/questions/5511152/dependency-inject-servlet-listener)并尝试在我的侦听器的 contextInitialized 方法中实现以下代码：

```
 WebApplicationContextUtils
        .getRequiredWebApplicationContext(sce.getServletContext())
        .getAutowireCapableBeanFactory()
        .autowireBean(this); 
```

但是，我只是得到以下异常：

```
Exception sending context initialized event to listener instance of class com.enovax.coupons.spring.CouponsMainListener: java.lang.IllegalStateException: No WebApplicationContext found: no ContextLoaderListener registered?
at org.springframework.web.context.support.WebApplicationContextUtils.getRequiredWebApplicationContext(WebApplicationContextUtils.java:90) [spring-web-3.1.1.RELEASE.jar:3.1.1.RELEASE] 
```

在添加我的侦听器之前，如何确保 Spring 已经完成了实例化？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-12T08:28:02.947

我的错。事实证明，原始帖子中的代码是正确的，并且正在以正确的顺序添加侦听器。

问题是我用`@WebListener`注释（Servlet 3.0）注释了我的自定义侦听器。这导致 web 应用程序忽略了我`addListener()`在 WebApplicationInitializer 中的代码，并在 Spring 的 ContextLoaderListener 的 AHEAD 之前实例化了自定义侦听器。

以下代码块说明了错误代码：

```
@WebListener /* should not have been added */
public class CouponsMainListener implements ServletContextListener {
    @Autowired
    private Prop someProp;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-12T08:28:56.723

您不能`new`与 Spring bean 一起使用 - Java 不关心 Spring，并且 Spring 无法修改`new`操作符的行为。如果您自己创建对象，则需要自己连接它们。

您还需要小心在初始化期间执行的操作。当使用 Spring 时，使用这个（简化的）模型：首先，Spring 创建所有的 bean（调用`new`所有它们）。然后它开始连接它们。

因此，当您开始使用自动装配字段时，您必须格外小心。您不能总是立即使用它们，您需要确保 Spring 完成初始化所有内容。

在某些情况下，您甚至不能在`@PostProcess`方法中使用自动装配字段，因为 Spring 由于循环依赖关系而无法创建 bean。

所以我的猜测是“每当我尝试访问时”为时过早。

出于同样的原因，你不能`WebApplicationContextUtils`在`WebApplicationInitializer`: 它还没有完成设置 Spring，但是。

# c# - 类的布局

> ID：12383673
> 
> 赞同：1
> 
> 时间：2012-09-12T08:02:49.957
> 
> 标签：c#

C# 中的类是否有明确的推荐布局？

这是一个布局问题的例子......

```
 public class DinnerParty {

      //>>>>should the const fields that are initiallised with a value be at the top?
    private const int CostOfFoodPerPerson = 25;

      //>>>>should the constructor always be placed near the top of the class?
    public DinnerParty(int numberOfPeople, bool Health, bool fancyDecorations) {
        NumberOfPeople = numberOfPeople;
        this.fancyDecorations = fancyDecorations;
        Health = healthyOption;
        CalculateCostOfDecorations(fancyDecorations);
    }

      //>>>>backing private fields should always precede properties that use them?
    private int numberOfPeople;
    public int NumberOfPeople {
        get {
            return numberOfPeople;
        } 
        set {
            CalculateCostOfDecorations(fancyDecorations);
            numberOfPeople = value;
        }
    }

      //>>>>where do these fields go?
    private bool fancyDecorations;
    public decimal costOfBeveragePerPerson;

    private bool healthyOption;
    public bool HealthyOption{
        set {
            value =  healthyOption;
            if (healthyOption) {
                costOfBeveragePerPerson = 5.0M;
            } else {
                costOfBeveragePerPerson = 20.0M;
            }
        }
    }

     //>>>>should methods be placed after the constructor and all properties?
    public decimal costOfDecorations = 0;
    void CalculateCostOfDecorations(bool fancy) {
        if (fancy) {
            costOfDecorations = (numberOfPeople * 15.0M) + 50.0M;
        } else {
            costOfDecorations = (numberOfPeople * 7.50M) + 30.0M;
        }
    }

    public decimal CalculateCost(bool xfancy, bool xhealthyOption) {
        decimal totalCost = (numberOfPeople * (CostOfFoodPerPerson + costOfBeveragePerPerson)) + costOfDecorations;
        if (xhealthyOption) {
            return totalCost * 0.95M;
        } else {
            return totalCost;
        }
    }
 } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-12T08:08:24.400

StyleCop 有以下规则：

*   在类、结构或接口中，元素必须按以下顺序定位：

    *   常量字段
    *   字段
    *   构造函数
    *   终结器（析构函数）
    *   代表们
    *   活动
    *   枚举
    *   接口
    *   特性
    *   索引器
    *   方法
    *   结构
    *   课程
*   相同类型的元素必须按访问级别按以下顺序定位：

    *   上市
    *   内部的
    *   受保护的内部
    *   受保护
    *   私人的
*   所有静态元素必须放在所有相同类型的实例元素之上。

有关详细信息，请参阅[文档](http://www.stylecop.com/docs/Ordering%20Rules.html)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-12T08:16:15.643

我倾向于：

*   活动
*   字段（包括常量）
*   属性（包括索引器和自动属性）
*   构造函数
*   公共/受保护/内部/私有方法。
*   嵌套类型

也就是说，我尽量尊重文件的顺序，因为不必要地移动东西会导致**合并痛苦**。

我不确定是否有明确的方法来编写课程内容；即使有一点点盐，归根结底，这也只是某人的意见。保持一致，并尽量保持代码整洁（我个人讨厌代码文件中到处都是随机空格，因为按`Enter`了太多次）。

[帮助合并保持可口性的另一个重要因素是对代码格式进行一致的设置（行内与换行括号，单行 if 语句周围的括号等）。]

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-12T08:10:31.310

就个人而言，我...

*   变量声明
*   方法
*   属性...按此顺序。

其他人有自己的喜好。我能想到的唯一硬性规则是**保持一致**——不管你的偏好如何，如果你清楚且可预测，那么下一个人就更容易接手。

# c# - 绑定多个 rdlc 报告时的页码

> ID：12383675
> 
> 赞同：1
> 
> 时间：2012-09-12T08:02:55.353
> 
> 标签：c#, reporting-services, rdlc, page-numbering

我正在尝试将多个 rdlc 报告绑定到一个 pdf 文件中，但是在使用表达式时：

```
="Page " & Globals.PageNumber & " of " & Globals.TotalPages" 
```

它不会同步/继续使用页码，对于每个新的 rdlc，它都会中断并重新开始页码。有没有办法解决？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-12T12:47:35.390

你试过 Globals.OverallPageNumber 和 Globals.OverallTotalPages 吗？

# ruby-on-rails - 在 Ruby 中为属性添加方法

> ID：12383679
> 
> 赞同：1
> 
> 时间：2012-09-12T08:03:08.173
> 
> 标签：ruby-on-rails, ruby, methods, metaprogramming

如何在 Ruby 中为实例的属性定义方法？

假设我们有一个名为 的类`HtmlSnippet`，它扩展了 Rails 的 ActiveRecord::Base 并有一个属性`content`。而且，我想`replace_url_to_anchor_tag!`为它定义一个方法并以下列方式调用它；

```
html_snippet = HtmlSnippet.find(1)
html_snippet.content = "Link to http://stackoverflow.com"
html_snippet.content.replace_url_to_anchor_tag!
# => "Link to <a href='http://stackoverflow.com'>http://stackoverflow.com</a>"

# app/models/html_snippet.rb
class HtmlSnippet < ActiveRecord::Base    
  # I expected this bit to do what I want but not
  class << @content
    def replace_url_to_anchor_tag!
      matching = self.match(/(https?:\/\/[\S]+)/)
      "<a href='#{matching[0]}'/>#{matching[0]}</a>"
    end
  end
end 
```

作为`content`String 类的实例，重新定义 String 类是一种选择。但我不想这样做，因为它会覆盖所有 String 实例的行为；

```
class HtmlSnippet < ActiveRecord::Base    
  class String
    def replace_url_to_anchor_tag!
      ...
    end
  end
end 
```

请问有什么建议吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-12T10:31:53.790

您的代码无法正常工作的原因很简单 - 您正在使用`nil`在执行上下文中的 @content（这`self`是类，而不是实例）。所以你基本上是在修改 nil 的特征类。

因此，您需要在设置时扩展 @content 的实例。有几种方法，有一个：

```
class HtmlSnippet < ActiveRecord::Base

  # getter is overrided to extend behaviour of freshly loaded values
  def content
    value = read_attribute(:content)
    decorate_it(value) unless value.respond_to?(:replace_url_to_anchor_tag)
    value
  end

  def content=(value)
    dup_value = value.dup
    decorate_it(dup_value)
    write_attribute(:content, dup_value)
  end

  private
  def decorate_it(value)
    class << value
      def replace_url_to_anchor_tag
        # ...
      end
    end
  end
end 
```

为了简单起见，我省略了“nil 场景”——您应该以`nil`不同的方式处理值。但这很简单。

另一件事是你可能会问为什么我`dup`在 setter 中使用。如果代码中没有`dup`，则以下代码的行为可能是错误的（显然这取决于您的要求）：

```
x = "something"
s = HtmlSnippet.find(1)
s.content = x

s.content.replace_url_to_anchor_tag # that's ok
x.content.replace_url_to_anchor_tag # that's not ok 
```

您不仅要扩展x.content `dup`，还要扩展您分配的原始字符串。

# javascript - NodeJS dateFormat 不起作用

> ID：12383681
> 
> 赞同：0
> 
> 时间：2012-09-12T08:03:27.913
> 
> 标签：javascript, mysql, node.js, date, date-format

当我从我的 MySQL 数据库中检索 aa 列时（使用 mysql 节点模块），我得到一个无用的日期，格式如下：

2012 年 9 月 12 日星期三 08:44:26 GMT+0100（GMT 夏令时间）

当我尝试对返回的结果使用 dateformat 模块时，我只会得到“无效日期”。

我希望将日期格式化为 MySQL 格式化的方式，即 YYYY-MM-DD HH:MM:SS

这是我的脚本：

```
var lastChanged = '' ;
var lastUpdated = '' ;
var poll ;
function DBPoller()
{
poll = setTimeout(function(){
    connection.query('SELECT enquiryAdded FROM _table_updates', function(e, row) {
        if(e)
        {
            console.log('An error occured: '+e)
        }
        else
        {
            addedDate = dateFormat(row[0], 'yyyy-mm-dd hh:MM:ss') ;
            if(addedDate != lastChanged)
            {
                console.log('An enquiry was just added at '+addedDate+', the one before this was at '+lastChanged) ;
                lastChanged = addedDate ;
            }
        }
    });
    DBPoller() ;
}, 2000)
} 
```

以上给了我“无效日期”错误。

我错过了什么？

* * *

嗨，mysql 列数据类型是 DATETIME。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-12T08:13:08.110

我找到了！

MySQL 的结果是一个 JSON 字符串：

```
{ enquiryAdded: Wed Sep 12 2012 08:44:26 GMT+0100 (GMT Daylight Time) } 
```

所以我所做的就是访问该值：

var addedDate = dateFormat(row[0] **.enquiryAdded** , 'yyyy-mm-dd hh:MM:ss') ;

这就是为什么我得到“无效日期”！

# html - 使内部链接的 z-index 仅高于父容器

> ID：12383683
> 
> 赞同：0
> 
> 时间：2012-09-12T08:03:33.123
> 
> 标签：html, css, z-index

我想知道这样的事情是否可能：

```
<div class="arrow-left" style="z-index:2; position: fixed; height: 100%; width: 100%;"></div>
<div class="meta" style="z-index:1; position: relative;">
    <div class="description">description <a href="link" style="z-index:3; position: relative;">link</a> description</div>
</div> 
```

我希望`z-index: 3;`链接位于其上方`arrow-left`但`description`下方。这可以通过上述 HTML 结构实现吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-12T10:04:54.497

此方法的验证使用如下

```
<div class="hold" style="z-index:0; position:relative"><!--Outdiv set relative and z-index to 0 here -->
   <div class="arrow-left" style="z-index:2; position: fixed; height: 100%; width: 100%;"></div>
   <div class="meta" style="z-index:1; position: relative;">
       <div class="description">description <a href="link" style="z-index:3; position: relative;">link</a> description
   </div>
</div> 
```

这样，您可以通过将外部 div 设置为相对，然后将其作为主楼层（如 z-index 0）为您的索引设置接地 0，这样您以后可以根据 z-index 避免其他故障

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-12T09:57:10.873

你的问题在逻辑上是错误的！

只需将 (.arrow-left) 放在 (.meta) 中，它就会起作用。

```
<div class="meta" style="z-index:1; position: relative;">
<div class="arrow-left" style="z-index:2; position: fixed; height: 100%; width: 100%;"></div>
<div class="description">description <a href="link" style="z-index:3; position: relative;">link</a> description</div>
</div> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-12T09:22:06.897

`position: relative;`与_`z-index`

# c# - 更改 MS SQL 服务器版本时软件无法运行

> ID：12383688
> 
> 赞同：1
> 
> 时间：2012-09-12T08:03:47.440
> 
> 标签：c#, sql, sql-server

我在我的软件 (OS-XP) 中使用 SQL Server 2005 数据库 - 服务器。当我将服务器更改为 SQL Server 2008 (OS-windows 7) 时，该软件无法运行。

我调试了程序并`Array index out of bounds exception`在代码的一部分中发现，当我更改该代码时它工作正常，谁能告诉我问题的原因是什么？

```
String cnnStr = String.Format("Data Source = {0}; Initial Catalog = {1}; Integrated Security = SSPI; persist security info=False; Trusted_Connection=Yes",ServerName, Databasae);

sqlConnection = new SqlConnection(cnnStr);
sqlConnection.Open(); 
```

**原始代码**

```
 Server server = new Server(new ServerConnection(sqlConnection));
 Database db = server.Databases[Databasae];
 Table Table = new Table(db, TableName);
 Column TimeColumn = new Column(Table, "DateTime");
 TimeColumn.DataType = DataType.DateTime;
 TimeColumn.Nullable = false;
 Column ValueColumn = new Column(Table, "Value");
 ValueColumn.DataType = DataType.Float;
 ValueColumn.Nullable = false;
 Table.Columns.Add(TimeColumn);
 Table.Columns.Add(ValueColumn);
 Table.Create(); 
```

**新代码**

```
 StringBuilder query = new StringBuilder();
 query.Append("CREATE TABLE ");
 query.Append(TableName);
 query.Append(" (  [DateTime] DateTime , Value float(10) )");

 SqlCommand sqlQuery = new SqlCommand(query.ToString(), sqlConnection);
 SqlDataReader reader = sqlQuery.ExecuteReader();

 reader.Close(); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-12T08:23:02.810

您需要将 SMO SDK 更新到 SQL 2008 版本并删除所有 2005 引用，因为您不再使用 SQL 2005。

您可以在此处阅读有关该主题的更多信息：

[http://msdn.microsoft.com/en-us/library/ms162129.aspx](http://msdn.microsoft.com/en-us/library/ms162129.aspx)

# c++ - 如何使用嵌套的 getline() 函数来处理字符串中的特殊字符和标点符号？

> ID：12383690
> 
> 赞同：0
> 
> 时间：2012-09-12T08:03:54.210
> 
> 标签：c++, string, stringstream, getline, punctuation

我正在使用 getline() 函数来获取句子中的特殊字符和标点符号，这样当我显示句子中包含的单词时，它除了 az（或 AZ）之外没有任何其他字符。问题是它会变得很长，而且我认为它不是很有效。我想知道我是否可以有效地做到这一点。我正在使用 Dev-C++，下面的代码是 C++。谢谢你的帮助。

```
#include <string>
#include <iostream>
#include <ctype.h>
#include <sstream>

using namespace std;

int main()
{
 int i=0;
 char y; 
 string prose, word, word1, word2;
 cout << "Enter a sentence: ";
 getline(cin, prose);

 string mot;
 stringstream ss(prose);

 y=prose[i++];
 if (y=' ')   // if character space is encoutered...

  cout<<endl << "list of words in the prose " << endl;
  cout << "---------------------------"<<endl;
  while(getline(ss, word, y))  //remove the space...
   {

      stringstream ss1(word);      

     while(getline(ss1, word1, ','))  //remove the comma...
       {

          stringstream ss2(word1);  //remove the period
          while(getline(ss2, word2, '.'))
           cout<< word2 <<endl; //and display just the word without space, comma or period.
       }
   }      

     cout<<'\n';
    system ("Pause");
    return 0;
} 
```

＃＃＃＃＃＃＃＃＃＃＃＃＃＃＃＃＃＃＃＃＃＃＃＃＃＃＃＃＃输出

输入一句话：什么？当我说：“妮可，给我拖鞋，给我睡帽，”那是散文吗？

## 散文中的单词列表

什么？当我说：“妮可把我的拖鞋给我，给我我的睡帽”那是散文吗？

按任意键继续 。. .

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-12T08:16:10.903

使用[`std::remove_if()`](http://en.cppreference.com/w/cpp/algorithm/remove)：

```
std::string s(":;[{abcd 8239234");

s.erase(std::remove_if(s.begin(),
                       s.end(),
                       [](const char c) { return !isalpha(c); }),
        s.end()); 
```

如果您没有 C++11 编译器，请定义谓词而不是使用 lambda（在线演示[http://ideone.com/NvhKq](http://ideone.com/NvhKq)）。

# android - 应用程序的预定义操作。从联系人链接到我的应用程序

> ID：12383692
> 
> 赞同：4
> 
> 时间：2012-09-12T08:03:59.893
> 
> 标签：android, dialog

我想编写与联系人连接的应用程序。

设想 ：

1.  输入电话联系人
2.  我们选择联系项目![在此处输入图像描述](../Images/9dac142e71c748b437e1a7775f16466f.png)

3.  我的应用程序的图标应该出现在 QuickAction 对话框中。

4.  我单击我的应用程序图标，应用程序从联系人记录中的数据开始。

我必须添加到 AndroidManifest 中才能做到这一点？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-12T09:12:40.500

只有当您的应用在用户设备上的唯一应用中能够处理所需类型的内容时，这种行为才是可能的。例如，如果您想使用“发送短信”或“拨打电话”的内容类型 - 您的应用很可能不是设备上唯一可以处理此类操作的应用（还有股票电话拨号器和短信应用）。

无论如何，您始终可以将您的应用程序添加到当用户单击该快速操作时将出现**的应用程序列表。**它看起来像这样：

![内容类型的应用程序列表](../Images/c29ebca5cee58f9c4e96b9fb0753e4a9.png)

为此，您需要：

*   在您的清单文件中指定您的应用程序能够处理所需的操作，例如“发送短信”。为此，您需要向您的活动添加意图过滤器，在这种情况下您希望被调用：

    ```
    <intent-filter>
        <action android:name="android.intent.action.SENDTO" />
        <category android:name="android.intent.category.DEFAULT" />
        <category android:name="android.intent.category.BROWSABLE" />
        <data android:scheme="sms" />
        <data android:scheme="smsto" />
    </intent-filter> 
    ```

*   在您的目标活动中添加代码，以处理所需的内容类型。在您的目标 Activity`onCreate()`方法中，或`onNewIntent()`从调用 Intent 的方法查询数据字符串参数。这是一些示例代码来演示一般想法：

    ```
    public class MyActivity extends Avtivity {
    @Override
    protected void onNewIntent(Intent intent) {
        super.onNewIntent(intent);
        String dataStr = intent.getDataString();
        // do some processing with dataStr 
    }

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        Intent callIntent = getIntent();
        String dataStr = callIntent.getDataString();
        // do some processing with dataStr 
    }
    } 
    ```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-09-12T08:48:29.573

为您的应用添加此意图过滤器，使其对所有联系人可见。

```
 <intent-filter>
        <action android:name="android.intent.action.VIEW" />
        <category android:name="android.intent.category.DEFAULT" />
        <data android:mimeType="vnd.android.cursor.item/name" />
    </intent-filter> 
```

更改 mimetype，以便只有具有特定数据的联系人才有您的活动。

例如，如果您希望您的活动仅显示给使用电子邮件的联系人，则将 mimetype 更改为`vnd.android.cursor.item/email_v2`. [您可以从DataColumns](http://developer.android.com/reference/android/provider/ContactsContract.DataColumns.html)的子类中获取 mimetype 名称

# sql - 更新表 pt2

> ID：12383693
> 
> 赞同：-2
> 
> 时间：2012-09-12T08:04:07.873
> 
> 标签：sql, database, vba, ms-access

> **可能重复：**
> [使用表单中的文本框在表中输入数据](https://stackoverflow.com/questions/12364967/entering-data-in-a-table-using-a-text-box-in-a-form)

这个问题与我的上一个问题类似，但在这种情况下，我希望能够使用表单中的文本框从表格中删除某些金额。

同样的场景，用户输入他们想要从表中删除的数据。

例如;
用户已从库存中取出 15 个 MEC-0004，并希望更新表。他们打开（进/出）表格，选择零件（使用组合框），然后通过在文本框中输入 15 并按保存或回车来更改表格中的数量。

最后一个问题的 SQL 代码是这样的：

```
UPDATE table_to_update
SET column_to_update=value_to_enter
WHERE criteria_column=criteria_value 
```

`VBA`如果有人指出我正确的方向，我也可以尝试

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-12T08:21:08.507

`set`您可以在子句中引用值本身。因此，通过相对值更改库存量的查询如下所示：

```
UPDATE  stock_table
SET     amount = amount - @Amount
WHERE   stock_id = @StockId 
```

# php - 在PHP中生成具有多种颜色的随机棋盘图像

> ID：12383696
> 
> 赞同：0
> 
> 时间：2012-09-12T08:04:11.680
> 
> 标签：php, image-processing

我有以下 PHP 方法，可以在新用户首次注册时生成个​​人资料图像，然后再上传自己的图像。它所做的只是为它们创建一个色彩鲜艳的正方形 - 在显示没有个人资料照片的用户列表时，使界面看起来更有趣。

我怎样才能适应这种方法，以便它创建一个随机颜色的棋盘？像这样的东西：http: [//krazydad.com/bestiary/thumbs/random_pixels.jpg](http://krazydad.com/bestiary/thumbs/random_pixels.jpg)

```
public function generate_random_image($filename, $w = 200, $h = 200, $chosen_color = NULL) {

        if(!$chosen_color) {
            $color_options = Array("#6f0247", "#FF0569", "#FFF478", "#BAFFC0", "#27DB2D", "#380470", "#9D69D6");
            $random        = rand(0,sizeof($color_options));
            $chosen_color  = $color_options[$random];       
        }

        $rgb   = self::hex2rgb($chosen_color);              
        $image = imagecreatetruecolor($w, $h);

        for($row = 1; $row <= $h; $row++) {
            for($column = 1; $column <= $w; $column++) {    

               $color = imagecolorallocate ($image, $rgb[0] , $rgb[1], $rgb[2]);

               imagesetpixel($image,$column - 1 , $row - 1, $color);
            }

            $row_count++;
        }

        $filename = APP_PATH.$filename;

        imagepng($image, $filename);

        return $chosen_color;
    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-12T08:32:53.317

你改变一下怎么样

```
$color = imagecolorallocate ($image, $rgb[0] , $rgb[1], $rgb[2]); 
```

到

```
$color = imagecolorallocate ($image, rand(0,255), rand(0,255), rand(0,255)); 
```

然后，每个像素都有自己的颜色。只需绘制一个小图像，然后按 200% 或 300%（或其他任意数字）缩放，您就会得到像您链接的图像一样漂亮的大块像素。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-12T08:39:17.873

在迭代`$row`s 和`$column`s 时，您应该将步长增加到所需的像素大小，并在每次迭代时选择另一种颜色。

像素宽度 = 20x20 的示例：

```
 $pixel = 20;
    for($row = 0; $row <= $h / $pixel; $row++) {
        for($column = 0; $column <= $w/ $pixel; $column++) {    
           $rgb   = self::hex2rgb($color_options[rand(0,sizeof($color_options))]); 
           $color = imagecolorallocate ($image, $rgb[0] , $rgb[1], $rgb[2]);

           imagefilledrectangle(
               $image,
               $column*$pixel,
               $row*pixel,
               $column*$pixel+$pixel,
               $row*pixel+$pixel, 
               $color
           );
        }
    } 
```

# python - Tornado 安全 cookie 过期（又名安全会话 cookie）

> ID：12383697
> 
> 赞同：7
> 
> 时间：2012-09-12T08:04:15.370
> 
> 标签：python, cookies, tornado

如何在 Tornado 中设置一个在浏览器关闭时过期的安全 cookie？
如果我使用`set_cookie`我可以在不传递额外参数的情况下执行此操作（我只是设置了 cookie），但是如果我必须使用`set_secure_cookie`呢？

我几乎尝试了一切：

*   什么都不通过：过期设置为其默认值，即 1 个月
*   传递整数值：该值被认为是天，即 1 表示 1 天
*   传递一个浮点值：它可以工作，例如设置 0.1 这意味着将近一个半小时

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-09-12T09:32:39.023

在我看来，你真的走在正确的轨道上。你尝试越来越低的值，cookie 的过期时间越来越短。

传递`expires_days=None`以使其成为会话 cookie（在浏览器关闭时过期）。

# css - css规则应用顺序

> ID：12383699
> 
> 赞同：4
> 
> 时间：2012-09-12T08:04:26.963
> 
> 标签：css, color-scheme

这篇文章（尽管它是基于一个给我的工作带来麻烦的事实）更多的是一个哲学问题，而不是一个真正的问题提交。

我偶然发现了以下令人费解的案例...

这不是一个真正的问题，因为我（认为我）理解这种现象，它是如何被统治的以及它所产生的影响。

我做了以下示例：http: [//jsfiddle.net/q7xAn/](http://jsfiddle.net/q7xAn/)尽可能描述性。

在这种情况下，为什么（Ô神为什么）跨度有黄色背景？

我不知道哪个规则适用它，但更多的是：以哪个扭曲的名义（与我一直假设的相反），最后一个声明的规则是否适用于第一个声明的规则？

我的意思是“.red span”和“.yellow span”具有相同的复杂性。

*   相同长度
*   给定位置的每个项目具有相同的权重/重要性

它们在 css 选择器自然顺序中是等价的。

那么在哪个适用的问题上应该占主导地位的是哪个规则最接近样式项目。在我的示例中，跨度应使用“.red span”（最接近规则）而不是“.yellow span”（这也是正确的，但被“.red span”“覆盖”）设置样式。

这种行为是否有任何“历史”、“政治”、“哲学”或任何其他原因？一些 DOCTYPES （可能是？）可能会迫使我关注的行为？我可以向 w3c 提交请求吗（为什么不呢？）？如何 ？任何信息，建议，不同的观点，都非常欢迎！

提前谢谢大家。

* * *

```
Edit note : 
```

我讨厌引用自己的话，但在对 aymeric 的评论中，我想出了一个很好的方法来解释我的提问到底是关于什么的。

* * *

一般来说，让我烦恼的是，如果我有，假设有 7 种配色方案（每种彩虹色一个）。

还假设我是一个（比如说）10 人的团队的 CSS 制作者。

我希望他们（我的团队）能够嵌套颜色方案的块。

*   在一种情况下，红色块将容纳黄色和洋红色块。
*   在另一种（有趣的）情况下，需要有 7 层嵌套（红色嵌套在橙色中，黄色嵌套在 ...）。

我现在无法知道将需要事先使用哪些用途。

当前的 CSS 经验行为将迫使我**每次**出现新的*嵌套*需求时都修改我的 CSS，并最终导致令人讨厌的过度臃肿的规则。
就可维护性而言，这是一个暴行:'(

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-12T08:51:39.107

它被称为`specificity`css。如果两个选择器与特定元素匹配并且它们具有相同`weight`的 ，则出现的选择器将`later`应用于该元素。

阅读[此](http://coding.smashingmagazine.com/2007/07/27/css-specificity-things-you-should-know/)内容以获取更多信息。

您的选择器`.red span`和`.yellow span`两者都具有权重`0,1,1`（我提到的链接将详细解释如何计算权重），因此应用了最后一条规则。

另请阅读W3 中的[这篇](http://www.w3.org/TR/CSS21/cascade.htm)文章，这将更好地解释事情。

希望所有这些都有意义:)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-12T08:32:11.970

Here is an [article](http://www.techrepublic.com/article/css-101-handling-multiple-rules-for-the-same-element/6164216) (not really recent but explicit) which explains (if I didn't misunderstood your questions) answers your looking for.

For example, if you replace:

```
.red span, .red{
background-color: #F00
} 
```

by:

```
.yellow .red span, .red{
    background-color: #F00
} 
```

Your background will be red.

Regards.

# php - 在带有一个或多个 AND 的查询中使用多个 OR

> ID：12383700
> 
> 赞同：-3
> 
> 时间：2012-09-12T08:04:38.070
> 
> 标签：php, mysql, operators, conditional

我有一个关于 mysql 查询的问题。

我想要实现的是编写一个查询：

```
SELECT * 
FROM Table
WHERE Col1 = 'something' AND Col2 = 'something' AND 
         ( Col3 = 'Something' OR Col3 = 'Something'); 
```

所以它看起来和你在 php 中使用条件语句一样：（注意 or ;) 周围的大括号）

```
if ( $i == 'something' and ($k == 'something' || $k == 'something') ){
//Do something
} 
```

或者也许有另一种/更好的方法来做到这一点？

（**编辑**）我现在知道查询是正确的。谢谢你向我确认。以下是一直失败的查询的一部分。

```
SELECT * 
FROM Table
WHERE Condition1 = 'something'
AND(
 Enddate = DATE(DATE_ADD(NOW(), INTERVAL -1 DAY)) 
OR 
 Enddate = DATE(DATE_ADD(NOW(), INTERVAL -2 DAY)) 
) 
```

可能很明显，但我似乎无法找到它。

（**已解决**）

嘿对不起这个问题。我刚刚发现查询在上述代码之后的某处模糊了一个右括号。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-12T08:10:39.373

`OR`您可以使用`IN`从句代替编写条件

```
SELECT * 
FROM Table
WHERE Col1 = 'something1' AND 
      Col2 = 'something2' AND 
      Col3 IN('Something3','Something4'); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-12T08:25:12.160

```
SELECT * 
FROM Table
WHERE Condition1 = 'something'
AND(
 Enddate = DATE(DATE_ADD(NOW(), INTERVAL -1 DAY)) 
OR 
 Enddate = DATE(DATE_ADD(NOW(), INTERVAL -2 DAY)) 
) 
```

不需要“as kuur”

# iphone - 如何在 iphone/ipad 的横向使用加速度计

> ID：12383701
> 
> 赞同：0
> 
> 时间：2012-09-12T08:04:43.530
> 
> 标签：iphone, cocos2d-iphone, box2d-iphone

我正在开发我想在加速度计倾斜方向移动 CCSprite 的游戏。我参考了本教程[http://www.raywenderlich.com/457/intro-to-box2d-with-cocos2d-tutorial-bouncing-balls](http://www.raywenderlich.com/457/intro-to-box2d-with-cocos2d-tutorial-bouncing-balls)但我不清楚。请任何人帮助我。

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-12T09:51:16.480

参考这个解决方案。我在横向游戏中将精灵从左向右移动时使用了相同的方法。：[请参阅此处的答案](https://gamedev.stackexchange.com/questions/33412/accelerometer-to-move-player-left-and-right/33427#33427)

横向模式的唯一变化是使用加速度计 y 代替 x。

```
-(void) accelerometer:(UIAccelerometer *)accelerometer didAccelerate:(UIAcceleration *)acceleration
{   
    if(self.isGamePaused || self.isGameOver)
        return;

    float deceleration = 1.0f, sensitivity = 15.0f, maxVelocity = 450;

    if(sGame.IsIpad)
    {
        sensitivity = 14.0f;
        maxVelocity = 850;
        deceleration = 1.5f;
    }

    // adjust velocity based on current accelerometer acceleration
    //    vel.x = vel.x * deceleration + acceleration.x * sensitivity;

    AppController *app = (AppController*)[UIApplication sharedApplication].delegate;

    float velocity_x = self.gameActor.velocity.x ;

    self.gameActor.accelVal = ABS(acceleration.y);

    if(app.orient == UIInterfaceOrientationLandscapeLeft)
    {
        velocity_x = velocity_x * deceleration + acceleration.y * sensitivity;        
    }
    else 
    {
        velocity_x = velocity_x * deceleration + (-acceleration.y) * sensitivity;
    }

    //limit the maximum velocity of the player sprite, in both directions (positive & negative values)
    velocity_x = fmaxf(fminf(velocity_x, maxVelocity), -maxVelocity);

    self.gameActor.velocity  = ccp(velocity_x, self.gameActor.velocity.y);

} 
```

# image - 如何使用 GeekTool 显示带有 Base64 字符串的文件中的图像？

> ID：12383705
> 
> 赞同：0
> 
> 时间：2012-09-12T08:05:02.563
> 
> 标签：image, base64, geektool

我的 base64 字符串文件位于[http://domain.com/image.txt](http://domain.com/image.txt)

```
data:image/jpeg;base64,/9j/4AAQSkZJRgABAgAAZABkAAD/7AARRHVja3kAAQAEAAAAPAAA/+4ADkFkb2JlAGTAAAAAAf/bAIQABgQEBAUEBgUFBgkGBQYJCwgGBggLDAoKCwoKDBAMDAwMDAwQDA4PEA8ODBMTFBQTExwbGxscHx8fHx8fHx8fHwEHBwcNDA0YEBAYGhURFRofHx8fHx8fHx8fHx8fHx8fHx8fHx8fHx8fHx8fHx8fHx8fHx8fHx8fHx8fHx8fHx8f/8AAEQgAJAAjAwERAAIRAQMRAf/EAHMAAAIDAQEAAAAAAAAAAAAAAAUHAgMEBggBAQAAAAAAAAAAAAAAAAAAAAAQAAEDAgQDBQYDCQAAAAAAAAIBAwQRBQASEwYhFBVRYSIyQvAxQXGBFlJiU3KSwkNjJDQHFxEBAAAAAAAAAAAAAAAAAAAAAP/aAAwDAQACEQMRAD8A9G7k3KFqRiPHa5u6zS04UNFy5iX1GXpBO3Ac1uWczZmGZG6Zsua/KqrcKCpR4yKNKjUSElpX1FVcAOjuW67ben3rbr02zTLYhEYk+bjRZRz0USJwVqOA6fYu7jvG3Ql3DK3Jbf5V008pGqogL9cyIvfgOqzd2AU7d0cnXV+9FMCDIOWvTJUlKxhBoSbRh1U8qOtnnEu2uA2bgZut9jA1frvaIFuaNHVKMeo4qp8RI1SmAFS7izOtybQ2RGN6Ka/3s9UUc/HxERLSgrTxEtOHuwBG5NR7FbLTsy3OI/dpcpl2YYemhoZEtKfgoncmAYXVYmrpVXPzPJ+7+Zp6tP3MAq7IEluI1FjOMhMLUjrGmihxJasmupGczeR0CVTAuHAvjgLJDlpgurz+wXAkoviVpTJpV7RyiSUwGkL/AL7uLKQtuWBLPGXhqi3koi/nMQFPoNcBZDgWfYjTl2vMhLjuSQK6LAqpFmLvXitfcpr8kwGbkN8crmyLzOn1/wAi/wCdzGXRrX9D04AlvG0jZrhJnvRVm7aupCVzYDgcd9OAyG14ZS+tO34YCNsiboKKj20dytXCBTwR5lCcBE4ZFqhKlO+mAm7bP9wT00n58aG0vrZUBX6KIkWAjZ9oWW1XQSkSOu7iJUJG1qrbS/qO8Sog9pLXsTAMOkjtTy08vr7flgJSNHSPWy6VFz56ZaU41rgE9uX/AJ/1E+hc71Gvj6ZXTr3Zv4OGApYzVHrP3JyXDNWuWn5qeKmAZm0PtTkF+3tPR4a2Wurm/q18eb9rAG+Hf7e3ywH/2Q== 
```

那么如何使用 GeekTool 将此图像显示到我的桌面上呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-12T08:55:30.600

```
<?php
$img = "t.php";
$fh = fopen($img,'r');
$data = fread($fh,filesize($img ));
fclose($fh);

header('Content-Type: image/jpeg');
readfile($data);
?> 
```

现在我使用 PHP :D

# unix - unix对没有分隔符的列进行排序

> ID：12383706
> 
> 赞同：8
> 
> 时间：2012-09-12T08:05:08.007
> 
> 标签：unix, sorting

我想根据特定列使用 Unix 脚本对文件内容进行排序：

例如：在第 3 列对以下文件进行排序：

```
ax5aa 
aa3ya 
fg7ds 
pp0dd 
aa1bb 
```

将导致

```
pp0dd
aa1bb
aa3ya
ax5aa
fg7ds 
```

我尝试过 sort -k 3,3，但它只是对 3d 组单词（分隔符 = SPACE）进行排序。

有什么方法可以让 unix sort 以我喜欢的方式运行，还是应该使用其他工具？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-10-01T14:53:00.070

```
$ sort --key=1.3,1.3 inputfile
pp0dd
aa1bb
aa3ya
ax5aa
fg7ds 
```

排序的手册页：

*[...]*

*-k, --key=POS1[,POS2]*

*在 POS1（原点 1）开始一个键，在 POS2 结束它（默认行尾）*

*[...]*

*POS 为 F[.C][OPTS]，其中 F 为字段编号，C 为字段中的字符位置；两者都是原点 1。如果 -t 和 -b 均无效，则字段中的字符从前一个空格的开头开始计数。OPTS 是一个或多个单字母排序选项，它覆盖该键的全局排序选项。如果没有给出键，则使用整行作为键。*

使用--key=1.3,1.3，您说只有一个字段（整行）并且您正在比较该字段的第三个字符位置。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-09-12T08:12:01.543

排序前使用**sed**创建列

```
$ echo "ax5aa 
aa3ya 
fg7ds 
pp0dd 
aa1bb" | sed 's/\(.\)/\1 /g' | sort -t ' ' -k3,3 | tr -d ' '

pp0dd
aa1bb
aa3ya
ax5aa
fg7ds 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-12T08:14:47.577

```
cat inputfile | perl -npe 's/(.)/ $1/g' | sort -k 3,3 | perl -npe 's/ //g' 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-12T08:20:02.960

我会直接坚持使用 perl 并定义一个比较器

```
echo $content | perl -e 'print sort {substr($a,3,1) cmp substr($b,3,1)} <>;' 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2022-01-31T20:32:38.920

对于在用作键的线段之前有一个或多个空格的行，我遇到了同样的问题。在要排序的文本中永远不存在的字段分隔符使整行成为一个字段，因此您可以使用例如：

```
sort -n -t\| -k1.3,1.3 inputfile 
```

# c++ - 联合内的位域对齐

> ID：12383708
> 
> 赞同：4
> 
> 时间：2012-09-12T08:05:19.847
> 
> 标签：c++, gcc, unions, bit-fields, memory-layout

我对以下代码如何在内存中布局感到有些困惑：

```
struct Thing
{
    union
    {
        unsigned value:24;
        uint8_t bytes[3];
    };
    Thing(int v)
            :value(v)
    {}

    void foo()
    {
        printf("Thing %p value=%d !\n", this, value);
    }

} __attribute__((__packed__)); 
```

在 Linux 上的 gcc 3.3、4.3 或 4.6 上（没有我能想到的任何特殊选项 - 只有 4.6 上的“-Wall -g”），结构的大小始终为 4：

```
$ pahole ./union
struct Thing {
        union {
                unsigned int               value;                /*           4 */
                unsigned char              bytes[3];             /*           3 */
        };
[...] 
```

我们在这里有一些类似的代码，其中我们在结构中具有无符号值：24，并且有人添加了联合并无意中将结构的大小从 3 个字节增加到了 4 个字节。如果我尝试将联合定义为“打包”，也会发生同样的事情 - 大小仍然是 4。这种行为是否符合 C++ 规范？会有什么解释？

稍后编辑：将“C 规范”替换为“C++ 规范”。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-12T08:39:52.940

您错过了匿名工会的打包属性。考虑这个例子：

```
#define PACKED __attribute__((__packed__))
struct S1 { unsigned value:24; } PACKED ;
struct S2 { union { char a[3]; unsigned value:24; };  } PACKED ;
struct S3 { union { char a[3]; unsigned value:24; } PACKED ;  };

int main() {
   std::cout << sizeof(S1) << std::endl;
   std::cout << sizeof(S2) << std::endl;
   std::cout << sizeof(S3) << std::endl;
} 
```

输出：

```
3
4
3 
```

打包属性有点奇怪，我总是尝试测试所有可能的组合以获得正确的结果。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-12T08:44:07.620

好吧，首先，`__attribute__((__packed__))`它是一个 gcc 扩展，因此该标准没有任何关于可能发生或可能不会发生的事情的说法。

然而，一般来说，允许编译器在位字段之间插入它认为合适的任何填充。特别是，我看到编译器给出了这个：

```
 struct
 {
     short a : 8;
     int b : 8;
 } 
```

将 b 在 32 位边界上对齐。

基本上，如果您使用位域，您就只能靠自己了。不能保证字段或填充的顺序。您唯一的保证是位域的大小。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-12T08:47:49.140

这个问题被标记为 C++，但你提到了 C 规范。AFAIK，在这方面 C 和 C++ 是有区别的。在 C 中，位域只能是整数类型，而 C++ 允许任何整数类型。

由于位域映射到整数类型，我希望位域的大小始终为 1、2 或 4。

因此，这会给你 sizeof 3：

```
struct Thing
{
    union
    {
        // without 'short' int would be assumed -> 4 bytes
        unsigned short value:15; // -> maps to short -> 2 bytes
        uint8_t bytes[3];        // -> 3 bytes, so the whole union is 3 bytes long
    };
} 
```

使用`value:24`，它将始终映射到最接近的整数类型，即整数。

# php - PHP Javascript显示/隐藏按钮不起作用

> ID：12383710
> 
> 赞同：0
> 
> 时间：2012-09-12T08:05:26.417
> 
> 标签：php, javascript

这是我的 php 代码：

```
<?php
require('connection.php');
$query="select title,content from blogs";
echo '<html><head>';
echo '<link rel="stylesheet" href="blog.css" />';
echo '<script type="text/javascript" src="blog.js"></script></head><body>';
$i=0;
if($result=$mysqli->query($query))
{
while($news=$result->fetch_row())
{
echo "<br /><br /><strong>". $news[0]."</strong><br /><br />";
if(strlen($news[1])>60)
{
    $d=0;
    $content=explode(" ",$news[1]);
    foreach($content as $c)
    {
        if($d<=60)
        {
            echo $c." ";
            $d++;
        }
        else
        {
            if($d==61)
            {

                echo "<div id=a$i style='visibility:hidden'>";
                echo "<a href='#' onclick='toggle(a".$i.")' style='visibility:visible'>Show/Hide</a>";

                $i++;

                $d++;
            }
            echo $c." ";
            $d++;
            if($d==count($content)+1)
            {
                echo "</div>";
            }

        }

    }
}
else
echo $news[1]."<br /><br />";

}
$result->close();
echo "</body></html>";

}
?> 
```

这是我的 JavaScript 代码：

```
function toggle(id)
{

    //document.getElementById('mcontent').value=x++;
    //if(x%2==0)
    document.getElementById(id).style.visibility="visible";
    //else
    //document.getElementById('mcontent').style.visibility="hidden";
}; 
```

显示隐藏按钮不起作用。我的策略是使用显示隐藏按钮限制包含超过 60 个单词的文本。一旦用户单击按钮，隐藏的 div 就会变得可见并且包含额外的文本（即 60 个单词之后的文本count).Div 元素应始终以字母开头，因此我在此之前附加了字母“a”。请帮我解决这个问题。

注意： **不需要 Jquery 解决方案或建议。我只需要调试上面的代码。**

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-12T08:08:26.553

您在调用`toggle`.

这将调用`toggle(a0)`而不是`toggle("a0")`.

尝试这个 ：

```
echo "<a href='#' onclick=\"toggle('a".$i."')\" style='visibility:visible'>Show/Hide</a>"; 
```

因为我总是觉得处理这种级别的复叠引号很痛苦，所以我更喜欢避免 PHP 中的内联 javascript。即使没有 jQuery，您也可以推迟添加处理程序，使用`document.getElementById('...').onclick=...`.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-12T08:10:57.020

这一行的`onclick`属性：

```
echo "<a href='#' onclick='toggle(a".$i.")' style='visibility:visible'>Show/Hide</a>"; 
```

...需要在参数周围加上双引号，`toggle()`以便浏览器将其接收为`onclick='toggle("a1")'`：

```
echo "<a href='#' onclick='toggle(\"a".$i."\")' style='visibility:visible'>Show/Hide</a>"; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-12T08:09:52.433

```
echo "<div id='a" . $i . "' style='visibility:hidden'>"; 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-12T08:10:24.787

in 参数`toggle(a".$i.")`是一个字符串。您应该添加字符串分隔符。而且，你应该在你的 HTML 标签中为你的属性添加引号：

```
echo '<div id="' . a$i . '" style="visibility:hidden">'; 
```

# mysql - mysql Master-Master Replication 或 drdb heartbeat

> ID：12383713
> 
> 赞同：0
> 
> 时间：2012-09-12T08:05:38.833
> 
> 标签：mysql, database, performance, heartbeat, drbd

我是数据库复制新手。

我计划在我们的数据库系统中添加复制和故障转移功能。

我已经阅读了大量关于横向扩展或横向扩展数据库系统的文档，我有点困惑。

目前我只有一个数据库存储在一台服务器中，并且我计划将它复制到另一台新服务器中。

我认为有两种解决方案。

第一个是创建主-主复制并处理负载均衡器以管理故障转移。

第二个是创建一个带心跳的DRBD，带主动-被动数据库，创建一个指向心跳虚拟IP的从站。

我看起来第一个解决方案比第二个更容易，但我想知道你的意见。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-12T08:11:20.420

是的，使用主-主复制并使用负载平衡是最好的选择，但它始终取决于您使用的应用程序类型。

而如果您想记录当时的用户日志，则创建虚拟 IP 是不错的选择。

希望这些信息对您的进一步发展有所帮助。

# android - 在 Android 中实现导航

> ID：12383715
> 
> 赞同：1
> 
> 时间：2012-09-12T08:05:43.967
> 
> 标签：android, android-mapview

我想在我的 android 应用程序中实现导航功能，以便用户可以设置目的地并且应用程序引导他完成整个过程。它与 Android 中的导航应用程序完全一样，除了我需要在他的旅行途中导航期间添加更多信息（比如我们公司在他附近的分支机构位置）。

那么，我可以在本地安装的导航应用程序上构建此功能吗？如果没有，我可以使用 MapViews 在我的应用程序中实现相同的功能吗？是否有一些 API 可用？

如果没有，最好的方法是什么？

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-12T08:43:05.533

您无法在 android 导航应用程序之上构建信息。您可以制作自己的导航应用程序，但这将是一项非常艰巨的工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-12T08:41:51.143

看看[这个](https://stackoverflow.com/a/12320714/1159056)答案，它一定会回答你的问题！

**简短回答：**您可以使用[OpenTripPlanner for Android](https://github.com/CUTR-at-USF/OpenTripPlanner-for-Android/wiki)通过他们的 REST API 获取路由。

# function - 在 emacs 中创建切换功能

> ID：12383717
> 
> 赞同：2
> 
> 时间：2012-09-12T08:06:10.487
> 
> 标签：function, emacs, transparency, toggle

例如，如何获得一个切换透明度的功能？切换的可能候选者可能是 0%、85%、100% 或者可能只是其中的 2 个......

```
 (defun transparency-toggle ()
    "Toggle transparency."
    (interactive)
    (add-to-list 'default-frame-alist '(alpha 85 50))
    ) 
```

什么不见​​了？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-12T08:20:46.730

以下代码取自[Emacs wiki](http://www.emacswiki.org/emacs/TransparentEmacs)

```
(eval-when-compile (require 'cl))
(set-frame-parameter nil 'alpha '(100 100))

(defun toggle-transparency (unused)
  (interactive "P")
  (if (/=
       (cadr (frame-parameter nil 'alpha))
       100)
      (set-frame-parameter nil 'alpha '(100 100))
    (set-frame-parameter nil 'alpha '(85 50))))

(global-set-key (kbd "C-c t") 'toggle-transparency) 
```

编辑：回答你的问题。如果您不初始化帧参数`alpha`，它将为零。因此，如果您不想拥有代码：

```
(set-frame-parameter nil 'alpha '(100 100)) 
```

你可以在函数toggle-transparency中检查它

```
(defun toggle-transparency (unused)
  (interactive "P")
  (let ((curr-alpha (frame-parameter nil 'alpha)))
    (if (or (null curr-alpha) (/= (cadr curr-alpha) 100))
        (set-frame-parameter nil 'alpha '(100 100))
      (set-frame-parameter nil 'alpha '(50 50))))) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-12T12:49:22.580

这是一个环形版本，可让您循环遍历各种 alpha，并在使用前缀参数调用时直接跳转到最后一个或第一个 alpha：

```
(defun ring-transparency (arg)
  (interactive "P")
  (let* ((ring '(100 50 25 0))
         (current (frame-parameter nil 'alpha))
         (last (car (last ring)))
         (next (if arg
                   (if (equal current (car ring)) last (car ring))
                 (or (cadr (member current ring)) (car ring)))))
    (set-frame-parameter nil 'alpha next))) 
```

# ios5 - 使用 splitViewController 之间发送的数据更改 uilabel 文本

> ID：12383720
> 
> 赞同：0
> 
> 时间：2012-09-12T08:06:21.843
> 
> 标签：ios5, uitabbarcontroller, uisplitviewcontroller, ipad

我正在标签栏中学习 splitViewController。我有 5 个选项卡，其中第 5 个是 splitViewController。我能够展示它。我的 MasterView 确实将数据发送到 DetailsView。但是DetailView标签不显示

AppDelegate.m

```
- (void)showMainMenu:(NSNotification *)notification {

UserListViewController *userlist = [[UserListViewController alloc] init];  //MASTER VIEW

UINavigationController *userListNavController = [[UINavigationController alloc] initWithRootViewController:userlist];

UserDetailsViewController *userDetails = [[UserDetailsViewController alloc] init];  //DETAIL VIEW

UINavigationController *userDetailsNavController = [[UINavigationController alloc] initWithRootViewController:userDetails];

UISplitViewController *splitViewContr = [[UISplitViewController alloc] init];
splitViewContr.viewControllers = [NSArray arrayWithObjects:userListNavController,userDetailsNavController, nil];
splitViewContr.tabBarItem.image=kImage;
splitViewContr.title=@"Update User";

NSMutableArray *viewControllerArray = [[NSMutableArray alloc] init];
[viewControllerArray addObject:tab1];
[viewControllerArray addObject:tab2];
[viewControllerArray addObject:tab3];
[viewControllerArray addObject:tab4];
[viewControllerArray addObject:splitViewContr];

self._tabBarController.viewControllers=viewControllerArray;
[viewControllerArray release];

[self._tabBarController dismissModalViewControllerAnimated:NO];
} 
```

用户列表视图控制器.m

我有一个表视图。我只是展示`didSelectRowAtIndexPath`方法：

```
- (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath
{
NSUInteger item = [indexPath row];
NSNumber *detailItem = [NSNumber numberWithInteger:item];
userDetails = [[UserDetailsViewController alloc] init];
[self.userDetails setDetailItem:detailItem];
//self.userDetails.detailItem=detailItem;
} 
```

UserDetailsViewController.m

```
- (void)setDetailItem:(NSNumber *)newDetailItem
{
if (detailItem != newDetailItem) {
    [detailItem release];
     detailItem= [newDetailItem retain];
    NSLog(@"DETAILS%@",detailItem);
    [self configureView];
}
}
- (void)configureView
{
if (self.detailItem) {
    [self viewDidLoad];
    //incomLabel.text=[NSString stringWithFormat:@"I got Demo %d",[detailItem integerValue]];
}
}
- (void)viewDidLoad
{
[super viewDidLoad];
// Do any additional setup after loading the view.
self.view.backgroundColor=[UIColor whiteColor];
self.title=@"Update User Details";

incomLabel = [[UILabel alloc] initWithFrame:CGRectMake(40, 100, 250, 20)];

incomLabel.text=[NSString stringWithFormat:@"I got Demo %d",[detailItem integerValue]];
[self.view addSubview:incomLabel];
[incomLabel release];

} 
```

如何使用来自 Master 类的数据更改 Details 类中的标签文本。谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-12T10:05:43.083

好的，我找到了答案。我在 AppDelegate.m 中丢失了这个东西，`userlist.userDetails=userDetails;`其中`userDetails`UserListViewController 中的 UserDetailsViewController 对象。

# blackberry - PopupScreen 关闭时提交数据

> ID：12383721
> 
> 赞同：0
> 
> 时间：2012-09-12T08:06:22.107
> 
> 标签：blackberry, popup, contacts

我还在做BB。我设法显示联系人列表，然后从中选择一个联系人项目。我在 MainScreen 上实现了这一点。下面是我的代码：

```
list = (BlackBerryContactList) PIM.getInstance()
                        .openPIMList(PIM.CONTACT_LIST, PIM.READ_ONLY);
                PIMItem contact = list.choose();
                if (contact != null) {
                    Vector numbers = new Vector();
                    for (int i = 0; i < contact.countValues(Contact.TEL); i++) {
                        selectedMobileNumber = contact.getString(
                                Contact.TEL, i);
                        numbers.addElement(selectedMobileNumber);
                    }
                    ListPopupScreen listPopupScreen = new ListPopupScreen(
                            FormScreen.this, numbers);
                    UiApplication.getUiApplication().pushScreen(
                            listPopupScreen);
                    System.out.println("OKEEEEEE " + selectedMobileNumber);
                } 
```

有时一个联系人项目有多个电话号码，因此我必须显示一个覆盖的 SopupScreen 以列出所有电话号码。问题是如何提交我从所谓`ListPopupScreen`的数据中选择的数据，以便数字显示在我使用的 MainScreen 上？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-12T22:15:44.967

这个问题的 v1 中没有足够的代码给出明确的答案。
执行此代码示例的屏幕将保留在显示堆栈上。当弹出窗口被关闭时，推送弹出窗口的屏幕将获得一个[`onExposed()`](http://www.blackberry.com/developers/docs/7.1.0api/net/rim/device/api/ui/Screen.html#onExposed%28%29)事件。弹出窗口本身也将获得一个[`onUiEngineAttached(boolean)`](http://www.blackberry.com/developers/docs/7.1.0api/net/rim/device/api/ui/Screen.html#onUiEngineAttached%28boolean%29)带有参数的事件，`false`以指示弹出屏幕已从显示堆栈中分离出来。

由于 UI 中的相同操作调用了这两个事件，因此将“提交”逻辑置于其中一个或另一个中的决定取决于哪个应该拥有提交过程。我想正确的选择是推动 PopupScreen 的屏幕，但我可以想象 PopupScreen 执行“提交”过程更有意义的情况。

另请注意，[`onExposed()`](http://www.blackberry.com/developers/docs/7.1.0api/net/rim/device/api/ui/Screen.html#onExposed%28%29)仅此特定 PopupScreen 被解除的其他原因可能会被调用，因此请确保您的代码期望这样做。

# r - macd 演示 - 添加 ADX 指标

> ID：12383725
> 
> 赞同：2
> 
> 时间：2012-09-12T08:06:34.713
> 
> 标签：r, quantstrat

我正在尝试将 ADX 阈值信号添加到 macd 演示中。这样做会导致以下错误。我已经搞砸了 traceback() 但无法理解有什么问题。任何指针将不胜感激。谢谢你！

该错误是由以下代码中的最后一个命令产生的：

错误：

```
Error in inherits(x, "xts") : Argument "HLC" missing (without default value)
Additional: Warning:
In applyIndicators(strategy = strategy, mktdata = mktdata, parameters = parameters,  : some arguments stored for ADX do not match 
```

代码：

```
# Set initial Dates
initDate <- "2000-01-01"
endDate <- "2012-09-01"
# Set initial Equity
initEq <- 100000

# Pull Yahoo Finance data
symbols <- c("TFM")
getSymbols(symbols, from=initDate, to=endDate, index.class=c("POSIXt","POSIXct"))

# adjust for splits/dividends (comment to replicate blotter example)
TFM <- adjustOHLC(TFM, use.Adjusted=TRUE)

# set currency
for(symbol in symbols) {
  stock(symbol, currency="USD", multiplier=1)
}

# Delete (1) portfolio, (2) account, and (3) order book if they already exist
suppressWarnings(rm("account.macd","portfolio.macd",pos=.blotter))
suppressWarnings(rm("order_book.macd",pos=.strategy))

# Initialize new/blank (1) portfolio, (2) account, and (3) order book
initPortf("macd", symbols=symbols, initDate=initDate)
initAcct("macd", portfolios="macd", initDate=initDate, initEq=initEq)
initOrders(portfolio="macd", initDate=initDate)

# Initialize a strategy object
stratMACD <- strategy("macd")

# Add the MACD indicator to the strategy
stratMACD <- add.indicator(strategy=stratMACD, name="MACD",arguments=list(x=quote(Cl(mktdata))))

# Add the ADX indicator to the strategy
stratMACD <- add.indicator(strategy=stratMACD, name="ADX", arguments=list(x=quote(HLC(mktdata))))

# There are two MACD crossover signals:
# (1) MACD crosses Signal from below
stratMACD <- add.signal(stratMACD, name="sigCrossover", arguments=list(columns=c("macd","signal"), relationship="gt"), label="MACD.gt.SIG")

# (2) MACD crosses Signal from above
stratMACD <- add.signal(stratMACD, name="sigCrossover", arguments=list(columns=c("macd","signal"), relationship="lt"), label="MACD.lt.SIG")

# There are two ADX threshold (30) signals
stratMACD <- add.signal(stratMACD, name="sigThreshold", arguments=list(column="ADX",relationship="gt",threshold=30,cross=TRUE), label="ADX.gt.30")
stratMACD <- add.signal(stratMACD, name="sigThreshold", arguments=list(column="ADX",relationship="lt",threshold=30,cross=TRUE), label="ADX.lt.30")

# There are two rules:
# (1) buy when MACD crosses above the SIGNAL -AND- ADX > 30
stratMACD <- add.rule(stratMACD, name="ruleSignal", arguments=list(sigcol="MACD.gt.SIG", sigval=TRUE, orderqty=1000, ordertype="market", orderside="long", pricemethod="market", TxnFees=-5, osFUN=osMaxPos), type="enter", path.dep=TRUE)
stratMACD <- add.rule(stratMACD, name="ruleSignal", arguments=list(sigcol="ADX.gt.30", sigval=TRUE, orderqty=1000, ordertype="market", orderside="long", pricemethod="market", TxnFees=-5, osFUN=osMaxPos), type="enter", path.dep=TRUE)
# (2) sell when MACD crosses below the SIGNAL -AND- ADX < 30
stratMACD <- add.rule(stratMACD, name="ruleSignal", arguments=list(sigcol="MACD.lt.SIG", sigval=TRUE, orderqty="all", ordertype="market", orderside="long", pricemethod="market", TxnFees=-5), type="exit", path.dep=TRUE)
stratMACD <- add.rule(stratMACD, name="ruleSignal", arguments=list(sigcol="ADX.lt.30", sigval=TRUE, orderqty="all", ordertype="market", orderside="long", pricemethod="market", TxnFees=-5), type="exit", path.dep=TRUE)

# Set position limits so we don't add to the position every month Close > SMA10
addPosLimit(portfolio="macd", symbol="TFM", timestamp=initDate, maxpos=1000, minpos=0)

# Process the indicators and generate trades
out <- try(applyStrategy(strategy=stratMACD, portfolios="macd")) 
```

# php - php 来自按特定记录分组的数组的回显记录

> ID：12383739
> 
> 赞同：2
> 
> 时间：2012-09-12T08:07:43.897
> 
> 标签：php, mysql, multidimensional-array, grouping

我有两张桌子：

ROOMS
room_id>>>room_name

```
1 次足底按摩
2 脸部按摩
3 背部按摩
```

订购room_id
>>>start_date>>>>>>>end_date>>>>>>>>价格

```
1 2012.09.10 2012.09.11 100
1 2012.09.11 2012.09.13 200
2 2012.11.11 2012.11.13 100
3 2012.12.11 2012.12.13 500
```

我想输出这样的结果：

**1号房间：**

```
2012.09.10 2012.09.11 100
2012.09.11 2012.09.13 200
```

**2号房间：**

```
2012.11.11 2012.11.13 100
```

**3号房间：**

```
2012.12.11 2012.12.13 500
```

代码：

```
$query_spa = "SELECT 
rooms.room_id,
rooms.room_name,
orders.start_date,
orders.end_date,
orders.price
FROM rooms
INNER JOIN orders
ON
 rooms.room_id =orders.room_id";

 $spa = mysql_query($query_spa, $localhost) or die(mysql_error());
 $results = array();
 while($line = mysql_fetch_array($spa, MYSQL_ASSOC)){
$results[] = $line;
  }

  $groups = array();
 foreach($results as $item)
 $groups[$item['room_id']][] = $item;
  foreach($groups as $value => $items)
      echo 'room number ' . $value . ' : ' ;
for ($i=0; $i< count($items);$i++)
{
echo $items[$i]['start_date'] ;
echo $items[$i]['end_date'] ;
echo $items[$i]['price'] ;
} 
```

输出：

1号房：2号房：3号房：2012.12.11 2012.12.13 500

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-12T08:15:35.600

试试这个：

```
$groups = array();
foreach($results as $item)
    $groups[$item['room_id']][] = $item;

foreach($groups as $value => $items)
{
    echo 'room number ' . $value . ' : ' ;
    foreach ($items as $item)
    {
        echo $item['start_date'] ;
        echo $item['end_date'] ;
        echo $item['price'] ;
    }
} 
```

您可以使用简单的 foreach 遍历子项。但最好在获取步骤上进行组排序：

```
while($line = mysql_fetch_array($spa, MYSQL_ASSOC)){
    $groups[$line['room_id']][] = $line;
} 
```

所以你在获取后立即得到排序结果。

# c++ - MVCC 实现中的无锁读写器同步

> ID：12383742
> 
> 赞同：7
> 
> 时间：2012-09-12T08:07:57.817
> 
> 标签：c++, c++11

我一直在关注一些无锁代码的正确性，我非常感谢我能得到的任何输入。我的问题是关于如何在 C++11 的内存模型中使用获取和释放语义来实现一些所需的线程间同步。在我的问题之前，一些背景......

在[MVCC](http://en.wikipedia.org/wiki/Multiversion_concurrency_control)中，写入者可以安装对象的新版本，而不会影响旧对象版本的读取者。但是，如果当具有较高时间戳的读取器已经获得对旧版本的引用时，写入器安装了对象的新版本，则写入器事务将不得不回滚并重试。这是为了保持可序列化的快照隔离（所以就*好像*所有成功的事务都按时间戳顺序一个接一个地执行）。读者永远不必因为写入而重试，但如果他们的活动将“从下面拉出地毯”具有更高编号的时间戳的读者，他们可能不得不回滚并重试。为了实现这个约束，一个*读时间戳*用来。这个想法是读取器在获取引用之前将对象的读取时间戳更新为自己的时间戳，写入器将检查读取时间戳以查看是否可以继续使用该对象的新版本。

假设有两个事务：T1（写入者）和 T2（读取者）在不同的线程中运行。

T1（作者）这样做：

```
void
DataStore::update(CachedObject* oldObject, CachedObject* newObject)
{
    .
    .
    .
    COcontainer* container = oldObject->parent();
    tid_t newTID = newObject->revision();
    container->setObject(newObject);
    tid_t* rrp = &container->readRevision;
    tid_t rr = __atomic_load_n(rrp, __ATOMIC_ACQUIRE);
    while (true)
    {
        if (rr > newTID) throw TransactionRetryEx();
        if (__atomic_compare_exchange_n(
            rrp,
            &rr,
            rr,
            false,
            __ATOMIC_RELEASE,
            __ATOMIC_RELAXED)
        {
            break;
        }
    }
} 
```

T2（读者）这样做：

```
CachedObject*
Transaction::onRead(CachedObject* object)
{
    tid_t tid = Transaction::mine()->tid();
    COcontainer* container = object->parent();
    tid_t* rrp = &container->readRevision;
    tid_t rr = __atomic_load_n(rrp, __ATOMIC_ACQUIRE);
    while (rr < tid)
    {
        if (__atomic_compare_exchange_n(
            rrp,
            &rr,
            tid,
            false,
            __ATOMIC_ACQUIRE,
            __ATOMIC_ACQUIRE))
        {
            break;
        }
    }
    // follow the chain of objects to find the newest one this transaction can use
    object = object->newest();
    // caller can use object now
    return object;
} 
```

这是我担心的情况的简单总结：

```
 A    B    C
<----*----*----*---->
   timestamp order

A: old object's timestamp
B: new object's timestamp (T1's timestamp)
C: "future" reader's timestamp (T2's timestamp)

* If T2@C reads object@A, T1@B must be rolled back. 
```

如果 T1 在 T2 开始之前完全执行（并且 T1 的效果对 T2 完全可见），那么就没有问题。T2 将获取对 T1 安装的对象版本的引用，它可以使用它，因为 T1 的时间戳小于 T2 的。（事务可以“从过去”读取对象，但不能“窥探未来”）。

如果 T2 在 T1 开始之前完全执行（并且 T2 的效果对 T1 完全可见），那么就没有问题。T1 将看到“来自未来”的事务可能读取了对象的旧版本。因此，T1 将被回滚并创建一个新事务来重试工作的性能。

问题（当然）是在 T1 和 T2 同时运行时保证正确的行为。只使用互斥锁来消除竞争条件非常简单，但如果我确信没有其他方法，我只会接受带锁的解决方案。我很确定应该可以使用 C++11 的获取和释放内存模型来做到这一点。我可以接受一些复杂性，只要我对代码正确感到满意。我真的希望读者尽可能快地运行，这是 MVCC 的主要卖点。

**问题：**

**1.**`throw TransactionRetryEx()`看上面的（部分）代码，你认为是否存在竞争条件，以至于在 T2 继续使用旧版本的对象的情况下，T1 可能无法回滚（通过）？

**2.**如果代码错误，请解释原因，并提供纠正错误的一般指导。

**3.**即使代码看起来正确，你能看到它如何更高效吗？

我的理由`DataStore::update()`是，如果调用`__atomic_compare_exchange_n()`成功，则意味着“冲突”读取器线程尚未更新读取时间戳，*因此*它也没有遍历对象版本链以找到新的可访问版本刚刚安装。

我正要买[《事务信息系统：理论、算法和并发控制与恢复的实践》](https://rads.stackoverflow.com/amzn/click/com/1558605088)这本书，但我想我也会打扰你：我想我应该早点买这本书，但我我也相当确定我不会学到任何会使我的大部分工作无效的东西。

我希望我已经提供了足够的信息以使答案成为可能。如果我收到建设性的批评，我会很乐意编辑我的问题以使其更清楚。如果已经提出并回答了这个问题（或类似的问题），那就太好了。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-23T11:55:24.883

这很复杂，我还不能对 1\. 和 2\. 说什么，但是关于 3 我注意到了一些事情：

当 __atomic_compare_exchange_n 返回 false 时，*rrp 的当前值被写入 rr，因此循环中的 __atomic_load()s 都是冗余的（在 T2 中只需将其丢弃，在 T1 中像在 T2 中一样在循环之前执行一次）。

作为一般评论，在算法中的其他所有内容完成之前，可能没有必要考虑获取/释放；然后您可以检查“无处不在”需要多强的内存屏障。

# javascript - 使用 JSF 中的 java-script 或 Ajax 渲染选项使 div 标签可见

> ID：12383743
> 
> 赞同：0
> 
> 时间：2012-09-12T08:08:03.043
> 
> 标签：javascript, html, jsf-2

目前，在suggestioinField 组件中添加ajax 渲染后，我遇到了div 组件的问题，div 显示更改为none。如何使其页面保持在同一页面中，即使在渲染到操作之后也是如此。

这是我用来隐藏和显示分界线的 javascript 函数

```
function AddShow(id){
  document.getElementById(id).style.display="block";} 
```

添加按钮以显示 div 标签：

```
<h:commandButton type="button" id="cmdadd1" value="#{message.btn__list_add}" onclick="AddShow('Add')" immediate="true"/> 
```

JSF Page-Div 内容

```
<div id="Add" display:none;"> 
  <h:outputLabel value="#{message.label_listA }" />                 
  <o:suggestionField id="addvalA"  value="#{MainAction.CodeAdd}" customValueAllowed="false"
   manualListOpeningAllowed="true"  autoComplete="true" suggestionMinChars="1   onchange="O$.ajax.request(this,event,{ execute: 'frmList: addvalA ', listener: ‘MainAction.doSelectCodeAdd', render: 'frmList' })"onkeydown="O$.ajax.request(this,event,{listener: 'MainAction.doResetA'})" onblur="O$.ajax.request(this,event,{render:'frmList'})" ><o:dropDownItems value="#{MainAction.doCodeAdd}"/> </o:suggestionField>                            

   <h:commandButton  id="cmdAddConfirm"  value="#{message.btn_create}"  >
       <f:ajax execute="@form" render="@form" listener="#{MainAction.doConfirmAdd}"/>                           
  </h:commandButton>

  </div> 
```

有什么办法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-12T08:32:29.973

将以下内容添加到您的 js 文件中，我假设您有 jQuery（来自 primefaces），无论如何这`jsf.ajax.addOnEvent(function (data)...`是重要的部分......

```
jQuery(window).load(function () {
    jsf.ajax.addOnEvent(function (data) {
        if (data.status === "success") {
            if(data.source.id  === "cmdAddConfirm"){
                AddShow('Add');
            }
        }
    });
}); 
```

简短说明：

在每个 ajax 调用中`jsf.ajax.addOnEvent`，只有在它成功结束并且只有从`cmdAddConfirm`按钮进行调用时才会在其中调用，您将调用您的 js 函数来将显示设置为阻止

# facebook - 使用 php 在另一张图片上显示 facebook userimage

> ID：12383750
> 
> 赞同：0
> 
> 时间：2012-09-12T08:08:26.817
> 
> 标签：facebook, image, iframe

我是 php 和编程的新手。我需要有关在另一张图像上显示 facebook 用户图像的帮助。这是我正在处理的脚本。

```
 if(isset($_POST['id']) && $_POST['id'] == 'Generator')
    {

        $path_fonts = '../page/font/';
        $img = '../page/generate/image-'. $user['id'] .'.jpg';

        if (!file_exists($img))
        {
            shuffle($indian_name);
            $uid = $facebook->getUser();
            $text       = wordwrap($indian_name[0], 31, "\n", true);
            $box_text   = @ImageTTFBBox(TEXT_FONT_SIZE, 0, $path_fonts.TEXT_FONT, $text);
            $x_text     = ceil((800 - $box_text[2]) / 2);
            $image      = imagecreatefromjpeg('../page/images/template.jpg');
            $font_color = ImageColorAllocate($image, 63, 55, 48);
        $url = "http://graph.facebook.com/".$uid."/picture";
        $pimg = '../page/generate/pimage-'. $user['id'] .'.jpg';

       file_put_contents($pimg, file_get_contents($url));

            imagecopymerge($image, $pimg, 10, 10, 100, 100, 700, 500, 0 );
            imagettftext($image, $size = TEXT_FONT_SIZE, 0, $x_text, $y = 315, $font_color, $path_fonts.TEXT_FONT, $user[name]);
            imagejpeg($image, $img, 75);
            imagedestroy($image); 
```

谁能告诉我哪里出错了？我想在 template.jpg 的中心显示 50x50 的 facebook 个人资料图片。template.jpg 文件的大小为 (800x700)。

提前致谢 ：）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-21T11:41:15.307

希望这能有所帮助。

试试这个，它对我有用

```
$headers = get_headers('http://graph.facebook.com/'.$user[id].'/picture?type=normal',1);    
$url = $headers['Location']; // string

$pimg = imagecreatefromjpeg($url);

imagecopymerge($image, $pimg, 10, 10, 100, 100, 700, 500, 0 ); 
```

但您可以先尝试使用特定数据，看看它是否有效。 [http://graph.facebook.com/your-id-number/picture](http://graph.facebook.com/your-id-number/picture)

# jquery - 如何使用替换jQuery？

> ID：12383752
> 
> 赞同：0
> 
> 时间：2012-09-12T08:08:31.920
> 
> 标签：jquery, replacewith

我需要做两个步骤：

1）单击 div 时显示 InputBox 。2）当鼠标离开该输入框时显示 div。

步骤 #2 不起作用。

```
<html>
    <title>a</title>
    <head>
    <script type="text/javascript" src="jquery-1.8.0.js"></script>
    <script type="text/javascript">
        $(function() {
            $('#field').click(function() {
                $(this).replaceWith( "<input type=\"text\" name=\"fname\" id=\"field\" value=\"" + $(this).text() + "\">");
            });

            $('#field').mouseout(function() {
                $(this).replaceWith( "<div id=\"field\">" + $(this).text() + "</div>");
            });     
         });
    </script>
    </head>
    <body>
        <div id="field">hello there:)</div>
    </body>
    </html> 
```

谢谢你：）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-12T08:19:21.753

你可以试试这个，制作不同的 id，当 div 说它“field”，而 input 说它“txtfield”

```
$(function() {
    $('#container').on('click', '#field', function() {
        $(this).replaceWith( "<input type=\"text\" name=\"fname\" id=\"txtfield\" value=\"" + $(this).text() + "\">");
    });

     $('#container').on('mouseout', '#txtfield', function() {
        $(this).replaceWith( "<div id=\"field\">" + $(this).val() + "</div>");
    });

}); 
```

检查此**[演示](http://jsfiddle.net/aBUkh/)**

希望这会帮助你。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-12T08:21:28.937

当然这是行不通的，因为你替换了项目本身，所以`$(this)`不会引用任何内容。

所以你必须在创建新`#field`元素后调用鼠标绑定，或者你可以使用`.on`方法 [http://api.jquery.com/on/](http://api.jquery.com/on/)

注意：您可以使用单引号而不是双引号保存转义；）

```
$('#field').click(function () {
    $(this).replaceWith('<input  id="field" type="text" value="' + $(this).text() + '>');

    // here you must call the mouse out binding
    $('#field').mouseout(function () {
        $(this).replaceWith('<div id="field">' + $(this).text() + '</div>');
    });

}); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-12T08:14:16.440

[这将做你想要](http://jsfiddle.net/GkUu6/)的，你需要使用该[`.on()`](http://api.jquery.com/on/)方法将事件绑定到动态创建的元素。

需要两个`.on()`或三个参数。第一个参数是事件，而第二个参数要么是要执行的函数，要么是要绑定的动态元素。如果要绑定到动态元素，则需要将该方法附加到容器元素。动态附加情况下的最后一个参数当然是要执行的函数。

```
<div id="container">
    <div id="field">hello there:)</div>
</div>​ 
```

```
$(function() {
    $('#container').on('click', '#field', function() {
        $(this).replaceWith("<input type=\"text\" name=\"fname\" id=\"field\" value=\"" + $(this).text() + "\">");
    });

    $('#container').on('mouseout', '#field', function() {
        $(this).replaceWith("<div id=\"field\">" + $(this).val() + "</div>");
    });

});​ 
```

[**更新**](http://jsfiddle.net/GkUu6/1/)：

```
$(function() {
    $('#container').on('click', '#field', function() {
        if (!$(this).is('input')) {
            $(this).replaceWith("<input type=\"text\" name=\"fname\" id=\"field\" value=\"" + $(this).text() + "\">");
        }
    });

    $('#container').on('mouseout', '#field', function() {
        if ($(this).is('input')) {
            if ($(this).val() != '') {
                $(this).replaceWith("<div id=\"field\">" + $(this).val() + "</div>");
            }
            else {
                $(this).replaceWith("<div id=\"field\">hello there:)</div>");
            }
        }
    });

});​ 
```

# ffmpeg - 如何使用 ffmpeg ( 或 xuggle ) 使用实时流创建马赛克

> ID：12383753
> 
> 赞同：4
> 
> 时间：2012-09-12T08:08:33.650
> 
> 标签：ffmpeg, video-streaming, xuggle

一千分钟，我试图找到一种方法来流式传输多个视频并将它们组合成一个输出。我想用 ffmpeg 或 xuggler 用 ffmpeg cmd 做到这一点。VirtualDub 和 avis 无法满足我的需求。实际上我找不到在 avis 中流的方式。我只能在 virtualdub 的屏幕上制作 4 8 16 个视频，但它们是本地视频，不是我的问题。

```
>cd c:\f\bin 
```

> ffmpeg -i rtmp://localhost/live/me -vf "[in] scale=iw/2:ih/2, pad=2*iw:ih [left]; movie=other stream, scale=iw/4: ih/4 [右]；[左][右] 叠加=main_w/2:0 [输出]" -b:v 768k 输出

反正加入两个流并排，但我想要更多。ffmpeg 可以吗？我也不能使用像 spycam、vlc 等这样的程序。别跟我说vlc，console vlc可以轻松搞定。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-06-09T13:47:38.920

您可以阅读[此 FFmpeg 教程](http://ffmpeg.org/trac/ffmpeg/wiki/Create%20a%20mosaic%20out%20of%20several%20input%20videos)并尝试使用实时输入而不是文件输入来实现您想要的。另外，我认为如果您的实时输入之一不可用，您将希望使用它`shortest=0`来避免流停止。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-14T07:43:17.387

[ffmpeg 的常见问题解答](http://ffmpeg.org/faq.html#How-can-I-concatenate-video-files_003f)包括视频连接的说明。请密切注意第 3.14.3 节中的说明，因为如果您了解如何从视频中解复用音频，然后将每个轨道转换为原始流，则可以简单地将流连接起来。

# javascript - 在样板js中实现Ajax

> ID：12383754
> 
> 赞同：1
> 
> 时间：2012-09-12T08:08:40.560
> 
> 标签：javascript, ajax, boilerplatejs

我正在使用 BoilerplateJS 开发一个大型 JavaScript 应用程序。在视图模型中，我想连接到将返回 JSON 对象的外部 REST API。但我不确定如何实现这一点。有人可以给我一个想法。提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-12T09:20:11.940

那里的大多数示例 UI 组件都会访问服务器以获取 JSON 请求。例如看看“src/modules/sampleModule1/departments/viewmodel.js”。在“初始化”方法下，您将看到：

```
$.getJSON(moduleContext.getSettings().urls.departments, function(result) {
    self.allItems(result);
}); 
```

这里的“moduleContext.getSettings().urls.departments”是返回 JSON 的服务器脚本的 URL。另一个参数是处理 JSON 响应的回调函数。在示例中，没有服务器脚本，因此我们使用存储在“服务器”文件夹下的简单 JSON 文件来模拟服务器脚本。例如，在这种情况下，请求是针对“/server/departments.txt”的

# vba - 自动选择删除工作表而不弹出消息

> ID：12383755
> 
> 赞同：2
> 
> 时间：2012-09-12T08:08:43.307
> 
> 标签：vba, excel

我编写了 vba 代码来永久删除工作表。当我运行它时，会出现以下消息：

“数据可能存在于选择删除的工作表中。要永久删除数据，请按 Delete。”

如何编写此代码以使其自动删除工作表而不会弹出消息？

```
ThisWorkbook.Sheets("SVT").Delete 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-12T08:21:37.020

您可以使用：

```
Application.DisplayAlerts = False
ThisWorkbook.Sheets("SVT").Delete
Application.DisplayAlerts = True 
```

# python - 简单 xmlrpc python 脚本中的属性错误

> ID：12383756
> 
> 赞同：0
> 
> 时间：2012-09-12T08:08:46.003
> 
> 标签：python, xml-rpc, smtplib

我有一个简单的 xmlrpc 服务器设置来启动 SMTP 服务器，代码在这里：

```
from SimpleXMLRPCServer import SimpleXMLRPCServer
import smtplib

# Create server
server = SimpleXMLRPCServer(("localhost", 1025), allow_none = True)

# add the introspection functions (system.listMethods, system.methodHelp 
# and system.methodSignature)
server.register_introspection_functions()

def send(host, port):
    server = smtplib.SMTP((host, port), None)

# register this method
server.register_function(send, 'send')

# start server
server.serve_forever() 
```

我启动此服务器并在客户端执行以下步骤：

```
import xmlrpclib
s = xmlrpclib.ServerProxy('http://localhost:1025')
s.send('0.0.0.0',25) 
```

这导致以下错误我不明白：

```
xmlrpclib.Fault: <Fault 1: "<type 'exceptions.AttributeError'>:'tuple' object has no attribute 'find'"> 
```

这里的元组对象是什么意思？为什么代码需要属性查找？有什么想法可以帮助我使此代码正常工作，即我能够发出 xmlrpc 请求来初始化（并稍后使用）xmlrpc 服务器内的 smtp 服务器？

谢谢亚历克斯

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-12T08:13:05.487

在[smtplib 文档](http://docs.python.org/library/smtplib.html)中，声明类的签名`SMTP`接受主机和端口的两个不同参数。

因此，您应该以这种方式定义您的发送函数：

```
def send(host, port):
    server = smtplib.SMTP(host, port) 
```

可能`SMTP`构造函数需要一个字符串作为主机，并使用 find 方法。但是，如果您传入元组`(host, port)`，`AttributeError`则会生成该元组。

# mysql - 强制先更新然后在过程中选择

> ID：12383757
> 
> 赞同：7
> 
> 时间：2012-09-12T08:08:52.120
> 
> 标签：mysql, sql

我在 MySQL 中有这个程序（不要费心去弄清楚它的作用，只需观察光标打开的部分）

```
/* PROCEDURE 1 : Post notification */
DROP PROCEDURE IF EXISTS AddNotificationOnPosts;

DELIMITER $$
CREATE DEFINER=`root`@`localhost` PROCEDURE `AddNotificationOnPosts`(arg_from_user INT(11),arg_on_post_id INT(11),arg_in_group_id INT(11))
BEGIN
    DECLARE num_rows INT DEFAULT NULL;
    DECLARE insert_result INT DEFAULT NULL;

    DECLARE done INT DEFAULT 0;
    DECLARE var_user_id INT DEFAULT NULL;
        DECLARE c1 CURSOR FOR 
        SELECT user_id 
        FROM user_rights 
        WHERE user_rights.right = 101 AND user_rights.group_id  = arg_in_group_id 
        ORDER BY user_id DESC;
    DECLARE CONTINUE HANDLER FOR NOT FOUND SET done = 1;

    IF(arg_from_user IS NULL OR arg_from_user = '')
    THEN
        SELECT "0" AS response;
    ELSEIF(arg_on_post_id IS NULL OR arg_on_post_id = '')
    THEN
        SELECT "0" AS response;
    ELSEIF(arg_in_group_id IS NULL OR arg_in_group_id = '')
    THEN
        SELECT "0" AS response;
    ELSE
        SELECT count(notification_id) FROM notifications_posts 
        WHERE 
        from_user = arg_from_user AND
        on_post_id = arg_on_post_id AND
        in_group_id = arg_in_group_id
        INTO num_rows;
    END IF;

    IF num_rows = 0
    THEN
        INSERT INTO notifications_posts(from_user,on_post_id,in_group_id) VALUES(arg_from_user,arg_on_post_id,arg_in_group_id);
        SELECT ROW_COUNT() INTO insert_result;

        IF insert_result > 0 
        THEN        
            /* Increment the notifications for every user*/
            OPEN c1;
            read_loop: LOOP
                FETCH c1 INTO var_user_id;
                    IF done THEN
                        LEAVE read_loop;
                    ELSE
                        IF NOT(var_user_id = arg_from_user)
                        THEN

                            /* UPDATING */
                            UPDATE user_info SET notifications = notifications + 1 WHERE user_info.user_id = var_user_id;

                            /* SELECTING RESULT */
                            SELECT
                            user_info.user_id,
                            messages,
                            tasks,
                            notifications,
                            messages+tasks+notifications AS total
                            FROM user_rights
                            INNER
                                JOIN user_info
                                ON user_info.user_id = user_rights.user_id
                            WHERE user_rights.right = 101 AND user_rights.group_id  = arg_in_group_id ;

                        END IF;
                    END IF;
            END LOOP;
            CLOSE c1;

        ELSE
            SELECT "0" AS response;
        END IF;

    ELSE
        SELECT "0" AS response;
    END IF;
END $$
DELIMITER ; 
```

在这部分

```
 /* Increment the notifications for every user*/
            OPEN c1;
            read_loop: LOOP
                FETCH c1 INTO var_user_id;
                    IF done THEN
                        LEAVE read_loop;
                    ELSE
                        IF NOT(var_user_id = arg_from_user)
                        THEN

                            /* UPDATING */
                            UPDATE user_info SET notifications = notifications + 1 WHERE user_info.user_id = var_user_id;

                            /* SELECTING RESULT */
                            SELECT
                            user_info.user_id,
                            messages,
                            tasks,
                            notifications,
                            messages+tasks+notifications AS total
                            FROM user_rights
                            INNER
                                JOIN user_info
                                ON user_info.user_id = user_rights.user_id
                            WHERE user_rights.right = 101 AND user_rights.group_id  = arg_in_group_id ;

                        END IF;
                    END IF;
            END LOOP;
            CLOSE c1; 
```

该过程选择数据，然后更新它（相信我，我是认真的），我真的需要在之后选择，因为我正在`XML`使用更改后的数据生成一个，所以：

1 为什么选择然后更新，因为我看到选择在更新下方

2 谁有这个“绝妙的主意”来做到这一点？

谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-12T09:24:09.107

我解决了这个问题：`SELECT`语句必须在`CURSOR LOOP`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-12T08:48:31.270

当您在 sql-server 中有一批更新/删除和其他内容时，执行“命令”的顺序完全不确定。解决这个问题的方法是使用“exec”语句将“update”放在不同的批次中。所以尝试使用：

```
exec('UPDATE user_info SET notifications = notifications + 1 WHERE user_info.user_id =' + var_user_id); 
```

它现在应该可以工作了。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-04-26T09:26:06.393

我希望更新和选择以正确的顺序执行，但是由于事务隔离，选择无法“看到”更新的结果。

我建议以下解决方案来解决此问题并通过消除后续选择中的连接来提高性能：

```
set @notification = 0;

/* UPDATING */
UPDATE user_info SET notifications = @notification := notifications + 1 WHERE user_info.user_id = var_user_id;

/* SELECTING RESULT */
SELECT
     user_info.user_id,
     messages,
     tasks,
     notifications,
     messages+tasks+@notifications AS total
 FROM user_rights
WHERE user_rights.right = 101 AND user_rights.group_id  = arg_in_group_id ; 
```

# image - 如何轻松将 rgb 颜色值转换为十六进制颜色值？

> ID：12383759
> 
> 赞同：2
> 
> 时间：2012-09-12T08:08:55.977
> 
> 标签：image, perl, colors, imagemagick, color-scheme

我正在使用 ImageMagick 的 perl API。我以 rgb 方案接收颜色值，但需要获取十六进制值才能在网站上使用它（示例`#FFA8F5`）。

**如何轻松将 rgb 颜色值转换为十六进制颜色值？**

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-12T08:40:51.087

使用`printf`或`sprintf`与`%x`格式，

```
my ($r,$g,$b) = (12,102,250);
printf("#%02x%02x%02x",$r,$g,$b); 
```

**输出：**

```
#0c66fa 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-12T10:49:36.393

这是一种方法：

```
my @rgb     = (102, 205, 0);
my $hex_rgb = sprintf "#%02X%02X%02X", @rgb; 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-12T08:13:04.083

```
function colorToHex(color) {
    if (color.substr(0, 1) === '#') {
        return color;
    }
    var digits = /(.*?)rgb\((\d+), (\d+), (\d+)\)/.exec(color),

        red = parseInt(digits[2], 10),
        green = parseInt(digits[3], 10),
        blue = parseInt(digits[4], 10),

        rgb = blue | (green << 8) | (red << 16);
    return digits[1] + '#' + rgb.toString(16);
} 
```

## [小提琴](http://jsfiddle.net/ARTsinn/YSbwd/)

# c# - ASP.NET——aspnet_isapi.dll如何构造页面类

> ID：12383763
> 
> 赞同：0
> 
> 时间：2012-09-12T08:09:07.113
> 
> 标签：c#, asp.net, page-lifecycle

我们都知道，当收到对 abc.aspx 的请求时，aspnet_isapi.dll 会对其进行处理并调用页面的 processrequest 方法。我的问题是它如何创建页面类的实例以及它如何调用页面生命周期。它实现了哪种模式？

好吧，我们都知道 ASP.NET 运行时调用处理程序的 ProcessRequest 来启动进程。我的问题是它是如何做到的。根据页面名称（abc.aspx”，它创建了那个 abc 类并调用了该类的一些方法。现在它如何创建 abc 的对象，是我的问题。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-12T08:27:15.623

以下是接收请求和发送响应之间发生的阶段。

![在此处输入图像描述](../Images/1f54919b1c94b36de2552989dc340b60.png)

这是[应用程序生命周期](http://msdn.microsoft.com/en-us/library/bb470252%28v=vs.100%29)

> 执行处理程序阶段，其中调用处理程序（范围为 URL 的模块）来构造响应。对于 .aspx 文件，PageHandlerFactory 处理程序用于响应请求。对于静态文件，本机代码 StaticFileModule 模块会响应请求。

这是由[PageHandlerFactory完成的](http://msdn.microsoft.com/en-us/library/system.web.ui.pagehandlerfactory%28v=vs.100%29)

> PageHandlerFactory 创建从 Page 类继承并实现 IHttpHandler 接口的类的实例。动态创建实例以处理对 ASP.NET 文件的请求。PageHandlerFactory 类是 ASP.NET 页面的默认处理程序工厂实现。
> 
> PageHandlerFactory 类实现 IHttpHandlerFactory 接口以为 ASP.NET 文件提供默认的 HTTP 处理程序。如果需要，PageHandlerFactory 调用 ASP.NET 编译系统进行编译，并返回与 URL 对应的确切类型，然后创建该类型的实例。页面类型继承自 Page 类，实现了 IHttpHandler 接口。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-12T09:04:19.187

我想这就是你要找的..

[http://www.west-wind.com/presentations/howaspnetworks/howaspnetworks.asp](http://www.west-wind.com/presentations/howaspnetworks/howaspnetworks.asp)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-12T08:12:25.160

这种事情有据可查：

[http://msdn.microsoft.com/en-us/library/ms178472(v=vs.100).aspx](http://msdn.microsoft.com/en-us/library/ms178472(v=vs.100).aspx)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-12T08:19:17.043

您可以尝试使用此代码基于`HttpContext.Response.Redirect`

```
public void ProcessRequest(HttpContext context)
{
        context.Response.Write("<H1>This is an HttpHandler Test.</H1>");      
        context.Response.Redirect("YourPage.aspx");
} 
```

# vba - 在书签中插入字段 (Fields.add)

> ID：12383767
> 
> 赞同：1
> 
> 时间：2012-09-12T08:09:17.270
> 
> 标签：vba, ms-word, bookmarks

一段时间以来一直在使用 Word 宏。我想在特定书签中插入一个字段 - 但它失败了。这是代码：

```
.Bookmarks ("text").Range _
                .Fields.Add Range:=Selection.Range, Type:=wdFieldEmpty, Text:= _
                "LINK  Word.Document.12 ""\\<link>"" \r " _
                , PreserveFormatting:=True 
```

有什么帮助吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-12T12:59:09.910

尽管看起来您可能正在替换书签“文本”，但实际上您的代码会将字段添加到当前选择中。您需要更多类似以下的内容：

```
.Bookmarks("text").Range.Fields.Add _
  Range:=.Bookmarks("text").Range, _
  Type:=wdFieldEmpty, _
  Text:="LINK  Word.Document.12 ""\\<link>"" \r ", _
  PreserveFormatting:=True 
```

可能还有其他问题，在这种情况下，如果您可以发布错误详细信息或描述运行代码时实际发生的情况，这可能会有所帮助。

评论合并：

OP 评论说他们收到错误“请求的集合成员不存在”。

如果没有名为“文本”的书签，就会发生这种情况

# javascript - Javascript 作业。制作年历

> ID：12383770
> 
> 赞同：-1
> 
> 时间：2012-09-12T08:09:48.767
> 
> 标签：javascript

我正在尝试使用 JS 在一个页面上打印年度日历。这似乎是给我带来问题的功能。让我知道您是否可以为我指明正确的方向，或者我是否可以提供更多信息。谢谢

```
function yearly(calDate)    {
    if (calDate == null) calendarDay = new Date();
    else calendarDay = new Date(calDate)

    var currentTime = calendarDay.getTime();
    var thisYear = calendarDay.getFullYear();

    <table id='yearly_table'><tr>
        <th id='yearly_title' colspan='4'>
        thisYear;
    </th>
    </tr>
    var monthNum=-1;

    for (var i=1;i<=3;i++)  {
        document.write("<tr>");
    for (var j=1;j<=4;j++) {
        monthNum=monthNum++;
        calendarDay.setDate(1);
        calendarDay.setMonth(monthNum);
        writeMonthCell(calendarDay, currentTime);
    }
    <"</tr>">
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-12T08:12:48.890

您不能将 html 放入这样的 javascript 函数中。Javascript 只能包含 javascript 语句，不能包含 html 标签。浏览器将尝试将您的 html 作为 javascript 语句执行，并且不会识别其中的任何一个。

您需要将其插入 DOM。使用 getElementById、createElement 和 appendChild 等方法。[更多信息在这里](http://www.impressivewebs.com/10-essential-dom-methods-techniques-for-practical-javascript/)

例如，要将一些文本写入元素，请执行以下操作：

```
// get the element using it's ID
var element = document.getElementById("myElementId");

// create a child element
var newElement = document.createTextNode("This is my text");

// write some text into it
element.appendChild(newElement); 
```

[您可以在此处查看示例运行](http://jsfiddle.net/NACzs/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-17T02:03:54.623

试试这个：

```
function yearly(calDate) {
    if (calDate == null) {
    var calendarDay = new Date();
    } else { 
      var calendarDay = new Date(calDate);
      }

var currentTime = calendarDay.getTime();
var thisYear = calendarDay.getFullYear();
document.write("<table id='yearly_table'><tr>");
document.write("<th id='yearly_title' colspan='4'>");
document.write(thisYear);
document.write("</th></tr>");
var monthNum = calendarDay.getMonth();
var monthNum = -1;

for (var i=0; i<=2; i++) {
  document.write("<tr>");
    for (var j=0; j<=3; j++) {
     monthNum++;
     calendarDay.setDate(1);
     calendarDay.setMonth(monthNum);
     writeMonthCell(calendarDay, currentTime);
     }
    document.write("</tr>");
  }
 document.write("</table>");   
} 
```

# java - 通过 Notes Java API 读取字段的选择

> ID：12383772
> 
> 赞同：1
> 
> 时间：2012-09-12T08:09:52.200
> 
> 标签：java, lotus-notes

我制作了一个小型应用程序，通过 Notes Java API（Notes 7）从一组文档中的项目中提取值。许多项目的类型是对话框列表，因此字段值可以是一组预定义的选项中的一个或多个。

我需要一种方法来读取项目的一组（不同）选择的键/值对，最好也通过 Java API，但是如果通过 Notes 客户端或 Domino Designer 存在更简单的解决方案，那很好我。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-12T11:28:21.413

如果您在设计时将选项输入到表单中，那么就没有简单的方法。但是，您可以设计一个对话框列表字段以从视图或表单上的字段列表（可能是注释配置文件表单）中提取选项。两者都可以从 API 访问。

# java - 用Java替换字符串中的所有“（”和“）”

> ID：12383774
> 
> 赞同：7
> 
> 时间：2012-09-12T08:10:07.597
> 
> 标签：java, regex, string, replaceall

如何在Java中用句号替换字符串中的所有“（”和“）”？我尝试了以下方式：

```
String url = "https://bitbucket.org/neeraj_r/url-shortner)";
url.replaceAll(")", ".");
url.replaceAll(")", "."); 
```

但它不起作用。错误是：

```
Exception in thread "main" java.util.regex.PatternSyntaxException: Unmatched closing
')'
 )
at java.util.regex.Pattern.error(Unknown Source)
at java.util.regex.Pattern.compile(Unknown Source)
at java.util.regex.Pattern.<init>(Unknown Source)
at java.util.regex.Pattern.compile(Unknown Source)
at java.lang.String.replaceAll(Unknown Source)
at com.azzist.cvConversion.server.URLChecker.main(URLChecker.java:32) 
```

我认为这个问题也会出现在所有正则表达式中。`\`之前添加`)`没有用。

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-09-12T08:13:46.033

您可以一次性使用 replaceAll：

```
url.replaceAll("[()]", ".") 
```

解释：

*   `[()]`匹配`(`and `)`，括号不需要在`[]`组内转义。

编辑（正如@Keppil 指出的那样）：

另请注意，`url`替换不会更改字符串，它仅返回带有替换的新字符串，因此您必须这样做：

```
url = url.replaceAll("[()]", "."); 
```

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2012-09-12T08:12:06.330

您需要分别转义`'('`和`')'`使用`"\\("`和`"\\)"`：

```
url = url.replaceAll("\\)", ".");  
url = url.replaceAll("\\(", ".") 
```

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2012-09-12T08:12:41.793

[`replaceAll()`](http://docs.oracle.com/javase/7/docs/api/java/lang/String.html#replaceAll%28java.lang.String,%20java.lang.String%29)期望 a`regex`作为第一个参数，并且括号在那里具有特殊含义。

改用[`replace()`](http://docs.oracle.com/javase/7/docs/api/java/lang/String.html#replace%28java.lang.CharSequence,%20java.lang.CharSequence%29)：

```
String url = "https://bitbucket.org/neeraj_r/url-shortner)";
url = url.replace("(", ".").replace(")", "."); 
```

请注意，该`url =`零件对于保存替换结果很重要。由于`String`s 是*不可变*的，所以原始`String`的没有改变，而是创建了一个新的。为了保持结果`url`需要指向这个。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-09-12T08:17:18.530

1.  字符串是不可变的。
2.  `)`应该用 2 个反斜杠转义。

所以代码看起来像这样：

```
String url = "https://bitbucket.org/neeraj_r/url-shortner)";
// is you need to escape all of them, use "[()]" pattern, instead of "\\)"
String s = url.replaceAll("\\)", "."); 
System.out.println(url);
System.out.println(s); 
```

和输出：

```
https://bitbucket.org/neeraj_r/url-shortner)
https://bitbucket.org/neeraj_r/url-shortner. 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-09-12T08:13:03.180

添加单个`\`将不起作用，因为这将尝试评估`\)`为不是的转义特殊字符。

您需要使用“\)”。第一个`\`转义第二个，产生一个“正常” `\`，而后者又转义`)`，产生一个与右括号完全匹配的正则表达式`)`。

通用解决方案是使用[`Pattern.quote`](http://docs.oracle.com/javase/7/docs/api/java/util/regex/Pattern.html#quote%28java.lang.String%29)，它接受任意字符串并返回与该字符串完全匹配的正则表达式。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-09-12T10:23:01.273

您也可以使用不使用正则表达式的 org.apache.commons.lang.StringUtils.replace(String, String, String)

来自 apache 公共库[http://commons.apache.org/](http://commons.apache.org/)

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-09-12T08:13:46.440

Method`String#replaceAll`需要正则表达式`(`以及`)`特殊字符（标记组），因此您需要将它们转义为 non-special `url.replaceAll("\\)", ".");`。

您也可以用 pattern 一次替换这两个字符`url.replaceAll("[()]", ".");`。您可以看到，在这种情况下，括号没有被转义。那是因为正则表达式上下文 - 在`[]`它们内部没有任何特殊含义。

查看[JavaDoc](http://docs.oracle.com/javase/6/docs/api/java/lang/String.html#replaceAll%28java.lang.String,%20java.lang.String%29)了解更多信息。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2012-09-12T08:13:48.220

因为`)`是正则表达式的字符，所以你需要转义它。试试这个：

```
url.replaceAll("\)", "\."); 
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2012-09-12T08:14:11.543

采用

```
url.replaceAll("\\)", ".").replaceAll("\\(", ".");; 
```

# c++ - TDateTime 链接错误

> ID：12383775
> 
> 赞同：0
> 
> 时间：2012-09-12T08:10:15.800
> 
> 标签：c++, linker, linker-errors

我正在使用 C++ Builder 并收到以下错误：

```
[ILINK32 Error] Error: Unresolved external '__fastcall System::Internal::Strhlpr::UnicodeFree(System::UnicodeString&)' referenced from C:\PROGRAM FILES (X86)\EMBARCADERO\RAD STUDIO\9.0\LIB\WIN32\DEBUG\VCLE.LIB|ustring
[ILINK32 Error] Error: Unresolved external '__fastcall System::Internal::Strhlpr::UnicodeFromPChar(System::UnicodeString&, char *, bool)' referenced from C:\PROGRAM FILES (X86)\EMBARCADERO\RAD STUDIO\9.0\LIB\WIN32\DEBUG\VCLE.LIB|ustring
[ILINK32 Error] Error: Unresolved external '__fastcall System::Sysutils::StrToDateTime(const System::UnicodeString)' referenced from C:\PROGRAM FILES (X86)\EMBARCADERO\RAD STUDIO\9.0\LIB\WIN32\DEBUG\VCLE.LIB|datetime
[ILINK32 Error] Error: Unresolved external '__fastcall System::Sysutils::StrToDate(const System::UnicodeString)' referenced from C:\PROGRAM FILES (X86)\EMBARCADERO\RAD STUDIO\9.0\LIB\WIN32\DEBUG\VCLE.LIB|datetime
[ILINK32 Error] Error: Unresolved external '__fastcall System::Syncobjs::TInterlocked::Increment(int&)' referenced from C:\PROGRAM FILES (X86)\EMBARCADERO\RAD STUDIO\9.0\LIB\WIN32\DEBUG\VCLE.LIB|ustring
[ILINK32 Error] Error: Unresolved external '__fastcall System::Sysutils::StrToTime(const System::UnicodeString)' referenced from C:\PROGRAM FILES (X86)\EMBARCADERO\RAD STUDIO\9.0\LIB\WIN32\DEBUG\VCLE.LIB|datetime
[ILINK32 Error] Error: Unable to perform link 
```

这是我的主要代码：

```
int _tmain(int argc, _TCHAR* argv[])
{

//TDateTime Mine("12/05/1990",TDateTime::TDateTimeFlag::Date);

TDateTime Mine("12/05/1990");

getch();
return 0;
} 
```

我已经包括了'vcl.h'

我该怎么做才能让它工作？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-12T08:17:54.630

我现在不使用 Borland/Embarcadero 工具，但我猜你忘记链接到 vcle.lib，因为链接器报告。

似乎`TDateTime`构造函数使用`Sysutils::StrToDateTime()`的是在 vcle.lib 中实现的。

将 vcle.lib 添加到链接器设置，并查看它是否构建。链接器设置可以在`Project Options > Linker`

# polygon - 如何使用 C# Entity Framework 5 DbGeography 空间数据更正多边形环方向

> ID：12383776
> 
> 赞同：7
> 
> 时间：2012-09-12T08:10:15.567
> 
> 标签：polygon, spatial, entity-framework-5, geography, sqlgeography

我正在使用新的 Entity-Framework 5，使用 Spatial 数据类型 DbGeography 作为我的模型的一部分，用于在一个实例中存储 POINT，在另一个实例中存储 POLYGON。

当设置我的 POLYGON 的值时，所有保存都没有错误，但是只有当我按顺时针顺序在地图上绘制多边形时才会出现这种情况。如果我以逆时针方向绘制 POLGON，我会在 sql 级别收到错误，指示数据是无效的地理类型。

现在，在对这个问题进行了自己的研究之后，它似乎源于地理数据类型在多边形环方向方面非常严格。最常见的解决方案似乎是将多边形创建为几何图形，然后将其转换为地理类型。

我正在寻找 C# 中的解决方案，可以在数据发送到 sql 之前将其应用于数据。基本上可以自动更正坐标数组的环方向。

我尝试捕获错误，然后通过反转数组来重建字符串。这在某些情况下有效，但首先它不可靠，其次捕获错误会对性能造成很大影响。

谢谢克里斯

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-18T02:18:33.630

嗨我有同样的问题并通过使用解决了它

```
var sqlGeography = SqlGeography.STGeomFromText().MakeValid()
var invertedSqlGeography = sqlGeography.ReorientObject(); 
```

有关更多详细信息，请参见[此处](http://gerardbeckerleg.wordpress.com/2013/03/18/dbgeography-reverse-polygon-point-order-with-entity-framework-5-and-mssql-2008/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-21T11:39:59.643

我自己遇到了订单问题，我使用 SQLSpatialTools 中的 MakeValidGeographyFromText 函数解决了这个问题，我[在](http://sqlspatialtools.codeplex.com/) SP 中以以下方式使用它：

```
SET @ge = dbo.MakeValidGeographyFromText(
    'POLYGON((' + @pois + '))', 4326); 
```

其中@pois 是一个字符串，其中包含有效格式的坐标，但旋转错误。

我不确定与 EF-5 集成有多么容易，但我看到了两种方法：

1.  在使用正确的多边形调用 EF 之前，直接从 C# 中使用该函数。
2.  在 SQL 服务器上安装 sqlspatialtools，并在那里进行处理。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2019-07-11T16:20:28.787

发生这种情况的原因是，对于地理类型，当从您的角度看方向“错误”时，您基本上创建了整个地球，除了预期的区域。

第一步是检测是否是这种情况。这可以通过该`EnvelopeAngle()`方法轻松完成（请参阅[Microsoft 文档](https://docs.microsoft.com/en-us/dotnet/api/microsoft.sqlserver.types.sqlgeography.envelopeangle?view=sql-smo-140.17283.0#Microsoft_SqlServer_Types_SqlGeography_EnvelopeAngle)）。当这个角度大于 90º 时，您的多边形描述的不仅仅是一个半球，这意味着方向不是您想要的，并且应该颠倒顺序。

倒车可以用[`ReorientObject()`](https://docs.microsoft.com/en-us/dotnet/api/microsoft.sqlserver.types.sqlgeography.reorientobject?view=sql-smo-140.17283.0).

所以这样的事情应该可以解决问题

```
SqlGeography geoPolygon = ....;
if (geoPolygon.EnvelopeAngle() > 90)
{
    geoPolygon = geoPolygon.ReorientObject();
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-09T00:20:59.563

同样的问题，使用 Bing 地图 v7 及其形状工具包绘制多边形在这里找到：[http ://bingmapsv7modules.codeplex.com/wikipage?title=Shape%20Toolbox%20Module](http://bingmapsv7modules.codeplex.com/wikipage?title=Shape%20Toolbox%20Module)

# wordpress - 在 wordpress 中自定义联系表 7

> ID：12383784
> 
> 赞同：1
> 
> 时间：2012-09-12T08:10:44.087
> 
> 标签：wordpress, email, contact-form-7

我在 word press 中使用联系表 7。在这里，我创建了 2 个表单，即表单 1、表单 2。当表单 1 的数据填写并提交时，它需要转到表单 2 页面。

在这里，我不想在提交表单 1 时发送邮件。所以我需要停止向表单 1 发送电子邮件，并且在提交表单 1 后它需要转到表单 2 页面。如果我提交表格 2，我需要发送一封电子邮件。我已将两种表格分配到不同的页面。怎么做？

任何帮助是极大的赞赏！

提前致谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-01T08:46:23.300

在表格 1 的联系人管理页面上，您会在底部附近找到**附加设置区域。**只需在其中插入两行：

```
demo_mode: on
on_sent_ok: "location = 'http://example.com/';" 
```

1.  通过`demo_mode`设置，您可以停止电子邮件发送。此外，包括 Akismet 在内的所有验证都将在表单字段上完成。

2.  提交成功后，您可以使用`on_sent_ok`JavaScript 动作挂钩运行一行 JavaScript 代码。使用`location`参数，您可以指定要重定向到的 URL。

![CF7 附加设置](../Images/bc830162de085d12d5f1c1135c5d8b60.png)

最后，您可能希望隐藏 Form 1 页面上的弹出消息。为此，您可以使用例如一些`css`样式：

```
<form-id> .wpcf7-response-output {
    display: none;
} 
```

* * *

测试：

*   联系表格 7 版本 3.3.1
*   WordPress 版本 3.4.2

# objective-c - Apple App 上传图标验证错误

> ID：12383787
> 
> 赞同：4
> 
> 时间：2012-09-12T08:10:51.137
> 
> 标签：objective-c, xcode

我正在向 Mac App Store 上传一个免费应用程序，但在验证过程中我不断收到此错误消息：

> 应用程序包不包含 ICNS 格式的图标，同时包含 a`512x512`和`512x512@2x`图像。如需更多帮助，请参阅 Apple 人机界面指南。

唯一的问题是，有一些文件称为`icon_512x512.png`和`icon_512x512@2x.png`，以及用于所有其他必要分辨率的文件。

由于 Apple 完全没有帮助，我希望有人知道如何解决这个问题，或者至少着手创建一个符合规范的图标。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-01T02:08:42.060

据我了解，如果您在 Icon Composer 中创建 .icns ，即使存在正确`512x512@2x`的验证也会失败。使用 iconutil 将 .icns 转换回 iconset，然后使用 iconutil 从 iconset 创建一个新的 .icns。

例如：

```
resources $ iconutil -c iconset icon.icns
resources $ iconutil -c icns icon.iconset 
```

关于 iconutil 的更多信息在[这里](http://developer.apple.com/library/mac/#documentation/GraphicsAnimation/Conceptual/HighResolutionOSX/Optimizing/Optimizing.html)。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-05-20T18:41:12.097

这解决了我的问题，但我曾经`cd`去文件夹，然后我进入

```
iconutil -c iconset icon.icns
iconutil -c icns icon.iconset 
```

图标名称必须是命令中的图标。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-12T08:29:59.030

您应该准备2张带有png扩展名的图片，一张是512x512像素，命名为icon_512x512.png，一张是1024x1024像素，命名为icon_512x512@2x.png，将两张图片放在一个文件夹中（例如命名为icon），然后取出文件夹使用命令`iconutil -c icns icon`，你会得到一个 icon.icns，将它拖到 Xcode 并放在目标的 App 图标上。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2014-10-10T15:05:44.000

此外，在指定图标名称时，请确保在 plist 中包含 .icns 文件扩展名。在某些时候，这成为 iTunes Connect 的要求。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2019-02-17T21:24:36.390

只需创建图标 1024x1024 然后将该图标添加到文件夹 Images.xcassets/AppIcon.appiconset

在这些之后，您将在 xcode 下看到图标为“未签名”

只需将该图标拖到空图标字段即可。而已 。

[![在此处输入图像描述](../Images/f5b9715f99483cc981f67c250156703f.png)](https://i.stack.imgur.com/BgUFh.png)

# nhibernate - 将接口映射到 NHibernate 中的默认类型

> ID：12383790
> 
> 赞同：0
> 
> 时间：2012-09-12T08:11:05.380
> 
> 标签：nhibernate, interface, nhibernate-mapping

是否可以说：

```
var user = session.Get<IUser>(1); 
```

其中 IUser 是一个接口，并且有一个称为 User 的实现。User 类映射到 Users 表，我想在 NHibernate 中执行 Get/Query 时将其用作默认类型。

我会很感激帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-12T15:19:37.520

最简洁的答案是不。NHibernate 要求您映射和指定具体的类。

有一个冗长而混乱的答案涉及加入子类映射，它有点工作，因为它允许您映射接口类型，然后实现可以持久化的接口的所有具体类型，但它并没有真正给你您似乎想要的是将接口属性映射到数据库的能力，然后使用指定的默认类型获取/保存满足接口的任何旧实体。

你可以编写某种包装器`ISession`，让你做你想做的事 - 即，翻译任何对`wrapper.Get<IUser>(id)`to 的调用`session.Get<User>(id)`，但是你基本上只是把`IUser`它当作一个别名，`User`这真的违背了使用接口的全部原因首先。

（除此之外：如果您仅出于 IoC 目的使用接口，即 IUser 和“正常”操作中的具体类型之间将存在一对一的映射，例如用于测试目的的模拟用户，那么您可以做的是将 NHibernate 包装在一个存储库后面，该存储库知道如何与您的 IoC 解决方案对话以获取具体类型，然后采取相应的行动。由于隐式转换，查询仍然按预期工作。我已经完成了它并且它有效，但它是一个有点乱。）

# javascript - 单击后定义“this”

> ID：12383791
> 
> 赞同：1
> 
> 时间：2012-09-12T08:11:07.860
> 
> 标签：javascript, jquery, this

我有一堆 ajax 函数我正在触发事件（点击、dblclick、按键等）。在我的 events.js 文件的开头，我想定义一个变量，它代表用户点击的元素的 id上。目前是

```
$(this).parents('li').attr('data-id') 
```

到目前为止，我尝试过这种方式：

```
var element_id = $(this).parents('li').attr('data-id');

var test = function(id)
{
    ajaxCall(id);
}

$('.js_btn_test').live('click', function()
{
    test(element_id);
} 
```

不幸的是，它不起作用。我认为当我单击 .js_btn_test 并被评估为其父“li”时会解析 element_id var，然后获取 data-id。

谢谢你的帮助 ！

EDIT1：基本 HTML 结构

看起来像这样

```
<li data-id="<?php echo $item->getId(); ?>">
    <button class="js_btn_test">Test</button>
</li> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-12T08:20:19.893

不，它不是那样工作的。和...

`var element_id = $(this).parents('li').attr('data-id');`

*...您立即*`element_id`为变量分配一个值，而不取决于您下次检查其值时的值。*`this`*

 *一种可能的解决方法是改用函数：

```
var getElementId = function(el) {
  return $(el).parents('li').attr('data-id');
};
...
$('.js_btn_test').live('click', function() {
   test(getElementId(this));
}); 
```

...`this`在事件处理程序中（您传递给的匿名函数`live`）是指触发事件的元素。

作为旁注，您可以交换`.attr('data-id')`为只是调用，如此[处](http://api.jquery.com/data/#data-html5)`.data('id')`所示和[此处](http://jsfiddle.net/MgWEj/)描述。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-12T08:17:20.310

如果我理解正确，您正在尝试做的是将`id`基于单击元素获取的逻辑放入变量中。这是不可能的，除非你把它变成一个函数（在这种情况下，根本不需要把它变成一个变量）。

例如：

```
function getIdFromElement(el) {
    return $(el).parents('li').attr('data-id');
}

$('.js_btn_test').live('click', function()
{
    test(getIdFromElement(this));
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-12T08:25:33.240

你不能得到`this`，因为它还没有在上下文中。

在`live`最新版本的 jquery 中也不推荐使用。

这是jquery网站的摘录

***从 jQuery 1.7 开始**，该`.live()`方法已被弃用。用于`.on()`附加事件处理程序。旧版本 jQuery 的用户应该`.delegate()`优先使用`.live()`.*

```
var test = function(id)
{
    ajaxCall(id);
}

$('.js_btn_test').on('click', function()
{
    var element_id = $(this).parents('li').attr('data-id');
    test(element_id);
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-12T08:13:46.300

`this`在正确的上下文中执行之前，您无法正确解析。

```
var test = function(id)
{
    ajaxCall(id);
}

$('.js_btn_test').live('click', function()
{
    var element_id = $(this).parents('li').attr('data-id');
    test(element_id);

    func01(element_id);
    func02(element_id);
    // etc
} 
```*

# visual-studio-2012 - Visual Studio 2012 本地数据库

> ID：12383793
> 
> 赞同：4
> 
> 时间：2012-09-12T08:11:16.020
> 
> 标签：visual-studio-2012, sql-server-2012

Visual Studio 2012 安装包是否包含 SQL Server Express 2012 LocalDB 或必须单独安装？如果是单独安装，应该先安装哪个包？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-09-12T16:00:32.417

它带有VS 2012（特别是SSDT部分，只要您在安装过程中没有在高级选项中取消选择它）。如果你这样做了，只需安装 SSDT，它就会安装 localdb。

# sql - 日志文件中的致命错误消息

> ID：12383794
> 
> 赞同：0
> 
> 时间：2012-09-12T08:11:19.030
> 
> 标签：sql, oracle, sql-loader

当我尝试使用 sql loader 加载时，我的日志文件中生成了一条主要错误消息

我用这个创建了一个名为 Ad2.ctl 的控制文件

和加载命令

```
sqlldr scott/tiger@MYDB CONTROL='Ad2.ctl' LOG='Ad2.log' 
```

该文件的内容包括以下示例

运行 sql loader 命令后，我得到一长串错误，并且未填充 ADDRESS 表。

错误包括以下内容

```
SQL*Loader: Release 10.2.0.3.0 - Production on Wed Sep 12 08:47:28 2012

 Copyright (c) 1982, 2005, Oracle.  All rights reserved.

 Control File:   Ad2.ctl
 Data File:      Abbeyruntest2.csv
  Bad File:     Abbeyruntest2.bad
  Discard File: Abbeyruntest2.dis 
 (Allow all discards)

Number to load: ALL
Number to skip: 0
Errors allowed: 50
Bind array:     64 rows, maximum of 256000 bytes
Continuation:    none specified
Path used:      Conventional

Table ADDRESS, loaded from every logical record.
Insert option in effect for this table: APPEND

Record 2: Rejected - Error on table ADDRESS, column ADDRESSAREA.
Column not found before end of logical record (use TRAILING NULLCOLS)
Record 3: Rejected - Error on table ADDRESS, column ADDRESSAREA.
Column not found before end of logical record (use TRAILING NULLCOLS) 
```

以新手的身份发布长错误并对此感到困惑。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-12T12:42:16.060

似乎问题在于您的 csv 文件中的引号。

[我在这里](http://www.freelists.org/post/oracle-l/sqlloader-load-records-with-quotes,1)找到了一篇关于如何加载此类文件的文章。

```
LOAD DATA
APPEND INTO TABLE testing
FIELDS TERMINATED BY ','
TRAILING NULLCOLS
(
  a
 ,b  "replace ( :b ,'"' ,'' )"
) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-12T15:55:44.907

您的 CSV 文件与您的控制文件完全不对应。您的 CSV 文件中有太多逗号 - 根据 FIELDS TERMINATED BY ',' 子句，每个逗号分隔一个新字段。我因此修改了您的数据，并且有效：

```
1,FLAT,                    ,1  ,Abesinia Passage   , 
2,Flat e-1,Edmund's Home   ,1a ,Arena's Palace Lane, 
3,flat 1,`Anderson's House',11a,                   ,Laguna Estate 
```

如果您无法修改 CSV 文件，则需要在控制文件中定义 FILLER 字段，以便字段规范与实际数据一致。

# android - 片段未显示

> ID：12383797
> 
> 赞同：1
> 
> 时间：2012-09-12T08:11:26.673
> 
> 标签：android, android-fragments

这个问题有点奇怪和复杂——有时（它不是确定性的或者我不知道原因）我的一些片段没有出现在事务中。

我检查了所有内容两次，似乎没问题 - 之前正确添加了片段，不为空等，将字段`mHidden`设置为交易`true`之前和`false`之后，但我看到的只是一个空的地方。

有什么问题？

更准确地说，这个问题 - 我同时管理多个片段`Activity`（最多 25 个），并且交易同时隐藏/显示其中的许多片段。更重要的是，我将 4 个片段添加到同一个布局持有者 ( `FrameLayout`)，并切换它们的可见性 - 但我认为这可能不是原因。

我开始讨厌安卓了……

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-12T09:29:33.063

好的，很高兴您在向其他人展示问题的同时提出解决方案的频率 - 这里的问题在于隐藏/显示动画 - 当我隐藏带有某种动画的片段时有一个用例（缩放到 0.0 ，淡入淡出等）和后来（特殊情况）显示它没有进入反向动画（作为优化） - 片段显示，但保持缩放到 0 或淡出。

# android - 需要帮助以线性布局居中

> ID：12383803
> 
> 赞同：0
> 
> 时间：2012-09-12T08:12:09.560
> 
> 标签：android, android-layout

我有以下 xml 布局：

```
<ScrollView
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:fillViewport="true" >

    <LinearLayout
        android:layout_width="match_parent"
        android:layout_height="match_parent"
        android:background="#FF99E6"
        android:orientation="vertical" >

        <TextView
            android:id="@+id/textView1"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_marginLeft="10dip"
            android:layout_marginTop="5dip"
            android:text="Was patient"
            android:textAppearance="?android:attr/textAppearanceLarge" />

        <LinearLayout
            android:layout_width="match_parent"
            android:layout_height="2dip"
            android:background="#298EB5"
            android:orientation="horizontal" >
        </LinearLayout>

        <TextView
            android:id="@+id/textView1"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_marginLeft="7dip"
            android:layout_marginTop="10dip"
            android:text="Hier wat extra info"
            android:textAppearance="?android:attr/textAppearanceMedium" />

        <LinearLayout
            android:layout_width="match_parent"
            android:layout_height="0dip"
            android:layout_gravity="center"
            android:layout_weight="1"
            android:background="#FF6633"
            android:orientation="vertical" >

            <TimePicker
                android:id="@+id/timePicker1"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:layout_gravity="center" />
        </LinearLayout>

        <LinearLayout
            android:layout_width="match_parent"
            android:layout_height="wrap_content"

            android:background="#298EE5"
            android:orientation="horizontal" >

            <Button
                android:id="@+id/button1"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:text="Button" />

            <Button
                android:id="@+id/button2"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:text="Button" />
        </LinearLayout>
    </LinearLayout>
</ScrollView> 
```

这会产生以下输出：

![在此处输入图像描述](../Images/3cd998e78a9f4364ce0888845f1813ed.png)

现在我想将该日期选择器放在橙色容器的中心。我将属性设置为居中，但这只是水平居中。

我只能使用线性布局，所以请不要建议使用相对布局:)

我已经为此苦苦挣扎了一段时间，所以任何帮助将不胜感激！

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-12T08:17:34.897

删除`android:layout_gravity`你的`timepicker`和`orange container`并设置`android:gravity="center"`为你的`orange container`，使其居中。

`android:gravity`定义 的重力`childs`，同时`layout_gravity`定义`layout/view`自身的重力。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-12T08:14:41.023

尝试，

```
android:layout_gravity="center_vertical" 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-12T08:18:12.863

用这个，

```
<LinearLayout
            android:layout_width="match_parent"
            android:layout_height="0dip"
            android:layout_gravity="center"
            android:layout_weight="1"
            android:background="#FF6633"
            android:gravity="center"
            android:orientation="vertical" >

            <TimePicker
                android:id="@+id/timePicker1"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:layout_gravity="center" /> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-12T08:19:07.657

**android:layout_gravity**子级可以提供给其父级的标准重力常数。

**android:gravity** 指定如何在对象本身内放置对象的内容，包括 x 轴和 y 轴。

所以在你的橙色`LinearLayout`使用`android:gravity`而不是`android:layout_gravity`.

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-12T08:24:50.313

将时间选择器的父线性布局的重力设置为中心，如下所示

```
 <LinearLayout
        android:layout_width="match_parent"
        android:layout_height="0dip"
        android:layout_gravity="center"
        android:layout_weight="1"
        android:background="#FF6633"
        android:gravity="center"
        android:orientation="vertical" > 
```

# jquery - 带有fancybox的jQuery使用trigger（）导致堆栈溢出

> ID：12383809
> 
> 赞同：0
> 
> 时间：2012-09-12T08:12:41.900
> 
> 标签：jquery, triggers, fancybox, stack-overflow

我试图通过单击与fancybox 画廊无关的元素来打开fancybox 图片库（带有缩略图），所以我想使用triger 方法。

问题是，如果照片数量较多（例如 8 个画廊，每个 gal 有 10 张照片），则会导致堆栈溢出。我在这里找到的答案很少，例如使用 live()、bind()、stopPropagation()、stopImmediatePropagation() 等，但似乎没有什么对我有用。

HTML 是这样的：

```
<div id="thumb_1" class="fancy-thumb">
  <a class="fancybox-thumb" id="gal-1 rel="gal-1"><img src="./foo/bar.baz"/></a>
  <a class="fancybox-thumb" rel="gal-1"><img src="./foo/bar.baz"/></a>
  <a class="fancybox-thumb" rel="gal-1"><img src="./foo/bar.baz"/></a>
  .........
  <a class="fancybox-thumb" rel="gal-1"><img src="./foo/bar.baz"/></a>
  <a class="fancybox-thumb" rel="gal-1"><img src="./foo/bar.baz"/></a>
  <another html elements absolute positioned such as labels etc>
</div>
.........
<div id="thumb_10" class="fancy-thumb">
  <a class="fancybox-thumb" id="gal-10 rel="gal-10"><img src="./foo/bar.baz"/></a>
  <a class="fancybox-thumb" rel="gal-10"><img src="./foo/bar.baz"/></a>
  <a class="fancybox-thumb" rel="gal-10"><img src="./foo/bar.baz"/></a>
  .........
  <a class="fancybox-thumb" rel="gal-10"><img src="./foo/bar.baz"/></a>
  <a class="fancybox-thumb" rel="gal-10"><img src="./foo/bar.baz"/></a>
  <another html elements absolute positioned such as labels etc>
</div> 
```

和 JS 看起来像这样：

```
// fancybox is initialized in after document ready
$(".fancybox-thumb").fancybox();

// this function should trigger fancybox
this.openGal(e){
   var gal_id = $(e.currentTarget).attr("id");
   $("#" + gal_id).trigger("click");
   return false;
   // note that here I've tried almost everything found at stackoverflow
   // but nothing seems to work
}

// listeren looks like this
$(".fancy-thumb").click(function(e) {scope.openGal(e);}); 
```

请不要发布应该以标准方式发布的答案，并且使用 trigger() 不是一个好主意。我需要使用触发器（）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-12T09:25:17.970

```
function openGal(e){
   var gal_id = $(e.currentTarget).attr("id");
   $("#" + gal_id).trigger("click");  //this was causing the following function to be called, resulting in an infinite loop
   return false;
}

// by delegating down a level, we are at the elements we actually want to attack
// the '>' operator selects child elements
$(".fancy-thumb >").click(function(e) {
    openGal(e);
});​ 
```

[http://jsfiddle.net/LsmVb/](http://jsfiddle.net/LsmVb/)显示了如何正确调用警报，通过更改`$(".fancy-thumb a")`您`$(".fancy-thumb")`可以看到无限循环出现的位置。

您还需要在您的精美拇指内容中包含一个封闭的 div 标签，这将允许上述操作员选择它。如果您不想这样做，则所有未包含在标签中的文本都将不可点击。

# windows - 将mac上生成的ssh密钥转换为ppk

> ID：12383811
> 
> 赞同：5
> 
> 时间：2012-09-12T08:12:49.233
> 
> 标签：windows, mercurial, ssh, tortoisehg, putty

我有一个私人 ssh 密钥，我在 mac 上使用它来访问我公司的存储库。

目前我在 Windows 环境下工作，想用 Tortoise HG 访问这些 repo。

不幸的是，我似乎需要一个 .ppk、PuttyPrivateKey 来让这种情况发生。

有没有办法将我现有的 id_rsa 文件转换为 ppk 文件？

或者，我可以在 Windows 环境下使用我现有的 ssh 密钥文件来访问 hg 存储库吗？

提前致谢！

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-09-12T08:41:43.713

我不能说我 100% 熟悉这个主题，但是，您是否尝试过使用 PuTTYgen 导入 id_rsa 文件？

> 使用“转换”菜单中的“导入”命令，PuTTYgen 可以加载 OpenSSH 格式和 ssh.com 格式的 SSH-2 私钥。加载其中一种密钥类型后，您可以将其保存为 PuTTY 格式的密钥 (*.PPK)，以便您可以将其与 PuTTY 套件一起使用。此过程将不会更改密码（除非您故意更改它）。[[来源](http://the.earth.li/~sgtatham/putty/0.62/htmldoc/Chapter8.html#puttygen-conversions)]

您可以在通常的 PuTTY 下载页面上下载 PuTTYgen：

[http://www.chiark.greenend.org.uk/~sgtatham/putty/download.html](http://www.chiark.greenend.org.uk/~sgtatham/putty/download.html)

# arrays - 在 Perl 中将字母添加到数组的最后一个元素

> ID：12383812
> 
> 赞同：0
> 
> 时间：2012-09-12T08:12:54.053
> 
> 标签：arrays, perl, element

下面给出的脚本在每次出现“E”时剪切输入字符串并将其存储在一个数组中。最终输出显示“E”的每个位置的所有碎片字符串。但问题是，这个脚本在输出的数组的最后一个元素中没有显示任何“E”，它只显示到“D”。我得到的输出是-

```
ABCDEABCDE ABCDE ABCDE ABCD
ABCDE ABCDEABCDE ABCDE ABCD
ABCDE ABCDE ABCDEABCDE ABCD
ABCDE ABCDE ABCDE ABCDEABCD
ABCDE ABCDE ABCDE ABCDE ABCD 
```

但我想要的最终输出是 -

```
ABCDEABCDE ABCDE ABCDE ABCDE
ABCDE ABCDEABCDE ABCDE ABCDE
ABCDE ABCDE ABCDEABCDE ABCDE
ABCDE ABCDE ABCDE ABCDEABCDE
ABCDE ABCDE ABCDE ABCDE ABCDE 
```

我的剧本是——

```
my $s = 'ABCDEABCDEABCDEABCDEABCDE';
if (substr($s,-1) eq "E") {
    @array1 = @array[0 .. $#array-1];
    print "Results of 1-missed cleavage having 1E at the end\n\n";
    for my $array1 (@array1) {
        substr($s, $array1-1, 1) = "\0";
        my @a = split(/E(?!P)/, $s);
        substr($s, $array1-1, 1) = 'E';
        $_ =~ s/\0/E/g foreach (@a);
        $result = join ("E,", @a); 
        @final = split(/,/, $result);
        print "@final\n";
    }
    my @output=split(/E(?!P)/, $s);
    $out = join ("E,", @output); 
    @output1 = split(/,/, $out);
    print "@output1\n\n";
}
else {
    print "E is not at terminal position"
}; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-12T08:20:58.170

考虑要简单一点？

```
my $s = 'ABCDEABCDEABCDEABCDEABCDE';

# Split on "E not followed by whitespace".
# Replace with "E<space><matched char, if any>"
$s =~ s/E([^\s]?)/E \1/g;

print $s, "\n\n"; 
```

输出：

```
haiku:~$ perl blah.pl 
ABCDE ABCDE ABCDE ABCDE ABCDE 

haiku:~$ 
```

Perl 是一个非常强大的文本操作工具，它的正则表达式是首屈一指的（恕我直言）。

# java - Jersey REST Web 服务获取 Web 项目 URL

> ID：12383822
> 
> 赞同：1
> 
> 时间：2012-09-12T08:13:18.920
> 
> 标签：java, rest, jersey

我有一个简单的带有 Jersey 的 REST Web 服务，并且我只有一个资源类，名为**categorizer**。

此资源将为**GET**请求返回一个 HTML 表单。当用户填写这个 HTML 表单时，它会发送一个**POST**请求到同一个资源类，即**categorizer**。所以我的问题变成了如何在 HTML 表单中获取正确的**操作字段 URL，该 URL 是为****GET**请求返回的。我希望这个 URL 可以是动态的。换句话说，当它部署在具有不同域名（IP地址）的不同服务器上时，它将起作用。

谢谢你的帮助 ！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-12T08:19:03.323

您可以轻松地将 JSP 与 Jersey 结合使用，并动态创建所需的 HTML 页面。可以[在此页面上](http://blog.usul.org/using-jsp-in-a-jersey-jax-rs-restful-application/)找到一个示例。

希望这可以帮助。

# android - java.net.SocketException：android 设备中没有这样的设备

> ID：12383827
> 
> 赞同：0
> 
> 时间：2012-09-12T08:13:42.340
> 
> 标签：android, file, socketexception

当我试图写一个文件时，SocketException 正在抛出。

```
private void openSocket() {
    try{
    multicastSocket = new MulticastSocket(port);
    multicastSocket.setTimeToLive(2);
    multicastSocket.setReuseAddress(true);
    multicastSocket.setNetworkInterface(networkInterface);
    multicastSocket.joinGroup(groupAddress);
    System.out.println("----------------Port Opened----------------");
    }catch (Exception e) {
        e.printStackTrace();
        Toast.makeText(getBaseContext(), "openSocket!!"+e, Toast.LENGTH_SHORT).show();
    }
} 
```

日志如下：

```
09-13 13:30:46.335: W/System.err(23180): java.net.SocketException: No such device
09-13 13:30:46.335: W/System.err(23180):    at org.apache.harmony.luni.platform.OSNetworkSystem.setSocketOption(Native Method)
09-13 13:30:46.335: W/System.err(23180):    at dalvik.system.BlockGuard$WrappedNetworkSystem.setSocketOption(BlockGuard.java:382)
09-13 13:30:46.335: W/System.err(23180):    at org.apache.harmony.luni.net.PlainDatagramSocketImpl.setOption(PlainDatagramSocketImpl.java:198)
09-13 13:30:46.335: W/System.err(23180):    at org.apache.harmony.luni.net.PlainDatagramSocketImpl.join(PlainDatagramSocketImpl.java:137)
09-13 13:30:46.335: W/System.err(23180):    at java.net.MulticastSocket.joinGroup(MulticastSocket.java:190)
09-13 13:30:46.335: W/System.err(23180):    at com.hp.loki.Settings.openSocket(Settings.java:386)
09-13 13:30:46.343: W/System.err(23180):    at com.hp.loki.Settings.access$4(Settings.java:380)
09-13 13:30:46.343: W/System.err(23180):    at com.hp.loki.Settings$2.onClick(Settings.java:183)
09-13 13:30:46.343: W/System.err(23180):    at android.view.View.performClick(View.java:2731)
09-13 13:30:46.343: W/System.err(23180):    at android.view.View$PerformClick.run(View.java:9387)
09-13 13:30:46.343: W/System.err(23180):    at android.os.Handler.handleCallback(Handler.java:587)
09-13 13:30:46.343: W/System.err(23180):    at android.os.Handler.dispatchMessage(Handler.java:92)
09-13 13:30:46.343: W/System.err(23180):    at android.os.Looper.loop(Looper.java:130)
09-13 13:30:46.343: W/System.err(23180):    at android.app.ActivityThread.main(ActivityThread.java:3694)
09-13 13:30:46.351: W/System.err(23180):    at java.lang.reflect.Method.invokeNative(Native Method)
09-13 13:30:46.351: W/System.err(23180):    at java.lang.reflect.Method.invoke(Method.java:507)
09-13 13:30:46.351: W/System.err(23180):    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:860)
09-13 13:30:46.351: W/System.err(23180):    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:618)
09-13 13:30:46.351: W/System.err(23180):    at dalvik.system.NativeStart.main(Native Method) 
```

# git - 开发人员机器上的 git 服务器是什么类型的？

> ID：12383837
> 
> 赞同：0
> 
> 时间：2012-09-12T08:13:59.997
> 
> 标签：git

今天，我们有一个带有 ssh 的公共存储库，每个人都可以通过自己的用户帐户访问。这在内部非常有效。

但是，我们经常在可以访问网络但无法访问 Internet 的客户站点进行集成旅行。我们需要在现场的开发人员之间直接共享代码。让开发人员直接相互拉取更改的简单而好方法是什么？

我们在开发笔记本电脑上使用 Windows。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-12T08:30:35.463

使用共享的本地网络驱动器。

# .net - 枚举命名空间不可用

> ID：12383844
> 
> 赞同：0
> 
> 时间：2012-09-12T08:14:28.640
> 
> 标签：.net, vb.net, linq, syntax

我已经让这段代码运行了一段时间，没有错误。今天，出现了一个新的错误。也许在 Windows 更新之后？

> 错误 1“选择”不是“System.Collections.Generic.IEnumerable(Of Integer)”的成员。C:\myclass.vb 3274 35 TBDevice 。

```
Dim value As String = "00000001"
Dim B() As Byte = Global.System.Linq.Enumerable.Range(0, value.Length / 8).Select(Function(pos) Convert.ToByte(value.Substring(pos * 8, 8), 2)).ToArray() 
```

知道如何摆脱这个错误吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-14T09:48:59.287

您缺少文件中的导入：`Imports System.Linq`.

# qt - Qt-如何在列表视图中显示文本编辑字符串？

> ID：12383850
> 
> 赞同：3
> 
> 时间：2012-09-12T08:14:51.133
> 
> 标签：qt, qtextedit, qlistview, qt4.8, qpushbutton

我有一个***QTextEdit 、 2 个 QPushButtons***（添加 n 删除按钮）和一个***QListView***。当我在文本编辑中输入文本并***单击添加按钮时，文本应添加到列表视图中。***然后，如果我从列表视图中选择任何一个***添加的文本并单击删除按钮，则应该从列表视图中删除文本。***我不知道如何实现这一点。请帮我解决这个问题。提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-12T08:31:44.373

假设您使用的是[QStandardItemModel](http://doc.qt.nokia.com/4.7-snapshot/qstandarditemmodel.html)并且您有以下变量

```
QPushButton* addButton;
QPushButton* removeButton;
QTextEdit* textEdit;
QStandardItemModel* model;
MyObject* this; 
```

下面的代码应该做到这一点：

```
connect(addButton, SIGNAL(clicked()), this, SLOT(onAddButtonClicked()));
connect(removeButton, SIGNAL(clicked()), this, SLOT(onRemoveButtonClicked())); 
```

然后，您定义的 MyObject 类中的两个插槽执行以下操作：

```
void MyObject::onAddButtonClicked() {
    model->appendRow(new QStandardItem(textEdit->plainText());
}

void MyObject::onRemoveButtonClicked() {
    if (model->rowCount() == 0)
        return;
    delete model->takeItem(model->rowCount() - 1);
} 
```

更新视图由处理`QStandardItemModel`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-12T08:23:38.840

如果您不知道如何使用模型/视图/控制器模式，我建议您使用 QListWidget 而不是 QListView。添加到 QListWidget 是一种更简单的方法。您应该创建一个插槽，用于**添加按钮**单击的信号，以及一个用于**删除按钮**单击的插槽。

第一个插槽的代码：

```
m_pListWidget->addItem( m_pTextEdit->toPlainText() ); 
```

第二个插槽的代码：

```
if ( QListWidgetItem* plwiCurrent = m_pListWidget->currentItem() )
{
    m_pListWidget->takeItem( m_pListWidget->row( plwiCurrent ) );
    delete plwiCurrent;
} 
```

# windows - ZK 框架的 SSO 问题？

> ID：12383853
> 
> 赞同：0
> 
> 时间：2012-09-12T08:15:14.923
> 
> 标签：windows, single-sign-on, zk

我正在为我的网络应用程序使用 SSO 登录。我的代码如下所示：

```
@Command("doSSOLogin")
@NotifyChange("showConflictWindow")
public void doSSOLogin(@ContextParam(ContextType.VIEW) Component view) {
logger.info("Login Button is clicked..");
doSSOLoginAuthorization(LoginType.LOGIN_IF_NO_CONFLICT);

}

private void doSSOLoginAuthorization(LoginType argLoginType) {
HttpServletResponse response = getHttpServletResponse();
HttpServletRequest request = getHttpServletRequest();

if (selectedDatabase == null) {
Messagebox.show("Must select a database", "Error", Messagebox.OK,
Messagebox.ERROR);
return;
}
String Authorization = request.getHeader("Authorization");
if (Authorization == null) {
logger.info("Authoriztion is null");
response.reset();
response.setHeader("WWW-Authenticate", "NEGOTIATE");
response.setContentLength(0);
response.setStatus(HttpServletResponse.SC_UNAUTHORIZED);
response.setHeader("connectionCache", selectedDatabase.getValue());
response.setHeader("languageType", selectedLanguage.getValue());
try {
response.flushBuffer();
} catch (IOException e) {
e.printStackTrace();
}
return;
} else {
String token = Authorization.substring("NEGOTIATE ".length());
logger.info("Authoriztion is not null having token ::" + token);
if (token.startsWith("TlRM")) {
logger.debug("We do not support NTLM authentication: " + token);
System.out.println("We do not support NTLM authentication");
return;
}
}
} 
```

当用户单击登录按钮时，它会通过此代码，并且第一次授权为空。因此，在请求标头中设置授权并要求提供窗口凭据，并且当我再次单击此按钮时，第二次获得授权。但我不想再次单击按钮，这项工作应该通过单击完成，因为它已经在我以前的应用程序中工作，但技术是 jsp。

是在我的代码中使用 ZK 还是其他东西的问题？如果您有任何回电的解决方案，请帮助我。

提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-12T10:42:39.383

您可以将您的 if 语句代码放在 doAfterCompose() 方法中。并将 else 代码放在一个单独的方法中，当用户单击按钮时将调用该方法。谢谢

# android - 如何在 Android 上停止 HttpURLConnection 连接

> ID：12383854
> 
> 赞同：12
> 
> 时间：2012-09-12T08:15:18.153
> 
> 标签：android, android-asynctask, httpurlconnection

我使用 AsyncTask 连接 URLPath 如下代码。

```
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.left_list);

    Button btn = (Button)findViewById(resid);
    btn.setOnClickListener(new OnClickListener() {
        @Override
        public void onClick(View v) {
            //how to stop connect
        }
    });
    new Connecting().execute();
}

class Connecting extends AsyncTask<String, String, String> {
    @Override
    protected void onPreExecute() {
            super.onPreExecute();
        //do something
    }

        @Override
        protected String doInBackground(String... aurl) {
            try {
                URL url = new URL(URLPath);
                connection = (HttpURLConnection)url.openConnection();
                connection.setConnectTimeout(30000);
                connection.setReadTimeout(30000);
                connection.setDoInput(true);
                connection.setUseCaches(false);
                connection.connect();
                is = connection.getInputStream();

            }
            catch (Exception e) {
                e.printStackTrace();
            }
            return null;
        }

        @Override
        protected void onPostExecute(String unused) {
            super.onPostExecute(unused);
        //access InputStream is
        }
} 
```

连接可能会花费大量时间进行连接。
在连接时，我想设置按下 Bbutton btn 以停止连接连接。
如何在 setOnClickListener 方法中设置？

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2014-10-21T14:22:49.327

将使用的代码包装`HttpURLConnection`在 a`Future`中，您可以随意取消。您还可以使用`Future`的超时功能，因为超时`HttpURLConnection`不可靠。

在你的网络类中定义一个执行者和未来：

```
final ExecutorService executor = Executors.newCachedThreadPool(Executors.defaultThreadFactory());
Future<MyResult> future; 
```

然后将您的网络代码包装在`Future`这样的内部：

```
future = executor.submit(new Callable<MyResult>() {
    @Override
    public MyResult call() throws IOException {
        HttpURLConnection connection = (HttpURLConnection) new URL(url).openConnection();
        try {
            // .. use the connection ...
        } finally {
            connection.disconnect();
        }
    }
});

MyResult result = future.get(TIMEOUT, TimeUnit.SECONDS); 
```

当您想取消时，您可以从任何线程进行此调用：

```
future.cancel(true); 
```

如果未来超时或被取消，连接任务可能会继续阻塞某个`HttpURLConnection`方法，但您的应用程序不会被阻止。您仍然应该在连接上设置适当的超时，以加快线程和网络套接字的释放。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2019-03-26T10:42:48.243

通过 (HttpURLConnection)url.openConnection() 保存 HttpURLConnection 响应；作为类成员： HttpURLConnection mHttpURLConnection = (HttpURLConnection)url.openConnection();

在您致电 future.cancel(true) 之后；然后调用 mHttpURLConnection.disconnect()

所以网络请求会尽快结束

# iphone - 应用退出后 Core Data 数据库是否关闭？

> ID：12383856
> 
> 赞同：2
> 
> 时间：2012-09-12T08:15:32.177
> 
> 标签：iphone, objective-c, core-data

我一直在查看当前应用程序中的一段代码，如果`Core Data`数据库已经打开，则检查应用程序启动。该数据库只能由单个应用程序（和单个用户）访问，因此无法从其他来源打开。我不确定的一件事是，如果应用程序意外退出，发生这种情况时数据库是否会关闭？

我想我问的是在单用户系统中是否存在用户启动应用程序并且数据库已经打开的情况？在测试中，我从未见过调用“它已经打开”的代码，所以我只是好奇我是否需要它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-12T08:48:59.513

在 iOS 上（作为一个单用户应用程序是一次激活的操作系统），您的应用程序将“打开”和“关闭”数据库。

如果应用程序意外关闭，您的应用程序在该时刻没有持续的所有更改都将丢失。应用程序不会打开数据库，除非您告诉它（即通过设置 NSPersistantStorageController 和上下文）。

当可以在应用程序内的不同阶段触发数据库打开时，“已打开”代码将派上用场。因此，如果只有一个地方可以打开它，则不需要代码。不过，它不会受伤。

经常让我抓狂的是，当我在调试期间使用 sqlite 数据库浏览器或 Liya 之类的东西来监视数据库时，浏览器会阻止对存储的更新。但那是在调试期间，而不是在正常使用期间。

# android - 如何以编程方式从磁盘添加图像？

> ID：12383859
> 
> 赞同：0
> 
> 时间：2012-09-12T08:15:46.393
> 
> 标签：android, android-gridview

我在 sdcard 文件夹中有不为人知的图像数量。

我想将它们展示到 gridVew 中。

每个教程都向我解释了如何从可绘制资源的数组中加载，但是......

**如何从文件夹中添加“n”张图片**？

这在我的应用程序中很重要，因为图像由长期服务动态保存/删除，实现了一种非常有趣的应用程序使用方式。在图像上的每个“动作”中，我都可以强制重绘网格，但是......我不知道如何从磁盘“即时”将图像添加到网格中

提前致谢

PS：我在这里浏览到stackoverflow的相关答案，但是很多答案真的没有回答问题本身......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-12T09:11:05.530

我要感谢 Luksprog。

他的评论链接到[http://www.coderanch.com/t/443531/Android/Mobile/display-Images-stored-sdcard](http://www.coderanch.com/t/443531/Android/Mobile/display-Images-stored-sdcard)

这段代码运行良好。

# f# - 使用对象上的模式匹配遍历我的树内容

> ID：12383863
> 
> 赞同：0
> 
> 时间：2012-09-12T08:16:09.850
> 
> 标签：f#, tree, pattern-matching, tree-traversal

我正在尝试使用以下类型在 F# 中表示树数据结构：

```
type Node = 
 val mutable left: Node option
 val mutable right: Node option
 val mutable value: int 

 new (l, r, v) = {left = l; right = r; value = v} 
```

我可以像这样创建一棵树：

```
let root = new Node (Some (new Node (None, None, 2)), Some (new Node (None, None, 3)), 1) 
```

我现在想使用模式匹配进行遍历。但是，我不知道如何对对象进行模式匹配。我试过这样的事情：

```
let rec traverse r =
  match r with
  | Node (None, None, v) -> printfn "%d" v 
```

并停在那里，因为模式匹配是错误的。

编辑：在 Petricek 的回答之后，我没有使用他的所有建议，因为我还没有读过关于歧视工会和其他阶级特征的文章。一旦我对这些事情有了更多的了解，我就会实施。但就暂时而言，这就是它的样子：

```
type Node = 
 val left: Node option
 val right: Node option
 val value: int 

 new (l, r, v) = {left = l; right = r; value = v}

let (|Node|) (nd: Node) = (nd.left, nd.right, nd.value)

let root = new Node (Some (new Node (None, None, 2)), Some (new Node (None, None, 3)), 1)

let rec traverseLRtR r =
  match r with
  | Node (None, None, v) -> printfn "%d" v
  | Node (left, right, v) -> traverseLRtR left.Value; traverseLRtR right.Value; printfn "%d" v; 

traverseLRtR root 
```

输出是：

```
2
3
1 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-12T08:25:09.247

您的`Node`类型需要提供成员来读取`left`和`right`字段。编写此类对象的最惯用的 F# 方法是使用：

```
type Node(left:Node option, right:Node option, value : int) =
  member x.Left = left
  member x.Right = right 
```

我删除了`mutable`字段上的属性，因为您没有在示例中更改它们（但是如果您想要的话，可以使用`get`&`set`属性使它们可变）。我还更改了代码以使用更简单的隐式构造函数语法。

下一步，您可以编写一个返回节点组件的活动模式：

```
 let (|Node|) (nd:Node) = (nd.Left, nd.Right) 
```

但是，有什么理由（即 C# 兼容性）为什么不使用 F# 可区分联合？这样，您可以非常轻松地定义树数据结构并免费获得模式匹配：

```
type Node = Node of Node option * Node option * int 
```

`Node(None, Some ..., 42)`然后，您可以使用您编写的模式通过写入和模式匹配来构造节点。

# java - Facebook Graph api 通知发送抛出异常

> ID：12383868
> 
> 赞同：0
> 
> 时间：2012-09-12T08:16:27.220
> 
> 标签：java, facebook, facebook-graph-api

我想从我的网络应用程序向我的 facebook 朋友发送通知。我使用图形 API。这是我的代码，但它抛出异常 java.lang.IllegalArgumentException: Parameter 'access_token' is reserved for RestFB use - 你不能自己指定它。

```
 public void sendNotification(List<Long> mediaIds, String username){

    FacebookClient facebookClient = new DefaultFacebookClient(ACCESS_TOKEN);
    Connection<User> myFriends = facebookClient.fetchConnection(
            "me/friends", User.class);

    String app_access_token = facebookClient.obtainAppAccessToken(API_KEY, SECRET).getAccessToken();
    for (List<User> myFriend : myFriends)
        for (User user : myFriend) {
            for (int i = 0; i < mediaIds.size(); i++) {
                String link = "user/view_contest_media_fb.action?guest="
                    + username + "&contMediaId=" + mediaIds.get(i);
                facebookClient.publish(user.getId() + "/notifications",
                        FacebookType.class,
                        Parameter.with("template", "Notification text"),
                        Parameter.with("href", link),
                        Parameter.with("access_token", app_access_token));
            }
        }

} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-28T17:27:38.890

不要添加 access_token 作为参数，更改如下：

```
facebookClient.publish(user.getId() + "/notifications**?access_token="+ACCESS_TOKEN**,
                    FacebookType.class,
                    Parameter.with("template", "Notification text"),
                    Parameter.with("href", link)); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-12T08:19:36.797

只需从您的代码中删除访问令牌参数

评论此行`//Parameter.with("access_token", app_access_token));` 并重试

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-12-06T03:54:46.663

我在尝试订阅 Page webhooks 时遇到了这个问题。我最终使用`BatchRequestBuilder`来指定请求正文。

```
BatchRequest postRequest = new BatchRequest.BatchRequestBuilder(pageId + "/subscribed_apps")
                    .method("POST")
                    .body(Parameter.with("access_token","the token")).build();

List<BatchResponse> batchResponses = fb.executeBatch(postRequest); 
```

# android - 在 Tabhost/Viewpager 构造中初始化新片段不起作用

> ID：12383874
> 
> 赞同：1
> 
> 时间：2012-09-12T08:17:07.750
> 
> 标签：android, android-viewpager, fragment

我有一个活动，其中包含侧边栏导航和我的片段的占位符。（-> 单击侧边菜单时，我切换片段...）其中一个片段（称为 TabFragment）使用选项卡，其中填充有（列表）片段（类似于[http://developer.android.com/reference/android/ support/v4/view/ViewPager.html](http://developer.android.com/reference/android/support/v4/view/ViewPager.html)示例，但我不使用操作栏选项卡，而是使用旧的）。

我第一次展示 TabFragment 时，一切正常。TabFragment 被调用，在那里我用我的 ListFragments（调用 onCreateView 等）“填充选项卡”（--> 就像在上面的示例中我实际上只是填充 viewpager）。有用。

然后我尝试将 TabFragment 的另一个实例放在屏幕上（我需要显示不同的列表并希望能够使用后退按钮 - > backstack），调用 TabFragment，我将片段添加到 TabsAdapter，但没有ListFragments 的生命周期方法被称为...为什么？

[我知道这不是最好的方法，有很多选项可以重写它以获得相同的效果，但由于它是第一次工作，我真的很想知道哪里出了问题]

**活动代码**

```
 Fragment search1 = new MainListFr();
     Bundle test1 = new Bundle();
     test1.putInt(Constants.FRAGMENT_SEARCH_ID, 1);
     g1.setArguments(test1);

     m_fragmentTransaction = m_fragmentManager.beginTransaction();
     m_fragmentTransaction.add(R.id.main_fragment_container, search1, "search1");
     m_fragmentTransaction.addToBackStack("search1");
     m_fragmentTransaction.commit();

     m_layout.toggleSidebar(); 
```

**MainListFr (=TabFragment)**

```
public class MainListFr extends Fragment {
   TabHost m_tabHost;
   ViewPager m_viewPager;
   TabsAdapter m_tabsAdapter;

   @Override
   public View onCreateView(final LayoutInflater inflater,
         final ViewGroup container, final Bundle savedInstanceState) {
      final View view = inflater.inflate(R.layout.stub_main, null);

      m_tabHost = (TabHost) view.findViewById(android.R.id.tabhost);
      m_tabHost.setup();

      m_viewPager = (ViewPager) view.findViewById(R.id.main_pager);

      m_tabsAdapter = new TabsAdapter(getActivity(), m_tabHost, m_viewPager);

      View v1 = inflater.inflate(R.layout.tab_left, null);
      View v2 = inflater.inflate(R.layout.tab_right, null);

      Bundle args = getArguments();

      m_tabsAdapter.addTab(m_tabHost.newTabSpec("topsearch").setIndicator(v1),
            SearchListFr.class, args);
      m_tabsAdapter.addTab(m_tabHost.newTabSpec("topsuggestion").setIndicator(v2),
            SuggestionListFr.class, args);

      if (savedInstanceState != null) {
         m_tabHost.setCurrentTabByTag(savedInstanceState.getString("tab"));
      }

      return view;
   }
} 
```

**SearchListFr (=ListFragment)**

```
 private ListView m_list = null;
   private View m_progress = null;
   private View m_noRes = null;

   SearchAdapter m_searchAdapter = null;
   private Vector<SearchItem> m_searchList = null;

   private int m_searchId = 0;

   @Override
   public View onCreateView(final LayoutInflater inflater,
         final ViewGroup container, final Bundle savedInstanceState) {

      final View view = inflater.inflate(R.layout.fr_videolist, null);

      m_list = (ListView) view.findViewById(R.id.fr_videolist_list);
      m_progress = view.findViewById(R.id.progress_root);
      m_noRes = view.findViewById(R.id.noresult_root);

      m_list.setVisibility(View.GONE);
      m_noRes.setVisibility(View.GONE);
      m_progress.setVisibility(View.VISIBLE);

      Bundle args = getArguments();
      if (args != null) {
         m_searchId = args.getInt(Constants.FRAGMENT_SEARCH_ID);
      }

      // load the content here (asynctask)
      new LoadSearchList().execute();

      return view;
   }

   @Override
   public void onActivityCreated(Bundle _savedInstanceState) {
      super.onActivityCreated(_savedInstanceState);

      m_searchAdapter = new SearchAdapter(getActivity());
      m_list.setAdapter(m_searchAdapter);
      m_list.setItemsCanFocus(true);
      m_list.setOnItemClickListener(this);
   } 
```

**选项卡适配器**

```
/**
 * This is a helper class that implements the management of tabs and all
 * details of connecting a ViewPager with associated TabHost.  It relies on a
 * trick.  Normally a tab host has a simple API for supplying a View or
 * Intent that each tab will show.  This is not sufficient for switching
 * between pages.  So instead we make the content part of the tab host
 * 0dp high (it is not shown) and the TabsAdapter supplies its own dummy
 * view to show as the tab content.  It listens to changes in tabs, and takes
 * care of switch to the correct paged in the ViewPager whenever the selected
 * tab changes.
 */
public class TabsAdapter extends FragmentPagerAdapter
        implements TabHost.OnTabChangeListener, ViewPager.OnPageChangeListener {
    private final Context mContext;
    private final TabHost mTabHost;
    private final ViewPager mViewPager;
    private final ArrayList<TabInfo> mTabs = new ArrayList<TabInfo>();

    static final class TabInfo {
        private final Class<?> clss;
        private final Bundle args;

        TabInfo(String _tag, Class<?> _class, Bundle _args) {
            clss = _class;
            args = _args;
        }
    }

    static class DummyTabFactory implements TabHost.TabContentFactory {
        private final Context mContext;

        public DummyTabFactory(Context context) {
            mContext = context;
        }

        @Override
        public View createTabContent(String tag) {
            View v = new View(mContext);
            v.setMinimumWidth(0);
            v.setMinimumHeight(0);
            return v;
        }
    }

    public TabsAdapter(FragmentActivity activity, TabHost tabHost, ViewPager pager) {
        super(activity.getSupportFragmentManager());
        mContext = activity;
        mTabHost = tabHost;
        mViewPager = pager;
        mTabHost.setOnTabChangedListener(this);
        mViewPager.setAdapter(this);
        mViewPager.setOnPageChangeListener(this);
    }

    public void addTab(TabHost.TabSpec tabSpec, Class<?> clss, Bundle args) {
        tabSpec.setContent(new DummyTabFactory(mContext));
        String tag = tabSpec.getTag();

        TabInfo info = new TabInfo(tag, clss, args);
        mTabs.add(info);
        mTabHost.addTab(tabSpec);
        notifyDataSetChanged();
    }

    @Override
    public int getCount() {
        return mTabs.size();
    }

    @Override
    public Fragment getItem(int position) {
        TabInfo info = mTabs.get(position);
        return Fragment.instantiate(mContext, info.clss.getName(), info.args);
    }

    @Override
    public void onTabChanged(String tabId) {
        int position = mTabHost.getCurrentTab();
        mViewPager.setCurrentItem(position);
    }

    @Override
    public void onPageScrolled(int position, float positionOffset, int positionOffsetPixels) {
    }

    @Override
    public void onPageSelected(int position) {
        // Unfortunately when TabHost changes the current tab, it kindly
        // also takes care of putting focus on it when not in touch mode.
        // The jerk.
        // This hack tries to prevent this from pulling focus out of our
        // ViewPager.
        TabWidget widget = mTabHost.getTabWidget();
        int oldFocusability = widget.getDescendantFocusability();
        widget.setDescendantFocusability(ViewGroup.FOCUS_BLOCK_DESCENDANTS);
        mTabHost.setCurrentTab(position);
        widget.setDescendantFocusability(oldFocusability);
    }

    @Override
    public void onPageScrollStateChanged(int state) {
    }
} 
```

# jndi - 如何使用 OpenLdap 创建 ObjectChangeListener

> ID：12383878
> 
> 赞同：0
> 
> 时间：2012-09-12T08:17:20.747
> 
> 标签：jndi, openldap

我正在尝试将 ObjectChangeListener 与 openldap 连接一起使用。我有以下java代码

```
public class MyListener implements ObjectChangeListener
{
 // Here my class variable
 public MyListener (DirContext ldapContext, String myDn) throws InternalException
{
  try
  {
    // Make a new connection without pooling
     Hashtable env = new Hashtable(ldapContext.getEnvironment());
     // env is set by other classes : in our case we use the factory java.naming.factory.initial=com.sun.jndi.ldap.LdapCtxFactory

     InitialDirContext localContext = new InitialDirContext(env);

     //     Get the EventContext for registering the listener
     evtCtx = (EventContext) localContext.lookup("");
     localContext.close();  
     // Register the listener for namespace change events
     evtCtx.addNamingListener(myDn, EventContext.OBJECT_SCOPE, this);

  }
  catch (NamingException e)
  {
      throw new InternalException("Error while registering my listener");
  }
}
 //some methods
} 
```

当我创建一个新的 MyListenerObject 时，我的 openLdap 服务器发送了以下错误。

javax.naming.OperationNotSupportedException：[LDAP：错误代码 12 - 无法识别关键扩展]；剩余名称 'ou=MyOU,O=MyOrg'

我不知道我需要做什么（或者如果可能的话）来创建一个带有 OpenLdap 的 ObjectListener。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-12T10:33:59.677

你不能。OpenLDAP 在当前版本 (2.4) 中不支持它。

# java - Maven Emma 是什么意思：$SWITCH_TABLE$

> ID：12383881
> 
> 赞同：2
> 
> 时间：2012-09-12T08:17:35.710
> 
> 标签：java, maven, emma

我得到了 emma 为我的 java 代码报告的几乎 100% 的覆盖率，除了一个类中的一大块行（没有突出显示，只有类本身被突出显示）。

有问题的“方法”如下所示：

```
$SWITCH_TABLE$com$ ...STUFF... (): int [] 
```

这可能指的是什么？它似乎是某种自动生成的方法，我无法追踪到任何实际的代码行/无法弄清楚如何对其进行测试等。

请帮忙。:)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2014-06-06T23:18:46.920

仔细看看`STUFF`，它应该是一个枚举。

# 枚举的表开关

当您在枚举上编写开关时，例如：

```
STUFF stuff;
public String getWho() {
    switch(this.stuff) {
        case THINGIE: return "kid";
        case MATERIAL: return "scientist";
        default: return "people";
    }
} 
```

编译器基于 生成开关表`Enum.ordinal`，“生成”是在 中调用的方法中完成的`switch`，例如：

```
switch( ($SWITCH_TABLE$com$...STUFF...())[this.stuff.ordinal] ) 
```

也许您只部分介绍了该方法。如果只测试`getWho()`一次，生成的方法会错过一个分支，因为返回`int[]`的是惰性初始化的。另一种可能是`catch`生成方法中的 es 没有被覆盖，但你对此无能为力。

# 来源和变体

我的主要来源是[这篇关于枚举](http://www.javaspecialists.eu/archive/Issue161.html)和玩[JAD](http://viralpatel.net/blogs/decompile-class-file-java-decompiler-class-java-class/)的文章（我建议使用以下参数：） `-a -dead -noconv -nocast -noclass -v`。

文章提到除了在方法内部使用内部类之外`$SwitchMap$`几乎相同。这可能是由于 Java 版本较旧或编译器差异所致。`$SWITCH_TABLE$``static intializer`

# 100%

如果您真的决心达到 100%，您可以随意修改并通过反射调用它：

```
@Test
public void testSwitches() {
    for(Method m : NotCovered.class) {
        if(m.getName().startsWith("$SWITCH_TABLE$")) {
            m.setAccessible(true);
            m.invoke(null); // one for lazy init
            m.invoke(null); // one for quick returning the initialized value
        }
    }
} 
```

我没有尝试这个代码，也没有建议使用它，只是一个例子。

在我早期的日子里，我曾尝试在专业环境中达到 100%，而在最后的 12% 中，我需要大量的测试编码和模拟。对于最后 3%，我需要`PowerMock`和一些反思。[我认为这是他们通常将标准设置为 80-90% 的](http://martinfowler.com/bliki/TestCoverage.html)另一个原因。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-12T08:22:39.340

Emma 可能会抱怨您不希望执行的代码部分。在这种情况下，我怀疑您有一个不需要调用的桥接方法。

例如

```
class A<N extends Number> {
    void method(N n) { }
}

class B extends A<Integer> {
    void method(Integer n) { }
} 
```

在这种情况下，B 类有两种方法。一个是`void method(Integer)`，但这不会从 JVM 的角度覆盖 A 中的那个，它会重载它，因此会生成另一种“桥”方法，即`void method(Number n) { method((Integer) n); }`

# scp - 从远程脚本在 SourceForge 上创建目录

> ID：12383890
> 
> 赞同：0
> 
> 时间：2012-09-12T08:18:09.383
> 
> 标签：scp, sourceforge

我们在[SourceForge上上传](http://sourceforge.net/projects/kunagi/files/)[Kunagi](http://kunagi.org)的版本。由于每个版本都包含多个文件，我们为每个版本创建一个目录。上传是通过命令完成的。但我们必须先创建新目录。我们使用 SourceForge 网站来创建它。有没有办法从命令行创建目录？`scp`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-04-13T05:04:04.540

如果您在计算机上使用 1 对 1 的目录结构，那么您可以使用 scp 和 -r 并自动创建目录：

```
scp -r some/path/1.0.1 sourceforge.net:/some/path/. 
```

然后`1.0.1`由 scp 使用正确的命令自动创建（不是被拒绝的 mkdir 命令行功能，而是文件传输命令，请参见[8.4\. 创建和删除目录](https://datatracker.ietf.org/doc/html/draft-ietf-secsh-filexfer-13#section-8.4)。）

# web-services - IIS和webservice的一般理解

> ID：12383896
> 
> 赞同：0
> 
> 时间：2012-09-12T08:18:41.200
> 
> 标签：web-services, iis

我只是在网络服务上有一个 Rnd。以为有些疑惑会在这里得到专业的解释。

1.  创建 Web 应用程序时，为什么 Visual Studio 会生成随机端口号？用户无法决定哪个端口？
2.  在 IIS（5.1 版）中发布 Web 服务时，为什么端口号总是 80？我知道我的默认网站端口是 80，这就是为什么将端口设为 80。但是想知道是否有可能在默认网站下使用端口 80 的一个网站具有不同的端口号？或者更具体地说，是否可以让另一个目录（如默认网站）具有不同的端口，以便该网站下的所有虚拟目录都具有不同的端口？
3.  如果我有一个远程服务器 Web 服务，我将如何在另一台服务器上访问该 Web 服务？
4.  命名空间在 Web 服务中的意义是什么？
5.  如何从本地 Web 服务调用另一个 Web 服务，在这种情况下，Services.WebServiceBindingAttribute 的用途是什么...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-12T08:41:33.843

1.  这是默认行为。在 Visual Studio 2005 和 2008 中，您可以指定所需的端口，如以下链接所示。这也解释了它发生了什么。 [http://msdn.microsoft.com/en-us/library/ms178109(v=vs.100).aspx](http://msdn.microsoft.com/en-us/library/ms178109(v=vs.100).aspx)

2.  端口 80 是最常用于超文本传输​​协议 (HTTP) 的 TCP 端口，因此它是 IIS 的默认端口。您可以指定其他端口的使用，只要它们不被其他应用程序使用。这也适用于端口 80；如果它被其他应用程序（如 Skype，非常常见的问题）使用，您的 Web 服务将无法工作。Microsoft 还提供了修改端口的文档：http: [//support.microsoft.com/kb/149605](http://support.microsoft.com/kb/149605)

3.  要访问远程 Web 服务，您必须添加对它的引用或在没有引用的情况下调用它。这里的文档太多了，这取决于 Web 服务的类型以及它们是如何开发的。需要更多详细信息，但这个问题太复杂了，所以您应该进行搜索。

4.  [http://www.sitepoint.com/xml-namespaces-explained/](http://www.sitepoint.com/xml-namespaces-explained/)

5.  这又回到了问题 3。这可能取决于 Web 服务的类型。Web 服务具有绑定。XML Web 服务具有 Services.WebServiceBindingAttribute。这只是一个使用示例[http://www.codeproject.com/Articles/1231/ASP-NET-Web-Service](http://www.codeproject.com/Articles/1231/ASP-NET-Web-Service)。

但是您需要首先阅读有关 Web 服务和 IIS 的更多信息。

我的回答不想完全回答你的问题，因为你的问题太笼统了。完整的答案在您应该开始阅读的数千页 MSDN 文档（和其他文档）中。也尝试找一些教程来实践学习。

将来请发布有关特定问题的问题。

# cordova - JQM 中的启动事件

> ID：12383897
> 
> 赞同：0
> 
> 时间：2012-09-12T08:18:42.957
> 
> 标签：cordova, jquery-mobile

如何在 jqm 中启动事件？我制作了一个永远不会在 Android 设备上触发的脚本，但它可以在 chrome 网络浏览器上运行。任何的想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-12T08:18:42.957

问题肯定是没有把你的脚本放在正确的位置。如果您希望与页面相关的事件起作用，则应将其放置在节点中。

# c - mmap 是否真的将数据复制到内存中？

> ID：12383900
> 
> 赞同：10
> 
> 时间：2012-09-12T08:18:57.267
> 
> 标签：c, linux

据说`mmap()`将文件映射到内存，它消耗调用进程的虚拟地址空间内存。它是真的将数据复制到内存中，还是数据仍然存在于磁盘中？`mmap()`比 快吗`read()`？

* * *

## 回答 #1

> 赞同：35
> 
> 时间：2012-09-12T08:34:47.530

这个`mmap`函数真正做的唯一一件事就是改变一些内核数据结构，可能还有页表。它实际上根本没有将任何东西放入物理内存中。调用后`mmap`，分配的区域可能甚至不指向物理内存：访问它会导致页面错误。这种页面错误是由内核透明地处理的，实际上这是内核的主要职责之一。

发生的情况`mmap`是数据保留在磁盘上，并在您的进程读取它时从磁盘复制到内存。它也可以推测性地复制到物理内存中。当您的进程被换出时，`mmap`不必将区域中的页面写入交换，因为它们已经由长期存储支持——当然，除非您修改了它们。

但是，`mmap`会消耗虚拟地址空间，就像`malloc`和其他类似的功能一样（主要`mmap`在幕后使用，或者`sbrk`，它基本上是一个特殊版本`mmap`）。`mmap`使用读取文件和读取文件之间的主要区别在于，区域`read`中未修改的页面`mmap`不会对整体内存压力产生影响，只要它们不被使用，它们几乎是“空闲”的，内存明智的。相比之下，使用该`read`函数读取的文件无论是否正在使用，是否已被修改，都会造成内存压力。

最后，`mmap`它比`read`仅在它喜欢的用例中更快——随机访问和页面重用。对于线性遍历文件，尤其是小文件，`read`通常会更快，因为它不需要修改页表，并且需要更少的系统调用。

作为建议，我可以说您将要扫描的任何大文件通常应该`mmap`在 64 位系统上完整读取，并且您可以`mmap`在虚拟内存较少的 32 位系统上以块的形式读取。

另请参阅：[mmap() 与读取块](https://stackoverflow.com/questions/45972/mmap-vs-reading-blocks/6383253#6383253)

另请参阅（感谢 James）：[我什么时候应该使用 mmap 进行文件访问？](https://stackoverflow.com/questions/258091/when-should-i-use-mmap-for-file-access)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-12T08:34:59.167

数据仍然存在于磁盘上。操作系统分配一些物理内存并将文件数据复制到其中，以便您访问那里的文件内容（当您尝试访问文件数据时会发生这种情况）。该物理内存被映射到进程的虚拟地址空间。操作系统可以取消映射文件中长时间未使用的部分，并在需要时将它们映射回来。如果可用物理内存很少，取消映射可能会更加激进，从而导致性能下降。

文件的内存映射：

1.  比简单的“文件读/写”使用更少的物理内存和虚拟地址空间，因为这里和那里（在操作系统、C 标准库和您的程序中）没有文件缓冲区，并且它们之间没有不必要的复制。

2.  可以比简单的“文件读取~~/~~由于上述原因，并且您避免了“文件读取”系统调用所涉及的用户模式和内核模式之间的转换。剩下的唯一转换是那些映射当前未映射的特定页面的转换，它们由页面错误（= CPU 异常）启动，在内核中处理。只要映射了您需要的所有内容，访问文件数据时就没有用户内核转换。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-12T08:35:39.780

进程的“虚拟内存”是它可用的地址范围。为了使某些东西在内存中可用，您需要保留一定范围的地址，因此`mmap()`会占用一些虚拟内存。

在 Linux 下（以及许多其他系统可能使用类似的机制），在读取文件时，首先将内容读入内核分配的内存中（在 Linux 中这是“页面缓存”）。如果您使用`mmap()`，则只需通过在该进程的地址空间中为其分配一些地址，即可使该内存可供该进程使用。如果使用`read()`，则该进程分配一个缓冲区，该缓冲区需要地址（虚拟内存）和居住地（物理内存），并且数据从页面缓存复制到该缓冲区（需要更多物理内存）。

数据仅在实际访问时从磁盘读取。如果`mmap()`这意味着当你实际寻址内存时，`read()`它就是你的缓冲区的副本，所以在`read()`调用内部。

因此`mmap()`对于大文件更有效，尤其是对于随机访问。缺点是它只能用于文件而不是类似文件的对象（管道、套接字、设备、/proc 文件等），并且在页面错误期间检测到 IO 故障，它们很难处理（它发送 SIGBUS 信号），而 read 可以返回错误并且应用程序可以尝试恢复（大多数都不会）。后者主要关注网络文件系统，其中 IO 失败可能是由于连接丢失。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-12T08:20:26.990

复制并不意味着原件被销毁。

它将磁盘的内容映射到内存中，所以当然在某些时候必须复制这些位，是的。

由于这意味着它需要地址空间，因此占用了进程的部分虚拟地址空间。

# ruby-on-rails - 任何有助于在 Rails 中获取指定 URL 的 http 状态的 Gem

> ID：12383902
> 
> 赞同：0
> 
> 时间：2012-09-12T08:19:03.697
> 
> 标签：ruby-on-rails, ruby, http, url, gem

我想测试许多 URL，并且想知道每个 URL 的 HTTP 状态，而无需在浏览器中点击它们。

有人对宝石有想法，可以帮助我找到解决方案吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-12T08:30:13.820

标准 Ruby 怎么样，没有额外的宝石（只是`require 'net/http'`）：

```
Net::HTTP.new('google.com').head('/').code
#=> "301" 
```

如果由于某种原因您想做的不仅仅是头部请求，请替换`head`为`get`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-12T08:25:04.027

我很确定你可以用标准的红宝石（`Net::HTTP`和朋友）来实现这一点。然而，有很多宝石可以处理这样的事情。[我对Typhoeus](https://github.com/typhoeus/typhoeus)有偏见。

例子 ：

```
Typhoeus::Request.get('http://google.fr').code
=> 301 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-12T08:22:44.513

使用[HTTParty](https://github.com/jnunemaker/httparty)：

```
uri = "http://url.to.inspect"

request = HTTParty.get( uri )
return true if request.code.to_i == 200 
```

# php - php页面重定向到另一个

> ID：12383904
> 
> 赞同：0
> 
> 时间：2012-09-12T08:19:06.537
> 
> 标签：php, redirect

我有一个 php 页面，它应该包含在 otherpage 但不直接包含。让我们假设它为 1.php，另一个页面为 2.php

**1.php**

```
<?php
   if($_SERVER['REQUEST_URI'] == "/1.php"){
       header("Location:2.php");
   }
   else
   {
       //some code here
   }
?> 
```

**2.php**

```
<?php
   include("1.php");
?> 
```

这运行良好`localhost/1.php`并且已被重定向到，`localhost/2.php` 但这给我带来了一个问题，`localhost/1.php?somegetmethod=data`我发现任何人都可以通过`?something=something`在 1.php url 的末尾键入来访问此页面。如何更改可以重定向所有以 localhost/1.php 开头的 url 的代码

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-12T08:22:52.483

您可以像这样检查子字符串是否位于给定位置

```
if(strpos($_SERVER['REQUEST_URI'], "/1.php") === 0) { 
```

这将检查是否`REQUEST_URI`以`/1.php`(= 位于位置 0)开头

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-12T08:23:41.793

尝试一下：

```
if($_SERVER['SCRIPT_NAME'] == "/1.php") 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-12T08:23:56.580

使用`$_SERVER['PHP_SELF']`而不是`$_SERVER['REQUEST_URI']`.

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-12T08:24:36.440

`$_SERVER['REQUEST_URI']`包含请求页面的 URI，在你的情况下它是`1.php?somegetmethod=data`.

更改代码如：

```
if(strpos($_SERVER['REQUEST_URI'], "/1.php") === 0){
    header("Location:2.php");
}else{
    //some code here
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-12T08:29:33.430

例如，在 MediaWiki、WordPress 和许多其他此类应用程序中，您经常看到的是：

1.php

```
if ( !defined( 'YOURAPPCONSTANT' ) ) {
  // You could choose to redirect here, but an exit would make just as much  
  // sense. Someone has deliberately chosen an incorrect url.
  echo "Cannot directly call this file.";
  exit( 1 );
} 
```

2.php

```
define('YOURAPPCONSTANT', 'It is defined');
include('1.php'); 
```

这样，2.php 就是您的应用程序的入口，而不管用于访问它的 url。我认为这是一种更安全、更灵活的方式，而且它经常被使用是有原因的。

# java - 从超类向下转换：链表中的节点到 SpecialNode

> ID：12383912
> 
> 赞同：1
> 
> 时间：2012-09-12T08:19:26.163
> 
> 标签：java, linked-list, superclass, downcast

```
public class Node {
  public Node right;
}

public class SpecialNode extends Node {
  public String specialLabel;
}

public class Testmain {
  public static void main(String[] args) {
  Node n1 = new Node();
  Node n2 = new Node();
  Node n3 = new Node();
  n1.right=n2;
  n2.right=n3;

  // some calculations --> now n2 has to become a SpecialNode, how ???
  }
} 
```

我正在使用 Node 实现一个单链表，其中每个节点都知道它的正确邻居。我创建了一个列表：节点 n1-> 节点 n2-> 节点 n3。创建列表后，它只包含 Node 类型的元素。现在我想告诉 Node n2 是一个 SpecialNode，以便提供一个 specialLabel。在向下转换之后，列表应该看起来像节点 n1-> SpecialNode n2-> 节点 n3。*如何才能做到这一点？*

（请注意，n2 不知道它的左邻居。请注意，我必须在创建列表后告诉 n2 是特殊的，因此在将其初始化为超类的节点之后，因为我需要在决定哪个节点之前进行一些计算要特别。）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-12T08:24:26.987

你不能说`n2`是一个`SpecialNode`，因为*它从来没有*。

我认为你最好尝试`n2`用新的实例替换现有的 a `SpecialNode`。这将是一个很好的方法来`n2`替换自己（如果它知道它在列表中的位置），或者失败，至少给你一个新的 a 实例`SpecialNode`。在这种情况下，您必须`n1`手动将其连接起来。

```
SpecialNode sn = n2.toSpecialNode(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-14T17:00:03.520

这是我最终解决它的方法，感谢向下转换不起作用的答案，我的解决方案接近@Andrew的行为。我不为它本身使用继承，`Node`而是为它包含的数据使用继承。就像一个容器一样`Node`工作，我把我的电线放在正确的邻居身上。而不是扩展`SpecialNode`我为节点引用创建一个属性`NodeData`。`NodeData`被扩展`NodeDataSpecial`，所以一个节点可以携带特殊的内容。

```
public class Node {
  public Node right;
  public NodeData;
}

public class NodeData {
}

public class SpecialNodeData extends NodeData {
  public String specialLabel;
} 
```

# cordova - 使用 PhoneGap 控制返回按钮

> ID：12383913
> 
> 赞同：0
> 
> 时间：2012-09-12T08:19:30.047
> 
> 标签：cordova

我有一个索引页和该索引页上的许多按钮。单击这些按钮页面将转到其他页面。我有这个代码`index.htlm`

```
<script type="text/javascript" charset="utf-8" src="jquery-mobile/cordova-1.8.1.js"></script>

function onLoad() {
    document.addEventListener("deviceready", onDeviceReady, false);
}
function onDeviceReady() {
    document.addEventListener("backbutton", onBackKeyDown, false);
}
function onBackKeyDown() {
    alert("Are you sure !!")
}

<body onLoad="onLoad()"> </body> 
```

所以当我在索引页的时候，后退按钮应该只给出那个警报。我对此没有任何问题，警报显示正确，但其他页面也禁用了后退按钮。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-12T09:37:42.233

您没有在函数中检查页面，因此它对每个页面的反应相同。尝试这个：

```
function onBackKeyDown() {
    if($.mobile.activePage.is('#homepage')){
       e.preventDefault();
       alert("Are you sure !!");
   }
   else {
       navigator.app.backHistory()
   }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-12T08:53:10.990

尝试将您的脚本放在页面 div 中。这可能会有所帮助。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-14T07:22:55.687

1.  下载更新的cordova-2.0.0.js
2.  将它放在你的根目录中（在 index.html 旁边）
3.  将其加载到您的`<head>`部分

> ```
> <head>
>      <script type="text/javascript" charset="utf-8" src="cordova-2.0.0.js">
>      <!-- Other JS files .... -->
> </head> 
> ```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-18T11:58:51.143

尝试在警报后添加：

```
document.removeEventListener("backbutton", onBackKeyDown, false); 
```

# php - 使长字符串具有最大长度以保持其意义

> ID：12383915
> 
> 赞同：-2
> 
> 时间：2012-09-12T08:19:36.343
> 
> 标签：php

我有一个长字符串存储在一个变量中，这个字符串是一个视频的描述，它可以是空的，也可以是超长的。我需要做的是，例如，如果超过 100 个字符，则只显示前 100 个字符，但不要删减单词，如果可能的话，也应该保留句子。因此，取决于句子的长度和长度，但可能的最大长度为 100 个字符。我希望你能理解我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-12T08:22:22.513

我会检查字符串是否超过 100 个字符，最后一个 ., ? 或者 ！是（在前 100 个字符内）并在点关闭后剪切所有内容。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-12T08:28:25.753

我会这样做： 1\. 检查字符串是否超过 100 个字符 2\. 如果有，例如从 90-100 检查并搜索句子的结尾并切到那里 3\. 如果没有完整的句子，去从 100 向后寻找一个空间并在那里切入。

# multithreading - servets 和 servlet 生命周期中的自定义线程

> ID：12383916
> 
> 赞同：0
> 
> 时间：2012-09-12T08:19:37.973
> 
> 标签：multithreading, servlets, spring-mvc

假设我在 servlet 中启动了自己的线程（不是守护进程）（可以是 springMVC 应用程序中的控制器或 struts 动作控制器）：

1.  让我们假设该操作已完成处理并希望将响应推出。即使我启动的线程仍在运行，也会发生这种情况吗？基本上我想知道的是容器会等到线程完成它的工作以推出响应吗？

2.  假设在上面，容器不等待线程推送响应，它会等到后台线程完成以获取为处理此特定请求而生成的 servlet 线程，还是仅在自定义线程时才获取此线程完成它的工作了吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-12T09:39:11.877

由 servlet 线程生成的自定义线程与任何其他线程没有什么不同：它是一个独立的并行执行流。servlet 线程不关心自定义生成的线程：它继续执行。

因此，响应将发送到浏览器，就好像没有生成自定义线程一样，并且自定义生成的线程是否仍在运行是无关紧要的。

一旦 servlet 线程完成了对请求的处理并发送了响应，它就会返回到池中并可以开始为另一个请求提供服务。再一次，是否产生了自定义线程，以及该自定义线程是否仍在运行，这些都无关紧要。

# android - 为什么 IntelliJ Idea 不在 AndEngine 模块的 \gen 文件夹中创建 BuildConfig.java？

> ID：12383918
> 
> 赞同：-1
> 
> 时间：2012-09-12T08:19:45.470
> 
> 标签：android, intellij-idea, andengine

我正在尝试编译模块（AndEngine），但 Idea 没有创建`BuildConfig.java`文件。

模块 SDK 设置为 Android 4.0.3 平台（java 版本“1.6.0_10”）

\src 和 \gen 文件夹被标记为“源文件夹”。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-12T12:00:59.213

检查 AndEngine 项目中的 readme.md 文件。Nicolas 说，如果您的 IntelliJ 不这样做，您可以手动创建它并将其放在 Andegine 源文件夹中。

引用该文件

# 和引擎

## 建造

### 蚀

*   AndEngine 必须使用 ADT-17 或更高版本构建！

### IntelliJ IDEA

*   AndEngine 依靠 ADT 自动生成“BuildConfig”类。IntelliJ IDEA（截至 11.1.1）尚未与 ADT-17+ 完全集成。为了使用 IntelliJ IDEA 构建 AndEngine，您可以简单地自己在根包 (org.andengine) 中添加以下类：

    ```
    package org.andengine; 
    ```

    `public final class BuildConfig { public final static boolean DEBUG = true; }`

# actionscript-3 - ActionScript 3 和驼峰式包名

> ID：12383921
> 
> 赞同：0
> 
> 时间：2012-09-12T08:19:53.367
> 
> 标签：actionscript-3, apache-flex, syntax, compiler-errors, flash-builder

我正在使用 Flash Builder 4 构建我的 AIR 应用程序。

出于某种原因，我需要以驼峰形式声明我的包名，并以小写形式声明类名：

```
//test.as
package Core { 
   public class test {
   }
} 
```

文件夹结构是这样的（目录'Core'与包名匹配）：

```
src/
  Core/
    test.as 
```

但是，Flash Builder 显示错误并且它根本不编译，只有当我将包名称设置为“核心”时它才会编译。

AS3 语法是否允许包名中包含大写字母？还是仅仅因为 Flash Builder 隐含地不允许这样做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-12T08:43:45.390

AS3 语法不允许包名中的首字母大写。但是您可以使用 org.myCompany 例如

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-15T21:20:31.773

我只是尝试制作一个包'Core'并且它编译得很好。我怀疑您正在使用 Windows 并且包的名称与磁盘上的文件夹不匹配（区分大小写）。即您可能有一个名为“core”的文件夹，而包的名称是“Core”。Windows 将很难在不更改名称的情况下切换文件夹名称的大小写，因此您可以将“core”重命名为“core1”，然后将“core1”重命名为“Core”。

无论如何，这一切都是基于不匹配的假设:)（是的，我看到你已经明确提到了文件夹结构......但我认为你可能错过了这个案例）

# asp.net - 显示事件代码的 Asp.net 网页：3005 未处理的异常。应用程序部署在 windows server 2008 r2

> ID：12383930
> 
> 赞同：0
> 
> 时间：2012-09-12T08:20:41.493
> 
> 标签：asp.net, iis-7.5

我已经部署了我的 .net web 应用程序，它在 windows server 中工作，但是当我移到 windows server 2008 r2 时。我的网站中只有两个页面每隔 10 到 15 分钟就会出现一次异常。这些页面在一段时间内运行良好，然后突然抛出如下异常

```
3005 
   An unhandled exception has occurred. 
   9/12/2012 2:48:22 AM 
   9/12/2012 6:48:22 AM 
   8e88fffed9bd4edeb5a2a9c94ba189f8 
   8 
   1 
   0 
   /LM/W3SVC/3/ROOT-1-129919060903353364 
   Full w3wp.exe 
   NT AUTHORITY\NETWORK SERVICE 
   FileLoadException 
   Could not load file or assembly 'Microsoft.Practices.EnterpriseLibrary.Common, Version=4.1.0.0, Culture=neutral, PublicKeyToken=945cb50e7342eb4c' or one of its dependencies. The located assembly's manifest definition does not match the assembly reference. (Exception from HRESULT: 0x80131040) at System.ModuleHandle.ResolveType(RuntimeModule module, Int32 typeToken, IntPtr* typeInstArgs, Int32 typeInstCount, IntPtr* methodInstArgs, Int32 methodInstCount, ObjectHandleOnStack type) at System.ModuleHandle.ResolveTypeHandleInternal(RuntimeModule module, Int32 typeToken, RuntimeTypeHandle[] typeInstantiationContext, RuntimeTypeHandle[] methodInstantiationContext) at System.ModuleHandle.ResolveTypeHandle(Int32 typeToken, RuntimeTypeHandle[] typeInstantiationContext, RuntimeTypeHandle[] methodInstantiationContext) at System.Reflection.RuntimeModule.ResolveType(Int32 metadataToken, Type[] genericTypeArguments, Type[] genericMethodArguments) at System.Reflection.CustomAttribute.FilterCustomAttributeRecord(CustomAttributeRecord caRecord, MetadataImport scope, Assembly& lastAptcaOkAssembly, RuntimeModule decoratedModule, MetadataToken decoratedToken, RuntimeType attributeFilterType, Boolean mustBeInheritable, Object[] attributes, IList derivedAttributes, RuntimeType& attributeType, IRuntimeMethodInfo& ctor, Boolean& ctorHasParameters, Boolean& isVarArg) at System.Reflection.CustomAttribute.GetCustomAttributes(RuntimeModule decoratedModule, Int32 decoratedMetadataToken, Int32 pcaCount, RuntimeType attributeFilterType, Boolean mustBeInheritable, IList derivedAttributes, Boolean isDecoratedTargetSecurityTransparent) at System.Reflection.CustomAttribute.GetCustomAttributes(RuntimeAssembly assembly, RuntimeType caType) at System.Web.UI.AssemblyCache.GetAjaxFrameworkAssemblyAttribute(Assembly assembly) at System.Web.UI.ScriptManager.get_DefaultAjaxFrameworkAssembly() at System.Web.UI.ScriptManager..ctor() at ASP.pages_claims_referralform_aspx.__BuildControlScriptClaims 
```

我的 IIS 详细信息是

框架版本是 4.0 IIS 版本是 7.5.7600

# com - 将解决方案从 32 位 XP 移至 64 位 Win7 --> 编译错误

> ID：12383933
> 
> 赞同：1
> 
> 时间：2012-09-12T08:20:57.123
> 
> 标签：com, build, compilation, .net-framework-version

我在 XP 计算机（32 位）上使用 VS2008/VS2010 开发了一些解决方案（C#、VB.Net）。该解决方案使用 .NET Framework 2.0 和 3.5 以及对 32 位 Com 对象（dll、exe）的引用。解决方案是使用构建设置版本 + x86 编译的。这工作得很好。

现在，我将解决方案移至具有 64 位 Windows7 和 VS2010 Premium 的新计算机上。现在我在构建解决方案时遇到以下错误。

这是完整的错误信息：

```
------ Rebuild All started: Project: IXDokService, Configuration: Release x86 ------
TlbImp : error TI0000: The input file 'C:\Program Files (x86)\DSA\JetOffice Workflow\bin32\wrkflw32.exe' is not a valid type library.
C:\Windows\Microsoft.NET\Framework\v4.0.30319\Microsoft.Common.targets(1558,9): warning MSB3283: Cannot find wrapper assembly for type library "JetOfficeWorkflow".
------ Starting pre-build validation for project 'IXDokServiceWebSetup' ------
ERROR: An error occurred while validating. HRESULT = '80004005'
------ Pre-build validation for project 'IXDokServiceWebSetup' completed ------
------ Rebuild All started: Project: IXDokServiceWebSetup, Configuration: Release ------
========== Rebuild All: 0 succeeded, 2 failed, 0 skipped ========== 
```

wrkflw32.exe 是一个 32 位的 exe (COM)。当我将 .NET Framework 版本更改为 4 时，解决方案的构建过程会成功运行。

但我不想更改 .NET Framework 版本。有人对我有想法吗？

# javascript - 拉斐尔重复背景图案

> ID：12383937
> 
> 赞同：0
> 
> 时间：2012-09-12T08:21:19.937
> 
> 标签：javascript, svg, raphael

我想要一个重复的正方形图案（有点像蓝图）作为整个 SVG 元素的背景。我正在使用拉斐尔。我怎样才能做到这一点？

我想使用 SVG 而不是图像来执行此操作，因为我使用平移/缩放 SVG，`SetViewBox`并且我希望背景也可以适当地缩放。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-12T09:48:30.727

一种选择是以通常的方式渲染这些方块，通过`paper.rect()`. 但是，可能会很昂贵，并且如果画布可以增大尺寸，则需要进行一些维护。

另一种选择是进行图案填充`paper.rect(0,0,100,100).attr({fill: "url(images/pattern.png)"});`（请参阅[本教程](http://cancerbero.vacau.com/raphaeltut/)），它应该会自动重复给出的图像。不过，我自己并没有这样做，所以我不确定当你这样做时模式是如何缩放的`SetViewBox()`。

# python - 连接字典列表

> ID：12383938
> 
> 赞同：0
> 
> 时间：2012-09-12T08:21:27.157
> 
> 标签：python, dictionary, python-2.7

我有这样的字典列表：

```
 [{'X': '10'},
 {'time': '08:34:51', 'load': 28.27, 'memory': 40},
 {'time': '08:34:51', 'load': 28.27, 'memory': 40},
 {'X': '15'},
 {'time': '08:34:51', 'load': 28.27, 'memory': 40},
 {'time': '08:34:51', 'load': 28.27, 'memory': 40}] 
```

我需要将'X'-dic 连接到其他字典中。我只需要以下字典列表：

```
 [{'X': '10', 'time': '08:34:51', 'load': 28.27, 'memory': 40},
 {'X': '10', 'time': '08:34:51', 'load': 28.27, 'memory': 40},
 {'X': '15', 'time': '08:34:51', 'load': 28.27, 'memory': 40},
 {'X': '15', 'time': '08:34:51', 'load': 28.27, 'memory': 40}] 
```

这样做的简单方法是什么？我必须提到，`{'time': '08:34:51', 'load': 28.27, 'memory': 40}`“X”列表之间可能存在未知数量的此类列表。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-12T08:22:17.457

使用该`.update()`方法将一个字典合并到另一个：

```
somedict.update(otherdict) 
```

要对您的列表执行此操作，请在循环中检测“源”字典并将它们合并到其他字典中：

```
source = dict()
for mapping in yourlist:
    if 'X' in mapping:
        source = mapping
    else:
        mapping.update(source) 
```

`X`请注意，我从源的空字典开始，以防您在第一次运行循环时没有遇到带有键的字典。

上面的循环将原始来源留在列表中。如果您需要删除这些，最好的办法是使用更新的字典创建一个新列表：

```
source = dict()
output = []
for mapping in yourlist:
    if 'X' in mapping:
        source = mapping
    else:
        mapping.update(source)
        output.append(mapping) 
```

# html - HTML5 地理定位中的“准确性”究竟是什么意思？

> ID：12383940
> 
> 赞同：9
> 
> 时间：2012-09-12T08:21:31.160
> 
> 标签：html, geolocation, w3c-geolocation

使用 HTML5 地理定位 API 时，除了纬度和经度之外，我还获得了“以米为单位的位置精度”。这到底是什么意思（米不是精度单位）？

我假设它应该被读作“以概率*p*请求是在返回位置*的一*米内提出的” - 如果是这样，什么是*p*？是一个标准差（*p = 0.682*？）两个标准差（*p = 0.956*？）

[http://dev.w3.org/geo/api/spec-source.html](http://dev.w3.org/geo/api/spec-source.html)也不是很明确。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-09-12T08:28:47.080

引用[规范](http://dev.w3.org/geo/api/spec-source.html#accuracy)：

> 实现返回的准确度和高度准确度值应对应于 95% 的置信水平。

因此，它是 95% 的置信水平。再说一次，实现在他们报告的内容上可能会有很大的不同......

# java - 如何在 Java 中对图像进行去隔行扫描？

> ID：12383944
> 
> 赞同：2
> 
> 时间：2012-09-12T08:21:55.563
> 
> 标签：java, filter, xuggle

我正在使用 Xuggle 从 ip-camera 播放隔行扫描视频，并且确实需要去隔行选项，该选项存在于 FFMpeg 中（Xuggle 是 FFMpeg 库的 Java 包装器）。

不幸的是，Xuggle 没有公开去隔行选项（“-vf yadif”，如果我没记错的话）。所以，我对 Java BufferedImage deinterlacing 的纯 Java 解决方案或使 Xuggle 做到这一点的某种方式感兴趣。

现在我只是复制奇数行并丢弃偶数行。它很快，但质量当然不是很好。

```
// Interlaced image
BufferedImage img = (BufferedImage) event.getImage();

//duplicate odd lines
WritableRaster raster = img.getRaster();
for (int i = 0; i < raster.getHeight(); i += 2) {
    int[] arr2  = null;
    raster.setPixels(0, i + 1, raster.getWidth(), 1, 
            raster.getPixels(0, i, raster.getWidth(), 1,arr2));
}    
//now img is deinterlaced 
```

有人可以在这方面帮助我吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-19T20:19:14.477

我通过 JNI 使用了 FFMPEG 的 yadif 过滤器。Java 实现非常缓慢。

# c# - 使用正则表达式在字符串中查找不匹配的字符？

> ID：12383945
> 
> 赞同：5
> 
> 时间：2012-09-12T08:22:07.363
> 
> 标签：c#, .net, regex

如果我能够检查一个字符串是否有无效字符：

```
Regex r = new Regex("[^A-Z]$");
string myString = "SOMEString"; 
if (r.IsMatch(myString)) 
{     
  Console.WriteLine("invalid string!");
} 
```

没事。但是我想打印出这个字符串中的每个无效字符？就像在示例中**SOMEString** => 无效字符是 t,r,i,n,g 一样。有任何想法吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-12T08:36:09.067

使用 LINQ。以下将为您提供一个包含 5 个元素的数组，与正则表达式不匹配。

```
char[] myCharacterArray = myString.Where(c => r.IsMatch(c.ToString())).ToArray();
foreach (char c in myCharacterArray)
{
    Console.WriteLine(c);
} 
```

输出将是：

```
t
r
i
n
g 
```

编辑：

看起来，您想将所有小写字符视为无效字符串。你可以试试：

```
 char[] myCharacterArray2 = myString
                                   .Where(c => ((int)c) >= 97 && ((int)c) <= 122)
                                   .ToArray(); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-12T08:29:55.243

在您的示例中，正则表达式会在一个字符上成功，因为如果它不是大写，它会查找最后一个字符，并且您的字符串具有这样的字符。

正则表达式应更改为`Regex r = new Regex("[^A-Z]");`.

（根据@Chris 的评论更新）

但是，出于您的目的，正则表达式实际上是您想要的 - 只需使用`Matches`.

例如：

```
foreach (Match item in r.Matches(myString))
{
   Console.WriteLine(item.ToString() + " is invalid");
} 
```

或者，如果你想要一行：

```
foreach (Match item in r.Matches(myString))
{
   str += item.ToString() + ", ";
}
Console.WriteLine(str + " are invalid"); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-12T08:30:08.763

试试这个：

```
char[] list = new char[5];
Regex r = new Regex("[^A-Z]*$");
string myString = "SOMEString";

foreach (Match match in r.Matches(myString))
{
    list = match.Value.ToCharArray();
    break;
}

string str = "invalid chars are ";
foreach (char ch in list)
{
    str += ch + ", ";
}

Console.Write(str); 
```

**输出：`invalid chars are t, r, i, n, g`**

# codeigniter - CodeIgniter_2.1.2 的脚手架错误

> ID：12383953
> 
> 赞同：0
> 
> 时间：2012-09-12T08:22:55.153
> 
> 标签：codeigniter, codeigniter-2, scaffolding, asp.net-mvc-scaffolding

我正在使用 codeigniter 2.1.2，我想使用脚手架功能向表中添加信息。当我`$route['scaffolding_trigger'] = 'scaffolding';`在 routes.php 中设置它并在控制器中调用它时， `$this->load->scaffolding('applicants');`我收到以下错误：
**致命错误：调用 C:\xampp\htdocs\hmplatform\application\controllers\Applicant.php 中的未定义方法 CI_Loader::scaffolding()第 6 行**所以我问是否可以找到包含脚手架功能的库​​，因为在我从 GIT 下载的这个版本中，没有脚手架文件夹。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-12T08:42:10.283

脚手架在 codeigniter 中被折旧。它不再提供。教程已经过时了，所以我猜这是你看到的？

# c++ - 错误 C2664：“CComboBox::InsertString”：无法将参数 2 从“const char [4]”转换为“LPCTSTR”

> ID：12383963
> 
> 赞同：0
> 
> 时间：2012-09-12T08:23:29.690
> 
> 标签：c++, visual-c++, user-interface

我正在尝试执行以下操作：

```
class sig
{
    CComboBox objList;
    void SetDefault();
}
void sig :: SetDefault()
{
    objList.InsertString(0, METHOD_ONE);
} 
```

我在不同的类中定义了 METHOD_ONE

```
#define METHOD_ONE "OFF" 
```

我得到了上述错误。

有人能帮帮我吗？

干杯，

钦坦

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-12T08:36:07.007

**最重要的部分是理解错误**；知道什么是 a `const char [4]`，是容易的部分，但是，`LPCTSTR`呢？

根据[微软文档](http://msdn.microsoft.com/en-us/library/windows/desktop/aa383751%28v=vs.85%29.aspx)：

> 如果`LPCWSTR`定义了 UNICODE，则为 else `LPCSTR`。有关详细信息，请参阅字符串的 Windows 数据类型。

而且`LPCWSTR`是：

> 指向 16 位 Unicode 字符的以空字符结尾的常量字符串的指针。有关详细信息，请参阅字体使用的字符集。

首先，您必须检查使用您的程序的编码类型；看来您正在使用`UNICODE`，所以最后您尝试将指向`char`s 的 const 指针（“OFF”常量）转换为指向 的 const 指针`wchar_t`，并且（逻辑上）不允许转换。

然后，您可以选择正确的字符串类型；如果定义了 UNICODE，则`#define`必须是宽字符串：

```
// Note the L
#define METHOD_ONE L"OFF" 
```

你也可以这样定义：

```
#ifdef UNICODE
#define METHOD_ONE L"OFF"
#else
#define METHOD_ONE "OFF"
#endif 
```

或者使用`_T`Roman R 建议的宏。这个宏的唯一作用是`L`在文本后面附加前缀：

```
#ifdef UNICODE
#define _T(x) L ##x
#else
#define _T(x) x
#endif 
```

最后，您必须知道使用的是哪种字符串；但微软通过使用一个不起眼的`#define`s 和`typedef`s 链来隐藏它。

# javascript - 触发 javascript 事件 onchange 事件

> ID：12383968
> 
> 赞同：2
> 
> 时间：2012-09-12T08:23:55.197
> 
> 标签：javascript, jquery, html, input, blueimp

我有这个代码

```
<input id="fileupload" 
       type="file" name="files[]" 
       class="inputFile clickable" 
       onchange="uploadFile(this.value)"/> 
```

这在第二次使用它时工作正常，即我第一次选择文件时 onchange 事件不会触发，但第二次选择文件工作正常。

有什么我可以在这里改变的吗？

我努力了：

*   `onlclick`（不起作用，在选择文件之前触发）

*   `onblur`（不起作用，根本不会触发，而且即使触发了，单击页面上的其他位置来触发操作也是愚蠢的）

*   `onselect`（不起作用）

附加信息：如果我使用`onchange=alert(this.value)`它工作正常

这是我的 JavaScript 代码

```
function uploadFile(value) {
     alert(value); //works fine
    $('#fileupload').fileupload({
        dataType: 'json',
        url: 'fileUpload.php',
        type: 'POST',
        limitConcurrentUploads: 1,
//        done: function (e, data) {
//            $.each(data.result, function (index, file) {
//                $('<p/>').text(file.name).appendTo(document.body);
//            });
//        },
        success: function() {
            showMultipleDataDiv(value); //but I don't get value here
        }
    });
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2017-04-14T02:18:51.633

用户选择文件后，代码`$('#fileupload').fileupload`将立即触发文件上传。您需要在用户选择文件之前运行此代码，因为它会将事件侦听器添加到输入标记。由于您仅在用户选择文件后运行此代码，因此它只会在第二次运行。

这是您需要进行的更改才能使其正常工作

```
$(function () {
  $('#fileupload').fileupload({
    dataType: 'json',
    url: 'fileUpload.php',
    type: 'POST',
    limitConcurrentUploads: 1,
    //        done: function (e, data) {
    //            $.each(data.result, function (index, file) {
    //                $('<p/>').text(file.name).appendTo(document.body);
    //            });
    //        },
    success: function () {
      showMultipleDataDiv(value); //but I don't get value here
    }
  });
}); 
```

请注意，无需在更改事件中添加代码。该插件将为您做到这一点。

你可以在这里阅读更多关于它的信息：[https ://github.com/blueimp/jQuery-File-Upload/wiki/Basic-plugin](https://github.com/blueimp/jQuery-File-Upload/wiki/Basic-plugin)

# javascript - 滚动和表格

> ID：12383971
> 
> 赞同：0
> 
> 时间：2012-09-12T08:24:05.843
> 
> 标签：javascript, jquery, html

```
<div id="main" style="max-width: 65px !important; overflow: scroll">
   <table border="1">
       <tr><td>a</td><td>s</td><td>d</td><td>f</td><td>g</td><td>h</td><td>i</td><td>j</td><td>k</td><td>l</td></tr>    
   </table>
​&lt;/div>​

​td {
   padding: 15px;
}​

​$('#main').scroll(function(){
    console.log($(this).scrollLeft());
    //console.log( current TD on left );
})​​​​​ 
```

如何在此表的左侧显示当前元素？对于 start 应该是**a**，然后如果 TD with **s**在此表的左侧，那么应该显示我**s**

[http://jsfiddle.net/8KLDc/](http://jsfiddle.net/8KLDc/)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-12T08:43:53.817

```
$('#main').scroll(function() {

    offset = $(this).offset();

    currentElement = document.elementFromPoint(offset.left + 20, offset.top);

    console.log(currentElement.innerHTML);
})​;​ 
```

首先，它找到`#main`元素在页面上的位置。然后它会搜索该位置右侧 20px 的元素（因为我们想要最靠近中心的单元格）。

示例：http: [//jsfiddle.net/grc4/8KLDc/2/](http://jsfiddle.net/grc4/8KLDc/2/)

# gwt - 带有类名和函数名的日志

> ID：12383972
> 
> 赞同：1
> 
> 时间：2012-09-12T08:24:07.047
> 
> 标签：gwt

我需要一个以类名+函数名为前缀的 GWT 日志，这可能吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-12T15:17:04.943

我相信这需要反射，据我所知，GWT 不支持这种反射。

有关更多详细信息，请参阅此问题： [Can you use Java Reflection api in GWT client](https://stackoverflow.com/questions/4195233/can-you-use-java-reflection-api-in-gwt-client)

# javascript - IE7中的jquery第n个选择器

> ID：12383974
> 
> 赞同：1
> 
> 时间：2012-09-12T08:24:14.403
> 
> 标签：javascript, jquery, jquery-selectors, css-selectors

我有一个元素列表，需要使用 jquery 对列表中的第一个元素进行一些修改。我尝试了几种方法来定位第一项，但它们似乎都不适用于 IE7。这些是我尝试过的以下方法...

```
 $(this).eq(1)
 $(this).first()
 $(this:nth-child(1)) 
```

所有这些方法都适用于除 IE7 之外的所有浏览器，是否有人知道用于 IE7 的修复程序或适用于 IE7 的不同方法？

提前感谢您的帮助？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-12T08:34:22.600

试试这个。

```
<ul id="list">
   <li>list item 1</li>
   <li>list item 2</li>
</ul>​

$('#list li').first().css('background-color', 'red'); 
```

它在 IE7 中工作[http://jsfiddle.net/jur4x/JKBH4/](http://jsfiddle.net/jur4x/JKBH4/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-12T08:33:21.700

像这样试试

```
$(this:first-child) 
```

将从[这里获得更多信息](http://www.thebrightlines.com/2010/01/04/alternative-for-nth-of-type-and-nth-child/)

**编辑**

对困惑感到抱歉。我想说的是使用 first-child 而不是 first()

你可以这样使用`$('ul li:first-child').css('background-color', 'red');`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-12T11:03:48.803

[`.first()`](http://api.jquery.com/first-selector/)是一个有效的功能，将工作。

例如：

```
$("li").first(); // will match the first li in the tree 
```

# java - 检查具有公差的值

> ID：12383975
> 
> 赞同：3
> 
> 时间：2012-09-12T08:24:25.690
> 
> 标签：java

我正在尝试检查一个值是否等于 + 或 - 2 另一个值。

这就是我遇到的。

```
 for (int lineNumber : errorLineList) {
        if (lineNumber == startLineNumber
                || lineNumber == (startLineNumber + 1)
                || lineNumber == (startLineNumber + 2)
                || lineNumber == (startLineNumber - 1)
                || lineNumber == (startLineNumber - 2)) {
            lineFound = true;
            break;
        }
    } 
```

但是在这里，如果我希望容差为 5，那么我必须添加 10 个检查。

在java中有没有其他优雅的方法来做到这一点。

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-09-12T08:27:21.847

这在使用双精度时通常需要，因为您可能会得到小的舍入误差。

```
if(Math.abs(lineNumber - startLineNumber) <= 2) 
```

您可以将 2 更改为 5。这是说；如果两个值之间的差小于 2。即它可以是 -2、-1、0、1 或 2。

对于`double`类似的解决方案是使用测试“平等”

```
if(Math.abs(a - b) < ERR) // where ERR is 1e-4 or 1e-9 
```

使用什么是好的 ERR 值取决于具体情况。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-09-12T08:26:41.990

您对价值差异感兴趣。您不在乎什么价值更高，您只对它们的差异感兴趣。我们可以通过 获得`lineNumber - startLineNumber`。这很好，但它会产生正值和负值。因此，当我们获得这种差异的绝对值时，我们就有了它们的距离，可用于比较。

```
if ( Math.abs( lineNumber - startLineNumber ) <= 10 ) {
   // values are in tolerance -10 .. +10, ... 21 values
   // the range of tolerance in now simple changeable by one number 
   //            .. the distance of values, which can be defined 
   //            as a constant wherever you want, 
   //            static final field, property file, ..
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-12T08:29:35.147

当然：

```
int tolerance = 5; //or any other value you want...
for (int lineNumber : errorLineList) {
    if(lineNumber <= (startLineNumber + tolerance) &&
       lineNumber >= (startLineNumber - tolerance)){
        lineFound = true;
        break;
    }
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-12T08:27:50.733

怎么样

```
if (lineNumber >= (startLineNumber - 2) && lineNumber <= (startLineNumber + 2)) 
```

# javascript - 如何在不通过 this 的情况下找到调用的元素

> ID：12383979
> 
> 赞同：0
> 
> 时间：2012-09-12T08:24:41.073
> 
> 标签：javascript

我有一个从许多页面多次调用的 Javascript 函数。

在这个函数中，我必须检查调用这个函数的元素。

我知道一种通过函数调用传递“this”的方法。我不能使用那种方法。因为我只在一个模块上工作。还有许多其他模块使用此功能。因此，如果我更改函数定义，它将为其他模块/页面抛出错误。

有没有其他方法可以在不传递“this”或不更改函数定义的情况下找到被调用的元素。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-12T08:28:02.273

你确定它会抛出错误吗？在不传入所有参数的情况下调用 javascript 函数是完全合法的。

传入太多参数也是合法的，您可以使用`arguments`变量访问它们。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-12T08:33:03.473

您不必修改`functions`签名。您可以传递参数并使用`arguments`变量访问它们。

例如

```
<a href="#" onclick='foo()' id='one'>One</a>
<a href="#" onclick='foo(this)' id='two'>Two</a>
<script>
    function foo() {
    if(arguments.length==1)
    {
        alert("Called from element with id "+arguments[0].id);
    }    
    else{
        alert("No element specified")                 
    }
}
</script> 
```

[演示](http://jsfiddle.net/TvpMy/)

# regex - 正则表达式从制表符分隔的文本行中提取带有空格的字符串值

> ID：12383980
> 
> 赞同：1
> 
> 时间：2012-09-12T08:24:43.513
> 
> 标签：regex

我有以下格式的文本行

> 1344232458000 5260 2 abcdef e168ae6ec0804987b1ce723465cbbb50 1 - - - - 125,126,127 2 - 22 b53a59973665405180e3ed015e094195 77 66 - 3 消息 98 - - - - - 127 126

我需要`Message Recall`在索引 26 处提取字符串。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-12T08:45:10.993

如果需要的字符串总是在同一个地方（例如总是第五个）你不能使用正则表达式。只需通过分隔符（在您的情况下为“”）打破您的字符串以获得一个数组（我确信Java有这样的基本方法），然后通过数组索引访问所需的部分。

我不熟悉 java，但这里是您的任务的 PHP 工作示例（假设我们想要获得`e168ae6ec0804987b1ce723465cbbb50`- 5th）：

```
$string = '1344232458000 5260 2 abcdef e168ae6ec0804987b1ce723465cbbb50 1 - - - - 125,126,127 2 - 22';

$array = explode(' ', string);

var_dump($array[4]); // prints `e168ae6ec0804987b1ce723465cbbb50` 
```

# ruby-on-rails-3 - 下载PDF文件时触发Jquery

> ID：12383988
> 
> 赞同：0
> 
> 时间：2012-09-12T08:25:16.157
> 
> 标签：ruby-on-rails-3, wkhtmltopdf, wicked-pdf

我正在使用 wicked_pdf 插件生成 pdf。当用户单击 pdf 链接时，我正在显示消息和微调器，并且我想在生成 pdf 并将其推送到浏览器进行下载/显示时隐藏它。我在 body onload 上添加了 jquery 代码，它不会执行。当pdf文件推送到浏览器时，还有其他方法可以触发jquery功能吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-12T09:01:24.297

这是一个相当复杂的问题，但如果您愿意使用 jQuery 插件，则可以很好地解决。[http://jqueryfiledownload.apphb.com/](http://jqueryfiledownload.apphb.com/)是一个插件，如果我理解正确，它可以完全满足您的需求。

* * *

我的前端代码看起来像这样

```
$.fileDownload('/Content/Print', {
    successCallback: function (url) {
        $("#PrintingMessage").dialog('close');
    },
    failCallback: function (responseHtml, url) {
        $("#PrintingMessage").dialog('close');

        if (responseHtml.indexOf('Error403') != -1) {
            $("#PrintingFailedMessage").html("Error 403.");
        } else if (responseHtml.indexOf('Error500') != -1) {
            $("#PrintingFailedMessage").html("Error 500.");
        }

        $("#PrintingFailedMessage").dialog({ modal: true });
    },
    httpMethod: "POST",
    data: $('#PublishForm').serialize()
}); 
```

我的后端在流程结束时执行此操作。你必须自己翻译：）

```
Response.SetCookie(new System.Web.HttpCookie("fileDownload", "true") { Path = "/" });
return File(file, System.Net.Mime.MediaTypeNames.Application.Octet, filename); 
```

# gcc - 内核模块makefile中提到的gcc版本

> ID：12383989
> 
> 赞同：1
> 
> 时间：2012-09-12T08:25:28.390
> 
> 标签：gcc, makefile, linux-kernel, kernel-module

编译内核模块时如何在makefile中提及gcc版本？
我使用**make ARCH=arm CROSS_COMPILE=arm-none-linux-gnueabi-**来构建模块，但它给出了 arm-none-linux-gnueabi-gcc: command not found 的错误。位我有 arm-none-linux-gnueabi-gcc-4.3，那么我怎么能在 makefile 中提到 gcc-4.3 呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-12T08:43:22.180

尝试添加：

```
MAKEFLAGS="CC=gcc-4.4" 
```

# html - 样式 (CSS) 元素的位置在 HTML 中是否重要？

> ID：12383993
> 
> 赞同：2
> 
> 时间：2012-09-12T08:25:36.727
> 
> 标签：html, css

是否放置：

```
<style type="text/css">
...
</style> 
```

事情？如果我将它放在页面 div 内或正文内，有什么区别吗？我最近发现它对 javascript 很重要。我的 CSS 也有一些问题（jQuery Mobile）。会不会是这个原因？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-12T08:35:34.433

style 元素应该适用于整个文档，无论它放在哪里，但是通常的做法是始终将它放在 head 元素中。如果你把它放在其他地方，如果浏览器处理有点不稳定，我不会感到惊讶。

请注意，html5 允许您为 style 元素指定 scoped 属性，这意味着它将仅适用于 style 元素的父元素及其所有子元素。

顺便说一句，通常的做法是将 css 放在一个单独的文件中，并使用`<link>`标签将 CSS 包含在您的文档中。这样您就可以跨多个页面共享 css。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-12T09:57:05.617

位置与样式表的顺序有关。当解决样式表之间的冲突时，在最后一步，当其他条件相同时，最后出现的规则获胜。因此，`style`元素相对于其他样式元素和`link`引用样式表的元素的放置方式很重要。（关于元素中的属性并不重要`style`，因为其他事物不可能相等：属性获胜，通过特异性。）

它在验证中也很重要：一个`style`元素除了在一个元素内之外是无效的`head`。不过，浏览器并不关心这一点。

JavaScript 代码当然可以依赖于它处理的元素的位置。这完全取决于代码。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-12T08:27:42.747

理想情况下不应该这样做，但不要这样做，这只是不好的做法，而且会使您的代码看起来很乱

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-12T08:40:20.693

要直接回答这个问题，通常如果您将代码直接放在页面中，您会将其放在`<head>`页面中。不管你把它放在哪里都应该工作，但这`<head>`是常见的做法。不确定您的目标到底是什么，但对于电子邮件，我通常将其拆分为内联样式（将相关代码放在 HTML 标记本身中，例如`<p style="line-height:1.4em;">`）。

`<head>`但是，如果您正在处理网页，除非有特殊原因将 CSS 嵌入页面本身的代码中，否则链接到标签之间的外部样式表几乎总是更好（并且被认为是最佳实践） （ `<head> <link rel="stylesheet" href="[YOUR STYLESHEET]" type="text/css"> </head>`）。它使您的 HTML 更整洁，并有助于分离标记 (HTML)、样式 (CSS) 和功能 (JavaScript)。

希望能回答你的问题，哈哈。

# html - Meta HTTP 刷新安全与否？

> ID：12383996
> 
> 赞同：0
> 
> 时间：2012-09-12T08:25:41.763
> 
> 标签：html, refresh, meta-tags

我在我的网站中使用 meta http-equiv=refresh 将未注册的人踢出登录页面。例如，我只为已登录的成员提供了一个位置，并且我将希望通过元刷新看到那里的人重定向到登录页面。但我想知道是否有可能打破它并匿名查看那里的内容？

我正在使用我的功能

```
if($session == true){

// content

}

else{
echo "<meta http-equiv=\"refresh\" content=\"0;url=\"mywebsite.com/login\" />";
} 
```

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-12T08:37:39.303

是的，这是可能的，而且非常容易。例如，`esc`在被重定向时只需按下即可停止重定向。

通常，您不能依靠客户端技术来防止未经授权的访问。当您的 Web 服务器向浏览器发送私人信息时，您就可以认为它的隐私受到了损害。

保护内容的唯一方法是在将任何内容输出到浏览器之前在服务器端检查用户是否已登录。

在 PHP 中，您可以在发送任何内容之前执行此操作：

```
if (!$session) {
    header("Location: //mywebsite.com/login", true, 302);
    die("Not authenticated, redirecting..."); // stop the script
}
// content 
```

# java - 如何从google plus中的圈子中检索帖子

> ID：12383998
> 
> 赞同：1
> 
> 时间：2012-09-12T08:25:53.153
> 
> 标签：java, google-app-engine, oauth-2.0

我正在尝试从 Google Plus 圈子中检索帖子我已经成功检索到用户个人资料和用户个人资料详细信息中的帖子你能帮帮我吗

提前致谢

我的代码是

```
 package main.java;

    import com.google.api.client.googleapis.auth.oauth2.draft10.GoogleAccessProtectedResource;
    import com.google.api.client.http.HttpResponseException;
    import com.google.api.client.http.json.JsonHttpRequest;
    import com.google.api.client.http.json.JsonHttpRequestInitializer;
    import com.google.api.services.plus.Plus;
    import com.google.api.services.plus.PlusRequest;
    import com.google.api.services.plus.model.*;

    import java.io.IOException;
    import java.util.List;
    import java.util.logging.Logger;

    public class Sample {
      private static final Logger log = Logger.getLogger(Sample.class.getName());

      private static Plus plus;
      private static Plus unauthenticatedPlus;

      public static void main(String[] args) throws IOException {

        try {
          setupTransport();

          getProfile();
          listActivities();
          getActivity();
        } catch (HttpResponseException e) {
          log.severe(e.getResponse().parseAsString());
          throw e;
        }
      }

      /**
       * Setup the transport for our API calls.
       * @throws java.io.IOException when the transport cannot be created
       */
      private static void setupTransport() throws IOException {
        // Here's an example of an unauthenticated Plus object. In cases where you
        // do not need to use the /me/ path segment to discover the current user's
        // ID, you can skip the OAuth flow with this code.
        unauthenticatedPlus = Plus.builder(Util.TRANSPORT, Util.JSON_FACTORY)
            // When we do not specify access tokens, we must specify our API key instead
            // We do this using a JsonHttpRequestInitializer
            .setJsonHttpRequestInitializer(new JsonHttpRequestInitializer() {
              @Override
              public void initialize(JsonHttpRequest jsonHttpRequest) throws IOException {
                PlusRequest plusRequest = (PlusRequest) jsonHttpRequest;
                plusRequest.setKey(Auth.GOOGLE_API_KEY);
              }
            }).build();

        // If, however, you need to use OAuth to identify the current user you must
        // create the Plus object differently. Most programs will need only one
        // of these since you can use an authenticated Plus object for any call.
        Auth.authorize();
        GoogleAccessProtectedResource requestInitializer =
            new GoogleAccessProtectedResource(
                Auth.getAccessToken(),
                Util.TRANSPORT,
                Util.JSON_FACTORY,
                Auth.CLIENT_ID,
                Auth.CLIENT_SECRET,
                Auth.getRefreshToken());
        plus = Plus.builder(Util.TRANSPORT, Util.JSON_FACTORY)
            .setHttpRequestInitializer(requestInitializer).build();
      }

      /**
       * List the public activities for the authenticated user
       *
       * @throws IOException if unable to call API
       */
      private static void listActivities() throws IOException {
        header("Search Activities for teja mariduvb");

        // Fetch the first page of activities
        Plus.Activities.Search listActivities = plus.activities().search();

        listActivities.setQuery("teja mariduvb");
        listActivities.setMaxResults(20L);

        ActivityFeed feed;
        try {
          feed = listActivities.execute();
        } catch (HttpResponseException e) {
          log.severe(Util.extractError(e));
          throw e;
        }
        // Keep track of the page number in case we're listing activities
        // for a user with thousands of activities. We'll limit ourselves
        // to 5 pages
        int currentPageNumber = 0;
        while (feed != null && feed.getItems() != null && currentPageNumber < 5) {
          currentPageNumber++;

          System.out.println();
          System.out.println("~~~~~~~~~~~~~~~~~~ page "+currentPageNumber+" of activities ~~~~~~~~~~~~~~~~~~");
          System.out.println();

          for (Activity activity : feed.getItems()) {

            show(activity);
            System.out.println();
            System.out.println("------------------------------------------------------");
            System.out.println();
          }

          // Fetch the next page
    //      System.out.println("next token: " + feed.getNextPageToken());
    //      listActivities.setPageToken(feed.getNextPageToken());
    //      feed = listActivities.execute();
        }
      }

      /**
       * Get the most recent activity for the authenticated user.
       *
       * @throws IOException if unable to call API
       */
      private static void getActivity() throws IOException {
        // A known public activity ID
        String activityId = "z12gtjhq3qn2xxl2o224exwiqruvtda0i";

        // We do not need to be authenticated to fetch this activity
        header("Get an explicit public activity by ID");
        try {
          Activity activity = unauthenticatedPlus.activities().get(activityId).execute();
          show(activity);
        } catch (HttpResponseException e) {
          log.severe(Util.extractError(e));
          throw e;
        }
      }

      /**
       * Get the profile for the authenticated user.
       *
       * @throws IOException if unable to call API
       */
      private static void getProfile() throws IOException {
        header("Geting your Google+ profile information here");
        try {
          Person profile = plus.people().get("me").execute();
          show(profile);
        } catch (HttpResponseException e) {
          log.severe(Util.extractError(e));
          throw e;
        }
      }

      /**
       * Print the specified person on the command line.
       *
       * @param person the person to show
       */
      private static void show(Person person) {
        System.out.println("id: " + person.getId());
        System.out.println("name: " + person.getDisplayName());
        System.out.println("image url: " + person.getImage().getUrl());
        System.out.println("profile url: " + person.getUrl());
        System.out.println("AboutMe: " + person.getAboutMe());
        System.out.println("RelationshipStatus: " + person.getRelationshipStatus());
        System.out.println("Tagline: " + person.getTagline());
        System.out.println("PlacesLived: " + person.getPlacesLived());
        System.out.println("Birthday: " + person.getBirthday());
      }

      /**
       * Print the specified activity on the command line.
       *
       * @param activity the activity to show
     * @throws IOException
       */
      private static void show(Activity activity) throws IOException {
        System.out.println("Id of post: " + activity.getId());
        System.out.println("Url of post: " + activity.getUrl());
        System.out.println("Content of post is: " + activity.getPlusObject().getContent());
        System.out.println("Attachments: " + activity.getPlusObject().getAttachments());
        System.out.println("No of replies: " + activity.getPlusObject().getReplies().getTotalItems());
        System.out.println("Title of post: " + activity.getTitle());
        System.out.println("Kind of post: " + activity.getKind());
        System.out.println("Actor of post: " + activity.getActor());
        System.out.println("Published time of post: " + activity.getPublished());
        System.out.println("Updated time: " + activity.getUpdated());

        Plus.Comments.List listComments = plus.comments().list(activity.getId());
        CommentFeed commentFeed = listComments.execute();
        List<Comment> comments = commentFeed.getItems();
        System.out.println("\n");
        for (Comment comment : comments)
        {
            System.out.println("Comment Id is: " +comment.getId());
            System.out.println("Content of Comment is: " +comment.getPlusObject().getContent());
            System.out.println("Comment written by: " +comment.getActor());
            System.out.println("Published time of Comment is: " +comment.getPublished());
            System.out.println("\n");
        }

      }

      private static void header(String name) {
        System.out.println();
        System.out.println("============== " + name + " ==============");
        System.out.println();
      }
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-12T14:49:11.543

官方的[Google+ API](https://developers.google.com/+/api/)目前不支持获取圈子中的人或他们的帖子，因此目前无法实现。

在 Google 的项目跟踪器中有一个关于此类访问的开放功能[请求](https://code.google.com/p/google-plus-platform/issues/detail?id=9&q=circles&colspec=ID%20Type%20Status%20Component%20Owner%20Summary)。

# jquery - 更新海边的嵌入式组件，不刷新整个页面

> ID：12383999
> 
> 赞同：4
> 
> 时间：2012-09-12T08:25:55.207
> 
> 标签：jquery, ajax, smalltalk, seaside, visual-age

我有一个包含 3 个嵌入式组件的组件 (ItemTree)。第一个 (ItemTreeList) 是要选择的项目列表。第二个 (ItemGIDE) 显示您选择的项目的属性。

**在 ItemTreeList 上进行新选择时，如何告诉 ItemGIDE 进行更新？**

首先，这比我想象的要复杂。ItemTreeList 具有节点类型和节点实例的层次结构。它具有可折叠的 div，当单击顶级层次结构项或下面的实例时，将在其他对象上设置各种变量。因此，只需单击一下即可发生很多事情。我已经让 ItemTreeList 自行更新而不刷新整个页面。只需向需要刷新的其他组件（ItemGIDE）“宣布”（同样无需刷新整个页面）。

*   我手头有 Jquery 和 Ajax。
*   我将 Visualage Smalltalk 8.5.0 与 Seaside 3.0 一起使用。-我一直在考虑调用 ItemTree 来告诉它的子组件更新？
*   我一直在考虑用'announce'来'announce'其他组件来更新？
*   我进行实际编程不到 6 个月？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-12T17:10:22.750

《[Dynamic Web Development with Seaside](http://book.seaside.st/book) 》一书包含一个关于 JQuery 的草稿章节。在那里，您可以找到一个名为[Replace a Component](http://book.seaside.st/book/web-20/jquery/how-to/replace-component)的部分，其中包含您要求的示例：

```
OuterComponent>>renderContentOn: html
  html div
    id: (id := html nextId);
    with: child.
  html anchor
    onClick: ((html jQuery id: id) load
      html: [ :r | 
        child := OtherComponent new;
        r render: child ]);
    with: 'Change Component' 
```

代码显示了外部组件的渲染方法。它假定组件有一个名为的变量，该变量`child`使用初始渲染中显示的组件进行初始化。此外，它假设组件有一个`id`在渲染期间设置的名为的变量，以记住渲染子组件的目标 DOM 节点。在锚点的 AJAX 回调中，您将子组件替换`OtherComponent new`为目标节点的内容并重新呈现。