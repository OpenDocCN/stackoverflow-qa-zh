# StackOverflow 问答 12482000-12482999

# java - Java用什么布局管理器把窗口分成两个区域

> ID：12482001
> 
> 赞同：1
> 
> 时间：2012-09-18T17:24:56.113
> 
> 标签：java, jpanel, layout-manager

好吧，我需要一些关于使用哪些布局管理器将框架划分为两个区域的技巧，假设在框架的左侧将插入一个绘图 jpanel，在框架的右侧我将创建按钮和其他东西来控制它。那么我应该使用什么布局管理器以及它应该看起来如何？因为上次我需要类似的东西，我尝试使用框布局，然后使用边框布局，但我想我不知道如何正确使用它，因为结果不好。

任何人都可以帮忙吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-18T17:29:08.210

我会选择BorderLayout。将您的导航内容放在`orderLayout.EAST`或`BorderLayout.WEST`（分别代表左右），看起来就像你想要的那样`WEST`。然后为您的内容指定一个 Border.CENTER 或不指定一个。

```
JPanel parent = new JPanel();
parent.setLayout(new BorderLayout());
JPanel navigation = createNavigation();
JPanel content = createContent();

parent.add(navigation, BorderLayout.WEST);
parent.add(content, BorderLayout.CENTER);  // or parent.add(content); 
```

@Razvan 有一个很好的观点，特别是如果您希望该分隔线让用户手动控制两个布局的宽度。边框布局将使侧面板适合组件所需的最小尺寸，并将所有额外空间放在该`CENTER`区域中。

更多细节在这里：[http ://docs.oracle.com/javase/6/docs/api/java/awt/BorderLayout.html](http://docs.oracle.com/javase/6/docs/api/java/awt/BorderLayout.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-18T17:32:05.517

我认为 JSplitPane 是您想要和需要的。

它完全符合您的要求：将框架分成 2 个独立的区域，您可以在其中做任何您想做的事情。

由于这是您唯一的组件，我认为父框架的 FlowLayout 就足够了。

有关更多详细信息，请参见此处：[http ://docs.oracle.com/javase/tutorial/uiswing/components/splitpane.html](http://docs.oracle.com/javase/tutorial/uiswing/components/splitpane.html)

# solr - 如何在 lucene 中提升更长的文档

> ID：12482008
> 
> 赞同：2
> 
> 时间：2012-09-18T17:25:41.757
> 
> 标签：solr, lucene, lucene.net, elasticsearch

我有一个包含 1-10 个句子的短语索引。较长的短语是更相关的结果，但由于词频较低，它们的得分低于所有 1 行。我想做的是提高词频的倒数，或者只是提高更长的文档。

我正在使用 C#、NEST 和 ElasticSearch，但我不确定如何使用原始 Lucene 来解决这个问题，所以任何事情都会有所帮助。

## 例子

如果我搜索**“书面文章” ，像***doc 2*这样的短文档始终位于顶部，而像*doc 1*这样的好结果则位于底部。我怎样才能扭转这种局面？

**文件 2**

> 猫不会**写文章**

**文件 1**

> 这是一篇写得很好**的**文章**。Lorem** ipsum dolor sit amet，consectetur adipiscing elit。Quisque ornare sem ac arcu posuere viverra。整数 egestas pharetra nunc nec cursus。Nam rhoncus sem nec sem laoreet tincidunt。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-18T17:42:26.887

也许添加文件长度字段并增强它？

或者

您是否尝试过使用[omitNorms=true](http://wiki.apache.org/solr/SchemaXml)删除规范，从而删除长度归一化以便不提升较短的文档？

# entity-framework - 实体框架 5 - 十进制保存问题 - 转换溢出

> ID：12482009
> 
> 赞同：3
> 
> 时间：2012-09-18T17:25:46.437
> 
> 标签：entity-framework, decimal

如果我在 SQL 2008 R2 中有一个表，其类型为 Decimal(35,18) 的可为空列，并将其拉入 edmx。我可以成功保存到数据库而不会出现转换溢出错误的最大十进制值是

79,228,162,514

这很奇怪，因为它匹配 Decimal 的上限（如果您比较的数字不是实际值）

[http://msdn.microsoft.com/en-us/library/system.decimal.maxvalue.aspx](http://msdn.microsoft.com/en-us/library/system.decimal.maxvalue.aspx)

79,228,162,514,264,337,593,543,950,335

但是我什至没有接近最大 28 位数字。

我提交了一个错误，因为我相信它是......但我不敢相信它会是一个巨大的问题？

[http://entityframework.codeplex.com/workitem/522](http://entityframework.codeplex.com/workitem/522)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-08T20:56:28.947

这是设计使然。

您指定了比例 18，因此 79,228,162,514 被解释并存储为 79,228,162,514,000,000,000,000,000,000 x 10^-18

如果再增加整数部分，它将大于 CLR 十进制 MaxValue 79,228,162,514,264,337,593,543,950,335

# android - sencha touch 2 和 Phonegap 之间的混淆

> ID：12482013
> 
> 赞同：6
> 
> 时间：2012-09-18T17:25:58.953
> 
> 标签：android, cordova, sencha-touch, sencha-touch-2

> **可能重复：**
> [Sencha touch2 和 PhoneGap 原生封装的区别](https://stackoverflow.com/questions/10725591/difference-of-native-packaging-between-sencha-touch2-and-phonegap)

我已经阅读了很多关于 Sencha Touch 和 Phonegap 之间区别的文章。[比如这个](http://beautyindesign.com/blog/titanium-phonegap-sencha-touch-jquery-mobile-clearing-up-confusion/) 。这让我很困惑。最初我认为 Sencha Touch 只是一个构建“移动 Web 应用程序”的框架，而 Phonegap 是使用 JS、HTML5 和 CSS3 构建“手机原生应用程序”。当我访问 Sencha 网站并阅读有关 Sencha Touch "2" 的信息时。我了解到它带有 Native 包装，它允许用户通过使用 Native 设备 API`Ext.device`

```
Ext.device.Camera.capture({}); //An example 
```

在几个论坛中，我读到“Sencha Touch 和 Phonegap”“携手并进”。对我来说，这意味着 Sencha Touch 仅用于创建应用程序的 GUI，而 Phonegap 用于访问本机设备 API 和创建跨平台构建。但是在阅读了 Sencha Touch 2 的描述后，我感到很困惑。有人能解释一下这两个框架到底是做什么用的吗？谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-19T15:45:57.843

我认为您的问题可能重复。

[链接在这里](https://stackoverflow.com/questions/10725591/difference-of-native-packaging-between-sencha-touch2-and-phonegap)

我认为第一个答案可以让您对这两个框架之间的区别有一些基本了解

# c# - C# 从 XML 文件加载配置

> ID：12482016
> 
> 赞同：-1
> 
> 时间：2012-09-18T17:26:22.733
> 
> 标签：c#, xml-serialization

我有一个控制台应用程序，它将由批处理文件触发。应用程序必须从 XML 文件加载配置才能运行...假设如果批处理文件向应用程序发送参数“Env1”。应用程序应仅通过序列化将“Env1”配置加载到 ac# 类。XML 文件格式如下所示。

```
<EnvironmentCollection>
    <Environment>
        <Name>Env1</Name>
        <Url>....</Url>
    </Environment>
    <Environment>
        <Name>Env2</Name>
        <Url>....</Url>
    </Environment>
 </EnvironmentCollection> 
```

任何帮助将不胜感激

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-18T17:51:44.190

```
XDocument xDoc = XDocument.Load(file);
var dict = xDoc.Descendants("Environment")
                .ToDictionary(x => x.Element("Name").Value, 
                              x => x.Element("Url").Value); 
```

和用法将是

```
var url = dict["Env1"]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-18T17:32:48.550

首先将您的 EnvironmentCollection 类标记为可序列化。然后您可以使用以下代码将 xml 反序列化回对象：

```
 /// <summary>
    /// Deserializes xml file to object
    /// </summary>
    /// <param name="filePath"></param>
    /// <returns></returns>
    public static object DeSerializeFromXML(string filePath, Type type)
    {
        object data = null;
        System.IO.Stream stream = null;
        try
        {
            stream = System.IO.File.Open(filePath, System.IO.FileMode.Open);
            System.Xml.Serialization.XmlSerializer x = new System.Xml.Serialization.XmlSerializer(type);
            data = x.Deserialize(new System.Xml.XmlTextReader(stream));
            stream.Close();
            stream.Dispose();
        }
        catch (Exception ex)
        {
            try
            {
                stream.Close();
                stream.Dispose();
            }
            catch (Exception)
            {
            }
            throw new Exception(ex.Message);
        }
        return data;
    } 
```

你可以像这样使用这个函数：

```
 EnvironmentCollection col = (EnvironmentCollection)DeSerializeFromXML("myFile.xml", typeof(EnvironmentCollection)); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-18T17:35:19.587

有很多方法，你谈到 xml 序列化，这需要你在 C# 中有一个可以处理 xml 的对象模型，或者你从对象模型创建你的 xml：http: [//www.dotnetjohn.com/articles.aspx？文章ID=173](http://www.dotnetjohn.com/articles.aspx?articleid=173)

另一种非常简单的方法是将 xml 文档加载到 xmldocument 对象中并对其进行查询：[http ://csharp.net-tutorials.com/xml/using-xpath-with-the-xmldocument-class/](http://csharp.net-tutorials.com/xml/using-xpath-with-the-xmldocument-class/)

我提供了教程的链接，因为从问题中我认为您可以使用一些关于可能性的背景知识，而不仅仅是一个完整的解决方案。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-18T17:59:38.603

绝对没有理由将配置*加载*到 Xml。.Net 具有允许您以强类型和强命名方式使用配置的[配置类。](http://msdn.microsoft.com/en-us/library/system.configuration.configuration.aspx)您可以将 appSettings 用于简单的键值条目，也可以轻松定义自己的自定义配置部分（请参阅链接中的示例）。

话虽如此，codeplex 上的[Configuration Section Designer工具让您的生活变得更轻松。](http://csd.codeplex.com/)它允许您通过 Visual Studio（包括 2010）中的图形插件来定义这些部分，它会自行生成自定义部分的类定义。试试看，太棒了:-)

# java - 为什么我不能调用我的 Java 接口的方法？

> ID：12482019
> 
> 赞同：0
> 
> 时间：2012-09-18T17:26:42.857
> 
> 标签：java, eclipse, interface

我在 Java 中声明了以下接口：

```
public interface ITest {
    void doStuff();
} 
```

这是由另外几个覆盖 doStuff() 方法的类实现的。然后我将此接口用作函数中的类型：

```
public gonnaDoSomeStuff(ITest fun) {
    fun.doStuff();
} 
```

但是，Java（和 Eclipse）声明该方法对于 ITest 类型是未定义的。我究竟做错了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-21T19:21:39.963

事实证明，包含我的 goingDoSomeStuff 方法的类附加了一个泛型，它被引用而不是实际的接口。

**错误的**

```
public class Dog<ITest> {
    public gonnaDoSomeStuff(ITest fun) {
        // ...
    }
} 
```

**对**

```
public class Dog {
    public gonnaDoSomeStuff(ITest fun) {
        // ...
    }
} 
```

* * *

## 回答 #2

> 赞同：-3
> 
> 时间：2012-09-18T17:47:27.447

您不能访问公共类中的默认声明方法，因为它的范围是有限的。您应该将其声明为 public 以便在公共类中调用。

# java - 使用一个字符串数组来生成每个可能的组合与一个常数

> ID：12482022
> 
> 赞同：-1
> 
> 时间：2012-09-18T17:26:57.373
> 
> 标签：java

给定一个字符串数组

```
String[] values = {"A", "B", "C", "D", "E"}; 
```

和一个常数

```
 final String X = "X"; 
```

生成值数组可以包含 0 个或多个 X 的所有可能方式

IE

```
 [A, B, C, D, E]
    [A, X, X, D, E]
    [A, B, X, D, E]
    [X, X, X, X, X] 
```

依此类推。需要快速 - 有点脑筋急转弯我无法提高效率。不像听起来那么容易。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-18T18:14:55.083

答案在 Joachim Sauer 的暗示中：

```
 String[] values = {"A", "B", "C", "D", "E"};
    final String ONE = "1";
    final String X = "X";
    int control=0;
    StringBuilder sb = new StringBuilder(values.length);
    String copy[];
    int count = Integer.parseInt(new String(new char[values.length]).replace("\0", ONE), 2) ;
    while (control <= count) {
        sb.delete(0, sb.length());
        sb.append(String.format("%" + values.length  + "s", Integer.toBinaryString(control++)).replace(' ', '0'));
        copy = values.clone();
        for (int x = 0; x < sb.length(); x ++) {
            if (sb.substring(x, x+1).equals(ONE)) {
                copy[x] = X;
            }
        }
       System.out.println(control + " " + Arrays.toString(copy));
       map.put(generateHashCode(copy),copy.clone());
    }

    System.out.println(map.values().size()); 
```

# c# - 在 C# 中从 xml 数据创建一个数组

> ID：12482023
> 
> 赞同：1
> 
> 时间：2012-09-18T17:26:57.300
> 
> 标签：c#, xml, arrays, parsing

当我进行 API 调用时，我返回了以下 XML。我需要创建一个数组来保存 、和中的每一个的`<status>`和值。谁能分享一些对我有帮助的知识？`<description>``<order_status>``<payment_status>``<fulfillment_status>`

```
<orderwave>
  <call_result>
    <order>
      <order_number>17377</order_number>
      <orderwave_order_number>RWD-336475921</orderwave_order_number>
      <order_status>
        <status>active</status>
        <description>This order is free to be charged and shipped.  It is open in the orderwave workflow.</description>
      </order_status>
      <payment_status>
        <status>declined</status>
        <description>This order has been declined by the payment network.</description>
      </payment_status>
      <fulfillment_status>
        <status>not shipped</status>
        <description>This order has not been allocated for shipment.</description>
      </fulfillment_status>
    </order>
  </call_result>
  <warning_count>0</warning_count>
  <warnings/>
  <error_count>0</error_count>
  <errors/>
</orderwave> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-19T03:18:24.797

为了扩展我之前的评论，一个简单快捷的方法是使用[`List<T> Class`](http://msdn.microsoft.com/en-us/library/6sh2ey19%28v=vs.100%29.aspx)LINQ [to XML](http://msdn.microsoft.com/en-us/library/bb387098%28v=vs.100%29.aspx)。

使用一个类来保存每个订单的数据 - 例如：

```
public class Order
{

    public int OrderNumber { get; set; }
    public string OrderStatus { get; set; }
    public string OrderDescription { get; set; }
    public string PaymentStatus { get; set; }
    public string PaymentDescription { get; set; }
    public string FulfillmentStatus { get; set; }
    public string FulfillmentDescription { get; set; }
} 
```

接下来，您可以将 XML 加载到[XDocument](http://msdn.microsoft.com/en-us/library/system.xml.linq.xdocument%28v=vs.100%29.aspx)中，使用 LINQ to XML 对其进行解析并创建 Order 对象列表：

```
// Parse the XML string; you can also load the XML from a file.
XDocument xDoc = XDocument.Parse("<orderwave>....</orderwave>");

// Get a collection of elements under each order node
var orders = (from x in xDoc.Descendants("order")
// Use the data for each order node to create a new instance of the order class
              select new Order
              {
                  OrderNumber = ConvertTo.Int32(x.Element("order_number").Value),
                  OrderStatus = x.Element("order_status").Element("status").Value,
                  OrderDescription = x.Element("order_status").Element("description").Value,
                  PaymentStatus = x.Element("payment_status").Element("status").Value,
                  PaymentDescription = x.Element("payment_status").Element("description").Value,
                  FulfillmentStatus = x.Element("fulfillment_status").Element("status").Value,
                  FulfillmentDescription = x.Element("fulfillment_status").Element("description").Value
              }).ToList();
          // Convert the result to a list of Order objects 
```

如果您想使用列表而不是数组，这在我的脑海中没有经过测试，但它应该为您指明正确的方向。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-18T19:16:06.697

我相信 LinqToXML 是您想要的。

我有一段时间没有这样做了，所以我的语法可能并不完美。

像这样的东西：

```
var xmlSource = contacts.Load(@"../../return.xml");

var q = xmlSource.Descendants("order").SelectMany(x => x.Elements("order_status") 
```

# java - ConcurrentHashMap 到 HashMap

> ID：12482026
> 
> 赞同：1
> 
> 时间：2012-09-18T17:27:12.727
> 
> 标签：java, gwt

我只是想知道......如何以`ConcurrentHashMap`最佳`HashMap`方式投射？

非常感谢任何有用的评论

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-09-18T17:29:00.830

为什么你需要这样做？只需将其转换为`Map`.

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-09-18T17:44:21.753

A`ConcurrentHashMap`不是 a `HashMap`（在严格的类继承意义上），所以你*不能*执行这个转换。就像 Keith 所说，您最好将其视为 a`Map`并且让您的客户端代码不关心实现。如果您真的想将 a`ConcurrentHashMap`变成 a `HashMap`，请使用构造函数[HashMap(Map)](http://docs.oracle.com/javase/6/docs/api/java/util/HashMap.html#HashMap%28java.util.Map%29)，但这需要创建并填充一个全新的 Map。

我将澄清我的“将其视为`Map`”建议。您编写代码的常用方式（除非您真的需要独特的功能`HashMap`或者`ConcurrentHashMap`是这样的：

```
Map<K, V> myMap = new HashMap<K, V>(); 
```

或者

```
Map<K, V> myMap = new ConcurrentHashMap<K, V>(): 
```

但不是

```
//Don't do this unless you have a good reason!
HashMap<K, V> myMap = new HashMap<K, V>(); 
```

保持通用性并将变量定义`myMap`为 a`Map`而不是 a的优点`HashMap`是它可以让您更改您使用的实现，而无需担心。

# c# - 将 HTML 区域添加到 Winform 应用程序

> ID：12482032
> 
> 赞同：0
> 
> 时间：2012-09-18T17:27:36.170
> 
> 标签：c#, winforms

我正在为我的实习开发一个图书库应用程序。我有一个 GridView，它显示了我在数据库中的书籍列表。我想添加一个功能，当我单击 GridView 中的某本书时，它会向我显示所有信息，如 HTML 页面，如图所示。

![在此处输入图像描述](../Images/59bbe569f7d7da4e24611e9501854b4a.png)

如何将此 HTML 区域添加到我的表单中，以及如何在其中显示信息？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-18T17:33:26.183

您可以使用`WebBrowser Class`

链接：http: [//msdn.microsoft.com/fr-fr/library/system.windows.forms.webbrowser%28v=vs.80%29.aspx](http://msdn.microsoft.com/fr-fr/library/system.windows.forms.webbrowser%28v=vs.80%29.aspx)

链接：http: [//msdn.microsoft.com/fr-fr/library/w290k23d.aspx](http://msdn.microsoft.com/fr-fr/library/w290k23d.aspx)

您的样品：

```
WebBrowser browser = new WebBrowser();
browser.Url = new Uri("your Url"); 
```

在 webBrowser 中设置内容 `browser.DocumentText`

链接：http: [//msdn.microsoft.com/en-us/library/system.windows.forms.webbrowser.documenttext.aspx](http://msdn.microsoft.com/en-us/library/system.windows.forms.webbrowser.documenttext.aspx)

# jquery - 在jQuery mobile中通过图像链接图像

> ID：12482035
> 
> 赞同：0
> 
> 时间：2012-09-18T17:27:54.770
> 
> 标签：jquery, image, mobile, jquery-mobile, linker

我没有使用 jQuery mobile 的经验，但我想将图像链接到同一图像但缩略图，如下所示：

```
<a href="image.jpg" class="image" data-rel="dialog"><img class="ui-li-thumb" src="image.jpg"/> 
```

我读过我可以把`rel="external"`它作为一个属性，但我失去了过渡效果。

# scala - 如何将 Map[String,Seq[String]] 转换为 Map[String,String]

> ID：12482036
> 
> 赞同：4
> 
> 时间：2012-09-18T17:27:55.067
> 
> 标签：scala

我有一个 Map[String,Seq[String]] 并且想基本上将其转换为 Map[String,String] 因为我知道该序列只有一个值。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-18T17:53:23.863

其他人已经提到过`mapValues`，但如果我是你，我会这样做：

```
scala> val m = Map(1 -> Seq(1), 2 -> Seq(2))
m: scala.collection.immutable.Map[Int,Seq[Int]] = Map(1 -> List(1), 2 -> List(2))

scala> m.map { case (k,Seq(v)) => (k,v) }
res0: scala.collection.immutable.Map[Int,Int] = Map(1 -> 1, 2 -> 2) 
```

两个原因：

1.  该`mapValues`方法生成结果 Map 的*视图*，这意味着*每次*访问元素时都会重新计算该函数。除非您计划只访问每个元素一次，或者您只计划访问其中的一小部分，否则您不希望重新计算发生。

2.  使用 case with`(k,Seq(v))`可确保在函数看到不包含一个元素的*Seq时抛出异常。*如果有零个元素，使用`_(0)`or`_.head`会抛出异常，但如果你有多个元素，则不会抱怨，这可能会导致稍后在没有错误的情况下丢失东西时出现神秘的错误。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-18T17:36:51.910

您可以使用`mapValues()`.

```
scala> Map("a" -> Seq("aaa"), "b" -> Seq("bbb"))
res0: scala.collection.immutable.Map[java.lang.String,Seq[java.lang.String]] = M
ap(a -> List(aaa), b -> List(bbb))

scala> res0.mapValues(_(0))
res1: scala.collection.immutable.Map[java.lang.String,java.lang.String] = Map(a
-> aaa, b -> bbb) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-18T17:36:11.127

我想我通过执行以下操作得到了它：

```
mymap.flatMap(x => Map(x._1 -> x._2.head)) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-18T23:07:07.207

还有一个建议：

```
m mapValues { _.mkString } 
```

这与 Seq 是否有多个元素无关——它只会将所有字符串连接在一起。如果您担心每个值的重新计算，您可以提前进行：

```
(m mapValues { _.mkString }).view.force 
```

# profiling - 解释 GPerfTools 样本计数

> ID：12482044
> 
> 赞同：0
> 
> 时间：2012-09-18T17:28:32.483
> 
> 标签：profiling, google-perftools, gperftools

我在阅读 GPerfTools 生成的文本输出时有些吃力。我认为部分问题在于我不完全了解采样方法的运作方式。

从[Wikipedia](http://en.wikipedia.org/wiki/Profiling_%28computer_programming%29#Statistical_profilers)我收集到基于示例函数的分析器通常通过向操作系统发送中断并查询程序的当前指令指针来工作。现在我对汇编的了解有点生疏，所以我想知道如果指令指针`m`在任何给定时间指向方法意味着什么？即这是否意味着该函数即将被调用，或者它是否意味着它当前正在执行，或两者兼而有之？

如果我没记错的话会有区别，因为在第一种情况下，样本计数（即在采样时看到 m 的次数）转换为 m 的绝对调用计数，而在后一种情况下，它只是转换为看到的次数，即仅表示在此方法中花费的相对时间。

有人可以澄清吗？

# ios - iOS - numberOfRowsInSection: 和 cellForRowAtIndexPath: 方法之间的 UITableView 工作不正确

> ID：12482054
> 
> 赞同：1
> 
> 时间：2012-09-18T17:29:15.980
> 
> 标签：ios, uitableview

我在 UIView 中创建了一个 UITableView，只使用代码（不使用 IB）

```
 m_tableData = [[UITableView alloc] init];
 m_tableData.dataSource = self; 
 m_tableData.delegate = self;   
 [self addSubview:m_tableData]; 
```

和

```
- (NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section
{
     NSLog(@"%d", [arrPanelListImg count]);
     return [arrPanelListImg count];
}
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:@"kCell"];

if (cell == nil) {
    cell = [[UITableViewCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:@"kCell"] ;

        NSLog(@"%d", indexPath.row);

    }

return cell; 
```

}

在日志屏幕中我看到

numberOfRowsInSection: 方法返回 18。而 cellForRowAtIndexPath: 方法，只需运行 9 次（适合屏幕）。

而且我在我的代码中没有发现任何奇怪的地方。所以在这种情况下，有人对我有任何建议。先谢谢了。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-18T18:55:22.553

您需要使用`UITableView`'`initWithFrame:style:`方法 - 这是`UITableView`该类的指定初始化程序。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-19T16:12:02.150

你的意思是

```
m_tableData = [[UITableView alloc] initWithFrame:CGRectZero style:UITableViewStylePlain]; 
```

当我改变它时，与我原来的结果没有什么不同。真的很奇怪，这是我第一次看到这个错误，仍然没有解决办法。

编辑： - 只需删除检查条件单元 == nil 并正常工作。

# .net - .NET 4.5 安装后的问题

> ID：12482055
> 
> 赞同：2
> 
> 时间：2012-09-18T17:29:23.670
> 
> 标签：.net, wcf, .net-4.5

我最近安装了新发布的 .NET 4.5 版本，安装后除了麻烦之外什么也没遇到。我现有的 .NET 4.0 应用程序似乎不再工作，出现各种错误/异常。当前是：

> 没有为 URI“在此处插入服务”找到兼容的 TransportManager。这可能是因为您使用了指向虚拟应用程序之外的绝对地址...

我试图通过我读过的关于删除 web.config 中服务的地址属性的建议来解决这个问题，但这并没有缓解任何问题。

是否有任何我可能不知道的重大问题可能导致我的应用程序不再运行？以前使用的任何 WCF 服务是否存在问题？或者我可能需要在现有应用程序中更新的参考资料？

*（如果问题含糊不清，我深表歉意，但我不太确定我应该从哪个方向着手寻找解决方案。）*

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-19T13:24:12.510

事实证明，问题与 web.config 中的 WCF 服务端点映射有关。主要是那些使用“ `mex`”端点地址的人。我相信我们的应用程序以前使用过这些，当升级到 4.5 时，我们现有的解决方法失败了，因为问题本身已经解决了。

# c# - 何时同时运行异步函数？

> ID：12482058
> 
> 赞同：1
> 
> 时间：2012-09-18T17:29:43.487
> 
> 标签：c#, concurrency, async-await

异步等待功能使编写非阻塞代码变得优雅。但是，虽然是非阻塞的，但在异步函数中执行的工作仍然很重要。

在编写异步代码时，我发现编写遵循“一直到兔子洞”模式的代码是很自然的，可以这么说，调用树中的所有方法都标记为异步并且使用的 API 是异步的；但即使在非阻塞的情况下，执行的代码也会占用相当多的上下文线程时间。

您如何以及何时决定在异步之上同时运行支持异步的方法？是否应该在调用树中创建更高或更低的新任务？这种“优化”有什么最佳实践吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-18T18:44:25.317

我已经`async`在生产中使用了几年。我推荐一些核心“最佳实践”：

1.  [不要阻塞`async`代码](http://nitoprograms.blogspot.com/2012/07/dont-block-on-async-code.html)。使用`async`“一直向下”。（推论：除非你*必须*使用`async Task`，否则更喜欢）。`async void`*`async void`*
**   `ConfigureAwait(false)`在您的“库”方法中尽可能使用。*

 *您已经弄清楚了“`async`一直向下”的部分，并且您正处于`ConfigureAwait(false)`变得有用的地步。

假设您有一个调用另一个`async`方法的方法。使用 的结果更新 UI ，但不依赖于 UI。所以我们有：`A``async``B``A``B``B`

```
async Task A()
{
  var result = await B();
  myUIElement.Text = result;
}

async Task<string> B()
{
  var rawString = await SomeOtherStuff();
  var result = DoProcessingOnRawString(rawString);
  return result;
} 
```

在此示例中，我将调用`B`“库”方法，因为它实际上并不需要在 UI 上下文中运行。现在，`B` *确实*在 UI 线程中运行，因此`DoProcessingOnRawString`会导致响应性问题。

因此，在`ConfigureAwait(false)`每个`await`in 中添加一个`B`：

```
async Task<string> B()
{
  var rawString = await SomeOtherStuff().ConfigureAwait(false);
  var result = DoProcessingOnRawString(rawString);
  return result;
} 
```

现在，当在ing`B`之后恢复时（假设它确实必须），它将在线程池线程而不是 UI 上下文上恢复。完成后，即使它在线程池上运行，也会在 UI 上下文中恢复。`await``SomeOtherStuff``await``B``A`

您无法添加`ConfigureAwait(false)`，`A`因为`A`取决于 UI 上下文。

您还可以选择将任务显式排队到线程池 ( `await Task.Run(..)`)，如果您有特定的 CPU 密集型功能，您*应该这样做。*但是，如果您的性能受到“数千次剪纸”的影响，您可以使用`ConfigureAwait(false)`将大量`async`“家务”卸载到线程池中。

您可能会发现我的[介绍性帖子很有帮助](http://nitoprograms.blogspot.com/2012/02/async-and-await.html)（它涉及更多“为什么”），并且[`async`常见问题解答](http://blogs.msdn.com/b/pfxteam/archive/2012/04/12/10293335.aspx)也有很多很好的参考资料。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-18T18:06:55.713

Async-await[实际上并不使用当前 .NET 进程空间中的线程](http://msdn.microsoft.com/en-us/library/hh191443.aspx#BKMK_Threads)。它是为“阻塞” IO 和网络操作而设计的，例如数据库调用、Web 请求、一些文件 IO。

我无法理解 C# 对你所说的兔子洞技术有什么好处。这样做只会使代码变得模糊，并且不必要地将潜在的高 CPU 代码与 IO 代码耦合。

为了直接回答你的问题，我只会在前面提到的 IO/网络场景中使用 async-await，**就在你正在执行阻塞操作的地方**，对于任何受 CPU 限制的事情，我会使用线程技术来充分利用可用的 CPU 内核数。无需将这两个问题混为一谈。*

# c# - 服务返回 DTO 对象；如何修改类类型，使其对最终用户来说似乎是非 DTO 对象？

> ID：12482059
> 
> 赞同：1
> 
> 时间：2012-09-18T17:29:41.897
> 
> 标签：c#, web-services

在这方面遇到了一些障碍，想知道我哪里出错了。

我们的服务器有两个类：Order 和 OrderDto。Order 类创建我们的领域对象，OrderDto 类创建我们的 DTO 对象。

DTO 类具有以下修改它的属性：

```
[Serializable]
[XmlRoot("Order"), SoapType("Order")]
public class OrderDto : IDto 
```

XmlRoot/SoapType 属性的目的是使 OrderDto 以类 Order 的形式出现给最终用户。它目前没有这样做。这是我的 Web 服务的方法，它通过服务引用从另一个项目中调用：

```
[WebMethod(Description = "Creates a new order with project information.")]
public OrderDto CreateOrderByProject(string name, string description)
{
    OrderDto orderDto = OrderDto.Create(name, description);
    return orderDto;
}

[Test]
public void CreateOrderWithValidProjectSubcode()
{
    OrderDto orderDto = WorkflowServices.CreateOrderByProject(OrderName, OrderDescription);
} 
```

如您所见，WorkflowServices.CreateOrderByProject 声明自己返回的是 OrderDto 类型的对象，而不是 Order 类型的对象。

如何修改此代码以使最终用户看到 Order 而不是 OrderDto？

编辑：似乎使用 XmlType(TypeName = "Order") 可能就足够了。打算继续玩。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-18T17:42:03.157

为您的域对象和 DTO 对象使用两个不同的命名空间。这样，您可以为对象使用相同的名称（例如：您的域和 DTO 对象都被命名为“Order”）。在您在域和 DTO 对象之间转换的层中，您使用名称空间来区分它们（例如：domain.Order 和 Dto.Order）。仅在 Web 服务 API 中公开 DTO 对象的命名空间。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-19T00:03:17.540

解决方案是使用 XmlType(TypeName = "Order") 而不是 XmlRoot("Order") 标记类

# java - 使用 jstl 仅检查字符串中的数字

> ID：12482062
> 
> 赞同：2
> 
> 时间：2012-09-18T17:30:03.630
> 
> 标签：java, jsp, jstl

我的问题是：如果给定一个字符串只包含数字，有什么方法可以使用 jstl 进行检查？

提前感谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-18T18:43:20.703

您可以尝试将字符串隐式转换为数字并使用`c:catch`. 例如：

```
<c:catch var="catchString">
  <c:set var="myString" value="${0 + 'asd1234'}" />
</c:catch>
<c:if test="${not empty catchString}">
  <p>Failed: ${catchString}</p>
</c:if>

<c:catch var="catchNumber">
  <c:set var="myNumber" value="${0 + '1234'}" />
</c:catch>
<c:if test="${not empty catchNumber}">
  <p>Failed: ${catchNumber}</p>
</c:if> 
```

会输出这个：

```
<p>Failed: java.lang.NumberFormatException: For input string: "asd1234"</p> 
```

如果要防止浮动，可以使用`fmt:formatNumber`检查小数来构建检查：

```
<c:set var="myFloat" value="12"/>
<fmt:formatNumber value="${myFloat}" pattern="0" var="myInteger"/>
<c:if test="${myInteger - myFloat eq 0}">
  <p>No decimals</p>
</c:if> 
```

当然，您可以将它与`c:catch`捕获数字格式异常结合起来。

```
<c:set var="myString" value="abc12.34"/>
<c:catch>
  <fmt:formatNumber value="${myString}" pattern="0" var="myInteger"/>
  <c:set var="passed" value="${myInteger - myString eq 0}"/>
</c:catch>

<c:if test="${passed}">
  <p>Passed</p>
</c:if>

<c:if test="${not passed}">
  <p>Failed</p>
</c:if> 
```

# php - 更新 mysqlDB 的函数在 foreach 循环中不起作用

> ID：12482064
> 
> 赞同：0
> 
> 时间：2012-09-18T17:30:37.863
> 
> 标签：php, mysql

我将两个表（作者和书籍）与表“书籍作者”链接。

“书籍作者”表包含 BookAuthorID、AuthorID 和 BookID，这意味着我可以拥有来自同一作者等的多本书，并且匹配它们是轻而易举的事。

不幸的是，我弄乱了作者表的 ID 字段，并创建了一个新的主要和自动增量字段。现在我需要用新的 id 填充“图书作者”表中的匹配列，将它们与旧的匹配。

我有以下功能来更新“书籍作者”表......

```
function update_id($BookAuthorID, $NewAuthorID) {
$result = mysql_query("UPDATE `book authors` SET NewAuthorID='$NewAuthorID' WHERE BookAuthorID='$BookAuthorID'") or trigger_error(mysql_error()); } 
```

我*知道*这个函数可以工作，因为我通过使用函数和两个示例变量（$BookAuthorID、$NewAuthorID）创建一个空白页来测试它，并且它正确更新了表格。

现在我有以下代码，它找到每个作者的每个实例，然后每本书上的 foreach 循环匹配 ids...

```
$result = mysql_query("SELECT * FROM authors");

while ($row = mysql_fetch_array($result, MYSQL_ASSOC)) {
    $AuthorID= $row["AuthorID"];

    $match = get_books($BookID);

    foreach ($match as $value) {    
        update_id($value["BookAuthorID"], $value["NewAuthorID"]);
    } 
} 
```

get_books 功能如下，适用于网站的其余部分......

```
function get_books($id) {
    $result = mysql_query("SELECT * FROM `book authors` WHERE AuthorID= $id") or trigger_error(mysql_error());
    $array = array();

    while($row_ids = mysql_fetch_assoc($result)){
        $array[] = $row_ids;
    }
return $array; 
} 
```

我无法弄清楚为什么该函数在 foreach 循环之外工作，但在内部什么也没做（并且没有产生错误）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-18T19:57:22.417

你不能做这样的事情：

```
UPDATE `book authors`, authors 
SET `book authors`.newauthorid = authors.newauthorid 
WHERE `book authors`.authorid = authors.authorid; 
```

而不是循环？

# serial-port - 通过 RS485 串行电缆与硬件通信

> ID：12482066
> 
> 赞同：1
> 
> 时间：2012-09-18T17:30:42.600
> 
> 标签：serial-port, communication, rs485

我有一个智能电表，通过 RS485 串行电缆连接到电脑。该硬件有一个软件，您可以读取其内部寄存器并在软件上查看它们。当我试图通过软件读取仪表的寄存器时，我运行了一个串行端口监控软件来嗅探正在发送和接收到仪表的字节。

这是嗅探结果：

```
Port opened

Request: 9/18/2012 7:04:04 PM.28064

 2F 3F 21 0D 0A                                     /?!..           

Answer: 9/18/2012 7:04:04 PM.70264 (+0.4219 seconds)

 2F 45 4C 53 35 5C 40 56 38 2E 32 30 20 20 20 20   /ELS5\@V8.20    
 20 20 20 20 20 0D 0A                                   ..         

Request: 9/18/2012 7:04:05 PM.53064 (+0.0156 seconds)

 06 30 35 30 0D 0A                                 .050..          

Answer: 9/18/2012 7:04:05 PM.06264 (+0.5313 seconds)

 02 43 2E 31 2E 30 28 33 35 30 36 34 32 36 37 29   .C.1.0(35064267)
 0D 0A 30 2E 30 2E 30 28 33 35 30 36 34 32 36 37   ..0.0.0(35064267
 30 30 30 30 30 30 30 30 20 20 20 20 20 20 20 20   00000000        
 29 0D 0A 30 2E 39 2E 31 28 31 39 30 32 33 37 29   )..0.9.1(190237)
 0D 0A 30 2E 39 2E 32 28 31 38 30 39 31 32 29 0D   ..0.9.2(180912).
 0A 31 2E 38 2E 30 28 30 30 30 30 30 32 36 2A 6B   .1.8.0(0000026*k
 57 68 29 0D 0A 31 2E 38 2E 30 2A 30 31 28 30 30   Wh)..1.8.0*01(00
 30 30 30 32 36 2A 6B 57 68 29 0D 0A 31 2E 38 2E   00026*kWh)..1.8.
 30 2A 30 32 28 30 30 30 30 30 32 36 2A 6B 57 68   0*02(0000026*kWh
 29 0D 0A 31 2E 38 2E 30 2A 30 33 28 30 30 30 30   )..1.8.0*03(0000
 30 32 36 2A 6B 57 68 29 0D 0A 31 2E 38 2E 30 2A   026*kWh)..1.8.0*
 30 34 28 30 30 30 30 30 30 30 2A 6B 57 68 29 0D   04(0000000*kWh).
 0A 32 2E 38 2E 30 28 30 30 30 30 30 30 30 2A 6B   .2.8.0(0000000*k
 57 68 29 0D 0A 32 2E 38 2E 30 2A 30 31 28 30 30   Wh)..2.8.0*01(00
 30 30 30 30 30 2A 6B 57 68 29 0D 0A 32 2E 38 2E   00000*kWh)..2.8.
 30 2A 30 32 28 30 30 30 30 30 30 30 2A 6B 57 68   0*02(0000000*kWh
 29 0D 0A 32 2E 38 2E 30 2A 30 33 28 30 30 30 30   )..2.8.0*03(0000
 30 30 30 2A 6B 57 68 29 0D 0A 32 2E 38 2E 30 2A   000*kWh)..2.8.0*
 30 34 28 30 30 30 30 30 30 30 2A 6B 57 68 29 0D   04(0000000*kWh).
 0A 35 2E 38 2E 30 28 30 30 30 30 30 32 36 2A 6B   .5.8.0(0000026*k
 76 61 72 68 29 0D 0A 35 2E 38 2E 30 2A 30 31 28   varh)..5.8.0*01(
 30 30 30 30 30 32 36 2A 6B 76 61 72 68 29 0D 0A   0000026*kvarh)..
 35 2E 38 2E 30 2A 30 32 28 30 30 30 30 30 32 36   5.8.0*02(0000026
 2A 6B 76 61 72 68 29 0D 0A 35 2E 38 2E 30 2A 30   *kvarh)..5.8.0*0
 33 28 30 30 30 30 30 32 36 2A 6B 76 61 72 68 29   3(0000026*kvarh)
 0D 0A 35 2E 38 2E 30 2A 30 34 28 30 30 30 30 30   ..5.8.0*04(00000
 30 30 2A 6B 76 61 72 68 29 0D 0A 36 2E 38 2E 30   00*kvarh)..6.8.0
 28 30 30 30 30 30 30 30 2A 6B 76 61 72 68 29 0D   (0000000*kvarh).
 0A 36 2E 38 2E 30 2A 30 31 28 30 30 30 30 30 30   .6.8.0*01(000000
 30 2A 6B 76 61 72 68 29 0D 0A 36 2E 38 2E 30 2A   0*kvarh)..6.8.0*
 30 32 28 30 30 30 30 30 30 30 2A 6B 76 61 72 68   02(0000000*kvarh
 29 0D 0A 36 2E 38 2E 30 2A 30 33 28 30 30 30 30   )..6.8.0*03(0000
 30 30 30 2A 6B 76 61 72 68 29 0D 0A 36 2E 38 2E   000*kvarh)..6.8.
 30 2A 30 34 28 30 30 30 30 30 30 30 2A 6B 76 61   0*04(0000000*kva
 72 68 29 0D 0A 37 2E 38 2E 30 28 30 30 30 30 30   rh)..7.8.0(00000
 30 30 2A 6B 76 61 72 68 29 0D 0A 37 2E 38 2E 30   00*kvarh)..7.8.0
 2A 30 31 28 30 30 30 30 30 30 30 2A 6B 76 61 72   *01(0000000*kvar
 68 29 0D 0A 37 2E 38 2E 30 2A 30 32 28 30 30 30   h)..7.8.0*02(000
 30 30 30 30 2A 6B 76 61 72 68 29 0D 0A 37 2E 38   0000*kvarh)..7.8
 2E 30 2A 30 33 28 30 30 30 30 30 30 30 2A 6B 76   .0*03(0000000*kv
 61 72 68 29 0D 0A 37 2E 38 2E 30 2A 30 34 28 30   arh)..7.8.0*04(0
 30 30 30 30 30 30 2A 6B 76 61 72 68 29 0D 0A 39   000000*kvarh)..9
 2E 36 2E 31 28 30 30 2E 30 30 2A 6B 56 41 29 28   .6.1(00.00*kVA)(
 30 30 30 30 30 30 30 30 30 30 29 0D 0A 39 2E 36   0000000000)..9.6
 2E 31 2A 30 31 28 30 30 2E 30 30 2A 6B 56 41 29   .1*01(00.00*kVA)
 28 30 30 30 30 30 30 30 30 30 30 29 0D 0A 39 2E   (0000000000)..9.
 36 2E 31 2A 30 32 28 30 30 2E 30 30 2A 6B 56 41   6.1*02(00.00*kVA
 29 28 30 30 30 30 30 30 30 30 30 30 29 0D 0A 39   )(0000000000)..9
 2E 36 2E 31 2A 30 33 28 30 30 2E 37 34 2A 6B 56   .6.1*03(00.74*kV
 41 29 28 30 34 30 35 31 32 30 30 30 30 29 0D 0A   A)(0405120000)..
 39 2E 36 2E 31 2A 30 34 28 30 30 2E 30 34 2A 6B   9.6.1*04(00.04*k
 56 41 29 28 33 30 30 34 31 32 32 33 30 30 29 0D   VA)(3004122300).
 0A 46 2E 46 28 30 30 30 30 30 30 30 30 29 0D 0A   .F.F(00000000)..
 46 2E 46 2E 31 28 30 30 30 31 30 30 30 30 29 0D   F.F.1(00010000).
 0A 46 2E 46 2E 32 28 30 30 30 30 30 30 30 30 29   .F.F.2(00000000)
 0D 0A 46 2E 46 2E 33 28 30 30 30 30 30 30 30 30   ..F.F.3(00000000
 29 0D 0A 43 2E 33 2E 30 28 30 30 30 30 30 30 30   )..C.3.0(0000000
 30 29 0D 0A 43 2E 35 36 28 30 30 33 37 32 35 29   0)..C.56(003725)
 0D 0A 21 0D 0A 03 6F                              ..!...o         

Port closed 
```

我的问题：是否可以将请求字节（在上面找到）发送到仪表，然后获取答案字节并将它们保存在电脑上？基本上，是否可以通过发送十六进制字节并接收答案来与仪表通信？还是在发送十六进制字节之前还需要执行一些其他步骤？

注意：我的目标是开发一个基本的和更简单的软件作为仪表随附的软件。

# php - 如何使用 FPDF 覆盖现有的 pdf 文件

> ID：12482068
> 
> 赞同：1
> 
> 时间：2012-09-18T17:30:45.453
> 
> 标签：php, pdf, fpdf, overwrite

我有一个问题，我想覆盖现有的 pdf 文件。这就是我想要做的，当我更新系统中的某些内容时，例如：我在数据库中插入新数据，必须在特定路径中自动下载（我认为它是 fpdf 中的 d 或 f）（C： //pdf_folders) 和现有的 pdf 文件 (oyeah.pdf) 必须更新或覆盖内容。

我怎样才能做到这一点？请帮我。:(

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-18T17:36:48.853

如果文件存在则需要删除

```
if (file_exists('oyeah.pdf')) {
    unlink('oyeah.pdf');
}
$pdf->Output('oyeah.pdf', 'FD'); 
```

# java - 将新图像添加到操作按钮

> ID：12482069
> 
> 赞同：0
> 
> 时间：2012-09-18T17:30:50.533
> 
> 标签：java, image, swt, packages

我想将当前位于项目工作区中的新图标（具体在“icons/launch.png”中）添加到 Eclipse 项目中的按钮。标准代码是这样的：

```
action1.setImageDescriptor(PlatformUI.getWorkbench().getSharedImages().
  getImageDescriptor(ISharedImages.IMG_OBJS_INFO_TSK)); 
```

这将添加`IMG_OBJS_INFO_TSK`到按钮。

有谁知道如何向其中添加新图像？

# php - 用户如何注册 Oauth？

> ID：12482070
> 
> 赞同：12
> 
> 时间：2012-09-18T17:30:49.963
> 
> 标签：php, oauth

我一直在研究这个 Oauth 概念，但我仍然对这个概念感到非常困惑。我的主要问题之一是如何注册 google 帐户或 twitter 帐户。

例如，假设要注册到我的网站，您必须提供用户名/密码/电子邮件/组名。如果您通过我的网站注册，则可以非常轻松地提供这些字段。但是，假设用户想通过谷歌注册。这些字段将如何填充？

据我了解，一旦您使用您的谷歌凭据注册，您将被重定向到我网站上的一个页面，您可以在其中填写必填字段。我不确定这是否正确。谁能帮我更多地理解这一点？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-09-18T17:51:24.253

基本上 OAuth 是这样工作的（取决于版本，这些点由多个步骤组成）：

*   您将用户重定向到他登录的提供商
*   用户被重定向回你，你收到一个**访问令牌**

然后，您可以使用此**访问令牌**向提供者请求用户数据。通常，提供商会提供一个电话，您可以使用该电话询问用户的电子邮件地址、全名和（特定于提供商的）**用户 ID**，但这不是 OAuth 的一部分。

您现在如何使用这些信息来处理该用户，就好像他登录到您的网站一样，这完全取决于您自己。每次看到新的**用户 id**时，您可能都想在自己身边创建一个新的用户对象。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2017-06-14T07:36:25.917

在理解如何使用 OAuth2 进行新用户注册之前，有几个基本概念需要弄清楚。这些是：

*   资源所有者（你，人类）
*   身份提供者（Google、Facebook、Twitter 等）
*   资源服务器（与身份提供者或其他服务相同）
*   资源（你想访问的东西）
*   客户端应用程序（您用来访问这些内容的应用程序）

对于新用户注册，您将遵循客户端应用程序请求授权以访问资源的相同顺序。这将触发登录页面，用户登录，授权代码（由 IdP）创建并发送回客户端应用程序。客户端应用程序将此代码交换为访问令牌（涉及一些加密签名，请阅读文档 - 基本上允许客户端应用程序证明自己的身份）。

然后，此访问令牌用于请求对资源的访问 - 在本例中为新的用户配置文件。这可以是姓名、电子邮件、图片等。使用它在您的客户端应用程序配置文件数据库中创建一个新行。创建一个新的用户帐户。

然后对于后续登录，客户端应用程序将使用此访问令牌通过 Google Auth 服务器验证其生命周期 - 然后创建本地会话/cookie 以登录用户。

希望这很清楚。

# c# - 发布网站访问被拒绝 ASP.net 4.0

> ID：12482071
> 
> 赞同：0
> 
> 时间：2012-09-18T17:30:52.457
> 
> 标签：c#, asp.net, publish

我在发布我的网站时遇到问题：

```
Transformed Web.config using Web.Debug.config into obj\Debug\TransformWebConfig\transformed\Web.config.
Copying all files to temporary location below for package/publish:
obj\Debug\Package\PackageTmp.
Deleting existing files...
Publishing folder /...
Unable to add 'Cottages.aspx' to the Web site.  Access is denied (550).<br>
Unable to add 'Default.aspx' to the Web site.  Access is denied (550).<br>
Unable to add 'Global.asax' to the Web site.  Access is denied (550).<br>
Unable to add 'LoggedOut.aspx' to the Web site.  Access is denied (550).<br>
Unable to add 'Login.aspx' to the Web site.  Access is denied (550).<br>
Unable to add 'MasterPage.Master' to the Web site.  Access is denied (550).<br>
Unable to add 'menu.css' to the Web site.  Access is denied (550).<br>
Unable to add 'Packages.aspx' to the Web site.  Access is denied (550).<br>
Unable to add 'Registration.aspx' to the Web site.  Access is denied (550).<br>
Unable to add 'Rooms.aspx' to the Web site.  Access is denied (550).<br>
Unable to add 'Rooms.css' to the Web site.  Access is denied (550).<br>
Unable to add 'style.css' to the Web site.  Access is denied (550).<br>
Unable to add 'Web.config' to the Web site.  Access is denied (550).<br>
Unable to add 'WebForm1.aspx' to the Web site.  Access is denied (550).<br>
Unable to add folder 'Admin' to the Web site.  Cannot create folder "Admin".<br>
Unable to add folder 'App_Data' to the Web site.  Cannot create folder "App_Data".<br>
Unable to add folder 'bin' to the Web site.  Cannot create folder "bin".<br>
Unable to add folder 'css' to the Web site.  Cannot create folder "css".<br>
Unable to add folder 'Customer' to the Web site.  Cannot create folder "Customer".<br>
Unable to add folder 'Employee' to the Web site.  Cannot create folder "Employee".<br>
Unable to add folder 'images' to the Web site.  Cannot create folder "images".<br>
Unable to add folder 'js' to the Web site.  Cannot create folder "js".<br>
========== Build: 8 succeeded or up-to-date, 0 failed, 0 skipped ==========
========== Publish: 0 succeeded, 1 failed, 0 skipped ========== 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-18T18:03:32.797

这是一个直截了当的权限问题。您的帐户（用户名/密码）无权在远程服务器上创建文件和文件夹。

请与您的网络主机商核对并要求他们进行调查。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-09-06T17:46:12.623

如果这个问题只是在您之前没有遇到问题时“弹出”，重新启动总是会为我修复它。

# requirejs - 是否可以运行使用 requirejs 模块的 js-test-driver 测试？

> ID：12482072
> 
> 赞同：1
> 
> 时间：2012-09-18T17:30:59.243
> 
> 标签：requirejs, js-test-driver

我一直在尝试同时使用[requirejs](http://requirejs.org)和[js-test-driver](http://code.google.com/p/js-test-driver/)，但我看不到它可以正常工作。

我在根目录有这样的最小配置：

```
server: http://localhost:9876

load:
 - src/main/resources/web/resources/vendor/requirejs/require.js

test:
 - src/test/js/*.js 
```

“src/main/js/greeter.js”文件定义了一个愚蠢的模块：

```
define(function(require) {

  myapp = {};

  myapp.Greeter = function() {
  };

  myapp.Greeter.prototype.greet = function(name) {
    return "Hello " + name + "!";
  };

  return myapp;
}); 
```

我试图让 require 在 "src/test/js/greeterTest.js" 中加载欢迎模块：

```
GreeterTest = TestCase("GreeterTest");

require.configure({ ???? });
require([ "src/main/js/greeter" ], function(myapp) {

  GreeterTest.prototype.testGreet = function() {
    var greeter = new myapp.Greeter();
     assertEquals("Hello World!", greeter.greet("World"));
    };

}); 
```

每当我运行它时，我都会收到一个错误，因为在创建 Greeter 时未定义 myapp。

那么有没有办法在这种情况下配置 require ？我试过 ：

*   将 baseUrl 属性设置为类似 file:///.... 以提供文件的位置
*   使用网关配置来代理 requirejs 可能执行的请求（尽管我没有运行服务器来提供 js 文件，所以我不得不再次使用 file:///）

还有什么我应该尝试的吗？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-19T12:41:47.167

事实证明这是可能的，但记录不充分：

*   js-test-driver 有一个[“服务”](http://code.google.com/p/js-test-driver/wiki/ConfigurationFile)设置，可以让测试服务器响应静态文件
*   提供后，文件可在 localhost:42442/test/xxxx 获得（“test”前缀从未被提及，除非在文档页面的评论下方）。

所以这有效：

```
 server: http://localhost:9876

load:
  - src/main/resources/web/resources/vendor/requirejs/require.js

test:
  - src/test/js/*.js

serve:
  - src/main/js/*.js 
```

并且 requirejs 必须像这样配置：

```
 require({
    baseUrl : "/test/src/main/js"
}, [ "greeter" ], function(myapp) {

    GreeterTest = TestCase("GreeterTest");

    GreeterTest.prototype.testGreet = function() {
        var greeter = new myapp.Greeter();
        assertEquals("Hello World!", greeter.greet("World"));
    };

}); 

```

注意 ：

*   测试前的 /
*   您必须重用“src/main/js”部分的事实；我想这与我的 jsTestDriver 配置与“src”文件夹位于同一级别的事实有关，如果以其他方式放置，它可能需要进行一些调整。

# mongodb - 如何从父类mongoengine获取子集合

> ID：12482079
> 
> 赞同：0
> 
> 时间：2012-09-18T17:31:24.643
> 
> 标签：mongodb, mongoengine

我有以下模型：

```
class User(Document):
    first_name = StringField(required=True)
    last_name = StringField(required=True)
    username = StringField(required=True)

class TwitterUser(User):
    meta = {"collection":"TwitterUsers"}
    access_token = StringField(required=True)
    twitter_id = StringField(required=True)

class FacebookUser(User):
    meta = {"collection":"FacebookUsers"}
    fb_id = StringField(required=True)
    access_token = StringField(required=True) 
```

在我的应用程序的某个时刻，我需要根据 access_token 检索用户。但是，如果我有一个 Twitter 用户并且我执行 User.objects(access_token=at).get() 我没有得到结果。如果我这样做 TwitterUser.objects(access_token=cookie).get() 它可以工作。

有没有办法通过查询父集合来获取子类？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-18T19:20:31.590

目前这是不可能的——因为`User`不知道它的孩子已经搬家并住在另一个收藏中。您确定孩子们需要不同的收藏吗？如果是这样，您必须进行多次查询并`User`在找到后停止。

或者，您可能想要更改架构并抽象出查询的公共部分，然后将社交平台特定部分放在不同的集合中，但通过 a 链接`GenericReferenceField`- 这意味着您总是有 2 个查询。

# r - 如何在 R 中的直方图标题中包含变量值 - 使用 by()

> ID：12482080
> 
> 赞同：0
> 
> 时间：2012-09-18T17:31:29.337
> 
> 标签：r, title, histogram

我想使用 by() 生成直方图，如何访问因子的值，以包含在直方图标题中，例如...

```
a <- runif(500, 0, 10)
b <- LETTERS[1:5]
c <- c("Condition1", "Condition2")

x <- data.frame("Variable1" = b, "Variable2"= c, "Value"=a)
head(x)
by(x$Value, x$Variable2, hist) 
```

或使用两个变量

```
by(x$Value, list(x$Variable2, x$Variable1), hist) 
```

有没有办法使用 中的选项将变量值（例如 Condition1）传递给直方图的标题`hist()`，例如`function(x) hist(x, main=...)`放入`by()`？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-18T18:03:19.827

传递拆分的数据框而不仅仅是值。然后你将有更多的工作：

```
by(x, x$Variable2, function(x) hist(x$Value, main=unique(x$Variable2) ) ) 
```

生产了两个标有标签的地块`Condition1`，`Condition2`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-18T18:16:54.237

这并不能真正回答您的问题，因为您指定使用`by()`，但我通常使用`split()`and`lapply()`来解决这些类型的问题。我的方法通常是这样的：

```
temp <- split(x$Value, list(x$Variable2, x$Variable1))
lapply(names(temp), function(x) hist(temp[[x]], main = x, xlab = "Value")) 
```

# java - Java - 暂停线程以进行输入

> ID：12482081
> 
> 赞同：0
> 
> 时间：2012-09-18T17:31:31.687
> 
> 标签：java, concurrency, wait

我在运行线程时遇到问题。看，我想要一个纯粹用于缓慢打印一段文本的类，即在每个字母之间等待 x 毫秒（把它想象成神奇宝贝中文本的显示方式！）。所以目前，我有一个 Main 类和一个静态的“Print”类。在 Print 类中有一个名为 slow 的静态方法。你传入一个字符串和每个字母之间的延迟。问题是，如果在我的主课上我说

```
Print.slow("Hello there, enter your name");
System.out.println("NAME:");
name = (scanner object).nextLine(); 
```

发生的情况是，在读取“你好，输入你的名字”时，你可以输入输入！我仍然需要 Print.slow() 方法来休眠，那么我怎样才能让 main 方法暂停，直到文章被阅读？

printSlow 方法（将 Print 类重构为 main 中的方法）

```
public static void printSlow(String passage, int delay)
{
    int normDelay = delay;
    char lastChar = 'a';
    for(int i=0; i<passage.length(); i++)
    {
        try {
            if(passage.charAt(i) == '.' && passage.charAt(i + 1) == '.') {
                System.out.print(".");
                try {
                    Thread.sleep(normDelay*10);
                } catch (InterruptedException e) {
                    e.printStackTrace();
                }
                continue;
            }
        } catch (Exception e) {
            System.out.print(".");
            try {
                Thread.sleep(normDelay*10);
            }catch(InterruptedException e1) {
                e1.printStackTrace();
            }
            continue;
        }
        if(passage.charAt(i) == ' ' && (lastChar == ',' || lastChar == '.' || lastChar == '!' || lastChar == '?'))
        {
            continue;
        }else
        {
            System.out.print(passage.charAt(i));
        }

        if(passage.substring(i, i + 1).equals(".")
        || passage.substring(i, i + 1).equals(",")
        || passage.substring(i, i + 1).equals("!")
        || passage.substring(i, i + 1).equals("?"))
        {
            System.out.println();
            delay = normDelay * 10;
        }
        try
        {
            Thread.sleep(delay);
            delay = normDelay;
        }
        catch(InterruptedException e)
        {
            System.out.println(e);
        }
        lastChar = passage.charAt(i);
    }
} 
```

它如此复杂的原因是因为我在每次句号、逗号等之后需要更长的延迟，而且连续三个句号最终不会跳过 3 行。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-18T17:34:15.670

如果想让它同步运行，就在主线程上运行；不要启动另一个线程。

如果必须启动另一个线程，`Thread#join()`请在调用`Print.slow()`. 该类`Print`将需要提供一个`getThread()`方法，以便主线程可以访问打印线程。

编辑

我认为我们有一个术语问题

> ...在读取“您好，请输入您的姓名”时，您可以输入输入！

我现在将其解释为：

1.  字符串*Hello there...*显示缓慢
2.  在此显示期间，用户可以键入与输出交错的字符。

如果这就是你的意思，那么你的整个方法是不正确的。您正在使用最终由 shell 管理并连接到您的进程的输入和输出流。操作系统/外壳正在缓冲输入，您无法控制。

如果您*真正*想要的是防止在输出发生时识别任何击键，这是一个更加困难的问题，并且需要特定于操作系统（即不可移植）。您需要直接从输入设备读取并自己处理每个击键，而使用输入/输出流几乎是不可能的。

您*可以*通过为 UI 编写一个 Swing 应用程序来获得这种级别的控制，这将允许您拦截每个事件并做任何您想做的事情。作为一个简单的命令行程序，您不太可能实现您想要的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-18T17:43:57.543

`slow(...)`如果不了解更多关于您的线程并查看方法，就很难知道发生了什么。

> 发生的情况是，在读取“你好，输入你的名字”时，你可以输入输入！

但是，这可能是从控制台读取输入的方式的问题。通常控制台输入是缓冲的，因此尽管您还没有`nextLine()`在主线程中使用该方法，但输入正在被有`InputStream`问题的记录 - 由系统缓冲。这可能就是您所看到的情况。

如果您看到`NAME:`提示，则说明发生了其他事情。

# canvas - Three.js - 动画对象大小

> ID：12482082
> 
> 赞同：1
> 
> 时间：2012-09-18T17:31:32.247
> 
> 标签：canvas, jquery-animate, three.js

我一直在关注本教程：[http](http://www.html5canvastutorials.com/webgl/html5-canvas-webgl-cylinder-with-three-js/) ://www.html5canvastutorials.com/webgl/html5-canvas-webgl-cylinder-with-three-js/ （或者只是复制粘贴它）。它工作得很好（我认为只有 FF），但对于我的“项目”，我需要为圆柱体的大小设置动画。如何才能做到这一点？

旋转动画如下：

```
three.cylinder.rotation.x += angleChange; 
```

我已经尝试了几种方法，例如, ,`size.height`等等`.height`，但我找不到正确的功能。`scale.height``scale[0]`

有谁知道如何做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-18T17:46:17.340

在`animate()`函数内部，试试这个：

```
three.cylinder.scale.set( 1, Math.abs( Math.sin( time * 0.0002 ) ), 1 ); 
```

这将缩放内部 y 维度，并保持 x 和 z 维度不变。由于圆柱体的方向，在这种情况下，y 维度是长度。

# java - 第一个线程上的 NullPointerException

> ID：12482087
> 
> 赞同：1
> 
> 时间：2012-09-18T17:31:55.110
> 
> 标签：java, multithreading, nullpointerexception

编辑：

进行您建议的所有更改后，问题仍然存在。调试器说引理变量为空，但我应用的修复并没有让事情变得更好。所以，由于截止日期的问题，我决定从另一个角度来解决这个问题。感谢大家的帮助。:)

我正在编写一个小程序，并且`NullPointerException`让我发疯。我有两个班级：`SystemDir`和`Search`。第一个只是初始目录和搜索引理的封装。类`Search`如下所示。简而言之，我希望一个线程搜索第一级目录，另一个线程扩展子目录。这就是我得到异常的地方。异常字符串是

```
Exception in thread "Thread-0" java.lang.NullPointerException
at Search.searchFiles(Search.java:59)
at Search.<init>(Search.java:53)
at SystemDir.<init>(SystemDir.java:61)
at Search$1.run(Search.java:45)
at java.lang.Thread.run(Thread.java:679) 
```

其中 3 个点是最终循环内的 t.start()、searchFiles 方法调用、上面的一些行以及 run 方法中的新 SystemDir 调用。你能帮我吗？

```
public class Search {
   private Thread t;

   public Search(String[] subFiles, final String[] subDir, final String lemma) {
       t = new Thread(new Runnable() {
           @Override
           public void run() {
               for(int i=0;i<subDir.length;i++) {
                   try {
                       System.out.println(subDir[i]);
                       new SystemDir(subDir[i], lemma);
                   }
                   catch (NoDirectoryException ex) {
                       Logger.getLogger(Search.class.getName()).log(Level.SEVERE, null, ex);
                   }
               }
           }
       });

       searchFiles(subFiles,lemma); 
    }

    private void searchFiles(String[] subFiles, String lemma) {
       for(int i=0;i<subFiles.length;i++) {
            t.start();
            if(subFiles[i].contains(lemma)) {
                System.out.println(subFiles[i]);                    
            }
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-18T17:55:45.860

通常，[永远不要从构造函数启动线程](https://stackoverflow.com/questions/5623285/java-why-not-to-start-a-thread-in-the-constructor-how-to-terminate)。它可能会产生各种问题，这可能是您遇到异常的原因。

像在构造函数中一样创建线程，`searchFiles`公开并从客户端代码调用该方法，而不是从构造函数。

除此之外，您是否检查过：

*   `subFiles`不为空
*   没有一个`subFiles[i]`是空的
*   `lemma`不为空

（如有必要，添加 println 语句）

正如@Gray 所指出的，你不能多次启动一个线程。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-18T18:02:41.800

您未能发布 的源代码`SystemDir`，但堆栈跟踪表明，除了最初创建线程的对象之外，它的构造函数还试图创建一个*新* `Search`对象。

更具体地说，可能`new Search(...)`SystemDir 的构造函数中某处的表达式正在传递`null`for `subFiles`。是否有一个电话到`File.list()`某个地方，您可能没有检查是否有空返回？请注意，`list()`如果它根本无法列出目录，则返回 null，因为从缺少权限到未找到目录。

* * *

此外，您似乎多次尝试启动同一个线程对象。这将导致`IllegalThreadStateException`if 中有多个元素`subFiles`。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-18T17:41:58.510

您尚未包含所有代码。

根据提供的信息：

在,`searchFiles`或中为空。`t``subFiles``subFiles[i]`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-18T17:55:50.773

您的代码本身没有多大意义。

这使得很难发现错误。

我建议使用 Eclipse 调试器，并检查**WHICH**值是`null`.

据我所知，您的问题*出在递归`SystemDir`*中，您没有提供的代码。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-18T17:59:23.850

在您的`searchFiles`方法中，在循环中启动线程有什么意义？您想在每次执行循环时运行线程吗？我认为你在这里遗漏了一些东西。

检查您传递给构造函数的某些值是否为空。

# html - HTML，即使我使用 CID，我如何左对齐图片？

> ID：12482089
> 
> 赞同：0
> 
> 时间：2012-09-18T17:32:01.663
> 
> 标签：html, css, text-alignment

我正在尝试为电子邮件创建一个界面。我想导入一张图片，但没有 cid 就无法做到。例如：

这工作得很好。但我似乎无法将文字放在图片的左侧。请看下面的代码以获得更好的理解！

```
<div style="background-color:black;">
<body style="font-color:white;">
    <h1><i>Airline Credits</i></h1>
    </br>
    </ul>
    Dear [FullName],<br/>
    Thank you for your <i>Airline Credits</i> redemption. Below is a summary of your order:

    <b>Order Date:</b>[OrderDate]<br/>
    <b>Description:</b>[ItemName]
    <br/><b>Redemption Amount:</b>[CostInPoints]
    <br/><b>Order Tracking Number:</b>[OrderNumber]

    <br/><br/>
    <b>Please note:</b>
    If you did not make this request, please contact us immediately at [AirlinePhoneNumber]. Our Customer Service Representatives are available to help you.

    <br/><br/>
    Please read the terms and conditions for Airline Credits Redemptions at <a href="[WebSiteAddress]">[WebSiteAddress]</a> about how you are provided your redeemed items. To view your Airline Credits balance, please <a href="[EMLink]">click here</a>
    <br/>
    <img src=cid:AirlineCredits.jpg/>
</body>
</div> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-18T18:31:57.787

HTML 电子邮件很痛苦——它没有任何内在的东西，但因为微软决定让 Outlook 2007、2010 和 2013 使用 Word 糟糕的 HTML 呈现实现（而 Outlook 2003 使用的是 IE）。

Outlook 对浮动框的支持很差，因此我建议在这种情况下不要使用它。

无论如何，通常我是一个网络标准狂热者——但在 HTML 电子邮件中这似乎并不重要，所以我只想说使用表格，如下所示：

```
<table border="0"> <!-- Tim Berners-Lee, forgive me, for I have sinned. -->
    <tr>
        <td>
            <p>Please read the terms and conditions for Airline Credits Redemptions at <a   href="[WebSiteAddress]">[WebSiteAddress]</a> about how you are provided your redeemed items. To view your Airline Credits balance, please <a href="[EMLink]">click here</a></p>
        </td>
        <td> <img src=cid:AirlineCredits.jpg /> </td>
    </tr>
</table> 
```

相对无痛，完成工作。

（并导致我死在里面）。

# c# - 在 C# 中的数据包中传输文件

> ID：12482090
> 
> 赞同：1
> 
> 时间：2012-09-18T17:32:02.900
> 
> 标签：c#, file, stream, packet, transfer

我正在尝试将示例视频文件（大约 20 MB）从一台 PC 分块传输到另一台 PC。我可以很好地传输图像，但不能传输视频。我将文件转换为字节并使用文件流将它们传输和转储到文件中。但该文件仅播放 1-3 帧。我尝试了不同的方法（我所拥有的知识或在互联网上可以找到的知识有限）。我在某处读到有关分组传输的信息，但不确定该做什么或从哪里开始。任何人都可以请我指向一些链接或指向正确的方向吗？

# functional-programming - Ocaml 操作乱序执行

> ID：12482096
> 
> 赞同：-1
> 
> 时间：2012-09-18T17:32:34.920
> 
> 标签：functional-programming, ocaml

在 Ocaml 中，我有一个用一些数字初始化的“全局”（即具有文件范围）数组，然后我对这些数字进行一些操作，然后调用一个函数将这些数字相加。现在因为这个数组是“全局的”，所以我没有费心将数组作为参数传递，最终发生的是 Ocaml 计算了初始化数字的总和（我猜是在编译时）而不是在我对数组进行操作之后已经发生过。我的问题是，为什么会发生这种情况？我花了大约 3 小时试图找出错误！这是否与 Ocaml 的无副作用部分有关？如果是这样，那么永远不会发生这样的事情的规则是什么？

谢谢

编辑：你们说得非常对，我从根本上搞砸了。这基本上是我的代码

```
let my_array = Array.make 10 0;;

let sum_array = ...;;

let my_fun = 
  do_stuff_with_array args;
  sum_array;; 
```

所以当然`sum_array`是事先计算好的。把它改成这个，它工作，这是最好的解决方案吗？

```
let my_array = Array.make 10 0;;

let sum_array _ = ...;;

let my_fun = 
  do_stuff_with_array args;
  sum_array ();; 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-18T20:25:34.703

OCaml 肯定不会“在编译时”计算数组元素的总和。关于 OCaml 评估顺序，您有一些不明白的地方。很难回答你的问题，因为真的没有问题，它只是告诉我们你对这个话题有点迷茫。

如果我们可以通过向您解释事情来帮助您，这很好。但是，如果您可以通过以下方式帮助我们找出您的不理解所在，这将有所帮助：

*   给出一个不符合您预期的小源代码示例
*   **并**解释您期望的行为以及原因

关于 OCaml 评估顺序的一般知识是，在模块或文件中，句子是从上到下评估的，当您编写`let x = a in b`表达式时`a`，总是在 之前评估`b`，并且函数`fun x -> a`（或等价形式，例如`let f x = a`）评估为本身，`a`根本没有评估——这发生在应用程序时。

有些人喜欢有一个包含代码所有副作用的“主要”句子。经常这样写：

```
let () =
   (* some code that does side-effect *) 
```

如果您在文件的其他部分编写评估并产生副作用的代码，那么它们将在这句话之前或之后被评估，具体取决于它们是在它之前还是之后。

# regex - 解析内存转储（寻找更优雅的解决方案）

> ID：12482102
> 
> 赞同：2
> 
> 时间：2012-09-18T17:32:52.363
> 
> 标签：regex, bash, sed

我正在尝试使用 bash 脚本和 sed 解析 s51 模拟器的输出。在第一步中，我想要一个包含十六进制形式的所有字节的单个字符串。模拟器的输出如下所示。实际输出可能更长，最高可达 64k。

```
0x0000 10 11 12 13 14 15 16 17 ........
0x0008 18 19 00 00 00 00 00 00 ........
0x0010 00 00 00 00 00 00 00 00 ........
0x0018 00 00 00 00 00 00 00 00 ........
0x0020 00 00 00 00 00 00 00 00 ........
0x0028 00 00 00 00 00 00 00 00 ........
0x0030 00 00 00 00 00 00 00 00 ........
timer #0("time") ON: 0.001085 sec (13020 clks)
timer #0("isr") ON,ISR: 0 sec (0 clks)
timer #0("idle") ON,ISR: 0 sec (0 clks) 
```

我要解析的代码如下：

```
sed -e ':loop' -e 's/\s\([0-9a-f]\{1\}\)\([0-9a-f]\{1\}\)/\2\1/g' -e 't loop' -n -e 's/.*\(0x[0-9a-f]\{4\}\)\([0-9a-f]\{16\}\).*/\2/p' | sed -e ':a;N;$!ba;s/\n//g' 
```

前 3 部分交换每个字节的两位数并删除空格。第 4 部分删除了其他行以及地址和 ascii 表示。最后一部分删除了连接线。

这会输出一个像这样的字符串：

```
01112131415161718190000000.... 
```

我想知道我可以做得更好。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-18T18:02:30.050

我认为以下内容应该是等效的：

```
sed -n -e '/^0x[0-9a-f]\{4\}/H' -e '${x;s/\n\S*//g;s/\s\.\.*//g;s/\s\([0-9a-f]\)\([0-9a-f]\)/\2\1/g;p}' 
```

或者，如果您的版本`sed`不支持使用以下命令分隔命令`;`：

```
sed -n -e '/^0x[0-9a-f]\{4\}/H' -e '${x
s/\n\S*//g
s/\s\.\.*//g
s/\s\([0-9a-f]\)\([0-9a-f]\)/\2\1/g
p
}' 
```

这通过将每个字节行添加到保持空间来工作，然后当我们到达文件的最后一行时，交换保持空间和模式空间以一次处理它们。然后步骤是从每行的开头删除换行符和地址，删除尾随点（也许这实际上不是必需的，取决于实际输出），最后交换每个字节的数字并打印。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-19T06:16:35.330

这可能对您有用（GNU sed）：

```
sed '/^0x\S\{4\}\(\( \S\S\)\{8\}\).*/{s//\1/;H};$!d;x;s/\n//g;s/ \(.\)\(.\)/\2\1/g' file 
```

或（在紧要关头）：

```
sed -r '/^0x....(( ..){8}).*/{s//\1/;H};$!d;x;s/\n//g;s/ (.)(.)/\2\1/g' file 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-18T20:43:34.497

根据您运行的 Linux 版本，有类似`od`或`hexdump`可以帮助解决此问题的工具。`hexdump`甚至可以使用一种迷你脚本语言进行高度可配置，以控制以何种方式格式化多少字节等等......

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-18T23:24:56.387

一种使用方式`GNU awk`：

```
awk '/^0x/ { for (i=2; i<=NF; i++) { gsub(/[^0-9]/,"", $i); line=line $i } } END { printf "%s\n", substr(line,2) }' file.txt 
```

# c# - XNA - 新手 - 简单的模型失真

> ID：12482109
> 
> 赞同：0
> 
> 时间：2012-09-18T17:33:13.077
> 
> 标签：c#, 3d, xna

`XNA`关于（一般可能是3D）的新手问题。

当我使用以下代码渲染一个简单的 Blender 制作的立方体时，一切看起来都很好：

```
proj = Matrix.CreatePerspectiveFieldOfView(MathHelper.ToRadians(90), 800f / 480f, 1f, 4000.0f);
view = Matrix.CreateLookAt(new Vector3(0, 0, -10), new Vector3(0, 0, 10), Vector3.Up);
world = Matrix.CreateTranslation(new Vector3(0, 0, 0)); 
```

但是，当我将世界的 X 值更改为 9（或任何其他使其偏离中心的值）时，立方体会水平拉伸并且看起来很糟糕：

此[链接](http://www.anacapasciences.com/xna.html)显示了问题：

我做错了什么来拉伸？提前感谢您对此的任何帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-18T18:22:53.687

您可以通过使用更窄的视野来减少透视失真。尝试使用 45 度角而不是 90 度角。由于此“放大”，您必须将 viewMatrix 放置得更远以进行补偿。

编辑：我刚刚尝试了 45 度视角下的“透视”失真程度。我不确定我在这里看到任何有问题的失真。

![在此处输入图像描述](../Images/aa7f585f9bdc5abd49103a2c9bdb4abd.png)

# amazon-ec2 - Amazon EC2 实例可以通过私有 IP 访问另一个实例吗？

> ID：12482111
> 
> 赞同：26
> 
> 时间：2012-09-18T17:33:22.677
> 
> 标签：amazon-ec2

我的测试场景中有两个单独的实例

1.  Web 服务器实例
2.  数据库服务器实例

到目前为止，我可以从实例获取的唯一方法`1st`是`2nd`配置弹性 IP 并使用公共 DNS（或 IP）参考。我可以通过将安全组配置为`2nd`仅从.`Port 1433``1st`

似乎同一个 Amazon AWS 区域内的实例应该能够比先出去再回来更有效地相互通信。

有没有办法只使用私有 DNS（或 IP）直接从实例转到实例`1st`？`2nd`

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-09-18T18:21:33.600

If you are using the Amazon Public DNS name, Amazon makes sure that all internal traffic gets routed internally only. So there is no problem in using the public DNS names. Have a look at [this question](https://serverfault.com/questions/227682/whats-best-practice-for-communication-between-amazon-ec2-instances) and [this article](http://alestic.com/2009/06/ec2-elastic-ip-internal) for more details.

# c# - 为什么我不需要 MessgeBox.Show () 中的 ToString() 方法

> ID：12482116
> 
> 赞同：-2
> 
> 时间：2012-09-18T17:33:39.170
> 
> 标签：c#

我刚刚注意到这也有效：

```
MessageBox.Show("number of things in the report are  " + myHashSetVariable.Count); 
```

我的印象是我应该使用 myHashSetVariable.Count.ToString()

它是 VS2010 中的某种编译器/解释器改进吗？我正在使用 VS2010 Pro

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-18T17:36:31.290

首先，这与`MessageBox.Show`. 这与`+`运营商有关。string + object 的结果等于一个字符串。

语言中的 + 运算符有许多重载（您也可以为用户定义的类型添加自己的重载）。只有两个以 a`object`作为参数，即`operator+(string, object)`和`operator+(object, string)`。在这两种情况下，操作符的实现主体都会调用`ToString`参数`object`，然后使用它`string.Concat`来产生结果。

由于您的变量是一个整数，并且它使用`operator+`with`string`作为第一个参数，因此它将`operator+(string, object)`不匹配其他候选人。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-18T17:36:21.880

ToString 被隐式调用以验证您可以省略消息中的字符串文字，现在您需要显式调用 ToString 以消除编译错误

```
MessageBox.Show(myHashSetVariable.Count); //This gives the error 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-18T17:36:55.517

你可以这样做：

```
int intval = 5;
string blah = "This is my string" + intval; 
```

`ToString()`在那里被隐式调用。不过，我发现显式调用它是有意义的，以使代码更清晰。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-18T19:22:20.793

Servy 做对了。以下是一些链接和示例，可能有助于您进一步理解字符串连接和隐式转换的主题。

C# 语言规范第[7.7.4 节加法运算符](http://msdn.microsoft.com/en-us/library/aa691375%28v=vs.71%29.aspx)指出：

> 当一个或两个操作数都是字符串类型时，二元 + 运算符执行字符串连接。[...] 通过调用从类型 object 继承的虚拟 ToString 方法，将任何非字符串参数转换为其字符串表示形式。

对于 int 预定义类型的简单案例，您会看到根据规范调用[int.ToString() 。](http://msdn.microsoft.com/en-us/library/6t7dwaa5.aspx)但是如果你有一个用户定义的类型，你也可能会遇到到字符串的[隐式转换（](http://msdn.microsoft.com/en-us/library/z5z9kes2%28v=vs.71%29.aspx) [6.4.3 用户定义的隐式转换](http://msdn.microsoft.com/en-us/library/aa691302%28v=vs.71%29.aspx)中的血腥细节）。

要进行实验，请定义一个模仿 MessageBox.Show(string) 的方法。重要的是不要直接调用[Console.WriteLine](http://msdn.microsoft.com/en-us/library/system.console.writeline.aspx)，因为它提供了大量的 Write 重载，包括 Write(Int32)：

```
static void Write(string s)
{
    Console.WriteLine(s);
} 
```

还有一些用户定义的类：

首先，一个没有覆盖或转换的空类。

```
class EmptyClass {
} 
```

还有一个覆盖 Object.ToString 的类。

```
class ToStringOnly {
    public override string ToString() {
        return "ToStringOnly";
    }
} 
```

另一个演示隐式转换为字符串的类：

```
class ImplicitConversion {
    static public implicit operator string(ImplicitConversion b) {
        return "Implicit";
    }
} 
```

最后，我想知道当一个类既定义隐式转换*又*覆盖 Object.ToString 时会发生什么：

```
class ImplicitConversionAndToString {
    static public implicit operator string(ImplicitConversionAndToString b) {
        return "Implicit";
    }
    public override string ToString() {
        return "ToString";
    }
} 
```

隐式转换的测试：

```
// Simple string, okay
Write("JustAString"); // JustAString

// Error: cannot convert from 'int' to 'string'
//Write(2); 

// EmptyClass cannot be converted to string implicitly,
// so we have to call ToString ourselves. In this case
// EmptyClass does not override ToString, so the base class
// Object.ToString is invoked
//Write(new EmptyClass()); // Error
Write(new EmptyClass().ToString()); // StackOverflowCSharp.Program+EmptyClass

// implicit conversion of a user-defined class to string
Write(new ImplicitConversion()); // Implicit

// while ToStringOnly overrides ToString, it cannot be
// implicitly converted to string, so we have to again
// call ToString ourselves. This time, however, ToStringOnly
// does override ToString, and we get the user-defined text
// instead of the type information provided by Object.ToString
//Write(new ToStringOnly()); // ERROR
Write(new ToStringOnly().ToString());  // "ToStringOnly" 
```

而且，更相关的是对字符串连接的测试：

```
// Simple string
Write("string"); // "string"

// binary operator with int on the right
Write("x " + 2); // "x 2"

// binary operator with int on the left
Write(3 + " x"); // "3 x"

// per the specification, calls Object.ToString
Write("4 " + new EmptyClass()); // "4 StackOverflowCSharp.Program+EmptyClass"

// the implicit conversion has higher precedence than Object.ToString
Write("5 " + new ImplicitConversion()); // "5 Implicit"

// when no implicit conversion is present, ToString is called, which
// in this case is overridden by ToStringOnly
Write("6 " + new ToStringOnly()); // "6 ToStringOnly" 
```

*并用一个既定义隐式转换又*覆盖 Object.ToString()的类来密封它：

```
// In both cases, the implicit conversion is chosen
Write( new ImplicitConversionAndToString() ); // "Implicit"
Write( "8: " + new ImplicitConversionAndToString()); // 8: Implicit 
```

# ruby-on-rails - 功能测试中的 Resque Workers 是否不提供辅助方法？

> ID：12482117
> 
> 赞同：0
> 
> 时间：2012-09-18T17:33:45.957
> 
> 标签：ruby-on-rails, functional-testing, resque, worker

出于某种原因，我的 Resque 工作人员正在执行功能测试指定的*视图*中没有我的辅助方法可用。

我想知道是否有其他人注意到这一点，以及可能的解决方法是什么？

在我的测试中：

```
assert_queued(EmailTemplatePdfWorker)
Resque.run! 
```

在我看来由 email_template_pdf_worker.rb 呈现：

```
- raise 'this seriously does not work' if !(defined? newline_to_br) 
```

*`newline_to_br`我的 application_helper.rb 中定义的方法在哪里。

有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-18T20:12:52.653

听起来您没有加载要在 Mailer 中使用的视图助手：

```
class EmailTemplatePdfWorker < ActionMailer::Base
  add_template_helper(ApplicationHelper)

  #...
end 
```

# facebook - Facebook点赞框和评论框不再显示

> ID：12482125
> 
> 赞同：1
> 
> 时间：2012-09-18T17:34:18.730
> 
> 标签：facebook, facebook-comments, facebook-likebox

我在[http://septicsecurity.com/facebook.html上有以下代码](http://septicsecurity.com/facebook.html)

**它曾经工作，但不再工作。**我不明白为什么。发生了什么，我该怎么做才能让它再次工作？

**更新 - 我刚刚发现它在我扔掉旧现金并重新打开浏览器后可以工作** 我可能也与我更新了 FB 管理权限页面并取消了任何国家限制有关。

**更新更新**- 我是个白痴。我看不到它，因为我在 FireFox 上安装了一个新应用程序 (DNT+)，它会阻止社交网络和广告网络在网络上跟踪你。随后它拿走了FB的赞和评论框。

```
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>

<head>
    <meta http-equiv="content-type" content="text/html; charset=iso-8859-1">
    <meta name="author" content="paulk">

    <title>Facebook</title>
</head>

<body>
<div id="fb-root"></div>
<script>(function(d, s, id) {
  var js, fjs = d.getElementsByTagName(s)[0];
  if (d.getElementById(id)) return;
  js = d.createElement(s); js.id = id;
  js.src = "//connect.facebook.net/en_US/all.js#xfbml=1&appId=161799263843988";
  fjs.parentNode.insertBefore(js, fjs);
}(document, 'script', 'facebook-jssdk'));</script>

<!-- FACEBOOK START -->
<div style="float:left;margin-right:18px;">
    <div class='fb-like-box' data-href='http://www.facebook.com/pages/Septic-Security/209608059122157' data-width='380' data-show-faces='true' data-stream='true' data-header='true'></div>
</div>
<div style="float:left;">
    <div class='fb-comments' data-href='http://septicsecurity.com' data-num-posts='5' data-width='380' style='border:1px solid silver; height:588px;'></div>
</div>
<!-- FACEBOOK END -->

</body>
</html> 
```

上面的浮动div只是为了将like box和comment box放在一起，我试图去掉所有额外代码的页面，也只是试图显示like box*或*comment box，但它仍然不起作用.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-18T17:41:45.123

当我查看您链接的页面时，我会并排看到点赞框和评论框。（我正在使用 Chrome。）您是否对代码进行了任何更改，或者它是否真的有一天停止工作？您看到了什么具体的故障，您使用的是什么浏览器？

这也可能是相关的：我认为我读到 FB 最近改变了他们的点赞框；他们还有更多更改将于 10 月 3 日生效：

[https://developers.facebook.com/roadmap/#october-2012](https://developers.facebook.com/roadmap/#october-2012)

具体来说，类似按钮的某些 Open-Graph 功能将不再起作用（Live Stream 插件和其他一些位也将不再起作用），因此您（和我，以及其他所有人）可能必须更新我们的 FB 按钮代码 Real现在很快。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-18T18:04:05.310

我看不到它，因为我在 FireFox 上安装了一个新应用程序 (DNT+)，它会阻止社交网络和广告网络在网络上跟踪你。随后它拿走了FB的赞和评论框。

# java - java中的内存缓存对象

> ID：12482126
> 
> 赞同：2
> 
> 时间：2012-09-18T17:34:31.143
> 
> 标签：java, caching, in-memory, weakhashmap

我想在内存中缓存对象。要求如下：

1.  每个记录/对象都与一个唯一键相关联。
2.  要存储 400-500 条记录/对象。如果记录数增加超过指定限制，则应逐出较旧的记录。
3.  记录的存储时间不应超过 2 分钟。
4.  当 JVM 内存不足时（一种弱引用）应该缩小。
5.  不能使用第三方库，因为它是一个小模块，目的只是减少不必要的网络访问。
6.  写入更多，读取更少

这里的安全性也是一个问题，因为我们要缓存一些敏感数据。这些数据将被缓存在内存中。我真的应该担心安全性并加密数据吗？

我正在寻找一个提供类似功能的 Java 类。

目前我正在考虑扩展`WeakHashMap`和实施各种私有/公共方法以符合要求。

如果您有任何其他想法，请在这里分享。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-18T17:55:35.670

你不想使用`WeakHashMap`. `SoftHashMap`会更接近，但在标准库中不可用。如果我是你，我会查看[Guava 的缓存类](http://code.google.com/p/guava-libraries/source/browse/#git/guava/src/com/google/common/cache)以获取提示。

但这里有一些额外的想法：

> 当 JVM 内存不足时（一种弱引用）应该缩小。

你的意思是`soft reference`。但无论如何，这个要求对我来说有点味道。我承认这可能是一个有效的要求，但你很少真正需要这个。如果您的记录的大小可以合理地预测，并且如果您计划对要缓存的记录数量进行硬性限制，那么您可能不需要这种复杂性。

> 不应使用第三方库。

每个人都提到了这一点，他们是对的。

在安全方面，加密缓存在内存中的数据的有效性是值得怀疑的。您还必须将加密密钥保存在内存中。我敢打赌，除了攻击者阅读你的记忆内容之外，还有很多事情需要担心。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-18T17:41:12.207

不，你不应该这样做。[WeakHashMap 不是缓存！](http://www.codeinstructions.com/2008/09/weakhashmap-is-not-cache-understanding.html)

> 现在很容易理解为什么 WeakHashMap 不能用于缓存。首先它无论如何都不起作用，因为它对键使用软引用而不是映射值。但除此之外，**垃圾收集器会积极回收仅由弱引用引用的内存**。这意味着一旦您丢失了对作为 WeakHashMap 中的键工作的对象的最后一个强引用，垃圾收集器将很快回收该映射条目。
> 
> ...
> 
> ## 那么我到底如何在 Java 中实现缓存呢？
> 
> 我的建议是使用免费提供的 Cache 实现之一，[如](http://ehcache.org/)[JCS](https://commons.apache.org/jcs/index.html)、[OSCache](http://java.net/projects/oscache)等。这些库通过 LRU 和 FIFO 策略提供更好的内存管理，例如磁盘溢出、数据过期和许多其他可选的高级功能。

正如@user463324 所提到的，您应该只使用已经实现此功能的库，例如[Google Guava](http://docs.guava-libraries.googlecode.com/git/javadoc/com/google/common/cache/CacheBuilder.html)，它在[Apache 2.0](https://www.apache.org/licenses/LICENSE-2.0)许可下，没有理智的企业会遇到问题。[此处未发明](https://en.wikipedia.org/wiki/Not_invented_here)并不是忽略解决方案的好理由。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-18T17:52:48.713

您有两个选择：JCS 或 Memcache/EHCache

这两个选项在功能上是等效的，但有一些关键的区别。当您使用 JCS 时，缓存的对象不会被序列化/反序列化。它们保留为 java 对象，因此存储和检索它们非常快。但是，这意味着您的缓存位于 JVM 内部，因此使用 JVM 的堆，并且其他 JVM 也无法访问。[JCS 提供某种类型的分布式功能作为插件]。

另一方面，Memcache/Ehcache 是在执行 put/get 操作时执行序列化/反序列化的外部缓存。在某些极端情况下，这可能会抵消缓存的好处。因此，速度基准测试是必不可少的。如果合适，它是分布式的，它使用自己的内存，可以在另一个盒子上。但这也意味着，您必须考虑 JVM 和外部缓存之间的数据安全性。

# c++ - 为什么某些隐式类型转换在一台机器上是安全的而不是在另一台机器上？如何防止这种跨平台问题？

> ID：12482127
> 
> 赞同：5
> 
> 时间：2012-09-18T17:34:38.820
> 
> 标签：c++, casting, implicit, explicit

我最近在我的代码中发现了一个错误，我花了几个小时来调试。

问题出在定义为的函数中：

```
unsigned int foo(unsigned int i){
   long int v[]={i-1,i,i+1} ;
       .
       .
       .
 return x ; // evaluated by the function but not essential how for this problem.
} 
```

v 的定义在我的开发机器（ubuntu 12.04 32 位，g++ 编译器）上没有引起任何问题，其中 unsigned int 被隐式转换为 long int，因此正确处理了负值。

在另一台机器上（ubuntu 12.04 64 位，g++ 编译器）但是这个操作并不安全。当 i=0 时，v[0] 没有设置为 -1，而是设置为一些奇怪的大值（因为它经常发生在试图使 unsigned int 为负数时）。

我可以解决将 i 的值转换为 long int 的问题

```
long int v[]={(long int) i - 1, (long int) i, (long int) i + 1}; 
```

一切正常（在两台机器上）。

我无法弄清楚为什么第一个在机器上工作正常而在另一个机器上不起作用。

你能帮我理解这一点，以便我将来避免这个或其他问题吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-18T17:42:32.270

对于`unsigned`值，加法/减法被明确定义为模算术，因此`0U-1`可以计算为`std::numeric_limits<unsigned>::max()`.

从无符号转换为有符号时，如果目标类型足够大以容纳无符号值的所有值，那么它只需将数据直接复制到目标类型中。如果目标类型不足以容纳所有无符号值，我相信它是实现定义的（将尝试找到标准参考）。

因此，什么时候`long`是 64 位（大概是 64 位机器上的情况），无符号适合并直接复制。

在`long`32 位机器上是 32 位时，它很可能只是将位模式解释为有符号值，在这种情况下为 -1。

编辑：避免这些问题的最简单方法是避免混合有符号和无符号类型。从一个概念不允许负数的值中减去一个是什么意思？我要争辩说，函数参数在你的例子中应该是一个有符号的值。

也就是说，g++（至少 4.5 版）提供了一个方便的方法`-Wsign-conversion`，可以在您的特定代码中检测到这个问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-04-08T16:31:35.433

您还可以使用专门的演员来捕捉所有溢出演员：

```
template<typename O, typename I>
O architecture_cast(I x) {
/* make sure I is an unsigned type. It  */
static_assert(std::is_unsigned<I>::value, "Input value to architecture_cast has to be unsigned");

assert(x <= static_cast<typename std::make_unsigned<O>::type>( std::numeric_limits<O>::max() ));

return static_cast<O>(x);
} 
```

使用它会在调试中捕获比结果类型可以容纳的更大数字的所有强制转换。这包括您的 unsigned int 为 0 并减去 -1 导致最大的 unsigned int 的情况。

# media-player - 在 JavaFX 中播放连续视频

> ID：12482129
> 
> 赞同：2
> 
> 时间：2012-09-18T17:34:45.237
> 
> 标签：media-player, javafx-2

我想播放硬盘中存在的两个（或更多）视频，如何更新 Media 对象以便 MediaPlayer 自动转到下一个视频。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-18T17:59:06.387

现在我无法测试它，但我认为它应该可以工作：

```
public MediaView createMediaView(Collection<String> urls){
    MediaView mediaView = new MediaView();
    initMediaPlayer(mediaView, urls.iterator());
    return mediaView;
}

private void initMediaPlayer(
          final MediaView mediaView, 
          final Iterator<String> urls
){
    if (urls.hasNext()){
        MediaPlayer mediaPlayer = new MediaPlayer(new Media(urls.next()));
        mediaPlayer.setAutoPlay(true);
        mediaPlayer.setOnEndOfMedia(new Runnable() {
            @Override public void run() {
                initMediaPlayer(mediaView, urls);
            }
        });
        mediaView.setMediaPlayer(mediaPlayer);
    } 
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-18T19:32:12.463

这是一个从硬盘[播放 AudioPlaylist 的示例程序。](https://gist.github.com/1446612)

该程序通过为每个要播放的文件创建一个包含新 MediaPlayer 和新媒体的列表来工作。程序中有一个 MediaView，对于每个 MediaPlayer，onEndOfMedia MediaView 的 MediaPlayer 设置为列表中的下一个。这与 jju 的递归答案几乎相同。

请注意，要更改正在播放的媒体，您无需更新 MediaPlayer 中的媒体（没有办法这样做，因为媒体和 MediaPlayer 之间存在 1:1 对应关系），而是更新 MediaView 中的 MediaPlayer。

视频的概念与音频几乎相同，因为 JavaFX 中的音频和视频都表示为由 MediaPlayer 播放并通过 MediaView 管理的媒体。

# liquibase - 我可以用吗 在 Liquibase 回滚部分？

> ID：12482132
> 
> 赞同：1
> 
> 时间：2012-09-18T17:34:56.560
> 
> 标签：liquibase

在我正在查看的当前文档中，我无法立即看到：

**以下是否可以在 Liquibase 中工作，并使用包含的 SQL 文件进行回滚？**

```
<changeSet author="username" id="85138">
    <sql splitStatements="false">
        UPDATE some_table ...;
    </sql>
    <rollback>
        <include file="path/to/rollback.sql"/>
    </rollback>
</changeSet> 
```

如果我错过了文档中的适当位置，请随时指出相关部分。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-10-07T19:24:32.847

你可以做的是使用 sqlFile：

```
<changeset ..>
  <sql>...</sql>
  <rollback>
    <sqlFile path="rollback.sql" />
  </rollback>
</changeset> 
```

正如另一篇文章所述，include 仅用于变更日志组合 - 包括其他变更日志。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-18T18:34:12.747

不，那是行不通的。include 标记旨在包含更多的变更日志 XML 文件，而不是包含任意信息。

它记录在这里：[http ://www.liquibase.org/manual/include](http://www.liquibase.org/manual/include)

它并没有具体说你“不能”，但我试过了 - liquibase 会为此大喊大叫。=)

# ios - CALayer：在图层内容上维护cornerRadius

> ID：12482133
> 
> 赞同：1
> 
> 时间：2012-09-18T17:35:08.373
> 
> 标签：ios, calayer, cornerradius

我一直在查看[CALayer 的文档](https://developer.apple.com/library/mac/#documentation/GraphicsImaging/Reference/CALayer_class/Introduction/Introduction.html)，它似乎`cornerRadius`只影响图层的背景，而不影响`contents`.

有没有办法将角半径应用于整个`CALayer`而不会对性能造成很大影响？

我看过有关口罩的建议，但这听起来很昂贵。我也看到了关于`contents`手动绘制的建议，但我真的不知道从哪里开始。我对在上下文中渲染图像有所了解，但我不知道我应该如何将它绘制到`CALayer`具有角半径的内容视图上。我知道的最好的方法是继承`CALayer`并覆盖该`drawInContext`方法并使用`CGContextDrawImage`.

非常感谢所有帮助，但要重申这个*问题*：“有没有办法将角半径应用于整个`CALayer`而不会对性能造成很大影响？”

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-18T18:01:49.257

`cornerRadius`确实适用于整个 CALayer，并且不会对性能造成很大影响。如果您没有看到带有圆角的内容，那是因为您忘记设置`masksToBounds`为 YES。

# javascript - JavaScript 字符串仅在开始时匹配而不是使用 indexOf？

> ID：12482136
> 
> 赞同：0
> 
> 时间：2012-09-18T17:35:33.040
> 
> 标签：javascript, jquery, regex, indexof

我目前正在匹配用户输入，如下所示：

```
user_input = "upload a file"

if ( "upload a file".indexOf(user_input.toLowerCase()) > -1 ) {} 
```

这工作正常，但问题是，它匹配我不想要的“文件”。我希望它仅在开头正确的情况下匹配。

这应该匹配：

```
"upload"
"u"
"upload a" 
```

这不应该匹配，因为字符串从一开始就不匹配：

```
"a"
"file" 
```

有没有关于如何做到这一点的建议`indexOf`？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-18T17:39:13.940

`indexOf`返回匹配的索引，所以如果你想在开始时测试它是否匹配，只需检查它是否返回 0

```
user_input = "upload a file"
if ( "upload a file".indexOf(user_input.toLowerCase()) == 0 ) {} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-18T17:42:47.590

```
<script>
user_input = "upload a file"
if ( "upload a file".**substr**(0, user_input.length) == user_input.toLowerCase()) {}
</script> 
```

使用输入对您有利...

[http://www.w3schools.com/jsref/jsref_substr.asp](http://www.w3schools.com/jsref/jsref_substr.asp)

获取字符串的前 X 个字符，并确保整个字符串匹配或您想要的任意数量的字符。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-18T17:38:25.297

你所描述的意味着你想与零进行比较：

```
if ( "upload a file".indexOf(user_input.toLowerCase()) == 0) { } 
```

# asp.net-mvc-3 - 如何使用用户名和密码的字符串参数设置操作路线？

> ID：12482137
> 
> 赞同：0
> 
> 时间：2012-09-18T17:35:32.330
> 
> 标签：asp.net-mvc-3

我使用以下代码在控制器中执行操作：

```
 [Authorize(Roles = "members")]  
    [HttpPost]
    public ActionResult login(string uname,string pass)
    {

        MembersSrv mm = new MembersSrv();
         if (mm.validateUsers(uname,pass)==true)
        {
            mm.CreateCookie(uname, pass);
            return RedirectToAction("Index");
         }
        else
             return RedirectToAction("Login");
    } 
```

我怎样才能得到这个网址？

> ```
> http://localhost:5555/Members/Login 
> ```

这条路线是真的吗？

```
 routes.MapRoute(
               "Login", // Route name
               "Members/{action}/{Uname}", // URL with parameters
               new { action = "Login", Uname =" " } // Parameter defaults
               ); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-18T17:55:30.383

你需要`GET`为此采取行动

```
public ActionResult Login()
{
  return View();
}

[Authorize(Roles = "members")]  
[HttpPost]
public ActionResult login(string uname,string pass) 
{
  //your code handle login when form posted
} 
```

这可以像访问

```
http://yourdomainname/members/login 
```

假设`login`动作属于`membersController`。

当用户发布表单时，您的`HttpPost`操作方法将处理该表单。

您可能不需要您定义的那些路线。您可以使用您拥有的默认路线。

```
routes.MapRoute(
    "Default", // Route name
    "{controller}/{action}/{id}", // URL with parameters
    new { controller = "Home", action = "Index", id = UrlParameter.Optional }
); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-20T21:27:02.227

会员区的路线是：

```
 public override void RegisterArea(AreaRegistrationContext context)
     {
         context.MapRoute(
             "Members_default",
             "Members/{controller}/{action}/{id}",
             new { action = "Login", id = UrlParameter.Optional }
         );
     } 
```

我可以将其更改为：

```
 public override void RegisterArea(AreaRegistrationContext context)
    {
        context.MapRoute(
            "Members_default",
            "Members/{action}/{id}",
            new { action = "Login", id = UrlParameter.Optional }
        );
    } 
```

# python - 如何将 Django 动态页面转换为静态 HTML 文件？

> ID：12482150
> 
> 赞同：2
> 
> 时间：2012-09-18T17:36:27.043
> 
> 标签：python, django, gunicorn

当前网站运行在 Django、Gunicorn 和 nginx 上。我想要一种将当前首页转换为静态 HTML 页面的方法，并希望 nginx 为这个静态页面提供服务，而不是遍历整个 Web 堆栈。我希望首页加载得更快。这可以手动完成，但是是否有与 Django 或 Gunicorn 集成的工具可以自动将某些页面转换为静态页面并提供这些页面？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-18T17:38:47.630

把它放在你的 /media/ 文件夹中

然后只是指向

some.url/media/html/some_static_html.html

# php - 使用 inode 指向文件——不安全？不好的做法？

> ID：12482155
> 
> 赞同：0
> 
> 时间：2012-09-18T17:36:42.897
> 
> 标签：php, security, filesystems

我的 PHP 应用程序有一个文件控制器。经过身份验证的用户下载的每个文件都应首先通过文件控制器。

作为参数，我使用文件 inode 以便它可以在磁盘内正确定位文件，并且可以通过 URL 安全地传递它（因为它只是数字——我不必担心 UTF-8 文件名和在这里）。

这些文件是从文件系统中读取的，而不是从数据库中读取的，因此数据尽可能是实时的。

泄露我的文件系统的 inode 是一种安全威胁吗？通过 inode 定位文件是一种不好的做法？

## 权限检查：

我使用 Codeigniter 作为框架。通过扩展核心控制器类和 _remap() 方法，我可以检查每个控制器调用的访问文件控制器的人是否已登录。

如果是（并且角色具有权限），则允许下载。如果不是，则重定向到登录。

## 在相同的 inode 上：

我没有进行完整的文件系统扫描。我在文件系统中列出了一个目录，由上传者划分，然后由操作 id 划分（所以基本上，每个文件夹将有 10 个文件，取决于参数）。结构基本上是：

`module/module_id/user_id/files`

我猜在同一个文件夹中不能有两个具有相同inode的文件，如果另一个文件系统中有另一个文件（或者在同一个文件系统中，我不清楚是否可能），那么它不在同一个文件夹中，因此，该参数链无法访问。

例如（假设我们想要获取一个带有 inode #5243376 的文件）：

模块/1/3/5243376

如果有另一个 inode 为 5243376 的文件，该文件必须位于文件夹 module/1/3/ 中，以便可以下载。

我看不到任何其他获取相同（或另一个文件）的方法，因为控制器会处理它。

处理程序的代码很简单：

```
// match inode
$dir    = FCPATH . 'files/' . $type . '/' . $id . '/'. $user . '/';
$files  = scandir($dir);

foreach($files as $file) {
    $stat = stat($dir . $file);
    if ($inode == $stat['ino']) {
        $filename = $file;
    }
}

// this need better feedback lol
if (!isset($filename)) {
    die('Not existing');
}

// fullpath to file to be downloaded
$file = FCPATH . 'files/' . $type . '/' . $id . '/'. $user . '/' . $filename; 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-18T18:00:51.317

它没有什么问题。即使您只处理 inode，基本文件系统安全性仍然适用。但是您应该意识到 inode 在操作系统中可能不是唯一的。它们仅在特定文件系统中是唯一的。如果您的主机系统在您的 Web 根目录中有多个挂载的 FS，如果移动跨越文件系统边界，则将文件移动到不同的目录实际上可能成为复制 + 删除操作。现在您的 inode 不再有效，因为在新位置创建了一个新的 inode。

# java - 使用 Apache HttpComponents 时的响应大小限制

> ID：12482160
> 
> 赞同：1
> 
> 时间：2012-09-18T17:36:55.267
> 
> 标签：java, apache-httpcomponents

我正在将一些代码从 Http Client 3.x 库转换为 Http Components 4.x 库。旧代码包含一个检查，以确保响应不超过特定大小。这在 Http Client 3.x 中相当容易做到，因为您可以使用 getResponseBodyAsStream() 方法从响应中取回流并确定何时超出大小。我在 Http Components 中找不到类似的方法。

这是旧代码作为我正在尝试做的示例：

```
private static final long RESPONSE_SIZE_LIMIT = 1024 * 1024 * 10;
private static final int READ_BUFFER_SIZE = 16384;

private static ByteArrayOutputStream readResponseBody(HttpMethodBase method)
        throws IOException {

    int len;
    byte buff[] = new byte[READ_BUFFER_SIZE];
    ByteArrayOutputStream out = null;
    InputStream in = null;
    long byteCount = 0;

    in = method.getResponseBodyAsStream();

    out = new ByteArrayOutputStream(READ_BUFFER_SIZE);

    while ((len = in.read(buff)) != -1 && byteCount <= RESPONSE_SIZE_LIMIT) {
        byteCount += len;
        out.write(buff, 0, len);
    }

    if (byteCount >= RESPONSE_SIZE_LIMIT) {
        throw new IOException(
                "Size limited exceeded reading from HTTP input stream");
    }

    return (out);

} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-19T20:30:54.617

您可以使用*HttpEntity.getContent()*来获取*InputStream*以向您自己读取。

# html - html 高度不会设置为 100%

> ID：12482162
> 
> 赞同：0
> 
> 时间：2012-09-18T17:36:59.277
> 
> 标签：html, css, height

我正在尝试实现 Sticky Footers，但是当我去设置 html、body、周围的 asp.net 表单的高度，然后在 Firebug 中检查时，它们显然没有扩展到 100%。谁能解释为什么这些不足？

我的页面：

[http://www.craftonhills.edu/Current_Students/Student_Life/Clubs/Badminton_Club.aspx](http://www.craftonhills.edu/Current_Students/Student_Life/Clubs/Badminton_Club.aspx)

谢谢你的时间。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-18T17:46:24.580

您还必须在`<div id="container" class="container_12"...>`或其他合适的封闭元素上设置高度 100%。

# multithreading - 在 linux 中使用 test_and_set_bit 函数的问题

> ID：12482164
> 
> 赞同：0
> 
> 时间：2012-09-18T17:37:15.923
> 
> 标签：multithreading, linux-kernel, multiprocessing, atomic

我正在尝试使用 test_and_set_bit 函数实现自旋锁。我找到了一个包含这个函数的 bitops.h 文件。但是，在我当前的内核版本 3.0 中，该函数不包含在该头文件中，即 bitops.h。任何人都提供一些我可以找到的参考资料？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-18T18:38:44.167

不确定我是否完全理解您的问题，但包括`<linux/bitops.h>`应该引入`test_and_set_bit()`. 函数的实际定义不在其中，`include/linux/bitops.h`但它是通过包含版本中的包含来获取的`<asm/bitops.h>`。`linux/`

因此，要查看`test_and_set_bit()`您可以查看`arch/arm/include/asm/bitops.h`或`arch/x86/include/asm/bitops.h`（或您感兴趣的任何其他架构）的实际定义。

顺便说一句，没有理由需要实现自己的自旋锁——内核（当然）具有标准`spinlock_t`，并且类似的功能`bit_spin_lock()`也使用单个位作为锁。

# c++ - 在没有窗口的情况下创建 OpenGL 上下文

> ID：12482166
> 
> 赞同：19
> 
> 时间：2012-09-18T17:37:32.760
> 
> 标签：c++, windows, opengl, off-screen

我试图弄清楚创建用于离屏渲染的无窗口 OpenGL 程序的最简单方法是什么。

目前我使用它，到目前为止它工作正常：（为清楚起见，此处删除了错误检查）

```
BOOL create_opengl_context(){
    GLuint PixelFormat;
    static PIXELFORMATDESCRIPTOR pfd;
    hDC = GetDC(NULL);
    PixelFormat = ChoosePixelFormat(hDC, &pfd);
    SetPixelFormat(hDC, PixelFormat, &pfd);
    hRC = wglCreateContext(hDC);
    wglMakeCurrent(hDC, hRC);
} 
```

这可以安全使用吗？创建无窗口 OpenGL 程序的“标准”方法是什么？

**编辑：**我正在使用 FBO 进行屏幕外渲染。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-09-18T17:45:26.963

纯无窗口 OpenGL 的旧方法是使用 PBuffer。在 Windows 上，这需要使用常规窗口创建中间 OpenGL 上下文，以获取所需的扩展函数指针。在 X11/GLX 上它可以毫不费力地工作。

实现离屏渲染的现代方法是使用常规但隐藏的窗口，该窗口具有通常的 OpenGL 上下文和 FBO 作为渲染目标。

最前沿但支持不太好的方法（某些嵌入式设备除外）是使用 EGL 来创建可绘制对象。

# java - Hibernate/Spring：非空属性引用空值或瞬态值

> ID：12482169
> 
> 赞同：0
> 
> 时间：2012-09-18T17:37:48.790
> 
> 标签：java, database, spring, hibernate, dao

我正在使用 Java 中的 Hibernate、Spring 和 GWT 开发应用程序。我在 Hibernate（使用 JBoss Developer Studio）下使用逆向工程从现有的 MySQL 数据库中获取 POJO 和配置文件。这是一个非常简单的数据库，只有两个实体：Country 和 Citizen。它们之间有 OneToMany 关系。

这是代码：

应用入口点：

```
...

                    Country country = new Country();
                    country.setName("NameOfCountry"+i);
                    country.setPopulation(10000);

                    Citizen ctz = new Citizen();
                    ctz.setName("John");
                    ctz.setSurname("Smith");

                    ctz.setCountry(country);
                    country.getCitizens().add(ctz);

                    service.saveCitizen(ctz, new AsyncCallback<Boolean>(){

                        @Override
                        public void onFailure(Throwable caught) {
                            System.out.println("Problem saving citizen");

                        }

                        @Override
                        public void onSuccess(Boolean result) {
                            System.out.println("Citizen successfully saved");

                        }

                    });

                    service.saveCountry(country, new AsyncCallback<Boolean>(){

                        @Override
                        public void onFailure(Throwable caught) {
                            System.out.println("Problem saving country");

                        }

                        @Override
                        public void onSuccess(Boolean result) {
                            System.out.println("Country successfully saved");

                        }
                    });

... 
```

-- 服务提供对服务器的简单 GWT-RPC 调用

服务器上的服务：

```
@Service("componentService")
public class ComponentServiceImpl implements ComponentService{

    @Autowired
    private CountryDAO daoCnt;

    @Autowired
    private CitizenDAO daoCtz;

    @Transactional(readOnly=false)
    @Override
    public boolean saveCitizen(Citizen citizen) {
        daoCtz.saveOrUpdate(citizen);
        return true;
    }

    @Transactional(readOnly=false)
    @Override
    public boolean saveCountry(Country country) {
        daoCnt.saveOrUpdate(country);
        return true;
    }
} 
```

现在 SpringDAO：

公民道：

```
@Repository
public class CitizenDAO {

...
    public void saveOrUpdate(Citizen citizen){
        sessionFactory.getCurrentSession().saveOrUpdate(citizen);
    }
... 
```

国家DAO：

```
@Repository
public class CountryDAO {

...
    public void saveOrUpdate(Country country){
        sessionFactory.getCurrentSession().saveOrUpdate(country);
    }
... 
```

最后

公民.hbm.xml：

```
<hibernate-mapping>
    <class name="sk.jakub.mod.shared.model.Citizen" table="citizen" catalog="modeldb">
        <id name="id" type="java.lang.Integer">
            <column name="id" />
            <generator class="identity" />
        </id>
        <many-to-one name="country" class="sk.jakub.mod.shared.model.Country" fetch="select">
            <column name="Country_id" not-null="true" />
        </many-to-one>
        <property name="name" type="string">
            <column name="name" length="45" not-null="true" />
        </property>
        <property name="surname" type="string">
            <column name="surname" length="45" not-null="true" />
        </property>
    </class>
</hibernate-mapping> 
```

国家.hbm.xml：

```
<hibernate-mapping>
    <class name="sk.jakub.mod.shared.model.Country" table="country" catalog="modeldb">
        <id name="id" type="java.lang.Integer">
            <column name="id" />
            <generator class="identity" />
        </id>
        <property name="name" type="string">
            <column name="name" length="45" not-null="true" />
        </property>
        <property name="population" type="int">
            <column name="population" not-null="true" />
        </property>
        <set name="citizens" table="citizen" inverse="true" lazy="true" fetch="select">
            <key>
                <column name="Country_id" not-null="true" />
            </key>
            <one-to-many class="sk.jakub.mod.shared.model.Citizen" />
        </set>
    </class>
</hibernate-mapping> 
```

我没有列出 Citizen.java 和 Country.java 因为它们只是基本的 POJO（如果有必要我会提供它们）。

当我启动我的应用程序并且我想将我的数据保存到数据库中时，我收到以下错误：

```
org.hibernate.PropertyValueException: not-null property references a null or transient value: sk.jakub.mod.shared.model.Citizen.country 
```

我无法弄清楚问题出在哪里。我也在尝试而不是 saveOrUpdate 方法，persist 方法。或者也改变保存到数据库的顺序。似乎没有任何效果。

非常感谢您的帮助 :) 如果需要，我可以从我的应用程序中发布更多代码。

编辑：Citizen.java 的代码：

```
public class Citizen implements java.io.Serializable {

    private static final long serialVersionUID = -3102863479088406293L;
    private Integer id;
    private Country country;
    private String name;
    private String surname;

    public Citizen() {
    }

    public Citizen(Country country, String name, String surname) {
        this.country = country;
        this.name = name;
        this.surname = surname;
    }

    public Integer getId() {
        return this.id;
    }

    public void setId(Integer id) {
        this.id = id;
    }

    public Stat getCountry() {
        return this.country;
    }

    public void setCountry(Country country) {
        this.country = country;
    }

    public String getName() {
        return this.name;
    }

    public void setName(String name) {
        this.name = name;
    }

    public String getSurname() {
        return this.surname;
    }

    public void setSurname(String surname) {
        this.surname = surname;
    }
} 
```

国家.java：

```
public class Country implements java.io.Serializable {

    private static final long serialVersionUID = -4085805854508658303L;
    private Integer id;
    private String name;
    private int population;
    private Set<Citizen> citizens = new HashSet<Citizen>();

    public Country() {
    }

    public Country(String name, int population) {
        this.name = name;
        this.population = population;
    }

    public Country(String name, int population, Set<Citizen> citizens) {
        this.name = name;
        this.population = population;
        this.citizens = citizens;
    }

    public Integer getId() {
        return this.id;
    }

    public void setId(Integer id) {
        this.id = id;
    }

    public String getName() {
        return this.name;
    }

    public void setName(String name) {
        this.name = name;
    }

    public int getPopulation() {
        return this.population;
    }

    public void setPopulation(int population) {
        this.population = population;
    }

    public Set<Citizen> getCitizens() {
        return this.citizens;
    }

    public void setCitizens(Set<Citizen> citizens) {
        this.citizens = citizens;
    }
} 
```

此外，我手动检查了数据库并保存了国家，但没有保存公民。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-18T19:40:20.493

我看到您在创建国家之前先创建公民。此外，两个服务调用都应该在同一个事务中，以便整个操作是原子的。我相信 COUNTRY_ID 似乎是一个自我生成的 ID。因此，一旦您创建了国家/地区，您就可以将其附加到公民，但您调用堆栈显示您正在创建一个具有 Country 对象但没有 ID 的公民。这只是我的猜测。您可以尝试将两个调用置于同一事务下，也可以尝试创建一个 Country 并将该国家/地区实例附加到 Citizen。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-07-13T22:52:29.690

请检查您是否正确实现了 equals、hashcode 和 compareTo（如果适用）方法。我最近遇到了这个问题，并通过正确实施这些问题来解决它。

# ruby-on-rails-3 - 从 Rails 中的 url 中删除“索引”

> ID：12482173
> 
> 赞同：3
> 
> 时间：2012-09-18T17:37:55.190
> 
> 标签：ruby-on-rails-3, routes

我目前正在以下列方式为我的页面定义路由：

```
 get "home/index"

  get "photo/index"

  get "project/index"

  get "home/about"

  root :to => 'home#index' 
```

但是，我似乎只能使用以下方法创建指向照片/项目索引页面的链接：

```
<a href="/photo/index">link</a>
<a href="/project/index">link</a> 
```

在 URL 中，“索引”部分也出现了。我不能简单地`/photo`在`a`链接中使用，因为 rails 会引发路由错误：

```
No route matches [GET] "/photo" 
```

我将如何为此创建路线匹配？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-18T17:42:23.267

```
match "/photo", to: "controller#action" 
```

[http://guides.rubyonrails.org/routing.html#connecting-urls-to-code](http://guides.rubyonrails.org/routing.html#connecting-urls-to-code)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-18T17:44:53.937

最好的答案是使用匹配。不要忘记包含`via`以保留对 http 方法的限制：

```
match "/photo", to: "controller#action", :via => 'get' 
```

# ruby-on-rails - 为什么要设计一个非空的默认电子邮件和加密密码？

> ID：12482174
> 
> 赞同：3
> 
> 时间：2012-09-18T17:38:03.033
> 
> 标签：ruby-on-rails, ruby-on-rails-3, devise

运行 Rails 3.2.8，设计 2.1.2。

我注意到迁移包含空白默认值：

```
class DeviseCreateUsers < ActiveRecord::Migration
  def change
    create_table(:users) do |t|
      ## Database authenticatable
      t.string :email,              :null => false, :default => ""
      t.string :encrypted_password, :null => false, :default => ""
      ...... 
```

但是该 schema.rb 包含其他内容：

```
 create_table "users", :force => true do |t|
    t.string   "email",                  :default => "''''", :null => false
    t.string   "encrypted_password",     :default => "''''", :null => false
    ..... 
```

这些默认值 ,`''''`出现在我的注册表单等中。为什么会发生这种情况？通过另一个迁移更改这些默认值是否有任何风险？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-18T17:46:25.510

我认为您可以毫无问题地更改默认值。

我的 schema.rb 文件之一有以下几行（我认为它工作正常）：

```
 create_table "users", :force => true do |t|
    t.string   "email",                               :default => "", :null => false
    t.string   "encrypted_password",   :limit => 128, :default => "", :null => false 
```

# c# - 动态和通用搜索数据源中的特定对象

> ID：12482175
> 
> 赞同：0
> 
> 时间：2012-09-18T17:38:08.743
> 
> 标签：c#, winforms, linq, generics, entity-framework-4

我有一个使用 Entity Framework 和 LINQ 的 Windows 窗体应用程序，并且有许多表单我使用 BindingNavigator 来导航数据，我想在导航器中添加一个文本框来搜索特定项目并导航到它，我做了一个从，但现在我必须对其他表单执行相同的步骤，并在每个表单中添加相同的事件和代码，所以我决定制作一个自定义 ToolStripTextBox 并在每个表单中使用它，但我必须使其通用因为每种形式都使用不同的对象或实体，这就是我想出的：

```
class ToolStripSearchBox<T> : ToolStripTextBox
{
    BindingSource dataSource;
    int currentIndex;

    public ToolStripSearchBox()
        : base()
    {
        KeyUp += new KeyEventHandler(ToolStripSearchBox_KeyUp);
    }

    void ToolStripSearchBox_KeyUp(object sender, KeyEventArgs e)
    {
        if (e.KeyCode == Keys.F4)
        {
            string patern = Text;
            List<T> TList = dataSource.List.Cast<T>().ToList();
            int res = 0;
            T foundT = default(T);

            if (int.TryParse(patern, out res))
            {
                foundT = TList.Where(j => j. == res).First();

            }
            else
            {
                foundT = TList.First(j => (j.FirstName + " " + j.LastName).Contains(patern));
            }
            if (foundT == null)
            {
                return;
            }

            dataSource.Position = dataSource.IndexOf(foundT);
        }
    }
} 
```

但问题是每个实体都有不同的属性要过滤，我正在考虑使用字符串参数来传递对象属性名称，但我没有找到将它与 LINQ 一起使用的方法。

对不起，如果有听写错误，但英语不是我的第一语言提前谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-18T18:34:48.667

对于我在您的代码中看到的内容，“每个实体都有不同的属性可供过滤”，您的意思是诸如`FirstName`,`LastName`等属性。

如果是这种情况，很简单，您可以定义一个通用函数对象用作匹配器。您可以在构造时或初始化期间指定它。（我不太喜欢带有无参数构造函数的组件。）

```
class ToolStripSearchBox<T> {
    public Func<T, string, bool> Matcher { get; set; }
} 
```

例如，在初始化这些用于搜索`Foo`'s 的框之一期间，您将执行以下操作：

```
ToolStripSearchBox<Foo> fooSearchBox = new ToolStripSearchBox<Foo>();
fooSearchBox.Matcher = (j, pattern) => (j.Second + " " + j.Second).Contains(pattern); 
```

也就是说，您的代码有很多问题： 请记住，`First()`如果未找到任何元素，扩展方法将引发异常；使用`FirstOrDefault()`. 我看到你也在使用`foundT == null`.. 我怀疑这甚至会编译。`foundT == default(T)`改为这样做。

```
class ToolStripSearchBox<T> {

    void ToolStripSearchBox_KeyUp(object sender, KeyEventArgs e)
    {
        ...
            foundT = TList.FirstOrDefault(this.Matcher(j, patern));
        ...
    }
} 
```

# c# - 内存泄漏和处置

> ID：12482176
> 
> 赞同：2
> 
> 时间：2012-09-18T17:38:22.253
> 
> 标签：c#, memory-leaks

我可能不明白这个概念，或者我做错了什么。我对 .NET 中的内存管理有一些疑问。

想象一下情况：

`Form1`是大人物 Form，作为 MDI-parent 和 a little `FormChild`，被绑定为孩子：

```
public partial class Form1 : Form
    {
        public Form1()
        {
            InitializeComponent();
        }

        private void simpleButton1_Click(object sender, EventArgs e)
        {
            FormChild formChild = new FormChild();

            formChild.MdiParent = this;
            formChild.Show();

        }
    } 
```

现在孩子正在分配一点内存作为模拟：

```
public partial class FormChild : Form
{
    private readonly List<byte[]> _list = new List<byte[]>();

    public FormChild()
    {
        InitializeComponent();

    }

    private void FormChild_Load(object sender, EventArgs e)
    {
        int i = 0;
        while (i < 100)
        {
            _list.Add(new byte[1024 * 1024 * 10]);
            i += 1;
        }

    }

} 
```

现在，我正在使用内存分析器检查内存堆中发生了什么。我明白了，如果我点击按钮，内存就被分配了。然后我关闭`FormChild`它，它会调用`Dispose()`. 但是内存仍然被分配。如果我再次单击`System.OutOfMemoryException`会发生。

为什么 GC 等待释放托管内存？或者这是我的设计错误？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-18T17:40:31.770

GC只是为了响应内存压力而释放内存，Dispose的主要目的是清理非内存相关的资源。

换句话说，将托管对象清零并不一定会使它们被更快地收集，但会使诊断内存问题更容易诊断。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-18T18:40:24.823

它看起来像某种时间问题，formChild 的第一个实例仍然可以访问（即不是垃圾），而第二个实例被创建。你不能容纳`_list`两次。

请注意，*我关闭了 FormChild，它调用 Dispose()*是关于资源和窗口句柄的语句，而不是关于释放内存的语句。

目前尚不清楚您是否编写了自己的 Dispose() 但在这种（相当特殊的）情况下，您应该这样做。

*   `void Dispose(bool disposing)`从文件中剪切方法`FormChild.Designer.cs`并将其移动到`FormChild.cs`.

*   用它来释放巨大的内存块：

    ```
    protected override void Dispose(bool disposing)
    {
        _list = null;  // add this

        if (disposing && (components != null))
        {
            components.Dispose();
        }
        base.Dispose(disposing);
    } 
    ```

请注意，这不是一种“通常”的内存管理形式，但它是必需的，因为您的 _list 也很不寻常。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-18T18:03:42.640

[您可以使用 GC.Collect ( http://msdn.microsoft.com/en-us/library/xe0c2357.aspx](http://msdn.microsoft.com/en-us/library/xe0c2357.aspx) )立即执行垃圾收集

但是，我通常让它自己处理并实现 Dispose 方法。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-09-18T17:44:20.570

覆盖`Dispose`，`FormChild`以便您可以清理资源。

```
protected override void Dispose(bool disposing)
{
    if (disposing)
    {
        if (_list != null)
        {
            // Clear it, dispose it, do whatever you want with it.
        }
    }

    base.Dispose(disposing);
} 
```

正如 Yaur 所说，GC 在调用时不会立即清理内存`Dispose`，但最好的做法是尽可能清理。

# django - 使用 solr 缺少结果 django-haystack

> ID：12482178
> 
> 赞同：0
> 
> 时间：2012-09-18T17:38:36.560
> 
> 标签：django, solr, django-haystack

我正在使用`django-haystack`后端`solr`。我在模型中保存了三首歌曲。当我搜索`q="Hello world"`. 它只显示一个结果。应该是三个。还复制`schema.xml`和更新了索引`rebuild_index`。我错过了什么吗？谢谢

*   你好世界
*   你好
*   世界

这是我的搜索索引。

```
class SongIndex(indexes.RealTimeSearchIndex, indexes.Indexable):
  text = indexes.CharField(document=True, use_template=True)
  title = indexes.EdgeNgramField(model_attr='title')

  def get_model(self):
    return Song 
```

搜索查询

```
sqs = SearchQuerySet().models(Song).filter(title=AutoQuery('Hello World')) 
```

更新：试过

```
sqs = SearchQuerySet().models(Song).filter(title='Hello World') 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-18T17:40:32.213

尝试：

```
sqs = SearchQuerySet().models(Song).filter(title='Hello World') 
```

# javascript - 动态html内容

> ID：12482180
> 
> 赞同：2
> 
> 时间：2012-09-18T17:39:05.983
> 
> 标签：javascript, jquery, html, css

我有两个 html 页面。还有一个 ccs 文件。我需要知道是否有任何方法可以将一个 html 中的 div 标签内的所有内容复制到任何其他 html。例如

Css 文件：

```
#block {
/* some code that doesn't matter */
} 
```

主要的html：

```
<div id="block">
Some text inside div called "block" that is need to be showed in any others html pages with the
same div "block"
</div> 
```

子html页面：

```
<div id="block">
Code that's need to be placed once to read all content from div "block"
</div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-18T17:49:03.310

查看有条件加载数据[http://24ways.org/2011/conditional-loading-for-responsive-designs](http://24ways.org/2011/conditional-loading-for-responsive-designs)、[http://adactio.com/journal/4497/](http://adactio.com/journal/4497/)和[http://adactio.com/journal/5042/](http://adactio.com/journal/5042/)

# c# - 创建自定义登录名和提供程序

> ID：12482183
> 
> 赞同：0
> 
> 时间：2012-09-18T17:39:23.150
> 
> 标签：c#, asp.net, user-profile

我正在开发一个需要在 ASP.Net4.0 的 CreateUserWizard 中存储默认用户信息以外的其他用户信息的站点。自从我开发（主要使用 windows 窗体）以来已经有几年了，这是我第一个使用 ASP 和 webforms 的实际站点。我需要存储以下字段：

```
FirstName
LastName
Company
PartsList
Address (which will include city, state, zip)
Phone
Email
Username
Password
Role (which role they belong to)
Password Question
Password Answer
Comments 
```

我已经做了一些研究，但还没有真正找到存储所有这些字段的好方法，以及如果它们是自定义提供程序，如何在登录期间验证它们。我想我正在寻找有关如何设置自定义提供程序的教程，我可以在其中存储所有这些信息，无论是在 SQL 表中还是在某种字典中。此外，用户应该能够编辑自己的信息，网站管理员应该能够删除/暂停用户帐户。有谁知道我将如何做到这一点的任何好例子？我想我需要创建一个类来存储每个用户的所有信息，但是然后呢？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-18T17:42:24.097

你可以阅读这篇文章

链接： http: [//www.codeproject.com/Articles/165159/Custom-Membership-Providers](http://www.codeproject.com/Articles/165159/Custom-Membership-Providers)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-18T17:57:45.263

我所做的是使用`FormsAuthentication`自定义`RoleProvider`. 我发现使用一些内置方法来处理身份验证是一个巨大的优势。然后，您可以使用任何方式存储您的数据以供以后访问。但是，在您的问题中，似乎最好使用数据库，因为网络是无状态的。

一旦用户通过身份验证，我就会在`Session`对象中方便地获取数据，然后根据需要更新数据库（编辑、删除等）。

看这里：[http ://techbrij.com/206/custom-role-provider-based-sitemap-navigation-in-asp-net](http://techbrij.com/206/custom-role-provider-based-sitemap-navigation-in-asp-net)

这里有更多信息
[http://msdn.microsoft.com/en-us/library/7t6b43z4(v=vs.100).aspx](http://msdn.microsoft.com/en-us/library/7t6b43z4(v=vs.100).aspx)
[http://msdn.microsoft.com/en-us/library/9wff0kyh(v =vs.100).aspx](http://msdn.microsoft.com/en-us/library/9wff0kyh(v=vs.100).aspx)
[http://msdn.microsoft.com/en-us/library/8fw7xh74(v=vs.100).aspx](http://msdn.microsoft.com/en-us/library/8fw7xh74(v=vs.100).aspx)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-18T20:47:45.573

根据您想要做的工作量，您可能可以使用默认的 Profile Provider 来构建东西，并使用 Profile 来存储附加信息。从存储的角度来看，使用 SQL Profile Provider 的开箱即用解决方案并不那么漂亮——它基本上将信息存储在一个字段中。但是，它可以让您在短时间内启动并运行，然后您可以在以后更换它。

# jquery - Simplecart 2.0 电子邮件不完整

> ID：12482184
> 
> 赞同：1
> 
> 时间：2012-09-18T17:39:25.193
> 
> 标签：jquery, jquery-plugins

我已经安装了 simplecart 2 jquery 购物车，并对其进行了修改以通过电子邮件将购物篮发送给我，包括添加一些额外的表格供用户首先填写。经过大量工作，我设法让购物车发送电子邮件，但只填写了用户字段，并且购物篮的内容似乎没有传递到 sendjs.php 页面。

在我的索引页面中，我在 head 部分中有以下脚本，以确保 simplecart 使用电子邮件作为结帐方法。

```
<script type="text/javascript">

simpleCart.email = "MY EMAIL ADDRESS";
simpleCart.checkoutTo = Email;
simpleCart.currency = GBP;

simpleCart.cartHeaders = ["Thumb_image_noHeader", "Name" , "Size_input_div_div", "Price" , "decrement_noHeader" , "Quantity", "increment_noHeader", "remove_noHeader", "Total" ];

</script> 
```

再往下，我有生成调用函数查询的结帐按钮的代码：

```
<form action="sendjs.php" name="form" method="post">
<input placeholder="Name" type="text" name="name"  value="name" id="name" />
<input placeholder="Contact Number" type="text" name="phone" value="phone" id="phone" />
<input placeholder="Email" type="text" name="email" value="email" id="email" /> 
<input placeholder="Message" type="text" name="message" value="message" id="message" />     
<a href="javascript:void(0);" onclick="javascript:enquire();" class="simpleCart_checkout">Checkout</a>
</form> 
```

在 Simplecart.js 中，我有以下函数，它应该将所需的信息传递给 sendjs.php：

```
 me.emailCheckout = function enquire() {    

itemsString = "";
for( var current in me.items ){ 
    var item = me.items[current];
    itemsString += item.name + " " + item.quantity + " " + item.price + "\n";
} 

name = document.form.name.value;
phone = document.form.phone.value;
email = document.form.email.value;

me.total += "" + " GBP"

var form = document.createElement("form");
form.style.display = "none";
form.method = "POST";
form.action = "sendjs.php";
form.acceptCharset = "ISO-8859-1";
form.appendChild(me.createHiddenElement("jcitems", itemsString));
form.appendChild(me.createHiddenElement("jctotal", me.total));  
form.appendChild(me.createHiddenElement("name", name));
form.appendChild(me.createHiddenElement("phone", phone));
form.appendChild(me.createHiddenElement("email", email));
document.body.appendChild(form);
form.submit();
document.form.submit();
document.body.removeChild(form);    
} 
```

最后，我有 sendjs.php，它是生成电子邮件的原因：

```
<?php
/*include 'simpleCart.js';*/

$to      = 'MY EMAIL ADDRESS';
$subject = 'Order Inquiry';
$jcitems = " <p><b>ORDER:</b></p> <p> " . $_POST['jcitems']."</p>" .     "<p><b>Total:</b>     $" . $_POST['jctotal']."</p>";
$time = date ("h:i A"); 
$date = date ("l, F jS, Y");
$headers = "MIME-Version: 1.0\r\n";
$headers .= "Content-Type: text/html; charset=ISO-8859-1\r\n";
$headers .= 'From: EMAIL' . "\r\n" .
'Reply-To: EMAIL' . "\r\n" .
'X-Mailer: PHP/' . phpversion();
$name = $_POST['name'];
$phone = $_POST['phone'];
$email = $_POST['email'];
$message = $_POST['message'];
$text = "<html><body><p>This form was submitted on Your Web Site on \n $date at\n $time</p><p><b>Message:</b>\n$message</p><p><b>Customers Email Address:</b>$email</p><p><b>Customers Name:</b> $name </p><p><b>Customers Phone Number:</b> $phone </p></html></body>";
$body = $text . $jcitems;
mail($to, $subject, $body, $headers);
/*Clearing the cart info after succesfull order is made*/
setcookie ("simpleCart", "", time() - 3600);

Header('Location: success.html');

echo "success!";

?> 
```

因此，当用户单击 Checkout 时，他们会被带到成功的.html，它会向我发送一封电子邮件，但购物车的内容丢失了。

知道为什么电子邮件不包含购物车的内容吗？

任何帮助都会很棒，这正在成为一种痛苦..

（我已经取出我的电子邮件来阻止垃圾邮件机器人..）

# sql-server-2008 - SQL Server 从表 B 上选择的部分匹配字符串中更新表 A

> ID：12482187
> 
> 赞同：1
> 
> 时间：2012-09-18T17:39:37.767
> 
> 标签：sql-server-2008

非常新的 SQL Server，我使用的是 SQL Server 2008。我有两个表，表 A 和表 B

我想用表 B 的匹配字符串的计数来更新表 A。这是我通过声明静态 varchar 得出的结果。每当在表 B 中插入/更新记录时，我希望它在表 A 中的所有记录的过程中执行此操作。

```
TABLE A: **PO**, Count, Closed         Table B: **LD**
            24A, 0,     0,                      24A-1
            25A, 0,     0,                      24A-2
            26A, 0,     0,                      25A-3
                                                26A-1
                                                26A-2 
```

我试过的代码：

```
 Declare @POTableA AS VARCHAR(15)
 SET @POTableA = '24A'
   Update TABLE A
   SET TableA.Count =(Select Count(*) AS 'Count_LD' FROM TABLE B 
   WHERE TableB.LD LIKE '%'+@POTableA+'-%') 
   FROM TABLE B WHERE TABLEA.PO LIKE '%'+@POTableA+'%' 
```

当前结果：

```
TABLE A: **PO**, Count, Closed         Table B: **LD**
            24A, 2,     0,                      24A-1
            25A, 0,     0,                      24A-2
            26A, 0,     0,                      25A-3
                                                26A-1
                                                26A-2 
```

期望的结果：

```
TABLE A: **PO**, Count, Closed         Table B: **LD**
            24A, 2,     0,                      24A-1
            25A, 1,     0,                      24A-2
            26A, 2,     0,                      25A-3
                                                26A-1
                                                26A-2 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-18T17:51:41.427

虽然我不确定为什么需要将计数保留在表 A 中 - 您始终可以在运行时确定此计数，但您不必使用触发器等来维护该信息（这是多余的）。但这里是一个使用表变量的演示，关于如何实现这样的聚合更新（可能还有其他方法）。

```
DECLARE @A TABLE(PO VARCHAR(32), [count] INT);

DECLARE @B TABLE(LD VARCHAR(32));

INSERT @A VALUES
('24A',0), ('25A',0), ('26A',0);

INSERT @B VALUES
('24A-1'), ('24A-2'), ('25A-3'),
('26A-1'), ('26A-2');

UPDATE T
SET T.[count] = S.[count]
FROM @A AS T
INNER JOIN
(
 SELECT A.PO, [count] = COUNT(B.LD)
   FROM @A AS A INNER JOIN @B AS B
   ON B.LD LIKE A.PO + '%'
   GROUP BY A.PO
) AS S
ON T.PO = S.PO;

SELECT PO, [count] FROM @A; 
```

结果：

```
PO     count
----   -----
24A    2
25A    1
26A    2 
```

现在，如果您需要在触发器中执行此操作，则类似于：

```
CREATE TRIGGER dbo.MaintainRedundantCount
ON dbo.TableB
FOR INSERT, UPDATE
AS
BEGIN
  SET NOCOUNT ON;

  UPDATE T
   SET T.[count] = S.[count]
   FROM dbo.TableA AS T
   INNER JOIN
   (
     SELECT A.PO, [count] = COUNT(B.LD)
       FROM dbo.TableA AS A 
       INNER JOIN dbo.TableB AS B
       ON B.LD LIKE A.PO + '%'
       GROUP BY A.PO
   ) AS S
   ON T.PO = S.PO;
END
GO 
```

您可能希望将这些行之一修改为：

```
 ON B.LD LIKE A.PO + '-%' 
```

但是由于您在问题中只提供了三个样本值，而且它们的格式都完全相同，因此很难说出您的真实数据集是什么样的。

# scala - Scala：编译器找不到 FromRepr、HasElem 或implicitConversions

> ID：12482188
> 
> 赞同：2
> 
> 时间：2012-09-18T17:39:38.637
> 
> 标签：scala, scala-collections

我正在尝试使用 Miles Sabins 对[如何将丰富我的库模式应用于 Scala 集合的回答来拉皮条 TraversableLike？](https://stackoverflow.com/questions/5410846/how-do-i-apply-the-pimp-my-library-pattern-to-scala-collections)但是编译器无法识别 FromRepr、HasElem 或implicitConversions

```
package packMain
import scala.collection.generic.{ CanBuildFrom, FromRepr, HasElem }
import language.implicitConversions

class ImplClasses {}

FromRepr is not a member of scala.collection.generic
HasElem is not a member of scala.collection.generic
not found object language 
```

我尝试将 Eclipse Indigo 与 Scala 插件 2.02 和 2.9.2 Final 以及 Eclipse 4.2 Juno 与 Scala 插件 2.1M2 和 2.10.0M7 一起使用编辑：

```
import language.implicitConversions._ //works in 2.10M7 as gilad hock's comment
import scala.collection.generic.FromRepr._ //object FromRep is not a member of ...
import scala.collection.generic.HasElem._ //object HasElem is not a member of ... 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-18T17:42:39.010

要使隐式起作用，您需要显式导入它们，而不仅仅是包含包。您可以使用通配符：`import language.implicitConversions`**`._`**

**编辑：**
至于`FromRepr`& ，我在[包](http://www.scala-lang.org/api/current/scala/collection/generic/package.html "package")`HasElem`中找不到那些。另外，在阅读了*Miles Sabin关于*[如何将 pimp-my-library 模式应用于 Scala 集合的](https://stackoverflow.com/questions/5410846/how-do-i-apply-the-pimp-my-library-pattern-to-scala-collections "How do I apply the pimp-my-library pattern to Scala collections?")回答之后？，我注意到他说：*从**[这个提交](https://github.com/scala/scala/commit/73f7001d963a80950751b4e13b95b05d2526edc8 "this commit")**开始，它更容易......*这告诉我它不是 scala 库的一个组成部分（还没有？），否则，他可能会链接到包定义，而不是github上的某个提交。所以你可以克隆，并从源头构建自己。

# javascript - 从列表中删除项目列表时，最后剩余的项目不会消失

> ID：12482192
> 
> 赞同：1
> 
> 时间：2012-09-18T17:40:12.550
> 
> 标签：javascript, asp.net, html, css

我有一个带有列表项的网格。我可以选择删除某些选定的项目。但是我有一个问题。

当我有多个项目时，它们在被删除后都会消失。但是当我还剩下 1 项并将其删除时，存储过程将运行并删除所有内容。但从视觉上看，列表项仍然存在。但是，如果我刷新我的页面，它就消失了。

我需要它在删除后像其他人一样消失。我在这里有两个功能。一是删除和刷新。另一个是刷新代码。

这是我的网格：

```
$('#viewExpensesGrid').flexigrid({
            url: url,
            dataType: 'json',
            method: 'get',
            colModel: [
            { display: '<input type="ch etc etc other parts of table like id, name etc 
```

这是我的删除：

```
function doTheDelete(doIDeleteExpenses) {
        var selectedExpensesList = getSelectedExpenseIDs();
        if (selectedExpensesList.length > 0) {
            $.ajax({
                type: "POST",
                //url: "/Tasks/ViewTasks.aspx/deleteTasksAndLinkedItems",
                url: '<%=ResolveUrl("~/Expenses/ViewExpenses.aspx/deleteSelectedExpense")%>',
                data: "{'DeleteExpenses' : '" + doIDeleteExpenses + "'," + "'ExpID': ['" + selectedExpensesList.join(',') + "']}",
                //dataaaaaa
                contentType: "application/json; charset=utf-8",
                dataType: "json",
                success: function (data) {
                    var ss = data.d;
                    if (ss.length > 0) {
                        for (var i = 0; i < ss.length; ++i) {
                            $.noty.consumeAlert({ layout: 'center', type: 'error', dismissQueue: true });
                            alert(ss[i]);
                        }
                    }
                    $("#viewExpensesGrid").flexReload(); //this reloads the grid but doesnt gets rid of the last item.
                }, 
```

这是刷新代码：

```
$.fn.flexReload = function (p) { // function to reload grid
    return this.each(function () {
        if (this.grid && this.p.url) this.grid.populate();
    }); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-29T17:26:51.980

您使用的是最新版本的 flexigrid 吗？

看起来可能在 8 月份进行了修复。

请参阅[$.ajax 缓存修复 flexReload()](https://github.com/paulopmx/Flexigrid/pull/31)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-12-23T22:15:15.523

我意识到这是一个旧线程，但是我遇到了同样的问题，即 flexigrid 缓存结果而不是通过 Ajax 重新获取数据。在实施中似乎还没有完全解决。

我的“hack”是在调用时稍微修改 URL，`.flexReload()`以便向查询字符串添加随机值：

```
 $("#grid").flexOptions({ url: 'server_url?hash=' + Math.random()}).flexReload(); 
```

这为我解决了这个问题。

# tapestry - (Tapestry v5.3.5) 提供一个非缓存的 SymbolSource

> ID：12482198
> 
> 赞同：0
> 
> 时间：2012-09-18T17:40:38.573
> 
> 标签：tapestry, symbols

我需要我的应用程序从数据库源读取它的配置，但我必须应用我自己的缓存机制来满足更新配置和性能的灵活性（在需要值时不访问数据库）

执行缓存机制的服务是`SymbolSourceImpl`. 因为我需要挂毯来缓存可缓存的值，例如 JVM 选项。我需要提供**另一个**符号源。但是`SymbolObjectProvider`(Contributed to `MasterObjectProvider`) 只包含一个实例，`SymbolSource`并且我不能覆盖`SymbolSource`默认绑定，所以我考虑将另一个符号对象提供程序贡献给 ，`MasterObjectProvider`就像 Tapestry 对 default 所做的那样`SymbolObjectProvider`。

但是当我尝试贡献自己的符号对象提供者时，出现了一个问题：

```
@Contribute(MasterObjectProvider.class)
public static void setupDBSYmbolObjectProviders(OrderedConfiguration<ObjectProvider> configuration) {
    configuration.addInstance("DBSymbol", **DBSymbolObjectProvider**.class, OrderConstraintBuilder.before("Symbol").build());
} 
```

我的**DBSymbolObjectProvider**构造函数如下所示：

```
public DBSymbolObjectProvider(IDBSymbolSource symbolSource, @Builtin TypeCoercer typeCoercer) {
    this.symbolSource = symbolSource;
    this.typeCoercer = typeCoercer;
} 
```

Tapestry 已解决`TypeCoercer`，但无法解决`IDBSymbolSource`并抛出以下异常，这是合乎逻辑的，因为`MasterObjectProvider`尚未构造为 resolve `IDBSymbolSource`。

```
java.lang.RuntimeException: Exception constructing service 'RegistryStartup': Unable to instantiate class com.skycomm.IpKaizenTAModule as a module: Exception constructing service 'MasterObjectProvider': Error invoking service contribution method com.skycomm.ipkaizen.services.CoreModule.setupDBSYmbolObjectProviders(OrderedConfiguration): Exception constructing service 'MasterObjectProvider': Construction of service 'MasterObjectProvider' has failed due to recursion: the service depends on itself in some way. Please check org.apache.tapestry5.ioc.internal.services.MasterObjectProviderImpl(List, OperationTracker) (at MasterObjectProviderImpl.java:33) via org.apache.tapestry5.ioc.services.TapestryIOCModule.bind(ServiceBinder) (at TapestryIOCModule.java:49) for references to another service that is itself dependent on service 'MasterObjectProvider'.
    at org.apache.tapestry5.ioc.internal.services.JustInTimeObjectCreator.obtainObjectFromCreator(JustInTimeObjectCreator.java:75)
    at org.apache.tapestry5.ioc.internal.services.JustInTimeObjectCreator.createObject(JustInTimeObjectCreator.java:54)
    at $Runnable_440ab1f4dbb6.delegate(Unknown Source)
    at $Runnable_440ab1f4dbb6.run(Unknown Source)
    at org.apache.tapestry5.ioc.internal.RegistryImpl.performRegistryStartup(RegistryImpl.java:325)
    at org.apache.tapestry5.ioc.internal.RegistryWrapper.performRegistryStartup(RegistryWrapper.java:80)
    at com.skycomm.IpKaizenTA.main(IpKaizenTA.java:25)
Caused by: java.lang.RuntimeException: Unable to instantiate class com.skycomm.IpKaizenTAModule as a module: Exception constructing service 'MasterObjectProvider': Error invoking service contribution method com.skycomm.ipkaizen.services.CoreModule.setupDBSYmbolObjectProviders(OrderedConfiguration): Exception constructing service 'MasterObjectProvider': Construction of service 'MasterObjectProvider' has failed due to recursion: the service depends on itself in some way. Please check org.apache.tapestry5.ioc.internal.services.MasterObjectProviderImpl(List, OperationTracker) (at MasterObjectProviderImpl.java:33) via org.apache.tapestry5.ioc.services.TapestryIOCModule.bind(ServiceBinder) (at TapestryIOCModule.java:49) for references to another service that is itself dependent on service 'MasterObjectProvider'.
    at org.apache.tapestry5.ioc.internal.ModuleImpl.instantiateModuleInstance(ModuleImpl.java:447)
    at org.apache.tapestry5.ioc.internal.ModuleImpl.access$1200(ModuleImpl.java:39)
    at org.apache.tapestry5.ioc.internal.ModuleImpl$6$1.invoke(ModuleImpl.java:355)
    at org.apache.tapestry5.ioc.internal.OperationTrackerImpl.invoke(OperationTrackerImpl.java:74)
    at org.apache.tapestry5.ioc.internal.PerThreadOperationTracker.invoke(PerThreadOperationTracker.java:87)
    at org.apache.tapestry5.ioc.internal.RegistryImpl.invoke(RegistryImpl.java:1124)
    at org.apache.tapestry5.ioc.internal.ModuleImpl$6.run(ModuleImpl.java:350)
    at org.apache.tapestry5.ioc.internal.util.ConcurrentBarrier$2.invoke(ConcurrentBarrier.java:200)
    at org.apache.tapestry5.ioc.internal.util.ConcurrentBarrier$2.invoke(ConcurrentBarrier.java:197)
    at org.apache.tapestry5.ioc.internal.util.ConcurrentBarrier.withWrite(ConcurrentBarrier.java:140)
    at org.apache.tapestry5.ioc.internal.util.ConcurrentBarrier.withWrite(ConcurrentBarrier.java:206)
    at org.apache.tapestry5.ioc.internal.ModuleImpl$7.invoke(ModuleImpl.java:366)
    at org.apache.tapestry5.ioc.internal.util.ConcurrentBarrier.withRead(ConcurrentBarrier.java:85)
    at org.apache.tapestry5.ioc.internal.ModuleImpl.getModuleBuilder(ModuleImpl.java:374)
    at org.apache.tapestry5.ioc.internal.ContributionDefImpl.invokeMethod(ContributionDefImpl.java:113)
    at org.apache.tapestry5.ioc.internal.ContributionDefImpl.contribute(ContributionDefImpl.java:80)
    at org.apache.tapestry5.ioc.internal.RegistryImpl$9.run(RegistryImpl.java:633)
    at org.apache.tapestry5.ioc.internal.OperationTrackerImpl$1.invoke(OperationTrackerImpl.java:51)
    at org.apache.tapestry5.ioc.internal.OperationTrackerImpl$1.invoke(OperationTrackerImpl.java:48)
    at org.apache.tapestry5.ioc.internal.OperationTrackerImpl.invoke(OperationTrackerImpl.java:74)
    at org.apache.tapestry5.ioc.internal.OperationTrackerImpl.run(OperationTrackerImpl.java:47)
    at org.apache.tapestry5.ioc.internal.PerThreadOperationTracker.run(PerThreadOperationTracker.java:76)
    at org.apache.tapestry5.ioc.internal.RegistryImpl.addToOrderedConfiguration(RegistryImpl.java:629)
    at org.apache.tapestry5.ioc.internal.RegistryImpl.getOrderedConfiguration(RegistryImpl.java:483)
    at org.apache.tapestry5.ioc.internal.ServiceResourcesImpl$2.invoke(ServiceResourcesImpl.java:110)
    at org.apache.tapestry5.ioc.internal.ServiceResourcesImpl$2.invoke(ServiceResourcesImpl.java:107)
    at org.apache.tapestry5.ioc.internal.OperationTrackerImpl.invoke(OperationTrackerImpl.java:74)
    at org.apache.tapestry5.ioc.internal.PerThreadOperationTracker.invoke(PerThreadOperationTracker.java:87)
    at org.apache.tapestry5.ioc.internal.RegistryImpl.invoke(RegistryImpl.java:1124)
    at org.apache.tapestry5.ioc.internal.ServiceResourcesImpl.getOrderedConfiguration(ServiceResourcesImpl.java:105)
    at org.apache.tapestry5.ioc.internal.AbstractServiceCreator.getOrderedConfiguration(AbstractServiceCreator.java:123)
    at org.apache.tapestry5.ioc.internal.AbstractServiceCreator.access$200(AbstractServiceCreator.java:35)
    at org.apache.tapestry5.ioc.internal.AbstractServiceCreator$1.findResource(AbstractServiceCreator.java:103)
    at org.apache.tapestry5.ioc.internal.util.DelegatingInjectionResources.findResource(DelegatingInjectionResources.java:38)
    at org.apache.tapestry5.ioc.internal.util.InternalUtils.calculateInjection(InternalUtils.java:231)
    at org.apache.tapestry5.ioc.internal.util.InternalUtils.access$000(InternalUtils.java:50)
    at org.apache.tapestry5.ioc.internal.util.InternalUtils$4.invoke(InternalUtils.java:289)
    at org.apache.tapestry5.ioc.internal.util.InternalUtils$4.invoke(InternalUtils.java:286)
    at org.apache.tapestry5.ioc.internal.OperationTrackerImpl.invoke(OperationTrackerImpl.java:74)
    at org.apache.tapestry5.ioc.internal.PerThreadOperationTracker.invoke(PerThreadOperationTracker.java:87)
    at org.apache.tapestry5.ioc.internal.RegistryImpl.invoke(RegistryImpl.java:1124)
    at org.apache.tapestry5.ioc.internal.util.InternalUtils.calculateParameters(InternalUtils.java:293)
    at org.apache.tapestry5.ioc.internal.util.InternalUtils$23.invoke(InternalUtils.java:1488)
    at org.apache.tapestry5.ioc.internal.util.InternalUtils$23.invoke(InternalUtils.java:1483)
    at org.apache.tapestry5.ioc.internal.OperationTrackerImpl.invoke(OperationTrackerImpl.java:74)
    at org.apache.tapestry5.ioc.internal.PerThreadOperationTracker.invoke(PerThreadOperationTracker.java:87)
    at org.apache.tapestry5.ioc.internal.RegistryImpl.invoke(RegistryImpl.java:1124)
    at org.apache.tapestry5.ioc.internal.util.InternalUtils.createConstructorConstructionPlan(InternalUtils.java:1480)
    at org.apache.tapestry5.ioc.internal.ConstructorServiceCreator.getPlan(ConstructorServiceCreator.java:52)
    at org.apache.tapestry5.ioc.internal.ConstructorServiceCreator.createObject(ConstructorServiceCreator.java:61)
    at org.apache.tapestry5.ioc.internal.OperationTrackingObjectCreator$1.invoke(OperationTrackingObjectCreator.java:45)
    at org.apache.tapestry5.ioc.internal.OperationTrackerImpl.invoke(OperationTrackerImpl.java:74)
    at org.apache.tapestry5.ioc.internal.PerThreadOperationTracker.invoke(PerThreadOperationTracker.java:87)
    at org.apache.tapestry5.ioc.internal.RegistryImpl.invoke(RegistryImpl.java:1124)
    at org.apache.tapestry5.ioc.internal.OperationTrackingObjectCreator.createObject(OperationTrackingObjectCreator.java:49)
    at org.apache.tapestry5.ioc.internal.SingletonServiceLifecycle.createService(SingletonServiceLifecycle.java:29)
    at org.apache.tapestry5.ioc.internal.LifecycleWrappedServiceCreator.createObject(LifecycleWrappedServiceCreator.java:46)
    at org.apache.tapestry5.ioc.internal.AdvisorStackBuilder.createObject(AdvisorStackBuilder.java:63)
    at org.apache.tapestry5.ioc.internal.InterceptorStackBuilder.createObject(InterceptorStackBuilder.java:54)
    at org.apache.tapestry5.ioc.internal.RecursiveServiceCreationCheckWrapper.createObject(RecursiveServiceCreationCheckWrapper.java:60)
    at org.apache.tapestry5.ioc.internal.OperationTrackingObjectCreator$1.invoke(OperationTrackingObjectCreator.java:45)
    at org.apache.tapestry5.ioc.internal.OperationTrackerImpl.invoke(OperationTrackerImpl.java:74)
    at org.apache.tapestry5.ioc.internal.PerThreadOperationTracker.invoke(PerThreadOperationTracker.java:87)
    at org.apache.tapestry5.ioc.internal.RegistryImpl.invoke(RegistryImpl.java:1124)
    at org.apache.tapestry5.ioc.internal.OperationTrackingObjectCreator.createObject(OperationTrackingObjectCreator.java:49)
    at org.apache.tapestry5.ioc.internal.services.JustInTimeObjectCreator.obtainObjectFromCreator(JustInTimeObjectCreator.java:66)
    ... 6 more
Caused by: java.lang.RuntimeException: Exception constructing service 'MasterObjectProvider': Error invoking service contribution method com.skycomm.ipkaizen.services.CoreModule.setupDBSYmbolObjectProviders(OrderedConfiguration): Exception constructing service 'MasterObjectProvider': Construction of service 'MasterObjectProvider' has failed due to recursion: the service depends on itself in some way. Please check org.apache.tapestry5.ioc.internal.services.MasterObjectProviderImpl(List, OperationTracker) (at MasterObjectProviderImpl.java:33) via org.apache.tapestry5.ioc.services.TapestryIOCModule.bind(ServiceBinder) (at TapestryIOCModule.java:49) for references to another service that is itself dependent on service 'MasterObjectProvider'.
    at org.apache.tapestry5.ioc.internal.services.JustInTimeObjectCreator.obtainObjectFromCreator(JustInTimeObjectCreator.java:75)
    at org.apache.tapestry5.ioc.internal.services.JustInTimeObjectCreator.createObject(JustInTimeObjectCreator.java:54)
    at $MasterObjectProvider_440ab1f4dbb7.delegate(Unknown Source)
    at $MasterObjectProvider_440ab1f4dbb7.provide(Unknown Source)
    at org.apache.tapestry5.ioc.internal.RegistryImpl.getObject(RegistryImpl.java:871)
    at org.apache.tapestry5.ioc.internal.ObjectLocatorImpl.getObject(ObjectLocatorImpl.java:57)
    at org.apache.tapestry5.ioc.internal.util.InternalUtils$6.run(InternalUtils.java:371)
    at org.apache.tapestry5.ioc.internal.OperationTrackerImpl$1.invoke(OperationTrackerImpl.java:51)
    at org.apache.tapestry5.ioc.internal.OperationTrackerImpl$1.invoke(OperationTrackerImpl.java:48)
    at org.apache.tapestry5.ioc.internal.OperationTrackerImpl.invoke(OperationTrackerImpl.java:74)
    at org.apache.tapestry5.ioc.internal.OperationTrackerImpl.run(OperationTrackerImpl.java:47)
    at org.apache.tapestry5.ioc.internal.PerThreadOperationTracker.run(PerThreadOperationTracker.java:76)
    at org.apache.tapestry5.ioc.internal.RegistryImpl.run(RegistryImpl.java:1119)
    at org.apache.tapestry5.ioc.internal.util.InternalUtils.injectIntoFields(InternalUtils.java:338)
    at org.apache.tapestry5.ioc.internal.ModuleImpl.instantiateModuleInstance(ModuleImpl.java:433)
    ... 71 more
Caused by: java.lang.RuntimeException: Error invoking service contribution method com.skycomm.ipkaizen.services.CoreModule.setupDBSYmbolObjectProviders(OrderedConfiguration): Exception constructing service 'MasterObjectProvider': Construction of service 'MasterObjectProvider' has failed due to recursion: the service depends on itself in some way. Please check org.apache.tapestry5.ioc.internal.services.MasterObjectProviderImpl(List, OperationTracker) (at MasterObjectProviderImpl.java:33) via org.apache.tapestry5.ioc.services.TapestryIOCModule.bind(ServiceBinder) (at TapestryIOCModule.java:49) for references to another service that is itself dependent on service 'MasterObjectProvider'.
    at org.apache.tapestry5.ioc.internal.ContributionDefImpl.invokeMethod(ContributionDefImpl.java:130)
    at org.apache.tapestry5.ioc.internal.ContributionDefImpl.contribute(ContributionDefImpl.java:80)
    at org.apache.tapestry5.ioc.internal.RegistryImpl$9.run(RegistryImpl.java:633)
    at org.apache.tapestry5.ioc.internal.OperationTrackerImpl$1.invoke(OperationTrackerImpl.java:51)
    at org.apache.tapestry5.ioc.internal.OperationTrackerImpl$1.invoke(OperationTrackerImpl.java:48)
    at org.apache.tapestry5.ioc.internal.OperationTrackerImpl.invoke(OperationTrackerImpl.java:74)
    at org.apache.tapestry5.ioc.internal.OperationTrackerImpl.run(OperationTrackerImpl.java:47)
    at org.apache.tapestry5.ioc.internal.PerThreadOperationTracker.run(PerThreadOperationTracker.java:76)
    at org.apache.tapestry5.ioc.internal.RegistryImpl.addToOrderedConfiguration(RegistryImpl.java:629)
    at org.apache.tapestry5.ioc.internal.RegistryImpl.getOrderedConfiguration(RegistryImpl.java:483)
    at org.apache.tapestry5.ioc.internal.ServiceResourcesImpl$2.invoke(ServiceResourcesImpl.java:110)
    at org.apache.tapestry5.ioc.internal.ServiceResourcesImpl$2.invoke(ServiceResourcesImpl.java:107)
    at org.apache.tapestry5.ioc.internal.OperationTrackerImpl.invoke(OperationTrackerImpl.java:74)
    at org.apache.tapestry5.ioc.internal.PerThreadOperationTracker.invoke(PerThreadOperationTracker.java:87)
    at org.apache.tapestry5.ioc.internal.RegistryImpl.invoke(RegistryImpl.java:1124)
    at org.apache.tapestry5.ioc.internal.ServiceResourcesImpl.getOrderedConfiguration(ServiceResourcesImpl.java:105)
    at org.apache.tapestry5.ioc.internal.AbstractServiceCreator.getOrderedConfiguration(AbstractServiceCreator.java:123)
    at org.apache.tapestry5.ioc.internal.AbstractServiceCreator.access$200(AbstractServiceCreator.java:35)
    at org.apache.tapestry5.ioc.internal.AbstractServiceCreator$1.findResource(AbstractServiceCreator.java:103)
    at org.apache.tapestry5.ioc.internal.util.DelegatingInjectionResources.findResource(DelegatingInjectionResources.java:38)
    at org.apache.tapestry5.ioc.internal.util.InternalUtils.calculateInjection(InternalUtils.java:231)
    at org.apache.tapestry5.ioc.internal.util.InternalUtils.access$000(InternalUtils.java:50)
    at org.apache.tapestry5.ioc.internal.util.InternalUtils$4.invoke(InternalUtils.java:289)
    at org.apache.tapestry5.ioc.internal.util.InternalUtils$4.invoke(InternalUtils.java:286)
    at org.apache.tapestry5.ioc.internal.OperationTrackerImpl.invoke(OperationTrackerImpl.java:74)
    at org.apache.tapestry5.ioc.internal.PerThreadOperationTracker.invoke(PerThreadOperationTracker.java:87)
    at org.apache.tapestry5.ioc.internal.RegistryImpl.invoke(RegistryImpl.java:1124)
    at org.apache.tapestry5.ioc.internal.util.InternalUtils.calculateParameters(InternalUtils.java:293)
    at org.apache.tapestry5.ioc.internal.util.InternalUtils$23.invoke(InternalUtils.java:1488)
    at org.apache.tapestry5.ioc.internal.util.InternalUtils$23.invoke(InternalUtils.java:1483)
    at org.apache.tapestry5.ioc.internal.OperationTrackerImpl.invoke(OperationTrackerImpl.java:74)
    at org.apache.tapestry5.ioc.internal.PerThreadOperationTracker.invoke(PerThreadOperationTracker.java:87)
    at org.apache.tapestry5.ioc.internal.RegistryImpl.invoke(RegistryImpl.java:1124)
    at org.apache.tapestry5.ioc.internal.util.InternalUtils.createConstructorConstructionPlan(InternalUtils.java:1480)
    at org.apache.tapestry5.ioc.internal.ConstructorServiceCreator.getPlan(ConstructorServiceCreator.java:52)
    at org.apache.tapestry5.ioc.internal.ConstructorServiceCreator.createObject(ConstructorServiceCreator.java:61)
    at org.apache.tapestry5.ioc.internal.OperationTrackingObjectCreator$1.invoke(OperationTrackingObjectCreator.java:45)
    at org.apache.tapestry5.ioc.internal.OperationTrackerImpl.invoke(OperationTrackerImpl.java:74)
    at org.apache.tapestry5.ioc.internal.PerThreadOperationTracker.invoke(PerThreadOperationTracker.java:87)
    at org.apache.tapestry5.ioc.internal.RegistryImpl.invoke(RegistryImpl.java:1124)
    at org.apache.tapestry5.ioc.internal.OperationTrackingObjectCreator.createObject(OperationTrackingObjectCreator.java:49)
    at org.apache.tapestry5.ioc.internal.SingletonServiceLifecycle.createService(SingletonServiceLifecycle.java:29)
    at org.apache.tapestry5.ioc.internal.LifecycleWrappedServiceCreator.createObject(LifecycleWrappedServiceCreator.java:46)
    at org.apache.tapestry5.ioc.internal.RecursiveServiceCreationCheckWrapper.createObject(RecursiveServiceCreationCheckWrapper.java:60)
    at org.apache.tapestry5.ioc.internal.OperationTrackingObjectCreator$1.invoke(OperationTrackingObjectCreator.java:45)
    at org.apache.tapestry5.ioc.internal.OperationTrackerImpl.invoke(OperationTrackerImpl.java:74)
    at org.apache.tapestry5.ioc.internal.PerThreadOperationTracker.invoke(PerThreadOperationTracker.java:87)
    at org.apache.tapestry5.ioc.internal.RegistryImpl.invoke(RegistryImpl.java:1124)
    at org.apache.tapestry5.ioc.internal.OperationTrackingObjectCreator.createObject(OperationTrackingObjectCreator.java:49)
    at org.apache.tapestry5.ioc.internal.services.JustInTimeObjectCreator.obtainObjectFromCreator(JustInTimeObjectCreator.java:66)
    ... 85 more
Caused by: java.lang.RuntimeException: Exception constructing service 'MasterObjectProvider': Construction of service 'MasterObjectProvider' has failed due to recursion: the service depends on itself in some way. Please check org.apache.tapestry5.ioc.internal.services.MasterObjectProviderImpl(List, OperationTracker) (at MasterObjectProviderImpl.java:33) via org.apache.tapestry5.ioc.services.TapestryIOCModule.bind(ServiceBinder) (at TapestryIOCModule.java:49) for references to another service that is itself dependent on service 'MasterObjectProvider'.
    at org.apache.tapestry5.ioc.internal.services.JustInTimeObjectCreator.obtainObjectFromCreator(JustInTimeObjectCreator.java:75)
    at org.apache.tapestry5.ioc.internal.services.JustInTimeObjectCreator.createObject(JustInTimeObjectCreator.java:54)
    at $MasterObjectProvider_440ab1f4dbb7.delegate(Unknown Source)
    at $MasterObjectProvider_440ab1f4dbb7.provide(Unknown Source)
    at org.apache.tapestry5.ioc.internal.RegistryImpl.getObject(RegistryImpl.java:871)
    at org.apache.tapestry5.ioc.internal.ObjectLocatorImpl.getObject(ObjectLocatorImpl.java:57)
    at org.apache.tapestry5.ioc.internal.util.InternalUtils.calculateInjection(InternalUtils.java:257)
    at org.apache.tapestry5.ioc.internal.util.InternalUtils.access$000(InternalUtils.java:50)
    at org.apache.tapestry5.ioc.internal.util.InternalUtils$4.invoke(InternalUtils.java:289)
    at org.apache.tapestry5.ioc.internal.util.InternalUtils$4.invoke(InternalUtils.java:286)
    at org.apache.tapestry5.ioc.internal.OperationTrackerImpl.invoke(OperationTrackerImpl.java:74)
    at org.apache.tapestry5.ioc.internal.PerThreadOperationTracker.invoke(PerThreadOperationTracker.java:87)
    at org.apache.tapestry5.ioc.internal.RegistryImpl.invoke(RegistryImpl.java:1124)
    at org.apache.tapestry5.ioc.internal.util.InternalUtils.calculateParameters(InternalUtils.java:293)
    at org.apache.tapestry5.ioc.internal.util.InternalUtils$23.invoke(InternalUtils.java:1488)
    at org.apache.tapestry5.ioc.internal.util.InternalUtils$23.invoke(InternalUtils.java:1483)
    at org.apache.tapestry5.ioc.internal.OperationTrackerImpl.invoke(OperationTrackerImpl.java:74)
    at org.apache.tapestry5.ioc.internal.PerThreadOperationTracker.invoke(PerThreadOperationTracker.java:87)
    at org.apache.tapestry5.ioc.internal.RegistryImpl.invoke(RegistryImpl.java:1124)
    at org.apache.tapestry5.ioc.internal.util.InternalUtils.createConstructorConstructionPlan(InternalUtils.java:1480)
    at org.apache.tapestry5.ioc.internal.ConstructorServiceCreator.getPlan(ConstructorServiceCreator.java:52)
    at org.apache.tapestry5.ioc.internal.ConstructorServiceCreator.createObject(ConstructorServiceCreator.java:61)
    at org.apache.tapestry5.ioc.internal.ServiceResourcesImpl$4.invoke(ServiceResourcesImpl.java:160)
    at org.apache.tapestry5.ioc.internal.OperationTrackerImpl.invoke(OperationTrackerImpl.java:74)
    at org.apache.tapestry5.ioc.internal.PerThreadOperationTracker.invoke(PerThreadOperationTracker.java:87)
    at org.apache.tapestry5.ioc.internal.RegistryImpl.invoke(RegistryImpl.java:1124)
    at org.apache.tapestry5.ioc.internal.ServiceResourcesImpl.autobuild(ServiceResourcesImpl.java:146)
    at org.apache.tapestry5.ioc.internal.ServiceResourcesImpl.autobuild(ServiceResourcesImpl.java:170)
    at org.apache.tapestry5.ioc.internal.AbstractConfigurationImpl.instantiate(AbstractConfigurationImpl.java:45)
    at org.apache.tapestry5.ioc.internal.ValidatingOrderedConfigurationWrapper.addInstance(ValidatingOrderedConfigurationWrapper.java:95)
    at com.skycomm.ipkaizen.services.CoreModule.setupDBSYmbolObjectProviders(CoreModule.java:51)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(Unknown Source)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source)
    at java.lang.reflect.Method.invoke(Unknown Source)
    at org.apache.tapestry5.ioc.internal.ContributionDefImpl.invokeMethod(ContributionDefImpl.java:120)
    ... 134 more
Caused by: org.apache.tapestry5.ioc.internal.OperationException: Construction of service 'MasterObjectProvider' has failed due to recursion: the service depends on itself in some way. Please check org.apache.tapestry5.ioc.internal.services.MasterObjectProviderImpl(List, OperationTracker) (at MasterObjectProviderImpl.java:33) via org.apache.tapestry5.ioc.services.TapestryIOCModule.bind(ServiceBinder) (at TapestryIOCModule.java:49) for references to another service that is itself dependent on service 'MasterObjectProvider'.
    at org.apache.tapestry5.ioc.internal.OperationTrackerImpl.logAndRethrow(OperationTrackerImpl.java:121)
    at org.apache.tapestry5.ioc.internal.OperationTrackerImpl.invoke(OperationTrackerImpl.java:88)
    at org.apache.tapestry5.ioc.internal.PerThreadOperationTracker.invoke(PerThreadOperationTracker.java:87)
    at org.apache.tapestry5.ioc.internal.RegistryImpl.invoke(RegistryImpl.java:1124)
    at org.apache.tapestry5.ioc.internal.OperationTrackingObjectCreator.createObject(OperationTrackingObjectCreator.java:49)
    at org.apache.tapestry5.ioc.internal.services.JustInTimeObjectCreator.obtainObjectFromCreator(JustInTimeObjectCreator.java:66)
    ... 169 more
Caused by: java.lang.IllegalStateException: Construction of service 'MasterObjectProvider' has failed due to recursion: the service depends on itself in some way. Please check org.apache.tapestry5.ioc.internal.services.MasterObjectProviderImpl(List, OperationTracker) (at MasterObjectProviderImpl.java:33) via org.apache.tapestry5.ioc.services.TapestryIOCModule.bind(ServiceBinder) (at TapestryIOCModule.java:49) for references to another service that is itself dependent on service 'MasterObjectProvider'.
    at org.apache.tapestry5.ioc.internal.RecursiveServiceCreationCheckWrapper.createObject(RecursiveServiceCreationCheckWrapper.java:52)
    at org.apache.tapestry5.ioc.internal.OperationTrackingObjectCreator$1.invoke(OperationTrackingObjectCreator.java:45)
    at org.apache.tapestry5.ioc.internal.OperationTrackerImpl.invoke(OperationTrackerImpl.java:74)
    ... 173 more 
```

谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-31T17:35:20.967

我不认为你可以有一个可更新的符号，即使你让你的自定义`SymbolSource`工作（我会回到你如何做到这一点）。原因是符号如何插入到服务中。它们被插入到字段中，并且不会转换为间接访问器方法。因此，即使您更改了值，`SymbolSource`也不会再次调用您的自定义来获取该值。

**如何贡献自己的`SymbolSource`** 只需装饰 SymbolSource 服务

```
public class AppModule {

    public SymbolSource decorateSymbolSource(
        final SymbolSource symbolSource) {
        return new MyCustomSymbolSource(symbolSource);
    }

} 
```

有了`MasterObjectProvider`，它就不再是一个服务，它被称为一个对象。不过，如果您想`MasterObjectProvider`始终使用`@Local`有助于解析服务和防止递归的本地服务。

# javascript - 如何为这个 jquery 增量插件编写函数？

> ID：12482202
> 
> 赞同：1
> 
> 时间：2012-09-18T17:40:51.130
> 
> 标签：javascript, jquery

我找到了一个不错的 jquery 增量脚本。增量部分可以接受一个函数或只是一个常规数字。我希望增加 1 到 100 之间的随机数。我将如何为此编写函数？

```
$( document ).ready( function()
{
  $( '.tick' ).ticker(
  {
    incremental : 1,
    delay       : 1500,
    separators  : true
  });
   $(".comma-change").html(".");  
});

<span class="tick">2,354,456</span> 
```

因此，我不想在增量字段中增加 1，而是想编写一个用随机数更新的函数。在其他帖子的帮助下，我可以编写创建随机数的函数没问题：

```
function random_generator (min, max) {
    return Math.random() * (max - min) + min;
} 
```

但我无法直接将其用于此。

这是插件的增量部分：

```
 Tick = (function() {

    function Tick(element, options) {
      this.element = element;
      if (options == null) options = {};
      this.running = false;
      this.options = {
        delay: options.delay || 1000,
        separators: options.separators != null ? options.separators : false,
        autostart: options.autostart != null ? options.autostart : true
      };
      this.increment = this.build_increment_callback(options.incremental);
      this.value = Number(this.element.html().replace(/[^\d.]/g, ''));
      this.separators = this.element.html().trim().split(/[\d]/i);
      this.element.addClass('tick-active');
      if (this.options.autostart) this.start();
    }

    Tick.prototype.build_increment_callback = function(option) {
      if ((option != null) && {}.toString.call(option) === '[object Function]') {
        return option;
      } else if (typeof option === 'number') {
        return function(val) {
          return val + option;
        };
      } else {
        return function(val) {
          return val + 1;
        };
      }
    }; 
```

然后这一点：

```
Tick.prototype.tick = function() {
  this.value = this.increment(this.value);
  this.render();
  return this.set_timer();
}; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-18T17:52:16.263

您可能必须更新增量脚本的来源。但如果你幸运的话，你也许可以使用一些诡计来避免。

增量脚本可能有这样的东西：

```
function(options) {
    //...
    currentValue += options.incremental;
    //...
} 
```

如果是这种情况，您可以`options.incremental`事后定期调整 的值，如下所示：

```
var opts;
$( '.tick' ).ticker(opts = {
    incremental : 1,
    delay       : 1500,
    separators  : true
});

setInterval(function () { 
    var min = 1, max = 100; //adjust min/max to suit your needs.
    opts.incremental = Math.random() * (max - min) + min;
}, 500); //any number under 1500 is probably fine 
```

这有点小技巧，但它可能会奏效。可能比更新插件的代码更容易。如果它不起作用，您可能必须直接增强插件。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-18T18:06:05.480

您需要做的就是将您的函数语句转换为函数表达式。函数语句定义名称并为其分配函数，而函数表达式是函数本身（匿名函数）。

您可以将变量的值设置为这样的函数

```
var random_generator = function(min, max) {
    return Math.random() * (max - min) + min;
}; 
```

然后将对该函数的引用（变量 random_generator）作为插件的增量传递。或者您可以像这样内联函数定义：

```
$( '.tick' ).ticker({
    incremental : function(currentValue) {
                     // currentValue really is the current value of the ticker
                     // this is because the code inside the ticker plugin, that triggers
                     // your function, will take care of passing it as a parameter in
                     return +currentValue + random_generator(1, 100);
                  },
    delay       : 1500,
    separators  : true
}); 
```

编辑：我没有意识到，你的函数有两个参数......这使得整个事情变得更加复杂。您可以将 min 和 max 硬编码到您的函数中（因为该函数被插件中的代码调用，并且您绝对不会得到任何参数），或者在它周围包装另一个匿名函数，它为我们提供了两个参数。

最终编辑：我猜你正在使用这个插件[https://github.com/harvesthq/tick](https://github.com/harvesthq/tick)？该插件可以接受一个函数，该函数将在每个报价时调用并传入报价器的当前值。您必须提供新值。我相应地更新了代码片段。

# android - 如何为 android MediaController 创建自定义 UI

> ID：12482203
> 
> 赞同：55
> 
> 时间：2012-09-18T17:40:54.890
> 
> 标签：android, android-video-player, mediacontroller

我想为我的视频播放器自定义 MediaController 中的控件。我想换掉播放按钮的图像，改变皮肤，改变颜色，等等。

有没有已知的方法可以做到这一点？

谢谢

* * *

## 回答 #1

> 赞同：105
> 
> 时间：2013-01-14T17:07:17.327

我在最近的一个项目中遇到了同样的问题，最终创建了一个基于股票 MediaController 的自定义实现。它在最右边添加了一个全屏按钮，但即使这不是你想要的，这个类也应该是一个很好的起点。

 `代码：

*   VideoControllerView.java - [http://pastebin.com/1V63aVSg](http://pastebin.com/1V63aVSg)
*   media_controller.xml - [http://pastebin.com/rS4xqMej](http://pastebin.com/rS4xqMej)

图片资源：

*   [![在此处输入图像描述](../Images/bc7d2dc61af0a4efdd8d9e7024e050ef.png)](https://i.stack.imgur.com/vPz2A.png)
*   [![http://imgur.com/JYJGN](../Images/cde893f774ac663938476c7f169a2730.png)](https://i.stack.imgur.com/F453M.png)
*   [![http://imgur.com/R0txq](../Images/b2ad5f19e6667545c5dde6b197c7a796.png)](https://i.stack.imgur.com/WuREN.png)
*   [![http://imgur.com/dQ6wA](../Images/a6ff5de4e4a7da1a8804d77b5a2858e7.png)](https://i.stack.imgur.com/ZfneD.png)

陷阱：

*   该类假定锚视图是一个 FrameLayout 以将其自身定位在底部。
*   该类不使用 Window 来确保控件浮动在锚点之上。但是，这对我来说不是问题，因为 show() 方法每次都会执行 mAnchor.addView() 。
*   该类使用自己的 MediaPlayerControl 协议。这允许自定义，例如 toggleFullScreen()

**更新（2013）**：有关更多详细信息，请参阅本教程：[http ://www.brightec.co.uk/blog/custom-android-media-controller](http://www.brightec.co.uk/blog/custom-android-media-controller)

**更新（2018 年）**：您现在可以使用出色的 ExoPlayer 并通过覆盖布局文件来完全自定义您的播放器 UI。

* * *

## 回答 #2

> 赞同：-6
> 
> 时间：2014-02-14T19:07:30.170

我对其进行了测试，它在 4.4 kitkat 上运行良好，但就像 KAPLANDROID 所说的黑屏出现在 android 2.3.6 上但音乐和视频控制器工作正常，

找到了解决办法，放上这段代码

```
videoHolder.setType( SurfaceHolder.SURFACE_TYPE_PUSH_BUFFERS ); 
```

在这之后

```
videoHolder.addCallback( this ); 
```

你准备好了`

# ajax - 如何推迟加载 twitter 的引导程序的远程模态内容？

> ID：12482206
> 
> 赞同：0
> 
> 时间：2012-09-18T17:41:13.313
> 
> 标签：ajax, twitter-bootstrap, modal-dialog, monkeypatching

我想在我的模态中通过 ajax 使用引导程序的自动魔术远程内容加载，但这似乎是在模态实例化的精确时刻获取内容（[源](https://github.com/twitter/bootstrap/blob/master/js/bootstrap-modal.js)）

没有办法简单地对 Modal 构造函数[进行猛击，因为它是模块包装的吗？](http://paulirish.com/2010/duck-punching-with-jquery/)我希望 .modal-body 中的占位符内容被 ajax 加载的内容覆盖，但仅在第一次触发模式进入视图时。

# php - 在 Echo 中使用 str_replace()

> ID：12482209
> 
> 赞同：-2
> 
> 时间：2012-09-18T17:41:26.123
> 
> 标签：php

`str_replace();`我们可以在PHP 编程中使用吗`echo '';`
？如果可能的话，请给我看一个例子。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-18T17:42:41.787

```
echo str_replace('dog', 'cat', 'thats an ugly dog'); 
```

输出是“那是一只丑陋的狗”的“那是一只丑陋的猫”；

示例：[http ://codepad.org/b63nu4Ie](http://codepad.org/b63nu4Ie)

# hibernate - 使用 Hibernate 比较现有数据库模式和手动更新模式

> ID：12482210
> 
> 赞同：0
> 
> 时间：2012-09-18T17:41:30.037
> 
> 标签：hibernate, database-schema

有哪些选项可用于比较现有 DB 模式以及可以从 Hibernate 中的映射文件构建的模式。如果有差异，我想手动进行比较并运行数据库模式更新脚本。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-18T17:51:50.507

我为此使用[了 schemacrawler](http://schemacrawler.sourceforge.net/)。使用 schemacrawler，您可以将每个模式转储到一个文件中，然后使用文件比较工具来查找两个模式之间的增量。

# java - 在java中获取数组的长度

> ID：12482211
> 
> 赞同：2
> 
> 时间：2012-09-18T17:41:35.980
> 
> 标签：java, android, arrays, object

请告知为什么如果我尝试获取数组的长度，我的小应用程序总是会出错。

请在下面找到我的代码：

**1\. 字符串解析器**

```
 package dl.data.background;

    import java.util.ArrayList;
        public class StringParser {

        public StringParser()
        {

        }

        public ArrayList<Object> Parse (String input) {
            ArrayList<Object> output = new ArrayList <Object>();

            int pointer = 0;
            String data = "";

            while (pointer <= input.length()-1)
            {
                if(input.charAt(pointer) == '#'){
                    output.add(data);
                    data = "";
                    pointer++;
                }
                if(pointer < input.length())
                {
                    data += input.charAt(pointer);
                }
                pointer++;
            }
            return output;
        }
    } 
```

**2\. 下载数据**

```
 package dl.data.background;

    import java.io.BufferedReader;
    import java.io.InputStream;
    import java.io.InputStreamReader;
    import java.util.ArrayList;

    import org.apache.http.HttpResponse;
    import org.apache.http.client.methods.HttpGet;
    import org.apache.http.impl.client.DefaultHttpClient;

    import android.app.Activity;
    import android.os.AsyncTask;
    import android.os.Bundle;
    import android.view.View;
    import android.widget.TextView;

    public class BackgroundDataActivity extends Activity {
    private TextView textView;

    /** Called when the activity is first created. */

    @Override
    public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);
    textView = (TextView) findViewById(R.id.TextView01);

    }

    private class DownloadWebPageTask extends AsyncTask<String, Void, String> {
    @Override
    protected String doInBackground(String... urls) {
      String response = "";
      for (String url : urls) {
        DefaultHttpClient client = new DefaultHttpClient();
        HttpGet httpGet = new HttpGet(url);
        try {
          HttpResponse execute = client.execute(httpGet);
          InputStream content = execute.getEntity().getContent();

          BufferedReader buffer = new BufferedReader(new InputStreamReader(content));
          String s = "";
          while ((s = buffer.readLine()) != null) {
            response += s;
          }

        } catch (Exception e) {
          e.printStackTrace();
        }
      }
      return response;
    }

    protected void onPostExecute(String result) {
        StringParser stringParser = new StringParser();
            ArrayList<Object> arrayList = stringParser.Parse(result);

            Object [] output = arrayList.toArray();

            // how to get length of output array?? 
        textView.setText(output.length);

      }
    }

    public void readWebpage(View view) {
      DownloadWebPageTask task = new DownloadWebPageTask();
      String url1 = "http://atmbersama.16mb.com/atmlocator.php?ct=SEL_Id&lat=-6.302161&lng=106.743679&radius=20";

      task.execute(new String[] {url1});
       }
     } 
```

如何获得输出数组的长度？？

```
textView.setText(output.length); 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-09-18T17:43:46.790

`length`是一个`Integer`，并且[`setText(CharSequence)`](http://developer.android.com/reference/android/widget/TextView.html#setText%28java.lang.CharSequence%29)期望一个`CharSequence`：

```
textView.setText(String.valueOf(output.length)); 
```

代码编译得很好，因为实际上有一个重载方法[`setText(int resid)`](http://developer.android.com/reference/android/widget/TextView.html#setText%28int%29)实际上需要一个整数。但是，此方法将尝试加载具有给定 id 的资源。

# maven - Maven 配置 pom.xml

> ID：12482212
> 
> 赞同：1
> 
> 时间：2012-09-18T17:41:37.340
> 
> 标签：maven, pom.xml

我如何告诉 maven 将某些文件放入某些文件夹中？

例如，我想将 security.xml 放入目标文件夹中的 WEB-INF 中。默认情况下，maven 忽略此文件。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-18T20:14:43.933

[Maven 资源插件](http://maven.apache.org/plugins/maven-resources-plugin/)应该可以完成这项工作。如果你想参数化你的配置文件，你可以将它与[Maven 过滤一起使用。](http://maven.apache.org/shared/maven-filtering/)

# android - 将 proguard 与谷歌分析 android 一起使用

> ID：12482216
> 
> 赞同：3
> 
> 时间：2012-09-18T17:41:55.310
> 
> 标签：android, google-analytics, obfuscation, proguard

有谁知道谷歌安卓分析是否可以被混淆。如果可以混淆，是否有任何特殊的保留选项我必须提及？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-18T20:55:07.590

您可以使用保存 jar 文件

```
-libraryjars /libs/libGoogleAnalytics.jar 
```

此外，您可以通过这种方式保留库包：

```
-keep class com.google.android.apps.analytics.**{ *; } 
```

# php - Magento 更新 CMS 页面 XML 以添加块 - 块未加载

> ID：12482220
> 
> 赞同：3
> 
> 时间：2012-09-18T17:42:04.563
> 
> 标签：php, xml, magento

我添加了一个新的 CMS 页面，并编辑了布局 XML 以显示：

```
<reference name="head">
<block type="cms/block" name="myblock" template="myfolder/mytemplate.phtml"></block>
</reference> 
```

所以我把文件“mytemplate.phtml”放在这个文件夹中：

```
/app/design/frontend/base/default/template/myfolder 
```

我把这个测试脚本放在文件中：

```
<?php
echo '<script>alert("hello");</script>';
?> 
```

但是，当我加载 CMS 页面时没有任何反应，因此这意味着“mytemplate.phtml”文件没有加载。

我怎样才能使这项工作？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-18T17:46:55.780

如果你要使用模板 (phtml)，你的块应该从`Mage_Core_Block_Template`.

所以你的块类型应该是`core/template`，不是`cms/block`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-18T17:49:09.163

如果你只想显示你的模板文件，你应该使用块类型`core/template`。试试这个xml：

```
<reference name="head">
    <block type="core/template" template="myfolder/mytemplate.phtml"/>
</reference> 
```

# excel - 使用 ADO.NET 访问 Excel 电子表格的 JET 驱动程序从何而来？

> ID：12482222
> 
> 赞同：0
> 
> 时间：2012-09-18T17:42:18.477
> 
> 标签：excel, ado.net

我试图避免在服务器上需要 Excel，因此正在考虑使用 JET 驱动程序和 ADO.NET。

我的问题是，Jet 驱动程序通常是如何获得的，或者它通常是基本操作系统的一部分？

我们使用的是 Windows 2003 Server 。

谢谢

# javascript - 如果其他为空，则将表单字段的值设为空白

> ID：12482226
> 
> 赞同：1
> 
> 时间：2012-09-18T17:42:25.110
> 
> 标签：javascript

我环顾四周，找不到这样的东西。我有一个包含日期的字段。旁边是一个保存小时数的。

我需要 javascript 在单击时评估日期字段，如果该字段为空白，则自动将文本框的值清空到它的左侧。

我的表单的部分代码如下所示：

```
 <td>Day One:</td>
    <td width="250"> <input type=date name="dayone" onClick="document.getElementsByName('hours1')[0].value=8;" /></td>
    <td>Hours: (max 8) <input type="text" name="hours1" id="hours1" class="smalltext" ></td> 
```

该 onclick 只是默认使用“8”填充文本字段。因此，如果有人改变主意并从另一个表单字段中清除日期，我几乎需要一些东西来消除这种情况。

谢谢您的帮助！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-18T17:51:54.570

你最好保持你的 HTML 干净并使用`eventListener`-s - [**DEMO**](http://jsfiddle.net/EeW5a/)

***HTML***

```
<td width="250">
    <input type=date name="dayone" />
</td>
<td>
    Hours: (max 8)
    <input type="text" name="hours1" id="hours1" class="smalltext" />
</td> 
```

***JS***

```
document.getElementsByName('dayone')[0].addEventListener("click", function() {
    document.getElementsByName('hours1')[0].value = 8;
}, false);

document.getElementsByName('hours1')[0].addEventListener("keyup", function() {
    if ( this.value == '' ) {
        document.getElementsByName('dayone')[0].value = '';
    }
}, false); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-18T17:48:21.380

尝试这个

```
<script>
   function clearinput(){
      var el = document.getElementById('hours1');
     el.value = '';
}
</script> 
```

见工作[小提琴](http://jsfiddle.net/ZTL73/1/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-18T17:48:45.697

更改代码以添加 onblur 事件处理程序

```
 <td width="250"> <input type=date name="dayone" onblur="checkValue" onClick="document.getElementsByName('hours1')[0].value=8;" /></td> 
```

并编写处理程序

```
function checkValue()
{
    var dayValue = document.getElementByName('dayone')[0].value;
    if(dayValue != '')
    {
       document.getElementByName('hours1')[0].value = '';    
    }
} 
```

# python - python / jinja中的正则表达式模式替换

> ID：12482228
> 
> 赞同：1
> 
> 时间：2012-09-18T17:42:30.273
> 
> 标签：python, regex

正则表达式的新手，我很难`re_replace`在 python 中为这个自定义函数组合一个正则表达式参数：

```
{{fieldname|re_replace(pattern, replacement)}} 
```

该模式使用正则表达式，我想返回以下内容`id=0123456`，其中字段名遵循以下格式：

[https://a.website.com/page.php?id=0123456&variable1=abcde123&variable2=abc123de](https://a.website.com/page.php?id=0123456&variable1=abcde123&variable2=abc123de)

我已经设法替换了，`id=0123456`但无法做到相反。提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-18T18:24:20.157

您可以使用[`re.search`](http://docs.python.org/library/re.html#re.search)而不是您自己的自定义函数来执行此操作吗？

语法是：

```
re.search(r'id\=\d+', fieldname).group(0)      # return 'id=0123456'
re.search(r'(?<=id\=)\d+', fieldname).group(0) # return '0123456' 
```

*要进行逆运算，您可以使用[`re.sub`](http://docs.python.org/library/re.html#re.sub).*

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-18T18:54:16.810

查看命名捕获。这样你就可以做这样的事情：

```
(?P<name>...) 
```

并使用**match.groupdict()**并返回包含匹配项的命名字典。在此处阅读更多信息：http: [//docs.python.org/library/re.html](http://docs.python.org/library/re.html)

# php - Google 地方信息和 cURL

> ID：12482231
> 
> 赞同：2
> 
> 时间：2012-09-18T17:42:38.070
> 
> 标签：php, curl, google-places-api

我是 Google 地方信息的新手，不知道我是否设置正确。这是我的测试代码：

```
$ch = curl_init();
curl_setopt($ch, CURLOPT_URL, "https://maps.googleapis.com/maps/api/place/search/json");
curl_setopt($ch, CURLOPT_POSTFIELDS, "location=45.508867,-73.554242&accuracy=500&sensor=false&key=(api key)");
curl_setopt($ch, CURLOPT_RETURNTRANSFER, TRUE);
$result = curl_exec($ch); 
```

但我回来了：

```
{
   "html_attributions" : [],
   "results" : [],
   "status" : "REQUEST_DENIED"
} 
```

我在控制台中激活了 Google Places 并从控制台获取了 API 密钥。我在这里做错了什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-18T18:50:58.623

解决了。我的 cURL 是错误的。

```
$ch = curl_init();
curl_setopt($ch, CURLOPT_URL, 'https://maps.googleapis.com/maps/api/place/search/json?location='. $latitude . ','  . $longitude .'&radius=500&name=test&sensor=false&key=(api key)');
//curl_setopt($ch, CURLOPT_RETURNTRANSFER, TRUE);
$result = curl_exec($ch); 
```

# wpf - 添加新项目时不要重新排序行，仅当用户单击标题时

> ID：12482236
> 
> 赞同：0
> 
> 时间：2012-09-18T17:42:48.790
> 
> 标签：wpf, sorting, datagrid

对不起，我的英语很差。

我有一个网格，带有可排序的列。如果用户单击单元格标题以激活排序行为，然后我以编程方式将新项目添加到绑定集合，则创建的新行将在其他行的任何位置进行排序。我不想要这种行为，我只在用户单击标题列时才需要排序更新，但当我以编程方式添加新闻行时不需要。这在 WPF 数据网格控件上是可能的吗？

非常感谢您的帮助。

# python - 处理要在没有全局变量的函数中使用的变量

> ID：12482237
> 
> 赞同：3
> 
> 时间：2012-09-18T17:43:00.333
> 
> 标签：python, oop, encapsulation

所以我正在开发一个基本的文字游戏，你会得到一个字母“手”（字典对象），你可以用它来创建单词并获得分数。

这个“手”用于许多功能的参数：计算玩家的分数，在玩家使用一个或多个字母后更新手牌中的字母数量，显示手牌，检查玩家的话的有效性，等等

从我读过的所有内容来看，我知道如果可以的话，我应该避免使用全局变量（尽管我仍然不完全确定为什么）。

那么对于许多使用“手”作为参数的函数，我可以使用什么其他通用方法呢？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-09-18T17:45:16.963

它被称为对象。创建一个具有共享状态的[类](http://docs.python.org/tutorial/classes.html)，以及共享该状态的函数。

这比全局变量更好的原因是它是同一概念的一个更受限制的版本 - 您可以清楚地看到哪些函数正在操纵这些变量，并记录（并强制执行）这些变量的预期不变量。使用全局变量，最终很容易拥有对共享变量的状态有不同期望的函数。

它还允许您拥有同一对象的多个副本，因此您不必将变量转换为集合并在集合成员之间进行关联，而是拥有一个对象集合，这使您的代码更简单。*然后，只需通过您定义的函数来操作这些对象就很简单了*。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-09-18T17:47:59.790

使用类封装...见下文...游戏知双手

```
class Hand:
    def __init__(self):
       num_cards = 7
       self.cards = ["a" for i in range(num_cards)]

class Game:
    def __init__(self,num_hands=2):
        self.hands = [Hand() for i in range(num_hands)]
        self.current_turn = 0 
    def play(self):
        self.hands[self.current_turn].play()
        self.current_turn = (self.current_turn+1)%len(self.hands) 
```

这是 Python 3 代码；Python 2 中的类应该派生自`object`.

...虽然他们不是必需的。如果他们不这样做，他们会失去一些功能

# php - 无法在 PHP 中订购多维数组

> ID：12482238
> 
> 赞同：2
> 
> 时间：2012-09-18T17:43:16.277
> 
> 标签：php, multidimensional-array

我有一个这样的数组

```
array(40) {
  [134114]=>
  array(5) {
    ["yeniPoz"]=>
    int(3)
    ["yeniPuan"]=>
    int(108)
    ["isim"]=>
    string(16) "PERSON A"
    ["eskiPoz"]=>
    string(1) "1"
    ["eskiPuan"]=>
    string(3) "102"
  }
  [307674]=>
  array(5) {
    ["yeniPoz"]=>
    int(2)
    ["yeniPuan"]=>
    int(83)
    ["isim"]=>
    string(16) "PERSON B"
    ["eskiPoz"]=>
    string(1) "2"
    ["eskiPuan"]=>
    string(2) "75"
  }
  [263724]=>
  array(5) {
    ["yeniPoz"]=>
    int(10)
    ["yeniPuan"]=>
    int(65)
    ["isim"]=>
    string(9) "PERSON C"
    ["eskiPoz"]=>
    string(1) "3"
    ["eskiPuan"]=>
    string(2) "65"
  }

[209310]=>
  array(5) {
    ["yeniPoz"]=>
    int(1)
    ["yeniPuan"]=>
    int(72)
    ["isim"]=>
    string(29) "PERSON D"
    ["eskiPoz"]=>
    string(1) "4"
    ["eskiPuan"]=>
    string(2) "62"
  }
... 
```

这个数组的一个类的公共元素( `public $datas`)。我想用**yeniPuan**订购这个数组。

```
function orderManagersFunc($a, $b)
{
    return $b['yeniPuan'] - $a['yeniPuan'];
}

function orderManager()
{
    uasort($this->datas, "orderManagersFunc");
} 
```

结果应该是这样的：

1.  人甲
2.  人乙
3.  人 D
4.  个人 C

但结果：

1.  人甲
2.  人乙
3.  个人 C
4.  人 D

我认为它是按 ["eskiPuan"] 订购的。

但我不知道，为什么？

* * *

如果你需要所有代码，你可以查看这个 repo：[https ://github.com/erayalakese/GPRO-live-standings](https://github.com/erayalakese/GPRO-live-standings)

GLS.class.php 文件中的类。我正在从 index.php 调用函数

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-18T18:06:39.973

您只需要替换以下行：

```
uasort($this->datas, "orderManagersFunc"); 
```

对于这个：

```
uasort($this->datas, array($this,"orderManagersFunc")); 
```

因为这是指示您要按类中的方法排序的正确语法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-18T18:02:56.360

- - 编辑 - -

你需要使用：

```
uasort($this->datas, "GLS::orderManagersFunc"); 
```

或者（正如尼尔森所建议的那样；也测试了一个......它也可以工作）：

```
uasort($this->datas, array($this, "orderManagersFunc")); 
```

用户订单函数被“GLS::orderManagersFunc”正确引用，而不仅仅是“orderManagersFunc”（应该输出警告）。这就是为什么您的结果没有按“yeniPuan”排序并保持原样的原因。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-18T18:00:15.640

看看`array_multisort`我已经将它用于像你这样的多维数组。我必须首先使用循环遍历多维数组来构建我想要排序的值的数组。然后，您可以使用 array_multisort 中的该数组进行排序。像这样的东西。我认为`usort`也可以

```
foreach($haystack as $key => $row){
    $arrayOfValuesToSortBy[$key] = $row['keyToSortBy']];
}

array_multisort($arrayOfValuesToSortBy, SORT_ASC, SORT_STRING, $haystack); 
```

# twitter-bootstrap - 轮播引导程序未正确显示，并且描述文本未显示

> ID：12482239
> 
> 赞同：0
> 
> 时间：2012-09-18T17:43:22.487
> 
> 标签：twitter-bootstrap

我刚刚尝试在引导程序版本 2.1.1 中实现 Carousel，并且正面临对齐问题，如以下链接 ( [http://bonanza.mocorner.com/en/](http://bonanza.mocorner.com/en/) ) 所示，箭头显示略微不同步与图像边框。

我对 bootstrap 很陌生，实际上对 css 来说总体上很糟糕：|... 任何人都可以告诉我我做错了什么？

更新：

当您单击下一步时，加上图像页脚上的描述消失..它闪烁并消失..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-18T17:47:04.610

我认为如果你让所有图像的高度相同，问题就会消失。

# wpf - WPF TextBox 数据绑定到 Double 属性中出现烦人的自动格式化

> ID：12482240
> 
> 赞同：2
> 
> 时间：2012-09-18T17:43:26.433
> 
> 标签：wpf, c#-4.0, data-binding

我有一个文本框，它在我输入数字时自动格式化自己的方式让我发疯。

例如，我想输入 -0.00004，但是当我输入时，TextBox 会在我输入第一个 时立即删除负号`0`。

然后我尝试了 -.00004，它不会在我输入 时删除负号`.`，但是一旦我按下`0`它就会删除`-`and `.`。

我能够让 TextBox 正常运行的唯一方法是先输入，然后将`0.00004`其自动格式化为`4E-05`，然后在前面添加负号。或者我可以输入`-4E-5`，然后它会自动格式化为`-4E-05`，这很好，但如果我输入`-4E-05`，`E`一按 就会被丢弃`0`。

我希望的是一种使用某种内置属性禁用此行为的方法，但如果它不存在，那么编写一个`IValueConverter`可能是我唯一的选择。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-18T17:51:28.247

解决自动格式化的一种方法是使用`IValueConverter`绑定的双精度属性。您需要向`Convert`从双精度转换为字符串的`ConvertBack`方法以及从字符串转换为双精度的方法添加逻辑。这是带有示例的[MSDN 文章。](http://msdn.microsoft.com/en-us/library/system.windows.data.ivalueconverter%28v=vs.100%29.aspx)

```
<TextBox Text="{Binding Number, Converter={StaticResource NumToStrConverter}}"/> 
```

另一种方法是将`StringFormat`Binding 设置为带有要显示的小数位数的数字。在[这里](http://msdn.microsoft.com/en-us/library/dwhawy9k.aspx)查看其他格式。

```
<TextBox Text={Binding Number, StringFormat=N10}"/> 
```

# ios - 在开发设备上部署应用程序iOS，是否有效？

> ID：12482242
> 
> 赞同：2
> 
> 时间：2012-09-18T17:43:40.630
> 
> 标签：ios, deployment, app-store, ipa, ios-provisioning

可以从开发设备使应用程序 iOS 中的部署失效吗？（iOS 开发者计划）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-18T17:44:57.853

当设备上的证书过期时，应用程序将不再启动。

# java - String Buffer SetLength(X) 方法然后追加

> ID：12482246
> 
> 赞同：1
> 
> 时间：2012-09-18T17:43:51.007
> 
> 标签：java, stringbuffer

我有以下代码来生成字符串的所有可能子字符串：

```
import java.util.*;
public class PlayString
{
    public static void main(String[] args)
    {
        String st = "ABC";
        char[] arr = new char[st.length()];
        for (int x = 0; x < st.length(); x++)
        {
            arr[x] = st.charAt(x);
        }
        StringBuffer sb = new StringBuffer();
        combination(arr, 0, st.length() - 1, sb);
    }

    public static void combination(char[] arr, int index, int b, StringBuffer sb)
    {
        for (int i = index; i <= b; i++)
        {
            sb.append(arr[i]);
            System.out.println(sb);
            combination(arr, i + 1, b, sb);
            sb.setLength(sb.length() - 1);
        }
    }
} 
```

我的问题是：在最后一行当 sb.setLength(sb.length()-1) 到底发生了什么？例如，如果字符串输入是“abc”，那么输出将像 a ， ab ， abc ，那么当设置长度时会发生什么？然后设置后，有什么东西被截断了吗？当我们尝试在此之后附加一个元素时会发生什么？

我的意思是如果输入字符串是“abc”，那么在字符串缓冲区中有“abc”并且它的长度现在是 3 之后，那么我们执行 sb.setLength(sb.length() - 1 ) 所以现在长度应该是 now ，那么究竟哪个元素被截断了？当我们稍后追加时会发生什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-18T18:19:53.777

如果我们替换函数combination()如下

```
public static void combination(char[] arr, int index, int b, StringBuffer sb)
    {
        for (int i = index; i <= b; i++)
        {
            System.out.println("i :" + i);
            sb.append(arr[i]);
            System.out.println(sb);
            combination(arr, i + 1, b, sb);
            System.out.println("setting length:" + (sb.length() -1) + ": index :" + index);
            sb.setLength(sb.length() - 1);
        }
    } 
```

You will see the following output >

```
i :0
A
i :1
AB
i :2
ABC
setting length:2: index :2
setting length:1: index :1
i :2
AC
setting length:1: index :1
setting length:0: index :0
i :1
B
i :2
BC
setting length:1: index :2
setting length:0: index :0
i :2
C
setting length:0: index :0 
```

Hope it explains the reason.

# jquery - 未捕获范围错误

> ID：12482254
> 
> 赞同：0
> 
> 时间：2012-09-18T17:44:12.567
> 
> 标签：jquery, jquery-mobile

我用一个脚本设置了这个 jsfiddle，该脚本采用 4 个滑块的值并将其从总数中减去。该脚本运行良好，但是当我将其上传到服务器时，我收到一条“未捕获的 rangeError”消息。我不知道如何摆脱它。无论如何我都不想更改功能，我只想摆脱错误消息。

[http://jsfiddle.net/mysticgohan53/A2YsU/16/](http://jsfiddle.net/mysticgohan53/A2YsU/16/)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-18T17:59:42.047

调试您的代码后，我看到`.slider('refresh')`正在创建问题。注释掉包含`.slider('refresh')`的行应该可以解决问题。

更新 jsfiddle[链接](http://jsfiddle.net/A2YsU/17/)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-18T18:29:35.263

这是正确答案的小提琴：

[http://jsfiddle.net/mysticgohan53/A2YsU/19/](http://jsfiddle.net/mysticgohan53/A2YsU/19/)

我将刷新移到 if/else 语句中，这似乎奏效了。我想这与@SimeVidas 所说的递归有关。

不幸的是，我不是一个 javascript 忍者，所以我真的不知道为什么它现在可以工作。

# voip - ICE（交互式连接建立）如何工作？

> ID：12482255
> 
> 赞同：3
> 
> 时间：2012-09-18T17:44:11.473
> 
> 标签：voip, nat, ice, stun

我正在阅读有关 ICE 的文件，并在一个地方感到困惑。

步骤 1\. 呼叫者收集传输候选（即主机、STUN 和 TURN）。

步骤 2\. 主叫向被叫发送一个 SIP INVITE。

*   这一步的细节经常被省略。不是说 NAT 已经解决了吗？

有人可以帮助呈现更大的图景吗？非常感谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-06-16T23:02:48.733

更大的图景是，还有另一个发送呼叫设置的通道，例如 Web 服务器。通常`SIP INVITE`会通过一些网络服务器。

ICE 用于在两个客户端之间建立直接连接，以便大量数据不需要通过 Web 服务器。

此 P2P 通道通常用于发送对延迟敏感的实时数据，或用于通过服务器传输成本高昂的批量数据。

所以你是对的，NAT 问题已经解决了，数据可以通过服务器发送，但是 ICE 建立了一个直接的 P2P 连接，它可以更便宜、更快并且可以具有更低的延迟。

# sql - Oracle SQL：将列转置为行

> ID：12482263
> 
> 赞同：1
> 
> 时间：2012-09-18T17:44:45.047
> 
> 标签：sql, oracle

对此有一些问题，但我找不到适合我的相关结果。我有一个查询，它给了我 2 列结果：

```
 Day            Tot_dLS   
 01-Sep-12      10000
 02-Sep-12      9920 
```

我想转置日期，使其显示为：

```
01-Sep-12    02-Sep-12 
10000         9920 
```

这可能吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-18T17:49:21.887

不是真的使用 SQL 查询，因为同一列必须包含两种不同的数据类型。您可以通过一些技巧（将所有内容转换为字符串）来解决问题 - 但是在演示应用程序或报告本身中比在查询中完成这些事情要好得多。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-18T18:07:53.293

由于您可以返回固定数量的列并且可以使用通用列名，因此您可以执行标准的数据透视查询

```
SELECT max( case when rn = 1 then tot_dls else null end ) col_1,
       max( case when rn = 2 then tot_dls else null end ) col_2,
       max( case when rn = 3 then tot_dls else null end ) col_3,
       <<25 more>>
       max( case when rn = 29 then tot_dls else null end ) col_29,
       max( case when rn = 30 then tot_dls else null end ) col_30
  FROM (SELECT day,
               tot_dls,
               rank() over (order by day) rn
          FROM your_table
         WHERE day between date '2012-09-01' 
                       and date '2012-09-02' -- Use whatever criteria you want here
       ) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-16T14:43:20.307

这段代码：

```
create table your_table(day date, tot_dls number(5));
insert into your_table values ('01-SEP-2012',10000);
insert into your_table values ('02-SEP-2012',9920);
insert into your_table values ('03-SEP-2012',12020);
insert into your_table values ('04-SEP-2012',11030);

column dummy noprint
column "Header" format a7
column "Data"   format a60
set hea off
SELECT 0 DUMMY
      ,'Day'                                      "Header"
      ,LISTAGG(' ' || TO_CHAR(Day,'DD-MON-YYYY')) WITHIN GROUP (ORDER BY Day) "Data"
FROM  your_table
UNION
SELECT 1
      ,'Tot_dls'
      ,LISTAGG(LPAD(TOT_DLS,13-LENGTH(TO_CHAR(TOT_DLS,'FM')),' ')) WITHIN GROUP (Order by Day)
FROM your_table
ORDER by 1; 
```

在 Oracle 11g (11.2.0) 数据库上使用 SQL*Plus 生成此输出。

```
Day      01-SEP-2012 02-SEP-2012 03-SEP-2012 04-SEP-2012
Tot_dls        10000        9920       12020       11030 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-18T17:47:08.240

您可以使用`CASE`语句和聚合来执行此操作。你可以使用这样的东西：

```
select max(case when day = '01-Sep-12' then Tot_dLS end) "01-Sep-12",
       max(case when day = '02-Sep-12' then Tot_dLS end) "02-Sep-12",
       ........ add more columns here
from yourtable 
```

然后这将被扩展以添加更多列。

# c++ - 使一个类对其他程序可用

> ID：12482265
> 
> 赞同：5
> 
> 时间：2012-09-18T17:44:49.087
> 
> 标签：c++, class, gcc, compilation, include

我正在用 C++ 构建一个进化模拟器，但不是作为“真正的”可运行程序，而是其他程序应该的类`#include`。这个名为`World`的类具有一些功能，例如`update()`,`getInfo()`等...

我在这里面临两个问题。首先，我不知道我应该如何编译这个类，以及我应该为用户程序（`#include`类的那个）提供哪些文件。显然，程序应该接收`.hpp`文件，但是还有什么呢？类的目标文件`World`？这意味着我需要使用`g++ World.o user.o -o user`语法编译用户程序，但是有没有办法避免这样做（`World.o`在我的编译命令中提到）？同样的方式我不需要包含`iostream.o`在编译命令中。

第二个问题是`World`该类`#include`是其他一些类，例如`Organism`，而这些类又必须包含`Block`该类才能从它继承。如何编译此代码以获得单个`World.o`文件（如果这是问题 1 的答案）？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-18T18:42:08.457

对我来说，这听起来像是你想在你的`World`课堂上建立一个图书馆。库通常提供一堆类型或函数或变量，以供可执行文件或其他库链接/使用。

库通常由公共*接口*和*其余部分*（内部、实现细节）组成。前者进入库头文件，阶梯进入其他头文件或实现文件。

接口定义包含库的潜在用户需要使用的所有内容。不多也不少。那是，

*   公共类型、函数和变量的声明
*   使用库所需的 typedef
*   文件
*   ...

如果用户只需要与 the 交互`World`而不需要与 any交互，则`Organism`此类不会进入库头，而是例如仅包含在相关的实现文件中。实现本身可以拆分为不同的文件。由链接器适当地组合这些。

* * *

当涉及大量文件和库时，手动定义构建配置可能会很麻烦。好东西，有工具可以自动生成它。例如[cmake](http://www.cmake.org/)。一个示例 cmake 配置文件可能如下所示：

```
# CMakeLists.txt

# add a shared library to build configuration
add_library(my_library_name SHARED my_library_file1.cpp my_library_file2.cpp)

# add an executable to build configuration
add_executable(my_executable_name executable_file1.cpp executable_file2.cpp)

# link the library to the executable
target_link_libraries(my_executable_name my_library_name) 
```

只需`cmake`使用所在目录的路径运行`CMakeLists.txt`以构建必要的makefile，然后运行`make`，然后您就应该完成了。

* * *

也可以看看：

*   [什么是 C++ 中的“翻译单元”](https://stackoverflow.com/q/1106149/1025391)
*   [静态库和共享库的区别？](https://stackoverflow.com/q/2649334/1025391)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-18T17:47:57.467

您应该有一组必要的头文件供您的代码用户使用。其他所有东西都应该编译到一个库中供他们使用，以便他们将一组标头包含到他们的代码中并链接到库。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-18T17:49:48.353

您可以创建静态或共享库。[http://www.adp-gmbh.ch/cpp/gcc/create_lib.html](http://www.adp-gmbh.ch/cpp/gcc/create_lib.html)

# javascript - Rally App SDK 2.0：在单击且不展开并显示“添加详细信息”按钮时会出现 rallyaddnew 错误

> ID：12482270
> 
> 赞同：0
> 
> 时间：2012-09-18T17:45:14.983
> 
> 标签：javascript, extjs, rally

我尝试实现一个 rallyaddnew 按钮，并使用示例中提供的配置，当我单击该按钮时收到以下错误（在“实时预览”中也是如此：

```
Uncaught TypeError: Object #<Object> has no method 'getContextPath' sdk.js:59857 
    a.define._onNewClicked sdk.js:59857 
    fire sdk.js:4371
    Ext.define.continueFireEvent sdk.js:13154 
    Ext.define.fireEvent sdk.js:13140 
    a.define._interceptBefore.c.(anonymous function) sdk.js:56055 
    Ext.define.fireHandler sdk.js:40307 
    Ext.define.onClick sdk.js:40303 
    (anonymous function) 
    Ext.apply.createListenerWrap.g sdk.js:4766 
```

该组件无法展开以显示文本字段和“添加详细信息”按钮。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-19T15:29:09.440

这是 SDK 预览版 2.0p3 中的一个已知缺陷，将在下一版本中解决。

不过，您的应用程序将在 Rally 的自定义应用程序面板中正常工作。

# java - 对数组进行排序的最佳方法

> ID：12482275
> 
> 赞同：-1
> 
> 时间：2012-09-18T17:45:36.043
> 
> 标签：java, arrays

我有一个表单中的数组`[A,B,B,A,A]`。对数组进行排序的优化方法是什么`[A,A,A,B,B]`？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-18T18:03:43.203

当你拥有力量时，好好利用它......`Why reinvent the wheel ???`

用于 **对数组进行排序**`Arrays.sort()`。

 ****-**如果您在 Array 中保存的是某种对象，并且需要以多种方式对其进行排序....然后首先使用将其转换为 ArrayList（或 List）`Arrays.asList(array)`

**例如：**

```
Song[] dog = new Song[10];
 ArrayList<Song> list = new ArrayList<Song>(Arrays.asList(arr)); 
```

然后使用`java.util.Comparator`接口，根据多个属性对对象进行排序。

**例如：**`Comparator` Class Song 可以使用Interface 根据其曲目标题或 Singer 等进行排序。

**-**使用`Collections`比. **_** _`Array`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-18T17:52:40.740

如果您想自己实现快速排序，请使用某种[QuickSort](http://en.wikipedia.org/wiki/QuickSort)或[MergeSort 。](http://en.wikipedia.org/wiki/Mergesort)

否则使用内置的 java 排序函数。**

# sml - 函子定义中的“不匹配的结构规范”

> ID：12482278
> 
> 赞同：0
> 
> 时间：2012-09-18T17:46:02.300
> 
> 标签：sml, functor

我正在尝试学习`functors`在标准 ML 中使用。我已经编写了以下代码，但我不断收到错误消息`Error: unmatched structure specification: Element`。任何人都可以向我指出错误。我一直找不到它：

```
signature SET_ELEMENT =
 sig
   type element
   val equal: element -> element -> bool
 end

signature SET =
 sig
   type set
   structure Element : SET_ELEMENT

   val empty: set
   val member: Element.element -> set -> bool
 end

functor Set (Element:SET_ELEMENT) :> SET =
  struct
    type element = Element.element
    type set = element list
    val empty = [];

    fun member x [] = false
      | member x (y::ys) = Element.equal x y orelse member x ys;
  end 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-18T19:35:55.400

您声明了一个`Element`在 的签名中调用的结构`SET`。然而，您没有定义`Element`函子输出的结构中调用的结构。

`Element`只需添加一行声明它与函子的输入相同：

```
functor Set (Element:SET_ELEMENT) :> SET =
  struct
    structure Element = Element
    type element = Element.element
    type set = element list
    val empty = [];

    fun member x [] = false
      | member x (y::ys) = Element.equal x y orelse member x ys;
  end 
```

# php - PHP将数据类型地理的结果转换为坐标

> ID：12482280
> 
> 赞同：0
> 
> 时间：2012-09-18T17:46:14.893
> 
> 标签：php, postgresql, postgis, geography

我正在使用 PHP 通过 PostGIS 查询我的 PostgreSQL-db 以获取数据。其中一列是地理类型，这意味着从该列返回的数据看起来像一串随机字母和数字，当然不是。是否有可能以某种方式将该字符串解析为实际点，并读取该点的纬度和经度？

我现在可以用 SQL 做到这一点，但我现在想在开发过程中用 PHP 做到这一点。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-19T20:23:52.137

有几个可用的[输出选项](http://postgis.refractions.net/documentation/manual-2.0/reference.html#Geometry_Outputs)。可能您想要的是[ST_AsText](http://postgis.refractions.net/documentation/manual-2.0/ST_AsText.html)来获得[WKT](http://en.wikipedia.org/wiki/Well-known_text)。

# android - 如何通过使用图库单击图像来开始新活动？

> ID：12482288
> 
> 赞同：1
> 
> 时间：2012-09-18T17:46:29.473
> 
> 标签：android, android-activity, android-gallery, vertical-scrolling

我想要一个类似屏幕的东西，里面有一组可滚动的图像，如果我点击每个图像，它应该开始一个新的活动（）。我可以为此目的使用 android 库吗？我使用画廊背后的想法是因为我正在使用一组图像。那么如果我可以让它们在我的 res 文件夹中。

更新

画廊类（由于某种原因，堆栈不允许我发表评论：（）

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-18T18:01:50.520

您当然可以将 onItemClickListner 添加到图库视图并在活动中使用该启动。

```
 gallery.setOnItemClickListener(new OnItemClickListener(){
      public void onItemClick(AdapterView<?> parent, View v, int position, long id){
      if(position == WantedImage){
          StartActivity(new Intent(CurrentActivity.this,ActivityToLaunch.class));
      }
  } 
```

# sql - 计数永远

> ID：12482290
> 
> 赞同：1
> 
> 时间：2012-09-18T17:46:51.503
> 
> 标签：sql, tsql, count

我不是 T-SQL Extrodinare，我是应用开发人员。有了这个，我无法弄清楚为什么这个计数会永远持续下去。

```
select  p.Code,
    count(p.Head) as HeadCount,
        p.Wt
from Povs p
left outer join Sales s on SheetKey = p.SheetKey
left outer join Site [site] on [site].CompanyKey = s.CompanyKey
left outer join Lot lot on lot.LotID = s.LotID
group by lot.LotID, [site].SiteKey, Code, Wt 
```

Povs 中有大约 115749000 条记录。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-18T19:40:05.713

除非这不是真正的查询，否则这是一个问题

```
left outer join Sales s on SheetKey = p.SheetKey 
```

SheetKey = p.SheetKey 总是会返回 true，所以这是 Sales 中每一行的连接

该连接中的 115,749,000 X 160,000 = 18,519,840,000,000 行

你为什么加入罗得？您可以通过 s.LotID 删除该加入和分组

使用相同的语法。如果您要[]，请保持一致。如果我使用连接，我总是使用两部分名称。为什么将 Lot 别名为 lot？

# python - cx_Oracle.Connection 抛出 cx_Oracle.InternalError：没有 Oracle 错误？

> ID：12482299
> 
> 赞同：0
> 
> 时间：2012-09-18T17:47:25.657
> 
> 标签：python, oracle, cx-oracle

我已经在我的 Linux 机器上安装了 python Oracle 模块 cx_Oracle。oracle 用户和 root 用户都可以导入 cx_Oracle 并使用 cx_Oracle.Connection(...) 创建数据库连接。

服务器上的其他用户也可以导入 cx_Oracle，但是当他们尝试创建连接对象时，会引发以下异常：

```
>>> cx_Oracle.Connection('....')
Traceback (most recent call last):
File "<stdin>", line 1, in <module>
cx_Oracle.InternalError: No Oracle error? 
```

我已经确认我要开始工作的用户设置了所有正确的系统变量，ORACLE_HOME、LD_LIBRARY_PATH、ORACLE_SID 和 PATH。该用户使用 sqlplus 并以这种方式连接到数据库也没有问题。

我认为这是一个文件权限问题，因为 oracle 和 root 用户都没有问题。我只是不确定哪个文件可能导致问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-06-11T08:37:44.743

我遇到了同样的问题，对我来说这是一些 Oracle 语言环境文件的访问权限。这个问题通过使其`$ORACLE_HOME/nls/data`内容具有世界可读性而得到解决。

为了找到问题，我写了一个小脚本test_oracle.py：

```
import cx_Oracle as oracle
conn = oracle.connect("user/pwd@host:port/SID") 
```

然后跑去`truss python test_oracle.py`寻找访问问题（当然，在我曾经使用过的 Linux 上`strace`。）

# cmake - CMake 忽略 library_output_name

> ID：12482302
> 
> 赞同：4
> 
> 时间：2012-09-18T17:47:35.857
> 
> 标签：cmake, libraries

我有一个简单的 CMakeLists.txt 文件：

```
cmake_minimum_required(VERSION 2.8.9) project (sample)

add_library(Shared SHARED foo.c)
set_target_properties(Shared PROPERTIES library_output_name libdemo.so.1.2.3) 
```

我希望我的图书馆被调用`libdemo.so.1.2.3`，但它正在被调用`libShared.so`。我怎样才能得到这个文件来命名我想要的库？因为我想添加同一个库的静态版本，所以我不只是想更改`add_library()`指令，因为静态库将具有相同的名称，只是扩展名不同。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-18T19:05:49.657

将行更改`set_target_properties()`为：

> set_target_properties（共享属性库_OUTPUT_NAME demo.so.1.2.3）

解决问题。

前一种方法不会产生错误，但它会默默地忽略该行。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-10-18T07:20:08.407

`LIBRARY_OUTPUT_NAME`为共享库设置

`OUTPUT_NAME`为静态库设置

[ShivaVG](https://github.com/vpxyz/ShivaVG/pull/4)的示例代码

```
# create object
add_library(ShivaVG_objlib OBJECT
  ${libShivaVG_SOURCES})
set_property(TARGET ShivaVG_objlib
  PROPERTY POSITION_INDEPENDENT_CODE 1)

# create library (static)
add_library(ShivaVGStatic
  STATIC $<TARGET_OBJECTS:ShivaVG_objlib>)
set_target_properties(ShivaVGStatic
  PROPERTIES OUTPUT_NAME ShivaVG)

# create library (shared)
add_library(ShivaVGShared
  SHARED $<TARGET_OBJECTS:ShivaVG_objlib>)
target_link_libraries(ShivaVGShared
  ${OPENGL_LIBRARIES} ${GLEW_LIBRARIES} -lm)
set_target_properties(ShivaVGShared
  PROPERTIES LIBRARY_OUTPUT_NAME ShivaVG) 
```

这将产生`ShivaVG.so`和`ShivaVG.a`

# sql - Oracle 10g 选择满足一定条件的记录

> ID：12482303
> 
> 赞同：1
> 
> 时间：2012-09-18T17:47:43.410
> 
> 标签：sql, oracle, select

对于以下查询，我将不胜感激。我有一个如下表，

```
识别码 | 状态 | Msg_Id | Msg_Id_type
1 | 开始 | 机管局 | 全球的
2 | 结束 | 机管局 | 全球的
3 | 程序 | 机管局 | 全球的
4 | 开始 | BB | 全球的
5 | 开始 | 抄送 | 全球的
6 | 开始 | DD | 全球的
7 | 结束 | DD | 全球的

```

我想要实现的是仅选择那些记录，对于给定的 MSG_ID，除了“START”之外没有任何其他状态，或者除了“START”之外没有任何其他状态的所有记录。非常感谢您的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-18T17:53:51.383

这将为您提供所有只有 START 作为其状态的 msg_id。

```
select msg_id
from the_table
where msg_id in (select msg_id from the_table where status = 'START')
group by msg_id
having count(distinct status) = 1 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-18T18:30:00.783

这个怎么样：

```
SELECT *
FROM my_table a
WHERE NOT EXISTS (
        SELECT 1
        FROM my_table b
        WHERE b.status <> 'START'
            AND b.msg_id = a.msg_id
    )
    AND a.status = 'START' -- < I think you can ignore this line. 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-18T20:36:08.120

这应该可以帮助您：

```
SELECT msg_id  
  FROM TABLE  
 GROUP by msg_id  
HAVING COUNT(CASE WHEN STATUS = 'START' THEN 1 ELSE NULL END) = 1  
   AND COUNT(CASE WHEN STATUS <> 'START' THEN 1 ELSE NULL END) = 0 
```

`

# sql - 这个sql查询正确吗？如果不正确，我该如何解决？

> ID：12482304
> 
> 赞同：0
> 
> 时间：2012-09-18T17:47:47.543
> 
> 标签：sql

架构：

```
Student(studentid,name,age)
Course(coursename,dept)
enroll(studentid,course,grade) 
```

我需要找到，对于每个年龄组的学生，找到他们所学的政治学和历史课程的平均成绩，并返回每个年龄组平均成绩最高的学生姓名

到目前为止，我的尝试是：

```
select max(grade), age, name
from (
    select name, age, grade
    from student s, (
            select avg(grade) as grade, e.studentid
            from enroll e
            where dname in ('Political Sciences', 'History')
            group by studentid
            ) as temp
    where s.studentid = temp.studentid
) temp1
group by temp1.age; 
```

我想知道它在逻辑上是否正确，而不是语法上。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-18T18:04:44.230

以下是有关您的查询的一些提示：

1.  小心你的表别名。确保将它们带到您的`SELECT`
2.  您只能`SELECT`在您的聚合中包含正在使用的列 ( `GROUP BY`)。因此，你不能`GROUP BY temp1.age`和`SELECT age, name`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-18T18:05:28.420

你的 SQL 背后的逻辑在我看来很可靠，只要“年龄”与“年龄组”相关，而不是指个别学生的年龄。

# regex - 使用正则表达式在字符串中查找“赋值”（=）运算符

> ID：12482306
> 
> 赞同：1
> 
> 时间：2012-09-18T17:47:50.273
> 
> 标签：regex, perl

我知道那里有真正的 REGEX 大师，我有点想有一种模式可以满足我的需求。

（注意：我正在使用 perl，但如果您有其他喜欢的，可以从许多正则表达式模式中转换格式）

我正在寻找字符串（代码）中的赋值运算符。它没有成为世界上最强大的，但需要比“去寻找第一个=”更好。

这对于一个简单的测试来说很简单

```
var a = "42"; 
```

有了以上内容，我可以说类似

```
($before, $after) = m/([^=])\=(.*)/; 
```

我会得到我需要的价值观。但是一旦它变得有点复杂，比如：

```
myVar["this is my = key"] = "and this is my value"; 
```

事情变得有点复杂。如您所见，字符串中有一个“=”。我需要忽略字符串（最好是单引号和双引号）。

有人对此有一个不错的小技巧吗？是的，我还有许多其他具有挑战性的模式，但是解决这个问题将是一个巨大的飞跃。

我不反对做一些事情，比如替换封闭引号中的任何“=”，然后运行我的运算符搜索。没有把握。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-18T18:07:20.450

模块[Text::ParseWords](http://search.cpan.org/perldoc?Text%3a%3aParseWords)（自 perl 5 以来的核心模块）可以为您处理引用。此示例将采用由分隔符分隔的前两个“字段” `=`。如您所见，它是相当字面的，甚至可以捕获空格、分号和引号。我通过您的示例假设这不是问题。

```
use strict;
use warnings;
use Data::Dumper;
use Text::ParseWords;

while (<DATA>) {
    chomp;
    my ($key, $val) = quotewords('=', 1, $_);
    print Dumper { $key => $val }
}

__DATA__
var a = "42";
myVar["this is my = key"] = "and this is my value"; 
```

**输出：**

```
$VAR1 = {
          'var a ' => ' "42";'
        };
$VAR1 = {
          'myVar["this is my = key"] ' => ' "and this is my value";'
        }; 
```

# go - 如何嵌入文件以供以后解析执行使用

> ID：12482311
> 
> 赞同：43
> 
> 时间：2012-09-18T17:48:06.733
> 
> 标签：go

我实际上是在尝试浏览一个包含 html 文件的文件夹。我想将它们嵌入到二进制文件中，并能够根据请求解析它们以用于模板执行目的。（如果我的措辞不正确，请原谅）。

非常感谢任何想法、提示、技巧或更好的方法来实现这一点。

```
// Template Files
type TempFiles struct {
    Files map[string]string
}

// Loop through view files and load them
func LoadTempFiles() {
    t := new(TempFiles)

    // Load template files
    filepath.Walk("application/views", func(path string, info os.FileInfo, err error) error {
    if !info.IsDir() {
        content, _ := ioutil.ReadFile(path)
        t.Files[path] = string(content)
    }
    return nil
    })
}

func ViewTemp(w http.ResponseWriter, path string) {
    t := new(TempFiles)

    temp, err := template.New().Parse(t.Files[path])
    if err != nil {
        http.Error(w, err.Error(), http.StatusInternalServerError)
    } else {
        temp.Execute(w, nil)
    }
} 
```

* * *

## 回答 #1

> 赞同：48
> 
> 时间：2012-09-18T18:52:16.347

我使用我的大多数 Go 网络应用程序来执行此操作。我使用[go-bindata](https://github.com/go-bindata/go-bindata)从我想要嵌入的所有文件中自动生成 Go 源代码，然后将它们编译成二进制文件。所有这些都是在构建期间自动完成的。

一个缺点是当前的 go 构建工具不提供挂钩到构建过程的方法，因此我为此使用了 Makefile。调用 makefile 时，它​​会运行`go-bindata`以生成所有必要文件的源代码，然后通常会执行一些额外的代码生成位和 bobs（特别是创建一个 Go 源文件，其中列出了地图中的所有嵌入文件.. 目录如果你愿意）。然后它继续编译实际程序。

这可能会变得有点混乱，但您只需设置一次。另一个缺点是使用 Makefile 意味着软件与`go get`命令不兼容。但是由于我的大多数网络应用程序无论如何都不是要共享的，所以到目前为止这还不是问题。

在调试/开发这样的应用程序时，嵌入静态 Web 内容会产生另一个问题：我不能只编辑 HTML 或 CSS 文件并刷新浏览器以查看其效果。我将不得不停止服务器，重建它并在每次编辑时重新启动它。这显然不理想，所以我将 Makefile 拆分为`debug`and`release`模式。释放模式执行我上面描述的操作。但是，调试模式实际上不会嵌入静态文件。它确实为每个文件生成源文件，但不是让它们包含实际的文件数据，而是包含一个简单地从文件系统加载数据的存根。

就服务器代码而言，生成的代码没有区别。它所做的只是调用一个函数来获取给定静态文件的内容。它不关心该内容是否实际嵌入二进制文件中，或者是否从外部源加载。所以这两种构建模式可以自由互换。

例如，在发布和调试模式下获取静态文件内容的相同生成函数如下所示：

发布方式：

```
func index_html() []byte {
    return []byte {
        ....
    }
} 
```

调试模式：

```
func index_html() []byte {
   data, err := ioutil.ReadFile("index.html")
   ...
   return data
} 
```

两种情况下的界​​面是相同的。这允许轻松和无忧的开发和调试。

* * *

## 回答 #2

> 赞同：18
> 
> 时间：2014-11-20T07:49:18.043

另一个需要考虑的工具：另一个最近的好工具来自[esc：Embedding Static Assets in Go](http://mattjibson.com/blog/2014/11/19/esc-embedding-static-assets/) ( [GitHub repo](https://github.com/mjibson/esc) )

> 一个程序：
> 
> *   可以获取一些目录并以与 http.FileSystem 兼容的方式递归地将所有文件嵌入其中
> *   可以选择禁用以与本地文件系统一起使用以进行本地开发
> *   不会在后续运行中更改输出文件
> *   文件更改时有合理大小的差异
> *   对销售友好
> 
> 供应商友好意味着当我跑步`godep`或聚会时，静态嵌入文件不会改变。
> 这意味着它不能有任何第三方导入（因为它们的导入路径将在 期间被重写`goimports`，因此与工具本身生成的不同），或所需第三方导入的可指定位置。
> 
> 它生成漂亮的 gzip 压缩字符串，每个文件一个。
> 有一个简单的标志来启用本地开发模式，它足够聪明，不会从文件名中去除目录前缀（`esc`有时需要一个选项）。
> 输出包括所有需要的代码，并且不依赖于任何第三方库来兼容`http.FileSystem`.

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2014-03-20T17:51:04.410

我制作了一个包，使调试和生产之间的切换更容易。它还提供了一个 http.FileSystem 实现，可以轻松地为文件提供服务。它有几种将文件添加到二进制文件的方法（生成 go 代码，或附加为 zip）。 [https://github.com/GeertJohan/go.rice](https://github.com/GeertJohan/go.rice)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2021-04-01T20:16:47.863

Go 现在已经内置了对此的支持：

```
package main

import (
   "embed"
   "os"
)

//go:embed *.html
var content embed.FS

func main() {
   b, e := content.ReadFile("index.html")
   if e != nil {
      panic(e)
   }
   os.Stdout.Write(b)
} 
```

[https://golang.org/pkg/embed](https://golang.org/pkg/embed)

# c# - 阻止键盘输入，但允许在文本框上自动扫描仪输入

> ID：12482312
> 
> 赞同：0
> 
> 时间：2012-09-18T17:48:08.980
> 
> 标签：c#, textbox

大家好，我正在使用 RFID 扫描仪，它将扫描的代码放在扫描时可用的任何文本字段中。例如，它可以将文本放入 Excel 中的单元格或 Web 浏览器的地址栏中。

我制作了一个带有文本框的应用程序，该文本框接收扫描仪发送的输入，但我想禁用用户输入（键盘）。我尝试将文本框属性“只读”设置为 true，但文本未显示在文本框中。

我怎样才能做到这一点？提前致谢 ：）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-18T17:58:44.360

大多数条码扫描仪只是键盘输入。这可以通过拦截 HID 调用或拦截输入框中的按键事件来完成。我不希望它运作良好，但祝你好运。

# function - Scheme - 有一个函数返回一个函数

> ID：12482313
> 
> 赞同：3
> 
> 时间：2012-09-18T17:48:13.717
> 
> 标签：function, functional-programming, lisp, scheme, currying

我想通过以下方式使用此代码：如果我输入：

```
((function1 5) 2) 
```

其中 function1 基于 执行其过程`5`，并返回`function2`基于 执行某些内容的a `2`。这可能吗？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-09-18T17:51:51.310

```
(define (multiplyBy n) (lambda (x) (* n x)))
((multiplyBy 5) 2) 
```

我相信会做你想做的事。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-18T20:09:38.500

继续@zebediah49 的示例，这是另一种方法：

```
(define (multiplyBy n) ((curry *) n))
((multiplyBy 5) 2)
> 10 
```

一般来说，对于两个参数的函数（上面的例子看起来有点不同，因为`*`是一个或多个参数的函数）：

```
(define (function1 arg0) (curry <function2, receives arg1> arg0)) 
```

引用[`curry`](http://docs.racket-lang.org/reference/procedures.html)程序的文档：

> 返回一个过程，它是`proc`. 当第一次应用结果过程时，除非给定它可以接受的最大参数数量，否则结果是一个接受附加参数的过程

基本上，您被要求实施[currying](https://en.wikipedia.org/wiki/Currying)。引用维基百科的文章：

> 在数学和计算机科学中，柯里化是一种转换具有多个参数（或参数的 n 元组）的函数的技术，使得它可以被称为一个函数链，每个函数都有一个参数（部分应用） . 它由 Moses Schönfinkel 提出，后来被 Haskell Curry 重新发现。因此，有人说将其命名为 schönfinkeling 更为正确。

请注意，所有这些都是等价的：

```
(define ((function1 arg0) arg1) <body>)
(define (function1 arg0) (lambda (arg1) <body>))
(define (function1 arg0) (curry <function2, receives arg1> arg0))
(define (function1 arg0) (define (function2 arg1) <body>) function2) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-18T23:50:46.797

我四处询问，我发现你可以定义一个这样的函数：

`(define ((function1 arg0) arg1) (;procedure here...))`

这就是我想要的。我想毕竟它并没有真正得到一个函数来返回一个过程......：/感谢所有的帮助！:)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-19T06:14:16.020

其中许多答案正确地显示了从函数返回函数的不同方式。更一般地说，您正在做的事情称为 Currying。更具体地说，“currying”是指将一个接受 n 个参数的函数转换为一个接受一个参数并返回一个接受 n-1 个参数的新函数的过程。

对于初学者来说，这是我觉得最好看的风格：

```
#lang racket

;; a curried function that multiplies two numbers
(define (function1 arg0)
  (define (function2 arg1) 
    (* arg0 arg1))
  function2) 
```

此函数接受一个参数 (arg0)，定义一个参数 (arg1) 的新函数，该函数将 arg0 和 arg1 相乘，然后返回它。

这个不像使用 lambda 的那么短，但是当你刚开始时，lambda 看起来只是一件更奇怪的东西，没有任何意义。

# terminal - 从命令行调用 PHP 脚本中的函数

> ID：12482315
> 
> 赞同：5
> 
> 时间：2012-09-18T17:48:22.903
> 
> 标签：terminal, command-line-arguments, php

我有一个脚本，它有一堆不同的参数化函数。是否可以从命令行调用这些函数中的任何一个并传入参数，而不必在脚本中对函数调用进行硬编码？

仅供参考：我确实知道如何从命令行执行一个简单的 PHP 脚本

不完全调用该函数，记住 script.php 有大约 5 个不同的函数，我只想调用 1 个，这可能吗

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-09-18T17:51:27.317

不，你不能直接这样做。你有几个选择：

*   将每个函数放在一个单独的 php 文件中并调用该 php 文件
*   使用传递给 php 文件的第一个参数作为函数名，并编写几行代码来选择正确的函数。

**更新：**

这是使用第一个传递的参数作为函数调用的示例：

```
if(function_exists( $argv[1] ))
  call_user_func_array($argv[1], $argv); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-18T17:52:56.303

`php script.php arg1 arg2` 在您的脚本中以 $argv[1]、$argv[2]...等方式访问它们。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-18T17:51:39.210

`getopt()`接受 CLI 参数。

```
php /path/to/myscript.php -a foo -b bar -c baz

$arguments = getopt("a:b:c:");

print_r($arguments);

    Array
    (
        [a] => foo
        [b] => bar
        [c] => baz
    ) 
```

如果你有一个函数 arg，让它成为一个`$arguments[a]();`调用函数，你也可以传入 b。`foo();`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-18T17:51:56.300

不是 100% 确定你在问什么，但执行会是这样的

```
php script.php arg1 arg2 arg3 
```

你似乎已经知道了。在脚本本身中访问这些参数的方法是使用变量`$argv`，`$argv[0]`脚本也是如此，`$argv[1]`将是`"arg1"`等。如果这不起作用，则使用`$_SERVER['argv']`.

至于选项，您可以使用[`getopt`](http://us2.php.net/manual/en/function.getopt.php)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-18T17:53:43.433

您可以让命令行脚本使用它的第一个参数作为要调用的函数，然后将参数传递给它。参数将出现在魔法数组变量`$argv`中。

```
// Zero'th "argument" is just the name of your PHP script
$name_of_php_script = array_unshift($argv);
// Next argument will be your callback
$callback = array_unshift($argv);
// Remaining arguments are your parameters
call_user_func_array($callback, $argv); 
```

显然，为了安全起见，您可能想让事情变得更复杂，或者传递某种特殊值，但这符合您在问题中描述的基本逻辑。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-09-18T17:54:22.613

您可以编写一个选项，然后将函数传递给该选项，例如 myscript.php -function my_function

然后在你的脚本中调用函数

```
$argv[1]() 
```

# java - 错误：无法访问 jarfile Click-The-Block.jar

> ID：12482317
> 
> 赞同：1
> 
> 时间：2012-09-18T17:48:31.187
> 
> 标签：java, eclipse, jar, executable-jar

我制作了一个简单的游戏，我想将它转换成一个可运行的 jar，这样我就可以向其他人展示并在没有 Eclipse 的情况下启动它。

在 Eclipse I 中：

1.  右键单击项目
2.  出口
3.  Java > 可执行 Jar 文件
4.  启动配置：CTB (1) - 单击块

它制作了一个带有 MANIFEST.MF 的罐子，其中包含：

```
Manifest-Version: 1.0  
Class-Path: .  
Main-Class: uk.co.robertmerriman.ctb.main.CTB 
```

这一切都在 Click-The-Block.jar 中提取到我的桌面

当我双击时，没有任何反应。
当我在 CMD 中输入“java -jar Click-The-Block.jar”时，出现以下错误：

```
Error: Unable to access jarfile Click-The-Block.jar. 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-18T17:59:41.010

看起来像操作系统问题。如果您运行的是 windows 07 或 vista，请尝试在管理员模式下运行相同的版本。还要确保在运行命令时

> java -jar Click-The-Block.jar

您正在从 jar 所在的目录运行它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2020-09-25T01:10:58.853

**使你的 jar 文件名在本地不带空格，然后在 cmd 中写入，如下所示：**

```
java -jar YourjarFileNameWithoutSpaces.jar 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-19T21:37:10.110

如果您的 java.exe 在 c:\java\bin\java.exe 中，而 Click-The-Block.jar 在 c:\dev\ 中，请尝试以下命令

> c:\java\bin\java -jar c:\dev\Click-The-Block.jar

也尝试重命名你的 jar 文件，没有 cps 字母，我知道这不会有任何影响，但尝试没有任何害处。

如果您仍然无法执行 jar，请尝试从网上下载可执行 jar 文件，看看您是否能够使用标准 java 命令运行它。如果您仍然遇到相同的错误，这意味着问题不在于您的 jar，而与系统中 java 的配置方式有关。在这种情况下，您可以继续重新安装新的 jdk，然后再试一次。

希望能帮助到你 ...

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2020-11-06T19:24:20.267

我由 maven-shade-plugin "DCD-Desktop-1.0.jar" 生成的可执行 jar 遇到了同样的问题，我删除了破折号并将其重命名为 "dcd.jar" 并且效果很好。

# database - JSP 中的空点异常

> ID：12482320
> 
> 赞同：-4
> 
> 时间：2012-09-18T17:48:44.060
> 
> 标签：database, jsp, exception, glassfish, nullpointerexception

当我尝试将表单中的数据添加到我的数据库时，它给了我一个错误

> 例外
> 
> org.apache.jasper.JasperException: java.lang.NumberFormatException: null 根本原因
> 
> java.lang.NumberFormatException：空

```
This is my code

<%@page contentType="text/html" pageEncoding="UTF-8"%>
<%@page import="java.sql.*" %>
<%@page import="java.util.*"%>
<%@page import="java.io.*" %>
<%
    String firstName = request.getParameter("firstName");
    String secondName = request.getParameter("secondName");
    String gender = request.getParameter("gender");
    String address = request.getParameter("address");
    String city = request.getParameter("city");
    String country = request.getParameter("country");
    int zip = Integer.parseInt(request.getParameter("zip"));
    int mobileNo = Integer.parseInt(request.getParameter("mobileNo"));
    int homePhone = Integer.parseInt(request.getParameter("homePhone"));
    String eMail = request.getParameter("eMail");

    try {
        Class.forName("com.mysql.jdbc.Driver").newInstance();
        Connection con = DriverManager.getConnection("jdbc:mysql://localhost:3306/testproject", "root", "123456");
        Statement st = null;
        PreparedStatement ps = null;
        ResultSet rs = null;

        ps = con.prepareStatement("INSERT INTO studentregform (firstName, secondName, gender, address, city, country, zip, mobile, homePhone, email) VALUES ( ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)");

        ps.setString(1, firstName);
        ps.setString(2, secondName);
        ps.setString(3, gender);
        ps.setString(4, address);
        ps.setString(5, city);
        ps.setString(6, country);
        ps.setInt(7, zip);
        ps.setInt(8, mobileNo);
        ps.setInt(9, homePhone);
        ps.setString(10, eMail);

        int result = ps.executeUpdate();

    } catch (Exception e) {
        //out.println("Data not inserted");
        throw new Error(e);
    }

%> 
```

谁可以帮我这个事？谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-18T17:52:45.800

`java.lang.NumberFormatException: null`似乎是一个明确的指针，表明您正在尝试将 null`String`参数转换为 an `Integer`，或者 the`String`不是有效数字。

检查以下行中的空值/无效整数：

```
int zip = Integer.parseInt(request.getParameter("zip"));
int mobileNo = Integer.parseInt(request.getParameter("mobileNo"));
int homePhone = Integer.parseInt(request.getParameter("homePhone")); 
```

另外，我建议使用`Integer`，以便您仍然可以将它们传递给它们`PreparedStatement`，以防它们为空/由于其格式不正确而无法初始化`String`。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-18T17:53:37.247

这三行之一似乎给您带来了问题；

```
int zip = Integer.parseInt(request.getParameter("zip"));
int mobileNo = Integer.parseInt(request.getParameter("mobileNo"));
int homePhone = Integer.parseInt(request.getParameter("homePhone")); 
```

你确定它们都是完全数字的吗？如果其中一个为空、null、未设置或具有任何类型的分隔符，如`1-800-123-4567`，则不能将其存储为数字并`Integer.ParseInt()`会抛出`NumberFormatException`.

编辑：你说你的电话号码是 10 位数字，完全是数字。尽管如此，您还是会遇到问题，因为 Java`Integer`没有那么高的精度。事实上，它不能存储任何大于约 20 亿的数字。

# objective-c - 查找某个div的xpath

> ID：12482325
> 
> 赞同：0
> 
> 时间：2012-09-18T17:48:55.820
> 
> 标签：objective-c, ios, xpath, hpple

我正在使用 hpple 库来获取网页上某个 div 的内容。

用法：

```
NSData* data = [trimmedString dataUsingEncoding:NSUTF8StringEncoding];

TFHpple *xpathParser = [[TFHpple alloc] initWithHTMLData:data];
NSArray *elements  = [xpathParser searchWithXPathQuery:@"//div[@id='container']"]; 
TFHppleElement *element = [elements objectAtIndex:0];
NSString *string = [element content];
NSLog(string); 
```

现在我在想应该用 div 容器的内容填充字符串 *string 吗？

我收到此错误并崩溃：

> *** 由于未捕获的异常“NSRangeException”而终止应用程序，原因：“*** -[__NSArrayM objectAtIndex:]: index 0 beyond bounds for empty array”

现在我猜这是因为它没有用那个 div 中的任何东西填充数组？一个原因是它没有找到解析我给它的链接，但它没有在 xpathParser 上崩溃，所以我猜它解析得很好？

这告诉我它在这一行中的 xpath 是错误的：

```
searchWithXPathQuery:@"//div[@id='content']"]; 
```

谁能帮我找到文本“我需要下面所有这些文本：”下面的div的xpath（我已经提供了它上面的所有div。（它是html页面上的最后一个div）

```
<body class="html not-front not-logged-in no-sidebars page-node page-node- page-node-68 node-type-article" >
<div id="container">
    <section id="main" role="main">
        <header>
            <div id="logo"><a href="/"><img src="/sites/all/themes/bmco/images/logo.gif" /></a></div>
            <nav class="navigation" id="mainmenu">
                  <div class="region region-menupanel">
    <div id="block-superfish-1" class="block block-superfish">

  <div class="content">
    <ul id="superfish-1" class="sf-menu main-menu sf-horizontal sf-style-default sf-total-items-7 sf-parent-items-5 sf-single-items-2"><li id="menu-566-1" class="first odd sf-item-1 sf-depth-1 sf-no-children"><a href="/" title="" class="sf-depth-1 ">home</a></li><li id="menu-567-1" class="middle even sf-item-2 sf-depth-1 sf-total-children-6 sf-parent-children-0 sf-single-children-6 menuparent"><a href="/company" title="data centre design and build" class="sf-depth-1  menuparent">company</a><ul><li id="menu-395-1" class="first odd sf-item-1 sf-depth-2 sf-no-children"><a href="/case-studies" class="sf-depth-2 ">case studies</a></li><li id="menu-393-1" class="middle even sf-item-2 sf-depth-2 sf-no-children"><a href="/news" class="sf-depth-2 ">news</a></li><li id="menu-608-1" class="middle odd sf-item-3 sf-depth-2 sf-no-children"><a href="/downloads" title="" class="sf-depth-2 ">downloads</a></li><li id="menu-572-1" class="middle even sf-item-4 sf-depth-2 sf-no-children"><a href="/meet-team" class="sf-depth-2 ">meet the team</a></li><li id="menu-609-1" class="middle odd sf-item-5 sf-depth-2 sf-no-children"><a href="/working-you" title="2bm is committed to being a responsible business.  We aim to ensure that, in everything we do, we meet the highest standards of business ethics and conduct." class="sf-depth-2 ">working with you</a></li><li id="menu-607-1" class="last even sf-item-6 sf-depth-2 sf-no-children"><a href="/blog" title="" class="sf-depth-2 ">blog</a></li></ul></li><li id="menu-573-1" class="middle odd sf-item-3 sf-depth-1 sf-total-children-12 sf-parent-children-0 sf-single-children-12 menuparent"><a href="/design-and-build" title="" class="sf-depth-1  menuparent">design and build</a><ul><li id="menu-583-1" class="first odd sf-item-1 sf-depth-2 sf-no-children"><a href="/design-and-build/access-and-security" class="sf-depth-2 ">access and security</a></li><li id="menu-577-1" class="middle even sf-item-2 sf-depth-2 sf-no-children"><a href="/design-and-build/cabling" class="sf-depth-2 ">cabling</a></li><li id="menu-585-1" class="middle odd sf-item-3 sf-depth-2 sf-no-children"><a href="/design-and-build/clinical-cleaning" class="sf-depth-2 ">clinical cleaning</a></li><li id="menu-580-1" class="middle even sf-item-4 sf-depth-2 sf-no-children"><a href="/design-and-build/cooling" class="sf-depth-2 ">cooling</a></li><li id="menu-579-1" class="middle odd sf-item-5 sf-depth-2 sf-no-children"><a href="/design-and-build/electrical-supply" class="sf-depth-2 ">electrical supply</a></li><li id="menu-582-1" class="middle even sf-item-6 sf-depth-2 sf-no-children"><a href="/design-and-build/fire-supression" title="Data Centre Fire Suppression and Detection" class="sf-depth-2 ">fire suppression</a></li><li id="menu-574-1" class="middle odd sf-item-7 sf-depth-2 sf-no-children"><a href="/design-and-build/flooring" class="sf-depth-2 ">flooring</a></li><li id="menu-586-1" class="middle even sf-item-8 sf-depth-2 sf-no-children"><a href="/design-and-build/maintenance" class="sf-depth-2 ">maintenance</a></li><li id="menu-581-1" class="middle odd sf-item-9 sf-depth-2 sf-no-children"><a href="/design-and-build/power-monitoring" class="sf-depth-2 ">power monitoring</a></li><li id="menu-578-1" class="middle even sf-item-10 sf-depth-2 sf-no-children"><a href="/design-and-build/project-management" class="sf-depth-2 ">project management</a></li><li id="menu-584-1" class="middle odd sf-item-11 sf-depth-2 sf-no-children"><a href="/design-and-build/racking" class="sf-depth-2 ">racking</a></li><li id="menu-575-1" class="last even sf-item-12 sf-depth-2 sf-no-children"><a href="/design-and-build/room-construction-and-layout" class="sf-depth-2 ">room construction and layout</a></li></ul></li><li id="menu-588-1" class="middle even sf-item-4 sf-depth-1 sf-total-children-3 sf-parent-children-0 sf-single-children-3 menuparent"><a href="/monitoring" title="" class="sf-depth-1  menuparent">monitoring</a><ul><li id="menu-590-1" class="first odd sf-item-1 sf-depth-2 sf-no-children"><a href="/monitoring/environmental-monitoring" class="sf-depth-2 ">environmental monitoring</a></li><li id="menu-592-1" class="middle even sf-item-2 sf-depth-2 sf-no-children"><a href="/monitoring/innovative-cabling" class="sf-depth-2 ">innovative cabling</a></li><li id="menu-589-1" class="last odd sf-item-3 sf-depth-2 sf-no-children"><a href="/monitoring/sensorium-software" class="sf-depth-2 ">sensorium software</a></li></ul></li><li id="menu-587-1" class="middle odd sf-item-5 sf-depth-1 sf-total-children-10 sf-parent-children-0 sf-single-children-10 menuparent"><a href="/room-and-rack-infrastructure" title="" class="sf-depth-1  menuparent">room and rack</a><ul><li id="menu-598-1" class="first odd sf-item-1 sf-depth-2 sf-no-children"><a href="/room-and-rack-infrastructure/iec-lock" class="sf-depth-2 ">IEC lock</a></li><li id="menu-594-1" class="middle even sf-item-2 sf-depth-2 sf-no-children"><a href="/room-and-rack-infrastructure/kvm" class="sf-depth-2 ">KVM</a></li><li id="menu-597-1" class="middle odd sf-item-3 sf-depth-2 sf-no-children"><a href="/room-and-rack-infrastructure/ups" class="sf-depth-2 ">UPS</a></li><li id="menu-576-1" class="middle even sf-item-4 sf-depth-2 sf-no-children"><a href="/design-and-build/airflow-management" class="sf-depth-2 ">airflow management</a></li><li id="menu-595-1" class="middle odd sf-item-5 sf-depth-2 sf-no-children"><a href="/room-and-rack-infrastructure/aisle-containment" class="sf-depth-2 ">aisle containment</a></li><li id="menu-599-1" class="middle even sf-item-6 sf-depth-2 sf-no-children"><a href="/room-and-rack-infrastructure/clinical-cleaning" class="sf-depth-2 ">clinical cleaning</a></li><li id="menu-593-1" class="middle odd sf-item-7 sf-depth-2 sf-no-children"><a href="/room-and-rack-infrastructure/floor-tiles" class="sf-depth-2 ">floor tiles</a></li><li id="menu-596-1" class="middle even sf-item-8 sf-depth-2 sf-no-children"><a href="/room-and-rack-infrastructure/power-strips" class="sf-depth-2 ">power strips</a></li><li id="menu-600-1" class="middle odd sf-item-9 sf-depth-2 sf-no-children"><a href="/room-and-rack-infrastructure/racks" class="sf-depth-2 ">racks</a></li><li id="menu-601-1" class="last even sf-item-10 sf-depth-2 sf-no-children"><a href="/room-and-rack-infrastructure/security" class="sf-depth-2 ">security</a></li></ul></li><li id="menu-591-1" class="middle even sf-item-6 sf-depth-1 sf-total-children-5 sf-parent-children-0 sf-single-children-5 menuparent"><a href="/imeter" title="The 2bm iMeter - data centre power monitoring" class="sf-depth-1  menuparent">iMeter</a><ul><li id="menu-604-1" class="first odd sf-item-1 sf-depth-2 sf-no-children"><a href="/imeter/zero-downtime-0" title="data centre power monitoring" class="sf-depth-2 ">Zero Downtime</a></li><li id="menu-602-1" class="middle even sf-item-2 sf-depth-2 sf-no-children"><a href="/imeter/why-imeter" title="power and environmental monitoring" class="sf-depth-2 ">Why iMeter</a></li><li id="menu-610-1" class="middle odd sf-item-3 sf-depth-2 sf-no-children"><a href="/imeter/how-it-works-0" title="power and environmental monitoring" class="sf-depth-2 ">How it works</a></li><li id="menu-603-1" class="middle even sf-item-4 sf-depth-2 sf-no-children"><a href="/imeter/imeter-monitoring-software" title="power and environmental monitoring software" class="sf-depth-2 ">Monitoring software</a></li><li id="menu-611-1" class="last odd sf-item-5 sf-depth-2 sf-no-children"><a href="/imeter/case-studies" title="University of Nottingham opts for 2bm iMeter power and environmental monitoring solution" class="sf-depth-2 ">Case Studies</a></li></ul></li><li id="menu-565-1" class="last odd sf-item-7 sf-depth-1 sf-no-children"><a href="/contact-us" class="sf-depth-1 ">contact us</a></li></ul>  </div>
</div>
  </div>
            </nav>
            <div id="headerimagepanel">
                <div id="headerimage"><img src="/sites/all/themes/bmco/images/newsheader.jpg" /></div>
                <div id="headermenu"><nav id="hmenupanel" class="navigation"></nav></div>
            </div>
        </header>
        <nav id="menupanel">
            <nav id="archivemenu" class="navigation">  <div class="region region-archivemenublog">
    <div id="block-views-blog-archive-block" class="block block-views">

    <h2>Monthly archive</h2>

  <div class="content">
    <div class="view view-blog-archive view-id-blog_archive view-display-id-block view-dom-id-a384fd1f4628f80c660e22d4df3b4779">

      <div class="view-content">
      <div class="item-list">
  <ul class="views-summary">
      <li><a href="/blog/archive/201208">August 2012</a>
              (1)
          </li>
    </ul>
</div>
    </div>

</div>  </div>
</div>
  </div>
</nav>  
        </nav>
        <div id="contentpanel">
                                        <h2 class="title" id="page-title">How secure are your racks? </h2>

              <div class="region region-content">
    <div id="block-system-main" class="block block-system">

  <div class="content">
    <div id="node-68" class="node node-article node-promoted clearfix" about="/blog/how-secure-are-your-racks" typeof="sioc:Item foaf:Document">

    I need all this text below:

  <div class="content">
    <div class="field field-name-body field-type-text-with-summary field-label-hidden"><div class="field-items"><div class="field-item even" property="content:encoded"><p>Data centre security is a big issue – especially for co-location centres hosting multiple racks for multiple, often competing, clients. Yet whilst security to access the data centre can often be impressive, individual rack level security is often inadequate. Given the number of in-house staff and external engineers, from cablers to storage and server providers, traipsing through a data centre on a near daily basis, poor rack level security is a potential risk.</p>
<p>According to a recent survey conducted by Lieberman Software, 42 percent of IT staff can get unauthorised access to their organisation’s most sensitive information – including the CEO’s private documents. The failing is blamed on management’s naivety when it comes to understanding just how much privileged access their IT departments actually have.</p>
<p>The fact that most racks are secured only with standard handles using a manual key, bears out this survey. Easily broken or bypassed, these locks provide minimal corporate protection; they offer no access control or audit trail of activity. Given the huge ongoing investment in data centres - during 2011-2012, the UK invested an estimated $3.35 billion in data centres; the second highest spending of any country, according to the Datacentre Dynamics Global Industry Census 2011 - extending standard access control techniques to the data centre racks is an important step.</p>
<p>Companies can opt for a rack specific key, combination locks or key cards that are IP enabled to allow an organisation to impose strict control over the time/day an individual is allowed to access the rack. Using standard access control software, all activity is recorded and audited, providing the organisation with a complete list of those who have accessed the racks.</p>
<p>For organisations, this approach adds control and addresses one important aspect of the internal threat. For co-location sites, rack level security removes the need to cage off client specific rack space areas freeing up space that can be used for more racks, delivering a return on investment, as well as improved client security.</p>
</div></div></div>  </div> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-18T20:27:13.267

**编辑**：基于完整的 HTML，我更改了 XPathQuery

```
TFHppleElement *element  = [xpathParser peekAtSearchWithXPathQuery:@"//div[@id='node-68']"]; 
// Use peekAtSearchWithXPathQuery as there is only one vdiv with this id so you directly get the element (the function grabs the first element that corresponds to the XPath query) 
```

然后获取文本，遍历它的子元素

```
-(NSString*) getStringForTFHppleElement:(TFHppleElement *)element {

    NSMutableString *result = [NSMutableString new];

    // Iterate recursively through all children
    for (TFHppleElement *child in [element children])
        [result appendString:[self getStringForTFHppleElement:child]];

    // Hpple creates a <text> node when it parses texts
    if ([element.tagName isEqualToString:@"text"])
        [result appendString:element.content];

    return result;
} 
```

# javascript - 不能调用动态添加的类

> ID：12482336
> 
> 赞同：4
> 
> 时间：2012-09-18T17:50:17.557
> 
> 标签：javascript, jquery

我正在尝试在通过 ajax 调用填充数据的页面中完成删除。我的页面在加载数据之前有这个：

```
<span id="ShowSelectedCategories"></span> 
```

并在ajax调用后填写以下信息：

```
function(data){
    $('#ShowSelectedCategories').prepend('<a href="" id="'+b.SelectedCategoriesID+'" class="DeleteCat"> x <span style="color:red">' + data +'</span> </a>&nbsp ');
} 
```

最后点击后我想删除点击的元素，但它不起作用。

```
$(function(){

    $("#ShowSelectedCategories").click(function(e){
    e.target.outerHTML //this is the part i want to remove after click

e.preventDefault();
    }) 
```

我已经尝试过`$(".DeleteCat).click()`，但这给出了错误，因为该类的元素是动态创建的。

感谢您的帮助

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-18T17:53:30.390

试试`$(e.target).remove()`，

```
$("#ShowSelectedCategories").click(function(e){
         $(e.target).remove();    
         e.preventDefault();
}); 
```

如果你想在 ID ShowSelectedCategories 的范围内删除类 DeleteCat 的元素，那么你可以这样做，

```
$("#ShowSelectedCategories").on("click", "DeleteCat" function(e){
         $(this).remove();    
         e.preventDefault();
}); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-18T18:05:03.777

```
$('#ShowSelectedCategories').on('click', '.DeleteCat', function(e){
    $(this).remove();
    e.preventDefault();
}); 
```

[http://jsfiddle.net/Dj5NQ/](http://jsfiddle.net/Dj5NQ/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-18T18:42:33.183

使用这样的东西来调用动态添加的类

```
$('.class').live("click", function(){

  $('#id').remove();   

}); 
```

# c# - MVC 4 中的异步操作过滤器

> ID：12482338
> 
> 赞同：33
> 
> 时间：2012-09-18T17:50:39.580
> 
> 标签：c#, asp.net-mvc, async-await, actionfilterattribute

我有一个动作过滤器，当在某些特定条件下使用时，它必须执行 Web 服务调用以确保当前状态有效。这最初似乎是 async/await 的理想候选者，但我遇到了一个障碍：

假设请求：/Test/FilteredAction

*   MyCustomActionFilter 开始执行
    *   到达第一个“等待”语句
*   TestController.FilteredAction 开始执行
*   MyCustomActionFilter 恢复执行

传统上，我希望动作过滤器恢复执行，然后在控制器动作开始执行之前完成，但这不会发生。

现在我假设这是因为我正在使用：

```
public class MyCustomActionFilter : ActionFilterAttribute 
{
    public override **async** void OnActionExecuting(FilterContext context) 
    {
        var foo = await WebServiceCall();
    }
} 
```

所以我想我的问题是：MVC 4 中是否有一个异步感知动作过滤器类，或者我应该在这里阻止调用？

* * *

## 回答 #1

> 赞同：42
> 
> 时间：2012-09-18T18:22:30.853

MVC 没有`async`兼容的操作过滤器（但[WebAPI 确实有一个](http://msdn.microsoft.com/en-us/library/system.web.http.filters.iactionfilter%28v=vs.108%29.aspx)）。

目前，我建议您在`OnActionExecuting`. 希望 MVC 将来会有更好的故事。

**更新：**您可以[在此处投票](https://aspnet.codeplex.com/workitem/9582)支持 MVC 团队添加`async`过滤器。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-29T14:09:48.507

不，没有 MVC 的异步过滤器，但它*是*可行的。

ASP.NET MVC 过滤器依赖于被排序的概念，一个过滤器被保证（如果指定的话。参见[接口](http://msdn.microsoft.com/en-us/library/gg402066%28v=vs.108%29.aspx)上的[`Order`属性](http://msdn.microsoft.com/en-us/library/system.web.mvc.imvcfilter.order%28v=vs.108%29.aspx)）如果指定的话以一定的顺序执行。[`IMvcFilter`](http://msdn.microsoft.com/en-us/library/gg402066%28v=vs.108%29.aspx)

鉴于此，必须解决的问题是：

*   对于现有的非异步过滤器（至少没有以这种方式*实现*，因为没有其他方法），它们是自己完成任务还是继续前一个任务？这是一个需要回答的重要问题，因为您必须权衡不在另一个线程上继续下一个过滤器与在其他请求可以使用它时保持该线程的好处。

*   对于指定了相同顺序的过滤器，它们是并行执行还是一个接一个地执行？使方法异步打开了这种可能性（即使它以前可以使用非异步签名完成）并且它绝对是一种架构更改，可能会对性能和预期结果产生影响。这里的答案不是那么简单，必须基于测试和向后兼容性。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-06-30T05:53:43.443

你不能有异步*过滤器*，但你可以有异步*事件处理程序*。

异步事件处理程序可以完成繁重的异步工作，写入`HttpApplication.HttpContext.Items`，然后您的同步过滤器可以对结果进行后处理或验证。

您可以[在 Global.asax.cs 中注册事件处理程序](https://stackoverflow.com/a/22424797/12534)，或者[创建并注册一个 HTTP 模块](https://evandontje.com/2017/08/15/solutions-for-async-await-in-mvc-action-filters/)。

（所有过滤器都在 PreRequest 和 PostRequest 事件之间执行。）

# vb.net - VB.NET LINQ 按多列分组

> ID：12482339
> 
> 赞同：2
> 
> 时间：2012-09-18T17:50:40.263
> 
> 标签：vb.net, linq, group-by

我有以下 LINQ 代码，它有语法错误，我不知道如何修复它

```
 Dim query =
        From row In mainDatatable.AsEnumerable

    'the syntax Error is in the following line
      Group row By new  { row.Field(Of Double)("cprice") , row.Field(Of Integer)("ccategory")} 
Into ProductGroups
    '**************************

                Dim grpNumber = 1
                For Each grp In query
                    For Each row In grp.ProductGroups
                        row.SetField("gnum", grpNumber)
                    Next
                    grpNumber += 1
                Next

            End Sub 
```

那我做错了什么？

这是表格的样子，我想按 cprice 和 ccategory 列分组

```
+---------------+---------------+-----------+------+
| Product Name  | cprice        | ccategory | gnum |
+---------------+---------------+-----------+------+
| Skirt Red     |            99 |         1 |      |
| Jeans Blue    |            49 |         2 |      |
| Jeans Black   |            49 |         2 |      |
| Skirt Blue    |            99 |         1 |      |
| T-shirt White |            20 |         2 |      |
| T-shirt Green |            20 |         2 |      |
| Jeans Grey    |            49 |         2 |      |
+---------------+---------------+-----------+------+ 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-18T18:53:55.833

试试这个：

```
new with { Key.Price = row.Field(Of Double)("cprice") ,
           Key.Category = row.Field(Of Integer)("ccategory") 
```

使用`Key`修饰符，这将创建一个匿名类型，该类型基于[其成员的相等性](https://stackoverflow.com/a/21703771/861716)来实现相等。

# mysql - 在 ColdFusion 9 中将 HTML 格式的文本转换为常规文本

> ID：12482341
> 
> 赞同：2
> 
> 时间：2012-09-18T17:51:02.840
> 
> 标签：mysql, apache-flex, coldfusion, coldfusion-9

一个应用程序由作为前端的 Flex、作为中间层的 ColdFusion 9 和作为后端的 MySQL 5 组成。

MySQL 表包含一些包含 HTML 格式的字段。因此，如果一个字段具有值字符串“测试记录”，它将被存储 `<TEXTFORMAT LEADING="2"><P ALIGN="LEFT"><FONT FACE="Arial" SIZE="12" COLOR="#0B333C" LETTERSPACING="0" KERNING="0">Test Record<FONT SIZE="8"></FONT></FONT></P></TEXTFORMAT>` 在 MySQL 表中

现在，该字段的值正在 PDF 文档中打印为

```
<cfdocument format="pdf" filename="#report_filename_format#" orientation="landscape"
overwrite="yes"
marginbottom="0" marginleft="0" marginright="0" margintop="0"
pagetype="legal">

<tr>
<td width="20%" style="background-color:##CCCCCC; font-weight:bold; text-transform:uppercase; vertical-align:top;">
Value
</td>
<td width="80%">#printrecord.field_value#</td>
</tr> 
```

由于字段值以 HTML 格式存储，因此占用的空间更多，并且无法控制打印文本的字体类型和字体大小。

1.  ColdFusion 9 中是否有任何函数可以将字段的值转换为常规文本（没有 HTML 格式），这样如果“测试记录”无论是存储为字体大小 10 还是字体大小 30，都将打印相同的内容？

2.  我正在考虑一种方法是在 Flex 应用程序中打印记录，使用 TextArea 控件（在 Flex 中）的 field.text 属性转换为常规文本，然后将转换后的值传递给 ColdFusion 以在 PDF 文档中打印. 还有其他更好的选择吗？

任何建议，将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-18T22:36:53.230

另一种方法是使用像[jsoup](http://jsoup.org)这样的 HTML 解析器。

如果 HTML 不可预测或可能无效，则特别推荐这样做，因为它将以与浏览器相同的方式处理此问题（而正则表达式只是模式匹配；它实际上并不知道什么是/不是标签）。

```
<cfset data = '<TEXTFORMAT LEADING="2"><P ALIGN="LEFT"><FONT FACE="Arial" SIZE="12" COLOR="##0B333C" LETTERSPACING="0" KERNING="0">Test Record<FONT SIZE="8"></FONT></FONT></P></TEXTFORMAT>' />

<cfset jsoup = createObject('java','org.jsoup.Jsoup') />

<cfset text = jsoup.parse(data).text() />

<cfdump var=#text# /> 
```

jsoup 行可以执行一次并存储在例如应用程序范围中。此外，您需要 jsoup jar 才能使其工作 - 对于 CF9，您需要将其复制到 {coldfusion}/lib 目录中，然后重新启动服务器。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-18T19:14:55.223

其实“解决方案”很简单：

```
<cfscript>
  data   = '<TEXTFORMAT LEADING="2"><P ALIGN="LEFT"><FONT FACE="Arial" SIZE="12" COLOR="##0B333C" LETTERSPACING="0" KERNING="0">Test Record<FONT SIZE="8"></FONT></FONT></P></TEXTFORMAT>';
  regex  = "<(.|\n)*?>";
  result = reReplaceNoCase(data, regex, "", "all");

  writeOutput(result);
</cfscript> 
```

我在示例的 HTML 中添加了一个附加哈希标记以避免语法错误。从您所说的来看，我认为无论如何这将由数据库查询获取。

另外（现在挑剔！）我建议用新值更新数据库，如果可以的话，摆脱内联样式以支持 CSS ;-)

# objective-c - 如何使用 parse.com 和 facebook 3.0 sdk 获取共享对话框

> ID：12482351
> 
> 赞同：1
> 
> 时间：2012-09-18T17:51:47.533
> 
> 标签：objective-c, ios, facebook, share, parse-platform

我似乎找不到有关如何使用包含 fb 3.0 的 parse sdk 打开共享对话框的信息。我可以使用 facebook 登录，并且实际上找到了一种在没有对话框的情况下发布的方法，但仍然希望有对话框，以便人们可以添加评论，并且它与 facebook 上的图像一起出现。这就是我到目前为止所拥有的。@"publish_stream",@"publish_actions" 允许我在没有对话框的情况下发布

```
 logInController.facebookPermissions = [NSArray arrayWithObjects:@"user_about_me",@"friends_about_me",@"publish_stream",@"publish_actions", nil]; 
```

这是发布

```
PF_FBRequest *request = [PF_FBRequest requestForPostStatusUpdate:[self.Excerpt objectForKey:@"text"]];
                [request startWithCompletionHandler:^(PF_FBRequestConnection *connection, id result, NSError *error){
                    NSLog(@"error %@",error);

                }]; 
```

我找到了从 facebook 网站打开对话框的代码，但我不确定如何获取 PF_Facebook 对象的实例，以便我可以打开对话框。我可以尝试做

```
PF_Facebook *fb = [[PF_Facebook alloc]initWithAppId:<#(NSString *)#> andDelegate:<#(id<PF_FBSessionDelegate>)#>; 
```

但这似乎不对，因为我已经在 appdelegate 中初始化了它

//更新我能够使用此代码获取对话框

```
NSMutableDictionary *params = [NSMutableDictionary dictionaryWithObjectsAndKeys:
                                   @"Facebook SDK for iOS", @"name",
                                   @"Build great social apps and get more installs.", @"caption",
                                   @"The Facebook SDK for iOS makes it easier and faster to develop Facebook integrated iOS apps.", @"description",
                                   @"https://developers.facebook.com/ios", @"link",
                                   @"https://raw.github.com/fbsamples/ios-3.x-howtos/master/Images/iossdk_logo.png", @"picture",
                                   nil];
    //publishes text on facebook
    PF_FBSession *session = [PFFacebookUtils session];

    PF_Facebook *fb = [[PF_Facebook alloc]initWithAppId:session.appID andDelegate:nil];
    [fb dialog:@"feed" andParams:params andDelegate:self]; 
```

但问题是该人在对话框中获得登录页面，即使他已经在应用程序中进行了身份验证

任何建议将不胜感激！谢谢你！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-27T10:04:53.620

要设置`PF_Facebook`对象，您还需要提供访问令牌和到期日期信息，如下所示：

```
PF_FBSession *session = [PFFacebookUtils session];  
PF_Facebook *facebook = [[PF_Facebook alloc] initWithAppId:session.appID 
                                               andDelegate:nil];

// Store the Facebook session information
facebook.accessToken = session.accessToken;
facebook.expirationDate = session.expirationDate; 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-28T09:36:50.313

无需创建新会话，您只需使用“facebook”类方法即可获取已配置的 PF_Facebook 对象

```
 PF_Facebook *facebook = [PFFacebookUtils facebook];
NSMutableDictionary *parameters = [NSMutableDictionary dictionaryWithObjectsAndKeys:@"Check out this great app", @"message", nil]:

[facebook dialog:@"apprequests" andParams:parameters andDelegate:nil]; 
```

# linux - 如何使用 shell 解析 diskstats 并以 JSON 格式输出？

> ID：12482359
> 
> 赞同：1
> 
> 时间：2012-09-18T17:52:11.600
> 
> 标签：linux, bash, shell, scripting

使用 bash 脚本，我试图从 /proc/diskstats 获取所有物理磁盘

```
 8       0 sda 14256 20634 1376722 133628 279800 2362075 21135024 2133492 0 261052 2259536
   8       1 sda1 14105 20634 1375514 133520 279800 2362075 21135024 2133492 0 261036 2259432
   2       0 fd0 0 0 0 0 0 0 0 0 0 0 0 
```

并以如下格式回显他们的名字

```
{
  "data":[
  { "{#DISK}":"sda"},
  { "{#DISK}":"sdb"},
  ]
} 
```

我正在尝试以 Linux 2.6+ 系统支持的方式执行此操作。我还想避免可能出现在 diskstats 中的分区，这些分区有 4 个字段而不是磁盘的 11 个字段。

编辑：

我可以得到磁盘名称

```
cat /proc/diskstats | awk '{print $3}' 
```

或者

```
cat /proc/diskstats | head -1 | awk '{print $3}' 
```

但我不确定如何迭代和格式化它。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-18T19:13:57.923

假设您的设备名称中没有双引号（trollface.jpg），您可以为此坚持使用 awk。

```
BEGIN {
  print "{"
  printf "  \"data\": ["
  first=1
}

!first {
  printf ","
}

NF == 14 {
  printf "\n  { \"{#DISK}\":\""$3"\"}"
  first=0
}

END {
  print "\n  ]"
  print "}"
} 
```

# c++ - ctypes 类成员访问 segfaulting

> ID：12482364
> 
> 赞同：4
> 
> 时间：2012-09-18T17:52:38.807
> 
> 标签：c++, python, c, ctypes

我对在 python 中使用 c++ 类很感兴趣。查看[从 python 调用 C/C++？](https://stackoverflow.com/questions/145270/calling-c-c-from-python)，我决定试试ctypes。但是，当我尝试更改类成员的值时会出现段错误。

这是一个重现我的问题的简单示例：

C/C++ 方面：

```
#include <iostream>

class Foo{
    private:
        int mValue;
    public:
        void bar(){
            std::cout << "Hello" << std::endl;
        }
        void setValue(int inValue) {
            mValue = inValue;
            std::cout << "Value is now: " << mValue << std::endl;
        }
        void setValue2() {
            mValue = 2;
            std::cout << "Value is now: " << mValue << std::endl;
        }
};

extern "C" {
    Foo* Foo_new(){ return new Foo(); }
    void Foo_bar(Foo* foo){ foo->bar(); }
    void Foo_setValue(Foo* foo, int v) { foo->setValue(v); }
    void Foo_setValue2(Foo* foo) { foo->setValue2(); }
} 
```

代码在 OSX 上编译：

```
g++ -c -fPIC foo.cpp -o foo.o && g++ -shared -Wl -o libfoo.dylib  foo.o 
```

蟒蛇方面：

```
from ctypes import *
lib = cdll.LoadLibrary('./libfoo.dylib')

class Foo(object):
    def __init__(self):
        self.obj = lib.Foo_new()
    def bar(self):
        lib.Foo_bar(self.obj)
    def set(self, v):
        lib.Foo_setValue(self.obj, v);
    def set2(self):
        lib.Foo_setValue2(self.obj); 
```

我可以毫无问题地调用 bar，但是如果我调用 set 或 set2，则会出现段错误。

```
f = Foo()
f.bar()  # Ok
f.set(3) # Segfault 
```

显然，我错过了一些东西。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-19T00:39:59.877

使用以下解决了问题：

```
def __init__(self):
    lib.Foo_new.restype = c_void_p # Needed
    self.obj = lib.Foo_new()

def set(self, v):
    lib.Foo_setValue(c_void_p(self.obj), v) # c_void_p needed 
```

仔细阅读，这似乎是一个 64 位指针问题。

# multithreading - 使用“Parallel.For”时，并非所有项目都在绘制

> ID：12482370
> 
> 赞同：1
> 
> 时间：2012-09-18T17:52:52.210
> 
> 标签：multithreading, c#-4.0, mono, monodevelop

我正在构建一个桌面应用程序，它在绘图区域上打印一系列矩形。此应用程序是使用 MONO C# 构建的。

我使用普通的“FOR”循环没有问题，我得到了预期的结果。

当我使用正常的 FOR 循环时，流动是输出

![在此处输入图像描述](../Images/419227e489ab6220a35be4bcc358a6de.png)

当我使用正常的 Parallel.For 循环时，流动是输出

![在此处输入图像描述](../Images/cb01ffb71a1825a0d15e3eba2b36b10d.png)

正如我们所看到的，其中一些矩形丢失了。

我正在使用 ConcurrentQueue 来保存创建的矩形并将相同的队列传递给其他函数以将其打印在绘图区域上。

以下是代码。

```
 public static void DrwaWall (DrawingArea drawArea, string compLevel)
    {
        house.Rectangle rect = new house.Rectangle ();
        house.DrawHouse DrawHouse = new house.DrawHouse ();
        ConcurrentQueue<house.Rectangle> WallHouseQ = new ConcurrentQueue<house.Rectangle> ();
        PointD p1, p2, p3, p4;
        p1 = new PointD (55, 250);
        p2 = new PointD (65, 250);
        p3 = new PointD (65, 90);
        p4 = new PointD (55, 90);
        rect = new house.Rectangle (p1, p2, p3, p4);
        WallHouseQ.Enqueue (rect);
        Parallel.For (0, 27, (i) => {
            p1.X += 10;
            p2.X += 10;
            p3.X += 10;
            p4.X += 10;
            rect = new house.Rectangle (p1, p2, p3, p4);
            Helper.wastetime (compLevel);
            WallHouseQ.Enqueue (rect);
            Gtk.Application.Invoke (delegate {
                if (drawArea == null)
                    return;
                Cairo.Context ct = Gdk.CairoHelper.Create (drawArea.GdkWindow);
                DrawHouse = new house.DrawHouse (ct, WallHouseQ);
                DrawHouse.DrawRectangles ("Wall");
                ((IDisposable)ct.Target).Dispose ();
                ((IDisposable)ct).Dispose ();
                }
            );
            }
        );
    } 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-18T17:58:27.120

您的`p1`// `p2`/变量不是线程安全的`p3`，`p4`因此您可能会在现有矩形的顶部进行绘制。

您可以根据当前索引计算适当的位置，而不是每次都增加。例如：

```
Parallel.For(0, 27, i =>
{
    // Make new points...
    PointD p1New = new PointD(55 + (i+1)*10, 250);
    //...

    // Make sure you don't share variables here, either - ie: make a new rect from the new points
    house.Rectangle rectNew = new house.Rectangle (p1New, p2New, p3New, p4New); 
```

# php - 如果用户离开页面/系统停止，则自动回写

> ID：12482373
> 
> 赞同：0
> 
> 时间：2012-09-18T17:53:07.437
> 
> 标签：php, mysql, html

我一直在设计一个用于收集数据的站点，但我正在为其设计的人想要某种形式的冗余，以防窗口关闭或系统关闭。如果用户断开连接一段时间，或者如果他们关闭浏览器窗口/关闭系统而不提交数据，是否有任何方法可以将收集的数据写入 MYSQL 数据库？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-18T18:01:45.217

网络是无状态的和断开连接的——所以所有数据都将（或者更确切地说：应该）在页面请求之间持久化。

我假设您有一个由 PHP 生成的网页，其中包含一个冗长的数据输入表单，并且您希望在用户关闭浏览器窗口时将数据保存在该表单中 - 解决方案是使用客户端脚本使用表单中的当前数据轮询服务器，或者至少挂钩到窗口关闭事件。

实际实施是留给 OP 的任务。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-18T18:00:48.303

部分防止这种情况的最常见技术是 Web 应用程序使用心跳功能，该功能通过 javascript 以恒定间隔触发并向服务器发送请求，pe 以显示用户仍在登录 - 或者，在您的在这种情况下，也可以提交已经输入表单字段的数据。

将其视为 ajax 驱动的自动保存功能！

为此，您必须在代码中添加一些 javascript，但常用的 javascript 库，如 jquery 或 mootools，都有很好的文档记录，并提供了很多示例如何执行此类操作。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-18T18:01:28.687

这不能仅使用纯 HTML 页面来完成 - 如果用户不提交表单，您的服务器将不知道他们输入了什么。

但是，您可以在页面上放置一些 Javascript，每隔几秒（或每隔几次按键或点击）进行一次 AJAX 调用。这个想法是让 JavaScript 无形地将整个表单提交到 PHP 页面，该页面将其保存到某种“保存区域”中。

如果用户随后提交了表单，则可以清除保留区域，但如果他们从未这样做过，则保留区域中的数据会告诉您他们去了哪里。

# php - 用户管理和访问框架

> ID：12482374
> 
> 赞同：0
> 
> 时间：2012-09-18T17:53:18.503
> 
> 标签：php, acl, membership

我正在寻找将图像上传和评论区添加到现有网站。不想重新发明轮子我想知道是否有任何“插入”方式来处理用户管理和安全性。

我已经开始研究像 Codeigniter 这样的框架，但据我所知，它们需要安装在系统的根目录中，正如我所说，该站点的其余部分已经存在。

我还注意到 Symfony 有一个独立的 PHP 安全套件，但我没有看到用户管理组件。

我想进一步了解 DRY 的“重新发明轮子”......是否有任何已经存在的开源框架具有成员页面，他们可以在其中上传图像。我目前在 php 工作，但我愿意接受建议。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-03T00:39:55.617

好吧，看来你需要像[cms](http://en.wikipedia.org/wiki/Content_management_system)这样的东西，

你是从框架（cms 做的）中问这个的。我建议你使用 cms，对于 php 有很多 cms：

*   [德鲁普](http://drupal.org)
*   [Joomla](http://joomla.org)

因此，您无需为您的要求编写任何代码，只需将模块放入文件夹中，然后打开它们。

如果您真的想要框架，那么我建议您使用基于模块的框架，例如[yii](http://yiiframework.com)。我有大量的模块，你可以包含和使用它，但它们并不是 cms 的模块。在 yii 中它被称为[exnetnsion](http://www.yiiframework.com/extensions/) 这里是一些扩展：

*   [yii-用户管理](http://www.yiiframework.com/extension/yii-user-management/)
*   [注释](http://www.yiiframework.com/extension/comments-module)

如果我是你，我会选择cms's。对于这种干燥的东西，它们是最好的并且为此目的而内置。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-03T00:19:41.033

如果您想要的只是上传图片并让用户发表评论，那么为什么不将现有图片库的功能合并到您的应用程序中呢？其中大多数已经包括用户管理。这个网站列出了一些比较常见的画廊： http: [//www.design3edge.com/2010/08/26/best-free-and-open-source-php-image-galleries/](http://www.design3edge.com/2010/08/26/best-free-and-open-source-php-image-galleries/)。该列表中一定有您喜欢的。

# html - 垂直对齐：容器内顶部两个浮动 div

> ID：12482383
> 
> 赞同：0
> 
> 时间：2012-09-18T17:54:06.470
> 
> 标签：html, css, css-float, position, vertical-alignment

`position:`我已经尝试了我能想到的每一种组合来对齐`#blog`并`#sidebar`沿着它们的顶部边缘，但我所做的一切似乎都不起作用。有任何想法吗？

CSS：

```
#blog-container {
    margin: 0 auto;
    width: 960px;
}
#blog {
    float: left;
    margin-top: 80px;
    position: relative;
    width: 620px;
}
#sidebar {
    float: right;
    margin-top: 80px;
    position: relative;
    width: 300px;
} 
```

HTML：

```
<div id="blog-container">
    <div id="blog">
        <content>
    </div><!-- end blog -->
    <div id="sidebar">
        <content>
    </div><!-- end sidebar -->
</div><!-- end blog-container --> 
```

![当前的](../Images/3be886e50c6a96518f580602ae49269c.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-18T21:56:41.810

首先包含侧边栏（在 HTML 中）并使其向右浮动，然后是博客并将其向左浮动。

```
<div id="blog-container">
    <div id="sidebar">
        <content/>
    </div><!-- end sidebar -->
    <div id="blog">
        <content/>
    </div><!-- end blog -->
</div><!-- end blog-container --> 
```

# php - php - 在数组中查找与模式匹配的键

> ID：12482388
> 
> 赞同：22
> 
> 时间：2012-09-18T17:54:26.590
> 
> 标签：php

我有一个看起来像这样的数组：

```
 Array ( [2.5] => ABDE [4.8] => Some other value ) 
```

如何找到键与模式匹配的任何键/值对？我会知道密钥中第一个数字的值，但不知道第二个数字。例如，使用前缀“2.”，我希望能够以某种方式找到键“2.5”并返回键和值“ABDE”。

我正在考虑使用具有如下模式的正则表达式：

```
$prefix = 2;
$pattern = '/'.$prefix.'\.\d/i'; 
```

然后遍历数组并检查每个键。（顺便说一下，仅出于演示目的，$prefix 已被硬编码为 2，但在实际系统中，这是用户输入提供的值）。

我想知道是否有更简单的方法可以做到这一点？

谢谢。

* * *

## 回答 #1

> 赞同：58
> 
> 时间：2012-09-18T18:04:55.083

我认为你需要这样的东西：

```
$keys = array_keys($array);
$result = preg_grep($pattern, $keys); 
```

结果将是一个数组，其中包含与正则表达式匹配的所有键。这些键可用于检索相应的值。

看看[preg_grep](http://php.net/manual/en/function.preg-grep.php)函数。

* * *

## 回答 #2

> 赞同：18
> 
> 时间：2012-09-18T17:59:16.513

您可以简单地遍历数组并检查键

```
$array = array(...your values...);

foreach($array as $key => $value) {
    if (preg_match($pattern,$key)){
        // it matches
    }
} 
```

您可以将其包装在一个函数中并将您的模式作为参数传递

* * *

## 回答 #3

> 赞同：13
> 
> 时间：2015-07-16T15:02:42.960

老问题，但这是我喜欢做的事情：

```
$array = [ '2.5' => 'ABDE', '4.8' => 'Some other value' ]; 
```

`preg_grep`+`array_keys`将找到所有键

```
$keys = preg_grep( '/^2\.\d/i', array_keys( $array ) ); 
```

您可以添加`array_intersect_key`和`array_flip`提取与模式匹配的数组切片

```
$vals = array_intersect_key( $array, array_flip( preg_grep( '/^2\.\d/i', array_keys( $array ) ) ) ); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2017-11-16T15:52:05.420

那是我的方式

```
$data = ["path"=>"folder","filename"=>"folder/file.txt","required"=>false];

// FIRST WAY

$keys = array_keys($data);
if (!in_array("path", $keys) && !in_array("filename",$keys) && !in_array("required",$keys)) {
    return myReturn(false, "Dados pendentes");
}

// SECOND WAY

$keys = implode("," array_keys($data));
if (!preg_match('/(path)|(filename)|(required)/'), $keys) {
    return myReturn(false, "Dados pendentes");
} 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2019-06-03T13:14:34.003

对于遇到相同问题的未来程序员。这是一个更完整的解决方案，它不使用任何循环。

```
 $array = ['2.5'=> 'ABCDE', '2.9'=>'QWERTY'];
    $keys = array_keys($array);
    $matchingKeys = preg_grep('/^2\.+/', $keys);
    $filteredArray = array_intersect_key($array, array_flip($matchingKeys));
    print_r($filteredArray); 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2018-09-03T14:58:12.163

要获得具有匹配键的数组的一部分，您还可以编写

```
$matching_array = array_flip(preg_grep($pattern, array_flip($your_array))); 
```

如果您的数组太大，这可能只会导致性能问题。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2021-01-18T19:22:34.120

PHP中有用于正则表达式的[T-Regx](https://t-regx.com/)库，它是kas`preg::grep_keys()`方法。

```
<?php
$array = [2.5 => 'ABDE', 4.8 => 'Some other value'];

preg::grep_keys("/$prefix\.\d/i", $array); 
```

# sharepoint - 如何使用 SuiteBarBrandingElement？

> ID：12482394
> 
> 赞同：2
> 
> 时间：2012-09-18T17:54:48.140
> 
> 标签：sharepoint, sharepoint-2013

我正在查看 SharePoint 2013 (v15.master) 中的默认母版页，那里有一个服务器控件`<SharePoint:SuiteBarBrandingElement runat="server"/>`，页面上呈现为“SharePoint”。我不知道在哪里将其更改为其他内容（无需编写代码）。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-08T14:00:33.370

信息很少，但似乎没有任何基于 UI 的方式来获取此设置。但它是一个设置（实际上是 上的一个属性`SPWebApplication`）。

请参阅此（无用）文档：[SPWebApplication.SuiteBarBrandingElementHtml](http://msdn.microsoft.com/en-us/library/microsoft.sharepoint.administration.spwebapplication.suitebarbrandingelementhtml%28v=office.15%29.aspx "SPWebApplicationBrandingElementHtml @ MSDN")

就像您指出的那样，您可以编写一个解决方案来修改此属性，但我们也可以使用一些 PowerShell 来解决它。

在 SharePoint 2013 命令行管理程序中执行此操作：

```
$app = Get-SPWebApplication http://my.sp2013.site/
$app.SuiteBarBrandingElementHtml 
```

产生这个输出：

```
<div class="ms-core-brandingText">SharePoint</div> 
```

这意味着我们可以在这里分配一个新值：

```
$app.SuiteBarBrandingElementHtml = '<div class="ms-core-brandingText">Hello World!</div>'
$app.Update() 
```

除此之外，构建一个通过管理 UI 公开属性以更新它的解决方案将非常方便。我不知道为什么微软没有开箱即用地提供这个；似乎这就是意图（在某些时候）。

# wix - 将 WiX UI 迁移到刻录

> ID：12482395
> 
> 赞同：2
> 
> 时间：2012-09-18T17:54:53.393
> 
> 标签：wix, windows-installer, burn

我有一个使用 WixUI_Mondo_MyApp.wxs 文件的自定义 UI 的工作 WiX 安装程序。我必须扩展我的安装程序以运行另一个 exe 安装程序。我了解 Burn 是做到这一点的方法。

我创建了一个 Burn 项目，将我的原始 MSI 与自定义 UI（使用 DisplayInternalUI="yes"）链接起来，效果很好。但我不希望弹出两个 UI（Burn 默认 UI 和我的 MSI UI），我需要从 MSI UI 获取一些信息以确定我是否应该安装另一个 exe（它将被列为其中之一特征）。

我想正确的解决方案是将我的 UI 代码从我的 MSI 迁移到我的 Burn 项目，但我找不到描述如何执行此操作的文档。

提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-18T22:00:14.030

没有迁移路径；MSI UI 使用 MSI UI 表进行声明，Burn 支持引导程序应用程序中的任意代码。如果您的 UI 自定义中有任何逻辑，则必须编写自定义引导程序应用程序才能将其打包。

# c# - GridView.Databind() 不适用于对象列表

> ID：12482396
> 
> 赞同：2
> 
> 时间：2012-09-18T17:55:03.460
> 
> 标签：c#, asp.net, list, object, gridview

我遇到的问题是：我有一个带有列表对象的 GridView 作为其数据源，它绑定没有问题。我有一个具有事件的 DropDownList `SelectedIndexChanged`，并且通过此事件，我将一个新对象添加到列表中，添加后我想做一个`GridView1.Databind()`，以便新对象出现在 GridView 中。

但这不起作用，在我执行`GridView1.Databind()`GridView 中的数据后丢失了。它甚至显示`EmptyDataText`，但如果我刷新页面，一切都会出现。此外，DropDownList 使用对象列表作为 DataSource 并且应该使用`DropDownList1.Databind()`但它也不起作用。在 DataBinding 之后它具有相同的数据，我至少纠正 DropDownList 所做的就是设置`DropDownList again manually.DataTextField = object.attribute1`and `DropDownList.DataValueField = object.attribute2`。但是对于我被卡住的 GridView，有人可以解释该方法如何`DataBind`与对象列表一起使用吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-18T18:17:31.870

首先刷新`asp:GridView`绑定到列表的 gridView.DataSource 属性。

```
 gridView.DataSource = mylist;
 gridView.DataBind(); 
```

对于非数据库数据，这意味着列表本身必须保存在会话变量或 ViewState 中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-18T18:00:39.367

我记得很久以前有这个问题。我猜问题是您在 UpdatePanel 中没有 GridView。

如果是这种情况，GridView 不会立即刷新并显示更改。下拉菜单的位置有些棘手（我认为它也必须在面板中），但我相信您可以通过在 UpdatePanel 上进行一些快速搜索来弄清楚。

# objective-c - 创建tableview后如何解决IOS异常？

> ID：12482397
> 
> 赞同：1
> 
> 时间：2012-09-18T17:55:13.733
> 
> 标签：objective-c, ios, uitableview

创建第二个 tableviewcontroller 后，单击连接到此 tableView 的 tabbarItem 时出现以下异常：

```
2012-09-18 10:45:33.202 testStoryboard[5792:14203] *** Terminating app due to uncaught exception 'NSInternalInconsistencyException', reason: 'Requesting the window of a view (<UITableViewCell: 0x6b80190; frame = (0 0; 0 0); transform = [0, 0, 0, 0, 0, 0]; alpha = 0; opaque = NO; autoresize = W; layer = (null)>) with a nil layer. This view probably hasn't received initWithFrame: or initWithCoder:.' 
*** First throw call stack:
(0x14b2022 0xeb2cd6 0x145aa48 0x145a9b9 0x4b7c4 0x4d612 0x5246f 0x4c01b 0x6c494 0x9c838 0xb00e6 0xb03ce 0x9bcbd 0xaa6f1 0x53d21 0x14b3e42 0x1d83679 0x1d8d579 0x1d124f7 0x1d143f6 0x1da1160 0x25f30 0x148699e 0x141d640 0x13e94c6 0x13e8d84 0x13e8c9b 0x139b7d8 0x139b88a 0x15626 0x20fd 0x2065)
terminate called throwing an exception(lldb) 
```

编辑：这是我的代码：

```
//  SecondTableViewController.m

#import "SecondTableViewController.h"

@interface SecondTableViewController ()

@end

@implementation SecondTableViewController

- (id)initWithStyle:(UITableViewStyle)style
{
     self = [super initWithStyle:style];
     if (self) {
        // Custom initialization
     }
     return self;
}

- (void)viewDidLoad
{
   [super viewDidLoad];

   //Initialize the array.
   myArray2 = [[NSMutableArray alloc] init];

   //Add items
   [myArray2 addObject:@"Iceland"];
   [myArray2 addObject:@"Greenland"];
   [myArray2 addObject:@"Switzerland"];
   [myArray2 addObject:@"Norway"];
   [myArray2 addObject:@"New Zealand"];
   [myArray2 addObject:@"Greece"];
   [myArray2 addObject:@"Rome"];
   [myArray2 addObject:@"Ireland"];

   //Set the title
   self.navigationItem.title = @"Countries";
}

- (void)viewDidUnload
{
    [super viewDidUnload];
    // Release any retained subviews of the main view.
    // e.g. self.myOutlet = nil;
}

- (BOOL)shouldAutorotateToInterfaceOrientation:   (UIInterfaceOrientation)interfaceOrientation
{
    return (interfaceOrientation == UIInterfaceOrientationPortrait);
}

#pragma mark - Table view data source

- (NSInteger)numberOfSectionsInTableView:(UITableView *)tableView
{
    // Return the number of sections.
    return 1;
}

- (NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section
{
    // Return the number of rows in the section.
    return [myArray2 count];
}

- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
    static NSString *CellIdentifier = @"Cell";
    UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier];
    if(cell == nil)
    {
        cell = [UITableViewCell alloc];
    }
    cell.textLabel.text = [myArray2 objectAtIndex:indexPath.row];
    return cell;
}

#pragma mark - Table view delegate

- (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath
{
    // Navigation logic may go here. Create and push another view controller.
    /*
     <#DetailViewController#> *detailViewController = [[<#DetailViewController#> alloc] initWithNibName:@"<#Nib name#>" bundle:nil];
     // ...
     // Pass the selected object to the new view controller.
     [self.navigationController pushViewController:detailViewController animated:YES];
     */
}

@end 
```

我对IOS很陌生，有人可以让我朝着正确的方向前进吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-18T18:45:08.000

您对单元格的初始化不完整，您必须初始化单元格，而不仅仅是分配它。

```
cell = [[UITableViewCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:CellIdentifier]; 
```

# maven - 在 NetBeans Maven 平台项目上安装了 FileLocator

> ID：12482403
> 
> 赞同：1
> 
> 时间：2012-09-18T17:55:42.393
> 
> 标签：maven, netbeans-platform

我试图弄清楚在哪里/如何在 ANT 项目上创建等效的发布文件夹，以便我的 Maven 应用程序可以使用 InstalledFileLocator 在其中找到文件。

我找到了[http://mojo.codehaus.org/nbm-maven/nbm-maven-plugin/nbm-mojo.html#nbmResources](http://mojo.codehaus.org/nbm-maven/nbm-maven-plugin/nbm-mojo.html#nbmResources)但我不能让它工作。我在应用程序、模块等中尝试过，但没有运气。

有什么提示吗？

**编辑：** 可以在[Marauroa](https://javydreamercsw@bitbucket.org/javydreamercsw/simple-marauroa-rcp) -Server-Manager 文件夹中找到代码。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-19T17:22:02.843

这是如何完成的：

```
 <plugin>
            <groupId>org.codehaus.mojo</groupId>
            <artifactId>nbm-maven-plugin</artifactId>
            <extensions>true</extensions>
            <configuration>
                ...
                <nbmResources>                     
                    <nbmResource>
                        <directory>${basedir}/resources</directory>
                        <targetPath>resources</targetPath>
                        <includes>
                            <include>*.gif</include>
                        </includes>
                    </nbmResource>
                </nbmResources> 
                ...
            </configuration>
        </plugin> 
```

就我而言，我缺少 nbmR​​esource 元素周围的 nbmR​​esources 标记。

# ember.js - 如何解决代码异味：输出格式的计算属性

> ID：12482409
> 
> 赞同：0
> 
> 时间：2012-09-18T17:56:10.343
> 
> 标签：ember.js

嗨，我有这个 ember 模型。likeMessage 计算属性正在构建我在模板中使用的字符串。（见下文）这可行，但我不喜欢在我的模型中使用这个“视图层代码”。什么是更好的方法？

```
/**
 * @class
 * @name Entry
 */
James.Entry = Ember.Object.extend(
  /** @lends Entry# */
  {
        likes: [],

        likeMessage: function() {
            var likes = this.get("likes"),
            withNameCount = 0,
            names = [],
            likeCount = likes.length;

            for(;withNameCount < likes.length && withNameCount < 2; withNameCount++) {
                names.push(likes[withNameCount].name);
            }

            if(likeCount == 0) {
                return "Nobody likes this";
            } else if(likeCount == 1) {
                return names[0]+ " likes this";
            } else if(likeCount <= 2) {
                return names.join(" and ")+" like this";
            } else {
                return names.join(", ")+" and "+(likes.length-2)+" others like this";
            }
        }.property("likes")
    }
); 
```

我的模板：

```
Likes:
{{likeMessage}} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-18T21:50:48.940

用于表示的计算属性属于 Ember 的控制器层。要轻松访问模型，您可以使用`Ember.ObjectController`并将`content`属性设置为您正在显示的模型实例。

我最近整理了一个演示文稿，介绍了构建 Ember 应用程序时的去向。也许它可能有用：[http ://www.lukemelia.com/blog/archives/2012/08/23/architecting-ember-js-apps/](http://www.lukemelia.com/blog/archives/2012/08/23/architecting-ember-js-apps/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-18T18:52:28.263

您可以将该方法几乎原样移动到 EntryView，然后在模板中调用**view.likeMessage**。

在不知道您的视图类的情况下，我无法更具体，但通常您会对每个模型都有一个相应的视图（通常是两个，一个“单数”和一个“复数”，用于处理模型的集合或单个实例）。

# c# - 在 Metro XAML 中高效地构建评论树

> ID：12482410
> 
> 赞同：2
> 
> 时间：2012-09-18T17:56:24.940
> 
> 标签：c#, silverlight, xaml, windows-8, microsoft-metro

我正在尝试构建一个“评论控件”（在类似于 Silverlight 的 win8 XAML 应用程序中），它将为用户加载和呈现评论树。

每个评论可以有 0 个或 1+ 个子评论（通过每个评论递归）。

每条评论都会显示一组信息，包括作者、时间、评论本身等。

我最初用来构建它的方法是使用具有“CommentItem”控件绑定的 ListView。

```
<TextBlock Grid.Row="1" TextWrapping="Wrap" Text="{Binding commentText}" FontSize="11" FontFamily="Global User Interface" />
        <ListView Grid.Row="2" x:Name="CommentRepliesList" ItemsSource="{Binding}" >
            <ListView.ItemTemplate>
                <DataTemplate>
                    <local:CommentItem Tag="{Binding}"></local:CommentItem>
                </DataTemplate>
            </ListView.ItemTemplate>
        </ListView> 
```

上面将递归每个评论，应用评论文本，然后为每个评论子创建一个新的评论项，再次递归，等等。

但是，问题是这非常缓慢且性能不佳。

有谁知道更有效的方法来做到这一点？ListView 是用于此的适当控件吗？

# c# - 如何使用 C# 创建 Windows 服务器以通过 FTP 传输文件

> ID：12482413
> 
> 赞同：-1
> 
> 时间：2012-09-18T17:56:34.330
> 
> 标签：c#, .net

如何使用 C# 创建 Windows 服务器以通过 FTP 传输文件？我有一个文件夹，每 x 分钟由我的 ERP 系统生成的 xml 文件提供...我需要通过 FTP 发送到我的外部服务器。我认为每 30 分钟运行一次 Windows 服务并循环浏览此文件夹中的所有文件并通过 FTP 发送就足够了。你能帮助我吗？有什么例子吗？使用 .net vs2k8 是我的开发环境。非常感谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-18T18:21:44.317

How to transfer the file is in the answer from Aghilas

I would create it as a Service so you can have it auto start

Rather than poll the directory you can just use

[FileSystemWatcher Class](http://msdn.microsoft.com/en-us/library/System.IO.FileSystemWatcher.aspx)

Maybe log any failed uploads

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-18T18:03:22.527

您可以尝试使用此代码

```
 FtpWebRequest request = (FtpWebRequest)WebRequest.Create("ftp://....");
            request.Method = WebRequestMethods.Ftp.UploadFile;

            // This example assumes the FTP site uses anonymous logon.
            request.Credentials = new NetworkCredential ("anonymous","...");

            // Copy the contents of the file to the request stream.
            StreamReader sourceStream = new StreamReader("testfile.txt");
            byte [] fileContents = Encoding.UTF8.GetBytes(sourceStream.ReadToEnd());
            sourceStream.Close();
            request.ContentLength = fileContents.Length;

            Stream requestStream = request.GetRequestStream();
            requestStream.Write(fileContents, 0, fileContents.Length);
            requestStream.Close();

            FtpWebResponse response = (FtpWebResponse)request.GetResponse();

            Console.WriteLine("Upload File Complete, status {0}", response.StatusDescription);

            response.Close(); 
```

# ruby-on-rails - 我需要帮助一个查找文本编辑器，它可以上传和保存图像到文件和数据库

> ID：12482415
> 
> 赞同：1
> 
> 时间：2012-09-18T17:56:57.907
> 
> 标签：ruby-on-rails, image, video, wysiwyg

我是 Rails 新手，可以使用一些帮助来选择正确的富文本编辑器。我希望访问者能够使用一种富文本编辑器表单向站点添加内容（文本、图像和视频）。访问者提交后，我需要能够清理内容，将图像/视频保存到公共文件夹，并将文本和这些图像/视频的路径保存到数据库以供将来检索。是否有宝石或宝石组合可以帮助我完成此任务。 

我已经研究过tinymce、ckeditor 和mercury，但似乎没有一个能满足我的需求。Tinymce 和 ckeditor 及其插件需要图像的 URL，这意味着用户必须首先上传图像，然后知道它的路径。这对我的观众来说有点复杂。Mercury 基于 html5，目前不稳定，具体取决于浏览器。还有其他选择吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-18T18:43:06.860

[http://www.queness.com/post/212/10-jquery-and-non-jquery-javascript-rich-text-editors](http://www.queness.com/post/212/10-jquery-and-non-jquery-javascript-rich-text-editors)

我没有深入研究，但我假设这些 jquery/javascript 插件之一是 WYSIWYG HTML 编辑器。

一旦你运行了一个好的客户端 HTML 编辑器，下一部分就是在发送到 rails 应用程序时解析 HTML。

[http://www.rubyinside.com/nokogiri-ruby-html-parser-and-xml-parser-1288.html](http://www.rubyinside.com/nokogiri-ruby-html-parser-and-xml-parser-1288.html)

没用过Nokogiri，但是名字很耳熟，好像用的挺多的。

清理已融入 Rails。默认 sanitize 会去除任何 HTML，但您可以调用 sanitize 告诉它哪些 HTML 元素不被阻止。假设您使用 Nokogiri（或您找到的任何 HTNL 解析器）解析出您允许通过清理的 HTML，您将在从这些元素中提取值时手动清理这些元素。

棘手的部分是消除客户端的“文件选择”操作，因为用户需要选择一个本地图像来放置在 HTML 文档中。我认为您无法消除它，但希望 HTML 编辑器使其尽可能简单。您对此无能为力，如果用户将他的一张图片添加到他将上传的 HTML 文档中，他将不得不在某个时候选择它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-26T04:48:14.233

这是我最接近你描述的东西，我也在寻找类似的东西，所以我会及时通知你:)

[http://youhack.me/2011/07/07/create-a-facebook-post-to-wall-system-using-php-and-jquery-part-2/](http://youhack.me/2011/07/07/create-a-facebook-post-to-wall-system-using-php-and-jquery-part-2/)

# c - #define C 用法，取多个值

> ID：12482420
> 
> 赞同：0
> 
> 时间：2012-09-18T17:57:19.777
> 
> 标签：c, open-source, c-preprocessor

过去，每当我遇到#define 时，它​​都被用作

```
#define MOD 1000000007 
```

在上述情况下，代码中的所有 MOD 实例都被替换为 1000000007。
我是开源开发的新手，正在研究 VLC 媒体播放器的几个视频过滤器。它有多种用途`#define`——

```
//example1
#define MSG_LONGTEXT N_( \
  "Marquee text to display. " \
  "(Available format strings: " \
  "Time related: %Y = year, %m = month, %d = day, %H = hour, " \
  "%M = minute, %S = second, ... " \
  "Meta data related: $a = artist, $b = album, $c = copyright, " \
  "$d = description, $e = encoded by, $g = genre, " \
  "$l = language, $n = track num, $p = now playing, " \
  "$r = rating, $s = subtitles language, $t = title, "\
  "$u = url, $A = date, " \
  "$B = audio bitrate (in kb/s), $C = chapter," \
  "$D = duration, $F = full name with path, $I = title, "\
 "$L = time left, " \
 "$N = name, $O = audio language, $P = position (in %), $R = rate, " \
 "$S = audio sample rate (in kHz), " \
 "$T = time, $U = publisher, $V = volume, $_ = new line) ")

 //example 2
 #define POSY_TEXT N_("Y offset")

 //example 3
 #define TIMEOUT_LONGTEXT N_("Number of milliseconds the marquee must remain " \
                         "displayed. Default value is " \
                         "0 (remains forever).") 
```

有人可以解释这些例子吗

```
#define 
```

和软件开发两者还是提供一些资源？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-18T18:00:06.477

完全一样，唯一的补充就是`\`在下一行中标记了当前行的延续。出于可读性的原因，它在那里。

例如：

```
 #define TIMEOUT_LONGTEXT N_("Number of milliseconds the marquee must remain " \
                         "displayed. Default value is " \
                         "0 (remains forever).") 
```

相当于

```
 #define TIMEOUT_LONGTEXT N_("Number of milliseconds the marquee must remain " "displayed. default value is " "0 (remains forever).") 
```

因此，只要`TIMEOUT_LONGTEXT`出现在代码中，预处理器就会将其替换为`N_("whatever")`.

# jquery - 如果 web 服务返回空结果，如何使用 JSONP 捕获错误

> ID：12482424
> 
> 赞同：0
> 
> 时间：2012-09-18T17:57:56.967
> 
> 标签：jquery, error-handling, jsonp

当 URL 提供的数据不存在时，我想显示错误。我已经尝试使用以下代码，但它不起作用。

```
function getNum() {
    var num = document.getElementById('number').value;
    //alert(number);
    $('#shownum').empty();
    $(document).ready(function() {
        $.jsonp({
            url : 'http://localhost/json/num.php?&idnum='+num,
            callbackParameter : 'callback',
            success : function(data, status) {
                $.each(data, function(i, item) {
                    var a = "";
                    var name = item.name;
                    var dob = item.dob;
                    var addr = item.addr;
                    b +='<br>' + name + '<br>';
                    b +=dob + '<br>';
                    b +=addr + '<br>';

                    $('#shownum').append(b);
                });
            },
            error : function() {
                $('#shownum').append('data not found');
            }
        });
    });
} 
```

例如，如果[URL](http://en.wikipedia.org/wiki/Uniform_Resource_Locator)返回`?(null);`，我如何将错误通知附加到`#shownum id`.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-18T18:07:19.033

来自错误回调的 jQuery Ajax 文档：

> 注意：跨域脚本和 JSONP 请求不调用此处理程序。

您无法使用 jQuery 的本机方法捕获[JSONP](http://en.wikipedia.org/wiki/JSONP)请求的错误。

jQuery-JSONP 似乎为除[Opera](http://en.wikipedia.org/wiki/Opera_%28web_browser%29)之外的所有浏览器启用了错误处理。如果您遇到问题，我建议您在项目的[GitHub页面上打开一个问题。](http://en.wikipedia.org/wiki/GitHub)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-19T10:53:44.463

我处理这个问题的方法是在 JSONP 响应中添加成功字段。试试这样：

```
{"success":false,"response":"data or objects"} 
```

你应该处理你的消息。

第二种方法是处理成功事件并检查响应是否为 200（即成功）或例如 404（url 不存在）。

```
success(data, textStatus, jqXHR) 
```

如果成功出现问题，请尝试此页面：[jQuery Ajax](http://api.jquery.com/jQuery.ajax/)。同样，您感兴趣的参数是 textStatus。

另一种可能性可能是为您的 ajax 调用设置超时：`timeout : 5000,`. 之后，您应该处理错误。当然，您只能猜测为什么会发生超时。

# wordpress - 如何开发像 Brit.co 这样带有“浮动”侧边栏的 WordPress 网站？

> ID：12482425
> 
> 赞同：0
> 
> 时间：2012-09-18T17:57:59.337
> 
> 标签：wordpress

如果您访问 Brit.co，您会注意到侧边栏容器浮动在主页容器内。这允许位于侧边栏内容下方的主页内容包裹在侧边栏下方。

换个说法：一个超高的 WordPress 网站，比如 3000 像素高，侧边栏只有 1000 像素高，侧边栏容器下面有 2000 像素的空白。我正在努力消除它。

现在，我可以在主要内容和侧边栏包装器 (DIV) 下添加容器（例如页脚），但这不是在 brit.co 完成的。

对不起，这让我们感到困惑。通常不是问题 b/c 我们的 WordPress 网站并不高。想知道是否有简单的解决方案！谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-18T18:03:30.393

好像它只是`float:right`在`CSS`？

# java - 在兄弟类中设计继承函数

> ID：12482431
> 
> 赞同：0
> 
> 时间：2012-09-18T17:58:52.267
> 
> 标签：java, inheritance

我有一个类`brotherClass`和一个类`sisterClass`都继承自`parentClass`. 调用的方法`getName()`定义在`parentClass`. 目前，两个子类都调用`getName()`了它们的一些函数的逻辑。

现在，我们的客户希望我们这样做，以便在两者外部都有一个类（？）`brotherClass`并且`sisterClass`调用`getName()`. 这样，两个子类都可以调用该外部函数一次，而不是在它们自己的类中调用两次。

我认为他想节省空间/内存。否则，他提到我应该实现一些`getName()`以某种方式调用 in 的函数`brotherClass()`，并且它`sisterClass`也应该能够访问它。

我对如何继续前进感到非常茫然，我几乎逐字输入了这个。这是我现在在工作中面临的问题的一个非常简化的版本。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-18T20:21:50.617

如果您的所有子类都具有相同的代码，则可以将该通用代码放在超类方法中：

**前**

```
public class HelloWorld {
}

public class Child1 extends HelloWorld {
     public void someLogic() {
          [commonCode]
          ...
     }
}

public class Child2 extends HelloWorld {    
     public void someOtherMethod() {
          [commonCode]
          ...
     }
} 
```

**之后**：

```
public class HelloWorld {
     public void common() {
          [commonCode]
     }
}

public class Child1 extends HelloWorld {
     public void someLogic() {
          super.common();
          ...
     }
}

public class Child2 extends HelloWorld {    
     public void someOtherMethod() {
          super.common();
          ...
     }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-19T06:39:02.620

好吧，您可以做的事情取决于您要实现的逻辑。您可以将带有`getName()`结果的字段添加到您的父类，当您运行兄弟或姐妹方法时，只需检查该字段是否包含任何内容。如果是，则使用那里的值，如果不是，则运行完整的`getName()`逻辑。

如果不适合，另一种方法是创建另一个这样的类：

```
class Container{
    Brother b;
    Sister s;
    void doCalculations(){
        Object result = Parent.getName();
        b.runMethod(result);
        s.runMenthod(result);
} 
```

可能还有其他选择。

# python - ZeroMQ rrclient-broker 不工作

> ID：12482433
> 
> 赞同：0
> 
> 时间：2012-09-18T17:58:57.090
> 
> 标签：python, node.js, zeromq, pyzmq

我正在尝试运行来自[https://github.com/imatix/zguide](https://github.com/imatix/zguide)的 Python 和 Node.JS 示例，用于 client-broker-worker 架构（rrclient、rrworker、rrbroker）。

我可以确认 Python 实现工作正常，Node.JS 实现工作正常，但是当我尝试将 Node.JS rrclient 与 Python rrbroker 结合使用时，整个事情崩溃了，我收到以下错误：

Python 在使用 libzmq.3.dylib 插件时意外退出。

并且代理出现以下错误：断言失败：(prefetched_msg.flags () & msg_t::identity) == 0 (router.cpp:276) Abort trap: 6

似乎 Node.JS 在连接到 Python 时遇到问题。这似乎也提出了基本的 REQ/REP 架构，而不仅仅是客户端代理工作者。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-18T18:11:16.010

似乎重新安装 pyzmq 似乎可以解决问题...

```
sudo pip uninstall pyzmq
sudo pip install pyzmq 
```

哇，干杯！

# arrays - 在汇编中将字符串放入数组/结构中

> ID：12482434
> 
> 赞同：3
> 
> 时间：2012-09-18T17:58:58.650
> 
> 标签：arrays, string, assembly, x86, nasm

我需要做的就是获取用户输入的字符串并将它们放入数组或结构中，但我不断收到错误消息

> 无效的有效地址

这是什么意思？

### 编码

```
section .data
  fName db 'Enter your first name: '
  fNameLen equ $-fName
  lName db 'Enter your last name: '
  lNameLen equ $-lName

  numberOfStruct equ 50
  structSize equ 25
  firstName equ 0
  lastName equ 10

section .bss
  person resb numberOfStruct*structSize

section .text
  global _start

_start:
  mov esi, 0
  input_start:
    mov eax, 4
    mov ebx, 1
    mov ecx, fName
    mov edx, fNameLen
    int 80h

    mov eax, 3
    mov ebx, 0
    lea ecx, [person+structSize*esi+firstName] ;This is where the error appears
    mov edx, 15
    int 80h

    mov eax, 4
    mov ebx, 1
    mov ecx, lName
    mov edx, lNameLen
    int 80h

    mov eax, 3
    mov ebx, 0
    lea ecx, [person+structSize*esi+lastName] ;This is where the error appears
    mov edx, 10
    int 80h

    inc esi

    cmp esi,10
    jl input_start

    exit:
    mov eax, 1
    mov ebx, 0
    int 80h 
```

我做错了吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-18T18:15:05.287

**编辑：**添加代码和编辑答案以匹配相关更改。

```
lea ecx, [person+structSize*esi+firstName] ; this is where the error appears

lea ecx, [person+structSize*esi+lastName]   ; this is where the error appears 
```

这两个都有相同的错误：您不能乘以，`25`有效的比例因子是`1`、`2`和。`4``8`

**编辑**：正如哈罗德指出的，`imul`是计算地址的最简单方法：

```
 imul ecx,esi,25                    ; ecx == 25*esi
 lea ecx,[ecx+person+firstName]     ; ecx == 25*esi + person + firstName 
```

您还可以使用 3 来计算地址`lea`：

```
 lea ecx,[8*esi]                    ; ecx == 8*esi
 lea ecx,[ecx+2*ecx]                ; ecx == 24*esi
 lea ecx,[ecx+esi+person+firstName] ; ecx == 25*esi + person + firstName 
```

[Wikipedia](http://en.wikipedia.org/wiki/X86#Addressing_modes)对所有 64 位、32 位和 16 位寻址模式进行了有用的总结。

# javascript - 隐藏元素上的模糊不会消除焦点

> ID：12482437
> 
> 赞同：4
> 
> 时间：2012-09-18T17:59:12.253
> 
> 标签：javascript, jquery, javascript-events, backbone.js

我使用 Chrome 版本 21.0.1180.89

我有一个输入，我`.hide()`呼吁`.blur()`。blur 事件被触发，输入实际上并没有失去焦点。

这是记录在案的行为吗？有没有好的解决方法？

我正在构建一个 Backbone 应用程序，当用户按下回车键或字段失去焦点时，应保存文本字段中的数据。就像[TodoMC Backbone 演示](http://addyosmani.github.com/todomvc/architecture-examples/backbone/)一样。

但他们侥幸逃脱，因为每次更改时，他们都会从模板中重新构建整个 li-eleent。我不想这样做，因为它会破坏 CSS 过渡。

编辑：

大多数相关的主干代码：

```
var app = app || {};

$(function() {
    'use strict';

    // Todo Item View
    // --------------

    // The DOM element for a todo item...
    app.TodoView = Backbone.View.extend({

        //... is a list tag.
        tagName:  'li',

        // Cache the template function for a single item.
        template: _.template( $('#item-template').html() ),

        // The DOM events specific to an item.
        events: {
            'click .toggle':    'togglecompleted',
            'dblclick label':   'edit',
            'click .destroy':   'clear',
            'keypress .edit':   'updateOnEnter',
            'blur .edit':       'close'
        },

        // Switch this view into `"editing"` mode, displaying the input field.
        edit: function() {
            this.$el.addClass('editing');
            this.input.focus();
        },

        // Close the `"editing"` mode, saving changes to the todo.
        close: function() {
            var value = this.input.val().trim();

            if ( value ) {
                this.model.save({ title: value });
            } else {
                this.clear();
            }

            this.$el.removeClass('editing');
            this.$el.addClass('syncing');
        },

        // If you hit `enter`, we're through editing the item.
        updateOnEnter: function( e ) {
            if ( e.which === ENTER_KEY ) {
                // Stupid hack to trigger a blur only once.
                this.$el.append(this.input.detach());
//              this.close();
            }
        },

        // Remove the item, destroy the model from *localStorage* and delete its view.
        clear: function() {
            this.model.destroy({wait: true});
            this.$el.addClass('deleting');
            this.$el.addClass('syncing');
        }
    });
}); 
```

# scala - 在测试 Akka Actor 时，如何验证发送给自己的消息是否已传递？

> ID：12482443
> 
> 赞同：12
> 
> 时间：2012-09-18T17:59:33.273
> 
> 标签：scala, testing, akka

我有一个在功能上类似于以下 Actor 的 Actor。

```
case class SupervisingActor() extends Actor {

    protected val processRouter = //round robin router to remote workers
    override def receive = {
        case StartProcessing => { //sent from main or someplace else
            for (some specified number of process actions ){
                processRouter ! WorkInstructions
            }
        }
        case ProcessResults(resultDetails) => {  //sent from the remote workers when they complete their work
            //do something with the results
            if(all of the results have been received){
                //*********************
                self ! EndProcess  //This is the line in question
                //*********************
            }
        }
        case EndProcess {
            //do some reporting
            //shutdown the ActorSystem
        }
    }
} 
```

}

如何验证 EndProcess 消息在测试中发送给 self？

我正在使用 scalatest 2.0.M4、Akka 2.0.3 和 Scala 1.9.2。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-09-19T09:04:10.097

发送给自己的参与者是该参与者如何执行特定功能的非常私密的细节，因此我宁愿测试该消息的效果，也不愿测试该消息是否已传递。我认为发送给 self 与在经典 OOP 中对对象使用私有辅助方法相同：您也不测试是否调用了该方法，而是测试最终是否发生了正确的事情。

作为旁注：您可以实现自己的消息队列类型（请参阅[https://doc.akka.io/docs/akka/snapshot/mailboxes.html#creating-your-own-mailbox-type](https://doc.akka.io/docs/akka/snapshot/mailboxes.html#creating-your-own-mailbox-type)）并允许检查或跟踪消息发送。这种方法的美妙之处在于它可以纯粹通过配置插入到被测参与者中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-18T20:38:50.543

过去，我已经覆盖了实现，`!`以便我可以添加调试/日志记录。就叫超级吧！完成后，请格外小心，不要做任何会引发异常的事情。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-11-19T21:04:39.003

我对 FSM 演员也有同样的问题。我尝试根据接受的答案设置自定义邮箱，但几分钟后无法正常工作。我还尝试根据另一个答案覆盖告诉运算符，但这是不可能的，因为 self 是最终值。最终我只是更换了：

```
 self ! whatever 
```

和：

```
 sendToSelf(whatever) 
```

并将该方法添加到演员中：

```
// test can override this
protected def sendToSelf(msg: Any) {
  self ! msg
} 
```

然后在测试中重写了捕获自发消息的方法并将其发送回fsm以完成工作：

```
 @transient var sent: Seq[Any] = Seq.empty

  val fsm = TestFSMRef(new MyActor(x,yz) {
    override def sendToSelf(msg: Any) {
      sent = sent :+ msg
    }
  })

  // yes this is clunky but it works
  var wait = 100
  while( sent.isEmpty && wait > 0 ){
    Thread.sleep(10)
    wait = wait - 10
  }

  fsm ! sent.head 
```

# android - 如何导航到android中的下一个sqlite表列？

> ID：12482447
> 
> 赞同：0
> 
> 时间：2012-09-18T17:59:37.590
> 
> 标签：android, sqlite

我是 android 和 sqlite 的菜鸟，在使用 access 数据库的 Visual Basic 中，您可以获得一个活动的 x 控件或 adodc 控件，它有助于浏览下一条记录。我正在为android开发一个应用程序，我需要在按下按钮时选择下一列。

即，Sql lite 数据库

表 1 列 1、列 2、列 3

前面是表的结构，我有一个显示列名的文本视图。如果我在选择 column1 的情况下按下按钮，则应显示 column2。

我不知道如何编码。

提示帮助表示赞赏

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-18T20:37:57.950

1.  通过[光标查询您的数据](http://developer.android.com/reference/android/database/Cursor.html)

2.  将该数据填充到您的活动中的对象（任何类型的集合或自定义 pojo）中。

3.  为您的按钮编写一个[clickListener](http://developer.android.com/reference/android/view/View.OnClickListener.html)，它接受一个“当前列”值。然后，clickListener 可以从您保存数据的对象中获取相应的“下一列”。

4.  然后 clickListener 将更新您的 UI

# facebook - 如何将博客文章发布到 facebook，以便合并喜欢和评论？

> ID：12482448
> 
> 赞同：0
> 
> 时间：2012-09-18T17:59:38.820
> 
> 标签：facebook, facebook-like, wordpress, facebook-comments

我有一个 wordpress 博客。是否可以发布到 facebook 的链接，以便我的 facebook 业务页面上发布的链接与博客上的链接具有相同的计数器？

另外，评论部分可以相同吗？（即如果我在 facebook 上发布链接，当有人发表评论时，它会自动更新博客文章的评论部分，反之亦然？）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-18T18:23:41.057

这是不可能的，每一组点赞和评论都是独立的。目前无法执行此数据的合并。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-18T21:56:42.857

Facebook Wordpress 插件基本上提供了您目前可以将 Wordpress 链接到 Facebook API [http://wordpress.org/extend/plugins/facebook的大部分功能](http://wordpress.org/extend/plugins/facebook)

您无法将帖子和页面的点赞计数器链接到您的 Facebook 页面，为什么？它们都是单独的帖子和页面。这才有意义。

你可以做什么？您可以在 Facebook（时间线或业务页面）上发布您的帖子，所有人都可以对其发表评论。您可以将 Facebook 评论添加到您的帖子和页面。评论者可以选择显示在他的 Facebook 时间线中的评论。人们可以“喜欢”帖子公告，如果您有“喜欢”按钮，则可以“喜欢”帖子本身。他们都分开行动，因为要让人们真正喜欢您的帖子，他们必须访问该页面。对于分析来说，这是有道理的，因为您想知道谁在您的 Facebook 页面中，以及谁实际点击访问您的网站。两者都不相同，这就是重点。

如果您想真正将您的网站与 Facebook 合并，则必须采用 Facebook 应用程序的形式。如果这是您想要采取的方向，我相信您可以在此找到一些帮助。

# objective-c - 带有核心数据的 TableView：从 windowShouldClose 调用 saveAction

> ID：12482454
> 
> 赞同：0
> 
> 时间：2012-09-18T17:59:54.373
> 
> 标签：objective-c, cocoa, core-data, interface-builder, nstableview

我有一个绑定到核心数据实体的 TableView，并且我的 AppDelegate 中有一个 saveAction 方法。

首先，我在 AppDelegate 中创建一个链接到 saveAction 的按钮。当我单击按钮时，saveAction 方法会被很好地触发并保存数据。

我想在关闭窗口时触发同样的功能，所以我在 AppDelagate 中创建了以下内容：

```
- (BOOL)windowShouldClose:(id)sender{
    // Breakpoint here is reached.
    [self saveAction:sender];
    return true;
} 
```

当我关闭窗口时，到达断点，saveAction 运行，但没有保存任何内容。我可以确定的唯一区别是，当单击按钮时，saveAction 接收到 NSButton 的发送者，但是当通过 windowShouldCLose 触发时，发送者被记录为 NSWindow。

有什么我想念的吗？很可能对这一切都很陌生。任何意见，将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-15T14:06:21.900

我有几乎相同的问题 - 添加后修复：

在界面生成器中，选择您希望控制“应该关闭”功能的窗口，然后打开连接检查器......您必须在引用插座和 AppDelegate 之间建立连接，但您还必须在名为的插座之间建立连接“Delegate”和 AppDelegate（在我的情况下，默认情况下我只有第一个，用这个“应该关闭”功能生气好几天，添加第二个后一切都变得很好......）

# php - 查询 1000 万个 mongodb 文档

> ID：12482455
> 
> 赞同：13
> 
> 时间：2012-09-18T18:00:00.180
> 
> 标签：php, mongodb

我将书籍元数据（如名称、作者、价格、出版商等）存储在 mongodb 文档中。我有大约 1000 万份这些文件，它们都在一个集合中。*平均文档大小为 1.9 KB*。现在我在`name`,`authors`和上有索引`price`。事实上*，我有 2 个价格指数，一个按升序排列，一个按降序排列*。我的 mongodb 版本是 2.2.0，我正在使用 php 驱动程序来查询 mongo。驱动的版本是1.12。但是当我对价格进行范围查询时，我得到一个`MongoCursorTimeoutException`. 在我的查询中，我试图查找某个价格范围内的书籍，例如“价格低于 1000 且高于 500”。

增加超时似乎不是一个好主意（已经是 30 秒）。我还能做些什么来加快查询过程。

**编辑** 实际上我的价格指数是复合的。我有一个状态字段，它有一个整数值，所以我的价格指数看起来像`{price:-1,status:1}`，`{price:1,status:1}` 而且我试图用 PHP 一次检索 20 个文档。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-13T05:56:28.620

我们在使用传统和 SSD EBS 卷的 EC2 上使用单一/共享服务器和专用副本集的数百万个文档的 Mongo 集合方面拥有丰富的经验。工作负载多种多样：一些面向分析，另一些则支持 Web 请求。这是我推荐的根本原因分析路径：

1.  运行查询[`.explain()`](http://www.mongodb.org/display/DOCS/Explain)以查看使用的索引等方面的情况。如有必要，请调整索引。Mongo 的优化器相当幼稚，因此如果您的索引与查询模式不完全匹配，它们可能会被遗漏。

2.  检查[MMS](http://mms.10gen.com/)并查找以下任何问题：（1）内存中并非所有数据（由页面错误指示）和（2）队列长度（通常指示某种类型的瓶颈）。当不是所有数据都在内存中时，Mongo 的性能会迅速下降，因为数据库有一个全局锁和接触存储，尤其是在云中是个坏消息。我们最近升级到 SSD 云存储，我们发现在大小约为 1/2 Tb 的数据库上性能提高了 3-10 倍。

3.  将 profiling 级别提高到 2（最大值），运行一段时间并查看操作日志。请参阅[MongoDB 分析器](http://www.mongodb.org/display/DOCS/Database+Profiler)。

希望这可以帮助。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-21T18:22:18.197

1.  检查你的不雅行为。重新索引您的数据，并确保在运行查询之前对集合进行完全索引。（10 英里。文档可能需要一段时间才能建立索引）
2.  任何索引查询中最慢的部分是实际的文档检索。我可以想象，根据您提取的文档数量，这可能需要 30 秒或更长时间以及大量内存。

有关某些事情的更多有用说明，您可以尝试查看此页面： [http ://www.mongodb.org/display/DOCS/Optimization](http://www.mongodb.org/display/DOCS/Optimization)

10 英里。您可能还考虑在计算机之间分片数据的文档。请记住，硬盘读取比 CPU 周期慢。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-21T17:03:02.867

正如@JohnyHK 所说，我的内存太低了。所以将它增加到 12 GB，它现在可以工作了。感谢大家的评论和回答

# javascript - 如果我将新版本的 javascript 文件上传到 Amazon S3，是否会出现浏览器缓存问题？

> ID：12482458
> 
> 赞同：3
> 
> 时间：2012-09-18T18:00:17.923
> 
> 标签：javascript, django, amazon-s3, requirejs

我们有很多人 (10k+) 定期返回我客户的网站，使用我们为他们构建、改进和托管的 Web 应用程序。随着我们的应用程序的改进和发展，我们一直在对网络应用程序的 javascript 进行相当频繁的向后不兼容更新。在部署期间，javascript 被压缩并连接到一个文件中，由 require.js 加载到浏览器中，然后上传到 Amazon S3 并托管在 Amazon S3 上。文件名和 url 目前在更新期间根本不会改变。上周，我们对 Web 应用程序进行了重大重构，并收到了一些（但不是很多）报告，称该应用程序对某些人停止工作，尤其是在 Firefox 中。这似乎是一个缓存问题。我们最初能够在一些浏览器的测试中看到它，但它似乎在一两次刷新后就消失了。

我突然意识到，我真的不知道在 S3 上部署新版本的 javascript 文件（同名）会有什么浏览器缓存后果，以及这种情况是否需要缓存破坏或操纵 S3 的标头或任何东西。有人可以帮我解决这个问题吗？在部署期间我应该采取哪些措施来确保浏览器立即获取新版本的 javascript 文件？如果不是这样，我们将冒 javascript 和服务器 API 不同步和失败的风险，我认为这发生在这里。

不确定这是否重要，但该站点的服务器运行 Django，并且应用程序和数据库已部署到 Heroku。静态文件通过 Django 的 collectstatic 命令使用 S3Boto 部署到 S3。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-18T18:37:30.953

这在很大程度上取决于 S3 的行为以及它在 S3 上请求文件时发送的标头。如您所见，浏览器会显示不同的缓存行为 - 因此最好的选择是使用唯一的文件名。

我建议使用 cachebuster 哈希 - 这样您可以确保新文件总是被浏览器请求，并且如果您在自己的服务器上托管文件，则可以使用长缓存寿命标头。例如，您可以创建缩小文件的 MD5 散列并附加它（如`mycss-322242fadcd23.css`）。或者您可以使用源代码控制系统的修订号。您必须在指向此文件的所有链接中使用缓存破坏器，但您通常可以在嵌入静态资源的模板中轻松执行此操作。根据您的应用程序，您可能会使用应该为您完成这项工作的[这个 Django 插件。](https://github.com/jaddison/django-cachebuster)

# qt - 无法在 C++ 代码中访问 QML 对象

> ID：12482464
> 
> 赞同：5
> 
> 时间：2012-09-18T18:00:53.840
> 
> 标签：qt, qml, blackberry-10

我正在开发一个 QML 应用程序（blackberry 10）并且有一个像这样的 QML 文件：

```
import bb.cascades 1.0    
Page {
        content: Container {
            id: containerID
            Button {
                id: button1
                text: "text"
                onClicked: {
                }
            }
            Label {
                id: label1
                text: "text"
            }
        }
    } 
```

现在我想`label1`在我的 c++ 代码中访问，所以我有以下代码：

```
#include "app.hpp"

#include <bb/cascades/Application>
#include <bb/cascades/QmlDocument>
#include <bb/cascades/AbstractPane>

using namespace bb::cascades;

App::App()
{
    QmlDocument *qml = QmlDocument::create("main.qml");
    //-- setContextProperty expose C++ object in QML as an variable
    //-- uncomment next line to introduce 'this' object to QML name space as an 'app' variable
    //qml->setContextProperty("app", this);

    AbstractPane *root = qml->createRootNode<AbstractPane>();

    QObject *labelTest = root->findChild<QObject*>("label1");
    if (labelTest)
        labelTest->setProperty("text", "yes!!");

    Application::setScene(root);
} 
```

现在我运行应用程序，但标签的文本没有改变。

**怎么了？**

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-18T18:18:31.447

我自己找到了答案。QML 代码：

```
import bb.cascades 1.0

//-- create one page with a label and text

Page {
    property alias labelText: label.text      
    content: Container {            
        Label {
            id: label
            text: "Label"
        }  

        Button {
            objectName: "button"
            text: "Button"
        }                               
    }
} 
```

和 C++ 代码：

```
#include "app.hpp"

#include <bb/cascades/Application>
#include <bb/cascades/QmlDocument>
#include <bb/cascades/AbstractPane>

using namespace bb::cascades;

App::App()
{
    QmlDocument *qml = QmlDocument::create("main.qml");
    //-- setContextProperty expose C++ object in QML as an variable
    //-- uncomment next line to introduce 'this' object to QML name space as an 'app' variable
    //qml->setContextProperty("app", this);

    AbstractPane *root = qml->createRootNode<AbstractPane>();

    root->setProperty("labelText", "yes");

    QObject *newButton = root->findChild<QObject*>("button");
    if (newButton)
        newButton->setProperty("text", "New button text");

    Application::setScene(root);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-20T12:47:46.843

另一种解决方案是...

QML：

```
import bb.cascades 1.0

//-- create one page with a label and text

Page {
    property alias labelText: label.text      
    content: Container {            
        Label {
            id: label
            text: "Label"
            objectName: "label1"
        }  

        Button {
            objectName: "button"
            text: "Button"
        }                               
    }
} 
```

C++

```
#include "app.hpp"

#include <bb/cascades/Application>
#include <bb/cascades/QmlDocument>
#include <bb/cascades/AbstractPane>

using namespace bb::cascades;

App::App()
{
    QmlDocument *qml = QmlDocument::create("main.qml");
    //-- setContextProperty expose C++ object in QML as an variable
    //-- uncomment next line to introduce 'this' object to QML name space as an 'app' variable
    //qml->setContextProperty("app", this);

    AbstractPane *root = qml->createRootNode<AbstractPane>();

    QObject *labelTest = root->findChild<QObject*>("label1");
    if (labelTest)
        labelTest->setText(QString("yes!!"));

    Application::setScene(root);
} 
```

但是您提出的解决方案在许多方面都更好。

# c++ - 使用 char* 时程序崩溃

> ID：12482465
> 
> 赞同：1
> 
> 时间：2012-09-18T18:01:07.620
> 
> 标签：c++, c, string, pointers

运行以下代码时，我的程序意外崩溃！

```
#include<stdio.h>
#include<string.h>

int main(){

    char *str = NULL;
    strcpy(str, "swami");
    printf("%s", str);
    return 0;
} 
```

但如果我这样做：

```
#include<stdio.h>
#include<string.h>

int main(){

    char *str;
    strcpy(str, "swami");
    printf("%s", str);
    return 0;
} 
```

此代码工作正常并生成正确的输出！

我正在使用 gcc 编译器（代码块 IDE）。此外，这两个代码都会导致 DevCpp 中的程序崩溃。谁能解释一下为什么会这样！？

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2012-09-18T18:02:54.607

您不能写入`NULL`指针。

在第二种情况下，您的指针被随机初始化到程序内存中的有效位置。这就是为什么你可以做一个`strcpy`。

将两个程序都更改为

```
str = malloc(size) 
```

或.`calloc`之前的选项`strcpy`。（`size`是您要保留的空间大小。）

根据评论，您还可以将声明更改`str`为`char str[6]`（或更多）。

最后编辑：我将向您展示这张显示程序内存和指针的图片：

![在此处输入图像描述](../Images/5ea21248ac82d84e7dd3c46d94839d12.png)

灰色区域和红色区域是禁止的（您不能从它们写入或读取；顶部的灰色区域用于内核内存，而其他区域是尚未回收的空间）。底部的红色区域是特殊的 0 页面。因为你的`NULL`意志指向这一点，你的程序就会失败。`0``str = NULL`

如果你不分配任何东西，`str`它最终会随机指向。它仍然可以指向红色区域或灰色区域->您的程序将失败。它可以指向绿色或蓝色（两种色调）区域，使您的程序工作（除了它指向只读位置并且您写入它的情况）。为指针分配区域使其指向绿色区域，将其放大到顶部。

另一个选项，`str[6]`将堆栈区域扩大到底部。所有局部变量都在堆栈中保留空间，而用 ,`malloc`和其他朋友分配的所有空间都进入堆。`realloc``calloc`

最后，看看一篇关于和之间区别的[博客文章](http://techblog.rosedu.org/arrays-vs-pointers.html "ROSEdu 技术博客")。`char[]``char *`

PS：如果您想使用 GNU 扩展，您可以查看该`asprintf`功能。它会为一个字符串分配空间并在那里写一些内容：

```
asprintf(&str, "swami"); 
```

或者

```
asprintf(&str, "%d + %d == %d\n", 1, 2, 3); 
```

但是，如果你想要便携性，你会远离这个功能。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-09-18T18:05:08.740

在这两个版本中，您都没有分配内存来将字符串复制到，因此两者都会调用未定义的行为。第一个崩溃是因为您明确初始化`str`为`NULL`，因此`strcpy`取消引用了一个`NULL`在大多数系统上崩溃的指针。第二，`str`指向任意内存，取消引用未初始化的指针可能会或可能不会崩溃。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-18T18:51:39.107

因为在. `NULL`_ 因此，您尝试写入使程序崩溃的无效内存地址。`#define NULL ((void *)0)``<stdlib.h>`

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-18T18:06:26.477

阅读此[链接](http://www.cplusplus.com/reference/clibrary/cstring/strcpy/)

```
//destination =Pointer to the destination array where the content is to be copied.
char * strcpy ( char * destination, const char * source ); 
```

您将目标设置为 NULL，因此您尝试将源复制到 NULL。这就是它崩溃的原因。您应该留出一些内存来将字符串复制到。

```
int main(){
      char *str=malloc(6);  //enough for "swami"+'\0'
      strcpy(str, "swami");
      printf("%s", str);
      return 0; 
```

}

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-09-18T18:07:52.000

`strcpy`只是复制，而不是为它生成空间。

在第一种情况下，您尝试将字符串写入代码段的开头：这不是一个好主意。

在第二种情况下，您开始将字符串写入某个地方，并且在您的情况下并没有因为运气和编译器的帮助而崩溃。

您应该执行以下操作之一：

一种。分配内存：`str = new char[10]`
B。使用`strdup`女巫将字符串复制到新位置。

# php - PHP奇怪的洗牌与require_once和字符串数组

> ID：12482470
> 
> 赞同：0
> 
> 时间：2012-09-18T18:01:33.000
> 
> 标签：php, apache, require-once

我在 PHP 及其`require_once`语言结构上遇到了一个奇怪的问题。

我需要一个名为`EN-en.php`. 它包含我网站的英语，我是这样写的：

```
....
$lang['header']['loginbox']['menu'][1] = "contacts" ;
$lang['header']['loginbox']['menu'][2] = "settings" ;
.... 
```

然后我使用此代码将我的文件包含在整个站点中

```
require_once $langFile ; 
```

我觉得很容易，`$langFile is = "/var/www/webstite/langs/EN-en.php"`. 但奇怪的部分来了。

当我使用

```
echo $lang['header']['loginbox']['menu'][1]; 
```

它打印出类似“Gontacts”之类的东西......我不明白为什么，而且这不是唯一的情况......请有人可以帮助我解决这个问题吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-18T18:06:42.117

您可能正在覆盖数组中自己的值。

看这个简单的例子：

```
$test = "some text";
$test['menu'] = 'extra';
var_dump($test);
// produces: string(9) "eome text"
// the first character - $test[0] - gets overwritten 
```

# python - Python 2.7：'Ramón' == u'Ramón'

> ID：12482477
> 
> 赞同：2
> 
> 时间：2012-09-18T18:01:57.527
> 
> 标签：python, string, unicode, encoding, python-2.7

这将返回**False**，因为第一个是**Str**对象，第二个是**Unicode**对象。

但是，由于它们都是*Ramón*，我该怎么做才能返回**True**。

我试图将第一个转换为 Unicode 对象：

```
>>> varString = 'Ramón'
>>> varUnicode = u'Ramón'
>>> varString == varUnicode
False
>>> newUnicode == unicode(varString, encoding='unicode-escape')
>>> varString; varUnicode; newUnicode
'Ram\xa2n'
u'Ram\xf3n'
u'Ram\xa2n'
>>> varUnicode == newUnicode
False 
```

它们有不同的编码。我能做些什么？谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-18T18:19:21.947

`varString` is unlikely to be encoded in `unicode-escape`. The Python interpreter uses the encoding of `sys.stdin.encoding` when it decodes what it reads at the `>>>` prompt into a `unicode` object. So you can use the same encoding when you decode your `str` object for yourself:

```
>>> import sys
>>> sys.stdin.encoding
'UTF-8'
>>> varString = 'Ramón'
>>> varUnicode = u'Ramón'
>>> newUnicode = unicode(varString, encoding='UTF-8') # or encoding=sys.stdin.encoding
>>> varString; varUnicode; newUnicode
'Ram\xc3\xb3n'
u'Ram\xf3n'
u'Ram\xf3n'
>>> varUnicode == newUnicode
True 
```

# ruby-on-rails - Rails I18n - 模型验证返回 [object Object]

> ID：12482478
> 
> 赞同：0
> 
> 时间：2012-09-18T18:02:03.383
> 
> 标签：ruby-on-rails, ruby, validation, model, internationalization

验证规则示例：

```
 validates :first_name, :presence => {:message => I18n.t('activerecord.errors.models.user.required_item')}, :allow_blank => true, :length => {:minimum => 3, :maximum => 40} 
```

语言环境：

```
de:
  activerecord:
      errors:
        models:
          user:
            povinne_pole:
              required_item: "error message" # see default key: "inclusion" 
```

退货

```
[object Object] 
```

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-18T20:22:30.967

您`povinne_pole`在 I18n.t 通话中失踪了。

# regex - 正则表达式挑战：每连续 6 个字符，必须有两个 1（字母 {"0", "1"}）

> ID：12482480
> 
> 赞同：2
> 
> 时间：2012-09-18T18:02:13.493
> 
> 标签：regex

所以，我想构建一个正则表达式，我可以传入一个 0 和 1 的字符串（例如“0010101000111100100011110001101100011”），然后确保对于每 6 个连续字符，该块中至少需要两个 1。

此外，长度小于 6 的字符串应该通过。

传递字符串的例子：

*   “”
*   “00”
*   “11000011”
*   “01010100”

失败字符串的例子：

*   “110000000011”
*   “000001”

这些示例是非常小的字符串，但我想构建一个以获取任何长度的字符串。

现在，我正在寻找一种用正则表达式表达这一点的好方法，而不是使用循环等解决方案。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-18T18:07:15.240

只需使用此正则表达式并检查它*是否不*匹配：

```
/000000|000001|000010|000100|001000|010000|100000/ 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-18T18:13:39.327

这是一个可以解决问题的正则表达式（匹配有效字符串）：

```
^((?!0{6}|10{5}|010{4}|001000|000100|0{4}10|0{5}1)[01])+$ 
```

示例：[http ://www.rubular.com/r/VelZ1Iqml6](http://www.rubular.com/r/VelZ1Iqml6)

这在重复中使用负前瞻，以便在字符串中的每个位置检查条件。

如果您能够只检查不匹配的字符串，那就更简单了，您可以使用 davidrac 的解决方案或这个稍微缩短的版本（我在正则表达式的前瞻中使用）：

```
0{6}|10{5}|010{4}|001000|000100|0{4}10|0{5}1 
```

# javascript - HTML 大小对我的 Js 有多重要（对我的页面加载时间更重要）

> ID：12482483
> 
> 赞同：2
> 
> 时间：2012-09-18T18:02:29.700
> 
> 标签：javascript, html, performance, semantics

我正在开发一个网站，我曾经使用无序列表进行导航，但前段时间我从雅虎开发者博客中看到了一些文章。在这篇文章中，他们解释了如何改善你的加载时间，并且有很多提高性能的技巧和窍门。现在，我尝试在 Google 上搜索 html 的语义，以及是否使用 ul 链接列表或仅使用“div”中的一堆“a”标签或任何其他语义上适合目的元素的标签。实际上，每个人都鼓励使用它们，对我来说这已经很自然了，但是我计算了我的链接，大约我已经有大约 120 个（也许更多）链接（每个在列表元素中）。你建议谁？或者有人可以推荐关于它的好文章吗？

```
<ul>
     <li>
         <a href="#">Link</a>
     </li>
</ul>

or

<div>
     <a href="#">Link</a>
</div> 
```

PS哦，不要对我的链接感到惊讶，他们在那里是有原因的：）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-18T18:15:25.453

在这种情况下 li ul 的最佳实践，为了获得更多解释，我认为这篇文章对你很有用[为什么我应该使用 'li' 而不是 'div'？](https://stackoverflow.com/questions/549689/why-should-i-use-li-instead-of-div)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-18T18:11:20.157

从 CSS 渲染的角度来看，我会使用无序列表，因为我认为它会导致 CSS 更干净；此外，您的站点中可能还有更多 div，因此当浏览器搜索匹配项时，它不必尝试匹配每个 div 样式。但是，这确实是一个微优化，除非您对页面进行分析并发现它存在问题，否则您不必担心太多。

至于提高页面性能，还有许多其他途径（缓存、缩小、减少往返）。我建议你阅读[这个](https://developers.google.com/speed/docs/best-practices/rules_intro)。这是 Google 关于网络性能最佳实践的想法。此外，在您最喜欢的网络浏览器（应该是 Chrome）中查看一些分析工具。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-18T18:19:33.357

Normally the navigation will not add too much to your page load time.

You should stick to the unordered lists for another reason. Some screen reader software and search engines have learned that unordered lists are used as navigation.

And people without CSS activated will recognise the lists as navigation,too.

If you use HTML5 additionally wrap the navigation in a `<nav>` tag

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-18T18:08:42.603

我不认为您在 div 或列表中的 120 个链接会减慢您的页面速度，您可以使用 css 控制 div 或列表，您不需要 js 来格式化它们。需要考虑的事情是……每页有多少内容，谁在托管您的网站，每页有多少图像及其大小，html 文件的总大小，以及最重要的数据库调用。

# java - Java中的Graphics2D

> ID：12482486
> 
> 赞同：3
> 
> 时间：2012-09-18T18:02:37.907
> 
> 标签：java, swing, graphics, graphics2d

首先，很抱歉这种类型的问题。我正在学习`Java`编程，我在这门语言方面有很多技能，但直到现在我还没有使用 graphics2D。我想学习如何创建图形，但我没有找到任何有用的教程。请问，你知道一些关于学习如何创建图形的好教程吗？提前致谢。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-18T20:21:24.837

这取决于您对 Graphics2D 的意思。这涵盖了很大的领域，从绘制自定义组件到绘制游戏和/或动画

[我会从2D Graphics Trail 之](http://docs.oracle.com/javase/tutorial/2d/index.html)类的东西开始

我会确保您熟悉[Swing 中的自定义绘画](http://docs.oracle.com/javase/tutorial/uiswing/painting/)

我也会让自己熟悉[AWT 和 Swing 中的绘画](http://www.oracle.com/technetwork/java/painting-140037.html)

一旦开始制作场景，您将看看[Swing 中的并发，](http://docs.oracle.com/javase/tutorial/uiswing/concurrency/index.html)因为最终您想使用`Threads`. 密切关注 Event Dispatching Thread 话题

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-18T18:15:20.177

**[Java How To Program 9/e（早期对象）](https://rads.stackoverflow.com/amzn/click/com/0132575663)**对 Java 的图形有一些很好的介绍。

每章都有一个**案例研究**，向您介绍不同的图形 java 特性，还有一些非常具有挑战性的练习。

然后是**图形和 Java 2D**章节（第 15 章），其中有一个很好的 Java 2D 图形封面。

那么如果你想深入了解 Java 的 2D Graphics，可以浏览[Java 2D API Specification](http://docs.oracle.com/javase/1.4.2/docs/guide/2d/spec.html)

# perl - 从散列列表创建多级散列

> ID：12482488
> 
> 赞同：0
> 
> 时间：2012-09-18T18:02:45.263
> 
> 标签：perl

我正在尝试编写一个可以获取哈希列表并根据任意数量的字段的内容创建嵌套列表的子列表。我只是无法正确设置递归。我从数据库中获取了一堆错误数据，并希望将数据分组到任意字段列表（团队、优先级等）上。我真的没有任何我认为足够接近的示例代码

下面的例子

我有以下 DS：

```
$ds =
[
  {
    foo => 'A',
    bar => 'B',
    baz => 'C',
  },
  {
    foo => 'A',
    bar => 'B',
    baz => 'F',
  },
  {
    foo => 'A',
    bar => 'D',
    baz => 'G',
  },
  {
    foo => 'R',
    bar => 'J',
    baz => 'G',
  }
] 
```

给定以下函数调用

```
# prototype   groupBy(data, field-1,field-2,field-n)
groupBy($ds,'foo','bar'); 
```

我想要以下输出

```
$res = {
         A => {
                B => [
                       {
                         foo => 'A',
                         bar => 'B', 
                         baz => 'C',
                       }, 
                       {
                         foo => 'A',
                         bar => 'B',
                         baz => 'F',
                       }
                     ],
                D => [
                       {
                         foo => 'A',
                         bar => 'D',
                         baz => 'G', 
                       }
                     ],
              },
         R => {
                J => [
                       {
                          foo => 'R',
                          bar => 'J',
                          baz => 'G',
                       }
              }

        }; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-18T18:25:12.947

使用递归方法非常简单

下面的代码演示

```
use strict;
use warnings;

my $ds = [
  { bar => "B", baz => "C", foo => "A" },
  { bar => "B", baz => "F", foo => "A" },
  { bar => "D", baz => "G", foo => "A" },
  { bar => "J", baz => "G", foo => "R" },
];

my $grouped = groupBy($ds, qw/ foo bar /);

use Data::Dump;
dd $grouped;

sub groupBy {

  my ($ds, $key, @rest) = @_;
  return $ds unless $key;

  my %groups;
  push @{ $groups{$_->{$key}} }, $_ for @$ds;
  $groups{$_} = groupBy($groups{$_}, @rest) for keys %groups;

  return \%groups;
} 
```

**输出**

```
{
  A => {
         B => [
                { bar => "B", baz => "C", foo => "A" },
                { bar => "B", baz => "F", foo => "A" },
              ],
         D => [{ bar => "D", baz => "G", foo => "A" }],
       },
  R => { J => [{ bar => "J", baz => "G", foo => "R" }] },
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-18T18:20:20.417

硬编码解决方案：

```
my $res;
for (@$ds) {
   push @{ $res->{ $_->{foo} }{ $_->{bar} } }, $_;
} 
```

但是您想支持可变长度的键列表。只需添加一点循环。

```
sub groupBy {
    my ($ds, @keys) = @_;
    my $res;
    for (@$ds) {
       my $p = dive($res, @$_{ @keys });
       push @$$p, $_;
    }
   return $res;
} 
```

`dive`要么在哪里

```
sub dive {
   my $p = \shift;
   $p = \( $$p->{$_} ) for @_;
   return $p;
} 
```

或者

```
use Data::Diver qw( DiveRef );
sub dive {
   $_[0] //= {};
   return DiveRef(shift, map \$_, @_);
} 
```

# c# - Linq to SQL 数据完整性与分组

> ID：12482492
> 
> 赞同：1
> 
> 时间：2012-09-18T18:03:03.093
> 
> 标签：c#, sql, linq-to-sql, query-optimization

前段时间我问了[SQL Server 的问题：如何使用带有 group by 的聚合函数来维护数据完整性？](https://stackoverflow.com/q/10088814/1324019)我在那里得到了很好的答案，但现在问题又出现了，这次是使用 Linq to SQL 而不是普通的 SQL。

背景故事：我有一个完整的 gps 数据表，如下所示：

> GPS_id、user_id、纬度、经度、server_time、device_time

我使用以下 linq 查询来提取特定用户组的最新 gps 记录：

```
var query =
    from gps in db.gps_data
    where (from u in db.users
        select u.user_id).Contains(gps.user_id)
    group gps by gps.user_id into groupedGPS
    select groupedGPS; 
```

然后我像这样循环遍历它，但我必须先订购它才能正确获取“最新记录”。

```
foreach (var gpsItem in query) {
    var ordered = gpsItem.OrderByDescending(g => g.device_time);
    list.Add(ordered.First());
} 
```

这给了我我需要的东西，但是在任何时候我都有 100 多个用户都有 500 多个 gps 记录（并且所有这些用户都以这种方式访问​​），所以这段代码需要 10 多秒，我认为这是不可接受的。

然后我将其更改为以下

```
var query =
    from gps in db.gps_data
    where (from u in db.users
        select u.user_id).Contains(gps.user_id)
    group gps by gps.user_id into groupedGPS
    select new 
    {
        GPS_id = groupedGPS.Max(x => x.GPS_id),
        user_id = groupedGPS.Max(x => x.user_id),
        latitude = groupedGPS.Max(x => x.latitude),
        longitude = groupedGPS.Max(x => x.longitude),
        server_time = groupedGPS.Max(x => x.server_time),
        device_time = groupedGPS.Max(x => x.device_time) 
    }; 
```

这个查询确实看起来更快，因为据我了解，所有不必要的数据实际上从未加载到内存中。但是，就像几个月前我最初的问题一样，我已经以这种方式失去了数据完整性。不能保证我看到的是最新**记录**，只是分组中所有字段的最大值。这对大多数字段没有影响，但纬度和经度几乎总是不正确的，因为它们只是`max()`在分组中找到的记录，而不是最近的记录。

我该如何解决这个问题？我意识到我有第一个解决方案来检索正确的数据，但是它花费的时间太长了。

谢谢您的帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-18T18:26:57.480

据我了解您的问题（每个用户 ID 的最新记录），这似乎可以满足您的需求；

```
var q =
    from gps in db.gps_data
    where (from gps2 in db.gps_data
           group gps2 by gps2.user_id
           into g
           select new {a = g.Key, b = g.Max(f => f.server_time)})
           .Contains(new {a = gps.user_id, b = gps.server_time})
    select gps; 
```

如果用户同时有多个读数，它可能会给你重复，我假设他们不是。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-18T18:56:45.563

以下应该可以工作，但会执行多个子选择，因此您需要检查您的性能并确保内联 FirstOrDefault 与您的 LINQ 提供程序一起使用：

```
var query =
    from u in db.users
    select new
    {
        u.user_id,
        latestGPS = (db.gps_data
                    where g.user_id == u.user_id
                    orderby g.server_time descending
                    select g).FirstOrDefault()
    }; 
```

# jax-ws - CXF RS 和 JAX-WS 编码的内容不可读

> ID：12482500
> 
> 赞同：3
> 
> 时间：2012-09-18T18:03:44.430
> 
> 标签：jax-ws, cxf, cxfrs

我的问题是 2 倍的，它与编码有关。我在 JBoss 7.1.1 上部署了一个 REST Web 应用程序。这具有外部 Web 服务的适配器，我已使用 CXF java2wsdl 从提供的 WSDL 创建存根。在对此外部 Web 服务的请求/响应期间，请求和响应可以包含保加利亚语编码的内容。

问题是我的 REST 服务和我的 SOAP 适配器都没有正确发送/使用这个编码的内容，而它来自 SOAPUI。下面是一个例子

REST CALL 将参数**“Тест Тест”**传递为

> @PathParam("receiverName") 字符串接收者名称

标头包含*charset=UTF-8*

使用 cxf 日志拦截器的服务器日志记录以下内容

```
--------------------------------------
 Inbound Message
----------------------------
ID: 32
Address:     http://127.0.0.1:8080/rest/request/card/10122083/%D0%A2%D0%B5%D1%81%D1%82%20%D0%A2%D0%B5%D1%81%D1%82/1234124143312
Encoding: UTF-8
Http-Method: POST
Content-Type: application/json; charset=UTF-8
    Headers: {Accept=[application/json], accept-encoding=[gzip, deflate], accept-language=    [en-gb,en;q=0.5], cache-control=[no-cache], connection=[keep-alive], Content-Length=[313],     content-type=[application/json; charset=UTF-8], host=[127.0.0.1:8080], pragma=[no-cache],     user-agent=[Mozilla/5.0 (Windows NT 6.1; WOW64; rv:15.0) Gecko/20100101 Firefox/15.0.1]}
---------------------------- 
```

我的代码现在在日志中打印的参数值为**“?????? ????”**

在后端，当我再次收到保加利亚语内容时，我遇到了问题，以下是此类响应的示例

```
Encoding: UTF-8
Content-Type: text/xml
Headers: {Accept=[*/*], 
```

根据日志和wireshark，请求是用上面的Headers发送的，响应是：

```
-----------------------------------------------------------------
ID: 2
Response-Code: 200
Encoding: ISO-8859-1
Content-Type: text/xml
Headers: {Content-Length=[1011], content-type=[text/xml], Server=[IRS/1.0.18.0 guz]}
Payload: <?xml version="1.0" encoding="UTF-8"?>
<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:loy="http://www.location.bg/Loyalty/">
<soapenv:Header/>
<soapenv:Body>
<loy:CustLoyaltyResponse>
                <OutputRequestID>SCR0000000394</OutputRequestID>
                <OutputTimeStamp>20120918095649992</OutputTimeStamp>
                <StatusCode>0</StatusCode>
                <StatusMessage>Loyal Customer</StatusMessage>
                <CustomerCode>10122083</CustomerCode>
                <CustomerLoyalStatus>1</CustomerLoyalStatus>
                <LoyalLevel>Special</LoyalLevel>
                <CardObject>
                                <CardStatus>0</CardStatus>
                                <CardCustCode>10122083</CardCustCode>
                                <CardNo>100012624110122083</CardNo>
                                <CardState>4</CardState>
                                <Level>Special</Level>
                                <City>Р?Р°С?РЅР°</City>
                                <Postcode>9000</Postcode>
                                <Address>Р¶Рє. Р§Р°Р№РєР°&lt;/Address>
                                <NameOfRecipient>РўРµС?С? РўРµС?С?</NameOfRecipient>
                                <NumberOfRecipient>12345678</NumberOfRecipient>
                                <LastStatusChangeDate></LastStatusChangeDate>
                </CardObject>
</loy:CustLoyaltyResponse>
</soapenv:Body>
</soapenv:Envelope>
----------------------------------------------------------------- 
```

这个问题可以在

```
 <City>Р?Р°С?РЅР°</City>
                            <Address>Р¶Рє. Р§Р°Р№РєР°&lt;/Address> 
```

而在 SOAPUI 中，结果是正确的

```
<City>Варна</City>
<Address>жк. Чайка</Address> 
```

有什么想法是什么问题以及如何解决？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-18T22:29:33.150

可能是日志记录设施没有将输出记录为`UTF-8`？如果您正在使用`log4j`，请尝试添加

```
<param name="Encoding" value="UTF-8"/> 
```

到它的配置。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-19T09:11:16.127

最后，我查看了我的日志文件类型，它不是 UTF-8，因此我将以下内容添加到我的 log4j 以使其成为 UTF-8

```
<param name="Encoding" type="UTF-8" /> 
```

正如@unhillbilly 所建议的那样。此外，我的编辑器（TextPad）没有显示 UTF-8，所以我换成了 Notepad++，它还删除了 @Encoded 注释，我得到了“Тест Тест”

现在该值已从 JAX-RS 正确检索并传递给我的 JAX-WS 客户端适配器（日志一直显示）并且它也在 SOAP 请求中正确发送（日志拦截器在 SOAP 请求的打印输出中显示这一点，而外部 Web 服务现在回复的事实似乎证实了这一点）。

```
Request
Address: http://192.168.3.251:4445/WSDL
Encoding: UTF-8
Content-Type: text/xml
Headers: {Accept=[*/*], 
...
<ReceiverName>Тест Тест</ReceiverName> 
```

仍然存在的问题是，当我收到包含保加利亚语字符的响应时，日志和 REST 客户端都没有得到正确的字符编码，但是 SOAP UI 中的相同请求会导致正确的字符显示

该问题可以在我的日志中看到，我的 Rest Client 如下

```
<City>Р?Р°С?РЅР°</City>  
<Address>Р¶Рє. Р§Р°Р№РєР°&lt;/Address> 
```

而在 SOAPUI 中，结果是正确的

```
<City>Варна</City>  
<Address>жк. Чайка</Address> 
```

我收到的响应的标题如下所示。我认为 ISO-8859-1 可能会影响到我，但它再次没有解释为什么 SOAP UI 可以正确处理它。据我所知，我无法影响 Web 服务本身从我的管道返回的编码。

```
ID: 2 
Response-Code: 200 
Encoding: ISO-8859-1 
Content-Type: text/xml 
Headers: {Content-Length=[1011], content-type=[text/xml], 
Server=[IRS/1.0.18.0 guz]}
Payload: <?xml version="1.0" encoding="UTF-8"?> 
```

# sql-server-2008 - 在 DeprovisionStore 之前是否需要 DeprovisionScope？

> ID：12482502
> 
> 赞同：1
> 
> 时间：2012-09-18T18:03:57.967
> 
> 标签：sql-server-2008, synchronization, sync, microsoft-sync-framework

我想取消配置数据库中的所有内容。

当我测试它时，[DeprovisionStore](http://msdn.microsoft.com/en-us/library/microsoft.synchronization.data.sqlserver.sqlsyncscopedeprovisioning.deprovisionstore.aspx)方法本身会清除所有内容，包括表、触发器、存储过程和模板。

但是，在这篇[使用 Sync Framework 同步 SQL Server 和 SQL Azure](http://blogs.msdn.com/b/zkap/archive/2012/04/12/synchronize-sql-server-and-sql-azure-using-sync-framework.aspx)文章中，在 DeprovisionStore 之前使用了 DeprovisionScope。

```
onPremiseSqlDepro.DeprovisionScope("product");
onPremiseSqlDepro.DeprovisionStore(); 
```

在 DeprovisionStore 之前真的需要 DeprovisionScope 吗？

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-19T00:06:42.030

不，它不是必需的。

如果要完全取消配置整个数据库，只需直接调用 DeprovisionStore 即可。

如果您只想取消配置特定范围或模板并保留其他范围/模板，则使用 DeprovisionScope 和 DeprovisionTemplate。

# javascript - JavaScript 函数调用在 IE 中不起作用

> ID：12482508
> 
> 赞同：1
> 
> 时间：2012-09-18T18:04:13.513
> 
> 标签：javascript, internet-explorer, function, call

这里有一些问题。似乎只在 IE 8（或 7）中失败。如果你帮助我，我会很高兴。

```
$.ajax({type: "POST",
     url:"update_data.php",
     data: {
            table:table,
            key:key,
            obj_name:"New Element"                                  
           },
           success: function(data){
           $('.ajax').html($('.ajax input').val());
           $('.ajax').removeClass('ajax');
           $.get("get_process.php", {
                    func: "software",
                    selected: "All_Software"
           }, function(response){
              $('#result_software').fadeOut();
              setTimeout("finishAjax_software('result_software', '"+escape(response)+"')", 400);
                       })
              return false;
                            }
                    });updateSelect('software'); 
```

这里是updateSelect的代码：

```
function updateSelect(id){
            $('#'+id).html(''); 
            $.get("get_process.php", {
                    options: id,
                }, 
                function(response){
                    $('#'+id).fadeOut();
                    setTimeout("finishAjax_"+id+"('"+id+"', '"+escape(response)+"')", 1000);
            })    
        } 
```

所以 updateSelect 调用在 IE 8 中不起作用。请帮帮我

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-18T18:19:08.217

尝试：

```
 function updateSelect(id){
        $('#'+id).html(''); 
        $.get("get_process.php", {
                options: id     // <-- remove trailing comma
            }, 
            function(response){
                $('#'+id).fadeOut();
                setTimeout("finishAjax_"+id+"('"+id+"', '"+escape(response)+"')", 1000);
            }
        )    
    } 
```

# iphone - NSInvocationOperation 和 AmazonServiceRequestDelegate

> ID：12482512
> 
> 赞同：0
> 
> 时间：2012-09-18T18:04:26.913
> 
> 标签：iphone, objective-c, ios, file-upload, amazon-s3

我的应用程序在从 NSInvocationOperation 调用的方法中创建了一个 S3PutObjectRequest。PutObjectRequests 委托是该视图的视图控制器。如果我删除委托，则 put 请求成功完成。但是，当我尝试使用

```
-(void)request:(AmazonServiceRequest *)request didCompleteWithResponse:    
(AmazonServiceResponse *)response 
```

通过添加委托，它永远不会完成，我无法访问我试图上传的文件。关于为什么会发生这种情况的任何想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-21T23:32:39.383

使用时`AmazonServiceRequestDelegate`，[这篇博文](http://mobile.awsblog.com/post/Tx3RYJD3PLLN161/Using-the-AWS-SDK-for-iOS-Asynchronously-Part-II-AmazonRequestDelegate-Best-Prac)可能会有所帮助。该帖子的第一个建议适用于您的案例：

*   避免在后台线程中使用 AmazonServiceRequestDelegate

`NSInvocationOperation`自动创建一个后台线程，`NSRunLoop`当后台线程完成处理后，负责调用委托方法的那个就消失了。

# iphone - EXD_BAD_ACCESS 将数据传回委托

> ID：12482514
> 
> 赞同：1
> 
> 时间：2012-09-18T18:04:38.710
> 
> 标签：iphone, xcode, delegates

我是一个相对较新的 iPhone 开发人员，并且在构建我的第二个 iPhone 应用程序方面取得了很大进展。在我现在正在构建的应用程序中，我正在使用一些协议和委托进行一些代码分离，以便我在整个代码的各个地方重用我的一些代码。

这就是我想要发生的事情：

1.  CITRootViewController 创建 CITReportCreator 类的实例，将自身作为属性传递，以便 reportCreator 可以打开其他视图控制器等。
2.  CITReportCreator 类被声明为实现 CITImageCaptureDelegate 协议，该协议在 CITImageCaptureViewController 文件中声明。
3.  CITImageCaptureViewController 定义了委托协议，并有一个方法将数据和引用传回给子视图控制器，以便 CITReportCreator 可以与其数据交互，关闭相关的 XIB 等。

我相信我正确建立了委托和协议，并验证了我的“委托”对象在被调用时仍然包含数据，但是当我的视图控制器尝试将数据传递回委托时，我得到了一个 EXC_BAD_ACCESS 方法这行代码：

```
 [self.delegate childViewControllerDidFinish:self]; 
```

这是我其余代码的很大一部分。我通过使用 CITRootViewController 作为我的委托而不是 CITReportCreator 类来完成这项工作，但是现在我正在分离代码，有些东西已经坏了。

CITReootViewController.m（调用 Report Creator 的视图控制器）

```
//create a nrew report
-(IBAction)createReport:(id)sender {
    CITReportCreator *report = [CITReportCreator alloc];
    [report createNewReport:self];
} 
```

CITReportCreator.h

```
#import <Foundation/Foundation.h>
#import <UIKit/UIKit.h>
#import "CITImageCaptureViewController.h"

@interface CITReportCreator : NSObject <CITImageCaptureDelegate>

@property (strong, nonatomic) NSArray *imageList;
@property (nonatomic) NSInteger imageIndex;

-(int) createNewReport:(UIViewController *)parent ;

//Delegate Methods
-(void) childViewControllerDidFinish:(UIViewController*)viewController;
@end 
```

和 CITReportCreator.m

```
#import "CITReportCreator.h"

@implementation CITReportCreator
{
    UIViewController *parentController;
}

@synthesize  imageList;
@synthesize imageIndex;

-(int) createNewReport:(UIViewController *)parent
{

//store a reference to the parent view controller
parentController = parent;

// init code....

//head to the first image capture view
[self  startImageCapture];
return 0;
}  

-(int)startImageCapture
{
//pull the image name from the array of images
NSString *imageName = [imageList objectAtIndex:imageIndex];

//prep the image capture controller
CITImageCaptureViewController *capture = [[CITImageCaptureViewController alloc] initWithNibName:@"CITImageCaptureViewController" bundle:nil];

//Assign the capture controller's delegate
capture.imageName = imageName;
capture.delegate = self;

//Display the capture controller
[parentController presentModalViewController:capture animated:YES];

return 0;
}

//a break point set here never gets hit.
-(void) childViewControllerDidFinish:(UIViewController*)viewController;
{
[viewController dismissModalViewControllerAnimated:YES]; 
}

@end 
```

最后，CITImageCaptureViewControllers

CITImageCaptureViewController.h

```
#import <UIKit/UIKit.h>
@protocol CITImageCaptureDelegate <NSObject>
-(void) childViewControllerDidFinish:(UIViewController*)viewController;
@end

@interface CITImageCaptureViewController : UIViewController 
{
id<CITImageCaptureDelegate> delegate;
}

@property (nonatomic,assign) id<CITImageCaptureDelegate> delegate;
@property (nonatomic, assign) NSString *imageName;

//continue button pressed method
-(IBAction)continueButtonPressed:(id)sender;

@end 
```

和 .m 文件

```
#import "CITImageCaptureViewController.h"

@interface CITImageCaptureViewController ()
@end

@implementation CITImageCaptureViewController
@synthesize navItem;

@synthesize  imageName;
@synthesize  delegate = _delegate; //i think this may be part of the problem

//cutting out initWithNibName, viewDidLoad, etc...

- (IBAction)continueButtonPressed:(id)sender
{
[self.delegate childViewControllerDidFinish:self];
} 
@end 
```

我发现委托和协议没有那么简单，但我猜我在某处遗漏了一个小改动。你能帮助我朝着正确的方向前进吗？

# php - sql查询父母的结果

> ID：12482519
> 
> 赞同：0
> 
> 时间：2012-09-18T18:05:01.993
> 
> 标签：php, mysql, sql

需要一些帮助来完成我的代码它的作用是在我的数据库的表中搜索指向 parent_sections=2 的所有部分，然后在选择标记中打印结果我想要一些关于 sql 查询的帮助以检查 parent_sections =2 有孩子的，如果是这样，无论如何都要用 optgroup 样式打印它们，请检查下面的图片，他们解释了我需要什么。

PHP & SQL 代码：

```
<?php
include('../application_top.php');

function get_title_sections($id){
$sections_query = tep_db_query("select title_sections_detail from  sections_detail  where  id_sections = '" . (int)$id . "' and id_lang='0' order by title_sections_detail");
$result='';
    while ($sections = tep_db_fetch_array($sections_query)) {
 $result=$sections['title_sections_detail']; 
    }
    return $result;
}
?>

<form>
<select name="sections"> 
<option selected="selected" value="">Please choose an option</option>                           
        <?php   
        $sections_sql=tep_db_query("select p.id_sections, d.title_sections_detail as title from sections p, sections_detail d where  p.id_sections=d.id_sections and d.id_lang='0' and p.status_sections='1' and p.parent_sections='2'  order by d.title_sections_detail asc");         

    while ($sections = tep_db_fetch_array($sections_sql)) {
    $id_sec=$sections['id_sections'];
    $title_sec=get_title_sections($id_sec);
 ?>     
    <option value="<?php echo $id_sec ?>" ><?php echo $title_sec ?></option>

<?php }?>
</select>
</form> 
```

SQL 表部分： ![表部分](../Images/0c9963d26c80dfeb7ca45cd56e3a8b38.png)

SQL 表sections_detail： ![表sections_detail](../Images/f75557bdc88aea490c99566529395303.png)

结果：

![结果](../Images/fb97ef4d2267b80846391fecaeda0a0d.png)

结果我需要：

![结果我需要](../Images/256e874eb4f549ef3be0dc42d07ecfd1.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-18T19:52:47.253

这是我的解决方案：

```
<?php

include('../application_top.php');

function load_sections($id_parent) {
    $sections_sql = tep_db_query("select p.id_sections, d.title_sections_detail as title 
                                    from sections p, sections_detail d 
                                   where p.id_sections=d.id_sections 
                                     and d.id_lang='0' 
                                     and p.status_sections='1' 
                                     and p.parent_sections='".$id_parent."'  
                                   order by d.title_sections_detail asc");
    $sect = array();
    while ($sections = tep_db_fetch_array($sections_sql)) {
        $sections['childs'] = load_sections($sections['id_sections']);
        $sect[] = $sections;
    }
    return($sect);
}

function print_section($sect) {
    if (count($sect['childs'])) {
        echo "<optgroup label=\"".htmlentities($sect['title'])."\">\n";
        foreach ($sect['childs'] as $subsect) {
            print_section($subsect);
        }
        echo "</optgroup>\n";
    } else {
        echo "<option value='".$sect['id_sections']."'>".htmlentities($sect['title'])."</option>\n";
    }
}

?>
<!DOCTYPE html>
<html>
<body>
    <form>
        <select name="sections"> 
            <option selected="selected" value="">Please choose an option</option>                           
            <?php foreach (load_sections(2) as $sect) print_section($sect); ?>
        </select>
    </form>
</body>
</html> 
```

请注意，不允许嵌套操作组；只允许一个 optgroup 级别，您也可以[在此处](https://stackoverflow.com/questions/1037732/nesting-optgroups-in-a-dropdownlist-select)阅读。

# java - 如果我的 java 函数的返回值是仅在运行时知道的两个可能对象之一，我的 java 函数应该返回什么对象？

> ID：12482522
> 
> 赞同：3
> 
> 时间：2012-09-18T18:05:09.967
> 
> 标签：java, object, subclass, superclass

我有一个名为 PageObject 的超类，然后是两个名为 AlphaPage 和 BetaPage 的子类，它们继承了 PageObject。函数“selectPage()”将返回这些页面之一，但要返回的特定页面只有在运行时才能知道。

那么，函数的返回对象应该是什么，才能避免将子类之一强制转换为函数调用的返回值呢？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-18T18:07:05.863

如果调用者想要特定类型，则*必须*强制转换，因为该信息仅在执行时才知道。你应该返回`PageObject`，基本上。

当然，如果调用者不需要任何特定的`AlphaPage`或`BetaPage`- 如果他们可以使用声明的方法（可能是抽象的）`PageObject`，那么就不需要强制转换。那将是理想的-使用多态性来处理差异。这实际上取决于调用者需要做什么。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-18T18:13:03.860

理想情况下，我建议定义一个`Interface`将由两者实现的共同点`AlphaPage`和`BetaPage`，因为两者都会有很多共同的行为。

或者，您可以声明一个抽象类（`PageObject`在您的情况下可能是类），它可以实现您的页面可能具有的任何公共代码。

所以我的回答是返回类型应该是一个常见的超类型（接口或抽象类）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-18T18:12:43.157

您可以定义一个接口并指定页面应提供哪些功能，然后您的页面类将实现此接口，从而提供所需的功能

```
public interface pageable {

pageable selectPage();
    ...
}

PageObject implements pageable {

    pageable selectPage(){
       ...
    }

... 
```

# linux - 用于arm linux的QT构建应用程序

> ID：12482523
> 
> 赞同：3
> 
> 时间：2012-09-18T18:05:12.533
> 
> 标签：linux, qt, embedded, arm

当涉及到我的 arm-linux 的 QT 和交叉编译应用程序时，我有点困惑：

到目前为止，我有一个在我的 AT91SAM9263-EK 上运行的 linux 和一个适当的文件系统，包括通过 buildroot 构建的 QT 库。

我还在我的 ubuntu 上构建了 QT-4.8。

现在我想构建一个示例应用程序：

1.  我使用 qmake 在我的 ubuntu 上的 QT 的示例文件夹中创建了一个 makefile；我在 mkspecs/qws/linux-arm-g++ 中使用了给定的 qmake.conf。

2.  执行 make 时出现错误，因为它包含 qatomic_i386.h 和消息“错误：'asm' 中的不可能约束”。这个头文件显然与我的 arm 工具链不匹配。

我的问题：如何在我的 ubuntu 上配置 Qt 为我的嵌入式 linux on arm 构建 Qt 二进制文件？我是否需要包含由 arm 工具链构建的任何库？

任何帮助表示赞赏！

问候

编辑：我使用 -spec 标志并将路径传递给“qmake.conf”所在的“mkspecs/qws/arm-linux-g++”。我在这里没有更改任何内容，因为我不知道哪个 qmake 变量与链接到我的 arm 相关库相关。所以使用了正确的编译器，我可以验证 make 过程何时开始。但我观察到在一个名为 qconfig.h 的配置文件中有一个 ARCH 标志设置为 i386，但我不知道如何配置它。我认为我不应该手动编辑此文件。

EDIT2：有人知道文件 qconfig.h 背后的内容是什么？我应该手动调整它吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-19T19:19:52.517

我会自己解决的：）

在挣扎了一段时间并浏览了网页后，我更深入地了解了一切是如何协同工作的。我不明白如何为我的 ARM 目标设备生成可执行文件。我想出了两件事：

1.  不要在 PATH 变量的开头添加 X11 的 QT 路径。这可能会弄乱您的交叉编译。

2.  相应地编辑 qmake.conf。为目标设备添加你的库构建，在我的例子中，它位于 buildroot 中。将这些行添加到您的 qmake.conf 文件中：
    QMAKE_CFLAGS += -O3 -march=armv5te
    QMAKE_CXXFLAGS += -O3 -march=armv5te
    QMAKE_INCDIR_QT = /home/user/arm/toolchain/buildroot-2010.11/output/staging/usr/include
    QMAKE_LIBDIR_QT = /home/user/arm/toolchain/buildroot-2010.11/output/staging/usr/lib

我现在让它运行起来。谢谢大家！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-18T18:47:56.097

是的，您要么在工具链中提供 Qt 库，要么告诉 qmake 在哪里可以找到它们。另外，我怀疑您在没有 -spec 参数的情况下调用 qmake。如果您使用的是在您的发行版中找到的 qmake，它将使用默认规范，我猜这不是 arm。添加 -spec 参数并将其指向 arm mkspec。此外，确保生成的 g++ 命令链接到为 arm 编译的正确 Qt 库。

* * *

## 回答 #3

> 赞同：-3
> 
> 时间：2012-09-19T05:25:26.143

`QtSDK`在使用嵌入式 linux 构建应用程序之前，您应该安装它。恐怕你`QtSDK`现在只有 x86。安装嵌入式 linux后`QtSDK`，通常将 qws/linux-arm-g++ 作为默认 mkspace。如果您没有`QtSDK`嵌入式 linux，您可以从源代码构建它。然后运行`qmake`为您的应用程序创建 Makefile。

```
$QTDIR_FOR_ARM/qmake 
```

参考： [为嵌入式 Linux 安装 Qt](http://doc.qt.digia.com/4.7-snapshot/qt-embedded-install.html)和[为嵌入式 Linux 应用程序交叉编译 Qt](http://doc.qt.digia.com/4.7-snapshot/qt-embedded-crosscompiling.html)

# batch-file - 从 dsget user -hmdir 解析文件路径并在网络使用中使用它来映射驱动器

> ID：12482524
> 
> 赞同：0
> 
> 时间：2012-09-18T18:05:16.690
> 
> 标签：batch-file

所以，这是我的情况，我的任何用户在 AD 中配置了 homedrive 并仅通过 WiFi 登录，丢失驱动器，所以我想制作一个批处理脚本，从 AD 获取文件路径，然后映射它。所以这个命令获取路径

dsquery domainroot -samid %username% | dsget 用户 -hmdir

但它返回

hmdir \servername\servershares\share dsget 成功

所以我需要解析出 \servername\severshare\share 并将其分配给一个变量，然后将其传递给 NET USE 命令。我对批量字符串管理感到非常沮丧。任何有关如何解析文件路径的帮助将不胜感激。谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-18T18:27:13.810

假设您的 then 中没有空格，`\servername\servershares\share`则可以使用 FOR/F 循环来解决。

```
FOR /F "usebackq tokens=* skip=1 delims=" %%A in (`"dsquery domainroot -samid %username% | dsget user -hmdir"`) do (
    set "share=%%A"
    goto :leaveLoop
)
:leaveLoop
echo %share% 
```

# php - Codeigniter 从 HTML 电子邮件中去除字符

> ID：12482530
> 
> 赞同：4
> 
> 时间：2012-09-18T18:05:43.100
> 
> 标签：php, html, codeigniter, email

我开发了一个 CMS，当用户忘记他/她的密码/系统将生成一个新的随机密码并通过电子邮件将其发送给用户，但是当我打开电子邮件时，它会自动从我的电子邮件正文中删除一些字符，替换为 (= ）。

这是发送后的电子邮件，您可以以粗体看到混乱的部分

亲爱的 Noor Shirzai 发送这封电子邮件是**为了**通知您您的密码已**重置**。Bellow 是您的新密码： 您的用户名是：mohib 您的新密码**=word**是：IOODiGhcYYrL 请在登录系统后立即更改您的**<=trong>新密码，****以避免**任何安全问题。

**注意：**当我使用纯 PHP 邮件功能发送此邮件时，它工作正常。

下面是我的电子邮件功能和电子邮件配置文件代码：

我将非常感谢我得到的任何帮助。谢谢

我发送邮件的功能：

```
if (! function_exists('send_password'))
{
    function send_password($user_info, $password)
    {
        $CI =& get_instance();

        $username           = $user_info['username'];
        $name               = $user_info['firstname'].' '.$user_info['lastname'];
        $email              = $user_info['email'];

        $subject            = 'Your New Password : Noor CMS |'.$CI->config->item('site_name');
        //email body
        $message            = '';

        $message            .= '<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">';
        $message            .= '<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">';
        $message            .= '<meta content="text/html; charset=utf-8" http-equiv="Content-type">';
        $message            .= '<head>';
        $message            .= '<title> Your New Password : Noor CMS | '.$CI->config->item('site_name').' </title>';
        $message            .= '</head>';
        $message            .= '<body>';
        $message            .= 'Dear '.trim($name);
        $message            .= 'This Email was sent to you in order to inform you that your <strong>Password</strong> has been reset.<br/>';
        $message            .= 'Bellow is your <strong> New Password :</strong><br/>';
        $message            .= 'Your <strong>Username </strong>is : <strong> '.trim($username).'</strong><br/>';
        $message            .= 'Your <strong>New Password </strong>is : <strong> '.trim($password).'</strong><br/>';
        $message            .= 'Please change your <strong>New Password</strong> as soon as you login to the system in order to avoid any security issues.<br/>';
        $message            .= '</body></html>';

        //prepare email and send
        $CI->email->from($CI->config->item('admin_email'), $CI->config->item('admin_name'));
        $CI->email->to($email);
        $CI->email->subject($subject);
        $CI->email->message($message);

        if ($CI->email->send())
        {
            return TRUE;
        }

        return FALSE;
    }
} 
```

email.php 配置文件如下：

```
$config['useragent']            = 'NoorCMS';
$config['protocol']         = 'mail';
$config['mailpath']         = '/usr/sbin/sendmail';
$config['smtp_host']            = '';
$config['smtp_user']            = '';
$config['smtp_pass']            = '';
$config['smtp_port']            = 25;
$config['smtp_timeout']         = 10;
$config['wordwrap']         = FALSE;
$config['wrapchars']            = 100;
$config['mailtype']         = 'html';
$config['send_multipart']       = FALSE;
$config['charset']          = 'utf-8';
$config['validate']         = FALSE;
$config['priority']         = 1;
$config['crlf']             = '\n';
$config['newline']          = '\n';
$config['bcc_batch_mode']   = FALSE;
$config['bcc_batch_size']       = 200; 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-22T14:15:39.597

我遇到了这个问题 - 您需要更新您的电子邮件配置：

```
$config['newline']  = "\r\n";
$config['crlf'] = "\r\n"; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-19T04:57:41.607

要尝试缩短行长，请执行以下操作：

```
 $message            = array();

    $message[] = '<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">';
    $message[] = '<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">';
    $message[] = '<meta content="text/html; charset=utf-8" http-equiv="Content-type">';
    $message[] = '<head>';
    $message[] = '<title> Your New Password : Noor CMS | '.$CI->config->item('site_name').' </title>';
    $message[] = '</head>';
    $message[] = '<body>';
    $message[] = 'Dear '.trim($name);
    $message[] = 'This Email was sent to you in order to inform you that your <strong>Password</strong> has been reset.<br/>';
    $message[] = 'Bellow is your <strong> New Password :</strong><br/>';
    $message[] = 'Your <strong>Username </strong>is : <strong> '.trim($username).'</strong><br/>';
    $message[] = 'Your <strong>New Password </strong>is : <strong> '.trim($password).'</strong><br/>';
    $message[] = 'Please change your <strong>New Password</strong> as soon as you login to the system in order to avoid any security issues.<br/>';
    $message[] = '</body></html>';

    $message = implode(PHP_EOL, $message); 
```

# linux - BlazeDS：日志文件存储在服务器的什么位置？

> ID：12482531
> 
> 赞同：0
> 
> 时间：2012-09-18T18:05:45.177
> 
> 标签：linux, apache-flex, glassfish, blazeds

如果我的`services-config.xml`文件中有以下内容用于在 linux 服务器上设置 BlazeDS 日志文件，它会将日志文件保存在哪里？或者，输出是否默认显示在 Flash Builder 4.6 中（例如，日志文件中没有更多信息）？

我一直在努力解决这个问题

[http://livedocs.adobe.com/blazeds/1/blazeds_devguide/help.html?content=services_logging_3.html](http://livedocs.adobe.com/blazeds/1/blazeds_devguide/help.html?content=services_logging_3.html)

但一直无法弄清楚。我一定遗漏了一些明显的东西。任何建议表示赞赏。

```
<logging>
    <target class="flex.messaging.log.ConsoleTarget" level="Error">
        <properties>
            <prefix>[BlazeDS] </prefix>
            <includeDate>true</includeDate>
            <includeTime>true</includeTime>
            <includeLevel>true</includeLevel>
            <includeCategory>true</includeCategory>
        </properties>
        <filters>
            <pattern>Endpoint.*</pattern>
            <pattern>Service.*</pattern>
            <pattern>Configuration</pattern>
        </filters>
    </target>
</logging> 
```

有没有办法可以指定要写入日志文件的位置？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-19T15:38:25.390

取自您提供的链接：

> **设置日志记录目标**
> 
> 默认情况下，服务器将日志消息写入 System.out。在目标元素的类属性中，您可以指定 flex.messaging.log.ConsoleTarget（默认）将消息记录到标准输出，**或者将`flex.messaging.log.ServletLogTarget`消息记录到应用程序服务器的 servlet 的默认记录机制。**

因此，您要么必须在应用程序服务器中配置日志记录（对于 Tomcat： http: [//tomcat.apache.org/tomcat-7.0-doc/logging.html](http://tomcat.apache.org/tomcat-7.0-doc/logging.html)），要么在 servlet 中使用类似 log4j 的东西。

**services-config.xml**应该看起来像这样：

```
<target class="flex.messaging.log.ServletLogTarget" level="warn">
        <properties>
            <prefix>[BlazeDS] </prefix>
            <includeDate>true</includeDate>
            <includeTime>true</includeTime>
            <includeLevel>true</includeLevel>
            <includeCategory>true</includeCategory>
        </properties>
        <filters>
            <pattern>Endpoint.*</pattern>
            <pattern>Service.*</pattern>
            <pattern>Message.*</pattern>
            <pattern>DataService.*</pattern>
            <pattern>Configuration</pattern>
        </filters>
    </target>
</logging> 
```

* * *

旁注：我们使用 log4j 和[spring-flex](http://www.springsource.org/spring-flex)来`org.springframework.flex.core.CommonsLoggingTarget`处理 BlazeDS 输出。

**服务-config.xml**

```
<logging>
    <target class="org.springframework.flex.core.CommonsLoggingTarget" level="debug">
        <properties>
            <categoryPrefix>blazeds</categoryPrefix>
        </properties>
    </target>
</logging> 
```

**log4j.properties**

```
log4j.appender.myAppLog=org.apache.log4j.RollingFileAppender
log4j.appender.myAppLog.File=${catalina.base}/logs/myAppLog.txt

log4j.appender.myBlazeLog=org.apache.log4j.RollingFileAppender
log4j.appender.myBlazeLog.File=${catalina.base}/logs/myBlazeLog.txt

log4j.rootLogger=DEBUG,myAppLog
log4j.logger.blazeds=ALL,myBlazeLog 
```

# javascript - 使用 jquery 清除单选按钮列表选择

> ID：12482532
> 
> 赞同：11
> 
> 时间：2012-09-18T18:05:55.020
> 
> 标签：javascript, jquery, asp.net

用户在文本框中输入文本后，我想清除单选按钮列表选择。我尝试了以下代码，但它似乎没有工作，也没有显示任何错误。如果有任何建议，请告诉我。

```
function ClearRadioButtonList() {
    var checkboxlistid9 = "#<%= rblLst.ClientID %>";
    $('.checkboxlistid9').attr('checked',false);     
}

<telerik:RadMaskedTextBox ID="txtCode" runat="server" Mask="###-##-####" SelectionOnFocus="CaretToBeginning">
    <ClientEvents  OnBlur="ClearRadioButtonList" />
</telerik:RadMaskedTextBox>

<asp:RadioButtonList ID="rblLst" runat="server" RepeatDirection="Horizontal">
    <asp:ListItem Value="1">Unknown</asp:ListItem>
    <asp:ListItem Value="2">Not Applicable</asp:ListItem>
</asp:RadioButtonList> 
```

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-09-18T18:10:06.900

代替：

```
$('.checkboxlistid9').attr('checked',false); 
```

尝试：

```
$('.checkboxlistid9').removeAttr('checked'); 
```

另外我认为你的 jQuery 选择器是错误的

```
$('.checkboxlistid9') 
```

我没有看到`checkboxlistid9`你的课程`asp:RadioButtonList`

将查询选择器更改为：

```
$("table[id$=rblLst] input:radio:checked").removeAttr("checked"); 
```

或者

```
$("table[id$=rblLst] input:radio").each(function (i, x){
    if($(x).is(":checked")){
        $(x).removeAttr("checked");
    }
}); 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-09-18T18:20:26.400

The radio buttons will be descendants of the element that represents the `RadioButtonList`, you can select them with `#<%= rblLst.ClientID %> input[type=radio]` and use [`.prop()`](http://api.jquery.com/prop/) to remove the checked property.

```
function ClearRadioButtonList() {
    $("#<%= rblLst.ClientID %> input[type=radio]").prop('checked',false);     
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-18T18:12:52.823

你应该使用[`prop()`](http://api.jquery.com/prop/). 另外，[`each()`](http://api.jquery.com/each/)要迭代：

```
$('.checkboxlistid9').each(function (index, elem){
    $(elem).prop('checked',false);
}) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-18T18:10:28.150

```
$('.checkboxlistid9').removeAttr('checked'); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2018-06-16T08:46:33.673

如果是基于 i-checks 的动态单选按钮列表

```
<table id="Body_TTBody_rblAttendanceStatus" class="i-checks rblStatus">
<tbody>
<tr>
<td>
    <div class="iradio_flat-red" style="position: relative;">
        <input id="Body_TTBody_rblAttendanceStatus_0" type="radio">
    </div>
    <label for="Body_TTBody_rblAttendanceStatus_0" class="">Absent</label></td>
</tr>
<tr>
<td>
    <div class="iradio_flat-red" style="position: relative;">
        <input id="Body_TTBody_rblAttendanceStatus_1" type="radio">
    </div>
    <label for="Body_TTBody_rblAttendanceStatus_1" class="">Planned Leave</label> 
</td>
</tr>
<tr>
 <td>
    <div class="iradio_flat-red" style="position: relative;">
        <input id="Body_TTBody_rblAttendanceStatus_2" type="radio">
    </div>
    <label for="Body_TTBody_rblAttendanceStatus_2" class="">Present</label></td>
</tr>
<tr>
<td>
    <div class="iradio_flat-red" style="position: relative;">
        <input id="Body_TTBody_rblAttendanceStatus_3" type="radio">
    </div>
    <label for="Body_TTBody_rblAttendanceStatus_3" class="">Unplanned Leave</label> 
 </td>
 </tr>
</tbody>
</table>

 <script type="text/javascript">
 jQuery('#Body_TTBody_rblAttendanceStatus > tbody > tr> td').each(function (index, value) {
  if ($(value).find('input[type="radio"]').prop('checked')) {
     $(value).find('input[type="radio"]').prop('checked', false);
     $(value).find('input[type="radio"]').closest("div").removeClass("checked");
    }
});
</script> 
```

# perl - perl 只打印数组的最后一行

> ID：12482535
> 
> 赞同：2
> 
> 时间：2012-09-18T18:06:15.420
> 
> 标签：perl

我正在尝试打印数组，但输出仅包含数组的最后一行。部分代码如下。

```
open OUT, "> /myFile.txt"
    or die "Couldn't open output file: $!";

foreach (@result) {

    print OUT;
} 
```

输出是

```
List Z 
```

这是最后一行，但是当我做`print "@result"`输出时

```
List A

List B

List C  so on... 
```

我有点困惑为什么同一阵列上的结果不同。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-18T18:15:24.963

凭直觉，我尝试添加`\r`到输入行的末尾，果然，它产生了一种错觉，即只有输入的最后一行被打印到文件中。这是测试它的代码：

```
use strict;
use warnings;

my @result = map "$_\r", 'A' .. 'Z';

open (OUT, "> myFile.txt") or die("Couldn't open output file: $!");
foreach (@result) {
    print OUT ;
} 
```

您可能已经`chomp`对来自不同操作系统（DOS、Windows）的文件的行执行了操作，这不会去除`\r`行尾。因此，当打印行时，行会相互覆盖。

如果这是错误的，解决方案是使用该`dos2unix`工具来修复您的文件，或使用：

```
s/\s+\z//; 
```

剥离你的换行符。

您可以使用模块检查您的输入[`Data::Dumper`](http://search.cpan.org/perldoc?Data::Dumper)，使用选项`Useqq`，例如：

```
use Data::Dumper;
$Data::Dumper::Useqq = 1;
print Dumper \@result; 
```

如果这些空白字符在您的输出中，那么它们将是可见的。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-19T12:12:53.133

问题就在这里

```
open OUT, "> /myFile.txt" 
```

这应该是

```
open OUT, ">>", "/myfile.txt" 
```

您编写的内容会覆盖 foreach(@result) 循环的每次迭代的整个文件。您打算做的是附加到它（“>>”）。">>" 追加，">" 覆盖。

还要注意我是如何将“>> /myfile.txt”分解为“>>”、“/myfile.txt”的。对于不太具体的开放应用程序，这既更安全，也更健壮。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-18T18:35:27.930

通过清除行尾的空格并在打印时将其添加回来，可以轻松修复来自任何平台的外行终止符

像这样

```
open my $out, '>', '/myFile.txt' or die "Couldn't open output file: $!";

foreach (@result) {
  s/\s+$//;
  print $out "$_\n";
} 
```

或者

```
foreach my $line (@result) {
  $line =~ s/\s+$//;
  print $out "$line\n";
} 
```

# db2 - 如何为所有表上的用户授予选择权限？

> ID：12482536
> 
> 赞同：2
> 
> 时间：2012-09-18T18:06:23.717
> 
> 标签：db2

我的 DB2 数据库中有一个用户，我想授予对给定模式的所有表和视图的选择权限。关于如何将其作为一个 SQL 语句执行的任何想法？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-22T04:04:09.467

为了将选择授予给定用户，您必须为给定模式的每个表和视图“生成”句子。您可以通过 CLP 使用如下查询来执行此操作：

```
db2 -x "select 'grant select on table ' || rtrim(tabschema) || '.' || rtrim(tabname) || ' to user JOHN_DOE' from syscat.tables where tabschema like 'FOO%' and (type = 'T' or type = 'V')" | db2 +p -tv 
```

此命令行将为用户 JOHN_DOE 生成以 FOO 开头的任何模式的所有表 (T) 和视图 (V) 的授权。

如果你有很多表，输出会很大，内部缓冲区会被填满。通过为一组较小的表生成授权来重新发出该命令。

如果您不确定要执行什么，请发出不带最后部分的上一个命令 (| db2 +p -tv)，这会将命令写入标准输出。但是，这部分是最重要的，因为它执行生成的输出。

更多详情，请查看信息中心或我的博客[http://angocadb2.blogspot.com/2011/12/ejecutar-la-salida-de-un-query-en-clp.html](http://angocadb2.blogspot.com/2011/12/ejecutar-la-salida-de-un-query-en-clp.html)（西班牙语）

# git - 有没有办法列出 git 存储库中的所有当前文件？

> ID：12482538
> 
> 赞同：1
> 
> 时间：2012-09-18T18:06:35.243
> 
> 标签：git

我最近在我的服务器上创建了一个 git 存储库。不幸的是，在我上次提交和推送期间，我不小心错误地添加了所有目标文件和其他一些垃圾文件。现在，当我在服务器端项目上执行 git pull 时，我收到有关覆盖我的目标文件等的中止警告，我必须去删除所有问题文件。`git add -A .`一旦删除然后提交，我想使用选项从存储库中删除所有这些文件（我认为这是正确的方法）。所以基本上为了确保我摆脱一切，我想要一种方法来获取将从存储库中提取的文件列表 - 是否有执行此操作的命令？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-18T18:11:02.547

您可以在添加所有内容的提交之前将 HEAD 重置为提交，然后执行：`git clean -xdf`丢弃工作目录中的所有内容。警告：这将清除所有未提交的文件。如果那不是您想要的，请不要使用`git clean`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-18T19:10:03.817

这没有任何意义。你不应该关心拉了什么。Git 使用整个文件树的快照进行操作。如果您已提交文件，则提交 ID 为 a1b2c3，并且如果任何具有提交 a1b2c3 的 repo 中的任何其他工作副本具有完全相同的文件集。（我假设你有干净的工作副本）。

因此，您应该在本地更改（删除）您的文件，提交并推送您的更改并在服务器上签出。

# android - 多个异步任务

> ID：12482543
> 
> 赞同：0
> 
> 时间：2012-09-18T18:06:44.337
> 
> 标签：android, android-asynctask

这是一些特定于设计的问题，但我正在寻找正确的建议。

在我的应用程序中，我有 6 个页面 A、B、C ......每个页面都会从服务器下载数据并显示它。在这种情况下，在下面提到的方法中哪一种会好。

1.为每个 A、B、C 编写内部 asynctask 类 2.为这些活动中的每一个编写单独的 asynctask，如 asyntaskA、asyntskB 等 3.编写单个 asynctask 并通过 requestcontroller 类路由每个活动的请求，该类通过创建 asyctask 的实例传递上下文，url参数

如果采用第二种方法，是否有可能在其仍在运行的同时在状态下运行一个`Activity`又一个？`Activity``onpause``asynctask`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-18T18:46:31.473

在每个页面中，如果您正在执行相同类型的操作（如本例中，下载数据并显示它），则无需编写单独的`AsyncTask`类。只需根据需要创建尽可能多的实例并调用该`execute()`方法。`AsyncTask`类将以线程安全的方式处理这个问题。

您问题的第二部分有点不清楚，但如果您的意思是在活动之间切换，则可以使用单个`AsyncTask`. 您需要保存和恢复活动状态。

如果您执行的操作很耗时，比如说几秒钟以上，那么使用`AsyncTask`. 更好的选择是`Service`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-18T18:36:29.023

多个 AsyncTask 没有问题。在我的一个应用程序中，我有一个带有图像的网格视图，并且每个图像加载和生成缩略图图像都有一个 AsyncTask。它们都很好地并行运行。

# php - 为什么 for(;;) 有效？

> ID：12482547
> 
> 赞同：2
> 
> 时间：2012-09-18T18:06:53.430
> 
> 标签：php, syntax

我在工作中查看了一些代码，发现了一些我以前没有遇到过的东西：

```
for (; ;)
{
   // Some code here
   break;
} 
```

我们一直调用包含它的函数，我最近才进去看看它是如何工作的。为什么这行得通，它是否记录在某处？

在这种情况下，似乎while循环更合适......

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-18T18:08:16.913

它本质上与`while(true)`. 它没有任何初始化，在迭代之间没有任何改变，并且在没有任何东西使它为假的情况下，假设条件为真。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-18T18:10:53.830

这是一个无限循环。

通常你会有类似的东西：

```
for ($i=0; $i<10; $i=$i+1) 
```

但是您可以省略任何部分。

这些都是有效的：

```
for ($i=0; ; $i=$i+1)
for (; $i<10; $i=$i+1)
for (; $i<10;) 
```

但是，如果省略第二部分，将没有退出循环的条件。如果您不知道要运行循环多少次，可以使用此选项。在这种情况下，您可以使用`break`指令退出循环

```
for (;;)
  {
  // some code
  if (some condition)
      break;
  } 
```

请注意，如果您不放置`break`页面，则会卡住并无限期运行

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-18T18:10:04.167

第一个空白语句在开头执行。

第二个空白表达式（确定是否退出循环）隐式计算为 TRUE：

[http://php.net/manual/en/control-structures.for.php](http://php.net/manual/en/control-structures.for.php)

第三个空白语句在每次迭代后执行。

因此，任何退出循环的条件都需要在循环本身中。

# asp.net - 我应该将 UCS2 或 UTF16 转换为 UTF 吗？

> ID：12482548
> 
> 赞同：2
> 
> 时间：2012-09-18T18:06:54.957
> 
> 标签：asp.net, sql-server, character-encoding

我目前正在开发的网站从各种来源（人工输入）收集数据。数据存储在数据库的 Nvarchar 字段中。目前，该站点通过元标记指定字符集为 UCS-2。到目前为止，该网站要求提供英文答案。很快，我们将允许/要求至少部分字段以他们的母语（即本例中的中文）输入。根据网站上的一些研究和其他帖子，UCS-2 和 UTF-16 似乎几乎相同，但存在一些细微的技术差异。如果重要的话，这是一个在 SQL Server 数据库上运行的 asp.net 网站。所以我的问题是：

我是否有理由更改元标记以指定 UTF-16？

如果我更改编码，我会对字符的显示方式有任何问题吗？（我认为当前数据应该显示相同，因为它是大多数/全是英文，但我想确认一下）

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-18T18:11:08.897

UCS-2 是 UTF-16 的严格子集——它只能在基本多语言平面（即从 U+0000 到 U+FFFF）中编码字符。如果您需要在补充平面中表达字符（包括一些比较少见的汉字），它们必须使用两个 16 位代码单元（“代理”）对进行编码，如果这样，您的数据将不是有效的 UCS-2但必须声明为 UTF-16。

如果您可以轻松地将编码规范切换为 UTF-16，则应该没有理由不立即这样做，除非您的数据正在被不知道“UTF-16”含义的古老软件使用。

# html - 如何沿 x 轴无限扩展背景 CSS 样式？

> ID：12482553
> 
> 赞同：2
> 
> 时间：2012-09-18T18:07:11.407
> 
> 标签：html, css

我有一个标题背景，我想在 x 轴上无限期地流血。因此，无论某人的显示器大小如何，灰色背景都会扩展。

我该怎么做呢？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-18T18:08:12.050

两个答案，具体取决于您所面临的问题。

## 第一种情况：

### 背景完全没有重复

假设您使用 CSS`background-image`来呈现背景，请使用`background-repeat: repeat-x;`

小演示：[小链接](http://jsfiddle.net/glee/PdFnJ/)。

如果您不使用 a`background-image`来渲染背景，那么您应该考虑使用它。没有直接的方法可以`<img>`重复。

## 第二种情况：

### 背景在重复，只是没有跨越整个宽度

你需要确保你`header`有`width: 100%;`. 如果您`header`的父级有一些填充，请使用`display: block;`而不是`width: 100%;`，否则它会溢出。

# php - 按批准过滤 wordpress 评论

> ID：12482559
> 
> 赞同：0
> 
> 时间：2012-09-18T18:07:26.033
> 
> 标签：php, wordpress, comments, wordpress-theming

我用它来为我的自定义主题获取 wordpress 评论：

```
get_comments( array('status' => 'aprove','order' => 'ASC', 'post_id' => $newpost->ID) ); 
```

除了等待审核的评论不会被过滤之外，一切正常。遵循法典：[http](http://codex.wordpress.org/Function_Reference/get_comment) `'status' => 'approve'` ://codex.wordpress.org/Function_Reference/get_comment应该过滤掉那些，但这似乎没有发生。

我没有正确使用它吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-18T18:31:37.697

`approve`用两个P试试！

```
get_comments( array('status' => 'approve','order' => 'ASC', 'post_id' => $newpost->ID) ); 
```

这是[get_comments 的文档页面](http://codex.wordpress.org/Function_Reference/get_comments)（您链接到`get_comment`单数。）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-06-26T05:53:57.887

**这个对我有用。**您可以使用以下代码在段落中显示您批准的评论。

```
<?php foreach (get_comments(array('status' => 'approve','order' => 'ASC', 'post_id' => $newpost->ID)) as $comment): ?>
<div class="comment-show"><h4><?php echo $comment->comment_author; ?> said: </h4> <p>"<?php echo $comment->comment_content; ?>"</p></div>
<?php endforeach; ?> 
```

我在以下网站中使用过以显示评论 [http://rumpa07cse.com/how-to-index-your-website-and-blog-very-quick/](http://rumpa07cse.com/how-to-index-your-website-and-blog-very-quick/)

# mysql - 最好在 MySQL 中使用零日期 '0000-00-00 00:00:00' 或 NULL？

> ID：12482560
> 
> 赞同：12
> 
> 时间：2012-09-18T18:07:29.547
> 
> 标签：mysql

`NULL`使用默认日期“0000-00-00 00:00:00”或在 MySQL 数据库上是更好的做法吗？

出于计算的原因，我已阅读最好的使用默认日期“0000-00-00 00:00:00”

*即* `>`比日期小于日期。

最好按时存放`00:00`或`NULL`不知道时间。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2018-09-17T21:08:46.440

MySQL 5.7 默认不允许`0000-00-00 00:00:00`作为默认值，除非您设置`sql_mode = ''`. 似乎 MySQL 希望您将其`NULL`用作默认值。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2019-03-26T13:47:09.417

您应该使用`NULL`因为`0000-00-00 00:00:00`不是有效日期。如果您使用诸如[moment.js](https://momentjs.com/docs/)或[Carbon](https://carbon.nesbot.com/docs/)之类的库来管理日期，它们都知道如何处理 `NULL`日期。

MySQL 配置应始终设置为：

```
SET sql_mode = 'NO_ZERO_DATE'; 
```

除非您必须处理旧数据库。

也就是说，根据[MySQL 文档](https://dev.mysql.com/doc/refman/8.0/en/date-and-time-types.html)：

> MySQL 允许您将“0000-00-00”的“零”值存储为“虚拟日期”。在某些情况下，这比使用 NULL 值更方便，并且使用更少的数据和索引空间。要禁止“0000-00-00”，请启用 NO_ZERO_DATE 模式。

如果您在 Windows 上：

> 通过连接器/ODBC 使用的“零”日期或时间值会自动转换为 NULL，因为 ODBC 无法处理这些值。

要考虑的另一点是：零日期的真正含义是什么？

*   '0000-00-00' < '2018-12-12' 吗？
*   “0000-00-00”是否意味着“未知”？
*   “0000-00-00”是否意味着“空”？

除非您的答案是第一个并且您需要与空日期进行比较，否则使用`NULL`值总是不那么令人困惑。

* * *

## 回答 #3

> 赞同：-4
> 
> 时间：2012-09-18T18:25:35.747

默认值应为 NOT NULL 以支持所有日期时间操作。我还使用“0000-00-00 00:00:00”作为默认值。

# php - 如何启用 PHP 会话？

> ID：12482567
> 
> 赞同：2
> 
> 时间：2012-09-18T18:08:21.873
> 
> 标签：php, html, forms, wordpress, session

我需要一个在 WordPress 中链接的联系表格才能工作，它是由软件生成的。根据客户支持，应该启用 PHP 会话，这将使表单工作。但是我已经在本教程中尝试过这样做：

[http://support.qualityunit.com/021373-How-To-Enable-Session-Support-for-PHP](http://support.qualityunit.com/021373-How-To-Enable-Session-Support-for-PHP)

虽然在本教程中有一些我不理解的部分，例如：

```
**session.save_path = "C:\php\sessiondata\"** - *Why is it drive C if the website is live? What would be the correct file path?* 
```

最后一部分说：

“还有一些设置可用于修改您的会话。有关更多详细信息，请参阅每个页面脚本中手动支持的 php.ini： **调用 session_start() 函数。** ”

除了那个教程，还有更精细的方法来启用 PHP 会话吗？

**顺便说一句，我使用的是 PHP 5.3**

我在尝试填写联系表时收到的错误是：

**您的表格无法提交，原因如下：

```
Warning: [ err 2/line 366/config.cls.php] session_start(): open(/var/php_sessions/sess_88f8205d8a552c001940ab1c2780b949, O_RDWR) failed: No such file or directory (2)** 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-18T18:10:00.553

据我所知，您只需`session_start()`在要使用会话变量的每个页面的顶部调用。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-18T18:18:27.390

把它放在页面上

```
<?php
    session_start();
?> 
```

# objective-c - 调用具有 NSAutoreleasePool 的选择器时，为什么释放池中的东西在释放后仍然分配？

> ID：12482570
> 
> 赞同：0
> 
> 时间：2012-09-18T18:08:51.297
> 
> 标签：objective-c, nsautoreleasepool

我正在调用一个选择器，我想用它来触发后台进程，如下所示

```
[self performSelectorInBackground:@selector(startSync) withObject:nil]; 
```

例如，假设 startSync 看起来像这样

```
-(void)startSync {
    NSAutoreleasePool *pool = [[NSAutoreleasePool alloc] init];
    // expensive background process
    Sync *sync = [Sync new];
    [sync performSync];
    [sync release];
    [pool release];
} 
```

真正密集的处理发生在同步对象的“performSync”中。它检索一些 XML，将其解析为数组，然后将其插入 MySQL 数据库。该过程本身似乎运行良好，Analyzer 没有显示任何泄漏，但是在运行前使用分析器并在开始时进行基线堆标记，然后在运行后再次显示大约 5mb 的增益。据我们所知（没有双关语），我们在 performSync 过程中正确分配和释放对象。

问题是我在后台运行这个进程，如果我为它创建一个 AutoreleasePool 并在后台进程结束时释放它，它不应该在后台进程结束时释放与后台进程相关的所有内容吗？我不太了解为什么所有分配的对象都没有被破坏。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-19T16:16:29.920

每次我们进行记录插入时，我们都缺少一个关闭数据库语句，这会创建更多连接并导致我们的问题。这样做之后，我们的基线堆标记为 1.22mb，而结束堆标记为 1.22mb，这与我的预期完全一样。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-18T18:10:31.233

释放只会在事件循环结束时发生

# ruby-on-rails - 记录在 rails 中加载了哪个模板

> ID：12482572
> 
> 赞同：0
> 
> 时间：2012-09-18T18:09:14.710
> 
> 标签：ruby-on-rails, logging

假设我没有为 rails Controller 中的特定操作定义任何方法（例如 /users 没有方法，它将直接加载模板）。有没有办法可以修改 Logger（我正在使用 ActiveSupport::BufferedLogger）以在加载模板时发出日志？

编辑：我问这个的原因是我正在重构代码并且从模板代码中引发了一个异常。由于没有可用的堆栈跟踪，我无法弄清楚错误是从哪里引发的（更重要的是，我不知道正在加载哪个模板）。

编辑2：

```
activesupport (3.1.1) lib/active_support/whiny_nil.rb:48:in `method_missing'
cancan (1.6.8) lib/cancan/model_adapters/active_record_adapter.rb:69:in `tableized_conditions'
activesupport (3.1.1) lib/active_support/dependencies.rb:456:in `inject'
cancan (1.6.8) lib/cancan/model_adapters/active_record_adapter.rb:67:in `each'
cancan (1.6.8) lib/cancan/model_adapters/active_record_adapter.rb:67:in `inject'
cancan (1.6.8) lib/cancan/model_adapters/active_record_adapter.rb:67:in `tableized_conditions'
cancan (1.6.8) lib/cancan/model_adapters/active_record_adapter.rb:57:in `conditions'
cancan (1.6.8) lib/cancan/model_adapters/active_record_adapter.rb:94:in `database_records'
cancan (1.6.8) lib/cancan/model_additions.rb:23:in `accessible_by'
cancan (1.6.8) lib/cancan/controller_resource.rb:81:in `load_collection'
cancan (1.6.8) lib/cancan/controller_resource.rb:34:in `load_resource'
cancan (1.6.8) lib/cancan/controller_resource.rb:25:in `load_and_authorize_resource'
cancan (1.6.8) lib/cancan/controller_resource.rb:10:in `send'
cancan (1.6.8) lib/cancan/controller_resource.rb:10:in `_callback_before_1418'
activesupport (3.1.1) lib/active_support/callbacks.rb:448:in `_run__482750358__process_action__686174538__callbacks'
activesupport (3.1.1) lib/active_support/callbacks.rb:386:in `send'
activesupport (3.1.1) lib/active_support/callbacks.rb:386:in `_run_process_action_callbacks'
activesupport (3.1.1) lib/active_support/callbacks.rb:81:in `send'
activesupport (3.1.1) lib/active_support/callbacks.rb:81:in `run_callbacks'
actionpack (3.1.1) lib/abstract_controller/callbacks.rb:17:in `process_action'
actionpack (3.1.1) lib/action_controller/metal/rescue.rb:17:in `process_action'
actionpack (3.1.1) lib/action_controller/metal/instrumentation.rb:30:in `process_action'
activesupport (3.1.1) lib/active_support/notifications.rb:53:in `instrument'
activesupport (3.1.1) lib/active_support/notifications/instrumenter.rb:21:in `instrument'
activesupport (3.1.1) lib/active_support/notifications.rb:53:in `instrument'
actionpack (3.1.1) lib/action_controller/metal/instrumentation.rb:29:in `process_action'
actionpack (3.1.1) lib/action_controller/metal/params_wrapper.rb:201:in `process_action'
activerecord (3.1.1) lib/active_record/railties/controller_runtime.rb:18:in `process_action'
actionpack (3.1.1) lib/abstract_controller/base.rb:121:in `process'
actionpack (3.1.1) lib/abstract_controller/rendering.rb:45:in `process'
actionpack (3.1.1) lib/action_controller/metal.rb:193:in `dispatch'
actionpack (3.1.1) lib/action_controller/metal/rack_delegation.rb:14:in `dispatch'
actionpack (3.1.1) lib/action_controller/metal.rb:236:in `action'
actionpack (3.1.1) lib/action_dispatch/routing/route_set.rb:65:in `call'
actionpack (3.1.1) lib/action_dispatch/routing/route_set.rb:65:in `dispatch'
actionpack (3.1.1) lib/action_dispatch/routing/route_set.rb:29:in `call'
rack-mount (0.8.3) lib/rack/mount/route_set.rb:152:in `call'
rack-mount (0.8.3) lib/rack/mount/code_generation.rb:96:in `recognize'
rack-mount (0.8.3) lib/rack/mount/code_generation.rb:75:in `optimized_each'
rack-mount (0.8.3) lib/rack/mount/code_generation.rb:95:in `recognize'
rack-mount (0.8.3) lib/rack/mount/route_set.rb:141:in `call'
actionpack (3.1.1) lib/action_dispatch/routing/route_set.rb:532:in `call'
sass (3.2.1) lib/sass/./sass/plugin/rack.rb:54:in `call'
warden (1.2.1) lib/warden/manager.rb:35:in `call'
warden (1.2.1) lib/warden/manager.rb:34:in `catch'
warden (1.2.1) lib/warden/manager.rb:34:in `call'
actionpack (3.1.1) lib/action_dispatch/middleware/best_standards_support.rb:17:in `call'
rack (1.3.6) lib/rack/etag.rb:23:in `call'
rack (1.3.6) lib/rack/conditionalget.rb:25:in `call'
actionpack (3.1.1) lib/action_dispatch/middleware/head.rb:14:in `call'
actionpack (3.1.1) lib/action_dispatch/middleware/params_parser.rb:21:in `call'
actionpack (3.1.1) lib/action_dispatch/middleware/flash.rb:243:in `call'
rack (1.3.6) lib/rack/session/abstract/id.rb:195:in `context'
rack (1.3.6) lib/rack/session/abstract/id.rb:190:in `call'
actionpack (3.1.1) lib/action_dispatch/middleware/cookies.rb:331:in `call'
activerecord (3.1.1) lib/active_record/query_cache.rb:62:in `call'
activerecord (3.1.1) lib/active_record/connection_adapters/abstract/connection_pool.rb:477:in `call'
actionpack (3.1.1) lib/action_dispatch/middleware/callbacks.rb:29:in `call'
activesupport (3.1.1) lib/active_support/callbacks.rb:392:in `_run_call_callbacks'
activesupport (3.1.1) lib/active_support/callbacks.rb:81:in `send'
activesupport (3.1.1) lib/active_support/callbacks.rb:81:in `run_callbacks'
actionpack (3.1.1) lib/action_dispatch/middleware/callbacks.rb:28:in `call'
actionpack (3.1.1) lib/action_dispatch/middleware/reloader.rb:68:in `call'
rack (1.3.6) lib/rack/sendfile.rb:101:in `call'
actionpack (3.1.1) lib/action_dispatch/middleware/remote_ip.rb:48:in `call'
actionpack (3.1.1) lib/action_dispatch/middleware/show_exceptions.rb:47:in `call'
railties (3.1.1) lib/rails/rack/logger.rb:13:in `call'
rack (1.3.6) lib/rack/methodoverride.rb:24:in `call'
rack (1.3.6) lib/rack/runtime.rb:17:in `call'
rack (1.3.6) lib/rack/lock.rb:15:in `call'
actionpack (3.1.1) lib/action_dispatch/middleware/static.rb:53:in `call'
rack-cache (1.2) lib/rack/cache/context.rb:136:in `forward'
rack-cache (1.2) lib/rack/cache/context.rb:245:in `fetch'
rack-cache (1.2) lib/rack/cache/context.rb:185:in `lookup'
rack-cache (1.2) lib/rack/cache/context.rb:66:in `call!'
rack-cache (1.2) lib/rack/cache/context.rb:51:in `call'
railties (3.1.1) lib/rails/engine.rb:456:in `call'
railties (3.1.1) lib/rails/railtie/configurable.rb:30:in `send'
railties (3.1.1) lib/rails/railtie/configurable.rb:30:in `method_missing'
/var/lib/passenger-standalone/3.0.17-x86-ruby1.8.7-linux-gcc4.4.6-1002/support/lib/phusion_passenger/rack/request_handler.rb:96:in `process_request'
/var/lib/passenger-standalone/3.0.17-x86-ruby1.8.7-linux-gcc4.4.6-1002/support/lib/phusion_passenger/abstract_request_handler.rb:516:in `accept_and_process_next_request'
/var/lib/passenger-standalone/3.0.17-x86-ruby1.8.7-linux-gcc4.4.6-1002/support/lib/phusion_passenger/abstract_request_handler.rb:274:in `main_loop'
/var/lib/passenger-standalone/3.0.17-x86-ruby1.8.7-linux-gcc4.4.6-1002/support/lib/phusion_passenger/rack/application_spawner.rb:206:in `start_request_handler'
/var/lib/passenger-standalone/3.0.17-x86-ruby1.8.7-linux-gcc4.4.6-1002/support/lib/phusion_passenger/rack/application_spawner.rb:171:in `send'
/var/lib/passenger-standalone/3.0.17-x86-ruby1.8.7-linux-gcc4.4.6-1002/support/lib/phusion_passenger/rack/application_spawner.rb:171:in `handle_spawn_application'
/var/lib/passenger-standalone/3.0.17-x86-ruby1.8.7-linux-gcc4.4.6-1002/support/lib/phusion_passenger/utils.rb:470:in `safe_fork'
/var/lib/passenger-standalone/3.0.17-x86-ruby1.8.7-linux-gcc4.4.6-1002/support/lib/phusion_passenger/rack/application_spawner.rb:166:in `handle_spawn_application'
/var/lib/passenger-standalone/3.0.17-x86-ruby1.8.7-linux-gcc4.4.6-1002/support/lib/phusion_passenger/abstract_server.rb:357:in `__send__'
/var/lib/passenger-standalone/3.0.17-x86-ruby1.8.7-linux-gcc4.4.6-1002/support/lib/phusion_passenger/abstract_server.rb:357:in `server_main_loop'
/var/lib/passenger-standalone/3.0.17-x86-ruby1.8.7-linux-gcc4.4.6-1002/support/lib/phusion_passenger/abstract_server.rb:206:in `start_synchronously'
/var/lib/passenger-standalone/3.0.17-x86-ruby1.8.7-linux-gcc4.4.6-1002/support/lib/phusion_passenger/abstract_server.rb:180:in `start'
/var/lib/passenger-standalone/3.0.17-x86-ruby1.8.7-linux-gcc4.4.6-1002/support/lib/phusion_passenger/rack/application_spawner.rb:129:in `start'
/var/lib/passenger-standalone/3.0.17-x86-ruby1.8.7-linux-gcc4.4.6-1002/support/lib/phusion_passenger/spawn_manager.rb:253:in `spawn_rack_application'
/var/lib/passenger-standalone/3.0.17-x86-ruby1.8.7-linux-gcc4.4.6-1002/support/lib/phusion_passenger/abstract_server_collection.rb:132:in `lookup_or_add'
/var/lib/passenger-standalone/3.0.17-x86-ruby1.8.7-linux-gcc4.4.6-1002/support/lib/phusion_passenger/spawn_manager.rb:246:in `spawn_rack_application'
/var/lib/passenger-standalone/3.0.17-x86-ruby1.8.7-linux-gcc4.4.6-1002/support/lib/phusion_passenger/abstract_server_collection.rb:82:in `synchronize'
/var/lib/passenger-standalone/3.0.17-x86-ruby1.8.7-linux-gcc4.4.6-1002/support/lib/phusion_passenger/abstract_server_collection.rb:79:in `synchronize'
/var/lib/passenger-standalone/3.0.17-x86-ruby1.8.7-linux-gcc4.4.6-1002/support/lib/phusion_passenger/spawn_manager.rb:244:in `spawn_rack_application'
/var/lib/passenger-standalone/3.0.17-x86-ruby1.8.7-linux-gcc4.4.6-1002/support/lib/phusion_passenger/spawn_manager.rb:137:in `spawn_application'
/var/lib/passenger-standalone/3.0.17-x86-ruby1.8.7-linux-gcc4.4.6-1002/support/lib/phusion_passenger/spawn_manager.rb:275:in `handle_spawn_application'
/var/lib/passenger-standalone/3.0.17-x86-ruby1.8.7-linux-gcc4.4.6-1002/support/lib/phusion_passenger/abstract_server.rb:357:in `__send__'
/var/lib/passenger-standalone/3.0.17-x86-ruby1.8.7-linux-gcc4.4.6-1002/support/lib/phusion_passenger/abstract_server.rb:357:in `server_main_loop'
/var/lib/passenger-standalone/3.0.17-x86-ruby1.8.7-linux-gcc4.4.6-1002/support/lib/phusion_passenger/abstract_server.rb:206:in `start_synchronously'
/var/lib/passenger-standalone/3.0.17-x86-ruby1.8.7-linux-gcc4.4.6-1002/support/helper-scripts/passenger-spawn-server:99 
```

# django - Django DEBUG模式只申请一组白名单IP

> ID：12482574
> 
> 赞同：0
> 
> 时间：2012-09-18T18:09:19.320
> 
> 标签：django, debugging, production-environment

我有一些奇怪的错误，似乎只发生在我的生产环境中，甚至在暂存时也没有。

django 电子邮件的有限跟踪不足以有效调试（没有本地变量等），但我无法将整个生产服务器设置为 DEBUG=True，因为访问者意外到达错误页面会暴露很多敏感数据。

有没有什么优雅的方式可以让我的团队中的一些 IP 列入白名单，并且仅对于来自这些 IP 的请求，django 的行为就像 DEBUG 为 True？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-18T18:13:23.090

一种选择是在您的生产工作的同一环境中“运行服务器”另一种选择是使用[哨兵](https://github.com/getsentry/sentry)，除了很多很酷的东西外，它还为异常提供本地变量

# php - 在 PHP 中从数据库中删除 TinyMCE 格式

> ID：12482580
> 
> 赞同：3
> 
> 时间：2012-09-18T18:09:35.367
> 
> 标签：php, string, tinymce

我已经用谷歌搜索了它，其中大多数是关于阻止 TinyMCE 粘贴 JavaScript 透视图中的 Word 样式。

我的问题是数据**已经在数据库**（MySQL）中，以及用户通过 TinyMCE 粘贴 MS Words 文本所做的所有格式。

有没有办法使用**PHP**去除所有格式并只保留文本？

一些示例文本：

```
&lt;!--  /* Font Definitions */  @font-face     {font-family:"Cambria Math";    panose-1:2 4 5 3 5 4 6 3 2 4;   mso-font-charset:1;     mso-generic-font-family:roman;  mso-font-format:other;  mso-font-pitch:variable;    mso-font-signature:0 0 0 0 0 0;} @font-face     {font-family:Calibri;   panose-1:2 15 5 2 2 2 4 3 2 4;  mso-font-charset:0;     mso-generic-font-family:swiss;  mso-font-pitch:variable;    mso-font-signature:-1610611985 1073750139 0 0 159 0;}  /* Style Definitions */  p.MsoNormal, li.MsoNormal, div.MsoNormal    {mso-style-unhide:no;   mso-style-qformat:yes;  mso-style-parent:"";    margin-top:0in;     margin-right:0in;   margin-bottom:10.0pt;   margin-left:0in;    line-height:115%;   mso-pagination:widow-orphan;    font-size:11.0pt;   font-family:"Calibri","sans-serif";     mso-ascii-font-family:Calibri;  mso-ascii-theme-font:minor-latin;   mso-fareast-font-family:Calibri;    mso-fareast-theme-font:minor-latin;     mso-hansi-font-family:Calibri;  mso-hansi-theme-font:minor-latin;   mso-bidi-font-family:"Times New Roman";     mso-bidi-theme-font:minor-bidi;     mso-fareast-language:EN-US;} .MsoChpDefault     {mso-style-type:export-only;    mso-default-props:yes;  mso-ascii-font-family:Calibri;  mso-ascii-theme-font:minor-latin;   mso-fareast-font-family:Calibri;    mso-fareast-theme-font:minor-latin;     mso-hansi-font-family:Calibri;  mso-hansi-theme-font:minor-latin;   mso-bidi-font-family:"Times New Roman";     mso-bidi-theme-font:minor-bidi;     mso-fareast-language:EN-US;} .MsoPapDefault     {mso-style-type:export-only;    margin-bottom:10.0pt;   line-height:115%;} @page Section1   {size:8.5in 11.0in;     margin:1.0in 1.0in 1.0in 1.0in;     mso-header-margin:.5in;     mso-footer-margin:.5in;     mso-paper-source:0;} div.Section1   {page:Section1;} --&gt;   Blah blah blah blah blah &nbsp;    </p> 
```

注意：在数据库中存储为 html 实体的 HTML 标签（例如，字符`<`存储为`&lt;`）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-31T10:30:47.630

您要做的是将 HTML 转换为纯文本。因为这基本上就是您将从 TinyMCE 中获得的内容以及您想要插入到数据库中的内容。

如前所述，简单的方法是使用`strip_tags`on`htmlspecialchars_decode`函数。但是，它将删除一些可能重要的信息，例如 HR 元素。您更愿意使用的是[html2text](http://code.google.com/p/iaml/source/browse/trunk/org.openiaml.model.runtime/src/include/html2text)，它是一个非常容易使用的类，具有一些使转换更加准确的附加功能。

希望能帮助到你！

# visual-studio-2012 - VS2012 Xaml Designer：资源视图在哪里？

> ID：12482581
> 
> 赞同：11
> 
> 时间：2012-09-18T18:09:35.640
> 
> 标签：visual-studio-2012, designer

我很高兴看到 VS2012 的 Designer 比旧的更接近 Blend。我仍然没有找到的一件事是 Blend 的“资源视图”：

![在此处输入图像描述](../Images/0e5811d6d14dcf2b8686fe03fc43e01c.png)

VS2012 有一个叫做资源视图的东西，但那是不同的东西。

没有这个，除了单击使用它们的控件外，无法访问模板。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-07T16:13:07.913

好的。我做了一些研究，发现了这个[预览](http://www.microsoft.com/en-us/download/details.aspx?id=30702)。这是 8 月发布的更新 2 之前的权宜之计。我还没试过。当我这样做时，我会编辑我的答案。Visual Studio 2012 的更新 2 似乎将包括对 Silverlight 和 WPF 的 Blend 支持。

这是[有关预览版 Update 2 的更多信息](http://blendinsider.com/technical/announcing-visual-studio-2012-update-2-ctp-2013-01-30/#more-1301)。这是我过早切换到 Microsoft 产品的结果。希望这可以帮助。

如果有人对此有更多信息。请告诉我们。

**编辑：**

预览版基本上是最终会过期的 Blend 预览版。

我不清楚的最大的事情是这个声明（来自这篇知识库文章）是否：

> “Blend for Visual Studio 2012 支持 Sketchflow、WPF 和 Silverlight”

...意味着对 WPF 和 Silverlight 的支持将存在于 Visual Studio 本身或其他产品中。

# javascript - 在javascript中设置标签值

> ID：12482582
> 
> 赞同：0
> 
> 时间：2012-09-18T18:09:39.140
> 
> 标签：javascript, asp.net, webforms

我有这样的代码

```
 <table>
                <tr>
                    <td>
                        <div>
                            <asp:Label runat="server" ID="lblBookmarksIds" Style="visibility: hidden;" Text="test"/>
                        </div>
                    </td>
                    <td>
                        <asp:UpdatePanel runat="server" ID="buttonPanel" UpdateMode="Conditional">
                            <ContentTemplate>
                                <asp:Button runat="server" ID="btnInvokeImageRead" CausesValidation="false" UseSubmitBehavior="false"
                                    OnClick="btnInvokeImageRead_Click" Style="visibility: hidden;" />
                            </ContentTemplate>
                        </asp:UpdatePanel>
                    </td>
                </tr>
            </table> 
```

在javascript中，我试图设置标签的值并调用代码隐藏函数，以便我将所需的值传递给代码隐藏，如下所示：

```
alert(document.getElementById('<%= lblBookmarksIds.ClientID%>').firstChild.nodeValue);
            document.getElementById('<%= lblBookmarksIds.ClientID%>').innerText = str;
            alert(document.getElementById('<%= lblBookmarksIds.ClientID%>').firstChild.nodeValue);
            //alert('1');
            if (str != "") {
                document.getElementById('<%= btnInvokeImageRead.ClientID%>').click();
            } 
```

当显示第二个警报时，lblBookmarksIds 的值已更改，但是当我在代码隐藏函数 btnInvokeImageRead_Click 中调试时，lblBookmarksIds 的值具有其旧值。

有谁知道为什么？

问候沃伊切赫

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-18T18:18:40.253

ASP.NET 能够“看到”输入到 a`TextBox`和类似控件中的值的原因是因为这些控件的值`POST`在页面回发时在正文中发送。您可以通过任意数量的工具看到这一点，包括您的浏览器可能包含的开发工具或 Fiddler 之类的拦截代理。当回发发生时，这些控件中的每一个都有一个`LoadPostData`处理`POST`数据和更新控件`Text`属性（或任何属性）的函数。

a 的内容`Label`未在`POST`数据中提交，因此 .NET 无法查看 JavaScript 对其所做的任何更改。

处理post数据的控件都实现了[`IPostBackDataHandler`](http://msdn.microsoft.com/en-us/library/system.web.ui.ipostbackdatahandler.aspx)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-18T18:15:43.837

标签不会传递给后面的代码。为此，您将不得不使用输入（文本框）。

您可以使用 CSS 为输入设置样式，使其看起来像一个标签。

或者，您可以将值保留在隐藏字段中，并使用 javascript 在标签中显示值并将其传递回隐藏字段。

# javascript - 使用适用于 Web 的 Windows Aero 窗口颜色

> ID：12482585
> 
> 赞同：0
> 
> 时间：2012-09-18T18:09:46.147
> 
> 标签：javascript, css, html

我正在尝试在网页中复制 Windows 7 窗口。我想在窗口边框上使用用户配置的窗口颜色。我已经尝试过`background:ActiveCaption`，但 windows aero 不会将 aero 窗口颜色同步到 xp 样式的 Active Title Bar 颜色。任何想法我可以在哪里捕捉颜色？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-18T18:29:25.893

操作系统环境数据，例如窗口样式设置，不会暴露给浏览器。如果是，则可能是潜在的安全威胁。

# java - 有比使用 swt 绘图更好的选择吗？

> ID：12482590
> 
> 赞同：1
> 
> 时间：2012-09-18T18:10:03.520
> 
> 标签：java, opengl, graph, charts, swt

我的团队正在做一个与市场交易相关的绘图项目。当我们必须一次绘制数千个数据点时，我们遇到了 SWT 性能的障碍。在 SWT 内部或外部（例如 openGL）是否有任何替代方案可以提高性能？

额外信息：我们正在 Eclipse RCP 中进行设计。

编辑：为了澄清，这些是动态图表而不是静态的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-23T20:22:25.523

我最终操纵了 imageData 以获得所需的速度。构建一个图像然后让它绘制可以显着提高速度。希望这对遇到此问题的其他人有所帮助。

# python - 带有布尔值和多个参数的python多处理

> ID：12482592
> 
> 赞同：15
> 
> 时间：2012-09-18T18:10:09.863
> 
> 标签：python, multiprocessing

我有一个接受多个参数的函数，其中一些是布尔值。我正在尝试将其传递给多处理`pool.apply_async`并希望传递一些带有附加名称的参数。

这是我正在使用的示例脚本：

```
from multiprocessing import Pool

    def testFunc(y, x, calcY=True):
        if calcY == True:
            return y*y
        elif calcY == False:
            return x*x

    if __name__ == "__main__":
        p = Pool()
        res = p.apply_async(testFunc, args = (2, 4, False))
        print res.get() 
```

这可行，但我很好奇将其更改为`res = p.apply_async(testFunc, args = (2, 4, False))`：

```
res = p.apply_async(testFunc, args = (2, 4, calcY = False)) 
```

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2012-09-18T18:26:28.610

[apply_async](http://docs.python.org/library/multiprocessing.html#multiprocessing.pool.multiprocessing.Pool.apply_async)具有`args`和`kwds`关键字参数，您可以像这样使用它们：

```
res = p.apply_async(testFunc, args=(2, 4), kwds={'calcY': False}) 
```

# java - Android - GCM 推送通知未出现在通知列表中

> ID：12482593
> 
> 赞同：6
> 
> 时间：2012-09-18T18:10:18.047
> 
> 标签：java, android, notifications, push-notification, google-cloud-messaging

我正在开发我的第一个 Android 应用程序，以使用 Google Cloud Messaging (GCM) 服务进行推送通知。我已经到了可以从服务器应用程序成功发送消息的地步，并在客户端应用程序的 GCMIntentService 类中的 onMessage 事件中记录消息的内容。但是，我在设备上没有看到收到消息的任何视觉指示。我希望消息会出现在手机的下拉通知列表中，就像在 iPhone 上一样。这必须手动编码吗？还有一种通用的方法来显示消息，而不管当前哪个活动处于活动状态，以及应用程序是否在后台空闲？任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-18T18:34:30.717

此代码将在屏幕顶部的 android 系统栏中生成通知。此代码将创建一个新意图，在单击顶部栏中的通知后将用户定向到“Home.class”。如果您希望它根据当前活动执行特定操作，您可以将广播请求从 GCMIntentService 发送到您的其他活动。

```
Intent notificationIntent=new Intent(context, Home.class);
generateNotification(context, message, notificationIntent);

private static void generateNotification(Context context, String message, Intent notificationIntent) {
    int icon = R.drawable.icon;
    long when = System.currentTimeMillis();
    NotificationManager notificationManager = (NotificationManager)
            context.getSystemService(Context.NOTIFICATION_SERVICE);
    Notification notification = new Notification(icon, message, when);
    String title = context.getString(R.string.app_name);

    // set intent so it does not start a new activity
    notificationIntent.setFlags(Intent.FLAG_ACTIVITY_CLEAR_TOP |
            Intent.FLAG_ACTIVITY_SINGLE_TOP);
    PendingIntent intent =PendingIntent.getActivity(context, 0, notificationIntent, PendingIntent.FLAG_UPDATE_CURRENT);
    notification.setLatestEventInfo(context, title, message, intent);
    notification.flags |= Notification.FLAG_AUTO_CANCEL;
    notificationManager.notify(0, notification);
} 
```

请注意，此示例使用 R.drawable 和 R.String 中的资源，这些资源需要存在才能工作，但它应该给你这个想法。有关状态通知的更多信息，请参见[http://developer.android.com/guide/topics/ui/notifiers/index.html](http://developer.android.com/guide/topics/ui/notifiers/index.html)以及有关广播接收器的信息。[http://developer.android.com/reference/android/content/BroadcastReceiver.html](http://developer.android.com/reference/android/content/BroadcastReceiver.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-02-19T11:24:22.430

如果您使用 GcmListenerService，您可以使用此代码，将 sendNotification() 添加到您的 onMessageReceived

```
@Override
public void onMessageReceived(String from, Bundle data) {
        String message = data.getString("message");
        sendNotification(message);
}

private void sendNotification(String message) {
        Intent intent = new Intent(this, YOURCLASS.class);
        intent.addFlags(Intent.FLAG_ACTIVITY_CLEAR_TOP);
        PendingIntent pendingIntent = PendingIntent.getActivity(this, 0, intent,
        PendingIntent.FLAG_ONE_SHOT);

        Uri defaultSoundUri = RingtoneManager.getDefaultUri(RingtoneManager.TYPE_NOTIFICATION);
        NotificationCompat.Builder notificationBuilder = new NotificationCompat.Builder(this)
                .setSmallIcon(R.drawable.ic_park_notification)
                .setContentTitle("Ppillo Message")
                .setContentText(message)
                .setAutoCancel(true)
                .setSound(defaultSoundUri)
                .setContentIntent(pendingIntent);

        NotificationManager notificationManager =
                (NotificationManager) getSystemService(Context.NOTIFICATION_SERVICE);

        notificationManager.notify(0 /* ID of notification */, notificationBuilder.build());
    } 
```

# java - 循环遍历众多变量

> ID：12482596
> 
> 赞同：4
> 
> 时间：2012-09-18T18:10:28.517
> 
> 标签：java, android

我有 48 个变量（TextViews），例如 tv1、tv2、tv3、tv4...tv48。

我想使用 for 循环为这些变量设置一个值，因为我不想将同一行写下 48 次。

像这样的东西：

```
for (int i=1; i<49; i++)
{
        "tv"+i.setText(i);
} 
```

如何做到这一点？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-18T18:17:24.997

像这样初始化它们：

```
TextView[] tv = new TextView[48]; 
```

`for`然后你可以使用这样的循环在其中设置文本：

```
for(int i=0; i<48; i++)
{
   tv[i].setText("your text");
} 
```

编辑：在您的 XML 文件中，为所有文本视图提供相同的 ID。例如 tv0、tv1、tv2 等。初始化一个字符串数组，它将这些 ID 作为字符串。

```
String ids[] = new String[48];
for(int i=0; i<48; i++)
{
   ids[i] = "tv" + Integer.toString(i);
} 
```

现在，要初始化 的数组`TextView`，请执行以下操作：

```
for(int i=0; i<48; i++)
{
   int resID = getResources().getIdentifier(ids[i], "id", "your.package.name");
   tv[i] = (TextView) findViewById(resID);
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-18T18:18:14.467

```
TextView[] textViews = new TextView[48];

int[] ids = new int[48];

for(int i=0;i<48;i++) {
    textViews[i] = (TextView) findViewById(ids[i]);
}

for(int i=0;i<48;i++) {
    textViews[i].setText(String.valueOf(i));
} 
```

在这里，您需要将所有 ID 添加到`ids`数组中。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-18T18:17:19.803

```
"tv"+i 
```

只能与反射一起使用。

我会将这些 TextViews 放在一个数组中，然后

```
for (int i=0; i<textViews.length; i++)
{
        textViews[i].setText(""+i);//be a String. not an int...
} 
```

我会用，在哪里`textViews = new TextViews[]{tv1,tv2..tv48}`

我希望它有帮助！

# java - Amazon RDS：使用 JAVA 开发工具包启动“db.t1.micro”实例

> ID：12482598
> 
> 赞同：3
> 
> 时间：2012-09-18T18:10:30.453
> 
> 标签：java, amazon-rds

我正在尝试使用 Java API 和以下代码在 Amazon RDS 上启动一个新的 MySql 实例：

```
CreateDBInstanceRequest createDBInstanceRequest = new CreateDBInstanceRequest();
createDBInstanceRequest.setEngine("MySQL");     
createDBInstanceRequest.setLicenseModel("general-public-license");
createDBInstanceRequest.setEngineVersion("5.5.25a");
createDBInstanceRequest.setDBInstanceClass("db.t1.micro");  
createDBInstanceRequest.setMultiAZ(false);
createDBInstanceRequest.setAutoMinorVersionUpgrade(true);
createDBInstanceRequest.setAllocatedStorage(5);  
createDBInstanceRequest.setDBInstanceIdentifier("mydbinstance");
createDBInstanceRequest.setMasterUsername("master");
createDBInstanceRequest.setMasterUserPassword("password");
createDBInstanceRequest.setDBName("dbname");
createDBInstanceRequest.setPort(3306);
createDBInstanceRequest.setDBParameterGroupName("default.mysql5.5");
createDBInstanceRequest.setDBSubnetGroupName("dev");
createDBInstanceRequest.setBackupRetentionPeriod(1);
DBInstance dbInstance = RDS.createDBInstance(createDBInstanceRequest); 
```

问题是这总是会导致以下错误：

> AWS 错误代码：InsufficientDBInstanceCapacity，AWS 错误消息：无法创建数据库实例，因为没有具有足够容量的可用区。请稍后再试您的请求。

正如建议的那样，我稍后尝试过，但从未能够以编程方式启动新实例，但是当我尝试使用 Amazon Mgmt 控制台启动实例时，使用完全相同的参数，它会立即启动。

我还注意到这个问题只发生在数据库实例类“db.t1.micro”上。这个实例类不能通过 API 获得吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-12-11T10:58:08.727

您确定这个确切版本的 MySQL 在您所在地区的任何可用区都可用吗？

我建议首先为您选择的引擎执行[DescribeOrderableDBInstanceOptions](http://docs.aws.amazon.com/AmazonRDS/latest/APIReference/API_DescribeOrderableDBInstanceOptions.html)，使用您自己的标准（例如 DBInstanceClass="db.t1.micro"）进行过滤，然后从中选择版本。

# gcc - 使用特定功能删除 Gcc 死代码

> ID：12482599
> 
> 赞同：0
> 
> 时间：2012-09-18T18:10:33.807
> 
> 标签：gcc, dead-code

假设我有一个大型库 liblarge，以及链接到 liblarge 的应用程序。

Liblarge 在 LGPL 许可下，而应用程序在专有许可下。我希望能够从 liblarge 中删除*app 中未使用的*所有“死代码” 。我能以某种方式做到这一点吗？也许向链接器提供一个使用函数的列表？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-19T06:52:38.420

没有简单的方法让您继续。

您可以在私有副本上使用上述技术（在我的评论中）来锻炼，您可以删除 *.o。然后，您可以构建自己的修改后的 liblarge 源代码树，该源代码树构建 DSO/DLL，但在您确定不需要之后从链接器命令行（用于构建 DSO/DLL）中删除 *.o。

这就是 C/C++ 的工作原理，一旦代码转换为目标代码，就会丢失大量信息。

例如，您可能希望尝试减小每个 *.o 文件的大小。这样做的主要方法是拆分*.c/* .cpp 编译单元。

C/C++ ABI 的问题是编译器可以自由地将代码放在 *.o 文件中的任何位置，然后使用相对偏移量跳入和跳出其中的段。*.o 中没有保存足够的元数据，无法分解编译后的代码并查看它运行所需的所有依赖项。为此，您需要手动拆分输入源代码。

这就是为什么对于嵌入式软件开发来说，当内存占用很重要时，您实际上会在源文件中放入一个函数。如今，嵌入式系统具有大量内存。

# objective-c - 如何从具有特定名称的捆绑包中提取图像并添加到数组中，

> ID：12482602
> 
> 赞同：0
> 
> 时间：2012-09-18T18:10:36.533
> 
> 标签：objective-c, xcode, bundle

在我的应用程序包中，我有几个项目的几个图像。

ItemA_largepicture.png

ItemA_smallPicture.png

ItemA_overViewPicture.png

ItemB_largepicture.png

ItemB_smallPicture.png

ItemB_overViewPicture.png

ItemC_largepicture.png

ItemC_smallPicture.png

ItemC_overViewPicture.png

...

我想提取，例如所有 ItemB 图片，以显示在 scrollView 中。我可以通过以下操作轻松获得

```
 path=[ItemB stringByAppendingString:@"_largePicture];
    NSString *imagePath=[[NSBundle mainBundle]pathForResource:path ofType:@"png"];
    UIImage *image=[UIImage imageWithContentsOfFile:imagePath];
    [self.image setImage:image]; 
```

所以问题很简单；如何获取所有 ItemB 图片？我需要将它们放入数组中吗？我该怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-18T18:42:08.613

```
largePicturePath=[ItemB stringByAppendingString:@"_largePicture];
smallPicturePath=[ItemB stringByAppendingString:@"_smallPicture];
overViewPicturePath=[ItemB stringByAppendingString:@"_overViewPicture];
NSString *largeImagePath=[[NSBundle mainBundle]pathForResource:largePicturePath ofType:@"png"];
NSString *smallImagePath=[[NSBundle mainBundle]pathForResource:smallPicturePath ofType:@"png"];
NSString *overViewImagePath=[[NSBundle mainBundle]pathForResource:overViewPicturePath ofType:@"png"];

NSArray *imageArray = [[NSArray arrayWithObjects:largeImagePath,smallImagePath,overViewImagePath,nil];

NSEnumerator *e = [imageArray objectEnumerator];

NSString *path;
while (path= [e nextObject]) {
    UIImage *image=[UIImage imageWithContentsOfFile:path];

    ...

} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-18T19:39:40.480

此代码应列出您的 mainBundle 中的所有内容

```
NSString *bundleRootPath = [[NSBundle mainBundle] bundlePath];
NSArray *bundleRootContents = [[NSFileManager defaultManager] contentsOfDirectoryAtPath:bundleRootPath error:nil];
NSArray *files = [bundleRootContents filteredArrayUsingPredicate:[NSPredicate predicateWithFormat:@"self beginswith 'ItemA' OR self beginswith 'ItemB' OR self beginswith 'ItemC'"]]; //you can provide your string in ' ' to filter specific content
NSLog(@"%@",files); 
```

# crystal-reports - 使用不同的参数多次运行一份水晶报表

> ID：12482608
> 
> 赞同：0
> 
> 时间：2012-09-18T18:11:05.153
> 
> 标签：crystal-reports, business-objects

我正在使用 BusinessObjects Enterprise 服务器，并且我有一个使用“部门”作为参数字段来控制记录选择的报表。有20个不同的部门。

我想安排这个报告运行 20 次，每次都选择一个新的部门。有没有办法在不安排报告 20 次的情况下做到这一点？

谢谢你的帮助

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-18T20:15:30.380

是的你可以。一个过程：

*   为每个部门创建一个组
*   根据需要将用户添加到组；确保他们有一个电子邮件地址
*   创建个人资料；为每个组添加一个配置文件值（每个组/部门 ID 组合的一个配置文件值）；配置文件值将是字符串（重要）
*   创建出版物；将您的报告添加到源文档；将您之前创建的组添加到 Enterprise-Recipient 列表
*   现在定义个性化（其中的关键部分）；您可以添加过滤器（设置 TABLE.FIELD 或 FORMULA 到您的配置文件（报告字段和企业收件人映射列）或将部门 ID 参数设置为适当的企业收件人映射值（您的参数需要是一个字符串才能工作） ; 注意前面的评论）。
*   将目的地设置为电子邮件
*   根据需要设置其他属性（例如格式）
*   保存并关闭

您还可以安排定期发布此出版物。

笔记：

*   此解决方案使用发布作业服务器（运行发布）、Crystal Reports 作业服务器（运行报告）、自适应处理服务器（执行突发）和目标作业服务器（发送电子邮件）。您可能希望创建一组单独的这些服务并将它们打包到自己的服务器组中，然后强制出版物仅使用该服务器组。
*   与前一点相关，您可能希望仅为计划报告创建一个服务器组，并强制重复实例使用该服务器组。为什么？发布似乎不能很好地等待队列中的报表——如果 Crystal Reports 作业服务器不可用，发布将失败。强制计划报告实例在它们自己的服务器组上生成有助于消除此问题。
*   If you make significant changes to the report (e.g. add a parameter), you may need to remove then add the report to the Source-Document list to ensure that it has the most-recent definition; other changes to the report (e.g. adding a column) don't seem to require this attention. YOUR MILEAGE MAY VARY.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-18T18:17:10.100

您可以将部门作为一个组来设计报告。

在每个组之后都有一个新页面，并确保打印部门组部分的记录，而不是详细信息。

这是假设您正在获取数据库字段中的所有部门。

# excel - 如果列中有数据，则返回列标题的公式

> ID：12482609
> 
> 赞同：0
> 
> 时间：2012-09-18T18:11:06.537
> 
> 标签：excel, excel-2007, excel-formula

如果列中有数据，我需要一个公式来返回列标题，任何数据。但我也需要返回带有数据的第二、第三、第四个标题

在A列第2行，我有 =IF(M8<>"",$M$1,IF(N8<>"",$N$1,IF(O8<>"",$O$1,IF(P8<> "",$P$1,IF(Q8<>"",$Q$1,IF(R8<>"",$R$1,IF(S8<>"",$S$1,IF(T8<>"" ,$T$1,""))))))))

这将返回第 2 行列 M 到 T 中第一个数据实例的第 1 行标题但在 B2 中，我需要第二个标题，其中包含该列中的数据。

我需要从数组到左侧的黄色（第 1、第 2、第 3、第 4）结果

```
第一场比赛 第二场 第三场 第四列 M 列 N 列 O 列 P 列 Q 列 R 列 S 列 T
列 M 列 O 列 R 数据 data2 Data3        
Coulmn N 列 O 列 Q 列 T 数据 Data2 data3 data4

```

将使用匹配/索引，但不能将其增加到第二个或第三个匹配谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-18T18:42:30.657

您可以在 A2 中使用此“数组公式”，通过 CTRL+SHIFT+ENTER 确认并复制

`=IFERROR(INDEX($M$1:$T$1,SMALL(IF($M8:$T8<>"",COLUMN($M8:$T8)-COLUMN($M8)+1),COLUMNS($A2:A2))),"")`

当数据用完时，你会得到空白

要使用 CTRL+SHIFT+ENTER 确认将公式放入 A2，请按 F2 键选择公式，然后按住 CTRL 和 SHIFT 键并按 ENTER。像 { 和 } 这样的花括号将出现在公式栏中的公式周围 - 在复制之前执行此操作

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-18T18:45:04.663

如果您只需要这样做一次，则此方法应该有效。如果您需要通过自动化来完成，则需要进行一些修改：

1.  创建一个名为**ListAllCols**（或其他）的新列。使用这个公式。

    =IF(E2<>"",","&E$1,"")
    & IF(F2<>"",","&F$1,"")
    & IF(G2<>"",","&G$1 ,"")
    & IF(H2<>"",","&H$1,"")

    使用您的示例，第一行应返回“列 M，列 O，列 R”

2.  选择此列，然后选择复制和粘贴值以删除方程式。

3.  使用 Excel 2007 的**文本到列**功能（数据->数据工具->文本到列），通过指定逗号作为分隔符将其拆分为 3 个单独的列。

# c++ - += 比 -= 快吗？

> ID：12482610
> 
> 赞同：6
> 
> 时间：2012-09-18T18:11:07.667
> 
> 标签：c++, performance

完全披露 - 我的灵感来自[Is x += a faster than x = x + a?](https://stackoverflow.com/questions/12479486/is-x-a-quicker-than-x-xa)

除此之外，我决定测试`+=`vs `-=`。简单的测试表明它们大致相同。然后我尝试了类似的东西：

```
std::vector<int> x;
for (int i = 0 ; i < 10000 ; i++)
   x.push_back(rand()%10); 
```

并调用`+=`和`-=`与给定数字成比例：

```
long long sum = 0;

for ( each number in the array )
    if ( x[j] < k )
        sum += x[j];
    else
        sum -= x[j]; 
```

所以，如果`k`是，比如说，小，`-=`会被更频繁地调用（duuuh）。我试过 with `k = 2`which 会给出更高比例的`-=`被叫， and with `k = 5`，这应该产生大约相同数量的`-=`and `+=`。

妙语： call`-=`比 call 快两倍`+=`。为什么在这种情况下它会更有效率？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-09-18T18:14:03.170

[我会在 Mysticial 掌握这一点并猜测之前跳进去：**分支预测**。](https://stackoverflow.com/questions/11227809/why-is-processing-a-sorted-array-faster-than-an-unsorted-array/11227902#11227902)

所以，这不是`-=`vs `+=`。

当它几乎总是或当它可以评估的数字数量大致相同时，`x[j] < k`可以更好地预测该条件。`true``false`

因为`k = 2`，十分之一的人会评估为`false`.

因为`k = 5`，它们将大致相同并且随机分布，因此更难预测。

编辑：见[http://ideone.com/1PYMl](http://ideone.com/1PYMl) - 所有额外的东西都是为了防止未使用的代码优化（`cout`s）。

tl; dr：不同的结果`k`：

```
k: 1 Time: 280
k: 2 Time: 360
k: 3 Time: 440
k: 4 Time: 520
k: 5 Time: 550
k: 6 Time: 510
k: 7 Time: 450
k: 8 Time: 360
k: 9 Time: 260 
```

如您所见，越接近`k`混乱变化的条件，程序需要的时间就越多。接近尾声，大约需要一半的时间。

# sql - 按日期排序，但对相似字段进行分组

> ID：12482614
> 
> 赞同：1
> 
> 时间：2012-09-18T18:11:20.937
> 
> 标签：sql, asp-classic, grouping

我是 Stack Overflow 和 ASP 的新手，但是这个网站已经救了我很多次了！我对 ASP 和 VBS 非常陌生，但对 PHP 比较熟悉，所以如果我的问题有 PHP 解决方案，那也没关系。

一点背景 - 我的访问数据库有两个表（与此查询相关），一个被调用`SignUpLog`，另一个被调用`Notes`。该`SignUpLog.FirstNoteAddr`字段对应`Notes.NoteKey`于另一个表中的字段。

我已经成功地显示了数据库中的所有条目，但我想做的是将特定患者的所有条目组合成一行，同时仍按日期排序（最新的在顶部）。

这是我的代码：

```
Set DataConn = Server.CreateObject("ADODB.Connection")
Set RS = Server.CreateObject("ADODB.RecordSet")
DataConn.Open "DBQ=" & Server.Mappath("/path/to/mydb") & ";Driver={Microsoft Access Driver (*.mdb)};Uid=user;Pwd=pass;"

Set rsDsp = DataConn.Execute("SELECT SignUpLog.PatientFileNumber, SignUpLog.ArrivalDateTime, Notes.Note, SignUpLog.Called, SignUpLog.DrName FROM SignUpLog, Notes WHERE (((Notes.NoteKey)=[SignUpLog].[FirstNoteAddr])) ORDER BY SignUpLog.ArrivalDateTime DESC;")

If rsDsp.EOF Then
    Response.Write "Sorry, no entries in the database!"
Else
%>
<div align="center"><center>
    <table BORDER="0" width="700">
        <tr>
            <th width="105">Name</th>
            <th width="105">Arrival Time</th>
            <th width="105">Doctor</th>
            <th width="105">Notes</th>
        </tr>
 <%
   While Not rsDsp.EOF
     x = x + 1
     If x = 1 Then
       Response.Write "<TR><TD>" & rsDsp.Fields.Item("PatientFileNumber").Value & "</TD>"
       Response.Write "<TD>" & rsDsp("ArrivalDateTime").Value & "</TD>"
        Response.Write "<TD>" & rsDsp("DrName").Value & "</TD>"
        Response.Write "<TD>" & rsDsp("Note").Value & "</TD></TR>"
     Else 
       Response.Write "<TR><TD BGCOLOR=E4E4E4>" & rsDsp.Fields.Item("PatientFileNumber").Value & "</TD>"
       Response.Write "<TD BGCOLOR=E4E4E4>" & rsDsp("ArrivalDateTime").Value & "</TD>"
       Response.Write "<TD BGCOLOR=E4E4E4>" & rsDsp("DrName").Value & "</TD>"
       Response.Write "<TD BGCOLOR=E4E4E4>" & rsDsp("Note").Value & "</TD></TR>"
       x = 0
     End If

     rsDsp.MoveNext
   Wend
   Response.Write "</TABLE>"  

   DataConn.Close

   End If
  %>
 </table>
 </center></div> 
```

这给了我一个类似于这样的输出：

```
Patient A | 9/18/2012 12:56:21 PM | Appt | Note1
Patient A | 9/18/2012 12:56:21 PM | Appt | Note2
Patient A | 9/18/2012 12:56:21 PM | Appt | Note3
Patient B | 9/18/2012 1:56:21 PM | WalkIn | Note1
Patient B | 9/18/2012 1:56:21 PM | WalkIn | Note2 
```

* * *

我想要的是这个：

```
Patient A | 9/18/2012 12:56:21 PM | Appt | Note1, Note2, Note3
Patient B | 9/18/2012 1:56:21 PM | WalkIn | Note1, Note2 
```

我尝试过使用`Group By`聚合函数并一直挂断它，这很令人困惑，因为我没有尝试做任何数学运算。就像说我是一个完整的 ASP 菜鸟，我绝不是一个程序员。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-18T18:21:08.383

I believe there already is a solution for your problem here on SO, try looking at [THIS](https://stackoverflow.com/questions/5174362/microsoft-access-condense-multiple-lines-in-a-table) question. You will just need to define (a bit complicated) function and use it as in example.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-18T18:21:42.920

This is really a SQL query issue that has little to do with ASP. Since you're using MDB you may find it easier to model your queries using MS Access, then paste the generated SQL statement back into your ASP code.

The following question can help:

[SQL Group with Order by](https://stackoverflow.com/questions/1708694/sql-group-with-order-by)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-20T14:54:36.637

HTML 严重失败。

无论如何，这是一个快速的解决方案，通过对逻辑进行一些修改以循环遍历结果集并显示它。

```
<%
Set DataConn = Server.CreateObject("ADODB.Connection") 
Set RS = Server.CreateObject("ADODB.RecordSet") 
DataConn.Open "DBQ=" & Server.Mappath("/path/to/mydb") & ";Driver={Microsoft Access Driver (*.mdb)};Uid=user;Pwd=pass;" 

Set rsDsp = DataConn.Execute("SELECT SignUpLog.PatientFileNumber, SignUpLog.ArrivalDateTime, Notes.Note, SignUpLog.Called, SignUpLog.DrName FROM SignUpLog, Notes WHERE (((Notes.NoteKey)=[SignUpLog].[FirstNoteAddr])) ORDER BY SignUpLog.ArrivalDateTime DESC;") 

If rsDsp.EOF Then 
    Response.Write "Sorry, no entries in the database!" 
Else 
%> 
<div align="center">
    <table BORDER="0" width="700"> 
        <tr> 
            <th width="105">Name</th> 
            <th width="105">Arrival Time</th> 
            <th width="105">Doctor</th> 
            <th width="105">Notes</th> 
        </tr> 
 <%
   Dim LastPatient;
   Dim Notes = "";
   Dim x = 0;
   While Not rsDsp.EOF

     If LastPatient = rsDsp.Field.Item("PatientFileNumber").Value Then
       Response.Write "<br />" & rsDsp("Note").Value
     Else
       If LastPatient <> NULL Then
         Response.Write "</td></tr>"
       If x Mod 2 = 0 Then 
         Response.Write "<tr><td>" & rsDsp.Fields.Item("PatientFileNumber").Value & "</td>" 
         Response.Write "<td>" & rsDsp("ArrivalDateTime").Value & "</td>" 
         Response.Write "<td>" & rsDsp("DrName").Value & "</td>" 
         Response.Write "<td>" & rsDsp("Note").Value
       Else  
         Response.Write "<tr><td bgcolor=""E4E4E4"">" & rsDsp.Fields.Item("PatientFileNumber").Value & "</td>" 
         Response.Write "<td bgcolor=""E4E4E4"">" & rsDsp("ArrivalDateTime").Value & "</td>" 
         Response.Write "<td bgcolor=""E4E4E4"">" & rsDsp("DrName").Value & "</td" 
         Response.Write "<td bgcolor=""E4E4E4"">" & rsDsp("Note").Value
       End If
       x = x + 1
     End If

     LastPatient = rsDsp.Fields.Item("PatientFileNumber").Value
     rsDsp.MoveNext 
   Wend
   Response.Write "</td></tr>"   

   DataConn.Close 

End If
%> 
 </table> 
</div> 
```

# log4j - BoneCP 不记录 SQL 语句

> ID：12482616
> 
> 赞同：3
> 
> 时间：2012-09-18T18:11:27.753
> 
> 标签：log4j, embedded-jetty, maven-jetty-plugin, bonecp

我正在使用嵌入`Jetty 8 Server`的`jetty-maven-plugin`. 我无法`BoneCP`记录执行的语句。我做错什么了吗？有什么解决方法吗？

这是我的 BoneCPDataSource：

```
<New id="DSTest" class="org.eclipse.jetty.plus.jndi.Resource">
    <Arg></Arg>
    <Arg>jdbc/DSTest</Arg>
    <Arg>
        <New class="com.jolbox.bonecp.BoneCPDataSource">
            <Set name="driverClass">com.mysql.jdbc.Driver</Set>
            <Set name="jdbcUrl">my_url</Set>
            <Set name="username">my_username</Set>
            <Set name="password">my_password</Set>
            <Set name="partitionCount">5</Set>
            <Set name="minConnectionsPerPartition">5</Set>
            <Set name="maxConnectionsPerPartition">50</Set>
            <Set name="acquireIncrement">5</Set>
            <Set name="idleConnectionTestPeriod">30</Set>
            <Set name="logStatementsEnabled">true</Set>
        </New>
    </Arg>
</New> 
```

这是 servlet 通过 servlet 上下文加载的我的 log4j 属性文件：

```
log4j.rootLogger=debug, stdout
log4j.appender.stdout=org.apache.log4j.ConsoleAppender
log4j.appender.stdout.layout=org.apache.log4j.PatternLayout
log4j.appender.stdout.layout.ConversionPattern=%5p [%t] (%F:%L) - %m%n 
```

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-19T17:30:14.630

只需查看以下代码`com.jolbox.bonecp`：

```
package com.jolbox.bonecp;

public class PreparedStatementHandle extends StatementHandle implements
     PreparedStatement {
    // @Override
    public boolean execute() throws SQLException {
        checkClosed();
        try {
            if (this.logStatementsEnabled && logger.isDebugEnabled()){
                logger.debug(PoolUtil.fillLogParams(this.sql, this.logParams));
            }
         ...
    }
} 
```

所以除了增加`logStatementsEnabled`bonecp 的设置外，还必须在log4j.properties 中将bonecp 的日志级别设置为DEBUG 或ALL。这是一个例子：

```
log4j.logger.com.jolbox.bonecp=DEBUG 
```

[有关 log4j 级别的详细信息。](http://logging.apache.org/log4j/1.2/apidocs/org/apache/log4j/Level.html)

# oracle - 我可以强制 SQLPLUS 使用 NLS_DATE_FORMAT 进行插入吗？

> ID：12482617
> 
> 赞同：2
> 
> 时间：2012-09-18T18:11:28.930
> 
> 标签：oracle

有没有办法在插入语句上强制进行隐式日期转换（即不使用 TO_DATE）？

上下文：我正在将数据转储从 Postgresql 导入到 Oracle。除了日期格式外，一切都运行良好。我宁愿不必修改 Postgresql 输出。

（**更新：**这是 10.2。奇怪的是，将格式更改为 RRRR-MM-DD 使一切正常！）

```
SQL> create table a(b date);                                                                                                                                                                                              
Table created.

SQL> ALTER SESSION SET NLS_DATE_FORMAT = 'YYYY-MM-DD';                                                                                                                                                                    
Session altered.

SQL> insert into a values('2009-12-03');                                                                                                                                                                                  
insert into a values('2009-12-03')
                     *
ERROR at line 1:
ORA-01843: not a valid month

SQL> insert into a values(to_date('2009-12-03','YYYY-MM-DD'));                                                                                                                                                            
1 row created. 
```

# asp-classic - 关键字“close”附近的语法不正确

> ID：12482618
> 
> 赞同：0
> 
> 时间：2012-09-18T18:11:30.433
> 
> 标签：asp-classic

我的一个脚本中有一段代码出现语法错误。

```
if(status <> true and Request.QueryString("selectId") = "undefined") then
strConn ="PROVIDER=foobar;Server=foo;Database=foo;Uid=bar;Pwd=bar;"
Set cnt = Server.CreateObject("ADODB.Connection")
set rs1 = CreateObject("ADODB.Recordset") 
rs1.CursorLocation = adUseClient
cnt.ConnectionString= strConn
cnt.Open strConn

sql="Select * from rule1 where skucode='" & Request.Form("txthidden") & "' and letter1id  ='" & Request.Form("lrt1") & "' and letter2id ='" & Request.Form("Select1") & "' and letter3id ='" & Request.Form("Select2") & "'"
rs1.Open  sql,cnt,2,2
if not rs1.EOF then
Response.write("<script language=""javascript"">alert('Rules already exists!');</script>")
else

  sql="INSERT INTO rule1 (letter1id,letter2id,letter3id,HTML,skucode) VALUES "
  sql=sql & "('" & Request.Form("lrt1") & "',"
  sql=sql & "'" & Request.Form("Select1") & "',"
  sql=sql & "'" & Request.Form("Select2") & "',"
  sql=sql & "'" & Request.Form("txthtml") & "',"
  sql=sql & "'" & Request.Form("txthidden") & "')"  
cnt.Execute sql
 Response.write("<script language=""javascript"">alert('Rules Added successfully!');window.location='" & "viewrule1.asp?skucodes=" & Request.Form("txthidden") &   "';</script>")
end if
rs1.Close
cnt.close 
```

我得到的错误信息是：

```
Microsoft OLE DB Provider for SQL Server error '80040e14'

Incorrect syntax near the keyword 'close'.

/path/file.asp, line 75 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-18T18:32:43.847

您可以完全分离它，而不是关闭它：

```
set cnt = Nothing 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-19T06:17:44.343

假设这是引发错误的最后一行，我将其替换为：

```
If IsObject(cnt) Then
    On Error Resume Next
    If cnt.State = 1 Then ' 1 = adStateOpen '
        cnt.Close
    End If
    Set cnt = Nothing
    Err.Clear
    On Error Goto 0
End If 
```

`cnt`当它到达脚本的那部分时可能已经关闭，这就是它抛出错误的原因。在关闭之前检查它的状态需要用`On Error Resume Next`逻辑包装，否则它会抛出另一个错误。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-19T05:31:35.367

应该没有问题。我想的是你的数据是否太长。有时它会在您的行限制超出时发生。SQL Server 6.5 允许最大行大小为 1962 字节，SQL Server 7.0 允许最大行大小为 8060 字节。它只是一个假设

# visual-studio-2012 - 如何向 Visual Studio 2012 添加命令？

> ID：12482620
> 
> 赞同：9
> 
> 时间：2012-09-18T18:11:36.863
> 
> 标签：visual-studio-2012, vsx

如何将自定义命令添加到键盘对话框（工具->选项->键盘）以通过快捷键触发它们？不幸的是，我在网上找不到任何资源。

我浏览了这篇[博文](http://www.codewrecks.com/blog/index.php/2012/08/24/converting-visual-studio-macro-to-visual-studio-plugin/)，但它略有不同，因为我必须创建一个菜单条目。我只想在键盘对话框中显示命令。就像它与宏一起使用一样。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-23T08:55:40.850

我没有在这方面检查过 VS 2012，但我认为它与以前的版本相同。

所有这些菜单和命令内容都本地化在一个名为 [mypackage].vsct 的文件中，该文件是 Visual Studio 命令表。此处描述了架构：[VSCT XML 架构参考](http://msdn.microsoft.com/en-us/library/bb165416.aspx)。当您使用向导时，它可能会为您创建一个。

正如您在架构中看到的那样，命令总是以某种方式链接到菜单（[命令元素](http://msdn.microsoft.com/en-us/library/bb165399.aspx)），但是您可以使用许多标志来调整它：[命令标志元素](http://msdn.microsoft.com/en-us/library/bb491716.aspx)。根据你所做的，我会尝试 CommandWellOnly、DefaultInvisible 和 DynamicVisibility。

无论如何，如果您不希望您的菜单出现在顶部菜单栏上，也可以只更改vsct 文件中`<Parent>`根元素的元素。`<Menu>`

# php - 具有动态图形按钮的 Android 移动 Web 应用程序

> ID：12482623
> 
> 赞同：1
> 
> 时间：2012-09-18T18:11:54.933
> 
> 标签：php, jquery, ajax, mobile, html5-canvas

我想将我编写的 Python/wxPython 桌面应用程序转换为 Android 移动 Web 应用程序，并希望获得有关使用带有 PHP 后端的 JQuery Mobile 执行此操作的建议。（这是供内部使用的，因此我们可以指定要使用的移动设备。）具体来说：

现有的桌面触摸屏应用程序有一个图像背景，上面覆盖有响应触摸屏（即鼠标点击）事件的圆形图形按钮。单击时，图形会通过增加按钮文本中的计数器、更改按钮的背景颜色以及更新数据库记录来更新。

想将 JQuery Mobile 用于标准菜单等，以及这种图形按钮方法来处理所描述的点击事件。我应该为此研究 HTML5 画布吗？

我很喜欢使用 PHP/MySQL 以及带有标准表单提交的 JQM 进行 Web 编程，但我只是使用 JQuery、AJAX 等进行活动。
准备并愿意学习，但不想参加太多立即在此指示...

谢谢你的建议，凯文

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-18T21:09:24.960

在我看来，这在 jQuery Mobile 中是完全可行的，而无需进入 Canvas 方面的内容——我非常同意你关于不想进入太多方向的观点！

首先，您可以使用所有标准布局/菜单/按钮，正如您提到的标准内容。在您的可点击圈子的页面内容中，我只会制作可点击的 div，然后您可以“监听”点击事件，然后进行相应的处理。

至于制作圆圈，这可以通过 HTML5 的border-radius css 属性轻松完成，正如您所提到的，这应该很容易实现，因为所有现代移动浏览器都支持这一点。对于下面的示例，我建议您在基于 webkit 的浏览器中查看它，例如 Safari、Chrome 或现代版本的 FF，以查看 CSS 边框半径创建圆圈的难易程度。

我在这里模拟了一个简单的例子[http://jsbin.com/owipah/44/edit](http://jsbin.com/owipah/44/edit)

当然，您会根据需要进行任何后/预处理，以使界面与服务器端保持一致。

希望有帮助，

R。

# javascript - 谷歌抓取——显示：无和显示：块

> ID：12482624
> 
> 赞同：12
> 
> 时间：2012-09-18T18:11:58.667
> 
> 标签：javascript, jquery, html

当 google 抓取网页时，做 google bot 抓取

1.  包含类似代码的内容`style="display:none"`

2.  包含类似代码的内容`style="display:block"`

我问这个问题是因为我有一个 F&Q 网站。

1.  对于用户，我希望仅在他单击“答案/解决方案”链接时才显示答案。

2.  对于谷歌机器人，我希望抓取解决方案部分，否则我的页面内容变得太少。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-09-18T18:20:35.510

是的，谷歌会看到既不显示又显示块的内容

谷歌机器人将看到您的常见问题解答部分。

请参阅这些文章：

网站管理员指南： http: [//support.google.com/webmasters/bin/answer.py ?hl=en&answer=35769](http://support.google.com/webmasters/bin/answer.py?hl=en&answer=35769)

> 使用文本浏览器（例如 Lynx）来检查您的网站，因为大多数搜索引擎蜘蛛看到您的网站的方式与 Lynx 一样。如果 JavaScript、cookie、会话 ID、框架、DHTML 或 Flash 等花哨的功能使您无法在文本浏览器中看到您的所有网站，那么搜索引擎蜘蛛可能无法抓取您的网站。

隐藏的文字和链接： http: [//support.google.com/webmasters/bin/answer.py ?hl=en&answer=66353](http://support.google.com/webmasters/bin/answer.py?hl=en&answer=66353)

> 在您的内容中隐藏文本或链接可能会导致您的网站被视为不可信，因为它向搜索引擎提供的信息不同于向访问者提供的信息。... 如果您确实在您的网站上发现了隐藏的文字或链接，请将它们删除，或者，**如果它们与您网站的访问者相关，则让它们易于查看**。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-18T18:23:19.083

谷歌是否会抓取隐藏元素值得商榷；你会发现“专家”会以一种或另一种方式争论，但大部分都是纯粹的猜想。在这些情况下我喜欢做的是`display: none`通过 JavaScript / jQuery应用`$(document).ready()`用户获得您正在寻找的体验的方式，而 Google 像这样索引页面：

```
<div class="question">Does Google see this?</div>
<div class="answer">Yes is JS is used!</div>

$(document).ready(function(){
    $('.answer').hide();
}); 
```

需要注意的是，这种方法也值得商榷，因为有些人表示谷歌已经开始执行 JS 作为抓取的一部分。话虽如此，我使用这种技术已经取得了很好的效果。

我希望这有帮助！

# ruby - Ruby - 哈希数组，尝试选择多个键并按键值分组

> ID：12482625
> 
> 赞同：0
> 
> 时间：2012-09-18T18:11:59.227
> 
> 标签：ruby

我有一组数据，它是一个哈希数组，每个哈希代表一个数据记录：

```
data = [
  {
    :id => "12345",
    :bucket_1_rank => "2",
    :bucket_1_count => "12",
    :bucket_2_rank => "7",
    :bucket_2_count => "25"
  },
  {
    :id => "45678",
    :bucket_1_rank => "2",
    :bucket_1_count => "15",
    :bucket_2_rank => "9",
    :bucket_2_count => "68"
  },
  {
    :id => "78901",
    :bucket_1_rank => "5",
    :bucket_1_count => "36"
  }
] 
```

等级值始终介于 1 和 10 之间。

我要做的是选择排名字段（`:bucket_1_rank`和字段）的每个可能值作为我最终结果集中的键，每个键的值将是其关联字段`:bucket_2_rank`中所有值的数组。`:bucket_count`因此，对于上面的数据，我想到的最终结果结构类似于：

存储桶 1：

```
 {"2" => ["12", "15"], "5" => ["36"]} 
```

桶 2：

```
{"7" => ["25"], "9" => ["68"]} 
```

我可以在字段名称保持不变的假设下执行此操作，或者通过对字段/键名称进行硬编码，或者仅`group_by`用于我需要的字段，但我的问题是我每个月都使用不同的数据集，其中根据项目规范，排名字段的名称略有不同，我想动态识别计数和排名字段的名称，而不是对字段名称进行硬编码。

我写了两个快速助手`get_ranks`，`get_buckets`它们使用正则表达式返回一个字段名数组，这些字段名要么是排名字段，要么是计数字段，因为这些字段的名称中总是包含文字字符串“_rank”或“_count”：

```
ranks = get_ranks
counts = get_counts

results = Hash.new{|h,k| h[k] = []}

data.each do |i|
  ranks.each do |r|
    unless i[r].nil?
      counts.each do |c|
          results[i[r]] << i[c]
      end
    end
  end
end

p results 
```

这似乎很接近，但感觉很尴尬，在我看来，必须有更好的方法来迭代这个数据集。由于我没有使用 Ruby 参与过这个项目，我会以此为契机来提高我对遍历哈希数组、使用数组作为值填充哈希等的理解。任何资源/建议将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-18T19:49:55.517

您可以将其缩短为：

```
result = Hash.new{|h,k| h[k] = Hash.new{|h2,k2| h2[k2] = []}}
data.each do |hsh|
    hsh.each do |key, value|
        result[$1][value] << hsh["#{$1}_count".to_sym] if key =~ /(.*)_rank$/
    end
end

puts result
#=> {"bucket_1"=>{"2"=>["12", "15"], "5"=>["36"]}, "bucket_2"=>{"7"=>["25"], "9"=>["68"]}} 
```

虽然这是假设`:bucket_2_item_count`实际上应该是`:bucket_2_count`.

# javascript - 在单元格上添加下拉列表

> ID：12482627
> 
> 赞同：1
> 
> 时间：2012-09-18T18:12:04.683
> 
> 标签：javascript

我在表格行的每个单元格上都有一个下拉列表。现在我需要的是通过按下添加按钮在特定单元格上动态添加更多下拉列表。有什么代码片段可以帮助解决这个问题吗？谢谢你。下面是代码。我已经尝试过函数 addSubRow2 ，但这是非常静态的，我无法进一步移动，因为在每个组合框旁边我还需要一个文本框，以及如何给每个组合框一个唯一的 ID，以便以后我可以在验证和提交到 php 页面期间识别？

```
<html>
<head>
    <script language="javascript">
        function addRow(tableID) {

            var table = document.getElementById(tableID);

            var rowCount = table.rows.length;
            var row = table.insertRow(rowCount);

            var colCount = table.rows[0].cells.length;

            for(var i=0; i<colCount; i++) {

                var newcell = row.insertCell(i);

                newcell.innerHTML = table.rows[1].cells[i].innerHTML;
                newcell.innerHTML = newcell.innerHTML +"<br> TEST";
                //alert(newcell.childNodes[2].type);
                /*switch(newcell.childNodes[0].type) {
                    case "text":
                            newcell.childNodes[0].value = "";
                            newcell.childNodes[0].id = "input" + rowCount;
                            break;
                    case "checkbox":
                            newcell.childNodes[0].checked = false;
                            newcell.childNodes[0].id = "checkbox" + rowCount;     
                            break;
                    case "select-one":
                        newcell.childNodes[1].selectedIndex = 0;
                        newcell.childNodes[1].id = "col_" + rowCount+"_2"; 
                            break;
                }*/
                /*if(newcell.childNodes[0].type=="button")
                {
                    alert("TEST");
                    newcell.childNodes[0].id=rowCount;
                }*/
            }

            /*var table = document.getElementById(tableID);
            var rows = table.getElementsByTagName('tr');
            for (var i = 0, row; row = table.rows[i]; i++) {
                  row.id="row"+i;
                  row.name="row"+i;
                  var rowName = "row"+i;
               //iterate through rows
               //rows would be accessed using the "row" variable assigned in the for loop
               for (var j = 0, col; col = row.cells[j]; j++) {
                 //iterate through columns
                 //columns would be accessed using the "col" variable assigned in the for loop
                 col.id="col_"+i+"_"+j;
                   col.name="col_"+i+"_"+j;
                 var cels = rows[i].getElementsByTagName('td')[j];
                 var realKids = 0,count = 0;
                 kids = cels.childNodes.length;
                 while(count < kids){
                        if(cels.childNodes[i].nodeType != 3){
                            realKids++;
                        }
                        count++;
                    }
                    ///alert("I : "+i+"   "+"J : "+j+"  "+"realKids :"+cels.childElementCount);
                //alert();
          for(var k=0 ; k<cels.childElementCount ; k++)
          {

            alert("J :"+j+"  "+"K :"+k+"  "+cels.childNodes[k].type);
          }
               }  
            }*/
        }

        function addSubRow2(cell){
            var dropdown = "<SELECT class=\"select\" name=\"country\">\n" +
            "<OPTION value=\"1\">Serial 1<\/OPTION>\n" +
            "<OPTION value=\"2\">Serial 2<\/OPTION>\n" +
            "<OPTION value=\"3\">Serial 3<\/OPTION>\n" + 
            "<OPTION value=\"4\">Serial 4<\/OPTION>" +
            "<OPTION value=\"5\">Serial 5<\/OPTION>" + 
            "<\/SELECT>";
        //var dropdown =  document.getElementById("dataTable").rows[0].cells[2].childNodes[1].cloneNode(true);
        cell.innerHTML += "<br\/ >" + dropdown;
    }

/*alert("COLD ID : "+colID);
            var tdID = document.getElementById(colID);
    var table = document.getElementById(tableID);
    var new_comboBox = table.rows[0].cells[2].childNodes[2].cloneNode(true);

    tdID.appendChild(new_comboBox);*/

        function deleteRow(tableID) {
            try {
            var table = document.getElementById(tableID);
            var rowCount = table.rows.length;

            for(var i=0; i<rowCount; i++) {
                var row = table.rows[i];
                var chkbox = row.cells[0].childNodes[0];
                if(null != chkbox && true == chkbox.checked) {
                    if(rowCount <= 1) {
                        alert("Cannot delete all the rows.");
                        break;
                    }
                    table.deleteRow(i);
                    rowCount--;
                    i--;
                }

            }
            var table = document.getElementById(tableID);
            for (var i = 0, row; row = table.rows[i]; i++) {
                  row.id="row"+i;
               //iterate through rows
               //rows would be accessed using the "row" variable assigned in the for loop
               for (var j = 0, col; col = row.cells[j]; j++) {
                 //iterate through columns
                 //columns would be accessed using the "col" variable assigned in the for loop
                 //alert("J : "+j);
                 col.id="col"+i;
                 if(j==0)
                 {

                 }
                 else if(j==1)
                 {

                }
               }  
            }

            }catch(e) {
                alert(e);
            }
        }

    </script>
</head>
<body>
  Begin Location : <select class='select' id="beginLocation" name="beginLocation">
                    <option value="1">Loc 1</option>
                    <option value="2">Loc 2</option>
                    <option value="3">Loc 3</option>
                    <option value="4">Loc 4</option>
                    <option value="5">Loc 5</option>
                </select>
                <p type="text" class=error id='beginLocation_Error'>
    <br\>
    <input type="button" value="Add Row" onclick="addRow('dataTable')" />

    <input type="button" value="Delete Row" onclick="deleteRow('dataTable')" />

    <table id="dataTable" width="350px" border="1">
        <tr>
            <th></th>
            <th>Client</th>
          <th>Location</th>
          <th>Serial</th>
        </tr>

        <tr>
            <td id="col_0_0"><input type="checkbox" name="chk"/></td>
            <td id="col_0_1">
                <select class='select' id="client1" name="client1">
                    <option value="1">Client 1</option>
                    <option value="2">Client 2</option>
                    <option value="3">Client 3</option>
                    <option value="4">Client 4</option>
                    <option value="5">Client 5</option>
                </select><p type="text" class=error id='client_0_Error'>                
            </td>

            <td id="col_0_1">
                <select class='select' id="location1" name="location1">
                  <option value="1">Loc 1</option>
                    <option value="2">Loc 2</option>
                    <option value="3">Loc 3</option>
                    <option value="4">Loc 4</option>
                    <option value="5">Loc 5</option>
                </select>
                <p type="text" class=error id='beginLocation_Error'>                
            </td>

            <td id="col_0_3">
                <input type="button" value="Add Serial" onclick="addSubRow2(this.parentNode);" />
                <br\>
                <select class='select' id="serial_0_1" name="serial_0_1">
                    <option value="1">Serial 1</option>
                    <option value="2">Serial 2</option>
                    <option value="3">Serial 3</option>
                    <option value="4">Serial 4</option>
                    <option value="5">Serial 5</option>
                </select><input type="text" name=txtLoc" id="txtLoc><p type="text" class=error id='serial_0_1_Error'>

            </td>
        </tr>
    </table>

</body>
</html> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-18T18:25:57.270

试试这个 -[**演示**](http://jsfiddle.net/5wVnR/)

***JS***

```
var i = 0;
var option;

document.getElementById("add").addEventListener("click", addSelect, false);

function addSelect() {
    var select = document.createElement("select");
    select.setAttribute("name", "mySelect" + i);
    select.setAttribute("id", "mySelect" + i);

    option = document.createElement("option");
    option.setAttribute("value", "value one");
    option.innerHTML = "ONE";
    select.appendChild(option);

    option = document.createElement("option");
    option.setAttribute("value", "value two");
    option.innerHTML = "TWO";
    select.appendChild(option);

    document.getElementById("wrapper").appendChild(select);

    i++;
} 
```

# php - 当用户在选择字段中选择新选项时，如何运行 mysql 查询？

> ID：12482632
> 
> 赞同：1
> 
> 时间：2012-09-18T18:12:27.140
> 
> 标签：php, javascript, mysql, html, css

我想要一个列出产品类别的选择框。选择一个类别后，我想同时从数据库中选择该类别中的产品。我需要在此应用程序中使用 AJAX 吗？关于这样做的任何例子？这是我正在使用的代码：

这些函数构建每个选择字段的选项。

```
function buildCategoryOptions($catId = 0)
{
$sql = "SELECT cat_id, cat_parent_id, cat_name
        FROM tbl_category
        ORDER BY cat_id";
$result = dbQuery($sql) or die('Cannot get Product. ' . mysql_error());

$categories = array();
while($row = dbFetchArray($result)) {
    list($id, $parentId, $name) = $row;

    if ($parentId == 0) {
        // we create a new array for each top level categories
        $categories[$id] = array('name' => $name, 'children' => array());
    } else {
        // the child categories are put int the parent category's array
        $categories[$parentId]['children'][] = array('id' => $id, 'name' =>   
$name); 
    }
}   

// build combo box options
$list = '';
foreach ($categories as $key => $value) {
    $name     = $value['name'];
    $children = $value['children'];

    $list .= "<option value=\"$key\"";
    if ($key == $catId) {
        $list.= " selected";
    }

    $list .= ">$name</option>\r\n";

    foreach ($children as $child) {
        $list .= "<option value=\"{$child['id']}\"";
        if ($child['id'] == $catId) {
            $list.= " selected";
        }

        $list .= ">&nbsp;&nbsp;{$child['name']}</option>\r\n";
    }
}

return $list;
} 
```

/* 为单选选项构建产品选项列表 */

```
function buildProductOptions($catId = 0)
{
$sql = "SELECT pd_id, pd_name, cat_id
    FROM tbl_product
    WHERE cat_id = $catId 
    ORDER BY pd_name";
$result = dbQuery($sql) or die('Cannot get Product. ' . mysql_error());
$numProduct = dbNumRows($result);

$products = array();
while($row = dbFetchArray($result)) {
    list($id, $name) = $row;
        // we create a new array for each top level categories
        $products[$id] = array('name' => $name);
}   

// build combo box options
$list = '';
foreach ($products as $key => $value) {
    $name     = $value['name'];

    $list .= "<option value=\"$key\"";

    $list .= ">$name</option>\r\n";

}

return $list; 
```

}

这是选择字段的页面：

```
$catId = (isset($_GET['catId']) && $_GET['catId'] > 0) ? $_GET['catId'] : 0;

$categoryList = buildCategoryOptions($catId);
$productList = buildProductOptions($catId);

<!--- Category Select --->
<select name="cboCategory" id="cboCategory" class="box">
   <option value="" selected>-- Choose Category --</option>
<?php
        echo $categoryList;
 ?>  
</select>

<!--- Products Select : category is changed the products need to be from selected cat -    
 -->

<select name="selectOptions" id="selectOptions" class="box" multiple="multiple" >
   <option>--Pick the other options--</option>
<?php
    echo $productList;
 ?> 
</select> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-18T18:18:55.677

是的，您确实需要在这里使用 ajax。检查以下代码和注释。

编写返回 a 的函数，该函数`ActiveXObject()`将执行 ajax 调用为

```
function getXMLHTTP() {
    var xmlhttp = false;
    try {
        xmlhttp = new XMLHttpRequest();
    } catch (e) {
        try {
            xmlhttp = new XMLHttpRequest();
        } catch (e) {
            try {
                xmlhttp = new ActiveXObject("Microsoft.XMLHTTP");
            } catch (e) {
                try {
                    xmlhttp = new ActiveXObject("Msxml2.XMLHTTP");
                } catch (e1) {
                    xmlhttp = false;
                }
            }
        }
    }

    return xmlhttp;
} 
```

然后编写一个特定于您的站点的函数，该函数将获得所需的数据

```
function getProducts(){
var select1 = document.getElementById("cboCategory");
var strURL = "getproducts.php?city="+select1.options[select1.selectedIndex].value;

var req = getXMLHTTP(); // function to get xmlhttp object
if (req) {
    req.onreadystatechange = function() {
        if (req.readyState == 4) { // data is retrieved from server
            if (req.status == 200) { // which reprents ok status
                document.getElementById('productsdiv').innerHTML = req.responseText; // div to be updated
            } else {
                alert("[GET Products]There was a problem while using XMLHTTP:\n" + req.statusText);
            }
        }
    };
    req.open("GET", strURL, true); // open url using get method
    req.send(null);
} 
```

}

此函数将在`cboCategory`选择选项的更改事件时调用，因此相应的 html 将是

```
<select onchange="getProducts()" id="cboCategory" class="box">
  ...
</select>
<!-- Can be anywhere on same page -->
<div id="productdiv"> </div> 
```

您的 getproduct.php 页面将返回一个 html 作为字符串，该字符串将覆盖`producstdiv`您的 html 页面中标记的内容。

您还可以将 php 中的数据作为[json 返回](/questions/tagged/json "显示标记为“json”的问题")。检查它的标签 wiki 以获取更多信息。您也可以使用[jquery](/questions/tagged/jquery "显示标记为“jquery”的问题")进行 ajax 调用。

# php - PHP 和 Apache：shell_exec(wkhtmltopdf with xvfb) 命令不起作用

> ID：12482633
> 
> 赞同：1
> 
> 时间：2012-09-18T18:12:34.357
> 
> 标签：php, apache, wkhtmltopdf, shell-exec, xvfb

我尝试在 apache（2.4.2）上使用 php（5.4.2）运行 wkhtmltopdf（0.11.0 rc1）。当我尝试启动`wkhtmltopdf-i386 --use-xserver http://www.google.com google.pdf 2>&1`时，我可以找到我的 pdf。这是我的php代码

```
<?php
    $cmd= '/usr/bin/wkhtmltopdf-i386 http://www.google.com google.pdf 2>&1';
    $ret = shell_exec($cmd);
    echo $ret;
?> 
```

它适用于 apache 和命令行`php test.php`。因为我的目标页面包含许多图像和一些“沉重”的 js 图表。当我尝试将 wkhtmltopdf 命令转换为 pdf 时，我遇到了分段错误。使它工作的唯一方法是使用 xvfb 作为 X11 模拟器。代码如下所示：

```
<?php
    $cmd= '/usr/bin/xvfb-run  /usr/bin/wkhtmltopdf-i386 --use-xserver http://www.google.com google.pdf 2>&1';
    $ret = shell_exec($cmd);
    echo $ret;
?> 
```

该脚本适用于命令行`php test.php`，但不适用于 apache。如果我查看 apache 的进程`htop`，我可以看到有两个进程（with `php test.php`）：

*   xvfb
*   wkhtmltopdf

当我使用 apache 启动时，我只有 xvfb 进程。它在 apache 超时后完成，因为它正在等待 wkhtmltopdf 进程。

我可以使它与 apache (2.2.21) 和 php (5.3.10) 一起使用。

有什么我想念的吗？也许apache的配置文件中有一些东西？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-07T14:31:14.373

我遇到了同样的问题。我使用的是 exec 函数，但同样适用于 shell_exec。函数执行在 php.ini 中被禁用。

解决方案：从 php.ini 文件的 disable_functions 中删除 shell_exec 字符串。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-18T18:34:55.047

我不确定为什么您的第二个版本不能从 Apache 调用（一定不能使用相同的 shell，因为`shell_exec`使用了 shell？），但作为一种解决方法，您可以（来自 Apache PHP）`shell_exec("php test.php");`并获得您想要的结果吗？

也许还可以尝试其他流程执行功能之一，例如[pcntl_exec](http://www.php.net/manual/en/function.pcntl-exec.php)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-18T18:50:35.923

这主要是因为所有权和权限，请尝试

```
su www-data (for debian)
php test.php 
```

你可能会看到错误。

# datetime - BigQuery 转换为不同的时区

> ID：12482637
> 
> 赞同：28
> 
> 时间：2012-09-18T18:12:55.537
> 
> 标签：datetime, timezone, google-bigquery

我将数据存储在 google big query 的 unixtimestamp 中。但是，当用户要求报告时，她需要按当地时区过滤和分组数据。

数据存储在格林威治标准时间。用户可能希望查看 EST 中的数据。报告可能会要求按日期对数据进行分组。

[我在这里](https://developers.google.com/bigquery/docs/query-reference#timestampfunctions)看不到时区转换功能：

有谁知道我如何在 bigquery 中做到这一点？即在将时间戳转换为不同的时区后如何分组？

* * *

## 回答 #1

> 赞同：39
> 
> 时间：2017-04-11T14:45:08.223

BigQuery 中的标准 SQL 具有[内置函数](https://cloud.google.com/bigquery/docs/reference/standard-sql/functions-and-operators#datetime)：

```
DATE(timestamp_expression, timezone)
TIME(timestamp, timezone)
DATETIME(timestamp_expression, timezone) 
```

例子：

```
SELECT 
   original,
   DATETIME(original, "America/Los_Angeles") as adjusted
FROM sometable;

+---------------------+---------------------+
| original            | adjusted            |
+---------------------+---------------------+
| 2008-12-25 05:30:00 | 2008-12-24 21:30:00 |
+---------------------+---------------------+ 
```

您可以使用标准[IANA 时区名称或偏移量](https://cloud.google.com/bigquery/docs/reference/standard-sql/data-types#time-zones)。

* * *

## 回答 #2

> 赞同：29
> 
> 时间：2016-10-19T19:51:54.960

截至 2016 年 9 月，BigQuery 已采用标准 SQL，您现在只需使用“DATE(timestamp, timezone)”函数来偏移时区。你可以在这里参考他们的文档：

[BigQuery 日期文档](https://cloud.google.com/bigquery/sql-reference/functions-and-operators#date-timestamp)

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2021-07-01T20:42:10.673

对于那些在这里绊倒的人：

## 如何将时间戳转换为另一个时区？

鉴于 TIMESTAMP 值一旦构造，就[存储为 UTC](https://cloud.google.com/bigquery/docs/reference/standard-sql/data-types#time_zones)，并且 TIMESTAMP 没有构造函数 (TIMESTAMP, STRING)，您可以将时间戳转换为另一个时区，方法是先将其转换为 DATETIME，然后从新时区的 DATETIME：

```
SELECT TIMESTAMP(DATETIME(timestamp_field, '{timezone}')) 
```

例子：

```
SELECT
    input_tz,
    input,
    'America/Montreal' AS output_tz,
    TIMESTAMP(DATETIME(input,'America/Montreal')) AS output
FROM (
    SELECT 'US/Pacific' AS input_tz, TIMESTAMP(DATETIME(DATE(2021, 1, 1), TIME(16, 0, 0)), 'US/Pacific') AS input
    UNION ALL
    SELECT 'UTC' AS input_tz, TIMESTAMP(DATETIME(DATE(2021, 1, 1), TIME(16, 0, 0)), 'UTC') AS input
    UNION ALL
    SELECT 'Europe/Berlin' AS input_tz, TIMESTAMP(DATETIME(DATE(2021, 1, 1), TIME(16, 0, 0)), 'Europe/Berlin') AS input
) t 
```

结果是：

| 排 | input_tz | 输入 | output_tz | 输出 |
| --- | --- | --- | --- | --- |
| 1 | 美国/太平洋 | 2021-01-02 00:00:00 UTC | 美国/蒙特利尔 | 2021-01-01 19:00:00 UTC |
| 2 | 世界标准时间 | 2021-01-01 16:00:00 UTC | 美国/蒙特利尔 | 2021-01-01 11:00:00 UTC |
| 3 | 欧洲/柏林 | 2021-01-01 15:00:00 UTC | 美国/蒙特利尔 | 2021-01-0110:00:00 UTC |

## 如何从 DATETIME 值中去除时区信息？

BigQuery 中的 DATETIME 是天真的时区，因此它们不包含时区信息。话虽这么说，如果您拥有可以知道 DATETIME 的时区的业务知识，则可以通过将其转换为具有已知时区的 TIMESTAMP 来去除该时区偏移：

```
SELECT TIMESTAMP(datetime_value, '{timezone}') 
```

鉴于 TIMESTAMP 以 UTC 存储值，如果这是您首选的存储方法，您可以重新转换为 DATETIME，但现在您会知道您的 DATETIME 是 UTC :)

希望这会有所帮助！:)

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2012-09-19T18:32:37.403

你的前提是对的。如果你这样分组，那么想要 EST 或 EDT 的用户将得到不正确的日期分组：

```
GROUP BY UTC_USEC_TO_DAY(ts_field) 
```

但是只要你计算出你的用户想要的偏移量，你仍然可以在服务器上进行完整的计算。例如，如果 EST 比 UTC 晚 5 小时，则查询如下：

```
GROUP BY UTC_USEC_TO_DAY(ts_field - (5*60*60*1000*1000000) ) 
```

只需将“5”参数化为以小时为单位的偏移量，就可以了。以下是基于其中一个示例数据集的示例：

```
SELECT
  COUNT(*) as the_count,
  UTC_USEC_TO_DAY(timestamp * 1000000 - (5*60*60*1000*1000000) ) as the_day
FROM
  [publicdata:samples.wikipedia]
WHERE
  comment CONTAINS 'disaster'
  and timestamp >= 1104537600
GROUP BY
  the_day
ORDER BY
  the_day 
```

您可以删除偏移量以查看某些编辑如何移动到不同的日期。

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2012-09-18T18:32:52.333

**2016 年更新**：*请看下面的答案，BigQuery 现在提供时间戳和时区方法*。

* * *

您是对的 - BigQuery 不提供任何时间戳转换方法。

在这种情况下，我建议您根据 GMT/UTC 时间戳字段的维度运行 GROUP BY，然后在代码中转换并显示本地时区的结果。

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2019-08-13T07:07:16.120

要将任何 TimeZone DateTime 字符串转换为 UTC，可以`PARSE_TIMESTAMP`使用.`TIMESTAMP``BigQuery`

例如，要将 IST（印度标准时间）字符串转换为 UTC，请使用以下命令：

```
SAFE.PARSE_TIMESTAMP("%a %b %d %T IST %Y", timeStamp_vendor, "Asia/Kolkata") 
```

这里`PARSE_TIMESTAMP`将 IST 字符串解析为 UTC `TIMESTAMP`（不是字符串）。添加`SAFE`为前缀可以处理错误/空值等。

要将其转换为 中的可读字符串格式`BigQuery`，请`FORMAT_TIMESTAMP`按如下方式使用：

```
FORMAT_TIMESTAMP("%d-%b-%Y %T %Z", SAFE.PARSE_TIMESTAMP("%a %b %d %T IST %Y", timeStamp_vendor, "Asia/Kolkata")) 
```

此示例将采用格式的 IST 字符串`Fri May 12 09:45:12 IST 2019`并将其转换为`12-May-2019 04:15:12 UTC`.

将 IST 替换为所需的时区和`Asia/Kolkata`相关的时区名称，以实现您的时区的转换

* * *

## 回答 #7

> 赞同：-2
> 
> 时间：2021-03-31T11:21:22.480

对我来说`TIMESTAMP_SUB`，`TIMESTAMP_ADD`功能完成了这项工作。当需要将时间戳从 UTC 转换为 PST 时，我使用了：

```
TIMESTAMP_SUB(`timestamp`, INTERVAL 8 HOUR) 
```

# java - 如何使用 Java 代码阅读 MS Outlook 收件箱邮件？

> ID：12482640
> 
> 赞同：3
> 
> 时间：2012-09-18T18:13:18.637
> 
> 标签：java, outlook, jakarta-mail

我需要使用 Java 代码阅读 Outlook 收件箱中的主题和消息。是否有相同的示例代码/想法，请帮助获得相同的。

我用 StackOverflow 搜索，它给出了 C# 中的代码。

我也检查了 Javamail，但我没有发现任何关于 Outlook 的信息。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2019-09-09T18:22:40.897

这就是我所做的。

```
 /**
 * Connects to email server with credentials provided to read from a given
 * folder of the email application
 * 
 * @param username Email username (e.g. janedoe@email.com)
 * @param password Email password
 * @param server   Email server (e.g. smtp.email.com)
 * @param INBOX    Folder in email application to interact with
 * @throws Exception
 */
    public OutlookEmail() throws Exception {
    Properties props = System.getProperties();
    props.setProperty("mail.store.protocol", "imap");
    props.setProperty("mail.imap.ssl.enable", "true");
    props.setProperty("mail.imaps.partialfetch", "false");
    props.put("mail.mime.base64.ignoreerrors", "true");

    Session mailSession = Session.getInstance(props);
    mailSession.setDebug(true);
    Store store = mailSession.getStore("imap");
    store.connect("outlook.office365.com", "YOUREMAILADDRESS", "YOUR PASSWORD");

    Folder folder = store.getFolder("INBOX");
    folder.open(Folder.READ_ONLY);

    System.out.println("Total Message:" + folder.getMessageCount());
    System.out.println("Unread Message:" + folder.getUnreadMessageCount());

    messages = folder.getMessages();

    for (Message mail : messages) {         

            System.out.println("*********************************");
            System.out.println("MESSAGE : \n");

            System.out.println("Subject: " + mail.getSubject());
            System.out.println("From: " + mail.getFrom()[0]);
            System.out.println("To: " + mail.getAllRecipients()[0]);
            System.out.println("Date: " + mail.getReceivedDate());
            System.out.println("Size: " + mail.getSize());
            System.out.println("Flags: " + mail.getFlags());
            System.out.println("ContentType: " + mail.getContentType());
            System.out.println("Body: \n" + getEmailBody(mail));    
            System.out.println("*******************************");          

    }
} 
```

**从配置中读取并传递凭据、uname、pwd 作为参数并被屏蔽。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-18T18:31:27.843

如果您想使用 Java 读取 .pst 文件可能不是一个好的选择。对我来说，如果您有服务器详细信息，直接从服务器获取邮件更有意义。

我从谷歌得到这个[链接](http://www.coderanch.com/t/382312/java/java/Reading-pst-file)——“阅读 pst 文件”。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-18T18:59:51.420

当您说“Outlook 的收件箱”时，您是指 Outlook 存储在您本地计算机上的数据吗？或者您的意思是远程邮件服务器（可能是 Exchange）中收件箱邮件文件夹中的数据？如果是后者，您可以使用 JavaMail 来执行此操作，但您必须配置 Exchange 服务器以允许 IMAP 访问。

# sql-server-2008 - 在 Where 子句中使用多行条件

> ID：12482642
> 
> 赞同：0
> 
> 时间：2012-09-18T18:13:30.140
> 
> 标签：sql-server-2008, tsql

我正在尝试制定一个查询，如果其中一行满足特定条件，我将允许我返回具有相同 ID 号的所有行。我当前的表和所需的表如下：

当前表：

```
ID  Parameter
1   x
1   x
1   y
1   x
2   x
2   x
2   x
3   y
3   y
3   x
4   x
4   x
4   x 
```

期望的结果：

```
ID  Parameter
1   x
1   x
1   y
1   x
3   y
3   y
3   x 
```

在这个例子中，我感兴趣的参数是“y”。由于 y 至少出现在 ID 1 和 3 的行中，因此 ID 1 和 3 的所有行数据都被选中，而其余的被过滤掉。有没有办法在 where 子句中写这个，还是我需要考虑另一种方法？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-18T18:17:53.727

试试这个; 它将选择任何 ID 至少有一条记录的所有记录`Parameter = 'Y'`：

```
SELECT [ID], [Parameter]
FROM YourCurrentTable
WHERE [ID] IN (
    SELECT [ID]
    FROM YourCurrentTable
    WHERE [Parameter] = 'Y'
) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-18T18:24:56.760

出于性能目的，您应该更喜欢使用 EXISTS 而不是 IN。请参阅此线程以了解 EXISTS 和 IN 的差异：[SQL Server IN vs. EXISTS Performance](https://stackoverflow.com/questions/2065329/sql-server-in-vs-exists-performance)

```
select id, parameter
from current_table c1
where exists (
    select 1
    from current_table c2
    where c2.id = c1.id
    parameter = 'y'
); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-18T18:21:10.987

这是你可以做到这一点的一种方法

```
 create table tret (i int, j char)
    insert into tret values 
    (1,   'x'),
    (1,   'x'),
    (1,   'y'),
    (1,   'x'),
    (2,   'x'),
    (2,   'x'),
    (2,   'x'),
    (3,   'y'),
    (3,   'y'),
    (3,   'x'),
    (4,   'x'),
    (4,   'x'),
    (4,   'x')

    select * from tret where i in (select i from tret where j = 'y') 
```

# javascript - 如何更新 DataTables DOM？

> ID：12482643
> 
> 赞同：4
> 
> 时间：2012-09-18T18:13:30.583
> 
> 标签：javascript, jquery-datatables

我正在使用[数据表](http://www.datatables.net)作为评论系统，用户可以通过点击星号（1 到 5）对每个项目进行评分。

```
<table cellpadding="0" cellspacing="0" border="0" class="table table-striped table-bordered" id="tabela-disciplinas-preferencia">
    <thead>
        <tr>
            <th>Semestre</th>
            <th>Curso</th>
            <th>Disciplina</th>
            <th>Nível de Interesse</th>
        </tr>
    </thead>
    <tbody>
    <tr>
        <td>1</td>
        <td>Engenharia de Software</td>
        <td>Redes</td>
        <td>    
            <div class="rating" valor="0">
                <span valor="5">☆&lt;/span><span valor="4">☆&lt;/span><span valor="3">☆&lt;/span><span valor="2">☆&lt;/span><span valor="1">☆&lt;/span>
            </div>
        </td>
    </tr>
     ....
    </tbody>
</table> 
```

我的JS

```
$(document).ready(function() {
    $('#tabela-disciplinas-preferencia').dataTable( {
        "sPaginationType": "bootstrap"
    } );
}); 
```

但是，当用户单击对一个项目进行评分时，我会更改评分 div 中的 valor 属性，但数据表不会在内部更新它们的值。

点击评分事件

```
$(document).ready(function() {
    $('div.rating span').click(function(){
        starR= new StarRating( $(this).parent());
        starR.changeValue($(this).attr('valor'));
        //Get TR Element
         aPos = oTable.fnGetPosition( $(this).parent().parent().get(0) );
         aData = oTable.fnGetData( aPos[0] );
         //Get rating div
         rating = aData[3];
         aData[3] = $(rating).attr('valor', $(this).attr('valor'));
         // ????
         oTable.fnUpdate(aData[3]);          

    });
}); 
```

如何更新数据表 DOM？我已经获得数据并更改了值，但是如何更新回 oTable？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-18T21:51:10.940

更改值并插入回 aData 已更新 oTable

```
$('div.rating span').click(function(){
        starR= new StarRating($(this).parent());
        starR.changeValue($(this).attr('valor'));
        //update oTable row data
        aPos = oTable.fnGetPosition( $(this).parent().parent().get(0) );
        aData = oTable.fnGetData( aPos[0] );
        aData[3] = $(aData[3]).attr('valor', starR.getValue());

    }); 
```

这是我找到的解决方案，看起来效果很好。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-04-30T19:07:11.850

我知道已经过了一分钟，但这是一个简单的选择。

```
$('div.rating span').click(function () {
    //Invalidate Row after DOM manipulation
    var parentRow = $(this).closest('tr');
    $('#your-table').DataTable().row(parentRow).invalidate().draw();
} 
```

您可以使已更改的行或列无效，并且表将自行更新。此方法将保持搜索条件不变。

# maven - Maven NetBeans 平台应用程序中的持久性

> ID：12482645
> 
> 赞同：1
> 
> 时间：2012-09-18T18:13:43.577
> 
> 标签：maven, persistence, netbeans-platform

我有一个带有数据库模块的应用程序，其中包含 persistence.xml 文件以及实体和控制器类。在 Maven 测试期间，它通过了所有测试，所以我相信它配置得很好。运行应用程序时，它抱怨找不到持久性单元。我确认它位于正在运行的应用程序文件夹中的相应 nbm 的 META-INF 文件夹中。

任何的想法？有什么特别的让它起作用吗？

**编辑：** 可以在[Marauroa](https://javydreamercsw@bitbucket.org/javydreamercsw/simple-marauroa-rcp) -Server-Manager 文件夹中找到代码。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-20T22:26:35.853

蒂蒙·文斯特拉（Timon Veenstra）将我引向了答案。这是答案的占位符，以防 Timon 没有帐户，因此我可以将答案归功于他以及其他运行此问题的人。

关键是确保 Persistence API、Persistence Implementation（在我的案例中为 Eclipselink）和数据库驱动程序都包装在 NetBeans 模块中。之后一切都开始工作了。

我猜 Maven/NetBeans 在这方面具有误导性，因为如果您有适当的依赖项，模块就会编译。

# javascript - JQuery 关闭内存泄漏

> ID：12482651
> 
> 赞同：0
> 
> 时间：2012-09-18T18:14:23.047
> 
> 标签：javascript, jquery, internet-explorer, memory-leaks, closures

我做了一些研究（[JavaScript 闭包和内存问题](https://stackoverflow.com/questions/5801686/javascript-closure-and-memory-issues)），但不完全了解 JS 闭包以及它们如何影响内存泄漏。我正在做更多的研究，因为我在问这个问题以试图更好地理解它，但我想我会看看是否有人可以在我这样做的时候查看这个问题并诊断问题。

我在我的网站上使用 jQuery 来更新表中的数据。它在使用时会慢慢在内存中增加，但最大的问题是当用户刷新页面时，它会跳跃约 3MB。在浏览器中打开其他选项卡时也会出现类似的问题，以至于在使用几个小时后，它可能会使用 200MB 的内存。通过阅读，我认为我已经将问题缩小到代码中的闭包问题。这是完成大部分工作的主要部分。

```
$(document).ready(function(){
setDateSelect();
var url_fm_smry=url_fm_smry_base + url_fm_currdate2 + url_region;
$.getJSON(url_fm_smry,function(data)
{
    $('#summaryContainer').empty();
    $('#summaryTblTmpl')                 // Select the template.
    .tmpl(data.d.results)               // Bind it to the data.
    .appendTo('#summaryContainer');     // Render the output.
});

$.getJSON(url_fm_meta + url_region,function(data)
{
    $('#runDTM').empty();
    $('#runDTMTmpl')                     // Select the template.
    .tmpl(data.d.results)               // Bind it to the data.
    .appendTo('#runDTM');               // Render the output.
});

setInterval(summaryCall,5000);}); 
```

`setDateSelect`根据今天的日期加载带有可变日期的下拉菜单。

`url_fm_smry`是一个由其他函数需要访问的 3 个全局变量组成的局部变量。

`summaryCall`就像上面一样，每 5 秒重复一次，用新的数据流更新表。

感谢您的任何建议和帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-10-09T23:07:52.267

在内部，[getJSON](https://github.com/jquery/jquery/blob/master/src/ajax.js#L824)这样做：

```
getJSON: function( url, data, callback ) { 
    return jQuery.get( url, data, callback, "json" );
} 
```

在此行设置断点并查看 Function 范围。至少有：

1.  jQuery
2.  jQuery.getJSON 回调
3.  jQuery.get 内部调用
4.  jQuery.get 内部回调

`jQuery.get`直接使用命名函数而不是匿名函数调用以避免闭包范围。

**参考**

*   [编写快速、内存高效的 JavaScript](http://www.smashingmagazine.com/2012/11/05/writing-fast-memory-efficient-javascript/)

*   [Javascript 模块模式、内存、闭包](http://www.macwright.org/2013/01/22/javascript-module-pattern-memory-and-closures.html)

*   [JavaScript 教程：内存泄漏](http://javascript.info/tutorial/memory-leaks)

*   [探索 JavaScript 闭包](http://blog.binarymist.net/2014/05/31/javascript-closures/)

*   [JavaScript 中的内存泄漏模式](http://www.ibm.com/developerworks/web/library/wa-memleak/)

# workflow-foundation - How can I list available values in workflow foundation

> ID：12482653
> 
> 赞同：0
> 
> 时间：2012-09-18T18:14:28.357
> 
> 标签：workflow-foundation, tfsbuild

I'm trying to write a custom code activity for my tfs build. How can I list, or where can I get a list of available values for my activity?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-19T17:20:00.490

If you are using an enumeration for an activity argument or variable, the values should show up in the property window for the activity. Another approach is to develop an activity designer on top of your custom activity that can provide a listing of the available choices.

Some resources on creating your own activity designers:

*   [http://geekswithblogs.net/jkurtz/archive/2010/01/26/137639.aspx](http://geekswithblogs.net/jkurtz/archive/2010/01/26/137639.aspx)
*   [http://msdn.microsoft.com/en-us/library/dd489419.aspx](http://msdn.microsoft.com/en-us/library/dd489419.aspx)

# objective-c - Objective-C - 初始化一个已经初始化的对象？

> ID：12482655
> 
> 赞同：1
> 
> 时间：2012-09-18T18:14:41.550
> 
> 标签：objective-c, ios, memory-management

如果我调用`[alloc] init]`一个已经初始化和分配的对象会发生什么？

在我的特殊情况下，我有一个我在超类中使用的`NSMutableArray`初始化`Parent``NSMutableArray* someArray = [NSMutableArray alloc] init];`

在子类`Child`中，我需要`someArray`在特定索引处插入一个对象，例如 3。
因此，如果数组没有项目，或者它的项目少于我尝试插入的索引（数组有 4 个项目，并且我想在索引 10 处插入）它会崩溃。

如果我在课堂`someArray`上再次初始化会发生什么？`Child`存储的指针`someArray`会被我正在初始化的新指针替换，而“旧”指针会泄漏吗？

**编辑：**

抱歉，我的术语有点不对劲。我不是说做`[someObject alloc]`，而是做之前用实例初始化的`someObject = [SomeClass alloc] init];`地方`someObject``SomeClass`

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-18T18:21:47.990

Just for clarity when you say "What happens if I call `[alloc] init]` on an object..." your terminology is wrong.

The following line:

```
NSMutableArray* someArray = [[NSMutableArray alloc] init]; 
```

Reads in English:

"Send the `alloc` message to the `NSMutableArray` class object, then send the `init` message to the object returned from the first message, then store the object returned from `init` into the pointer variable named `someArray`."

I say that to emphasize the fact that you're not "calling alloc/init" on an existing object, you're making a new object, and storing a reference to this new object over the reference you had to the previous object. Since you no longer have a reference to that previous object, you've lost the ability to properly release its memory, so yes, you'll leak it.

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-09-18T18:16:53.930

对了，会漏的。使用 NSMutableArray insertObject:atIndex‎：

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-18T18:20:06.887

There are a couple of ways that come to mind to do what I think you want. A sort of clumsy one is to put as many `[NSNull null]` objects into the array as you need so that it's filled up to the spot where you need to add the new object. Then you would replace an existing `NSNull` if you were storing your own object.

Probably a better approach is to use a dictionary instead of an array and turn your index value into a key.

# android - 为位图添加名称

> ID：12482656
> 
> 赞同：0
> 
> 时间：2012-09-18T18:14:42.730
> 
> 标签：android, string, bitmap

当我将位图转换为字符串时， `toString()`我得到类似的东西：android.graphics.Bitmap@40da7c08。我希望该名称始终相同，以便我可以比较它。有什么办法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-18T18:23:52.663

最好扩展位图类并添加另一个方法来生成您理解的唯一标识符。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-18T18:22:12.820

This is the default implementation of the `toString()` method in `Java`. Its basically the fully classified name of the class, followed by the `hexcode` of the object.

I would suggest that you do your comparison based on the `equals()` method or wrap your `Bitmap` objects inside a class of yours and add a name or id property.

# c# - FTP 方法在特定的盒子上一直失败，但在另一个盒子上有效

> ID：12482662
> 
> 赞同：0
> 
> 时间：2012-09-18T18:15:05.210
> 
> 标签：c#

我在同一个网络上有两个 Win7 盒子。这些盒子需要从同一网络中的服务器 FTP 传输某些文件。我有一个实现 FTP 方法的长脚本。

Box 1 - 代码工作正常，绝对没有遇到问题。

框 2 - 遇到 FTP 方法时代码中断（异常被捕获并显示错误框。所以我确切地知道代码中断的位置）。不确定是什么问题。我想也许有些设置是错误的。但我可以通过命令行登录服务器并通过命令行 FTP 文件。

绝对不是代码问题。两个盒子都有相同版本的代码。尝试比较两个盒子上的防火墙和 IIS 设置，一切看起来都不错。任何想法或建议将不胜感激。谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-19T18:43:10.583

谢谢你的帮助。我们决定用可以正常工作的盒子图像来克隆有问题的盒子。目前一切都很好，需要稍后找到问题框的根本原因。

# android - ListView上的setOnItemClickListener如何显示数据库值

> ID：12482663
> 
> 赞同：0
> 
> 时间：2012-09-18T18:15:06.367
> 
> 标签：android, database, listview

我有一个带有联系人信息（姓名，电话号码）的 ListView，所以当我单击联系人姓名时，我想在对话框中显示其姓名和电话号码（其中已经有一个代码），即：

```
 public void ShowMessage(String titulo,String msg){
        AlertDialog.Builder dialogo = new AlertDialog.Builder(this);        
        dialogo.setMessage(msg);        
        dialogo.setTitle(titulo);       
        dialogo.setNeutralButton("OK", null);       
        dialogo.show();
    } 
```

然后我看到了，`setOnItemClickListener`但是当我尝试把它放在我的 .java 文件中时，它甚至没有建议代码，有人知道为什么或如何做吗？

编辑：

```
 //LISTVIEW database CONTATO
    ListView user = (ListView) findViewById(R.id.lvShowContatos);
    //String = simple value ||| String[] = multiple values/columns
    String[] campos = new String[] {"nome", "telefone"};

     list = new ArrayList<String>();
    Cursor c = db.query( "contatos", campos, null, null, null, null, null);
    c.moveToFirst();
    String lista = "";
    if(c.getCount() > 0) {
        while(true) {
           list.add(c.getString(c.getColumnIndex("nome")).toString());
            if(!c.moveToNext()) break;
        }
    }

    ArrayAdapter<String> adapter = new ArrayAdapter<String>(this,
            android.R.layout.simple_list_item_1, list);

    user.setAdapter(adapter); 
```

那是我的列表视图/适配器的代码

OBS：如果你能解释更好（没有tuts链接（如果可能的话更好））

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-18T18:40:23.000

（我看到您正在自己处理光标并使用 ArrayAdapter，请了解 SimpleCursorAdapter 会为您执行此操作。请参阅下面的注释。）

无论如何，将您的 Cursor 更改为类变量并尝试将其添加到`onCreate()`：

```
user.setOnItemClickListener(new OnItemClickListener() {
    @Override
    public void onItemClick(AdapterView<?> parent, View view, int position, long id) {
        c.moveToPosition(position);
        String nome = c.getString(c.getColumnIndex("nome"));
        String telefone = c.getString(c.getColumnIndex("telefone"));
        showMessage(nome, telefone);
    }
}); 
```

您没有具体说明标题和消息与联系人姓名的关系，所以我做了这部分。

* * *

类变量只是一个定义在某个位置的变量，它对整个类都是可见的。例如，这变成`c`了一个类变量，因此您可以在以下位置使用它`onItemClick()`：

```
public class MyActivity extends Activity {
    Cursor c;

    public void onCreate(...) {
        ...
        c = db.query( "contatos", campos, null, null, null, null, "nome");
        ...
    }
} 
```

* * *

了解您可以简化阅读联系人的方式：

```
list = new ArrayList<String>();
Cursor c = db.query("contatos", campos, null, null, null, null, "nome");
int nameIndex = c.getColumnIndex("nome");
while(c.moveToNext()) {
    list.add(c.getString(nameIndex));
} 
```

我做了几个改变：

*   您只需要获取`"nome"`一次列的索引，除非您更改光标，否则它不会改变。
*   `moveToFirst()``true`如果有数据要读取，则返回，否则返回`false`。

这比您现有的方法写起来更快，运行起​​来也更快。

* * *

SimpleCursorAdapter 是将数据从游标绑定到 ListView 的标准适配器。这将为您提供与原始方法相同的结果，但代码少得多。
如何使用 SimpleCursorAdapter：

```
Cursor c = db.query("contatos", campos, null, null, null, null, "nome");
SimpleCursorAdapter adapter = new SimpleCursorAdapter(this,
        android.R.layout.simple_list_item_1, c, 
        new String[] {"nome"}, new int[] {android.R.id.text1});
user.setAdapter(adapter); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-18T18:29:45.030

假设您的 ListView 中使用的适配器具有自定义类型（我将其称为 ContactInfo），以下应该可以工作。

```
getListView().setOnItemClickListener(new OnItemClickListener() {
    @Override
    public void onItemClick(AdapterView<?> parent, View view, int position,
            long id) {
        // Get String provided to this particular row
        ContactInfo info = getListView().getAdapter().getItem(position);

        // Construct title, message etc from information within info
        showMessage("Contact Info", info);
    }
}); 
```

# compiler-construction - 是否有一种算法可以确定某些命令式代码是否具有引用透明性？

> ID：12482665
> 
> 赞同：1
> 
> 时间：2012-09-18T18:15:10.903
> 
> 标签：compiler-construction, functional-programming, static-analysis

`X`给定一大块命令式代码（和周围的程序），是否有一种算法可以确定该代码是否是引用透明的？

到目前为止，我所拥有的是：

> 一段代码是 RT 如果
> 
> 1.  在控制流离开 X 后，不会读取在 X 中分配给的非参考变量
>     
>     
> 2.  所有在 X 中被取消引用和分配的引用变量都可以证明是引用遵循规则 1 的变量
>     
>     
> 3.  不读取变量或调用函数，其值取决于运行时状态（即`scanf()`, `time()`, `argv`）

编辑：见评论

~~该算法的完美准确性不是绝对必要的，但它是可取的。（这是现实生活，不是 CS 课，所以[有人说](http://en.wikipedia.org/wiki/Worse_is_better)，“简单比正确要好一些。”）~~

编辑2：

没有引用或指针的简化语言的算法草图/想法，表示为抽象语法树：

> 1.  查找因果对（即变量的分配和使用）
> 2.  对于每一对，将 AST 中的父节点标记为非 RT，直到但不包括最低的共同祖先。

问题：初始化器怎么办？它们算作作业吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-19T01:11:42.373

是否可以确定两段代码通常是否具有引用透明*性*？没有为什么？因为*没有程序分析*可以完全准确（证明：大量不同的公式，基本上是停机问题）。但是，您可以是*近似*的。一般来说，有一些技术可以证明哪些类型的程序绝对是参照透明的（因为我们在不近似的保守方面犯了错误，必然会有一些程序是正确的，但不能证明是正确的）：

*   首先，您需要修复一种语言。分析取决于语言，分析的复杂性将根据您的语言所具有的内容而发生很大变化：并发、引用、指针，所有这些都难以处理。（引用和指针是不一样的，一般来说处理任意指针算术会比简单的引用更难！）
*   您可以查看一些定理证明器或模型检查器。这些工具可用于检查两个程序是否具有相同的输出，方法是导出对程序建模的公式，然后尝试确定它们是否描述了相同的行为集。
*   [分离逻辑](http://en.wikipedia.org/wiki/Separation_logic)是一种非常流行且不断发展的技术，用于在存在指针的情况下证明两个命令式程序正确。*基本思想是对堆的不相交*部分进行组合推理（为什么这么好？考虑您编写一个链表实现，现在您将它与一些随机写入该链表中间的代码结合起来。这对于验证来说是地狱。 )
*   在函数世界中，人们试图将等式推理应用于他们的代码。虽然这在命令式程序中并不完全相同，但如果您使用[monad](http://en.wikipedia.org/wiki/Monad_%28functional_programming%29)对堆断言建模，您可以做类似的事情。

是否有现成的工具可以应用于大型代码库？不，因为大型代码库使用了无法推理的东西（反射、困难的别名类等）。本质上，您的问题简化为某种定理证明，您需要能够*证明*两个程序是等价的。有大量论文针对子问题解决了这个问题。例如，考虑用玩具语言编写的非常简单的程序（[Imp](http://en.wikipedia.org/wiki/IMP_programming_language)是一个流行的例子！），大量的论文试图解决这样的问题。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-18T20:14:19.593

您可能想阅读“效果系统”或“类型和效果系统”，它们是一种用于描述和跟踪计算具有何种副作用的机制。我不确定是否有任何系统能够进行推理而不是依赖效果注释，但至少你应该能够了解你需要担心什么。

# php - 在php中使用foreach解析stdClass对象数据

> ID：12482670
> 
> 赞同：0
> 
> 时间：2012-09-18T18:15:31.247
> 
> 标签：php, soap, foreach

这是使用肥皂客户端函数调用函数的结果，无论我做什么，我似乎都无法解析结果并从数组中获取 SKU 列表。

```
stdClass Object
(
    [GetFilteredSkuListResult] => stdClass Object
    (
        [Status] => Success
        [MessageCode] => 0
        [ResultData] => stdClass Object
        (
            [string] => Array
            (
                [0] => XYZ2802
                [1] => XYZ2808
                [2] => XYZ2850
                [3] => XYZ2848
                [4] => XYZ2846
            )

        )

    )

) 
```

我在 PHP 中使用它来解析结果，但它没有回显任何东西？

```
foreach ($result->GetFilteredSkuListResult->ResultData as $message) {
    echo $message->string;
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-18T18:19:14.347

您缺少字符串部分：

```
foreach ($result->GetFilteredSkuListResult->ResultData->string as $message) {
  echo $message;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-18T18:20:02.237

ResultData 不是数组，字符串是。

尝试

```
foreach ($result->GetFilteredSkuListResult->ResultData->string as $message) {
    echo $message;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-18T18:29:27.860

我认为`$message`是数组['string']。所以不能回显数组，`print_r($message)`用来查看数据。要访问 index[0] 中的数据，请使用`echo $message[0];`

# excel - 如何使用 Excel 中 ListObject 的范围验证单元格？

> ID：12482671
> 
> 赞同：2
> 
> 时间：2012-09-18T18:15:32.837
> 
> 标签：excel, validation, vba, listobject

我正在尝试使用 ListObject 中的一行中的值来验证单元格（*列表*类型验证）。当我在验证代码中使用*命名范围时，它可以工作；*但如果我将*命名范围*引用替换为*ListObject*引用，则会引发错误。

您可以使用 ListObject 来验证单元格吗？

这就是我正在做的使用*命名范围*的工作：

```
With Range("Table1[COL1]").Validation
    .Delete
    .Add Type:=xlValidateList, AlertStyle:=xlValidAlertStop, Operator:=xlBetween, _
    Formula1:="=DEPT_NAMES" ' where DEPT_NAMES is a manually created named range
    '[...] more stuff goes here
End With 
```

但是，如果我替换 的值`Formula1:=`并让它指向一个有效的列表对象，如下所示：

```
Formula1:="=Table2[COL2]" 
```

...我收到一个错误。我也尝试过通过 UI 执行此操作，但它不起作用。

您真的不能使用 ListObject 验证单元格吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-18T19:44:01.767

好问题。我认为两步过程对您有用：

1.  创建一个命名范围定义为`"=Table2[ROW2]"`
2.  将您的数据验证列表指向该命名范围。

这在 Excel 2010 中对我有用。数据验证列表随着表行的插入和删除而缩小和增长。

我对“Table2[ROW2]”这个名字有点困惑。就表格/列表对象和数据验证而言，列会更有意义。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-11-03T11:25:15.407

在其他地方找到（[https://blackatlascreative.com/blog/create-an-excel-data-validation-list-using-a-table/](https://blackatlascreative.com/blog/create-an-excel-data-validation-list-using-a-table/)）：

```
Formula1:="=INDIRECT(""Table2[COL2]"")" 
```

添加`INDIRECT`是关键的区别。

# objective-c - 在 NSString 实例中替换给定 unicode char 的正确方法是什么？

> ID：12482674
> 
> 赞同：1
> 
> 时间：2012-09-18T18:15:48.813
> 
> 标签：objective-c, ios, utf-8, nsstring

我有一个 NSString 实例（我们称之为它`myString`），其中包含以下 UTF-8 unicode 字符：（`\xc2\x96`即在例如 MS Word 中看到的长破折号）。

`NSLog`当使用和格式说明符将 NSString 打印到控制台时`%@`，该字符将替换为一个倒置的问号，表示有问题 - 当将其用作表格单元格中的文本时，unicode 字符仅显示为空格（不是空字符串 - 一个空格）。

为了解决这个问题，我想`\xc2\x96`用“普通”破折号替换 unicode 字符 - 起初我认为这应该是 10 秒。任务，但经过一些研究，我还没有找到“正确的方法”来做到这一点，这就是我需要你帮助的地方。

*我试过的：*

`myString`当我像这样以十六进制打印时，`NSLog(@"%x", myString)`我得到十六进制值：`96`对于表示 unicode character 的 unicode character `\xc2\x96`。

使用此信息，我进行了以下实现，以将其替换为“正常”破折号等效项：

```
for(int index = 0; index < [myString length]; index++)
{
    NSLog(@"Hex:'%x' Char:'%c'", [myString characterAtIndex:index],[myString characterAtIndex:index]);

    if([[NSString stringWithFormat:@"%x", [myString characterAtIndex:index]] isEqualToString:@"96"])
        myString = [myString stringByReplacingCharactersInRange:NSMakeRange(index, 1) withString:@"-"];
} 
```

...它有效，但我的眼睛不喜欢它，我想知道这是否可以以更清洁和“正确”的方式完成？例如`String.Replace(char,char)` [支持 unicode 字符](http://msdn.microsoft.com/en-us/library/czx8s9ts.aspx)的 C# 。

*所以总结一下：*

我正在寻找替换字符串中的 unicode 字符的“正确方法”——我已经做了一些研究，但显然，只有可用的方法可以将出现的 a given 替换为`NSString`another `NSString`。

*我已阅读以下内容：*

*   [https://stackoverflow.com/a/5223737/700926](https://stackoverflow.com/a/5223737/700926)
*   [https://stackoverflow.com/a/5217703/700926](https://stackoverflow.com/a/5217703/700926)
*   [https://stackoverflow.com/a/714009/700926](https://stackoverflow.com/a/714009/700926)
*   [https://stackoverflow.com/a/668254/700926](https://stackoverflow.com/a/668254/700926)
*   [https://stackoverflow.com/a/2039396/700926](https://stackoverflow.com/a/2039396/700926)

...但他们都解释了如何`NSString`用另一个替换给定的`NSString`字符，并且没有涵盖如何替换特定的 unicode 字符（特别是双字节）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-18T18:23:28.150

您可以使您的字符串可变（即使用 NSMutableString 而不是 NSString）。此外，调用`[[NSString stringWithFormat:@"%x", character] isEqualToString:@"96"]`尽可能低效 - 为什么不简单`if (character == 0x96)`呢？总而言之，试试

```
NSString *longDash = @"\xc2\x96";
[string replaceOccurrencesOfString:longDash withString:@"-"]; 
```

# javascript - 如何隐藏元素并在点击时显示新元素？

> ID：12482675
> 
> 赞同：0
> 
> 时间：2012-09-18T18:15:56.970
> 
> 标签：javascript, jquery, html, css, fadein

我有三个图像，单击它们时会显示一个包含文本的隐藏元素。但是，我想确保在显示一个时隐藏其他 2 个隐藏元素。因此，如果我单击#img2，则会显示#text2，但会隐藏#text1 和#text3。此外，这可能只是一个语法错误，但是当我尝试将所有代码放在脚本标签下时，它就无法正常工作。我也很想将所有 jquery 放在脚本标记中，而不是使用 HTML 中的 onclick 功能。我对 jquery 很陌生，因此感谢所有帮助。提前致谢！

```
<div id = "img1" onclick = "$('#text1').fadeIn(500)"></div>
<div id = "img2" onclick = "$('#text2').fadeIn(500)"></div>
<div id = "img3" onclick = "$('#text3').fadeIn(500)"></div>

<div id = "text1" hidden></div>
<div id = "text2" hidden></div>
<div id = "text3" hidden></div>

<script>
    /* TODO: Put all on-click code here */
</script> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-18T18:31:15.877

保持代码不显眼是一种很好的做法

HTML

```
<div id = "img1" class="img">One</div>
<div id = "img2" class="img">Two</div>
<div id = "img3" class="img">Three</div>

<div id = "text1" class="hidden">One</div>
<div id = "text2" class="hidden">Two</div>
<div id = "text3" class="hidden">Three</div>​ 
```

CSS

```
.hidden{display:none}​ 
```

jQuery

```
$(function(){
    $("div.img").on("click", function(){
       var id = $(this).attr("id").substr(-1);
       $(".hidden").hide();
       $("#text"+id).show();        
    });   
})​ 
```

**[演示](http://jsfiddle.net/EHxQE/)**

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-18T18:21:39.177

```
<div id = "img1" onclick = "$('.effect').hide();$('#text1').show()"></div>
<div id = "img2" onclick = "$('.effect').hide();$('#text2').show()"></div>
<div id = "img3" onclick = "$('.effect').hide();$('#text3').show()"></div>

<div id = "text1" class="effect" hidden></div>
<div id = "text2" class="effect" hidden></div>
<div id = "text3" class="effect" hidden></div> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-18T18:31:29.500

[http://jsfiddle.net/uptVT/](http://jsfiddle.net/uptVT/)

```
<div id = "img1" onclick = "$('.text').hide();$('#text1').show();">img1</div>
<div id = "img2" onclick = "$('.text').hide();$('#text2').show();">img2</div>
<div id = "img3" onclick = "$('.text').hide();$('#text3').show();">img3</div>

<div id="text1" class = "text" hidden>text1</div>
<div id="text2" class = "text" hidden>text2</div>
<div id="text3" class = "text" hidden>text3</div>

<script>
    /* TODO: Put all on-click code here */
</script>​ 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-18T18:26:24.090

你可以尝试这样的事情：

**HTML：**

```
<div id="div1">One</div>
<div id="div2">Two</div>
<div id="div3">Three</div>

<div id="texts">
    <div id="txt1">Text One</div>
    <div id="txt2">Text Two</div>
    <div id="txt3">Text Three</div>
</div> 
```

**JavaScript：**

```
$(function(){

    // hide every text div (all texts children)
    $( "#texts" ).children().hide();

    // this function hides every text child and than
    // fades in the desired one
    function hideAndShow( toShowSel ) {
        $( "#texts" ).children().hide();
        $( toShowSel ).fadeIn();
    }

    // registering the click event for the divs...
    $( "#div1" ).click( function(){
        hideAndShow( "#txt1"  );
    });

    $( "#div2" ).click( function(){
        hideAndShow( "#txt2"  );
    });

    $( "#div3" ).click( function(){
        hideAndShow( "#txt3"  );
    });
}); 
```

可以在这里找到一个活生生的例子：http: [//jsfiddle.net/davidbuzatto/FztUN/](http://jsfiddle.net/davidbuzatto/FztUN/)

# postgresql - Postgresql 和旧的持久数据

> ID：12482677
> 
> 赞同：0
> 
> 时间：2012-09-18T18:16:01.563
> 
> 标签：postgresql

有没有人对使用 PostgreSQL 的旧持久数据有问题。我最近做了一份报告，得到了两个不同的结果。我第二次运行报告时丢失了六条记录。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-18T23:28:20.030

几乎可以完全确定问题出在您的代码或您使用 PostgreSQL 的方式上。您没有提供足够的信息让任何人解释这一点 - 甚至您的 PostgreSQL 版本也没有！

影响事务隔离和可见性的核心 MVCC 设计的错误会报告给邮件列表，但很少会消失，而且它们往往出现在通常不会遇到的时髦的极端情况中。

我看到数据死而复生的唯一时间是：

*   用户一直在使用`fsync=off`fsync 或在存储上运行，并且他们在`DELETE`. 他们`DELETE`返回了一些 d 数据，以及一些有趣的损坏表和索引。设置`fsync=off`基本上告诉 PostgreSQL“让它更快，我不在乎你是否销毁我所有的数据”，所以这是一个完全有效的结果。

*   有人在标记的函数上创建了一个索引，该函数`IMMUTABLE`根本不是真正不可变的。这通常只会产生错误的结果，但是对于 9.2 的覆盖索引，我怀疑它也有可能似乎将数据从死里带回来。

所以，老实说，这是你做错的事情。尝试发布一个更详细的新*问题*：

*   pg版
*   您如何运行报告
*   DDL
*   SQL
*   数据库工作负载是什么样的
*   同时发生了什么
*   还有哪些其他客户

...等等，也许有人可以提供帮助。

# sql - 如何在 SQL 中按产品按月创建数据透视表

> ID：12482679
> 
> 赞同：1
> 
> 时间：2012-09-18T18:16:17.133
> 
> 标签：sql, postgresql, aggregate-functions, crosstab

我有 3 张桌子：

```
users (id, account_balance)
grocery (user_id, date, amount_paid)
fishmarket (user_id, date, amount_paid) 
```

鱼市和杂货店表都可能多次出现相同的 user_id，但支付的日期和金额不同，或者对于任何给定的用户都没有。我正在尝试开发以下结构的数据透视表：

```
id | grocery_amount_paid_January | fishmarket_amount_paid_January
  1          10                           NULL
  2          40                           71 
```

我能想到的唯一想法是创建多个左连接，但这应该是错误的，因为每个产品将有 24 个连接（每个月）。有没有更好的办法？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-18T23:37:47.433

我最近在 PostgreSQL 中提供了很多关于[交叉表查询](https://stackoverflow.com/search?q=[crosstab]+[postgresql]+is%3Aanswer)的答案。有时像下面这样的“普通”查询可以完成这项工作：

```
WITH x AS (SELECT '2012-01-01'::date AS _from
                 ,'2012-12-01'::date As _to)  -- provide date range once in CTE
SELECT u.id
      ,to_char(m.mon, 'MM.YYYY') AS month_year
      ,g.amount_paid AS grocery_amount_paid
      ,f.amount_paid AS fishmarket_amount_paid
FROM   users u
CROSS  JOIN (SELECT generate_series(_from, _to, '1 month') AS mon FROM x) m 
LEFT   JOIN (
   SELECT user_id
         ,date_trunc('month', date) AS mon
         ,sum(amount_paid) AS amount_paid
   FROM   x, grocery                        -- CROSS JOIN with a single row
   WHERE  date >= _from
   AND    date <  (_to + interval '1 month')
   GROUP  BY 1,2
   ) g ON g.user_id = u.id AND m.mon = g.mon
LEFT   JOIN (
   SELECT user_id
         ,date_trunc('month', date) AS mon
         ,sum(amount_paid) AS amount_paid
   FROM   x, fishmarket
   WHERE  date >= _from
   AND    date <  (_to + interval '1 month')
   GROUP  BY 1,2
   ) f ON f.user_id = u.id AND m.mon = g.mon
ORDER  BY u.id, m.mon; 
```

产生这个输出：

```
id | month_year | grocery_amount_paid | fishmarket_amount_paid
---+------------+---------------------+------------------------
 1 | 01.2012    | 10                  | NULL
 1 | 02.2012    | NULL                | 65
 1 | 03.2012    | 98                  | 13
...
 2 | 02.2012    | 40                  | 71
 2 | 02.2012    | NULL                | NULL 
```

### 要点

*   第一个 CTE 只是为了方便。因此，您只需输入一次日期范围。您可以使用*任何*日期范围 - 只要它是当月第一天的日期（将包括该月的其余时间！）。您可以添加[`date_trunc()`](http://www.postgresql.org/docs/current/interactive/functions-datetime.html#FUNCTIONS-DATETIME-TRUNC)它，但我想您可以控制使用无效日期的冲动。

*   获得( ) 结果的第一批[`CROSS JOIN`](http://www.postgresql.org/docs/current/interactive/sql-select.html#SQL-FROM)用户，该结果在您的日期范围内每月提供一行。您已经[在上一个问题](https://stackoverflow.com/a/12464135/939860)中了解了如何导致每个用户多行。[`generate_series()`](http://www.postgresql.org/docs/current/interactive/functions-srf.html)`m`

*   这两个子查询是同卵双胞胎。使用`WHERE`对基列进行操作的子句，因此它可以利用索引 - 如果您的表运行多年，您应该拥有索引（仅使用一两年，顺序扫描会更快）：

    ```
    CREATE INDEX grocery_date ON grocery (date); 
    ```

*   然后将所有日期减少到本月的第一天，[`date_trunc()`](http://www.postgresql.org/docs/current/interactive/functions-datetime.html#FUNCTIONS-DATETIME-TRUNC)并使用 sum `amount_paid`per`user_id`和结果`mon`.

*   `LEFT JOIN`结果到基表，再次通过`user_id`和结果`mon`。这样，行既不会增加也不会减少。`user_id`您每月获得一排。瞧。

顺便说一句，我永远不会使用列名`id`。`user_id`也可以在表中调用它`users`。

# asp.net - 在 asp.net 中保存 Unicode 字符

> ID：12482680
> 
> 赞同：3
> 
> 时间：2012-09-18T18:16:33.390
> 
> 标签：asp.net, vb.net

我有一个使用 VB.NET 用 ASP.NET 编写的 CMS，但在将 Unicode 字符保存到数据库时遇到问题。情况如下：

该网页似乎可以通过 AJAX 请求（使用 jQuery）很好地发送字符，至少根据 Firebug 的说法，似乎 POST 发送得很好，我可以看到其中的字符应该是这样的（即，没有搞砸）。当我查看数据库而不是非英文字符时，我在小黑菱形内看到一个问号，你知道这个字符。我知道这不是数据库，因为 a）该字段设置为 NText 并且 b）我可以通过 SQL 管理器在手动查询中将相同的值直接插入到数据库中。数据库是 MS SQL 2005。

所以问题必须介于两者之间，对吗？我特别将插入查询的参数声明为 NText：

```
Cmd.Parameters.Add("@FieldContent", SqlDbType.NText).Value = FieldContent 
```

在 web.confing 我将编码设置为：

```
<globalization requestEncoding="utf-8" responseEncoding="utf-8" /> 
```

我已经用谷歌搜索了高和低，除了我已经尝试过的解决方案之外找不到任何其他解决方案。非常感谢任何帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-19T13:51:13.917

尝试

```
cmd.Parameters.Add("@FieldContent", SqlDbType.NVarChar, 1024).Value = FieldContent; 
```

# objective-c - ObjectiveZlib 不解压

> ID：12482683
> 
> 赞同：2
> 
> 时间：2012-09-18T18:16:45.660
> 
> 标签：objective-c, ios, gzip

我不断收到此代码的膨胀错误-3。我尝试了不同版本的 libz。我试过`libz.dylib`了，我试过了有`libz.1.2.5.dylib`什么建议吗？

```
NSData *originalData = [@"Look out! It's..." dataUsingEncoding:NSUTF8StringEncoding];
//use Godzippa to compressed
NSData *compressedData = [originalData dataByGZipCompressingWithError:nil];
//use ObjectiveZlib to decompressed
NSData *decompressedData = [NSData dataByDecompressingData:compressedData]; 
```

*编辑*

我在一个新项目中得到了这个工作。现在我需要解压缩从 php web 服务器收到的 gz 文件。我从上面得到错误`dataByDecompressingData:] [Line 94] inflate error: -3`

```
NSData *originalData = [@"Look out! It's..." dataUsingEncoding:NSUTF8StringEncoding];
// use ObjectiveZlib to compress
NSData *compressedData2 = [NSData dataByCompressingData:originalData];
//use ObjectiveZlib to decompressed
NSData *decompressedData2 = [NSData dataByDecompressingData:compressedData];
NSLog(@"%@", [NSString stringWithUTF8String:[decompressedData2 bytes]]); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-19T01:39:30.630

ObjectiveZlib 压缩和解压到[zlib](https://www.rfc-editor.org/rfc/rfc1950)格式，而不是[gzip](https://www.rfc-editor.org/rfc/rfc1952)格式。如果您尝试将 gzip 流提供给 ObjectiveZlib 解压缩器，它将正确拒绝它。

您可以修改ObjectiveZlib 源代码并编写自己的ObjectiveGzip。改变：

```
deflateInit(&stream, Z_DEFAULT_COMPRESSION) 
```

到：

```
deflateInit2(&stream, Z_DEFAULT_COMPRESSION, Z_DEFLATED, 15+16, 8,
             Z_DEFAULT_STRATEGY) 
```

和

```
inflateInit(&stream) 
```

到：

```
inflateInit2(&stream, 15+16) 
```

这`15+16`两种情况都要求 zlib 使用 gzip 格式而不是 zlib 格式。如果`inflateInit2`您改用`15+32`它，它将自动检测它是 zlib 还是 gzip 格式并相应地解码。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-18T20:50:39.510

我实际上最终使用了[GZIP](https://github.com/nicklockwood/GZIP)，它适用于 gunzip 我从网络服务器下载的 gzip 文件。

# c# - 带有 byte[] 字段作为存储过程参数的 DataTable

> ID：12482687
> 
> 赞同：8
> 
> 时间：2012-09-18T18:16:59.673
> 
> 标签：c#, .net, datatable, table-valued-parameters

我一直在重用这种使用 DataTable 作为存储过程参数的方法，并且效果很好。这是简化的工作代码：

```
using (dbEntities dbe = new dbEntities())
{
    var dt = new dataTable();
    dt.Columns.Add("ID");
    dt.Columns.Add("Message");
    dt.Columns.Add("CreatedOn", typeof(DateTime));

    foreach (var row in randomDataSource)
    {
        dt.Rows.Add(
            row.id,
            row.message,
            DateTime.Now
            );
    }

    var tableType = new SqlParameter("tableType", SqlDbType.Structured);
    tableType.Value = dt;
    tableType.TypeName = "[dbo].[RandomTableType]";

    dbe.ExecuteStoreCommand(
        "EXEC [dbo].[SaveTable] @tableType",
        new object[] { tableType }
        );
} 
```

当我要添加的字段是二进制类型时，就会出现问题。IE：

```
dt.Columns.Add("BinaryMessage", typeof(byte[])); 
```

顺便说一下数据库中对应的列`varbinary(MAX)`。当我尝试运行它时，我收到此错误：

> 不允许从数据类型 nvarchar(max) 到 varbinary(max) 的隐式转换。使用 CONVERT 函数运行此查询。

如何修改我必须完成的工作？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-09-19T13:40:50.427

.NET 中二进制字符串的表示形式是[`SqlBinary`结构](http://msdn.microsoft.com/en-us/library/system.data.sqltypes.sqlbinary.aspx)。

你想像这样添加你的列：

```
dt.Columns.Add("BinaryMessage", typeof(SqlBinary)); 
```

该类`SqlBinary`具有[到字节数组的显式转换](http://msdn.microsoft.com/en-us/library/ms136675.aspx)和从字节数组的[隐式转换](http://msdn.microsoft.com/en-us/library/system.data.sqltypes.sqlbinary.op_implicit.aspx)，因此从字节数组到列的值是简单的赋值问题，而从列中获取字节数组需要显式转换。

# php - 使用 PHP Exec() 命令运行 WINRS / WINRM cmd

> ID：12482700
> 
> 赞同：0
> 
> 时间：2012-09-18T18:17:54.840
> 
> 标签：php, iis, system, exec, winrm

平台详细信息：IIS7、PHP5、Windows Server 2008 服务器名称：server1

我正在尝试使用 php 的 exec() 函数来执行具有以下命令的 .bat 文件：

```
winrs -r:server2 "C:\custom_functions.bat" 
```

但是，当我执行该命令时，它不起作用。直接在 server2 上运行 custom_functions.bat 文件时，它工作正常，因此问题不太可能是我的代码。我猜它是权限错误。

当我执行 exec("whoami") 时，它以用户身份返回 "nt authority\network service"。

如果我通过 php exec() 函数（例如 exec("ipconfig") 或 exec("dir c:\")）执行任何基本的 windows 命令，它们就可以正常工作。当我尝试使用 WINRM 在远程服务器上执行命令时，问题就出现了。我也使用了 php 的 system() 函数——结果相同。

请帮忙！？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-18T18:25:31.080

要在服务器上运行命令，您需要在该服务器上获得授权。当您从提示符手动运行命令时，您可以通过您的用户帐户进行访问。

当 IIS 运行该命令时，它作为内置用户运行，该用户无权访问 server2。

我不建议让 webserver 进程访问 server2。

# python - 在 Mac OSX Lion 上使用 tempfile.mkdtemp() 时 Python 的 os.chdir() 和 os.getcwd() 不匹配

> ID：12482702
> 
> 赞同：6
> 
> 时间：2012-09-18T18:17:56.960
> 
> 标签：python, macos, filesystems

我不确定这是错误还是功能，但是当我将目录更改为使用`os.chdir()`生成的目录时，`tempfile.mkdtemp()`会`os.getcwd()`报告带有`/private`前缀的目录。

以下代码说明了这一点：

```
In [1]: import os, tempfile

In [2]: d = tempfile.mkdtemp()

In [3]: d
Out[3]: '/var/folders/s4/grpfgn297hjgnfws3tl_gnt80000gn/T/tmpmfNUYz'

In [4]: os.chdir( d )

In [5]: os.getcwd()
Out[5]: '/private/var/folders/s4/grpfgn297hjgnfws3tl_gnt80000gn/T/tmpmfNUYz' 
```

有人可以解释为什么会这样吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-18T18:21:27.733

`/var`是一个符号链接`/private/var`

```
$ ls -l /var
lrwxr-xr-x@ 1 root  wheel  11 Dec  2  2011 /var -> private/var 
```

`tempfile`只是使用环境`TMPDIR`变量作为路径位置的前缀，所以它只是一个字符串。但是`os.getcwd()`正在解决绝对位置：

```
$ echo $TMPDIR
/var/folders/04/kc575q1n6x9drkwxyfljg5zw0000gn/T/ 
```

# json - 需要对“最深”资源项的正确 RESTful 响应格式提出建议

> ID：12482710
> 
> 赞同：2
> 
> 时间：2012-09-18T18:18:21.563
> 
> 标签：json, rest

我有一个关于设计以 JSON 格式返回和接受数据的 RESTful API 的“概念”问题。

考虑以下请求和响应：

```
GET http://host/records/12345

{ "id":"12345", "address":{"street":"main street","number":5,"city":"springfield"}}

GET http://host/records/12345/address

{"street":"main street","number":5,"city":"springfield"}

GET http://host/records/12345/address/city

{"city":"springfield"}

OR

springfield (=not valid json) 
```

我意识到第二个答案不是有效的 JSON 响应，所以我认为后者是我问题的正确答案。然而，在我看来，以键/值的形式响应是多余的，因为请求者在请求期间已经知道“键”。

更新计数相同：

当我想用另一个值更新我的 12345 记录的城市时，提交什么更正确：

```
PUT http://host/records/12345/address/city

{"city":"paris"}  <- content of body when submitting

OR

paris <- content of body when submitting (=not valid json) 
```

我问的原因是因为这样做已经足够了

```
PUT http://host/records/12345/address

{"city":"paris"}   <- content of body when submitting 
```

什么被认为是最合适的方法？

谢谢，

周杰伦

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-18T19:10:14.923

REST API 通常处理资源，这些资源松散地转换为数据库中的对象或表。您的第一个 GET 示例并不表示您正在尝试获取“地址”类型的资源。如果您想向您的 API 添加其他资源，例如“公司”，那么这将不清楚。并且应该有一种方法可以获取所有地址的列表。因此，要获取所有地址，API 调用看起来像

```
GET http://host/records/address

[{"id":"12345", "street":"main street","number":5,"city":"springfield"},
{"id":"12346", "street":"foo street","number":1,"city":"alexandria"}] 
```

要获得一个特定的地址，它看起来像

```
GET http://host/records/address/12345

{"id":"12345", "street":"main street","number":5,"city":"springfield"} 
```

该 id 是地址对象的一部分，我认为没有必要像您的示例那样将其分解为父对象。然后，您使用该 ID 让您的 Web 服务知道需要更新的内容。所以你的更新看起来像这样。

```
PUT http://host/records/address

{"id":"12345", "street":"main street","number":5,"city":"paris"} 
```

通常客户端会发送整个对象，而不仅仅是要更新的字段。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-18T19:52:26.277

如果你真的想要做这种“微​​ PUT”风格的更新，那么考虑只使用`text/plain`媒体类型发送正文。使用 HTTP 的好处之一是您可以自由混合和匹配媒体类型以使用最合适的媒体类型。

```
PUT http://host/records/12345/address/city
Content-Type: text/plain
Content-Length: 5

paris

=> 
200 OK 
```

但请注意，HTTP 已针对处理大型粒度资源进行了优化。如果您看到您的用户想要频繁地进行此类小型更新，那么您可能需要重新考虑这种方法。

# javascript - 原型 AJAX Post 参数随机丢失

> ID：12482718
> 
> 赞同：4
> 
> 时间：2012-09-18T18:18:40.497
> 
> 标签：javascript, asp.net, ajax, prototype

好的，所以我有一个 .NET 应用程序，它使用 Prototype 库对页面隐藏中的 webmethods 进行 AJAX 调用以检索数据。这个应用程序已经启动并运行了很长一段时间，没有任何问题。最近一位新用户开始使用该应用程序并遇到一些奇怪的问题。

基本上，发生的事情是他可以在一段时间内正常使用该应用程序，然后它开始在 AJAX 调用上抛出错误，说明 webmethod 缺少参数。这是错误：

```
System.InvalidOperationException - Unable to perform the requested action:  Invalid web service call, missing value for parameter: 'fleet'.
   at System.Web.Script.Services.WebServiceMethodData.CallMethod(Object target, IDictionary'2 parameters)
   at System.Web.Script.Services.WebServiceMethodData.CallMethodFromRawParams(Object target, IDictionary'2 parameters)
   AT SYSTEM.WEB.SCRIPT.SERVICES.RESTHANDLER.INVOKEMETHOD(HTTPCONTEXT CONTEXT, WEBSERVICEMETHODDATA METHODDATA, IDICTIONARY`2 RAWPARAMS)
   at System.Web.Script.Services.RestHandler.ExecuteWebServiceCall(HttpContext context, WebServiceMethodData methodData) 
```

不只是一个调用搞砸了，任何 ajax 调用都是随机的，而且它似乎总是 webmethod 中的第一个参数被称为“丢失”。让我相信帖子数据不会以某种方式恢复？（相关？： [JQuery Ajax post 参数有时不会在 IE 上发送](https://stackoverflow.com/questions/6941898/jquery-ajax-post-parameters-sometimes-not-sent-on-ie)）。

我从来没有能够重新创建这个问题，也没有任何其他用户遇到过。这让我相信这是导致问题的用户系统上的特定问题。不幸的是，他们是一个相当重要的用户，所以我需要尝试解决这个问题。用户有 IE8 作为他们的浏览器。下面是使用原型进行 ajax 调用的代码：

```
function gAjax(url, params, onSuccess, onError, onException, onComplete) {

    new Ajax.Request(url,
    {
         method:'post',                                     //Post
         contentType:"application/json; charset=utf-8",     //As JSON
         postBody:Object.toJSON(params),                    //Post Body is JSON string
         sanitizeJSON:true,                                 //Sanitize the JSON
         onComplete:onComplete,                             //Set user on complete
         onSuccess:onSuccess,                               //Set user on success
         onFailure:onError,                                 //Set user on error
         onException:onException                            //Set user on exception
    });
} 
```

onComplete、onSuccess、onError、onException 是函数回调。params 是一个像下面这样的对象：

{'舰队':'fleetVal','bin':1234}

Url就是方法，比如Bin.aspx/LoadBinInfo。该方法在后端定义如下：

```
 <System.Web.Services.WebMethod()> _
    Public Shared Function LoadBinInfo(ByVal fleet As String, ByVal bin As Integer) As Dictionary(Of String, Object)

        '.....
        'Returns a dictionary of info
    End Function 
```

如果有人对正在发生的事情有任何想法，我将不胜感激任何输入！我似乎无法在我的研究中找到任何信息来引导我找到可能的原因。同样，它似乎只发生在这个用户身上，所以可能是他的浏览器设置（任何想法什么设置？）。但对他来说，这也是零星的，但一旦开始发生，它就会不断发生，直到他关闭浏览器并重新开始。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-14T11:43:29.143

我在这里回答是因为我似乎没有足够的声誉来发表评论而不是回答。目前还不清楚请求中缺少什么，但我会继续检查网络日志（或设置某种日志记录）以查看系统实际接收的内容。根据您对问题的描述，该请求以某种方式缺少“fleet”参数。但是您并没有在请求中发送这种孤立的值，而是将帖子正文中的所有数据作为序列化的 JSON 字符串发送。所以，要么传递给 gAjax 的数据不正确/不完整，要么你的服务器上发生了一些奇怪的事情。我显然怀疑是前者，但无论如何你应该尝试在两端记录和调试。首先，我会做这样的事情：

```
function gAjax(url, params, onSuccess, onError, onException, onComplete) {

    params['debug']=Object.toJSON(params);
    new Ajax.Request(url,
//.... 
```

这会将 JSON 字符串添加到请求中，以便您可以准确检查正在发送的内容。

希望这可以帮助！

# c++ - ofstream 不在 C++ 中创建文件

> ID：12482725
> 
> 赞同：2
> 
> 时间：2012-09-18T18:19:12.873
> 
> 标签：c++, iostream

我正在尝试将我的数组的每个元素输出到一个 .txt 文件中，但由于某种原因它甚至没有创建该文件。我的显示方法中有一个 cmd 输出和文件输出，它是从 main 调用的。cmd 输出工作完美，但是当我使用 ofstream 尝试创建文件并将数组的元素输出到它时，我没有看到创建任何文本文件。

```
ofstream ofs("TEST.txt");

if(!ofs)
    cout << "cannot use" << endl;
else
{
    for(int a=0; a < 12; a++)
    {
        for(int b=0; b < 12; b++)
        {

            cout << RandomArray[a][b] << "\t";
            ofs << RandomArray[a][b];
        }

        cout << "\n";
    }

}

ofs.close(); 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-18T18:29:30.880

试试这个

```
#include <iostream>
#include <fstream>

#ifdef _WIN32
#include <windows.h>
#define SYSERROR()  GetLastError()
#else
#include <errno.h>
#define SYSERROR()  errno
#endif

int main(int argc, char** argv)
{
    std::ofstream of("TEXT.TXT");
    if(of.is_open())
    {
        of<<"Some text here"<<std::endl;
        of.flush();
        of.close();
        std::cout<<"wrote the file successfully!"<<std::endl;
    }
    else
    {
        std::cerr<<"Failed to open file : "<<SYSERROR()<<std::endl;
        return -1;
    }
    return 0;
} 
```

win32 GetLastError() #define 未经测试，因为我手边没有 Windows 框。errno 位有效。如果文件打开失败，这至少会告诉您错误是什么

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-09-18T18:27:09.937

您的程序没问题，只要`ofstream`可以创建它就应该可以工作。我认为您没有在正确的目录中查找。

# java - 将大型 XML 文档从一种格式转换为另一种格式的最快和最佳方法

> ID：12482729
> 
> 赞同：1
> 
> 时间：2012-09-18T18:19:24.277
> 
> 标签：java, design-patterns, architecture, implementation

我有一堆大型 XML 文件（所有文件的总大小超过 1 GB），我需要将它们从供应商模式转换为我们的模式。

供应商在其服务器上的某个 FTP 位置有一个 ZIP 文件（它包含大型 XML 文件）。我必须选择那个 ZIP 文件，然后转换所有可用的 XML 文件。转换为我们的模式格式后，我需要将数据保存在数据库中。

实现这一点的好设计是什么？有哪些支持 Java 的相关工具和实用程序？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-18T18:42:44.387

只需使用常规的 Java API ...

```
File zipFile = new File("archive.zip");
File xsltFile = new File("transform.xslt");
File transformedXmlsFile = new File("transformed.xml");

StreamSource xsltSource = new StreamSource(xsltFile);
Transformer transformer = TransformerFactory.newInstance().newTransformer(xsltSource);

ZipInputStream zipIn = new ZipInputStream(new FileInputStream(zipFile));
ZipEntry zipEntry;
OutputStream resultXmls = new FileOutputStream(transformedXmlsFile);
while ((zipEntry = zipIn.getNextEntry()) != null){
  StreamSource inputXml = new StreamSource(zipIn);
  StreamResult resultXml = new StreamResult(resultXmls);
  transformer.transform(inputXml, resultXml);
}
zipIn.close();
resultXmls.close(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-18T18:27:32.363

我喜欢简单的方法。我会使用任何 SAX、Stax 实现，而不使用任何 DOM。但它只是我，也许你会在这里找到一个花哨的图书馆，它会代替你做所有的工作:)

DOM 中的 1GB xml 可以吃掉你所有的内存！- 小心你选择什么图书馆以及他在幕后使用什么。

我希望它有帮助！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-10T01:49:00.407

我使用 Saxon-EE 进行转换，使用 Woodstox 进行 XML 解组。

# c# - FileSystemWatcher OnCreated 仅针对复制的多个文件的第一个文件触发

> ID：12482735
> 
> 赞同：4
> 
> 时间：2012-09-18T18:20:02.827
> 
> 标签：c#, .net, filesystemwatcher

我有一个`FileSystemWatcher`我想`OnCreated event` ***为复制到监视目录中的每个文件夹***触发一个。将手动将多个文件夹一次复制到此监视目录中。

目前它只为`event`复制的第一个文件夹触发。
因此，如果我正在查看文件夹 X 并在 Windows 资源管理器中选择文件夹 A、B、C 并将它们复制到 X 中，`OnCreated`则会为 A 而不是 B 或 C 触发。

这是我用来设置的代码`FileSystemWatcher`：

```
watcher = new System.IO.FileSystemWatcher(watchPath);            
watcher.InternalBufferSize = 32768;
watcher.IncludeSubdirectories = true;
watcher.NotifyFilter = NotifyFilters.FileName | NotifyFilters.DirectoryName | 
                       NotifyFilters.CreationTime | NotifyFilters.LastWrite;

watcher.Changed += new FileSystemEventHandler(OnChanged);
watcher.Created += new FileSystemEventHandler(OnCreated);
watcher.EnableRaisingEvents = true; 
```

这是我的`OnCeated`方法

```
void OnCeated(object sender, FileSystemEventArgs e)
{            
    XDocument xmlDoc = BeginImport(e.FullPath); 
} 
```

知道**为什么这只会触发**复制到监视目录中的第一个文件夹的事件吗？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-09-18T18:29:02.720

从[文档中](http://msdn.microsoft.com/en-us/library/system.io.filesystemwatcher.aspx)：

> Windows 操作系统会通知您的组件在由 FileSystemWatcher 创建的缓冲区中的文件更改。**如果短时间内有很多变化，缓冲区可能会溢出。这会导致组件失去对目录更改的跟踪，并且它只会提供一揽子通知**。使用 InternalBufferSize 属性增加缓冲区的大小是昂贵的，因为它来自无法换出到磁盘的非分页内存，因此请保持缓冲区小而大，以免错过任何文件更改事件。**为避免缓冲区溢出，请使用 NotifyFilter 和 IncludeSubdirectories 属性，以便您可以过滤掉不需要的更改通知。**

这似乎是一个内部限制。

我相信一次粘贴所有三个文件夹的行为被认为是“在短时间内进行了很多更改”——你可以使用[NotifyFilter](http://msdn.microsoft.com/en-us/library/system.io.filesystemwatcher.notifyfilter.aspx)并省略一些事件吗？

# javascript - Right way to detect firebug on the client side when firebug is activated on a webpage

> ID：12482736
> 
> 赞同：3
> 
> 时间：2012-09-18T18:20:03.490
> 
> 标签：javascript, jquery, firebug

> **Possible Duplicate:**
> [Javascript that detects Firebug?](https://stackoverflow.com/questions/398111/javascript-that-detects-firebug)

I tried the following code which did not work.

```
if(window.console && window.console.firebug)
{
 alert("Firebug active!");
} 
```

What is the right way to detect firebug on the client side when firebug is activated on a webpage using JavaScript or JQuery.

# javascript - What are the best ways to prevent fake registrations?

> ID：12482742
> 
> 赞同：5
> 
> 时间：2012-09-18T18:20:44.883
> 
> 标签：javascript, security, registration, humanize

I would like to know more about the solutions to restrict registering for a website for humans only.

Captcha may seem a proper solution but as it turns out it's [not as good as it sounds](http://www.sitepoint.com/captcha-problems-alternatives/). And it's not a problem if a solution is not an option for blind, deaf people etc..

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-18T18:36:31.750

我最新的 Web 应用程序使用的过程对用户来说非常容易，对我来说也很安全。

1.  用户进入登录页面，输入他们的电子邮件地址并单击“我正在注册”复选框。
2.  用户单击“注册”，他们的电子邮件地址被插入到临时 SQL 表（称为`signups`）中，并且带有验证链接的电子邮件被发送到该电子邮件地址。
3.  用户单击将他们带到“创建密码”页面的验证链接。
4.  用户创建密码后，将电子邮件地址和密码插入表中，并删除表中`users`的条目。`signups`

![网络应用注册示例](../Images/547a6f561950ddef5780211966540083.png)

这使它变得简单和可靠。

该`signups`表还包括一个随机 SHA1 哈希（用于验证链接）、一个设置为注册后 12 小时的时间戳和 IP 地址。

`signups`表中具有过期时间戳的所有条目都会在一天中的某些部分被删除。

* * *

### 更新

自从写下这个答案后，我发现保持注册表单不受机器人攻击是一场永无止境的战斗。

随着时间的推移，正在开发新的技术和方法来规避安全措施。任何开发团队能做的最好的事情就是定期检查注册的质量，并想办法让他们的注册表格更安全、更直观的使用。

是的，这是一个很好的工作和资源，但是对你的注册表格和注册质量有信心是非常值得的。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-18T18:34:42.207

根据您网站的针对性，使用 a`honeypot`可能非常有效。

简而言之，您的表单上有一个具有通用名称的字段——比如说`email`. 您的实际`email`字段有一些其他随机名称，例如`larp`.

使用 CSS隐藏该`email`字段，并包含一个文本标签，指示用户将该字段留空，如果他们碰巧看到它。

如果有任何注册进入并`email`填写了该字段，请发回一条成功消息，然后将其删除。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-10T13:59:51.007

验证电子邮件地址并仅允许已验证其电子邮件的用户是最简单、最快捷的解决方案。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-18T18:31:05.900

而不是验证码（输入图像中显示的文字），我见过要求您回答问题的网站，通常是基本数学。我还没有实现这些，但我已经在几个地方看到了它们，所以它一定是各种 CMS 的插件等等。

底线是，任何系统最终都会被规避。你可以尽量减少机器人注册，但我可以根据经验告诉你，有些人会付钱给其他人（他们几乎可以通过任何测试）来注册网站 - 薪水通常很差，但是总有人会觉得这是可以接受的。

因此，除了您使用的任何解决方案之外，您还需要定期重新评估该解决方案，并且您需要有人审查新注册（可能每天一次？）以清除少数确实获得的“机器人”通过。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-18T18:24:54.577

您可以让用户收听音频文件，然后在文本框中输入单词。这就是我想为 phpBB3 做的事情，但是很可惜，他们不允许在验证问题中使用 HTML 标记。或者，您可以进行深度防御，并让验证码只是过程的一部分。

# python - 在解决所有重定向后但在使用 urllib2 下载页面之前如何拦截请求？

> ID：12482743
> 
> 赞同：2
> 
> 时间：2012-09-18T18:20:46.523
> 
> 标签：python, http, redirect, urllib2

我正在抓取新闻文章并使用 urllib2。它会自动处理重定向，我可以使用 geturl() 从响应中获取解析的 url

但是如果解析的 url 在某个列表中，我想停止请求，以避免花费时间和带宽下载页面。

回答这些问题中的任何一个就足够了

是否`urllib.opener.open()`下载页面，或者当您调用时会发生这种情况`response.read()`？

有没有一种方法可以要求`urllib2`仅解决重定向？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-18T20:31:57.700

经过一些快速而肮脏的实验，我想我可以说我找到了你问题的部分答案。`opener.open()`并且`urlopen()`默认情况下两者的行为方式相同。他们将下载您重定向到的页面，即使您只能通过该`read()`功能读取输出。

但是，您可以使用自己的处理程序覆盖这些默认值，传递给`build_opener()`. 例如，要使对某些 URL 的重定向失败，您可以通过子类[化 HTTPRedirectHandler](http://docs.python.org/library/urllib2.html#urllib2.HTTPRedirectHandler)来执行类似的操作：

```
class MyRedirectHandler(urllib2.HTTPRedirectHandler):
    def http_error_302(self, req, fp, code, msg, hdrs):
        if fp.geturl().startswith('http://www.facebook.com/'):
            # This will raise an exception similar to this:
            # urllib2.HTTPError: HTTP Error 302: FOUND
            return None
        else:
            # Let the default handling occur
            return super(MyRedirectHandler, self).http_error_302(req, fp, code, msg, hdrs) 
```

你会这样使用它：

```
opener = urllib2.build_handler(MyRedirectHandler)
try:
    fp = opener.open(url)
except urllib2.HTTPError:
    content = None
    print 'This URL is not allowed or something'
else:
    content = fp.read() 
```

当然，您必须将调用块放在 try/except 块中才能捕获该异常。我想可能有办法克服这个问题，让处理更好，但我不确定。

[无论如何，您可以在此处](http://docs.python.org/library/urllib2.html#urllib2.BaseHandler.http_error_nnn)查看文档以获取更多详细信息。

希望能帮助到你。

**编辑**：

实际上，您可能还想`redirect_request`覆盖其他重定向代码（不仅是 302）。据此，[这](http://docs.python.org/library/urllib2.html#urllib2.HTTPRedirectHandler.redirect_request)应该是要走的路。

# java - Android垃圾收集器-静态（类级别）var何时重置？

> ID：12482744
> 
> 赞同：3
> 
> 时间：2012-09-18T18:20:48.760
> 
> 标签：java, android

Android 如何处理静态类？特别是，如果我这样声明一个静态变量：

```
private static boolean someBoolean = true;
...
// Somewhere else in the code I do this:
    someBoolean = false; 
```

还可以说最后一行是唯一 time`someBoolean`的值从其初始化值发生变化。会`someBoolean`停留`false`多久？用户如何重置？强制关闭应用程序会起作用吗？你必须卸载应用程序吗？清除其数据？它的缓存？

如果这个静态变量在别人的 SDK 中怎么办？我想我理解变量在我编写的应用程序代码中时如何重新实例化，但如果这是从某个 jar 加载的代码 - 什么时候会`someBoolean`重新声明并随后初始化为`true`？与上面类似，用户如何强制这种行为？强制关闭？清除数据？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-18T18:30:41.270

静态变量在 ClassLoader 加载类时初始化。每个虚拟机实例至少有一个 ClassLoader。任何操作系统上的每个 java 进程都将有一个虚拟机。因此，要重置变量，您必须强制终止/停止进程。请记住，在 Android 中，与 Activity 关联的进程将继续保留在后台，因此即使在 Activity 暂停后也会保留其所有静态变量。

您可以使用 DDMS 验证此行为并强制终止与您的 Activity 关联的进程。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-18T18:22:32.600

卸载类时，静态变量`someBoolean`将有资格进行 GC。

`someBoolean`将在类启动时启动（加载后）。

`someBoolean`保持假，直到您在代码中设置另一个值。

# .net-4.0 - 在 Windows 8 上以 VS 2012 中的 .NET 4.0 为目标

> ID：12482746
> 
> 赞同：0
> 
> 时间：2012-09-18T18:21:04.160
> 
> 标签：.net-4.0, windows-8, visual-studio-2012

我刚刚在 Windows 8 Pro RTM 上安装了 VS 2012 Ultimate RTM，并尝试打开一个包含多个针对 .NET 4.0 的项目（类库和 WinForms）的解决方案。加载解决方案时，VS提示不支持.NET 4.0。它让我有机会将我的项目更新到 4.5（并承诺我以后可以更改目标）或从此[页面](http://msdn.microsoft.com/en-en/hh487283.aspx)安装 4.0 的“多目标包” 。我决定将我的项目更新到 4.5，因为我没有安装提供的多目标包（错误见下文）。不幸的是，VS 在默认情况下不会将 4.0 显示为目标（更改更新项目的目标时），而是将我重定向到[可以下载多目标包的页面](http://msdn.microsoft.com/en-en/hh487283.aspx). 到目前为止一切顺利，但我无法再次安装任何提供的下载（运行时和目标包）。如果是 .NET Framework 4.0.3 Targeting Pack，则错误消息显示：

> *安装程序检测到此计算机不符合安装此软件的要求。在安装 KB2600213 软件包之前，必须解决以下阻塞问题。*
> 
> **安装要求：** 未找到 Microsoft .NET Framework 4 多目标包。请修复 Microsoft Visual Studio 2010 的安装以获取此更新。

很奇怪，因为我没有安装 VS2010。

.NET Framework 4.0.3 运行时安装停止并出现以下错误：

> KB2600211 不适用，或被您计算机上的其他情况阻止。

我检查了 .NET 4.0 是否已安装（使用 .NET 安装验证工具），我尝试修复 VS2012，但没有任何东西让我以 .NET 4 为目标，并且事件日志不包含任何相关报告。有什么建议或提示（除了回到 Win7/VS2010）？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-18T21:41:25.493

老实说，我不确定发生了什么。我有 VS 2012 Ultimate RTM 并且支持所有版本的 .NET。

![新项目](../Images/12bbfd1759283bae123c79d9acd7fcd2.png)

我几乎可以肯定我从未手动安装过任何 .NET 框架，尽管我确实从[http://create.msdn.com](http://create.msdn.com)安装了 Visual Studio 2010 Express for Windows Phone 。

# c# - 为什么 C# 不能推断类成员的类型？

> ID：12482749
> 
> 赞同：0
> 
> 时间：2012-09-18T18:21:16.860
> 
> 标签：c#, .net, type-inference

> **可能重复：**
> [隐式输入；为什么只是局部变量？](https://stackoverflow.com/questions/824739/implicit-typing-why-just-local-variables)

c# 允许这样做：

```
public class MyClass
{
    public void Foo()
    {
        var q = new MyObject();
    }
} 
```

但它不允许这样做：

```
public class MyClass
{
    var q = new MyObject();

    public void Foo()
    {
        // ...
    }
} 
```

是否有一个原因？谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-18T18:24:58.560

您只能对局部变量使用类型推断。

[var 关键字](http://msdn.microsoft.com/en-us/library/bb383973.aspx)推断“在方法范围内声明的”变量的类型。在语言方面，`var`用于定义“隐式类型的局部变量声明”（C# Language Spec 8.5.1）。该语言仅`var`用于局部变量，而不用于类型级变量。

至于为什么，这取决于 C# 设计者的意图。它并非*旨在*推断所有用途的类型，仅适用于特定场景。Eric Lippert[描述了这样做的原因](http://blogs.msdn.com/b/ericlippert/archive/2009/01/26/why-no-var-on-fields.aspx)，提供了许多扩展使用会导致的潜在陷阱，包括可能公开暴露匿名类型、链接多个初始化器等等。

# python - typeerror argument 'image' must be iplimage

> ID：12482761
> 
> 赞同：0
> 
> 时间：2012-09-18T18:21:53.490
> 
> 标签：python, image-processing, opencv

I am new at opencv. While compiling python code, I am getting the following error.

```
TypeError: argument 'image' must be iplimage 
```

Please explain what `iplimage` is and why I am getting this.

Here is my code:

```
import cv
capture=cv.CaptureFromCAM(0)
image=cv.QueryFrame(capture)
writer=cv.CreateVideoWriter("output.avi", 0, 15,(800,600) , 1)
count=0
cv.NamedWindow('Image_Window')
while count<250:
    image=cv.QueryFrame(capture)
    cv.WriteFrame(writer, image)
    cv.ShowImage('Image_Window',image)
    cv.WaitKey(2)
    count+=1 
```

Thanks.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-18T23:02:24.900

IplImage 是 OpenCV 中的基本图像类。`cv.QueryFrame`应该返回一个 IplImage。但似乎，你的情况并非如此。

您应该尝试检查`NULL`. `QueryFrame`发生错误时返回`NULL`而不是图像。

另外，看看[这个](https://stackoverflow.com/questions/12482761/typeerror-argument-image-must-be-iplimage/12486296#12486296)问题。你可能会在这里找到你的答案。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-19T18:38:03.827

您没有向视频作者提供有效的编解码器。我尝试了您的代码并出现错误，然后我更改了正在使用的编解码器并且它工作正常。

你应该改变这一行：

```
writer=cv.CreateVideoWriter("output.avi", 0, 15,(800,600) , 1) 
```

对此：

```
writer=cv.CreateVideoWriter("output.avi", cv.CV_FOURCC('i','Y', 'U', 'V'), 15,(800,600) , 1) 
```

然而， [Andrey Kamaev](https://stackoverflow.com/users/724461/andrey-kamaev)说您不应该使用该`cv`界面是正确的，新`cv2`界面更容易且更可靠。 [在这个问题](https://stackoverflow.com/questions/12290023/opencv-2-4-in-python-video-processing/12333066#12333066)中，我介绍了如何使用接口将图像帧写入文件`cv2`。

如果上述编解码器不适合您，恐怕您可能会遇到一些麻烦。您可以参考[此问题](https://stackoverflow.com/questions/1136989/creating-avi-files-in-opencv/1137034#1137034)以了解有关查找有效编解码器的更多信息。

# django - 静态文件从 STATICFILES_DIRS 部署，但不是 STATIC_ROOT

> ID：12482762
> 
> 赞同：-2
> 
> 时间：2012-09-18T18:22:02.943
> 
> 标签：django, django-staticfiles

我在开发环境中部署文件时遇到问题。
请参阅下面的配置。
`python manage.py collectstatic`按预期收集所有文件`'/Users/vikingosegundo/Projects/website/media/'`并将它们存储在`/Users/vikingosegundo/Projects/website/mydjangoproject/static/`.
但是，虽然使用时 css 文件的链接是正确的`<link href="{% static "css/style.css"%}" rel="stylesheet" type="text/css">`（呈现为），但将部署`<link href="/staticmedia/css/style.css" rel="stylesheet" type="text/css">`原始文件，而不是来自. 即使我删除.`/Users/vikingosegundo/Projects/website/media/``STATIC_ROOT` `/Users/vikingosegundo/Projects/website/mydjangoproject/static/`
`/Users/vikingosegundo/Projects/website/media/`

我的错误配置在哪里？

设置.py

```
MEDIA_ROOT = '/Users/vikingosegundo/Projects/website/mydjangoproject/media/'
MEDIA_URL = '/sitemedia/'
STATIC_ROOT = '/Users/vikingosegundo/Projects/website/mydjangoproject/static/'
STATIC_URL = '/staticmedia/'
STATICFILES_DIRS = [
       '/Users/vikingosegundo/Projects/website/media/',
]

STATICFILES_FINDERS = (
    'django.contrib.staticfiles.finders.FileSystemFinder',
    'django.contrib.staticfiles.finders.AppDirectoriesFinder',
)

TEMPLATE_CONTEXT_PROCESSORS = (
    'django.contrib.auth.context_processors.auth',
    'django.core.context_processors.debug',
    'django.core.context_processors.i18n',
     'django.core.context_processors.media',
    'django.core.context_processors.static',
)

INSTALLED_APPS = (
    'django.contrib.auth',
    'django.contrib.contenttypes',
    'django.contrib.sessions',
    'django.contrib.sites',
    'django.contrib.messages',
    'django.contrib.staticfiles',
    #....

) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-18T21:40:43.137

我认为，这是因为使用 django 内置视图和帮助程序提供静态文件仅用于开发和调试目的。当`DEBUG`您的项目设置中为 True 时，您的静态文件将从其原始位置提供。这有助于避免每次更改 CSS 文件时都被迫运行 collectstatics 管理命令。

当您关闭 DEBUG 设置时，`django.conf.urls.static.static`其表兄弟助手将停止工作，因为它们仅用于开发目的。尽管如此，模板标签仍然可以工作，因为它们必须在生产或开发中指向正确的静态文件 url。

运行`collectstatic`管理命令是将静态文件复制到其最终目的地 (STATIC_URL) 的便捷助手，在生产环境中为它们提供服务是您自己的责任。这最好通过（静态）Web 服务器位置来完成（避免通过 django/python 进程泵送它们），因此 Django 的文档明确建议不要将 Django 用于静态文件服务。

有关在开发中提供静态文件的更多信息，请参阅[管理静态文件：在开发](https://docs.djangoproject.com/en/dev/howto/static-files/#serving-static-files-in-development)中提供静态文件。

# sql - SQL-Oracle 分组结果行

> ID：12482763
> 
> 赞同：0
> 
> 时间：2012-09-18T18:22:11.550
> 
> 标签：sql, oracle

下面的查询：

```
Select
trunc(create_dtime) as Day,count(create_dtime) as DLs
From Player_Tapjoy
Where
Trunc(Create_Dtime) >= To_Date('2012-sep-01','yyyy-mon-dd')
And Trunc(Create_Dtime) < To_Date('2012-sep-03','yyyy-mon-dd')
Group by trunc(create_dtime)
Union All
Select trunc(create_dtime) as Day,
Count(Create_Dtime) As DLs
From Player_aux_pt
Where
Site = 'AppCircle' And
Trunc(Create_Dtime) >= To_Date('2012-sep-01','yyyy-mon-dd')
And Trunc(Create_Dtime) < To_Date('2012-sep-03','yyyy-mon-dd')
Group By Trunc(Create_Dtime) 
```

给我以下结果：

```
 Day           DLs
02-Sep-12        6920
01-Sep-12        6630
02-Sep-12        3009
01-Sep-12        3637 
```

我怎样才能将这些组合起来，以便每天只有一行，并且顺序正确？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-18T21:39:21.150

```
WITH
PTJ AS
(
    SELECT
      TRUNC(CREATE_DTIME) AS DAY,
      COUNT(CREATE_DTIME) AS DLS
    FROM PLAYER_TAPJOY
    WHERE TRUNC(CREATE_DTIME) >= TO_DATE('2012-sep-01', 'yyyy-mon-dd')
    AND   TRUNC(CREATE_DTIME) < TO_DATE('2012-sep-03', 'yyyy-mon-dd')
    GROUP BY TRUNC(CREATE_DTIME)
),
PAP AS
(
    SELECT
      TRUNC(CREATE_DTIME) AS DAY,
      COUNT(CREATE_DTIME) AS DLS
    FROM PLAYER_AUX_PT
    WHERE SITE = 'AppCircle'
    AND   TRUNC(CREATE_DTIME) >= TO_DATE('2012-sep-01', 'yyyy-mon-dd')
    AND   TRUNC(CREATE_DTIME) < TO_DATE('2012-sep-03', 'yyyy-mon-dd')
    GROUP BY TRUNC(CREATE_DTIME)
)
SELECT
  COALESCE(PTJ.DAY, PAP.DAY) AS DAY,
  PTJ.DLS AS PTJ_DLS,
  PAP.DLS AS PAP_DLS,
  COALESCE(PTJ.DLS, 0) + COALESCE(PAP.DLS, 0) TOTAL_DLS
FROM PTJ
FULL OUTER JOIN PAP
ON PTJ.DAY = PAP.DAY
ORDER BY COALESCE(PTJ.DAY, PAP.DAY) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-18T18:22:11.550

```
select day,sum(DLs) as Tot_DLs
From
(
Select
 trunc(create_dtime) as Day,count(create_dtime) as DLs
  From Player_Tapjoy
 Where
 Trunc(Create_Dtime) >= To_Date('2012-sep-01','yyyy-mon-dd')
   And Trunc(Create_Dtime) < To_Date('2012-sep-03','yyyy-mon-dd')
   Group by trunc(create_dtime)
  Union All
 Select trunc(create_dtime) as Day,
  Count(Create_Dtime) As DLs
  From Player_aux_pt
    Where
  Site = 'AppCircle' And
   Trunc(Create_Dtime) >= To_Date('2012-sep-01','yyyy-mon-dd')
    And Trunc(Create_Dtime) < To_Date('2012-sep-03','yyyy-mon-dd')
   Group By Trunc(Create_Dtime)
    )
   Group By Day
   Order By Day Asc 
```

;

# .net - .NET 4.5 DateTime format/convert bug with Upper Sorbian culture

> ID：12482772
> 
> 赞同：7
> 
> 时间：2012-09-18T18:22:38.013
> 
> 标签：.net, datetime, hsb

Using the Upper Sorbian culture (hsb) a DateTime object converted to a string uses the format "d. M. yyyy H.mm.ss 'hodź.'". ToString("G") for example returns "31\. 12\. 2011 5.06.07 hodź." for the 31\. of December 2011, 05:06:07 AM.

Problem is though that trying to convert such a string back to a DateTime does not result true. Even simpler strings like "1\. 1\. 2011" or "1.1.2011" lead to no success. And just in case someone suggests to pass the culture when converting/persing: I did that of course.

Trying to parse "1.2.3" results in the current date with the time 01:02:03.

I consider that a bug. Or does someone know what could be wrong?

I am using .NET 4.5 RTM on a Windows 8 RTM machine.

Sample:

```
DateTime date = DateTime.Now;

CultureInfo culture = new CultureInfo("hsb");
string dateString = date.ToString("G", culture);
DateTime convertedDate; 

bool dateOkay = DateTime.TryParse(dateString, culture,
   DateTimeStyles.AllowInnerWhite, out convertedDate);
Console.WriteLine(dateOkay); 
// This results false although the date string was read by 
// ToString("G") (i.e. '20\. 9\. 2012 12.28.10 hodź.') and should be okay

dateString = "1\. 1\. 2000";
dateOkay = DateTime.TryParse(dateString, culture,
   DateTimeStyles.AllowInnerWhite, out convertedDate);
Console.WriteLine(dateOkay); 
// This results in false although the date string should be okay

dateString = "1.1.2000";
dateOkay = DateTime.TryParse(dateString, culture,
   DateTimeStyles.AllowInnerWhite, out convertedDate);
Console.WriteLine(dateOkay); 
// This results also in false

dateString = "1.2.3";
dateOkay = DateTime.TryParse(dateString, culture,
   DateTimeStyles.AllowInnerWhite, out convertedDate);
Console.WriteLine(dateOkay + ": " + convertedDate); 
// This results strangely in true. The converted date is the current date 
// with time 01:02:03. 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-02T13:39:58.660

在 .Net 4.5 中，“hsb”被标记为中性文化，因此所有 DateTime 解析都将由标准格式提供程序完成。请改用带有格式字符串的 DateTime.ParseExact。 [http://www.codeproject.com/Articles/3612/Use-of-different-Date-Time-formats-and-Culture-typ](http://www.codeproject.com/Articles/3612/Use-of-different-Date-Time-formats-and-Culture-typ)

================================

我发现当 CultureInfo 中的标志“IsNeutralCulture”等于“true”时，日期字符串以不变格式解析（en-US）。当我通过格式 MM/dd/yyyy DateTime.TryParse 为文化“hsb”正确解析日期时。

我提供的文章中的一些引用：“只能为不变文化或特定文化创建 DateTimeFormatInfo，不能为中性文化创建。DateTimeFormatInfo 继承自 Object 并实现 ICloneable 和 IFormarProvider 接口。”

我发现 DateTimeFormatInfo 是为“hsb”文化指定的，但正如我之前所说，IsNeutralCulture = true。当“IsNeutralCulture”等于“true”时，我希望.Net framework 4.5 DateTimeFormatInfo 不用于解析日期

# ruby-on-rails - 美国东部时间怎么可能是-4:00？

> ID：12482773
> 
> 赞同：0
> 
> 时间：2012-09-18T18:22:38.803
> 
> 标签：ruby-on-rails, timezone, jquery-countdown

```
 Loading development environment (Rails 3.0.17)
1.9.3p194 :001 > Time.zone
 => (GMT-05:00) Eastern Time (US & Canada) 
1.9.3p194 :002 > Time.now.in_time_zone
 => Tue, 18 Sep 2012 14:16:00 EDT -04:00 
1.9.3p194 :003 > wtf.... 
```

除非我所有的应用程序都这样做（现在只有一个要测试），否则 EDT 怎么可能是 UTC 的 -04:00 而不是正常的 -05:00

无论是什么原因导致这个 -04:00 导致我的基于截止日期的应用程序的所有倒数计时器都不会出现在 EST 用户以外的任何人身上。就像您在我的应用程序中选择 CST，保存，然后再次查看同一页面一样，您的倒计时时间会减少一小时......所以如果演出在一小时后开始并且您做到了，那么您会'不能加入。

不好。

想法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-18T18:24:38.253

EDT（[东部夏令时间](http://en.wikipedia.org/wiki/Eastern_Daylight_Time)）是格林威治标准时间 -4:00

如果查看结果，您会看到 EDT 而不是 EST（即 GMT -5:00）。

# ios - 我的 NSURL 语句有什么问题？

> ID：12482777
> 
> 赞同：1
> 
> 时间：2012-09-18T18:23:03.763
> 
> 标签：ios, http, nsurl

请看一下这个并告诉我为什么我的 NSURL *urlStringURL 总是一个“无效的 CRStringRef” 盲目地试图看看有什么问题。谢谢！

编辑：下面的代码不起作用，因为它是 GET。无法对收据进行编码以使 GET 工作。好代码跟随坏代码。

```
- (void) sendReceipt {

NSObject *rData = [[NSUserDefaults standardUserDefaults] objectForKey:@"purchaseReceipt"];

NSNumber *custData = [[NSUserDefaults standardUserDefaults] objectForKey:@"phoneNumber"];

NSString *urlString = [[NSString alloc] initWithString:@"https://www.privusmobile.info/Apple-???/?TYPE=GET"];    

NSLog(@"Transaction to send %@,%@" , rData,custData);

urlString = [urlString stringByAppendingFormat:@"&Cust=IP%@", custData];        
urlString = [urlString stringByAppendingFormat:@"&Receipt=%@", rData];

NSURL *urlStringURL =[NSURL URLWithString:[NSString stringWithFormat:@"%@",urlString]];

NSMutableURLRequest *urlRequest =[NSMutableURLRequest requestWithURL:urlStringURL];
NSString *params = [[NSString alloc]initWithString:urlString];
urlData = [[NSMutableData alloc]init];
[urlRequest setHTTPMethod:@"GET"];
[urlRequest setHTTPBody:[params dataUsingEncoding:NSUTF8StringEncoding allowLossyConversion:YES]];

NSURLConnection *connection = [NSURLConnection connectionWithRequest:urlRequest delegate:self];
connection = [[NSURLConnection alloc] initWithRequest:urlRequest delegate:self];

NSLog(@"started!");

} 
```

错误代码结束

好的代码如下：

```
 - (void) sendReceipt {

NSObject *rData = [[NSUserDefaults standardUserDefaults] objectForKey:@"purchaseReceipt"];

NSNumber *custData = [[NSUserDefaults standardUserDefaults] objectForKey:@"phoneNumber"];

NSMutableURLRequest *request = [[NSMutableURLRequest alloc]initWithURL:[NSURL URLWithString:@"https://www.privusmobile.info/Apple??????/default.aspx?"]];

[request setHTTPMethod:@"POST"];
[request setValue:@"text/xml" forHTTPHeaderField:@"Content-type"];

NSString *xmlString = [NSString stringWithFormat:@"<data><item>IP%@ </item><item>%@</item></data>",custData,rData];

NSLog(@"XMLSTRING %@",xmlString);

[request setValue:[NSString stringWithFormat:@"%d",[xmlString length]] forHTTPHeaderField:@"Content-length"];

[request setHTTPBody:[xmlString dataUsingEncoding:NSUTF8StringEncoding]];

NSURLConnection *connection = [[NSURLConnection alloc]initWithRequest:request delegate:self];

NSLog(@"started! %@",connection);        

}

 - (void)connection:(NSURLConnection *)connection didReceiveData:(NSData *)data{

NSString * strResponse = [[NSString alloc] initWithData:data encoding:NSUTF8StringEncoding];
NSLog(@"SERVER DATA %@", strResponse);

} 
```

线索是编码提示。谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-18T18:57:49.557

尝试对 url 字符串进行编码。很可能有空格，`rData`但我只是猜测。试试这个：

```
NSObject *rData = [[NSUserDefaults standardUserDefaults] objectForKey:@"purchaseReceipt"];

NSNumber *custData = [[NSUserDefaults standardUserDefaults] objectForKey:@"phoneNumber"];

NSString *urlString = [[NSString alloc] initWithString:@"https://www.privusmobile.info/Apple-App/?TYPE=GET"];

urlString = [urlString stringByAppendingFormat:@"&Cust=IP%@", custData];        
urlString = [urlString stringByAppendingFormat:@"&Receipt=%@", rData];

NSString* escapedUrlString =[urlString stringByAddingPercentEscapesUsingEncoding: NSUTF8StringEncoding];

NSURL *urlStringURL =[NSURL URLWithString:escapedUrlString]; 
```

# ios - IOS facebook 应用幻灯片选项菜单

> ID：12482782
> 
> 赞同：3
> 
> 时间：2012-09-18T18:23:28.730
> 
> 标签：ios, xcode, ios5

> **可能重复：**
> [像 iPhone 上的 Facebook 应用一样的 SplitView](https://stackoverflow.com/questions/7775195/splitview-like-facebook-app-on-iphone)

我需要一个控件，在单击时将屏幕分成 2 个不同的视图。有点像这样 [1]： http: [//i51.tinypic.com/2112zwh.png](http://i51.tinypic.com/2112zwh.png) 我曾经使用过 inferis/view deck 但它搞砸了我的导航控制器。基本上它不能执行任何 segue 我正在使用带有导航控制器和选项卡控制器的 StoryBoard。

任何人都知道如何拥有这种菜单，但可以与故事板和导航控制器、选项卡控制器一起使用？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-01-13T22:47:02.543

我在 youtube 上制作了一个视频（3 部分），介绍如何制作您正在寻找的滑动菜单。我将向您展示如何设置项目并将所有内容联系起来。

[http://www.youtube.com/watch?v=tJJMyzdB9uI](http://www.youtube.com/watch?v=tJJMyzdB9uI)

如果您想使用该教程，您将不得不创建 UINavigationControllers 而不是普通的 UIView 控制器，但它基本上只是选择一个或另一个。

ECSlidingViewController（它是我使用的那个）很酷的一点是，您想要配置的所有内容（视图滑动多远、动画、左侧或右侧）都可以通过一行代码（有时是 2 或 3 行)

试试看它是否适合你？

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-09-18T18:29:17.633

我使用[JTRevealSidebar](https://github.com/mystcolor/JTRevealSidebarDemo)项目来构建我的。我在我的项目中使用了故事板和 segues，让一切顺利进行。看一下演示，它应该很容易实现。如果您在实施时遇到任何具体问题，请随时发布有关您的问题的问题。

# java - 与 JSplitPane 斗争

> ID：12482786
> 
> 赞同：1
> 
> 时间：2012-09-18T18:23:57.510
> 
> 标签：java, swing, layout, paintcomponent, jsplitpane

好吧，我有一些关于使用拆分窗格将框架拆分为两个区域的技巧，但我无法让它显示一些有用的东西。代码如下所示：

```
public class Whiteboard extends JPanel {

int width = 600;
int sidePanelWidth = 200;
int lineHeight = 120;
int numberOfLines = 5;
JFrame frame = null;
Glyph glyph = null;
//java.awt.Rectangle bounds = new java.awt.Rectangle();
Bounds bounds = null;
JSplitPane splitPane = null;
JPanel tools = null;

public Whiteboard() {
    frame = new JFrame();
    frame.setSize(width + sidePanelWidth, getFullHeight());
    FlowLayout simpleLayout = new FlowLayout();
    frame.setLayout(simpleLayout);

    tools = new JPanel();
    tools.setSize(new Dimension(sidePanelWidth, getFullHeight()));
    this.setSize(width, getFullHeight());

    splitPane = new JSplitPane(JSplitPane.HORIZONTAL_SPLIT, this, tools);
    splitPane.setPreferredSize(new Dimension(width + sidePanelWidth, getFullHeight()));
    splitPane.setOneTouchExpandable(false);
    splitPane.setDividerLocation(150);

    frame.add(splitPane);
    this.setBackground(Color.white);
    java.awt.Rectangle rectBounds = this.getBounds();
    bounds = new Bounds((int)rectBounds.getX(), (int)rectBounds.getY(), (int)(rectBounds.getX() + rectBounds.getWidth()), (int)(rectBounds.getY() + rectBounds.getHeight()));

}

public int getFullHeight() {
    return lineHeight * numberOfLines;
} 
```

我现在改变了这样的代码：

```
 public static void main(String[] args) {
    int sidePanelWidth = 200;

    JFrame frame = new JFrame();        
    Whiteboard whiteboard = new Whiteboard();         

    JPanel sidePanel = new JPanel();
    sidePanel.setPreferredSize(new Dimension(sidePanelWidth, whiteboard.getFullHeight()));

    JSplitPane splitPane = new JSplitPane(JSplitPane.HORIZONTAL_SPLIT);
    splitPane.add(whiteboard, JSplitPane.LEFT);
    splitPane.add(sidePanel, JSplitPane.RIGHT);

    frame.setLayout(new FlowLayout());
    frame.getContentPane().add(splitPane);

    frame.pack();
    frame.setVisible(true);        
    whiteboard.repaint();
} 
```

以及这个的构造函数：

```
public Whiteboard() {
    this.setPreferredSize(new Dimension(width, getFullHeight()));
    this.setBackground(Color.red); 
```

}

现在不知道问题出在哪里，可能是因为它没有调用paintComponent方法。我尝试通过调用 repaint() 来强制它没有帮助，它只是不调用这个组件

编辑：现在看来它毕竟调用了paintComponent方法，但我仍然得到这样的屏幕： ![在此处输入图像描述](../Images/a62a032b2d513f9dab32740d8d7666fa.png)

如您所见，它看起来不太好。那么我当前的主要方法的代码：

```
public static void main(String[] args) {
    int sidePanelWidth = 200;

    JFrame frame = new JFrame();        
    Whiteboard whiteboard = new Whiteboard();         

    JPanel sidePanel = new JPanel();
    sidePanel.setPreferredSize(new Dimension(sidePanelWidth, whiteboard.getFullHeight()));

    JSplitPane splitPane = new JSplitPane(JSplitPane.HORIZONTAL_SPLIT);
    splitPane.add(whiteboard, JSplitPane.LEFT);
    splitPane.add(sidePanel, JSplitPane.RIGHT);

    frame.setLayout(new FlowLayout());
    frame.getContentPane().add(splitPane);

    frame.pack();
    frame.setVisible(true);        
    whiteboard.repaint();
} 
```

知道如何更改它以解决问题吗？我需要发布其他方法吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-18T18:31:37.277

实际上不应该`JFrame`从 a 的构造函数中创建 a 。`JPanel`

这是我创建的一个示例：

![截屏](../Images/cbd1987a3563b4b3541981332c311718.png)

```
import java.awt.Container;
import java.awt.Dimension;
import javax.swing.*;

public class JavaApplication100 {

    public static void main(String[] args) {
        SwingUtilities.invokeLater(new Runnable() {

            @Override
            public void run() {
                new JavaApplication100().createAndShowUI();
            }
        });
    }

    private void createAndShowUI() {

        JFrame frame = new JFrame("Test");
        frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);

        initComponents(frame.getContentPane());

        frame.pack();
        frame.setVisible(true);
    }

    private void initComponents(Container contentPane) {
        JPanel mainPanel = new JPanel();

        //create our 2 seperate panels (could be custom ones)
        JPanel leftPanel = new JPanel();
        JPanel rightPanel = new JPanel();

        //add labels for viewing
        leftPanel.add(new JLabel("LEFT"));
        rightPanel.add(new JLabel("RIGHT"));

        //just so you can see em or they would be small
        leftPanel.setPreferredSize(new Dimension(300, 300));
        rightPanel.setPreferredSize(new Dimension(300, 300));

        JSplitPane jsp = new JSplitPane(JSplitPane.HORIZONTAL_SPLIT);

        //add panels to split pane
        jsp.add(rightPanel, JSplitPane.RIGHT);
        jsp.add(leftPanel, JSplitPane.LEFT);

        mainPanel.add(jsp);//add splitpane to mainpanel
        contentPane.add(mainPanel);

    }
} 
```

编辑/更新：

根据您的评论，如果您想`paintComponent(Graphics g)`在您`WhiteBoard`的扩展中为背景覆盖着色，`JPanel`如下所示：

```
public class WhiteBoard extends JPanel {
@Override
public void paintComponent(Graphics g) {
super.paintComponent(g);

Graphics2D g2 = (Graphics2D) g;
g2.setColor(Color.red);
g2.fillRect(0, 0, getWidth(), getHeight());
}
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-18T21:09:03.357

您可以改用[JSplitPane.setDividerLocation(int)](http://docs.oracle.com/javase/7/docs/api/javax/swing/JSplitPane.html#setDividerLocation%28int%29) ...

```
public class TestSplitPane extends JFrame {

    public TestSplitPane() throws HeadlessException {
        setSize(600, 600);
        setDefaultCloseOperation(EXIT_ON_CLOSE);
        setLocationRelativeTo(null);

        setLayout(new BorderLayout());

        JSplitPane splitPane = new JSplitPane(JSplitPane.HORIZONTAL_SPLIT);

        splitPane.setLeftComponent(new JLabel("I'm on the left"));
        splitPane.setRightComponent(new JLabel("I'm on the right"));

        add(splitPane);

        splitPane.setDividerLocation(200);
    }

    /**
     * @param args the command line arguments
     */
    public static void main(String[] args) {
        EventQueue.invokeLater(new Runnable() {

            @Override
            public void run() {
                try {
//                    UIManager.setLookAndFeel(UIManager.getSystemLookAndFeelClassName());
                    for (javax.swing.UIManager.LookAndFeelInfo info : javax.swing.UIManager.getInstalledLookAndFeels()) {
                        if ("Nimbus".equals(info.getName())) {
                            javax.swing.UIManager.setLookAndFeel(info.getClassName());
                            break;
                        }
                    }
                } catch (ClassNotFoundException ex) {
                } catch (InstantiationException ex) {
                } catch (IllegalAccessException ex) {
                } catch (UnsupportedLookAndFeelException ex) {
                }

                new TestSplitPane().setVisible(true);
            }
        });
    }
} 
```

![在此处输入图像描述](../Images/1db8ddcfe480463b09a6610eaa5a60aa.png)

# statistics - 测试统计信息（按类型划分的测试数量、按类型运行所花费的时间）

> ID：12482788
> 
> 赞同：1
> 
> 时间：2012-09-18T18:24:18.293
> 
> 标签：statistics, continuous-integration, nunit, teamcity, specflow

在当前项目中，我们使用 TeamCity 作为 CI 平台，我们有很多项目，并且正在构建和运行。

我们流程的下一步是跟踪我们测试的一些统计数据。因此，我们正在寻找一种工具来帮助我们获取这些数字并使它们在每次构建时都可见。

首先，我们要跟踪以下数字：

*   单元测试的数量
*   标记为 @ui 的 specflow 测试数
*   标记为 @controller 的 specflow 测试数量
*   并且还花费了运行上述每个测试类别的时间。

关于当前场景的一些细节：

*   .net 项目
*   nUnit 用于单元测试
*   用于功能测试的 SpecFlow，归类为 @controller 和 @ui
*   rake 构建脚本
*   TeamCity 作为 CI 服务器。

我正在寻找工具和/或实践建议来帮助我们跟踪这些数字。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-21T14:54:02.757

这里的问题是您对标签的要求。SpecFlow/NUnit/TeamCity/DotCover 集成已经开发到足以完成您需要的一切，除了标记。

我想知道您希望在 UI 和控制器测试之间有多少混合。假设您正确分离了您的域（请参阅[Dan North - 无论如何它是谁的域](http://dannorth.net/2011/01/31/whose-domain-is-it-anyway/)），那么您永远不应该在同一功能中使用这两个标签标记场景。因此，我假设它只是将 UI 功能与功能（控制器）功能分开的情况。

我最近开始以这种方式分离我的功能，通过在我的测试程序集中添加命名空间文件夹，镜像你将如何分离模型、视图模型和视图（等），TeamCity 绝对足够聪明，可以报告覆盖率和每个阶段向下钻取程序集和命名空间。

# python - OracleDB 导出到 MySQL。命名为无的 DBCatalog

> ID：12482792
> 
> 赞同：0
> 
> 时间：2012-09-18T18:24:24.970
> 
> 标签：python, mysql, oracle, migration

我正在尝试将 OracleDB 导出到 MySQL 并开始尝试使用工作台。我遇到以下错误：

SystemError: DataError("('22003', '[22003] [Oracle][ODBC]数值超出范围。(0) (SQLGetData)')"): 调用 Python 模块函数 DbGenericRE.reverseEngineer*** 时出错 错误：逆向工程师选择的架构：DataError("('22003', '[22003] [Oracle][ODBC]数值超出范围。(0) (SQLGetData)')"): 调用 Python 模块函数 DbGenericRE.reverseEngineerFailed 时出错

我怀疑这可能会发生，因为 DBCatalog 被命名为 none，它在 python 中为空。

我正在寻找解决问题的解决方法或更好的工具。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-06-18T09:19:33.153

MYSQL Bench 不支持从 Oracle 迁移到 MySQL

请浏览此页面上的最后一条评论

[http://bugs.mysql.com/bug.php?id=66609](http://bugs.mysql.com/bug.php?id=66609)

# windows-8 - 在 Windows 8 Metro 中浏览文件夹时缺少 Google Drive 文件夹

> ID：12482793
> 
> 赞同：0
> 
> 时间：2012-09-18T18:24:33.407
> 
> 标签：windows-8, microsoft-metro, google-drive-api

使用 Windows 8 Metro 应用程序浏览文件夹时（例如将文件附加到电子邮件或保存 PDF），奇怪的是 Google Drive 文件夹丢失并且无法找到。

但是，Google Drive 文件夹在“桌面模式”下工作正常。我已经在 2 台不同的机器和帐户上尝试过。

有谁知道这可能是什么原因造成的？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-26T11:20:58.683

您的问题是可能导致您无法访问 Google 云端硬盘的原因。我假设您想知道如何从 Metro 界面访问您的 Google Drive。

您可以通过在资源管理器中右键单击它并添加 Google Drive 的位置来将 Google Drive 添加到您的文档库中。如果您随后导航到 Mail 的 Metro 界面并向下导航到文档，您应该能够找到包含**在**Google Drive 中的文档和文件夹。

# c# - 获取 3D 三角形的旋转

> ID：12482796
> 
> 赞同：0
> 
> 时间：2012-09-18T18:24:44.027
> 
> 标签：c#, math, 3d

我在 3D 空间中有三个 Vector3 点。我需要将此三角形的旋转（切线？）复制到 3D 模型的方向。如何计算三角形 Vector3 切线或从这些点创建旋转矩阵？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-18T18:42:43.370

此处描述了求三角形的角度：[在给定顶点坐标的情况下，找到 3D 中三角形面的法线角度](https://stackoverflow.com/questions/1516296/find-the-normal-angle-of-the-face-of-a-triangle-in-3d-given-the-co-ordinated-of)

假设您找到法线并将其称为 N'。编写“未旋转”三角形的法线 N 对您来说应该是微不足道的，例如 <1, 0, 0>。弄清楚如何从 N 旋转到 N' 也应该很简单，您可以使用 XNA 中的[Matrix.CreateFromAxisAngle 为其](http://msdn.microsoft.com/en-us/library/microsoft.xna.framework.matrix.createfromaxisangle.aspx)创建一个旋转矩阵。这个矩阵应该像你想要的那样旋转一切。

# android - 固定中心对齐

> ID：12482803
> 
> 赞同：0
> 
> 时间：2012-09-18T18:24:58.413
> 
> 标签：android

我需要实现固定的中心对齐，如图所示：

[http://postimage.org/image/t735us1z3/](http://postimage.org/image/t735us1z3/)

因此，标志图像始终位于中心，而两个 TextView 向左和向右增长。因此，无论文本有多长，图像仍将位于中心。再加上中间的“vs”TextView。

```
 <RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="fill_parent"
android:layout_height="fill_parent"
android:gravity="center_horizontal"
 >

<TextView android:id="@+id/list_item_entry_title"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:singleLine="true"
        android:textAppearance="?android:attr/textAppearanceSmall"
        android:ellipsize="marquee"
        android:fadingEdge="horizontal"
        android:layout_marginTop="5dp"
        android:layout_marginBottom="5dp"
         />

     <ImageView 
        android:id="@+id/flag1"
        android:layout_width="20dp"
        android:layout_height="20dp"   
        android:layout_marginLeft="5dp" 
        android:layout_marginRight="5dp" 
        android:src="@drawable/bayern25"
        android:layout_marginTop="5dp" 
      android:layout_toRightOf="@+id/list_item_entry_title"
        />

       <TextView android:text="-"
             android:id="@+id/text"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:singleLine="true"
        android:textAppearance="?android:attr/textAppearanceSmall"
        android:ellipsize="marquee"
        android:fadingEdge="horizontal"
        android:layout_marginTop="5dp"
        android:layout_marginBottom="5dp"
         android:layout_toRightOf="@+id/flag1"
         />

       <ImageView 
        android:id="@+id/flag2"
        android:layout_width="20dp"
        android:layout_height="20dp"  
        android:layout_marginLeft="5dp"  
          android:layout_marginTop="5dp" 
        android:src="@drawable/wolfsburg25"
        android:layout_toRightOf="@+id/text"
        />

     <TextView android:id="@+id/list_item_entry_summary"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_below="@id/list_item_entry_title"
        android:layout_alignLeft="@id/list_item_entry_title"
        android:textAppearance="?android:attr/textAppearanceSmall"
        android:singleLine="true"
        android:layout_marginLeft="5dp"
        android:layout_marginTop="5dp"
        android:layout_marginBottom="5dp"
        android:layout_toRightOf="@+id/flag2"
         /> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-18T19:19:43.447

由于您使用的是 RelativeLayout，因此您只需使用 layout_centerInParent 属性 (android:layout_centerInParent="true") 将“vs”TextView 定位在中心，然后相对于该组件定位其他组件。你的代码看起来像

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent" >

    <TextView
        android:id="@+id/list_item_entry_title"
        android:layout_toLeftOf="@+id/flag1"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_marginBottom="5dp"
        android:layout_marginTop="5dp"
        android:ellipsize="marquee"
        android:fadingEdge="horizontal"
        android:singleLine="true"
        android:textAppearance="?android:attr/textAppearanceSmall" />

    <ImageView
        android:id="@id/flag1"
        android:layout_toLeftOf="@+id/text"
        android:layout_width="20dp"
        android:layout_height="20dp"
        android:layout_marginLeft="5dp"
        android:layout_marginRight="5dp"
        android:layout_marginTop="5dp"
        android:src="@drawable/bayern25" />

    <TextView
        android:id="@id/text"
        android:layout_centerInParent="true"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_marginBottom="5dp"
        android:layout_marginTop="5dp"
        android:layout_toRightOf="@+id/flag1"
        android:ellipsize="marquee"
        android:fadingEdge="horizontal"
        android:singleLine="true"
        android:text="-"
        android:textAppearance="?android:attr/textAppearanceSmall" />

    <ImageView
        android:id="@+id/flag2"
        android:layout_width="20dp"
        android:layout_height="20dp"
        android:layout_marginLeft="5dp"
        android:layout_marginTop="5dp"
        android:layout_toRightOf="@id/text"
        android:src="@drawable/wolfsburg25" />

    <TextView
        android:id="@+id/list_item_entry_summary"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignLeft="@id/list_item_entry_title"
        android:layout_below="@id/list_item_entry_title"
        android:layout_marginBottom="5dp"
        android:layout_marginLeft="5dp"
        android:layout_marginTop="5dp"
        android:layout_toRightOf="@id/flag2"
        android:singleLine="true"
        android:textAppearance="?android:attr/textAppearanceSmall" /> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-18T18:59:35.990

您可以使用 LinearLayout 重量和重力来实现这一点，如下所示：

```
<LinearLayout
    android:width="match_parent"
    android:height="wrap_content"
    android:orientation="horizontal">
    <TextView
        android:width="0dp"
        android:weight="1"
        android:height="wrap_content"
        android:gravity="right"
        android:text="Team 1" />
    <TextView
        android:width="wrap_content"
        android:height="wrap_content"
        android:text="VS" />
    <TextView
        android:width="0dp"
        android:weight="1"
        android:height="wrap_content"
        android:gravity="left"
        android:text="Team 2" />
</LinearLayout> 
```

# c++ - C++ 中具有按位数据的结构

> ID：12482806
> 
> 赞同：8
> 
> 时间：2012-09-18T18:25:07.273
> 
> 标签：c++, struct, bit-manipulation

> **可能重复：**
> [将位字段转换为 int](https://stackoverflow.com/questions/2468708/converting-bit-field-to-int)

我正在开发一个应用程序，其中一部分处理包含许多 1 位标志的 16 位字。我正在使用类似于下图的结构处理数据：

```
struct mystruct
{
   uint16_t Reserved1   :3;
   uint16_t WordErr     :1;
   uint16_t SyncErr     :1;
   uint16_t WordCntErr  :1;
   uint16_t Reserved2   :10;
}; 
```

即，该结构包含一个 16 位变量，该变量作为多个较小的（在某些情况下为 1 位标志）片段进行处理。

我的问题是，有没有一种简单的方法可以将整个 16 位字作为一个值来处理，例如，将其输出到控制台、文件或将其添加到另一个数据结构中？除了移动各个结构元素并将它们添加到临时 uint16_t 变量之外，我不知道有任何方法可以做到这一点。似乎有一种更简单的方法可以提取整个单词，但我找不到任何关于编译器如何处理这样的结构的信息。

编辑：我想这可能很明显，但简而言之，我想要做的是能够单独访问 1 位标志，并将结构用作 uint16_t 类型的单个变量（即 unsigned short，16 位）。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-09-18T18:34:26.620

这里的标准方法是使用匿名结构/联合，如下所示：

```
union mystruct
{
   struct
   {
      uint16_t Reserved1   :3;
      uint16_t WordErr     :1;
      uint16_t SyncErr     :1;
      uint16_t WordCntErr  :1;
      uint16_t Reserved2   :10;
   };

   uint16_t word_field;
}; 
```

或者，如果 union 不能作为顶级对象，

```
struct mystruct
{
   union
   {
       struct
       {
          uint16_t Reserved1   :3;
          uint16_t WordErr     :1;
          uint16_t SyncErr     :1;
          uint16_t WordCntErr  :1;
          uint16_t Reserved2   :10;
       };

       uint16_t word_field;
   };
}; 
```

此定义允许直接访问内部字段，例如：

```
mystruct s1;
s1.WordCntErr = 1; 
```

严格来说，编译器并没有保证联合体的不同成员如何相互重叠。它可以使用不同的对齐方式甚至移位。这里有很多人会很容易地指出这一点。然而，从实际的角度来看，如果联合的所有字段具有相同的大小，您可以安全地假设它们占用同一块内存。例如，代码

```
s1.word_field = 0; 
```

将所有位字段清零。大量代码正在使用它。无法想象这将永远停止工作。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-09-18T18:48:52.007

简短的回答是你做不到。更长的答案是你可以做到，但细节取决于你的编译器。这种特殊的位域布局看起来很可疑，就像它应该映射到硬件寄存器一样，在这种情况下，您已经有了编译器依赖项：位域如何排列的细节是实现定义的。因此，当您向自己保证编译器按您期望的方式布置它们时，您还可以通过联合检查它是否支持类型双关语。尽管在 C 和 C++ 中写入联合的一个字段并从另一个字段读取正式会产生未定义的行为，但大多数（全部？）编译器在像这样的简单情况下都支持它。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-18T22:10:18.360

来自联合技术的未定义行为的替代方法是，您可以复制数据：

```
mystruct m;
m.Reserved1 = 0;
m.WordErr = 1;
m.SyncErr = 0;
m.WordCntErr = 0;
m.Reserved2 = 0;

uint16_t value = 0;
memcpy(&value, &m, sizeof(value)); 
```

[[代码]](http://codepad.org/wa9ycDLX)

Of course, the output is platform-specific / endian-sensitive, so if you plan on writing it out so you can read it in again then take that into account.

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-18T18:32:20.183

这就是[工会](http://en.wikipedia.org/wiki/Union_%28computer_science%29)的用途。我几乎不需要使用一个，所以我的语法可能很生疏，但它看起来像这样：

```
union myunion
{
    struct mystruct
    {
       uint16_t Reserved1   :3;
       uint16_t WordErr     :1;
       uint16_t SyncErr     :1;
       uint16_t WordCntErr  :1;
       uint16_t Reserved2   :10;
    };
    uint16_t word;
}; 
```

当然，这会在您访问它时添加输入，因此如果您只是偶尔需要它，您可能只想尝试一个类型转换。

# .net - 用于发送电子邮件的 SMTP 服务器

> ID：12482811
> 
> 赞同：1
> 
> 时间：2012-09-18T18:25:31.670
> 
> 标签：.net, iis-7, smtp

我有一个运行 iis 6.0 作为 smtp 服务器的专用 Windows 服务器，我使用 .net 发送电子邮件。我经营一个博客网站，它有一个评论部分，当有人发表评论时，我想向在该博客上发表评论的人发送电子邮件。一些博客有超过 100 名订阅者。

我通过为每个订阅者使用“收件人”字段来循环向他们发送电子邮件。

我的问题是，最好的方法是什么？我不想被标记为垃圾邮件，也不想让邮件服务器超载。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-18T18:34:21.257

拥有 100 甚至 10,000 名订阅者，您不会使电子邮件服务器超载。在收件人：字段中与收件人发送单独的电子邮件是要走的路。如果您将多个收件人包括为收件人：或抄送：，他们将看到侵犯隐私的彼此的电子邮件地址。如果您在密件抄送中包含多个收件人：这是反垃圾邮件系统的一个强有力指标，表明传入的电子邮件可能不合法。

不被标记为垃圾邮件是一个复杂的主题。

首先，最重要的规则是确保接收电子邮件的人知道这是他们注册的电子邮件。在主题行中明确有很长的路要走，例如：

> 您对 MyBlog.com 的评论

除此之外，需要考虑的一些事项包括：

*   确保您的发送域具有[反向 DNS](http://en.wikipedia.org/wiki/Reverse_DNS_lookup)指针。
*   考虑实施[Domain Keys](http://en.wikipedia.org/wiki/DomainKeys_Identified_Mail)。
*   查看[SPF](http://en.wikipedia.org/wiki/Sender_Policy_Framework)以了解您正在工作的生态系统。

另一种方法是使用[亚马逊的 Simple Email Service 之](http://aws.amazon.com/ses/)类的服务。它们提供强大的基础架构并为您管理交付能力的许多关键方面。他们提供每天最多 2000 封电子邮件的免费使用等级。

**更新**

关于密件抄送是否会触发垃圾邮件，以下是来自*密件抄送是否会触发垃圾邮件的谷歌搜索结果*

> 如果您在密件抄送字段中输入大量姓名，则该电子邮件可能会被标记为垃圾邮件。

[http://www.airsquare.com/support/email-marketing/prevent-your-emails-going-to-spam.cfm](http://www.airsquare.com/support/email-marketing/prevent-your-emails-going-to-spam.cfm)

> 最好将单独的邮件发送给每个收件人，而不是在密件抄送字段中使用多个地址，因为许多垃圾邮件过滤器（和许多 ISP）会自动将多个收件人标记为垃圾邮件。

[http://www.xequte.com/support/maillistking/spamissues.html](http://www.xequte.com/support/maillistking/spamissues.html)

> 在密件抄送字段中设置多个收件人是垃圾邮件发送者早期使用的一种技巧，因此设置了许多垃圾邮件过滤器以将具有多个密件抄送收件人的电子邮件识别为垃圾邮件。

[http://releaseit.pwrnewmedia.com/?p=33](http://releaseit.pwrnewmedia.com/?p=33)

# .net - TeamCity 中代码覆盖率的属性过滤器语法

> ID：12482815
> 
> 赞同：9
> 
> 时间：2012-09-18T18:26:01.230
> 
> 标签：.net, teamcity, mstest, dotcover

任何人都知道从 Teamcity 的覆盖范围中排除代码的语法吗？我在某些方法上使用 ExcludeFromCodeCoverageAttribute 并希望排除这些方法。它在 Visual Studio 中运行良好，但我不明白如何在 TeamCity 中获得相同的行为。我尝试配置的字段位于 MsTest -> .Net Coverage -> Attribute Filters：我试过这个：

```
-:ExcludeFromCodeCoverageAttribute 
```

还有这个

```
-:ExcludeFromCodeCoverage 
```

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-09-19T05:52:45.387

在尝试了一些变化之后，这很有效：

```
-:System.Diagnostics.CodeAnalysis.ExcludeFromCodeCoverageAttribute 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2015-05-13T19:28:10.503

确保在**Attribute Filter**中添加此过滤器：

```
-:System.Diagnostics.CodeAnalysis.ExcludeFromCodeCoverageAttribute 
```

![在此处输入图像描述](../Images/086da57de653bba541d320d44646a951.png)

# beagleboard - beaglebone：如何设置 pwm 时钟？，通过用 C 编写的程序

> ID：12482819
> 
> 赞同：0
> 
> 时间：2012-09-18T18:26:28.753
> 
> 标签：beagleboard, angstrom-linux

我最近一直在与 Beaglebone 合作，并且有一个问题。

我以前使用过 TI 微控制器，根据需要设置寄存器。

据我了解，Angstrom 发行版（主板随附的发行版）允许根据需要设置处理器的寄存器（通过 /sys 中的内核和类文件夹）。如何将 Angstrom 中的文件与 TI 微处理器的寄存器相关联？

另外，如何设置 PWM 信号的时钟/定时器？我想通过 C 中的程序来完成。我找到了用 python 编写的库和程序，但它们并不能帮助我理解真正设置的内容。

感谢您提供的帮助。

提前致谢。

格斯

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-02T21:18:53.323

鉴于您对 PWM (3.2.6+) 有内核支持，请使用 /sys 接口。请参阅：[AM335x PWM 驱动器指南](http://processors.wiki.ti.com/index.php/AM335x_PWM_Driver%27s_Guide)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-11T10:55:13.550

我最近开始使用 beaglebone，需要类似的东西。在找出 beaglebone 的[系统参考手册](http://beagleboard.org/static/beaglebone/latest/Docs/Hardware/BONE_SRM.pdf)中的 MUX 表之后，我弄清楚了需要什么。

在 /sys/kernel/debug/omap_mux/ 有用于将功能多路复用到板上每个引脚的所有文件。您需要将模式编号写入正确的文件以设置所需 pwm 端口的模式。

将 1 写入 mcasp0_aclkx 会激活引脚 9_31 上的 pwm ehrpwm.0:0。

将 1 写入 mcasp0_fsx 会激活引脚 9_29 上的 pwm ehrpwm.0:1。

将 6 写入 gpmc_a2 会激活 pwm ehrpwm.1:0 - 端口 9-14。

将 6 写入 gpmc_a3 会激活 pwm ehrpwm.1:1 - 端口 9-1。

将 4 写入 gpmc_ad8 会激活 pwm ehrpwm.2:0 - 端口 8-19。

将 4 写入 gpmc_ad9 会激活 pwm ehrpwm.2:1 - 端口 8-13。

将 0 写入 ecap0_in_pwm0_out 会激活 pwm ecap.0 - 端口 9-42。

将 4 写入 mcasp0_ahclkr 会激活 pwm ecap.2 - 端口 9-28

对应的 pwm 文件位于 /sys/class/pwm/

那么您可以按照[AM335x PWM 驱动程序指南](http://processors.wiki.ti.com/index.php/AM335x_PWM_Driver%27s_Guide)来了解要写入哪些文件来激活 pwm 信号。

# sql - 使用连接更新表，但使用求和值

> ID：12482820
> 
> 赞同：0
> 
> 时间：2012-09-18T18:26:30.273
> 
> 标签：sql, sql-server-2005

我有两张桌子：

```
-Card
id
points

-History
CardId
points 
```

现在我想执行更新查询，根据历史中具有相同 cardId 的点减去 Card 表中的点

例如我有行：

```
-card
1 10
2 30

-History
1 5
1 3
2 10 
2 9 
```

因此，我应该在 Card 表行中有：

```
-card
1 2
2 11 
```

最好的方法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-18T18:36:59.383

这会做到的。

```
update card
set points = points - total
from card
    inner join (select cardid, sum(points) as total from history) v 
    on card.id = v.cardid 
```

但我同意其他质疑您的数据库结构的评论

# maven - 如何组装具有“非常大”文件依赖项的 Maven 项目

> ID：12482827
> 
> 赞同：0
> 
> 时间：2012-09-18T18:26:58.110
> 
> 标签：maven

我有一个组装服务器构建的项目。有些组件非常大，一两个超过500MB，总共4GB左右。作为打包阶段的一部分，我想将它们组装成一个人工制品（嗯，一个目录）。

我们的人工制品有 200MB 的限制，所以他们不能进去，他们需要住在文件共享上。我想要人工制品（本地缓存、版本控制）的好处。全新安装会将文件复制到目标目录，大约需要一到几个小时才能完成，并且会给网络带来沉重的负担。

有什么想法我该怎么做？

# php - PHP MySQL 列无效

> ID：12482829
> 
> 赞同：1
> 
> 时间：2012-09-18T18:27:04.267
> 
> 标签：php, mysql, mysql-error-1054

在过去的四天里，我一直在努力让这个工作。这只是一个简单的登录页面，其中没有存储敏感信息，但我遇到了 PHP 问题。

```
if ($_SERVER['REQUEST_METHOD'] == 'POST') {
    $uname = $_POST["login"];
    $pword = $_POST["pass"];
    $uname = htmlspecialchars($uname);
    $pword = htmlspecialchars($pword);
    $user_name = "bradf294_access";
    $password = "********";
    $database = "bradf294_clients";
    $server = "localhost";
    $db_handle = mysql_connect($server, $user_name, $password);
    $db_found = mysql_select_db($database, $db_handle);
    print(mysql_errno());
    print($db_found);
    if(isset($db_found)){
        print($db_found."Success");
        $SQL = "SELECT * FROM basicinfo WHERE ref = $uname AND pass = $pword";
        $result = mysql_query($SQL);
        print("Query made");
        print(mysql_errno());
        if ($result) {
            print("result:".$result);
        }
        else {
            print("Incorrect Login Details");
        }
        if ($result > 0) {
            print("found user");
            $errorMessage= "logged on ";
            session_start();
            $_SESSION['login'] = "1";
            header ("Location: progressuser.php");
        }
        else {
            print("Invalid Logon");
        }
    } else {
        print("Database not found. The Webmaster has been notified. Please try again   later");
        $subject = "Automated login error" ;
        $message = "An error occured whilst trying to connect to the MySQL database, to login to the progress checker" ;
        mail("a-bradfield@bradfieldandbentley.co.uk", $subject, $message);
    } 
```

从我一直用来调试的页面上的输出来看，它似乎是那些似乎不起作用的行，它们给出了 1054 错误 - “'%s' 中的未知列 '%s'”

```
$SQL = "SELECT * FROM basicinfo WHERE ref = $uname AND pass = $pword";
$result = mysql_query($SQL) 
```

即使我将`$SQL`字符串复制并粘贴到 phpMyAdmin 中并且效果很好？

有什么明显的我做错了吗？转到[http://www.bradfieldandbentley.co.uk/test/progress.php](http://www.bradfieldandbentley.co.uk/test/progress.php)并输入详细信息 Reference:`TST001`并通过:`dnatbtr121`自己查看输出。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-18T18:29:00.373

您需要引用变量：

```
$SQL = "SELECT * FROM basicinfo WHERE ref = '$uname' AND pass = '$pword'"; 
```

**然而**

这些`mysql_*`功能已被弃用-您应该考虑移至`PDO`或`mysqli_*`代替。这些都使您更容易编写安全代码，并为您解决引用问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-18T18:28:16.777

WHERE 条件中的值是否应该被引号包围，就像在普通的 MySQL 语句中一样？是的。此外，您还会收到一堆关于 SQL 注入的评论。

# android-widget - 从 xamarin 或 monodroid 中的资源布局获取视图

> ID：12482831
> 
> 赞同：2
> 
> 时间：2012-09-18T18:27:10.070
> 
> 标签：android-widget, xamarin.android, xamarin

我尝试从资源布局中获取 MapView，但它返回 null：

```
 var map_view = FindViewById<MapView>(Resource.Id.emap); 
```

mylayout.xml 像：

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:id="@+id/etklmap"
android:orientation="vertical"
android:layout_width="fill_parent"
android:layout_height="fill_parent">
<Button
android:id="@+id/zoomOutButton"
android:layout_width="fill_parent"
android:layout_height="wrap_content"
android:text="Zoom Out" />

<com.google.android.maps.MapView
   android:id="@+id/emap"
   android:layout_width="fill_parent"
   android:layout_height="wrap_content"
   android:apiKey="apikey" />
</LinearLayout> 
```

那么有什么方法可以在不调用的情况下获取视图`SetContentView(Resource.Layout.mylayout);`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-19T06:55:00.010

资源文件只是 XML - 在“膨胀”之前它不会成为视图组和小部件的集合

膨胀 XML 的一种方法是使用 SetContentView。

另一种方法是使用 inflaterservice - 请参阅这个 monodroid 问题（和答案）作为示例：[Android: Getting the View added with LayoutInflator](https://stackoverflow.com/questions/10985949/android-getting-the-view-added-with-layoutinflator)

* * *

请注意 - 在幕后 - 所有 setcontentview 所做的都是使用完全相同的 inflaterservice 对 XML 进行充气，将活动作为充气的父框架传递。

* * *

官方 android 文档是[http://developer.android.com/reference/android/view/LayoutInflater.html](http://developer.android.com/reference/android/view/LayoutInflater.html)

# php - 使用 sendmail 在计划任务中从 php 脚本发送邮件

> ID：12482836
> 
> 赞同：0
> 
> 时间：2012-09-18T18:27:54.040
> 
> 标签：php, email, sendmail

我在我的应用程序中使用 sendmail 包发送邮件，邮件发送功能很简单：

`mail($to,$subject,$mailmessage);`

我的应用程序安装在 Windows Server 2008 上。我使用任务调度程序安排了一个任务，每 5 分钟运行一次脚本

所有脚本都运行但邮件不起作用我在 cmd 显示上得到的错误是：

> PHP 警告：mail()：无法在“localhost”端口 25 连接到邮件服务器，请验证 php.ini 中的“SMTP”和“smtp_port”设置或在 C:\wamp
> www\RCold\mailingcron 中使用 ini_set()。 php on line 3 PHP Stack trace: PHP 1\. {main}() C:\wamp\www\RCold\mailingcron.php:0 PHP 2\. mail() C:\wamp\www\RCold\mailingcron.php:3

> 警告：mail()：无法在“localhost”端口 25 连接到邮件服务器，验证 php.ini 中的“SMTP”和“smtp_port”设置或在 C:\wamp\www\R Cold\mailingcron 中使用 ini_set()。第 3 行的 php

> 调用堆栈：0.0008 227816 1\. {main}() C:\wamp\www\RCold\mailingcron.php:0 0.0008 228800 2.mail() C:\wamp\www\RCold\mailingcron.php:3

如果我在浏览器上运行相同的脚本，邮件功能可以正常工作。

如何从命令行运行邮件功能

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-18T18:39:36.430

**PHP CLI**和**mod_php/Apache**在 WAMP 中使用不同的 php.ini 文件。确保两者的设置相同，或使用`ini_set()`错误消息中指示的功能。

以下是每个的一些常见位置：

`C:\wamp\bin\php\php5.3.X\php.ini`命令行界面

`C:\wamp\bin\apache\Apache2.X\bin\php.ini`阿帕奇

# django - 在本地机器上使用 wsgi 部署 django

> ID：12482837
> 
> 赞同：1
> 
> 时间：2012-09-18T18:28:00.393
> 
> 标签：django, mod-wsgi

我正在尝试学习如何使用 mod_wsgi 进行部署。我正在使用 django 1.4 和一个在 virtualenv 中运行的小应用程序

这是我的 apache2.conf 代码更改（ubuntu）：

```
# https://docs.djangoproject.com/en/1.4/howto/deployment/wsgi/modwsgi/
# jcg 9/18/2012
WSGIScriptAlias / /home/jgoldstick/code/learn/myapp/wsgi.py
#WSGIPythonPath /home/jgoldstick/code/learn/myapp
WSGIPythonPath /home/jgoldstick/code/learn/myapp/lib/python2.7/site-packages

<Directory /home/jgoldstick/code/learn/myapp>
<Files wsgi.py>
Order deny,allow
Allow from all
</Files>
</Directory> 
```

当我访问该网站时，我得到了 404 页。我正在使用 django 生成的标准 wsgi.py 脚本。

我错过了什么

更新更完整：这是我在 myapp/myapp 中的 wsgi.py 文件，我根据第一个答案添加了附件。

我在那个答案中假设 wsdl.py 真的意味着 wsgi.py。

```
import os, sys

sys.path.append('/home/jgoldstick/code/learn')
sys.path.append('/home/jgoldstick/code/learn/myapp')

os.environ.setdefault("DJANGO_SETTINGS_MODULE", "myapp.settings")

# This application object is used by any WSGI server configured to use this
# file. This includes Django's development server, if the WSGI_APPLICATION
# setting points here.
from django.core.wsgi import get_wsgi_application
application = get_wsgi_application()

# Apply WSGI middleware here.
# from helloworld.wsgi import HelloWorldApplication
# application = HelloWorldApplication(application) 
```

我将 apache2.conf（我认为与 ubuntu 配置的 httpd.conf 相同）更改为：

# [https://docs.djangoproject.com/en/1.4/howto/deployment/wsgi/modwsgi/](https://docs.djangoproject.com/en/1.4/howto/deployment/wsgi/modwsgi/)

```
# jcg 9/18/2012
Alias /media/ /home/jgoldstick/code/learn/media/

<Directory /home/jgoldstick/code/learn/media>
Order deny,allow
Allow from all
</Directory>

WSGIScriptAlias / /home/jgoldstick/code/learn/myapp/wsgi.py
WSGIPythonPath /home/jgoldstick/code/learn/myapp/lib/python2.7/site-packages

<Directory /home/jgoldstick/code/learn/myapp>
Order deny,allow
Allow from all
</Directory> 
```

我重新启动了 apache 但是当我去我的应用程序时我仍然得到 404

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-18T18:46:43.010

wsdl.py：

```
import os, sys
sys.path.append('/home/jgoldstick/code/learn')
sys.path.append('/home/jgoldstick/code/learn/myapp')
os.environ['DJANGO_SETTINGS_MODULE'] = 'myapp.settings'
import django.core.handlers.wsgi
application = django.core.handlers.wsgi.WSGIHandler() 
```

httpd.conf 应该是这样的：

```
Alias /media/ /home/jgoldstick/code/learn/media/

<Directory /home/jgoldstick/code/learn/media>
Order deny,allow
Allow from all
</Directory>

WSGIScriptAlias / /home/jgoldstick/code/learn/myapp/django.wsgi
WSGIPythonPath /home/jgoldstick/code/learn/myapp/lib/python2.7/site-packages

<Directory /home/jgoldstick/code/learn/myapp>
Order deny,allow
Allow from all
</Directory> 
```

如果`django.wsgi`位于`/home/jgoldstick/code/learn/myapp/myapp/django.wsgi`请`/myapp`到处添加。

`/media/`与目录相同的配置应该有`static`并且记得执行`./manage.py collectstatic`

请参考[文档 Django-modWSGI](https://docs.djangoproject.com/en/dev/howto/deployment/wsgi/modwsgi/)

# ruby-on-rails - 忽略部分正则表达式的大小写

> ID：12482840
> 
> 赞同：2
> 
> 时间：2012-09-18T18:28:12.183
> 
> 标签：ruby-on-rails, ruby, regex

有没有一种简单的方法可以忽略正则表达式的一部分的大小写？我正在使用 Ruby 1.9.3 和 Rails 3.2.8（不确定 Rails 是否有帮助，但我想我会提到它）。

例如，我想检查一个字符串是否是“你好，我的名字是 Bartholomew”，但我只关心 Bartholomew 的大小写是否正确。我可以：

```
/^[Hh][Ee][Ll][Ll][Oo], [Mm][Yy] [Nn][Aa][Mm][Ee] [Ii][Ss] Bartholomew$/ 
```

但这太痛苦了。我知道我可以`/i`在最后忽略整个字符串的大小写：

```
/^hello, my name is bartholomew$/i 
```

但是我不能拆分字符串（正则表达式和字符串本身都是用户输入的）。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-09-18T18:33:02.177

这是一种方法，默认情况下使正则表达式区分大小写并标记不敏感部分：

```
> pattern = /(?i:hello, my name is) Bartholomew/
=> /(?i:hello, my name is) Bartholomew/
> pattern =~ 'Hello, my Name is Bartholomew'
=> 0
> pattern =~ 'Hello, my Name is bartholomew'
=> nil 
```

另一种方法是默认使正则表达式不区分大小写，并标记敏感部分：

```
> pattern = /hello, my name is (?-i:Bartholomew)/i
=> /hello, my name is (?-i:Bartholomew)/i
> pattern =~ 'Hello, my Name is Bartholomew'
=> 0
> pattern =~ 'Hello, my Name is bartholomew'
=> nil 
```

# youtube-api - Youtube XML 搜索 API 提供没有任何突出显示的视频描述

> ID：12482843
> 
> 赞同：0
> 
> 时间：2012-09-18T18:28:28.013
> 
> 标签：youtube-api

我正在使用 youtube ATOM xml 来检索与搜索词相关的搜索结果 -

```
http://gdata.youtube.com/feeds/api/videos?v=2&max-results=10&q=obscure+search+terms&safeSearch=moderate&oi=spell&start-index=1&spell=1 
```

XML 包含每个视频的描述，但描述没有任何关键字突出显示。例如，如果我搜索“soccer”，我希望通过在返回的 XML 上使用某个标记来突出显示其中包含“soccer”的所有单词。有没有办法得到它？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-20T04:01:54.920

不，没有。在这种情况下，“突出显示”甚至意味着什么——在 XML 中没有表示“突出显示”的标准方法，所以如果您在搜索词周围谈论 <b> 标记，那只会是开发人员的可行解决方案谁计划在 HTML 页面中显示结果。如果他们对结果做任何其他事情，比如在原生移动应用程序中显示它，那么 <b> 将是毫无意义的噪音。

过去，有一些搜索结果在搜索词周围带有 <b> 标记的情况，但这些都是错误，应该都已解决。

# python - 使用python检索文档中具有2个或更多字母的单词总数

> ID：12482844
> 
> 赞同：0
> 
> 时间：2012-09-18T18:28:32.900
> 
> 标签：python, algorithm, iteration, defaultdict

我有一个小的 Python 脚本，用于计算 .txt 文档中前 10 个最常用的词、10 个最不常用的词和总词数。根据作业，一个词被定义为2个字母或更多。我有 10 个最常见的单词和 10 个最不常见的单词打印得很好，但是当我尝试打印文档中的单词总数时，它会打印所有单词的总数，包括单个字母单词（例如“a” ）。我怎样才能得到单词总数来只计算有 2 个或更多字母的单词？

这是我的脚本：

```
from string import *
from collections import defaultdict
from operator import itemgetter
import re

number = 10
words = {}
total_words = 0
words_only = re.compile(r'^[a-z]{2,}$')
counter = defaultdict(int)

"""Define function to count the total number of words"""
def count_words(s):
    unique_words = split(s)
    return len(unique_words)

"""Define words as 2 letters or more -- no single letter words such as "a" """
for word in words:
    if len(word) >= 2:
        counter[word] += 1

"""Open text document, strip it, then filter it"""
txt_file = open('charactermask.txt', 'r')

for line in txt_file:
    total_words = total_words + count_words(line)
    for word in line.strip().split():
        word = word.strip(punctuation).lower()
        if words_only.match(word):
            counter[word] += 1

# Most Frequent Words
top_words = sorted(counter.iteritems(),
                    key=lambda(word, count): (-count, word))[:number] 

print "Most Frequent Words: "

for word, frequency in top_words:
    print "%s: %d" % (word, frequency)

# Least Frequent Words:
least_words = sorted(counter.iteritems(),
                    key=lambda (word, count): (count, word))[:number]

print " "
print "Least Frequent Words: "

for word, frequency in least_words:
    print "%s: %d" % (word, frequency)

# Total Unique Words:
print " "
print "Total Number of Words: %s" % total_words 
```

我不是 Python 专家，这是针对我目前正在学习的 Python 课程的。在这项作业中，我的代码的整洁性和正确的格式对我不利，如果可能的话，有人还能告诉我这段代码的格式是否被认为是“好的做法”吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-18T18:36:59.990

列表理解方法：

```
def countWords(s):
    words = s.split()
    return len([word for word in words if len(word)>=2]) 
```

详细方法：

```
def countWords(s):
    words = s.split()
    count = 0
    for word in words:
        if len(word) >= 2:
            count += 1
    return count 
```

顺便说一句，对 using 表示赞赏`defaultdict`，但我会选择[`collections.Counter`](http://docs.python.org/library/collections.html#collections.Counter)：

```
words = collections.Counter([word for line in open(filepath) for word in line.strip()])
words = dict((k,v) for k,v in words.iteritems if len(k)>=2)
mostFrequent = [w[0] for w in words.most_common(10)]
leastFrequent = [w[0] for w in words.most_common()[-10:]] 
```

希望这可以帮助

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-18T21:32:07.460

对不起，但我似乎对这个解决方案有点过火了。我的意思是我*真的*把你的代码分开了，然后按照我的方式把它重新组合起来：

```
from collections import defaultdict
from operator import itemgetter
from heapq import nlargest, nsmallest
from itertools import starmap
from textwrap import dedent
import re

class WordCounter(object):
    """
    Count the number of words consisting of two letters or more.
    """

    words_only = re.compile(r'[a-z]{2,}', re.IGNORECASE)

    def __init__(self, filename, number=10):
        self.counter = defaultdict(int)

        # Open text document and find all words
        with open(filename, 'r') as txt_file:
            for word in self.words_only.findall(txt_file.read()):
                self.counter[word.lower()] += 1

        # Get total count
        self.total_words = sum(self.counter.values())

        # Most Frequent Words
        self.top_words = nlargest(
            number, self.counter.items(), itemgetter(1))

        # Least Frequent Words
        self.least_words = nsmallest(
            number, self.counter.items(), itemgetter(1))

    def __str__(self):
        """
        Summary of least and most used words, and total word count.
        """
        template = dedent("""
            Most Frequent Words:
            {0}

            Least Frequent Words:
            {1}

            Total Number of Words: {2}
            """)

        line_template = "{0}: {1}".format
        top_words = "\n".join(starmap(line_template, self.top_words))
        least_words = "\n".join(starmap(line_template, self.least_words))

        return template.format(top_words, least_words, self.total_words)

print WordCounter("charactermask.txt") 
```

以下是我所做更改的摘要，以及原因

*   **不要做`from x import *`。**一些模块旨在让您安全地执行此操作，但通常由于命名空间污染，这是一个坏主意。只导入您需要的东西，或使用缩写名称导入模块：`import string as st`. 这将减少错误代码。

*   **让它成为一堂课。**尽管将其编写为脚本对于这类事情来说很好，但始终将代码包装在类或函数中以更好地组织代码以及在另一个项目中需要它们时是一个好习惯。然后你就可以做`from wordcounter import WordCounter`，你很高兴。

*   **[文档字符串](http://www.python.org/dev/peps/pep-0257/)在代码块内移动。**这样，如果您`help(my_class_or_function)`在交互式解释器中键入，它们将被自动使用。

*   **注释通常带有前缀`#`而不是一次性字符串**。这不是一个很大的禁忌，而是一个相当普遍的约定。

*   **打开文件时使用该[`with`语句](http://www.python.org/dev/peps/pep-0343/)**。这是一个好习惯。您不必担心记得关闭它们。

*   **`.strip().split()`是多余的。**只使用`.split()`.

*   **使用[`re.findall`](http://docs.python.org/library/re.html#re.findall).** 这样就避免了诸如“一流”之类的词的问题，使用你的方法根本不会计算在内。根据`findall`定义，我们正在计算“top”和“notch”。此外，它更快。但是我们必须稍微改变一下正则表达式。

*   **`words`字典未使用。**已删除。

*   **用于`sum`计算总字数。**这解决了您和inspectorG4dgets 代码中的问题，其中该`words_only`模式确实需要为每个单词使用两次——一次用于总数，一次用于字数——以获得一致的结果。

*   **使用[`heapq.nlargest`和`heapq.nsmallest`](http://docs.python.org/library/heapq.html#heapq.nlargest)。**当您只需要 n 个最小或最大的结果时，它们比完整排序更快且内存效率更高。

*   **制作返回您可能希望或可能不希望打印的字符串的函数。**直接使用 print 语句不太灵活，但非常适合调试。

*   **对于新代码，请使用`format`字符串方法而不是`%`运算符。**前者是为了改进和取代后者。

*   **使用多行字符串而不是多个连续打印。**更容易看到实际会写什么，也更容易维护。如果您想将字符串缩进到与周围代码相同的级别，textwrap.dedent 函数会有所[帮助。](http://docs.python.org/library/textwrap.html#textwrap.dedent)

还有一个问题是哪个更具可读性：`starmap(line_template, self.top_words)`或`[line_template(*x) for x in self.top_words]`. 大多数人总是喜欢列表推导，我通常同意他们的观点，但在这里我喜欢星图方法的简洁性。

话虽如此，我同意user1552512，你的风格看起来很棒！漂亮、可读的代码，很好的注释，非常[符合 PEP 8](http://www.python.org/dev/peps/pep-0008/)。你会走得很远。:)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-18T18:35:08.137

计数单词只需使用 split()

您也应该在这里使用 match_words 正则表达式

```
def count_words(s):
    unique_words = split(s)
    return len(filter(lambda x: words_only.match(x):, unique_words)) 
```

你的风格看起来很棒:)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-18T18:37:30.393

就个人而言，我认为您的代码看起来不错。我不知道它是否是“标准”python 风格，但它很容易阅读。我对 Python 也很陌生，但这是我的答案。

我假设您的 count_words(s) 函数是计算总字数的函数。您遇到的问题是，只需调用 split；你只是用空格分隔单词。

您只需要计算单词的 2+ 个字符，因此在该函数中编写一个循环，仅计算 unique_words 列表中具有 2+ 个字符的单词数。

# c# - WPF程序抛出无法解释的调用异常

> ID：12482847
> 
> 赞同：2
> 
> 时间：2012-09-18T18:28:38.313
> 
> 标签：c#, .net, wpf, targetinvocationexception

问题是：当我删除第一个消息框行时，我的程序没有运行并在 if 语句行上抛出“异常已被调用的目标抛出”。但是，当我将消息框留在那里时，它运行良好。有人可以向我解释为什么会发生这种情况以及我可以做些什么来解决它？顺便说一句，我对 WPF 相当陌生，任何帮助将不胜感激。

```
public BrowserMode() {

       InitializeComponent();

       MessageBox.Show("Entering Browser Mode");
       if (webBrowser1.Source.Scheme == "http")
       {
           //cancel navigation
           //this.NavigationService.Navigating += new NavigatingCancelEventHandler(Cancel_Navigation);

           qd = new QuestionData();

           // code where stuff happens
           var url = webBrowser1.Source;
           HttpWebRequest request = (HttpWebRequest)WebRequest.Create(url);

           // from h.RequestUri = "webcam://submit?question_id=45"
           var parseUrl = request.RequestUri; //the uri that responded to the request.
           MessageBox.Show("The requested URI is: " + parseUrl); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-18T21:27:42.323

`WebBrowser`这种工作不适合构造函数，应该在完全加载之前移出。你有两个选择：

1.  在那里挂钩`Control.Loaded`并执行此行为。

    ```
    public BrowserMode()
    {
        InitializeComponent();

        this.Loaded += BroswerMode_Loaded;
    }

    void BrowserMode_Loaded(object sender, EventArgs e)
    {
        if (webBrowser1.Source != null
         && webBrowser1.Source.Scheme == "http")
        {
            qd = new QuestionData();
            // ...
        }
    } 
    ```

2.  在那里挂钩`WebBrowser.Navigating`并执行此行为。

    ```
    public BrowserMode()
    {
        InitializeComponent();

        this.webBrowser1.Navigating += WebBrowser_Navigating;
    }    

    void WebBrowser_Navigating(object sender, NavigatingCancelEventArgs e)
    {
        if (e.Uri.Scheme == "http")
        {
            qd = new QuestionData();
            // ...
        }
    } 
    ```

# c# - 公共 API 的正确命名空间

> ID：12482853
> 
> 赞同：1
> 
> 时间：2012-09-18T18:29:02.970
> 
> 标签：c#, java, api, namespaces

我试图弄清楚在从大量实现代码中创建公共 API 时如何正确使用命名空间。

我正在编写一个 API，以便在我公司创建的所有代码上展示一个友好的公众形象，以便解决我们最常用的框架中的问题。

我的新项目的根命名空间称为“FrameworkSDK”。

在 FrameworkSDK 下，我有 FrameworkSDK.CompanyNameLibrary，这是我公司创建的所有实现代码所在的位置。

我正在尝试编写 PublicFacingAPI，理想情况下它会在 FrameworkSDK.CompanyNameLibrary 之上放置一个漂亮的面孔，以便新开发人员可以立即开始使用它等。

我应该将新的 PublicFacingAPIcode 放在哪个命名空间中？

它应该放在 FrameworkSDK.CompanyNameLibrary.PublicFacingAPI 中吗？那么每当开发者导入这个 dll 时，那将是一个荒谬的 using 语句。

我可以将代码放在 FrameworkSDK 命名空间中，但是我的所有公共类都需要包含使用 FrameworkSDK.CompanyNameLibrary 或使用 FrameworkSDK.CompanyNameLibrary.SubNameSpace 的 using 语句。

这段代码应该去哪里？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-18T18:32:21.003

我不觉得 SDK.CompanyNameLibrary.CompanyInternalAPI 如此荒谬。它有点长，但它是描述性的，任何使用 dll 的人都会确切地知道他们得到了什么。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-18T18:41:18.740

我不明白为什么您需要为面向公众的部分使用不同的命名空间。尽可能让*一切变得*友好，对于真正应该隐藏的部分，将它们保留为内部类型。

然后我会删除“SDK”部分，并更改为：

```
CompanyName.BclPlusPlus 
```

或一些类似的项目名称，给人以增强核心 .NET 框架的印象。我肯定会将公司名称分离为“根”。

# ruby-on-rails-3 - RoR：我要在 routes.rb 中添加什么才能使其正常工作？

> ID：12482854
> 
> 赞同：0
> 
> 时间：2012-09-18T18:29:05.433
> 
> 标签：ruby-on-rails-3, routing

我有一个应用程序，用户可以在其中发布微博。但是在表格中输入一个并按帖子，它说没有路线匹配[POST]“/users/1”。这是我当前的 routes.rb 文件。

```
SampleApp::Application.routes.draw do
  resources :users do
    resources :comments

    member do
      get :following, :followers
    end
  end
  resources :sessions, only: [:new, :create, :destroy]
  resources :microposts, only: [:create, :destroy] do
    resources :comments

  end
  resources :relationships, only: [:create, :destroy]

  root to: 'static_pages#home'

  match '/signup',  to: 'users#new'
  match '/signin',  to: 'sessions#new'
  match '/signout', to: 'sessions#destroy', via: :delete

  match '/help',    to: 'static_pages#help'
  match '/about',   to: 'static_pages#about'
  match '/contact', to: 'static_pages#contact'

  # The priority is based upon order of creation: 
```

这是我运行 rake 路由时的输出：

```
user_comments GET    /users/:user_id/comments(.:format)                    comments#index
                       POST   /users/:user_id/comments(.:format)                    comments#create
      new_user_comment GET    /users/:user_id/comments/new(.:format)                comments#new
     edit_user_comment GET    /users/:user_id/comments/:id/edit(.:format)           comments#edit
          user_comment GET    /users/:user_id/comments/:id(.:format)                comments#show
                       PUT    /users/:user_id/comments/:id(.:format)                comments#update
                       DELETE /users/:user_id/comments/:id(.:format)                comments#destroy
        following_user GET    /users/:id/following(.:format)                        users#following
        followers_user GET    /users/:id/followers(.:format)                        users#followers
                 users GET    /users(.:format)                                      users#index
                       POST   /users(.:format)                                      users#create
              new_user GET    /users/new(.:format)                                  users#new
             edit_user GET    /users/:id/edit(.:format)                             users#edit
                  user GET    /users/:id(.:format)                                  users#show
                       PUT    /users/:id(.:format)                                  users#update
                       DELETE /users/:id(.:format)                                  users#destroy
              sessions POST   /sessions(.:format)                                   sessions#create
           new_session GET    /sessions/new(.:format)                               sessions#new
               session DELETE /sessions/:id(.:format)                               sessions#destroy
    micropost_comments GET    /microposts/:micropost_id/comments(.:format)          comments#index
                       POST   /microposts/:micropost_id/comments(.:format)          comments#create
 new_micropost_comment GET    /microposts/:micropost_id/comments/new(.:format)      comments#new
edit_micropost_comment GET    /microposts/:micropost_id/comments/:id/edit(.:format) comments#edit
     micropost_comment GET    /microposts/:micropost_id/comments/:id(.:format)      comments#show
                       PUT    /microposts/:micropost_id/comments/:id(.:format)      comments#update
                       DELETE /microposts/:micropost_id/comments/:id(.:format)      comments#destroy
            microposts POST   /microposts(.:format)                                 microposts#create
             micropost DELETE /microposts/:id(.:format)                             microposts#destroy
         relationships POST   /relationships(.:format)                              relationships#create
          relationship DELETE /relationships/:id(.:format)                          relationships#destroy
                  root        /                                                     static_pages#home
                signup        /signup(.:format)                                     users#new
                signin        /signin(.:format)                                     sessions#new
               signout DELETE /signout(.:format)                                    sessions#destroy
                  help        /help(.:format)                                       static_pages#help
                 about        /about(.:format)                                      static_pages#about
               contact        /contact(.:format)                                    static_pages#contact 
```

我想我真正需要的是让 [POST] users/:id 路由到 microposts#create，但我不知道它的语法。

ps 如果我添加帖子“users/:id”，：controller =>“users/update”，我会收到错误消息：

```
ArgumentError (missing :action):
  config/routes.rb:4:in `block (2 levels) in <top (required)>'
  config/routes.rb:2:in `block in <top (required)>'
  config/routes.rb:1:in `<top (required)>' 
```

这是与控制器交谈的形式（我认为）

```
<%= form_for :micropost do |f| %>

  <div class="field no-indent">
    <%= f.text_area :content, placeholder: "What's something else you want to buy?" %>
    <%= hidden_field_tag 'micropost[kind]', "purchase" %>
  </div>
  <%= f.submit "Post", class: "btn btn-large btn-primary" %>
<% end %> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-18T18:43:44.503

在您的 form_for 中，您只需要指定 url。我认为这应该有效。<%= form_for :micropost, :html => {:method => :post, :url => microposts_path} 做 |f| %>

```
 <div class="field no-indent">
    <%= f.text_area :content, placeholder: "What's something else you want to buy?" %>
    <%= hidden_field_tag 'micropost[kind]', "purchase" %>
  </div>
  <%= f.submit "Post", class: "btn btn-large btn-primary" %>
<% end %> 
```

也让我知道什么是 html 输出。在 form_for :html 参数以 hashmap 形式给出，其中 key 是表单属性，value 是属性值。

谢谢

# c# - 在反序列化期间将 JSON 日期转换为 .NET 日期时间的正确方法

> ID：12482856
> 
> 赞同：16
> 
> 时间：2012-09-18T18:29:14.027
> 
> 标签：c#, javascript, json, stringify

我有一个使用 JSON 数据调用 MVC 控制器的 javascript 函数：

```
var specsAsJson = JSON.stringify(specs);
$.post('/Home/Save', { jsonData: specsAsJson }); 
```

在服务器端，在控制器内，我似乎无法克服这个错误：

> /Date(1347992529530)/ 不是 DateTime 的有效值。

当我调用 Deserialize() 时发生该异常（下面方法中的第三行）：

```
 public ActionResult Save(string jsonData)
    {
        var serializer = new JavaScriptSerializer();
        serializer.RegisterConverters(new[] { new TimeSpanJsonConverter() });
        var specs = serializer.Deserialize<List<EquipmentSpecWithParameterlessConstructor>>(jsonData);

        return View("Index", _allTrackerJobs);
    } 
```

我一直在做一些谷歌搜索，上面的代码是我完成这项工作的最新尝试（使用[此处](https://stackoverflow.com/a/12265196/279516)的 TimeSpanJsonConverter ）。其他方法显示仅向服务器发送日期，但我有一个将日期作为某些属性的对象列表。

是否有一种优雅的、普遍接受的方法来解决这个问题，还是我们仍然需要某种丑陋的解决方法？解决这个问题的正确方法是什么？

**=================== 原始问题结束===================**

* * *

**编辑 - 通过使用 JsonConvert 序列化解决**

请参阅下面的**答案**（不是这个问题中糟糕的解决方法）。

* * *

**编辑 - 糟糕的解决方法**

我创建了一个具有与域对象完全相同的字段的 DTO，除了我创建了日期字段字符串以便它们可以反序列化。现在我可以反序列化它，我将努力将日期转换为有效格式，以便我可以从我的 DTO 创建域对象。

```
public class EquipmentSpecDto
{
    public string StartTime { get; set; }
    public string EndTime { get; set; }
    // more properties here
} 
```

我只是使用 DTO 进行反序列化：

```
var specs = serializer.Deserialize<List<EquipmentSpecDto>>(jsonData); 
```

* * *

**编辑 2 - 将 JavaScript 日期转换为 .NET**

为了完整起见，并希望我为别人节省一个小时，这就是我能够转换 javascript 日期的方式：

```
 foreach (EquipmentSpecDto specDto in specDtos)
    {
        // JavaScript uses the unix epoch of 1/1/1970\. Note, it's important to call ToLocalTime()
        // after doing the time conversion, otherwise we'd have to deal with daylight savings hooey.
        DateTime unixEpoch       = new DateTime(1970, 1, 1, 0, 0, 0, DateTimeKind.Utc);
        Double startMilliseconds = Convert.ToDouble(specDto.StartTime.Substring(6, 13));
        Double endMilliseconds   = Convert.ToDouble(specDto.EndTime.Substring(6, 13));
        DateTime startTime       = unixEpoch.AddMilliseconds(startMilliseconds).ToLocalTime();
        DateTime endTime         = unixEpoch.AddMilliseconds(endMilliseconds).ToLocalTime();
        EquipmentSpec spec       = new EquipmentSpec(startTime, endTime, specDto.Equipment);

        specs.Add(spec);
    } 
```

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-09-19T01:29:52.693

I found a simple answer. In my javascript, I was serializing the data using the JavaScriptSerializer. After much googling, I found this [article](http://james.newtonking.com/archive/2009/02/20/good-date-times-with-json-net.aspx) that shows how to serialize using JsonConvert that causes a more .NET-friendly DateTime to be used.

**Old:**

```
var specs = @Html.Raw(new System.Web.Script.Serialization.JavaScriptSerializer().Serialize(ViewBag.JobSpecEquipment)) 
```

Dates look like this: `Date(1348017917565)`

**New:**

```
var specs = @Html.Raw(Newtonsoft.Json.JsonConvert.SerializeObject(ViewBag.JobSpecEquipment)); 
```

Dates look like this: `2012-09-18T21:27:31.1285861-04:00`

So the problem was really how I was serializing in the first place. Once I used JsonConvert, deserialization on the back end simply worked.

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2014-02-18T21:19:06.537

我在互联网上找到了这段代码。它对我来说就像一个魅力......

```
function customJSONstringify(obj) {
    return JSON.stringify(obj).replace(/\/Date/g, "\\\/Date").replace(/\)\//g, "\)\\\/")
} 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-09-18T21:34:12.327

在 Javascript 日期和各种服务器端语言之间转换时经常引起人们注意的一件事是，尽管双方可能能够理解 unix 样式的时间戳值，但 JS 使用微秒精度的时间戳，而在大多数其他语言中，默认值时间戳精度是秒。

换句话说，Javascript 中的 1347993132851 需要除以 1000 才能在其他语言中被识别为 unix 时间戳。

或者，如果您的平台可以接受格式化的日期字符串，请使用 Javascript`Date()`对象将时间戳值转换为格式化的日期以发送到服务器。或者更好的是，使用[Date.js](http://www.datejs.com/)或[Moment.js](http://momentjs.com/)等辅助库。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-09-18T21:31:19.870

JavaScript（嗯，EcmaScript）基于 ISO-8601 标准的简化定义了它的 DateTime 字符串交换格式。

XML Schema 也基于 ISO-8601 定义了它的 DateTime 字符串交换格式。

我发现使用 .NET 类`System.Runtime.Remoting.Metadata.W3cXsd2001.SoapDateTime`来处理从 .NET DateTime 值到 XML 格式的转换很方便。

由于 JavaScript 基于相同的 ISO-8601 标准，也许它也适用于您的 JSON 案例。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2017-02-14T17:00:19.340

我接受了@Bob Horn 的回答，但它对我不起作用。我的 REST 服务正在使用 Javascritpt 日期。我将引用的答案改编为扩展方法。

```
 using System;

namespace Mediatel.Framework
{
    public static class JsonDate
    {
        public static DateTime ConvertToDateTime(this string jsonDate)
        {
            // JavaScript uses the unix epoch of 1/1/1970\. Note, it's important to call ToLocalTime()
            // after doing the time conversion, otherwise we'd have to deal with daylight savings hooey.
            DateTime unixEpoch = new DateTime(1970, 1, 1, 0, 0, 0, DateTimeKind.Utc);
            Double milliseconds = Convert.ToDouble(jsonDate);
            DateTime dateTime = unixEpoch.AddMilliseconds(milliseconds).ToLocalTime();

            return dateTime;
        }
    }
} 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2018-09-05T11:48:38.703

收到错误后

> /Date(1347992529530)/ 不是 DateTime 的有效值。

使用此替换对我有用。

```
var data = ko.toJSON({ objext: obj});
$.ajax({
    url: "/API/API.asmx/SaveObject",
    type: "POST",
    dataType: "json",
    contentType: "application/json; char-utf8;",
    data: data.replace(/\/Date/g, "\\\/Date").replace(/\)\//g, "\)\\\/"),
    success: function (r) {},
    error: function (e) {},
    complete: function () {}
}); 
```

# objective-c - 强制窗口仅在一侧调整大小 - OSX Lion

> ID：12482867
> 
> 赞同：1
> 
> 时间：2012-09-18T18:29:50.283
> 
> 标签：objective-c, nswindow, window-resize

如您所知，在 10.7 中，用户可以从各个角度调整窗口的大小。有没有办法将 NSWindow 的大小调整限制在一侧？使用`setMinSize:`并且`setMaxSize:`不会做所有事情：通过使用这些，您只能将调整大小限制在*两侧*，而不是一侧。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-27T07:22:48.067

`mouseMoved`要固定光标，请使用NSWindow 子类的事件跟踪鼠标位置。当它接近顶部时，调用 setMinSize = setMaxSize = 窗口大小。当鼠标更靠近底部而不是顶部时，将最小尺寸和最大尺寸更改回任何可以让用户按照您希望的方式调整大小的值。

请注意，只要窗口具有焦点，无论鼠标是在窗口内还是在窗口外（至少在我的测试中），都会调用 mouseMoved。但是要让它工作，首先`-(BOOL) acceptsMouseMovedEvents { return YES; }`在你的 NSWindow 子类中实现。

作为额外的保护措施，您可以在 NSWindowDelegate中拦截并阻止任何使用`windowWillResize`(not ) 调整大小的尝试。`windowDidResize`从苹果文档：

> `-(NSSize)windowWillResize:(NSWindow *)sender toSize:(NSSize)frameSize`
> 
> ...
> 
> frameSize 包含发送方将被调整到的大小（在屏幕坐标中）。要调整到不同的大小，只需从此方法返回所需的大小；**为避免调整大小，请返回当前大小**。调用此方法时，已应用发送方的最小和最大大小约束。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-22T18:55:38.910

`- (void)windowDidResize:(NSNotification *)notification`如果从错误的一侧调整大小，则实施并恢复以前保存的窗口框架。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-24T10:27:04.777

任何操作系统上的窗口大小调整行为都不是你的事。您要么支持调整窗口大小，要么不支持。除了支持与否之外，这不是你的决定。用户会更喜欢你这样做。

作为附录，没有像样的方法来做你想做的事……按设计。

# ruby-on-rails - Rails 3 to_json 包含条件/where 子句

> ID：12482868
> 
> 赞同：2
> 
> 时间：2012-09-18T18:29:50.647
> 
> 标签：ruby-on-rails, ruby-on-rails-3, activerecord, ruby-on-rails-3.1

我正在使用以下内容输出 JSON 记录列表：

```
@team.people.to_json(
      :include => [:user, :statistics => {:include => :attribute}]).html_safe 
```

但是，我只想包含设置了特定 type_id 的统计信息。本质上是与用户和统计信息的左外连接，其中统计信息上的 a`type_id`等于某个数字。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-18T20:24:04.470

我至少能想到几个选择：

1.  在`Person`模型中，覆盖`to_json`（或者，也许更好，`serializable_hash`）并在那里做你的条件。
2.  而不是`{:include => :attribute}`do`{:methods => :foo}`和 do 你的条件 in `foo`。

`serializable_hash`如果有帮助，这是我覆盖的示例：

```
 def serializable_hash(options={})
    options = { 
      :methods => [
        'client',
        'services',
        'products',
        'has_payments',
      ]}.update(options)
    super(options)
  end 
```

我可以想象上面的一些东西，如果你正在寻找的数字是你正在寻找的数字，或者其他的东西`options =`，你将方法数组设置为一件事。`type_id`

# wpf - XML 绑定反转？

> ID：12482871
> 
> 赞同：1
> 
> 时间：2012-09-18T18:30:14.647
> 
> 标签：wpf, xml, data-binding

我很困扰。我有一个 xml 文件，我绑定到该文件以进行某些显示。我的 xml 的一部分如下所示：

```
<Section Name="Water Efficiency">
  <Prerequisite Title="Prerequisite 1" Description="Water Use Reduction—20% Reduction " />
  <Credit CanCheckFromModel="False" CheckFromModel="False" Title="Credit 1" Description="Water Efficient Landscaping" IsGoal="Yes" PossiblePoints="2 to 4">
    <Option Description="Reduce by 50%" PossiblePoints="2" />
    <Option Description="No Potable Water Use or Irrigation" PossiblePoints="4" />
  </Credit>
  <Credit CanCheckFromModel="False" CheckFromModel="False" Title="Credit 2" Description="Innovative Wastewater Technologies" IsGoal="Yes" PossiblePoints="2" />
  <Credit CanCheckFromModel="True" CheckFromModel="True" Title="Credit 3" Description="Water Use Reduction " IsGoal="Yes" PossiblePoints="2 to 4">
    <Option Description="Reduce by 30%" PossiblePoints="2" />
    <Option Description="Reduce by 35%" PossiblePoints="3" />
    <Option Description="Reduce by 40%" PossiblePoints="4" />
  </Credit>
</Section> 
```

基本上我有一个“选项”的组合框，我可以很好地填充它，如果没有选项，它是空白的。现在，如果没有选项，我希望它禁用。我为此创建了一个转换器，转换代码如下：

```
//convert to an xmlnodelist
XmlNodeList s = value as XmlNodeList;

System.Diagnostics.Debugger.Break();

//make sure the conversion worked
if (s != null)
{
  //see if there are any nodes in the list
  if (s.Count != 0)
  {
    //has nodes, check to see if any of them are of type 'Option'
    bool HasOptions = false;
    foreach (XmlNode n in s)
    {
      if (n.Name == "Option")
      {
        //found one with an option, exit loop
        HasOptions = true;
        break;
      }
    }

    //check if we found any options and return accordingly
    return HasOptions;
  }
}

//conversion failed or count was 0, false by default
return false; 
```

我的组合框的 XAML 标记是：

```
<ComboBox Width="200" DataContext="{Binding}"  ItemsSource="{Binding XPath=./*}" IsEnabled="{Binding XPath=./*, Converter={StaticResource ConvOptions}}" >
  <ComboBox.ItemTemplate>
    <DataTemplate>
      <TextBlock Text="{Binding XPath=@Description}" />
    </DataTemplate>
  </ComboBox.ItemTemplate>
</ComboBox> 
```

对我来说真正令人困惑的部分是这反过来起作用。具有选项子项的条目被禁用，而没有的条目被启用。如果我只是切换返回值，那么我会启用所有功能，所以它就像它永远不会触及那些没有选项的东西。我尝试在转换器中放置一个断点，但它向我显示的所有值都是一个空字符串。

有人能告诉我这里发生了什么吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-18T18:51:50.547

乍一看，通过`HasOptions`一起删除来更新您的转换器，然后在找到时返回 true：

```
if (n.Name == "Option")
{
    //found one with an option, exit loop
    return true;
} 
```

在转换器中，`HasOptions`在语句内部`if (s.Count != 0)`声明，但在 if 语句范围之外用作返回值。我不完全确定这会纠正转换器，但试一试。

附带说明：当在转换器中引发异常时，WPF 只会吞下它；检查您的输出窗口，由于转换器失败，您可能会看到绑定错误。

# javascript - 错误：无法设置属性“src”的值：对象为空或未定义以及 CSS 错误：解析“top”值时出错，已删除声明

> ID：12482873
> 
> 赞同：1
> 
> 时间：2012-09-18T18:30:28.187
> 
> 标签：javascript, css

这是我的作业网站的 JavaScript 部分 - 它应该显示一个约会广告，并每隔一段时间在屏幕上移动它，并在每个时间间隔加载一个新图像

它会随机水平移动，但不会垂直移动。这个问题发生在 Firefox 中 - 在 IE 中没有问题。

但是在 IE 中它不会遍历图像，但在 Firefox 中会。

谁能告诉我发生了什么事？

```
<script type="text/javascript">
    var rotatingAd = new Array(3);
    var curPosition = 1;
    var screenWidth = 0;
    var screenHeight = 0;

    for(var i = 0; i < 4; ++i) 
    {
        rotatingAd[i] = new Image();

        rotatingAd[i].src = "AdDate" + i + ".gif";

    }
    function openOrderForm()
    {
        window.open("order.html");
    }

    function moveAd(){
    var leftPos = getRandomLeft();
    var topPos = getRandomTop();
    document.getElementById("AdDate").style.top = topPos; + "px";//this is where firefox says the css error is 

          document.getElementById("AdDate").style.left = leftPos + "px";
    if(curPosition == 3)
    {
        curPosition = 0;
    }
    document.AdDatePic.src = rotatingAd[curPosition].src;//this is where IE gets its null error from    
    curPosition++;

}

    function start(){
  screenWidth = document.body.clientWidth;
  screenHeight= document.body.clientHeight;
  //alert("width="+screenWidth + "height="+screenHeight)
 //setTimeout("moveAd()", 3000);
  setInterval("moveAd()", 2000);
}

    function getRandomLeft(){
     var lpos;
     lpos = Math.floor(Math.random()*(screenWidth -400));
     return lpos;
    }

    function getRandomTop(){
     tpos = Math.floor(Math.random()*(screenHeight - 135));
      return tpos;
    }
</script>
<body onload="start();">
<span id="AdDate" style="position:absolute; left:300px; top:300px;" >
  <img id="AdDatePic" src="AdDate0.gif" alt="picture of gopher"   />
</span>
</body> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-18T18:42:32.817

看起来您的 IE 问题与您尝试选择图片标签的方式有关

将您的代码更改为

`document.getElementById("AdDatePic").src`

从

```
document.AdDatePic.src 
```

应该修复IE问题

firefox问题来自分号放置

```
topPos + "px;" 
```

应该解决这个问题

# asp.net-mvc - 将 Silverlight 窗口中网络摄像头的图像发布到 MVC 控制器

> ID：12482877
> 
> 赞同：0
> 
> 时间：2012-09-18T18:30:44.390
> 
> 标签：asp.net-mvc, silverlight, http, file-upload, webcam

我有一个 MVC 4 应用程序，带有一个用于拍照的按钮，该按钮打开一个带有 javascript 的新窗口，其中包含一个 silverlight 应用程序。然后，silverlight 应用程序可以使用网络摄像头拍摄照片并将其存储为可写位图。然后我想做的是将该位图推送到我的控制器中的操作上，以保存到数据库并刷新视图。

我知道我需要将图像作为帖子发送到我的控制器，但是任何关于我将如何去做的代码示例或建议将不胜感激。我认为它应该如下工作，用于在我的 silverlight 应用程序中保存图像的按钮单击将调用 POST 到 MVC 控制器并将图像流作为参数附加到控制器中，然后控制器可以获取流并将其向上推送到数据库然后我可以关闭 silverlight 窗口。只是不确定如何进行编码。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-19T16:41:20.523

您可以使用 WebClient 发送图像。假设您的 Silverlight 应用程序中有一个字节数组中的图像：

```
byte[] image = ... get the image from your webcam
var client = new WebClient();
var uri = new Uri("http://example.com/photos/upload");
client.OpenWriteCompleted += (sender, e) =>
{
    var buffer = (byte[])e.UserState;
    e.Result.Write(buffer, 0, buffer.Length);
    e.Result.Close();
};
client.OpenWriteAsync(uri, "POST", image); 
```

在 MVC 方面：

```
[HttpPost]
public ActionResult Upload()
{
    byte[] image = new byte[Request.InputStream.Length];
    Request.InputStream.Read(image, 0, image.Length);
    // TODO: do something with the uploaded image here ...
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-19T23:41:19.050

感谢您的答复。这正是我一直在寻找的，但是我遇到了问题。Silverlight 将网络摄像头快照作为 WriteableBitmap 类型提供给我。然后我尝试将其转换为 byte[] 数组，然后再将其发送到 MVC。它已成功保存到数据库，但是当我尝试将其从数据库中拉出并显示时，它似乎不是有效的图像。我的转换代码是否存在问题？或者也许我可以将它作为图像类型发送，或者我只能通过这样的 http 帖子发送字节 [] 数组？

**在我的 Silverlight 应用程序中：**

```
 private void SendImage()
    {
        var client = new WebClient();
        var uri = new Uri("http://localhost:4600/GuestBadge/GetCameraImage");
        client.OpenWriteCompleted += (sender, e) =>
        {
            var buffer = (byte[])e.UserState;
            e.Result.Write(buffer, 0, buffer.Length);
            e.Result.Close();
        };
        client.OpenWriteAsync(uri, "POST", ToByteArray(SnapShot));
    }

    public static byte[] ToByteArray(WriteableBitmap bmp)
    {
        // Init buffer
        int w = bmp.PixelWidth;
        int h = bmp.PixelHeight;
        int[] p = bmp.Pixels;
        int len = p.Length;
        byte[] result = new byte[4 * w * h];

        // Copy pixels to buffer
        for (int i = 0, j = 0; i < len; i++, j += 4)
        {
            int color = p[i];
            result[j + 0] = (byte)(color >> 24); // A
            result[j + 1] = (byte)(color >> 16); // R
            result[j + 2] = (byte)(color >> 8);  // G
            result[j + 3] = (byte)(color);       // B
        }

        return result;
    } 
```

**在我的控制器中：**

```
 [HttpPost]
    public ActionResult GetCameraImage()
    {
        byte[] image = new byte[Request.InputStream.Length];
        Request.InputStream.Read(image, 0, image.Length);
        var getPerson = (from a in db.Persons where a.PersonID == 3 select a).FirstOrDefault();
        getPerson.Picture = image;
        db.SaveChanges();
        return null;
    } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-20T18:00:33.890

我最终使用 FJCore [http://code.google.com/p/fjcore/](http://code.google.com/p/fjcore/)将我的 WriteableBitmap 编码为 JPEG，然后使用我在此问题中找到的代码将其转换为 BASE64 [Using FJCore to encode Silverlight WriteableBitmap](https://stackoverflow.com/questions/1139200/using-fjcore-to-encode-silverlight-writeablebitmap)谢谢！。然后依次将其转换为 byte[] 数组并使用您的代码将其发送到 MVC，现在它工作得很好。我对所有这些东西都很陌生，以前对编码过程还不太了解。下面是我用于此的代码。再次感谢您的帮助！

```
 private static string GetBase64Jpg(WriteableBitmap bitmap)
    {
        int width = bitmap.PixelWidth;
        int height = bitmap.PixelHeight;
        int bands = 3;
        byte[][,] raster = new byte[bands][,];

        for (int i = 0; i < bands; i++)
        {
            raster[i] = new byte[width, height];
        }

        for (int row = 0; row < height; row++)
        {
            for (int column = 0; column < width; column++)
            {
                int pixel = bitmap.Pixels[width * row + column];
                raster[0][column, row] = (byte)(pixel >> 16);
                raster[1][column, row] = (byte)(pixel >> 8);
                raster[2][column, row] = (byte)pixel;
            }
        }

        ColorModel model = new ColorModel { colorspace = ColorSpace.RGB };
        FluxJpeg.Core.Image img = new FluxJpeg.Core.Image(model, raster);
        MemoryStream stream = new MemoryStream();
        JpegEncoder encoder = new JpegEncoder(img, 90, stream);
        encoder.Encode();

        stream.Seek(0, SeekOrigin.Begin);
        byte[] binaryData = new Byte[stream.Length];
        long bytesRead = stream.Read(binaryData, 0, (int)stream.Length);

        string base64String =
                System.Convert.ToBase64String(binaryData,
                                              0,
                                              binaryData.Length);

        return base64String;
    }

    private void SendImage()
    {
        var client = new WebClient();
        var uri = new Uri("http://localhost:4600/GuestBadge/GetCameraImage");
        client.OpenWriteCompleted += (sender, e) =>
        {
            var buffer = (byte[])e.UserState;
            e.Result.Write(buffer, 0, buffer.Length);
            e.Result.Close();
        };
        client.OpenWriteAsync(uri, "POST", Convert.FromBase64String(GetBase64Jpg(SnapShot)));
    } 
```

# asp.net - 带有 .NET 4.0 的旧版 ActiveX 控件 - Microsoft POS

> ID：12482878
> 
> 赞同：0
> 
> 时间：2012-09-18T18:30:57.443
> 
> 标签：asp.net, .net, activex, point-of-sale

我们有一个调用[Microsoft Point of Sale for .NET](http://www.microsoft.com/en-us/download/details.aspx?id=5355)的 ActiveX 控件。但是，POS 不适用于 .NET 4.0，因为 CAS（代码访问安全）对于 .NET 4.0 来说已经过时了。

我找到的最好的资源是在这个[LavaBlast 博客](http://blog.lavablast.com/post/2011/06/06/Using-Microsoft-POS-for-NET-in-2011.aspx)上，但是我一直无法让它工作。

我应该在什么时候设置这个？我认为 ActiveX 控件没有与此设置相关联的配置文件，这不是用户计算机上的设置，而不是网络服务器的 web.config 文件上的设置吗？

这是代码和具体错误：

```
PosExplorer explorer = new PosExplorer(); 
```

> 此方法显式使用已被 .NET Framework 废弃的 CAS 策略。为了出于兼容性原因启用 CAS 策略，请使用 NetFx40_LegacySecurityPolicy 配置开关。请参阅[http://go.microsoft.com/fwlink/?LinkID=155570](http://go.microsoft.com/fwlink/?LinkID=155570)

# osx-lion - 需要 Applescript 每隔 x 秒重复一次

> ID：12482883
> 
> 赞同：0
> 
> 时间：2012-09-18T18:31:08.430
> 
> 标签：osx-lion, applescript

到目前为止，这是我的脚本：

```
property timeDelay : 5

on appOpen(appName)
    tell application "System Events" to set appNameIsRunning to exists (processes where name is appName)
    return appNameIsRunning
end appOpen

if appOpen("iChat") then
    tell application "iChat"
        repeat with theService in services
            if connection status of theService = disconnected or connection status of theService = disconnecting then
                log in of service (name of theService)
            end if
        end repeat
    end tell
end if 
```

基本上，如果您的任何 iChat/Messages 帐户已注销，它会检查一次。如果是，请登录。它有效。

但是，我希望这是一个“保持开放”的应用程序。过去我使用过该模式

```
on idle
    -- do stuff
end idle 
```

..但由于某种原因，当我尝试编译时它出错了。

![我得到的错误](../Images/e4d54a8feb7e4dedb29b9c9958237ee9.png) 知道为什么会发生这种情况吗？

编辑：

好的 - 仍然不确定为什么会发生这种情况，但我可以通过简单地制作一个新脚本来解决这个问题。我不知道为什么会出现这个错误，但现在看起来很好。谢谢你们的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-18T20:28:38.963

这适用于我 10.6.8

```
property timeDelay : 5

on appOpen(appName)
    tell application "System Events" to set appNameIsRunning to exists process appName
    return appNameIsRunning
end appOpen

on idle
    if appOpen("iChat") then
        tell application "iChat"
            repeat with theService in services
                if connection status of theService = disconnected or connection status of theService = disconnecting then
                    tell service (name of theService) to log in
                end if
            end repeat
        end tell
    end if
    return timeDelay
end idle 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-18T19:03:34.993

这没有意义...

```
tell application "System Events" to set appNameIsRunning to exists (processes where name is appName) 
```

你要这个...

```
tell application "System Events" to set appNameIsRunning to exists process appName 
```

原因是“名称为 appName 的进程”将返回一个列表（无论它有一个项目还是多个项目，它仍然是一个列表）并且检查列表的“存在”是没有意义的。

我不确定这个错误，但我希望能解决你的问题。

# c++ - 从 videoInput 直接显示 YUY2 像素输出

> ID：12482884
> 
> 赞同：2
> 
> 时间：2012-09-18T18:31:13.630
> 
> 标签：c++, directshow, yuv, fourcc

我正在使用[videoInput](http://www.muonics.net/school/spring05/videoInput/)与 DirectShow 交互并从我的网络摄像头获取像素数据。

从[我问过](https://stackoverflow.com/questions/12396156/convert-yuy2-to-yv12/12396392)的另一个问题中，人们建议像素格式只是按照 Y、U 和 V 通道的顺序附加的数组。

[FourCC 的网站](http://www.fourcc.org/yuv.php#YUY2)建议像素格式实际上并不遵循这种模式，而是 |Y0|U0|Y1|V0|Y2|U0|Y3|V0|

我正在研究一些将 YUY2 输入图像转换为 RGB 和 YV12 的函数，在几乎没有成功之后，我认为这可能是我如何解释初始 YUY2 图像数据的问题。

我是否正确假设像素数据应采用 FourCC 网站的格式，或者 Y、U 和 V 通道是否是已集中的单独数组（因此数据按通道顺序排列，例如：YYYYUUVV？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-21T09:38:22.070

在 YUY2 中，每一行都是一个 4 字节的数据包序列：YUYV 描述了两个相邻的像素。在 YV12 中，有 3 个单独的平面：第一个 Y 大小为 width*height，然后是 V，然后是 U，大小均为 width/2 * height/2。

# iphone - UITableView 不一致

> ID：12482885
> 
> 赞同：1
> 
> 时间：2012-09-18T18:31:14.390
> 
> 标签：iphone, uitableview

我有一个加载不一致的 UITableView。

1.  当它第一次加载时，我上下滚动表格，它工作得很好
2.  在该视图中，我点击主页按钮，然后立即触摸应用程序以重新启动它
3.  视图加载和显示加载正常的表的四个单元格
4.  然后我向下滚动 UITableView 并且单元格开始消失，我的日志显示部分数组为空
5.  然后我回到家并立即重新启动应用程序，可见的表格的四个单元格完全恢复并且看起来正确。
6.  然后我再次向下滚动，它们消失了，日志再次显示它们为空。

为什么每次启动时都会恢复 UITableView 但使表为空的数组？为什么进入后台会使tableArray为空？有人可以帮我看看在哪里看这个进展吗？

# xulrunner - 从 XULRunner 浏览器标签打开 CSV 文件

> ID：12482889
> 
> 赞同：0
> 
> 时间：2012-09-18T18:31:29.710
> 
> 标签：xulrunner

我有一个 XULRunner 应用程序。它大部分都在工作，但是我有一个问题。应用程序中有一些以 HTML 表单形式实现的报告。用户的选项之一是输出为 CSV 格式。在 Firefox 中，用户被要求保存文件或打开它（在 Excel 或其他中）。在 XULRunner 应用程序中，我得到一个弹出窗口，其中包含：

> XML 解析错误：未定义实体
> 位置：chrome://mozapps/content/downloads/unknownContentType.xul
> 第 30 行，第 18 列：&intro.label;

这似乎与[此处](https://developer.mozilla.org/en-US/docs/XULRunner_tips)讨论的品牌有关：

我想我已经按照说明进行了。它们在某些地方有点模糊。这是我所拥有的：

`chrome/chrome.manifest`包含：

```
locale branding en-US chrome/locale/branding/
content branding chrome/branding/ 
```

`chrome/branding/`包含这些文件：`about.png`, `icon48.png`,`icon64.png`

`chrome/locale/branding/brand.dtd`包含：

```
<!ENTITY  brandShortName        "ArcaMax EC">
<!ENTITY  brandFullName         "ArcaMax EC">
<!ENTITY  vendorShortName       "ArcaMax">
<!ENTITY  trademarkInfo.part1   " "> 
```

`chrome/locale/branding/brand.properties`包含：

```
brandShortName=EC4
brandFullName=ArcaMax EC4
vendorShortName=ArcaMax

homePageSingleStartMain=Firefox Start, a fast home page with built-in search
homePageImport=Import your home page from %S

homePageMigrationPageTitle=Home Page Selection
homePageMigrationDescription=Please select the home page you wish to use:

syncBrandShortName=Sync 
```

`chrome/locale/branding/unknownContentType.dtd`包含：

```
<!ENTITY  intro.label                 "You have chosen to open">
<!ENTITY  from.label                  "from:">
<!ENTITY  actionQuestion.label        "What should &brandShortName; do with this file?">

<!ENTITY  openWith.label              "Open with">
<!ENTITY  openWith.accesskey          "o">
<!ENTITY  other.label                 "Other…">

<!ENTITY  saveFile.label              "Save File">
<!ENTITY  saveFile.accesskey          "s">

<!ENTITY  rememberChoice.label        "Do this automatically for files like this from now on.">
<!ENTITY  rememberChoice.accesskey    "a">

<!ENTITY  whichIsA.label              "which is a:">

<!ENTITY  chooseHandlerMac.label      "Choose…">
<!ENTITY  chooseHandlerMac.accesskey  "C">
<!ENTITY  chooseHandler.label         "Browse…">
<!ENTITY  chooseHandler.accesskey     "B">

<!ENTITY  unknownPromptText.label     "Would you like to save this file?"> 
```

添加`chrome/locale/branding/unknownContentType.dtd`是我的猜测。我在 firefox 源代码树中找到了该文件。

有任何想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-21T06:46:15.950

看起来您的猜测是正确的，并且问题与品牌有关。`unknownContentType.xul`加载三个语言环境文件：

```
<!DOCTYPE dialog [
  <!ENTITY % brandDTD SYSTEM "chrome://branding/locale/brand.dtd" >
  %brandDTD;
  <!ENTITY % uctDTD SYSTEM "chrome://mozapps/locale/downloads/unknownContentType.dtd" >
  %uctDTD;
  <!ENTITY % scDTD SYSTEM "chrome://mozapps/locale/downloads/settingsChange.dtd" >
  %scDTD;
]> 
```

`brand.dtd`是唯一不属于 XULRunner 的，它必须由应用程序提供。但是，加载它显然会失败，并且还会阻止加载其他 DTD 文件（XULRunner 抱怨对话框中的第一个实体）。

Now you don't need to put `unknownContentType.dtd` into your extension, it is already part of XULRunner. Other than that you've done everything correctly. However, the paths in `chrome.manifest` should be relative to the manifest, not to the application root. So the path probably should be `locale/branding/` rather than `chrome/locale/branding/`. You should open `chrome://branding/locale/brand.dtd` in your application to verify that it has been set up correctly.

The other common issue: DTD files have to be saved in UTF-8 format **without** a [byte order mark](http://en.wikipedia.org/wiki/Byte_order_mark) (BOM). If your editor saves a BOM by default then you need to reconfigure it. XULRunner will consider files starting with a BOM invalid and ignore them.

# c++ - 当同一个项目涉及多个源文件和头文件时，如何在 Visual Studio 中编译和运行项目？

> ID：12482890
> 
> 赞同：-3
> 
> 时间：2012-09-18T18:31:34.420
> 
> 标签：c++, visual-studio-2010

我主要使用 linux env，这是 Visual Studio 的新手。（如果您在 Linux 中，您将使用 make 实用程序...）当您在同一个项目中涉及多个源文件和头文件时，如何在 Visual Studio 中编译和运行项目？我有 main.cpp，以及一些其他源文件和相应的头文件，当我构建项目时，虽然项目编译得很好并且“优雅地退出”，但我看不到输出。如何告诉 Visual Studio 这些文件是项目的一部分？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-19T14:50:58.087

要做到这一点：

选择项目 -->

1.  添加现有项目....
2.  您应该在保存项目/解决方案的同一目录中查找。突出显示 .h 和 .cpp 文件：date.cpp、date.h 和 main.cpp
3.  选择“添加”将文件添加到项目中。

结果：在项目中添加“main.cpp”和其他文件后，它工作正常，我可以查看输出。

参考：

1 [http://www.cs.uregina.ca/Links/class-info/210/Lab1_VCIntro/]

# c# - 使用多个 ID 从列表中选择项目

> ID：12482896
> 
> 赞同：2
> 
> 时间：2012-09-18T18:32:06.107
> 
> 标签：c#, linq

目标是获取 10 部热门电影的列表。

在数据库中调用了一个表`populars`，其中包含： `moviecount`- 电影被租用的次数。 `MovieID`- 电影的 ID。

还有一个名为 Movies 的表，其中包含电影的所有数据。此表包含 MovieID 的字段。这些表不相关，不应在它们之间链接。

我拿了10部最受欢迎电影的id

```
var TopTen = videoLibDB.populars
                 .Take(10)
                 .OrderBy(e => e.movieCount)
                 .Select(e => new { e.MovieID }); 
```

没关系，但是如何使用流行表的 10 个 MovieID（上面代码的前十名）从“电影”表中创建 10 部最佳电影的列表？

如果是一个 id，我可以将流行表中的 moiveid 与电影表中的 movieid 进行比较。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-18T18:43:54.370

如果您正确设置了关系，@JimWooley 上面的答案是最简单/最好的，这个查询是为了以防您没有这种可能性。

您的 linq 查询中存在一些问题，您正在随机选取 10 部电影并仅对它们进行排名，最不受欢迎的电影排在第一位。此查询修复了该问题并将其与电影表连接以获取最受欢迎的电影；

```
var query = 
    from movie in videoLibDB.movies
    where
        videoLibDB.populars
        .OrderByDescending(x => x.movieCount)   // Sort all, most popular first
        .Take(10)                               // but only keep the 10 first
        .Select(x => x.MovieID)                 // Take their MovieID 
        .Contains(movie.MovieID)                // and get movie data on them
    select movie; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-18T18:36:56.010

首先，请确保在拍摄之前进行排序（OrderBy）。在 LINQ to SQL/EF 中，这可能并不重要，但使用 LINQ to Objects 将导致仅评估前十行。

其次，您需要将热门电影与电影连接起来，或者使用表格之间的关联。假设您有一个关联设置，您应该能够执行以下操作：

```
var TopTen = videoLibDB.populars
             .OrderByDescending(e => e.movieCount)
             .Take(10)
             .Select(e => new { e.MovieID, e.Movie.MovieName}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-18T18:43:35.193

我不明白为什么你有这样的限制，表格可能没有链接......但是嘿......

```
var TopTen = videoLibDB.populars
       .OrderBy(e => e.movieCount)
       .Take(10)
       .Select(e => e.MovieID).ToArray();

var YourActualMovies = videoLibDB.movies
       .Where(x=>TopTen.Conatins(x.MovieID))
       .Select(...whatever you want...) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-18T18:36:26.900

试试这个，它应该生成一个`IN`子句。

```
var results = from q in videoLibDB.movies
              where videoLibDB.populars
                    .OrderBy(e => e.movieCount)
                    .Take(10)
                    .Select(e => e.MovieID)
                    .ToArray()
                    .Contains(q.MovieID)
              select q 
```

这[是一篇](http://wekeroad.com/2008/02/27/creating-in-queries-with-linq-to-sql/)更深入的文章。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-18T18:37:49.197

使用 .Contains

首先创建一个包含 ID 的数组......

```
var ids = new[] { 1,2,3,4,5,6,7,8,9,10 }; 
```

然后使用 .Contains

```
var TopTen = videoLibDB.populars
    .Where(e => ids.Contains(e.MovieID)
    .OrderBy(e => e.movieCount)
    .Select(e => new { e.MovieID }); 
```

相当于 T-SQL 中的 IN 语句

# javascript - 使用外部 JS 文件填充 DropDownList

> ID：12482902
> 
> 赞同：0
> 
> 时间：2012-09-18T18:32:32.017
> 
> 标签：javascript, asp.net, drop-down-menu

我有一个包含数组的外部 JS 文件

```
ListOfStudents = function(){
return ['Jane', 'Mark', 'Sarah'] } 
```

我需要将此数组添加到 ASP.NET 中的 DropDownList 中。这是我所拥有的，但它不起作用。您的帮助将不胜感激。

```
 <script language="javascript" src="myJSFile.js"></script>

    <asp:DropDownList runat="server" onchange="javascript:ListOfStdents();" ></asp:DropDownList> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-18T18:35:02.473

您可以使用 UpdatePanel，并让它在服务器级别填充。话虽这么说，要在 javascript 中执行此操作，您需要做的是创建一个要添加到项目的选项。

见：[http ://chiragrdarji.wordpress.com/2007/06/06/add-items-in-drop-down-list-or-list-box-using-javascript/](http://chiragrdarji.wordpress.com/2007/06/06/add-items-in-drop-down-list-or-list-box-using-javascript/)

# .net - 使用调度程序计时器 + 使用 VB.NET 的秒表执行时获得不正确的计时

> ID：12482903
> 
> 赞同：2
> 
> 时间：2012-09-18T18:32:40.693
> 
> 标签：.net, vb.net, visual-studio-2012, stopwatch, dispatchertimer

在这里，我将时间变量初始化为 0，并用于`StopWatch`计算毫秒数并`DispatcherTimer`更新 UI

```
Imports System.Threading
Imports Windows.UI.Xaml

Dim dt As DispatcherTimer = New DispatcherTimer
Dim dd As Integer = 0
Dim mm As Integer = 0
Dim hh As Integer = 0
Dim ss As Integer = 0
Dim ms As Integer = 0
Dim stopwatch As System.Diagnostics.Stopwatch = New System.Diagnostics.Stopwatch

Private Sub ontimertick()
        ms = stopwatch.ElapsedMilliseconds
        ss = ms / 1000
        ms = ms Mod 1000
        mm = ss / 60
        ss = ss Mod 60
        hh = mm / 60
        mm = mm Mod 60
        dd = hh / 24
        hh = hh Mod 24
        MicroSeconds.Text = ms.ToString("00")
        Seconds.Text = ss.ToString("00")
        Minutes.Text = mm.ToString("00")
        Hours.Text = hh.ToString("00")

    End Sub

Private Sub StartButton_Click(sender As Object, e As RoutedEventArgs) Handles StartButton.Click

dt.Interval = New TimeSpan(0, 0, 0, 0, 100)
AddHandler dt.Tick, AddressOf ontimertick
stopwatch.Start()
dt.Start()

End Sub 
```

问题是所有变量的第一个实例的增量时间是我预期的实际时间的 1/2。

例如 seconds.text 在第 500 毫秒更新为 1，下一个在 1000 毫秒后更新

同样，Minutes.text 在第 30 秒后更新为 1，然后在 60 秒后正常递增

与小时和天相同，但仅在第一个实例之后，它在正常间隔后递增

那么任何人都可以帮我找出逻辑错误吗？

* * *

我想知道如何反转过程并倒计时？

你们能帮我解决我可以实现的想法/逻辑吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-18T18:36:39.947

我认为你做的工作比你需要的要多。该`Stopwatch.Elapsed`属性返回 a `TimeSpan`，其中包含已用时间的所有各个部分。

你`ontimertick()`可能看起来像这样：

```
Private Sub ontimertick()
    TimeSpan e = stopwatch.Elapsed
    MicroSeconds.Text = e.Milliseconds.ToString("00")
    Seconds.Text = e.Seconds.ToString("00")
    Minutes.Text = e.Minutes.ToString("00")
    Hours.Text = e.Hours.ToString("00")
End Sub 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-19T01:01:50.257

```
 ss = ms / 1000 
```

`/`运算符执行浮点除法，产生 Double 结果。然后您将其分配给一个整数，这将**舍**入该值而不是像您希望的那样**截断它。**所以 500/1000 变成 1。

解决方法是使用整数除法运算符：

```
 ss = ms \ 1000 
```

也适用于其他部门。

# multithreading - 使用 Goroutine 实际上需要更长的时间来执行

> ID：12482910
> 
> 赞同：4
> 
> 时间：2012-09-18T18:33:09.853
> 
> 标签：multithreading, go, coroutine

我确定我做错了什么，我有一个 Go 程序，它解析 OBJ 格式的 3D 模型并输出一个 json 对象。当我在不添加 goroutine 的情况下运行它时，我得到以下输出：

```
$ go run objParser.go ak47.obj extincteur_obj.obj 
--Creating ak47.json3d from ak47.obj
--Exported 85772 faces with 89088 verticies
--Creating extincteur_obj.json3d from extincteur_obj.obj
--Exported 150316 faces with 151425 verticies
Parsed 2 files in 8.4963s 
```

然后我添加了 goroutines，我得到了这个输出：

```
$ go run objParser.go ak47.obj extincteur_obj.obj 
--Creating ak47.json3d from ak47.obj
--Creating extincteur_obj.json3d from extincteur_obj.obj
--Exported 85772 faces with 89088 verticies
--Exported 150316 faces with 151425 verticies
Parsed 2 files in 10.23137s 
```

考虑到解析的交错，它的打印顺序是我所期望的，但我不知道为什么它实际上需要更长的时间！代码很长，我剪掉了我能做的，但它仍然很长，对此感到抱歉！

```
package main

func parseFile(name string, finished chan int) {
    var Verts []*Vertex
    var Texs []*TexCoord
    var Faces []*Face

    var objFile, mtlFile, jsonFile *os.File
    var parseMaterial bool

    // Set up files and i/o
    inName := name
    outName := strings.Replace(inName, ".obj", ".json3d", -1)
    parseMaterial = false

    fmt.Printf("--"+FgGreen+"Creating"+Reset+" %s from %s\n", outName, inName)

    var err error
    var part []byte
    var prefix bool

    if objFile, err = os.Open(inName); err != nil {
        fmt.Println(FgRed+"!!Failed to open input file!!"+Reset)
        return
    }

    if jsonFile, err = os.Create(outName); err != nil {
        fmt.Println(FgRed+"!!Failed to create output file!!"+Reset)
        return
    }

    reader := bufio.NewReader(objFile)
    writer := bufio.NewWriter(jsonFile)
    buffer := bytes.NewBuffer(make([]byte, 1024))

    // Read the file in and parse out what we need
    for {
        if part, prefix, err = reader.ReadLine(); err != nil {
            break
        }

        buffer.Write(part)
        if !prefix {
            line := buffer.String()
            if(strings.Contains(line, "v ")) {
                Verts = append(Verts, parseVertex(line))
            } else if(strings.Contains(line, "vt ")) {
                Texs = append(Texs, parseTexCoord(line))
            } else if(strings.Contains(line, "f ")) {
                Faces = append(Faces, parseFace(line, Verts, Texs))
            } else if(strings.Contains(line, "mtllib ")) {
                mtlName := strings.Split(line, " ")[1]
                if mtlFile, err = os.Open(mtlName); err != nil {
                    fmt.Printf("--"+FgRed+"Failed to find material file: %s\n"+Reset, mtlName)
                    parseMaterial = false
                } else {
                    parseMaterial = true
                }
            }
            buffer.Reset()
        }
    }

    if err == io.EOF {
        err = nil
    }

    objFile.Close()

    // Write out the data
    writer.WriteString("{\"obj\":[\n");

    // Write out the verts
    writer.WriteString("{\"vrt\":[\n");
    for i, vert := range Verts {
        writer.WriteString(vert.String())
        if i < len(Verts) - 1 { writer.WriteString(",") }
        writer.WriteString("\n")
    }

    // Write out the faces
    writer.WriteString("],\"fac\":[\n")
    for i, face := range Faces {
        writer.WriteString(face.String(true))
        if i < len(Faces) - 1 { writer.WriteString(",") }
        writer.WriteString("\n")
    }

    // Write out the normals
    writer.WriteString("],\"nrm\":[")
    for i, face := range Faces {

        writer.WriteString("[")
        for j, vert := range face.verts {
            length := math.Sqrt((vert.X * vert.X) + (vert.Y * vert.Y) + (vert.Z * vert.Z))
            x := vert.X / length
            y := vert.Y / length
            z := vert.Z / length
            normal := fmt.Sprintf("[%f,%f,%f]", x, y, z)
            writer.WriteString(normal)
            if(j < len(face.verts)-1) { writer.WriteString(",") }
        }
        writer.WriteString("]")

        //writer.WriteString("[0, 1, 0]")
        if i < len(Faces) - 1 { writer.WriteString(",") }
        writer.WriteString("\n")
    }

    // Write out the tex coords
    writer.WriteString("],\"tex\":[")
    for i, face := range Faces {
        writer.WriteString("[")
        writer.WriteString(face.tex[0].String())
        writer.WriteString(",")
        writer.WriteString(face.tex[1].String())
        writer.WriteString(",")
        writer.WriteString(face.tex[2].String())
        writer.WriteString("]")
        if i < len(Faces) - 1 { writer.WriteString(",") }
        writer.WriteString("\n")
    }

    // Close obj block
    writer.WriteString("]}]");

    if parseMaterial {
        writer.WriteString(",mat:[{");
        reader := bufio.NewReader(mtlFile)

        // Read the file in and parse out what we need
        for {
            if part, prefix, err = reader.ReadLine(); err != nil {
                break
            }

            buffer.Write(part)
            if !prefix {
                line := buffer.String()
                if(strings.Contains(line, "map_Kd ")) {
                    parts := strings.Split(line, " ")
                    entry := fmt.Sprintf("\"t\":\"%s\",", parts[1])
                    writer.WriteString(entry)

                    width, height := 256, 256
                    var imageFile *os.File
                    if imageFile, err = os.Open(parts[1]); err != nil {
                        fmt.Printf("--"+FgRed+"Failed to find %s, defaulting to 256x256"+Reset+"\n", parts[1])
                        return
                    } else {
                        var config image.Config
                        imageReader := bufio.NewReader(imageFile)
                        config, err = jpeg.DecodeConfig(imageReader)
                        width, height = config.Width, config.Height
                        fmt.Printf("--"+FgGreen+"Verifing"+Reset+" that %s is %dpx x %dpx\n", parts[1], width, height)
                    }

                    size := fmt.Sprintf("\"w\":%d,\"h\":%d,", width, height)
                    writer.WriteString(size)

                } else if(strings.Contains(line, "Kd ")) {
                    parts := strings.Split(line, " ")
                    entry := fmt.Sprintf("\"r\":%s, \"g\":%s, \"b\":%s,", parts[1], parts[2], parts[3])
                    writer.WriteString(entry)
                }
                buffer.Reset()
            }
        }

        if err == io.EOF {
            err = nil
        }

        writer.WriteString("\"res\":100,\"uv\":true}]");
    }

    // Close json
    writer.WriteString("}");
    writer.Flush()
    jsonFile.Close()

    fmt.Printf("--"+FgGreen+"Exported"+Reset+" %d faces with %d verticies\n", len(Faces), len(Verts))

    finished <- -1
}

func main(){
    // Verify we were called correctly
    if len(os.Args) < 2 {
        fmt.Println("Usage: go run objParser.go <OBJ File>");
        return
    }

    files := len(os.Args)
    finished := make(chan int)

    now := time.Now()

    for i := 1; i < files; i++ {
        go parseFile(os.Args[i], finished)
    }

    for i := 1; i < files; i++ {
        <- finished
    }

    fmt.Printf("Parsed %d files in %s\n", files-1, time.Since(now))
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-18T18:47:55.037

您应该将 GOMAXPROCS 环境变量设置为最大可用处理器数。或者在执行时使用函数[GOMAXPROCS](http://golang.org/pkg/runtime/#GOMAXPROCS)。

# c++ - 使用 C 库的面向对象应用程序的方法

> ID：12482912
> 
> 赞同：0
> 
> 时间：2012-09-18T18:33:13.020
> 
> 标签：c++, c, object, coding-style, static-libraries

我的应用程序是使用 OpenGL 用 C++ 编写的图形应用程序。我需要使用一些库，如 GLFW、GLEW 和 GLM。*但是您不需要了解这些库或 OpenGL 来回答这个问题。*关键是所有这些库都是用 C 语言编写的，因此没有面向对象。

我因此多次遇到麻烦。例如，目前我必须传递一个函数，特别是我的窗口的调整大小事件，作为 GLEW 的参数。它需要一个静态函数，因为 C 中没有类。并揭示了我无法修改此函数中的任何类成员的问题。（而且我无法处理它以提供指向该类的全局指针......）

因为我想保持面向对象，所以最近我不得不多次重构我的代码。我现在为此感到难过。

**那么，是否有任何方法或指南可以使用没有面向对象支持的库来处理此类面向对象的项目？**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-18T18:46:16.457

很多时候，C 库允许您传入上下文指针/引用常量，通常类型为`void *`或`const void *`. 然后将您的回调传递给此参数。这是为了让您将状态线程化到回调。您可以使用它来传递您希望使用的对象。

我已经看到了通过声明一个静态成员函数，使其成为回调的目标，然后从那里反弹到适当的成员函数来完成的，例如：

```
/*static*/ int Class::_callback(void *ctx, int callback_arg) {
    Class *me = (Class *)ctx;
    return me->callback(callback_arg);
}

int Class::callback(int callback_arg) {
    return this->fCount;
} 
```

# asp.net - 如何在没有 postpack ASP.net 的情况下更新 updatepanel

> ID：12482913
> 
> 赞同：1
> 
> 时间：2012-09-18T18:33:14.433
> 
> 标签：asp.net, .net, vb.net, webforms

我在 updatePanel 中有一个网格视图，我需要每隔一段时间更新一次

到目前为止我在更新时发现的`updatepanel`是：

```
 <asp:UpdatePanel ID="UpdatePanel2" runat="server" OnLoad="Button1_Click">
        <ContentTemplate>
            <fieldset>
            <legend>UpdatePanel</legend>
            <asp:Label ID="Label2" runat="server" Text="Panel created.">
             </asp:Label>
            <asp:Button ID="Button1" runat="server"   
           OnClientClick="__doPostBack('UpdatePanel2', '');" Text="Button" />
            </fieldset>
        </ContentTemplate>
    </asp:UpdatePanel> 
```

和这个子

```
 Protected Sub Button1_Click(ByVal sender As Object, ByVal e As System.EventArgs)
    Label2.Text = "Refreshed at " & _
        DateTime.Now.ToString()
End Sub 
```

虽然这工作正常并更新面板但它`postback`是整个页面，你可以告诉你什么时候看到所有图像重新加载到另一个面板中，我计划每秒更新一次这个面板

**问题**是如何在`UpdatePanel2`不影响回发的其他面板的情况下进行更新

**编辑**

*另一个问题*是否有任何东西在服务器端运行回发？

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-18T18:35:25.407

从 NET 3.5 开始，有[Web.UI.Timer](http://msdn.microsoft.com/en-us/library/system.web.ui.timer.aspx)控件：

> 以定义的时间间隔执行异步或同步网页回发。

它能够与[UpdatePanels](http://msdn.microsoft.com/en-us/library/bb386454%28v=vs.100%29.aspx)一起使用，确保数据（例如 ViewState 和更新的控件值）不会丢失，并且“只是另一个 WebForm 控件”。但是，计时器仍然*必须*导致 [部分] 回发通过页面生命周期并再次重新绑定网格。

根据具体的用例，最好使用*真正*的AJAX 方法来最小化页面生命周期和数据大小开销。（Telerik、DevExpress 和其他第 3 方库支持其 Grid 控件的“轻量级回调”。更轻量级的变体可能包括 jqGrid。）

# php - 有没有办法让 HTML 页面包含 php，但没有 .php 扩展名？我想“包含”我的标题

> ID：12482914
> 
> 赞同：1
> 
> 时间：2012-09-18T18:33:25.640
> 
> 标签：php

有些页面似乎没有 .php 扩展名，但其中包含服务器端内容。还是我完全错了？

基本上，我希望为我的页眉和页脚包含语句，而不必将更改复制并粘贴到每个 HTML 文档中，而是更新一个。我可以在不制作页面 .php 的情况下执行此操作吗？

包含这些的最佳方式是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-18T18:34:56.883

它不需要 .php 结尾，只需包含它：)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-18T18:35:04.827

是的，让您的网络服务器将您的 HTML 文件解析为 PHP 脚本，然后您就可以`<?php include 'whatever.php';`从 .html 文件中添加。

阿帕奇的例子：

```
AddType application/x-httpd-php .html 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-18T18:36:22.517

为什么不使用.php？只需像这样创建每个页面：

```
<?php
    include 'header.php';

    // your code

    include 'footer.php';
?> 
```

And create a header.php for the top part of your layout and footer.php for the bottom part. You could also look at a template engine like [smarty](http://www.smarty.net/).

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-18T18:39:22.513

You could map the file extension html to be executed as php in a `.htaccess` file in apache

```
AddType application/x-httpd-php .php .php4 .php3 .html .htm 
```

Maybe unsupported or different (1 and 1 hosted) on your server.

[http://httpd.apache.org/docs/2.2/mod/mod_mime.html#addtype](http://httpd.apache.org/docs/2.2/mod/mod_mime.html#addtype)

# openlaszlo - 是否可以在 OpenLaszlo 应用程序中将 while 循环连接到鼠标悬停状态？

> ID：12482915
> 
> 赞同：1
> 
> 时间：2012-09-18T18:33:27.117
> 
> 标签：openlaszlo, lzx

有没有可能做这样的事情

```
while (view.mouseover == true) {
    preform action
} 
```

只要鼠标悬停在特定视图上，我就希望重复一个动作。
（在 laszlo-user 邮件列表中询问）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-18T19:12:20.187

由于 ActionScript 和 JavaScript 都是单线程的，因此在每次循环迭代之间不可能有一个带有暂停的 while 循环。在 SWF10/11 运行时中，您需要确保每个方法或函数中的代码可以在应用程序的一帧（持续时间取决于 SWF 剪辑的帧速率）内执行。

作为一种解决方法，您可以使用计时器，这是一个示例：

```
<canvas debug="true">

    <class name="mouseoverview" extends="view">        <attribute name="timer" type="object" value="null" />
        <!-- lz.Delegate instance used by the timer -->
        <attribute name="timerdel" type="object" value="null" />
        <attribute name="timeractive" type="boolean" value="false" />
        <!-- milliseconds to pause before each call to doWhileMouseover method -->
        <attribute name="tick" type="number" value="500" />
        <handler name="onmouseover">
            Debug.info('mouseover');
            if (this.timeractive == false) {
                this.setAttribute('timeractive', true);
                this.timerdel = new lz.Delegate( this, "timerCallback" );
                this.timer = lz.Timer.addTimer( this.timerdel, this.tick );
                // When the timer is activated, do one call to the method
                // containing the loop logic. The following calls will be
                // handled by the timer and delegate.
                this.doWhileMouseover();
            }
        </handler>
        <handler name="onmouseout">
            Debug.info('mouseout');
            if (this.timeractive) {
                this.setAttribute('timeractive', false);
                lz.Timer.removeTimer(this.timerdel);
            }
        </handler>
        <method name="timerCallback" args="millis">
            if (this.timeractive) {
                lz.Timer.resetTimer(this.timerdel, this.tick);
                this.doWhileMouseover();
            }
        </method>
        <method name="doWhileMouseover">
            Debug.info("This is your virtual while loop for mouseover");
        </method>
    </class>

    <mouseoverview x="100"
          y="100"
          width="400"
          height="400"
          bgcolor="#33aaff"
          tick="250">

    </mouseoverview>

</canvas> 
```

当鼠标悬停时，使用 timerdel（lz.Delegate 的一个实例）启动一个计时器。然后直接调用doWhileMouseover()方法一次，然后重复使用定时器，只要没有onmouseout事件发生。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-18T20:07:43.190

好吧，看起来您在我测试我的解决方案以确保它正常工作时回答了您自己的问题，但这里有一个在 OpenLaszlo 4.9.0 SWF10 和 OpenLaszlo 4.9.0 DHTML 运行时下工作的替代解决方案：

```
<canvas width="1000" height="665" debug="true">

  <view id="v" bgcolor="0xcccccc" width="200" height="200">

    <!--- @param boolean mouseisover: true when the mouse is over -->
    <attribute name="mouseisover" type="boolean" value="false" />

    <!--- @keywords private -->
    <!--- @param lz.Delegate dlgt_repeat: stores the lz.Delegate object --> 
    <attribute name="dlgt_repeat" type="expression" />

    <!--
    Called when the 'onmouseover' event occurs
    -->
    <handler name="onmouseover">

      // Step 1) unregister any existing delegate 
      // mark it for garbage collection 
      // and prevent its event from triggering:

      if (this['dlgt_repeat'])
        this.dlgt_repeat.unregisterAll(); 

      // Step 2) update this.mouseisover flag:

      if (!this.mouseisover)
        this.setAttribute('mouseisover', true);

      // Step 3) create an event Delegate and call it 
      // on the next application idle event:

      var objDlgt = new lz.Delegate(this, 'doSomething');       
      this.setAttribute('dlgt_repeat', objDlgt);

      lz.Idle.callOnIdle(this.dlgt_repeat);

    </handler>

    <!--
    Called when the 'onmouseout' event occurs
    --> 
    <handler name="onmouseout">

      // Step 1) unregister any existing delegate 
      // mark it for garbage collection 
      // and prevent its event from triggering: 

      if (this['dlgt_repeat'])
        this.dlgt_repeat.unregisterAll();   

      // Step 2) Update this.mouseisover flag:

      if (this.mouseisover)
        this.setAttribute('mouseisover', false);    

    </handler>

    <!--- @keywords private -->
    <!--- 
    Called on application idle event by lz.Idle repeatedly 
    when the mouse is down.

    @param ??? objDummy: required for SWF9+ run-times for methods 
    called by delegates due to AS3 (ActionScript3 compiler 
    requirements). Just set default to null to make compiler 
    happy and ignore...
    -->
    <method name="doSomething" args="objDummy=null">
    <![CDATA[

      // Note: CDATA allows '&&' to be used in script below, 
      // alternatively omit CDATA and use '&amp;&amp;' instead
      // of '&&'

      // Step 1) Execute your code you want to run here:  

      if ($debug) Debug.debug('Do something...');

      // Step 2): If mouse is still over and the event 
      // delegate exists then schedule the event to be 
      // executed upon the next application idle state:

     if (this.mouseisover && this['dlgt_repeat'] != null)
       lz.Idle.callOnIdle(this.dlgt_repeat);

   ]]>
   </method>

    <text text="Move mouse over" />

  </view>

</canvas> 
```

# php - 解释 Opencart OOPS 代码

> ID：12482916
> 
> 赞同：0
> 
> 时间：2012-09-18T18:33:36.263
> 
> 标签：php, oop, opencart

我想为 OpenCart 开发模块，但我是 PHP 中的 OOP 新手。我很难解释 OpenCart 代码。

我知道以下语句在 PHP 中的含义，即通过 $this 访问类的方法和变量，$this 是对调用对象的引用。

```
$this->custom_function();
$this->defined_variable; 
```

但是我不明白这样的说法。`$this->config->get('config_template')`或者这个`$this->request->get['field']`等等。

各位能不能帮我理解一下。它是如何被阅读/解释的？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-18T18:45:00.103

```
$ans = $this->config->get('config_template')
// is the same as
$foo = $this->config; // accessing 'config' property
$ans = $foo->get('config_template'); // calling 'get' function on object in config var

 $ans = $this->request->get['field'];
 // is the same as
 $bar = $this->request; // accessing 'request' property
 $ans = $bar->get['field']; // accessing 'get' property (which is an array) 
```

它称为方法/属性链接，当您不想为只使用一次的对象设置变量时使用。这与访问多维数组相同。例如，使用您编写`$arr['one']['two']['three']`的数组，如果数组是您将编写的对象`$obj->one->two->three`

请注意，开放式购物车源代码非常难看。我建议学习一些不那么复杂和晦涩的东西

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-18T18:45:26.233

```
$this->config->get('config_template') 
```

可以读作：从当前对象（$this）中，使用作为对象的属性（config）并在配置对象中调用get方法，并将值'config_template'传递给函数。

```
$this->request->get['field'] 
```

可以读作：从当前对象 ($this)，使用作为对象的属性 (request)，并从该对象使用索引为“字段”的数组 (get)。

# asp.net - Ajax 代码更快或更新面板更快地填充 asp.net 中的下拉列表

> ID：12482917
> 
> 赞同：1
> 
> 时间：2012-09-18T18:33:37.200
> 
> 标签：asp.net, ajax

我在一个表单中有 20 个 ajax 可编辑下拉菜单。每个下拉列表都相对于其他的 selectedindex 更改进行绑定。

我有很多来自数据库的记录用于绑定和一些操作。什么会表现得更好？

我应该使用此代码绑定下拉列表：

```
 var XmlHttp;
       //Creating object of XMLHTTP For AJAX Method
       function CreateXmlHttp() {
           //Creating object of XMLHTTP in IE
           try {
               XmlHttp = new ActiveXObject("Msxml2.XMLHTTP");
           }
           catch (e) {
               try {
                   XmlHttp = new ActiveXObject("Microsoft.XMLHTTP");
               }
               catch (oc) {
                   XmlHttp = null;
               }
           }
           //Creating object of XMLHTTP in Mozilla and Safari 
           if (!XmlHttp && typeof XMLHttpRequest != "undefined") {
               XmlHttp = new XMLHttpRequest();
           }
       }

       function GetAppStoreLnk(id) {               
           var txtnameid = document.getElementById(id);

           CreateXmlHttp();

           var requestUrl = "Default2.aspx?id="+txtnameid+"";

           if (XmlHttp) {
               XmlHttp.onreadystatechange = function() { getschemename(txtnameid) };
               XmlHttp.open("GET", requestUrl, true);
               XmlHttp.send(null);
           }
       }

       function getschemename(id)
       { 
           // To make sure receiving response data from server is completed
           if(XmlHttp.readyState == 4) {    
            // To make sure valid response is received from the server, 200 means response received is OK
            if(XmlHttp.status == 200) {         
                var strData = XmlHttp.responseText;
            if(strData != "") {            
                 var arrscheme = strData.split("|");
                     id.length = 0;     

                 for(i=0; i<arrscheme.length-1; i++) {
                    var strscheme = arrscheme[i];
                var arrschnm = strscheme.split("~");

                    id.options[i] = new Option();
                id.options[i].value = arrschnm[0];
                    id.options[i].text = arrschnm[1]; 
                 }      
            } else {
                    id.length = 0;
                id.options[0] = new Option(); 
                id.options[0].value = "";
                    id.options[0].text = "Scheme Name is not available";        
                }

                    document.body.style.cursor = "auto";    
            }
            else {
            id.length = 0;
            id.options[0] = new Option(); 
                    id.options[0].value = "";
            id.options[0].text = "server is not ready";
                document.body.style.cursor = "auto";        
            }
           } 
    } 
```

还是我应该去更新面板？
哪一个对我来说是更好的选择？还是有更好的解决办法？

我想要非常好的性能，因为我们的客户经常使用这个页面，我们希望确保它很快。

我正在使用vs2010。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-18T18:38:12.827

AJAX 路由会更快。 `UpdatePanel`s 使事情看起来像部分页面加载，但实际上，它返回整个页面并仅更新`UpdatePanel`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-18T18:38:29.113

UpdatePanel 不提供我们通常与 AJAX 相关的效率。您是否知道，例如，当 UpdatePanel 控件对服务器执行异步 AJAX 回调以更新其内容时，请求包含自动 ASP 发布的所有内容。NET常规，包括状态显示。

应用程序更喜欢使用对 WebMethods 或页面方法的异步调用，而不是使用 UpdatePanel。

链接：http: [//msdn.microsoft.com/fr-fr/magazine/cc163413.aspx](http://msdn.microsoft.com/fr-fr/magazine/cc163413.aspx)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-18T18:47:21.250

我同意其余的答案，邪恶`UpdatePanel`会降低页面的整体性能，因为为了工作，它必须 来回发送整个页面*ViewState以便***在每个异步帖子上执行整个页面生命周期**

使用简单的 AJAX 调用就完全不同了，调用只会获取您需要的数据，而且性能要好得多

## 然而 - 危险危险 罗宾逊博士

由于您使用的是 WebForms 并且您的意图是填充 20 `DropDownLists`，因此您可以**尝试**使用 AJAX 调用来执行此操作，您会注意到显然可以正常工作。**但是，**如果您尝试通过 javascript/jquery 添加一个值来发布您的页面，`DropDownList`则会引发异常。

这是因为 ASP.Net WebForms 默认验证发布到服务器的值，如果这些值没有在 ViewState 中注册，则会因为试图篡改页面内容而引发安全异常。

遗憾的是，您不能在控制级别禁用此选项，您必须在页面级别禁用它：

```
<%@ Page EnableEventValidation="false" .... 
```

在 WebForms 中，虽然**不建议**这样做...

# ruby-on-rails - 用两个正则表达式验证？

> ID：12482919
> 
> 赞同：0
> 
> 时间：2012-09-18T18:33:53.093
> 
> 标签：ruby-on-rails, ruby, regex

我有一个复杂的 URL，它可以有两种不同的格式：

```
http://site.com/app_id/{app_id}/user_id/{user_id} 
```

也采用以下格式：

```
site:app_id:{app_id}:user_id:{user_id} 
```

这是我到目前为止所拥有的：

```
/http:\/\/site\.com\/app_id\/[\w]+\/user_id\/[\w]+/ig 
```

我不知道如何编写正则表达式来处理第二个 URL。我尝试使用`(stuff)?`，但它似乎太乱了。最好只验证一个或另一个。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-18T18:34:59.037

使用“或”运算符，一个管道：

```
| 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-18T18:38:56.930

我会使用明确的 or 语句来确保您不会破坏一种正则表达式模式来修复另一种模式。

可能想尝试这样的事情：

```
/[http:\/\/site\.com\/app_id\/[\w]+\/user_id\/[\w]|http:\/\/site:app_id:[\w]:user_id:[\w]]/ig 
```

# matlab - Matlab - 打印二维矢量

> ID：12482930
> 
> 赞同：0
> 
> 时间：2012-09-18T18:34:44.980
> 
> 标签：matlab

我需要帮助。基本上，我有一个大数据集，我已经分成块，现在，我需要单独打印块而不是打印整个块。

这是我的代码：

```
function f = printData()

  data('FILE_NAME');
  blockeddata = blocks(data, 600, 200);
  f = blockeddata;
end 
```

我只需要分别打印每个块。任何人的想法？

这是功能：

```
function f = blocks(v, N, M)

   n = length(v);
   maxblockstart = n - N + 1;
   lastblockstart = maxblockstart - mod(maxblockstart-1 , M);

   % numblocks = (lastblockstart-1)/M + 1
   numblocks = (lastblockstart-1)/M + 1;

   %f = zeros(numblocks,N);

   for i = 1:numblocks
     for j = 1:N
       f(i,j) = v((i-1)*M+j);
     end
   end 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-18T18:56:08.133

不确定我是否理解问题，但是将 N 和 M 发送到 print() 怎么样？从外观上看，您已经拥有了该功能。您只需要修改您的打印功能以获取 N 和 M。

所以基本上，将 N 和 M 添加到 print() 并将 600 和 200 分别更改为 N 和 M。然后使用 600 和 200（或任何你喜欢的）作为输入调用 print。

希望它有所帮助：D

# wpf - 从模型创建数据库实例

> ID：12482934
> 
> 赞同：1
> 
> 时间：2012-09-18T18:34:57.450
> 
> 标签：wpf, entity-framework, mvvm, visual-studio-2012, ef-model-first

*似乎有些混乱。我创建了一个 SQL Server Compact Edition 文件，可以从服务器资源管理器中看到它。我也可以右键单击并手动添加表格。我想要做的是运行生成的 sqlce 文件以将我的模型中的所有表和列添加到 SDF。

- 背景 -

在 Visual Studio 2012 (Ultimate) 中，我使用模型设计器设计了一个模型。它创建了一个 edmx 文件。我右键单击模型并选择“从模型生成数据库...”并创建了一个 sqlce 文件。我的理解是，我应该能够以某种方式在 sdf 上执行此文件，以创建我的数据库的 SQL Server Compact Edition 实例。我没有看到右键单击执行 sql 代码的选项，另一个选项是“在解决方案资源管理器中运行 SQL 脚本”，这似乎没有意义。

[http://msdn.microsoft.com/en-us/library/yea4bc1b.aspx](http://msdn.microsoft.com/en-us/library/yea4bc1b.aspx) 它说要将 sqlce 文件拖到数据库引用中，但我不太确定它们的含义。我试图将它拖到连接 sdf 的服务器资源管理器中。

我尝试在服务器资源管理器中右键单击 sdf 以执行新 SQL 查询并粘贴 sqlce，但似乎不支持创建表。

有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-19T05:48:17.673

*从模型生成数据库...*只生成表和关系。

您需要已经创建了一个数据库，并将其放在 Database References 文件夹中。然后，您将脚本文件拖到该数据库引用中，如您提到的链接中所述。

# spring-mvc - 弹簧形式：多选的选择用法

> ID：12482935
> 
> 赞同：1
> 
> 时间：2012-09-18T18:34:58.307
> 
> 标签：spring-mvc

我想知道 spring`form:select`在以下情况下的多重工作原理：我有一个班级`UniSection`有很多学生（班级），学生可以从课程列表（班级）`Student`中选择零个或多个选定的课程（班级）`SelectedCourse``Course`

```
public class UniSection{
 private List<Student> students;
}

public class Student{
  private List<SelectedCourse> selectedCourses;
}

public class SelectedCourses{
  private String courseName;
} 
```

在我的jsp页面中，对于一个UniSection，那么先选择一个学生，然后再选择一些课程。

我的命令对象是 uniSection，如何为 selectedCourse 进行多选？

我想做这样的事情

```
<form:select multiple="true" path="???">
    <form:options items="courses" itemValue="???" itemLabel="???"/>
<form:select> 
```

其中课程是所有可用课程的列表。但是会发生什么？我认为我不能提供`path=students.selectedCourses`，因为我们需要为特定学生分配课程

我知道我需要一个 SelectedCoursePropertyEditor，但我不知道路径表达式。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-19T07:40:05.240

为了显示课程的多项选择，我认为您需要这样的东西：

```
<form:select multiple="true" path="students[i].selectedCourses">
    <form:options items="${courses}" itemValue="courseName" itemLabel="courseName"/>
<form:select> 
```

其中*i*`UniSection`是的列表中的学生，*课程*是包含所有课程的列表。当您提交此数据时，属性`Student.selectedCourses`将填充选定的行。

# actionscript-3 - 动作脚本 3 (AS3) 跟踪不起作用

> ID：12482939
> 
> 赞同：1
> 
> 时间：2012-09-18T18:35:05.203
> 
> 标签：actionscript-3, actionscript, trace

大家好，我对 Action Script 3 跟踪功能有很大的问题？

这是我的代码，它不起作用..

输出为空。

```
trace("HI"); 
```

有人可以告诉我如何修复它吗？

我试图在一些搜索引擎中找到答案，但我无法找到

我正在使用 Adob​​e Flash Cs 5.5

是的，我可以在 as3 上做点什么，但我不能在 as3 上测试

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-18T19:31:37.027

仅当您在调试模式下运行它时才会出现跟踪，而不是您简单地“运行”它。这可能是问题？我不记得当你用 F9 运行时 flash cs5.5 是如何做到的。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-18T19:44:55.800

嘿伙计们，我找到了解决方案 :) 转到输出窗口的右上角并单击列表图标，然后将过滤器设置为 Verbose。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-06-09T10:38:44.503

此外，检查**“省略跟踪语句”**是否未在“发布设置”中**选中**

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-05-17T04:08:53.787

似乎您正在发布 ( `f12`)，而您应该使用`Ctrl`+ `ENTER`(Control > Test Movie)。如果您真的在发布（在 Flash IDE 之外），输出面板将永远不会显示任何内容。

# c# - 哑剧类型胡言乱语

> ID：12482942
> 
> 赞同：1
> 
> 时间：2012-09-18T18:35:15.873
> 
> 标签：c#, mime-types, mime

为什么同一个文件扩展名有这么多 mime 类型？一个人应该如何仅根据扩展名来确定文件的 mime 类型，例如，如果有多种 mime 类型与此扩展名相关联？

```
Example:
.mp3    audio/mpeg3
.mp3    audio/x-mpeg-3
.mp3    video/mpeg
.mp3    video/x-mpeg 
```

一个人应该如何知道默认的 mime 类型？表示什么`x-`？这是 mime 类型的 linux/unix 风格吗？为什么这些都没有标准化（还）？

来源取自：[Sitepoint](http://reference.sitepoint.com/html/mime-types-full)然而，还有多个其他列表也产生类似的意大利面。

编辑：

我要求 ASP.NET 页面应提供指向 IIS 外部源目录中的一些文件的链接。在 Windows 服务器中。我不知道这些文件是什么，但我知道我无法提供文件的完整路径，因为这可能是一个安全问题。

我正在使用与此类似的代码：

```
Response.ContentType = "image/jpeg";
Response.AppendHeader("Content-Disposition","attachment; filename=SailBig.jpg");
Response.TransmitFile( '[path to file]' );
Response.End(); 
```

我将 ContentType 属性替换为实际文件的 mime 类型。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-09-10T10:42:40.383

如果您使用的是 Framework 4.5，您可以使用以下方法获取 mimemapping：

```
var mapping = System.Web.MimeMapping.GetMimeMapping("something.jpg"); 
```

如果您使用的是 Framework 4，您可以访问非公共方法来执行相同的操作，如下所示：

```
var assembly = Assembly.Load("System.Web, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b03f5f7f11d50a3a");
var assemblyType = assembly.GetType("System.Web.MimeMapping");

var getMimeMappingMethod = assemblyType.GetMethod("GetMimeMapping", BindingFlags.Static | BindingFlags.NonPublic) ??
                           assemblyType.GetMethod("GetMimeMapping", BindingFlags.Static | BindingFlags.Public);

var mapping = (string)getMimeMappingMethod.Invoke(null, new object[] { fileName }); 
```

# html - onclick 中的不同功能

> ID：12482947
> 
> 赞同：1
> 
> 时间：2012-09-18T18:35:40.037
> 
> 标签：html

我对 onclick 上这些功能之间的区别感到困惑？
哪个更好？如果它们不同，它们意味着什么。

```
 onclick =  "return func()"
     onclick =  "return func();"
     onclick =  "javascript: func()"
     onclick =  "javascript: func();"
     onclick =  "func()"
     onclick =  "func();"
     onclick =  "return true" 
```

任何解释将不胜感激。
如果还有更多，也想知道

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-18T18:43:12.340

其中一些是不同的，但有些是相同的。

从第一个开始，`onclick = "return func()"`表示执行函数，如果返回为真则执行点击动作。我的意思是，如果它在链接上并且返回为真，那么浏览器会转到链接，如果不是，那么它只是忽略点击。

第二个和第一个一样。

第三个，`onclick = "javascript: func()"`意味着只执行函数而不查看返回。它将独立于返回来处理点击动作。在链接上使用它会更改页面，因此它不会让脚本执行...

第 4、5、6 条与第 3 条相同。

第 7 个对执行没有影响，只是让元素正常运行。如果元素是链接，则浏览器会转到链接。

但是，如果您将最后一个更改为`return false`then，您可能已经猜到了，它只会忽略点击。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-18T18:43:27.677

`return func()`和之间没有区别`return func();`如果分号不存在，则将即时添加分号。显然，其他示例也是如此。

`return func()`调用`func()`和返回（“返回”部分有点复杂，但它涉及[冒泡](https://softwareengineering.stackexchange.com/questions/95899/what-does-bubbling-mean-in-this-context)，它覆盖了点击的默认行为，我相信。返回`true`告诉浏览器调用默认行为（例如，转到链接的目标） , 并返回 false 禁用默认行为。我不完全确定如果它返回其他任何东西会做什么。

`javascript:func()`（几乎）与`func()`-- 但这是一种过时的方式。不要使用这个。

`func()`与其他几乎相同，但它可能会导致一些冒泡和默认行为问题。通常，您需要指定`return true;`或`return false;`

`return true` doesn't do much of anything. It just tells the browser "do what you were already going to do." Returning false, on the other hand, would disable default behavior.

In conclusion, the first six will basically do the same thing, the seventh will just invoke the default behavior.

# javascript - Marker 中的新 Google Maps Symbol 对象使 IE 非常慢

> ID：12482950
> 
> 赞同：5
> 
> 时间：2012-09-18T18:35:57.230
> 
> 标签：javascript, internet-explorer, google-maps

我正在测试 Google Maps V3 API 的新 Symbols 对象。我已经为 400 个标记的每个“图标”属性设置了相同的符号路径和颜色。

使用 Firefox 或 Chrome 查看示例页面时，一切都加载得很快并且运行良好。

不幸的是...... Internet Explorer 的性能非常糟糕。加载时间不好，当我尝试在地图上拖动或缩放时也是如此。

这是一个简单的 javascript 示例，您可以使用它在 IE 上进行测试

```
 var map;
  function initialize() {
    var mapDiv = document.getElementById('map-canvas');
    map = new google.maps.Map(mapDiv, {
      center: new google.maps.LatLng(37.4419, -122.1419),
      zoom: 13,
      mapTypeId: google.maps.MapTypeId.ROADMAP
    });

    google.maps.event.addListenerOnce(map, 'tilesloaded', addMarkers);

  }

  function addMarkers() {
    var bounds = map.getBounds();
    var southWest = bounds.getSouthWest();
    var northEast = bounds.getNorthEast();
    var lngSpan = northEast.lng() - southWest.lng();
    var latSpan = northEast.lat() - southWest.lat();
    for (var i = 0; i < 400; i++) {
      var latLng = new google.maps.LatLng(southWest.lat() + latSpan * Math.random(),
                                          southWest.lng() + lngSpan * Math.random());
      var marker = new google.maps.Marker({
        position: latLng,
        icon:{  
            path: google.maps.SymbolPath.CIRCLE,
            fillOpacity: 1,
            strokeWeight: 0,
            scale: 4
         },
       map: map
      });
    }
  } 
```

当您将它与一些额外的属性和事件一起使用时，它会变得最糟糕！但是，如果您只是删除标记的“图标”属性，就会出现基本的 Google 标记，并且一切都像 Chrome 和 Firefox 一样快......

有没有人知道为什么在使用 Symbol 时在 IE 上会这么慢，我怎样才能加快这个过程。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-19T07:01:00.450

Google 地图上的符号图标是新[VectorIcons](https://developers.google.com/maps/documentation/javascript/overlays#VectorIcons)的一部分。这些不是位图，而是以 SVG 格式描述为矢量路径。这些基本上是带有很多点的路径，直到形状完成。

现在你有很多图标，这意味着必须绘制很多 SVG 路径。当您在不同的浏览器中看到不同的渲染速度时，您基本上是在比较浏览器的 SVG 渲染引擎 - 从您的应用程序来看，IE9 看起来比其他浏览器慢。

我认为没有一种方法可以加快速度。您可以减少显示标记的数量（例如使用聚类），直到达到可接受的渲染速度。或者您可以简单地使用位图图标。

# extjs4 - 如何使用 ExtJS 4.1 增加 VBOX 中项目之间的间距？

> ID：12482951
> 
> 赞同：8
> 
> 时间：2012-09-18T18:35:59.177
> 
> 标签：extjs4

所以我使用的是 ExtJS 4.1。我有一个包含两个项目的视口。它们正确堆叠，但我想在它们之间放置一些空间。边距似乎不起作用。

```
var required = '<span style="color:red;font-weight:bold" data-qtip="Required">*</span>';

Ext.onReady(function() {
    Ext.QuickTips.init();

    window.formPanel = Ext.widget({
        bodyPadding: '5 5 0',
        collapsible: false,
        defaultType: 'textfield',
        frame: true,
        id: 'formPanel',
        layout: 'form',
        renderTo: '',
        title: 'Spring Demo 3 (Lookup Transfer Request)',
        url: contextPath + '/users/ajax',
        width: 450,
        xtype: 'form',

        buttons: [{
            text: 'Check Status',
            scope: this,
            handler: function() {
                formPanel.getForm().submit({
                    success: function(res, req) {

                    }
                });
            }
        }],

        fieldDefaults: {
            msgTarget: 'side',
            labelWidth: 105
        },

        items: [{
            afterLabelTextTpl: required,
            allowBlank: false,
            fieldLabel: 'Username',
            name: 'username',
            value: ''
        }, {
            afterLabelTextTpl: required,
            allowBlank: false,
            fieldLabel: 'TXID',
            name: 'txid',
            value: ''
        }]
    });

    window.resultsPanel = Ext.widget({
        items: [{
            id: 'labMessage',
            margin: '0 0 0 10',
            text: 'Waiting....',
            xtype: 'label'
        }],
        title: 'Results',
        xtype: 'panel'
    });

    window.viewPort = Ext.widget({
        items: [formPanel, resultsPanel],
        layout: {
            align: 'center',
            pack: 'center',
            type: 'vbox'
        },
        margins: '10 10 10 10',
        padding: '10 10 10 10',
        renderTo: 'container',
        xtype: 'viewport'
    });
}); 
```

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-09-18T19:38:35.660

`Ext.layout.container.VBox`布局具有`padding`和配置，`defaultMargins`它们会将各自的样式应用于子组件。我不知道为什么命名不一致，但这就是文档所说的。

查看您的示例代码，您似乎将边距应用于错误的组件。如果您想要面板之间的间距，请将边距/填充设置放在面板本身而不是它们的容器上。

```
window.resultsPanel = Ext.widget({
    xtype:  "panel",
    title:  "Results",
    margin: "10 0 0 0",  // Same as CSS ordering (top, right, bottom, left)
    items:  [{
        xtype:  "label",
        id:     "labMessage",
        margin: "0 0 0 10",
        text:   "Waiting..."
    }]
}); 
```

# installanywhere - 从系统用户运行时，InstallAnywhere 安装程序无法在 Windows 7 64 位上运行

> ID：12482953
> 
> 赞同：0
> 
> 时间：2012-09-18T18:36:14.213
> 
> 标签：installanywhere

我们有一个作为 Windows 服务运行的应用程序。在运行时，它会检查 flexnet 服务器以查看是否有更新。如果有，则下载更新，停止服务并安装更新。此更新程序是使用 InstallAnywhere 2010 创建的。一切正常，除非它在 ​​Windows 7 64 位上运行（我们相信在任何 64 位版本的 Windows 上都会发生同样的事情）。在 Windows 7 32bit 上一切正常。

出现问题时，从 flexnet 成功下载更新。它执行并将安装文件解压缩到 C:\Windows\system32\config\systemprofile\AppData\Local\Temp\。然后它运行刚刚解压的安装可执行文件。但是，该可执行文件会引发一个错误对话框，提示“LaunchAnywhere：无法找到可执行文件”。该可执行文件的行为就像找不到与它一起解压缩的文件。

同样，在 32 位上没有问题。此外，我们可以在以用户身份登录时运行相同的进程（程序在用户模式下运行，而不是作为服务运行）。它使用该用户的临时目录，一切正常。该问题仅在 64 位系统上作为服务（系统用户）运行时发生。

有没有人有任何想法或建议？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-19T18:44:11.503

< ![在此处输入图像描述](../Images/e1bbe516dcea065210b0a80eecd91590.png)>

您是否有针对 64 位操作系统的这一步？

# mysql - 删除除一个以外的所有重复项

> ID：12482954
> 
> 赞同：3
> 
> 时间：2012-09-18T18:36:19.570
> 
> 标签：mysql, sql

我们有一个`business_users`带有`user_id`and的表，`business_id`并且我们有重复项。如何编写一个查询来删除除一个之外的所有重复项？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-09-18T18:44:30.150

# 完全相同的行

如果您想避免完全相同的行，正如我最初理解您的问题那样，那么您可以将唯一行选择到单独的表中并从中重新创建表数据。

```
CREATE TEMPORARY TABLE tmp SELECT DISTINCT * FROM business_users;
DELETE FROM business_users;
INSERT INTO business_users SELECT * FROM tmp;
DROP TABLE tmp; 
```

但是，如果有任何外键约束引用此表，请小心，因为临时删除行可能会导致其他地方的级联删除。

# 引入唯一约束

如果您只关心 and 对`user_id`，`business_id`您可能希望避免在将来引入重复项。您可以将现有数据移动到临时表中，添加约束，然后将表数据移回，忽略重复项。

```
CREATE TEMPORARY TABLE tmp SELECT * FROM business_users;
DELETE FROM business_users;
ALTER TABLE business_users ADD UNIQUE (user_id, business_id);
INSERT IGNORE INTO business_users SELECT * FROM tmp;
DROP TABLE tmp; 
```

上面的答案是基于[这个答案](https://stackoverflow.com/a/693968)。关于外键的警告与上一节一样适用。

# 一键删除

如果您只想执行单个查询，而不以任何方式修改表结构，并且您有一个`id`标识每一行的主键，那么您可以尝试以下操作：

```
DELETE FROM business_users WHERE id NOT IN
    (SELECT MIN(id) FROM business_users GROUP BY user_id, business_id); 
```

[这个答案](https://stackoverflow.com/a/5771092)之前提出了类似的想法。

如果上述请求失败，因为不允许在同一步骤中从表中读取和删除，您可以再次使用临时表：

```
CREATE TEMPORARY TABLE tmp
SELECT MIN(id) id FROM business_users GROUP BY user_id, business_id;
DELETE FROM business_users WHERE id NOT IN (SELECT id FROM tmp);
DROP TABLE tmp; 
```

如果您愿意，您仍然可以在以这种方式清理数据后引入唯一性约束。为此，请执行`ALTER TABLE`上一节中的行。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-18T19:04:45.507

由于您有一个主键，您可以使用它来选择要保留的行：

```
delete from business_users
where id not in (
    select id from (
        select min(id) as id -- Make a list of the primary keys to keep
        from business_users
        group by user_id, business_id -- Group by your duplicated row definition
    ) as a -- Derived table to force an implicit temp table
); 
```

这样，您将不需要创建/删除临时表等（[隐式](https://stackoverflow.com/a/45498/880904)表除外）。

您可能想设置一个独特的约束，`user_id, business_id`这样您就不必再担心这个了。

# php - PHP SimpleXMLElement：计数不计算对象的所有公共属性

> ID：12482959
> 
> 赞同：0
> 
> 时间：2012-09-18T18:36:30.147
> 
> 标签：php, object, simplexml

我有以下代码：

```
$b = $br->b;
var_dump($b);
$iCountBlock = count($b); 
```

其中 b 是 SimpleXMLElement 对象。var 转储输出：

```
object(SimpleXMLElement)[16]
public 'blockID' => string '160999' (length=6)
public 'blockDesc' => string 'Description' (length=37)
public 'moduleID' => string '1' (length=1)
public 'pubID' => 
  object(SimpleXMLElement)[18]
public 'contentID' => string '93305' (length=5)
public 'linkToPageID' => 
  object(SimpleXMLElement)[19]
public 'moduleFunction' => string 'replaceHTML' (length=11)
public 'moduleVars' => 
  object(SimpleXMLElement)[20]
public 'c' => 
  object(SimpleXMLElement)[21]
    public 'contentID' => string '93305' (length=5)
    public 'contentType' => string '1' (length=1)
    public 'description' => string 'new.usdish.com index redesign content' (length=37)
    public 'content' => 
      object(SimpleXMLElement)[22] 
```

但是，$iCountBlock 被设置为 1……它似乎没有按应有的方式计算对象的所有公共属性。我还尝试使用 foreach 循环遍历 b 的每个属性，它甚至没有进入循环。

```
foreach($b as $key => $val) { ... } 
```

我在这里有点不知所措，因为我不确定发生了什么。有什么想法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-18T19:04:48.597

表单 PHP 5.3 和更高版本的 SimpleXMLElement 确实使用计数**函数**来计算长度！

```
$count = $b->count(); 
```

在 5.3 之前的 PHP 中，您必须使用 childern 属性来获取计数。

```
$count = count($b->children()); 
```

信息位于： http: [//php.net/manual/en/simplexmlelement.count.php](http://php.net/manual/en/simplexmlelement.count.php)

# javascript - 执行 foreach 时更改数组中的值

> ID：12482961
> 
> 赞同：408
> 
> 时间：2012-09-18T18:36:37.243
> 
> 标签：javascript, arrays, foreach, pass-by-reference

例子：

```
var arr = ["one","two","three"];

arr.forEach(function(part){
  part = "four";
  return "four";
})

alert(arr); 
```

数组仍然是它的原始值，有没有办法从迭代函数中对数组元素进行写访问？

* * *

## 回答 #1

> 赞同：634
> 
> 时间：2012-09-18T18:38:39.037

回调传递元素、索引和数组本身。

```
arr.forEach(function(part, index, theArray) {
  theArray[index] = "hello world";
}); 
```

*编辑*——如注释中所述，该`.forEach()`函数可以采用第二个参数，该参数将用作`this`每次调用回调的值：

```
arr.forEach(function(part, index) {
  this[index] = "hello world";
}, arr); // use arr as this 
```

第二个例子显示`arr`它自己是在回调中设置的`this`。人们可能认为`.forEach()`调用中涉及的数组可能是 的*默认*值`this`，但无论出于何种原因，它都不是；如果没有提供第二个参数，`this`将是。`undefined`

（注意：如果回调是一个函数，则上述内容`this`不适用，因为在调用此类函数时，它永远不会绑定到任何东西。）`=>``this`

同样重要的是要记住，在 Array 原型上提供了一整套类似的实用程序，并且 Stackoverflow 上会出现许多关于一个或另一个功能的问题，因此最好的解决方案是简单地选择不同的工具。你有：

*   `forEach`对数组中的每个条目进行操作；
*   `filter`用于生成仅包含合格条目的新数组；
*   `map`通过转换现有数组来制作一对一的新数组；
*   `some`检查数组中的至少一个元素是否符合某个描述；
*   `every`检查数组中的*所有条目是否与描述匹配；*
*   `find`在数组中查找值

等等。[MDN 链接](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array)

* * *

## 回答 #2

> 赞同：152
> 
> 时间：2015-07-08T16:23:27.240

让我们*尽量*保持简单并讨论它实际上是如何工作的。它与变量类型和函数参数有关。

这是我们正在谈论的代码：

```
var arr = ["one","two","three"];

arr.forEach(function(part) {
  part = "four";
  return "four";
})

alert(arr); 
```

首先，这里是你应该阅读 Array.prototype.forEach() 的地方：

[https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array/forEach](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array/forEach)

其次，让我们简单谈谈 JavaScript 中的值类型。

**基元**（未定义、空值、字符串、布尔值、数字）存储实际值。

前任：`var x = 5;`

**引用类型**（自定义对象）存储对象的内存位置。

前任：`var xObj = { x : 5 };`

第三，函数参数是如何工作的。

在函数中，参数**总是**按值传递。

因为`arr`它是一个字符串数组，所以它是一个**原始**对象数组，这意味着它们是按值存储的。

因此，对于您上面的代码，这意味着每次 forEach() 迭代时，`part`都等于与 相同的值`arr[index]`，**但不是相同的 object**。

`part = "four";`将更改`part`变量，但会不理会`arr`。

以下代码将更改您想要的值：

```
var arr = ["one","two","three"];

arr.forEach(function(part, index) {
  arr[index] = "four";
});

alert(arr); 
```

现在如果 array`arr`是一个**引用类型**的数组，下面的代码将起作用，因为引用类型存储了一个对象的内存位置，而不是实际的对象。

```
var arr = [{ num : "one" }, { num : "two"}, { num : "three"}];

arr.forEach(function(part, index) {
  // part and arr[index] point to the same object
  // so changing the object that part points to changes the object that arr[index] points to

  part.num = "four";
});

alert(arr[0].num);
alert(arr[1].num);
alert(arr[2].num); 
```

下图说明了您可以更改`part`为指向一个新对象，同时保留`arr`单独存储的对象：

```
var arr = [{ num : "one" }, { num : "two"}, { num : "three"}];

arr.forEach(function(part, index) {
  // the following will not change the object that arr[index] points to because part now points at a new object
  part = 5;
});

alert(arr[0].num);
alert(arr[1].num);
alert(arr[2].num); 
```

* * *

## 回答 #3

> 赞同：125
> 
> 时间：2016-07-08T12:32:14.437

数组：`[1, 2, 3, 4]`
结果：`["foo1", "foo2", "foo3", "foo4"]`

## [`Array.prototype.map()`](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array/map?v=example)保留原始数组

```
const originalArr = ["Iron", "Super", "Ant", "Aqua"];
const modifiedArr = originalArr.map(name => `${name}man`);

console.log( "Original: %s", originalArr );
console.log( "Modified: %s", modifiedArr );
```

## [`Array.prototype.forEach()`](https://developer.mozilla.org/en/docs/Web/JavaScript/Reference/Global_Objects/Array/forEach?v=control)覆盖原始数组

```
const originalArr = ["Iron", "Super", "Ant", "Aqua"];
originalArr.forEach((name, index) => originalArr[index] = `${name}man`);

console.log( "Overridden: %s", originalArr );
```

* * *

## 回答 #4

> 赞同：16
> 
> 时间：2012-09-18T18:38:02.467

Javascript 是按值传递的，这本质上意味着`part`是数组中值的*副本*。

要更改值，请在循环中访问数组本身。

`arr[index] = 'new value';`

* * *

## 回答 #5

> 赞同：8
> 
> 时间：2019-02-27T23:56:04.340

这是使用`=>`样式函数的类似答案：

```
var data = [1,2,3,4];
data.forEach( (item, i, self) => self[i] = item + 10 ); 
```

给出结果：

```
[11,12,13,14] 
```

该`self`参数对于箭头样式函数不是绝对必要的，因此

```
data.forEach( (item,i) => data[i] = item + 10); 
```

也有效。

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2012-09-18T18:39:54.527

用数组的索引替换它。

```
array[index] = new_value; 
```

* * *

## 回答 #7

> 赞同：3
> 
> 时间：2012-09-18T23:17:52.523

.forEach 函数可以有一个回调函数(eachelement, elementIndex) 所以基本上你需要做的是：

```
arr.forEach(function(element,index){
    arr[index] = "four";   //set the value  
});
console.log(arr); //the array has been overwritten. 
```

或者如果您想保留原始数组，您可以在执行上述过程之前对其进行复制。要制作副本，您可以使用：

```
var copy = arr.slice(); 
```

* * *

## 回答 #8

> 赞同：3
> 
> 时间：2018-11-19T11:19:02.087

要完全添加或删除会改变索引的元素，通过扩展 slice() 的 zhujy_8833 建议来迭代副本，只需计算您已经删除或添加的元素的数量并相应地更改索引。例如，要删除元素：

```
let values = ["A0", "A1", "A2", "A3", "A4", "A5", "A6", "A7", "A8"];
let count = 0;
values.slice().forEach((value, index) => {
    if (value === "A2" || value === "A5") {
        values.splice(index - count++, 1);
    };
});
console.log(values);

// Expected: [ 'A0', 'A1', 'A3', 'A4', 'A6', 'A7', 'A8' ] 
```

在之前插入元素：

```
if (value === "A0" || value === "A6" || value === "A8") {
    values.splice(index - count--, 0, 'newVal');
};

// Expected: ['newVal', A0, 'A1', 'A2', 'A3', 'A4', 'A5', 'newVal', 'A6', 'A7', 'newVal', 'A8' ] 
```

在之后插入元素：

```
if (value === "A0" || value === "A6" || value === "A8") {
    values.splice(index - --count, 0, 'newVal');
};

// Expected: ['A0', 'newVal', 'A1', 'A2', 'A3', 'A4', 'A5', 'A6', 'newVal', 'A7', 'A8', 'newVal'] 
```

要替换元素：

```
if (value === "A3" || value === "A4" || value === "A7") {
    values.splice(index, 1, 'newVal');
};

// Expected: [ 'A0', 'A1', 'A2', 'newVal', 'newVal', 'A5', 'A6', 'newVal', 'A8' ] 
```

注意：如果同时实现 'before' 和 'after' 插入，代码应该首先处理 'before' 插入，否则将不会像预期的那样

* * *

## 回答 #9

> 赞同：2
> 
> 时间：2016-05-15T18:23:41.090

使用 Array 对象方法，您可以修改 Array 内容，但与基本的 for 循环相比，这些方法缺少一项重要功能。你不能在运行时修改索引。

例如，如果您将删除当前元素并将其放置到同一数组中的另一个索引位置，您可以轻松地做到这一点。如果将当前元素移动到之前的位置，则在下一次迭代中没有问题，您将获得相同的下一项，就好像您什么都没做一样。

考虑这段代码，一旦索引计数达到 5，我们将索引位置 5 处的项目移动到索引位置 2。

```
var ar = [0,1,2,3,4,5,6,7,8,9];
ar.forEach((e,i,a) => {
i == 5 && a.splice(2,0,a.splice(i,1)[0])
console.log(i,e);
}); // 0 0 - 1 1 - 2 2 - 3 3 - 4 4 - 5 5 - 6 6 - 7 7 - 8 8 - 9 9 
```

但是，如果我们将当前元素移动到当前索引位置之外的某个位置，事情就会变得有些混乱。然后下一个项目将移动到移动项目的位置，在下一次迭代中我们将无法看到或评估它。

考虑这段代码，一旦索引计数达到 5，我们将索引位置 5 处的项目移动到索引位置 7。

```
var a = [0,1,2,3,4,5,6,7,8,9];
a.forEach((e,i,a) => {
i == 5 && a.splice(7,0,a.splice(i,1)[0])
console.log(i,e);
}); // 0 0 - 1 1 - 2 2 - 3 3 - 4 4 - 5 5 - 6 7 - 7 5 - 8 8 - 9 9 
```

所以我们从来没有在循环中遇到过 6。通常在 for 循环中，当您将数组项向前移动时，您应该减少索引值，以便您的索引在下一次运行中保持在同一位置，并且您仍然可以评估移动到已删除项位置的项。这对于数组方法是不可能的。您不能更改索引。检查以下代码

```
var a = [0,1,2,3,4,5,6,7,8,9];
a.forEach((e,i,a) => {
i == 5 && (a.splice(7,0,a.splice(i,1)[0]), i--);
console.log(i,e);
}); // 0 0 - 1 1 - 2 2 - 3 3 - 4 4 - 4 5 - 6 7 - 7 5 - 8 8 - 9 9 
```

正如你所看到的，当我们递减时`i`，它不会从 5 继续，而是从 6 开始，从它离开的地方开始。

所以请记住这一点。

* * *

## 回答 #10

> 赞同：1
> 
> 时间：2021-08-26T20:53:21.583

#### 如果要删除项目

如果您需要进行的更改是从列表中完全删除一个或多个项目，那么使用`for`循环并向**后**遍历循环会更安全。

```
 for (let i = myArray.length - 1; i >= 0; i--)
    {
        const item = myArray[i];

        if (...) 
        {
           // remove item
           // https://stackoverflow.com/questions/5767325/how-can-i-remove-a-specific-item-from-an-array?rq=1
        }
    }; 
```

倒退意味着每个项目的数组永远不会改变。如果您要通过循环前进并删除，`item[3]`那么`item[4]`现在是 new `item[3]`，这并没有使任何事情变得更容易。你不会有这个问题倒退。

这当然是一个不使用 foreach 的解决方案，但重要的是要记住“老派”的方法通常是最好的。而且，如果出于某种原因您需要`break;`从循环中退出（并且有多个项目），则 for 循环会更有效，因为您无法跳出 for 循环。

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2020-05-12T11:36:08.387

如果你想覆盖你可以试试这个

```
var newArray= [444,555,666];
var oldArray =[11,22,33];
oldArray.forEach((name, index) => oldArray [index] = newArray[index]);
console.log(newArray); 
```

# wcf - WSDL 的 XSD 的自定义身份重置连接下运行的 WCF 服务包括

> ID：12482974
> 
> 赞同：2
> 
> 时间：2012-09-18T18:37:34.683
> 
> 标签：wcf, .net-4.0, iis-6, worker-process

我需要将 IIS 6 配置为使用工作进程的自定义标识来托管面向 .NET Framework 4.0 的 WCF 服务。身份是一个高度受限的域帐户，用于识别和管理在同一业务流程中交互的整个服务生态系统的权限。

我已运行带有 -ga 标志的 aspnet_regiis.exe，以将此身份权限授予服务器环境中的相关 ASP.NET 位置，并将其添加到 IIS_WPG 组中。在大多数情况下，一切似乎都比较顺利……除了自动生成的 WSDL 规范的包含。访问顶级 WSDL 规范工作正常（即 path.to/MyService.svc?wsdl），但 IIS 6 在返回 WSDL 包含的响应之前重置连接（即 path.to/MyService.svc?xsd=xsd0 ， ETC）。当通过服务器上的环回访问和通过公共 IP 访问时，都会发生这种情况。重新配置应用程序池以在默认网络服务帐户下运行时不会发生这种情况。

我还没有找到任何关于这个特定问题的文档，但这并不是我第一次遇到当 IIS 6 工作进程在自定义域标识下运行时 .NET Framework 的某些部分无法正常工作时遇到的困难。我没有在本地安全策略中为此帐户配置任何特殊权限，除了预先配置的 IIS_WPG 成员作为批处理作业登录的权限。为了让工作人员正常工作，我可能缺少什么？

**编辑：**

事件查看器不包含任何错误，并且 IIS 日志显示服务器以 200 OK 响应请求，但完整状态值为`200 0 64`，表示 Win32 状态代码为 64。

我收到的关于该错误的转储`net helpmsg 64`如下：

> 指定的网络名称不再可用。

各实体的回应如下：

*   **Chrome：**错误 101 (net::ERR_CONNECTION_RESET)：连接已重置
*   **Firefox：**页面加载时与服务器的连接被重置
*   **Eclipse/Java：** java.net.SocketException：连接重置

**编辑：**

[服务日志记录](https://stackoverflow.com/questions/7016005/simple-tracing-in-asp-net-4/7016488#7016488)（由[BNL](https://stackoverflow.com/users/168056/bnl)提供）产生以下异常转储：

> System.InvalidOperationException：无法生成临时类（结果 = 1）。错误 CS2001：找不到源文件“C:\WINDOWS\TEMP\vxmgwmnl.0.cs”。错误 CS2008：未指定输入。
> 
> 在 System.Xml.Serialization.Compiler.Compile(Assembly parent, String ns, XmlSerializerCompilerParameters xmlParameters, Evidence evidence) at System.Xml.Serialization.TempAssembly.GenerateAssembly(XmlMapping[] xmlMappings, Type[] types, String defaultNamespace, Evidence evidence, System.Xml.Serialization.TempAssembly..ctor(XmlMapping[] xmlMappings, Type[] types, String defaultNamespace, String location, Evidence evidence) at System.Xml.Serialization.XmlSerializer.. System.ServiceModel.Description.ServiceMetadataExtension.HttpGetImpl.XmlSchemaMessage 的 System.Xml.Schema.XmlSchema.Write(XmlWriter writer, XmlNamespaceManager namespaceManager) 的ctor（类型类型，字符串 defaultNamespace）。System.ServiceModel.Channels.BufferedMessageWriter.WriteMessage（消息消息，BufferManager bufferManager，Int32 initialOffset，Int32 maxSizeQuota）在 System.ServiceModel.Channels.Message.OnWriteMessage（XmlDictionaryWriter writer）在 System.ServiceModel.Channels.TextMessageEncoderFactory 的 OnWriteBodyContents（XmlDictionaryWriter writer） .TextMessageEncoder.WriteMessage(Message message, Int32 maxMessageSize, BufferManager bufferManager, Int32 messageOffset) 在 System.ServiceModel.Channels.HttpOutput.SerializeBufferedMessage(Message message) 在 System.ServiceModel.Channels.HttpOutput.Send(TimeSpan timeout) 在 System.ServiceModel。 Channels.HttpRequestContext.OnReply（消息消息，TimeSpan 超时）在 System.ServiceModel.Channels.RequestContextBase.Reply（消息消息，TimeSpan 超时）在 System.ServiceModel.Dispatcher.ImmutableDispatchRuntime.Reply（MessageRpc& rpc）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-19T14:36:36.410

使用 Microsoft KB 文章[Error message when ASP.NET 2.0 is configured to run with a user account: "Unable to generate a temporary class"](http://support.microsoft.com/kb/908158)中的指南，我找到了 C:\Windows\Temp 目录并正确检查了它的文件夹属性-单击并选择**Properties**。然后我导航到**Security**选项卡并单击**Advanced**，然后单击**Add**。我在本地计算机上输入了 IIS_WPG 组的名称，并只允许它具有特殊权限**List Folder / Read Data**。现在已经解决了这个问题。

# ember.js - ember.js 是否存在分页 mixin？

> ID：12482977
> 
> 赞同：3
> 
> 时间：2012-09-18T18:37:49.027
> 
> 标签：ember.js

我一直在编写自己的分页逻辑，它类似于 Ember.SortableMixin，但支持分页。在 1.0 之前的版本中是否存在类似的东西？

如果这不存在，是否欢迎围绕此特定行为提出拉取请求？我猜 90% 的应用程序需要简单的分页/排序，并且内置 mixin 会减少近 60 多行代码。

先感谢您

**更新**

我回答了另一个“余烬/分页”问题，我的完整（工作示例）可以在下面找到

[Ember 分页完整示例](https://stackoverflow.com/questions/13008838/ember-pagination-full-example/13033425#13033425)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-18T21:17:33.747

这是我用过的一个简单的：[https ://gist.github.com/1559628](https://gist.github.com/1559628)

它出自 ember 的顶级贡献者之一。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-14T13:47:02.950

我刚刚遇到[emberjs-pageable](https://github.com/VisualGuruz/emberjs-pageable)。乍一看，它看起来很不错，但我不确定它是否仍然被维护。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-18T20:21:45.337

我一直在使用这个[https://github.com/mathieul/page_wrapper](https://github.com/mathieul/page_wrapper)

专为 Rails 使用而设计，但很容易被采用。

到目前为止真的很高兴。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-03-08T19:18:16.223

这是一篇很棒的博客文章，讨论了分页（尽管它不是复制/可粘贴的 mixin）

[http://resistor.io/blog/2013/10/01/simple-pagination-in-ember-arraycontrollers/](http://resistor.io/blog/2013/10/01/simple-pagination-in-ember-arraycontrollers/)

# math - 如何通过模糊最大值实现模糊最小值功能

> ID：12482978
> 
> 赞同：1
> 
> 时间：2012-09-18T18:37:55.777
> 
> 标签：math, min, fuzzy-logic

我知道我可以通过幂函数表示模糊最大值（我在神经网络中需要它），即

> def max(p:Double)(a:Double,b:Double) = pow(pow(a,p) + pow(b,p) , 1/p) // 假设 a >=0 且 b >=0

当 p -> 无穷大时它变为最大值，当 p = 1 时为和

不确定如何正确实现模糊最小值。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-19T17:16:30.230

如果您愿意在 p=1 的情况下将“sum”替换为“harmonic sum”，则可以使用

1/(pow(pow(a,-p) + pow(b,-p),1/p))

当 p 趋于无穷时，这会收敛到 min(a,b)。

对于 p=1，它是 1/(1/a + 1/b)，它与调和平均值有关，但没有因子 2。就像在原始公式中一样，a+b 与算术平均值有关，但没有系数 2。

但是，请注意，对于 a 和 b 更接近的情况，当 p 趋于无穷大时，这两个公式（您的和我的）收敛到极限的速度要慢得多。

# c# - 尝试加载格式不正确的程序，异常随着 VS 安装而消失

> ID：12482981
> 
> 赞同：12
> 
> 时间：2012-09-18T18:38:04.463
> 
> 标签：c#, visual-studio-2010, dllimport

我设计了一个 C# Windows appln，它还在内部调用了一些函数 [通过 DllImport() 从 C++ DLL 导入]

我的 C++ 代码在 Win32 平台中构建为 .DLL，而我的 C# 构建为“任何 CPU”平台。

当我在我的测试机器上运行 .EXE (C#) 时，我遇到了一个错误

> 尝试从 hresult 0x8007000B 加载格式不正确的程序异常

但是，如果我在我的机器上安装 VSS 2010 然后运行 ​​EXE，则不会遇到此错误。

**1）这个错误的原因？2）为什么安装VSS时没有观察到错误？**

我使用 Win7 OS（64 位）在**AnyCPU**平台中构建 .EXE（C#），这又依赖于**Win32中构建的 DLL（使用 DllImport 在 C# 中导入的 C++ Dll）**

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-09-18T19:49:23.757

这几乎总是因为您从 64 位 dll/exe 等调用 32 位代码或从 32 位 dll 调用 64 位 dll。如果您为 x86 构建 c# 会发生什么？它仍将在 64 位上运行。

# asp.net-mvc - 实体框架作为 UnitOfWork/Repository？

> ID：12482982
> 
> 赞同：0
> 
> 时间：2012-09-18T18:38:07.913
> 
> 标签：asp.net-mvc, entity-framework, unit-of-work

我正在学习 Entity Framework/MVC 4，并开始关注一些关于创建存储库和抽象 EF 的教程。

我注意到的是 EF 似乎已经是 UnitOfWork/Repository 模式。

我尝试通过`DbSet<TEntity>`用作基类来创建自定义 DbSet，但由于以下异常而无法使其工作：`The type 'System.Data.Entity.DbSet<TEntity>' has no constructors defined`.

这是我正在尝试做的事情：

```
public class RolesDbSet : DbSet<Role>
{
    public bool IsNameInUse(string name, int id = 0)
    {
        if (id == 0)
            return this.Any(r => r.Name == name);
        return this.Any(r => r.Name == name && r.ID != id);
    }
}

public class MyEntities : DbContext
{
    public MyEntities() : base("MyEntities")
    {
        Database.SetInitializer(new MyDevelopmentInitializer());
    }       

    public RolesDbSet Roles { get; set; }
    public DbSet<User> Users { get; set; }
    public DbSet<Password> Passwords { get; set; }

    protected override void OnModelCreating(DbModelBuilder modelBuilder)
    {
        modelBuilder.Configurations.Add(new UserConfiguration());
        base.OnModelCreating(modelBuilder);
    }
} 
```

然后我就可以做到这一点：

```
bool inUse;
using (var db = new MyEntities())
{
    inUse = db.Roles.IsNameInUse("Employee");
} 
```

有没有办法做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-18T18:47:34.367

是[的，EF 已经实现了存储库和工作单元模式](https://stackoverflow.com/questions/5625746/generic-repository-with-ef-4-1-what-is-the-point)。

您不能创建派生`DbSet<T>`，因为它没有公共或受保护的构造函数。唯一的方法是`IDbSet<T>`直接实现，这太复杂了。但是你可以用同样的方式使用扩展方法而不是使用实例方法，它会起作用：

```
public static class RoleExtensions 
{
    public static bool IsNameInUse(this IQueryable<Role> query, string name, int id = 0)
    {
        if (id == 0)
            return query.Any(r => r.Name == name);
        return query.Any(r => r.Name == name && r.ID != id);
    }
} 
```

# ruby - Ruby on Rails 在变量名中使用计数器，即“i”

> ID：12482983
> 
> 赞同：0
> 
> 时间：2012-09-18T18:38:09.307
> 
> 标签：ruby, ruby-on-rails-3

我在 Rails 中有一个表单，用户可以在其中输入多条记录。我将编写一些 JavaScript，用户可以在其中拥有几乎无限数量的记录。我的哈希看起来像这样：

```
inputA_1, inputB_1, inputC_1
inputA_2, inputB_2, inpuctC_2 
```

在我的控制器中，我想做一个`while`循环来遍历行并将它们保存到数据库中，例如：

```
z = 0
i = 1
while z = 0
  @inputA = [:params][:inputA_i]
  @inputB = [:params][:inputB_i]
  @inputC = [:params][:inputC_i]
  if @inputA.nil?
     z=1
  else
  @record = [inputA: @inputA, inputB: @inputB, inputC: @inputC]
  @record.save
  i = i + 1
  end
end 
```

问题是我不知道如何使“ `i`”`:inputA_i`的值成为`i`.

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-18T18:39:56.117

插入`i`字符串并将字符串转换为`symbol`：

```
@inputA = [:params]["inputA_#{i}".to_sym]
@inputB = [:params]["inputB_#{i}".to_sym]
@inputC = [:params]["inputC_#{i}".to_sym] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-18T18:46:32.387

我可以建议对表单元素进行数组序列化吗？：

```
<form>
  <input type="hidden" name="inputA[]" value="Hi">
  <input type="hidden" name="inputA[]" value="There">
  <input type="hidden" name="inputA[]" value="Sir">
</form> 
```

当提交带有该 HTML 的表单时，这些值将转换为 params 哈希上的数组：

```
params[:inputA] #=> ["Hi", "There", "Sir"] 
```

因此，您的 JavaScript 所要做的就是创建更多具有相同名称的输入，以`[]`. 在控制器中处理这些输入*要*简单得多。

```
params[:inputA].each do |value|
  @record = Record.new
  @record.inputA = value
  @record.save
end 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-19T10:51:38.920

你可以像这样制作一个字符串

```
"hello #{name}" 
```

或者

```
"%s means %s" %["how do you do?", "hello"] 
```

希望它可以帮助！

# grails - grails命名查询如何使用OR

> ID：12482986
> 
> 赞同：1
> 
> 时间：2012-09-18T18:38:18.417
> 
> 标签：grails, named-query

本质上，我有 3 个要检查的字段：

```
class Book {
   String title
   String ISBN
   String type
} 
```

我正在尝试使用命名查询根据单个搜索字符串对这三个字段中的每一个进行不区分大小写的搜索。这是我目前拥有的：

```
 static namedQueries = {

        search { String searchString ->
        ilike("title", searchString) 
        or {
           ilike("ISBN", searchString)
        }
        or { 
           ilike("type", searchString)
        }
    } 
```

我没有得到任何异常或任何东西，但是，当应该有一些结果时，它只是不返回任何结果。有任何想法吗？

编辑：

我更新到 doelleri 的例子，它现在正在工作。这是查询的最后一部分：

```
from book this_ where (lower(this_.title) like ? or lower(this_.isbn) like ? or lower(this_.type) like ?) 
```

我还在命名查询中做了一个断点，以确定字符串是否被传入，并且确实如此。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-18T20:10:47.680

我相信正确的语法是

```
static namedQueries = {
    search { String searchString ->
        or {
            ilike("title", searchString)
            ilike("ISBN", searchString)
            ilike("type", searchString)
        }
    }
} 
```

# google-closure-library - XhrManager 错误请求状态 400 - 关闭库

> ID：12482989
> 
> 赞同：1
> 
> 时间：2012-09-18T18:38:33.017
> 
> 标签：google-closure-library

我正在使用 goog.net.XhrManager 发送 PUT 请求以使用以下数据在服务器上创建资源：

PUT {“名称”：“产品名称”，“hack”：“无效输入”}

服务器响应状态为 400 - 错误请求，因为“hack”是产品资源的无效属性。

一切都很好，除了浏览器控制台记录了一条错误消息：

**PUT "http://myserver/datastore/product" 400 (OK)**与方法调用堆栈。

如何防止 XhrManager 和 XhrIo 在控制台上记录此错误？

错误请求已由 XhrManager.send() 上的回调处理，最终用户不应该知道发生了错误。

客户端验证是一种适用于错误请求的选项。

如何在客户端处理冲突和其他响应，而不会使浏览器控制台充满客户端完全能够解决的错误消息？

创建新帐户时用户电子邮件的唯一性（冲突 - 状态 409） 更新客户端上过时的资源（版本冲突 - 状态 409） 未经授权的资源访问（状态 401）

# wpf - 将图表 LegendItem 复选框绑定到 WPF 中的系列可见性

> ID：12482990
> 
> 赞同：4
> 
> 时间：2012-09-18T18:38:33.973
> 
> 标签：wpf, xaml, mvvm, charts, wpftoolkit

我的 WPFToolKit 图表包含几个系列。我已经对图例本身进行了模板化，还通过创建样式资源对 LegendItem 进行了模板化：

```
<Style x:Key="CustomLegendItemStyle" TargetType="{x:Type charting:LegendItem}">
    <Setter Property="IsTabStop" Value="False" />
    <Setter Property="Template">
        <Setter.Value>
            <ControlTemplate TargetType="{x:Type charting:LegendItem}">
                <Border Background="{TemplateBinding Background}" BorderBrush="{TemplateBinding BorderBrush}" BorderThickness="{TemplateBinding BorderThickness}">
                    <DockPanel LastChildFill="True">
                        <Ellipse Width="10" Height="10" Fill="{Binding Background}" Stroke="{Binding Background}" StrokeThickness="1" Margin="0,0,3,0" DockPanel.Dock="Left"/>
                        <CheckBox IsChecked="{Binding Path=Visibility,Converter={StaticResource VisToBoolConverter},Mode=TwoWay}" />
                        <TextBlock DockPanel.Dock="Right" Text="(num)" />
                        <datavis:Title Content="{TemplateBinding Content}" Margin="10 0" />
                    </DockPanel>
                </Border>
            </ControlTemplate>
        </Setter.Value>
    </Setter>
</Style>

<Style TargetType="{x:Type charting:LineSeries}">
    <Setter Property="LegendItemStyle" Value="{StaticResource CustomLegendItemStyle}" />
</Style> 
```

这会在 LegendItem 中创建一个复选框，它应该控制系列的可见性。但事实并非如此。我也在 ViewModel 上创建了属性（默认为 true/visible），并且 LineSeries Visibility 绑定到

```
<charting:LineSeries ... Visibility="{Binding DisplayLoad,Converter={StaticResource BoolToVisConverter},Mode=TwoWay}" /> 
```

但两人并没有勾搭上。如果我将复选框绑定路径更改为 StoopidUser，我会在输出窗口中收到一个绑定错误，告诉我在 object 上找不到 StoopidUser 属性`LineDataPoint`，这让我有点难过。我已经检查过了，看不到 (a) 为什么它是 LineDataPoint (b) 如何从中获取系列。

你能看出有什么问题吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-30T16:11:31.807

最后我能够做到。这是我的解决方案。 ![在此处输入图像描述](../Images/b8dedbea44514fcabb5554c02f1b738e.png)

```
 <PointCollection x:Key="Serie1Key">1,10 2,20 3,30 4,40</PointCollection>
    <PointCollection x:Key="Serie2Key">2,10 4,20 6,30 8,40</PointCollection>

    <Style x:Key="CustomLegendItemStyle" TargetType="{x:Type chartingToolkit:LegendItem}">
        <Setter Property="IsTabStop" Value="False" />
        <Setter Property="Template">
            <Setter.Value>
                <ControlTemplate TargetType="chartingToolkit:LegendItem">
                    <StackPanel Orientation="Horizontal">
                        <CheckBox VerticalAlignment="Center" IsChecked="{Binding RelativeSource={RelativeSource Mode=TemplatedParent}, Path=Owner.Visibility, Mode=TwoWay, Converter={StaticResource VisibilityToBoolConverter}}" />
                        <Rectangle VerticalAlignment="Center" Width="8" Height="8" Fill="{Binding Background}" Stroke="{Binding BorderBrush}" StrokeThickness="1" Margin="5,0,5,0" />
                        <visualizationToolkit:Title VerticalAlignment="Center" Content="{TemplateBinding Content}" />
                    </StackPanel>
                </ControlTemplate>
            </Setter.Value>
        </Setter>
    </Style>

</Window.Resources>

<Grid x:Name="LayoutRoot">
    <Grid.ColumnDefinitions>
        <ColumnDefinition/>
        <ColumnDefinition/>
    </Grid.ColumnDefinitions>
    <chartingToolkit:Chart x:Name="chart" HorizontalAlignment="Left" Title="Chart Title" VerticalAlignment="Top"  >
        <chartingToolkit:LineSeries DependentValuePath="X" IndependentValuePath="Y" ItemsSource="{StaticResource Serie1Key}" LegendItemStyle="{StaticResource CustomLegendItemStyle}"/>
        <chartingToolkit:LineSeries DependentValuePath="X" IndependentValuePath="Y" ItemsSource="{StaticResource Serie2Key}" LegendItemStyle="{StaticResource CustomLegendItemStyle}"/>
    </chartingToolkit:Chart>
</Grid> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-27T17:19:24.923

我从来没有完全弄清楚这一点。但是删除图例并将我自己的图例放在那里为我提供了按预期绑定的机会。仍然想知道我错在哪里，但如果有人发现......

# .htaccess - 为 Joomla 和 Magento 组合一个 .htaccess

> ID：12482994
> 
> 赞同：1
> 
> 时间：2012-09-18T18:38:47.007
> 
> 标签：.htaccess, magento, joomla

在我网站的根目录中，我使用 Joomla 构建了一个网站。在子文件夹 \webshop\ 中，我使用 Magento 构建了一个站点。

我无法为此获得我的 .htaccess 文件。目前 Joomla 站点运行良好，Magento 站点也运行良好。但是我不能在 Magento 中点击例如 \Contact us\。该链接 ( [http://example.com/webshop/contacts](http://example.com/webshop/contacts) ) 将我带回主页。但是，当我编辑指向（[http://example.com/webshop/index.php/contacts](http://example.com/webshop/index.php/contacts)）的链接时，它可以完美运行。所以有问题。

为清楚起见，当人们访问[http://example.nl](http://example.nl)时，他们应该访问我的 Joomla 站点，但是当人们访问[http://example.nl/webshop](http://example.nl/webshop)时，他们应该访问我的网上商店。（当然，/webshop 也是我根目录下 Magento 文件夹的位置）

我也想使用[http://example.com](http://example.com)而不是[http://www.example.com](http://www.example.com)。（对于 Magento 中的 SSL 也非常重要，因为我只有 http:// 而不是[http://www](http://www)的 SSL 证书。）

我发现当我`Rewrite base /webshop`在 .htaccess 中使用时，它运行良好，但是 Joomla 站点无法运行。我将 Magento .htaccess 与我自己的结合起来。我不得不用 pastebin 上传它，因为这个网站不允许链接和 WWW。我在那里做错了什么？

[巴斯宾](https://pastebin.com/mv5whinq)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-18T19:45:29.270

您已将 Magento 安装到名为`webshop`

在 Magento 配置中，您必须更改**基本 URL**以包含您的子目录。

1.  转到**系统 > 配置 > Web**

2.  **将基本 URL**更改为**http://yoursite.com/webshop/**（同时更新您的**安全基本 URL**）

3.  在您的目录中打开您的 Magento .htaccess 文件`webshop`并更改以下内容：

    寻找： `#RewriteBase /magento/`

    改成： `RewriteBase /webshop/`

4.  保存您的 Magento .htaccess 文件并刷新您的 Magento 缓存文件夹`var/cache`

# grails - 按日期对 grails 中的集合进行排序

> ID：12482995
> 
> 赞同：6
> 
> 时间：2012-09-18T18:38:50.680
> 
> 标签：grails

我想按日期对 grails 中的集合进行排序，我目前正在执行以下操作：

```
def pics = Picture.findAllByChild(child, [sort: 'dateCreated', order: 'desc'])
pics.add(Post.findAllByPostedToAll(true)) 
```

因为我在列表中添加了更多项目，所以我需要按 dateCreated 降序再次排序它看起来不像排序类可以做到这一点。我试过了：

```
pics.sort(it.dateCreated) 
```

但这是不允许的

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-09-18T19:01:50.630

该`sort`方法采用闭包参数，因此正确的调用（带有隐式括号）是

```
pics.sort { it.dateCreated } 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-18T23:29:28.787

您还可以更改关联的默认排序。

在您的图片域类中添加：

```
static mapping = { 
    child(sort:'dateCreated', order:'desc')
} 
```

这不支持单向一对多关系，但适用于双向关系。

# c# - 如何使用 ItemArray 将 Null 值插入 DataTable

> ID：12482996
> 
> 赞同：1
> 
> 时间：2012-09-18T18:38:51.753
> 
> 标签：c#, ado.net

我编写了经过良好性能测试的代码。

在代码中，我拆分了一个逗号分隔的字符串并将其分配给 DataTable Row 的 ItemArray。

```
DataRow dr = dt.NewRow();
var itemArray = processedUliValue.Split(',');
dr.ItemArray = itemArray;
dt.Rows.Add(dr); 
```

稍后在代码中，我将根据选定的列名将这些 itemArray 值转换为整数

如果任何一列为空，我就会遇到异常。

因此，我正在寻找在分配 itemArray 时将空值设置为 null ，我尝试在逗号分隔的字符串中使用 DBNull.Value 但它没有采用 null，我也尝试了 null 但这也不起作用。

有没有办法使用这个逗号分隔的字符串将 null 分配给 ItemArray？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-18T18:50:14.370

看起来您尝试存储的列`DbNull.Value`不允许空值。这对我有用：

```
 var dt = new DataTable
        {
            Columns =
                {
                    new DataColumn("Id", typeof(int)),
                    new DataColumn("FirstName", typeof(string)) { AllowDBNull = true },
                    new DataColumn("LastName", typeof(string)) { AllowDBNull = true },
                }
        };

        var row = dt.NewRow();

        row.ItemArray = "1,,Jones".Split(',').Select(s => string.IsNullOrEmpty(s) ? (object)DBNull.Value : (object)s).ToArray();

        dt.Rows.Add(row); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-18T18:50:33.233

为什么在将其转换为 int 之前不检查列值是否为空？这种方式似乎更简单。

# javascript - 带有 javascript/jquery 的缩略图照片选择器

> ID：12482999
> 
> 赞同：0
> 
> 时间：2012-09-18T18:39:01.313
> 
> 标签：javascript, jquery

我想创建类似下面的屏幕截图的东西。顶部的大图将为主显示，当您单击底部缩略图时，顶部的大图将变为缩略图。

ps忽略“回到顶部”文本。

有没有一种简单的方法可以用 javascipt/jquery 做到这一点？

![在此处输入图像描述](../Images/eb806b9b998a74597eb7fccd26ae68b7.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-18T18:45:08.480

有几种方法可以做到这一点。最简单的方法是像这样使用一个图像：

```
<img src="myimg.jpg" class="thumb" title="Click Me" />

<div id="view"><img /></div> 
```

使用一些 JS/jQuery 来执行以下操作：

```
$(function(){
    $(document).on('click', '.thumb', swapImage); //wire up click event
});

function swapImage() { 
    var thumb = $(this);
    //steal src from thumb and pop it into main img
    $('#view').find('img').attr('src', thumb.attr('src'));
} 
```

确保在缩略图上添加一些 CSS 以将其缩小，但让`#view`图像为全尺寸。当然，这不是*最好*的方法，但它是一种可以为您指明正确方向的方法。

第二种方法是创建两个图像，一个用于缩略图，另一个用于主图像。如果您遵守严格的命名约定，则可以使用上面的代码，但在`swapImage()`函数中执行以下操作：

```
 //thumb and large image are named the same, 
    //except large has "large-" in front
    $('#view').find('img').attr('src', 'large-' + thumb.attr('src')); 
```

祝你好运！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-18T18:43:48.527

如果你愿意尝试一下 Javascript Libraries，你可以看看这个

[http://www.infoq.com/articles/emberjs](http://www.infoq.com/articles/emberjs)

这是一个示例应用程序，可以满足您的大部分要求（在您的问题中）。您应该能够自定义示例工作代码。