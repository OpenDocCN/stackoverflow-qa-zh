# StackOverflow 问答 10051000-10051999

# macos - 在 OS X 上构建 GLV 时“找不到 OpenGL.h”？

> ID：10051001
> 
> 赞同：0
> 
> 时间：2012-04-07T01:36:29.433
> 
> 标签：macos, opengl

我正在尝试在 mac os x 上构建[glv 。](http://mat.ucsb.edu/glv/)我是这个操作系统的新手，我找不到错误。有冲突的命令是：

```
c++ -arch x86_64 -isysroot /Developer/SDKs/MacOSX10.7.sdk -stdlib=libc++ -I/usr/include -IGLV  src/glv_buttons.cpp 
```

输出

```
clang: warning: argument unused during compilation: '-fpeel-loops'
In file included from src/glv_buttons.cpp:4:
In file included from GLV/glv_buttons.h:7:
In file included from GLV/glv_core.h:13:
In file included from GLV/glv_draw.h:9:
GLV/glv_conf.h:72:11: fatal error: 'OpenGL/OpenGL.h' file not found 
```

这是包含触发错误的行的文件：[https://svn.mat.ucsb.edu/svn/glv-svn/trunk/GLV/glv_conf.h](https://svn.mat.ucsb.edu/svn/glv-svn/trunk/GLV/glv_conf.h)

我正在运行 mac os x 10.7.3。

如果我运行“定位 OpenGL.h”，我会得到：

```
/Applications/Xcode.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.6.sdk/System/Library/Frameworks/AppKit.framework/Versions/C/Headers/NSOpenGL.h
/Applications/Xcode.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.6.sdk/System/Library/Frameworks/OpenGL.framework/Versions/A/Headers/OpenGL.h
/Applications/Xcode.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.7.sdk/System/Library/Frameworks/AppKit.framework/Versions/C/Headers/NSOpenGL.h
/Applications/Xcode.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.7.sdk/System/Library/Frameworks/OpenGL.framework/Versions/A/Headers/OpenGL.h
/System/Library/Frameworks/AppKit.framework/Versions/C/Headers/NSOpenGL.h
/System/Library/Frameworks/OpenGL.framework/Versions/A/Headers/OpenGL.h 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-07T07:48:29.033

添加`-framework OpenGL`到构建命令。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-10T07:47:45.880

实际上有两个错误。第一个是我缺少“-c”标志（这个文件不需要链接，因为它是库的一部分）。添加此标志后，我删除了 -isysroot 和 -arch 选项，一切正常。

# php - Codeigniter -> 简单全选查询

> ID：10051002
> 
> 赞同：0
> 
> 时间：2012-04-07T01:36:29.523
> 
> 标签：php, codeigniter

我有我的模型：

```
$this->db->select('companyName,companySlogan,companyContact,companyEmail,companyWebsite,companyPhone,companyFax,companyAddress');
$result = $this->db->get('companyDetails'); 
```

我将如何返回我的`$result`以便我可以通过我的控制器以以下形式调用它？

```
$data['companyName'] = $this->quote->companyDetails->companyName 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-07T01:48:27.597

您可能可以`getCompanyDetails($companyName)`在模型中创建一个函数。然后从您的控制器调用此方法。`$this->quote->getCompanyDetails('abc');`

像下面的东西。请注意，请对此进行测试，如果出现错误，请进行细微更改。基本思想如下。

```
public function getCompanydetails($companyName)
{ 
$this->db->select('companyName,companySlogan,companyContact,companyEmail,companyWebsite,companyPhone,companyFax,companyAddress');
    $result = $this->db->get($companyName);
    return result->result_array();
} 
```

# git - 如何更改 git 工作树中某些文件的（老式 Mac OS）文件类型？

> ID：10051003
> 
> 赞同：1
> 
> 时间：2012-04-07T01:36:41.210
> 
> 标签：git, osx-lion

我的一些 (Mac OS) 文件需要具有 TEXT 文件类型。我不是在谈论扩展，而是扩展属性。git 丢失了该功能。

所以我需要对具有特定扩展名的文件运行 SetFile 命令，但我还没有弄清楚如何去做。我只需要在结帐方向执行此操作 - 在提交期间不需要保存任何内容。

我将 Ruby 脚本视为涂抹过滤器，但不知道如何获取文件名。这是正确的方法还是钩子会更好？

（我无法控制对文件类型的需求——它是一个遗留系统，我无法改变它的工作方式。）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-07T09:04:39.790

来自`git hooks --help`：

```
post-checkout
   This hook is invoked when a git checkout is run after having updated
   the worktree. The hook is given three parameters: the ref of the
   previous HEAD, the ref of the new HEAD (which may or may not have
   changed), and a flag indicating whether the checkout was a branch
   checkout (changing branches, flag=1) or a file checkout (retrieving a
   file from the index, flag=0). This hook cannot affect the outcome of
   git checkout. 
```

因此，您可以有一个 post-checkout 挂钩，该挂钩运行在工作树中具有您关心的特定扩展名的所有文件上，并`SetFile`在它们上调用。这并不完美，因为它将对未更改的文件重新执行操作，并且在 a 之后根本不会运行`git reset --hard`，但可能足以满足您的需求。

将为所有命名的文件`*.txt`（但没有其他文件）执行此操作的 post-checkout 挂钩非常简单：

```
#! /bin/sh
git ls-files -z -- '*.txt' | xargs -0 SetFile -t TEXT 
```

和使其适用于硬情况路径名（例如，包含嵌入空格的路径名）`-z`。`-0`

# c++ - “未定义对 PrintArgv 的引用”：为什么？

> ID：10051004
> 
> 赞同：0
> 
> 时间：2012-04-07T01:36:50.833
> 
> 标签：c++, g++, undefined-reference

当我编译我的程序时，我得到三个“未定义的对'PrintArgv(...)'的引用”错误。我已经搜索过，但找不到出现这些错误的原因。这是我的代码：

```
 #include "tools.hpp"

enum ARG_T {COMMAND, SWITCH, ARGUMENT};
void ReadArgs(int, char**, ofstream&);
void PrintArgv(char*, ARG_T, ofstream&);

int main(int argc, char* argv[])
{
    ofstream fout;
    try{
        fout.open("P1Ford.txt", ios::out | ios::app);
    }
    catch(...)
    {
        //fatal("Could not open file P1Ford.txt");
        cout << "Could not open file P1Ford.txt" << "\n";
        return -1;
    }

    ReadArgs(argc, argv, fout);

    fout.close();
    return 0;
}

/*-----------------------------------------------------------------------------
This function takes the values passed in through the command line
then examines each one to determine if it is the command, a switch or
an argument. Then passes it to a function to print it to the file.
-----------------------------------------------------------------------------*/
void ReadArgs(int argc, char* argv[], ofstream& fout)
{
    for(int c=0; c<argc; ++c)
    {
        if(c == 0) PrintArgv(argv[c], COMMAND, fout);
        else if(strncmp(argv[c], "-", 1) == 0) PrintArgv(argv[c], SWITCH, fout);
        else if(strncmp(argv[c], ">", 1) == 0) ;
        else PrintArgv(argv[c], ARGUMENT, fout);
    }
}

/*-----------------------------------------------------------------------------
This function prints the argument in the correct format
Command <command>
   Switch <switch>
   Argument <agrument>
   Argument <argument>
-----------------------------------------------------------------------------*/
void PrintArgv(char* val, ARG_T type, ostream& fout)
{
    if(type == COMMAND) fout << "Command " << val << "\n";
    if(type == SWITCH) fout << "\t" << "Switch " << val << "\n";
    if(type == ARGUMENT) fout << "\t" << "Argument " << val << "\n";
} 
```

该功能`ReadArgs`是我得到错误的地方。每次调用`PrintArgv`都会给我错误。我正在使用 G++ 4.6.1。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-07T01:39:19.217

你的原型有一个 type 参数，`ofstream &`你的 header 有一个 type `ostream &`。这意味着 的实现`PrintArgv`实际上是在声明一个新函数。但是，您将指定的原型称为原型，它没有主体，因为您无意中创建了一个新函数，而不是定义原始函数的主体。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-07T01:40:21.580

用实际使用的参数替换顶部的函数定义：

```
#include "tools.hpp"

enum ARG_T {COMMAND, SWITCH, ARGUMENT};

void ReadArgs(int argc, char* argv[], ofstream& fout)
void PrintArgv(char* val, ARG_T type, ostream& fout) 
```

# java - Java Swing JEditorPane 和屏幕阅读器

> ID：10051006
> 
> 赞同：1
> 
> 时间：2012-04-07T01:37:01.803
> 
> 标签：java, swing, accessibility, screen-readers, jaws-screen-reader

最近几天我一直在寻找，但在任何地方都找不到答案。我正在尝试在 Java Swing 中创建一个可访问的 IDE。我唯一遇到的问题是模拟其他文本编辑器中发生的行为。

我希望屏幕阅读器（尤其是 JAWS）读取文本区域选定行中的任何内容（不像突出显示，只是光标所在的位置 - 整行）。

如果我在 Eclipse 甚至记事本中尝试这样做，每当我使用箭头键移动文本光标时，屏幕阅读器都会立即读取该行上的任何内容。它在我的程序中*没有*这样做，我什至尝试将其简化为带有 JEditorPane 的简单 JFrame（也尝试了简单的 JTextArea）。

是否有特定的侦听器，或者我必须实现可访问性的东西，或者 idk 其他什么，才能创建此功能？如果我的问题令人困惑，我深表歉意。我仍在尝试学习如何真正使可访问性的东西发挥作用。如果还有什么我可以澄清的，请告诉我。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-09T10:39:52.903

您是否考虑过使用 Java Access 桥接器（下载并安装它），因为这是 JAWS 等屏幕阅读器读取 Java 应用程序所必需的。Java 访问网桥信息可以在这里找到。[http://www.oracle.com/technetwork/java/javase/tech/index-jsp-136191.html](http://www.oracle.com/technetwork/java/javase/tech/index-jsp-136191.html)

# php - 使 PHP 变量提供链接

> ID：10051007
> 
> 赞同：-2
> 
> 时间：2012-04-07T01:37:09.807
> 
> 标签：php, string, variables, hyperlink

去做

```
echo <a href='www.google.com'> google </a>; 
```

我想使用变量而不是“google”，如下所示：

```
$linkName="google"; 
```

但我不能这样做：

```
echo <a href='www.google.com'> $linkName </a>; 
```

那我该怎么办？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-07T01:39:08.180

就是这么简单。所有替代方案都有效

```
echo "<a href='http://www.google.com'>$linkName</a>";
echo "<a href='http://www.google.com'>{$linkName}</a>";
echo "<a href='http://www.google.com'>".$linkName."</a>";
echo <<<HTML
     <a href='http://www.google.com'>$linkName</a>
HTML;
echo <<<HTML
     <a href='http://www.google.com'>{$linkName}</a>
HTML; 
```

甚至

```
<a href="http://www.google.com"><?php echo $linkName; ?></a>
<a href="http://www.google.com"><?=$linkName; ?></a> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-07T01:39:40.690

```
echo "<a href='{$url}'> {$linkName} </a>"; 
```

或者

```
echo "<a href='" . $url . "'> " . $linkName . "</a>"; 
```

或使用 heredocs（谷歌它）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-07T01:40:17.030

使用双引号，变量替换在其中完成：

```
$linkName = "google";
echo "<a href='google.com'>$linkName</a>"; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-07T01:40:31.460

这是非常基本的 PHP 东西，所以我建议用谷歌搜索这些答案。但这里是你如何做我认为你问的：

```
echo "<a href='www.google.com'>" . $linkname . "</a>"; 
```

或者

```
echo "<a href='www.google.com'>$linkname</a>"; 
```

# javascript - 如何使用 jquery 查找单击了哪个节点并删除其父节点

> ID：10051008
> 
> 赞同：0
> 
> 时间：2012-04-07T01:37:21.950
> 
> 标签：javascript, jquery, jquery-mobile, xhtml

```
<script type="text/javascript">
$(document).ready(function($) {
    $("a.delete").click{function(){
        $(this).parent().remove();
    }
});
</script>

<li>
    <a href="index.html">
        <h3>1</h3>
    </a>
    <a href="javascript:void(0)" onclick = "" id = "我" class = "delete">删除关注</a>
</li> 
```

但是当我点击那个按钮时，控制台中出现“Uncaught SyntaxError: Unexpected token”。我该怎么做，我很困惑。如果可能的话，我想要一些示例代码，非常感谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-07T01:42:40.193

如果您有特定`<ul>`的目标，请使用它的类名或 ID 来指定

```
$(function(){
    $('ul').on('click','a.delete',function(){
        $(this).closest('li').remove()
    });
}); 
```

[演示](http://jsfiddle.net/XV2CY/)

# c++ - DirectX CreateOverlay 函数库？

> ID：10051009
> 
> 赞同：0
> 
> 时间：2012-04-07T01:37:23.927
> 
> 标签：c++, visual-c++, directx

嗨，我正在使用朋友发给我的一些类，编译时出现错误：此函数声明上未解析的外部符号：

```
int APIENTRY CreateOverlay(HINSTANCE hInstance, HINSTANCE hPrevInstance, LPTSTR lpCmdLine, int nCmdShow); 
```

这些类用于将 directX 菜单绘制为覆盖。问题是我似乎无法在网络上找到这个函数所在的库。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-07T01:44:48.987

那是来自一些在网络上不可用的私人图书馆。无论如何，这类事情通常是私人的。

也许你的朋友知道这是从哪里来的。

# php - 在 Yii 框架的下拉列表中放置链接

> ID：10051013
> 
> 赞同：1
> 
> 时间：2012-04-07T01:37:46.653
> 
> 标签：php, arrays, drop-down-menu, yii

我有这样的`dropdown`清单

```
 <?php echo $form->dropdownList($customers,'customer_name', CHtml::listData(Customers::model()->findAll(), 'id', 'customer_name'),
 array(
   'ajax'=> array(
             'type'=>'GET',
             'url'=>
             'data'=>
           ),
             'empty'=>--Select One---')); ?> 
```

创建一个的另一个链接`new customer`是这样的

```
 <?php echo CHtml::link('Create Customers', "",array(
        'style'=>'cursor: pointer; text-decoration: underline;',
        'onclick'=>"{addCustomers(); $('#dialogCustomers').dialog('open');}"));?> 
```

我想要`create customer link`应该进来`dropdown list`。那么如何放置`create customer link inside the dropdown list`，如何合并两个链接并将它们创建为一个链接？任何帮助和建议都将非常受欢迎。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-07T02:50:30.913

Tbh我不太确定你想要做什么，但从我得到的你需要这样的东西：

```
echo $form->dropDownList(
    $customers,
    'customer_name',
    CMap::mergeArray(
        CHtml::listData(
            Customers::model()->findAll(), 'id', 'customer_name'
        ),
        array(
            'create_customer_link'=>'Create new customer'
        )
    ),
    array(
        'empty'=>array('Select'=>'--Select One---'),
        'id'=>'Customers_name',
        'ajax'=> array(
            'type'=>'GET',
            'beforeSend'=>'js:function(){
                if($("#Customers_name").val() == "create_customer_link") {
                    addCustomers();
                    $("#dialogCustomers").dialog("open");
                    return false;
                }
            }',
            'url'=>...
            'data'=>...
        ),
        'options'=>array(
            'create_customer_link' => array('class'=>'my_custom_css_class'),
            // ... etc. You can add any html option here.
            // check http://www.yiiframework.com/doc/api/1.1/CHtml#dropDownList-detail for more info
        )
    )
); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-05-29T11:18:29.733

如果我理解你的要求。您想在下拉列表的选项上添加链接。这是执行此操作的简单方法。

```
 <?php 
                      echo CHtml::dropDownList('city_name', null,
                        $arrPopularCities, 
                        array(
                            'prompt' => 'Popular City',
                            'class' => 'btn btn-default btn-dropdown dropdown-toggle',
                            'style' => 'border-right:2px solid #4bacc6;',
                        )); 
                ?> 
```

添加波纹管jQuery

```
 $('#city_name').change(function() {
    if($(this).val() != ""){
        window.location.assign('<?php echo Yii::app()->createUrl('city/view'); ?>' + '?id=' + $(this).val());
    }
}); 
```

# c# - Visual Studio 11（Metro）中的 Magento SOAP C# 登录问题

> ID：10051017
> 
> 赞同：4
> 
> 时间：2012-04-07T01:38:30.073
> 
> 标签：c#, magento, soap, microsoft-metro, visual-studio-2012

我正在尝试构建一个可以从 Magento 安装中获取产品的 Metro 应用程序。

当我进入 Visual Studio 2010 中的登录部分时，它工作正常：

```
string sessionId = proxy.login("user", "pass"); 
```

但是，当我在 Visual Studio 11 中尝试相同的代码时，它没有给我登录选项，而是 loginAsync，如下所示：

```
string sessionId = proxy.loginAsync("user", "pass"); 
```

如果我使用这个选项（它具有常规“登录”的有效参数），VS11 会给我这个错误：

> 无法将类型“System.Threading.Tasks.Task”隐式转换为“字符串”

任何帮助将不胜感激！谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-07T02:03:08.253

尝试使用`await`修饰符

```
loginResponse sessionId = await proxy.loginAsync("user", "pass"); 
```

**编辑**

看起来您使用的许多 API 已从同步变为异步。异步版本回来了，`Task<string>`而不是简单的`string`。每当发生这种情况时，您有 2 个选项可用于`string`从`Task<T>`.

*   `await`在表达式上使用。这是非阻塞的
*   调用`.Result`任务。这是阻塞

# r - 使用 sapply 忽略列表中的缺失元素

> ID：10051024
> 
> 赞同：2
> 
> 时间：2012-04-07T01:39:27.467
> 
> 标签：r

我在数据框中有一个列表（在本例中为`df$candpct`），并且想从列表中提取第一个和第二个元素并将它们放入单独的向量中。

这是数据框的初始结构：

```
> head(df)
  juris                         candpct
1   101              0.752491, 0.247509
2   102 0.4856056, 0.2850754, 0.1845157
3   103                               1
4   104                               1 
```

我看过[这个答案](https://stackoverflow.com/questions/2803460/how-to-get-the-second-sub-element-of-every-element-in-a-list-in-r)，它向我展示了如何有效地提取第一个元素：

```
> df$first_place <- sapply(df$candpct,"[[",1)

> head(df)
      juris                         candpct first_place
    1   101              0.752491, 0.247509    0.752491
    2   102 0.4856056, 0.2850754, 0.1845157   0.4856056
    3   103                               1           1
    4   104                               1           1 
```

但是，如果我尝试运行另一行来提取第二个元素，则会出现错误，因为并非所有行都在第二个位置有一个元素。

```
> df$second_place <- sapply(df$candpct,"[[",2)
Error in FUN(X[[3L]], ...) : subscript out of bounds 
```

理想情况下，如果缺少第二个元素，我希望它填充相应的行`second_place`。`NA``0`

我确信有多种方法可以解决这个问题，但是我没有很多使用列表的经验，所以我在开始时遇到了很多麻烦。

在此先感谢您的帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-07T02:06:23.180

只是跟进我的评论：

```
l <- list(a = 1,b = 1:2,c = 1:3)
> sapply(l,'[',2)
 a  b  c 
NA  2  2 
```

# javascript - Processing.js“draw()”执行不一致？

> ID：10051035
> 
> 赞同：1
> 
> 时间：2012-04-07T01:40:31.930
> 
> 标签：javascript, processing, processing.js

我有一个 Pjs 草图，如下所示：

```
void setup(){
 //setup stuff among all, setup:
 Graph graph = new Graph;
}

 void update(String [] input){
 //loop through the input update the Graph class 

 }

void draw(){    
 graph.display();   
}

class Graph{
 //setup graph

 void update(String word){
 //update graph with info
 }
}

 void display() {
  // draw graph; 
 }
} 
```

在javascript部分我有以下（在某些时候）：

```
processingjs.update(String); 
```

所以发生的事情是我有时不会调用 draw() 循环并且什么也没有出现。但是，如果我把 graph.display(); 进入 update() 函数，图形被一致地绘制，但是我失去了在 draw() 中运行它所带来的某些灵活性。

我想知道这是一种预期的行为，我应该重写，就好像我只是使用更新来绘制一样，或者我应该尝试将更新功能移动到绘制循环中（并从 javascript 中调用它）？

如果我可以提供额外的信息，请告诉我。非常感谢任何输入，

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-07T16:40:12.713

实际上解决了这个问题。

What I was doing is passing an array to processingjs.update() and then looping through it and updating my graph from within Processing.

The solution is to loop on Javascript side and send to Processing results one by one..

I think I kind of understand why that is so, but if I am wrong, please correct me.

# php - 使用 CodeIgniter 插入 POINT？（防止在 POINT 值周围添加引号？）

> ID：10051037
> 
> 赞同：1
> 
> 时间：2012-04-07T01:40:42.360
> 
> 标签：php, mysql, codeigniter

我正在使用 Codeigniter 将一些数据插入到 MySQL 表中。但是，自动添加的单引号给我带来了问题，`'p' => 'POINT(1 1)'`因为这会导致生成的 SQL 查询`'POINT(1,1)'`不是`POINT(1,1)`. 如果我传递`false`第二个参数，所有单引号将从生成的 SQL 查询中删除。我应该如何解决这个问题？

**PHP 代码**

```
$data = array(  'lat' => $url['lat'],
                'lng' => $url['lng'],
                'p' => 'POINT(1 1)'
                );
$this->db->insert('listings', $data); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-07T01:59:45.330

尝试做类似的事情

```
$this->db->set(array(
   'lat' => $url['lat'],
   'lng' => $url['lng'],
), true);
$this->db->set(array(
   'p' => 'POINT(1 1)'
), false);
$this->db->insert("listings"); 
```

第二个参数将确保该值不会被转义。

抱歉，如果我的回答有误，我没有使用 Codeigniter

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2016-02-02T09:00:56.273

请试试这个

```
$geo_cordinates = "GeomFromText('POINT(18.025600 72.251500)',0)"; 

$sql = "Insert into `tablename` (`geo_cordinates`) values ($geo_cordinates)";
$this->db->query($sql); 
```

它对我有用。希望也对你有用。

# c# - Mono 中用于跨平台应用程序的应用程序图标

> ID：10051040
> 
> 赞同：3
> 
> 时间：2012-04-07T01:41:42.787
> 
> 标签：c#, mono, icons, cross-platform

我试图让我的应用程序在所有平台上为我的应用程序使用一个图标，该应用程序是在 Ubuntu Linux 上使用 Mono 开发的。我创建了一个打算用于此目的的 SVG 64x64 文件，但我不知道如何执行以下操作：

1) 允许应用程序在 Ubuntu Unity 启动栏中显示此图标，并在文件管理器 (Nautilus) 中显示此图标。2) 在 Mac 应用栏中显示。3) 在 Windows 的文件浏览器中显示为默认应用程序图标。

是否有一个独立于平台的方法来做到这一点，或者我需要跳过三个箍（每个平台一个）来实现这一点？任何平台的任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-07T02:03:22.823

我从未见过任何一种万能的解决方案。对于 Windows，您需要为 SVG 图像导出一个 ico 文件，

[http://msdn.microsoft.com/en-us/library/windows/desktop/aa511280.aspx](http://msdn.microsoft.com/en-us/library/windows/desktop/aa511280.aspx)

然后在您的项目文件中，您可以将其指定为应用程序图标。然后 Windows 资源管理器会自动将它用于您的应用程序。

对于 Ubuntu 和 OS X，您需要其他专家的帮助来了解如何配置图标。

# ajax - 多个异步 jQuery AJAX POST 同时返回

> ID：10051043
> 
> 赞同：1
> 
> 时间：2012-04-07T01:42:14.267
> 
> 标签：ajax, jquery, jquery-plugins

我正在用 PHP 开发一个应用程序，在某些时候该应用程序必须制作多个 AJAX POST（每个都返回少量 HTML）。这些 POST 中的每一个都必须在 div 中插入返回的 HTML。我这样做没有问题，但是当我一次启动所有 AJAX POST（假设我启动 10 个）时问题就来了，我为每个 POST 指定了一个单独的 div。因为它们都是异步的，并且它们都在几乎完全相同的时间返回所有 HTML 最终都在一个 div 中，而不是每个单独的 div 中。我会发布一些代码来澄清。这是我的“apiCall”函数的精简版：

```
xhr = $.ajax({
    type: "POST",
    url: "../api.php",
    dataType: "json",
    data: data,
    success: function(data) {
      obj.html(data.D['html']);
    }
}); 
```

问题发生在成功函数附近。data.D['html'] 包含来自 POST 的 HTML，但我认为它被下一个 AJAX POST 覆盖，所以这就是为什么我所看到的只是返回最后一个被放入 div 的 AJAX POST（这是 jQuery 的一部分我写的插件，obj是传入的div）我这样称呼它：

```
$("#container).apiCall({options...}); 
```

谁能提供一个解决方案，以便当这些 AJAX POST 返回时，我可以将来自该特定 POST 的返回数据放入正确的 div 中？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-07T01:54:08.430

你这样做了好几次，你总是引用同一个 obj。与此同时，你正在覆盖你的 obj.

当所有 ajax 函数都设置好并且响应开始到达（并且回调开始运行）时，所有 obj 引用都指向 obj 的最后一个值。

使用闭包将其保存在另一个变量中（在本例中为 myObj）：

```
xhr = (function(){
  var myObj = obj;
  return $.ajax({
      type: "POST",
      url: "../api.php",
      dataType: "json",
      data: data,
      success: function(data) {
        myObj.html(data.D['html']);
      }
  });
})(); 
```

它没有将 $.ajax() 返回的内容直接分配给 xhr，而是创建了一个匿名函数并立即调用它： `( function(){ /* code */ } )()`

该函数“备份” obj 到 myObj（匿名函数的本地变量），然后简单地返回 $.ajax() 返回的内容。

我没有测试这段代码。告诉我是否有任何错误。

# asp.net-mvc-4 - 如何配置 Upshot 以将 ViewModel 的部分更新返回到服务器？

> ID：10051047
> 
> 赞同：9
> 
> 时间：2012-04-07T01:43:37.263
> 
> 标签：asp.net-mvc-4, upshot

我使用[Steven Sanderson 的说明](http://blog.stevensanderson.com/2012/03/06/single-page-application-packages-and-samples/)创建了一个单页应用程序 (ASP.NET MVC4) 。我目前看到的问题是，每当我编辑一个项目并保存更改时，Upshot 会将整个项目发送回服务器，而不仅仅是预期的修改后的属性。（我知道这一点是因为 firebug 可以检查发送到服务器的内容）。

我很确定结果应该能够只发送修改后的属性，因为它使用了淘汰的可观察对象，因此它可以跟踪哪些已更改，哪些未更改。

我的问题是，目前这是否可能（可能是某种配置参数）还是我应该等待未来的版本来实现它？Upshot 是一个相当新的库，因此现在很难找到文档。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-06T06:19:55.560

目前，upshot 只能将整个对象提交给服务器。它旨在与 SPA 一起使用`DataController`，其`Submit`方法将 a 作为输入参数`ChangeSet`- 正是结果通过线路发送的内容。（原始实体、更改的实体和执行的操作 - eq 2 表示更新）。

但是，*结果*和*DataController*都已被 Microsoft 团队搁置，因此可能需要一段时间才能出现新版本。

**更新**

您可以在[此处](http://aspnetwebstack.codeplex.com/discussions/358133)找到参考。他们谈到*暂时“暂停”* SPA 项目。如果您查看源代码，您会发现*结果*是 SPA 包的一部分，并且既`upshot`没有也`DataController`没有包含在 RC 版本中。

# c++ - 在 C++ 中创建一个只有用户才能看到和编辑文件的权限的文件

> ID：10051048
> 
> 赞同：0
> 
> 时间：2012-04-07T01:43:44.927
> 
> 标签：c++, c, windows, permissions

我想制作一个只有我的程序有权写入/读取/可视化文件的文件，在 Windows 7 中我们拥有这些权限，但我不知道如何从我创建的用户中创建，用户将是只有我的可执行文件，只有它可以在文件中看到、读取和写入。

我看到一个程序这样做，但我不知道该怎么做。

在此先感谢，很抱歉没有发布代码，因为我不知道如何通过 C++ 处理 Windows 中的权限，所以这不会有帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-07T04:07:42.233

您不能将文件访问权限仅限于您的应用程序。您只能限制对特定用户帐户和/或组的访问。查看`SetFileSecurity()`and`SetNamedSecurityInfo()`函数。如果具有足够权限的合适用户帐户运行您的应用程序（或任何应用程序），或者您的应用程序（或其他应用程序）模拟此类帐户，它将能够访问该文件。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-07T01:57:56.977

Windows 中的权限基于用户而不是应用程序。因此，您不能将对文件的访问限制为特定程序/可执行文件。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-07T02:30:27.523

如果您将文件访问功能分离到不同的可执行文件中并将其作为服务安装，您可以执行类似的操作，但这会做很多工作，并且无论如何您都必须保护该服务的 API。

我建议您改为加密文件的内容。

# jquery - 保留错误验证的 AJAX 表单（使用 simple_form）

> ID：10051050
> 
> 赞同：19
> 
> 时间：2012-04-07T01:44:04.713
> 
> 标签：jquery, ruby-on-rails, ajax

这可能是我问过的比较困难的问题之一，但我被困了几天，我认为最好从更有经验的 Rails 社区获得支持。

我正在开发一个大致遵循本指南的虚拟应用程序...... [ajax/jquery 教程](http://notes.rehali.com/?p=97)......

进行我自己的自定义，该指南帮助我创建了一个“品牌”（包括嵌套模型“模型”、“子模型”和“样式”）提交表单（使用 simple_form）和品牌列表在同一页面上。这非常有效，并且强制执行验证（对于我的模型）。但是，当我将表单和品牌列表放在同一页面上时，我丢失了提交失败时出现的整洁的内联验证错误（见下图）。无法让内联错误正常工作让我意识到我需要了解更多关于渲染的知识。这就是为什么我专注于寻找这个问题的答案

![在此处输入图像描述](../Images/a39801008f6db8ef924c826c6aeb91e4.png)

...这是清单：

![在此处输入图像描述](../Images/606657676e00c64f88e5a5b35007f33c.png)

下面是索引操作的控制器：

```
 def index

    #This is for the product listing

    @brands = Brand.all.reverse 

    #This is for the form   

    @brand = Brand.new
    @model = Model.new
    @submodel = Submodel.new
    @style = Style.new

    respond_to do |format|
      format.html
    end
  end 
```

上面的表单创建了用于嵌套提交表单的品牌、型号、子型号和样式......下面是表单的代码：

```
<%= simple_form_for @brand, :html => { :class => 'form-horizontal' }, :remote => true do |m| %>

  <fieldset style = "margin-top:34px;">
    <legend></legend>
    <%= m.input :name, :label => 'Brand' %>         
    <%= m.simple_fields_for :models, @model do |p| %>    
      <%= p.input :name, :label => 'Model' %>
      <%= p.simple_fields_for :submodels, @submodel do |s| %>
        <%= s.input :name, :label => 'Submodel' %>
        <%= s.simple_fields_for :styles, @style do |ss| %>
          <%= ss.input :name, :label => 'Style' %>
        <% end %>
      <% end %>
    <% end %>

    <div class="form-actions">
      <%= m.submit nil, :class => 'btn btn-primary' %>
      <%= link_to 'Cancel', brands_path, :class => 'btn' %>
    </div>
  </fieldset>
<% end %> 
```

现在你可以看到我正在使用`:remote => true`......我希望表单创建新的“品牌”，或者让表单重新加载内联验证错误。目前我的创建动作看起来像：

```
def create
    @brand = Brand.new(params[:brand])

    respond_to do |format|
      if @brand.save
        format.html { redirect_to brands_url, notice: 'Brand was successfully created.' }
        format.json { render json: @brand, status: :created, location: @brand }
        format.js
      else
        format.html { render action: "index" }
        format.json { render json: @brand.errors, status: :unprocessable_entity }
        format.js { render 'reload' }
      end
    end
  end 
```

出现在下面的代码`if @brand.save`似乎可以工作..但是“else”下面的代码不能按照我想要的方式工作。那么当@brand 不保存时会发生什么？我相信 index 操作中的代码正在运行，然后 @brand.errors 被转换为 json （我假设这是为了 simple_form 验证错误），然后 reload.js.erb 正在运行..

在尝试重新加载表单（出现验证错误）时，我已将该行`$("#entryform").load(location.href+" #entryform>*","");`放入 reload.js.erb ...当我将无效数据放入我的表单时，正在调用 reload.js.erb，但发生的只是表单字段重新加载空白，而不是输入数据和内联验证错误。

我希望我在这里提供了足够的信息来获得帮助。在这方面真的很挣扎。谢谢！

* * *

## 回答 #1

> 赞同：30
> 
> 时间：2012-04-07T12:41:43.643

我认为你可以通过将你的表单放在一个部分中（我们称之为它`simple_form`）来简化这一点，并将这段代码放在 reload.js.erb 中：

```
$("#entryform").html("<%= escape_javascript(render :partial => 'simple_form') %>"); 
```

我不熟悉 jQuery 的`load`方法，但我认为它会执行第二个请求。渲染错误的关键是您在渲染表单时使用的实例变量 ( `@brand`) 必须与您尝试在 create 中保存的变量相同，因此您可以检查其上的错误。这就是为什么您总是使用`render`而不是`redirect_to`在您想要呈现错误时使用。如果你做一个重定向，你会开始一个新的请求，意思`@brand`是重新初始化。我假设你`$(...).load(...)`有同样的问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-10-02T20:16:25.800

感谢所有关于这个的问答。它救了我。

将@tsherif 的文件结构简化一个档次（假设您已经有一个 js 文件），我通过直接在表单上调用 render 并通过 javascript/coffeescript 显示它来解决这个问题。

```
#immediate_controller
def action_with_modal
  @brand = params[:failed_brand] || Brand.new
end

#brands_controller
def create
  @brand = Brand.new(params[:brand]) 

  respond_to do |format|
    if @brand.save
      ...
    else
      params[:failed_brand] = @brand
      ...
      format.js { render 'simple_form' }
    end
  end
end

#coffeescript
$('form-selectors-here').on 'ajax:error', @reRegister

reRegister: (e, data) =>
  $("div-that-contains-form").html(data.responseText) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-04-24T22:15:31.607

检查这一点：调用 .html(...) 将复制表单包装器 div。使用 .replateWith(...) 代替 =]

# c++ - 奇怪的typedef定义C++

> ID：10051051
> 
> 赞同：0
> 
> 时间：2012-04-07T01:44:30.663
> 
> 标签：c++, c

> **可能重复：**
> [Typedef 函数指针？](https://stackoverflow.com/questions/4295432/typedef-function-pointer)

```
TE0300_Open = (_TE0300_Open)GetProcAddress(hInstLibrary, "TE0300_Open");
typedef int (WINAPI *_TE0300_Open)(unsigned int* PHandle, int CardNo); 
```

有人可以解释一下这段代码的作用吗？我知道这`typedef`用于为现有类型分配替代名称，但我根本不理解这种情况。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-07T01:47:50.197

`typedef int (WINAPI *_TE0300_Open)(unsigned int* PHandle, int CardNo);`

这一行定义了一个函数指针，该函数指针指向`WINAPI`返回一个 的调用约定函数`int`，并采用一个`unsigned int *`和一个`int`。函数指针类型被赋予别名`_TE0300_Open`。

考虑以下示例：

```
typedef void (*func)();

void foo (func f) //notice we have a nice type name here
{
    cout << "Calling function...";
    f();
}

void bar(){}

int main()
{
    foo (bar);
} 
```

我相信 C++11 在使用函数指针时也增加了对不那么讨厌的语法的支持：

```
using func = void (*)(); 
```

至于您的`GetProcAddress`电话，这会从库中加载一个函数。您将其分配给函数指针，并且您可以像使用原始函数一样使用该函数指针。

在您的示例中，您现在可以`TE0300_Open`像通常那样调用`_TE0300_Open`. 还应注意，`_TE0300_Open`这是为实现保留的名称。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-07T01:47:17.997

它为函数指针声明了一个 typedef, `_TE0300_Open`。

# iphone - 创建一个对象并让它等到它被创建

> ID：10051053
> 
> 赞同：0
> 
> 时间：2012-04-07T01:44:32.690
> 
> 标签：iphone, objective-c, grand-central-dispatch

好的，这就是我想要做的：

我有一个由一些网络数据填充的模型对象，我希望能够像这样创建它：

```
// createWithID will fire off a request to a server 
MyObject *newObject = [MyObject createWithID:123];
if(newObject){
   //do something!

} 
```

我遇到的问题是 createWithID 方法中的网络调用是异步的，因此该方法将始终在调用完成之前返回。

首先，这是一种可行的方法吗？我喜欢在方法中封装网络调用的想法。二、不阻塞主线程能做到吗？

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-07T03:21:16.993

为了稍微扩展@danh的答案，我会说你不应该有一个指向该对象的指针，直到它全部完成。例如：

```
[MyObject makeObjectWithID:123 completion:^(MyObject *object, NSError *error) {
  if (object == nil) {
    NSLog(@"error creating object: %@", error);
  } else {
    NSLog(@"created object: %@", object);
  }
}]; 
```

然后创建方法将是这样的：

```
+ (void)makeObjectWithID:(NSInteger)objectID completion:(void(^)(MyObject*,NSError*))handler {
  handler = Block_copy(handler);
  dispatch_async(dispatch_get_global_queue(0,0), ^{
    MyObject *object = [[MyObject alloc] initWithID:objectID];

    NSError *error = nil;
    BOOL succeeded = [object doTheExpensiveAndBlockingSetupThingWithError:&error];

    if (succeeded == NO) {
      [object release], object = nil;
    }

    dispatch_async(dispatch_get_main_queue(), ^{
      handler([object autorelease], error);
    });
  });
  Block_release(handler);
} 
```

原则上，我发现你制作的 API 越安全，你搞砸的可能性就越小。这种方式是安全的，因为您永远不会有指向部分构造的`MyObject`. 你不可能得到一个并且*没有*完全准备好使用。当然，没有取消机制，但您仍然可以扩展它以允许这样做。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-07T02:54:00.860

如果我理解你的话，MyObject 正在发出一个异步请求来完成它的设置，所以调用者不能假设它创建的实例已经准备好，直到异步设置完成。

解决这个问题的方法是让调用者知道设置已经完成。有一些很好的方法，包括让调用者成为 MyObject 的代表，或者让 MyObject 在完成后发布 NSNotification，但我倾向于使用块，因为我发现它通常会使调用者的代码更易于阅读。

这样做的方法是这样的......在 MyObject.h 中：

```
typedef void (^CompletionBlock)(id result, NSError *error);

+ (MyObject *)createWithId:(NSInteger)anId completion:(CompletionBlock)completion; 
```

如果需要，我的对象可以将块保留为 ivar（使用 @property(copy...)），然后在设置完成时调用它。

现在调用者将如下所示：

```
// do something to indicate activity, like show an activity indicator
MyObject *newObject = [MyObject createWithID:123 completion::^(id r, NSError *e) {
    // hide the activity indicator
    if (!error) {
        // code here gets executed when newObject is ready... update the ui accordingly
    }
}];

// code here gets executed right away, and should not assume that newObject is ready 
```

# java - 如何用缓冲区删除输入流的缓冲区？

> ID：10051055
> 
> 赞同：0
> 
> 时间：2012-04-07T01:45:02.893
> 
> 标签：java, io, bufferedinputstream

考虑带有缓冲区的 InputStream，例如 AudioInputStream (ieavailable() return >=0) 输入流正在读取一个变化的文件（一个从互联网不断下载的文件，未下载的部分用零打包）。

*   当它读取到未下载的部分时，将调用wait()
*   下载部分后，将调用 notify()

但是，当它被唤醒时，**如何确保它丢弃缓冲区（无用的零）并再次读取文件？**

预先感谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-07T01:57:20.860

我假设您正在`AudioInputStream`使用`FileInputStream`. 你应该做的是：

```
PipedInputStream pipeIn = new PipedInputStream();
PipedOutputStream pipeOut = new PipedOutputStream(pipeIn);
AudioInpuStream ais = new AudioInputStream(pipeIn, ..., ...); 
```

现在，当您下载更多文件时，您只需将其写入`pipeOut`.

# objective-c - 给 NSTextField 焦点-？

> ID：10051056
> 
> 赞同：2
> 
> 时间：2012-04-07T01:45:07.000
> 
> 标签：objective-c, cocoa, osx-lion, nstableview, nstextfield

我目前有一个表格视图，其中包含 NSTextFields 的单元格视图。目前，在行选择时，我正在向单元格视图发送以下消息，希望在单元格视图第一响应者状态中授予 NSTextView：

```
- (void)notifyOfSelectionInWindow:(NSWindow *)window {
    [[self textField] setEditable:YES];
    [[self textField] setSelectable:YES];
    // make textField (textView) first responder
    [[self textField] selectText:nil];
    [[[self textField] currentEditor] setSelectedRange:NSMakeRange([[[self textField] stringValue] length], 0)];      
} 
```

因为我不希望 NSTextFields 在未选择它们所在的行时可编辑，所以我也在我的自定义 NSTextField 子类中执行此操作：

```
- (void)textDidEndEditing:(NSNotification *)notification {
    [self setEditable:NO];
    [self setSelectable:NO];
    [super textDidEndEditing:notification];
} 
```

选择更新代码：（请注意，我也在此处更改行高）

```
- (BOOL)tableView:(NSTableView *)tableView shouldSelectRow:(NSInteger)row {
    // get the table veiw to animate/recalculate height of row
    NSMutableIndexSet *changedRows = [NSMutableIndexSet indexSet];
    [changedRows addIndex:row];
    [changedRows addIndex:[tableView selectedRow]];
    [tableView noteHeightOfRowsWithIndexesChanged:changedRows];
    [rowView notifyOfSelectionInWindow:[self window]]; 
    // ^ this in turn calls a method of the same name of the corresponding cell view
    return YES;
} 
```

问题是，这只有*一半*的时间有效。我第一次尝试选择一行时，第一响应者状态返回到表视图。第二次，它完美地工作，并且文本字段具有焦点。第三次，又断了。第四——完美！出于某种奇怪的原因，该代码每隔一段时间才有效......

有人知道为什么会这样吗？非常感谢任何有启发性的反馈。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-07T03:58:30.863

在 tableView 中从 textField 切换到 textField 时，会以意想不到的顺序调用事件（直到您考虑它）。

这里的问题是您的委托方法被调用的顺序。

假设您要从 textField1 转到 textField2。

一旦 textField1 已经处于活动状态并且您单击 textField2，它们就会像这样被调用：

```
textShouldBeginEditing  (textField2)
textShouldEndEditing    (textField1)
textDidEndEditing       (textField1)
textDidBeginEditing     (textField2) 
```

因为`textShouldBeginEditing`之前被调用`textDidEndEditing`（因为它需要确保它**可以**在放弃它的旧行之前选择行）你需要更新你`self.textField`的`textDidBeginEditing`。

# python - 如何让程序放弃对终端的控制？

> ID：10051058
> 
> 赞同：1
> 
> 时间：2012-04-07T01:45:13.130
> 
> 标签：python, shell, unix, terminal

我正在为 Linux 编写一个 Python 程序，该程序基本上使用终端向用户提供有关其初始化的反馈，然后它必须放弃对终端的控制并继续在后台执行。我怎样才能做到这一点？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-07T07:31:16.987

您可以使用 os.fork() 创建子进程：

```
import os
import time

msg =  raw_input("Enter message for child process")

x = os.fork()

if not x:
    for i in range(5):
        time.sleep(3)
        print msg 
```

os.fork() 在子进程中返回 0，在 paret 进程中返回子进程 ID 注意每个进程都有自己的局部变量副本。

希望这可以帮助

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-07T05:04:53.297

只需用[python-daemon](http://pypi.python.org/pypi/python-daemon)包装你的程序。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-09T11:51:27.323

在这里，分叉可能是正确的事情，并且更好地守护进程，但是在不更改脚本的情况下获得几乎相同的效果的简单方法是（正如对问题的评论所暗示的那样）只需将脚本放在后台。

`&`然而，不会做的是完全放弃与终端的连接。为此，请使用`nohup`：

```
(nohup python foo.py >foo-output &) 
```

是一种守护脚本的简单方法。这`nohup`意味着该进程在其控制终端运行时不会被终止，并且将脚本放入 subshel​​l 的背景`(...)`，然后退出，这意味着它最终成为 init 进程的子进程。实际上，这就是“守护进程”的大部分含义。

这是一种比原始问题真正要求的更通用的技术，但它仍然很有用。

# javascript - 在 JavaScript 中为其命名空间字符串表示获取构造函数的最佳方法

> ID：10051060
> 
> 赞同：1
> 
> 时间：2012-04-07T01:45:18.673
> 
> 标签：javascript

如果我有这样的刺痛，`"AppNamespace.SomeObject.ClassName"`并且我知道该字符串代表和实际的构造函数，那么在语句中使用它的最佳/推荐方法是`var foo = new AppNamespace.SomeObject.ClassName`什么？

我可以做：

```
var s = "AppNamespace.SomeObject.ClassName"
var foo = new (eval(s)) 
```

或类似的东西：

```
var parts = "AppNamespace.SomeObject.ClassName".split(".")
var foo = new (window[parts[0]][parts[1]][parts[2]]) 
```

但我想知道是否有更好的解决方案不涉及`eval`或不必拆分字符串并循环遍历其部分。有没有人有任何想法？如果不是，基于我提出的两种解决方案，每种解决方案的优缺点是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-07T01:49:23.123

`eval`是邪恶的。使用循环选项。

循环选项的好处是对象是通过引用传递的。所以：

```
function getObjectFromString(str) {
    var parts = str.split("."), curr = window, last = parts.pop(), p;
    while( p = parts.shift()) curr = curr[p];
    return curr[last];
} 
```

此函数返回目标对象，在您的示例中是您正在寻找的构造函数。

```
var s = "AppNamespace.SomeObject.ClassName";
var foo = new (getObjectFromString(s)); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-07T01:53:41.233

你可以做...

```
var obj = new ('AppNamespace.SomeObject.ClassName'
                .split('.')
                .reduce(function(object, key) {
                            return object[key];
                        }, window)); 
```

[js小提琴](http://jsfiddle.net/JRcPu/)。

在较旧的浏览器上，您可以 shim [`reduce()`](https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/Array/Reduce)。

此代码按句点 () 拆分字符串，`.`然后从左到右遍历每个字符串，从`window`作为起始对象开始（如果不是，则更改它）并获取每个子属性，直到它到达最右边（`ClassName`在您的例子）。

实例化这个`new (...)`对象。

你可以把它写成一个可重用的函数......

```
var getObjectByString = function(string, baseObject, delimiter) {
    // Only checks for string primitives, but that's OK for this example.
    if (typeof string !== 'string') {
        throw new TypeError('First argument is required and must be a string.');
    }

    baseObject = baseObject || window;
    delimiter = delimiter || '.';

    return string
            .split(delimiter)
            .reduce(function(object, key) {
                      return object[key];
                    }, baseObject));
}; 
```

# jquery - 淡出并显示 jquery 按钮在普通 index.html 中有效，但在 wordpress 中无效

> ID：10051063
> 
> 赞同：0
> 
> 时间：2012-04-07T01:45:47.947
> 
> 标签：jquery, wordpress, jquery-selectors

这可能是一个 Dum 错误，可以在几秒钟内修复，但一直在寻找一段时间，不知道如何使其工作

我基本上有这个代码`

```
 <!DOCTYPE html>
   <html>
   <head>
   <style>
   .box,
   button { float:left; margin:5px 10px 5px 0; }
   .box { height:80px; width:80px; background:#090; }
   #log { clear:left; }

   </style>
     <script src="http://code.jquery.com/jquery-latest.js"></script>
   </head>
   <body>

   <button id="btn1">fade out</button>
   <button id="btn2">show</button>

   <div id="log"></div>

   <div id="box1" class="box">linear</div>
   <div id="box2" class="box">swing</div>

   <script>
   $("#btn1").click(function() {
     function complete() {
       $("<div/>").text(this.id).appendTo("#log");
     }

     $("#box1").fadeOut(1600, "linear", complete);
     $("#box2").fadeOut(1600, complete);
   });

   $("#btn2").click(function() {
    $("div").show();
     $("#log").empty();
   });

   </script>

   </body>
   </html> 
```

` 然后我想让它在 wordpress 中工作，所以我将样式移到 css 和 footer.php，如您在此处看到的

`

```
 <?php wp_enqueue_script("jquery"); ?>
                <script>
$("#btn1").click(function() {
function complete() {
$("<div/>").text(this.id).appendTo("#log");
}

$("#box1").fadeOut(1600, "linear", complete);
$("#box2").fadeOut(1600, complete);
});

$("#btn2").click(function() {
$("#box1").show();
$("#box2").show();
$("#log").empty();
});

</script> 
```

`

[http://testdomain.edgardoroldanonline.com/testpage/](http://testdomain.edgardoroldanonline.com/testpage/)

但它不起作用我已经放置了 wp_enquenue 和所有我可以看到的潜在问题，比如对不同版本的 jquery 的干扰，但不知道是什么导致了问题，我唯一知道的是有一次我把行放在页面中html代码，它工作。直到可视化编辑器摆脱它

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-07T01:53:16.040

你有一个javascript错误。

/testpage/:233 未捕获的类型错误：无法调用 null 的方法“单击”

你需要初始化 jQuery

```
jQuery(function(){
    jQuery("#btn1").click(function() {

        function complete() {
          jQuery("<div/>").text(this.id).appendTo("#log");
        }

        jQuery("#box1").fadeOut(1600, "linear", complete);
        jQuery("#box2").fadeOut(1600, complete);
    });

    jQuery("#btn2").click(function() {
    jQuery("#box1").show();
    jQuery("#box2").show();
    jQuery("#log").empty();
    });
}); 
```

# iphone - iPad 3 和 NSUserDefaults 问题

> ID：10051065
> 
> 赞同：3
> 
> 时间：2012-04-07T01:46:47.720
> 
> 标签：iphone, ios, xcode, ipad

我有几个在 iTunes 中获得批准和可用的应用程序。我在装有 iOS 5.0 的 iPad 2 上对它们进行了测试。它们是通过这些应用中的应用内购买解锁的一些功能。一旦用户成功购买了某个功能，我会检查以确保交易成功并通过设置 NSUserDefaults 变量来解锁它。

最近我的一些 iPad 3 用户一直在抱怨他们购买了一项功能，但它仍然是解锁的。我没有 iPad 3，所以我在 iPad 2 上测试了发布的代码，它工作得很好。

有没有其他人在 iPad 3 上遇到过同样的问题？iOS 5.1 中的 NSUserDefaults 是否存在一些错误或问题？

这是代码

```
NSArray *stringsArray2a = [[NSArray alloc] initWithObjects: @"1", nil];
        [[NSUserDefaults standardUserDefaults] setObject:stringsArray2a forKey:@"MyAppWeatherPackStr"];
        [[NSUserDefaults standardUserDefaults] synchronize]; 
```

然后我像这样检查它

```
 NSArray *purchasedAppArray = [[NSUserDefaults standardUserDefaults] objectForKey:@"MyAppWeatherPackStr"];
        NSString *purchasedAppStr = [purchasedAppArray objectAtIndex:0];

if([purchasedAppStr isEqualToString:@"1"])
    {
        //all good keep checking weather

    }
    else
{
//can't check weather
} 
```

* * *

## 回答 #1

> 赞同：-2
> 
> 时间：2012-04-07T02:25:52.800

我没有看到同步的意义，但更好的替代 NSUserDefaults 是：

```
NSUserDefaults *prefs = [NSUserDefaults standardUserDefaults];
[prefs setObject:forKey stringsArray2a:@"1"]; 
```

我不确定问题出在 NSUser 默认值上，因为我没有足够的运气拥有 iPad 3。

一个好主意是**不要**将应用内购买数据存储在 NSUserDefaults 中，因为您可以修改 plist 文件以使其看起来像您购买了它......

# javascript - 如何使用淘汰赛绑定新元素？

> ID：10051070
> 
> 赞同：6
> 
> 时间：2012-04-07T01:47:18.547
> 
> 标签：javascript, data-binding, web, knockout.js

页面加载后如何绑定新元素创建？

我有这样的东西

```
system = function()
{

    this.hello = function()
    {
        alert("hello");
    }

    this.makeUI = function(container)
    {
        div = document.createElement("div");
        div.innerHTML = "<button data-bind='click: hello'>Click</button>";
    }
}

ko.applyBindings(new system); 
```

如果我试试这个

```
this.makeUI = function(container)
{
    div = document.createElement("div");
    div.innerHTML = "<button data-bind='click: hello'>Click</button>";
    ko.applyBindings(new system,div);
} 
```

但根据[这些](https://stackoverflow.com/questions/8281875/knockout-js-update-b) [帖子](https://stackoverflow.com/questions/7342814/knockoutjs-ko-applybindings-to-partial-view%20indings)，它不会起作用。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-04-07T05:17:00.823

淘汰赛的目标是只在一组 dom 元素上调用一次淘汰赛。因此，如果您在整个文档上重复调用 applyBindings，您将遇到多个绑定的问题。

在某些情况下，多次调用 applyBindings 是合理的，这是在第一次绑定时不在 dom 中的局部视图的情况下，因此未绑定。您可以通过有选择地将 applyBindings 限定到该 dom 元素来绑定它们。

这是您尝试实现的目标的示例。您的问题是您没有插入您创建的节点。

[http://jsfiddle.net/madcapnmckay/qSqJv/](http://jsfiddle.net/madcapnmckay/qSqJv/)

对于这个特定的例子，我不会推荐这种方法，有更好的方法。

如果您想动态创建 dom 元素并通过敲除绑定它们，最常见的方法是使用内置的模板功能，该功能负责插入元素并绑定它找到的任何数据绑定属性。

因此，如果您想创建许多按钮，您可以这样做

```
this.makeUI = function(container)
{
    self.buttons.push({
        text: "button " + self.buttons().length,
        handler: this.hello
    });
} 
```

这是一个小提琴。

[http://jsfiddle.net/madcapnmckay/ACjvs/](http://jsfiddle.net/madcapnmckay/ACjvs/)

希望这可以帮助。

# c++ - rand() 函数在 C++ 中无法正常工作

> ID：10051071
> 
> 赞同：-1
> 
> 时间：2012-04-07T01:47:42.627
> 
> 标签：c++, search, random, binary

我正在编写一个游戏，其中计算机选择用户必须猜测的随机数。然后，由用户选择计算机必须猜测的数字（他只是猜一个数字）。问题是我在游戏第二部分使用的 rand() 函数有时会提供一个超出新范围的数字。例如，如果新范围是低 = 4 和高 = 10，rand() 提供 12，这是不正确的。我试图理解为什么会出现这个错误，但我找不到它。我正在用 Dev-C++ 编写。代码就在下面，然后是输出。感谢您的帮助和时间。

```
#include<iostream>
#include<conio.h>
#include<stdlib.h>
#include<time.h>

using namespace std;

int main()
{
  int computer_guess, nbr, nbrguesses, count_user_guess=0, count_computer_guess=0; 
  char user_comparison;

  int  low=1, high=99;  //initialize low to the lower boundary and high to the higher     boundary

  srand(time(0));
  nbr=rand()% 99 + 1;  //computer chooses a random number between 1 and 99...

  do
  {
    cout << "guess a number now! " << endl;
    cin >> nbrguesses;     //user enters the number he guessed...
    if ( nbrguesses>nbr)
       cout << "too big" <<endl;
    else if ( nbrguesses<nbr)
       cout << "too small" << endl;
    else if ( nbrguesses==nbr)
       cout << " you found the correct number! " <<endl;

    count_user_guess++;  //count the number of guesses from the user
  }
  while (nbrguesses!=nbr);

  cout << "you tried " << count_user_guess <<" times to find the right number " <<      endl<<endl;

  cout << "----------------------------------------------------------------------" << endl;
  cout << "Now, the computer will guess your number " << endl;

  do
  {
    srand(time(0));
    computer_guess=rand()% high + low;    //computer guesses the number
    cout << "computer guess: " << computer_guess <<endl;
    cout << "is it the correct number?" << endl;
    cin >> user_comparison;     //if user enter 
    if (user_comparison=='>')  // character '>' it means the number guessed by computer is too big
    {
       cout << "too big" <<endl;
       high= computer_guess-1;   //high is given a new boundary 
       cout << "***Current value of high = " << high << " and low = " << low << endl;    //display current boundaries

    }
    else if ( user_comparison=='<')  //the number guessed by computer is too small
    { 
      cout << "too small" << endl;
      low= computer_guess+1;  //low is given a new boundary
      cout << "***Current value of low = " << low << " and high = " << high << endl;  //display current boundaries

    }
    else if ( user_comparison=='=')
       cout << "Computer found the correct number! " <<endl;

    count_computer_guess++;  //count number of guesses from computer
  }
  while (user_comparison!='=');

  cout << "The computer tried " << count_computer_guess <<" times to find the right number " << endl;

  cout << "The Game is over now, have a good day!" << endl;
  getch();

  return 0; 

}

//**************Output******************************************

guess a number now!
50
too big
guess a number now!
25
you found the correct number!
you tried 2 times to find the right number

----------------------------------------------------------------------
Now, the computer will guess your number
computer guess: 11
is it the correct number?
>
too big
***Current value of high = 10 and low = 1
computer guess: 3
is it the correct number?
<
too small
***Current value of low = 4 and high = 10
computer guess: 12
is it the correct number? 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-07T01:54:29.353

你必须更换

```
computer_guess=rand()% high + low; 
```

经过

```
computer_guess=rand()%(high- low + 1) + low; 
```

在您的示例中，您有低 = 4 和高 = 10。但是您想要一个介于 0 和 6 之间的随机数并添加 4。不是介于 0 和 10 之间的一个，从那时起您可以获得高达 14 的结果。如果您不想包括上限（间隔 [low,high[ 而不是 [low,high] ），您必须省略括号中的 +1。

**为什么**

rand() 返回一个相当大的整数。我们想从中得到一个区间 [a,b] 中的随机数。如果我们取 rand()%5，我们会得到一个 0,1,2,3 或 4 的数字，所以从区间 [0,4] 开始。通常 rand()%C 给出区间 [0,C-1] 内的随机数。

如果我们添加一个常数，例如 Rand()%C + D，则间隔移动：[D,C-1 +D]。回到问题，我们希望区间为 [a,b]。因此，我们希望下键 a=D，上键 C-1+D = b。这我们可以转换为 C = b-D+1 = b-a+1。所以我们要使用 rand()%(b-a+1) + a。

希望这能解释一下事情是如何运作的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-07T01:53:57.270

你很接近，但试试这个：

`rand()%(high-low)+low;`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-07T01:54:27.633

```
srand(time(0));
computer_guess=rand()% high + low;    //computer guesses the number 
```

首先，不要`srand`在循环内调用。只需在程序启动时调用一次。

其次，这个逻辑是错误的。它应该是：

```
computer_guess=low + (rand() % (high-low+1)); 
```

（这假设 high 和 low 包含在内。也就是说，如果 high 是 10，low 是 1，那么 1 和 10 都是可以接受的猜测。）

# java - 如何让终端模拟器发送点击拖动消息？

> ID：10051074
> 
> 赞同：2
> 
> 时间：2012-04-07T01:48:09.353
> 
> 标签：java, vim, terminal, emulation, xterm

我是一名业余程序员，有兴趣在[http://javassh.org/download/source/de/mud/terminal/vt320.html](http://javassh.org/download/source/de/mud/terminal/vt320.html)向 vt320 终端仿真器添加点击拖动方法。我正在查看鼠标按下功能的源代码并发现了这一点：

```
byte b[] = new byte[6];
b[0] = 27;
b[1] = (byte) '[';
b[2] = (byte) 'M';
b[3] = (byte) mousecode;
b[4] = (byte) (0x20 + x + 1);
b[5] = (byte) (0x20 + y + 1);

write(b); // FIXME: writeSpecial here 
```

其中 x 和 y 是字符位置，mousecode 与鼠标按钮有关。添加鼠标拖动消息似乎相当简单。谁能指出字节应该是什么方向？还是我错过了一个非常明显的障碍？我最感兴趣的是将点击拖动发送到 vim，在 Connectbot for android 上运行。似乎拥有这将是一件非常甜蜜的事情。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-09T14:07:04.443

[xterm 的ctlseqs](http://invisible-island.net/xterm/ctlseqs/ctlseqs.html)文档可能最好地描述了终端鼠标模式。综上所述，当终端处于其中一种鼠标上报模式时，发送事件的形式为

CSI M Ps Px Py

其中 CSI 是单个 C1 CSI 控件 ( `0x9b`) 或两字节序列 ESC ( `0x1b`) [.

Ps、Px 和 Py 将“状态”、x 和 y 坐标编码为单个字节，该字节偏移`0x20`以确保它是 GL 可打印而不是 C0 控制字节。Px 和 Py 应该是显而易见的。Ps 是一个位掩码，包含以下字段：

*   位 0 到 1 编码按钮编号；`0`to`2`用于按钮 1 到 3，或`3`用于释放（它不编码哪个按钮被释放）
*   如果修改器被保持，则设置位 2 `Shift`（尽管大多数终端将在内部捕获鼠标并且在这种情况下不会将其报告给应用程序）
*   `Alt`如果保持修饰符，则设置位 3
*   `Ctrl`如果保持修饰符，则设置位 4
*   如果鼠标事件是拖动而不是按下，则设置第 5 位。
*   位 6 设置为将鼠标按钮范围扩展到按钮 4 和 5，用于滚轮。

共有三种鼠标模式使用此报告，均由 DECSM 设置；设置 DEC 私有模式（CSI ? Pn h）：

*   模式 1000 仅报告鼠标按下和释放事件
*   模式 1002 报告鼠标按下、释放和按住（拖动）按钮时的动作
*   模式 1003 报告鼠标按下、释放和运动事件，即使没有按住按钮

# twitter - twitter api中的批量查询？

> ID：10051077
> 
> 赞同：5
> 
> 时间：2012-04-07T01:48:28.650
> 
> 标签：twitter

我需要运行一个返回用户列表的查询，以及有关这些用户的数据。假设我考虑一个人，我想知道他/她的所有追随者在哪里。这个查询：

```
http://api.twitter.com/1/followers/ids.json?screen_name={screen_name} 
```

返回此人的关注者的用户 ID 列表。然后我可以将每个用户 ID 插入到这个查询中：

```
http://api.twitter.com/1/users/lookup.json?user_id={user_id} 
```

获取有关用户的信息，包括位置。但这意味着如果此人有 1000 个关注者，我将不得不调用第二个查询 1000 次。最好做一个“加入”（因为它会在 SQL 中调用），我们可以在其中询问关注者及其位置，并在一个查询中执行此操作，但我不知道如何执行此操作。

这可能吗？此外，在要求用户查找时，是否可以指定您只需要一个字段而不是整个用户记录（有点像在 SQL中询问`select single_field`而不是询问）？`select *`

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-07T02:22:11.880

`user_id`您可以在查询中枚举多个s。示例：
[http ://api.twitter.com/1/users/lookup.xml?user_id=351927492,8602462,132533067,16984020,131217651,125764179](http://api.twitter.com/1/users/lookup.xml?user_id=351927492,8602462,132533067,16984020,131217651,125764179)

但是您每次查询的上限为 100 个值（名称、ID），因此对于拥有 1000 个关注者的用户，您必须进行 10 个查询。

**更新**1.1 版本的 API 正确 URL 为[http://api.twitter.com/1.1/users/lookup.json?user_id=351927492,8602462,132533067,16984020,131217651,125764179](http://api.twitter.com/1.1/users/lookup.json?user_id=351927492,8602462,132533067,16984020,131217651,125764179)

# mysql - MySQL：显示在 Month1 和 Month2 或 Month3 但不是同时购买的客户

> ID：10051078
> 
> 赞同：0
> 
> 时间：2012-04-07T01:48:46.593
> 
> 标签：mysql, sql

我是 MySQL 的新手，所以请原谅我的无知。

我认为这会起作用，但事实并非如此。

```
SELECT DISTINCT c_id
,       c_name
FROM    a_bkorders.bkv_CustOrders
WHERE   Date_Format(order_date, '%Y-%m') = @m_one
AND     c_id IN (
            SELECT DISTINCT c_id
            FROM    a_bkorders.bkv_CustOrders
            WHERE   Date_Format(order_date, '%Y-%m') = @m_two 
            XOR     Date_Format(order_date, '%Y-%m') = @m_three )
; 
```

所以我尝试了这个进行比较，它也没有返回我所期望的：

```
SELECT DISTINCT c_id
,       c_name
FROM    a_bkorders.bkv_CustOrders
WHERE   Date_Format(order_date, '%Y-%m') = @m_two 
XOR     Date_Format(order_date, '%Y-%m') = @m_three
; 
```

我知道我可能忽略了一些简单而基本的东西。:-/ 有人能指出我正确的方向吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-07T03:27:26.990

条件

```
WHERE   Date_Format(order_date, '%Y-%m') = @m_two 
  XOR   Date_Format(order_date, '%Y-%m') = @m_three ) 
```

不做你想做的事。如果你仔细想想，你会发现在这种情况下，XOR 与 OR 相同，因为一个 order_date 值不可能出现在两个不同的月份。WHERE 子句对每一行进行评估，因此一次只有一个 order_date 值。

您确实需要在月份 @m_two 或 @m_three 中的 order_date 值，但不是全部。您想排除同时出现的那些。你可以使用一堆 EXISTS 和 NOT EXISTS 条件，或者你可以做这样的事情。（这有点骇人听闻，所以比我想的要多。）

```
SELECT
  c_id, c_name
FROM a_bkorders.bkv_CustOrders
WHERE Date_Format(order_date, '%Y-%m') IN (@m_one,@m_two,@m_three)
GROUP BY c_id, c_name
HAVING -- some order from month @m_one
  MAX(CASE WHEN Date_Format(order_date, '%Y-%m') = @m_one THEN 1 END) = 1
AND -- having orders from exactly two distinct months of the three in question
  COUNT(DISTINCT Date_Format(order_date, '%Y-%m')) = 2; 
```

换句话说，这会从订单表中选择 c_id、c_name 值，这些值在@m_one 中至少出现一次，并且恰好出现在所讨论的三个月中的两个月中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-07T06:31:32.817

我发现这种方法更明显：

```
SELECT DISTINCT
    c_id,
    c_name
  FROM a_bkorders.bkv_CustOrders
 WHERE Date_Format(order_date, '%Y-%m') = @m_one
   AND c_id IN (
    SELECT c_id
      FROM a_bkorders.bkv_CustOrders
     WHERE (
        (CASE WHEN Date_Format(order_date, '%Y-%m') = @m_two THEN 1 ELSE 0 END) +
        (CASE WHEN Date_Format(order_date, '%Y-%m') = @m_three THEN 1 ELSE 0 END) = 1) )
; 
```

我没有 MySQL 数据库来测试它。这里的逻辑很简单：

*   如果订单月份与给定月份匹配，则每个[CASE ... END](http://dev.mysql.com/doc/refman/5.0/en/case-statement.html)表达式都会产生`1`；
*   并且根据您的情况，应该只使用其中一个月份，所以 sum 应该是`1`。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-07T02:08:26.637

我不太确定您的数据是什么样的，但我假设您有 2 个表，一个包含客户数据，另一个包含通过和 ID 与客户相关联的订单数据。所以，这样的事情应该有效：

```
SELECT DISTINCT customer.id
FROM customers
LEFT JOIN orders
WHERE (Date_Format(orders.date, '%Y-%m') = @m_one AND Date_Format(orders.date, '%Y-%m') = @m_two)
OR (Date_Format(orders.date, '%Y-%m') = @m_one AND Date_Format(orders.date, '%Y-%m') = @m_three) 
```

显然用你自己的替换表名，但我相信你会得到你想要的。

# javascript - 在 jQuery 中，我可以使用 slideDown() 作为具有大内容的 div 的向下滚动功能吗？

> ID：10051081
> 
> 赞同：0
> 
> 时间：2012-04-07T01:50:33.063
> 
> 标签：javascript, jquery, html

我想要的是使用比我拥有的功能更平滑的向下和向上滚动效果。

我有一个外部 div（带有溢出：隐藏）和一个宽度较小的 div（class='all_content'）。

```
<a href='#' class='up'>Up</a> 
<a href='#' class='down'>Down</a>
<div class='container'>
<div class='all_content'> All the content is here </div>
</div> 
```

我有那个代码：

```
$(".down").click(function () {
        $(".all_content").animate({marginTop: '-=20px'}, 0);
    });

$(".up").click(function () {
        $(".all_content").animate({ marginTop: '+=20px' }, 0);
    }); 
```

但是 +20px 的边距感觉真的很草率。

我可以使用 slideDown() 吗？我应该使用 scrollTop 吗？

提前致谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-07T02:00:57.787

你会想要[`scrollTo()`插件](http://flesler.blogspot.com/2007/10/jqueryscrollto.html)，你可以这样调用它：

```
$(".all_content").scrollTo({top: "+20px"}, 1000); 
```

编辑：这是您发布的代码的修订版：

```
$(".down").click(function() {
    $(".all_content").scrollTo({
        top: '-=20px'
    }, 1000);
});

$(".up").click(function() {
    $(".all_content").scrollTo({
        top: '+=20px'
    }, 1000);
});​ 
```

确保`scrollTo`在包含主 js 文件之前包含插件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-07T02:01:18.230

不应该是一个问题，如果你定义你的 div 与溢出：滚动是这样的：

```
div 
{
    width:150px;
    height:150px;
    overflow:scroll;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-07T02:05:16.023

您可以使用 jquery scrollTop() 方法：

```
$(".all_content").scrollTop(20); 
```

# java - 不支持 Ubuntu 11.10 java.awt.Desktop

> ID：10051082
> 
> 赞同：3
> 
> 时间：2012-04-07T01:51:22.380
> 
> 标签：java, linux, ubuntu, desktop

我收到 java.awt.Desktop 不支持错误。

```
if(!Desktop.isDesktopSupported())
    System.out.println("Desktop is not supported");
Desktop desktop = Desktop.getDesktop();
URI uri = new URI(twitterUser.link) 
```

线程“AWT-EventQueue-0”中的异常 java.lang.UnsupportedOperationException：在 java.awt.Desktop.getDesktop（未知来源）的当前平台上不支持桌面 API

我使用 Gnome 3.2 和 java 1.7.0_03 在 Ubuntu 11.10 上运行它

我已经在线阅读了这个错误，因为 gnome 缺少特定的库，但我不确定 gnome 缺少哪些库。

非常感谢您的建议和帮助。

# formatting - 使用KVC将数字格式化为两位小数？

> ID：10051083
> 
> 赞同：1
> 
> 时间：2012-04-07T01:51:30.640
> 
> 标签：formatting, numerical, kvc

下面的代码将滑块输出连接到窗口中的标签。连接有效。但是，我无法格式化数字显示。例如，我只想显示两位小数。我在任何地方都找不到示例。谢谢

```
#import <Foundation/Foundation.h>
@interface appController : NSObject{
float foo;
}
@property float foo;

@end

#import "appController.h"
@implementation appController
@synthesize foo;
-(id)init{
self = [super init];
if (self) {
    [self setValue:[NSNumber numberWithFloat: 50.00] forKey:@"foo"];
}
return self;
}
@end 
```

# java - Android:联系人电话.TYPE

> ID：10051084
> 
> 赞同：0
> 
> 时间：2012-04-07T01:51:35.297
> 
> 标签：java, android, android-contacts

我需要一点帮助。我只需要在此联系人列表中获取 Mobile 类型的号码。

使用此代码，我提取了所有数字，而我只需要使用移动类型..并将它们显示在列表中。帮助我，并提前感谢！

代码：

```
void ReadContacts(String sort) {
        final Uri uri = Phone.CONTENT_URI;
         final String[] projection = new String[] {
                Contacts._ID,
                 Phone.NUMBER,
                 Contacts.DISPLAY_NAME,
                 Phone.TYPE
         };
        String selection = ContactsContract.Contacts.IN_VISIBLE_GROUP + " = '1'";
        String[] selectionArgs = null;
        final String sortOrder = Contacts.DISPLAY_NAME + " COLLATE LOCALIZED ASC";

        m_curContacts = managedQuery(uri, projection, selection, selectionArgs, sortOrder);
        String[] fields = new String[] {Contacts.DISPLAY_NAME, Phone.NUMBER};
        m_slvAdapter = new SimpleCursorAdapter(this,R.layout.simple_list_item_mio,m_curContacts,fields, 
                new int[] {R.id.text1, R.id.text2});           

        m_slvAdapter.setFilterQueryProvider(new FilterQueryProvider() { 
            public Cursor runQuery(CharSequence constraint) {
                Log.d(LOG_TAG, "runQuery constraint:"+constraint);
                String selection = ContactsContract.Contacts.IN_VISIBLE_GROUP + " = '1'" +
                    " AND "+ Contacts.DISPLAY_NAME + " LIKE '%"+constraint+"%'";
                String[] selectionArgs = null;//new String[]{"'1'"};//, };
                Cursor cur = managedQuery(uri, projection, selection, selectionArgs, sortOrder);
                return cur;
            }

        }); 
```

ps：Phone.TYPE 手机是int 2。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-07T04:05:01.907

将 Selection 和 selectionArg 设置为以下：

```
selection="ContactsContract.Contacts.IN_VISIBLE_GROUP =? and Phone.TYPE=?";
selectionArgs=new String[]{"1", "2"}; 
```

# java - Java摇摆定时器问题

> ID：10051086
> 
> 赞同：0
> 
> 时间：2012-04-07T01:52:52.533
> 
> 标签：java, swing, timer

我（我认为）摆动计时器有问题。我编写了一些运行良好的代码，然后将其全部转移到我的新计算机上，但它立即无法运行。我用这个方法写了一个 GUI 类（基于 JFrame）：

```
public void Splash(){
    mainPanel.add(Empous.splash, BorderLayout.CENTER);
    while(Empous.splash.GetCount() < 3){
              //System.out.println(Empous.splash.GetCount());
    }
} 
```

该方法是从另一个类调用的。那个 Empous.splash 家伙是一个 JPanel 类，它只运行启动动画。它使用摆动计时器来做到这一点。在启动类中，侦听器通过以下代码调整我的框架的内容：

```
private class TimerListener implements ActionListener{
    public void actionPerformed(ActionEvent evt) {
        counter+=1;
        if (counter==1){
            title2.setText("In Association With");
            title1.setText("El Pollo Diablo Productions");
        }
        if (counter==2){
            remove(title2);
            remove(title1);
            repaint();
        }
        if (counter==3){
            timer.stop();
        }
    }
} 
```

现在，如果第一个块中的打印语句被注释掉，我的程序将在计时器停止后冻结。如果我取消注释，程序将打印出计数器的值，然后继续下雨。我想取出 print 语句并让 while 循环运行而不做任何事情，但我不能按照目前的行为方式这样做。任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-07T03:28:56.297

你看起来用这个 while 循环打破了 Swing 的线程规则：

```
while(Empous.splash.GetCount() < 3){
   //System.out.println(Empous.splash.GetCount());
} 
```

既然你已经有一个 Swing Timer 可以处理这类事情而不释放事件线程，为什么还要有这个？

不过，对于更具体的建议，是的，请发布[sscce](http://sscce.org)。

# pthreads - 关于 pthread 互斥锁的使用

> ID：10051088
> 
> 赞同：0
> 
> 时间：2012-04-07T01:53:08.783
> 
> 标签：pthreads, mutex

```
uint32 abc(int i)
{
    pthread_mutex_lock(&sharedvar_mutex[i]);

    sharedvar[i][j] = getvalue(i,j);

    pthread_mutex_unlock(&sharedvar_mutex[i]);
} 
```

这种用法正确吗？

这会像下面这样工作吗：说 i 可以是 1 或 2 并且 j 是全局常数。i=1 的线程A 调用此函数并获取互斥锁sharesvar_mutex[1] 并修改sharedvar[1][j]。thread-B 进入函数时 i=1 将在互斥体上等待。

thread-C where i=2 可以进入并获取互斥量sharesvar_mutex[2]并修改sharedvar[2][j]。

它会这样工作吗？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-07T22:52:59.207

是的，它会这样工作。

您可能需要考虑的一件事。看起来您正在使用互斥体数组来防止 getvalue 函数在给定 i 的同时执行，并在分配给 sharedvar[] 时防止出现竞争条件。如果您希望防止 getvalue 对给定的 i 同时执行，这可能很好。但是，与原子操作相比，在数组中设置整数时使用互斥锁只是为了防止竞争条件是多余的。

# python - python 3 - 在函数中赋值

> ID：10051094
> 
> 赞同：0
> 
> 时间：2012-04-07T01:53:46.440
> 
> 标签：python, function, user-interface, tkinter, assign

嗨，我有一个由修补程序列表框调用的函数，所以我不能从中返回值，
基本上我有一个全局对象，我想在函数中分配它我该怎么做

```
 rlink = ('http://stackoverflow', 'pastbin.com', 'unix.com')
    clink  = ' '
    # the function
    def listbinding(*args):
        idxs = reslinkbox.curselection()
        idx = int(idxs[0])

        clink = rlink[idx] 
```

我想将 rlink[idx] 分配给 clink，这是一个全局对象，我无法调用该函数，tkinter 列表框调用该函数，因此我无法从中返回 clink

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-07T01:55:15.193

使用[`global`](http://docs.python.org/release/3.2/reference/simple_stmts.html#global)关键字。

```
 rlink = ('http://stackoverflow', 'pastbin.com', 'unix.com')
 clink  = ' '
 def listbinding(*args):
     global clink
     idxs = reslinkbox.curselection()
     idx = int(idxs[0])

     clink = rlink[idx] 
```

`<obligitory>`使用像这样的全局变量通常不是一个坏主意，因为它会将您的程序状态涂抹在整个模块中，而不是将其分解为漂亮的离散块。防止这种情况是名称空间的全部目的。许多计算机科学家花费了多年辛勤的、吃力不讨好的工作来为您带来这些知识。`</obligitory>`

# android - 如何截断文本，android

> ID：10051099
> 
> 赞同：0
> 
> 时间：2012-04-07T01:54:36.160
> 
> 标签：android

我有一个字符串 headerText，其中包含文本“ABC（2-8 天）”。如何在“（”之后截断文本？我只需要作为 ABC 的文本，而不需要在“（”之后和“）”之前的任何内容

非常感谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-07T01:56:42.373

这应该有效：

```
String truncText = CurrentString.split("(")[0]; 
```

我不熟悉 Java，所以你可能最终需要这样做：

```
String[] separated = CurrentString.split("(");
String truncText = seperated[0]; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-07T02:01:01.017

您可以使用替换正则表达式来做到这一点：

```
String justABC = "ABC (2-8 Days)".replaceAll("\\(.*\\)","()"); 
```

的第一个参数`.replaceAll`表示我们要匹配（*任何东西*），第二个参数表示您想用括号替换匹配。双斜杠在这里转义括号。

# graph - 在 SAS 图中显示颜色渐变

> ID：10051101
> 
> 赞同：0
> 
> 时间：2012-04-07T01:54:45.320
> 
> 标签：graph, sas

我想使用具有颜色渐变的 SAS/GRAPH 绘制一个框（比如从红色到绿色）。我在网上找到了对一个名为的宏的引用，该宏`%colorscale`显然对此有所帮助，但找不到代码本身。有没有办法做到这一点？

例如，下面绘制一个绿色框。但是我怎样才能使颜色从一种颜色混合到另一种颜色呢？

```
data box;
   length function style color $ 8 text $ 15;
   xsys="3"; ysys="3";

   color="green";
   function="move"; x=10; y=65; output;
   function="bar";  x=30; y=95; style="solid"; output;
run;

proc ganno annotate=box;
run;
quit; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-09T17:47:53.460

我以前用过这个效果很好：

[http://www.datavis.ca/sasmac/colorramp.html](http://www.datavis.ca/sasmac/colorramp.html)

# android - 安卓菜单不显示

> ID：10051104
> 
> 赞同：1
> 
> 时间：2012-04-07T01:55:35.223
> 
> 标签：android, android-layout, android-menu

我试图获得一个自定义菜单，以便在我的手机上单击菜单按钮时显示。它根本没有显示。

我在此文件夹 /res/drawable 中有一个名为 register.png 的注册图标。我的 my_menu.xml 位于名为 /res/menu 的文件夹中。我的文件夹布局错误还是下面的代码有问题。

我将 menu.xml 重命名为 my_menu.xml 我更改了代码，现在我收到这些错误：

[2012-04-07 07:50:43 - HelloWebView] W/ResourceType（1560）：错误的 XML 块：找不到根元素节点 [2012-04-07 07:50:43 - HelloWebView] C:\Users\josh \workspace\HelloWebView\res\menu\my_menu.xml:4：错误：在包 'android' 中找不到属性 'showAsAction' 的资源标识符

my_menu.xml

```
<?xml version="1.0" encoding="utf-8"?>

<menu xmlns:android="http://schemas.android.com/apk/res/android">    
    <item android:id="@+id/register"          
        android:icon="@drawable/register"          
        android:title="@string/register"          
        android:showAsAction="ifRoom"/>    

</menu> 
```

主应用

```
public class HelloWebViewActivity extends Activity {
    WebView mWebView;

    /** Called when the activity is first created. */

    public void onCreate(Bundle savedInstanceState) {    
        super.onCreate(savedInstanceState);    
        setContentView(R.layout.main);    
        mWebView = (WebView) findViewById(R.id.webview);    
        mWebView.getSettings().setJavaScriptEnabled(true);    
        mWebView.loadUrl("http://www.Google.com");
        mWebView.setWebViewClient(new HelloWebViewClient());
    }

    private class HelloWebViewClient extends WebViewClient {   
        @Override    
        public boolean shouldOverrideUrlLoading(WebView view, String url) {        
            view.loadUrl(url);        
            return true;    
        }}

    @Override  
    public boolean onKeyDown(int keyCode, KeyEvent event) {    
        if ((keyCode == KeyEvent.KEYCODE_BACK) && mWebView.canGoBack()) {        
            mWebView.goBack();       
            return true;    
        }    
        return super.onKeyDown(keyCode, event);}

    @Override
    public boolean onCreateOptionsMenu(Menu my_menu) {    
    MenuInflater inflater = getMenuInflater();    
    inflater.inflate(R.menu.menu, my_menu);    

    return true;
    }
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-07T13:53:24.313

```
inflater.inflate(R.menu.my_menu, my_menu); 
```

仅通过删除即可解决代码
`android:showAsAction="ifRoom"`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-05-05T13:42:23.020

我有一个类似的问题。我没有收到任何错误，只是菜单按钮没有出现。我通过更改 android:theme="@style/AppBaseTheme" (或与 minSDK 兼容的任何其他主题) 解决了 Manifest.xml 文件中的问题。因为我弄乱了 style.xml 文件并创建了自己的文件。这导致了问题。可能会有所帮助。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-07T03:09:44.090

每件事看起来都很干净，只需干净并构建您的应用程序。而且，如果这些在卸载应用程序并重新安装后无法解决您的问题。

另外，如果您的 xml 名称是 Menu.xml，请使其成为 menu.xml ... 区分大小写

# windows - 如何在 Delphi 中检测 Windows XPe 关机原因？

> ID：10051105
> 
> 赞同：2
> 
> 时间：2012-04-07T01:55:59.787
> 
> 标签：windows, delphi, windows-xp-embedded, shutdown-hook

我使用以下过程正确拦截了 Delphi 2009 中的 Windows 关闭消息*WMQueryEndSession ：*

```
procedure TMyForm.WMQueryEndSession(var msg: TMessage); 
```

*本文建议我可以通过检查消息的LParam*来区分常规关闭和注销。

[http://msdn.microsoft.com/en-us/library/windows/desktop/aa376890%28v=vs.85%29.aspx](http://msdn.microsoft.com/en-us/library/windows/desktop/aa376890%28v=vs.85%29.aspx)

**更新：**

我正在开发一个在*Windows XP Embedded*上运行的应用程序，但就我而言，*LParam*每次都是 0。

如果我在 Windows 7 或 Windows XP Home 下测试我的应用程序，那么我会得到预期的 80000000 美元。

任何指针将不胜感激！

# mysql - UPDATE 上的“BIGINT UNSIGNED 值超出范围”？

> ID：10051107
> 
> 赞同：0
> 
> 时间：2012-04-07T01:56:50.893
> 
> 标签：mysql

在我的 MySQL 数据库上，我有一个无符号的 mediumint 列，我不断增加和减少它的值。

但是，我想确保它的值为 0 时它不会递减。如果我这样做，UPDATE 将使该值取 mediumint 的最大值 16777215。

所以，我在递减时有这个查询：

```
UPDATE `counters` SET `received`=IF(CAST(`received`-1 AS SIGNED)>0, `received`-1, 0) WHERE `id`="1234" 
```

这是我只能使用一个查询的唯一技巧。

它在 MySQL 5.1 上运行良好，但是，昨天我升级到 MySQL 5.5，现在我得到了这些错误：

```
BIGINT UNSIGNED value is out of range in '(`db_main`.`counters`.`received` - 1)' 
```

有没有什么办法解决这一问题？
或者...是否有任何其他方法可以确保仅在一个查询中，在将 1 减去 0 时不会采用“16777215”的值？

**编辑**- 我可以使用 WHERE，添加“AND received > 0”。问题是有时我想同时更新两列，如果我将所有列 > 0 放在 WHERE 子句中，它不会更新任何列。

谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-07T02:00:35.817

这似乎有点......折磨人，所有这些强制转换和条件的东西（顺便说一句，每行函数很少在大表中很好地扩展）。

`where`如果它已经为零，为什么不直接修改子句以停止减量？

```
update counters set received = received - 1
    where id = '1234' and received > 0 
```

* * *

如果您想要更新其他列而不考虑 的值`received`，您可以使用事务来执行此操作：

```
begin transaction
update counters set received = received - 1 where id = '1234' and received > 0
update counters set xyzzy = 'plugh' where id = '1234'
commit transaction 
```

这将递减`received`，但不会低于零，`xyzzy`无论如何它都会改变。而且它仍然远离导致许多查询的每行内容。

# version-control - 处理解释器文本——如何管理练习之间的代码依赖关系？

> ID：10051110
> 
> 赞同：2
> 
> 时间：2012-04-07T01:56:58.503
> 
> 标签：version-control, scheme

我正在研究有关方案解释器（EOPL1）的文本。大多数问题涉及实现功能或修改现有实现。有些问题取决于以前的问题。

我希望每个问题都有工作的解释器和测试用例，而不是为每个练习复制粘贴整个解释器。以前我尝试只加载以前的代码，然后重新定义各种函数，但这很糟糕：很难判断当前加载了哪些代码，当我对模块进行小的更改时，它并不能消除代码重复，它会创建错误（例如，`struct`重新定义定义时）。变得有点难以驾驭。

我不想制作一个包含大量#ifdefs 或同等文件的单一文件。对于（很多很多）VCS 分支来说，这是一个合理的用例吗？如果没有，我该怎么办？

（如果这个问题的标签不合适，我们深表歉意。）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-07T02:02:04.900

你不应该需要任何分支。简单的版本控制就是您所需要的。对于这种类型的工作，我推荐[Mercurial](http://mercurial.selenic.com/)。对我来说，这是开箱即用的最简单、最容易使用的版本控制。替代方案是[git](http://git-scm.com/)、[perforce](http://perforce.com/)或[subversion](http://subversion.apache.org/)。（显然，还有很多其他的）

只需根据需要开始添加内容即可。它将为您跟踪修订。如果需要，您当然可以创建分支，或者您可以简单地标记不同练习的内容。有很多可能的工作流程应该可以工作。尽管几乎任何事情都会比你现在所做的更好。

# oop - 通过组合或索引来实现对象图更好？

> ID：10051111
> 
> 赞同：1
> 
> 时间：2012-04-07T01:57:09.033
> 
> 标签：oop, data-structures

我有“部分”对象和“材料”对象。每个零件最多分配 1 种材料。每种材料都分配给 0 个或多个零件。这是一个有 2 个级别的 DAG。

每个零件对象都应该引用其材料吗？还是只存储材料名称或索引会更好。或者除了数据库还有其他方法吗？

第一种方式意味着对同一个物质对象的多次引用，这看起来很糟糕，但有多糟糕？

第二种方法看起来很难看，因为数字索引可能无法正确更新，或者如果按名称引用材料，则需要进行字符串比较。它还重新发明了该语言中已经可用的对象引用。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-09T19:24:07.900

跟着参考走。它很快并且使用很少的内存，您将需要它。（我确实假设您会实际使用它。另一种或附加的选择是保留每种材料的零件参考列表。但如果您不需要它，请不要这样做。）

当您尝试获取材质的对象时，存储材质名称或索引将占用更多空间并花费更多。实际上，获取零件材料名称的最便宜的方法是使用引用来获取材料并从材料中获取名称或索引。

不要在程序内部使用名称和索引。必须使用它们（*并存储在您的程序中）才能从数据库和其他程序中获取内容。*（“其他程序”在实践中是指套接字和此类*平面*文件——最初数据来自另一个程序或该程序的另一个会话。）并且您*必须*维护您的引用：如果材料被删除，所有引用它必须改变。或者您可以将材料标记为已删除（适用于垃圾收集，但请注意重新添加）。

并且自相矛盾：我在极少数情况下使用名称而不是引用，因为当材料（以您的案例为例）不断添加和删除时它们会很好地工作。如果我将某物标识为“木材”，则可以删除并添加 100 次该名称的材料，而最终不会影响我的零件对它的使用。

# javascript - 有什么类似于“oncall”的javascript方法吗？

> ID：10051112
> 
> 赞同：0
> 
> 时间：2012-04-07T01:57:15.197
> 
> 标签：javascript, android

我在手机中使用 js 开发 html5 音频播放器。一切正常，但是当我接到电话或拨打电话时，音频仍在播放。有什么方法可以检测手机状态吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-07T02:05:05.223

在 android 上检测它的唯一方法是通过意图。当您有效地编写一个网站时，您无法访问手机的基础设施，您需要一个本机应用程序（或者可能像 phonegap 之类的东西）。

# hadoop - 支持 Amazon EMR 上的 Hadoop 1.0.1 作业

> ID：10051116
> 
> 赞同：3
> 
> 时间：2012-04-07T01:57:51.327
> 
> 标签：hadoop, emr

我已经使用 java 和 hadoop 1.0.1 开发了一些 MR 作业。但是，EMR 仅支持 Hadoop 0.20。是否可以在 EMR 上运行 Hadoop 1.0.1 作业，或者我是否必须降级我的库堆栈以符合 EMR hadoop 版本？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-07T12:03:41.550

取决于您是否使用任何 1.0.1 特定类。核心 Mapper 和 Reducer 类（新旧 API 类型）在 0.20 和 1.0.1 之间没有变化。

您可以尝试将您的 hadoop 依赖项更改为 0.20.2 并重建您的 MR 作业 jar - 如果没有编译错误，那么您非常接近（0.20 和 1.0.1 之间可能有一些错误修复，但我想您会没事）。

如果您确实发现您的作业无法编译，并且与 0.20 中不可用的某些输入/输出格式有关（例如某些多输入/输出），您可以检查 Hadoop 源代码是否为 1.0.1（或者实际上Cloudera 0.20.2 源代码）查看您是否可以“反向移植”丢失的格式，然后将其添加到您的作业 jar 中。

随意将编译错误重新发布到您的原始问题中，以便人们评论潜在的解决方法。

# c - 使用 getchar() 在普通程序中未检测到 CTRL+D (EOF)？

> ID：10051120
> 
> 赞同：1
> 
> 时间：2012-04-07T01:58:42.297
> 
> 标签：c

我有以下一段 c 代码。当我按`CTRL`+`D`时，程序无法将其识别为 EOF。

几点注意事项：

> 我在 VMware 播放器上运行 Ubuntu 11.10 使用 gcc 并从命令行运行程序 'stty -a' 显示 eof = ^D

谢谢你的帮助..

```
1 #include <stdio.h>
  2 
  3 int main()
  4 {
  5    int c, nl;
  6    nl = 0;
  7    while ((c != getchar()) != EOF)
  8    {
  9       if (c == '\n')
 10          ++nl;
 11    }
 12    printf("line: %d\n", nl);
 13 
 14    return 0;
 15 } 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-07T02:01:37.910

尝试

```
 while ((c = getchar()) != EOF) 
```

否则，您正在比较`(c != getchar())`to的结果`EOF`。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-04-07T02:01:52.153

```
while ((c != getchar()) != EOF) 
```

这会将*不等式*`int`的变量值`c`（您尚未初始化）与返回的值进行比较。此比较产生 0 或 1，不能等于，这是负数。*`getchar()``EOF`*

 *您想用（赋值）替换`!=`（不等式比较）。`=`

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-04-07T02:01:44.807

`while ((c != getchar()) != EOF)`

应该

`while ((c = getchar()) != EOF)`*

# iphone - 无法让 setNeedsDisplay 无法使用我的自定义视图来显示更改

> ID：10051121
> 
> 赞同：0
> 
> 时间：2012-04-07T01:58:55.410
> 
> 标签：iphone, ios, cocoa, quartz-graphics

我正在尝试在自定义视图（rectView）中创建一个 CGRect，它会随着您移动滑块而上下移动。

我的滑块的 IBAction 调用以下方法：（这很好）

```
- (void)moveRectUpOrDown:(int)y
{
    self.verticalPositionOfRect += y;
    [self setNeedsDisplay];
} 
```

我的 drawRect 方法：

```
- (void)drawRect:(CGRect)rect
{
    CGContextRef context = UIGraphicsGetCurrentContext();
    CGFloat size = 100;
    self.rect = CGRectMake((self.bounds.size.width / 2) - (size / 2), 
                                 self.verticalPositionOfRect - (size / 2), 
                                 size, 
                                 size);
    CGContextAddRect(context, self.rect);
    CGContextFillPath(context);
} 
```

我的自定义视图的 initWithFrame 使用 setNeedsDisplay 调用 drawRect 方法，但由于某种原因 moveRectUpOrDown 不会调用 drawRect。

任何想法我做错了什么？

为清楚起见，整个实现如下：

```
//ViewController.h
#import <UIKit/UIKit.h>
#import "rectView.h"

@interface ViewController : UIViewController
@property (strong, nonatomic) IBOutlet rectView *rectView;
- (IBAction)sliderChanged:(id)sender;
@end

//ViewController.m
#import "ViewController.h"

@implementation ViewController
@synthesize rectView;

- (void)viewDidLoad
{
    [super viewDidLoad];
    self.rectView = [[rectView alloc] initWithFrame:self.rectView.frame];
}

- (void)viewDidUnload
{
    [super viewDidUnload];
}

- (BOOL)shouldAutorotateToInterfaceOrientation:(UIInterfaceOrientation)interfaceOrientation
{
    return (interfaceOrientation != UIInterfaceOrientationPortraitUpsideDown);
}

- (IBAction)sliderChanged:(id)sender 
{
    UISlider *slider = sender;
    CGFloat sliderValue = slider.value;
    [self.rectView moveRectUpOrDown:sliderValue];
}
@end

//rectView.h
#import <UIKit/UIKit.h>

@interface rectView : UIView
- (void)moveRectUpOrDown:(int)y;
@end

//rectView.m
#import "rectView.h"

@interface rectView ()
@property CGRect rect;
@property int verticalPositionOfRect;
@end

@implementation rectView
@synthesize rect, verticalPositionOfRect;

- (id)initWithFrame:(CGRect)frame
{
    self = [super initWithFrame:frame];
    if (self) {

        self.verticalPositionOfRect = (self.bounds.size.height / 2);
        [self setNeedsDisplay];
    }
    return self;
}

- (void)moveRectUpOrDown:(int)y
{
    self.verticalPositionOfRect += y;
    [self setNeedsDisplay];
}

- (void)drawRect:(CGRect)rect
{
    CGContextRef context = UIGraphicsGetCurrentContext();
    CGFloat size = 100.0;
    self.rect = CGRectMake((self.bounds.size.width / 2) - (size / 2), 
                                 self.verticalPositionOfRect - (size / 2), 
                                 size, 
                                 size);
    CGContextAddRect(context, self.rect);
    CGContextFillPath(context);
}

@end 
```

谢谢您的帮助 ：）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-07T03:16:26.400

好的，所以答案是视图实际上从未添加到`viewController`的视图中。

你有一个- 所以我假设你将一个`IBOutlet`组件拖到Interface Builder 中，然后将它的类更改为，这一切都很好，但是**你**用一个新对象擦除这个对象`rectView``UIView``view``rectView`**`viewDidLoad`**

 **```
self.rectView = [[rectView alloc] initWithFrame:self.rectView.frame]; 
```

所以这现在不再是从 xib 加载的对象。

随后，该视图从未真正添加到视图层次结构中，因此它永远不会自行绘制，因为它没有意义。

所以解决方案是删除我上面突出显示的行。

* * *

### 笔记

对于这样的实现，我可能仍然会选择我的其他答案，但是绊倒并学习新事物会很有帮助。

`rectView`不遵循命名约定。理想情况下，您应该以 2-3 个字母前缀（可能是您的首字母或公司名称）开始您的班级名称，然后是驼峰式命名。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-07T02:06:04.507

我看不到您如何初始化 CGFloat 大小。你能在里面放一个值，看看它是如何工作的吗？其余的代码对我来说看起来没问题。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-07T02:49:15.213

更简单的事情是添加一个`UIView`并对其进行动画处理。

为此添加一个 ivar`UIView`

```
// .h
@property (nonatomic, strong) UIView *animatedView;

// .m
@synthesize animatedView = _animatedView; 
```

然后用这个替换你的逻辑

```
- (void)moveRectUpOrDown:(int)y;
{
    CGRect frame = self.animatedView.frame;
    frame.origin.y += y;

    // If you want the change to animate uncomment this
    // [UIView animateWithDuration:0.25f
    //                  animations:^{
    //                      self.animatedView.frame = frame;
    //                  }];

    // If you don't want the change to animate uncomment this
    // self.animatedView.frame = frame;
} 
```**

# ruby-on-rails - Capistrano Rails 应用程序 SQLite3 无法打开数据库

> ID：10051125
> 
> 赞同：1
> 
> 时间：2012-04-07T02:00:36.583
> 
> 标签：ruby-on-rails, capistrano, sqlite3-ruby

我已经设法将使用 Capistrano 部署的 Rails 应用程序部署到运行 NGinx 和Passenger 的服务器上。在部署时，我收到“我们很抱歉，出了点问题”的消息，并且由于生产日志为空白而感到相当困惑。然后我在我的 NGinx Conf 中切换`rails_env` 到`development`，现在我得到：

```
SQLite3::CantOpenException

unable to open database file
Rails.root: /www/testcap/releases/20120407015032 
```

我登录到服务器，进入其中的`current`文件夹`testcap`（我相信符号链接到最新版本）并运行`rake db:create`，但是 db 文件存在。查看应用程序的`db`文件夹后，我看到了`development.db`& `test.db`。

如果我运行`rails s -e production`然后前往 myurl.com:3000，该应用程序运行良好，这很奇怪，而且当我运行时它也运行良好`rails s -e development`。

对于这里可能出现的问题，我完全不知所措。我确定这一定是一个相对明显的问题，可能与 capistrano 相关？我还是新手，所以我很可能会错过任何东西，但到目前为止谷歌搜索一直没有结果。

我唯一能想到的是，我的`config/deploy.rb`? 但是，到目前为止，我还没有在网上找到任何指南来提供帮助。

在此先感谢您的帮助 ：）

杰克。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-07T12:40:59.743

感谢上面 Adam P 和 Ben L 的评论，我设法在这方面取得了一些进展。[本指南](http://strd6.com/2008/09/deploying-sqlite-to-production-w-capistrano/)也解决了我的问题。

我按照上面该指南中的步骤进行操作，并在我的`database.yml`文件中更改了`production`数据库的路径：

```
`db/production.sqlite3` 
```

至

```
`/www/testcap/shared/db/production.sqlite3` 
```

（例如绝对路径）

然后我将此添加到我的`config/deploy.rb`：

```
role :db, "{my vps IP}", :primary => true 
```

在我的 VPS 上，我进入 nginx conf 并删除了该行`rails_env development`（Passenger 然后将其`production`默认设置为）。

然后运行`cap deploy`，`cap deploy:migrate`它起作用了，当我访问 URL 时，我得到了显示的应用程序。

我希望这可能会帮助将来遇到同样问题的人:)

杰克。

# xml - 我的网络收获认证配置有什么问题？

> ID：10051140
> 
> 赞同：0
> 
> 时间：2012-04-07T02:03:24.823
> 
> 标签：xml, web-scraping, webobjects, webharvest

我最近开始使用 Web-Harvest 作为网络抓取工具。目前，我正在一个项目的开始工作，我想验证/登录到一个网站。在开始之前，我想明确一下代码中的 [URL] 替换了网页的实际 url。

所以，我试图通过执行以下配置来发布登录信息：

```
<config>
    <var-def name="result"> 
        <http method="post" url="[URL]/webreservations/WebObjects/WebReservations.woa/wa/Login?language=1&amp;server=1" multipart="true"> 
        <http-param name="login">[myusername]</http-param>
        <http-param name="password">[mypassword]</http-param>
    </http>
</var-def>
</config> 
```

如何检索结果信息并遵循重定向？手动登录时，以下扩展名将添加到 URL。似乎有某种随机化以及添加的会话 ID。我想这是我需要在我的解决方案中加入的东西？

```
[URL]/nP8oIdbhk8MTXkrQ7Y2Z1g/0.3.0;jsessionid=2EF81CDA9A2EFF0B14E45889BC279BFA 
```

以下是页面来源的一部分，这可能是问题的关键。这是一个 WebObjects 问题吗？这是一个javascript问题吗？我是问题吗？:)

```
<body onload="document.form.login.focus();">
   <form name="form" onsubmit="showDiv();return true;" method="post" action="/webreservations/WebObjects/WebReservations.woa/wa/Login">
...
</form>
</body> 
```

任何帮助是极大的赞赏。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-02T14:01:18.307

确保您已获得所有必要的登录参数。它可能需要的不仅仅是密码和用户名。

# php - SQLite 抛出“未定义函数 sqlite_open()”

> ID：10051141
> 
> 赞同：0
> 
> 时间：2012-04-07T02:03:47.750
> 
> 标签：php, sqlite, titanium

我正在使用 PHP 中的 Titanium 开发桌面应用程序。我是使用 MySQL DB 的 PHP Web 开发人员，是使用 SQLite DB 的桌面新手

当我尝试打开 SQLite DB 时，它会引发致命错误

我使用的代码是

```
if ($db = sqlite_open('mysqlitedb', 0666, $sqliteerror)) {
    sqlite_query($db, 'CREATE TABLE foo (bar varchar(10))');
    sqlite_query($db, "INSERT INTO foo VALUES ('fnord')");
    $result = sqlite_query($db, 'select bar from foo');
    var_dump(sqlite_fetch_array($result));
} else {
    die($sqliteerror);
} 
```

只是 PHP.net 中的示例代码

PHP.net 说 SQLite 与 PHP 5+ 捆绑在一起

仅在 TItanium Studio 中引发的错误

在我的 XAMPP 中一切正常

你能帮忙吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-07T02:45:31.443

[SQLite要求](http://www.php.net/manual/en/sqlite.requirements.php)的 PHP 手册页说： `The SQLite extension is enabled by default as of PHP 5.0\. Beginning with PHP 5.4, the SQLite extension is available only via PECL.`

您可能想查看 Titanium Studio 使用的 PHP 版本。

我以前从未使用过这个特定的 IDE，但这通常是我在寻找 PHP 的版本和模块相关信息时所做的：

1.  查找 PHP 二进制文件（php.exe、php、php5、php-cgi 等）。（使用您的操作系统工具找到它）
2.  运行`$PHP_BINARY -v`以获取二进制文件的版本信息。
3.  运行`$PHP_BINARY -m`以获得 PHP 启用模块的打印输出。
4.  如果 sqlite 未在加载的模块中列出，请查看它是否存在于`extension_dir`配置指令（在 php.ini 中）指向的目录中。
5.  如果模块以文件形式存在，请添加一行说明`extension = $NAME_OF_SQLITE_FILE`（通常为 php_sqlite.so 或 php_sqlite.dll）并查看`sqlite_open()`现在是否有效。
6.  如果该模块不存在，请查看您是否可以从 IDE 的维护人员那里获得预编译的二进制文件，或者他们是否有从源代码构建扩展的特定说明。

# replay - 播放录制的游戏回放

> ID：10051142
> 
> 赞同：1
> 
> 时间：2012-04-07T02:04:02.630
> 
> 标签：replay

我在播放录制的游戏重播时遇到问题。回放数据由用户输入时的时间戳元组和输入本身组成。

播放回放时的每一帧我都尝试在回放数据中找到匹配的用户输入。但由于每一帧中的时间大多与回放数据中的时间戳不完全匹配，我只能从回放数据中获取最接近的时间戳，该时间戳与当前帧时间平均相差约 0.01 秒。这使得回放非常不精确。

我必须对这种差异做出哪些反应？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-14T10:52:02.543

自己找到了解决方案：

如果您只想使用用户输入来录制演示，则必须满足两个条件

1.  有固定的游戏更新率，不依赖于 FPS
2.  物理学必须是确定性的

因为这两点都不容易实现，所以我决定使用帧快照来保存演示。这会导致保存更多数据，但更容易开发。

# android - 使用 Google Checkout 验证 Android 应用内购买？

> ID：10051143
> 
> 赞同：3
> 
> 时间：2012-04-07T02:04:53.490
> 
> 标签：android, google-app-engine, google-checkout, in-app-billing

我正在 Google Play（fmr. Android Market）上发布一个应用程序，现在我正在开发应用程序内计费功能。Android 文档说您应该通过使用您的公钥验证交易的签名来做到这一点，但我想知道使用 Google Checkout API 检索订单信息是否会更容易。类似于以下内容：

老路

1.  Android 客户在市场上购买了一些东西
2.  市场使用随机数、签名、交易 ID 等向电话发送响应
3.  Android 手机或远程服务器使用随机数（之前生成的）和签名来验证交易。
4.  如果交易得到验证，则购买有效，向客户提供商品。

我的方式

1.  Android 客户在市场上购买了一些东西
2.  市场使用随机数、签名、交易 ID 等向电话发送响应
3.  Android 手机使用 transactionid 向远程服务器发送请求
4.  远程服务器向 google checkout API 发送带有 transactionid 的订单的请求，并验证交易是否已清除。
5.  如果交易已清算，则向客户贷记项目

这可能吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-07T05:30:31.043

大概。不过，Google Checkout API 并非随处可用。如果您有商家密钥，您应该可以使用它，但该密钥不适用于大多数国家/地区。您将需要再联系一台服务器，但听起来它应该可以工作。问题是，你为什么还没有尝试？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-07T05:32:49.773

你的方式对我来说似乎很容易被欺骗。对于像计费这样重要的事情，我会采用推荐的方法。是经过深思熟虑的。

# javascript - 在 JavaScript 中定义“嵌套”对象构造函数？

> ID：10051148
> 
> 赞同：9
> 
> 时间：2012-04-07T02:06:18.827
> 
> 标签：javascript, object, nested

是否可以在另一个对象中定义一个对象？我在想这样的事情：

```
function MyObj(name) {
    this.name = name;

    function EmbeddedObj(id) {
        this.id = id;
    }
} 
```

然后我可以像这样创建一个 EmbeddedObj：

```
var myEmbeddedObj = new MyObj.EmbeddedObj(); 
```

奖励积分的模因：反对！:o

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-04-07T02:08:10.167

是的，没有。

```
function MyObj(name) {
    this.name = name;
}
MyObj.EmbeddedObj = function EmbeddedObj(id) {
    this.id = id;
}
new MyObj.EmbeddedObj(42); 
```

会运行，但它可能不会产生“嵌入式对象”的预期结果（见评论）。

请注意，在`new expr`表达式*首先*`MyObject.EmbeddedObj`被评估的情况下，在这种情况下，它使用作为构造函数评估的函数对象创建一个新对象。（表达式中有一个带括号的愚蠢规则，但这是另一回事。）

* * *

现在，如果需要“父”和“子”关系，可以使用更迂回的方法来完成：

```
function Parent (name) {
   this.name = name;
   var parent = this; // for closure
   this.Child = function Child () {
      this.Parent = parent;
   }
}

// create new parent object
var parent = new Parent();       
// each new parent has a different Child constructor and
// any function-object can be used as a constructor
var child = new parent.Child();
// true: child is "bound" to parent
child.Parent === parent; 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-07T02:08:00.217

```
function MyObj(name) {
    this.name = name;
}

MyObj.EmbeddedObj = function(id) {
    this.id = id;
}

var myEmbeddedObj = new MyObj.EmbeddedObj(); 
```

这看起来像你所追求的吗？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-01-22T12:37:24.687

## 这是嵌套构造函数的示例。

```
function cimdb(name,review,year) {

 function nestedConstructor(name,review,year) {
    this.name = name;
    this.review = review;
    this.year = year
};

    this.name = name;
    this[name] = new nestedConstructor(name,review,year);

}

  var lionking = new cimdb("The Lion King", "The lion King review ..", 2015); 
```

* * *

我想这就是嵌套对象构造函数的意思。

# xcode - 使用 iPhone sdk 将多格式数据发送到服务器

> ID：10051150
> 
> 赞同：0
> 
> 时间：2012-04-07T02:06:41.930
> 
> 标签：xcode, http, post, nsdata, nsmutableurlrequest

我一直在尝试遵循一些将数据上传到网站的示例。我想将消息保存为 .txt 文件。任何想法在这里做什么？

```
- (IBAction)sendSerializedGreeting:(id)sender;
{
    NSString *message;
    message =@"Here we go for a test message.";
    // Show a loading indicator
    [UIApplication sharedApplication].networkActivityIndicatorVisible = YES;

    NSString *greetingURL = [NSString stringWithFormat:@"http://www.site.com/upload.php"];

    NSMutableURLRequest *theRequest = [NSMutableURLRequest requestWithURL:[NSURL URLWithString:greetingURL]
             cachePolicy:NSURLRequestUseProtocolCachePolicy timeoutInterval:60.0];  

    NSDictionary *headerFieldsDict = [NSDictionary dictionaryWithObjectsAndKeys:@"text/xml; charset=utf-8", @"Content-Type", nil];

    [theRequest setHTTPBody:[message dataUsingEncoding:NSUTF8StringEncoding]];
    [theRequest setAllHTTPHeaderFields:headerFieldsDict];
    [theRequest setHTTPMethod:@"POST"];

    // create the connection with the request and start loading the data
    NSURLConnection *theConnection = [[NSURLConnection alloc] initWithRequest:theRequest delegate:self];

    if (theConnection == nil)
    {
        NSLog(@"Failed to create the connection");
    }
} 
```

这是upload.php 文件。我假设问题与此有关，但不确定。我不知道在上面的示例中文件名的设置位置。此代码是从其他地方使用的。

```
<?php
$uploaddir = './';      //Uploading to same directory as PHP file

$file = basename($_FILES['userfile']['name']);

$uploadFile = $file;
$randomNumber = rand(0, 99999); 
$newName = $uploadDir . $randomNumber . $uploadFile;

if (is_uploaded_file($_FILES['userfile']['tmp_name'])) {
    echo "Temp file uploaded.";
} else {
    echo "Temp file not uploaded.";
}

if (move_uploaded_file($_FILES['userfile']['tmp_name'], $newName)) {

}
?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-07T06:00:07.540

我正在通过此代码向服务器发送图像....用于您的文本文件或任何类型的多格式数据

```
 NSString *strUrl=@"http://www.site.com/upload.php";
        NSLog(@"%@",strUrl);
        NSURL *url=[NSURL URLWithString:strUrl];

        NSMutableURLRequest *request = [NSMutableURLRequest  requestWithURL:url
                                                                cachePolicy:NSURLRequestUseProtocolCachePolicy
                                                            timeoutInterval:130.0];

        // file name of user picture
// I am sending a image to server
        NSString *fileName=[[eMailTxtField.text stringByReplacingOccurrencesOfString:@"@" withString:@"-"]  stringByAppendingString:@".jpg"];
        //image data
        UIImage *userImage=imgUser.image;
        NSData *imageData =UIImageJPEGRepresentation(userImage, 90);

        NSMutableData *myRequestData = [[NSMutableData alloc] init];
        [myRequestData appendData:[NSData dataWithBytes:[postData UTF8String] length:[postData length]]];

        NSString *boundary = [NSString stringWithString:@"--"];
        NSString *contentType = [NSString stringWithFormat:@"multipart/form-data; boundary=%@",boundary];
        [request addValue:contentType forHTTPHeaderField: @"Content-Type"];
        [myRequestData appendData:[[NSString stringWithFormat:@"\r\n--%@\r\n",boundary] dataUsingEncoding:NSUTF8StringEncoding]];
        [myRequestData appendData:[[NSString stringWithFormat:@"Content-Disposition: form-data; name=\"uploadfile\"; filename=\"%@\"\r\n", fileName] dataUsingEncoding:NSUTF8StringEncoding]];
        [myRequestData appendData:[[NSString stringWithString:@"Content-Type: application/octet-stream\r\n\r\n"] dataUsingEncoding:NSUTF8StringEncoding]];
        [myRequestData appendData:[NSData dataWithData:imageData]];
        [myRequestData appendData:[[NSString stringWithFormat:@"\r\n--%@--\r\n",boundary] dataUsingEncoding:NSUTF8StringEncoding]];

        [ request setHTTPMethod: @"POST" ];

        [ request setHTTPBody: myRequestData ];
        NSURLResponse *response;
        NSError *error;
        NSData *returnData = [NSURLConnection sendSynchronousRequest: request returningResponse:&response error:&error];
        if (!error && returnData) {
            NSString *content = [NSString stringWithUTF8String:[returnData bytes]];
            [self registerWithJsonString:content];
        }
        else{
            [self showServerNotFoundError];
        } 
```

# android - 有谁知道'top'命令的结果在android中的含义？

> ID：10051152
> 
> 赞同：20
> 
> 时间：2012-04-07T02:07:52.340
> 
> 标签：android, linux, command

我发现“top”的结果与标准 linux 中的结果不同。我在网上搜索了一下，但找不到我的答案。例如，以下是我的 android 中 top 的部分结果：

```
 PID CPU% S  #THR     VSS     RSS PCY UID      Name
  814   2% R     1    940K    372K  fg root     top
  110   1% S    58 185000K  59216K  fg system   system_server
   31   0% S     1      0K      0K  fg root     vsync_workqueue
   49   0% S     1      0K      0K  fg root     file-storage
   52   0% S     1      0K      0K  fg root     gp2a_wq
  178   0% S     9  98476K  23820K  fg system   com.android.systemui 
```

所以#THR 可能是线程数。但什么是“PCY”？我在 /proc/(PID)/ 文件夹中找不到此信息。而且我发现如果我打开一个 youtube，PCY 将是 fg。然后如果我退出它（youtube），youtube 进程仍然存在，但 PCY 将是 bg。就“S”而言，我发现所有进程始终都是“S”，这意味着睡眠，即使我的 youtube 应用程序当前处于活动状态。很奇怪...

有没有人有任何线索：> Thx

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2012-04-07T07:07:25.710

这是我的（未受过教育的）猜测：

PID - 进程 ID

CPU% - CPU 使用率

S - 状态（或可能的状态） R=Running, S=Sleeping

#THR - 线程数

PCY - 我有点难过。您似乎很好地掌握了它的作用，所以这就足够了（假设 fg 和 bg 是唯一可能的值）

UID - 启动任务的用户名

名称 - 这个是不言自明的......

VSS 和 RSS：来自[http://groups.google.com/group/android-beginners/browse_thread/thread/e6f2d396a68238ad?pli=1](http://groups.google.com/group/android-beginners/browse_thread/thread/e6f2d396a68238ad?pli=1)

虚拟集大小（有时缩写为 VSZ）和驻留集大小。谷歌搜索会找到一些 Linux 的详细信息。这是高速版本：

VSS 表示有多少虚拟内存与进程关联，Resident Set Size 表示有多少物理页面与进程关联。

VSS 在 Android 上通常没有意义。如果我对一个 1MB 的文件进行内存映射，VSS 会增长 1MB，但我没有使用任何资源（除了虚拟映射表中的条目）。

RSS 在 Android 上部分没有意义，因为它不能识别多个进程之间共享的页面。如果进程 A 的 RSS 为 2MB，进程 B 的 RSS 为 2MB，则可能有 4MB 的物理页面被占用。也有可能只有 2MB 的物理页面被占用。

编辑：就您的 Youtube 正在休眠的交易而言，如果它没有积极地做任何事情，即使它在前台，它也会处于休眠状态。尝试创建一个基本上是 while(1){Do something senseless} 的简单应用程序，看看它是在休眠还是在运行。当然，这也可能是 Android 处理多任务处理方式的一个怪癖。

EDIT2：
PCY 的大部分未受过教育的有点随机刺伤 -
PCY - 策略 - 确定 Android 的内存管理器应如何处理应用程序
FG - 前台 - 进程被视为前台进程并且不应该被杀死以释放 mmemory
BG -- 后台 -- 进程被认为是后台进程（不在前台主动运行并且可能被杀死以释放内存）

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2014-01-08T11:26:51.840

顶级源代码 [顶级源代码][1]

[1]：[http](http://androidxref.com/4.0.4/xref/system/core/toolbox/top.c#442) ://androidxref.com/4.0.4/xref/system/core/toolbox/top.c#442 获取每个值如何计算的完整逻辑

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2014-04-02T00:40:34.037

这个[页面](http://elinux.org/Android_Memory_Usage)说了VSS和RSS是什么意思，但是没有具体说明如何获取更有意义的PSS和USS

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-04-07T02:27:11.080

尝试[`man top`](http://unixhelp.ed.ac.uk/CGI/man-cgi?top)任何普通的 linux / unix（尽管我认为 Android 默认没有安装 man ）。

实际上，现在我看起来似乎`man`该页面上没有提到那些列标题，但重点`man`是通常是开始寻找有关 linux / unix 命令信息的最佳位置。

# magento - 获取magento中的所有站点产品ID

> ID：10051158
> 
> 赞同：1
> 
> 时间：2012-04-07T02:09:04.567
> 
> 标签：magento

现在，我想获取我网站的所有产品 ID。有没有一种简单的方法可以在我的 magento 网站中获取所有产品 ID，

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2015-02-03T13:41:38.473

为了节省资源，最好使用：

```
Mage::getModel('catalog/product')->getCollection()->getAllIds(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-07T03:24:33.127

```
foreach(Mage::getModel('catalog/product')->getCollection() as $product)
{
    var_dump($product->getId());
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-07T22:41:09.017

或者，如果您可以访问命令行，请运行`mysql -u your_username -p magento_database`，然后您可以运行此查询： `SELECT entity_id, sku FROM catalog_product_entity;`不要忘记您可能需要类似`LIMIT 0,30`or的东西`WHERE sku LIKE '%shirt%'`。您可以通过命令行或从 phpmyadmin（如果可用）获得此信息。phpmyadmin 在某处有一个查询窗口。

`var/export/`我通常通过在文件夹中创建 php 脚本在 Magento 中做一些偷偷摸摸的事情。那么你就不用担心如何与 Magento/Zend/MVC 框架交互了。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-03-30T21:15:09.933

变化不大如果您使用特定类别的所有产品 id，则：

```
 $category_ids = array(11,16); // your category ids
            $productIds = array();

            foreach($category_ids as $category_id){
                $category = Mage::getModel('catalog/category')->load($category_id);
                $result = Mage::getResourceModel('catalog/product_collection')->addCategoryFilter($category)->getAllIds();
                $productIds = array_merge($productIds,$result);
            }
var_dump($productIds); 
```

# ruby-on-rails - Rails：提交时更新父表单中的字段的子表单

> ID：10051162
> 
> 赞同：1
> 
> 时间：2012-04-07T02:10:35.860
> 
> 标签：ruby-on-rails, forms

我有一个看起来像这样的表格：

```
<%= form_for :game do |game_form| %>
        <%= game_form.label :app_game_id %>
        <%= game_form.select :app_game_id, @available_app_games.collect {|p| [ p.name, p.id ] } %>
      .... 
```

哪里`@available_app_games`是从控制器给出的，它着眼于与 Game 不同的其他模型。用户应该从下拉列表中选择这些**app_games ，但他也应该能够创建一个新的 app_game。**app_game 的表单应该只包含**名称**和**描述**

我有两个问题：

我将如何创建可以创建新 app_game 的子表单，以及如何更新：

```
<%= game_form.select :app_game_id, @available_app_games.collect {|p| [ p.name, p.id ] } %> 
```

有了这个新提交**的 app_game**？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-07T11:30:13.737

尝试[nested_form](https://github.com/ryanb/nested_form)，可能是不使用 select 的最简单方法，而是使用 nested_form 策略。

# c# - 哪些程序集包含 btouch 使用的所有 MonoTouch 绑定属性

> ID：10051163
> 
> 赞同：1
> 
> 时间：2012-04-07T02:10:40.743
> 
> 标签：c#, xamarin.ios, custom-attributes

在编写 ObjC 绑定项目时，我试图让智能感知在 MonoDevelop 中工作。为此，IDE 需要知道各种绑定属性存在的位置。

例如：
`[ExportAttribute]`似乎生活在 monotouch.dll （`MonoTouch.Foundation`命名空间）中。 `[LinkWithAttribute]`也在 monotouch.dll （但`MonoTouch.ObjCRuntime`命名空间）中。

但是我在任何地方都找不到更专业的属性（`EventArgsAttibute`,`EventNameAttribute`等）。请参阅此处记录的完整列表：http: [//docs.xamarin.com/ios/advanced_topics/binding_objective-c_types/Binding_Types_Reference_Guide](http://docs.xamarin.com/ios/advanced_topics/binding_objective-c_types/Binding_Types_Reference_Guide)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-08T20:17:43.770

这些属性存在于[绑定编译器本身](https://github.com/mono/maccore/blob/1791e660c08a509d6a49efcb5791f6710be9a29c/src/generator.cs)（即`/Developer/MonoTouch/usr/lib/btouch/btouch.exe`）中。

它们用于`btouch`指示在构建绑定程序集时要发出什么样的代码；它们*不*被运行时使用，因此不必包含在任何 MonoTouch 运行时程序集中。

我想为了让 IntelliSense 正常工作，您不妨只包含对 btouch.exe 的引用。

# haskell - 记录没有无限类型错误

> ID：10051168
> 
> 赞同：4
> 
> 时间：2012-04-07T02:11:40.737
> 
> 标签：haskell, types, algebraic-data-types

当我在 Haskell (GHC) 中定义类似的东西时，为什么没有列表样式的无限类型错误？

```
data Broken = Broken { title :: String,
                       loop  :: Broken } 
```

它编译时没有类型错误，但显然它是一个不可用的类型：我必须定义

`foo = Broken "one" (Broken "two" (Broken "three"`...

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-04-07T02:30:39.400

它没有任何问题。完全可以定义该类型的值：

```
foo = Broken "one" foo 
```

基本上它与定义一个没有 nil 值的列表类型是一样的（这也是完全合法的）。完全可以定义该类型的值，但所有这些值都必须是无限的。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-07T05:36:47.633

如果你定义

```
type Foo = (String, Foo) 
```

然后你应该得到这个错误：`Cycle in type synonym declarations`。

但是如果你定义

```
data Foo = Foo String Foo 
```

你没有这样的错误。

练习：解释这两种情况的区别。

# java - 高尔夫纸牌游戏状态树

> ID：10051169
> 
> 赞同：2
> 
> 时间：2012-04-07T02:11:40.883
> 
> 标签：java, recursion, tree

我正在做一个家庭作业项目，我们需要为高尔夫纸牌游戏生成一个状态树。为此，我决定创建一个`Move`类，该类表示从一叠纸牌到另一叠纸牌的移动——简单地说，它包含对单个移动所涉及的两个堆栈的引用。我树中的每个节点都知道它在移动什么。

我目前遇到的问题是我的树太大了——就像`OutOfMemoryError`太大了。 **编辑**- 我应该注意，当我为一个非常小的游戏制作一棵树时，我没有收到错误，但我的树仍然比它应该的大得多！

对于那些不熟悉游戏的人：[高尔夫纸牌规则](http://boardgames.about.com/od/solitaire/a/golf_solitaire.htm)。*注意*- 我们不需要实施在国王之后扮演皇后的限制。

```
public void makeTree()
{
  _root = makeNode( null, null, 0 );
}

private Node makeNode( Node parent, Move m, int depth )
{
  Node node = new Node( parent, m, depth );
  ArrayList<Move> moves = findAllMoves();
  if( moves.size() == 0 )
    node.setScore( getScore() );
  else {
    for( Move mv : moves ) {
      mv.makeMove();
      Node child = makeNode( node, mv, depth++ );
      node.addChild( child );
      mv.undoMove();
    }
  }
  return node;
}

private ArrayList<Move> findAllMoves()
{
  ArrayList<Move> moves = new ArrayList<Move>();

  for( int i = 0; i < numPlayPiles; i++ ) {
    if( _play[i].size() != 0 ) {
       if( Math.abs( _play[i].top().getRank().ordinal() - 
          discard.getRank().ordinal() ) == 1 ) {
          moves.add( new Move( _play[i], _discard ) );
       }
    }
  }

  if( _draw.size() != 0 )
    moves.add( new Move( _draw, _discard ) );

  return moves;
} 
```

`_play[i]`只是在游戏中引用一堆卡片。

我意识到在问题中发布的代码有点多，但我的问题只是关于我的逻辑。我怀疑我的错误在于我如何返回，`makeNode`但我完全被困在这里。有人可以证实我的怀疑和/或可能给我一些指导吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-08T15:45:35.123

对于任何好奇的人，我的问题是没有正确阅读作业。具体来说，我的`findAllMoves`方法是问题所在。一个节点应该具有*来自*平局的移动或来自游戏堆的所有可能移动，但不能同时具有两者。我上面的代码允许每个孩子，即使在相同的深度，每个孩子都`Move`从绘图堆创建一个丢弃堆 - 导致大量重复节点。

它也从不检查最终游戏条件。结果，每个叶节点要么是一个失败的分数，要么是 0（即使玩家已经赢了，该方法也会递归直到平局为空）。

# java - 侦听/处理 JPanel 事件

> ID：10051176
> 
> 赞同：3
> 
> 时间：2012-04-07T02:13:38.663
> 
> 标签：java, swing, event-handling, jpanel, event-listener

先生们女士们晚上好，

我有一个无法解决的 Java Swing 问题，也许你可以帮助我。这里是：

*   我有一个使用 BorderLayout 的 JFrame 和许多 JPanel。
*   每次我需要放置一个新屏幕时（即从主菜单中，当单击搜索按钮时，转到搜索菜单），我只需删除位于中心的组件（JPanel），然后放置新屏幕（新 JPanel）在中心代替。
*   这样，每次我想建立一个新屏幕时，我就不会调用所有的页眉和页脚对象。

除了这个小问题之外，这个系统一切正常：我想在每次创建新的 JPanel 或更改回现有的 JPanel 时触发一些方法（一般来说，每次出现 JPanel 时）。

为了做到这一点，我尝试实现 ComponentListener 的 componentShown(ComponentEvent e) 方法，并将 ComponentListener 添加到我放在 JFrame 中心的 JPanel 中，但它不起作用。在此之后，我做了一些研究，发现这个 componentShown (@ComponentListener) 方法只有在 JPanel 的可见性发生变化（从不可见到可见或相反）时才有效。不幸的是，我没有改变 JPanel 的可见性，只是用另一个替换它：删除当前的，然后添加新的。下面的代码说明了我如何替换 JPanel。

```
// Get the JPanel located in the center of our JFrame
JPanel currentView = (JPanel) myFrame.getContentPane().getComponent( 2 );

if ( currentView != null )
{
   // Remove it from the JPanel         
   myFrame.getContentPane().remove( currentView );
}

// Add the new JPanel    
myFrame.getContentPane().add( otherView, BorderLayout.CENTER );

// Pack the JFrame and show it
myFrame.pack(); 
```

所以这就是我所拥有的。如果您能帮助我，我将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-07T07:55:16.417

我认为这个问题与[HierarchyListener](http://docs.oracle.com/javase/7/docs/api/java/awt/event/HierarchyListener.html)相对应，用于比较

```
import java.awt.*;
import java.awt.event.*;
import javax.swing.*;

public class ContainerListener extends JFrame {

    private static final long serialVersionUID = 1L;

    public ContainerListener() {
        super("Test");
        setContentPane(new TestPanel());
        setDefaultCloseOperation(DISPOSE_ON_CLOSE);
        pack();
        setLocationRelativeTo(null);
        setVisible(true);
    }

    public static void main(String[] parameters) {
        EventQueue.invokeLater(new Runnable() {

            @Override
            public void run() {
                ContainerListener containerListener = new ContainerListener();
            }
        });
    }

    private class TestPanel extends JPanel {

        private static final long serialVersionUID = 1L;

        TestPanel() {
            setLayout(new FlowLayout(FlowLayout.LEFT));
            add(new JButton(new AbstractAction("Add label") {

                private static final long serialVersionUID = 1L;
                private int n = 0;

                @Override
                public void actionPerformed(ActionEvent event) {
                    TestPanel.this.add(new JLabel("Label " + ++n));
                    validate();
                }
            }));
            addHierarchyListener(new HierarchyListener() {

                @Override
                public void hierarchyChanged(HierarchyEvent e) {
                    System.out.println("Components Change: " + e.getChanged());
                    if ((e.getChangeFlags() & HierarchyEvent.DISPLAYABILITY_CHANGED) != 0) {
                        if (e.getComponent().isDisplayable()) {
                            System.out.println("Components: " + e.getChanged());
                        } else {
                            System.out.println("Components: " + e.getChanged());
                        }
                    }
                }
            });
            addContainerListener(new ContainerAdapter() {

                @Override
                public void componentAdded(ContainerEvent event) {
                    System.out.println("componentAdded : " + event.getChild() + "containerName" + " was added");
                }
            });

        }

        @Override
        public Dimension getPreferredSize() {
            return new Dimension(400, 400);
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-07T02:28:25.923

我强烈建议听取@Jeffrey 给出的建议，但如果您继续进行此设计，那么实现该[`ContainerListener`](http://docs.oracle.com/javase/7/docs/api/java/awt/event/ContainerListener.html)接口可能会很有用。

如有疑问，请查阅 API。

# box2d - Is there ever any need for multiple Box2D worlds?

> ID：10051179
> 
> 赞同：1
> 
> 时间：2012-04-07T02:13:55.167
> 
> 标签：box2d

Are there any scenarios where more than one Box2D worlds are needed in one app scene?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-07T03:53:55.237

您将多个世界用于非相互作用的物理区域以及模拟微观尺度与宏观尺度的相互作用。想到不同的运动时间步长，隔离非交互区域有优势。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-07T02:15:23.037

你可以用多个 Box2D 世界做一些非常有创意的东西，但通常你只需要一个。

# css - CSS 帮助：图像在 FF 和 Chrome 中正确呈现，而不是 IE9

> ID：10051180
> 
> 赞同：1
> 
> 时间：2012-04-07T02:14:04.987
> 
> 标签：css, internet-explorer

我正在为我的一个朋友开发一个网站，但我遇到了一些 CSS 噩梦。URL 是[http://www.bike4haiti.com](http://www.bike4haiti.com)。

在 Firefox 和 Chrome 中，顶部横幅的右上角出现了海地国旗。然而，在 IE 中，它显示为沿右边缘的一条细垂直线，从菜单顶部开始，下降到内容部分开始的位置。CSS 类是非常简单的代码：

```
img.rightfloat
{
float:right;
padding-left:1px;
padding-bottom: 1px;
padding-right: 5px;
padding-top: 1px;
} 
```

我的猜测是它是导致问题的其他 CSS 元素之一，但我不知道是哪一个。我尝试使用该`F12`工具，但没有找到问题所在。

请帮忙！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-07T02:48:28.900

将您的第一个锚点设置为浮动：左；您已经使图像浮动，因此只需清除它们`#topmenu{float:none; clear:both}`

应该这样做。您可能需要修改间距的边距。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-07T02:18:25.170

您的标签中的宽度设置为空 ( `width=""`) 。`<img>`

# perl - 如何为 Moose 中的属性提供备用初始化参数？

> ID：10051181
> 
> 赞同：4
> 
> 时间：2012-04-07T02:14:54.183
> 
> 标签：perl, moose

我当然知道我可以通过设置`init_arg`（例如）重命名属性的init arg

```
package Test {
    use Moose;
    has attr => (
       is => 'ro',
       isa => 'Str',
       init_arg => 'attribute'
    );
} 
```

这将允许我

```
Test->new({ attribute => 'foo' }); 
```

但不是

```
Test->new({ attr => 'foo' }); 
```

同时

[MooseX::Aliases](https://metacpan.org/module/MooseX%3a%3aAliases)实际上有这种行为，但是创建别名也会创建访问器。我目前正在尝试理解该模块中的代码，看看我是否无法确定它是如何做到的，以便我可以复制所述功能（以我理解的方式）。如果有人可以用一个例子来解释如何在这里做到这一点，那就太好了。

*更新*似乎 MX::Aliases 正在通过替换实际传递给构造函数的内容来执行此操作，`around initialize_instance_slot`但我仍然不确定它实际上是如何被调用的，因为在我的测试代码中，我的周围实际上并没有被执行。

*update* munging in`BUILDARGS`并不是一个真正的选项，因为我正在尝试做的事情是允许通过我通过[Meta Recipe3添加到属性的](https://metacpan.org/module/Moose%3a%3aCookbook%3a%3aMeta%3a%3aRecipe3)*标签*名称来设置访问器。你可能会说我在做

```
has attr => (
   is => 'ro',
   isa => 'Str',
   alt_init_arg => 'attribute'
); 
```

*更新*

到目前为止，我已经设法解决了我正在尝试做的事情。

```
use 5.014;
use warnings;

package MooseX::Meta::Attribute::Trait::OtherName {
    use Moose::Role;
    use Carp;

    has other_name => (
        isa       => 'Str',
        predicate => 'has_other_name',
        required  => 1,
        is        => 'ro',
    );

    around initialize_instance_slot => sub {
        my $orig = shift;
        my $self = shift;

        my ( $meta_instance, $instance, $params ) = @_;

        confess 'actually calling this code';

        return $self->$orig(@_)
            unless $self->has_other_name && $self->has_init_arg;

        if ( $self->has_other_name ) {
            $params->{ $self->init_arg }
                = delete $params->{ $self->other_name };
        }
    };
}

package Moose::Meta::Attribute::Custom::Trait::OtherName {
    sub register_implementation { 'MooseX::Meta::Attribute::Trait::OtherName' }
}

package Message {
    use Moose;
#   use MooseX::StrictConstructor;

    has attr => (
        traits    => [ 'OtherName' ],
        is        => 'ro',
        isa       => 'Str',
        other_name => 'Attr',
    );

    __PACKAGE__->meta->make_immutable;
}

package Client {
    use Moose;

    sub serialize {
        my ( $self, $message ) = @_;

        confess 'no message' unless defined $message;

        my %h;
        foreach my $attr ( $message->meta->get_all_attributes ) {
            if (
                    $attr->does('MooseX::Meta::Attribute::Trait::OtherName')
                    && $attr->has_other_name
                ) {
                $h{$attr->other_name} = $attr->get_value( $message );
            }
        }
        return \%h;
    }
    __PACKAGE__->meta->make_immutable;
}

my $message = Message->new( Attr => 'foo' );

my $ua = Client->new;

my %h = %{ $ua->serialize( $message )};

use Data::Dumper::Concise;

say Dumper \%h 
```

问题是我的`around`块永远不会被运行，我不知道为什么，也许我把它包装在错误的地方或什么地方。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-07T03:50:07.407

我可能是错的，但我认为您可以使用[BUILDARGS 方法](https://metacpan.org/module/Moose%3a%3aManual%3a%3aConstruction#BUILDARGS)完成我认为您正在尝试做的事情。这使您可以在构造函数参数用于创建对象之前对其进行调整。

```
#!/usr/bin/env perl

use strict;
use warnings;

{
  package MyClass;

  use Moose;
  has attr => (
     is => 'ro',
     isa => 'Str',
     required => 1,
  );

  around BUILDARGS => sub {
    my $orig = shift;
    my $self = shift;
    my %args = ref $_[0] ? %{shift()} : @_;

    if (exists $args{attribute}) {
      $args{attr} = delete $args{attribute};
    }

    $self->$orig(%args);
  };
}

my $one = MyClass->new(attribute => "Hi");
my $two = MyClass->new(attr => "Bye");

print $one->attr, "\n";
print $two->attr, "\n"; 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-04-11T06:37:41.623

`MooseX::Aliases`有几个活动部分来实现此功能，这是因为该行为需要应用于 MOP 中的多个不同位置。您的代码在这里看起来非常接近`MooseX::Aliases`'s Trait 属性中的代码。

我怀疑你的代码没有被调用的原因是当你尝试注册你的特征时出现问题。`MooseX::Aliases`使用`Moose::Util::meta_attribute_alias`而不是您在这里使用的老式方式。尝试用对角色内部`Moose::Meta::Attribute::Custom::Trait::OtherName`的调用替换您的部分。`Moose::Util::meta_attribute_alias 'OtherName';`

其次，您在此处的代码不适用于不可变类。您需要添加第二个特征来处理这些，因为不变性代码由类的元类而不是属性的元类处理。我认为您还需要添加更多特征来处理角色中的属性。然后您需要连接 Moose::Exporter 以确保在编译所有内容时正确应用所有特征。

我已经通过不可变获得了一个简单的版本。此代码也在[github 上](https://github.com/perigrin/MooseX-AltInitArg)。

首先是属性特征：

```
package MooseX::AltInitArg::Meta::Trait::Attribute;
use Moose::Role;
use namespace::autoclean;
Moose::Util::meta_attribute_alias 'AltInitArg';

has alt_init_arg => (
    is         => 'ro',
    isa        => 'Str',
    predicate  => 'has_alt_init_arg',
);

around initialize_instance_slot => sub {
    my $orig = shift;
    my $self = shift;
    my ($meta_instance, $instance, $params) = @_;

    return $self->$orig(@_)
        # don't run if we haven't set any alt_init_args
        # don't run if init_arg is explicitly undef
        unless $self->has_alt_init_arg && $self->has_init_arg;

    if (my @alternates = grep { exists $params->{$_} } ($self->alt_init_arg)) {
        if (exists $params->{ $self->init_arg }) {
            push @alternates, $self->init_arg;
        }

        $self->associated_class->throw_error(
            'Conflicting init_args: (' . join(', ', @alternates) . ')'
        ) if @alternates > 1;

        $params->{ $self->init_arg } = delete $params->{ $alternates[0] };
    }
    $self->$orig(@_);
};

1;
__END__ 
```

接下来是 Class 特征。

```
package MooseX::AltInitArg::Meta::Trait::Class;
use Moose::Role;
use namespace::autoclean;

around _inline_slot_initializer => sub {
    my $orig = shift;
    my $self = shift;
    my ($attr, $index) = @_;

    my @orig_source = $self->$orig(@_);
    return @orig_source
        # only run on aliased attributes
        unless $attr->meta->can('does_role')
            && $attr->meta->does_role('MooseX::AltInitArg::Meta::Trait::Attribute');
    return @orig_source
        # don't run if we haven't set any aliases
        # don't run if init_arg is explicitly undef
        unless $attr->has_alt_init_arg && $attr->has_init_arg;

    my $init_arg = $attr->init_arg;

    return (
        'if (my @aliases = grep { exists $params->{$_} } (qw('
          . $attr->alt_init_arg . '))) {',
            'if (exists $params->{' . $init_arg . '}) {',
                'push @aliases, \'' . $init_arg . '\';',
            '}',
            'if (@aliases > 1) {',
                $self->_inline_throw_error(
                    '"Conflicting init_args: (" . join(", ", @aliases) . ")"',
                ) . ';',
            '}',
            '$params->{' . $init_arg . '} = delete $params->{$aliases[0]};',
        '}',
        @orig_source,
    );
};
1;
__END__ 
```

最后是`Moose::Exporter`胶水。

```
package MooseX::AltInitArg;
use Moose();

use Moose::Exporter;
use MooseX::AltInitArg::Meta::Trait::Attribute;

Moose::Exporter->setup_import_methods(
    class_metaroles => { class => ['MooseX::AltInitArg::Meta::Trait::Class'] }
);

1;
__END__ 
```

那么如何使用它的一个例子：

```
package MyApp;
use 5.10.1;
use Moose;
use MooseX::AltInitArg;

has foo => (
    is            => 'ro',
    traits        => ['AltInitArg'],
    alt_init_arg => 'bar',
);

my $obj = MyApp->new( bar => 'bar' );
say $obj->foo; # prints bar 
```

Moose 中的元编程非常强大，但是因为有很多活动部件（其中许多只与最大化性能有关），所以当你深入研究时，你会吃掉很多工作。

祝你好运。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-12T17:26:25.447

所以我听到的是：

*   在构造时，一个属性应该能够通过它的 init_arg 和该属性上定义的任何备用 init_args 来设置。
*   除非在实例构造中，否则属性不应被其备用 init_args 操作；也就是说，除了上述之外，该属性应该表现得“正常”。

基于此，这似乎很适合[MooseX::MultiInitArg](https://metacpan.org/module/MooseX%3a%3aMultiInitArg)属性特征。是的？:)

# javascript - 我的数组中缺少结果

> ID：10051182
> 
> 赞同：0
> 
> 时间：2012-04-07T02:14:55.717
> 
> 标签：javascript

我有一个对象，我将其转换为一个坐标数组，该数组将用于存储哪些坐标被“占用”。

我以为我可以正常工作，但是通过 console.log 进一步检查该数组缺少一些结果。

所以这基本上是我的目标：

```
var sdata = {"4":{"7":["1","7","3","3"]}}; 
```

换句话说，这是：

```
var sdata = {"X":{"Y":["ID","ID","Width","Height"]} 
```

忽略此 ID，因为它们不相关......但我试图使用这些数据，以便我拥有 X 和 Y + 与其瓷砖尺寸宽度和高度相关的额外 X 和 Y 坐标。

想象一下，如果您将 4:7 的对象是 3 x 3 维，那么将存在这 9 个网格引用。

```
[4:7], [5:7], [6,7]  
[4:8], [5:8], [6,8]  
[4:9], [5:9], [6:9] 
```

所以我创建坐标的功能是：

```
function populate_collisions() {

  for (var X in sdata) {
    X = parseInt(X);

    for (var Y in sdata[X]) {
      Y = parseInt(Y);
      width = parseInt(sdata[X][Y][2]);
      height = parseInt(sdata[X][Y][3]);

  for (i=X; i!= X+width; i++) {

        if( typeof gcollision[i] == 'undefined' ) {
          gcollision[i] = new Array();
        }
        gcollision[i][Y] = 1

        for (j=Y; j!=Y+height; j++) {

          if( typeof gcollision[X] == 'undefined' ){ 
            gcollision[X] = new Array();
          }
          gcollision[X][j] = 1
        }
      }
    }
  }
} 
```

但是我的逻辑一定是错误的，因为我为我的数组得到了这个结果：

```
[4] [7] = 1
[4] [8] = 1
[4] [9] = 1
[5] [7] = 1
[6] [7] = 1 
```

知道为什么我会丢失其他数据吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-07T03:04:23.653

这是固定代码：

```
function populate_collisions() {

  for (var X in sdata) {
    X = parseInt(X);

    for (var Y in sdata[X]) {
      Y = parseInt(Y);
      var width = parseInt(sdata[X][Y][2]);
      var height = parseInt(sdata[X][Y][3]);

      for (var i=X; i < X+width; i++) {

        if (!gcollision[i]) {
          gcollision[i] = [];
        }
        gcollision[i][Y] = 1;

        for (var j=Y; j < Y+height; j++) { 
```

在下一部分中，您使用`X`的是 4，它始终为 4，因此您只是覆盖了该数组。使用`i`而不是`X`.

你不需要 if 测试，因为数组是在上面创建的，除非你真的是这样想的`gcollision[X][j]`或类似的。我不知道，因为我不知道您想要的`gcollision`对象结构。

```
/*
          if (!gcollision[i][j]) { 
            gcollision[i][j] = [];
          }
*/          
          gcollision[i][j] = 1;
        }
      }
    }
  }
} 
```

作为记录，生成的对象（假设`gcollision`没有其他属性）是：

```
alert(JSON.stringify(gcollision));
/*
{"4":[null,null,null,null,null,null,null,1,1,1],
 "5":[null,null,null,null,null,null,null,1,1,1],
 "6":[null,null,null,null,null,null,null,1,1,1]}
*/ 
```

所有这些空值都不存在，数组是稀疏的，但这就是 JSON 表示它们的方式。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-07T02:41:40.163

我必须承认我并不完全理解所需的输出，但这似乎是你想要的。

```
var sdata = {"4":{"7":["1","7","3","3"]}},
    result = [],
    x_arr;
for (var X in sdata) {
    for (var Y in sdata[X]) {
        for (var i = 0; i < sdata[X][Y][2]; i++) {
            x_arr = [];
            result.push(x_arr);
            for (var j = 0; j < sdata[X][Y][3]; j++) {
                x_arr.push((+X + j) + ':' + (+Y + i))
            }
        }
    }
} 
```

我为每个 Array 成员使用了字符串连接。不知道你到底是什么意思`[4:7]`。

结果是……

```
[["4:7", "5:7", "6:7"], 
 ["4:8", "5:8", "6:8"], 
 ["4:9", "5:9", "6:9"]] 
```

[http://jsfiddle.net/mPM96/](http://jsfiddle.net/mPM96/)

* * *

也许你是故意的。

```
var sdata = {"4": {"7": ["1", "7", "3", "3"]}},
    result = [];
for (var X in sdata) {
    for (var Y in sdata[X]) {
        for (var i = 0; i < sdata[X][Y][2]; i++) {
            result[+X + i] = [];
            for (var j = 0; j < sdata[X][Y][3]; j++) {
                result[+X + i][+Y + j] = 1;
            }
        }
    }
} 
```

# google-analytics - 带有 Chrome 网上商店打包应用的 Google 分析

> ID：10051187
> 
> 赞同：0
> 
> 时间：2012-04-07T02:16:22.143
> 
> 标签：google-analytics, chrome-web-store

我在 Chrome Web Store 上有几个打包的小型应用程序（打包的，不是托管的，所以我自己没有托管任何东西）。我想知道我是否仍然可以使用 Google Analytics，以及如何在发布应用程序之前测试它是否正常工作。

我猜答案可能是否定的，因为他们的[常见问题解答](https://developers.google.com/chrome/web-store/faq#faq-app-06)只是这样说：

“我可以使用 Google Analytics 吗？可以。**托管应用程序**使用 Google Analytics 就像任何其他网站一样。有关在打包应用程序（和扩展）中使用分析的帮助，请参阅本教程。”

任何人都知道是否有办法解决这个问题？

***解析度***

遵循答案中的建议，但有一些小的差异。首先，我没有以任何方式修改从 GA 复制的代码。其次，我将我的 GA ID 粘贴到我的开发者仪表板的应用发布表单中（转到开发者仪表板，单击相关应用的编辑，然后找到 GA 字段）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-07T22:09:00.873

我希望这可能会有所帮助：[http ://code.google.com/chrome/extensions/tut_analytics.html](http://code.google.com/chrome/extensions/tut_analytics.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-15T16:57:42.130

我最近提交了一个应用程序，发现有一个文本字段用于添加您的 Google Analytics 代码。

![截屏](../Images/9d12b24e47f87cedb3cd194c5e2e037a.png)

# cuda - 我应该在这里使用 CUDA 吗？

> ID：10051192
> 
> 赞同：3
> 
> 时间：2012-04-07T02:18:24.233
> 
> 标签：cuda

我必须将一个非常小的矩阵（ size - 10x10 ）与一个向量乘以 50000 到 100000 倍（甚至可能更多）。这发生在 1000 个不同的矩阵中（可能更多）。在 CUDA 上执行此操作是否会显着提高性能。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-07T03:33:51.393

是的，这是 GPU 的理想任务。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-08T06:56:52.457

如果要将单个矩阵与向量相乘 50K 次，并且每次乘法都是前一次乘法的先决条件，则不要使用 CUDA。这是一个串行问题，CPU 的最佳套件。但是，如果每个乘法都是独立的，您可以在 CUDA 上同时将它们相乘。

您的程序将提供巨大加速的唯一情况是当每个向量乘法迭代独立于其他迭代的数据时。这样，您将能够通过启动相同数量的线程同时启动 50K 或更多迭代。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-10T04:14:18.863

取决于您到底在做什么，是的，这可以在 GPU 上非常快速地完成，但您可能必须运行自己的内核才能从中获得良好的性能。

在不了解您的问题的情况下，我无法给您太多建议。但我可以推测一个解决方案：

如果你取一个向量并将它乘以同一个矩阵几千次，你会更好地找到矩阵的任意幂的封闭形式。您可以使用 Cayley-Hamilton 定理或 Jordan 规范形式来做到这一点。

我似乎无法通过快速谷歌搜索找到它的实现，但考虑到我在第一年的线性代数中做到了这一点，这还不算太糟糕。关于 Jordan 范式的一些信息，并将其提升到幂可以在[http://en.wikipedia.org/wiki/Jordan_normal_form#Powers](http://en.wikipedia.org/wiki/Jordan_normal_form#Powers)找到，它的变换矩阵只是特征向量的矩阵，而它的逆矩阵矩阵。

假设你有一个矩阵A，你找到Jordan范式J，以及变换矩阵P，P^-1，你会发现

A^n = PJ^n P^-1

我似乎找不到一个很好的链接来实现这个，但是计算一个 10x10 矩阵的封闭形式将比 50,000 个矩阵乘法消耗的时间要少得多。并且这种实现可能会在 CPU 上运行得更快。

如果这是你的问题，你应该调查一下。

# vb.net - 如何将 Do Until 与先前的 Try Catch Exception 一起使用以避免运行代码两次

> ID：10051194
> 
> 赞同：0
> 
> 时间：2012-04-07T02:18:36.757
> 
> 标签：vb.net

如果输入了字母，或者它作为数字超出范围，我有这行代码来捕获异常，但是我添加了 WHEN 以避免捕获数字数据。现在我如何在我的案例语句之前使用异常错误来使用它以避免运行代码两次，因为一旦案例代码通过它将运行一个清晰的 txtbox，它已经被 try catch 处理了，不要如果这对你来说很清楚，但我理解。这是部分代码...

```
 Try
        'Integer Levels: intLvls is egual to the assigned text box, the first one from
        'the top, this line of code allow the user input to be captured into a variable.
        intLvls = txtBoxLvl.Text
    Catch ex As Exception When IsNumeric(intLvls)
        ErrTypeLetterFeild1()
    Finally
        analysingvalues1()
    End Try 
```

我想做的事情：使用循环直到引用异常错误以避免运行以下代码部分：

```
 Private Sub analysingvalues1()
    Do Until IsNumeric (ex As Exception)<------how do i do this???

    Loop 
```

代码的案例部分：

```
Select Case intLvls
        'User is prompt with the following label: lblLvl "Level of salespersons 1 - 4"
        'to make a choice from 1 to 4 as available values.
        Case 1 To 4
            'This line regulates the range of acceptable values, first textbox: must be egual
            'or higher than 1 and lower or egual to 4\. Upon such rules a validation becomes
            'correct and is directed to the isValidCalculation sub.
            isValidCalculation()
        Case Is < 1
            ErrType1NumberRangeFeild()
        Case Is > 4
            ErrType1NumberRangeFeild()
        Case Else
            If txtBoxLvl.Text = "" Then
                ErrTypeClear1()
            Else
                If Not IsNumeric(txtBoxLvl.Text) Then
                    ErrType1NumberRangeFeild()
                Else
                    ErrTypeLetterFeild1()
                    ErrTypeClear1()
                End If
            End If
    End Select 'Ending choices.
End Sub 
```

谢谢你的帮助！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-07T02:30:57.503

如果你打开 Option Strict 这个：

```
intLvls = txtBoxLvl.Text 
```

将不再编译。这应该告诉你，你做的事情很臭。

**开启选项严格**

正确的解决方案是不要盲目地让运行时为您将 string 转换为 int，并捕获异常。

当您将字符串用户输入转换为整数时，错误输入*并不是*一种例外情况，这是您应该期待和防御性编码的情况。

我会把它改写成这样的：

```
 'Integer Levels: intLvls is egual to the assigned text box, the first one from
    'the top, this line of code allow the user input to be captured into a variable.

    if integer.TryParse( txtBoxLvl.Text, intLvls )
        analysingvalues1()
    else
        ErrTypeLetterFeild1() 
```

编辑 - 正如下面 Chris 所指出的，我的意思是 Option Strict。我建议使用但 Explicit 和 Strict，并在可用时进行 Infer。

# iphone - UITableView NSInternalInconsistencyException 抛出错误；一个单元格的两个动画

> ID：10051197
> 
> 赞同：2
> 
> 时间：2012-04-07T02:19:10.460
> 
> 标签：iphone, ios, cocoa-touch, uitableview

我有一个要在 UITableViewController 内编辑的 UITableView。这段代码来自我调用来编辑 tableView 的方法。

```
 [self.tableView beginUpdates];
    [self.tableView deleteRowsAtIndexPaths:[NSArray arrayWithObject: path] withRowAnimation:UITableViewRowAnimationNone];
    [self.tableView insertRowsAtIndexPaths:[NSArray arrayWithObject: path] withRowAnimation:UITableViewRowAnimationNone];

    NSMutableArray *things = [[self.fetchedResultsController fetchedObjects] mutableCopy];

    self.storedCell = [things objectAtIndex: path.row];

    [things removeObjectAtIndex: path.row];

    for ( int i = 0; i < [things count]; i++) {
        Task *mo = (Task *)[things objectAtIndex: i];
        [mo setValue:[NSNumber numberWithInt: i] forKey:@"displayOrder"];
    }
    [things release]; things = nil;
    self.newPath = path;

    [self.managedObjectContext save: nil]; 
    [self.tableView endUpdates]; 
```

这是抛出的错误：

```
 *** Terminating app due to uncaught exception 'NSInternalInconsistencyException', reason: 'Attempt to create two animations for cell' 
```

关于我做错了什么的任何想法？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-07T02:52:17.883

如果您想要这样做，而不是删除然后插入同一行，只需重新加载它：

```
[self.tableView reloadRowsAtIndexPaths:[NSArray arrayWithObject:path] withRowAnimation:UITableViewRowAnimationNone]; 
```

但是，看起来您应该只是删除该行，因此您可能应该只删除该`insertRowsAtIndexPaths`行。（当然，您没有发布所有代码，所以我不确定......）

# java - 使用 for 循环查找两个时间字符串之间的差异 (hh:mm:ss)

> ID：10051201
> 
> 赞同：1
> 
> 时间：2012-04-07T02:21:47.947
> 
> 标签：java, android, time, for-loop

我需要使用 for 循环和数组来获取两个输入并减去它们（输入格式`hh:mm:ss`）。然后在editText中输出差异。但我似乎无法让我的代码运行。

对不起，如果这是一个非常基本的问题。我花了几天时间在网上寻找试图理解这个问题。这是我第一次尝试 Java。

```
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);

    end = (EditText) findViewById(R.id.etEnd);
    start = (EditText) findViewById(R.id.etStart);
    diff = (EditText) findViewById(R.id.etDiff);
    calc = (Button) findViewById(R.id.bCalc);
    clear = (Button) findViewById(R.id.bClear);

    calc.setOnClickListener(new View.OnClickListener() {

        @Override
        public void onClick(View v) {
            // TODO Auto-generated method stub
                int hh = tot[0];
                int mm = tot[1];
                int ss = tot[2];

            String sGet2 = end.getText().toString(); // end to string
            String sGet1 = start.getText().toString(); // start to string

            String[] erA = sGet2.split(":"); // end string to end array
            String[] srA = sGet1.split(":"); // start string to string array

            for (int i = 0; i < srA.length; i++) {

                inted = Integer.parseInt(erA[i].trim()); 
                intst = Integer.parseInt(srA[i].trim());

                tot[i] = inted - intst;

                if (i == 2) { 
                    String  mt = ":" + mm;
                    String  st = ":" + ss;
                    String  ht = ":" + hh;
                    String tota = mt + st;
                    String total = tota + ht;

                    out = String.format("%4.4s", total);

                    diff.setText(out);

                } else
                    return; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-07T02:25:38.090

您的代码不起作用也就不足为奇了……很多代码永远不会执行！

```
for (int i = 0; i < srA.length; i++) {
    // bla bla bla
    if (i == 2) { 
        // This code never runs because i is always 0.
    } else
        return;  // What is this doing here!?
} 
```

如果这是您第一次尝试编程，那么我认为您应该从更简单的东西开始，例如控制台程序。还可以使用调试器单步执行代码，以便您了解控制流的工作方式。

您可能还想购买一本教 Java 的书。有很多好书可以帮助你从基础开始。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-07T03:15:41.903

伟大的代码为什么在其他部分返回。它在 i=0 时终止执行。那是因为 for 循环开始执行。

第一次 i 值为零并且您的条件 i==2 失败然后它执行 else 部分因此它终止 for 循环。那么for循环有什么用？？？？？？

使用下面的代码::

```
String time1 = "22:55:00";
String time2 = "23:05:00";
SimpleDateFormat format = new SimpleDateFormat("HH:mm:ss");
Date date1 = format.parse(time1);
Date date2 = format.parse(time2);
long difference = date2.getTime() - date1.getTime(); 
```

区别在于毫秒，您可以将其转换为任何单位，或者您可以使用 apache-commons 中的 DurationFormatUtils 来漂亮地格式化它。

```
System.out.println("Duration: "+DurationFormatUtils.formatDuration(difference, "HH:mm:ss")); 
```

apache commons 有非常好的实用功能，apache-commons (lang)

# iphone - CVOpenGLESTextureCacheCreateTextureFromImage 失败

> ID：10051205
> 
> 赞同：2
> 
> 时间：2012-04-07T02:22:28.907
> 
> 标签：iphone, opengl-es, yuv

我已经分别从视频帧中提取 YUV 数据并将它们保存在 data[0]、data[1]、data[2] 中；帧大小为 640*480；现在我创建像素缓冲区如下：

```
void *pYUV[3] = {data[0], data[1], data[2]};
size_t planeWidth = {640, 320, 320};
size_t planeHeight = {480, 240, 240};
size_t planeBytesPerRow = {640, 320, 320};
CVReturn renturn = CVPixelBufferCreateWithPlanarBytes(kCFAllocatorDefault,
                                   640, 
                                   480,
                                   kCVPixelFormatType_420YpCbCr8BiPlanarVideoRange, 
                                   nil,
                                   nil,
                                   3, 
                                   pYUV,
                                   planeWidth,
                                   planeHeight, 
                                   planeBytesPerRow, 
                                   nil,
                                   nil, nil, &_pixelBuffer);
CVPixelBufferLockBaseAddress(_pixelBuffer, 0);
CVPixelBufferRetain(_pixelBuffer);
    // Periodic texture cache flush every frame
CVOpenGLESTextureCacheFlush(_textureCache, 0);

// The Buffer cannot be used with OpenGL as either its size, pixelformat or attributes are not supported by OpenGL
 glActiveTexture(GL_TEXTURE0);
CVReturn err = CVOpenGLESTextureCacheCreateTextureFromImage(kCFAllocatorDefault, 
                                                            _textureCache,
                                                            _pixelBuffer,
                                                            NULL,
                                                            GL_TEXTURE_2D,
                                                            GL_LUMINANCE,
                                                            im.width,
                                                            im.height,
                                                            GL_LUMINANCE,
                                                            GL_UNSIGNED_BYTE,
                                                            0,
                                                            &_yTexture);

if (!_yTexture || err) {
    NSLog(@"CVOpenGLESTextureCacheCreateTextureFromImage failed (error: %d)", err);  
    return;
}
glBindTexture(CVOpenGLESTextureGetTarget(_yTexture), CVOpenGLESTextureGetName(_yTexture));
 CVPixelBufferUnlockBaseAddress(_pixelBuffer, 0); 
```

但错误是-6638

# junit - 用 EasyMock 测试 void 方法

> ID：10051207
> 
> 赞同：-1
> 
> 时间：2012-04-07T02:23:07.887
> 
> 标签：junit, easymock

我需要测试采用某种接口类型的数组的排序类。该接口只有一个函数，它只比较一个对象并返回一些 int 值。我正在尝试使用 easymock 用 jUnit 对其进行测试。我遇到了两个问题。首先，我需要为我为给定接口创建的每个模拟对象分配一些值。

```
mock[0] = EasyMock.createMock(CompareValue.class); 
```

如何为 mock[0] 分配一些值？接口 CompareValue 只有以下方法：

```
int compareVal(Object obj); 
```

该对象将是排序类中的 CompareValue 类型

其次，我在类中只有静态 void 方法，它接受一个列表并修改它但不返回任何内容。我不打算更改接口或类中的任何代码。我不知道如何检索修改后的列表以检查它是否已正确排序。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-07T16:43:42.057

覆盖 getter 而不是为 mock 赋值。

```
expect(mock[0].getValue()).andRetun(yourValue); 
```

# android - Android 2.3.6 在哪里做证书主机名验证？

> ID：10051208
> 
> 赞同：0
> 
> 时间：2012-04-07T02:23:20.047
> 
> 标签：android, android-sdk-2.3

我正在寻找 Android 中证书主机名验证的实际实现（不是接口或抽象类）。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-04T14:30:34.070

事实证明，Android 应用程序可以使用 JRE 或 Apache HttpClient 的主机名验证。在前一种情况下，验证在 X509TrustManagerImpl.java 中。在后一种情况下，它位于 AbstractVerifier.java

# sql - 按 oracle 分组

> ID：10051211
> 
> 赞同：0
> 
> 时间：2012-04-07T02:23:29.187
> 
> 标签：sql

我有一个如下表：

```
id             value
-------------------------
1               1
5               1
7               1
8               4 
```

我无法到达如下表：

```
id             value
-------------------------
1               1
8               4 
```

SQL是

```
select id,value from table_1 group by id_a 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-07T02:27:41.033

您在这里所拥有的只是一个简单的`MIN()`聚合。

```
SELECT MIN(id), value AS id FROM table_1 GROUP BY value 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-07T02:30:10.993

试试这个：

```
select min(id), id_a from table_1 group by id_a 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-07T02:30:22.087

```
SELECT T.value,MIN(id) AS MIN_ID 
FROM TABLE T
GROUP BY T.value; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-08-06T22:31:06.573

为了使用 group by 表达式，您必须具有一个或多个聚合函数：count、min、max、sum、avg 等。这些函数一次对一组行进行操作。现在，当您使用带有非聚合列的聚合函数时，您需要使用 group by 子句。

下面将给你正确答案：

```
select min(id) id, value from table_1 group by value 
```

# android - 如果扩展文件版本与 apk 版本代码不同，使用 URI（使用 Google Zip 扩展库）访问 APK 扩展文件会导致崩溃

> ID：10051213
> 
> 赞同：3
> 
> 时间：2012-04-07T02:23:40.680
> 
> 标签：android

我的 apk 版本代码是版本 3。我正在使用加载了 apk 版本代码 1 的主扩展文件（文件名类似于 main.1.ex.etc.eg.obb）。扩展文件可以在设备上正常下载。

扩展文件有媒体文件，所以我使用`APEZProvider`Google Zip 扩展库中的`VideoView`.

调用`VideoView.start()`会导致 Nullpointer 异常。

到目前为止我发现了什么： In`APEZProvider.initIfNecessary()`返回主扩展文件版本为 3 而不是 1。因此尝试打开`ZipResourceFile`(mAPKExtensionFile) 返回 null。`APEZProvider.openAssetFile()`导致`NullPointerException`原样。`mAPKExtensionFile`_`null`

`APEZProvider`Google Zip 扩展库中类的相关代码：

```
 private boolean initIfNecessary() {
    if ( !mInit ) {
        Context ctx = getContext();
        PackageManager pm = ctx.getPackageManager();
        ProviderInfo pi = pm.resolveContentProvider(getAuthority(), PackageManager.GET_META_DATA);
        PackageInfo packInfo;
        try {
            packInfo = pm.getPackageInfo(ctx.getPackageName(), 0);
        } catch (NameNotFoundException e1) {
            e1.printStackTrace();
            return false;
        }
        int patchFileVersion;
        int mainFileVersion;
        int appVersionCode = packInfo.versionCode;
        if ( null != pi.metaData ) {
            mainFileVersion = pi.metaData.getInt("mainVersion", appVersionCode);
            patchFileVersion = pi.metaData.getInt("patchVersion", appVersionCode);          
        } else {
            mainFileVersion = patchFileVersion = appVersionCode;
        }
        try {
            mAPKExtensionFile = APKExpansionSupport.getAPKExpansionZipFile(ctx, mainFileVersion, patchFileVersion);
            return true;
        } catch (IOException e) {
            e.printStackTrace();                
        }
    }
    return false;       
}

@Override
public AssetFileDescriptor openAssetFile(Uri uri, String mode)
        throws FileNotFoundException {
    initIfNecessary();
    String path = uri.getEncodedPath();
    if ( path.startsWith("/") ) {
        path = path.substring(1);
    }
    return mAPKExtensionFile.getAssetFileDescriptor(path);      
} 
```

我不确定上面的这行代码：`ProviderInfo pi = pm.resolveContentProvider(getAuthority(), PackageManager.GET_META_DATA);`这是正确的吗？

来自 PackageManager.resolveContentProvider() 的 Android 参考。

公共抽象 ProviderInfo resolveContentProvider（字符串名称，int 标志）

自：API 级别 1 通过其基本路径名查找单个内容提供程序。参数

name：要查找的提供者的名称。

flags：附加选项标志。当前应始终为 0。

有人可以确认我做错了什么还是错误。

编辑：当我第一次上传我的应用程序时，一切都按预期工作 - 只有当我更新 apk 导致出现此问题的不同版本代码时。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-06-05T23:39:44.503

如果 APK 扩展文件的版本号与您的 APK 的版本号不匹配，Zip 文件提供程序类包含您可以放置​​在 AndroidManifest.zip 文件中的元数据。

```
<provider android:name=".APEZProvider"
              android:authorities="my.application.authority"
              android:exported="false"
              android:multiprocess="true"
    >
   <meta-data android:name="mainVersion"
              android:value="1"></meta-data>
   <meta-data android:name="patchVersion"
              android:value="2"></meta-data>
</provider> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-20T21:54:54.577

您必须创建自己的提供程序并在清单中声明它

```
 <provider android:authorities="com.myCompany.myAppName.provider.ZipFileContentProvider" android:name=".ZipFileContentProvider"></provider> 
```

取自：

[SampleZipfileProvider 类在哪里？](https://stackoverflow.com/questions/9623350/where-is-the-samplezipfileprovider-class)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-22T20:53:58.750

正如您所说，扩展文件版本号可以与应用程序版本不同。那么问题来了，怎么知道扩展文件的版本号呢？

这是多个可能的答案之一：

从[APK 扩展文件指南](http://developer.android.com/guide/market/expansion-files.html)：

> 您可以通过多种方式确定扩展文件的版本号。一种简单的方法是在下载开始时将版本保存在[SharedPreferences](http://developer.android.com/reference/android/content/SharedPreferences.html) 文件中，方法是使用 APKExpansionPolicy 类的 getExpansionFileName(int index) 方法查询扩展文件名。然后，当您要访问扩展文件时，您可以通过读取 [SharedPreferences文件来获取版本代码。](http://developer.android.com/reference/android/content/SharedPreferences.html)
> 
> 有关从共享存储读取的更多信息，请参阅 [数据存储](http://developer.android.com/guide/topics/data/data-storage.html#filesExternal)文档。

# objective-c - AudioUnit 音调发生器在生成的每个音调结束时都会给我一个啁啾声

> ID：10051215
> 
> 赞同：2
> 
> 时间：2012-04-07T02:24:22.597
> 
> 标签：objective-c, ios, core-audio, audiounit

`PLAY`我正在为旧的 GWBasic命令创建一个老式的音乐模拟器。为此，我有一个音调发生器和一个音乐播放器。在演奏的每个音符之间，我都会听到唧唧喳喳的声音，把事情搞砸了。以下是我的两个课程：

**ToneGen.h**

```
#import <Foundation/Foundation.h>

@interface ToneGen : NSObject
@property (nonatomic) id delegate;
@property (nonatomic) double frequency;
@property (nonatomic) double sampleRate;
@property (nonatomic) double theta;
- (void)play:(float)ms;
- (void)play;
- (void)stop;
@end 
```

**ToneGen.m**

```
#import <AudioUnit/AudioUnit.h>
#import "ToneGen.h"

OSStatus RenderTone(
                    void *inRefCon, 
                    AudioUnitRenderActionFlags  *ioActionFlags, 
                    const AudioTimeStamp        *inTimeStamp, 
                    UInt32                      inBusNumber, 
                    UInt32                      inNumberFrames, 
                    AudioBufferList             *ioData);
void ToneInterruptionListener(void *inClientData, UInt32 inInterruptionState);

@interface ToneGen()
@property (nonatomic) AudioComponentInstance toneUnit;
@property (nonatomic) NSTimer *timer;
- (void)createToneUnit;
@end

@implementation ToneGen
@synthesize toneUnit = _toneUnit;
@synthesize timer = _timer;
@synthesize delegate = _delegate;
@synthesize frequency = _frequency;
@synthesize sampleRate = _sampleRate;
@synthesize theta = _theta;

- (id) init
{
    self = [super init];
    if (self)
    {
        self.sampleRate = 44100;
        self.frequency = 1440.0f;
        return self;
    }
    return nil;
}

- (void)play:(float)ms
{
    [self play];
    self.timer = [NSTimer scheduledTimerWithTimeInterval:(ms / 100) 
                                                  target:self 
                                                selector:@selector(stop) 
                                                userInfo:nil 
                                                 repeats:NO];
    [[NSRunLoop mainRunLoop] addTimer:self.timer forMode:NSRunLoopCommonModes];
}

- (void)play
{
    if (!self.toneUnit)
    {
        [self createToneUnit];

        // Stop changing parameters on the unit
        OSErr err = AudioUnitInitialize(self.toneUnit);
        if (err)
            DLog(@"Error initializing unit");

        // Start playback
        err = AudioOutputUnitStart(self.toneUnit);
        if (err)
            DLog(@"Error starting unit");
    }
}

- (void)stop
{
    [self.timer invalidate];
    self.timer = nil;

    if (self.toneUnit)
    {
        AudioOutputUnitStop(self.toneUnit);
        AudioUnitUninitialize(self.toneUnit);
        AudioComponentInstanceDispose(self.toneUnit);
        self.toneUnit = nil;
    }

    if(self.delegate && [self.delegate respondsToSelector:@selector(toneStop)]) {
        [self.delegate performSelector:@selector(toneStop)];
    }
}

- (void)createToneUnit
{
    AudioComponentDescription defaultOutputDescription;
    defaultOutputDescription.componentType = kAudioUnitType_Output;
    defaultOutputDescription.componentSubType = kAudioUnitSubType_DefaultOutput;
    defaultOutputDescription.componentManufacturer = kAudioUnitManufacturer_Apple;
    defaultOutputDescription.componentFlags = 0;
    defaultOutputDescription.componentFlagsMask = 0;

    // Get the default playback output unit
    AudioComponent defaultOutput = AudioComponentFindNext(NULL, &defaultOutputDescription);
    if (!defaultOutput)
        DLog(@"Can't find default output");

    // Create a new unit based on this that we'll use for output
    OSErr err = AudioComponentInstanceNew(defaultOutput, &_toneUnit);
    if (err)
        DLog(@"Error creating unit");

    // Set our tone rendering function on the unit
    AURenderCallbackStruct input;
    input.inputProc = RenderTone;
    input.inputProcRefCon = (__bridge void*)self;
    err = AudioUnitSetProperty(self.toneUnit, 
                               kAudioUnitProperty_SetRenderCallback, 
                               kAudioUnitScope_Input,
                               0, 
                               &input, 
                               sizeof(input));
    if (err)
        DLog(@"Error setting callback");

    // Set the format to 32 bit, single channel, floating point, linear PCM
    const int four_bytes_per_float = 4;
    const int eight_bits_per_byte = 8;
    AudioStreamBasicDescription streamFormat;
    streamFormat.mSampleRate = self.sampleRate;
    streamFormat.mFormatID = kAudioFormatLinearPCM;
    streamFormat.mFormatFlags =
    kAudioFormatFlagsNativeFloatPacked | kAudioFormatFlagIsNonInterleaved;
    streamFormat.mBytesPerPacket = four_bytes_per_float;
    streamFormat.mFramesPerPacket = 1;  
    streamFormat.mBytesPerFrame = four_bytes_per_float;     
    streamFormat.mChannelsPerFrame = 1; 
    streamFormat.mBitsPerChannel = four_bytes_per_float * eight_bits_per_byte;
    err = AudioUnitSetProperty (self.toneUnit,
                                kAudioUnitProperty_StreamFormat,
                                kAudioUnitScope_Input,
                                0,
                                &streamFormat,
                                sizeof(AudioStreamBasicDescription));
    if (err)
        DLog(@"Error setting stream format");
}

@end

OSStatus RenderTone(
                    void *inRefCon, 
                    AudioUnitRenderActionFlags  *ioActionFlags, 
                    const AudioTimeStamp        *inTimeStamp, 
                    UInt32                      inBusNumber, 
                    UInt32                      inNumberFrames, 
                    AudioBufferList             *ioData)

{
    // Fixed amplitude is good enough for our purposes
    const double amplitude = 0.25;

    // Get the tone parameters out of the view controller
    ToneGen *toneGen = (__bridge ToneGen *)inRefCon;
    double theta = toneGen.theta;
    double theta_increment = 2.0 * M_PI * toneGen.frequency / toneGen.sampleRate;

    // This is a mono tone generator so we only need the first buffer
    const int channel = 0;
    Float32 *buffer = (Float32 *)ioData->mBuffers[channel].mData;

    // Generate the samples
    for (UInt32 frame = 0; frame < inNumberFrames; frame++) 
    {
        buffer[frame] = sin(theta) * amplitude;

        theta += theta_increment;
        if (theta > 2.0 * M_PI)
        {
            theta -= 2.0 * M_PI;
        }
    }

    // Store the theta back in the view controller
    toneGen.theta = theta;

    return noErr;
}

void ToneInterruptionListener(void *inClientData, UInt32 inInterruptionState)
{
    ToneGen *toneGen = (__bridge ToneGen *)inClientData;
    [toneGen stop];
} 
```

**音乐.h**

```
#import <Foundation/Foundation.h>

@interface Music : NSObject
- (void) play:(NSString *)music;
- (void) stop;
@end 
```

**音乐.m**

```
#import "Music.h"
#import "ToneGen.h"

@interface Music()
@property (nonatomic, readonly) ToneGen *toneGen;
@property (nonatomic, assign) int octive;
@property (nonatomic, assign) int tempo;
@property (nonatomic, assign) int length;

@property (nonatomic, strong) NSData *music;
@property (nonatomic, assign) int dataPos;
@property (nonatomic, assign) BOOL isPlaying;

- (void)playNote;
@end

@implementation Music
@synthesize toneGen = _toneGen;
- (ToneGen*)toneGen
{
    if (_toneGen == nil)
    {
        _toneGen = [[ToneGen alloc] init];
        _toneGen.delegate = self;
    }
    return _toneGen;
}
@synthesize octive = _octive;
- (void)setOctive:(int)octive
{
    // Sinity Check
    if (octive < 0)
        octive = 0;
    if (octive > 6)
        octive = 6;
    _octive = octive;
}
@synthesize tempo = _tempo;
- (void)setTempo:(int)tempo
{
    // Sinity Check
    if (tempo < 30)
        tempo = 30;
    if (tempo > 255)
        tempo = 255;
    _tempo = tempo;
}
@synthesize length = _length;
- (void)setLength:(int)length
{
    // Sinity Check
    if (length < 1)
        length = 1;
    if (length > 64)
        length = 64;
    _length = length;
}
@synthesize music = _music;
@synthesize dataPos = _dataPos;
@synthesize isPlaying = _isPlaying;

- (id)init
{
    self = [super init];
    if (self)
    {
        self.octive = 4;
        self.tempo = 120;
        self.length = 1;
        return self;
    }
    return nil;
}

- (void) play:(NSString *)music
{
    DLog(@"%@", music);
    self.music = [[music stringByReplacingOccurrencesOfString:@"+" withString:@"#"]
                  dataUsingEncoding: NSASCIIStringEncoding];
    self.dataPos = 0;
    self.isPlaying = YES;
    [self playNote];
}

- (void)stop
{
    self.isPlaying = NO;
}

- (void)playNote
{
    if (!self.isPlaying)
        return;

    if (self.dataPos > self.music.length || self.music.length == 0) {
        self.isPlaying = NO;
        return;
    }

    unsigned char *data = (unsigned char*)[self.music bytes];
    unsigned int code = (unsigned int)data[self.dataPos];
    self.dataPos++;

    switch (code) {
        case 65: // A
        case 66: // B
        case 67: // C
        case 68: // D
        case 69: // E
        case 70: // F
        case 71: // G
            {
                // Peak at the next char to look for sharp or flat
                bool sharp = NO;
                bool flat = NO;
                if (self.dataPos < self.music.length) {
                    unsigned int peak = (unsigned int)data[self.dataPos];
                    if (peak == 35) // #
                    {
                        self.dataPos++;
                        sharp = YES;
                    }
                    else if (peak == 45)  // -
                    {
                        self.dataPos++;
                        flat = YES;
                    }
                }

                // Peak ahead for a length changes
                bool look = YES;
                int count = 0;
                int newLength = 0;
                while (self.dataPos < self.music.length && look) {
                    unsigned int peak = (unsigned int)data[self.dataPos];
                    if (peak >= 48 && peak <= 57)
                    {
                        peak -= 48;
                        int n = (count * 10);
                        if (n == 0) { n = 1; }
                        newLength += peak * n;
                        self.dataPos++;
                    } else {
                        look = NO;
                    }
                }

                // Pick the note length
                int length = self.length;
                if (newLength != 0)
                {
                    DLog(@"InlineLength: %d", newLength);
                    length = newLength;
                }

                // Create the note string
                NSString *note = [NSString stringWithFormat:@"%c", code];
                if (sharp)
                    note = [note stringByAppendingFormat:@"#"];
                else if (flat)
                    note = [note stringByAppendingFormat:@"-"];

                // Set the tone generator freq
                [self setFreq:[self getNoteNumber:note]];

                // Play the note
                [self.toneGen play:(self.tempo / length)];
            }
            break;

        case 76: // L (length)
        {
            bool look = YES;
            int newLength = 0;
            while (self.dataPos < self.music.length && look) {
                unsigned int peak = (unsigned int)data[self.dataPos];
                if (peak >= 48 && peak <= 57)
                {
                    peak -= 48;
                    newLength = newLength * 10 + peak;
                    self.dataPos++;
                } else {
                    look = NO;
                }
            }
            self.length = newLength;
            DLog(@"Length: %d", self.length);
            [self playNote];
        }
            break;

        case 79: // O (octive)
            {
                bool look = YES;
                int newOctive = 0;
                while (self.dataPos < self.music.length && look) {
                    unsigned int peak = (unsigned int)data[self.dataPos];
                    if (peak >= 48 && peak <= 57)
                    {
                        peak -= 48;
                        newOctive = newOctive * 10 + peak;
                        self.dataPos++;
                    } else {
                        look = NO;
                    }
                }
                self.octive = newOctive;
                DLog(@"Octive: %d", self.self.octive);
                [self playNote];
            }
            break;

        case 84: // T (tempo)
            {
                bool look = YES;
                int newTempo = 0;
                while (self.dataPos < self.music.length && look) {
                    unsigned int peak = (unsigned int)data[self.dataPos];
                    if (peak >= 48 && peak <= 57)
                    {
                        peak -= 48;
                        newTempo = newTempo * 10 + peak;
                        self.dataPos++;
                    } else {
                        look = NO;
                    }
                }
                self.tempo = newTempo;
                DLog(@"Tempo: %d", self.self.tempo);
                [self playNote];
            }
            break;

        default:
            [self playNote];
            break;
    }
}

- (int)getNoteNumber:(NSString*)note
{
    note = [note uppercaseString];
    DLog(@"%@", note);

    if ([note isEqualToString:@"A"])
        return 0;
    else if ([note isEqualToString:@"A#"] || [note isEqualToString:@"B-"])
        return 1;
    else if ([note isEqualToString:@"B"] || [note isEqualToString:@"C-"])
        return 2;
    else if ([note isEqualToString:@"C"] || [note isEqualToString:@"B#"])
        return 3;
    else if ([note isEqualToString:@"C#"] || [note isEqualToString:@"D-"])
        return 4;
    else if ([note isEqualToString:@"D"])
        return 5;
    else if ([note isEqualToString:@"D#"] || [note isEqualToString:@"E-"])
        return 6;
    else if ([note isEqualToString:@"E"] || [note isEqualToString:@"F-"])
        return 7;
    else if ([note isEqualToString:@"F"] || [note isEqualToString:@"E#"])
        return 8;
    else if ([note isEqualToString:@"F#"] || [note isEqualToString:@"G-"])
        return 9;
    else if ([note isEqualToString:@"G"])
        return 10;
    else if ([note isEqualToString:@"G#"])
        return 11;
}

- (void)setFreq:(int)note
{
    float a = powf(2, self.octive);
    float b = powf(1.059463, note);
    float freq = roundf((275.0 * a * b) / 10);
    self.toneGen.frequency = freq;
}

- (void)toneStop
{
    [self playNote];
}

@end 
```

要播放小[曲子](http://glind.customer.netspace.net.au/gwbas-7.html)，请创建一个`Music`对象并播放...

```
[self.music play:@"T180 DF#A L2 A L4 O4 AA P4 F#F# P4 O3 D DF#A L2 A L4 O4 AA P4 GG P4 O3 C#C#EB L2 B L4 O4 BB P4 GG P4 O3 C#C#EB L2 B L4 O4 BB P4 F+F+ P4 O3 DDF#A L2 O4 D L4 O5 DD P4O4 AA P4 O3 DDF#A L2 O4 D L4 O5 DD P4O4 BB P4 EEG L8 B P8 ML B1 L4 MN G#A ML L3 O5 F#1L4 MN D O4 F# ML L2 F# MN L4 E ML L2 B MN L4 AD P8 D8 D4"]; 
```

关于如何消除音符之间的啁啾的任何想法？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-07T04:38:42.093

我认为你在音符之间停止音频输出的地方是罪魁祸首：

```
if (self.toneUnit)
{
    AudioOutputUnitStop(self.toneUnit);
    AudioUnitUninitialize(self.toneUnit);
    AudioComponentInstanceDispose(self.toneUnit);
    self.toneUnit = nil;
} 
```

只需保持音调单元处于活动状态，您的啁啾声就会减少。您将需要其他一些方法来产生静音，可能是让 RenderTone 继续运行但生成幅度为零。

我能够通过改变频率来消除剩余的轻微啁啾，将幅度衰减到零，更新频率，然后再次淡入。这当然是旧的 PC 扬声器无法做到的（除了少数人迅速再次打开它），但是通过非常快速的淡入淡出，您可能会在没有啁啾声的情况下获得老式效果。

这是我的褪色`RenderTone`函数（目前使用邪恶的全局变量）：

```
double currentFrequency=0;
double currentSampleRate=0;
double currentAmplitude=0;

OSStatus RenderTone(
                    void *inRefCon, 
                    AudioUnitRenderActionFlags  *ioActionFlags, 
                    const AudioTimeStamp        *inTimeStamp, 
                    UInt32                      inBusNumber, 
                    UInt32                      inNumberFrames, 
                    AudioBufferList             *ioData)

{
    // Fixed amplitude is good enough for our purposes
    const double amplitude = 0.5;

    // Get the tone parameters out of the view controller
    ToneGen *toneGen = (__bridge ToneGen *)inRefCon;
    double theta = toneGen.theta;

    BOOL fadingOut = NO;
    if ((currentFrequency != toneGen.frequency) || (currentSampleRate != toneGen.sampleRate))
    {
        if (currentAmplitude > DBL_EPSILON)
        {
            fadingOut = YES;
        }
        else
        {
            currentFrequency = toneGen.frequency;
            currentSampleRate = toneGen.sampleRate;
        }
    }

    double theta_increment = 2.0 * M_PI * currentFrequency /currentSampleRate;

    // This is a mono tone generator so we only need the first buffer
    const int channel = 0;
    Float32 *buffer = (Float32 *)ioData->mBuffers[channel].mData;

    // Generate the samples
    for (UInt32 frame = 0; frame < inNumberFrames; frame++) 
    {
        buffer[frame] = sin(theta) * currentAmplitude;
        //NSLog(@"amplitude = %f", currentAmplitude);

        theta += theta_increment;
        if (theta > 2.0 * M_PI)
        {
            theta -= 2.0 * M_PI;
        }
        if (fadingOut)
        {
            if (currentAmplitude > 0)
            {
                currentAmplitude -= 0.001;
                if (currentAmplitude < 0)
                    currentAmplitude = 0;
            }
        }
        else
        {
            if (currentAmplitude < amplitude)
            {
                currentAmplitude += 0.001;
                if (currentAmplitude > amplitude)
                    currentAmplitude = amplitude;
            }
        }

    }

    // Store the theta back in the view controller
    toneGen.theta = theta;

    return noErr;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-24T17:22:29.443

那种小小的啁啾声通常是数学的产物。耳朵本质上是分析频域中的输入信号。例如，频率为 220 Hz 的稳定正弦波听起来像 A。但是，当您的正弦波 *un*steady 时，由于边界而出现其他频率。特别是，由于突然启动或停止声音的非常高的频率分量，您会得到一点爆音。

我在我的[合成器](http://offtonic.com/synth)中解决这个问题的方法（在 Javascript，不是 Obj-C，但这里的概念是相同的）是在超过 300 个样本左右的音符中淡出声音，并在超过 300 个样本左右的时候淡出声音注意关闭。除了根本没有边界之外，没有其他方法可以真正消除边界效应，但即使是很小且难以察觉的淡入淡出也会使边界效应变得难以察觉。

# c++ - Lear Gist Descriptor C 代码与 C++ 一起使用

> ID：10051221
> 
> 赞同：3
> 
> 时间：2012-04-07T02:26:34.330
> 
> 标签：c++, c, makefile, gist

我正在为一个项目使用 Lear 的 Gist 描述符实现，可以在这里找到：http: [//lear.inrialpes.fr/software](http://lear.inrialpes.fr/software)。

我正在用 C++ 编写一个应用程序，我想使用这个库。我在makefile和一般链接方面遇到问题。

这些命令没有给我任何错误：

```
g++ -c standalone_image.c -o standalone_image.o
g++ -c gist.c -o gist.o 
```

然而，这条线

```
g++ compute_gist.c `pkg-config --cflags --libs opencv` 
```

给我以下错误

```
Undefined symbols for architecture x86_64:
  "color_gist_scaletab(color_image_t*, int, int, int const*)", referenced from:
      _main in ccMFYbAU.o
  "color_image_delete(color_image_t*)", referenced from:
      _main in ccMFYbAU.o
  "color_image_new(int, int)", referenced from:
      load_ppm(char const*)in ccMFYbAU.o
ld: symbol(s) not found for architecture x86_64
collect2: ld returned 1 exit status 
```

我在不同的目录中有 Mosaic c++ 代码。我也试过分别编译gist和standalone_image，复制到mosaic目录，编译Mosaic代码。这给了我以下错误：

```
Undefined symbols for architecture x86_64:
  "color_gist_scaletab(color_image_t*, int, int, int const*)", referenced from:
      _main in main.o
ld: symbol(s) not found for architecture x86_64
collect2: ld returned 1 exit status
make: *** [mosaic] Error 1 
```

我真的很想在我的项目中使用这个库，但是我想不出一种将它合并到我的 c++ 中的方法。

任何帮助是极大的赞赏！谢谢！

编辑：我正在使用 Mac Lion：

```
gcc + g++ version: i686-apple-darwin11-llvm-gcc-4.2 (GCC) 4.2.1 (Based on Apple Inc. build 5658) (LLVM build 2336.1.00) 
```

lear 库还使用应该与 C 和 C++ 一起使用的 FFTW3 库。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-11T17:55:00.090

问题是我需要围绕 gist include 的 extern，但是在 Makefile 中完成的链接也是错误的。现在可以了。:)

# extjs - 是否可以将 ExtJS 与backbone.js 一起使用？

> ID：10051222
> 
> 赞同：3
> 
> 时间：2012-04-07T02:26:36.510
> 
> 标签：extjs, backbone.js

我有一个我想在 ExtJS 应用程序中使用的主干.js api。

Extjs 有一个非常灵活的模型和代理系统。但我看不到使用backbone.js 模型的好方法。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-03T14:08:26.300

extjs是重量级的解决方案，extjs对mvc架构全面支持；主干是一个非常轻量级的解决方案，两者一般都不需要共存。

# c# - 如何使用 XAML 在 Panel 或 GroupBox 等整个容器上设置 IsReadOnly / IsEnabled？

> ID：10051226
> 
> 赞同：4
> 
> 时间：2012-04-07T02:28:14.393
> 
> 标签：c#, wpf, xaml, mvvm, isenabled

我有一个`MVVM`包含多个视图的应用程序，其中包含一些`IsReadOnly`基于用户权限、查看/编辑模式和对象状态的复杂规则。

我想为同一个容器（ ////等）中的整个控件组设置和/`IsReadOnly`或属性。此属性的值将在 ViewModel 中定义。`IsEnabled``GroupBox``StackPanel``Grid``UserControl`

我`SomeGroupIsReadOnly`每个 UserControl 有 3-6 个不同的属性（有大量的输入控件，比如,`TextBox`和some ），我正在寻找一个通用的、友好的解决方案，这将允许我在每个容器的基础上重用绑定，而不是分别为每个单独的控件指定它们。`RadioButtons``ComboBoxes``DataGrids``MVVM`

**如何使用 XAML 在 Panel 或 GroupBox 等容器内的所有控件上设置 IsReadOnly / IsEnabled？**

似乎 WPF 不支持开箱即用...

**编辑**

我忘了提到为容器设置 IsEnabled 会禁用 TextBoxes 的一个重要特性——能够复制它们的内容。我需要他们处于`IsReadOnly=true`状态。如果有解决方法，那么我的问题将得到解决。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-04-07T03:55:11.703

禁用包含您的控件的面板也将禁用面板内的控件。将 Panel 的 IsEnabled 成员绑定到 ViewModel 上的 bool 属性，并根据您的规则设置它以禁用 Panel 及其所有子项。

xml:

```
<GroupBox IsEnabled="{Binding Path=IsGroupEnabled}">
    <StackPanel>
        <Button Content="Sample Button"/>
        <TextBox Text="Sample text box"/>
    </StackPanel>
</GroupBox> 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-04-07T04:38:05.180

对我们来说行之有效的方法是定义一个表示应用程序权限结构的视图模型（在下面的示例中为 YourPermissionsViewModel）。

然后，您可以创建一个自定义面板控件来扩展您选择的任何面板（本示例中为 StackPanel）。这样，您可以添加 IsReadOnly 属性绑定并将它们持久保存到面板的子项中。

XAML 中的面板如下所示：

```
<local:PanelExtension IsEnabled="{Binding YourPermissionsViewModel.IsEnabled}" 
                      IsReadOnly="{Binding YourPermissionsViewModel.IsReadOnly}">
    <TextBox Text="eeny" Width="100" />
    <TextBox Text="meeny" Width="100"/>
    <TextBox Text="miny" Width="100"/>
    <TextBox Text="mo" Width="100" />
    <Label Content="coolio" Width="100" />
</local:PanelExtension> 
```

这是 StackPanel 扩展控件，其中包含 StackPanel 的所有功能，并附加了一个自定义 IsReadOnly 依赖属性，该属性会更新拥有该属性的任何子控件的相应属性值：

```
public class PanelExtension : StackPanel
{
    public bool IsReadOnly
    {
        get { return (bool)GetValue(IsReadOnlyProperty); }
        set { SetValue(IsReadOnlyProperty, value); }
    }
    public static readonly DependencyProperty IsReadOnlyProperty =
        DependencyProperty.Register("IsReadOnly", typeof(bool), typeof(PanelExtension),
        new PropertyMetadata(new PropertyChangedCallback(OnIsReadOnlyChanged)));

    private static void OnIsReadOnlyChanged(DependencyObject d, DependencyPropertyChangedEventArgs e)
    {
        ((PanelExtension)d).OnIsReadOnlyChanged(e);
    }

    protected virtual void OnIsReadOnlyChanged(DependencyPropertyChangedEventArgs e)
    {
        this.SetIsEnabledOfChildren();
    }

    public PanelExtension()
    {
        this.Loaded += new RoutedEventHandler(PanelExtension_Loaded);
    }

    void PanelExtension_Loaded(object sender, RoutedEventArgs e)
    {
        this.SetIsEnabledOfChildren();
    }

    private void SetIsEnabledOfChildren()
    {
        foreach (UIElement child in this.Children)
        {
            var readOnlyProperty = child.GetType().GetProperties().Where(prop => prop.Name.Equals("IsReadOnly")).FirstOrDefault();
            readOnlyProperty.SetValue(child, this.IsReadOnly, null);
        }
    }
} 
```

使用这种方法，您可以添加所需的任意数量的自定义属性，它确实为您提供了很大的灵活性，并使您能够在必须对各种元素设置复杂权限时考虑可能遇到的多种情况。

# php - PHP - FFMPEG - 无法在媒体输出上应用多个正则表达式

> ID：10051227
> 
> 赞同：1
> 
> 时间：2012-04-07T02:28:22.260
> 
> 标签：php, regex, ffmpeg

我正在编写一个 php 脚本（我必须使用 php）来循环浏览媒体文件的目录并在图表中显示媒体信息。

现在，我正在尝试在 1 个文件上执行此操作。

我可以成功地做到这一点。我目前可以解析输出（使用正则表达式）以获取文件名、持续时间、分辨率等信息

有人告诉我，我可以结合正则表达式来提高效率。

但是，当我这样做时，我无法正确解析 ffmpeg 输出。

因此，我尝试将输出复制到一个字符串并使用多个表达式解析它，它工作得很好。

任何帮助表示赞赏。

谢谢。

* * *

## 工作代码

```
$media_info = "'test.mkv': Metadata: creation_time : 2011-03-12 09:04:18 Duration: 00:21:44.10, start: 0.000000, bitrate: 500 kb/s Chapter #0.0: start 0.097000, end 1304.107000 Metadata: title : 00:00:00.097 Stream #0:0: Video: h264 (High), yuv420p, 720x400 [SAR 80:81 DAR 16:9], 23.98 fps, 23.98 tbr, 1k tbn, 47.95 tbc (default) Stream #0:1: Audio: aac, 48000 Hz, stereo, s16 (default) At least one output file must be specified";

$file = array();
$file_test = preg_match_all("/'([a-zA-Z0-9\._]*\.[a-zA-Z0-9]*)'.* Duration: ([0-9]{2,}:[0-9]{2}:[0-9]{2}\.[0-9]*)/", $media_info, $file);;
var_dump($file) 
```

* * *

## 不工作的代码

```
ob_start();
passthru("C:\\wamp\\www\\ffmpeg\\bin\\ffmpeg.exe -i \"{$videofile}\" 2>&1");
$raw_data = ob_get_contents();
ob_end_clean();

$ffmpeg_info =  explode("from", $raw_data);

$media_info = $ffmpeg_info[1];

$file = array();
$file_test = preg_match_all("/'([a-zA-Z0-9\._]*\.[a-zA-Z0-9]*)'.* Duration: ([0-9]{2,}:[0-9]{2}:[0-9]{2}\.[0-9]*)/", $media_info, $file);;
var_dump($file) 
```

* * *

## 新代码

我尝试使用 ffmpeg-php 扩展和以下工作（打印比特率除外）

```
$movie = new ffmpeg_movie($video_file);

echo $movie->getFilename();
echo "<br/>" ; 
echo $movie->getDuration();
echo "<br/>" ;
echo $movie->getFrameWidth();
echo "x";
echo $movie->getFrameHeight();
echo "<br/>" ; 
echo $movie->getBitRate();
echo "<br/>" ; 
echo $movie->getVideoBitRate();
echo "<br/>" ; 
echo $movie->getAudioBitRate();
echo "<br/>" ;
echo $movie->getVideoCodec();
echo "<br/>" ;
echo $movie->getAudioCodec();
?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-08T23:17:53.083

您是否能够使用库而不是命令行工具输出的正则表达式来提取信息？例如，[ffmpeg-php](http://ffmpeg-php.sourceforge.net/)？

# tomcat - 为什么 tomcat Bootstrap main 函数的注释表明它仅用于测试

> ID：10051228
> 
> 赞同：1
> 
> 时间：2012-04-07T02:28:25.517
> 
> 标签：tomcat, testing, comments, main, bootstrapping

我正在研究tomcat 7源代码。我发现 Bootstrap 中 main 函数的注释表明它仅用于测试：

```
/**
 * Main method, used for testing only.
 *
 * @param args Command line arguments to be processed
 */
public static void main(String args[]) { 
```

我认为它是tomcat服务器的入口点。这个评论有什么理由吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-09T12:41:27.490

一些 Tomcat 源代码可以追溯到项目的起源。一些课程的目的随着时间的推移而改变，但评论并不总是跟上。这看起来像是其中一种情况。Bootstrap 确实是从命令行启动的 Tomcat 实例的入口点。我会更新评论。

# php - 如何将 HTML 标记解析为纯文本？我想实现 facebook 或 twitter 之类的东西

> ID：10051232
> 
> 赞同：0
> 
> 时间：2012-04-07T02:29:22.357
> 
> 标签：php, jquery

例如：我有这个字符串

```
@[1234:peterwateber] <b>hello</b> <div>hi!</div> http://stackoverflow.com 
```

我想把它转换成这样的 HTML：

```
<a href="1234">@peterwateber</a> &lt;b&gt;hello&lt;/b&gt; &lt;div&gt;hi!&lt;divb&gt; 
<a href="http://sackoverflow.com">http://stackoverflow.com</a> 
```

我正在使用 QueryPath，并且我有这段代码，您可以在其中将**“@[123:peterwateber]”**中的文本分别输出到“ **123**和**peterwateber** ”。

```
The code to do that is:
$hidden_input = "@[1234:peterwateber] <b>hello</b> <div>hi!</div> http://stackoverflow.com";
preg_match('#@\[(\w+)\:(\w+)\]#', $hidden_input, $m); //returns 123,peterwateber 
```

我想要实现的是拥有这种输出： ![Facebook 风格帖子或 Twitter 风格帖子](../Images/d355201716b4004c751543ee11cd7832.png)

我正在使用 Hawkee 的 jQuery 自动完成插件**[http://www.hawkee.com/snippet/9391/](http://www.hawkee.com/snippet/9391/)**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-07T05:04:11.390

我不确定是否有专门的功能，但你可以做的是：在链接的例子中（a href）

```
$raw = "@[1234:peterwateber]"
$thingtoreplace = ("@[");
$firstpass = str_replace($thingtoreplace, "<a href='", $raw);
$raw2 = $firstpass
$thingtoreplace = (":");
$secondpass = str_replace($thingtoreplace, "'>", $raw1);
$raw3 = $second
$thingtoreplace = ("]");
$secondpass = str_replace($thingtoreplace, "'</a>", $raw3); 
```

我知道这看起来很乏味，但它应该可以解决问题。如果它没有帮助那么请不要给我打分...我花了时间在这

# php - ReflectionException，类名\子名不存在

> ID：10051234
> 
> 赞同：1
> 
> 时间：2012-04-07T02:29:24.153
> 
> 标签：php, doctrine-orm, entities

我有一个 CodeIgniter 2 + Doctrine 2 的“香草”安装。

我的教程 Entity.User.dcm.yml 和 Entity.Article.dcm.yml 文件在 CLI 中工作得很好，通过 /php 学说-cli.php orm:generate-entities 模型和 php 学说-cli.php orm:generate-代理 没有大惊小怪，没有问题。

但是，当我变得笨拙并决定制作新的 Project1.User.dcm.yml 和 Project1.cartdata.dcm.yml 时，我通过了 generate-entities 没问题，但是当我运行 generate-proxies 时，我得到了：

> 警告：class_parents(): Class Project1\Users 不存在，无法在第 40 行的 /../applicationFolder/libraries/Doctrine/Common/Persistence/Mapping/RuntimeReflectionService.php 中加载
> 
> 警告：array_reverse() 期望参数 1 是数组，布尔值在 /../applicationFolder/libraries/Doctrine/ORM/Mapping/ClassMetadataFactory.php 的第 231 行
> 
> 警告：在 /../applicationFolder/libraries/Doctrine/ORM/Mapping 中为 foreach() 提供的参数无效

我尝试了大量的修补，我尝试将名称命名为 Entities.Project1.User.dcm.yml 和类似的名称，但没有运气。如果我回到我的教程实体文件，那么一切正常。据我所知，我确保精细的内部结构是一致的，`Project1\User`等等

我错过了一些简单易行的东西吗？或者是否需要进行一些其他配置更改才能让学说允许这些？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-07T04:39:15.573

在 Doctrine.php 中：

```
// load the entities
    $entityClassLoader = new \Doctrine\Common\ClassLoader('Entities', APPPATH.'models');
    $entityClassLoader->register();
    $entityClassLoader = new \Doctrine\Common\ClassLoader('MyNamespace1', APPPATH.'models');
    $entityClassLoader->register();
    $entityClassLoader = new \Doctrine\Common\ClassLoader('MyNamespace2', APPPATH.'models');
    $entityClassLoader->register(); 
```

# c - C 中的干净错误处理方法

> ID：10051237
> 
> 赞同：7
> 
> 时间：2012-04-07T02:29:35.503
> 
> 标签：c, error-handling

我正在编写一个需要良好错误处理的 C 程序。代码是这样的：

```
If(doWork("A")<0){
    return -1;   
}
If(doWork("B")<0){
    undoWork("A");
    return -1;
}
If(doWork("C")<0){
    undoWork("A");
    undoWork("B");
    return -1;
}
return 0; 
```

这段代码有效，但看起来很乱，特别是我有一长串`doWork(X)`要调用的。在这种情况下，是否有更好、更清洁的方法来处理错误？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-07T02:54:22.463

有些人，尤其是初学者到中级程序员，对在生产代码中看到有非常特殊的反应`goto`，但是顺序获取资源和错误时智能释放的惯用语如下：

```
if(doWork("A") < 0)
  goto errA;

if(doWork("B") < 0)
  goto errB;

if(doWork("C") < 0)
  goto errC;

/* success! */
return 0;

/* Error handling / releasing resources section */
errC:
  undoWork("B");
errB:
  undoWork("A");
errA:

return -1; 
```

您将在系统代码中看到大量示例，例如在 linux 内核中。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-07T02:41:58.247

作为同一个任务`doWork`，您可能可以定义一个链表或向量`jobs`并将其作为参数传递给`doWork`，将相应的信息附加到函数内部的此列表中，并且只调用`undoWork`一次：

```
If(doWork("A", &jobs)<0){
    return -1;   
}
If(doWork("B", &jobs)<0){
    undoWork(jobs);
    return -1;
}
If(doWork("C", &jobs)<0){
    undoWork(jobs);
    return -1;
}
return 0; 
```

这样，无论要撤消的作业组合如何，您的逻辑都不会变得过于复杂。

与@twain249 的解决方案相比，优势在于该函数决定是否将作业添加到列表中，因此您有一个很好的隔离和模块化。

您当然可以将某种形式的可交互数据结构与此结合起来，以**进一步减少重复代码的数量**：

```
for(i=0; i < jobdata.size; i++) {
    If(doWork(jobdata[i], &jobs)<0){
        undowork(jobs);
        return -1;   
    }
} 
```

如您所见，数据结构设计在算法设计中起着重要作用，通常比人们通常认为的重要得多。

*可能有数千个工作，代码将保持四行。*

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-07T02:31:29.073

可能不是。像 C++ 和 C# 这样的新语言更喜欢异常来帮助改善这种情况。

也许您可以有一个表格，以某种方式指示您已完成哪些任务并撤消这些任务。但我真的认为这会使你的代码更复杂而不是更少。

另请注意，虽然使用 有一些非常强烈的感觉`goto`，但实际上有时可以简化这样的结构。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-07T02:40:19.577

如果可以将您必须调用的所有内容存储`doWork`在一个数组中，那么您可以显着缩短代码，例如。

```
int i = 0;
int len = MAX_NUM; //set to the value of calls
int error = 0;

for(i = 0; i < len; i++) {
    if(doWork(a[i]) < 0) {
        error = 1;
        break;
    }
}

if(error) {
    for(int j = 0; j < i; i++) {
        undoWork(a[j]);
    }
    return -1;
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-07T03:26:06.637

如果你没有一个超长的列表，你可以这样处理。

```
if (dowork("A") >=0) {
if (dowork("B") >=0) {
if (dowork("C") >=0) {
if (dowork("D") >=0) return 0;
undowork("C"); }
undowork("B"); }
undowork("A"); }
return -1; 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-04-07T03:51:40.347

还有另一种广泛使用的方法，它基于清晰且不需要 goto 的单遍循环。这意味着尽管 Undo 函数可以正确处理已完成和未完成的工作。

```
do
{
  if(doWork("A")<0)
    break;   

  if(doWork("B")<0)
    break;

  if(doWork("C")<0)
    break;

  return 0;
}
while(0);

undoWork("A");
undoWork("B");
undoWork("C");
return -1; 
```

# java - Java 嵌套类——在底层？

> ID：10051239
> 
> 赞同：5
> 
> 时间：2012-04-07T02:30:19.713
> 
> 标签：java

我有几个与 Java 中的嵌套类有关的问题。

*   关于内存分配，嵌套类如何“隐藏”？

*   您不能在嵌套类中声明静态变量（我认为确切的错误是静态属性只能在顶级类中声明）。为什么这是嵌套类以及有哪些其他限制？

如果可能，请说明您的答案是否特定于 Java，或者 C++ 是否也遵循相同的规则？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-07T02:48:06.197

就内存和编译而言，内部类与常规类完全相同。（也许它们在内存中的管理方式有所不同，但对于普通的 Java 开发人员来说是不可见的）事实上，当您编译具有内部类的类时，您可以看到编译后的 .class 文件为`OuterClass$InnerClass.class`. 据我所知，JVM 对它们一视同仁。

就静态变量而言，我不确定问题是什么。例如，这为我运行：

```
public class Tester {
  public static void main(String[] args) {
    System.out.println(InnerTester.MY_STRING);
  }

  public class InnerTester {
    public static final String MY_STRING = "MY_STRING";
  }
} 
```

***编辑***

正如杰弗里指出的那样，这不会编译：

```
public class Tester {
  public static void main(String[] args) {
    System.out.println(InnerTester.MY_STRING);
  }

  public class InnerTester {
    public static String MY_STRING = "MY_STRING";
  }
} 
```

不同之处在于，我将第一个静态变量列为 final。

在考虑了一会儿之后，我同意@Eugene。它们允许内部类上的静态字段，`final`因为这样就没有初始化问题。该值*不能*更改，您只需将其初始化为它的值。但是，如果静态字段*不是* `final`，则需要创建外部类的*实例*才能初始化该字段，并且静态成员不能绑定到特定实例。

我也发现[了这个](https://stackoverflow.com/questions/1953530/why-does-java-prohibit-static-fields-in-inner-classes)讨论。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-07T02:46:40.020

基本上，嵌套类只是一个具有引用封闭实例的字段的类。

除非它是一个静态嵌套类（您可以在其中声明静态字段/方法）。在这种情况下，它只是一个名称中包含另一个路径元素的类（包 + 封闭类名称）。

换句话说。非静态嵌套类（内部类） - 没有封闭实例就不能存在（例如书内的页面）。你实例化如下：

```
 Book book = ... // a book instance;
 Book.Page page = book.new Page(); // requires an enclosing instance 
```

但是静态嵌套类 - 是完全独立的，它就像一个命名空间的问题。您可以将其实例化为：

```
 Outer.NestedStatic instance = new Outer.NestedStatic(); // just name-space 
```

更多信息在这里：[http ://docs.oracle.com/javase/tutorial/java/javaOO/nested.html](http://docs.oracle.com/javase/tutorial/java/javaOO/nested.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-07T02:48:56.903

嵌套类只是在另一个类中定义一个类型。Java 不关心新类型在什么范围内定义，您不需要以任何特殊方式“处理”这个内部类。

拥有一个带有静态字段的非静态内部类是没有意义的，因为对非静态内部类的任何引用都必然是一个实例变量。只有当内部类被创建`static`时，才可能静态分配它——在这种情况下，静态内部类是一个独立的类，封闭的类名充当另一个命名空间级别。

# c# - 如何获取用于强名称的 .Net 程序集的哈希？

> ID：10051242
> 
> 赞同：3
> 
> 时间：2012-04-07T02:30:32.290
> 
> 标签：c#, .net, hash, assemblies, code-signing

签署程序集时，`hash value`首先从程序集创建 a。然后，哈希值用私钥加密并与公钥一起放置。但是有没有办法获得程序集的这个哈希值？（*因为它也是在运行时计算并与存储、解密的比较。*）

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-07T03:54:20.700

使用signtool.exe：signtool verify /v /pa mydll.dll | 找到“哈希”

# iphone - 如何将导航栏标题设置为可编辑的文本字段？

> ID：10051246
> 
> 赞同：1
> 
> 时间：2012-04-07T02:31:30.940
> 
> 标签：iphone, cocoa-touch, uinavigationbar

我希望用户能够编辑导航栏的标题。我觉得我以前在应用程序中看到过它。这可能吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-07T02:44:05.153

如果您使用的是`UINavigationController`然后玩

```
self.navigationItem.titleView = // UITextView 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-07T07:14:09.600

您将必须自定义您的`navigationBar`并将其添加`UITextField`为子视图，并相应地放置它。

# android - OpenGL ES 1.1 将两个纹理组合成一个可重复使用的纹理

> ID：10051247
> 
> 赞同：2
> 
> 时间：2012-04-07T02:31:36.967
> 
> 标签：android, opengl-es, textures, opengl-es-1.1

在 OpenGL ES 1.1 中，我想采用多个纹理 ID 并将它们组合成一个纹理 ID。然后我将来可以多次使用这个生成的纹理。我的纹理源可能是我想要堆叠在一起的透明 PNG。这将是一个巨大的优化，因为我不必每帧渲染多个纹理。

我见过像 wiki [Texture_Combiners](http://www.opengl.org/wiki/Texture_Combiners)这样的例子，但结果似乎不是可重用的。

此外，如果有一种方法可以将一个图像与另一个图像掩蔽成可重复使用的纹理，那也将非常有帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-07T02:50:41.800

你想要做的是渲染到纹理。如果您正在为 iOS 编写代码，则可以保证[OES 帧缓冲区扩展](http://www.khronos.org/registry/gles/extensions/OES/OES_framebuffer_object.txt)可用，因此您可以使用它。如果您正在为 Android 或其他平台编写，则该扩展可能可用，但不能保证。如果它不可用，您可以重新使用[`glCopyTexImage2D`](http://www.khronos.org/opengles/sdk/1.1/docs/man/glCopyTexImage2D.xml).

因此，在第一种情况下，您将创建一个帧缓冲区，其中有一个纹理作为其颜色缓冲区。渲染到那个然后切换到另一个帧缓冲区，你以后可以从纹理中绘制。

在第二个中，您将绘制到您拥有的任何帧缓冲区，然后用于`glCopyTexImage2D`从当前颜色缓冲区复制到纹理中。这会慢一些，因为它是一个副本，但它仍然可能比读回渲染的内容然后自己上传要快得多。

ES 2.0 强制包含在帧缓冲区扩展中的函数，因此支持 ES 2.0 的 GPU 很可能支持该扩展。

# audio - 复用到 MPEG-TS：音频流的错误参数

> ID：10051250
> 
> 赞同：4
> 
> 时间：2012-04-07T02:32:32.660
> 
> 标签：audio, ffmpeg, pcm, mpeg2-ts

我正在尝试使用 ffmpeg 将视频（H.264）和音频（PCM_S16LE，无压缩）混合到 MPEG 传输流中。视频显示很好。但是，音频流不播放。ffprobe显示的音频流是AAC，这显然不是我的本意。所以我在添加音频流时一定做错了什么。知道如何纠正这个吗？

这是我添加音频流的代码：

```
void add_audio_stream()
{

    CodecID codec_id = CODEC_ID_PCM_S16LE;

    AVStream *p_ast = av_new_stream(fc, 1);

    if (!p_ast) {
        fprintf(stderr, "Could not alloc audio stream\n");
        exit(1);
    }

    ai = p_ast->index;

    AVCodecContext *pcc = p_ast->codec;
    avcodec_get_context_defaults2( pcc, AVMEDIA_TYPE_AUDIO );

    pcc->codec_type = AVMEDIA_TYPE_AUDIO;
    pcc->codec_id = codec_id;
    pcc->sample_fmt = AV_SAMPLE_FMT_S16;
    //pcc->bit_rate = 44100*16*2;
    pcc->bit_rate = 0;
    pcc->sample_rate = 44100;
    pcc->channels = 2;
    pcc->time_base = (AVRational){1, 44100};

    // some formats want stream headers to be separate
    if (fc->oformat->flags & AVFMT_GLOBALHEADER)
    {
        printf(" **** 1 ****\n");
        pcc->flags |= CODEC_FLAG_GLOBAL_HEADER;
    }
    else
        printf(" **** 2 ****\n");

    AVCodec *codec;

    /* find the audio encoder */
    codec = avcodec_find_encoder(pcc->codec_id);
    if (!codec) {
        fprintf(stderr, "codec not found\n");
        exit(1);
    }

    /* open it */
    if (avcodec_open(pcc, codec) < 0) 
    {
        fprintf(stderr, "could not open codec\n");
        exit(1);
    }
} 
```

这是ffprobe的输出：

```
ffprobe version N-32405-g6337de9, Copyright (c) 2007-2011 the FFmpeg developers
  built on Sep  8 2011 11:20:12 with gcc 4.4.3
  configuration: --enable-gpl --enable-version3 --enable-nonfree --enable-postproc --enable-libfaac --enable-libopencore-amrnb --enable-libopencore-amrwb --enable-libtheora --enable-libvorbis --enable-libx264 --enable-libxvid --enable-x11grab --enable-libmp3lame
  libavutil    51\. 16\. 0 / 51\. 16\. 0
  libavcodec   53\. 13\. 0 / 53\. 13\. 0
  libavformat  53\. 12\. 0 / 53\. 12\. 0
  libavdevice  53\.  3\. 0 / 53\.  3\. 0
  libavfilter   2\. 39\. 0 /  2\. 39\. 0
  libswscale    2\.  1\. 0 /  2\.  1\. 0
  libpostproc  51\.  2\. 0 / 51\.  2\. 0
[mpegts @ 0xa96daa0] Continuity Check Failed
[mpegts @ 0xa96daa0] Continuity Check Failed
[aac @ 0xa974da0] channel element 0.1 is not allocated
[aac @ 0xa974da0] More than one AAC RDB per ADTS frame is not implemented. Update your FFmpeg version to the newest one from Git. If the problem still occurs, it means that your file has a feature which has not been implemented.

.
.
lot of gobbly-gook about missing AAC parameters . . . 
.
.

[aac @ 0xa974da0] More than one AAC RDB per ADTS frame is not implemented. Update your FFmpeg version to the newest one from Git. If the problem still occurs, it means that your file has a feature which has not been implemented.
[aac @ 0xa974da0] Error decoding AAC frame header.
[mpegts @ 0xa96daa0] max_analyze_duration 5000000 reached at 5429789
[mpegts @ 0xa96daa0] Continuity Check Failed
[mpegts @ 0xa96daa0] Continuity Check Failed

Input #0, mpegts, from 'test_audio_video.mts':
  Duration: 00:00:40.35, start: 0.010000, bitrate: 1907 kb/s
  Program 1 
    Metadata:
      service_name    : Service01
      service_provider: FFmpeg
Stream #0.0[0x100]: Video: h264 (Constrained Baseline) ([27][0][0][0] / 0x001B), yuv420p, 640x480, 30 fps, 30 tbr, 90k tbn, 60 tbc

Stream #0.1[0x101]: Audio: aac ([6][0][0][0] / 0x0006), 96000 Hz, 4.0, s16, 9 kb/s 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-09T09:17:13.403

我想我怀疑 MEPG2 TS 将允许 PCM 音频。它可以占用 MPI、MP2 或 AAC。AAC 更多地被视为默认选择，而不是识别。

此外，与 Video 不同，Audio 标头的描述性不是很强。即没有开始代码和东西，所以除了PES头之外，通常没有办法找出它是什么类型的音频。

如果可能，对音频进行编码。

尝试 Gspot 应用程序进行交叉检查。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-12-12T04:08:57.970

看起来 MPEG-TS 支持 AES3 格式的 PCM 音频作为私有数据，由[SMPTE 302M](http://ieeexplore.ieee.org/servlet/opac?punumber=7291630)指定。

目前`s302m`ffmpeg 中有一个编码器/解码器，可以让您轻松实现目标。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-01-18T13:28:43.947

前段时间我也玩过它。我发现： - 蓝光仅支持 48000 采样率 - 我总是使用 BIG ENDIAN 而不是 LITTLE ENDIAN。

我认为 ffmpeg 将为 mpeg2_ts 使用蓝光设置。

# c++ - 指针稳定吗？

> ID：10051255
> 
> 赞同：6
> 
> 时间：2012-04-07T02:34:48.247
> 
> 标签：c++, objective-c, c, pointers

我想使用对象的实际指针地址（未标记为易失性）来唯一标识该对象。

这是一件坏事吗？一般来说，系统内存管理会移动对象，因此它的地址是关于还是指针稳定？

谢谢

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-04-07T02:38:34.773

你的指针保证在它指向的对象的生命周期内保持稳定，除非你做一些事情来破坏它。操作系统确实确实在内存中移动了东西，但那是物理内存 - 操作系统提供给您的进程的虚拟内存空间将使东西保持在相同的地址。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-04-07T02:50:38.347

在 C 中，对象的地址在其生命周期内是恒定的。请注意，根据 C 标准，`realloc`不会“移动”对象；它分配一个具有相同内容的新对象（对于新旧长度中较短的一个），如果成功，则释放旧对象。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-04-07T02:58:34.947

指针是稳定的，但是，您应该正确使用指针，否则您的代码将不稳定。

指针在对象死亡之前一直有效，一旦对象死亡，您将拥有所谓的[悬空指针](http://en.wikipedia.org/wiki/Dangling_pointer)。

有很多方法可以避免悬空指针，其中一些是非常高级的主题。例如，您可以使用“句柄”，但这是一种更复杂的方法，并且需要与默认值不同的内存管理。

您使用的语言对于指针无效的方式也很重要。您的问题已标记为 C、C++ 和 Objective-C。在 C 中，您的指针可以通过 malloc 和 realloc 无效，而在 C++ 中，您的指针可以通过 delete 无效。

如果您是第一次被介绍，我强烈建议您阅读更多关于指针的内容，例如[这篇文章](http://www.cplusplus.com/doc/tutorial/pointers/)。

我还建议阅读更多内容[std::shared_ptr](http://en.cppreference.com/w/cpp/memory/shared_ptr)。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-04-07T02:38:18.360

指向对象的指针在对象死亡（稳定）之前一直有效。

使用指针进行识别有其用途，但可能不是最好的做法。

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2012-04-07T02:40:44.117

iOS 内存管理不会移动对象。如果你有一个指向对象的指针，它在对象的生命周期内都是有效的。

在您的问题中，您指的是“指针地址”。但是我假设您的意思是指向对象的指针。否则这个问题的答案会变得更加复杂。

# javascript - 这个填充函数在哪里定义？

> ID：10051258
> 
> 赞同：1
> 
> 时间：2012-04-07T02:36:28.047
> 
> 标签：javascript, svg, d3.js, geometry, bubble-chart

在示例中，[http](http://mbostock.github.com/d3/ex/bubble.html) ://mbostock.github.com/d3/ex/bubble.html ：

![在此处输入图像描述](../Images/2847e3cdd45f27ca32b8ef43f944947e.png)

在第 27 行：

```
.style("fill", function(d) { return fill(d.packageName); }); 
```

在哪里`fill()`定义？我也没有找到`d3.js`。即使包名称不是颜色，也会分配一些随机颜色。怎么会这样？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-07T02:44:32.727

看看您链接的代码段的最顶部：

```
var r = 960,
    format = d3.format(",d"),
    fill = d3.scale.category20c(); 
```

第三行是`fill`定义的地方。你可以在这里找到文档`category20c`：

[https://github.com/mbostock/d3/wiki/Ordinal-Scales#wiki-category20](https://github.com/mbostock/d3/wiki/Ordinal-Scales#wiki-category20)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-07T03:24:00.303

源代码位于 d3.v2.js 的第[2997](http://%20https://github.com/mbostock/d3/blob/master/d3.v2.js)行：

```
d3.scale.category20c = function() {
  return d3.scale.ordinal().range(d3_category20c);
}; 
```

哪个在呼唤：

```
// lines 2894-2896
d3.scale.ordinal = function() {
  return d3_scale_ordinal([], {t: "range", x: []});
}; 
```

然后调用

```
// lines 2903-2905
function scale(x) {
    return range[((index.get(x) || index.set(x, domain.push(x))) - 1) % range.length];
} 
```

传入的参数`x`设置为`d3_category20c`从下面看到的 20 种可用颜色列表中分配颜色：

```
["#3182bd", "#6baed6", "#9ecae1", 
"#c6dbef", "#e6550d", "#fd8d3c", 
"#fdae6b", "#fdd0a2", "#31a354", 
"#74c476", "#a1d99b", "#c7e9c0", 
"#756bb1", "#9e9ac8", "#bcbddc", 
"#dadaeb", "#636363", "#969696", 
"#bdbdbd", "#d9d9d9"] 
```

单步执行代码，我看到这样分配的颜色（基于传入的类别）：

```
cluster = 0 #3182bd
graph = 1 #6baed6
optimization = 2 #9ecae1
animate = 3  #c6dbef
interpolate = 4 #e6550d
converters = 5 #fd8d3c
data = 6 #fdae6b
display = 7 #fdd0a2
flex = 8 #31a354
physics = 9  #74c476
query = 10 #a1d99b
methods = 11 #c7e9c0
scale = 12 #756bb1
util = 13 #9e9ac8
heap = 14 #bcbddc
math = 15 #dadaeb
palette = 16 #636363
axis = 17 #969696
controls = 18 #bdbdbd
render = 19 #d9d9d9
events = 0 #3182bd
legend = 1 #6baed6
etc... 
```

请注意，它使用 mod 运算符，因此如果传入的类别数量超过 20 种颜色的范围，它可以继续分配颜色。

请注意，颜色在[category.js](https://github.com/mbostock/d3/blob/master/src/scale/category.js)的第 48-54 行`d3_category20c`中定义。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-01-17T19:16:14.467

如前所述，这段代码：

```
var r = 960,
    format = d3.format(",d"),
    fill = d3.scale.category20c(); 
```

定义填充（）。我只想添加以下方便的文档和参考卡组合：

![在此处输入图像描述](../Images/41caafc724748029522da5c8aaa57e5e.png)

# c# - Tron 游戏中的碰撞时间检测

> ID：10051259
> 
> 赞同：1
> 
> 时间：2012-04-07T02:37:11.427
> 
> 标签：c#, multithreading, collision

所以我试图在 C#.NET 中制作一个 Tron LightBike 游戏，但是当两个玩家同时互相碰撞（或正面碰撞）时我遇到了一个问题。

这是我初始化播放器的方法...

```
bikes = new ArrayList();
bikes.Add(new LightBike(new Point(500, 10), Color.Blue, "left", new DirectionKeys(Keys.Left, Keys.Down, Keys.Up, Keys.Right))); //blue player facing right
bikes.Add(new LightBike(new Point(10, 10), Color.Red, "right", new DirectionKeys(Keys.A, Keys.S, Keys.W, Keys.D))); //red player facing left
grid = new int[this.Size.Width, this.Size.Height]; //create the grid map
drawThread = new Thread(drawBikes); 
```

当正面碰撞时，似乎第一个添加的玩家总是获胜。当我更改将自行车添加到 ArrayList 的顺序（第二个添加蓝色）时，红色获胜。我相信这与我检查碰撞的方式有关。我认为这与我在drawBikes中的foreach循环特别有关......

这是 drawBikes 方法：

```
while (true)
{

    ArrayList deleteBikes = new ArrayList();
    foreach (LightBike b in bikes)
    {
        if (isValidLocation(b.getNextLocation()))
        {
            canvas.DrawLine(new Pen(b.color, BIKE_SIZE), b.location, b.getNextLocation());
            b.location = b.getNextLocation();
            grid[b.location.X, b.location.Y] = bikes.IndexOf(b)+1;
        }
        else
        {
            deleteBikes.Add(b);
        } 
```

为什么只有红色玩家被移除而不是蓝色玩家（因为他们本质上应该同时击中对方）？我应该创建更多线程吗？我觉得没必要……

这是我的 isValidLocation() 代码：

```
public Boolean isValidLocation(Point x)
{
        if (x.X < this.Size.Width && x.X > 0)
            if (x.Y < this.Size.Height && x.Y > 0)
                if (grid[x.X, x.Y] == 0)
                    return true;

    return false;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-07T06:24:51.327

我相信您的问题是您`getNextLocation()`直接调用，然后在每个循环中进行碰撞检查。如果自行车 A 是第一个在循环中被处理的，它的位置被更新，发现与自行车 B 发生碰撞，并且可能被删除（我不知道你`deleteBikes`在 else 语句之后对你的列表做了什么）。当环移动到自行车 B 上时，不再有另一辆自行车可以碰撞。

您的代码应该：

1.  循环遍历自行车并更新它们在网格上的位置。
2.  循环遍历自行车，检查每辆自行车是否发生碰撞，并执行碰撞逻辑。
3.  在新位置画出每辆自行车。

如果自行车在步骤 2 中发生碰撞，则将其从自行车列表中删除（或以某种方式标记），并且不会在步骤 3 中绘制。这里的关键是在检查之前完全完成更新自行车的位置碰撞，并且绘图被推迟到处理完所有碰撞逻辑。

# java - 争吵 XMPP

> ID：10051261
> 
> 赞同：17
> 
> 时间：2012-04-07T02:38:17.033
> 
> 标签：java, xmpp, soa, apache-camel, esb

维基百科定义`XMPP`为：

> ...一种基于 XML 的面向消息的中间件的开放标准通信协议。

xmpp.org 定义`XMPP`为：

> 可扩展消息传递和存在协议 (XMPP) 是一种用于实时通信的开放 XML 技术，它为广泛的应用程序提供支持。

尽管我确信这两个定义都非常准确，**但它们并没有告诉我**我——一个 Java 开发人员——实际上*可以*用 XMPP 做什么！

例如，我听说 XMPP 可以与面向消息的中间层 (MOM) 一起使用。怎么会这样？XMPP 能否以某种方式与我的 Apache Camel 路由、我的 ESB 或一些 SOA 实现集成以提供更好/更快/更健壮的业务层？如果是这样，**如何**？！？！

非常感谢对 XMPP 的良好的 King's-English 解释以及一些实际示例（最好以 MOM 为中心）。提前致谢！

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-04-09T23:29:37.617

XMPP 可用于广泛的基于消息传递的应用程序。基本上，它提供了可用于构建基于 XML 的消息传递应用程序的核心服务。它基于分散的客户端-服务器架构，并利用长寿命的 TCP 连接进行通信......

核心服务包括...

*   通道加密、身份验证、状态、联系人列表、一对一消息、多方消息、通知
*   服务发现、能力广告、结构化数据格式、工作流管理、点对点媒体会话

教科书用例...

*   即时消息（使用状态、联系人列表、一对一消息）
*   群聊、游戏、系统控制、地理定位、中间件/云计算、数据联合
*   bots（天气、数据库接口、系统监控）

消息传递模式/模式...

*   点对点消息用于发送到特定的接收者
*   多用户消息传递用于向一组接收者发送消息
*   当有大量事件并且系统对不同的事件子集感兴趣时，使用发布/订阅支持。发布者将事件放入主题中，订阅者指示他们感兴趣的主题。这将发布者/订阅者解耦并允许可扩展的实时消息传递。有关详细信息，请参阅这篇文章：[http ://www.isode.com/whitepapers/xmpp-pubsub.html](http://www.isode.com/whitepapers/xmpp-pubsub.html)

部署方法...

*   XMPP 用户 - 以普通用户身份连接并响应发给该用户的请求
*   XMPP 服务器插件 - 作为服务器插件架构的一部分部署
*   XMPP 组件 - XMPP 服务器外部的服务，连接并像插件一样工作

Java 集成

*   [Smack API](http://www.igniterealtime.org/projects/smack/) - 一个纯 Java 库，它可以嵌入到您的应用程序中，以创建从完整的 XMPP 客户端到简单的 XMPP 集成（例如发送通知消息和启用状态的设备）的任何内容。
*   [Camel XMPP](http://camel.apache.org/xmpp.html) - 一个 Camel 组件，允许在 Camel 路由中与 Smack API 集成

对于您的具体问题“可以在 SOA/中间件中使用吗？”....

*   是的，它可用于通过 XML 消息传递和 XMPP API 将应用程序连接在一起
*   它是否是最好的技术选择在很大程度上取决于需求
*   一个很好的用例，交互式系统监控/管理......[这里有一些其他的例子](http://wiki.xmpp.org/web/XMPP_Case_Studies)

此外，XMPP 与 Camel 的集成也很简单。有关与 Google Talk 服务器连接的基本示例，请参阅此[camel-xmpp 单元测试](https://svn.apache.org/repos/asf/camel/trunk/components/camel-xmpp/src/test/java/org/apache/camel/component/xmpp/GoogleTalkTest.java)。此外，Camel 的框架允许您构建应用程序并轻松更换不同的消息传递技术（JMS、STOMP、mina 等）。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-04-10T15:28:19.737

*XMPP 是一种开放且可扩展的实时通信标准。*

XMPP 带有一个在其[rfc](http://xmpp.org/rfcs/rfc6121.html)中定义的核心，它描述了用于进行即时消息传递和交换存在信息的基本协议。然而，XMPP 真正的亮点在于它的可扩展性：XMPP 定义了构建块（存在、消息和 iq 节）来创建通信协议。这些通常以*扩展*的形式出现。可以在[此处](http://xmpp.org/xmpp-protocols/xmpp-extensions/)找到当前可用的标准扩展列表。其中最重要的通常适用于所有流行的 XMPP 服务器。正是这种可扩展性使 XMPP 适合作为面向消息的中间件。

*让我以Publish-Subscribe*为例，这是中间件的典型模式，一旦您离开带有一些简单消息传递就足够的实体的场景，它就成为必需品。PubSub 用于实体或*生产者*生成要由其他实体*消费者消费*的信息的情况。通常，信息被写入消费者订阅的节点。订阅后，他们会在添加/更新/删除项目时收到通知。PubSub 可以优雅地涵盖大量的用例，从排队长期运行的工作并让工人处理它们，到微博。XMPP 有一个非常健壮且广泛可用的扩展，可以以标准方式处理 PubSub，在[XEP-0060](http://xmpp.org/extensions/xep-0060.html)并提供开箱即用的工作流程来处理发布、订阅、通知和安全性。查看 XEP 中的用例会让您对整个事情的简单性有所了解。

现在，虽然大多数用例都通过使用（或滥用）现有的标准扩展来涵盖，但最终您可能需要在其他地方没有涵盖的一点额外的自定义协议。使用您选择的语言，您可以编写定义您自己的协议的*XMPP 组件。*然后，您将组件连接到您正在运行的 XMPP 服务器，并通过使用简单的命名空间让服务器知道您可以处理什么样的消息，并让服务器向连接到它的客户端宣传您的协议功能。您可以做到多么简单或复杂，这没有止境。缺乏更好的例子，但可能足以说明，[here](http://pypi.python.org/pypi/jarn.xmpp.collaboration)是我编写的一个组件，它利用 XMPP 在 Plone CMS 中进行实时协作编辑（类似于 Google 文档）。虽然细节可能会变得复杂，但我认为查看该页面上的“协议规范”会给你一个想法。

最后，关于@boday 提到的 Java 特定库，周围有一些库可以轻松上手以及 Apache Camel 集成（尽管据我所知，它只做简单的消息传递）。但请记住，在了解 XMPP 的工作原理以及能够超越使用现有库的能力方面的投资确实是值得的，并且可以带来极其强大且简单的集成。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-04-10T15:45:07.710

我可以开始使用 Google 组合来自互联网上各种来源的信息（关键字：XMPP Java MoM 示例），重写（甚至复制）XMPP 的定义，但我当然不会这样做。太多了。我也没有可供您使用的示例。

下面我将列出我发现最有趣的链接，以便您开始阅读并获得有关该主题的更多知识。

1) [http://www.xmpp.org/](http://www.xmpp.org/) 这可能是最好的起点。从左到右和从上到下浏览菜单。这就是我所做的。该站点列出了服务器、客户端和库，因此您应该能够通过这种方式找到所需的示例。

2) [http://www.ibm.com/developerworks/webservices/library/x-xmppintro/index.html](http://www.ibm.com/developerworks/webservices/library/x-xmppintro/index.html) 清晰的文章，其中也提到了MoM。没有 Java 示例，只有 Ruby。

3) [http://fyi.oreilly.com/2009/05/what-c](http://fyi.oreilly.com/2009/05/what-can-you-do-with-xmpp.html) ​​an-you-do-with-xmpp.html 也许你应该买这本书？文章中没有例子。

4) [http://kirkwylie.blogspot.com/2008/07/real-mom-is-hard-lets-use-xmpp.html](http://kirkwylie.blogspot.com/2008/07/real-mom-is-hard-lets-use-xmpp.html) 有趣的文章，最后一行基本上说：如果可以使用 AMQP 或 JMS，为什么还要使用 XMPP ?

我希望这可以帮助你找到你需要的东西。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-05-04T06:39:01.027

> 让我简单介绍**一下 XMPP 是**什么？

*   XMPP（可扩展消息传递和存在协议）
*   它是一种实时通信协议。
*   第一个基于 XMPP 的 IM 服务是 Jabber.org
*   一个 XMPP 绑定是[BOSH](http://xmpp.org/extensions/xep-0206.html)。其他包括 TCP 和[WebSocket](https://www.rfc-editor.org/rfc/rfc7395)。
*   BOSH 是“同步 HTTP 上的双向流”，一种通过超文本传输​​协议 (HTTP) 进行双向通信的技术。
*   BOSH 模拟了传输控制协议 (TCP) 中熟悉的许多传输原语。对于需要“推”和“拉”通信的应用程序，BOSH 比大多数其他基于 HTTP 的双向传输协议和称为 AJAX 的技术显着提高带宽效率和响应速度。
*   BOSH 通过长轮询实现了这种效率和低延迟。

> **XMPP 是**如何工作的？

**XMPP 通过实现长轮询**来实现低延迟。

> 什么是**正常轮询**和**长轮询**？

**正常投票：**

[![在此处输入图像描述](../Images/d06ac1ad6336a2a688517bb3092d45b8.png)](https://i.stack.imgur.com/RuSe8.png)

考虑使用普通轮询的旧聊天应用程序。这里图表的顶部表示客户端。底部表示服务器端。让超时为 5 分钟。

> ```
> Client asks the server : " Is there any new message for me ?"
> Server Responds : "No ! "
> 
>                    After 5 min
> 
> Client asks the server : " Is there any new message for me ?"
> Server Responds : "No !"
> 
>                   After 1 min
> 
> Client Receives a message
> 
>                   After 4 min
> 
> Client asks the server : " Is there any new message for me ?"
> Server Responds : "Yes! " + message. 
> ```

**长轮询**

[![在此处输入图像描述](../Images/c99c6f86e15ce9d27f14695e31825d49.png)](https://i.stack.imgur.com/gBmQd.png)

图的顶部是客户端。底部是服务器。

> ```
> Client asks the server : " Is there any new message for me ?"
> Server Answers : "No ! But you may soon receive a new message, so let me just hold your client state for 5 min in the server."
> 
>                   After 5 min
> 
> Server Responds : "No !"
> Client asks the server : " Is there any new message for me ?"
> Server Answers : "No ! But you may soon receive a new message, so let me just hold your client state for 5 min in the server."
> 
>                   After 1 min
> 
> Client Receives a message
> Server Responds : "Yes! " + message. 
> ```

您可以清楚地看到，通信发生的瞬间。

[您可以在此处](http://www.arjunsk.com/html5/part-3-xmpp-basics/)阅读有关 XMPP 的更多信息

如果您想建立自己的 XMPP 服务器，请阅读[本文](http://www.arjunsk.com/html5/part-1-xmpp-chat-in-ionic-cordova-setting-server-in-local-host/)。

* * *

## 回答 #5

> 赞同：-2
> 
> 时间：2012-04-09T12:29:12.097

XMPP 基本上是聊天室客户端与聊天服务器交谈的协议。Camel 确实允许您与 XMPP 集成，以便您可以从这种机制中消费或生成消息[http://camel.apache.org/xmpp.html](http://camel.apache.org/xmpp.html)

当您开始谈论业务层、ESB、SOA 等和 MOM 时，您可能正在寻找一种支持点对点和发布订阅消息传递的消息传递机制。您可能还在考虑诸如保证消息传递、高可用性和细粒度安全性等问题。您不会从将文本消息读取和写入聊天服务器的机制中获得这些信息。像 ActiveMQ 这样的消息传递平台可能更适合。

在极少数情况下，我会考虑将 XMPP 与集成机制一起使用，可能作为开发聊天室的通知机制，或者作为用于控制服务器的管道机制，以监控聊天服务器以获取指令。

# android - Eclipse 不允许在模拟器或手机上试用应用程序

> ID：10051263
> 
> 赞同：0
> 
> 时间：2012-04-07T02:38:23.960
> 
> 标签：android, eclipse, android-emulator

我已经构建了我的应用程序的一部分并想对其进行测试。所有代码都是正确的，但是当我尝试运行它时。它是这样说的：

```
[2012-04-06 21:34:28 - iLearnSign] ------------------------------
[2012-04-06 21:34:28 - iLearnSign] Android Launch!
[2012-04-06 21:34:28 - iLearnSign] The connection to adb is down, and a severe error has occured.
[2012-04-06 21:34:28 - iLearnSign] You must restart adb and Eclipse.
[2012-04-06 21:34:28 - iLearnSign] Please ensure that adb is correctly located at 'C:\Users\Scott Lounsbury\Desktop\JSL Software\Eclipse\SDK\android-sdk_r17-windows\android-sdk-windows\platform-tools\adb.exe' and can be executed. 
```

如果有人能解释我做错了什么或哪里做错了，那就太好了？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-07T02:55:32.530

在 Eclipse 中，转到 Window -> Preferences -> Android。该屏幕上的 SDK 位置是什么？

它应该看起来像`C:\PROGRA~2\Android\android-sdk or C:\Program Files (x86)\Android\android-sdk`

# javascript - 如何确定在 HTML 表单中选中了哪些复选框？

> ID：10051265
> 
> 赞同：1
> 
> 时间：2012-04-07T02:38:51.967
> 
> 标签：javascript, html, function, checkbox

我的 HTML 表单中有 11 个复选框，并且在我的 onclick 函数中已经有一个部分来确定其中有多少被选中，但我希望能够知道哪些复选框被选中，并且可能只添加选中的复选框通过 id/value 等到 arraylist

编辑：（固定代码..？）

```
var formobj = document.forms[0];
    var ingNum = 0;
    checked = [];
    for (var j = 0; j < formobj.elements.length; j++) {
        if (formobj.elements[j].type == "checkbox" && formobj.elements[j].checked) {
                ingNum++;
                 checked.push(formobj.elements[j].value);
        }
    } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-07T02:42:43.643

如果要将检查的那些转换为其`value`属性数组（如果属性，则与`id`交换），您可以使用...`value``id`

```
var inputs = document.getElementById('your-form').getElementsByTagName('input'),
    checked = [];

for (var i = 0, length = inputs.length; i < length; i++) {
    if (inputs[i].type == 'checkbox' && inputs[i].checked) {
        checked.push(inputs[i].value);
    }
} 
```

这将适用于您可能关心的任何较旧的 IE。

如果您有幸只支持较新的浏览器，则可以使用...

```
var checked = [].slice.call(document
               .querySelectorAll('#your-form input[type="checkbox"]'))
               .filter(function(checkbox) {
                         return checkbox.checked;
               })
               .map(function(checkbox) {
                        return checkbox.value;
               }); 
```

如果你使用的是 jQuery 之类的库，那就更简单了……

```
var checked = $('#your-form :checkbox:checked')
              .map(function() {
                      return this.value;  
               })
              .get(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-07T02:41:35.877

```
var checkedBoxes = [];

$("input:checked").each(function() {
    checkedBoxes.push($(this));
}); 
```

实际上，我认为您可以这样做：

```
var checkedBoxes = $("input:checked"); 
```

但我不是 100% 确定这是否有效。

# f# - F#中的字典排序

> ID：10051266
> 
> 赞同：4
> 
> 时间：2012-04-07T02:39:04.430
> 
> 标签：f#

我正在玩一个玩具问题（凸壳识别），并且已经需要字典排序两次。其中一个案例给出了一个列表`type Point = { X: float; Y: float }`，我想按 X 坐标排序，如果相等，则按 Y 坐标排序。
我最终写了以下内容：

```
let rec lexiCompare comparers a b =
   match comparers with
   [ ] -> 0
   | head :: tail -> 
      if not (head a b = 0) then head a b else
      lexiCompare tail a b 

let xComparer p1 p2 = 
   if p1.X > p2.X then 1 else
   if p1.X < p2.X then -1 else
   0

let yComparer p1 p2 = 
   if p1.Y > p2.Y then 1 else
   if p1.Y < p2.Y then -1 else
   0

let coordCompare =
   lexiCompare [ yComparer; xComparer ] 
```

这让我可以做

```
let lowest (points: Point list) =
   List.sortWith coordCompare points 
   |> List.head 
```

到目前为止，一切都很好。但是，这感觉有点重。我必须创建返回 -1、0 或 1 的特定比较器，到目前为止，在 List.minBy 之类的情况下，我还看不到直接使用它的方法。理想情况下，我想做一些事情，提供一个可以比较的函数列表（比如 [(fun p -> pX); (fun p -> pY)]），并做一些类似列表的字典最小的事情支持该功能列表的项目。

有没有办法在 F# 中实现这一点？还是我想错了？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-09T12:19:09.217

> 有没有办法在 F# 中实现这一点？还是我想错了？

当您定义像您这样的记录类型时，F# 会自动为您执行此操作：

```
> type Point = { X: float; Y: float };;
type Point =
  {X: float;
   Y: float;} 
```

您可以立即开始比较值。例如，定义一个 3 元素的点列表并使用内置的按字典顺序对其进行排序`List.sort`：

```
> [ { X = 2.0; Y = 3.0 }
    { X = 2.0; Y = 2.0 }
    { X = 1.0; Y = 3.0 } ]
  |> List.sort;;
val it : Point list = [{X = 1.0;
                        Y = 3.0;}; {X = 2.0;
                                    Y = 2.0;}; {X = 2.0;
                                                Y = 3.0;}] 
```

请注意，结果首先按 排序`X`，然后按 排序`Y`。

您可以使用内置`compare`函数比较任何可比较类型的两个值。

如果您想使用自定义排序，那么您有两个选择。如果您想使用自定义总订单来完成所有操作，那么它属于类型定义作为`IComparable`和朋友的实现。如果您想对一些操作使用自定义排序，那么您可以使用高阶函数，例如`List.sortBy`and `List.sortWith`。例如，将按然后`List.sortBy (fun p -> p.Y, p.X)`排序，因为 F# 会为您生成 2 元组的字典比较 (!)。`Y``X`

这是 F# 的一大优势。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-07T03:12:59.210

好吧，首先，您可以依赖 F# 的内置`compare`函数：

```
let xComparer p1 p2 = compare p1.X p2.X
let yComparer p1 p2 = compare p1.Y p2.Y 
```

或者，如果需要，您可以清楚地抽象一下：

```
let compareWith f a b = compare (f a) (f b)
let xComparer = compareWith (fun p -> p.X)
let yComparer = compareWith (fun p -> p.Y) 
```

或者，正如您所注意到的，您可以将此方法直接构建到列表处理函数中：

```
let rec lexiCompareWith l a b =
    match l with
    | [] -> 0
    | f::fs ->
        match compare (f a) (f b) with
        | 0 -> lexiCompareWith fs a b
        | n -> n 
```

这里的一个重要限制是，由于您将它们放入列表中，因此这些函数都必须具有相同的返回类型。这在您的示例中不是问题`Point`（因为两个函数都有 type `Point -> float`），但它会阻止您`Person`按名称和年龄对两个对象进行排序（因为第一个投影将具有 type`Person -> string`但第二个将具有 type `Person -> int`）。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-07T14:18:18.420

我认为我没有正确理解您的问题，但是以下代码不能正常工作吗？

```
let lowest (points : Point list) = List.sort points |> List.head 
```

似乎 F# 对记录数据类型执行隐式比较。我的小实验表明比较恰好是字典顺序的。但我找不到任何证据来支持这一结果。

所以我还不确定 F# 按字典顺序比较记录。我仍然可以使用 tuple 以以下方式编写：

```
let lowest (points : Point list) =
    let tuple = List.map (fun pt -> (pt.X, pt.Y)) points |> List.sort |> List.head
    { X = fst tuple; Y = snd tuple } 
```

我希望这篇文章能有所帮助。

# c++ - C++ 窗口（winapi，不是控制台），立即关闭

> ID：10051271
> 
> 赞同：-2
> 
> 时间：2012-04-07T02:40:25.427
> 
> 标签：c++, windows

我只是看不出这段代码有什么问题.. 它似乎与 MS 教程代码相同.. 有人可以帮我快速查看一下吗？

[http://pastebin.com/hiFAR0gg](http://pastebin.com/hiFAR0gg)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-07T02:51:25.157

`((HRESULT)0L)`您正在从 InitWindow 函数返回 S_OK (#defined as )。检查返回值时，您正在检查它是否为 TRUE（非零）`if (!InitWindow(...))`：。0 将被解释为假，因此它未通过此测试。

如果我将对 InitWindow 的调用更改为：

```
if (InitWindow(hInstance, nCmdShow) != S_OK)
   return FALSE; 
```

它工作正常

# css - 在 Opera 中创建滚动条的嵌套扩展 div 标签 - 我不希望这样

> ID：10051280
> 
> 赞同：0
> 
> 时间：2012-04-07T02:42:12.977
> 
> 标签：css

我遇到了嵌套在另一个 div 标签中的扩展 div 标签的问题。在 IE 中，扩展的 div 标签会在需要时扩展到外部 div 标签之外。但是，在 Chrome 中，当内部 div 标签展开时，会导致外部 div 标签获得滚动条。我希望行为与 IE 中的行为相同 - 不出现滚动条，并且内容与页面的正文内容重叠（毕竟它只是购物车小部件）。

这是我的html页面中的代码。

```
<div id="mastheadcontainer"><!-- Begin mastheadontainer -->
<div id="masthead"><!-- Begin Masthead -->
    <div id="mastheadcontent">
        <div id="googlecart-widget" style="float:right;"></div>
    </div>
</div><!-- End Masthead --> 
```

这是我的CSS：

```
#mastheadcontainer {
width: 100%;
margin: 0 auto;
background-color: #dcb;
border-bottom:10px solid #0066CC;
/*margin-bottom:20px;*/}

#masthead {
text-align: right;
width: 960px;
margin: 0 auto;
overflow: auto;}

#mastheadcontent{
width:956px;
height:122px;
margin:0 auto;
/*background-image:url('../images/bk-masthead.jpg');*/
/*background-repeat:no-repeat;*/
background-color:#dcb;} 
```

有什么建议可以让内部 div 标签在 chrome 中查看时扩展类似于 IE 中的行为？

谢谢迈克

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-07T15:20:12.377

我回答了我自己的问题。这是我网站的当前 div 结构：

```
<div id="main>
<div id="mastheadcontainer"><!-- Begin mastheadontainer -->
<div id="masthead"><!-- Begin Masthead -->
<div id="mastheadcontent">
<div id="googlecart-widget" style="float:right;"></div>
</div>
</div><!-- End Masthead -->   
<div id="bodydiv">       
</div><!-- End bodydiv -->
</div><!-- End main --> 
```

为了让 googlecart-widget 在 Chrome 中的 bodydiv 元素的内容顶部展开，我必须在 mastheadcontainer 中的所有 div 元素和 mastheadcontainer 元素中添加溢出：可见。我的新 HTML div 结构如下所示：

```
<div id="main>
<div id="mastheadcontainer" style="overflow:visible;"><!-- Begin mastheadontainer -->
<div id="masthead" style="overflow:visible;"><!-- Begin Masthead -->
<div id="mastheadcontent" style="overflow:visible;">
<div id="googlecart-widget" style="float:right; overflow:visible;"></div>
</div>
</div><!-- End Masthead -->   
<div id="bodydiv">       
</div><!-- End bodydiv -->
</div><!-- End main --> 
```

为所有元素设置溢出属性可能有点矫枉过正，但它确实有效。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-07T05:21:51.420

我假设您正在谈论垂直滚动，并且您的#mastheadcontent id 中的内容在超过 122 像素时会出现滚动条。

我不确定您想要的最终结果到底是什么样的，但根据您要寻找的内容，我建议您这样做：

*   移除容器的高度，以便 div 扩展以适应其中的内容。请注意，由于您在容器内使用浮动，因此您必须使用多种方法清除容器，其中一种方法是使用属性“溢出：自动；” 在#mastheadcontent 上。如果您不熟悉清除浮动，我建议您查看网络上的大量指南以帮助您理解这个概念。

*   或者您希望内容扩展超出边界但不扩展容器本身，在这种情况下，您可能需要使用属性“溢出：可见；”。

在任何情况下，您都可能想使用溢出属性来解决您的问题，网络上有很多信息可以为您解决问题。

希望这可以帮助。

# linux - 根据文件类型通过不同的网关重定向网络流量

> ID：10051283
> 
> 赞同：0
> 
> 时间：2012-04-07T02:42:24.633
> 
> 标签：linux, networking, network-programming

我有一个本地网络，并且我有各种 wan 连接，我想根据文件扩展将流量重定向到选定的网关，例如：

将 html xhtml css 文件重定向到 gateway1，将 .mp4 .zip .rar 文件重定向到 gateway2 等等...

通过这种方式，我可以优化我的网络以始终保持稳定的网页浏览，并拥有专供大下载的线路。

预先感谢，任何建议将不胜感激（：，如果您知道使用文件大小而不是文件扩展名（如果可能）实现此过滤的方法，请告诉我。

PS：我试图通过路由器配置来实现这一点，但它似乎无法实现，并且能够在 Windows 上使用 isa 来实现这一点，但我想要一个 linux 解决方案。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-07T02:59:54.973

这需要多种技术的结合。首先是状态数据包检查以检查内容或有效负载，然后是过滤规则以进行重定向。另一种方法可能是使用代理服务器，例如 squid

# android - 覆盖对话框的 OnBackPressed

> ID：10051285
> 
> 赞同：0
> 
> 时间：2012-04-07T02:42:55.940
> 
> 标签：android

如何在对话框中专门覆盖后退按钮以完成整个活动而不仅仅是对话框。

使用 setOnCancelListener 和 setOnDismissListener 不起作用，因为有时我只是关闭对话框而不关闭它后面的整个活动。

编辑

谢谢Shubayu，可能有用！

我还可以通过此功能访问对话框中的后退按钮。

```
dialog.setOnKeyListener(new DialogInterface.OnKeyListener() {
    @Override
    public boolean onKey(DialogInterface dialog, int keyCode, KeyEvent event) {
        if (event.getKeyCode() == KeyEvent.KEYCODE_BACK){
        finish();
        }
    return false;
    }
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-07T02:59:21.593

覆盖

> 公共无效 onBackPressed ()

活动，并以您希望其中的行为方式进行。还要从对话框中设置一个布尔值，您在 Activity 的 onBackPressed() 中使用该布尔值。如果布尔值为真，则运行 onBackPressed() 代码的禁用部分，否则不运行。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-07T03:18:30.560

```
 @Override  
    public boolean onKeyDown(int keyCode, KeyEvent event) {    
        if ((keyCode == KeyEvent.KEYCODE_BACK){        
        // your logic goes here   
            return true;    
        }    
        return super.onKeyDown(keyCode, event);
} 
```

使用上面的代码::

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-09-11T06:15:42.513

您可以使用：`dialog.setOnCancelListener(.....)` 第一组`dialog.setCancelable(true);`

比您可以放置​​以下代码：

```
 dialog.setOnCancelListener(new DialogInterface.OnCancelListener()
{
    @Override
    public void onCancel(DialogInterface dialog)
    {
         // add code backpress 
    }
}); 
```

# android - 在 PlayN 中，我应该为我的游戏设置什么尺寸的屏幕？

> ID：10051291
> 
> 赞同：2
> 
> 时间：2012-04-07T02:44:28.267
> 
> 标签：android, playn

**TL;DR 问题版本：**

对于以 500x500 单元板为中心占据全屏的纵向智能手机游戏，以下代码行中的值应该是`screenWidth`什么`screenHeight`？

```
graphics().setSize(screenWidth, screenHeight); 
```

* * *

**问题的扩展版本：**

为简化起见，假设我的游戏是一个棋盘游戏，屏幕中央有一块方形棋盘。这些是我正在尝试使用的参数：

*   最终，我的目标是手机，但我计划将我的设备作为 HTML5 网络应用程序进行 beta 测试（因此 PlayN 的吸引力）。我希望网络应用程序尺寸与移动应用程序相同。

*   我希望方向是纵向的。

*   该板将是 500x500 单位。在我的 pygame 原型中，我只是将单位映射到屏幕像素。但是查看[Android 屏幕支持](http://developer.android.com/guide/practices/screens_support.html)文档，我意识到我需要对这种方法进行更多思考。

*   我想把游戏板放在屏幕中央。由于方向将是纵向的，我希望它或多或少地水平填充屏幕。额外的垂直空间将用于游戏信息，但它会非常小，所以我在这里有一些灵活性。

我想这是一个更一般的游戏开发/几何问题。我还没有完全理解与[密度无关的像素](http://developer.android.com/guide/practices/screens_support.html#terms)的概念，所以当我研究这个时，我想我会把它放在那里，因为这似乎是一个非常基本的问题。

到目前为止我咨询过的一些参考资料：

*   [Android 屏幕支持文档](http://developer.android.com/guide/practices/screens_support.html)
*   [PlayN 代码示例](http://playn-2011.appspot.com/slides/index.html#19)（Google 演示幻灯片）
*   [PlayN-Sample 可爱游戏源码](http://code.google.com/p/playn-samples/source/browse/cute/core/src/main/java/playn/sample/cute/core/CuteGame.java)

# mysql - CakePHP 烘焙控制台中的 MySQL 服务器已消失

> ID：10051295
> 
> 赞同：3
> 
> 时间：2012-04-07T02:44:51.777
> 
> 标签：mysql, connection

我目前正在学习蛋糕烘焙。根据我从互联网下载的书中的说明，我在这个控制台的东西中。但是我无法再前进一步，因为我在控制台中遇到了这个错误：

```
PHP Warning: mysql_connect(): MySQL server has gone away in C:\wamp\www\cake\cake\libs\model\datasources\dbo\dbo_mysql.php on line 543
Warning: mysql_connect(): MySQL server has gone away in C:\wamp\www\cake\cake\libs\model\datasources\dbo\dbo_mysql.php on line 543
PHP Warning: mysql_connect(): Error while reading greeting packet. PID=2328 in C:\wamp\www\cake\cake\libs\model\datasources\dbo\dbo_mysql.php on line 543 
```

我的 GUI 工作正常，因为我在本地主机中正确加载了 Cake PHP 的主页。它甚至说我已连接到数据库。它与工作路径和应用程序路径有关吗？这个问题快把我逼疯了。感谢您的高级回复:)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-06T10:21:41.013

听起来在 shell 运行时连接被断开。

我发生了这种情况，在 shell 脚本中的 2 个模型函数之间生成了一个非常大的 CSV。

在 CSV 生成器修复问题后添加以下内容。它确保有到数据库的连接

```
if (!mysql_ping()) {
    $this->ModelName->getDatasource()->reconnect(); 
} 
```

# javascript - 将数组传递给 Javascript 中的 Web 方法

> ID：10051296
> 
> 赞同：1
> 
> 时间：2012-04-07T02:45:09.530
> 
> 标签：javascript, arrays, json, webmethod

我目前正在尝试将我在 Javascript 中创建的数组传递给我的 aspx.cs 中的 webmethod。

这是我所拥有的：

JAVASCRIPT

```
function callServer(requestMethod, clientRequest) {

    var pageMethod = "Default.aspx/" + requestMethod;
    $.ajax({
        url: pageMethod,   // Current Page, Method  
        data: JSON.stringify({ request: clientRequest }), // parameter map as JSON  
        type: "POST", // data has to be POSTed  
        contentType: "application/json", // posting JSON content      
        dataType: "JSON",  // type of data is JSON (must be upper case!)  
        timeout: 60000,    // AJAX timeout  
        success: function (result) {
            ajaxCallback(result.d);
        },
        error: function (xhr, status) {
            alert(status + " - " + xhr.responseText);
        }
    });
}

function myButtonCalls()
{
var values=[];
values[0] = "Hello";
values[1] = "goodbye";

callServer("myMethod", values);
} 
```

ASPX.CS

```
 [WebMethod]
        public static string myMethod(string[] request)
        {
return "This is test";
    } 
```

它甚至在到达我的网络方法之前就失败了。我知道这段代码适用于常规字符串，但使用 JSON 的 ajax 代码并不想使用数组。

关于我需要改变什么的任何想法？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-07T03:33:26.847

在 aspx.cs 中，我需要接受类型列表而不是数组。感谢您的评论！

# tomcat - 有没有办法让 Tomcat 7 显示 servlet 映射？

> ID：10051297
> 
> 赞同：6
> 
> 时间：2012-04-07T02:45:10.803
> 
> 标签：tomcat, servlets

我从 Tomcat 获得了一个非常简单的网络应用程序的 404。我目前认为问题在于 servlet 映射，因为任何 Tomcat 日志中都没有错误。

有没有办法让 Tomcat 显示活动的 servlet 映射？我认为管理器控制台可能会执行此操作，但是当我单击我的应用程序的映射时，我也会得到一个 404。所以要么这不是这样做的方法，要么有其他错误没有被记录。

感谢您的任何帮助或建议，beeky

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-07T13:05:53.417

您可以通过显示它们`servletContext.getServletRegistrations()`- 您在那里拥有所有可用的元数据。您可以在 , 中执行此操作`ServletContextListener`，以便在加载上下文后立即打印所有数据。

# internet-explorer - Inline-block 元素的背景扩展到最大宽度，而不是与内容 - 在 IE7 (Internet Explorer 7)

> ID：10051299
> 
> 赞同：0
> 
> 时间：2012-04-07T02:45:34.587
> 
> 标签：internet-explorer, internet-explorer-7, css

在我解释之前，这里是示例**HTML 代码**：

**[[这里的 jsFiddle 演示。](http://jsfiddle.net/s4DGB/3/)]**

```
<div class="righty">
    <p id="breadcrumbs">
        <a href="http://example.com">Nerd Archive</a> » <a href="http://example.com/how-to/">Coding</a>
    </p>
</div>​ 
```

**和 CSS**：

```
#breadcrumbs {
  font-size: 11px;
  font-weight: bold;
  display: inline-block;
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
  max-width: 600px;
  background: #D9ECFF;
  padding: 1px 3px;
} 
```

max-width 属性似乎与 IE7 非常兼容，但是应该填充元素内容宽度的元素的背景（在本例中为面包屑）在 IE7 中扩展到全角。下面是截图对比：

**IE7 中的元素：**

![IE7中的最大宽度元素](../Images/fd6e79fbc0400ad497428c16d3fcf20a.png)

**现代浏览器中的元素，例如最新版本的 Chrome：**

![现代浏览器中的最大宽度元素](../Images/317fcfdf773e6ccf25350b6feea3c756.png)

有没有办法解决这个问题？希望我足够清楚。谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-07T03:48:20.083

唯一的问题是 IE7 无法理解`display: inline-block`非自然内联的元素，例如`p`. [您可以使用它使其工作](https://stackoverflow.com/questions/5838454/inline-block-doesnt-work-in-internet-explorer-7-6/5838575#5838575)：

```
display: inline-block;
*display: inline;
zoom: 1; 
```

[http://jsfiddle.net/thirtydot/s4DGB/4/](http://jsfiddle.net/thirtydot/s4DGB/4/)

# iphone - XCode iOS - 在编译 C 错误时需要帮助

> ID：10051300
> 
> 赞同：0
> 
> 时间：2012-04-07T02:45:42.340
> 
> 标签：iphone, c, xcode, compiler-errors

我正在尝试将此条形码源代码[Stefanhafeneger - Barcode github.com 包含](https://github.com/stefanhafeneger/Barcode)到我的项目中，因为这是迄今为止我能找到的唯一适用于 iOS 的 DataMatrix 库。我在 xcode 4.2 上编译和运行源代码没有问题，但是当我尝试在我的项目中使用该库时。我收到了很多错误，如下所示。

![http://dl.dropbox.com/u/2305062/Screen%20Shot%202012-04-07%20at%2003.13.08.png](../Images/0e916c5eeb55b0e64cf0053ab37fb2ba.png)

经过一番冲浪，我发现它们是基础错误，我认为这是由 .C 文件引起的，例如文件 - dmtx.c 它位于 libdmtx 库下。

当我删除用于调试的库时，所有错误都消失了，并且找不到“dmtx.h”文件，所以我认为 xcode 确实对这些文件进行了调整。任何想法编译这些 C 文件？

非常感谢健

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-08T23:53:03.313

我的错误，问题是由我的前缀文件引起的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-07T09:28:50.373

我的假设是您的项目中没有实例化 Foundation.framework ...

# android - 获取 myLocationOverlay 的准确性

> ID：10051303
> 
> 赞同：0
> 
> 时间：2012-04-07T02:46:26.377
> 
> 标签：android, mylocationoverlay

有没有办法从 MyLocationOverlay 获得修复的准确性？它显然知道它有多准确，因为它绘制了它有多准确的区域的圆圈。有没有得到这个值？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-07T15:42:21.970

在我的一个应用程序中来自我的位置侦听器的代码...

```
 public void onLocationChanged(Location location) {
        currentLatitudeE6 = (int) (location.getLatitude() * 1E6);
        currentLongitudeE6 = (int) (location.getLongitude() * 1E6);
        currentAccuracy = location.getAccuracy();
        hasCurrentPosition = true;
        gpsMessage = "GPS Tracking";
        updateMap();
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-07T15:47:26.513

通过 locationManager.requestLocationUpdates 方法实现 Location Listener，查看以下链接：

[http://hejp.co.uk/android/android-gps-example/](http://hejp.co.uk/android/android-gps-example/)

# mips - 我的 MIPS 代码（数组）有什么问题？

> ID：10051304
> 
> 赞同：0
> 
> 时间：2012-04-07T02:46:33.677
> 
> 标签：mips

好吧，我必须转换

```
# j = 0
# x = a[j+k]
# a[j+k] = a[j]
# repeat n-1 times
#   j = (j+k) mod n
#   m = (j+k) mod n
#   y = a[m]
#   a[m] = x
#   x = y
# end repeat 
```

到 MIPS 代码。到目前为止，我已经想出了这个，但它打印出不正确的输出。有什么帮助吗？

```
 .data
         .align 2
head1:   .asciiz "\n\nThis program reads a list of integers into an array, and then"
head2:   .asciiz "\nshifts the array to the right with wrap around."
head3:   .asciiz "\nThe list is terminated by a negative integer."
prompt1: .asciiz "\nEnter the shift amount first: "
prompt2: .asciiz "\nEnter array numbers (negative to end)"
newline: .asciiz "\n"
         .text
         .globl main
main:    
# print the prompt messages      See appendix B of P&H or chapter 4 of Britton
         li   $v0, 4           # $v0 = print_string system call code
         la   $a0, head1     # $a0 = address of first prompt
         syscall               # print first prompt
         li   $v0, 4           # $v0 = print_string system call code
         la   $a0, head2     # $a0 = address of second prompt
         syscall               # print second prompt
         li   $v0, 4           # $v0 = print_string system call code
         la   $a0, head3     # $a0 = address of third prompt
         syscall               # print third prompt
# Main program - calls read, rearrange and print functions
         li   $v0, 4           # $v0 = print_string system call code
         la   $a0, prompt1     # $a0 = address of fourth prompt
         syscall               # print fourth prompt
         li   $v0, 5           # $v0 = read_int system call code
         syscall               # read an integer - n
         move $a2, $v0         # $a2 = separation point for rearranging array
         li   $v0, 4           # $v0 = print_string system call code
         la   $a0, prompt2     # $a0 = address of fifth prompt
         syscall               # print fifth prompt
         li   $a0, 0x10000000  # $a0 = base address of array = 10000000 (hex)         
         jal  reada            # read numbers into array
         move $a1, $v0         # $a1 = number of ints read - size of array
         jal  shift            # shift the array to the right
         jal  printa           # print numbers from array to screen
# Call system exit
         li   $v0, 10          # $v0 = exit system call code
         syscall               # halt program execution

# Algorithm for reading numbers into an array
reada:   move $t0, $a0         # $t0 = base address of array
         move $t1, $zero       # $t1 = counter = 0
read:    li   $v0, 5           # $v0 = read_int system call code
         syscall               # read an integer - n
         slt  $t2, $v0, $zero  # if n < 0 then stop reading
         bne  $t2, $zero, exit # exit procedure and return to caller
         sw   $v0, 0($t0)      # a[i] = n
         addi $t1, $t1, 1      # i = i + 1
         addi $t0, $t0, 4      # $t0 = address of a[i + 1]
         j    read             # go back up and read another integer
exit:    move $v0, $t1         # return number of integers read into array
         jr   $ra              # return to calling routine

# Algorithm for printing numbers from an array
printa:  move $t0, $a0         # $t0 = base address of array
         move $t1, $zero       # $t1 = counter = 0
print:   beq  $t1, $a1, exitp  # if (array index = array size), then exit
         lw   $t2, 0($t0)      # $t2 = a[i]
         li   $v0, 4           # $v0 = print_string system call code
         la   $a0, newline     # $a0 = address of newline character
         syscall               # print new line
         li   $v0, 1           # $v0 = print_int system call code
         move $a0, $t2         # $a0 = a[i]
         syscall               # print a[i]
         addi $t1, $t1, 1      # i = i + 1
             addi $t0, $t0, 4      # $t0 = address of a[i + 1]
         j    print            # go back up and print another integer
exitp:   li   $v0, 4           # $v0 = print_string system call code
         la   $a0, newline     # $a0 = address of newline character
         syscall               # print new line
         jr   $ra

# Algorithm for rearranging array

# j = 0
# x = a[j+k]
# a[j+k] = a[j]
# repeat n-1 times
#   j = (j+k) mod n
#   m = (j+k) mod n
#   y = a[m]
#   a[m] = x
#   x = y
# end repeat

# Register usage
# $a0 = base address of array
# $a1 = n, size of array
# $a2 = k, the shift amount

shift:    li $t3, 0          #j = 0
          lw $t3, 0($a0)     #load the value of $a0 in to j
          add $t3, $t3, $a2  # j = j+k
          sw $t3, 4($a0)     # store the new value of j in to $a0

repeat:   beq $a1, $zero, end
          sub $a1, $a1, 1      #n = n-1
          add $t4, $t3, $a2    #j+k
          div $t4, $a1         #divide (j+k) by n
          mfhi $t5        

          move $t5, $t3        #j = (j+k) mod n

          add $t4, $t5, $a2    #j+k
          div $t4, $a1         #divide (j+k) by n
          mfhi $t5             #move rem into t2
          move $t5, $t3        #m = (j+k) mod n
          sw $t3, 4($a0)
          jr $ra
          lw $t3, 0($a0)
          b repeat

end: 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-07T21:04:11.153

jr $ra 之后的 lw $t3 永远不会出来。

# bash - bash 编程 STDIN 重定向

> ID：10051308
> 
> 赞同：0
> 
> 时间：2012-04-07T02:46:55.990
> 
> 标签：bash

我想获取 unix 系统用户的主目录。为什么以下不起作用：

```
# sudo su $offender -c "bash -s < <(echo echo \$HOME)"
sh: Syntax error: redirection unexpected 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-07T02:54:01.767

它适用于我在 Ubuntu 和 Fedora 中使用`sudo su $offender -c "echo \$HOME"`

您也可以像这样从 /etc/passwd 文件中挖出它：

```
grep "^$offender" /etc/passwd | cut -d':' -f6 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-07T02:52:32.063

真的不知道为什么它不起作用，但这是一种获取主目录的方法，它不涉及以该用户身份生成 shell：

```
getent passwd "${offender:?No Offending Account Given}" | awk -F':' 'NR==1{print $6}' 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-07T03:11:13.740

直接的问题是`sh`它无法识别进程替换（`<(echo $HOME)`）符号，即使它是指向`bash`.

这似乎是一种获取信息的蛮力方式。不：

```
eval echo ~$offender 
```

为你工作？

# c# - ASP.NET C# 按钮 OnClick 无响应，无值更改

> ID：10051309
> 
> 赞同：1
> 
> 时间：2012-04-07T02:47:04.583
> 
> 标签：c#, asp.net

我已经用 ASP.NET C# 构建了一个简单的网站。

在 Visual Studio 中按 [RUN] 后，它可以正常运行。

但是，在我上传到我的网络托管服务器后，单击该按钮时没有任何反应。“Label1”没有改变任何东西。好像没有回帖。

发生什么了？错过了什么？

这是 Default.aspx：

```
<%@ Page Language="C#" AutoEventWireup="true" CodeBehind="Default.aspx.cs" Inherits="MyWebApp._Default" %>

<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml">
<head runat="server">
    <title></title>
</head>
<body>
    <form id="form1" runat="server">
    <div>

        <asp:Button ID="Button1" runat="server" onclick="Button1_Click" Text="Button" />
        <br />
        <br />
        <asp:Label ID="Label1" runat="server" Text="Label"></asp:Label>

    </div>
    </form>
</body>
</html> 
```

这是 Default.aspx.cs：

```
using System;
using System.Collections.Generic;
using System.Web;
using System.Web.UI;
using System.Web.UI.WebControls;

namespace BiLab
{
    public partial class _Default : System.Web.UI.Page
    {
        protected void Page_Load(object sender, EventArgs e)
        {

        }

        protected void Button1_Click(object sender, EventArgs e)
        {
            Label1.Text = "Button 1 Pressed.";
        }
    }
} 
```

这是我的 Web.Config：

```
<?xml version="1.0"?>
<configuration>
  <appSettings/>
  <connectionStrings/>
  <system.web>
    <compilation debug="false"/>
    <pages enableViewState="true"/>
    <sessionState cookieless="UseCookies" cookieName="MyWebApp" timeout="20" />
    <authentication mode="Windows" />
    <customErrors mode="Off"/>
  </system.web>
</configuration> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-07T03:14:09.223

在后面的代码中检查您的命名空间。它是： BILab 和 Default.aspx 中的 Inherits="MyWebApp._Default" 属性不匹配。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-07T03:18:26.747

改变：

```
<%@ Page Language="C#" 
         AutoEventWireup="true" 
         CodeBehind="Default.aspx.cs" 
         Inherits="MyWebApp._Default" %> 
```

到：

```
<%@ Page Language="C#" 
         AutoEventWireup="true" 
         CodeBehind="Default.aspx.cs" 
         Inherits="BILab._Default" %> 
```

# php - 插入一个数组

> ID：10051310
> 
> 赞同：0
> 
> 时间：2012-04-07T02:47:25.750
> 
> 标签：php, cakephp

我有以下数组，我想将其插入到包含 groupi_id、application_id 和 grant_id 字段的表中

数组是

```
array(
    'ApplicationsGrant' => array(
        'group_id' => array(
            (int) 0 => '72',
            (int) 1 => '72'
        ),
        'application_id' => array(
            (int) 0 => '1',
            (int) 1 => '2'
        ),
        'grant_id' => array(
            (int) 0 => 56,
            (int) 1 => 57
        )
    )
) 
```

我想插入每个子数组与数组键一起使用的行。所以在上面的情况下会插入2行这样

插入表 ( `group_id`. `application_id`, `grant_id`) 值 (72, 1, 56); 插入表 ( `group_id`. `application_id`, `grant_id`) 值 (72, 2, 57);

我是怎么做到的？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-07T08:51:46.263

您可以使用 Cake 的 Set::classicExtract() 提取值。我假设您知道如何将它们保存到数据库中。

[http://book.cakephp.org/2.0/en/core-utility-libraries/set.html](http://book.cakephp.org/2.0/en/core-utility-libraries/set.html)

在您的情况下，类似（未经测试）：

```
$result1 = Set::classicExtract($a, '{n}.{s}.{s}.0');
$result2 = Set::classicExtract($a, '{n}.{s}.{s}.1'); 
```

如果您需要密钥，您可以先提取这些密钥：

```
$fields = Set::classicExtract($a, '{n}.{s}.{s}'); 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-04-07T02:52:19.350

我试过这个

```
 $d = array(
        'ApplicationsGrant' => array(
            'group_id' => array(
                (int) 0 => '72',
                (int) 1 => '72'
            ),
            'application_id' => array(
                (int) 0 => '1',
                (int) 1 => '2'
            ),
            'grant_id' => array(
                (int) 0 => 56,
                (int) 1 => 57
            )
        )
    );
    for ($i=0; $i<count($d['ApplicationsGrant']['group_id']); $i++) {
        echo $d['ApplicationsGrant']['group_id'][$i]."<br/>"; //outputs 72, 72
    } 
```

# javascript - indexOf() 函数返回 -1 值

> ID：10051318
> 
> 赞同：4
> 
> 时间：2012-04-07T02:49:00.037
> 
> 标签：javascript

我有一个我正在尝试开始工作的脚本。基本上，我要做的是阻止某人在字段中输入特殊字符。

我的功能如下：

```
var iChars = "!@#$%^&*()+=[];,./{}|<>?;";
if (field1.value.indexOf(iChars) !=-1)

  { 
    alert ("problem")
  } 
```

我遇到的问题是该字段正在搜索与 iChars var 的完全匹配，而不是匹配任何单个值。例如，如果我创建一个 var test ="one" 并在该字段中输入“one”，它会返回错误，但如果我在该字段中输入“o”，它不会返回任何内容，只是传递到下一个脚本的一部分 - 但如果我输入“none”或“oneeee”，它将推动错误通过。

解决这个问题有什么帮助吗？我尝试查看 indexOf 的数组，但并没有真正理解它，所以如果您要建议它，请尽可能详细地解释。

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-07T02:51:41.300

你可以用...

```
var value = field1.value;

for (var i = 0, length = value.length; i < length; i++) {
    if (iChars.indexOf(value.charAt(i)) != -1) {
       alert('Problem!');
       break;
    }
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-07T02:52:00.960

问题是您正在寻找`iChars`用户输入中整个字符串的索引。您实际上想要做的是查看`iChars`输入字符串中是否有任何字符。为此，请使用`for`循环

```
var iChars = "!@#$%^&*()+=[];,./{}|<>?;";
var i;
for (i = 0; i < iChars.length; i++) {
  if (field1.value.indexOf(iChars[i]) !== -1) {
    alert("problem");
    break;
  }
} 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-04-07T02:56:36.513

您也可以只检查正则表达式：

```
var iChars = /[!@#$%^&*()+=[\];,./{}|<>?;]/;
if (iChars.test(field1.value)) {
    alert("problem");
} 
```

这条路线应该比自己迭代字符串中的每个字符更有效，并且对于受过正则表达式训练的眼睛（或者至少在我明显有偏见的观点）来说更容易阅读。

# c# - 在 Visual Studio 2010 (C#) 中删除 using 语句并解析每个引用

> ID：10051321
> 
> 赞同：0
> 
> 时间：2012-04-07T02:49:19.343
> 
> 标签：c#, visual-studio, visual-studio-2010, using, resolve

我需要一种`using`从代码中删除所有语句并完全限定引用的代码行的方法。例子：

前：

```
using System.Windows.Forms;
namespace XYZ
{
    class Temp
    {
        public void IRFunction()
        {
            MessageBox.Show("Hello!");
        }
    }
} 
```

后：

```
namespace XYZ
{
    class Temp
    {
        public void IRFunction()
        {
            System.Windows.Forms.MessageBox.Show("Hello!");
        }
    }
} 
```

我假设该解决方案也将自动回答以下问题：如何枚举符合`using`语句且可用于解析代码中的引用的引用命名空间。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-07T03:16:16.830

我不知道你为什么要这样做，但是......

ReSharper 可以为您做到这一点。

> 选项 > 代码编辑 > C# > 命名空间导入

然后设置“使用完全限定名称”单选按钮。

一旦设置好，您就可以对现有代码进行“代码清理”，它会将您的使用更改为完全限定的名称。

# javascript - JavaScript 未移植到 Joomla

> ID：10051322
> 
> 赞同：1
> 
> 时间：2012-04-07T02:49:31.043
> 
> 标签：javascript, html, joomla, joomla1.5

我试图让 JavaScript 在 Joomla 1.5 中正常工作（不是升级）。嗯，这是一个倒计时，它在 Joomla 之外运行良好，但是一旦我将它移植到倒计时就不会开始。

我使用 Mod HTML，一个 Joomla 扩展来添加`<body>`JavaScript，然后我将`<head>`JavaScript 直接添加到`<head>`我的模板中，但没有。

该脚本要求保存`.php`倒计时工作，但我的 Joomla 正在这样做。会不会是 Joomla 阻止了 JavaScript 与我的服务器通信？

链接：

*   [独立](http://tuphotobooth.com/countdown2.php)正常工作
*   不工作的 Joomla[网站](http://tuphotobooth.com)

# java - 需要超过 64 位表示的大数

> ID：10051324
> 
> 赞同：17
> 
> 时间：2012-04-07T02:49:43.550
> 
> 标签：java, biginteger

我正在使用 java 并且必须处理大于 long 的数字（即 64 位）。我应该使用什么？Java中BigInteger的大小是多少？

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-04-07T02:51:23.230

正如您在问题中提到的，您应该使用[BigInteger](http://docs.oracle.com/javase/6/docs/api/java/math/BigInteger.html)。

它们可以根据您的需要变大 - 直到内存不足。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-07T03:19:44.813

> Java中BigInteger的大小是多少？

这有点棘手。问题是 javadocs 中没有明确的限制规范。

*   该类使用一个`int[]`来表示幅度。这意味着它可能代表高达`((2^32)^(2^31 - 1)`.

*   API 有一个方法可以将数字作为 2 的补码字节数组返回。对此的限制是`((2^8)^(2^31 - 1)`。

*   API 有另一种方法，它以位为单位返回数字的大小......作为`int`. 这意味着限制`2^(2^31 - 1)`或可能`2^(2^32)`。

实际上，这些数字都非常大，以至于您*可能*首先会遇到堆空间限制（或 CPU 性能限制）。

* * *

> 问题是我必须找出数字的平方根。

您应该能够在本科数学教科书（或维基百科）中找到计算平方根的算法。编码它应该是一项简单的任务。

（我会向您指出示例代码，除了这闻起来像“家庭作业”，而且我并不完全相信我找到的代码。）

不要忘记*大多数*整数都有一个无理平方根......

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-07T02:52:19.813

您正在寻找 BigDecimal 类，或者如果您只需要整数，而不是 BigInteger。它的任意精度，因此大小会根据您输入的数字大小而变化

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-06-27T13:08:19.907

要找到 BigInteger 的平方根，您必须在 google 搜索中省略“-StackOverflow”答案。[https://www.google.com/search?q=java+extract+root+bignum&ie=utf-8&oe=utf-8#q=java+root+BigInteger+-stackoverflow.com+-stackexchange.com](https://www.google.com/search?q=java+extract+root+bignum&ie=utf-8&oe=utf-8#q=java+root+BigInteger+-stackoverflow.com+-stackexchange.com)产生第一个链接到[http://faruk.akgul.org/blog/javas-missing-algorithm-biginteger-sqrt/](http://faruk.akgul.org/blog/javas-missing-algorithm-biginteger-sqrt/)这是一种算法。Java 应该是“一次编写，到处使用”。好吧，一些 SO 用户认为您必须重新发明轮子。要求他们提供一个模块，他们的回答是“闻起来像家庭作业，自己做”。是的，BigInteger 是半生不熟的。它不能开箱即用地做对数或求根。它非常慢。算法如下。

```
BigInteger sqrt(BigInteger n) {
  BigInteger a = BigInteger.ONE;
  BigInteger b = new BigInteger(n.shiftRight(5).add(new BigInteger("8")).toString());
  while(b.compareTo(a) >= 0) {
    BigInteger mid = new BigInteger(a.add(b).shiftRight(1).toString());
    if(mid.multiply(mid).compareTo(n) > 0) b = mid.subtract(BigInteger.ONE);
    else a = mid.add(BigInteger.ONE);
  }
  return a.subtract(BigInteger.ONE);
} 
```

* * *

## 回答 #5

> 赞同：-3
> 
> 时间：2018-03-20T03:09:01.973

导入 java.util.Scanner；导入 java.math.BigDecimal；

公共课 Ha40 {

```
public static void main(String[] args) {
    Scanner scan = new Scanner(System.in);
    int i = scan.nextInt();
    long d=scan.nextLong();
    String st=" ";
    st=scan.next();
    st+= scan.nextLine();
    // Write your code here.

    System.out.println("String: " + st);
    System.out.println("Double: " + d);
    System.out.println("Int: " + i);
} 
```

}

输入是：2147483647 235345345345.234534 fsdfsdf sdf 但ans没有达到标准

# javascript - Javascript 滚动文本

> ID：10051326
> 
> 赞同：0
> 
> 时间：2012-04-07T02:50:25.497
> 
> 标签：javascript, html

我目前正在使用一些 javascript 在我的网页上滚动一些文本。这是链接： http: [//javascript.about.com/library/bltick2.htm](http://javascript.about.com/library/bltick2.htm) -（我尝试将代码粘贴到此消息中，但遇到了一些困难）。

这行代码设置宽度：`var tWidth='300px';`

我的问题是：如何将其设置为浏览器窗口的大小...基本上是将文本设置为从页面的一侧滚动到另一侧？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-07T02:51:44.627

```
var tWidth = window.innerWidth + 'px'; 
```

或者

```
var tWidth = '100%'; 
```

感谢 JKing 的修改。

# c++ - 当一个线程将计时器添加到 boost::asio::io_service 并且另一个线程同时运行 io_service::run 时，它是线程安全的吗？

> ID：10051330
> 
> 赞同：3
> 
> 时间：2012-04-07T02:50:39.590
> 
> 标签：c++, boost, thread-safety, boost-asio

长话短说，我的代码：

```
#include <iostream>
#include <map>
#include <boost/asio.hpp>
#include <boost/bind.hpp>
#include <boost/thread.hpp>
#include <boost/date_time/posix_time/posix_time.hpp>

namespace ba = boost::asio;
namespace bp = boost::posix_time;

typedef std::map<int, ba::deadline_timer*> timer_map;

timer_map g_timers;
boost::mutex g_timers_lock;

ba::io_service g_ios;

void on_timer(int id) {
    {
            boost::mutex::scoped_lock lock(g_timers_lock);
            timer_map::iterator it = g_timers.find(id);
            assert(it != g_timers.end());
            g_timers.erase(id);
    }

    // std::cout << "delete timer " << id << std::endl;
}

int main(void) {
    boost::thread trd(boost::bind(&ba::io_service::run, &g_ios));
    trd.detach();

    int count = 0;
    for (;;) {
            for (int i = 0; i < 100; i++) {
                    ba::deadline_timer* pt = new ba::deadline_timer(g_ios, bp::seconds(1));
                    pt->async_wait(boost::bind(&on_timer, count));

                    boost::mutex::scoped_lock lock(g_timers_lock);
                    g_timers.insert(std::make_pair(count++, pt));
            }

            usleep(20000);
    }

    return 0;
} 
```

====================================

我知道，我应该锁定 g_timers，但我应该锁定 g_ios 吗？我的意思是这些行：

```
ba::deadline_timer* pt = new ba::deadline_timer(g_ios, bp::seconds(1));
pt->async_wait(boost::bind(&on_timer, count)); 
```

线程安全吗？它引用了 g_ios，它会调用 g_ios.add_job(this_timer) ..etc 吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-11T03:50:43.230

直接回答你的问题，是的，一个实例`io_service`是线程安全的。这在[文档](http://www.boost.org/doc/libs/release/doc/html/boost_asio/reference/io_service.html)中有所描述。

> ## *线程安全*
> 
> **不同的物体**：安全。
> 
> **共享对象**：安全，除了`reset()`和 `notify_fork()`函数。在有 unfinished 、 或 调用时调用 reset() 会 `run()`导致未定义`run_one()`的行为。在另一个线程中调用任何函数或与 关联的 I/O 对象上的任何函数时，不应调用该 函数。`poll()``poll_one()``notify_fork()``io_service``io_service`

不过，对我来说，您要完成的工作并不明显。如所写，您的示例什么也没做，因为`io_service`在您调用时没有任何工作要做，`io_service::run()`因此它立即返回。您忽略了[返回值](http://www.boost.org/doc/libs/release/doc/html/boost_asio/reference/io_service/run/overload1.html)，我怀疑如果您检查它，它将为零。

您对互斥锁的使用也值得怀疑。通常，如果您需要从异步处理程序中访问共享资源，则更喜欢使用[链](http://www.boost.org/doc/libs/release/doc/html/boost_asio/reference/io_service__strand.html)而不是互斥锁。[这个概念在 Asio 示例和文档](http://www.boost.org/doc/libs/release/doc/html/boost_asio/overview/core/strands.html)中得到了很好的讨论，[线程](http://www.boost.org/doc/libs/release/doc/html/boost_asio/overview/core/threads.html)的使用也是如此。

# c# - 如何在单元测试中为 httprequest usercontrol 的 Request 分配一个值？

> ID：10051348
> 
> 赞同：0
> 
> 时间：2012-04-07T02:53:06.083
> 
> 标签：c#, unit-testing, user-controls, httprequest

我有一个在 masterpage.asx.cs 中使用 Request.UrlReferrer.Host 的方法。

```
protected string DoSomething()
{
  Request.UrlReferrer.Host is used
//Request is of httprequest usercontrol
} 
```

我正在尝试为此方法编写一个单元测试用例。

并调用 target.DoSomething() 但请求的值为空。如何给它一个值以便 DoSomething() 方法不会中断？

请帮忙。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-07T03:01:44.620

我将推荐一种不同的方法，因为这些值不能在内部设置`HttpRequest`。

编写一个类，其唯一职责是处理`HttpRequest`并产生适当的输出。然后从该类中提取一个接口。`DoSomething`然后将取决于该接口。对于您的测试，您将能够提供“假”或替代实现，该实现可以提供该方法随后将在其逻辑中使用的数据。

例如，您可能有一个类似的界面

```
interface ICanHandleRequest { } 
```

因此，您可以在生产代码中包含您的 DoSomething 方法通常使用的实现。

```
class RequestHandler : ICanHandleRequest { } 
```

但是对于您的测试，您将创建一个不同的实现，以便可以测试您的 DoSomething 方法。

```
class TestHandler : ICanHandleRequest { } 
```

如果您愿意，您还可以使用模拟库（例如[Rhino Mocks](http://hibernatingrhinos.com/open-source/rhino-mocks)）来构建此类伪造品。这个想法是`DoSomething`不需要知道如何使用`HttpRequest`，它有其他职责。它只需要输出。在生产中，该数据将来自您的真实班级，并且将使用`HttpRequest`. 对于测试，您可以简单地将实现替换为可以生成适合您的测试的数据的东西。说得通？

# java - Java程序将编译但不运行

> ID：10051355
> 
> 赞同：0
> 
> 时间：2012-04-07T02:54:20.907
> 
> 标签：java

我想知道是否有人可以帮助我解决这个问题。

我已将我的界面定义为：

```
interface Model 
{
public String  toString();
public Model add (Model m);
} 
```

有 2 个实现接口的类（ClassA 和 ClassB）：

```
class ClassA implements Model
{
private int val;

public ClassA(int x) 
{
    val = x;
}

public String toString() 
{
 return ""+ "value of object of class A is " + val;
}

public Model add (Model m) 
{
 if (m instanceof ClassA)
   return new ClassA(val + ( (ClassA) m).val);
 else
   return null;
}
}

class ClassB implements Model 
{

private String str;

public  ClassB(String s)
{
 str = s;
}

public String toString()
{
 return str;
 }

 public Model add (Model m) 
 {
 if (m instanceof ClassB)                      
 return new ClassB(str + ((ClassB) m).str); 
 else
 return null;
 }
 } 
```

我的主要定义 ClassA 和 ClassB 的对象并调用它们的 tostring() 方法。

```
public class Example {
public static void main (String args[]) {
 ClassA a = new ClassA(5);
 ClassB b= new ClassB("Hi");

 Model m = b;
 System.out.println(m.toString());

 ClassA a1 = new ClassA(7);

 m = a.add(a1);

 System.out.println(m);
}
} 
```

当我尝试构建此文件时，它编译得很好，但是在尝试运行应用程序时，我收到一条错误消息：

“用法：java [-options] class [args...]（执行一个类）或java [-options] -jar jarfile [args...]（执行一个jar文件）......等等。 ..ETC”

谁能帮我这个？这可能很简单。我是初学者Java学生。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-07T03:47:20.337

您的程序没有错误。您的程序绝对没问题。但是，我不知道您正在编写哪个命令来执行。再次尝试将绝对路径设置为 JDK 和 JRE。

命令如下： -

编译`-javac Example.java` 运行`-java Example`

它将成功运行。希望它会帮助你。

# jquery - jquery：如何停止移动文档的 html 锚点？

> ID：10051357
> 
> 赞同：1
> 
> 时间：2012-04-07T02:54:23.060
> 
> 标签：jquery, html, anchor

我有大约 40 个链接，它们都在 jquery 中处理，但是当它们被点击时，它会将页面位置移动到顶部。有没有更好的方法来阻止这种情况的发生而不给每个人一个事件处理程序然后做`e.preventDefault()`？即使我可以将它包含在执行的函数中而不做`return false`，因为这似乎对我不起作用。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-07T03:23:10.320

`e.preventDefault`您可以使用 jQuery 强大的匹配功能在一个函数中将其全部应用于它们，而不是单独应用它们。

此代码将匹配属性设置为`<a>`的所有标签。`href``#`

```
$("a[href='#']").click(function(e) {
    e.preventDefault();
}); 
```

# iphone - kCVPixelFormatType_420YpCbCr8BiPlanarVideoRange 和 NV12 一样吗？

> ID：10051358
> 
> 赞同：5
> 
> 时间：2012-04-07T02:55:04.353
> 
> 标签：iphone, opengl-es, yuv

kCVPixelFormatType_420YpCbCr8BiPlanarVideoRange 的像素格式是双平面分量，一个分量用于 y 平面，另一个分量用于 CbCr 平面。所以我认为它与 NV12 像素格式相同，对吧？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2020-01-27T23:52:01.593

是的。经过测试，我可以确认 kCVPixelFormatType_420YpCbCr8BiPlanarVideoRange 是 NV12

# mysql - How to combine 1 or more values of a column with GROUP BY

> ID：10051364
> 
> 赞同：1
> 
> 时间：2012-04-07T02:57:09.783
> 
> 标签：mysql

I have done this before but I forgot where in my app I have this code.

I have the following data for ex:

```
Room Type         Extras           Price
Deluxe            Extra Person     150
Super Deluxe      Extra Person     150
Deluxe            Breakfast        250
Super Deluxe      Breakfast        250
Junior Suite      Extra Person     200 
```

Now I want to return something from this table using mysql like:

```
Room Type                     Extras           Price
Deluxe & Super Deluxe         Extra Person     150
Deluxe & Super Deluxe         Breakfast        250
Junior Suite                  Extra Person     200 
```

The idea here is to group Extras and Price field and get the Room Type.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-07T03:00:15.917

Use [`GROUP_CONCAT`](http://dev.mysql.com/doc/refman/5.6/en/group-by-functions.html#function_group-concat):

```
SELECT
    GROUP_CONCAT(`Room Type` SEPARATOR ' & ') Type AS `Room Type`,
    Extras,
    Price
FROM yourtable
GROUP BY Extras, Price 
```

# php - 查找字符串是否包含在 PHP 的分隔符中

> ID：10051365
> 
> 赞同：1
> 
> 时间：2012-04-07T02:57:42.047
> 
> 标签：php

我有一个这样的字符串：

```
$string = '[Canada] [United States]'; 
```

我需要检测这样的东西

```
if($string contains Canada) {
 // Do stuff for Canada
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-07T02:59:56.867

您可以提取 和 之间的所有文本`[`，`]`然后查看是否在结果数组中找到它。

```
preg_match_all('/\[(.*?)\]/', $string, $matches);

if (in_array('Canada', $matches[1])) {
    echo 'Hello, Canada!';
} 
```

[键盘](http://codepad.viper-7.com/fWn4KA)。

如果您只使用子字符串搜索函数，您将面临搜索的字符串是括号之间较大块的子字符串的风险。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-07T03:04:16.770

如果您正在进行简单的文本匹配，并且不希望使用正则表达式引擎的开销，那么该`strpos`函数可能就是您正在寻找的。有关更多详细信息，请参阅[strpos的 PHP 手册页面。](http://php.net/manual/en/function.strpos.php)

```
if(strpos($string,"Canada")!==FALSE){
    // Do stuff for Canada
} 
```

由于[手册](http://php.net/manual/en/function.strstr.php)指出，对于程序员只关心查找匹配项而不关心匹配项所在的位置的情况，该函数的使用`strpos()`是首选，因此速度更快且内存占用更少。`strstr()``strpos()`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-07T02:59:37.100

使用[`strstr()`](http://php.net/manual/en/function.strstr.php).

# objective-c - C 或 Objective-C 等价于 Java 的 Integer.toOctalString()？

> ID：10051366
> 
> 赞同：0
> 
> 时间：2012-04-07T02:58:00.877
> 
> 标签：objective-c, c

在 C 或 Objective-C 中是否有等效项来执行以下操作（取自 Java）

Integer.toOctalString(some_int)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-07T03:01:21.047

在 C 中，您可以使用`char * itoa ( int value, char * str, int base );`以 8 为底的值。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-07T03:04:03.073

要创建 NSString 对象，请使用：

```
NSString *myString = [NSString stringWithFormat:@"%o", some_int]; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-07T03:04:08.757

当然，总是有古老的 sxprintf：

```
sprintf (mystring, "%o", i) 
```

# c++ - 枚举类型的哪些操作在 C++ 中是合法的？

> ID：10051367
> 
> 赞同：-1
> 
> 时间：2012-04-07T02:58:02.893
> 
> 标签：c++, types, operators, enumeration

这个问题快把我逼疯了。我需要把它做对，这样我才能通过我的课程。感谢所有尝试它的人。

用 C++ 编写一个简单的程序来调查其枚举类型的安全性。在枚举类型上至少包含 10 种不同的操作，以确定哪些不正确或愚蠢的事情是合法的。

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-04-07T03:24:51.190

这是一个完全可操作的程序，显示了十种不同类型的枚举操作。详细信息将在代码中，参考将在帖子底部。

首先，了解枚举是什么非常重要。有关这方面的参考，请查看[Enumerated Types - enums](http://www.cprogramming.com/tutorial/enum.html)。在下面的代码中，我使用数学运算、按位运算符并使用枚举值将数组初始化为默认大小。

```
#include <iostream>
using namespace std;

enum EnumBits
{
    ONE = 1,
    TWO = 2,
    FOUR = 4,
    EIGHT = 8
};

enum Randoms
{
    BIG_COUNT = 20,
    INTCOUNT = 3
};

int main(void)
{
    // Basic Mathimatical operations
    cout << (ONE + TWO) << endl;    // Value will be 3.
    cout << (FOUR - TWO) << endl;   // Value will be 2.
    cout << (TWO * EIGHT) << endl;  // Value will be 16.
    cout << (EIGHT / TWO) << endl;  // Value will be 4.

    // Some bitwise operations
    cout << (ONE | TWO) << endl;    // Value will be 3.
    cout << (TWO & FOUR) << endl;   // Value will be 0.
    cout << (TWO ^ EIGHT) << endl;  // Value will be 10.
    cout << (EIGHT << 1) << endl;   // Value will be 16.
    cout << (EIGHT >> 1) << endl;   // Value will be 4.

    // Initialize an array based upon an enum value
    int intArray[INTCOUNT];

    // Have a value initialized be initialized to a static value plus
    // a value to be determined by an enum value.
    int someVal = 5 + BIG_COUNT;

    return 0;
} 
```

上面完成的代码示例可以通过另一种方式完成，即为 EnumBits 重载 operator| 等。这是一种常用的技术，有关其他参考资料，请参阅[如何在 C++ 中使用枚举作为标志？](https://stackoverflow.com/questions/1448396/how-to-use-enums-as-flags-in-c).

有关按位运算的参考，请查看[C 和 C++ 中的位运算符：教程](http://www.cprogramming.com/tutorial/bitwise_operators.html)

使用 C++ 11，您可以通过其他方式使用枚举，例如[强类型枚举](http://www.codeguru.com/cpp/cpp/article.php/c19083/C-2011-Stronglytyped-Enums.htm)。

# java - 用于在 ESB 上建模路由的最佳 JUNG 图

> ID：10051372
> 
> 赞同：0
> 
> 时间：2012-04-07T02:58:40.177
> 
> 标签：java, graph, apache-camel, jung

我是一名 Java 开发人员，正在尝试将我的 Camel 驱动后端 (SOA) 上的端点和路由建模为顶点和边图。

例如，如果我有一个以 ActiveMQ 队列开头的 Camel 路由，将其消息出列并将它们传递给 JavaBean，然后将它们传递给，例如，消息最终被消费到数据库中的 Web 服务端点，那么我们具有三个连接端点（“顶点”）的路线：

*   ActiveMQ 队列
*   JavaBean
*   网络服务

此外，两条单独的路由（“边”）连接这些顶点（队列 -> bean 和 bean -> Web 服务）。

查看 JUNG2 的`edu.uci.ics.jung.graph`包，我们看到*很多*图形类型：

*   抽象图
*   抽象类型图
*   代表森林
*   委托树
*   DirectedOrderedSparseMultigraph
*   有向稀疏图
*   有向稀疏多图
*   图形装饰器
*   可观察图
*   有序KaryTree
*   有序稀疏多图
*   设置超图
*   排序稀疏多图
*   稀疏图
*   稀疏多图
*   无向有序稀疏多图
*   无向稀疏图
*   无向稀疏多图

如果有人精通 JUNG2（和/或一般的图形结构），那么在如何将 Camel 端点/路线表示为图形的列表中是否有“明显的赢家”？

javadocs 非常模糊，在 Google/Wikipedia 上查找这些对象只会搅动很多我不完全理解的核心图论。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-17T02:09:57.740

听起来您想用图表对服务跃点进行建模，并在其上滚动您自己的执行引擎。与现有 ESB 相比，这可能具有以下优势：(a) 服务编排的设计更加自然，(b) 将为大量复杂的编排实现运行时性能效率。

对于这样的事情，有向图就足够了，至少在您有更复杂的用例之前。排序和排序不会很有用，特别是如果您的编排是动态的。

好奇你是怎么做的...

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-24T04:20:28.400

除了可能知道骆驼的人（我不知道）之外，您还没有真正描述过您的要求。但是，听起来您有定向关系，因此您将需要 DirectedGraph。听起来你也有不同类别的关系。我不清楚您是否希望在单个图表或多个图表中表示所有关系类别；我也不知道两个顶点是否可以通过多个边连接（如果是这样，您将需要一个 Multigraph）。

# java - 单击按钮获取当前系统日期时间

> ID：10051374
> 
> 赞同：0
> 
> 时间：2012-04-07T02:59:21.060
> 
> 标签：java, javascript, ajax, richfaces

在 JSF + RichFaces 中，我有一个 inputText 和一个按钮，如何单击日期时间系统将在 inputText 上显示的按钮？如果有人知道这一点，请指导我。谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-07T03:14:44.547

尝试使用 jQuery，它设置客户端日期。

```
S("#theButton").click(function{
   var currentDate = new Date();
   $("#theInput").val() = currentDate;
}) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-07T04:08:26.797

你可以使用这个技巧：

在托管 bean 中，声明此条目

```
<managed-bean>
    <managed-bean-name>now</managed-bean-name>
    <managed-bean-class>java.util.Date</managed-bean-class>
    <managed-bean-scope>request</managed-bean-scope>
</managed-bean> 
```

因此，在您的 JSF 页面中，您可以使用：

```
<h:outputText value="#{now}">
    <f:convertDateTime pattern="MM/dd/yyyy"/>
</h:outputText> 
```

这将只是您页面中的实际日期。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-07T11:10:08.637

我应用了 JQuery 代码，我的代码如下： `$("button:#Set").click(function () { var currentDate = new Date(); $("#textbox").val(currentDate); });`

这些代码在文本框类型下运行良好： `<input id="textbox" type="textbox" value="Type something"></input>`

但如果我使用 JSF 文本框，我将无法运行它： `<h:inputText id="textboxJSF" value="#{myController.student}"`

===> JQuery 如何理解 textboxJSF ？谢谢

# java - 最有效的 Java 线程技术？

> ID：10051380
> 
> 赞同：2
> 
> 时间：2012-04-07T03:00:27.877
> 
> 标签：java, jvm

似乎有许多不同的方式可以创建线程（Runnable 与 Thread 类）以及 ThreadPools。

在效率方面有什么不同吗？哪些是在 Java 中创建和池化线程的最有效（就性能而言）技术？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-07T03:27:16.060

如果您需要处理许多短而频繁的请求，最好使用 a `ThreadPool`，这样您就可以重用已经打开的线程并为它们分配`Runnable`任务。

但是，当您需要为单个任务操作启动一个线程或实例化一个运行所有应用程序时间或长时间特定时间的守护线程时，最好创建一个线程并在您不再需要它时终止它.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-07T03:46:48.493

归根结底，它们都依赖于相同`Thread`的基于底层的机制来实际完成工作。这意味着如果您问“启动单个线程的最有效方法是什么？” 答案是，创建一个`Thread`对象并调用它，因为任何其他方法在最终创建一个对象并调用它`start()`之前都会采取一些其他步骤。`Thread``start()`

这并不意味着这是产生线程的最佳方式，它只是意味着它是从 Java 代码中实现它的最底层方式。创建线程的其他方法为您提供的是不同类型的基础架构来管理底层`Thread`s，因此您选择的方法应该取决于您需要的基础架构的数量和类型。

# java - 出现此错误：Server:: Write Abort: java.io.WriteAbortedException: writing aborted; java.io.NotSerializableException：查询类

> ID：10051381
> 
> 赞同：0
> 
> 时间：2012-04-07T03:00:52.243
> 
> 标签：java

我有一个使用 MultiThread 与客户端通信的 JAVA 服务器。除了将客户端对象发送到服务器线程时，服务器的一切都正常工作。我已将问题缩小到以下代码行。

错误是由于代码中的这一行：queryClass= ((QueryClass)inStream.readObject()); //这里读取数据，QueryClass是一个序列化的类。

.我收到上面的错误。QueryClass 是另一个类，我对其进行了序列化：这是我的代码。

```
public void run(){
   try{
    ObjectOutputStream outStream=new ObjectOutputStream(clientSocket.getOutputStream());
    ObjectInputStream inStream=new ObjectInputStream(clientSocket.getInputStream());

         while(true){
       sleep(1);
       queryClass=  ((QueryClass)inStream.readObject());    //Read data here
       serverNotification.UpdateNotification("Performing .. operation for TaxOfficer");

    }           
}catch(Throwable thrown){
         System.err.println("Exception Caught : "+thrown+" deleting thread");

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-07T04:00:52.200

`QueryClass`必须实施`java.io.Serializable`。确保它的非原始非`String`成员也这样做。通常你不需要做任何工作来实现接口。一个很好的文章是[here](http://onjava.com/pub/a/onjava/excerpt/JavaRMI_10/index.html?page=3)。

# c# - 找不到类型或命名空间名称“...”（您是否缺少 using 指令或程序集引用？）

> ID：10051382
> 
> 赞同：2
> 
> 时间：2012-04-07T03:01:12.057
> 
> 标签：c#, mef

这项工作适用于我正在转移到这个应用程序中的另一个应用程序。我已经被困在这里几个小时了，谷歌没有太多的 MEF。System.ComponentModel.Composition.dll 已导入，是的。但仍然无法摆脱这个错误。

我有这个包括：

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Windows.Forms;
using System.ComponentModel.Composition;
using JSNet; 
```

受影响的代码：

```
var catalog = new AggregatingComposablePartCatalog();
var mainAssemblyCatalog = new AttributedAssemblyPartCatalog(this.GetType().Assembly);
var jsNetCatalog = new AttributedAssemblyPartCatalog(typeof(Effect).Assembly);            
//var addInEffects = new DirectoryPartCatalog("Effects"); 

catalog.Catalogs.Add(mainAssemblyCatalog);
catalog.Catalogs.Add(jsNetCatalog);
//catalog.Catalogs.Add(addInEffects);
var container = new CompositionContainer(catalog); 
```

错误：

```
Error 1: The type or namespace name 'AggregatingComposablePartCatalog' could not be found (are you missing a using directive or an assembly reference?) 

Error 2: The type or namespace name 'AttributedAssemblyPartCatalog' could not be found (are you missing a using directive or an assembly reference?)    

Error 3: The type or namespace name 'AttributedAssemblyPartCatalog' could not be found (are you missing a using directive or an assembly reference?)    

Error 4: The type or namespace name 'CompositionContainer' could not be found (are you missing a using directive or an assembly reference?) 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-07T03:08:10.990

检查您的应用的框架版本是否设置为客户端配置文件。如果是，这是你的问题。您引用的程序集可能不是针对客户端配置文件。将其更改为 .NET 4.0（不是 4.0 客户端配置文件）

# macos - QResource::registerResource 在 Mac 版本上失败

> ID：10051389
> 
> 赞同：0
> 
> 时间：2012-04-07T03:04:06.157
> 
> 标签：macos, qt

我有以下代码在我的 qt 程序（Windows 版本）中运行良好：

```
if( false == QResource::registerResource( "data.rcc" ) )
{
//.... Error message
} 
```

文件总是被找到，应用程序继续......

我开始将我的应用程序从 Windows 移植到 Mac，在等待我的 mac 计算机到达时，我使用了带有 Mac 映像的 virtualbox，它也工作得很好，但是现在我使用的是 Mac 计算机，相同的代码总是失败，似乎永远找不到rcc文件，它需要某种我仍然没有整理出来的路径，我尝试了许多不同的路径但没有。对不起，但你完全是 Mac 上的新手，仍然不了解一些基本的东西，比如这个文件路径的东西。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-07T08:54:59.353

您似乎正在为资源注册“相对路径”。您需要检查[QDir::searchPaths()](http://qt-project.org/doc/qt-4.8/qdir.html#searchPaths)以查看它在哪里寻找资源。在 Mac OS X 上，您可能需要将文件复制到应用程序包中。

# asp.net-mvc-3 - ASP.NET MVC 应用程序的 404 页面

> ID：10051391
> 
> 赞同：0
> 
> 时间：2012-04-07T03:04:14.050
> 
> 标签：asp.net-mvc-3

这一定很简单并且已经回答了，但是我已经浪费了很多时间。我不知道如何在错误输入的地址上获取错误页面。此外，我不希望重定向，而是保留 URL。我尝试了许多 CustomErrors、HttpErrors 和 Application_Error 的组合，但对于不存在的控制器没有任何作用——取决于 HttpErrors，我总是得到 IIS 404.0 页面或只是一个空的 404 响应。在 IIS 7.5、MVC 3 上运行。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-07T03:17:22.390

我使用以下路由来确保所有不匹配任何其他路由的请求都落在那里，然后您可以很容易地处理这种情况：

```
 // this route is intended to catch 404 Not Found errors instead of bubbling them all the way up to IIS.
        routes.MapRoute(
            "PageNotFound",
            "{*catchall}",
            new { controller = "Error", action = "NotFound" }
        ); 
```

映射最后一个（在任何其他语句之后包括该`.MapRoute`语句）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-08T02:43:04.433

我不记得我在哪里得到了解决方案。但这里是处理错误的代码： 首先，创建一个 ErrorController：

```
public class ErrorController : Controller
{
    //
    // GET: /Error/
    public ActionResult Index()
    {
        return RedirectToAction("Index", "Home");
    }

    public ActionResult Generic()
    {
        Exception ex = null;
        try
        {
            ex = (Exception)HttpContext.Application[Request.UserHostAddress.ToString()];
        }
        catch { }

        return View();
    }

    public ActionResult Error404()
    {            
        return View();
    }
} 
```

其次，打开全局文件并添加以下代码：

```
protected void Application_Error(object sender, EventArgs e)
{
     Exception ex = Server.GetLastError();
     Application[HttpContext.Current.Request.UserHostAddress.ToString()] = ex;
} 
```

第三，更改 webconfig 中的 customerror：

```
<customErrors mode="Off" defaultRedirect="/Error/Generic">
  <error statusCode="404" redirect="/Error/Error404"/>
</customErrors> 
```

更多：我又创建了一个错误布局。它使事情更加清楚。:)

希望这对您有所帮助。

# java - java变量和参数

> ID：10051395
> 
> 赞同：0
> 
> 时间：2012-04-07T03:05:19.823
> 
> 标签：java

```
public class Main {

    public static void main(String[] args){

        Class2 class2Object = new Class2();

        //class2Object
        //num1
        class2Object.setNumber(class2Object.number1, 1) ;

        class2Object.getNumber(class2Object.number1);
    }   

}

public class Class2 {
    public int number1;

    public void setNumber(int x, int value){
        x = value;

    }
    public void getNumber(int number){
        System.out.println("Class2, x = "+number);
    }
} 
```

我有 2 个班级：Class2 和 Main。我在 Main 类中为 1 分配了一个实例变量。为什么 class2Object.number1 没有赋值为 1？输出为 0。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-07T03:06:46.370

你的二传手不做任何事情：

```
public void setNumber(int x, int value){
    x = value;   // This just overwrites the value of x!
} 
```

一个 setter 应该只有一个参数。您需要将接收到的值分配给成员字段：

```
// The field should be private.
private int number;

public void setNumber(int value){
    this.number = value;
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-07T03:57:52.087

在 Java 中，原始类型（如 int）是按值传递的，而不是按引用传递的。

所以说：

```
Class2 class2Object = new Class2();
class2Object.setNumber(class2Object.number1, 1) ; 
```

按值传递`class2object.number1`，而不是按引用传递。所以参数 x in`setNumber`是一个全新的 int 并且不指向与 in 相同的`number1`位置`class2object`。该方法只是覆盖新 int x 的值，而不修改 指向的值`number1`。

为了设置值，它应该是：

```
void setNumber(int newNumber) { this.number1 = newNumber; } 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-07T03:08:56.593

因为你应该这样分配：

```
private int number1;

public void setNumber(int value){
    this.number1 = value;
} 
```

# ios - 键盘没有响应 resignFirstResponder

> ID：10051402
> 
> 赞同：2
> 
> 时间：2012-04-07T03:07:46.440
> 
> 标签：ios, uitextfield, resignfirstresponder

我不想显示键盘，而是在选择 textField 时显示弹出视图（我的代码在底部）。如果键盘没有显示，那么一切都很好。但是，如果键盘正在显示，然后选择了文本字段，则键盘不会被关闭，那么 firstResponders 一定会迷路，但我不知道在哪里。有人对此有解决方案吗？

我的文本字段：

```
 self.startDateTextField = [[UITextField alloc] initWithFrame:CGRectMake(79, 148, 138, 27)];
[self.startDateTextField setBorderStyle:UITextBorderStyleRoundedRect];
[self.startDateTextField setDelegate:delegate];
[self.startDateTextField addTarget:delegate action:@selector(editStartDate:) forControlEvents:UIControlEventEditingDidBegin];
[popoverWrapper addSubview:self.startDateTextField]; 
```

在`editStartDate:`我有：

```
-(void)editStartDate:(UITextField *)textField {

[textField resignFirstResponder];

DatePickerVC *datePickerVC = [[DatePickerVC alloc] init];
datePickerVC.delegate = self;

self.popoverController = [[UIPopoverController alloc] initWithContentViewController:datePickerVC];
[self.popoverController setDelegate:self];

[self.popoverController presentPopoverFromRect:CGRectMake(0, 0, 5, 5) inView:textField permittedArrowDirections:UIPopoverArrowDirectionRight animated:YES];
} 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-04-09T16:56:04.400

这很容易做到，使用您的 UITextFieldDelegate 方法，特别是 UITextFieldShouldBeginEditing 并返回 NO 并执行代码以显示弹出框。这样，键盘就不会从一开始就显示出来。

```
- (BOOL)textFieldShouldBeginEditing:(UITextField *)textField {
  [self.view endEditing:YES]; // added this in for case when keyboard was already on screen
  [self editStartDate:textField];
  return NO;
} 
```

为了使其正常工作，请确保将 textField 的委托设置为 self（视图控制器），并在您的 editStartDate 方法中删除 resignFirstResponder 调用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-07T08:00:10.080

`editStartDate:`在你的方法中尝试这样

```
[self.startDateTextField resignFirstResponder]; 
```

**编辑：** 但是，当您单击文本字段时，不要放弃键盘，您可以为 Textfield 制作诸如 setInputView 之类的东西来带出 popViewController。

```
DatePickerVC *datePickerVC = [[DatePickerVC alloc] init];
datePickerVC.delegate = self;

self.popoverController = [[UIPopoverController alloc] initWithContentViewController:datePickerVC];
[self.popoverController setDelegate:self];

[self.popoverController presentPopoverFromRect:CGRectMake(0, 0, 5, 5) inView:textField permittedArrowDirections:UIPopoverArrowDirectionRight animated:YES];

 self.startDateTextField = [[UITextField alloc] initWithFrame:CGRectMake(79, 148, 138, 27)];
[self.startDateTextField setBorderStyle:UITextBorderStyleRoundedRect];
[self.startDateTextField setDelegate:delegate];
self.startDateTextField.inputView = self.popoverController; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-09T16:59:05.127

您似乎要辞去文本字段的第一响应者的职务；但是，这不一定是第一响应者，这可以解释为什么调用它没有效果。

相反，您应该使用该`endEditing`类别递归所有视图的子视图，以从它附加到的任何视图中退出第一响应者：

```
[self.view endEditing:YES]; 
```

在任何情况下，由于您不想显示键盘，您可以简单地实现`UITextFieldDelegate`以覆盖默认行为。

```
- (BOOL)textFieldShouldBeginEditing:(UITextField *)textField
{
    // Your popover code.

    return NO;
} 
```

[UITextFieldDelegate 协议参考。](http://developer.apple.com/library/ios/#documentation/uikit/reference/UITextFieldDelegate_Protocol/UITextFieldDelegate/UITextFieldDelegate.html)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-09T16:42:20.213

因此，您试图在选择文本字段后立即隐藏键盘并显示其他内容？

我能想到的有两点：

1.  在让第一响应者辞职之前，给文本字段一些时间来整理它： `[textField performSelector:@selector(resignFirstResponder) withObject:nil afterDelay:0.5];`

2.  将`inputView`文本字段的属性设置为 nil 或`UIView`具有清晰背景颜色的 a。

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2012-04-09T16:52:51.053

如果`inputView`在文本字段上没有得到你想要的，你也可以简单地在顶部放置一个不可见的按钮，`UITextField`然后从按钮的操作中显示弹出框。对用户来说，它看起来好像文本字段弹出了弹出框。如果此时键盘仍然存在，请呼叫`resignFirstResponder`所有可能的第一响应者（文本字段等）。

# php - 如何在 PHP5 的子类中创建变量

> ID：10051406
> 
> 赞同：0
> 
> 时间：2012-04-07T03:08:18.103
> 
> 标签：php, oop, class

我需要创建一个带有父子类的变量。例子：

**家长班**

```
<?php
class parentClass
{
    function __construct()
    {

        $subClass = new subClass();
        $subClass->newVariable = true;

        call_user_func_array( array( $subClass , 'now' ) , array() );

    }
}
?> 
```

**子类**

```
<?php
class subClass extends parentClass
{
    public function now()
    {
        if( $this->newVariable )
        {
            echo "Feel Good!!!";
        }else{
            echo "Feel Bad!!";
        }
        echo false;
    }
}
?> 
```

**执行父类**

```
<?php
$parentClass = new parentClass();
?> 
```

**目前**

> 注意：未定义的属性：第 6 行 subclass.php 中的 subClass::$newVariable

**我真的需要这个：**

> 感觉不错！！！

**解决方案：**

```
<?php
class parentClass
{
    public $newVariable = false;

    function __construct()
    {

        $subClass = new subClass();
        $subClass->newVariable = true;

        call_user_func_array( array( $subClass , 'now' ) , array() );

    }
}
?>

<?php
class subClass extends parentClass
{
    public function now()
    {
        if( $this->newVariable )
        {
            echo "Feel Good!!!";
        }else{
            echo "Feel Bad!!";
        }
        echo false;
    }
}
?> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-07T03:14:03.890

您必须在子类中声明该属性：

```
<?php
class subClass extends parentClass
{
    public $newVariable;

    public function now()
    {
        if( $this->newVariable )
        {
            echo "Feel Good!!!";
        }else{
            echo "Feel Bad!!";
        }
        echo false;
    }
}
?> 
```

**编辑**

要么就是这样，要么使用[魔术方法](https://stackoverflow.com/a/829898/825789)，这不是很优雅，并且会使您的代码难以调试。

# c# - Umbraco 5 - 找不到类型或命名空间“AssemblyContainsPlugins”

> ID：10051407
> 
> 赞同：0
> 
> 时间：2012-04-07T03:08:51.590
> 
> 标签：c#, umbraco

我正在尝试为 Umbraco 5 创建插件。我在所有示例中都提到了 AssemblyInfo.cs 的以下行，以便标记要导出的程序集：

```
[assembly: AssemblyContainsPlugins] 
```

我遇到的麻烦是我收到 AssemblyContainsPlugins 和 AssemblyContainsPluginsAttribute 的“类型或命名空间”错误。我尝试搜索名称以查看我没有引用但找不到的程序集。

谁能看到我在这里错过了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-07T07:14:42.500

是的，你错过了这个 using 声明：

```
using Umbraco.Cms.Web; 
```

# c# - 选择后如何从下拉列表中清除值

> ID：10051415
> 
> 赞同：0
> 
> 时间：2012-04-07T03:11:12.673
> 
> 标签：c#, asp.net, asp.net-mvc-3, asp.net-mvc-3-areas

大家好，我想要一种方法，当用户从下拉列表中选择一个值并输入界面上的值，然后下拉列表中的值被清除并且不再能够被选择时。

这是我的模型：

```
namespace Game.Models
{
    using System;
    using System.Collections.Generic;

    public partial class tblReview
    {
        public int ReviewID { get; set; }
        public string Recomendation { get; set; }
        public string AvoidOrBuy { get; set; }
        public string Score { get; set; }
        public int GameIDFK { get; set; }
        public string UserName { get; set; }

        public virtual tblGame tblGame { get; set; }
    }
} 
```

这是我的控制器：

```
using System;
using System.Collections.Generic;
using System.Data;
using System.Data.Entity;
using System.Linq;
using System.Web;
using System.Web.Mvc;
using Game.Models;

namespace Game.Controllers
{ 
    public class ReviewController : Controller
    {
        private gamezoneDBEntities db = new gamezoneDBEntities();

        //
        // GET: /Review/

        public ViewResult Index()
        {
            var Info = db.tblReviews.Include(x => x.tblGame).Where(UserInfo => UserInfo.UserName.Equals(User.Identity.Name)).ToList();
            return View(Info); 
        }

        //
        // GET: /Review/Details/5

        public ViewResult Details(int id)
        {
            tblReview tblreview = db.tblReviews.Find(id);
            return View(tblreview);
        }

        //
        // GET: /Review/Create

        public ActionResult Create()
        {
            var userGames = db.tblGames.Where(g => g.UserName == User.Identity.Name);
            ViewBag.GameIDFK = new SelectList(userGames, "GameID", "GameName");
            return View(new tblReview { UserName = @User.Identity.Name });

        } 

        //
        // POST: /Review/Create

        [HttpPost]
        public ActionResult Create(tblReview tblreview)
        {
            if (ModelState.IsValid)
            {
                db.tblReviews.Add(tblreview);
                db.SaveChanges();
                return RedirectToAction("Index");  
            }

            var userGames = db.tblGames.Where(g => g.UserName == User.Identity.Name);
            ViewBag.GameIDFK = new SelectList(userGames, "GameID", "GameName");
            return View(new tblReview { UserName = @User.Identity.Name });
        }

        //
        // GET: /Review/Edit/5

        public ActionResult Edit(int id)
        {
            tblReview tblreview = db.tblReviews.Find(id);
            ViewBag.GameIDFK = new SelectList(db.tblGames, "GameID", "GameName", tblreview.GameIDFK);
            return View(tblreview);
        }

        //
        // POST: /Review/Edit/5

        [HttpPost]
        public ActionResult Edit(tblReview tblreview)
        {
            if (ModelState.IsValid)
            {
                db.Entry(tblreview).State = EntityState.Modified;
                db.SaveChanges();
                return RedirectToAction("Index");
            }
            ViewBag.GameIDFK = new SelectList(db.tblGames, "GameID", "GameName", tblreview.GameIDFK);
            return View(tblreview);
        }

        //
        // GET: /Review/Delete/5

        public ActionResult Delete(int id)
        {
            tblReview tblreview = db.tblReviews.Find(id);
            return View(tblreview);
        }

        //
        // POST: /Review/Delete/5

        [HttpPost, ActionName("Delete")]
        public ActionResult DeleteConfirmed(int id)
        {            
            tblReview tblreview = db.tblReviews.Find(id);
            db.tblReviews.Remove(tblreview);
            db.SaveChanges();
            return RedirectToAction("Index");
        }

        protected override void Dispose(bool disposing)
        {
            db.Dispose();
            base.Dispose(disposing);
        }
    }
} 
```

这是视图：

```
@model Game.tblReview

@{
    ViewBag.Title = "Create";
}

<h2>Create</h2>

<script src="@Url.Content("~/Scripts/jquery.validate.min.js")" type="text/javascript"></script>
<script src="@Url.Content("~/Scripts/jquery.validate.unobtrusive.min.js")" type="text/javascript"></script>

@using (Html.BeginForm()) {
    @Html.ValidationSummary(true)
    <fieldset>
        <legend>tblReview</legend>

        <div class="editor-label">
            @Html.LabelFor(model => model.ReviewID)
        </div>
        <div class="editor-field">
            @Html.EditorFor(model => model.ReviewID)
            @Html.ValidationMessageFor(model => model.ReviewID)
        </div>

        <div class="editor-label">
            @Html.LabelFor(model => model.Recomendation)
        </div>
        <div class="editor-field">
            @Html.EditorFor(model => model.Recomendation)
            @Html.ValidationMessageFor(model => model.Recomendation)
        </div>

        <div class="editor-label">
            @Html.LabelFor(model => model.AvoidOrBuy)
        </div>
        <div class="editor-field">
            @Html.EditorFor(model => model.AvoidOrBuy)
            @Html.ValidationMessageFor(model => model.AvoidOrBuy)
        </div>

        <div class="editor-label">
            @Html.LabelFor(model => model.Score)
        </div>
        <div class="editor-field">
            @Html.EditorFor(model => model.Score)
            @Html.ValidationMessageFor(model => model.Score)
        </div>

        <div class="editor-label">
            @Html.LabelFor(model => model.GameIDFK, "tblGame")
        </div>
        <div class="editor-field">
            @Html.DropDownList("GameIDFK", String.Empty)
            @Html.ValidationMessageFor(model => model.GameIDFK)

        </div>

        <div class="editor-label">
            @Html.LabelFor(model => model.UserName)
        </div>
        <div class="editor-field">
            @Html.EditorFor(model => model.UserName)
            @Html.ValidationMessageFor(model => model.UserName)
        </div>

        <p>
            <input type="submit" value="Create" />
        </p>
    </fieldset>
}

<div>
    @Html.ActionLink("Back to List", "Index")
</div> 
```

非常感谢您的帮助

如果有什么需要请询问。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-07T05:43:35.893

这可能不是最好的方法，但我会试一试我不明白你为什么要重定向到 // return RedirectToAction("Index"); 然后返回一个视图？？/ 你也可以从 tblreview 获得一个 id 而不需要表单集合

```
 <div class="editor-field">
                @Html.DropDownList("GameIDFK", String.Empty)
                @Html.ValidationMessageFor(model => ViewBag.GameIDFK)
            </div>

    [HttpPost]
    public ActionResult Create(tblReview tblreview, FormCollection formCollection)
       {
                if (ModelState.IsValid)
                {

                    db.tblReviews.Add(tblreview);
                    db.SaveChanges();
                   // return RedirectToAction("Index");  
                }
                 int gameid=Convert.ToInt32(formCollection["GameIDFK"]);
                var userGames = (from g in db.tblGames where g.UserName== User.Identity.Name && g.GameID!=gameid select g).ToList();
                ViewBag.GameIDFK = new SelectList(userGames, "GameID", "GameName");
                return View(new tblReview { UserName = @User.Identity.Name });
    } 
```

# django - 在 django bootstrap 的 field_default.html 模板中引入一个自定义类

> ID：10051417
> 
> 赞同：0
> 
> 时间：2012-04-07T03:11:32.127
> 
> 标签：django, django-forms, twitter-bootstrap

[表单字段由https://github.com/earle/django-bootstrap/blob/master/bootstrap/templates/bootstrap/field_default.html](https://github.com/earle/django-bootstrap/blob/master/bootstrap/templates/bootstrap/field_default.html)中的自定义模板通过类`render_field`中的方法呈现`BootStrapMixin`。此处显示的代码：-

```
def render_field(self, field):
    """ Render a named field to HTML. """

    try:
        field_instance = self.fields[field]
    except KeyError:
        raise NoSuchFormField("Could not resolve form field '%s'." % field)

    bf = forms.forms.BoundField(self, field_instance, field)

    output = ''

    if bf.errors:
        # If the field contains errors, render the errors to a <ul>
        # using the error_list helper function.
        # bf_errors = error_list([escape(error) for error in bf.errors])
        bf_errors = ', '.join([e for e in bf.errors])
    else:
        bf_errors = ''

    if bf.is_hidden:
        # If the field is hidden, add it at the top of the form
        self.prefix_fields.append(unicode(bf))

        # If the hidden field has errors, append them to the top_errors
        # list which will be printed out at the top of form
        if bf_errors:
            self.top_errors.extend(bf.errors)

    else:

        # Find field + widget type css classes
        css_class = type(field_instance).__name__ + " " +  type(field_instance.widget).__name__

        # Add an extra class, Required, if applicable
        if field_instance.required:
            css_class += " required"

        if field_instance.help_text:
            # The field has a help_text, construct <span> tag
            help_text = '<span class="help_text">%s</span>' % force_unicode(field_instance.help_text)
        else:
            help_text = u''

        field_hash = {
            'class' : mark_safe(css_class),
            'label' : mark_safe(bf.label or ''),
            'help_text' :mark_safe(help_text),
            'field' : field_instance,
            'bf' : mark_safe(unicode(bf)),
            'bf_raw' : bf,
            'errors' : mark_safe(bf_errors),
            'field_type' : mark_safe(field.__class__.__name__),
        }

        if self.custom_fields.has_key(field):
            template = get_template(self.custom_fields[field])
        else:
            template = select_template([
                os.path.join(self.template_base, 'field_%s.html' % type(field_instance.widget).__name__.lower()),
                os.path.join(self.template_base, 'field_default.html'), ])

        # Finally render the field
        output = template.render(Context(field_hash))

    return mark_safe(output) 
```

问题是我需要在div中引入一个`mycustomclass`css 类，如下所示：-`controls`

```
<div class="control-group{% if errors %} error{% endif %}">
    <label class="control-label">{{ label }}</label>
    <div class="controls mycustomclass">
        {{ bf }}
        {% if errors %}
        <span class="help-inline">{{ errors }}</span>
        {% endif %}
        <p class="help-block">{{ help_text }}</p>
    </div>
</div> <!-- /clearfix --> 
```

修改 django-bootstrap`render_field method`以实现此目的的最佳方法是什么？

**澄清**

正如下面@okm 所提到的，我应该`css_class`携带自定义类，然后因为`'css': css_class`，我需要将`{{ css }}`模板变量放在`default_field.html`.

例如，如果我有

```
class MyForm(BootstrapForm):
    my_special_field = forms.ModelChoiceField(required=True) 
```

并拥有

```
<div class="control-group{% if errors %} error{% endif %}">
    <label class="control-label">{{ label }}</label>
    <div class="controls {{ class }}">
        {{ bf }}
        {% if errors %}
        <span class="help-inline">{{ errors }}</span>
        {% endif %}
        <p class="help-block">{{ help_text }}</p>
    </div>
</div> <!-- /clearfix --> 
```

将导致呈现的 html 显示

```
<div class="controls required"> 
```

但是，如何在我的表单代码中指定更多参数（比如使用 **kwargs），以便它们可以在`render_field`函数中使用？

# jquery - 在页面滚动时显示/隐藏 div

> ID：10051419
> 
> 赞同：0
> 
> 时间：2012-04-07T03:12:51.150
> 
> 标签：jquery

我有一个包含很多行的表格，这使得页面滚动。表格上方还有一些其他内容。我想使用 jQuery 添加一个功能，以在页面顶部显示 div，只要表格滚动到顶部行消失在屏幕顶部边框上方的位置。

我假设我将添加一个位置设置为固定的 div，但是我怎么知道顶行何时移动到折叠上方？

```
<div id="topDiv" style="display: none; position: fixed; top: 0"></div>

<table>
<thead>
<tr>
   <th></th>
<tr>
</thead>
<tbody>
<tr>
   <td></td>
<tr>
...
</tbody>
</table> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-07T03:18:49.787

这就是你要找的。粘性分区：

[http://blog.yjl.im/2010/01/stick-div-at-top-after-scrolling.html](http://blog.yjl.im/2010/01/stick-div-at-top-after-scrolling.html)

实现示例： [http ://www.nkhome.com/kestrel/compare-kestrels.php](http://www.nkhome.com/kestrel/compare-kestrels.php)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-07T03:24:52.553

你可以使用这样的东西

```
$(window).scroll(function(e){ 
  $el = $('#topDiv'); 
  if ($(this).scrollTop() > 200 && $el.css('position') != 'fixed'){ 
    $el.css({'position': 'fixed', 'top': '0px'}); 
  } 
}); 
```

检查窗口是否滚动到 200px 以上并修复`topDiv`

# android - 如果应用未获得许可，则禁用小部件显示？

> ID：10051421
> 
> 赞同：0
> 
> 时间：2012-04-07T03:13:39.090
> 
> 标签：android

我只花了大约一个小时在我的应用程序中实现了 android 市场许可工具。

有问题的应用程序是一个小部件，我想知道如果该应用程序未获得许可，我将如何停止小部件（按钮）的运行。

有谁知道这可以如何完成？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-07T03:40:52.803

我假设您在首次启动应用程序时检查有效的许可证（比如在 onStart() 中）？如果是这样，那么根据来自许可服务器的响应，只需设置一个布尔值来指示它是否已获得许可，并将其用作按钮的 onclick 方法中的检查。如果它没有被许可，那么通知用户并且什么都不做。

附带说明一下，根据您的应用程序的预期用途和预期的用户交互频率，您不应在每次应用程序启动时检查有效许可证。您可能只需要检查一次，然后将结果存储在您在后续启动时使用的共享首选项中。

# .net - 使用 MVC3 将部分视图创建为选项卡

> ID：10051425
> 
> 赞同：1
> 
> 时间：2012-04-07T03:14:22.597
> 
> 标签：.net, asp.net-mvc-3, tabs

我在一个应用程序中有 2-3 个不同的视图，并且有主视图。我的主视图我想将这 2-3 个视图显示为选项卡。因此，如果用户单击选项卡，则应隐藏先前的视图并打开新视图。我在打开新选项卡时进行 Ajax 调用，但未打开其他视图。我该如何实施？

```
$('#tabRating').click(function () {
        $.ajax({
            "dataType": 'json',
            "type": "get",

            "url": '@Url.Action("TabsSelect", "Employee")'

        });

    });

public ActionResult TabsSelect()
    {
        return PartialView("Rating");
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-07T09:30:17.710

您正在使用的 jQuery 代码会进行 ajax 调用，但不会对返回的部分视图执行任何操作。如果要将其插入到页面中，则需要提供一个回调函数来执行此操作，例如：

```
$.ajax({
    type: "get",
    url: '@Url.Action("TabsSelect", "Employee")',
    success: function (data) {
        $("#thingToPutTabContentIn").html(data);
    }
}); 
```

`"dataType": 'json'`（请注意，假设您的“评级”部分只是普通的部分视图，您不想要您拥有的位）。为了更简单地做同样的事情，你可以使用 jQuery 的`load()`方法：

```
$("#thingToPutTabContentIn").load('@Url.Action("TabsSelect", "Employee")'); 
```

话虽如此，如果您还没有这样做，您可能应该查看[jQuery UI 的 Tabs](http://jqueryui.com/demos/tabs/)，它旨在完成您需要的那种事情 - 只需查看 ajax 示例以了解您将如何使用它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-07T18:39:50.387

正如上面 Duncan 所建议的，使用它的最佳框架是[JQuery UI Tabs](http://jqueryui.com/demos/tabs/)，这很有趣，我一直在使用。

以下是一些代码示例。

该视图有一个 Jquery 脚本，它利用 jquery.tabs() 功能：

```
<script type="text/javascript">
    $(document).ready(function() {
        $("#tabs").tabs();
        getContentTab (1);
    });

    function getContentTab(index) {
        var url='@Url.Content("~/SiteAdmin/AjaxGetTab")/' + index;
        var targetDiv = "#tabs-" + index;
        var ajaxLoading = "<img id='ajax-loader' src='@Url.Content("~/Content")/ajax-loader.gif' align='left' height='28' width='28'>";

        $(targetDiv).html("<p>" + ajaxLoading + " Loading...</p>"); 
        $.ajax({
          type: 'get',
          url: url,
          cache: false,
          success: function(result) {
            $(targetDiv).html(result);
          }
        });           

    } 
```

这是我的控制器操作方法，它传递了所需的部分视图。

```
 /// <summary>
    /// AJAX action method to obtain the correct Tab to use.
    /// </summary>
    /// <param name="index">Tab number</param>
    /// <returns>Partial View</returns>
    public ActionResult AjaxGetTab(int id)
    {
        string partialViewName = string.Empty;
        object model = null;

        //--Decide which view and model to pass back.
        switch (id)
        {
            case 1:
                partialViewName = "_TransactionType";
                model = db.TransactionTypes.ToList();
                break;
            case 2:
                partialViewName = "_DirectionType";
                model = db.DirectionTypes.ToList();
                break;
            case 3:
                partialViewName = "_UserType";
                model = db.UserTypes.ToList();
                break;
            case 4:
                partialViewName = "_CurrencyType";
                model = db.CurrencyTypes.ToList();
                break;
            case 5:
                partialViewName = "_tabError";
                break;

        }

        return PartialView(partialViewName,model);
    }
} 
```

这使我可以运行多个选项卡并分别保存每个选项卡所需的数据。

用于选项卡的 JQuery UI 使得干净地实现选项卡变得非常容易。

# c++ - N维网格顶点计算

> ID：10051426
> 
> 赞同：0
> 
> 时间：2012-04-07T03:14:37.877
> 
> 标签：c++, algorithm, math

**问题：给定一个单元格索引（红色）计算围绕单元格索引的数组索引（黑色）。**

```
bool CalculateCellVerticesFromIndex(size_t index, size_t* vertices)
{
    size_t gridSize[2] = {6, 5};
    return true;  // if the index was valid
    return false; // if the index was invalid
} 
```

计算在已知大小 (m X n X ... ) 的 N 维网格中围绕单元格的顶点。

示例图：

![6 x 5 网格错字已修复](../Images/04fe5b4dbbf0951a8dcf3f89006712b2.png)

说`int vertices[4] = {0, 0, 0, 0}`

上图中，CalculateCellVerticesFromIndex(12, vertices); 应该用 {14, 15, 20, 21} 填充顶点；

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-07T16:37:05.140

```
Width = 6
Row = Index div (Width - 1)
if Row > 5 - 2 then OutOfGrid
Column = Index mod (Width - 1)
LeftBottom = Row * Width + Column
LeftTop = LeftBottom + Width
RightBottom and RightTop - elaborate 
```

# sql-server-2005 - SQL Server 2005 报告服务问题

> ID：10051427
> 
> 赞同：0
> 
> 时间：2012-04-07T03:14:39.853
> 
> 标签：sql-server-2005, windows-7, reporting-services

我正在尝试在 Windows 7 Professional 32 位 PC 上配置 Reporting Services，但我收到了第一个错误：

![在此处输入图像描述](../Images/e30d99afaf8ade4567285ceb50a00b0b.png)

所以，搜索谷歌我发现您首先需要通过位于 SQL 2005 的配置工具中的“**报告服务配置”来配置您的报告服务实例。**

好的，我这样做了，我选择了该工具和我的服务器名称“PC-NET00”（在这种情况下）和我的实例名称，例如“MSSQLSERVER”，然后单击“确定”或“连接”（我不记得完全正确），然后出现此错误：

![在此处输入图像描述](../Images/d7e23869e63f4728271811c50ab92a4a.png)

我被困在这一点上，我在谷歌中找不到任何好的结果来解决这个问题。难道我做错了什么？请分享您的经验或任何解决方案。

提前致谢。

# c++ - 类似函数 peek( ); （来自 C++）在 Ruby 中

> ID：10051430
> 
> 赞同：2
> 
> 时间：2012-04-07T03:15:15.513
> 
> 标签：c++, ruby, peek

有没有类似的 peek(); （来自C ++）红宝石中的函数？有什么替代方法吗？

我找到了一种方法来做到这一点。

使用字符串扫描器：

```
require 'strscan'
scanner = StringScanner.new(YourStringHere)
puts scanner.peek(1) 
```

您也可以使用 StringScanner 扫描文件：

```
file = File.open('hello.txt', 'rb')
scanner = StringScanner.new(file.read) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-07T03:43:18.167

也许你可以使用`ungetc`. 试试看[这里](http://www.ruby-doc.org/core-1.9.3/IO.html#method-i-ungetc)。

它不相等，但您可以获得相同的结果。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-07T16:19:47.523

[Enumerator#peek](http://www.ruby-doc.org/core-1.9.3/Enumerator.html#method-i-peek)让您查看 Enumerator 的下一个值。[IO#bytes](http://www.ruby-doc.org/core-1.9.3/IO.html#method-i-each_byte) [IO#chars](http://www.ruby-doc.org/core-1.9.3/IO.html#method-i-each_char)将分别在字节流或字符流上为您提供枚举器。由于您使用“rb”打开，因此我假设您需要字节。

```
file = File.open('hello.txt', 'rb') # assume contains text "hello\n"
fstream = file.bytes

fstream.next # => "h"
fstream.peek # => "e"
fstream.next # => "e"
... 
```

当然，现在您在流上一次处理字节有点卡住了。

# ios - 以动画方式调整 UIControl 的大小

> ID：10051438
> 
> 赞同：0
> 
> 时间：2012-04-07T03:17:41.417
> 
> 标签：ios

我创建了一个我想扩展/收缩的按钮。我找到了一种获取 x,y 坐标以及宽度和高度的方法。使用这些我调用 CGRectMake 函数来重绘按钮。我试图弄清楚如何以动画方式重绘。以下是我的尝试，但我几乎可以肯定有更好的方法来做到这一点。任何意见？

```
 pointX = navigateBtn.frame.origin.x;
   pointY = navigateBtn.frame.origin.y;
   height = CGRectGetHeight(navigateBtn.frame);
   width = CGRectGetWidth(navigateBtn.frame);
   for (int i=1;i<=800000;i++) {
      int k=i/100000;
      navigateBtn.frame=CGRectMake(pointX, pointY, width, height*k);
   } 
```

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-07T04:25:42.750

您只需要知道目的地是什么`rect`，然后您就可以像这样制作动画

```
[UIView animateWithDuration:0.25f
                 animations:^{
                     navigateBtn.frame = endFrame;
                 }]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-07T03:25:27.450

不，不要尝试自己制作动画。

使用 UIView 动画。Ray Wenderlich 提供了一个很好的教程：[http ://www.raywenderlich.com/2454/how-to-use-uiview-animation-tutorial](http://www.raywenderlich.com/2454/how-to-use-uiview-animation-tutorial)

但老实说，您可能应该从一本介绍性的 iOS 编程书籍开始。你提出问题的方式让我觉得你还有很多基础知识要学。

# html - 有没有办法使用 html 和 css 创建一个不停旋转的正方形？

> ID：10051439
> 
> 赞同：1
> 
> 时间：2012-04-07T03:18:02.547
> 
> 标签：html, css

我想使用 html 和 css 创建一个不停旋转的正方形。我目前有：

```
@-webkit-keyframes spinnow {
    100% {
        transform: rotate(360deg);
        -webkit-transform: rotate(360deg);
    }
}
@-moz-keyframes spinnow {
    100% {
        transform: rotate(360deg);
        -moz-transform: rotate(360deg);
    }
}
@-ms-keyframes spinnow {
    100% {
        transform: rotate(360deg);
        -ms-transform: rotate(360deg);
    }
} 
```

我目前所得到的将使方形旋转，但它总是会在旋转一整圈后停止，然后很快就会开始。如何让它不断旋转而不停止？

注意我正在使用@-webkit-keyframes、@-moz-keyframes 和@-ms-keyframes。

非常感谢，

卢卡斯

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-07T07:33:23.957

It has nothing to do with the *definition* of the animation, but with its *usage*:

```
.foo {
    animation: 5s spinnow infinite linear;
} 
```

The `infinite` keyword is what you need. You can also put an integer there, to have a finite number of rotation cycles.

**Edit by OP:** For future visitors, the `linear` keyword is to make the animation not speed up and then slow down using the swing animation, but rather use a linear, smooth approach, so that the speed is distributed and does not make the square appear to stop. This keyword was the important one for me - I had the `infinite` keyword already.

[http://jsfiddle.net/GXPS8/](http://jsfiddle.net/GXPS8/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-07T03:31:15.837

我的猜测是现有代码先旋转 360 度，然后旋转 0 度，然后再旋转回 360 度。

您感知到的停止可能是由于动画渲染了两次相同的旋转（360 度 = 0 度）。

**编辑**：不是 OP 试图做的纯 HTML+CSS，但它可以解决流动性问题。

通过与此类似的公式计算要执行的旋转量应该可以解决问题：

```
var rotation=0;
...
function _RotateStep(){
    rotation=(rotation+1)%360;
    //apply rotation to element (via method of choice)
    setTimeout("_RotateStep()",250); //or time between rotation steps of your choice
} 
```

在纯 CSS 中，您可以将其设置为连续旋转 359 度，从而消除渲染的重复旋转。

# javascript - 将数组的最后一个元素设置为单独的字符串，然后删除该元素

> ID：10051440
> 
> 赞同：0
> 
> 时间：2012-04-07T03:18:22.277
> 
> 标签：javascript, html, arraylist

我有一个可能包含 1 到 11 个元素的数组。我想删除最后一个元素并使其成为一个新字符串，然后将数组列表的其余部分设置为一个集体字符串。以下代码不起作用...我是否需要包含 if else 以防数组列表只有一个元素？（我知道我知道，我想知道这是否会导致脚本根本不被执行）

```
var finaling = checked[checked.length].toString();
    checked.splice(checked[checked.length]);
    checked.toString(); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-07T03:21:42.427

这是我将如何做到的......

> 我想删除最后一个元素...

```
checked.pop(); 
```

> ...并使其成为一个新字符串...

```
checked.push('new string');
// or skip the above `pop()`
checked[checked.length - 1] = 'new string'; 
```

> ...然后将数组列表的其余部分设置为集体字符串。

```
checked = checked + ''; 
```

数组的默认值`toString()`将使用`','`. 如果要使用不同的连接字符，请使用`join()`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-07T03:20:32.863

我不确定您要做什么，但应该这样做：

```
var lastElementInArray = checked.splice(checked.length-1)[0].toString();
var stringOfChecked = checked.toString(); 
```

或者，如果要删除数组的最后一个元素并返回表示新数组的字符串：

```
checked.splice(checked.length-1, 1);
var finaling = checked.toString(); 
```

需要注意的是：`array.splice()`返回一个元素数组；如果你只有一个元素并且你想要那个实际的元素，你会想要使用`array.splice(...)[0]`.

# objective-c - Cocos2d 移动节点断断续续

> ID：10051445
> 
> 赞同：1
> 
> 时间：2012-04-07T03:19:07.703
> 
> 标签：objective-c, ios, cocos2d-iphone

在我即将推出的 iPhone 游戏中，不同的场景元素被拆分为各自的 CCNode。

My Obstacle 节点包含许多节点，每个节点代表一个障碍。每个障碍物节点内部都是构成障碍物的图像（1 - 4 个图像），一次只有约 10 个障碍物。我的游戏每次更新都会调用 Obstacle 节点中的更新函数，它将所有障碍物移到左侧。但这大大减慢了我的游戏速度。

同时，我有一个粒子节点，它只包含图像，并且每帧都移动它们，就像障碍节点一样，但它对性能没有明显影响。但它一次有数百张图像。

我的问题是为什么障碍物减慢了它的速度，而粒子却没有？我什至尝试用粒子中的图像替换障碍物中使用的图像，并且没有（明显的）差异。会不会有另一层子节点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-07T08:16:16.617

如果您将所有图像放入纹理图集中并使用该类作为批处理一次渲染它们，您将*显着提高应用程序的性能、运行速度、帧速率等。*`CCSpriteBatchNode`如果您在屏幕上频繁移动大量对象，这会使硬件的工作量大大减少。

使用这个类很容易。使用包含所有图像的纹理图集创建该类，然后将该类作为子级添加到您的图层，就像添加精灵一样。

但是，当您创建精灵时，请将它们作为子节点添加到此批处理节点，而不是作为子节点添加到图层。

这很容易，在这里可能会对您有很大帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-07T03:32:34.567

根据我对 Cocos2d 文档的回忆，粒子旨在非常轻量级，因此您可以同时在屏幕上显示很多很多。节点更重，需要在帧之间进行更多处理，因为它们与物理系统交互并且需要特定于节点的渲染。上次我查看渲染循环代码时，基本上是 O(n)，基于场景中的 CCnode 数量。使用 NSTimers 与 Cocos 的内置运行循环也会在性能上产生相当大的差异。

你能举一个速度慢很多的例子吗？究竟如何更新这些障碍？

cocos2d 文档有一些[最佳实践](http://www.cocos2d-iphone.org/wiki/doku.php/prog_guide%3abest_practices)，它们都以某种方式触及性能。您可以做很多事情来优化每秒帧数。

一般来说，当你的代码很慢时，使用 Instruments.app 来找出你的代码在哪里花费了这么多时间会有所帮助。由于您使用的是框架，这将不太有用，因为您最终会找出代码花费大量时间的功能，然后找出如何通过框架的最佳实践或其他优化来减少它。有一些关于提高性能的好博客文章，我发现[这篇](http://allseeing-i.com/Performance-tips-for-Cocos2d-for-iPhone)文章很有帮助。

# java - 如何为 App Engine/Java 上的单个请求暂停 appstats？

> ID：10051446
> 
> 赞同：7
> 
> 时间：2012-04-07T03:19:08.353
> 
> 标签：java, google-app-engine, appstats

我通常在我的沙盒 appid 上全职运行 appstats。但是，我有一个复杂的操作（基本上是重建股票数据库）导致 appstats 炸毁我的实例，抛出 OutOfMemoryErrors。即使使用更大的实例大小，它仍然会失败。Appstats 只是想要太多的内存。

我不需要此请求的 appstats。理想情况下，我会在负责 appstats 收集的任何 ThreadLocal 对象上调用一个方法，并告诉它旋转它的拇指几分钟。

我考虑过扩展 AppstatsFilter 以忽略某些 URL，但有问题的请求作为延迟任务执行，并且通过路径识别它有点复杂。

如何告诉 appstats 暂停？

以防万一不清楚：上传禁用了 appstats 的应用程序版本，运行我的任务，然后上传启用了 appstats 的版本就是我现在正在做的事情。我不想这样做。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-02-18T13:07:47.397

我所做的是编写自己的 CustomAppstatsFilter 并排除某些 url。

```
public class CustomAppstatsFilter extends AppstatsFilter {

  @Override
  public void doFilter(ServletRequest request, ServletResponse response,
        FilterChain chain) throws IOException, ServletException {

    if (request instanceof HttpServletRequest) {
        String url = ((HttpServletRequest) request).getRequestURL().toString();

        // We do not want these to show up in appstats
        if ((url.contains("appstats"))
                || url.contains("_ah/")
                || url.contains("cron/")
                || url.contains("batch/")) {
            chain.doFilter(request, response);
            return;
        } else {
            super.doFilter(request, response, chain);
        }
    }
  }
} 
```

**编辑 - 这可以与 ZiglioNZ 很好的答案结合使用。**

```
<!-- Appstats filter for profiling application -->
<filter>
    <filter-name>appstats</filter-name>
    <filter-class>my.company.filter.CustomAppstatsFilter</filter-class>
    <init-param>
        <param-name>maxLinesOfStackTrace</param-name>
        <param-value>5</param-value>
    </init-param>
</filter>
<filter-mapping>
    <!-- excludes are in CustomAppstatsFilter -->
    <filter-name>appstats</filter-name>
    <url-pattern>/*</url-pattern>
</filter-mapping> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-07T04:19:17.700

好问题。对于 Python，答案很简单：

```
from google.appengine.ext.appstats import recording

class ...(webapp.RequestHandler):
  def get(self):
    recording.dont_record()
    ... 
```

也许Java中有类似的API？

或者，Python 版本也有一种灵活的方式来过滤出要记录的请求；我认为在 Java 版本中，您可以通过使用 web.xml 中的和条目来完成类似的事情。（请参阅 Java appstats 文档。）

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-15T22:49:05.167

Jeff，我想知道这是否可以帮助您减少 OutOfMemoryErrors 的发生： [How to reduce the memory usage of Appstats on Google App Engine Java](https://stackoverflow.com/questions/10592598/how-to-reduce-the-memory-usage-of-appstats-on-google-app-engine-java/10609781#10609781)

```
<filter>
  <filter-name>appstats</filter-name>
    <filter-class>com.google.appengine.tools.appstats.AppstatsFilter</filter-class>
    <init-param>
      <param-name>maxLinesOfStackTrace</param-name>
      <param-value>16</param-value>
    </init-param>
</filter> 
```

# mysql - 错误：无法构建 gem 本机扩展（rails 3.2.3 上的 mysql2）

> ID：10051448
> 
> 赞同：49
> 
> 时间：2012-04-07T03:19:10.960
> 
> 标签：mysql, ruby-on-rails, mysql2

我正在尝试使用 Rails 3.2.3 安装 mysql2 gem，但它失败了：

```
★  bundle install
Fetching gem metadata from https://rubygems.org/.........
Using rake (0.9.2.2) 
Using i18n (0.6.0) 
Using multi_json (1.2.0) 
Using activesupport (3.2.3) 
Using builder (3.0.0) 
Using activemodel (3.2.3) 
Using erubis (2.7.0) 
Using journey (1.0.3) 
Using rack (1.4.1) 
Using rack-cache (1.2) 
Using rack-test (0.6.1) 
Using hike (1.2.1) 
Using tilt (1.3.3) 
Using sprockets (2.1.2) 
Using actionpack (3.2.3) 
Using mime-types (1.18) 
Using polyglot (0.3.3) 
Using treetop (1.4.10) 
Using mail (2.4.4) 
Using actionmailer (3.2.3) 
Using arel (3.0.2) 
Using tzinfo (0.3.32) 
Using activerecord (3.2.3) 
Using activeresource (3.2.3) 
Using bundler (1.1.3) 
Using coffee-script-source (1.2.0) 
Using execjs (1.3.0) 
Using coffee-script (2.2.0) 
Using rack-ssl (1.3.2) 
Using json (1.6.6) 
Using rdoc (3.12) 
Using thor (0.14.6) 
Using railties (3.2.3) 
Using coffee-rails (3.2.2) 
Using jquery-rails (2.0.2) 
Installing mysql2 (0.3.11) with native extensions 
Gem::Installer::ExtensionBuildError: ERROR: Failed to build gem native extension.

        /Users/rarneson/.rvm/rubies/ruby-1.9.3-p125/bin/ruby extconf.rb 
checking for rb_thread_blocking_region()... yes
checking for rb_wait_for_single_fd()... yes
checking for mysql_query() in -lmysqlclient... no
checking for main() in -lm... yes
checking for mysql_query() in -lmysqlclient... no
checking for main() in -lz... yes
checking for mysql_query() in -lmysqlclient... no
checking for main() in -lsocket... no
checking for mysql_query() in -lmysqlclient... no
checking for main() in -lnsl... no
checking for mysql_query() in -lmysqlclient... no
checking for main() in -lmygcc... no
checking for mysql_query() in -lmysqlclient... no
*** extconf.rb failed ***
Could not create Makefile due to some reason, probably lack of
necessary libraries and/or headers.  Check the mkmf.log file for more
details.  You may need configuration options.

Provided configuration options:
    --with-opt-dir
    --with-opt-include
    --without-opt-include=${opt-dir}/include
    --with-opt-lib
    --without-opt-lib=${opt-dir}/lib
    --with-make-prog
    --without-make-prog
    --srcdir=.
    --curdir
    --ruby=/Users/rarneson/.rvm/rubies/ruby-1.9.3-p125/bin/ruby
    --with-mysql-config
    --without-mysql-config
    --with-mysql-dir
    --without-mysql-dir
    --with-mysql-include
    --without-mysql-include=${mysql-dir}/include
    --with-mysql-lib
    --without-mysql-lib=${mysql-dir}/lib
    --with-mysqlclientlib
    --without-mysqlclientlib
    --with-mlib
    --without-mlib
    --with-mysqlclientlib
    --without-mysqlclientlib
    --with-zlib
    --without-zlib
    --with-mysqlclientlib
    --without-mysqlclientlib
    --with-socketlib
    --without-socketlib
    --with-mysqlclientlib
    --without-mysqlclientlib
    --with-nsllib
    --without-nsllib
    --with-mysqlclientlib
    --without-mysqlclientlib
    --with-mygcclib
    --without-mygcclib
    --with-mysqlclientlib
    --without-mysqlclientlib

Gem files will remain installed in /Users/rarneson/.rvm/gems/ruby-1.9.3-p125/gems/mysql2-0.3.11 for inspection.
Results logged to /Users/rarneson/.rvm/gems/ruby-1.9.3-p125/gems/mysql2-0.3.11/ext/mysql2/gem_make.out
An error occured while installing mysql2 (0.3.11), and Bundler cannot continue.
Make sure that `gem install mysql2 -v '0.3.11'` succeeds before bundling. 
```

我正在运行捆绑安装，这在我的 Gemfile 中：

```
gem 'mysql2', '~> 0.3.11' 
```

我目前通过 MAMP 运行 MySQL。我不确定这是否是一个坏主意，我应该运行一个香草 MySQl，但似乎我目前的问题只是安装了 gem。我在 stackoverflow 上看到了很多这样的问题，但似乎都有点不同或有非常复杂的解决方案。有什么我想念的吗？简单的东西？有什么愚蠢的吗？如有必要，我可以从输出文件中提供其他信息。我读到有些人使用 SQLite 进行开发和测试，然后在产品中测试 MySQL，但这听起来是一个非常可怕的想法。

* * *

## 回答 #1

> 赞同：129
> 
> 时间：2012-07-24T00:00:00.970

来自[https://github.com/brianmario/mysql2/issues/8](https://github.com/brianmario/mysql2/issues/8)

刚刚在控制台中复制了这个

```
sudo apt-get install mysql-client libmysqlclient-dev 
```

并工作！

* * *

## 回答 #2

> 赞同：40
> 
> 时间：2012-10-28T00:18:22.810

我使用[Homebrew for Mac](http://mxcl.github.com/homebrew/)安装 mysql：

```
brew install mysql 
```

然后我使用 gem 命令安装 mysql2 gem：

```
sudo gem install mysql2 
```

* * *

## 回答 #3

> 赞同：17
> 
> 时间：2012-04-07T05:24:15.863

这主要是由于缺少 mysql 头文件，尝试安装 mysql 开发人员（mysql-devel）包

通常，当缺少“libmysqlclient-dev”包时会出现此错误

*   如果你在 linux 上[试试这个链接](http://www.wolfe.id.au/2010/12/06/installing-ruby-with-rvm-on-ubuntu-10-10/)
*   如果您在 Windows 上，此[网址可能会对您有所帮助](https://github.com/brianmario/mysql2/issues/8)

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2017-05-08T12:03:16.773

我刚刚遇到了同样的问题，使用 OS X Sierra 和 MAMP 以及 Rails 5。我通过成功安装了 gem

```
gem install mysql2 -- --with-mysql-config=/Applications/MAMP/Library/bin/mysql_config 
```

之后，捆绑安装工作得很好。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-05-15T14:14:35.847

我最终只是安装了一个新的 MySQL 副本而不使用 MAMP，这就成功了。还必须确保安装 64 位版本，而不是 32 位。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-08-22T06:19:13.893

[您可以通过 Bundler](https://stackoverflow.com/questions/3754662/errors-installing-mysql2-gem-via-the-bundler/12067251#12067251)关注此线程错误安装 mysql2 gem，它解释了 Centos 的解决方案，如果您在操作系统中调整命令并且您可以成功安装 mysql2 gem，则此问题将得到解决。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-10-29T13:03:41.330

只需将 MAMP mysql 添加到 PATH，然后您就可以正常运行 bundle install 了。

$ /Applications/MAMP/Library/bin/mysql --host=localhost -uroot -proot

来源：[http ://blog-en.mamp.info/2009/08/using-mysql-command-line-with-mamp.html](http://blog-en.mamp.info/2009/08/using-mysql-command-line-with-mamp.html)

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2018-02-04T03:21:22.807

当我收到这个错误时，我可以通过运行来解决这个问题：

```
gem install devtools 
```

# parallel-processing - MPI奇/偶比较-拆分死锁

> ID：10051450
> 
> 赞同：0
> 
> 时间：2012-04-07T03:19:45.123
> 
> 标签：parallel-processing, deadlock, mpi

我正在尝试编写一个程序的 MPI 版本，该程序在 n 个随机生成的元素上运行奇数/偶数比较拆分操作。

进程 0 应该生成元素并将它们的 nlocal 发送到其他进程，（为自己保留第一个 nlocal）。从这里开始，进程 0 应该在运行 CompareSplit 算法后打印出它的结果。然后，接收来自算法运行的其他进程的结果。最后，打印出它刚刚收到的结果。

我已经完成了大部分工作，但是我遇到了一个似乎无法解决的僵局。我将不胜感激人们能给我的任何提示。

这是我的代码[http://pastie.org/3742474](http://pastie.org/3742474)

现在我很确定死锁来自第 134 行和第 151 行的发送/接收。我尝试将发送更改为使用“标签”而不是 myrank 作为标签参数..但是当我这样做时我只是出于某种原因不断收到“MPI_ERR_TAG：无效标签”。

显然我也会在大于 0 的处理器中运行算法，但我现在把这部分去掉，直到我弄清楚出了什么问题。

任何帮助表示赞赏。

**编辑：**我编写了一个较小的测试用例，它不包含任何 CompareSplit 操作，但仍处于死锁状态。[http://pastie.org/3744691](http://pastie.org/3744691)

我通过将第 83 行的标签从“myrank”更改为“tag”来修复上述测试用例。好吧，测试用例可以工作，但是当像我的程序一样添加实际算法时，它会死锁..

所以，我想我已经将僵局缩小到这段代码。**它看起来是else下的Sendrecv。**

```
for (i = 1; i <= npes; i++) {
    if (i % 2 == 1) // odd phase
      MPI_Sendrecv(elmnts, nlocal, MPI_INT, oddrank, 1, relmnts,
                           nlocal, MPI_INT, oddrank, 1, MPI_COMM_WORLD, &status);
    else
      MPI_Sendrecv(elmnts, nlocal, MPI_INT, evenrank, 1, relmnts,
                           nlocal, MPI_INT, evenrank, 1, MPI_COMM_WORLD, &status);

    CompareSplit(nlocal, elmnts, relmnts, wspace,
                 myrank < status.MPI_SOURCE);
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-07T15:26:09.477

标签错误是因为标签必须是从 1 到某个与实现相关的最大值范围内的正整数，该最大值保证至少为 32k。

死锁很容易理解。看看非零级进程在做什么：

```
 else {
    // The rest of the processes
    // Receive nlocal randomly generated elements from process 0
    MPI_Recv(elmnts, nlocal, MPI_INT, 0, tag, comm, &status);

    qsort(elmnts, nlocal, sizeof(int), IncOrder); // does it matter where we sort at?

    // Send results back to process 0
    MPI_Send(elmnts, nlocal, MPI_INT, 0, myrank, comm);
  } 
```

所以他们正在做一个接收，一个发送回。但是处理器 0 做的远不止这些；它向每个人发送他们的数据，然后执行一堆发送接收来处理 1（偶数秩）和 MPI_NULL_PROC（奇数秩）。但是到 evenrank 的发送接收是 noops，并且发送到进程 1 的接收将永远不会被回答，因为进程 1 没有做同样的事情。

我认为您需要将算法的那部分移到`if (rank == 0)`测试之外。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-07T05:23:37.493

看起来您正在调用`MPI_Sendrecv`[第 113 行]，但没有具有`oddrank`等级的进程来回答它，因为`oddrank eq -1`.

# php - 如何在php数组中使用echo作为字符串返回

> ID：10051451
> 
> 赞同：4
> 
> 时间：2012-04-07T03:19:48.060
> 
> 标签：php, arrays

我正在尝试返回一个字符串数组。我这样做：

```
$errors[] = toolbarCheckCreds($_COOKIE['uname'], $_COOKIE['pword'], $_COOKIE['rememberMe']);
    echo $errors[0]; 
```

这在最后的功能中：

```
return $errors; 
```

我设置了这样的错误：

```
$errors[] = "error goes here!"; 
```

基本上，当我返回我的数组并回显它时，它会给我以下输出：

```
Array 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-07T03:26:53.217

使用[PHP implode](http://www.tutorialarena.com/php/php-implode-function-array-to-string.php)将您的 Array 转换为可以回显的字符串。在数组上使用 echo 只会显示数据类型。

```
return implode(' ', $errors); 
```

如果你想用空格以外的分隔符分隔错误，只需替换第一个参数中的空格即可：

```
return implode(' :: ', $errors); 
```

例如，如果您的错误数组包含三个值：

```
[ "Invalid data" , "404" , "Syntax error" ] 
```

那么你的字符串，如果你使用 ::，当你在结果上运行时看起来像这样`echo`：

```
Invalid data :: 404 :: Syntax error 
```

有关另一个示例，请参阅我包含的参考链接。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-04-07T03:27:49.683

你需要遍历你的数组。有多种方法可以做到这一点，我个人偏好使用[foreach](http://us2.php.net/manual/en/control-structures.foreach.php)循环。

例如，这将在新行上回显数组中的每个错误消息：

```
foreach ($errors as $error)
{
    echo "<br />Error: " . $error;
} 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2019-06-29T10:35:31.413

```
$list = array( 'one Thing', 'Two Things', 'The Things' );
echo implode( ", ", $list ); 
```

结果 一件事，两件事，三件事

轻松愉快，希望它可以帮助我知道我迟到但对其他人有用吗？

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-04-07T03:47:24.097

您不能按原样回显数组的内容。

如果要检查数组的内容，可以使用[print_r()](http://php.net/manual/en/function.print-r.php)或[var_export()](http://www.php.net/manual/en/function.var-export.php)并将`return`参数设置为`True`.

# java - 如何判断数据报包是否在没有调用接收的情况下到达？

> ID：10051454
> 
> 赞同：1
> 
> 时间：2012-04-07T03:20:39.700
> 
> 标签：java

我第一次使用 UDP，我想知道是否有一种方法可以找出数据包是否已到达，而无需在 Java 7 上调用 receive `DatagramSocket`。

我正在尝试设置我的客户端，以便它可以向服务器发送多个数据包，并在发送每个数据包后，检查是否有来自服务器的响应。

现在我只是使用 上的`setSoTimeout`方法`DatagramSocket`将超时设置为 1 毫秒，但如果可能的话，我宁愿不等待。

更新：

我最终了解了 java.nio 包，并且能够使用该非阻塞 api 来执行此操作。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-16T15:15:27.157

我希望可以回答我自己的问题 - 但我最终了解了[java.nio](http://docs.oracle.com/javase/7/docs/api/java/nio/package-summary.html)包。这是一个非阻塞套接字 API。

# java - Java根据另一个数组对多个数组进行排序

> ID：10051458
> 
> 赞同：0
> 
> 时间：2012-04-07T03:21:52.987
> 
> 标签：java, arrays, sorting

我希望根据其中一个数组的值对 7 个数组进行升序排序，然后使用方法内部的循环打印最终数组。数组值由用户输入，将包含至少一组数据，但不超过 5 组。

到目前为止，我的代码如下，它是我被要求使用的选择排序的基本结构，我希望对数组 simp 进行升序排序（代表简单的兴趣），但我不知道如何获得与它一起移动的所有其他数组都保留这些值。

关于用于此的循环方法的任何想法？

```
public static void sort(double[] amount, double[] iRate, int[] term, double[] simp, double[] month, double[] daily, double[] weekly)
  {

      for (int i=0;i<simp.length-1;i++)
      {
            int minindex=i;
            for (int j=i+1;j<simp.length;j++)
            {
                if(simp[minindex]>simp[j])
                    minindex=j;
            }
            double temp = simp[minindex];
            simp[minindex]=simp[i];
            simp[i]= temp;
      }

} 
```

**示例运行**

```
[Line #]    [Principal Amount]  Interest rate   term    simple  monthly     weekly    daily
1            $1,375.00                1.18%         7    9.4244   9.4522      9.4557    9.4567
2             $100.00                 3.25%         6     1.625    1.636      1.6377    1.6382
3             $100.00                 3.25%         12     3.25   3.2988      3.3023    3.3032

[Line #]    [Principal Amount]  Interest rate   term    simple   monthly    weekly    daily
1             $100.00                 3.25%        6       1.62    1.636     1.6377    1.6382
2             $100.00                 3.25%       12       3.25    3.2988    3.3023    3.3032
3           $1,375.00                 1.18%        7      9.4244   9.4522    9.4557    9.4567 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-07T03:33:32.120

使用现有代码执行此操作的一种直接方法是在交换元素时交换所有数组中的元素`simp`：

```
double temp = simp[minindex];
simp[minindex]=simp[i];
simp[i]= temp;

temp = iRate[minindex];
iRate[minindex]=iRate[i];
iRate[i]= temp;

.
.
. 
```

这不是最优雅的方式。执行此操作的 OO 方法是拥有一个具有`amount, iRate, term...`成员的对象并对这些对象的数组进行排序。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-07T03:32:33.320

您可以创建一个包含所有字段的类：

```
 class Entity implements Comparable<Entity> {
      double simp;
      double amount;
      double rate;
      ...
      // construct each instance taking the next line from 
      // the arrays or doubles

      // implement compareTo
      public int compareTo(Entity entity) {
         // compare only the field you need
         return Double.compare(simp, entity.simp); 
      }
   } 
```

然后根据您的七个数组构建一个实体数组并使用它进行排序`Arrays.sort()` 最后您可以将数据复制回双精度数组，或者直接从 Entity[] 打印内容。

# sqlite - SQLite 选择混合列，我做不到

> ID：10051460
> 
> 赞同：0
> 
> 时间：2012-04-07T03:22:00.493
> 
> 标签：sqlite, select

我的代码是

```
mDB.query(DATABASE_TABLE, new String[] {KEY_ID, KEY_Name + KEY_Familyname + " as " + KEY_Fullname}, null, null, null, null, null); 
```

所以这不是

```
Error: "KEY_Name + KEY_Familyname + " as " + KEY_Fullname" ???? 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-07T03:44:27.490

使用`||`运算符连接字符串

```
select KEY_Name || KEY_Familyname as KEY_Fullname 
```

# mysql - SQL Server 2008 的在线数据库引擎？

> ID：10051465
> 
> 赞同：1
> 
> 时间：2012-04-07T03:23:10.027
> 
> 标签：mysql, sql, database, windows-server-2008

我已经有 SQL Server 2008 的学生版本。我曾经有一个学生帐户，它允许我通过大学服务器进行连接，但自从我毕业后，我没有机会创建自己的数据库。我可以使用我的 LocalHost 登录。但我需要从我的网站通过 php 在线访问我的数据库。谁能告诉我是否有任何网站可以让我有机会创建在线表格并通过 PHP 使用它们？我一直在寻找2天。我不知道该搜索什么了。

# backbone.js - 如何填充 Backbone.js 集合的 _byId 数组，以便我可以在其上使用 `get`？

> ID：10051471
> 
> 赞同：2
> 
> 时间：2012-04-07T03:24:37.527
> 
> 标签：backbone.js

我有一个集合，`collection.models`返回一个模型数组。但是，当我调用`collection.get(someId)`（并且此 id 是`collection.models`数组中模型的 id）时，我得到`undefined`. 看着`collection._byId`，它看起来像一个空物体。

如何正确填充`_byId`，以便我可以使用`get`？或者也许我在初始化我的集合时做错了什么，这就是为什么`_byId`是空的。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-12T16:52:24.200

我有点晚了，但希望这对其他人仍然有用。

Collection._byId 只是一个普通的 js 哈希对象。真的没什么好看的。如果您希望 Collection.get 工作，只需将所有模型添加到 _byId 哈希中。

在集合范围内：

```
var someId = '123'; // any id will do

this._byId[someId] = someModel; // someModel.id = '123'

console.log(!!this.get(someId)); // should return true 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-08T02:43:23.697

由于我在 Rails 中使用它，Rails 生成的默认 json 不适用于 Backbone。我不知道为什么我在尝试学习 Backbone 时没有看到它。无论如何，您可以：

1.  改变 Rails 生成 JSON 的方式
2.  [更改 Backbone 应用程序读取 JSON 的方式](https://gist.github.com/719080)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-10-03T19:44:16.890

听起来 OP 的问题略有不同，但我遇到了类似的问题，并认为我会发布对我有用的内容。

与原始问题一样，`collection.models`包含正确的模型，但在我的情况下，`_byId`哈希包含[`cid`](http://backbonejs.org/#Model-cid)的模型版本不为空。然而，`_byId`没有包含具有正常 id 的模型（通常有两个版本 -`id`一个和`cid`一个），所以我无法使用`collection.get(id)`它来检索它。当我阅读有关`cid`. 从文档：

> 当模型尚未保存到服务器并且还没有最终的真实 id 但已经需要在 UI 中可见时，客户端 id 很方便。

我认为等待服务器作为我的`cid`模型并且`collection.model`具有正确的 ID 不是问题。`{ wait : true }`然而，作为一个选项传入`collection.create`为我解决了这个问题。

# javascript - 调出/返回位置权限对话框？

> ID：10051472
> 
> 赞同：2
> 
> 时间：2012-04-07T03:24:43.343
> 
> 标签：javascript, dojo

因为我的网站需要用户的位置，所以他们需要允许访问它。用户可以拒绝访问一次，和/或可能保存拒绝网站的偏好。但是，如果稍后用户决定向网站提供他/她的位置，并且无论出于何种原因，权限对话框不会自行出现怎么办？

有没有办法调出权限对话框，或者创建与使用 javascript/dojo 的权限对话框功能相同的对话框/警报？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-07T17:33:18.370

我认为这些首选项需要作为持久数据存储在服务器端的数据库中或用户机器上的 cookie 中。因此，每次用户登录您的网站时，都应该交叉检查这些数据（来自数据库或 cookie），如果他们之前决定不允许此类访问，则应该弹出权限对话框。（这就是你要找的答案吗？）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-13T16:14:37.747

您不能强制弹出授权对话框。这是一个安全组件的本机实现，并且会记住用户的选择，直到他的电脑死机 - 或者偏好被清除。想到 CTRL+SHIFT+DEL，一个快速测试告诉我至少 FF11+，你应该通知用户选择的标志是“站点偏好”

# php - 使用 Foreach 的唯一数组值

> ID：10051477
> 
> 赞同：0
> 
> 时间：2012-04-07T03:25:01.893
> 
> 标签：php, arrays

我有这个数组

```
Array 
( 
    [0] => posts Object 
        ( 
            [title] => test1 
            [dbh] => DataBase Object 
                  ( 
                      [dbh] => PDO Object ( ) 
                  ) 
        )

    [1] => posts Object 
        ( 
            [title] => test1 
            [dbh] => DataBase Object 
                  (
                      [dbh] => PDO Object ( ) 
                  ) 
        )

    [2] => posts Object 
        ( 
            [title] => test2 
            [dbh] => DataBase Object 
                  (
                      [dbh] => PDO Object ( ) 
                  ) 
        )
) 
```

我不能使用array_unique()，因为对象不能转换为字符串

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-07T03:44:27.057

最好的方法是不使用 foreach。您应该用于：

```
for ($i = 0; $i < count($array); $i++) {
  for ($j = $i + 1; $j < count($array); $j++) {
    if ($array[$i] === $array[$j]) {
      unset($array[$j]);
      $array = array_values($array);
    }
  }
} 
```

Foreach 会复制您的数组并在副本上循环，这使得跟踪哪些重复项已被测试/删除变得更加复杂。

上面的代码将检查您的`post`对象是否属于同一实例，如果是，则删除它们。您可能想检查它们是否包含相同的数据，但不是同一个实例。然后您将不得不`if`稍微扩展该行：

```
if ($array[$i]->title === $array[$j]->title && $array[$i]->dbh === $array[$j]->dbh) { 
```

...用于检查标题是否相同并且`DataBase`对象是否属于同一实例。

# jquery - 如何更改jquery中逻辑OR的优先级？

> ID：10051480
> 
> 赞同：2
> 
> 时间：2012-04-07T03:26:01.003
> 
> 标签：jquery

我有一个 jQuery 选择器：

```
div div ul li.normal a, div div ul li.massive a 
```

是否有这样的逻辑等效选择器：

```
div div ul (li.normal, li.massive) a 
```

任何比以下更好的解决方案：

```
$('div div ul li').filter('.normal, .massive').find('a') 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-07T03:36:32.263

这真的是个人喜好，并且涉及您认为随着时间的推移可能会在您的应用程序中发生变化的细节。如果我预计这两个选择器将来会出​​现分歧，我可以使用逗号将它们完全分开，如下所示：

```
$('div div ul li.normal a, div div ul li.massive a') 
```

但是，如果没有任何改变结构的计划，那么您在问题中的示例会很好用。

如果您对选择器的速度有疑问，您可以在其周围放置一些计时代码并比较哪个选择器更快。

多[属性选择器](http://api.jquery.com/multiple-attribute-selector/)基本上是相当于 OR 的 jQuery 选择器。在文档中它说：

> 选择所有指定选择器的组合结果。

它可以用于元素选择器、类选择器、id选择器、属性选择器等的任意组合。

因此，如果您想 100% 遵守 DRY 原则，您的示例似乎是最简化的版本：

```
// -----------------------[ normal || .massive ]--------
$('div div ul li').filter('.normal, .massive').find('a') 
```

# iphone - 用于应用程序升级的 sqlite 数据库保护

> ID：10051489
> 
> 赞同：-1
> 
> 时间：2012-04-07T03:27:32.853
> 
> 标签：iphone, ios, sqlite, ios4

我在应用商店有一个 1.0 版的应用。它使用用户修改的 sqlite 数据库。我想知道我是否对我的应用 UI 进行了更新并发布到应用商店。当用户更新他们的应用程序时，他们会丢失数据吗？如何确保他们没有？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-07T05:43:34.120

使用文档文件夹。如果数据库不存在，请从 bundle, , 复制`[[NSBundle mainBundle] resourcePath]`到文档文件夹：

```
NSArray *paths = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES);
NSString *documentsDirectory = [paths objectAtIndex:0]; 
```

然后，从文档文件夹中的数据库执行所有交互。升级期间不会擦除文档文件夹，除非您明确这样做或用户删除了整个应用程序。

# javascript - OAuth 随机数值

> ID：10051494
> 
> 赞同：7
> 
> 时间：2012-04-07T03:29:02.063
> 
> 标签：javascript, oauth

我正在使用[FatSecret REST API](http://platform.fatsecret.com/api/Default.aspx?screen=rapih)

我使用[OAuthSimple](https://github.com/jrconlin/oauthsimple/blob/master/js/OAuthSimple.js) javascript 库来生成签名的 url。这是我的代码 -

```
 params['oauth_timestamp'] = Math.floor(new Date().getTime()/1000);
    params['oauth_nonce'] = '1234';
    params['oauth_version'] = '1.0';

    var paramStr = '';
    for(var key in params){
        paramStr += key+"="+params[key]+"&";
    }    
    paramStr = paramStr.substring(0,paramStr.length-1);

    var oauth = OAuthSimple();
    oauth.setAction('GET');
    var o = oauth.sign(
            {
             path:this.requestURL,
             parameters: paramStr,
             signatures:{
                api_key:this.apiKey,
                shared_secret:this.sharedSecret,
                access_token: this.accessToken,
                access_secret: this.accessSecret
             }
            });
    console.log(o.signed_url);
    return o.signed_url; 
```

params 是一个关联数组，包含此调用的所有非 oauth 相关参数。当我使用这个签名的网址时，我得到一个“无效/使用的随机数”

[OAuth 测试工具](https://github.com/mashery/OAuth-1.0-JavaScript-Testing-Tool)使用相同的OAuthSimple 库，如果我输入所有相同的参数（包括时间戳），它会生成完全相同的 url。

唯一的区别是测试工具生成的 url 有效，并给了我来自服务器的完整响应。我的代码生成的网址没有。

我尝试了各种 nonce 值，包括发送时间戳的 MD5，但我得到了同样的错误。我现在使用 1234 的原因是测试工具默认使用 1234，这似乎有效。

任何帮助表示赞赏。提前致谢。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2017-02-23T04:00:01.277

使用适用于当前浏览器的内容更新@Saravanan 的答案：

```
function genNonce() {
    const charset = '0123456789ABCDEFGHIJKLMNOPQRSTUVXYZabcdefghijklmnopqrstuvwxyz-._~'
    const result = [];
    window.crypto.getRandomValues(new Uint8Array(32)).forEach(c =>
        result.push(charset[c % charset.length]));
    return result.join('');
}

console.info(genNonce()); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2014-07-16T09:37:08.313

根据 twitter 文档的 nonce 值：

> 此请求的值是通过对 32 字节随机数据进行 base64 编码并去除所有非单词字符生成的，但任何产生相对随机的字母数字字符串的方法在这里都应该没问题。

基于以上注释，我每次发送请求时都使用以下 javascript 代码生成 nonce 值：

```
var nonceLen = 32;
return crypto.randomBytes(Math.ceil(nonceLen * 3 / 4))
    .toString('base64')   // convert to base64 format
    .slice(0, nonceLen)        // return required number of characters
    .replace(/\+/g, '0')  // replace '+' with '0'
    .replace(/\//g, '0'); // replace '/' with '0' 
```

如果它有效，试试这个！

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2017-02-07T15:07:13.070

试试这个
每次都有效

> var nonce = Math.random().toString(36).replace(/[^az]/, '').substr(2);

# c# - 如何通过 GSM 调制解调器向 SQL Azure 添加数据？

> ID：10051495
> 
> 赞同：-2
> 
> 时间：2012-04-07T03:29:56.360
> 
> 标签：c#, azure, azure-storage, gsm

我最近在 Windows 7 上使用 Hyper Terminal，在其中我访问通过笔记本电脑端口上​​的 GSM SIM 卡接收的 SMS，并使用连接到我的 PC 的 GSM 调制解调器设备。此处演示应用程序：http: [//www.codeproject.com/Articles/38705/Send-and-Read-SMS-through-a-GSM-Modem-using-AT-Com](http://www.codeproject.com/Articles/38705/Send-and-Read-SMS-through-a-GSM-Modem-using-AT-Com)

现在我在 Windows azure 上有一个帐户，并且我确实有一个名为 sql azure 数据库`PersonInfo`，我想在其中添加一些来自我的 SIM 短信的数据。数据类似于“253 Mobulite NetTimeet”，我想使用我的 SIM 卡发送此 SMS，并希望它存储在 Azure Databse 表中。

请建议我有什么选择？我怎样才能做到这一点？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-07T08:11:29.603

不知道为什么所有的反对票，但让我们通过这个。

您有一个应用程序需要存储数据，来自它通过 SMS 接收或发送的数据。

**GSM模型通讯**

从您的标签中，我可以看到您想在 c# 中开发和应用程序。您很可能需要通过 COM/串行端口与 GSM 调制解调器通信。只需查看您提供的链接，我认为您就是这样做的。超级终端评论把我扔了，我不确定你为什么提到它。

**数据存储选项**

1.  本地 SQL 如果我建议它只是一台计算机，请在您的本地计算机上安装一个数据库并使用它。

2.  SQL Azure 如果你有多个位置都需要读取同一个数据库，我只会推荐这个。否则，如果它只在 1 台电脑上，并且数据不需要在线可用，则使用本地数据库。

**C# 到数据库**

1.  使用实体框架。此处快速演练：[http ://www.datasprings.com/resources/articles-information/a-quick-guide-to-using-entity-framework](http://www.datasprings.com/resources/articles-information/a-quick-guide-to-using-entity-framework)

# sql-server-2005 - 从两个表查询

> ID：10051497
> 
> 赞同：0
> 
> 时间：2012-04-07T03:31:10.650
> 
> 标签：sql-server-2005

我有 2 个表： **nameTable**

*   用户名
*   用户身份
*   班级号

**标记表**

*   用户身份
*   班级号
*   科目编号
*   分数

我想显示所有具有**相同 classId的学生的****userId、userName、courseCode、标记**。

 **```
create proc mark__classId
@classId int
as
select marksTable.courseCode, marksTable.userId, marksTable.marks, nameTable.userName
from marksTable, nameTable
where
marksTable.classId = nameTable.classId 
```

但是这个查询给出了非常模糊的o/p。

假设“ **name1** ” id **NAME1**和 classId **10**跟随 courseCode 'C1, C2, C3' 和各自的标记 '80,99,90' 现在我想在输入时显示所有这些信息

```
exec mark__classId 10 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-07T03:39:39.097

你的选择应该更像这样，你只需要使用你的传入参数。以及您应该使用 a`JOIN`而不是`CROSS JOIN`带有过滤器的 a

```
SELECT marksTable.courseCode, marksTable.userId, marksTable.marks, nameTable.userName
FROM marksTable
JOIN nameTable
    ON marksTable.classId = nameTable.classId 
WHERE marksTable.classId = @classId 
```**

# php - 创建过于简单的功能是不好的风格吗？

> ID：10051499
> 
> 赞同：1
> 
> 时间：2012-04-07T03:31:27.247
> 
> 标签：php, javascript, c++, coding-style, decomposition

我只是想知道-为相对简单的任务创建函数（分解）是不好的编程风格吗？

例如，在 PHP 中，我发现在 session、post、get 和 cookie 中使用 '$_' 和大写字母很烦人。因此，如果我创建了一个名为 setSesVar('key', 'value') 的函数来为我创建一个会话变量，这很糟糕吗？每次为它调用函数的开销是否值得？还是无关/自己的偏好？

其他一些例子：

*   c++（和java）中的printLn函数
*   Javascript 中 getElementBydId 的简写形式（假设我不使用 jQuery 或其他库）
*   重定向代替 PHP 中的 header('Location: ' . url)

还有一个稍微偏离主题的问题——我习惯于使用更“严格”数组的语言；在 PHP 中，您可以在末尾添加一个元素，只需说 myArray[] = 'newElement'。我觉得我应该做 myArray[sizeof(myArray)] 但我敢打赌添加不必要的代码可能是不好的风格。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-07T05:03:33.703

取决于函数的作用，以及你做了多少。如果你把所有东西都拿出来做一个单行函数，那么你还没有真正摆脱任何复杂性。事实上，您通过两种方式*增加了复杂性：*

*   首先，PHP 中没有内置的任何东西都是您的代码新手必须弄清楚的。如果我看到`$_SESSION['stuff'] = "some value";`了，我就知道它在做什么——就像任何使用 PHP 超过一个小时的人一样。另一方面，如果我看到`setSessionVar('stuff', 'some value');`了，我必须去确认发生了什么`setSessionVar`。我的意思是，它要做的不仅仅是设置一些*东西*`$_SESSION`；否则，*为什么不**这样做**呢？*

*   其次，如果这些函数最终相互调用，那么您最终会得到一个老鼠巢穴的函数调用。跟踪 10 行（甚至 30 行）函数比跟踪调用另一个 2 行函数的 2 行函数更容易，该函数调用可能会或可能不会调用另一个 2 的整个其他 2 行函数线函数。您必须通过文件（或者更糟的是，在一堆不同文件之间进行选项卡）悠悠球，以便通过代码跟踪您的方式。

在我看来，任何内置在 PHP 中的东西——并且可以用一行简单的代码来表达——都不值得拥有自己的功能。我建议将函数限制为至少 3 行，但有一个例外：需要访问对象内部的方法（例如 getter 或 setter）可以更小。但是大多数函数应该做一些 PHP 还没有做的事情；如果他们不这样做，那么您就违背了函数的目的并无缘无故地增加了复杂性。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-07T03:35:56.100

只有当你的名字不够冗长时——如果它们太短，你最终会无意中为未来的维护者混淆你的代码。另一方面，如果它们足够冗长，一半的时间使用原始代码会更快。如果您使用过短的函数名称以避免“额外”输入，我会说分解只是一个坏主意。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-07T03:37:24.083

我想这将取决于。你会把这些函数放在哪里？最重要的是，如果您要在每个班级中复制这些内容，那么这可能是个坏主意。如果您将它们放在某个 utils 类中，那么无论如何，目的可能会被打败：

`System.out.println(" ... ");` 对比 `MyUtils.println(" ... ");`

真的没有多大意义。（和其他人一样）

# r - 如何测试数组中的一行是否与 R 中的逐行匹配

> ID：10051500
> 
> 赞同：0
> 
> 时间：2012-04-07T03:31:38.177
> 
> 标签：r, subset, apply

我有一个向量 v3，它看起来像这样：

```
v3 <- matrix(c(1,1,3,3,2,2,
               2,3,1,2,3,1,
               3,2,2,1,1,3), ncol = 3)

     [,1] [,2] [,3]
[1,]    1    2    3
[2,]    1    3    2
[3,]    3    1    2
[4,]    3    2    1
[5,]    2    3    1
[6,]    2    1    3 
```

我想检查行是升序还是降序。我试过这个： `v3[row(v3)[,1],]==(c(1,2,3)||c(3,2,1))` 但它产生了：

```
 [,1]  [,2]  [,3]
[1,]  TRUE FALSE FALSE
[2,]  TRUE FALSE FALSE
[3,] FALSE  TRUE FALSE
[4,] FALSE FALSE  TRUE
[5,] FALSE FALSE  TRUE
[6,] FALSE  TRUE FALSE 
```

代替

```
 [,1]  [,2]  [,3]
[1,]  TRUE TRUE   TRUE
[2,] FALSE FALSE FALSE
[3,] FALSE FALSE FALSE
[4,]  TRUE  TRUE  TRUE
[5,] FALSE FALSE FALSE
[6,] FALSE FALSE FALSE 
```

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-07T03:48:48.047

这是一种方法：

```
adtest <- function(v) rep((all(diff(v)>0)) | all(diff(v) < 0), length(v))
t(apply(v3, 1, adtest))

      [,1]  [,2]  [,3]
[1,]  TRUE  TRUE  TRUE
[2,] FALSE FALSE FALSE
[3,] FALSE FALSE FALSE
[4,]  TRUE  TRUE  TRUE
[5,] FALSE FALSE FALSE
[6,] FALSE FALSE FALSE 
```

# java - xstream，如何将列表序列化为 xml

> ID：10051501
> 
> 赞同：0
> 
> 时间：2012-04-07T03:31:43.250
> 
> 标签：java, collections, xstream

我正在使用 xstream 并尝试将 List 序列化为 XML。我需要一个像这样的输出结构

```
<Employees>
  <Employee></Employee>
  <Employee></Employee>
  <Employee></Employee>
</Employees> 
```

要序列化的对象将类似于

```
 List<Employee> 
```

或一类雇员。我试图创建一个员工作为

```
public class Employees extends ArrayList<Employee>(){} 
```

以及其他各种方法，但无法根据需要对其进行序列化。有没有简单的方法来做这样的事情？

我的问题类似于[XStream - Root 作为对象的集合，](https://stackoverflow.com/questions/3136234/xstream-root-as-a-collection-of-objects)但我想在没有包装对象的情况下这样做。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-07T03:50:22.513

您使用列表作为根元素？您可以为该类设置别名。下面的代码产生您正在寻找的输出。

```
public static void main(String[] args) {
    List<Employee> employees = new ArrayList<Employee>();
    employees.add(new Employee());
    employees.add(new Employee());
    employees.add(new Employee());
    XStream xstream = new XStream();
    xstream.alias("Employees", List.class);
    System.out.println(xstream.toXML(employees));
} 
```

# mysql - MySQL 的分片和事务

> ID：10051503
> 
> 赞同：7
> 
> 时间：2012-04-07T03:32:09.263
> 
> 标签：mysql, transactions, sharding

使用分片，如何跨多个数据库服务器维护可靠的事务？

例如，如果我有一个`AccountLedger`在一个数据库服务器（MySQL 实例）上命名的表和一个`User`在另一个数据库服务器上命名的表，是否可以跨两个数据库实例运行一个事务，该事务将可靠地提交或在失败时回滚？

交易示例：

AccountLedger 数据库服务器：

```
START TRANSACTION;
INSERT INTO AccountLedger SET
    UserID = @UserID,
    Date = @Date,
    Debit = @Debit,
    Balance = @Balance; 
```

用户数据库服务器：

```
START TRANSACTION;
UPDATE User SET
    Balance = @Balance
WHERE UserID = @UserID; 
```

AccountLedger 数据库服务器：

```
COMMIT; 
```

用户数据库服务器：

```
COMMIT; -- What happens if the COMMIT fails here (power goes out or whatever) 
```

我已经阅读了很多关于分片的内容，但我似乎找不到任何关于使用分片交易的信息。有人可以指出我正确的方向吗？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-04-07T08:01:38.270

**使用分布式事务**可以做到这一点。它们由 InnoDB 存储引擎支持。您将在 MySQL 文档中找到有关它们和命令语法的更多信息：[XA Transactions](http://dev.mysql.com/doc/refman/5.5/en/xa.html)

我建议不要直接使用它们。如果一致性是 ypur 应用程序的最大要求，那么使用可以处理它的事务监视器。Java EE 会为您做到这一点。

但是，如果可用性比一致性更重要，您应该避免分布式事务。CAP 定理解释了原因。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2016-03-03T19:51:29.397

如果每个分片都支持每个键的线性化以及比较和设置（对于 MySQL 来说是这样），您可以在客户端实现跨分片可序列化事务。这种方法在[Google 的 Percolator](https://www.usenix.org/legacy/event/osdi10/tech/full_papers/Peng.pdf)和[CockroachDB](https://www.cockroachlabs.com/blog/how-cockroachdb-distributes-atomic-transactions)中使用，但没有什么能阻止您在 MySQL 中使用它。

我已经创建了此类交易[的逐步可视化。](http://rystsov.info/2016/03/02/cross-shard-txs.html)我希望它能帮助你理解它们。

如果您对已提交的读取隔离级别感到满意，那么看看Peter Bailis的[RAMP 事务是有意义的。](http://www.bailis.org/papers/ramp-sigmod2014.pdf)它们也可以在分片 MySQL 环境中实现。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-08T02:07:40.547

免责声明：我为 ScaleBase (http://www.scalebase.com) 工作，这是一家完整的分片解决方案提供商

我们在 ScaleBase 提供了在 InnoDB 中使用 XA 事务的选择，尽管我们发现它们的性能成本很高……而且正是在您需要数据库最快的地方（大量插入等）。因此，我们还启用了“我们的 2 阶段提交版本”，它更快，并且在一致性方面可能被认为非常接近 XA，并且可能足以进行权衡......这个“我们的版本”包括一个对所有参与的数据库进行快速“你有空”查询，例如 SELECT version()，然后提交它们。这是我们在“ScaleBase 数据库流量控制器”中拥有的其他机制的补充，对于我们的大多数客户（以及那些不这样做的人 - 仍然可以选择完整的 XA）来说已经足够了。

# objective-c - 在 UITableView 中使用按钮播放歌曲

> ID：10051507
> 
> 赞同：0
> 
> 时间：2012-04-07T03:32:38.493
> 
> 标签：objective-c, cocoa-touch, uitableview, ios5

我正在创建一个自定义表格，该表格有一个按钮，允许用户在按下时预览歌曲。我的大部分代码都有效，但我还没有弄清楚如何向播放器传递与按下按钮的行相对应的特定歌曲。

例如：如果我有两排，#1 说 Jay Z，#2 说 Red Hot Chili Peppers，我想按下 #1 中的按钮来播放 Jay，然后按下 #2 中的按钮来播放 Peppers。简单的。我的代码有缺陷，无论我按下哪一行的按钮，我都只能播放相同的歌曲。

我知道为什么会这样，但我不知道如何解决它。我只是想知道是否有人可以用几行来打我，这可以为我指明正确的方向。

我不能使用`didSelectRowAtIndexPath`，因为我希望在选择行本身时发生其他事情。

我需要为此创建一个方法还是我忽略了一些东西？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-07T03:44:37.073

就像是

```
- (void)buttonTapped:(UIView *)sender;
{
    CGPoint pointInTableView = [sender convertPoint:sender.bounds.origin toView:self.tableView];
    NSIndexPath *tappedRow = [self.tableView indexPathForRowAtPoint:pointInTableView];

    // get song that should be played with indexPath and play it
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-07T07:04:27.753

类似于 tableView: cellForRowAtIndexPath: 给你的按钮标签作为 index.row 并将下面的函数绑定到按钮的 touchup inside event

```
-(void)button_click:(UIView*)sender
{
   NSInteger *index = sender.tag;
   //play song on that index
} 
```

我想这会对你有所帮助！

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-07T07:10:52.173

您还可以设置在`tag`期间创建的每个按钮的属性`tableView: cellForRowAtIndexPath:`，然后在`buttonTapped`调用事件时查找`sender`并找到它的`tag`. `tag`UIView的属性就是为这类问题提供的。

如果您需要更多信息，您可以创建一个 UIButton 子类来存储有关关联歌曲所需的任何或所有信息。再次，您在 , 期间设置该信息`cellForRowAtIndexPath`，以便在点击按钮时检索。

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath;
{
    // Dequeue a cell and set its usual properties.
    // ...

    UIButton *playButton = [UIButton buttonWithType:UIButtonTypeRoundedRect];
    [playButton addTarget:self action:@selector(playSelected:) forControlEvents:UIControlEventTouchUpInside];
    // This assumes you only have one group of cells, so don't need to worry about the first index.  If you have multiple groups, you'll need more sophisticated indexing to guarantee unique tag numbers.
    [playButton setTag:[indexPath indexAtPosition:1]];

    // ...
    // Also need to set the size and other formatting on the play button, then make it the cell's accessoryView.
    // For more efficiency, don't create a new play button if you dequeued a cell containing one - just set its tag appropriately.
}

- (void) playSelected:(id) sender;
{
    NSLog(@"Play song number %d", [sender tag]);
} 
```

# ios - 如何编写代码来读取 .fla 文件？

> ID：10051512
> 
> 赞同：2
> 
> 时间：2012-04-07T03:33:47.363
> 
> 标签：ios, flash, cocos2d-iphone

我一直想知道人们如何分析每个文件扩展名的特征（当然在记事本中打开它是不可读的）

例如，我想编写一个程序，它可以从 .fla 文件中读取所有内容，例如时间线、影片剪辑、每个 MC 的位置或所有补间动画值。并获得嵌入其中的图像。（我打算将闪存用作另一个项目的 IDE。）

（我尝试阅读专有格式的原因是我想使用他们很棒的编辑器。我真正想做的是，我想用 cocos2d 制作一个 iOS 游戏。有一个代码可以在 cocos2d 中移动东西但是有没有像样的编辑器。所以我想使用 Flash 作为编辑器，然后通过读取 .fla 文件将动作转换为 Objective-C cocos2D 代码。）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-07T12:11:04.230

如果您希望能够将时间轴动画从 flash 导入 cocos2d，这个[工具](http://db.tt/kA0jr0gL)可能会有所帮助。[此线程](http://www.cocos2d-iphone.org/forum/topic/6239)中的更多信息。

Grapefrukt [-exporter](https://github.com/grapefrukt/grapefrukt-export)也可能会有所帮助，因为它可以导出关键帧数据以及各种其他格式的动画。

与其自己创建工具，不如使用其中一种工具并将其集成到您的工作流程中可能会更容易（并且节省时间）:)

最后，如果以上都不起作用，那么将 Flash 动画导出为动画 GIF 或电影文件怎么样？

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-04-07T04:45:16.017

我假设你想写一个反编译器，这是可能的，互联网上有几个可用的，价格各不相同。

flash 不可能实现这一点，大多数程序、软件都是建立在诸如 C 之类的本地语言上的，本地意味着它可以独立运行，而无需最初设置环境来支持它。Flash 不够独立，无法拥有如此强大的功能。

尝试查看 c++ 或 C#，因为这是可能的，这些语言也更强大。

# ios - 如何在其他子视图下方插入子视图

> ID：10051514
> 
> 赞同：39
> 
> 时间：2012-04-07T03:33:59.767
> 
> 标签：ios, subview, addsubview

每个人。

我有一些标签，我在 xib 文件中绘制它们，并使用代码添加背景视图，但背景视图在这些标签的前面，所以我看不到它们。所以，我的问题是如何在这些标签下方添加背景视图。

先感谢您。

* * *

## 回答 #1

> 赞同：64
> 
> 时间：2012-04-07T03:38:26.080

如果你谷歌`UIView`你最终会在文档 - [UIView 类参考](http://developer.apple.com/library/ios/#documentation/uikit/reference/uiview_class/uiview/uiview.html)

然后，您需要查看方法列表，直到找到听起来大致符合您需求的方法，例如这两个：

```
- (void)insertSubview:(UIView *)view atIndex:(NSInteger)index 
```

和

```
- (void)insertSubview:(UIView *)view belowSubview:(UIView *)siblingSubview 
```

此时，您只需阅读有关方法行为方式的描述，然后选择最容易为您的设计实现的方法。如果您在提出问题之前尝试自己找到答案，这对您自己的学习非常有帮助

* * *

## 回答 #2

> 赞同：44
> 
> 时间：2012-04-07T03:37:09.640

您可以使用该方法[`insertSubview:atIndex:`](http://developer.apple.com/library/ios/documentation/uikit/reference/uiview_class/UIView/UIView.html#//apple_ref/doc/uid/TP40006816-CH3-SW19)

```
[self.view insertSubview:backgroundView atIndex:0]; 
```

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2017-06-21T19:01:51.567

您可以在 Swift 3 中调用此方法

```
view.insertSubview(yourSubView, at: 0) 
```

或者

```
view.sendSubview(toBack: yourSubView) 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-04-07T03:46:59.553

在 IB 中，视图的子视图列在该视图下的层次结构中。在该层次结构中出现在其兄弟姐妹之上的子视图将在渲染视图中出现在它们之下。因此在下面的示例中，`in` `99:99 AM`标签在运行时出现在`Sign In`按钮下方。

如果您的背景只是 UIImageView，请考虑将视图添加到您的 NIB，然后在运行时设置其 UIImage。这样，您就不会感到困惑。还有，[Paul.s 所说](https://stackoverflow.com/a/10051529/1224741)的。

![在此处输入图像描述](../Images/3262a74179391cfed010b02a3285ca71.png)

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2017-06-16T06:24:04.543

**斯威夫特 3 及更高版本。**

```
view.insertSubview(theViewYouWantToAdd, at: 0) 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2019-05-15T11:22:28.320

[https://medium.com/swift-programming/dynamic-layouts-in-swift-b56cf8049b08](https://medium.com/swift-programming/dynamic-layouts-in-swift-b56cf8049b08)

使用 VerticalLayout 作为父级。它非常简单有效

# php - PHP 正则表达式验证

> ID：10051516
> 
> 赞同：0
> 
> 时间：2012-04-07T03:35:07.790
> 
> 标签：php, mysql, html

我在 PHP 中有以下用于验证的代码块，但我无法弄清楚为什么我的验证仍然失败。我是正则表达式的新手，但我想允许 ($ , . -) 但它不起作用。我从“[A-Za-z0-9]”开始。以下代码允许的唯一字符是破折号 (-) 但不是 $ 或 。或 ，或空间。有人可以指出我正确的方向吗？

```
case 'alnum':
{
        $bret= $this->test_datatype($input_value,"[A-Za-z0-9\s$,.-]");
        if(false == $bret) {
            $default_error_message = sprintf(E_VAL_ALNUM_CHECK_FAILED,$variable_name);
        }
    break;
                            } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-07T03:39:53.737

您可以在不起作用的字符之前使用反斜杠，例如 $ 等。

```
$bret= $this->test_datatype($input_value,"[A-Za-z0-9\s\$\,\.-]"); 
```

# php - 从 jQuery Ajax POST 加载 HTML

> ID：10051517
> 
> 赞同：0
> 
> 时间：2012-04-07T03:35:16.597
> 
> 标签：php, jquery, ajax

我正在向 PHP 脚本发出一个 jQuery Ajax POST 请求，该脚本返回一个包含所有选项的 HTML 选择菜单。

```
$.ajax({
    type: "POST",
    url: "books/editions",
    data: dataString,
    cache: false,
    success: function(menu) {
        $('#editions').html(menu);
    }
}); 
```

调试告诉我 PHP 脚本已正确执行并按预期返回 HTML 选择菜单。但是，Firebug 告诉我“菜单”未定义——显然没有任何内容加载到“#editions”div 中。

我期待“菜单”包含从 PHP 函数返回的 HTML 字符串，但事实并非如此。有人可以告诉我我做错了什么吗？提前致谢。

--

根据要求，PHP editions() 方法代码：

```
public function editions()
{
    $menu = $this->books_repository->get_editions_menu();
    return $menu;
} 
```

同样，在返回点进行调试告诉我该方法正在返回一个格式正确且内容正确的 HTML 字符串。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-07T03:43:22.320

```
public function editions() {
   $menu = $this->books_repository->get_editions_menu();
   //return $menu; when ajax jQuery is used, make sure the output is printed
   echo $menu;
} 
```

# ruby-on-rails - 如何在 rails 3.2 中安装 calendar_date_picker？

> ID：10051525
> 
> 赞同：1
> 
> 时间：2012-04-07T03:37:26.627
> 
> 标签：ruby-on-rails, calendar

我一直试图让这个 calendar_date_picker 工作超过两天，但没有成功。

我尝试将其安装为 gem：

1.  宝石安装 calendar_date_select
2.  将其包含在 gemfile 中，然后运行 ​​bundle install
3.  由于 rake calendar:install 不起作用...我手动将从 github 下载的每个文件放入资产存储库（rails 3.2）或公共文件夹（rails 3.0.5）。
4.  我已将此行放在 environment.rb 文件中： config.gem "calendar_date_select", :lib =>"calendar_date_select"
5.  我在应用程序标头中包含以下内容： <%= javascript_include_tag :defaults %> <%= calendar_date_select_includes "blue" %>
6.  我尝试在我的观点中对其进行测试，但我总是以这个结尾：

> #<#: 0x3ec49a8> 的未定义方法 `calendar_date_select_tag'
> 
> 21: <%= link_to 'Edit', edit_order_path(order) %> 22:
> <%= link_to 'Destroy', order, :confirm => 'Are you sure?', :method => :delete %>
> 
> 23:
> 
> 24: <%= calendar_date_select_tag "e_date" %>
> 
> 25: <% 结束 %>
> 
> 26:

1.  我侵入了 lib/calendar_date_select.rb 并将 /public 更改为 Rails 3.2 的 /app/assets。由于某种原因，它无法识别 calendar_date_select 方法。

有人可以帮助我。提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-07T04:25:39.090

最好在 3.2 上使用 jquery 而不是使用第三方日历。这是其中一个链接

[jQuery Datepicker 演示](http://jqueryui.com/demos/datepicker/)

请也检查[此](http://railscasts.com/episodes/213-calendars?view=comments)链接。

# android - Android - 循环活动以重复 MediaPlayer

> ID：10051527
> 
> 赞同：1
> 
> 时间：2012-04-07T03:38:07.940
> 
> 标签：android, loops, android-activity, media-player, imagebutton

我正在尝试为更长的音频文件创建音板，但无法弄清楚如何在不关闭活动的情况下停止音频文件并重新启动它。假设每个音频文件长一分钟。如果我播放第一个音频文件 20 秒并开始下一个音频文件，第一个停止播放，第二个开始播放。但是，如果我再次单击第一个音频文件，第二个会停止播放，而第一个不会。我需要帮助。这让我发疯。

```
 bAudio1 = (ImageButton) findViewById(R.id.bAudio1);
    bAudio2 = (ImageButton) findViewById(R.id.bAudio2);

    mpAudio1 = MediaPlayer.create(this, R.raw.audio1);
    mpAudio2 = MediaPlayer.create(this, R.raw.audio2);

    bAudio1.setOnClickListener(new View.OnClickListener() {
            public void onClick(View v) {
                    if(mpAudio1.isPlaying()) {
                            mpAudio1.stop();
                    } else {
                            if(mpAudio2.isPlaying()) { mpAudio2.stop(); }
                            mpAudio1.start();
                    }
            }
    });

    bAudio2.setOnClickListener(new View.OnClickListener() {
            public void onClick(View v) {
                    if(mpAudio2.isPlaying()) {
                            mpAudio2.stop();
                    } else {
                            if(mpAudio1.isPlaying()) { mpAudio1.stop(); }
                            mpAudio2.start();
                    }
            }
    }); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-07T05:26:18.523

这对我有用：

```
public class ExampleActivity extends Activity implements OnClickListener {

private Button button1;
private Button button2;
private MediaPlayer mediaPlayer1;
private MediaPlayer mediaPlayer2;

@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.your_layout);

    button1 = (Button) findViewById(R.id.button1);
    button1.setOnClickListener(this);
    button2 = (Button) findViewById(R.id.button2);
    button2.setOnClickListener(this);
}

@Override
public void onClick(View v) {
    switch (v.getId()) {
    case R.id.button1:
        // play first audio clip and stop the second if playing
        if (mediaPlayer2 != null && mediaPlayer2.isPlaying()) {
            mediaPlayer2.stop();
            mediaPlayer2.release();
            mediaPlayer2 = null;
        }
        mediaPlayer1 = MediaPlayer.create(this, R.raw.song1);
        mediaPlayer1.start();
        break;
    case R.id.button2:
        // play second audio clip and stop the first if playing
        if (mediaPlayer1 != null && mediaPlayer1.isPlaying()) {
            mediaPlayer1.stop();
            mediaPlayer1.release();
            mediaPlayer1 = null;
        }
        mediaPlayer2 = MediaPlayer.create(this, R.raw.song2);
        mediaPlayer2.start();
        break;
    }
}

@Override
protected void onPause() {
    super.onPause();

    // stop the second if playing
    if (mediaPlayer2 != null && mediaPlayer2.isPlaying()) {
        mediaPlayer2.stop();
        mediaPlayer2.release();
        mediaPlayer2 = null;
    }

    // stop the first if playing
    if (mediaPlayer1 != null && mediaPlayer1.isPlaying()) {
        mediaPlayer1.stop();
        mediaPlayer1.release();
        mediaPlayer1 = null;
    }
} 
```

# javascript - 如何在每个表格行中附加表单及其文件输入？

> ID：10051528
> 
> 赞同：0
> 
> 时间：2012-04-07T03:38:25.940
> 
> 标签：javascript, jquery, html

我在[这里](http://jsfiddle.net/fPtMq/27/)有一个 Jsfiddle 应用程序。如果您在文本区域中输入问题，然后单击“添加问题”按钮，它会在下表中附加问题和问题编号（如果您愿意，可以测试几次）。

现在表格下方是一个文件输入，它以另一种形式存储。我的问题是，如何将包含文件输入的表单代码放入表中，以便每次添加问题时，它都会附加问题编号和问题，但它也会为每一行附加文件输入？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-07T03:59:05.760

您可以获取 File Input 的值，然后将其添加到行中：

```
var fileinput = $("#fileinput").val(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-07T04:03:20.873

你可以用你一直在做的同样的方式来做。只要记住将这些行相应地更改为您在服务器端所期望的任何内容，例如文件输入的名称。

```
var $image = $("<td class='image'></td>"); 
var $fileImage = '<p id="f1_upload_form"><br/><label>File: <input name="fileImage" type="file" id="fileImage" /></label></p>';
$image.append($fileImage);
$tr.append($image); 
```

现在您只需将上传按钮移动到表格的底部，仍然在包裹表格的表单内。

这是[一个工作 jsfiddle](http://jsfiddle.net/NujcX/)。

# objective-c - 在objective-c中解除锁定的正确方法是什么

> ID：10051530
> 
> 赞同：2
> 
> 时间：2012-04-07T03:39:11.403
> 
> 标签：objective-c, synchronization, locking, dealloc

我创建了一个 NSObject，唯一的目的是锁定。我的问题是，在我的 dealloc 中，我如何释放（从内存中）锁。我读过你不应该修改同步中的锁对象。但是在我的场景中，我认为从dealloc中的@synchronized完成到调用[_lockObject release]的时间之间，不同线程中的另一个方法可能会获取_lockObject。因此，如果在持有 _lockObject 时调用 [_lockObject release]，则可能会发生不好的事情。

在我的 dealloc 方法中处理锁的正确方法是什么？

```
-(id)initWithImageFileName:(NSString*)imageFileName
{
    if (self = [super init])
    {
        _imageFileName = [imageFileName retain];
        _loadBackgroundCalled = NO;
        _deallocing = NO;
        _lockObject = [[NSObject alloc]init];
    }

    return self;
}

-(void)dealloc
{
    _deallocing = YES;

    @synchronized(_lockObject)
    {
        ..... <releases some stuff>

    }

    [_lockObject release];
    _lockObject = nil;

    [_imageFileName release];
    _imageFileName = nil;

    [super dealloc];
}

-(void)loadBackground
{
    @synchronized(_lockObject)
    {
        if (!_deallocing)
        {
            if (!_loadBackgroundCalled) 
            {
                _loadBackgroundCalled = YES;
                ....
            } 
        }
    }
}

-(void)loadSprite:(XYTexture*)texture
{
    @synchronized(_lockObject)
    {
        ....
    }
}

-(void)unloadBackground
{
    @synchronized(_lockObject)
    {
        if (!_deallocing)
        {
            .....
            _loadBackgroundCalled = NO;
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-07T03:56:39.497

您的对象在被另一个对象或线程使用时不能被释放。换句话说，任何调用您的对象的线程都已经持有对所述对象的引用，并且该引用将阻止对象释放。

当您的`-dealloc`方法被执行时，您可以（并且必须）假设没有其他对象或线程持有对您的对象的引用，因此您不必担心并发性。

如果`-dealloc`在您的对象在单独的线程上执行时调用，则表明您的应用程序中存在与该特定对象无关的错误。您不能像`_deallocing`示例代码中那样通过设置标志来解决问题。

# java - ByteBuffer 作为类中的静态最终字段

> ID：10051531
> 
> 赞同：0
> 
> 时间：2012-04-07T03:39:25.237
> 
> 标签：java

对于经常需要存储在数据库中的列，我有某些值。以前，我一直将这些值缓存为`static final byte[]`类字段，但不幸`byte[]`的是不允许更简单的相等比较（检查另一个字节数组元素是否与这个相同）因此我正在考虑使用`static final ByteBuffer`类字段，因为这样可以让我更轻松相等比较*（我的数据库无论如何都需要将所有值转换为 ByteBuffer 以进行写入）*。

现在，由于我是 ByteBuffer 使用的新手，我只想问一下`static final ByteBuffer`我的类中的几个（<100）字段是否有任何问题，每个字段都包含一个长度为 2 的字节 []？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-07T04:21:27.563

你担心什么样的问题？缓冲区不是线程安全的......但不清楚您的使用需求是什么，因此这可能是也可能不是问题。ByteBuffer（和所有缓冲区）的源代码可供您查看。在一天结束时，它是一个`final byte[]`加了一些糖的东西。

# amazon-web-services - AWS EC2 弹性 IP 带宽使用情况和费用

> ID：10051533
> 
> 赞同：30
> 
> 时间：2012-04-07T03:39:38.143
> 
> 标签：amazon-web-services, amazon-ec2, amazon, bandwidth

我对弹性 IP 及其收费有一些疑问。一些博客说弹性 IP 会按你使用的带宽向你收费

> > 弹性 IP 地址**按带宽收费，**未附加到正在运行的实例时按小时计费
> 
> 来自 [http://things.zarate.org/scaling-a-single-ec2-instance-and-downsizing](http://things.zarate.org/scaling-a-single-ec2-instance-and-downsizing)

根据我在阅读了一些博客和文档后的理解，只有在实例**之间**使用弹性 IP 进行通信**并且**弹性 IP 在您的帐户上闲置而没有与您的实例关联时**，**您才会被收费

 ****> > 如果您使用公共或弹性 IP 地址在同一区域内的实例之间进行通信，则您需要支付区域数据传输费率（每 GB 输入/输出 0.01 美元）。
> 
> 来自 [http://www.cloudiquity.com/2009/02/using-amazon-ec2-public-ip-address-inside-ec2-network/](http://www.cloudiquity.com/2009/02/using-amazon-ec2-public-ip-address-inside-ec2-network/)

请参阅 AWS 计算器屏幕截图 -> [http://shareimage.org/images/lzjj3eull2ux0lo663fr.png](http://shareimage.org/images/lzjj3eull2ux0lo663fr.png)

所以我的困惑在于AWS是否对使用弹性IP的**任何类型**的流量请求（使用我的浏览器，SSH）收费？

因此，例如：我使用弹性 IP（例如 8.8.8.8）而不是像 ec2-xxx-xxx-xxx-xxx.compute-1.amazonaws.com 这样给出的公共 dns 名称 ssh 到我的实例，将此带宽注册为简单带宽输入/输出使用或公共/弹性 IP 带宽？

谢谢

* * *

## 回答 #1

> 赞同：82
> 
> 时间：2012-04-07T17:39:55.183

您应该将数据传输费用问题与弹性 IP 地址费用一分离，只要它们完全相互独立：

## 弹性 IP 地址

每个实例分配和使用一个[弹性 IP 地址](http://docs.amazonwebservices.com/AWSEC2/latest/UserGuide/using-instance-addressing.html#using-instance-addressing-eips)基本上是免费的，**除非***弹性 IP 地址*当前未与实例关联，请参阅[Amazon EC2 定价](http://aws.amazon.com/ec2/pricing/)页面上的*弹性 IP 地址*部分：

> *   **与正在运行的实例关联的一个弹性 IP 地址为 0.00 美元**
> *   每小时与正在运行的实例相关联的每个额外弹性 IP 地址按比例分配 0.005 USD
> *   **每个未与正在运行的实例关联的弹性 IP 地址按比例每小时 0.005 USD**
> *   每月前 100 次重新映射，每个弹性 IP 地址重新映射 0.00 USD
> *   每个弹性 IP 地址重映射 0.10 USD，每月额外重映射超过 100 个
>     
>     
>     
>     *[强调我的]*

相应的常见问题解答中解释了这种方法背后的基本原理。[为什么当我的弹性 IP 地址未与实例关联时要向我收费？](http://aws.amazon.com/ec2/faqs/#Why_am_I_charged_when_my_Elastic_IP_address_is_not_associated_with_an_instance)：

> 为了帮助确保我们的客户有效地使用弹性 IP 地址，当每个地址未与正在运行的实例关联时，我们会按小时收取少量费用。

## 数据传输

同样，关键方面在[Amazon EC2 定价](http://aws.amazon.com/ec2/pricing/)页面上的*数据传输*部分中进行了解释（并由一些常见问题解答详细说明）：

*您主要为Internet 数据传输*付费，即*从 Amazon EC2 “传入”和“传出”的数据*，具体不包括以下内容：

> Amazon EC2 与同一区域内的其他 Amazon Web Services 之间（即 Amazon EC2 美国西部和美国西部的 Amazon S3 之间）不收取数据传输费用。位于同一区域内不同可用区的 Amazon EC2 实例之间传输的数据将收取区域数据传输费用。在不同区域的 AWS 服务之间传输的数据将在传输双方按 Internet 数据传输收费。

### 警告

不过，需要注意的重要警告确实在该声明下方：

> **公共和弹性 IP 以及 Elastic Load Balancing 数据传输**
> 
> *   每 GB 输入/输出 0.01 美元 – 如果您选择使用 Amazon EC2 网络内的公共或弹性 IP 地址或弹性负载均衡器进行通信，即使实例位于同一可用区，您也需要支付区域数据传输费率。对于同一可用区内的数据传输，您可以通过尽可能使用私有 IP 轻松避免此费用（并获得更好的网络性能）。

### 补救

上述段落中没有提到的是 AWS DNS 基础设施的一个重要且非常有用的功能，请参阅[公共 IP 地址和外部 DNS 主机名](http://docs.aws.amazon.com/AWSEC2/latest/UserGuide/using-instance-addressing.html#concepts-public-addresses)：

> 我们为每个具有公共 IP 地址的实例提供外部 DNS 主机名。我们将外部 DNS 主机名解析为实例网络外部的实例公共 IP 地址，以及实例网络内的实例私有 IP 地址。

也就是说，当您在 Amazon EC2 网络内使用它时，它会将公共 DNS（例如`ec2-xxx-xxx-xxx-xxx.compute-1.amazonaws.com`）解析为*私有 IP 地址*，而当您在 Amazon EC2 网络之外使用它时，它会将其解析为*公共或弹性 IP 地址*。就像这样，您可以自动获得免费的可用*区数据传输*和降低费用的*区域数据传输*，例如，当您在 Amazon EC2 实例之间进行通信时，他们正在积极应用他们的建议，*始终使用内部地址 [这] 确保您的网络流量遵循最高带宽、最低成本和通过我们网络的最低​​延迟路径。*

如果您直接使用 IP 地址（即没有 DNS），这显然是行不通的，因此在 EC2 的上下文中通常最好避免这种情况和其他原因。****

# ruby-on-rails - Heroku 上的 SendGrid 失败

> ID：10051537
> 
> 赞同：7
> 
> 时间：2012-04-07T03:40:22.413
> 
> 标签：ruby-on-rails, ruby-on-rails-3.2

我为我的 heroku 应用程序设置了发送网格启动器。

我把它放在我的 config/environment.rb 中：

```
ActionMailer::Base.smtp_settings = {
  :user_name => ENV["SENDGRID_USERNAME"],
  :password => ENV["SENDGRID_PASSWORD"],
  :domain => "my-sites-domain.com",
  :address => "smtp.sendgrid.net",
  :port => 587,
  :authentication => :plain,
  :enable_starttls_auto => true
} 
```

我创建了这个类models/notifier.rb：

```
class Notifier < ActionMailer::Base

  def notify()
    mail( 
      :to => "my-email@gmail.com",
      :subject => "New Website Contact",
      :body => "body",
      :message => "message",
      :from => "website@my-sites-domain.com"
    )
  end

end 
```

我把它放在另一个控制器中发送电子邮件：

```
def contact
  Notifier.notify().deliver
  redirect_to("/", :notice => "We Have Received Your Request And Will Contact You Soon.")
end 
```

当我部署并尝试发送电子邮件时，我收到此错误：

**Net::SMTPAuthenticationError（535 身份验证失败：用户名/密码错误**

我已经完全设置了发送网格，它说我准备好发送电子邮件了。

我还跑去`heroku config --long`获取实际的密码和用户名并对其进行硬编码，但这仍然给了我同样的错误。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2021-01-21T05:22:32.390

RoR + SendGrid + Heroku：

我遇到了类似的问题，我一直收到这个错误 **Net::SMTPAuthenticationError (535 Authentication failed: Bad username / password** when I尝试发送电子邮件。

我试过

*   我在 sendgrid 上注册的用户名，以及
*   也是生成的一个heroku（当我委托插件时）。

答案很简单。

**不要**使用任何用户名。它是简单的文本`'apikey'`，密码使用您从仪表板获得的生成的 API 密钥。

更多在这里 # [https://support.sendgrid.com/hc/en-us](https://support.sendgrid.com/hc/en-us)

> **我的 SMTP 用户名和密码是什么？**
> 
> 我们建议使用“apikey”作为您的 SMTP 用户名并创建一个 API 密钥用于您的密码。欲了解更多信息，请点击此处。 [https://sendgrid.com/docs/for-developers/sending-email/integrating-with-the-smtp-api/](https://sendgrid.com/docs/for-developers/sending-email/integrating-with-the-smtp-api/)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-07T21:47:10.990

我曾尝试使用以下命令设置密码：

```
heroku config:add SENDGRID_PASSWORD=my-new-password 
```

但事实证明，这只更改了 heroku 存储为您的密码的内容，实际上并没有更改您的密码。执行此操作后，您也无法找回密码。

我必须做的是删除并重新添加 sendgrid 插件。

# android - 在安卓中使用网络服务

> ID：10051538
> 
> 赞同：0
> 
> 时间：2012-04-07T03:40:46.263
> 
> 标签：android, rest, soap

我有以下网站 [http://www.freewebservicesx.com/GoldSpotPrice.aspx](http://www.freewebservicesx.com/GoldSpotPrice.aspx)它提供了一个 web 服务 api。由于我对肥皂和休息非常陌生，所以我完全不知道如何调用此服务并在 android 中使用它。有人可以告诉我该怎么做。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-07T03:54:20.777

使用以下网址引用:::

[将 ksoap2 用于 android，并解析输出数据...](http://www.helloandroid.com/tutorials/using-ksoap2-android-and-parsing-output-data)

[ksoap2-android - HowToUse.wiki .....](http://code.google.com/p/ksoap2-android/wiki/HowToUse)

[ksoap2-android](http://code.google.com/p/ksoap2-android/)

使用这个[LINK](http://android-devblog.blogspot.in/2010/06/soap-on-android.html)它有一个适合您要求的样本。

也[链接](https://stackoverflow.com/questions/10051762/android-webservice-access-error)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-07T03:55:50.127

您可以使用`HttpURLConnection`HttpClient 或 HttpClient 发出 HTTP 请求。`HttpClient`用于 RESTful Web 服务的示例：

```
HttpClient httpClient = new DefaultHttpClient();
HttpGet httpGet = new HttpGet("http://www.mywebsite.com/webservice");
HttpResponse response = httpClient.execute(httpGet);
StatusLine statusLine = response.getStatusLine();
if (statusLine.getStatusCode() == HttpStatus.SC_OK) {
    HttpEntity entity = response.getEntity();
    ByteArrayOutputStream out = new ByteArrayOutputStream();
    entity.writeTo(out);
    out.close();
    String responseStr = out.toString();
    // process response
} else {
    // handle bad response
} 
```

否则，如果您使用的是 SOAP Web 服务，我建议您使用[ksoap2](http://code.google.com/p/ksoap2-android/)

# iphone - 如何使用一个动作循环播放多个声音？

> ID：10051541
> 
> 赞同：0
> 
> 时间：2012-04-07T03:41:49.073
> 
> 标签：iphone, ios, cocoa-touch, avaudioplayer

现在，我从一个动作、按钮按下、加速度计等播放单一声音。

我想知道如何从用户启动的单个操作中循环播放多个声音（我的项目中使用了 3 个声音）。

我目前正在使用下面显示的代码，它的目的是为每个用户操作播放单个声音。我之前没有在项目中使用过 NSArray，所以如果您包含它，请包含任何详细信息。

```
NSURL *url = [NSURL fileURLWithPath: [NSString stringWithFormat:@"%@/Jet.wav", [[NSBundle mainBundle] resourcePath]]];

        NSError *error;
        audioPlayer = [[AVAudioPlayer alloc] initWithContentsOfURL:url error:&error];
        audioPlayer.numberOfLoops = 0;

        if (audioPlayer == nil)
            NSLog(@"%@", [error description]);
        else 
            [audioPlayer play]; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-07T04:17:49.320

如果您只使用 3 个声音，那么您可以只使用`NSString`'s 的 C 数组，但如果您需要动态数量的声音，那么您应该改为使用`NSArray`

```
// .m
NSString *MySounds[3] = {
    @"sound1.wav",
    @"sound2.wav",
    @"sound3.wav",
};

@implementation ... 
```

然后在您的方法中，您需要添加一些额外的逻辑

```
- (void)playSound;
{
    NSString *path = [NSString stringWithFormat:@"%@/%@", [[NSBundle mainBundle] resourcePath], [self nextSoundName]];

    NSURL *url = [NSURL fileURLWithPath:path];

    NSError *error;
    audioPlayer = [[AVAudioPlayer alloc] initWithContentsOfURL:url error:&error];
    audioPlayer.numberOfLoops = 0;

    if (audioPlayer == nil) {
        NSLog(@"%@", [error description]);
    } else {
        [audioPlayer play];
    }
}

- (NSString *)nextSoundName;
{
    static NSInteger currentIndex = -1;

    if (++currentIndex > 2) {
        currentIndex = 0;
    }

    return MySounds[currentIndex];
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-07T04:23:05.237

```
-(IBAction)playSound:(UIButton *)sender{
    NSURL *url = [NSURL fileURLWithPath: [NSString stringWithFormat:@"%@/%@", [[NSBundle mainBundle] resourcePath], [MySounds objectAtIndex:[sender tag]]]];
    NSError *error;
    audioPlayer = [[AVAudioPlayer alloc] initWithContentsOfURL:url error:&error];
    audioPlayer.numberOfLoops = 0;

    if (audioPlayer == nil)
        NSLog(@"%@", [error description]);
    else 
        [audioPlayer play];
} 
```

在这里，您可以对所有按钮使用单个操作按钮。只需将标签设置为按钮。使用 Paul 所描述的数组

# c# - C#如何使用Windows窗体设置带有上下文菜单的预设？

> ID：10051542
> 
> 赞同：1
> 
> 时间：2012-04-07T03:42:22.130
> 
> 标签：c#, visual-studio-2010, visual-studio-2008, list, contextmenu

我正在尝试在学习 C# 时做一些新的事情。我最近发布了一个与直接设置和填充上下文菜单类似的问题。现在我已经完成了，我发现自己无法获得所需的执行。

我正在创建一个用户定义的快速访问列表。它只是一个名称和 IP 地址。

我正在从 xml 文档填充列表并通过以下方式添加到上下文菜单：

```
ToolStripMenuItem.DropDownItems.Add(string name, image, eventargs onClick) 
```

我被困的地方是试图弄清楚如何告诉点击事件使用什么 IP。我知道在方法参数中我可以通过向函数添加另一个参数来传递 IP 地址，例如：

```
doSomething("Hello World");

  void doSomething(cmd)
{
 messageBox.Show(cmd);
} 
```

如何让我的变量菜单选项为名称指明正确的 IP 地址？我假设如果我可以使用正确的 IP，那么我也可以使用相同的方法来使用密码。所以我的代码看起来像：

```
 private void addToolStripMenuItem_Click(object sender, EventArgs e)
        {
         ...
          foreach(xml node in xml doc)
           {
            Room r = new Room();
            r.Name =xNode.SelectSingleNode("Name").InnerText;
            r.IP = xNode.SelectSingleNode("IP").InnerText;
            r.passwrd=xNode.SelectSingleNode("Pass").InnerText;
            locations.add(r);
            presetsToolStripMenuItem.DropDownItems.Add(r.Name, null, disp);
            }    
        }
 void disp(object sender, EventArgs e)
        {
            MessageBox.Show(r.Name's IP address);
            MessageBox.Show(r.Name's password);
        } 
```

我不反对使用另一种方法来做到这一点。这正是我能找到的最简单的。我只是想确保它保持简单并且上下文菜单/列表是从 xml 文档中填充的。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-07T04:10:03.183

通过使用 DropDownItem 的 Tag 属性，这是一种略显丑陋的方法。

使用您的代码：

```
var item = new ToolStripMenuItem(string name, image, eventargs onClick);
item.Tag = "your.ip.address";
ToolStripMenuItem.DropDownItems.Add(item) 
```

然后，

```
private void addToolStripMenuItem_Click(object sender, EventArgs e)
        {
            var item = sender as ToolStripMenuItem;
            Room r = new Room();
            r.Name ="Name"; 
            r.IP = item.Tag.ToString();
            r.passwrd="Password";

            presetsToolStripMenuItem.DropDownItems.Add(r.Name, null, disp);

        } 
```

**另一种可能的解决方案：**

我不确定你的类是如何布局的，但你可能想要一个单独的查找类来存储 Name->IP 的映射。然后做这样的事情，

```
var item = sender as ToolStripMenuItem;
IPLookuper.GetIP(item.Text);//.Text corresponds to name in  "ToolStripMenuItem(string name,..." 
```

查找很容易，只需将项目放入字典中即可。

**第三次编辑**

因为你知道调用 disp 方法的类型，你可以这样想，

```
 void disp(ToolStripMenuItem sender, EventArgs e)
     {
     var ip = sender.Tag.ToString();
     //Lookup the name/password/whatever based on the IP.
     MessageBox.Show(r.Name's IP address);
     MessageBox.Show(r.Name's password);

     } 
```

sender 对象就是触发事件的任何类，所以如果你知道它是什么类型，你可以强制转换它。

由于您的实际代码使用“对象发送者”，因此您只需要自己进行转换。

```
 void disp(object sender, EventArgs e)
     {
     var item = sender as ToolStripMenuItem;
     var ip = item.Tag.ToString();
     //Lookup the name/password/whatever based on the IP.
     MessageBox.Show(r.Name's IP address);
     MessageBox.Show(r.Name's password);

     } 
```

# php - Prev() 和 next() while 循环遍历 PHP 中的对象集合

> ID：10051543
> 
> 赞同：0
> 
> 时间：2012-04-07T03:42:22.707
> 
> 标签：php, object, collections

所以我们都知道，当使用 foreach 遍历 PHP 数组时，可以使用 prev() 访问上一个索引，使用 next() 访问下一个索引。就我而言，我正在遍历一组对象并在我的编程块中呈现相应的属性。

现在我需要将当前对象的属性与前一个对象的属性进行比较。如果它是一个数组，基本上 prev() 就足够了，但我在海上试图对 PHP 做同样的事情。

请给点建议！

谢谢， 帕里加特

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-07T06:35:29.163

```
$old = null;
foreach ( $objects as $object ) {
    if ( $old && $old->property == $object->property ) {
        foo();
    } else {
        bar();
    }
    $old = $object;
} 
```

# java - Java BufferedReader 返回奇怪的字符

> ID：10051544
> 
> 赞同：2
> 
> 时间：2012-04-07T03:42:42.670
> 
> 标签：java, character, bufferedreader

当我运行这个程序时，我输入用户名 as`"dcole"`和密码`"test"`，但是当我输入它们时，它们返回`"ÿûÿû ÿûÿû'ÿýÿûÿýdcole"`and `"ÿþÿþ ÿþÿþ'ÿütest"`。这是代码：

```
clientoutput.write("Please enter your username: ".getBytes("UTF-8"));
clientoutput.flush();

String username = clientinput.readLine();
out("Client " + clientip + " logged in as " + username);

String askforpass = "Please enter the password for " + username + ": ";
clientoutput.write(askforpass.getBytes());
clientoutput.flush();

String password = clientinput.readLine();

out(password); 
```

安慰：

```
Client connected with the IP /127.0.0.1
Client /127.0.0.1 logged in as ÿûÿû ÿûÿû'ÿýÿûÿýdcole ÿþÿþ ÿþÿþ'ÿütest 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-07T03:45:59.303

也许您正在使用带有错误字符集的 BufferedReader。

看[这里](http://docs.oracle.com/javase/1.4.2/docs/api/java/io/InputStreamReader.html)，当您实例化新的 InputStreamReader 时，您可以定义字符集。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-07T04:23:08.510

如果输入流是纯UTF-8，那么“dcole”和“test”就不太可能出现乱码。（如果您使用 Latin-1 或 ASCII 解码字节以及许多其他字符集，它们会很好。）您确实看到了预期的字符，但前面有额外的垃圾。

我怀疑客户端实际上是在用户名和密码之前加上了一些额外的字节。换句话说，它不是发送简单的文本——它是在一些你没有描述的协议中发送消息。

事实上，我认为这个 SO 问题可能会解释你的问题： [连接到我的程序时的奇怪行为](https://stackoverflow.com/questions/3208993/odd-behavior-when-connecting-to-my-program)

# html - 在 div 中换行不带空格的单词

> ID：10051547
> 
> 赞同：3
> 
> 时间：2012-04-07T03:43:29.883
> 
> 标签：html, css, whitespace

我有一个固定宽度的 div，300 像素。我有用户输入的文本需要进入 div。问题是，人们是否将“aaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaa 句放入 div 中。这会导致文本超出 div 的宽度。我想要的是即使单词中没有空格也可以换行。有没有办法用css做到这一点？我尝试了 css`white-space`属性，但它不起作用。

如果有人有正确方向的解决方案或观点，那就太好了。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-04-07T03:49:26.923

尝试这个：

```
word-wrap:break-word; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-07T04:32:23.767

以目前的技术水平，没有办法正确地做到这一点。换行规则很复杂，并且因语言而异。

任意使用`word-wrap:break-word`或使用它的一些变体会破坏一串字符，几乎肯定会破坏语言规则并使人们感到困惑。

# android - 如何在 android 活动中显示今天的日期？

> ID：10051549
> 
> 赞同：0
> 
> 时间：2012-04-07T03:43:51.993
> 
> 标签：android, date

我目前正在为我的专业课程做项目。我正在实施数字日记。我将有一个日记页（可能是多行文本框）和顶部的 TextView 以显示当前日期（没有时间）。如何显示包含今天日期的非可编辑文本框。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-07T04:35:38.077

这很简单

```
 Date dt = new Date();
        int date = dt.getDate();
        int month = dt.getMonth()+1;
        int year = dt.getYear();
        year += 1900;
        int day = dt.getDay();
        String[] days = { "Sunday", "Monday", "Tuesday","WednesDay", "Thursday", "Friday", "Saterday" };
        String curDate = date + "/" + month + "/" + year + " " + days[day]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-07T03:50:07.597

为了获取当前日期和时间，请使用以下链接并为了使其在 XML 文件中不可编辑，使其可编辑 = false 也可聚焦 = false。

[链接1](https://stackoverflow.com/questions/5369682/android-get-current-time-and-date)

[链接2](http://developer.android.com/reference/java/util/Date.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-05T07:05:52.297

使用此代码：

```
String mydate = java.text.DateFormat.getDateTimeInstance().format(Calendar.getInstance().getTime()); 
```

它将打印：2013 年 2 月 5 日，下午 12:35:46

# eclipse - 为 Eclipse 3.7 安装 jboss jsf 3.3 工具（没有其他工具）会破坏我在 jsf 2 xhtml 文件中的块注释快捷方式 ctrl+shift+L

> ID：10051551
> 
> 赞同：0
> 
> 时间：2012-04-07T03:44:17.183
> 
> 标签：eclipse, jsf, jboss

在我安装 JBoss 工具之前它可以工作，但如果我卸载 jboss 工具，它仍然会损坏。这让我疯狂。

除此之外，当我在我的 xhtml 文件中输入未定义的标签时，Eclipse 不会抛出警告或错误消息。它会标记未定义的 html 标签，例如 ，但可以使用 . 这与 Jboss 无关。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-07T16:01:55.770

这样做怎么样：`Windows->Preferences->General->Keys`，并将`Ctrl + Shift + C`切换评论的“”更改为“ `Ctrl + Shift + L`”？（为了更容易找到快捷方式，您可以按绑定列排序快捷方式表...）

# eclipse - 用于自动导入 java 类的 Eclipse 插件

> ID：10051556
> 
> 赞同：0
> 
> 时间：2012-04-07T03:44:52.133
> 
> 标签：eclipse, plugins

eclipse中是否有一个插件，当你输入'new JavaClass'时，它会像'import java.class.JavaClass'一样自动导入，就像在FlashDevelop中一样，当你输入'new MovieClip'时，它会自动输入'import flash.display .MovieClip' ?

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-07T21:37:35.647

当您键入没有包的类名时，通过按 Ctrl+Space（在 Mac 上，使用 Command+Space）调用 Content Assist 功能，Eclipse 将通过添加导入语句来自动完成它。您还可以随时使用“组织导入”快捷键（Ctrl+Shift+o 或 Command+Shift+o）来完成和组织导入。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-07T03:49:08.300

如果将依赖库位置添加到 Eclipse，则 Eclipse 默认会执行此操作。不需要单独的插件。

# linux - Linux 内核使用哪种 Unicode 编码？

> ID：10051559
> 
> 赞同：3
> 
> 时间：2012-04-07T03:45:11.590
> 
> 标签：linux, unicode, character-encoding

我了解到 Windows 在 x86/x64 系统上使用 UTF-16LE。Linux 呢？它使用哪种 Unicode 编码：UTF-16LE 还是 UTF-32？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-07T03:50:26.250

通常 Unix 更喜欢 UTF-8。该[文档](ftp://ftp.kernel.org/pub/linux/docs/lanana/unicode/unicode.txt)建议 Linux 内核也这样做。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-07T04:01:01.293

[http://www.xsquawkbox.net/xpsdk/mediawiki/Unicode](http://www.xsquawkbox.net/xpsdk/mediawiki/Unicode)说

> ### Linux
> 
> 在 Linux 上，UTF8 是所有字符串的“本机”编码，是系统例程（如`fopen()`.

所以 Linux在这方面就像[计划 9 ，以及](http://en.wikipedia.org/wiki/Plan_9_from_Bell_Labs#Unicode)[Linux 和 Windows 下的 boost::filesystem 和 Unicode](https://stackoverflow.com/questions/5307033/boostfilesystem-and-unicode-under-linux-and-windows)注释

> 在我看来，`boost::filesystem`Linux 下没有提供宽字符串 in `path::native()`，尽管`boost::filesystem::path`已经用宽字符串进行了初始化。

这将排除 UTF-16 和 UTF-32，因为它们的所有变体都需要宽字符支持——字符串中允许 NUL 字节。

# java - 在没有抗锯齿/模糊的情况下拉伸 jMonkey 纹理

> ID：10051562
> 
> 赞同：2
> 
> 时间：2012-04-07T03:45:43.323
> 
> 标签：java, textures, jmonkeyengine, antialiasing

在 JME3 中，当从图像加载纹理时，它会将其拉伸到我放置的四边形的大小。但它也模糊了它，我不想要这个（我正在制作 Minecraft 风格的图形），那么我该如何阻止它呢？

另外，我认为它可能与 com.jme3.texture.Texture.MinFilter 有关系。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-07T03:59:59.963

好的，所以我找到了答案。您想将纹理的 MagFilter 设置为`Texture.MagFilter.Nearest`; 默认情况下`Texture.MagFilter.Bilinear`，这就是导致模糊的原因。凉爽的。

# ios - 虚假 Game Center 玩家断开连接消息

> ID：10051564
> 
> 赞同：4
> 
> 时间：2012-04-07T03:46:07.343
> 
> 标签：ios, game-center, gamekit

我正在完成对支持 4 人 Game Center 的游戏的更新，但我突然遇到了以前版本中没有的虚假玩家断开连接消息的问题。更奇怪的是，并非所有连接到匹配项的设备都在接收消息。一台设备会认为播放器已断开连接，但仍有消息从（假定）断开连接的播放器传递给其他播放器。

这些消息通过 match:player:didChangeState: 消息直接来自匹配实例，所以我认为它不会在我的代码中出现任何内容，但它没有多大意义。游戏可以毫无问题地进行 10 分钟以上，一旦出现一个错误的断开连接，其余的很快就会消失。

我已经用我能想到的每个搜索词搜索了网络，看看其他人是否看到过这种行为，并且它似乎是独一无二的。它必须在我的代码中，但我什至想不出如何深入了解它。

任何帮助将不胜感激，卡梅伦

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-03-12T23:15:30.163

确保调用这个：

```
 //Finalize
    [[GKMatchmaker sharedMatchmaker] finishMatchmakingForMatch:match]; 
```

在所有玩家都连接之后。我遇到了这个问题，它似乎已经阻止了我的情况下的虚假断开连接。

# django - views.py 中的 django 基本用户验证

> ID：10051567
> 
> 赞同：0
> 
> 时间：2012-04-07T03:46:40.147
> 
> 标签：django, django-authentication, django-validation

我正在使用此代码来验证我的`views.py`.

```
@login_required
def my_view(request, username):
    try:
        user = User.objects.get(username=username)
    except User.DoesNotExist:
        raise Http404(u'User not Found')
    if user == request.user and request.user.is_authenticated():
        variables = RequestContext(request, {})
        return render_to_response('my_template.html', variables) 
```

还有另一种方法（即更少的代码）来验证用户，还是我需要把它放在每个视图中？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-07T04:16:41.943

`request.user`with`login_required` ***是***当前登录的用户，不需要再通过用户名查看，也就不需要查看`is_authenticated`. 如果您只想为不同的用户类型呈现具有不同逻辑的页面，请尝试下面的代码，如果没有，请使用`request.user`. 此外，使用`get_object_or_404`和`render`快捷方式。

```
from django.shortcuts import get_object_or_404, render
@login_required
def my_view(request, username):
    if username == request.user.username:
        return render(request, 'my_template.html', {})
    # render the page of user who is not request.user
    user = get_object_or_404(User, username=username)
    # ... 
```

# php - 用 PHP 中的新内容替换旧的 div 内容

> ID：10051569
> 
> 赞同：-1
> 
> 时间：2012-04-07T03:46:52.497
> 
> 标签：php, jquery, ajax

我正在开发其中 XML 是我的播放列表的视频播放器。这是代码：

```
$crxml=file_get_contents('http://spoti.com/latest.xml/?lang=en');    
$rss=new SimpleXMLElement($crxml);
$playlistitem=1;
   foreach($rss->channel->item as $post)
    {   
    if($playlistitem<=8)
    {    
    echo '<ul>';
    echo '<li class="xtitle">'.$post->title.'</li>';
    echo '<li class="xdesc">'.$post->description.'</li>';    
    $dc=$post->children('http://search.yahoo.com/mrss/');
    echo '<li class="xthumb">'.$dc->thumbnail->attributes()->url.'</li>';
    echo '<li class="xpreview">'.$dc->thumbnail->attributes()->url.'</li>'; 
    echo '<li class="xsources_mp4">'.$dc->content->attributes()->url.'</li>';
    $dc->content->attributes()->url=preg_replace('/.mp4/','.webm',$dc->content-attributes()->url);
     echo '<li class="xsources_webm">'.$dc->content->attributes()->url.'</li>';
     echo '</ul>';
    $playlistitem++;
     } 
```

当用户单击语言时，我想用新内容替换旧内容所有条目都替换为新条目

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-07T04:08:17.837

如果我没记错的话，一旦页面加载，PHP 就完成了它的工作，不能再做更多了。
如果您想在页面加载后更改某些内容，您应该尝试类似 jquery：

```
<script>
  $("Class_or_ID_of_button").click(function () {
  $('div_or_span_to_change').html('this will appear once you click the button');
});
</script> 
```

不过我不是专家，所以我需要更多信息才能给你一个准确的代码来帮助你......希望这会有所帮助！

* * *

[http://api.jquery.com/click/](http://api.jquery.com/click/)
[http://api.jquery.com/html/](http://api.jquery.com/html/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-12T17:04:06.017

```
$('#lang').change(function() {
$.post('player_xml.php', {lang: $(this).val()}, function(data) {
    $('#xplaylist').html(data);

        $lang =strtolower( issset($_GET['lang'] ) ? $_GET['lang']:'en');
     $crxml=file_get_contents('http://spoti.com/latest.xml/?lang='. $lang); 
    $rss=new SimpleXMLElement($crxml);
      $playlistitem=1;
      foreach($rss->channel->item as $post)       
     if($playlistitem<=8)        
echo '<ul>';
echo '<li class="xtitle">'.$post->title.'</li>';
echo '<li class="xdesc">'.$post->description.'</li>';    
$dc=$post->children('http://search.yahoo.com/mrss/');
echo '<li class="xthumb">'.$dc->thumbnail->attributes()->url.'</li>';
echo '<li class="xpreview">'.$dc->thumbnail->attributes()->url.'</li>'; 
echo '<li class="xsources_mp4">'.$dc->content->attributes()->url.'</li>';
$dc->content->attributes()->url=preg_replace('/.mp4/','.webm',$dc->content-attributes()->url);
 echo '<li class="xsources_webm">'.$dc->content->attributes()->url.'</li>';
 echo '</ul>';
$playlistitem++; 
```

# php - 使用 LIKE 和排序进行 PHP 修剪和 SQL 查询

> ID：10051570
> 
> 赞同：0
> 
> 时间：2012-04-07T03:46:57.767
> 
> 标签：php, mysql, network-programming, network-monitoring

我进入网络，所以你看到的数据是交换机/端口信息。

**问题：**

我只想要 SQL 查询的“ge-0/0/x”部分，我希望它按“ge-0/0/x”排序，我只想“选择不同”的“ge-0/0” /x" 部分（只有 1 个端口，如果你关注我的话）。

由于某些结果上有一些点，我发现我可以用`rtrim`它来摆脱它们。结果中也有一些破折号（-），因此非常感谢任何帮助摆脱它们的帮助。

**PHP：**

```
// "nodes" is the number of swithes, thus the ge-[node].
$host_name = 'switch_host_name';
$nodes = 2;
for($node=0;$node<$nodes;$node++){
    $ge = '%: ge-'.$node.'%';
    $portquery = mysql_query("SELECT service_description FROM service WHERE host_name='$host_name' AND service_description LIKE '$ge'") or die(mysql_error());
    while($portarray = mysql_fetch_array($portquery)){
        $port = substr($portarray['service_description'],8,10);
        echo '<div id="'.$port.'_'.$host_name.'">'.$port.'</div>';
    }
    echo '<br />';
} 
```

**SQL 示例：**

```
+-------------------+----------------------------------+
| host_name         | service_description              |
+-------------------+----------------------------------+
| switch_host_name  | IF 151: ge-0/0/28.0 - Status     |
| switch_host_name  | IF 153: ge-0/0/29 - Status       |
| switch_host_name  | IF 155: ge-0/0/3 - Description   |
| switch_host_name  | IF 155: ge-0/0/3 - Status        |
| switch_host_name  | IF 155: ge-0/0/3.0 - Traffic     |
| switch_host_name  | IF 195: ge-0/0/5 - Description   |
| switch_host_name  | IF 195: ge-0/0/5 - Status        |
| switch_host_name  | IF 195: ge-0/0/5.0 - Traffic     |
+-------------------+----------------------------------+ 
```

非常感谢您可以指出我的任何线索、链接、指南、tuts。当然，解决方案会很棒！

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-07T05:28:29.217

如果您有许多这些记录，我建议您在将记录插入数据库时​​按摩字符串以将相关部分提取到专用数据库字段中。虽然我知道这是设备配置数据，但在字段中存储格式化数据会否定拥有关系数据库的目的，正如您所发现的那样。进行排序/过滤变得非常困难。

话虽如此，您可能可以在查询中执行一些基本的字符串操作来提取您的 ge 数据：

```
SELECT
    @start := LOCATE('ge-', service_description),
    @end := LOCATE(' - ', service_description),
    SUBSTR(service_description, @start, @end - @start) AS ge
FROM ...
GROUP BY ge
ORDER BY ge 
```

这假定该字段中的每条记录只有一个`ge-`和一个`-`字符串。

# asp.net-mvc - MVC json 与 ActionLink

> ID：10051575
> 
> 赞同：1
> 
> 时间：2012-04-07T03:48:18.423
> 
> 标签：asp.net-mvc, json

编程新手。我正在尝试从 MVC 打印 PDF，如果我使用 Action Link 效果很好，这是我的代码：

```
 <%= Html.ActionLink("Print","GeneratePdf","Home", new { fc="Test" },null) %>

   public ActionResult GeneratePdf(string fc)
        {
            Document document = new Document();
            MemoryStream workStream = new MemoryStream();
            PdfWriter.GetInstance(document, workStream);
            document.Open();
            document.Add(new iTextSharp.text.Paragraph("\n\n"));
            // need to add the user name
            iTextSharp.text.Paragraph p = new iTextSharp.text.Paragraph("Name: " + fc);
            p.Alignment = 1;
            document.Add(p);

            document.Close();
            byte[] byteInfo = workStream.ToArray();
            SendPdfToBrowser(byteInfo);
            return null;
        }

   public void SendPdfToBrowser(byte[] buf)
        {
            string filename = "Certificate.pdf";

            // Prepare the headers.
            Response.ClearContent();
            Response.ClearHeaders();
            Response.ContentType = "application/pdf";
            Response.AddHeader("Content-Disposition", "attachment; filename=" + filename);

            // Write the PDF data.
            Response.BinaryWrite(buf);

            // Flush the buffer to the browser.
            Response.End();
            Response.Flush();
            Response.Clear();
        } 
```

我需要使用Json，代码如下：

```
function PrintChart(fc) {

                 var fc = "Test";
                 var url = '<%= Url.Content("~/Home/GeneratePdf") %>';
                 $.post(url, { fc: fc },
            function (content) {
                if (content != null) { 5 }
            }, "json");

 <input type="button" onclick="PrintChart();" value="Print" /> 
```

我没有收到任何错误，但它不会生成 PDF 文件。提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-07T09:43:57.850

您不能使用 Ajax 下载文件。jQuery $.post() 将期望来自服务器的响应是文本。以Ajax方式下载文件，一般的做法是使用隐藏的iframe，并将iframe的src设置为文件的URL

```
<iframe id="hiddenFrame" src="" style="display:none; visibility:hidden;"></iframe> 
```

在 PrintChart() 创建包含数据的 URL 作为查询字符串并设置 iframe 的 src：

```
 function PrintChart(fc) {

    var fc = "Test";
    var url = '<%= Url.Content("~/Home/GeneratePdf") %>';
    url += "?fc="+fc;

    $('#hiddenFrame').attr('src', url);
} 
```

# linux - 如何从 Haskell 为所有用户设置文件权限

> ID：10051582
> 
> 赞同：2
> 
> 时间：2012-04-07T03:49:38.583
> 
> 标签：linux, haskell, file-io

我正在努力实现同样的目标`sudo chmod 755 myfile`。

我在[System.Directory](http://www.haskell.org/ghc/docs/6.12.2/html/libraries/directory-1.0.1.1/System-Directory.html#v%3asetPermissions)`getPermissions`中找到了and ，但这仅允许我为当前用户（在我的情况下为 root）设置权限。`setPermissions`

是否存在适用于所有用户的等效功能，或者是使用`rawSystem`调用的唯一可行选项，我认为这有点不干净？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-07T05:08:44.960

[`System.Posix.Files`](http://hackage.haskell.org/packages/archive/unix/latest/doc/html/System-Posix-Files.html)在标准 unix 包中具有 POSIX 文件权限支持。`System.Directory`不提供此类功能的原因是为了便携性。

# javascript - 如何注销显示正确的状态？

> ID：10051586
> 
> 赞同：1
> 
> 时间：2012-04-07T03:50:20.087
> 
> 标签：javascript

我有一个会员网站。每个网页的标题栏都会有以下 2 个选项，具体取决于用户是否登录：

选项 1）如果用户已登录，它将具有以下 2 个链接：

“user12345” “注销”

选项2）如果用户退出，以上2个链接将变为：

“登录” “注册”

该页面有一些 Javascript 代码将检查用户 cookie。如果用户 cookie 存在，则显示选项 1)，否则显示选项 2)。Javascript没有问题。它正确显示了上述选项。

这就是问题所在。我使用服务器端脚本（perl）来执行“注销”功能。该脚本将删除 cookie 并重新定向回原始页面。我希望页面会显示选项 2)，但事实并非如此。它仍然显示选项 1)。需要刷新页面以显示选项 2)。这很令人困惑，因为用户单击了注销链接，但是当他们返回页面时，他们仍然在那里看到他们的用户名。他们需要刷新 Web 浏览器才能看到他们已注销。

选项 2) 应在单击“注销”链接后显示在页面上。但我根本不知道如何成功完成这项工作。

请提供您的专业知识来解决此问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-07T04:04:58.443

首先，我建议将问题分解，以便您可以测试与页面重定向分开的注销功能。

*   修改您的 Perl 脚本，以便注销不会重定向。

*   登录，然后单击注销。

*   使用可让您查看 cookie 的 Chrome 或 Firefox 扩展程序。确认 cookie 已被删除。

如果一切都在这里检查，我建议您重新连接重定向并重复上述步骤：

*   当您的页面重定向并且您看不到登录名时 | 注册按钮，检查cookie是否被删除，如果出现cookie，则可能是重定向后代码中缓存了一些东西。

作为替代方案，您可以使用 document.referrer 在您的 JavaScript 代码中捕获您的注销 URL，并使用它来确定您是否应该显示登录 | 注册按钮。例如：

```
if(document.referrer = "/logout" || /* existing check of cookie goes here */) {
    // show login | register
} else {
    // show username, etc.
} 
```

如果可能的话，可用性方面的最佳解决方案是将您的注销 url 转换为 AJAX 调用，这样您就不需要重新加载页面。这将比上述解决方案更好，因为您可以检查响应对象以确定注销操作是否成功。如果是这样，您可以用正确的文本动态替换标题栏。

使用[jQuery.ajax](http://api.jquery.com/jQuery.ajax/)的 AJAX 示例如下：

```
$.ajax({ 
    url: '/logout',
    success: function(data) {
        if(data.logout == true) {
            // user is logged out
        }
    },
    error: function(jqXHR, textStatus, errorThrown) {
        /* problem with logout */
    }
}); 
```

如果成功，您的 perl 注销脚本将需要将 JSON 对象作为字符串返回：

```
{"logout":true} 
```

还有其他方法可以进行 AJAX 调用和向/从服务器传输数据，您可以在 Stackoverflow 上搜索“AJAX”找到这些示例。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-09T01:45:44.237

> BlockquoteFirst，我建议分解问题，以便您可以测试与页面重定向分开的注销功能......

我在不使用 AJAX 调用的情况下解决了这个问题。

# ios - Node.js / Express 忽略 iOS JSON POST

> ID：10051592
> 
> 赞同：1
> 
> 时间：2012-04-07T03:53:10.040
> 
> 标签：ios, node.js, post, express

我正在尝试将数据从 iOS 应用程序发布到 Node.js/Express。我无法让它工作；当我从我的应用程序尝试时，Node/Express 似乎忽略了我的请求。但是，如果我导航到我试图在 Web 浏览器中发布的相同 URL，Node/Express 会响应。

这是我处理传入请求的 Node/Express 代码：

```
var express = require('express');

var app = express.createServer();
app.configure(function(){
  app.use(express.bodyParser());
});

app.get('/', function(req, res) {
        res.write('nothing to see here...');
        res.end();
});

app.get('/test', function(req, res) {
        console.log('handling post!');
        console.log(JSON.stringify(req.body));
        res.end();
}); 
```

这就是我尝试将 JSON 发布到节点的方式：

```
// Create request data.
NSString* jsonData = @"{\"test\" : \"someMoreTest\"}";
NSData* requestData = [jsonData dataUsingEncoding:NSUTF8StringEncoding];

// Create URL to POST jsonData to.
NSString* urlString = @"http://www.mysite.com/test";
NSURL* url = [NSURL URLWithString:urlString];

// Create request.
NSMutableURLRequest* request = [NSMutableURLRequest requestWithURL:url]; 
[request setHTTPMethod:@"POST"];
[request setValue:@"application/json" forHTTPHeaderField:@"Content-Type"];
[request setHTTPBody: requestData];

// Send request synchronously.
NSURLResponse* response = [[NSURLResponse alloc] init];
NSError* error = nil;
[NSURLConnection sendSynchronousRequest:request returningResponse:&response error:&error];

// Check result.    
if (error != nil)
{
    NSLog(@"submitted request!");
}
else {
    NSString* errorLogFormat = @"request failed, error: %@";
    NSLog(errorLogFormat, error);        
} 
```

正如我之前提到的，如果我在浏览器中导航到[http://www.mysite.com/test](http://www.mysite.com/test)，我的 Node 控制台输出如下：
`handling post!`
`{}`

但是，当我尝试从我的 iOS 应用程序发帖时，我没有得到任何控制台应用程序 - 就好像 Node 从未看到传入的 POST 请求一样。更令人费解的是——我在 iOS 应用程序端无法获得任何错误数据——错误是`nil`. 有什么想法我在这里做错了吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-07T05:54:41.963

在 Express 的路由框架中，app.get()*只*响应 GET 请求，POST 被忽略并可能导致 404。

您可以使用 post() 或 any() 代替。

我无法对目标 C 部分发表评论，但我会建议 Nc -l 0.0.0.0 80 {或其他端口）看看发生了什么。

# android - Android 设备上的程序化自动助理

> ID：10051593
> 
> 赞同：1
> 
> 时间：2012-04-07T03:53:13.927
> 
> 标签：android, iphone, ios

是否可以创建一个自动接听 Android 手机来电的 Android 应用程序？如果是这样，可以使用哪些 API 来实现这一点（一段非常值得赞赏的代码片段）？

如果无法实现程序化自动助理功能，为什么 Android 操作系统会施加此限制？

在这种情况下，iOS 的行为是否与 Android 相同，请解释一下。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-07T04:25:02.630

在谷歌搜索时，我发现了一些有用的东西。我还没有尝试过，我认为这将有助于了解[**Android 中的呼叫控制**](http://prasanta-paul.blogspot.in/2010/09/call-control-in-android.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-07T03:59:26.540

您可以通过实现广播接收器`Intent.CALL_STATE_CHANGED`来监听来电，但自动接听来电似乎不可行。因为安卓应用程序无法访问来电音频流。

# android - Android - 通过 TCP/IP 传输数据

> ID：10051600
> 
> 赞同：2
> 
> 时间：2012-04-07T03:56:16.600
> 
> 标签：android, sockets, networking, tcp-ip

我想问一下android应用程序。

按下按钮时如何通过 WIFI(TCP/IP) 传输数据？

例如：当我按下按钮 1 时，它发送数字 1，当我按下按钮 2 时，它发送数字 2 ..

请帮助我..谢谢

* * *

按下按钮时如何显示texs，如果按钮被释放，文本丢失？如果这里有教程请..非常感谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-16T22:39:14.190

您可以在按钮上添加一个“OnClickListener”，以便在您按下按钮后它可以执行某些操作。（搜索“Android button onClickListener”可以找到一些例子）

为了在单击按钮后更改文本，在您的程序中，您需要保存一个 TextView 的实例（调用 findInstanceById(textViewId) 您可以获得您的 textView），然后在您的按钮单击中您可以为 textView 执行 setText。

如果您想通过 WiFi 将一些数据传输到另一部手机，则需要确保两部手机已连接。在这里你可以参考[谷歌的 WiFi-Direct 教程部分](http://developer.android.com/guide/topics/connectivity/wifip2p.html)

快乐黑客〜:)

# html - 边距：自动在 IE7 中不起作用

> ID：10051601
> 
> 赞同：0
> 
> 时间：2012-04-07T03:56:22.583
> 
> 标签：html, css, internet-explorer, internet-explorer-7

我的网站上有一个分页控件，它的容器元素设置为 margin:auto 以便分页控件在元素内居中。它适用于除 IE7 之外的所有浏览器。事实上，我刚刚意识到我的网站在 IE7 上存在一些问题，我正在努力解决所有问题。但是，我已经坚持了一段时间了。

看看[这个页面](http://www.equispot.com/horses-for-sale)。

（我知道此页面上还有其他 IE7 问题，首先关注寻呼机控件）。如果您使用IE9，您可以`F12`在菜单栏中点击并将“浏览器模式”设置为IE7。将其与任何其他浏览器/版本中的同一页面进行比较。

谁能根据我使用的 CSS/HTML 具体告诉我为什么会这样？我已经尝试了好几个小时，但我并没有真正做到。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-07T04:38:41.853

问题是您依赖于`display: table`将其收缩包装到其中的s`ul`的宽度。`li`不幸的是，[`display: table`在 IE7 中不支持。](http://caniuse.com/css-table)

切换到`display: inline-block`是解决此问题的一种方法。

打开`previous_next_container_forum ul.list_paging`，删除`display: table` [并添加](https://stackoverflow.com/questions/5838454/inline-block-doesnt-work-in-internet-explorer-7-6/5838575#5838575)：

```
display: inline-block;
*display: inline;
zoom: 1; 
```

现在s 和它里面`ul`的 s 一样宽，*没有*使用.`li`*`display: table`*

 *要真正使其居中，您需要添加`text-align: center`到父元素，例如`.previous_next_container_forum`.*

# php - PHP 全局变量和引用差异混淆

> ID：10051602
> 
> 赞同：0
> 
> 时间：2012-04-07T03:56:37.150
> 
> 标签：php

有人可以向我解释以下内容的区别是什么：

```
$var = 'something';
function myFunc(){
    global $var;
    // do something
} 
```

和（注：参考符号&）

```
$var = 'something';
function myFunc(&$var){
    // do something
} 
```

我无法理解这两种方法之间的区别。

**更新**

嗯...我想我在这里有点困惑:)

```
$var = 1;
$var2 = 2;
function myFunction(){
    global $var, $var2;
    $var = $var + $var2;
} 
```

*// echo $var 将在此处返回 3。*

* * *

```
$var = 1;
$var2 = 2;
function myFunction(&$a, &$b){
    $a = $a + $b;
} 
```

*// echo $var 也会在这里返回 3。*

* * *

我已经理解了那些部分，但是我不明白这两种方法之间的区别，我是否错误地认为这两种方法在技术上是相同的，对于编码器如何编写它们以及如何编写它们的概念不同它们是由 PHP 处理的吗？

如果我的假设是错误的，那么如果你能提供更好的例子，那真的很有帮助，也许只使用上述方法之一就可以完成？

好的，我在编写*This Update*时注意到了一个区别，那就是在进行引用时，我可以选择新的变量名，同时将指向变量的指针保留在函数范围内。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-07T03:59:33.400

在第二个代码块中，外部 $var 和内部 $var 是同一个元素。另一方面，第三个代码块的行为更像第一个代码块——但您可以从发送函数访问和修改变量；在第一个代码块中，您在内部对变量所做的任何编辑在函数范围之外均不可用。

* * *

**编辑**以匹配问题的编辑。

& 表示我们通过引用传递变量。描述它的最佳方式是举例。

```
function test2(&$var) { $var = 2; }
function test() {
   $abc = 1;
   test2($abc);
   echo $abc;
}
test(); 
```

此代码将在屏幕上打印 2。

```
$var = 0;
function test()
{
   global $var;
   $var = 1;
}
test();
echo $var; 
```

这将打印 1；

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-07T04:04:18.833

在第一个示例中，`$var`内部的局部变量`myFunc()`将通过引用存在于全局范围内的同名变量来分配（可通过 superglobal 访问[`$GLOBALS`](http://www.php.net/manual/en/reserved.variables.globals.php)）。PHP 将其转换为：

```
$var = 'something';
$GLOBALS['var'] = &$var;
function myFunc(){
    $var = &$GLOBALS['var'];
    // do something
} 
```

在第二个示例中，您将变量显式传递给函数，因此它不是从全局范围中获取的。

```
$var = 'something';
$GLOBALS['var'] = &$var;
function myFunc(&$var){
    // do something
}
myFunc($var); 
```

这两个示例都将引用完全相同的变量，但使用不同的机制。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-07T09:18:31.493

您的两个示例之间根本没有技术差异；它们将始终以相同的方式运行。

这让我们寻找其他类型的差异，这里有一个非常显着的代码质量差异：在第一个版本中，查看调用站点不会告诉您该函数依赖于全局。在第二个中它会（它作为参数传入）。因此，至少在我的书中，第二种形式是优越的。

此外，另一个区别（尽管不适用*于此*示例）是第一种形式只能在您的变量开始时在全局范围内使用；第二个将在任何地方工作。

您还应该考虑到这两种方法都有一个输入/输出参数。如果它只是一个参数，通常你不会编写这样的代码（因为你可以`return`用 out 值代替）所以考虑给出多个参数的情况很有趣。这是一种非常罕见的情况，可以说最好只返回一个具有多个值的数组，而不是通过引用获取多个参数，以使代码更容易理解。

所以总而言之：

*   他们做同样的事情
*   如果你打算使用其中一种，更喜欢第二种形式（更清晰，更灵活）
*   如果不需要编写大量额外代码，请考虑*不使用它们并做其他事情*

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-07T04:02:21.923

一个按值传递，一个按引用传递：

按价值：

```
$var = 'something';
function myFunc($var){
    $var = 'hello';
}
echo $var; //something 
```

引用：

```
$var = 'something';
function myFunc(&$var){
    $var = 'hello';
}
echo $var; //hello 
```

有关更多信息，PHP 手册有一个关于通过引用传递的页面：http: [//php.net/manual/en/language.references.pass.php](http://php.net/manual/en/language.references.pass.php)

对于全局变量，您实际上是从全局范围中提取一个变量并在函数内部使用它。这就像通过引用隐式传递。

此页面，特别是全局部分解释：[http ://us.php.net/manual/en/language.variables.scope.php](http://us.php.net/manual/en/language.variables.scope.php)

请注意，通常应避免使用全局变量。为什么的简短版本是因为它们使了解程序的状态变得困难，并且以后的更改可能会导致意想不到的副作用。

# c++ - 外部存储器上的 QDataStream？

> ID：10051605
> 
> 赞同：0
> 
> 时间：2012-04-07T03:57:25.217
> 
> 标签：c++, qt

我想将 QVector 序列化为 char* 数组。我通过以下代码执行此操作：

```
QVector<int> in;
...
QByteArray bytes;
QDataStream stream(&bytes, QIODevice::WriteOnly);
stream << in;
std::copy(bytes.constData(), bytes.constData() + bytes.size(), out); 
```

我保证`out`足够大。由于此代码被非常频繁地调用，我想避免这种不必要的`std::copy`操作，`QByteArray`并`QDataStream`在`out`. 那可能吗？有什么好主意吗？

**更新**：**QByteArray::fromRawData()**不符合需求，因为它不允许更改创建它的 char* 缓冲区，换句话说，QByteArray 在第一次修改此类创建的实例时执行深度复制。正如他们所说。*这确保了原始数据数组本身永远不会被 QByteArray 修改。*

**解决方案**：@skyhisi 提出的解决方案完全符合我的需求。完整的代码如下。

1.  简单缓冲区.hpp

    ```
    #pragma once
    #include <QtCore/QIODevice>

    class SimpleBuffer : public QIODevice {
      Q_OBJECT
      Q_DISABLE_COPY(SimpleBuffer)

    public:
      SimpleBuffer(char* const begin, const char* const end) :
        _begin(begin),
        _end(end){}

      virtual bool atEnd() const {
        return _end == _begin;
      }

      virtual bool isSequential() const {
        return true;
      }

    protected:
      virtual qint64 readData(char*, qint64) {
        return -1;
      }

      virtual qint64 writeData(const char* const data, const qint64 maxSize) {
        const qint64 space = _end - _begin;
        const qint64 toWrite = qMin(maxSize, space);
        memcpy(_begin, data, size_t(toWrite));
        _begin += toWrite;
        return toWrite;
      }

    private:
      char* _begin;
      const char* const _end;
    }; 
    ```

2.  主文件

    ```
    #include "SimpleBuffer.hpp"
    #include <QtCore/QVector>
    #include <QtCore/QDataStream>
    #include <QtCore/QByteArray>

    int main(int, char**) {
      QVector<int> src;
      src << 3 << 7 << 13 << 42 << 100500;
      const size_t dataSize = sizeof(quint32) + src.size() * sizeof(int);
      char* const data = new char[dataSize];

      // prepare stream and write out the src vector
      {
        SimpleBuffer simpleBuffer(data, data + dataSize);
        simpleBuffer.open(QIODevice::WriteOnly);
        QDataStream os(&simpleBuffer);
        os << src;
      }

      // read vector with QByteArray
      QVector<int> dst;
      {
        const QByteArray byteArray = QByteArray::fromRawData((char*)data, dataSize);
        QDataStream is(byteArray);
        is >> dst;
      }
      delete [] data;

      // check we've read exactly what we wrote
      Q_ASSERT(src == dst);

      return 0;
    } 
    ```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-20T08:20:54.877

我认为你可能需要实现一个`QIODevice`，你可以很容易地制作一个非常简单的顺序设备。这是我快速拼凑的一个，我还没有检查它是否有效（请随意让它工作并编辑帖子）。

```
class SimpleBuffer : public QIODevice
{
    Q_OBJECT
    public:
        SimpleBuffer(char* begin, char* end):mBegin(begin),mEnd(end){}

        virtual bool atEnd() const {return mEnd == mBegin; }

        virtual bool isSequential() const { return true; }

    protected:
        virtual qint64 readData(char*, qint64) { return -1; }

        virtual qint64 writeData(const char* data, qint64 maxSize)
        {
            const qint64 space = mEnd - mBegin;
            const qint64 toWrite = qMin(maxSize, space);
            memcpy(mBegin, data, size_t(toWrite));
            mBegin += toWrite;
            return toWrite;
        }

   private:
        char* mBegin;
        char* mEnd;

        Q_DISABLE_COPY(SimpleBuffer)
}; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-07T13:15:39.370

也许 fromRawData 有效：

QByteArray QByteArray::fromRawData ( const char * data, int size ) [静态]

使用它类似于：

```
char* out=new char[enoughbytes]; // preallocate at suitable scope
QVector<int> in; 
QByteArray ba=QByteArray::fromRawData(out,enoughbytes); 
QDataStream stream(&ba,QIODevice::WriteOnly); 
stream << in; 
```

请注意，QDataStream 在数据的开头添加了一些它自己的数据（虽然不多），所以请记住为此预分配更多，以及 QVector 序列化的任何附加数据。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-07-07T08:41:09.283

为什么不使用[QBuffer](http://doc.qt.io/qt-4.8/qbuffer.html)？

```
QByteArray myBuffer;
myBuffer.reserve(10000); // no re-allocation

QBuffer buffer(&myBuffer);
buffer.open(QIODevice::WriteOnly);

QDataStream out(&buffer);
out << QApplication::palette(); 
```

# iphone - 如何访问函数和类之外的字符串数据

> ID：10051607
> 
> 赞同：1
> 
> 时间：2012-04-07T03:57:50.943
> 
> 标签：iphone

我正在尝试在函数之外以及类之外访问 nsstring 数据。

如何`useridStr`在函数和类之外访问？这是我的代码：

```
-(id)connectionDidFinishLoading:(NSURLConnection *)connection
{
    NSString *loginStatus = [[NSString alloc] initWithBytes:[webData mutableBytes]
        length:[webData length] encoding:NSUTF8StringEncoding];
    NSDictionary *loginDict = [[loginStatus JSONValue] objectForKey:@"UserDetails"];
    NSArray *userId = [loginDict valueForKey: @"userid"];
    NSString *useridStr = [userId lastObject];
    NSLog(@"--------------....%@", useridStr);
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-07T04:34:24.420

```
NSUserDefaults *pre = [NSUserDefaults standardUserDefaults];
[pre setObject:useridStr forKey:@"useridStr"]; 
```

你想在哪里需要字符串：

```
NSUserDefaults *pre =[NSUserDefaults standardUserDefaults];
NSString * useridStr =[pre stringForKey:@"useridStr"]; 
```

或者

在另一个视图的 .h 文件中

```
-(id)initUserInfo:(NSString *)string; 
```

在另一个视图的 .m 文件中

```
-(id)initUserInfo:(NSString *)string{   
if (self = [super initWithNibName:@"nextView" bundle:nil]) {

    useridStr=string
}
return self;
} 
```

在 firstView 的 .m 文件中

```
-(IBAction)btnNext_TouchUpInside:(id)sender{
nextView *second =[[nextView alloc]initUserInfo:useridStr];
[self presentModalViewController:second animated:NO];
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-07T06:00:20.467

Piyush 的建议也是正确的。但是还有另一种方法可以实现它。

正如他建议**[NSUserDefaults](https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/Foundation/Classes/nsuserdefaults_Class/Reference/Reference.html)**保存数据时，您应该记住，**[NSUserDefaults](https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/Foundation/Classes/nsuserdefaults_Class/Reference/Reference.html)**通常用于保存数据，例如您希望存储的首选项，即使在应用程序被用户关闭并且您在启动应用程序时再次需要这些数据时也是如此。

因此，如果您想保存诸如首选项之类的数据，请选择 **[NSUserDefaults](https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/Foundation/Classes/nsuserdefaults_Class/Reference/Reference.html)**。如果您希望您的数据在整个应用程序运行时可用，并且您不需要像首选项一样保存它们，我建议您在`Appdelegate`文件中全局声明该对象并在需要时访问它们。您不应该将它们存储为**[NSUserDefaults](https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/Foundation/Classes/nsuserdefaults_Class/Reference/Reference.html)**，因为正如 Apple 文档所说，您在 **[NSUserDefaults](https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/Foundation/Classes/nsuserdefaults_Class/Reference/Reference.html)**中存储的任何内容都将保存在用户的默认数据库中。所以这会消耗你设备的内存。因此，简而言之，如果我们考虑内存管理概念，将所有内容保存到**NSUserDefaults**将不是一个好主意。

# backbone.js - 如何正确初始化模型以使用 `get` 函数？

> ID：10051610
> 
> 赞同：0
> 
> 时间：2012-04-07T03:58:18.553
> 
> 标签：backbone.js

我有一个模型，当我这样做时，我会`model.attributes.model`看到模型的属性。一个属性是`name`，因此`model.attributes.model.name`返回正确的名称。但是，当我这样做时，`model.get('name')`我会得到我在模型中设置的默认值。

如何设置模型的所有属性以使其适用`get`？

*用于构建模型的 JSON*

```
[{
    "model":{
            "name":"My name",
            "description":
            "Description goes here!",
            "vote_score":null
    },
    "context":{}
}] 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-07T07:45:11.267

正如您在评论中所说，修改您的服务器端代码以返回一组模型属性，或者修改您的模型定义以覆盖 parse 方法：

```
var MyModel=Backbone.Model.extend({
   parse: function(data) {
      return data.model;
   }
}); 
```

# postgresql - 无法通过命令提示符恢复 postgresql 数据

> ID：10051611
> 
> 赞同：1
> 
> 时间：2012-04-07T03:58:25.747
> 
> 标签：postgresql, data-import

我正在尝试从文件中恢复 postgres sql 数据。我正在尝试这样做，但它没有导入 .

这是我正在使用的命令：

postgres-# psql -hlocalhost -p5432 -u postgres -d test -f C:/wamp/www/test/database_backups/backup004.sql

请帮助我做错了什么。我正在使用 Windows，上面的命令不会引发任何错误，但不会导入数据。

问候苏尔扬

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-07T04:56:44.070

我能看到的唯一直接的事情是`-u`for username 的大写（应该是`-U`）。

**更正：**您在 psql shell 中键入命令行。

您应该退出到 CMD.EXE shell，并在那里尝试该命令。顺便说一句，正确的大小写`-U`。

或者，使用它将脚本重播到该 psql shell 中：

```
\i C:/wamp/www/test/database_backups/backup004.sql 
```

正斜杠不会在我的 Windows 机器上造成问题。

# php - 如何使用php在单个列中一一插入arraylist

> ID：10051613
> 
> 赞同：0
> 
> 时间：2012-04-07T03:58:40.223
> 
> 标签：php, mysql

您好先生，我通过从 android 到 php 的 url 传递发送数组列表，所有数组列表都插入到单列中的一行。我想将一列（菜单名）插入多行

```
 EG:
      i pass array list[x,y,z.........] android to php

        mysql 
       menuname
        x
        y
        z(i want like this)

  i try this code

   <?php
   $arr[]=$_POST['menuname'];
   mysql_connect("localhost","root","mobixmysql");
   mysql_select_db("test");
   foreach($arr as $value){
   $value;
   mysql_query("INSERT INTO test (menuname) VALUES ('" . 
    mysql_real_escape_string($value) . "')")or
   die('unable'.mysql_error());
   echo "inserted";
   }
   ?> 
```

我尝试上面的代码，它将数据库插入一行中的 menuname 列。我想在一列中添加多行

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-07T04:12:37.960

我假设那`$_POST['menuname']`不是数组；

```
<?php
   $arr=explode(',',preg_replace('/^.*\[(.*)\].*$/','$1',$_POST['menuname']));
   mysql_connect("localhost","root","mobixmysql");
   mysql_select_db("test");
   foreach($arr as $value){
   mysql_query("INSERT INTO test (menuname) VALUES ('" . 
    mysql_real_escape_string($value) . "')")or
   die('unable'.mysql_error());
   echo "inserted";
   }
  ?> 
```

# c++ - 当我编译我的调试程序时，Lua 运行良好，但是为什么我编译它以发布我得到一个 c0000005 错误

> ID：10051614
> 
> 赞同：0
> 
> 时间：2012-04-07T03:58:46.667
> 
> 标签：c++, visual-studio-2010, lua

我将 LUA 用于 SDL 项目。我从这里 (http://sourceforge.net/projects/luabinaries/files/5.2/Windows%20Libraries/Dynamic/) (lua-5.2_Win32_dll10_lib.zip) 下载了预编译的 LIB 和 DLL 文件并将其合并到我的项目中。当我构建调试版本时，应用程序运行 100% 正常。当我将它设置为释放模式并按下 Visual Studio 中的播放按钮时，它也运行良好。

但是，如果我通过在文件夹中双击它来运行发布文件，我会得到错误 c0000005 与 lua52.dll。

我正在运行 Microsoft Visual C++ 2010 Express。

我经历了删除行，直到它开始工作并且导致错误的行是。

```
void aiBrainmanager::run(string holdData){

int errfunc = 0;
int s;
int s = luaL_loadstring(L, holdData.c_str());

if ( s==0 ) {
    s = lua_pcall(L, 0, LUA_MULTRET, errfunc);
}
if (errfunc !=0) {

}
if (s !=0) {

    aiBrainmanager::target->stopWorking();
}

} 
```

知道什么设置错误或如何修复它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-07T04:09:48.970

0xc0000005 是内存违规。它在调试中工作的事实意味着许多可能的事情。

1.  内存没有被初始化或正确设置（在调试中它被初始化为 0），因此例如字符串被终止。
2.  内存要求大于缓冲区允许的（在调试中可以填充）。
3.  您的代码在调试中做的事情与编译不同（#if 等）

看看你的代码，我会看看：

为什么你检查错误然后什么都不做？？？？？？

```
if (errfunc !=0) { 
 // What happens in here??????
} 
```

> [lua_pcall 函数](http://pgl.yoyo.org/luai/i/lua_pcall)在成功的情况下返回 0 或以下错误代码之一（在 lua.h 中定义）：
> 
> *   LUA_ERRRUN：运行时错误。
>     
>     
> *   LUA_ERRMEM：内存分配错误。对于这样的错误，Lua 不会调用错误处理函数。
>     
>     
> *   LUA_ERRERR：运行错误处理函数时出错

我想你会发现你得到了一个**LUA_ERRMEM**

# c++ - 在 c++ 中使用相同的 fstream 对象进行读写时是否有任何引起错误的功能

> ID：10051615
> 
> 赞同：0
> 
> 时间：2012-04-07T03:58:51.210
> 
> 标签：c++, file, stream, fstream

我正在尝试学习 C++ fstream、ifstream、ofstream。在我的项目进行到一半时，我了解到，如果我们使用 ofstream 和 ifstream 访问同一个文件进行读写，最好先关闭流，然后再使用另一个。

像 ofstream write_stream(...); ifstream read_stream(....);

```
 // Accessing pointers using both read_stream, write_stream interchangebly 

  read_stream.read(....);
  write_stream.write(....);

  read_stream.close(); 
  write_stream.close(); 
```

///

在上述情况下，我猜两个流在文件中使用相同的指针，所以我需要注意指针的移动，所以我每次尝试 read() 或 write() 时都必须寻找。

我想，我是对的，到目前为止。

为了避免更多的混乱，我决定使用这种格式

```
 fstream read_write_stream("File.bin",ios::in|ios::out|ios::binary);
 read_write_stream.seekp(pos);
 read_write_stream.seekg(pos);
 read_write_stream.tellp();
 read_write_stream.tellg()

 read_write_stream.read(...);
 read_write_stream.write(...);

 read_write_stream.close() 
```

在上面的程序中是否有任何引起错误的功能，我应该注意？？？请指教

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-07T07:45:39.333

虽然我不知道标准是否明确提到这种情况，但我认为 C++ 编译器不能向您保证在您使用多个流来更改相同的外部资源（在这种情况下为文件）的情况下会发生什么. 除了 fstream 内部实现之外，它还取决于操作系统和您正在写入的硬件。如果我是正确的，默认情况下，它会使这个操作成为未定义的行为。

如果您使用两个不同的流，很可能每个流都会管理自己的 put 和 get 指针，每个流都有缓冲，这意味着如果您不使用 flush()，您将无法确定操作的顺序将在文件上完成。

如果您使用一个流来读取和写入，我认为该行为将是可预测的并且更容易理解。

# ios - 如果键盘已显示，如何根据键盘显示/隐藏调整视图大小

> ID：10051630
> 
> 赞同：2
> 
> 时间：2012-04-07T04:02:34.480
> 
> 标签：ios, keyboard

在视图 A 中，我有一个文本字段。我点击一个控件来推入一个新的视图控制器 B。视图 B 只有一个文本视图，它的框架应该调整以适应键盘，我总是将文本视图设置为第一响应者，并且键盘应该在视图时立即显示B被推了进去。

我在视图控制器 B 中进行通常的键盘通知处理。因此，如果在推送视图 B 之前未显示键盘，则没有问题。但是，如果视图 A 中的文本字段是第一响应者并且当我推入视图控制器 B 时键盘已经显示，我将不会收到 UIKeyboardWillShowNotification/UIKeyboardDidShowNotification。有什么建议来处理这种情况吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-07T05:17:04.300

我以前没有遇到过这个问题，但我有一个建议。也许在视图 B 中，你可以让你的 textView`resignFirstResponder`然后`becomeFirstResponder`强制键盘通知出来。下面的示例：

```
[textView resignFirstResponder];
[textView becomeFirstResponder]; 
```

还有另一种绕行的方式，也许你可以`resignFirstResponder`在 View A 之前 push ，然后`becomeFirstResponder`在 View B 之后是`viewDidAppear`。

希望能帮助到你。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-07T06:34:14.413

您可以将键盘状态信息传递给 viewController B ...这不是一个好方法，但是我尝试了其他一些方法，例如在 viewController A 的 viewWillDisappear 中调用 [textView resignFirstResponder] ，它们都不起作用。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-07T16:10:46.233

辞去第一响应者然后再次成为第一响应者并不是一个好的解决方案，我第一次想到它时就立即放弃了。当键盘已经存在时，强制键盘立即隐藏并再次显示是不正确的做法——这是一种浪费，会破坏平滑过渡。

通过破坏 B 的封装将键盘状态从视图 A 发送到视图 B 在软件工程中既不是可接受的事情。

所以我相信它值得一个错误报告，我做了一个 - [#11205521](http://openradar.appspot.com/radar?id=1643406)。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-29T16:33:32.460

你应该试试`UITouch`。

```
- (void)touchesBegan:(NSSet *)touches withEvent:(UIEvent *)event 
{
  // Detect touch anywhere
  UITouch *touch = [touches anyObject];

  // Get the point that was touched
  CGPoint point = [touch locationInView:self.view];
  NSLog(@"pointx: %f pointy:%f", point.x, point.y);

  // Check if the point touched is within these rectangular bounds
  if (CGRectContainsPoint(CGRectMake(5, 5, 40, 130), point))
  {
    //do something...
  } 
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-15T19:01:08.603

嗨，根据键盘调整视图大小我使用这样的东西

```
- (void) animateView: (BOOL) up
{
    CGRect rect = self.view.frame;

    if(up)
    {
        float movement = (up ? 264 : 416);
        rect.size.height = movement;
        self.view.frame = rect;
    }
    else
    {
        rect.size.height = 480;
        self.view.frame = rect;
    }
} 
```

BOOL 变量 up 用于指示是否显示键盘

希望这可以帮助！

问候， 豪尔赫

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2014-09-16T16:54:44.233

您可以在应用程序的某个中心位置（例如 appDelegate）监控键盘状态，并让所有组件从中获取当前键盘信息。

# silverlight-4.0 - 如何在应用程序栏WP7中添加5个按钮。？

> ID：10051633
> 
> 赞同：0
> 
> 时间：2012-04-07T04:03:14.777
> 
> 标签：silverlight-4.0, windows-phone-7.1

我正在使用 WP7，我想在 ApplicationBar 中添加 5 个按钮，但它说应用程序栏中的列表太多，所以有什么解决方法可以让我继续。！

注意：我不想添加应用程序菜单项。

谢谢..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-07T04:06:45.050

您是否考虑过制作一些不太常见的按钮菜单项？像这样：

```
<shell:ApplicationBar.MenuItems>
    <shell:ApplicationBarMenuItem Text="my menu item" Click="beginAllocateVotes"/>
</shell:ApplicationBar.MenuItems> 
```

5 个应用栏按钮可能看起来有点拥挤。

# c# - 在没有模拟的情况下测试来自测试项目的视图？

> ID：10051635
> 
> 赞同：2
> 
> 时间：2012-04-07T04:03:22.407
> 
> 标签：c#, asp.net-mvc, unit-testing

如何在不使用模拟的情况下从我的测试项目中测试我的视图？我尝试过各种各样的事情。通过 MarshalByRefObject 并使用其 ViewToString 方法创建 ASP .NET 应用程序宿主。我也尝试过动态实例化 ViewPage 对象，但没有成功。

```
Test method Fablelane.WebApplication.Tests.UseCases.CreateNewSchoolAsAdministrator threw exception: 
System.NullReferenceException: Object reference not set to an instance of an object.
at System.Web.VirtualPath.GetCacheKey()
at System.Web.Compilation.BuildManager.GetCacheKeyFromVirtualPath(VirtualPath virtualPath, ref Boolean keyFromVPP)
at System.Web.Compilation.BuildManager.GetVPathBuildResultFromCacheInternal(VirtualPath virtualPath, Boolean ensureIsUpToDate)
at System.Web.Compilation.BuildManager.GetVPathBuildResultInternal(VirtualPath virtualPath, Boolean noBuild, Boolean allowCrossApp, Boolean allowBuildInPrecompile, Boolean throwIfNotFound, Boolean ensureIsUpToDate)
at System.Web.Compilation.BuildManager.GetVPathBuildResultWithNoAssert(HttpContext context, VirtualPath virtualPath, Boolean noBuild, Boolean allowCrossApp, Boolean allowBuildInPrecompile, Boolean throwIfNotFound, Boolean ensureIsUpToDate)
at System.Web.Compilation.BuildManager.GetVirtualPathObjectFactory(VirtualPath virtualPath, HttpContext context, Boolean allowCrossApp, Boolean throwIfNotFound)
at System.Web.Compilation.BuildManager.GetObjectFactory(String virtualPath, Boolean throwIfNotFound)
at System.Web.Mvc.BuildManagerWrapper.System.Web.Mvc.IBuildManager.FileExists(String virtualPath)
at System.Web.Mvc.BuildManagerViewEngine.FileExists(ControllerContext controllerContext, String virtualPath)
at System.Web.Mvc.VirtualPathProviderViewEngine.GetPathFromGeneralName(ControllerContext controllerContext, List`1 locations, String name, String controllerName, String areaName, String cacheKey, String[]& searchedLocations)
at System.Web.Mvc.VirtualPathProviderViewEngine.GetPath(ControllerContext controllerContext, String[] locations, String[] areaLocations, String locationsPropertyName, String name, String controllerName, String cacheKeyPrefix, Boolean useCache, String[]& searchedLocations)
at System.Web.Mvc.VirtualPathProviderViewEngine.FindView(ControllerContext controllerContext, String viewName, String masterName, Boolean useCache)
at System.Web.Mvc.ViewEngineCollection.<>c__DisplayClassc.<FindView>b__b(IViewEngine e)
at System.Web.Mvc.ViewEngineCollection.Find(Func`2 lookup, Boolean trackSearchedPaths)
at System.Web.Mvc.ViewEngineCollection.Find(Func`2 cacheLocator, Func`2 locator)
at System.Web.Mvc.ViewEngineCollection.FindView(ControllerContext controllerContext, String viewName, String masterName)
at Fablelane.WebApplication.Tests.Extensions.ControllerExtensions.RenderPartialToString(ControllerBase controller, String partialName, Object model, RouteData routeData) in ControllerExtensions.cs: line 28
at Fablelane.WebApplication.Tests.UseCases.InvokeView(Controller controller, ViewResult result) in UseCases.cs: line 104
at Fablelane.WebApplication.Tests.UseCases.CreateNewSchoolAsAdministrator() in UseCases.cs: line 226 
```

该错误是当我使用实例化方法时。

当我尝试执行应用程序主机解决方案时，它失败并出现序列化异常，指出无法序列化属性。

我被困住了——该怎么办？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-07T04:43:20.503

您的视图位于 UI 层中，您只需对 UI 层进行单元测试，模拟从服务层到控制器/视图使用的所有内容。

您的 UI 层不需要集成测试，因为您的测试团队测试您的用例（功能）是否正确实现会让您知道页面是否无法加载。

您的业​​务逻辑通常位于单独的层中，例如您的服务层。这是最常见的集成测试，位于您的服务和数据层之间。

与其尝试解决环境问题，为什么不坚持有效的方法？UI 层和单元的单元测试以及服务层的集成测试。

除了自动化浏览器测试，您还可以使用[Selenium](http://seleniumhq.org/)或类似的东西。

# java - 更新 JLabel 中包含的图像 - 问题

> ID：10051638
> 
> 赞同：3
> 
> 时间：2012-04-07T04:04:19.007
> 
> 标签：java, image, swing, jlabel

我目前无法工作的应用程序部分是能够滚动并显示图像列表，一次一个。我从用户那里得到一个目录，通过该目录中的所有文件进行后台处理，然后加载一个仅包含 jpeg 和 png 的数组。接下来，我想用第一张图像更新 JLabel，并提供上一个和下一个按钮来滚动并依次显示每个图像。当我尝试显示第二张图像时，它没有得到更新......这是我到目前为止所得到的：

```
public class CreateGallery
{
    private JLabel swingImage; 
```

我用来更新图像的方法：

```
protected void updateImage(String name) 
{
    BufferedImage image = null;
    Image scaledImage = null;
    JLabel tempImage;

    try
    {
        image = ImageIO.read(new File(name));
    } catch (IOException e)
    {
        // TODO Auto-generated catch block
        e.printStackTrace();
    }

    // getScaledImage returns an Image that's been resized proportionally to my thumbnail constraints
    scaledImage = getScaledImage(image, THUMB_SIZE_X, THUMB_SIZE_Y);
    tempImage = new JLabel(new ImageIcon(scaledImage));
    swingImage = tempImage;
} 
```

然后在我的 createAndShowGUI 方法中，将 swingImage 放在...

```
private void createAndShowGUI() 
{
    //Create and set up the window.
    final JFrame frame = new JFrame();

    // Miscellaneous code in here - removed for brevity

    //  Create the Image Thumbnail swingImage and start up with a default image
    swingImage = new JLabel();
    String rootPath = new java.io.File("").getAbsolutePath();
    updateImage(rootPath + "/images/default.jpg");

    // Miscellaneous code in here - removed for brevity

    rightPane.add(swingImage, BorderLayout.PAGE_START);
    frame.add(rightPane, BorderLayout.LINE_END); 
```

```
public static void main(String[] args) 
{
    SwingUtilities.invokeLater(new Runnable() 
    {
        public void run() 
        {
            UIManager.put("swing.boldMetal", Boolean.FALSE);
            new CreateGalleryXML().createAndShowGUI();
        }
    });
} 
```

如果你已经走到这一步，第一张图片是我的 default.jpg，一旦我获得目录并识别该目录中的第一张图片，当我尝试更新 swingImage 时它就会失败。现在，我尝试使用 swingImage.setVisible() 和 swingImage.revalidate() 来强制它重新加载。我猜这是我的 tempImage = new JLabel 的根本原因。但我不确定如何将我的 BufferedImage 或 Image 转换为 JLabel 以便更新 swingImage。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-04-07T04:15:20.527

而不是为 each创建一个`New Instance`，只需使用[JLabel#setIcon(...)](http://docs.oracle.com/javase/7/docs/api/javax/swing/JLabel.html#setIcon(javax.swing.Icon))的方法来更改图像。`JLabel``Image``JLabel`

一个小示例程序：

```
import java.awt.*;
import java.awt.event.*;
import javax.swing.*;

public class SlideShow extends JPanel
{
    private int i = 0;
    private Timer timer;
    private JLabel images = new JLabel();
    private Icon[] icons = {UIManager.getIcon("OptionPane.informationIcon"),
                            UIManager.getIcon("OptionPane.errorIcon"),
                            UIManager.getIcon("OptionPane.warningIcon")};
    private ImageIcon pictures1, pictures2, pictures3, pictures4;
    private ActionListener action = new ActionListener()
    {
        public void actionPerformed(ActionEvent ae)
        {                       
            i++;
            System.out.println(i);

            if(i == 1)
            {
                pictures1 = new ImageIcon("image/caIcon.png");
                images.setIcon(icons[i - 1]);
                System.out.println("picture 1 should be displayed here");
            }
            if(i == 2)
            {
                pictures2 = new ImageIcon("image/Keyboard.png");
                images.setIcon(icons[i - 1]);   
                System.out.println("picture 2 should be displayed here");
            }
            if(i == 3)
            {
                pictures3 = new ImageIcon("image/ukIcon.png");
                images.setIcon(icons[i - 1]);
                System.out.println("picture 3 should be displayed here");  
            }
            if(i == 4)
            {
                pictures4 = new ImageIcon("image/Mouse.png");
                images.setIcon(icons[0]);   
                System.out.println("picture 4 should be displayed here");  
            }
            if(i == 5)
            {
                timer.stop();
                System.exit(0);
            }
            revalidate();
            repaint();
        }
    };

    public SlideShow()
    {
        JFrame frame = new JFrame("SLIDE SHOW");
        frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        frame.setLocationByPlatform(true);

        frame.getContentPane().add(this);

        add(images);

        frame.setSize(300, 300);
        frame.setVisible(true); 
        timer = new Timer(2000, action);    
        timer.start();  
    }

    public static void main(String... args)
    {
        SwingUtilities.invokeLater(new Runnable()
        {
            public void run()
            {
                new SlideShow();
            }
        });
    }
} 
```

由于您使用 ImageIO 进行操作，因此这里有一个与[使用 ImageIO 的 JLabel相关的好示例](https://stackoverflow.com/questions/9721421/show-image-by-click-jbutton/9722205#9722205)

与您的案件有关的信息，关于正在发生的事情：

在您的`createAndShowGUI()`方法中，您初始化了`JLabel`(swingImage)，然后将其添加到您`JPanel`的方法中，从而间接添加到`JFrame`.

但是现在在您的`updateImage()`方法中，您正在初始化一个 new `JLabel`，现在它通过写入驻留在另一个内存位置，`tempImage = new JLabel(new ImageIcon(scaledImage));`然后您将您的`swingImage(JLabel)`to 指向这个新创建`JLabel`的 ，但是这个新创建`JLabel`的从未添加到`JPanel`, 在任何时候。因此，即使您尝试，它也将不可见`revalidate()/repaint()/setVisible(...)`。因此，要么您将`updateImage(...)`方法的代码更改为此：

```
protected void updateImage(String name) 
{
    BufferedImage image = null;
    Image scaledImage = null;
    JLabel tempImage;

    try
    {
        image = ImageIO.read(new File(name));
    } 
    catch (IOException e)
    {
        // TODO Auto-generated catch block
        e.printStackTrace();
    }

    // getScaledImage returns an Image that's been resized 
    // proportionally to my thumbnail constraints
    scaledImage = getScaledImage(image, THUMB_SIZE_X, THUMB_SIZE_Y);
    tempImage = new JLabel(new ImageIcon(scaledImage));
    rightPane.remove(swingImage);
    swingImage = tempImage;
    rightPane.add(swingImage, BorderLayout.PAGE_START);
    rightPane.revalidate();
    rightPane.repaint(); // required sometimes
} 
```

或者`JLabel.setIcon(...)`如前所述使用:-)

***更新了答案***

这里看看 a`New JLabel`是如何放置在旧的位置的，

```
import java.awt.*;
import java.awt.event.*;
import javax.swing.*;

public class SlideShow extends JPanel
{
    private int i = 0;
    private Timer timer;
    private JLabel images = new JLabel();
    private Icon[] icons = {UIManager.getIcon("OptionPane.informationIcon"),
                            UIManager.getIcon("OptionPane.errorIcon"),
                            UIManager.getIcon("OptionPane.warningIcon")};
    private ActionListener action = new ActionListener()
    {
        public void actionPerformed(ActionEvent ae)
        {                       
            i++;
            System.out.println(i);          

            if(i == 4)
            {
                timer.stop();
                System.exit(0);
            }
            remove(images);
            JLabel temp = new JLabel(icons[i - 1]);
            images = temp;
            add(images);
            revalidate();
            repaint();
        }
    };

    private void createAndDisplayGUI()
    {
        JFrame frame = new JFrame("SLIDE SHOW");
        frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        frame.setLocationByPlatform(true);    

        this.setLayout(new FlowLayout(FlowLayout.LEFT));    

        add(images);

        frame.getContentPane().add(this, BorderLayout.CENTER);

        frame.setSize(300, 300);
        frame.setVisible(true); 
        timer = new Timer(2000, action);    
        timer.start();  
    }

    public static void main(String... args)
    {
        SwingUtilities.invokeLater(new Runnable()
        {
            public void run()
            {
                new SlideShow().createAndDisplayGUI();
            }
        });
    }
} 
```

对于您的问题：**在我尝试过的两种选择中，一种比另一种更好吗？**

`setIcon(...)`相对于另一种方式有优势，从某种意义上说，您不必在添加/删除之后为 revalidate()/repaint() 事情烦恼`JLabel`。此外，您无需`JLabel`每次都记住您的位置，添加它。它保持在它的位置，您只需调用一种方法来更改图像，没有附加任何条件，工作就完成了，没有任何头疼的问题。

对于问题 2：我有点怀疑，至于什么是`Array of Records`？

# javascript - HTML5 仪表值可以接受 setAttribute 吗？

> ID：10051640
> 
> 赞同：1
> 
> 时间：2012-04-07T04:04:30.240
> 
> 标签：javascript, jquery, html

我应该如何使用 Javascript 将变量的值推送到输入值？我知道可以使用 setAttribute 设置其他元素属性，但我无法在“值”中设置任何内容。

这是当前的javascript函数：

```
function testfunc(){
    document.getElementsByTagName("meter")[0].setAttribute("value", "2000");   
}​ 
```

和 HTML：

```
<!doctype html>
<head>
<meta charset="utf-8">
<title>untitled</title>
</head>
<body>

<div id="container">
    <button onclick="testfunc()">Find my elevations</button>  
    <meter value="900" min="0" max="5280" id="high">500/5280</meter>
</div> 

</body>
</html> 
```

​</p>

我想做的是将当前设置值 900 替换为 testfunc() 值 2000。2000 是完全任意的，因为它将是实时应用程序中动态生成的数字。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-07T04:07:06.940

[HTML 5：4.10.17 Meter 元素](http://dev.w3.org/html5/spec/the-meter-element.html#dom-meter-value)建议您可以这样做

```
document.getElementById("high").value = /* float value between min and max */ 
```

该规范的相关部分是

> 如果适用，以下不等式必须成立：
> 
> *   最小值 ≤ 值 ≤ 最大值
> *   最小值 ≤ 低 ≤ 最大值（如果指定了低）
> *   最小值 ≤ 高 ≤ 最大值（如果指定了高）
> *   最小值 ≤ 最佳值 ≤ 最大值（如果指定了最佳值）
> *   低 ≤ 高（如果同时指定了低和高）
> 
> ...
> 
> IDL 属性在`value`获取时必须返回实际值。设置时，必须将给定值转换为浮点数的最佳表示形式，然后`value`必须将内容属性设置为该字符串。

# c - C 中的 2D 动态数组分配和通过引用传递

> ID：10051642
> 
> 赞同：5
> 
> 时间：2012-04-07T04:04:50.850
> 
> 标签：c, multidimensional-array, segmentation-fault, pass-by-reference, dynamic-memory-allocation

比我更聪明的人可以向我解释为什么以下代码段错误？通过引用分配内存没有问题，但是一旦我尝试通过引用分配任何内容或释放，就会发生段错误。

我确定我错过了一些关于指针和通过引用传递的基本概念，希望可以有所启发。

```
#include <stdlib.h>
#include <stdio.h>

void allocateMatrix(float ***);
void fillMatrix(float ***);
void freeMatrix(float **);

int main() {
    float **matrix;

    allocateMatrix(&matrix);        // this function calls and returns OK
    fillMatrix(&matrix);            // this function will segfault
    freeMatrix(matrix);             // this function will segfault

    exit(0);
}

void allocateMatrix(float ***m) {
    int i;
    m = malloc(2*sizeof(float*));
    for (i = 0; i < 2; i++) {
        m[i] = malloc(2*sizeof(float));
    }
    return;
}

void fillMatrix(float ***m) {
    int i,j;
    for (i = 0; i < 2; i++) {
        for (j = 0; j < 2; j++) {
            (*m)[i][j] = 1.0;        // SEGFAULT
        }
    }
    return;
}

void freeMatrix(float **m) {
    int i; 
    for (i = 0; i < 2; i++) {
        free(m[i]);                  // SEGFAULT
    }
    free(m);
    return;
} 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-04-07T04:43:32.870

一组问题在这里：

```
void allocateMatrix(float ***m) {
    int i;
    m = malloc(2*sizeof(float*));
    for (i = 0; i < 2; i++) {
        m[i] = malloc(2*sizeof(float));
    }
    return;
} 
```

您需要分配给以`*m`将信息返回给调用代码，并且您还需要`(*m)[i]`在循环中分配给。

```
void allocateMatrix(float ***m)
{
    *m = malloc(2*sizeof(float*));
    for (int i = 0; i < 2; i++)
        (*m)[i] = malloc(2*sizeof(float));
} 
```

至少有机会其他功能都可以。被`fillMatrix()`正确编写和调用，尽管可以通过丢失`*`指针中的第三个来简化它：

```
void fillMatrix(float **m)
{
    for (int i = 0; i < 2; i++)
    {
        for (int j = 0; j < 2; j++)
            m[i][j] = 1.0;        
    }
} 
```

建议将三重指针传递给，`freeMatrix()`以便您可以将调用函数中的指针归零：

```
void freeMatrix(float ***m)
{
    for (int i = 0; i < 2; i++)
        free((*m)[i]);
    free(*m);
    *m = 0;
} 
```

然后调用变为：

```
allocateMatrix(&matrix);
fillMatrix(matrix);
freeMatrix(&matrix); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-04-07T04:41:44.870

善用间接。尽量与格式保持一致。它提高了可读性并减少了错误。例如

函数调用：

```
 allocateMatrix  &matrix
    fillMatrix  &matrix
    freeMatrix  &matrix 
```

声明

```
void allocateMatrix  float ***m
void fillMatrix  float ***m
void freeMatrix  float ***m 
```

处理

```
 (*m)[i] = malloc(2 * sizeof(float))
    (*m)[i][j] = 1.0
    free  (*m)[i] 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-07T07:02:54.203

从函数返回指针可能是分配内存的更好方法：

```
float **allocateMatrix() {
    int i;
    float **m;

    m = malloc(2*sizeof(float *));
    for (i = 0; i < 2; i++) {
        m[i] = malloc(2*sizeof(float));
    }

    return m;
}

int main() {
    float **m;

    m = allocateMatrix();

    /* do other things 
       fillMatrix(matrix);
       freeMatrix(&matrix);
    */
} 
```

# emacs - 一个简单的lisp程序

> ID：10051645
> 
> 赞同：2
> 
> 时间：2012-04-07T04:05:23.203
> 
> 标签：emacs, lisp, elisp

我想编写这个程序来在列表中查找关键字。如果找到，则打印列表。但是出现错误，我无法解决。请给我一些建议。我是lisp的新手。

主程序是两个dolist（C中的两个）和一个list列表中的find关键字（二维数组）。

```
(defun kanna_find (key)
  (let (
        (result 0)
        (kanna-table (list 
                (list "あ" "ア" "a")
                (list "い"　"イ"　"i")
               )
        )                               ;; End of kanna table
    )                                   ;; End of let var define
    (dolist (result kanna-table) 
      (dolist (item result)
      (if (string= item key)
          (print result))
        )                               ;; End of the second dolist
      )                                 ;; End of the first dolist
    )                                   ;; End of let
)

(kanna_find "あ") 
```

以下是调试信息

```
Debugger entered--Lisp error: (void-variable 　)
  (list "い" 　 "イ" 　 "i")
  (list (list "あ" "ア" "a") (list "い" 　 "イ" 　 "i"))
  (let ((result 0) (kanna-table ...)) (dolist (result kanna-table) (dolist ... ...)))
  kanna_find("あ")
  eval((kanna_find "あ"))
  eval-last-sexp-1(nil)
  eval-last-sexp(nil)
  call-interactively(eval-last-sexp nil nil)
  recursive-edit() 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-04-07T04:14:48.200

```
(list "あ" "ア" "a")
(list "い"　"イ"　"i") 
```

你注意到第二行的空格比第一行的长吗？那是因为它们不是 ASCII 空格，所以 emacs 不会将它们识别为空格。而是 emacs 认为它​​们是变量名，因此它向您抱怨没有名为“”的变量（因此是 void-variable 错误中的空格）。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-04-07T05:10:13.397

您似乎正在寻找这种单线：

```
;; return a sublist tail of list-of-strings whose first element is string
;; or nil if string is not found
(member string list-of-strings) 
```

您的代码格式非常糟糕。试试这种风格，全世界 1 亿左右的 Lisp 程序员中约有 9950 万使用这种风格：

```
(defun kanji_find (key)
  (let ((result 0)
        (kanji-table (list (list "あ" "ア" "a")
                           (list "い"　"イ"　"i"))))
    (dolist (result kanji-table) 
      (dolist (item result)
        (if (string= item key)
          (print result)))))) 
```

没有人写关于个别右括号的评论；这太荒谬了！你把 Lisp 变成了 Ada。

您的文本编辑器（毕竟是 Emacs）可以向您显示平衡的括号对并为您管理缩进。

最后，缩进是你关于什么与什么搭配的主要视觉线索。

您代码中的绑定是无用的，与external 中的变量`(result 0)`无关。`result``dolist`

# html - 无法获得扩展整个页面的两个背景图像？

> ID：10051646
> 
> 赞同：0
> 
> 时间：2012-04-07T04:05:37.370
> 
> 标签：html, css, layout

这是我试图实现的布局。

[http://i.imgur.com/kA0yw.jpg](http://i.imgur.com/kA0yw.jpg)

我有一个重复的背景样本，设置为 html 的背景，因此灰色纸结构在设计之外重复。

然后我将放在身体背景上的竹子插图设置为背景。

我似乎无法让竹子不被切断到内容结束的地方。

最好的方法是什么？

中心的白色内容 div 至少需要向下延伸到页面的底部，我一生都无法弄清楚这似乎必须是最简单的事情

这就是现在的样子 - [http://i.imgur.com/55dPe.png](http://i.imgur.com/55dPe.png)

这是代码

```
<html>
    <body>
        <div id="wrapper">
            <div id="header"></div>
        <div id="content"></div>
        </div>
    </body>
</html> 
```

和CSS

```
html{
background:url(images/background_swatch.png) top center;
}

body{
margin:0 auto;
background:url(images/background.png) top center no-repeat;
}

div#wrapper{
margin:0 auto;
width:800px;
background-color:#FFF;
border-left:5px solid black;
border-right:5px solid black;
}

#header{
margin:0 auto;
position:relative;
top:25px;   
background:url(images/navigation_banner.png) no-repeat;
width:850px;
height:150px;
left: -25px;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-07T04:37:19.710

我对你想改变什么感到困惑......你能发布你的代码吗？

或者你想延长哪个，因为在我看来，竹图片一直向下，如果你想要更远，也许可以进一步拉伸（高度：120％;）？？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-07T04:58:47.933

您需要在 html 容器上设置高度 100%，在正文容器上设置最小高度。

[http://jsfiddle.net/5FwGZ/](http://jsfiddle.net/5FwGZ/)

```
html { 
    height: 100%;
    background-image: url('http://imjustcreative.com/wp-content/uploads/ImJustCreative-2010-08-23-at-06.06.01.jpg');
}

body {
    min-height: 100%;
    width: 100%;
    background-image: url('http://www.landscapecreationsfl.com/flower-dahlia-pink-transparent-background-350_1_.gif')
}
div#content {
    height: 400px;
    width: 600px;
    margin: 0 auto;
    text-align: center;
    background: white;
}
​ 
```

# asp.net-mvc - MVC全屏

> ID：10051651
> 
> 赞同：1
> 
> 时间：2012-04-07T04:07:22.233
> 
> 标签：asp.net-mvc, silverlight, flash

我有一个工作的 MVC 项目。

我想在全屏模式下包含一个显示数据库中图像的页面。

我该怎么做？闪光？银光？请直接看一些教程。

谢谢。阿尼尔

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-07T04:37:30.997

没有用户权限，flash 中的全屏模式是不可能的，例如：

如果有人要查看您的网页。您必须有一个按钮供用户交互以允许全屏模式。这是Flash在其框架中实现的一项安全功能，以确保如果该功能可用，广告商不会滥用此功能，而且其他新手用户也不熟悉如何退出屏幕，因为他们习惯使用返回按钮在网络浏览器上。

我确定以上适用于大多数情况。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-07T04:40:42.433

> 全屏模式

你应该阅读[这篇文章](http://css.dzone.com/articles/pragmatic-introduction-html5)，假设你想实现某种全屏模式。不过，不确定它是否与全屏模式不同。

> 我们现在可以访问`requestFullScreen`在 Firefox、Google Chrome 和 Safari 中实现的名为 ... 的方法。(To) 让它工作......我们需要这段代码

```
var docElm = document.documentElement;
if (docElm.requestFullscreen) {
    docElm.requestFullscreen();
}
else if (docElm.mozRequestFullScreen) {
    docElm.mozRequestFullScreen();
}
else if (docElm.webkitRequestFullScreen) {
    docElm.webkitRequestFullScreen();
} 
```

# wpf - WCF：提交服务两次

> ID：10051653
> 
> 赞同：0
> 
> 时间：2012-04-07T04:08:02.920
> 
> 标签：wpf, wcf, double-submit-problem

只是了解 WCF，所以请原谅我的不雅编码。我遇到的问题是我似乎向我的服务提交了两次数据（见截图），即使（我*认为*）我只做了一次。有人可以让我知道我可能做错了什么吗？或者，如果我效率低下，甚至只是建议一种更好的方法来做到这一点。

代码如下：

```
public void EndOfLevel()
    {
        GlobalVariable.TotalQuestionsAsked = 10;
        GlobalVariable.CorrectDecimal = GlobalVariable.Correct / GlobalVariable.TotalQuestionsAsked;

        //Show loading screen
        UploadingScreen.Visibility = Visibility.Visible;
        //Submit this levels results.

        Service1Client client = null;
        client = new Service1Client();

            //Gather the results and details
            Result thislevel = new Result();
            thislevel.Datetime = DateTime.Now;
            thislevel.result = GlobalVariable.CorrectDecimal;
            thislevel.TimesTable = GlobalVariable.NeedsHelpWith;

            //submit them
            try
            {
                client.SubmitResultAsync(thislevel);
            }
            catch
            {
                MessageBox.Show("Error uploading data");
            }
            finally
            {
                client.Close();
                Results r3 = new Results();
                this.NavigationService.Navigate(r3);
            }

    } 
```

WCF 测试客户端：

![结果截图](../Images/a4f3463fe29e07bb2f8abf3349450d79.png)

干杯，尼克

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-07T04:59:29.830

如果可以的话，这里有一种用于管理我们的 WPF 应用程序和我们的 WCF 服务之间的异步调用的模式。

在本节中，我们有一个服务客户端的公共访问器，它确保在调用服务方法之前与客户端的连接是打开的：

```
public static MyServiceClient Client
{
    get
    {
        return GetMyServiceClient();
    }
}
private static MyServiceClient client;

private static MyService.MyServiceClient GetMyServiceClient()
{
    VerifyClientConnection();

    return client;
}

private static void VerifyClientConnection()
{
    if (client == null || client.State == System.ServiceModel.CommunicationState.Closed)
    {
        client = new MyService.MyServiceClient();
    }
} 
```

在本节中是我们的异步调用和回调模式的示例（此示例显示了我们用于将异常数据传递给我们的服务的委托和回调）：

```
public delegate void LogExceptionCompletedEvent();
public static LogExceptionCompletedEvent LogExceptionCompleted;

public static void LogExceptionAsync(SilverlightException exception)
{
    string json = JsonConvert.SerializeObject(exception);

    Client.LogExceptionCompleted -= client_LogExceptionCompleted;
    Client.LogExceptionCompleted += client_LogExceptionCompleted;
    Client.LogExceptionAsync(json);
}

private static void client_LogExceptionCompleted(object sender, AsyncCompletedEventArgs e)
{
    if (LogExceptionCompleted != null)
    {
        LogExceptionCompleted();
    }
} 
```

在此示例中，视图模型可以将事件处理程序附加到 LogExceptionCompleted 委托，然后在它从服务返回时接收回调的结果。

对于我们需要从应用程序进行的异步 WCF 服务调用，我们基本上重复这种模式，它使它们保持非常有条理以及可单元测试。

# c++ - C++11：非成员 rbegin()/rend() 函数

> ID：10051654
> 
> 赞同：17
> 
> 时间：2012-04-07T04:08:03.627
> 
> 标签：c++, stl, iterator, c++11

既然在 C++11 版本中为标准包含添加了非成员`begin()`和`end()`函数，为什么没有添加非成员版本的`rbegin()`和`rend()`函数呢？`begin()`开始使用and的非成员版本后我觉得很傻`end()`，只是发现我现在必须在使用成员和非成员函数调用之间切换。（我意识到推出我自己的非成员版本`rbegin()`and是微不足道的`rend()`，但我想知道为什么没有将它添加到标准中）。

感谢您的输入。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-10-23T00:00:03.650

对于以后看到这个的人，非会员`rbegin()`并且`rend()`已经在 C++14 中。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-04-07T15:57:18.367

您可以通过手动使用 和 的结果来构建反向`std::reverse_iterator`范围。`std::begin``std::end`

奇怪的是，没有标准的工厂函数`reverse_iterator`。如果有，它可能看起来像这样：

```
template< typename iter >
std::reverse_iterator< iter > reverse( iter i )
    { return { i }; } 
```

有了这个，你就可以做到

```
std::sort( reverse( std::end( my_array ) ), reverse( std::begin( my_array ) ) ); 
```

这个例子省去了指定`std::greater`比较器的麻烦，但是`reverse_iterator`如果编译器不能从内部循环中消除增加的复杂性，可以想象可能会对性能产生不利影响。

# c++ - #define 带有 L 标识符的语法

> ID：10051659
> 
> 赞同：3
> 
> 时间：2012-04-07T04:08:43.917
> 
> 标签：c++, c, winapi, c-preprocessor, widechar

```
#define CONST_FILENAME "okay.dat"
LPCWSTR lpFilename=L CONST_FILENAME; //obviously doesn't work 
```

基本上，我如何获得相当于：

```
LPCWSTR lpFilename=L"okay.dat"; 
```

使用`#define`？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-06T15:53:41.543

```
#define GLUE(x,y) x##y
#define W(x) GLUE(L,x)

#define CONST_FILENAME "okay.dat"

int main() {
    const wchar_t* lpFilename = W(CONST_FILENAME);
    const wchar_t* lpFilename = W("okay.dat");
    wchar_t one_character = W('?');
} 
```

[http://ideone.com/2EzB6](http://ideone.com/2EzB6)上的编译证明。这正是微软`_T`宏的工作方式，除了我无条件地定义它，因此即使不在 MSVC“Unicode”构建中，您也可以使用它来获取宽字符串。至于为什么需要 GLUE 宏，我从来没有听过对我有意义的解释，但是没有它，宏不会扩展，所以它是必需的。看起来这里有详细信息：[## 预处理器运算符的应用和要考虑的问题是什么？](https://stackoverflow.com/questions/216875/in-macros)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-07T04:11:38.450

`#define CONST_FILENAME L"okay.dat"`

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-07T05:12:25.663

> 但是如果我想`CONST_FILENAME`在 ASCII 上下文中使用 [too] 怎么办？如：
> 
> ```
> char *something = CONST_FILENAME; 
> ```

`L`in`L"okay.dat"`不能与by`"`空格分开。宽字符字符串是单个标记，您不能直接“添加`L`到它”。但是，您可以进行字符串连接：

```
#include <wchar.h>

#define A_STRING "xyz.txt"

/* MMT - Magical Mystery Tour */
#define MMT(x) L"" x

char a[] = A_STRING;
wchar_t w[] = MMT(A_STRING); 
```

狡猾，但 GCC 可以接受。这很好，因为标准也是如此。这是来自 C99 标准：

> §6.4.5 字符串文字
> 
> ¶4 在翻译阶段 6，由任何相邻字符序列和宽字符串文字标记指定的多字节字符序列连接成单个多字节字符序列。如果任何标记是宽字符串文字标记，则生成的多字节字符序列将被视为宽字符串文字；否则，它被视为字符串文字。

* * *

### 测试代码：

```
#include <assert.h>
#include <stdio.h>
#include <string.h>
#include <wchar.h>

#define A_STRING "xyz.txt"

/* MMT - Magical Mystery Tour */
#define MMT(x) L"" x

static char a[] = A_STRING;
static wchar_t w[] = MMT(A_STRING);

int main(void)
{
    int len1 = wcslen(w);
    int len2 = sizeof(w) / sizeof(w[0]) - 1;
    int len3 = strlen(a);
    int len4 = sizeof(a) / sizeof(a[0]) - 1;

    assert(len1 == len2);
    assert(len3 == len4);
    assert(len1 == len3);
    printf("sizeof(a) = %zu; sizeof(w) = %zu\n", sizeof(a), sizeof(w));

    for (int i = 0; i < len1; i++)
        printf("%d = %d\n", i, (int)w[i]);

    for (int i = 0; i < len1; i++)
        printf("%d = %d\n", i, (int)a[i]);

    return(0);
} 
```

### 汇编：

```
gcc -O3 -g -Wall -Wextra -std=c99  xx.c -o xx 
```

### 示例输出：

```
sizeof(a) = 8; sizeof(w) = 32
0 = 120
1 = 121
2 = 122
3 = 46
4 = 116
5 = 120
6 = 116
0 = 120
1 = 121
2 = 122
3 = 46
4 = 116
5 = 120
6 = 116 
```

### 测试平台

MacOS X 10.7.3（狮子）。64位编译。

> i686-apple-darwin11-llvm-gcc-4.2 (GCC) 4.2.1（基于 Apple Inc. build 5658）（LLVM build 2335.15.00）

# php - 最小化 jQuery 函数

> ID：10051660
> 
> 赞同：2
> 
> 时间：2012-04-07T04:08:59.253
> 
> 标签：php, javascript, jquery

我有一个函数可以根据行名为表单项添加更改事件（使用数据库来获取这些事件）。

继承人当前的功能：

```
 $sql = "SELECT * FROM product WHERE storeno = '1' ORDER BY descript";
    $result = mssql_query($sql, $msConnection);

    if ($result && mssql_num_rows($result) > 0) {
        while ($row = mssql_fetch_object($result)) {
            $sku = trim($row->mas90sku);
            $JQueryReadyScripts .= "
            $('#newCount_" . $sku . "_row .cases').change(function() {
                var count = 0;
                $('#newCount_" . $sku . "_row .cases').each(function () {
                    count += parseFloat($(this).val());
                });
                $('#cases_total_" . $sku . "').text(count);
            });
            $('#newCount_" . $sku . "_row .units').change(function() {
                var count = 0;
                $('#newCount_" . $sku . "_row .units').each(function () {
                    count += parseFloat($(this).val());
                });
                $('#units_total_" . $sku . "').text(count);
            });";
        }
        mssql_free_result($result);
    } 
```

如何将其合并到影响每一行的调用中，以便我可以摆脱 DB 部分并且只有 2 段（或 1 段）代码，而不是每行 2 段。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-07T04:24:34.667

您可以对案例和单位执行类似的操作（请注意，您需要适当地更改总数的 ID）

```
$('.cases').change(function() {
    var id = $(this).attr('id');
    var count = 0;
    $('#'+id+' .cases').each(function() {
        count += parseFloat($(this).val());
    });
    $('#count_'+id).text(count);
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-07T04:41:34.307

```
$('*[id^=newCount_]').each(function () {
  var $row = $(this), 
      sku  = this.id.replace(/newCount_(.*?)_row/, '$1');

  function sumValues($elems) {
    var sum = 0;
    $elems.each(function () { sum += parseFloat(this.value) });
    return sum;
  }

  $.each(['cases', 'units'], function (i, type) {
    $row.on('change', '.' + type, function () {
      $('#' + type + '_total_' + sku).text( sumValues($row.find('.' + type)) );
    });
  });
}); 
```

这对 PHP 没有依赖性，只需将其用作常规脚本即可。

它使用`.on()`事件委托，因此需要 jQuery 1.7+。对于早期版本的 jQuery，您可以使用`.delegate()`相同的效果。

我建议给你所有的行一个通用的 CSS 类，这样不那么好的`$('*[id^=newCount_]')`可以用更简单的东西代替，但这是一个表面上的改变。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-07T04:39:06.180

我不确定这是否适用于您的两个功能。不确定确切的标记。但可能值得一试。

```
$('#newCount_' + $sku + '_row .cases, #newCount_' + $sku + '_row .units').change(function() {
    var count = 0,
        thisClass = ( $(this).hasClass('cases') ) ? 'cases' : 'units';

    $('#newCount_" . $sku . "_row .'+thisClass).each(function () {
         count += parseFloat($(this).val());
    });
    $('#'+thisClass+'_total_" . $sku . "').text(count);
}); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-07T04:26:04.407

类选择器和 id 选择器之间的主要区别在于 id 选择器应该是唯一的，而类选择器不是。

在更改事件的主体中使用 $(this)，因此操作是相对的，您可以编写一个处理所有情况的更改事件。

```
<input class="cases" id="newCount_123"></input>
<input class="cases" id="newCount_345"></input>

$('.cases').change(function() {
            var count = 0;
            var sku = $(this).attr("id");
            count += parseFloat($(this).val());
            $('#cases_total_' + sku).text(count);
}); 
```

这也将 JavaScript 排除在您的 PHP 之外，这很难维护并且违反了 MVC 原则。您的服务器端代码负责检索数据并将其发送到客户端，而您的客户端代码负责处理视图。

# java - Java：尝试更改矩形位置时出现 ArrayIndexOutOfBoundsException

> ID：10051662
> 
> 赞同：1
> 
> 时间：2012-04-07T04:09:29.917
> 
> 标签：java, arrays

我正在开发 Java 游戏，目前正在编写地图制作工具。我可以制作地图并绘制图块，但我需要能够更改这些图块的位置，以便角色可以看到地图的不同位置。当我尝试更改它时，在`moveMap()`方法中，它给了我这个错误：

```
Exception in thread "Thread-2" java.lang.ArrayIndexOutOfBoundsException: 570
at Base.moveMap(Base.java:88)
at Base.run(Base.java:55)
at java.lang.Thread.run(Unknown Source) 
```

我不知道为什么会这样 - 有人可以帮我理解这个问题。有没有其他方法可以移动瓷砖？

这是我的代码...

```
public class Base extends JPanel implements Runnable {

    private static String[] line = { 
        "wwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwww",
        "wwwwwwwwwwwwwwwwfffffffffffwwwwwwwwwww", 
        "wwwwwwffwwwwwwwwfwwwwwwwwwwwwwwwwwwwww",
        "wwwwwwfffffffwwwfwwwwwwwwwwwwwwwwwwwww",
        "wwwwwwffwwwffffffwwwwwwwwwwwwwwwwwwwww",
        "wwwwwwffwwwffffffwwwwwwwwwwwwwwwwwwwww",
        "wwwwwwfffffffwwwwwwwwwwwwwwwwwwwwwwwww",
        "wwwwwwffwwwwwwwwwwwwwwwwwwwwwwwwwwwwww", 
        "wwwwwwffwwwwwwwwwwwwwwffffffffwwwwwwww",
        "wwwwwwffwwwwwwwwwwwwwwwwwwwwffwwwwwwww",
        "wwwwffffffwwwwwwwwwwwwwwwwwwffwwwwwwww",
        "wwwwffffffffffffffffffffffffffwwwwwwww",
        "wwwwffffffwwwwwwwwwwwwwwwwwwwwwwwwwwww",
        "wwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwww",
        "wwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwww",};

    private Rectangle[] colRect;

    private int tileWidth = 30;
    private int tileHeight = 30;

    public Base() {
        colRect = new Rectangle[line.length * line[0].length()];
        for (int i = 0; i < line.length; i++) {
            for (int f = 0; f < line[i].length(); f++) {
                colRect[counter] = new Rectangle(f * tileWidth, i * tileHeight,tileWidth, tileHeight);
                if (counter != colRect.length) {
                    counter += 1;
                }
            }
        }
    }

    public void moveMap(){
        for(int i = 0; i <= colRect.length; i++){
            colRect[i].setLocation(colRect[i].x+1, colRect[i].y+1);
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-07T04:12:28.573

你几乎肯定是这个意思：

```
for (int i = 0; i < colRect.length; i++) { 
```

而不是这个：

```
for(int i = 0; i <= colRect.length; i++){ 
```

请记住，如果数组的长度为 n，则索引从 0 到 n - 1。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-07T10:05:29.607

我建议您只修改几何图形的访问器，而不是地图本身。因为看起来，函数 moveMap 可能有某种“循环”行为

```
getLocation (int index, offset = 0){
    int accIndex = (index + offset) % colRect.length;
    // ... probably better to modify your data-structure to simplify the handling
} 
```

# android - 在android中使用媒体记录器获取视频的经过时间

> ID：10051663
> 
> 赞同：1
> 
> 时间：2012-04-07T04:09:39.737
> 
> 标签：android

我正在使用 MediaRecorder 并录制音频/视频。如何查看视频的播放时间？我熟悉这个技巧：

```
start = System.currentTimeMillis();
...
long seconds = (System.currentTimeMillis() - start) / 60) 
```

但想知道是否有一种原生方式来处理实际视频。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-07T04:19:13.150

如果它适合你，试试这个::::

```
//If it returns  milliseconds, divide by 1000
int playTime = mVideoView.getCurrentPosition(); 
```

# html - 无法确定解析模式

> ID：10051667
> 
> 赞同：0
> 
> 时间：2012-04-07T04:10:48.843
> 
> 标签：html

我正在尝试验证以下站点： http: [//www.canning.co.nz/Game/index.html](http://www.canning.co.nz/Game/index.html)

我收到以下警告：无法确定解析模式！

有人可以描述我应该做些什么来解决这个问题吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-07T06:42:24.513

如果您收到警告“无法确定解析模式！” 来自 W3C 标记验证器，然后警告紧跟在解释之后。这是相当技术性的，但归结为验证器会将文档视为“经典”，名义上是基于 SGML 的 HTML，因为它的决策机制并没有明确地告诉它是应该这样做还是应该使用 XHTML。

例如，如果您在 doctype 声明中打错字，就会触发警告，比如写 Transtional 而不是 Transitional。原因是拼写错误使声明无法识别。

也许您在发布问题后修复了您的文档，因为现在它在没有警告的情况下验证：http: [//validator.w3.org/check ?verbose=1&uri=http%3A%2F%2Fwww.canning.co.nz%2FGame% 2Findex.html](http://validator.w3.org/check?verbose=1&uri=http%3A%2F%2Fwww.canning.co.nz%2FGame%2Findex.html)

# xpages - 在 XPages Mobile App / Mobile Control 中，如何制作选择列表

> ID：10051669
> 
> 赞同：1
> 
> 时间：2012-04-07T04:11:06.827
> 
> 标签：xpages, mobile-controls

我有两个页面，一个页面用于输入，另一个页面用于选项，如何将值表单页面发送到 xPages Mobile Controls 上的另一个页面，或者是否有其他方法可以做到这一点。

请参阅我的示例页面： 1\. 第 1 页：用户输入

[http://i1248.photobucket.com/albums/hh490/dannysumarnach/page_1_form_user_input.jpg](http://i1248.photobucket.com/albums/hh490/dannysumarnach/page_1_form_user_input.jpg)

1.  第 2 页：选择列表

[http://i1248.photobucket.com/albums/hh490/dannysumarnach/page_2_user_choice_PickList.jpg](http://i1248.photobucket.com/albums/hh490/dannysumarnach/page_2_user_choice_PickList.jpg)

注意：内置预输入不可用

问候，

丹尼

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-10T09:30:57.887

看看我关于这个主题的博客文章。有几个问题需要解决，最值得注意的是，确保包含文档数据源的页面在正确的时间重新计算。我正在研究它的 NotesIn9。

第 3 部分涵盖了一些修改，以使其与现有文档一起工作，并包括一个示例页面，该页面将在 Extension Library Demo db 中工作。请注意第二部分中需要创建的额外视图和其他详细信息。 [http://www.intec.co.uk/xpages-mobile-controls-and-value-pickers-part-three-client-side-approach-extended/](http://www.intec.co.uk/xpages-mobile-controls-and-value-pickers-part-three-client-side-approach-extended/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-07T14:20:21.930

使用单页应用程序控件时，前面的内置类型缺少 dojo tundra.css 文件。该文件随 Dojo 一起提供，只是不包括在内。导入此文件以使类型提前工作。

我不确定您将值从一个页面传递到另一个页面是什么意思，您可以将数据提交到文档并在另一个页面中打开它，将其添加到范围变量，将参数添加到 URL。所有这些选项都将起作用。

# javascript - 未捕获的类型错误：对象# 没有方法“点击”

> ID：10051670
> 
> 赞同：1
> 
> 时间：2012-04-07T04:11:21.730
> 
> 标签：javascript, jquery, google-chrome, jquery-selectors, jquery-events

我想从当前活动项目中单击下一个 li 项目。其中 li 是活动的，它的标签包含活动类。

所以首先，我激活了一个标签，它是父李。现在我在 ul 中得到 li 的索引。然后在其值中添加 1 并获取下一个标签并在其上触发点击事件。

我的代码在 IE 和 Firefox 中运行良好，但在 Chrome 中出现以下异常。

> “未捕获的类型错误：对象 #<an Object> 没有方法 'click'”

请在我的代码中建议我可用的链接或示例代码或更正。

我的html代码是：-

```
 <nav class="cycle-nav-container" role="navigation">         
   <ul class="list-b" id="cycle-1-nav">
            <li class="hitmo"><a href="http://hitmo-studio.com/#hitmo">Hitmo</a></li>
            <li class="fastpr"><a href="#" class="active">FastPr</a></li>
            <li class="thinkmedia"><a href="http://hitmo-studio.com/#thinkmedia">Thinkmedia</a></li>
            <li class="arkana"><a href="http://hitmo-studio.com/#arkana">Arkana</a></li>
            <li class="bioway"><a href="http://hitmo-studio.com/#bioway">Bioway</a></li>
            <li class="nana"><a href="http://hitmo-studio.com/#nana">Nanaform</a></li>
            <li class="akademia"><a href="http://hitmo-studio.com/#akademia">Social Media Academy</a></li>
        </ul>
  </nav> 
```

我的 Javascript 代码是：-

```
 var navIndex = $('.cycle-nav-container .list-b .active').parent();
    var nextIndex = $("ul.list-b li").index(navIndex) + 1;
    var par = $("ul.list-b");
    if(nextIndex>=par[0].children.length)
    nextIndex=0;
    var nextElement = par[0].children[nextIndex];
    var navIndex12 = nextElement.children[0];
   navIndex12.click(); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-09T15:57:50.703

为了调用 DOM 元素的点击处理程序，IE 定义了一个基本上触发 click 事件的 click 方法。Firefox 从 FF 5+ 开始实现它。

然而，Chrome 仍然使用标准的 W3C 定义的 dispatchEvent 以编程方式触发事件。

或者，返回的 navindex12 对象也可能是 DOMTextElement。尝试提醒 navindex12.nodeType

总而言之，您应该在调用 click 方法之前尝试优雅地检查浏览器和元素约束。

# android - 适用于 Android 2.3.4 的 USB 代码

> ID：10051671
> 
> 赞同：1
> 
> 时间：2012-04-07T04:11:24.647
> 
> 标签：android, usb

我想在我的应用程序中使用 USB 将数据从我的计算机（存在于文本文件中）检索到 android 手机并读取它......硬件方面的必需品和 USB 代码的有用链接......

最近谷歌推出了适用于 android 2.3 的 USB 配件......它有类 UsbManager、UsbAccessory 等......我想用那个......它怎么用.??

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-07T05:12:38.943

通常会观察到与此相反的情况，其中 android mobile 将自身投射为 USB 设备（客户端），计算机上的 USB 主机控制器驱动程序会识别该设备并处理来自客户端的未来 USB 请求。请注意，这只是硬件层。由于 USB 协议变得如此普遍，计算机实际上在内核层和用户空间都存储了多个驱动程序系列，以便能够处理各种请求及其用户空间解释。

由于 android 手机主要是基于 linux 的设备，为了达到您的目的，您需要将这些基于 USB 主机的驱动程序系列集成到您设备的内核/ROM 中。您将需要创建一个自定义 ROM（其他人[在这里](https://stackoverflow.com/questions/6232620/getting-started-with-creating-custom-roms)问过这个问题）。[此链接](http://www.linux-usb.org/devices.html)为您提供与特定硬件系列相对应的驱动程序列表。

此外，您需要在计算机上设置必要的程序，使其能够将自己投影为 USB 客户端。

如果您也在计算机上使用 linux，那么[本文](http://www.linuxjournal.com/article/7353)可能会帮助您入门。

# git - Git 对 HEAD 的更新版本

> ID：10051678
> 
> 赞同：0
> 
> 时间：2012-04-07T04:14:17.313
> 
> 标签：git

我是 git 的新手，想了解如何与几个朋友一起使用 git 进行项目协作。我的问题是试图了解如何在 git 中“更新到 HEAD（如在 SVN 中）”。我了解 git 有点不同，我将不胜感激。

所以考虑这种情况。有人员 A 和人员 B。人员 A 通过添加 1 来更改文件。然后他表演：

1.  提交在他自己的分支上
2.  切换到大师
3.  拉原点大师
4.  git 合并 personAbranch
5.  git push 起源大师

所以，到目前为止，这是可行的，因为在 GitHub 上，存储库已经用 Person A 的更改进行了更新。

现在，假设 B 在这段时间里也一直在做他自己的改变。他也做了1个加法。B 人应该做什么“更新到 HEAD”，以便他也可以提交他的更改。B 人尝试过的是……

1.  将自己的更改提交到自己的分支。
2.  切换到大师
3.  git pull 起源大师
4.  git 合并大师伊恩。

在第四行，他总是收到关于冲突的投诉。为什么？！

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-07T07:46:42.233

如果 git 抱怨冲突，这意味着 A 人和 B 人（他的名字可能是 Ian 吗？；）修改了同一个文件，并且更改，嗯，冲突。文件要么是二进制文件，git 永远无法解析两个不同的修改，要么是文本文件，两个修改涉及同一组行。

你将不得不解决冲突。你可以`git mergetool`用来帮助解决这个问题。

（冲突不是 git 独有的。出于同样的原因，Subversion 也可能发生冲突。）

# c++ - C++ 标记字符串

> ID：10051679
> 
> 赞同：13
> 
> 时间：2012-04-07T04:14:27.347
> 
> 标签：c++, string, split, token

我正在寻找一种简单的方法来标记字符串输入，而不使用非默认库，如 Boost 等。

例如，如果用户输入了 40_5，我想使用 _ 作为分隔符来分隔 40 和 5。

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2012-04-07T04:49:51.877

要将字符串转换为标记向量（线程安全）：

```
std::vector<std::string> inline StringSplit(const std::string &source, const char *delimiter = " ", bool keepEmpty = false)
{
    std::vector<std::string> results;

    size_t prev = 0;
    size_t next = 0;

    while ((next = source.find_first_of(delimiter, prev)) != std::string::npos)
    {
        if (keepEmpty || (next - prev != 0))
        {
            results.push_back(source.substr(prev, next - prev));
        }
        prev = next + 1;
    }

    if (prev < source.size())
    {
        results.push_back(source.substr(prev));
    }

    return results;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-07T04:21:55.753

您可以使用[strtok_r](http://linux.die.net/man/3/strtok)函数，但请仔细阅读手册页，以便了解它如何维护状态。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-02T14:09:25.983

查看[本](http://www.cplusplus.com/faq/sequences/strings/split/)教程，这是迄今为止我发现的关于标记化的最佳教程。它涵盖了实现不同方法的最佳实践，包括在 C++ std 中使用**getline()**和**find_first_of()以及在 C 中使用****strtok()**。

# php - 使用 .htacess 文件中的 mod_rewrite 更改 URL 文件夹层次结构

> ID：10051680
> 
> 赞同：0
> 
> 时间：2012-04-07T04:14:31.287
> 
> 标签：php, css, apache, .htaccess

我用 php 创建了一个网站，并在我的 htdocs 文件夹中编写了 .htacess 文件：

> ```
> RewriteEngine on 
> RewriteBase /
> 
> RewriteRule ^([a-zA-Z0-9]+)/?$ ?mainquery=$1 [QSA]
> 
> RewriteRule ^([a-zA-Z0-9]+)/([a-zA-Z0-9]+)$ ?mainquery=$1&subquery=$2 [QSA] 
> ```

我的意图是重定向网址：

> '/A/B' => '/?mainquery=A&subquery=B'。

如果主查询是一个，一切正常。
但是当 url 有两个查询时，php 可以正常工作，但是文件夹层次结构会移动，因此每个具有相对 url 的图像和 css 文件都不起作用。

它工作得很好

> （我正在 MAMP 上构建我的网站，因此域现在是 localhost。）
> 
> 'localhost/publications/articles' => 'localhost/?mainquery=publications&subquery=articles'

但 html 认为主要 url 是*'localhost/publications'*，而不仅仅是*'localhost/'*。

所以每个具有 src 属性的 img 标签

> img src='图像/myImage.jpg'

不起作用，因为 html 认为图像在*'localhost/publications/images/'*中，而不是*'localhost/images/'*中。

css文件也是如此。

我拉头发3天了，但我自己解决不了。

我怎么解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-07T04:16:35.783

更改此行：

```
RewriteRule ^([a-zA-Z0-9]+)/([a-zA-Z0-9]+)$ ?mainquery=$1&subquery=$2 [QSA] 
```

对此：

```
RewriteRule ^([a-zA-Z0-9]+)/([a-zA-Z0-9]+)$ /?mainquery=$1&subquery=$2 [QSA] 
```

重写的规则需要是根相关的，否则它将与请求的 URL 相关，该 URL 已经在子文件夹中。

我*想*这就是你要问的。如果你只是问如何指向 images/css/js root-relative，改变这个：

```
<img src="images/myImage.jpg" /> 
```

对此：

```
<img src="/images/myImage.jpg" /> 
```

# java - 当文件已存在时尝试启动程序时出现异常

> ID：10051683
> 
> 赞同：0
> 
> 时间：2012-04-07T04:15:14.770
> 
> 标签：java, file

我有一个将文本写入文件的应用程序。如果文件不存在，则创建它。

当我第一次运行该应用程序时，它一切正常并创建了文件。但是，随后的每一次都会导致应用程序崩溃。您能否帮助解释为什么它不能多次工作。

我的代码如下...

```
public class Apples {

    Formatter x;
    File file = new File("myfile.txt");

    public Apples() {

        if (!file.exists()) {
            try {
                x = new Formatter("myfile.txt");
            }
            catch (Exception e) {
                System.out.println("There was an error creating the file");
            }

            System.out.println("The file was created");
        } 
        else {
            System.out.println("The file already exists");
            }

        x.format("%s", "text");
        x.close();
    }

    public static void main(String[] args) throws FileNotFoundException {
        Apples a = new Apples();
    }

} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-07T04:16:52.147

我怀疑问题是`NullPointerException`在线的，因为如果文件已经存在，`x.format("%s", "text");`您没有分配值。`x`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-07T04:21:02.080

第二次`x`是空的，因为你没有初始化它。

# javascript - Backbone.js collection.models 没有显示，但有

> ID：10051685
> 
> 赞同：0
> 
> 时间：2012-04-07T04:15:45.717
> 
> 标签：javascript, json, backbone.js, underscore.js

我有一个视图，它正在对集合执行 fetch() 并从服务器返回一些模型。

```
ProductsView = Backbone.View.extend({

    initialize: function() {
        _.bindAll(this, 'render');
        this.collection = new ProductCollection();
        this.collection.fetch({data: {limit : this.options.limit}});

        console.log(this.collection);

        this.render();
    },
    render: function() {

        var template = _.template( $("#product-template").html(), this );
        $(this.el).html( template );
        return this;
    }
}); 
```

在上面的 console.log 中，我看到这样的对象：

```
products.view.js:13
d
_byCid: Object
_byId: Object
length: 7
models: Array[7]
__proto__: x 
```

就在`models`那里，但是当我这样做时，`console.log(this.collection.models)`它只显示`[]`在模型内部是一个像这样的对象数组：

```
models: Array[7]
0: d
1: d
2: d
3: d
4: d
5: d
6: d 
```

其中每一个都`attributes`带有返回的值。

`this.collection.models`任何想法为什么在我使用或使用时模型不会显示`get()`也不起作用。

非常感谢！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-07T04:22:35.083

一般`this.collection.fetch({data: {limit : this.options.limit}})`是异步操作，所以你下一行不一定要打印正确的内容`collection`。

相反，您应该使用`success`和`error`回调该`fetch`方法作为其`options`参数的一部分提供（或侦听集合的`change`事件），如下所示：

```
this.collection.fetch(
    { 
        data: { limit : this.options.limit },
        success : function(collection, rawresponse) { 
            // do something with the data, like calling render 
        }
    }
); 
```

为了完整起见：

```
this.collection.on('change', function(){ // some handling of the data };
this.collection.fetch(); 
```

是基于事件的方法。

# ruby-on-rails - 如何使用 rspec 测试控制器方法？

> ID：10051686
> 
> 赞同：23
> 
> 时间：2012-04-07T04:15:55.943
> 
> 标签：ruby-on-rails, testing, methods, rspec, controller

我正在尝试学习rspec。我似乎无法测试 rails 控制器方法。当我在测试中调用方法时，rspec 只是返回一个未定义的方法错误。这是我的测试示例

```
it 'should return 99 if large' do
  GamesController.testme(1000).should == 99
end 
```

这是错误：

```
 Failure/Error: GamesController.testme(1000).should == 99
 NoMethodError:
   undefined method `testme' for GamesController:Class 
```

我在 GamesController 中有一个 testme 方法。我不明白为什么测试代码看不到我的方法。

任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：39
> 
> 时间：2013-09-22T18:59:46.450

我认为正确的方法是这样的：

```
describe GamesController do
  it 'should return 99 if large' do
    controller.testme(1000).should == 99
  end
end 
```

在 Rails 控制器规范中，当您将控制器类放入时`describe`，您可以使用`controller`方法获取实例：P
显然，如果`testme`方法是私有的，您仍然必须使用`controller.send :testme`

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-04-07T05:07:19.397

您尝试测试类方法，但控制器具有实例方法

你需要`GamesController.new.testme(1000).should == 99`

甚至`GamesController.new.send(:testme, 1000).should == 99`，因为我认为这不是操作方法，而是私有或受保护的。

动作方法是[这样测试的](https://www.relishapp.com/rspec/rspec-rails/v/2-9/docs/controller-specs/controller-spec)

# c++ - 用于两个矩阵或向量相乘的基本 C++ 代码

> ID：10051687
> 
> 赞同：0
> 
> 时间：2012-04-07T04:15:56.250
> 
> 标签：c++, math, vector, matrix

我从 Internet 上获得了一些代码，现在我只需要帮助来将两个矩阵或向量的元素相乘。

```
Matrixf multiply(Matrixf const& left, Matrixf const& right) {

    // Error check
    if (left.ncols() != right.nrows()) {
        throw std::runtime_error("Unable to multiply: matrix dimensions not agree.");
    }

    /* I have all the other part of the code for matrix */

    /** Now I am not sure how to implement multiplication of a vector or matrix. **/

    Matrixf ret(1, 1);

    return ret;
} 
```

背景：我是一个新的 C++ 用户，我也是数学专业的，所以我想我会尝试实现一个简单的计算器。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-19T03:36:05.120

我建议查看[Armadillo](http://arma.sourceforge.net) C++ 矩阵库的源代码。虽然很大，但可读性很强。

特别是，请查看实现矩阵/矩阵乘法的“gemm.hpp”文件和实现矩阵/向量乘法的“gemv.hpp”文件。文件“Mat_bones.hpp”和“Mat_meat.hpp”提供了根矩阵类。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-07T04:45:22.683

你拥有的代码很难（作为一个局外人），因为我们需要知道这个类是如何`Matrixf`工作的。无论如何，我将概述一种方法，它可能会为您指明正确的方向。在 C/C++ 中表示矩阵的最简单方法就是一个二维浮点数组，如下所示：

```
float matrix[3][3]; // 3x3 Matrix 
```

考虑到你已经知道数学，我认为你所需要的只是一些关于你需要的编码方面的指导。要将其中两个矩阵的元素相乘，只需执行以下操作：

```
matrixC[0][1] = matrixA[0][0] * matrixB[0][0]; 
```

这会将 的左上角元素`matrixA`和 的左上角元素相乘的结果存储在`matrixB`的中上元素中`matrixC`。本质上，第一个方括号代表*行*，第二个方括号代表*列*（但是，只要您保持一致，您希望行和列的顺序完全取决于您）。

向量可以类似地表示：

```
float vector[3]; // 3d vector 
```

当然，因为我们使用的是 C++，所以有更好的方法来做到这一点。似乎您有一些资源描述了以类为中心的方法来执行此操作。基于类的方法的好处是您可以像这样以简洁的方式抽象乘法运算：

```
Matrix3x3f matrix( 1.0f, 0.0f, 0.0f,
                   0.0f, 1.0f, 0.0f,
                   0.0f, 0.0f, 1.0f );

Vector3f   vector( 0.2f, 1.4f, -3.1f );

matrix.multVec( vector ); 
```

...或类似的东西。

（还值得一提的是，已经有一些图书馆已经在做这种事情，而且效率也很高。）

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2012-04-07T04:50:16.463

我建议您使用诸如[Eigen](http://eigen.tuxfamily.org/index.php?title=Main_Page)（非常快）或[Boost uBLAS 矩阵](http://www.boost.org/doc/libs/1_49_0/libs/numeric/ublas/doc/index.htm)（相对而言不那么快）类之类的库。不过，如果您正在尝试学习如何做到这一点，那么建立自己的课程并没有什么坏处。执行此操作的标准方法是使用该类型的模板。您还可以通过一些进一步的调查使用尺寸模板（留给读者作为练习）。

```
template <typename T> class matrix
{
private:
    T *_m;
    std::size_t _rows;
    std::size_t _cols;

public:
    matrix(std::size_t rows, std::size_t cols)
      : _m(new T[rows*cols]), _rows(rows), _cols(cols) {}

    matrix(matrix<T>&& src)
      : _m(src._m), _rows(src._rows), _cols(src._cols)
    {
        src._m = NULL;
        src._rows = 0;
        src._cols = 0;
    }

    matrix<T>& operator=(matrix<T>&& src)
    {
        delete[] this->_m;
        this->_m = src._m;
        this->_rows = src._rows;
        this->_cols = src._cols;
        src._m = NULL;
        src._rows = 0;
        src._cols = 0;

        return *this;
    }

    virtual ~matrix()
    {
        delete[] this->_m;
    }

    inline float& operator()(std::size_t r, std::size_t c)
    {
        assert(r < this->_rows && c < this->_cols);
        return this->_m[r*this->_cols + c];
    }

    inline std::size_t rows() { return this->_rows; }
    inline std::size_t cols() { return this->_cols; }
};

template <typename T>
matrix<T> operator*(const matrix<T>& l, const matrix<T>& r)
{
    assert(l.cols() == r.rows());
    matrix<T> rv(l.rows(), r.cols());

    for (std::size_t r = 0; r < rv.rows(); ++r)
        for (std::size_t c = 0; c < rv.cols(); ++c);
        {
            rv(r, c) = (T) 0;
            for (std::size_t i = 0; i < l.cols(); ++i)
                rv(r, c) += l(r, i) * r(i, c);
        }

    return rv;
} 
```

这有几个[C++11](https://en.wikipedia.org/wiki/C%2B%2B11)方面，即移动构造函数和赋值运算符。如果您还没有使用 C++11，请将它们分别替换为传统的复制和赋值运算符。此外，这是一种幼稚的乘数。您可以使用一些效率来消除许多矩阵元素查找，方法是将它们替换为迭代器样式构造。

# jquery - 通过 jQuery 使用淡出 div 作为启动屏幕？

> ID：10051692
> 
> 赞同：0
> 
> 时间：2012-04-07T04:16:47.107
> 
> 标签：jquery, html, splash-screen, fadeout

在页面加载时显示 div 的脚本使用 jQuery 来模拟闪屏？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-23T23:19:22.273

那很简单！你可以使用 jQuery `fadeOut()`！这是代码：

CSS

```
#splashscreen {
    height: 100%;
    width: 100%;
    z-index: 99;
} 
```

上面的 CSS 将使启动画面填满整个页面并高于一切。

jQuery JS

```
$(window).load(function() {
    $('#splashscreen').fadeOut('slow');
}); 
```

这样做的目的是，当它检测到页面已加载时，它会慢慢淡出闪屏 div。

HTML

```
<div id="splashscreen">
    Put your splashscreen content here. It can be anything!
</div> 
```

这就是创建启动画面所需的全部内容。不幸的是，这不能在 JSFiddle 中模拟。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-04-07T04:46:18.847

您可以在加载脚本的某些部分后调用函数来计时加载：

```
$(document).ready(function() {
    var oneLoaded;
    function partOneLoaded() {
        oneLoaded = 1;
        loadReady();
    }
    var twoLoaded;  
    $('div').load('../inc/salesstatus.php, function() {
        twoLoaded = 1;
        loadReady();
    });      
    function loadReady(){
        if (oneLoaded == 1 && twoLoaded == 1)
            $('#loadcontainer').fadeOut('slow');
    }

/* ****rest of your script here  ****** */

// ie) at the end of your scripts: 

partOneLoaded();    

}); 
```

加载某些内容或运行脚本后，您将调用您的函数，并且它们每个都尝试调用 loadReady()。只有最后一次尝试才能成功淡出您的 div。在脚本末尾调用一次，如果 loadcontainer 在加载其他内容之前淡出，则在尚未加载的项目末尾添加另一个函数。

我不会进入加载 div 的 css 和 html，因为它超出了您的问题范围。

你的问题很模糊。将来，请提供更多详细信息，以便我们更好地了解您正在使用的内容。

# android - Android 浏览器中的 Slickgrid（内部 div 滚动）

> ID：10051694
> 
> 赞同：2
> 
> 时间：2012-04-07T04:17:40.213
> 
> 标签：android, scroll, slickgrid

Android 浏览器无法滚动内部 div。这意味着使用默认配置的 SlickGrid 是不可能的。

幸运的是，SlickGrid 有一个 autoHeight 参数，使它不使用内部可滚动内容，因此它适用于 android. 不幸的是，当启用 autoHeight 时，onViewportChanged 会被调用一次以跨越整个视口，并且永远不会再次调用，因此它会尝试一次加载所有数据。我正在延迟加载和显示如此多的远程数据，如果您尝试一次加载所有数据，它会使移动设备崩溃，所以这是不行的。

如果 SlickGrid 足够聪明，即使启用了 autoHeight，也可以知道屏幕上的内容，那将解决我的问题。如果这是核心功能，我会喜欢它，因为这将解决桌面和 Android 设备上的许多问题。

我还尝试使用[iScroll 4](http://cubiq.org/iscroll-4)来绕过 Android 限制。不幸的是，当我使用 iScroll 时，它根本不会触发 onViewportChanged。

我可能不得不放弃或修改 onViewportChanged 来处理我自己的滚动事件来解决这个问题。我想知道是否有一个现有的解决方案。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-10T01:53:52.423

为此，我最终编写[了自己的 slickgrid 版本。](https://github.com/nickretallack/SlickGriddle)此外，当 Google Chrome 成为默认浏览器时，这将变得无关紧要，因为它实际上对滚动提供了不错的支持。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-09T20:49:23.253

我不建议将 SlickGrid 用于针对移动设备的应用程序/页面。网格的开发并未考虑到移动设备。他们需要针对特定​​用例优化的完全不同的方法。

# couchbase - 在 Couchbase 2.0 中，如何获取视图列表？

> ID：10051704
> 
> 赞同：1
> 
> 时间：2012-04-07T04:19:39.573
> 
> 标签：couchbase

我希望能够使用 python API（或任何 API）获取可用于存储桶的视图列表。我该怎么做呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-13T17:38:09.427

```
import couchbase
from couchbase.rest_client import RestConnection
import json

server_info = { "ip" : "127.0.0.1", "port" : 8092, 
                "username" : "", 
                "password" : "", 
                "couchApiBase" :  "http://127.0.0.1:8092/" }
rest = RestConnection(server_info)

params = "startkey=\"_design\"&endkey=\"_design0\""
design_docs_uri = "http://%s:8091/couchBase/default/_all_docs?%s" % (server_info["ip"], params)

#not supported as public API
response, content = rest._http_request(design_docs_uri, 'GET', headers=rest._create_headers())
json_parsed = json.loads(content)

for row in json_parsed["rows"]:
    design_doc = row["key"].split("/")[1]

    print "Views for design doc: %s" % design_doc
    doc = rest.get_design_doc("default", design_doc)
    #get views element from dictionary
    for view in doc["views"]:
        print "\t%s" % view 
```

# javascript - Javascript 日期格式问题

> ID：10051706
> 
> 赞同：0
> 
> 时间：2012-04-07T04:19:55.043
> 
> 标签：javascript

我正在尝试以“mmdd”格式在 js 中格式化日期作为最终结果。

如果我设置`var s = ""`我会达到我的警报，但如果我不这样做，则代码不会运行。

任何指针将不胜感激！

```
 function stateChange(e){
                var p = (document.getElementById("stateSelect").value);
                var t = new Date();
                var s = t.format("mmdd");
                alert(s);
            } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-07T04:25:10.010

javascript 中没有日期的函数格式。

下面是一个页面链接，该页面有 10 种不同的 javascript 日期格式： [http ://www.webdevelopersnotes.com/tips/html/10_ways_to_format_time_and_date_using_javascript.php3](http://www.webdevelopersnotes.com/tips/html/10_ways_to_format_time_and_date_using_javascript.php3)

**编辑**

下面的内容看起来也很有希望用于获得您所追求的东西：

[http://www.datejs.com/](http://www.datejs.com/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-07T04:36:40.337

试试这个：

```
function pad(n){return n<10 ? '0'+n : ''+n}

var t = new Date();
var s=pad(t.getMonth()+1)+pad(t.getDate());
alert(s); 
```

# javascript - 从 jQuery 中删除未使用的变量

> ID：10051710
> 
> 赞同：1
> 
> 时间：2012-04-07T04:21:17.743
> 
> 标签：javascript, jquery, variables

我有一个已收紧和缩小的 jQuery 脚本。我不喜欢链接到一个 CDN jQuery 脚本，它需要一个 HTTP 请求加上 40-90kb 的客户端下载。

我听说可以调整新的 Google 闭包编译器以从 jQuery 中删除未使用的变量以减小大小。我了解使用 CDN 链接（如 google）的优势，但由于我只将此代码用于单个页面，因此我更愿意从 jQuery 中删除未使用的变量并自己托管它。

我正在使用 jQuery 1.5.2，这是我的脚本：

```
(function(a){a.fn.countDown=function(b){config={};a.extend(config,b);diffSecs=this.setCountDown(config);config.onComplete&&a.data(a(this)[0],"callback",config.onComplete);config.omitWeeks&&a.data(a(this)[0],"omitWeeks",config.omitWeeks);a("#"+a(this).attr("id")+" .digit").html('<div class="top"></div><div class="bottom"></div>');a(this).doCountDown(a(this).attr("id"),diffSecs,500);return this};a.fn.stopCountDown=function(){clearTimeout(a.data(this[0],"timer"))};a.fn.startCountDown=function(){this.doCountDown(a(this).attr("id"), a.data(this[0],"diffSecs"),500)};a.fn.setCountDown=function(b){var c=new Date;b.targetDate?c=new Date(b.targetDate.month+"/"+b.targetDate.day+"/"+b.targetDate.year+" "+b.targetDate.hour+":"+b.targetDate.min+":"+b.targetDate.sec+(b.targetDate.utc?" UTC":"")):b.targetOffset&&(c.setFullYear(b.targetOffset.year+c.getFullYear()),c.setMonth(b.targetOffset.month+c.getMonth()),c.setDate(b.targetOffset.day+c.getDate()),c.setHours(b.targetOffset.hour+c.getHours()),c.setMinutes(b.targetOffset.min+c.getMinutes()), c.setSeconds(b.targetOffset.sec+c.getSeconds()));diffSecs=Math.floor((c.valueOf()-(new Date).valueOf())/1E3);a.data(this[0],"diffSecs",diffSecs);return diffSecs};a.fn.doCountDown=function(b,c,d){$this=a("#"+b);0>=c&&(c=0,a.data($this[0],"timer")&&clearTimeout(a.data($this[0],"timer")));secs=c%60;mins=Math.floor(c/60)%60;hours=Math.floor(c/60/60)%24;days=!0==a.data($this[0],"omitWeeks")?Math.floor(c/60/60/24):Math.floor(c/60/60/24)%7;weeks=Math.floor(c/60/60/24/7);$this.dashChangeTo(b,"seconds_dash", secs,d?d:800);$this.dashChangeTo(b,"minutes_dash",mins,d?d:1200);$this.dashChangeTo(b,"hours_dash",hours,d?d:1200);$this.dashChangeTo(b,"days_dash",days,d?d:1200);$this.dashChangeTo(b,"weeks_dash",weeks,d?d:1200);a.data($this[0],"diffSecs",c);0<c?(e=$this,t=setTimeout(function(){e.doCountDown(b,c-1)},1E3),a.data(e[0],"timer",t)):(cb=a.data($this[0],"callback"))&&a.data($this[0],"callback")()};a.fn.dashChangeTo=function(b,c,d,m){$this=a("#"+b);for(b=$this.find("."+c+" .digit").length-1;0<=b;b--){var j= d%10,d=(d-j)/10;$this.digitChangeTo("#"+$this.attr("id")+" ."+c+" .digit:eq("+b+")",j,m)}};a.fn.digitChangeTo=function(b,c,d){d||(d=800);a(b+" div.top").html()!=c+""&&(a(b+" div.top").css({display:"none"}),a(b+" div.top").html(c?c:"0").slideDown(d),a(b+" div.bottom").animate({height:""},d,function(){a(b+" div.bottom").html(a(b+" div.top").html());a(b+" div.bottom").css({display:"block",height:""});a(b+" div.top").hide().slideUp(10)}))}})(jQuery); jQuery(document).ready(function(){$("#countdown").countDown({targetDate:{day:7,month:5,year:2012,hour:8,min:0,sec:0,utc:!0}})});$(document).ready(function(){$("#xtreme_slider").tinycarousel()}); (function(a){function b(c,b){function m(){b.controls&&0<n.length&&0<o.length&&(n.click(function(){g.move(-1);return!1}),o.click(function(){g.move(1);return!1}));b.interval&&c.hover(g.stop,g.start);b.pager&&0<p.length&&a("a",p).click(x)}function j(){b.controls&&(n.toggleClass("disable",!(0<f)),o.toggleClass("disable",!(f+1<h)));if(b.pager){var c=a(".pagenum",p);c.removeClass("active");a(c[f]).addClass("active")}}function x(){a(this).hasClass("pagenum")&&g.move(parseInt(this.rel),!0);return!1}function v(){b.interval&& !q&&(clearTimeout(r),r=setTimeout(function(){f=f+1==h?-1:f;s=f+1==h?!1:0==f?!0:s;g.move(s?1:-1)},b.intervaltime))}var g=this,w=a(".viewport:first",c),u=a(".overview:first",c),i=u.children(),o=a(".next:first",c),n=a(".prev:first",c),p=a(".pager:first",c),k,h,f,r,q,s=!0,l="x"==b.axis;this.stop=function(){clearTimeout(r);q=!0};this.start=function(){q=!1;v()};this.move=function(a,c){f=c?a:f+=a;if(-1<f&&f<h){var g={};g[l?"left":"top"]=-(f*k*b.display);u.animate(g,{queue:!1,duration:b.animation?b.duration: 0,complete:function(){"function"==typeof b.callback&&b.callback.call(this,i[f],f)}});j();v()}};return function(){k=l?a(i[0]).outerWidth(!0):a(i[0]).outerHeight(!0);var c=Math.ceil((l?w.outerWidth():w.outerHeight())/(k*b.display)-1);h=Math.max(1,Math.ceil(i.length/b.display)-c);f=Math.min(h,Math.max(1,b.start))-2;u.css(l?"width":"height",k*i.length);g.move(1);m();return g}()}a.tiny=a.tiny||{};a.tiny.carousel={options:{start:1,display:1,axis:"x",controls:!1,pager:!0,interval:!0,intervaltime:5E3,rewind:!1, animation:!0,duration:1E3,callback:null}};a.fn.tinycarousel=function(c){c=a.extend({},a.tiny.carousel.options,c);this.each(function(){a(this).data("tcl",new b(a(this),c))});return this};a.fn.tinycarousel_start=function(){a(this).data("tcl").start()};a.fn.tinycarousel_stop=function(){a(this).data("tcl").stop()};a.fn.tinycarousel_move=function(b){a(this).data("tcl").move(b-1,!0)}})(jQuery); 
```

有人可以根据我的脚本从 jQuery 中删除未使用的代码吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-07T04:29:40.443

[您可以通过修改其构建脚本（ github 上的源代码](https://github.com/jquery/jquery)）来尝试自定义 jquery 构建。或者，如果可以的话，你可以试试[Zepto](http://zeptojs.com/)。这个库非常轻量级并且有 jQuery 兼容的 API。

另外，[相关问题](https://stackoverflow.com/questions/3143195/creating-a-custom-jquery-build)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-07T04:43:13.733

[Google Closure](http://closure-compiler.appspot.com/home "谷歌关闭")可以轻松地将简单代码减少**约 59% ，高级代码减少****约 65%**。我建议在生产服务器上使用它们之前尝试两者，并检查它们是否都工作，但这似乎是你想要的。

另外，在编译时，**请务必**使用顶部的选择框使用 jQuery 库进行编译。

# jquery - 产品中间对齐 div？

> ID：10051715
> 
> 赞同：0
> 
> 时间：2012-04-07T04:21:33.473
> 
> 标签：jquery, html, css

我的网上商店有各种各样的产品。假设我有三张产品图片，调整大小后是：

```
100 x 20
100 x 100
100 x 180 
```

100 x 180 是产品窗口可以采用的最大尺寸。为了获得完美的产品放置，我需要将所有这三个图像都放入 100 x 180 的窗口中。这不是很困难：

```
<div class="products" style="height: 180px;">
 <div class="product1">
   <img src="prod1.jpg" />
 </div>
 <div class="product2">
   <img src="prod2.jpg" />
 </div>
 <div class="product3">
   <img src="prod3.jpg" />
 </div> 
```

现在，问题在于这些图像都在顶部对齐。我需要它们全部中间对齐，就像表格一样。我可以很容易地用表格做到这一点，但我不知道如何用 CSS 做到这一点。它是像 CSS 一样简单，还是有类似的漂亮 JQuery 插件？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-07T06:58:29.893

`.products div { line-height: 180px; }`

…尽管理想情况下您应该使用某种列表，而不仅仅是 div。

# nhibernate - 可以从密码中派生盐，然后散列密码+派生盐吗？

> ID：10051716
> 
> 赞同：4
> 
> 时间：2012-04-07T04:21:37.403
> 
> 标签：nhibernate, encryption

我使用 NHibernate 并有一个自定义类型来加密数据库中的密码，这样我就可以使用字符串属性来表示密码，但是 NHibernate 在存储到数据库之前会转换/加密值。目前，我在配置文件中存储了一个盐值和一个加密密钥，但我真的更愿意使用密码哈希。但是，自定义 NHibernate 类型除了被告知要处理的属性值之外，对存储的对象一无所知，因此我无法生成一些随机盐并将其与对象一起存储在此自定义类型中的另一个属性中.

由于我不能单独存储盐，我想知道是否可以从密码本身导出盐，然后对两者的组合进行哈希处理。例如，我可能会取密码，MD5 散列它，然后使用 MD5 散列作为盐。这样可以吗？这将允许我以确定的方式保存密码，同时为每个密码使用唯一（但派生的）盐值，但是这样做时是否有任何安全考虑？

**编辑：**

因为到目前为止我收到的所有答案都未能说明问题的上下文，所以让我介绍 NHibernate 术语中定义的方法的签名。

```
public override void Set(IDbCommand cmd, object value, int index)
{
    var param = (IDataParameter)cmd.Parameters[index];

    if (value == null)
    {
        param.Value = null;
    }
    else
    {
        var temp = value.ToString();
        var encrypted = encryptor.Encrypt(temp);
        param.Value = encrypted;
    }
} 
```

这就是 NHibernate 给我的全部。我收到 IDbCommand 对象、一个值和一个参数索引。我对参数本身或被持久化的对象类型一无所知。我只有一个值。我无法生成随机盐并将其存储在单独的属性中，因为我不知道要持久化的对象上存在哪些属性，也不知道它们在参数集合中存储的顺序。**我的目标是在此方法调用的上下文**中以最安全的方式对密码进行哈希处理。如果您要反对我的建议，那么**在这种情况下**接受一个替代想法会很有帮助。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-07T04:24:27.243

不！如果您从密码中派生盐，则所有相同的密码都具有相同的哈希值，并且盐变得无用。

尝试

```
var temp = value.ToString();
var salt = generateRandonSalt();
var encrypted = encryptor.Encrypt(temp + salt);
param.Value = salt + encrypted; 
```

“+”是指连接操作数或与您的值兼容的东西。当然，您需要始终知道盐的长度，以便下次检查密码。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-04-07T04:30:39.313

散列函数的目的是从密码中派生一些东西。如果您从密码中派生盐，那么该派生实际上是您的散列函数的一部分。您刚刚更改/增强了散列函数，实际上并没有盐。

盐必须是随机的。

他们的工作是让暴力破解密码变得更加困难。如果一个盐有 65536 个不同的值（例如），那么这意味着相同的密码可以散列 65536 种不同的方式。如果有人想建立一个字典，将哈希值反转回密码，他的字典将需要 65536 个条目来输入一个密码。

要使这个想法起作用，盐必须与密码无关。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-07T04:30:27.800

您的示例的问题在于，如果某些攻击者想要找到匹配项，他们可以创建一个彩虹表，其中所有密码都由他们的 md5 计算机部分加盐。

每个条目的盐应该是唯一的，这样黑客就必须拥有一个逆向工程表，其中包含 md5 与每种可能的盐的每种可能组合。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-07T04:54:35.623

如果您的类盐方案的目的是使用预先确定的散列使密码抵抗字典攻击，那么您的方法可能比未加盐的散列更安全，但不如使用有效的盐安全。

有效盐的一个重要安全优势是相同密码的两个实例将产生两个不同的哈希值。在您的方案下，知道一个用户的密码和哈希将允许攻击者推断出具有相同哈希的另一个用户的相同密码。

# python - 如何在不同的窗口中获取条目文本？

> ID：10051721
> 
> 赞同：2
> 
> 时间：2012-04-07T04:22:33.770
> 
> 标签：python, tkinter

我正在尝试创建一个允许用户通过条目小部件输入“用户名”的游戏。撇开整个游戏方面不谈，现在我只需要一个加载标题屏幕的程序，然后单击一个按钮会出现一个新的“设置”窗口，提示我输入我的用户名，然后单击一个按钮，设置窗口就会出现离开，我有我的游戏窗口，标签上写着“用户名：[你的名字]”。

谁能帮我这个？

（编辑：这是我目前正在处理的代码

```
from tkinter import *
import random
import os
import time
import math

def cargarimagen(nombre):
    ruta=os.path.join('Images',nombre)
    imagen=PhotoImage(file=ruta)
    return imagen

def operacion():
    num1=random.randint(0,255)
    num2=random.randint(0,255)
    op=random.randint(0,4)    
    if op == 0:
        prompt= (hex(num1)[2:].upper() + " + " + hex(num2)[2:].upper())
        answer= num1 + num2
    if op == 1:
        prompt= (hex(num1)[2:].upper() + " - " + hex(num2)[2:].upper())
        answer= num1 - num2
    if op == 2:
        prompt= (hex(num1)[2:].upper() + " C16")
        answer= (16**2) - num1
    if op == 3:
        prompt= (hex(num1)[2:].upper() + " C15")
        answer= (16**2) - num1 - 1
    return prompt

def changeName():
    name = setup.yourName.get()
    GameWindow.labelText.set(name)
    setup.yourName.delete(0, END)
    setup.yourName.insert(0, ' ')
    return

def play():
    return GameWindow() + changeName()

root= Tk()
root.title('Polyominos Start Menu')
root.minsize(640,480)
root.maxsize(640,480)

class MainWindow:
    def __init__(self,parent):
        self.contenedor=Canvas(parent,width=640,height=480)
        self.contenedor.place(x=0,y=0)
        self.foto=cargarimagen('Tetris.gif')
        self.label_fondo=Label(self.contenedor,image=self.foto)
        self.label_fondo.place(x=0,y=0)
        self.but=Button(root, text="START",font="Helvetica",width=10,height=2,bg='White',command=SetupWindow)
        self.but.place(x=213,y=413)
        self.about=Button(root, text="ABOUT",font="Helvetica",width=10,height=2,bg='White',command=AboutWindow)
        self.about.place(x=320,y=413)

def SetupWindow():
    setup=Toplevel()
    setup.minsize(124,190)
    setup.maxsize(124,190)
    setup.title('Set Up')
    frame = Frame(setup,bg ="White" )
    frame.grid()
    lab1= Label(frame, text='Enter your name:', bg ="White").grid(column=0, row=0)

    custName = StringVar(None)
    yourName = Entry(frame, textvariable=custName, bg ="White").grid(column=0, row=1)

    lab2= Label(frame, text=' ', bg ="White").grid(column=0, row=2)
    lab3= Label(frame, text='Pick a difficulty:', bg ="White").grid(column=0, row=3)
    diff = StringVar()
    diff.set(None)
    radio1 = Radiobutton(frame, text='Easy', value='Easy', variable = diff, bg ="White").grid(column=0,row=4)
    radio1 = Radiobutton(frame, text='Medium', value='Medium', variable = diff, bg ="White").grid(column=0,row=5)
    radio1 = Radiobutton(frame, text='Hard', value='Hard', variable = diff, bg ="White").grid(column=0,row=6)
lab4= Label(frame, text=' ', bg ="White").grid(column=0, row=7)
    playnow= Button(frame, text='READY', command=play, bg ="White").grid(column=0,row=8)
lab5= Label(frame, text=' ', bg ="White").grid(column=0, row=9)

def GameWindow():
    root.withdraw()
    GameWindow=Toplevel()
    GameWindow.minsize(595,300)
    GameWindow.maxsize(595,300)
    GameWindow.title('Polyominos')
    operaciones=Frame(GameWindow,width=300,height=300, bg='white', highlightthickness=5, highlightbackground='black')
    operaciones.place(x=0, y=0)

    labelText = StringVar()
    labelText.set('USER')
    usrname = Label(operaciones, textvariable=labelText)
    usrname.place(x=80, y=20)

    cubos=Frame(GameWindow,width=300,height=300, bg="white", highlightthickness=5, highlightbackground='black')
    cubos.place(x=295, y=0)

def AboutWindow():
    about=Toplevel()
    about.minsize(137,94)
    about.maxsize(137,94)
    about.title('About Polyominos')
    frame1 = Frame(about,bg ="White" )
    frame1.grid()
    lab0 = Label(frame1, text="David Salazar Quintana",bg ="White").grid(column=0,row=0)
    lab1 = Label(frame1, text="ITCR",bg ="White",).grid(column=0,row=1)
    lab2 = Label(frame1, text="Ingeneria en computadores",bg ="White").grid(column=0,row=2)
    lab3 = Label(frame1, text="Profesor: Milton Villegas",bg ="White").grid(column=0,row=3)
    lab4 = Label(frame1, text="Version: 1.0 (Abril 2012)",bg ="White").grid(column=0,row=4)

Botones_Principales=MainWindow(root)    
mainloop()
root.destroy() 
```

抱歉，代码是西班牙语的一半，但您仍然应该了解正在发生的事情）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-07T04:49:08.810

我希望这段代码能够帮助你弄清楚如何实现弹出文本对话框。这个例子的工作方式是在主窗口（根）中实现一个按钮，当你点击它时，弹出对话框会出现`MyDialog`类对象，将被创建，然后它将使用`wait_window()`等待直到它完成。你可以看到弹出对话框是如何实现的，它是一个简单的[`TopLevel`](http://www.tutorialspoint.com/python/tk_toplevel.htm)小部件，它就像你能想到的另一个框架，你打包你的标签，你的`Entry`字段，最后是一个按钮`mySubmitButton`。

向下看`send`函数，它几乎只是使用简单`.get()`的方法从`Entry`. 然后您将`destory()`打开窗口，然后恢复主窗口。您可以根据需要多次执行此操作。

```
import tkinter as tk

class MyDialog:
    def __init__(self, parent):
        top = self.top = tk.Toplevel(parent)
        self.myLabel = tk.Label(top, text='Enter your username below')
        self.myLabel.pack()

        self.myEntryBox = tk.Entry(top)
        self.myEntryBox.pack()
        self.mySubmitButton = tk.Button(top, text='Submit', command=self.send)
        self.mySubmitButton.pack()

    def send(self):
        global username
        username = self.myEntryBox.get()
        self.top.destroy()

def onClick():
    inputDialog = MyDialog(root)
    root.wait_window(inputDialog.top)
    print('Username: ', username)

username = 'Empty'
root = tk.Tk()
mainLabel = tk.Label(root, text='Example for pop up input box')
mainLabel.pack()

mainButton = tk.Button(root, text='Click me', command=onClick)
mainButton.pack()

root.mainloop() 
```

![在此处输入图像描述](../Images/1dc8f10553a6ef2fcfda3cd566317786.png)

在示例输出中，我做了两次。输入`George`和`Sam`（我的朋友）作为用户名，每次打开新对话框时都会更新用户名。输出：

```
>>> ================================ RESTART ================================
>>> 
Username:  George
Username:  Sam 
```

**编辑：**提交按钮似乎有问题？它有时不想出现。它是可点击的，但在被点击之前它不会出现。这似乎是 Mac OS 的唯一问题。

使用的参考：[effbot](http://effbot.org/tkinterbook/tkinter-dialog-windows.htm)、[stackoverflow](https://stackoverflow.com/questions/4950359/how-to-close-toplevel-window-after-the-function-it-calls-completes)、[tutorialspoint](http://www.tutorialspoint.com/python/tk_toplevel.htm)、[daniweb](http://www.daniweb.com/software-development/python/threads/341851/tkinter-button-not-appearing-but-still-useable)

# jquery - 创建一个 jquery / html5 画布图

> ID：10051730
> 
> 赞同：2
> 
> 时间：2012-04-07T04:24:19.790
> 
> 标签：jquery, html, graph

所以我需要创建一个基本上看起来像上升折线图的图形。x 轴是时间，y 轴是用户已解锁的成就。显示的每个成就都将比前一个成就高出一个指定的高度，并在 x 轴上保持一定的距离，具体取决于它们的解锁时间。

实现这一目标的最佳方法是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-07T04:58:54.653

您可以使用[HighCharts](http://highcharts.com/)。或者，[Raphaël](http://raphaeljs.com/)寻求更强大的解决方案。这些库使用 SVG 工作。

这里有[一个使用 HighCharts 的例子](http://jsfiddle.net/sGhbu/)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-03-13T22:03:31.193

您可以访问此站点以获取图表等画布教程。

[画布教程](http://www.html5canvastutorials.com/)

# regex - WordPress 正则表达式的异常

> ID：10051734
> 
> 赞同：0
> 
> 时间：2012-04-07T04:24:46.450
> 
> 标签：regex, wordpress, security, .htaccess

正则表达式`^/wp-[^./]+\.php$`匹配：

*   wp-config.php
*   wp-commentsrss2.php
*   wp-pass.php
*   wp-rdf.php
*   [...]

但是我需要另一个匹配除 wp-login.php 之外的所有内容的正则表达式。

是否可以在该正则表达式中定义异常？如何？

先感谢您。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-07T04:35:12.570

采用

```
^/wp-((?!login)[^./]+)\.php$ 
```

[您可以在此处](http://www.regular-expressions.info/lookaround.html)阅读有关 Negative Lookahead的信息。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-07T04:32:56.980

试试这个：`^/wp-((?!login).+)\.php$`

这将匹配以but not开头`/wp-`和结尾的所有内容。`.php``/wp-login.php`

# mysql - 什么是 mysql 数据库中的“视图”表？

> ID：10051735
> 
> 赞同：0
> 
> 时间：2012-04-07T04:24:50.317
> 
> 标签：mysql

当我第一次在 mysql 中听到这个词时，我用谷歌搜索了这个词（sakila 示例 mysql db 有它），但是搜索结果并没有真正帮助。无论如何，它到底是什么，是否有一个教程来解释它以及使用它的优点和缺点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-07T04:35:20.673

视图是一个命名的存储查询，可以在其他查​​询中使用，就像它是一个表一样。

有时视图会显示表中行的子集：

```
CREATE VIEW v1 AS
    SELECT Column1, Column2, ..., ColumnN
      FROM AnotherTable WHERE SomeColumn = 234; 
```

有时视图会显示表中列的子集：

```
CREATE VIEW v2 AS
    SELECT Column2, Column3, Column5, Column7
      FROM AnotherTable; 
```

您还可以使用连接等进行更复杂的查询：

```
CREATE VIEW OrderInfo AS
    SELECT o.order_num, c.customer_num, c.customer_name,
           o.order_date, o.invoice_num, i.product_code, p.product_name
      FROM Orders     AS o
      JOIN Customers  AS c ON c.customer_num = o.customer_num
      JOIN OrderItems AS i ON i.order_num    = o.order_num
      JOIN Products   AS p ON p.product_code = i.product_code 
```

然后用户可以编写查询，例如：

```
SELECT *
  FROM OrderInfo
 WHERE Order_Date BETWEEN DATE '2012-01-01' AND DATE '2012-01-31'
   AND Product_Code LIKE "%23491%"; 
```

无需知道如何将所有表连接在一起。

您还可以使用视图来控制对数据的访问；视图定义者的权限可能允许用户访问否则将被禁止访问的表。您还可以在修改数据库架构后使用视图来提供向后兼容性。您更改了新模式中表的名称和定义，但留下了允许未修改的程序继续读取数据库的视图，就好像模式没有改变一样。

一些视图可以更新；其他人不能。哪个可以，哪个不能取决于 DBMS。

# java - 如何在中序遍历（java）中打印树？

> ID：10051739
> 
> 赞同：-3
> 
> 时间：2012-04-07T04:25:15.167
> 
> 标签：java

我正在尝试按如下方式打印我的 AVLtree，

```
. 50

55

. . 60

. 65

. . 70 
```

– 节点的条目前面应该有点的深度数，其中深度表示树中节点的深度。

root 包含 55 和 left child 包含 50 ， right child 包含 65 ， right left child 包含 60 并且 right-right child 包含 70 。

以下是我到目前为止的代码。任何人都可以帮忙吗？

```
public string Display() {
    StringBulder sb= new StringBulder();
    inOrder (node,1,sb);
    return sb.toString();
}

// inorder traversal
public void inOrder (AVLNode<E> node, int depth, StringBuilde sb) {
    for (int i=1;i < depth; i++){
        sb.append(".");
    }

    if(node == null) return;

    inOrder(node.getleft(), depth+1,sb);
    sb.append(node.data);
    inOrder(node.getright(),depth+1,sb); 
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-07T05:10:13.367

这很容易。只需将左右节点的深度增加 1，并将点的深度数附加到`sb`. 然后追加数据。以递归方式执行此操作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-07T05:12:37.673

这是代码：

```
void inOrder(AVLNode node, int depth, StringBuilder sb)
{
  if(node == null) return;

  inOrder(node.left, depth+1, sb);

  for(int a=0;a<depth;a++) sb.append(".");
  sb.append(node.data + "\n");

  inOrder(node.right, depth+1, sb);

} 
```

# c++ - 复制类中定义的 std::map 时出错

> ID：10051745
> 
> 赞同：0
> 
> 时间：2012-04-07T04:26:02.287
> 
> 标签：c++, copy, friend

我有一个`std::map`用作容器的类。我想添加一个函数来复制两个对象之间的映射。由于地图被声明为类的私有成员，因此我需要一个友元函数来执行此操作。这是我的代码：

```
class Data;
void copyData(Data &, Data &);

class Data
{
  private:
    map<int, int> _data;

  public:
    friend void copyData(Data &, Data&);
};

void copyData(Data &a, Data &b)
{
  std::copy(a._data.begin(), a._data.end(), b._data.begin());
}

main()
{
   // initialization here
   Data A, B;
   copyData(A, B);
} 
```

但是使用mingw32编译时有很多警告。我该如何正确地做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-07T05:51:46.943

被`std::map<K,V>::value_type`定义为`std::pair<const K,V>`。这确保了`std::map<K,V>::iterator`对象不能用于分配给键（否则您可以使用它来破坏容器不变量）。

这意味着映射迭代器不满足`OutputIterator`概念要求，您不能将它们用作`std::copy()`函数的第三个参数。同样，有很多情况会导致代码中断，例如，如果一张地图的关联比另一张地图多。

此外，还有一种更简单的方法来编写你的函数：

```
void copyData(Data &a, Data &b)
{
  b._data = a._data;
} 
```

# liferay - portlet:renderURL 不工作

> ID：10051750
> 
> 赞同：3
> 
> 时间：2012-04-07T04:27:24.957
> 
> 标签：liferay, portlet, liferay-6

我正在开发liferay 6 Portlet。我是新手。如图所示，我需要以这种方式保持到另一个 jsp 的超链接。

```
<a href="<portlet:renderURL>
    <portlet:param name="jspPage" value="/WEB-INF/view/page2.jsp" />
    </portlet:renderURL>">
</a> 
```

我有另一个名为 page2.jsp 的 JSP，但这不起作用（意味着当我单击超链接时，它只显示第一个 JSP

但这不起作用

**这是我的 page1.jsp**

```
<%@ taglib prefix="s" uri="/struts-tags" %>

<s:form action="helloForm" method="POST" theme="simple">
    Enter Your Name:<s:textfield name="namer" value="%{name}" required="true"/>
    <s:submit/>
</s:form>

<a href="<portlet:renderURL>
<portlet:param name="jspPage" value="/WEB-INF/view/page2.jsp" />
</portlet:renderURL>">
</a> 
```

=========

**这是 pag2.jsp**

```
<html>
<head>
</head>
<body>
    <h1>Hi </h1>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-09T08:43:24.340

您可以在 page1.jsp 中尝试以下代码，看看它是否有效：

```
<portlet:renderURL var="clickRenderURL">
    <portlet:param name="jspPage" value="/WEB-INF/view/page2.jsp" />
</portlet:renderURL>

<a href="<%=clickRenderURL %>">Click here</a> 
```

如果确实如此，则可能是引号（“”）的问题。

如果没有，那么您能否提供更多详细信息，例如您正在扩展 MVCPortlet 的哪个 portlet，等等。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-04-03T14:03:41.953

我相信问题发生在标签中。

在 MVCPortlet 中，如果您想直接从另一个 JSP 页面调用一个 JSP 页面，您必须将 portlet:param 的名称命名为“mvcPath”，例如：

```
<portlet:renderURL var="varA">
    <portlet:param name="mvcPath" value="/a.jsp"/>
</portlet:renderURL>

<portlet:renderURL var="varB">
    <portlet:param name="mvcPath" value="/b.jsp"/>
</portlet:renderURL>

<a href="<%=varA %>">Link to A</a>
<a href="<%=varB %>">Link to B</a> 
```

这将正常工作。

希望这会帮助你。

# java - 以编程方式缩放android中的webview

> ID：10051754
> 
> 赞同：2
> 
> 时间：2012-04-07T04:29:18.930
> 
> 标签：java, javascript, android

我在 Android webview 中有一个 1000x800 的画布。当用户启动一个事件时，我想将 webview 居中到点 300x300 并显示缩放以显示大约 300x300 的区域。如果缩放动画将是完美的（例如在该点双击 web 视图时）

我该怎么做（使用 javascript 或 webview 调用？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-15T11:14:01.550

`WebView`您可以使用以下方法`setInitialScale()`方法将预定义的缩放设置为`WebView`-

[http://developer.android.com/reference/android/webkit/WebView.html#setInitialScale%28int%29](http://developer.android.com/reference/android/webkit/WebView.html#setInitialScale%28int%29)

这个输入参数是缩放的百分比。您可以设置初始缩放百分比并查看所需区域是否可见。否则，您需要平移`WebView`.

# php - Facebook 评论 - 强制用户登录网站？

> ID：10051757
> 
> 赞同：0
> 
> 时间：2012-04-07T04:30:10.007
> 
> 标签：php, facebook, facebook-comments

我想知道是否可以要求用户登录我的网站，然后他们才能使用 Facebook 评论发表评论？现在，如果用户查看带有 facebook 评论的页面（因为我有一个面向公众的部分），那么即使他们没有登录到我的网站（因为他们已登录到 facebook），他们也可以发表评论。

我可以为评论或类似内容设置“仅查看”模式吗？如果不是，那么我必须从面向公众的网站上删除我真的不想做的评论。

谢谢你的帮助！

杰克

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-07T05:11:00.697

我想这是不可能的......

但是给你一些参考，你会在 facebook 用户发表评论后得到回调。

参考网址：[https ://developers.facebook.com/docs/reference/javascript/FB.Event.subscribe/](https://developers.facebook.com/docs/reference/javascript/FB.Event.subscribe/)

```
FB.Event.subscribe('comment.create', function(response) {
alert('The commentID of the comment is: ' + response.commentID);
}); 
```

等待这个线程的一些其他评论。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-10T19:23:55.187

在用户登录之前，您始终可以隐藏评论框。只需订阅`FB.Event.subscribe()`'s`auth.statusChange`以监控用户状态何时发生变化。您还需要在页面加载期间检查他们当前的登录状态（请参阅 参考资料`FB.getLoginStatus()`）。然后，当您知道他们已登录时，请显示评论框。

# jquery - 单击时将类添加到图像

> ID：10051759
> 
> 赞同：-1
> 
> 时间：2012-04-07T04:30:31.880
> 
> 标签：jquery

我试图在单击时将“nocheck”类添加到具有“check”类的特定图像。以下是我到目前为止的代码，它不会产生预期的结果。请让我知道我做错了什么。

```
$(document).ready(function() {
    $("img.check").click(function() {
        $(this).addClass("nocheck");
    });​
}); 
```

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-07T05:05:55.760

伊戈尔是对的，您的代码编写正确。看看这个[小提琴](http://jsfiddle.net/zZx8P/2/)。它显示了你的代码在行动。我的猜测是 .nocheck 类中的某些样式被 .check 类中的相同样式覆盖。请注意在我的小提琴的 css 中使用 !important 标志。

你知道如何使用 Chrome 的调试工具吗？您可以使用它轻松地调查您的 DOM。我怀疑您的代码正在运行，而您甚至没有意识到这一点。DOM 检查器将轻松地向您显示图像元素的类属性，因此您将确切地知道发生了什么。您还可以使用它在 javascript 中设置断点以确认事件正在触发。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-07T04:40:17.977

您必须像那里一样删除此图像的旧类：

[http://jsfiddle.net/zZx8P/](http://jsfiddle.net/zZx8P/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-07T04:42:29.113

您可能需要在添加“nocheck”的同时删除“check”。使用[.toggleClass()](http://api.jquery.com/toggleClass/)：

```
$(this).toggleClass("check nocheck"); 
```

# java - Android网络服务访问错误

> ID：10051762
> 
> 赞同：0
> 
> 时间：2012-04-07T04:31:32.207
> 
> 标签：java, android, web-services, axis2, ksoap2

我在 Tomcat7 服务器上部署了一个简单的 java web 服务。我已将 Axis2 用作肥皂引擎。（Web 服务和 WSDL 没问题）这是我用于 Web 服务的代码

```
 public class TestWs {
  public String sayHello(){
         return "Hello Grant";
    }
   } 
```

我已经从 Android 2.2 访问了这个网络服务。完全没问题。但是这个程序不适用于 Android 4.0.3 我的 Android 程序的代码

```
import org.ksoap2.SoapEnvelope;
import org.ksoap2.serialization.SoapObject;
import org.ksoap2.serialization.SoapPrimitive;
import org.ksoap2.serialization.SoapSerializationEnvelope;
import org.ksoap2.transport.HttpTransportSE;

import android.widget.TextView;
import android.app.Activity;
import android.os.Bundle;

public class AndroidWSClientActivity extends Activity {

private static final String SOAP_ACTION = "http://ws.android4.com/";
private static final String METHOD_NAME = "sayHello";
private static final String NAMESPACE = "http://ws.android4.com/sayHello/";
private static final String URL = "http://175.157.45.91:8085/ForAndroid4/services/TestWs?wsdl";
/** Called when the activity is first created. */
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);
    SoapObject request = new SoapObject(NAMESPACE, METHOD_NAME);          

    SoapSerializationEnvelope envelope = new 
    SoapSerializationEnvelope(SoapEnvelope.VER11);

    envelope.setOutputSoapObject(request);

    HttpTransportSE ht = new HttpTransportSE(URL);
    try {
        ht.call(SOAP_ACTION, envelope);
        SoapPrimitive response = (SoapPrimitive)envelope.getResponse();
        String str = response.toString();
        TextView result;
        result = (TextView)findViewById(R.id.textView1);
        result.setText(str);

    } catch (Exception e) {
        e.printStackTrace();
        TextView result;
        result = (TextView)findViewById(R.id.textView1);
        result.setText("Error!");

    }
  }
 } 
```

程序正确安装在模拟器上。但模拟器显示来自 catch 块的消息集。错误是什么？？？我该如何纠正它？谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-07T04:41:15.230

在 Honeycomb and Ice Cream Sandwich（即 Android 3.0+）中，您**无法在主线程（onCreate()、onPause()、onResume() 等）中连接到 Internet，而必须启动一个新线程。**之所以发生这种变化，是因为网络操作会使应用程序等待很长时间，**如果您在主线程中运行它们，整个应用程序就会变得无响应。**如果您尝试从主线程连接，**Android 将抛出 NetworkOnMainThreadException。**

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-07T04:54:13.080

在最新的 android 版本中，无法从 UI 线程调用 Web 服务。有一个与此相关的类似线程。

[Android kSOAP web服务问题](https://stackoverflow.com/questions/6625683/android-ksoap-web-service-problem)

可能这会对你有所帮助。

# html - html5画布arcTo上的意外结果

> ID：10051763
> 
> 赞同：1
> 
> 时间：2012-04-07T04:31:49.757
> 
> 标签：html, canvas

我想画两条穿过三个点的线，并在第二点做一个圆角。在这里我有一个问题。如果两条线之间的夹角小于 90 度，则会在通过点 1 和点 2 的线上附加一条额外的线。如果角度大于或等于 90 度，则可以。

您可以在下面的代码段中看到这一点：

```
function Point(x, y){
  this.x = x ? x : 0;
  this.y = y ? y : 0;
}
var ctx,
    canvas = document.getElementById('canvas');
canvas.width = 600;
canvas.height = 600;

ctx = canvas.getContext('2d');
ctx.lineWidth = 2;

draw(ctx, new Point(50,10), new Point(20, 300), new Point(100, 320) );
draw(ctx, new Point(200,10), new Point(200, 300), new Point(300, 20) );

function draw(ctx, p1, p2, p3){
  var k1,k2, k, len, r=8;
  k1 = Math.atan2(p2.y - p1.y, p2.x - p1.x);
  k2 = Math.atan2(p3.y - p2.y, p3.x - p2.x);
  k = (k1-k2)/2;
  len = Math.abs(r/Math.tan(k));  // the distance between point of tangency and p2
  ctx.moveTo(p1.x, p1.y);
  ctx.lineTo(p2.x - len*Math.cos(k1), p2.y - len*Math.sin(k1) ); // lineTo the point of tangency
  ctx.arcTo(p2.x, p2.y, p2.x + len*Math.cos(k2), p2.y + len*Math.sin(k2), r ); // then arc
  ctx.lineTo(p3.x, p3.y); // till p3
  ctx.stroke();
}
```

```
<canvas id='canvas' style="width:600px; height:600px; margin: 0 auto; background-color: yellow; "; />
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-07T17:56:41.187

我找不到你的错误所以重新开始看[http://jsfiddle.net/yUkK3/6/](http://jsfiddle.net/yUkK3/6/)

除非您的 P1 和 P3 顺序错误，否则似乎可以正常工作。（小提琴上的最后一个例子）可以看到它发生的原因，但还没有进行更正。

说明何时出错。

以P2为原点，旋转P1使P1到P2沿x轴，P1为正，P3.y为负时，绘制失败。

希望这可以帮助

编辑现在已经解决了上述顺序问题。 [http://jsfiddle.net/yUkK3/7/](http://jsfiddle.net/yUkK3/7/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-09-16T18:26:36.567

`Math.atan2`当角度大于 90 度时将返回负角度，这对角度有错误的影响`k`。`k1`要解决此问题，请在计算后添加以下代码`k2`：

```
kk1 = k1<0 ? k1+Math.PI : k1;
kk2 = k2<0 ? k2+Math.PI : k2;
k = (kk1-kk2)/2; 
```

这是完整的工作代码：

```
function Point(x, y){
  this.x = x ? x : 0;
  this.y = y ? y : 0;
}

var ctx,
    canvas = document.getElementById('canvas');
canvas.width = 600;
canvas.height = 600;

ctx = canvas.getContext('2d');
ctx.lineWidth = 2;

draw(ctx, new Point(50,10), new Point(20, 300), new Point(100, 320) );
draw(ctx, new Point(200,10), new Point(200, 300), new Point(300, 20) );

function draw(ctx, p1, p2, p3){
  var k1,k2, k, len, r=8, kk1,kk2;

  k1 = Math.atan2(p2.y - p1.y, p2.x - p1.x);
  k2 = Math.atan2(p3.y - p2.y, p3.x - p2.x);
  kk1 = k1<0 ? k1+Math.PI : k1;
  kk2 = k2<0 ? k2+Math.PI : k2;
  k = (kk1-kk2)/2;
  len = Math.abs(r/Math.tan(k));  // the distance between point of tangency and p2

  ctx.moveTo(p1.x, p1.y);
  ctx.lineTo(p2.x - len*Math.cos(k1), p2.y - len*Math.sin(k1) ); // lineTo the point of tangency
  ctx.arcTo(p2.x, p2.y, p2.x + len*Math.cos(k2), p2.y + len*Math.sin(k2), r ); // then arc
  ctx.lineTo(p3.x, p3.y); // till p3
  ctx.stroke();
}
```

```
<canvas id='canvas' style="width:600px; height:600px; margin: 0 auto; background-color: yellow; "; />
```

# c# - 使用 Lambda 表达式创建自定义列表

> ID：10051765
> 
> 赞同：4
> 
> 时间：2012-04-07T04:32:06.630
> 
> 标签：c#, linq, lambda

我需要创建一个具有 int、int 类型属性的自定义类型的列表

```
public class CustomClass
{
   public int EmployeeID{get;set;}
   public int ClientID{get;set;}
} 
```

我必须创建列表的两个参数是 List 和 int

我的方法是

```
CreateCustomClassList(List<int> EmployeeIDList, int clientID}
{
List<CustomClass> lst=new List<CustomClass>();
EmployeeIDList.ForEach
  (u=>lst.Add(new CustomClass
  {
     ClientID=clientID, 
     EmployeeID=u
  });
} 
```

我不想运行循环来做到这一点，有没有更有效的方法来做到这一点。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-07T04:37:00.233

我会`ToList`在这里使用：

```
List<CustomClass> lst = EmployeeIDList
     .Select(employeeID => new CustomClass
     {
         ClientID = clientID, 
         EmployeeID = employeeID
     })
     .ToList(); 
```

它可能不会更有效率，但会更清晰——在我看来，这更重要。

如果您*真的*想要效率，那么您最好的选择可能是您似乎已经拒绝的解决方案 - 一个简单的循环：

```
List<CustomClass> lst = new List<CustomClass>(EmployeeIDList.Count);
foreach (int employeeID in EmployeeIDList) {
    lst.Add(new CustomClass
        {
            ClientID = clientID, 
            EmployeeID = employeeID
        });
} 
```

# android - 运行应在从一个活动移动到另一个活动时继续运行的后台进程

> ID：10051767
> 
> 赞同：2
> 
> 时间：2012-04-07T04:32:19.137
> 
> 标签：android

我必须做一个后台进程来执行一些操作。当这个操作运行时，用户可以从一个活动切换到另一个活动。我怎样才能通过保持后台进程继续运行来做到这一点？请回复。我为此使用了异步任务。但是当我从一个活动切换到另一个活动时，它会停止在后台线程执行的操作。请回复

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-07T04:45:40.657

如果您想执行一个后台任务，无论哪个活动被带到前面，都应该运行完成，您可以设置一个**服务**来实现这一点。Android 系统为您的服务分配了一个专用线程池，该线程池允许通过该服务执行的任务独立于您的应用程序的前台活动运行。

Android 开发者文档提供了这个概念的[详细描述](http://developer.android.com/reference/android/app/Service.html)和[概述](http://developer.android.com/guide/topics/fundamentals/services.html)。

我的应用程序有类似的要求.. 使用服务对我有用:)

# android - 水平缩放 NinePatch 图像（无子，在 RelativeLayout 中）

> ID：10051771
> 
> 赞同：1
> 
> 时间：2012-04-07T04:32:50.990
> 
> 标签：android

我正在尝试使用 NinePatch 图像，水平拉伸。

正如预期的那样，我没有过多地使用 NinePatch，但确实有其他 NinePatches 图像在其他领域工作（例如，作为带有内容的视图的背景）。

我附上了我正在经历的简化版本。基本上我希望点水平平铺中心像素。图像只会水平扩展。它不包含任何其他视图。

我首先尝试只设置一个单像素垂直路径，然后也添加了一个单像素水平路径。没有不同。在 NinePatch 工具的预览面板中，它看起来很好。

根据下面的代码示例，它在 RelativeLayout 中使用。我已经包含了作为我尝试过的其他设置被注释掉的行。

```
track = new ImageView(context);
track.setScaleType(ScaleType.FIT_XY);
//track.setScaleType(ScaleType.FIT_CENTER);
track.setBackgroundResource(R.drawable.bg_track);
//track.setImageResource(R.drawable.bg_track);

LayoutParams trackLayout = new LayoutParams(LayoutParams.MATCH_PARENT, LayoutParams.WRAP_CONTENT);
//LayoutParams trackLayout = new LayoutParams(LayoutParams.WRAP_CONTENT, LayoutParams.WRAP_CONTENT);
trackLayout.addRule(RelativeLayout.CENTER_VERTICAL);
trackLayout.addRule(RelativeLayout.ALIGN_PARENT_LEFT);
trackLayout.addRule(RelativeLayout.ALIGN_PARENT_RIGHT);

addView(track, trackLayout); 
```

![样本](../Images/e5e2c401a29192ee75ce2575a9adf7ea.png)

我确定我错过了一些简单的东西，但无法弄清楚。

任何见解都值得赞赏。

蒂亚。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-07T04:42:24.410

你误解了 Ninepatch 的概念。试着通过这张图来理解![在此处输入图像描述](../Images/605a2fb81a1102c3ca6e229b0528ae83.png)

您也可以尝试使用此 BetterNinePatch 工具[http://android.elex.pe.kr/a-better-9-patch-tool](http://android.elex.pe.kr/a-better-9-patch-tool) :)

![在此处输入图像描述](../Images/7876b07e6a77dca6cf0e1d8cb60fee9e.png)

尝试像这样创建。

# authentication - 使用 REST API 在 Azure 中删除表实体时如何使用空格对参数进行编码

> ID：10051773
> 
> 赞同：0
> 
> 时间：2012-04-07T04:32:51.963
> 
> 标签：authentication, azure-table-storage

我有一些代码可以使用 REST API 从 Windows Azure 的表中添加和删除实体。如果我添加一个带有 PartitionKey 'abcd' 和 RowKey 'efgh' 的实体，然后删除它，它就可以正常工作。删除操作的相对 URL 是

```
devstoreaccount1/TableX(PartitionKey='abcd',RowKey='efgh') 
```

这用于创建身份验证标头，因此签名字符串的规范化资源是

```
/devstoreaccount1/devstoreaccount1/TableX(PartitionKey='abcd',RowKey='efgh') 
```

一切都很好，一切都很好。接下来，我插入另一个实体，其分区键为“abc d”，rowKey 为“efg h”（即添加了空格）。实体插入正常。当我尝试删除它时，我创建了带有空格的 uri，并且我的请求得到了错误代码 403 的响应。基本上该请求没有经过身份验证。解决此问题的下一步是通过调用 HttpUtility.PathEncodeUrl(partitionKey) 来更改值，rowKey 也是如此。所以规范化的资源现在是

```
/devstoreaccount1/devstoreaccount1/TableX(PartitionKey='a%20b%20c%20d',RowKey='e%20f%20g%20h') 
```

当我提出这样的请求时，我收到错误代码 404（未找到）的响应。这意味着，很明显，身份验证已经通过，但似乎在内部调用处理程序在搜索实体键时忘记将 %20 转换回空格。

好的，经过这么长的描述，我的两个问题是：1）对空格进行编码以便通过身份验证并找到要删除的实体的正确方法是什么？2）如果参数之一包含单引号，那么在字符串中对其进行编码的正确方法是什么。

我更喜欢使用 REST API，所以请不要告诉我使用 TableServiceContext 类。

在此先感谢您的帮助。最后一点：MSDN (http://msdn.microsoft.com/en-us/library/windowsazure/dd135727.aspx) 中关于此主题的文档不正确。它表明参数应该用双引号而不是单引号发送。如果您这样做，则响应为 403（禁止访问）。我花了一段时间才弄明白。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-07T14:34:45.730

谢谢你的建议，smarx。像往常一样，“问题越简单，就越难解决”。我需要打电话

```
fullPathUri = HttpUtility.UrlPathEncode(fullPathUri); 
```

对于创建 HttpWebRequest 时使用的参数，然后一切正常。至于单引号，需要用 2 个单引号替换（例如 from **who's there** to **who's there**）

# centos - Postfix 和 CentOS - 启动时不启动多个实例

> ID：10051775
> 
> 赞同：-2
> 
> 时间：2012-04-07T04:33:21.233
> 
> 标签：centos, postfix-mta

在 CentOS 6.2 机器上，我有两个 Postfix 实例，称为 postfix 和 postfix-bounce，通过[Postfix 网站上的多实例设置文档进行设置](http://www.postfix.org/MULTI_INSTANCE_README.html)。当我通过 init.d 脚本（服务后缀启动）手动启动它们时，它们工作正常。

但是当我重新启动服务器时，无论我做什么，或者设置服务启动，或者在 /etc/rc.local 中放置“postfix start”，它都不会成功启动第二个实例：

```
Apr  6 22:09:19 server postfix/postfix-script[1246]: starting the Postfix mail system
Apr  6 22:09:19 server postfix/master[1247]: daemon started -- version 2.6.6, configuration /etc/postfix
Apr  6 22:09:20 server postfix-bounce/postfix-script[1256]: fatal: the Postfix mail system is already running 
```

/etc/postfix/main.cf 中的多实例配置：

```
multi_instance_wrapper = ${command_directory}/postmulti -p --
multi_instance_enable = yes
multi_instance_directories = /etc/postfix-bounce
multi_instance_group = mta 
```

/etc/postfix-bounce/main.cf 中的多实例配置：

```
multi_instance_group = mta
multi_instance_name = postfix-bounce
multi_instance_enable = yes
multi_instance_wrapper = ${command_directory}/postmulti -p -- 
```

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-20T20:55:02.593

您可以通过禁用 SELinux 来实现此功能：

```
setenforce 0 
```

Note that disabling SELinux removes important security protection from your system. You are better off using the tracing tools to amend your policy, or seeing if there are any SELinux booleans you can set to loosen things without turning it off completely.

# iphone - AppDelegate 访问

> ID：10051778
> 
> 赞同：5
> 
> 时间：2012-04-07T04:34:07.617
> 
> 标签：iphone

对于旧版本的 xcode/ios，我使用了：

```
appDelegate =(AppDelegate *)[[UIApplication sharedApplication] delegate]; 
```

访问 AppDelegate

```
#import "AppDelegate.h"

 @property (nonatomic,retain) AppDelegate *appDelegate;

#import <UIKit/UIKit.h>

@interface AppDelegate : UIResponder <UIApplicationDelegate> {

}
@property (strong, nonatomic) UIWindow *window;

@end

//-----

#import <UIKit/UIKit.h>

#import "AppDelegate.h"
@interface DetailController : UIViewController{
}
  @property (nonatomic,retain) AppDelegate *appDelegate;

@end 
```

但在 ios5 AppDelegate 中从 NSObject 更改为 UIRepsonder

是否可以访问 AppDelegate？

欢迎蚂蚁评论

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-04-07T04:57:21.177

不知道你心里有什么误解。但是我在 iOS 5 应用程序开发中使用的还是一样的。

根据您上面的评论，您说您编写了以下代码：

```
#import "AppDelegate.h"
@property (nonatomic,retain) AppDelegate *appDelegate;  // This line is unnecessary 
```

您不必为 AppDelegate 类的对象创建属性。只需在要访问全局变量的 .m 文件中包含这一行：

```
// Create an AppDelegate variable in your MapViewScreen @interface
AppDelegate *appDelegate;

#import "AppDelegate.h"
@implementation MapViewScreen

- (void)viewDidLoad  
{
    appDelegate = [[UIApplication sharedApplication] delegate];
} 
```

**P.S.**: As Michael pointed out **[UIResponder](http://developer.apple.com/library/ios/#documentation/uikit/reference/UIResponder_Class/Reference/Reference.html)** inherits from **[NSObject](http://developer.apple.com/library/ios/#documentation/uikit/reference/UIResponder_Class/Reference/Reference.html)** so you do not have to worry. Everything's the same.

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-04-07T04:56:29.707

对于 iOS 5，您无需进行任何更改[。UIResponder 类](http://developer.apple.com/library/ios/#documentation/uikit/reference/UIResponder_Class/Reference/Reference.html)继承自 NSObject。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-07T04:37:32.260

是的，您可以使用与访问 appDelegate 相同的东西。

# google-app-engine - 如何使用 IDEA 设置 Google App Engine 项目？

> ID：10051780
> 
> 赞同：2
> 
> 时间：2012-04-07T04:34:48.500
> 
> 标签：google-app-engine, intellij-idea

我是 IDEA 的新手，但对 Eclipse 非常熟悉。

我按照[此处](http://www.jetbrains.com/idea/features/google_app_engine.html)的说明进行操作，但生成的项目在其路径上没有所需的 jar。

我可以创建一个 WEB-INF/lib 文件夹并将 appengine-xx/lib/user/* 文件复制到其中，然后将它们添加为库，但是它仍然缺少其他 jar，包括包含 javax.servlet 包的那些。

我在这里做错了吗？是否应该将所需的 jars 自动添加到我的新项目中？

*编辑以回应回答：*我已经确认用户目录中的文件确实似乎是模块依赖项的一部分，但是这些不包括例如 javax.servlet.* 包。该软件包和其他软件包位于 appengine-java-sdk-1.6.4.1/lib/shared 中 - 但 AppEngine 文档明确指出不应将这些软件包与您的应用程序捆绑在一起（即不应将它们放在 lib 文件夹中）。似乎这些文件应该在一开始就被 AppEngine 插件以某种方式包含在内，并且不需要手动添加......

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-07T07:44:30.877

当您创建新的 App Engine 项目时，所有必需的库都会自动添加到[Module Dependencies](http://www.jetbrains.com/idea/webhelp/configuring-module-dependencies-and-libraries.html)：

![图书馆](../Images/df00f0d49d22b7039a3232b225f9d1af.png)

如果您需要更多库，则应手动将它们添加到[依赖](http://www.jetbrains.com/idea/webhelp/configuring-module-dependencies-and-libraries.html)项中，然后[配置工件](http://www.jetbrains.com/idea/webhelp/configuring-artifacts.html)以包含库：

![神器](../Images/1ee5b7d0b1007e390cfa1e59d2ab0e87.png)

如果您`lib/shared`在代码中使用 API，则还需要将这些 jars 添加到依赖项中，但要使用**提供**的范围（并且不要将其添加到工件中）。

# c# - 如何在 ListBoxItems 之间画一条线

> ID：10051781
> 
> 赞同：2
> 
> 时间：2012-04-07T04:34:50.163
> 
> 标签：c#, winforms, listbox

我希望能够用水平线分隔列表框中的每个项目。

这只是我绘制项目的一些代码。

```
 private void symptomsList_DrawItem(object sender, System.Windows.Forms.DrawItemEventArgs e)
    {
        bool selected = ((e.State & DrawItemState.Selected) == DrawItemState.Selected);
        int index = e.Index;
        Graphics g = e.Graphics;
        Color color;
        if (selected == true)
        {
            color = Color.Red;
        }
        else
        {
            color = Color.Pink;
        }
        /* Draw Background */
        g.FillRectangle(new SolidBrush(color), e.Bounds);

        /* Draw Item Text */
        g.DrawString(symptomsList.Items[e.Index].ToString(), e.Font, new SolidBrush(Color.Black), e.Bounds, StringFormat.GenericDefault);

        e.DrawFocusRectangle();
    } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-07T06:04:57.453

在***FillRectangle(...)***使用这个之后：

```
Color borderColor = Color.Black;
g.DrawRectangle(new Pen(borderColor), e.Bounds); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2020-04-29T02:00:09.790

//在 InitializeComponent() 之后添加这一行；症状列表.DrawMode = System.Windows.Forms.DrawMode.OwnerDrawVariable;

# c++ - 数组溢出（为什么会这样？）

> ID：10051782
> 
> 赞同：5
> 
> 时间：2012-04-07T04:35:05.513
> 
> 标签：c++, arrays, buffer-overflow

好的，所以我正在教我的女朋友一些 C++，她写了一个我认为行不通的程序，但它确实有效。它访问数组中的另一个元素（例如，访问数组 [5] 以获取大小为 5 的数组）。这是缓冲区溢出的实例吗？我的想法是它直接在数组之后写入/访问内存，这是正确的吗？基本上我的问题是..为什么这行得通？

```
#include <iostream>

using namespace std;

int main()
{
int size;

cout << "Please enter a size for the array." << endl;
cin >> size;
cout << endl;

cout << "There are " << size << " elements in this array." << endl;
cout << endl;
cout << endl;
cout << endl;

int array[size];

for (int counter = 1; counter <= size; counter++)

{
    cout << "Please enter a value for element " << counter << "." << endl;
    cin >> array[counter];

}

cout << endl;
cout << endl;

for (int counter = 1; counter <= size; counter++)

{
    cout << "Element " << counter << " is " << array[counter] << "." << endl;
    cout << endl;

}

cout << "*bing! :)" << endl;
cout << endl;

return 0;
} 
```

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-04-07T04:39:24.707

这是未定义的行为。UB 有多种口味。这里有几个：

1）它会踢你的狗。

2）它将重新格式化您的硬盘驱动器。

3）它将毫无问题地工作。

在您的情况下，使用您的编译器和在您的平台上，在这一天，您会看到 (3)。但是在其他地方尝试一下，您可能会得到 (1)、(2) 或完全其他的东西（很可能是访问冲突）。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-04-07T04:40:52.860

C/C++ 在使用数组时不做边界检查。

由于您要声明一个基于堆栈的数组。访问数组边界之外只会访问已分配堆栈空间的另一部分。

因此，基本上当您访问超出范围的内容时，除非它完全超出您的堆栈内存，否则它不会引发分段错误。

C/C++ 对数组边界很危险，记住这一点！

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-07T05:11:24.877

堆栈非常大。在 Windows 上，[它是 1 MB](http://msdn.microsoft.com/en-us/library/windows/desktop/ms686774%28v=vs.85%29.aspx)。

由于该程序没有做太多事情，因此该数组将被分配到接近堆栈的开头。这意味着在数组末尾和堆栈末尾之间将有近 1 MB 的空白空间。

那么这是什么意思？当您写到数组的末尾时，您只是在破坏您自己的堆栈空间，而不是其他程序，因此操作系统不会阻止您并且程序继续运行。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-07T04:46:27.677

首先，数组大小需要保持不变

```
 int arr[size] 
```

将不起作用，因为 size 是一个变量，因此，要么在编译时修复数组的大小，要么使用动态内存分配。

即要么

```
 const int size =5; 
  int arr[size]; 
```

或者

```
 int arr[5]; 
```

或者

```
 int* arr = new int[5]; 
```

和..

保证在 C++ 中使用指向数组末尾之外的一个元素的指针。这对于 STL 提供的许多算法很重要。但是，由于这样的指针实际上并不指向数组的元素，因此它可能不用于读取和写入。另一方面，在初始元素之前获取元素地址的结果是未定义的，应该避免..

即，您可以获取该变量的地址，然后返回但不能使用它！！！

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-07T04:51:14.827

在这里，你知道数组索引从 0 开始到 5

您将计数器输入为 5，从 1 开始并转到 5

您将索引 1 用于计数器 1，将索引 2 用于计数器 2，依此类推。

索引 0 仍然没有输入值并且包含垃圾值。

# objective-c - 我可以依靠 nil UIView 为其框架返回 CGRectZero 吗？

> ID：10051785
> 
> 赞同：9
> 
> 时间：2012-04-07T04:35:22.343
> 
> 标签：objective-c, ios

是的，我看到了这个：

> 如果该方法返回一个结构，如 Mac OS X ABI 函数调用指南中定义的那样，将在寄存器中返回，则发送到 nil 的消息将为结构中的每个字段返回 0.0。其他结构数据类型不会用零填充。

我只是不明白。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-04-07T04:55:51.643

如果您使用的是最新版本的 LLVM 编译器（Xcode 4.2 或更高版本），那么是的，`nil`使用结构返回方法进行消息传递将产生一个零填充结构。在 的情况下`CGRect`，这意味着 rect 等于`CGRectZero`。

资料来源：[Greg Parker](http://www.sealiesoftware.com/blog/archive/2012/2/29/objc_explain_return_value_of_message_to_nil.html)，他在 Apple 的 ObjC 运行时工作。

# javascript - Javascript多维数组/哈希表

> ID：10051788
> 
> 赞同：1
> 
> 时间：2012-04-07T04:36:03.003
> 
> 标签：javascript, jquery

```
storeChildren : function(coreid, data) {
  $.each(data, function(id, type) {
    $.core.children[coreid] = {};
    $.core.children[coreid]['id'] = id;
    $.core.children[coreid]['type'] = type;
  });
} 
```

（$.core.children 是一个对象）

我希望得到的数组/对象（我更喜欢对象）看起来像这样（请原谅我的 PHP 伪代码）：

```
array(coreid => array(id=>type, id=>type, id=>type)); 
```

我知道每次运行循环时我都会覆盖 $.core.children[coreid] 我只是不知道如何修复它。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-07T04:42:23.327

如果您所有的 'id's 都是唯一的，则以下内容应该有效；这就是你所追求的吗？

```
storeChildren : function(coreid, data) {
  $.core.children[coreid] = {};
  $.each(data, function(id, type) {
    $.core.children[coreid][id] = type;
  });
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-07T04:45:16.800

```
init: function() {
    $.core.children = []; // instantiate array
},

storeChildren : function(coreid, data) {

    $.each(data, function(id, type) {
        $.core.children[coreid] = {id : type};
    });
} 
```

在代码中的其他位置实例化对象，然后您就不会每次都杀死关联数组/对象。上面的示例还在您的数组中使用了一个对象而不是数组，结果，在 JSON 表示法中，如下所示：

```
[ {key,value} , {key,value} , {key,value} , ...] 
```

coreid 是数组的索引。

# html - 如何在 iOS 上伪装成打印机，例如 Apps Save2PDF 或 Adob e® CreatePDF？

> ID：10051791
> 
> 赞同：0
> 
> 时间：2012-04-07T04:36:47.607
> 
> 标签：html, ios, pdf, pdf-generation, airprint

我想在 iOS 设备上将 HTML 转换为 PDF...

但是，我不想在 UIWebView 中加载我的 HTML、拍摄快照并从此快照图片生成丑陋的 PDF，因为必须可以选择文本以用于我的目的。

我想知道 [Save2PDF](http://itunes.apple.com/us/app/save2pdf-for-ipad/id399758218?mt=8) 或 [Adob​​e® CreatePDF](http://itunes.apple.com/us/app/adobe-createpdf/id456561495?mt=8)等应用程序如何 能够将多个文件转换为 PDF 并保存它们。我的猜测是他们不会自己生成 PDF，而是从 Apple 的打印框架中获取它们。

这些应用程序如何工作？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-09T23:43:44.527

在这里查看我的答案：[使用 iOS 4.2 中的新打印内容生成 PDF](https://stackoverflow.com/questions/4356436/generating-a-pdf-using-the-new-printing-stuff-in-ios-4-2/8141008#8141008)

好消息：内置的打印格式化/渲染类和核心图形在物理上是可能的。

坏消息：它需要一点私有 API 玩弄，这将把戏限制在内部临时和企业应用程序上。

# c# - 过滤器在 .NET 4.0 中迷失在 WebGrid + 分页 + 排序 + 过滤中

> ID：10051794
> 
> 赞同：14
> 
> 时间：2012-04-07T04:37:12.020
> 
> 标签：c#, asp.net-mvc, asp.net-mvc-3, webgrid

我已经实现了一个 WebGrid。排序、分页和过滤不能一起工作。当您单独使用它们时，它们会起作用。当您同时结合这三者时，过滤不起作用。

症状：
过滤结果集，然后排序。

或者

过滤结果集，然后转到下一页。

在这两种情况下，过滤器都会丢失。但它会分页和排序。

在后面的代码中：当通过排序或分页调用操作方法时，每个过滤器参数都会显示空值。

当通过过滤器调用动作方法时，过滤器参数通过。

这告诉我，当您启动排序或分页时，它没有提交表单。

```
public ActionResult MyPage(int? page, int? rowsPerPage, 
              string sort, string sortdir, 
              string orderNumber, string person, string product) 
```

我环顾了 SO 和其他地方。有很多例子和人们问如何做一个或另一个或所有三个。但是我只看到[一个与我的问题有关的问题](https://stackoverflow.com/questions/9235161/asp-net-mvc3-webgrid-ajax-filters-ajax-sorting-paging)，所以我将其发布在这里。（他的也没有解决）

我的页面实现如下：

```
@using (Ajax.BeginForm("MyPage", null, new AjaxOptions { InsertionMode = InsertionMode.Replace, UpdateTargetId = "myGrid" }, new { id = "filter" }))
{
    <div class="right">
        <select id="rowsPerPage" name="rowsPerPage">
            <option>15</option>
            <option>25</option>
            <option>50</option>
            <option>75</option>
            <option>100</option>
        </select>
    </div>  

    <div class="table">
        <div class="tableRow">
            <div class="tableCell">
                Order Number
            </div>
            <div class="tableCell">
                Person
            </div>
            <div class="tableCell">
                Product
            </div>
        </div>
        <div class="tableRow">
            <div class="tableCell">
                <input type="text" id="orderNumber" name="orderNumber" />
            </div>
            <div class="tableCell">
                <input type="text" id="person" name="person" />
            </div>
            <div class="tableCell">
                <input type="text" id="product" name="product" />
            </div>          
            <div class="tableCell">
                <input type="submit" class="button" value="Search" />
            </div>  
        </div>
    </div>

<br/>

<div id="myGrid">
    @Html.Partial("_MyPage", Model)
</div>

} 
```

网格被实现为像这样的局部视图：

```
<script type="text/javascript">
    $(document).ready(function () {
        resetUI();
    });
</script>

@{
    var grid = new WebGrid(canPage: true, rowsPerPage: Model.rowsPerPage, canSort: true, ajaxUpdateContainerId: "grid", ajaxUpdateCallback: "resetUI");
    grid.Bind(Model.rows, rowCount: Model.TotalRecords, autoSortAndPage: false);
    @grid.GetHtml(
        tableStyle: "fancyTable",
        headerStyle: "header",
        footerStyle: "footer",
        rowStyle: "row",
        alternatingRowStyle: "alt",
        mode: WebGridPagerModes.Numeric | WebGridPagerModes.NextPrevious,
        nextText: "Next",
        previousText: "Previous",
        htmlAttributes: new { id = "grid" },
        columns: grid.Columns(
            grid.Column("OrderDate", "Order Date", format: @<text>@((item.OrderDate != null) && (item.OrderDate.ToString("MM/dd/yyyy") != "01/01/0001") ? item.OrderDate.ToString("MM/dd/yyyy") : "")</text>),
            grid.Column("OrderNumber", "Order Number"),
            grid.Column("Field1, "Field 1"),
            grid.Column("Field2", "Field 2"),
            grid.Column("Person", "Person"),
            grid.Column("Product", "Product"),
            grid.Column(format: (item) => Html.ActionLink("View", "Details", new { id = item.orderNumber }))
            )
        );
} 
```

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2012-04-07T07:28:46.420

When building the pagination and sort links, the WebGrid helper takes into account all **query string parameters** present in the current url. It ignores POSTed and route values. And since your Search form POSTs, the values that have been entered by the user in this form are not present in the query string, so they are not part of the pagination and sort links and when you click on one of those links the values are lost. This is by design.

So one way to fix that is to replace your AjaxForm:

```
@using (Ajax.BeginForm("MyPage", null, new AjaxOptions { InsertionMode = InsertionMode.Replace, UpdateTargetId = "myGrid" }, new { id = "filter" })) 
```

with a standard HTML form using the GET verb:

```
@using (Html.BeginForm("MyPage", null, FormMethod.Get)) 
```

or an AJAX form using the GET verb:

```
@using (Ajax.BeginForm("MyPage", null, new AjaxOptions { HttpMethod = "Get", InsertionMode = InsertionMode.Replace, UpdateTargetId = "myGrid" }, new { id = "filter" })) 
```

Now, when the user wants to filter something and hits the Search submit button the values he entered in the search form will end up in the query string and when rendering the WebGrid helper will use them to generate its Sort and Page links and of course when you click on those links the values will be sent to the server.

If you want more control over this you might consider more advanced grid controls such as [MvcContrib.Grid](http://mvccontrib.codeplex.com/wikipage?title=Grid) or the [Telerik Grid for ASP.NET MVC](http://www.telerik.com/products/aspnet-mvc/grid.aspx).

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-27T13:30:47.867

将表单提交到分页链接指向的 URL：

```
<script type="text/javascript">
     $(function () {
        $('th a, tfoot a').click(function () {
            $('form').attr('action', $(this).attr('href')).submit();
            return false;
        });
    });
</script> 
```

这对我没有帮助，但可能对你有帮助

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2017-02-01T20:39:53.857

只需为您的操作方法创建一个 GET，每当从网格触发排序或分页时，它会触发 GET 方法以及许多参数（您可以通过使用 Web 开发人员工具指向网格的分页编号或排序标题来查看您的浏览器），您可以在那里过滤数据集，然后将模型传递给视图：

```
[HttpGet]
public ActionResult MyPage() 
```

每次您执行排序或分页时，都会点击此方法，然后您可以进行过滤，您可以添加一些静态标志，这些标志可以根据您要过滤的内容进行分配。

# c# - 在c#中从播放器上的dvd加载加密媒体文件而不在硬盘上复制

> ID：10051804
> 
> 赞同：4
> 
> 时间：2012-04-07T04:38:37.590
> 
> 标签：c#, encryption

我加密了视频文件（Dvd 上的加密文件）。如何解密文件并在媒体播放器中显示而不在磁盘（硬盘驱动器）中复制文件（解密文件）？（c＃和winforms）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-16T19:04:52.350

您有三个选项，从最难到最简单（无论如何都很难）

1.  您可以实现编解码器来解码视频文件。如果没有适当的编解码器，即使是未压缩的 avi 文件也似乎对媒体播放器进行了加密。所有解密都在编解码器中。
2.  您可以像 VirtualDub 那样实现 Frame Server。在这种情况下，您还需要实现编解码器。解密被委托给 Frame Server 应用程序。在 virtualDub 的情况下，编解码器只是一个中间人。
3.  您可以像 uTorrent 那样实现流式 Web 服务器。这是最简单的，你只需要实现 HttpServer，我相信这在 C# 中并不难，解密和流式传输数据。棘手的部分是，您可能需要保留加密块的索引以启用转发。

# ruby-on-rails - Ruby rails - 表单无效

> ID：10051812
> 
> 赞同：0
> 
> 时间：2012-04-07T04:39:26.963
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3

为了创建新用户，我使用搜索视图在 ldap 中查找用户信息，并在新用户创建表单中填充数据。然后提交该表单将在 mysql 本地创建一个新用户。所以新的用户创建表单已经填充，我可以输入这些值。但在提交该表单后，页面返回消息称字段为空白。不知道为什么会这样。在 http 调试中，我看到这些值已发布到 /users/new

```
Form is invalid

User can't be blank
Firstname can't be blank
Lastname can't be blank
Email can't be blank
Role can't be blank 
```

控制器 -

```
class UsersController < ApplicationController

  def new
        @user = User.new
        @result = User.FindActiveDirectory(params[:user_id])
    if @result.empty?
        render action: 'find', message: "Could not find a user with the id #{params[:user_id]}"
else
    return @result

    end

  end

def find
end

def display_result

    @result = User.FindActiveDirectory(params[:user_id])
    if @result.empty?
        render action: 'find', message: "Could not find a user with the id #{params[:user_id]}"
    end
return @result
end

  def create

        @user = User.new(params[:user_id])
        if @user.save
                redirect_to users_added_url, :notice => "Signed up!"
        else
                render "new"
        end
  end

end 
```

用户视图查找 (find.html.erb) -

```
<h1>find User </h1>
<p><%= notice %></p>

<%= form_tag users_new_path do %>
  <p>
    <%= label_tag :Username %><br />
    <%= text_field_tag :user_id %>
  </p>
  <p class="button"><%= submit_tag " Search " %></p>
<% end %> 
```

用户视图新建（new.html.erb）-

```
<h1>Add user to access this system</h1>

<% if @result %>
<% @result.each do |key, values| %>
<% if "#{key}" == "samaccountname" %>
<% $username = values.to_s %>
<% end %>
<% if "#{key}" == "sn" %>
<% $lastname = values.to_s %>
<% end %>
<% if "#{key}" == "givenname" %>
<% $firstname = values.to_s %>
<% end %>
<% if "#{key}" == "mail" %>
<% $email = values.to_s %>
<% end %>
<% end %>
<% end %>

<%= form_for @user do |f| %>
  <% if @user.errors.any? %>
    <div class="error_messages">
      <h2>Form is invalid</h2>
      <ul>
        <% for message in @user.errors.full_messages %>
          <li><%= message %></li>
        <% end %>
      </ul>
    </div>
  <% end %>
 <p>
    <%= f.label :NT_Username %><br />
    <%= f.text_field :user_id, :value => $username  %>
  </p>
 <p>
    <%= f.label :Firstname %><br />
    <%= f.text_field :firstname, :value => $firstname  %>
  </p>
 <p>
    <%= f.label :Lastname %><br />
    <%= f.text_field :lastname, :value => $lastname %>
  </p>
  <p>
    <%= f.label :Email %><br />
    <%= f.text_field :email, :value => $email %>
  </p>
  <p>
    <%= f.label :Role %><br />
    <%= f.collection_select :role, User::ROLES, :to_s, :to_s, :include_blank => false %>
  </p>
  <p class="button"><%= f.submit %></p>
<% end %> 
```

要求 -

```
Started POST "/users" for 10.15.21.28 at 2012-04-07 00:00:17 -0400
Processing by UsersController#create as HTML
  Parameters: {"utf8"=>"â", "authenticity_token"=>"RDxvWXxVwoJArNN1s4Q8M8cDr5rzjP4wNF4gOnteGGY=", "user"=>{"user_id"=>"jkills000", "firstname"=>"James", "lastname"=>"Kills", "email"=>"jkills000@mysite.com", "role"=>"User"}, "commit"=>"Create User"} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-07T04:46:14.727

在你的`create`你做：

```
@user = User.new(params[:user_id]) 
```

这是不正确的。它应该是：

```
@user = User.new(params[:user]) 
```

正如您在请求中看到的，`params[:user]`包含有关用户的所有信息。`params[:user_id]`不存在。

# blackberry - 将 BlackBerry 应用程序部署到设备时出错

> ID：10051814
> 
> 赞同：-1
> 
> 时间：2012-04-07T04:39:30.253
> 
> 标签：blackberry

当我尝试将 BlackBerry Application 的 .cod 文件部署到真实设备 9300 曲线时，它显示以下错误消息。

![在此处输入图像描述](../Images/31f5e6408a591aff995952c173268a6e.png)

这可能是什么原因？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-07T08:27:29.863

检查控制目标设备操作系统版本的指令的alx 文件。

当设备操作系统比您用于编译应用程序的 SDK 旧时会发生此错误。即你有 OS 5.0 的设备并试图安装使用 SDK 6.0 编译的应用程序

设备操作系统版本必须等于或大于您用于编译应用程序的 SDK 版本。

# c++ - C++ - 读取二进制文件错误或编译器错误？

> ID：10051815
> 
> 赞同：0
> 
> 时间：2012-04-07T04:39:42.430
> 
> 标签：c++, g++

我在 g++ （版本 4.6.3 ）中尝试了以下代码的许多版本。

```
int main(int argc,char *argv[])
{
   std::string fname(argv[1]);
   std::cout<<"fname is"<<fname<<std::endl;

   //  std::fstream f(fname.c_str(),
                      std::fstream::in|std::fstream::out|std::fstream::binary);
   std::fstream f(fname.c_str(),std::ios::in|std::ios::out|std::ios::binary);    
   unsigned char b[512];
   memset(b,0xff,512);
   std::cout<<f.tellg()<<std::endl;
   f.seekg(0,std::ios::beg);
   std::cout<<f.tellg()<<std::endl;
   f.read((char *)b,512);
   for(int ii=0;ii<sizeof(sector0);ii++) 
       std::cout<<std::hex<<(int )(b[ii]) <<"  ";
   std::cout<<std::endl; 
} 
```

在每种情况下，结果都是相同的，我传入源代码的文件名（示例 ascii），tellg 报告 1 并且缓冲区与文件匹配。如果我传入可执行文件的文件名（我的示例二进制文件），tellg 报告 -1 并且转储全部为 ff。

我做错了什么还是这是一个编译器错误？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-07T04:52:13.983

*很抱歉简短的回答，但没有太多时间。*

您正在打开文件以进行写入 ( `std::ios::out`)，这需要对文件进行排他锁。如果文件已经在使用中，获取锁失败，打开和读取也会失败。

# android - Android 添加到数组列表

> ID：10051816
> 
> 赞同：0
> 
> 时间：2012-04-07T04:39:42.773
> 
> 标签：android

我有一个显示在线用户列表的聊天程序。从服务器返回的消息是“RESP_USERLIST,,,,等等。除了我在将这些用户名添加到我的列表时遇到问题。

这是我当前的代码：

```
List <String> responseList = Arrays.asList(OnlineUsersPost.split(","));
    if (responseList.contains("RESP_USERLIST")){
        _onlineUsers = responseList.get(1);

        System.out.println("Online users: " + _onlineUsers); 
```

我在哪里初始化它：

```
private String _onlineUsers; 
```

似乎它只是将第一个用户添加到列表中，我想将它们全部添加到数组列表中。

编辑：我现在已经尝试过这种方式，差别不大：

```
List <String> responseList = Arrays.asList(OnlineUsersPost.split(","));
    if (responseList.contains("RESP_USERLIST")){
        for (int i = 0; i < responseList.size(); i++) {
            _onlineUsers.add(responseList.get(i));
            System.out.println("Online users: " + _onlineUsers);
        } 
```

我在哪里初始化它：

```
private List<String> _onlineUsers; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-07T05:07:16.617

我认为您应该首先初始化您的arraylist，您显示的初始化语句只是声明，因此将其初始化为：

```
private List<String> _onlineUsers= new ArrayList<Sting>(); 
```

并将您的循环更改为以下内容：

```
ist <String> responseList = Arrays.asList(OnlineUsersPost.split(","));
    if (responseList.contains("RESP_USERLIST")){
        for (int i = 1; i < responseList.size(); i++) {
            _onlineUsers.add(responseList.get(i));
            System.out.println("Online users: " + _onlineUsers);
        } 
```

# android - Android中的缅甸语语音到文本转换？

> ID：10051820
> 
> 赞同：8
> 
> 时间：2012-04-07T04:40:38.283
> 
> 标签：android, google-api, speech-recognition, speech-to-text, recognizer-intent

我们可以为 RecognizerIntent 添加自定义语言吗？

我搜索了很多 SO 问题，例如[https://stackoverflow.com/questions/2080401/is-there-a-speech-to-text-api-by-google](https://stackoverflow.com/questions/2080401/is-there-a-speech-to-text-api-by-google)

这解决了我在语音到文本转换期间使用有限数量的语言的问题。

我的问题是，我需要使用缅甸语（缅甸当地语言）语音并将其转换为文本。任何其他帮助都可以得到赞赏。

**更新 ：**

Google 的服务器目前支持英语、普通话和日语。 [安卓语音输入 API](http://android-developers.blogspot.in/2010/03/speech-input-api-for-android.html)

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-04-08T05:10:41.560

谷歌不太可能很快支持小语言。自定义语言的唯一方法是训练 CMUSphinx 模型并将其与 Pocketsphinx 一起使用：

[http://cmusphinx.sourceforge.net/wiki/tutorialam](http://cmusphinx.sourceforge.net/wiki/tutorialam)

[http://cmusphinx.sourceforge.net/2011/05/building-pocketsphinx-on-android/](http://cmusphinx.sourceforge.net/2011/05/building-pocketsphinx-on-android/)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-07T07:46:27.770

我不确定，但您是否尝试过使用 RecognizerIntent？

请参阅[参考资料](http://developer.android.com/reference/android/speech/RecognizerIntent.html)，有一节指定 IETF 语言请参阅此[节](http://developer.android.com/reference/android/speech/RecognizerIntent.html#EXTRA_LANGUAGE)。

您还可以尝试此 api 演示代码：http: [//developer.android.com/resources/samples/ApiDemos/src/com/example/android/apis/app/VoiceRecognition.html](http://developer.android.com/resources/samples/ApiDemos/src/com/example/android/apis/app/VoiceRecognition.html)

我真的不知道是否支持缅甸语，因为它肯定没有被列为默认语言环境之一，但语音识别是不同的。

刚刚发现了这个项目：[http](http://code.google.com/p/recognizer-intent/) ://code.google.com/p/recognizer-intent/开箱即用地支持缅甸语的可能性很小，但我认为值得尝试 api 演示代码并看看什么它在下拉框中说，祝你好运。

# android - 如何在我的 Android 应用程序中集成 yahoo 邮件服务？

> ID：10051824
> 
> 赞同：0
> 
> 时间：2012-04-07T04:41:13.973
> 
> 标签：android

大家好，我想在我的 android 应用程序中集成 yahoo 邮件服务。在谷歌上搜索了很多之后，我没有得到适当的教程，请任何人给我任何对我有帮助的链接或建议

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-07T08:22:44.500

请参阅上面的源代码，它工作正常并下载**Oauth** Libary 。

```
import oauth.signpost.OAuth;
import oauth.signpost.commonshttp.CommonsHttpOAuthConsumer;
import oauth.signpost.commonshttp.CommonsHttpOAuthProvider;
import oauth.signpost.exception.OAuthCommunicationException;
import oauth.signpost.exception.OAuthExpectationFailedException;
import oauth.signpost.exception.OAuthMessageSignerException;
import oauth.signpost.exception.OAuthNotAuthorizedException;
import oauth.signpost.signature.HmacSha1MessageSigner;
import org.apache.http.HttpResponse;
import org.apache.http.client.ClientProtocolException;
import org.apache.http.client.HttpClient;
import org.apache.http.client.methods.HttpPost;
import org.apache.http.entity.StringEntity;
import org.apache.http.impl.client.DefaultHttpClient;
import android.app.Activity;
import android.app.AlertDialog;
import android.app.Dialog;
import android.content.DialogInterface;
import android.content.Intent;
import android.content.SharedPreferences;
import android.net.Uri;
import android.os.Bundle;
import android.util.Log;
import android.view.LayoutInflater;
import android.view.View;
import android.widget.EditText;
import android.widget.Toast;
import com.synapse.selfervices.R;

public class YahooScreen extends Activity {
    private static final String REQUEST_TOKEN_ENDPOINT_URL ="https://api.login.yahoo.com/oauth/v2/get_request_token";
    private static final String ACCESS_TOKEN_ENDPOINT_URL ="https://api.login.yahoo.com/oauth/v2/get_access_token";
    private static final String AUTHORIZE_WEBSITE_URL ="https://api.login.yahoo.com/oauth/v2/request_auth";
    private static final int PIN_DIALOG = 0;
    String CALLBACK_URL = OAuth.OUT_OF_BAND; // this should be the same as the
    // SCHEME and HOST values in
    // your AndroidManifest.xml file
    String CONSUMER_KEY = "";//
    String CONSUMER_SECRET = "";
    private CommonsHttpOAuthConsumer myConsumer;
    private CommonsHttpOAuthProvider myProvider;
    private String requestToken;
    private String accessToken;

    /** Called when the activity is first created. */
    @Override
    public void onCreate(Bundle savedInstanceState) {
            super.onCreate(savedInstanceState);
            setContentView(R.layout.main);
            callOAuth();
            showDialog(PIN_DIALOG);
            // createPinDialog().show();
    }

    private void callOAuth() {
            try {
                    // retrieve the consumer token and then sign it
                    myConsumer = new CommonsHttpOAuthConsumer(CONSUMER_KEY,
                                    CONSUMER_SECRET);

                    myConsumer.setMessageSigner(new HmacSha1MessageSigner());

                    HttpClient client = new DefaultHttpClient();
                    // retrieve the provider by using the signed consumer token
                    myProvider = new CommonsHttpOAuthProvider(
                                    REQUEST_TOKEN_ENDPOINT_URL, ACCESS_TOKEN_ENDPOINT_URL,
                                    AUTHORIZE_WEBSITE_URL, client);
                    myProvider.setOAuth10a(true);
                    String aUrl = myProvider.retrieveRequestToken(myConsumer,
                                    CALLBACK_URL);

                    requestToken = myConsumer.getToken();
                    startActivity(new Intent(Intent.ACTION_VIEW, Uri.parse(aUrl)));
            } catch (Exception ex) {
                    Toast.makeText(getApplicationContext(), ex.getMessage(),
                                    Toast.LENGTH_LONG).show();
                    Log.e(ex.getMessage(), ex.toString());
            }
    }

    // this is the callback function that will run when oauth authenticates
    // successfully
    @Override
    protected void onNewIntent(Intent intent) {
            System.out.println("OnNewIntent...");
            Toast.makeText(getApplicationContext(), "OnNewIntent - It works!",
                            Toast.LENGTH_LONG).show();
            // whatever you want to do after authenticating goes here ....
    }

    AlertDialog createPinDialog() {
            LayoutInflater factory = (LayoutInflater) getSystemService(LAYOUT_INFLATER_SERVICE);

            // LayoutInflater factory = LayoutInflater.from(this);
            final View textEntryView = factory.inflate(R.layout.pin, null);
            final EditText pinText = (EditText) textEntryView
                            .findViewById(R.id.pin_text);
            AlertDialog.Builder builder = new AlertDialog.Builder(this);
            builder.setTitle("Twitter OAuth PIN");
            builder.setView(textEntryView);
            builder.setPositiveButton("OK", new DialogInterface.OnClickListener() {
                    public void onClick(DialogInterface dialog, int whichButton) {
                            if (pinText != null)
                                    gotOAuthPin(pinText.getText().toString());
                            onResume();
                    }
            });
            return builder.create();
    }

    private void gotOAuthPin(String pin) {
            SharedPreferences.Editor editor = getSharedPreferences("yahoo",
                            MODE_PRIVATE).edit();
            try {
                    myProvider.retrieveAccessToken(myConsumer, pin);
                    accessToken = myConsumer.getToken();

            } catch (OAuthMessageSignerException e) {
                    // TODO Auto-generated catch block
                    e.printStackTrace();
            } catch (OAuthNotAuthorizedException e) {
                    // TODO Auto-generated catch block
                    e.printStackTrace();
            } catch (OAuthExpectationFailedException e) {
                    // TODO Auto-generated catch block
                    e.printStackTrace();
            } catch (OAuthCommunicationException e) {
                    // TODO Auto-generated catch block
                    e.printStackTrace();
            }
            if (accessToken != null && accessToken.length() > 0) {
                    Toast.makeText(this, "Authorized", Toast.LENGTH_SHORT).show();
                    HttpPost request = new HttpPost(
                                    "http://social.yahooapis.com/v1/user/profile?format=json");
                    StringEntity body = null;
                    /*
                     * try { body = new StringEntity("city=hamburg&label=" +
                     * URLEncoder.encode("Send via Signpost!", "UTF-8")); } catch
                     * (UnsupportedEncodingException e1) { // TODO Auto-generated catch
                     * block e1.printStackTrace(); }
                     * body.setContentType("application/x-www-form-urlencoded");
                     * request.setEntity(body);
                     */

                    try {
                            myConsumer.sign(request);
                    } catch (OAuthMessageSignerException e1) {
                            // TODO Auto-generated catch block
                            e1.printStackTrace();
        } catch (OAuthMessageSignerException e1) {
                            // TODO Auto-generated catch block
                            e1.printStackTrace();
                    } catch (OAuthExpectationFailedException e1) {
                            // TODO Auto-generated catch block
                            e1.printStackTrace();
                    } catch (OAuthCommunicationException e1) {
                            // TODO Auto-generated catch block
                            e1.printStackTrace();
                    }

                    System.out.println("Sending update request to Fire Eagle...");

                    HttpClient httpClient = new DefaultHttpClient();
                    HttpResponse response = null;
                    try {
                            response = httpClient.execute(request);
                    } catch (ClientProtocolException e) {
                            // TODO Auto-generated catch block
                            e.printStackTrace();
                    } catch (IOException e) {
                            // TODO Auto-generated catch block
                            e.printStackTrace();
                    }

                    Toast.makeText(
                                    this,
                                    "Response: " + response.getStatusLine().getStatusCode()
                                                    + " " + response.getStatusLine().getReasonPhrase(),
                                    Toast.LENGTH_SHORT).show();
            } else {
                    Toast.makeText(this, "Not Authorized", Toast.LENGTH_SHORT).show();
            }
    }

    @Override
    protected Dialog onCreateDialog(int id) {
            switch (id) {
            case PIN_DIALOG:
                    LayoutInflater factory = LayoutInflater.from(this);
                    final View textEntryView = factory.inflate(R.layout.pin, null);
                    final EditText pinText = (EditText) textEntryView
                                    .findViewById(R.id.pin_text);
                    AlertDialog.Builder builder = new AlertDialog.Builder(this);
                    builder.setTitle("OAuth PIN");
                    builder.setView(textEntryView);
                    builder.setPositiveButton("OK",
                                    new DialogInterface.OnClickListener() {
                                            public void onClick(DialogInterface dialog,
                                                            int whichButton) {
                                                    if (pinText != null)
                                                            gotOAuthPin(pinText.getText().toString());
                                            }
                                    });
                    return builder.create();
            }

            return super.onCreateDialog(id);
    }} 
```

# android - 如何在 android 中创建 7incs avd 模拟器？

> ID：10051826
> 
> 赞同：1
> 
> 时间：2012-04-07T04:41:19.453
> 
> 标签：android, android-emulator, avd

我想用 android api 4.0.X 创建一个 7inchs avd。

我如何创建 7inchs 平板电脑模拟器来使用 android 版本 4.0 测试应用程序

请任何人帮助我

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-07T04:58:29.450

要获得官方的三星 Galaxy Tab 模拟器，请执行以下操作：

1) 打开 Android SDK 和 AVD 管理器

2）点击可用包

3) 扩展第三方附加组件。在那里你会看到三星电子的附加组件。

4) 安装插件后，创建一个新的模拟器。在 Target 下，您将看到新的 Samsung Tab 设置，选择它。

而已！

创建一个大小为 1024x600 且操作系统版本为 4.0 的模拟器，类似于 Tab 7"

# jsp - 如何在 JSP 中正确发送会话超时消息？

> ID：10051828
> 
> 赞同：1
> 
> 时间：2012-04-07T04:41:38.847
> 
> 标签：jsp, session, servlets, session-timeout

使用 JSP 的默认`<session-timeout>`设置，我想在会话过期后显示“您的会话已过期（30 分钟）”消息并将用户带回登录页面。

使用`((HttpServletRequest) request).getSession(false) == null`它来检测它并没有正确地完成工作，因为在用户第一次进入应用程序时会话已经为空，从而使消息立即弹出。

我怎样才能避免这种情况？有没有办法自定义 JSP 的 HttpSession 以便我知道真正的事件何时发生？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-07T06:56:44.900

设置一个指示上次登录的cookie怎么样？如果 cookie 有效且 url 不是登录 url，则可以显示会话超时消息。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-08-11T00:49:07.733

如何使用`request.isRequestedSessionIdValid()`方法（伪代码）：

```
if(request.getRequestedSessionId() == null) {
  // no session yet -> need to create new one
}
else if(request.isRequestedSessionIdValid()) {
  // we have valid session
}
else {
  // session invalid due to timeout -> handle timeout
} 
```

# authentication - 使用 Chrome 扩展程序检查登录状态

> ID：10051842
> 
> 赞同：1
> 
> 时间：2012-04-07T04:43:41.460
> 
> 标签：authentication, cookies, google-chrome-extension

我正在为我们的网站构建我的第一个 chrome 扩展。不太花哨，我只需要查看用户是否已登录，如果是，我将发送一个 ajax 请求并从服务器获取一些用户数据并将其显示在扩展弹出窗口中。目前我认为，我应该检查 auth cookie 的存在以确保用户已登录。我想，为此目的检查 auth cookie 的存在是否是个好主意，或者我应该采取其他方式? 这是我用来检查用户是否登录的代码

```
isLoggedIn: function () {
                var cookie = document.cookie(this.cookieName);
                if (console)
                    console.log(cookie);
                if (cookie) {
                    return true;
                }
                return false;
            }, 
```

我知道我不能立即从后台进程访问 cookie，我必须将 cookie 信息从内容脚本传递到后台进程，但我认为它解释了这个想法。有什么建议么？
**编辑：**我已阅读[本文](http://ttcremers.blogspot.com/2010/01/accessing-site-cookies-from-chrome.html)将 cookie 数据从内容脚本发送到 popup.js，该文件位于 manifest.json 文件的“default_popup”设置中。但我似乎无法将 cookie 数据传递回 popup.html 和那里引用的 js 文件。我怎样才能让它工作？这是我的 manifest.json 文件

```
{
    "name": "Camba TV - Visual Security Made Simple",
    "version": "1.0",
    "description": "My Cameras on Camba.tv",
    "icons": { 
        "48": "icon48.png",
        "128": "icon128.png" 
    },
    "browser_action": {
        "default_icon": "icon.png",
        "default_popup": "popup.html"
    },
    "content_scripts": [
    {
      "matches": ["http://*/*", "https://*/*"],
      "js": ["Cookies.js"]
    }
  ],
  "permissions": [
  "http://localhost:50477/",
    "tabs",
    "http://*/*",
    "https://*/*",
    "cookies"
  ]

} 
```

# entity-framework-4 - How to create dynamic database in entity framework with specified path?

> ID：10051843
> 
> 赞同：0
> 
> 时间：2012-04-07T04:43:42.977
> 
> 标签：entity-framework-4, entity-framework-4.1, entity, edmx

currently i create dynamic database **using CreateDatabase() method** in Entity Framework. it executes sucessfully and it creates database at following path: **"c:\Program Files\Microsoft SQL Server\MSSQL10.SQLEXPRESS\MSSQL\DATA"** but i want to create database in my application's directory. how to do this? please help me.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-07T16:43:00.680

Normally all databases are created on default path configured in SQL Server. Only if you are using SQL Server Express and if you define connection string which specifies database to be created in your data folder it will use your application folder. It will work only with SQL Server Express. Make sure that inner part of connection string looks like:

```
Server=.\SQLExpress;AttachDbFilename=|DataDirectory|\YourDbFile.mdf;Database=YourDbName; Integrated Security=SSPI; 
```

Where `|DataDirectory|` placeholder which will be replaced by path to your data directory. For web application it should be App_Data and for standalone applications it should be application's folder. You can also use any path directly in connection string or control DataDirectory resolution from code by using:

```
AppDomain.CurrentDomain.SetData("DataDirectory", YourPath); 
```

# wcf - 如何使用 WSDL 模拟 WCF 服务？

> ID：10051844
> 
> 赞同：0
> 
> 时间：2012-04-07T04:43:59.360
> 
> 标签：wcf

我有一个非常简单的 WCF 服务（常规 wshttp 绑定）的 WSDL，我计划在 IIS 中构建和托管一个简单的模型服务，以便我可以继续我的开发，有没有什么快速的方法/有用的工具可以做到这一点？谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-07T22:43:00.867

你根本不需要这项服务。只需使用接口并创建模拟服务。

```
[ServiceContract]
public interface ICalculator
{
    [OperationContract]
    int Add(int a, int b);
}

public class MyMockCalculator : ICalculator
{
    public int Add(int a, int b)
    {
        return 0;
    }
} 
```

# ssh - ssh 和 authorized_keys 有问题

> ID：10051846
> 
> 赞同：1
> 
> 时间：2012-04-07T04:44:40.853
> 
> 标签：ssh, authorized-keys

我正在从**server1** SSH到**server2**。我生成了**id_rsa**和**id_rsa.pub**文件。如果我 ssh 到 mike@server2 它工作正常，但 ssh 到 john@server2 没有密码就无法工作。mike 和 john 主目录都包含“.ssh”，即 chmod 700，该文件夹包含“authorized_keys”，其中仅包含先前生成的 id_rsa.pub 文件的内容（并且是 chmod 600）。两者的内容是一样的。

服务器 1：Linux x86_64 x86_64 x86_64 GNU/Linux

服务器 2：AIX 5.3.0.0 64 位

命令 1，用户 Mike（无需密码即可使用）： `ssh -v -n -o StrictHostKeychecking=no -o NumberOfPasswordPrompts=0 mike@server2 echo Hello`

~`drwx------ 7 mike mike 4096 Jan 19 2011 .`

~/.ssh`drwx------ 2 mike mike 256 Nov 28 16:39 .ssh`

~/.ssh/authorized_keys`-rw------- 1 mike mike 823 Apr 06 11:56 .ssh/authorized_keys`

* * *

命令 2，用户 John（需要密码） `ssh -v -n -o StrictHostKeychecking=no -o NumberOfPasswordPrompts=0 john@server2 echo Hello`

~`drwx------ 12 john jgroup 4096 Apr 06 23:13 .`

~/.ssh`drwx------ 2 john jgroup 256 Apr 06 23:56 .ssh`

~/.ssh/authorized_keys`-rw------- 1 john jgroup 414 Apr 06 11:55 .ssh/authorized_keys`

上面命令 2 的 ssh -v 输出：

```
OpenSSH_4.3p2, OpenSSL 0.9.8e-fips-rhel5 01 Jul 2008
debug1: Reading configuration data /etc/ssh/ssh_config
debug1: Applying options for *
debug1: Connecting to server2 [X.X.X.X] port 22.
debug1: Connection established.
debug1: identity file /home/will/.ssh/identity type -1
debug1: identity file /home/will/.ssh/id_rsa type 1
debug1: identity file /home/will/.ssh/id_dsa type -1
debug1: loaded 3 keys
debug1: Remote protocol version 2.0, remote software version OpenSSH_5.0
debug1: match: OpenSSH_5.0 pat OpenSSH*
debug1: Enabling compatibility mode for protocol 2.0
debug1: Local version string SSH-2.0-OpenSSH_4.3
debug1: SSH2_MSG_KEXINIT sent
debug1: SSH2_MSG_KEXINIT received
debug1: kex: server->client aes128-cbc hmac-md5 none
debug1: kex: client->server aes128-cbc hmac-md5 none
debug1: SSH2_MSG_KEX_DH_GEX_REQUEST(1024<1024<8192) sent
debug1: expecting SSH2_MSG_KEX_DH_GEX_GROUP
debug1: SSH2_MSG_KEX_DH_GEX_INIT sent
debug1: expecting SSH2_MSG_KEX_DH_GEX_REPLY
debug1: Host 'server2' is known and matches the RSA host key.
debug1: Found key in /home/will/.ssh/known_hosts:838
debug1: ssh_rsa_verify: signature correct
debug1: SSH2_MSG_NEWKEYS sent
debug1: expecting SSH2_MSG_NEWKEYS
debug1: SSH2_MSG_NEWKEYS received
debug1: SSH2_MSG_SERVICE_REQUEST sent
debug1: SSH2_MSG_SERVICE_ACCEPT received

This network/computer system is for the use of authori...
.........................................................

debug1: Authentications that can continue: publickey,password,keyboard-interactive
debug1: Next authentication method: publickey
debug1: Trying private key: /home/will/.ssh/identity
debug1: Offering public key: /home/will/.ssh/id_rsa
debug1: Authentications that can continue: publickey,password,keyboard-interactive
debug1: Trying private key: /home/will/.ssh/id_dsa
debug1: Next authentication method: keyboard-interactive
debug1: Next authentication method: password
debug1: No more authentication methods to try.
Permission denied (publickey,password,keyboard-interactive). 
```

任何人都知道为什么它会与一个用户而不是另一个用户一起工作（两者都在同一台服务器上）？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-07T04:50:52.547

无法使用密钥进行身份验证的常见原因：

*   ~/.ssh 上的权限或所有权设置不正确（我看到你已经检查过了）
*   公钥已损坏
*   公钥用于与私钥不同的密钥

还要检查服务器的`auth.log`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-26T15:05:24.860

你能够以迈克的身份登录是一个真正的笨蛋。您可以尝试制作`authorized_keys2`文件。`authorized_keys`不适用于所有版本的 OpenSSH。

```
ln -s authorized_keys authorized_keys2 
```

# c# - JQGrid 高级搜索 - 我们可以同时使用“AND”和“OR”运算符吗？

> ID：10051847
> 
> 赞同：2
> 
> 时间：2012-04-07T04:45:13.567
> 
> 标签：c#, sql, asp.net-mvc, jqgrid

我正在使用 JQGrid 高级搜索功能`multipleSearch: true, multipleGroup: true`。

我也在使用 Asp.net MVC 和经典的 ado.net + 存储过程。

每当用户在 JGRID 搜索数据时，我都会将此搜索条件作为参数值传递给存储过程。如 ...

```
Select * 
From tableName 
Where @WhereClauseDynamic 
```

所以我创建了“Where子句生成器”类。

```
[ModelBinder(typeof(GridModelBinder))]
public class JqGrid_Setting_VewModel
{
    public bool IsSearch { get; set; }
    public int PageSize { get; set; }
    public int PageIndex { get; set; }
    public string SortColumn { get; set; }
    public string SortOrder { get; set; }
    public string Where { get; set; }
}

public class WhereClauseGenerator
{
    private static readonly string[] FormatMapping = {
        " ({0} = '{1}') ",               // "eq" - equal
        " ({0} <> {1}) ",                // "ne" - not equal
        " ({0} < {1}) ",                 // "lt" - less than
        " ({0} <= {1}) ",                // "le" - less than or equal to
        " ({0} > {1}) ",                 // "gt" - greater than
        " ({0} >= {1}) ",                // "ge" - greater than or equal to
        " ({0} LIKE '{1}%') ",           // "bw" - begins with
        " ({0} NOT LIKE '{1}%') ",       // "bn" - does not begin with
        " ({0} LIKE '%{1}') ",           // "ew" - ends with
        " ({0} NOT LIKE '%{1}') ",       // "en" - does not end with
        " ({0} LIKE '%{1}%') ",          // "cn" - contains
        " ({0} NOT LIKE '%{1}%') "       // "nc" - does not contain
    };

    public string Generator(Filter _Filter)
    {
        var sb = new StringBuilder();            

        foreach (Rule rule in _Filter.rules)
        {
            if (sb.Length != 0)
                sb.Append(_Filter.groupOp);

            sb.AppendFormat(FormatMapping[(int)rule.op], rule.field, rule.data);
        }

        return sb.ToString();
    }
}

public class GridModelBinder : IModelBinder
{
    public object BindModel(ControllerContext controllerContext, ModelBindingContext bindingContext)
    {
        try
        {
            var request = controllerContext.HttpContext.Request;
            var serializer = new JavaScriptSerializer();
            var _WhereClauseGenerator = new WhereClauseGenerator();

            var _IsSearch = bool.Parse(request["_search"] ?? "false");
            var _PageIndex = int.Parse(request["page"] ?? "1");
            var _PageSize = int.Parse(request["rows"] ?? "10");
            var _SortColumn = request["sidx"] ?? "";
            var _SortOrder = request["sord"] ?? "asc";
            var _Where = request["filters"] ?? "";

            return new JqGrid_Setting_VewModel
            {
                IsSearch = _IsSearch,
                PageIndex = _PageIndex,
                PageSize = _PageSize,
                SortColumn = _SortColumn,
                SortOrder = _SortOrder,
                Where = (_IsSearch == false || string.IsNullOrEmpty(_Where)) ? string.Empty : _WhereClauseGenerator.Generator(serializer.Deserialize<Filter>(_Where))
            };

        }
        catch
        {
            return null;
        }
    }
}

[DataContract]
public class Filter
{
    [DataMember]
    public GroupOp groupOp { get; set; }
    [DataMember]
    public List<Rule> rules { get; set; }
}

[DataContract]
public class Rule
{
    [DataMember]
    public string field { get; set; }
    [DataMember]
    public Operations op { get; set; }
    [DataMember]
    public string data { get; set; }
}

public enum GroupOp
{
    AND,
    OR
}

public enum Operations
{
    eq, // "equal"
    ne, // "not equal"
    lt, // "less"
    le, // "less or equal"
    gt, // "greater"
    ge, // "greater or equal"
    bw, // "begins with"
    bn, // "does not begin with"
    //in, // "in"
    //ni, // "not in"
    ew, // "ends with"
    en, // "does not end with"
    cn, // "contains"
    nc  // "does not contain"
} 
```

通过使用上面的代码，当我这样搜索时一切都是正确的

```
{
"groupOp":"AND",
"rules":[{"field":"Seminar_Code","op":"eq","data":"MED01"},
         {"field":"Seminar_Code","op":"eq","data":"CMP05"}],"groups":[]      
}

 sb.ToString() // Output vlaue
 " (Seminar_Code = 'MED01') AND (Seminar_Code = 'CMP05') " 
```

所以，这是完全正确的。

但是当涉及到更复杂的搜索查询时......

```
{
"groupOp":"AND",
"rules":[{"field":"Seminar_Code","op":"eq","data":"MED01"},
     {"field":"Seminar_Code","op":"eq","data":"CMP05"}],

     "groups":[{
            "groupOp":"OR",
            "rules": [{"field":"Seminar_Code","op":"eq","data":"CMP01"}],"groups":[]}]              
}

sb.ToString() // Actual Output value is like that below
" (Seminar_Code = 'MED01') AND (Seminar_Code = 'CMP05') " 
```

但是我所期望的如下所示..

```
" ((Seminar_Code = 'MED01') AND (Seminar_Code = 'CMP05')) OR ( Seminar_Code = 'CMP01' ) " 
```

那么我怎样才能正确地做到这一点呢？

JQGrid 是否支持像“AND”+“OR”这样的多组操作？这是否同时只支持一个运营商？我们可以同时使用“AND”和“OR”运算符吗？

每一个建议都将不胜感激。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-07T07:42:47.457

首先我应该提到我发现你使用的代码很危险。您构建要在 SELECT 中使用的 WHERE 构造，并使用**信任**输入数据。您可能会收到 SQL 注入问题。您应该更安全地编写代码。您需要全部转义`[`，`%`并`_`用于包含`LIKE`.

此外，我建议您将 SELECT 与参数一起使用。代替

```
Seminar_Code LIKE 'MED01%' 
```

您可以使用

```
Seminar_Code LIKE (@p1 + '%') 
```

并使用[SqlCommand.Parameters](http://msdn.microsoft.com/en-us/library/system.data.sqlclient.sqlcommand.parameters.aspx)定义您使用的参数的值`@p1`和其他参数。

现在我试着回答你的主要问题。您使用的类的定义`Filter`不使用`groups`输入部分。您应该将`Filter`类​​扩展到类似

```
public class Filter {
    public GroupOp groupOp { get; set; }
    public List<Rule> rules { get; set; }
    public List<Filter> groups { get; set; }
} 
```

您还应该扩展`WhereClauseGenerator.Generator`方法的代码来分析`groups`零件。我建议您另外使用更接近标准名称转换的名称。如果您将名称`_Filter`用于变量而不是类的私有成员，则会使代码难以理解。此外，类`WhereClauseGenerator`可以是静态的（`public static class WhereClauseGenerator`），方法`Generator`也可以。

`groups`添加部分支持的最简单的代码`Filter`可以是

```
public static string Generator (Filter filters) {
    var sb = new StringBuilder ();

    if (filters.groups != null && filters.groups.Count > 0)
        sb.Append (" (");

    bool firstRule = true;
    if (filters.rules != null) {
        foreach (var rule in filters.rules) {
            if (!firstRule)
                sb.Append (filters.groupOp);
            else
                firstRule = false;

            sb.AppendFormat (FormatMapping[(int)rule.op], rule.field, rule.data);
        }
    }

    if (filters.groups != null && filters.groups.Count > 0) {
        sb.Append (") ");

        foreach (var filter in filters.groups) {
            if (sb.Length != 0)
                sb.Append (filter.groupOp);
            sb.Append (" (");
            sb.Append (Generator (filter));
            sb.Append (") ");
        }
    }

    return sb.ToString ();
} 
```

**更新**：我必须修改上面的代码才能为更复杂的`filters`输入产生正确的结果：

```
public class Filter {
    public GroupOp groupOp { get; set; }
    public List<Rule> rules { get; set; }
    public List<Filter> groups { get; set; }
}

public class Rule {
    public string field { get; set; }
    public Operations op { get; set; }
    public string data { get; set; }
}

public enum GroupOp {
    AND,
    OR
}

public enum Operations {
    eq, // "equal"
    ne, // "not equal"
    lt, // "less"
    le, // "less or equal"
    gt, // "greater"
    ge, // "greater or equal"
    bw, // "begins with"
    bn, // "does not begin with"
    //in, // "in"
    //ni, // "not in"
    ew, // "ends with"
    en, // "does not end with"
    cn, // "contains"
    nc  // "does not contain"
}

public static class WhereClauseGenerator {
    private static readonly string[] FormatMapping = {
        "({0} = '{1}')",               // "eq" - equal
        "({0} <> {1})",                // "ne" - not equal
        "({0} < {1})",                 // "lt" - less than
        "({0} <= {1})",                // "le" - less than or equal to
        "({0} > {1})",                 // "gt" - greater than
        "({0} >= {1})",                // "ge" - greater than or equal to
        "({0} LIKE '{1}%')",           // "bw" - begins with
        "({0} NOT LIKE '{1}%')",       // "bn" - does not begin with
        "({0} LIKE '%{1}')",           // "ew" - ends with
        "({0} NOT LIKE '%{1}')",       // "en" - does not end with
        "({0} LIKE '%{1}%')",          // "cn" - contains
        "({0} NOT LIKE '%{1}%')"       // "nc" - does not contain
    };

    private static StringBuilder ParseRule(ICollection<Rule> rules, GroupOp groupOp) {
        if (rules == null || rules.Count == 0)
            return null;

        var sb = new StringBuilder ();
        bool firstRule = true;
        foreach (var rule in rules) {
            if (!firstRule)
                // skip groupOp before the first rule
                sb.Append (groupOp);
            else
                firstRule = false;

            sb.AppendFormat (FormatMapping[(int)rule.op], rule.field, rule.data);
        }
        return sb.Length > 0 ? sb : null;
    }

    private static void AppendWithBrackets (StringBuilder dest, StringBuilder src) {
        if (src == null || src.Length == 0)
            return;

        if (src.Length > 2 && src[0] != '(' && src[src.Length - 1] != ')') {
            dest.Append ('(');
            dest.Append (src);
            dest.Append (')');
        } else {
            // verify that no other '(' and ')' exist in the b. so that
            // we have no case like src = "(x < 0) OR (y > 0)"
            for (int i = 1; i < src.Length - 1; i++) {
                if (src[i] == '(' || src[i] == ')') {
                    dest.Append ('(');
                    dest.Append (src);
                    dest.Append (')');
                    return;
                }
            }
            dest.Append (src);
        }
    }

    private static StringBuilder ParseFilter(ICollection<Filter> groups, GroupOp groupOp) {
        if (groups == null || groups.Count == 0)
            return null;

        var sb = new StringBuilder ();
        bool firstGroup = true;
        foreach (var group in groups) {
            var sbGroup = ParseFilter(group);
            if (sbGroup == null || sbGroup.Length == 0)
                continue;

            if (!firstGroup)
                // skip groupOp before the first group
                sb.Append (groupOp);
            else
                firstGroup = false;

            sb.EnsureCapacity (sb.Length + sbGroup.Length + 2);
            AppendWithBrackets (sb, sbGroup);
        }
        return sb;
    }

    public static StringBuilder ParseFilter(Filter filters) {
        var parsedRules = ParseRule (filters.rules, filters.groupOp);
        var parsedGroups = ParseFilter (filters.groups, filters.groupOp);

        if (parsedRules != null && parsedRules.Length > 0) {
            if (parsedGroups != null && parsedGroups.Length > 0) {
                var groupOpStr = filters.groupOp.ToString();
                var sb = new StringBuilder (parsedRules.Length + parsedGroups.Length + groupOpStr.Length + 4);
                AppendWithBrackets (sb, parsedRules);
                sb.Append (groupOpStr);
                AppendWithBrackets (sb, parsedGroups);
                return sb;
            }
            return parsedRules;
        }
        return parsedGroups;
    }
} 
```

现在您可以使用静态`ParseFilter`类的静态方法，`WhereClauseGenerator`例如

```
var filters = request["filters"];
string whereString = request["_search"] && !String.IsNullOrEmpty(filters)
    ? WhereClauseGenerator.ParseFilter(serializer.Deserialize<Filter>(filters))
    : String.Empty; 
```

请不要忘记 SQL 注入的问题仍然存在。在我不知道您使用哪种数据库访问之前，我无法修复它。

# sql-server-2008 - 如何将 php my admin .sql 文件导入 SQL Server 2008？

> ID：10051852
> 
> 赞同：0
> 
> 时间：2012-04-07T04:45:41.383
> 
> 标签：sql-server-2008

我需要将 PHP myadmin 的 .sql 文件导入 SQL Server 2008。

我创建了一个新数据库，然后单击新查询并粘贴 php 的 .sql 脚本并执行命令。它给出了语法错误。

我们可以直接将 php 的 .sql 导入 SQL Server 2008 吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-07T05:00:52.343

我会看这篇博文 - [MySQL 到 SQL Server 迁移：如何使用 SSMA](http://blogs.msdn.com/b/ssma/archive/2011/02/07/mysql-to-sql-server-migration-how-to-use-ssma.aspx?Redirected=true)

使用 SQL Server 迁移助手，您可以从活动连接而不是 sql 转储从 mysql 数据库迁移到 server 2008。如果您无法远程连接到原始数据库，您可以临时创建另一个 MySQL 数据库。此实用程序将让您了解迁移可能出现的任何问题。

# android - Android标签布局错误

> ID：10051862
> 
> 赞同：0
> 
> 时间：2012-04-07T04:48:57.590
> 
> 标签：android, android-emulator, android-tabhost, android-tabactivity

我使用 TabLayout 创建了一个带有 2 个选项卡的应用程序...

我需要将该应用程序与另一个应用程序集成。但是当我到达标签页时，它最终出现错误

> java.lang.RuntimeException：无法启动活动 ComponentInfo{com.android/com.android.simphone.SimFoneDetailsActivity}：java.lang.RuntimeException：您的内容必须有一个 id 属性为“android.R.id.tabhost”的 TabHost

我更改了TabHost的ID，但没有用......欢迎任何建议......

代码的xml部分也附在...

```
<TabHost 
xmlns:android="http://schemas.android.com/apk/res/android"
android:id="@android:id/tabhost" 
android:layout_width="fill_parent" 
android:layout_height="fill_parent" 
android:background="@drawable/bg_sim">
<LinearLayout 
android:id="@+id/LinearLayout01" 
android:layout_width="fill_parent" 
android:layout_height="fill_parent"
android:orientation="vertical">
<TabWidget 
android:id="@+id/tabs" 
android:layout_width="fill_parent" 
android:layout_height="wrap_content"></TabWidget>
<FrameLayout 
android:id="@+id/tabcontent" 
android:layout_width="fill_parent" 
android:layout_height="fill_parent"></FrameLayout>
</LinearLayout>
</TabHost> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-07T05:00:59.007

你的布局 xml 代码是什么？你是这样写的吗：

```
<TabHost
        android:id="@android:id/tabhost"
        android:layout_width="fill_parent"
        android:layout_height="fill_parent" >
......
</> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-07T05:28:43.113

试试这个

```
<TabHost 
xmlns:android="http://schemas.android.com/apk/res/android"
android:id="@android:id/tabhost" 
android:layout_width="fill_parent" 
android:layout_height="fill_parent" 
android:background="@drawable/bg_sim">
<LinearLayout 
android:id="@+id/LinearLayout01" 
android:layout_width="fill_parent" 
android:layout_height="fill_parent"
android:orientation="vertical">
<TabWidget 
android:id="@android:id/tabs" 
android:layout_width="fill_parent" 
android:layout_height="wrap_content"></TabWidget>
<FrameLayout 
android:id="@android:id/tabcontent" 
android:layout_width="fill_parent" 
android:layout_height="fill_parent"></FrameLayout>
</LinearLayout>
</TabHost> 
```

请注意，要使选项卡正常工作，您需要使用此**@android:id/**

# php - 选择元素的 setPlaceholder

> ID：10051866
> 
> 赞同：0
> 
> 时间：2012-04-07T04:49:35.367
> 
> 标签：php, jquery, css, zend-framework, zend-form

我有一个 ZendX_Jquery_Form ，我在为选择元素设置 placeHolder 时遇到问题。

```
$month->setAttribs(
        array(
            'required'  =>  TRUE,
            'placeHolder'   =>  'Month'
        )); 
```

我也希望它看起来像这样： ![在此处输入图像描述](../Images/ee5d6e888dabea4570b38fcd2fa82c06.png)

但我得到的只是：![在此处输入图像描述](../Images/674410154570c9516c48fb7547ce10bf.png)

在我的萤火虫输出 html 看起来像这样

```
<select id="months_at_residence-lengthMonth" placeholder="Month" required="1" name="months_at_residence[lengthMonth]"> 
```

我完全不知道为什么这不起作用。

我需要帮助来设置它，这样当我点击它时，占位符文本会隐藏。万一这不能直接使用 zend 我知道这可以使用 js/css 来完成。如果我用 css 和 javascript 来做，我怎样才能为所有选择元素实现这一点？

希望问题足够清楚

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-07T05:54:17.303

[占位符](http://www.w3.org/TR/html5/common-input-element-attributes.html#attr-input-placeholder)不适用于`select`表单元素，您应该改为使用默认值并禁用它，如下所示：

```
$month->addMultiOption('--', 'Month');
$month->setOptions(array('disable' => array('--'))); 
```

这将输出：

```
<select id="country" name="country" class="valid">
    <option disabled="disabled" label="--" value="--">Month</option>
    <option label="January" value="Jan">January</option>
    <option label="February" value="Feb">February</option>
    // ...
</select> 
```

[W3Schools](http://www.w3schools.com/html5/att_input_placeholder.asp)的注意事项：

> placeholder 属性适用于以下输入类型：文本、搜索、url、电话、电子邮件和密码。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-07T05:41:27.363

为什么不在选择“占位符”文本中设置第一个选项？

```
<select id="choice">
    <option value="0" selected="selected">Choose...</option>
    ...
</select> 
```

见[https://stackoverflow.com/a/5805194/435460](https://stackoverflow.com/a/5805194/435460)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-07T04:57:31.347

您可以通过 jquery 添加占位符：

```
 $("#months_at_residence-lengthMonth").attr("placeholder", "Month"); 
```

此处建议的解决方案可能会有所帮助：
[http ://www.hagenburger.net/BLOG/HTML5-Input-Placeholder-Fix-With-jQuery.html](http://www.hagenburger.net/BLOG/HTML5-Input-Placeholder-Fix-With-jQuery.html)

# java - Java 字节数组转换问题

> ID：10051867
> 
> 赞同：6
> 
> 时间：2012-04-07T04:49:42.547
> 
> 标签：java

我有一个字符串，其中包含一系列位（如“01100011”）和while循环中的一些整数。例如：

```
while (true) {
    int i = 100;
    String str = Input Series of bits

    // Convert i and str to byte array
} 
```

现在我想要一种将字符串和 int 转换为字节数组的最快方法。到目前为止，我所做的是将方法转换`int`为`String`然后`getBytes()`在两个字符串上应用该方法。但是，它有点慢。还有其他方法可以（可能）比这更快吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-07T04:55:29.167

您可以使用[Java ByteBuffer](http://docs.oracle.com/javase/6/docs/api/java/nio/ByteBuffer.html)类！

例子

```
byte[] bytes = ByteBuffer.allocate(4).putInt(1000).array(); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-07T04:59:11.010

转换 int 很容易（小端序）：

```
byte[] a = new byte[4];
a[0] = (byte)i;
a[1] = (byte)(i >> 8);
a[2] = (byte)(i >> 16);
a[3] = (byte)(i >> 24); 
```

转换字符串，首先用 转换为整数`Integer.parseInt(s, 2)`，然后执行上述操作。如果`Long`您的位串可能高达 64 位，并且`BigInteger`它甚至会更大，请使用它。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-07T05:00:30.893

对于整数

```
public static final byte[] intToByteArray(int i) {
    return new byte[] {
            (byte)(i >>> 24),
            (byte)(i >>> 16),
            (byte)(i >>> 8),
            (byte)i};
} 
```

对于字符串

```
byte[] buf = intToByteArray(Integer.parseInt(str, 2)) 
```

# javascript - jQuery插件方法

> ID：10051868
> 
> 赞同：1
> 
> 时间：2012-04-07T04:49:43.320
> 
> 标签：javascript, jquery, jquery-plugins

我是 jQuery 插件创建的新手，并为我的项目 [Tumblr 样式标记] 创建了一个插件。

[我知道有很多可用的插件，但我想创建自己：D]

就这样

```
(function($) {

    $.fn.Tagger = function () 
    {
        this.each(function()

        {
                //codes goes here

        });

    };

})(jQuery); 
```

所以在这样做之后我可以做这样的事情来创建可标记的输入

```
$("#IdOfTheElement").Tagger(); 
```

现在我创建了 UI，需要获取 UI 的值。

例如用户类型`meta`为`google`, `yahoo`, `msn` ....

所以我需要将值作为`google,yahoo,msn`.

我想知道这样做的方法[不是代码]

像这样的东西可用吗？

```
$("#ID").Tagger("value"); //returns the values 
```

或者

```
$("#ID").Tagger().val(); // is this possible ? 
```

希望您理解这个问题，欢迎所有评论/建议。

请帮我完成。

谢谢你。

**更新**

请检查这个小提琴[http://jsfiddle.net/pNqUL/](http://jsfiddle.net/pNqUL/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-07T04:56:12.687

您指定的最后一个可以通过将代码更改为：

```
(function($) {

    $.fn.Tagger = function () 
    {
        return this.each(function()

        {
                //codes goes here

        });

    };

})(jQuery); 
```

通过返回原始选择器匹配，您可以继续菊花链命令。所以如果`$('#ID')`是一个表单字段，那么`$("#ID").Tagger().val();`将返回该值

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-07T06:35:07.590

我在一个对象文字中收集了所有插件的方法，并通过将方法的字符串名称传递给插件来调用它们[按照教程说...]。

所以要应用我可以做的标记器

```
$("#ID").tagger(); // making element as taggable

$("#ID").tagger("value") //returns the value of tagged elements 
```

# c# - 使用 linq 查询在下拉列表的 DataValueField 和 DataTextField 中存储值

> ID：10051872
> 
> 赞同：0
> 
> 时间：2012-04-07T04:50:23.353
> 
> 标签：c#, asp.net, linq

我有一个舞蹈学院网站，用户可以在其中注册和添加/删除舞蹈课程。

在网页中放置特定舞蹈，对于特定用户，下拉列表显示她注册的舞蹈。

现在我想从列表中删除其中一个舞蹈。因此，我将从表格和下拉列表中删除该行。问题是每次具有最低 ID（索引）的项目都被删除，无论用户选择哪一个。我想我错误地存储了下拉列表的 DataTextField 和 DataValueField。代码是：

```
private void PopulateDanceDropDown()
{       
        // Retrieve the username
        MembershipUser currentUser = Membership.GetUser();
        var username = currentUser.UserName;

        // Retrive the userid of the curren user
        var dancerIdFromDB = from d in context.DANCER
                             where d.UserName == username
                             select d.UserId;

        Guid dancerId = new Guid();
        var first = dancerIdFromDB.FirstOrDefault();
        if (first != null)
        {
            dancerId = first;
        }

        dances.DataSource = (from dd in context.DANCER_AND_DANCE
                                    where dd.UserId == dancerId
                                    select new
                                    {
                                        Text = dd.DanceName,
                                         Value = dd.DanceId
                                    }).ToList();

        dances.DataTextField = "Text";
        dances.DataValueField = "Value";
        dances.DataBind();
    }

    protected void dropthedance(object o, EventArgs e)
    {
        String strDataValueField = dances.SelectedItem.Value;
        int danceIDFromDropDown = Convert.ToInt32(strDataValueField);
        var dancer_dance = from dd in context.DANCER_AND_DANCE
                           where dd.DanceId == danceIDFromDropDown
                           select dd;

        foreach (var dndd in dancer_dance)
        {
            context.DANCER_AND_DANCE.DeleteOnSubmit(dndd);

        }

        try
        {
            context.SubmitChanges();
        }

        catch (Exception ex)
        {
            Console.WriteLine(ex);
        }       
    } 
```

问题在于：

```
String strDataValueField = dances.SelectedItem.Value; 
```

strDataValueField 总是从下拉列表中的舞蹈项目 id 列表中获取最小 id（默认情况下发生）。我希望它保存用户选择的舞蹈的 id。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-07T05:17:03.827

我会确保只有在没有回发的情况下才会生成下拉列表项 - 如果（！IsPostback）。

另外我会检查视图状态以确保它已启用。如果您禁用视图状态，然后在回发时重新绑定控件，它可能会丢失所选项目。

我还会尝试将下拉列表设置为自动回发并附加选定的索引更改事件，以查看更改是否至少以这种方式发送。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-07T05:28:19.323

每当您在 PopulateDanceDropDown() 方法中绑定下拉列表时，您必须清除所有下拉列表项。

```
dances.Items.Clear(); 
```

试试这可能对你有帮助..

# mysql - 在 MySQL 中查找 MIN 价格/行

> ID：10051879
> 
> 赞同：-1
> 
> 时间：2012-04-07T04:52:46.247
> 
> 标签：mysql

第一次来这里，以前可能已经介绍过。我的问题是假设你有这张桌子：

```
guid    provider    cc     variable   name             units    unit_cost
1       1           509    T          Haiti Variable   1        0.3
2       2           509    T          Haiti Variable   1        0.27
3       2           84     F          Vietnam 5        1        1.2
4       2           84     F          Vietnam 10       1        2.4
5       1           84     F          Vietnam 5        1        1.1 
```

我正在尝试编写一个查询，该查询将为给定“cc”的所有“名称”提供最低成本

我需要输出为：

```
provider          cc       name      unit_cost
1                 84       Vietnam 5      1.1
2                 84       Vietnam 10     2.4 
```

我尝试使用 min 和 group by 但要么我得到所有提供者 1，要么我得到所有记录，要么我得到 1 条记录（unit_cost 的最小值）

这个想法是从给定的“cc”中获取所有“名称”和单位成本，而不管提供者如何

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-07T07:31:14.860

Use order by desc and limit to solve your problem

# c# - 如何在任何 Windows 窗体中插入“按钮”？

> ID：10051883
> 
> 赞同：0
> 
> 时间：2012-04-07T04:54:01.710
> 
> 标签：c#, c++, winforms

> **可能重复：**
> [如何在窗口的标题栏中添加一个额外的按钮？](https://stackoverflow.com/questions/2841180/how-to-add-an-extra-button-to-the-windows-title-bar)

我的应用程序如何为其他应用程序设置窗口框架，例如，将按钮插入到任何其他 winform，如下所示：![在此处输入图像描述](../Images/4b2b50bc542c078e9ac3359af5f473b8.png)

如果有人能告诉我我应该寻找什么“关键词”或任何相关资源，我将不胜感激。

谢谢。

我正在使用 Windows 7、64 位。

* * *

不幸的是，这个问题已经结束。

这是相关主题，希望对无意中阅读此帖子的人有所帮助：

[在 C# 中使用窗口消息实现全局系统挂钩](http://www.codeproject.com/Articles/18638/Using-Window-Messages-to-Implement-Global-System-H?msg=2044577#xx2044577xx)

# php - 如何组合两个PHP数组并根据索引号显示结果？

> ID：10051884
> 
> 赞同：0
> 
> 时间：2012-04-07T04:54:12.020
> 
> 标签：php, arrays, loops, indexing

我创建了两个数组。首先，数组显示没有任何顺序的元素。所以，我必须首先按字母顺序和从低到高对它们进行排序。一旦按顺序排列，两个数组需要以这样的方式组合，即每个数组中的每个元素都**根据它们的索引号组合**。

**我的目标：** a0 b1 c2 d3 e4 f5 g6

**我得到了什么：** abcdefg0123456

```
$array1 = array("b", "f", "g", "a", "c", "d", "e");
    $array2 = array("5", "0", "1", "4", "3", "2", "6");
    sort($array1);
    sort($array2);

    echo "<pre> \n";
    print_r($array1);
    echo "</pre> \n";

    echo "<pre> \n";
    print_r($array2);
    echo "</pre> \n";

    echo "<h3 style='font-family:Helvetica'>Combining Arrays</h3>";
    $array3 = array_merge($array1, $array2);

    for($i = 0; $i < 7; $i++)
    {
        for($j = 0; $j < 7; $j++)
        {
            echo $array3[$i] [$j];
        }
    } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-07T05:04:00.630

array_merge 无法做到这一点。使用简单的循环。

```
 $array1 = array("b", "f", "g", "a", "c", "d", "e");
    $array2 = array("5", "0", "1", "4", "3", "2", "6");
    sort($array1);
    sort($array2);
    for($j = 0; $j < 7; $j++){
        echo "{$array1[$j]}{$array2[$j]} ";
    } 
```

    [http://ideone.com/LLdVm](http://ideone.com/LLdVm)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-07T04:59:22.823

`array_merge`对您希望它们排序的顺序一无所知。它甚至不知道内容是字母还是数字，更不用说与先前数组的内容相对应的字母表索引了！

简而言之，你不能`array_merge`用来做你想做的事。您只需要创建自己的循环即可解决问题。

您的代码甚至没有意义 - 您有两个一维数组，您将它们连接然后打印，就好像它们是二维数组一样？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-07T05:05:55.337

我认为他只想要一个包含元素的数组，正如他所说：

```
a0 b1 c2 d3 e4 f5 g6 
```

这应该有效：

```
$array3 = array();
for($i = 0; $i < 7; $i++){
  $array3[] = $array1[$i].$array2[$i];
}
echo "<pre> \n";
print_r($array3);
echo "</pre> \n"; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-07T05:29:21.313

**这是结合**的最佳方式- 使用`array_combine`：

```
 $array1 = array("b", "f", "g", "a", "c", "d", "e");
        $array2 = array("5", "0", "1", "4", "3", "2", "6");
        sort($array1);
        sort($array2);

        echo "<pre> \n";
        print_r($array1);
        echo "</pre> \n";

        echo "<pre> \n";
        print_r($array2);
        echo "</pre> \n";

        echo "<h3 style='font-family:Helvetica'>Combining Arrays</h3>";

//        $array3 = array_merge($array1, $array2);

        $array3 = array_combine($array1, $array2);

        echo "<pre> \n";
        print_r($array3);
        echo "</pre> \n";

        foreach($array3 as $letter => $number){
            echo "$letter:$number <br />";
        } 
```

# javascript - 简单的 javascript AJAX 发布功能不起作用

> ID：10051888
> 
> 赞同：1
> 
> 时间：2012-04-07T04:55:23.220
> 
> 标签：javascript, ajax, function, post

嗨，我想将数据发送到服务器，然后让 php 文件保存它。但目前我什至无法让一个简单的 POST 工作。

这是 javascript 和 html 部分：此函数在头部声明：

```
function sendTableToServer(){
    var xhttp;
    if (window.XMLHttpRequest){
        xhttp=new XMLHttpRequest();
    } else {
        xhttp=new ActiveXObject("Microsoft.XMLHTTP");
    }

    xhttp.open("POST","http://music.collwyncraig.info/hajimama/save_setlist.php",true);
    xhttp.setRequestHeader("Content-type","application/x-www-form-urlencoded");
    xhttp.send("fsong=AbandonSeoul");
} 
```

然后这个 html 在正文中：

```
<button type="button" onclick="sendTableToServer()">Save Setlist</button> 
```

这是php文件

```
<?php
if (isset($_POST["fsong"])){
    echo 'trying';
    $song = $_POST["fsong"]; 
    echo $song;
    echo 'ok';
}
?> 
```

当我单击按钮时，什么也没有发生。如果我使用一个`<form>`和一个提交按钮，浏览器会加载 php 文件，我可以访问输入。但是，我想使用这样的函数，因为我要发送的信息将使用 javascript 和 HTML DOM 从 html 页面中取出。那么，为什么什么都没有发生呢？:)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-07T05:04:54.587

**如果您不想使用 jQuery ajax，请尝试使用纯 ajax：**

```
<html>
    <head>
    <script type="text/javascript">
    sendTableToServer()
    {

    if (window.XMLHttpRequest)
      {// code for IE7+, Firefox, Chrome, Opera, Safari
      xmlhttp=new XMLHttpRequest();
      }
        else
      {// code for IE6, IE5
      xmlhttp=new ActiveXObject("Microsoft.XMLHTTP");
      }
    xmlhttp.onreadystatechange=function()
      {
      if (xmlhttp.readyState==4 && xmlhttp.status==200)
        {
        //document.getElementById("txtHint").innerHTML=xmlhttp.responseText;
        }
      }
    xmlhttp.open("GET","http://music.collwyncraig.info/hajimama/save_setlist.php?fsong=AbandonSeoul", true);
    xmlhttp.send();
    }
    </script>

<?php
if (isset($_GET["fsong"])){
    echo 'trying';
    $song = $_GET["fsong"]; 
    echo $song;
    echo 'ok';
}
?> 
```

来源：[http ://www.w3schools.com/php/php_ajax_php.asp](http://www.w3schools.com/php/php_ajax_php.asp)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-07T05:05:42.020

如果您想要与表单相同的行为，除了您想从页面获取数据，只需创建一个表单并提交它：

```
var form = document.createElement('form');
form.action = 'http://www.example.com/do-something';
form.method = 'post';
var song = document.createElement('input');
song.type = 'hidden';
song.name = 'song';
song.value = 'Song Name';
form.appendChild(song);
form.submit(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-07T05:05:23.263

请记住，AJAX 本质上是异步的。您应该为完成和错误条件定义回调，因为您的数据不会立即返回。您可能需要[关注这个关于 AJAX 的 Google 教程](http://code.google.com/edu/ajax/tutorials/ajax-tutorial.html)。JQuery 确实简化了这个过程，如果有的话。

如果您的唯一目标是将数据发送到服务器以写入文件，则不需要 AJAX 或 Javascript。只需设置`<form action="http://music.collwyncraig.info/hajimama/save_setlist.php">`并将要发送到服务器的数据放入表单标签中。为 AJAX 使用 Javascript 的唯一原因是“更好的行为”，这可能比您正在寻找的简单用法更复杂。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-07T05:06:59.037

如果您向与地址栏中的内容不同的域进行 POST，它将失败。您不能发出跨域 AJAX 请求：

```
xhttp.open("POST","http://music.collwyncraig.info/hajimama/save_setlist.php",true); 
```

尝试删除方案和域：

```
xhttp.open("POST","/hajimama/save_setlist.php",true); 
```

这将使 POST 请求相对于当前域，因为这里不需要 http 和域。

# javascript - 合适的网络编程环境

> ID：10051890
> 
> 赞同：-1
> 
> 时间：2012-04-07T04:55:30.930
> 
> 标签：javascript

例如，禁用缓存（这恰好是我知道的唯一一个），当我试图找出我的 JavaScript 代码出了什么问题时，我完全沮丧，然后我开始删除每个浏览器信息 cookie、缓存、历史记录等。 ..然后在我重新启动浏览器并打开文件后它就可以工作了！因此，我认为必须更改其他设置，我尝试了谷歌但我只是不知道要搜索什么关键字，所以还有其他类似的东西还是我只是愚蠢而没有其他? 感谢：D

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-07T04:58:28.427

您的问题很模糊，但 Firebug： http: [//getfirebug.com/](http://getfirebug.com/)是 Web 开发人员最好的朋友，它禁用缓存以及出色的详细错误支持和实时 javascript 控制台、css 编辑器等...

# xml - xml架构验证问题

> ID：10051893
> 
> 赞同：1
> 
> 时间：2012-04-07T04:55:34.427
> 
> 标签：xml

我正在尝试使用 xml 模式验证器，但我收到一条错误消息，提示“文件过早结束”，我似乎无法找到此错误的位置。这是我的 xsd 文件

```
<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<xs:schema xmlns:xs="http://www.w3.org/2001/XMLSchema">
<xs:element name="orders">
 <xs:element name ="order" maxOccurs="unbounded">
  <xs:complexType>
   <xs:sequence>  
    <xs:element name="case" type="xs:caseColor" >
      <xs:simpleType name="caseColor">
        <xs:restriction base="string">
            <xs:enumeration value="Lemonde" />
            <xs:enumeration value="Strawberry" />
            <xs:enumeration value="Lime" />
            <xs:enumeration value="Blueberry" />
        </xs:restriction> 
      </xs:simpleType>
    </xs:element>
    <xs:element name="batteries" type="xs:numOfBat" default = 
"1"> 
      <xs:simpleType name="numOfBat">
        <xs:restriction base="integer">
            <xs:enumeration value="1" />
            <xs:enumeration value="2" />
            <xs:enumeration value="3" />
            <xs:enumeration value="4" />
        </xs:restriction> 
      </xs:simpleType>
    </xs:element>
    <xs:element name="recharger" type="xs:volt"> 
    <xs:simpleType name="volt">
        <xs:restriction base="string">
            <xs:enumeration value="110-120" />
            <xs:enumeration value="220-240" />
        </xs:restriction> 
    </xs:simpleType>
    </xs:element>
    <xs:element name="arm"> 
       <xs:element name ="reaches" minOccurs="2" maxOccurs="3" 
type="xs:reach">
         <xs:simpleType name="reach">
            <xs:restriction base = "integer">
              <xs:enumeration value = "50" />
              <xs:enumeration value = "75" /> 
              <xs:enumeration value = "100" />
             </xs:restriction>
     </xs:simpleType>
    </xs:element>
   </xs:element>
    <xs:element name ="camera" type="numOfCam"> 
      <xs:simpleType name="numOfCam">
        <xs:restriction base="string">
            <xs:enumeration value="1" />
            <xs:enumeration value="2" />
        </xs:restriction> 
      </xs:simpleType>
    </xs:element>
    <xs:element name = "speech" type="xs:language">
      <xs:simpleType name = "language">
        <xs:restriction base = "string">
            <xs:enumeration value = "Spanish" />
            <xs:enumeration value = "Chinese" />
            <xs:enumeration value = "English" />
            <xs:enumeration value = "German" />
            <xs:enumeration value = "French" />
         </xs:restriction>
       </xs:simpleType>
    </xs:element>
   </xs:sequence>
  </xs:complexType>
 </xs:element>
</xs:element>
</xs:schema> 
```

并且错误的位置说它在-1，-1行。

这是我的 dtd 文件以防万一

```
<?xml version="1.0"?>
<!DOCTYPE orders [
<!ELEMENT orders (order+)>
<!ELEMENT order (case, batteries, recharger, arm, camera, 
speech)>
<!ELEMENT case (#PCDATA)>
<!ELEMENT batteries (#PCDATA)>
<!ELEMENT recharger (#PCDATA)>
<!ELEMENT arm (reach)>
<!ELEMENT reach (#PCDATA)>
<!ELEMENT camera (#PCDATA)>
<!ELEMENT speech (#PCDATA)>
]> 
```

并且错误没有说明错误来自哪个文件。这是我正在使用的验证器。[http://corefiling.com/opensource/schemaValidate.html](http://corefiling.com/opensource/schemaValidate.html)

我想因为我不能使用我的 dtd，所以这是我的 xml 文件。

```
<?xml version="1.0" encoding="UTF-8"?>
<orders>
  <order>
    <case> Strawberry </case>
    <batteries> 2 </batteries>
    <recharger> 110-120 V </recharger>
    <arm> 2 
       <length> 50 </length>
       <length> 100 </length>
    </arm>
    <camera> 2 </camera>
    <speech> Spanish </speech>
  </order>
  <order>
    <case> Lime </case>
    <batteries> 4 </batteries>
    <recharger> 220-240 V </recharger>
    <arm> 3 
       <length> 75 </length>
       <length> 75 </length>
       <length> 100 </length>
    </arm>
    <camera> 1 </camera>
    <speech> Chinese </speech>
  </order>
  <order>
    <case> Blueberry </case>
    <batteries> 1 </batteries>
    <recharger> 110-120 V </recharger>
    <arm> 2 
       <length> 75 </length>
       <length> 100 </length>
    </arm>
    <camera> 2 </camera>
    <speech> French </speech>
  </order>
</orders> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-10T12:36:25.137

XSD 架构无效，您不能有这样的嵌套元素

```
<xs:element name="orders">
 <xs:element name ="order" maxOccurs="unbounded"> 
```

事实上，模式中有很多错误。XML Schemas 很难使用，手动编写它们只是不切实际，我建议使用像 Liquid XML Studio 这样的[图形化 XML 模式编辑器。](http://www.liquid-technologies.com/Xml-Schema-Editor.aspx)

注意：我认为您的架构应该如下所示：-

![使用 Liquid XML Studio 修复的 XML 架构](../Images/176e964ef5e53a5fa5ef656bf683f473.png)

```
<?xml version="1.0" encoding="utf-8" ?>
<!--Created with Liquid XML Studio 2012 Developer Edition 10.0.1.3941 (http://www.liquid-technologies.com)-->
<xs:schema xmlns:xs="http://www.w3.org/2001/XMLSchema">
    <xs:simpleType name="language">
        <xs:restriction base="xs:string">
            <xs:enumeration value="Spanish" />
            <xs:enumeration value="Chinese" />
            <xs:enumeration value="English" />
            <xs:enumeration value="German" />
            <xs:enumeration value="French" />
        </xs:restriction>
    </xs:simpleType>
    <xs:simpleType name="numOfBat">
        <xs:restriction base="xs:int">
            <xs:enumeration value="1" />
            <xs:enumeration value="2" />
            <xs:enumeration value="3" />
            <xs:enumeration value="4" />
        </xs:restriction>
    </xs:simpleType>
    <xs:simpleType name="numOfCam">
        <xs:restriction base="xs:int">
            <xs:enumeration value="1" />
            <xs:enumeration value="2" />
        </xs:restriction>
    </xs:simpleType>
    <xs:simpleType name="caseColor">
        <xs:restriction base="xs:string">
            <xs:enumeration value="Lemonde" />
            <xs:enumeration value="Strawberry" />
            <xs:enumeration value="Lime" />
            <xs:enumeration value="Blueberry" />
        </xs:restriction>
    </xs:simpleType>
    <xs:simpleType name="reach">
        <xs:restriction base="xs:int">
            <xs:enumeration value="50" />
            <xs:enumeration value="75" />
            <xs:enumeration value="100" />
        </xs:restriction>
    </xs:simpleType>
    <xs:simpleType name="volt">
        <xs:restriction base="xs:string">
            <xs:enumeration value="110-120" />
            <xs:enumeration value="220-240" />
        </xs:restriction>
    </xs:simpleType>
    <xs:element name="Orders">
        <xs:complexType>
            <xs:sequence>
                <xs:element name="order" maxOccurs="unbounded">
                    <xs:complexType>
                        <xs:sequence>
                            <xs:element name="case" type="caseColor" />
                            <xs:element name="batteries" type="numOfBat" default="1" />
                            <xs:element name="recharger" type="volt" />
                            <xs:element name="arm" />
                            <xs:element name="reaches" type="reach" minOccurs="2" maxOccurs="3" />
                            <xs:element name="camera" type="numOfCam" />
                            <xs:element name="speech" type="xs:language" />
                        </xs:sequence>
                    </xs:complexType>
                </xs:element>
            </xs:sequence>
        </xs:complexType>
    </xs:element>
</xs:schema> 
```

# android - 使用文本文件文件夹从 Eclipse 创建 apk 文件

> ID：10051895
> 
> 赞同：0
> 
> 时间：2012-04-07T04:55:57.983
> 
> 标签：android, file, apk

我创建了一个 .apk 文件，以便将其安装在我的 android 设备上。这个 .apk 文件是否可以包含一个包含文本文件的文件夹并将它们保存在存储卡中？它将在设备上安装应用程序，然后将文件夹复制到存储卡

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-07T05:04:39.157

你为什么不使用`asset/`？

apk 中的`assets/`文件夹旨在以任何格式存储任何额外的用户文件。它们将在编译阶段自动包含到 apk 中，并且可以使用`getAssets()`函数从应用程序访问。例如：

```
 final InputStream is = getResources().getAssets().open("some_file.xml") 
```

# visual-c++ - 必须有类/结构/联合

> ID：10051908
> 
> 赞同：0
> 
> 时间：2012-04-07T04:58:32.423
> 
> 标签：visual-c++

您好，我正在为学校做作业，但遇到了一些问题，我是 C++ 的初学者，对它并不熟悉。我真的很感谢到目前为止给我的帮助，但我仍然在第 31-35 行遇到错误。

```
error C2228: left of '.substr' must have class/struct/union

error C2228: left of '.c_str' must have class/struct/union 
```

这是我的任务 一个停车场收取 2.00 美元的最低停车费，最多可停放三个小时。超过三个小时，车库每小时或部分每小时额外收费 0.50 美元。任何给定 24 小时期间的最高费用为 10.00 美元。停车超过 24 小时的人每天将支付 8.00 美元。编写一个计算并打印停车费的程序。程序的输入是汽车进入停车场的日期和时间，以及同一辆车离开停车场的日期和时间。两个输入的格式为 `YY/MM/DD hh:mm`

```
#include <iostream>
#include <fstream>
#include <iomanip>
#include <string>
#include <cmath>
#include <algorithm>
#include <sstream>
using namespace std;

int dateStr;
int parseDate( std::string dateStr );

int main ()

{
int enter_date;
int enter_time;
int exit_date;
int exit_time;
cout << "Please enter the date and time the car is entering "<< endl
    << "the parking garage in the following format: YY/MM/DD hh:mm"<< endl;
 cin >> enter_date >> enter_time;

cout<< "Please enter the date and time the car is exiting "<< endl
    << "the parking garage in the following format: YY/MM/DD hh:mm"<< endl;
cin >> exit_date >> exit_time;

{
    // Format: YY/MM/DD hh:mm
    int year  = atoi( dateStr.substr( 0, 2 ).c_str() );
    int month = atoi( dateStr.substr( 3, 2 ).c_str() );
    int day   = atoi( dateStr.substr( 6, 2 ).c_str() );
    int hour  = atoi( dateStr.substr( 9, 2 ).c_str() );
    int min   = atoi( dateStr.substr( 12, 2 ).c_str() );

    // Now calculate no. of mins and return this
    int totalMins = 0;
    totalMins += ( year * 365 * 24 * 60 ); // Warning: may not be accurate enough
    totalMins += ( month * 30 * 24 * 60 ); // in terms of leap years and the fact
    totalMins += ( day * 24 * 60 );        // that some months have 31 days
    totalMins += ( hour * 60 );
    totalMins += ( min );

    return totalMins;
}

return 0;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-07T05:03:05.950

您声明`dateStr`为`int`. 它应该是一个字符串吗？您也应该初始化它。

# android - 如何在安卓设备中安装自定义字体

> ID：10051915
> 
> 赞同：15
> 
> 时间：2012-04-07T04:59:19.973
> 
> 标签：android

我想在我的应用程序启动时在 android 设备中安装自定义字体，即 .ttf 文件。实际上，当我运行我的应用程序时，我需要在我的 android 设备中安装缅甸字体。可能吗？如果是，那么如何？我不需要字体。我想安装在系统中。

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-04-07T05:04:04.290

请参阅 [此处](https://stackoverflow.com/questions/3421741/android-device-install-new-font)@CommonsWare 答案，您不能将字体添加到现有设备，除非作为自定义固件构建的一部分，或者可能通过生根设备。

但您可以在应用程序中添加字体。喜欢：

```
 TextView txtvw=(TextView)findViewById(R.id.textviewname);

 Typeface typface=Typeface.createFromAsset(getAssets(),"fonts/burmese.ttf");

  txtvw.setTypeface(typface); 
```

**注意：**将您的字体放在`assets/fonts`项目的目录中

**或者**，如果您的设备已植根，请参阅此 tuts 以[在您的 Android 设备上安装自定义字体](http://www.se7ensins.com/forums/threads/install-custom-fonts-on-android.580313/)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-04-07T05:17:09.557

你需要在设备的根目录下

为此，您可以使用此应用程序 EasyRoot.apk

下载并安装 ES File Explorer (https://market.android.com/details?id=com.estrongs.android.pop)

之后，您需要启用根资源管理器。可以从此链接获得更多信息

[http://chetangole.com/blog/2011/08/enabling-installing-hindi-marathi-unicode-fonts-on-android-mobile/](http://chetangole.com/blog/2011/08/enabling-installing-hindi-marathi-unicode-fonts-on-android-mobile/)

将字体保存在设备的 /system/font 文件夹中

可以从此链接获得更多信息

[http://chetangole.com/blog/2011/08/enabling-installing-hindi-marathi-unicode-fonts-on-android-mobile/](http://chetangole.com/blog/2011/08/enabling-installing-hindi-marathi-unicode-fonts-on-android-mobile/)

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-04-07T05:01:56.517

如果您有自定义字体，请使用以下代码:::

```
TextView tv=(TextView)findViewById(R.id.custom);
Typeface face=Typeface.createFromAsset(getAssets(),"fonts/Verdana.ttf");
tv.setTypeface(face); 
```

还将您的字体放在 assets/fonts 文件夹中

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2018-04-16T04:42:39.970

我为我的项目创建了一个 FontWrapper 类。

```
public static Typeface getTypeface(Context c, Fonts name) {

        synchronized (typefaces) {

            if (!typefaces.containsKey(name)) {

                try {
                    String fontPath = getFontsPath(name);

                    if (!StringUtil.isNullOrEmpty(fontPath)) {
                        InputStream inputStream = c.getAssets().open(fontPath);
                        File file = createFileFromInputStream(inputStream);
                        if (file == null) {
                            return Typeface.DEFAULT;
                        }
                        Typeface t = Typeface.createFromFile(file);
                        typefaces.put(name, t);
                    } else {
                        return Typeface.DEFAULT;
                    }

                } catch (Throwable e) {
                    e.printStackTrace();
                    return Typeface.DEFAULT;
                }
            }
            return typefaces.get(name);
        }
    }

private static File createFileFromInputStream(InputStream inputStream) {

        try {
            File f = File.createTempFile("font", null);
            OutputStream outputStream = new FileOutputStream(f);
            byte buffer[] = new byte[1024];
            int length = 0;

            while ((length = inputStream.read(buffer)) > 0) {
                outputStream.write(buffer, 0, length);
            }

            outputStream.close();
            inputStream.close();
            return f;
        } catch (Exception e) {
            e.printStackTrace();
        }

        return null;
    } 
```

# windows-phone-7 - 从 Windows Phone 中的图像中选择 RGB 颜色像素

> ID：10051927
> 
> 赞同：0
> 
> 时间：2012-04-07T05:01:09.010
> 
> 标签：windows-phone-7

我想开发一个应用程序，它可以从图像的像素中选择十六进制代码颜色。我找到了 WriteAbleBitmap，但我不明白如何使用它来获取像素并转换为 RGB 颜色然后转换为十六进制代码。因为在 Codeplex 中我发现了 WriteAbleBitmapEx.GetPixel(10,20)，我尝试这样做，但什么也没发生。你能给我一个关于从图像像素获取 RGB 颜色的例子吗？或其他任何解释。请 ：）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-07T06:14:54.750

我建议使用[WriteableBitmapEx](http://writeablebitmapex.codeplex.com/)，这个开源库添加了一个`GetPixel`方法到`WriteableBitmap`，这将完全符合您的要求。

# bash - 在 Bash 的目录中打印文件名

> ID：10051931
> 
> 赞同：1
> 
> 时间：2012-04-07T05:01:32.483
> 
> 标签：bash, shell

假设我在一个目录中，并且还有一个名为图片的目录，里面有 .jpg 图像，我想对“./operation image1.jpg”运行一个操作，我该如何为目录图片中的每个 jpg 执行此操作？当我搜索遍历目录中的文件时，我无法获得我想要的输出。

```
#!/bin/sh

cd pictures
pictures=$ls

for pic in $pictures
do
   ./operation $pic
done 
```

这就是我的代码。我究竟做错了什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-07T05:09:24.900

不要`ls`用于获取文件列表，因为这不适用于文件名中的空格。它变成了这样的东西：

```
my file.jpg
another file.jpg 
```

进入：

```
my
file.jpg
another
file.jpg 
```

让我们`bash`处理 fil 列表，您就不会遇到这个问题。只需记住引用每个文件，以便完整保留其中包含空格的文件：

```
#!/bin/sh
cd pictures
for pic in *.jpg ; do 
    ./operation "$pic"
done 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-07T06:25:52.497

除了文件名中的空格会导致问题之外，您的脚本也可以工作，但您的图片=$ls 分配不正确。它应该是 pictures=$(ls)... 如果您需要在变量中考虑空格，请在其周围加上双引号：“$var”...此外，不要使用 ls 作为文件名的来源；它有许多其他方法可以避免的问题；例如，使用 find 或 shell 扩展，如 paxdiablo 的回答所示。

`find`可以很好地控制您实际列出的内容，甚至处理方式。

这里有更多的方法可以做到这一点。

```
# using find
find -maxdepth 1 -type f -name '*.jpg' -exec ./operation "{}" \;

# using an array
pic=(*.jpg)
for p in "${pic[@]}" ;do
  ./operation "$p"
done

# You can (with care) even use ls ... but why would you?  
# I've just added it here to show the use of IFS (Input Field Seperator)
IFS=$'\n'  # this makes `\n` the only delimiter.
pic=$(ls -1 *.jpg )
for p in $pic ;do
  ./operation "$p"
done 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-07T06:02:13.033

还

```
find pictures/ -type f -name '*.jpg' -exec \./operation {} \; 
```

# django - 如何模拟已删除的自定义字段以便南迁移运行？

> ID：10051932
> 
> 赞同：3
> 
> 时间：2012-04-07T05:01:40.463
> 
> 标签：django, data-migration, django-south

我从我的项目中删除了一个包含几个自定义字段的应用程序。现在，当我尝试运行我的迁移时，我`ImportError`自然而然地得到了。这些字段是非常基本的自定义，如下所示：

```
from django.db.models.fields import IntegerField

class SomeField(IntegerField):
    def get_internal_type(self):
        return "SomeField"

    def db_type(self, connectio=None):
        return 'integer'

    def clean(self, value):
        # some custom cleanup
        pass 
```

因此，它们都不包含任何数据库级别的自定义。

当我删除此代码时，我已经创建了迁移，因此后续迁移都运行良好。但是当我尝试在预删除数据库上运行它们时，我意识到我的错误。

我可以重新创建一个简单的应用程序并使这些导入工作，但理想情况下我想知道 South 是否有解决这些问题的机制？或者有什么最佳做法吗？如果我可以通过修改我的迁移而不接触代码库来解决这些问题，那将是很酷的。

（Django 1.3，南 0.7.3）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-07T05:38:37.367

South 在之后的迁移中不持有已删除字段的引用。如果您删除了自定义字段并成功生成了迁移，`ImportError`可能是因为在删除迁移之前，这些自定义字段仍然被一些未完成的迁移引用。所以

1.  在执行打包删除和删除迁移之前将代码库更新到版本
2.  迁移
3.  更新代码库到删除迁移和迁移

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-07T17:25:09.253

`add_introspection_rules`如果已经为这些简单的自定义字段定义了[ [1](http://south.aeracode.org/docs/tutorial/part4.html.) ]，那么使用 South 0.7+ 非常容易。（在自定义字段类之后的同一模块中），创建迁移时。然后 South 不会“冻结”这些字段，并且可以轻松删除它们。然后，如果 okm 的先前回答对您没有帮助，请重新创建旧的迁移更正。

# java - HTTP 响应代码：从客户端向服务器发送 url 地址时出现 403

> ID：10051934
> 
> 赞同：0
> 
> 时间：2012-04-07T05:02:06.853
> 
> 标签：java, url, client-server, httpresponse

我试图编写一个客户端服务器程序，在我的程序中，每回合，客户端向`String`服务器发送两个，第一个是网址，第二个是关于用户的一些随机信息。但是当 url 地址到达服务器时，我得到这个例外：

```
Exception in thread "main" java.io.IOException: Server returned HTTP response code: 403 for URL: http://www.google.com.hk/search?hl=en&source=hp&q=java&gbv=2
    at sun.net.www.protocol.http.HttpURLConnection.getInputStream(HttpURLConnection.java:1245)
    at java.net.URL.openStream(URL.java:1009)
    at server.Server.processClient(Dom.java:124)
    at server.Server.run(Dom.java:90)
    at server.Server.main(Dom.java:155)
Java Result: 1 
```

但我不知道为什么会收到禁止回复。

# 客户端

```
 private static BufferedWriter toServer;
....

  public void progressUpdated(NavigatorProgressEvent npe) {

            Matcher matcher = pattern.matcher (npe.getUrl().toString());

            if (matcher.matches ())
                        {
                System.out.println(npe.getUrl());
                        toServer.println(npe.getUrl().toString());

                                } 
```

# 服务器端

```
...
   url = new URL(fromClient.readLine()); 
```

……

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-07T05:07:27.160

也许您在标头请求中错过了“User-Agent”。

尝试添加此代码：

```
httpUrlConnection.setRequestProperty("User-Agent","MyUserAgentName"); 
```

如果您不指定用户代理名称，Google 不会响应。并尝试选择一个好的用户代理名称：D

# python - 如何在不复制 NumPy 的情况下展平多维数组的轴？

> ID：10051935
> 
> 赞同：13
> 
> 时间：2012-04-07T05:02:10.833
> 
> 标签：python, multidimensional-array, numpy, indexing

我想知道是否有一种方法可以`ndarray`沿给定轴展平多维数组（即 type ），而无需在 NumPy 中复制。例如，我有一个二维图像数组，我希望将每个图像展平为一个向量。因此，一种简单的方法是`numpy.array([im.flatten() for im in images])`，但这会创建每个副本。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-04-07T05:17:16.090

`ravel`它：

```
>>> a = numpy.arange(25).reshape((5, 5))
>>> b = a.ravel()
>>> b[0] = 55
>>> a
array([[55,  1,  2,  3,  4],
       [ 5,  6,  7,  8,  9],
       [10, 11, 12, 13, 14],
       [15, 16, 17, 18, 19],
       [20, 21, 22, 23, 24]]) 
```

或者`reshape`它：

```
>>> a = numpy.arange(27).reshape((3, 3, 3))
>>> b = a.reshape((9, 3))
>>> b[0] = 55
>>> a
array([[[55, 55, 55],
        [ 3,  4,  5],
        [ 6,  7,  8]],

       [[ 9, 10, 11],
        [12, 13, 14],
        [15, 16, 17]],

       [[18, 19, 20],
        [21, 22, 23],
        [24, 25, 26]]]) 
```

在大多数情况下，它们都返回原始数组的视图，而不是副本。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-07-26T12:58:33.767

如果您不知道输入数组的形状：

```
images.reshape((images.shape[0], -1)) 
```

`-1`告诉 reshape 计算出剩余的尺寸。这假设您想要展平图像的第一个轴。

# javascript - 如何禁用菜单项重定向或加载

> ID：10051944
> 
> 赞同：0
> 
> 时间：2012-04-07T05:04:16.437
> 
> 标签：javascript, jquery, ajax, menu, load

我有一个菜单，如果您单击它，它会加载外部内容，然后将其淡入页面。我怎么能告诉我的链接，如果 url 已经相同，则根本不加载任何 ajax，因为这将是多余的。和/或如果加载的内容已经与不调用 ajax 函数并且让链接仍然不执行任何操作相同。这样，只有在有真正要添加的新内容时才调用 ajax。

当前页面是“客户端”，用户尝试单击“客户端”的菜单导航按钮，它会重新加载内容。我希望它什么也不做，因为这会使相同的内容再次淡入。

```
$(nav[0]).click(function(){
  $("#load").load("http://imagativa.com/ #load");
  $("#load").fadeIn(300);
}); 
```

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-07T05:13:55.090

有几种方法可以做到这一点。最常见的是在最后返回 false。

```
 $(nav[0]).click(function(){
   $("#load").load("http://imagativa.com/ #load");
   $("#load").fadeIn(300);
   return false;
 }); 
```

或者其他方法如下

```
 $(nav[0]).click(function(e){
     e.preventDefault();
     ....code....
 }); 
```

# iphone - 链接到其他对象的核心数据对象

> ID：10051945
> 
> 赞同：0
> 
> 时间：2012-04-07T05:04:17.077
> 
> 标签：iphone, objective-c, xcode, cocoa, core-data

我制作了一个与“gridButton”相结合的“gridView”对象。它确实如此，并允许您将按钮拖到不同的视图中并根据需要排列它们。

问题是我有一个从核心数据返回的“项目”对象。我需要基本上使用所有这些“项目”的标题并将它们放在按钮中。

我已经做到了，当然可以，但我需要能够通过更新和删除数据来操作数据。仅将“项目”的标题复制到“网格按钮”意味着它们没有耦合，并且难以管理这些类型的琐事（更新、删除）

如果你们能指出我正确的方向，那真的很有帮助。我认为也许我可以使“gridButton”符合“item”作为一个类别，但我不确定它是如何工作的。

我基本上需要制作它，这样我就可以使用某个命令删除一个按钮，它会在核心数据中删除它。我怎样才能将它们链接起来？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-07T06:58:50.760

这完全取决于您在“网格”中的确切程度。你有他们的数据源吗？如果它像一个 tableView 格式，你应该检查`NSFetchedResultsController`. 那里的 tableView 单元格链接到核心数据对象。

无论如何，作为对您的问题的一般建议，这可以轻松完成。就像您在问题中提出的建议一样。

例如，如果您需要删除一个按钮，从中获取该按钮，`title`并为该标题执行 a `predicateFetch`，您将能够找到您的实体对象`managedObjectContext`。只需将其删除。

如果您需要`title`为您的按钮分配，只需获取 CoreData，并获取所需的对象，然后设置标题。如文档中所述，这些应该相当简单！

希望一切都清楚:)

# jquery - 如何从每个函数中的每个函数中解析的嵌套 JSON 传递数据？

> ID：10051957
> 
> 赞同：0
> 
> 时间：2012-04-07T05:06:14.673
> 
> 标签：jquery, json, each

所以我试图解析一些嵌套的 json，而我试图访问它的方式让我对如何将它添加回它自己的单个“项目”感到困惑。每个项目都包含一个图像、一个标题和可能的标签。图像源和标题嵌套在同一级别，因此可以在相同的每个函数中访问它们，但是标签对象（也与图像源和标题在同一级别）包含一个数组，需要使用第二个 each 函数访问以获取每个标签。我可以使用以下代码解析每个标签，但我不确定如何将标签对象数据传递回初始的每个函数。任何帮助将不胜感激！

```
JSON Structure:

{
"data": [
  {
     "source": "http://example.com/picture1.jpg",
     "caption": "First caption",
     "tags": {
        "data": [
           {

              "name": "Cats One"
           },
           {
              "name": "Dogs One"
           }
        ]
     }
   }
   {
     "source": "http://example.com/picture2.jpg",
     "caption": "Second caption",
     "tags": {
        "data": [
           {

              "name": "Cats Two"
           },
           {
              "name": "Dogs Two"
           }
        ]
     }
   }
 ]
} 
```

jQuery 用于访问 JSON 数据

```
$(document).ready(function(){

  var url = "http://example.com";

  $.getJSON(url, function(json) {
      $('#wrapper').prepend('<div id="container"></div>');
      $.each(json.data, function(i, data) {
          //Adds each entry to container
          $("#container").append('<ul class="image">' + '<li class="source"><img  src="' + data.source + '" /></li>' + '<li class="caption">' + data.caption + '</li>' + '</ul>');
          //Checks if tags exist for each element
          if (typeof(this.tags) === 'object') {
              $.each(this.tags.data, function() { 
                  //console.log(this.name);
                              //not sure what to add here to append these tags in a li tag above
              });
          }

  });
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-07T05:32:27.630

连接所有名称，然后将它们附加到容器中。

```
...
var names = "";
$.each(this.tags.data, function(idx) { 
  if(idx > 0) names += ",";
  names += this.name;
});
$("#container").append($("<li></li>").append(names));
... 
```

# html - 使用导航创建简单网站模型的最佳选择

> ID：10051959
> 
> 赞同：0
> 
> 时间：2012-04-07T05:06:36.753
> 
> 标签：html

我正在尝试将具有完整导航的静态 html 网站放在一起。换句话说，我希望用户点击一些链接和图像，然后实际被带到另一个页面。我是一名开发人员，所以我知道如何在 ASP.Net MVC 和 grails 等框架中执行此操作。但是，对于这种特殊情况，我只想快速模拟 UI 并提供简单的导航，以便进行一些用户测试。任何人都可以建议如何做到这一点？

谢谢，

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-07T05:26:46.870

据我了解，您只需要链接标签：

```
<a href="some.html">click me</a> 
```

并且可能是一些javascript。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-08T14:14:43.257

你听说过[Weebly](http://www.weebly.com/)吗？在我看来，这正是您正在寻找的。

它允许您使用简单的拖放功能直接在线创建已托管的网站。

# c++ - fprintf 调试断言失败

> ID：10051961
> 
> 赞同：4
> 
> 时间：2012-04-07T05:06:58.833
> 
> 标签：c++, fopen, assertions, printf

如果我手动启动它，我有一个可以正常运行的程序。但是，如果我尝试添加一个注册表项以在启动期间自动启动它，我会收到此错误：

```
Debug assertion failed (str!=null) fprintf.c line:55 
```

我试图在任何事情发生之前添加 Sleep(20000)，但我得到了同样的错误。

这是代码：

```
main()
{
    FILE* filetowrite;
    filetowrite = fopen("textfile.txt", "a+");

    writefunction(filetowrite);
}

int writefunction(FILE* filetowrite) {

    fprintf(filetowrite, "%s", "\n\n");
    ...
} 
```

我也尝试传递文件名 as`char*`并将其打开`writefunction()`，但我得到了同样的错误。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-04-07T05:22:34.833

`fopen`正在失败。您应该*始终*检查返回值以查看它是否有效：

```
filetowrite = fopen("textfile.txt", "a+");
if (filetowrite == NULL) {
    // log something, including errno
    exit (1);
} 
```

`fprintf.c`VC++ 中的第 55 行是：

```
_VALIDATE_RETURN( (str != NULL), EINVAL, -1); 
```

参数在哪里（漂亮`str`的`FILE *`变量名，微软，你到底在想什么？）。

我怀疑尝试通过注册表运行它时可能存在权限问题或类似问题（可能是在`Run`或`RunOnce`作为服务）。

一旦你弄清楚实际错误是什么，解决方案应该更容易产生。

`c:\\a\\directory\\i\\KNOW\\i\\can\\write\\to\\textfile.txt`如果这是权限问题，您应该能够通过使用类似的东西并查看它是否有效来找出它。然后，您还可以使用该文件记录当前目录等内容。

如果它只是证明“后台”启动方法位于错误的目录中，请将目录更改为程序的第一个操作之一。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2019-04-02T07:00:49.393

以下应该可以解决您的问题：

1.  检查保存文件的目录是否具有正确的权限。
2.  使用 fprintf 时使用真正的完整路径

    ```
     filetowrite = fopen("c:\\textfile.txt", "a+"); 
    ```

3.  以管理员模式运行 IDE（或以管理员模式运行 EXE）

# java - 片段设计：通过在单个 Activity 中显示/隐藏片段来适应多种屏幕布局？

> ID：10051962
> 
> 赞同：38
> 
> 时间：2012-04-07T05:06:59.050
> 
> 标签：java, android, android-layout, android-fragments

我试图了解如何使用 Fragments 创建能够很好地适应多个屏幕和布局的应用程序。我研究了几个例子：

1.  Android 开发者指南上的[Fragments文档。](http://developer.android.com/guide/topics/fundamentals/fragments.html)
2.  [谷歌 IO 应用](http://code.google.com/p/iosched/source/checkout)
3.  [来自ActionBar Sherlock](http://actionbarsherlock.com/samples.html)的片段示例。

所有这些都提倡采用多种`Activity`方法：

*   在大屏幕上，显示一个`Activity`与多个`Fragment`s
*   在较小的屏幕上，将 s 拆分为`Fragment`多个`Activity`s。

我想到了另一种方法 -`Activity`一个：

*   有一个`Activity`包含所有`Fragment`s 的单曲。
*   根据屏幕尺寸和方向，显示/隐藏适当`Fragment`的 (s)（使用`FragmentTransaction.show()`/ `FragmentTransaction.hide()`）。

为了说明与 Android 开发者指南使用的相同的“新闻文章列表/文章内容”示例：

*   让`News`活动同时包含 an`ArticleListFragment`和`ArticleReaderFragment`。
*   在选项卡上，始终显示两个片段。
*   在电话上，`ArticleReaderFragment`最初是隐藏的。当从列表中选择一篇文章时，将`ArticleListFragment`隐藏并`ArticleReaderFragment`显示 。

有没有人使用过类似的方法？这种方法可能有任何实际的缺点吗？与多活动方式相比，它看起来更好/更差吗？例如，片段不能在 XML 中显示/隐藏 -**必须**`FragmentTransaction`为此使用。

* * *

## 编辑 1：假设情景的描述

想象一个可以在屏幕上一次显示多达三个“窗格”的应用程序。此外，这些是要考虑的因素：

*   手机一次只能显示一个窗格（无论纵向/横向）
*   7 英寸平板电脑可以显示 2 个窗格，纵向拆分为纵向，横向拆分为横向。
*   10 英寸以上的平板电脑可以显示 2 个窗格，纵向拆分；3 个窗格横向水平拆分。

为简单起见，让我们将电视屏幕排除在讨论之外。

现在，将其转化为设计：

*   我们有三个片段：Frag1、Frag2 和 Frag3。
*   在最简单的情况下，所有三个片段都在一个 Activity 中（我们称之为 ActivityA）。这是 10 英寸横向机箱。
*   另一种“简单”的情况是当每个 Fragment 都在自己的 Activity 中时 - ActivityA 包含 Frag1；ActivityB 包含 Frag2，而 ActivityC 包含 Frag3。

到目前为止，我们还没有考虑任何与 Android 开发人员指南中介绍的新闻阅读器示例有显着差异的东西。唯一的主要区别是具有*三个*片段而不是两个。

现在，7 英寸标签的情况下只能容纳 2 个碎片。这将如何工作？请注意，这里有两种可能的组合：

1.  正在显示 Frag1 和 Frag2。
2.  正在显示 Frag2 和 Frag3。

我只是无法解决这个问题。我是否在 ActivityA 中完成所有这些操作？我只是创建一个全新的 ActivityD 吗？我需要创建多少个布局（我数了大约 8 个）？是不是变数太多了？

我确实意识到我上面提出的单一活动方法也可能不适合这种情况 - 因为显示/隐藏片段本身并不重要。

关于如何在不被布局和组合淹没的情况下处理这个问题的任何建议？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-04-16T17:48:35.413

[@Taylor Clark 的这个](https://stackoverflow.com/a/10099750/570930)回答非常有用。但是，这并不是我在原始问题中提出的使用单一活动方法的实际经验分享。我着手修改 Android 开发人员指南中的 News Reader 示例以使用单活动方法，并提出了一个可行的解决方案。

还有待观察的是，在哪些用例中这种方法比多活动方法更可取（或者是否有任何这种情况）。此外，我还没有详细了解我的问题的编辑 1 中描述的 3 窗格方案。

我希望尽快发布我的整个项目，但这里是我如何进行的快速概述：

*   单曲`Activity`：NewsActivity
*   两个片段：`TitlesListFragment`和`DetailsFragment`
*   这两个片段始终存在于`NewsActivity`. 根据当前的双窗格，我显示/隐藏适当的片段。

我遇到的一些问题：

**是否将布局指定为双窗格：**

在最初的新闻阅读器示例中，双窗格布局有一个`FrameLayout`用于保存新闻详细信息。我们通过测试这个框架布局的存在来确定我们当前是否处于双窗格布局中。

但是，在我的解决方案中，两个片段始终存在于所有布局中。我通过在我想要成为双窗格的布局中包含一个`View`带有 id`dualPane`并`android:visibility="gone"`在单窗格布局中省略此视图来解决这个问题。然后，这是一个问题

`mDualPane = findViewById(R.id.dualPane)!=null;`

**编辑：**

有比使用虚拟视图更好的方法来指定双窗格。我更喜欢创建一个布尔资源。例如，我有一个`config.xml`如下：

```
<resources>
    <bool name="dual_pane">false</bool>
</resources> 
```

然后，我可以将其他`config.xml`文件放在文件夹中`values-xlarge-land`，`values-port`或`values-sw600dp`等，并将布尔值调整为我想要的`true`或。`false`

然后，在代码中，这是一个问题`getResources().getBoolean(R.bool.dual_pane);`

**关闭详细信息片段**

这是一个区分`Activity`收盘价和`Fragment`收盘价的问题。最后，我不得不重写`onBackPressed()`如下：

*   在双窗格模式下，只需调用`super.onBackPressed()`;
*   在单窗格模式下，如果我们处于`TitlesListFragment`，请调用`super.onBackPressed()`;
*   在单窗格模式下，如果我们处于`DetailsFragment`，则将其视为关闭片段。这意味着隐藏它并显示`TitlesListFragment`.

这并不理想，但这是我能想到的最好的。

**编辑**：

根据@SherifelKhatib 在评论中的建议，有一种更简洁的方式来处理后退按钮按下：只需将显示/隐藏细节片段的事务添加到片段后台堆栈。这样，当您按下后退按钮时，片段事务就会被反转。如果您希望在其他按钮单击时这样做，您也可以手动弹出 backstack。

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2012-04-11T04:21:11.610

通常，应用程序被拆分为活动，因为每个活动都代表用户可以做的特定“事情”。例如，在电子邮件应用程序中，定义的一组操作可以是：

1.  查看消息列表
2.  查看消息的详细信息
3.  撰写对电子邮件的回复。

每个动作都可以是它自己的活动，显示单个（或一组）片段。但是，如果您拥有屏幕空间，那么将消息列表的查看和消息详细信息组合到一个可以显示/隐藏“详细视图”片段的单个活动中是有意义的。从本质上讲，片段允许您一次向用户显示多个“活动”。

做出决定时要考虑的事项：

1.  xml 中指定的片段不能提供参数
2.  如果您的决定是基于屏幕方向的，您始终可以使用资源限定符指向具有更多/更少片段的另一个布局（例如 layout-land-large）
3.  碎片无法维护活动
4.  片段是否协同工作，为用户提供简化的体验？
5.  有没有时候你的一个片段会永远消失？如果是这样，也许是时候进行新的活动了
6.  跟着你的直觉走。如果您的应用程序“自然”地换出片段，那就去吧。请记住，如果您发现自己经常这样做，那么单独的 Activity 可能是更合适的解决方案

我通常对平板电脑版本的应用程序使用“多片段方法”，对手机使用“每个活动一个片段”，这听起来与您**列出的第一种方法**一致。并不是说第二个没有时间和地点，但我可以看到实现很快就会变得混乱！

对不起，罗嗦的回复！也许您可以详细介绍一下您的具体用例？希望这可以帮助！

# **对问题编辑一的回应**

* * *

这是我想象您的应用程序项目可以设置的方式：

**源文件：**

yourapp.package.phone：NewsActivity1、NewsActivity2、NewsActivity3

yourapp.package.tablet：NewsMultipaneActivity

**资源**

布局/

```
activity_news.xml- phone version, only includes Fragment1
activity_news_detail.xml- phone version, only includes Fragment2
activity_news_<something>.xml- phone version, only includes Fragment3 
```

布局-大/

```
activity_news.xml- 7" tablet version, includes Fragment2 and an empty fragment container. Split vertically 
```

布局-大地/

```
activity_news.xml- same as layout-large, but with the split being horizontally 
```

布局-xlarge-land/

```
activity_news.xml- 10"+ tablet version, contains all three fragments split horizontally 
```

那么这里会发生什么？

*   如果您的应用在手机上运行，​​请启动 NewsActivity1
*   如果您的应用在平板电脑上运行，请启动 NewsMultipaneActivity

只要文件名相同，Android 就会根据屏幕大小和方向为您交换布局。因为 Fragment2 将始终显示，您可以将其“硬编码”到您的平板电脑布局中。然后可以根据需要使用 FragmentTransactions 在容器中的 Fragment1 和 Fragment3 之间进行切换

请务必查看[http://developer.android.com/guide/topics/resources/providing-resources.html#AlternativeResources](http://developer.android.com/guide/topics/resources/providing-resources.html#AlternativeResources)了解如何利用资源限定符来减轻不同屏幕和方向带来的一些麻烦

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-12-05T19:52:15.430

感谢您提出这个问题和您的见解。在遇到问题之前，我一直使用多活动方法。我的应用就像 doc-example 新闻阅读器。考虑这种情况：

1.  （初始状态）我在横向模式下使用平板电脑（两个窗格），活动 A 在左侧显示文章列表，在右侧显示一些文章。
2.  我旋转设备，现在活动 A 处于单窗格模式并显示文章列表。
3.  我单击一个列表项，活动 B 以打开的文章开始。
4.  现在我将设备旋转回横向模式。

发生了什么？活动 B 正在显示一篇全尺寸的文章，而我当然想回到两个窗格。我不确定如何很好地解决这个问题。当然，活动 B 可能会检查多窗格模式并自行完成，活动 A 可能会检查最后显示的文章是什么……这看起来很难看。想法？

PS 我怀疑 GMail 应用程序使用单一活动方法。当我从列表中选择一封电子邮件时，我没有看到任何活动转换。它在我描述的场景中也表现正常。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2015-12-13T10:02:51.397

在这篇文章[http://developer.android.com/guide/practices/tablets-and-handsets.html#Fragments](http://developer.android.com/guide/practices/tablets-and-handsets.html#Fragments)谷歌说：

> “您选择的方法取决于您的设计和个人喜好。”

和

> “然而，在其他时候，为您的手机设计动态交换片段可能会使您的代码更加复杂，因为您必须管理活动代码中的所有片段组合（而不是使用替代布局资源来定义片段组合）并管理自己分段（而不是让正常的活动堆栈来处理后退导航）。”

# objective-c - 为什么这些字符串不相等？

> ID：10051968
> 
> 赞同：-3
> 
> 时间：2012-04-07T05:07:56.153
> 
> 标签：objective-c, if-statement

我有以下编码，我确保如果条件为 TRUE，但我无法进入它。我通过使用 NSLog 在 if 语句之前和之后写入值和长度来证明这一点，都等于“测试”和长度 = 4，任何人都可以解决我的问题吗？

请看下面的链接，这是我的屏幕截图，请帮助，谢谢！！！！

[http://postimage.org/image/rvtxcq1g1/](http://postimage.org/image/rvtxcq1g1/)

```
NSLog(@"Before value=%@, lenght=%i", txtMaster.text, [txtMaster.text length]);

if (txtMaster.text == @"test")
{
   NSLog(@"%@\n", @"Success");
}

NSLog(@"After value=%@, lenght=%i", txtMaster.text, [txtMaster.text length]); 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-07T05:15:26.867

使用`==`to compare `NSString`s 比较字符串的指针值。这可能不是你想要的。相反，试试这个：

```
if([txtMaster.text isEqualToString:@"test"]) {
    NSLog(@"Success!\n");
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-07T10:10:54.463

可能您对指针有一些疑问。

@"test" 返回一个指针，显示常量字符串在内存中的位置。

*   @“测试”= 0xC0001。在 0xC0001 地址是常量字符串 @"test"
*   txtMaster.text = 0xD3401。在 0xD3401 地址它是一个对象（可能是 NSString）

在极少数情况下 @"test" 和 txtMaster.text 相等 (==) 那么这意味着

*   txtMaster.txt = @"test" = same address = 0xd32901 并且它们指向同一个对象。

记住所有返回 Objective-C 对象的方法通常都返回那些对象上的指针。

我希望雾现在已经散去。。

# xml - XML 解析错误：格式不正确

> ID：10051969
> 
> 赞同：12
> 
> 时间：2012-04-07T05:07:59.757
> 
> 标签：xml

我正在从我的数据库中创建一个站点地图 XML，它是关于视频站点地图的。在 XML 中，我获取的视频标题为`title`，描述为`description`，但有一些标题和描述是用泰语、葡萄牙语、德语和其他语言编写的。在通过 PHP 生成 XML 时，我遇到了一个问题：

> “XML 解析错误：格式不正确”。

遇到此错误后，XML 的生成停止。

```
XML Parsing Error: not well-formed
Location: http://localhost/mydesk/sitemap.php
Line Number 24489, Column 69: 
```

我观察到它包含下面列出的无效字符，并且我已经替换了所有类型的这些字符，但我意识到其他语言中还使用了其他字符。

> Ð ž ´ Ø ¸ à ½ ¡ ‰ ˆ Ù ° § ¼ ¡ å < * © > % â © # " ' ä æ ï ã ç › Š º Ž ¥ œ • ¤ ç ã ® ∼ ¢ ¨ ¯ £

有什么方法可以处理支持所有语言的这个问题吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-18T18:29:08.433

如果您收到此错误消息，请尝试按`Ctrl`+查看页面源代码`U` 通常有一个`"`符号在错误的位置。并检查您的 html 语法。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2021-10-07T12:06:54.150

我在 Firefox 中遇到了同样的错误，解析了一个 SVG 字符串，它只在**"text/html"** as **mimeType**时消失了。我之前尝试过 'image/svg+xml' 和 'application/xml' 并在[https://developer.mozilla.org/en-US/docs/Web/API/DOMParser/parseFromString](https://developer.mozilla.org/en-US/docs/Web/API/DOMParser/parseFromString)手册中发现它们在功能上是等效的，所以我尝试了..

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-07-11T03:51:07.117

您可以在十六进制编辑器中打开您的 xml 文档吗？如果是这样，请查看每个字符需要 1 个字节还是 2 个。如果每个字符需要 2 个字节，您应该尝试使用 UTF-16 进行编码。如果您确实记住，您可以保证解析器支持的唯一编码是 UTF-8。也应该支持 UTF-16，但不是全部都支持。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2022-02-17T17:07:45.433

使用`XML Validator`工具。你可以在网上找到一个[here](https://www.xmlvalidation.com/)

就我而言，它向我显示了错误的确切行和列。

# java - java中的POST与android中的POST不同吗？

> ID：10051970
> 
> 赞同：0
> 
> 时间：2012-04-07T05:08:18.173
> 
> 标签：java, android, post, tcp

虽然代码有点长，但大部分都是非常简单的 IMO。现在我正在编写一个将数据发布到网站并将返回的 HTML 代码显示到 TextView 的 android 应用程序。首先我编写了一个简单的 java POST 方法，它在我的计算机上完美运行（在 linux 上，将用户名和密码发布到`http://forum.xda-developers.com/login.php`，然后它返回HTML 成功，但提示我用户名和密码不正确）：

```
package com.app.main;
import java.io.BufferedReader;
import java.io.InputStreamReader;
import java.io.OutputStreamWriter;
import java.net.URL;
import java.net.URLConnection;

public class Connection
{
    String returnText = "";                        
    String returnLine;

            //data which is about to be posted
    public String data = "vb_login_username=test&vb_login_password&securitytoken=guest&do=login";

    public String returnHTML()
    {
    try {
            URL url = new URL("http://forum.xda-developers.com/login.php");
            URLConnection conn = url.openConnection();
            conn.setDoOutput(true);
            OutputStreamWriter wr = new OutputStreamWriter(conn.getOutputStream());
            wr.write(data);
            wr.flush();
            BufferedReader rd = new BufferedReader(new InputStreamReader(conn.getInputStream()));

            while((returnLine = rd.readLine()) != null) {
                returnText += returnLine;
            }

            wr.close();
            rd.close();

            return returnText;

    } catch (Exception e) {
         return "ERROR: "+e.getMessage();
      }
    }
} 
```

我使用以下方法测试了代码：

```
Connection net_start = new Connection();
System.out.println(net_start.returnHTML()); 
```

完美的。HTML返回成功，然后我去写一个android app，很简单，只有一个按钮和一个TextView。当我按下按钮时，如果成功，TextView 将显示返回的 HTML。这里是主Activity.java的源代码

```
package com.app.main;

import android.app.Activity;
import android.os.Bundle;
import android.text.method.ScrollingMovementMethod;
import android.view.View;
import android.view.View.OnClickListener;
import android.widget.Button;
import android.widget.TextView;

public class AndroidTestActivity extends Activity {
    /** Called when the activity is first created. */
    @Override
    public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);

    final TextView displayResult = (TextView)findViewById(R.id.displayResult);
    Button login = (Button)findViewById(R.id.login);

    //set dispalyResult scrollable
    displayResult.setMovementMethod(new ScrollingMovementMethod());

    login.setOnClickListener(new OnClickListener() {

        public void onClick(View v) {

            Connection net_start = new Connection();
            displayResult.setText(net_start.returnHTML());      

        }

    });

    }

} 
```

非常简单的代码，与上面的唯一区别是我在 TextView 而不是命令行上设置了返回的 HTML 显示。但我失败了。根据调试，我发现应用程序在 Connection.java: 的那一行抛出了一个异常`OutputStreamWriter wr = new OutputStreamWriter(conn.getOutputStream());`，被捕获的 e 说：`java.net.UnknownHostException: forum.xda-developers.com`，但我确实可以在我的手机上登录 xda-developers 网站（我在我的手机上调试应用程序`adb`） ，这是怎么回事？安卓不能用`URLConnection`吗？任何帮助表示赞赏:)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-07T05:13:49.903

是可用的么？

```
 <uses-permission 
        android:name="android.permission.INTERNET" /> 
```

在您的**android 应用程序的清单**文件中..

在我的情况下，您的代码可以正常工作：

结果`returnText`是：

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml" dir="ltr" lang="en"><head><meta name="robots" content="noindex,follow" /><meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1" /><meta http-equiv="X-UA-Compatible" content="IE=9" ><meta name="keywords" content="XDA,MDA,Vario,HTC,Qtek,wallaby,wizard,tytn,hermes,alpine,prophet,i-mate,jam,dopod,tornado,typhoon,programming,coding,modding,wiki,forum,news,xdatools,xdaunlock,romkitchen,rom,development,lobster,unlock,imei" /><meta name="description" content="Android and Windows Mobile Developers - The Largest Community for Smartphone Hacks and Development of Apps" /><style type="text/css" id="vbulletin_css">/*** vBulletin 3.8.7 CSS* Style: 'XDA 2010'; Style ID: 16*/@import url("http://media.xda-developers.com/clientscript/vbulletin_css/style-e9bec9ef-00016.css"); 
```

# javascript - 如何使用 AddThis 按钮和 Javascript 将“通过我的公司名称”、公司徽标和指向我的网站的链接添加到 Facebook 共享

> ID：10051974
> 
> 赞同：1
> 
> 时间：2012-04-07T05:09:58.503
> 
> 标签：javascript, facebook, addthis

如何使用 AddThis 按钮和 Javascript 将“通过我的公司名称”、公司徽标和指向我的网站的链接添加到 Facebook 共享

我有一个 Ruby on Rails Web 应用程序，用户界面使用 Javascript。目前，我正在使用 AddThis 共享按钮。我的网站的工作方式是，向用户展示来自 Internet 的文章，并且可以选择使用共享按钮进行共享。addthis:url 使用 Javascript 代码动态更改`addthis.update( 'share', 'url', url )`，其中 url 是文章的 url。

我浏览了一些 AddThis 文档，发现了这个：

[https://www.addthis.com/help/url-and-title#.T0mk3XMmP6c](https://www.addthis.com/help/url-and-title#.T0mk3XMmP6c)

当我单击该页面上任何共享按钮的 Facebook 共享时，屏幕截图如下：

[http://imgur.com/d3oIC](http://imgur.com/d3oIC)

这是它在我的 Facebook 页面上的样子：

[http://imgur.com/28GP4](http://imgur.com/28GP4)

如果我可以将 AddThis Sharing 替换为我的网站名称和链接，并保留图片中的文章数据（显然是我提供的 url、标题和描述），那将是理想的。有谁知道 AddThis 是如何做到的？是使用 Open Graph 标签吗？

我无法复制/粘贴该页面上的代码并获得相同的结果，因为它只使用了 addthis:url，而不是标题或描述。看起来是这样的：

[http://imgur.com/MMN7C](http://imgur.com/MMN7C)

一定有一些不明显的东西可以让我以我想要的方式发布，我知道这是可能的，因为 AddThis 网站可以做到。

我不确定是否可以使用 Open Graph 标签。我网站上的文章不是静态网址，因此 Facebook 无法访问特定页面来获取它需要的信息。文章使用 Javascript 加载到浏览器中，因此下一篇文章在评分后立即出现。

根据我的网站的工作方式以及我需要工作的内容，有人认为他们可以帮助我吗？另外，很高兴知道我所要求的是否绝对不可能。

```
//If anyone can suggest another tool like AddThis which would work better for the needs and constraints I have, that would be greatly appreciated. 
```

我现在可以按照我想要的方式使用 Twitter、LinkedIn 和电子邮件按钮，现在剩下的就是 Facebook。我真的希望 Facebook 按钮与 AddThis 一起使用。

# php - 如何使用 php 将图像从 mysql 显示到表

> ID：10051976
> 
> 赞同：0
> 
> 时间：2012-04-07T05:10:04.020
> 
> 标签：php, mysql

这是我的代码-

```
<?php
    $con = mysql_connect('db', 'table', 'p/w');
    if (!$con) {
        die('Could not connect: ' . mysql_error()); }
    mysql_select_db("db", $con);
    $result = mysql_query("SELECT * FROM computers WHERE KEYWORDS='Computers,Desktops'");
    echo "<table border='1' width='100%'  >";
    while($row = mysql_fetch_array($result)) {
        echo "<tr>";
        echo "<td>" . $row['NAME'] . "</td>";
        echo "<td>" . $row['MANUFACTURER'] . "</td>"; 
```

我想在其中一列中显示存储为路径的数据库中的图像

```
echo "</tr>"; }
echo "</table>";
mysql_close($con);
?> 
```

谁能帮忙？谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-07T05:50:10.347

```
<?php 
$con = mysql_connect('db', 'table', 'p/w'); 
if (!$con) { die('Could not connect: ' . mysql_error()); } 
mysql_select_db("db", $con); 
$result = mysql_query("SELECT * FROM computers WHERE KEYWORDS='Computers,Desktops'"); 
echo "<table border='1' width='100%' >"; 
    while($row = mysql_fetch_array($result)) { 
        echo "<tr>";
        echo "<td>" . $row['NAME'] . "</td>"; 
        echo "<td>" . $row['MANUFACTURER'] . "</td>";
        echo "<td><img src='folder_name/".$row['image_name']."'></td>";
        echo "</tr>"; 
    }
echo "</table>";
mysql_close($con);
?> 
```

**folder_name** = 保存图像的文件夹名称
**image_name** = 表中图像的字段名称 计算机

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-07T05:45:21.527

您可以在要显示图像的任何地方使用 img 元素。

`echo "<img src='" . $row['image'] . "'>"`. 您还可以检查[HTML 的](http://www.w3schools.com/html/html_images.asp)img 元素或[HTML5的 img 元素](http://www.w3schools.com/html5/tag_img.asp)

# c# - 从另一个表单更改表单字体颜色

> ID：10051981
> 
> 赞同：0
> 
> 时间：2012-04-07T05:10:26.130
> 
> 标签：c#, forms, colors, fonts

我有一个表单，我们称之为 formMain，它有一个菜单，可以打开另一个名为 formColors 的表单。现在，当 formColors 打开时，它具有标有颜色的单选按钮，即红色

如何将 formMain 的字体颜色更改为我在 formColors 中选择的任何选项？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-07T05:19:23.727

创建一个[`Event`](http://msdn.microsoft.com/en-us/library/wkzf914z.aspx)in`formColors`并订阅它，`formMain`或者正如 Hans Passant 指出的那样，您可以使用公共属性和 Forms [DialogResult 属性](http://msdn.microsoft.com/en-us/library/system.windows.forms.form.dialogresult.aspx)，这将是首选方法。

WinForm DialogResult 示例

**表格1**

```
public partial class Form1 : Form
{
    Form2 frm2;
    public Form1()
    {
        InitializeComponent();
    }

    private void button1_Click(object sender, EventArgs e)
    {
        frm2 = new Form2();
        if (frm2.ShowDialog() == System.Windows.Forms.DialogResult.OK)
            this.BackColor = frm2.formColor;

        frm2.Close();   
    }
} 
```

**表格2**

```
public partial class Form2 : Form
{
    Color newColor;
    public Form2()
    {
        InitializeComponent();
    }
    public Color formColor
    {
        get { return this.newColor; }
        set { this.newColor = value; }
    }

    private void btnRed_Click(object sender, EventArgs e)
    {
        newColor = Color.Red;
    }

    private void btnBlue_Click(object sender, EventArgs e)
    {
        newColor = Color.Blue;
    }

    private void btnOk_Click(object sender, EventArgs e)
    {
        DialogResult = System.Windows.Forms.DialogResult.OK;
    } 

} 
```

* * *

WinForm 事件示例：

**表格1：**

```
public partial class Form1 : Form
{
    Form2 frm2 = new Form2();
    public Form1()
    {
        InitializeComponent();
        frm2.ColorEvent += new ColorEventHandler(frm2_ColorEvent);

    }

    void frm2_ColorEvent(object sender, ColorEventArgs e)
    {
        this.BackColor = e.formColor;
    }

    private void button1_Click(object sender, EventArgs e)
    {
        frm2.ShowDialog();
    }
} 
```

**表格2：**

```
public delegate void ColorEventHandler(object sender, ColorEventArgs e); 
public partial class Form2 : Form
{
    public event ColorEventHandler ColorEvent;

    public Form2()
    {
        InitializeComponent();
    }

    private void button1_Click(object sender, EventArgs e)
    {
        ColorEventArgs newColor = new ColorEventArgs();
        newColor.formColor=Color.Red;
        ColorEvent(this, newColor);
    }

} 
```

**颜色事件类**

```
public class ColorEventArgs : EventArgs
{
    private Color newColor;
    public Color formColor
    {
        get { return this.newColor; }

        set { this.newColor = value; }
    }
} 
```