# StackOverflow 问答 11240000-11240999

# ios - 在 RestKit 中解析空数组时出错

> ID：11240000
> 
> 赞同：1
> 
> 时间：2012-06-28T07:32:03.013
> 
> 标签：ios, json, restkit

我有以下 JSON 结构：

```
{"projekt":{
    "id":18,
    "projectname":"test",
    "dokumente":{
        "id":1190,
        "name":"rootfolder",
        "information":{
            "folder":[
                {
                    "id":1191,
                    "name":"folder 1",
                    "information":""
                },
                {
                    "id":1198,
                    "name":"folder 2",
                    "information":{
                        "folder":[
                            {
                                "id":1199,
                                "name":"folder 2 1",
                                "information":""
                            },
                            {
                                "id":1199,
                                "name":"folder 2 2",
                                "information":""
                            }
                        ]
                    }
                }
            ]
        }
    }
}} 
```

基本上它是一个递归文件夹结构。我有用于项目、信息和文件夹的 RKObjectMappings。解析顺利，直到`information=""`达到。RestKit 现在尝试调用

```
value = [self.sourceObject valueForKeyPath:relationshipMapping.sourceKeyPath]; 
```

在 RKObjectMappingOperation 中，第 442 行。这失败了，因为 sourceKeyPath`folder`在此`information`元素中不可用。这导致 a`NSUnknownKeyException`和解析停止。

我想要的是 RestKit 只是忽略信息元素并将其设置为零。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-28T08:34:32.437

我忘了设置`[informationMapping setIgnoreUnknownKeyPaths:YES];`。如果设置了，则忽略异常并且值为 nil。好的！

# php - 尝试通过 Ajax 和 jQuery 将表单发布到 Facebook 时出现 400（错误请求）错误

> ID：11240005
> 
> 赞同：1
> 
> 时间：2012-06-28T07:32:20.267
> 
> 标签：php, ajax, facebook, jquery

我正在尝试使用我网站中的表单将图像发布到 Facebook 相册。我知道我得到了正确的访问令牌，因为在没有 jQuery 和 AJAX 的情况下发布可以正常工作 - 但会将我重定向到我的网站之外。为了解决这个问题，我做了一个 jQuery AJAX 帖子，但这给了我一个我不明白的错误。

我正在使用：

```
<script type="text/javascript" src="../Components/JQUERY/jquery-1.4.2.min.js"></script>    
<script type="text/javascript" src="../Components/JQUERY/jquery.validate.min.js"></script> 
```

代码是：

1.  获取访问令牌并准备要发布到的 URL（**没关系**，不使用 jQuery 发布就是将图片上传到 Facebook）：

    ```
    //....Facebook code for getting the access token...//

    // This is the URL that was originally in the form's action tag//
    $image_url= "https://graph.facebook.com/" . $ALBUM_ID . "/photos?"
    . "access_token=" .$access_token; 
    ```

2.  表单的 HTML：

    ```
    <form name="myform" id="myform" enctype="multipart/form-data" action="" method="POST">
       Please choose a photo:
         <input name="source" type="file"><br/>
       Say something about this photo: <br/>
         <textarea id="fbText" name="message" rows="4" cols="47"> </textarea><br/><br/>
         <input type="submit" name="submit" value="Upload"/><br/>
    </form>

    <div id="results"></div> 
    ```

3.  jQuery代码：

    ```
    <script type="text/javascript">
      $(document).ready(function(){
          $("#myform").validate({
              debug: false,
              rules: {
                  message: "required"   
              },
              messages: {
                  message: "Please insert text."
              },
              submitHandler: function(form) {
                  // do other stuff for a valid form
                  $.post('<?php echo $image_url ?>', $("#myform").serialize(), function(data) {
                    $('#results').html(data);
                });
            }
        });
    });
    </script> 
    ```

按上传按钮给我以下错误：

![在此处输入图像描述](../Images/2b19b10c32130b02fc7b2855d7fc810c.png)

我究竟做错了什么？谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-28T07:40:26.113

您不能使用 jquery post 方法发布多部分表单数据。还有一个问题是跨域通信。您不能将 ajax 请求发送到另一个域。

有关替代方案，请参阅

> [你如何发布到 iframe？](https://stackoverflow.com/questions/168455/how-do-you-post-to-an-iframe/168488#168488)
> [http://jquery.malsup.com/form/#file-upload](http://jquery.malsup.com/form/#file-upload)
> 
> [Facebook 新的 javascript sdk - 用它上传照片！](https://stackoverflow.com/questions/4264599/facebook-new-javascript-sdk-uploading-photos-with-it)

要通过 ajax 发送多部分数据，请参阅这些链接

> [使用 jQuery 使用 multipart/form-data 进行 HTTP POST 调用？](https://stackoverflow.com/questions/3537774/making-an-http-post-call-with-multipart-form-data-using-jquery)
> 
> [使用 jQuery.ajax 发送 multipart/formdata](https://stackoverflow.com/questions/5392344/sending-multipart-formdata-with-jquery-ajax)

或者最后，您可以上传到您的服务器并上传到 facebook..

**[编辑]**

```
var options = { 
        beforeSubmit:  showRequest,  // pre-submit callback 
        success:       showResponse  // post-submit callback      
    }; 

    // bind form using 'ajaxForm' 
    $('#myForm1').ajaxForm(options); 
```

# iphone - 在 FB 墙上分享图片

> ID：11240006
> 
> 赞同：0
> 
> 时间：2012-06-28T07:32:23.753
> 
> 标签：iphone, facebook

我的应用中有一张图片，我想在 FB 上分享。

现在我的 iPhone 上安装了 FB 应用程序。

我想要的是当我在我的应用程序的图像中点击共享时，它应该打开 FB 应用程序并允许我在那里共享我的图像。

是否可以通过外部 FB 应用程序在我们的应用程序中共享图像？

推特也一样，链接也一样？

**已解决这是通过使用 ShareKit 解决的**。**唯一的问题是你不能直接在推特上发布图片。所以你必须在你的服务器上上传图片并将那个 URL 传递给 twitter。Sharekit 摇滚**

 *** * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-19T10:43:22.417

[https://github.com/ShareKit/ShareKit](https://github.com/ShareKit/ShareKit)

尝试使用 sharekit 它很有用.. 按照所有步骤进行操作，如果有，请查询而不是回发

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-28T07:51:33.407

阅读这些教程以在 Facebook 上分享图片

[http://www.capturetheconversation.com/technology/iphone-facebook-oauth-2-0-and-the-graph-api-a-tutorial-part-2](http://www.capturetheconversation.com/technology/iphone-facebook-oauth-2-0-and-the-graph-api-a-tutorial-part-2)
[http://www.raywenderlich.com/1488/how -to-use-facebooks-new-graph-api-from-your-iphone-app](http://www.raywenderlich.com/1488/how-to-use-facebooks-new-graph-api-from-your-iphone-app)，
[http://www.raywenderlich.com/1626/how-to-post-to-a-users-wall-upload-photos -and-add-a-like-button-from-your-iphone-app](http://www.raywenderlich.com/1626/how-to-post-to-a-users-wall-upload-photos-and-add-a-like-button-from-your-iphone-app)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-17T12:52:19.200

将 FBConnect 添加到您的项目中，并使用以下代码在 facebook 上共享捕获图像。还将委托 FBSessionDelegate、FBDialogDelegate、FBRequestDelegate 添加到您的 .h 文件中。如果您想共享本地图像而不需要在服务器上上传图像。将 uiimage 对象传递给 facebook 参数。

```
if (facebook == nil) {
        facebook = [[Facebook alloc] initWithAppId:@"your facebook key "];

    }   

    NSArray* permissions =  [NSArray arrayWithObjects:
                             @"publish_stream", @"offline_access", nil] ;
    //  
    [facebook authorize:permissions delegate:self];

- (BOOL) takeScreenshot
{
    UIGraphicsBeginImageContext(self.view.frame.size);
    [self.view.layer renderInContext:UIGraphicsGetCurrentContext()];
    UIImage *viewImage = UIGraphicsGetImageFromCurrentImageContext();
    UIGraphicsEndImageContext();
    UIImageWriteToSavedPhotosAlbum(viewImage, nil, nil, nil);

    NSMutableDictionary* params = [NSMutableDictionary dictionaryWithObjectsAndKeys:
                                   viewImage,@"message",                                   
                                   nil];

    [facebook requestWithGraphPath:@"me/photos"   // or use page ID instead of 'me'
                         andParams:params
                     andHttpMethod:@"POST"
                       andDelegate:self];

    return YES;
}

#pragma mark -
#pragma mark FBSessionDelegate
/**
 * Called when the user has logged in successfully.
 */
- (void)fbDidLogin {
    isFBLogged = YES;   
    [self takeScreenshot];

    if([self takeScreenshot])
    {
        UIAlertView *alert = [[UIAlertView alloc]
                              initWithTitle: @"Image share sucessfully"
                              message: nil
                              delegate: nil
                              cancelButtonTitle:@"OK"
                              otherButtonTitles:nil];
        [alert show];
        [alert release];
    }
    else
    {
        UIAlertView *alert = [[UIAlertView alloc]
                              initWithTitle: @"Image share unsucessfully"
                              message: nil
                              delegate: nil
                              cancelButtonTitle:@"OK"
                              otherButtonTitles:nil];
        [alert show];
        [alert release];
    }

} 
```**

# sql-server - 获取所有无效工作的公司

> ID：11240009
> 
> 赞同：0
> 
> 时间：2012-06-28T07:32:28.417
> 
> 标签：sql-server

`tbl_posting_job_info`

![tbl_posting_job_info](../Images/57142fdf5688d8af86c2ac4baa88105d.png)

`tbl_company_info`

```
company_id     companyname
---------------------------
1              XYZ
4              PQR
8              LMN 
```

现在我想要一个公司的信息，它甚至没有一个“活跃”的工作。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-28T07:34:54.727

```
select  *
from    tbl_company_info c
where   not exists
        (
        select  *
        from    tbl_posting_job_info j
        where   j.company_id = c.company_id
                and j.status = 'active'
        ) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-28T07:53:35.157

```
select  *
from    tbl_company_info a
where   Isnull((
        select  count(*)
        from    tbl_posting_job_info b
        where   a.company_id = b.company_id
                and a.status = 'active'
        ),0) = 0 
```

# javascript - Object.create 原型链

> ID：11240011
> 
> 赞同：4
> 
> 时间：2012-06-28T07:32:38.330
> 
> 标签：javascript, object, prototypal-inheritance, object-create

# 最初的问题

昨天我读到了 ECMAScript 5 Object.create() 我想用这个方法开始在我的代码中构建原型链，而不是设置原型及其构造函数，我喜欢你可以直接设置可写可配置等。

我试过这样

```
function printobject(msg, obj) {
    if (msg) {
        document.write("<b>" + msg + "</b><br>");
        document.write("<hr><br>");
    }
    for (var prop in obj) {
        if (obj.hasOwnProperty(prop)) {
            if (obj[prop].toString() !== "[object Object]") {
                document.write(prop + " : " + obj[prop] + "<br>");
            }
            else {
                document.write("<b>" + prop + " : " + obj[prop] + "</b><br>");
                printobject("", obj[prop]);
            }
        }
    }
    if (msg) {
        document.write("<br><hr><br>");
    }
};
var base = {
    extend: function () { //extend this Object
        var args = Array.prototype.slice.call(arguments);
        printobject("Arguments to Extend", args)
        var that = Object.create(this, (args ? args.shift() : {}));
        var arg = args.shift() || {};
        printobject("Copy Properties to New Object", arg);
        for (var prop in arg) {
            that[prop] = arg[prop];
        }
        // Object.freeze(that);       
        return that;
    },
    create: function () { //Creates new instances of the Object
        var that = Object.create(this, {
            extend: {
                value: null,
                writable: false,
                configurable: false
            }, //sets extend and create to null so you cant create a new instance when used create ( use extend instead);
            create: {
                value: null,
                writable: false,
                configurable: false
            }
        });
        that.init.apply(that, arguments); //call init function for the new created object; 
        return that;
    },
    init: function () {
        printobject("No Initfunction supplied for New Object", this);
    } // Empty init function for fallback
}
var Human = base.extend({
    name: {
        value: "test"
    }
}, {
    init: function (name) {
        alert(name + " has been created");
        this.name = name;
    },
    walk: function () {
        alert(this.name + " walks");
    }
});
var Human1 = Human.create("test2");
//alert("Human1 - Name:" + Human1.name);
Human1.walk();
Human.walk = function () {
    alert("Walk has been overwritten")
}; //Object freezed 
Human1.walk();
Human1.create = function () {
    alert("Overwrite create");
}; //Doesnt exist in created     Object
Human1.create(); ? 
```

*   中给出的方法是否`Human`仅在 ram 中存在一次？并`Human1.walk()`指向它？
*   我想知道这是否是这样做的正确方法？我对 JavaScript 比较陌生。

这是[**jsfiddle**](http://jsfiddle.net/2VdJN/)上的代码。

## 回答

首先，这让事情变得更加清晰 =) 但是，1：当我这样做时，实例从其构造函数的原型继承（？）

```
 Nothing = {};
function base() {
this.inherit = function(constructor) {
    alert("inherit");
    var obj = constructor;
    obj.constructor = constructor;
    obj.prototype = this;
   return obj ;  
 }
 ;}
base.prototype = Nothing;
base.constructor = base;
var Top = new base();       
var Human = Top.inherit(function(name) {
        this.name = name;
});
var Paul = new Human("Paul");
alert(Paul.name);
alert(Paul instanceof Human); //true ` 
```

2：所以 instanceof 运算符不会在此代码中中断，（它仅适用于函数对我来说似乎很清楚）

但是这样写，Paul 仍然从​​ Top 的原型继承了 inherit() 方法，我需要覆盖它但是如果我不希望 Human 的实例继承该方法，我该怎么做呢？

除了使用 Objkect.defineproperty (?) 之外，我无法设置像 wrtable 这样的属性描述符

那么使用 Object.create() 从 Objects 继承与设置原型和构造函数的主要好处是什么？=)

3：哦，谢谢，是的，这是正确的，这不是基础对象的扩展=）谢谢建议=）

感谢所有的努力 =)

### 回答

好的，所以当我这样做时

> 没有={}
> 
> base.prototype = 没有；

这不会阻止原型链向上直到 Object.prototype 吗？如果没有，有没有办法做到这一点？=) 会 ( Object.create(null); ) 这样做，

我认为我必须设置

> base.prototype.constructor = base;

因为否则，原型的构造函数

> var Top = new base();

如果原型设置为 Nothing ->

> Top instanceof base // false

# 更新

我现在以这样的方式结束了它：

```
var base = {
// a tiny little selfmade prototypical inheritance system
// you are free to add function arguments for extending the created objects
// neither instanceof nor .constructor is featured, because "classes" are no functions
    create: function(extension,desc) {
        // instances inherit from the proto objects
        var newInst = Object.create(this.proto, desc);
        if(this.proto.childExtendable) //if Subclass allows its Children to be Extendible, do so
            newInst.extend(extension);
        if(newInst.init||this.proto.init) //4
            newInst.init()                          
        return newInst
    },
    inherit: function(props) {
        // the "class" inherits static methods from the class
        var sub = Object.create(this);
        // and the proto objects inherits from the parent proto
        sub.proto = Object.create(this.proto);
        props.protect = this.protect;
        if(props.childExtendable)
            props.extend = this.extend;
        this.extend.call(sub.proto, props);
        return sub;
    }, 
    extend: function (props) {
        for (var prop in props) {
            var propmatch = prop.match(/(.*?)__(.{1,5}?)__(.*)/)||["",prop,"",""];
            this[propmatch[1]+propmatch[3]] = props[prop];
            if(propmatch[2])
                this.protect(propmatch[1]+propmatch[3],propmatch[2]);           
        }
    },
    protect: function(prop,flags) { //with each call it toggles the given flags,  so you can protect funcitons given to the inherit function ;; //This should be available to all childs, but adding it to the base.proto, it changes Object.prototyppe ( therefore not a good idea)
        var d  = Object.getOwnPropertyDescriptor(this, prop);
        if (flags.match(/w/)){
             Ti.API.info("Setting writable for propertie " + prop + " in Object " + this + " to " + !d.writable);
             Object.defineProperty(this, prop, {writable:!d.writable});};
        if (flags.match(/c/)){
            Ti.API.info("Setting configurable for propertie " + prop + "in Object " + this);
            Object.defineProperty(this, prop, {configurable:!d.configurable});};
        if (flags.match(/e/)){
            Ti.API.info("Setting enumerable for propertie " + prop + "in Object " + this);
            Object.defineProperty(this, prop, {configurable:!d.enumerable});};
        if (flags.match(/a/)){
            Ti.API.info("Setting enumerable for propertie " + prop + "in Object " + this);
            Object.preventExtensions(this);};
   },
    init: function() {},
    proto: Object.prototype // or null, if you want
};

var Human = base.inherit({ //will be put in Human.proto
    childExtendable:true,
    init:function() {alert("Humans Init for all Instances")},
    say:function() { alert("Hi, I'm "+this.name); }
});
Human.proto.name = "default"; // You could use an argument to the inherit function
                              // I just want to make clear what happens
Ti.API.info(Object.getPrototypeOf(Function) + "a");
var paul = Human.create({ //extends this object
    name: "Paul",
    test: function() {alert("test")},
    init__wce__: function() {alert("Pauls Own Init")},
    say__w__ : function() { alert("Hi, I'm" + this.name + "s Own Function")}
});
paul.name = "Paul";           // and again, the create function might do it for you
paul.say = function() {alert("Pauls say is overwritten")} // define init without __wce__ and it will be overwritten
paul.say(); // -> "Hi, I'm Paul" 
```

只是如果有人关心
但是，jsfiddle 不会运行它，Titanium 会按预期执行所有操作，也许是某种严格模式（？？）

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-28T11:24:32.933

> Human中给出的方法在ram中只存在一次吗？

是的。

> 和 Human1.walk() 指向它？

是的。更准确地说， , 的原型`Human1`有`Human`一个属性“walk”指向它。

> 我想知道这是否是这样做的正确方法？我对 JavaScript 比较陌生。

我会说不，因为它过于复杂，而且部分是错误的。

*   Human 实例的原型链包括`base`. 这很奇怪，您需要为每个实例覆盖 create 和 extend 方法。通常的方法是“类”包含一个“原型”属性，它们的实例从该属性继承。
*   您的模式破坏了`instanceof`运算符，尽管这可能是一个小问题。
*   扩展方法令人困惑。它不会扩展对象本身，而是创建一个继承自它的新对象并在其上设置属性和属性描述符。更好地实现同一件事：

```
base.inherit = function(descs, props) {
    // creates a new object inheriting from this
    var that = Object.create(this, descs); // will even work when undefined
    if (props)
        for (var prop in props)
            that[prop] = props[prop];
    // Object.freeze(that);       
    return that;
}; 
```

* * *

对于扩展问题：

```
base.prototype = Nothing​;
base.constructor = base; 
```

是很没用的。首先，默认情况下，任何函数的“原型”属性都是（几乎）空对象，直到您覆盖它。无需将其设置为`nothing`:-)

而“构造函数”属性通常是原型属性。它将被所有实例继承，指向它们的构造函数。您只需要在覆盖函数的“原型”属性时显式设置它 - 并且您不应该在函数本身上设置“构造函数”属性。

（继续：）我更喜欢这样的解决方案：

```
var base = {
// a tiny little selfmade prototypical inheritance system
// you are free to add function arguments for extending the created objects
// neither instanceof nor .constructor is featured, because "classes" are no functions
    create: function([desc]) {
        // instances inherit from the proto objects
        return Object.create(this.proto, [desc]);
    },
    inherit: function([props]) {
        // the "class" inherits static methods from the class
        var sub = Object.create(this);
        // and the proto objects inherits from the parent proto
        sub.proto = Object.create(this.proto);
        [Object.extend(sub.proto, props);]
        return sub;
    },
    proto: Object.prototype // or null, if you want
};

var Human = base.inherit();
Human.proto.name = "default"; // You could use an argument to the inherit function
                              // I just want to make clear what happens
Human.proto.say = function() { alert("Hi, I'm "+this.name); };

var paul = Human.create();
paul.name = "Paul";           // and again, the create function might do it for you
paul.say(); // -> "Hi, I'm Paul" 
```

这样，`paul`继承`Human.proto`自`base.proto`which is `Object.prototype`or `null`。并且`Human`继承自`base`，即您可以轻松地构建一个“子类” `Human.inherit()`。

是否要使用属性描述符绝对是您的选择。无论您在哪里创建和扩展它，您都可以使用`Object.defineProperties`（或 的第二个参数`Object.create`）以及`Object.extend`（通常的 for-in-copy-method）。

> 使用 Object.create() 从 Objects 继承与设置原型和构造函数的主要好处是什么？

这是一个设计选择。`Object.create`不会在构建的对象上调用 [constructor] 函数。有关详细信息，请参阅[使用“Object.create”而不是“new”](https://stackoverflow.com/q/2709612/1048572)或[了解 Object.create() 和 new SomeFunction() 之间的区别](https://stackoverflow.com/q/4166616/1048572)。

> `base.prototype = {};`不会阻止原型链上溯到 Object.prototype 吗？

是的。一个空对象（由您的文字创建）仍然`Object.prototype`在其链中。做到这一点的唯一方法是`Object.create(null)`（不能用 shim 填充`new`）。

> 我以为我必须设置`base.prototype.constructor = base;`

在这种情况下不是。拥有一个`function base(){...}`, 将其“原型”属性设置为`{constructor: base}`绝对不会改变（除了现在可枚举的“构造函数”） - 每个函数都有这样一个默认原型对象，包括“构造函数”。

所以只有当你需要用一个新对象覆盖“原型”属性时，就像让它从另一个函数的原型继承时发生的那样，你可以添加这个便利属性：`MySubClass.prototype = Object.create(MyClass.prototype, {constructor:{value:MySubClass}});`

> 除此以外...

什么都不会发生。原型对象上的“构造函数”属性对于没有语言特性（如`instanceof`）是必需的，并且很少使用。很可能没有任何问题。

# javascript - 提交表单后文本框中的日期更改

> ID：11240013
> 
> 赞同：0
> 
> 时间：2012-06-28T07:32:41.717
> 
> 标签：javascript, jsp, date

我有一个 JSP，其中有一个表单。此表单中的一个字段是我接受日期的文本框。我有一个日历，用户可以从中选择一个日期。现在，当用户选择日期时，它会以“dd-mm-yyyy”格式出现在文本框中。（例如：2012 年 11 月 6 日）

提交表单后，它会立即更改为 long（例如：Mon Jun 11 00:00:00 IST 2012）现在，如果添加了更多搜索条件，则会由于未验证日期而引发错误。

我怎样才能防止这种情况发生？

下面给出的代码：

```
<script type="text/javascript">

function formDateValidate() {
    var flag = 0;
    var message = "";

    if (document.searchTemporaryPromotion.tempPromotionFromDate.value != ""
            || document.searchTemporaryPromotion.tempPromotionToDate.value != ""
            || document.searchTemporaryPromotion.softwarePartNumber.value != "") {
        document.searchTemporaryPromotion.resolve.value = "";
    }
    printMessageForDiv(new Array("dateLabel"), new Array(""));

    if (document.searchTemporaryPromotion.tempPromotionFromDate.value != "") {
        var result1 = validateDate(document.searchTemporaryPromotion.tempPromotionFromDate);

        if (result1 != "") {
            message = message
                    + "Check From Date: "
                    + result1
                    + " You entered: "
                    + document.searchTemporaryPromotion.tempPromotionFromDate.value
                    + ".<br>";
            printMessageForDiv(
                    new Array("dateLabel", "fromDateLabelField"),
                    new Array(
                            message,
                            "<font color='red'><b>"
                                    + '*<spring:message code="label.temporaryPromotion.fromDate" />:*'
                                    + "</b></font>"));
            ++flag;
        }
    }

    if (document.searchTemporaryPromotion.tempPromotionToDate.value != "") {
        var result2 = validateDate(document.searchTemporaryPromotion.tempPromotionToDate);

        if (result2 != "") {
            message = message
                    + "Check To Date: "
                    + result2
                    + " You entered: "
                    + document.searchTemporaryPromotion.tempPromotionToDate.value
                    + ".<br>";
            printMessageForDiv(
                    new Array("dateLabel", "toDateLabelField"),
                    new Array(
                            message,
                            "<font color='red'><b>"
                                    + '*<spring:message code="label.temporaryPromotion.toDate" />:*'
                                    + "</b></font>"));
            ++flag;
        }
    }

    if (flag != 0) {
        document.getElementById("entireViewForSearch").style.visibility = 'hidden';
        return false;
    } else {
        return true;
    }

}

</script>
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1">
<title>temporaryPromotion</title>
</head>
<body>
<span id="dateLabel" class="errordiv"></span>
<span id="muidFieldLabel" class="errordiv"> </span>
<form:form id="searchTemporaryPromotion"
    name="searchTemporaryPromotion"
    commandName="searchTemporaryPromotionCommand" onsubmit="return checkFormOnSearch(this);">       
    <form:hidden path="currentPage" />
    <form:hidden path="usePaging" />
    <form:hidden path="itemsPerPage" />
    <form:hidden path="action" />
    <div id="dialog" style="display: none"></div>
    <p>
        <i><font color="red">*Note: Date format should be
                dd-MM-yyyy.</font> </i>
    </p>
    <spring:hasBindErrors name="searchTemporaryPromotionCommand">
        <p>
            <b><form:errors cssStyle="color: red;"></form:errors> </b>
        </p>
    </spring:hasBindErrors>
    <table>
        <tr>
            <th colspan="2" style="text-align: left; padding-left: 5px">Search
                Criteria</th>
        </tr>

        <tr>
            <td><span id="fromDateLabelField"><spring:message
                        code="label.reporting.searchTemporaryPromotion.fromDate" />:</span> <form:input
                    path="tempPromotionFromDate" id="tempPromotionFromDate"
                    cssStyle="width: 70px;text-align: center" /> <input type="button"
                value="..."
                onclick="displayCalendar(document.getElementById('tempPromotionFromDate'),'dd-mm-yyyy',this);">
                &nbsp;&nbsp;
                <span id="toDateLabelField"> <spring:message
                        code="label.reporting.searchTemporaryPromotion.toDate" />:</span> <form:input
                    path="tempPromotionToDate" id="tempPromotionToDate"
                    cssStyle="width: 70px;text-align: center" /> <input type="button"
                value="..."
                onclick="displayCalendar(document.getElementById('tempPromotionToDate'),'dd-mm-yyyy',this);">
            </td>
        </tr>
        <tr>
            <td><spring:message
                    code="label.reporting.searchTemporaryPromotion.partNumber" />: <form:input
                    path="softwarePartNumber" id="softwarePartNumber"
                    name="softwarePartNumber" cssStyle="width: 215px;" /></td>
        </tr>

        <tr>
            <td><input type="submit" value="Search" onClick="javascript:onSearch();" onKeyPress="javascript:onSearch();"/>
                <input type="button" value="Clear" onClick="javascript:onClear(this);" /></td>
        </tr>
    </table>

</form:form> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-28T07:55:05.873

我找不到您的 validateDate() 函数，但我怀疑它会将输入的原始值更改为函数内生成的 JS 日期对象。

尝试在不更改输入值的情况下进行验证。

# c# - WPF Ribbon Control 能否在 Visual Studio 2008 中使用 c# 使用，以及如何使用

> ID：11240014
> 
> 赞同：0
> 
> 时间：2012-06-28T07:32:51.653
> 
> 标签：c#, wpf, visual-studio-2008

我想在 C# .Net 中的桌面应用程序中使用 WPF Ribbon 控件。是否可行，仅用于 UI 设计。谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-28T08:26:59.053

[WPF 功能区控件](http://msdn.microsoft.com/en-us/library/ff799534.aspx)需要 .NET 4.0 。VS 2008 不支持 .NET 4.0。所以你的问题的答案很简单：**不**。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-10-24T16:07:13.653

是的！.NET 3.5 版和 VS 2008 支持功能区。

看看[这个教程](http://www.uxpassion.com/blog/old-blog/how-to-use-add-ribbon-to-wpf-applications)。

注意：本教程的第 3 部分已过时。您不再使用 RibbonCommands，它现在像 WPF 中的其他所有内容一样使用 ICommands。

（另外关于如何获取安装程序的部分可能已经过时。但很容易获得。）

到目前为止，WPF 很棒！:)

# java - 关于struts 2中的验证-第一次验证ok next会产生错误的页面

> ID：11240018
> 
> 赞同：0
> 
> 时间：2012-06-28T07:32:58.033
> 
> 标签：java, servlets, struts2

在连续验证期间，我在 struts2 中的验证存在小问题。现在，如果第一次在表单上发现错误，则使用正确的 url，例如：

```
http://localhost:8080/Appname/Secure/AddAction.action 
```

但是，如果在第二次验证期间表单出现错误，则使用生成的 url（此 url 错误）

```
 http://localhost:8080/Appname/AddAction.action 
```

这就是我在 struts.xml 中所拥有的

```
 <action name="AddAction" class="controller.AddAction">
            <param name="dR"></param>
            <param name="dS"></param>
            <result name="input">/Secure/AddAction.jsp</result>
            <result name="error">/Error.jsp</result>
            <result name="success" type="redirect">
                <param name="location">/Secure/AddAction.jsp?msg=${msg}</param>
            </result>
        </action> 
```

关于我如何解决问题的任何建议

编辑：更新：所以在验证中我输入了以下代码

```
HttpServletRequest request = ServletActionContext.getRequest();
            String r = request.getRequestURI(); 
```

第一次：/Appname/Secure/AddAction.action

但下一次它：/Appname/AddAction.action

我怎样才能让它们两次都一样？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-28T10:56:46.953

哪个命名空间位于您的操作？默认还是安全？试试这个也许：

```
<action name="/Secure/AddAction" class="controller.AddAction">
            <param name="dR"></param>
            <param name="dS"></param>
            <result name="input">/Secure/AddAction.jsp</result>
            <result name="error">/Error.jsp</result>
            <result name="success" type="redirect">
                <param name="location">/Secure/AddAction.jsp?msg=${msg}</param>
            </result>
        </action> 
```

# java - 将输入集放入图谜题的数据结构中，然后解决它（python 或 java）

> ID：11240022
> 
> 赞同：2
> 
> 时间：2012-06-28T07:33:12.730
> 
> 标签：java, python, input, puzzle

我刚参加了一个编程竞赛题，我绝对把它搞砸了。我一开始就在阅读输入集时遇到了麻烦。这个问题基本上是这个谜题[http://codercharts.com/puzzle/evacuation-plan](http://codercharts.com/puzzle/evacuation-plan)的一个变体，但在第一行也有一个小时部分（比如疏散开始后 3 小时）。它读起来像这样

> 这个谜题是向所有在日本地震中受难的人们致敬。这个谜题的目标是，给定一个道路和位置网络，确定可以疏散的最大人数。
> 
> 人们必须从疏散点疏散到救援点。提供了道路列表和每小时可以载运的人数。
> 
> 输入规范 你的程序必须接受一个且只有一个命令行参数：输入文件。输入文件的格式如下：第一行包含 4 个整数 nrstn 是位置的数量（每个位置由一个从 0 到 n-1 的数字给出） r 是道路的数量 s 是要疏散的位置的数量from (疏散点) t 是必须将人员疏散到 (救援点) 的位置的数量 第二行包含 s 个整数，给出疏散点的位置 第三行包含 t 个整数，给出救援点的位置 r 跟随行包含道路定义。每条道路由 3 个整数 l1 l2 宽度定义，其中 l1 和 l2 是道路连接的位置（道路是单向的），宽度是每小时可以容纳在道路上的人数

现在看看样本输入集

> 5 5 1 2 3
> 
> 0
> 
> 3 4
> 
> 0 1 10
> 
> 0 2 5
> 
> 1 2 4
> 
> 1 3 5
> 
> 2 4 10

第一行中的 3 是附加组件，定义为自恢复开始以来的小时数，在本例中为 3。

现在我的解决方案是使用 Dijisktras 算法来找到每个救援和疏散节点之间的最短路径。现在我的问题从如何读取输入集开始。我阅读了python中的第一行并将值存储在变量中。但是后来我不知道如何存储节点之间的距离值以及使用什么 DS 以及如何输入它来表示 dijikstras 算法的标准实现。

所以我的问题是两个方面 1.) 我如何接受这些问题的输入？- 我最近在很多比赛中都遇到过这个问题，我希望我能得到一个简单的代码片段或java或python中的解释来读取数据输入集，这样我就可以将它作为图形输入到图形算法中像 dijikstra 和 floyd/warshall。上述问题的解决方案也将有所帮助。

2.) 如何解决这个难题？我的算法是：

> 1.  查找疏散点之间的最短路径（在上面的示例中，从 0 到 3 是 14）
> 2.  将其乘以小时数以获得最大的保存次数

此外，为输入集的变体给出的答案是 24，我不明白。有人也可以解释一下。

**更新：**

我在给定的问题链接中得到答案是 14 - 它似乎只是节点 0 和 3 之间的最短路径。但是对于 3 小时的部分，答案是 24

**更新**

我知道它是 24 - 它每小时都有一个完整的图形遍历，这就是我解决它的方法

```
Hour 1
Node 0 to Node 1 - 10 people
Node 0 to Node 2- 5 people
TotalRescueCount=0
Node 1=10
Node 2= 5

Hour 2
Node 1 to Node 3 = 5(Rescued)
Node 2 to Node 4 = 5(Rescued)
Node 0 to Node 1 = 10
Node 0 to Node 2 = 5 
Node 1 to Node 2 = 4
TotalRescueCount = 10
Node 1 = 10
Node 2= 5+4 = 9

Hour 3
Node 1 to Node 3 = 5(Rescued)
Node 2 to Node 4 = 5+4 = 9(Rescued)
TotalRescueCount = 9+5+10 = 24 
```

对于这种情况，对于多个疏散和救援点来说已经够难了，我到底要如何为此编写一个 pgm？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-28T07:42:34.210

一个好的通用方法是去像[give.code](http://giving.github.com)项目这样的地方并参与一些逻辑难题（比如现在那里的 phylo bot）。

这是一个有意义的大型项目。即使失败，您也会全神贯注，帮助世界，并通过渗透学习。这将是在采访中谈论的话题。

[您可以在无限搜索空间](http://infinitesearchspace.dyndns.org/)竞赛中找到其他更抽象的问题（旧recmath 竞赛的新精神家园）

我更喜欢这种自我提升的方法，而不是死记硬背地回答标准面试问题。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-29T12:16:46.107

这看起来像一个网络流量问题，您可以从不同算法的链接开始解决它

[http://en.wikipedia.org/wiki/Maximum_flow_problem](http://en.wikipedia.org/wiki/Maximum_flow_problem)

# android - 单个活动的两个启动器

> ID：11240023
> 
> 赞同：15
> 
> 时间：2012-06-28T07:33:17.170
> 
> 标签：android, android-intent, android-activity

是否可以有多个应用程序图标以不同的意图启动同一个活动？

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2012-06-28T12:12:14.890

启动活动时（通过启动器）无法提供额外的意图。

但是，您可以做的是使用`<activity-alias>`标签来定义将启动相同（目标）活动的其他应用程序图标。

**编辑：添加示例：**

此示例显示了一个真实的活动调用`MyRealActivity`和一个名为 的别名`Blahblah`。两者都有意图过滤器，使它们出现在可用应用程序列表中。它们具有不同的**标签**和不同的**图标**，因此它们对用户来说就像 2 个不同的应用程序。但是，它们都启动了相同的活动。请注意，没有 java 类`.Blahblah`，它只是一个占位符，并且必须是唯一的。

```
 <activity
            android:name=".MyRealActivity"
            android:label="@string/header_application"
            android:icon="@drawable/icon_myapp">
        <intent-filter>
            <action android:name="android.intent.action.MAIN"/>
            <category android:name="android.intent.category.LAUNCHER"/>
        </intent-filter>
    </activity>

    <activity-alias
            android:targetActivity=".MyRealActivity"
            android:name=".Blahblah"
            android:label="@string/header_blahblah"
            android:icon="@drawable/icon_blahblah">
        <intent-filter>
            <action android:name="android.intent.action.MAIN"/>
            <category android:name="android.intent.category.LAUNCHER"/>
        </intent-filter>
    </activity-alias> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-08-24T10:11:14.470

我不确定你为什么想要它。但是您可以在 homeScreen 上创建快捷方式，以打开具有不同附加功能的相同应用程序。

看看[**这个答案。**](https://stackoverflow.com/questions/6337431/android-create-shortcuts-on-the-home-screen) 而[**这个**](https://stackoverflow.com/questions/3217741/how-to-add-application-shortcuts-programitically-in-android)

# jquery - JQUERY-ui对话框x按钮功能

> ID：11240025
> 
> 赞同：4
> 
> 时间：2012-06-28T07:33:19.580
> 
> 标签：jquery, jquery-ui, jquery-ui-dialog

我正在使用[jquery-ui 对话框](http://jqueryui.com/demos/dialog/)。我的问题是在单击 x 按钮关闭对话框时，我还需要执行 cancel() 函数。

我怎样才能做到这一点？

```
var content = 
{
    autoOpen    : false,
    modal       : true,
    width       : 350,
    minHeight   : 50,
    height      : 350,
    position    : "center",
    resizable   : false,
    draggable   : false,
    close       : function () {$(".privacy_modal").prop("checked", false);},
    buttons: 
    {
        "Cancel": function cancel() 
        { 
            $(".privacy_modal").prop("checked", false); $(this).dialog("close"); 
        },
        "Accept": function accept() 
        {
            $(".privacy_modal").prop("checked", true); $(this).dialog("close"); 
        }
    }
}; 
```

![测试](../Images/4175144bd8739384071da2d8a449406b.png)

注意：使用 close 并不能解决我的问题，因为当我单击接受按钮时它会覆盖该功能

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-28T07:38:58.623

您可以使用第三方变量（bAccepts，默认为 False）和第三方方法。

当用户接受时：

*   将 bAccepts 设置为 True

当用户取消时：

*   将 bAccepts 设置为 False

当 onClose 被触发时，调用 doClose() 方法，它执行以下操作：

*   如果 bAccepts 为 True => 接受
*   其他 => 取消

这是一些未经测试的伪代码。请参阅[工作代码](http://jsfiddle.net/46ZNP/4/)。

```
var bAccepts = false;
var content = {
                    autoOpen    : false,
                    modal       : true,
                    width       : 350,
                    minHeight   : 50,
                    height      : 350,
                    position    : "center",
                    resizable   : false,
                    draggable   : false,
                    close       : function () { if (bAccepts) {...} else {...} },
                    buttons: {
                        "Cancel": function cancel() { bAccepts = false; $(this).dialog("close");},
                        "Accept": function accept() { bAccepts = true; $(this).dialog("close");}
             }
}; 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-28T07:44:31.320

**工作演示** [http://jsfiddle.net/Ea6Hm/1/](http://jsfiddle.net/Ea6Hm/1/)

您可以使用：[http ://docs.jquery.com/UI/Dialog#event-beforeClose](http://docs.jquery.com/UI/Dialog#event-beforeClose)

使用`beforeClose`您可以在对话框关闭之前调用您想要调用的任何函数。

希望这可以帮助，

**代码**

```
$(document).ready(function() {
    $('#theLink').click(function() {
        $("#forgot-dialog").dialog("open");
    });

    $("#forgot-dialog").dialog({
        modal: true,
        autoOpen: false,
        height: 255,
        width: 300,
        beforeClose: function() {
            alert("Do whatever before Close");
        },
        buttons: {
            "Retrieve": function() {
                document.forms["forgotform"].submit();
            },
            Cancel: function() {
                $(this).dialog("close");
            }
        },
    });

});​ 
```

# android - 如何在Facebook android sdk上的问题（投票）中添加选项

> ID：11240031
> 
> 赞同：2
> 
> 时间：2012-06-28T07:33:44.587
> 
> 标签：android, facebook, facebook-graph-api

我成功地在我的墙上发布了 questoin。但是我如何添加选项来提问？我使用下面的来源。( addOption() ) 并获得**“向问题添加选项时未指定页面 ID 和选项文本”**

需要什么参数？或者我怎样才能得到这个例子？不是 PHP 或 Javascript。在 Android SDK 中。

公共无效添加选项（字符串选项）{

```
 if(facebook.isSessionValid())
    {
        AsyncTask<String, Boolean, Void> task = new AsyncTask<String,Boolean, Void>()
                {
            @Override
            protected Void doInBackground(String... params)
            {
                Boolean result = false;
                Bundle parameters = new Bundle();
                String response = null;

                parameters.putString("options", params[0]);

                try
                {
                    response = facebook.request("318018398288233/options", parameters, "POST");

                    result = true;
                    Log.i(TAG, response);
                }
                catch(IOException e)
                {
                    result = false;
                    Log.e(TAG, e.getMessage());
                } 

                publishProgress(result);

                return null;
            }
            @Override
            protected void onProgressUpdate(Boolean... values)
            {
                super.onProgressUpdate(values);

                Boolean result = (Boolean) values[0];

                if(result == null)
                {
                    Toast.makeText(BaseApplication.getContext(), "페이스북 담벼락 글쓰기 요청을 실패하였습니다", Toast.LENGTH_SHORT).show();
                }
                else if(result)
                {
                    Toast.makeText(BaseApplication.getContext(), "페이스북 담벼락 글을 작성하였습니다", Toast.LENGTH_SHORT).show();
                    //  String response = (String) values[1];
                    //  MessageUtil.alert(BaseApplication.getTopActivity(), response);
                }

            }

                };

                task.execute(option);
    }
    else
    {
        login();
    }
} 
```

# c# - RuntimeHelpers.GetHashCode 有什么作用

> ID：11240036
> 
> 赞同：25
> 
> 时间：2012-06-28T07:33:58.160
> 
> 标签：c#, .net, clr, base-class-library

该`RuntimeHelpers.GetHashCode(object)`方法允许基于对象的身份生成哈希码。MSDN[状态](http://msdn.microsoft.com/en-us/library/11tbk3h9.aspx)：

> RuntimeHelpers.GetHashCode 方法始终以非虚拟方式调用 Object.GetHashCode 方法，即使对象的类型已覆盖 Object.GetHashCode 方法。

```
[MethodImpl(MethodImplOptions.InternalCall)]
[SecuritySafeCritical]
public static extern int GetHashCode(object o); 
```

但是，当`Object.GetHashCode()`使用 Reflector (.NET 4.0) 检查方法时，我们将看到以下代码：

```
public virtual int GetHashCode()
{
    return RuntimeHelpers.GetHashCode(this);
} 
```

这让我相信 MSDN 文档是错误的，因为`Object.GetHashCode`从内部调用`RuntimeHelpers.GetHashCode(object)`会导致堆栈溢出。

那么它的实际行为是什么`RuntimeHelpers.GetHashCode(object)`以及它是如何工作的呢？它是如何计算哈希的？

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2012-06-28T07:39:43.447

我认为 MSDN 文档试图描述**行为**，而不是实现。关键点：`RuntimeHelpers`返回您将获得的**默认**实现`object.GetHashCode()` *未被*覆盖。

例如，如果您想构建一个*引用相等*查找，这非常有用，即使对于已覆盖`Equals`and的类型也是如此`GetHashCode`。我在我维护的序列化程序中执行此操作，使用`RuntimeHelpers.GetHashCode()`and `Object.ReferenceEquals`。

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2012-06-28T07:40:46.280

关键是`object.GetHashCode()`可以覆盖 - 并且经常是，例如通过`string`. 这意味着您无法找到*默认*实现`object.GetHashCode()`返回的“身份哈希码”。

*如果您想实现一个只*考虑对象身份的相等比较器（例如，对于 a `HashSet`），这可能很有用。

 *例如：

```
public class IdentityComparer<T> : IEqualityComparer<T> where T : class
{
    public bool Equals(T x, T y)
    {
        // Just for clarity...
        return object.ReferenceEquals(x, y);
    }

    public int GetHashCode(T x)
    {
        // The nullity check may be unnecessary due to a similar check in
        // RuntimeHelpers.GetHashCode, but it's not documented
        return x == null ? 0 : RuntimeHelpers.GetHashCode(x);
    }
} 
```

然后：

```
string x = "hello";
string y = new StringBuilder("h").Append("ello").ToString();
Console.WriteLine(x == y); // True (overloaded ==)
Console.WriteLine(x.GetHashCode() == y.GetHashCode()); // True (overridden)

IdentityComparer<string> comparer = new IdentityComparer<string>();
Console.WriteLine(comparer.Equals(x, y)); // False - not identity

// Very probably false; not absolutely guaranteed (as ever, collisions
// are possible)
Console.WriteLine(comparer.GetHashCode(x) == comparer.GetHashCode(y)); 
```

编辑：只是为了澄清一点......

> 那么 RuntimeHelpers.GetHashCode(object) 的实际行为是什么，它是如何工作的？

*观察到*的行为是从返回`RuntimeHelpers.GetHashCode(object)`的值与从非虚拟调用返回的值相同`Object.GetHashCode()`。（你不能轻易地用 C# 编写那个非虚拟调用。）

至于它是如何*工作*的 - 这是一个实现细节:) IMO 以哪种方式发生事情并不重要（什么叫什么）。重要的是记录在案的行为，这是正确的。哎呀，不同版本的 mscorlib 可以以不同的方式实现这一点——从用户的角度来看，这根本不重要。如果没有反编译，您应该无法区分。

如果`Object.GetHashCode`以`RuntimeHelpers.GetHashCode()`.

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-06-28T07:39:18.153

奇怪，当我通过 Reflector 查看 System.Object.GetHashCode 时，我看到了

```
public virtual int GetHashCode()
{
    return InternalGetHashCode(this);
} 
```

对于运行时助手：

```
public static int GetHashCode(object o)
{
    return object.InternalGetHashCode(o);
} 
```

也许这是一个框架差异？我正在查看 2.0 程序集。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-28T07:40:17.777

从您自己的问题来看，看起来`RuntimeHelpers.GetHashCode(Object)`确实是 non-overridden 的实现`Object.GetHashCode()`。*

# java - 如何将 httpservlet 添加到 jforum？

> ID：11240039
> 
> 赞同：0
> 
> 时间：2012-06-28T07:34:32.637
> 
> 标签：java

我基于Jforum开发一个网站，我的网页需要一个json返回。所以我创建了一个 servlet 来实现这一点。我的问题是把这个代码（）放在哪里——net.jfourm.util.mine 是一个好地方吗？以及如何修改它以使其适合 jfourm。谢谢。

```
 package net.jforum.util.mine;

    import java.io.IOException;
    import java.io.PrintWriter;

    import javax.servlet.ServletException;
    import javax.servlet.http.HttpServlet;
    import javax.servlet.http.HttpServletRequest;
    import javax.servlet.http.HttpServletResponse;

    import java.util.ArrayList;
    import java.util.List;

    import net.sf.json.JSONArray;

    public class JsonServlet extends HttpServlet
    {
        private static final long serialVersionUID = 1L;

        public JsonServlet()
        {
            super();
        }

        public void init() throws ServletException
        {   
        }

        public void doPost(HttpServletRequest request, HttpServletResponse response) throws ServletException, IOException
        {
            int node = Integer.parseInt(request.getParameter("node"));

            response.setContentType("application/json");
            response.setCharacterEncoding("UTF-8");
            PrintWriter out = response.getWriter();

            JSONArray ja = new JSONArray();     
            ja = this.getMenu(node);
            out.println(ja.toString());     
        }

        protected void doGet(HttpServletRequest request,HttpServletResponse response )throws ServletException,IOException
        {
            doPost(request,response);
        }

        public JSONArray getMenu(int node) 
        { 
            List<MenuBean> list = new ArrayList<MenuBean>();

            MenuBean m[][] = new MenuBean[4][3];
            MenuBean l0[] = {new MenuBean("1", "service", false, "folder"), new MenuBean("2", "system", false, "folder"), new MenuBean("3", "statistics", false, "folder")};
            MenuBean l1[] = {new MenuBean("21000", "aaaa", true, "file", "test/show/arg1/arg2.page"), new MenuBean("22000", "aaaa", true, "file"), new MenuBean("23000", "hhhh", true, "file")};    
            MenuBean l2[] = {new MenuBean("11000", "cccc", true, "file"), new MenuBean("12000", "eeee", true, "file"), new MenuBean("13000", "gggg", true, "file")};
            MenuBean l3[] = {new MenuBean("31000", "bbbb", true, "file"), new MenuBean("32000", "dddd", true, "file")};

            m[0] = l0;
            m[1] = l1;
            m[2] = l2;
            m[3] = l3;      

            for(int i = 0; i < m[node].length; i++){
                 list.add(m[node][i]);
            }

            JSONArray ja = JSONArray.fromObject(list);      

            return ja;
        }    
    } 
```

# c# - WPF MVVM 检索数据网格选定的行

> ID：11240045
> 
> 赞同：9
> 
> 时间：2012-06-28T07:34:54.947
> 
> 标签：c#, wpf, mvvm, mvvm-light, wpfdatagrid

我使用我在互联网上找到的这段代码实现了一个带有复选框的 DataGrid。

```
<my:DataGrid.RowHeaderTemplate>
  <DataTemplate>
    <Grid>
      <CheckBox IsChecked="{Binding Path=IsSelected, Mode=TwoWay, RelativeSource={RelativeSource FindAncestor, AncestorType={x:Type my:DataGridRow}}}" />
    </Grid>
  </DataTemplate>
</my:DataGrid.RowHeaderTemplate> 
```

但是，我怎样才能获得选定的行？我正在使用 WPF MVVM。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-06-28T08:44:56.740

由于您使用的是 MVVM 模式，因此您可以像这样声明 ViewMode：

```
public class MyViewModel 
{
    public ObservableCollection<Prototype> Items { ... }
    public Prototype SelectedItem SelectedItem { ... }
} 
```

之后，在您的数据网格中，您可以通过以下方式声明绑定：

```
<DataGrid ItemSource="{Binding Items}" SelectedItem="{Binding SelectedItem, Mode=TwoWay}"... /> 
```

在您的代码中，您可以使用“SelectedItem”属性来获取当前选定的数据网格行。否则，如果您的意思是“检查”行，您可以查询您的可观察集合：

```
var selectedRows = ViewModel.Items.Where(i => i.IsSelected); 
```

# ruby-on-rails - RailsRestore 使用 Session_ID 的会话数据

> ID：11240046
> 
> 赞同：1
> 
> 时间：2012-06-28T07:34:54.970
> 
> 标签：ruby-on-rails, session-cookies

在结帐过程中，所有数据都存储在会话变量中，直到付款成功，在该阶段数据被保存到数据库中。通过我们与新支付网关的最新集成，客户被定向到网关，然后被定向返回。

然而问题是当用户从支付网关被重定向回来时，一个新的会话被创建并且所有的数据都“丢失”了。如果我在将客户端发送到支付网关之前拥有客户端的 session_id，并通过该过程传递此 session_id，那么无论如何我可以使用此 session_id 恢复先前的会话。

这是：Application.config.session_store :cookie_store, :key => '

提前致谢

# visual-studio-2010 - 是否有任何 VS 插件可以使用编辑日期/版本自动更新 XML Doc-Tags？

> ID：11240047
> 
> 赞同：0
> 
> 时间：2012-06-28T07:34:56.890
> 
> 标签：visual-studio-2010, visual-studio, plugins, ide, add-in

当我更改我的代码（方法、属性、类）时，我通常在 XML 标记中手动编写日期和程序集/文件版本以获取文档注释，以便记住我上次编辑该段代码的时间（以及哪个版本） .

在我自己的项目中，我使用标签“版本”，在其他项目中，我将编辑日期和程序集版本放在标签“备注”中。我对我的解决方案的所有函数、类、方法执行此操作：当然，当我在同一个文件中有更多函数并编辑 Function1 时，我必须在编辑该函数时注意日期/版本，如果我编辑 Function2 ，Function1 的标签不必更新。

我想知道是否有一个 VS 2010 插件可以自动化（部分地）这个过程。

# android - 需要在我的 android 屏幕的多个选项卡中设置 ListView

> ID：11240054
> 
> 赞同：1
> 
> 时间：2012-06-28T07:35:28.027
> 
> 标签：android, listview, android-tabhost

嗨，我需要在我的 android 屏幕中使用多个选项卡，这是我通过 TabHost View 通过引用获得的

[在android中，如何将标签放在顶部包含图像的视图中？](https://stackoverflow.com/questions/6389909/in-android-how-can-i-put-tabs-in-a-view-containing-an-image-on-top)

但是我需要在每个选项卡的布局中设置 ListViews ......所以任何人都可以帮我一些代码 plzz ..

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-28T07:48:36.067

每个选项卡布局都只是一个与选项卡主机结合的活动，所以只需像在活动中那样做一些事情，另外，如果你想用选项卡显示列表，那么你必须使用 TabGroupactivity 类。

# excel - 检查 Excel 工作簿是否从另一个 Office 2010 应用程序打开

> ID：11240058
> 
> 赞同：2
> 
> 时间：2012-06-28T07:35:51.433
> 
> 标签：excel, file, vba, outlook

这从上一个[问题](https://stackoverflow.com/questions/11208805/object-trouble-accessing-excel-from-outlook)继续。我尝试了建议的修复来检查 Excel 文件是否从 Outlook 宏 (Office 2010) 在本地打开。

```
Public Sub UpdateFileIndex(ByVal FullFilePath As String, ByVal DocNo As String)
    Dim xlApp As Excel.Application
    Dim xlBook As Excel.Workbook
    Dim xlSheet As Excel.WorkSheet

    On Error Resume Next
    Set xlApp = GetObject(FullFilePath).Application
    Debug.Print "Error = " & Err

    If Err.Number = 0 Then ' Workbook is open locally
        ' Do stuff
    ElseIf Err.Number = 429 Then ' Workbook is not open locally
        ' Do different stuff
    End If

    ' Do a bunch of other stuff
End Sub 
```

`FullFilePath`现在对于（例如`"C:\Data\Data.xlsx"`）给出的打开或关闭文件：

*   `Set xlApp = GetObject(FullFilePath).Application`

无论哪种方式都给我0错误。（即，如果文件未打开，它会打开文件。）

*   `Set xlApp = GetObject(Dir(FullFilePath)).Application`

两种情况都给我-214722120。（自动化错误）

*   `Set xlApp = GetObject(, "Excel.Application")`

打开时给我 0，不打开时给我 429。见下文。

*   `Set xlApp = GetObject(Dir(FullFilePath), "Excel.Application")`

两种情况都给我432。（自动化操作期间未找到文件名或类名）

*   `Set xlApp = GetObject(FullFilePath, "Excel.Application")`

两种情况都给我432。

因此，唯一可行的情况是最初建议的修复程序（请参见顶部的链接），除非它在本地打开的第一个 Excel 实例中，否则无法找到文件，这可能并非总是如此（即它可能会在一秒钟内打开）实例）。

最终我想检查文件是否在网络上打开，如果它是检查它是否在本地打开。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-28T11:37:32.997

如果您打开了多个 Excel 实例，那么这就是我的建议。

**逻辑**

1.  检查您的工作簿是否打开。如果没有打开，那就打开它。
2.  如果它是打开的，那么它可以在任何 Excel 实例中。
3.  找到 Excel 实例并与相关工作簿绑定。

`GetObject`不幸的是，除非您关闭该 Excel 实例，否则每次都会返回相同的实例。也没有可靠的方法让它循环遍历所有 Excel 实例。谈到可靠性，我会将您的注意力转向 API。我们将使用的 3 个 API 是`FindWindowEx`，`GetDesktopWindow`和`AccessibleObjectFromWindow&`

请参阅此示例（**在 EXCEL 2010 中尝试和测试**）

```
Option Explicit

Private Declare Function FindWindowEx Lib "user32" Alias "FindWindowExA" _
(ByVal hWnd1 As Long, ByVal hWnd2 As Long, ByVal lpsz1 As String, _
ByVal lpsz2 As String) As Long

Private Declare Function GetDesktopWindow Lib "user32" () As Long

Private Declare Function AccessibleObjectFromWindow& Lib "oleacc" _
(ByVal hwnd&, ByVal dwId&, riid As GUID, xlWB As Object)

Private Const OBJID_NATIVEOM = &HFFFFFFF0

Private Type GUID
    lData1 As Long
    iData2 As Integer
    iData3 As Integer
    aBData4(0 To 7) As Byte
End Type

Sub Sample()
    Dim Ret
    Dim oXLApp As Object, wb As Object
    Dim sPath As String, sFileName As String, SFile As String, filewithoutExt As String
    Dim IDispatch As GUID

    sPath = "C:\Users\Chris\Desktop\"
    sFileName = "Data.xlsx": filewithoutExt = "Data"
    SFile = sPath & sFileName

    Ret = IsWorkBookOpen(SFile)

    '~~> If file is open
    If Ret = True Then
        Dim dsktpHwnd As Long, hwnd As Long, mWnd As Long, cWnd As Long

        SetIDispatch IDispatch

        dsktpHwnd = GetDesktopWindow

        hwnd = FindWindowEx(dsktpHwnd, 0&, "XLMAIN", vbNullString)

        mWnd = FindWindowEx(hwnd, 0&, "XLDESK", vbNullString)

        While mWnd <> 0 And cWnd = 0
            cWnd = FindWindowEx(mWnd, 0&, "EXCEL7", filewithoutExt)
            hwnd = FindWindowEx(dsktpHwnd, hwnd, "XLMAIN", vbNullString)
            mWnd = FindWindowEx(hwnd, 0&, "XLDESK", vbNullString)
        Wend

        '~~> We got the handle of the Excel instance which has the file
        If cWnd > 0 Then
            '~~> Bind with the Instance
            Call AccessibleObjectFromWindow(cWnd, OBJID_NATIVEOM, IDispatch, wb)
            '~~> Work with the file
            With wb.Application.Workbooks(sFileName)
                '
                '~~> Rest of the code
                '
            End With
        End If

    '~~> If file is not open
    Else
        On Error Resume Next
        Set oXLApp = GetObject(, "Excel.Application")

        '~~> If not found then create new instance
        If Err.Number <> 0 Then
            Set oXLApp = CreateObject("Excel.Application")
        End If
        Err.Clear
        On Error GoTo 0

        Set wb = oXLApp.Workbooks.Open(SFile)
        '
        '~~> Rest of the code
        '
    End If
End Sub

Private Sub SetIDispatch(ByRef ID As GUID)
    With ID
        .lData1 = &H20400
        .iData2 = &H0
        .iData3 = &H0
        .aBData4(0) = &HC0
        .aBData4(1) = &H0
        .aBData4(2) = &H0
        .aBData4(3) = &H0
        .aBData4(4) = &H0
        .aBData4(5) = &H0
        .aBData4(6) = &H0
        .aBData4(7) = &H46
    End With
End Sub

'~~> Function to check if file is open
Function IsWorkBookOpen(FileName As String)
    Dim ff As Long, ErrNo As Long

    On Error Resume Next
    ff = FreeFile()
    Open FileName For Input Lock Read As #ff
    Close ff
    ErrNo = Err
    On Error GoTo 0

    Select Case ErrNo
    Case 0:    IsWorkBookOpen = False
    Case 70:   IsWorkBookOpen = True
    Case Else: Error ErrNo
    End Select
End Function 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-28T08:03:32.720

要查看 Excel 文件是否打开，您可以使用此功能。

```
Sub Sample()
    Dim Ret
    Dim sFile As String

    sFile = "C:\Users\Chris\Desktop\Data.xlsx"
    Ret = IsWorkBookOpen(sFile)

    If Ret = True Then
        MsgBox "File is Open"
    Else
        MsgBox "File is not Open"
    End If
End Sub

'~~> Function to check if file is open
Function IsWorkBookOpen(FileName As String)
    Dim ff As Long, ErrNo As Long

    On Error Resume Next
    ff = FreeFile()
    Open FileName For Input Lock Read As #ff
    Close ff
    ErrNo = Err
    On Error GoTo 0

    Select Case ErrNo
    Case 0:    IsWorkBookOpen = False
    Case 70:   IsWorkBookOpen = True
    Case Else: Error ErrNo
    End Select
End Function 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-04-15T17:53:32.730

以下仅需要工作簿文件名，而不是完整路径：

```
Sub IsOpen()
 With CreateObject("Word.Application")
    If .Tasks.exists("Workbook.xlsb") Then MsgBox "The Workbook is open"
    .Quit
 End With
End Sub 
```

即使工作簿在不同的 Excel 实例中打开，这也会成功。

`Word.Application`（是的，即使您对 Excel 感兴趣，您也会使用对象......）

如果您想通过完全限定路径检查文件，请使用[此答案中](https://stackoverflow.com/a/22309698/2662901)的函数。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-09-10T09:26:17.590

您可以检查文件是否打开并获取对象是否打开

```
Public Shared Function isFileAlreadyOpen(ByVal xlFileName As String) As Boolean
    Return CBool(Not getIfBookOpened(xlFileName) Is Nothing)
End Function

Public Shared Function getIfBookOpened(ByVal xlFileName As String) As Excel.Workbook
    Dim wbBook As Excel.Workbook
    Dim xlProcs() As Process = Process.GetProcessesByName("EXCEL")
    If xlProcs.Count > 0 Then
        Dim xlApp As Excel.Application = CType(System.Runtime.InteropServices.Marshal.GetActiveObject("Excel.Application"), Excel.Application)
        For Each wbBook In xlApp.Workbooks
            If wbBook.FullName.ToUpper = xlFileName.ToUpper Then
                Return wbBook
                Exit For
            End If
        Next
    End If
    Return Nothing
End Function 
```

或者

```
Public Shared Function getOrOpenBook(ByVal xlFileName As String) As Excel.Workbook
    Return System.Runtime.InteropServices.Marshal.BindToMoniker(xlFileName)
End Function 
```

# c# - WS asmx调用类库函数时HttpContext.Current为null

> ID：11240060
> 
> 赞同：0
> 
> 时间：2012-06-28T07:35:53.307
> 
> 标签：c#, asp.net, web-services, asmx, session-state

我有一个带有函数 A 的类库，它使用`HttpContext.Current.Session` 我还有一个带有 WebMethods 的 asmx 类，其中一个调用类库中的函数 A。当 WS 方法调用函数 A 时，它会因错误而失败：

```
Null reference object 
```

为`HttpContext.Current`空！我通过添加属性在 Web 方法中启用了会话：

```
[WebMethod(EnableSession = true)] 
```

但我不断收到错误。如果我从与 WS 函数相同的项目中的一个简单函数调用函数 A，它可以正常工作。仅从 WS asmx 函数失败。我需要做什么？很重要，谢谢！！！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-04T07:29:18.377

使用**Session["BLABLA"]**代替`HttpContext.Current.Session`

和

```
[WebMethod(EnableSession = true)] attr. 
```

我的代码适用于此。

祝你好运。

# php - 解析错误：语法错误，第 1 行 /home/designea/public_html/blog/blog_end/inc/comments.inc.php 中的意外 T_VARIABLE

> ID：11240061
> 
> 赞同：0
> 
> 时间：2012-06-28T07:36:09.017
> 
> 标签：php

我收到此错误“解析错误：语法错误，第 1 行 /home/designea/public_html/blog/blog_end/inc/comments.inc.php 中的意外 T_VARIABLE”有人可以帮助我..这是我的代码

```
<?php 
function get_gravatar( $email = $_POST['email1'], $s = 50, $d = 'mm', $r = 'g', $img = false, $atts = array() ) {
        $url = 'http://www.gravatar.com/avatar/';
        $url .= md5( strtolower( trim( $email ) ) );
        $url .= "?s=$s&d=$d&r=$r";
        if ( $img ) {
            $url = '<img src="' . $url . '"';
            foreach ( $atts as $key => $val )
                $url .= ' ' . $key . '="' . $val . '"';
            $url .= ' />';
        }
        return $url;
    }
?> 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-28T07:38:13.720

你不能有一个不是文字的默认参数值，所以这是非法的：

```
$email = $_POST['email1'] 
```

一个典型的解决方法是写

```
function get_gravatar( $email = null ) {
    if ($email === null) {
        $email = $_POST['email1'];
    }
} 
```

但是，`$_POST`最好避免将函数的行为与此相结合。在你的鞋子里，我会完全删除默认值。

# iphone - 在 Root 视图的子视图中启用 url 链接

> ID：11240064
> 
> 赞同：-3
> 
> 时间：2012-06-28T07:36:32.013
> 
> 标签：iphone, ios, ios4

![在此处输入图像描述](../Images/b230904193f1d5ad5d6b09153bcab9de.png)嗨，在我的应用程序中，当我尝试在 textview 中添加链接时，它运行良好。但是当我将 IB 的子视图添加到根视图时，它无法识别 url 链接。如何解决这个问题请提供任何帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-28T07:39:56.347

在定义 UItextView 时声明以下属性以检测链接。

> textview.dataDetectorTypes = UIDataDetectorTypeAll;

# python - 尝试让 python irc bot 向频道发送消息时出错

> ID：11240067
> 
> 赞同：0
> 
> 时间：2012-06-28T07:36:33.557
> 
> 标签：python, irc, bots

我有一个超级简单的 IRC 机器人，它基本上连接到一个频道，当有人说“你好机器人”时，它应该在频道中说“你好”然后退出。但是，尽管我能够让它退出，但机器人并没有打招呼。

它向频道发送“Hello”的代码如下：

```
s.send('PRIVMSG #test :%s\r\n' %s (MESSAGE)) 
```

我收到的错误如下：

```
Traceback (most recent call last):
File "defaultbot.py", line 40, in <module>
s.send('PRIVMSG #test :%s\r\n' %s (MESSAGE))
TypeError: '_socketobject' object is not callable 
```

我使用的脚本很短，我希望直截了当：

[http://pastebin.com/iXwP3YJF](http://pastebin.com/iXwP3YJF)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-01T21:02:42.523

好吧，我认为这是因为您将 s 用于套接字，将 %s 用于字符串。

尝试这样做：

```
s.send('PRIVMSG #test :'+MESSAGE+'\r\n') 
```

（我也在 python 中为 IRC 机器人创建了一个模块，它还没有完成，但它的功能（不确定是否允许在这里告诉这个，如果我不是那么删除这个:)）[https://github.com/FaceHunter/ IRC 机器人](https://github.com/FaceHunter/IRCbot)）

# windows-phone-7 - 全景控制平移问题

> ID：11240073
> 
> 赞同：0
> 
> 时间：2012-06-28T07:37:02.723
> 
> 标签：windows-phone-7

我有一个使用全景控件的应用程序。此控件中有三个 PanoramaItem，一个 PanoramaItem 包含一个 WrapPanel，其中包含在点击导航到其他页面时的按钮。而其他两个 PanoramaItem 具有模板化列表框，因此在点击 ListBoxItem 时会发生导航。

现在，在 PanoramItems 上平移时会出现问题。有时，当我尝试平移到另一个全景项目时，单击所选全景项目的按钮/列表框项目。这个问题不会出现在模拟器上，它只会出现在设备上。

这个问题有什么解决办法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-11T20:00:39.673

使用`Tap`事件而不是`Click`在您的列表中。这应该有很大帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-28T08:26:30.903

我不确定，但我的观点是，这主要是点击后鼠标或手指移动的速度，这会导致平移手势或点击。试图阻止点击发生以使按钮不响应可能会影响项目/按钮选择（如果这是用户想要的）

同样从设计的角度来看，您可以在全景项目标题和其中的列表框之间留出一些空间。这为用户提供了更多的触摸和平移空间。大多数情况下，在尝试与那里的项目交互时，您会使用项目标题进行平移并触摸下部

# web-services - JAX-RS / REST / 保存图像

> ID：11240086
> 
> 赞同：0
> 
> 时间：2012-06-28T07:38:14.693
> 
> 标签：web-services, file, jax-rs

对于 Web 服务，我收到更多必须在服务器上注册的图片。我不确定要使用哪种方法，我认为将参数声明为：

```
@FormParam("photos") List<File> photos 
```

另外，我不知道如何保存以这种方式收到的文件。我看到很多从路径创建文件的例子，但不是从现有文件。

你可以帮帮我吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-28T16:17:12.987

你可能会做类似的事情：

```
 FileOutputStream fos = new FileOutputStream("image.jpg");
    try {
        fos.write(someByteArray);
    }
    finally {
        fos.close();
    } 
```

取自这里：[如何将字节数组作为图像文件存储在磁盘上？](https://stackoverflow.com/questions/2138913/how-to-store-a-byte-array-as-an-image-file-on-disk)

# c# - 在特定日期触发电子邮件 #2

> ID：11240088
> 
> 赞同：2
> 
> 时间：2012-06-28T07:38:25.613
> 
> 标签：c#, sql-server

我已经提出申请......可以在指定日期有活动数量，所以我想在活动时间到达时编码 tat，以便参与者自动获取有关活动的信息......所以我想向所有参与者发送电子邮件一天前。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-29T01:19:34.963

如果你想在你的应用程序代码中保持调度，一个很棒的库是 Quartz.NET。在这里查看：

[http://quartznet.sourceforge.net/](http://quartznet.sourceforge.net/)

您可以使用各种触发器创建作业，并且作业代码可用于处理电子邮件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-28T07:47:56.720

忘记编写服务等，只需使用[Windows 任务计划程序](http://msdn.microsoft.com/en-us/library/windows/desktop/aa383614%28v=vs.85%29.aspx)并将其设置为每天在所需时间运行您的应用程序。它绝对适合这种工作。

# java - Java UDP 发送/接收小例子不起作用

> ID：11240090
> 
> 赞同：0
> 
> 时间：2012-06-28T07:38:31.810
> 
> 标签：java, sockets, udp

我编写了一个小型 UDP 客户端，它将数据包发送到某个本地地址，另一个小型 UDP 客户端将接收它们并在控制台上打印它的包含。他们目前不工作，我不知道为什么。

这是发送代码：

```
import java.io.*;
import java.net.*;

class ClienteUDPtx {

  static final String HOST = "192.168.1.201";
  static final int PUERTO=20001;

  /**
    UDP Client which will send some UDP packets
    to local network address 192.168.1.201 on port 20001
  */
  public ClienteUDPtx( ) {
    try{
      int i = 0; 

      String[] ip_parts = HOST.split("."); 
      byte[] ip_num = {0, 0, 0, 0}; 
      for (String string : ip_parts) { 
         ip_num[i++] = Byte.valueOf(string); 
      } 

      InetAddress ip = InetAddress.getByAddress(ip_num); 
          DatagramSocket skCliente = new DatagramSocket(PUERTO, ip);
      DatagramPacket packet;
      File testFile = new File("test.txt");
      BufferedReader input =  new BufferedReader(new FileReader(testFile));
      String line;

      while((line=input.readLine())!=null) {
        System.out.println("Sending: " + line);
    byte message[] = line.getBytes();
    packet = new DatagramPacket(message, message.length, ip, PUERTO); 
        skCliente.send(packet);
    Thread.currentThread().sleep(1000);
      }
      line = "END";
      System.out.println("Sending: " + line);
      byte message[] = line.getBytes();
      packet = new DatagramPacket(message, message.length, ip, PUERTO); 
      skCliente.send(packet);

      input.close();
      skCliente.close();
    } catch( Exception e ) {
      System.out.println( e.getMessage() );
    }
  }

  public static void main( String[] arg ) {
    new ClienteUDPtx();
  }

} 
```

这是接收代码：

```
import java.io.*;
import java.net.*;

class ClienteUDPrx {

  static final String HOST = "192.168.1.101";
  static final int PUERTO=20001;

  /**
    UDP Client which will listen for incoming UDP packets
    from local network address 192.168.1.101 on port 20001
    and will print its content on console
  */

  public ClienteUDPrx( ) {
    try{
      int i = 0; 

      String[] ip_parts = HOST.split("."); 
      byte[] ip_num = {0, 0, 0, 0}; 
      for (String string : ip_parts) { 
         ip_num[i++] = Byte.valueOf(string); 
      } 

      InetAddress ip = InetAddress.getByAddress(ip_num); 
      DatagramSocket skCliente = new DatagramSocket(PUERTO, ip);
      byte[] buffer = new byte[2048];
      DatagramPacket packet = new DatagramPacket(buffer, buffer.length);

      while(true){
        // Wait to receive a datagram
        skCliente.receive(packet);
        String lineaLeida = new String(buffer, 0, packet.getLength());
        System.out.println(packet.getAddress().getHostName() + ": "+ lineaLeida);
        if(lineaLeida.equals("END")) break; 
      }
      skCliente.close();
      System.out.println( "Transmission ended" );
    } catch( Exception e ) {
      System.out.println( e.getMessage() );
    }
  }

  public static void main( String[] arg ) {
    new ClienteUDPrx();
  }

} 
```

任何想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-24T09:08:27.583

你这里有一些错误。

首先是创建 InetAddress。而不是试图分离出字节并从数组中重新创建它，您可以这样做：

```
InetAddress.getByName(HOST); 
```

它刚刚失败，因为当您拆分 HOST 时，您将其拆分为正则表达式并使用“。” 它具有特殊含义，因此实际上并不是基于“。”来拆分字符串。特点。

实际上将其拆分为“。” 你会这样做：

```
HOST.split("\\.") 
```

但随后您的字节解析失败，因为字节在 -128 到 +127 的范围内（不是 0 到 255）。

无论如何，这可能让您感到困惑的原因是您的错误打印。

这一行：

```
System.out.println( e.getMessage() ); 
```

正在打印异常错误（在这种情况下只是“0”-“ArrayIndexOutOfBoundsException：0”）。

相反，您应该这样做：

```
e.printStackTrace(); 
```

以获取有关问题所在的更多信息。

除了这些，我看不到任何明显的问题。

我还要指出，UDP*确实会*检查消息的完整性。它不保证交付或交付顺序，因此您有时可能会丢失数据包或使它们不按顺序排列，但它确实有一个校验和，其中包括消息的标头 + 有效负载。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-28T07:55:50.963

`udp`不保证数据包会**在`other side`**.

> Thread.currentThread().sleep(1000); // 如果要接收消息就很糟糕了

如果你真的想在另一端接收消息，你应该实现以下逻辑：

1.  A向B发送消息；
2.  如果 B 收到来自 A 的消息，则发送消息“我收到消息，您可以关闭连接”
3.  A 关闭连接

**这不是检查消息的完整性！**

可能的解决方案是在消息之前发送消息哈希并检查是否相等。

# sed - 使用 awk sed 进行文件列操作

> ID：11240093
> 
> 赞同：0
> 
> 时间：2012-06-28T07:38:38.190
> 
> 标签：sed, awk

我有 2 个文件要组合如下。文件1：

```
AAA 
1234 
BBB
2341 
```

文件2：

```
AAA
9876
67 89 01
BBB
4567
23 45 23 
```

需要最终文件

```
AAA 1234 9876 67 89 01
BBB 2341 4567 23 45 23 
```

我如何在 awk 或 sed 或两者中实现这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-28T08:25:45.297

纯awk：

```
/^[A-Z]/ {
    token=$1
}
/^[0-9]/{
    for (i=1; i<=NF; i++) {
        C[token]=C[token] " " $i
    }
}
END {
    for (i in C) {
        print i, C[i]
    }
} 
```

输出：

```
$ awk -f f.awk f1 f2
AAA  1234 9876 67 89 01
BBB  2341 4567 23 45 23 
```

可以缩短为 3 线：

```
/^[A-Z]/ { token=$1 }
/^[0-9]/ { C[token]=C[token] " " $0 }
END { for (i in C) { print i, C[i] } } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-28T08:08:56.393

你可以试试这个（也许它是一个大的解决方案，但它有效）：

> a.awk：

```
function print_stuff( start_string, end_string, file2 )
{
    printf "%s ", start_string

    getline 

    while ( $0 != end_string )
    {
        for ( i = 1; i < NF + 1; i++ )
        {
            printf "%s ", $i    
        }

        if ( getline <= 0 )
        {
            break    
        }
    }

    while ( $0 != start_string )
    {
        if ( ( getline < file2 ) <= 0 )
        {
            break    
        }
    }

    getline < file2

    while ( $0 != end_string )
    {
        for ( i = 1; i < NF + 1; i++ )
        {
            printf "%s ", $i    
        }

        if ( ( getline < file2 ) <= 0 )
        {
            break    
        }
    }

    printf "\n"

    close( file2 )
}

BEGIN { file2 = "file2"; aaa = "AAA"; bbb = "BBB" }

aaa { print_stuff( aaa, bbb, file2 ) }
bbb { print_stuff( bbb, "",  file2 ) } 
```

> 运行：awk -f a.awk file1

输出：

```
AAA 1234 9876 67 89 01 
BBB 2341 4567 23 45 23 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-28T08:23:31.007

变换.awk

```
{key=($1 ~/[A-Z]+/)}

key==1 {
if(NR>1) {printf "\n"}
printf "%s",$1}

key==0 {printf " %s",$0}

END {printf "\n"} 
```

这将在不假设固定数量的条目的情况下转换文件，而是将键确认为由第一行中的正则表达式给出的特定模式。在这种情况下，一段大写字母。

```
join <(awk -F transform.awk file1) <(awk -F transform.awk file2) 
```

# silverlight - 刽子手形象概念

> ID：11240094
> 
> 赞同：-1
> 
> 时间：2012-06-28T07:38:42.613
> 
> 标签：silverlight, flash, html, svg

我刚刚实现了一个小小的 Web-Hangman，用户可以在其中玩流行的游戏。

现在我想知道，我该如何设计刽子手本身的形象。

该页面不应在游戏中重新加载。

我想到了这些技术：

*   图片（通过JS更改，流量很大）
*   SVG-Graphics（一旦加载，通过 JS 操作）
*   Flash（坏知识）
*   Silverlight（坏知识）
*   HTML 5（反向兼容性差）

最佳做法是什么？还有其他方法吗？

谢谢您的意见！

**编辑**：我正在使用 PHP 和 JavaScript 对网站的其余部分进行编程。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-28T08:10:59.720

我倾向于使用 SVG 或 HTML5 创建它。浏览器正在改进，移动设备正在兴起。

SVG：

```
<!-- HTML -->
<svg>
    <polygon id="item1"/>
    <polyline id="item2"/>
</svg> 
```

然后使用 JavaScript 切换项目的可见性。

使用 HTML5 的替代方案可能涉及画布绘图，这似乎也很容易。你可以做一组这样的函数：

```
// JS
function draw1() { // Draw something
}
function draw2() { // Draw something
} 
```

结合：

```
// JS
var errorCount = 0;
function onFalseGuess() {
    errorCount++;
    window["draw" + errorCount]();
} 
```

希望这有帮助:-)祝你好运！

# html - 如何在 UL 和 LI 中垂直分隔我的链接？

> ID：11240104
> 
> 赞同：0
> 
> 时间：2012-06-28T07:39:30.077
> 
> 标签：html, css

我有以下 HTML：

```
<ul style="float: right; margin-left: 5px;" id="status-infos">

   <li><a id="A"class="button sprite-arrow-circle" ></a></li>
   <li>
      <a id = "B" class="button">
         <img width="16" height="16" src="/Images/control-180.png">
      </a>
   </li>
</ul> 
```

CSS：

```
.sprite-arrow-circle{ background-position: 0 0; width: 16px; height: 16px; }
.button { display: inline-block; }
.button, .form legend, .legend, .mini-menu {
   border: 1px solid white;
   border-radius: 0.417em 0.417em 0.417em 0.417em;
   box-shadow: 0 0 3px rgba(0, 0, 0, 0.5);
   font-weight: normal;
   line-height: 1.333em;
   outline: 0 none;
   padding: 0.167em 0.5em 0.25em;
   text-decoration: none;
   text-shadow: none;
} 
a.button {
    background-color: transparent;
    background-image: url(/Images/sprite.png);
    background-position: 0 -396px;
    background-repeat: no-repeat;
    height: 16px;
    width: 16px;
} 
```

id=A 链接上面没有空间，下面有很大的空间。

id=B 链接在中心垂直间隔显示，上下各有一个空格。这看起来很完美。

谁能解释可能发生的事情。似乎只有带有图像的链接以正确的方式垂直间隔。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-28T07:48:57.997

您必须使用 CSS3 的`background-size`属性来实现缩放`background-image`，CSS2 只是剪辑背景，这就是精灵的工作方式。

# css - 特定的模态背景定制

> ID：11240108
> 
> 赞同：3
> 
> 时间：2012-06-28T07:39:39.750
> 
> 标签：css, twitter-bootstrap, modal-dialog

我可以通过将特定模式的 id 设置为选择器来更改页面中许多模式之一的 CSS。

例如：

```
.modal {
    top: 0px;
    margin-top: 240px;
    ...
} 
```

环境

```
#my_modal {
    top: 0px;
    margin-top: 240px;
    ...
} 
```

我的问题：

如何更改仅`#my_modal`对应**modal-backdrop**的 css ？

```
 $('.modal').addClass('my_personal_stuff'); 
```

工作，而

```
 $('.modal-backdrop').addClass('my_personal_stuff'); 
```

不起作用

为什么会有这样的行为？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2015-12-08T12:25:22.870

> 如何仅为#my_modal 的相应模态背景更改css？

```
// Add an extra class to the modal backdrop to make it customizable
$('.modal--custom').on('show.bs.modal', function (e) {
    setTimeout(function(){
        $('.modal-backdrop').addClass('modal-backdrop--custom');
    });
}); 
```

这对我有用。看看这个[jsFiddle](https://jsfiddle.net/f3xoctkn/4/ "自定义模态背景")。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-28T13:08:02.220

您需要绑定模态的显示和隐藏事件并将一个类添加到 .modal-backdrop div。

Jsfiddle[在这里](http://jsfiddle.net/oswaldoacauan/ZbsnJ/4/)。

Javascript

```
function haveBackdrop() {
    if ($('.modal-backdrop').length > 0) {
        $('.modal-backdrop').addClass('my-modal-backdrop');
        clearTimeout(mBackdrop);
        return true;
    }
    return false;
}
var mBackdrop;

$('#myModal').on('show', function() {
    mBackdrop = setTimeout("haveBackdrop()", 100);
}); 
```

CSS

```
.my-modal-backdrop { /* your css backdrop modifications */ } 
```

# c - 获得 SIGSEGV 以获得较大的 n 值（高于 500000）

> ID：11240111
> 
> 赞同：0
> 
> 时间：2012-06-28T07:39:47.407
> 
> 标签：c

```
#include<stdio.h>
int l;
int check(int m[][l],int a,int r,int c,int e)
{
    int t,i,j;
    for(i=0;i<c;i++)
    {
        if(m[a][i]==e)
            return 1;
    }
    for(i=0;i<c;i++)
    {
        for(j=0;j<r;j++)
        {
            if(a!=j)
            {
                if(m[a][i]==m[j][i]&&m[a][i]!=-1)
                {
                    m[a][i]=-1;
                    return check(m,j,r,c,e);
                }
            }
        }
    }
    return 0;
}
int main()
{
    int t;
    int i,j;
    scanf("%d",&t);
    for(t;t>0;t--)
    {
        l=0;
        int n,e,a,b,x,y;
        scanf("%d%d%d%d",&n,&e,&a,&b);
        int m[e][n];
        l=n;
        for(i=0;i<e;i++)
        {
            for(j=0;j<n;j++)
            {
                m[i][j]=-1;
            }
        }
        for(i=0;i<e;i++)
        {
            scanf("%d%d",&x,&y);
            for(j=0;j<((n-y)/x)+1;j++)
            {
                m[i][y+(j*x)]=y+(j*x);
            }
        }
        int v,g=0;
        for(i=0;i<e;i++)
        {
            for(j=0;j<n;j++)
            {
                if(m[i][j]==a)
                {
                    v=check(m,i,e,n,b);
                    g++;
                    break;
                }
            }
        }
        if(v==1)
        {
            printf("It is possible to move the furniture.\n");
        }
        else if(v==0||g==0)
            printf("The furniture cannot be moved.\n");
    }
    return 0;
} 
```

> “我得到了 n<=50000 值的正确答案，当我给出更多值时，我得到了运行时错误”“我已经为“http://www.spoj.pl/problems/SCRAPER/”编写了一个代码“..当我在ideone中运行它时，我得到的答案是“运行时错误”以获得更多'n'值

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-28T07:46:04.000

您正在尝试分配比堆栈上可用的内存更多的内存，这会导致**堆栈溢出**。`malloc`通常使用,`calloc`或动态分配像这样的巨大数组要好得多`realloc`。

检查这个问题：[C: Array initialization segfaults based on size and call to printf()](https://stackoverflow.com/q/10983084/1168156)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-28T07:53:45.903

您的数组可能存储在堆栈上，并且堆栈通常比堆小。尝试动态分配您的数组（`malloc`, `calloc`, `free`）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-28T08:00:13.300

当你写“int m[e][n]”时，数组的实际空间是1！数组的空间是在编译时定义的，当'e''n'都为0时，你必须使用**宏**作为数组的长度，例如m[1000][1000]。并且您需要确保 e<1000。

# osgi - 什么是严格的类加载？

> ID：11240112
> 
> 赞同：0
> 
> 时间：2012-06-28T07:39:48.720
> 
> 标签：osgi, classloader

我正在学习osgi框架。它说 osgi 在严格的类加载环境中工作。我无法得到什么是严格的类加载。请帮助我无法理解这个概念

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-28T15:58:22.767

严格的类加载意味着模块（包）必须明确指定它需要什么。在 OSGi 中，这是使用 Manifest 标头完成的。Import-Package 列出捆绑包需要的包及其版本范围，Export-Package 列出捆绑包提供的包及其版本。在 OSGi 运行时中，每个包都有一个类加载器，它根据导出和导入连接包。

但是，您不应该手动定义这些标题。有一个名为 bnd 的好工具，或者在 maven 中来自 felix 的 maven bundle 插件，它可以为您完成大部分工作。在本教程中，您将了解这在实践中是如何工作的： [http ://www.liquid-reality.de/x/DIBZ](http://www.liquid-reality.de/x/DIBZ)

你会看到我实际上并没有在那里手动定义太多。因此，将代码构建到 meta-inf/Manifest 中，看看它做了什么。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-28T07:47:27.167

严格的类加载环境意味着需要指定类的适当头文件。例如类路径和导入包

# php - 尝试执行类的方法没有意义的显示

> ID：11240114
> 
> 赞同：0
> 
> 时间：2012-06-28T07:39:51.100
> 
> 标签：php, zend-framework

我对控制器中出现意外符号“f”感到很困惑。控制器的代码是这样的：

```
public function viewmongotestAction()
{
    $this->_helper->layout()->disableLayout();
    $this->_helper->viewRenderer->setNoRender(true);

            //exit();  //if I uncomment this I don't get output f

    $defaultItemsPerPage = Model_SubscriberMongo::getDefaultItemsPerPage();             
} 
```

它们根本不应该是任何输出，但会显示 I 'f'：

该方法的代码是：

```
public static function getDefaultItemsPerPage()
{
    return 25;
} 
```

类的定义：

```
class Model_SubscriberMongo extends Shanty_Mongo_Document 
```

它是一个在 mongodb 中表示文档的类。你能告诉我为什么控制器的输出中有 f 吗？现在对我来说似乎很困惑。谢谢你的帮助。

# algorithm - 随机写马尔可夫模型效率

> ID：11240118
> 
> 赞同：0
> 
> 时间：2012-06-28T07:40:11.087
> 
> 标签：algorithm, data-structures

这是我的实现但是，分析文本文件时有点慢，有人有更好的想法或更好的数据结构来实现随机写入吗？我没有使用 STL 库，所以不用担心语法。而不是使用push_back，这里的vector使用.add

randomInteger 将在范围之间生成随机整数

如果可能的话，我想制作 2000 个字符；

我认为最慢的部分是逐字符读取文件？

```
void generateText(int order, string initSeed, string filename){
    Map<string , Vector<char> > model;
    char ch;
    string key;
    ifstream input(filename.c_str());
    for(int i = 0; i < order; i++){
        input.get(ch);
        key+=ch;
    }
    while(input.get(ch)){
        model[key].add(ch);
        key = key.substr(1,key.length()-1) + ch;
    }
    string result;
    string seed = initSeed;
    for(int i = 0;i<2000;i++){
        if (model[seed].size() >0) {
            ch = model[seed][randomInteger(0, model[seed].size()-1)];
            cout << ch;
            seed = seed.substr(1,seed.length()-1) + ch;
        }
        else
            return;
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-28T07:48:38.607

您需要确定它花费的时间太长。（这段代码如何在普通笔记本电脑上运行不到一秒？）

如果是，您需要配置文件。

例如，一个可能的候选者是生成随机数的成本......

你只会通过分析来反驳我；）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-28T08:45:24.667

我认为它有点慢，因为它在分析阶段会创建很多临时字符串。

```
for(int i = 0; i < order; i++){
    input.get(ch);
    key+=ch; // key = key + ch, at least one new string created
}
while(input.get(ch)){
    model[key].add(ch); // key copied to hash table
    key = key.substr(1,key.length()-1) + ch; // a couple of temp strings created
} 
```

你可以这样做：

```
char key[order + 1]; // pseudo code, won't work because order is not constant
key[order] = 0; /* NUL terminate */
for (int i = 0; i < order; i++) {
    input.get(key[i]);
}
while (!(input.eof())) {
    for (int j = 0; j < order - 1; k++) { 
        key[j] = key[j + 1];
    }
    input.get(key[order]);
    model[key].add(ch);
} 
```

这里实际创建的唯一字符串是最终作为哈希表中的键的字符串。密钥在一个简单的字符数组中旋转，避免了字符串临时。

# c++ - 解析器匹配 Boost Spirit 中的任何标记

> ID：11240122
> 
> 赞同：3
> 
> 时间：2012-06-28T07:40:25.130
> 
> 标签：c++, boost-spirit

我有一个解析器，它由具有许多不同标记的词法分析器提供。我想编写一个解析器来解析除一个之外的任何令牌。boost::spirit 文档为没有词法分析器的情况提供了示例：

```
confix("/*", "*/")[*(char_ - "*/")]  // C style comment

confix("//", eol)[*(char_ - eol)]    // C++ style comment 
```

在第二个示例中，`char_`解析器解析任何输入，因此`(char_ - eol)`解析除行尾之外的任何内容。

我想达到同样的效果，但不知道如何创建一个接受任何***输入令牌***的解析器。当然，我可以在一个解析器中列出我所有的标记作为选项，并将这个用作“任何解析器”。

但是，这很容易出错，因为我必须记住将每个新标记添加到此解析器。

# objective-c - 如何在 Restkit 中使用块响应的示例？

> ID：11240125
> 
> 赞同：0
> 
> 时间：2012-06-28T07:40:34.727
> 
> 标签：objective-c, ios, objective-c-blocks, restkit

而不是集群：

```
- (void)objectLoader:(RKObjectLoader *)objectLoader didLoadObjects:(NSArray *)objects
{            
    if (objectLoader.method == RKRequestMethodGET) {
        if ([objectLoader.resourcePath isEqualToString:@"/blah"]) {
            // ...
        }
    } else if (objectLoader.method == RKRequestMethodPUT) {
        if ([objectLoader.resourcePath hasSuffix:@"/blahblah"]) {
            // ...
        }        
    } else if (objectLoader.method == RKRequestMethodPOST) {
        if ([objectLoader.resourcePath isEqualToString:@"/blahblahblah"]) {
            // ...
        }
    }
} 
```

我更喜欢一种`block`方法，特别是对于没有任何对象映射的简单请求。是否有任何文档或示例说明如何使用块响应？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-28T08:03:53.117

我认为最新（0.10.1）版本的 RestKit 不支持此配置。

有`- (void)loadObjectsAtResourcePath:(NSString *)resourcePath usingBlock:(RKObjectLoaderBlock)block`选择器，但是调用该块以允许您配置`ObjectLoader`.

您也可以使用`userData`属性来区分多个请求，我在[此答案](https://stackoverflow.com/questions/8387253/restkit-distinguish-multiple-requests-in-didloadresponse/8387649#8387649)中提供了更多详细信息。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-07T22:57:23.300

使用 0.10.1，您可以使用块进行 POST、GET 等调用，[查看这个 SO 答案](https://stackoverflow.com/a/11379294/630996)

# javascript - 使用 Ajax 请求（无 PHP）使用 HTML、javascript 和 jQuery 将图像上传到 Amazon s3

> ID：11240127
> 
> 赞同：64
> 
> 时间：2012-06-28T07:40:38.203
> 
> 标签：javascript, html, jquery, amazon-s3

我正在用 HTML、javascript 和 jQuery 开发一个网站。我想在 ajax 请求中将图像上传到 amazon s3 服务器。没有这样的 SDK 可以将 s3 集成到 Javascript 中。有一个 PHP SDK 可用，但它对我没有用。任何人都可以在javascript中提供解决方案吗？

* * *

## 回答 #1

> 赞同：125
> 
> 时间：2012-09-11T21:45:51.793

[根据这篇文章](http://bencoe.tumblr.com/post/30685403088/browser-side-amazon-s3-uploads-using-cors)，让 Amazon S3 和 CORS 使用 XMLHTTPObject 处理 js 和 html5 。

1：CORS 仅适用于正确的 URL“ [http://localhost](http://localhost) ”。（文件///xyz 会让你发疯）

2：确保您正确编译了 POLICY 和 Secret - 这是我的策略，这是您可以获取项目以帮助您开始使用[Signature 和 Policy](http://www.tweetegy.com/2012/01/save-an-image-file-directly-to-s3-from-a-web-browser-using-html5-and-backbone-js/)的链接- 永远不要使用您的 Secret 发布此 JS！

```
POLICY_JSON = { "expiration": "2020-12-01T12:00:00.000Z",
            "conditions": [
            {"bucket": this.get('bucket')},
            ["starts-with", "$key", ""],
            {"acl": this.get('acl')},                           
            ["starts-with", "$Content-Type", ""],
            ["content-length-range", 0, 524288000]
            ]
          };

    var secret = this.get('AWSSecretKeyId');
    var policyBase64 = Base64.encode(JSON.stringify(POLICY_JSON));
    console.log ( policyBase64 )

    var signature = b64_hmac_sha1(secret, policyBase64);
    b64_hmac_sha1(secret, policyBase64);
    console.log( signature); 
```

这是JS代码

```
function uploadFile() {

    var file = document.getElementById('file').files[0];
    var fd = new FormData();

    var key = "events/" + (new Date).getTime() + '-' + file.name;

    fd.append('key', key);
    fd.append('acl', 'public-read'); 
    fd.append('Content-Type', file.type);      
    fd.append('AWSAccessKeyId', 'YOUR ACCESS KEY');
    fd.append('policy', 'YOUR POLICY')
    fd.append('signature','YOUR SIGNATURE');

    fd.append("file",file);

    var xhr = new XMLHttpRequest();

    xhr.upload.addEventListener("progress", uploadProgress, false);
    xhr.addEventListener("load", uploadComplete, false);
    xhr.addEventListener("error", uploadFailed, false);
    xhr.addEventListener("abort", uploadCanceled, false);

    xhr.open('POST', 'https://<yourbucket>.s3.amazonaws.com/', true); //MUST BE LAST LINE BEFORE YOU SEND 

    xhr.send(fd);
  } 
```

辅助函数

```
function uploadProgress(evt) {
    if (evt.lengthComputable) {
      var percentComplete = Math.round(evt.loaded * 100 / evt.total);
      document.getElementById('progressNumber').innerHTML = percentComplete.toString() + '%';
    }
    else {
      document.getElementById('progressNumber').innerHTML = 'unable to compute';
    }
  }

  function uploadComplete(evt) {
    /* This event is raised when the server send back a response */
    alert("Done - " + evt.target.responseText );
  }

  function uploadFailed(evt) {
    alert("There was an error attempting to upload the file." + evt);
  }

  function uploadCanceled(evt) {
    alert("The upload has been canceled by the user or the browser dropped the connection.");
  } 
```

然后是 HTML 表单

```
 <form id="form1" enctype="multipart/form-data" method="post">
<div class="row">
  <label for="file">Select a File to Upload</label><br />
  <input type="file" name="file" id="file" onchange="fileSelected()"/>
</div>
<div id="fileName"></div>
<div id="fileSize"></div>
<div id="fileType"></div>
<div class="row">
  <input type="button" onclick="uploadFile()" value="Upload" />
</div>
<div id="progressNumber"></div> 
```

快乐 CORS ！

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-09-01T17:26:25.887

亚马逊只是允许跨域资源共享，理论上它允许您的用户直接上传到 S3，而不使用您的服务器（和 PHP）作为代理。

这是文档-> [http://docs.amazonwebservices.com/AmazonS3/latest/dev/cors.html](http://docs.amazonwebservices.com/AmazonS3/latest/dev/cors.html)

他们很好地告诉您如何在 S3 存储桶上启用它，但 iv 没有找到有关如何从客户端获取数据到存储桶的实际 javascript 示例。

发布 CORS.js 的第一人是传奇 xD

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-10-17T07:51:52.903

这是使用 CORS 和 javascript 在 Amazon S3 上上传可恢复文件的示例[http://cotag.github.com/Condominios/](http://cotag.github.com/Condominios/)

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2015-11-02T10:56:17.000

您可以通过 AWS S3 Cognito 执行此操作，请在此处尝试此链接：

[http://docs.aws.amazon.com/AWSJavaScriptSDK/guide/browser-examples.html#Amazon_S3](http://docs.aws.amazon.com/AWSJavaScriptSDK/guide/browser-examples.html#Amazon_S3)

**也试试这个代码**

只需更改 Region、IdentityPoolId 和您的存储桶名称

```
<!DOCTYPE html>
<html>

<head>
    <title>AWS S3 File Upload</title>
    <script src="https://sdk.amazonaws.com/js/aws-sdk-2.1.12.min.js"></script>
</head>

<body>
    <input type="file" id="file-chooser" />
    <button id="upload-button">Upload to S3</button>
    <div id="results"></div>
    <script type="text/javascript">
    AWS.config.region = 'your-region'; // 1\. Enter your region
    AWS.config.credentials = new AWS.CognitoIdentityCredentials({
        IdentityPoolId: 'your-IdentityPoolId' // 2\. Enter your identity pool
    });
    AWS.config.credentials.get(function(err) {
        if (err) alert(err);
        console.log(AWS.config.credentials);
    });
    var bucketName = 'your-bucket'; // Enter your bucket name
    var bucket = new AWS.S3({
        params: {
            Bucket: bucketName
        }
    });
    var fileChooser = document.getElementById('file-chooser');
    var button = document.getElementById('upload-button');
    var results = document.getElementById('results');
    button.addEventListener('click', function() {
        var file = fileChooser.files[0];
        if (file) {
            results.innerHTML = '';
            var objKey = 'testing/' + file.name;
            var params = {
                Key: objKey,
                ContentType: file.type,
                Body: file,
                ACL: 'public-read'
            };
            bucket.putObject(params, function(err, data) {
                if (err) {
                    results.innerHTML = 'ERROR: ' + err;
                } else {
                    listObjs(); // this function will list all the files which has been uploaded
                    //here you can also add your code to update your database(MySQL, firebase whatever you are using)
                }
            });
        } else {
            results.innerHTML = 'Nothing to upload.';
        }
    }, false);
    function listObjs() {
        var prefix = 'testing';
        bucket.listObjects({
            Prefix: prefix
        }, function(err, data) {
            if (err) {
                results.innerHTML = 'ERROR: ' + err;
            } else {
                var objKeys = "";
                data.Contents.forEach(function(obj) {
                    objKeys += obj.Key + "<br>";
                });
                results.innerHTML = objKeys;
            }
        });
    }
    </script>
</body>

</html> 
```

如果需要，您可以使用[github 链接](https://github.com/rishiv3/s3-multiple-file-upload-angularJS)

我希望它会帮助别人:)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2016-11-26T05:42:53.917

对于身份验证部分，

没有 php 代码，没有服务器，没有大的 JS 代码，除了下面；

您可以使用 AWS Cognito IdentityPoolId 作为凭证​​，代码更少，但您需要创建 AWS Cognito IdetityPool 并附加策略，只需 s3 写入访问权限。

```
     var IdentityPoolId = 'us-east-1:1.......';

     AWS.config.update({
        凭证：新 AWS.CognitoIdentityCredentials({
            身份池 ID：身份池 ID
        })
     });

```

# django - Django 用户身份验证中的密码更改函数

> ID：11240134
> 
> 赞同：1
> 
> 时间：2012-06-28T07:41:02.277
> 
> 标签：django, django-forms

我想允许用户更改密码，我正在使用 django-in-built password_change 函数。我想使用默认的模板名称和密码更改表单，但我想将 post_change_redirect 参数更改为特定于我的网站。

我如何在保持其余部分不变的情况下更改它？

来自 Django 文档：

```
password_change(request[, template_name, post_change_redirect, password_change_form])
Allows a user to change their password.

URL name: password_change

Optional arguments:

template_name: The full name of a template to use for displaying the password change form. Defaults to registration/password_change_form.html if not supplied.
post_change_redirect: The URL to redirect to after a successful password change.
password_change_form: A custom "change password" form which must accept a user keyword argument. The form is responsible for actually changing the user's password. Defaults to PasswordChangeForm.
Template context: 
```

form：密码更改表单（参见上面的 password_change_form）。

需要一些指导。谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-28T09:29:56.633

您想定义一个视图，它将提供修改后的`password_change`视图：

```
from django.contrib.auth.views import password_change

def change_password(request):
    return password_change(request, post_change_redirect='%my_post_change_url%') 
```

就这样。

您必须记住，如果您未登录，它会将您重定向到默认登录页面，并且您必须编写密码更改页面模板（`registration/password_change_form.html`默认命名）

# jquery - 难住了。滚动到锚点适用于桌面，但不适用于 iPhone

> ID：11240145
> 
> 赞同：2
> 
> 时间：2012-06-28T07:41:27.657
> 
> 标签：jquery, iphone, ios, scroll

好的。我有一个固定位置标题，其中包含一个导航，其中三个绝对定位的 li 元素在内联显示。这些标签旨在触发以下脚本并滚动到适当的锚点：

```
 <script>
 function goToByScroll(id){
        $('body, html').animate({scrollTop: $(id).position().top},'slow');
 }

 $mainNavLiA.click(function(e) {
       e.preventDefault();
       var $parent = $(this).parent();
       if ($parent.hasClass("active")) {
           return;
       };

       $mainNavLi.removeClass("active");
       $parent.addClass("active");

       var $destination = $(this).attr("href");

       goToByScroll($destination);
  });

  </script>
  <style>

#header-container {
  width: 100%;
  height: 20%;
  min-height: 96px;
  max-height: 130px;
  position: fixed;
  z-index: 2000;
  top: 0;
  left: 0;
}
#header-container header {
  width: 100%;
  height: 100%;
  margin: auto;
}
#header-container header nav {
  width: 100%;
  height: 67px;
}
#header-container header nav ul {
  height: 67px;
  width: 100%;
}
#header-container header nav ul li {
  display: inline-block;
  opacity: .75;
 }
#header-container header nav ul li.home {
  width: 27.5625%;
  height: 63px;
  position: absolute;
  left: 0;
  right: 73.125%;
}
#header-container header nav ul li.home a {
  display: block;
  width: 100%;
  height: 100%;
}
#header-container header nav ul li.work {
  width: 28.6875%;
  height: 63px;
  position: absolute;
  left: 29.4375%;
  right: 41.5%;
}
#header-container header nav ul li.work a {
  display: block;
  width: 100%;
  height: 100%;
}
#header-container header nav ul li.contact {
  width: 40.8%;
  height: 63px;
  position: absolute;
  left: 59.6875%;
  right: 0;
}
#header-container header nav ul li.contact a {
  display: block;
  width: 100%;
  height: 100%;
}

</style> 
```

在我的桌面上，脚本运行良好。但是，当我在 iphone 上测试时，脚本仅在页面位于最顶部时触发。在这一点上，我被难住了。

附带说明一下，是否有任何地方具有类似于 IOS 的 Safari 和 Chrome 检查器的“检查元素”功能？

谢谢！

# ruby-on-rails - Rails 3 + 每当 Gem + Rake 日志记录问题

> ID：11240146
> 
> 赞同：0
> 
> 时间：2012-06-28T07:41:41.427
> 
> 标签：ruby-on-rails, cron, rake, whenever, engineyard

该应用程序正在引擎场上运行。我需要从Whenever运行的脚本中记录一些数据。这是它的样子：

时间表.rb：

```
every 1.minute do 
  rake 'my_tasks:task1 my_tasks:task2', :output => 'log/my_tasks.log'
end 
```

`task1`运行其中包含以下行的脚本（仅用于测试目的）：

```
... 

log('test')

...

def self.log(string)
  logfile = '/var/log/engineyard/apps/my_app/test_log.log'
  File.open(logfile, 'a') { |log| log.puts(string << "\n\n") }
end 
```

问题是，无论我尝试什么，都没有创建任何日志（my_tasks.log、test_log.log）。当我`bundle exec rake my_tasks:task1`从控制台运行时，它成功创建了 test_log.log 文件并记录了消息。有什么问题？它与Engine Yard的工作方式有关吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-28T08:15:41.363

这可能与Engine Yard的工作方式有关。我对 Engine Yard 本身并不熟悉，但它与 Heroku 的服务类似，而且我知道要发送一些内容以登录 Heroku，您必须使用`stdout`or `stderr`。

[有关 Heroku 的更多详细信息，请参见此处](https://devcenter.heroku.com/articles/logging)，并查看 Engine Yard 是否同样适用*（请记住，这不允许您拥有单独的日志文件，它只是将记录的行与其他记录的行放在同一个日志文件中）*。

# url - 包含在 JMeter 中用于测试 ASP.NET MVC 网站的 URL 模式

> ID：11240152
> 
> 赞同：0
> 
> 时间：2012-06-28T07:41:56.957
> 
> 标签：url, asp.net-mvc-2, jmeter

我正在尝试在我在 IIS 上发布的 ASP.NET MVC 网站上使用 JMeter 执行负载测试。

我的问题是..我对应该包含或排除什么 URL 模式感到困惑..目前，URL 对我来说无关紧要，所以我尝试在 URL 中使用 '.* ' 来包含并且在 URL 中不排除任何内容.. 但是 JMeter只记录一个 jpg url...如果我在排除中指定 '.*\.jpg '，它不会记录任何内容。我还在 include 中尝试了 '.*\.aspx' 而在 exclude 中没有尝试，但这似乎也不起作用:(

这是 MVC 特有的吗？我不太确定它如何处理 url ..（我第一次做这一切..）。否则，我在其他服务器（如 google、apache.jmeter.test 等）上记录步骤没有任何问题，在这些服务器上，我当前的 JMeter 设置有正常的 html 页面：

一个名为 'Users' 的线程组有一个
Recording Controller
HTTP 请求，默认指向 localhost:9080

带有指向 localhost:9080的 HTTP 代理服务器的工作台

我的连接设置也在 localhost:9080 上。
我正在我公司的代理服务器后面成功运行 JMeter。

谢谢你的帮助 ：）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-29T07:15:07.313

后来意识到这与 URL 本身无关。我的浏览器设置可能有问题。我使用的是 IE8..当我切换到 Firefox 时，对设置进行了更细粒度的控制..录制之前的这些设置对我有用：

将手动代理配置设置为 localhost,8081。
选中“将此代理用于所有协议” 将
“无代理”字段留空
否“自动代理配置”
单击“确定”。

在此之后，如果您在 JMeter 代理服务器尚未启动的情况下尝试在 IIS 上访问您的站点，它不会，表示连接被拒绝。

在此之后，转到 JMeter 并单击开始按钮进行记录。再次尝试访问该站点。应该会出现 :) 更多细节：
不需要在 HTTP 请求默认值中指定端口号。只需在 HTTP 代理服务器中指定它（在我的情况下为 8081）。为了正确保存会话信息，您必须使用 cookie 管理器（最好将其保留在顶部）。在记录时，如果您勾选了“捕获 HTTP”复选框，则在每个 HTTP 请求下都会获得一个 HTTP 标头管理器头”在录制之前在 HTTP 代理服务器中。复制此并将其添加为您的线程组下的子项。

希望这可以帮助像我一样挣扎的人:)

# c# - 如何按 Del 键从 Collection 中删除 ComboBox 项？

> ID：11240154
> 
> 赞同：0
> 
> 时间：2012-06-28T07:42:09.290
> 
> 标签：c#, winforms, combobox

我正在尝试从 ComboBox 集合中删除选定的项目：
我写了一个 buttonClick：

```
cb01.Items.Remove(cb01.SelectedItem);. 
```

这会删除该项目，但下次我打开表单时 - 该项目再次出现。请帮忙。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-28T07:47:22.383

为您的 ComboBox添加`KeyDown`事件，然后

```
private void cb01_KeyDown(object sender, KeyEventArgs e)
{
    if (e.KeyCode == Keys.Delete)
    {
      if(cb01.SelectedIndex != -1)
         cb01.Items.Remove(cb01.SelectedItem);
    }
} 
```

以上将从组合框中删除项目，但如果您在再次加载应用程序时在设计时间添加项目，您可以再次看到所有项目。

检查你的`InitializeComponent()`方法。你可以看到类似下面的东西。

```
 this.cb01.Items.AddRange(new object[] {
            "item1",
            "item2",
            "item13"}); 
```

当您再次加载应用程序时，它将调用`InitializeComponent`并调用上述方法来添加项目。

为了避免这个问题。您可以使用绑定数据源。例如，您可以从数据库中获取项目。当您删除时，您可以将其从数据库中删除。下次加载应用程序时，它只显示数据库中的项目。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-28T07:43:16.863

怎么样

```
if(cb01.SelectedItem != null)
    cb01.Items.Remove(cb01.SelectedItem); 
```

为什么我做检查？

因为在最后一行你说

```
cb01.Items.RemoveAt(cb01.SelectedIndex); // error: Value of '-1' is not valid... 
```

-1 是未选择任何项目时组合的索引。所以我先检查了选定的项目。如果找到将进入 if 语句。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-28T07:53:06.310

替换`comboBox1`为您的组合框的名称并绑定其`KeyDown`事件

```
void comboBox1_KeyDown(object sender, KeyEventArgs e)
{
    int currentItem = comboBox1.SelectedIndex;
    if (e.KeyCode == Keys.Delete && currentItem != -1)
    {
        comboBox1.Items.RemoveAt(currentItem);

        if (comboBox1.Items.Count > 0) 
            comboBox1.SelectedIndex = (currentItem > 0 ? currentItem - 1 : currentItem);
    }
} 
```

这将在删除后选择列表中的下一个项目，或者如果组合框中没有项目或未选择任何项目，则不执行任何操作。

# mysql - MySQL 语法错误

> ID：11240156
> 
> 赞同：0
> 
> 时间：2012-06-28T07:42:23.110
> 
> 标签：mysql, sql, phpmyadmin

这是我的 SQL 脚本

```
CREATE TABLE account_profile
(
accnt_id int NOT NULL ,
first_name varchar(255),
last_name varchar(255),
biography varchar(255),
date_joined DATE,
country varchar(255),
gender varchar(255),
screename varchar(255),
path varchar(255),
FOREIGN KEY (accnt_id) REFERENCES accounts(id)
) 
```

它一直给我这个错误 SQL 查询：

```
CREATE TABLE ac 
```

MySQL 说：

```
#1064 - You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near '' at line 1 
```

这具体是什么意思？我该怎么办？从我的角度来看，脚本很好，我只是无法指出错误在哪里

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-28T07:53:23.173

确保您使用的是 InnoDB 引擎。其他引擎不支持外键。

```
CREATE TABLE account_profile
(
...
) ENGINE = INNODB; 
```

还要检查列是否`account_profile.accnt_id`与数据类型`accounts.id`完全匹配。第二列应该有一个定义的索引（主键就可以了。）

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-28T08:00:57.773

我已经测试了您的查询，它也适用于我。在创建表之前您有查询`account_profile`吗？因为如果这样做，请尝试***检查之前的查询是否已被分号终止***。像这样：

```
Create table TableName
(
    -- fields list
);  -- <== don't forget this before creating another table again.

CREATE TABLE account_profile
(
    accnt_id int NOT NULL ,
    first_name varchar(255),
    last_name varchar(255),
    biography varchar(255),
    date_joined DATE,
    country varchar(255),
    gender varchar(255),
    screename varchar(255),
    path varchar(255),
    FOREIGN KEY (accnt_id) REFERENCES accounts(id)
);  -- <== and also this. 
```

*错误显示在第 1 行附近。*

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-28T07:49:30.180

可能您的表`account`不存在：

```
FOREIGN KEY (accnt_id) REFERENCES accounts(id) 
```

这就是为什么你有一个错误，否则请求是正确的。

# twitter-bootstrap - Twitter bootstrap - 动态添加的标签不起作用

> ID：11240157
> 
> 赞同：4
> 
> 时间：2012-06-28T07:42:23.507
> 
> 标签：twitter-bootstrap

我在我的应用程序中使用 Twitter 引导程序。在特定情况下，我需要在 ajax 请求之后动态添加选项卡。

我为选项卡头添加了 li 标记，并添加了在选项卡头锚的 href 中指定的相关 id 的相应内容区域。

但是新添加的选项卡不适用于引导选项卡。我什至尝试在`$("#tabs1").tabs()`动态添加新选项卡后立即调用来刷新选项卡功能，但没有用。

请建议我如何使用带有动态数据的引导选项卡。

**注意：但是在页面加载期间存在的所有其他选项卡都可以正常工作。**

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-07-25T13:30:10.313

您必须使用`$(...).on()`而不是初始化选项卡`$(...).click()`。通过这种方式，您可以将点击事件绑定到父`#myTab`元素，而不是直接绑定到子`a`标签。

```
$("#myTab").on("click", "a", function(e){
  e.preventDefault();
  $(this).tab('show');
}); 
```

现在`click`-Event 将绑定到 -Element`#myTab`并委托给子`a`-Tags。

*   [在这里](http://jsfiddle.net/ev5Fv/)你可以找到一个正在运行的演示
*   阅读[jQuery](http://api.jquery.com/on/)文档以获取有关“事件处理程序”的更多信息

# android - Android ScrollView scrollTo() 方法不适用于 TextView？

> ID：11240158
> 
> 赞同：9
> 
> 时间：2012-06-28T07:42:24.483
> 
> 标签：android, textview, scrollview

例如，我有这样的布局：

```
<ScrollView>
  <LinearLayout>
    <LinearLayout>
         ...
    </LinearLayout>
    <LinearLayout>
         ...
    </LinearLayout>
    <LinearLayout>
         <TextView>
         </TextView>
    </LinearLayout>
  </LinearLayout>
</ScrollView> 
```

我的 TextView 有很长的内容。现在我可以手动滚动 ScrollView 到 TextView 内容的末尾。在代码中，我写：`scrview.scrollTo(0, 800);`，scrview 是我的ScrollView。它应该滚动到 TextView 内容的中间。但是在运行的时候，它只滚动到了TextView的开头，并不能滚动浏览TextView的内容。

有谁知道是什么导致了这个问题？

**编辑：**我找到了。好像我调用 scrollTo 太快了。使用

```
scrview.post(new Runnable() {
                public void run() {
                    scrview.scrollTo(0, 800);
                }
            }); 
```

相反，它可以工作。为遇到同样问题的任何人发布答案。

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-07-04T10:13:46.530

我找到了。好像我调用 scrollTo 太快了。使用

```
scrview.post(new Runnable() {
                public void run() {
                    scrview.scrollTo(0, 800);
                }
            }); 
```

相反，它可以工作。为遇到同样问题的任何人发布答案。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-28T07:52:55.170

首先，如果你所有的 LinearLayouts 都具有相同的方向，为什么你不只创建一次呢？如果我没记错的话，ScrollView 只能有 1 个孩子（1 个直接孩子）。也许这可能是你的问题的原因。但是，如果您仍然想要这 3 个 LinearLayout，您可以创建一个 FrameLayout 作为父级来保存它们，并使该 FrameLayout 成为 ScrollView 的子级

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-07-25T10:55:48.987

您必须`scrollTo`在可运行对象内部调用，因为滚动视图尚未布局，因此在使用可运行对象时，您可以尝试屏幕闪烁。要解决此问题，您可以像这样在滚动视图上监听 lauyout 更改：

```
scrollview.addOnLayoutChangeListener(new View.OnLayoutChangeListener() {
            @Override
            public void onLayoutChange(View v, int left, int top, int right, int bottom, int oldLeft, int oldTop, int oldRight, int oldBottom) {
                scrollview.scrollTo(x, y)
            }
        }); 
```

# jquery - iPad 上的下一个/上一个项目

> ID：11240169
> 
> 赞同：1
> 
> 时间：2012-06-28T07:43:08.577
> 
> 标签：jquery, ipad, fancybox

我正在使用 fancybox 2.0 来显示照片库。在所有浏览器上一切正常，可以单击下一个/上一个箭头来更改图片。

然而，这种行为在 iPad 上并不好：需要一次触摸才能显示箭头，而需要第二次触摸才能转到下一张/上一张图片。

有没有办法在 iPad 上使用“原生”方式（向左/向右滑动）来获得预期的结果？谢谢你的帮助。JZ

# matlab - 在matlab中使用其他向量的元素创建一个矩阵

> ID：11240173
> 
> 赞同：3
> 
> 时间：2012-06-28T07:43:59.917
> 
> 标签：matlab, vector, matrix, combinations

我有两个向量 a, b

```
a=[1; 2; 3; 4]
b=[1; 2; 3] 
```

我想创建一个看起来像这样的矩阵

```
c=[1 1; 2 1; 3 1; 4 1; 1 2; 2 2; 3 2; 4 2; 1 3; 2 3; 3 3; 4 3] 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-28T08:30:36.650

这是另一种方式！

```
c = [repmat(a,numel(b),1),sort(repmat(b,numel(a),1))] 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-28T07:56:39.070

我有一种感觉，有一个更好的方法，仍然......

```
p1 = repmat(a,[numel(b),1]);
p2 =  imresize(b,[numel(a)*numel(b) 1],'nearest');
answer =  [p1 p2]; 
```

* * *

找到了更好的方法：

```
 [A,B] = meshgrid(a,b);
 answer = [reshape(B,[],1) reshape(A,[],1)]; 
```

* * *

Chris Taylor 提出了一种更紧凑的方法：

```
 [A B]=meshgrid(a,b); [B(:) A(:)]; 
```

# javascript - onclick="document.forms[0].submit();" 的区别 并提交表单

> ID：11240176
> 
> 赞同：5
> 
> 时间：2012-06-28T07:44:31.200
> 
> 标签：javascript, html

在表单中，我有一个按钮。当我像这样通过 JavaScript 提交表单时有什么区别

```
<button onclick="document.forms[0].submit();"> 
```

当我这样提交时

```
<button type="submit"></button>? 
```

第一个适用于大多数浏览器，除了基于 webkit 的浏览器。后者也可以正常工作。对我来说，功能上没有明显差异。有吗？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-06-28T08:07:44.997

第一个例子：

```
<button onclick="document.forms[0].submit();"> 
```

...将做两件事：

1.  `onclick`它将提交文档中的第*一个*表单（即，由 0 索引指定的表单`forms[0]`）。
2.  它将提交它所在的表单（如果它在一个表单中），因为没有`type`指定属性的按钮默认是提交按钮。

这个两步双提交行为可以在这个快速而肮脏的演示中看到：http: [//jsfiddle.net/fMwuX/](http://jsfiddle.net/fMwuX/)（并且可能会导致奇怪的行为，这可能会使调试有点混乱）。如果按钮实际上不在表单中，那么这将不是问题。

第二个例子：

```
<button type="submit"></button> 
```

将简单地提交它所在的表单（如果它在一个表单中）。

在我看来，第二个选项绝对更可取，原因有几个，包括但不限于：

1.  即使用户禁用了 JS，它也会起作用。
2.  它不会对表单索引进行硬编码`forms[0]`。
3.  它更短更清晰。
4.  它不会与其他表单提交验证冲突。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-28T07:48:08.120

javascript 示例将提交 HTML 文档中的第一个表单，而第二个示例将提交包装该按钮的表单。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-28T07:54:25.327

`documents.forms[0].submit`将触发 HTML 页面中第一个表单的提交。确实，`documents.forms`包含您文档的所有形式。您可以使用它们的名称属性或索引来访问它们。

然后，`submit`在一个表单中输入 type 会触发他的父表单的提交。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-06-28T07:53:38.273

正如您所发现的，第一个使页面在某些情况下无法工作，并且 - 由于这个和其他原因 - 通常被认为是不好的做法。使用第二个。

# java - 将方法声明为静态有什么好处

> ID：11240178
> 
> 赞同：97
> 
> 时间：2012-06-28T07:44:32.767
> 
> 标签：java, optimization, coding-style, static

我最近一直在浏览我在 Eclipse 中的警告并遇到了这个：

![静态警告](../Images/ecd6803e938d56a29aa00fdfda08be30.png)

如果可以将方法声明为静态，它将给出编译器警告。

**[编辑]** Eclipse 帮助中的准确引用，强调私有和最终：

> **启用后，编译器将对私有**或**最终**方法以及仅引用静态成员的方法发出错误或警告。

是的，我知道我可以关闭它，但我想**知道打开它的原因？**

**为什么将每个可能的方法声明为静态方法是一件好事？**

这会带来任何性能优势吗？（在移动域中）

指出一个静态方法，我想表明你不使用任何实例变量，因此可以移动到 utils 样式类？

归根结底，我应该将其关闭“忽略”，还是应该修复它给我的 100 多个警告？

你认为这只是*弄脏*代码的额外关键字，因为编译器无论如何都会内联这些方法吗？（有点像你没有声明你可以最终*但你可以*的每个变量）。

* * *

## 回答 #1

> 赞同：140
> 
> 时间：2012-06-28T07:49:00.667

每当您编写方法时，您都会在给定范围内履行合同。范围越窄，您编写错误的机会就越小。

当一个方法是静态的时，你不能访问非静态成员；因此，您的范围更窄。所以，如果你不需要***也永远不需要（即使在子类中）***非静态成员来履行你的合同，为什么要让你的方法访问这些字段呢？在这种情况下声明该方法`static`将使编译器检查您不使用您不打算使用的成员。

此外，它将帮助阅读您的代码的人了解合同的性质。

这就是为什么`static`在实际实现静态合约时声明方法被认为是好的原因。

在某些情况下，您的方法仅意味着与您的类的实例相关的东西，并且它的实现实际上并未使用任何非静态字段或实例。在这种情况下，您不会标记方法`static`。

不使用`static`关键字的示例：

*   一个什么都不做的扩展钩子（但可以对子类中的实例数据做一些事情）
*   一个非常简单的默认行为意味着可以在子类中自定义。
*   事件处理程序实现：实现将随事件处理程序的类而变化，但不会使用事件处理程序实例的任何属性。

* * *

## 回答 #2

> 赞同：17
> 
> 时间：2012-06-28T07:51:52.730

这里没有优化的概念。

方法`static`是`static`因为您明确声明该方法不依赖封闭类的任何实例，只是因为它不需要。因此 Eclipse 警告，如文档中所述：

> 启用后，编译器将对私有或最终方法以及仅引用静态成员的方法发出错误或警告。

如果您不需要任何实例变量并且您的方法是私有的（不能从外部调用）或最终的（不能被覆盖），那么没有理由让它成为普通方法而不是静态方法。静态方法本质上更安全，即使只是因为您可以用它做更少的事情（它不需要任何实例，您没有任何隐式`this`对象）。

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2012-06-28T07:53:56.953

我没有关于性能的信息，我想它最多稍微好一点，因为代码不需要根据类型进行动态调度。

然而，反对重构为静态方法的一个更强有力的论点是，目前使用静态方法被认为是不好的做法。静态方法/变量不能很好地集成到面向对象的语言中，也很难正确测试。这就是为什么一些较新的语言完全放弃静态方法/变量的概念，或者尝试以一种更好地与 OO 配合使用的方式将其内化到语言中的原因（例如 Scala 中的对象）。

大多数时候，您需要静态方法来实现仅使用参数作为输入并使用该参数产生输出的函数（例如实用程序/辅助函数）在现代语言中，有一个一流的函数概念允许这样做，所以静态不需要。Java 8 将集成 lambda 表达式，因此我们已经朝着这个方向前进。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-07-04T05:21:42.837

**一**、声明方式`static`带来轻微的性能优势，但更有用的是，它允许在手头没有对象实例的情况下使用它（例如考虑工厂方法或获取单例）。它还用于说明方法性质的文档目的。不应忽略此文档目的，因为它可以立即向代码读者和 API 用户提供有关方法性质的提示，并且还可以作为原始程序员的思考工具 - 明确预期含义有助于您还可以直接思考并生成质量更好的代码（我认为基于我的个人经验，但人们不同）。例如，区分作用于类型的方法和作用于该类型实例的方法是合乎逻辑的，因此需要区分（如[Jon Skeet 在他对 C# 问题的评论中](https://stackoverflow.com/a/169868/709646)）。

方法的另一个用例`static`是模拟过程编程接口。想想[`java.lang.System.println()`](http://docs.oracle.com/javase/7/docs/api/java/lang/System.html)类以及其中的方法和属性。该类`java.lang.System`用作分组名称空间而不是可实例化的对象。

**2.** Eclipse（或任何其他编程或其他类型的 - 可生物组合或不可生物组合的 - 实体）如何确定可以将哪个方法声明为静态？即使基类没有访问实例变量或调用非静态方法，通过继承机制，事情也可以改变。只有当方法不能被继承子类覆盖时，我们才能100%肯定地声明该方法真的可以被声明`static`。在以下两种情况下，重写方法是不可能的

1.  `private`（没有子类可以直接使用它，甚至原则上都不知道它），或者
2.  `final`（即使子类可以访问，也无法更改引用实例数据或函数的方法）。

因此 Eclipse 选项的逻辑。

**3.**原发帖人还问：“*指出一个方法是静态的，我想是在表明你不使用任何实例变量因此可以移动到一个 utils 风格的类？* ”这是一个很好的观点。有时这种设计更改会通过警告来指示。

这是一个非常有用的选项，如果我使用 Eclipse 并使用 Java 编程，我个人会确保启用它。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-06-28T07:56:31.023

请参阅塞缪尔关于方法范围如何变化的回答。我想，这是使方法静态化的主要方面。

您还询问了性能：

可能会有微小的性能提升，因为对静态方法的调用不需要隐式的“this”引用作为参数。

但是，这种性能影响确实很小。因此，一切都与范围有关。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2013-07-17T15:12:47.177

来自 Android 性能指南：

> 首选静态而不是虚拟 如果您不需要访问对象的字段，请将您的方法设为静态。调用将快 15%-20% 左右。这也是一种很好的做法，因为您可以从方法签名中看出调用该方法不能改变对象的状态。

[http://developer.android.com/training/articles/perf-tips.html#PreferStatic](http://developer.android.com/training/articles/perf-tips.html#PreferStatic)

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2014-07-22T16:07:05.203

我错过了一些速度差异的数字。因此，我尝试对它们进行基准测试，结果并不那么容易：[Java 循环在某些运行/JIT 错误后变慢？](https://stackoverflow.com/questions/24882946/java-loop-gets-slower-after-some-runs-jits-fault?noredirect=1#comment38666050_24882946)

我最终使用了 Caliper，结果与手动运行测试相同：

**静态/动态调用没有可测量的差异。**至少不适用于 Linux/AMD64/Java7。

卡尺结果在这里：[https://microbenchmarks.appspot.com/runs/1426eac9-36ca-48f0-980f-0106af064e8f#r:scenario.benchmarkSpec.methodName,scenario.vmSpec.options.CMSLargeCoalSurplusPercent,scenario.vmSpec.options。 CMSLargeSplitSurplusPercent,scenario.vmSpec.options.CMSSmallCoalSurplusPercent,scenario.vmSpec.options.CMSSmallSplitSurplusPercent,scenario.vmSpec.options.FLSLargestBlockCoalesceProximity,scenario.vmSpec.options.G1ConcMarkStepDurationMillis](https://microbenchmarks.appspot.com/runs/1426eac9-36ca-48f0-980f-0106af064e8f#r:scenario.benchmarkSpec.methodName,scenario.vmSpec.options.CMSLargeCoalSurplusPercent,scenario.vmSpec.options.CMSLargeSplitSurplusPercent,scenario.vmSpec.options.CMSSmallCoalSurplusPercent,scenario.vmSpec.options.CMSSmallSplitSurplusPercent,scenario.vmSpec.options.FLSLargestBlockCoalesceProximity,scenario.vmSpec.options.G1ConcMarkStepDurationMillis)

我自己的结果是：

```
Static: 352 ms
Dynamic: 353 ms
Static: 348 ms
Dynamic: 349 ms
Static: 349 ms
Dynamic: 348 ms
Static: 349 ms
Dynamic: 344 ms 
```

卡尺测试类是：

```
public class TestPerfomanceOfStaticMethodsCaliper extends Benchmark {

    public static void main( String [] args ){

        CaliperMain.main( TestPerfomanceOfStaticMethodsCaliper.class, args );
    }

    public int timeAddDynamic( long reps ){
        int r=0;
        for( int i = 0; i < reps; i++ ) {
            r |= addDynamic( 1, i );
        }
        return r;
    }

    public int timeAddStatic( long reps ){
        int r=0;
        for( int i = 0; i < reps; i++ ) {
            r |= addStatic( 1, i );
        }
        return r;
    }

    public int addDynamic( int a, int b ){

        return a+b;
    }

    private static int addStatic( int a, int b ){

        return a+b;
    }

} 
```

我自己的测试课是：

```
public class TestPerformanceOfStaticVsDynamicCalls {

    private static final int RUNS = 1_000_000_000;

    public static void main( String [] args ) throws Exception{

        new TestPerformanceOfStaticVsDynamicCalls().run();
    }

    private void run(){

        int r=0;
        long start, end;

        for( int loop = 0; loop<10; loop++ ){

            // Benchmark

            start = System.currentTimeMillis();
            for( int i = 0; i < RUNS; i++ ) {
                r += addStatic( 1, i );
            }
            end = System.currentTimeMillis();
            System.out.println( "Static: " + ( end - start ) + " ms" );

            start = System.currentTimeMillis();
            for( int i = 0; i < RUNS; i++ ) {
                r += addDynamic( 1, i );
            }
            end = System.currentTimeMillis();
            System.out.println( "Dynamic: " + ( end - start ) + " ms" );

            // Do something with r to keep compiler happy
            System.out.println( r );

        }

    }

    private int addDynamic( int a, int b ){

        return a+b;
    }

    private static int addStatic( int a, int b ){

        return a+b;
    }

} 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2012-07-03T19:53:52.603

好吧，Eclipse 文档说明了有问题的警告：

> **方法可以是静态的**
> 
> 启用后，编译器将对私有或最终方法以及仅引用静态成员的方法发出错误或警告

我认为它几乎说明了一切。如果该方法是私有的和最终的并且只引用静态成员，那么所讨论的方法也可以声明为静态的，这样就表明我们只打算从中访问静态内容。

老实说，我认为这背后没有任何其他神秘的原因。

* * *

## 回答 #9

> 赞同：-2
> 
> 时间：2012-06-28T07:52:43.813

您可以声明为静态的方法是不需要实例化的方法，例如

```
public class MyClass
{
    public static string InvertText(string text)
    {
        return text.Invert();
    }
} 
```

然后，您可以在任何其他类中调用它，而无需实例化该类。

```
public class MyClassTwo
{
    public void DoSomething()
    {
        var text = "hello world";
        Console.Write(MyClass.InvertText(text));
    }
} 
```

...但那是你可能已经知道的事情。除了更清楚地表明该方法不使用任何实例变量之外，它本身并没有给您带来任何真正的好处。

换句话说，您可以最安全地完全关闭它。如果你知道你永远不会在其他类中使用方法（在这种情况下它应该是私有的），你根本不需要它是静态的。

# android - Eclipse IDE for Java EE Developer 和 Eclipse for Mobile Developer 有什么区别？

> ID：11240179
> 
> 赞同：2
> 
> 时间：2012-06-28T07:44:36.690
> 
> 标签：android, eclipse, eclipse-juno

这与最新`Juno or 4.2`版本的`Eclipse`. 我是一名`Android`程序员，不是`IDE`. 我想知道我应该使用Android编程`Eclipse IDE for Java EE Developer`还是`Eclipse for Mobile Developer`两者之间的主要区别是什么？

我已经阅读了`faq`，这个问题将属于`software tools commonly used by programmers`？

谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-28T08:01:51.517

核心 Eclipse IDE 是所有 Eclipse IDE 的核心。Eclipse EE 或 Eclipse Mobile 只不过是 IDE 的扩展版本。

像 Eclipse EE 包含为 EE 开发人员提供的支持插件，其中移动版包含基本的移动插件。这就像下载基本的 Eclipse IDE 然后安装 ADT 一样。在这里您可以手动完成，其中版本附带特定插件作为现成的解决方案。

# windows - 如何在插入时从笔式驱动器运行 .exe 文件？

> ID：11240180
> 
> 赞同：0
> 
> 时间：2012-06-28T07:44:38.623
> 
> 标签：windows

我想在插入电脑时从笔式驱动器运行 .exe 文件（或）任何应用程序。我不想使用 Autorun.inf 文件，因为所有杀毒软件都会阻止它。我也使用过便携式应用程序启动器，它也只使用自动运行。所以再次杀毒软件阻止它。是否有任何替代选项，例如笔式驱动器中的 .exe 文件应在笔式驱动器插入时自动启动？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-28T07:48:56.493

防病毒程序阻止 autorun.inf 的唯一目的是不允许某些 .exe-s 在插入笔式驱动器时自动启动。所以，基本上，你问的是不可能的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-28T07:49:13.473

我很长时间没有使用 Windows，但我相当确定 Windows 中有一个设置可以启用/禁用已安装驱动器上的自动运行可执行文件。在您的防病毒应用程序中更改此类设置（或获得一个新的、更理智的设置）将是我最好的猜测。

祝你好运！

# android - 后退按钮像家一样工作

> ID：11240183
> 
> 赞同：0
> 
> 时间：2012-06-28T07:44:58.963
> 
> 标签：android

是否可以更改此代码：

```
@Override
public boolean onKeyDown(int keyCode, KeyEvent event) {
    if (keyCode == KeyEvent.KEYCODE_BACK) {

    }
    return super.onKeyDown(keyCode, event);
} 
```

这样当我单击后退按钮时，它就像主页按钮一样工作？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-28T07:48:34.580

试试这个，

```
@Override
    public void onBackPressed() {
        Intent backtoHome = new Intent(Intent.ACTION_MAIN);
        backtoHome.addCategory(Intent.CATEGORY_HOME);
        backtoHome.setFlags(Intent.FLAG_ACTIVITY_NEW_TASK);
        startActivity(backtoHome);
    } 
```

将此添加到您的 Activity 中，将使您的应用看起来像是在响应 Home Button Click 事件

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-28T07:49:37.467

[以编程方式进入主屏幕](https://stackoverflow.com/questions/3724509/going-to-home-screen-programmatically)

启动主屏幕

```
Intent startMain = new Intent(Intent.ACTION_MAIN);
startMain.addCategory(Intent.CATEGORY_HOME);
startMain.setFlags(Intent.FLAG_ACTIVITY_NEW_TASK);
startActivity(startMain); 
```

笔记 ：

此 Intent 将启动用户定义的启动器应用程序。请注意这一点，因为如果用户不希望发生这种情况，这看起来就像您的应用程序崩溃了。

如果您希望它从您的应用程序中构建一个退出按钮，请阅读这篇关于Android中的[退出按钮的文章](http://blog.radioactiveyak.com/2010/05/when-to-include-exit-button-in-android.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-07-07T08:47:35.267

**一条线解决方案**

```
@Override
public void onBackPressed() {
   moveTaskToBack(true);
} 
```

也[看到这个](https://stackoverflow.com/a/23759328/1925394)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2018-10-18T16:40:12.163

```
@Override
public void onBackPressed()
    //super.onBackPressed();
    NavUtils.navigateUpFromSameTask(this);
} 
```

如果某些事情不像预期的那样工作，请尝试未注释

```
 super.onBackPressed(); 
```

# linux - 在 Ubuntu 10.10 中直接将私钥密码传递给 openvpn 命令

> ID：11240184
> 
> 赞同：27
> 
> 时间：2012-06-28T07:45:13.343
> 
> 标签：linux, shell, command, openvpn

我尝试了不同参数的方法

我有密码。
下面的密码是*mypassword*

1)

```
root$ echo mypassword || openvpn client.conf.ovpn 
```

结果是显示：

```
mypassword 
```

2)

```
root$ openvpn client.warriors.conf.ovpn || echo mypassword 
```

结果是显示：

```
Thu Jun 28 00:00:00 2012 us=757575 NOTE: OpenVPN 2.1 requires '--script-security 2' or higher to call user-defined scripts or executables  
Enter Private Key Password: 
```

（仍然需要手动输入密码）

我不想手动输入密码。我怎样才能做到这一点？

3) 伙计

运行脚本后，它会退出并显示以下内容：

```
Fri Jun 29 11:56:59 2012 us=707916   cf_max = 0
Fri Jun 29 11:56:59 2012 us=707925   cf_per = 0
Fri Jun 29 11:56:59 2012 us=707934   max_clients = 1024
Fri Jun 29 11:56:59 2012 us=707944   max_routes_per_client = 256
Fri Jun 29 11:56:59 2012 us=707953   auth_user_pass_verify_script = '[UNDEF]'
Fri Jun 29 11:56:59 2012 us=707963   auth_user_pass_verify_script_via_file = DISABLED
Fri Jun 29 11:56:59 2012 us=707973   ssl_flags = 0
Fri Jun 29 11:56:59 2012 us=707982   port_share_host = '[UNDEF]'
Fri Jun 29 11:56:59 2012 us=707992   port_share_port = 0
Fri Jun 29 11:56:59 2012 us=708001   client = ENABLED
Fri Jun 29 11:56:59 2012 us=708010   pull = ENABLED
Fri Jun 29 11:56:59 2012 us=708020   auth_user_pass_file = '[UNDEF]'
Fri Jun 29 11:56:59 2012 us=708032 OpenVPN 2.1.0 i686-pc-linux-gnu [SSL] [LZO2] [EPOLL] [PKCS11] [MH] [PF_INET6] [eurephia] built on Jul 12 2010
Fri Jun 29 11:56:59 2012 us=708131 NOTE: OpenVPN 2.1 requires '--script-security 2' or higher to call user-defined scripts or executables
Enter Private Key Password:
Fri Jun 29 11:56:59 2012 us=726649 WARNING: this configuration may cache passwords in memory -- use the auth-nocache option to prevent this
Fri Jun 29 11:56:59 2012 us=726805 WARNING: file 'client-team-20110222.key' is group or others accessible
Fri Jun 29 11:56:59 2012 us=727136 /usr/bin/openssl-vulnkey -q -b 1024 -m <modulus omitted>
Fri Jun 29 11:56:59 2012 us=875611 Control Channel MTU parms [ L:1543 D:140 EF:40 EB:0 ET:0 EL:0 ]
Fri Jun 29 11:56:59 2012 us=876742 Data Channel MTU parms [ L:1543 D:1450 EF:43 EB:4 ET:0 EL:0 ]
Fri Jun 29 11:56:59 2012 us=876777 Local Options String: 'V4,dev-type tun,link-mtu 1543,tun-mtu 1500,proto TCPv4_CLIENT,cipher BF-CBC,auth SHA1,keysize 128,key-method 2,tls-client'
Fri Jun 29 11:56:59 2012 us=876788 Expected Remote Options String: 'V4,dev-type tun,link-mtu 1543,tun-mtu 1500,proto TCPv4_SERVER,cipher BF-CBC,auth SHA1,keysize 128,key-method 2,tls-server'
Fri Jun 29 11:56:59 2012 us=876810 Local Options hash (VER=V4): 'd902a8f8'
Fri Jun 29 11:56:59 2012 us=876825 Expected Remote Options hash (VER=V4): '7e078940'
Fri Jun 29 11:56:59 2012 us=877124 NOTE: UID/GID downgrade will be delayed because of --client, --pull, or --up-delay
Fri Jun 29 11:56:59 2012 us=877145 Attempting to establish TCP connection with [AF_INET]89.105.130.193:444 [nonblock]
Fri Jun 29 11:57:00 2012 us=877280 TCP connection established with [AF_INET]89.105.130.193:444
Fri Jun 29 11:57:00 2012 us=877337 Socket Buffers: R=[87380->131072] S=[16384->131072]
Fri Jun 29 11:57:00 2012 us=877353 TCPv4_CLIENT link local: [undef]
Fri Jun 29 11:57:00 2012 us=877364 TCPv4_CLIENT link remote: [AF_INET]89.105.130.193:444
Fri Jun 29 11:57:00 2012 us=877568 TLS: Initial packet from [AF_INET]89.105.130.193:444, sid=c5d843bc e9f3e6ab
Fri Jun 29 11:57:04 2012 us=105788 VERIFY OK: depth=1, /C=IE/ST=NA/L=DUB/O=ABC.OpenVPN/OU=server-terminus/CN=terminus/emailAddress=ops@abc.com
Fri Jun 29 11:57:04 2012 us=106189 VERIFY OK: nsCertType=SERVER
Fri Jun 29 11:57:04 2012 us=106202 VERIFY OK: depth=0, /C=IE/ST=NA/O=abc.OpenVPN/OU=server-terminus/CN=terminus/emailAddress=ops@abc.com
root@bond$ 
```

以这种方式退出是正常的。

* * *

## 回答 #1

> 赞同：85
> 
> 时间：2014-06-05T22:22:54.903

在我的`openvpn.conf`：

```
...
askpass /etc/openvpn/jdoe.pass   <<< new line here
ca /etc/openvpn/jdoe_ca.crt
cert /etc/openvpn/jdoe.crt
key /etc/openvpn/jdoe.key
... 
```

该文件`/etc/openvpn/jdoe.pass`仅包含密码。您可以`chmod`将此文件添加到`600`. 这种方法救了我的命... ;-)

```
Ubuntu 12.04.4 LTS
OpenVPN 2.2.1 x86_64-linux-gnu [SSL] [LZO2] [EPOLL] [PKCS11] [eurephia] [MH] [PF_INET6] [IPv6 payload 20110424-2 (2.2RC2)] built on Mar 13 2014 
```

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2014-02-15T19:13:19.323

如何将其存储到文件中并使用`--askpass /your/file`？[OpenVPN 2.0-beta20](https://openvpn.net/index.php/open-source/documentation/change-log/changelog-20x.html)`--askpass`版本中添加了选项，Maverick 有[2.1.0-3ubuntu1](https://launchpad.net/ubuntu/maverick/+source/openvpn)版本。

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2012-06-28T07:52:03.663

尝试使用 shell 脚本，例如：

```
#!/usr/bin/expect -f
spawn openvpn client.warriors.conf.open
match_max 100000
expect "*?assword:*"
send -- "mypassword"
send -- "\r"
expect eof 
```

您需要 chmod +x this，您也可以将其设置为环境变量，这样您就不必输入目录。

看起来他们让这个脚本工作：[https ://unix.stackexchange.com/questions/9055/establish-openvpn-tunnel-in-bash-script](https://unix.stackexchange.com/questions/9055/establish-openvpn-tunnel-in-bash-script)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-08-10T10:14:06.067

我想你只是刷卡`|`和`||`运营商。

`|`将上一个命令的标准输出插入下一个命令的标准输入。

`||`仅当第一个命令失败时才启动第二个命令（退出代码！= 0）。

该命令应该可以工作。

```
root$ echo mypassword | openvpn client.conf.ovpn 
```

# iphone - 将 iOS4 项目集成到 iOS5 项目中

> ID：11240195
> 
> 赞同：0
> 
> 时间：2012-06-28T07:46:53.553
> 
> 标签：iphone, ios5, ios4, storyboard, integration

我有一个关于集成两个 iOS 应用程序的新手问题。我在 iOS 5 中创建了一个应用程序（我的第一个应用程序，所以我对 iOS 4 没有任何了解，除了有 xibs 文件而不是情节提要并且不包括 ARC 的事实）。现在我必须在我的 iOS 5 应用程序中包含一个较旧的独立应用程序（为带有 xibs 和非 ARC 的 iOS 4 而构建）。可以说，在我的应用程序的主菜单视图中，将有一个新按钮打开另一个应用程序的主菜单。

所以我做了一些研究，找出如何通过 fno-objc-arc 标志禁用 ARC。好的，现在我已经将第二个应用程序的所有文件导入到我的应用程序中，并且所有类都设置了标志。我仍然可以毫无问题地运行我的应用程序。

现在我不知道如何让我的新按钮打开旧应用程序的 mainViewController - 这个应用程序有 MainWindow.xib（包含一个窗口和一个导航控制器）。此 MainWindow 在旧项目中设置为 Main Interface。appMainDelegate 文件中也有一些初始化调用。我在哪里可以在我的应用程序中调用它们？

谁能告诉我需要做什么。我有一个想法，我将只添加一个新的 UIViewController 到我的情节提要中。这将是旧应用程序的起点，并且一切都将像以前一样工作。或者我是否必须在我的故事板中创建更多控制器（对于每个 xib）？这是我不知道该怎么做的地方。任何帮助都非常感谢。谢谢你

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-28T07:54:26.357

尝试执行以下操作，任何类似或类似的操作都应该有效：

在按钮（称为新按钮的那个）的方法中，让它执行以下代码：

```
OldAppMainViewController *controller = [[OldAppMainViewController alloc] init];
//Here you can assign vallues to any properties that you might want to
[self.navigationController pushViewController:controller animated:YES]; 
```

旧的应用程序主视图控制器应该有一个带有 nub 命名函数的 init，所以它应该可以工作。如果这不起作用，请尝试以下方法：

```
OldAppMainViewController *controller = [[OldAppMainViewController alloc] initWithNibName:@"OldAppMainViewController" bundle:nil]; 
```

其中 NIB 名称是不带扩展名的 .xib 文件名。

还要确保接口生成器中的所有连接都设置正确

# objective-c - wifi 连接时的通知 (OS X)

> ID：11240196
> 
> 赞同：2
> 
> 时间：2012-06-28T07:46:57.843
> 
> 标签：objective-c, macos, wifi

当机场连接到 ap 时，我需要来自系统的通知。有没有可能用`SystemConfiguration`框架做到这一点？我在理解系统配置 api 文档时遇到问题。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-28T07:49:19.977

您在 SystemConfiguration 网络的正确轨道上，它提供了[SCNetworkReachability](https://developer.apple.com/library/mac/#documentation/SystemConfiguration/Reference/SCNetworkReachabilityRef/Reference/reference.html)功能集。你可以尝试使用

```
SCNetworkReachabilitySetCallback 
```

设置当可达性改变时将调用的回调；和

```
SCNetworkReachabilityScheduleWithRunLoop 
```

在运行循环中安排可达性检查

或者您可以尝试使用构建在 SystemConfiguration 框架之上的[可达性框架（适用于 MacOS 和 iOS），以使事情变得更容易（更高级别）。](https://github.com/tonymillion/Reachability/)

如果您想采用 SystemConfiguration 方式，这就是您检查当前可达性并安装回调以接收更改通知的方式（[source](http://ncid.hg.sourceforge.net/hgweb/ncid/ncidpop/raw-file/54b74f5e8cd4/macosx/NCID.m)）：

```
- (void)checkReachability {
  NSString *server = [[NSUserDefaults standardUserDefaults] stringForKey:@"NCIDServer"];

  if (server == nil) {
    ncid_message_callback(self, [NSLocalizedString(@"No caller ID server was specified.", nil) UTF8String]);
    return;
  }

  const char *serverName = [[[server componentsSeparatedByString:@":"] objectAtIndex:0] UTF8String];
  SCNetworkReachabilityContext context = {0, (void *)self, NULL, NULL, NULL};
  networkReachability = SCNetworkReachabilityCreateWithName(NULL, serverName);

  if (networkReachability == NULL)
    goto fail;

  // If reachability information is available now, we don't get a callback later
  SCNetworkConnectionFlags flags;

  if (SCNetworkReachabilityGetFlags(networkReachability, &flags))
    networkReachabilityCallback(networkReachability, flags, self);

  if (!SCNetworkReachabilitySetCallback(networkReachability, networkReachabilityCallback, &context))
    goto fail;

  if (!SCNetworkReachabilityScheduleWithRunLoop(networkReachability, [[NSRunLoop currentRunLoop] getCFRunLoop], kCFRunLoopCommonModes))
     goto fail;
  return;

fail:
  if (networkReachability != NULL)
    CFRelease(networkReachability);

  networkReachability = NULL; //-- ivar representing current reachability

} 
```

这是回调的一个示例：

```
static void networkReachabilityCallback(SCNetworkReachabilityRef target,
                SCNetworkConnectionFlags flags,
                void *object) {
  // Observed flags:
  // - nearly gone: kSCNetworkFlagsReachable alone (ignored)
  // - gone: kSCNetworkFlagsTransientConnection | kSCNetworkFlagsReachable | kSCNetworkFlagsConnectionRequired
  // - connected: kSCNetworkFlagsIsDirect | kSCNetworkFlagsReachable

  if (networkReachability == NULL)
    return;

  if ((flags & kSCNetworkFlagsReachable) && !(flags & kSCNetworkFlagsConnectionRequired))    {

    if (isReachable) // typically receive a reachable message ~20ms before the unreachable one
    return;

    isReachable = YES;
    ncid_network_kill();
    [NSThread detachNewThreadSelector:@selector(runThread:) toTarget:object withObject:nil];

  } else {
    isReachable = NO;
    ncid_network_kill();
  }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-28T07:51:10.630

为此，您需要使用 Apple 的 Reachability 类。[http://developer.apple.com/library/ios/#samplecode/Reachability/Listings/Classes_Reachability_m.html#//apple_ref/doc/uid/DTS40007324-Classes_Reachability_m-DontLinkElementID_6](http://developer.apple.com/library/ios/#samplecode/Reachability/Listings/Classes_Reachability_m.html#//apple_ref/doc/uid/DTS40007324-Classes_Reachability_m-DontLinkElementID_6)

您可以查看此线程以了解如何使用此类-

[如何接收连接类型已更改的通知（3G、Edge、Wifi、GPRS）](https://stackoverflow.com/questions/7685152/how-do-i-receive-notifications-that-the-connection-has-changed-type-3g-edge-w)

# rest - AngularJS 和休息服务

> ID：11240197
> 
> 赞同：3
> 
> 时间：2012-06-28T07:47:03.153
> 
> 标签：rest, angularjs

我最近开始尝试使用**AngularJS**。我正在构建一个简单的 html5 应用程序来更新**MySQL**数据库。

*[索引.html]*

```
<!DOCTYPE html>
<html ng-app="MyProject">
<head>
    <title>My Project</title>
    <link rel="stylesheet" href="css/main.css" type="text/css">
    <script src="lib/angular-1.0.1.js"></script>
    <script src="lib/angular-resource-1.0.1.js"></script>
    <script src="js/controllers.js"></script>
    <script src="js/services.js"></script>
</head>
<body>
    <div id="main-content" ng-view>
</body>
</html> 
```

我使用 Slim 框架创建了一个 Rest Interface。我的数据库目前有一个名为 location_types 的表，其中包含两列 id 和 title。我已经在浏览器中测试了 Rest 服务，所以在 api/locationtypes 下我得到以下 JSON：

```
[{"id":"1","title":"Airport"},{"id":"2","title":"Bus Station"}] 
```

我使用以下代码在 AngularJS 中创建服务：

*[服务.js]*

```
angular.module('myDB', ['ngResource']).
factory('LocationTypes', function($resource) {
    var LocationTypes = $resource('http://localhost/project/api/locationtypes', {}, { query: {method: 'GET', isArray: true}});
    return LocationTypes; 
}); 
```

我还使用以下代码来创建应用程序模块：

*[控制器.js]*

```
angular.module('MyProject', ['myDB']).
config(function($routeProvider) {
    $routeProvider.
        when('/locationtypes', {controller: LocationTypesCtrl, templateUrl:'forms/locationtypes.html'}).
        otherwise({redirectTo:'/locationtypes'});
});

function LocationTypesCtrl($scope, LocationTypes)
{
    $scope.locationTypes = LocationTypes.query();
} 
```

问题是查询服务后我没有得到任何结果。调试时数组的`locationTypes`长度为零。我正在使用最新的 AngularJS 版本 [1.0.1]。我想念什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-08-13T07:46:41.507

可能是 Dan 说的 CORS 问题。您可以通过将以下内容添加到模块配置来绕过此问题。

```
.config(function($httpProvider){
    delete $httpProvider.defaults.headers.common['X-Requested-With'];
}) 
```

删除 Angular 设置的标头应该可以解决 CORS 问题。您还应该在您的 api 文件夹中添加一个 .htaccess 文件。并添加：

```
Header set Access-Control-Allow-Origin "*" 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-28T21:48:59.853

您的 URL 真的是“http://localhost/project/api/locationtypes”还是外部服务器？如果它是外部的，那么您有一个 CORS（跨源）问题。除非我遗漏了一些东西，否则它对我来说是正确的。

# jquery - 显示隐藏特定的文本行

> ID：11240205
> 
> 赞同：-2
> 
> 时间：2012-06-28T07:47:29.027
> 
> 标签：jquery, text, hide, show

无论如何隐藏和显示带有jQuery的指定div中文本的第二行？div id 是“葡萄”

我有这样的文字

“赤霞珠
和
设拉子”

有时我需要 & 有时我不需要，如果有帮助，它将永远是 &symbol ??

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-28T07:50:43.783

试试这个代码：

```
$('#grape:contains("Cabernet Sauvignon
&
Shiraz")').each(function(){
     if($(this).children().length < 1) 
          $(this).css("dispaly","none") }); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-28T07:51:20.913

试试这个：

```
var secondLineRequired = false;
if (!secondLineRequired) {
    var text = $("#grape").text().split('&');
    $("#grape").text(text[0]);
} 
```

[**示例小提琴**](http://jsfiddle.net/Bg9Et/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-28T08:21:08.323

您需要从 中获取文本`#grape`，然后将其拆分并添加为带有新插入的 HTML`<br>`

查看更新的[小提琴](http://jsfiddle.net/SWQgW/1/)

# css - CSS：多色页脚背景问题

> ID：11240214
> 
> 赞同：0
> 
> 时间：2012-06-28T07:48:05.650
> 
> 标签：css

我在正确设置页脚时遇到了困难。我有一个底部导航栏作为我的页脚的一部分，它工作正常（颜色：#7A7A7A）。问题在于随后的版权信息。它有一个地址和电话号码。我希望页脚的这一侧有一个黑色的 bakcground（#000）。这部分在 copyRight 下的 css 中被标记，我没有得到任何结果。有什么想法可能是错的吗？

这是我的[现场示例](http://webprolearner2346.zxq.net/css-test/)。谢谢

CSS

```
html, body {
    margin:0;
    padding:0;
    height:100%; /* needed for container min-height */
    background:#333333;
    font-family: trebuchet, 'trebuchet ms', 'tahoma', sans-serif;
    font-size:small;
    color:#5e5e5e;
    line-height: 130%;
}

/****** COLORBLOCK: this is the orangey-yellow bar behind the wrapper in the background. ******/

#colorblock {
    position: absolute;
    top: 60px;
    left: 0px;
    background: #c69a55;
    z-index: 0;
    height: 65px;
    width: 100%;
    padding: 0px;
    margin: 0px;
}

/**************************************************/

div#container {
    position:relative; /* needed for footer positioning*/
    margin:0 auto; /* center, not in IE5 */
    width:925px;
    background:#f0f0f0;
    height:auto !important; /* real browsers */
    height:100%; /* IE6: treaded as min-height*/
    min-height:100%; /* real browsers */
    border-right: 15px solid #000000;
    border-left: 15px solid #000000;

}

div#contentArea {
    padding:1em 1em 5em; /* bottom padding for footer */

}
    div#contentArea p {
        text-align:justify;
        padding:0 1em;
    }

#content {
    margin-left: 240px;
    margin-right: 0 auto;
    background: #ebebeb;
    padding: 5px;
    width:635px;
    height: 400px;

}

/****** TOP BANNER: This is the banner with Greg's List logo and main navigation. Also includes the styles for the main navigation links. ******/
div#header {
    /*padding:1em;*/
    height: 175px;
    border-top:15px solid #000000;

}
    div#header p {
        margin:0;
    }

/****** LEFT COLUMN: This is the left gray column next to the content. Features the styling for the log-in form and the location links. ******/

#left2 {
    float: left;
    width: 200px;
    background: #dddddd;
    -moz-border-radius: 10px;
    border-radius: 10px;
    margin-right: 15px;
    padding: 5px;
    height: 400px;
}

/****** FOOTER: This is the junk at the bottom of the page. Do NOT remove the clear div; it's what makes it stick to the bottom. ******/

div#footer {
    position:absolute;
    width:100%;
    bottom:0; /* stick to bottom */
    background:#7A7A7A;
    border-bottom:15px solid #000000;
}
    div#footer p {
        padding:1em;
        margin:0;
    }

a.footer {
    color: #c7c7c7;
    font-size: 80%;
    padding-right: 20px;
    letter-spacing: 1px;
}   

p { 
    margin:0 0 1em;
}   

#copyRight{
 background:#000;   
 color: #FFF;
 font-size: 75%;
 bottom: 0;

}

.left{float:left;}
.right{float:right;}

</style> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-28T07:53:01.177

您正在浮动 #copyRight 的内容，因此需要浮动它才能正确包含它们。将此添加到#copyRight：

```
float: left;
width: 100%; 
```

[阅读下面的 Billiand 详细说明](https://stackoverflow.com/a/11240702/527775)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-28T07:56:32.820

加入`overflow:hidden`_ `#copyRight`

所以你的 CSS 应该是这样的：

```
#copyRight{
    background:#000;   
    color: #FFF;
    font-size: 75%;
    bottom: 0;
    overflow:hidden
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-28T08:22:54.200

您遇到的问题是大多数元素，包括 div，默认情况下不会扩展为包含浮动元素。由于里面的一切`copyRight`都是漂浮的，所以它就像是空的一样，并且缩小到无。

有很多方法可以使元素扩展为包含浮动元素。我个人最喜欢的是设置`overflow`几乎任何东西 -`hidden`最常见。

```
#copyRight{
    overflow: hidden;
} 
```

另一种方法是使包含元素也浮动，尽管它可能会导致试图包含它的元素出现相同的问题。此外，浮动会导致收缩包装，因此您必须设置明确的宽度：

```
#copyRight{
    float: left;
    width: 100%;
} 
```

使用各种声明可以实现类似的结果`display`，例如`display: inline-block`. 这避免了将问题传播到父元素：

```
#copyRight{
    display: inline-block;
    width: 100%;
} 
```

显然早在 2004 年，通过[插入带有`:after`伪类](http://www.positioniseverything.net/easyclearing.html/)的清除元素而不是添加`<div style="clear:both;"></div>`. 这些技巧也可以解决您的问题，尽管清除浮动和包含它们并不完全相同。

# shell - 期望脚本 - 提取用户 ID

> ID：11240226
> 
> 赞同：1
> 
> 时间：2012-06-28T07:48:58.063
> 
> 标签：shell, expect

我想使用 whoami 命令获取终端用户 ID。我在下面给出了我的脚本，但它只返回命令名称，而不是用户名？

如何使用 whoami 命令获取终端用户 ID？

我的代码是，

```
send "whoami\r"
      set timeout 5
      expect -re {([a-z]+)} {
       set jobid $expect_out(0,string)
      }
      send_user "\r\nUSER $jobid\r\n"
} 
```

上述代码的输出是，

```
asisdtt-exp7$ whoami
USER whoami
kandabap
asisdtt-exp7$ exit 
```

当我硬编码我预期的用户 ID (kandabap) 的第一个字母时，我得到了正确的答案。那个代码是，

```
send "whoami\r"
      set timeout 5
      expect -re {k([a-z]+)} {
       set jobid $expect_out(0,string)
      }
      send_user "\r\nUSER $jobid\r\n" 
```

输出，

```
asisdtt-exp7$ whoami
kandabap
asisdtt-exp7$ 
USER kandabap 
```

我很困惑。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-28T08:26:12.677

我不确定你真正想要做什么，但这会很好：

```
log_user 0
spawn whoami
expect eof
set jobid $expect_out(buffer)
puts "USER $jobid" 
```

当然，这些都不是真正需要的。你可以使用普通的 TCL 做同样的事情：

```
puts "USER [exec whoami]" 
```

# uinavigationcontroller - UINavigationItem 多行提示文字

> ID：11240229
> 
> 赞同：1
> 
> 时间：2012-06-28T07:49:10.760
> 
> 标签：uinavigationcontroller, prompt, uinavigationitem

任何机构都可以为我提供两行显示 UINavigationItem 提示文本的解决方案吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-22T12:51:33.757

没有内置的方法可以做到这一点。[下面是我从 stackOverflow 帖子UINavigationItem 与提示和活动指示器](https://stackoverflow.com/questions/2263479/uinavigationitem-with-prompt-and-activity-indicator)放在一起的一个似乎工作得很好的解决方法

这是它创建的模拟器屏幕截图： ![两行 UINavigationItem 提示的 iPhone 屏幕截图](../Images/2057a5e5617740dcb972fe244000de57.png)

请注意，由于文本是 a `UILabel`，因此您也可以修改其颜色、字体或其他任何内容。

```
// I have this code in viewDidLoad
UIView                      *viewContainingPrompt;
UIBarButtonItem             *promptButtonItem;

// Configuring the prompt title of the navigation bar so it is present but empty
[self.navigationItem setPrompt: @""];

// We will create a UIBarButtonItem that has a custom view (viewContainingPrompt).
// A subview of viewContainingPrompt will be a UILabel (headerLabel)
// We need to have this "intermediate" view to position the label at the right position 
// (the UIBarButtonItem ignores the origin and height of its custom view)
viewContainingPrompt = [[UIView alloc] initWithFrame: CGRectMake(0, 0, 0, 85)];
viewContainingPrompt.autoresizingMask = UIViewAutoresizingFlexibleWidth;

// Choose a width that puts 10 points on either end...
CGFloat labelWidth = self.navigationController.navigationBar.bounds.size.width - 20.0;
// Note that the '-60' below is determined by the width of the back button
// If someone can figure out how to determine this width at runtime this code
// would be much more robust.
UILabel *headerLabel = [[UILabel alloc] initWithFrame: CGRectMake(-60,-8,labelWidth,36)];
headerLabel.autoresizingMask = UIViewAutoresizingFlexibleWidth;
headerLabel.text = @"A quite long prompt string that will wrap to a second line to demonstrate multiline prompt.";
headerLabel.font = [UIFont systemFontOfSize: 14];
headerLabel.numberOfLines = 0; // Zero gives as many lines as will fit, could be 2
headerLabel.backgroundColor = [UIColor clearColor];
headerLabel.textColor = [UIColor colorWithRed: .1 green: .1 blue: .2 alpha: 0.8f];
headerLabel.shadowColor = [UIColor colorWithRed: 1 green: 1 blue: 1 alpha: 0.5f];
headerLabel.shadowOffset = CGSizeMake( 0, 1 );
headerLabel.textAlignment = UITextAlignmentCenter;
[viewContainingPrompt addSubview: headerLabel];
//[headerLabel release]; // Uncomment if not using ARC

promptButtonItem = [[UIBarButtonItem alloc] initWithCustomView: viewContainingPrompt];
self.navigationItem.leftBarButtonItem = promptButtonItem;
self.navigationItem.leftItemsSupplementBackButton = YES;
//[viewContainingPrompt release]; // Uncomment if not using ARC
//[promptButtonItem release]; // Uncomment if not using ARC 
```

我将不胜感激任何人就如何在执行期间计算后退按钮的宽度提供反馈，以便不必对宽度进行硬编码。

因为它是我不认为包含任何私有 API 或其他非法代码。

# mysql - 为什么 MySQL 更新只更新 1 个字段而不是 2 个？

> ID：11240231
> 
> 赞同：0
> 
> 时间：2012-06-28T07:49:13.363
> 
> 标签：mysql, average

我尝试了以下 MySQL 更新，但它只设置了第一个字段`c.avg_price_dil`而不是第二个字段`c.avg_dilution`。

奇怪的是，当我将更新分成如下所示的两部分时，两者都可以同时更新两个字段。是否存在影响此调用的基于组的函数？

**更新了两个字段**- 仅`c.avg_price_dil`更新。

```
update corp_act as c
inner join (
  select 
      m.gvkey, m.gvkey_iid, m.date_base, avg(m.price_dil) as avg_price, 
      avg(m.dilution) as avg_dilution
  from master as m
  inner join corp_act as c
  on c.gvkey = m.gvkey AND
      m.date_base between c.date_base AND 
                          LAST_DAY(c.date_base + INTERVAL 11 MONTH)
  where c.actioncd not in ('N/C','REA','SPN') AND 
        c.actioncd IS NOT NULL
  group by m.gvkey_iid, c.actioncd) as x
on 
   x.gvkey = c.gvkey AND 
   x.date_base = c.date_base
set 
    c.avg_price_dil = if(x.avg_price is null, 0, x.avg_price) AND
    c.avg_dilution = if(x.avg_dilution is null, 0, x.avg_dilution) 
```

当分成两个更新时，两者都有效：

**稀释更新：** - 工作正常

```
update corp_act as c
inner join (
  select 
       m.gvkey, m.gvkey_iid, m.date_base, avg(m.dilution) as avg_dilution
  from master as m
  inner join corp_act as c
  on c.gvkey = m.gvkey AND
     m.date_base between c.date_base AND 
                         LAST_DAY(c.date_base + INTERVAL 11 MONTH)
  where c.actioncd not in ('N/C','REA','SPN') AND 
        c.actioncd IS NOT NULL
  group by m.gvkey_iid, c.actioncd) as x
on 
   x.gvkey = c.gvkey AND 
   x.date_base = c.date_base
set 
   c.avg_dilution = if(x.avg_dilution is null, 0, x.avg_dilution) 
```

**价格更新：** - 工作正常

```
update corp_act as c
inner join (
  select 
     m.gvkey, m.gvkey_iid, m.date_base, avg(m.price_dil) as avg_price
  from master as m
  inner join corp_act as c
  on c.gvkey = m.gvkey AND
     m.date_base between c.date_base AND 
                         LAST_DAY(c.date_base + INTERVAL 11 MONTH)
  where c.actioncd not in ('N/C','REA','SPN') AND 
        c.actioncd IS NOT NULL
  group by m.gvkey_iid, c.actioncd) as x
on 
   x.gvkey = c.gvkey AND 
   x.date_base = c.date_base
set 
   c.avg_price_dil = if(x.avg_price is null, 0, x.avg_price) 
```

这两者之间的唯一区别是我只`avg`在单个函数中使用该函数一次。

有任何想法吗？谢谢你的帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-28T07:58:46.857

`set c.avg_price_dil = if(x.avg_price is null, 0, x.avg_price) AND c.avg_dilution = if(x.avg_dilution is null, 0, x.avg_dilution)`

尝试用`AND`逗号 ( `,`) 替换。

[http://dev.mysql.com/doc/refman/5.0/en/update.html](http://dev.mysql.com/doc/refman/5.0/en/update.html)

# c# - 列表中的枚举值

> ID：11240236
> 
> 赞同：13
> 
> 时间：2012-06-28T07:49:23.863
> 
> 标签：c#, asp.net

我有一个枚举类，例如，

```
public enum USERTYPE
{
   Permanant=1,
   Temporary=2,
} 
```

在我的业务对象中，我只是将此枚举声明为

```
private List<USERTYPE> userType=new List<USERTYPE>; 
```

在get/set方法中，我尝试过

```
public List<USERTYPE> UserType
    {
        get 
        {
            return userType;
        }
        set
        { 
            userType= value; 
        }
    } 
```

在这里它返回行数为0，我怎样才能在这里获得枚举中的所有值，任何人都可以在这里帮助我......

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2012-06-28T07:54:08.810

您可以使用它来获取所有单独的枚举值：

```
private List<USERTYPE> userTypes = Enum.GetValues(typeof(USERTYPE)).Cast<USERTYPE>().ToList(); 
```

如果你经常做这样的事情，你可以为它创建一个通用的实用方法：

```
public static T[] GetEnumValues<T>() where T : struct {
    if (!typeof(T).IsEnum) {
        throw new ArgumentException("GetValues<T> can only be called for types derived from System.Enum", "T");
    }
    return (T[])Enum.GetValues(typeof(T));
} 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-06-28T08:02:03.950

`GetValues`返回`System.Array`，但我们知道它实际上是一个`TEnum[]`（即从零开始索引的一维数组），`TEnum`在`USERTYPE`你的情况下。因此使用：

```
var allUsertypeValues = (USERTYPE[])Enum.GetValues(typeof(USERTYPE)); 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-06-28T12:54:42.640

UserType你能试试吗，

```
 UserType = Enum.GetValues(typeof(USERTYPE)).OfType<USERTYPE>().ToList(); 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-06-28T07:51:09.637

你所拥有的基本上是枚举列表。不是该枚举中的单个项目。

要获取枚举值列表，您可以执行

```
string[] str = Enum.GetNames(typeof(USERTYPE)); 
```

在 get/set 中使用 return string[] 而不是 List<>

```
public string[] UserType
{
    get 
    {
        return Enum.GetNames(typeof(USERTYPE));
    }
} 
```

我认为 set 在这里不起作用，因为您不能在运行时在枚举中添加值。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-06-28T08:00:48.727

如果要从列表中获取特定的枚举值，`user.UserType`则首先需要将`Add`枚举值添加到该列表中：

```
var user = new User();
//1 value - PERMANENT
user.UserType.Add(USERTYPE.Permanent); 
```

但是，如果您只需要从任意值中获取所有可能的值，`enum`那么您可以尝试`Enum.GetValues`

```
//2 values - Permanant and Temporary
var enums = Enum.GetValues(typeof(USERTYPE)); 
```

# java - Android动态启动活动

> ID：11240237
> 
> 赞同：0
> 
> 时间：2012-06-28T07:49:28.640
> 
> 标签：java, android, android-intent, android-activity

我对android开发很陌生。我的应用程序有很多视图/活动，用户可以根据他/她的输入从一个视图跳到另一个视图。所以我想创建一个接口 IView 它将具有一个功能

```
void openNewView(Class viewClass); 
```

视图类中的函数看起来像这样

```
public void openNewView(Class viewClass)
{
    Intent intent = new Intent(this, viewClass.class);
    startActivity(intent);
} 
```

整个想法是我的控制器可以监听用户输入，然后根据要求调用 openNewView。

我面临的问题是 java 不接受 Class 类型的参数

我在这里做错了什么。是否有解决我想要实现的目标的工作。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-28T07:57:33.237

一种好的方法是从这样的抽象 Activity 扩展您的所有活动：

```
public abstract class BaseActivity {

    //....
    public void openNewView(Class viewClass) {
        Intent intent = new Intent(this, viewClass.class);
        startActivity(intent);
    }
} 
```

这样做，您不必在每个活动中复制代码并保持代码清洁。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-28T07:52:20.433

尝试在 openNewView 方法中添加当前上下文参数：

```
void openNewView(Class viewClass,context); 
```

并在您的功能中：

```
public void openNewView(Class viewClass,Context context)
{
    Intent intent = new Intent(context, viewClass.class);
    context.startActivity(intent);
} 
```

# android - 安卓内存管理

> ID：11240241
> 
> 赞同：0
> 
> 时间：2012-06-28T07:49:38.650
> 
> 标签：android, caching, memory-management

应用程序的性能取决于内存的管理方式。由于我们在 android 设备上的内存确实有限，因此以有效的方式管理内存变得非常重要。

我正在构建一个应用程序，它在服务器上保存了几个图像。我需要以列表的方式展示它们。我正在从服务器获取图像到我的 sdcard 上，然后在列表中显示它们。但是在整个过程中，我在列表显示中遇到了延迟。看来我无法正确管理内存。

请建议有效的内存管理技术。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-28T08:28:15.840

它是通过 android 中的延迟加载完成的，您应该使用 onscrolllistener 阅读此链接 [Lazy Load images on Listview in android(Beginner Level)?](https://stackoverflow.com/questions/2912054/lazy-load-images-on-listview-in-androidbeginner-level) 还有[http://github.com/commonsguy/cwac-thumbnail](http://github.com/commonsguy/cwac-thumbnail)

# vb.net - 如何在数据表中动态创建列并为其赋值？

> ID：11240245
> 
> 赞同：13
> 
> 时间：2012-06-28T07:50:02.530
> 
> 标签：vb.net, datatable, vb.net-2010

我将不得不在运行时在数据表中创建列并为其分配值。我怎么能在 vb.net 中做到这一点。任何样品请...

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2012-06-28T07:58:59.833

如果您想在 VB.Net 中创建动态/运行时数据表，那么您应该按照以下步骤操作：

*   创建数据表对象。
*   将列添加到该数据表对象中。
*   将带有值的行添加到对象中。

例如。

```
Dim dt As New DataTable

dt.Columns.Add("Id", GetType(Integer))
dt.Columns.Add("FirstName", GetType(String))
dt.Columns.Add("LastName", GetType(String))

dt.Rows.Add(1, "Test", "data")
dt.Rows.Add(15, "Robert", "Wich")
dt.Rows.Add(18, "Merry", "Cylon")
dt.Rows.Add(30, "Tim", "Burst") 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-28T07:59:09.887

你试过什么，有什么问题？

创建[`DataColumns`](http://msdn.microsoft.com/en-us/library/system.data.datacolumn.aspx)并向 a 添加值[`DataTable`](http://msdn.microsoft.com/en-us/library/system.data.datatable.aspx)很简单：

```
Dim dt = New DataTable()
Dim dcID = New DataColumn("ID", GetType(Int32))
Dim dcName = New DataColumn("Name", GetType(String))
dt.Columns.Add(dcID)
dt.Columns.Add(dcName)
For i = 1 To 1000
    dt.Rows.Add(i, "Row #" & i)
Next 
```

**编辑**：

如果要读取 xml 文件并从中加载 DataTable，可以使用[`DataTable.ReadXml`](http://msdn.microsoft.com/en-us/library/system.data.datatable.readxml.aspx).

# android - 自定义进度对话框 xml

> ID：11240246
> 
> 赞同：0
> 
> 时间：2012-06-28T07:50:10.990
> 
> 标签：android, progressdialog

我想知道在哪里可以找到用于 progressDialog 的原始 XML，因为我想要完全相同的设计，除了更改背景颜色、边框、文本颜色和中心以及旋转图像。

我尝试使用自己的 XML 布局，但未能成功复制与原始设计相同的设计（小箭头、标题之间的线等......）

[http://thedevelopersinfo.files.wordpress.com/2009/10/with_title2.jpg](http://thedevelopersinfo.files.wordpress.com/2009/10/with_title2.jpg)

非常感谢 ！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-28T07:56:23.360

你可以在你的 android sdk 目录中找到它。

\android-sdk\platforms\android-XX\data\res\layout\progress_dialog.xml

# sql-server - 延迟后从触发器执行存储过程

> ID：11240247
> 
> 赞同：7
> 
> 时间：2012-06-28T07:50:22.363
> 
> 标签：sql-server, sql-server-2008, stored-procedures, sql-server-2000, sql-server-express

我想从触发器调用存储过程，如何在 x 分钟后执行该存储过程？我正在寻找其他的东西`WAITFOR DELAY`

谢谢

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-06-28T07:58:01.727

有一个定期运行的 SQL 代理作业并从表中提取存储过程参数 - 这些行还应指示存储过程的运行时间，因此 SQL 代理作业只会选择到期/稍微过期的行。它应该在调用存储过程后删除行或标记它们。

然后，在触发器中，只需在同一个表中插入一个新行。

您*不*希望在触发器中放入任何会以任何方式影响原始事务执行的内容 - 您绝对不希望造成任何延迟，或与同一数据库之外的任何内容进行交互。

* * *

例如，如果存储过程是

```
CREATE PROCEDURE DoMagic
    @Name varchar(20),
    @Thing int
AS
  ... 
```

然后我们会创建一个表：

```
CREATE TABLE MagicDue (
    MagicID int IDENTITY(1,1) not null, --May not be needed if other columns uniquely identify
    Name varchar(20) not null,
    Thing int not null,
    DoMagicAt datetime not null
) 
```

SQL 代理工作会做：

```
WHILE EXISTS(SELECT * from MagicDue where DoMagicAt < CURRENT_TIMESTAMP)
BEGIN
    DECLARE @Name varchar(20)
    DECLARE @Thing int
    DECLARE @MagicID int

    SELECT TOP 1 @Name = Name,@Thing = Thing,@MagicID = MagicID from MagicDue where DoMagicAt < CURRENT_TIMESTAMP

    EXEC DoMagic @Name,@Thing

    DELETE FROM MagicDue where MagicID = @MagicID
END 
```

触发器只有：

```
CREATE TRIGGER Xyz ON TabY after insert
AS
    /*Do stuff, maybe calculate some values, or just a direct insert?*/
    insert into MagicDue (Name,Thing,DoMagicAt)
    select YName,YThing+1,DATEADD(minute,30,CURRENT_TIMESTAMP) from inserted 
```

* * *

如果您在不支持代理的版本中运行，那么您可能不得不伪造它。我过去所做的是创建一个包含“可怜的人代理工作”的存储过程，例如：

```
CREATE PROCEDURE DoBackgroundTask
AS

     WHILE 1=1
     BEGIN
         /* Add whatever SQL you would have put in an agent job here */

         WAITFOR DELAY '00:05:00'
     END 
```

然后，创建第二个存储过程，这次是在`master`数据库中，等待 30 秒，然后调用第一个过程：

```
CREATE PROCEDURE BootstrapBackgroundTask
AS
    WAITFOR DELAY '00:00:30'
    EXEC YourDB..DoBackgroundTask 
```

然后，将此过程标记为启动过程，使用[`sp_procoption`](http://msdn.microsoft.com/en-us/library/ms181720.aspx)：

```
EXEC sp_procoption N'BootstrapBackgroundTask', 'startup', 'on' 
```

并重新启动服务 - 您现在将有一个持续运行的查询。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-26T10:19:02.010

我有一种类似的情况，在使用触发器处理插入到表中的记录之前，我想确保关系表中的所有相关相关数据也都在那里。

我的解决方案是创建一个临时表，该表由第一个表上的插入触发器填充。

临时表有一个更新的标志（默认设置为 0）和一个插入`get date()`日期字段，以及来自主表的相关标识符。

然后，我创建了一个计划的过程来循环遍历暂存表并执行我想单独针对每条记录执行的任何过程，并在处理每条记录时更新“更新标志”。

但是，这是我有点聪明的地方，在循环过程中查找具有 . 的临时表中的记录时`update flag = 0`，我还添加`AND`了`AND datediff(mi, Updated_Date, getdate())> 5`. 因此，直到将记录插入临时表 5 分钟后，才会​​真正处理该记录。

# jquery - twitter引导警报隐藏在初始化

> ID：11240252
> 
> 赞同：6
> 
> 时间：2012-06-28T07:50:51.280
> 
> 标签：jquery, twitter-bootstrap

我正在为我的警报使用 twitter 引导程序，并且我希望在输入出现错误时出现警报。我可以在初始化时隐藏它并在发生错误时显示它。但在那之后，警报再次消失。有什么方法可以确保警报一直存在，直到给出正确的输入

```
<div class="span4">  
                <div class="alert alert-error  fade in" id = "user_name_exist" >  
                   <button type="button" class="close">×</button>
                  <h4 class="alert-heading">Username error!</h4>  
                    The username entered is used by another user. Please choose another one!
                </div>  
</div> 
```

任何人都可以帮助我吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-06-14T18:50:15.883

对于它的价值，我不喜欢编辑下载的包。我有同样的事情，但我所做的只是删除`data-dismiss="alert"`了关闭按钮的一部分。然后使用与上面 Nintin 基本相同的代码来隐藏警报。

HTML 代码

```
<div id="AddAlert" class="alert alert-block" style="display:none;">
  <button type="button" class="close">&times;</button>
  <h4 id="AddAlertH4">Error</h4>
  <div id="AddAlertMessage">My error message goes here.</div>
</div> 
```

JS代码

```
$(".close").click(function(){
    $("#AddAlert").hide();
}); 
```

我还使用 PHP 动态填充我的错误消息，但我没有在这里概述，因为它不是问题的一部分。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-04-14T05:26:59.213

这是一个老问题，但以下对我有用（来自stackoverflow上的不同答案，但我再也找不到该答案的链接了）。希望这可以帮助某人。

```
$('.alert .close').on("click", function(e) {
e.stopPropagation();
e.preventDefault();
$(this).parent().hide();
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-27T07:43:02.927

您需要从 bootstrap-alert.js 文件中删除该行

```
function removeElement() {
  $parent
    .trigger('closed')
    .remove()
} 
```

删除 .remove() 并保存 js 文件

比在您的代码中添加 Javascript 来手动关闭 ex

```
 $(".close").click(function(){
$("#myalert").hide();
 }); 
```

# google-drive-api - 权限访问

> ID：11240253
> 
> 赞同：1
> 
> 时间：2012-06-28T07:51:00.980
> 
> 标签：google-drive-api

新版本 2 API 引入了访问权限的方法。应用程序可以创建、删除、修改和读取一个权限，但为什么 get 方法不返回值属性，这限制了应用程序可以对权限执行的操作？JavaScript 可嵌入共享组件是一些用例的解决方案，但不是全部。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-28T16:27:59.823

为了保护隐私，省略了 value 属性。可以读取文件权限的用户应该无法查看所有其他具有权限的用户的电子邮件地址。

您应该使用权限 id，它可以通过[about](https://developers.google.com/drive/v2/reference/about/get)方法作为[about 资源](https://developers.google.com/drive/v2/reference/about#resource)找到，并且是：

```
The current user's ID as visible in the permissions collection. 
```

# javascript - 未捕获的 SyntaxError：带有 .append() 字符串的意外标识符

> ID：11240259
> 
> 赞同：0
> 
> 时间：2012-06-28T07:51:23.197
> 
> 标签：javascript, jquery

我不断收到这个错误`$('#savetickets-list')`。我想动态地将字段添加到表中，该表具有 HTML 中的 id。

```
<div class="savetickets-list">
</div> 
```

在javascript中，我在for循环中填写表格

```
for (var i = 0; i < len; i++) {
    // the data comes from a web database
    var ticketname = results.rows.item(i).iTicketName;

    $('#savetickets-list').append('
        <div class="saveticket gradient-top">
            <h3>' + ticketname + '</h3>
        </div>
    ');
} 
```

我不知道如何解决这个问题。加载了 jQuery，我还检查了选择器的名称。

请帮忙。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-28T07:55:30.617

```
$('#savetickets-list').append('\
        <div class="saveticket gradient-top">\
            <h3>' + ticketname + '</h3>\
        </div>\
    '); 
```

当你想在 JS 中写多行字符串时，你必须转义新行。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-28T07:56:00.263

这是因为您正在使用新行。

JS 不会自动为您读取新行。它将它们视为新语句。

我喜欢这样做的方式是：

```
$('#savetickets-list').append('<div class="saveticket gradient-top">'+
    '<h3>' + ticketname + '</h3>'+
'</div>'); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-28T07:57:04.670

刚检查。问题在于换行符，您必须**连接**字符串或将所有语句放在一行中。

# drupal - 谁能告诉我如何在 drupal webform 结果中添加字段？

> ID：11240262
> 
> 赞同：0
> 
> 时间：2012-06-28T07:51:27.193
> 
> 标签：drupal, drupal-webform

默认字段是 #,SUBMITTED,USER,IP ADDRESS... 我需要添加一个额外字段作为 Deal Title & Expiry 这是我为我的网络表单添加的字段，有人可以建议一种方法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-28T10:25:22.573

有一个名为 - [Webform MySQL View的模块](http://drupal.org/project/webform_mysql_views/)

脚步：-

*   启用模块
*   网址：Base_URL/admin/content/webform/mysql
*   单击 MySQL 视图选项卡
*   选中要为其创建 MySQL 视图的 Web 表单名称旁边的框
*   提交表格。

一旦您为给定的 Web 表单创建了 MySQL 视图，该视图将在您添加、删除或重新排序该 Web 表单的组件时自动更新。

试试这个，很简单。

# c - 以负数为参数的 print_binary 函数有什么问题？

> ID：11240263
> 
> 赞同：0
> 
> 时间：2012-06-28T07:51:28.953
> 
> 标签：c

我想使用以下函数以二进制模式打印一个整数：

```
#include <stdio.h>

void print_binary(int n)
{
    int i = 0;

    for (i = sizeof(n)*8 - 1; i >= 0; i--)
    {
        printf("%d", ((n & ((1 << (i + 1)) - 1)) >> i) ? 1 : 0);
    }
} 
```

主程序

```
int main(int argc, char *argv[])
{
    printf("%d in binary:\n", atoi(argv[1]));
    print_binary(atoi(argv[1]));
    printf("\n");

    printf("%d in hex: 0x%x\n", atoi(argv[1]), atoi(argv[1]));

    return 0;
} 
```

如果我将 -1 传入其中，则输出不正确，出了什么问题？

```
-1 in binary:
01111111111111111111111111111111
-1 in hex: 0xffffffff 
```

是什么导致最高有效位变为 0？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-28T07:56:34.360

当（即在您的平台中）时，此表达式`1 << (i + 1)` 是未定义的行为。`i + 1 == 32``>= CHAR_BIT * sizeof (int)`

> （C99，6.5.7p3）“如果右操作数的值为负数或大于或等于提升的左操作数的宽度，则行为未定义。”

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-28T07:58:56.477

您调用中的表达式`printf`可以简化：

```
printf("%d", (n >> i) & 1); 
```

顺便说一句，这也将解决您的问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-28T08:04:40.443

正如其他人指出的那样，移位`1`>=32( `sizeof(int)`) 位将导致未定义的行为。

为什么在打印出这些位时会变得如此复杂？一个简单的

```
for (i = sizeof(n)*8 - 1; i >= 0; i--)
{
    printf("%d", n & (1 << i)  ? 1 : 0);
} 
```

[会做](http://ideone.com/phIMX)你想做的。

# python - 多个控制语句并在 python 中保持 80 个字符行

> ID：11240266
> 
> 赞同：1
> 
> 时间：2012-06-28T07:51:35.313
> 
> 标签：python

在尝试遵守 PEP8 时，有时很难保持在 80 个字符的限制内。例如：

```
for i in range(10):
    for k in range(10):
        if k < 5:
            try:
                with line as open(file):
                    if line.blah in text:
                        dosomethingwithnospaceleft(bla,
                                                   bla,
                                                   ) 
```

我的观点是，80 个字符的限制有时会变得有点荒谬，并且在某些方面难以阅读。这种格式背后的原因是什么？对于大多数不使用编辑器 > 20 岁的人来说，这不是一个过时的标准吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-28T07:55:05.847

限制行长是好的，因为它通常会使文本更具可读性。此外，缩进这么多级别通常表明您应该将某些内容分解到不同的函数中。

您可能还想提前继续，为您节省缩进级别 ( `if k >= 5: continue`, `if line.blah not in text: continue`)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-28T07:56:47.573

来自 [PEP-008](http://www.python.org/dev/peps/pep-0008/#maximum-line-length)

> 最大线长
> 
> 将所有行限制为最多 79 个字符。
> 
> 周围还有很多设备限制在 80 个字符行；此外，将窗口限制为 80 个字符可以让多个窗口并排放置。此类设备上的默认包装会破坏代码的视觉结构，使其更难理解。因此，请将所有行限制为最多 79 个字符。对于流动的长文本块（文档字符串或注释），建议将长度限制为 72 个字符。
> 
> 包装长行的首选方法是在括号、方括号和大括号内使用 Python 的隐含行继续。通过将表达式括在括号中，可以将长行分成多行。这些应该优先使用反斜杠来继续行。确保适当缩进续行。打破二元运算符的首选位置是在运算符之后，而不是在它之前。一些例子：

```
class Rectangle(Blob):

    def __init__(self, width, height,
                 color='black', emphasis=None, highlight=0):
        if (width == 0 and height == 0 and
            color == 'red' and emphasis == 'strong' or
            highlight > 100):
            raise ValueError("sorry, you lose")
        if width == 0 and height == 0 and (color == 'red' or
                                           emphasis is None):
            raise ValueError("I don't think so -- values are %s, %s" %
                             (width, height))
        Blob.__init__(self, width, height,
                      color, emphasis, highlight) 
```

# solid-state-drive - 如果我在仅将 0 变为 1 的 SSD 上执行写入，我可以依靠驱动器在写入之前不擦除整个块吗？

> ID：11240267
> 
> 赞同：0
> 
> 时间：2012-06-28T07:51:35.457
> 
> 标签：solid-state-drive

据我了解，是擦除使 SSD 磨损，而不是写入本身。因此，从驱动器制造商的角度来看，优化消除对擦除的需求将是非常有益的。我可以认为他们这样做是理所当然的吗？

我希望您假设我正在直接写入磁盘并且没有文件系统可以搞砸。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-06T19:51:39.153

如果一个块中有空页并且 SSD 想要写入这些页，它不会先擦除该块。如果 SSD 找不到任何要写入的空页面，SSD 只会在写入之前擦除一个块，因为执行完整的读取 - 擦除 - 写入非常慢。

此外，写入和擦除的磨损大致相同。两者都涉及将电子拉过氧化物层，只是在不同的方向。

此外，NAND 的擦除状态全为 1。然后您将 1 写入 0。您需要擦除 0 以使其恢复为 1。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-06T16:12:22.850

除非我读错了您的问题，否则我认为您误解了 SSD 的工作原理。

SSD 由大块（通常为 512k）组成，比我们在文件系统中习惯的（通常为 4k）大得多。

*除非该块已经是空的，否则在将任何内容*写入块之前，擦除过程是必要的。

因此，擦除磨损磁盘的问题是，如果使用了 512k 块中的 4k，则必须擦除整个 512k 块并写入原始 4k +您添加的任何其他内容。这会造成过度磨损并减慢速度，因为您需要“读取-擦除-写入”（称为“写入放大”）而不是一次“写入”。

这稍微简化了它，因为驱动器固件做了很多聪明的事情来尝试确保块被最佳填充，例如它试图保留大量空块以避免写入缓慢。

希望这有助于/没有进一步混淆事情！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-09-08T18:49:04.727

在 SSD 使用 read-erase-write 的情况下，它首先读取块的内容，然后擦除它并写入新值。所以它在写入之前擦除了整个块，但它已经保存了下一次写入操作的内容。在一些非读写的SSD中，当你在写入时，它会在新的页面上写入（可能在同一个块上，然后上一页无效）。在这种情况下，只有在确保块中的每个页面都无效或已被复制到另一个地方后，它才会擦除该块。

# php - 如何制作“总决赛树表”，或者叫什么？

> ID：11240270
> 
> 赞同：-2
> 
> 时间：2012-06-28T07:51:48.337
> 
> 标签：php, javascript, html, flash, graphic

我正在和一些朋友在一个小型私人迷你 MMORPG 游戏服务器上工作，我们想做一个 PvP 事件（玩家 VS 玩家）战斗，并将现场结果以树的形式发布在网站上。

我不知道它叫什么，我在谷歌上尝试了每个关键字组合，这就是我最终想出的（底部有 2 张图片）。

我需要这两种树的名称，叫什么，这样我就可以做更多的谷歌搜索。

我还需要知道是否有任何 PHP/HTML/JS 或 FLASH、脚本或 API 或可以帮助我完成此任务的东西。我从 PHP/MySQL 端对其进行编码没有问题，但在客户端渲染和打印看起来非常困难，因为如果我们有很多玩家，树会变得非常大。请帮忙。

![在此处输入图像描述](../Images/86b1f92a5fc60b558c6521aff71ff358.png)

![在此处输入图像描述](../Images/5cd9bc8dc986473b56ac5727fa6484ae.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-28T07:58:25.987

我认为这被称为完整的完整二叉树。

[在这里](http://courses.cs.vt.edu/~cs3114/Spring10/Notes/T03a.BinaryTreeTheorems.pdf)你可以找到一些二叉树的数学信息。

# javascript - Dynatree.js 如何使用 dyna.js 在 html 中选择节点

> ID：11240274
> 
> 赞同：0
> 
> 时间：2012-06-28T07:52:09.033
> 
> 标签：javascript, jquery, jquery-dynatree

我正在处理 html 表单，我根据项目的要求使用了 dynatree 进行选择和多选。我需要做的是制作一个编辑表单，用户可以从数据库中获取所有字段。这意味着我需要向用户展示一个带有已选择字段的 dynatree。这是我的示例代码：

```
<span  id="action" name="action">
  <ul>
       <li id="DisruptiveAction" class="folder expanded">DisruptiveAction (5)
      <ul>    
        <li id="allow" title="optional">allow           
        <li id="deny" title="optional">deny
        <li id="pass" title="optional" class="selected" >pass           
        <li id="block" title="optional">block
        <li id="redirect" title="optional">redirect                         

     </ul>
   </ul>
</span> 
```

Java脚本：

```
$("#action").dynatree({
        classNames: {
            container: "action-container",
            checkbox: "dynatree-radio"
        },
        selectMode: 3,
        onSelect: function(select, node) {
            var selKeys = $.map(node.tree.getSelectedNodes(), function(node){
                return node.data.key;
            });
            $("#selectedAction").val(selKeys.join(","));
                var selRootNodes = node.tree.getSelectedNodes(true);
                var selRootKeys = $.map(selRootNodes, function(node){
                    return node.data.key;
                });
        }           
    }); 
```

在上面提到的 html 中，即使我使用带有 li 元素的 class = "selected" 但它仍然没有在 UI 上显示为选中状态。提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-29T20:00:22.917

Dynatree 在初始化时以及在树的整个生命周期中都会创建自己的元素。因此，您添加的 li 元素不是树的 li 元素。

在“节点选项”部分下查看[此文档。](http://wwwendt.de/tech/dynatree/doc/dynatree-doc.html)你会看到你可以像这样添加一个类：

```
<div id="tree">
<ul>
  <li id="DisruptiveAction" class="folder expanded">DisruptiveAction (5)
  <ul>    
    <li id="allow" title="optional">allow           
    <li id="deny" title="optional">deny
    <li id="pass" title="optional" data="addClass: 'dynatree-selected'" >pass           
    <li id="block" title="optional">block
    <li id="redirect" title="optional">redirect                         
 </ul> 
```

这是添加类的通用代码。可能有一种更具体的方式来指定一个元素被选中，因为它是一个核心 dynatree 概念，而不是用户定义的类。

# python - 我可以在 setuptools 中定义可选包吗？

> ID：11240285
> 
> 赞同：12
> 
> 时间：2012-06-28T07:52:39.803
> 
> 标签：python, setuptools

目前，我的一个包需要一个 JSON 解析器/编码器，并且设计为在必要时使用（`simplejson`如果有的话）回退到`json`模块（在标准库中）（因为基准测试显示`simplejson`更快）。

然而，最近它在使用时是否`simplejson`会安装`zc.buildout`- 我相信移动到 github 的问题。这让我想知道；是否可以在我的`setup.py`文件中定义可选包，如果不可用，不会停止我的包的安装？

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2014-07-08T19:47:06.133

# 安装时的可选包。

我假设您正在谈论您的`setup.py`脚本。您可以将其更改为：

```
# mypackage/setup.py

extras = {
   'with_simplejson': ['simplejson>=3.5.3']
}

setup(
    ...
    extras_require=extras,
    ...) 
```

那么您可以执行以下任一操作：

*   `pip install mypackage`,
*   `pip install mypackage[with_simplejson]`

后者安装`simplejson>=3.5.3`.

与其尝试安装所有内容并回退到已知的良好版本，不如安装您知道工作的软件包子集。

# 执行时的可选包。

一旦你有两组不同的软件包可以安装，你需要确保如果它们可用的话你可以使用它们。例如对于您的`json`导入：

```
try:
    # helpful comment saying this should be faster.
    import simplejson as json
except ImportError:
    import json 
```

另一个更复杂的例子：

```
try:
    # xml is dangerous
    from defusedxml.cElementTree import parse
except ImportError:
    try:
        # cElementTree is not available in older python
        from xml.cElementTree import parse
    except ImportError:
        from xml.ElementTree import parse 
```

但是你也可以在一些包中找到这种模式：

```
try:
    optional_package = None
    import optional.package as optional_package
except ImportError:
    pass

...

if optional_package:
    # do addtional behavior 
```

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2012-06-28T08:03:00.610

AFAIK 没有办法定义可选包，这样做也没有用。当您定义一个可选包时，您期望什么？它是在它还不可用时安装的吗？（这会以某种方式使其成为强制性的）

不，恕我直言，解决此问题的正确方法是在要使用该包的导入中。例如：

```
try:
    from somespecialpackage import someapi as myapi
except ImportError:
    from basepackage import theapi as myapi 
```

这当然要求两个 API 兼容，但`simplejson`标准库`json`包就是这种情况。

# java - Maven IDEA 插件（或 eclipse 插件）

> ID：11240288
> 
> 赞同：4
> 
> 时间：2012-06-28T07:52:46.620
> 
> 标签：java, eclipse, maven, intellij-idea

据我了解，使用idea插件在Intellij中打开Maven构建的项目并不是最好的方法，即调用：

```
mvn idea:idea 
```

但是直接打开 pom 文件（Intellij 有 Maven 的默认插件）；同样的事情，对于日食。

您能否就为什么这是一种更好的方法提供一些论据？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-28T07:55:57.820

这同样适用于 IntelliJ 和 Maven：

*   更改`pom.xml`文件不会反映在您的 IDE 中，您必须每次都重新构建项目（可能会丢失一些配置（？））。此外，如果任何团队成员修改`pom.xml`了 ，您必须记住重新构建您的项目（这将需要关闭并重新打开它）。

*   打开新项目时需要额外的步骤

*   IDE 有一些其他的 Maven 特性，例如前面提到的两个环境都可以显示依赖图

仅当您的 IDE 发疯并且无法正确计算 maven 配置时，才使用 mvn 插件作为最后的手段。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-28T11:50:21.513

对于eclipse，maven-eclipse插件并没有真正维护

# c++ - 链接到旧版本的 gcc

> ID：11240290
> 
> 赞同：0
> 
> 时间：2012-06-28T07:53:00.163
> 
> 标签：c++, linux, gcc, dynamic-linking

我有 CentOS 6.2（64 位，默认为 gcc 4.4.6）。不幸的是，我的代码只能用 gcc 3.4.6 编译，所以我在 /home/rajat/local 下单独安装了 gcc（从源代码）。在链接一个简单的“Hello World”程序时，我得到以下信息。

```
>ldd a.out 
linux-vdso.so.1 =>  (0x00007fff215ff000)
libstdc++.so.6 => /home/rajat/local/lib64/libstdc++.so.6 (0x00007f11853e7000)
libm.so.6 => /lib64/libm.so.6 (0x00000033be400000)
libgcc_s.so.1 => /home/rajat/local/lib64/libgcc_s.so.1 (0x00007f11851ce000)
libc.so.6 => /lib64/libc.so.6 (0x00000033bd000000)
/lib64/ld-linux-x86-64.so.2 (0x00000033bcc00000) 
```

虽然 stdc++ 和 gcc 链接到我的 3.4.6 库，但 libm 和 libc 仍然链接到默认库。这个可以吗？？3.4.6的安装也没有产生libm或者libc库？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-28T07:58:09.037

是的，没关系。

libc/libm 是 glibc 的一部分，而不是 gcc 编译器。另一方面，libstdc++ 是 gcc 的一部分。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-28T08:08:13.447

库`/lib`和`/usr/lib`它们的 64 位对应物是*系统范围的*库。它们应该是*编译器中立*的，除 GCC 之外的其他编译器也可以链接到它们，而且它们确实可以链接到它们，特别是因为`libc`它是与操作系统内核接口的唯一可移植方式。

`libc`编写者非常注意编写头文件，以使不同的编译器生成相同的二进制内存对象，以便与库中的代码正确交互。此外，还有一个定义良好的 OS ABI 接口，所有编译器都遵守该接口，以便相互兼容。对于 C 以外的语言，这可能不是真的，例如，来自不同 C++ 编译器版本的目标文件很少能很好地相互配合。

编译器特定的库没有安装，`/lib`或者`/usr/lib`有时可以静态链接，以便可以删除依赖项。

# wso2 - WSO2 BPS - 需要 BPEL 教程

> ID：11240299
> 
> 赞同：1
> 
> 时间：2012-06-28T07:53:26.263
> 
> 标签：wso2, bpel

我正在为即将到来的项目评估 BPEL 引擎，目前我的列表中有 Oracle BPEL 流程管理器和 WSO2 BPS。

**需求**：需要创建一个简单的 BPEL 流程（公开为异步 Web 服务），该流程可以调用外部 Web 服务并等待异步回调。我需要能够使用具有 Web 服务（BPEL 流程）输入和输出数据类型的 XSD 文件。

**到目前为止**：我已经设法下载并设置了你的 Eclipse 插件和服务器可执行文件来测试这个场景。

**问题**：是否有关于如何使用 WSO2 BPEL eclipse 插件执行此操作的教程、示例或文档。

任何帮助将不胜感激:)

干杯!

佛陀

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-28T08:38:09.900

[您可以从此处](http://wso2.com/products/developer-studio)下载具有 eclipse BPEL 插件的 WSO2 Developer Studio 。[您可以在此处](http://kalpads.blogspot.com/2012/06/how-to-develop-ws-bpel-for-apache-ode_18.html)找到 Kalpa 最近的一篇博客文章，
但此示例不包含异步调用或关联。但希望这对你来说是一个好的开始。[您可以在此处](http://blog.afkham.org/2012/05/ws-bpel-spec-sample-using-wso2-bps.html)
找到 Azeez 的 WS-BPEL 规范示例。它确实具有异步调用和关联，但没有分步指南。但是如果您对 BPEL 编辑器足够熟悉，您可以自己尝试这个示例。 您还可以[在此处](http://wso2.org/premium/webinars/developing-bpel-processes-using-wso2-carbon-studio)找到此网络研讨会，该研讨会演示了如何实现一个简单的 BPEL 流程。

高温高压

# c# - 我可以使用 PLINQ 并行处理图像吗？

> ID：11240306
> 
> 赞同：3
> 
> 时间：2012-06-28T07:54:05.310
> 
> 标签：c#, linq, image-processing, gdi+, plinq

我想将一张图像的 Alpha 通道与其他约 1000 张图像进行比较。我的比较方法如下所示：

```
public static unsafe double Similiarity (Bitmap a, Bitmap b)
{
    BitmapData aData = a.LockBits (
        new Rectangle (0, 0, a.Width, a.Height), 
        System.Drawing.Imaging.ImageLockMode.ReadOnly, a.PixelFormat);
    BitmapData bData = b.LockBits (
        new Rectangle (0, 0, b.Width, b.Height), 
        System.Drawing.Imaging.ImageLockMode.ReadOnly, b.PixelFormat);
    int PixelSize = 4;

    double sum = 0;
    for (int y=0; y<aData.Height; y++) {
        byte* aRow = (byte *)aData.Scan0 + (y * aData.Stride);
        byte* bRow = (byte *)bData.Scan0 + (y * bData.Stride);
        for (int x=0; x<aData.Width; x++) {
            byte aWeight = aRow [x * PixelSize + 3];
            byte bWeight = bRow [x * PixelSize + 3];
            sum += Math.Abs (aWeight - bWeight);
        }
    }
    a.UnlockBits (aData);
    b.UnlockBits (bData);

    return 1 - ((sum / 255) / (a.Width * a.Height));
} 
```

我认为加快计算速度的最简单方法是使用 PLINQ：

```
var list = from Bitmap img in imageList.AsParallel where (Similiarity (referenceImage, img) > 0.5) select img; 
```

但是在执行时 gdiplus 中有一个异常：

```
System.InvalidOperationException: The operation is invalid [GDI+ status: Win32Error]
  at System.Drawing.GDIPlus.CheckStatus (Status status) [0x00000] in <filename unknown>:0 
  at System.Drawing.Bitmap.LockBits (Rectangle rect, ImageLockMode flags, PixelFormat format, System.Drawing.Imaging.BitmapData bitmapData) [0x00000] in <filename unknown>:0 
```

我知道 gdiplus 必须在不同的进程中执行，但我认为 PLINQ 正在这样做。我的假设有什么问题？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-28T11:26:42.120

我建议将权重计算与相似性比较分开，如下所示：

```
public static unsafe byte[,] GetWeight(Bitmap a)
{
    BitmapData aData = a.LockBits(new Rectangle(0, 0, a.Width, a.Height), ImageLockMode.ReadOnly, a.PixelFormat);
    const int pixelSize = 4;

    byte[,] weight = new byte[aData.Width, aData.Height];
    for (int y = 0; y < aData.Height; y++)
    {
        byte* aRow = (byte*)aData.Scan0 + (y * aData.Stride);
        for (int x = 0; x < aData.Width; x++)
        {
            byte aWeight = aRow[x * pixelSize + 3];
            weight[x, y] = aWeight;
        }
    }
    a.UnlockBits(aData);
    return weight;
}

public static double GetSimilarity(byte[,] weightsA, byte[,] weightsB)
{
    double sum = 0;
    int height = weightsA.GetLength(1);
    int width = weightsA.GetLength(0);
    for (int y = 0; y < height; y++)
    {
        for (int x = 0; x < width; x++)
        {
            byte aWeight = weightsA[x,y];
            byte bWeight = weightsB[x, y];
            sum += Math.Abs(aWeight - bWeight);
        }
    }

    return 1 - ((sum / 255) / (width * height));
} 
```

调用本身将如下所示：

```
var referenceWeigth = GetWeight(referenceImage);    
var list =
        imageList
            .AsParallel()
            .Select(image => new {@Image = image, @Weight = GetWeight(image)})
            .Where(imageAndWeight => GetSimilarity(imageAndWeight.Weight, referenceWeigth) > 0.5)
            .Select(imageAndWeight => imageAndWeight.Image); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-28T08:06:00.043

我认为问题可能是您尝试同时在不同线程中锁定相同的位。一个可能的解决方案（因为您只是在阅读）应该首先从每个位图中提取位，然后只使用这些数组来并行比较它们。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-28T08:10:35.070

我看到的问题是，虽然`img`是从列表中获取的，但`referenceImage`在多个线程中使用的是同一个实例，每个线程都试图锁定它。

考虑将参考图像锁定在外部，并传递 BitmapData。

# sql - Sql数据操作

> ID：11240310
> 
> 赞同：0
> 
> 时间：2012-06-28T07:54:24.773
> 
> 标签：sql, plsql, pivot, plsqldeveloper

我以下列方式在表格中有数据

表名：历史

```
page_url       verified         day
------------------------------------------
some_url1      true             2012-06-25
some_url2      true             2012-06-24
some_url1      false            2012-06-25
some_url2      false            2012-06-24 
```

这就像使用天字段值作为另一个表中的字段名称

我需要以下方式的输出：

```
page_url           2012-06-25         2012-06-24
------------------------------------------------
some_url1          true               false  
some_url2          true               false 
```

是否可以使用 pl/sql 或存储过程？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-28T08:01:56.850

您在这里寻找的是旋转您的列。如果这些列在您的示例数据中受到限制，那么您可以使用`CASE`如下简单语句来执行此操作：

```
SELECT page_url, 
   MAX(CASE WHEN day = '2012-06-25' THEN verified END) as '2012-06-25',
   MAX(CASE WHEN day = '2012-06-24' THEN verified END) as '2012-06-24'
FROM tableName
GROUP BY page_url 
```

# android - 在 android 中使用 jtds 驱动程序连接到 sqlserver 的问题？

> ID：11240317
> 
> 赞同：0
> 
> 时间：2012-06-28T07:55:03.987
> 
> 标签：android

这是我的代码，我正在尝试使用 jtds1.2.5 驱动程序连接到 sqlserver 2000，但我在 android 中发现类未找到异常

我已将驱动程序添加到构建路径中，但它仍然显示 classnot found 异常

我将 jtds jar 文件添加到构建路径中，如下所示

projrct->properties->java buildpath->添加外部jar->jtds.jar

我的代码是

包 com.sqlconnect.pack；

```
import java.sql.Connection;
import java.sql.DriverManager;
import java.sql.ResultSet;
import java.sql.Statement;

import android.app.Activity;
import android.os.Bundle;
import android.util.Log;
import net.sourceforge.jtds.jdbc.Driver;

public class SqlconnectActivity extends Activity {
    /** Called when the activity is first created. */
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);
        Log.i("Android","SQLConnection");
        Connection con=null;
        try{

           // Class.forName("com.microsoft.jdbc.sqlserver.SQLServerDriver");
            Class.forName("net.sourceforge.jtds.jdbc.Driver");
            //jdbc:microsoftsqlserver
            con=DriverManager.getConnection("jdbc:jtds:sqlserver://10.0.2.2:1433/Master","sa","sa");
            Log.w("Connection","open");

            Statement st=con.createStatement();
            ResultSet rs=st.executeQuery("select * from login");
            while(rs.next()==true)
            {
                Log.i("Data",rs.getString(1));

            }
            con.close();
        }
        catch(Exception e)
        {
            System.err.println("Connecting Error"+e);

        }
    }
} 
```

在这个问题上帮我....

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-28T08:11:11.730

您不应该直接从设备连接到您的 SQL Server。这是一个很大的安全风险。

最好托管一个连接到 SQL Server 的 Web 服务，并让您的 android 设备与该服务通信。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-19T13:15:46.520

我遇到了同样的问题，认为构建设置没有问题，只是应用程序需要清理。

清理构建并重试..希望它应该工作。

# powershell - 在 Active Directory 中创建联系人的脚本不起作用

> ID：11240318
> 
> 赞同：0
> 
> 时间：2012-06-28T07:55:04.563
> 
> 标签：powershell, active-directory, contacts

我在测试环境中运行脚本，它运行良好 我在生产环境中运行脚本，它不起作用

在域控制器上启动时，受 Windows Server 2008 R2 Standard 或 Enterprise 的控制。

您必须在“-”运算符的右侧提供一个值表达式。在 C:\Scripts\GalSync.ps1:89 char:14 + $targetCred - <<<< 属性 targetAddress + CategoryInfo : ParserError: (:) [], ParseException + FullyQualifiedErrorId : ExpectedValueExpression

89 Str **$targetCred - 属性目标地址**

```
### --- GALSYNC.PS1 ---
#
#  Written by Carol Wapshere
#
#  Manages contacts in two domains based on mail-enabled users in the other domain.
#   - Contacts are created for new users.
#   - Contacts are deleted if the source user no longer meets the filter requirements.
#   - Contacts are updated with changed information.
#
#  NOTES:
#   - Requires RSAT roles and features installed. Ref http://blogs.technet.com/heyscriptingguy/archive/2010/01/25/hey-scripting-

guy-january-25-2010.aspx
#   - Attribute deletions are not replicated - only attribute adds and changes.
#   - A user account is needed in each domain with permission to create contacts.
#   - The passwords for these user accounts must be stored in secure files using the command:
#       read-host -assecurestring | convertfrom-securestring | out-file C:\scripts\filename.txt
#

### --- GLOBAL DEFINITIONS ---

$DOMAIN_1 = "192.168.50.11"
$DOMAIN_2 = "192.168.11.10"

$OU_CONTACTS_1 = "OU=Contact,OU=Selta,DC=rvsco,DC=ru"
$OU_CONTACTS_2 = "OU=Contact,OU=RVSco,DC=selta,DC=ru"

$USER_1 = "rvsadmin@rvsco.ru"
$USER_2 = "seltaroot@selta.ru"

$PWFILE_1 = "C:\scripts\rvsco.txt"
$PWFILE_2 = "C:\scripts\selta.txt"

## The following list of attributes will be copied from User to Contact
$arrAttribs = 

'displayName','company','givenName','mobile','postalAddress','postalCode','sn','st','streetAddress','telephoneNumber','title' 

,'mail','c','co','l','facsimileTelephoneNumber','physicalDeliveryOfficeName'

## The following filter is used by Get-ADObject to decide which users will have contacts.
$strSelectUsers = 'ObjectClass -eq "user" -and homeMDB -like "*" -and -not userAccountControl -bor 2 -and -not 

msExchHideFromAddressLists -eq $true -and -not displayName -eq "Administrator"'

### --- FUNCTION TO ADD, DELETE AND MODIFY CONTACTS IN TARGET DOMAIN BASED ON SOURCE USERS ---

function SyncContacts
{
  PARAM($sourceDC, $sourceUser, $sourcePWFile, $targetDC, $targetUser, $targetPWFile, $targetOU)
  END
    {
    $colUsers = @()
    $colContacts = @()
    $colAddContact = @()
    $colDelContact = @()
    $colUpdContact = @()

    $arrUserMail = @()
    $arrContactMail = @()

    write-host "Enumerating..."

    ### ENUMERATE USERS

    $password = get-content $sourcePWFile | convertto-securestring
    $sourceCred =  New-Object -Typename System.Management.Automation.PSCredential -Argumentlist $sourceUser,$password

    $colUsers = Get-ADObject -Filter $strSelectUsers -Properties * -Server $sourceDC -Credential $sourceCred

    if ($colUsers.Count -eq 0)
    {
        write-host "No users found in source domain!"
        break
    }

    foreach ($user in $colUsers)
    {
        $arrUserMail += $user.mail
    }

    ### ENUMERATE CONTACTS

    $password = get-content $targetPWFile | convertto-securestring
    $targetCred =  New-Object -Typename System.Management.Automation.PSCredential -Argumentlist $targetUser,$password

    $colContacts = Get-ADObject -Filter 'objectClass -eq "contact"' -searchbase $targetOU -Server $targetDC -Credential 

$targetCred -Properties targetAddress

    foreach ($contact in $colContacts)
    {
        $strAddress = $contact.targetAddress -replace "SMTP:",""
        $arrContactMail += $strAddress
    }

    ### FIND CONTACTS TO ADD AND UPDATE

    foreach ($user in $colUsers)
    {
        if ($arrContactMail -contains $user.mail)
        {
            write-host "Contact found for " $user.mail
            $colUpdContact += $user
        }
        else
        {
            write-host "No contact found for " $user.mail
            $colAddContact += $user
        }
    }

    ### FIND CONTACTS TO DELETE

    foreach ($address in $arrContactMail)
    {
        if ($arrUserMail -notcontains $address)
        {
            $colDelContact += $address
            write-host "Contact will be deleted for " $address
        }
    }

    write-host ""
    write-host "Updating ...."

    ### ADDS

    foreach ($user in $colAddContact)
    {
        write-host "ADDING contact for " $user.mail

        $targetAddress = "SMTP:" + $user.mail
        $alias = "c-" + $user.mail.split("@")[0]

        $hashAttribs = @{'targetAddress' = $targetAddress}
            $hashAttribs.add("mailNickname", $alias)

        foreach ($attrib in $arrAttribs)
        {
            if ($user.$attrib -ne $null) { $hashAttribs.add($attrib, $user.$attrib) }
        }
        New-ADObject -name $user.displayName -type contact -Path $targetOU -Description $user.description -server $targetDC 

-credential $targetCred -OtherAttributes $hashAttribs
    }

    ### UPDATES

    foreach ($user in $colUpdContact)
    {
        write-host "VERIFYING contact for " $user.mail

        $strFilter = "targetAddress -eq ""SMTP:" + $user.mail + """"
        $colContacts = Get-ADObject -Filter $strFilter -searchbase $targetOU -server $targetDC -credential $targetCred -

Properties *
        foreach ($contact in $colContacts)
        {
            $hashAttribs = @{}
            foreach ($attrib in $arrAttribs)
            {
                if ($user.$attrib -ne $null -and $user.$attrib -ne $contact.$attrib)
                {
                    write-host "    Changing " $attrib
                    write-host "        Before: " $contact.$attrib
                    write-host "        After: " $user.$attrib
                    $hashAttribs.add($attrib, $user.$attrib)
                }
            }
            if ($hashAttribs.Count -gt 0)
            {
                Set-ADObject -identity $contact -server $targetDC -credential $targetCred -Replace $hashAttribs
            }
        }

    }

    ### DELETES

    foreach ($contact in $colDelContact)
    {
        write-host "DELETING contact for " $contact
        $strFilter = "targetAddress -eq ""SMTP:" + $contact + """"
        Get-ADObject -Filter $strFilter -searchbase $targetOU -server $targetDC -credential $targetCred | Remove-ADObject -

server $targetDC -credential $targetCred -Confirm:$false
    }

  }
}

### --- MAIN ---

Start-Transcript galsync.log

if(@(get-module | where-object {$_.Name -eq "ActiveDirectory"} ).count -eq 0) {import-module ActiveDirectory}

write-host "DOMAIN1 Users --> DOMAIN2 Contacts"
SyncContacts -sourceDC $DOMAIN_1 -sourceUser $USER_1 -sourcePWFile $PWFILE_1 -targetDC $DOMAIN_2 -targetUser $USER_2 -targetPWFile 

$PWFILE_2 -targetOU $OU_CONTACTS_2

write-host ""
write-host "DOMAIN2 Users --> DOMAIN1 Contacts"
SyncContacts -sourceDC $DOMAIN_2 -sourceUser $USER_2 -sourcePWFile $PWFILE_2 -targetDC $DOMAIN_1 -targetUser $USER_1 -targetPWFile 

$PWFILE_1 -targetOU $OU_CONTACTS_1

Stop-Transcript 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-28T12:20:51.483

导致问题的语句中间有换行符。您需要连接这些行。

第 87 行和第 89 行应该只在一行上。像这样：

```
$colContacts = Get-ADObject -Filter 'objectClass -eq "contact"' -searchbase $targetOU -Server $targetDC -Credential $targetCred -Properties targetAddress 
```

与第 143 行和第 145 行相同。它们应该属于一起。

```
 New-ADObject -name $user.displayName -type contact -Path $targetOU -Description $user.description -server $targetDC -credential $targetCred -OtherAttributes $hashAttribs 
```

同样的第 155 和 157 行应该是

```
 $colContacts = Get-ADObject -Filter $strFilter -searchbase $targetOU -server $targetDC -credential $targetCred -Properties * 
```

以及第 185 和 187 行

```
 Get-ADObject -Filter $strFilter -searchbase $targetOU -server $targetDC -credential $targetCred | Remove-ADObject -server $targetDC -credential $targetCred -Confirm:$false 
```

200 和 202 行

SyncContacts -sourceDC $DOMAIN_1 -sourceUser $USER_1 -sourcePWFile $PWFILE_1 -targetDC $DOMAIN_2 -targetUser $USER_2 -targetPWFile $PWFILE_2 -targetOU $OU_CONTACTS_2

206 和 208 行

SyncContacts -sourceDC $DOMAIN_2 -sourceUser $USER_2 -sourcePWFile $PWFILE_2 -targetDC $DOMAIN_1 -targetUser $USER_1 -targetPWFile $PWFILE_1 -targetOU $OU_CONTACTS_1

可能还有更多，因此您需要仔细查看脚本以查找其他无效换行符

最好的问候弗里登

# sql-server - 在更改之前检查模块上的签名

> ID：11240321
> 
> 赞同：0
> 
> 时间：2012-06-28T07:55:13.487
> 
> 标签：sql-server, sql-server-2008, sql-server-2005

我在 SQL Server 2008 数据库中签署了模块。如果有人更改签名的模块（proc 或触发器），我想打印信息消息，必须重新签名过程并打印 TSQL 代码才能做到这一点（有适当的权利）。

如何以及最好的方法是什么？

DDL 触发器似乎不适合这种需要，因为内部触发器模块已经更改，并且我认为我无法确定它之前是否已签名。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-28T10:46:23.823

签名的整个想法是*授权*的人已经审查了模块（检查了代码），然后使用他的权限对模块进行了签名。更改模块需要相同的授权人员再次审查模块，检查一致性并重新签名。自动化这个过程几乎违背了代码签名的目的，只是让每个人都成为系统管理员并收工。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-11-12T00:51:59.020

知道这是一个老问题，但还有其他理由使用签名的 SP。这是对“如何确定 SP 是否已签名”问题的答案：

```
IF EXISTS (
    SELECT * FROM sys.crypt_properties 
    WHERE (crypt_type = 'SPVC') AND 
       (major_id = OBJECT_ID(N'[dbo_or_schema].[WhateverYourSPIsCalled]'))) 
    -- <stuff to do when SP is signed>
ELSE -- <stuff to do when SP is not signed> 
```

感谢 Remus 解决了这个问题（请参阅其他答案的评论）。

# git - 未合并的提交偏离轨道，没有未来

> ID：11240327
> 
> 赞同：0
> 
> 时间：2012-06-28T07:55:39.810
> 
> 标签：git

我是 git 的新手，并试图掌握它的来龙去脉。我有一个与效率相关的问题。在下图中，请参见红色箭头。

![在此处输入图像描述](../Images/34d8afb13737746de68d88f923b08abe.png)

我的问题是这个场景可以命名我的意思是与没有未来的红色箭头相关联的线。还有什么是技术上称为的不同颜色线。我正在理解它的概念，但这只是我想用谷歌搜索我的这个问题，但由于我的 git 词汇量有限，我无法搜索任何有意义的东西。告诉我这两个人的名字后。

我的下一个重要问题是这些红色箭头线是否应该被视为问题？如果是，那么为什么以及如何解决这些问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-28T08:47:55.250

这不是原生 Git。您正在使用某种 GUI 工具。我什至不会尝试猜测，从实际的角度来看，只要它是明智的，它可能并不重要。

彩色线条是树枝。每行上的点代表提交。除了区分分支的方式之外，颜色是否意味着任何特定的东西，取决于您的 GUI。

每条线的最上面的点是一个分支头。您的红色箭头指向一个从未与您正在进行的开发的其余部分合并的合并提交 - 反之亦然，具体取决于您的观点。它是信息性的，本质上没有好坏之分；你是否合并你的分支对 Git 来说并不重要。

每当您将其他提交合并到该分支时，黑线就会“向上移动”。你是否*应该*不是 Git 问题。

# c# - 应该在代码中的什么位置保留不变的数据？

> ID：11240330
> 
> 赞同：5
> 
> 时间：2012-06-28T07:55:55.770
> 
> 标签：c#, asp.net

我已经根据数据库中的表定义了模型。现在有一些模型的数据几乎没有变化。例如，一个电子商务网站销售的产品的类别，它运送产品的城市等。这些不会经常变化，因此为了避免撞到数据库，这些目前保存为静态变量。

问题是这些静态变量应该在代码中的什么位置。目前，在 ProductCategory 类（也是模型表示）中定义了一个静态列表，如果为空则调用 db 并加载产品类别。同样，City 类也有类似的静态 List 等。

然后在整个应用程序中使用这些静态列表。我正在考虑创建一个名为 StaticData 的类，然后将所有静态列表保留在该类中。那是现在而不是

```
ProductCategory.AllCategories.Find(p => p.Id = 2) 
```

我会有

```
StaticData.AllProductCategories.Find(p => p.Id = 2) 
```

您认为哪种方法更好？我的目标也是可测试性和解耦代码。

另外，有没有更好的方法来实现这些？你如何在你的代码中做类似的事情？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-28T08:00:03.063

我认为您应该使用[Cache](http://msdn.microsoft.com/en-us/library/aa478965.aspx)而不是静态变量。

我不知道有关您的代码的任何详细信息，因此如果您使用的是存储库，则可以执行以下操作：

```
if [cache contains object or collection I need]
{
   return [object or collection from cache]
}
else
{
   [get object or collection from database]
   [save object or collection in cache]
   return [object or collection from database]
} 
```

然后，如果您更改缓存实体，您必须找到一种方法来删除这些缓存条目以从数据库中检索新数据。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-28T08:03:00.440

如果它足够静态，可以编译到您的代码中，并且*永远*不必在运行时更改，您可以使用静态类，例如[将枚举转换为类](http://sarahtaraporewalla.com/design/coding-tip-42-turning-enums-into-classes/)的常见模式。

像这样的东西在你的场景中应该可以很好地工作：

```
public class Vehicle
{
    public static Vehicle Car = new Vehicle("Car");
    public static Vehicle MotorBike = new Vehicle("MotorBike");
    public static Vehicle PeopleMover = new Vehicle("PeopleMover");

    private Vehicle(string name)
    {
        this.name = name
    }
    private string name;
} 
```

使用带有静态成员的枚举或类也应该可以帮助您摆脱代码中那些讨厌的幻数，但是看到那里的语法不正确（缺少一个`=`）我会假设这只是示例代码，并且在您的真实代码库中看起来不像任何东西。

如果有时确实发生更改，并且您希望数据库中的类别列表，它们可以被紧密缓存（就像几乎永远不会过期，但在更新时手动失效）。根据类别列表的大小，我会考虑将整个集合放在一个大缓存中，并为各个类别查询缓存对象，而不是为每个类别保留一个单独的缓存条目。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-06-28T08:07:14.187

没有简单的答案。您有多种选择，您必须考虑哪一种更适合您的应用：

*   **您可能会使用某种缓存。**

    如果产品类别不经常变化，可能太复杂了。当您遇到性能问题（经常阅读数千个类别）并且产品类别经常更改时，这是理想的选择。您可以从任何开源缓存系统中受益，但此解决方案可能更复杂。

*   **您可以将它们硬编码为枚举。**

    只有当您 100% 确定产品类别永远不会改变时才好……永远！

*   **您可能有一个 Lazy Singleton 或 Static 类。**（我的首选）

    恕我直言，最佳实践可能是有一个 Lazy Singleton 或静态 ProductCategory 类。如果您的数据很少不经常更改，例如可能会在发布时更改，则非常理想。有两种方法：

    **在初始化中加载**：静态变量应作为常量保存在业务逻辑层中，在您的情况下，您可以在应用程序启动时预加载产品类别并始终保持它们。在这种方法中，您将时间花在应用程序加载上。

    **首次使用时加载**：第一次尝试访问类别时，请检查它们是否已加载。如果没有，类加载它们。在这种方法中，您会在需要访问产品类别的第一时间花费时间。

    在这两种方法中的任何一种中，每次应用程序池重新启动后数据都会丢失，因此如果您发布新版本，您将刷新数据。在数据库“紧急”更新的情况下，您可以随时重新启动应用程序池。

# python - 如何一次应用一列函数？

> ID：11240333
> 
> 赞同：0
> 
> 时间：2012-06-28T07:55:58.313
> 
> 标签：python, numpy

我有一个 numpy 数据结构如下：

```
[[['diaad'],
  ['iaadf'],
  ['aadfe'],
  ['hedbb'],
  ['edbbb'],
  ['dbbbb']],

 [['gegec'],
  ['ehecf'],
  ['gecfc'],
  ['gadff'],
  ['adfef'],
  ['dffgc']],

 [['ddddj'],
  ['dddjd'],
  ['ddjdd'],
  ['jfffd'],
  ['fgfdb'],
  ['ggdbb']]] 
```

这是这样实例化的：

```
>>> a = np.array([[['diaad'], ['iaadf'],  ['aadfe'],  ['hedbb'],  ['edbbb'],  ['dbbbb']], [['gegec'],  ['ehecf'],  ['gecfc'],  ['gadff'],  ['adfef'],  ['dffgc']], [['ddddj'],  ['dddjd'],  ['ddjdd'],  ['jfffd'],  ['fgfdb'],  ['ggdbb']]]) 
```

有没有直接`numpy`的方法来计算成对元素上的自定义函数？

例如，我的自定义函数被称为`processPair(a,b)`. 它应该计算沿列的所有成对元素的结果，即在`('diaad', 'gegec')`和`('gegec', 'ddddj')`之间`('diaad', 'ddddj')`。有什么建议吗？我在想这个`map`功能可以实现这一点，但不完全确定如何实现。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-28T10:13:53.243

这是我的解决方案。我对此并不完全满意——我觉得应该可以更优雅地做到这一点——但它确实有效：

```
from itertools import combinations

def apply_pairwise(func, a):
    "For each row, call func with every possible combination of two values"

    stack = []
    for col_a, col_b in combinations(range(a.shape[0]), 2):
        stack.append(np.hstack([a[col_a], a[col_b]]))

    combined = np.vstack(stack)

    def unpack_row(row):
        "Calls func with the values of a given numpy array as arguments"
        return func(*row.tolist())

    return np.apply_along_axis(unpack_row, 1, combined) 
```

像这样使用（假设您的示例数组`a`已定义）：

```
>>> f = lambda x, y: x + y
>>> print apply_pairwise(f, a)
['diaadgegec' 'iaadfehecf' 'aadfegecfc' 'hedbbgadff' 'edbbbadfef'
'dbbbbdffgc' 'diaadddddj' 'iaadfdddjd' 'aadfeddjdd' 'hedbbjfffd'
'edbbbfgfdb' 'dbbbbggdbb' 'gegecddddj' 'ehecfdddjd' 'gecfcddjdd'
'gadffjfffd' 'adfeffgfdb' 'dffgcggdbb'] 
```

# vim - 为什么 ctags 会两次列出相同的条目？

> ID：11240339
> 
> 赞同：0
> 
> 时间：2012-06-28T07:56:32.580
> 
> 标签：vim, ctags

我`ctags`像这样从 gvim 内部运行：

```
:!ctags -R --c++-kinds=+p --fields=+iaS --extra=+q+f . 
```

然后在尝试跳转到特定文件（或标签）时：

```
:tjump pjsua.h 
```

每次点击都会列出两次

![跳转输出](../Images/61299bd7c7752a1cc55b59882a849e4d.png)

我究竟做错了什么？

操作系统和版本：

*   Ubuntu 12.04
*   维姆 7.3
*   旺盛的Ctags 5.9~svn20110310

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-28T19:29:24.940

评论回答：我没有这个问题。确保您没有多个标签文件（检查输出`:set tags?`）

默认情况下`tags`有值`./tags,tags`。如果您有不同的文件并且不知道更改的位置，请键入以下内容：`:verbose set tags?`，您将看到更改位置的文件名。

而且，我建议您不要手动生成标签，而是使用插件[Indexer](http://goo.gl/EwILz)，它为整个项目提供了无痛的自动标签生成，并使标签保持最新。

有关详细信息，请参阅文章：[Vim：为您的项目提供方便的代码导航](http://dmitryfrank.com/articles/vim_project_code_navigation)，其中详细解释了 Indexer + Vimprj 的用法。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-29T08:05:06.137

如果代码位于使用 FAT32*标记*格式化的卷上，则*TAGS*将指向同一个文件。

```
$ ls -la tags TAGS
-rwx------ 1 user user 6848879 jun 28 09:31 tags
-rwx------ 1 user user 6848879 jun 28 09:31 TAGS 
```

# java - 如何使用 opencv 或 javacv 识别多边形？

> ID：11240344
> 
> 赞同：8
> 
> 时间：2012-06-28T07:56:43.770
> 
> 标签：java, c++, opencv, javacv

我正在做一个使用图像处理技术来识别不同对象及其长度的项目。我浏览了 javaCV 和 OpenCV 中的许多示例。但不幸的是，我无法识别多边形的 T 形。

我尝试使用以下矩形识别方法，但失败了。

```
public static CvSeq findSquares( final IplImage src,  CvMemStorage storage)
{

CvSeq squares = new CvContour();
squares = cvCreateSeq(0, sizeof(CvContour.class), sizeof(CvSeq.class), storage);

IplImage pyr = null, timg = null, gray = null, tgray;
timg = cvCloneImage(src);

CvSize sz = cvSize(src.width() & -2, src.height() & -2);
tgray = cvCreateImage(sz, src.depth(), 1);
gray = cvCreateImage(sz, src.depth(), 1);
pyr = cvCreateImage(cvSize(sz.width()/2, sz.height()/2), src.depth(), src.nChannels());

// down-scale and upscale the image to filter out the noise
cvPyrDown(timg, pyr, CV_GAUSSIAN_5x5);
cvPyrUp(pyr, timg, CV_GAUSSIAN_5x5);
cvSaveImage("ha.jpg",   timg);
CvSeq contours = new CvContour();
// request closing of the application when the image window is closed
// show image on window
// find squares in every color plane of the image
for( int c = 0; c < 3; c++ )
{
    IplImage channels[] = {cvCreateImage(sz, 8, 1), cvCreateImage(sz, 8, 1), cvCreateImage(sz, 8, 1)};
    channels[c] = cvCreateImage(sz, 8, 1);
    if(src.nChannels() > 1){
        cvSplit(timg, channels[0], channels[1], channels[2], null);
    }else{
        tgray = cvCloneImage(timg);
    }
    tgray = channels[c];
    // try several threshold levels
    for( int l = 0; l < N; l++ )
    {
    //             hack: use Canny instead of zero threshold level.
    //             Canny helps to catch squares with gradient shading
        if( l == 0 )
        {
    //                apply Canny. Take the upper threshold from slider
    //                and set the lower to 0 (which forces edges merging)
                      cvCanny(tgray, gray, 0, thresh, 5);
    //                 dilate canny output to remove potential
    //                // holes between edge segments
                      cvDilate(gray, gray, null, 1);
                 }
          else
        {
    //                apply threshold if l!=0:
                      cvThreshold(tgray, gray, (l+1)*255/N, 255, CV_THRESH_BINARY);
          }
        //            find contours and store them all as a list
                      cvFindContours(gray, storage, contours, sizeof(CvContour.class), CV_RETR_LIST, CV_CHAIN_APPROX_SIMPLE);

                      CvSeq approx;

        //            test each contour
                      while (contours != null && !contours.isNull()) {
                      if (contours.elem_size() > 0) {
                           approx = cvApproxPoly(contours, Loader.sizeof(CvContour.class),storage, CV_POLY_APPROX_DP, cvContourPerimeter(contours)*0.02, 0);
                    if( approx.total() == 4
                            &&
                            Math.abs(cvContourArea(approx, CV_WHOLE_SEQ, 0)) > 1000 &&
                        cvCheckContourConvexity(approx) != 0
                        ){
                        double maxCosine = 0;
                        //
                        for( int j = 2; j < 5; j++ )
                        {
            // find the maximum cosine of the angle between joint edges
                                                double cosine = Math.abs(angle(new CvPoint(cvGetSeqElem(approx, j%4)), new CvPoint(cvGetSeqElem(approx, j-2)), new CvPoint(cvGetSeqElem(approx, j-1))));
                                                maxCosine = Math.max(maxCosine, cosine);
                         }
                         if( maxCosine < 0.2 ){
                                 CvRect x=cvBoundingRect(approx, l);
                                 if((x.width()*x.height())<5000 ){
                                     System.out.println("Width : "+x.width()+" Height : "+x.height());
                             cvSeqPush(squares, approx);
                                     //System.out.println(x);
                                 }
                         }
                    }
                }
                contours = contours.h_next();
            }
        contours = new CvContour();
    }
}
return squares;
} 
```

请帮助我修改此方法以从图像中识别 T 形。输入图像是这样的。

![在此处输入图像描述](../Images/ef612eee0984029fbe072272c0b52130.png)

这是我必须识别的T形

![在此处输入图像描述](../Images/18ae29262ae3f7c8c81d8aa5d3ee5a71.png)

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-01T10:11:07.143

我找到了解决您问题的方法：

*   将图像转换为灰度：

![灰度图像](../Images/e0e3ec2c1ec232ffaf6d0637cfadc14f.png)

*   做一个阈值（转换为 1bit 图像）：

![2位图像](../Images/bab29c35fd8ada826b08f3bbf9001638.png)

*   找到轮廓并填充它们：

![填充图像](../Images/6d4f417aa404f1fc44d1592537ef299c.png)

*提示：*在 OpenCV 中填充轮廓`-1`用作函数`thickness`中的参数`drawContours`。

*   做一个膨胀，然后用相同的内核腐蚀：

![结果图像](../Images/fa7ccfcc3e2172755cdae745b6f1c30f.png)

就是这样！**在此之后，在图像上找到您的T**形身材对您来说不是问题！

不幸的是，我不知道**JavaCV**，但我可以与您分享**C++**代码：

```
Mat src = imread("in.jpg"), gray;

cvtColor(src, gray, CV_BGR2GRAY);

threshold(gray, gray, 230, 255, THRESH_BINARY_INV);

vector<Vec4i> hierarchy;
vector<vector<Point> > contours;

findContours(gray, contours, hierarchy, CV_RETR_LIST, CV_CHAIN_APPROX_SIMPLE);

gray = Scalar::all(255);
for (size_t i=0; i<contours.size(); i++)
{
    drawContours(gray, contours, i, Scalar(0), -1);
}

Mat element = getStructuringElement(MORPH_RECT, Size(2, 2), Point(1, 1));
dilate(gray, gray, element);
erode(gray, gray, element);

imshow("window", gray); 
```

*提示：*如果您愿意，可以将此代码转换为 JavaCV。为此，请阅读[本教程](http://code.google.com/p/javacv/wiki/ConvertingOpenCV)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-28T09:36:35.043

您可能会更好地找到轮廓并使用`CvApproxPoly()`. [您可以在此处](http://www.aishack.in/2010/01/an-introduction-to-contours/)找到一个很好的示例，说明如何使用此功能查找矩形并对其进行调整以找到您的 T 形。此示例使用 OpenCV 创建并用 C++ 编写。

要按顺序遍历所有点：

```
for (int i = 0; i < cornerPoints->total; i++) {
 CvPoint *cornerPoints = (CvPoint*) cvGetSeqElem(cornerPoints, i);
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-02T10:07:35.710

虽然听起来像家庭作业

@Astor 带来的预处理肯定是有帮助的。但我还是觉得这种形状识别与图像处理密切相关：形态学

你可以准备一个模板 T 形然后“卷积”吗？带有预处理结果的模板。不记得更多细节了，只是调查一下TAG Morphology and Convolution

# ruby-on-rails - Rails / 在视图中使用模型

> ID：11240345
> 
> 赞同：2
> 
> 时间：2012-06-28T07:56:46.093
> 
> 标签：ruby-on-rails, ruby, model, views

我是 Ruby on Rails 的新手，我对自己的 MVC 逻辑没有信心。

我正在以这种方式进行：

*   我有一个模型**“用户”**
*   在我的控制器中，我设置了一个名为的实例变量**`@users = User.all`**
*   在我看来，我这样实现我的逻辑：**`<%= @users.each ... %>`**

我在问自己我可以绕过控制器步骤并在我的视图中写下这个：**`<%= User.all.each ... %>`**

我想在我的项目中使用良好的做法，第二种方式可以接受吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-28T08:25:53.347

例如，在控制器中的实际操作比 User.all.each 更复杂

```
@cars = Car.scoped
@cars = @cars.includes(:body_type, :brand, :city, :drive, :engine_type, :model, :region, :transmission)
@cars = @cars.select(['`cars`.*','`stats`.recount']).joins('left outer join stats on (cars.model_id = stats.model_id and cars.year = stats.year)')
@cars = @cars.limit(15) 
```

和模式和更多其他逻辑

在视图中，您只需要
在我的示例中渲染此对象，我在视图中使用渲染部分

```
= render @cars 
```

并在视图/_car.html.haml

```
- for car in @cars
  .row-fluid.car
    = car.price
    = etc 
```

所以，如果你想改变视图你改变视图
如果你想改变收集过程的行为你改变控制器
如果你想改变对象的行为你改变模型

相同的东西有虫子
都按严格
的顺序排列是好的和漂亮的

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-28T08:12:20.380

从技术上讲，您可以，您的 User 模型只是一个 Ruby 类，可以从您的视图中访问。但是，这绝对不是一个好习惯。

与其长篇大论地谈论为什么不应该这样做，我只会为您链接到一些文章/文档，并建议您先对 MVC 架构背后的推理有一个很好的了解，然后再进一步进入 Rails：

*   [http://guides.rubyonrails.org/getting_started.html#the-mvc-architecture](http://guides.rubyonrails.org/getting_started.html#the-mvc-architecture)
*   [http://en.wikipedia.org/wiki/Model%E2%80%93view%E2%80%93controller](http://en.wikipedia.org/wiki/Model%E2%80%93view%E2%80%93controller)
*   [Rails 模型、视图、控制器和助手：什么去哪里？](https://stackoverflow.com/questions/60658/rails-model-view-controller-and-helper-what-goes-where)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-28T08:12:51.697

仅从控制器操作中与 ActiveRecord 的查询接口交互的想法是可维护性。如果您遵循该方法，您可以通过查看应用程序的控制器大致了解应用程序应该做什么。此外，如果逻辑变得更复杂（例如，您想要添加身份验证和/或授权），该行为将进入控制器。

相反，如果您查看其中一个视图，则应该清楚页面的外观。如果到处都有对模型类的调用，那就不太明显了。

或许，你可以这样想：

*   模型：复杂的查询、验证、回调以服务于您的业务逻辑
*   控制器：正在显示/创建/更新/等的内容。谁被允许这样做。
*   视图：我的页面在视觉上如何

如果您想更改应用程序的某个方面，您只需触摸负责该方面的相应组件即可。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-28T08:25:06.340

*   模型：进行任何类型的逻辑分析和数据维护的一切
*   控制器：应该只分析请求并决定它应该以什么方式请求数据的模型（所有数据？只有一个字段？...另外：我是管理员吗？）
*   视图：只是从控制器获取的数据的可视化表示

所以是的，可以将所有内容移动到查看（甚至是数据库请求），但这不是一个好主意，理想情况下你应该将它移动到控制器

# eclipse - 在多模块项目的 Eclipse 中使用 Jetty Maven 插件进行调试：编译单元不在构建路径上

> ID：11240347
> 
> 赞同：3
> 
> 时间：2012-06-28T07:56:53.250
> 
> 标签：eclipse, debugging, maven, jetty, multi-module

我想使用 Jetty Maven 插件在 Eclipse 中运行一个多模块项目。[该项目](https://svn.52north.org/svn/swe/main/SOS/Service/trunk/SOS/52n-sos/)运行良好，并且运行`mvn jetty:run-exploded`配置文件得到正确处理。

*Maven设置：*

```
/parent/pom.xml
/parent/module-1/pom.xml
/parent/module-2/pom.xml
/parent/module-service/pom.xml (this is the one that builds the webapp) 
```

*Eclipse设置：* 项目和所有模块都是工作空间中的Maven项目，模块项目也是Java项目。

我将标准 Jetty 配置添加到 /module-service/pom.xml 并*在 module-service/pom.xml 上运行 Maven*。

但是，当我想**调试**时，当我想使用内容辅助时遇到以下错误：

> 此编译单元不在 Java 项目的构建路径上。

此外，热代码替换不起作用。但是变量和所有断点都被正确检测到了！我所看到的是在父项目中打开文件的编辑器（作为副作用，编辑器有一个不同的 Java 文件图标，一个空心的蓝色 J 而不是一个完整的蓝色 J）。

到目前为止尝试的解决方案：

*   将 Java 方面添加到父项目 >​​ 源文件夹被正确检测到，但我得到很多构建路径错误，因为父项目没有指向所有模块库的指针。
*   将模块添加到模块服务项目的构建路径中。
*   检查调试配置中的*解决工作区工件*（导致错误“无法复制工件的文件”），可能[在这里](http://jira.codehaus.org/browse/MAPPASM-82 "这里")解决，但我不知道如何。

我使用 jetty-maven-plugin 版本 8.1.4.v20120524。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-04-29T09:14:19.003

有点晚了，但可能对某人有用。

尝试使用 jetty:run 目标并在 Run configurations/Maven Build/yourProject/Main|Tab| 中选择“Resolve Workspace artifacts” （其中 yourProject 是您使用 jetty:run 目标运行的项目）。当然，您必须使用“Import->Existing Maven Project”导入所有依赖项目。

# java - Java 中的急切垃圾收集

> ID：11240350
> 
> 赞同：3
> 
> 时间：2012-06-28T07:57:01.770
> 
> 标签：java, garbage-collection, jvm

我想更好地了解我的应用程序，特别是它的内存占用。

我确实了解垃圾收集的概念，并且我知道，堆中总会有一定数量的死对象，但是，我想尽量减少这个数量，以便使用 JConsole（或 JVisualVM）进行监控为我提供有关当前所需（未占用）空间的一些信息。

有没有办法在 SunVM 中配置现有的垃圾收集器（例如 G1GC），以便（以响应和运行时为代价）最小化堆中的死对象数量？

**澄清**

为了更清楚我的目标：我的应用程序是非交互式的，因此随着时间的推移，内存占用量在两次运行之间或多或少是相同的。我想确定所需的最小堆空间以及代码更改对该占用空间的影响。由于死对象，JConsole 的输出在这里并没有真正的帮助。我也想知道，我的峰值记忆是否真的是某个时间点的一个突出的峰值，或者它是否随着时间的推移而被拉长。这就是为什么在我达到 OOME 之前减少 Xmx 并不是让我到达那里的原因。

另外：我说的是在开发人员测试期间的使用，而不是在生产中的使用。在生产中，吞吐量和性能 - 当然 - 比更现实的内存占用更重要。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-28T08:04:58.217

如果您想知道您的应用程序正在使用的内存总量，您必须监视它相当长的时间。应用程序随机时刻的堆样本：

```
jps -> output the pid of java process
jmap -dump:live,format=b,file=heap.bin [pid] 
```

然后`jhat`导航堆。还有其他工具可以做到这一点。

这样做你会立刻知道堆上有什么。

请记住，诸如此类的对象`memory mapped files`不存储在堆中，而是存储在内存中。

到达时`OOM`尝试添加它，然后读取输出以查看哪些对象实际上在堆中：

```
-XX:-HeapDumpOnOutOfMemoryError
-XX:HeapDumpPath=./java_pid<pid>.hprof 
```

为此，请启用`GC log`并使用诸如[GCViewer 之](https://github.com/chewiebug/GCViewer)类的工具。

```
-XX:+PrintGCTimeStamps
 -XX:+PrintGCDetails
-verbose:gc
-Xloggc:garbage_collector -> this set the file of the output 
```

当您谈论堆时，我知道您在谈论`tenured`空间。如果是这样，您需要知道对象的平均寿命。并遵循一些最佳实践，然后进行微调。还要记住，发出 a`System.gc()`并不能保证`GC`执行了。

事情是实例去`young generation (eden)`并且当它充满时`minor GC`执行。仍然可以访问的对象被传递到称为 的两个空间之一`survivor`。一旦这个空间被填满，空间就会被转储到`tenured`. 当已满时，a`full GC`会执行并删除所有无法访问的实例。

您可以做的一件事是`primitives`在方法中使用。那些不会放在堆中，因为它们的生命周期在线程堆栈中。

有用的参数是那些与`tenured and young generation (eden)`. 这些按比例起作用。如果您要发出许多问题，请`GC`记住为`GC stop`.

一些有趣的参数是：

```
-XX:MinFreeHeapRatio=  
-XX:MaxHeapFreeRatio=  
-XX:NewRatio=
-XX:SurvivorRatio 
```

例如，设置`-XX:NewRatio=3`表示年轻代和老年代的比例为1:3；换句话说，伊甸园和幸存者空间的组合大小将是堆的四分之一。

无论如何，我不知道你为什么需要这个要求。我通常只担心并且只在不好`throughput`时才关心这些参数。`throughput`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-28T08:03:01.283

`-Xgenconfig`您可以在启动 Java 应用程序时传递标志。[你可以在这里](http://developers.sun.com/mobility/midp/articles/garbage/#2.6)阅读更多关于它的信息。

引自网站：

> genconfig 开关可用于明确指定年轻代和年老代的堆大小。它还允许指定老年代收集器。（genconfig 选项使 -Xms 和 -Xmx 选项变得不必要，但如果与 genconfig 选项一起使用，-Xmx 仍然被认为是限制老一代堆大小的一种手段。）

通过指定较小的堆大小，GC 会更频繁地触发。我相信这正是您正在寻找的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-28T08:03:40.580

虽然肯定有一种方法可以将 GC 子系统配置为比默认设置更具侵略性，但您很可能会意识到您正在与试图将您的代码扭曲到零垃圾的潮流作斗争。标准 Java 库几乎每一步都依赖于短期对象的快速 gc-ing。示例是简单的字符串连接、增强的 for 循环、自动装箱等。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-28T08:18:52.633

是的，这是可能的，但这取决于您的应用程序在做什么。您只能通过试验和启用 GC 日志来找到这个答案。

使用它，您将能够为您的应用找到老年代的最小尺寸，然后您可以开始为年轻一代尝试不同的尺寸。

*   更小的年轻代意味着更频繁的收集，但内存占用更小
*   更大的一代将意味着更少的收集频率，但更大的内存占用

请注意，如果年轻代太小，对象可能会在老年代过早提升，而无法满足其生命周期要求。当您看到更多完整的 GC 集合时，您可以检测到这一点。

# nservicebus - 在 NServiceBus 3.2.3 中设置 RavenDB ApiKey

> ID：11240353
> 
> 赞同：0
> 
> 时间：2012-06-28T07:57:24.017
> 
> 标签：nservicebus, api-key, ravenhq

我正在尝试`DocumentStore.ApiKey`在 NServiceBus 3.2.3 中设置 RavenDB。根据这个[线程](https://groups.google.com/d/msg/ravendb/fQape6ZFjLI/kcWBPCQqT00J)，这不能通过 NSB 3.2.3 中使用的 RavenDB 版本直接从连接字符串中读取。

NSB 中的`DocumentStore`实例注册为`IDocumentStore`，这意味着我不能使用这样的自定义操作，因为`IDocumentStore`它不会暴露`ApiKey`：

```
Configure.With()
    .DefaultBuilder()
    .RavenPersistence()
    .RunCustomAction(() => 
        Configure.Instance.Configurer
        .ConfigureProperty<IDocumentStore>(store => store.ApiKey, "my-api-key")); 
```

允许`RavenPersistence`我提供`IDocumentStore`. 有什么办法可以设置`ApiKey`吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-28T21:28:31.827

我们将 Raven 客户端内部化，因此您无法设置该属性。想到的唯一解决方法是使用仅核心版本的 nservicebus （这将使您在问题中提到的代码正常工作） NSB 的开发版本已升级到 Raven 960，因此另一种选择是升级到 NServiceBus 的 CI 版本 (http://builds.nservicebus.com/guestAuth/app/nuget/v1/FeedService.svc)

# mysql - Sql - 计入多列

> ID：11240357
> 
> 赞同：4
> 
> 时间：2012-06-28T07:57:49.477
> 
> 标签：mysql, sql

我有一张这样的桌子：

```
 num | type
-----+------
 123 | 3
 123 | 2
 123 | 3
 123 | 2
 124 | 3
 124 | 1
 124 | 3
 124 | 3 
```

我想按`num`列分组，并有一列计算每种不同的类型（我提前知道所有可能的值）。所以我会得到：

```
 num | 1 | 2 | 3
-----+---+---+---
 123 | 0 | 2 | 2
 124 | 1 | 0 | 3 
```

这可以用 SQL 实现吗？我正在使用 MySql。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-28T08:01:14.193

```
SELECT `num`,
    SUM(type = 1) as `1`, 
    SUM(type = 2) as `2`, 
    SUM(type = 3) as `3`
FROM `your_table`
GROUP BY `num` 
```

# ruby-on-rails-3 - 在 Jammit 中使用 less-rails-bootstrap

> ID：11240362
> 
> 赞同：2
> 
> 时间：2012-06-28T07:58:11.597
> 
> 标签：ruby-on-rails-3, less, jammit

有没有人有使用 Jammit 和 less-rails-bootstrap gem 的经验？

我正在开发一个 Rails 3.2 应用程序，它使用 less-rails-bootstrap 并希望使用 jammit 进行部署以最小化请求。我使用包含 @import 命令的 gem 和 LESS 文件进行开发，但它不能很好地与 jammit 一起翻译。

jammit 有没有办法识别 LESS 文件并预编译所有内容 @import 然后压缩所有内容？

我是新来的，我已经搜索过并没有找到与我的问题类似的任何东西。如果有人可以指导我，那就太棒了。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-10-06T16:04:25.607

在使用 Jammit 之前，您应该将您的 Less 文件编译成 CSS。

```
lessc bootstrap.less > bootstrap.css 
```

以上命令已经为所有 Bootstrap CSS 代码生成了一个 CSS 文件。您可以使用 Jammit 将该 bootstrap.css 文件与您的其他 CSS 文件组合并压缩。

请注意，Less 中的 @import 指令与 CSS 中的不同。Less 中的 @import 指令将文件的包含导入到主作用域中以便能够编译它。

# cakephp - Cakephp：我如何计算给定出生日期的年龄

> ID：11240363
> 
> 赞同：0
> 
> 时间：2012-06-28T07:58:17.047
> 
> 标签：cakephp, cakephp-2.0, cakephp-2.1

嗨，我想在输入出生日期后打印一个人的姓名。我如何在 cakephp 中计算他们的年龄。

我的日期字段名称引用如下

```
ApplicantsDetail.dob 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-28T09:02:55.477

```
$then = DateTime::createFromFormat("Y/m/d", "1983/12/16");
$diff = $then->diff(new DateTime());
echo $diff->format("%y year %m month %d day\n"); 
```

输出：

> 28 年 6 个月 12 天

从该代码创建一个自定义帮助程序，您就完成了。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-28T08:17:00.620

不需要任何特定于 CakePHP 的代码 - 使用 date_diff()

[在http://www.php.net/manual/en/datetime.diff.php](http://www.php.net/manual/en/datetime.diff.php)查看文档

# android - 如何在对话框内创建一个弹出窗口？

> ID：11240367
> 
> 赞同：0
> 
> 时间：2012-06-28T07:58:40.133
> 
> 标签：android

我正在创建一个自定义对话框。它包含许多文件夹和文件。单击文件夹和/或文件以查看自定义对话框内的弹出窗口时。如何在对话框内创建弹出窗口？我不知道。如果有可能吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-28T08:18:56.373

您可以将自定义对话框定义为普通 Activity，然后在 Manifest 中设置

```
android:theme="@android:style/Theme.Dialog" 
```

对于那个活动。现在从您的自定义对话框（实际上是活动）中，您可以显示您的弹出对话框。

# java - 如何使用 javax.mail 读取邮件正文中的文本

> ID：11240368
> 
> 赞同：62
> 
> 时间：2012-06-28T07:58:44.647
> 
> 标签：java, mime, multipart, jakarta-mail

我正在使用 javax.mail 开发客户端邮件来阅读邮箱内的邮件：

```
Properties properties = System.getProperties();  
properties.setProperty("mail.store.protocol", "imap");  
try {  
    Session session = Session.getDefaultInstance(properties, null);
    Store store = session.getStore("pop3");//create store instance  
    store.connect("pop3.domain.it", "mail.it", "*****");  
    Folder inbox = store.getFolder("inbox");  
    FlagTerm ft = new FlagTerm(new Flags(Flags.Flag.SEEN), false);
    inbox.open(Folder.READ_ONLY);//set access type of Inbox  
    Message messages[] = inbox.search(ft);
    String mail,sub,bodyText="";
    Object body;
    for(Message message:messages) {
        mail = message.getFrom()[0].toString();
        sub = message.getSubject();
        body = message.getContent();
        //bodyText = body.....
    }
} catch (Exception e) {  
    System.out.println(e);    
} 
```

我知道该方法`getContent()`返回一个对象，因为内容可能是 a `String`， a `MimeMultiPart`， a`SharedByteArrayInputstream`和其他（我认为）...有没有办法始终获取消息正文中的文本？谢谢！！

* * *

## 回答 #1

> 赞同：96
> 
> 时间：2016-01-09T04:19:20.233

这个答案扩展[了 yurin 的答案](https://stackoverflow.com/questions/11240368/how-to-read-text-inside-body-of-mail-using-javax-mail/31877854#31877854 "yurin的回答")。他提出的问题是 a 的内容`MimeMultipart`本身可能是 another `MimeMultipart`。在这种情况下，下面的`getTextFromMimeMultipart()`方法会在内容上递归，直到消息正文被完全解析。

```
private String getTextFromMessage(Message message) throws MessagingException, IOException {
    String result = "";
    if (message.isMimeType("text/plain")) {
        result = message.getContent().toString();
    } else if (message.isMimeType("multipart/*")) {
        MimeMultipart mimeMultipart = (MimeMultipart) message.getContent();
        result = getTextFromMimeMultipart(mimeMultipart);
    }
    return result;
}

private String getTextFromMimeMultipart(
        MimeMultipart mimeMultipart)  throws MessagingException, IOException{
    String result = "";
    int count = mimeMultipart.getCount();
    for (int i = 0; i < count; i++) {
        BodyPart bodyPart = mimeMultipart.getBodyPart(i);
        if (bodyPart.isMimeType("text/plain")) {
            result = result + "\n" + bodyPart.getContent();
            break; // without break same text appears twice in my tests
        } else if (bodyPart.isMimeType("text/html")) {
            String html = (String) bodyPart.getContent();
            result = result + "\n" + org.jsoup.Jsoup.parse(html).text();
        } else if (bodyPart.getContent() instanceof MimeMultipart){
            result = result + getTextFromMimeMultipart((MimeMultipart)bodyPart.getContent());
        }
    }
    return result;
} 
```

* * *

## 回答 #2

> 赞同：25
> 
> 时间：2016-04-29T07:25:02.527

这个答案扩展了[Austin 的答案](https://stackoverflow.com/a/34689614/1601122)`multipart/alternative`，以通过( `// without break same text appears twice in my tests`)的处理来纠正原始问题。

文本出现两次，因为对于`multipart/alternative`，用户代理应该只选择**一个**部分。

来自[RFC2046](https://www.rfc-editor.org/rfc/rfc2046)：

> “multipart/alternative”类型在语法上与“multipart/mixed”相同，但语义不同。特别是，每个身体部位都是相同信息的“替代”版本。
> 
> 系统应该认识到各个部分的内容是可以互换的。系统应根据本地环境和参考选择“最佳”类型，在某些情况下甚至通过用户交互。与“多部分/混合”一样，身体部位的顺序很重要。在这种情况下，替代项按照对原始内容的忠实度增加的顺序出现。一般来说，最好的选择是接收系统本地环境支持的类型的最后一部分。

**与替代治疗相同的示例：**

```
private String getTextFromMessage(Message message) throws IOException, MessagingException {
    String result = "";
    if (message.isMimeType("text/plain")) {
        result = message.getContent().toString();
    } else if (message.isMimeType("multipart/*")) {
        MimeMultipart mimeMultipart = (MimeMultipart) message.getContent();
        result = getTextFromMimeMultipart(mimeMultipart);
    }
    return result;
}

private String getTextFromMimeMultipart(
        MimeMultipart mimeMultipart) throws IOException, MessagingException {

    int count = mimeMultipart.getCount();
    if (count == 0)
        throw new MessagingException("Multipart with no body parts not supported.");
    boolean multipartAlt = new ContentType(mimeMultipart.getContentType()).match("multipart/alternative");
    if (multipartAlt)
        // alternatives appear in an order of increasing 
        // faithfulness to the original content. Customize as req'd.
        return getTextFromBodyPart(mimeMultipart.getBodyPart(count - 1));
    String result = "";
    for (int i = 0; i < count; i++) {
        BodyPart bodyPart = mimeMultipart.getBodyPart(i);
        result += getTextFromBodyPart(bodyPart);
    }
    return result;
}

private String getTextFromBodyPart(
        BodyPart bodyPart) throws IOException, MessagingException {

    String result = "";
    if (bodyPart.isMimeType("text/plain")) {
        result = (String) bodyPart.getContent();
    } else if (bodyPart.isMimeType("text/html")) {
        String html = (String) bodyPart.getContent();
        result = org.jsoup.Jsoup.parse(html).text();
    } else if (bodyPart.getContent() instanceof MimeMultipart){
        result = getTextFromMimeMultipart((MimeMultipart)bodyPart.getContent());
    }
    return result;
} 
```

请注意，这是一个非常简单的示例。它遗漏了许多情况，不应以当前格式在生产中使用。

* * *

## 回答 #3

> 赞同：22
> 
> 时间：2019-03-24T21:50:20.773

不要重新发明轮子！您可以简单地使用 Apache Commons 电子邮件（请参阅[此处](http://commons.apache.org/proper/commons-email/)）

科特林示例：

```
fun readHtmlContent(message: MimeMessage) = 
        MimeMessageParser(message).parse().htmlContent 
```

如果电子邮件没有 html 内容，但它有纯内容（您可以通过[hasPlainContent](http://commons.apache.org/proper/commons-email/javadocs/api-release/org/apache/commons/mail/util/MimeMessageParser.html#hasPlainContent--)和[hasHtmlContent](http://commons.apache.org/proper/commons-email/javadocs/api-release/org/apache/commons/mail/util/MimeMessageParser.html#hasHtmlContent--)方法检查），那么您应该使用以下代码：

```
fun readPlainContent(message: MimeMessage) = 
        MimeMessageParser(message).parse().plainContent 
```

Java 示例：

```
String readHtmlContent(MimeMessage message) throws Exception {
    return new MimeMessageParser(message).parse().getHtmlContent();
}

String readPlainContent(MimeMessage message) throws Exception {
    return new MimeMessageParser(message).parse().getPlainContent();
} 
```

* * *

## 回答 #4

> 赞同：13
> 
> 时间：2015-08-07T12:35:26.373

下面是从消息中获取文本的方法，以防 bodyParts 是文本和 html。

```
 import javax.mail.BodyPart;
  import javax.mail.Message;
  import javax.mail.internet.MimeMultipart;
  import org.jsoup.Jsoup;

  ....    
  private String getTextFromMessage(Message message) throws Exception {
    if (message.isMimeType("text/plain")){
        return message.getContent().toString();
    }else if (message.isMimeType("multipart/*")) {
        String result = "";
        MimeMultipart mimeMultipart = (MimeMultipart)message.getContent();
        int count = mimeMultipart.getCount();
        for (int i = 0; i < count; i ++){
            BodyPart bodyPart = mimeMultipart.getBodyPart(i);
            if (bodyPart.isMimeType("text/plain")){
                result = result + "\n" + bodyPart.getContent();
                break;  //without break same text appears twice in my tests
            } else if (bodyPart.isMimeType("text/html")){
                String html = (String) bodyPart.getContent();
                result = result + "\n" + Jsoup.parse(html).text();

            }
        }
        return result;
    }
    return "";
} 
```

**更新**。有一种情况，bodyPart 本身可以是 multipart 类型。（我在写完这个答案后遇到了这样的电子邮件。）在这种情况下，你需要用递归重写上述方法。

* * *

## 回答 #5

> 赞同：10
> 
> 时间：2012-06-28T08:19:01.320

我不这么认为，否则如果 a`Part`的 mime 类型是会发生什么`image/jpeg`？该 API 返回一个，`Object`因为它在内部会尝试为您提供一些有用的东西，前提是您知道预期会是什么。对于通用软件，它打算像这样使用：

```
if (part.isMimeType("text/plain")) {
   ...
} else if (part.isMimeType("multipart/*")) {
   ...
} else if (part.isMimeType("message/rfc822")) {
   ...
} else {
   ...
} 
```

您也有原始的（实际上不是那么*原始*，请参阅 Javadoc）[`Part.getInputStream()`](http://javamail.kenai.com/nonav/javadocs/javax/mail/Part.html#getInputStream%28%29)，但我认为假设您收到的每条消息都是基于文本的消息是不安全的 - 除非您正在编写一个非常具体的应用程序并且您可以控制输入源。

* * *

## 回答 #6

> 赞同：4
> 
> 时间：2012-06-28T09:07:45.727

如果您想始终获取文本，则可以跳过其他类型，例如“多部分”等...

```
 Object body = message.getContent(); 
    if(body instanceof String){
    // hey it's a text
    } 
```

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2020-08-05T18:13:45.607

在我的情况下，我希望 HTML 也存在，并且我还搜索了一些已经制作的实用程序，所以我使用以下代码修复了我的

```
import javax.mail.Message;
import org.apache.commons.io.IOUtils;
import javax.mail.internet.MimeUtility;
.....
String body = IOUtils.toString(
                 MimeUtility.decode(message.getInputStream(), "quoted-printable"),
                 "UTF-8"
              ); 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2019-09-30T12:03:31.420

我的答案是[Austin Answer](https://stackoverflow.com/a/34689614/1601122)的扩展版本，但在第一种方法中有一个条件（ getTextFromMessage() ）。

更改：我们还应该检查 MimeType 是否为“text/html”。

**检查以 '// '****结尾的行****

 **```
private String getTextFromMessage(Message message) throws MessagingException, IOException {
    String result = "";
    if (message.isMimeType("text/plain")) {
        result = message.getContent().toString();
    } 

    else if (message.isMimeType("text/html")) { // **
        result = message.getContent().toString(); // **
    }

    else if (message.isMimeType("multipart/*")) {
        MimeMultipart mimeMultipart = (MimeMultipart) message.getContent();
        result = getTextFromMimeMultipart(mimeMultipart);
    }
    return result;
}

private String getTextFromMimeMultipart(
        MimeMultipart mimeMultipart)  throws MessagingException, IOException{
    String result = "";
    int count = mimeMultipart.getCount();
    for (int i = 0; i < count; i++) {
        BodyPart bodyPart = mimeMultipart.getBodyPart(i);
        if (bodyPart.isMimeType("text/plain")) {
            result = result + "\n" + bodyPart.getContent();
            break; // without break same text appears twice in my tests
        } else if (bodyPart.isMimeType("text/html")) {
            String html = (String) bodyPart.getContent();
            result = result + "\n" + org.jsoup.Jsoup.parse(html).text();
        } else if (bodyPart.getContent() instanceof MimeMultipart){
            result = result + getTextFromMimeMultipart((MimeMultipart)bodyPart.getContent());
        }
    }
    return result;
} 
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2020-02-20T16:03:42.107

你可以使用[org.apache.commons.mail.util.MimeMessageParser](https://mvnrepository.com/artifact/org.apache.commons/commons-email)

爪哇：

```
String htmlContent = new MimeMessageParser(message).parse().getHtmlContent(); 
```

科特林：

```
val htmlContent: String = MimeMessageParser(message).parse().htmlContent 
```

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2020-12-01T20:55:38.697

这是我的代码，我在我的 IMAP android 应用程序中使用。它的工作。

GetTextFromMessage 返回纯文本或 html 字符串

科特林

```
 @Throws(IOException::class, MessagingException::class)
    private fun getTextFromMessage(message: Message): String {
        var result: String = ""
        if (message.isMimeType("text/plain")) {
            result = message.content.toString()
        }
        else if (message.isMimeType("multipart/*")) {
            val mimeMultipart =
                message.content as MimeMultipart
            result = getTextFromMimeMultipart(mimeMultipart)
        }
        else if(message.isMimeType("text/html")){
            result = message.content.toString()
        }
        return result
    }

    @Throws(IOException::class, MessagingException::class)
    private fun getTextFromMimeMultipart(
        mimeMultipart: MimeMultipart
    ): String {
        val count = mimeMultipart.count
        if (count == 0) throw MessagingException("Multipart with no body parts not supported.")

        val multipartRelated = ContentType(mimeMultipart.contentType).match("multipart/related")

        if(multipartRelated){
            val part = mimeMultipart.getBodyPart(0)
            val multipartAlt = ContentType(part.contentType).match("multipart/alternative")
            if(multipartAlt) {
                return getTextFromMimeMultipart(part.content as MimeMultipart)
            }
        }else{
            val multipartAlt = ContentType(mimeMultipart.contentType).match("multipart/alternative")
            if (multipartAlt) {
                for (i in 0 until count) {
                    val part = mimeMultipart.getBodyPart(i)
                    if (part.isMimeType("text/html")) {
                        return getTextFromBodyPart(part)
                    }
                }
            }
        }

        var result: String = ""
        for (i in 0 until count) {
            val bodyPart = mimeMultipart.getBodyPart(i)
            result += getTextFromBodyPart(bodyPart)
        }
        return result
    }

    @Throws(IOException::class, MessagingException::class)
    private fun getTextFromBodyPart(
        bodyPart: BodyPart
    ): String {
        var result: String = ""
        if (bodyPart.isMimeType("text/plain")) {
            result = bodyPart.content as String
        } else if (bodyPart.isMimeType("text/html")) {
            val html = bodyPart.content as String
            result = html
        } else if (bodyPart.content is MimeMultipart) {
            result =
                getTextFromMimeMultipart(bodyPart.content as MimeMultipart)
        }
        return result
    } 
```**

# django - django apache + nginx ssl 用于管理部分

> ID：11240376
> 
> 赞同：0
> 
> 时间：2012-06-28T07:59:02.860
> 
> 标签：django, apache, ssl, nginx

我想让我的 django /admin/ url 受到 ssl 保护。我的网站在 apache mod_wsgi 中运行。但有人建议我在 nginx 配置中配置 SSL。

```
#/etc/nginx/nginx.conf
user www-data;
worker_processes  1;
error_log  /var/log/nginx/error.log;
pid        /var/run/nginx.pid;
events {
worker_connections  1024;
# multi_accept on;
}
http {
include       /etc/nginx/mime.types;
access_log  /var/log/nginx/access.log;
sendfile        on;
keepalive_timeout  65;
tcp_nodelay        on;
gzip  on;
gzip_disable "MSIE [1-6]\.(?!.*SV1)";
include /etc/nginx/conf.d/*.conf;
include /etc/nginx/sites-enabled/*;
} 
```

所以我有 nginx.conf，我认为这是放置 ssl 部分的地方。**我必须把它放在哪里？我应该做些什么额外的配置才能让它工作。**

我找到了那个代码。但不知道该放在哪里。**我的站点可用站点中没有我的站点配置。**

```
server {

        listen   443;

        ssl    on;
        ssl_certificate    /etc/ssl/certs/myssl.crt;
        ssl_certificate_key    /etc/ssl/private/myssl.key;

        server_name domain1.com;
} 
```

# ios - CALayer 上的图像在缩小然后再次放大后变得模糊

> ID：11240379
> 
> 赞同：0
> 
> 时间：2012-06-28T07:59:15.427
> 
> 标签：ios, image

我使用 imageView 在`CALayer`. 在我使用 对其应用一些缩放（降至 0.2）`CGAffineTransformMakeScale(scale,scale)`后，我得到了难看的模糊。

看起来变换矩阵实际上会影响图像，而不是将其以完整分辨率存储在内存中的某个位置并对其进行操作。
有什么方法可以使图像细节保持清晰？

谢谢！

```
EDIT: 
```

这是要求的代码

该对象继承自`CALayer`.

```
theScale = 0.2;
trans  = CGAffineTransformMakeScale(theScale,theScale);
[self setAffineTransform:trans]; 
```

稍后在代码中：

```
theScale = 1.0;
trans  = CGAffineTransformMakeScale(theScale,theScale);
[self setAffineTransform:trans]; 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-28T08:42:20.763

如果问题是缩小时模糊*，*您是否尝试设置 CGContextSetInterpolationQuality(context, kCGInterpolationHigh); 在进行改造之前？

如果问题是放大*时*的像素化，解决方法是使用更高分辨率的图像并*缩小*。

# c# - SaveFileDialog 不在新线程中显示？

> ID：11240384
> 
> 赞同：1
> 
> 时间：2012-06-28T07:59:33.720
> 
> 标签：c#, winforms, multithreading, dialog

我被这个问题困惑了很长时间。我使用 System.Threading 启动新线程，就像这样：

```
ParameterizedThreadStart threadFileExport = FileExport;
Thread threadExport = new Thread(threadFileExport)
{
    IsBackground = true,
    Name = "threadExport",
    Priority = ThreadPriority.AboveNormal
};
threadExport.Start(_dataTable); 
```

和

```
public void FileExport(object objTable)
{

     SaveFileDialog saveFileDialog = new SaveFileDialog
     {
         DefaultExt = "xlsx",
         Filter = "Excel 2007-2010|*.xlsx|" +
                  "Excel95,97,2003|*.xls|",
         FileName = "table.xlsx",
         Title = "Save as. . ."
     };
saveFileDialog.ShowDialog();
} 
```

但是对话框不会显示，并且执行“ShowDialog”时线程似乎会立即中止。这是一个错误还是我犯了一个错误？后台线程可以显示保存文件对话框吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-28T08:03:05.837

不，必须在 UI 线程上显示一个对话框，就像任何其他 UI 操作一样。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-28T08:07:44.883

您创建的线程没有建立消息循环，因此您无法显示它。

更好的是在 UI 线程上询问用户文件路径，然后启动导出线程，将文件名传递给它。更好的是使用[BackgroundWorker](http://msdn.microsoft.com/en-us/library/system.componentmodel.backgroundworker.aspx)线程，以便您的 UI 保持响应。

**更新：** 如果你不能使用 BackgroundWorker，下面是我描述的替代方法的代码。我假设您有一个类似于`ExportDataTableToFile`您在获取文件名后调用的方法。

```
//
// Assuming your actual export method is similar to this:    
//
void ExportDataTableToFile(DataTable dataTable, string fileName) {
    // ...
} 
```

我假设你在这里的 UI 线程上：

```
//
// You can ask for the file path first;
//
SaveFileDialog saveFileDialog = new SaveFileDialog
{
     DefaultExt = "xlsx",
     Filter = "Excel 2007-2010|*.xlsx|" +
              "Excel95,97,2003|*.xls|",
     FileName = "table.xlsx",
     Title = "Save as. . ."
};
saveFileDialog.ShowDialog();

string fileName = null;
if(saveFileDialog.Result == DialogResult.OK) // "else" case should be added
    fileName = saveFileDialog;

//
// And then start the thread:
//
Thread threadExport = new Thread(() => ExportDataTableToFile(_dataTable, fileName))
{
    IsBackground = true,
    Name = "threadExport",
    Priority = ThreadPriority.AboveNormal
};
threadExport.Start(); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-03-26T18:52:32.397

试试这个

在你的课上

```
private object sync_temp = new object(); 
```

并在线程方法中

```
string path;
SaveFileDialog save = new SaveFileDialog();
// your code to do with "save"
Action ac = () => { lock (sync_temp) { save.ShowDialog(); } };
Invoke(ac);
lock (sync_temp)
{
   path = save.FileName;
} 
```

或将该线程标记为 STAThread

# python - 美味派中的多种资源

> ID：11240385
> 
> 赞同：0
> 
> 时间：2012-06-28T07:59:36.853
> 
> 标签：python, django, rest, tastypie

我正在使用 Tastypie 构建一个 REST API。所以我有这堂课：

所以我有一个 classe ToolBox 并且用 sweetpie 我可以通过

[http://somthing.com/api/toolbox/list/](http://somthing.com/api/toolbox/list/) http://somthing.com/api/toolbox/list/5

但是可以添加诸如“http://somthing.com/api/toolbox/stats/5”之类的新方法来获取所选工具箱的许多统计信息？

或者可以创建一个不基于模型的 Stat 类来提供关于 ToolBox、User 和许多其他统计信息的统计信息？

谢谢你

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-28T08:30:58.750

您不应该混合使用资源 url，它是 hackish 并且可能会变得过于复杂。您可以使用脱水循环将非模型字段添加到现有 ToolboxResource，或者如果存在关系，您可以将一个资源嵌套在另一个资源中，请参阅：[this post](https://stackoverflow.com/questions/11230607/how-to-combine-mutiple-resources-in-django-tastypie/11232187#11232187)

[美味的文档：脱水循环](http://django-tastypie.readthedocs.org/en/latest/resources.html?highlight=dehydrate#dehydrate-foo)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-10-13T09:25:01.797

是的，试试这个。它是一个装饰器，可帮助您将自定义操作添加到 Tastypie 资源： [https ://github.com/thelonecabbage/django-tastypie-actions](https://github.com/thelonecabbage/django-tastypie-actions)

# php - AMFPHP2.1 与 Flex 之间的连接

> ID：11240387
> 
> 赞同：2
> 
> 时间：2012-06-28T07:59:41.347
> 
> 标签：php, mysql, actionscript-3, amfphp, away3d

我的朋友在IMAC中建立了一个AS3游戏，他在我使用win7系统时将游戏文件发送给了我。完成配置后，出现了一个问题：Flex 控制台中的“NetConnection.Call.BadVersion”。在 localhost/amfphp 中打开 .php 时运行良好，并且 actionscript 中的 URL 正确，连接 mysql 的信息也正确。

谁能帮我？请？

我做了谷歌搜索，唯一的解决方案是更改gateway.php中的一些语句，但这是1.9版本，我的是2.1

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-17T12:47:21.050

可能是跨域问题。您只需尝试以下 xml 代码

```
<?xml version="1.0"?>
<!DOCTYPE cross-domain-policy SYSTEM "http://www.macromedia.com/xml/dtds/cross-domain-policy.dtd">
<cross-domain-policy>
<allow-access-from domain="*" />
</cross-domain-policy> 
```

# scala - 在 sbt 0.11 的自定义任务中获取项目的源文件

> ID：11240397
> 
> 赞同：6
> 
> 时间：2012-06-28T08:00:48.280
> 
> 标签：scala, sbt

我使用 SBT 0.11。

我`build.sbt`在 sbt 项目中有以下文件：

```
myAction := {
  // val srcFiles = ?
  // How can I make srcFiles a List[File] of all sources files?
  println("This is my action")
} 
```

它工作得很好，但是我如何访问所有 J​​ava/Scala 源文件路径（例如`src/main/scala/*.scala`）和目标类目录（例如 target/scala-2.9.1/class）之类的设置？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-28T10:43:07.490

定义一个taskKey，比如说

> 你的行动任务

然后

```
yourActionTask <<= (baseDirectory, target, packageBin in Compile, resources in Compile...) map { (basedir, targetDir, bin, res...)=>  
     // use these resources to complete your task as per your needs
} 
```

顺便提一句。您可以在 Keys.scala 源代码或 sbt 的 scaladoc 中找到更多预定义的任务/键。

这是一个您可以参考的示例，它是从我的一个构建文件中提取的（只需将 TaskKey 和 Task 定义结合在一起，因为我不打扰我将来会重用 TaskKey）：

```
 val distTask = TaskKey[Unit]("dist", "distribute the deployment package of eromanga") <<= (baseDirectory, target, fullClasspath in Compile, packageBin in Compile, resources in Compile, streams) map {
(baseDir, targetDir, cp, jar, res, s) =>
  s.log.info("[dist] prepare distribution folders...")
  val assemblyDir = targetDir / "dist"
  val confDir = assemblyDir / "conf"
  val libDir = assemblyDir / "lib"
  val binDir = assemblyDir / "bin"
  Array(assemblyDir, confDir, libDir, binDir).foreach(IO.createDirectory)

  s.log.info("[dist] copy jar artifact to lib...")
  IO.copyFile(jar, libDir / jar.name)

  s.log.info("[dist] copy 3rd party dependencies to lib...")
  cp.files.foreach(f => if (f.isFile) IO.copyFile(f, libDir / f.name))

  s.log.info("[dist] copy shell scripts to bin...")
  ((baseDir / "bin") ** "*.sh").get.foreach(f => IO.copyFile(f, binDir / f.name))

  s.log.info("[dist] copy configuration templates to conf...")
  ((baseDir / "conf") * "*.xml").get.foreach(f => IO.copyFile(f, confDir / f.name))

  s.log.info("[dist] copy examples chanenl deployment...")
  IO.copyDirectory(baseDir / "examples", assemblyDir / "examples")

  res.filter(_.name.startsWith("logback")).foreach(f => IO.copyFile(f, assemblyDir / f.name))
  } 
```

# php - PDF翻页使用Php？

> ID：11240400
> 
> 赞同：4
> 
> 时间：2012-06-28T08:00:55.280
> 
> 标签：php, pdf, animation

有没有办法为 PDF 文件做**翻页**动画？我正在我的网站上上传一个 PDF 文件，现在在查看它时，我想要翻页效果，而不是上下滚动。就像[这样](http://pressmo.com/)。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-28T08:17:06.620

这是使用 Flash、CSS3 或 JavaScript 完成的。PHP 是服务器端的，因此不像您所追求的那样处理客户端交互。

您链接到的网站提供的服务可提供您正在寻找的效果。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-08-29T18:51:53.537

FlexPaper 有一个 PHP 库，可帮助您将 PDF 发布到翻页书

[http://flexpaper.devaldi.com/docs_publishing_with_PHP.jsp](http://flexpaper.devaldi.com/docs_publishing_with_PHP.jsp)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2017-04-18T09:53:39.953

您可以尝试使用 heyzine，它有一个[库可以将 PDF 转换为具有翻页效果的杂志](http://heyzine.com)。

您可以通过链接、jquery 或 php 使用它。

# php - 如何使用 preg_replace 从 html 中删除特定的 div

> ID：11240403
> 
> 赞同：0
> 
> 时间：2012-06-28T08:01:13.580
> 
> 标签：php, regex

我有一些 html，我想使用 preg_replace 删除带有内容的特定 div 标签。

代码：

```
<div class="time-trainer"> sjdgj</div> 
```

我想删除具有`class="time-trainer"`并删除内容的 div。

preg_replace 可以很好地从 html 中删除图像标签，但是我们如何对 div 做同样的事情

```
$rmvimgfromdata = preg_replace("/<img[^>]+\>/i", "",  $data); 
```

上面的代码可以很好地从 html 中删除图像标签。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-28T08:11:36.707

尝试这个

```
$html   = '<div class="time-trainer">Remove</div>';

// Show
echo $html;

// Remove
echo preg_replace('~<div([^>]*)(class\\s*=\\s*["\']time-trainer["\'])([^>]*)>(.*?)</div>~i', '', $html); 
```

**更新**

使用 DOM

```
$html   = '<div class="time-trainer">
                <p class="fifths">asdasdas</p>
                <p class="hundredths">asdasdas</p>
                <p class="winner-info">asdasdas</p>
            </div>';

$dom = new DOMDocument;
$dom->loadHTML( $html );

$xpath = new DOMXPath( $dom );
$pDivs = $xpath->query(".//div[@class='time-trainer']");

foreach ( $pDivs as $div ) {
  $div->parentNode->removeChild( $div );
}

echo preg_replace( "/.*<body>(.*)<\/body>.*/s", "$1", $dom->saveHTML() ); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-28T08:18:27.467

preg_replace 无法删除元素（并确保结果是有效的 xml）。

考虑以下示例：

```
dsadsa
<div class="time-trainer">
  adsadas
  <div>dsadas</div>
  dsa
  <div>das</div>
  dsadsa
</div>
ddsadas 
```

正则表达式在语言理论中描述了正则语言（L3），而 XML 则处于更高的层次（L1）。

要修改 XML 文件，您应该使用 xml 解析器，并使用它删除/添加/修改元素。阅读有关[XML 操作的文档](http://www.php.net/manual/en/refs.xml.php)

# javascript - 动态增加 AJAX loader 的加载百分比

> ID：11240405
> 
> 赞同：0
> 
> 时间：2012-06-28T08:01:30.770
> 
> 标签：javascript, jquery, ajax

我有这个 AJAX 加载器，使用 CSS 创建。

而且我正在尝试将它显示的负载百分比每 1 秒增加 10%，以便用户可以看到一些进度。

我正在使用此`setTimeout`函数每 1 秒调用一次。

这是函数和[Fiddle](http://jsfiddle.net/tpprA/1/)：

```
$(document).ready(function() {

    var increase = 10;
    setTimeout(function() {
        increase = increase + 10;
        $("#result").html("<div class='progress progress-striped active' style='width :300px; margin:0 auto;'><div class='bar' style='width: " + increase + "%;'></div></div>");
        if (increase == 100) {
            increase = 10;                
        }

    }, 1000);

});​ 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-28T08:05:56.627

要重复函数调用，您需要`setInterval`，而不是`setTimeout`。

语法相同，因此您只需更改此标记。

但是在这种情况下，您是在对用户撒谎（可能是可以接受的），并且您正在做一些现有的 jquery 函数（如[animate](http://api.jquery.com/animate/) ）的工作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-28T08:16:57.337

问题是你`setTimeout`只调用了一次。它很酷等，但它只会被调用一次。

通常，当您想每秒多次调用一个函数时，您可以使用`setInterval`：

```
var int = setInterval( function() {
    // do something
}, 1000 ); 
```

但是，`setInterval`会每秒运行一次，即使里面的函数需要 2 秒才能运行（你可以看到重叠问题吗？）。

这就是为什么您可以使用以下技巧的原因`setTimeout`：

```
// Note that I'm naming the function in the setTimeout
var s = setTimeout( function tick() {
    // do something that takes a long time, like an ajax call

    // And finally:
    s = setTimeout( tick, 1000 );
}, 1000 ); 
```

请注意，我正在使用`var s`或`var int`能够使用`clearTimeout`或`clearInterval`一旦加载完成。

此外，使用它来调用相同的函数是一个聪明的技巧`arguments.callee`，但[现在已弃用](https://developer.mozilla.org/en/JavaScript/Reference/Functions_and_function_scope/arguments/callee)。所以我们只是命名函数。

ajax 调用的示例：

```
var s = setTimeout( function tick() {
    $.ajax( {
        url: '',
        success: function( data ) {
            // Sup with the datas?
            s = setTimeout( tick, 1000 );
        }
    } );
}, 1000 ); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-28T08:22:52.187

如果您使用的是 jQuery，为什么不使用`animate();`. 它在那里是有原因的。它提供流畅、简单的语法。

此外，您一次又一次地将整个标记附加到`div#result`. 应该避免。

试试这个，

**CSS：**

```
#result > .progress{
  width :300px; 
  margin:0 auto; 
} 
```

**Javascript：**

```
$(document).ready(function() {
   $('#result').html("<div class='progress progress-striped active'><div class='bar'></div></div>");
   $('#result').find('.bar').animate({width:'100%'}, 1000); 
});​ 
```

# macos - 在 NSArrayController 中通过 add: 更改强键。为什么？

> ID：11240406
> 
> 赞同：0
> 
> 时间：2012-06-28T08:01:30.853
> 
> 标签：macos, cocoa, key, automatic-ref-counting, nsarraycontroller

如果 an`NSArrayController`绑定到使用生成的数组

```
@synthesize (strong) anArray; 
```

`add:`使用or`remove:`绑定时会发生非常奇怪的事情。例如，我最终得到了一个不同的 anArray 地址。我确信这与**strong**关键字有关。有人可以向我解释为什么会这样吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-30T10:16:42.770

你是绑定`NSArrayController`到一个`NSArray`，还是一个`NSMutableArray`？`NSArrayController`如果将其绑定到 ，则可以工作`NSArray`，但是由于数组是不可变的，因此每次添加或删除对象时，数组控制器都会创建一个新数组。

# javascript - jquery mobile pageshow事件未在第一页触发

> ID：11240408
> 
> 赞同：2
> 
> 时间：2012-06-28T08:01:34.840
> 
> 标签：javascript, jquery, jquery-mobile

我是 jquery 移动框架的新手。根据我的观察，我无法在文档的第一页上触发 pagebeforeshow 事件

任何人都可以遇到同样的问题吗？请建议我触发事件的步骤或任何其他替代方法

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-28T08:36:13.090

**演示** [http://jsfiddle.net/yNzzG/](http://jsfiddle.net/yNzzG/)

在演示中，您将在`pagebeforeshow`触发处理程序时看到警报。

休息代码会说清楚，希望它有所帮助，

**代码**

```
$(document).bind('mobileinit', function() {
    alert('mobileinit');
});

$(function() {
    var selector = ':jqmData(role=page)';
    $('body').on('pageinit', selector, function(e, data) {
        // initialize page
        var $page = $(this);
        alert('init ' + $page.attr('id'));
    }).on('pagebeforeshow', selector, function(e, data) {
        // showpage
        var $page = $(this);
        alert('show Page before Show Stuff == > ' + $page.attr('id'));
    });
    $('#page1').on('pageinit', function(e, data) {
        // setup handler
        var $page = $(this);
        $page.find('.colorchanger').click(function() {
            var $content = $page.find('.ui-content'),
                isBodyC = $content.hasClass('ui-body-c');
            $content.toggleClass('ui-body-c', !isBodyC).toggleClass('ui-body-e', isBodyC);
        });

    });
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-11-20T15:40:07.570

另一种对我来说效果很好并且不需要其他事件处理程序的替代方法，因此我所有的 pageshow 绑定都在一个地方是简单地创建一个虚拟的第一页，它将立即更改为第一个可见的页面：

```
<div id="start" data-role="page" data-title="App Title"></div>
<div id="realFirstPage" data-role="page">
   ...
</div> 
```

然后在 document.ready 函数的末尾，只需执行以下操作：

```
setTimeout(function() {
    $.mobile.changePage($("#realFirstPage"), {
        transition: 'pop',
        changeHash: false
    });
}, 100); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-09-30T07:56:00.760

这可能是因为 jquery dom 模型第一次没有准备好为第一页触发 page show 事件，所以尝试在 pageinit 事件中包含（绑定 pageshow 事件），它适用于我......

```
$(document).on("pageinit", "#pageId", function(e){
    console.log( ' Inside the  pageinit event' );
    $(document).on("pageshow", "#pageId", function(e){
         // code for page show event
  });
         // code for pageinit event
  }); 
```

# windows-mobile - Metro 风格应用中的本地 HTML 内容

> ID：11240409
> 
> 赞同：2
> 
> 时间：2012-06-28T08:01:35.297
> 
> 标签：windows-mobile, windows-8, microsoft-metro

我正在重写一个我们目前在 iOS 中工作的应用程序，它在使用 Windows 8 Metro 风格应用程序时遇到了问题。特别是我无法加载*外部*HTML 内容（以及相关的库，即 Css 和 JavaScript）。这样做时，我会收到大量警告和错误以及/或 JavaScript 文件未链接。

我相信我了解沙盒以及 ms-appx 与 ms-appx-web 上下文切换（在 JavaScript 项目类型中）并发现了以下内容。

1.  使用 iFrame 从同一个项目中加载 html 可以*工作*，即渲染页面、执行链接的 javascript 等。（我相信这在从组件项目加载时也可以加载，即在同一个包中）

2.  使用 iFrame 从 ApplicationData 加载（文件将在下载后解压缩）不适用于前面提到的任何一个上下文。出现类似的错误：`"The app can’t use script to load the file:///...AppData/Local/Packages/.../index.html because the url launches another app. Only direct user interaction can launch another app."`并且没有显示任何内容，即使这不是由脚本加载的。

3.  在 JavaScript 中使用`launchFileAsync('file:///...AppData/Local/Packages/.../index.html')`会加载并显示内容，但不会链接到外部 JavaScript 文件（或者更确切地说是阻止它们），并且非常类似于从桌面执行 html 文件并获取`Internet Explorer restricts this page from running scripts or ActiveX controls`和`Allow blocked content`按钮。

不幸的是，该内容必须远程传送到应用程序。但是应用程序的所有其他方面都可以更改。我正在关注的其他研究途径是；使用应用内购买机制下载其他内容。构建自定义浏览器控件。解析文件内容并将其合并到一个整体页面中。

如果有人有任何想法或自己遇到过这个问题，我将不胜感激。

# php - 使用 oauth 获取 google 联系人姓名

> ID：11240410
> 
> 赞同：1
> 
> 时间：2012-06-28T08:01:38.637
> 
> 标签：php, oauth

目前我正在使用一段代码从谷歌帐户获取谷歌联系人电子邮件并将它们显示到表格中。电子邮件正确显示，但我也希望显示此人的姓名。我目前使用的代码如下。我知道 $xml 包含名称（我尝试在 html 上打印出来），但我不知道如何显示它。$result 不再包含名称，所以我猜测显示的名称必须在此之前。有人有什么主意吗？

```
//passing accesstoken to obtain contact details
$xmlresponse =  file_get_contents('https://www.google.com/m8/feeds/contacts/default/full?oauth_token='.$tok_value.'&max-results=500');
//print_r($xmlresponse);
//reading xml using SimpleXML
$xml =  new SimpleXMLElement($xmlresponse);
//print_r($xml);
$xml->registerXPathNamespace('gd', 'http://schemas.google.com/g/2005');
//after dumping there is no names in the result
$result = $xml->xpath('//gd:email');
//var_dump($result);
$count = 0;
echo "<table class=\"inv-table\" cellpadding=\"5\">";
foreach ($result as $title) 
{
    //echo $title->attributes()->address . "<br><br>";
    echo "<tr><td><input type=\"checkbox\" 
                         name=\"email_to[]\" 
                         value=".$title->attributes()->address.">".$title->attributes()->address;
    echo "</td></tr>";
    //echo $title->attributes()->displayName;
    //echo $title->fullName;
    $count = $count + 1;
}
echo "</table>"; 
```

提前致谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-24T11:05:31.670

将此代码放入循环中：

```
echo $xml->entry[$count]->title; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-11T17:13:40.277

我尝试了上述方法，`echo $xml->entry[$count]->title;`但它不起作用，因为这没有为电子邮件提供正确的名称。相反，我这样做了：

```
// https://www.google.com/m8/feeds/contacts/default/full?updated-min=1970-03-16T00:00:00&max-results=10000");

function getNamesAndEmails ($xml_response) {
    $xml = new \SimpleXMLElement($xml_response);
    $xml->registerXPathNamespace('gd', 'http://schemas.google.com/g/2005');

    $results = array ();
    foreach($xml->entry as $entry){

        $xml = simplexml_load_string($entry->asXML());

        $ary = array ();
        $ary['name'] = (string) $entry->title;

        foreach ($xml->email as $e) {
          $ary['emailAddress'][] = (string) $e['address'];
        }

        if (isset($ary['emailAddress'][0])) {
            $ary['email'] = $ary['emailAddress'][0];
        }

        $results[] = $ary;

    }

    return $results;
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-08T23:22:20.447

你能得到名字吗？我一直在尝试处理同样的问题。

我注意到您尝试了`echo $title->fullName`，它不会在下面，`$title`因为这只是找到的所有电子邮件地址的结果，其中只有和地址​​和一些其他可选项目（都不是名称）。

如果您`print_r($xml)`应该在那里看到名称，但对我来说，没有多少 xpath 可以为我检索它们。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-08-10T00:38:57.657

只是一个非常相似的解决方案，但对我来说效果很好：

```
$url = "https://www.google.com/m8/feeds/contacts/default/full?max-results=2000&oauth_token=$token";
$xmlresponse =  file_get_contents($url);
$xml =  new SimpleXMLElement($xmlresponse);
$xml->registerXPathNamespace('gd', 'http://schemas.google.com/g/2005');
$result = $xml->xpath('//gd:email');

$contacts = array();
foreach ($result as $key=>$title) {
    $contact = new stdClass();
    $contact->name = sprintf("%s", $xml->entry[$key]->title[0]);
    $contact->email = sprintf("%s", $title->attributes()->address);
    $contacts[] = $contact;
} 
```

因此，在循环之后，您有一个包含简单对象的数组，其中填充了姓名和电子邮件。

# c - 新图书馆的schoolproject额外功能

> ID：11240415
> 
> 赞同：1
> 
> 时间：2012-06-28T08:01:56.430
> 
> 标签：c, libraries

明天我有一个 C 编程考试，我们必须展示我们制作的程序。我被分配了一个后缀计算器，我完成了这个。但是为了获得额外的分数，我们必须在程序中添加一个不在作业文本中的额外函数。我们必须自己找到一些东西。他们说如果我们使用一个对我们来说是新的图书馆会很好。但我没有任何灵感。我还有不到 24 小时的时间来完成，我不知道那里有什么样的图书馆，也不知道我能做什么。

所以，我需要在后缀计算器中添加一些东西，该计算器使用 C 语言中的一个新库，该库可在大约 10 小时内进行编程。

有任何想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-28T08:06:00.140

使用[GMP](http://gmplib.org/)库为您的计算器添加大数字支持。如果你有足够的时间，你可以计算 10^500 / 2^230 ;-)

# java - log4j.properties 文件 - 同一类中的多个记录器

> ID：11240418
> 
> 赞同：45
> 
> 时间：2012-06-28T08:02:06.680
> 
> 标签：java, logging, log4j

我想`log4j`在我的应用程序中有两个不同的记录器，并且他们写入各自日志的内容之间没有“重叠”。

例如：

*   Logger1 写入与一组系统事件相关的 INFO 事件
*   Logger2 写入与另一组系统事件相关的 INFO 事件
*   日志中不应出现任何条目两次

我的 log4j.properties 如下：

```
log4j.rootLogger=DEBUG, stdout
log4j.logger.org.apache=DEBUG, stdout
log4j.logger.xdasLogger=DEBUG, xdas

log4j.appender.stdout=org.apache.log4j.ConsoleAppender
log4j.appender.stdout.layout=org.apache.log4j.PatternLayout
log4j.appender.stdout.layout.ConversionPattern=%m%n

log4j.appender.xdas=org.apache.log4j.ConsoleAppender
log4j.appender.xdas.layout=org.apache.log4j.PatternLayout
log4j.appender.xdas.layout.ConversionPattern=%d %-5p %c - %m%n 
```

我的Java代码如下：

```
public static void main(String[] args) {
    PropertyConfigurator.configure(Client.class
            .getResource("/log4j.properties"));
    xdasLogger = Logger.getLogger("xdasLogger");
    logger = Logger.getLogger(Client.class);

    logger.info("normal");
    xdasLogger.info("xdas");
} 
```

但我的控制台输出如下：

```
normal
2012-06-28 09:52:44,580 INFO  xdasLogger - xdas
xdas 
```

请注意，“xdas”由`logger`和记录`xdasLogger`，这是不可取的。

有谁知道我需要在 log4j.properties 中进行哪些更改才能将控制台输出更改为以下内容？

```
normal
2012-06-28 09:52:44,580 INFO  xdasLogger - xdas 
```

**解决方案（取自已接受的答案）：**

```
log4j.rootLogger=DEBUG, stdout
log4j.logger.org.apache=DEBUG, stdout
log4j.logger.xdasLogger=DEBUG, xdas

log4j.additivity.org.apache=false
log4j.additivity.xdasLogger=false

log4j.appender.stdout=org.apache.log4j.ConsoleAppender
log4j.appender.stdout.layout=org.apache.log4j.PatternLayout
log4j.appender.stdout.layout.ConversionPattern=%m%n

log4j.appender.xdas=org.apache.log4j.ConsoleAppender
log4j.appender.xdas.layout=org.apache.log4j.PatternLayout
log4j.appender.xdas.layout.ConversionPattern=%d %-5p %c - %m%n 
```

* * *

## 回答 #1

> 赞同：45
> 
> 时间：2012-06-28T08:07:36.900

尝试将记录器的可加性设置为 false。这将避免传播到 rootLogger。

```
log4j.additivity.org.apache=false
log4j.additivity.xdasLogger=false 
```

# c - 如何解析 Nginx 配置文件？

> ID：11240422
> 
> 赞同：4
> 
> 时间：2012-06-28T08:02:12.983
> 
> 标签：c, parsing, nginx

我想找到一种解析`nginx`配置文件的方法，以便动态生成我将用作文档的图表。

配置文件的`nginx`语法是这样的（这个例子是为了简洁起见，我管理的配置文件实际上要复杂得多）：

```
location / {
   if (GET) {
      echo_exec @memcache;
   }
   if (POST) {
      echo_exec @application;
   }
}

location @memcache {
   # try to get content from cache
   if (notfound) {
       # fallback to application
       echo_exec @application;
   }
}
location @application {
   # forwarding request to application
} 
```

我想生成这样的图表（当将鼠标移到进程框上时，您会看到注释，正在调用哪些指令......）：

![在此处输入图像描述](../Images/5ae1cc3521c80e6483158b4485ff7804.png)

据我所知，`nginx`配置文件语法是自定义的。我能够在里面的源代码中找到解析器，`src/core/ngx_conf_file.c`它是这样的：

```
 case ';':
        case '{':
            if (cf->args->nelts == 0) {
                ngx_conf_log_error(NGX_LOG_EMERG, cf, 0,
                                   "unexpected \"%c\"", ch);
                return NGX_ERROR;
            }

            if (ch == '{') {
                return NGX_CONF_BLOCK_START;
            }

            return NGX_OK; 
```

不幸的是，我对此一无所知，`C`因此不知道如何重用该代码。

**您知道`nginx`配置文件语法是否接近另一种已知语法，其中解析器已经存在，我可以重新使用和调整以满足我的需要？**

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-22T21:08:08.123

您可能想查看我刚刚在 GitHub 上发布的[Config::Neat Perl 模块。](https://github.com/iafan/Config-Neat)我在搜索用 Perl 编写的类似配置解析器时遇到了您的问题，但没有找到任何像样的解析器。

Config::Neat 受到 nginx 配置语法的启发，尽管它不需要在每行末尾使用分号，并且 [尚未] 支持具有相同名称的块。但是，它可能会成为您的起点。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-28T20:00:32.860

我是hypoconf的作者。该项目并没有死，我只是将其重命名为 NAPKIN 并移至 github。我现在将在 Google 代码页面上做一个注释，以便人们知道。我还没来得及完成，所以最后一次提交是9个月前的，所以还没有1.0/beta，但是如果你知道如何操作，软件基本上可以工作（目前没有文档，只生成nginx配置）文件）。不过，我确实打算完成它，只要我找到一些空闲时间。

您的请求的问题是我编写的解析器是用于从存储在内存中的值（之前从 YAML 中读取）*生成*配置文件，而不是相反 - 不分析它们。好消息是，根据我的代码（甚至从头开始）为你需要的东西编写一个新的解析器应该相对容易。它会比我那里的要简单得多。但是，我还没有评论代码，所以找到你的方法真是一团糟。

解析配置文件的最快方法是逐行浏览它，使用类似我的[SuperStack 类](https://github.com/niieani/napkin/blob/master/lib/hypoconf/lib/Tools/SuperStack.php)的东西将整个配置构建为关联数组，然后使用一些预编程的魔法打印数组或将其作为图片转储. 我在这里看到的唯一问题是 IF 以及如何处理它们，但它应该很容易解决。

无论如何，添加到 NAPKIN 将是一个有趣的功能。

我会给你发一封电子邮件来继续这个想法。

# android - Android：位图图像在预览中反转？

> ID：11240426
> 
> 赞同：0
> 
> 时间：2012-06-28T08:02:22.003
> 
> 标签：android, bitmap, android-camera, android-imageview

我用camera.take图片拍照并将这些数据放入图片并转换为位图。然后我在imageview中显示。

当我以横向模式拍照时，一切正常。如果我以纵向模式拍照，则预览图像会反转。请帮我解决这个问题。

提前致谢....

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-28T08:11:01.230

此[链接](http://developer.android.com/reference/android/hardware/Camera.html#setDisplayOrientation%28int%29)完全响应您提到的内容

```
public static void setCameraDisplayOrientation(Activity activity,
         int cameraId, android.hardware.Camera camera) {
     android.hardware.Camera.CameraInfo info =
             new android.hardware.Camera.CameraInfo();
     android.hardware.Camera.getCameraInfo(cameraId, info);
     int rotation = activity.getWindowManager().getDefaultDisplay()
             .getRotation();
     int degrees = 0;
     switch (rotation) {
         case Surface.ROTATION_0: degrees = 0; break;
         case Surface.ROTATION_90: degrees = 90; break;
         case Surface.ROTATION_180: degrees = 180; break;
         case Surface.ROTATION_270: degrees = 270; break;
     }

     int result;
     if (info.facing == Camera.CameraInfo.CAMERA_FACING_FRONT) {
         result = (info.orientation + degrees) % 360;
         result = (360 - result) % 360;  // compensate the mirror
     } else {  // back-facing
         result = (info.orientation - degrees + 360) % 360;
     }
     camera.setDisplayOrientation(result);
 } 
```

# php - 使用 php 读取 /var/log 中的日志文件

> ID：11240428
> 
> 赞同：-1
> 
> 时间：2012-06-28T08:02:25.527
> 
> 标签：php, logging

如何使 php 可以读取 /var/log/....中的日志文件

我尝试了这段代码但不起作用

```
<?php
    $file = "/var/log/smsd.log"; //gammu's sms log
    $data = file($file);

    $end = count($data);
    $first = $end-10;

    $number = range($first,$end);

    foreach($number as $n) {
        $log_data .= $data[$n]."\n";
    }

    echo $log_data;
?> 
```

但是，如果我尝试使用此脚本读取同一文件夹中的文件，这是可行的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-28T08:09:10.887

“但不工作”不是错误消息。检查您的配置[是否启用了错误报告。](https://stackoverflow.com/questions/10103307/php-error-reporting-doesnt-work).

很可能是权限问题。如何解决这个问题取决于您的操作系统和管理日志文件的方式（但您可能会在[chmod](http://www.manpagez.com/man/1/chmod/)和[logrorate](http://linux.die.net/man/8/logrotate)手册页中找到答案）。

顺便说一句，如果必须读取非常大的文件，您的代码也会崩溃。考虑使用

```
<pre><?php
   passthru('tail -10 /var/log/smsd.log');
?></pre> 
```

# dll - 使用 PHP 直接打印到打印机

> ID：11240431
> 
> 赞同：0
> 
> 时间：2012-06-28T08:02:49.397
> 
> 标签：dll, printing, php, php-extension

我想直接从 PHP 脚本将文本文件发送到打印（例如，在我将记录插入数据库后打印收据）。

这可以使用`php_printer.dll`吗？

我已尝试安装此扩展程序（在 中`php.ini`），但出现错误。这个扩展在 PHP 5.3.x 中可用吗？

有没有别的办法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-28T11:53:49.273

> 我曾尝试安装此扩展程序（在 php.ini 中），但出现错误。这个扩展在 PHP 5.3.x 中可用吗？

我不能告诉你，但即使是这样，这些信息也可能对你毫无用处，因为你一开始就没有设法安装它。那么回答这个问题应该如何产生影响呢？您可以在此处找到更多信息：[在哪里可以找到 php_printer.dll？](https://stackoverflow.com/questions/7916480/where-to-find-php-printer-dll)

> 有没有别的办法？

生成 PDF。存储它。将其通过管道传输到将其转换为 postscript 文件的程序。将该 postscript 传送到支持 postscript 的打印机。任务完成。

# mysql - 用于查找的范围与邮政编码列表？

> ID：11240436
> 
> 赞同：1
> 
> 时间：2012-06-28T08:03:01.707
> 
> 标签：mysql, sql

对于购物车，我想建立一个邮政编码数据库，我的承运人可以在其中发货。

我可能有几个运营商，所以我正在寻找一个灵活的解决方案。并且有 2 种付款方式 - COD（现金）和预付（网上银行）。

来自其中一家承运人的运输邮政编码列表有 2,775 个 COD 方法条目和 4,139 个预付付款条目。

设计#1（感谢这个[答案](https://stackoverflow.com/a/11152714/558094)）

我将直接列表转换为范围（如 {1,2,3,5,8,9} => {(1,3), (5,5), (8,9)}），并具有模式 -

```
carrier
        id(int) | name (varchar)

cod_zipcodes
        start(int) | end(int) | carrier(fk::carrier.id)

prepaid_zipcodes
        start(int) | end(int) | carrier(fk::carrier.id) 
```

在转换为范围时，预付费邮政编码缩小到 1,593（38%），鳕鱼邮政编码缩小到 842（30%）。

设计#2

```
cod_zipcodes
    zipcode(int)

prepaid_zipcodes
    zipcode(int) 
```

基本上这个设计只是有列表。如果有多个运营商，我会合并列表。所以我丢失了哪个承运人为特定邮政编码发货的信息。但这不是问题（但如果它被整理出来，那也不是问题！）。我只想查找数据库，客户输入的邮政编码在我们的允许列表中。

我对实时数据库的经验有限。请指出哪种设计更好，或建议您自己的设计。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-28T08:27:14.160

第一个设计可能是最紧凑的；可以通过在`start`和上添加跨越索引来优化它`end`。您还可以像这样组合两种付款方式：

```
zipcodes
    start(int) | end(int) | carrier(fk::carried.id) | cod (0, 1) | prepaid (0, 1) 
```

*该`carrier`字段是可选的，但您可以稍后在需要更新一个运营商的邮政编码范围时使用它。*

不要试图变得聪明，根据是否`cod`和`prepaid`可用将范围合并在一起；您可以输入具有不同运营商和付款类型可用性的多个范围。要查询它们，您将使用：

```
SELECT COUNT(cod), COUNT(prepaid) 
FROM zipcodes 
WHERE start <= :start AND :end <= end 
```

`cod`这将给出包含特定邮政编码和/或特定邮政编码的单行`prepaid`（即使它可能匹配多个数据库行。

当承运人更改其邮政编码范围和付款可用性时，最简单的方法是删除该承运人的所有行并重新填充（使用表锁）；如果您决定保留该数据库字段，这对您来说非常容易。

* * *

您的第二个设计看起来更像是您从运营商那里接收邮政编码列表的方式，并且管理更加简化。不过，我会再次将它们放在一张桌子上：

```
zipcodes
    zipcode | cod (0, 1) | prepaid(0, 1) 
```

By choosing `ENUM` datatype you can get pretty good data compression as well. Updating this table when a carrier changes their delivery data is less trivial, because the `carrier` field is missing, so that means you have to eitherwrite a script that detects the addition, deletion and updates of a particular zip code or start over completely with both carrier data.

* * *

If updates are rare and you don't mind taking the whole table down when it does happen, I would recommend the second option. By adding `cod` and `prepaid` types in each row rather than two separate tables you can use a primary key for faster lookups compared to the range solution.

If you like flexibility and the fact that you can tell which carrier is supported on a particular range I would go for the first option; the index is still fast enough for most cases and the table size is likely comparably with the second option.

# git - 在 Git 提交之前替换文本文件中的 $markers$

> ID：11240439
> 
> 赞同：2
> 
> 时间：2012-06-28T08:03:37.390
> 
> 标签：git, git-svn

我的文本文件 (java) 我使用像`$Author$`,之类的标记`$Date$`，`$Revision$`这些标记在每次提交时都会更新。

我怎样才能在 Git 中做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-28T08:12:59.903

你可以使用 Git 的[smudge 和 clean filters](http://git-scm.com/book/ch7-2.html#Keyword-Expansion)来做到这一点。你也可以使用[pre-commit 钩子](http://git-scm.com/book/en/Customizing-Git-Git-Hooks)来做，但要[小心](http://codeinthehole.com/writing/tips-for-using-a-git-pre-commit-hook/)。

# asp.net-mvc-3 - 如何在 MVC3 中显示弹出窗口

> ID：11240444
> 
> 赞同：1
> 
> 时间：2012-06-28T08:04:20.110
> 
> 标签：asp.net-mvc-3, razor, popup

我是 MVC 的新手。如何在弹出的 MVC3 razor 中编辑数据。我看了很多，但没有得到它。我正在使用 jquery。我的控制器-

```
[HttpGet]
    public ActionResult Edit(int id)
    {

        var q = from p in db.accs
                where p.id == id
                select p;
        return View(q.FirstOrDefault());
    }
    [HttpPost]
    public ActionResult Edit(int id,account ac)
    {
        acc a = (from p in db.accs
                     where p.id==id
                     select p).Single();

        if (ModelState.IsValid)
        {
            a.f_name = ac.f_name;
            a.l_name = ac.l_name;
            a.Address = ac.Address;
            a.Phoneno = ac.Phoneno;
            db.SubmitChanges();
            int i = 2;
            return RedirectToAction("Display", new { i = i });
        }
        else
        {
            return View("Edit");
        } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-28T08:06:05.217

您可以查看[jQuery UI 对话框](http://jqueryui.com/demos/dialog/)组件，它允许您实现这一点。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-28T08:15:01.337

您将不得不使用可以返回部分视图的 Ajax.ActionLink，然后将该结果添加到 div 中，然后 OnSuccess 显示该部分视图。

* * *

```
 @Ajax.ActionLink("popup", "SomeAction", new AjaxOptions { HttpMethod = "GET", UpdateTargetId = "result",     InsertionMode = InsertionMode.Replace, OnSuccess="openPopup" })<br />

   <div id="result" style="display:none;"></div>

   <script type="text/javascript">
       $(document).ready(function() {
          $("#result").dialog({
             autoOpen: false,
               title: 'Title',
              width: 500,
             height: 'auto',
            modal: true
        });
   });
       function openPopup() {
         $("#result").dialog("open");
} 
```

# firefox-addon - 此代码删除/禁用其他 Firefox 扩展的工具栏按钮

> ID：11240446
> 
> 赞同：0
> 
> 时间：2012-06-28T08:04:26.173
> 
> 标签：firefox-addon, toolbar

我正在创建一个 Firefox 扩展。它工作正常。但问题是，当我向导航工具栏添加按钮时，它会删除/禁用工具栏上的其他按钮。请检查下面我的代码有什么问题：

```
id = "my-toolbar-button";
if (!document.getElementById(id))
{
    var navbar = document.getElementById("nav-bar");
    var newset = navbar.currentSet + ",my-toolbar-button";
    navbar.currentSet = newset;
    navbar.setAttribute("currentset", newset );
    document.persist("nav-bar", "currentset");
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-28T08:24:04.003

我在以下帖子中找到了答案：[Automatically install toolbarbutton to firefox nav-bar, not working with insertItem](https://stackoverflow.com/questions/9626370/automatically-install-toolbarbutton-to-firefox-nav-bar-not-working-with-inserti)

上面的代码甚至在 Firefox 初始化工具栏之前运行。所以它将其按钮添加到默认工具栏并设置它。解决方案是等待 firefox 在加载时使用 evenlistener 进行初始化。像这样：

```
window.addEventListener("load", function () { installButton(); }, false); 
```

# c++ - 如何使用 jpeglib

> ID：11240447
> 
> 赞同：1
> 
> 时间：2012-06-28T08:04:27.983
> 
> 标签：c++, visual-studio-2010, libjpeg

我正在尝试使用 jpeglib 将 jpeg 文件写入我自己的文件，而不使用 jpeg_compress 等预构建功能，而是单独编写标题和表格......这里有很多问题......

我正在使用 Windows 和 Visual Studio，所以我尝试从 gnuwin 站点安装 .exe 文件并在我的代码中包含“include”文件夹的 4 个头文件，但是当我尝试调用一些函数时，如 write_file_header、jpeg_stdio_dest 等等等，它说缺少链接，所以我必须包含实现这些功能的每个 .c 文件......

我也尝试包含 src 文件，但结果相同...我找到的每个示例仅包含标头 jpeglib.h 而没有其他内容，但是这样我无法使用我需要的功能，所以我的问题是，我该怎么做正确使用这些库？谢谢你

编辑：错误消息是错误 C3861: identifier not found... 简单地说，当我尝试调用位于 libjpeg 的某个 .c 文件中的某个函数时，编译器找不到这些函数的位置...

编辑 n.2：这里是函数的开始：

```
#include "jpeglib.h"
#include "jerror.h"
#include "Common.h"

void jpeg(unsigned int *Src, int srclen, unsigned int *cod, unsigned int *length){

struct jpeg_compress_struct cinfo;

write_file_header(&cinfo); <- here is the problem... how can i access that function? 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-28T08:09:48.657

您不应该**直接**包含`.c`文件，您必须告诉编译器*链接到*[本教程](http://www.steptools.com/support/stdev_docs/help/settings_vc10.html)中的库。

jpeg 库必须单独构建。

# android - 如何在 ExpandableListView 中为每个元素添加不同的图标？

> ID：11240448
> 
> 赞同：0
> 
> 时间：2012-06-28T08:04:35.530
> 
> 标签：android, icons, expandablelistview

我有一个问题，我想像这样为 expandableList 中的每个元素添加不同的图标；

```
- Icon1  Main 1
  - Icon2 Sub1
  - Icon3 Sub2

- Icon4  Main 2
  - Icon5 Sub3
  - Icon6 Sub4

- Icon7  Main 3
  - Icon8 Sub5
  - Icon9 Sub6 
```

可能吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-28T08:22:34.893

对的，这是可能的。您将需要两个不同的布局 xml 文件。一个用于父视图，另一个用于子视图。（或者如果布局相同，则只有一个，只是填充了不同的数据）。

然后在 getChildView() 和 getGroupView() 方法上扩展你的布局；并用你想要的drawables填充图标。来自资源或网络，或其他任何东西。

如果您在使用可扩展列表视图时遇到问题，请尝试按照[本教程](http://about-android.blogspot.pt/2010/04/steps-to-implement-expandablelistview.html)进行操作：

# java - 使用ajax和java上传文件

> ID：11240460
> 
> 赞同：1
> 
> 时间：2012-06-28T08:05:27.063
> 
> 标签：java, ajax, servlets

您好我想使用 ajax 和 Apache Commons File Upload 进行文件上传。在 Servlet 中，我有：

```
public void doPost(HttpServletRequest request, HttpServletResponse response)
throws ServletException, java.io.IOException {
System.out.println(response.getCharacterEncoding());
response.setCharacterEncoding("UTF-8");
System.out.println(response.getCharacterEncoding());
response.setContentType("text/html");
PrintWriter writer = response.getWriter();
writer.println("wtpwebapps<br/>");
boolean isMultipart = ServletFileUpload.isMultipartContent(request);
if (!isMultipart) {
    writer.println("<HTML>");
        writer.println("<HEAD <TITLE> Upload4 </TITLE> </HEAD>");
        writer.println("<BODY>");
        writer.println("<FORM action = \"Upload_Servlet\" method = \"post\" enctype = \"multipart/form-data\">");
        writer.println("<INPUT type = file name = ufile>");
        writer.println("<INPUT type = submit value = \"Attach\">");
        writer.println("<h1>its not multipart</h1>");
        writer.println("</FORM>");
        writer.println("</BODY>");
        writer.println("</HTML>");
        return;
    }          
FileItemFactory factory = new DiskFileItemFactory();
ServletFileUpload upload = new ServletFileUpload(factory);
List<FileItem> list=null;
String mifpath= "1";
String path = " ";
String mif = " ";
String from = "\\\\";
String to ="/";
String error="";
 try{
  list = upload.parseRequest(request);
  Iterator<FileItem> it = list.iterator();
  response.setContentType("text/html");
  while ( it.hasNext() ) 
  {

    FileItem item = (FileItem) it.next();
    File disk = new File("C:/uploaded_files/"+item.getName());

        path = disk.toString();

        String code = new String(path.substring(path.lastIndexOf("."), path.length()).getBytes("ISO-8859-1"),"utf-8");
        if (code.equalsIgnoreCase(".zip"))
        {
            mifpath=path;
            mif = mifpath.replaceAll(from, to);
            item.write(disk);
            error=unzip.unpack(mif, "C:/uploaded_files");
        }
        else
        {
            error = "Выбранный файл не является архивом zip";

        }
  }
}
 catch ( Exception e ) {
  log( "Upload Error" , e);
}
 request.setAttribute("error", error);
 request.getRequestDispatcher("/Home.jsp").forward(request, response);

// String redictedURL="http://localhost:8080/redicted_test/Home.jsp";
// response.sendRedirect(redictedURL);
writer.close();
}
} 
```

但我不知道在客户端做什么。

尝试使用 ajaxfileupload 库，但没有任何问题。

jsp

```
<%@ page import="java.sql.DriverManager"%>
<%@ page import="java.sql.Connection"%>
<%@ page import="java.sql.SQLException"%>
<%@ page import="java.sql.Statement"%>
<%@ page import="java.sql.ResultSet"%>

<%@ page language="java" contentType="text/html; charset=UTF-8"
pageEncoding="UTF-8"%>
<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
"http://www.w3.org/TR/html4/loose.dtd">

<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8"> 
<title>OpenLayers map preview</title>
<link href="http://localhost:8080/geoserver/openlayers/theme/default/style.css"      type="text/css"/>
<link href="fileuploader.css" type="text/css"/>
<script src="jquery.min.js"></script>
<script src="ajaxfileupload.js"></script>
<script src="fileuploader.js"></script>

<style type="text/css"> 
    /*<![CDATA[*/
        div.container {
            width: 100%;
            float: left;
            margin-right: -270px;
            }
        div.content {
            margin-right: 270px;
            }       
        div.info{   
                width: 270px;
                float: right;
                }
        div.clearing {
            height: 0;
            clear: both;
            }
        div.list {background-color:#dddddd; border-right:2px dashed #717dc9; width:250px; float:right; margin-left:10px;height:400}
        div.upload{background-color:#dddddd; height:190px; width:252px; float: right; margin-top:10px }
        div.listtitle {margin-left:10px; background-color:#dddddd}
        div.check {width:50%;float: left}
        div.filelist {overflow: auto; height:310px; margin-left:10px}
        div.upload_int{
        margin-left:10px
        }
        /* General settings */
            body {
                font-family: Verdana, Geneva, Arial, Helvetica, sans-serif;
                font-size: small;
                sans-serif; width:700px; margin:100px auto;
                }
        /* The map and the location bar */
            #map {
                clear: both;
                position: relative;
                max-width: 1000px;
                min-width: 100px;
                height: 590px;
                border: 1px solid black;
                }
    /*]]>*/
    </style>
<!-- Import OpenLayers, reduced, wms read only version -->
<script src="Scripts/OpenLayers/OpenLayers.js" type="text/javascript">
</script>
<script defer="defer" type="text/javascript">
var map;
var ch=[];
var tiled;

function init(){
var bounds = new OpenLayers.Bounds(6359825.735024724,6796708.483322172,9197952.978460854,10728325.920322442);
var options = {
    controls: [],
    maxExtent: bounds,
    maxResolution: 156543.0399,
    projection: "EPSG:900913",
    units: 'm'
};
map = new OpenLayers.Map('map', options);

    var fromProjection = new OpenLayers.Projection("EPSG:4326");   // Transform from WGS 1984
    var toProjection   = new OpenLayers.Projection("EPSG:900913");

// setup tiled layer

    osm = new OpenLayers.Layer.OSM( "OpenStreet Maps");

    map.addLayers([osm]);

// build up all controls
map.addControl(new OpenLayers.Control.PanZoomBar({
    position: new OpenLayers.Pixel(2, 15)
}));
map.addControl(new OpenLayers.Control.Navigation());
map.addControl(new OpenLayers.Control.Scale($('scale')));
    map.addControl( new OpenLayers.Control.LayerSwitcher() );
map.addControl(new OpenLayers.Control.MousePosition({element: $('location')}));
map.zoomToExtent(bounds);

        //---------------
        document.getElementById("check").onclick=function(){
        var count = 0;

        var inputs = document.getElementsByTagName('input');
        for (var j = 0; j < inputs.length; j++){
            if (inputs[j].type == 'checkbox')
            {
                count++;

            }
        }

        id=[];
        var doc;
        var i=0;

        //var params;
        var obj_id=" ";
        var or ="or";
        var fin_obj="";
        var filter="";
        var div = document.getElementById("list");
        elements = getElementsByClass('myclass', div);
        var b;
        for(b=0;b<elements.length;b++)
        {
            if(elements[b].checked)
            {id.push(elements[b].getAttribute('value'));
            }
        }
        /*while(++i <= count){
            doc=document.getElementById("check"+i)
            if(doc.checked)
            {checked.push(i);
            id.push(doc.getAttribute('value'));
            }

        }*/
        ch=id;
        for(var k=1;k<id.length;k++)
        {
        obj_id=" "+or+" id="+id[k];
        fin_obj=fin_obj+obj_id;
        }
        filter="id="+id[0]+fin_obj;

        layer.mergeNewParams({CQL_FILTER:filter});

        wms = new OpenLayers.Format.WMSCapabilities();
        OpenLayers.Request.GET({
            //url:"wmsURL&service=WMS&request=GetCapabilities",
            url:"http://localhost:8080/geoserver/wms/filedata?request=GetCapabilities",
            success: function(e){
                console.log(e);
                var response = wms.read(e.responseText);
                var capability = response.capability;
                for (var i=0, len=capability.layers.length; i<len; i+=1) { 
                    var layerObj = capability.layers[i];
                    if (layerObj.name === 'cite:filedata') {
                        extend=OpenLayers.Bounds.fromArray(layerObj.llbbox);
                        map.zoomToExtent(extend.transform(fromProjection,toProjection));
                        break; 
                    } 
                }
            }
        });
        position = new OpenLayers.Bounds(60.67,56.84,60.68,56.87).transform(fromProjection,toProjection);       
        }

    }
//принятие участков
    function accepting()
    {
        for(var k=0;k<ch.length;k++)
        {
              document.getElementById("check"+ch[k]).nextSibling.style.color='black';
        }
         $.post(
            "setStatus.jsp",
            {ids:ch.toString()}
         );
    }
    //удаление участков
    function deleting()
    {
         $.post(
            "deletePoly.jsp",
            {ids:ch.toString()},
           function(per){
          $("#WRAPlist").load("listing.jsp");
            }
          );

    }
    if(document.getElementsByClassName) {
        getElementsByClass = function(classList, node) {    
        return (node || document).getElementsByClassName(classList)
    }
    } else {
        getElementsByClass = function(classList, node) {            
        var node = node || document,
        list = node.getElementsByTagName('*'), 
        length = list.length,  
        classArray = classList.split(/\s+/), 
        classes = classArray.length, 
        result = [], i,j
        for(i = 0; i < length; i++) {
            for(j = 0; j < classes; j++) {
                if(list[i].className.search('\\b' + classArray[j] + '\\b') != -1) {
                    result.push(list[i])
                    break
                }
            }
        }
        return result
    }   
}

var er='${error}';
    if (er!="")
{
        alert("${error}");
    }
window.onload = createUploader;
function createUploader(){            
    var uploader = new qq.FileUploader({
        element: document.getElementById('file-uploader-demo1'),
        action: 'Upload_Servlet',
        debug: true,
        allowedExtensions:['jpg', 'jpeg', 'png', 'gif'],
        sizeLimit: 6000000, // max size   
        minSizeLimit: 11024, // min size
        onComplete: function(){
          populate();
        }
    });           
} 
</script>

</head>
<body onload="init()">
<div class="container">
<div class="content">
    <div class="ol"> <div id="map"></div> </div>
    </div>
</div>
<div class="info">
    <div class="list">
    <div class="listtitle">
    <div>
        <h2>Список участков</h2>
    </div>
    <div class="check">
        <input type="button" id="check" value="Отобразить">
    </div>
    <div class="acc">
        <input type="button" id="accept" onclick="accepting()" value="Принять">
    </div>
</div>
<div class="filelist" id="WRAPlist">
<%
Class.forName("org.postgresql.Driver");
Connection conn= null;
conn = DriverManager.getConnection("jdbc:postgresql://localhost:5432/postgis","postgres","123456");
Statement sta = null;
sta = conn.createStatement();
String fileName= "";
Integer fileId=null;
String fileStatus ="";

ResultSet r=sta.executeQuery("SELECT id, name, status FROM filestatus");
String acc="Принят                   ";
while(r.next())
{
    fileId=r.getInt("id");
    fileName=r.getString("name");
    fileStatus=r.getString("status");   
    if(fileStatus.equalsIgnoreCase(acc))
    {
        out.write("<input type='checkbox' class='myclass' id='check"+fileId+"' name='"+fileName+"' value='"+fileId+"'/><label for=check"+fileId+">"+fileName+"</label><br>");   
  }
    else
    {
        out.write("<input type='checkbox' class='myclass' id='check"+fileId+"' name='"+fileName+"' value='"+fileId+"'/><label for=check"+fileId+" style='color:blue'>"+fileName+"</label><br>");

    }
}
r.close();
sta.close();
conn.close();

%>
</div>
 </div>
 <div class="upload">
    <div class="upload_int">
    <h2>Загрузка файлов</h2>
  <form action="" method="post" enctype="multipart/form-data">
   <div id="up">
    <input id="fileUpload1" type="file" name="fileUpload1"value="Browse..."/>
   </div>
   <div>
    <button class="button" id="buttonUpload" onclick="return ajaxFileUpload();">Загрузить</button>
    <input type="button" id="del" onclick="deleting()" value="Удалить">
   </div>
   </form>
   </div>
 <div id="file-uploader-demo1">     
    <noscript>          
        <p>Please enable JavaScript to use file uploader.</p>
        <!-- or put a simple form for upload here -->
    </noscript>

</div>
 </div>
 </div>
 <div class="clearing">&nbsp;</div>
 </body>
 </html> 
```

我在这里弄错了还是只是要使用另一种方法来解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-28T08:44:20.580

Use this jquery plugin for upload [ajax upload](http://valums.com/ajax-upload/)

```
<script>        
        window.onload = createUploader;
        function createUploader(){            
            var uploader = new qq.FileUploader({
                element: document.getElementById('file-uploader'),
                action: 'Upload_Servlet',
                debug: true,
                allowedExtensions:['jpg', 'jpeg', 'png', 'gif'],
                sizeLimit: 6000000, // max size   
                minSizeLimit: 11024, // min size
                onComplete: function(){
                }
            });           
        }

    </script> 
```

It May not work on IE6 but its a great plugin.

# c# - 从应用程序安装文件静默安装 SQL Server

> ID：11240463
> 
> 赞同：0
> 
> 时间：2012-06-28T08:05:39.960
> 
> 标签：c#

作为安装我的应用程序（WPF 应用程序）的一部分，需要安装 SQL Server 以及先决条件。因此，当用户选择安装 SQL Server 的选项时，在应用程序安装过程中，需要使用安装程序提供的 configuration.ini 文件静默安装。

所以我所做的是通过代码准备一个名为“InstallSQL.bat”的批处理文件，该文件具有执行 SQL 服务器的命令。

现在当用户选择安装 SQL server 时，从安装代码中，批处理文件将被执行。代码如下

```
 int ExitCode;
        ProcessStartInfo ProcessInfo;
        Process process;            

        ProcessInfo = new ProcessStartInfo(batchFilePath);
        ProcessInfo.CreateNoWindow = true;
        ProcessInfo.UseShellExecute = false;

        ProcessInfo.WorkingDirectory = Path.GetDirectoryName(Assembly.GetExecutingAssembly().Location);
        // *** Redirect the output ***
        ProcessInfo.RedirectStandardError = true;
        ProcessInfo.RedirectStandardOutput = true;
        process = Process.Start(ProcessInfo);
        process.WaitForExit();
        MessageBox.Show("ExitCode: " + process.ExitCode); 
```

执行安装时，在安装 SQL Server 时，会提取 SQL Server 安装文件并打开一个控制台窗口，指示安装正在进行中。问题是，在此控制台窗口中经过一段时间后，会出现一条消息，指出“由于 stackoverflowexception 导致进程终止”。有人可以帮我提供静默安装 SQL Server 的替代方法（无需用户交互）。

谢谢尼西塔

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-28T08:10:45.217

好吧，Stackoverflow 异常总是一件坏事
（我猜在 Process.WaitForExit()

但无论哪种方式，我认为您根本不应该使用 process.WaitForExit() ：
而是抓住事件并提供用户反馈。

编辑：

对于无人值守的东西......你可以快速谷歌它！
[SQL Server 2008 R2 – 无人值守静默安装](http://www.codeproject.com/Articles/113480/SQL-Server-2008-R2-Unattended-Silent-Install)

作为问题的附加值，我建议为不同的情况（x32、x64、等）创建几个类似的 ini 配置

# javascript - Facebook JS SDK - 登录弹出窗口未关闭

> ID：11240464
> 
> 赞同：5
> 
> 时间：2012-06-28T08:05:40.407
> 
> 标签：javascript, facebook, facebook-graph-api, facebook-javascript-sdk

下面将登录事件绑定到一个 div。如果我点击它，我会得到预期的 js sdk 登录弹出窗口。但是，在使用我的凭据提交弹出窗口后，弹出窗口变为白色并且不会关闭。如果我刷新页面，我已登录，但它不会像您预期的那样自动刷新。有人有什么想法吗？

* * *

编辑：相同的代码（具有不同的应用程序 ID 和域凭据）在不同的服务器上工作。这让我相信我的问题可能与下面的代码无关。是否有任何应用程序或服务器配置可能导致登录弹出窗口无法关闭/更新？

* * *

```
<!DOCTYPE html>
<html class="no-js ie ie10plus" lang="en" xmlns:fb="http://www.facebook.com/2008/fbml">
    <head prefix="og: http://ogp.me/ns# fb: http://ogp.me/ns/fb# object: http://ogp.me/ns/object#">
        <script src="http://ajax.aspnetcdn.com/ajax/modernizr/modernizr-2.0.6-development-only.js"></script>
    </head>
    <body>
        <div id="fb-root"></div>
        <div id="fbLogin">Test login link</div>
        <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js" ></script> 
        <script>               
              var fbmm = {};

              window.fbAsyncInit = function() {
                FB.init({
                  appId      : '339910146083688', // App ID
                  cookie: true, 
                  xfbml: true,
                  status: true,
                  oauth: true
                });

                $(document).ready(function(){
                    $("#fbLogin").click(function(){
                        console.log('test');
                         FB.login(function(response) {
                           if (response.authResponse) {
                             console.log('Welcome!  Fetching your information.... ');
                             FB.api('/me', function(response) {
                               console.log('Good to see you, ' + response.name + '.');
                             });
                           } else {
                             console.log('User cancelled login or did not fully authorize.');
                           }
                         });
                    });
                });

              };

          (function(d){
             var js, id = 'facebook-jssdk', ref = d.getElementsByTagName('script')[0];
             if (d.getElementById(id)) {return;}
             js = d.createElement('script'); js.id = id; js.async = true;
             js.src = "//connect.facebook.net/en_US/all.js";
             ref.parentNode.insertBefore(js, ref);
           }(document));
        </script>
    </body>
</html> 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-04T09:28:16.453

在 80 或 443 以外的端口上进行测试时存在一些已知问题。尝试在这些（“正常”）HTTP(S) 端口之一上设置您的测试机器，看看问题是否仍然存在。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-04T19:30:48.353

我的猜测是，由于您没有提供频道 URL，因此出现了问题，如[文档中所述（在频道 URL 部分下）](http://developers.facebook.com/docs/reference/javascript)：

> 频道文件解决了某些浏览器中跨域通信的一些问题。
> ...
> channelUrl 参数是可选的，但建议使用。

即使您的问题未在频道文件解决的三个问题中列出，但我曾经遇到过与您相同的问题并通过添加频道解决了它，尽管这是前一阵子，所以我不是 100% 它是相同的。
那里解释了如何创建频道文件，您需要稍微更改一下您的javascript：

```
FB.init({
    appId: '339910146083688', // App ID
    cookie: true, 
    xfbml: true,
    status: true,
    oauth: true,
    channelUrl: YOUR_CHANNEL_URL
}); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-09-16T11:32:18.153

我接到了类似的电话，`FB.login()`要求通过更改来关闭对话框

```
onclick="loginviafb()"; 
```

到

```
onclick="loginviafb(); return false;" 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-04T20:43:56.533

您可以尝试使用应用设置中的身份验证对话框自定义选项自定义应用登录。在那里你可以配置你想要的权限，如果用户没有登录/授权你的应用程序，facebook 将自动重定向到 app-auth 页面。您必须首先从应用程序设置 > 身份验证对话框中启用它。请参阅下图中的单击此处注释。希望这可以帮助。 ![在此处输入图像描述](../Images/dd8a4f153b2bf43f2f04df9ff25cd933.png)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-09-29T12:23:56.850

当开发网站地址是`http://localhost`我在 windows 主机文件中定义了一个主机并且它工作正常时，我遇到了同样的问题。

# python - python套接字保持CLOSE_WAIT

> ID：11240466
> 
> 赞同：2
> 
> 时间：2012-06-28T08:05:42.917
> 
> 标签：python, sockets

我有一个监听套接字的应用程序。此应用程序由 nagios 监控。问题是，nagios 打开套接字并直接关闭它们。我的应用程序套接字停留在 CLOSE_WAIT 中。我不明白为什么会这样。它应该遇到错误并终止套接字。

```
 while request=="":
                    try:
                            request = self.client.recv ( 1024 ).rstrip()
                    except socket.timeout, msg:
                                    log.error( "no request")
                                    self.client.close()
                                    return
                    except socket.error, msg:
                                    print msg
                                    self.client.close()
                                    return
                    except msg:
                                    log.error(msg)
                                    self.client.close()
                                    return 
```

任何想法如何正确捕捉这个？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-28T08:25:08.723

`CLOSE_WAIT`state 意味着套接字应该被应用程序关闭。

在您发布的代码中，套接字仅在异常时关闭。确保在收到套接字时关闭套接字，即在剥离之前`EOF`检查。`not request`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-28T22:35:21.263

当远程端正常关闭连接时，标准 BSD`recv`调用返回零。在 Python 中，返回的值被转换为空字符串。在这两种情况下，它都不会被视为错误，因此您不应期待任何异常。

您的代码可以说：

```
request = self.client.recv(1024).rstrip()
if not request:
  print "Connection closed"
  self.client.close() 
```

您还可以在`finally`块之后关闭块中的连接`try-except`以避免代码重复。如果您希望服务器在发送数据后关闭连接，您可以表示如下：

```
request = ""
r = True
while r:
  r = self.client.recv(1024)
  request += r 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-06-30T17:52:25.897

你在使用`gevent-websockets`图书馆吗？

我们也遇到了这个问题，之前做了一个本地补丁`self.stream = None`，为我们解决了这个问题。

顺便说一句，调用`close()`套接字是不够的。来自 python 文档：（[https://docs.python.org/2/library/socket.html](https://docs.python.org/2/library/socket.html)）

> 注意 close() 释放与连接关联的资源，但不一定立即关闭连接。如果要及时关闭连接，请在 close() 之前调用 shutdown()。

```
$ diff /usr/lib/python2.7/dist-packages/geventwebsocket/websocket.py.orig /usr/lib/python2.7/dist-packages/geventwebsocket/websocket.py
3c3
< from socket import error
---
> from socket import error, SHUT_RDWR
372a373,379
> 
>             try:
>                 # if we don't close, leaks open files in a CLOSE_WAIT state
>                 self.stream.handler.socket.shutdown(SHUT_RDWR)
>                 self.stream.handler.socket.close()
>             except:
>                 pass 
```

请注意，该方法中有一条注释：

> 关闭 websocket 和连接，发送指定的代码和消息。底层的套接字对象*没有*关闭，那是发起者的责任。

所以这是否“正确”是有争议的，但 EOD 它为我们解决了它。

# php - joomla网站每一页的时间

> ID：11240475
> 
> 赞同：0
> 
> 时间：2012-06-28T08:06:33.310
> 
> 标签：php, joomla1.5

任何人都可以帮助存储用户在注销之前在 Joomla 的每个页面上花费的时间吗？

还有，我们如何存储用户登录 Joomla 后提交的表单？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-28T08:11:34.677

在任何新页面上，计算 $time1 = time() 在移动到任何新页面之前计算 $time2 = time() 从第二个中减去第一个时间并记录数据库中特定页面的秒数。！

# security - 欧洲集群可用于欧洲。它也用于云存储和 gmail？

> ID：11240481
> 
> 赞同：-1
> 
> 时间：2012-06-28T08:07:12.280
> 
> 标签：security, google-app-engine, data-protection

在 appengine sdk 的 1.7 版中，它指定欧洲集群可用。但是这个集群是否用于所有谷歌服务作为 Drive 或 gmail？这是欧洲法律关于隐私和数据保护的重要一点。

问候

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-28T14:27:43.330

本公告仅涉及 App Engine 应用程序存储的数据，不适用于 Drive 或 gmail 等其他 Google 服务。

更新（包括 Guido 的评论）：“我们在欧盟中静态存储的内容：数据存储、blobstore、日志。”

有关详细信息，请参阅[https://developers.google.com/appengine/docs/premier/location](https://developers.google.com/appengine/docs/premier/location)：

> """ 如果您的应用程序的用户离欧洲比离美国更近，那么将您的应用程序定位在欧盟特别有用。网络延迟更少，最终用户内容将静态存储在欧盟。"""

和

> """ 虽然您的应用程序将在您选择的位置的数据中心之外运行，但请注意 Google 可能会在美国或 Google 或其代理维护设施的任何其他国家/地区处理和存储应用程序和客户内容. """

# c++ - C++ 中的不确定行为是什么？它与未定义的行为有何不同？

> ID：11240484
> 
> 赞同：22
> 
> 时间：2012-06-28T08:07:17.267
> 
> 标签：c++, c

C++ 中**不确定**的行为和**未定义**的行为有什么区别？这种分类对 C 代码也有效吗？

* * *

## 回答 #1

> 赞同：38
> 
> 时间：2012-06-28T09:00:18.133

以下注释基于 C 标准[ISO-9899](http://www.iso-9899.info/wiki/The_Standard)而非 C++ 标准，但含义基本相同（参见 C 标准的第 3.4 和 4 节；另请参见 C++ 标准[ISO-14882](http://www.open-std.org/Jtc1/sc22/wg21/)的第 1.3 节; 后一个文件没有这样定义“未指定的值”，但后来确实使用了该短语，具有明显的含义）。官方标准文件不是免费的（事实上，它们很贵），但上面的链接是委员会页面，包括标准的免费“草稿”，您可以认为它基本上等同于最终的标准文本。

这些术语描述了一个模糊的阶梯。

于是，往下走……

大多数时候，标准定义了在特定情况下应该发生的事情：如果你写`c=a+b`and`a`和`b`are `int`，那么`c`就是它们的总和（以一些细节为模）。当然，这是标准的重点。

*实现定义的行为*是标准列出了在特定情况下允许发生的两件或多件事情；它没有规定首选哪一个，但*确实*要求实现（解析 C 的实际编译器）在备选方案之间做出选择，始终如一地做同样的事情，并且实现*必须记录它所做的选择*。例如，单个文件是否可以被多个进程打开是实现定义的。

*未指定的行为*是标准列出了几个替代方案的地方，因此每个替代方案都符合标准，但没有进一步说明。一个实现必须在特定情况下选择一个备选方案，但不必每次都做同样的事情，也不必在文档中承诺它将做出何种选择。例如，a 中的填充位`struct`是未指定的。

*未定义的行为*是最极端的情况。在这里，所有的赌注都没有了。如果编译器或它生成的程序遇到*未定义的行为*，它可以做任何事情：它可以扰乱内存、破坏堆栈、[HCF](https://en.wikipedia.org/wiki/Halt_and_Catch_Fire)，或者在标准的极端情况下，让恶魔飞出你的鼻子。但大多数情况下它只会崩溃。所有这些行为都符合标准。例如，如果一个变量在同一个作用域中被声明，或者如果你写`static int i;`了，效果是未定义的。`int i;``#include <'my file'.h>`

“价值”也有类似的定义。

未*指定的值*是有效值，但标准没有说明它是什么。因此，标准可能会说给定函数返回一个未指定的值。您可以存储该值并在需要时查看它，而不会导致错误，但这并不意味着什么，并且该函数下次可能会返回不同的值，具体取决于月相。

实现*定义的值*就像实现定义的行为。像*unspecified*一样，它是一个有效值，但实现的文档必须自己提交将返回的内容，并且每次都做同样的事情。

一个*不确定的值*，甚至比 unspecified 还要*unspecified*。它要么是未指定的值，要么是*陷阱表示*。陷阱表示是某种神奇值的标准表述，如果您尝试将其分配给任何东西，则会导致未定义的行为。这不一定是实际值；考虑它的最佳方式可能是“如果 C 有异常，则陷阱表示将是异常”。例如，如果你`int i;`在一个块中声明，没有初始化，变量的初始值`i`是*不确定的*，这意味着如果您在初始化之前尝试将其分配给其他东西，则行为是未定义的，编译器有权尝试上述恶魔般的技巧。当然，在大多数情况下，编译器会做一些不那么戏剧性/有趣的事情，比如将其初始化为 0 或其他一些随机有效值，但无论它做什么，你都无权反对。

所有这些不精确的重点是为编译器编写者提供最大的自由。这对编译器编写者来说很好（这也是让 C 编译器在如此广泛的平台上运行相当容易的原因之一），但它确实使事情变得更有趣，而不是让可怜的用户感到有趣。

**编辑1**：澄清不确定的值。

**编辑 2**：包含指向 C++ 标准的链接，并注意委员会草案基本上等同于最终标准，但免费。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-06-28T08:18:24.753

我认为标准提到了未定义的*行为*和不确定的*价值*。所以一个是关于行为的，另一个是关于价值观的。

这两者有些正交，例如，在存在不确定值的情况下仍然可以很好地定义行为。

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2012-07-06T20:09:17.520

**编辑 1：** C11 和 C++11 的最新草案可在此处在线获得：[C11 Draft N1570](http://www.open-std.org/jtc1/sc22/wg14/www/docs/n1570.pdf)和[C++11 Draft n3242](http://www.open-std.org/jtc1/sc22/wg21/docs/papers/2011/n3242.pdf)如果您没有最终标准的副本并且它们看起来很棒。（对文本外观的其他调整和一些措辞/语法编辑已经完成。）

**编辑2：**将所有出现的“行为”修复为“行为”以符合标准。

搜索 C++11 和 C11 标准，没有匹配到*indeterminate rule*或*undefined rule*。有诸如*不确定值*、*不确定序列*、*不确定未初始化*等术语。

如果在 Norman Gray 的回答中谈论陷阱和异常似乎很奇怪，请知道这些术语确实反映了**C11 标准****第 3 节**中的相关定义。

 **C++ 依赖于 C 的定义。许多关于*行为*类型的有用定义可以在 C11 的第 3 节（在 C11 中）中找到。例如，*不确定值*在 3.19.2 中定义。请注意，C11 的第 2 节（规范性参考）提供了其他术语解释的其他来源，第 4 节定义了由于*不符合标准而导致出现**未定义行为*等情况。

 *C11 的第 3.4 节定义了*行为*，3.4.1 定义了*实现定义的行为*，3.4.2 定义了*特定于语言环境的行为*，3.4.3 定义了*未定义的行为*，3.4.4 定义了*未指定的行为*。对于*值*（第 3.19 节），有*实现定义的值*、*不确定的值*和*未指定的值*。

松散地说，术语**不确定**是指一种*未指定/未知的状态*，它本身不会导致*未定义的行为*。例如，这个 C++ 代码涉及一个不确定的值：{ int x = x; }。（这实际上是 C++11 标准中的一个示例。）这里 x 首先被定义为整数，但此时它没有明确定义的值——然后它被初始化为任何值（不确定/未知）有它的价值！

众所周知的术语**未定义行为**在 C11 的 3.4.3 中定义，指的是

> 不可移植或错误的程序结构或错误数据，本国际标准对此没有要求

换句话说，*未定义的行为*是一些错误（在逻辑或状态中），接下来发生的任何事情都是未知的！因此可以制定一个**未定义的 [行为] 规则**，声明：在编写 C/C++ 代码时避免未定义的行为！:-)

一个**不确定的 [行为] 规则**是：避免编写不确定的代码*，除非*它是必要的*，并且*它不会影响程序的正确性或可移植性。因此，与未定义的行为不同，不确定的行为*并不一定*意味着代码/数据是错误的，但是，*它的后续使用可能是错误的，也可能不是错误*的——因此需要注意确保程序的正确性。

其他术语（如*不确定顺序*）在正文中（例如，C11 5.1.2.3 第 3 段；C++11，第 1.9 节第 13 段；即，在 [intro.execution] 中）。（您可能会猜到，它指的是未指定的操作步骤顺序。）

IMO 如果对所有这些细微差别感兴趣，则必须同时获得 C++11 和 C11 标准。这将允许人们探索定义等所需的所需详细程度。如果您没有此类链接，则此处提供的链接将帮助您使用最新发布的 C11 和 C++11 标准草案进行探索。***

# hadoop - 我应该永远使用 oozie 运行 MapReduce 任务吗？

> ID：11240487
> 
> 赞同：1
> 
> 时间：2012-06-28T08:07:37.050
> 
> 标签：hadoop, mapreduce, oozie

我有一个 mapReduce 任务（https://github.com/flopezluis/testing-hadoop），它读取文件夹中的文件并将它们附加到一个 zip 文件中。我需要永远运行这个任务，所以当它完成处理它们时，它应该再次运行。我正在阅读有关 oozie 的信息，但我不确定它是否最合适，因为它可能对我的问题来说太大了。

如果 oozie 是最好的解决方案。如果我写一个协调器每10分钟运行一次，如果任务超过10分钟，协调器等待再次运行任务会发生什么？

**任务说明**

文件夹始终相同。有不同的 zips 文件，一个用于密钥。这个想法是逐步创建 zip 文件。我认为这比在处理完所有文件后创建 zip 文件要快。这些文件包含如下内容：

```
<info operationId="key1">
 DATA1
</info>
<info operationId="key1">
DATA2
</info>
<info operationId="key2">
DATA3
</info> 
```

所以拉链会是这样的：

key1.zip --> 数据1，数据2

key3.zip --> 数据3

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-05T01:40:16.700

您可以为此使用 oozie。Oozie 有一个设置，可以告诉限制一次可以运行多少个作业实例。如果您的第一份工作在几分钟后没有完成，那么它将等待运行下一份工作。

来自 Oozie 文档：

6.1.6。协调器动作执行策略 协调器作业的动作执行策略可以在协调器应用程序中定义。• 超时：协调器作业可以指定其协调器操作的超时时间，即在放弃执行之前，协调器操作将处于等待或就绪状态的时间。• 并发性：协调器作业可以为其协调器操作指定并发性，即在协调器引擎开始限制它们之前允许多少个协调器操作同时运行（运行状态）。• 执行策略：当协调器引擎中有协调器动作的积压时，协调器作业可以指定其协调器动作的执行策略。不同的执行策略是“最旧的优先”、“最新的优先”和“ 只有最后一个'。由于延迟输入数据、并发控制或手动重新运行协调器作业，通常会发生积压。

[http://archive.cloudera.com/cdh/3/oozie-2.3.0-CDH3B4/CoordinatorFunctionalSpec.html#a6.1.6._Coordinator_Action_Execution_Policies](http://archive.cloudera.com/cdh/3/oozie-2.3.0-CDH3B4/CoordinatorFunctionalSpec.html#a6.1.6._Coordinator_Action_Execution_Policies)

还想评论一下，您可以使用 DataSet 触发数据到达的协调工作，但我对 DataSet 并不熟悉。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-26T18:02:15.933

如果您只需要在不同的输入文件上重复执行相同的 hadoop 作业，那么 Oozie 可能就有点过头了。在您的测试平台上安装和配置 Oozie 也需要一些时间。编写一个反复提交 hadoop 作业的脚本可能就足够了。

但无论如何，Oozie 可以做到这一点。如果将并发设置为 1，则运行状态下最多有 1 个 oozie 协调器操作（在您的情况下应该是一个只包含一个 hadoop 作业的工作流）。但是您可以增加并发阈值以允许同时执行更多操作。

# c# - 绘制矩形时点给我错误

> ID：11240488
> 
> 赞同：0
> 
> 时间：2012-06-28T08:07:42.683
> 
> 标签：c#

```
private Point hLocation; 
```

我坚持这一点。请帮忙。

> 错误 2 找不到类型或命名空间名称“Point”（您是否缺少 using 指令或程序集引用？）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-28T08:10:13.843

您没有阅读异常消息吗？这似乎很不言自明：

> 您是否缺少 using 指令或程序集引用？

该[`Point`](http://msdn.microsoft.com/en-us/library/system.drawing.point.aspx)结构在命名空间`System.Drawing`内的程序集中声明`System.Drawing`。因此，请确保您已在项目中引用了此程序集，并且您已使用`using`指令将命名空间纳入范围：

```
using System.Drawing; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-28T08:10:36.407

您必须使用命名空间声明变量：

```
 private System.Drawing.Point hLocation; 
```

或者您必须在类声明上方包含命名空间：

```
 using System.Drawing; 
```

第二种方法更好，因为您可能会在课堂上多次使用 Point 类型。必须一遍又一遍地将其引用为 System.Drawing.Point 将是多余的。

# c# - 使用动态浏览从网页获取数据

> ID：11240492
> 
> 赞同：0
> 
> 时间：2012-06-28T08:07:47.047
> 
> 标签：c#

我想动态浏览其他网页，单击链接，转到下一页从该页面获取一些数据并返回上一页。我正在使用 c# 控制台应用程序。你能帮我找到关于这个的解决方案吗？

我能够使用 HttpWebRequest 作为流阅读器中的文本获取网页数据，但无法转到下一页或单击链接。该网页是动态的，类似于出租广告的房地产网站。做同样的任何其他更好的想法。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-28T08:20:23.643

您可以使用浏览器自动化库，例如 Watin (http://watin.org/)

# java - Java中的OOP - 创建对象

> ID：11240493
> 
> 赞同：0
> 
> 时间：2012-06-28T08:07:52.340
> 
> 标签：java, oop, object

好的，伙计们，到目前为止（因为我是初学者）我是基于过程编程的 Java 编程，这很好，但现在是时候像老板一样使用 Java。

我现在正在学习 OOP 概念，同时编写一些代码作为练习。我不明白的是，如果我以这种方式创建一些对象：

```
 Contact first = new Contact(25, "Yosi", "Male");
    System.out.println("Age of contact " + first.toString() + " is - "
            + first.getAge() + " " + first.getName());

    Contact second = new Contact(22, "lisa", "Femal");
    System.out.println("Age of contact " + second.toString() + " is - "
            + second.getAge() + " " + second.getName());

    Contact third = new Contact(34, "Adam", "Male");
    System.out.println("Age of contact " + third.toString() + " is - "
            + third.getAge() + " " + third.getName()); 
```

结果将是：

```
Age of contact Contact@173f7175 is - 25 Yosi
Age of contact Contact@4631c43f is - 22 lisa
Age of contact Contact@6d4b2819 is - 34 Adam 
```

但是，如果我再次尝试打印第一个联系人，它将获得最后一个创建的对象的值。我的意思是，对于这段代码：

```
 Contact first = new Contact(25, "Yosi", "Male");
    System.out.println("Age of contact " + first.toString() + " is - "
            + first.getAge() + " " + first.getName());

    Contact second = new Contact(22, "lisa", "Femal");
    System.out.println("Age of contact " + second.toString() + " is - "
            + second.getAge() + " " + second.getName());

    Contact third = new Contact(34, "Adam", "Male");
    System.out.println("Age of contact " + third.toString() + " is - "
            + third.getAge() + " " + third.getName());

    System.out.println("Age of contact " + first.toString() + " is - "
            + first.getAge() + " " + first.getName()); 
```

结果将是：

```
Age of contact Contact@173f7175 is - 25 Yosi
Age of contact Contact@4631c43f is - 22 lisa
Age of contact Contact@6d4b2819 is - 34 Adam
Age of contact Contact@173f7175 is - 34 Adam 
```

我已经添加了对象字符串表示，因此您可以看到不同的对象。我以为我正在创建一个新对象，每个对象都有自己的实例值？你们能给我解释一下吗？

这是联系人类：

```
public class Contact {

    private static int age = 0;
    private static String name = "Unknown";
    private static String gender = "Male";

    public Contact(int a, String n, String g) {
        age = a;
        name = n;
        gender = g;

    }

    public Contact() {
    }

    public static int getAge() {

        return age;
    }

    public static String getName() {

        return name;
    }

    public static String getGender() {

        return gender;
    }

    public static void setAge(int a) {

        age = a;

    }

    public static void setName(String n) {

        name = n;
    }

    public static void setGender(String g) {

        gender = g;
    }

} 
```

请注意，如果我删除静态限定符，我会收到错误消息“无法对非静态字段进行静态引用”

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-06-28T08:10:40.887

`static`从您的实例变量和/或方法（age、getAge、name、getName）中删除限定符。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-28T08:13:11.367

如果您错误地使用了静态变量，就会发生这种情况：

```
class Stat {
  static String name;

  Stat(String n) {
    name = n;
  }
} 
```

在上面的示例类中，所有实例将共享相同的`name`.

对实例成员使用非静态变量：

```
class Stat {
  String name;

  Stat(String n) {
    name = n;
  }
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-28T08:34:53.450

**好吧，Yosi.Static 限定符将您的字段（和方法）绑定到您的类而不是您的对象**，并且您的类（联系人）的每个对象共享相同的值。

每当您通过**New**实例化它时，此值都会更新。因此，当您第四次打印时，它的值就是您第三次更新它的值。那就是它的打印方式。

**当我看到你的代码时，如果你从任何地方删除静态，你的代码就会如你所愿。**

# android - TItanium Android Scrollview 不可滚动

> ID：11240496
> 
> 赞同：0
> 
> 时间：2012-06-28T08:08:13.417
> 
> 标签：android, titanium, scrollview

我有一个滚动视图问题，它对我不起作用。即使我已经读到滚动视图内容宽度和高度“自动”有一个错误并且我已经将它缩放到一个很大的值，它不会向下滚动我的内容。以下是我目前的代码。

```
var scrollView = Titanium.UI.createScrollView({
    contentWidth:'300',
    contentHeight:'2000',
    top:0,
    showVerticalScrollIndicator:true,
    showHorizontalScrollIndicator:true
});
var view = Ti.UI.createView({
    backgroundColor:'#336699',
    borderRadius:10,
    width:300,
    height:2000,
    top:10
});
scrollView.add(view);

var timePickerWin = Ti.UI.createWindow({
            navBarHidden : true,
            backgroundColor : '#fff'
        });

var label = Ti.UI.createLabel({ 
   text:'Pick Up Detail Form', 
   font: {fontFamily: 'Verdana', fontSize:30}, 
   color: '#000',
   top : '15dp'
});

var label2 =Ti.UI.createLabel({
    text:'Enter Your Pickup Details Below',
    font: {fontFamily: 'Verdana', fontSize:12}, 
    color: '#000',
    top : '50dp'
})

var startTime = Ti.UI.createPicker({
        top : '335dp',
        left : '25dp',
        useSpinner : false,
        selectionIndicator : true,
        type : Ti.UI.PICKER_TYPE_TIME,
        format24 : false,
        height : '130dp',
        //  width:'auto'

    });

 var startDate = Ti.UI.createPicker({
            top : '200dp',
            left : '25dp',
            useSpinner : false,
            selectionIndicator : true,
            type : Ti.UI.PICKER_TYPE_DATE,
            format24 : false,
            height : '130dp'
        });

var nextButton = Ti.UI.createButton({
            width : '150dp',
            height : '45dp',
            top : '465dp',            
            title : 'Next',
            backgroundColor : '#294079',
            font : {
                fontSize : '18dp',
                fontWeight : 'bold'
            },
            color : '#fff'
        });

nextButton.addEventListener('click', function() {
        timePickerWin.hide();
    });

startTime.addEventListener('change', function(e) {
        //alert("User selected date: " + e.value);
        startPickerValue = e.value;
    });

    startDate.addEventListener('change', function(e) {
        //alert("User selected date: " + e.value);
        endPickerValue = e.value
    });

var fullNameTextBox = Ti.UI.createTextField({
        borderStyle : Titanium.UI.INPUT_BORDERSTYLE_ROUNDED,
        width : '275dp',
        height : '45dp',
        //value : '',
        top : '75dp',
        color : '#000000',
        hintText : 'Enter full name'
        //  backGroundColor:'gray',

    });

    var addressTextBox= Ti.UI.createTextField({
        borderStyle : Titanium.UI.INPUT_BORDERSTYLE_ROUNDED,
        width : '275dp',
        height : '45dp',
        //value : '',
        top : '117dp',
        color : '#000000',
        hintText : 'Enter Address'

    });

        var MobileNo = Ti.UI.createTextField({
        borderStyle : Titanium.UI.INPUT_BORDERSTYLE_ROUNDED,
        width : '275dp',
        height : '45dp',
        //value : '',
        top : '155dp',
        color : '#000000',
        hintText : 'Enter Mobile No.'
        //  backGroundColor:'gray',

    });

timePickerWin.add(scrollView);
timePickerWin.add(label);
timePickerWin.add(label2);
timePickerWin.add(MobileNo);
timePickerWin.add(startTime);
timePickerWin.add(startDate);
timePickerWin.add(addressTextBox);
timePickerWin.add(fullNameTextBox);
timePickerWin.add(nextButton); 

timePickerWin.open() 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-28T12:15:26.353

您需要将滚动视图的所有内容添加到滚动视图中。

更改这些行：

```
timePickerWin.add(scrollView);
scrollView.add(label);
scrollView.add(label2);
scrollView.add(MobileNo);
scrollView.add(startTime);
scrollView.add(startDate);
scrollView.add(addressTextBox);
scrollView.add(fullNameTextBox);
scrollView.add(nextButton); 
```

希望这对你有用。

# android - 实现屏幕来回切换的最佳方法

> ID：11240501
> 
> 赞同：0
> 
> 时间：2012-06-28T08:08:45.487
> 
> 标签：android, android-intent, android-activity, android-widget

我有一个列表 - 在此列表中是联系人，每个（单击时）都会有一个屏幕，以便用户可以与该联系人聊天。

当用户离开该屏幕返回列表（并且可能单击另一个联系人屏幕）但随后返回第一个聊天屏幕时，我希望用户看到与以前相同的内容（消息）。

实现这一点的方法是什么？我似乎找不到明确的答案。

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-28T08:11:54.537

尝试使用显示您的聊天消息的活动，以及显示联系人的另一个活动，通过使用此模型，您也可以保留该活动的旧内容。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-28T08:18:31.743

您可以将聊天消息存储在 SQLite 数据库中，并在打开 Activity 时加载它们。

# c++ - 将 char 向量转换为 int

> ID：11240502
> 
> 赞同：1
> 
> 时间：2012-06-28T08:08:45.690
> 
> 标签：c++, vector, char

我需要将 s 的一部分转换为`vector`s 。 如果我有`char``int`

```
std::vector<char> // which contains something like asdf1234dsdsd 
```

我想从第 4 到第 7 个位置获取字符并将其转换为 int。
位置总是已知的。

我如何以最快的方式做到这一点？

我尝试使用全局副本并得到一个奇怪的答案。我得到了 48 而不是 2。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-28T08:43:09.410

This is fairly flexible, although it doesn't check for overflow or anything fancy like that:

```
#include <algorithm>

int base10_digits(int a, char b) {
    return 10 * a + (b - '0');
}

int result = std::accumulate(myvec.begin()+4, myvec.begin()+8, 0, base10_digits); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-28T08:22:00.507

如果位置是已知的，你可以这样做

```
int x = (c[4] - '0') * 1000 + (c[5] - '0') * 100 + (c[6] - '0') * 10 + c[7] - '0'; 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-28T08:16:12.273

复制不起作用的原因可能是因为字节序，假设第一个`char`是最重要的：

```
int x = (int(c[4]) << 24) + (int(c[5]) << 16) + (int(c[6]) << 8) + c[7] 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-28T08:11:37.923

1.获取开始和结束（结束后一个）索引的地址。

2.从中构造一个std::string。

3.将其输入到 std::istringstream。

4.从字符串流中提取整数到一个变量中。

（这可能是个坏主意！）

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-28T16:37:20.323

尝试这个：

```
#include <iostream>
#include <vector>
#include <math.h>

using namespace std;

int vtoi(vector<char> vec, int beg, int end) // vector to int
{
  int ret = 0;
  int mult = pow(10 , (end-beg));

  for(int i = beg; i <= end; i++) {
    ret += (vec[i] - '0') * mult;
    mult /= 10;
  }
  return ret;
}

#define pb push_back

int main() {
  vector<char> vec;
  vec.pb('1');
  vec.pb('0');
  vec.pb('3');
  vec.pb('4');

  cout << vtoi(vec, 0, 3) << "\n";

  return 0;
} 
```

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2017-03-30T09:16:09.420

```
long res = 0;

for(int i=0; i<vec.size(); i++)
{
     res += vec[i] * pow (2, 8*(vec.size() - i - 1)); // 8 means number of bits in byte
} 
```

# java - 在服务器上运行 Shell 脚本

> ID：11240504
> 
> 赞同：1
> 
> 时间：2012-06-28T08:08:57.440
> 
> 标签：java, web-services, servlets, servlet-3.0

我有一个在 Ubuntu 中运行 Shell 脚本（带参数）的独立应用程序。

```
ProcessBuilder pb1 = new ProcessBuilder("sh","deltapackage_app.sh","part_value","pathtofile"); 
Process process1 = pb1.start(); 
```

我正在通过 GUI 获取参数。现在我想在 Web 应用程序中实现同样的事情，我可以从网页中获取输入并将其发送到服务器，然后服务器将执行带有参数的 shell 脚本。

任何人都可以建议我这样做的最佳方法。我应该用什么东西来做到这一点。

我知道我必须学习很多关于服务器的东西。或者我可以将相同的代码与基于浏览器的应用程序一起使用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-28T08:14:31.243

> 考虑以下代码行：
> 
> ```
> Process p = Runtime.getRuntime().exec("/bin/sh -c /bin/ls > ls.out"); 
> ```
> 
> 这是为了执行 Bourne shell 并让 shell 执行 ls 命令，将 ls 的输出重定向到文件 ls.out。使用 /bin/sh 的原因是为了解决标准输出被 Java 内部重定向的问题。不幸的是，如果你尝试这个，什么都不会发生。当这个命令字符串被传递给 exec() 方法时，它将被分解成一个字符串数组，其中的元素是“/bin/sh”、“-c”、“/bin/ls”、“>”和“ ls.out”。这将失败，因为 sh 只希望“-c”开关有一个参数。为了使这项工作尝试：

```
 String[] cmd = {"/bin/sh", "-c", "/bin/ls > out.dat"};
    Process p = Runtime.getRuntime().exec(cmd); 
```

> 由于命令行已经是一系列字符串，字符串将简单地通过 exec() 方法加载到命令数组中，并按原样传递给新进程。因此，shell 将看到一个“-c”和命令“/bin/ls > ls.out”并正确执行。

[http://www.ensta-paristech.fr/~diam/java/online/io/javazine.html](http://www.ensta-paristech.fr/~diam/java/online/io/javazine.html)

# c++ - 在 MFC 中使用 DrawTextEx 自动换行

> ID：11240509
> 
> 赞同：1
> 
> 时间：2012-06-28T08:09:13.173
> 
> 标签：c++, visual-c++, mfc

我需要在矩形内绘制文本。但是当文本很长时，它会剪掉多余的文本。我需要换行文本，以便不适合第一行的文本的额外部分应该转到下一行。

我已经谷歌了，有人建议使用带有 DT_CALCRECT 标志的 DrawTextEx() 而不是 DrawText()。但它仍然不起作用，当我使用这个标志时，我没有得到文本。

```
DRAWTEXTPARAMS lpDTParams;
lpDTParams.cbSize        = sizeof(lpDTParams);
lpDTParams.iLeftMargin   = 1;
lpDTParams.iRightMargin  = 1;
lpDTParams.iTabLength    = 4;
lpDTParams.uiLengthDrawn = 0;

pDC->DrawTextExA(sTemp, rc, DT_NOCLIP|DT_CENTER|DT_WORDBREAK|DT_CALCRECT, &lpDTParams); 
```

任何建议将不胜感激。谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-28T18:25:12.703

您不需要计算矩形。

使用以下标志：DT_LEFT | DT_EDITCONTROL | DT_WORDBREAK。

一条忠告：

不要使用 UNICODE 或 ANSI 特定的函数名称。

根据您的项目设置，编译器将选择正确的版本。这样你的应用程序是可移植的。

# gnuplot - gnuplot：如何抑制 3D 图中的零值？

> ID：11240511
> 
> 赞同：0
> 
> 时间：2012-06-28T08:09:19.627
> 
> 标签：gnuplot

是否有可能，gnuplot 不绘制 z 值为零的区域？

如果我有一个像这样的网格：

```
0  0  24 25
0  23 24 25
23 23 24 0
24 24 0  0 
```

我只想看到“车道”，但现在 gnuplot 尝试绘制一些（意思是？）值，零在哪里。作为一个文件，我正在获取一些测量值。我的情节配置文件：

```
set grid lt 2 lw 1
set surface
set parametric
set xtics
set ytics
set style data lines
set dgrid3d 80,80,3
splot file 
```

此网格的数据文件将是：

```
1 3 24
1 4 25
2 2 23 
2 3 24
2 4 25
3 1 23
3 2 23
3 3 24
4 1 24
4 2 24 
```

因此，数据文件中没有零。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-28T12:46:31.710

我很难准确理解您想要做什么，但希望以下内容会有所帮助。

假设我们有一个数据文件 ( `test.dat`)：

```
NaN NaN NaN NaN NaN NaN NaN 100 200
NaN NaN NaN NaN NaN NaN 100 200 100
NaN NaN NaN NaN NaN 100 200 100 NaN
NaN NaN NaN NaN 100 200 100 NaN NaN
NaN NaN NaN 100 200 100 NaN NaN NaN
NaN NaN 100 200 100 NaN NaN NaN NaN
NaN 100 200 100 NaN NaN NaN NaN NaN
100 200 100 NaN NaN NaN NaN NaN NaN
200 100 NaN NaN NaN NaN NaN NaN NaN 
```

我们可以使用以下方法绘制此数据文件：

```
set datafile missing 'NaN'
set style data lines
splot 'test.dat' matrix  #matrix allows our datafile to look like your first data grid 
```

如果我正确理解你想要什么，如果不将你的数据放入“网格”格式（使用矩阵或使用“扫描分隔符”（见下文）），你就无法完成它。 `dgrid3d`在这里不起作用，因为它不知道如何将数据片段指定为缺失。如果您不想使用`matrix`格式，可以执行以下操作：

```
#Note the blank spaces!
#Each block doesn't have to have the same number of lines
#but the resulting plot looks nicest if it does.
#for lines that you want to make blank, use some character to
#mark that data as missing.  (I used 'NaN' above, but you can
#use anything you want.  sometimes I use '?' too).
x1 y1 num
x1 y2 num
x1 y3 num
...

x2 y1 num
x2 y2 num
x2 y3 num
...               

...

xN y1 num
xN y2 num
xN y3 num
... 
```

作为一个具体的例子：对于您的网格：

```
1 1 ?
1 2 ?
1 3 24
1 4 25

2 1 ?
2 2 23 
2 3 24
2 4 25

3 1 23
3 2 23
3 3 24
3 4 ?

4 1 24
4 2 24 
4 3 ?
4 4 ? 
```

接着：

```
set datafile missing '?'
set style data lines
splot 'my_data.txt'  #Not matrix this time. 
```

当然，使用此分辨率的数据，绘图可能仍然不像您想要的那样，但希望这能证明这一点。

**编辑**

如果您可以将数据文件转换为您在帖子顶部显示的格式，那么您有一些（额外的）选项（不会弄乱零）：

```
set datafile missing '0'  #This just has the effect of removing the 0 values from the plot
splot 'myfile.txt' matrix 
```

或者：

```
set zrange [0.5:]   #This also removes the 0 values, but alters the z-range.
splot 'myfile.txt' matrix 
```

# java - 在java中解析XML属性

> ID：11240521
> 
> 赞同：2
> 
> 时间：2012-06-28T08:10:27.050
> 
> 标签：java, xml, dom, xml-parsing

我有一个类似的 xml

```
<Applications>
  <ApplicationID>
    <VendorId value="0" />
    <AuthApplId value="4" />
    <AcctApplId value="0" />
  </ApplicationID>
  <ApplicationID>
    <VendorId value="193" />
    <AuthApplId value="0" />
    <AcctApplId value="19302" />
  </ApplicationID>
</Applications> 
```

我想解析它并将其存储到 VendorId、AuthApplId 等字符串。如果是，我得到了 ApplicationID 解析，`getElementsByTagName("ApplicationID")`然后`<ApplicationID value="somevalue"/>`我可以使用`getAttribute("value")`方法。但是在上述情况下我该怎么办？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-28T08:19:41.283

```
NodeList applicationIDNodes = getElementsByTagName("ApplicationID");
for (int i = 0; i < applicationIDNodes.length; i++) {
   Node applicationIDNode = applciationIdNodes.getItem(i);
   NodeList applicationIdChildren = applicationIdNode.getChildren();

   String vendorId = applicationIdChildren.getItem(0).getAttribute("value").value();
   String authAppliId = applicationIdChildren.getItem(1).getAttribute("value").value();
   String actApplID = applicationIdChildren.getItem(2).getAttribute("value").value();

   // do whathever you want with vendorId, authAppliId, actApplID       
} 
```

# objective-c - 避免在目标 C 中声明指向 BOOL 类型的指针是一种好习惯吗？

> ID：11240522
> 
> 赞同：0
> 
> 时间：2012-06-28T08:10:27.857
> 
> 标签：objective-c

我在stackoverflow中阅读了这个[问题。](https://stackoverflow.com/questions/5364506/how-to-assign-a-value-to-a-bool-pointer-in-objective-c)

bbum提供的摘录答案如下：

> 问题不在于赋值，更有可能您将实例变量声明为 BOOL *initialBroadcast;。
> 
> 没有理由将实例变量声明为指针（至少除非您确实需要 BOOL 的 C 数组）.. 从声明中删除 *。

1.即使我不必维护 BOOL 数组，使用指针变量有什么问题吗？

2.我认为即使避免它们是一种好的做法，它也不是特定于objective-C，而是适用于所有有指针的编程语言。

请回答我的问题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-28T09:14:40.130

> 1.即使我不必维护 BOOL 数组，使用指针变量有什么问题吗？

这样做并不违法，但这是不好的做法。使用指针变量需要您管理该内存（分配和释放它），因此可能会出现各种错误。如果您忘记分配内存，或者不小心修改了指针，您的程序可能会崩溃，或者您可能会覆盖内存的其他部分。如果您忘记释放内存，则会发生内存泄漏。如果您只使用普通的 BOOL，这些事情都不会发生。此外，在这里使用指针没有任何好处；你做了一堆额外的工作，却一无所获。

> 2.我认为即使避免它们是一种好的做法，它也不是特定于objective-C，而是适用于所有有指针的编程语言。

我不知道“所有[有]指针的编程语言”，但我肯定会说，在任何基于 C 的语言（C、C++、Objective-C）中，当一个普通的类型时使用指向内在类型的指针是不好的做法该类型的变量会做。如果您可以避免进行内存管理，请这样做。

[顺便](https://stackoverflow.com/users/25646/bbum)说一句，听 bbum 所说的一切是一个*好*习惯。严重地。

# vb.net - mdi 形式的建议窗口

> ID：11240523
> 
> 赞同：1
> 
> 时间：2012-06-28T08:10:30.047
> 
> 标签：vb.net, winforms, mdi

我有一个问题如下所述......我有一个具有不同子表单的 MDI 表单。如果我打开表格然后如果数据库中不存在相关数据，建议横幅应出现在表格顶部以首先输入相关数据。即使，如果我关闭子表单，建议横幅应该保持打开状态，并且在该横幅上的 Onclick 转到特定表单以添加记录。应该有不同形式的不同旗帜。所以请帮我实现这个场景。提前致谢。

我想使用哪个控件作为横幅。所以在挣扎之后，我将面板最好作为横幅。设置面板属性 -> AccessibleRole = Alert。所以我很容易实现场景。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-28T11:19:07.660

不要打开子表单，而是先打开横幅表单（打开子表单）。

然后检查横幅表单是否已输入数据。如果有：- 关闭横幅表单。

# xcode4.3 - 如何使用断点跟踪变量的值

> ID：11240525
> 
> 赞同：0
> 
> 时间：2012-06-28T08:10:34.570
> 
> 标签：xcode4.3

使用新的 Xcode 调试器可能很明显，但是，我看不到实际值：

```
int i=0; //i put a breakpoint on this line
i=1;
i=2; 
```

当应用程序在第一行停止时，我将鼠标光标放在 上，`i`并且某些东西应该为我提供正确的值，即`0`，但事实并非如此。我还尝试在控制台上打印值：

```
print i 
```

但我得到了这个：

```
(int) $1 = <unsufficient data for value (only 0 of 4 bytes available)> 
```

虽然我确定 po 不适合原语，但我也尝试过：

```
po i 
```

上述方式对我没有任何帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-11T14:13:47.140

我只是有同样的问题。这为我修复了它：

转到“编辑方案”，然后是“运行”，然后是“信息”，然后是“构建配置”并**选择“调试”**而不是“发布”。

@Apple：顺便说一句，它应该被称为“不足”:-)

# java - 为什么 Spring Framework jpetstore 示例有几个依赖问题？

> ID：11240531
> 
> 赞同：3
> 
> 时间：2012-06-28T08:10:46.563
> 
> 标签：java, spring, maven

我正在探索 Spring Framework 示例。我已经从[这里](https://src.springframework.org/svn/spring-samples/)检查了它们。

然而，当我在 NetBeans 中打开 jpetstore 示例时，它提到了几个缺失或未解决的 maven 依赖项：

```
import org.springframework.dao.DataAccessException;
import org.springframework.beans.support.PagedListHolder;
import org.springframework.transaction.annotation.Transactional;
import org.springframework.aop.AfterReturningAdvice;
import org.springframework.beans.factory.InitializingBean;
import org.springframework.mail.MailException;
import org.springframework.mail.MailSender;
import org.springframework.mail.SimpleMailMessage;
import org.springframework.remoting.jaxrpc.ServletEndpointSupport;
import org.springframework.beans.factory.ListableBeanFactory;
... 
```

当我让 NetBeans 找到它们时，它找不到它们。是什么导致了这个问题以及如何解决它？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-28T08:25:20.227

如我所见，这个 PetStore 示例项目依赖于一些现在不可用的 Spring 工件的 SNAPSHOT 版本。Spring 3.0.0 已经发布，所以将`<spring.version>3.0.0.BUILD-SNAPSHOT</spring.version>`属性更改为`<spring.version>3.0.0.RELEASE</spring.version>`并且应该可以。我没有 NetBeans 来检查这一点，但至少`mvn clean package`现在可以使用控制台构建。

# android - 单击“发送”时，三星 Galaxy S2 库存应用程序触发的意图是什么？

> ID：11240552
> 
> 赞同：0
> 
> 时间：2012-06-28T08:12:22.570
> 
> 标签：android, android-intent

我目前有以下问题：

我想用我的应用程序接收从其他应用程序发送的图像。所以我注册了以下意图过滤器：

```
<intent-filter>
    <action android:name="android.intent.action.SEND" />

    <category android:name="android.intent.category.DEFAULT" />

    <data android:mimeType="image/*" />
</intent-filter>
<intent-filter>
    <action android:name="android.intent.action.SEND_MULTIPLE" />

    <category android:name="android.intent.category.DEFAULT" />

    <data android:mimeType="image/*" />
</intent-filter> 
```

它适用于我的图库应用程序（CM9）和我通过 Play 商店（Quick Pic 等）安装的一堆第三方图库应用程序。

但随后客户抱怨说，当单击“发送”按钮时，他的图库应用程序（股票 Galaxy S2）没有在列表中显示我的应用程序。有趣的旁注：还有一个“Send via”按钮，可以正常显示应用程序（因此似乎是 SEND_MULTIPLE 意图）。

“发送”按钮显示以下应用程序：

*   蓝牙
*   电子邮件
*   谷歌邮件
*   消息传递
*   Wi-Fi 直连

就是这样。

所以我的问题是：这可能是我必须注册的哪个意图？除了 SEND 和 SEND_MUTLIPLE 之外，找不到任何发送文件/多个文件的意图 :(

有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-15T08:43:57.633

在 Galaxy S2 上，如果用户按下菜单，则会出现 ShareIntent。屏幕上的“共享到”菜单由三星硬编码，您无法覆盖它。

# php - Memcache 有趣的错误 - a:0:{}

> ID：11240555
> 
> 赞同：0
> 
> 时间：2012-06-28T08:12:44.100
> 
> 标签：php, memcached, libmemcache

代码很简单

```
$mem = $this->memcache->get("memche_".$_SESSION['userid']."_page_".$page);

if(empty($mem)){
// to make another query and save the data to memcache
}
else {
// to get it from memcache
} 
```

但是现在没有数据，但是如果我 print_r($mem); 缓存不为空 我明白了

```
a:0:{} 
```

这通过了 if 语句`if(empty())`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-28T08:23:43.050

这不是错误，您在 memcache 中存储了一个空数组。您的数组为空，而不是引用该数组的变量。

```
var_dump(unserialize('a:0:{}'));
array(0) {
} 
```

您应该检查 $mem 是否为假（$mem===FALSE），而不是检查它是否为空。如果缓存键不存在，则 Memcache 返回 FALSE。

# c# - c# 应用程序保存文件，即使我已经完成了它的工作

> ID：11240560
> 
> 赞同：2
> 
> 时间：2012-06-28T08:12:59.843
> 
> 标签：c#, .net, ado.net, connection, dbf

我有一个 ado.net 代码清单：

```
OleDbConnection oconn = new OleDbConnection();
                //   oconn.ConnectionString ="Driver={Microsoft Visual FoxPro Driver};Provider=vfpoledb.1;SourceType=DBF;SourceDB=" + pelna_sciezka + ";Exclusive=No; Collate=Machine;NULL=NO;DELETED=NO;BACKGROUNDFETCH=NO;";
                oconn.ConnectionString = "Provider=vfpoledb.1;Data Source=" + pelna_sciezka + ";Collating Sequence=machine";
                oconn.Open();
                OleDbCommand ocmd = oconn.CreateCommand();
                string na = TBNazwaKonta.Text.Replace("\n","");
                na = na.Replace("\r","") ;
                string ks2 = ks.Replace("\n","");
                ks2 = ks2.Replace("\r", "");
                 OleDbCommand dbCmdNull = oconn.CreateCommand();
                dbCmdNull.CommandText = "SET NULL OFF";
                dbCmdNull.ExecuteNonQuery();                
                string zapytanie = @"insert into " + @pelna_sciezka + @" (rk, Na,Ks) values (0,'" + na + "','" + ks2 +"')";
                ocmd.CommandText = zapytanie;
                ocmd.ExecuteNonQuery();
                oconn.Close(); 
```

它运行良好，没有任何问题。但是我使用的 dbf 文件正在被另一个程序使用。为什么如果我执行查询并关闭连接，dbf 文件仍由程序保存？如果有人想打开它，错误消息是“文件访问被拒绝”。只有当我关闭应用程序时，另一个才能访问

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-28T08:17:46.533

您没有关闭 OleDbCommands。与实际上是可选的 SqlCommands 不同，这*确实*对 OleDb 产生了影响。

我建议使用`using`关键字；这确保了所有资源在块结束时自动释放。作为额外的奖励，它确保在发生异常时也会释放资源，因此`Close`永远不会到达您的手动命令。

```
using (OleDbConnection oconn = new OleDbConnection()) {
    oconn.ConnectionString = "Provider=vfpoledb.1;Data Source=" + pelna_sciezka + ";Collating Sequence=machine"; 
    oconn.Open(); 

    using (OleDbCommand ocmd = oconn.CreateCommand()) {
        string na = TBNazwaKonta.Text.Replace("\n",""); 
        na = na.Replace("\r","") ; 
        string ks2 = ks.Replace("\n",""); 
        ks2 = ks2.Replace("\r", ""); 

        using (OleDbCommand dbCmdNull = oconn.CreateCommand()) {
            dbCmdNull.CommandText = "SET NULL OFF"; 
            dbCmdNull.ExecuteNonQuery();
        } // closes dbCmdNull

        string zapytanie = @"insert into " + @pelna_sciezka + @" (rk, Na,Ks) values (0,'" + na + "','" + ks2 +"')"; 
        ocmd.CommandText = zapytanie; 
        ocmd.ExecuteNonQuery(); 
    }  // closes ocmd
} // closes connection 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-28T12:24:39.097

我已经解决了我的问题，我执行了两点：
- 我已经更改了`ado.net`Heinzi 编写的所有代码
- 我使用了来自`support.microsoft.com/kb/260856`

并跟着他们，问题现在已经消失了。谢谢大家的帮助！

# ios - 为什么用openURL打开谷歌地图找不到地址

> ID：11240561
> 
> 赞同：0
> 
> 时间：2012-06-28T08:13:08.123
> 
> 标签：ios, google-maps, openurl

我创建了一个UITextView，设置text=@"中国，浙江省杭州市滨江区"，设置dataDetectorTypes=UIDataDetectorTypeAddress，然后长按，选择打开地图，可以在GoogleMap中找到地址。

但是，同样的地址，我用 openUrl 找不到地址。

```
NSString *urlText = [NSString stringWithFormat:@"http://maps.google.com/maps?q=%@", [address stringByAddingPercentEscapesUsingEncoding:NSUTF8StringEncoding]]; 
[[UIApplication sharedApplication] openURL:[NSURL URLWithString:urlText]]; 
```

谁能告诉我为什么？或 iOS 不使用此 url(http://maps.google.com/maps?q=%@)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-28T08:22:10.290

你会尝试不同的结局吗？例如，NSUnicodeStringEncoding

```
 NSString *urlText = [NSString stringWithFormat:@"http://maps.google.com/maps?q=%@", [address stringByAddingPercentEscapesUsingEncoding:NSUnicodeStringEncoding]]; 
```

结果是什么

```
[address stringByAddingPercentEscapesUsingEncoding:NSUTF8StringEncoding] 
```

?

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-28T09:24:05.363

Google Maps http:// 调用不使用 % 分隔符，而是使用 +'s。

```
NSString *fixedAddress = [fullAddress stringByReplacingOccurencesOfString:@" " withString:@"+"];
NSString *googleCall = @"http://maps.google.com/maps?q=";
[[UIApplication sharedApplication] openURL:[NSURL URLWithString:[googleCall stringByAppendingString:fixedAddress]]]; 
```

我，我自己遇到了这个问题，并在昨晚用前面的代码修复了它。

# vba - 在 VBA 中返回，不符合我的预期

> ID：11240563
> 
> 赞同：1
> 
> 时间：2012-06-28T08:13:14.820
> 
> 标签：vba, excel, return

```
Public Function GetRowToWriteOn(ByVal SheetName As String, ByVal id As Integer) As Integer
    LastRow = ActiveSheet.UsedRange.Rows.Count
    myarray = Sheets(SheetName).Range("d7:d" & LastRow).Value
    For row = 1 To UBound(myarray, 1)
        If (myarray(row, 1) = id) Then
            Return row
        End If
    Next
End Function 
```

IDE 说预期的语句结束，我该怎么做？（返回 id 相同的行？）

我对 VBA 一点也不熟悉，但是当我从微软看这个例子时，这应该可以吗？：

> Return 语句同时分配返回值并退出函数。以下示例显示了这一点。
> 
> ```
> Function myFunction(ByVal j As Integer) As Double
>    Return 3.87 * j
> End Function 
> ```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-28T08:20:31.523

在 VBA 中，返回值不是通过 return 关键字完成的，因为它在其他语言中是自定义的。尝试：

```
GetRowToWriteOn = row 
```

函数名本身就充当一个变量。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-28T08:48:42.430

```
Public Function GetRowToWriteOn(ByVal SheetName As String, ByVal idnr As Integer) As Integer
    LastRow = ActiveSheet.UsedRange.Rows.Count
    myarray = Sheets(SheetName).Range("d7:d" & LastRow).Value
    For row = 1 To UBound(myarray, 1)
        If (myarray(row, 1) = idnr) Then
            GetRowToWriteOn = row
            Exit Function
        End If
    Next
    GetRowToWriteOn = UBound(myarray, 1) + 1
    Exit Function 'Probably not needed :)
End Function 
```

# php - Ajax 分页与 php 返回整个页面而不是分页 div

> ID：11240565
> 
> 赞同：0
> 
> 时间：2012-06-28T08:13:29.853
> 
> 标签：php, javascript, jquery, mysql, ajax

我有一个 php 网站，它必须以分页格式显示页面上的项目列表。我使用 php 实现了这一点，但现在我想向它添加 ajax 功能。所以我添加了这个函数，以便在点击页面时调用 no在分页部分。Ajax/Jquery 函数：（.paginate 是页面链接的类）

```
$(document).ready(function()
{
$('.paginate').live('click', function(e)
{
    //alert("Here");
    e.preventDefault();
    var btnPage = $(this);
    //alert(btnPage.attr('href'));     /RealEstate/process.php?page=3&ipp=2&venue=Array $('#temp').load($(this).attr("href")+' #temp');
    var getUrl = btnPage.attr('href');
    //var dataLocality = { 'locality[]' : []};
    //alert(getUrl);
    $.ajax(
    {
       url:btnPage.attr('href'),
        success : function(resp)
        {
            // replace current results with new results.
            $('#project_section').html(resp);
        },
        error : function()
        {
            window.location.href = btnPage.attr('href');
        }
    });
 });
}); 
```

我的分页功能有点像这样：

```
function paginate()
{
    if(!isset($this->default_ipp)) $this->default_ipp='2';
    if($_GET['ipp'] == 'All')
    {
        $this->num_pages = 1;

    }
    else
    {
        if(!is_numeric($this->items_per_page) OR $this->items_per_page <= 0) $this->items_per_page = $this->default_ipp;
        $this->num_pages = ceil($this->items_total/$this->items_per_page);
    }
    $this->current_page = (isset($_GET['page'])) ? (int) $_GET['page'] : 1 ; // must be numeric > 0
    $prev_page = $this->current_page-1;
    $next_page = $this->current_page+1;
    if($_GET)
    {
        $args = explode("&",$_SERVER['QUERY_STRING']);
        foreach($args as $arg)
        {
            $keyval = explode("=",$arg);
            if($keyval[0] != "page" And $keyval[0] != "ipp") $this->querystring .= "&" . $arg;
        }
    }

    if($_POST)
    {
        foreach($_POST as $key=>$val)
        {
            if($key != "page" And $key != "ipp") $this->querystring .= "&$key=$val";
        }
    }
    if($this->num_pages > 4)
    {
        $this->return = ($this->current_page > 1 And $this->items_total >= 10) ? "<a class=\"paginate\" href=\"$_SERVER[PHP_SELF]?page=$prev_page&ipp=$this->items_per_page$this->querystring\">&laquo; Previous</a> ":"<span class=\"inactive\" href=\"#\">&laquo; Previous</span> ";

        $this->start_range = $this->current_page - floor($this->mid_range/2);
        $this->end_range = $this->current_page + floor($this->mid_range/2);

        if($this->start_range <= 0)
        {
            $this->end_range += abs($this->start_range)+1;
            $this->start_range = 1;
        }
        if($this->end_range > $this->num_pages)
        {
            $this->start_range -= $this->end_range-$this->num_pages;
            $this->end_range = $this->num_pages;
        }
        $this->range = range($this->start_range,$this->end_range);

        for($i=1;$i<=$this->num_pages;$i++)
        {
            if($this->range[0] > 2 And $i == $this->range[0]) $this->return .= " ... ";
            // loop through all pages. if first, last, or in range, display
            if($i==1 Or $i==$this->num_pages Or in_array($i,$this->range))
            {
                $this->return .= ($i == $this->current_page And $_GET['page'] != 'All') ? "<a title=\"Go to page $i of $this->num_pages\" class=\"current\" href=\"#\">$i</a> ":"<a class=\"paginate\" title=\"Go to page $i of $this->num_pages\" href=\"$_SERVER[PHP_SELF]?page=$i&ipp=$this->items_per_page$this->querystring\">$i</a> ";
            }
            if($this->range[$this->mid_range-1] < $this->num_pages-1 And $i == $this->range[$this->mid_range-1]) $this->return .= " ... ";
        }
        $this->return .= (($this->current_page < $this->num_pages And $this->items_total >= 10) And ($_GET['page'] != 'All') And $this->current_page > 0) ? "<a class=\"paginate\" href=\"$_SERVER[PHP_SELF]?page=$next_page&ipp=$this->items_per_page$this->querystring\">Next &raquo;</a>\n":"<span class=\"inactive\" href=\"#\">&raquo; Next</span>\n";
        $this->return .= ($_GET['page'] == 'All') ? "<a class=\"current\" style=\"margin-left:10px\" href=\"#\">All</a> \n":"<a class=\"paginate\" style=\"margin-left:10px\" href=\"$_SERVER[PHP_SELF]?page=1&ipp=All$this->querystring\">All</a> \n";
    }
    else
    {
        for($i=1;$i<=$this->num_pages;$i++)
        {
            $this->return .= ($i == $this->current_page) ? "<a class=\"current\" href=\"#\">$i</a> ":"<a class=\"paginate\" href=\"$_SERVER[PHP_SELF]?page=$i&ipp=$this->items_per_page$this->querystring\">$i</a> ";
        }
        $this->return .= "<a class=\"paginate\" href=\"$_SERVER[PHP_SELF]?page=1&ipp=All$this->querystring\">All</a> \n";
    }
    $this->low = ($this->current_page <= 0) ? 0:($this->current_page-1) * $this->items_per_page;
    if($this->current_page <= 0) $this->items_per_page = 0;
    $this->limit = ($_GET['ipp'] == 'All') ? "":" LIMIT $this->low,$this->items_per_page";
} 
```

在我要显示分页**div**的页面上，我将**整个页面**作为响应而不是分页**div**。我已将分页 div 分隔到一个单独的页面并将其包含在显示页面上（在下面添加代码），但是不工作。

```
<div id="project_section">
    <?php include_once("cityPropertySearchResults.php");?>        
</div> 
```

有人可以照亮它吗？
**更新：我在**[这里](https://stackoverflow.com/questions/1309197/prevent-entire-php-execution-on-ajax-request?rq=1) 发现了类似的东西

这适用于链接，但现在，所有的 js 文件都会一次又一次地递归加载。

谢谢你的时间。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-28T08:23:34.627

在第一个页面加载后首先将限制开始分配为 0 增加限制开始值作为每页的限制并将该值通过 ajax 并在查询中使用该限制开始（例如 SELECT * FROM tbl LIMIT 0,10;）

# php - spl_autoload_register 问题

> ID：11240570
> 
> 赞同：1
> 
> 时间：2012-06-28T08:13:57.923
> 
> 标签：php

我不明白为什么会收到此错误

```
Fatal error: Class 'ImageJpg' not found 
```

这是我使用的代码

```
spl_autoload_register(function($class) {
    if(file_exists($class))
    {
        include $class.'.php';
    }
});

$n = new ImageJpg(); 
```

文件 ImageJpg.php 与上面的代码在同一个目录中。

这是 ImageJpg.php 的内容

```
<?php
class ImageJpg
{
    public function __construct()
    {
        echo 'Image from jpg called';
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-28T08:25:58.680

```
if(file_exists($class))
{
    include $class.'.php';
} 
```

应该

```
if(file_exists($class.'.php'))
{
    include $class.'.php';
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-28T08:23:06.757

ImageJpg.php 文件中是否有一个名为 ImageJpg 的类？文件是否存在？试试这个：

```
spl_autoload_register(function($class) {
    if(file_exists($class.'.php'))
    {
        include $class.'.php';

        if (!class_exists($class))
        {
            die('required class not present');
        }
    }
    else
    {
        die('file not found');
    }
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-06-10T11:44:30.567

我也遇到了 file_exists 的问题，我调试了大约 2 个小时，即使在我到处搜索以及在网络上搜索之后也没有任何反应。最后这是一个错字：而是`userController.php`实际`userControlller.php`文件。再次检查（按此顺序）：

1.  确保您的文件名中没有拼写错误（PHP 或文件系统）
2.  检查您的路径 -`ROOT`和/或使用`getcwd()`
3.  临时打印/记录您的支票以确保一切匹配
4.  避免人为错误:)

# coldfusion - 在 Railo 中获取结构键的问题

> ID：11240572
> 
> 赞同：1
> 
> 时间：2012-06-28T08:14:03.787
> 
> 标签：coldfusion, railo, cfwheels

使用 Railo 和 cfWheels 构建应用程序。

我创建了一个带有多组单选按钮的表单。每个组具有相同的名称，并且名称是一个数组引用，例如（响应 [1]）。有23组。

每次我提交表单并使用 StructKeyList 或 StructKeyArray 获取响应数组键并最终找到返回的键数时，我得到 21。

我做了一个键的转储，只是为了找出 2 组的结果总是组合在一起。

我用 Adob​​e ColdFusion 尝试了相同的代码，它工作正常。我得到 23 个具有不同值的响应。

# android - Android中的序列化和反序列化

> ID：11240573
> 
> 赞同：3
> 
> 时间：2012-06-28T08:14:18.980
> 
> 标签：android, xml, serialization

我正在使用 JERSEY 技术在 Java 中开发一个 Restful Web 服务。我目前已经开发了所有的服务器端。

该项目的客户端将是一个 Android 应用程序。我已经完成了服务器和客户端之间的通信（我可以通过Android发送信息并在Web服务中接收它）。问题是我在客户端的序列化和反序列化问题上遇到了问题。

使用 JERSEY 的 Web 服务端会自动执行此操作，但我在 Android 中没有找到任何客户端可以在 XML 中进行序列化和反序列化。有什么建议吗？

我是否必须手动执行（处理 xml 并用 while 反序列化它，等等..）？

# vba - 让我的按钮打招呼

> ID：11240575
> 
> 赞同：0
> 
> 时间：2012-06-28T08:14:24.600
> 
> 标签：vba, excel

我正在尝试开始使用 VBA for Excel 并将“开发人员”选项卡添加到功能区。我还在 Module1 中添加了一个小子：

```
Sub Hello()

    MsgBox ("Hello world!")

End Sub 
```

然后我在电子表格 1 中创建了一个按钮，右键单击并将 Hello 分配为宏。

到目前为止，我认为这应该可以工作，但是当我单击它时，什么也没有发生。

此外，如果我再次打开 VBA 编辑器窗口，Module1 已被编辑，不也包含我的操作？

```
Sub Hello()

    MsgBox ("Hello world!")

End Sub
    ActiveSheet.Shapes.Range(Array("Button 2")).Select
    Selection.OnAction = "Hello"
    Range("G15").Select
    ActiveSheet.Shapes.Range(Array("Button 2")).Select
    Application.Goto Reference:="Hello" 
```

这是什么曼波果酱？为什么按钮不起作用？:(

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-28T08:23:45.860

并尝试没有括号的消息框，只有引号。所以： msgbox "Blabla" 删除子程序后的代码：它是宏记录器意外生成的（没有目的的）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-29T06:37:56.223

```
 Private Sub CommandButton1_Click()    
   Call hello  
 End Sub 
```

1.  删除下面`End Sub`的所有内容......这可能已经记录在某个地方
2.  右键单击按钮并转到“查看代码”并调整自动代码看起来像上面。选择按钮时，您需要处于“设计模式”以获取菜单：

![在此处输入图像描述](../Images/c4f93a45c5d3c1c02d34f416d4772696.png)

# python - python中的OO设计。上上下下？

> ID：11240577
> 
> 赞同：2
> 
> 时间：2012-06-28T08:14:37.050
> 
> 标签：python, oop, composition

我的问题实际上是关于由父类创建的两个对象如何相互通信。我的真实用例是一个 PySide GUI 应用程序，其中两个位于 CentralWidget 上的小部件需要连接一个信号和插槽。

然而，这个问题比这更普遍，所以我有一个愚蠢的例子来证明这个问题。

特别是 Son 中的“asksister”方法，我知道父母有一个女儿，我需要连接这两个方法。但是，通过硬链接连接，意味着我无法在不创建整个对象结构的情况下运行单元测试。

有没有更好的办法？

如果我在这里发布我的真实代码（简化后）会不会那么蹩脚

```
class Parent(object):
    def __init__(self):
        self.son = Son(self)
        self.daughter = Daughter(self)
        self.son.dohomework()

class Son(object):
    def __init__(self, parent):
        self.parent = parent

    def dohomework(self):
        print 'The answer is {0}'.format(self.asksister())

    def asksister(self):
        return self.parent.daughter.answer()

class Daughter(object):
    def __init__(self, parent):
        self.parent = parent

    def answer(self):
        return 42

if __name__ == '__main__':
    parent = Parent() 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-28T08:24:39.033

我认为很难用一个通用的例子来做出结论性的回答，比如你提出的那个。关键是这两个对象必须交互，它们的布局和通信取决于域和它们所代表的实体。不同的设计策略可能同样有效，一种比另一种更适合特定情况。

如果是在我身上，我会注册姐妹和兄弟，而将父母排除在交流之外，但同样，这是一种设计。如果姐妹和兄弟是一个视图和一个模型，而父级是一个控制器，我会让他们都只与控制器对话。

另一种选择是让 Son 请求一个 helpService，而姐姐之前注册为 helpProvider。这样，儿子肯定知道了helpService，间接得到了妹妹。

# svn - 不允许使用 Subversion 405 方法

> ID：11240581
> 
> 赞同：3
> 
> 时间：2012-06-28T08:14:59.023
> 
> 标签：svn, tortoisesvn, webdav, http-status-code-405

我正在尝试查看 Subversion 存储库。我的另外两个颠覆客户在尝试签出时没有问题。但是，它们位于另一个网络设置中。

我正在使用 TortoiseSVN 1.7.5 64 位（也尝试了最新的 1.7.7 64 位）。

当我这样做时，我收到以下错误：

> 服务器发送了意外的返回值（405 Method Not Allowed）以响应 '/svn/cosara2/!svn/vcc/default' 的 REPORT 请求

在其他帖子中，我发现已经存在的文件夹可能存在问题。我已经确定没有这样的文件夹。

Subversion 服务器设置为使用 WebDav，因此 SVN URL 类似于`http://some/url/to/svn/repo/branch`

这可能是 HTTP 代理网络服务器的问题吗？还有其他想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-10T09:47:16.403

我通过为 SVN 存储库设置 HTTPS 解决了这个问题。代理服务器不允许 DAV，但由于代理服务器无法解释 HTTPS，因此无法阻止 DAV。

# android - 定期将位置详细信息更新到服务器

> ID：11240584
> 
> 赞同：3
> 
> 时间：2012-06-28T08:15:04.940
> 
> 标签：android, android-service, android-maps

我是新用户`Stackoverflow`，这是我的第一个问题......

问题是...

如何获取位置详细信息的定期更新？我已经尝试过使用`Service`类并在其中运行线程，但是，这只调用了一次。

谁能建议我做错了什么？谢谢你。这是我的代码

```
 public class MyService extends Service 
{
String GPS_FILTER = "";
     Thread triggerService;
     LocationManager lm;
     GpsListener gpsLocationListener;
     boolean isRunning = true;
     @Override
     public void onCreate() 
     {
           // TODO Auto-generated method stub
           super.onCreate();
           Toast.makeText(getApplicationContext(), "Hello",Toast.LENGTH_LONG).show();
           GPS_FILTER = "MyGPSLocation";

     }

     @Override
     public void onStart(Intent intent, int startId) {
           // TODO Auto-generated method stub
           super.onStart(intent, startId);          
           triggerService = new Thread(new Runnable(){
                 public void run(){
                       try{
                             Looper.prepare();//Initialize the current thread as a looper.
                             lm = (LocationManager)getSystemService(Context.LOCATION_SERVICE);
                             Toast.makeText(getApplicationContext(), "Hello1",Toast.LENGTH_LONG).show();
                             gpsLocationListener = new GpsListener();
                             long minTime = 30000; // 5 sec...
                             float minDistance = 10;
                             lm.requestLocationUpdates(LocationManager.GPS_PROVIDER, minTime,
                                         minDistance, gpsLocationListener);
                             Looper.loop();
                       }catch(Exception ex){
                             System.out.println("Exception in triggerService Thread -- "+ex);
                       }
                 }
           }, "myLocationThread");
           triggerService.start();
     }

     @Override
     public void onDestroy() {
           // TODO Auto-generated method stub
           super.onDestroy();
           removeGpsListener();
     }

     @Override
     public IBinder onBind(Intent intent) {
           // TODO Auto-generated method stub
           return null;
     }

     private void removeGpsListener(){
           try{
                 lm.removeUpdates(gpsLocationListener);
           }
           catch(Exception ex){
                 System.out.println("Exception in GPSService --- "+ex);
           }
     }

     class GpsListener implements LocationListener{
           public void onLocationChanged(Location location) {
                 // TODO Auto-generated method stub
                 double latitude = location.getLatitude();
                 double longitude = location.getLongitude();
                 sendBroadcast(filterRes);
                 postdata();
           }**

           public void onProviderDisabled(String provider) {
                 // TODO Auto-generated method stub

           }

           public void onProviderEnabled(String provider) {
                 // TODO Auto-generated method stub

           }

           public void onStatusChanged(String provider, int status, Bundle extras) {
                 // TODO Auto-generated method stub

           }

     }
    } 
```

我的更新答案此呼叫服务类

```
 Calendar cur_cal = Calendar.getInstance();
   cur_cal.setTimeInMillis(System.currentTimeMillis());
   Intent intent = new Intent(this, MyService.class);
   PendingIntent pintent = PendingIntent.getService(login.this, 0, intent, 0);
   AlarmManager alarm = (AlarmManager)getSystemService(Context.ALARM_SERVICE);

public class MyService extends Service 
{
     String GPS_FILTER = "";
     Thread triggerService;
     LocationListener locationListener;
     LocationManager lm;
     private static final long MINIMUM_DISTANCE_CHANGE_FOR_UPDATES = 1000; // in Meters
     private static final long MINIMUM_TIME_BETWEEN_UPDATES = 1000*60; // in Milliseconds
     protected LocationManager locationManager;
     boolean isRunning = true;
     @Override
     public void onCreate() 
     {
           // TODO Auto-generated method stub
           super.onCreate();
           GPS_FILTER = "MyGPSLocation";
//           locationManager = (LocationManager) getSystemService(Context.LOCATION_SERVICE);
//           locationManager.requestLocationUpdates(
//                   LocationManager.GPS_PROVIDER, 
//                   MINIMUM_TIME_BETWEEN_UPDATES, 
//                   MINIMUM_DISTANCE_CHANGE_FOR_UPDATES,
//                   new MyLocationListener());
     }

     @Override
     public void onStart(Intent intent, int startId)
     {
           // TODO Auto-generated method stub
           super.onStart(intent, startId);     
           turnGPSOn();
           Toast.makeText(getApplicationContext(), "Hello1",Toast.LENGTH_LONG).show();
           LocationManager locationManager = (LocationManager)getSystemService(Context.LOCATION_SERVICE);
           locationListener = new MyLocationListener();
           locationManager.requestLocationUpdates(LocationManager.GPS_PROVIDER,MINIMUM_TIME_BETWEEN_UPDATES, 1.0f, locationListener);

     }

     @Override
     public void onDestroy() {
           // TODO Auto-generated method stub
           super.onDestroy();
          // removeGpsListener();
     }

     @Override
     public IBinder onBind(Intent intent) {
           // TODO Auto-generated method stub
           return null;
     }

//     private void removeGpsListener(){
//           try{
//                 lm.removeUpdates(locationManager);
//           }
//           catch(Exception ex){
//                 System.out.println("Exception in GPSService --- "+ex);
//           }
//     }

     private class MyLocationListener implements LocationListener
     {

         public void onLocationChanged(Location location) 
         {
            postdata(location.getLatitude(),location.getLongitude());
             String message = String.format(
                     "New Location \n Longitude: %1$s \n Latitude: %2$s",
                     location.getLongitude(), location.getLatitude()
             );
             Toast.makeText(MyService.this, message, Toast.LENGTH_LONG).show();
             turnGPSOnOff();
         }

         public void onStatusChanged(String s, int i, Bundle b) {
//              Toast.makeText(MyService.this, "Provider status changed",
//                     Toast.LENGTH_LONG).show();
         }

         public void onProviderDisabled(String s) {
//             Toast.makeText(MyService.this,
//                     "Provider disabled by the user. GPS turned off",
//                     Toast.LENGTH_LONG).show();
         }

         public void onProviderEnabled(String s) {
//             Toast.makeText(MyService.this,
//                     "Provider enabled by the user. GPS turned on",
//                     Toast.LENGTH_LONG).show();
         }

     }
       alarm.setRepeating(AlarmManager.RTC_WAKEUP, cur_cal.getTimeInMillis(), 60*1000, pintent); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-28T08:20:59.900

尝试在此类的运行中执行您想做的事情，该线程每**5 秒**运行一次，

您可以根据需要对其进行修改。

```
public class PeriodicChecker extends Thread
    {
        @Override
        public void run()
        {
            while(true) {
               System.out.println("Thread is doing something");
               //Put Your code here
               Thread.sleep(5000);
            }
        }

    }

    public OtherClass {
       public static void main(String args[]) {
          Thread t = new PeriodicChecker();
          t.start();
       }
    } 
```

# android - PDFViewer 的 NoClassDefFoundError

> ID：11240589
> 
> 赞同：0
> 
> 时间：2012-06-28T08:15:24.597
> 
> 标签：android, noclassdeffounderror, pdf-viewer

我正在尝试实现一个 pdf 查看器，该应用程序会检测存储在 sd 卡中的 PDF，如图所示。 [http://img225.imageshack.us/img225/3852/pdfs.png](http://img225.imageshack.us/img225/3852/pdfs.png)

但是当我点击任何文件来查看它时......错误。

这是 LOGCAT：

```
06-28 07:32:46.963: WARN/dalvikvm(330): Unable to resolve superclass of Lcom/example/trypdf/Second; (496)
06-28 07:32:46.983: WARN/dalvikvm(330): Link of class 'Lcom/example/trypdf/Second;' failed
06-28 07:32:46.983: ERROR/dalvikvm(330): Could not find class 'com.example.trypdf.Second', referenced from method com.example.trypdf.PDFViewerActivity.openPdfIntent
06-28 07:32:47.013: WARN/dalvikvm(330): VFY: unable to resolve const-class 419 (Lcom/example/trypdf/Second;) in Lcom/example/trypdf/PDFViewerActivity;
06-28 07:32:47.013: DEBUG/dalvikvm(330): VFY: replacing opcode 0x1c at 0x0002
06-28 07:32:47.013: DEBUG/dalvikvm(330): VFY: dead code 0x0004-000e in Lcom/example/trypdf/PDFViewerActivity;.openPdfIntent (Ljava/lang/String;)V
06-28 07:32:47.373: INFO/ActivityManager(59): Displayed activity com.example.trypdf/.PDFViewerActivity: 1665 ms (total 1665 ms)
06-28 07:32:52.593: DEBUG/dalvikvm(131): GC_EXPLICIT freed 1336 objects / 74064 bytes in 149ms
06-28 07:33:28.634: DEBUG/SntpClient(59): request time failed: java.net.SocketException: Address family not supported by protocol
06-28 07:33:55.655: DEBUG/AndroidRuntime(330): Shutting down VM
06-28 07:33:55.663: WARN/dalvikvm(330): threadid=1: thread exiting with uncaught exception (group=0x4001d800)
06-28 07:33:55.684: ERROR/AndroidRuntime(330): FATAL EXCEPTION: main
06-28 07:33:55.684: ERROR/AndroidRuntime(330): java.lang.NoClassDefFoundError: com.example.trypdf.Second
06-28 07:33:55.684: ERROR/AndroidRuntime(330):     at com.example.trypdf.PDFViewerActivity.openPdfIntent(PDFViewerActivity.java:46)
06-28 07:33:55.684: ERROR/AndroidRuntime(330):     at com.example.trypdf.PDFViewerActivity.onListItemClick(PDFViewerActivity.java:41)
06-28 07:33:55.684: ERROR/AndroidRuntime(330):     at android.app.ListActivity$2.onItemClick(ListActivity.java:321)
06-28 07:33:55.684: ERROR/AndroidRuntime(330):     at android.widget.AdapterView.performItemClick(AdapterView.java:284)
06-28 07:33:55.684: ERROR/AndroidRuntime(330):     at android.widget.ListView.performItemClick(ListView.java:3382)
06-28 07:33:55.684: ERROR/AndroidRuntime(330):     at android.widget.AbsListView$PerformClick.run(AbsListView.java:1696)
06-28 07:33:55.684: ERROR/AndroidRuntime(330):     at android.os.Handler.handleCallback(Handler.java:587)
06-28 07:33:55.684: ERROR/AndroidRuntime(330):     at android.os.Handler.dispatchMessage(Handler.java:92)
06-28 07:33:55.684: ERROR/AndroidRuntime(330):     at android.os.Looper.loop(Looper.java:123)
06-28 07:33:55.684: ERROR/AndroidRuntime(330):     at android.app.ActivityThread.main(ActivityThread.java:4627)
06-28 07:33:55.684: ERROR/AndroidRuntime(330):     at java.lang.reflect.Method.invokeNative(Native Method)
06-28 07:33:55.684: ERROR/AndroidRuntime(330):     at java.lang.reflect.Method.invoke(Method.java:521)
06-28 07:33:55.684: ERROR/AndroidRuntime(330):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:868)
06-28 07:33:55.684: ERROR/AndroidRuntime(330):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:626)
06-28 07:33:55.684: ERROR/AndroidRuntime(330):     at dalvik.system.NativeStart.main(Native Method)
06-28 07:33:55.693: WARN/ActivityManager(59):   Force finishing activity com.example.trypdf/.PDFViewerActivity
06-28 07:33:56.213: WARN/ActivityManager(59): Activity pause timeout for HistoryRecord{44fe47a0 com.example.trypdf/.PDFViewerActivity} 
```

我几乎尝试了所有方法：

*   创建一个新项目并复制类。
*   使用其他目标 (APIS lvl10),(2.2,_lvl8)。
*   清洁和建造
*   重置亚行。
*   使用从其他站点下载的 PDFViewer 库。

但我总是得到同样的错误：

```
06-28 07:32:46.983: ERROR/dalvikvm(330): Could not find class 'com.example.trypdf.Second', referenced from method com.example.trypdf.PDFViewerActivity.openPdfIntent
06-28 07:33:55.684: ERROR/AndroidRuntime(330): java.lang.NoClassDefFoundError: com.example.trypdf.Second 
```

在这里你还可以看到我的两个类，以及 MANIFEST。

PDFViewerActivity.java

```
 package com.example.trypdf;

import java.io.File;
import java.io.FilenameFilter;

import com.example.trypdf.Second;
import net.sf.andpdf.pdfviewer.PdfViewerActivity;
import android.app.ListActivity;
import android.content.Intent;
import android.os.Bundle;
import android.os.Environment;
import android.view.View;
import android.widget.ArrayAdapter;
import android.widget.ListView;

public class PDFViewerActivity extends ListActivity {

    String[] pdflist;
    File[] imagelist;
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        //setContentView(R.layout.main);

        File images = Environment.getExternalStorageDirectory();
        imagelist = images.listFiles(new FilenameFilter() {
            public boolean accept(File dir, String name) {
                return ((name.endsWith(".pdf")));
            }
        });
        pdflist = new String[imagelist.length];
        for (int i = 0; i < imagelist.length; i++) {
            pdflist[i] = imagelist[i].getName();
        }
        this.setListAdapter(new ArrayAdapter<String>(this,
                android.R.layout.simple_list_item_1, pdflist));
    }

    protected void onListItemClick(ListView l, View v, int position, long id) {
        super.onListItemClick(l, v, position, id);
        String path = imagelist[(int) id].getAbsolutePath();
        openPdfIntent(path);
    }

    private void openPdfIntent(String path) {
        try {
            final Intent intent = new Intent(PDFViewerActivity.this, Second.class);
            intent.putExtra(PdfViewerActivity.EXTRA_PDFFILENAME, path);
            startActivity(intent);
        } catch (Exception e) {
            e.printStackTrace();
        }
    }
} 
```

二.java

```
 package com.example.trypdf;

import net.sf.andpdf.pdfviewer.PdfViewerActivity;
import net.sf.andpdf.pdfviewer.R;
import net.sf.andpdf.pdfviewer.R.drawable;
import net.sf.andpdf.pdfviewer.R.id;
import net.sf.andpdf.pdfviewer.R.layout;
import android.os.Bundle;

public class Second extends PdfViewerActivity {

    @Override
    public void onCreate(Bundle savedInstanceState) {
        // TODO Auto-generated method stub
        super.onCreate(savedInstanceState);
    }

    public int getPreviousPageImageResource() {
        return R.drawable.left_arrow;
    }

    public int getNextPageImageResource() {
        return R.drawable.right_arrow;
    }

    public int getZoomInImageResource() {
        return R.drawable.zoom_in;
    }

    public int getZoomOutImageResource() {
        return R.drawable.zoom_out;
    }

    public int getPdfPasswordLayoutResource() {
        return R.layout.pdf_file_password;
    }

    public int getPdfPageNumberResource() {
        return R.layout.dialog_pagenumber;
    }

    public int getPdfPasswordEditField() {
        return R.id.etPassword;
    }

    public int getPdfPasswordOkButton() {
        return R.id.btOK;
    }

    public int getPdfPasswordExitButton() {
        return R.id.btExit;
    }

    public int getPdfPageNumberEditField() {
        return R.id.pagenum_edit;
    }
} 
```

显现

```
 <manifest xmlns:android="http://schemas.android.com/apk/res/android"
    package="com.example.trypdf"
    android:versionCode="1"
    android:versionName="1.0" >

    <uses-sdk
        android:minSdkVersion="8"
        android:targetSdkVersion="15" />
 <application
        android:icon="@drawable/ic_launcher"
        android:label="@string/app_name" >
        <activity
            android:name="com.example.trypdf.PDFViewerActivity"
            android:label="@string/app_name" >
            <intent-filter>
                <action android:name="android.intent.action.MAIN" />

                <category android:name="android.intent.category.LAUNCHER" />
            </intent-filter>
        </activity>
        <activity
        android:name="com.example.trypdf.Second"
            android:label="@string/app_name" >
            <intent-filter>
                <action android:name="android.intent.action.MAIN" />

                <category android:name="android.intent.category.DEFAULT" />
            </intent-filter>
        </activity>
    </application>
</manifest> 
```

谢谢！！！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-29T06:52:33.523

要解决此问题，您需要：

1.  在项目中创建一个名为“libs”的文件夹。2 将项目所需的库导入到这个新文件夹中。2.1。要导入它们：右键单击 libs 文件夹--> 导入--> 文件系统-> 选择 .jar 并接受。
2.  清理、构建和启动

资料来源：Akki

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-28T08:18:04.657

`import net.sf.andpdf.pdfviewer.PdfViewerActivity;`从 PdfViewerActivity Activity中删除：

您的包裹名称`com.example.trypdf`不是`net.sf.andpdf.pdfviewer`

将您的代码更改为 PdfViewerActivity Activity 为

```
Yourr PDFViewerActivity as:

package com.example.trypdf;
package net.sf.andpdf.pdfviewer;

import java.io.File;
import java.io.FilenameFilter;

import android.app.ListActivity;
import android.content.Intent;
import android.os.Bundle;
import android.os.Environment;
import android.view.View;
import android.widget.ArrayAdapter;
import android.widget.ListView;

public class PDFViewerActivity extends ListActivity {

   //your code here/......
} 
```

在第二：

```
package com.example.trypdf;
package net.sf.andpdf.pdfviewer;

import android.os.Bundle;

public class Second extends PdfViewerActivity {
//your code here/......

} 
```

# objective-c - 禁用返回 uiwebview 的刷新

> ID：11240594
> 
> 赞同：1
> 
> 时间：2012-06-28T08:15:53.437
> 
> 标签：objective-c, uiwebview

1.  我有一个`UIWebView`和返回按钮。
2.  当用户单击返回时，它会刷新上一页。
3.  有没有办法避免这种刷新？我想显示以前的数据而没有变化。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-28T08:29:18.383

您应该缓存 URL，因此不会再次请求 URL。

创建一个 URL 请求，您提供缓存策略：

```
NSURLRequest * req = [NSURLRequest requestWithURL:@"" cachePolicy:NSURLRequestReturnCacheDataElseLoad timeoutInterval:10.0f];
[myWebView loadRequest:req]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-28T09:36:08.567

我认为最好检查您的视图将出现在该视图中的方法

# drupal - Drupal：在 user_save 中分配角色

> ID：11240596
> 
> 赞同：5
> 
> 时间：2012-06-28T08:16:06.890
> 
> 标签：drupal, drupal-7, roles

对于应该非常简单的事情，我找不到解决方案或正确示例：在创建用户时为其分配角色，这就是我正在尝试的：

```
$edit = array(
        'name' => $_POST['name'],
        'pass' => $password,
        'mail' => $_POST['email'],
        'status' => 0,
        'language' => 'es',
        'init' => $_POST['email'],
        array(2 =>'authenticated', 4=>'my custom role') //as id and named in role db table
      );

user_save(NULL, $edit); 
```

没有创建用户，我该怎么做？

谢谢

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-06-28T08:43:37.080

You haven't named the `roles` member as such. Try his modified version:

```
$edit = array(
  'name' => $_POST['name'],
  'pass' => $password,
  'mail' => $_POST['email'],
  'status' => 0,
  'language' => 'es',
  'init' => $_POST['email'],
  'roles' => array(
    2 => 'authenticated',
    4 => 'my custom role',
  ),
);

user_save(NULL, $edit); 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-06-28T09:20:19.903

你可以使用对象来做到这一点。

```
// Check if user's email is unique
if (!user_load_by_mail($_POST['email'])) {
  $account = new stdClass;
  $account->name = $_POST['name'];
  $account->pass = user_hash_password($password);
  $account->mail = $_POST['email'];
  $account->status = FALSE;
  $account->language = 'es';
  $account->init = $_POST['email'];
  $account->roles = array(
    DRUPAL_AUTHENTICATED_RID => TRUE,
    'Your custom role' => TRUE,
  );
  user_save($account);
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-10-23T15:07:53.737

这是我编写的一个钩子，用于在插入新用户时向用户添加角色：

```
<?php
function MYMODULE_user_insert(&$edit, $account, $category){
  if (array_key_exists('profile_1', $account)) {
    $is_university = FALSE;
    if ($account->profile_sport_club['field_club']['und'][0]['value'] == 1 ) {
      $is_university = TRUE;
    }
    if ($is_university) {
      $uid = $account->uid;
      $role_name = 'uni_club';
      if ($role = user_role_load_by_name($role_name)) {
        user_multiple_role_edit(array($uid), 'add_role', $role->rid);
      }
    }
  }
} 
?> 
```

多亏了[这个技巧](http://www.computerminds.co.uk/articles/quick-tips-adding-role-user-drupal-7)，它现在变得简单多了。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-11-06T10:25:53.083

```
function first_user_insert(&$edit, $account, $category, $node){
  $uid = $account->uid;
  $role_name = 'role name';
  if ($role = user_role_load_by_name($role_name)) {
  user_multiple_role_edit(array($uid), 'add_role', $role->rid);
  } 
} 
```

# asp.net - 将 xml 绑定到 StackedColumns 图表

> ID：11240598
> 
> 赞同：0
> 
> 时间：2012-06-28T08:16:14.597
> 
> 标签：asp.net, xml, vb.net, charts, code-behind

我有两个问题。如何使用代码隐藏构建要在堆积柱形图中输出的 XML 文件？其次，如何将其放入 vb 的代码隐藏中？

这是目前的代码隐藏：

```
Protected Sub Page_Load(ByVal sender As Object, ByVal e As System.EventArgs) Handles Me.Load

Chart1.Width = 200
Chart1.Height = 300

Dim XMLFile As XElement = XElement.Load(Server.MapPath("~/xml/XMLFile.xml"))
Chart1.Series(0).ChartType = DataVisualization.Charting.SeriesChartType.StackedColumn
Chart1.Series(0).Palette = DataVisualization.Charting.ChartColorPalette.BrightPastel
Chart1.Series("Series1").IsValueShownAsLabel = True
    For Each node As XElement In XMLFile.Elements("something")
        Dim string1 As String = node.Element("whatever1").Value
        Dim string2 As String = node.Element("whatever2").Value

        Chart1.Series("Series1").Points.AddXY(string1, string2)
        Chart1.ChartAreas("ChartArea1").Area3DStyle.Enable3D = True
        Chart1.ChartAreas("ChartArea1").Area3DStyle.Inclination = 15
        Chart1.ChartAreas("ChartArea1").Area3DStyle.Rotation = 15
    Next
End Sub 
```

XMLFile 目前看起来像这样：

```
<root>
    <something>
        <whatever1>One</whatever1>
        <whatever2>1</whatever2>
    </something>
    <something>
        <whatever1>Two</whatever1>
        <whatever2>2</whatever2>
    </something>
</root> 
```

我需要两列，每列中堆叠三个不同的值。我怎么做？

# excel - 粘贴为纯文本 Contenteditable div & textarea (word/excel...)

> ID：11240602
> 
> 赞同：6
> 
> 时间：2012-06-28T08:16:41.087
> 
> 标签：excel, ms-word, textarea, contenteditable, textedit

我想将文本粘贴到内容可编辑的 div 中，但作为文本区域做出反应。
请注意，我想保留格式，因为我会将其粘贴到我的文本区域（来自 word、excel ...）。
所以。
1）将文本粘贴到 contenteditable div
2）我从剪贴板获取文本
3）我将我的值从剪贴板推送到我的 textarea，（不知道如何？？）
4）从我的 textarea 获取值并将其放在我的 contenteditable div

任何建议?

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-07-02T08:24:12.680

我是 CKEditor 的核心开发人员，巧合的是，在过去的 4 个月里，我一直在从事剪贴板支持和相关工作 :) 不幸的是，我无法向您描述如何处理粘贴的整个方式，因为 impl 的故事太即使我自己写了 impl 对我来说也很棘手：D

但是，这里有一些提示可能会对您有所帮助：

1.  不要编写所见即所得的编辑器——使用现有的编辑器。它会消耗你所有的时间，你的编辑器仍然会出错。我们和其他人......两个主要编辑（猜猜为什么只有三个存在）多年来一直在努力，我们仍然有完整的错误列表;）。

2.  如果您真的需要编写自己的编辑器，请查看[http://dev.ckeditor.com/browser/CKEditor/trunk/_source/plugins/clipboard/plugin.js](http://dev.ckeditor.com/browser/CKEditor/trunk/_source/plugins/clipboard/plugin.js) - 这是旧的 impl，在我重写之前，但它有效任何可能的地方。代码很糟糕......但它可能会对你有所帮助。

3.  您不可能仅通过一个事件来处理所有浏览器`paste`。为了处理所有粘贴方式，我们同时使用 -`beforepaste`和`paste`.

4.  您需要处理许多（大量：D）浏览器的怪癖。我无法向您描述它们，因为即使几周后我也不记得所有这些了。但是，我们文档中的一小段摘录可能对您有用：

    粘贴命令（由非本地粘贴使用 - 例如从我们的工具栏中）

    ```
    * fire 'paste' on editable ('beforepaste' for IE)
    * !canceled && execCommand 'paste'
    * !success && fire 'pasteDialog' on editor 
    ```

    从本机上下文菜单和菜单栏中粘贴

    ```
    (Fx & Webkits are handled in 'paste' default listner.
    Opera cannot be handled at all because it doesn't fire any events
    Special treatment is needed for IE, for which is this part of doc)
    * listen 'onpaste'
    * cancel native event
    * fire 'beforePaste' on editor
    * !canceled && getClipboardDataByPastebin
    * execIECommand( 'paste' ) -> this fires another 'paste' event, so cancel it
    * fire 'paste' on editor
    * !canceled && fire 'afterPaste' on editor 
    ```

    其余的技巧 - 在 IE 上，我们监听两个粘贴事件，其余的仅监听`paste`. 我们需要阻止 IE 上的一些事件，因为我们同时监听两者，有时这可能会导致双重处理。这是我猜最棘手的部分。

5.  > 请注意，我想保留格式，因为我会将其粘贴到我的文本区域（来自 word、excel ...）。

    您想保留格式的哪些部分？Textarea 将只保留基本的 - 块格式。

6.  请参阅[http://dev.ckeditor.com/browser/CKEditor/trunk/_source/plugins/wysiwygarea/plugin.js#L120](http://dev.ckeditor.com/browser/CKEditor/trunk/_source/plugins/wysiwygarea/plugin.js#L120)直到第 123 行 - 这是任务的最后一部分 - 将内容插入选择。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-28T09:08:17.563

当前的解决方案在 IE/SAF/FF 中完美运行但我仍然需要修复“非”键盘事件，当通过鼠标单击粘贴时......键盘“粘贴”事件的当前解决方案：

```
$(document).ready(function() {
    bind_paste_textarea();      
});

function bind_paste_textarea(){
    var activeOnPaste = null;
    $("#mypastediv").keydown(function(e){
        var code = e.which || e.keyCode;
        if((code == 86)){
            activeOnPaste = $(this);
            $("#mytextarea").val("").focus();
        }
    });
    $("#mytextarea").keyup(function(){
        if(activeOnPaste != null){
            $(activeOnPaste).focus();
            activeOnPaste = null;
        }
    });
}

<h2>DIV</h2>
<div id="mypastediv" contenteditable="true" style="width: 400px; height: 400px; border: 1px solid orange;">

</div>
<h2>TEXTAREA</h2>
<textarea id="mytextarea" style="width: 400px; height: 400px; border: 1px solid red;"></textarea> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-06-29T17:00:48.320

我已经使用[rangy 库](https://github.com/timdown/rangy)来保存和恢复选择来实现这一点。

我还在相同的函数中使用库执行了一些其他工作，我已经从这个示例中删除了这些工作，因此这不是最佳代码。

*HTML*

```
<div><div id="editor"contenteditable="true" type="text"></div><div> 
```

*Javascript*

```
var inputArea = $element.find('#editor');
var debounceInterval = 200;

function highlightExcessCharacters() {
    // Bookmark selection so we can restore it later
    var sel = rangy.getSelection();
    var savedSel = sel.saveCharacterRanges(editor);

    // Strip HTML
    // Prevent images etc being pasted into textbox
    inputArea.text(inputArea[0].innerText);

    // Restore the selection
    sel.restoreCharacterRanges(editor, savedSel);
}

// Event to handle checking of text changes
var handleEditorChangeEvent = (function () {

    var timer;

    // Function to run after timer passed
    function debouncer() {
        if (timer) {
            timer = null;
        }
        highlightExcessCharacters();
    }

    return function () {
        if (timer) {
            $timeout.cancel(timer);
        }
        // Pass the text area we want monitored for exess characters into debouncer here
        timer = $timeout(debouncer, debounceInterval);
    };
})();

function listen(target, eventName, listener) {
    if (target.addEventListener) {
        target.addEventListener(eventName, listener, false);
    } else if (target.attachEvent) {
        target.attachEvent("on" + eventName, listener);
    }
}

// Start up library which allows saving of text selections
// This is useful for when you are doing anything that might destroy the original selection
rangy.init();
var editor = inputArea[0];

// Set up debounced event handlers
var editEvents = ["input", "keydown", "keypress", "keyup", "cut", "copy", "paste"];
for (var i = 0, eventName; eventName = editEvents[i++];) {
    listen(editor, eventName, handleEditorChangeEvent);
} 
```

# jquery - jquery .on 容器元素附加到多个选择器

> ID：11240605
> 
> 赞同：8
> 
> 时间：2012-06-28T08:16:54.643
> 
> 标签：jquery, onclick, addeventlistener, propagation

我正在使用`.on()`将点击事件附加到页面上动态显示的多个元素。我遇到的问题是，当我添加`.on`到页面上的容器并希望将单击事件附加到容器中的多个元素时，后者会覆盖前一个。

```
<div id="container">
   <!-- elements here appear dynamically -->
   <div id="id1"></div>
   <div id="id1"></div>
</div>

 <script>
   $('#container').on("click", "#id1", function(){});
   $('#container').on("click", "#id2", function(){});
 </script> 
```

在上面的例子中，只有 id2 的点击事件有效。

有没有解决的办法？

谢谢你，埃夫。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-06-28T08:19:42.223

**演示** [http://jsfiddle.net/aRBY4/2/](http://jsfiddle.net/aRBY4/2/) **这里改进不大** [http://jsfiddle.net/aRBY4/5/](http://jsfiddle.net/aRBY4/5/)

是的，你`id`错了。`:)`

你使用相同的 id 即`id1`两个元素。

希望这可以帮助，

**代码**

**位改进的代码**

```
$('#container').on("click", "#id1, #id2", function() {
    alert($(this).prop('id')) // you can use --> attr('id')
});​ 
```

**或者**

```
 $('#container').on("click", "#id1, #id2", function() {
        alert($(this).attr('id')) 
    });​ 
```

**或者**

```
 $('#container').on("click", "#id1", function(){alert('d1')});
   $('#container').on("click", "#id2", function(){alert('d2')});​ 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-03-04T13:30:24.307

演示[https://jsfiddle.net/amol9supe/w18ktftb/3/](https://jsfiddle.net/amol9supe/w18ktftb/3/)

```
<div id="container">
   //Elements here appear dynamically
   <div id="id1" class="common-id">hulk</div>
   <div id="id2" class="common-id">rambo</div>
</div>

 <!-- Script Here -->
 $('#container').on("click", ".common-id", function() {
    alert(this.id)
 }); 
```

# c - 僵尸，gdb 无法附加，如何检查最后一次调用或回溯

> ID：11240609
> 
> 赞同：0
> 
> 时间：2012-06-28T08:17:03.363
> 
> 标签：c, linux, gdb, backtrace, zombie-process

我的应用程序在 Linux 机器上进入僵尸状态，它无法被杀死，gdb 无法附加到它，我无法调试。现在我想知道最后调用的函数或回溯，无论如何我能得到这个吗？/proc/pid/stat 下是否有任何信息可以用于此目的？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-28T08:20:08.927

不，你不能。Zombie 是一个已经消失的进程。唯一存在的是操作系统进程表中的条目。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-28T08:23:52.153

Zombies 是已经完成但其父进程仍未处理`SIGCHLD`信号和/或未`wait(2)`调用系统调用的进程（术语称父进程尚未“收获”子进程）。僵尸进程释放了它们的内存，但保留了一些描述进程的内核结构，包括进程表中的条目。释放他们的内存后，就无法获得堆栈跟踪或僵尸的内存转储。

# c# - 将列添加到多对多自动生成的表

> ID：11240612
> 
> 赞同：1
> 
> 时间：2012-06-28T08:17:10.463
> 
> 标签：c#, nhibernate, fluent-nhibernate, many-to-many

我有 Class 和 Student 对象。两者都收藏了另一个作为财产。这会自动创建多对多表。有没有办法在不自己创建多对多表的情况下向该表添加与关系相关的列？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-28T09:17:03.047

不，没有。您必须将关联表提升为实体，并在 Class 和 Student 上建立一对多关联。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-28T15:22:36.973

是的，这是可能的，尽管@Ricardo 在技术上确实是正确的，但您应该将连接表提升为完全合格的实体。

我看到的一些博客文章可以在这里找到人们向多对多连接表添加额外属性的地方：-

1.  [http://thesoftwaresimpleton.blogspot.co.uk/2010/03/nhibernate-many-to-many-with-extra.html](http://thesoftwaresimpleton.blogspot.co.uk/2010/03/nhibernate-many-to-many-with-extra.html)
2.  [http://nhforge.org/blogs/nhibernate/archive/2010/12/26/many-to-many-relationships-with-properties.aspx](http://nhforge.org/blogs/nhibernate/archive/2010/12/26/many-to-many-relationships-with-properties.aspx)
3.  [http://www.thebuttonfactory.nl/?p=874](http://www.thebuttonfactory.nl/?p=874)
4.  [谷歌搜索](https://www.google.co.uk/search?sugexp=chrome,mod=0&sourceid=chrome&ie=UTF-8&q=nhibernate%20many-to-many%20extra%20propertires#hl=en&sa=X&ei=GnXsT9HPGsXu8AOD-om_BQ&ved=0CFcQvwUoAQ&q=nhibernate%20many-to-many%20extra%20properties&spell=1&bav=on.2,or.r_gc.r_pw.r_cp.r_qf.,cf.osb&fp=c33d18147f5082cc&biw=1920&bih=1019)出现了很多（尤其是 SO 问题）

# core-data - 在 coredata 中使用 setPropertiesToFetch 时，如何获取每个结果中的计数？

> ID：11240614
> 
> 赞同：0
> 
> 时间：2012-06-28T08:17:22.507
> 
> 标签：core-data

在我的应用程序中，我使用 coredata 来存储大量联系人。我需要知道所有名字及其响应计数。例如，如果数据集包含六个人：比尔盖茨、比尔乔丹、比尔克林顿、迈克乔丹、迈克乔布斯、汤姆克林顿。我需要得到结果：Bill 计数为 3，Mike 计数为 2，Tom 计数为 1。

如果我试试这个：

```
[fetchRequest setPropertiesToFetch:[NSArray arrayWithObject:@"firstName"];
[fetchRequest setResultType:NSDictionaryResultType];

[managedObjectContext executeFetchRequest:fetchRequest error:nil]; 
```

然后我只能得到 3 个具有名字值的字典。但我无法计数。如果我使用默认结果类型，我将获得六个托管对象。迭代循环以获取名字并计算其计数需要额外的时间成本。

所以我的问题是，如何尽可能快地获取特定属性的值及其计数？非常感谢。

顺便说一句，我也尝试使用`NSFetchResultController`keyNamePath，并尝试获取部分信息。但是当有很多部分时，速度很慢。它比我得到所有排序的 managedObject 并自己计算属性要慢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-28T13:34:31.103

大量联系人是什么意思？根据规模，问题肯定不一样。

不管怎样，使用数据库功能来很好地处理这个问题可能是值得的。

```
Person
- firstName -> FirstName
- lastName -> LastName

FirstName
- name: string
- persons ->> Person

LastName
- name: string
- persons ->> Person 
```

从这些实体（表格）开始，更容易知道有多少人共享了多少名称。尽管如此，这肯定是对数据库的相当多的请求，因此添加计数器可能会有很大帮助，同样：

```
FirstName
- name: string
- persons ->> Person
- personCount: integer

LastName
- name: string
- persons ->> Person
- personCount: integer 
```

当然，您必须保持计数器同步，但是无论条目数量如何，都可以很容易地获得所需的数据。

（它甚至可能比简单的表使用更少的磁盘空间。）

# java - 在网格布局中分组字段

> ID：11240617
> 
> 赞同：0
> 
> 时间：2012-06-28T08:17:44.533
> 
> 标签：java, swt

我正在使用列数 = 2 的 SWT 网格布局；

是否可以选择向此布局添加 3 个元素，例如：标签复选框文本

其中标签是第一个元素，复选框和文本是第二个元素

复选框和文本在一个元素中的一种组（无边框），以便与网格布局一起使用

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-28T09:21:58.560

您可以创建一个`Composite`对象并将其用作复选框和文本小部件的父级。然后，您可以将其`Composite`作为第二个元素添加到您的网格布局中。

# java - Webservices：为什么要使用soap引擎和应用服务器？

> ID：11240622
> 
> 赞同：0
> 
> 时间：2012-06-28T08:17:52.583
> 
> 标签：java, web-services

首先对不起我的英语。我目前正在尝试为 Android 设备开发一个 JAVA 网络服务。更准确地说，Web 服务提供者将是一台普通计算机，而 Web 服务客户端将是 Android 设备。

在我阅读了一些教程之后，我已经完成了[这个](http://www.java-forums.org/blogs/web-service/1145-how-create-java-web-service.html)（webservice + client），它只需要 Eclipse。一切正常。所以我的问题如下：鉴于我的 web 服务运行良好并且可以访问，我为什么要使用soap 引擎和应用程序服务器，正如[web 服务的简短介绍中](http://gdp.globus.org/gt4-tutorial/multiplehtml/ch01s02.html)提到的那样？换句话说，具体有什么优势？

我曾尝试用谷歌搜索、阅读和了解更多信息，但我被困在这一点上。如果我充分理解，SOAP 引擎，如 Apache AXIS，允许动态生成 SOAP 数据并接收来自不同客户端的请求。但是我的网络服务不是已经自动生成 SOAP 请求/响应，因为我可以将我的网络服务与我的专用客户端一起使用吗？

关于应用程序服务器，我只是不知道它是什么。我发现很少有我能理解的文档。

我知道与其问这类问题，更好的方法是练习自己的肥皂引擎和应用程序服务器，但我更愿意知道我在做什么和使用什么，而不是进入“随机模式”。

我希望我已经清楚了，非常感谢您的回答。

麦克法拉

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-28T08:59:45.840

你问了几个很重的问题，但我会试着给出一个简短的概述：

1.  Web/应用程序服务器基本上是一个程序，它实现了许多帮助开发人员的东西，允许他专注于实际开发而不是周围的东西。诸如：线程、安全、数据库连接池等。
2.  您不必使用 SOAP webservice，实际上我认为您最好使用[REST](http://www.vogella.com/articles/REST/article.html)。
3.  您所做的教程是“Hello World”教程。它只适用于入门，但是一旦您开始编写更大的应用程序，您就会想要使用 Web 服务器。我建议从[Tomcat](http://tomcat.apache.org/)开始。

只需开始使用这些技术并随时发布问题。

# php - 如何使用 stdclass 对象从数组中获取值？

> ID：11240623
> 
> 赞同：5
> 
> 时间：2012-06-28T08:17:57.137
> 
> 标签：php

我在codeigniter中有以下输出？

```
Array
(
    [0] => stdClass Object
        (
            [id] => 8
            [book_category] => C Program
            [book_id] => 2
            [book_name] => C Language
            [book_category_id] => 8
            [book_in_stock] => 5
        )

    [1] => stdClass Object
        (
            [id] => 8
            [book_category] => C Program
            [book_id] => 1
            [book_name] => C++
            [book_category_id] => 8
            [book_in_stock] => 10
        )

    [2] => stdClass Object
        (
            [id] => 9
            [book_category] => English
            [book_id] => 3
            [book_name] => Comp Eng
            [book_category_id] => 9
            [book_in_stock] => 5
        )

    [3] => stdClass Object
        (
            [id] => 9
            [book_category] => English
            [book_id] => 4
            [book_name] => Eng English
            [book_category_id] => 9
            [book_in_stock] => 5
        )

) 
```

所以我需要从上面的数组中获取值而不需要 foreach 的调试目的？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-28T08:19:41.087

尝试这个：

```
echo $array[0]->id;
echo $array[0]->book_category; 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-07-13T20:37:30.817

这将轻松获得价值

```
foreach($array as $key =>$value){ 
  echo $array[$key]->id;
  echo $array[$key]->book_category;
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-08-09T10:47:42.473

数组永远不会得到回显，用 print_r() 试试这个；

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-28T14:27:58.923

如果您想轻松查看数组的内容，则[var_dump是您的最佳选择。](http://php.net/manual/en/function.var-dump.php)

# c# - DataGrid 中的问题

> ID：11240626
> 
> 赞同：-4
> 
> 时间：2012-06-28T08:18:09.513
> 
> 标签：c#, wpf, linq-to-sql, wpfdatagrid

```
DataClasses1DataContext MyCountry = new DataClasses1DataContext("Data source=.; 
User ID=sa; Password=; Integrated security=true; Initial catalog=training;");
var _MyCountry = from cntry in MyCountry.GetTable<country>() select cntry;
grd_table.DataSource = _MyCountry; 
```

当我尝试绑定`grd_table`. 它显示错误：

```
System.Windows.Controls.DataGrid' does not contain a definition for 'DataSource' 
and no extension method 'DataSource' accepting a first argument of 
type 'System.Windows.Controls.DataGrid' could be 
found (are you missing a using directive or an assembly reference?)"**. 
```

我应该怎么做才能解决这个错误。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-28T08:22:52.990

这肯定是编译时错误；所以我认为它在您构建项目时会引发错误。

它没有`DataSource`属性，`ItemsSource`而是使用

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-28T08:24:50.853

您不应该像 WinForms 中那样通过 DataSource-Property 将数据表直接连接到 DataGrid。使用数据绑定！:)

您可以在 XAML 中设置数据绑定

```
<DataGrid ItemsSource="{Binding Customers}" /> 
```

或在代码隐藏中的 C# 中 - 即使我更喜欢 XAML 方式。

```
dataGrid1.ItemsSource = Customer.GetSampleCustomerList(); 
```

你真的应该阅读[MVVM](http://msdn.microsoft.com/en-us/magazine/dd419663.aspx)和[DataBinding](http://msdn.microsoft.com/en-us/library/ms752347.aspx)以及WPF 中的[命令](http://msdn.microsoft.com/en-us/library/ms752308.aspx)，因为这些技术将在未来的开发中为你提供很多帮助。这比我一开始想的要容易得多——而且在你学会了第一步之后很快。

[MSDN](http://msdn.microsoft.com/en-us/library/system.windows.controls.datagrid.itemssource%28v=vs.95%29.aspx)中有一个很好的 datagrid-databinding 教程，还有一个我曾经找到的[博客。](http://wpftutorial.net/DataGrid.html)

# java - 丰富：fileUpload 在没有 Flash 的情况下无法正常工作

> ID：11240628
> 
> 赞同：0
> 
> 时间：2012-06-28T08:18:13.207
> 
> 标签：java, jsf, upload, richfaces

我`rich:fileUpload`用于上传多个文件。当我有它时它工作得很好，`allowFlash="true"`但是当我设置`allowFlash="false"`它时它不再工作了。它只是没有做任何事情。

有人可以帮我理解为什么这不起作用。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-28T12:03:41.060

我有类似的问题。server.log 中有错误：

`org.richfaces.exception.FileUploadException: Exception parsing multipart request: Request prolog cannot be read`

该问题与 Glassfish 3.1.2 有关（请参阅[错误报告](https://community.jboss.org/message/724422)）。解决方案是从网站顶部下载[web-core.jar](http://java.net/jira/browse/GLASSFISH-18444)并覆盖 glassfish 中的旧文件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-20T12:49:56.077

要解决此问题，只需将以下内容添加到您`components.xml`的禁用 Seam 多部分过滤器即可`rich:fileUpload`。不确定这是否会破坏任何其他 Seam 功能。

```
web:multipart-filter disabled="true" 
```

# paypal - Docapture方法paypal api中的交易ID无效

> ID：11240630
> 
> 赞同：0
> 
> 时间：2012-06-28T08:18:24.533
> 
> 标签：paypal, paypal-sandbox, paypal-adaptive-payments, nvp

我正在做一个 DoCapture 并使用 DoDirectPayment 的交易 ID。但是每次我捕获付款时，它都会显示“无效的交易 ID”。当我尝试从信用卡直接付款中获取一笔付款时，就会发生这种情况，而且这种信用卡付款是通过 DoDirectPayment 方法进行的。但是，如果通过转到我的 PayPal 帐户并完成我的交易来进行 expressCheckout，这也会给我交易 ID。如果我使用此交易 ID 捕获付款，则付款过程成功完成！我不知道发生了什么事！请任何人帮助我摆脱问题！我正在使用 PayPal API 版本 59.0 我的示例代码

```
 Session["stage"] = ASPDotNetSamples.Constants.ENVIRONMENT; //SandBox Environment
                //here my api credentials
                SetProfile.SessionProfile = SetProfile.CreateAPIProfile(ASPDotNetSamples.Constants.API_USERNAME,
                    ASPDotNetSamples.Constants.API_PASSWORD, ASPDotNetSamples.Constants.API_SIGNATURE, "", "",
                    ASPDotNetSamples.Constants.ENVIRONMENT);

                //NVPCallerServices caller = PayPalAPI.PayPalAPIInitialize();
                //NVPCodec encoder = new NVPCodec();
                com.paypal.sdk.services.NVPCallerServices caller = PayPalAPI.PayPalAPIInitialize();
                NVPCodec encoder = new NVPCodec();

                encoder["METHOD"] = "DoCapture";
                encoder["TRXTYPE"] = "D";
                encoder["AUTHORIZATIONID"] = authorization_id.; //the authrization id i got from the dodirectpayment
                encoder["COMPLETETYPE"] = CompleteCodeType; //completecodetype is completed
                double dAmount = Convert.ToDouble(actualAmount);
                encoder["AMT"] = String.Format("{0:0.00}", dAmount);                       

                string pStrrequestforNvp = encoder.Encode();
                string pStresponsenvp = caller.Call(pStrrequestforNvp);

                NVPCodec decoder = new NVPCodec();
                decoder.Decode(pStresponsenvp);
                string parentTransactionID = decoder["PARENTTRANSACTIONID"];
                string strAck = decoder["ACK"];

                if (strAck != null && (strAck == "Success" || strAck == "SuccessWithWarning"))
                {
                    string pStrResQue = "AUTHORIZATIONID=" + decoder["AUTHORIZATIONID"] + "&" +
                        //"PAYMENTSTATUS=" + decoder["PAYMENTSTATUS"] + "&" +
                                        "PAYMENTSTATUS=" + CompleteCodeType + "&" +
                                        "AMT=" + decoder["AMT"] + "&" +
                                        "TRANSACTIONID=" + decoder["TRANSACTIONID"];                        
                       // if  Payment is done successfully

                }
                else
                {
                     // if Payment is pending

                    string pStrError = "ErrorCode=" + decoder["L_ERRORCODE0"] + "&" +
                                       "Desc=" + decoder["L_SHORTMESSAGE0"] + "&" +
                                       "Desc2=" + decoder["L_LONGMESSAGE0"];                        
                    Response.Redirect("APIError.aspx?" + pStrError);
                } 
```

提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-02T08:43:14.223

[在此处查看 DoCapture 文档](https://cms.paypal.com/us/cgi-bin/?cmd=_render-content&content_ID=developer/e_howto_api_soap_r_DoCapture)

[在此处查看 DoDirectPayment 文档](https://cms.paypal.com/us/cgi-bin/?cmd=_render-content&content_ID=developer/e_howto_api_nvp_r_DoDirectPayment)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-02T08:46:38.637

看到这个

```
com.paypal.sdk.services.NVPCallerServices caller = PayPalAPI.PayPalAPIInitialize();
    NVPCodec encoder = new NVPCodec();
    encoder["METHOD"] = "DoDirectPayment";
    encoder["PAYMENTACTION"] = "Authorization";
    //encoder["AMT"] = hfHoldAmount.Value.ToString();
    encoder["AMT"] = hfHoldAmount.Value.ToString();
    encoder["CREDITCARDTYPE"] = ddlCardType.SelectedValue;
    encoder["ACCT"] = txtCardNnumber.Text.Trim();
    encoder["EXPDATE"] = (ddlExpMonth.SelectedValue.Length == 1 ? "0" + ddlExpMonth.SelectedValue : ddlExpMonth.SelectedValue) + ddlExpYear.SelectedValue;
    encoder["CVV2"] = txtCVCode.Text.Trim();
    encoder["FIRSTNAME"] = txtFirstName.Text.Trim();
    encoder["LASTNAME"] = txtLastName.Text.Trim();
    encoder["STREET"] = txtAddress.Text.Trim();
    encoder["CITY"] = txtCity.Text.Trim();
    encoder["STATE"] = ddlStateProvince.Items.FindByValue(ddlStateProvince.SelectedValue).Text;
    encoder["ZIP"] = txtZipCode.Text.Trim();
    encoder["COUNTRYCODE"] = "US";
    encoder["CURRENCYCODE"] = "USD"; 
```

# c++ - clang 的 -fcatch-undefined-behavior 没有像宣传的那样工作

> ID：11240636
> 
> 赞同：5
> 
> 时间：2012-06-28T08:18:36.090
> 
> 标签：c++, c, clang, undefined-behavior

我构建了 llvm/compiler-rt/clang 的 3.1 版本，我正在尝试查看 -fcatch-undefined-behavior 是否真的有任何作用。到目前为止，没有运气。例如我编译并运行

```
#include <stdio.h>
#include <stdlib.h>

int main() {
    int* x = malloc(sizeof(int) * 10);
    printf("%d\n", x[20]);
    return 0;
} 
```

和

```
$ /usr/local/bin/clang -fcatch-undefined-behavior undef_test.c && ./a.out
0 
```

我错过了一些非常简单的东西吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-28T09:36:08.040

是：`x`不是数组。

从[文档](http://clang.llvm.org/docs/UsersManual.html)中：

> **-fcatch-undefined-behavior**：打开运行时代码生成以检查未定义的行为。此选项默认为关闭，控制 Clang 是否为未定义的运行时行为添加运行时检查。如果检查失败，`__builtin_trap()`则用于指示失败。检查是：
> 
> *   下标，其中一个操作数的静态类型是从数组类型衰减的变量，而另一个操作数大于数组的大小或小于零。
> *   移位运算符，其中移位量大于或等于左侧的提升位宽或小于零。
> *   如果控制流达到 __builtin_unreachable。
> *   当 llvm 实现更多 __builtin_object_size 支持时，对 __builtin_object_size 指示我们没有访问有效内存的对象进行读写。尚未检查位域和向量。

我想您想测试下标检查，不幸的是您没有构建一个数组：您构建了一个内存区域（从`malloc`）然后选择将其解释为一个数组；但从编译器的角度来看，它只是一块内存（请记住`malloc`is的返回类型`void*`）。

您可能可以使用以下方法测试此行为：

```
int main() {
    int x[10] = {};
    printf("%d\n", x[20]);
} 
```

否则，对于特定的内存问题跟踪器，您应该查看 Address Sanitizer 插件。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-28T09:45:24.600

`-fcatch-undefined-behavior`不处理随机指针取消引用。为了处理这种情况，编译器必须将指向数据的大小与指针一起存储，并在每个函数调用中传递该大小。这将与现有的 ABI 不兼容，并且需要重新编译您的程序链接到的所有库。

您可能会争辩说这`malloc`是一个众所周知的函数，编译器可以假设返回的指针指向请求大小的数组。

但是您会忘记`malloc`可能会返回`NULL`。如果编译器假定指针不是`NULL`，它将优化任何`NULL`检查（非常危险）。如果编译器假定指针是`NULL`或指向所请求大小的数组的指针，那么管理起来会有点复杂（我们还没有谈论过`free`）`realloc`。此外，任何取消引用`malloc`-ated 指针而不进行`NULL`检查的代码都将被视为未定义行为。

更不用说您的程序可能不会链接到标准库，而是链接到提供`malloc`具有不同语义的自定义实现的库。

# iphone - 对自我和委托感到困惑

> ID：11240638
> 
> 赞同：3
> 
> 时间：2012-06-28T08:18:38.420
> 
> 标签：iphone, objective-c

此代码来自实用程序应用程序，由 Apple 在创建项目时添加。

这有什么区别：

```
- (void)flipsideViewControllerDidFinish:(FlipsideViewController *)controller
{
    [self dismissModalViewControllerAnimated:YES];
} 
```

还有这个：

```
- (void)flipsideViewControllerDidFinish:(FlipsideViewController *)controller
{
    [controller dismissModalViewControllerAnimated:YES];
} 
```

它们都可以工作，但第一个是 Apple 添加的 Utility 应用程序的主要代码。那么有什么区别，为什么 self 有效？self 是 MainViewController，而不是 FlipsideViewController。我不知道，这与委托有关吗？谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-28T08:27:39.413

这完全取决于正在执行的对象`flipsideViewControllerDidFinish`；如果它与 相同`controller`，则它是相同的。

在实践中，有时会发生委托（在您的情况下`FlipsideViewController`）的类也实现委托协议（即，充当委托）。在这种情况下，`self`和`controller`都是一样的。这将对应于委托初始化（例如在 init 方法中），例如：

```
 self.delegate = self; 
```

但是您可以让您的委托是不同的类（例如，应用程序委托或其他），在这种情况下它们会有所不同。在这种情况下，您会说（例如在 init 中）：

```
self.delegate = [UIApplication sharedApplication].delegate; 
```

在这种情况下，您的应用程序委托将收到对的调用，`FlipsideViewController`并且`controller`参数告诉它引用的是哪个对象；在这种情况下，`self`!= `controller`。

另一种情况是当您的委托充当多个对象的委托时；在这种情况下，`controller`参数告诉哪个对象是委托对象。

在实践中，在委托方法实现中，您可以安全地使用该`controller`参数而无需太多思考。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-28T08:51:30.820

我知道一个答案已经被选为正确的，并且 Sergio 在解释委托方面做得很好，但在这个特定的情况下，答案要简单得多。`self`在这种情况下`controller`不是一回事（正如您在问题中所说的那样）。`self`是呈现控制器并且`controller`是被呈现的控制器。因此，这两个调用都起作用的原因是：

> 呈现视图控制器负责关闭它呈现的视图控制器。但是，如果您在呈现的视图控制器本身上调用此方法，它会自动将消息转发到呈现的视图控制器。

来自 Apple的[文档](http://developer.apple.com/library/ios/ipad/#DOCUMENTATION/UIKit/Reference/UIViewController_Class/Reference/Reference.html)`UIViewController`

# ajax - cakephp ajax 渲染

> ID：11240639
> 
> 赞同：0
> 
> 时间：2012-06-28T08:18:41.337
> 
> 标签：ajax, cakephp, render

早上好！我在 cakephp 上遇到 ajax 问题。在我看来，我有一个指向“事件”类的链接，指向艺术家控制器的“添加”动作和一个带有“预览”类的空 div。当控制器完成其工作时，它会呈现默认视图“添加”，而不是我使用 $this->render('preview','ajax') 设置的视图。有人可以帮我解决这个问题吗？这是我在视图中的 js 代码：

```
$this->Js->get('.event');
$this->Js->event(
'click',
$this->Js->request(
array('controller'=>'artists','action'=>'add'),
array('async'=>true,'update'=>'.preview')
)
); 
```

我的控制器：

```
if($this->RequestHandler->isAjax()) {
$this->autoRender = false;
$this->render('preview');
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-30T11:32:09.327

你只漏了一个字：`ajax`。

```
$this->render('preview', 'ajax'); 
```

# caching - infinispan 和 Jboss 缓存的比较

> ID：11240641
> 
> 赞同：2
> 
> 时间：2012-06-28T08:18:53.490
> 
> 标签：caching, jboss, infinispan

我不是本地人，英语很差。请了解情况。

我一直在对 Infinispan 和 JBoss Cache 进行比较。这两种产品都是开源的。JBoss Cache 网站顶部有*“Project In Maintenance Mode”*声明。不会进行产品的增长，但人们认识到它们将进行基于稳定性的更改。

此外，我承认 Infinispan 是 JBoss Cache 的继承者。

但是，我不知道 Infinispan 在性能或稳定性方面优于 JBoss Cache 的点。由于在网站上进行调查后我不清楚，我可以教它吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-06T14:30:01.110

作为 Infinispan 开发人员之一，也是 JBoss Cache 的老贡献者，我建议您阅读[FAQS](https://docs.jboss.org/author/x/QgY5)。

它们解释了您需要了解的有关 Infinispan 和 JBoss Cache 之间关系的所有信息。关键是，除非您绑定到旧的 JBoss Cache，否则您应该使用 Infinispan。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-28T18:39:13.103

从稳定性的角度来看，Red Hat 已经将 Infinispan 产品化为 Data Grid，为产品提供企业支持，因此他们认为自己具有正确的稳定性。

在性能方面，我发现了一些本地缓存场景（Infinispan 可自定义到不分布式）与 JBoss Cache 和 eChache [http://infinispan.blogspot.co.uk/2010/02/infinispan-as-local-cache.html](http://infinispan.blogspot.co.uk/2010/02/infinispan-as-local-cache.html)

功能方面的 Infinispan 更完整。

即使有这些论点，实际使用、易用性和性能，取决于团队经验、实际缓存场景、可预见的未来场景都可以客串。您可能需要制作一些原型来证明合适。（但我将从 Infinispan 开始......）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-02T12:39:12.617

我也会从 infinispan 开始。目前我在预生产环境中使用 Infinispan 5.1.5。我从未使用过 JBoss Cache。Infinispan 5.1.5 用于 RedHat JDG，如果需要，您可以购买支持。

# triggers - 使用 Jenkins 触发其他配置并发送当前构建状态

> ID：11240642
> 
> 赞同：2
> 
> 时间：2012-06-28T08:18:54.170
> 
> 标签：triggers, automation, jenkins

在某个 Jenkins 配置中，我希望触发另一个配置作为构建**后操作。**我想将当前构建状态作为参数之一传递。

IE：表示状态（SUCCESS/FAIL/UNSTABLE）的字符串/int。

我有 2 个选项来创建构建后触发器：

**使用加入插件** ![加入插件](../Images/43b43c1004b0bbcc166bd3249b09114b.png)

**在构建后操作中使用触发器参数化构建** ![参数化构建](../Images/465d80d58cdc35580eaca22ca9eb068c.png)

我希望在运行结束时有某种可访问的环境变量......

有什么想法吗？

谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-28T21:12:06.440

这是一个简单的解决方案，可以回答大多数情况：

使用' **Trigger Parameterized Build** '插件，并设置两个触发器 -

1.  '稳定或不稳定但不会失败'
2.  '失败'

这些触发器中的每一个都应该运行相同的作业——我们称之为“ **JOB_B** ”。

对于每个触发器，传递您喜欢的任何参数，并传递用户定义的值：

*   对于触发器“ **1** ”使用：**JOB_A_STATUS=SUCCESS**
*   对于触发器“ **2** ”使用：**JOB_A_STATUS=FAIL**

现在，您需要做的就是从**JOB_B测试****${JOB_A_STATUS}**的值，看看它是设置为“SUCCESS”还是“FAIL”。

 **请注意，此解决方案不区分“稳定”和“不稳定”，而只知道“失败”和“成功”之间的区别。

祝你好运！

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-28T11:24:39.110

[您可以通过Groovy Post-Build 插件](https://wiki.jenkins-ci.org/display/JENKINS/Groovy+Postbuild+Plugin)在后期构建步骤中使用 Groovy 脚本检查状态，该插件可以通过[Jenkins Java API](http://javadoc.jenkins-ci.org/)访问 Jenkins 内部。该插件为脚本提供了变量*管理器*，可用于访问 API 的重要部分（请参阅插件文档中的*使用部分）。*

例如，您可以通过以下方式将构建结果输出到构建控制台：

```
def result = manager.build.result
manager.listener.logger.println "And the result is: ${result}" 
```

现在，您可以改为使用该值创建一个属性文件并将该文件传递给 Parameterized Trigger post-build 步骤（它有这样一个选项）。

一个警告：我不确定是否可以安排构建后步骤以特定顺序执行，以确保 Groovy 构建后步骤在参数化触发器步骤之前运行。**

# ios - NSDateFormatter 在测试仪设备上因 NSInvalidValue 而失败，但在我的设备上却没有

> ID：11240643
> 
> 赞同：2
> 
> 时间：2012-06-28T08:18:54.550
> 
> 标签：ios, nsdateformatter

我有日期解析的问题。它适用于我的设备和模拟器，但不适用于客户端设备（这也是 iPhone iOS 5.1.1，但可能是不同的配置）

```
 NSDateFormatter *formatter = [[NSDateFormatter alloc] init];
    NSDate          *date = nil;
    NSError         *error = nil; 

    [formatter setDateFormat:@"EEE, dd MMM y HH:mm:ss zzz"];
    if (![formatter getObjectValue:&date forString:@"Mon, 21 Jun 2012 21:21:21 GMT" range:nil error:&error])
    {
        NSLog(@"%@", error);
    } 
```

哪个输出

```
Error Domain=NSCocoaErrorDomain Code=2048 "The operation couldn’t be completed. (Cocoa error 2048.)" UserInfo=0x446f10 {NSInvalidValue=Mon, 21 Jun 2012 21:21:21 GMT} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-28T08:20:53.397

您需要将日期格式化程序上的语言环境设置为`en_US_POSIX`.

```
formatter.locale = [[NSLocale alloc] initWithLocaleIdentifier:@"en_US_POSIX"]; 
```

# c++ - 纹理无法渲染 - DirectX 9

> ID：11240648
> 
> 赞同：0
> 
> 时间：2012-06-28T08:19:18.260
> 
> 标签：c++, directx

我在 DirectX 9 中有这段代码，我需要从 COM 接口获取 DC 并绘制它。我确实得到了 DC，它包含图像，但我得到一个黑屏。任何想法为什么？

```
 LPDIRECT3DSURFACE9 pRenderSurface = NULL, pRenderSurfaceTMP = NULL;

    m_pRenderTexture->GetSurfaceLevel(0, &pRenderSurface);
    if (pRenderSurface == NULL)
        return FALSE;

    m_pD3DDevice->CreateOffscreenPlainSurface(m_nWidth, m_nHeight,
        D3DFMT_X8R8G8B8, D3DPOOL_SYSTEMMEM, &pRenderSurfaceTMP, 0);

    m_pD3DDevice->GetRenderTargetData(pRenderSurface,pRenderSurfaceTMP);

    HDC hDC = NULL;
    hr = pRenderSurfaceTMP->GetDC(&hDC);
    if (FAILED(hr))
        return FALSE;   

    if (m_pViewObject != NULL)
    {
        // RECT is relative to the windowless container rect
        RECTL rcRect = {0, 0, m_nWidth, m_nHeight};  

        // Draw onto the DC!
        hr = m_pViewObject->Draw(DVASPECT_CONTENT, 1,
            NULL, NULL, NULL, hDC, &rcRect, NULL, NULL,
            0);
    }

    pRenderSurface->ReleaseDC(hDC);
    pRenderSurface->Release();

    // Draw the surface
    m_pD3DDevice->SetStreamSource( 0, m_pVertexBuffer, 0, sizeof(Vertex) );
    m_pD3DDevice->SetTexture( 0, m_pRenderTexture );

    hr = m_pD3DDevice->DrawPrimitive(D3DPT_TRIANGLESTRIP, 0, 2);

    m_hbrBackground = NULL;
    pRenderSurfaceTMP->Release(); 
```

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-03T14:11:50.527

尝试这个：

```
m_pD3DDevice->CreateTexture(m_nWidth, m_nHeight, 1, 0, D3DFMT_X8R8G8B8,
                            D3DPOOL_MANAGED, &m_pRenderTexture, NULL);

// ...

LPDIRECT3DSURFACE9 pRenderSurface = NULL;
if (FAILED(m_pRenderTexture->GetSurfaceLevel(0, &pRenderSurface))) return FALSE;

HDC hDC = NULL;
if (FAILED(pRenderSurface->GetDC(&hDC))) return FALSE;   

if (m_pViewObject != NULL)
{
    RECTL rcRect = {0, 0, m_nWidth, m_nHeight};

    m_pViewObject->Draw(DVASPECT_CONTENT, 1,
        NULL, NULL, NULL, hDC, &rcRect, NULL, NULL, 0);
}

pRenderSurface->ReleaseDC(hDC);
pRenderSurface->Release();

m_pD3DDevice->SetStreamSource( 0, m_pVertexBuffer, 0, sizeof(Vertex) );
m_pD3DDevice->SetTexture( 0, m_pRenderTexture );

m_pD3DDevice->DrawPrimitive(D3DPT_TRIANGLESTRIP, 0, 2); 
```

或这个：

```
m_pD3DDevice->CreateTexture(m_nWidth, m_nHeight, 1, 0, D3DFMT_X8R8G8B8,
                            D3DPOOL_DEFAULT, &m_pRenderTexture, NULL);

// ...

LPDIRECT3DSURFACE9 pRenderSurfaceTMP = NULL;
m_pD3DDevice->CreateOffscreenPlainSurface(m_nWidth, m_nHeight,
    D3DFMT_X8R8G8B8, D3DPOOL_SYSTEMMEM, &pRenderSurfaceTMP, 0);

HDC hDC = NULL;
if (FAILED(pRenderSurfaceTMP->GetDC(&hDC))) return FALSE;   

if (m_pViewObject != NULL)
{
    RECTL rcRect = {0, 0, m_nWidth, m_nHeight};

    m_pViewObject->Draw(DVASPECT_CONTENT, 1,
        NULL, NULL, NULL, hDC, &rcRect, NULL, NULL, 0);
}

pRenderSurfaceTMP->ReleaseDC(hDC);

LPDIRECT3DSURFACE9 pRenderSurface = NULL;
if (FAILED(m_pRenderTexture->GetSurfaceLevel(0, &pRenderSurface)))
    return FALSE;

if (FAILED(m_pD3DDevice->UpdateSurface(pRenderSurfaceTMP, NULL,
                                       pRenderSurface, NULL))) return FALSE;

pRenderSurface->Release();

m_pD3DDevice->SetStreamSource( 0, m_pVertexBuffer, 0, sizeof(Vertex) );
m_pD3DDevice->SetTexture( 0, m_pRenderTexture );

m_pD3DDevice->DrawPrimitive(D3DPT_TRIANGLESTRIP, 0, 2); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-01T22:35:39.220

确保它`m_pRenderTexture`是用`D3DUSAGE_RENDERTARGET`. 两者的大小和格式`pRenderSurface`应该`pRenderSurfaceTMP`匹配。有关详细信息，请参阅何时`GetRenderTargetData`失败： http: [//msdn.microsoft.com/en-us/library/windows/desktop/bb174405 (v=vs.85).aspx](http://msdn.microsoft.com/en-us/library/windows/desktop/bb174405(v=vs.85).aspx)

# windows-8 - 通过鼠标在 ComboBox 中旋转 CarouselPanel

> ID：11240657
> 
> 赞同：4
> 
> 时间：2012-06-28T08:19:51.163
> 
> 标签：windows-8, windows-store-apps, winrt-xaml

我目前`ComboBox`在 Metro XAML 应用程序中重新模板化。

这`ItemsPanel`是标准`CarouselPanel`，它就像一个不倒翁，无休止地在项目列表中旋转 - 很好！

另一个不错的细节是，在 VS/Blend 模拟器中，如果您使用触摸指针“轻弹”项目，然后轮播“旋转”，就像 Windows Phone 中的日期翻转器一样。

我的问题是，在桌面模式下（通过鼠标）使用时，我无法重新创建相同的旋转效果。鼠标/触摸手势翻译似乎有某种失败。

有没有人对如何让它发挥作用有任何想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-24T23:11:48.657

起初我认为它可能就像`GridView`不会冒泡鼠标滚轮事件一样。但后来我尝试了下面的代码，鼠标滚轮确实旋转了它。它不会在 Blend 中执行此操作，但在运行时可以执行此操作。

```
<Grid Background="Black">
    <ComboBox VerticalAlignment="Top">
        <x:String>0</x:String>
        <x:String>1</x:String>
        <x:String>2</x:String>
        <x:String>3</x:String>
        <x:String>4</x:String>
        <x:String>5</x:String>
        <x:String>6</x:String>
        <x:String>7</x:String>
        <x:String>8</x:String>
        <x:String>9</x:String>
        <x:String>10</x:String>
        <x:String>11</x:String>
        <x:String>12</x:String>
        <x:String>13</x:String>
        <x:String>14</x:String>
        <x:String>15</x:String>
        <x:String>16</x:String>
        <x:String>17</x:String>
        <x:String>18</x:String>
        <x:String>19</x:String>
        <x:String>20</x:String>
        <x:String>21</x:String>
        <x:String>22</x:String>
        <x:String>23</x:String>
        <x:String>24</x:String>
        <x:String>25</x:String>
        <x:String>26</x:String>
        <x:String>27</x:String>
        <x:String>28</x:String>
        <x:String>29</x:String>
    </ComboBox>
</Grid> 
```

祝你好运！

# jquery - 如何使 kendoUI 拖放工作正确？

> ID：11240658
> 
> 赞同：1
> 
> 时间：2012-06-28T08:19:55.907
> 
> 标签：jquery, sorting, drag-and-drop, kendo-ui

我正在使用 kendoUI 拖放控件对我的列表进行排序。我发现这个 jsfiddle [http://jsfiddle.net/ruse](http://jsfiddle.net/rusev/nmB69/) ​​v/nmB69/并且一切正常，但是当我在我的网站上实现它时它不起作用。

我在我的页面上使用`jquery-1.7.1.min.js`和。`kendo.all.min.js`

如果你看小提琴，你可以看到一些`console.log`。我登录的值对于小提琴和我的应用程序是不同的，例如：

**在小提琴中我进入控制台：**

```
1
u.extend.f
[<td>3</td>]
u.extend.f 
```

**在我的应用程序中的相同情况下，我得到：**

```
undefined
undefined
[<td>Text 1</td>]
undefined 
```

在提示参数中创建的元素在我删除后显示。

我是 Kendo UI 的新手，所以我不知道如何修复它。

任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-28T13:54:20.853

我试过这个，遇到了和你一样的问题。然后我注意到 jsfiddle 示例使用的是 Kendo UI v2011.3.1129，而我使用的是 Kendo UI Beta v2012.2.621。这些版本之间发生了[重大变化。](http://www.kendoui.com/documentation/changes-and-backward-compatibility.aspx)

解决方案是使用与 jsfiddle 示例相同的版本或更改您的代码。获取数据源时，我在两个地方更改了代码。Grid 小部件现在使用 Model 的 uid 字段而不是 id，它表示其唯一的 id。此外，为了通过其 uid 检索模型实例，应使用 DataSource 的 getByUid 方法。

jsfiddle 示例：

```
var target = dataSource.get($(e.draggable.currentTarget).data("id")) 
```

更改代码

```
var target = dataSource.getByUid($(e.draggable.currentTarget).data("uid")) 
```

这必须对目标和目的地都进行。

```
 grid.table/*.find("tbody > tr")*/.kendoDropTarget({
      group: "gridGroup",
      drop: function (e) {
        var target = dataSource.getByUid($(e.draggable.currentTarget).data("uid")),
              dest = $(e.target);

        if (dest.is("th")) {
          return;
        }
        dest = dataSource.getByUid(dest.parent().data("uid"));

        //not on same item
        if (target.get("id") !== dest.get("id")) {
          //reorder the items
          var tmp = target.get("position");
          target.set("position", dest.get("position"));
          dest.set("position", tmp);

          dataSource.sort({ field: "position", dir: "asc" });
        }
      }
    }); 
```

# jsp - 显示标签表中不正确的href：指向错误的位置

> ID：11240659
> 
> 赞同：0
> 
> 时间：2012-06-28T08:19:57.403
> 
> 标签：jsp, jakarta-ee, struts, displaytag

我有下面的显示表

```
<display:table name="jobTrackerCol" pagesize="20" sort="list" id="data" requestURI="" class="tablelist">

<display:column title="File Link" sortable="true" property="ftp_link" href="${data.ftp_link}">

</display:table> 
```

我能够正确显示链接，但它指向错误的位置

例如，下面是我的 ftp 链接

```
 ftp://10.155.6.225/Velocity/1008.zip  ---should point to 1008.zip

    ftp://10.155.6.225/Velocity/1009.zip   -------should point to 1009.zip 
```

所有链接都指向 1007.zip

可能是什么问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-28T09:48:33.930

现在它正在处理这个。

```
<display:column title="File Link" sortable="true" >
            <a href="${data.ftp_link}">${data.ftp_link}</a>

            </display:column> 
```

# php - 是每个 mysql 用户的 mysql 并发连接限制还是每个 localhost 的限制

> ID：11240660
> 
> 赞同：1
> 
> 时间：2012-06-28T08:19:59.293
> 
> 标签：php, mysql

我是新来的，但从这个网站得到了好处。我计划在大型 php/mysql 网站上，但对 mysql 并发连接限制感到困惑。是每个 mysql 数据库的限制还是每个 localhost/cpanel 帐户的限制？如果它限制每个mysql数据库。因此，如果我为每个最终用户都有一个专用的 mysql 数据库，那么例如每 1000 个最终用户有 1000 个数据库，但我只有 1 个 mysql-user 授予对所有 1000 个数据库的访问权限。可以吗？如果它限制每个 mysql 用户。在这种情况下，池连接可以成为解决方案吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-28T08:44:15.277

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-28T08:24:52.130

太疯狂了。每个用户不能有 1 个数据库。那是过度杀戮。（如果您不是托管服务提供商）

无论如何，MySQL 建议不要超过每台机器**4096 个并发**请求。如果您有 4096 个并发请求，我相信您将遇到除数据库之外的许多其他问题。

参考：[MySQL 最佳实践](http://dev.mysql.com/tech-resources/articles/mysql-administrator-best-practices.html)

# postgresql - 如何将 Joomla 2.5 连接到 Postgresql？

> ID：11240664
> 
> 赞同：-1
> 
> 时间：2012-06-28T08:20:11.050
> 
> 标签：postgresql, joomla

我想将 joomla 2.5 连接到 Postgresql 数据库。
我怎样才能做到这一点 ？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-03T03:19:05.333

您必须在`/database/`.

[您可以在Google Groups Joomla Bug Squad](https://groups.google.com/forum/?fromgroups#!topic/joomlabugsquad/LWQ0zyZ9PMg)上观看此特定主题。

# jquery - jquery：在选中另一个复选框时选中并禁用复选框

> ID：11240672
> 
> 赞同：4
> 
> 时间：2012-06-28T08:20:34.033
> 
> 标签：jquery, checkbox

我有一些div。它们中的每一个都包含两个复选框（每个复选框位于同一类“class3”的 div 中）。我希望当用户选中第一个复选框时，第二个复选框被选中并禁用。我试过了：

```
 $('.class1').live('click', function () {
var n = $(this).siblings('input:checkbox');
if ($(this).attr('checked')) {
    n.attr('disabled', true); 
} else {
    n.attr('disabled',false);
} 
return false;
}); 
```

以这种方式启用了两个复选框，但是当我单击第一个复选框时，不会出现检查并且没有任何反应。

```
 <div class="elements">
 <div class="class3">
 <input class="class1" type="checkbox" value="1" name="first" id="first" />
 </div>
 <div class="class3">
 <input class="class2" type="checkbox" value="1" name="second" id="second" />
 </div>
 </div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-28T08:45:10.637

您可以使用以下方法将事件附加到 class1 div 的每个第一个复选框：

```
 $('.class1 input:first-child').live('change', function () { 
```

（我使用 change 而不是 click，因为它更通用。）仅附加第一个元素而不是整个 div 确保您只在需要时做出反应。

进一步禁用您已经使用它应该可以工作，但只有当您的第一个复选框没有嵌套在另一个元素（例如段落）中时，兄弟姐妹才会工作

小提琴示例：http: [//jsfiddle.net/Zqz63/](http://jsfiddle.net/Zqz63/)

**编辑** 在您更新的帖子中看到 html，兄弟姐妹确实不起作用，您可以在父链中查找 .elements div 并向下查找复选框（除了选中的）

```
 var n = $(this).parents('.elements').find('input:checkbox').not(this); 
```

jsfiddle 没有响应，因此我将示例移至 jsbin： http: [//jsbin.com/ahemet/3/edit](http://jsbin.com/ahemet/3/edit) （注意，在当前的 jsbin 版本中，没有正确选择仅第一个复选框，因此事件将也会在第二个复选框上触发，但我认为这超出了您的问题范围）

**编辑 2** 使用 class1 始终是第一个复选框和 class2 始终是第二个的信息：

```
$('input:checkbox.class1').live('change', function () {

  var n = $(this).parents('.elements').first().find('input:checkbox.class2');

  if ($(this).attr('checked')) {
      n.attr('checked',true);
      n.attr('disabled', true);
  } else {
      n.attr('disabled',false);
  }
}); 
```

测试：http: [//jsbin.com/ahemet/4/edit](http://jsbin.com/ahemet/4/edit)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-28T08:23:38.620

当您`return false;`阻止该事件的默认行为发生时；在单击复选框的情况下，默认行为是选中复选框。只需删除它，`return false;`因为它对您没有任何好处。

此外，`disabled`是元素的**属性**，因此您应该使用`.prop()`函数来设置/修改其值，而不是`.attr()`函数。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-28T08:23:44.377

```
$('.class1').live('click', function () {
    var n = $(this).siblings('input:checkbox');
    if ($(this).attr('checked')) {
        n.prop('disabled', true); 
    } else {
        n.prop('disabled', false);
    } 
}); 
```

# lotus-notes - 从 SVN 更新后 ls 中的语法错误

> ID：11240681
> 
> 赞同：1
> 
> 时间：2012-06-28T08:21:19.200
> 
> 标签：lotus-notes, xpages

我们正在使用 SVN 对笔记数据库中的代码进行版本控制。这些数据库包含很多 ls/js/java 代码。对于 js/java 代码，它工作正常。

问题在于 ls 库。它们至少有一百个，它们是相互关联的。有时，如果开发人员向 SVN 提交了 ls 代码更改，然后其他人尝试更新他的数据库副本，他会在 notes 客户端中遇到很多语法错误。更改后的库甚至无法在旧编辑器中正确打开，并且 ls 代码存储在奇怪地名为 $ScriptLib_error 的字段中。

在开发人员删除与磁盘项目的关联并将数据库连接回它之后，这个问题就消失了。

有没有其他人遇到过这个问题？有没有可行的解决方案？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-12T15:06:37.280

您使用的是什么版本的 Designer？在 853 Fix Pack 2 中添加了许多针对源代码控制问题的修复（特别是在 LS 脚本库导入方面）。如果您不在该修复包中，请升级到它。

# xml - BizTalk 插入 Oracle 数据库 - PL/SQL：ORA-00984：此处不允许列 ORA

> ID：11240687
> 
> 赞同：1
> 
> 时间：2012-06-28T08:22:02.413
> 
> 标签：xml, oracle, biztalk

我正在尝试从文件插入到 oracle 数据库。我主要遵循我在[这里](http://biztalk2010changes.blogspot.be/2011/04/insert-update-delete-select-operation.html)找到的教程。我已经做了一些小的更改以使其仅成为插入，但是插入发送的端口现在拾取文件但给出了以下错误。

这里可能有什么问题，或者有没有办法检查这个接口创建了什么查询？

* * *

**输入文件**

```
<ns0:Insert xmlns:ns0="http://Microsoft.LobServices.OracleDB/2007/03/DCSDBA/Table/V_SIZE">
  <ns0:RECORDSET>
    <ns0:V_SIZERECORDINSERT>
      <ns0:V_SIZE InlineValue="InlineValue_0">V_SIZE_0</ns0:V_SIZE>
      <ns0:SEQ_NR InlineValue="InlineValue_0">10.4</ns0:SEQ_NR>
    </ns0:V_SIZERECORDINSERT>
  </ns0:RECORDSET>
</ns0:Insert> 
```

* * *

**错误信息**

```
The adapter failed to transmit message going to send port  

"WcfSendPort_OracleDBBinding_DCSDBA_Table_V_SIZE_Custom" with URL 
"oracledb://redprairie:1521/TST/Dedicated?PollingId=Test". 

It will be retransmitted after the retry interval specified for this Send Port.  

Details:"Microsoft.ServiceModel.Channels.Common.TargetSystemException: 

ORA-06550: line 2, column 78:
PL/SQL: ORA-00984: column not allowed here
ORA-06550: line 2, column 1:

PL/SQL: SQL Statement ignored --->  
Oracle.DataAccess.Client.OracleException: ORA-06550: line 2, column 78:
PL/SQL: ORA-00984: column not allowed here
ORA-06550: line 2, column 1:
PL/SQL: SQL Statement ignored
   at Oracle.DataAccess.Client.OracleException.HandleErrorHelper(Int32 errCode, OracleConnection conn, IntPtr opsErrCtx, OpoSqlValCtx* pOpoSqlValCtx, Object src, String procedure, Boolean bCheck)
   at Oracle.DataAccess.Client.OracleException.HandleError(Int32 errCode, OracleConnection conn, String procedure, IntPtr opsErrCtx, OpoSqlValCtx* pOpoSqlValCtx, Object src, Boolean bCheck)
   at Oracle.DataAccess.Client.OracleCommand.ExecuteNonQuery()
   at Microsoft.Adapters.OracleCommon.OracleCommonUtils.ExecuteNonQuery(OracleCommand command, OracleCommonExecutionHelper executionHelper)
   --- End of inner exception stack trace --- 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-28T08:32:06.063

你不应该使用内联值。看看使用内联[条件](http://www.biztalkgurus.com/biztalk_server/biztalk_blogs/b/biztalksyn/archive/2008/10/20/when-to-use-inlinevalue-attribute-in-insert-in-oracle-ebs-adapter.aspx)

```
<ns0:Insert xmlns:ns0="http://Microsoft.LobServices.OracleDB/2007/03/DCSDBA/Table/V_SIZE">
  <ns0:RECORDSET>
    <ns0:V_SIZERECORDINSERT>
      <ns0:V_SIZE>V_SIZE_0</ns0:V_SIZE>
      <ns0:SEQ_NR>10.4</ns0:SEQ_NR>
    </ns0:V_SIZERECORDINSERT>
  </ns0:RECORDSET>
</ns0:Insert> 
```

# java - URL中的正则表达式关键字匹配

> ID：11240693
> 
> 赞同：0
> 
> 时间：2012-06-28T08:22:25.487
> 
> 标签：java, regex

我有一个大文件（20 mb）中的 URL 列表，并且我有一组关键字。如果关键字集与 url 匹配，那么我想提取 URL。

示例：keyword="contact" URL：[http ://www.365media.com/offices-and-contact.html](http://www.365media.com/offices-and-contact.html)

我需要一个正则表达式来匹配关键字与我的 URL 列表。

我的Java代码：

```
public class FileRead {

    public static void main(String[] ags) throws FileNotFoundException
    {
        Scanner in=new Scanner(new File("D:\\Log\\Links.txt"));
        String input;
        String[] reg=new String[]{".*About.*",".*Available.*",".*Author.*",".*Blog.*",".*Business.*",
    ".*Career.*",".*category.*",".*City.*",".*Company.*",".*Contain.*",".*Contact.*",".*Download.*",
    ".*Email.*"};
        while(in.hasNext())
        {
            input=in.nextLine();
            //for(String s:reg)
                patternFind(input,".*email.*");
        }

    }
    public static void patternFind(String input,String reg)
    {
        Pattern p=Pattern.compile(reg);
            Matcher m=p.matcher(input);
            while(m.find())
                System.out.println(m.group());
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-28T08:30:42.033

如果您只想匹配当前行中是否存在任何关键字，您可以简单地使用

```
for (String s: reg) {
  if (input.contains(s)) {
    // do something
  }
} 
```

而不是 patternFind(input,". *email.* ");

无论如何，一个等价于匹配任何单词的正则表达式将是：

```
.*(About|Available|Author|And|So|On...).* 
```

我不确定哪个更快。String.contains() 更简单，一个 Pattern 是预编译的，它*可以*在多次应用时表现得更好，就像这里的情况一样。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-28T08:31:41.100

为什么你不能这样做：

```
For all line (URLs) in the file check if some of your pattern works on the URL 
```

代码很明显

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-28T08:40:51.920

我将给出一个通用的解决方案。我认为你应该能够使这个想法适应你的代码。

假设您在文件中有一个裸关键字列表并将其读入 a `String[]`，或者您对 a 中的关键字列表进行硬编码`String[]`，例如：

```
String keywords[] = {"about", "available", "email"}; 
```

对于所有关键字，使用[`Pattern.quote()`](http://docs.oracle.com/javase/6/docs/api/java/util/regex/Pattern.html#quote%28java.lang.String%29)确保它们被识别为文字字符串。然后用条形字符`|`作为分隔符 (OR) 连接关键字，并用括号括住所有内容`()`。最终的结果将是这样的。或者，您可以自己查看关键字并编写不带引号的正则表达式`\Q`and `\E`。`Pattern.quote()`如果您确定关键字不包含正则表达式，您也可以忽略该步骤。

```
(\Qabout\E|\Qavailable\E|\Qemail\E) 
```

添加`.*`到 2 结束以使其匹配 URL 的其余部分，加上`(?i)`开头以启用不区分大小写的匹配。

```
(?i).*(\Qabout\E|\Qavailable\E|\Qemail\E).* 
```

然后你可以编译`Pattern`并调用`matcher(inputString).matches()`每一行输入来检查URL是否有关键字。

如果关键字在 URL 中过于常见，例如“com”、“net”、“www”，并且您希望搜索更细粒度，则必须进行更多调整。

# java - 如何保存用户在下拉列表中键入的值并在 org.eclipse.swt.widgets 的可编辑组合中使用它？

> ID：11240696
> 
> 赞同：1
> 
> 时间：2012-06-28T08:22:35.783
> 
> 标签：java, eclipse, eclipse-plugin, swt

我创建了一个`org.eclipse.swt.widgets.Combo`可编辑的字段。

`tableCombo = new Combo(cmposite, SWT.NONE);`

我在创建小部件时存储了一些值。我`combo`希望如果用户在其中写入一些值可能是字符串`combo`，那么它将保存`combo`下拉列表并且用户应该能够选择给定的输入。我该怎么做去做？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-28T12:28:37.653

只需将监听器添加到调用[`Combo.add(String)`](http://help.eclipse.org/indigo/topic/org.eclipse.platform.doc.isv/reference/api/org/eclipse/swt/widgets/Combo.html#add%28java.lang.String%29). 请参阅[此示例](http://git.eclipse.org/c/platform/eclipse.platform.swt.git/tree/examples/org.eclipse.swt.snippets/src/org/eclipse/swt/snippets/Snippet289.java)。

# sql - ROW_NUMBER() 函数返回 varchar 值而不是 int

> ID：11240706
> 
> 赞同：1
> 
> 时间：2012-06-28T08:23:24.843
> 
> 标签：sql, sql-server, type-conversion, row-number

我正在使用`ROW_NUMBER()`SQL Server 中的函数来创建一个名为`RowNumber`.

但是当我稍后在同一个查询中引用`WHERE`语句中的这个新字段时，我得到了这个错误，即使该字段应该是一个整数：

> 将 varchar 值“RowNumber”转换为数据类型 int 时转换失败

这是我的查询：

```
SELECT 
   ROW_NUMBER() OVER(PARTITION BY c.Node_base ORDER BY sum(c.Score) DESC) AS "RowNumber",  
   c.Node_base, c.Node_forslag, sum(Score)
FROM         
   t_input as c
WHERE 'RowNumber' < 11
GROUP BY c.Node_base, c.Node_forslag
ORDER BY c.Node_base desc 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-28T08:26:44.213

您不能从`SELECT`子句中的`WHERE`子句引用计算列 - 即使可以，单引号也会引入字符串文字，而不是列引用。使用 CTE 或子查询。

```
;With Sums as (
    SELECT c.Node_base, c.Node_forslag,SUM(c.Score) as TotScore
    FROM t_input as c
    GROUP BY c.Node_base, c.Node_forslag
), NumberedRows as (
   SELECT *,ROW_NUMBER() OVER(PARTITION BY Node_base ORDER BY TotScore DESC) AS RowNumber
   FROM Sums
)
select * from NumberedRows
WHERE RowNumber <11
order by Node_base desc 
```

根本不需要引用名称`RowNumber`- 它不是保留字，并且不包含特殊字符。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-28T08:24:55.250

使用`[RowNumber]`而不是`"RowNumber"`.

当[SET QUOTED_IDENTIFIER](http://msdn.microsoft.com/en-us/library/ms174393.aspx)为 ON（默认）时，所有由双引号分隔的字符串都被解释为对象标识符。

您还必须使用子查询`row_number()`在`where`子句中引用，例如：

```
select  ...
from    (
        SELECT  ROW_NUMBER() OVER(PARTITION BY Node_base 
                    ORDER BY sum(Score) DESC) AS RowNumber
        ,       ...
        from    t_input
        ) as SubQueryAlias
where   RowNumber < 11 
```

或者在你的情况下，我认为你可以使用`top`：

```
select  top 11 Node_base
,       Node_forslag
,       sum(Score)
from    t_input
group by
        Node_base
,       Node_forslag
order by
        sum(Score) desc 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-28T08:26:13.793

在声明中

```
WHERE 'RowNumber' <11 
```

您将字符串文字“RowNumber”与数字 11 进行比较。

只需删除引号：

```
WHERE RowNumber <11 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-03T04:48:19.900

选择 row_number() over (order by c.Node_base) as RowNumber, c.Node_base, c.Node_forslag, sum(Score)

从 t_input 作为 c

WHERE '行号' < 11

按 c.Node_base、c.Node_forslag 分组

ORDER BY c.Node_base desc

# javascript - Mootools - 如何在事件中引用本地“this”和“this”类？

> ID：11240709
> 
> 赞同：2
> 
> 时间：2012-06-28T08:23:31.723
> 
> 标签：javascript, mootools

有 10 个*li*元素，其中 5 个里面有*一个*元素。我想使用 Mootools在*li元素上添加一个事件。*

一个类的变量和方法很少，包括*li*元素的事件，我的问题来自这里。请参阅下面的*li活动，*

```
li.addEvents({
    mouseover: function(e){
        console.log(this.id + ' / ' + this.classVar);
    }.bind(this)
}); 
```

如果我需要引用*li*本身和一个类变量，因为每个*li*都有唯一的*id*并且*classVar*也有信息。但问题是，如果我对事件使用*bind(this)*，*this.id*将不起作用，或者如果不使用它，*this.classVar' 将不起作用。

如果我使用*e.target.id*而不是*this.id ，它会返回正确**的*id 如果*li*没有元素。否则*e.target*指的是*a*元素。

 ***有人可以帮我吗？提前谢谢了

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-28T08:26:42.130

最简单的方法是使用`self`or`me`解决方法，就像这样......

```
function myClass()
{
    var self = this;
    this.classVar = 'foo';

    // some other code

    li.addEvents({
        mouseover: function(e){
            console.log(this.id + ' / ' + self.classVar);
        }
    });
} 
```***

# highcharts - 在 Highcharts 中悬停时为单个标记着色

> ID：11240714
> 
> 赞同：4
> 
> 时间：2012-06-28T08:23:44.470
> 
> 标签：highcharts, marker

我设法为各个标记设置标记颜色

```
{
   y: 5,
   marker: {
    fillColor: '#222'
   }
} 
```

但是在悬停时它会变成默认颜色，是否可以设置此值？

我犯了[selectionMarkerFill](http://www.highcharts.com/ref/#chart--selectionMarkerFill)选项，但这是图表的子选项，在我的代码中添加到标记选项时无效。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-28T09:14:52.230

这是未经测试的，因为 jsFiddle 现在没有回应我，但我会看看

[http://www.highcharts.com/ref/#plotOptions-series-states-hover-marker--fillColor](http://www.highcharts.com/ref/#plotOptions-series-states-hover-marker--fillColor)

这似乎是悬停标记的选项。

根据 janb 的评论进行编辑：

```
 {
    y: 5, 
    marker: { 
        fillColor: '#222', 
        states: { 
            hover: { 
                fillColor: '#222' 
            }
         }
    }
} 
```

# git - git push 和 git pull 有什么区别？

> ID：11240715
> 
> 赞同：61
> 
> 时间：2012-06-28T08:23:44.950
> 
> 标签：git, workflow, repository

我今天偶然发现了一些奇怪的东西。我请暑期工作的同事帮我为我的代码设置一个新的远程 git 存储库，但我对他做了什么以及我想做什么感到很困惑。我让他发送他的配置以便能够看到他的遥控器的路径，并发现他没有遥控器。当我问他这个问题时，他这样解释他的工作流程：

1.  在本地更改某些内容
2.  犯罪
3.  移动到远程目录
4.  git 拉 c:\localdir

因此，他没有推送到远程仓库，而是不断地从本地仓库拉到我们服务器上的仓库。有点倒退。当我就此与他对质时，他问我有什么不同，我无法真正回答他，但我认为有什么对不对？

**所以我对你们所有人的问题是：推送到遥控器和从遥控器拉出有什么区别？**

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-06-28T08:32:43.490

推送到远程：将您必须的一些提交发送到另一个 git 存储库。git repo 被视为“远程”，但它可以是硬盘驱动器另一个文件夹中的 repo。从远程拉取：从远程仓库获取一些提交并将它们合并到您当前的 HEAD 中（您当前的仓库结帐）

您的同事可能使用 pull 而不是 push，因为您的存储库可能不可用（没有运行 git 守护程序，或 gitweb 或 ssh 服务器），但他可以从您的计算机上使用。由于它是一个服务器，他可能不想暴露可能成为攻击媒介的 git 守护进程/服务。

但是，如果您的存储库是共享/可用的，他将能够做到：

1.  在本地改变一些东西
2.  犯罪
3.  推送到您的存储库

* * *

## 回答 #2

> 赞同：19
> 
> 时间：2012-06-28T08:43:55.977

在我看来，您可以让用户将他们的提交推送到某个被认为是“主”的存储库，或者让他们将拉取请求发送给有权修改所述“主”的单个用户。

例如，Github 不会让非贡献者推送到存储库，但会允许他们发送拉取请求，以便贡献者可以集成他们的更改。

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2021-03-29T08:52:33.880

# TL;博士

Push、fetch 和 pull 让两个不同的 Git 相互交谈。在一种特殊情况下——包括作为问题基础的那个`c:\localdir`——两个不同的 Git 存储库位于*同一台计算机上*，但通常，这两个不同的存储库可以位于*任何两台不同的计算机上*。

*   Push：发送提交并要求*他们*更新他们的*分支*。这要求事情最终是正确的。这*不能*结合并行开发。

*   Pull: runs `git fetch`，获取提交并让您的 Git 更新您的*远程跟踪名称*，然后运行第二个 Git 命令来更新您的分支。第二条*命令*可以*结合*并行开发。

当存储库位于不同的计算机上时，传输方向往往更为重要，因为您无法轻松切换观点。

# 长

除了[公认的答案](https://stackoverflow.com/a/11240847/1256452)`git pull`（就目前而言足够准确）之外，和之间还有一些其他关键区别`git push`。我们需要从这个开始：

### push 的反义词是 fetch

Git在这里不小心使用了错误的动词。在 Mercurial 中，我们必须`hg pull`从另一个存储库*获取*`hg push`提交，并将提交*发送*到另一个存储库。但是 Git`git pull`做了*两*件事：（1）*获取*提交；(2)*签出或合并*这些提交。然后 Git 不得不将这两个步骤分开，因为有时您不想立即执行第 2 步。

这意味着在 Git 中，实际相反的`git push`不是`git pull`，而是`git fetch`。`git pull`命令的意思是：

1.  运行`git fetch`；然后
2.  运行第二个 Git 命令。

第二个命令是事情变得最复杂的地方。如果我们可以省略它——如果我们*只*处理fetch 和 push——它会更简单。我们可以稍后添加第二个命令。

### `git fetch`总是安全的，但`git push`不是

我们在这里遇到的下一个问题很简单，但是如果您还没有“得到它”，那么它会非常令人困惑，直到您突然“得到它”并且它是有道理的。

当我们拥有一个 Git 存储库时，我们实际上拥有三样东西：

1.  我们有一个*提交*数据库（和其他对象，但提交是有趣的部分）。提交是编号的，但数字看起来是随机的。它们不是简单的计数：commit #1 后面没有 commit #2，实际上一开始就没有“commit #1”。这些数字是*哈希 ID*，它们看起来像随机涂鸦：[`84d06cdc06389ae7c462434cb7b1db0980f63860`](https://github.com/git/git/commit/84d06cdc06389ae7c462434cb7b1db0980f63860)例如。

    *提交中*的内容是完全只读的。每个提交就像*每个文件*的完整快照。这对于存档非常有用，对于完成任何新工作毫无用处。因此，在普通（非裸）存储库中，我们还有：

2.  一个普通的日常存储库有一个我们完成工作的地方。我们不会在这里详细介绍这一点，但这对于 fetch-vs-push 很重要并且很重要。 *一些*存储库故意*省略了这个工作区*。这些被称为*裸*存储库，我们通常在服务器上找到它们。

3.  最后，每个存储库都有一个*名称*数据库，包括*分支名称*。这些名称允许您的 Git 找到您的提交。他们的意思是你不必记住`84d06cdblahblahwhatever`。

当你运行时`git fetch`，你的 Git 会调用其他 Git，通常是通过网络电话在一个`https://`或`ssh://`地址。你*可以*`c:\localdir`用 a or或其他什么来调用其他 Git `/mnt/some/path`。在这种特殊情况下，您的计算机可能会与自己对话——但通常它会与另一*台计算机*对话，它拥有自己完全独立的 Git 存储库。其他 Git 存储库也可以拥有所有这三个。如果它在服务器上，它可能是一个裸存储库，并且没有工作区。然而，它总是有自己的提交数据库和自己的名称数据库。

这意味着*你的*Git 有*你的*提交（也许还有他们的）和*你的*分支名称。 *他们的*Git 有*他们的*提交（也许你也有）和*他们的*分支名称。使用`git fetch`，您可以让您的 Git 调用他们的 Git 并获取他们的提交（所以现在您拥有自己的和他们的）；使用`git push`，你让你的 Git 调用他们的 Git，并给他们你的提交（所以现在他们有他们的和你的）。

**到目前为止，fetch 和 push 之间的主要区别在于数据传输的*方向*。** 使用 fetch*可以获得*提交，使用 push*可以*提交提交。 **但差异并不止于此。**

完成`git fetch`后，您的 Git 知道所有提交。这很好——但我们刚刚注意到Git 用来*查找提交的**提交编号*是看起来很丑陋的乱七八糟的乱七八糟的东西。所以要做的是获取他们所有的*分支名称*——他们用来查找提交的名称——并将它们复制到您自己的 Git 中，但*将它们更改*为*远程跟踪名称*。例如，它们变成了你的。如果他们有，您的 Git 会创建或更新您的，依此类推。这意味着**永远不要碰你自己的任何分支**，这就是为什么它总是安全的。你要么得到新的提交，要么没有。你永远不会*输**`git fetch`***`main``origin/main``develop``origin/develop`**`git fetch`***您自己的任何提交。然后，您的 Git 会在必要时更新您的远程跟踪名称。然后就完成了。这就是整个正常`git fetch`操作：如果合适，引入一些提交，如果合适，更新一些非分支名称。¹*****

 ***的最后一部分`git push`，就在*它*完成之前，包含一个请求。你的 Git 要求他们的 Git 取悦，如果可以的话，*改变*他们的一些名字。例如，如果你运行`git push origin develop`，你的 Git 会发送你有的任何提交，他们没有，他们需要完成操作，然后它会发送一个礼貌的请求：*如果可以，请让你的分支名称`develop`找到 commit ________*。*您的 Git 使用您的*分支名称`develop`找到的提交填充此空白。

**这里的主要区别是`git fetch`更新您的*远程跟踪名称*但`git push`要求他们更新他们的*分支*名称。** 如果他们正在进行开发，他们可能会认为更新他们的*分支*名称是不合适的。

* * *

¹您可以通过多种方式运行`git fetch`并告诉它更新您自己的分支名称。这不是偶然发生的；你必须*让*Git 去做。你不应该让 Git 去做。如果你是 Git Master，这条规则就变成了：你*可能*不应该让 Git 去做。

* * *

# 第二条命令

现在是时候查看`git pull`调用的第二个命令了。嗯，时间*差不多*了。首先我们应该看看 Git 如何找到提交。

我之前提到过，Git 使用分支名称查找提交。这是真的，但不是完整的画面。我还提到*了远程跟踪名称*。Git 可以找到具有远程跟踪名称的提交。这更完整，但仍然不是真正的完整。下面是 Git 的一整套技巧：

*   如果你给它原始哈希 ID，Git 总能找到一个提交。好吧，如果它实际上*在您的存储库中**，*那么您可能需要先使用它来获取它。如果 Git*无法*从哈希 ID 中找到提交，那只是意味着它还没有在您的存储库中。只需使用从某些具有它的 Git 中获取它*，*然后就可以了。*`git fetch`*`git fetch`**

****   Git 可以从名称中找到提交。各种名称都可以在这里使用：分支名称`main`和`develop`，远程跟踪名称`origin/main`和`origin/develop`，标签名称`v1.2`，甚至时髦的特殊用途名称。Git 有很多你不经常看到的东西。将名称转换为哈希 ID 的规则在[gitrevisions 文档](https://git-scm.com/docs/gitrevisions)中进行了描述。

    *   **Git 可以从另一个提交中找到一个提交。** 这导致了[gitrevisions](https://git-scm.com/docs/gitrevisions)中的许多规则。这句话在这里用粗体表示，因为它非常重要。

    *   最后，Git 可以通过各种搜索操作找到提交，也在[gitrevisions](https://git-scm.com/docs/gitrevisions)中进行了描述。*** 

 ***[gitrevisions 里面](https://git-scm.com/docs/gitrevisions)有很多东西，你不需要记住所有的东西。请记住，有很多方法可以找到提交。使用`git log`，然后剪切和粘贴哈希 ID 是一种很好的方法，但有时您可能想尝试各种快捷方式。但是，请记住另外一件事：**`git log`通过使用提交来查找提交来查找提交**！

每个提交存储两件事：它有所有文件的完整快照，正如我们前面提到的，但它*也*有*元数据：*关于提交本身的信息。例如，这包括提交人的姓名和电子邮件地址。它还包括另一个姓名和电子邮件地址（“提交者”与“作者”），以及两个日期和时间戳。它在这个元数据中有很多东西，Git 本身的关键是它有在这个提交*之前*提交的原始哈希 ID 。

这一切都意味着，在 Git 中，提交形成了一个向后看的链。合并提交存储了两个或多个先前的提交哈希 ID，因此从合并中，我们可以沿着*两条*链倒退，甚至可能不止两条。在任何非空存储库中，至少还有一个*根*提交，它不会向后指向：这是历史结束或开始的地方，具体取决于您如何看待它。但是大多数提交只存储一个哈希 ID，给我们一个简单的链：

```
... <-F <-G <-H 
```

如果`H`here 代表某个链中*最后一次*提交的哈希 ID，并且如果我们有某种方法可以*找到*commit `H`，我们也可以找到 commit `G`。那是因为 commit`H`存储了之前 commit 的原始哈希 ID `G`。所以，从`G`中，我们可以找到 commit `F`，因为`G`存储了 的哈希 ID `F`。 `F`当然还存储了一个哈希 ID，等等——所以通过从 开始`H`，然后向后工作，一次提交一个，我们可以找到所有以 . 结尾的提交`H`。

Git 中的*分支名称*只记录最后一次提交的哈希 ID。我们说分支名称*指向*最后一个提交，然后最后一个提交指向倒数第二个提交，它又指向一个更早的提交，依此类推。

### 并行开发

假设我们从某个中央服务器（例如 GitHub）克隆一些存储库。我们得到了大量的提交。我们的`git clone`操作实际上是通过创建一个新的空存储库，然后复制他们*所有*的提交，但*不复制他们的分支名称*。然后，在用提交填充我们存储库的提交数据库并为其*分支名称创建**远程跟踪*名称之后，我们的 Git 会创建*一个*新的分支名称。

 **我们得到的分支名称是我们用`git clone`'`-b`选项选择的。如果我们不选择一个，我们得到的名字就是*他们的*Git 推荐的名字。这些天通常是这样`main`。有时这是他们唯一的分支名称。如果是这样，我们将获得一系列提交，以及一个远程跟踪名称`origin/main`：

```
...--F--G--H   <-- origin/main 
```

然后我们的 Git 将创建我们自己的以`main`匹配他们的`main`（然后是我们的新的）：`git checkout``git switch``main`

```
...--F--G--H   <-- main (HEAD), origin/main 
```

我们现在可以工作并进行新的提交。无论*我们做出什么**新的*提交，他们都会得到新的、普遍唯一的哈希 ID。*让我们在我们的*:上做两个新的提交： **`main`**

 **```
 I--J   <-- main (HEAD)
            /
...--F--G--H   <-- origin/main 
```

现在让我们假设，无论如何，*他们的*Git 已经将两个新的提交添加到*他们的* `main`. 这些新提交将获得新的通用唯一哈希 ID。当我们运行时`git fetch origin`，我们会选择新的提交：

```
 I--J   <-- main (HEAD)
            /
...--F--G--H
            \
             K--L   <-- origin/main 
```

**注意*我们的*工作和*他们的*工作是如何不同的。** 当有并行开发时会发生这种情况。当*没有并行开发时**不会*发生这种情况：如果他们*没有*获得两个新的提交，我们仍然会有我们的——我们对他们的记忆——指向 commit 。我们的新提交添加到.**`origin/main``main``H``I-J``H`**

 **### 如果我们没有并行开发，我们`git push`现在可能可以

假设我们*没有*任何并行开发。我们现在运行：

```
git push origin main 
```

将我们的新`I-J`提交发送给他们，并要求他们将*他们* `main`的指向设置为 commit `J`。如果他们服从，他们会得到：

```
...--F--G--H--I--J   <-- main 
```

（请注意，*他们*没有`origin/main`，我们不在乎他们`HEAD`是什么，而不是我已经告诉过你我们`HEAD`的内容）。

### 如果我们确实有并行开发，这是一个问题

如果他们有：

```
...--F--G--H--K--L   <-- main 
```

当我们运行时，在他们的存储库中`git push`，我们将向他们发送*我们的* `I-J`. 但是我们的 commit`I`连接回 commit `H`。然后，我们的 Git 会要求他们设置*他们* `main`的指向 commit `J`：

```
 I--J   <-- (polite-request: set main to point here)
            /
...--F--G--H--K--L   <-- main 
```

如果他们*服从*这个要求，他们将*失去*他们的`K-L`。所以他们会*拒绝*这个请求。我们将看到的具体错误是声称这*不是快进*。

有可能，根据权限，²强迫他们无论如何都要服从。但是，正如脚注 1 中一样，这不是您应该做的事情，至少在您真正理解“丢失”提交的概念之前不要这样做。

* * *

² Git*作为分布式*没有这种权限检查，但是大多数托管服务，例如 GitHub，都添加了它。如果您设置自己的托管服务，您也应该考虑添加它的方法。

* * *

### 面对并行开发，我们需要一种*结合工作的方式*

让我们假设，无论以何种方式，我们发现自己处于这种情况：

```
 I--J   <-- main (HEAD)
            /
...--F--G--H
            \
             K--L   <-- origin/main 
```

我们现在需要的是一种*将我们的工作*（我们为提交提交所做的工作）`I`与*他们的*工作（无论他们是谁）结合起来的方法：他们为提交提交所做的工作。`J`*`K-L`*

 *Git 有很多组合工作的方法，但我们不会在这里详细介绍。执行此操作的两种主要方法是 with`git merge`和 with `git rebase`。因此，在`git fetch`导致这种分叉之后——我们和他们都有*新*的提交——我们将需要第二个 Git 命令，可能是`git merge`或`git rebase`。

第二个命令的*正确选择*部分是见仁见智的问题。这里没有一个普遍正确的选择。但这是什么`git pull`：

*   你提前选择了一个选项，甚至在你看到你是否有这种“需要组合工作”作为`git fetch`你即将运行的结果之前。请注意，您尚未运行 this `git fetch`，即使您现在正在做出此决定。

*   然后，在决定之后，您可以`git pull`使用一个或两个选项运行 a，说明如何处理此问题，或者使用配置设置说明如何处理此问题，或者根本没有选项，这意味着*如果需要，请**使用`git merge`*。

您`git pull`现在运行`git fetch`. 这将获得他们拥有的任何您没有的新提交，并更新您的远程跟踪名称。³ 然后查看是否需要进行特殊的第二次联合作业。如果是这样，它将使用它来组合工作。如果没有，它只会对最新的提交执行`git checkout`or ，同时还会将您当前的分支名称向前移动。⁴`git switch`

* * *

³在非常过时的 Git 版本（早于 1.8.4）中，`git pull` *不会*更新远程跟踪名称。如果您遇到这些古老的 Git 版本之一，请注意这一点。

⁴这里有两点需要注意：

*   Git 称之为*快进合并*。这实际上不是一个*合并*，所以这是一个糟糕的名字。（Mercurial 只是将其称为*更新*。）从 Git 2.0 开始，您可以告诉*只*`git pull`执行快进操作：如果需要工作组合，将执行提取，但随后会因错误而停止。这可能是从一开始就应该做的事情，也可能是最终会做的事情，但出于兼容性的原因，它今天不会这样做。*`git pull``git pull`*

     *如果您确实可以选择，并且如果您喜欢`git pull`，我建议您使用`git pull --ff-only`或配置`pull.ff`to `only`， with `git config pull.ff only`。（我个人倾向于只是运行`git fetch`，然后`git log`或者一些类似的操作来检查，然后`git merge --ff-only`手动运行，但是我的习惯在 Git 2.0 之前就已经定型了。）* 
**   该`git switch`命令是 Git 2.23 中的新命令。对于这种特殊情况，`git switch`两者之间没有真正的区别。`git checkout`添加新命令是因为 Git 人员发现它`git checkout`太*复杂*了——它有很多模式——而且它的一些模式具有破坏性。这种破坏有时甚至会影响经验丰富的 Git 用户。（这已得到修复：自 2.23 起，`git checkout`这些情况下的错误现在已解决。）为了使 Git 更加用户友好，`git checkout`将其拆分为两个单独的命令。使用新命令是个好主意，但旧命令仍然有效，因为 Git 必须长期兼容。* 

 ** * *

# 概括

Push 发送提交并要求*他们*更新他们的*分支*。这要求事情最终是正确的。这*不能*结合并行开发。

拉取提交并让您的 Git 更新您的*远程跟踪名称*，然后运行第二个 Git 命令来更新您的分支。第二条*命令*可以*结合*并行开发。

您可以通过使用代替来避免立即运行*第二个*命令。如果您想在决定如何使用它之前查看您正在处理的内容，这将非常有用。`git fetch``git pull`

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-06-28T08:27:38.507

没有，回购是彼此的副本，拉和推只是方向流。与您同事方法的不同之处在于他添加了第 4 个不需要的命令。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-06-28T08:28:32.217

是的，它正在倒退。

原则工作流程是：

1.  在本地改变一些东西
2.  犯罪
3.  推送到远程目录

不推送到远程的一个用例（另一个[由 Dolanor 解释](https://stackoverflow.com/a/11240847/520162)）是在远程上签出工作副本（即它不是裸仓库）。当他想要推送在远程盒子上签出的分支时（例如`master:master`），这不会成功，因为禁止推送到签出的分支。

在我看来，这是跳到远程机器并拉而不是从本地机器推送的唯一用例。**************

# jquery - jQuery 滚动顶部在 Chrome 和 IE 中不起作用我有这个 jQuery JS fiddle，它在 FF 13 中运行良好，但在 IE7/8/9 和 Chrome 中没有。http://jsfiddle.net/kj9p4/114/ 基本上，我想输入一个文本框并滚动到列表中的一个项目，该项目具有我刚刚键入的值。这是 HTML： 
<select size="3" &<="" h1="">ID：11240718 赞同：0 时间：2012-06-28T08:23:54.750 标签：jquery, select, scroll, scrolltop 回答 #1 赞同：0 时间：2012-06-28T08:38:36.557 “基本上，我想输入一个文本框并滚动到列表中的一个项目，该项目具有我刚刚键入的值”下面的代码将满足您的需要 $(document).ready(function (){ $("#t").keyup(function () { scrollToElement(); }); }); function scrollToElement(){ var s = $('select'); var t =$('#t').val(); var option = t - 1; s.find('option:eq('+option+')').attr('selected','selected'); }</select>

# html - 将鼠标悬停在菜单元素上时更改元素的布局

> ID：11240721
> 
> 赞同：2
> 
> 时间：2012-06-28T08:24:16.360
> 
> 标签：html, css, coldfusion

我创建了一个菜单。但我没有使用列表，而是使用了几个 div 和 span，如下所示：

```
<div id="forms">                
    <span class="formsLi">Einloggen<cfinclude template="login.cfm" /></span>        
    <span class="formsLi">Registrieren<cfinclude template="forms/register.cfm" /></span>
</div> 
```

使用“cfinclude”，我插入了两个表单，它们都在一个 div 中，具有“格式”类。这是我的菜单的 css 文件：

```
#forms{
    background-color: silver;,
    border: 1px solid black;
    margin: 0;
    padding: 0.8em;

}

#forms .formsLi{
    background-color: orange;
    margin-left: 10px;
    padding: 10px;

}

#forms .formsLi .format{
    border: 1px solid black;
    display: none;
    float: left;
}

#forms .formsLi:hover{
    background-color: black;
    color: white;
}

#forms .formsLi:hover #forms .formsLi .format{
    display: block;

} 
```

将鼠标悬停在“formsLi”元素之一上时，我想更改包含的表单的显示。悬停确实有效，但最后一个 css 规则不会改变 div 的显示。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-28T08:28:40.647

您正在重复您的选择器。用这个：

```
#forms .formsLi:hover .format{
    display: block;
} 
```

# javascript - 使用 store.load 下载文件（Excel 文件）？(ExtJS 4.1)

> ID：11240722
> 
> 赞同：0
> 
> 时间：2012-06-28T08:24:17.007
> 
> 标签：javascript, ajax, extjs, extjs4, extjs4.1

我需要使用窗口中的按钮从网格下载文件。为了发送过滤器参数，我使用 store.load 但它不会下载文件，但会尝试读取它。有什么解决办法吗？

```
store.load({
 params: {
  startExel: parseInt(Ext.getCmp('startE').getValue())
 }
}); 
```

startExel 是一个额外的参数，用于指示我要下载 Excel 文件。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-28T14:16:12.460

我认为通过简单的配置更改不可能做到这一点。因为商店是通过 AJAX 调用加载的。

这是给你的一个想法：

1.  返回一个`JSON`带有文件下载 url 的对象作为存储加载请求的响应。不是实际的文件内容。

    `{ success = false, url='...'}`

2.  在客户端处理存储加载失败，然后识别并提取返回的 url。您可能需要稍微调整阅读器配置。

3.  调用`window.open(url)`以启动文件下载。

从 SO看到这个[问题。](https://stackoverflow.com/questions/1066452/easiest-way-to-open-a-download-window-without-navigating-away-from-the-page)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-28T10:34:44.800

在服务器端返回文件时包含以下标头：

```
Content-disposition: attachment 
```

# iphone - 按字母顺序对 UItableview 中 Section 标题内的联系人进行排序

> ID：11240723
> 
> 赞同：0
> 
> 时间：2012-06-28T08:24:19.387
> 
> 标签：iphone, xcode, uitableview, sectionheader

我有一个按字母顺序将从地址簿中挑选的联系人排序到部分标题的问题。我可以在没有部分标题的情况下按字母顺序排列它们，但是如何根据联系人的姓名放置它们？我不想使用 NSDictionary，因为没有它我也可以进行排序。请查看以下代码：-

```
- (NSInteger)numberOfSectionsInTableView:(UITableView *)tableView {
    return [arrayForLastName count];
}

-(NSString *)tableView:(UITableView *)tableView titleForHeaderInSection:(NSInteger)section
{
    return [[alphabets sortedArrayUsingSelector:@selector(localizedCaseInsensitiveCompare:)] objectAtIndex:section];
}

- (NSArray *)sectionIndexTitlesForTableView:(UITableView *)tableView{
    return [NSArray arrayWithObjects:@"A",@"B",@"C",@"D",@"E",@"F",@"G",@"H",@"I",@"J",@"K",@"L",@"M",@"N",@"O",@"P",@"Q",@"R",@"S",@"T",@"U",@"V",@"W",@"X",@"Y",@"Z", nil];
}

-(NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section{    
    return [arrayForLastName count];
} 
```

任何帮助将不胜感激thanx :)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-28T08:54:55.367

You can achieve this in following way -

1.Create an index array that contains all the required index -

```
NSArray *indexArray = [NSArray arrayWithObjects:@"A",@"B",@"C",@"D",@"E",@"F",@"G",@"H",@"I",@"J",@"K",@"L",@"M",@"N",@"O",@"P",@"Q",@"R",@"S",@"T",@"U",@"V",@"W",@"X",@"Y",@"Z", nil]; 
```

2.For Each index you need to have an array that will display row for those sections. SO you can have a dictionary that contain an array corresponding to each index.

Check this tutorial, it will help you in implementing this- [http://www.icodeblog.com/2010/12/10/implementing-uitableview-sections-from-an-nsarray-of-nsdictionary-objects/](http://www.icodeblog.com/2010/12/10/implementing-uitableview-sections-from-an-nsarray-of-nsdictionary-objects/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-28T09:39:45.667

在表委托方法中尝试此代码。

```
 1)      - (NSInteger)numberOfSectionsInTableView:(UITableView *)tableView {

        return [dataArray1 count];
            } 
```

**返回表格视图中的部分编号。**

```
 2)        -(NSMutableArray *)selectedarray:(NSString *)countrynmae
         {
        NSString *strQuery=[NSString stringWithFormat:@" select * from Globle where       Country='%@'",countrynmae];
         NSMutableArray *dataarray=[Database executeQuery:strQuery];
        return dataarray;
           }

         - (NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section {
           NSDictionary *dict =[dataArray1 objectAtIndex:section];
           NSString *strcountryname=[dict objectForKey:@"Country"];
            NSMutableArray *arr6 = [self selectedarray:strcountryname ];
            return [arr6 count];
           } 
```

**返回特定部分的行数**

```
 3)             - (UIView *)tableView:(UITableView *)tableView viewForHeaderInSection:(NSInteger)section
            {
// create the parent view that will hold header Label
             UIView* customView = [[UIView alloc] initWithFrame:CGRectMake(0.0, 0.0, 300.0, 44.0)];
// create the button object
            UILabel * headerLabel = [[UILabel alloc] initWithFrame:CGRectZero];
           headerLabel.backgroundColor = [UIColor clearColor];
           headerLabel.opaque = NO;
           headerLabel.textColor = [UIColor whiteColor];

            headerLabel.font = [UIFont boldSystemFontOfSize:16];
            headerLabel.frame = CGRectMake(20.0, -14.0, 300.0, 30.0);    
            NSDictionary *dict =[dataArray1 objectAtIndex:section];
             headerLabel.text=[dict objectForKey:@"Country"];
             headerLabel.textColor=[UIColor redColor];

             [customView addSubview:headerLabel];
            return customView;
        } 
```

**设置节的标题名称**

```
 4)          - (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath 
```

{

```
 static NSString *CellIdentifier = @"Cell";
             UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier];
             if (cell == nil)
            {
              cell=[[[UITableViewCell alloc] initWithStyle:UITableViewCellStyleDefault     reuseIdentifier:CellIdentifier] autorelease];
    cell.textLabel.textColor=[UIColor whiteColor];
    cell.backgroundColor=[UIColor clearColor];
            }
             NSDictionary *dict =[dataArray1 objectAtIndex:indexPath.section];
             NSString *countryname = [dict objectForKey:@"Country"];
             NSString *strQuery = [NSString stringWithFormat:@"Select * from Globle where Country = '%@'",countryname];
             NSMutableArray *arr = [Database executeQuery:strQuery];
             NSDictionary *dict1 = [arr objectAtIndex:indexPath.row];
             cell.textLabel.text=[dict1 objectForKey:@"Name"];
             cell.textLabel.numberOfLines=1;
             cell.textLabel.textColor=[UIColor blackColor];
             cell.backgroundColor=[UIColor clearColor];
             cell.textLabel.textAlignment=UITextAlignmentCenter;
               NSString *strImage=[dict1 objectForKey:@"ImageName"];
              UIImageView *imageView1 = [[UIImageView alloc] init];
               UIImage *image1 = [[UIImage alloc] initWithContentsOfFile:
                   [[NSBundle mainBundle] pathForResource:strImage ofType:@"jpg"]];
             imageView1.image = image1;
             imageView1.frame = CGRectMake(6,2,50,42); // position it to the middle
            [cell.contentView addSubview:imageView1];
            return cell;
            [tbl reloadData];
        } 
```

**在合适的视图中返回单元格**

# php - 如果 (www-data) 无法访问所需的包，我如何让 PHP 编译 LaTeX 文档？

> ID：11240725
> 
> 赞同：6
> 
> 时间：2012-06-28T08:24:33.280
> 
> 标签：php, ubuntu, latex, pdflatex

我有一个 PHP 脚本，它使用以下代码编译 LaTeX 文档：

```
exec('cd /path/to/doc && /usr/bin/latexmk -pdf filename.tex'); 
```

这适用于我的一些 LaTeX 文档，但我的最新文档无法编译，查看日志显示：

```
!pdfTeX error: pdflatex (file ecrm1000): Font ecrm1000 at 600 not found
==> Fatal error occurred, no output PDF file produced! 
```

我发现这是 LaTeX 无法看到所需字体包的结果。当我在我的用户名下运行相同的编译命令时，文档会按应有的方式编译。所以我的问题是，我怎样才能让 PHP（作为 www-data 执行）来访问必要的 LaTeX 包？

我尝试使用以下方式在 www-data 帐户下安装所需的软件包：

```
sudo -u www-data sudo apt-get install texlive-fonts-recommended 
```

但它要求输入 www-data 的密码，我不相信它是由我设置的，也不是我扔给它的任何东西。

如果有任何帮助，我正在运行 Ubuntu 12.04。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-16T13:00:48.243

`sudo mktexpk --destdir /usr/share/texmf-texlive/fonts/pk/ljfour/jknappen/ec/ --mfmode / --bdpi 600 --mag 1+0/600 --dpi 600 ecrm1000`

... 使所有用户都可以使用该字体（与 missingfont.log 相同，但带有 --destdir 参数）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-01-25T03:05:06.777

我遇到了类似的问题，它是通过在调用的 shell 脚本中设置`$HOME`环境变量来解决的（或者我相信任何可写入的文件夹在这里都可以）。请参阅[TeX.SX](https://tex.stackexchange.com/questions/289251/mktextfm-fails-when-pdflatex-is-invoked-by-cgi-bin-script-under-www-data-apache/289252#289252)上的详细信息。`/var/www``pdflatex``www-data`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-29T23:45:20.400

这是最终使编译工作的原因。

在我自己的主文件夹下是一个隐藏文件夹，LaTeX 用它来存储它需要的字体`~/.texmf-var`。这个文件夹包含`fonts/pk/ljfour/jknappen/ec`13 个字体文件（其中一些是 latexmk 抱怨的）。

解决方案是让 PHP 生成我想要编译的 LaTeX 文件（file.tex）到一个临时目录（我复制字体的位置），在那里它们将被编译，然后移动到我想要存储输出 PDF 的位置。我会用一个例子来解释：

```
file_put_contents('~/website/latexFiles/temp/file.tex', $latex_data);
exec('/usr/bin/latexmk -pdf -cd ~/website/latexFiles/temp/file.tex');
exec('mv ~/website/latexFiles/temp/file.pdf ~/website/pdfs/desiredFilename.pdf');
exec('rm ~/website/latexFiles/temp/file.*'); 
```

因此，第一行在我要编译为 PDF 的目录中生成了乳胶文件（其中 $latex_data 是一个包含我要创建的 LaTeX 文档的字符串）。

现在，**使这一切正常工作的部分**`~/website/latexFiles/temp`是在被调用的目录中创建一个目录`$HOME`。然后复制（或者可能链接，但我复制）`~/.texmf-var`到`~/website/latexFiles/temp/$HOME`. 这是`latexmk`查找所需字体的路径。在尝试编译 LaTeX 文件之前使用`-cd`开关，以便 latexmk 进入`~/website/latexFiles/temp`，然后它将能够微调字体。

第三行将`.pdf`文件复制到我最终想要输出文件的位置，最后一行从临时目录中删除具有相同文件名的所有剩余文件。我确保我对文件使用唯一的文件名，`.tex`因此我不会删除其他用户可能正在生成的文件。

希望其他人觉得这很有用。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-28T08:36:55.890

您的`sudo`想法是对的，但是要解决密码问题，有一个简单的解决方案。

www-data 必须在 sudoers 列表中，在`etc/sudoers`，并且在此列表中，您可以定义如何控制超级命令。可以将 www-data 设置为不需要密码的 sudoer……但就安全性而言，这不是一个非常聪明的主意。因此，在 sudoers 列表中，您可以指定允许用户执行哪些命令。只允许`/usr/bin/latexmk`命令将绕过安全问题，并允许您的网络服务器在没有密码的情况下运行超级命令。

查看 Ubuntu 的帮助页面：[https](https://help.ubuntu.com/community/Sudoers) : //help.ubuntu.com/community/Sudoers - 最值得注意的是 NOPASSWD 部分。

你的例子是：

```
# This lets "www-data" user run a command without a password
www-data mark-computer= NOPASSWD: /usr/bin/latexmk 
```

# python - 在python中压缩文件

> ID：11240728
> 
> 赞同：9
> 
> 时间：2012-06-28T08:24:40.800
> 
> 标签：python, zip, zipfile, ftputil

我的程序运行顺利，但我希望将来自 ftp 的文件压缩到本地驱动器中

我的问题：调用我的 main() 函数后只有 1 个文件被压缩

这是我的代码：

# 主要的

```
import os
import upload
import download
import zipfile
import ConfigParser
import ftputil

def main():

    #create a folder Temp on d drive for later use
    path = r'D:\Temp'
    os.mkdir(path)

    #parse all the  values at config.ini file
    config = ConfigParser.ConfigParser()
    config.readfp(open('config.ini'))
    server = config.get('main', 'Server')
    username = config.get('main', 'Username')
    password = config.get('main', 'Password')
    uploads = config.get('main', 'Upload folder')
    downloads = config.get('main', 'Download folder')

    #connect to ftp
    ftp = ftputil.FTPHost(server, username, password)

    dirlist = ftp.listdir(downloads)

    for list in dirlist:
        ftp.chdir(downloads)
        target = os.path.join(path, list)
        ftp.download(list, target)

    #########################################################
    #   THis section is where algo fails but the program run#
    ########################################################

    #zipping files
    absolute_path = r'D:\Temp'
    dirlist = os.listdir(absolute_path)
    filepath = r'D:\Temp\project2.zip'
    for list in dirlist:
        get_file = os.path.join(absolute_path, list)
        zip_name = zipfile.ZipFile(filepath, 'w')
        zip_name.write(get_file, 'Project2b\\' + list)

if __name__ == '__main__':
    print "cannot be" 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-06-28T08:31:24.523

当你这样做时：

```
for list in dirlist:
        get_file = os.path.join(absolute_path, list)
        zip_name = zipfile.ZipFile(filepath, 'w')
        zip_name.write(get_file, 'Project2b\\' + list) 
```

您为要压缩的每个文件重新创建一个 ZipFile，该`"w"`模式意味着您从头开始重新创建它。

试试这个（在循环之前创建 zip 文件）：

```
zip_name = zipfile.ZipFile(filepath, 'w')
for list in dirlist:
        get_file = os.path.join(absolute_path, list)
        zip_name.write(get_file, 'Project2b\\' + list) 
```

或者这样，它将以附加模式打开 zipfile：

```
for list in dirlist:
        get_file = os.path.join(absolute_path, list)
        zip_name = zipfile.ZipFile(filepath, 'a')
        zip_name.write(get_file, 'Project2b\\' + list) 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-28T08:28:30.397

看看 shutil 模块。有一个使用 shutil.make_archive() 的例子：

[http://docs.python.org/library/shutil.html](http://docs.python.org/library/shutil.html)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2018-10-24T15:59:46.413

如果你有很多文件，你可以并行压缩它们：

```
import zipfile
from pathlib import Path, WindowsPath
from typing import List, Text
import logging
from time import time
from concurrent.futures import ThreadPoolExecutor

logging.basicConfig(
    format="%(asctime)s - %(message)s", datefmt="%H:%M:%S", level=logging.DEBUG
)

PATH = (r"\\some_directory\subdirectory\zipped")

def file_names() -> List[WindowsPath]:
    p = Path(PATH)
    file_names = list(p.glob("./*.csv"))
    logging.info("There are %d files", len(file_names))
    return file_names

def zip_file(file: WindowsPath) -> None:
    zip_file_name = Path(PATH, f"{file.stem}.zip")
    with zipfile.ZipFile(zip_file_name, "w") as zip:
        zip.write(file, arcname=file.name, compress_type=zipfile.ZIP_DEFLATED)

def main(files: List[Text]) -> None:
    t0 = time()
    number_of_files = len(files)
    with ThreadPoolExecutor() as executor:
        for counter, _ in enumerate(executor.map(zip_file, files), start=1):
            # update progress every 100 files
            if counter % 100 == 0:
                logging.info(
                    "Processed %d/%d. TT: %d:%d",
                    counter,
                    number_of_files,
                    *divmod(int(time() - t0), 60),
                )

    logging.info(
        "Finished zipping %d files. Total time: %d:%d",
        len(files),
        *divmod(int(time() - t0), 60),
    )

if __name__ == "__main__":
    files = file_names()
    main(files) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-28T08:27:58.913

最好的方法是将调试语句放在你的 for 循环中，有两种可能性；

一个是第一个forloop只从ftp文件夹下载一个文件

二是第一个循环下载所有文件，但第二个循环只压缩其中一个

使用打印语句查看在循环中下载/压缩了哪些文件，祝你好运

# android - 在模拟器中播放视频时出现媒体播放器错误

> ID：11240736
> 
> 赞同：0
> 
> 时间：2012-06-28T08:25:05.167
> 
> 标签：android

我正在尝试使用此代码从 youtube 播放视频，但我从我的日志猫中收到此错误：

```
06-28 16:23:09.794: E/MediaPlayer(621): error (1, -2147483648) 
```

这是我的代码：

```
public class PromoActivity extends Activity{

@Override
protected void onCreate(Bundle savedInstanceState) {
    // TODO Auto-generated method stub
    super.onCreate(savedInstanceState);
    setContentView(com.frux.kfcmobile.R.layout.promo);
    VideoView videoView = (VideoView)this.findViewById(com.frux.kfcmobile.R.id.videoView);
    String path = "rtsp://v4.cache5.c.youtube.com/CjYLENy73wIaLQmofK96HM6gyhMYDSANFEIJbXYtZ29vZ2xlSARSBWluZGV4YJWAl-O04anmTww=/0/0/0/video.3gp";
    Uri vid = Uri.parse(path);
    videoView.setVideoURI(vid);
    videoView.setMediaController(new MediaController(this));
    videoView.start();
    videoView.requestFocus();
   }
} 
```

谁能帮我？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-28T08:36:08.490

试试这个代码

```
 video.setVideoURI(Uri
                    .parse("rtsp://v6.cache7.c.youtube.com/CiILENy73wIaGQk-fYZWNAPDsxMYDSANFEgGUgZ2aWRlb3MM/0/0/0/video.3gp"));
    mMediaController = new MediaController(this);
    mMediaController.setMediaPlayer(video);
    video.start(); 
```

然后您尝试在设备中运行。因为在模拟器中只会播放一些视频。

# linux - ALT + 在哪里。设置调用先前存储的参数

> ID：11240738
> 
> 赞同：1
> 
> 时间：2012-06-28T08:25:08.010
> 
> 标签：linux, bash, dotfiles

我已经安装了一些覆盖 ALT + "." 的点文件。调用上一个命令的最后一个参数。这个设置默认存储在哪里，因为我猜这些 dotfiles 必须覆盖它。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-28T13:39:43.693

它可以通过`bind`任何启动文件中的命令来设置，例如`/etc/profile`, `/etc/profile.d/*`, `~/.profile`,`~/.bashrc`等。也可以在`/etc/inputrc`或中设置`~/.inputrc`。

默认值，如果没有明确设置，则在 Bash 内部设置。

# sql - 订单 1,2 做什么

> ID：11240746
> 
> 赞同：12
> 
> 时间：2012-06-28T08:25:39.090
> 
> 标签：sql, oracle11g

想象一下我们有下表

```
create table t
  (item number,
   bin number,
   primary key (bin , item) ); 
```

我已经使用 insert into 命令将几个值插入到表中`t`，现在我对这段代码的作用感兴趣

```
select * from t
  order by 1,2; 
```

据我所知，它从表中选择所有内容`t`并对其进行排序，因为 order 意味着使用 order 命令中列出的条件对所选查询进行排序，但`order 1,2`我不明白这是什么意思，你能帮我吗？

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-06-28T08:27:48.470

它按第一列和第二列对结果进行排序，因此在您的情况下，它与

```
select *
from t
order by item, bin; 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-28T08:28:31.733

```
select * from t
  order by item, bin; // just different written but result is same. 
```

`Result`将按第一列和第二列排序。

不同之处在于代码的可读性，所以如果有人不知道有关表格的信息，你`select`什么都不说。人只知道结果将按 1\. 和 2\. 列排序，仅此而已。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-06-28T09:19:30.140

它将按第一列对结果进行排序，然后，如果第一列中有一些具有相同值的行，它将按第二列对它们进行排序。

# python - Pika 和 gevent 的随机超时错误

> ID：11240749
> 
> 赞同：6
> 
> 时间：2012-06-28T08:25:49.707
> 
> 标签：python, rabbitmq, gevent, pika

我一直在尝试通过使用 Pika 库（由 gevent 修补的猴子）在我的 gevent 程序中使用 RabbitMQ，gevent 喜欢随机抛出超时错误。

我该怎么办？我可以使用另一个库吗？

```
WARNING:root:Document not found, retrying primary.
Traceback (most recent call last):
  ...
  File "/usr/lib/python2.7/dist-packages/pika/adapters/blocking_connection.py", line 32, in __init__
    BaseConnection.__init__(self, parameters, None, reconnection_strategy)
  File "/usr/lib/python2.7/dist-packages/pika/adapters/base_connection.py", line 50, in __init__
    reconnection_strategy)
  File "/usr/lib/python2.7/dist-packages/pika/connection.py", line 170, in __init__
    self._connect()
  File "/usr/lib/python2.7/dist-packages/pika/connection.py", line 228, in _connect
    self.parameters.port or  spec.PORT)
  File "/usr/lib/python2.7/dist-packages/pika/adapters/blocking_connection.py", line 44, in _adapter_connect
    self._handle_read()
  File "/usr/lib/python2.7/dist-packages/pika/adapters/base_connection.py", line 151, in _handle_read
    data = self.socket.recv(self._suggested_buffer_size)
  File "/usr/lib/python2.7/dist-packages/gevent/socket.py", line 427, in recv
    wait_read(sock.fileno(), timeout=self.timeout, event=self._read_event)
  File "/usr/lib/python2.7/dist-packages/gevent/socket.py", line 169, in wait_read
    switch_result = get_hub().switch()
  File "/usr/lib/python2.7/dist-packages/gevent/hub.py", line 164, in switch
    return greenlet.switch(self)
timeout: timed out 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-06T05:01:36.993

Pika 并不适合与 gevent 一起使用，因为 pika 实现了自己的基于非阻塞套接字的到 RabbitMQ 的异步连接。这与 gevent 的实现不太匹配。

您可能需要考虑使用[py-amqplib](http://pypi.python.org/pypi/amqplib/1.0.2)或[kombu](http://pypi.python.org/pypi/kombu/0.9.1)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-01T23:18:40.360

在 Django/Gunicorn 应用程序中使用 Pika 时，我也遇到了超时问题。我玩过提高`connection_attempts`或增加超时，但 RabbitMQ 总是以握手错误关闭连接。后者似乎表明 Pika 从未在套接字上传输任何数据。

超时的原因可能是这个[libevent 错误](http://code.google.com/p/gevent/issues/detail?id=97)- 至少在我的环境中，附加到错误的脚本能够重现该问题。

您可以尝试升级到 gevent>=1.0（在撰写本文时尚未发布）：

```
wget http://gevent.googlecode.com/files/gevent-1.0b4.tar.gz
pip install gevent-1.0b4.tar.gz 
```

# regex - 在 Perl 中，如何使用正则表达式替换运算符替换子字符串中的非 ASCII 字符？

> ID：11240751
> 
> 赞同：2
> 
> 时间：2012-06-28T08:25:51.303
> 
> 标签：regex, perl

如何使用此命令：

```
perl -pi -e 's/[^[:ascii:]]/#/g' file 
```

仅将偏移量 A 处的字符更改为每行的偏移量 B？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-28T09:14:08.767

在保留我没有正确理解您的问题的情况下，如果偏移量 A 和 B 是 5 和 10，那么它应该是：

```
 perl -pi -e 's/(?<=.{5})(?<!.{10})[^[:ascii:]]/#/g' file 
```

解释：

```
 [^[:ascii:]]  <- the character which is looked for
   (?<=.{5})     <- if at least 5 chars were before (offset 5)
   (?<!.{10})    <- but no more than 10 characters before (offset 10) 
```

构造：

```
 (?<= ...) and (?<! ...) 
```

被称为*正面和负面的lookbehinds*，它们是*零与断言*。（你可以用谷歌搜索它们，参见[perlre](http://perldoc.perl.org/perlre.html#Extended-Patterns)中[的 Look-Around Assertions](http://perldoc.perl.org/perlre.html)部分）

* * *

**附录 1**`substr()`你在标题 中提到，我先忽略了。当然，这也可以：

```
 perl -pi -e 'substr($_,5,10)=~s/[^[:ascii:]]/#/g' file 
```

的描述`substr EXPR,OFFSET,LENGTH`可以[在 perldoc](http://perldoc.perl.org/functions/substr.html)中找到。这个例子很好地说明了`substr()`作为左值的使用。

* * *

**附录 2** 更新此帖子时，[Grrrr](https://stackoverflow.com/a/11241849/170194)添加了相同的解决方案作为答案，但他的解决方案领先一分钟！^(（所以他应该得到战利品）)

问候

rbo

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-06-28T09:37:38.333

除了橡胶靴的答案之外，您还可以对子字符串而不是整个字符串进行操作：

```
perl -pi -e 'substr($_, 5, 5) =~ s/[^[:ascii:]]/#/g' file 
```

为了显示：

```
perl -e 'print "\xff" x 16' | \
perl -p -e 'substr($_, 5, 5) =~ s/[^[:ascii:]]/#/g' | \
hd 
```

将打印

```
ff ff ff ff ff 23 23 23  23 23 ff ff ff ff ff ff 
```

在这段代码中，第一个偏移量是从 0 开始的，您必须使用长度而不是第二个偏移量，所以它将是 `substr($_, A-1, B-A)`.

# ruby-on-rails - Facebook Authentication with Devise + OmniAuth-Facebook 不做任何事情

> ID：11240756
> 
> 赞同：1
> 
> 时间：2012-06-28T08:25:59.803
> 
> 标签：ruby-on-rails, facebook, ruby-on-rails-3, authentication, facebook-graph-api

我一直在使用[https://github.com/plataformatec/devise/wiki/OmniAuth:-Overview](https://github.com/plataformatec/devise/wiki/OmniAuth:-Overview)让 facebook 身份验证正常工作。我做了它告诉我的所有事情，但它仍然不起作用。我最初遇到了 Cookie 溢出错误，所以在进行了一些谷歌搜索之后，我在 omniauth_callbacks_controller.rb 中添加了 except('extra') ，如下所示

```
 session["devise.facebook_data"] = request.env["omniauth.auth"].except('extra') 
```

这消除了错误，但它仍然没有让用户登录。事实上，我什至不认为它会创建用户（使用 heroku rails c 检查）。

它给了我一个 url，后面附加了“sign_up# *=* ”。可能是什么问题？

```
 user = User.create(name:auth.extra.raw_info.name,
                       provider:auth.provider,
                       uid:auth.uid,
                       email:auth.info.email,
                       username:auth.info.email,
                       password:Devise.friendly_token[0,20]

                       ) 
```

我添加了“用户名”，因为我在我的用户模型中使用它，但我似乎想不出我可能需要编辑/添加的任何其他内容。

Rails 3.1.3、Ruby 1.9.3p194（2012-04-20 修订版 35410）[x86_64-darwin11.4.1]

===============快速更新===========================

所以看起来我让用户保存了 - 我可以在数据库中看到它。但是，它仍然没有让用户登录，并且我无法使用创建的用户登录，因为我只知道用户名和电子邮件，而不知道密码。简而言之，我让 Facebook 向我发送信息，并且我能够将其保存到数据库，但不能重定向到登录屏幕。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-29T05:19:49.397

好的，我想通了。

首先，我必须在 User 模型中添加“provider”和“uid”作为 attr_accessible（当然是在生成迁移之后），如下所示：

```
attr_accessible :password, :password_confirmation, :remember_me, :username, :email,
:bio, :website_blog, :company, :name, :image, :provider, :uid 
```

然后，在 ApplicationController.rb 中，我不得不调整 after_sign_in_path_for(resource) 方法。我正在使用 Devise，但不久前我将其更改为在登录后将用户重定向到上一页，但我想现在涉及 Facebook，这会导致错误。所以我不得不注释掉以前的东西，并且只使用 root_url，我能够登录用户并重定向到主页。

```
def after_sign_in_path_for(resource)       
 sign_in_url = root_url
 #sign_in_url = url_for(:action => 'new', :controller => 'sessions', :only_path => false, :protocol => 'http')  

  #if (request.referer == sign_in_url)
  #  super
  #else
  #  request.referer
  #end
end 
```

现在我只需要弄清楚如何将用户重定向到上一页而不会导致错误，这将是完美的。

# android - 无法导入 MoPub android sdk

> ID：11240757
> 
> 赞同：0
> 
> 时间：2012-06-28T08:26:12.467
> 
> 标签：android, import, mopub

我正在尝试将 MoPub sdk 导入 Eclipse，但出现以下错误：

`[2012-06-28 13:43:46 - mopub-android-sdk] Unable to resolve target 'android-4'`

请帮助我解决问题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-28T08:49:29.870

mopub-android-sdk 文件是否与您的项目位于同一父文件夹中？这似乎与此[问题/答案](https://stackoverflow.com/questions/5167273/in-eclipse-unable-to-reference-an-android-library-project-in-another-android-pr)中解决的问题相同。你的sdk上安装过Android 1.6平台吗？

# sql-server - 了解集成服务上的存储包

> ID：11240761
> 
> 赞同：4
> 
> 时间：2012-06-28T08:26:30.363
> 
> 标签：sql-server, ssis

我们有几个 SSIS 包（在一个解决方案中）保存在服务器上的一个目录中。这些包通过 SQL Server 代理作业运行，使用“文件系统”作为包源。包不会以任何方式添加到“集成服务”（您可以通过 SSMS 中的“连接”按钮连接的东西）。这似乎工作正常。

现在我正在尝试了解 Integration Services 的**Stored Packages**的实际用途和工作原理。它可能有一个很好的理由 - 但我还没有得到它（阅读几个[SSIS](http://msdn.microsoft.com/en-us/library/ms141026%28v=sql.105%29.aspx)主题没有帮助）。

如果我打开集成服务并将现有包添加到存储包中的 MSDB 文件夹，它会添加到我的 SQL Server 实例的 msdb 系统数据库中。`sysssispackages`然后我可以从or中查询一些关于它的信息`sysssispackagefolders`，并直接运行包。

如果我将现有包添加到存储包中的文件系统文件夹，似乎什么都没有发生，除了它还允许我通过右键单击并选择“运行包”来运行它。

我觉得我在这里错过了重要的东西。我的问题如下：

1.  除了将它们保存为服务器上的文件之外，还有什么原因使用集成服务来存储包？
2.  将包添加到 Integration Services 'Stored Packages' 文件夹中的 'File System' 或 'MSDB' 文件夹时究竟会发生什么？有什么好处？

非常感谢任何指针/见解！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-28T08:48:10.347

以下是数据库存储包与文件系统存储包的一些优点/缺点：

文件系统

*   基于操作系统的文件加密和 ACL
*   更容易直接访问以查看或编辑包
*   通常对开发者来说更​​容易管理（更改一个包，只需替换文件）

SQL 服务器

*   多人更容易访问
*   数据库安全、角色和代理交互的好处
*   包通过正常的数据库备份过程进行备份
*   DBA 通常更容易管理（他将控制包在更改等方面发生的情况等。）

关于第二个问题，包是 SSIS 可以读取和执行的 XML 文件。在基于文件的部署中，SSIS 在文件系统上找到包并执行它，在 DB 部署中，SSIS 在 MSDB 表上找到包并执行它。在性能方面没有任何差异。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-28T08:46:58.907

1.  备份。如果包位于 msdb 数据库中，则在备份数据库时，您将备份包。他们还可以利用 SQL Server 的安全性，而不仅仅是在文件系统上。

2.  好处是您不必担心文件路径，或者有人会删除文件或将文件夹移动到另一个位置。包裹将永远在“同一个地方”。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-04T10:21:06.010

这个更好地解释了差异 [social.msdn.microsoft.com](http://social.msdn.microsoft.com/Forums/en/sqlintegrationservices/thread/8ef1a0b9-3009-4951-b7cd-7931661ccad4)

> 文件系统：
> 
> 我确定您确切知道 FileSystem 选项是什么，但要完成本部分：您可以使用此选项将包保存在硬盘驱动器或任何共享文件夹的物理位置，并且您应该提供存储包的完整路径在文件系统选项中。
> 
> SQL 服务器：
> 
> 使用此选项，SSIS 包将存储在 msdb 数据库的 sysssispackages 表中。您可以将它们分隔在您想要的任何文件夹中。这些文件夹是虚拟文件夹，列在 sysssispackagefolders 表中。因此使用此选项 ssis 包将不会存储为物理文件。它将存储在 msdb 数据库中。
> 
> SSIS 包商店：
> 
> 此选项实际上并不是真正的部署选项。为什么？因为这只是一个重定向步骤。我的意思是，如果您在尝试保存包的副本时在 BIDS 中选择此选项...，您将看到一棵树，其中包含父“SSIS 包”和两个子：“MSDB”和“文件系统” . 如果您选择“MSDB”，该包将保存在 msdb 数据库下，与 sql server 选项（之前描述的选项）相同。如果您选择“文件系统”，则 ssis 包将存储为扩展名为 .dtsx 的物理文件，但在此地址的文件夹中： \Microsoft SQL Server\100\DTS\Packages 。这就像文件系统选项，但您不能在任何位置存储包，

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-06-29T13:38:12.247

好的，所以我对 SSIS 包商店和保存包有很多误解。这是我学到的。首先，“您可以通过 SSMS 中的“连接”按钮连接的东西”（连接 -> 集成服务...）称为*SSIS 包商店*。

**将包添加到 Integration Services 'Stored Packages' 文件夹中的 'File System' 或 'MSDB' 文件夹时究竟会发生什么？有什么好处？**

**文件系统**

如果要使用 SSIS 包存储中的[文件系统](http://msdn.microsoft.com/en-us/library/ms137916%28v=sql.105%29.aspx)文件夹，请将包保存到默认文件系统目录 ( `...\Microsoft SQL Server\100\DTS\Packages`) 或将文件系统的根文件夹更改为要使用的目录。（您可以通过更改 MsDtsSrvr.ini.xml 文件中的默认值来[更改根目录](http://msdn.microsoft.com/en-us/library/ms137789%28v=sql.105%29.aspx)`<StorePath>..\Packages</StorePath>`，该文件可以在`...\Microsoft SQL Server\100\DTS\Binn`目录中找到。完成后不要忘记重新启动 Integration Services 服务。）当您添加打包到此目录，它将出现在 SSIS 包存储的文件系统文件夹中。然后，您可以直接从 SSIS 包存储或通过 SQL Server 代理作业运行包（通过在作业步骤属性中选择 SSIS 包存储作为包源，然后选择包）。

编辑包很容易：打开文件系统目录中的包，编辑并保存，新版本将立即通过 SSIS 包商店提供。

*优点：*

*   软件包的部署和故障排除很容易
*   当数据库引擎关闭时，包仍然可用

**SQL Server/MSDB**

如果你想依赖[msdb](http://msdn.microsoft.com/en-us/library/ms137916%28v=sql.105%29.aspx)数据库来保存你的包，你必须通过 SSIS 包存储将每个包导入 msdb。右键单击 MSDB 文件夹并选择导入包。这会将包保存到 msdb 数据库。之后您无需保存原始 .dtsx 包文件。

编辑包[有点困难](http://social.msdn.microsoft.com/Forums/en-US/sqlintegrationservices/thread/678bd05c-4475-45af-ad25-51e8700dbe21)：您必须导出包，编辑它并在 SSIS 包商店中再次导入包。或者您可以在 BIDS 中打开一个新项目，通过右键单击 SSIS 包并选择从 SQL Server 中添加现有包来添加包，对其进行编辑，然后在 SSIS 包存储中再次导入包。

*优点：*

*   包的安全性可以通过数据库安全性进行严格配置
*   备份 msdb 数据库时将备份包
*   包裹存放在中央位置

**除了将它们保存为服务器上的文件之外，还有什么原因使用集成服务来存储包？**

那么，为什么要向 SSIS 包存储中添加一个包，而不是像我们一样通过直接从“作业步骤属性”窗口引用 package.dtsx 文件来运行它）？这取决于：如果您希望您的包在 msdb 数据库中，您*需要*Package Store，因为没有其他方法可以维护您的包。如果您使用文件系统，可能是您有一个单独的“开发”和“部署”目录，所有准备好部署的包都可以通过 SSIS 包存储找到。在每种情况下，SSIS 包商店都为您的包提供了一个简单的界面。

感谢[João Leal](https://stackoverflow.com/users/1309027)和[Diego](https://stackoverflow.com/users/1169020)的回答！

# erlang - 安装 Last Value Cache 可插拔交换时出错

> ID：11240766
> 
> 赞同：0
> 
> 时间：2012-06-28T08:26:53.333
> 
> 标签：erlang, makefile, rabbitmq

我正在尝试将 LVC 交换安装到我的 RabbitMQ 代理。我下载了公共保护伞并按照RabbitMQ 网站上的[说明运行 make。](http://www.rabbitmq.com/plugin-development.html)

接下来我下载了 LVC 插件并按照他们的[说明](https://github.com/squaremo/rabbitmq-lvc-plugin)进行操作。但是 make 不起作用，所以我无法继续。有没有人设法安装它，如果是这样，请你从一开始就给我完整的指示。否则，如果有人对我做错了什么有任何想法，请告诉我。下面是make的输出。

> ERL_LIBS=./build/dep-apps erlc -Wall +debug_info -I ./include -pa ebin -o ebin src/rabbit_exchange_type_lvc.erl src/rabbit_exchange_type_lvc.erl:11: 找不到包含库“rabbit_common/include/rabbit_exchange_type_spec .hrl " make: *** [ebin/rabbit_exchange_type_lvc.beam] 错误 1

我在尝试安装[Recent History Exchange](https://github.com/videlalvaro/rabbitmq-recent-history-exchange)时遇到了同样的问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-03T06:37:07.960

解决方案是删除有关 rabbit_exchange_type_spec 的包含行。我在[这里](https://github.com/simonmacmullen/random-exchange/commit/e6926f4edd0eceb6b0db3d10c110e458054e0063)找到了这些信息。试了一下，又跑了一次。制作完成，我可以在将插件移动到正确位置后启用插件。

# android - 我写的android蓝牙服务程序崩溃了

> ID：11240767
> 
> 赞同：0
> 
> 时间：2012-06-28T08:26:55.390
> 
> 标签：android, service, bluetooth

我编写的用于在启用蓝牙时禁用蓝牙的服务崩溃。

///////////////////////////////// 服务 //////////////// ///////////////

```
 public void onReceive(Context context, Intent intent) {
            // TODO Auto-generated method stub

            Intent startServiceIntent = new Intent(context, Bluetoothservice.class);
            context.startService(startServiceIntent);

            if(intent.getAction().equals(BluetoothAdapter.ACTION_STATE_CHANGED)){
                BluetoothAdapter bluetooth = BluetoothAdapter.getDefaultAdapter();
                if (bluetooth.getState() == BluetoothAdapter.STATE_ON
                        || bluetooth.getState() == BluetoothAdapter.STATE_TURNING_ON) {
                bluetooth.disable();
                }
                return;
            } 
```

///////////////////////////////// 接收者 //////////////// ////////////////

```
@Override
    public int onStartCommand(Intent intent, int flags, int startId) {
        // TODO Auto-generated method stub
        IntentFilter filterb = new IntentFilter(
                BluetoothAdapter.ACTION_STATE_CHANGED);
        BroadcastReceiver mreceiverb = new Broadcastreceiver();
        registerReceiver(mreceiverb, filterb);
        return super.onStartCommand(intent, flags, startId);

    } 
```

//////////////////////////// Logcat /////////////////////////////////////////////////////////////////////// ////////////////

```
 E/AndroidRuntime( 8759): FATAL EXCEPTION: main
    E/AndroidRuntime( 8759): java.lang.RuntimeException: Error receiving broadcast Intent { act=android.bluetooth.adapter.action.STATE_CHANGED flg=0x10000010 (has extras) } in com.teststopper.StatusReceiver@407290f8
    E/AndroidRuntime( 8759):    at android.app.LoadedApk$ReceiverDispatcher$Args.run(LoadedApk.java:734)
    E/AndroidRuntime( 8759):    at android.os.Handler.handleCallback(Handler.java:587)
    E/AndroidRuntime( 8759):    at android.os.Handler.dispatchMessage(Handler.java:92)
    E/AndroidRuntime( 8759):    at android.os.Looper.loop(Looper.java:132)
    E/AndroidRuntime( 8759):    at android.app.ActivityThread.main(ActivityThread.java:4126)
    E/AndroidRuntime( 8759):    at java.lang.reflect.Method.invokeNative(Native Method)
    E/AndroidRuntime( 8759):    at java.lang.reflect.Method.invoke(Method.java:491)
    E/AndroidRuntime( 8759):    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:844)
    E/AndroidRuntime( 8759):    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:602)
    E/AndroidRuntime( 8759):    at dalvik.system.NativeStart.main(Native Method)
    E/AndroidRuntime( 8759): Caused by: java.lang.SecurityException: Calling uid 10099 gave packageandroid which is owned by uid 1000
    E/AndroidRuntime( 8759):    at android.os.Parcel.readException(Parcel.java:1321)
    E/AndroidRuntime( 8759):    at android.os.Parcel.readException(Parcel.java:1275)
    E/AndroidRuntime( 8759):    at android.bluetooth.IBluetooth$Stub$Proxy.disable(IBluetooth.java:806)
    E/AndroidRuntime( 8759):    at android.bluetooth.BluetoothAdapter.disable(BluetoothAdapter.java:496)
    E/AndroidRuntime( 8759):    at com.teststopper.StatusReceiver.onReceive(StatusReceiver.java:17)
    E/AndroidRuntime( 8759):    at android.app.LoadedApk$ReceiverDispatcher$Args.run(LoadedApk.java:725)
    E/AndroidRuntime( 8759):    ... 9 more 
```

任何人都可以帮忙吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-28T08:34:22.160

您必须在单独的`<uses-feature>`元素中指定每个功能，因此如果您的应用程序需要多个功能，它将声明多个`<uses-feature>`元素。

例如，在设备中需要蓝牙和相机功能的应用程序将声明这两个元素：

```
<uses-feature android:name="android.hardware.bluetooth" />
<uses-feature android:name="android.hardware.camera" /> 
```

还要检查您是否已添加

```
 <uses-permission android:name="android.permission.BLUETOOTH">

BLUETOOTH   Allows applications to connect to paired bluetooth devices
BLUETOOTH_ADMIN Allows applications to discover and pair bluetooth devices 
```

[蓝牙功能的特殊处理](http://developer.android.com/guide/topics/manifest/uses-feature-element.html#bt-permission-handling)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-28T19:25:55.757

正如我在回答您的[其他问题](https://stackoverflow.com/questions/11219979/android-2-3-3-service-application-runns-clearly-but-on-3-2-galaxy-tab-it-does-wo)时所说，未经用户明确同意，您不应禁用蓝牙适配器。

# node.js - 是否有像 LUA 这样的脚本语言用于 javascript？

> ID：11240768
> 
> 赞同：2
> 
> 时间：2012-06-28T08:26:57.590
> 
> 标签：node.js

我正在使用 Node.js 构建一个 MMO，我希望我的团队中的一些脚本编写者为老板和其他脚本对象创建脚本 (duh)。我的第一个想法是在服务器上有一个文件夹，人们可以在其中上传 javascript 文件并让 node.js 自动读取和解析目录中的每个脚本，但我不希望他们能够执行 process.exit()例如，或其他危险的东西。

有没有一种解决方案可以让我控制脚本编写者能够调用的功能？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-28T09:31:07.670

您可以控制他们无法使用[`vm`](http://nodejs.org/api/vm.html)模块调用的功能。

例如，

```
vm.runInNewContext(userCode, {
    require: null,
    process: null,
    someFunc: function (x) { return x+1 },
    someData: { abc: 'def' }
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-28T09:59:40.943

javascript是否可以作为脚本语言工作。我想应该是的。
所以，我认为 vm.runInNewContext 可能就是你所需要的。看看[http://nodejs.org/docs/latest/api/vm.html](http://nodejs.org/docs/latest/api/vm.html)

# bash - bash 脚本未能按预期匹配文件

> ID：11240771
> 
> 赞同：2
> 
> 时间：2012-06-28T08:27:08.930
> 
> 标签：bash, ubuntu

我编写了一个小 bash* 脚本来处理目录中的文件。这些文件有一个特定的命名约定，它决定了如何处理文件。

文件名以地理来源开始，然后在文件名中包含一个关键字，用于确定应如何处理。

这是我的脚本的精简版：

```
DATA_DIRECTORY=./data

array=( 'uk' 'usa' 'fra' 'ukr' )

for i in "${array[@]}"
do
    echo "#################################################"
    echo "Loop index : $i"
    echo "#################################################"

    # process baboon data for the current country
    for filename in $DATA_DIRECTORY/$i_*_baboon*.csv; do
       echo "Processing file: $filename in loop: $i"
    done

    # process whale data for the current country
    for filename in $DATA_DIRECTORY/$i_*_whale*.csv; do
       echo "Processing file: $filename in loop: $i"
    done

    # process lion data for the current country
    for filename in $DATA_DIRECTORY/$i_*_lion*.csv; do
       echo "Processing file: $filename in loop: $i"
    done

done 
```

我期望上面的脚本以下列方式匹配文件：一个名为**us_2007_deaths_caused_by_baboon.csv**的文件将被处理一次 - 当循环计数器变量为 'us' 并且在循环期间`for filename in $DATA_DIRECTORY/$i_*_baboon*.csv;`。但是，匹配没有像我预期的那样工作，并且每个（嵌套的 for 循环）都在循环目录中的所有文件——这**不是**我想要的。

如何根据文件名对文件进行模式匹配？

*注意：我在 Ubuntu 10.0.4 上使用 bash 版本 4.1.5

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-28T08:32:15.330

写`${i}_`而不是`$i_`因为`$i_`是“”（bash认为这`i_`是一个变量）。

例如：

```
for filename in $DATA_DIRECTORY/${i}_*_baboon*.csv; do
   echo "Processing file: $filename in loop: $i"
done 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-28T08:34:43.427

尝试使用`${i}`而不是`$i`因为`$i_*`将被解析为变量`i_`而不是`i`.

# django - 使用电子邮件进行身份验证并导致路由问题

> ID：11240775
> 
> 赞同：0
> 
> 时间：2012-06-28T08:27:16.590
> 
> 标签：django, django-authentication, django-registration, django-login

我正在尝试通过用户的电子邮件而不是用户名对用户进行身份验证。

我正在使用`django-userena`并通过使用它的文档等。我设置了几乎所有需要的东西。类似的东西：`USERENA_WITHOUT_USERNAMES = True`在它的设置等。

但是注册后，我遇到了一系列问题。比如尝试在 url 中传递我的用户名以进行身份​​验证、注册完成问题等。

我更改了一些需要用户名作为参数的视图函数，但是这种方法既没有解决我的问题，也不是正确（也许是安全）的方法。

例如，通过路由到这个 URL `http://127.0.0.1:8000/accounts/signup/complete/`（之后`$ ./manage.py check_permissions`）我得到这个错误：

```
global name 'username' is not defined
/userena/views.py in directto_user_template
user = get_object_or_404(User, username_iexact=username) 
```

有什么我想念的吗？

**更新：** 这是我得到的输出：

> 渲染时捕获 NoReverseMatch：使用参数 '('xyz@xyz.com', '70b60d1d97015e03ba8d57f31e4c7ff14d6ab753')' 和关键字参数 '{}' 的“userena_activate”反向。

很明显，userena 尝试将电子邮件作为带有 URL 的用户名：

> userena/templates/userena/emails/activation_email_message.txt，第 8 行错误

```
1   {% load i18n %}{% autoescape off %}
2   {% if not without_usernames %}{% blocktrans with user.username as username %}Dear {{ username }},{% endblocktrans %}
3   {% endif %}
4   {% blocktrans with site.name as site %}Thank you for signing up at {{ site }}.{% endblocktrans %}
5   
6   {% trans "To activate your account you should click on the link below:" %}
7   
8   {{ protocol }}://{{ site.domain }}{% url userena_activate user.username activation_key %}
9   
10  {% trans "Thanks for using our site!" %}
11  
12  {% trans "Sincerely" %},
13  {{ site.name }}
14  {% endautoescape %} 
```

**更新2：** 好的。通过阅读`SignupFormOnlyEmail`类形式的源代码，它说自动生成一个随机用户名。

```
class SignupFormOnlyEmail(SignupForm):
    """
    Form for creating a new user account but not needing a username.

    This form is an adaptation of :class:`SignupForm`. It's used when
    ``USERENA_WITHOUT_USERNAME`` setting is set to ``True``. And thus the user
    is not asked to supply an username, but one is generated for them. The user
    can than keep sign in by using their email.

    """
    def __init__(self, *args, **kwargs):
        super(SignupFormOnlyEmail, self).__init__(*args, **kwargs)
        del self.fields['username']

    def save(self):
        """ Generate a random username before falling back to parent signup form """
        while True:
            username = sha_constructor(str(random.random())).hexdigest()[:5]
            try:
                User.objects.get(username__iexact=username)
            except User.DoesNotExist: break

        self.cleaned_data['username'] = username
        return super(SignupFormOnlyEmail, self).save() 
```

**更新 ：**

我终于解决了这个问题。我也在使用`django-email-as-username`旁边`django-userena`。这是我的问题的原因。显然，他们有一些冲突。小心

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-28T09:17:06.793

您已经`userena_activate`使用关键字参数 (`username`和`activation_key`) 定义了 url 路由，但您只使用参数调用它，将模板更改为关键字参数：

```
{% url userena_activate username=user.username activation_key=activation_key %} 
```

由于评论而编辑：

我不确定我是否正确理解您的问题，但我认为其他地方存在问题。你的错误信息说：

```
Caught NoReverseMatch while rendering: Reverse for 'userena_activate' with arguments '('xyz@xyz.com', '70b60d1d97015e03ba8d57f31e4c7ff14d6ab753')' and keyword arguments '{}' not found. 
```

似乎您将有效参数传递给函数，但您以错误的方式传递它们。urls.py 中的 URL 路由以期望的方式定义`kwargs`，但您只传递了`args`，这与它的定义不匹配。这就是您收到此错误消息的原因。简单传递参数为`kwargs`（这意味着每个参数都以其名称和值传递，如上所示）。

urls.py 参数和关键字参数的区别：

```
url(r'^(?P<username>[\.\w]+)/activate/(?P<activation_key>\w+)/$', userena_views.activate, name='userena_activate'),
         ^ this is _keyword argument_ 'username', expects value with argument value AND name 
```

和

```
url(r'^page/(.*)/$', userena_views.ProfileListView.as_view(), name='userena_profile_list_paginated'),
            ^ this is argument, expects only value, not argument name 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-20T06:56:02.823

使用电子邮件地址作为用户名（有效）的一个非常简单的替代方案是[django-easy-userena](https://github.com/barszczmm/django-easy-userena) - 这是 Userena 的向上兼容的分支，它添加了一些不错的功能：

*   使用电子邮件地址作为有效用户 ID - 生成隐藏在表单和确认电子邮件中的随机数字用户名
*   更少的依赖 - 不需要 django-guardian 或 easy-thumbnails
*   内置服务协议字段，显示为复选框

我在这方面取得了很好的效果 - 出于某种原因安装是手动的（将 userena 目录复制到站点包），但它可以轻松工作。

我喜欢整体的 Userena 方法，但 easy-userena 更适合我的需要。

# java - 为什么一个方法可以在另一个方法上调用？

> ID：11240777
> 
> 赞同：1
> 
> 时间：2012-06-28T08:27:27.667
> 
> 标签：java, oop, object, methods

```
NodeList nlList = eElement.getElementsByTagName(sTag).item(0).getChildNodes(); 
```

我是 JAVA 的新手。谁能好心解释一下上述语句的结构？

我了解可以通过以下方式访问实例的方法：

```
objectName.methodName(); 
```

在上面的语句中，一个对象名关联了三个方法名。这是如何运作的？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-28T08:30:48.057

*   `eElement.getElementsByTagName`将返回一个对象
*   然后在那个对象上调用`.item(0)`它将返回另一个对象
*   在你调用的最后一个对象上`.getChildNodes()`

事实上，一个方法可以通过做调用`object.method()`，但如果你有多个这样的调用，你可以像在你的例子中那样链接它们。

只要您不过度使用它，这可以使代码更具可读性，并使其保持紧凑。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-28T08:31:24.887

调用`eElement.getElementsByTagName(sTag)`返回一些对象。之后，`item(0)`在此对象上调用。等等。换句话说，上面的语句等价于

```
SomeObject so = eElement.getElementsByTagName(sTag);
OtherObject oo = so.item(0);
NodeList nlList = oo.getChildNodes(); 
```

这种技术称为[*方法链*](http://en.wikipedia.org/wiki/Method_chaining)，它在使代码更简洁和可读方面非常有用——如果不是过度使用的话。

它的一种特殊形式 - 在某些框架中广泛使用，例如 Hibernate - 是在同一个对象上链接方法调用，例如

```
SomeObject o = new SomeObject().setFoo(1).setBar("boo").setBaz(42); 
```

这可以说比

```
SomeObject o = new SomeObject();
o.setFoo(1);
o.setBar("boo");
o.setBaz(42); 
```

如果您没有具有所需参数的构造函数，您肯定需要它。但即使这样的构造函数可用，人们可能会争辩说

```
SomeObject o = new SomeObject(1, "boo", 42); 
```

比方法链接习语可读性差。唉，Java（与 C# 不同）在方法调用中没有命名参数。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-06-28T08:32:50.803

每个方法都对前一条语句的返回值起作用，例如

```
 obj.getA().getB().getC(); 
```

意味着你调用`getA()`了obj。这将返回一个对象 A，然后您调用`getB()`结果*对象 A* - 而不是原来的`obj`.

它类似于

```
 temp1 = obj.getA();
   temp2 = temp1.getB();
   temp3 = temp2.getC(); 
```

但没有临时变量。

缺点是调试更加困难，因为您没有中间变量，而且可能更脆弱（例如，如果`getA()`返回 null 则*整个语句会爆炸，*并且您无法轻易分辨出哪里，因为堆栈跟踪包含单独的行号）。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-06-28T08:31:51.087

上述语句按以下步骤执行：

1) 在元素类型的变量 eElement 中 - 获取名称为 sTag 的所有标签。此方法返回一个 NodeList

2) 在返回的 NodeList 中 - 从列表中获取第一项 (0)。这将返回一个节点。

3) 在返回的节点上 - 获取其所有子节点，它返回一个 NodeList 并将其分配给 nlList。

在方法返回对象的地方，您可以继续在返回的对象上调用方法，无论您想走多远。只要结果方法返回您尝试分配的类型的对象。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-06-28T08:33:35.307

1.  从 eElement 中检索所有名称为“sTag”的节点

    eElement.getElementsByTagName(sTag)

2.  从他们那里，第一个被选中

    eElement.getElementsByTagName(sTag).item(0)

3.  来自第一个节点的所有子节点现在都在 nlList

    NodeList nlList = eElement.getElementsByTagName(sTag).item(0).getChildNodes();

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-06-28T08:31:43.297

如果`objectName.methodName()`返回一个对象，那么您可以调用该对象的方法，例如`objectName.methodName().anotherMethod()`. 它只是一个简单的方法调用链接。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-06-28T08:32:41.640

```
objectName.methodName(); 
```

也可能返回一个对象引用（只要它的返回类型不是'void'），所以它确实是：

```
objectRef = objectName.methodName(); 
```

第二个方法调用在第一个返回的对象上。所以在你的例子中

```
eElement.getElementsByTagName(sTag).item(0).getChildNodes(); 
```

getElementsByTagName(sTag) 返回一个对象，并在其上调用 item(0)。第二个方法调用返回的对象，然后调用了 getChildNodes() 。

# web-services - 连接到本地主机上的 JBoss 服务器时如何限制soapUI 带宽

> ID：11240778
> 
> 赞同：0
> 
> 时间：2012-06-28T08:27:28.940
> 
> 标签：web-services, testing, jboss, soapui

我开发了一个网络服务，我需要在糟糕的连接速度条件下进行测试。webservice 部署在 JBoss 6.0 下，我使用soapUI 4.0.0 进行测试。

我需要将soapUI的连接速度限制在大约56kbps（拨号），以确保我不会在请求等方面超时。

我做了一些谷歌搜索，但没有发现任何令人满意的结果。

以前有没有人遇到过这个问题并找到了合适的解决方案？

非常感谢，

编辑1：我使用的是 Windows 7

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-29T12:32:37.257

为什么不在 56 kbps 调制解调器上使用 PC 进行测试？或网络上的 PC，但将其连接（不知何故 - 必须有办法）限制为 56kbps。

# jboss - 在 jboss 7.1.1 中配置 gmail

> ID：11240779
> 
> 赞同：3
> 
> 时间：2012-06-28T08:27:30.490
> 
> 标签：jboss

我正在使用 jboss 7.1.1 并想使用 JavaMail 发送电子邮件。我尝试了以下配置但出现错误。有人用 Jboss 7.1.1 配置了 gmail 吗？

```
 <socket-binding-group name="standard-sockets" default-interface="public" port-offset="${jboss.socket.binding.port-offset:0}">
    <socket-binding name="management-native" interface="management" port="${jboss.management.native.port:9999}"/>
    <socket-binding name="management-http" interface="management" port="${jboss.management.http.port:9990}"/>
    <socket-binding name="management-https" interface="management" port="${jboss.management.https.port:9443}"/>
    <socket-binding name="ajp" port="8009"/>
    <socket-binding name="http" port="8080"/>
    <socket-binding name="https" port="8443"/>
    <socket-binding name="jacorb" interface="unsecure" port="3528"/>
    <socket-binding name="jacorb-ssl" interface="unsecure" port="3529"/>
    <socket-binding name="messaging" port="5445"/>
    <socket-binding name="messaging-throughput" port="5455"/>
    <socket-binding name="osgi-http" interface="management" port="8090"/>
    <socket-binding name="remoting" port="4447"/>
    <socket-binding name="txn-recovery-environment" port="4712"/>
    <socket-binding name="txn-status-manager" port="4713"/>
    <outbound-socket-binding name="mail-smtp">
        <remote-destination host="localhost" port="25"/>
    </outbound-socket-binding>
    <outbound-socket-binding name="mail-smtp-gmail">
        <remote-destination host="smtp.googlemail.com" port="587"/>
    </outbound-socket-binding>
</socket-binding-group> 
```

**这是邮件配置**

```
<subsystem xmlns="urn:jboss:domain:mail:1.0">
        <mail-session jndi-name="java:jboss/mail/Default">
            <smtp-server outbound-socket-binding-ref="mail-smtp"/>
        </mail-session>

         <mail-session jndi-name="java:jboss/mail/TestGmail">
            <smtp-server outbound-socket-binding-ref="mail-smtp-gmail">
                <login name=mymail@gmail.com" password="mypass"/>
            </smtp-server>

        </mail-session>

</subsystem> 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-18T11:21:25.020

使用 JBoss 7.1 发送电子邮件的有效配置：

[1] 在部分子系统中：邮件->

```
<subsystem xmlns="urn:jboss:domain:mail:1.0">
<mail-session jndi-name="java:jboss/mail/SampleMS_With_GmailUser">
                <smtp-server ssl="true" outbound-socket-binding-ref="mail-gmail-smtp">
                    <login name="myemailingmail@gmail.com" password="myPasswordInGmail"/>
                </smtp-server>
            </mail-session>
</subsystem> 
```

注意：

*   名称必须包含完整的电子邮件地址，并带有@gmail.com

*   smtp-server 必须设置标志 ssl="true"

[2] 在 socket-binding-group 部分 ->

```
<socket-binding-group ....>
        <outbound-socket-binding name="mail-gmail-smtp">
            <remote-destination host="smtp.gmail.com" port="465"/>
        </outbound-socket-binding>
</socket-binding-group> 
```

就这样。然后你可以在 servlet 中使用它：

```
@WebServlet(urlPatterns = "/servlets/public/SendEmailTestServlet")
public class SendEmailTestServlet extends HttpServlet {

    @Resource(mappedName = "java:jboss/mail/SampleMS_With_GmailUser")
    javax.mail.Session mailSession;

        // use of mailSession
} 
```

# c# - C# 相交部分匹配

> ID：11240790
> 
> 赞同：3
> 
> 时间：2012-06-28T08:28:21.520
> 
> 标签：c#, arrays, compare, intersect

大家下午好，我正在尝试比较 2 个文件夹的内容，我让它在时尚之后工作，但我很好奇是否有更好的方法。这是我所拥有的：

```
 static void Main(string[] args)
    {
        reportDiffs("C:\\similar\\a", "C:\\similar\\b");
        Console.WriteLine("--\nPress any key to quit");
        Console.ReadKey();
    }

    public static void reportDiffs(string sourcePath1, string sourcePath2)
    {
        string[] paths1 = Directory.GetFiles(sourcePath1);
        string[] paths2 = Directory.GetFiles(sourcePath2);
        string[] fileNames1 = getFileNames(paths1, sourcePath1);
        string[] fileNames2 = getFileNames(paths2, sourcePath2);
        IEnumerable<string> notIn2 = fileNames1.Except(fileNames2);
        IEnumerable<string> notIn1 = fileNames2.Except(fileNames1);
        IEnumerable<string> inBoth = fileNames1.Intersect(fileNames2);

        printOut("Files not in folder1: ", sourcePath2, notIn1);
        printOut("Files not in folder2: ", sourcePath1, notIn2);
        printOut("Files found in both: ", "", inBoth);
    }

    private static string[] getFileNames(string[] currentFiles, string currentPath)
    {
        string[] currentNames = new string[currentFiles.Length];
        int i;

        for (i = 0; i < currentNames.Length; i++)
        {
            currentNames[i] = currentFiles[i].Substring(currentPath.Length);
        }
        return currentNames;
    }

    private static void printOut(string headline, string currentPath, IEnumerable<string> fileNames)
    {
        Console.WriteLine(headline);
        foreach (var n in fileNames)
        {
            Console.WriteLine(currentPath + n);
        }
        Console.WriteLine("--");
    } 
```

感觉好像我错过了一个技巧，并且有一个现有的数组方法，例如 Intersect，我可以将路径 1 和路径 2 传递给而不是执行 fileNames1 和 2 步骤，但是，对于我的一生，我找不到框架中的任何类似的东西。

干杯，山姆

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-28T08:38:59.333

如何使用该`Path.GetFilename`方法而不是手动切割路径字符串？

[http://msdn.microsoft.com/en-us/library/system.io.path.getfilename.aspx](http://msdn.microsoft.com/en-us/library/system.io.path.getfilename.aspx)

# git - Git 提交错误：存储库无效

> ID：11240797
> 
> 赞同：0
> 
> 时间：2012-06-28T08:28:54.887
> 
> 标签：git, github, octopress

我最近遇到了 octopress 博客平台，并按照安装说明进行操作。我使用 github 页面将它托管在 github 上。我创建了一个存储库并成功地进行了初始提交。当我尝试再次提交时，我的问题出现了，这是我收到的消息：

```
Immanuels-MacBook-Pro:octopress manuweg$ git add .
Immanuels-MacBook-Pro:octopress manuweg$ git commit -m "Changed origin url"
[source e0fff54] Changed origin url
1 files changed, 1 insertions(+), 1 deletions(-)
Immanuels-MacBook-Pro:octopress manuweg$ git push origin source
ERROR: Repository invalid.
fatal: The remote end hung up unexpectedly 
```

这是我的 .git/config 文件中的配置

```
[remote "origin"]
    url = git@github.com:manuweg/manuweg.github.com.git
    fetch = +refs/heads/*:refs/remotes/origin/* 
```

当我做

```
git config --get-regexp '^(remote|branch)\.' 
```

我明白了

```
remote.octopress.url git://github.com/imathis/octopress.git
remote.octopress.fetch +refs/heads/*:refs/remotes/octopress/*
branch.source.remote origin
branch.source.merge refs/heads/master
remote.origin.url git@github.com:manuweg/manuweg.github.com.git
emote.origin.fetch +refs/heads/*:refs/remotes/origin/* 
```

如您所见，最后一行似乎有拼写错误

```
emote.origin.fetch +refs/heads/*:refs/remotes/origin/* 
```

我认为应该阅读：

```
remote.origin.fetch +refs/heads/*:refs/remotes/origin/* 
```

远程来源 url 是正确的，并且适用于初始提交。任何想法为什么我会收到此错误？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-31T17:59:45.260

所以我通过创建另一个与第一个原点完全相同的细节来解决这个问题：

```
git remote add origin2 git@github.com:manuweg/manuweg.github.com.git 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-02T14:04:45.143

我通过删除原点并重新添加它来解决错误。希望这可以帮助。你应该用你的信息替换和。

```
git remote rm origin
git remote add origin git@github.com:<username>/<applicationname>.git 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-23T18:08:22.793

在[http://octopress.org/docs/deploying/github/](http://octopress.org/docs/deploying/github/)

如果您想从[http://username.github.com](http://username.github.com)托管博客，请使用此选项（尽管您也可以使用自定义域）。

创建一个新的 Github 存储库，并使用您的用户名或组织名称 username.github.com 或 organization.github.com 命名该存储库。

repo 名称应该是 username.github.com，而不是用户名。

# c# - 清除只读文本框

> ID：11240800
> 
> 赞同：0
> 
> 时间：2012-06-28T08:29:15.413
> 
> 标签：c#, jquery, asp.net

我需要清除/重置设置为 ReadOnly="true" 的 textbox1。我在另一个 Textbox2 中使用了 textchanged 事件来计算 Textbox1 的值。重置时不会清除 Textbox2 中的值。有什么建议吗??..我的重置代码

```
 function resetForm($form) {
        $form.find('input:text, input:password, input:file, select').val('');
        $form.find('input:checkbox')
             .removeAttr('checked').removeAttr('selected');      
    } 
```

我的 aspx 代码

```
 <asp:TextBox ID="TextBox2" runat="server" ReadOnly="true" />

     <asp:TextBox ID="Textbox1" runat="server"     OnTextChanged="Textbox1_TextChanged" AutoPostBack="true"></asp:TextBox> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-28T08:53:43.730

您的问题是您可能**没有**`resetForm`使用正确的表单值调用该函数。因为在 asp.net 上通常只有一个表单，您可以删除表单参数并将您的重置为：

```
function resetForm() {
        $('input:text, input:password, input:file, select').val('');
        $('input:checkbox')
             .removeAttr('checked').removeAttr('selected');      
    } 
```

[*] 测试和工作

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-06-28T09:27:25.780

尝试：

```
$('#Textbox2').val(""); 
```

将上面的行写入重置函数并调用重置方法..

# android - 安卓蓝牙设备对

> ID：11240801
> 
> 赞同：0
> 
> 时间：2012-06-28T08:29:16.527
> 
> 标签：android, bluetooth

谁能告诉我我的代码有什么问题？

```
startActivityForResult(new Intent(BluetoothAdapter.ACTION_REQUEST_DISCOVERABLE), DISCOVERY_REQUEST);

    @Override
    protected void onActivityResult(int requestCode,int resultCode, Intent data)
    { 
        if (requestCode == DISCOVERY_REQUEST) 
        {
            boolean isDiscoverable = resultCode > 0;
            int discoverableDuration = resultCode;
            if (isDiscoverable) 
            {
                UUID uuid = UUID.fromString("a60f35f0-b93a-11de-8a39-08002009c666");
                String name = "bluetoothserver";
                final BluetoothServerSocket btserver = bt.listenUsingRfcommWithServiceRecord(name, uuid);
                Thread acceptThread = new Thread(new Runnable() {
                public void run()
                {
                    try
                    {
                        BluetoothSocket serverSocket = btserver.accept();
                    }
                    catch (Exception e)
                    {
                        Log.d("BLUETOOTH", e.getMessage());
                    }
                }
                });
                acceptThread.start();
            }
        }
    } 
```

在此代码中，它在**onActivityResult**显示错误。

# rest - 如何使用 Spring MVC3 在 REST 中执行输入请求的 JAXB2 编组？

> ID：11240803
> 
> 赞同：0
> 
> 时间：2012-06-28T08:29:27.810
> 
> 标签：rest, spring-mvc

我是 Spring MVC（Spring 3）和 REST 的新手，我正在尝试一个小玩具应用程序来尝试 GET 和 POST Web 服务。我已经阅读了 Spring 的官方参考资料，并在 Stackoverflow、[REST 应用程序的 RequestBody、](https://stackoverflow.com/questions/8808030/requestbody-of-a-rest-application)在 Spring MVC 3中[传递请求参数中](https://stackoverflow.com/questions/4139538/pass-a-request-parameter-in-spring-mvc-3)找到了这些问题，但我仍然坚持让它工作。谁能给我提示我错过了什么？

我的控制器是这样的：

```
@Controller
@RequestMapping(value = "/echo")
public class EchoControllerImpl implements EchoController {
    @RequestMapping(method = RequestMethod.POST, value = "/echoByPost")
    public ModelAndView echoByPost(@ModelAttribute EchoDto input) {
        // ... 
    }
} 
```

我已经在应用程序ctx中放置了相应的转换器：

```
<mvc:annotation-driven />
<bean id="jaxb2Marshaller" class="org.springframework.oxm.jaxb.Jaxb2Marshaller" >
    <property name="classesToBeBound">
        <list>
            <value>foo.EchoDto</value>
        </list>
    </property>
</bean>
<bean class="org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter">
    <property name="messageConverters">
        <list>
            <ref bean="marshallingHttpMessageConverter" />
            <ref bean="stringHttpMessageConverter" />
        </list>
    </property>
</bean>

<bean id="stringHttpMessageConverter"
    class="org.springframework.http.converter.StringHttpMessageConverter" />

<bean id="marshallingHttpMessageConverter"
    class="org.springframework.http.converter.xml.MarshallingHttpMessageConverter">
    <property name="marshaller" ref="jaxb2Marshaller" />
    <property name="unmarshaller" ref="jaxb2Marshaller" />
</bean>
<!-- other beans like ViewResolvers  --> 
```

我什至尝试将这些添加到 web.xml，因为我看到某处提到它（尽管我真的不知道它是什么意思）

```
<filter>
    <filter-name>httpPutFormFilter</filter-name>
    <filter-class>org.springframework.web.filter.HttpPutFormContentFilter</filter-class>
</filter>

<filter-mapping>
    <filter-name>httpPutFormFilter</filter-name>
    <servlet-name>spring-rest</servlet-name>
</filter-mapping> 
```

然后我尝试通过 Curl 调用我的 Web 服务： `curl -d "echoDto=<EchoDto><message>adrian</message></EchoDto>" http://localhost:8001/foo/rest/echo/echoByPost.xml`

我发现我的传入对象不是通过解组 JAXB2 创建的。相反，似乎调用了包含整个请求 xml 消息的 ctor EchoDto(String)。

（我也尝试用 @RequestBody 注释参数，但更糟糕的是，我什至无法调用控制器方法）

有人可以告诉我我错过了什么吗？

Jaxb2Marshaller 使用 DTO 类正确设置，因为在另一个 GET REST webserivce 调用的情况下，我可以将它用作返回的模型对象。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-30T05:16:57.717

您需要设置请求的内容类型，并且不需要`echoDto=`：

```
curl -H "Content-Type: application/xml" -d "<EchoDto><message>adrian</message></EchoDto>" http://localhost:8001/foo/rest/echo/echoByPost.xml 
```

# c# - Visual Studio Indent 做了一些奇怪的事情

> ID：11240807
> 
> 赞同：2
> 
> 时间：2012-06-28T08:29:38.460
> 
> 标签：c#, .net, visual-studio-2010

我遇到的这个问题几天来一直是个大谜，我尝试在互联网上搜索，但找不到解释。

在问题发生之前，我的代码如下所示： ![布局不错](../Images/5159ff4860ba7bd09182a5762fc45eb4.png)

但是现在每次我要添加一些东西，它看起来像这样![在此处输入图像描述](../Images/a2af7d1efeae2516caec15a5347b8b4f.png)

VS 在我在 {} 之间按回车后执行此操作。所以我的问题，我无法弄清楚..我是否按下了 keycombo，devexpress 或 resharper 是否打破了它，我不知道。那么有人知道如何解决这个问题吗

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-28T08:34:17.553

我假设您的标签索引已更改，您可以按照以下步骤将它们更改回来：

*   打开工具/选项：

![在此处输入图像描述](../Images/a92ad10a6c840fb8a5e8eadc45ea101f.png)

*   选择文本编辑器/您的语言/标签：

![在此处输入图像描述](../Images/3fa1d89c3a22a24952abdf99bf17ac07.png)

您可能需要为选项卡格式化文件以再次重新调整:-)

# shell - 将变量引用为数组基并在双引号内

> ID：11240816
> 
> 赞同：1
> 
> 时间：2012-06-28T08:30:21.423
> 
> 标签：shell, awk

我有一个要求是在双引号内使用变量。我正在使用以下代码：

```
# each of these date,time are individual arrays and they have elements in it
access = {date,time,place,animal}
`for(acc in access)
{
       for(i in acc)
         print i,**acc**[i] > "/home/**acc**.txt"` 
```

现在我的要求是，既然`acc`是一个变量，我怎样才能在双引号内访问它，也可以作为一个数组 base 访问它。您能否分享您对此的看法。谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-28T14:27:10.233

我不相信 AWK 支持您尝试使用的那种间接方式。

至于使用带引号的字符串的变量，变量必须在引号*之外*，但相邻的字符串和变量是连接在一起的。

```
print i, something > "/home/" acc ".txt" 
```

如果`acc`是“日期”，那么文件名将是“/home/date.txt”。

# windows - 网络共享上的 Git 是否可行？

> ID：11240817
> 
> 赞同：9
> 
> 时间：2012-06-28T08:30:24.737
> 
> 标签：windows, git, network-share

是否可以在 Windows 网络中共享 Git 存储库？

如果我添加位于 Windows 共享文件夹中的远程源 - 这个解决方案会正常工作吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-28T09:46:41.343

根据2009 年 Git 邮件列表上的[一篇文章，Git](http://permalink.gmane.org/gmane.comp.version-control.git/122670)*应该*在 NFS 和 CIFS（例如 Windows）共享上无缝运行。Stack Overflow 上的一篇[类似文章](https://stackoverflow.com/a/751026/1301972)似乎证实了这一点，并解释了为什么它应该起作用。

你可能想做自己的研究，因为我无法找到比这更新的东西。我个人也不认识任何通过 CIFS 进行多用户共享存储库的人，所以我不会发誓有零错误或边缘情况。尽管如此，它肯定看起来风险相对较低。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-28T09:07:25.033

是的，它工作正常。

我毫不费力地在 Windows Share 中使用它。它不是一个裸仓库。但我 99.99% 确信裸存储库在网络共享中也能正常工作。当然，您需要对该共享具有读/写权限...

# javascript - 拉斐尔 JS，IE9 问题

> ID：11240818
> 
> 赞同：3
> 
> 时间：2012-06-28T08:30:26.793
> 
> 标签：javascript, internet-explorer, internet-explorer-9, raphael

我用 Raphael JS 编写了一个简单的游戏，它适用于除 IE9 之外的所有其他浏览器。在 IE9 上，它就像在其他浏览器中调用的函数也不会在这里调用一样分解。我觉得一些基本的东西出了问题。有人可以帮我解决这个问题....

游戏链接：[http ://www.onlinegamesbuzz.com/demo/shaheen/egypt/hangman/hangman.v1.html](http://www.onlinegamesbuzz.com/demo/shaheen/egypt/hangman/hangman.v1.html)

-谢谢

# jquery - 通过 JQuery Mobile 构建桌面应用程序

> ID：11240819
> 
> 赞同：9
> 
> 时间：2012-06-28T08:30:34.720
> 
> 标签：jquery, html, jquery-mobile

我想为台式计算机创建一个应用程序。

我想使用 JQuery Mobile 的强大功能。

但默认情况下，JQuery 将每个控件添加到一行。它在手机中看起来不错，如下图所示：

![在此处输入图像描述](../Images/b1fef029853e914d84c85d0a7ce2eb86.png)

但在大屏幕上会很难看：

![在此处输入图像描述](../Images/2636980927c16ebc9691fadfba4ecbfd.png)

我的问题是：**有没有办法用 JQuery Mobile 设计应用程序，多列样式？**

**以及如何使用 JQuery Mobile 创建水平滚动应用程序？**（我的意思是，就像 Windows 8 Metro 应用程序在页面中没有垂直滚动一样。它们在页面中有水平滚动）

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-28T14:24:16.307

jQuery Mobile 也非常适用于桌面。只需使用[网格](http://cssgrid.net/)来构建您的内容。

我认为 jQuery Mobile 的真正优势迟早会是，你只需要编写一次东西，就可以部署在从台式机到平板电脑到智能手机等任何设备上。虽然 jQuery Mobile 有一些路要走，但这将是我希望它发展的方向。

有很多水平滚动插件可用。尝试 JQuery Mobile [pagaintion](http://filamentgroup.com/examples/jqm-pagination/demo/)页面，[photoswipe](http://www.photoswipe.com/)图像或[overthrow](http://filamentgroup.github.com/Overthrow/)内容。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-28T15:50:31.633

将 Jquery mobile 用于桌面应用程序并不是一个好主意。相反，使用 Jquery UI 编写桌面应用程序和使用 JQuery mobile 编写移动应用程序是一个好主意。根据客户端类型（移动或桌面），使用适当的库并呈现响应。

您可能想查看支持多个平台的 Haxe [http://haxe.org/ 。](http://haxe.org/)您可能会发现用一种语言编写应用程序并交叉编译到许多其他目标平台/语言会很有趣。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2015-07-27T19:14:37.860

只需使用布局网格。此处提供了演示：http: [//demos.jquerymobile.com/1.3.0-rc.1/docs/content/content-grids.html](http://demos.jquerymobile.com/1.3.0-rc.1/docs/content/content-grids.html)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-28T10:58:31.650

我已经进行了一些将 HTML5 应用程序构建为桌面应用程序的实验，使用 Python 创建一个 webkit 窗口并将网站嵌入其中。如果您愿意，我建议您使用 JQuery，但是 JQuery 或 JQuery UI，而不是 JQuery Mobile，因为它是为触摸设备设计的，而不是为桌面环境设计的。jQuery Mobile 为您的桌面提供了 JQuery UI 没有的什么？

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-06-28T13:16:52.893

您可以模仿两列方法的 jQM 演示站点

*   [http://jquerymobile.com/demos/1.1.0/docs/about/intro.html](http://jquerymobile.com/demos/1.1.0/docs/about/intro.html)

对于滚动，您可以使用类似这样的东西

*   [http://code.jquery.com/mobile/latest/demos/experiments/scrollview/](http://code.jquery.com/mobile/latest/demos/experiments/scrollview/)
*   [http://code.jquery.com/mobile/latest/demos/experiments/scrollview/scrollview-direction.html](http://code.jquery.com/mobile/latest/demos/experiments/scrollview/scrollview-direction.html)（水平滚动）

# cmake - 对于 CMake 的“安装”，CONFIGURATIONS 参数有什么作用？

> ID：11240827
> 
> 赞同：7
> 
> 时间：2012-06-28T08:31:21.737
> 
> 标签：cmake

我不知道`CONFIGURATIONS`CMake`install`命令的参数是做什么的。当我`CONFIGURATIONS`在安装文件时使用调试或发布时，没有安装任何文件。发生了什么？

有人可以更详细地解释一下。最好能给我一些例子。

PS这不一样：[对于CMake的“安装”命令，COMPONENT参数可以做什么？](https://stackoverflow.com/questions/9190098/for-cmakes-install-command-what-can-the-component-argument-do)

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-07-02T09:22:41.273

从[文档](http://www.cmake.org/cmake/help/v2.8.8/cmake.html#command%3ainstall)：

> CONFIGURATIONS 参数指定安装规则适用的构建配置列表（调试、发布等）。

例如，考虑以下 CMakeListst.txt：

```
cmake_minimum_required(VERSION 2.8 FATAL_ERROR)
project(Test)
add_executable(MyTest main.cc)
install(TARGETS MyTest DESTINATION bin CONFIGURATIONS Release) 
```

这意味着

```
cmake --build . --target install --config Release 
```

将可执行文件`MyTest`（或`MyTest.exe`）放在`${CMAKE_INSTALL_PREFIX}/bin`, 和

```
cmake --build . --target install --config Debug 
```

不会安装任何东西。

# javascript - 如何保存 SlickGrid 列顺序（js）？

> ID：11240830
> 
> 赞同：2
> 
> 时间：2012-06-28T08:31:32.053
> 
> 标签：javascript, slickgrid

我的应用程序中有两个网格。

```
var columns1 = [
    {
        name: "Address",
        field: "address"
        id: "address",
        sortable: true
    }
]

var columns2 = [
    {
    {
        name: "Rating, in %",
        field: "rating"
        id: "rating_percent",
        resizable: false
    }
] 
```

它们彼此绝对独立。另外，我在另一个`js`文件中有一些网格事件描述。

```
 grid.onColumnsReordered.subscribe(function (e, args) {
        _this.updateHeaderRow();
            // here
    }); 
```

当用户更改列顺序时，我想保存此顺序。我应该更改（覆盖）DOM 元素，我的意思是`column1`和`column2`？所以问题：如何保存列顺序？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2014-11-06T20:27:05.327

njr101 的答案（使用 store.js）很棒，但请注意：store.js 不能存储函数（即用于编辑器、格式化程序），所以一旦你 store.get() 列，你需要重新添加函数，使用您的原始库存“列”数组：

```
if (store.get('gridColumns')) {
    grid.setColumns(store.get('gridColumns'));      // Restore settings if available

    grid.getColumns().forEach(function(ch) {    // Re-create editor and formatter functions
        var result = $.grep(columns, function(e){ return e.id == ch.id; });
        if (result[0]) {
            ch.editor = result[0].editor;
            ch.formatter = result[0].formatter;
        }
    });
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-28T09:44:36.367

我以前做过这个，我发现最简单的方法是将列存储在本地存储中。我使用了[store.js](https://github.com/marcuswestin/store.js)库，这使得这变得非常简单。

```
grid.onColumnsReordered.subscribe(function (e, args) {        
    store.set('gridColumns', grid.getColumns());
}); 
```

当您想恢复列时（例如，当用户返回页面时）您可以调用：

```
grid.setColumns(store.get('gridColumns')); 
```

# web-applications - Office365 的字体设置不保存

> ID：11240831
> 
> 赞同：-1
> 
> 时间：2012-06-28T08:31:33.810
> 
> 标签：web-applications, outlook, font-size, office365

我在 Outlook Web 应用程序中有一个奇怪的字体问题。

写电子邮件的默认字体拒绝更改为 10 号，如果我将其设置为 8 号，则为 8 号。如果我将其设置为 12 号，它将为 12 号。如果我将其设置为10 号，无论我上次放什么，它都会保持不变。

问题似乎出在服务器上。无论我使用什么计算机或浏览器登录，都存在同样的问题。

其他人有这种奇怪的行为吗？

“服务器端”上是否有任何控件可以解决此问题，或者我的个人资料是否可以以某种方式重置（不会丢失任何电子邮件）。

提前感谢您的任何和所有建议。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-01T09:00:58.587

这看起来很奇怪。致电支持，它是免费的，他们可能是帮助您的合适人选。

# coffeescript - 如何从 CoffeeScript 中父类的静态方法中获取原始构造函数？

> ID：11240835
> 
> 赞同：0
> 
> 时间：2012-06-28T08:31:51.117
> 
> 标签：coffeescript

考虑这个例子：

```
class Parent
  @staticMethod = ->
    #calleeConstructor = ????
    new calleeConstructor().x

class Child1 extends Parent
  constructor: ->
    @x = 10

class Child2 extends Parent
  constructor: ->
    @x = 20

#Usage
Child1.staticMethod() #Should return 10
Child2.staticMethod() #Should return 20 
```

是否可以？

例如，我知道我可以从父实例方法访问原始类的其他一些静态成员或构造函数。我的意思是：

```
class Parent
  instanceMethod: -> @constructor.staticVar

class Child1 extends Parent
  @staticVar = 10

class Child2 extends Parent
  @staticVar = 20

#Usage
console.log new Child1().instanceMethod() #Should return 10
console.log new Child2().instanceMethod() #Should return 20 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-28T17:42:12.647

在“类”方法中，`@`是类本身，因此您可以简单地说`new @`：

```
class Parent
  @staticMethod = ->
    (new @).x 
```

例如，给出这些：

```
class Child1 extends Parent
  constructor: (@x = 10) ->

class Child2 extends Parent
  constructor: (@x = 20) ->

class Child3 extends Child1
  constructor: (@x = 30) -> 
```

你会得到这些结果：

```
Child1.staticMethod() # 10
Child2.staticMethod() # 20
Child3.staticMethod() # 30​​​​​​​​​​​​​​​​​​​ 
```

演示（请打开您的控制台）：http: [//jsfiddle.net/ambiguous/A6xjy/1/](http://jsfiddle.net/ambiguous/A6xjy/1/)

# iphone - 使用 AVAudioPlayer 播放的音频在 iPhone 模拟器中有效，但在设备中无效

> ID：11240838
> 
> 赞同：1
> 
> 时间：2012-06-28T08:32:05.797
> 
> 标签：iphone, ios, audio, avaudioplayer

我需要播放一段视频以及一段 2 秒的小音频。在 iPhone 模拟器中一切正常，但在设备中却不行。我将我的音频文件存储在项目包中并从那里播放音频。

```
NSString *gotItsoundFilePath = [[NSBundle mainBundle] pathForResource:@"gotit" ofType:@"mp3"];
    NSData *gotItsampleData = [[NSData alloc] initWithContentsOfFile:gotItsoundFilePath];
    NSError *gotItaudioError = nil;
    gotItAudioPlayer = [[AVAudioPlayer alloc] initWithData:gotItsampleData error:&gotItaudioError];
    gotItAudioPlayer.numberOfLoops = 0; 
```

当我使用此代码时，此代码在 iPhone 模拟器中运行良好，`[gotItAudioPlayer play];`但相同的构建在设备中不起作用。我在某处做错了吗？有人可以帮忙吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-26T12:36:04.077

```
[[AVAudioSession sharedInstance] setCategory: AVAudioSessionCategoryPlayAndRecord error: nil];

UInt32 audioRouteOverride = kAudioSessionOverrideAudioRoute_Speaker;
AudioSessionSetProperty (kAudioSessionProperty_OverrideAudioRoute,sizeof (audioRouteOverride),&audioRouteOverride); 
```

把这段代码。在你制作玩家对象之前。

# c# - 首次运行时删除安装文件

> ID：11240844
> 
> 赞同：1
> 
> 时间：2012-06-28T08:32:30.533
> 
> 标签：c#, visual-studio, installation

我的 winform 安装项目中有一个 xml 文件。

首次运行应用程序使用来自该 xml 文件的数据，但随后更改数据并且不再使用该 xml 文件。仅当应用程序在输出目录中找到 xml 文件时才执行此操作。

如果我在第一次运行后删除了 xml 文件，那么在第二次运行时我被要求重新安装应用程序，因为某些文件丢失了。

xml 文件安装属性 Vital 设置为 False 但这无济于事。

换句话说，如何将安装期间需要的文件添加到 winform 设置项目而不是运行应用程序？

谢谢

# gwt - GWT - 将客户端和服务器拆分到不同的机器

> ID：11240848
> 
> 赞同：0
> 
> 时间：2012-06-28T08:32:47.603
> 
> 标签：gwt, client-server, rpc

我们的实验室有一台机器，它对来自外部的 http 连接开放。但是，这台机器很弱（内存小，CPU 慢）。我们还有其他更强大的机器，但它们位于防火墙后面，无法从实验室外部访问。

我正在编写一个 GWT 应用程序，其服务器要求非常高。是否可以将服务器安装在强计算机上，将客户端安装在弱计算机上，并让它们使用 RPC 连接？我认为它需要对 web.xml 文件进行一些更改，但究竟是什么？

从理论上讲，我可以将要求的部分包装在单独的 TCP/IP 服务器中，并让 GWT 服务器与其联系，但我想知道是否可以直接在 GWT 中进行。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-28T10:25:16.300

我曾尝试这样做，但仅成功地将 GWT 项目拆分为 3 个部分（客户端、RPC、服务器）作为 eclipse 项目。最后，您将得到 1 个大 WAR 文件，并将其部署在一个地方（除非其他人成功地真正分离了代码。）

您可以做的一个解决方案是设置另一台服务器，该服务器将执行所有服务器端处理（您的强大机器）并让 GWT servlet 像代理一样工作。它们接受来自客户端的请求并将数据转发到另一台服务器进行处理。然后等待响应。

你怎么做取决于你。您可以使用 Web 服务、直接套接字连接、JMS ..等。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-28T13:52:05.670

取决于你的设置。

GWT ACRIS-[请参阅此链接](http://code.google.com/p/acris/wiki/SeparateClientAndServer)。

EJB - 一种方法是将业务对象作为 EJB 保存在远程机器中，而您的 servlet 通过 RMI/JNDI 访问它们。

Spring - 另一种简单的方法是使用 Spring Remoting。[请参阅此链接](http://static.springsource.org/spring/docs/2.0.x/reference/remoting.html)。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-28T16:27:29.257

GWT 客户端从服务器下载并在 Web 浏览器中作为 javascript 代码运行。我不太明白您希望在单独的服务器上运行 GWT 应用程序的哪个部分。

如果您的 GWT servlet（RPC 服务实现）正在访问外部资源，例如数据库或 Web 服务，您可以将这些资源移动到单独的服务器上。

另一种选择是在“弱”服务器上安装反向代理，将特定请求转发到防火墙后面更强大的服务器。代理可以由“弱”服务器上的 Apache (httpd) 完成（使用 mod_proxy）。然后 Tomcat 只需要安装在更强大的机器上，并且会负责大部分处理。

# javascript - 停止它滚动到页面顶部

> ID：11240849
> 
> 赞同：0
> 
> 时间：2012-06-28T08:32:49.853
> 
> 标签：javascript, jquery

我有这段代码，它将 Li 限制为 15 个，并且有一个按钮显示了 15 个 Li，但它会将页面滚动到顶部我不想要的，我无法阻止它。你能帮我吗？

```
 $(window).load(function(){
    var vis = 15;

    $('li').slice(vis).hide();
    var $more = $('<a href="#">test</a>')
        $more.click(function () {
        $('li:hidden').slice(0, vis).show();        

    if($('li:hidden').length == 0)
        $more.hide();
    });
    $('ul').after($more);}); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-28T08:35:23.857

这应该这样做

```
$(window).load(function(){
    var vis = 15;

    $('li').slice(vis).hide();
    var $more = $('<a href="#">test</a>')
        $more.click(function (e) {
        e.preventDefault();
        e.stopPropagation();
        $('li:hidden').slice(0, vis).show();        

    if($('li:hidden').length == 0)
        $more.hide();
    });
    $('ul').after($more);}); 
```

# asp.net - 使用 itextSharp 5.3.0 aspx 到 pdf

> ID：11240852
> 
> 赞同：0
> 
> 时间：2012-06-28T08:33:13.857
> 
> 标签：asp.net, pdf, itextsharp

我正在使用这个 dll iTextSharp 5.3.0 来制作一个 pdf 文件。有没有办法在 pdf 中转换完整的 .aspx 页面？我的页面有网格和服务器端代码。

这是我的代码：

受保护的无效Button1_Click（对象发送者，EventArgs e）{

```
 createPDF(Server.MapPath("Default.aspx"));

}

private void createPDF(string html)
{

    TextReader reader = new StringReader(html);

    // step 1: creation of a document-object
    Document document = new Document(PageSize.A4, 30, 30, 30, 30);

    // step 2:
    // we create a writer that listens to the document
    // and directs a XML-stream to a file
    PdfWriter writer = PdfWriter.GetInstance(document, new FileStream("c://test.pdf", FileMode.Create));

    HTMLWorker worker = new HTMLWorker(document);

    document.Open();
    worker.StartDocument();
    List<IElement> p = HTMLWorker.ParseToList(new StreamReader(html), new StyleSheet());
    for (int k = 0; k < p.Count; k++)
    {
        document.Add((IElement)p[k]);
    }

    worker.EndDocument();
    worker.Close();
    document.Close();

} 
```

它正在工作，但文件 test.pdf 只是纯文本。html 没有得到很好的解释，我的网格丢失了，我的服务器端值（网格中的值）也丢失了。我还尝试了这里的代码： [http](http://forums.asp.net/t/1199774.aspx) ://forums.asp.net/t/1199774.aspx 和这里： [Itextsharp 中的 HTMLParser 问题](https://stackoverflow.com/questions/824265/problem-with-htmlparser-in-itextsharp)

提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-10-27T12:42:09.913

ITextSharp 仅呈现内联 css，在添加 CSS 文件时会出现问题。

```
 System.Web.HttpContext.Current.Response.ContentType = "application/pdf";
            System.Web.HttpContext.Current.Response.AddHeader("content-disposition", "attachment;filename=BookingDetails.pdf");
            System.Web.HttpContext.Current.Response.Cache.SetCacheability(HttpCacheability.NoCache);
            StringWriter sw = new StringWriter();
            HtmlTextWriter hw = new HtmlTextWriter(sw);

            this.CreateBookingMainDiv.RenderControl(hw);

            StringReader sr = new StringReader(sw.ToString());
            Document pdfDoc = new Document(new Rectangle(922,1296),7f,7f,7f,0f);

            PdfWriter writer = PdfWriter.GetInstance(pdfDoc, System.Web.HttpContext.Current.Response.OutputStream);

            pdfDoc.Open();

            //HtmlPipeline

            CssAppliers ca = new CssAppliersImpl();
            //ICssFile cfile = new CssFileProcessor();
            HtmlPipelineContext htmlContext = new HtmlPipelineContext(ca);
            htmlContext.SetTagFactory(Tags.GetHtmlTagProcessorFactory());
            //CSS stuff

            //var cssResolver = new StyleAttrCSSResolver();
            //var DamcoCss = XMLWorkerHelper.GetCSS(new FileStream(HttpContext.Current.Server.MapPath("~/css/damco.css"), FileMode.Open));
            ICssFile cfile = new CssFileImpl();

            ICSSResolver cssResolver = XMLWorkerHelper.GetInstance().GetDefaultCssResolver(true);

            //String DamcoCss = HttpContext.Current.Server.MapPath("~/css/damco.css");
            //String BootStrapCss = HttpContext.Current.Server.MapPath("~/css/bootstrap.css");
            //String BootStrapCssTheme = HttpContext.Current.Server.MapPath("~/css/bootstrap-theme.css");

            //Add the external CSS file        

            //cssResolver.AddCssFile(DamcoCss, true);
            //cssResolver.AddCssFile(BootStrapCss, true);
            //cssResolver.AddCssFile(BootStrapCssTheme, true);

            //Pipeline
            IPipeline pipeline = new CssResolverPipeline(cssResolver, new HtmlPipeline(htmlContext, new PdfWriterPipeline(pdfDoc, writer)));
            //XMLWorker
            XMLWorker worker = new XMLWorker(pipeline, true);
            //and...we parse
            XMLParser parser = new XMLParser(true, worker);
            //parser.AddListener(worker);
            parser.Parse(sr);
            parser.Flush();
            pdfDoc.Close();

            System.Web.HttpContext.Current.Response.Write(pdfDoc);
            System.Web.HttpContext.Current.ApplicationInstance.CompleteRequest();
            //System.Web.HttpContext.Current.Response.End(); 
```

使用 XMLWorker 而不是 HTMLWorker。像魅力一样工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-28T11:49:54.323

这是我诚实的建议！不要在 HTMLWorker.ParseToList 上浪费时间。它有一个非常基本的 HTML 解析器。试试这个包，你永远不会回头！ [https://github.com/pruiz/WkHtmlToXSharp](https://github.com/pruiz/WkHtmlToXSharp)

# c# - 如何向 ComboBox 集合添加/删除项目？

> ID：11240853
> 
> 赞同：1
> 
> 时间：2012-06-28T08:33:14.870
> 
> 标签：c#, winforms, combobox

我正在尝试从 ComboBox 集合中删除选定的项目：
项目是在设计时作为集合手动添加的。
按钮点击：

```
cb01.Items.Remove(cb01.SelectedItem);. 
```

这会删除该项目，但下次我打开表单时 - 该项目再次出现。
我必须有一个包含 5-6 个项目的数据库吗？
请帮忙。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-28T08:37:29.177

这`cb01.Items.Remove(cb01.SelectedItem);`只会从组合框中删除，而不是从绑定到组合框的数据源中删除。您可以将其从数据源中删除并重新绑定源。

如果您在代码中将组合框与数组绑定，则可以将数组保存在持久存储中，数据库表或 XML 文件，从组合框中删除后，您应该从数组中删除元素并将更改保存到持久存储

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-28T08:46:48.940

如果您不想使用数据库服务器，也可以使用文件（存在于 System.IO 命名空间中）。对于 5/6 项目，不值得使用数据库，并且在文件中您可以轻松找到项目的行并删除该行。希望能帮助到你。

# jquery - 在 DisplayFor 而不是 TextBoxFor 中显示从 Jquery 调用获得的值

> ID：11240855
> 
> 赞同：1
> 
> 时间：2012-06-28T08:33:17.657
> 
> 标签：jquery, asp.net-mvc-3

我有以下 Jquery 从对话框返回值并填写主页中的值：

```
function AutoCompleteTopayer(pName, addLine, pCity, pState, pZip, pPhone) {
        $(".PayerName").html(pName);
        $("#txtPayerAddress").val(addLine);
        $("#txtPayerCity").val(pCity);
        $("#txtPayerState").val(pState);
        $("#txtPayerZip").val(pZip);
        $("#txtPayerPhone").val(pPhone);
        var csz = pCity + ", " + pState + ", " + pZip;
        $("#txtCStateZip").val(csz);
        $("#SearchPayDlg").dialog("close");
    } 
```

我的观点代码：

```
 @Html.TextBoxFor(model => model.cityStateZip, new { @class = "fauxInput", id = "txtCStateZip" })
    @Html.HiddenFor(model => model.payerCityName, new { id = "txtPayerCity" })
    @Html.HiddenFor(model => model.payerStateCode, new { id = "txtPayerState" })
    @Html.HiddenFor(model => model.payerPostalZoneOrZipCode, new { id = "txtPayerZip" }) 
```

这给出了以下输出：
![输出1](../Images/8b52f9e2f005553da7ecb5c2b9e3e3c1.png)

* * *

当我将 TextBoxFor 替换为 DisplayFor ...时，未显示这些值。我发现一篇文章以某种方式解决了我的问题[，](https://stackoverflow.com/questions/10374318/change-displayfor-text-value-through-jquery)所以我想出了这段代码：

```
<span class="txtPayerName">
     @Html.DisplayFor(model => model.payerName, new { @class = "fauxInput" })
 </span> 
```

并在 JQuery 方法中：

```
$(".txtPayerName").html(pName); 
```

，但这也不起作用。任何解决方案？

* * *

**后来编辑**：对不起，我发现这完全是一个错字......最后一个确实有效..我已经编辑并将它放在这里，以便其他人可以从中受益。

上面的代码仅适用于 displayFor 的类不起作用（感谢 Darin Dimitrov），所以这应该起作用：

```
 <span class="txtPayerName fauxInput">
         @Html.DisplayFor(model => model.payerName)
     </span> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-28T08:36:53.903

帮助器的第二个参数`DisplayFor`根本不像你认为的那样做（应用 CSS 类）。它允许您将额外的 ViewData 传递给显示模板。

因此，您可以将 CSS 应用于包含元素

```
<span class="txtPayerName fauxInput">
    @Html.DisplayFor(model => model.payerName)
</span> 
```

然后调整您的选择器：

```
$('.fauxInput').html(pName); 
```

您的代码也可以工作，因为在您使用的选择器中，`$(".txtPayerName")`但重要的是要指出，`fauxInput`如果您使用这种方法，将不会有任何代码。

# jquery - JQuery Tablesorter，在排序列表中使用变量

> ID：11240862
> 
> 赞同：0
> 
> 时间：2012-06-28T08:33:49.257
> 
> 标签：jquery

我有一个根据 SQL 查询结果计算出的 HTML 表。列数不断变化。最后一列是“总计”。我想呈现按最后一列降序排序的表格。

有人可以帮助我如何实现这一目标吗？

我在互联网上看到的所有示例在排序列表行中都有硬编码的列号。

我尝试关注...（没有用）

```
var tableId = this.id;
var lastCol = $('#'+tableId).find('tr')[0].cells.length;
$('#'+tableId).tablesorter(
{
headers: {
       0: { 
       sorter: false
       }
},
sortList:[[lastCol,1],[1,0]],
widgets: ['zebra']
}); 
```

不用说...我是新手。任何帮助/建议表示赞赏...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-28T08:48:59.433

您可以尝试这样的方法来获取最后一列：

```
var lastCol = $('#'+tableId+' tr:first td:last').index(); 
```

这应该得到最后一列的正确索引......

# ios - 适用于 iOS 的 G'MIC 库

> ID：11240864
> 
> 赞同：-1
> 
> 时间：2012-06-28T08:33:54.433
> 
> 标签：ios, objective-c, iphone, image-processing, gmic

G'MIC（Grey's Magic Image Converter）库可以在 iOS 上运行吗？

为了开始适应它，我应该采取哪些步骤？

这是图书馆链接 [http://gmic.sourceforge.net/gimp.shtml](http://gmic.sourceforge.net/gimp.shtml)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-28T08:56:51.053

只要它是用 C++ 编写的，它在 iOS 设备上运行应该没有问题。您甚至可以为它编写一个精简的 ObjC++ 包装器，让您的生活更轻松一些，但以它目前的形式，它应该可以很好地工作。

# android - 自定义视图中的 UnsupportedOperationException

> ID：11240866
> 
> 赞同：0
> 
> 时间：2012-06-28T08:34:00.713
> 
> 标签：android, user-interface

我有一个自定义视图，它会在某些设备上引发 UnsupportedOperationException。它看起来像这样：

```
 java.lang.UnsupportedOperationException
     at android.view.GLES20Canvas.clipPath(GLES20Canvas.java:287)
     [...] 
```

我知道有 setLayerType 方法，但这仅在 API 级别 11 之后才受支持。如何解决 API 级别 8 的问题？

这是一个类似的[线程](https://stackoverflow.com/questions/7401319/use-hardwareacceleration-flag-with-canvas-clippath)，但该解决方案对我不起作用，因为我使用的是 API 级别 8。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-26T15:20:39.347

您可以`layerType`在布局 XML 中定义。

```
<com.nth.android.ui.view.CircularProgressBar
    android:layout_width="96dp"
    android:layout_height="96dp"
    android:background="@android:color/white"
    android:src="@android:color/black"
    android:layerType="software" /> 
```

我使用硬件加速不支持的功能的项目将目标 SDK 版本设置为 14，最低 SDK 版本为 8。属性`layerType="software"`适用于 Honeycomb (Android 3.2) 和 Gingerbread (Android 2.3.3)。

此外，在某些情况下`layerType="software"`，必须为包含相关视图的视图组（布局）设置。

# android - 为什么我的主屏幕壁纸损坏了？

> ID：11240871
> 
> 赞同：9
> 
> 时间：2012-06-28T08:34:25.313
> 
> 标签：android

嗨，我正在编码设置主屏幕壁纸。它工作正常。但是我的图像像素完全损坏，然后我的壁纸不适合主屏幕的实际尺寸。我正在尝试锻炼不同大小的图像。不幸的是，它对我不起作用。如何解决它。

我的代码在这里

```
WallpaperManager wallpaperManager = WallpaperManager.getInstance(this);
Drawable drawable = getResources().getDrawable(R.drawable.newimage);
Bitmap wallpaper = ((BitmapDrawable) drawable).getBitmap();           
try 
{
    wallpaperManager.setBitmap(wallpaper);
} 
catch (IOException e) 
{
    e.printStackTrace();
} 
```

我的截图原始图像
![在此处输入图像描述](../Images/61cdc0cf2ae72531ae0aa24cdd678b02.png)

我的屏幕截图 Android 模拟器主屏幕
![在此处输入图像描述](../Images/155d7794a2db16ba7bbe8a5a12446289.png)

为什么我的原始图像在这里损坏。
如何`My Original Image`根据`Emulator Size`.

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-24T11:18:00.273

你可以试试这个：

```
WallpaperManager wallpaperManager = WallpaperManager.getInstance(this);
Drawable drawable = getResources().getDrawable(R.drawable.newimage);
Bitmap wallpaper_source = ((BitmapDrawable) drawable).getBitmap();           
try {
    int w = wallpaperManager.getDesiredMinimumWidth();
    int h = wallpaperManager.getDesiredMinimumHeight();
    int x = (w-wallpaper_source.getWidth())/2;
    int y = (h-wallpaper_source.getHeight())/2;
    Bitmap wallpaper = Bitmap.createBitmap(w, h, Config.ARGB_8888);
    Canvas c = new Canvas(wallpaper);
    c.drawBitmap(wallpaper_source, x,y, null);
    wallpaperManager.setBitmap(wallpaper);
} 
catch (IOException e) 
{
    e.printStackTrace();
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-24T11:28:45.283

```
WallpaperManager wallpaperManager = WallpaperManager.getInstance(activity);
    BitmapFactory.Options myOptions = new BitmapFactory.Options();
    myOptions.inDither = true;
    myOptions.inScaled = false;
    myOptions.inPreferredConfig = Bitmap.Config.ARGB_8888;
    myOptions.inDither = false;
    myOptions.inPurgeable = true;
    Bitmap preparedBitmap = BitmapFactory.decodeResource(activity
            .getApplication().getResources(), R.drawable.newimage, myOptions);
    try 
    {
        wallpaperManager.setBitmap(preparedBitmap);
    } 
    catch (IOException e) 
    {
        e.printStackTrace();
    } 
```

这就是我用来使我的图像很好地缩放而不会出现疯狂线条的方法-您可以尝试将其用于墙纸-不确定它是否有效，请告诉我。

# javascript - 仅在 Firefox 中未定义事件错误

> ID：11240874
> 
> 赞同：0
> 
> 时间：2012-06-28T08:34:41.320
> 
> 标签：javascript, validation, firefox, dom-events

我使用以下脚本验证文本框以仅输入数字和 (.)，这意味着它是十进制文本框验证。它在 Internet Explorer 和 Google Chrome 中运行良好。如果我在 FireFox 中执行该函数，则会收到以下错误：

> **事件未定义**。

如何解决这个问题？

```
function abc(event) {

        if (event.keyCode > 47 && event.keyCode < 58) {
            return true;
        }
        if (event.keyCode == 8 || event.keyCode == 46)
        {
            return true;
        }
        return false;
    } 
```

我这样称呼这个函数：

```
$('.decimalValidate').live('keypress',function(){
          var decimalid=$(this).attr("id");
          var decimalval=$('#'+decimalid).val();
          var decimalvalidate=abc(decimalval);
          if(decimalvalidate == false)
          return false;
     }); 
```

我为这样的文本框分配此验证：

```
input type="text" id="Total" class="abc" 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-28T08:40:05.930

```
 $('.decimalValidate').live('keypress',function(e){
                              var decimalvalidate=abc(e); //this will point to the event of the keypress.
                              if(decimalvalidate == false)
                              return false;
                         }); 
```

我不确定你为什么要执行所有的 decimalid 和 decimalval 操作，但如果你想要这个事件，请按照我在上面编辑的代码中写的那样做。

祝你好运。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-28T08:40:39.727

decimalval 不是 Event 对象，您必须将其传递给 abc 函数才能找出您按下的键：

```
$('.decimalValidate').live('keypress',function(ev){
                          var decimalid=$(this).attr("id");
                          var decimalval=$('#'+decimalid).val();
                          var decimalvalidate=abc(ev);
                          if(decimalvalidate == false)
                          return false;
                     }); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-28T08:42:16.663

试试这个

```
function abc(event) {
        if(!event)
           event= window.event;

        if (event.keyCode > 47 && event.keyCode < 58) {
            return true;
        }
        if (event.keyCode == 8 || event.keyCode == 46)
        {
            return true;
        }
        return false;
    } 
```

和

```
$('.decimalValidate').live('keypress',function(e){
                              var decimalid=$(this).attr("id");
                              var decimalval=$('#'+decimalid).val();
                              var decimalvalidate=abc(evt); //keypress event
                              if(decimalvalidate == false)
                              return false;
                         }); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-12-22T10:42:13.987

```
$('.decimalValidate').on('keypress',function(event){
     var decimalid       =  $(this).attr("id");
     var decimalval      =  $('#'+decimalid).val();
     var decimalvalidate =  abc(event);

     if(decimalvalidate == false)
        return false;
});

function abc(event) {

        if (event.keyCode > 47 && event.keyCode < 58) {
            return true;
        }
        if (event.keyCode == 8 || event.keyCode == 46)
        {
            return true;
        }
        return false;
} 
```

它可以帮助你..

# tridion - 扩展当前发布/取消发布屏幕

> ID：11240878
> 
> 赞同：4
> 
> 时间：2012-06-28T08:34:50.580
> 
> 标签：tridion, tridion-2011

我有一个要求，当编辑器单击“取消发布”菜单命令时，我需要显示警报/弹出窗口。我将显示带有是/否按钮的弹出窗口，如果选择是，我们将继续并显示现有的 UnPub 屏幕。如果选择否，则不发生任何活动，用户返回屏幕。

1.  如何做到这一点？

2.  我们可以在不为自己创建新命令的情况下扩展/覆盖现有的 CME 命令吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-28T12:31:07.097

我昨天刚刚学会了如何做到这一点（感谢 Nuno Linhares）——您首先需要熟悉为 GUI 制作一个新的编辑器。

下一步是找到要覆盖的命令的名称（在您的情况下可能是“UnPublish”）。最简单的方法是在 GUI 中使用 Chrome 或 FieFox 的“检查元素”，并 `c:command="UnPublish"`在您希望扩展的按钮上查找类似的内容。

设置好基本编辑器后，您需要添加新命令以覆盖现有命令，如下所示：

```
<extensions>
    <ext:dataextenders />
    <ext:editorextensions>
      <ext:editorextension target="CME">
        <ext:editurls />
        <ext:listdefinitions />
        <ext:taskbars />
        <ext:commands />
        <ext:commandextensions>
          <ext:commands>
            <ext:command name="UnPublish" extendingcommand="CustomUnPublishCommand"/>
          </ext:commands>
          <ext:dependencies>
            <cfg:dependency>CustomUnPublish.CommandSet</cfg:dependency>
          </ext:dependencies>
        </ext:commandextensions>
        <ext:contextmenus />
        <ext:lists />
        <ext:tabpages />
        <ext:toolbars />
        <ext:ribbontoolbars />
      </ext:editorextension>
    </ext:editorextensions>
  </extensions> 
```

以正常方式添加所有依赖项（JS 和 CSS 等）和命令引用。

然后像编写任何其他 GUI 命令一样编写 JS 执行函数，并在处理弹出窗口后调用现有命令，如下所示：

```
CustomUnPublish.prototype._execute = function CustomUnPublish$_execute(selection, pipeline) {
    //Insert some logic to make a popup and confirm
        blnOkToProceed = true;
    //

    if (blnOkToProceed) {

        //EDIT: Original code
        $cme.getCommand("UnPublish")._execute(selection, pipeline);
        //EDIT: Or using the suggestion from @Peter below
        $commands.executeCommand("UnPublish", selection, pipeline);
        //End Edit
    }
    return;
}; 
```

# jquery - JQuery Mobile 无法在 IE Mobile 上运行。(MVC)

> ID：11240880
> 
> 赞同：0
> 
> 时间：2012-06-28T08:35:03.880
> 
> 标签：jquery, asp.net-mvc, asp.net-mvc-3, jquery-mobile, ie-mobile

我在我的 MVC 应用程序中创建了一个小型移动界面，基本上需要将从选择列表中选择的数字提交到服务器。

**代码：**

```
@{
    ViewBag.Title = "Freezer Status";
}
<div style="width: 210px">
    <div>
        <select style="width: 160px">
            <option value="1">1</option>
            <option value="2">2</option>
            <option value="3">3</option>
            <option value="4">4</option>
            <option value="5">5</option>
            <option value="6">6</option>
            <option value="7">7</option>
            <option value="8">8</option>
            <option value="9">9</option>
            <option value="10">10</option>
        </select>
    </div>
    <div>
        <input type="submit" id="submit" value="Save" style="width: 200px" />
    </div>
</div>
<div id="result">
</div>
<script type="text/javascript">
    $("select").change(function () {
        $("select option:selected").each(function () {
            $.ajax({
                data: {
                    fridgeNo: $(this).val()
                },
                type: 'GET',
                url: '@Url.Action("GetLastSubmitAction", "BlastFreezer")',
                cache: false,
                success: function (html) {
                    $("#submit").attr('value', html.Value);
                    $("#submit").prev().html(html.Text);
                }
            });
        });
    }).change();

    $("#submit").click(function () {
        $.ajax({
            data: {
                fridgeNo: $(this).val()
            },
            type: 'GET',
            url: '@Url.Action("ClockFridgeTime", "BlastFreezer")',
            cache: false,
            success: function (html) {
                $("#submit").attr('value', html.Value);
                $("#submit").html(html.Text);

                $("#result").html("Saved!");
            }
        });
    });
</script> 
```

当我开发它时，我使用 chrome 的代理切换插件测试了界面，它似乎工作正常。

**代理字符串：**

> Mozilla/4.0（兼容；MSIE 7.0；Windows Phone OS 7.0；Trident/3.1；IEMobile/7.0；诺基亚；N70）

但它不适用于需要使用该接口的设备。我只能告诉你（一直试图在设备上窥探特定的 IE 版本无济于事）是它的 windows mobile 和某种形式的袖珍 IE 移动设备。

![Chrome - 使用移动代理](../Images/0c67668539cdf567f4737777d2df014b.png) ![移动设备](../Images/afa5d0e58a19f7009fd8ab48caf29541.png)

保存按钮文本应根据服务器发回的文本确定。然后我需要能够进行简单的提交/ajax 调用。我最好的猜测是，Mobile IE 和它的老大哥一样喜怒无常，而 JQuery mobile 在它上面不起作用。如果是这种情况，我还能如何在不发布的情况下对服务器进行任何调用？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-28T13:28:29.553

这只是现在的部分答案。（一旦我弄清楚了，我会更新并将其标记为已解决：P）

我最终把 JQuery mobile 拿出来了。我的观点现在看起来像这样。on Change 事件仍然没有在 IE Mobile 上触发（但是当我在不同代理下的 chrome 中运行它时它可以工作），表单提交了冰箱，至少......

```
@{
    ViewBag.Title = "Freezer Status";
}
@using (Html.BeginForm("ClockFridgeTime", "BlastFreezer", FormMethod.Get, new { name = "UpdateForm" }))
{
    <div style="width: 210px">
        <div>
            @Html.DropDownList("fridgeNo", (List<SelectListItem>)ViewBag.Options, new { onChange = "PostForm(this, '/Index')", Style = "width:160px; height 80px;" })
        </div>
        <br />
        <div>
            <input type="submit" id="submit" value="@ViewBag.FridgeStatus" style="width: 200px; height:80px" />
        </div>
    </div>
}
<script type="text/javascript">
    function PostForm(btnClicked, newLocation) {
        var $form = $(btnClicked).parents('UpdateForm');

        $.ajax({
            type: "GET",
            url: document.UpdateForm.action.replace('/ClockFridgeTime', newLocation.toString()) + "?fridgeNo=" + document.getElementById('fridgeNo').value,
            success: function (response) {
                document.body.innerHTML = response;
            }
        });
        return false;
    }
</script> 
```

# jsf-2 - 带有 JSF 评估的 Spring Web 流

> ID：11240881
> 
> 赞同：0
> 
> 时间：2012-06-28T08:35:09.287
> 
> 标签：jsf-2, spring-webflow

我是 Spring Web 流的新手。

这是我的代码。

主流.xml

```
 <?xml version="1.0" encoding="UTF-8"?>
  <flow xmlns="http://www.springframework.org/schema/webflow"
xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
xsi:schemaLocation="
    http://www.springframework.org/schema/webflow
    http://www.springframework.org/schema/webflow/spring-webflow-2.0.xsd">
    <var name="hello"    class="org.springframework.webflow.samples.booking.hello"/>
<view-state id="hello">
<transition on="click" to="test"></transition>
</view-state>
<action-state id="test">
<evaluate expression="hello.saytest()">
</evaluate>
<transition on="yes" to="page1" ></transition>
<transition on="no" to="page2"></transition>

</action-state>
<view-state id="page1"></view-state>
<view-state id="page2"></view-state>

  </flow> 
```

你好.java

```
 package org.springframework.webflow.samples.booking;

     import java.io.Serializable;

   public class hello implements Serializable {

   String name;

  /**
   * 
   */

@Override
public String toString() {
return "hello [name=" + name + "]";
}

public String getName() {
return name;
}

public void setName(String name) {
this.name = name;
}

private static final long serialVersionUID = 1L;

public boolean saytest() {

System.out.println(name);
String test = "new";
if (name == test) {
    return true;

} else {
    return false;
}
   }
} 
```

你好.xhtml

```
 <!DOCTYPE composition PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
     <ui:composition xmlns="http://www.w3.org/1999/xhtml"
            xmlns:ui="http://java.sun.com/jsf/facelets"
            xmlns:h="http://java.sun.com/jsf/html"
            xmlns:f="http://java.sun.com/jsf/core"
            xmlns:p="http://primefaces.org/ui"
            template="/WEB-INF/layouts/standard.xhtml">
     <ui:define name="notes">
<p>
    Check the calendar widget and the tooltips on the credit card fields.
    The form uses Ajax-based validations to redisplay server-side errors without refreshing the entire page.
    The booking bean backing the form is a flow-scoped object (see   <strong>booking-flow.xml</strong>).        
</p>
</ui:define>
<ui:define name="content">
 <h:form>
<h:outputLabel for="price">Enter the Name:</h:outputLabel>
<h:inputText id="name" value="#{hello.name}">
</h:inputText>
<p:commandButton id="click" action="click" value="click" />
</h:form>
</ui:define>
   </ui:composition> 
```

在这里，我试图从 hello.xhtml 中获取一些价值，并尝试在 main-flow.xml 中对其进行评估。

如果我尝试的值是新的，那么它必须导航到 page1 或者它必须将其带到 page2.xhtml。现在我的情况是，即使我在 inputtext 框中输入新的，它只需要到 page2。谁能帮我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-28T16:16:27.757

改变

```
if (name == test) 
```

至

```
if (name.equals(test)) 
```

或者，简单地说，

```
if (name.equals("new")) 
```

见[http://www.javabeginner.com/learn-java/java-string-comparison](http://www.javabeginner.com/learn-java/java-string-comparison)

# c++ - GLSL 和 glBegin(GL_TRIANGLES) 不工作

> ID：11240882
> 
> 赞同：-1
> 
> 时间：2012-06-28T08:35:12.920
> 
> 标签：c++, opengl, glsl

此代码仅呈现十二面体并完全忽略该`glBegin(GL_TRIANGLES)`块：

```
glutSolidDodecahedron();
glBegin(GL_TRIANGLES);
glNormal3f(1, 0, 0);
glVertex3f(11, 0, 0);
glNormal3f(0, 1, 1);
glVertex3f(-11, 0, 0);
glNormal3f(0, 0, 1);
glVertex3f(0, 0, 11);
glEnd(); 
```

这两个着色器非常简单：

顶点着色器：

```
varying vec3 normal;
void main()
{   
gl_Position = ftransform();
gl_FrontColor = gl_Color;
gl_BackColor = gl_Color;
normal =  gl_Normal;
normal = gl_NormalMatrix  * normal;
} 
```

和碎片：

```
uniform vec3 lightDir;
varying vec3 normal;
void main()
{
    float intensity = dot(lightDir, normal);
    gl_FragColor =  0.5 * (1.5 + intensity) * gl_Color;
} 
```

虽然`glutSolidX`函数类型在此示例中运行良好（基于[Lightouse3D](http://www.lighthouse3d.com/tutorials/glsl-tutorial/hello-world-in-glsl/)教程），但如何快速绘制在帧与帧之间更改坐标的三角形（我尝试了数组和 GL_DYNAMIC_DRAW，但与旧的“固定管道”相比，这工作量太大了“ 方法）。我看到其他人仍然`glBegin(..); glEnd();`成功地使用带有 GLSL 着色器的块，所以这一定是可能的。可能缺少什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-28T08:56:44.110

The coordinates of the vertices of the triangle in the glBegin/glEnd block are

```
 11, 0,  0
-11, 0,  0
  0, 0, 11 
```

which means it lies completely flat in the view. This is like viewing a sheet of paper from such a hard angle, it becomes a line. Because triangles have no thickness, not even this line is drawn and the triangle seems invisible.

# java - SSL Servlet 实施问题：收到超过最大允许长度的记录

> ID：11240885
> 
> 赞同：1
> 
> 时间：2012-06-28T08:35:20.367
> 
> 标签：java, servlets, security, keystore

我在我的应用程序中使用 SSL 时遇到问题。我做了以下事情：

我在我的安全约束标签中添加了以下段落：

```
 <user-data-constraint>
        <transport-guarantee>CONFIDENTIAL</transport-guarantee>
</user-data-constraint> 
```

并在我的 Tomcat 的 Server.xml 中添加了以下内容

```
<Connector port="8443"
maxThreads="150" minSpareThreads="25" maxSpareThreads="75"
enableLookups="true" disableUploadTimeout="true"
acceptCount="100" debug="0" scheme="https" secure="true"
clientAuth="false" sslProtocol="TLS"
keystoreFile="c:/keystore.key"
keystorePass="mypassword" /> 
```

现在在

```
https://localhost:8443/Appname/page.jsp 
```

我得到以下

```
Secure Connection Failed
An error occurred during a connection to localhost:8443.

SSL received a record that exceeded the maximum permissible length.

(Error code: ssl_error_rx_record_too_long)
  The page you are trying to view cannot be shown because the authenticity of the received data could not be verified.
  Please contact the website owners to inform them of this problem. Alternatively, use the command found in the help menu to report this broken site. 
```

有什么建议么 ？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-28T13:54:58.600

您必须[在您的连接器上设置](https://tomcat.apache.org/tomcat-7.0-doc/config/http.html#SSL%20Support)[`SSLEnabled`为`true`](https://tomcat.apache.org/tomcat-7.0-doc/config/http.html#SSL%20Support)。

```
<Connector port="8443"
maxThreads="150" minSpareThreads="25" maxSpareThreads="75"
enableLookups="true" disableUploadTimeout="true"
acceptCount="100" debug="0" scheme="https" secure="true"
clientAuth="false" sslProtocol="TLS"
keystoreFile="c:/keystore.key"
keystorePass="mypassword"
SSLEnabled="true" /> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-07-08T09:07:59.353

它还取决于您使用的浏览器。我自己在本地环境中也遇到了同样的问题。我在 Firefox 和 Chrome 中尝试过并遇到了这个问题。但是当我在谷歌上阅读了几篇文章后尝试使用 Internet Explorer 时，它没有任何问题。

-谢谢

# sql - 将表中的一列替换为不同表中的列并选择 *

> ID：11240892
> 
> 赞同：0
> 
> 时间：2012-06-28T08:35:40.877
> 
> 标签：sql, oracle, select

为有点令人困惑的标题道歉，我一直在努力寻找我的问题的答案，部分原因是很难在标题行中简洁地描述它或想出一个好的搜索字符串。Anyhoooo，这是我面临的问题：

问题的简短版本是：如何在 Oracle 理解的有效 SQL 中编写以下（无效但可以理解的 SQL）：

```
select B.REPLACER as COL, A.* except A.COL from A join B on a.COL = B.COL; 
```

这是长版（如果你已经知道我想从阅读短版中得到什么，你不需要阅读这个 :P ）：

我的（简化的）任务是提供对表数据进行处理并将其作为子查询提供的服务。该表有很多列（几十个或更多），我坚持使用“select *”而不是一一明确列出所有列，因为没有我可以在表中添加或删除新列知道，尽管我的下游系统会知道并相应地进行调整。

比如说，这个表（我们从现在开始称它为表 A）有一个名为“COL”的列，我们需要将该 COL 中的值替换为两个 COL 值匹配的表 B 的 REPLACER 列中的值。

我该怎么做呢？我无法重命名该列，因为下游系统需要“COL”；我不能没有“expect A.COL”部分，因为这会导致 sql 模棱两可。

感谢您的帮助，全能的 StackOverflow

射线

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-28T08:52:52.817

您可以使用`table.*`或`table.fieldName`。

没有可用的语法`table.* (except field X)`。

这意味着您只能通过明确列出所有字段来获得您想要的东西......

```
select
  A.field1,
  A.field2,
  B.field3,
  A.field4,
  etc
from
  A join B on a.COL = B.COL; 
```

这意味着您可能需要重新建模您的数据，以确保您不会不断获得新字段。 `OR`写动态sql。查询数据库以找出列名，使用代码编写如上所述的查询，然后运行该动态生成的查询。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-28T09:20:57.743

如前所述，您不能在常规 sql 中指定不选择哪一列。您可以为此编写一个过程，但这会非常复杂，因为您需要返回一个变量表类型。可能是带有 refcursor 魔法的东西。

我能想到的最接近的是加入使用。这将为您提供第一个字段中的列 col 一次，其余为 a 和 b 中的所有列。所以基本上不是你想要的。:)

```
select *
from   a
join   b using (col) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-28T08:43:57.060

Try this: (not tested)

```
select Case B.COL
       when null then A.COL
       else B.REPLACER
       end as COLAB, A.*
from A left join B on A.COL = B.COL; 
```

This should get the B.REPLACER when exists B.COL = A.COL, you can add more column in the select (like sample col1, col2) or use A.* (change COL into COLAB to make it distinguish with A.COL in A.*) .

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-28T09:30:42.993

让我们从首要原则开始。 `select * from ....`是一个等待发生的错误，在生产代码中没有位置。当然，每个人都使用它，因为它需要更少的打字，但这并不是一个好的做法。

除此之外，ANSI SQL 标准不支持 `select * except col1 from ....`语法。我知道很多人希望它会，但事实并非如此。

有几种方法可以避免过度打字。一种是通过从数据字典中选择，使用像 USER_TAB_COLUMNS 这样的视图之一来生成查询。如果您需要大量这样的查询，则值得编写 PL?SQL 块来执行此操作。

更简单的 hack 是使用 SQL*Plus`describe`列出表 A 的结构；将其剪切'n'粘贴到支持正则表达式的 IDE 中并编辑列以提供查询的投影。

这两个选项可能会让您觉得很费力，但坦率地说，任何一种解决方法（尤其是第二种方法）都会比询问 StackOverflow 花费更少的精力。下次你会知道的更好。

# javascript - 如何使用 JQuery 阻止锚点重定向

> ID：11240897
> 
> 赞同：24
> 
> 时间：2012-06-28T08:36:07.193
> 
> 标签：javascript, jquery, html

如果用户未登录，如何停止锚标记重定向到另一个页面？我有一个功能来检查用户是否登录。我想用 JQuery 或 JavaScript 来做。这是我迄今为止尝试过但没有结果的方法：

```
<a href="www.somewhere.com" id="yes">Read More</a>

<script type="text/javascript">
    $(document).ready(function(){
        $('a').click(function(){
            var id = $(this).attr('id');
            if(id == 'yes'){
                //i want to prevent
            }else{
                //redirect
            }
        });
    });
</script> 
```

* * *

## 回答 #1

> 赞同：58
> 
> 时间：2012-06-28T08:38:01.403

请使用[http://api.jquery.com/event.preventDefault/](http://api.jquery.com/event.preventDefault/)

**演示** [http://jsfiddle.net/aRBY4/6/](http://jsfiddle.net/aRBY4/6/)

```
e.preventDefault() 
```

**引用**

> 如果调用该方法，则不会触发事件的默认动作。

另外，如果我建议阅读以下内容：[.prop() vs .attr()](https://stackoverflow.com/questions/5874652/prop-vs-attr)

希望这可以帮助，

**示例代码**

```
 $('a').click(function(event){
    event.preventDefault();
    //do whatever
  }); 
```

**在你的情况下**，请试试这个

```
$(document).ready(function() {
    $('a').click(function(event) {
        var id = $(this).attr('id');
        if (id == 'yes') {
            event.preventDefault();
            //i want to prevent
        } else {
            //redirect
        }
    });
});​ 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-28T08:38:16.073

将您的点击事件处理程序更改为此

```
$('a').click(function(e){
    var id = $(this).attr('id');
    if (id == 'yes')
    {
        e.preventDefault();
        e.stopPropagation();
    }
    else
    {
        //redirect
    }
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-28T08:55:21.443

使用[event.preventDefault()](http://api.jquery.com/event.preventDefault/)。它用于防止事件的默认操作。

```
<script type="text/javascript">
$(document).ready(function(){
      $('a').click(function(){
          var id = $(this).attr('id');
         if(id == 'yes'){
             event.preventDefault() 
         }else{
            //redirect
         }
     });
});
</script> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2020-03-04T07:19:31.170

试试这个

```
 $("a").on("click",function(e){
         e.preventDefault();
         alert("Clicked");

     }); 
```

快乐编码；

# ruby - Rails 3 缓存不起作用。达利

> ID：11240902
> 
> 赞同：1
> 
> 时间：2012-06-28T08:36:48.380
> 
> 标签：ruby, ruby-on-rails-3, memcached, dalli

development.rb缓存配置

```
 config.action_controller.perform_caching = true
  config.cache_store = :dalli_store, 'localhost:11211',
    { :namespace => APP_NAME, :expires_in => 3.month, :compress => true } 
```

production.rb 缓存配置

```
 config.action_controller.perform_caching = true
   config.cache_store = :dalli_store, 'localhost:11211',
     { :namespace => APP_NAME, :expires_in => 3.month, :compress => true } 
```

在控制台中

```
rails c production
Loading production environment (Rails 3.2.3)
1.9.3-p125 :001 > Rails.cache.write 'res', "Hello World"
 => true 
1.9.3-p125 :002 >  Rails.cache.read 'res'
 => nil 
1.9.3-p125 :003 > 
```

为什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-14T22:45:24.880

如果您以这种方式定义到期，memcached 的限制为 30 天 - [Memcache 最大密钥到期时间](https://stackoverflow.com/questions/1418324/memcache-maximum-key-expiration-time)

另见[https://github.com/mperham/dalli/issues/55](https://github.com/mperham/dalli/issues/55)

# php - PHP：如何通过 curl 发布 3 GB 字符长字符串或在浏览器中输出？

> ID：11240903
> 
> 赞同：0
> 
> 时间：2012-06-28T08:36:49.020
> 
> 标签：php, http, curl, stream

我正在做一个在线数据库转储工具。

但是当我输出数据时，PHP 会一直等到它可以计算出它需要转储的长度，这可能会使用户混淆 API 是否正常工作。

如何分块发送响应？

我尝试添加：

```
header('Transfer-Encoding:chunked'); 
```

但是Chrome浏览器无法用它打开页面。

我需要做什么？

谢谢！

* * *

答：应该在发送之前对数据进行编码。

```
function chunk_encoding($chunk) {
    printf("%x\r\n%s\r\n", strlen($chunk), $chunk);
    flush();
    ob_flush();
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-28T09:37:56.553

向用户充斥 3GB 数据并不是明智之举。假设这个用户有 DSL 连接（比如说 6MBit），他必须等待可怕的大约 69 分钟，直到所有数据都可以使用（例如复制）。此外，不允许他关闭加载此数据的选项卡，否则数据将丢失。最后，如果被迫显示这么多数据，任何浏览器都会变成一个消耗内存的怪物。

一个更好的解决方案是在服务器上生成一个文件，然后通过显示链接让用户下载这个文件。这样，用户可以在后台下载文件（可能使用任何下载管理器）并可以在本地检索数据。

# macos - 如何创建 Helper App 并将其附加到 OSX 中的主包？

> ID：11240909
> 
> 赞同：2
> 
> 时间：2012-06-28T08:37:09.067
> 
> 标签：macos, cocoa

我已阅读有关该论点的每篇文章，但找不到解决方案（以及好的文档！）

我不知道如何以正确的方式生成 Helper 应用程序可执行文件。

目前，我只是在“发布”模式下运行 Helper 应用程序，而不是在“复制文件”构建阶段将产品 Helper app.app 复制到主应用程序中。

这是正确的方法吗？

以这种方式运行应用程序可以工作，但我在验证 Main.app 时遇到错误

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-29T10:38:27.410

你为什么不将你的助手“应用程序”作为助手库发布？

# apache - htaccess codeigniter mod-rewrite，rewritecond 忽略主应用程序目录中的子目录

> ID：11240911
> 
> 赞同：0
> 
> 时间：2012-06-28T08:37:10.907
> 
> 标签：apache, .htaccess, codeigniter, mod-rewrite

我安装了 codeigniter，正在运行，一切都很好。除了我现在想为我的用户提供一种上传图像的方法。我能想到的唯一放置文件夹的地方是应用程序目录（在我的例子中恰当地重命名为“app”）。反正。由于它是一个 MVC，我需要在所有地方运行重写条件。我相信这是其中一种情况。

我需要的是在 app 文件夹中有一个适用于这个子文件夹的条件

我原来的重写条件是

```
RewriteCond $1 !^(index\.php|static|robots\.txt) 
```

这对那些人来说很好，但不适用于这种情况，所以我需要一个适用于上述但支持应用程序/上传的新条件（这甚至可能）？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-29T23:48:57.397

`application/`如果你把你的资产放在外面（正如罗伯特提到的），生活会容易得多。

您也可以从中挑选大量优秀的资产管理[Sparks](http://getsparks.org)来帮助解决这个问题 - 我为我的 CI 项目编写了一个名为[sk-asset](http://getsparks.org/packages/sk-asset/versions/HEAD/show)的 Spark ，它提供了许多视图帮助器并且结构清晰：

*   /CIAppRoot
    *   资产/
        *   css/
        *   下载/
        *   图片/
        *   js/
        *   较少的/
        *   瑞士法郎/
        *   上传/
        *   xml/
    *   应用/
    *   系统/

... htaccess 设置可以简单地绕过现有文件/目录/等的 CI 路由：

```
<IfModule mod_rewrite.c>
  Options +FollowSymlinks
  RewriteEngine On

  # block hidden directories
  RewriteRule "(^|/)\." - [F]

  RewriteCond $1 !^(index\.php|assets|robots\.txt|favicon\.ico)
  RewriteCond %{REQUEST_FILENAME} !-f
  RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule ^(.*)$ ./index.php/$1 [L,QSA]
</IfModule> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-28T09:43:11.310

上传文件夹不必在您的应用程序目录中。事实上，如果它不在里面，那就更好了。通过这种方式，您可以将应用程序与内容（上传）分开。如果你这样做，你也不需要重写条件。这是我的 CI 目录的样子：

```
/application
/assets
/uploads
/system 
```

# php - PHP，Zend 框架错误被 Apache 消耗

> ID：11240914
> 
> 赞同：0
> 
> 时间：2012-06-28T08:37:15.717
> 
> 标签：php, zend-framework, apache2

我在一个新的 Ubuntu 系统中安装了 Apache2、PHP5，现在我上传了一个 Zend Framework 项目，我看到 Zend 和 PHP 错误正在被 Apache 消耗，并且我总是在浏览器上收到内部服务器错误 500。当我查看 apache2 的错误日志时，我发现那里记录了 PHP 错误。

我的 error_reporting 为 E_ALL | E_STRICT, display_errors 在 php.ini 中打开。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-28T09:06:03.727

默认情况下，ZF 在开发模式下显示错误，但在生产模式下隐藏它们（这是一件好事）。您可以在 application.ini 中更改这些设置。如果您在开发模式下遇到此问题，请确保正确设置了 APPLICATION_ENV。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-28T09:18:34.137

在我将 AllowOverride 设置为 All 后，一切正常...

# jquery - 如何使用 .load 将 li 附加到当前 ul？

> ID：11240915
> 
> 赞同：1
> 
> 时间：2012-06-28T08:37:24.857
> 
> 标签：jquery, append, add

我正在搜索 amd 我有以下代码行：

```
 $('#searchResults').add($('li:last').load(url + '&' + urlExtra)); 
```

这会添加 10 个带有内容的 li 标签，但不是将其添加到 ul 中，而是将最后一个 li 与加载的列表嵌套在一起。为了尝试澄清我想要这样的结果：

```
<ul>
<li>already in list</li>
<li>already in list</li>
<li>already in list</li>
<li>already in list</li>
<li>new li from load</li>
<li>new li from load</li>
</ul> 
```

但我得到了这个：

```
 <ul>
    <li>already in list</li>
    <li>already in list</li>
    <li>already in list</li>
    <li>already in list
       <li>new li from load</li>
       <li>new li from load</li>
    </li>
    </ul> 
```

任何指向正确方向的指针将不胜感激。

亲切的问候雷切尔

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-28T08:43:35.993

Use [`jQuery.get()`](http://api.jquery.com/jQuery.get/) instead :

```
$.get(url + '&' + urlExtra,function(data) {
   $('#searchResults').append('<li>' + data + '</li>');
}) 
```

`#searchResults` in my case is the `ul`. This uses [`.append()`](http://api.jquery.com/append/) to add the new `li` to the end of the `ul`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-28T08:45:13.557

jQuery 的`load()`功能 -用下载的内容*替换*父项的内容。在您的代码中，加载调用的父级是您的最后一个`li`而不是`ul`. 您需要的是将内容*附加*到父级而不是替换它的东西。所以理论上，`load()`不能为你做。使用类似`.ajax()`or`.get()`来获取内容，然后将其附加到您的父母`ul`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-28T08:55:37.483

Maybe try:

```
$.get('foo.html', function(data) {
    $('#results').append(data);
}); 
```

**HTML:**

```
<ul id="results">
    <li>Item 1</li>
</ul> 
```

**foo.html:**

```
<li>New item</li> 
```

**Result:**

```
<ul id="results">
<li>Item 1</li>
<li>New item</li>
</ul> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-28T08:40:21.450

不加到最后一个li，为什么不加到ul本身呢？

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-28T08:41:36.467

尝试将新的“li”附加到 ul：

```
$('#searchResults ul').append("<li>asdasdasd</li>"); 
```

# java - Jmeter - 根据响应代码或变量对侦听器进行分组

> ID：11240916
> 
> 赞同：2
> 
> 时间：2012-06-28T08:37:28.760
> 
> 标签：java, jmeter

我正在为 Web 服务准备负载测试，几乎完成了，但我遇到了一个问题。现在我有一些听众，例如图表，一个用于成功的样本，另一个用于失败。我希望能够在某处创建更多侦听器或表中的列，这将告诉我在没有错误、发生错误“A”时服务运行需要多长时间（响应代码......或变量..)、错误“B”等以及这些错误发生的次数。

所以输出的一个例子是这样的：

```
Success | 1000 | avg 32ms   | max 120 ms | min 20 ms, ...
Errors  |  300 | avg 50 ms  | max 300 ms | min 10 ms, ...
Error A |  100 | avg 10 ms  | max 20 ms  | min 8 ms, ...
Error B |   54 | avg 100 ms | max 200 ms | min 60 ms, ... 
```

等等等等

JMeter有可能吗？如果是这样，怎么做？谢谢你的帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-28T11:33:40.470

1）首先查看[Jmeter Plugins](http://code.google.com/p/jmeter-plugins/)项目中现有的自定义侦听器：

*   [每秒响应代码](http://code.google.com/p/jmeter-plugins/wiki/ResponseCodesPerSecond)
*   [页面数据提取器](http://code.google.com/p/jmeter-plugins/wiki/PageDataExtractor)

并尝试按原样使用它们或尝试采用它们或 jmeter 的开箱即用侦听器来满足您的需求（两个项目的资源都可用）。

2）您还可以按照自己的方式处理jmeter生成的结果文件（.jtl）以获得您需要的内容：

*   [https://stackoverflow.com/questions/4669467/jmeter-how-to-create-summary-report-from-jtl-file](https://stackoverflow.com/questions/4669467/jmeter-how-to-create-summary-report-from-jtl-file)
*   [html-reports 使用 Jmeter Ant 任务](http://www.programmerplanet.org/pages/projects/jmeter-ant-task.php)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-28T11:28:47.173

是的，这是可能的，添加一个监听器。`View results in Table`并根据您的需要进行配置。

# python - Facebook 发布 HTTP 错误 400：错误请求

> ID：11240920
> 
> 赞同：0
> 
> 时间：2012-06-28T08:37:41.193
> 
> 标签：python, facebook-graph-api, urllib2, facebook-opengraph

嘿，我正在尝试通过 python 的 urllib2 库向 Facebook 发布分数。

```
import urllib2,urllib

url = "https://graph.facebook.com/USER_ID/scores"
data = {}
data['score']=SCORE
data['access_token']='APP_ACCESS_TOKEN'
data_encode = urllib.urlencode(data)
request = urllib2.Request(url, data_encode)
response = urllib2.urlopen(request)
responseAsString = response.read() 
```

我收到此错误：

```
 response = urllib2.urlopen(request)
  File "/System/Library/Frameworks/Python.framework/Versions/2.6/lib/python2.6/urllib2.py", line 124, in urlopen
    return _opener.open(url, data, timeout)
  File "/System/Library/Frameworks/Python.framework/Versions/2.6/lib/python2.6/urllib2.py", line 389, in open
    response = meth(req, response)
  File "/System/Library/Frameworks/Python.framework/Versions/2.6/lib/python2.6/urllib2.py", line 502, in http_response
    'http', request, response, code, msg, hdrs)
  File "/System/Library/Frameworks/Python.framework/Versions/2.6/lib/python2.6/urllib2.py", line 427, in error
    return self._call_chain(*args)
  File "/System/Library/Frameworks/Python.framework/Versions/2.6/lib/python2.6/urllib2.py", line 361, in _call_chain
    result = func(*args)
  File "/System/Library/Frameworks/Python.framework/Versions/2.6/lib/python2.6/urllib2.py", line 510, in http_error_default
    raise HTTPError(req.get_full_url(), code, msg, hdrs, fp)
urllib2.HTTPError: HTTP Error 400: Bad Request 
```

不确定这是否与 Facebook 的 Open Graph 或不正确的 urllib2 API 使用有关。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-28T09:14:04.093

您可能必须提供 user:agent 作为某些浏览器。我记得在某些网站上运行爬虫时遇到了类似的错误，因为它检测到没有浏览器在调用它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-29T04:52:18.820

我运行了你的代码并得到了同样的错误（正文中没有更多的错误，会在评论中发布但我猜还不能）所以我用谷歌搜索“发布 facebook 分数”。

我相信您需要先授予您的应用发布分数的权限，除非您已经这样做了。请参阅[http://developers.facebook.com/blog/post/539/](http://developers.facebook.com/blog/post/539/)。

# xslt - 基本的 xslt 转换

> ID：11240921
> 
> 赞同：0
> 
> 时间：2012-06-28T08:37:52.060
> 
> 标签：xslt

我有一个 XML 请求，我需要修改（到 XML），然后进一步发送。我没有 XSLT 的先验知识。说我有

```
<Combined>
<Profile>
  <Fullname>John Doe</Fullname>
  <OtherData>
    <Birthdate>1996</Birthdate>
    <FavoriteBooks>
      <Book>
        <id>1</id>
        <description>Libre1</description>
      </Book>
      <Book>
        <id>2</id>
        <description>Libre2</description>
      </Book>
      <Book>
        <id>3</id>
        <description></description>
      </Book>
      <Book>
        <id>4</id>
        <description>Libre4</description>
      </Book>
    </FavoriteBooks>
  </OtherData>
</Profile>
<LoadedData>
  <NewBirthdate>1998</NewBirthdate>
  <BooksUpdate>
    <Book id="1">
      <BookText>Book1</BookText>
    </Book>
    <Book id="2">
      <BookText>Book2</BookText>
    </Book>
    <Book id="3">
      <BookText>Book3</BookText>
    </Book>
    <Book id="4">
      <BookText>Book4</BookText>
    </Book>
    <Book id="5">
      <BookText>Book5</BookText>
    </Book>
  </BooksUpdate>
</LoadedData> 
```

并想得到

```
<Profile>
<Fullname>John Doe</Fullname>
<OtherData>
  <Birthdate>1998</Birthdate>
  <FavoriteBooks>
    <Book>
      <id>1</id>
      <description>Libre1Book1</description>
    </Book>
    <Book>
      <id>2</id>
      <description>Libre2Book2</description>
    </Book>
    <Book>
      <id>3</id>
      <description>empty</description>
    </Book>
    <Book>
      <id>4</id>
      <description>Libre4Book4</description>
    </Book>
    <Book>
      <id>5</id>
      <description>new Book5</description>
    </Book>
  </FavoriteBooks>
</OtherData> 
```

我做了一个非常可悲的尝试，这显然行不通。

```
<?xml version="1.0" encoding="utf-8"?>
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform"
  xmlns:msxsl="urn:schemas-microsoft-com:xslt" exclude-result-prefixes="msxsl"
>
<xsl:output method="xml" indent="yes"/>
<xsl:template match="/">
  <Profile>
    <xsl:apply-templates select="Combined/Profile/Fullname" />
  </Profile>
  <Otherdata>
    <Birthdate>
      <xsl:apply-templates select="Combined/LoadedData/NewBirthdate"/>
    </Birthdate>
    <FavoriteBooks>
      <xsl:for-each select="/Combined/Profile/OtherData/FavoriteBooks/Book">
        <Book>
          <id>
            <xsl:value-of select="id"/>
          </id>
          <description>
            <xsl:value-of select="description"/>
            <xsl:apply-templates select="/Combined/LoadedData/BooksUpdate/Book[@id='']" />
          </description>
        </Book>
      </xsl:for-each>
    </FavoriteBooks>
  </Otherdata>
</xsl:template>
</xsl:stylesheet> 
```

我怎样才能更接近我想要得到的东西？你能不能给我一些书让我快速开始，因为 w3schools 的教程没用 :(

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-28T09:54:46.033

这个怎么样？

根据您描述的逻辑，描述不会是“空”而是“Book3”（与“Book3”合并的空字符串）。

```
<!-- root and static content -->
<xsl:template match="/">
    <xsl:apply-templates select='Combined/Profile' />
</xsl:template>

<!-- identity/copy, with some tweaks -->
<xsl:template match='node()|@*'>

    <!-- copy node -->
    <xsl:copy>

        <!-- add in its attributes -->
        <xsl:apply-templates select='@*' />

        <!-- now either apply same treatment to child nodes, or something special -->
        <xsl:choose>

            <!-- use updated birthdate -->
            <xsl:when test='name() = "Birthdate"'>
                <xsl:value-of select='/Combined/LoadedData/NewBirthdate' />
            </xsl:when>

            <!-- merge book descriptions -->
            <xsl:when test='name() = "description"'>
                <xsl:value-of select='concat(., /Combined/LoadedData/BooksUpdate/Book[@id = current()/../id]/BookText)' />
            </xsl:when>

            <!-- or just keep recursing -->
            <xsl:otherwise>
                <xsl:apply-templates select='node()' />
            </xsl:otherwise>
        </xsl:choose>
    </xsl:copy>

    <!-- if we've done all books, add in any in the loaded data but not the original data -->
    <xsl:if test='name() = "Book" and not(count(following-sibling::Book))'>
        <xsl:variable name='orig_book_ids'>
            <xsl:for-each select='../Book'>
                <xsl:value-of select='concat("-",id,"-")' />
            </xsl:for-each>
        </xsl:variable>
        <xsl:apply-templates select='/Combined/LoadedData/BooksUpdate/Book[not(contains($orig_book_ids, concat("-",@id,"-")))]' mode='new_books' />
    </xsl:if>
</xsl:template>

<!-- new books -->
<xsl:template match='Book' mode='new_books'>
    <Book>
        <id><xsl:value-of select='@id' /></id>
        <description>new <xsl:value-of select='BookText' /></description>
    </Book>
</xsl:template> 
```

您可以在[此 XMLPlayground 会话](http://www.xmlplayground.com/GQlOXX)中运行它（请参阅输出源）。

# jsf - 在其他字段之前将请求值应用于从 inputHidden 加载 id 的实体 bean

> ID：11240922
> 
> 赞同：1
> 
> 时间：2012-06-28T08:37:54.760
> 
> 标签：jsf, viewparams, omnifaces

我有一个 facelet 模板：

```
<f:metadata>
    <o:viewParam name="id" value="#{homeBean.id}" />
</f:metadata>                

<h:form>
    <h:inputHidden value="#{homeBean.id}" />
    <h:inputText value="#{homeBean.user.firstName}" />
    <h:commandButton value="Submit" action="#{homeBean.onSave()}" />
</h:form> 
```

和一个请求范围的bean：

```
@Named
@RequestScoped
public class HomeBean {
    private Integer id;
    private User user;

    public void setId(Integer id) {
      System.out.println("setId called");
      user = // code for loading User entity bean with supplied id
    }

    // other accessors for id and user
} 
```

初始页面加载效果很好，实体加载并显示在表单中，inputHidden 设置为实体 id。问题是提交抛出：

```
javax.el.PropertyNotFoundException - Target unreachable, base expression '. user' resolved to null 
```

可能是因为 getUser 在 setId 之前被调用。我该如何解决这个问题？我真的很想拥有一个请求范围的 bean，我知道这可以通过至少 viewaccess 范围的 bean 轻松解决。

编辑：现在我注意到在流程验证阶段引发了异常，我最初认为在更新模型值阶段引发了异常。我将“private User”改为“private User user = new User()”，现在可以了，但感觉有点奇怪。

问候， 帕维尔

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-28T12:52:22.017

OmniFaces`<o:viewParam>`仅在初始请求中而不在回发中设置请求参数。这旨在与`@ViewScoped`bean 一起使用，以便在每次回发时不会不必要地验证、转换和更新请求参数（因为它仍然存在于视图范围的 bean 中）。[API 文档](http://omnifaces.org/docs/javadoc/current/org/omnifaces/component/input/ViewParam.html)和[展示示例](http://showcase.omnifaces.org/components/viewParam)还明确提到它应该与视图范围的 bean 一起使用。

但是，您有一个请求范围的 bean，它在每个请求上被丢弃并重新创建，也在回发到同一视图时。因此，该`user`属性消失并`null`在每个后续回发请求中恢复为默认值。

基本上有两种方法可以解决它：

1.  替换`<o:viewParam>`为`<f:viewParam>`。它将在每个请求上调用 setter，在回发时也是如此。

2.  替换`@Named @RequestScoped`为`@ManagedBean @ViewScoped`，这样只要您与同一个视图交互，bean 就会存在。或者，如果您坚持使用 CDI，`@Named @ConversationScoped`请改用，但您必须自己管理对话的开始和结束。

# jsf-2 - 在@ManagedBean 中使用@Interceptor

> ID：11240924
> 
> 赞同：0
> 
> 时间：2012-06-28T08:38:03.450
> 
> 标签：jsf-2, cdi, interceptor, managed-bean, view-scope

使用 CDI 进行拦截在 @Named 中完美运行，但在 @ManagedBean 中却不行：

**可记录的.java**

```
@InterceptorBinding
@Retention(RUNTIME)
@Target({TYPE, METHOD})
public @interface Logable {

} 
```

**LoggingInterceptor.java**

```
@Logable
@Interceptor
public class LoggingInterceptor {
@AroundInvoke
    public Object log(InvocationContext ctx) throws Exception {
//log smth. with ctx.
}
} 
```

**WorkingBean.java**

```
@Named
@Logable
public class WorkingBean implements Serializable {
 //works : methods will be logged
} 
```

**豆类.xml**

```
<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
  <beans xmlns="http://java.sun.com/xml/ns/javaee" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
        xsi:schemaLocation="http://java.sun.com/xml/ns/javaee
    http://java.sun.com/xml/ns/javaee/beans_1_0.xsd">

<interceptors>
 <class>LoggingInterceptor</class>
</interceptors>

</beans> 
```

**ViewScopedBean.java**

```
@Logable
@ManagedBean
public class ViewScopedBean implements Serializable {
 //doesn't work
} 
```

我知道，这种拦截器旨在与WebBeans（和EJB）一起使用，但我正在寻找具有相同拦截器概念的**两个**世界（描述+ JSF）的解决方案我需要@ViewScoped @ManagedBean，这就是为什么我无法摆脱 @ManagedBean 以支持纯 WebBeans

系统：Mojarra 2.1.7 Primefaces 3.2

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-28T20:20:14.097

据我了解，没有。JSF 没有任何支持拦截的东西。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-21T12:24:13.300

JSF 不支持像您本身发布的 CDI 拦截。CDI 拦截器将适用于生命周期方法，例如`@PostConstruct`

```
 @Inherited
    @InterceptorBinding
    @Retention(RUNTIME)
    @Target({TYPE})
    public @interface TypeLogger {

      @Nonbinding
      public LoggingLevel logLevel() default LoggingLevel.INFO;
    } 
```

这是它的使用方式，因为它只绑定到`@Target({TYPE})`

```
 @ManagedBean
    @ViewScoped
    @TypeLogger
    public class Index implements Serializable {

       private static final long serialVersionUID = 3336392241545517919L;

       @PostConstruct
       private void init() {
         setup();
       }
    } 
```

# java - System.err.println() 不会以红色打印

> ID：11240925
> 
> 赞同：3
> 
> 时间：2012-06-28T08:38:07.083
> 
> 标签：java, eclipse

`System.err.println()`在 Eclipse 中不会以红色打印。

我检查`preferences > Run/Debug > console`并

*   “标准错误文本颜色”为红色且
*   “显示程序何时写入标准错误”被选中。

任何想法为什么 Eclipse 不应该以红色打印？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-28T09:12:52.953

据我所知，这似乎是Tomcat 7及更高版本[中已修复的错误。](https://issues.apache.org/bugzilla/show_bug.cgi?id=18462)我不确定这是否是导致它的原因，但它可能是：

> 在 org.apache.catalina.startup.Catalina.start() 中重定向 System.out 和 System.err 可防止任何其他应用程序（例如 IDE）重定向 System.out 和 System.err。它还将它们重定向到相同的输出（标准系统输出流），防止两个流的任何区别。

# android - 如何在不更改内部组件布局的情况下将父布局向右移动？

> ID：11240928
> 
> 赞同：0
> 
> 时间：2012-06-28T08:38:12.717
> 
> 标签：android, facebook, android-layout, visibility

在我的应用程序中，我想在左侧有滑动菜单，就像 facebook 一样。

在我[之前的问题](https://stackoverflow.com/q/11222652/840669)中，我提出了同样的担忧，并且感谢[这个答案，我可以找到一种方法来使用](https://stackoverflow.com/a/11225761/840669)[这个库](https://github.com/korovyansk/android-fb-like-slideout-navigation)将我的布局向右滑动。但是，我发现，该库实际上并没有滑动布局，而是截取屏幕截图并将图像向右滑动，因为布局上的组件不可点击。我需要这些组件是可点击的。所以，我尝试了一种新的方法来实现这一点，将滑出菜单放在左侧，保持其默认可见性，`View.GONE`并使其在单击左上角“显示/隐藏菜单”按钮时可见，如下图所示。

之前的布局：

![单击显示/隐藏菜单按钮之前的布局](../Images/5e4ae5b8d958c90e384026306bd105fe.png)

现在，当我单击“显示/隐藏菜单”按钮时，布局类似于 -

之后的布局：

![单击显示/隐藏菜单按钮后的布局](../Images/45ce10fb1241fb5eb9fbb6d65811c30b.png)

如您所见，右侧的布局会缩小，因此即使我已将`android:minWidth`属性设置为右侧的这两个按钮及其父级，“其他视图”按钮也会更改其宽度`RelativeLayout`。

所以我的问题是，**有没有办法在不改变内部组件宽度/布局的情况下将布局向右移动**？因此，在我的视图可用的任何区域中，它将被该区域中可以填充的内容的任何部分填充。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-03T04:31:23.427

@Rajkiran - 我有一个根布局，其中包含我的左右布局。

我的正确布局将 layout_height 设置为 'match_parent' & layout_widht 也设置为 'match_parent'

现在，当我的左侧滑动面板出现在按钮单击时，***我以编程方式重置右侧布局的宽度和高度以匹配根布局的宽度和高度***。

这完美地将正确的布局向右移动，而不会包裹内部组件。

为了以编程方式更改高度和宽度，我使用了这个 -

```
 rootLayoutParams = new LayoutParams(rootLayout.getWidth(), rootLayout.getHeight());

                rightLayout.setLayoutParams(rootLayoutParams); 
```

希望它也能帮助你。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-02T12:26:04.157

这个问题可以这样解决：

*   使用内部创建框架布局：第一个左侧菜单包含 3 个按钮，第二个布局包含其他两个按钮（显示/隐藏和其他视图）。这样，第二个布局在菜单前面（因为它是 fill_parent）。

*   在显示/隐藏按钮的 onClick 中执行翻译动画：假设您的菜单是 200px 宽，将第二个布局向右移动 200。

*   在 onAnimationEnd 中，将边距设置为第二个布局，如下所示： secondLayoutLayoutParams.setMargins(200, 0, -200, 0);

关闭菜单类似：将第二个布局向左移动 200 并将所有边距设置为 0。

通过设置边距，您将避免按钮收缩。

希望能帮助到你

# sql - 如何在hibernate struts2中进行一对多映射

> ID：11240931
> 
> 赞同：0
> 
> 时间：2012-06-28T08:38:17.777
> 
> 标签：sql, hibernate, struts2, one-to-one, nativequery

我有一张桌子

```
login [login_id, login name]

user[username, login_id, domain_id]

doamin[domain_id,domain_name] 
```

我将传递一个登录名。我需要获取 sql 查询的域名

```
SELECT m_domain.email  FROM    (   ots_web.m_user m_user
       JOIN
          ots_web.m_domain m_domain
       ON (m_user.domain_fk = m_domain.domain_pk_id))
   JOIN
      ots_web.m_login m_login
   ON (m_user.login_fk = m_login.login_pk_id)  WHERE (m_login.uname = 'jai') 
```

如何在使用 struts2 的 hibernate 中执行此操作

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-28T08:44:12.293

```
select d.domain_name
from login l
  inner join user u on u.login_id = l.login_id
  inner join domain d on d.domain_id = u.domain_id
where l.login_name = 'value' 
```

# google-places-api - Google Places API 访问被拒绝（使用了简单的访问密钥）

> ID：11240932
> 
> 赞同：1
> 
> 时间：2012-06-28T08:38:18.490
> 
> 标签：google-places-api, text-search

检查了一切，API 控制台，生成新密钥，json/xml，但无济于事。

[https://maps.googleapis.com/maps/api/place/textsearch/json?query=subway+station+in+Paris&sensor=false&key=myKey](https://maps.googleapis.com/maps/api/place/textsearch/json?query=subway+station+in+Paris&sensor=false&key=myKey)

任何帮助表示赞赏。谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-06T07:15:25.883

您是否忘记在查询中包含`location`, 和`radius`？一些参数是必需的。看到[这个](https://developers.google.com/places/documentation/search)。

# c# - Extract table from DOCX

> ID：11240933
> 
> 赞同：5
> 
> 时间：2012-06-28T08:38:24.370
> 
> 标签：c#, openxml, docx

I have one problem with parsing *.docx document with OpenXML (C#).

So, here's my steps:
1\. Load *.docx document
2\. Recieve list of paragraphs
3\. In each paragraph look for text,image and table elements
4\. For each text and image element create html tags
5\. Save output as *.html file

I've found out how to locate image file in document and extract it. Now there's one step to go - find where is table position in text (paragraph).

If any one know how to locate table in *.docx document using OpenXML please help. Thanks.

Additional: Ok, may be I'm not clear explain what i mean. If we get content of paragraph, you can find chield objects as textblocks, pictures and so on. So, if paragraph contains Run that contains Picture it means that in this place in Word document placed image.

Sample of my function:

```
public static string ParseDocxDocument(string pathToFile)
    {
        StringBuilder result = new StringBuilder();
        WordprocessingDocument wordProcessingDoc = WordprocessingDocument.Open(pathToFile, true);
        List<ImagePart> imgPart = wordProcessingDoc.MainDocumentPart.ImageParts.ToList();
        IEnumerable<Paragraph> paragraphElement = wordProcessingDoc.MainDocumentPart.Document.Descendants<Paragraph>();
        int imgCounter = 0;

        foreach (Paragraph par in paragraphElement)
        {

                //Add new paragraph tag
                result.Append("<div style=\"width:100%; text-align:");

                //Append anchor style
                if (par.ParagraphProperties != null && par.ParagraphProperties.Justification != null)
                    switch (par.ParagraphProperties.Justification.Val.Value)
                    {
                        case JustificationValues.Left:
                            result.Append("left;");
                            break;
                        case JustificationValues.Center:
                            result.Append("center;");
                            break;
                        case JustificationValues.Both:
                            result.Append("justify;");
                            break;
                        case JustificationValues.Right:
                        default:
                            result.Append("right;");
                            break;
                    }
                else
                    result.Append("left;");

                //Append text decoration style
                if (par.ParagraphProperties != null && par.ParagraphProperties.ParagraphMarkRunProperties != null && par.ParagraphProperties.ParagraphMarkRunProperties.HasChildren)
                    foreach (OpenXmlElement chield in par.ParagraphProperties.ParagraphMarkRunProperties.ChildElements)
                    {
                        switch (chield.GetType().Name)
                        {
                            case "Bold":
                                result.Append("font-weight:bold;");
                                break;
                            case "Underline":
                                result.Append("text-decoration:underline;");
                                break;
                            case "Italic":
                                result.Append("font-style:italic;");
                                break;
                            case "FontSize":
                                result.Append("font-size:" + ((FontSize)chield).Val.Value + "px;");
                                break;
                            default: break;
                        }
                    }

                result.Append("\">");

                //Add image tag
                IEnumerable<Run> runs = par.Descendants<Run>();
                foreach (Run run in runs)
                {
                    if (run.HasChildren)
                    {
                        foreach (OpenXmlElement chield in run.ChildElements.Where(o => o.GetType().Name == "Picture"))
                        {
                            result.Append(string.Format("<img style=\"{1}\" src=\"data:image/jpeg;base64,{0}\" />", GetBase64Image(imgPart[imgCounter].GetStream()),
                                           ((DocumentFormat.OpenXml.Vml.Shape)chield.ChildElements.Where(o => o.GetType().Name == "Shape").FirstOrDefault()).Style
                                ));
                            imgCounter++;
                        }
                    }
                }

                //Append inner text
                IEnumerable<Text> textElement = par.Descendants<Text>();
                if (par.Descendants<Text>().Count() == 0)
                    result.Append("<br />");

                foreach (Text t in textElement)
                {
                    result.Append(t.Text);
                }

                result.Append("</div>");
                result.Append(Environment.NewLine);

        }

        wordProcessingDoc.Close();

        return result.ToString();
    } 
```

Now I whant to specify table place in text (as it appear in Word).

Final:

Ok, everyone, I've found out. In my sample function one big mistake. I'm enumerate Paragraph elements of document Body. Tables are at same level as Paragraph, so function ignore tables. So we need to enumerate Elements of document Body.

Here's my test function to generate correct HTML from docx (it's just test code, so it's not clean)

```
public static string ParseDocxDocument(string pathToFile)
    {
        StringBuilder result = new StringBuilder();
        WordprocessingDocument wordProcessingDoc = WordprocessingDocument.Open(pathToFile, true);
        List<ImagePart> imgPart = wordProcessingDoc.MainDocumentPart.ImageParts.ToList();
        List<string> tableCellContent = new List<string>();
        IEnumerable<Paragraph> paragraphElement = wordProcessingDoc.MainDocumentPart.Document.Descendants<Paragraph>();
        int imgCounter = 0;

        foreach (OpenXmlElement section in wordProcessingDoc.MainDocumentPart.Document.Body.Elements<OpenXmlElement>())
        {
            if(section.GetType().Name == "Paragraph")
            {
              Paragraph par = (Paragraph)section;
                //Add new paragraph tag
                result.Append("<div style=\"width:100%; text-align:");

                //Append anchor style
                if (par.ParagraphProperties != null && par.ParagraphProperties.Justification != null)
                    switch (par.ParagraphProperties.Justification.Val.Value)
                    {
                        case JustificationValues.Left:
                            result.Append("left;");
                            break;
                        case JustificationValues.Center:
                            result.Append("center;");
                            break;
                        case JustificationValues.Both:
                            result.Append("justify;");
                            break;
                        case JustificationValues.Right:
                        default:
                            result.Append("right;");
                            break;
                    }
                else
                    result.Append("left;");

                //Append text decoration style
                if (par.ParagraphProperties != null && par.ParagraphProperties.ParagraphMarkRunProperties != null && par.ParagraphProperties.ParagraphMarkRunProperties.HasChildren)
                    foreach (OpenXmlElement chield in par.ParagraphProperties.ParagraphMarkRunProperties.ChildElements)
                    {
                        switch (chield.GetType().Name)
                        {
                            case "Bold":
                                result.Append("font-weight:bold;");
                                break;
                            case "Underline":
                                result.Append("text-decoration:underline;");
                                break;
                            case "Italic":
                                result.Append("font-style:italic;");
                                break;
                            case "FontSize":
                                result.Append("font-size:" + ((FontSize)chield).Val.Value + "px;");
                                break;
                            default: break;
                        }
                    }

                result.Append("\">");

                //Add image tag
                IEnumerable<Run> runs = par.Descendants<Run>();
                foreach (Run run in runs)
                {
                    if (run.HasChildren)
                    {
                        foreach (OpenXmlElement chield in run.ChildElements.Where(o => o.GetType().Name == "Picture"))
                        {
                            result.Append(string.Format("<img style=\"{1}\" src=\"data:image/jpeg;base64,{0}\" />", GetBase64Image(imgPart[imgCounter].GetStream()),
                                           ((DocumentFormat.OpenXml.Vml.Shape)chield.ChildElements.Where(o => o.GetType().Name == "Shape").FirstOrDefault()).Style
                                ));
                            imgCounter++;
                        }
                        foreach (OpenXmlElement table in run.ChildElements.Where(o => o.GetType().Name == "Table"))
                        {
                            result.Append("<strong>HERE'S TABLE</strong>");
                        }
                    }
                }

                //Append inner text
                IEnumerable<Text> textElement = par.Descendants<Text>();
                if (par.Descendants<Text>().Count() == 0)
                    result.Append("<br />");

                foreach (Text t in textElement.Where(o=>!tableCellContent.Contains(o.Text.Trim())))
                {
                    result.Append(t.Text);
                }

                result.Append("</div>");
                result.Append(Environment.NewLine);

            }
            else if (section.GetType().Name=="Table")
            {
                result.Append("<table>");
                Table tab = (Table)section;
                foreach (TableRow row in tab.Descendants<TableRow>())
                {
                    result.Append("<tr>");
                    foreach (TableCell cell in row.Descendants<TableCell>())
                    {
                        result.Append("<td>");
                        result.Append(cell.InnerText);
                        tableCellContent.Add(cell.InnerText.Trim());
                        result.Append("</td>");
                    }
                    result.Append("</tr>");
                }
                result.Append("</table>");
            }                
        }

        wordProcessingDoc.Close();

        return result.ToString();
    }

    private static string GetBase64Image(Stream inputData)
    {
        byte[] data = new byte[inputData.Length];
        inputData.Read(data, 0, data.Length);
        return Convert.ToBase64String(data);
    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-28T08:54:24.813

Try following to find the first table in the document.

```
Table table = doc.MainDocumentPart.Document.Body.Elements<Table>().First(); 
```

# iphone - 委托方法协议不起作用 - 目标 C

> ID：11240937
> 
> 赞同：2
> 
> 时间：2012-06-28T08:38:45.883
> 
> 标签：iphone, objective-c, ios, xcode, ipad

我正在`splitView`为我的`iPad`. 我已经实现了一个`UIButton`称为 as 的`Upload`。单击它时， a`UITableView`出现在 a`UIPoverController`中。单击任何内容时，我想在我`UIwebView`的 in 中显示一些相应的站点`UIDetailView`。为此，我实施了一个`delegate method protocol`. 我在`UploadTableViewController.h`文件中使用了以下代码行::

```
@protocol UploadTableViewDelegate <NSObject>
@required
- (void)selected:(NSString *)his;
@end

 @interface UploadSpaceTableViewController : UITableViewController{
id<UploadSpaceTableViewDelegate> delegate;
}

@property (retain) id delegate;
@end 
```

在相应的`.m`文件中，我使用了以下代码行::

```
- (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath
{

if (delegate != nil) {
    NSString *hisSelected = [keys objectAtIndex:indexPath.row];
    NSLog(@"%@ lolwa", hisSelected);
    [delegate selected:hisSelected];
}

} 
```

在`.m`我实现该功能的类文件中`Selected`，代码为::

```
- (void)selected:(NSString *)Key {    
  NSLog(@"hello");    
  [self.UploadSpaceTableViewPopover dismissPopoverAnimated:YES];
}

-(IBAction)uploadpressed:(id)sender{  
Upload.delegate = self;
self.Upload = [[UploadSpaceTableViewController alloc] 
                         initWithStyle:UITableViewStylePlain];
self.UploadTableViewPopover = [[UIPopoverController alloc] 
                                initWithContentViewController:UploadSpace];               

[self.UploadTableViewPopover presentPopoverFromBarButtonItem:sender 
                                permittedArrowDirections:UIPopoverArrowDirectionAny animated:YES];
 } 
```

但是，我无法在 gdb中获取`hello`（写在函数中`Selected`） 。`NSLogged`这是我第一次使用这个`delegate method protocol`。我无法解决这个问题。有人可以帮我吗 ？谢谢并恭祝安康。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-28T08:41:06.583

`[delegate keySelected:hisKeySelected];`是你的第一个问题。您没有声明名为 的委托方法`-keySelected:`，而是声明了名为 的委托方法`-Selected:`。

您的第二个问题是您绝对不是表格视图的代表。为了`-didSelectRowAtIndexPath:`调用类似的委托方法，您必须是表的委托。

PS，不要以大写字母开头的实例或方法名称。在 ObjC 中，大写字母表示一个类。

编辑：这是你的`UploadSpaceTableViewController`标题应该是这样的：

```
@protocol UploadTableViewDelegate <NSObject>
@required
- (void)selected:(NSString *)his;
@end

@interface UploadSpaceTableViewController : UITableViewController<UITableViewDataSource, UITableViewDelegate>
@property (nonatomic, assign) id <UploadSpaceTableViewDelegate>delegate; //delegates are weak!!!
@end 
```

而.m，我会跳过很多不必要的东西：

```
-(void)viewDidLoad {
    [self.tableView setDelegate:self];
    [self.tableView setDataSource:self];
}
//other code 
```

此外，您的委托被声明为保留，这在 ObjC 中是绝对禁止的。如果使用 ARC，则声明是弱的，如果不是，则分配。

您还`-uploadPressed:`通过在显式拥有或初始化对象之前设置它来在您的方法中生成一个 nil 委托。这是它的外观：

```
self.Upload = [[UploadSpaceTableViewController alloc]initWithStyle:UITableViewStylePlain];
Upload.delegate = self; 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-28T08:53:24.517

委托是这样工作的

*   声明一个协议 - 你已经这样做了
*   声明一个委托属性 - 你已经这样做了
*   在你想成为代表的类中说它符合协议

    `@interface MyClass : MySuperClass <UploadTableViewDelegate>`

*   设置委托属性，以便委托类可以获取委托消息

    `uploadSpaceTVC.delegate = self;`

*   调用非委托类中的委托方法（`UploadSpaceTableViewController`）

    `[self.delegate selected:@"test"];`

# php - PHP 致命错误：调用未定义的方法 resultSet::free()

> ID：11240939
> 
> 赞同：0
> 
> 时间：2012-06-28T08:39:04.980
> 
> 标签：php, mysql

我试图让一个函数在一个旧的基于 php 的应用程序上运行，[自治局域网方](http://www.nerdclub.net/alp/)。它基于 php4，但它确实可以在 php5 服务器上执行我希望它执行的操作（它也仅用于 Intranet 环境）。我正在[从这里](http://www.morb.ath.cx/alp/)添加一个会计插件。我能理解php，但还是有些生疏。

下面是我坚持使用的一小段代码示例......

```
<FORM ACTION="<?php echo $_SERVER['PHP_SELF']; ?>" METHOD="post" NAME="accounting" ID="accounting">
<strong>user: </strong><br>
    <SELECT NAME="userid[]" SIZE="5" class="formcolors" TABINDEX="1" MULTIPLE>
<?php
            $data = $dbc->query('SELECT username,userid FROM users ORDER BY username');
            while ( $row = $data->fetchRow()) {
              $option = '
                    <OPTION VALUE="%s" class="formcolors">%s</OPTION>';
              printf($option, $row['userid'], $row['username']);
        }
        $data->free();
        unset($option, $data);
?>
</SELECT> 
```

问题是一旦到达 te`$data->free();`行，脚本就会停止执行并提供主题中提到的错误。如果我将其注释掉（两次，有类似的行）脚本运行，但一旦我提交数据，我在日志文件中得到另一个错误......

```
PHP Warning:  mysql_escape_string() expects parameter 1 to be string, array given 
```

我相信这个错误是因为我已经注释掉了`$data->free();`所以它不能得到正确的结果。

我在[这里](http://pastebin.com/aVyyLTU4)粘贴了 pastebin 文件中的完整代码（不想用所有其他代码填充此页面）。

任何帮助或帮助将不胜感激。应用程序上的其他所有内容都按预期工作。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-28T12:56:47.207

如果我理解正确的话，`$data`是一个mysql的结果。

要从内存中释放结果，请尝试使用[`mysqli_free_result()`](http://www.php.net/manual/en/mysqli-result.free.php)。

```
$data = $dbc->query('SELECT username,userid FROM users ORDER BY username');
while ( $row = $data->fetchRow()) {
    $option = '
          <OPTION VALUE="%s" class="formcolors">%s</OPTION>';
          printf($option, $row['userid'], $row['username']);
}
mysqli_free_result($data->free());
unset($option, $data); 
```

# php - 有没有一种简洁的方法可以在 HTML 中包含 php 变量？

> ID：11240946
> 
> 赞同：0
> 
> 时间：2012-06-28T08:39:28.177
> 
> 标签：php

我页面上的所有文本都必须来自翻译文件，因此我的标记中充斥着`<?php echo $translation; ?>`.

只需要一两个电话就可以了，但是当它遍布整个页面时，它会使事情变得非常冗长。有没有更简洁的方法在标记中包含 PHP 变量？我可以回显一个heredoc，但它会删除所有用于HTML 编辑的IDE 功能，例如自动缩进和突出显示。

有没有办法只做类似的事情，`{$translation}`而不是`<?php echo $translation ?>`？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-28T08:42:17.723

你可以做

```
<?=$translation?> 
```

如果您在 php.ini 中激活了 short_open_tag

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-28T08:42:08.557

您可以使用[smarty](http://www.smarty.net/)或[twig](http://twig.sensiolabs.org/)之类的模板引擎。例如，像 netbeans 这样的 IDE 支持 Smarty。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-28T08:42:11.377

使用模板语言，如[twig](http://twig.sensiolabs.org/)，它以简单的语法内置了对国际化的支持。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-28T08:42:18.480

如果你想保持“纯”PHP，你可以使用`<?=$translation?>`，或者你可以使用模板引擎，比如 Smarty。有很多，只要找到一个适合你的。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-28T08:42:41.547

这应该可以帮助您[http://en.wikipedia.org/wiki/Template_engine_%28web%29](http://en.wikipedia.org/wiki/Template_engine_%28web%29)

# java - Android：从网站读取 HTML 并将其发布到屏幕上

> ID：11240951
> 
> 赞同：1
> 
> 时间：2012-06-28T08:39:48.570
> 
> 标签：java, android, html, parsing, sdk

我的目标是制作一个非常基本的应用程序，它读取 HTML 并将其存储到字符串中。我只对网站源代码中的一行感兴趣。我发现了一个建议这个话题：

```
String bodyHtml = "null";
            try {
                String myUri = "http://www.spring8.or.jp/ext/ja/status/text.html";
                HttpClient httpClient = new DefaultHttpClient();
                HttpGet get = new HttpGet(myUri);

                HttpResponse response = httpClient.execute(get);

                // Build up result
                bodyHtml = EntityUtils.toString(response.getEntity());
            } catch (Exception e) {

            }

            url.setText(bodyHtml); 
```

url 是我的文本视图。据我所知，我已正确设置清单中的权限。

但是，当我在手机和模拟器上运行此代码时，它似乎根本不起作用。我什么都得不到。我错过了什么吗？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-28T08:54:17.897

Try this,

Call the below method to download the HTml Content and pass the Url in the parameter,

```
private void downloadText(String urlStr) {
        progressDialog = ProgressDialog.show(this, "", 
                "Download Text from " + urlStr);
        final String url = urlStr;

        new Thread () {
            public void run() {
                int BUFFER_SIZE = 2000;
                InputStream in = null;
                Message msg = Message.obtain();
                msg.what=1;
                try {
                    in = openHttpConnection(url);

                    InputStreamReader isr = new InputStreamReader(in);
                    int charRead;
                      text = "";
                      char[] inputBuffer = new char[BUFFER_SIZE];

                          while ((charRead = isr.read(inputBuffer))>0)
                          {                    
                              String readString = 
                                  String.copyValueOf(inputBuffer, 0, charRead);                    
                              text += readString;
                              inputBuffer = new char[BUFFER_SIZE];
                          }
                         Bundle b = new Bundle();
                            b.putString("text", text);
                            msg.setData(b);
                          in.close();

                }catch (IOException e2) {
                    e2.printStackTrace();
                }
                messageHandler.sendMessage(msg);
            }
        }.start();    
    } 
```

This the helper method which returns InputStream Object,

```
private InputStream openHttpConnection(String urlStr) {
    InputStream in = null;
    int resCode = -1;

    try {
        URL url = new URL(urlStr);
        URLConnection urlConn = url.openConnection();

        if (!(urlConn instanceof HttpURLConnection)) {
            throw new IOException ("URL is not an Http URL");
        }

        HttpURLConnection httpConn = (HttpURLConnection)urlConn;
        httpConn.setAllowUserInteraction(false);
    httpConn.setInstanceFollowRedirects(true);
    httpConn.setRequestMethod("GET");
    httpConn.connect(); 

    resCode = httpConn.getResponseCode();                 
    if (resCode == HttpURLConnection.HTTP_OK) {
        in = httpConn.getInputStream();                                 
    }         
    } catch (MalformedURLException e) {
        e.printStackTrace();
    } catch (IOException e) {
        e.printStackTrace();
    }
    return in;
} 
```

And now display the String in a textView using Handler,

```
private Handler messageHandler = new Handler() {

        public void handleMessage(Message msg) {
            super.handleMessage(msg);
            switch (msg.what) {

            case 1:
                TextView text = (TextView) findViewById(R.id.textview01);
                text.setText(msg.getData().getString("text"));
                break;
            }
            progressDialog.dismiss();
        }
    }; 
```

Provide the **INTERNET** permission in the manifest.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-28T08:50:41.030

试试这个而不是 EntityUtils

```
BufferedReader rd = new BufferedReader(new InputStreamReader(
        response.getEntity().getContent()));
String line = "";
String newLine = "";
while ((line = rd.readLine()) != null) {
    newLine = newLine.concat(line);
}
System.out.println(newLine); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-28T08:51:13.380

在 的执行方法中[`HttpClient`](http://developer.android.com/reference/org/apache/http/client/HttpClient.html)，也放一个[`HttpContext`](http://developer.android.com/reference/org/apache/http/protocol/HttpContext.html)如下所示：

```
HttpContext localContext = new BasicHttpContext();
HttpResponse response = httpClient.execute(get, localContext); 
```

并且还使用[`BufferedReader`](http://developer.android.com/reference/java/io/BufferedReader.html)：

```
final BufferedReader reader = new BufferedReader(new InputStreamReader(response.getEntity().getContent())); 
```

如果它不起作用，您可能会遇到 Internet 连接问题。顺便说一句，不要忘记 android.permission.INTERNET 权限！

# c# - MS test + EF (VS2008)：运行所有测试时：关于不同 ObjectContexts 的错误

> ID：11240952
> 
> 赞同：0
> 
> 时间：2012-06-28T08:39:49.737
> 
> 标签：c#, entity-framework, visual-studio-2008, mstest

在 Visual Studio 2008、C#、Entity Framework 3.5、MS Test 中，我有两个测试：

```
[TestMethod]
public void Test1()
{
    using (Entities context = new Entities())
    {
        using (TransactionHelper transaction = new TransactionHelper(context))
        {
            // Stuff

            transaction.Rollback();
        }
    }
} 
```

和：

```
[TestMethod]
public void Test2()
{
    using (Entities context = new Entities())
    {
        using (TransactionHelper transaction = new TransactionHelper(context))
        {
            // Stuff

            transaction.Rollback();
        }
    }
} 
```

单独运行它们时，它们都通过了。但是当我运行所有测试时，第二个测试会显示以下内容：

> System.InvalidOperationException：无法定义两个对象之间的关系，因为它们附加到不同的 ObjectContext 对象。

我完全不明白这一点。我没有在代码路径中创建新的实体对象。我检查了几次（并且看到代码在单独的测试运行*和*生产使用中是如何工作的，这一定是真的）。我什至将实体包装在 using 语句中。

TestContext 中是否有一些奇怪的保留？

作为参考，TransactionHelper（简化）：

```
public class TransactionHelper : IDisposable
{
    private global::System.Data.Objects.ObjectContext _context;
    private ConnectionState _initialConState;
    private DbTransaction _transaction;

    public TransactionHelper(global::System.Data.Objects.ObjectContext context)
    {   
        _context = context;
        _initialConState = context.Connection.State;

        if (_initialConState != ConnectionState.Open)
        {
            _context.Connection.Open(); // open connection if not already open
        }

        _transaction = _context.Connection.BeginTransaction(IsolationLevel.ReadUncommitted);
    }

    public void Rollback()
    {
        _transaction.Rollback();
    }

    public void Commit()
    {
        _transaction.Commit();
    }

    public void Dispose()
    {
        _transaction.Dispose();

        if (_initialConState != ConnectionState.Open)
        {
            _context.Connection.Close(); // only close connection if not initially open
        }
    }
} 
```

如果我使用隔离级别没有区别`ReadCommitted`。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-28T11:34:05.827

由于单元测试在理想情况下应该彼此完全独立（在状态、顺序等方面），Visual Studio 和其他测试框架（如 NUnit）通过并行运行它们来加速执行过程。在像你这样的情况下，共享静态资源通常是我的罪魁祸首。

可能是您提到的这些简单对象（例如一些查找值）被分配给实体对象的属性，然后在第二个测试中您将相同的简单对象分配给另一个上下文的实体，这会引发错误，例如你提到的。

如果是这种情况，那么您可以尝试在测试中模拟缓存（或者尽可能减少使用`static`）。

# javascript - 在javascript中获取具有多个值的字段值复选框之一

> ID：11240962
> 
> 赞同：0
> 
> 时间：2012-06-28T08:41:07.943
> 
> 标签：javascript

这是我拥有的复选框代码：

`echo "<input type='checkbox' name='pilx[]' value='$dt_item[KodeCust];$dt_item[NoTransaksi];".round($saldoakhir).";' onclick='clickCh(this)' >";`

值将如下所示

```
P3004;KCP/3409;310000
P3009;KCP/3409;590000
P3001;KCP/3409;399000

var TOTAL = document.getElementById("TOTAL") 
function clickCh(caller)
{  
  if(caller.checked){
     add(caller)
  } else {
     subtract(caller)
  }
}
function add(caller)
{
   TOTALPIUTANG.value = TOTAL.value*1 + caller.value*1;
}
function subtract(caller)
{
 TOTALPIUTANG.value = TOTAL.value*1 - caller.value*1;
} 
```

该脚本仅适用于一个值。有什么建议如何仅对第三个值求和（310000+590000+399000）？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-28T08:47:29.607

尝试

```
function add(caller) {
    var elmarray = caller.value.split(';');
    TOTALPIUTANG.value = TOTAL.value * 1 + elmarray[elmarray.length - 1] * 1;
}

function subtract(caller) {
    var elmarray = caller.value.split(';');
    TOTALPIUTANG.value = TOTAL.value * 1 - elmarray[elmarray.length - 1] * 1;
} 
```

# objective-c - 如何在导航到多个 UITableViewCells 的部分中实现点击 UITableViewCell 以获取详细信息？

> ID：11240967
> 
> 赞同：0
> 
> 时间：2012-06-28T08:41:40.663
> 
> 标签：objective-c, ios, xcode, uitableview, uinavigationcontroller

我现在正在学习iOS开发中的UITableView类，我想在导航到多个UITableViewCells的部分中实现Tap一个UITableViewCell，该附件类型用于复选标记，我该怎么办？请告诉我如何做以获取详细信息，非常感谢您的帮助！

```
 Like this picture:http://i.stack.imgur.com/kowdl.jpg 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-28T08:44:05.723

In your current view controller, you should implement `didSelectRowAtIndexPath`, you will need to create another `UITableViewController`, and when a cell is selected in your `didSelectRowAtIndexPath`, you will push your new `UITableViewController`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-28T08:45:10.767

您需要实现`UITableView`委托方法- `- (void)tableView:(UITableView *)tView didSelectRowAtIndexPath:(NSIndexPath *)indexPath`

现在要确定具体`UITableViewCell`可以使用`indexPath`-`indexPath.row`和`indexPath.section`.

# java - 当 cacert 文件中已存在根证书时，是否需要导入子 CA 证书？

> ID：11240970
> 
> 赞同：0
> 
> 时间：2012-06-28T08:41:48.683
> 
> 标签：java, ssl, https, ssl-certificate

我的应用程序 app1 由根证书为 Entrust.net 的 trsutswave 验证。我无法在 app2 的 cacerts 文件中看到 trustwave 的条目，尽管那里存在委托。我的问题是我是否需要在 app2 的 cacert 文件中导入 trustwave 证书？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-28T10:06:37.870

我认为不是，信任是传递的。

# javascript - How can create browser page with browser?

> ID：11240980
> 
> 赞同：0
> 
> 时间：2012-06-28T08:42:34.523
> 
> 标签：javascript, html, css

How can create browser page with browser ? Like for example test environment provided in w3schools.com, we can not see the code

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-28T08:54:01.883

iFrame 是 W3Schools 使用的，但您也可以不使用 iFrame。实际页面的设计取决于您，但这里是使用纯 Javascript/HTML 进行设计的基本框架。

```
<html>
<head>
    <title>Test Page</title>
</head>
<body>
<script type="text/javascript">
function updateDiv() {
    myTextArea = document.getElementById('myTextArea');
    contentDiv = document.getElementById('contentDiv');

    contentDiv.innerHTML = myTextArea.value;
}
</script>

<textarea rows="8" cols="60" id="myTextArea"></textarea><br />
<div id="contentDiv"></div><br />
<input type="button" value="Update!" onclick="updateDiv()" />
</body>
</html> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-28T08:44:12.993

You can use an iframe to create "another browser page". See [iframe](http://www.w3schools.com/tags/tag_iframe.asp) for more information

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-06-28T08:51:50.150

有很多方法，但几乎所有方法都基于浏览器中的 ContentEditable 组件。

ContentEditable 是一个低级功能。[可以通过 Javascript 库（例如TinyMCE](http://www.tinymce.com/)、[CKEditor](http://ckeditor.com/) ）获得更高级别的支持。

带有源的演示：http: [//html5demos.com/contenteditable/](http://html5demos.com/contenteditable/)

微软文档：http: [//msdn.microsoft.com/en-us/library/ms537837%28v=vs.85%29.aspx](http://msdn.microsoft.com/en-us/library/ms537837%28v=vs.85%29.aspx)

Mozilla 文档：[https ://developer.mozilla.org/en/HTML/Content_Editable](https://developer.mozilla.org/en/HTML/Content_Editable)

# speech-recognition - 正确配置 Pocketsphinx

> ID：11240981
> 
> 赞同：5
> 
> 时间：2012-06-28T08:42:37.303
> 
> 标签：speech-recognition, cmusphinx

我一直在运行 Debian Squeeze 的 VM 上安装 Pocketsphinx0.7。这工作得很好，我可以尝试从文件中识别语音。有了这个我已经构建了一些 python 脚本来识别我得到的一堆文件，然后估计单词错误率。这些使用 gstreamer，如[本教程](http://cmusphinx.sourceforge.net/wiki/gstreamer)中所述。

到目前为止，我使用的是pocketsphinx tarball中的原始hmm，这是一个字典，其中仅包含我的测试数据中的单词和我从教授那里获得的优化语言模型。这应该可以工作，因为它也在生产系统中运行。我现在的问题是识别性能仍然很糟糕。我的单词错误 (WER) 率约为 85%。

我想知道的是如何改进 WER。我可以采取哪些步骤？

发生并可能影响性能的另一件事是，pocketsphinx 告诉我它没有访问 hmm 的权限，尽管我让每个人都可以读取、写入和执行 hmm。

有谁知道这可能来自哪里？我很感激任何帮助。如果您需要更多信息，请告诉我。

* * *

**编辑：**

我创建了一个小型测试集并运行了 pocketsphinx。[在这里您可以找到文件和结果。](http://depositfiles.com/files/h9zo2xjdj)我被允许给你一些来自原始测试集的例子。你[可以在这里找到它](http://http://pastebin.com/KL2PqTi)。
这些是最糟糕的例子。1-2个单词的简短表达效果很好。抱歉，到目前为止我无法创建一个大的测试集，我的时间非常有限。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-30T12:10:10.567

> 我想知道的是如何改进 WER。我可以采取哪些步骤？

Pocketsphinx FAQ 中描述了这个问题：

[http://cmusphinx.sourceforge.net/wiki/faq#qwhy_my_accuracy_is_poor](http://cmusphinx.sourceforge.net/wiki/faq#qwhy_my_accuracy_is_poor)

第一步是收集测试样本的数据库

如果您需要帮助来提高准确性，您需要共享您正在寻找的数据库和结果以及实际结果。您可以在此处或在 Sourceforge 论坛上分享。您需要将所有文件打包到存档某个地方上传。然后你可以在这里给一个链接。

有关更多信息，请参阅

[http://cmusphinx.sourceforge.net/wiki/communicate](http://cmusphinx.sourceforge.net/wiki/communicate)

# java - No output file created when compiled with gcc

> ID：11240982
> 
> 赞同：0
> 
> 时间：2012-06-28T08:42:37.580
> 
> 标签：java, bash, gcc, compilation, cygwin

Calling gcc compiler in a Java Source to compile a C file.

```
 List<String> command = new ArrayList<String>();
  String fs = System.getProperty("file.separator");
  command.add("C:\\cygwin" + fs + "bin" + fs + "sh");
  command.add("-c");
  command.add("/usr/bin/gcc /cygdrive/d/WorkSpace/TEST/HelloWorld.c -o /cygdrive/d/WorkSpace/HHH");
  ProcessBuilder builder = new ProcessBuilder(command);
  final Process process = builder.start(); 
```

HHH.exe is not created. Can somebody explain me what is wrong with this code?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-01T22:29:36.650

您需要将字符串“cmd”和“/c”设置为命令列表中的前两个元素。从 Java 调用任何命令行进程时，这是必需的。

# ruby-on-rails - 拦截 form_for submit

> ID：11240983
> 
> 赞同：-1
> 
> 时间：2012-06-28T08:42:39.000
> 
> 标签：ruby-on-rails

简短：如何拦截 form_for 选择的值以修改提交时发送到服务器的值？

完整版：我在一个具有 ext_id 属性的对象的部分内部有一个 form_for（它是脚手架生成的默认 _form 部分）。

我对其进行了如下修改：表单中有 2 个选择（A 和 B）。B 默认隐藏。A 只能是真或假。如果 A 为真，则必须将 ext_id 设置为默认值 X。如果用户在 A 上选择假，则会出现 B，然后根据 B 值设置 ext_id（我为此使用了 jQuery）。

现在的问题是：如果表单用于创建，如果 A 为假，则 ext_id 设置为 B 值，如果 A 为真，则未设置。我想如果在这种情况下未设置，我想我可以使用某种 ActiveRecord 验证将其设置为默认值，但是，如果它被用于编辑并且我将 A 更改为隐藏 B，B 旧值仍然被选中，所以 ext_id永远不会更改为“未设置”。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-28T12:03:07.457

在这种情况下，我不会使用 select A 或 B 将数据提交到表单。我只会使用它们来设置 jQuery 中隐藏字段的值。我想你知道该怎么做。

```
f.hidden_field :ext_id, :value => "default_value"

$('#your_model_ext_id').val(...the value from A or B selects...) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-28T12:56:44.023

显然这比看起来要容易得多。脚手架生成器在控制器中为创建（新建和创建）和编辑（编辑和更新）创建 2 个操作。第一个用于生成表单，另一个用于处理它，因此当您在创建/更新时收到提交的数据时，它就像对提交的数据做任何您想做的事情一样简单。

# ios - WebSeal Authentication

> ID：11240987
> 
> 赞同：3
> 
> 时间：2012-06-28T08:42:54.913
> 
> 标签：ios, webseal

I am currently trying to Authenticate through WebSeal to a web service from within my iOS application. I just cannot seem to find anything that sets me in the right direction. Thus far i am using a NSURLRequest but i cannot seem to pass through the SOAP action and get a response from WebSeal, could anyone put me in the right direction?

Thanks in advance.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-10T06:13:43.097

I hope these links point you in the right direction.

1.  [How to Access SOAP Services from iPhone](https://stackoverflow.com/questions/204465/how-to-access-soap-services-from-iphone)
2.  [Consuming SOAP Web Services on IOS](https://stackoverflow.com/questions/6388930/consuming-soap-web-services-on-ios)
3.  [Handling SOAP with iPhone](http://abhicodehelp.blogspot.com/2010/12/handling-soap-with-iphone.html)
4.  [iPhone Programming Tutorial – Intro to SOAP Web Services](http://www.icodeblog.com/2008/11/03/iphone-programming-tutorial-intro-to-soap-web-services/)

# javascript - jQuery iframe upload. Handle network errors

> ID：11240991
> 
> 赞同：1
> 
> 时间：2012-06-28T08:43:08.800
> 
> 标签：javascript, jquery

This code works, except now I need to handle network errors.

For example if the network is turned off while a file is uploading. I need to handle errors like these.

How can I proceed?

```
var name = 'iframeUpload';
var cur = $(this);
var iframe = $('<iframe name="' + name + '" id="' + name + '" style="display: none" />');

$("body").append(iframe);

cur.attr("action", "upload/test");
cur.attr("method", "post");
cur.attr("enctype", "multipart/form-data");
cur.attr("encoding", "multipart/form-data");
cur.attr("target", name);
cur.attr("file", $(this).val());
cur.submit();

$('#' + name).load(function () {

}); 
```

# mysql - Database analysis - rows with timed entries

> ID：11240993
> 
> 赞同：1
> 
> 时间：2012-06-28T08:43:12.823
> 
> 标签：mysql, database, analysis

I have a MySQL Database table with all the calls made by each user. The rows looks like:

```
id  Origin Number   Destination Number  Amount  InSec   Event Time  Event Date  YYYYMM
16196   Caller XXX  Called XXX  15.1223 825 18:02:00    03/12/2011  201112 
```

The table contains 11500 rows and I need to analyze the feasibility of a certain offer which has the same rate for the first 5 call minutes and then has a different rate starting from the 6th minute until the end of the call. I can’t think of any solution except checking the top callers and doing the analysis manually, but it is very time consuming. Any idea on how to solve such request?

regards

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-28T13:33:05.210

根据我们的评论，这是一个正式的 sql 建议，可以通过更新的计划来提取收益：

`SELECT IF(InSec > 5 * 60, ( InSec - 5 * 60 ) * ( old_rate - new_rate ), 0 ) AS savings from ...`

是你所期望的吗？

# asp.net-mvc-3 - 基于UserId的MVC3路由异常处理

> ID：11240994
> 
> 赞同：0
> 
> 时间：2012-06-28T08:43:15.120
> 
> 标签：asp.net-mvc-3, exception, routing

如果 move.UserId 不等于 currentUserId 则尝试构建异常然后重定向到操作，否则如果 move.UserId 不等于 currentUserId 返回视图。

请参阅此处的代码：

```
public ActionResult Details(int id)
    {
        MembershipUser currentUser = Membership.GetUser();
        Guid currentUserId = (Guid)currentUser.ProviderUserKey;
        Move move = db.Moves.Where(m => m.UserId == currentUserId)
            .FirstOrDefault();

            if (currentUser != null && currentUser.ProviderUserKey != null && currentUser.IsApproved)
            {
                if (move.UserId == currentUserId)
                {
                    return View(move);
                }
            }

        return RedirectToAction("Oops", new RouteValueDictionary(
 new { controller = "Account", action = "Oops", area = "", id = UrlParameter.Optional }));
    } 
```

我想将它绑定到将带回 Move/(int) 的 url，这样如果用户将其修改为返回 move.UserId != currentUserId 的移动的 (int)，那么它们也会重定向。目前可以修改Url来获取其他人的招式。

# 我的控制器

```
 public ViewResult Index()
    {
        if (User.Identity.IsAuthenticated)
        {
            MembershipUser currentUser = Membership.GetUser();
            Guid currentUserId = (Guid)currentUser.ProviderUserKey;
            if (currentUser != null && currentUser.ProviderUserKey != null && currentUser.IsApproved)
            {
                var results = db.Moves.Where(move => move.UserId == currentUserId)
                    .ToList();
                return View(results);
            }
        }
        return View(db.Moves.ToList());
    }

    [ClientValidation]
    public ActionResult Details(Move move)
    {
        return View(move);
    } 
```

# 我的观点

```
@model MovinMyStuff.Domain.Entities.Move
@{
ViewBag.Title = "Details";
    }
<div>

    @Html.DisplayFor(model => model.StartCity),
    @Html.DisplayFor(model => model.StartState)
    @Html.DisplayFor(model => model.StartZip) -
    @Html.DisplayFor(model => model.EndCity),
    @Html.DisplayFor(model => model.EndState)
    @Html.DisplayFor(model => model.EndZip)
</div>
<fieldset>
    <div class="job-details">
    @Html.HiddenFor(model => model.MoveId)
    @Html.HiddenFor(model => model.UserId)
        <ul class="distance">
            <li>
                <div>
                    Distance</div>
            </li>
            <li>1,978.6 Miles</li>
        </ul>
        <ul class="address-wrapper">
            <li>
                <ul class="address from">
                    <li>
                        <div>
                            From</div>
                    </li>
                    <li><span>Address: </span>
                        @Html.DisplayFor(model => model.StartStreetNumber)
                        @Html.DisplayFor(model => model.StartStreetName)
                    </li>
    ...
    </fieldset> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-28T08:54:20.580

首先要测试的是 LINQ 查询是否返回了 Move。如果不是，则表示用户正在尝试显示不属于他的移动，因为在您的查询中，您有一个`.Where`子句仅限制当前用户移动。

现在你会得到一个 NullReferenceException。

所以：

```
[Authorize]
public ActionResult Details(int id)
{
    MembershipUser currentUser = Membership.GetUser();
    Guid currentUserId = (Guid)currentUser.ProviderUserKey;
    Move move = db.Moves.Where(m => m.UserId == currentUserId && m.MoveId == id).FirstOrDefault();
    if (!currentUser.IsApproved || move == null)
    {
        // the user is trying to display a move that doesn't belong to him =>
        // redirect him or throw a 403 HTTP exception
        return RedirectToAction("Oops", new RouteValueDictionary(new { controller = "Account", action = "Oops", area = "", id = UrlParameter.Optional }));
    }

    // at this stage we can grant access to the user because we know
    // that he is authenticated, he is approved and that the move he is
    // trying to consult belongs to him
    return View(move);
} 
```

显然，如果您需要在许多控制器操作中重复此逻辑，则值得编写自定义 Authorize 属性：

```
[EnsureUserAllowedToConsultMove]
public ActionResult Details(Move move)
{
    // at this stage we can grant access to the user because we know
    // that he is authenticated, he is approved and that the move he is
    // trying to consult belongs to him
    return View(move);
} 
```

下面是这个自定义 Authorize 属性的样子：

```
public class EnsureUserAllowedToConsultMoveAttribute : AuthorizeAttribute
{
    protected override bool AuthorizeCore(HttpContextBase httpContext)
    {
        var authorized = base.AuthorizeCore(httpContext);
        if (!authorized)
        {
            return false;
        }

        if (!httpContext.Request.RequestContext.RouteData.Values.ContainsKey("id"))
        {
            return false;
        }

        var id = (string)httpContext.Request.RequestContext.RouteData.Values["id"];
        var currentUser = Membership.GetUser();
        var currentUserId = (Guid)currentUser.ProviderUserKey;
        return db.Moves.Any(m => m.UserId == currentUserId && m.MoveId == id);
    }

    protected override void HandleUnauthorizedRequest(AuthorizationContext filterContext)
    {
        var values = new RouteValueDictionary(new
        {
            controller = "account",
            action = "oops",
            area = ""
        });
        filterContext.Result = new RedirectToRouteResult(values);
    }
} 
```

现在，您已经设法分离关注点并将授权逻辑外部化为自定义授权属性。您的控制器不再需要被此类代码污染。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-28T08:51:52.553

对于此类工作，您应该使用 Authorize 过滤器。查看此以获取更多信息[ASP.NET MVC 自定义授权](https://stackoverflow.com/questions/971401/asp-net-mvc-custom-authorization)

# javascript - Write javascript output to file on server

> ID：11240996
> 
> 赞同：2
> 
> 时间：2012-06-28T08:43:24.480
> 
> 标签：javascript, ajax

So I have this HTML file that tests the user's screen resolution, and plugins installed using Javascript. So when the user accesses the page it sees: (e.g.) Your current screen resolution is 1024x768 and you have the following plugins installed: Plug-in No.2- Java Deployment Toolkit 7.0.10.8 [Location: npdeployJava1.dll], Plug-in No.3- Java(TM) Platform SE 7 U1 [Location: npjp2.dll], Plug-in No.4- Microsoft Office 2003 [Location: NPOFFICE.DLL]... I also need to save this information in a file on the server. All users are having firefox or chrome. How do I do this using AJAX?

```
<html>
<body>
<script language="JavaScript1.2">
document.write("Your current resolution is "+screen.width+"*"+screen.height+"")
</script>
<BR><BR>
<SCRIPT LANGUAGE="JavaScript">
var num_of_plugins = navigator.plugins.length;
for (var i=0; i < num_of_plugins; i++) {
var list_number=i+1;
document.write("<font color=red>Plug-in No." + list_number + "- </font>"+navigator.plugins[i].name+" <br>[Location: " + navigator.plugins[i].filename + "]<p>");
}
</script>
</body>
</html> 
```

Thanks

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-28T08:50:33.380

没有 jQuery（原始 JavaScript）：

```
 var data = "...";// this is your data that you want to pass to the server (could be json)
    //next you would initiate a XMLHTTPRequest as following (could be more advanced):
    var url = "get_data.php";//your url to the server side file that will receive the data.
    var http = new XMLHttpRequest();
    http.open("POST", url, true);

    //Send the proper header information along with the request
    http.setRequestHeader("Content-type", "application/x-www-form-urlencoded");
    http.setRequestHeader("Content-length", data.length);
    http.setRequestHeader("Connection", "close");

    http.onreadystatechange = function() {//Call a function when the state changes.
        if(http.readyState == 4 && http.status == 200) {
            alert(http.responseText);//check if the data was received successfully.
        }
    }
    http.send(data); 
```

使用[jQuery](http://api.jquery.com/jQuery.ajax/)：

```
$.ajax({
  type: 'POST',
  url: url,//url of receiver file on server
  data: data, //your data
  success: success, //callback when ajax request finishes
  dataType: dataType //text/json...
}); 
```

我希望这有帮助 ：）

更多信息：

*   [https://www.google.co.il/search?q=js+ajax+post&oq=js+ajax+post](https://www.google.co.il/search?q=js+ajax+post&oq=js+ajax+post)

*   [https://developer.mozilla.org/en-US/docs/Web/API/XMLHttpRequest/Using_XMLHttpRequest](https://developer.mozilla.org/en-US/docs/Web/API/XMLHttpRequest/Using_XMLHttpRequest)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-28T08:52:01.743

你知道 jQuery 吗？使用 jQuery 会容易得多。

```
var data = "";
for (var i=0; i < num_of_plugins; i++) {
   var list_number=i+1;
   document.write("<font color=red>Plug-in No." + list_number + "- </font>"+navigator.plugins[i].name+" <br>[Location: " + navigator.plugins[i].filename + "]<p>");
   data += "<font color=red>Plug-in No." + list_number + "- </font>"+navigator.plugins[i].name+" <br>[Location: " + navigator.plugins[i].filename + "]<p>"; 
}

$.post('savedata.php', {data=data}, function(){//Save complete}); 
```

然后在 savedata.php 中，您可以编写如下内容：

```
$data = $_POST['data'];
$f = fopen('file', 'w+');
fwrite(f, $data);
fclose($f); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-28T08:47:41.760

从 javascript 向运行服务器端代码的页面发出请求。

使用 ajax [http://www.javascriptkit.com/dhtmltutors/ajaxgetpost.shtml](http://www.javascriptkit.com/dhtmltutors/ajaxgetpost.shtml)发送发布请求到例如 apsx 页面。您可以从 aspx 将其保存到文本文件或数据库中。