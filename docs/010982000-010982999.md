# StackOverflow 问答 10982000-10982999

# clearcase - 以明文重命名视图

> ID：10982000
> 
> 赞同：5
> 
> 时间：2012-06-11T14:24:05.007
> 
> 标签：clearcase, configuration-management

是否可以重命名 clearcase 视图？如果是的话怎么做。

我通常根据我在该视图中所做的修复或增强来给出视图名称。完成后，我最终会将该视图重用于其他任务。对于其他 SCM，我没有任何问题，我根据它对构建树的更改来理解。clearcase 非常慢，如果我必须通过更改集知道，我需要 2-5 分钟。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-11T14:38:19.093

对于快照视图，您可以安全地重命名根目录。

但对于任何视图（快照或动态），请检查[`cleartool mkview -view -replace`](http://publib.boulder.ibm.com/infocenter/cchelp/v7r0m0/index.jsp?topic=/com.ibm.rational.clearcase.cc_ref.doc/topics/ct_mktag.htm). 它应该允许您*替换*标签，有效地重命名您的视图。

确保您的视图首先停止 ( `cleartool endview -server yourView`)

```
-rep/lace 
```

> 用新条目替换现有标记注册表条目。（如果标签不存在，则不会发生错误。）
> 您可以使用此选项更改标签注释和访问路径。
> **您不能用于`-replace`更改现有标签的名称；为此，请删除标记，`rmtag`然后使用`mktag`**.

最后一部分实际上指出需要删除然后重新创建与您的视图关联的标签。

确保`cleartool lsview -l -full -pro yourView`首先，以获取使用新名称重新创建标签时所需的所有参数。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-02-26T14:35:35.250

对于动态视图，您可以使用以下内容：

```
cleartool mktag -view -replace -tag <new view name> -host <Server host> \
-gpath <Global path> <Global path> 
```

哪里`Server host`和`Global path`可以从输出中获得

```
cleartool lsview -l <view name to be renamed> 
```

然后你通过删除重命名视图 ( `old view name`)的标签

```
cleartool rmtag -view <old view name> 
```

# javascript - JavaScript - 如何用逗号分隔字符串（就像 PHP 的爆炸函数）

> ID：10982001
> 
> 赞同：0
> 
> 时间：2012-06-11T14:24:11.893
> 
> 标签：javascript

我有一个字符串，其中包含在字符串中用逗号分隔的值，我想像使用 PHP 爆炸一样获取每个值，但我需要在 JavaScript 中完成。有没有办法，怎么做？

谢谢

勒龙

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-11T14:25:01.137

怎么样：

```
"some,string,with,commas".split(',') 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-11T14:29:58.153

```
var mystring = "I like coffee, very much so, but I don't like...";
var exploded = mystring.split(",");
window.alert(exploded[1]); 
```

# javascript - 从一个样式表淡入到另一个样式表

> ID：10982006
> 
> 赞同：5
> 
> 时间：2012-06-11T14:24:26.110
> 
> 标签：javascript, jquery, css

我认为这可能只是使用 jQuery 或 JavaScript 才能实现 - 有人可以告诉我是否可以从一个样式表的样式淡化到另一个样式表的样式？如果是这样，一个人会怎么做？

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-11T14:29:41.850

这是我能想到的最好方法：

```
$( body ).fadeOut( function() {
    // Switch the stylesheet
    // And then:
    $( this ).fadeIn();
} ); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-11T14:57:55.717

尝试这个：

jQuery：

```
$(document).ready(function() {
    $("a").click(function() {
        var rel = $(this).attr("rel");
        $('body').hide().fadeIn(1000);  
        $('head').append('<link rel="stylesheet" href="'+rel+'" type="text/css" />');
    });

}); 
```

HTML：

```
<ul>
    <li><a href="#" rel="layout.css">Change to layout 1</a></li>
    <li><a href="#" rel="layout2.css">Change to layout 2</a></li>
    <li><a href="#" rel="layout3.css">Change to layout 3</a></li>
</ul> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-11T14:27:02.803

您可以使用 jquery 动画。但是您必须在 animate 命令中指定所有规则。

# c# - 使用 LibTiff 编辑现有的 TIFF 文件

> ID：10982009
> 
> 赞同：0
> 
> 时间：2012-06-11T14:24:37.877
> 
> 标签：c#, tiff, libtiff

有人可以分享一个如何在 C# 中使用 LibTiff 编辑现有 TIFF 图像的示例。例如，如何将右上角的当前日期添加到多页 TIFF 图像中的每一页？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-11T18:20:49.977

libtiff 和 LibTiff.Net 都无法做到这一点。这些库不是通用的成像库。

像 FreeImage 这样的通用库可能会更好地为您服务。

当然，您可以解码 TIFF 图像，处理解码后的光栅，然后将光栅编码回来。但可能工作量太大。

# asp.net-mvc-3 - 如何为视图模型属性创建自定义比较属性

> ID：10982012
> 
> 赞同：2
> 
> 时间：2012-06-11T14:24:46.877
> 
> 标签：asp.net-mvc-3, model-view-controller, validation

我编写 mvc 3 应用程序。我应该比较两个属性。例如：

```
 public class RenameCompare
 {
       public string OldName { get; set; }
       public string NewName { get; set; }
 } 
```

我想创建应该返回比较结果的属性，并在必要的情况下获取错误消息。所以结果我希望 ModelState 返回真或假。如果属性不等于则返回 true ModelState.IsValid 否则返回 false。大家可以帮帮我吗？？？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-13T11:47:50.840

我找到了解决方案。在这里，我创建了自定义 NotEqual 属性。

```
public class RenameCompare
    {

        public string OldName { get; set; }

        [NotEqual(PropName="OldName", ErrorMessage="The oldname and new name are equal!")]
        public string NewName { get; set; }
    }
    public class NotEqualAttribute : ValidationAttribute
    {
        public string PropName { get; set; }

        protected override ValidationResult IsValid(object value, ValidationContext validationContext)
        {
            PropertyInfo otherPropertyInfo = validationContext.ObjectType.GetProperty(PropName);

            var otherPropertyStringValue = otherPropertyInfo.GetValue(validationContext.ObjectInstance, null).ToString();

            if (Equals(value.ToString(),otherPropertyStringValue))
            {
                return new ValidationResult(FormatErrorMessage(validationContext.DisplayName));
            }
            return null;
        }
    } 
```

# sharepoint - SharePoint 自定义错误页面和登录问题

> ID：10982014
> 
> 赞同：0
> 
> 时间：2012-06-11T14:24:52.407
> 
> 标签：sharepoint, iis-7, custom-error-pages

我目前正在尝试在我们的 SharePoint 项目中实现自定义错误页面。

这是我遇到的问题：自定义错误页面是在 IIS 中设置的。我将 ISS7 中的 .Net 错误页面用于错误代码 500。我还将标准 IIS 错误页面用于错误代码 404 和 403。

这非常有效，因为它们确实重定向到了正确的页面，即 SharePoint 页面。

但是，当我这样设置时，我遇到了登录问题。即使我的帐户正确，我也会不断收到登录提示。当我删除上述所有错误管理时，一切正常，不再出现登录错误。

谢谢 ;）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-09T14:25:10.530

IIS 的设置中有页面错误陷阱，您可以使用它。

# php - 对mysql结果进行排序

> ID：10982018
> 
> 赞同：0
> 
> 时间：2012-06-11T14:24:59.987
> 
> 标签：php, mysql

您好，我想改进我的搜索页面

我正在使用此查询按帖子标题或帖子内容搜索帖子

```
SELECT * FROM posts 
WHERE post_title rlike $this->secure($_GET['p_title']) 
  OR post_content rlike $this->secure($_GET['p_title']); 
```

我要排序帖子

我想打印我`post_title`首先得到的帖子

然后打印我得到的帖子`post_content`

我应该使用两个查询对它们进行排序吗？如果是这样。如何合并两个mysql查询？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-11T14:28:25.310

`UNION`您可以使用运算符（[Docu 链接](http://dev.mysql.com/doc/refman/5.0/en/union.html)）合并两个查询的结果，如下所示：

```
( SELECT 0 AS toBeOrdered, * FROM posts 
  WHERE post_title rlike $this->secure($_GET['p_title'])  )
UNION
( SELECT 1 AS toBeOrdered, * FROM posts 
  WHERE post_content rlike $this->secure($_GET['p_title']) )
ORDER BY toBeOrdered ASC 
```

我插入了一列`toBeOrdered`以反映您所需的排序。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-11T14:27:41.703

尝试使用[ORDER BY](http://dev.mysql.com/doc/refman/5.0/en/order-by-optimization.html)语句

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-11T14:28:21.650

您可以使用以下语法对多个列进行排序：

```
SELECT * FROM posts 
WHERE post_title rlike $this->secure($_GET['p_title']) 
OR post_content rlike $this->secure($_GET['p_title'])
ORDER BY post_title ASC, post_content DESC 
```

当然，相应地调整 ASC 和 DESC

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-11T14:33:29.960

您可以使用 PHP 对数组进行排序`usort`（用户排序），它可以使用给定的比较函数对数组进行排序。为此，您首先必须创建一个函数，该函数可以根据标题比较两个帖子，另一个可以比较其内容。

您也可以在查询中使用 SQL 对其进行排序`ORDER BY`，这样编码简单，加载网页时也更快。使用 PHP/MySQL 时的第一条规则是：MySQL 能做的事情就应该由 MySQL 做。

要回答您的最后一个问题：不要合并您的查询，它们会被混淆，然后您必须用 PHP 将它们分开。两个查询还不错，你知道的！

# image - 如何使用 R-Apache 输出多个图形

> ID：10982021
> 
> 赞同：0
> 
> 时间：2012-06-11T14:25:07.947
> 
> 标签：image, apache, r, rapache

下面是我使用 quantmod 绘制函数的 R 代码，但是这样做的限制是我只能输出一个图形。有没有办法让你的函数输出多个图形，比如通过设置内容`text/html`并以某种方式使用它渲染多个图形？你能告诉我怎么做吗？

```
tickergraph = function()
{
setContentType ("image/png")
temp <- tempfile ()
png (temp, type="cairo")
ticker <- toupper(POST$t);
getSymbols(ticker)
chartSeries(eval(parse(text=ticker)))
dev.off ()
sendBin (readBin (temp, 'raw', n=file.info(temp)$size))
unlink (temp)
}

if(!is.null(POST$t))
{
tickergraph()
print(POST)
}

print("Cannot Plot when some of the values are NULL") 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-27T23:02:34.457

解决此问题的一种方法是制作一个 HTML 文件，其中包含所有图形为 img，例如：

```
<html><body>
<img src="firstgraph.r" /><br />
<img src="secondgraph.r" /><br />
…
</body></html> 
```

然后让 firstgraph.r 类似于您在上面发布的代码（即输出*image/png*和 secondgraph.r 输出另一个带有第二个图的*图像/png*等等。

这将呈现一个页面，该页面依次加载您的所有图像（然后将根据请求生成）。

另一种（更典型的 R 解决方案）是创建一个面板图，将所有图形连接到一个图像中（例如，通过*par(mfrows=c(2,1))*获得 2×1 图形）。

# random - 幸运抽奖（随机数生成）

> ID：10982028
> 
> 赞同：0
> 
> 时间：2012-06-11T14:25:33.313
> 
> 标签：random, numbers, generator

我需要具有以下功能的幸运抽奖软件或程序环境：

*   完全随机选择法

*   不使用明确的种子和增量（不可预测的方式）

*   不依赖于第一个选择

*   随机数可以根据时间、温度、互联网流量、大气噪声等环境因素生成，但不能根据简单的随机数学函数生成。

你能帮我解决这个问题吗？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-11T14:33:15.170

有一种方法可以计算生成随机数，它被 George Marsaglia 称为带进位乘法。这种方法的优点是它不是基于增量的，也不是在模式中播种的。相反，它有一个随机种子。

PS这个应用程序不是线程安全的

[http://en.wikipedia.org/wiki/Multiply-with-carry](http://en.wikipedia.org/wiki/Multiply-with-carry)

代码来自这篇文章：[http ://en.wikipedia.org/wiki/Random_number_generation#Computational_methods](http://en.wikipedia.org/wiki/Random_number_generation#Computational_methods)

```
m_w = <choose-initializer>;    /* must not be zero */
m_z = <choose-initializer>;    /* must not be zero */

uint get_random()
{
    m_z = 36969 * (m_z & 65535) + (m_z >> 16);
    m_w = 18000 * (m_w & 65535) + (m_w >> 16);
    return (m_z << 16) + m_w;  /* 32-bit result */
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-11T14:37:55.620

如果您所说的“幸运抽奖”是指您每天只需要一个数字，那么您可以使用可公开访问的股票市场指数（例如 NASDAQ 或 S&P 500）的低位数字，包括小数位。您可以还使用其中几个索引并使用哈希函数混合数字以获得单个更大的数字。

# web - Mochiweb 自定义配置

> ID：10982035
> 
> 赞同：0
> 
> 时间：2012-06-11T14:25:58.167
> 
> 标签：web, erlang, mochiweb

我试图在谷歌和这个网站上搜索答案，但似乎我找不到任何地方，所以我决定问。

我打算使用 mochiweb 作为我的网络服务器，我研究了几天。我的问题很简单：

我可以在哪里放置或添加自定义配置？（例如数据库连接设置），所以 mochiweb 可以加载并处理它吗？

谢谢溴

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-29T13:59:03.160

我所做的是：

1.  我在 priv 中创建了一个新文件夹，名为：config
2.  我把我的配置文件放在那里
3.  **我在mochiweb_sup.erl**中添加一行，如下所示，将我的配置文件夹作为将传递给**mochiweb_web.erl**模块的参数的一部分：

    ```
    web_spec(Mod, Port) ->
        WebConfig = [{ip, {0,0,0,0},
                     {port, Port},
                     %% my code is below
                     {docroot, something_deps:local_path(["priv", "www"])},
                     {custom_config, something_deps:local_path(["priv", "config"])}],
    ... 
    ```

4.  **比我从mochiweb_web.erl**模块中读取的附加路径，如下所示

    ```
    start(Options) ->
        {DocRoot, Options1} = get_option(docroot, Options),
        %% my code is below
        {ConfigPath, Options2} = get_option(custom_config, Options1),

        %% loading my config file
        {ok, FileHandler} = get_config_file(ConfigPath),
    ... 
    ```

5.  然后我通过创建如下函数来加载我的自定义配置文件：

    ```
    get_config_file(ConfigPath) ->
        FileName = "custom_config.txt",
        case file:consult(filename:join([ConfigPath, FileName])) of
            {ok, FileHandler} ->
                {ok, FileHandler};
            {error, Reason} ->
                {error, Reason}
        end. 
    ```

就是这样！现在您可以根据需要进一步处理该配置文件。如果你想处理配置，我建议你在**start(Options)**块中处理它，在**mochiweb_http:start**函数执行之前，所以如果你需要传递结果，你可以将它作为参数的一部分传递给**mochiweb_http :start**，但这意味着您需要在**mochiweb_http.erl**模块中扩展**mochiweb_http:start**函数。

 **谢谢。**

# visual-studio-2010 - Visual Studio 中的 SASS：关键帧和浏览器兼容性

> ID：10982039
> 
> 赞同：2
> 
> 时间：2012-06-11T14:26:12.947
> 
> 标签：visual-studio-2010, sass

我目前正在将 SASS 与 Visual Studio（与 Mindscape）一起使用，我想创建一个简单的 mixin，而不必编写 -ms-、-o-、-webkit- 等...

我有这个最终的 CSS：

```
@-webkit-keyframes animate-loading-bar {
    0% { background-position: 0 0; }
    100% { background-position: 50px 50px; }
}   

@-moz-keyframes animate-loading-bar {
    0% { background-position: 0 0; }
    100% { background-position: 50px 50px; }
}   

@-ms-keyframes animate-loading-bar {
    0% { background-position: 0 0; }
    100% { background-position: 50px 50px; }
}   

@keyframes animate-loading-bar {
    0% { background-position: 0 0; }
    100% { background-position: 50px 50px; }
} 
```

所以我尝试创建mixin：

```
@mixin keyframe($name){
    @-webkit-keyframes #{$name} {
        0% { background-position: 0 0; }
        100% { background-position: 50px 50px; }
    }   

    @-ms-keyframes #{$name} {
        0% { background-position: 0 0; }
        100% { background-position: 50px 50px; }
    }   

    @-moz-keyframes #{$name} {
        0% { background-position: 0 0; }
        100% { background-position: 50px 50px; }
    }   

    @keyframes #{$name} {
        0% { background-position: 0 0; }
        100% { background-position: 50px 50px; }
    }   
} 
```

但是 Mindscape 不喜欢我的 mixin 中的“@”:(

我怎样才能做到这一点？

感谢

# ipod-touch - iPod Touch 第 4 代是否支持蓝牙 LE？

> ID：10982040
> 
> 赞同：5
> 
> 时间：2012-06-11T14:26:13.257
> 
> 标签：ipod-touch, bluetooth-lowenergy

我只是想知道 iPod Touch 4G 是否支持低功耗蓝牙 4.0。iOS v5.x 支持适用于 iOS 的蓝牙 LE (BLE)。那么升级到 iOS 5.x 是否会为 iPod Touch 启用 BLE？

有时制造商使用先进的硬件来确保它们与未来的技术兼容。同样，Apple 是否也有可能也这样做了，设想 BLE 将成为 iOS v5.x 的一部分？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-04T22:58:03.603

iPod touch 5th Gen 和 iPhone 4S 和 iPhone 5 以及一些并发的 iPad，失去了与哪一款都支持蓝牙 LE 的链接。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-19T21:20:39.867

这是一个硬件问题，所以不幸的是升级不会改变它不支持蓝牙低功耗的事实。不，4G即使升级也不支持BLE。今天只有 iPhone 4S 可用（来自 Apple）。下一代 iPad 也将支持 BLE。HTC One X、摩托罗拉 Razer 和三星 Galaxy S3 也支持 BLE。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-01T01:40:05.503

智能手机要具备 BLE 功能，它必须有一个双模芯片，这意味着它的无线电可以与经典的蓝牙和 BLE 通信。正如 Wilhelmsen 所说，这是一个硬件问题。

第一款支持BLE的智能手机是iPhone 4S。iPhone 4S 之后的大部分 iOS 设备都支持 BLE。安卓？据我所知没有那么多。所以到目前为止，BLE 开发的最佳平台仍然是 iOS 设备。

# android - 广播接收

> ID：10982041
> 
> 赞同：1
> 
> 时间：2012-06-11T14:26:19.950
> 
> 标签：android, broadcastreceiver, android-screen

我的问题是我的应用程序只是在屏幕关闭时完成。我想我必须重写广播接收方法并注册它们。但是我不知道当 ACTION_SCREEN_OFF 事件发生时如何在屏幕再次打开时以相同的状态显示应用程序。先感谢您。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-11T14:29:15.160

您根本不需要做任何事情来保持在 SCREEN_OFF 和 SCREEN_ON 之间的给定状态 - 除非您的代码在其生命周期方法中正在做一些事情来破坏该状态（例如`onPause()`）。如果您调用`finish()`onPause() 方法（正如您的问题所暗示的那样），请停止这样做。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-11T14:31:51.320

BroadcastReceivers 对你来说并不重要。
也许您确实在 Activity 中处理`onPause()`或`onDestroy()`错误。

请参阅 [http://developer.android.com/reference/android/app/Activity.html#ProcessLifecycle](http://developer.android.com/reference/android/app/Activity.html#ProcessLifecycle)

有关活动生命周期的更多信息

# java - 使用“mvn jetty:run”包括战争依赖

> ID：10982043
> 
> 赞同：2
> 
> 时间：2012-06-11T14:26:32.477
> 
> 标签：java, maven

我有一个战争项目，其中包括其他战争依赖项作为“覆盖”。我可以使用“mvn jetty:run-exploded”运行该项目。

但是，如果我尝试使用“mvn jetty:run”，它将不起作用（未找到依赖战争预期的东西）。它不考虑战争依赖关系（在 pom.xml 中指定）。

我的理解是“mvn jetty:run”使用 src 目录作为网络资源。

问：有什么方法可以让“mvn jetty:run”自动考虑战争依赖？

我正在尝试找到使用 maven jetty 插件进行开发的最快方法，即使使用 -DskipTests，jetty:run-exploded 也会有点慢。

# android - 如何从android中的webservice获取sessionid？

> ID：10982049
> 
> 赞同：1
> 
> 时间：2012-06-11T14:26:53.397
> 
> 标签：android, web-services, sessionid

```
function Login($Email, $Password) {
    global $DBConnection;
    if ((isset($UserName) && !empty($UserName)) || (isset($Password) && !empty($Password))) {
        $Email = addslashes(htmlspecialchars(strip_tags($Email)));
        if ($DBConnection->row("select * from db_Users where Users_Email = '".$Email."' and Users_Password = '".$Password."'") <= 0) {
            return "FAILED";
        }
        else {
            $UserLogin = $DBConnection->object("select * from db_Users where Users_Email = '".$Email."' and Users_Password = '".$Password."'");
            $_SESSION['UserLogin'] = true;
            $_SESSION['UserID'] = $UserLogin->Users_ID;
            return "SUCCESS";
        }
    }
    else {
        return "ERROR";
    }
} 
```

我的功能是在 web 服务部分..我需要获取 sessionid ..我正在使用soapobject.我不知道该怎么做..有什么建议吗？先感谢您...

# c# - 数据网格中的 jQuery more less 按钮，在单击更多但不少于时有效

> ID：10982051
> 
> 赞同：0
> 
> 时间：2012-06-11T14:26:56.633
> 
> 标签：c#, jquery, gridview, datagrid

我有一个按钮在搜索结果中显示或多或少的内容块。当我单击“更多”时，它会根据需要展开，但当我单击“更少”时没有任何反应。我觉得这和我的`preventDefault(e)`线有关。代码如下...

```
$(".btnMore").click(function (e) {
    e.preventDefault(e);
    if ($(this).attr('value', 'More')) {
        $(this).parent().prev().switchClass("abstractText", "abstractTextNoHeight", 500, "swing");
        $(this).attr('value', 'Less');
    }
    else if ($(this).attr('value', 'Less')) {
        $(this).parent().prev().switchClass("abstractTextNoHeight", "abstractText", 500, "swing");
        $(this).attr('value', 'More');
    }

}); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-11T14:30:54.800

这是使用“attr()”检查属性值的错误方法：

```
if($(this).attr("value", "More")) 
```

将“value”属性的值设置为“More”并返回`undefined`。你需要做的是：

```
if($(this).attr("value") == "More") 
```

或者

```
if(this.getAttribute("value") == "More") 
```

当 JavaScript 足够时，不需要使用 jQuery。请注意缺少`$()`周围`this`- 因为您使用的是 JS 函数 ( `getAttribute`)，所以您不需要创建 jQuery 集合，这使您的代码更快更简单。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-11T14:31:56.563

试试这个：

```
$(".btnMore").click(function (e) {
e.preventDefault(e);
if ($(this).attr('value')=='More') {
    $(this).parent().prev().switchClass("abstractText", "abstractTextNoHeight", 500, "swing");
    $(this).attr('value', 'Less');
}
else if ($(this).attr('value')=='Less') {
    $(this).parent().prev().switchClass("abstractTextNoHeight", "abstractText", 500, "swing");
    $(this).attr('value', 'More');
} 
```

});

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-28T12:50:12.747

最终这样做了：

```
//more/less button
$(".btnMoreText a").click(function (e) {
    e.preventDefault();
    rowClicked = false;
    $(this).parent().parent().prev().switchClass("abstractText", "abstractTextNoHeight", 500, "swing");
    $(this).parent().addClass("hidden");
    $(this).parent().next().removeClass("hidden");
});

$(".btnLessText a").click(function (e) {
    e.preventDefault();
    rowClicked = false;
    console.log($(this).parent().parent().prev());
    $(this).parent().parent().prev().switchClass("abstractTextNoHeight", "abstractText", 500, "swing");
    $(this).parent().addClass("hidden");
    $(this).parent().prev().removeClass("hidden");
}); 
```

# sql - 如何查找数据库时间重叠

> ID：10982053
> 
> 赞同：1
> 
> 时间：2012-06-11T14:26:58.413
> 
> 标签：sql, database

我正在创建数据库以检查`Room`输入时间是否可用。而且我在编写查询时遇到问题。查询必须检查`Schedule`表和`Reservation`表是否与输入的时间重叠。`TRUE`如果有重叠和没有重叠，查询返回是最好的`FALSE`。这是一个好的数据库结构（所以我可以只专注于查询）还是我需要重组数据库？请帮我。

我的数据库：

```
CREATE TABLE "Room" (
    "ID" VARCHAR PRIMARY KEY  NOT NULL  UNIQUE,
    "Name" VARCHAR NOT NULL,
    "Location" VARCHAR NOT NULL,
    "Capacity" INTEGER
)

CREATE TABLE "Schedule" (
    "ID" VARCHAR,
    "Day" VARCHAR,
    "start_time" DATETIME,
    "end_time" DATETIME
)

CREATE TABLE "Reservation" (
    "ID" VARCHAR PRIMARY KEY  NOT NULL,
    "Day" VARCHAR NOT NULL,
    " start_time " DATETIME NOT NULL,
    " end_time " DATETIME NOT NULL,
    "User" VARCHAR
) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-11T15:03:45.017

为每一列选择适当的数据类型，“ID”列最好是`INT`. 您需要“日”列做什么？无论如何，您的“start_time”和“end_time”列中都有一个日期。

此外，我看不到“房间”表与其他两个表之间的联系。

```
CREATE TABLE "Room" (
    "ID" INT PRIMARY KEY  NOT NULL  UNIQUE,
    "Name" VARCHAR NOT NULL,
    "Location" VARCHAR NOT NULL,
    "Capacity" INT
)

CREATE TABLE "Schedule" (
    ID INT,
    start_time DATETIME,
    end_time DATETIME,
    room_id INT
)

CREATE TABLE "Reservation" (
    "ID" INT PRIMARY KEY  NOT NULL,
    "start_time " DATETIME NOT NULL,
    "end_time " DATETIME NOT NULL,
    "User" VARCHAR /*you might want to make this an INT, too, and put the users in an extra table*/
    , room_id INT
) 
```

我不知道您使用的是什么 DBMS，所以我也不知道正确的语法，但您最好在 Schedule 和 Reservation 表中的 room_id 列上放置一个外键，并引用 Room 表中的 id 列。

然后你这样做：

```
SELECT
*
FROM
Room 
LEFT JOIN Schedule ON Room.id = Schedule.room_id
LEFT JOIN Reservation ON Room.id = Reservation.room_id
WHERE 
(
(Schedule.start_time <= $yourStartTime AND Schedule.end_time > $yourEndTime)
OR
(Reservation.start_time <= $yourStartTime AND Reservation.end_time > $yourEndTime)
) 
AND Room.id = $yourRoomId 
```

此查询在房间已满时返回某些内容，而在房间空闲时返回空/NULL。

# multithreading - 使用线程下载 Servlet 文件

> ID：10982056
> 
> 赞同：3
> 
> 时间：2012-06-11T14:27:13.950
> 
> 标签：multithreading, servlets, download

我在下载 servlet 下载文件时遇到问题。

我从 httpResponse.getOutputStream() 获得了输出流，
并将这个输出流对象传递给另一个类 - FileOperations。
此 FileOperations 作为新线程调用。当我将文件写入输出流并刷新它时，会弹出文件以正确保存它，
但是在保存和打开文件时，我看到第一行如下：

```
HTTP/1.1 200 OK
Server: Apache-Coyote/1.1
Transfer-Encoding: chunked
Date: Mon, 11 Jun 2012 14:19:37 GMT
2000 
```

在此之后写入文件内容并在几行之后再次写入“2000”，同样如此。

请让我知道如何以线程模式运行下载。

我尝试在不调用线程的情况下下载文件，并且它已正确下载。
我将 FileOutputStream 而不是 ServletOutputStream 传递给线程，它也正确下载。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-11T15:59:58.463

您不应该通过 servlet 方法在当前 HTTP 请求线程之外传递 HTTP 响应。当 servlet 方法返回时（线程仍在后台运行），容器将立即发送响应。

如果您委托给其他线程，下载将不会更快。当前的 HTTP 请求已由专用线程处理。我建议忘记这种方法，只在当前 HTTP 请求线程中执行流式传输作业。这使您的应用程序免于创建不必要的线程，而这只会花费更多资源。

为了提高下载速度，可以更好地重新设计您的 servlet 以支持[`Range`](http://www.w3.org/Protocols/rfc2616/rfc2616-sec14.html#sec14.35)请求。这样，客户端可以自动或使用某些特定的浏览器插件发送多个[`If-Range`](http://www.w3.org/Protocols/rfc2616/rfc2616-sec14.html#sec14.27)请求以分段下载文件，然后物理上使用多个 HTTP 连接（因此服务器端有多个 HTTP 请求/线程）。然而，这一切都不是微不足道的。[您可以在此博客文章](http://balusc.blogspot.com/2009/02/fileservlet-supporting-resume-and.html)中找到此类 servlet 的具体启动示例. 请注意，虽然这种方法理论上可能会提高下载速度，但您仍然受到网络带宽限制的限制。只有当客户端的传入网络带宽比服务器的传出带宽更宽并且服务器（或 ISP！）被配置为在每个连接的基础上限制带宽时，它才会更快。这在 90 年代并不少见，但现在并不常见。

# asp.net-mvc - 将数据从子操作传递给剃刀中的父操作

> ID：10982061
> 
> 赞同：1
> 
> 时间：2012-06-11T14:27:23.180
> 
> 标签：asp.net-mvc, asp.net-mvc-3, lifecycle, viewbag

在 Razor 视图中时，您可以将数据从子操作传递到视图吗？IE：

```
@{
   ViewBag.passedData = "";
}

@Html.Action("ChildView","ChildController") // Inside the child action (controller or view) magic happens

@ViewBag.passedData // it's not empty! 
```

请注意，在子视图内部，我可以使用读取父视图数据，`ControllerContext.ParentActionViewContext.ViewBag.passedData`但是当我写入它时，什么也没有发生。

事实证明，要访问 .passedData 属性，应该在父视图中使用：

```
 @ViewContext.ViewBag.passedData   // Has the passed data!
  @ViewBag.passedData // null 
```

这将使事情顺利进行，但如果有更适当或正式的方式来做到这一点，请回复。

# c++ - C++ 的 P2P 库

> ID：10982062
> 
> 赞同：36
> 
> 时间：2012-06-11T14:27:23.600
> 
> 标签：c++, p2p

是否有任何用于 P2P 网络的优秀跨平台 C++ 库（最好是 UDP，但 TCP 也可以）。最初我计划使用*libjingle*，但由于它们不提供任何预编译库并且构建系统非常混乱，因此我目前将其搁置一旁，因为它太复杂了。

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2012-06-11T14:33:32.133

[libtorrent.org](http://libtorrent.org)建立在 boost 之上，boost-asio 是一个 P2P 库，对我有好处。它实现了 BitTorrent 协议，使用 TCP 传输数据，使用 TCP/UDP 进行对等交换。

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2012-06-12T04:48:17.030

[libnice](http://nice.freedesktop.org/wiki/) - 实现 ICE 协议。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-06-11T15:16:27.290

一种可能的选择是我们的[MsgConnect](http://www.eldos.com/msgconnect/)产品。开源许可证可用。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-08-24T13:58:44.583

libjingle 编译起来可能很麻烦，但它非常强大，而且 api 非常简单，示例应用程序可以帮助您更好地学习和理解它。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-20T09:53:33.823

[Tribler.org](http://www.tribler.org/trac)：

它是一个跨平台的 p2p 客户端，但它也提供其开源[API](http://svn.tribler.org/abc/branches/mainbranch/Tribler/)。它实现了许多非标准功能，如 P2P 视频流、DHT、Merkle 哈希、repex、NAT 和防火墙穿刺，...

它的引擎是欧洲成立的视频流项目的一部分：[p2p-next](http://www.p2p-next.org/)。

不幸的是，它是用 python 编写的，但你可以用 c++ 包装它，甚至可以用 python 生成 c++ 库。

或者：[libswift](http://libswift.org/)

# c++ - Qt DrawLine - 绘图时动态更改线条颜色，而不分割线条

> ID：10982066
> 
> 赞同：1
> 
> 时间：2012-06-11T14:27:33.077
> 
> 标签：c++, qt

我正在从 QWidget 派生的对象中画一条线。我可以设置笔以我选择的颜色画一条线。我想要做的是在当前 y 坐标高于指定值时更改笔的颜色。

一种选择是将我要绘制的线分成两半；在 y 坐标高于指定值的位置进行拆分。虽然这种方法没有任何问题，但我希望有一种更简单的方法可以使用。

我想要做的基本上是扩展drawline功能。我希望能够更改绘图算法，以便对于要设置颜色的每个像素，它将根据提供的函数检查要使用的颜色。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-11T14:42:52.530

我不建议重载基本绘图算法。`QGradient`我认为画线时使用 a 更容易？

# asp.net-mvc - 显示重叠的聊天记录 ASP.NET Razor 视图

> ID：10982068
> 
> 赞同：1
> 
> 时间：2012-06-11T14:27:39.117
> 
> 标签：asp.net-mvc, razor

我需要在 Razor 视图页面中显示聊天历史记录。我有一个方法可以获取从**用户 B发送****给**用户**A**的指定消息。另一个获取用户 BI 的方法有这个 viewModel：

 **```
 public class SentReceivedMessagesViewModel
{
    public IEnumerable<PrivateMessage> IncomingMessages { get; set; }
    public IEnumerable<PrivateMessage> OutGoingMessages { get; set; }
    public PagingInfo PagingInfo { get; set; }

} 
```

而这个控制器：

```
 public ActionResult Conversations(Guid targetId)
    {
        var myGuid = (Guid)Membership.GetUser(this.User.Identity.Name).ProviderUserKey;
        var incomingchats = db.IncomingHistoryFromUserId(targetId, myGuid);
        var outgoingchats = db.OutgoingHistoryToUserId(myGuid, targetId);
        var model = new SentReceivedMessagesViewModel
          {
              IncomingMessages=incomingchats,
              OutGoingMessages=outgoingchats,
          };
        return PartialView("Conversation",model);
    } 
```

困境是如何组织**视图**，以便在重叠窗格中显示类似 Facebook 的**聊天历史记录？**有教程或演示吗？**

# google-chrome - 从 NPObject 获取 IDispatch

> ID：10982071
> 
> 赞同：1
> 
> 时间：2012-06-11T14:27:52.523
> 
> 标签：google-chrome, plugins, com, npapi

有没有办法从 Google Chrome NPAPI 浏览器扩展中的 NPObject 获取 IDispatch 接口？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-11T14:41:29.427

AFAIK - 不，因为两者无关。但是，您可以使用：

1.  [NPP_Invoke](https://developer.mozilla.org/en/NPN_Invoke)
2.  [NPP_InvokeDefault](https://developer.mozilla.org/en/NPN_InvokeDefault)
3.  [NPP_HasProperty](https://developer.mozilla.org/en/NPN_HasProperty)
4.  [NPP_HasMethod](https://developer.mozilla.org/en/NPN_HasMethod)

它们大致类似于 IDispatch 的 GetTypeInfo、GetTypeInfoCount 和 Invoke。

# jquery - 如何在打开下一个之前关闭手风琴元素？

> ID：10982072
> 
> 赞同：0
> 
> 时间：2012-06-11T14:27:54.793
> 
> 标签：jquery, jquery-ui, accordion, jquery-ui-accordion

我有这个代码：

```
jQuery(document).ready(function(){
    $('caption').click(function() {
        $(this).nextAll().toggle('slow');
        return false;
    });
}); 
```

如何在打开下一个之前关闭手风琴元素？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-11T14:47:42.813

你的意思是这样的吗？

```
jQuery(document).ready(function(){
    $('caption').nextAll().hide();  -- This hides the content when dom is ready
    $('caption').click(function() {
        $(this).nextAll().toggle('slow');
        return false;
    });
}); 
```

# javascript - 如何“单击”firebug 控制台中的所有 div？

> ID：10982078
> 
> 赞同：0
> 
> 时间：2012-06-11T14:28:23.517
> 
> 标签：javascript, jquery

如何对以下 html 中以“user_”开头的所有行执行“单击”操作：

```
<div id="rows">
  <div id="user_1"></div>
  <div id="user_2"></div>
  <div id="user_3"></div>
  <div id="user_4"></div>
</div> 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-11T14:30:12.507

```
jQuery('div[id^="user_"]').click(); 
```

[http://api.jquery.com/attribute-starts-with-selector/](http://api.jquery.com/attribute-starts-with-selector/)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-11T14:30:18.820

假设“执行点击操作”是指“触发点击事件”，您可以使用[属性 starts-with](http://api.jquery.com/attribute-starts-with-selector/)选择器，以及[`click`](http://api.jquery.com/click/)不带参数的方法（相当于`trigger("click")`）：

```
$("div[id^='user_']").click(); 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-06-11T14:30:54.960

```
$("div[id^=user_]")​​​​​​​​​​​​​​.click(); 
```

您可以将其粘贴到 Firebug 控制台中，也可以将其放入您的页面中，因为无论哪种方式它都是有效的 JavaScript。

**[活生生的例子](http://jsfiddle.net/8gGUY/)**

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-06-11T14:31:09.820

选择具有以某个字符串开头的属性的所有元素：

```
$('div[id^="user_"]') 
```

“点击”它们：

```
$('div[id^="user_"]').click(); 
```

但是，您可能想为它们添加一个类，这比属性上的字符串匹配要好。

# wpf - CollectionViewSource 使用默认和备份源进行排序

> ID：10982081
> 
> 赞同：0
> 
> 时间：2012-06-11T14:28:30.300
> 
> 标签：wpf, sorting, collectionviewsource

我正在开发一个计划程序，其中项目具有预定日期，但用户可以选择在他们选择的日期覆盖它。为了实现这一点，我的 Item 对象使用了两个属性：ScheduledDate (DateTime) 和 ActualDate (DateTime?)。因此，如果 ActualDate 属性为空，则用户尚未覆盖此项的计划。

在我的一种观点中，我需要在 a 中显示这些项目`ListBox`，并按实际日期排序。我遇到的麻烦是如何`CollectionViewSource`用这两个属性实现 a 。

我知道这是不正确的，但我需要这样的东西：

```
<CollectionViewSource x:Key="TransactionsViewSource"
                      Source="{Binding ElementName=ThisControl, 
                                       Path=Items}">
    <CollectionViewSource.SortDescriptions>
        <cm:SortDescription PropertyName="ActualDate ?? ScheduledDate"/>
    </CollectionViewSource.SortDescriptions>
</CollectionViewSource> 
```

（ThisControl 是`UserControl`承载. 的名称`ListBox`。）

如果我添加第二个 SortDescriptor（如下所示），我会得到一个按 ActualDate 排序的列表，然后按 Scheduled Date 排序，它将所有被覆盖的项目组合在一起。这不是期望的行为。

```
<CollectionViewSource x:Key="TransactionsViewSource"
                      Source="{Binding ElementName=ThisControl, 
                                       Path=Items}">
    <CollectionViewSource.SortDescriptions>
        <cm:SortDescription PropertyName="ActualDate"/>
        <cm:SortDescription PropertyName="ScheduledDate"/>
    </CollectionViewSource.SortDescriptions>
</CollectionViewSource> 
```

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-12T03:55:35.493

我最终在我的`UserControl`类中创建了一个新方法，该方法使用 LINQ 来保持底层`ObservableCollection`排序。然后，每当编辑项目（实际日期被覆盖）或添加新项目时，我都会调用此方法。最后，我`CollectionViewSource`从 XAML 中删除了 并将 绑定`ListBox`到`Items`属性（我已经将其作为依赖属性）。结果如下所示：

XAML：

```
<ListBox ItemsSource="{Binding ElementName=ThisControl,
                               Path=Items}"/> 
```

C＃：

```
public static readonly DependencyProperty ItemsProperty =
    DependencyProperty.Register("Items",
                                typeof(ObservableCollection<MyItem>),
                                typeof(MyControl),
                                new UIPropertyMetadata(null));

public ObservableCollection<MyItem> Items
{
    get { return (ObservableCollection<MyItem>) GetValue(ItemsProperty); }
    set { SetValue(ItemsProperty, value); }
}

private void SortItems()
{
    Items = new ObservableCollection<MyItem>(Items.OrderBy(i => i.ActualDate ??
                                                                i.ScheduledDate));
} 
```

然后我只使用`SortItems()`集合中的项目或集合本身发生变化的任何地方。

它运行良好，我不必创建和管理新属性。我可以忍受 LINQ 产生的一点点开销。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-11T23:34:17.527

我认为最简单的方法是为排序再创建一个属性：

```
public DateTime SortingDate
{
    get { return ActualDate ?? ScheduledDate; }
} 
```

.

```
<CollectionViewSource.SortDescriptions>
    <cm:SortDescription PropertyName="SortingDate"/>
</CollectionViewSource.SortDescriptions> 
```

# android - 如何在不重复代码的情况下显示线程中的 toast？

> ID：10982082
> 
> 赞同：0
> 
> 时间：2012-06-11T14:28:30.530
> 
> 标签：android, toast

~~我是否必须制作一个新的可运行文件~~

如何从线程内部进行敬酒，而不会使用以下代码向我的线程发送垃圾邮件

```
runOnUiThread(new Runnable() {
  @Override
  public void run()
  {
    Toast.makeText(ClassName.this, R.string.something, Toast.LENGTH_LONG).show(); //edit
  }
}); 
```

每次我想展示吐司？

**这是我的代码**

```
new Thread(new Runnable() {
            public void run() {
                doLogin();
            }
        }).start();
    }

public void doLogin() {
        username = teUsername.getText().toString().trim();
        password = tePassword.getText().toString().trim();
        if(username == "" || password == ""){
            displayToast("Enter a username and password");
            return;
        }
.
.
.
more toasts 
```

**编辑**我想知道如何有效地从线程内部调用 toast。每次我想显示吐司时都没有创建新的可运行文件

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-11T14:31:19.413

`.show()`吐司结束。

```
Toast.makeText(ClassName.this, R.string.something, Toast.LENGTH_LONG).show(); 
```

# zend-framework - Zend Studio 和 Zend 框架中的黑白 application.ini、bootsrap.php 和 index.php 有什么区别

> ID：10982085
> 
> 赞同：3
> 
> 时间：2012-06-11T14:28:35.650
> 
> 标签：zend-framework, zend-studio, zend-server

我正在使用 Zend 框架和 zend studio。对以下文件感到困惑

1)Bootsrap.php

2).htaccess

3）应用程序.ini

4) 索引.php

我已经编辑了所有这些文件以在 Virtaul 主机上运行我的应用程序。但是我对上面提到的文件感到困惑，因为哪个代码在哪个文件中。

当我使用 zend studio 创建新项目时，我也遇到了错误

**“未捕获的异常 'Zend_Application_Bootstrap_Exception' 带有消息 'No default controller directory registered with front controller' in”**

如果您可以就上述内容提供一些指导，那就太好了

谢谢，

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-11T19:06:36.313

`index.php`是充当整个应用程序网关的 PHP 脚本。这个脚本创建你的`Zend_Application`，引导它并运行它。

`.htaccess`Apache 使用它来将所有对不存在的文件和目录的请求路由到您的`index.php`脚本，以便 Zend Framework 可以处理 URL 并将它们路由到适当的模块、控制器和操作。

`Bootstrap.php`可用于编写代码块以引导（设置）需要应用程序的某些部分（例如数据库连接、会话、路径等）。在您的应用程序开始运行之后以及在任何路由、调度或任何事情发生之前，几乎立即调用引导程序。

`application.ini`也用于配置您的应用程序。很多可以在文件中完成的事情都可以在`Bootstrap.php`文件中完成`application.ini`。有许多可用的[资源插件](http://framework.zend.com/manual/en/zend.application.available-resources.html)可以在您的`application.ini`文件中进行配置并设置应用程序的特定方面。

您可以在 Bootstrap 中使用 PHP 代码执行的大部分操作，也可以`application.ini`使用`ini`符号代替代码来完成，这对于某些人来说通常更容易维护。

[Zend Framework MVC Theory of Operation](http://framework.zend.com/manual/en/zend.application.theory-of-operation.html)涵盖了一些我认为有助于理解引导过程的兴趣点。

**要解决您遇到的错误**，请尝试将此行添加到您的`application.ini`：

```
resources.frontController.controllerDirectory = APPLICATION_PATH "/controllers" 
```

这利用了前面提到的资源插件，特别是`FrontController`设置前端控制器的资源插件。

# php - 如何在文件中传递超过 9 个参数。htaccess（mod_rewrite）？

> ID：10982087
> 
> 赞同：4
> 
> 时间：2012-06-11T14:28:48.093
> 
> 标签：php, apache, .htaccess, mod-rewrite

我在使用 mod_rewrite apache 的 htaccess 文件中花费超过 9 个参数时遇到问题，例如，如果我传递参数 $ 10 = "something" mod_rewrite 传递参数 $ 1 的值。有什么解决方案吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-11T14:40:57.503

答案很简单：**你不能**。

[http://httpd.apache.org/docs/current/mod/mod_rewrite.html](http://httpd.apache.org/docs/current/mod/mod_rewrite.html)

您唯一能做的就是将一些参数组合为一个，然后稍后在脚本中对其进行解析。

当然，您可以尝试将您的模式分成 2 条规则，因此一条规则匹配 5 或 6 个参数，然后第二条规则匹配其余的（这将起作用，因为规则是一一执行的），但这并不总是有效（真的取决于实际的重写规则，它有多复杂）并且需要很好地了解你在做什么。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-11T14:39:55.233

> RewriteRule 反向引用：这些是 $N (0 <= N <= 9) 形式的反向引用，它提供对模式的分组部分（在括号中）的访问，从 RewriteRule 受当前 RewriteCond 条件集的约束。 .

资料来源：[http ://httpd.apache.org/docs/2.2/mod/mod_rewrite.html#rewritecond](http://httpd.apache.org/docs/2.2/mod/mod_rewrite.html#rewritecond)

# python - 如何在 Pandas DataFrame 中移动一列

> ID：10982089
> 
> 赞同：127
> 
> 时间：2012-06-11T14:28:49.360
> 
> 标签：python, pandas, dataframe

我想在 Pandas 中移动一列`DataFrame`，但在不重写整个 DF 的情况下，我无法从文档中找到一种方法。有谁知道该怎么做？数据框：

```
##    x1   x2
##0  206  214
##1  226  234
##2  245  253
##3  265  272
##4  283  291 
```

期望的输出：

```
##    x1   x2
##0  206  nan
##1  226  214
##2  245  234
##3  265  253
##4  283  272
##5  nan  291 
```

* * *

## 回答 #1

> 赞同：185
> 
> 时间：2012-06-11T14:35:02.033

```
In [18]: a
Out[18]: 
   x1  x2
0   0   5
1   1   6
2   2   7
3   3   8
4   4   9

In [19]: a['x2'] = a.x2.shift(1)

In [20]: a
Out[20]: 
   x1  x2
0   0 NaN
1   1   5
2   2   6
3   3   7
4   4   8 
```

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2018-10-20T21:45:39.807

你需要在`df.shift`这里使用。
`df.shift(i)`将整个数据帧`i`向下移动单位。

所以，对于`i = 1`：

输入：

```
 x1   x2  
0  206  214  
1  226  234  
2  245  253  
3  265  272    
4  283  291 
```

输出：

```
 x1   x2
0  Nan  Nan   
1  206  214  
2  226  234  
3  245  253  
4  265  272 
```

因此，运行此脚本以获得预期的输出：

```
import pandas as pd

df = pd.DataFrame({'x1': ['206', '226', '245',' 265', '283'],
                   'x2': ['214', '234', '253', '272', '291']})

print(df)
df['x2'] = df['x2'].shift(1)
print(df) 
```

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2018-07-09T18:22:32.543

让我们从您的示例中定义数据框

```
>>> df = pd.DataFrame([[206, 214], [226, 234], [245, 253], [265, 272], [283, 291]], 
    columns=[1, 2])
>>> df
     1    2
0  206  214
1  226  234
2  245  253
3  265  272
4  283  291 
```

然后你可以操纵第二列的索引

```
>>> df[2].index = df[2].index+1 
```

最后重新组合单列

```
>>> pd.concat([df[1], df[2]], axis=1)
       1      2
0  206.0    NaN
1  226.0  214.0
2  245.0  234.0
3  265.0  253.0
4  283.0  272.0
5    NaN  291.0 
```

也许不快但易于阅读。考虑为列名和所需的实际班次设置变量。

编辑：通常可以通过`df[2].shift(1)`已经发布的方式进行转移，但是会切断结转。

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2017-05-31T20:41:00.960

如果您不想丢失超出数据框末尾的列**，**只需先附加所需的数字：

```
 offset = 5
    DF = DF.append([np.nan for x in range(offset)])
    DF = DF.shift(periods=offset)
    DF = DF.reset_index() #Only works if sequential index 
```

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2017-06-26T19:17:44.513

我想进口

```
import pandas as pd
import numpy as np 
```

`NaN, NaN,...`首先在 DataFrame ( `df`)的末尾追加新行。

```
s1 = df.iloc[0]    # copy 1st row to a new Series s1
s1[:] = np.NaN     # set all values to NaN
df2 = df.append(s1, ignore_index=True)  # add s1 to the end of df 
```

它将创建新的 DF df2。也许有更优雅的方式，但这有效。

现在你可以改变它：

```
df2.x2 = df2.x2.shift(1)  # shift what you want 
```

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2018-11-22T10:16:37.743

试图回答一个与您类似的个人问题，我在[Pandas Doc](https://pandas.pydata.org/pandas-docs/stable/generated/pandas.DataFrame.shift.html)上找到了我认为可以回答这个问题的内容：

> **DataFrame.shift** (periods=1, freq=None, axis=0) 将索引按所需的周期数移位，时间频率可选
> 
> **笔记**
> 
> 如果指定了 freq，则索引值会移动，但数据不会重新对齐。也就是说，如果您想在移位时扩展索引并保留原始数据，请使用 freq。

希望对这件事的未来问题有所帮助。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2021-04-28T09:43:13.320

```
df3

    1   108.210 108.231
2   108.231 108.156
3   108.156 108.196
4   108.196 108.074
... ... ...
2495    108.351 108.279
2496    108.279 108.669
2497    108.669 108.687
2498    108.687 108.915
2499    108.915 108.852

df3['yo'] = df3['yo'].shift(-1)

    yo  price
0   108.231 108.210
1   108.156 108.231
2   108.196 108.156
3   108.074 108.196
4   108.104 108.074
... ... ...
2495    108.669 108.279
2496    108.687 108.669
2497    108.915 108.687
2498    108.852 108.915
2499    NaN 108.852 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2019-06-28T05:46:19.340

我就是这样做的：

```
df_ext = pd.DataFrame(index=pd.date_range(df.index[-1], periods=8, closed='right'))
df2 = pd.concat([df, df_ext], axis=0, sort=True)
df2["forecast"] = df2["some column"].shift(7) 
```

基本上我正在生成一个带有所需索引的空数据框，然后将它们连接在一起。但我真的很想将其视为 pandas 的标准功能，因此我[提出了对 pandas 的增强](https://github.com/pandas-dev/pandas/issues/27091)。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2022-01-29T21:42:33.607

我是熊猫新手，我可能不理解这个问题，但这个解决方案适用于我的问题：

```
# Shift contents of column 'x2' down 1 row
df['x2'] = df['x2'].shift() 
```

或者，创建一个内容为“x2”的新列向下移动 1 行

```
# Create new column with contents of 'x2'  shifted down 1 row
df['x3'] = df['x2'].shift() 
```

在试图弄清楚这一点时，我阅读了 shift() 的官方文档，但这对我来说没有多大意义，并且没有引用此特定行为的示例。

请注意，“x2”列的最后一行被有效地推离了数据框的末尾。我希望 shift() 有一个标志来改变这种行为，但我找不到任何东西。

# javascript - WinJS 数据绑定：类和事件绑定

> ID：10982091
> 
> 赞同：2
> 
> 时间：2012-06-11T14:28:53.467
> 
> 标签：javascript, data-binding, winjs

首先，在标记中使用 data-win-bind 属性时是否可以设置任何属性列表？

我想做的几件事：

1.  根据数据源有条件地附加一个类名。
2.  在标记中声明事件监听器。希望这些事件侦听器存在于数据源上，而不是一些全局函数。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-12T08:06:54.300

您可以绑定到两组属性。

第一个是每种元素类型在 DOM 中支持的属性。因此，对于一个`img`元素，例如，您可以绑定`src`属性来设置显示的图像。对于`input`元素，您可以绑定到`value`属性。[您可以在此处查看](http://msdn.microsoft.com/en-us/library/windows/apps/br212882.aspx)可用于 Metro 应用程序的 HTML 元素的完整列表。

如果您已将 WinJS UI 控件应用于元素，则可以使用第二组属性（这通常通过`data-win-control`属性完成。您可以通过应用控件时添加的属性来设置每个控件定义的`winControl`属性。作为例如，如果您想将`itemTemplate`属性绑定在 a 中`ListView`，您将拥有如下标记：

```
<div id="list" data-win-control="WinJS.UI.ListView"
    data-win-bind="winControl.itemTemplate: myValue"></div> 
```

您可以使用相同的技术来设置您的事件处理程序。将回调函数定义为数据源的一部分，如下所示：

```
var dataSource = {
    myClickHandler: function (e) { console.log("Click!") }
} 
```

然后绑定到`on*`你感兴趣的事件对应的属性：

```
<button data-win-bind="onclick: myClickHandler">Press Me</button> 
```

添加和删​​除单个类要复杂得多。我发现最简单的方法是使用基于代码的绑定。在数据源中创建一个 observable 属性，如下所示：

```
var dataSource = {
    myClickHandler: function (e) { console.log("Click") },
    classes: WinJS.Binding.as({
        myFirstClass: true,
        mySecondClass: false,
    })
} 
```

然后在 observable 对象上使用 bind 方法在值发生变化时获取通知并应用/删除类，如下：

```
dataSource.classes.bind("myFirstClass", function (newValue) {
    var elem = document.getElementById("myId");
    if (newValue) {
        WinJS.Utilities.addClass(elem, "myFirstClass");
    } else {
        WinJS.Utilities.removeClass(elem, "myFirstClass");
    }
}); 
```

您*可以*以声明方式绑定类，但您需要一次性设置所有类，这很少有用。如果您想采用这种方法，则将`className`属性绑定到元素上。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-11T16:48:31.423

您可以通过数据绑定在元素上设置任何 javascript 属性。因此可以设置任何作为 javascript 属性公开的内容（基本上，除了 aria- 属性之外的所有内容）。

附加类名有点棘手，因为您可以设置 className 属性，但不能使用绑定附加到它。但是，您可以将所有类名包含在一个字符串中。

我们有代码一直设置例如 onclick 属性。将该函数作为数据源的一部分包含在内，然后您就设置好了。

# vim - Vim - 轻松编辑过滤结果

> ID：10982095
> 
> 赞同：10
> 
> 时间：2012-06-11T14:29:06.820
> 
> 标签：vim, filtering

我想使用[vils 之](http://www.freebsdsoftware.org/sysutils/vils.html)类的东西作为 vim 缓冲区。

例子：

```
a
b
a
b 
```

搜索“a” ( `:g/a/`)

输出：

```
a
a 
```

然后像普通缓冲区一样编辑输出。完成后，它应该将我的更改逐行映射回原始缓冲区。

我怎么做？

PS：我可能可以使用`:%s/../../`或类似的东西，但它不会像它应该的那样舒服。（即使`CTRL`+`F`缓冲区中的完成会起作用。）

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-12T04:22:50.233

使用 Qfreplace [http://github.com/thinca/vim-qfreplace](http://github.com/thinca/vim-qfreplace)

1.  添加一些到quickfix。例如：grep foo * */*
2.  类型：快速修复上的Qfreplace
3.  根据需要更改线路。
4.  :w

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-12T04:40:02.620

您正在谈论的功能听起来像`occure`/`narrow-to-region`在 emacs 中。

在 vim 中，您可以键入以下命令：

```
:vimgrep pattern % 
```

然后键入`:cw`以打开快速修复列表。

您可以使用鼠标单击或`:cn`/`:cp`进行导航以进行更改。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-11T15:20:19.393

只要匹配的行跨越单个范围的连续行，[NrrwRgn 插件](http://www.vim.org/scripts/script.php?script_id=3075)就可以为您工作。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-11T16:59:48.567

我通常将这些行复制到文档的末尾

```
:g/a/t$ 
```

如果需要，您可以在“前”文档末尾设置标记：

```
:$mark a 
```

因此，现在您可以`'a,$`像往常一样实际编辑文档的一部分，包括将其保存到其他地方：

```
:'a,$d | new | put! 
```

* * *

以下方法也有效：您可以拉动，附加到寄存器`a`：

```
:g/a/yank A 
```

当然，您*可能*希望在开始之前清除寄存器 a：

```
:let @a="" 
```

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2012-06-11T15:04:38.957

`g/../`可以与类似的命令结合使用

```
:g/^a/ s/a/a.txt/ 
```

例如将每个“a”更改为“a.txt”。见'：h：g'

# sql - 在 SQL Server 中临时禁用空约束

> ID：10982098
> 
> 赞同：2
> 
> 时间：2012-06-11T14:29:19.427
> 
> 标签：sql, sql-server

我正在使用包含对数据库的更改的脚本，这些更改可以使数据库暂时处于无效状态。目前我在开始时禁用所有约束，然后在脚本末尾使用以下代码重新启用它们：

```
/*** Disable all constraints ***/
EXEC sp_msforeachtable "ALTER TABLE ? NOCHECK CONSTRAINT all"
/*** Enable all constraints ***/
EXEC sp_msforeachtable "ALTER TABLE ? WITH CHECK CHECK CONSTRAINT all" 
```

但这不会禁用空约束，正如我所读到的那样，空约束的处理方式与 FK 约束不同。

我认为有必要更改所有表以使它们允许为空，然后在脚本末尾再次更改它们。

我不能“硬编码”表的名称，因为我没有这些信息，所以我不能做很多陈述，比如：

```
ALTER TABLE someTable ALTER COLUMN someColumn INT NULL 
```

它需要是动态的。关于如何实现这一目标的任何想法？

**编辑：** 我无法处理的一种情况是向现有表添加一个新的非空列。我无法控制添加此列的脚本（它是由自动化工具创建的），创建的脚本是`ALTER TABLE someTable ADD someColumn INT NOT NULL`，在此语句之后发生一些删除/插入/更新，使其`someTable`处于有效状态，但发生错误在`ALTER`声明上

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-11T14:51:11.273

这是一个脚本，我从类型中选择所有字段`text`来制作它`varchar(max)`。您的方法类似，但您需要根据自己的用途对其进行修改。

*   更改 SQL 以找到您需要的正确 c.xtype。

*   根据您的要求修改 WHERE 语句将 @sql_select 更改为您的要求。

*   打印它以进行测试，然后如果您需要，请取消注释 EXEC。

我的代码（用于编辑）：

```
-- change all text to varchar(max)
DECLARE @sql_select NVARCHAR(MAX);
DECLARE @table_name VARCHAR(MAX);
DECLARE @column_name VARCHAR(MAX);

DECLARE local_column_update_cursor CURSOR FOR

SELECT c.name as column_name, o.name as table_name 
FROM dbo.syscolumns c, dbo.sysobjects o
WHERE c.xtype IN (35,99) -- text/ntext
  AND o.id = c.id
  AND OBJECTPROPERTY(o.id, N'IsUserTable') = 1

OPEN local_column_update_cursor
FETCH NEXT FROM local_column_update_cursor
INTO @column_name, @table_name

WHILE @@FETCH_STATUS = 0
BEGIN

SET @sql_select = 'ALTER TABLE ' + @table_name + ' ALTER COLUMN ' + @column_name + ' VARCHAR(MAX)'
--EXEC sp_executesql @sql_select
PRINT @sql_select

FETCH NEXT FROM local_column_update_cursor
INTO @column_name, @table_name
END

DEALLOCATE local_column_update_cursor

GO 
```

如果我有更多时间，我可能会稍后根据您的要求进行编辑以完成它。

# c# - 默认路径，localhost:{port}，只是返回一个空白页（简单）

> ID：10982099
> 
> 赞同：0
> 
> 时间：2012-06-11T14:29:34.050
> 
> 标签：c#, asp.net-mvc, asp.net-mvc-routing

这应该是一个非常非常简单的，我想。我在 ASP.net 中拼凑了一个快速的 POC 项目——我以前做过很多次。但是这一次，无论出于何种原因，默认登录页面 (url=localhost:portnumber 根本不显示任何内容。但是，请求 localhost:portnumber/home/index 工作正常。所以这听起来像是一个路由注册问题，但是我没有弄乱任何代码。这个问题真的无关紧要，因为它只是一个 POC，我只需手动重定向就可以了，但出于好奇，我只是想得到这个答案。

下面是一些相关代码：

来自**global.asax：**

```
public static void RegisterRoutes(RouteCollection routes)
    {
        routes.IgnoreRoute("{resource}.axd/{*pathInfo}");

        routes.MapRoute(
            "Default", // Route name
            "{controller}/{action}/{id}", // URL with parameters
            new { controller = "Home", action = "Index", id = UrlParameter.Optional }
        );
    } 
```

和Home 的**Index.cshtml**在这里，现在仍然是默认值：

```
@{
ViewBag.Title = "Home Page";
}

<h2>@ViewBag.Message</h2>
<p>
To learn more about ASP.NET MVC visit <a href="http://asp.net/mvc" title="ASP.NET MVC Website">http://asp.net/mvc</a>.
</p> 
```

和**home 控制器的 index 动作**（也保留为默认）

```
public ActionResult Index()
    {
        ViewBag.Message = "Welcome to ASP.NET MVC!";

        return View();
    } 
```

编辑：这里是**_Layout.cshtml**：

```
<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8" />
    <title>@ViewBag.Title</title>
    <link href="@Url.Content("~/Content/Site.css")" rel="stylesheet" type="text/css" />
    <script src="@Url.Content("~/Scripts/jquery-1.5.1.min.js")" type="text/javascript">    </script>
    <script src="@Url.Content("~/Scripts/modernizr-1.7.min.js")"     type="text/javascript"></script>
</head>
<body>
    <div class="page">
        <header>
             <div id="title">
                <h1>My MVC Application</h1>
            </div>
            <div id="logindisplay">
                @Html.Partial("_LogOnPartial")
            </div>
            <nav>
                <ul id="menu">
                     <li>@Html.ActionLink("Home", "Index", "Home")</li>
                     <li>@Html.ActionLink("About", "About", "Home")</li>
                </ul>
            </nav>
        </header>
        <section id="main">
            @RenderBody()
        </section>
        <footer>
        </footer>
    </div>
</body>
</html> 
```

奇怪的是，几乎所有东西都完全默认。所以看起来我可以期待默认行为，对吧？我确定我只是错过了一些愚蠢的东西，但这仍然让我感到沮丧。

在此先感谢您的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-11T16:01:32.573

检查项目的 Web 设置。Alt+Enter 在项目文件上。将其设置为特定页面“主页”，看看是否可以修复它。您可能在当前页面上。

# jquery - 为什么此代码适用于 body 标签而不是 target？

> ID：10982103
> 
> 赞同：0
> 
> 时间：2012-06-11T14:29:53.800
> 
> 标签：jquery, jquery-ui, svg, widget, raphael

我正在使用基于 jQuery UI 小部件的插件通过 Raphael 将 SVG 应用到元素 - 而不是应用到我使用此代码选择的元素内部...

```
$('#red-dial').dial({
  barColor: '#F1858F',
  barValue: 26
});​ 
```

...它似乎是在结束 BODY 标记之前添加 SVG 内容。这很奇怪，因为在我的插件中将“this.element”记录到控制台显示选择了正确的 HTML 项目#red-dial，并且在我将其转换为小部件插件之前，相同的代码正在运行。

有谁知道为什么会这样？当然，这可能是我的一个愚蠢的错误！

所有代码的完整 JSFiddle：http: [//jsfiddle.net/vQJng/4/](http://jsfiddle.net/vQJng/4/)

更新：我发现脚本在我调用小部件的脚本文件之后插入了 SVG。例如，如果我输入代码：

```
$('#red-dial').dial({
  barColor: '#F1858F',
  barValue: 26
}); 
```

在小部件文件的末尾，SVG 插入到小部件脚本文件标记之后的行。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-11T14:44:54.093

我不相信这与您的小部件有任何关系；我认为这只是拉斐尔的行为。

例如，我刚刚创建了一个新的 Raphael 画布，而不是使用您的小部件，它会生成相同的布局：

[http://jsfiddle.net/vQJng/5/](http://jsfiddle.net/vQJng/5/)

![在此处输入图像描述](../Images/4a973a4c35a8881f78ce50670c769a50.png)

# c# - 等到文件完全写入

> ID：10982104
> 
> 赞同：82
> 
> 时间：2012-06-11T14:29:57.857
> 
> 标签：c#, file, io, filesystems, copy

在一个目录中创建文件 ( `FileSystemWatcher_Created`) 时，我将其复制到另一个目录。但是当我创建一个大（> 10MB）文件时，它无法复制文件，因为它已经开始复制，当文件尚未完成创建时......
这导致**无法复制文件，因为它被另一个进程**使用提高。;(
有什么帮助吗？

```
class Program
{
    static void Main(string[] args)
    {
        string path = @"D:\levan\FolderListenerTest\ListenedFolder";
        FileSystemWatcher listener; 
        listener = new FileSystemWatcher(path);
        listener.Created += new FileSystemEventHandler(listener_Created);
        listener.EnableRaisingEvents = true;

        while (Console.ReadLine() != "exit") ;
    }

    public static void listener_Created(object sender, FileSystemEventArgs e)
    {
        Console.WriteLine
                (
                    "File Created:\n"
                   + "ChangeType: " + e.ChangeType
                   + "\nName: " + e.Name
                   + "\nFullPath: " + e.FullPath
                );
        File.Copy(e.FullPath, @"D:\levan\FolderListenerTest\CopiedFilesFolder\" + e.Name);
        Console.Read();
    }
} 
```

* * *

## 回答 #1

> 赞同：48
> 
> 时间：2012-06-11T14:37:11.410

您面临的问题只有解决方法。

在开始复制过程之前检查文件ID是否正在处理中。您可以调用以下函数，直到获得 False 值。

**第一种方法，直接从此[答案](https://stackoverflow.com/a/937558)复制：**

```
private bool IsFileLocked(FileInfo file)
{
    FileStream stream = null;

    try
    {
        stream = file.Open(FileMode.Open, FileAccess.ReadWrite, FileShare.None);
    }
    catch (IOException)
    {
        //the file is unavailable because it is:
        //still being written to
        //or being processed by another thread
        //or does not exist (has already been processed)
        return true;
    }
    finally
    {
        if (stream != null)
            stream.Close();
    }

    //file is not locked
    return false;
} 
```

**第二种方法：**

```
const int ERROR_SHARING_VIOLATION = 32;
const int ERROR_LOCK_VIOLATION = 33;
private bool IsFileLocked(string file)
{
    //check that problem is not in destination file
    if (File.Exists(file) == true)
    {
        FileStream stream = null;
        try
        {
            stream = File.Open(file, FileMode.Open, FileAccess.ReadWrite, FileShare.None);
        }
        catch (Exception ex2)
        {
            //_log.WriteLog(ex2, "Error in checking whether file is locked " + file);
            int errorCode = Marshal.GetHRForException(ex2) & ((1 << 16) - 1);
            if ((ex2 is IOException) && (errorCode == ERROR_SHARING_VIOLATION || errorCode == ERROR_LOCK_VIOLATION))
            {
                return true;
            }
        }
        finally
        {
            if (stream != null)
                stream.Close();
        }
    }
    return false;
} 
```

* * *

## 回答 #2

> 赞同：17
> 
> 时间：2012-06-11T14:36:26.333

从文档中`FileSystemWatcher`：

> `OnCreated`创建文件后立即引发该事件。如果正在将文件复制或传输到监视目录中， `OnCreated`则将立即引发该事件，然后是一个或多个 `OnChanged`事件。

因此，如果复制失败（捕获异常），请将其添加到仍需要移动的文件列表中，并在`OnChanged`事件期间尝试复制。最终，它应该工作。

类似的东西（不完整；捕获特定异常，初始化变量等）：

```
public static void listener_Created(object sender, FileSystemEventArgs e)
{
    Console.WriteLine
            (
                "File Created:\n"
               + "ChangeType: " + e.ChangeType
               + "\nName: " + e.Name
               + "\nFullPath: " + e.FullPath
            );
    try {
        File.Copy(e.FullPath, @"D:\levani\FolderListenerTest\CopiedFilesFolder\" + e.Name);
    }
    catch {
        _waitingForClose.Add(e.FullPath);
    }
    Console.Read();
}

public static void listener_Changed(object sender, FileSystemEventArgs e)
{
     if (_waitingForClose.Contains(e.FullPath))
     {
          try {
              File.Copy(...);
              _waitingForClose.Remove(e.FullPath);
          }
          catch {}
     } 
```

}

* * *

## 回答 #3

> 赞同：11
> 
> 时间：2015-05-20T02:24:56.323

It's an old thread, but I'll add some info for other people.

I experienced a similar issue with a program that writes PDF files, sometimes they take 30 seconds to render.. which is the same period that my watcher_FileCreated class waits before copying the file.

The files were not locked.

In this case I checked the size of the PDF and then waited 2 seconds before comparing the new size, if they were unequal the thread would sleep for 30 seconds and try again.

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2012-06-11T14:35:20.043

您实际上很幸运-编写文件的程序将其锁定，因此您无法打开它。如果它没有锁定它，您将复制部分文件，而不知道有问题。

当您无法访问文件时，您可以假设它仍在使用中（更好的是 - 尝试以独占模式打开它，并查看当前是否有其他人正在打开它，而不是从 File.Copy 的失败中猜测）。如果文件被锁定，您将不得不在其他时间复制它。如果它没有被锁定，你可以复制它（这里有轻微的竞争条件）。

“其他时间”是什么时候？我不记得 FileSystemWatcher 何时为每个文件发送多个事件 - 检查一下，您可能只需忽略该事件并等待另一个事件就足够了。如果没有，您可以随时设置时间并在 5 秒内重新检查文件。

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2012-06-11T14:37:33.317

好吧，您已经自己给出了答案；您必须等待文件的创建完成。一种方法是检查文件是否仍在使用中。可以在这里找到一个例子：[有没有办法检查文件是否正在使用？](https://stackoverflow.com/questions/876473/is-there-a-way-to-check-if-a-file-is-in-use)

请注意，您必须修改此代码才能在您的情况下工作。您可能想要类似（伪代码）：

```
public static void listener_Created()
{
   while CheckFileInUse()
      wait 1000 milliseconds

   CopyFile()
} 
```

显然，您应该保护自己免受无限`while`的影响，以防所有者应用程序永远不会释放锁。此外，可能值得查看`FileSystemWatcher`您可以订阅的其他事件。可能有一个事件可以用来规避整个问题。

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2016-11-15T13:24:43.943

当文件以二进制（逐字节）写入时，创建 FileStream 及以上解决方案不起作用，因为文件已准备好并写入每个字节，因此在这种情况下，您需要其他解决方法，例如：在创建文件时执行此操作或您想要开始处理文件

```
long fileSize = 0;
currentFile = new FileInfo(path);

while (fileSize < currentFile.Length)//check size is stable or increased
{
  fileSize = currentFile.Length;//get current size
  System.Threading.Thread.Sleep(500);//wait a moment for processing copy
  currentFile.Refresh();//refresh length value
}

//Now file is ready for any process! 
```

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2017-01-06T02:26:21.103

因此，在快速浏览了其中一些和其他类似问题后，我今天下午进行了一场快乐的追逐，试图解决两个独立程序使用文件作为同步（以及文件保存）方法的问题。有点不寻常的情况，但它确实突出了“检查文件是否被锁定，如果不是则打开它”方法的问题。

问题是这样的：在您检查文件和实际打开文件的时间之间，文件可能会被锁定**。**很难找到零星的**无法复制文件，因为**如果您不寻找它，它会被另一个进程错误使用。

基本解决方案是尝试在 catch 块内打开文件，这样如果它被锁定，您可以重试。这样，检查和打开之间没有经过的时间，操作系统同时进行。

此处的代码使用 File.Copy，但它同样适用于 File 类的任何静态方法：File.Open、File.ReadAllText、File.WriteAllText 等。

```
/// <param name="timeout">how long to keep trying in milliseconds</param>
static void safeCopy(string src, string dst, int timeout)
{
    while (timeout > 0)
    {
        try
        {
            File.Copy(src, dst);

            //don't forget to either return from the function or break out fo the while loop
            break;
        }
        catch (IOException)
        {
            //you could do the sleep in here, but its probably a good idea to exit the error handler as soon as possible
        }
        Thread.Sleep(100);

        //if its a very long wait this will acumulate very small errors. 
        //For most things it's probably fine, but if you need precision over a long time span, consider
        //   using some sort of timer or DateTime.Now as a better alternative
        timeout -= 100;
    }
} 
```

**关于并行性的另一个小说明：** 这是一种同步方法，它会在等待和处理线程时阻塞其线程。这是最简单的方法，但如果文件长时间保持锁定状态，您的程序可能会变得无响应。并行化是一个太大的话题，无法在这里深入探讨，（您可以设置异步读/写的方式数量有点荒谬），但这是一种可以并行化的方式。

```
public class FileEx
{
    public static async void CopyWaitAsync(string src, string dst, int timeout, Action doWhenDone)
    {
        while (timeout > 0)
        {
            try
            {
                File.Copy(src, dst);
                doWhenDone();
                break;
            }
            catch (IOException) { }

            await Task.Delay(100);
            timeout -= 100;
        }
    }

    public static async Task<string> ReadAllTextWaitAsync(string filePath, int timeout)
    {
        while (timeout > 0)
        {
            try {
                return File.ReadAllText(filePath);
            }
            catch (IOException) { }

            await Task.Delay(100);
            timeout -= 100;
        }
        return "";
    }

    public static async void WriteAllTextWaitAsync(string filePath, string contents, int timeout)
    {
        while (timeout > 0)
        {
            try
            {
                File.WriteAllText(filePath, contents);
                return;
            }
            catch (IOException) { }

            await Task.Delay(100);
            timeout -= 100;
        }
    }
} 
```

以下是它的使用方法：

```
public static void Main()
{
    test_FileEx();
    Console.WriteLine("Me First!");
}    

public static async void test_FileEx()
{
    await Task.Delay(1);

    //you can do this, but it gives a compiler warning because it can potentially return immediately without finishing the copy
    //As a side note, if the file is not locked this will not return until the copy operation completes. Async functions run synchronously
    //until the first 'await'. See the documentation for async: https://msdn.microsoft.com/en-us/library/hh156513.aspx
    CopyWaitAsync("file1.txt", "file1.bat", 1000);

    //this is the normal way of using this kind of async function. Execution of the following lines will always occur AFTER the copy finishes
    await CopyWaitAsync("file1.txt", "file1.readme", 1000);
    Console.WriteLine("file1.txt copied to file1.readme");

    //The following line doesn't cause a compiler error, but it doesn't make any sense either.
    ReadAllTextWaitAsync("file1.readme", 1000);

    //To get the return value of the function, you have to use this function with the await keyword
    string text = await ReadAllTextWaitAsync("file1.readme", 1000);
    Console.WriteLine("file1.readme says: " + text);
}

//Output:
//Me First!
//file1.txt copied to file1.readme
//file1.readme says: Text to be duplicated! 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2012-06-11T14:43:10.473

您可以使用以下代码检查文件是否可以以独占访问权限打开（即，它没有被其他应用程序打开）。如果文件没有关闭，您可以稍等片刻，然后再次检查，直到文件关闭并且您可以安全地复制它。

您仍然应该检查 File.Copy 是否失败，因为另一个应用程序可能会在您检查文件和复制文件之间打开该文件。

```
public static bool IsFileClosed(string filename)
{
    try
    {
        using (var inputStream = File.Open(filename, FileMode.Open, FileAccess.Read, FileShare.None))
        {
            return true;
        }
    }
    catch (IOException)
    {
        return false;
    }
} 
```

* * *

## 回答 #9

> 赞同：-5
> 
> 时间：2015-07-30T12:47:02.167

我想在这里添加一个答案，因为这对我有用。我使用了时间延迟，while 循环，我能想到的一切。

我打开了输出文件夹的 Windows 资源管理器窗口。我关闭了它，一切都像一个魅力。

我希望这可以帮助别人。

# android - 循环播放目录中的视频

> ID：10982106
> 
> 赞同：0
> 
> 时间：2012-06-11T14:29:59.787
> 
> 标签：android, video

我想从外部存储目录播放视频，所有文件都是 mp4 格式我在视频视图中播放它但问题是当我使用 onComplitonlistner 时下一个视频丢失了它的视图只有音频进来但没有视频，直到我触摸显示器任何解决方案.

```
 final File s[] = videofiles.listFiles();
    mylist = new ArrayList<String>();

    try {
        for (int j = 0; j < s.length; j++) {
            if (s[j].getName().split("[.]")[1].equalsIgnoreCase("mp4")) {
                mylist.add(s[j].getAbsolutePath());
            }
        }
    } catch (Exception e) {
        e.printStackTrace();
    }

    mVideoView.setVideoPath(mylist.get(i));

    mVideoView.start();
    mVideoView.buildLayer();
    mVideoView.setOnCompletionListener(new MediaPlayer.OnCompletionListener() {

        @Override
        public void onCompletion(MediaPlayer mp) {

            if (i >= s.length - 1) {
                i = -1;
            }

            linearLayout.refreshDrawableState();

            linear.refreshDrawableState();

            mVideoView.stopPlayback();
            mVideoView.refreshDrawableState();
            mVideoView.setDrawingCacheEnabled(true);
            mVideoView.setDrawingCacheQuality(TRIM_MEMORY_BACKGROUND);

            mVideoView.setVideoPath(mylist.get(++i));
            mVideoView.start();

        } 
```

logcat 在这里，这表示媒体播放器没有播放视频，但 auido 来了 ![显示视频未播放但音频连续播放的日志猫](../Images/a7fe70dd3a5999c328f8b4f704f017de.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-11T14:41:58.460

您可能需要再次请求焦点。我在焦点和视频方面遇到了一些奇怪的问题，包括从 3.1 到 3.2 的行为差异。

# javascript - 从另一个窗口访问一个窗口

> ID：10982111
> 
> 赞同：0
> 
> 时间：2012-06-11T14:30:19.820
> 
> 标签：javascript, jquery

假设我们有 2 个窗口：
1）主窗口；
2）弹出；

关闭第二个窗口后是否可以更改第一个窗口的 DOM？
**注意**在第二个窗口（弹出窗口）中有一些重定向（整个页面重新加载）。

**PS**
~~我已经放置了rails标签，因为试图在rails中进行，并且可能有一些rails-way-solution。~~ 对不起我的英语并提前感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-11T14:33:15.817

是的：

```
window.opener.document.write ... 
```

# token - jsp 上的 CSRFGuard 3 - 总是抛出错误“请求中缺少所需的令牌”

> ID：10982112
> 
> 赞同：2
> 
> 时间：2012-06-11T14:30:21.347
> 
> 标签：token, csrf, guard, required

我在 JSP、基于 Servlets 2.3 的 web 项目上配置了 CSRFGuard3，我在 RSA、Websphere 应用服务器（在开发环境中）上运行它。我完全按照用户指南中的说明做了。将 CSRFGuard.jar 放在类路径中，csrfgaurd.properties 和 csrfguard.js 放在 WEB-INF 文件夹下。在 Web.xml 中完成 JavaScriptServlet 映射和指南中指定的其他所有其他映射。

我的要求是从这个 CSRF 中添加保护几个页面（不是全部）。因此，在过滤器映射下，我只指定了那些 servlet，并将 JavaScriptServlet 标记保留在各自的.jsp 文件中。比如保护travelpage.jsp&travledetailPage.jsp，其中导航如下homepage.jsp-->travelpage.jsp-->traveldetailPage.jsp

然后我在 homepage.jsp 和 travelpage.jsp jsp 页面上放了以下标签

```
 <script src="JavaScriptServlet"></script> 
```

并且在 web.xml 中做了如下过滤器映射

```
 <filter>
  <filter-name>CSRFGuard</filter-name>
<Servlet-name>travePageServlet</servlet-name>
</filter>

  <filter>
    <filter-name>CSRFGuard</filter-name>
   <Servlet-name>travledetailPageServlet</servlet-name>
 </filter> 
```

但是当我导航到旅行页面时，CSRF 守卫会抛出错误消息，说“请求中缺少必需的令牌”并重定向错误页面。

# c# - 实体框架 4.3.1 不填充子实体

> ID：10982113
> 
> 赞同：0
> 
> 时间：2012-06-11T14:30:23.483
> 
> 标签：c#, entity-framework

使用存储库模式，我有一个`EFRepository`T 类型的通用存储库（使用泛型）。

我有一个称为`AllIncluding`用于获取实体及其任何子实体的方法：

```
public IQueryable<T> AllIncluding(params Expression<Func<T, 
                                  object>>[] includeProperties)
{
    IQueryable<T> query = _dbSet;
    foreach (var includeProperty in includeProperties)
    {
        query = query.Include(includeProperty);
    }
    return query;
} 
```

在调用中使用以下语法：

```
_machineRepository.AllIncluding(machine => machine.InstalledOS, 
                                machine => machine.LicenceType, 
                                machine => machine.User); 
```

我的机器类看起来像这样（省略了一些细节）：

```
public class Machine
{
    public int MachineId { get; set; }

    public int InstalledOSId { get; set; }
    public InstalledOS InstalledOS { get; set; }

    public int LicenceTypeId { get; set; }
    public LicenceType LicenceType { get; set; }

    public int UserId { get; set; }
    public User User { get; set; }
} 
```

我发现，在我为机器实体渲染视图（使用 ASP.NET MVC 4 beta）时，未填充已安装的操作系统和许可证类型实体，它们似乎已实例化，但 ID 为 0 和其他属性为空。直接在 Machine 实体中，InstalledOSId 和 LicenceTypeId 属性填充了正确的 Id。

如果我将应用程序一直调试到 AllIncluding 方法，我可以看到构造的 SELECT 查询包含正确的表和连接，但仍然没有骰子。

我不确定它是否有任何后果，但我将 IQueryable 一直传回控制器。我假设视图渲染（返回视图（结果））可以管理枚举？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-11T16:56:31.097

这是您在此处所说的有效的非常简单的实现-也许您可以将其与您必须找到的差异进行比较：

```
public class Machine
{
    public int MachineId { get; set; }

    public int InstalledOSId { get; set; }
    public InstalledOS InstalledOS { get; set; }

    public int LicenceTypeId { get; set; }
    public LicenceType LicenceType { get; set; }
}

public class InstalledOS
{
    public int InstalledOSId { get; set; }
}

public class LicenceType
{
    public int LicenceTypeId { get; set; }
}

public class Context : DbContext
{
    public DbSet<Machine> Machines { get; set; }
    public DbSet<LicenceType> LicenceTypes { get; set; }
    public DbSet<InstalledOS> InstalledOSs { get; set; }
}

public class Repository<T> where T : class
{
    private DbSet<T> _dbSet;
    public Repository(DbSet<T> dbset)
    {
        _dbSet = dbset;
    }

    public IQueryable<T> AllIncluding(params Expression<Func<T, 
                                      object>>[] includeProperties)
    {
        IQueryable<T> query = _dbSet;
        foreach (var includeProperty in includeProperties)
        {
            query = query.Include(includeProperty);
        }
        return query;
    }
}

class Program
{
    static void Main(string[] args)
    {
        Database.SetInitializer(new DropCreateDatabaseAlways<Context>());
        Context context = new Context();

        InstalledOS os1 = new InstalledOS();
        context.InstalledOSs.Add(os1);

        LicenceType l1 = new LicenceType();
        context.LicenceTypes.Add(l1);

        Machine m1 = new Machine
        {
            InstalledOS = os1, 
            LicenceType = l1
        };
        context.Machines.Add(m1);

        context.SaveChanges();

        Repository<Machine> repo = new Repository<Machine>(context.Machines);

        var query = repo.AllIncluding(m => m.InstalledOS, m => m.LicenceType);
        Machine m2 = query.First();

        Console.WriteLine(m2.InstalledOS.InstalledOSId);
        Console.ReadLine();

    }
} 
```

# php - PHP fgetcsv没有得到正确的行数

> ID：10982116
> 
> 赞同：1
> 
> 时间：2012-06-11T14:30:28.307
> 
> 标签：php, csv, fgets

我有一个相当大的 csv 文件（17GB），我正在尝试对其进行完整性检查。我写了一个小脚本，看起来像这样：

```
#!/usr/bin/php
<?php

$f = fopen($argv[1],'r');

$i=0;
while (!feof($f)) {
        $row = fgetcsv($f);
        $i++;
}
print $i."\n";

?> 
```

应该只读取行数并打印出来。此脚本输出：60770881

但如果我这样做`wc -l`，结果是 60777200。

我的 csv 文件是从 MySQL 生成的：

```
INTO OUTFILE '/tmp/file.csv' FIELDS TERMINATED BY ',' ENCLOSED BY '"' ESCAPED BY '\\' LINES TERMINATED BY '\n' 
```

所以它不应该有任何未转义的换行符或类似的东西。有谁知道可能出了什么问题？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-11T14:35:52.160

CSV 记录可以跨越多行。如果您在任何值中有回车，则文件中将有多个（2 个或更多）物理行（按 计数`wc`），但它们将作为一个 CSV 记录使用`fgetcsv`.

此外，您不需要检查`feof($f)`，因为`fgetcsv`将在文件结束时返回 FALSE。

# django - django modelformset 排除 ID 字段

> ID：10982119
> 
> 赞同：4
> 
> 时间：2012-06-11T14:30:33.313
> 
> 标签：django, django-models, django-templates, django-forms

我有一个在视图中创建的模型集：

```
 CarpoolFamilyInviteModelFormset = modelformset_factory(CarpoolFamilyInvite, fields=('family_name','family_email'), extra=3) 
```

如您所见，我尝试将其限制为两个字段：family_name 和family_email。但是，当我在模板中渲染它时，我会得到一个额外的字段 ID。这是模板代码：

```
 {% for form in formset %}
                <div class="row">
                {% for field in form %}
                    <div class="span3">
                        <input id="focusedInput" class="input-large focused" type="text" placeholder="{{ field.label }}">
                    </div>
                {% endfor %}
                </div>
            {% endfor %} 
```

这是表格的样子：

![在此处输入图像描述](../Images/6f55d59a92ce9216b741be55934cd7e8.png)

知道如何跳过显示 ID 字段吗？exclude="ID" 似乎没有任何效果。谢谢！

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-06-11T14:36:57.457

模型表单集依赖于 id 字段，因此无法排除它。

最好的选择是将 id 字段呈现为隐藏字段。有关示例，请参阅[遍历隐藏和可见字段的文档。](https://docs.djangoproject.com/en/dev/topics/forms/?from=olddocs#looping-over-hidden-and-visible-fields)

# javascript - 是否可以将一个全局处理程序附加两个不同的对象，然后只删除其中一个？

> ID：10982130
> 
> 赞同：0
> 
> 时间：2012-06-11T14:31:12.920
> 
> 标签：javascript, jquery

假设我为关闭弹出窗口创建了一个全局处理程序：

```
 mouseup_handler: function(item, mouse_is_inside){
    if(!mouse_is_inside) {
      close_box(item);
      return false;
    };
  }, 
```

我这样附上它：

```
$("body").bind('mouseup', function(){ mouseup_handler($popup, mouse_is_inside);  }); 
```

但是假设我有两个`body`需要负责关闭的对象。

现在，当我调用其中一个对象的关闭时：

```
 $("body").unbind('mouseup'); 
```

两者或任何附加到主体的 mouseup 处理程序都将被删除。我可以更具体地说：

```
$("body").unbind('mouseup', mouseup_handler() ); 
```

但这仍然会导致所有`mouseup_handler()`' 被删除的相同问题。

我怎样才能允许`body`区分两者（或多个）但编写可以在同一处理程序的两个对象之间共享的最少代码量？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-11T14:42:05.200

之前对此有一个很好的深入回答，但我会尝试澄清你的问题的细节。

为了让您的代码指定绑定，您似乎需要向事件添加命名空间。该格式看起来像这样的“event.namespace”。链接的示例是：

```
$('#myimage').on('click.mynamespace', function() { /* Do stuff */ });
$('#myimage').off('click.mynamespace'); 
```

此外，根据您的 jQuery 版本，您可能想看看上面显示的 on/off 的好处。我的理解是，命名空间对两者的工作方式相同，但与绑定/取消绑定实现相比，开/关方法可能具有微妙的优势。

以前的答案在[这里](https://stackoverflow.com/questions/209029/best-way-to-remove-an-event-handler-in-jquery)。

一切顺利，纳什

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-11T14:34:50.867

当通过 jQuery 调用事件处理程序时，`this`将引用所涉及的 DOM 元素。因此：

```
$('body').bind('mouseup', function() { mouseup_handler( this, mouse_is_inside ); }); 
```

（或酌情；很难说，因为您没有发布太多代码。）

*编辑*等待 - 如果您绑定到`<body>`但您将其作为委托进行，您应该使用“on”而不是“bind”进行绑定：

```
$('body').on('mouseup', 'selector', function() { ... }); 
```

通过这样做，您可以确保`this`绑定到实际的事件目标元素而不是`<body>`. “选择器”应该识别您感兴趣的实际元素。

要启用和禁用事件处理程序行为，在我看来，最好从元素中添加或删除类名，并在处理程序中检查以决定是否执行任何操作。

# ubuntu - WEP 接入点的 iwconfig 用法？

> ID：10982131
> 
> 赞同：0
> 
> 时间：2012-06-11T14:31:14.140
> 
> 标签：ubuntu, wireless

我想在我的电脑（ubuntu 12.04）中使用我的 wifi doggle（rtl8192cu）。我可以通过 GUI 连接到我的接入点。我想在终端做同样的事情。

我的接入点使用 WEP。所以我输入了以下命令

```
iwconfig wlan0 mode managed key 6d6f6e6579
iwconfig wlan0 essid "AccessPoint"
dhclient wlan0 
```

键入后`dhclient wlan0`等待 1-2 分钟，然后什么也不输出，无法连接到接入点。

iwconfig 输出：

```
wlan0 IEEE 802.11bgn ESSID:"AccessPoint"
      Mode:Managed Access Point: Not-Associated Tx-Power=20 dBm
      Retry long timit:7 RTS thr=2347 B Fragment thr:off
      Encryption key:6D6F-6E65-79
      Power Management:off 
```

我阅读了许多说明等，但无法使其工作。我将不胜感激任何建议

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-25T19:24:01.710

我刚刚尝试了这个解决方案，对我来说它工作得很好

[http://thenewbieblog.wordpress.com/2012/05/01/wifi-hotspot-setup-on-ubuntu/](http://thenewbieblog.wordpress.com/2012/05/01/wifi-hotspot-setup-on-ubuntu/)

# css - 条形图的Highcharts Backgroundimage

> ID：10982137
> 
> 赞同：2
> 
> 时间：2012-06-11T14:31:37.550
> 
> 标签：css, uiwebview, background-image, highcharts, bar-chart

我想使用 Highcharts 将背景图像添加到条形图并将其显示在`UIWebView`.

到目前为止，我一直在使用这个小插件，它在最新的 Chrome 中运行良好。但是，一旦我将它加载到我的 UIWebView 中，图像就不会显示。我认为这与 iOS 可能无法解析图像文件的正确路径有关吗？

是否有另一种（更简单）的方法可以将背景图像添加到条形图中？

**在我的 Highcharts 数据系列中**

```
color: {
   pattern: 'static/img/theimage.png',
   width: 160,
   height: 500
} 
```

**插件**

```
/**
 * Highcharts pattern fill plugin
 */
(function() {
    var idCounter = 0,
        base = Highcharts.Renderer.prototype.color;

    Highcharts.Renderer.prototype.color = function(color, elem, prop) {
        if (color && color.pattern && prop === 'fill') {
            // SVG renderer
            if (this.box.tagName == 'svg') {
                var id = 'highcharts-pattern-'+ idCounter++;
                var pattern = this.createElement('pattern')
                        .attr({
                            id: id,
                            patternUnits: 'userSpaceOnUse',
                            width: color.width,
                            height: color.height
                        })
                        .add(this.defs),
                    image = this.image(
                        color.pattern, 0, 0, color.width, color.height
                    )
                    .add(pattern);
                return 'url(' + this.url + '#' + id + ')';

            // VML renderer
            } else {
                var markup = ['<', prop, ' type="tile" src="', color.pattern, '" />'];
                elem.appendChild(
                    document.createElement(this.prepVML(markup))
                );                
            }

        } else {
            return base.apply(this, arguments);
        }
    };    
})(); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-20T07:52:43.927

我遇到了类似的问题，因为我的 iPad 没有显示我的渐变背景。

最后我通过在我的 JS 中放置 backgroundColor: null 并在 ID 上使用 CSS3 渐变并声明 DIV 的高度来解决这个问题。这很可能也适用于背景图像。

# c# - 在 Web 应用程序中使用 FileSystemWatcher 的替代方法

> ID：10982138
> 
> 赞同：4
> 
> 时间：2012-06-11T14:31:37.643
> 
> 标签：c#, asp.net, filesystemwatcher

我在我的 ASP.NET Web 应用程序中使用表单身份验证，并在特定表单中使用 FileSystemWatcher。表单的功能如下。
1\. 用户登录应用程序。
2\. 应用程序应继续扫描文件夹以查找添加的任何新文件 (XML)。文件夹的路径是从数据库中读取的。
3\. 在文件夹中创建新文件时，应用程序从 XML 文件中读取相关数据并在表单中显示有关该文件的信息。

在搜索了实现此功能的相关控件后，我选择了 FileSystemWatcher。我不太确定它在 Web 应用程序中的效果如何。任何人都可以在 ASP.NET Web 应用程序中建议 FileSystemWatcher 的替代品吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-11T15:10:04.483

为什么要把事情复杂化？只需存储最后轮询日期，然后获取修改日期大于最后轮询日期的任何文件。FileSystemWatcher 对其使用有许多注意事项，您实际上并不需要它来做您正在做的事情。

使用 DirectoryInfo 和一点 Linq：

```
public static string[] GetNewFiles(string directory, string searchPattern, DateTime since)
{
    // Create a new DirectoryInfo object.
    DirectoryInfo dir = new DirectoryInfo(directory);

    if (!dir.Exists)
    {
        throw new DirectoryNotFoundException("The directory does not exist.");
    }

    // Call the GetFileSystemInfos method.
    FileSystemInfo[] infos = dir.GetFileSystemInfos(searchPattern);

    string[] newXmlFiles = (from info in infos
                           where info.CreationTime > since
                           select info.FullName).ToArray();

    return newXmlFiles;
}

public static string[] GetNewOrUpdatedFiles(string directory, string searchPattern, DateTime since)
{
    // Create a new DirectoryInfo object.
    DirectoryInfo dir = new DirectoryInfo(directory);

    if (!dir.Exists)
    {
        throw new DirectoryNotFoundException("The directory does not exist.");
    }

    // Call the GetFileSystemInfos method.
    FileSystemInfo[] infos = dir.GetFileSystemInfos(searchPattern);

    string[] newXmlFiles = (from info in infos
                           where info.LastWriteTime > since
                           select info.FullName).ToArray();

    return newXmlFiles;
}

public static string[] GetUpdatedFiles(string directory, string searchPattern, DateTime since)
{
    // Create a new DirectoryInfo object.
    DirectoryInfo dir = new DirectoryInfo(directory);

    if (!dir.Exists)
    {
        throw new DirectoryNotFoundException("The directory does not exist.");
    }

    // Call the GetFileSystemInfos method.
    FileSystemInfo[] infos = dir.GetFileSystemInfos(searchPattern);

    string[] newXmlFiles = (from info in infos
                           where info.LastWriteTime > info.CreationTime && info.LastWriteTime > since
                           select info.FullName).ToArray();

    return newXmlFiles;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-11T14:37:08.667

这`FileSystemWatcher`是一个适当的类，但是，从表单中使用它不是正确的方式。相反，尝试在您的 ASP.NET 应用程序（不太理想）或单独的 Windows 服务（更理想）中创建一个后台工作程序，然后您的表单将使用适当的机制与该工作程序通信。然后，工作人员将扫描文件夹并读取数据并准备好供您的表单使用。**在**ASP.NET 应用程序中的工作线程或 Windows 服务的 WCF 命名管道通道的情况下，该机制可能是一组事件和共享变量。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-11T14:36:14.250

我不知道 ASP.NET 等效于`FileSystemWatcher`.

但是，您可以`Begin_Request`向 Global.asax 添加一个事件来检查每个请求的新文件。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-11T14:53:46.970

如果要创建实时通知，则必须开发两个组件：一个使用 FileSystemWatcher 并从 Web 端检查新事件的服务，相反，您必须使用[SignaIR](https://github.com/SignalR/SignalR)构建实时、多用户交互式 Web 应用程序。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-11T14:54:53.880

看看这个：

本文展示了如何在 Web 应用程序中使用 FileSystemWatcher，然后继续描述提供 ASP.NET 特定替代方案的缓存机制。

[将 FileSystemWatcher 扩展到 ASP.NET](http://www.developerfusion.com/article/84362/extending-filesystemwatcher-to-aspnet/)

# objective-c - UITextField 设置可见？

> ID：10982144
> 
> 赞同：6
> 
> 时间：2012-06-11T14:32:21.897
> 
> 标签：objective-c, ios, uitextfield, visible

我正在尝试将 UITextField 设置为可见或不可见，但我在文档中找不到它。怎么做 ？

我想使用类似的东西：

```
[myTextField setVisible:YES]; 
```

感谢您的建议

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-06-11T14:33:34.890

我认为您正在寻找：

```
myTextField.hidden = NO; 
```

# java - 如何在 Eclipse 的调试模式下调整变量信息弹出窗口的大小和延迟？

> ID：10982146
> 
> 赞同：3
> 
> 时间：2012-06-11T14:32:29.940
> 
> 标签：java, eclipse

我想知道是否有办法调整在 Eclipse 调试模式下悬停变量时显示的弹出窗口的默认大小。它非常小，当检查包含列表的对象图的内容时，我必须每次都调整窗口的大小。

另外，有没有办法减少悬停元素时必须经过的延迟时间，直到显示窗口？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-31T20:59:42.900

您可以通过双击名称来选择变量，然后使用`Ctrl`++`shift`打开`i`一个窗口。并且在您将窗口调整到您喜欢的大小后，该大小将被记住，以便您下次检查另一个变量时会看到相同大小的窗口。但这不是“弹出窗口”，您每次都需要使用键盘来显示它。

# sql-server - VB.NET --- 如何有效地从 SQL Server 查询中获取二维数组结果？

> ID：10982147
> 
> 赞同：2
> 
> 时间：2012-06-11T14:32:34.203
> 
> 标签：sql-server, vb.net, multidimensional-array

我正在尝试制作通用查询执行器功能。我希望能够向它发送一个查询字符串并让它返回一个包含结果的二维数组。下面是我如何使用 (9,x) 数组执行此操作的代码。如何使用 (y,x) 大小的数组来做到这一点？另外，我觉得必须有一种更有效的方法来做到这一点......

```
 Dim right As Integer = 0
    dbConn = New SqlConnection("hidden for security purposes")
    MyCommand = New SqlCommand(queryString, dbConn)
    dbConn.Open()
    Dim resultArray(9, 0) As String
    MyDataReader = MyCommand.ExecuteReader()

    While (MyDataReader.Read())
        For i = 0 To 9
            If IsDBNull(MyDataReader(i)) Then
                'resultArray(i, UBound(resultArray, 2)) = ""
            Else
                resultArray(i, UBound(resultArray, 2)) = MyDataReader(i)

            End If
        Next

        ReDim Preserve resultArray(9, UBound(resultArray, 2) + 1)
    End While
    ReDim Preserve resultArray(9, UBound(resultArray, 2) - 1)
    MyDataReader.Close()
    dbConn.Close()

Return resultArray 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-11T15:03:53.800

尝试这样的事情：

```
Public Function GetData(ByVal queryString As String, ByVal addParameters As Action(Of SqlParameterCollection) As DataTable
    Dim result As New DataTable()
    Using cn As New SqlConnection(" connection string "), _
          cmd As New SqlCommand(queryString, cn)

       addParameters(cmd.Parameters)

       cn.Open()
       Using rdr As SqlCommand.ExecuteReader()
          result.Load(rdr)
       End Using
   End Using
   Return result
End Function 
```

对于没有参数的查询，这样调用它：

```
Dim result = GetData("Select * from Table", Sub(p) Exit Sub) 
```

或者，如果您确实有一个参数：

```
Dim result = GetData("Select * from Table Where ID= @ID", _
    Sub(p)
        p.Add("@ID", SqlDbType.Int).Value = 12345
    End Sub) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-11T15:08:35.803

使用 List 并交换 x 和 y 会更容易和更有效

```
Dim result = new List(Of String()) 
```

列表会自动增长。

```
While (MyDataReader.Read())
    Dim row = new String(MyDataReader.FieldCount - 1)
    For i = 0 To MyDataReader.FieldCount - 1
        row(i) = MyDataReader(i).ToString()
    Next
    result.Add(row)
End While 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-11T15:02:57.317

我提醒说这是一个坏主意，但如果你必须这样做，我建议返回一个数据集而不是一个数组：

```
Private Function getDataSet(ByVal queryString As String) As DataSet
    Dim data As New DataSet()
    Using dbConn As New SqlConnection("hidden for security purposes")
        dbConn.Open()
        Using MyCommand As New SqlCommand(queryString, dbConn)
            Using adapter As New SqlDataAdapter(MyCommand)
                adapter.Fill(data)
            End Using
        End Using
    End Using
    Return data
End Function 
```

如果您不想要数据集，则可以只返回数据集中的第一个表（本质上是数据的二维数组，但具有更多功能和元数据）：

```
Private Function getDataTable(ByVal queryString As String) As DataTable
    Dim data As New DataSet()
    Using dbConn As New SqlConnection("hidden for security purposes")
        dbConn.Open()
        Using MyCommand As New SqlCommand(queryString, dbConn)
            Using adapter As New SqlDataAdapter(MyCommand)
                adapter.Fill(data)
            End Using
        End Using
    End Using
    Return data.Tables(0)
End Function 
```

或者，如果您必须有一个二维字符串数组，您仍然可以通过在内部填充数据集然后将其转换为数组来更轻松：

```
Private Function getDataArray(ByVal queryString As String) As String()()
    Dim rows As List(Of String()) = New List(Of String())
    Using dbConn As New SqlConnection("hidden for security purposes")
        dbConn.Open()
        Using MyCommand As New SqlCommand(queryString, dbConn)
            Using adapter As New SqlDataAdapter(MyCommand)
                Dim data As New DataSet()
                adapter.Fill(data)
                For Each row As DataRow In data.Tables(0).Rows
                    Dim items(row.ItemArray.Length) As String
                    For i As Integer = 0 To row.ItemArray.Length - 1
                        items(i) = row.ItemArray(i).ToString()
                    Next
                    rows.Add(items)
                Next
            End Using
        End Using
    End Using
    Return rows.ToArray()
End Function 
```

# sql-server-2005 - 无法恢复数据库，数据库正在被会话使用

> ID：10982148
> 
> 赞同：12
> 
> 时间：2012-06-11T14:32:38.270
> 
> 标签：sql-server-2005

我正在使用 SQL Server 2005，但在恢复数据库时遇到问题我在尝试恢复数据库时收到此消息。

> 还原失败。(Microsoft.SqlServer.Express.Smo)
> 
> “System.Data.SqlClient.SqlError：RESTORE 无法处理数据库'AMOD'，因为它正在被此会话使用。建议在执行此操作时使用主数据库。（Microsoft.SqlServer.Express.Smo）”

我重新启动了程序，我没有打开数据库中包含的任何表，但我仍然收到此消息。我是 SQL Server 新手，这是我第一次进行还原。我感谢提供的任何帮助。

* * *

## 回答 #1

> 赞同：38
> 
> 时间：2012-06-11T14:34:31.283

您需要将所有用户踢出，并确保您不在该数据库中。假设您在 Management Studio 中，您需要以这种方式将您的上下文更改为不同的数据库（或将数据库下拉列表切换到不同的数据库），这也会踢出任何其他用户（可能是您 - 对象资源管理器，对象资源管理器详细信息、其他查询窗口等都可能通过维护与数据库的连接来无意中阻止还原）：

```
USE master;
GO
ALTER DATABASE AMOD SET SINGLE_USER WITH ROLLBACK IMMEDIATE; 
```

完成还原并且数据库可以再次使用后：

```
ALTER DATABASE AMOD SET MULTI_USER; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-03-26T10:30:55.707

使用活动管理器来终止脚本中的资源依赖关系，或者简单地终止 SPID。

# r - 如何在R中将多行组合成一个观察值

> ID：10982150
> 
> 赞同：2
> 
> 时间：2012-06-11T14:32:39.947
> 
> 标签：r, dataframe

我对 R 比较陌生，我有点想把我的数据转换成合适的格式。看起来 reshape 包可能对此有用，但我没有比这更进一步的了。

我有一个数据框，其中一列（V4）包含字符串和数字。我想通过 V2 和 V1 中给出的分组来拆分 V4，并将结果作为三个单独的列附加到数据框中。

编辑：由于我原来的示例数据框没有完全捕捉到问题的复杂性，这里有一个更准确的例子：

```
>df <- data.frame(V1=c(rep("SN", 8),rep("JK", 4)), 
             V2=c(1,1,2,2,2,3,3,3,1,1,2,2), 
             V3=c("Picture", "Response", "Sound", "Sound", "Response", "Sound", "Sound", "Response", "Sound", "Response", "Sound", "Sound"), 
             V4=c("Photo", "100", "XYZc02i03", "XYZq02i03", 200, "ZYXc01i30", "ZYXq01i30", 100, "XYZc02i40", 200, "XYZc02i03", "XYZq02i03" ), 
             stringsAsFactors=FALSE)

>V1 V2       V3        V4
 SN  1  Picture     Photo
 SN  1 Response       100
 SN  2    Sound XYZc02i03
 SN  2    Sound XYZq02i03
 SN  2 Response       200
 SN  3    Sound ZYXc01i30
 SN  3    Sound ZYXq01i30
 SN  3 Response       100
 JK  1    Sound XYZc02i40
 JK  1 Response       200
 JK  2    Sound XYZc02i03
 JK  2    Sound XYZq02i03 
```

我想得到这样的东西：

```
 V1  V2       V3          V4        V5   V6
   SN   1  Picture       Photo        NA  100
   SN   2    Sound   XYZc02i03 XYZq02i03  200
   SN   3    Sound   ZYXc01i30 ZYXq01i30  100
   JK   1    Sound   XYZc02i40        NA  200
   JK   2    Sound   XYZc02i03 XYZq02i03   NA 
```

编辑：我在 V2 中的观察次数并不总是相同，这意味着我想要获取的数据框中可能缺少 V4、V5 或 V6 的值。

Edit2：V6 应该映射到来自 V3、V4 和 V5 的“响应”变量，理想情况下，应该按连续顺序映射到来自 V3 的“声音”值。

我将非常感谢有关如何解决此问题的任何建议。或者，如果这个问题已经在其他地方得到解决而我错过了，那么链接也会很棒。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-11T15:11:31.920

`cbind`您的定义中不需要 a `df`。你会使用这样的东西：

```
df <- data.frame(V1=rep("SN", 6), 
                 V2=rep(2:3, each=3), 
                 V3=c("Sound", "Sound", "Response", "Sound", "Sound", "Response"), 
                 V4=c("XYZc02i03", "XYZq02i03", 200, "ZYXc01i30", "ZYXq01i30", 100), 
                 stringsAsFactors=FALSE) 
```

但是给定一个像您描述的那样的数据框，您可以通过以下方式获得所需的结果：

```
max.subset.len <- 3 # or maybe max(sapply(split(df, list(df$V1, df$V2)), FUN=nrow))
fun <- function(v4) {length(v4) <- max.subset.len; v4}
agg <- aggregate(df$V4, by=list(df$V1, df$V2), FUN=fun)
results <- cbind(agg[1:2], agg[[3]]) 
```

# java - Servlet pdf下载按钮创建

> ID：10982153
> 
> 赞同：1
> 
> 时间：2012-06-11T14:32:51.033
> 
> 标签：java, jakarta-ee, servlets

我有一个 servlet，当用户按下一个按钮时，它会生成一个动态 pdf（根据用户给定的数据）并将其下载到用户的 c:/ 位置。有人可以帮我怎么做吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-11T14:52:28.153

你到底有什么不清楚的地方？如何编写一个html表单？如何从 HttpServletRequest 中获取参数？或者如何生成pdf并下载给用户？

```
<form action="yourServlet">
 <input type="text" name="sometxt"/>
 <input type="secret" name="passwd"/>
 <input type="submit"/>
</form> 
```

然后，您可以在 getXXX 方法中检索它，例如

```
final String text  = request.getParameter("sometxt");
final String rawPassword = request.getParameter("secret"); 
```

如果您需要渲染 pdf，您应该查看 Apache PdfBox。

最后，如果您无法将文件下载给用户：

```
response.setContentType("application/pdf");
InputStream in = ... // depends where you store your file 
ServletOutputStream out = response.getOutputStream();
byte[] buffer = new byte[4096];
while(in.read(buffer, 0, 4096) != -1)
   out.write(buffer, 0, 4096);
in.close();
out.flush();
out.close(); 
```

并且不要忘记处理 IOException，我出于简单的目的而错过了它。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-11T14:47:28.537

这是下载文件的 Java servlet 的一个很好的示例：[http](http://www.dzone.com/snippets/example-file-download-servlet) ://www.dzone.com/snippets/example-file-download-servlet 。

请注意，无需询问用户在哪里下载文件，由浏览器下载机制处理。

这里还有一些有用的信息：[http](http://www.mkyong.com/java/how-to-download-file-from-website-java-jsp/) ://www.mkyong.com/java/how-to-download-file-from-website-java-jsp/ 。

# android - 文件已存在。当我试图让我的 .apk 登录到 android 时发生错误

> ID：10982154
> 
> 赞同：2
> 
> 时间：2012-06-11T14:32:52.277
> 
> 标签：android, apk, keystore, signed

我正在尝试按照以下步骤创建签名的 .apk

步骤：1右键单击项目->导出应用程序->选择您的项目->下一步->选择新密钥库->完成所有其余步骤

步骤： 2 记下您的别名和密码。

步骤：3 现在，如果您完成填写详细信息的所有过程，您将在您的存储位置获得一个 .apk 文件和密钥库文件。

步骤：4现在再次右键单击项目->导出应用程序->选择您的项目->下一步->使用现有密钥库->提供位置和密码->下一步

步骤：5 现在您的别名将出现在您的下拉菜单中->选择它->输入密码->下一步

步骤：6 它会询问存储最终 .apk 文件的位置。

步骤： 7 选择您的位置和商店。

步骤：8 现在这个最终的 .apk 文件是您的签名应用程序。

但是在第 1 步，当我尝试创建新的密钥库时， `File already exists.` 下面发生的错误是它的屏幕截图。我不明白这件事并付出了很多努力，但从未摆脱它。任何帮助表示赞赏

![文件已存在](../Images/1388eca6d87b8f377d35e41d5d01c641.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-11T14:39:55.887

您正在尝试将密钥库创建为 apk，但这是不正确的。密钥库不是应用程序或其他东西，只需将其命名为`key`，然后输入您的密码并确认密码。

在稍后的屏幕中，将询问您将 .apk 文件导出到哪里。

# android - Android 在 Asynctask 中使用多种方法

> ID：10982155
> 
> 赞同：1
> 
> 时间：2012-06-11T14:33:00.087
> 
> 标签：android, android-asynctask

我正在尝试运行后台异步任务来加载我的数据。
我有 2 种加载数据的方法，我在`AsyncTask`.
加载完成后，我有一个方法调用`Filldata`，用数据填充 UI。

问题是目前它只使用首先完成下载数据的任何方法填充 UI。
有没有办法在一个内部运行多个方法，`AsyncTask`还是我需要多个`AsyncTasks`？

这是我的`AsyncTask`

```
public class PostTask extends AsyncTask<Void, String, Boolean> {

    @Override
    protected Boolean doInBackground(Void... params) {
        boolean result = false;
        loadNewsFeed();
        loadResultsFeed();
        publishProgress("progress");
        return result;
    }

    protected void onProgressUpdate(String... progress) {
        StringBuilder str = new StringBuilder();
            for (int i = 1; i < progress.length; i++) {
                str.append(progress[i] + " ");

            }
    }

        @Override
    protected void onPostExecute(Boolean result) {
        super.onPostExecute(result);
        Log.v("BGThread", "begin fillin data");
         FillData();
    }
} 
```

这是我的完整代码

```
public void checkPreferences(){

        SharedPreferences preferences = getSharedPreferences("prefs", Context.MODE_PRIVATE);
        ChosenMethod = preferences.getString("ChosenMethod", ChosenMethod);
        ChosenLeagueID = preferences.getString("ChosenLeagueId", ChosenLeagueID);
        ChosenTeamId = preferences.getString("ChosenTeamId", ChosenTeamId);

         Log.v("lc", "newsurl" + newsFeedURL);

        Log.v("myapp", "ChosenMethod Home = " + ChosenMethod);
        Log.v("myapp", "ChosenLeagueID Home = " + ChosenLeagueID);
        Log.v("myapp", "ChosenTeamID Home = " + ChosenTeamId);

         if (ChosenMethod.equals("Team")) {
             setContentView(R.layout.homeactteam2);
             newsAmount = 5;

         } else {
             newsAmount = 10;
             setContentView(R.layout.homeactteam);
         }

}

@Override
protected void onCreate(Bundle savedInstanceState) {
    // TODO Auto-generated method stub
    super.onCreate(savedInstanceState);

    //Check Preferences which sets UI

    checkPreferences();
   PostTask posttask;
   posttask = new PostTask();
   posttask.execute();

    Button backbtn = (Button) findViewById(R.id.backbtn);

    //Listening to button event
    backbtn.setOnClickListener(new View.OnClickListener() {

        public void onClick(View arg0) {
            //Starting a new Intent
            Intent previousScreen = new Intent(getApplicationContext(), ChooseTeamActivity.class);
            ChosenMethod = "null";
            SharedPreferences preferences = getSharedPreferences("prefs", Context.MODE_PRIVATE);
            SharedPreferences.Editor editor = preferences.edit();
            editor.putString("ChosenMethod", ChosenMethod);            
            editor.commit();
            previousScreen.putExtra("FullData", fulldata);
            startActivity(previousScreen);

        }
    });

//((PullToRefreshListView) getListView()).setOnRefreshListener(new OnRefreshListener() {
//   
//    public void onRefresh() {
//        // Do work to refresh the list here.
//        loadData();
//    }
//});
//

}

public void loadNewsFeed(){

     newsFeedRequest = "" + chosenLeagueId + "" + unixTimeStamp;
     newsFeedURL = "" + newsFeedRequest;    

        String myhash = buildHmacSignature(apiKey, newsFeedURL);
        HttpClient client = new DefaultHttpClient();
        HttpPost post = new HttpPost(newsFeedURL);

        List<NameValuePair> pairs = new ArrayList<NameValuePair>();
        pairs.add(new BasicNameValuePair("requestToken", myhash));
        pairs.add(new BasicNameValuePair("apiUser", apiUser));

            try {
                post.setEntity (new UrlEncodedFormEntity(pairs));
                HttpResponse response = client.execute(post);
                BufferedReader reader = new BufferedReader(new InputStreamReader(response.getEntity().getContent(), "UTF-8"));
                String json = reader.readLine();
                fulldata = String.valueOf(json);
                Log.v("myApp","newsdata" + fulldata);

                newsList = new ArrayList<String>();
                newsList2 = new ArrayList<String>();
                newsList3 = new ArrayList<String>();
                imageList = new ArrayList<String>();

                JSONObject obj = new JSONObject(json);    
                JSONObject objData = obj.getJSONObject("data");
                JSONArray jArray = objData.getJSONArray("news");
                Log.v("lc","newsAmount= " + newsAmount);

                   for(int t = 0; t < newsAmount; t++){
                       JSONObject newsTitleDict = jArray.getJSONObject(t);
                       imageList.add(newsTitleDict.getString("image_small"));
                     newsList3.add(newsTitleDict.getString("title"));

                   }

                   for(int t = 0; t < 1; t++){
                       JSONObject newsTitleDict = jArray.getJSONObject(t);

                 newsList.add(newsTitleDict.getString("title"));
            //       newsList2.add(newsTitleDict.getString("title"));

                   }

                     Log.v("BGThread", "Loaded news");
                     loadResultsFeed();

    } catch (ClientProtocolException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    } catch (IOException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    } catch (JSONException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    }

}           

public void loadResultsFeed(){

    resultsFeedRequest = "" + chosenLeagueId + "" + ChosenTeamId + "" + unixTimeStamp;
    resultsFeedURL = "https://secure.pitchero.com/_services/api/" + resultsFeedRequest; 

    String myhash = buildHmacSignature(apiKey, resultsFeedURL);

    HttpClient client = new DefaultHttpClient();
    HttpPost post = new HttpPost(resultsFeedURL);

    List<NameValuePair> pairs = new ArrayList<NameValuePair>();
    pairs.add(new BasicNameValuePair("requestToken", myhash));
    pairs.add(new BasicNameValuePair("apiUser", apiUser));

    try {
        post.setEntity (new UrlEncodedFormEntity(pairs));
        HttpResponse response = client.execute(post);
        BufferedReader reader = new BufferedReader(new InputStreamReader(response.getEntity().getContent(), "UTF-8"));
        String json = reader.readLine();
        fulldata = String.valueOf(json);
        Log.v("myApp","resultsdata" + fulldata);

        newsList = new ArrayList<String>();
        newsList2 = new ArrayList<String>();
        newsList3 = new ArrayList<String>();
        imageList = new ArrayList<String>();

        JSONObject obj = new JSONObject(json);    
        JSONObject objData = obj.getJSONObject("data");
        JSONArray jArray = objData.getJSONArray("results");

        if(jArray.length() < 1) loadLastResults();

        for(int t = 0; t < 1; t++){

               resultsDict = jArray.getJSONObject(t);
              HomeTeam = resultsDict.getString("hometeam");
              AwayTeam = resultsDict.getString("awayteam");
              HomeScore = resultsDict.getString("homescore");
              AwayScore = resultsDict.getString("awayscore");
              Attendance = resultsDict.getString("attendance");
              Division = resultsDict.getString("division");

              Log.v("lc","hometeam" + HomeTeam);
              Log.v("lc","awayteam" + AwayTeam);

             Log.v("BGThread", "Loaded results");

           }

    } catch (ClientProtocolException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    } catch (IOException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    } catch (JSONException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    }   

}

public void loadLastResults(){

    resultsFeedRequest = "" + chosenLeagueId + "" + ChosenTeamId + "&limit=31&timestamp=" + unixTimeStamp;
    resultsFeedURL = "" + resultsFeedRequest;   

     String myhash = buildHmacSignature(apiKey, resultsFeedURL);

    Date anotherCurDate = new Date();  
    SimpleDateFormat formatter = new SimpleDateFormat("MM");  
    String CurMonth = formatter.format(anotherCurDate);  

    int Int = Integer.parseInt(CurMonth);

    int MonthInt = Int -1;

    CurMonth = (String) (String.valueOf(MonthInt));

    if (CurMonth.equals("1")){

        lastMonth = "12";

    }    
     else {
        if(CurMonth.length() < 2){
            lastMonth = "0" + CurMonth;
        } else {
            lastMonth = CurMonth;
        }
    }

    Log.v("lc","month= " + CurMonth);
    Log.v("lc","LastMonth= " + lastMonth);

        HttpClient client = new DefaultHttpClient();
        HttpPost post = new HttpPost(resultsFeedURL);

        List<NameValuePair> pairs = new ArrayList<NameValuePair>();
        pairs.add(new BasicNameValuePair("requestToken", myhash));
        pairs.add(new BasicNameValuePair("apiUser", apiUser));

        try {
            post.setEntity (new UrlEncodedFormEntity(pairs));
            HttpResponse response = client.execute(post);
            BufferedReader reader = new BufferedReader(new InputStreamReader(response.getEntity().getContent(), "UTF-8"));
            String json = reader.readLine();
            fulldata = String.valueOf(json);
            Log.v("myApp","resultsdata" + fulldata);

            newsList = new ArrayList<String>();
            newsList2 = new ArrayList<String>();
            newsList3 = new ArrayList<String>();
            imageList = new ArrayList<String>();

            JSONObject obj = new JSONObject(json);    
            JSONObject objData = obj.getJSONObject("data");
            JSONArray jArray = objData.getJSONArray("results");

               for(int t = 0; t < 1; t++){

                   resultsDict = jArray.getJSONObject(t);
                  HomeTeam = resultsDict.getString("hometeam");
                  AwayTeam = resultsDict.getString("awayteam");
                  HomeScore = resultsDict.getString("homescore");
                  AwayScore = resultsDict.getString("awayscore");
                  Attendance = resultsDict.getString("attendance");
                  Division = resultsDict.getString("division");

                  Log.v("lc","hometeam" + HomeTeam);
                  Log.v("lc","awayteam" + AwayTeam);

                 Log.v("BGThread", "Loaded Last results");

               }

        } catch (ClientProtocolException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        } catch (IOException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        } catch (JSONException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        }

    }   

public class PostTask extends AsyncTask<Void, String, Boolean> {

    @Override
    protected Boolean doInBackground(Void... params) {
        boolean result = false;

        loadNewsFeed();
        publishProgress("method1_complete");
        loadResultsFeed();
        publishProgress("method2_complete");
        return result;
    }

    protected void onProgressUpdate(String... progress) {
        StringBuilder str = new StringBuilder();
            for (int i = 1; i < progress.length; i++) {
                str.append(progress[i] + " ");

            }
    }

        @Override
    protected void onPostExecute(Boolean result) {
        super.onPostExecute(result);
        Log.v("BGThread", "begin fillin data");
         FillData();
    }
}

public void FillData(){ 

     if (ChosenMethod.equals("Team")) {

        arrayAdapter = new ArrayAdapter<String>(this, R.layout.single_item, newsList);

         String[] mStrings = (String[]) imageList.toArray(new String[imageList.size()]);
         String[] news = (String[]) newsList3.toArray(new String[newsList3.size()]);

         arrayAdapter3 = new LazyAdapter(this, mStrings, news);

            ListView list = getListView();
               list.setTextFilterEnabled(true);

               LayoutInflater inflater = (LayoutInflater) this.getSystemService(Context.LAYOUT_INFLATER_SERVICE );
                View header = inflater.inflate( R.layout.homeheader, list, false);
                View header2 = inflater.inflate( R.layout.homeheader2, list, false);
                View header3 = inflater.inflate( R.layout.homeheader3, list, false);

        //setListAdapter (arrayAdapter);

                 resultsView = LayoutInflater.from(getBaseContext()).inflate(R.layout.resultscell,
                         null);

               TextView homeTeam = (TextView) resultsView.findViewById(R.id.HomeTeam);
               homeTeam.setText(HomeTeam);

               TextView awayTeam = (TextView) resultsView.findViewById(R.id.AwayTeam);
               awayTeam.setText(AwayTeam);

               TextView homeScore = (TextView) resultsView.findViewById(R.id.HomeScore);
               homeScore.setText(HomeScore);

               TextView awayScore = (TextView) resultsView.findViewById(R.id.AwayScore);
               awayScore.setText(AwayScore);

               TextView attendance = (TextView) resultsView.findViewById(R.id.Attendence);
               attendance.setText("Att:" + Attendance);

               TextView division = (TextView) resultsView.findViewById(R.id.Division);
               division.setText(Division);

               Log.v("BGThread", "Filled results");

            adapter = new MergeAdapter();
            adapter.addView(header);
            adapter.addAdapter(arrayAdapter);
            adapter.addView(header2);
            adapter.addView(resultsView);
            adapter.addView(header3);
            adapter.addAdapter(arrayAdapter3);
            setListAdapter(adapter);

            Log.v("BGThread", "Filled Merge Adapter Team");

     } else {

         arrayAdapter = new ArrayAdapter<String>(this, R.layout.single_item, newsList);
            arrayAdapter2 = new ArrayAdapter<String>(this, R.layout.single_item, newsList2);
            //arrayAdapter3 = new ArrayAdapter(this, R.layout.complex_item, newsList3);

             String[] mStrings = (String[]) imageList.toArray(new String[imageList.size()]);
             String[] news = (String[]) newsList3.toArray(new String[newsList3.size()]);

             arrayAdapter3 = new LazyAdapter(this, mStrings, news);

                ListView list = getListView();
                   list.setTextFilterEnabled(true);

                   LayoutInflater inflater = (LayoutInflater) this.getSystemService(Context.LAYOUT_INFLATER_SERVICE );
                    View header3 = inflater.inflate( R.layout.homeheader3, list, false);

            //setListAdapter (arrayAdapter);

                adapter = new MergeAdapter();
                adapter.addView(header3);
                adapter.addAdapter(arrayAdapter3);
                setListAdapter(adapter);

                Log.v("BGThread", "Filled Merge Adapter League");
         } 
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-11T14:41:42.797

你可以有以下逻辑（未经测试！）

```
 loadNewsFeed();
 publishProgress("method1_complete");
 loadResultsFeed();
 publishProgress("method2_complete");

@Override
protected void onProgressUpdate(Object... values)
    {
        if(values[0].toString().equalsIgnoreCase("method1_complete"))
        {
            fill ui from method 1
        }
        else
        {
            fill ui from method 2
        }
        super.onProgressUpdate(values);
    } 
```

下面是示例片段。

```
class abc extends AsyncTask<Object, Object, Object>
    {

        int i, j;
        Context context;

        public abc(AActivity aActivity)
        {
            this.context = aActivity;
        }

        public void method1()
        {
            i = 1;
        }

        public void method2()
        {
            j = 2;
        }

        @Override
        protected Object doInBackground(Object... params)
        {

            method1();
            publishProgress("method1");
            method2();
            publishProgress("method2");

            return null;
        }

        @Override
        protected void onProgressUpdate(Object... values)
        {
            if (values[0].toString().equalsIgnoreCase("method1"))
            {
                EditText text1 = (EditText) findViewById(R.id.text1);
                text1.setText(String.valueOf(i));
            } else
            {
                EditText text2 = (EditText) findViewById(R.id.text2);
                text2.setText(String.valueOf(j));
            }
            super.onProgressUpdate(values);
        }

    } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-11T15:55:04.947

我正在为类似的问题而苦苦挣扎，我认为我的 Q 的答案可能会对您有所帮助。请看这个：[嵌套的 AsyncTask 和 onPostExecute](https://stackoverflow.com/questions/10963027/nested-asynctask-and-onpostexecute)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-11T14:36:58.790

两种方法都将按顺序执行，因为它们合二为一`AsyncTask`：首先`loadNewsFeed()`将执行，然后如果完成，`loadResultsFeed()`则执行。

因此，查看您的代码示例，没有证据表明没有执行一个或多个方法。

# c# - 如何从 Pdf、Word 和 Excel 文档中提取文本？

> ID：10982156
> 
> 赞同：15
> 
> 时间：2012-06-11T14:33:02.223
> 
> 标签：c#, .net, html, pdf, extract

我需要一个 .NET 库，以便使用它从 PDF、Excel 和 Word 文件中提取文本数据。

理想情况下，一个免费的工具！

你会推荐任何吗？

非常感谢，

* * *

## 回答 #1

> 赞同：32
> 
> 时间：2012-06-11T16:05:24.193

作为一个花了很多天时间寻找（几乎）这个确切问题的免费解决方案的人，我可以很诚实地告诉你，你不会找到一个能够很好地从*所有*这些格式中提取文本的免费库。我知道的唯一一个在所有这些格式（以及更多）方面都做得很好的库是一个商业库，它实际上并不是 .NET 的原生库，它是一个 C++/COM 库，带有一个 C++/CLI 。 NET 包装器。

有哪些选择？

*   [iTextSharp——](http://itextpdf.com/)这一款在从 PDF 中提取文本方面非常棒。虽然这个库的更高版本是商业友好的（LGPL），但作者决定改为对软件收费，所以他们改为在 AGPL 下发布它，所以除非你想发布所有源代码，您可能不想使用其中一个版本。但是，根据 LGPL 许可的最新版本 (4.1.6) 可以在整个 Internet 上找到。[这个 SO question](https://stackoverflow.com/a/5693574/721276)有一个链接到 LGPL 下的版本。

*   [PdfBox](http://pdfbox.apache.org/userguide/dot_net.html) -- 另一个 PDF 库。这个，IMO，更好，因为它在 Apache 2.0 许可下。它有一些问题，因为它*有时*（可能很少）不会像 iTextSharp 那样做得好。我将此更多地归因于它是一个比其他任何东西都更新的库。 **但是，**我对这个库的体验是*几个月*前的事了。这个项目正在积极开发中，仅在上个月，就解决了 52 个问题。我会密切关注这个。请注意，这是一个 java 库。（请继续阅读下文，了解有关我为何包含此内容的更多信息。）

*   [POI](http://poi.apache.org/)或[NPOI——](http://npoi.codeplex.com/)这些是专门为 Microsoft Office 文档编写的库，尤其是 2007 年之前的格式、OLE 二进制文件格式。它确实支持较新的 OpenXML 格式，但我不确定该库的那部分是否成熟。POI 是 java 版本（请继续阅读下文，了解有关我为何包含此内容的更多信息。），其中 NPOI 是本机 .NET 版本。[但是，NPOI 只支持 excel 文档，其中 POI 可以对更多类型](http://poi.apache.org/text-extraction.html)进行文本提取。

*   [Open XML SDK 2.0](http://msdn.microsoft.com/en-us/library/bb448854.aspx) -- 一个用于读取/修改 office 2007+（未加密的 OpenXML）文档的库，是我自己创建的 Microsoft！这是一个用于处理此类文档的惊人库。但是，它是一个较低级别的库，因此实际上（据我所知）并没有一个*它可以完成所有*文本提取类。有一个相当好的例子，（我不确定它是否涵盖某些情况，如表格中的文本等），从[这个 SO 答案的 word 文档中提取文本](https://stackoverflow.com/a/8659689/721276)

*   [Tika](http://tika.apache.org/) -- 再一次，另一个 Java 库（我不会无缘无故地告诉您有关 Java 库的内容。继续阅读！:)），这将尽可能接近用于文本提取的“一个库”。Tika 可以使用现有的解析库从许多不同类型的文件中提取元数据和*结构化文本内容。*它实际上在后台使用 POI 和 PdfBox 来处理办公室和 PDF 文档。

非商业

*   [dtSearch——](http://www.dtsearch.com/)这是一个我非常熟悉的库。它做得很棒，并且可以解析大量的文件格式。但是，它要花钱，而且对于您需要的东西来说可能是多余的。它实际上*正是*我们所需要的，但我们正试图自己摆脱它，因为我们只使用它进行解析（它实际上是一个全文搜索引擎），并且有很多解析库可供我们使用或修改以满足我们的需要，但它确实将所有这些其他库从水中吹了出来。正如我之前提到的，它也不是本机 .NET 代码。C++/CLI 包装器用于在 DLL 和 .NET 运行时之间进行交互。

^(可以使用 iFilter，并且在其他几个针对不同问题的 SO 答案中也提到过，但是您将得到的文本是非结构化的。有时这很糟糕……至少对人类来说是不可读的。我相信 iFilter 也已被弃用，并且根据许可证问题，您可能无法重新分发它们。)

* * *

为什么我提到所有这些 Java 库？嗯，有两个原因。首先，没有与这些 Java 库的质量相近的*免费.NET 等价物。*[其次，您可以使用IKVM](http://www.ikvm.net/)在 .NET 中使用这些库（我亲自使用这些库完成了这项工作，因此我至少可以保证这一点）。它是 .NET 内部的 Java 实现。 [这是](http://www.dovetailsoftware.com/blogs/kmiller/archive/2010/07/02/using-the-tika-java-library-in-your-net-application-with-ikvm)使用 IKVM 将 Tika 转换为可在您的项目中使用的 .NET 程序集的一个很好的示例。也许 IKVM 最可怕的地方在于*它可以正常工作！*

编辑：我忘记了那个博客的作者实际上已经在[github 项目](https://github.com/KevM/tikaondotnet)上发布了代码和转换的库。因此，如果您想快速检查它，可以在那里进行。但是，它是 Tika 的较旧版本，并且已有一年多的历史。如果结果不符合您的预期，我建议您自己尝试使用最新版本。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2014-11-27T16:00:39.743

你可以看看[toxy.codeplex.com](http://toxy.codeplex.com)。Toxy 是一个纯 .NET 文本提取框架。

使用 Toxy 非常简单。例如，要提取一个名为 test.xlsx 的 Excel 电子表格文件。

```
ParserContext context = new ParserContext("test.xlsx");
ISpreadsheetParser parser = ParserFactory.CreateSpreadsheet(context);
ToxySpreadsheet ss = parser.Parse();
//then you can start handle the result - a ToxySpreadsheet object 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-11T14:38:11.637

这是从word文档中提取的链接：

[如何在 C# 中从 MS Office 文档中提取文本](https://stackoverflow.com/questions/1011234/how-to-extract-text-from-ms-office-documents-in-c-sharp)

对于 pdf，我会使用 PDFsharp，它是开源的，并且在他们的网站上有一些很好的例子等：

[http://pdfsharp.com/PDFsharp/](http://pdfsharp.com/PDFsharp/)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-11T17:54:23.110

我会为此推荐 Aspose Total。几年前，我做了一个项目，几乎完全按照您的要求做，并与在不同版本的 Office（更改为 XML 之前）之间使用 Office Interop 的东西进行比较，Aspose 是最强大的库。您可能还必须根据您所谈论的内容进行一些 OCR。 **它并不便宜**，但我发现他们的 API 非常可靠，它适用于您所询问的大多数文件类型版本。您应该可以使用免费试用版来查看它是否适合您的项目。除了我在生产环境中使用他们的工具外，我与 Aspose 没有任何关系。

[假设总计](http://www.aspose.com/categories/.net-components/aspose.total-for-.net/default.aspx)

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-06-11T15:13:17.837

对于从 pdf [itextsharp](http://sourceforge.net/projects/itextsharp/)中提取的文本来说非常棒。它是免费和开源的。

从 pdf 读取文本很容易使用这个库。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-06-11T14:48:03.730

如果您只需要文本，那么您可以使用 iFilter。它不是单一产品，但它是免费的。iFilter 用于提取文本以支持 Microsoft 索引服务。在 iFilter .NET C# 上搜索有关如何使用它的示例。如果您需要格式化文本，则不是正确的工具。它仅提取带有大量换行符的原始文本。

# google-maps - ShowSteps() 只显示一小部分步骤

> ID：10982159
> 
> 赞同：1
> 
> 时间：2012-06-11T14:33:04.947
> 
> 标签：google-maps, google-maps-api-3

我正在一个网站上展示你可以走的几条路线。 [http://yi.graafhuyncollege.nl/rsn.php](http://yi.graafhuyncollege.nl/rsn.php) 当我在开始输入“Wevestraat 10, Geleen”插入一个位置时，然后选择一个或多个航点和一个结束位置。它只显示部分路线，特别是直到第一个航路点。

我不知道是什么导致了这个问题，可能是函数 ShowStep 或 AttachInstruction 有问题。

Javascript部分：

```
var map;
var directionsDisplay;
var directionsService;
var stepDisplay;
var markerArray = [];

function initialize() {
  // Instantiate a directions service.
  directionsService = new google.maps.DirectionsService();

  // Create a map and center it on Manhattan.
  var geleen = new google.maps.LatLng(50.955561,5.831895);
  var myOptions = {
    zoom: 13,
    mapTypeId: google.maps.MapTypeId.HYBRID,
    center: geleen,
  panControl: false,
    zoomControl: true,
    mapTypeControl: true,
    scaleControl: true,
    streetViewControl: false,
    overviewMapControl: true,
  };
  map = new google.maps.Map(document.getElementById("map_canvas"), myOptions);

  // Create a renderer for directions and bind it to the map.
  var rendererOptions = {
    map: map
  }
  directionsDisplay = new google.maps.DirectionsRenderer(rendererOptions)

  // Instantiate an info window to hold step text.
  stepDisplay = new google.maps.InfoWindow();
}

function calcRoute() {

// First, clear out any existing markerArray
  // from previous calculations.
  for (i = 0; i < markerArray.length; i++) {
    markerArray[i].setMap(null);
  }

  // Retrieve the start and end locations and create
  // a DirectionsRequest using WALKING directions.
  var start = document.getElementById("start").value;
  var end = document.getElementById("end").value;
  var waypts = [];
    var checkboxArray = document.getElementById("waypoints");
    for (var i = 0; i < checkboxArray.length; i++) {
      if (checkboxArray.options[i].selected == true) {
        waypts.push({
            location:checkboxArray[i].value,
            stopover:true});
      }
    }

  var request = {
      origin: start,
      destination: end,
    waypoints: waypts,
      travelMode: google.maps.TravelMode.WALKING

  };

  // Route the directions and pass the response to a
  // function to create markers for each step.
  directionsService.route(request, function(response, status) {
    if (status == google.maps.DirectionsStatus.OK) {
      var warnings = document.getElementById("warnings_panel");
      warnings.innerHTML += "" + response.routes[0].warnings + "";
      directionsDisplay.setDirections(response);
      showSteps(response);
    }
  });
}

function showSteps(directionResult) {
  // For each step, place a marker, and add the text to the marker's
  // info window. Also attach the marker to an array so we
  // can keep track of it and remove it when calculating new
  // routes.
  var myRoute = directionResult.routes[0].legs[0];

  for (var i = 0; i < myRoute.steps.length; i++) {
      var marker = new google.maps.Marker({
        position: myRoute.steps[i].start_point,
        map: map
      });
      attachInstructionText(marker, myRoute.steps[i].instructions);
      markerArray[i] = marker;
  }
}

function attachInstructionText(marker, text) {
  google.maps.event.addListener(marker, 'click', function() {
    stepDisplay.setContent(text);
    stepDisplay.open(map, marker);
  });
}
</script>
</head> 
```

在体内：

```
 <body onload="initialize()">
<div style="text-align:left">
  <b><font color="red">Start: </font></b>
    <input id="start" type="textbox" value="Thuis">

  <font color="red"><b>Waypoints:</b></font>
<select multiple id="waypoints">
  <option value="50.96012,5.841106">WP 1</input>
  <option value="50.958758,5.850166">WP 2</input>
  <option value="50.947603,5.856555">WP 3</input>
  <option value="50.952706,5.867075">WP 4</input>
  <option value="50.951729,5.855134">WP 5</input>
  <option value="50.949353,5.850499">WP 6</input>
  <option value="50.95304,5.839818">WP 7</input>
  <option value="50.96291,5.847548">WP 8</input>
</select>
  <b><font color="red">End: </font></b>
<select id="end" onclick="calcRoute();">
  <option value="50.966958,5.842978">Station Geleen Oost</option>
  <option value="50.957204,5.836648">Parkeer plaats Driepoel, Geleen</option>
  <option value="50.953409,5.84662">Pastoor Thissenplein, Sweikhuizen</option>
  <option value="50.936529,5.894342">Alfa brouwerij/ Restaurant, Thull</option>
  <option value="50.972853,5.883254">Ijsboerderij Coumans, Windraak</option>
</select>
  <input type="button" value="start" onclick="calcRoute()">
</div>
<div id="map_canvas" style="top:20px;width:50%;height:70%"></div>
&nbsp;
<div id="warnings_panel" style="width:100%;height:10%;text-align:center"></div> 
```

我一点头绪都没有。

如果有人可以帮助我，我将不胜感激！！！

提前致谢

义

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-11T16:50:40.583

您已将**stopover**设置为 true。在这种情况下，路线（腿）将在航点处分开，但您只迭代第一条腿。

试试看：

```
function showSteps(directionResult) {
    var k       = 0,
        myRoute = directionResult.routes[0];

  for (var j = 0; j < myRoute.legs.length; j++) {//iterate over legs
  for (var i = 0; i < myRoute.legs[j].steps.length; i++) {//iterate over steps
      var marker = new google.maps.Marker({
        position: myRoute.legs[j].steps[i].start_point,
        map: map
      });
      attachInstructionText(marker,  myRoute.legs[j].steps[i].instructions);
      markerArray[k++] = marker;
  }}
 } 
```

# dojo - Dojo - 如何在没有继承的情况下覆盖所有实例的方法？

> ID：10982161
> 
> 赞同：0
> 
> 时间：2012-06-11T14:33:05.687
> 
> 标签：dojo, dijit.form

我正在尝试扩展现有的 dijit.form.Button 以接受“主题”属性并在单击时发布该命令/主题。我提出的解决方案需要引用以前的 Button.prototype_onClick 方法。有没有更好的编码方法，所以下面的使用示例仍然有效？

```
define(["dojo/_base/lang", "dijit/form/Button"], function(lang, Button) {
    var oldClick = Button.prototype._onClick;
    lang.extend(Button, {
        topic: null,
        _onClick: function(e) {
            alert('test');
            if (this.topic) {
                connect.publish(this.topic);
            }
            return oldClick.apply(this, arguments);
        }
    });
}); 
```

用法：

```
<button dojo-data-type="dijit.form.Button" data-dojo-props="topic: 'test'">Test</button>

require(["dojo/_base/connect"], function(connect) {
    connect.subscribe("test", function() {
        alert("you just clicked the test button");
    });
});​​ 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-11T15:25:24.717

考虑[面向方面的编程](http://en.wikipedia.org/wiki/Aspect-oriented_programming)，即[`dojo/aspect`](http://livedocs.dojotoolkit.org/dojo/aspect)：

```
require([
    "dojo/aspect",
    "dojo/topic",
    "dijit/form/Button"
], function(
    aspect,
    topic,
    Button
) {

    aspect.after(Button.prototype, "_onClick", function(e) {
        this.topic && topic.publish(this.topic);
    });

    topic.subscribe("test", function() {
        console.log("test topic");         
    });

});​ 
```

在行动中看到它：http: [//jsfiddle.net/phusick/2rjfJ/](http://jsfiddle.net/phusick/2rjfJ/)

# drupal - Drupal：“所有语言”作为多语言站点中的默认别名语言

> ID：10982163
> 
> 赞同：4
> 
> 时间：2012-06-11T14:33:10.377
> 
> 标签：drupal, drupal-7, multilingual

在 Drupal 7 多语言站点中，当创建节点并将语言设置为*"Language Neutral"*以外的其他内容时，当站点语言与节点语言不同时，其别名不起作用（错误 404）。

您可以避免从别名编辑页面 ( *admin/config/search/path ) 将别名语言更改为**“所有语言”*的问题。

 *这很烦人，因为您必须为每个具有语言支持的新节点执行此操作。此外，当*批量更新*更改某些别名时，此设置会丢失。

**有没有办法为每个创建的新别名设置“所有语言”？**
**有没有办法为所有已经创建的别名设置“所有语言”？**

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-08T09:20:07.717

您应该将此代码添加到您的 template.php

```
function youtheme_node_presave($node) {
         if ($node->type == 'nodetype') {
         $node->language = LANGUAGE_NONE;
        }
} 
```

这基本上会将您的节点保存为中性语言；）更改节点类型或根据需要添加更多。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-04-04T12:41:13.173

以上确实对我有用（来自：[http](http://bengoodyear.com/blog/drupal-7-cracking-the-multilingual-front-page-nut) ://bengoodyear.com/blog/drupal-7-cracking-the-multilingual-front-page-nut ）但确实如此。

确保您打开了模块变量和变量翻译。转到 admin/config/regional/i18n/variable 从列表中选择“默认首页”，保存设置。转到 admin/config/system/site-information，您会注意到其中有一段文字说明了您的一些设置是多语言变量，以及您正在运行的语言的链接列表，这些链接允许您为每种语言设置设置语。*

# c# - 使用 LINQ 查找具有特定属性名称和值的 XElement

> ID：10982167
> 
> 赞同：18
> 
> 时间：2012-06-11T14:33:21.567
> 
> 标签：c#, xml, linq, xelement

```
XDocument xDocument = XDocument.Load("...");
IEnumerable<XElement> elements = xDocument
    .Element("lfm")
    .Element("events")
    .Elements("event");

try
{            
    foreach (XElement elm in elements)
    {
        comm.Parameters.AddWithValue("extID", elm.Element("id").Value  ?? "");
        comm.Parameters.AddWithValue("Title", elm.Element("title").Value ?? "");
        comm.Parameters.AddWithValue("HeadlineArtist", 
        elm.Element("artists").Element("headliner").Value ?? ""); 
```

但是我想要属性为“size=large”的元素“image”的值，我一直在寻找整夜，这是我最接近的：

```
comm.Parameters.AddWithValue("LargeImage",
    elm.Descendants("image")
       .FirstOrDefault(i => (string)i.Attribute("size") == "large").Value); 
```

XML 响应部分示例：

```
<lfm status="ok">
    <events xmlns:geo="http://www.w3.org/2003/01/geo/wgs84_pos#"
            location="Chicago, United States" page="1" perPage="1"
            totalPages="341" total="341" festivalsonly="0" tag="">
        <event xmlns:geo="http://www.w3.org/2003/01/geo/wgs84_pos#">
            <id>3264699</id>
            <title>Iron And Wine</title>
            <artists>
                <artist>Iron And Wine</artist>
                <artist>Dr. John</artist>
                <headliner>Iron And Wine</headliner>
            </artists>
            <venue>
                <id>8915382</id>
                <name>Ravinia Festival</name>
                <location>
                    <city>Highland Park</city>
                    <country>United States</country>
                    <street>200 Ravinia Park Rd</street>
                    <postalcode>60035</postalcode>
                    <geo:point>
                        <geo:lat>42.15831</geo:lat>
                        <geo:long>-87.778409</geo:long>
                    </geo:point>
                </location>
                <url>http://www.last.fm/venue/8915382+Ravinia+Festival</url>
                <website>http://www.ravinia.org/</website>
                <phonenumber>847.266.5100</phonenumber>
                <image size="small">http://userserve-ak.last.fm/serve/34/63026487.jpg</image>
                <image size="medium">http://userserve-ak.last.fm/serve/64/63026487.jpg</image>
                <image size="large">http://userserve-ak.last.fm/serve/126/63026487.jpg</image>
                <image size="extralarge">http://userserve-ak.last.fm/serve/252/63026487.jpg</image> 
```

* * *

## 回答 #1

> 赞同：36
> 
> 时间：2012-06-11T14:39:07.907

尝试

```
XElement result = elm.Descendants("image")
   .FirstOrDefault(el => el.Attribute("size") != null &&
                         el.Attribute("size").Value == "large");
if (result != null) {
    process result.Value ...
} 
```

从 C#6.0 (VS 2015) 开始，您可以编写：

```
XElement result = elm.Descendants("image")
   .FirstOrDefault(el => el.Attribute("size")?.Value == "large");
if (result != null) {
    process result.Value ...
} 
```

一个不明显的替代方案（正如@RandRandom 指出的那样）是将 Attribute 转换为`string`：

```
XElement result = elm.Descendants("image")
   .FirstOrDefault(el => (string)el.Attribute("size") == "large");
if (result != null) {
    process result.Value ...
} 
```

这是有效的，因为[XAttribute Explicit Conversion (XAttribute to String)](https://msdn.microsoft.com/en-us/library/bb339184(v=vs.110).aspx)。

* * *

## 回答 #2

> 赞同：17
> 
> 时间：2012-06-11T15:47:49.073

您可以使用[XPathSelectElement 扩展方法](http://msdn.microsoft.com/en-us/library/bb156083)

```
var node = elm.XPathSelectElement("descendant::image[@size='large']");
if (node!=null)
{
    var path = node.Value;
} 
```

# c# - EF - 多个主键链接表

> ID：10982169
> 
> 赞同：-1
> 
> 时间：2012-06-11T14:33:23.587
> 
> 标签：c#, entity-framework-4.1, foreign-key-relationship, multiple-tables

我们需要一个解决以下问题的方法，它是有意义的，并且遵循最佳实践而不会使事情变得复杂。

我们有 3 个需要链接的表，即**Sector**、**Location**和**Company**。

即：**公司**“Bobs B&B”位于“纽约”**位置**的“住宿”**部门。**对于酒店集团，我们可以在多个地点的多个部门拥有一家公司。

 **所以我们决定简单地创建一个“ **CompanySectorLocation** ”表，它有 3 个主键链接 3 个表：

```
CompanySectorLocation
    CompanyID (PK FK)
    SectorID (PK FK)
    LocationID (PK FK) 
```

这里的弧形球是不需要位置的。

即：“Protea Hotels”在“Accomodation”部门处于活动状态，将位置保留为*NULL*。

我的开发人员非常反对拥有一个允许***NULL FK***的表。他的建议是创建另一个名为**CompanySector**的表，该表将处理**Company**和未定义**Location的****Sector**之间的链接。

 **```
CompanySector
    CompanyID (PK FK)
    SectorID (PK FK) 
```

我的问题是我们必须维护 2 个表，其中包含有效的重复数据。

做这个的最好方式是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-11T16:53:01.623

我会创建一个单独的表。我不反对 NULL FK（很多人都这样做），但是拥有一张表意味着无论如何你都会有重复的数据。例如，如果 Bob's B&B 在加利福尼亚开设了一家分店，您将在表中指定“Bob's B&B”和“Accommodation”之间的关系的重复条目。拥有一个表还意味着您必须`DISTINCT`在此表的任何联接中仅包含 CompanyID 和 SectorID 列（如果 LocationID 可以为空，这似乎很可能）。

实际上，您将有两个多对多关系：

```
(Company) <-> (Sector) 
```

和

```
(Company/Sector) <-> (Location) 
```

使用两个链接表来模拟两种不同的关系是有意义的。如果您需要一个表中的所有 3 个条目（为方便起见），您始终可以创建一个索引视图。****

# css - CSS div 标题位置

> ID：10982175
> 
> 赞同：7
> 
> 时间：2012-06-11T14:33:46.053
> 
> 标签：css, html, title

是否可以使 div 标题显示如下：

![在此处输入图像描述](../Images/0e60f72354a8b7a563e5e92be9d6e1a4.png)

我知道我可以将文本“Div Title here”放在 div 中，给它一个坚实的背景并用绝对坐标定位它，但我希望标题与 div 相关联，而不是与整个文档相关联，所以我可以移动 div 而不必担心移动标题。

我在这里设置了一个小提琴：http: [//jsfiddle.net/Eth6U/](http://jsfiddle.net/Eth6U/)。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-06-11T14:36:45.680

您可以使用`<fieldset>`标签来执行此操作...

这是一个例子......

```
<fieldset>
    <legend>Div title here...</legend>
</fieldset> 
```

`<fieldset>`您可以像`<div>`在 CSS 中一样编辑标签...

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-06-11T14:36:13.207

您可以使用`fieldset`和`legend`标签。

例如：

```
<fieldset>
    <legend>The title</legend>
    <p>hello!</p>
</fieldset> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-11T14:38:21.300

听起来您正在寻找[`fieldset`](https://developer.mozilla.org/en/HTML/Element/fieldset)and [`legend`](https://developer.mozilla.org/en/HTML/Element/legend)。

```
<fieldset>  
  <legend>Title</legend>  
  ...
</fieldset> 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-11T14:45:30.593

这[在 SitePoint.com 上](http://www.sitepoint.com/forums/showthread.php?609458-CSS-needed-to-put-text-in-a-border)进行了讨论，似乎最好的方法是在 div 中嵌套一个 div 并使用负边距来正确定位它，我相信你不想这样做。

您正在尝试做的与表单的字段集图例非常相似，您可以使用该 html 并使用 CSS 对其进行样式设置以自定义其外观。[例子](http://www.pixy.cz/blogg/clanky/css-fieldsetandlabels.html)

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-06-11T15:11:21.913

```
<fieldset>
<legend>Div Title Here</legend>
<!-- Write your code here what do you want in that fieldset-->
</fieldset> 
```

# javascript - 如何使用 rails3-jquery-autocomplete 更新复选框/单选按钮

> ID：10982181
> 
> 赞同：1
> 
> 时间：2012-06-11T14:34:26.027
> 
> 标签：javascript, ruby-on-rails, ruby-on-rails-3, autocomplete

我正在使用 rails3-jquery-autocomplete gem 从数据库中获取自动完成项目以及一些我需要预先填写表格的额外数据。

`autocomplete :link, :name, :extra_data => [:url, :is_full_screen, :is_auto_trigger, :is_ad, :is_ecommerce]`

除 url 之外的所有内容都是布尔标志（用户首选项），用于选中/取消选中复选框并选择表单中的单选按钮。即使 gem 更新了文本字段，但它不会自动更新复选框和单选按钮。我已经在表单视图中指定了 :update_elements ：

`<%= f.autocomplete_field :name, autocomplete_link_path, :update_elements => {:url => '#link_url', :is_auto_trigger => '#link_is_auto_trigger'}`

我该怎么做呢？我尝试探索在选择选项时触发的 railsAutocomplete.select javascript 事件，以执行自定义 js 以选择复选框和单选按钮，但是如何在该事件侦听器中获取数据（来自 sql 查询）？他们是一种更简单的方法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-23T14:14:09.960

我通过执行自定义 javascript 以在选择自动完成选项之一时更新复选框/收音机来解决此问题。`railsAutocomplete.select`当从自动完成下拉列表中选择一个值时，会在输入字段上触发一个名为的 javascript 事件。data.item 包含您从数据库中获取的所有数据（包括额外数据）：

```
 $('#link_name').bind('railsAutocomplete.select', function(event, data){
      // Custom JS to select radio/checkbox, or do any other complex task
      select_linktype(data.item.linktype);
      select_tracking(data.item.is_ad);
    }); 
```

# ant - 仅在文件更改时如何执行 Ant 任务？

> ID：10982182
> 
> 赞同：1
> 
> 时间：2012-06-11T14:34:27.230
> 
> 标签：ant

我一直在尝试使用以下代码来使任务仅在文件更改但似乎不起作用时才起作用。无论是否有变化，都会调用该任务。

```
<target name ="widget-change" depends="configuration-for-widgets">
    <fileset dir="${src-location}">         
        <include name="com.myApp.MainClasses.myClassOne.java"/>
        <include name="com.myApp.MainClasses.myClassTwo.java"/>
        <modified update="true"/>
    </fileset>          
    <antcall target="gwt-compile"/>         
</target> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-11T16:13:14.373

你使用的是低于 1.8.0 的 ant 版本吗？

在[让 Ant 选择器正常工作](https://stackoverflow.com/q/3796124/127035)中，提问者通过使用`depend`选择器而不是修改来解决。

在[Ant 错误 32958](https://issues.apache.org/bugzilla/show_bug.cgi?id=32597)中，建议的解决方法是使用嵌套更新`param`：

> 您可以通过使用嵌套
> 
> ```
>  <param name="update" value="false"/> 
> ```
> 
> 而不是更新属性。

# click - 创建Skype之类的点击调用IE插件

> ID：10982183
> 
> 赞同：1
> 
> 时间：2012-06-11T14:34:29.533
> 
> 标签：click, call

插件必须搜索网页中存在的电话号码并将其突出显示。在单击突出显示的电话号码时，必须触发 voip 呼叫（）。我有 VOIP 客户端。如何在 IE、Firefox、Outlook Mail 中取消此功能。任何更新，或任何我能得到的示例代码。我是 Java 技术的新手，比如 java 脚本。我对扩展、插件或插件感到困惑......

# javascript - Javascript分别循环多个div的背景颜色

> ID：10982184
> 
> 赞同：2
> 
> 时间：2012-06-11T14:34:30.637
> 
> 标签：javascript, css, colors

我有一个由 6 个框组成的网页，即 div，它们通过红绿灯颜色代表不同系统的当前状态 - 红色、琥珀色或绿色。

我希望能够为每个 div 单独循环通过这些颜色，以便每个系统可以具有不同的状态。

盒子的伪代码

```
<div id="system1">System Name</div>
<div id="system2">System Name</div>
<div id="system3">Systen Name</div> 
```

等等。

背景颜色在所有系统的页面加载时由 CSS 声明为红色，然后我希望能够单独单击每个 div 以循环到琥珀色然后绿色然后回到红色以选择最合适的。

我正在努力使用 Javascript 来使其正常工作。我试图使用

```
document.getElementById(elem).style.backgroundColor = 'red'; 
```

在 If 语句中查看当前的颜色并相应更改，但 Javascript 返回 rgb 值。例如，当我尝试时，

```
document.getElementById(elem).style.backgroundColor == 'rgb(255,231,51)') 
```

即使它应该匹配它也不匹配。

任何建议都非常感谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-11T14:58:52.740

我建议你使用类，

```
<style type="text/css">
    .red {background-color:red;}
    .amber {background-color:yellow;}
    .green {background-color:green;}
</style>

<script type="text/javascript">

function changeColor(e) {
    var c = e.className;
    e.className = (c == 'red') ? 'amber' : 
                  (c == 'amber') ? 'green' : 
                  (c == 'green') ? 'red' : ''; 
}

</script>
<div class="red" id="system1" onclick="changeColor(this)">System Name</div>
<div class="green" id="system2" onclick="changeColor(this)">System Name</div>
<div class="amber" id="system3" onclick="changeColor(this)">Systen Name</div>

​ 
```

[演示](http://jsfiddle.net/N39Tn/1)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-11T14:44:32.967

当您为它们提供“红色”等颜色时，浏览器会以不同的方式翻译颜色的外观。我也认为你的方法是错误的。我会使用维护所有信息的类。

```
ACommonSystem = function(linkto) 
    {
    this.domobject = linkto;
    // 0 = off, 1 = on, 2 = crashed, 3 = destroyed
    this.state = 0;
    this.errors = null;
    }
ACommonSystem.prototype.turnOn = function()
    {
    if(this.state < 2)
        {
        this.state = 1;
        this.domobject.style.backgroundColor = "green";
        }
    }
ACommonSystem.prototype.turnOff = function()
    {
    this.state = 0;
    this.domobject.style.backgroundColor = "blue";
    }
ACommonSystem.prototype.crash = function()
    {
    this.state = 2;
    this.domobject.style.backgroundColor = "red";
    this.errors = "I've been kicked";
    }
ACommonSystem.prototype.die = function()
    {
    this.state = 3;
    this.domobject.style.backgroundColor = "black";
    this.errors = "i've burned out";
    }

mysystem1 = ACommonSystem(document.getElementById('system1'));
mysystem1.turnOn();
window.setTimeout(3000,function(){mysystem1.crash();}) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-11T14:55:39.873

目前您还没有提到 Jquery 作为标签，但为了您的参考，我已经这样做了。

如果你愿意去 Jquery，你可以这样做：-

**[现场演示](http://jsfiddle.net/SivaCharan/BD7me/)**

## HTML：

```
<div class="system">System Name</div>
<div class="system">System Name</div>
<div class="system">Systen Name</div> 
```

## 查询：

```
$('.system').click(function() {
    switch ($('div.system').index(this))
    {
        case 0: 
                $(this).css('background-color', 'red');
                break;
        case 1: 
                $(this).css('background-color', 'green');
                break;
        case 2: 
                $(this).css('background-color', 'blue');
                break;
    }
});​ 
```

# hibernate - 当另一个托管实体使用 CascadeType.PERSIST 持有对它的引用时，实体的删除未触发

> ID：10982193
> 
> 赞同：0
> 
> 时间：2012-06-11T14:34:52.347
> 
> 标签：hibernate, jpa, cascade, many-to-one

我的领域模型：支付和账户之间的单向多对一映射。

```
@Inheritance(strategy = InheritanceType.JOINED) 
@DiscriminatorColumn(name = "ACCOUNT_TYPE")
public abstract class Account { … }

@Entity
@DiscriminatorValue(Account.Constants.BANK_ACCOUNT)
public class BankAccount extends Account { … }

@Entity
public class Payment {
  @ManyToOne
  private Account receiver;
  ...
} 
```

我的测试用例（扩展 AbstractJUnit4SpringContextTests）：

```
@Test(expected=DataIntegrityViolationException.class)
public void deleteAccountReferencedByPayment() {
  createPayment();
  getTransactionTemplate().execute(new TransactionCallback<Object>() {
    @Override
    public Object doInTransaction(TransactionStatus status) {
      Account receiver = accountRepository.findAllByEmail(email1).get(0);
      accountRepository.remove(receiver);
      return null;
    }
  });
} 
```

这会导致 DataIntegrityViolationException，因为在启动事务提交后执行的 SQL 是：

*   从 ID=? 的 BankAccount 中删除
*   从 ID=? 的帐户中删除 和版本=？

现在我有一个奇怪的“特征”，当我

*   更改域以在 ManyToOne 映射上添加级联（尤其是 ALL 或 PERSIST）
*   并更改测试以在删除帐户时读取同一交易中创建的付款

进一步来说：

```
@Entity
public class Payment  {
  @ManyToOne(cascade = {CascadeType.PERSIST})
  private Account receiver;
  ...
}

@Test(expected=DataIntegrityViolationException.class)
public void deleteAccountReferencedByPaymentStrangeBehaviour() {
  final Long paymentId = createPayment();
  getTransactionTemplate().execute(new TransactionCallback<Object>() {
    @Override
    public Object doInTransaction(TransactionStatus status) {
      paymentRepository.find(paymentId);
      Account receiver = accountRepository.findAllByEmail(email1).get(0);
      accountRepository.remove(receiver);
      return null;
    }
  });
} 
```

这不会导致 DataIntegrityViolationException，因为在启动事务提交后没有执行任何 SQL。

任何想法是什么导致了这种行为？PERSIST 与查找付款或删除帐户有什么关系？这可能是 JPA 标准实施中的错误吗？顺便说一句，我将 JPA2 与 Hibernate 4.1.3.Final 一起使用。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-11T17:51:12.330

通过读入 Payment 对象，它成为托管对象。当您删除 Account 并调用 commit 时，JPA 提供程序会找到从托管 Payment 引用的完全相同的 Account 对象，并且由于关系标记为 cascade persist，因此必须保留 Account。因此，最终效果是它取消了您的删除尝试。

JPA 需要维护关系，以便您的对象模型反映您希望数据库的外观。在这种情况下，您必须先从付款中删除帐户参考，然后才能将其删除，或者在同一交易中删除付款。

# ide - 如何使用 Qt creator 创建 .pri 文件

> ID：10982194
> 
> 赞同：8
> 
> 时间：2012-06-11T14:34:55.187
> 
> 标签：ide, qt-creator

我正在尝试学习 qmake，但找不到使用 qt creator 创建 .pri 文件的本地方法

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-12T05:54:22.223

您可以使用 Qt Creator 创建一个新的**.pri**文件，如下所示：

1.  在菜单栏中选择**文件。**
2.  选择**新建文件或项目**...。
3.  在**新建**对话框的**文件和类**下选择**常规。**
*****   给出带有扩展名的文件名，例如：**test.pri**。****

 ****（我使用的是 Qt Creator 2.4.1。）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2020-05-19T17:01:34.360

MacOS 上 Qt Creator 4.12.0 的操作顺序

[![新文件或项目](../Images/49f2b366df436939a5daffbb2590ac6a.png)](https://i.stack.imgur.com/Uzi4u.png) [![选择空文件](../Images/b14ff8429ce4ceda245e2f090afe0521.png)](https://i.stack.imgur.com/xJSD9.png) [![写入文件名和路径](../Images/495a9d6115f5d5640dc71c6ce3a5ac43.png)](https://i.stack.imgur.com/sMzE8.png)****

# c# - 使用 Visual Studio Server Explorer 连接到远程 SQL Server 2012

> ID：10982197
> 
> 赞同：2
> 
> 时间：2012-06-11T14:34:59.587
> 
> 标签：c#, sql-server, connection, remote-access

我正在尝试找到一个很好的指南来了解如何连接到远程 SQL 服务器（它是 2012 epxress）。在对互联网进行了一些调查之后，我找不到一个像样的指南来帮助我完成这个过程。

我的设置是这样的

在服务器上

*   视窗服务器 2008
*   视窗 SQL 服务器 2012
*   视觉工作室 2012
*   团队基础服务器 2012

在客户端

*   客户端上的 Visual Studio 2010
*   客户端上的 Windows SQL Server 2012

所以我的问题是，有没有人有一个像样的指南让我遵循如何连接到位于我的 Windows 2008 服务器上的远程服务器

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-11T14:49:24.007

您可以尝试此链接用于[SQL Server 2008，但它应该适用于 2012](http://blogs.msdn.com/b/walzenbach/archive/2010/04/14/how-to-enable-remote-connections-in-sql-server-2008.aspx)。

此外，这里有一个[问答](http://social.msdn.microsoft.com/Forums/en-US/sqlsetupandupgrade/thread/ab1de11b-502b-4a28-a084-836a2ddf4463)，可能会为您提供所需的一切：

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-11T14:45:12.063

在这里您可以找到一些方法来做到这一点：[创建与 SQL Server 的连接](http://msdn.microsoft.com/en-us/library/s4yys16a%28v=vs.71%29.aspx)

# opencart - 购物车中的paypal错误

> ID：10982199
> 
> 赞同：0
> 
> 时间：2012-06-11T14:35:12.450
> 
> 标签：opencart

我正在使用 OC1.5.1，并且正在尝试集成 PayPal。

问题是我在结帐时遇到错误：

`Fatal error: Call to a member function encrypt() on a non-object in /var/www/example.com/httpdocs/catalog/controller/payment/pp_standard.php on line 94`

有什么办法过去吗？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-11T14:48:05.393

这听起来像你没有去`/system/library/encryption.php`上传文件。仔细检查文件是否为空

编辑：或线

```
$registry->set('encryption', new Encryption($config->get('config_encryption'))); 
```

可能会丢失。检查它是否在`index.php`文件中设置

# spring - 在 Session Spring MVC 中维护单例

> ID：10982203
> 
> 赞同：0
> 
> 时间：2012-06-11T14:35:29.477
> 
> 标签：spring, session, spring-mvc, singleton, session-variables

我有 2 个会话范围的 bean

1)sessionholder1 2)sessionholder2

两个会话持有者中都有对象 UserVO

```
class SessionHolder1{
private UserVO user = new UserVO();
}

class SessionHolder2{
private UserVO user = new UserVO();
} 
```

现在，如果我在 sessionholder1 中更改 userVO 的某些变量，它也会在 sessionholder2 中更改。这种行为是正常的还是由于设计不当？

除了使用 clone() 之外，还有什么解决方法吗？请帮忙。提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-11T15:07:32.153

如果您在两者中存储相同的 UserVO 对象，那么更改其中的某些字段当然会更改另一个中的字段。如果您想要两个不同的对象，请创建两个不同的对象。如果一个是另一个的副本，最好的方法是使用复制构造函数：

```
/**
 * Constructs a copy of the given userVO
 */
public UserVO(UserVO userVO) {
    ...
} 
```

# ruby-on-rails - 如何为 Paperclip + ImageMagick 更改 Rails 应用程序

> ID：10982206
> 
> 赞同：0
> 
> 时间：2012-06-11T14:35:45.170
> 
> 标签：ruby-on-rails, paperclip, image-resizing

我想在 Rails 应用程序中动态调整图像的大小。每个人都建议使用**Paperclip** gem。

问题是：我已经有带有图片的专栏：

```
add_column :users, :picture, :binary, :null => true 
```

并且该应用程序已经具有上传此图像的代码。PostgreSQL 数据库已经有一个“bytea”类型的列。

**我可以不改变数据库结构**而只对控制器的方法做一些改变吗？：

```
def current_user_image
  if current_user.picture
    send_data current_user.picture #Do something here using Paperclip
  else
    send_file File.join(Rails.root, 'public', 'images', 'no_user_pic.png')
  end
end 
```

**相关话题：**

*   [在 ruby​​ on rails 中调整图像大小](https://stackoverflow.com/questions/8520062/image-resize-in-ruby-on-rails)

# python - 当 UPDATE 没有受影响的行时，SQLAlchemy ResultProxy.rowcount 不为零

> ID：10982207
> 
> 赞同：2
> 
> 时间：2012-06-11T14:35:46.933
> 
> 标签：python, mysql, sqlalchemy

我们有一个 MySQL 数据库，我们正在从 DB API 切换到 SQLAlchemy。从文档中， ResultProxy.rowcount 应该通过 UPDATE 语句报告受影响的行数。

如果我用 SQLAlchemy 执行这个查询：

```
UPDATE table
SET field =
IF(field < 10, 10, field) WHERE id = 1 
```

如果有匹配的行，它将返回 1 的行数，但对于“字段”的任何值（即使大于或等于 10）。当我使用 DB API 执行此查询时，它返回了正确数量的受影响行（当字段大于或等于 10 时为 0，如果低于则为 1）。

这给我们带来了一些麻烦，因为我们必须首先执行一个选择查询来确定是否有更改。它是 SQLAlchemy 中的错误吗？该文档明确指出，如果应该返回受影响的行数，而不是匹配的行数。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-12T07:31:07.767

没有使用 MySQL 的经验，但文档[`ROW_COUNT()`](http://dev.mysql.com/doc/refman/5.0/en/information-functions.html#function_row-count)显示：

> 对于`UPDATE`语句，affected-rows 默认值是实际更改的行数。如果 在连接到时 指定`CLIENT_FOUND_ROWS`标志 to ，则受影响的行值是“找到”的行数；也就是说，由 WHERE 子句匹配。`mysql_real_connect()``mysqld`

因此，根据连接的配置方式，结果可能是以下两种之一：

*   “找到”的行数（与`WHERE`子句匹配的行）
*   实际“更新”的行数（其中至少一列中的值已更改）

关于与 sqlalchemy 的关系，我不确定这是一个错误还是只是需要用更好的措辞更新文档。在任何情况下，您都可以通过用另一个语义相同
的语句重写语句来解决问题：`SQL`

```
UPDATE  table
SET     field = 10
WHERE   id = 1
    AND field < 10 
```

# php - php codeigniter 活动记录类

> ID：10982209
> 
> 赞同：0
> 
> 时间：2012-06-11T14:35:51.503
> 
> 标签：php, codeigniter

我一直在使用 codeigniter 活动记录类进行数据库访问，但我要保证的一件事是数据库安全性。我的场景是：我正在使用此查询来访问数据库中的数据。

```
$q = $this->db->query("SELECT* FROM mytable WHERE id = '$p'"); 
```

在此之后，我使用 return 语句。

```
return $q->result(); 
```

当我将数据库加载到我的视图时，我使用 json 编码函数对数组进行编码，而 json 编码函数不仅显示数据库表字段的值，还显示表字段名称。是否安全，如果不安全，我如何避免显示表字段名称谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-11T14:59:11.137

您可以通过将 return 语句更改为：

```
return array_values($q->result_array()); 
```

更好的方法是解析结果：

```
$q = $this->db->query("SELECT* FROM mytable WHERE id = '$p'");
$result = $q->result();

$values[] = $result['id'];
$values[] = $result['column1'];
$values[] = $result['column2'];

return $values; 
```

或者在架构发生变化时在 SQL 语句中指定您需要的列：

```
SELECT id, column1, column2 FROM mytable WHERE id = '$p' 
```

最后，正如 allen213 提到的，您应该使用绑定来防止注入攻击：

```
$sql = 'SELECT * FROM mytable WHERE id = ?';
$q = $this->db->query($sql, array('id' => $p)); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-11T14:44:48.180

做这个

```
$q = $this->db->query("SELECT * FROM mytable WHERE id = ?",array('id'=>$p)); 
```

而是开始

如果您担心暴露您的字段名称，请在返回结果之前解析结果并映射到其他内容（下面的示例实际上更适合多行）。

```
$ret = array();

foreach($q->result_array() as $row)
{
  $remapped = array();

  $remapped['obscure_name'] = $row['real_name'];
  $ret[]=$remapped;
}

return $ret; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-11T14:41:17.143

我不确定 CI AR 类是如何在幕后工作的，但我可以告诉你，你在这里所拥有的东西似乎非常不安全，因为你将值直接传递到查询中，而不是使用准备好的语句。基本上，如果请求者可以以某种方式操纵该变量的值，那么您就可以进行 SQL 注入攻击（顺便说一句，这是一件非常糟糕的事情）。如果我是你，这就是我会担心的安全问题。

# windows - 为什么我的 DataAdapter->Update 不能在新表单上工作？

> ID：10982213
> 
> 赞同：0
> 
> 时间：2012-06-11T14:36:00.367
> 
> 标签：windows, visual-c++, c++-cli

我有一个主表格。有一个链接标签。如果我单击它，将打开一个新表单，上面有一个数据网格和一个按钮。数据网格将填充新表单 Load 事件的数据。我以这种方式绑定数据源：

```
void BindDataSource( BindingSource^ BS, SqlDataAdapter^ DA, DataGridView^ DG, String^ SQLCommand )
{
DG->DataSource = BS;

//InsertDataToDataGrid( "select * from myTable", dataGridView10 );  
String^ connectionString = "database=myDataBase;server=myServer;UID=UserID;PWD=Password;";

// Create a new data adapter based on the specified query.
DA = gcnew SqlDataAdapter( SQLCommand, connectionString);

gcnew SqlCommandBuilder( DA );

DataTable^ table = gcnew DataTable();
DA->Fill( table );
BS->DataSource = table;

}//BindDataSource 
```

如果我单击按钮，它应该保存更改。

我这样保存：
`dAPcExceptions->Update( ( DataTable^ )bSPCExceptions->DataSource );`

我在主窗体上使用此方法，它工作正常。但是，如果我单击按钮，则会出现错误：
`update requires a valid updatecommand when passed datarow collection with modified rows`

有人可以告诉我我做错了什么吗？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-12T06:42:04.473

我想您正在创建一个 SqlDataAdapter 并重新使用它以供将来使用。因此，您必须使用轨道引用将 SqlDataAdapter 参数作为输入/输出。

```
void BindDataSource( BindingSource^ BS, SqlDataAdapter^% DA, DataGridView^ DG, String^ SQLCommand ) 
{
...
// Create a new data adapter based on the specified query.
DA = gcnew SqlDataAdapter( SQLCommand, connectionString);
...
}//BindDataSource 
```

# iphone - iPhone - 应用程序在暂停时退出

> ID：10982216
> 
> 赞同：1
> 
> 时间：2012-06-11T14:36:10.647
> 
> 标签：iphone, objective-c, ios, uiapplication

我有一个 iPhone 应用程序，我希望用户可以选择打开/关闭设置，具体取决于他们是否希望应用程序在挂起（或进入后台）时退出。

据我了解，info.plist 文件中有一个名为“UIApplicationExitsOnSuspend”之类的选项可以打开以允许此功能，我也了解 info.plist 文件不应该（不能？）被修改在运行时。

虽然不是一个非常重要的功能，但如果可能的话，我想找到一种方法来实现某些东西，任何人都可以对此有所了解吗？

杰克

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-11T14:46:58.940

你不应该那样做。

首先`UIApplicationExitsOnSuspend`是应用程序 info.plist 中的设置，它是只读的，因此无法更改。

也不需要退出您的应用程序，只需将其推到后台即可。如果系统需要更多内存，它会杀死你释放它正在使用的内存。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-11T14:47:28.740

您在运行时处于 plist 的只读状态。

你可以尝试类似的东西

```
-(void)applicationDidEnterBackground:(UIApplication *)application {
      if (...) {
            exit(0);
      }
} 
```

但苹果对不符合其应用提交指南和 10.1 的应用不满意（= 拒绝应用）：

`10.1: Apps must comply with all terms and conditions explained in the Apple iPhone Human Interface Guidelines and the Apple iPad Human Interface Guidelines`

# c# - 使用 KeyUp 捕获功能键时保持对 ListView 的关注

> ID：10982219
> 
> 赞同：0
> 
> 时间：2012-06-11T14:36:20.717
> 
> 标签：c#, wpf, listview, focus

我有一个显示搜索结果列表的 ListView。为了使事情更容易，我想将 F8 绑定到搜索按钮，以便用户可以按键盘上的 F8 并执行搜索。

我正在做这样的事情：

```
private void UserControl_KeyUp(object sender, KeyEventArgs e)
{
    if (e.Key == Key.F8)
    {
        btnSearch.RaiseEvent(new RoutedEventArgs(Button.ClickEvent));
        lvResults.SelectedIndex = 0;
        lvResults.Focus();
    }
} 
```

btnSearch 实际上设置索引和焦点本身。如果用户点击按钮（或它的标签并点击空格），则设置焦点。如果我删除 selectedindex 并在此处聚焦，我会得到相同的行为（因此此代码实际上是再次执行此操作，并且不需要）。

使用此代码，如果我按 F8，则选择第一行，但焦点仍然在我按 F8 时所在的文本框上。这是不可取的，因为用户希望能够点击向上/向下箭头来选择他们想要的结果。

**注意：**如果我将焦点设置到另一个控件（不是列表视图），它工作正常。此外，如果我尝试将所选项目转换为 ListViewItem，则会收到错误消息，因为在这种情况下它是 DataRowView。我还尝试删除 btnSearch 中的代码并直接调用它，结果也相同。

因此，它正确选择了行，但列表视图没有获得焦点，而如果我单击按钮，它会获得焦点。而且，如果我将另一个控件设置为具有焦点，那就可以了，而不是这个列表视图。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-11T15:43:08.633

这是一个测试项目的压缩包，您的代码在其中运行良好；这只是一个垃圾测试项目，当我试图帮助解决 SO 问题时，我会在其中进行测试，因此请忽略项目中的其他内容。 [http://sdrv.ms/LuNKQt](http://sdrv.ms/LuNKQt)

另外，我建议阅读： http: [//julmar.com/blog/mark/](http://julmar.com/blog/mark/?p=52) ?p=52 ，它有很多关于 WPF 焦点的好信息。

最后，您可以使用 Snoop (http://snoopwpf.codeplex.com/releases/view/73187) 尝试监控程序并尝试查看到底发生了什么。

# mongodb - Mongo中的聚合查询

> ID：10982221
> 
> 赞同：3
> 
> 时间：2012-06-11T14:36:23.827
> 
> 标签：mongodb

有什么方法可以告诉 mongo 返回文件直到达到一定长度。例如，我收集了音频文件并在集合中作为

```
audio : {
        name: string;
        length: long;
        releaseDate: long
} 
```

我可以查询返回列表中的所有音频，这样它按发布日期和
200>= sum(length) >= 100 [列表中音频文件长度的总和] 排序

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-11T18:00:06.820

在 Mongo 中执行此操作的最简单方法是让您的客户端程序手动遍历游标，并在条件完成时停止。这是使用 mongo shell 的示例：

```
cursor = db.audio.find().sort( { releaseDate: -1 } )

var len = 0
while ( (len < 100) && cursor.hasNext() ) {
    record = cursor.next()
    len += record.length
    printjson(record)
} 
```

我希望这有帮助！

# algorithm - 使用帕累托原理 (80/20)，如果给定 0-100 之间的输入，如何计算真实百分比

> ID：10982224
> 
> 赞同：4
> 
> 时间：2012-06-11T14:36:29.167
> 
> 标签：algorithm, math, computer-science

松散地基于 Pareto/80-20 原则，如果我认为我完成了 70%，根据 Pareto，我到底“完成”了多少？在这个例子中，我期望得到大约 15% 的答案。

我希望能够有一个文本输入或一个滑块，我可以将输入设为 0-100%，那么如何在 Pareto 之后获取输入并对其进行转换？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-11T14:51:48.110

请参阅[http://en.wikipedia.org/wiki/Pareto_distribution](http://en.wikipedia.org/wiki/Pareto_distribution)了解您正在寻找的发行版。

请注意，软件开发时间估计看起来不像这样。当被问及估计时，人们和组织往往会一直高估一个相对恒定的因素。（在 2 左右并不罕见。）有关更多信息，请参阅*软件估算：揭开黑色艺术*的神秘面纱。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-11T15:05:30.210

这是一个愚蠢的想法，但想想很有趣。

给定介于 0 和 1 之间的 'done' x 值，'Pareto-done' y 的公式为

> y = 20% ^ ( log (x) / log(80%) )

因此，在您的示例中，x=70% done 给出了 y=7.6% Pareto-done。

# ruby-on-rails - Ruby on Rails：我所有的 ActiveRecord 回调方法都应该是私有的吗？

> ID：10982227
> 
> 赞同：6
> 
> 时间：2012-06-11T14:36:38.027
> 
> 标签：ruby-on-rails, activerecord, rspec

我有一个 ActiveRecord 模型，它有一些我想测试的回调和自定义验证。这意味着，我必须将它们全部公开。这是一个好的做法还是在这种情况下有更好的解决方案？

我要测试的方法示例：

```
 def before_validation
    original.edit(self) if original
  end

  validate :unique?, on: :create

  def unique?
    return true if original.blank?
    errors.add(:base, 'The entry already exists')
    false
   end 
```

换句话说：

1.  如果我想测试“before_validation”方法，是否必须将其公开并直接在我的模型 Rspec 文件中调用 test_object.before_validation？
2.  如果我不仅要测试自定义验证方法 unique?() 在验证时调用，而且还要测试方法本身，我是否也必须将 unique?() 公开？

问题是，这些方法我都没有在我的模型之外使用（所以它们应该是私有的），但是我怎么能在不公开它们的情况下进行测试呢？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-11T15:08:20.173

很容易陷入测试实现中，但这是测试行为的一个很好的候选者。

问问自己，你在验证之前真正在做什么？然后让自己做一个测试，在给定某些输入的情况下，当且仅当您的之前验证有效时，您将获得某些输出。

作为一个简单的示例，假设您有一个具有简单`name`属性的用户模型，并且您有一个简单的 before_validation：

```
name = "Auto-generated name." if name.blank? 
```

然后你可以像这样为它写一个测试：

```
it "gets an auto-generated name if none is specified." do
    user = User.create!
    user.name.should eq "Auto-generated name."
end

it "does not get an auto-generated name if one is specified." do
    user = User.create!(:name => "Test Name")
    user.name.should eq "Test Name"
end 
```

正如你所看到的，这个测试确实测试了验证，但它不需要公开，因为你只是在测试它的行为。你的`unique?`方法也是如此。给它某些输入并测试行为，而不必关心使用了哪种特定方法或任何其他实现细节。

# javascript - jquery - ajax 请求不起作用

> ID：10982230
> 
> 赞同：2
> 
> 时间：2012-06-11T14:36:45.483
> 
> 标签：javascript, jquery, django, jquery-ui, jquery-autocomplete

我正在使用 jQuery 自动完成[http://jqueryui.com/demos/autocomplete/#remote-jsonp](http://jqueryui.com/demos/autocomplete/#remote-jsonp) ajax 请求不起作用（不向指定的 url 发送请求）

这是jQuery代码：

```
$("#add-keywords").autocomplete({
    source: function( request, response ) {
        var q = $("#add-keywords").val();
        $.ajax({
            url: "/keywords_suggestions/",
            dataType: "json",
            data: {
                    query: q
            }
        });
    },
    minLength: 2,
    select: function( event, ui ) {
            log( ui.item ?
                "Selected: " + ui.item.label :
                "Nothing selected, input was " + this.value);
    }
}); 
```

请求的 url 应该是这个`http://127.0.0.1:8000/keywords_suggestions/`，但它正在发送到`http://127.0.0.1:8000/information/?query=web`（在这个页面上实现了 jquery 自动完成功能`http://127.0.0.1:8000/information/`）

**更新-1**

我在浏览器中检查了 /keywords_suggestions/ 页面，它显示**Django 服务器代码没有返回 HttpResponse**。这是问题的根源吗？我不明白，自动完成本身的请求网址不正确。那么这个 Django 服务器代码怎么会导致问题呢？

谁能告诉我我犯的错误？谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-11T15:11:01.527

```
$("#add-keywords").autocomplete({
    source: function( request, response ) {
        var q = $("#add-keywords").val();
        $.ajax({
            url: "/keywords_suggestions/",
            dataType: "json",
            data: {
                    query: q
            },
            success: function(data) {
                // do something here with the returned data
                console.log(data);
            }
        });
    },
    minLength: 2,
    select: function( event, ui ) {
            log( ui.item ?
                "Selected: " + ui.item.label :
                "Nothing selected, input was " + this.value);
    }
}); 
```

如上所述，您需要在传递给 $.ajax 调用的数据对象中定义一个“成功”回调函数，该函数告诉 jQuery 在数据返回后如何处理数据。

~~当然，你可能不得不考虑重构——AJAX 请求默认异步执行，这意味着浏览器在等待服务器从 AJAX 调用返回数据时，会继续执行剩余的 Javascript 代码。在这种情况下，调用“自动完成”函数可能发生在数据从服务器返回之前——这不好！~~

因此，如果我没记错的话，您将不得不将此 JS 重构为：

1.）将“更改”事件绑定到“#add-keywords”......

2.) ...这样当用户开始输入时，就会执行 ajax 调用

~~3.) 然后，在成功返回该数据后，执行自动完成调用，您试图将 ajax 调用填充到现在的状态。~~

我认为这对你有用。让我知道事情的后续。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-11T15:19:07.477

尝试给传出数据一个类型和一些手动操作：

```
$("#add-keywords").autocomplete({
    source: function(request, response) {
        var q = $("#add-keywords").val();
        var pString = '{"query":"' + q + '"}';

        $.ajax({
            url: "/keywords_suggestions/",
            dataType: "json",
            data: pString,
            contentType: "application/json",
            success: function(data) {
                response(data);
            }
        });
    },
    minLength: 2,
    select: function(event, ui) {
        log(ui.item ? "Selected: " + 
        ui.item.label : "Nothing selected, input was " + 
         this.value);
    }
}); 
```

contentType 将告诉服务器会发生什么。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-11T15:16:01.317

似乎这里有两个潜在的问题：

1.  正如您所说，Ajax 请求被发送到 /Information/。我建议您将**url**设置为“http://localhost:8000/keywords_suggestions/”。我不建议以这种方式保留它，而只是看看您是否可以将请求发送到正确的位置。

2.  自动完成插件将“ *term* =theSearchTerm”作为 GET 参数发送，而不是*查询*。您是否对插件代码进行了任何更改以查找*query*？

此外，您的 /keywords_suggestions/ 中会发生什么？

# android - GPS 每 2 分钟跟踪一次（requestLocationUpdates、Timer 或 Handler）

> ID：10982235
> 
> 赞同：0
> 
> 时间：2012-06-11T14:37:01.013
> 
> 标签：android, timer, gps, handler

我正在开发一个应用程序，该应用程序需要每 2 分钟保存一次设备 GPS 位置的轨迹。
第一次尝试是使用**requestLocationUpdates**：

```
locationManager = (LocationManager)context.getSystemService(Context.LOCATION_SERVICE);
locationManager.requestLocationUpdates(LocationManager.GPS_PROVIDER, 120000L, 0f, this); 
```

对于测试，我使用**Samsung Galaxy Mini (Android 2.3.5)**。
如果我在调试模式下连接 USB 电缆进行测试，一切正常，每两分钟我就会得到位置。
问题是当我拔下 USB 并去街上测试时。这样我每秒都会得到一个 GPS 位置。这太多了。
经过大量审查我的代码后，我决定使用计时器：

```
new Timer().scheduleAtFixedRate(new TimerTask(){
    @Override
    public void run() {
        Location loc=getLastBestLocation(Activity.this);
        GpsStore.save(loc);
    }   
}, 120000L, 120000L); 
```

同样，如果使用 USB 电缆在调试模式下测试应用程序，一切正常。
如果我出去测试应用程序是否在前台一切顺利，如果应用程序在后台 TimerTask 不是每 2 分钟运行一次，它就会停止，当应用程序返回前台时突然运行所有时间TimerTask 它已正常执行。但一切都在大约 1 秒内迅速完成。

再次审查我的代码后，我决定使用而不是 Timer Handler：

```
 final Handler handler = new Handler();
        Runnable runnable = new Runnable() {
           public void run() {
                                    Location loc=getLastBestLocation(Activity.this);
                                    GpsStore.save(loc);

                handler.removeCallbacks(this);
                handler.postDelayed(this,120000L);
           }
        };
        handler.removeCallbacks(runnable);
        handler.postDelayed(runnable, 120000L); 
```

与往常一样，在使用 USB 的调试模式下一切正常。现在当我在街上进行测试时发生的情况是，当应用程序在前台被处理程序不完全每 2 分钟运行一次时，有时每隔 4 次在 1 中执行一次，但是当应用程序在后台运行时使用处理程序不是每 2 分钟运行一次，从不运行。

我会使用 requestLocationUpdates 但每秒调用一次。
我需要你的帮助。谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-11T16:21:01.283

如果您查看 的文档`locationManager.requestLocationUpdates`，您会发现该`minTime`参数仅作为提示。真正的 LocationProvider 可以比您指定的更快地提供更新。我建议您也设置该`minDistance`值。将其设置为至少 100m。

# cordova - 无效的应用程序存档 - 资源名称无效 (.idea/)

> ID：10982236
> 
> 赞同：0
> 
> 时间：2012-06-11T14:37:06.200
> 
> 标签：cordova, jquery-mobile, blackberry-webworks

我正在尝试使用 Phonegap 和 Webworks SDK 构建我的黑莓应用程序，但我收到以下错误

> 无效的应用程序存档 - 资源名称无效（.idea/）。

我找到了有问题的 .idea 文件。它位于由 Blackberry webworks 打包程序生成的存档文件夹中，但我不确定如何处理它或者是否可以安全删除它

有什么想法我哪里出错了吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-12T07:44:17.770

解决了！

我正在使用生成 .idea 文件夹并将其转储到您的目录下的“Webstorm”IDE。它可以安全地删除。我重建了黑莓应用程序，没有错误消息。同时，我还读到 Blackberry WebWorks Packager 在某些命名约定（“_”等）方面存在问题。

# python - 如何删除字符串中的重复字母？

> ID：10982240
> 
> 赞同：0
> 
> 时间：2012-06-11T14:37:12.340
> 
> 标签：python, nlp

我怎样才能“正常化”

```
word = 'yeeeessssssss' 
```

到

```
word = 'yes' 
```

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-06-11T14:48:46.897

如果没有更多信息，就不可能回答您的问题。正如您所说，您想从可迭代对象中删除重复项。你可以这样做`itertools.groupby`：

```
>>> "".join(c for c, _ in groupby("yeeessssss"))
'yes' 
```

当然，这将删除**所有**重复项：

```
>>> dedupe = lambda s: "".join(c for c, _ in groupby(s))
>>> dedupe("hello")
'helo'
>>> dedupe("Mississippi")
'Misisipi' 
```

我认为您的问题可能要困难得多；即，如何将可能有重复字母的单词标准化为*实际的英文单词*。这基本上不可能精确地做到——会`beeeeeee`或`feeeed`变成什么？- 但是，通过大量的努力，您可能可以通过任何各种启发式方法来近似它。

一个简单的方法是查看该单词是否在字典中，如果没有，则一次删除一个重复的字母，直到它出现为止。这将非常低效，但可能会奏效。

另一种方法是使用自然语言库将单词转换为某种“正常形式”。这可能取决于它的发音方式、拼写方式或其他方式。然后，您可以找到最接近该范式的单词，并使用*它*来提供去重复的单词。

另一种方法是在字符串之间定义某种“修改距离”，您可以为“删除字符”、“插入字符”和“修改字符”的每个操作分配固定成本。然后，您可以根据该指标计算最接近输入的单词。这是一个经过充分研究的问题，因为它用于生物信息学，并且有一种优雅的动态编程方法。不幸的是，它也非常具有挑战性（一个相关的问题是我本科学位中的一个为期数周的课程项目）。

* * *

;tl，博士

只需删除重复项很容易。找到作为*英语单词*的最佳近似值是非常困难的。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-11T14:46:13.090

如果通过规范化，您的意思是删除重复的字符，这应该有效：

```
re.sub(r'(\w)\1+', r'\1', 'yeeeesssss')  // yes 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-06-11T14:49:23.753

这似乎类似于您需要使用拼写检查器执行的操作。

一种常用的解决方案是使用 Soundex 函数将单词简化为“听起来像”，然后将其与已知的有效词词典进行比较。我不认为这会是万无一失的，但这是一个可以让你朝着正确方向开始的想法。

[http://en.wikipedia.org/wiki/Soundex](http://en.wikipedia.org/wiki/Soundex)

Soundex 不是唯一的选择。还有 Metaphone 和其他几种可能有效的类似算法。

这里有一个关于 Soundex 与 Python 的先前问题：Python[中的 Soundex 算法（作业帮助请求）](https://stackoverflow.com/questions/1626217/soundex-algorithm-in-python-homework-help-request)

最难的部分可能是找到一本好词典，但我很幸运地进行了这个搜索：[http ://www.bing.com/search?q=download+word+list&qs=n&form=QBRE&pq=download+word+list&sc= 8-18&sp=-1&sk=](http://www.bing.com/search?q=download+word+list&qs=n&form=QBRE&pq=download+word+list&sc=8-18&sp=-1&sk=)

不管你做什么，它都不会是完美的。正如一些评论所指出的，英语（以及任何语言，就此而言）有很多复杂的问题需要处理。例如，区分“too”和“to”取决于上下文。微软和其他公司已经将经过多年开发的开发团队投入到拼写检查器中，但拼写检查器仍然无法 100% 正确地做到这一点，仍然需要人工干预。我认为你会在单词规范化方面面临同样的问题。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-11T14:50:46.747

使用`enchant`模块检查返回的单词是否为英文单词：

```
import enchant,itertools
d_us= enchant.Dict("en_US")
d_uk= enchant.Dict("en_UK")
words=[]
teks=teks='yeeeessssssss'
for x in itertools.permutations(set(teks)):
    if d_us.check(''.join(x)) or d_uk.check(''.join(x)):
      words.append(''.join(x)) 
```

# mysql - 在连接中使用别名

> ID：10982241
> 
> 赞同：1
> 
> 时间：2012-06-11T14:37:19.600
> 
> 标签：mysql, sql

我正在尝试在左连接中使用 SQL 别名。在连接中使用别名时，我收到错误“on 子句中的未知 a_alias 列”有人能指出我正确的方向吗？

```
SELECT a as a_alias FROM table_a LEFT JOIN table_b ON a_alias = b 
```

干杯

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-11T14:41:13.357

您不能在 where 或 join 中使用别名，因为它尚未被评估。它们仅在聚合和分组/排序/具有子句 IIRC 中可用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-11T14:41:28.053

您可以使用的唯一别名`ON`是任何表别名；该`SELECT`子句在语法中位于首位，但（通常）是*最后一个*处理步骤；您在条款中要求的投影`SELECT`尚不可用。您不能在`SELECT`子句中使用`ON`子句中定义的列别名——您需要指定完整的列名。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-11T14:49:53.050

如果要在查询中使用别名，可以执行以下操作：

```
SELECT *
FROM 
(
    SELECT a as a_alias
    FROM table_a
) ta
LEFT JOIN table_b 
    ON ta.a_alias = b 
```

您可以将您`SELECT ... FROM`的括号括起来，然后在您的`JOIN`.

# android - 如何配置 Android 模拟器来模拟 Galaxy 3

> ID：10982242
> 
> 赞同：0
> 
> 时间：2012-06-11T14:37:27.340
> 
> 标签：android, eclipse, emulation, galaxy

我在 Nexus 上看到过类似的问题，但我的应用程序仅在 Galaxy 3 上崩溃。有人知道正确的参数吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-11T14:41:27.167

这可能有点困难。在你`AVD Manager`有一些可以调整的选项。
但是作为一个优秀的开发者，你需要一些设备来测试，或者你让一些用户使用一些设备。

由于 S3 具有三星的 UI（Touchwiz afaik），这“可能”会导致您的问题，但无论如何您无法使用 Touchwiz 创建模拟器。

看到一个类似的问题：[Samsung Galaxy s3 模拟器设置](https://stackoverflow.com/questions/10804619/samsung-galaxy-s3-emulator-settings)

# actionscript-3 - 如何为单个组件设置背景渐变颜色？

> ID：10982246
> 
> 赞同：0
> 
> 时间：2012-06-11T14:37:47.097
> 
> 标签：actionscript-3, apache-flex, flex3, stylesheet

我想为我的 flex3 应用程序中的每个组件提供不同的背景渐变颜色。

对于整个应用程序，我们喜欢

```
Application {
   backgroundColor: #869ca7;
   backgroundGradientColors: #3366ff, #68808c;
} 
```

但是我希望为具有不同颜色集的每个组件做同样的事情？除了使用渐变背景图片还有什么办法吗？

# c++ - 如何让 GCC 在 ROM 中放置 C++ constexpr？

> ID：10982249
> 
> 赞同：6
> 
> 时间：2012-06-11T14:37:56.153
> 
> 标签：c++, gcc, arm, constexpr

我为 LPC1114 编译，这是一个小型 ARM（实际上是 Cortex）目标。RAM 比 ROM 受限得多。我使用最新的 Mentor (CodeBenchLite) GCC 编译器 (GCC 4.6.3)。我有一些我想在 ROM 中拥有的常量对象。据我了解，下面代码中的 ffx 对象应该以 ROM（代码）结尾，而是放在 DATA 中。

```
class flop {
    public:
       int x;
       constexpr flop( int x ) : x(x){}
};

 extern constexpr flop ffx( 1 ); 
```

如何说服编译器预先计算对象并将其放入 ROM 中？

或者我应该问：

*   我能以某种方式期望 G++ 编译器为 ffx 生成 ROMable 数据吗
*   如果是这样，我的代码是否正确
*   如果是这样，它支持哪个 G++ 版本（我使用 4.6，也许我需要 4.7？）

========================================

这个 bugzilla 条目[c++/49673](http://comments.gmane.org/gmane.comp.gcc.bugs/325422)似乎表明我的问题是一个已知问题，可能已在 GCC 4.7 中修复。不幸的是，我更喜欢使用 Mentor/CodeSourcery，它仍然是 4.6.3。所以我想我暂时被这个错误所困扰。:(

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-11T14:53:10.630

> 更新 #2：*使用 gcc 4.7.0 的测试结果*

这确实在 gcc 4.7.0 中得到修复。您的代码生成以下汇编器输出：

```
 .file   "constexpr.cpp"
    .globl  _ffx
    .section .rdata,"dr"
    .align 4
_ffx:
    .long   1 
```

这可能是您想要的。升级？

我认为您需要一个特定于平台的解决方案。请参阅[在内存中定位代码和数据（分散加载）](http://infocenter.arm.com/help/index.jsp?topic=/com.arm.doc.faqs/ka3558.html)：

> 分散加载允许您将应用程序划分为多个独立的代码和数据区域，这些区域分布在整个地址映射中。这些区域的位置在加载时间和运行时间之间可能不同：
> 
> 1.  加载区域包含应用程序在开机/加载时使用的应用程序代码和/或数据（通常是 ROM）。

与其单独依赖 gcc，不如尝试按照`armlink`上面提供的链接中的建议使用。

更新：我看到了你提到的 gcc 错误。LLVM/MinGW 同样没有希望。但是，我一直在使用 GCC 4.6，我认为这*可能会对*您有所帮助：

```
struct Data
{
    int i;    
};
constexpr Data getData() { return Data{1}; } 
```

如果您没有 ctor，而是有一个`constexpr`函数，并尝试生成汇编器输出，则输出通常为空（无`.data`节）。如果您使用它来初始化一些变量（在全局范围内），如下所示：

```
const Data foo = getData(); 
```

你会得到一个程序集，如下所示：

```
 .file   "constexpr.cpp"
    .section .rdata,"dr"
    .align 4
__ZL3foo:
    .long   1 
```

（这是`g++ -std=c++0x -S`命令行）。那对你有用吗？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-11T15:19:28.420

以我的经验，`const`数据被放置在一个只读部分中，因此该部分中的所有数据都可以进入 ROM（或被编程到 FLASH 中）。

GCC 链接器指令文件 (*.ld) 可以为不同的部分分配地址。

另一种选择是将大型数据结构（例如字体）放入汇编语言中。汇编语言可以比 C 或 C++ 语言更容易地将数据放入段中。

我们的下一个目标是将数据与我们的可执行文件分开。这缩短了可执行文件并减少了对可执行文件的测试时间。

# jquery-ui - 谷歌浏览器执行本地网络应用程序时出现 Chrome.event.dispatch 错误

> ID：10982250
> 
> 赞同：3
> 
> 时间：2012-06-11T14:37:56.683
> 
> 标签：jquery-ui, google-chrome, jquery

```
Error in event handler for 'undefined': TypeError: Cannot read property 'combi' of undefined
    at Object.bind (chrome-extension://libokbfffpaopdjmeofdfpmlanaenaje/js/lib/jquery.hotkeys-0.7.9.min.js:6:8)
    at chrome-extension://libokbfffpaopdjmeofdfpmlanaenaje/js/activate_hotkey.js:33:17
    at extension:102:9
    at [object Object].dispatch (event_bindings:200:28)
    at Object.<anonymous> (miscellaneous_bindings:202:22) event_bindings:202 chrome.Event.dispatch 
```

我想知道，究竟是我的浏览器造成的还是我的脚本造成的。

# java - Android - 使用扫描仪读取文件，如何获取文件

> ID：10982252
> 
> 赞同：3
> 
> 时间：2012-06-11T14:38:05.817
> 
> 标签：java, android, file, dir

您好，我遇到了一个非常烦人的问题，我想阅读与此类似的文本文件

```
KEY
0 1 2 3 4 5 6 7
KEYEND 
```

我尝试使用扫描器类，因为它可以以字符串、小数等形式返回结果

```
 public static void LoadStuff(String Name) {
      Scanner reader = null;
      try {
         reader = new Scanner(new File(Name));
      } catch (Exception e) {
         Log.d("damn", "FAIL");
      }
         if(reader != null)
            Load(reader);
   }

private static void Load(Scanner reader) {
      while (reader.hasNext()) {
         String result = reader.next();
         if (result == "KEY") {   // may be  result.equalsignorecase
            while (result != "KEYEND") {
               int index = reader.nextInt();
               Log.d("Index", String.valueOf(index));
            }
         }
      }
            reader.close();
   } 
```

我不能在上面做，导致扫描仪找不到文件，解析像“file.txt”不起作用，也尝试使用这样的路径“res/data/file.txt”也不起作用我应该把文件放在哪里以及如何获取使它工作的目录谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2016-03-25T18:39:28.057

此代码使用`getAssets()`您的类的方法。您需要将文本文件放在 Android 项目的 assets 文件夹中。该`getAssets`方法返回一个 AssetManager 对象。该`open(String.format("filename.txt"))`方法返回一个 InputStream。InputStream 是DataInputStream 的参数。然后将其用作扫描仪的输入。

```
try {
    DataInputStream textFileStream = new DataInputStream(getAssets().open(String.format("filename.txt")));
    Scanner sc = new Scanner(textFileStream);
    while (sc.hasNextLine()) {
        String aLine = sc.nextLine();
        System.out.println(aLine);
    }
        sc.close();
} catch (IOException e) {
        e.printStackTrace();
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-11T14:45:46.040

我一直用来访问当前项目中的文件（也是文本文件）的代码是：

```
textFileStream = new DataInputStream(getAssets().open(String.format("myFile.txt"))); 
```

您始终可以使用自己填充的字符串填充 String.format 部分。

关键一直是

```
getAssets() 
```

部分。

因此，在您的情况下，您可能会看到如下所示的内容：

```
reader = new Scanner(new File(getAssets().open(String.format("myFile.txt")))); 

OR

reader = new Scanner(new File(getAssets().open(Name))); 
```

File 构造函数可以接收一个 InputStream，getAssets().open 将返回一个 InputStream。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-11T14:46:00.597

将文本文件放入文件`assets`夹中，然后使用`getAssets().open("file.txt")`.

[例子](http://developer.android.com/resources/samples/ApiDemos/src/com/example/android/apis/content/ReadAsset.html)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-03-04T22:15:44.917

要将文件写入内部存储，请使用`openFileOutput`. 根据 Android[数据存储](http://developer.android.com/guide/topics/data/data-storage.html#filesInternal)文档：

```
String FILENAME = "hello_file";
String string = "hello world!";

FileOutputStream fos = openFileOutput(FILENAME, Context.MODE_PRIVATE);
fos.write(string.getBytes());
fos.close(); 
```

使用 Scanner 读取文件：

```
File f = new File( getFilesDir(), FILENAME );
Scanner s = new Scanner( f ); 
```

注意：[getFilesDir()](http://developer.android.com/reference/android/content/ContextWrapper.html#getFilesDir%28%29)返回文件系统上存储使用 openFileOutput(String, int) 创建的文件的目录的绝对路径。

要查看您输出到文件的内容，请查看：[是否可以从 adb shell 中查看应用程序数据，就像我看到它安装 SD 卡一样？](https://stackoverflow.com/questions/9017073/is-it-possible-to-see-application-data-from-adb-shell-the-same-way-i-see-it-moun).

其他[存储选项](http://developer.android.com/guide/topics/data/data-storage.html)。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-11T16:38:20.223

1.  尝试给出这样的路径`"/sdcard/file.txt"`

2.  `equals`在比较对象时，请始终“ ”。`Never use "==" or "!=" with Objects. (String is an object too in Java)`

    例如：

    ```
     if (result.equals("KEY"))` {       // equals is used
        `while (!(result.equals("KEYEND")))` {  // !equals is used

           int index = reader.nextInt();
           Log.d("Index", String.valueOf(index));
        }
     } 
    ```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2018-06-30T08:42:57.583

你可以这样做：

```
File data = new File("yourfile"); 
Scanner sc = new Scanner(data);
int i = 0;
while(sc.hasNextLine){
    String Lines = sc.nextLine;
    System.out.println(Lines);
    i++;
} 
```

# php - wiki 类型网站的基本设置

> ID：10982259
> 
> 赞同：0
> 
> 时间：2012-06-11T14:38:23.033
> 
> 标签：php, mysql, html

我想创建一个网站，它的每个页面都存储在服务器上，但***不是***作为单个 html 文件的负载。用户还可以通过简单地输入页面文本、页面标题，然后单击提交来创建页面。然后，这会将该页面添加到服务器，并且该页面将很容易被搜索引擎索引。

页面是否应该存储在 mySQL 数据库中？如果是这样，每个页面如何在不执行以下操作的情况下拥有永久链接：`www.website.com/loadpage.php&p=8` 我更喜欢类似：`www.website.com/user-submitted-page-title/`

显然很多网站都这样做，但我找不到任何解释。

抱歉，如果这是一个菜鸟问题，我非常感谢您的帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-11T14:40:24.970

你应该看看 user-friendly-urls。在大多数情况下，这涉及一个 .htacess 文件，该文件将每个 url 重定向到您网站的索引。例如，在那里，您可以解析 url 并在数据库中查找正确的页面。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-11T14:50:36.140

听起来您想构建一个“内容管理系统”或 CMS。这些将页面内容存储在数据库中（很可能是 MySQL，但不限于此），然后使用诸如 PHP 之类的服务器端语言将内容放到页面上。然后你可以做一些有用的事情，比如建立一个页面模板，只填写页面之间变化的部分（所以你的页眉、菜单和页脚都是预定义的，你填写页面的主体）。

这是[编写一个非常基本的 CMS 的指南](http://css-tricks.com/php-for-beginners-building-your-first-simple-cms/)，尽管如果您是 PHP 新手并且只想在网上获取一些东西，您可以考虑使用诸如[Joomla](http://www.joomla.org)或[Wordpress](http://www.wordpress.org)之类的开源软件。如果你想要一些中间立场，有诸如 Zend 和 CodeIgniter 之类的框架，它们会为你做一些工作，但我没有任何经验，所以无法提供任何建议。

您还需要 url-rewriting 来获得您想要的那种 URL - 这里有一个很好的问题可以涵盖它：[dynamic URL rewriting .htaccess](https://stackoverflow.com/questions/10333392/dynamic-url-rewriting-htaccess)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-11T14:50:45.023

您所描述的实际上是网络上几乎每个网站的工作方式。这并不是什么晦涩难懂的事情，实际上，拥有一个将页面存储为 html 文件的网站是很可笑的，除非它只有一两个页面......

本质上，您将部分数据存储在表中。想象一下`pages`表，它有 cols *id、page_title、page_desc、page_content、page_created、page_author_id* 等...

然后，您将有一个名为 page.php 的模板文件，该文件将传递诸如 ?pID=14 或标题 ?pTitle=my-cool-page-title 之类的参数，并且您将匹配数据库中的该页面，获取来自 mysql_fetch_array 的内容，并将这些部分回显到模板文件中的 html 区域。

然后，您将使用绝对巫术的 mod_write 隐藏 page.php?pTitle=my-cool-page-title，所以不要担心这会让您大吃一惊，它会让大多数人大吃一惊，直到他们非常先进。搜索“simple mod_rewrite rules”，你就会明白。

你需要研究的东西：

*   “简单的数据库驱动网站教程”或“php + mysql 网站教程”可能。
*   htaccess 和 mod_rewrite
*   与数据库交互时从 POST/GET 中转义输入。<-重要

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-11T14:50:52.563

您可以使用它创建自己的 CMS，[也](http://www.1stwebdesigner.com/css/creating-cms-2-access-levels-administrators/)可以使用最著名的 CMS，如[Wordpress](http://www.wordpress.org)、[Drupal](http://www.drupal.org)、[Joomla](http://www.joomla.org)或[FromCMS](http://www.madebyfrog.com)。

您可以使用下面的一些 php 或 python 脚本来创建自己的 url。

[How to automatically generate a page after user fills a form via PHP?](https://stackoverflow.com/questions/6261163/how-to-automatically-generate-a-page-after-user-fills-a-form-via-php) [http://lifehacker.com/5335216/make-your-own-url-shortening-service](http://lifehacker.com/5335216/make-your-own-url-shortening-service)
[How to let PHP to create subdomain automatically for each user?](https://stackoverflow.com/questions/183928/how-to-let-php-to-create-subdomain-automatically-for-each-user) [http://www.hongkiat.com/blog/how-to-create-url-shortener-with-your-domain/](http://www.hongkiat.com/blog/how-to-create-url-shortener-with-your-domain/)

Yes you can choose any of the sql servers to stored the data. The best one to choose is mysql (Open Source Database Management system)

# ruby-on-rails - 带有 Form For Gives 的嵌套资源：参数数量错误（1 代表 0）

> ID：10982263
> 
> 赞同：0
> 
> 时间：2012-06-11T14:38:29.617
> 
> 标签：ruby-on-rails, ruby-on-rails-3, nested-resources, nested-routes

我正在尝试为嵌套路由创建一个编辑页面。

网址类似于：`http://localhost:3000/clients/2/notes/3/edit`

我的路线.rb：

```
 resources :clients do
    resources :notes
  end 
```

在我的编辑控制器中：

```
def edit
  @note = Note.find(params[:id])
  @client = Client.find(params[:client_id])
end 
```

和我的 edit.html.erb 文件

```
<%= form_for(@client, @note) do |f| %>
    <%= render 'shared/error_messages', object: f.object %>
    <%= f.label :content %>
    <%= f.text_field :content %> 
    <%= f.submit "Save changes" %>
<% end %> 
```

当我这样做并加载编辑页面时，我得到以下信息： ![在此处输入图像描述](../Images/b5746c8fbd0f1e884fcf6cf4d7bfef3d.png)

我环顾了堆栈溢出，并且在使用嵌套路由时它们都有两个参数，这里正确的做法是什么？为什么不一样？

更新：

```
rake routes
           users GET    /users(.:format)                             users#index
                 POST   /users(.:format)                             users#create
        new_user GET    /users/new(.:format)                         users#new
       edit_user GET    /users/:id/edit(.:format)                    users#edit
            user GET    /users/:id(.:format)                         users#show
                 PUT    /users/:id(.:format)                         users#update
                 DELETE /users/:id(.:format)                         users#destroy
        sessions POST   /sessions(.:format)                          sessions#create
     new_session GET    /sessions/new(.:format)                      sessions#new
         session DELETE /sessions/:id(.:format)                      sessions#destroy
    client_notes GET    /clients/:client_id/notes(.:format)          notes#index
                 POST   /clients/:client_id/notes(.:format)          notes#create
 new_client_note GET    /clients/:client_id/notes/new(.:format)      notes#new
edit_client_note GET    /clients/:client_id/notes/:id/edit(.:format) notes#edit
     client_note GET    /clients/:client_id/notes/:id(.:format)      notes#show
                 PUT    /clients/:client_id/notes/:id(.:format)      notes#update
                 DELETE /clients/:client_id/notes/:id(.:format)      notes#destroy
         clients GET    /clients(.:format)                           clients#index
                 POST   /clients(.:format)                           clients#create
      new_client GET    /clients/new(.:format)                       clients#new
     edit_client GET    /clients/:id/edit(.:format)                  clients#edit
          client GET    /clients/:id(.:format)                       clients#show
                 PUT    /clients/:id(.:format)                       clients#update
                 DELETE /clients/:id(.:format)                       clients#destroy
            root        /                                            clients#index
          signup        /signup(.:format)                            users#new
          signin        /signin(.:format)                            sessions#new
         signout DELETE /signout(.:format)                           sessions#destroy 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-11T16:40:08.093

尝试使用括号..

```
<%= form_for([@client, @note]) do |f| %> 
```

# sql - PhoneGap SQL 数据库更新

> ID：10982265
> 
> 赞同：0
> 
> 时间：2012-06-11T14:38:43.937
> 
> 标签：sql, database, cordova

我有一个 PhoneGap 应用程序，我需要在其中更新一些 .csv 文件。问题是我的数据库仅在应用程序从商店加载时填充一次。我需要重新填充/解析 .csv 文件中的列，以便为用户更新一些数据。目前我的应用程序加载并检查数据库是否已填充，但不检查更新。有什么建议么？谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-11T17:02:14.393

创建一个包含您的数据库数据版本的表。在应用程序加载时检查应用程序内的版本是否是最新的。如果不进行事务更新，则最后一次操作会将数据库版本更新为最新版本。

# python - 如何用熊猫聚合重复的时间戳？

> ID：10982266
> 
> 赞同：4
> 
> 时间：2012-06-11T14:38:45.153
> 
> 标签：python, indexing, time-series, pandas

我正在研究python（`pandas`特别是）来分析数据集。（Python 太牛了，开源的威力惊人）。我的数据集的特定部分有问题。

我有以下数据集，

```
time,contract,ticker,expiry,strike,quote,price,volume
08:01:08,C,PXA,20100101,4000,A,57.8,60
08:01:11,C,PXA,20100101,4000,A,58.4,60
08:01:12,C,PXA,20100101,4000,A,58,60
08:01:16,C,PXA,20100101,4000,A,58.4,60
08:01:16,C,PXA,20100101,4000,A,58,60
08:01:21,C,PXA,20100101,4000,A,58.4,60
08:01:21,C,PXA,20100101,4000,A,58,60 
```

它继续......

我正在使用熊猫来加载数据。在此之后，我希望能够执行以下操作，对出现重复的时间进行体积加权平均。

即因为在 08:01:16 有两个询价，我想根据成交量计算平均价格，即 (58.4*60 + 58*60)/(60+60) 和成交量的平均值体积列将是 (60+60)/2。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-06-11T14:57:10.480

```
In [28]: a = pd.read_csv('aa.csv')

In [29]: a
Out[29]: 
       time contract ticker    expiry  strike quote  price  volume
0  08:01:08        C    PXA  20100101    4000     A   57.8      60
1  08:01:11        C    PXA  20100101    4000     A   58.4      60
2  08:01:12        C    PXA  20100101    4000     A   58.0      60
3  08:01:16        C    PXA  20100101    4000     A   58.4      60
4  08:01:16        C    PXA  20100101    4000     A   58.0      60
5  08:01:21        C    PXA  20100101    4000     A   58.4      60
6  08:01:21        C    PXA  20100101    4000     A   58.0      60

In [30]: pd.DataFrame([{'time': k,
                        'price': (v.price * v.volume).sum() / v.volume.sum(),
                        'volume': v.volume.mean()}
                       for k,v in a.groupby(['time'])],
                      columns=['time', 'price', 'volume'])
Out[30]: 
       time  price  volume
0  08:01:08   57.8      60
1  08:01:11   58.4      60
2  08:01:12   58.0      60
3  08:01:16   58.2      60
4  08:01:21   58.2      60 
```

# silverlight - 如何在鼠标按下时更改 WP7 Silverlight 中按钮的背景？

> ID：10982272
> 
> 赞同：0
> 
> 时间：2012-06-11T14:39:01.070
> 
> 标签：silverlight, windows-phone-7

我的应用程序中有按钮，并且为每个按钮设置了背景。

当我按下按钮时，在释放它之前，背景变成了一个白色的矩形。

如何设置另一个图像而不是白色矩形？

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-11T17:53:41.473

在`Blend`click`Edit Template - Edit a copy`中，而不是转到`States`选项卡，选择`Focused`，展开可视化树并删除按钮背景和边框上的动画

或者

在`Blend`click`Edit Template - Edit a copy`中，比 go to`xaml`并删除任何`Focused`可视状态的内容

# java - SWT_AWT.new_Frame：当窗口移动时，JComboBox 永远不会失去焦点

> ID：10982273
> 
> 赞同：0
> 
> 时间：2012-06-11T14:39:04.093
> 
> 标签：java, focus, swt, awt

在嵌入式框架内使用 JComboBox 时，我确实遇到了一个奇怪的焦点问题。

我创建了一个新的Shell

```
shell = new Shell(display.getActiveShell(), SWT.SHELL_TRIM | SWT.APPLICATION_MODAL); 
```

我用来创建嵌入式框架的外壳，例如

```
 Composite contentComposite = new Composite(parent, SWT.EMBEDDED);
    contentComposite.setLayout(new FillLayout());

    frame = SWT_AWT.new_Frame(contentComposite);
    rootPanel = new Panel();
    rootPanel.setLayout(new BorderLayout());
    frame.add(rootPanel); 
```

我在 rootPanel 中添加了一个 JComboBox（有 2 个元素）。当我选择组合框打开下拉菜单时，我可以拖放外壳窗口，而不会失去组合框中的焦点。

当 shell 窗口移动到另一个屏幕区域时，下拉菜单仍然在屏幕上的相同位置。下拉菜单不再显示在组合框下方。

我尝试为某些组件添加焦点侦听器，但焦点不会在组合框上丢失，也不会在外壳上获得。

那么，当外壳移动或获得焦点时，我如何隐藏组合框的弹出窗口。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-12T06:32:57.530

在[Andrew Thompson](https://stackoverflow.com/users/418556/andrew-thompson)在他的评论中描述了 3 个不同的 UI 库不是最佳选择之后，我开始尝试 AWT [Choice](http://docs.oracle.com/javase/1.4.2/docs/api/java/awt/Choice.html)类。

These class is losing the focus, when the shell window is selected.

所以看起来，在嵌入式 AWT 对象中不能那么容易地使用摆动，但我还没有看到原因。

# php - $_SERVER['REMOTE_ADDR'] 没有给出正确的 IP 地址

> ID：10982277
> 
> 赞同：12
> 
> 时间：2012-06-11T14:39:09.943
> 
> 标签：php, ip, localhost

我正在用 PHP 制作一个表格，我想记录用户的 IP 地址。这是我使用的代码片段：

```
<input type="hidden" name="ip" value="<?php echo $_SERVER['REMOTE_ADDR']; ?>" /> 
```

当我在 XAMPP 中打开代码并读取源代码时，该值的 IP 地址与我的不同：

```
<input type="hidden" name="ip" value="::1" /> 
```

当我在 localhost (XAMPP) 中使用此 IP 地址时，通常会发生此 IP 地址吗？
如果没有，是否有其他方法可以获取用户的 IP 地址？

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2012-06-11T14:43:02.453

IP`::1`在 IPv6 版本中是“localhost”。你的机器配置了 IPv6 - 因此你得到了这个 IP 地址。很可能，当您在实时服务器上部署应用程序时，服务器上不会配置 IPv6，您的应用程序将获得更熟悉的 IPv4 地址（例如 aaa.bbb.ccc.ddd）。

另一方面，`$_SERVER['REMOTE_ADDR']`可能并不总是包含正确的地址。最好使用：

```
if(!empty($_SERVER['HTTP_X_FORWARDED_FOR'])) {
    $ip_address = $_SERVER['HTTP_X_FORWARDED_FOR'];
} else {
    $ip_address = $_SERVER['REMOTE_ADDR'];
} 
```

* * *

## 回答 #2

> 赞同：18
> 
> 时间：2012-06-11T14:42:43.387

> `<input type="hidden" name="ip" value="<?php echo $_SERVER['REMOTE_ADDR']; ?>" />`

不要那样做。`$_SERVER`从提交表单时获取请求。在生成表单时获取它并将其存储在表单中只是让人们有机会更改它。

> `Does this IP address normally happen when I use it in a localhost (XAMPP)?`

是的。当您从 localhost 请求页面时，获取本地 IP (IPv6) 地址是正常的。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-06-11T14:46:49.017

1）。您无需添加`<?php echo $_SERVER['REMOTE_ADDR']; ?>`到表单中。在这种情况下，很容易伪造它（实际上在任何情况下都很容易）。更好地将 IP 添加到服务器端的数据中。

2）你也可以看看`$_SERVER['HTTP_X_FORWARDED_FOR']`。如果用户有代理，其中一些（透明代理）会将真实用户的 IP 放在那里。

3) 请注意：有关 IP 的数据根本不可信。

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2012-06-11T14:42:23.543

'::1' 是 localhost（或 127.0.0.1）的 IPV6 版本。

打开端口 80 并从您的 IP 地址访问该页面。那么应该可以正常工作:)。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-06-11T14:42:41.597

这实际上是您的 IP。尽管是您的 IPv6 IP 而不是 IPv4。

在 IPv6 中，::1 代表 localhost / 127.0.0.1。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2015-08-05T10:31:19.383

```
if(isset($_SERVER['HTTP_X_FORWARDED_FOR']) && $_SERVER['HTTP_X_FORWARTDED_FOR'] != '') {
                $ip_address = $_SERVER['HTTP_X_FORWARDED_FOR'];
            } else {
                $ip_address = $_SERVER['REMOTE_ADDR'];
            } 
```

此代码返回客户端的 ip。如果您认为这是服务器 IP，那么您可能是对的，因为您的服务器（大概）托管在您的 PC 上。由于您的客户端（PC）和服务器在同一台PC上运行，它们都具有相同的IP。如果你不明白这一点，你真的应该对 ips、本地 ips 和所有这些东西做一些研究。

# nhibernate - Nhibernate 映射 - 生成“本机”表示必须手动分配 ID

> ID：10982279
> 
> 赞同：2
> 
> 时间：2012-06-11T14:39:11.387
> 
> 标签：nhibernate, nhibernate-mapping

我有两张表，一张称为 QuestionText 另一张称为 State。当我将 SaveOrUpdate() 调用到 QuestionText 时，它保存得很好，但是当我为 State 调用 SaveOrUpdate() 时，我得到：必须在调用 save() 之前手动分配此类的 ID：Entities.State

每个类的映射都是相同的。

关于为什么 nHibernate 对一个表而不是另一个表的自动生成/身份指定的主键说这个的任何想法......当映射显然两者相同时？

这个工作正常：

```
[Serializable()]
[Class(NameType = typeof(QuestionText), Table = "QuestionText", Schema = "eoi")]
public class QuestionText
{
    #region Public Properties
    [NHibernate.Mapping.Attributes.Generator(Class = "native")]
    [NHibernate.Mapping.Attributes.Id(Name = "QuestionTextID")]
    public virtual int? QuestionTextID { get; set; }

    [NHibernate.Mapping.Attributes.Property]
    public virtual string QuestionDescription { get; set; }

    [NHibernate.Mapping.Attributes.Property]
    public virtual string QuestionCategory { get; set; }

    [NHibernate.Mapping.Attributes.Property]
    public virtual string QuestionDisplayTitle { get; set; }

    #endregion
} 
```

这个没有：

```
[Serializable()]
[Class(NameType = typeof(State), Table = "State", Schema = "eoi")]
public class State
{
    #region Public Properties

    [NHibernate.Mapping.Attributes.Generator(Class = "native")]
    [NHibernate.Mapping.Attributes.Id(Name = "StateID")]
    public virtual int? StateID { get; set; }

    [NHibernate.Mapping.Attributes.Property]
    public virtual string StateAbbreviation { get; set; }

    [NHibernate.Mapping.Attributes.Property]
    public virtual string StateName { get; set; }

    #endregion //Public Properties
}//end of class 
```

和我的保存方法：

```
internal T Save(T obj)
{
        using (ISession dbSession = EOIDB.GetSession())
        using (ITransaction transaction = dbSession.BeginTransaction())
        {
            try
            {
                dbSession.SaveOrUpdate(obj);
                transaction.Commit();
                return obj;
            }
            catch (Exception ex)
            {
                transaction.Rollback();
                throw ex;
            }
        }
} 
```

**更新1：**

我删除了 State 表，并尝试插入数据。它给了我与上面相同的错误（设置唯一 ID）。然后我删除了 QuestionText 表并尝试插入，它给出了 - {"Invalid object name 'eoi.QuestionText'."}。那么这是否意味着 State 对象（表）存在两次？别的地方？或者也许在另一个模式下？我知道 State 是 SQLServer 中的一个关键字，所以我想知道这是否是问题的一部分。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-11T18:55:59.657

事实证明，在阅读了[文档](http://nhforge.org/doc/nh/en/index.html#mapping-attributes-tips)，更具体地说，这行 -

*   默认情况下，.NET 属性不保持属性的顺序；所以你需要在订单很重要时自己设置（使用每个属性的第一个参数）；当您在同一成员上拥有多个属性时，强烈建议设置它。

我通过使用发现了这一点

```
HbmSerializer.Default.Serialize(
System.Reflection.Assembly.GetAssembly(
typeof(State)), @"C:\temp\EOI.Mappings.xml"); 
```

然后查看文件映射是什么。从未创建过“生成器”元素。这是因为父节点是在子节点（生成器）之后创建的，这导致“id”元素没有“生成器”子元素。所以我改变了我的属性（见下文）并开始工作

```
[NHibernate.Mapping.Attributes.Id(0,Name = "StateID",Column="StateID")]
[NHibernate.Mapping.Attributes.Generator(1,Class="native")]
public virtual int? StateID { get; set; } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-11T18:40:28.097

尝试`Table="State"`用方括号括起来：`Table="[State]"`. 可能是您的数据库抛出了保留关键字。

# mysql - 数据源中的 MySQL 连接有效性测试：SELECT 1 还是更好的？

> ID：10982281
> 
> 赞同：12
> 
> 时间：2012-06-11T14:39:14.047
> 
> 标签：mysql, jdbc, orm, database-connection, datasource

我正在主/从架构中的 MySQL 上设置故障转移集群。我还在配置我的 JBoss 数据源，并且我正在寻找更好的方法来测试我的连接，因为我知道它适用于 Alfresco（使用 Ibatis）。

即使我多次练习 MySQL，我也不太了解 MySQL Server 中的内部执行机制。

到目前为止，我正在使用此查询来测试我的 SQL 连接（如在此线程[中：Jboss 数据源中的数据库故障](https://stackoverflow.com/questions/9409111/database-fail-over-in-jboss-data-sources)转移）

```
SELECT 1; 
```

这里是完整的数据源。

```
<?xml version="1.0" encoding="UTF-8"?>
<datasources>
<local-tx-datasource>
    <jndi-name>alfresco-datasource</jndi-name>
    <connection-url>
        jdbc:mysql://10.1.2.13,10.1.2.14:3306/alfresco
    </connection-url>
    <driver-class>com.mysql.jdbc.Driver</driver-class>
    <user-name>alfresco</user-name>
    <password>alfresco</password>
    <exception-sorter-class-name>
        org.jboss.resource.adapter.jdbc.vendor.MySQLExceptionSorter
    </exception-sorter-class-name>

    <connection-property name="readOnly">false</connection-property>
    <failOverReadOnly>false</failOverReadOnly>

    <!-- Automatic reconnecion - desactivated to preserve transactions  -->
    <!-- http://dev.mysql.com/doc/refman/5.0/en/connector-j-reference-configuration-properties.html :
    Failover happens when the driver determines that the connection has failed (checked before every query), and falls back to the first host when it determines that the host has become available again (after queriesBeforeRetryMaster queries have been issued). -->
    <!--<autoReconnect>true</autoReconnect>-->

    <check-valid-connection-sql>SELECT 1</check-valid-connection-sql>
    <valid-connection-checker-class-name>
        org.jboss.resource.adapter.jdbc.vendor.MySQLValidConnectionChecker
    </valid-connection-checker-class-name>

    <!-- If you're using Connector/J 3.1.8 or newer, you can use our implementation 
        of these to increase the robustness "mysql-ds.xml" 64L, 3683C of the connection 
        pool. -->
    <exception-sorter-class-name>
        com.mysql.jdbc.integration.jboss.ExtendedMysqlExceptionSorter
    </exception-sorter-class-name>
    <valid-connection-checker-class-name>
        com.mysql.jdbc.integration.jboss.MysqlValidConnectionChecker
    </valid-connection-checker-class-name>

    <metadata>
        <type-mapping>mySQL</type-mapping>
    </metadata>
</local-tx-datasource>

</datasources> 
```

我有多个我无法自己回答的问题：

*   Ibatis（或任何类型或 ORM）不会缓存这个简单的查询吗？这意味着它可能会返回错误的结果。
*   这个查询会不会太简单了？它真的试图执行代表服务器健康的内部机制吗？还是只测试连接？
*   这真的是一个可靠的测试吗？
*   是否有任何其他类型的测试（例如已经与 Connector/J 集成）？
*   性能对我来说也很重要，所以 SELECT 1 是健康检查和性能之间的一个很好的折衷方案

不要犹豫，指出一些链接（无论是否在 Stackoverflow 内）。如果这个问题已经回答了（据我搜索似乎没有），我显然会删除这个线程。

我非常感谢 mysql 开发人员或管理员的经验回报。我正在寻找最好的方法来做到这一点。

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-06-11T19:36:20.207

引用此链接：[Ping MySQL Server Using JDBC](https://stackoverflow.com/q/5445917/1291428)

你必须：

> MySQL JDBC 驱动程序 (Connector/J) 提供了 ping 机制。
> 
> 如果您执行带有 /* ping */ 前缀的 SQL 查询，例如：
> 
> "/* ping */ SELECT 1" 这实际上会导致驱动程序向服务器发送 ping 并返回一个虚假的、轻量级的结果集。
> 
> （您可以在 Connector/J 文档中找到这个隐藏相当深的内容；在该页面上搜索“ping”。仔细阅读：这种机制对使用的语法非常敏感。与大多数 SQL 不同，“ping”的“解析” " 标记发生在客户端 JDBC 驱动程序本身中。）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-11T19:30:35.530

我们在工作中用来检查与 MySQL 服务器的连接的查询非常`SHOW databases;`简单，因为它不需要您选择特定的数据库。我会说它非常可靠，并且这样的查询非常有效。

# git - “git svn clone”后缺少修订

> ID：10982285
> 
> 赞同：2
> 
> 时间：2012-06-11T14:39:41.963
> 
> 标签：git, svn, git-svn

运行后：

```
git svn clone https://svn.mycompany.eu/project/trunk 
```

有一些缺失的修订（例如总修订的 4700 中的 500）。这是一个问题，因为我们在 Trac 中加入了许多提交和许多任务。有人可以帮忙吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-12T13:15:47.930

你只克隆了主干，所以 git-svn 没有检测到任何分支。尝试：

```
git svn clone -s https://svn.mycompany.eu/project 
```

奇怪的是那些缺失的修订版。如果您的项目不遵守 SVN 约定，则需要告诉 git svn 在哪里可以找到这些分支。

# android - 定期运行任务，但有一些例外

> ID：10982286
> 
> 赞同：0
> 
> 时间：2012-06-11T14:39:45.053
> 
> 标签：android, handler

我需要那个 android 应用程序在一天中的特定时间做一些事情，例如在晚上 8:00 应用程序应该注销。我不想使用[AlarmManager](http://developer.android.com/reference/android/app/AlarmManager.html "报警管理器")，因为即使应用程序没有运行它也会触发。如果手机被关闭的时间表分散器重新启动。[带有 Runnable 的处理](http://developer.android.com/reference/android/os/Handler.html)程序会非常好，但如果手机睡着了，它就不起作用了。所以我需要的是：

*   应用程序在指定时间做某事（保存在首选项中）

*   仅当应用程序正在运行并登录时才会发生这种情况（即使手机处于睡眠状态）

    你能提出什么建议？

已编辑：
此外，此任务应等到应用程序结束其其他工作（发送、接收数据），如果仅在特定活动中执行（例如其他工作未执行的 home 或 main）则更好

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-11T14:57:57.413

在手机处于睡眠状态时唤醒手机的唯一方法是使用 AlarmManager。没有其他办法（好吧，您可以保持唤醒锁定并防止手机进入睡眠状态，但这会不必要地耗尽电池，并且您的用户会生气）。

因此，您想使用 AlarmManager 安排警报。然后，当警报响起时，您可以检查自己的应用程序是否已经运行并登录（保存此信息是一些静态（ckass）变量）。如果应用程序尚未运行并登录，则什么也不做。

**编辑：添加代码示例**

创建一个公共静态（类）变量，应用程序中的所有类都可以访问该变量：

```
public class Globals {
    public static boolean applicationIsBusyDoingSomethingUseful = false;
} 
```

在您的应用程序中，每当它正在做一些有用的事情并且不想被您的基于计时器的警报中断或注销时，它应该将此变量设置为“true”并且当它完成其工作并且不再做任何有用的东西都应该将变量重置为“false”：

```
public void someUsefulWork() {
    // set flag while doing useful work
    Globals.applicationIsBusyDoingSomethingUseful = true;
    // do useful work
    // ...
    // end of useful work
    Globals.applicationIsBusyDoingSomethingUseful = false;
} 
```

在您的 BroadcastReceiver 中，当警报响起时，您可以检查应用程序是否在做任何有用的事情。如果是，您只需忽略警报并等待下一个警报。如果它没有做任何有用的事情，则将用户注销。

```
public class MyAlarmReceiver extends BroadcastReceiver {
@Override
public void onReceive(Context context, Intent intent) {
        // Check if application is doing anything useful
        if (Globals.applicationIsBusyDoingSomethingUseful) {
            // Application is busy working, so ignore this alarm
        } else {
            // Log the user out or whatever...
        }
    }
} 
```

# c# - C#匿名方法/块？

> ID：10982292
> 
> 赞同：0
> 
> 时间：2012-06-11T14:40:17.930
> 
> 标签：c#, syntax, event-handling, mono, anonymous-function

我无法理解这段代码什么是“ViewDissapearing”？那么“添加”和“删除”块呢？

```
public event EventHandler ViewDisappearing;

public event EventHandler ViewDissapearing {
    add {
        ViewDisappearing += value;
    }
    remove {
        ViewDisappearing -= value;
    }
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-11T14:44:26.183

这样做是为了为同一事件提供两个名称。“ViewDissapearing”是该事件先前被错误命名的方式，并且订阅“ViewDissapearing”事件的所有现有代码改为重新路由以订阅新的正确拼写的“ViewDisappearing”事件。

该`add { ... }`块在有人调用时执行`ViewDissapearing += ...`，它只做`ViewDisappearing += that same ...`. 对于`remove { ... }`块和 也是如此`-=`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-11T14:46:09.323

这是为了允许其他代码附加到此事件。这与变量的获取/设置属性的想法相同。对于事件，它是添加/删除。与变量的属性一样，您可以直接使用变量，也可以使用属性。如果您想在添加事件时添加一些自定义代码，您通常会使用该属性。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-11T14:43:15.103

这是明确说明编译器通常为类中的事件自动生成的内容。

# java - JFrame 多种样式

> ID：10982297
> 
> 赞同：0
> 
> 时间：2012-06-11T14:40:33.553
> 
> 标签：java, swing, look-and-feel

有一些标准的方法来设置 JFame（按钮等）的样式，类似于使用 .Properties 文件进行国际化的方法？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-11T14:42:18.293

我相信您正在寻找[如何设置外观](http://docs.oracle.com/javase/tutorial/uiswing/lookandfeel/plaf.html)。

# javascript - 如何隐藏子窗口中的链接

> ID：10982300
> 
> 赞同：0
> 
> 时间：2012-06-11T14:40:38.913
> 
> 标签：javascript, prototypejs

我有一个 mypage1.aspx，它有一个打开弹出窗口的链接，这个弹出窗口有另一个链接打开第二个弹出窗口并关闭第一个弹出窗口。在打开的第二个弹出窗口中，就像一个向导一样，最后有一个输入，我有一个关闭窗口的功能，如下所示（在 Clients.js 中）

```
Clients.prototype.closeThisWindow = function() {
    window.close();
} 
```

当按钮被完美地点击窗口。但是现在我遇到了这个相同功能的问题，我需要在父页面中隐藏一个链接，但是

```
window.parent   (parent is always null)
window.opener   (opener is always null too) 
```

我在父级中定义了一个函数来隐藏链接，但不能调用该函数，因为 opener 始终为 null

我试过

```
Clients.prototype.closeThisWindow = function() {
    window.opener.hideLink();
    window.close();
} 
```

hideLink 是父页面中定义的函数，但 opener 始终为空，还有其他方法可以做到这一点吗？我不擅长 javascript，但在这里我工作的地方他们已经设计了这样的，我必须让它从 javascript 中工作。鉴于这种情况，我将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-11T15:30:50.493

在打开向导的功能中：

```
var result_from_open = open(/*your paramenters*/);
result_from_open.main_window = window.opener; 
```

在 Clients.js 中：

```
Clients.prototype.closeThisWindow = function() {
  //window.opener.hideLink();
  window.main_window.hideLink();
  window.close();
} 
```

# c# - 如何使用打开的 xml sdk 从 c# 更改页面方向

> ID：10982307
> 
> 赞同：6
> 
> 时间：2012-06-11T14:41:05.870
> 
> 标签：c#, openxml, export-to-word

我正在创建一个word文档

```
using (WordprocessingDocument myDoc = WordprocessingDocument.Create(@"c:\generate\export.docx", WordprocessingDocumentType.Document))          
{
    MainDocumentPart mainPart = myDoc.AddMainDocumentPart(); 
    mainPart.Document = new Document();               
    var body = new Body();               
    var p = new Paragraph(
        new ParagraphProperties(
            new Justification()
            {
                Val = JustificationValues.Center
            }
        ),
        new Run(new Text("test"))
    ); 
    body.Append(p);                
    mainPart.Document.Append(body);                
    // Save changes to the main document part.                 
    mainPart.Document.Save();
} 
```

如何将页面方向设置为横向？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-06-11T17:35:35.423

您必须创建一个新的部分属性。

```
WordprocessingDocument wd = someDoc;

wd.MainDocumentPart.Document.Body.Append(
    new Paragraph(
        new ParagraphProperties(
            new SectionProperties(
                new PageSize() { Width = (UInt32Value)15840U, Height = (UInt32Value)12240U, Orient = PageOrientationValues.Landscape },
                new PageMargin() { Top = 720, Right = Convert.ToUInt32(right * 1440.0), Bottom = 360, Left = Convert.ToUInt32(left * 1440.0), Header = (UInt32Value)450U, Footer = (UInt32Value)720U, Gutter = (UInt32Value)0U })))); 
```

其中left ==左边距和right ==右边距（双打）。

# java - 移动应用程序作为基于同一应用程序的两个版本

> ID：10982310
> 
> 赞同：1
> 
> 时间：2012-06-11T14:41:14.173
> 
> 标签：java, android, eclipse

我目前正在为手机（智能手机）开发一个应用程序。我的想法已经选择了以两个不同版本分发应用程序的路径。一种是免费的，但里面有添加和横幅，另一种是你必须付费购买的，没有添加或横幅。

所以基本上，这两个版本都基于相同的程序，但主要区别在于它们要么绑定广告，要么不绑定广告。这对我来说很清楚，我对这个想法没有任何疑问。但..

我发现为我的应用程序组织我的项目非常棘手，明确地说，我正在为 Android、Windows Phone 7 和 iOS 开发应用程序。目前我试图在 Eclipse 中组织我的 Android 项目，但我很困惑我应该以哪种方式保存项目。

我的意思是，如果我在 Eclipse 中有两个不同的项目，一个有广告，一个没有。如果我需要修复应用程序中的某些内容，我需要在两个项目中进行更改，并且我确信这不是处理这些事情的正确方法。因此，如果有人在让您的应用程序具有两个不同版本但具有相同功能（广告除外）方面有任何经验，请随时向我解释您通常如何处理此类问题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-11T14:56:23.580

对于我以前从事的项目，我使用了一个[库项目](http://developer.android.com/guide/developing/projects/index.html#LibraryProjects)。

基本上，您将所有代码、UI、资源等都放在库项目中。

然后创建两个 android 项目，其类路径类似于：com.yourapp.example com.yourapp.example.free

在这两个 android 项目中的每一个中，将您的库项目作为库包含并为您的应用的每个版本创建两个清单。这是一个非常简单的概述，但使用这种方法，您可以使用相同的代码库轻松创建应用程序的两个版本。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-11T14:59:00.870

通常我的大多数应用都在展示广告。所以我实现了一个应用程序的免费版本和另一个版本（没有任何功能），它就像一个解锁器。但您也可以实施应用内商店，用户可以在其中购买“无广告”等功能。

# python - cv2 和 BGR2YCrCb 不适用于 Python 绑定

> ID：10982313
> 
> 赞同：5
> 
> 时间：2012-06-11T14:41:20.280
> 
> 标签：python, opencv, image-processing

有人在使用 OpenCV 2.4 并将图像转换为 YCrCb 颜色空间时遇到问题吗？我正在使用 Python 绑定，但似乎找不到用于转换 BGR2YCrCb 的任何定义。以下是我一直在尝试的一些事情：

```
>>> import cv2
>>> cv2.COLOR_BGR2GRAY # works fine
6L
>>> cv2.COLOR_BGR2HSV # works fine
40L
>>> cv2.COLOR_BGR2YCrCb # now the trouble starts
Traceback (most recent call last):
File "<stdin>", line 1, in <module>
AttributeError: 'module' object has no attribute 'COLOR_BGR2YCrCb'
>>> cv2.COLOR_BGR2YCC
Traceback (most recent call last):
  File "<stdin>", line 1, in <module>
AttributeError: 'module' object has no attribute 'COLOR_BGR2YCC'
>>> 
```

有人知道如何在 cv2 中执行转换吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-11T16:01:39.023

在 Python 中，`COLOR_BGR2YCrCb`称为**`COLOR_BGR2YCR_CB`**.

看着`build/modules/python/pyopencv_generated_const_reg.h`透露：

```
97: PUBLISH2(COLOR_BGR2YCR_CB,cv::COLOR_BGR2YCrCb); 
```

# vim - vim：如何创建插入一段文本的键绑定？

> ID：10982314
> 
> 赞同：4
> 
> 时间：2012-06-11T14:41:23.907
> 
> 标签：vim

我想创建一个在代码中插入一段文本的键绑定，例如“hi”。

我尝试将此添加到我的 .vimrc 文件中：

```
map gp :hi 
```

但它不起作用..

任何想法？

哈维

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-11T14:46:24.690

此答案中显示了三种使用快捷方式插入文本的方法。第一个用于正常模式下的映射，第二个用于插入模式下的插入缩写，第三个用于命令模式下的缩写。

此外，您可以查看插件，例如[`snipmate`](https://github.com/msanders/snipmate.vim)

* * *

# 1.从普通模式插入文本并恢复正常

`:nnoremap gp iHi<Esc>`

* * *

# 2.将'hi'改为'hello'并保持插入模式

插入模式下的缩写是：

`:iab hi Hello` （测试它输入*hi*后跟`spacebar`）

如果您想插入月份列表：

`:iab mOn Jan Feb Mar Apr May Jun Jul Aug Sep Oct Nov Dec`

如果您想要包含 stdio.h 的快捷方式

`:iab inC #include <stdio.h>`

* * *

# 3\. 命令模式下的缩写

`:ab hi Hello`

一个实际的例子，例如`wsu`使用超级用户凭据保存当前文件。

`:ab wsu w !sudo tee %`

# ruby-on-rails - APNS 反馈返回随机设备令牌

> ID：10982317
> 
> 赞同：1
> 
> 时间：2012-06-11T14:41:29.073
> 
> 标签：ruby-on-rails, ios, ruby, apple-push-notifications, feedback

我在使用 APNS 的反馈服务时遇到了一些问题，每次调用该服务时，我只收到一个确切的令牌，而且每次都不一样！这些令牌是什么意思？我已经尝试过开发和生产模式，我也尝试过注册两个设备，卸载一个设备并调用反馈 API，但我仍然收到一个每次都不同的令牌。

我要连接的红宝石代码是：

```
 cert = File.read(options[:cert])
  ctx = OpenSSL::SSL::SSLContext.new
  ctx.key = OpenSSL::PKey::RSA.new(cert, options[:passphrase])
  ctx.cert = OpenSSL::X509::Certificate.new(cert)
  sock = TCPSocket.new(ENV['IOS_SERVER_APN_FEEDBACK'], ENV['IOS_PORT_APN_FEEDBACK'])

  ssl = OpenSSL::SSL::SSLSocket.new(sock, ctx)
  ssl.sync = true
  ssl.connect

  while line = sock.read(38) 
    time, length = line.unpack("Nn")
    puts line.unpack("x6H#{length << 1}").first
  end

  ssl.close
  sock.close 
```

每次我尝试执行此代码时，我都会收到以下输出：

```
 852a38d14b5e6df4168d3f7f41b38f6627b2cc0605bd53266f6d6fe8332738
  d88cd573c0a8f521ad10c8cab863575972c6a24140447f62073dc40e12df20
  225393b20754363b93712fb15f4d7a5891d93b27a5b5855fdccf88dcdc82a4
  (are three output of three different executions) 
```

但这不是已卸载设备的象征……可以是什么？

# ckeditor - CKFinder 不上传图片

> ID：10982322
> 
> 赞同：1
> 
> 时间：2012-06-11T14:41:51.673
> 
> 标签：ckeditor, codeigniter-2, ckfinder

我正在尝试将 CKFinder 与 CKEditor 集成到 CodeIgniter 应用程序中，使用它时看起来一切正常，但是当我转到文件夹时（默认 /ckfinder/userfiles 仍然设置在 config.php 文件中) 那里没有文件。

奇怪的是，如果我单击 CKFinder 对话框中的“在服务器上浏览”按钮，我确实看到了我“上传”的图像，但我不知道它们的物理位置，因为它们不在指定的文件夹中。

这是我的设置：

```
$(document).ready(function () {

    var config = {

        toolbar:[
            ['Bold', 'Italic', '-', 'NumberedList', 'BulletedList', '-', 'Undo', 'Redo', '-', 'SelectAll', 'Format'],
            ['UIColor'],
            ['Image', '-', 'Link', 'Source']
        ],

        filebrowserBrowseUrl:base_url + '/ckfinder/ckfinder.html',
        filebrowserImageBrowseUrl:base_url + '/ckfinder/ckfinder.html?Type=Images',
        filebrowserFlashBrowseUrl:base_url + '/ckfinder/ckfinder.html?Type=Flash',
        filebrowserUploadUrl:base_url + '/ckfinder/core/connector/php/connector.php?command=QuickUpload&type=Files',
        filebrowserImageUploadUrl:base_url + '/ckfinder/core/connector/php/connector.php?command=QuickUpload&type=Images',
        filebrowserFlashUploadUrl:base_url + '/ckfinder/core/connector/php/connector.php?command=QuickUpload&type=Flash'

    };
    config.format_tags = 'p;h2;h3;div'
    $('textarea.editor').ckeditor(config);

}); 
```

同样，只要查找器打开并让您选择文件等，一切正常，但文件只是没有显示在文件夹中。

知道我做错了什么吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-18T19:40:44.517

我在您的代码中没有看到上传功能

我粘贴我的代码，它工作正常。

对于 name='description' 和 id='description' 的 textarea

在我看来：

```
<script type='text/javascript'>

$(document).ready(function(){

    CKEDITOR.replace( 'description', {filebrowserUploadUrl : "/admin/ckeditor/"});

    $('#submit').click(function() {

        CKEDITOR.instances.description.updateElement();

        return true;

    });

});

</script> 
```

在我的管理控制器中，我有上传功能

```
public function ckeditor()
{
    $url = FCPATH.'public/uploads/ckeditor/'.time()."_".$_FILES['upload']['name'];

    $url_aux = substr($url, strlen(FCPATH) - 1);

    if (($_FILES['upload'] == "none") OR (empty($_FILES['upload']['name'])) )
    {
       $message = "No file uploaded.";
    }
    else if(file_exists(FCPATH.'public/uploads/ckeditor/'.$_FILES['upload']['name']))
    {
        $message = "File already exists";
    }
    else if ($_FILES['upload']["size"] == 0)
    {
       $message = "The file is of zero length.";
    }
    else if (($_FILES['upload']["type"] != "image/pjpeg") AND ($_FILES['upload']["type"] != "image/jpeg") AND ($_FILES['upload']["type"] != "image/png"))
    {
       $message = "The image must be in either JPG or PNG format. Please upload a JPG or PNG instead.";
    }
    else if (!is_uploaded_file($_FILES['upload']["tmp_name"]))
    {
       $message = "You may be attempting to hack our server. We're on to you; expect a knock on the door sometime soon.";
    }
    else 
    {
       $message = "Image uploaded correctly";

       move_uploaded_file($_FILES['upload']['tmp_name'], $url);
    }

    $funcNum = $_GET['CKEditorFuncNum'] ;
    $url = $url_aux;
    echo "<script type='text/javascript'>window.parent.CKEDITOR.tools.callFunction($funcNum, '$url', '$message');</script>";

} 
```

# php - PHP 脚本与应用程序通信的最佳方法是什么？

> ID：10982325
> 
> 赞同：1
> 
> 时间：2012-06-11T14:41:59.197
> 
> 标签：php, c++

我目前正在为基本上处理请求的linux服务器编写一个c++应用程序（我还没有编写处理请求的部分，因为我不确定最好的方法）。

基本上我有一个 PHP 页面，当被触发（客户端点击页面）需要与上述应用程序进行通信。

现在我不能在每次需要时都启动这个应用程序，因为它是一个相当复杂的应用程序，需要先加载数据，然后才能进行任何处理（因此它应该作为守护程序永远保持加载）。

您如何建议我让 PHP 页面向应用程序发出请求？我应该只使用 TCP/IP 的套接字编程吗？

提前致谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-11T14:51:50.183

您当然可以尝试使用原始套接字，但您不需要这样做。有些产品可以帮助您满足您的需求。

我建议你看看[Apache Thrift](http://thrift.apache.org/)。您可以轻松定义您的 C++ 部分提供哪些功能，并将其转换为等待来自 PHP 的请求的守护程序。当然还有一个 PHP 库，您可以使用它来发出这些请求。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-11T15:46:43.743

[ZeroMQ](http://www.zeromq.org/)是另一个可以帮助您在 PHP 代码和 C++ 守护程序之间构建通信层的项目。

有 C++、PHP 和许多其他语言的绑定。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-11T14:47:14.153

如果您熟悉 unix 套接字，您也可以使用 unix 域套接字：

[http://www.php.net/manual/en/transports.unix.php](http://www.php.net/manual/en/transports.unix.php)

# php - 忽略 createFromFormat 中的纳秒

> ID：10982327
> 
> 赞同：0
> 
> 时间：2012-06-11T14:42:02.203
> 
> 标签：php, datetime-format

我正在尝试从以下字符串创建 DateTime：

> 2012-02-16 00:45:54.441899

我尝试使用这种格式，但没有成功：

> Ymd H:i:s.*

我能做些什么？我不在乎点之后的部分。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-11T14:50:31.440

您忘记了格式的微秒部分：

```
$s = '2012-02-16 00:45:54.441899';
$d = DateTime::createFromFormat('Y-m-d H:i:s.u', $s);//format looks like your string
echo $d->format('Ymd');//output format can be whatever you like 
```

# ruby-on-rails - mongoid 中多个字段的总和

> ID：10982331
> 
> 赞同：0
> 
> 时间：2012-06-11T14:42:09.940
> 
> 标签：ruby-on-rails, mongodb, mongoid

让我们说

```
class User
  include Mongoid::Document

  field :sign_in_count,      :type => Integer, :default => 0
  field :some_other_count,   :type => Integer, :default => 0

end 
```

我需要得到一个包含两个字段总和的哈希所以结果将如下所示：

```
{ "sign_in_count" => 4, "some_other_count" => 12 } 
```

如果我做

```
sign_in_sum = User.sum("sign_in_count")
some_other_sum = User.sum("some_other_count") 
```

我看到两个 mongo 查询，但我需要一次完成。请帮忙。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-17T07:34:37.937

```
map = %Q{
   function() {
     emit( this.UserIdentifier, {
              num1: this.num1,
              num2: this.num2 } );
     }
   }

reduce = %Q{
  function(key, values) {
    var result = { num1: 0, num2: 0};
    values.forEach(function(value) {
      result.num1 += value.num1;
      result.num2 += value.num2;
    });
    return result;
  }
}

criteria = Data.where(:UserIdentifier => @user.id).map_reduce(map, reduce).out(replace: "mr-results") 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-11T18:27:12.197

不要认为这是在 Ruby 中嵌入 JavaScript，而是在应用程序代码中嵌入查询。这是许多其他语言/框架中相当标准的做法。这是一个可能有帮助的帖子：

[http://kylebanker.com/blog/2009/12/mongodb-map-reduce-basics/](http://kylebanker.com/blog/2009/12/mongodb-map-reduce-basics/)

# ruby-on-rails - Rails：验证 Paypal 帐户并提供操作

> ID：10982335
> 
> 赞同：0
> 
> 时间：2012-06-11T14:42:18.707
> 
> 标签：ruby-on-rails, paypal, verification

我的任务是将表格传输到 PayPal。我找到了这个[链接](https://cms.paypal.com/us/cgi-bin/?cmd=_render-content&content_ID=developer/e_howto_api_ACGetVerifiedStatusAPI)，但我不明白如何使用它。

此外，我需要提供持续连接 PayPal 帐户和我的网站以进行持续付款。

我应该学习 php 来做到这一点还是什么？

更正

正如我所说，第一步是验证 PayPal 帐户 - 将表单从我的站点传输到 PayPal。

我的网站将为其他网站提供一些 javascript 广告，我应该为点击付费。

你能帮我吗，现在什么时候任务更具体了？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-11T16:05:21.033

这只是冰山一角。

是的，您需要学习服务器端编程才能访问 PayPal API。

PayPal 有多种账户类型，例如网站支付标准、网站支付专业版、Payflow Gateway、PayPalExpress。

在实施之前，您需要确保 PayPal 批准您的商家帐户；他们有时会根据您的业务拒绝。

如果您发布想要您想做的事情，我们可以为您提供更好的建议。

祝你好运！

# c# - 在实体框架中使用代码优先 dbcontext 选择时出现 EntitySqlException

> ID：10982336
> 
> 赞同：0
> 
> 时间：2012-06-11T14:42:19.100
> 
> 标签：c#, .net, sql, entity-framework, exception-handling

### 什么时候

```
var codeFirstRepositor = new Donors();
var list = codeFirstRepositor.CampaignReps.Select(c => c).ToList(); 
```

*   当我在类构造函数中放置一个断点时，`CampaignRep`它根本没有被调用——异常似乎发生在对象实例化之前

### 语境

```
public class Donors : DbContext
{
    public Donors()
    {
        // Needed for WCF serialization to work
        Configuration.ProxyCreationEnabled = false;
    }
    public DbSet<CampaignRep> CampaignReps { get; set; }
} 
```

### EntitySqlException

`'CampaignsReps' is not a member of Transient.collection[MyNameSpace.Donor(Nullable=True,DefaultValue=)]'. To extract a property of a collection element, use a subquery to iterate over the collection. Near escaped identifier, line 1, column 10.`

*这个错误的原因是什么？*

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-11T14:55:18.000

删除 Select(c => c) 并重试。另外，为什么你的查询中有这个？

# python - 通过模型中的方法对 Django 模型进行排序

> ID：10982337
> 
> 赞同：7
> 
> 时间：2012-06-11T14:42:20.147
> 
> 标签：python, django, django-admin

所以，假设我有这样的模型：

```
class Foo(Model):
    name = CharField(max_length=200)
    def latest_comment(self):
        try:
            object = self.comment_set.latest()
            if object:
                return object.when_posted.date()
        except:
            return ""

class Comment(Model):
   when_posted = DateTimeField()
   text = TextField() 
```

然后这是modelAdmin：

```
class FooAdmin(ModelAdmin):
    list_display = ['name', 'latest_comment']
    ordering = ['latest_comment']

admin.site.register(Foo, FooAdmin) 
```

当我去管理网站说在 app.Foo 中找不到“latest_comment”时，它会抛出一个错误。将它放在 list_display 中可以正常工作。所以，我的问题是：有没有办法通过模型的方法对 list_display 中的模型进行排序？如果是这样，怎么办？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-11T21:12:33.820

我还没有测试过代码，但只是作为一个想法尝试通过使用注释函数覆盖 ModelAdmin 的查询集来对相关字段中的字段进行排序来实现这一点：

```
class FooAdmin(admin.ModelAdmin):
    def queryset(self, request):
        qs = super(FooAdmin, self).queryset(request)

        return qs.distinct() \
        .annotate(date_of_last_comment=Max('comment__date')) \
        .order_by('-date_of_last_comment') 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-11T14:50:07.617

排序是 SQL 级别的功能，您的数据库对模型上的方法一无所知。

但是，您可以通过将查询集转换为列表然后使用类似`sorted`. 见：[http ://wiki.python.org/moin/HowTo/Sorting/](http://wiki.python.org/moin/HowTo/Sorting/)

不过，对于它的价值，我怀疑排序列表是否可以在管理员中使用。我可能是错的，但我很确定 Django 需要它来保持查询集。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-11T14:50:38.993

从[django doc](https://docs.djangoproject.com/en/dev/ref/contrib/admin/#django.contrib.admin.ModelAdmin.get_ordering)，您也许可以定义自己的`get_ordering`方法。

# ssl - Lion 10.7.4 SSL 错误？

> ID：10982340
> 
> 赞同：0
> 
> 时间：2012-06-11T14:42:34.807
> 
> 标签：ssl, osx-lion

当 apache 测试 ssl 配置时，它会返回

> SSLCertificateFile: 文件 '/private/etc/apache2/server.crt\xe2\x80\x9d' 不存在或为空

无论服务器使用什么配置，它都会在 .crt 文件的末尾添加那些奇怪的“xe2”“x80”“x9d”引用......似乎没有什么可以修复它

请...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-11T15:49:35.603

听起来像是误插入了非 ASCII 双引号（”，参见“rdquo”）。

如果您看不到此字符，请尝试删除该行并再次键入，不带引号。

如果您使用引号，请确保您确实使用了与 ASCII 兼容的引号 ( `"`) 其他形式的引号。

# android - 图书馆项目需要 proguard.cfg 吗？

> ID：10982344
> 
> 赞同：34
> 
> 时间：2012-06-11T14:42:47.240
> 
> 标签：android, proguard, android-library

假设我需要对应用程序项目和它所依赖的库项目应用相同的规则，我是否需要将 proguard.cfg 的内容从应用程序复制到库项目？

换句话说，应用程序的 proguard.cfg 是否“接管”了它所依赖的所有库项目，还是我必须为每个库项目明确指定规则？

* * *

## 回答 #1

> 赞同：103
> 
> 时间：2012-06-12T07:59:12.290

库项目本身不运行 ProGuard，因此它们不使用任何配置。

应用程序项目混淆了整个代码库，包括任何引用的库，因此它们需要对应用程序代码和库代码进行适当的配置。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-11T15:41:22.347

答案似乎是“否”：Proguard 也会混淆[库中的](http://groups.google.com/group/android-developers/browse_thread/thread/86482d656a5894a5)代码。

但那是在 2010 年，我们非常清楚规范在不断变化，尤其是在 Android 开发工具方面。因此，如果出现更权威的答案，我会接受。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2019-03-04T13:26:15.530

1.  在库项目的 build.gradle 中，在 buildTypes 中添加行`consumerProguardFiles 'proguard-rules.pro'`：

    ```
    buildTypes {
    release {
        minifyEnabled true
        proguardFiles getDefaultProguardFile('proguard-android.txt'), 'proguard-rules.pro'
        consumerProguardFiles 'proguard-rules.pro'
    } 
    ```

    }

2.  在`build.gradle`根项目中，启用`minifyEnabled`. 图书馆 proguard 将工作。

# ios - 使用 Xcode 4.3.2 创建多视图应用程序的一般步骤是什么？

> ID：10982353
> 
> 赞同：1
> 
> 时间：2012-06-11T14:43:04.607
> 
> 标签：ios

我正在使用一本稍微过时的书来学习 iOS 开发。我在 Xcode 4.3.2 上找不到等效的文件类型来创建基于 Windows 的多视图应用程序。我应该在 4.3.2 上使用哪些文件类型？谢谢！

# jsf - 奇怪的 jsf ui:include 行为

> ID：10982354
> 
> 赞同：1
> 
> 时间：2012-06-11T14:43:05.993
> 
> 标签：jsf, xhtml, facelets

这是一个真正令人头疼的问题...我有许多命令链接，它们的样式被设置为按钮，因此为了便于维护，我编写了一个小 html 片段，我可以包含一些参数来呈现一个样式精美的命令关联。

现在这很好用，除非动作结果是改变视图，此时，“包含”版本坚决拒绝服从点击导航，我不知道为什么！如果操作导致验证错误，则会显示错误，因此肯定会调用该操作 - 我的日志确认了这一点，但是，如果没有验证错误，则原始版本（不使用包含）将导航到下一个页面很好，但使用包含的版本将无法导航。我尝试使用一个非常简单的“hello.xhtml”页面作为第二页，所以我知道它与新视图的内容没有任何关系。

为清楚起见进行了编辑：我在页面上使用了几个按钮，其中大部分只是修改当前页面的状态，这些都可以正常工作。只有当结果是改变视图时，“包含”版本才会出现问题。

我在 Portal Server 6.1/WAS 7.0 之上运行 JSF 1.2

我花了太长时间试图解决这个问题，所以给你们看看你有没有什么想法......

**更新**：为了节省浏览评论的麻烦，答案是我在导航规则中使用了 from-action，它与 commandLink 中使用的字符串匹配 - 所以导航处理程序被 `#{bean[action]}`视为 from-action 而不是`#{applicationPage.doContinue}`

一些代码。

我的按钮模板：

```
<ui:composition xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:f="http://java.sun.com/jsf/core"
    xmlns:h="http://java.sun.com/jsf/html" xmlns:ui="http://java.sun.com/jsf/facelets" xml:lang="en" lang="en">

    <ui:remove>
        Functional Button with arrow icon.
        Parameters:
        linkId           = The id for the commandLink.
        linkText         = The text to display on the button.
        linkTitle        = title text to display
        bean             = The bean name containing the action handler.
        action           = The action handler to call.
    </ui:remove>
    <div class="btn functionalButton">
        <h:commandLink id="#{linkId}" action="#{bean[action]}" title="#{linkTitle}" styleClass="functional">
                #{linkText}
                <span class="arrow icon" />
            <span class="tl" />
            <span class="tr" />
            <span class="bl" />
            <span class="br" />
        </h:commandLink>
    </div> 

</ui:composition> 
```

以及在页面上使用的示例：

```
<ui:include src="/WEB-INF/facelets/content/functionalButton.xhtml">
    <ui:param name="linkId" value="applicationSubmit" />
    <ui:param name="bean" value="#{applicationPage}" />
    <ui:param name="action" value="doContinue" />
    <ui:param name="linkText" value="#{msg['button_FF060_continue']} " />
</ui:include> 
```

此版本不会改变视图。

在使用包含之前，代码看起来像这样（应该解析并呈现为完全相同的 html），但是这个版本改变了视图就好了。

```
<div class="btn functionalButton">
    <h:commandLink id="applicationSubmit" styleClass="functional" action="#{applicationPage.doContinue}" title="#{msg['button_FF060_continue']}">
     #{msg['button_FF060_continue']} 
        <span class="arrow icon" id="arrow_continue" />
        <span class="tl" />
        <span class="tr" />
        <span class="bl" />
        <span class="br" />
    </h:commandLink>
</div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-11T14:59:59.363

**更新**`<from-action>`：当您`<navigation-case>`与操作关联的 in 仍然引用原始 EL 表达式时，可能会发生这种情况，如下所示：

```
<from-action>#{applicationPage.doContinue}</from-action> 
```

它没有被解释为实际的方法表达式，而是作为字符串文字，正是您在`action`属性中定义的那个。因此，当使用包含/标记文件时，您应该将其更改为在`action`属性中使用的文字 EL 表达式：

```
<from-action>#{bean[action]}</from-action> 
```

或者也许更好，只需将其删除。如果您没有多个动作，每个动作都可能返回相同的结果但需要不同的目的地，那么它就没有用了。我还建议仅使用`<to-view-id>`无扩展名作为结果值。这简化了将来向 JSF 2.0 的迁移，因为这已经隐含地完成了。

* * *

*保留以下原始答案以供将来参考*

我不确定，但可能 Facelets 1.x 根本不吃那个。这适用于 Facelets 2.x。我无法从经验中判断，因为我从来没有（ab）以这种方式使用过包含文件。

我建议将其用作标记文件。额外的好处是，这也会以更清晰的语法结束，并且可以在 IDE 自动完成中提供属性名称和描述。您需要做的就是创建一个`/META-INF/my.taglib.xml`

```
<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE facelet-taglib PUBLIC
    "-//Sun Microsystems, Inc.//DTD Facelet Taglib 1.0//EN"
    "http://java.sun.com/dtd/facelet-taglib_1_0.dtd">

<facelet-taglib>
    <namespace>http://example.com/jsf/facelets</namespace>
    <tag>
        <tag-name>functionalButton</tag-name>
        <source>/WEB-INF/facelets/content/functionalButton.xhtml</source>
    </tag>
</facelet-taglib> 
```

*（属性的定义是可选的，如果需要，将其添加为`<attribute>`inside `<tag>`，我还建议将这些文件放在某个`/tags`子文件夹中，例如`/WEB-INF/facelets/tags`）*

如果您`/WEB-INF/web.xml`按以下方式注册

```
<context-param>
    <param-name>facelets.LIBRARIES</param-name>
    <param-value>/META-INF/my.taglib.xml</param-value>
</context-param> 
```

然后你就可以按如下方式使用它：

```
xmlns:my="http://example.com/jsf/facelets"
...
<my:functionalButton linkId="applicationSubmit" bean="#{applicationPage}" 
    action="doContinue" linkText="#{msg['button_FF060_continue']} " /> 
```

# facebook - 加快网站 Facebook API 调用

> ID：10982357
> 
> 赞同：0
> 
> 时间：2012-06-11T14:43:09.073
> 
> 标签：facebook, facebook-graph-api, facebook-fql

我正在构建一个网站功能，FB 用户可以在其中搜索他们所有朋友的个人资料，以及他们朋友的朋友的个人资料。我正在使用 PHP SDK 进行图形调用。它工作得很好，但速度很慢。目前，我的代码循环遍历每个朋友并为该朋友的朋友（以下简称：“二级朋友”）进行 API 调用。我这样做是因为每个 API 调用都需要“作为”那个朋友，使用特定朋友的 access_token，否则我无法访问二级朋友的个人资料。到目前为止有意义吗？

我试图弄清楚我可以做些什么来改善加载时间。我开始阅读 FQL，因为我听说它比图表更快。我也在考虑尝试使用 javascript/AJAX 并行进行一些调用。我真的可以就解决这个问题的最佳方法提出一些建议。提前致谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-11T15:18:23.163

看看[批处理请求](https://developers.facebook.com/docs/reference/api/batch/)。

# ios - xCode 4.3 静态库跨项目参考

> ID：10982358
> 
> 赞同：2
> 
> 时间：2012-06-11T14:43:09.130
> 
> 标签：ios, xcode4, static, shared-libraries

我在使用自己的静态库时遇到问题。

这是我所做的：

**静态库**

1.）我用“可可静态库”模板创建了一个新项目

2.) 我在该项目中添加了一个简单的测试文件“LibraryTest”

3.) 我在“LibraryTest”中定义了一个公共函数“testFunction”

4.) 在“Targets”->“Build Phases”->“Copy Headers”下，我将 LibraryTest.h 添加到“public”

5.）我建立了库，在文件夹“产品”中，以前红色标记的库文件变成了黑色。所以我想一切都很好

**新项目**

1.) 我用“空应用程序”模板创建了一个新项目

2.）我将我的静态库拖到新项目中

3.）我正在使用#import“LibraryTest.h”将“LibraryTest.h”导入我的 AppDelegate。导入自动完成

4.）不幸的是，如果我尝试编译它说，找不到“LibraryTest.h”，因此没有构建。

在这里，您可以在 xCode 中看到我的“新建项目”项目浏览器窗口的[快照](http://imgur.com/nvpSw)。库“libJRL_jumero_iOS_library”仍然是红色的。所以我猜找不到图书馆，这可能是原因。但我不知道为什么它没有构建。

有人知道出了什么问题吗？

问候，扬

**编辑 11.06.2012：**

如果我使用“@class LibraryTest;”，我可以编译并调用该函数，例如：

LibraryTest *libraryTest = [[LibraryTest alloc] init]; [库测试测试功能];

但我收到警告：Receiver LibraryTest.h 是一个转发类，相应的接口可能不存在。找不到实例方法 -testFunction。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-13T13:48:02.293

您还必须在项目中拖动 h 文件。通常在构建静态库时，您会提供 .a 文件以及公共 h 文件。所有这些包都必须导入到您的项目中，否则您将无法看到接口和方法声明。

# sql-server-2008 - 在 SQL Server 中远程调用表值函数的解决方法有更多问题

> ID：10982360
> 
> 赞同：13
> 
> 时间：2012-06-11T14:43:13.847
> 
> 标签：sql-server-2008, permissions, linked-server, openquery, sp-executesql

我有一个带有一组参数的查询，这些参数需要使用不同的参数多次运行，所以我将它包装在一个表值函数中。

该表值函数需要从远程服务器调用。不幸的是，链接服务器上的调用失败并出现错误：

```
Msg 4122, Level 16, State 1, Line 29
Remote table-valued function calls are not allowed. 
```

Microsoft 承认“远程调用表值函数”是 SQL Server 2008 中遗漏的一个功能。请参阅：[http ://connect.microsoft.com/SQLServer/feedback/details/276758/remote-table-valued-function -不允许通话](http://connect.microsoft.com/SQLServer/feedback/details/276758/remote-table-valued-function-calls-are-not-allowed)

我发现了一种使用 OPENQUERY 语法的解决方法，它允许查询在远程服务器上本地运行，然后返回结果集。请参阅：[http ://social.msdn.microsoft.com/Forums/en/transactsql/thread/7a6e4aa1-630b-4ad5-aee5-15139987adbd](http://social.msdn.microsoft.com/Forums/en/transactsql/thread/7a6e4aa1-630b-4ad5-aee5-15139987adbd)

不幸的是，这个解决方法需要一个解决方法，因为它需要一个字符串作为参数，这意味着你不能使用 OPENQUERY 语法传递一个变量，你甚至不能在其中连接一个字符串，就像你想包含你的变量一样想要传递给远程表值函数。变通方法的变通方法是使用动态 SQL 显式构建 OPENQUERY 查询，确保将正常字符串传递给它。请参阅：[http ://social.msdn.microsoft.com/Forums/en-US/transactsql/thread/0847ad24-0dfe-4ae1-9788-5516c7830f40/](http://social.msdn.microsoft.com/Forums/en-US/transactsql/thread/0847ad24-0dfe-4ae1-9788-5516c7830f40/)

然而，另一个问题由此产生。即使确保所有引号、双引号和四引号都正确嵌入，以便整个事情可以通过 exec sp_executesql 传递，仍然存在问题：

当查询最终调用表值函数时，我收到错误：

```
OLE DB provider "SQLNCLI10" for linked server "MY_REMOTE_SERVER_NAME" returned message "Deferred prepare could not be completed.".
Msg 7416, Level 16, State 1, Procedure MyTableValuedFunctionName, Line 22
Access to the remote server is denied because no login-mapping exists. 
```

我不确定为什么会收到此错误，因为我的用户名存在映射，如果我只是用实际表替换表值函数，它会很好地返回结果。OPENQUERY 语句会出现问题，无论它是否使用 sp_executesql 执行，正如我所说，它仅在调用表值函数时发生。

任何想法如何解决这个问题？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-06-11T14:51:29.947

您是否尝试过这种变体 - 基本上您将调用函数推送到远程机器上本地发生：

```
EXEC REMOTE_SERVER_NAME.db_name..sp_executesql N'SELECT * 
  FROM dbo.MyTableValuedFunctionName();'; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-06-06T21:30:06.290

如果您无法通过调用 EXEC 来解决它（因为您正在从另一个函数调用此函数，或者您正在尝试执行诸如 INSERT EXEC 之类的操作但您不能嵌套它等），这里是一个 workarround为我解决了这个问题：

您可以在本地服务器中创建一个与远程函数运行相同查询的函数（假设您知道远程函数的实现），因为您可以毫无问题地访问表和“静态调用函数”（通过 openquery）。

例如，如果远程功能是这样的：

```
CREATE FUNCTION dbo.[remote_function] (@param1 varchar(200))
RETURNS TABLE AS RETURN 
( SELECT col1, col2, col3 FROM [remote_db].[dbo].[remote_table] where col1 = @param1)
GO 
```

您可以在本地服务器中创建一个函数：

```
CREATE FUNCTION dbo.[local_function] (@param1 varchar(200))
RETURNS TABLE AS RETURN 
( SELECT col1, col2, col3 FROM [remote_server].[remote_db].[dbo].[remote_table] where col1 = @param1)
GO 
```

然后根据需要查询您的新功能...

```
SELECT col1, col2, col3 FROM dbo.local_function(@param1);
GO 
```

它应该没有问题。

# java - 构造一个从字节数组中读取的 java.io.File

> ID：10982366
> 
> 赞同：3
> 
> 时间：2012-06-11T14:43:20.580
> 
> 标签：java

我正在使用一个需要 java.io.File 作为输入的 API，但我只想向 API 发送一个字节数组。有没有办法创建一个从我的字节数组而不是磁盘读取的文件对象？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-11T14:46:40.867

A`File`什么都不读。它表示操作系统（或虚拟文件等）中的文件（或目录）对象。要从中读取，您必须创建 Readers 或 Streams，API 将自行完成。如果 API 没有提供传入 Reader 或 InputStream 的方法，那么您就不走运了。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-11T15:39:13.627

你可以打开一个临时文件：[open temp file in java](https://stackoverflow.com/questions/876816/open-temp-file-in-java)

然后，如果将您的 byte[] 并通过一些 OutputStream/Writer 将其全部写入临时文件，您应该拥有您需要的东西。然后你可以传递文件而不在磁盘上创建它。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-11T14:47:49.333

Java 使用`InputStream`（或`OutpusStream`）方法。使用 a`java.io.File`已经强制执行太多，那么`File`类就不是您可以读取或写入的任何东西：它只是代表文件系统中的一个条目（然后您可以从中获取其关联的输入和输出流）。

所以你应该有一个接受泛型的方法`InputStream`。如果 API 只支持一个`File`对象，那么它显然设计得很糟糕（或者您正试图以不允许的方式使用它们）。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-11T14:48:47.583

```
String strFilePath = "filePath";
byte[] writeBytes = ...;
try {
  FileOutputStream fos = new FileOutputStream(strFilePath);
  fos.write(byteArray);
  fos.close();
} catch(FileNotFoundException ex) {
  // handle FileNotFoundException here
} catch(IOException ioe) {
  // handle IOException here
} 
```

编辑：通常我不喜欢仅仅提供代码，但是这整个流媒体的东西曾经让我很困惑，所以这里有一个解决方案；）。

EDIT2：好的，我刚刚意识到，这正是 OP 不想做的事情。所以这个答案并不是很有用......

# java - PlayFramework 如何让代码更改在运行时出现？

> ID：10982369
> 
> 赞同：2
> 
> 时间：2012-06-11T14:43:39.510
> 
> 标签：java, spring, tomcat, playframework, playframework-2.0

PlayFramework 如何使代码更改在运行时出现而无需重新启动和重新部署？它在内部使用tomcat吗？如果没有，我是否可以将我的 Spring 应用程序放在它使用的服务器容器之上，并获得运行时更改的好处。

注意：我知道在技术上也可以使用 Tomcat 来做到这一点，但是，根据我的经验，它有很多错误，并且不能一直工作。有时，它甚至需要重新加载整个应用程序上下文（大约 16 秒），这不切实际。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-11T15:34:54.970

正如 Zenklys 指出的那样，Play 的工作原理是检查 java 文件的最后修改日期，并将它们与运行时生成的 .class 文件交叉引用。如果它发现某些东西发生了变化，那么它会在运行时重新编译它们。

在 Play 1.x 中 - 使用 eclipse jdt 编译器 (org.eclipse.jdt.internal.compiler.Compiler) 完成重新编译。如果您想查看 Play 1.x 中的代码，只需查看以下类 - [https://github.com/playframework/play/blob/master/framework/src/play/classloading/ApplicationCompiler.java](https://github.com/playframework/play/blob/master/framework/src/play/classloading/ApplicationCompiler.java)

在 Play 2.x 中，Play 似乎是通过与 SBT 工具互连来实现的。看看这个 - [https://github.com/playframework/Play20/blob/master/framework/src/play/src/main/scala/play/core/system/ApplicationProvider.scala](https://github.com/playframework/Play20/blob/master/framework/src/play/src/main/scala/play/core/system/ApplicationProvider.scala)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-11T15:08:03.570

首先，**这仅在开发模式下运行时才成立。**在 prod 模式下，不再检测到更改。

据我了解，这是因为应用程序不是从 .class 文件而是从 .java 文件运行的。通过观察这些文件的最后修改日期，Play 可以检测何时重新/编译应用程序。

您正在寻找类似[JRebel](http://zeroturnaround.com/software/jrebel/)的东西。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-12T23:20:33.243

Play! doesn't use Tomcat or any other Servlet container. It runs on top of Netty, so it doesn't really follow the Java EE spec. However, you can assemble the app into war package to be deployed on Jetty/Tomcat/you-name-it-server.

I might be wrong in this, but Play! probably makes use of throwaway classloaders in order to load the new class definitions and this is why its reloading mechanism is better than regular hotswap.

* * *

## 回答 #4

> 赞同：-2
> 
> 时间：2012-06-11T15:21:25.200

如果您在带有 JBoss 的 Eclipse 中运行，您可以将 JBoss 部署目录指向您的本地项目。只要您不更改注入或方法签名，您就可以更改代码，并且大约 75% 的时间可以识别它们。由于 JBoss 使用 Tomcat 作为 servlet 容器，或许 Tomcat 也可以用同样的方式设置。

[Jrebel](http://zeroturnaround.com/software/jrebel/)也是专门为此目的而构建的。

# android - Android的仪器测试-方向更改后如何接收新活动？

> ID：10982370
> 
> 赞同：5
> 
> 时间：2012-06-11T14:43:39.680
> 
> 标签：android, unit-testing, instrumentation, android-testing

我正在尝试测试新创建的活动（在方向更改后）是否正确重新初始化。下面的代码显示从 getActivity() 返回的活动是在 setUp() 中构造的活动，而不是新创建的活动。

测试：

```
public class MyActivityTest extends ActivityInstrumentationTestCase2<MyActivity>{
 private static final String TAG = "RAMPS";
 private MyActivity mActivity;

 public MyActivityTest() {
    super("com.ramps", MyActivity.class);       
 }

 protected void setUp() throws Exception {
     super.setUp();
     mActivity = getActivity();
     Log.v(TAG, "setUp; activity=" + mActivity);
 }

public void testOrienationChange(){
     mActivity.setRequestedOrientation(ActivityInfo.SCREEN_ORIENTATION_LANDSCAPE);
     getInstrumentation().waitForIdleSync();
     MyActivity newActivity = getActivity(); //should be new, but it's not
     Log.v(TAG, "testOrienationChange; activity=" + newActivity);       
 }
} 
```

活动：

```
public class MyActivity extends Activity {
    private static final String TAG = "RAMPS";  

 public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    Log.v(TAG, "onCreate; activity=" + this);
    setContentView(new TextView(this));     
 }
    //...rest of stuff like onSaveInstanceState() etc.
} 
```

和日志：

```
06-11 14:16:52.431: V/RAMPS(367): onCreate; activity=MyActivity@44eb8690
06-11 14:16:52.891: V/RAMPS(367): setUp; activity=MyActivity@44eb8690
06-11 14:16:52.971: V/RAMPS(367): onCreate; activity=MyActivity@44ee5178
06-11 14:16:53.131: V/RAMPS(367): testOrienationChange; activity=MyActivity@44eb8690 
```

如前所述，日志显示确实创建了新活动（MyActivity@44ee5178），但 getActivity() 返回在 setUp() 中创建的旧活动（MyActivity@44eb8690）。是否可以访问新创建的？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-11T19:04:31.597

好的，我想我终于设法解决了 - 使用[机器人](http://robotium.org)框架。我附上解决方案，以防有人遇到同样的问题。

测试：

```
public class MyActivityTest extends ActivityInstrumentationTestCase2<MyActivity>{

private static final String TAG = "RAMPS";
private MyActivity mActivity;
private Solo mSolo;

public MyActivityTest() {
    super("com.ramps", MyActivity.class);

}

@Override
protected void setUp() throws Exception {
    super.setUp();
    mActivity = getActivity();
    mSolo = new Solo(getInstrumentation(), getActivity());
    Log.v(TAG, "setUp; activity=" + mActivity);
}

public void testOrienationChange(){     
    mSolo.setActivityOrientation(Solo.LANDSCAPE);
    getInstrumentation().waitForIdleSync();
    MyActivity newActivity = getActivity(); //should be new, but it's not
    Activity newActivity2 = mSolo.getCurrentActivity(); //this will return new activity
    Log.v(TAG, "testOrienationChange; activity=" + newActivity);
    Log.v(TAG, "testOrienationChange; activity2=" + newActivity2);
} 
```

}

并记录消息 - 用于确认：

```
06-11 18:47:02.631: V/RAMPS(716): onCreate; activity=MyActivity@44c326a8
06-11 18:47:03.061: V/RAMPS(716): setUp; activity=MyActivity@44c326a8
06-11 18:47:03.781: V/RAMPS(716): onCreate; activity=MyActivity@44c481e0
06-11 18:47:04.482: V/RAMPS(716): testOrienationChange; activity=MyActivity@44c326a8
06-11 18:47:04.482: V/RAMPS(716): testOrienationChange; activity2=MyActivity@44c481e0 
```

如您所见，从 mSolo.getCurrentActivity() 返回的活动与方向更改后创建的活动相同。我真的推荐 Robotium - Jayway 的另一个很棒的代码！

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-12-13T15:50:38.510

我在 UI 测试中遇到了同样的问题。我不使用 Robotium，但我创建了一个新的基础测试类，`getActivity()`它总是返回当前活动。这个想法是添加一个`ActivityMonitor`之前的方向更改，并在监视器等待时更新当前活动：

```
public class UiTest<T extends Activity> extends ActivityInstrumentationTestCase2<T> {

private final Class<T> activityClass;
protected T activity;

public UiTest(Class<T> activityClass) {
  super(activityClass);
  this.activityClass = activityClass;
}

@Override
protected void setUp() throws Exception {
  super.setUp();
  setActivityInitialTouchMode(false);  // Depends on your needs.
  activity = super.getActivity();
  activity.setRequestedOrientation(ActivityInfo.SCREEN_ORIENTATION_PORTRAIT);
}

/**
 * Rotates the test device and updates current activity.
 */
protected final void rotate() {
  int nextOrientation =
      activity.getRequestedOrientation() == ActivityInfo.SCREEN_ORIENTATION_PORTRAIT
          ? ActivityInfo.SCREEN_ORIENTATION_LANDSCAPE
          : ActivityInfo.SCREEN_ORIENTATION_PORTRAIT;
  Instrumentation.ActivityMonitor monitor =
      new Instrumentation.ActivityMonitor(activityClass.getName(), null, false);
  getInstrumentation().addMonitor(monitor);
  activity.setRequestedOrientation(nextOrientation);
  getInstrumentation().waitForIdleSync();
  this.activity = (T) getInstrumentation().waitForMonitor(monitor);
}

@Override
public T getActivity() {
  return activity;
} 
```

当然，如果活动类在测试期间发生变化或者方向通过其他方式而不是`rotate()`方法发生变化，这将不起作用。我希望这对某人有所帮助。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-09-07T11:17:45.867

代替

```
 MyActivity newActivity = getActivity(); //should be new, but it's not 
```

尝试

```
MyActivity newActivity = instrumentation.startActivitySync(intent); 
```

我认为这种方法可能对您有所帮助

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-03-25T11:57:10.073

接受@Smok 的回答并将其更新为始终轮换：

```
@SuppressWarnings("unchecked") // it's fine
public static <T extends Activity> T rotate(ActivityInstrumentationTestCase2<T> testCase) {
    T activity = testCase.getActivity();
    int orientation = activity.getWindowManager().getDefaultDisplay().getRotation();
    int nextOrientation = orientation == Configuration.ORIENTATION_LANDSCAPE ? ActivityInfo.SCREEN_ORIENTATION_PORTRAIT : ActivityInfo.SCREEN_ORIENTATION_LANDSCAPE;
    Instrumentation.ActivityMonitor monitor = new Instrumentation.ActivityMonitor(activity.getClass().getName(), null, false);
    testCase.getInstrumentation().addMonitor(monitor);
    activity.setRequestedOrientation(nextOrientation);
    testCase.getInstrumentation().waitForIdleSync();
    return (T) testCase.getInstrumentation().waitForMonitor(monitor);
} 
```

这解决了方向返回的问题`UNSPECIFIED`

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-02-11T12:20:25.230

这解决了我的问题，仅使用 Android 测试框架：

```
 mActivity.setRequestedOrientation(ActivityInfo.SCREEN_ORIENTATION_LANDSCAPE);
    mActivity.finish();
    setActivity(null);
    mActivity = getActivity();
    getInstrumentation().waitForIdleSync(); 
```

AFAIK，`getActivity()`如果当前活动为空，则确实会创建一个新活动，这是通过将其设置为`setActivity(null)`. 此外，新活动的方向由 设置`Activity.setRequestedOrientation(int)`。

如果您需要在方向更改时检查状态是否正确保存，您应该`getInstrumentation().callActivityOnCreate(mActivity, Bundle)`从 UI 线程调用。

# java - 拦截grails中的Spring安全获取一些请求参数

> ID：10982372
> 
> 赞同：2
> 
> 时间：2012-06-11T14:43:46.213
> 
> 标签：java, grails, internationalization, request

我想为用户提供在登录时选择应用程序语言的可能性。但是由于我们使用的是spring security，我真的不确定如何从请求参数中获取选定的语言参数？

有没有办法在不修改流程本身的情况下拦截 Spring Security 身份验证过程（因为我找到了一些自定义身份验证的示例，但我目前不需要）？

或者在进一步重定向之前检索请求参数的最佳做法是什么？谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-11T15:52:24.273

您可以在以下位置设置自己的（而不是默认的）身份验证成功处理程序`resources.groovy`：

```
authenticationSuccessHandler(MyAuthenticationSuccessHandler) {
} 
```

在哪里`MyAuthenticationSuccessHandler`实现的类`AuthenticationSuccessHandler`，或者更好地扩展`AjaxAwareAuthenticationSuccessHandler`默认使用的类，例如：

```
authenticationSuccessHandler(AjaxAwareAuthenticationSuccessHandler) {
    requestCache = ref('requestCache')
    defaultTargetUrl = conf.successHandler.defaultTargetUrl // '/'
    alwaysUseDefaultTargetUrl = conf.successHandler.alwaysUseDefault // false
    targetUrlParameter = conf.successHandler.targetUrlParameter // 'spring-security-redirect'
    ajaxSuccessUrl = conf.successHandler.ajaxSuccessUrl // '/login/ajaxSuccess'
    useReferer = conf.successHandler.useReferer // false
    redirectStrategy = ref('redirectStrategy')
} 
```

此类可以在以下位置访问实际请求：

```
void onAuthenticationSuccess(HttpServletRequest request, HttpServletResponse response,
        Authentication authentication) throws IOException, ServletException; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-11T15:42:48.940

Grails 已经内置支持在独立于 spring-security 的每个请求上更改用户的语言。如果您`lang`在任何请求上调用了一个参数，它将被拦截并用于设置用户的语言环境。

例如，您可以在提交的登录表单上放置一个输入元素，`lang=XX`其中 XX 是两个字符的语言代码或语言/国家/地区组合，如`en_GB`. Grails 将自动更新与该会话关联的语言环境。请注意，这将覆盖`Accept-Language`用户浏览器可能已经发送的标头。

要手动更新语言环境，您可以执行以下操作：

```
import org.springframework.web.servlet.support.RequestContextUtils
import org.springframework.beans.propertyeditors.LocaleEditor

def localeResolver = RequestContextUtils.getLocaleResolver(request)
def localeEditor = new LocaleEditor()
localeEditor.setAsText(params.lang)
localeResolver?.setLocale(request, response, localeEditor.value) 
```

# javascript - 将 defer 属性添加到 javascript_include_tag Rails

> ID：10982375
> 
> 赞同：39
> 
> 时间：2012-06-11T14:43:52.787
> 
> 标签：javascript, ruby-on-rails, ruby-on-rails-3, ruby-on-rails-3.1, deferred-execution

有没有办法使用Rails`defer`中的帮助程序轻松添加属性？`javascript_include_tag`

即，是否有一些简单的方法可以转动

`<%= javascript_include_tag "blah.js" %>`

进入

`<script defer src="blah.js"></script>`

* * *

## 回答 #1

> 赞同：50
> 
> 时间：2012-06-11T15:21:27.067

```
<%= javascript_include_tag "blah.js", :defer => "defer" %> 
```

这将使您（正在开发中）：

```
<script defer="defer" src="/assets/blah.js" type="text/javascript"></script> 
```

* * *

## 回答 #2

> 赞同：31
> 
> 时间：2017-01-12T23:48:34.643

你也可以做

```
<%= javascript_include_tag "blah.js", defer: true %> 
```

这与其他开关更一致。

# asp.net-mvc - MVC3 我的程序在错误的位置寻找视图

> ID：10982384
> 
> 赞同：0
> 
> 时间：2012-06-11T14:44:33.840
> 
> 标签：asp.net-mvc, asp.net-mvc-3

我创建了一个项目，并在其中努力工作并创建了许多模型、视图和控制器。一切都很好。我决定重命名我的一个模型，并相应地重命名我的控制器并认为它会继续工作得很好。这是因为我想在以后更合适的地方使用原始名称。例如。

**旧名称：**
MyOldModel
MyOldController
MyOldView

**被重命名为：**
MyNewModel
MyNewController
MyNewView

现在一切仍然很好，当我单击指向我的新视图的链接时，我的程序会查找并尝试显示显然不存在的 MyOldView。但是，当我手动输入 /MyNewView 时，它可以工作。

如何更改我的控制器以在 MyNewView 文件夹中查找索引，而不是在 MyOldView 文件夹中查找索引。

我什至尝试删除并重新创建控制器无济于事。

提前感谢您的帮助。

编辑：对于那些这么快回复的人需要注意的是：所采取的确切步骤是：
1\. 将模型文件从 MyOldModel.cs
重命名为 MyNewModel.cs 2\. 将控制器文件从 MyOldController.cs 重命名为 MyNewController。 cs
3\. 将视图上的文件夹（仅包含 Index.cshtml）
从 MyOldView 重命名为 MyNewView
4\. 在每一步，Visual Studio 都会提示我将所有引用重命名为要重命名的对象，我接受了（说是）。所以类名都得到了正确更新。至少从我所见，所有其他参考也是如此。

根据这里所说的，它应该可以工作。

我只是重命名了

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-11T15:09:41.033

根据操作员的要求，我的评论作为答案：

检查您的 _Layout 是否也通过按钮单击指向正确的视图，否则当您用新的控制器/视图替换/重命名它们时，它仍然会搜索旧的控制器/视图，很高兴能提供帮助！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-11T14:46:55.657

您是否确保重命名了 Controller 文件中的类，而不仅仅是文件本身？即它包含

```
public class MyNewController : Controller {
    ....
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-11T14:47:46.693

假设您在以下位置有一个 Index 操作`MyNewController`：

```
public class MyNewController: Controller
{
    public ActionResult Index()
    {
        return View();
    }
} 
```

现在确保您已将视图放置在`~/Views/MyNew/Index.cshtml`. 这是既定的惯例。请注意，如果您的控制器类被调用`MyNewController`，则必须调用该文件夹`MyNew`。另外不要忘记在重命名控制器类后重新编译您的 Web 应用程序。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-11T14:50:37.607

您是否对路由列表进行了必要的修改（在 Global.asax 文件 i Application_Start() 事件中注册）：

```
public static void RegisterRoutes(RouteCollection routes)
        {
            routes.IgnoreRoute("{resource}.axd/{*pathInfo}");

            routes.MapRoute(
                "Default", // Route name
                "{controller}/{action}/{id}", // URL with parameters
                new { controller = "Home", action = "Index", id = UrlParameter.Optional } // Parameter defaults
            );

        } 
```

# jquery - jQuery - 如何使用 jQuery Validation 插件验证出生日期？

> ID：10982386
> 
> 赞同：3
> 
> 时间：2012-06-11T14:44:39.597
> 
> 标签：jquery, date, jquery-validate

我想使用 jQuery Validation 插件验证输入（出生日期），但它必须采用“dd/mm/yyyy”格式，并且当年份超过 2002 年时也不能验证。

因此，当日期格式为“dd/mm/yyyy”且年份超过“2002”时，日期有效

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-12T07:58:58.563

我找到了答案 :D 就是这样。谢谢大家

```
$.validator.addMethod("birth", function (value, element) {
        var year = value.split('/');
        if ( value.match(/^\d\d?\/\d\d?\/\d\d\d\d$/) && parseInt(year[2]) <= 2002 )
            return true;
        else
            return false;
    }); 
```

# matlab - 使用 polyfit 进行垂直线拟合

> ID：10982387
> 
> 赞同：10
> 
> 时间：2012-06-11T14:44:39.663
> 
> 标签：matlab, numerical-methods, curve-fitting, polynomial-math

这只是一个基本问题。我正在拟合线以使用`polyfit`. 在某些情况下，我的散点具有相同`polyfit`的 X 值并且无法拟合线。必须有一些东西可以处理这种情况。毕竟，它只是一个适合的线条。

我可以尝试交换 X 和 Y，然后执行一条线。任何更简单的方法，因为我有很多散点集并且想要一个通用的方法来检查线条。

主要目标是找到合适的线并丢弃非线性特征。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-11T14:50:59.830

首先，这是由于您使用的拟合方法造成的。执行时`polyfit`，您正在使用最小二乘法计算`Y`与线的距离。

[![](../Images/bf9d30bf84a56ef617adcc2eaced842f.png)](https://i.stack.imgur.com/RtdXb.gif)
[（来源：[une.edu.au](http://www.une.edu.au/WebStat/unit_materials/c4_descriptive_statistics/image23.gif)）]

显然，它不适用于垂直线。顺便说一句，即使你有接近垂直线的东西，你也可能会得到数值不稳定的结果。

有2个解决方案：

1.  如你所说，交换 x 和 y，如果你知道这条线几乎是垂直的。然后，计算逆线性函数。
2.  在与线的垂直距离上使用最小二乘法，而不是垂直（见下图）（更多解释在[这里](http://mathworld.wolfram.com/LeastSquaresFittingPerpendicularOffsets.html)）

[![](../Images/cab85fde1b7070e9d73dd6f0b05c8c59.png)](https://i.stack.imgur.com/fqwt4.gif)
[（来自 MathWorld - Wolfram 网络资源：[wolfram.com](http://mathworld.wolfram.com/images/eps-gif/LeastSquaresOffsets_1000.gif)）]

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-11T14:52:45.100

Polyfit 使用线性普通最小二乘近似并且不允许重复横坐标，因为生成的 Vandermonde 矩阵将是秩不足的。我建议尝试找到更具统计性质的东西。如果您想研究 Andreys 方法，它通常称为 Total minimum squares 或 Orthogonal distance regression [http://en.wikipedia.org/wiki/Total_least_squares](http://en.wikipedia.org/wiki/Total_least_squares)

我还试探性地提出了检测何时同时具有 x 值的可能性，然后围绕原点旋转数据，拟合线，然后将线转换回来。我不能说这会表现得多么糟糕，只有你可以根据你的准确性要求来决定它是否是一个选项。

# sql - SQL COUNT - 具有两个具有不同 WHERE 子句的 COUNT 列的输出表

> ID：10982398
> 
> 赞同：4
> 
> 时间：2012-06-11T14:45:37.837
> 
> 标签：sql, oracle, count, oracle-apex

我需要在 Oracle APEX 中生成类似于以下示例的报告：

```
 PROJECT     OPEN_ISSUE_COUNT     CLOSED_ISSUE_COUNT
 W-1         3                    1
 X-2         1                    2
 Y-3         5                    3
 Z-4         2                    1 
```

where`OPEN_ISSUE_COUNT`和`CLOSED_ISSUE_COUNT`是由`SQL COUNT`语句生成的。被查询的表如下所示：

```
 ISSUE_#     ISSUE_STATUS     ASSOCIATED_PROJECT
 1A          OPEN             W-1
 1B          OPEN             W-1
 1C          OPEN             W-1
 2A          CLOSED           W-1
 2B          OPEN             X-2
 2C          CLOSED           X-2
 3A          CLOSED           X-2 
 etc... 
```

所以在一个查询中，我需要分别计算`OPEN_ISSUE_COUNT`和`CLOSED_ISSUE_COUNT`where`ISSUS_STATUS = 'OPEN'`和`ISSUS_STATUS = 'CLOSED'`和`GROUP BY` `ASSOCIATED_PROJECT`。

那有意义吗？显然，对于这两种状态之一，我可以轻松地做到这一点，但是对于我在这里描述的内容，我无法提出任何可行的解决方案。我在这里和其他地方在线查看了一些东西，但没有看到类似的东西。让我知道你们的想法。谢谢！

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-11T14:47:48.207

由于`count()`只计算非空值，这应该有效：

```
select associated_project as project,
count(case when issue_status='OPEN' then 1 else null end) as open_issue_count,
count(case when issue_status='CLOSED' then 1 else null end) as closed_issue_count
from table
group by associated_project; 
```

当然，这假定 的唯一有效值`issue_status`是`'OPEN'`AND `'CLOSED'`。如果不是这种情况——并且如果你想要计算其他状态——那么相应地调整查询。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-11T14:58:14.170

另一种方法是使用新的 PIVOT 功能：

```
with issue_data as (
  select associated_project as project, issue_status from issues
)
select project, open, closed
  from issue_data
       pivot ( count(*) for issue_status in ('OPEN' as open, 'CLOSED' as closed) ) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-11T14:48:55.627

```
select
sum(case when status = 'open' then 1 else 0 end) as open,
sum(case when status = 'closed' then 1 else 0 end) as closed
from table
where  <other restrictions> 
```

# ajax - 如果字段未通过验证条件，如何强制触发 Wicket“onchange”AJAX 事件

> ID：10982404
> 
> 赞同：4
> 
> 时间：2012-06-11T14:45:53.333
> 
> 标签：ajax, forms, frameworks, wicket

我想到的具体情况如下：将 AjaxFormComponentUpdatingBehavior("onchange") 添加到表单中的 TextField 中。该行为**验证特定条件下的文本**（模型对象或表单组件模型，无关紧要），基于这些条件它**可能会显示一条消息**（或隐藏它，如果它已经显示）。

问题是，TextField 中还添加了验证器。一种可能的（并且可能的）场景包括用户**首先输入一个值，该值导致消息**由 AJAX 请求显示。然后，如果他/她输入的**值未通过验证**，则**消息应该消失**，但事实并非如此。

显然，要么**根本不调用 AJAX 行为的 onUpdate() 方法**，要么我尝试插入**未验证条目的检查**失败（我尝试测试空值和空字符串，但没有有用；我不知道当数据无效时，Wicket 的验证器究竟对模型做了什么）。

我想知道真正了解验证器（或实际上是 AJAX）的人是否对问题出在哪里有任何想法。

如果有人告诉我这不是绑定验证器和 AJAX 的一般问题，但很可能是编程错误，我可以发布编辑和发布代码。我仍然相信前者，因此我将避免发布代码部分，以便继续讨论 API/理论框架。

谢谢。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-12T08:35:28.640

使用 时`AjaxFormComponentUpdatingBehavior`，如果任何`IValidator`s 验证失败，[`onError()`](http://wicket.apache.org/apidocs/1.4/org/apache/wicket/ajax/form/AjaxFormComponentUpdatingBehavior.html#onError%28org.apache.wicket.ajax.AjaxRequestTarget,%20java.lang.RuntimeException%29)将被调用而不是[`onUpdate()`](http://wicket.apache.org/apidocs/1.4/org/apache/wicket/ajax/form/AjaxFormComponentUpdatingBehavior.html#onUpdate%28org.apache.wicket.ajax.AjaxRequestTarget%29)。Wicket 会有效防止无效的用户输入到达`IModel`你组件中的 s，所以组件的 ModelObject 根本不会改变。无效的输入可能会通过[`getInput()`](http://wicket.apache.org/apidocs/1.4/org/apache/wicket/markup/html/form/FormComponent.html#getInput%28%29)/保持可用[`getConvertedInput()`](http://wicket.apache.org/apidocs/1.4/org/apache/wicket/markup/html/form/FormComponent.html#getConvertedInput%28%29)（不确定它是否会在 AJAX 场景中，它肯定是在传统的表单提交中）。

但是，请考虑到`IFormValidator`使用此机制时不会执行 s。如果您有任何内容，您可能对覆盖感兴趣，[`getUpdateModel()`](http://wicket.apache.org/apidocs/1.4/org/apache/wicket/ajax/form/AjaxFormComponentUpdatingBehavior.html#getUpdateModel%28%29)这样`AjaxFormComponentUpdatingBehavior`就不会将可能无效的用户输入带入您`IModel`的 s，并在您确定用户输入有效时手动设置模型对象。

关于您的具体情况，您可以在中执行所有必需的逻辑`onError()`（或依赖`Model`将从其他地方获取数据的 s），并将需要刷新的组件添加到`AjaxRequestTarget`. 这可能是您的场景中缺少的内容。

# google-apps-script - 用电子表格数据替换文档中的键时遇到问题

> ID：10982405
> 
> 赞同：-1
> 
> 时间：2012-06-11T14:45:53.363
> 
> 标签：google-apps-script

我正在编写一个脚本，该脚本将从电子表格中获取数据并替换文档上的文本键，为电子表格上的每一行数据添加一个重复的页面到文档中。

当我使用虚拟数据创建一些测试数组时，该脚本工作正常，但当我尝试从电子表格中提取数据时它无法正常工作。

```
function requestGen3() {
  var templateDocID = ScriptProperties.getProperty("backRxRequestDocID");
  // go back to variable below after testing
  //var sheet = SpreadsheetApp.getActiveSpreadsheet().getActiveSheet();
  var sheets = SpreadsheetApp.getActiveSpreadsheet().getSheets();
  var sheet = sheets[3];
  var activeSheetName = sheet.getName();
  var range = sheet.getRange(2, 1, sheet.getMaxRows() - 1, sheet.getMaxColumns());
  var user = Session.getUser().getEmail();

///////////////////////////////////////////////////////////////////////////////////  
//    the problem seems to be somewhere between here....
///////////////////////////////////////////////////////////////////////////////////

  // For every row of employee data, generate an employee object.
  var ptObjects = getRowsData(sheet, range);

  // Get document template, copy it as a new temp doc, and save the Doc’s id
  var docID = DocsList.getFileById(templateDocID).makeCopy().getId();
  var doc = DocumentApp.openById(docID);
  var body = doc.getActiveSection();
  var pars = doc.getParagraphs();
  for( var i in pars ) //loop to keep a copy of the original paragraphs
    pars[i] = pars[i].copy();

  // Create an array for every row object
  for (var i = 0; i < ptObjects.length; ++i) {
    // Get a row object
    var rowData = ptObjects[i];

    for (var i = 0; i < rowData.length; ++i) {
      // Replace place holder keys,  
      body.replaceText('%PHYS_NAME%', rowData.physName[i]);
      body.replaceText('%PHYS_ADDR1%', rowData.physAddr1[i]);
      body.replaceText('%PHYS_ADDR2%', rowData.physAddr2[i]);
      body.replaceText('%PHYS_CITY%', rowData.physCity[i]);
      body.replaceText('%PHYS_STATE%', rowData.physState[i]);
      body.replaceText('%PHYS_ZIP%', rowData.physZip[i]);
      body.replaceText('%PHYS_PHONE%', rowData.physPhone[i]);
      body.replaceText('%PT_NAME%', rowData.firstName[i]);
      body.replaceText('%PT_DOB%', rowData.ptDOB[i]);
      if( i != physName.length-1 ) { //has next?
        doc.appendPageBreak();
        for( var j in pars )
          doc.appendParagraph(pars[j].copy());
      }
    }
  }

///////////////////////////////////////////////////////////////////////////////////
//     ...... and here
///////////////////////////////////////////////////////////////////////////////////

  // Save and close the document
  doc.saveAndClose();
} 
```

引用的其他函数来自“从电子表格读取数据”教程。**当我调试脚本时， ptObjects**和**rowData**变量似乎包含正确的信息，但它没有正确替换文档中的键（格式为 %KEY_NAME%）。我对此很陌生，所以可能会有一些明显的错误。

任何帮助将不胜感激

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-11T15:50:11.853

假设 getRowsData 函数是Apps Script Articles 网站的[阅读电子表格数据](https://developers.google.com/apps-script/articles/reading_spreadsheet_data)教程中描述的函数，这看起来可能是一个简单的问题。

既然如此，就`rowData.physName[i]`应该简单`rowData.physName`。

# ios - 更大的 iOS 键盘和更大的按键

> ID：10982411
> 
> 赞同：-2
> 
> 时间：2012-06-11T14:46:11.727
> 
> 标签：ios, uikeyboard

我想知道是否可以选择显示更大的键盘和更大的键字体？我可以控制键的大小吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-11T14:48:29.780

你不能。这是标准的苹果东西。您可以从头开始创建自己的键盘。但听起来你在问这是否只是一个简单的设置，而事实并非如此。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-11T14:48:50.403

不，没有任何方法可以控制键盘按键的大小。

您需要通过创建自己的按钮来自定义自己的键盘。

# c++ - 无法转换'clist ::node*' 到 'clist ::node*' 在赋值中

> ID：10982416
> 
> 赞同：0
> 
> 时间：2012-06-11T14:46:29.760
> 
> 标签：c++, templates, casting, circular-list

在这里，我正在制作一个`circular linked list ( template <class t> class clist; )`成员函数，`concat ()`用于将一个列表连接到另一个列表的末尾。问题出在这个函数上。现在，当我`clist`用相同的模板参数连接两个（假设两者都是`clist<int>`）时，函数可以正常工作，但是一旦我尝试连接两个`clists`（`clist <int> c1`和`clist <char> c2`），那么我需要在函数中进行一些转换`concat`，因为我不太了解关于模板，我真的不知道该怎么做。

所以问题恰恰出在下面程序的最后第二行。我有`clist <int> c1`它的成员函数`concat`被调用，并且`clist <char> c2`在 c1 的末尾被连接起来。

```
template <class t>
class clist
{
    struct node
    {
    t data;
    node* next;
    node (const t& x=0, node* nxt=0): data(x), next(nxt) { }
    };

    typedef node* NPTR;

    public:

    NPTR ptr;

    template <class r>
    void concat ( clist <r> & );

    // other functions like push, pop etc. to form the clist

    clist () : ptr(0) { }
};

template <class t>
template <class r>
void clist<t> :: concat ( clist <r>& c2 )
{
    // ptr is pointer to a certain node in the list through which the list is
    // accessedand is zero initially.

    if ( c2.ptr == 0 ) return;
    if ( ptr == 0 ) ptr = (NPTR) c2.ptr;
    else
    {
    NPTR p = ptr->next;
    ptr->next = (NPTR) c2.ptr->next;
    c2.ptr->next = ( ??? ) p ;
    ptr = (NPTR)c2.ptr;
} 
```

无论我尝试什么，它仍然显示错误`cannot convert 'clist<int>::node*' to 'clist<char>::node*' in assignment`。

有人可以告诉这里什么是正确的投射方式吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-11T14:48:10.890

演员阵容实际上使您免于制作异类列表。您似乎想要做的是连接两个列表 - 一个与 int 和一个与 char。现在从概念上讲，这似乎是合理的，但是 int 节点和 char 节点的结构太不同了。

唯一有意义的方法是将第二个列表复制到一个整数列表中，然后连接起来。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-11T14:49:10.360

模板参数既不是协变的也不是逆变的；`clist<int>`并且`clist<char>`是*完全不同*的类型。您无法在它们之间进行转换。由于`node`类型的定义包含在模板类型中，它也依赖于模板参数，对应的`node`类型也同样不同。

每个列表只能包含一种类型。如果您尝试编写一个可以包含*任何*类型的列表，则需要为模板参数使用变体样式类型。

# python - 使用爬虫抓取 http 状态码

> ID：10982417
> 
> 赞同：11
> 
> 时间：2012-06-11T14:46:37.483
> 
> 标签：python, web-scraping, scrapy

我是scrapy的新手。我正在编写一个蜘蛛，旨在检查一长串服务器状态代码的 url，并在适当的情况下，它们被重定向到哪些 URL。重要的是，如果有一系列重定向，我需要知道每次跳转时的状态码和 url。我正在使用 response.meta['redirect_urls'] 来捕获 url，但不确定如何捕获状态代码 - 似乎没有响应元键。

我意识到我可能需要编写一些自定义中间件来公开这些值，但不太清楚如何记录每个跃点的状态代码，也不清楚如何从蜘蛛访问这些值。我看过但找不到任何人这样做的例子。如果有人能指出我正确的方向，将不胜感激。

例如，

```
 items = []
    item = RedirectItem()
    item['url'] = response.url
    item['redirected_urls'] = response.meta['redirect_urls']     
    item['status_codes'] = #????
    items.append(item) 
```

**编辑**- 基于来自 warawauk 的反馈和来自 IRC 频道 (freenode #scrappy) 上的人的一些真正主动的帮助，我已经设法做到了这一点。我相信这有点hacky，所以欢迎任何改进意见：

（1）在设置中禁用默认中间件，添加自己的：

```
DOWNLOADER_MIDDLEWARES = {
    'scrapy.contrib.downloadermiddleware.redirect.RedirectMiddleware': None,
    'myproject.middlewares.CustomRedirectMiddleware': 100,
} 
```

(2) 在你的 middlewares.py 中创建你的 CustomRedirectMiddleware。它继承自主重定向中间件类并捕获重定向：

```
class CustomRedirectMiddleware(RedirectMiddleware):
    """Handle redirection of requests based on response status and meta-refresh html tag"""

    def process_response(self, request, response, spider):
        #Get the redirect status codes
        request.meta.setdefault('redirect_status', []).append(response.status)
        if 'dont_redirect' in request.meta:
            return response
        if request.method.upper() == 'HEAD':
            if response.status in [301, 302, 303, 307] and 'Location' in response.headers:
                redirected_url = urljoin(request.url, response.headers['location'])
                redirected = request.replace(url=redirected_url)

                return self._redirect(redirected, request, spider, response.status)
            else:
                return response

        if response.status in [302, 303] and 'Location' in response.headers:
            redirected_url = urljoin(request.url, response.headers['location'])
            redirected = self._redirect_request_using_get(request, redirected_url)
            return self._redirect(redirected, request, spider, response.status)

        if response.status in [301, 307] and 'Location' in response.headers:
            redirected_url = urljoin(request.url, response.headers['location'])
            redirected = request.replace(url=redirected_url)
            return self._redirect(redirected, request, spider, response.status)

        if isinstance(response, HtmlResponse):
            interval, url = get_meta_refresh(response)
            if url and interval < self.max_metarefresh_delay:
                redirected = self._redirect_request_using_get(request, url)
                return self._redirect(redirected, request, spider, 'meta refresh')

        return response 
```

(3) 您现在可以使用以下命令访问蜘蛛中的重定向列表

```
request.meta['redirect_status'] 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-11T14:54:09.717

我相信这是可用的

```
response.status 
```

请参阅[http://doc.scrapy.org/en/0.14/topics/request-response.html#scrapy.http.Response](http://doc.scrapy.org/en/0.14/topics/request-response.html#scrapy.http.Response)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-12T06:12:33.340

`response.meta['redirect_urls'`由[RedirectMiddleware](http://doc.scrapy.org/en/latest/topics/downloader-middleware.html#module-scrapy.contrib.downloadermiddleware.redirect)填充。您的蜘蛛回调将永远不会在两者之间收到响应，只会在所有重定向之后收到最后一个响应。

如果你想控制进程， subclass `RedirectMiddleware`，禁用原来的，然后启用你的。然后您可以控制重定向过程，包括跟踪响应状态。

这是原始实现（scrapy.contrib.downloadermiddleware.redirect.RedirectMiddleware）：

```
class RedirectMiddleware(object):
    """Handle redirection of requests based on response status and meta-refresh html tag"""

    def _redirect(self, redirected, request, spider, reason):
        ...
            redirected.meta['redirect_urls'] = request.meta.get('redirect_urls', []) + \
                [request.url] 
```

如您所见`_redirect`，从不同部分调用的方法创建`meta['redirect_urls']`

并且在`process_response`方法`return self._redirect(redirected, request, spider, response.status)`中被调用，意味着原始响应没有传递给蜘蛛。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-03-21T20:03:34.580

KISS 解决方案：我认为最好添加严格的最少代码来捕获新的重定向字段，并让 RedirectMiddleware 完成其余的工作：

```
from scrapy.contrib.downloadermiddleware.redirect import RedirectMiddleware

class CustomRedirectMiddleware(RedirectMiddleware):
  """Handle redirection of requests based on response status and meta-refresh html tag"""

  def process_response(self, request, response, spider):
    #Get the redirect status codes
    request.meta.setdefault('redirect_status', []).append(response.status)
    response = super(CustomRedirectMiddleware, self).process_response(request, response, spider)
    return response 
```

然后，继承 BaseSpider，您可以使用以下内容访问 redirect_status：

```
 def parse(self, response):
      item = ScrapyGoogleindexItem()
      item['redirections'] = response.meta.get('redirect_times', 0)
      item['redirect_status'] = response.meta['redirect_status']
      return item 
```

# android - 可以从同一个活动启动 2 个服务，并且可以在 android 中并行运行该活动和两个服务吗？

> ID：10982424
> 
> 赞同：1
> 
> 时间：2012-06-11T14:47:15.430
> 
> 标签：android, service, android-activity

我有 2 项服务可以从加速度计和麦克风获取数据，还有 1 项活动可以获取 GPS 数据。我想同时运行这三件事。我想知道这在Android中是否可行。当 GPS Activity 运行并在 UI 上显示数据时，其他 2 个服务也应该在后台运行。

如果可能的话，我给出的从 GPS Activity 类启动两项服务并同时运行这三项服务的方法是正确的。请任何人帮助我。谢谢你。

`

```
 @Override
   public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);

    gpsManager = new GPSManager();

    gpsManager.startListening(getApplicationContext());
    gpsManager.setGPSCallback(this);

    ((TextView)findViewById(R.id.info_message)).setText(getString(R.string.info));

    measurement_index = AppSettings.getMeasureUnit(this);
    Intent i=getIntent();
     number=i.getStringExtra("NUMBER");
     startService(new Intent(GPS2Activity.this, GforceService.class));
     startService(new Intent(GPS2Activity.this,SPLService.class));

} ` 
```

`GforceService` 并且`SPLService`是我的 2 项服务

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-11T15:00:04.060

是的，您可以启动 2 个服务并让它们与您的活动并行运行。

# java - 解压缩罐子以获取类 .text

> ID：10982425
> 
> 赞同：-4
> 
> 时间：2012-06-11T14:47:18.777
> 
> 标签：java, jar

我想解压缩我正在使用的 jar 库，如果它的核心功能更新为 GitHub 上提供的内容，请检查类。

**如何解压缩 .jar 文件？**

**更新：**

如果您直接解压缩，您将无法在没有附加源代码的情况下获得类 .txt。

感谢 alegen 使用 Java Decompiler 的方法，您可以反编译类。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-11T14:52:02.757

`JAR`用 WinRAR打开文件，但除非人家也打包了`source code`，否则你只会找到`.class`包含`bytecode`. 您还必须使用`decompiler`; 我通常使用[JD Java Decompiler](http://java.decompiler.free.fr/)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-11T15:04:22.240

您可以使用各种工具从 JAR 文件中提取文件，包括纯 ZIP 文件工具……当然还有`jar`作为 JDK 一部分提供的命令。

听起来您*真正的*问题是您想反编译 JAR 文件中的 .class 文件，以便您可以将它们与一些 Java 源代码进行比较。

好吧，坏消息是它不会起作用……尤其是在大规模的情况下。是的，有些反编译器会（在好日子）产生类似于 Java 的东西。然而：

*   反编译的 Java 看起来与用于生成 .class 文件的原始源代码完全不同。将反编译的文件与原始源代码（或基于原始源代码的东西）进行比较将是一个乏味且困难的手动过程。

*   反编译的代码很有可能甚至不是有效的（可编译的）Java。

更好的方法可能是在 GitHub 上编译源代码并尝试比较 .class 文件的两个版本。然而，即使这样也不是直截了当的，因为：

*   .class 文件包含时间戳和其他依赖于构建路径、编译开关等的东西。在比较 .class 文件时，您必须弄清楚如何消除这种“噪音”。

*   不同版本的 Java 编译器会产生不同风格的类文件。

*   即使类文件版本号相同，生成的字节码也可能存在编译器版本特定的差异。

* * *

对于小规模的比较，反编译可能会......只要你准备好解决这个问题。您还可以使用`javap`打印类文件中的字节码并比较`javap`输出。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-11T16:16:45.490

所以你要做的是检查两个jar是否相同，以确定github上的方法与你jar中的方法相同吗？

我认为你在这里试图解决错误的问题。你应该做的是从 github 上查看代码并自己构建它。在项目的根目录中应该有一个名为 README、INSTALL 或类似文件的文件。

现在，当然，您可能不想要项目的最新版本，您可能想要最新的稳定版本或诸如此类的东西，这是完全可行的：只需从 git 下载您想要的版本，然后自己构建。您现在拥有代码和 jar。

如果您这样做，您可以确保代码与 jar 匹配，并且不需要 icky 反编译，只需快速 make 或 ant 稍后，如自述文件所指定。

# java - 第一个 HTTP 请求在 JMeter 中花费了很长时间

> ID：10982428
> 
> 赞同：2
> 
> 时间：2012-06-11T14:47:23.887
> 
> 标签：java, performance, http, jmeter, performance-testing

我为我的线程组设置了几个 HTTP 请求。我注意到第一个请求总是比任何其他请求花费更长的时间。我重新排序了我的请求，但问题仍然存在。这使得分析响应时间变得困难。

JMeter 是否存在已知问题？有解决办法吗？

这是我的设置

```
org.apache.jmeter.threads.ThreadGroup@69bb01
org.apache.jmeter.config.ConfigTestElement@b3600d
org.apache.jmeter.sampler.DebugSampler@67149d
https: 1st request
Query Data: 
https: 2nd request
Query Data: 
Query Data: 
org.apache.jmeter.reporters.ResultCollector@11b53af
org.apache.jmeter.reporters.ResultCollector@11308c7
org.apache.jmeter.reporters.ResultCollector@a5643e
org.apache.jmeter.reporters.ResultCollector@585611
org.apache.jmeter.reporters.Summariser@1e8f4b9
org.apache.jmeter.reporters.ResultCollector@11ad922
org.apache.jmeter.reporters.ResultCollector@1a56999 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-11T14:51:27.727

这很可能是因为

> 服务器在达到全速之前通常需要预热：对于您肯定不想测量类加载时间、JSP 编译时间或本机编译时间的 Java 平台尤其如此。

[http://nico.vahlas.eu/2010/03/30/some-thoughts-on-stress-testing-web-applications-with-jmeter-part-2/](http://nico.vahlas.eu/2010/03/30/some-thoughts-on-stress-testing-web-applications-with-jmeter-part-2/)

您是否首先允许对正在测量的服务器进行一些预热流量，以允许内容进入缓存、编译 JSP 页面、将数据库工作集放在内存中等？

# sql - Teradata 自动增量查询

> ID：10982432
> 
> 赞同：0
> 
> 时间：2012-06-11T14:47:36.807
> 
> 标签：sql, teradata

Teradata SQL Query 可以自动递增吗？

我正在寻找类似的东西

```
SELECT
  Date (Auto-Increment by 1 over Column 2),
  Column 2,
  Column 3
FROM Fake_Table
GROUP BY 1,2,3 
```

并得到诸如

```
Date        Column 2    Column 3
2012-06-11  A           A
2012-06-11  A           B
2012-06-11  A           C
2012-06-12  B           A
2012-06-13  C           B 
```

这可能吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-11T15:56:58.657

您应该能够使用带有 PARTITION BY 和 ORDER BY 语句的 ROW_NUMBER() 窗口聚合来为您提供要添加到 DATE 的种子值。

伪代码：

```
SELECT
  CURRENT_DATE + ROW_NUMBER() OVER(PARTITION BY Column2,
                                   ORDER BY Column2)       AS MyDate
  Column2,
  Column3
FROM Fake_Table
GROUP BY 1,2,3 
```

# c++ - 使用 directx 绘制带纹理的三角形

> ID：10982438
> 
> 赞同：0
> 
> 时间：2012-06-11T14:47:52.047
> 
> 标签：c++, directx, directx-9, 2d-games

我正在制作一个使用 directx 的 2D 游戏。目前，我有一个在屏幕上绘制的背景纹理（未来还会有更多）。但是，我只想要将纹理的一部分绘制到屏幕上。我知道我可以使用带有绘图功能的矩形，但我需要更大程度的控制。有没有办法从我的绘图中将几个三角形（使用自定义顶点）绘制到屏幕上？我浏览了互联网和这个网站，但似乎找不到我想要的东西。如果需要，我可以提供更多信息/代码。谢谢！

# asp.net - ASP.NET SMTP 故障转移解决方案

> ID：10982442
> 
> 赞同：1
> 
> 时间：2012-06-11T14:48:08.160
> 
> 标签：asp.net, smtp, msmq, rabbitmq

我对此的知识和经验有限，所以不确定我是否考虑过所有事情并希望得到一些建议。

当前场景：一台 Exchange 服务器，一台数据库服务器，多台负载均衡的网络服务器，都定期发送确认和警报电子邮件。此交换服务器在整个业务中广泛使用，这导致交换服务器无法处理的高负载。有一次，服务器停机了很长一段时间，导致电子邮件无法到达目的地，并且没有记录电子邮件尝试确定哪些电子邮件失败，以便以后可以手动发送它们。此外，该网站等待 SMTP 响应，因此网页加载存在延迟。

计划：将引入第二个 SMTP 服务器以减少原始服务器的负载，同时对网站进行一些改进以减少其资源占用并改进所有电子邮件尝试的日志记录（只是标头信息）以及 SMTP 响应状态。

可能的解决方案：

1.  将网站的电子邮件方法更改为登录，然后通过一台或其他服务器尝试 SMTP，记录 smtp 响应。优点：开发速度更快，缺点：没有电子邮件队列的异步处理。

2.  记录电子邮件标头，然后使用 MSMQ 或 RabbitMQ 将电子邮件请求发送到队列，并拥有一个侦听器服务来处理实际将电子邮件发送到 Exchange 服务器的过程。此外，如果它仍然无法到达 SMTP 服务器，请将其留在队列中并稍后重试。优点：可以重用基础设施和经验，以在未来的功能需求中使用 MQ，例如用户下载数据的请求，例如 Facebook。缺点：是时候学习如何去做，并在面临最后期限时实际开发。

3.  将电子邮件记录到 db，然后发送到中继到 Exchange 服务器的本地拾取文件夹，但我认为这没有故障转移支持，也没有更新电子邮件日志中状态的方法，所以虽然设置起来似乎很快，但没有据我所知，t真的满足所有要求。

我想做的是分两个阶段开发，最初只是第一个解决方案，然后开发 MSMQ/RabbitMQ 功能以使其在以后异步，但我想我会征求意见，看看我是否俯瞰某事。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-12T09:51:32.130

您可能想看看[NServiceBus](http://nservicebus.com/ "服务总线")。

具体来说，有一些非常新的电子邮件功能。已经创建了一个卫星，它为您提供 NServiceBus 附带的重试的好处，使您的电子邮件发送更加健壮。

您无需新端点或配置任何消息映射即可获得单独的队列。这样，每个端点都内置了此功能，并且唯一需要的配置是 SmtpClient 配置部分。

此功能的 API 是`Bus.SendEmail(new MailMessage)`. 他们将`System.Net.Mail.MailMessage`用作发送电子邮件的抽象。

该代码目前在他们的[开发分支](https://github.com/NServiceBus/NServiceBus/tree/develop/src/Notifications)中。可以在[此处](https://github.com/NServiceBus/NServiceBus/commit/0bb5516484a50b2629548605dd639736beca4e96)找到演示所有这些的示例。

有关更多详细信息，请参见[此处](http://andreasohlund.net/2012/06/07/sending-emails-using-nservicebus/)

# c# - 是什么导致 UnhandledExceptionEventArgs.IsTerminating 标志为真或假？

> ID：10982443
> 
> 赞同：6
> 
> 时间：2012-06-11T14:48:09.010
> 
> 标签：c#, .net, clr

当订阅事件时，`AppDomain.CurrentDomain.UnhandledException`什么条件会导致`UnhandledExceptionEventArgs` `IsTerminating`标志为真？即是什么导致异常被认为是致命的？

除非另有配置，否则默认情况下所有未处理的异常都是致命的吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-11T16:48:48.890

此属性始终为真。在 .NET 1.x 时代，它曾经可能是错误的。该版本允许线程因未处理的异常而死亡，而不会终止整个进程。只是效果不佳，程序员没有实现事件处理程序（或者不知道如何正确处理来自事件的异常，谁做的）所以线程只是在没有任何通知的情况下死亡。几乎不可能没有这个原因，难以诊断程序故障。

Microsoft 更改了 .NET 2.0 中的默认行为，未处理的异常终止程序。从技术上讲，仍然可以覆盖此行为，自定义 CLR 主机可以通过实现 IHostPolicyManager 接口使进程保持活动状态。并且默认主机支持`<legacyUnhandledExceptionPolicy>`配置元素。不要使用它，那里有龙。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-11T14:53:04.660

不，由另一个应用程序产生的托管线程的未处理异常将使 IsTerminating 等于 false，因为它会杀死线程而不是整个应用程序。这是我在这种情况下唯一一次看到 IsTerminating 错误，而且[MSDN 页面](http://msdn.microsoft.com/en-us/library/system.unhandledexceptioneventargs.isterminating%28v=vs.71%29.aspx)说这也是主要用例。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-12T16:53:01.437

我将它用于测试目的。我想测试记录异常的 UnhandledExceptionHandler。所以我设置它以便我可以记录消息但不要击落测试线程。

但通常，这意味着在我见过的所有其他情况下，IsTerminating 标志都设置为 true。

# android - Webconnex 工单详情 API

> ID：10982445
> 
> 赞同：0
> 
> 时间：2012-06-11T14:48:17.933
> 
> 标签：android

我想开发一个这样的应用程序。有这方面的API吗？ [http://ipclineapro.com/ticketscan/](http://ipclineapro.com/ticketscan/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T20:57:51.667

TicketScan 应用程序是专门为 Webconnex 平台制作的（即有人在 Webconnex 上买票）。所以它不适用于其他平台，这就是它只提供票号的原因。

到目前为止，我们还没有 Android 应用程序。当我们第一次创建 TicketScan 时，它只支持 Linea Pro（iPod 配件，现在也适用于 iPhone），但我们后来添加了对相机二维码的支持。

如果您想制作与我们平台兼容的 Android 应用程序，我们确实有该应用程序使用的基于 REST 的内部服务。此服务没有记录，我们也不打算以当前形式公开发布，部分原因是它可能会在不久的将来更改。

目前我们正在对我们的平台进行改造，该平台将提供大量 API。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-12T06:09:17.020

我收到了来自 Webconnex 的邮件回复。他们说没有开放API供我们使用。

# jquery - jQuery 灯箱

> ID：10982450
> 
> 赞同：0
> 
> 时间：2012-06-11T14:48:32.053
> 
> 标签：jquery, lightbox

我创建了一个灯箱，它工作正常。现在我想创建 2 个灯箱，但我似乎无法让我的 jquery 正确。

2 个灯箱不会同时显示。有 2 个链接分别打开。

```
<a href="#" class="lightbox1">Open box 1</a>
<a href="#" class="lightbox2">Open box 2</a> 
```

第一个框中有一个表格，第二个框中有一些内容。

HTML/CSS：

```
<div class="backdrop"></div> <--end of backdrop -->

<div id="wapper" class="centered">

<div class="box1">
<div class="close">x</div> <!--Close 'x' on the lightbox-->
<div class="clear"></div>  <!--CSS clear to correct flow -->
<form name="form1" id="form1">
...       
</form>
</div> <!--end of box1-->

<div class="box2">
<div class="close">x</div> <!--Close 'x' on the lightbox--> 
<div class="clear"></div> <!-- end of div clear -->
<div id="responce">
</div> <!-- end of div response [This is where the content goes after its fetched from mysql]-->
</div> <!-- end of box2 -->

</div><!--end of wapper -->

<style>
.backdrop
        {
            position:absolute;
            top:0px;
            left:0px;
            width:100%;
            height:100%;
            background:#000;
            opacity: .0;
            filter:alpha(opacity=0);
            z-index:50;
            display:none;
        }
        .box1, .box2
        {
            position:absolute;
            top:20%;
            left:30%;
            width:500px;
            height:300px;
            background:#ffffff;
            z-index:51;
            padding:10px;
            -webkit-border-radius: 5px;
            -moz-border-radius: 5px;
            border-radius: 5px;
            -moz-box-shadow:0px 0px 5px #444444;
            -webkit-box-shadow:0px 0px 5px #444444;
            box-shadow:0px 0px 5px #444444;
            display:none;
        }
        .close
        {
            float:right;
            margin-right:6px;
            cursor:pointer;
        }
</style> 
```

js/jquery：

```
<script type="text/javascript">
            $(document).ready(function(){

              if ($('lightbox1').click(function()) {
         $('.backdrop,box1').animate({'opacity':'.50'}, 300, 'linear');
                    $('box1').animate({'opacity':'1.00'}, 300, 'linear');
                    $('.backdrop, box1').css('display', 'block');

                 $('.close').click(function(){
                    close_box($('.box1'));
                  });

                  $('.backdrop').click(function(){
                    close_box($('.box1'));
                });
          }
          else if($('lightbox2').click(function()){
        $('.backdrop, box2').animate({'opacity':'.50'}, 300, 'linear');
                    $('box2').animate({'opacity':'1.00'}, 300, 'linear');
                    $('.backdrop, box2').css('display', 'block');

                $('.close').click(function(){
                    close_box($('.box2'));
                });
           }
            });

            function close_box(box)
            {
                $('.backdrop, <box>').animate({'opacity':'0'}, 300, 'linear', function(){
                    $('.backdrop, <box>').css('display', 'none');
                });
            }
        </script> 
```

我已经在这段代码上工作了 2 天，试图找出问题所在，有人可以帮忙。if 条件是问题所在。关闭按钮也不起作用 - 我如何传递参数？

谢谢！

#

所以，我能够让灯箱工作，jQuery/Javascript：

```
$(document).ready(function(){
            $('.lightbox1').click(
            function() {
                $('.backdrop, .box1').animate({'opacity':'.50'}, 300, 'linear');
                $('.box1').animate({'opacity':'1.00'}, 300, 'linear');
                $('.backdrop, .box1').css('display', 'block');

                $('.close').click(function(){
                    close_box($(".box1"));
                });

                $('.backdrop').click(function(){
                    close_box($(".box1"));
                });
            });

            $('.lightbox2').click(
            function(){
                $('.backdrop, .box2').animate({'opacity':'.50'}, 300, 'linear');
                $('.box2').animate({'opacity':'1.00'}, 300, 'linear');
                $('.backdrop, .box2').css('display', 'block');

                $('.close').click(function(){
                    close_box($(".box2"));
                });
            });             

        }); 
```

close_box() 函数仍然不起作用。参数未正确传递。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-11T14:50:53.293

我对你的选择器感到困惑。您不会使用`$('<lightbox1>').click`而是`$('.lightbox1').click`选择与类匹配的元素。

`$('.backdrop, <box>')`你的函数也是如此`close_box()`- 我假设你想`box`用作变量，所以你会这样做`$('.backdrop, ' + box).animate(`

# process - 如何从句柄中获取文件名

> ID：10982464
> 
> 赞同：0
> 
> 时间：2012-06-11T14:49:11.747
> 
> 标签：process, filenames

我想知道 1234 正在写入什么文件进程。

```
$ strace -etrace=write -p 1234 
```

显示句柄，如何从句柄中获取文件名？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-11T14:53:56.530

> 我想知道 1234 正在写入什么文件进程。

你可以试试`lsof -p`

```
cnicutar@lemon:~$ lsof -p $$
COMMAND   PID     USER   FD   TYPE DEVICE SIZE/OFF    NODE NAME
bash    22364 cnicutar  cwd    DIR    8,6     4096  262145 /home/cnicutar
bash    22364 cnicutar  rtd    DIR    8,5     4096       2 /
bash    22364 cnicutar  txt    REG    8,5   955024 2616381 /bin/bash
....
bash    22364 cnicutar    0u   CHR  136,0      0t0       3 /dev/pts/0
bash    22364 cnicutar    1u   CHR  136,0      0t0       3 /dev/pts/0
bash    22364 cnicutar    2u   CHR  136,0      0t0       3 /dev/pts/0 
```

或者，您可以进入`/proc/PID/fd`并查看描述符（使用 maybe `readlink`）。

# html - CSS：将文本向下移动几个像素但保持背景不变？

> ID：10982465
> 
> 赞同：15
> 
> 时间：2012-06-11T14:49:19.697
> 
> 标签：html, css, image, button

我有一些悬停在上面时更大的 CSS 按钮。我还使文本更大，但是我想将文本向下移动几个 px，而不会弄乱正在使用的背景图像。

帮助？

我的代码如下所示：

```
<div id="nav">
    <a href="index.php">Home</a>
    <a id="headrush">Beer Bongs</a>
    <a id="thabto">Novelty</a>
</div>

#nav a {
    background: url(Images/Button.png);
    height: 28px;
    width: 130px;
    font-family: "Book Antiqua";
    font-size: 12px;
    text-align: center;
    vertical-align: bottom;
    color: #C60;
    text-decoration: none;
    background-position: center;
    margin: auto;
    display: block;
    position: relative;
}

#nav a:hover {
    background: url(Images/Button%20Hover.png);
    height: 34px;
    width: 140px;
    font-family: "Book Antiqua";
    font-size: 16px;
    text-align: center;
    color: #C60;
    text-decoration: none;
    margin: -3px;
    z-index: 2;
}

#nav a:active {
    background: url(Images/Button%20Hover.png);
    height: 34px;
    width: 140px;
    font-family: "Book Antiqua";
    font-size: 14px;
    text-align: center;
    color: #862902;
    text-decoration: none;
    margin: 0 -3px;
    z-index: 2;
} 
```

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-06-11T14:51:51.233

使用`line-height`CSS 属性。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-11T15:03:45.017

使用以下样式链接：

```
#nav a:link {
background: #ff00ff url(Images/Button.png);
height:28px;
width:130px;
font-family:"Book Antiqua";
font-size:12px;
text-align:center;
vertical-align:bottom;
color:#C60;
text-decoration:none;
background-position:center;
display:block;
position:relative;
} 
```

在`:hover`并`:visited`仅定义您想要更改的内容（`background`、`font-size`等）。

```
#nav a:hover {
    background: #f000f0 url(Images/Button%20Hover.png);
} 
```

在您的代码链接有不同的大小：
`a`- `height:28px; width:130px;`,
`a:hover` `height:34px; width:140px;`,
`a:visited`- `height:34px; width:140px;`),

这就是为什么你得到不同的大小，位置（在`a`你使用`margin:auto`- 0px），但是因为`a:hover`边距发生了变化，所以你的链接也改变了位置。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-11T14:51:37.340

如果要下移文本，请使用 padding-top。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2018-01-11T16:23:03.017

> line-height 可以根据您的情况工作。

line-height 的问题可能是您有背景颜色，然后它也会扩展。

对于我正在做的事情，我正在嵌套一些`divs`

我用了 `position:relative; top:20px;`

```
<div class="col-lg-11">
   <div style="position:relative; top:20px;">CR</div>     
</div> 
```

> 这种内联样式只是临时的

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2021-01-07T13:00:39.463

`Vertical align does the trick`

```
.text-to-align {
    vertical-align: bottom;
} 
```

# c++ - InnoSetup - 检查是否安装了 Visual Studio 2010 crt redist，如果没有，则运行安装程序

> ID：10982468
> 
> 赞同：3
> 
> 时间：2012-06-11T14:49:30.327
> 
> 标签：c++, installation, inno-setup

我目前在 Inno 脚本的这一部分中有这个

```
[Run]
Filename: {app}\bin\vcredist_x86.exe; Parameters: "/q:a /c:""VCREDI~3.EXE /q:a /c:""""msiexec /i vcredist.msi /qn"""" """; WorkingDir: {app}\bin; StatusMsg: Installing Visual Studio 2010 C++ CRT Libraries... 
```

它将在应用程序安装期间运行 vcredist 安装程序。但问题是，如果用户已经安装了它，它会抛出类似的东西

*   修复/移除
*   已检测到较新版本

有什么办法可以避免这种情况，只在需要时运行这个安装程序？我应该在 Inno 脚本中添加什么？

编辑：

在@John链接的帮助下，我添加了以下功能

我还使用[此站点](http://blogs.msdn.com/b/astebner/archive/2010/05/05/10008146.aspx)作为参考来获取 Visual Studio 2010 crt++ 产品代码，并使用注册表中的 Uninstall 文件夹来检测它是否已安装。

```
function InitializeSetup(): Boolean;
var
  ErrorCode: Integer;
  RedistInstalled : Boolean;
  Result1 : Boolean;
begin
  RedistInstalled := RegKeyExists(HKLM,'SOFTWARE\Microsoft\Windows\CurrentVersion\Uninstall\{196BB40D-1578-3D01-B289-BEFC77A11A1E}');
  if RedistInstalled then
  begin
    Result := true;
  end else
  begin
    RedistInstalled := RegKeyExists(HKLM,'SOFTWARE\Microsoft\Windows\CurrentVersion\Uninstall\{196BB40D-1578-3D01-B289-BEFC77A11A1E}');
    if RedistInstalled then
    begin
      Result := true;
    end else
    begin
      Result1 := MsgBox('This setup requires Microsoft Visual C++ 2010 Redistributable Package (x86). Please install Visual C++ 2010 Redistributable Package (x86) and run this setup again.  '#13#10' '#13#10'Do you want to download Microsoft Visual C++ 2010 Redistributable Package (x86) now?',
        mbConfirmation, MB_YESNO) = idYes;
      if Result1 =false then
      begin
        Result:=false;
      end else
      begin
        Result:=false;
        ShellExec('open',
          'http://download.microsoft.com/download/5/B/C/5BC5DBB3-652D-4DCE-B14A-475AB85EEF6E/vcredist_x86.exe',
          '','',SW_SHOWNORMAL,ewNoWait,ErrorCode);
      end;
    end;
  end;
end; 
```

但是，如果安装程序在下载/安装后继续运行，或者我可以以某种方式调整我以前运行的包含（安装程序）安装程序的代码，那仍然会很好：

```
 [Run]
    Filename: {app}\bin\vcredist_x86.exe; Parameters: "/q:a /c:""VCREDI~3.EXE /q:a /c:""""msiexec /i vcredist.msi /qn"""" """; WorkingDir: {app}\bin; StatusMsg: Installing Visual Studio 2010 C++ CRT Libraries... 
```

但这仍然足够好。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-11T15:13:57.710

我遵循“官方” MS 方式[https://stackoverflow.com/a/199783/866333](https://stackoverflow.com/a/199783/866333)。还没有完全流行起来，但它对我有用。

请参阅[Inno 设置：验证是否安装了 .NET 4.0，](https://stackoverflow.com/questions/4104011/innosetup-how-to-check-the-framework-4-0)以便工作代码仅检测一个版本。

这是我实际使用的代码的最佳示例：http: [//www.vincenzo.net/isxkb/index.php?title= .NET_-_Detect_framework](http://www.vincenzo.net/isxkb/index.php?title=.NET_-_Detect_framework)

以上所有内容均针对 .NET 框架。对于 VCRT，我将从 VC2010 中提取可再发行组件，并让 InnoSetup 将内容复制到应用程序的目标安装目录。这样系统文件就不会被更改。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-07-07T18:04:48.760

按照此链接[https://www.codeproject.com/Articles/20868/NET-Framework-Installer-for-InnoSetup](https://www.codeproject.com/Articles/20868/NET-Framework-Installer-for-InnoSetup)。它适用于 NET 框架和 VC 可分发软件。您可以查看是否有可分发软件（例如 2013）安装在 PC 中。如果未安装，它将为您安装。我强烈推荐这个。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-05-27T11:48:12.227

也许您可以使用 HKLM\SOFTWARE\Microsoft\Windows\CurrentVersion\SharedDLLs。您可以发现所有版本都已安装。DLL 具有特殊名称，取决于 c++ Retribuitable 安装：

90：Visual Studio 2008（9.0 版）（atl90.dll、msvcr90.dll、msvcp90.dll）

100：Visual Studio 2010（版本 10.0）（atl100.dll、msvcr100.dll、msvcp100.dll）

110：Visual Studio 2012（版本 11.0）…110

120：Visual Studio 2013（版本 12.0）…120

140：Visual Studio 2015（版本 14.0）…140

150：Visual Studio 2017（版本 15.0）（atl150.dll、msvcr150.dll、msvcp150.dll）

160：Visual Studio 2019（版本 16.0）（atl160.dll、msvcr160.dll、msvcp160.dll）

问候，

# c# - 设计器中的表关系

> ID：10982470
> 
> 赞同：0
> 
> 时间：2012-06-11T14:49:43.900
> 
> 标签：c#, sql-server-2008, linq-to-sql

我正在使用 Linq to SQL 和 SQL Server 2008。我的应用程序使用来自另一个应用程序的现有数据库，并添加了一些表。我无法修改其他应用程序使用的表，但我可以添加新表。我有另一个应用程序使用的客户表，我有一个产品表，产品表有一个客户的外键，但它没有被引用，因为我不能修改客户表。我使用 Linq 做我需要的一切没有问题，但**我的问题是**，如果我使用 Linq 设计器并设置客户端和产品之间的关系，当我**从应用程序**中删除客户端时，如果有产品，它会抛出异常联系？即使我没有修改 SQL Server 架构？

提前致谢。

# mercurial - 在 TortoiseHg 中查看拓扑头

> ID：10982475
> 
> 赞同：7
> 
> 时间：2012-06-11T14:50:12.497
> 
> 标签：mercurial, tortoisehg

在开始新工作之前，我喜欢检查`hg heads -t`可能需要合并的任何未完成的拓扑头 ( )。我看不到在 TortoiseHg 中使用 revsets 的方法。我过滤的频率不够高，无法成为高级用户，他们吓到我了。

是否可以？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-06-11T15:00:20.013

这可以使用TortoiseHg 中的[revsets](http://www.selenic.com/hg/help/revsets)来完成。要检查未合并的头部，我通常会执行以下操作：

1.  切换到`Revision Details`视图
2.  打开`Filter Toolbar`
3.  输入以下过滤器：`heads(all()) and not closed()`

# jquery - 如何获取三态 jquery 插件来检查隐藏的输入？

> ID：10982484
> 
> 赞同：0
> 
> 时间：2012-06-11T14:50:48.323
> 
> 标签：jquery, wordpress, tri-state-logic

我一直在为使用三态 jquery 插件的客户端工作，经过大量调试后，我发现隐藏的输入没有显示：

```
<ul>
    <li>
        <a href="#" class="checkbox checked">undefined</a>
        <input type="checkbox" style="display: none; " />
        <label for="england" class="checkbox">England</label>
        <span class="toggler opened">&nbsp;</span>
        <ul style="display: block; ">
            <li class="city">
                <a href="#" class="checkbox checked">undefined</a>
                <input type="checkbox" value="leeds" id="cb_leeds" style="display: none; " />
                <label for="cb_leeds" class="checkbox" >Leeds</label>
            </li>
            <li class="city">
                <a href="#" class="checkbox checked">undefined</a>
                <input type="checkbox" value="london" id="cb_london" style="display: none; " />
                <label for="cb_london" class="checkbox checked" >London</label>
            </li>
        </ul>
    </li>
</ul> 
```

我发现在他们使用的插件中，他们的脚本中有这个：

```
$('#pf-locations .city input:checked').each(function() {
    cities.push($(this).val());
}); 
```

有谁知道我怎样才能让插件检查隐藏的输入？谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-11T14:53:54.820

你可以试试这个：

```
$('#pf-locations .city label.checked').each(function() { // keeping ref of label
    cities.push($(this).prev(':checkbox').val()); // using label ref get input value
}); 
```

# javascript - Javascript更改字体颜色

> ID：10982489
> 
> 赞同：4
> 
> 时间：2012-06-11T14:51:05.840
> 
> 标签：javascript

我需要更改字体颜色。

我有以下内容：

```
 var clr="green";

    <font color=clr>' + onlineff + ' </font> 
```

字体颜色不会变为绿色。只是想知道如何解决这个问题。

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-06-11T14:58:02.220

考虑将您的标记更改为：

```
<span id="someId">onlineff</span> 
```

然后你可以使用这个脚本：

```
var x = document.getElementById('someId');
x.style.color = '#00FF00'; 
```

在这里看到它：http: [//jsfiddle.net/2ANmM/](http://jsfiddle.net/2ANmM/)

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-06-11T14:56:14.973

不要使用`<font color=`. 这是一种非常老式的文本样式设置方式，一些浏览器甚至不再支持它。

[caniuse](https://caniuse.com/#search=%3Cfont%3E)将其列为过时的，强烈建议不要使用该`<font>`标签。[MDN](https://developer.mozilla.org/en-US/docs/Web/HTML/Element/font)也是一样

> 不要使用这个元素！虽然曾经在 HTML 3.2 中规范化，但在 HTML 4.01 中已弃用，同时所有与样式相关的元素同时在 HTML5 中过时。
> 
> 从 HTML 4 开始，HTML 不再传达样式信息（在元素或每个元素的样式属性之外）。对于任何新的 Web 开发，样式应该只使用 CSS 编写。
> 
> 元素的前一种行为可以使用 CSS Fonts CSS 属性来实现，甚至更好地控制。

如果我们查看 4.01 标准的发布时间，我们会发现它是在 1999 年发布的

[![已发布 html5 标准](../Images/5662d0c169fd590ad10615f3157be003.png)](https://i.stack.imgur.com/mJSIH.png)

where `<font>`was [official deprecated](https://www.w3.org/TR/html401/present/graphics.html#edef-FONT)，这意味着它仍然受支持，但不应再使用，因为它将在较新的标准中消失。

而在 2014 年 8 月发布的[html5](https://www.w3.org/TR/2014/REC-html5-20141028/obsolete.html#non-conforming-features)标准中，它被认为已过时且不符合标准。

为了达到预期的效果，使用 spans 和 css：

```
function givemecolor(thecolor,thetext)
{
    return '<span style="color:'+thecolor+'">'+thetext+'</span>';
}
document.write(givemecolor('green',"Hello, I'm green"));
document.write(givemecolor('red',"Hello, I'm red"));
```

```
body {
  background: #333;
  color: #eee;
}
```

**更新**

这个问题和答案来自 2012 年，现在我不建议使用 document.write，因为它需要在第一次呈现文档时执行。我当时使用过它，因为我认为 OP 希望以这种方式使用它。我建议使用更传统的方式在您希望插入它们的位置插入您希望使用的自定义元素，而不依赖于文档呈现以及脚本执行的时间和地点。

本国的：

```
function givemecolor(thecolor,thetext)
{
    var span = document.createElement('span');
    span.style.color = thecolor;
    span.innerText = thetext;
    return span;
}
var container = document.getElementById('textholder');
container.append(givemecolor('green', "Hello I'm green"));
container.append(givemecolor('red', "Hello I'm red"));
```

```
body {
 background: #333;
 color: #eee;
}
```

```
<h1> some title </h1>
<div id="textholder">
</div>
<p> some other text </p>
```

jQuery

```
function givemecolor(thecolor, thetext)
{
    var $span = $("<span>");
    $span.css({color:thecolor});
    $span.text(thetext);
    return $span;
}
var $container = $('#textholder');
$container.append(givemecolor('green', "Hello I'm green"));
$container.append(givemecolor('red', "Hello I'm red"));
```

```
body {
 background: #333;
 color: #eee;
}
```

```
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
<h1> some title </h1>
<div id="textholder">
</div>
<p> some other text </p>
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2014-09-15T06:18:21.160

html代码

```
<div id="coloredBy">
    Colored By Santa
</div> 
```

javascript代码

```
document.getElementById("coloredBy").style.color = colorCode; // red or #ffffff 
```

我认为这很容易使用

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-11T14:52:23.167

试试这样：

```
var clr = 'green';
var html = '<font color="' + clr + '">' + onlineff + ' </font>'; 
```

话虽如此，您应该避免使用`<font>`标签。现在已弃用。使用 CSS 更改标记中给定元素的样式（颜色）。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2018-10-30T19:00:43.733

您可以使用 HTML 标签在 JavaScript 上一行应用字体大小、字体颜色，也可以使用`.fontcolor()`定义颜色的`.fontsize()`方法、定义字体大小的`.bold()`方法、定义粗体的方法等。这些称为[JavaScript内置函数](https://www.tutorialspoint.com/javascript/javascript_builtin_functions.htm)。

*   以下是一些 JavaScript 内置函数的列表：

    .big()
    .small()
    .italics() .fixed()
    .strike()
    .sup(
    )

*   以下内置函数需要参数：

    .fontsize() //eg: 要应用的数字大小`.fontsize(4)`

    .fontcolor("") //eg: 要在字符串中应用的颜色`.fontcolor("red")`

    .txt.link("") //eg: 可链接为字符串的url`.link("www.test.com")`

    .toUpperCase() //eg: 转换成大写后应用于字符串`.toUpperCase()`

*   记住语法是：`string.functionName()`例如：

    `var txt = "Hello World!"; txt.bold();`

*   这也可以在一行中完成：

    `var txt = "Hello World!".bold();`

    结果将是：**Hello World！**

*   您可以在一行中使用多个内置函数，一个接一个地添加。例如：

    "10/22/2018".fontcolor("red").fontsize(4).bold()

*   以下是我如何在我的 JavaScript 代码中使用它来使用 HTML 标记和 JavaScript 函数更改字体（颜色、大小、粗体）的示例：

> `vForm.message = "<HTML><font size = 4 color = 'red'><b> Application Deadline was </b></font></HTML> " + "10/22/2018".fontcolor("red").fontsize(4).bold(); /* setting HTML font color, size, bold and combined them with JavaScript functions to change font color, size, bold in JavaScript code */`

*   结果如下：

> **[![申请截止日期为 2018 年 10 月 22 日](../Images/cc5db2375a980952b2eef3374e928ef8.png)](https://i.stack.imgur.com/eHzUb.png)**

# android - Android 上的 jQuery Mobile - 文本框和数字键盘问题

> ID：10982492
> 
> 赞同：0
> 
> 时间：2012-06-11T14:51:12.160
> 
> 标签：android, html, jquery-mobile, cordova

我正在为 iOS 和 Android 开发一个带有 PhoneGap 和 jQuery Mobile 的应用程序。我的代码在 iOS 5 中运行良好，但我在使用 Android 2.3.* 时遇到了很多问题。

1.  首先 - Android 不支持 input type="date"，就像 iOS 一样。有没有办法使用某种简单的插件来显示日期选择器？

2.  此“错误”（或功能）仅在设备上调试时出现，而不是在模拟器中。看看我在应用程序中登录页面的截图：

![文本框错误](../Images/4758bbb8e9ae2a87a919de774b034822.png)

当我选择用户名文本框时，键盘和一个白框会显示。白色框包含文本密码。真的很奇怪。用户名文本框的代码：

```
<label for="username" class="i18n-login-username-label">Username: </label>
<input type="text" value="" name="username" id="username" data-form="ui-body-a" /> 
```

有没有办法摆脱那个白色、丑陋的文本框并将文本直接写入用户名文本框？

3 这是应用程序中的许多设置页面之一，用户应在几个字段中输入数字。我使用 input type="tel" 来显示数字键盘。在 iOS 上工作得很好，数字键盘也出现在 Android 中，但无法关闭它（没有关闭按钮，也无法通过点击其他地方来关闭），因此无法离开页面，因为页脚菜单是'不可见。左上角出现一个白色框，标题（带有后退按钮）消失：

![数字键盘](../Images/636781e3a13f58c1ae96f9c18b40e3ba.png)

为此的HTML：

```
<ul data-role="listview" data-inset="true">
   <li >
      <div class="ui-grid-a">
         <div class="ui-block-a setta">
            <label for="ordersdaygoal" class="i18n-settings_orders-daygoal-label">Per day: </label>
         </div>
         <div class="ui-block-b settb">
            <input type="tel" name="ordersdaygoal" id="ordersdaygoal" value="0" mini="true" style="width: 150px;" maxlength="9" /> 
         </div>
      </div>
   </li>
...
</ul> 
```

有什么建议可以解决这些 Android 奥秘吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-22T05:39:44.307

我只能帮你解决你的第一个问题，我们使用这个 jquery 插件作为日期，它是高度可配置的： [https ://github.com/jtsage/jquery-mobile-datebox](https://github.com/jtsage/jquery-mobile-datebox)

# javascript - 如何只打印 DIV 内的一个区域

> ID：10982493
> 
> 赞同：2
> 
> 时间：2012-06-11T14:51:15.703
> 
> 标签：javascript, jquery

我有一个带有顶部导航区域、侧面导航区域、控制按钮区域和中间某处的`id="content"`包含内容的 DIV 的页面。

我希望能够只打印该 DIV 的内容。我意识到我有很多行代码使我的其他区域不可见并调整所有内容的大小，但是还有其他选择吗？有什么方法可以打印 DIV 的内容吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-11T14:55:21.177

看看使用[媒体类型](http://www.w3.org/TR/CSS2/media.html)- 特别是`@media print`- 在您的 CSS 中指定仅适用于打印的样式。

这样，您可以编写一个样式表来隐藏除“DIV 内的区域”之外的所有内容。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-11T14:56:20.473

使用 css 打印样式表，将 display:none 放在您不想打印的字段中。像这样使用标签链接：

链接 rel="stylesheet" type="text/css" media="print" href="print.css"

或@媒体打印{

```
BODY { font-size: 10pt } 
```

}

# facebook - 刷新 Fb 评论插件

> ID：10982495
> 
> 赞同：4
> 
> 时间：2012-06-11T14:51:20.357
> 
> 标签：facebook, comments, refresh

我正在尝试添加一个链接以允许用户刷新我页面上的评论插件，以便他们可以看到其他人的其他帖子。

我想在不刷新整个页面的情况下做到这一点。

页面上有一个播放音频的 html5 播放器，因此我不想打断该播放器。

目前我正在使用标准 -

我尝试了 jQuery 方法给 div 一个 id 并有一个头脚本，计数为 10 并重新加载 div 小部件，它似乎重新加载小部件，但它不会更新评论插件的内容以显示其他的帖子，只是您自己添加的帖子。要查看所有更新，您必须完全刷新页面，我不想这样做。

由于高度问题和额外的滚动条等，我试图避免使用 iFrame。

任何想法，将不胜感激

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-11T17:01:25.147

我不确定您要做什么，但是您可以使用[FB.XFBML.parse](http://developers.facebook.com/docs/reference/javascript/FB.XFBML.parse/)方法来刷新插件。

唯一的事情是您需要首先从 dom 中删除旧插件，然后添加新的 html5/xfbml 占位符（单击“获取代码”时从评论插件页面获得的内容），然后使用该`FB.XFBML.parse`方法。

# mongodb - 集合中形状内的 Mongodb GeoSpatial 查询

> ID：10982497
> 
> 赞同：0
> 
> 时间：2012-06-11T14:51:24.703
> 
> 标签：mongodb, geospatial

我有一个在字段（中心）上有一个二维地理空间索引的集合，该字段是一个长/纬度数组，该集合也有一个半径字段。所以每个项目都可以代表一个圆圈。我知道 mongodb 有一个运算符 $within，我想获取包含特定点 [long,lat] 的所有项目的列表，但似乎我只能检查哪些点在特定形状内。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-11T15:27:16.377

你是对的，现在，你不能做你想做的事。[请在http://jira.mongodb.org](http://jira.mongodb.org)提交功能请求，因为我找不到已经存在的功能请求。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-25T16:18:33.413

这就是我在我的情况下使用基本网[格](http://en.wikipedia.org/wiki/Grid_%28spatial_index%29)解决它的方法（即得到一个覆盖给定点的形状） 。它的*精度有限*，具体取决于网格分辨率：

1.  创建一个集合“网格”，其点覆盖所有形状的公共边界框（在 javascript 中使用嵌套的 for 循环）
2.  在网格上创建二维索引
3.  对于每个形状，搜索位于该形状内的所有网格点；用形状的 id 标记每个网格点（在网格点上使用数组属性）

要查看一个点的形状，请搜索最近的网格点，并返回其分配的形状属性。首先检查公共边界框，因为它外面的点应该总是返回“不是任何形状”，而不是使用最近的网格点。

根据您需要的精度，这可能是也可能不是可用的解决方案。准确性取决于您在网格中放置了多少点，并且您可以根据网格的本地密度做一些智能的事情。

# javascript - Soundcloud 当前曲目信息

> ID：10982504
> 
> 赞同：0
> 
> 时间：2012-06-11T14:51:44.597
> 
> 标签：javascript, jquery, api, soundcloud

关于[以下网站](http://cosystudios.com/thecosystudio.co.uk/thecosystudio.html)

很简单，但我似乎在这方面遇到了第一个障碍。

当前使用以下代码尝试从当前活动的soundcloud播放器（其中有4个，类SCiframe）中获取曲目名称和艺术家

```
$(function () {
    var $iframeElement = document.getElementsByClassName('SCiframe');
    var $widgets = SC.Widget(iframeElement);
    widgets.bind(SC.Widget.Events.READY, function () {
        widgets.bind(SC.Widget.Events.PLAY, function () {
            // get information about currently playing sound
            widgets.getCurrentSound(function (currentSound) {
                $('#trackInfo').append('Current Track: ' + currentSound.get('') + '');
            });
        });
    });
}); 
```

一方面，控制台将“iframeElement is not defined”注册为初始错误。但总而言之，我似乎无法从中获得任何有用的数据来处理。

我在哪里错了？

向社区致以最诚挚的问候。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-11T15:15:57.350

您的变量名称不正确，它们的开头有“$”，

```
$(function () {
    var $iframeElement = document.getElementsByClassName('SCiframe');
    var $widgets = SC.Widget($iframeElement);
    $widgets.bind(SC.Widget.Events.READY, function () {
        $widgets.bind(SC.Widget.Events.PLAY, function () {
                // get information about currently playing sound
                $widgets.getCurrentSound(function (currentSound) {
                $('#trackInfo').append('Current Track: ' + currentSound.get('') + '');
            });
        });
    });
}); 
```

**编辑：**

getElementsByClassName 返回一个结果数组。因此，如果只有一个带有“SCiframe”类名的 iframe，您应该在 SC.Widget 中将 $iframeElement 的第一个索引作为参数传递，试试这个，

```
$(function () {
    var $iframeElement = document.getElementsByClassName('SCiframe');
    var $widgets = SC.Widget($iframeElement[0]);
    $widgets.bind(SC.Widget.Events.READY, function () {
        $widgets.bind(SC.Widget.Events.PLAY, function () {
            // get information about currently playing sound
            $widgets.getCurrentSound(function (currentSound) {
                $('#trackInfo').append('Current Track: ' + currentSound.get('') + '');
            });
        });
    });
}); 
```

# python - 没有 root 的 HPC（suse linux）上的 Python（安装问题）

> ID：10982505
> 
> 赞同：1
> 
> 时间：2012-06-11T14:51:44.837
> 
> 标签：python, linux, installation, suse

我正在尝试在没有 root 访问权限的 HPC 上安装我自己的 python 版本，这样我就可以使用自己的包。到目前为止，我正把头撞在墙上，一无所获。实际上，我有自己版本的 python、numpy、ipython 和其他一些源代码包（尽管 numpy 没有使用 Lapack 或 Atlas 进行优化）。我需要 h5py，所以我从源代码中获取了 szip 和 hdf5 并安装了它们并让它们运行起来。H5py 仍在抱怨，我找不到它正在寻找的任何 .so 库（我想我需要下载开发 hdf5，也许我没有，仍然对此感到困惑）。好吧，我试图从头开始。现在我什至无法从源代码安装 python-2.7。我运行“./configure --prefix=/u/myusername/local”，然后运行“make install”，我得到这个错误：

```
/opt/cray/xt-asyncpe/4.5/bin/cc -Xlinker -export-dynamic -o python \
Modules/python.o \
libpython2.7.a -lresolv -ldl -lutil -lm
pgcc-Error-Unknown switch: -Xlinker
pgcc-Error-Unknown switch: -export-dynamic
make: *** [python] Error 1 
```

如果我执行“export CC=/usr/bin/gcc”然后重复最后两个步骤，我会收到此错误：

```
/usr/bin/gcc -pthread -DNDEBUG -g -fwrapv -O3 -Wall -Wstrict-prototypes Parser/acceler.o        Parser/grammar1.o Parser/listnode.o Parser/node.o Parser/parser.o Parser/parsetok.o Parser/bitset.o Parser/metagrammar.o Parser/firstsets.o Parser/grammar.o Parser/pgen.o Objects/obmalloc.o Python/mysnprintf.o Python/pyctype.o Parser/tokenizer_pgen.o Parser/printgrammar.o Parser/pgenmain.o -lpthread -ldl -lutil -o Parser/pgen
Parser/tokenizer_pgen.o: In function `.st7206':
tokenizer_pgen.c:(.data+0x308): undefined reference to `__pgdbg_stub'
Parser/printgrammar.o:(.data+0x0): undefined reference to `__pgdbg_stub'
Parser/pgenmain.o:(.data+0x0): undefined reference to `__pgdbg_stub'
collect2: ld returned 1 exit status
make: *** [Parser/pgen] Error 1 
```

注意：如果我执行“export CC=/usr/bin/cc”并改用这个 cc，我会得到与 gcc 相同的错误。

所以，简而言之，我完全感到沮丧和迷失......谷歌无法帮助我。我知道我问了很多问题，但如果有人能提供帮助，我将永远感激不尽。

提前感谢您的时间。

# mysql - MYSQL - 如何避免主 ID 浪费？

> ID：10982509
> 
> 赞同：2
> 
> 时间：2012-06-11T14:51:50.373
> 
> 标签：mysql, load, auto-increment

通过多个加载语句插入记录时如何避免跳过主ID？

我通过 LOAD 语句将包含 150 条记录的文件插入到表中。

插入后表中的最后一个主 id 是 150。

现在，当我通过 load 语句插入另一个包含 100 条记录的文件时，分配给第一条记录的主 ID 是 251 而不是 151。

我如何避免这些主要的身份浪费？

更多信息：例如：

```
mysql> desc test_data;
+------------+------------------+------+-----+---------+----------------+
| Field      | Type             | Null | Key | Default | Extra          |
+------------+------------------+------+-----+---------+----------------+
| id         | int(10) unsigned | NO   | PRI | NULL    | auto_increment |
| name       | varchar(255)     | NO   | UNI | NULL    |                |
| image      | varchar(255)     | NO   |     | NULL    |                |
| created_at | datetime         | NO   |     | NULL    |                |
+------------+------------------+------+-----+---------+----------------+
4 rows in set (0.00 sec) 
```

我的负载声明 -

```
 LOAD DATA LOCAL INFILE '~/test_2.dat' 
       INTO TABLE test_data 
       FIELDS TERMINATED BY '|' 
       LINES TERMINATED BY '\n' 
       set created_at=CURRENT_TIMESTAMP; 
```

文件 test_2.dat 中的样本数据：

```
|Peter|peter.jpg
|sam|sam.jpg
|radnor|radnor.jpg
|bruce|bruce.jpg 
```

这是加载该文件后的表结构。

```
mysql> show create table test_data;

| test_data | CREATE TABLE `test_data` (
  `id` int(10) unsigned NOT NULL AUTO_INCREMENT,
  `name` varchar(255) NOT NULL,
  `image` varchar(255) NOT NULL,
  `created_at` datetime NOT NULL,
  PRIMARY KEY (`id`),
  UNIQUE KEY `name` (`name`)
) ENGINE=InnoDB AUTO_INCREMENT=8 DEFAULT CHARSET=latin1 | 
```

现在，此表中的 max(id) 为 4。但为什么 AUTO_INCREMENT 值现在设置为“8”？不应该设置为“5”吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-11T14:56:12.790

您可以在主 ID 上将 AUTO_INCREMENT 标记为 true 以在加载期间跳过它们。更多信息可以帮助更好地回答。

# c++ - QToolButton 和颜色

> ID：10982512
> 
> 赞同：0
> 
> 时间：2012-06-11T14:52:01.370
> 
> 标签：c++, qt, qt4

我正在尝试做一个简单的设计来选择一种颜色，并且我正在使用 QToolButton 打开一个 QColorDialog。我的问题是我希望 QToolButton 具有选定的颜色，但我只成功设置了背景颜色，这不是我想要的。

这是一张图片：

![在此处输入图像描述](../Images/d8920d87455576123da1060b32d32c9f.png)

我的代码：

```
QColor color = QColorDialog::getColor(m_couleur);
if (color.isValid()) m_couleur=color;
m_labelCouleur->setPalette(QPalette(m_couleur));
m_labelCouleur->setAutoFillBackground(true);
m_buttonCouleur->setPalette(QPalette(m_couleur));
m_buttonCouleur->setAutoFillBackground(true); 
```

基本上我希望 QToolButton 看起来像这样：

![在此处输入图像描述](../Images/e15969ec0e9f22f1d51111c85f4a524e.png)

编辑：谁能向我解释为什么网站不允许我在开头添加“大家好”？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-11T15:13:02.747

```
QColor color = QColorDialog::getColor(m_couleur);
QPixmap px(20, 20);
px.fill(color);
m_buttonCouleur->setIcon(px); 
```

在这种情况下不涉及 CSS（当然对我来说）是大专业人士

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-11T15:05:02.957

使用该[`setStylesheet`](http://qt-project.org/doc/qt-4.8/qapplication.html#styleSheet-prop)功能来更改按钮的背景颜色

```
m_buttonCouleur->setStyleSheet(QString("QToolButton{ background: %1; }").arg(m_couleur.name())); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-11T15:05:26.867

通过使用 QPushButton 并将其样式表设置为颜色选择器的结果，我已经做到了这一点。我想工具按钮应该是一样的。

```
button->setStyleSheet(QString("background-color: %1; "
                              "border: 1px; "
                              "border-color: black; "
                              "border-style: outset;").arg(color.name())); 
```

# extjs - Sencha: Uncaught SyntaxError: Unexpected Identifier

> ID：10982514
> 
> 赞同：1
> 
> 时间：2012-06-11T14:52:04.983
> 
> 标签：extjs

我正在谷歌 Chrome 浏览器中测试这个 javascript，它给了我一个错误：Uncaught SyntaxError: Unexpected Identifier。

```
 Ext.application({
    name: 'Sencha',
    launch: function() {
        Ext.create("Ext.tab.Panel",{
        fullscreen: true,
         tabBarPosition: 'bottom',

        var image = Ext.widget('image',{
            xtype: "image",
            src: "images.jpg",
            scope: this
        });
    this.add([image]);
        });
    }
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-08T21:55:06.503

通过 JSLint 运行您的代码。你有语法错误！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-06T16:15:08.973

你有语法错误。尝试这个 ：

```
Ext.application({
    name: 'Sencha',
    launch: function() {
        Ext.create("Ext.tab.Panel",{
            fullscreen: true,
            tabBarPosition: 'bottom'
        });

        var image = Ext.widget('image',{
            xtype: "image",
            src: "images.jpg",
            scope: this
        });

        Ext.Viewport.add([image]);
    }
}); 
```

# c# - 我应该使用哪种类型/类来映射不同的值？

> ID：10982517
> 
> 赞同：0
> 
> 时间：2012-06-11T14:52:14.393
> 
> 标签：c#, .net

我有一个如下所示的后端表，我正在使用 ado.net 阅读它。

我试图将其转换为具有键值对的字典，但我不知道如何映射键和值，以便在阅读时`code 1`可以返回其类别名称，而当我将 2`code 3`作为子代码阅读时，我可以同时阅读其对应的类别和子类别？（例如，旧的，三个月的）。

是否有任何其他类型/类可用于实现此功能？

```
code    Sub_Code    Category    Sub_Category
1             1     NEW                  NEW
2             1         Old             OneMonth
2             2         Old                 TwoMonth
2             3         Old                 ThreeMonth
2             4         Old                 Ninemonth
5             4     APPOINTMENT         APPOINTMENT MADE
9             4         Invalid             LANGUAGE BARRIER 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-11T15:05:20.533

您有多种选择，具体取决于您需要对数据执行的操作、数据更改的频率等。一些明显的选择是：

## 嵌套类型

创建一个自定义类型来保存您的类别及其子类别。这样做的好处是，如果没有子类别，您可以跳过子类别，并且您的数据类型可以准确地映射到您的业务对象。

```
public class Category 
{
  public int Id;
  public string Name;
  Dictionary<int, string> Subcategories = new Dictionary<int, string>();
}

Dictionary<int, Category> Categories; 
```

（我也会考虑 a `KeyedCollection`here 可以直接`Id`从 a`Category`作为键提取。）

缺点：添加或检索子类别需要更多工作，因为您必须进行两次查找：

```
var subcategory = Categories[1].Subcategories[1]; 
```

## 一个 4 元组（四元组？）

如果您的数据结构很少更改，您可以使用 4-field `Tuple<>`：

```
List<Tuple<int, int, string, string>> Categories;
var subcategory = Categories.Where(x => Item1 == 1 && Item2 == 1); 
```

这里最大的缺点是它的索引不是很好。`Tuples`您可以通过使用两个（一个键，一个值）来缓解这一点，但代价是更加复杂：

```
Dictionary<Tuple<int, int>, Tuple<string, string>> Categories; 
```

但是 IMO 有点乱，那时我会选择一个自定义类。

## 拆分集合

将类别名称和子类别拆分为单独的集合：一个包含类别 id -> 名称映射，另一个包含类别 id -> 子类别映射：

```
Dictionary<id, string> CategoryNames;
Dictionary<id, Dictionary<id, string>> Subcatgories; 
```

这比`Tuple`解决方案更灵活，但不涉及自定义数据类型，因此它是一个更“快速和肮脏”的解决方案。此外，如果您通常发现自己*只*关心其中一个，那么将数据分开可能会使事情变得更有效率。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-11T14:58:14.187

您也可以使用 Dictionary 作为主字典的值。因此，您将使用 dict[category][sub] 访问您的数据

另一种选择是使用元组作为键，它将主键和辅助键“编码”为单个唯一键

# c# - WPF模式窗口作为WinForms中的工具窗口消失

> ID：10982523
> 
> 赞同：6
> 
> 时间：2012-06-11T14:52:35.713
> 
> 标签：c#, .net, wpf, windows, winforms

我想知道是否有人可以帮助我解决这个相当莫名其妙的情况。我有一个 WPF 表单`myForm`，我在 WinForm 应用程序中模态显示（不使用 ElementHost）。如果我使用默认的 WindowStyle 并显示在任务栏中，一切正常。但是现在我不希望表单显示在任务栏中或包含最小化按钮，因此我做了以下操作：

```
MyForm myForm = new MyForm();
myForm.ShowInTaskbar = false;
myForm.WindowStyle = System.Windows.WindowStyle.ToolWindow;
myForm.WindowStartupLocation =System.Windows.WindowStartupLocation.CenterOwner;
myForm.ShowDialog(); 
```

现在，wpf 表单以模态方式显示，并且没有最小化按钮。如果我现在在任务栏中选择“父”winform 应用程序，wpf 表单就会消失，并且似乎没有任何方法可以返回它！我读过[这篇](https://stackoverflow.com/questions/3760571/showdialog-makes-app-window-disappear-from-windows-alt-tab-list)相似但不一样的文章（纯 WPF 应用程序），所以我可以理解为什么主应用程序没有出现在 ALT+TAB 菜单中，但是谁能告诉我如何返回 wpf 表单？

提前致谢。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-09T16:27:49.260

的使用`WindowsInteropHelper`允许您使用 Winforms-form 包装托管的 WPF-form 并将其父级设置为 Winforms 控件，从而防止 WPF 表单消失（正如 dowhilefor 和 Hans Passant 所指出的）

例如：

```
// Use the interop helper for the specified wpf window hosted by the win32 owner
WindowInteropHelper wih = new WindowInteropHelper(wpfForm);
wih.Owner = this.someWin32FormsControl.Handle; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-11T15:18:20.330

这与 Winforms 或 WPF 无关，这是 Windows 运行的方式。我认为您拥有的唯一解决方案是连接您的方式；即拦截`Activated`您的 Winforms 表单上的事件，如果您的 WPF 工具窗口可见，则将该窗口向前移动并赋予其焦点。

# php - 获取 SQL 表的唯一值并使用 PHP 回显

> ID：10982525
> 
> 赞同：4
> 
> 时间：2012-06-11T14:52:39.267
> 
> 标签：php, mysql, sql, database

我有一个包含 200 多个值的 MySQL 表。我桌子上的一列是“日期”。在所有 200 个值中，只有 5 个唯一日期。

如何列出日期的唯一值并用 php.ini 回显它们。例如，没有取回 200 个日期实例，而只有 5 个。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-11T14:53:19.350

采用[`DISTINCT`](http://dev.mysql.com/doc/refman/5.1/en/select.html)

```
SELECT DISTINCT `date` FROM `tablename`.... 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-11T14:54:25.830

```
SELECT myDate FROM myTable GROUP BY myDate 
```

或者...

```
SELECT DISTINCT myDate FROM myTable 
```

`DISTINCT`是一个很好的简写，但如果你想将查询用于其他目的，如果经常限制你有点太多。所以我更喜欢这个`GROUP BY`版本。

# ruby-on-rails-3 - 咖啡脚本中的for循环

> ID：10982529
> 
> 赞同：1
> 
> 时间：2012-06-11T14:52:51.717
> 
> 标签：ruby-on-rails-3, api, coffeescript

我正在使用 rails3.2 并使用咖啡脚本

在我的咖啡脚本中，我有一个 for 循环，对于每个循环，我正在执行一个 API 调用来获取结果并将结果附加到相应的 dom

像

```
for ajaxLink in _ajaxRenderLinks
      _template = $(ajaxLink).attr('data-link-template')
      apiURL = $(ajaxLink).attr('data-link-url')
      console.log($(ajaxLink))
      Myapp.API.execute(apiURL, 'get', {}, (data) ->
        console.log($(ajaxLink))
        if data isnt "" or data isnt undefined
          console.log($(ajaxLink))
          $(ajaxLink).empty()
          $(ajaxLink).append($(HandlebarsTemplates[Myapp.TemplateRoutes.path(_template)](data)))) 
```

在上面的代码中，我有两个链接（一个是链接，另一个是 ul 链接） ajaxRenderLinks 有这些 a 和 ul，它们有要渲染的模板和获取结果的 url。第一个console.log 打印第一个链接a，然后对其运行API 调用，然后对其运行API 调用，然后打印第二个链接ul 并为其运行API CALl。最后，它尝试将最后一个结果附加到第二个链接，而不是对每个链接进行附加，因为如果数据不是“”或数据不是未定义，它在里面的 ajaxLink 只打印第二个链接而不打印第一个链接，然后是第二个链接

如何解决这个问题

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-11T15:22:20.420

看起来像一个经典的“循环中的变量闭包”情况。因为该`execute`函数是异步的，所以它引用`ajaxLink`了 ，它随着循环的循环而改变。因此，当`execute`调用 's 回调时，`ajaxLink`可能与`execute`调用自身时的情况不同。

试试这个

```
for ajaxLink in _ajaxRenderLinks
  do (ajaxLink) ->         # wrap in an immediately-invoked function
    ajaxLink = $(ajaxLink) # save this rather than calling $(...) again and again
    _template = ajaxLink.attr('data-link-template')
    apiURL = ajaxLink.attr('data-link-url')
    Myapp.API.execute(apiURL, 'get', {}, (data) ->
      if data? and data isnt ""
        ajaxLink.empty().append($(HandlebarsTemplates[Myapp.TemplateRoutes.path(_template)](data)))) 
```

# cakephp - CakePHP HABTM – 列出所有相关项目

> ID：10982535
> 
> 赞同：0
> 
> 时间：2012-06-11T14:53:22.877
> 
> 标签：cakephp, has-and-belongs-to-many

`events`我对 CakePHP 非常陌生（而且对 MVC 概念也不太陌生），并且正在尝试构建一个在和之间具有 HABTM 关系的系统`participants`。我希望索引页面在表格中显示事件列表，每行的一个单元格包含完整的参与者列表。到目前为止，我的表格显示循环代码如下所示：

```
<?php foreach ($events as $event): ?>
<tr>
    <td><?php echo $event['Event']['id']; ?></td>
    <td><?php echo $event['Event']['title']; ?></td>
    <td><?php       
            foreach ($participants as $participant):
                echo $participant['Participant']['name'];
            endforeach;
        ?></td>
</tr>
<?php endforeach; ?> 
```

我知道这是错误的，但我在这个主题上尝试了许多变体（在我看来，所有这些变体都同样错误），例如`$event['Participant']...`没有任何效果。我知道答案很简单，但我不知道它是什么，四处搜索只会给出相似但不够相似的答案的答案。我需要写什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-11T19:55:25.183

`recursive`考虑到不在`0`您的控制器中，我会做这样的事情。

```
<?php foreach ($events as $event): ?>
<tr>
    <td><?php echo $event['Event']['id']; ?></td>
    <td><?php echo $event['Event']['title']; ?></td>
    <td><?php       
        foreach ($event['Participant'] as $participant):
            echo $participant['name'];
        endforeach;
    ?></td>
</tr>
<?php endforeach; ?> 
```

这是未经测试的。因此，如果您在此解决方案上需要更多帮助，请告诉我。

# entity-framework - 更新数据库后实体框架崩溃

> ID：10982536
> 
> 赞同：2
> 
> 时间：2012-06-11T14:53:23.523
> 
> 标签：entity-framework, entity

我目前正在运行 EF 4.3.1，它最近从 4.1 升级，使用数据库优先模型。我的模型和对象也分布在不同的组件中。

然而，随着我的开发，我发现实体框架几乎无法使用，因为尽管有“从数据库更新模型”选项，但我很少能这样做而不会导致设计人员引发错误。

如果我向表中添加索引，创建 fk 关系，那么当我之后尝试对数据库执行任何操作时，设计器很有可能会显示“对象空引用异常”。更难的是，错误信息就是那么模糊，并没有指出它实际上可能是什么。

我在别处问了一个问题，我得到的答复是重新创建 edmx。当我有 60 到 80 个实体时，肯定不是吗？

我不敢相信我是唯一一个遇到问题的人，我不敢相信任何开发人员都能忍受这种情况，但我无法在任何地方找到有关问题所在的信息 - 如果事实上不是“设计”。

任何人都可以帮忙吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-17T10:14:57.877

崩溃的原因是由于 edmx 和 dbcontext 之间的不同步关系。

当更改，甚至刷新应用于 edmx 时，您必须在退出项目之前运行自定义工具更新。不这样做会导致 edmx. 损坏，如果不恢复/重新创建它，我还没有设法修复它。

虽然大部分时间这都在你的手中，但显然在某些情况下这超出了你的控制范围，应该由框架管理，而不是依赖于你的记忆能力和上帝的旨意。希望从长远来看，这将包含在框架中。

# javascript - javascript 'this' 问题：以编程方式隐藏 jQuery 聚光灯

> ID：10982539
> 
> 赞同：0
> 
> 时间：2012-06-11T14:53:40.003
> 
> 标签：javascript, jquery-plugins

我正在尝试增强（非常好的）[jQuery Spotlight 插件](http://dev7studios.com/demo/jquery-spotlight/)，以便我可以以编程方式调用“隐藏”行为。

我已将相关代码移动到一个`hide()`函数中，当从 Spotlight 本身中调用它时它工作正常。但是当我尝试从聚光灯之外调用它时，什么也没有发生。我已经检查过它`spotlight.hide`实际上定义为 type `function`，但调用它似乎什么也没做。

```
(function($) {

    $.fn.spotlight = function(options) {

        var hide = function() {
            alert('hiding...');   /* never gets invoked when called from outside spotlight */
            if(settings.animate){
                spotlight.animate({opacity: 0}, settings.speed, settings.easing, function(){
                    if(currentPos == 'static') element.css('position', 'static');
                    element.css('z-index', '1');
                    $(this).remove();
                    // Trigger the onHide callback
                    settings.onHide.call(this);
                });
            } else {
                spotlight.css('opacity', '0');
                if(currentPos == 'static') element.css('position', 'static');
                element.css('z-index', '1');
                $(this).remove();
                // Trigger the onHide callback
                settings.onHide.call(this);
            }
        };

        // Default settings
        settings = $.extend({}, {
            opacity: .5,
            speed: 400,
            color: '#333',
            animate: true,
            easing: '',
            exitEvent: 'click',
            onShow: function(){},
            onHide: function(){}
        }, options);

        // Do a compatibility check
        if(!jQuery.support.opacity) return false;

        if($('#spotlight').size() == 0){
            // Add the overlay div
            $('body').append('<div id="spotlight"></div>');

            // Get our elements
            var element = $(this);
            var spotlight = $('#spotlight');

            // Set the CSS styles
            spotlight.css({
                'position':'fixed', 
                'background':settings.color, 
                'opacity':'0', 
                'top':'0px', 
                'left':'0px', 
                'height':'100%', 
                'width':'100%', 
                'z-index':'9998'
            });

            // Set element CSS
            var currentPos = element.css('position');
            if(currentPos == 'static'){
                element.css({'position':'relative', 'z-index':'9999'});
            } else {
                element.css('z-index', '9999');
            }

            // Fade in the spotlight
            if(settings.animate){
                spotlight.animate({opacity: settings.opacity}, settings.speed, settings.easing, function(){
                    // Trigger the onShow callback
                    settings.onShow.call(this);
                });
            } else {
                spotlight.css('opacity', settings.opacity);
                // Trigger the onShow callback
                settings.onShow.call(this);
            }

            // Set up click to close
            spotlight.live(settings.exitEvent, hide);
        }

        // Returns the jQuery object to allow for chainability.  
        return this;
    };

})(jQuery); 
```

我安装它：

```
 var spotlight = $('#media-fragment').spotlight({
          opacity: .5,
          speed: 400,
          color: '#333',
          animate: false,
          easing: '',
          exitEvent: 'click',
          onShow: function(){},
          onHide: function(){}
      }); 
```

然后隐藏它我做：

```
spotlight.hide(); 
```

我很确定这`this`涉及范围或问题。

**更新：** [https](https://gist.github.com/2910643) ://gist.github.com/2910643 上的完整解决方案。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-11T14:56:17.253

尝试改变：

```
var hide = function() { 
```

到：

```
this.hide = function() { 
```

`var`在父范围内定义函数或变量的范围，即本质上是`protected`. `this`另一方面，将在父对象上显式设置它`prototype`，并使其可公开访问。

# java - SWT GC：在 Windows 上未正确绘制颜色

> ID：10982544
> 
> 赞同：3
> 
> 时间：2012-06-11T14:53:57.730
> 
> 标签：java, windows, linux, swt, zest

**仍在寻找解决方案**

我有以下问题：我使用 SWT`GC`将 GraphNodes 中包含的图形绘制到 Zest Graph 中。就 Linux 和 MacOS 而言，一切正常。但是当我在 Windows 上运行我的 jar 时，节点看起来很奇怪。颜色未正确绘制且没有透明度（通过 实现`setAlpha()`）`GC`。

这是两个屏幕截图来说明我的问题：

Linux：

![在此处输入图像描述](../Images/935e8aba2c13d968a21e18f07d08f3a3.png)

视窗：

![在此处输入图像描述](../Images/04eca36cd2322ba2c32b95064dfceed9.png)

**编辑**：

我刚刚创建了这个工作的“迷你”示例来进行测试。如果有人有想法，为什么窗口上的矩形是黑色的，我将非常感谢您的回答。这是`back.png`图像：![这是 <code>back.png</code>](../Images/731c02193d39eec2d046c00132fc3a00.png)

```
import org.eclipse.draw2d.ColorConstants;
import org.eclipse.draw2d.Figure;
import org.eclipse.draw2d.IFigure;
import org.eclipse.draw2d.Label;
import org.eclipse.draw2d.ToolbarLayout;
import org.eclipse.swt.SWT;
import org.eclipse.swt.graphics.Color;
import org.eclipse.swt.graphics.GC;
import org.eclipse.swt.graphics.Image;
import org.eclipse.swt.widgets.Display;
import org.eclipse.swt.widgets.Shell;
import org.eclipse.zest.core.widgets.Graph;
import org.eclipse.zest.core.widgets.GraphNode;
import org.eclipse.zest.core.widgets.IContainer;

public class MiniExample
{
    public static void main(String[] args)
    {
        Display display = Display.getDefault();
        Shell shell = new Shell(display);

        Graph graph = new Graph(shell, SWT.NONE);
        graph.setSize(100, 100);

        CustomFigure fig = new CustomFigure(new Label());
        fig.setSize(-1, -1);
        CustomNode node = new CustomNode(graph, SWT.NONE, fig);
        node.setLocation(5, 5);

        shell.pack();
        shell.open();

        while(!shell.isDisposed())
        {
            if(!display.readAndDispatch())
                display.sleep();
        }
    }

    /* Minimal helper class for the figure */
    static class CustomFigure extends Figure
    {
        private Image background = new Image(Display.getDefault(), "back.png");
        private GC gcBack = new GC(background);
        private Label all = new Label(background);
        private Color blau =  new Color(Display.getDefault(), 19, 59, 94);

        public CustomFigure(Label label)
        {
            ToolbarLayout layout = new ToolbarLayout();
            setLayoutManager(layout);
            setMiddle(3);
            add(all);
        }

        /* The problem has to occur somewhere here... */
        public void setMiddle(int value)
        {
            gcBack.setBackground(blau);
            gcBack.setForeground(blau);
            gcBack.setAlpha(255);

            /* color background blue and draw the nr of connections */
            gcBack.drawRoundRectangle(6, 6, 15, 15, 3, 3);
            gcBack.fillRoundRectangle(6, 6, 15, 15, 3, 3);
            gcBack.setForeground(ColorConstants.white);
            gcBack.drawText(value+"", 9, 6, true);

            gcBack.setAlpha(255);

            all.repaint();
        }
    }

    /* Minimal helper class for the node */
    static class CustomNode extends GraphNode
    {
        public CustomNode(IContainer graphModel, int style, CustomFigure figure)
        {
            super(graphModel, style, figure);
        }
        @Override
        protected IFigure createFigureForModel()
        {
            return (IFigure) this.getData();
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-12T10:12:47.980

您的程序中使用的灰色图像和 Tobias Willig 发布的白色图像有很大不同：

灰色的：

> 图像宽度：28 图像长度：28
> 位深度（位/样本）：1
> 通道（样本/像素）：1
> 像素深度（像素深度）：1
> 颜色类型（光度解释）：调色板颜色（1 种颜色，0 透明）
> 图像过滤器：单行每字节过滤器
> 隔行扫描：无隔行扫描
> 压缩方案：Deflate 方法 8，32k 窗口
> 分辨率：
> 2835、2835（每米像素）填充顺序：msb 到 lsb
> 字节顺序：网络（大端）
> 文本字符串数：0 0

白色的：

> 图像宽度：28 图像长度：28
> 位深度（位/样本）：8
> 通道（样本/像素）：3
> 像素深度（像素深度）：24
> 颜色类型（光度解释）：RGB
> 图像过滤器：每字节过滤器单行
> 隔行扫描：无隔行
> 压缩方案：Deflate 方法 8，32k 窗口
> 分辨率：2835、2835（每米像素）
> FillOrder：msb-to-lsb
> 字节顺序：网络（大端）
> 文本字符串数：0 of 0

如您所见，`Colour Type`灰色图像中仅包含一种颜色，而白色图像中的颜色为 RGB。

所以它肯定是导致你的问题的图像。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-10T08:59:16.017

绝对是您的背景图像导致问题。我已经使用以下示例运行了一些测试。我使用了纯白色背景图片![在此处输入图像描述](../Images/78616e81516dd973834c6278203bb3c0.png)和您的背景图片![在此处输入图像描述](../Images/a73f12e19e5c2d69ac1b96d414f8dc18.png)。白色背景图像一切正常，但如果我使用您的背景图像，则仅绘制黑色。这很可能是 SWT 中的一个错误。

```
import org.eclipse.swt.SWT;
import org.eclipse.swt.events.PaintEvent;
import org.eclipse.swt.events.PaintListener;
import org.eclipse.swt.graphics.Color;
import org.eclipse.swt.graphics.GC;
import org.eclipse.swt.graphics.Image;
import org.eclipse.swt.widgets.Canvas;
import org.eclipse.swt.widgets.Composite;
import org.eclipse.swt.widgets.Display;
import org.eclipse.swt.widgets.Shell;

public class MiniExample {
    public static void main( String[] args ) {
        Display display = Display.getDefault();
        Shell shell = new Shell( display );

        ACanvas canvas = new ACanvas( shell, SWT.None );
        canvas.setSize( 150, 150 );

        shell.pack();
        shell.open();

        while( !shell.isDisposed() ) {
            if( !display.readAndDispatch() )
                display.sleep();
        }
    }

static class ACanvas extends Canvas {

    public ACanvas( Composite parent, int style ) {
        super( parent, style );

        this.addPaintListener( new PaintListener() {

            @Override
            public void paintControl( PaintEvent arg0 ) {
                int value = 5;
                Image background = new Image( Display.getDefault(), "back2.png" );
                GC gcBack = new GC( background );
                //Color blue = Display.getDefault().getSystemColor( SWT.COLOR_BLUE );
                Color blue = new Color( Display.getDefault(), 0, 0, 255 );

                gcBack.setBackground( blue );
                gcBack.setForeground( blue );
                gcBack.setAlpha( 255 );

                gcBack.drawRoundRectangle( 6, 6, 15, 15, 3, 3 );
                gcBack.fillRoundRectangle( 6, 6, 15, 15, 3, 3 );

                gcBack.setForeground( Display.getDefault().getSystemColor( SWT.COLOR_WHITE ) );
                gcBack.drawText( value + "", 9, 6, true );

                gcBack.setAlpha( 255 );

                arg0.gc.drawImage( background, 0, 0 );
            }

        } );
    }

} 
```

}

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-11T14:59:44.833

swt 颜色与上下文相关，您不应从 gc 中获取颜色并在另一个中使用它

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-28T14:23:09.010

您是否检查过 Windows 中的句柄是否用完？AFAIK SWT 在字体、颜色、图像等的每个实例中都使用来自操作系统的句柄，因此您甚至可以通过不重用某些对象（或处置旧对象；与 AWT/Swing 的区别）给您的应用程序带来麻烦。而 afaik Linux 和可能的 Mac OS 在“用完句柄”时并没有那么糟糕的行为......

# java - 是否有工具（最好是 Eclipse 插件）来检查访问器和修改器方法是否为 JavaBean 格式？

> ID：10982545
> 
> 赞同：0
> 
> 时间：2012-06-11T14:53:59.920
> 
> 标签：java, eclipse, javabeans

Eclipse 似乎以 JavaBean 格式生成访问器和修改器方法。但是，通过重构（手动和使用 Eclipse 的重构工具），有时它们对应的方法名称和实例变量的名称会变得不同步。是否有工具可以检查和识别它们修改或返回的变量的 JavaBean 格式不正确的方法？我目前正在将 Eclipse 与 CodePro Analytix 一起使用，但没有看到此功能。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-11T14:59:06.177

[您可以使用CheckStyle](http://eclipse-cs.sourceforge.net/)插件找到您想要的东西。这是[设置](http://eclipse-cs.sourceforge.net/basic_setup_project.html)项目的方法

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-11T15:01:54.597

PMD 也可以工作[http://pmd.sourceforge.net/pmd-5.0.0/rules/index.html#JavaBeans](http://pmd.sourceforge.net/pmd-5.0.0/rules/index.html#JavaBeans)。对于 Eclipse 插件配置： http: [//pmd.sourceforge.net/pmd-5.0.0/integrations.html#eclipse](http://pmd.sourceforge.net/pmd-5.0.0/integrations.html#eclipse)。

# php - 多步骤表格和处理敏感数据？

> ID：10982546
> 
> 赞同：1
> 
> 时间：2012-06-11T14:54:00.823
> 
> 标签：php, codeigniter, multi-step

我目前在我的 CodeIgniter 应用程序中设置了一个多步骤表单，我只是想知道设置它的最佳方法，因为它会保存敏感数据。目前我有一个 5 页的表单，它使用 ajax 来验证每个步骤，然后重定向到下一步。我在每个步骤中都包含了一个“后退”按钮，表单中填充了他们刚刚从我创建的数据库会话中输入的数据，我只是想知道这是否是明智之举？或者我是否应该限制他们不能返回到上一步，即使这可能会让用户感到沮丧。我正在销毁表单提交的会话。

提前致谢 ：）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-11T14:56:21.307

PHP 会话是非常安全的，假设您可以完全控制您的服务器。不过，就安全性而言，我建议仅在安全连接上使用 AJAX，否则向后发送的所有内容都将以纯文本形式读取。

处理 PHP 会话和安全性时需要注意以下几点：

1.  确保为光盘上的会话文件提供正确的权限。
2.  验证用户时使用 SSL，但更重要的是......
3.  ... 每次用户登录/注销或获得权限时重新生成会话 ID。
4.  将身份验证数据存储在会话中，而不是 cookie。

# jquery - 隐藏div时滚动位置丢失

> ID：10982548
> 
> 赞同：5
> 
> 时间：2012-06-11T14:54:12.757
> 
> 标签：jquery

[http://jsfiddle.net/cbp4N/16/](http://jsfiddle.net/cbp4N/16/)

如果你显示 div. 更改滚动位置，然后在滚动位置丢失时隐藏并显示它。

我做错了什么还是这是一个错误。有没有办法用 som 插件解决它。

/安德斯

感谢您的答案和解决方案。但是，如果我隐藏的 div 是外部 div 并且滚动 div 位于我隐藏的 div 的深处，该怎么办。有没有一种聪明的方法来解决这个问题。因为现在我无法在隐藏/显示的回调中设置/保存滚动位置

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-11T15:10:16.573

如果您将位置保持为数据，则Jquery 的[.scrollTop()效果很好。](http://api.jquery.com/scrollTop/#scrollTop2)

```
$('#cbxShowHide').click(function(){
    if(this.checked) {
        $('#block').show('fast',function() {
            $(this).scrollTop($(this).data('scroll'));
        });
    }
    else {
       $('#block').data('scroll',$('#block').scrollTop());
        $('#block').hide('fast');
    }
}); 
```

[例子](http://jsfiddle.net/cbp4N/17/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-11T15:00:05.237

这是正常行为，因为当您隐藏它时，该元素被设置为内存中可能最少的变量。如果您想记住滚动位置，您必须自己存储这些位置，然后在显示时应用滚动位置。

[使用“溢出：自动”滚动div的位置](https://stackoverflow.com/questions/344615/javascript-scroll-position-of-div-with-overflow-auto)

# java - Java 扩展类和设置值

> ID：10982550
> 
> 赞同：1
> 
> 时间：2012-06-11T14:54:16.510
> 
> 标签：java, oop, extend

**动物基础班**

```
public class Animal
{

protected String pig;
protected String dog;
protected String cat;

public void setPig(String pig_)
{
  pig=pig_;
}
public void setCat(String cat_)
{
  cat=cat_;
}
public void setDog(String dog_)
{
  dog=dog_;
}

} 
```

**动物动作类**

```
public class AnimalAction extends Animal
{
  public AnimalAction(String pig, String cat, String dog)
  {
       super.pig = pig;
       super.cat = cat;
       super.dog = dog;
  }

} 
```

这是设置受保护变量的正确方法吗？使用受保护的变量是正确的方法吗？有没有更专业的OO方式？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-11T15:01:43.327

您可以使用私有变量而不是受保护的。这样会更贴切。您可以使用构造函数来设置超类的值。编辑：

```
public class Animal{

    private String pig;
    private String dog;
    private String cat;

    public Animal(String pig,String dog,String cat){
       this.pig=pig;
       this.dog=dog;
       this.cat=cat;
    }

}

public class AnimalAction extends Animal
{ 
  public AnimalAction(String pig, String cat, String dog)
  {
       super(pig,dog,cat);
  } 

} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-11T15:09:27.707

在类外看到的成员变量越少越好。我会制作类变量`private`并使 getter 公开（或根据需要）和 setter 受保护。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-11T15:38:35.283

你的例子很混乱，但它会起作用。我再举一个例子：

// 类/接口/枚举使用大写，方法/字段使用小写。

```
public class Animal 
{
protected String name;
protected int numberOfFeet;

public Animal(String name)
{
    this.name = name;
}

public void setNumberOfFeet(int numberOfFeet)
{
    this.numberOfFeet = numberOfFeet;
}
}

public class Dog extends Animal
{
    public Dog()
    {
        super("dog"); // call the constructor of the super class.

        // because Dog extends Animal and numberOfFeet is protected, numberOfFeet becomes part of "this" class.
        this.numberOfFeet = 4;
    }
}

//Now you can create instances of Animal like:
Animal bird = new Animal("bird");
bird.setNumberOfFeet(2);
//Or use Dog to create an animal "dog" with 4 feet.
Animal dog = new Dog();

//after an accident
dog.setNumberOfFeet(3); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-11T14:56:02.400

您应该可以使用`this.pig`etc，因为您继承了受保护的成员。您也可以实际调用这些`public setPig(...)`方法。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-11T14:59:11.803

无需使用`super`前缀或任何其他前缀来访问受保护的变量。

顺便说一句 - 我有一点不同意 Thomas - 不要在构造函数中调用超类的 setter 方法。如果子类覆盖它们，在构造函数中使用非最终设置器可能会产生丑陋的效果。然后可以在不完全构造的对象上调用它们。但是，如果您不打算将 setter 覆盖，则应该考虑将它们设置为 final。

Joshua Bloch在[Effective Java 一书中](http://my.safaribooksonline.com/book/programming/java/9780137150021/classes-and-interfaces/ch04lev1sec5)解释了“为继承而设计或禁止它”的原则。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-06-11T15:00:59.667

`protected`使用成员变量然后在子类中继承它们没有错。

但是，如果开发人员出现并将您的类子类化，他们可能会搞砸，因为他们不完全理解它。对于私有成员，除了公共接口之外，他们无法看到具体的实现细节，这让您可以灵活地在以后更改它。通过提供`protected member variables`您只是在子类和超类之间紧密耦合。

# git - git 标签组或 stackoverflow 类型标记

> ID：10982555
> 
> 赞同：1
> 
> 时间：2012-06-11T14:54:26.533
> 
> 标签：git, tags, label

有没有办法为一种 git commit 使用某种标签？它看起来不像**git-tag**是我想要的，但更像是 stackoverflow 类型标记。

```
commit 1   <--  FIX            "Fixed bug 1"
commit 2   <--  SPECIAL_NEED   "1 hour on out of scope work"
commit 3   <--  FIX            "Fixed bug 2"
commit 4   <--  FIX            "Fixed bug 3"
commit 5   <--  SPECIAL_NEED   "2 hours on out of scope work" 
```

然后稍后我需要查看提交列表及其标记为 SPECIAL_NEED 的消息。

```
commit 2   <--  SPECIAL_NEED   "1 hour on out of scope work"
commit 5   <--  SPECIAL_NEED   "2 hours on out of scope work" 
```

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-11T14:59:34.257

只需将单词添加`SPECIAL_NEED`到您的提交消息中并使用

```
git log --grep=SPECIAL_NEED 
```

# python - xpath 上 Element Tree 的限制

> ID：10982557
> 
> 赞同：2
> 
> 时间：2012-06-11T14:54:30.827
> 
> 标签：python, xml, xpath, elementtree

我已经使用 Element Tree 有一段时间了，我喜欢它，因为它很简单

但我怀疑它对 x 路径的实现

这是 XML 文件

```
<a>
  <b name="b1"></b>
  <b name="b2"><c/></b>
  <b name="b2"></b>
  <b name="b3"></b>
</a> 
```

蟒蛇代码

```
import xml.etree.ElementTree as ET
tree = ET.parse('test.xml')
root = tree.getroot()
root.findall("b[@name='b2' and c]") 
```

程序显示错误：

```
invalid predicate 
```

但是如果我使用

```
root.findall("b[@name='b2']") or 
 root.findall("b[c]") 
```

有用，

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-11T14:58:11.160

> ElementTree 为 XPath 表达式提供有限的支持。目标是支持缩写语法的一小部分；完整的 XPath 引擎超出了核心库的范围。

（F. Lundh，[ElementTree 中的 XPath 支持](http://effbot.org/zone/element-xpath.htm)。）

对于支持 XPath (1.0) 的 ElementTree 实现，请查看[LXML](http://lxml.de)：

```
>>> s = """<a>
  <b name="b1"></b>
  <b name="b2"><c /></b>
  <b name="b2"></b>
  <b name="b3"></b>
</a>"""
>>> from lxml import etree
>>> t = etree.fromstring(s)
>>> t.xpath("b[@name='b2' and c]")
[<Element b at 1340788>] 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-11T14:58:29.823

来自[有关 XPath 支持的 ElementTree 文档。](http://effbot.org/zone/element-xpath.htm)：

> ElementTree 为 XPath 表达式提供有限的支持。目标是支持缩写语法的一小部分；完整的 XPath 引擎超出了核心库的范围。

您刚刚发现了实现中的一个限制。您可以改用[lxml](http://lxml.de/)；它提供了一个与 ElementTree 兼容的接口，具有完整的[XPath 1.0 支持](http://lxml.de/xpathxslt.html)。

# c# - 打开包含合并字段并从 C# 连接到数据源的 Word 文档

> ID：10982558
> 
> 赞同：0
> 
> 时间：2012-06-11T14:54:36.920
> 
> 标签：c#, interop, ms-word, ms-office, mailmerge

我有一个函数可以在 Word 中的指定位置打开文档：

```
static void OpenWordDocument(string fileName)
{
Type applicationType = Type.GetTypeFromProgID("Word.Application");
object applicationObject = Activator.CreateInstance(applicationType);

object documentsObject = applicationType.InvokeMember("Documents", System.Reflection.BindingFlags.GetProperty, null, applicationObject, null);
applicationType.InvokeMember("Visible", System.Reflection.BindingFlags.SetProperty, null, applicationObject, new object[] { true });

Type documentsType = documentsObject.GetType();
object documentObject = documentsType.InvokeMember("Open", System.Reflection.BindingFlags.InvokeMethod, null, documentsObject, new Object[] { fileName });
} 
```

它适用于 Office 2003，但在使用 Office 2010 的系统上打开文档时，该文档似乎无法连接到数据源。这可能是什么原因造成的？打开可能阻止连接的文档时，我是否缺少任何属性？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-11T16:34:57.783

您是否按照以下文章中的说明插入了 Word 2010 的注册表项？

[http://support.microsoft.com/kb/825765](http://support.microsoft.com/kb/825765)

即你可能已经有 2003 年的正确条目。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-11T15:34:44.623

我们通过一些解决方法解决了它~

我们没有通过 Interop 程序集创建 Word 实例，而是创建了一个运行 .bat 文件的进程，该文件打开了文档：x

```
static void OpenWordDocument()
{
System.Diagnostics.Process proc = new System.Diagnostics.Process();
proc.EnableRaisingEvents = false;
proc.StartInfo.FileName = @"fileName.bat";
proc.Start();
} 
```

这不是一个理想的解决方案，所以任何其他解决方案都会很棒！

# android - 用于制作移动应用程序界面草图的工具

> ID：10982559
> 
> 赞同：1
> 
> 时间：2012-06-11T14:54:46.230
> 
> 标签：android, ios, mobile, graphics

我正在寻找一种用于制作移动 UI 草图的工具，然后将这些草稿传递给平面设计师。设计师将制作高级原型和不同的可绘制对象，以便将它们包含在应用程序中。

目标是允许快速远程协同工作。有没有比纸笔和扫描仪更好地帮助完成这项任务的工具（网络或桌面）？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-11T15:02:10.097

我真的很喜欢这个网页界面

[www.mybalsamiq.com](http://www.mybalsamiq.com)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-11T15:12:27.663

投递箱共享文件夹使与设计师的协调变得更好。就素描工具而言，我最近一直在使用 PowerPoint。很好，因为它们有许多预先构建的形状，并且所有东西都可以导出为多种类型的图像。无论是作为一个整体还是单个组件。

# android - AsyncTask 执行调试

> ID：10982565
> 
> 赞同：1
> 
> 时间：2012-06-11T14:55:08.453
> 
> 标签：android, android-asynctask

我以前使用过 ASyncTask 并且没有遇到任何问题。我不明白为什么这段代码不起作用。我必须访问 ftp 服务器才能下载我设置为 TextView 的文本文件。ASyncTask 中的代码工作正常。我已经检查过了。出于某种原因，当我调用新线程“new GetStory().execute”时遇到问题。任何帮助都会很棒。

```
package com.amazingstories;

import it.sauronsoftware.ftp4j.FTPAbortedException;
import it.sauronsoftware.ftp4j.FTPClient;
import it.sauronsoftware.ftp4j.FTPDataTransferException;
import it.sauronsoftware.ftp4j.FTPDataTransferListener;
import it.sauronsoftware.ftp4j.FTPException;
import it.sauronsoftware.ftp4j.FTPIllegalReplyException;

import java.io.File;
import java.io.IOException;

import android.app.Activity;
import android.app.ProgressDialog;
import android.os.AsyncTask;
import android.os.Bundle;
import android.os.Environment;
import android.view.Window;
import android.view.WindowManager;
import android.widget.TextView;
import android.widget.Toast;

public class DisplayStory extends Activity {

    String path;
    TextView story;
    FTPClient ftp = new FTPClient();
    File file;

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        // TODO Auto-generated method stub
        super.onCreate(savedInstanceState);
        path = getIntent().getExtras().getString("path");
        requestWindowFeature(Window.FEATURE_NO_TITLE);
        getWindow().setFlags(WindowManager.LayoutParams.FLAG_FULLSCREEN,
                WindowManager.LayoutParams.FLAG_FULLSCREEN);
        setContentView(R.layout.displaystory);
        story = (TextView) findViewById(R.id.tvStory);
        story.setText(path);
        file = new File(
                Environment
                        .getExternalStoragePublicDirectory(Environment.DIRECTORY_DOWNLOADS),
                "temp.txt");    
        new GetStory().execute();
//      try{
//      new GetStory().execute();
//      }catch(Exception e){
//          Toast.makeText(getApplicationContext(), e.toString(),
//                  Toast.LENGTH_SHORT).show();
//          
//      }
    }   

    public class GetStory extends AsyncTask<Void, Integer, Void> {

        @Override
        protected Void doInBackground(Void... params) {
            // TODO Auto-generated method stub
            Toast.makeText(getApplicationContext(), "Try",
                    Toast.LENGTH_SHORT).show();
            try {
                Toast.makeText(getApplicationContext(), "Try",
                        Toast.LENGTH_SHORT).show();

                if (!ftp.isConnected()) {

                    ftp.connect(".....");
                    Toast.makeText(getApplicationContext(),
                            "connected to server", Toast.LENGTH_SHORT).show();
                    ftp.login("....", ".....");
                }
                Toast.makeText(getApplicationContext(), "FTP Connected",
                        Toast.LENGTH_SHORT).show();
                ftp.changeDirectoryUp();
                ftp.download(path, file, new FTPDataTransferListener() {

                    //ProgressDialog dialog;

                    @Override
                    public void aborted() {
                        // TODO Auto-generated method stub
                    //  dialog.dismiss();
                        story.setText("Transfer Aborted");
                    }

                    @Override
                    public void completed() {
                        // TODO Auto-generated method stub
                        //dialog.dismiss();
                    }

                    @Override
                    public void failed() {
                        // TODO Auto-generated method stub
                        //dialog.dismiss();
                        story.setText("Transfer Failed");
                    }

                    @Override
                    public void started() {
                        // TODO Auto-generated method stub
                        //dialog = ProgressDialog.show(DisplayStory.this, "",
                            //  "Loading. Please wait...", true);
                    }

                    @Override
                    public void transferred(int arg0) {
                        // TODO Auto-generated method stub

                    }

                });
                // tv.setText(test.toString());
                Toast.makeText(getApplicationContext(), "Done",
                        Toast.LENGTH_SHORT).show();
            } catch (FTPException e) {
                Toast.makeText(getApplicationContext(),
                        "Exception Caught " + e, Toast.LENGTH_LONG).show();
            } catch (IllegalStateException e) {
                // TODO Auto-generated catch block
                Toast.makeText(getApplicationContext(),
                        "Exception Caught " + e, Toast.LENGTH_LONG).show();
                e.printStackTrace();
            } catch (IOException e) {
                // TODO Auto-generated catch block
                Toast.makeText(getApplicationContext(),
                        "Exception Caught " + e, Toast.LENGTH_LONG).show();
                e.printStackTrace();
            } catch (FTPIllegalReplyException e) {
                // TODO Auto-generated catch block
                Toast.makeText(getApplicationContext(),
                        "Exception Caught " + e, Toast.LENGTH_LONG).show();
                e.printStackTrace();
            } catch (FTPDataTransferException e) {
                // TODO Auto-generated catch block
                Toast.makeText(getApplicationContext(),
                        "Exception Caught " + e, Toast.LENGTH_LONG).show();
                e.printStackTrace();
            } catch (FTPAbortedException e) {
                // TODO Auto-generated catch block
                e.printStackTrace();
            } finally {
                try {
                    ftp.logout();
                } catch (IllegalStateException e) {
                    // TODO Auto-generated catch block
                    e.printStackTrace();
                } catch (IOException e) {
                    // TODO Auto-generated catch block
                    e.printStackTrace();
                } catch (FTPIllegalReplyException e) {
                    // TODO Auto-generated catch block
                    e.printStackTrace();
                } catch (FTPException e) {
                    // TODO Auto-generated catch block
                    e.printStackTrace();
                }
            }
            return null;
        }

        @Override
        protected void onPostExecute(Void result) {
            // TODO Auto-generated method stub
            super.onPostExecute(result);
            getFileData get = new getFileData();
            try {
                story.setText(get.getData(file));
                Toast.makeText(getApplicationContext(), "Set TextView",
                        Toast.LENGTH_SHORT).show();
            } catch (Exception e) {
                // TODO Auto-generated catch block
                e.printStackTrace();
            }
            file.delete();

        }

    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-11T15:03:46.483

```
 @Override
        protected Void doInBackground(Void... params) {
            // TODO Auto-generated method stub
            Toast.makeText(getApplicationContext(), "Try",
                    Toast.LENGTH_SHORT).show(); 
```

你不能在 doInBackground 中调用 Toast。doInBackground 方法在非 ui 线程中运行，因此您无法在 UI 上操作或 sidplay Toast。它必须在 onPreExecute 或 onPostExceute 中完成。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-11T15:03:22.640

方法`onPreExecute()`、`onPostExecute()`和`onProgressUpdate()`是`AsyncTask`执行期间在主 (UI) 线程上调用的唯一方法，因此是唯一可以直接调用 UI 方法（如`TextView.setText()`和`Toast.makeText()`）的地方。

您的程序可能会崩溃，因为您无法从“尚未准备好 Looper”的线程创建 Toast，这是您从 ; 执行此操作时发生的情况`doInBackground()`；这会导致异常和崩溃。

# iphone - 为什么 viewDidLoad 中的 self.navigationController 为空？

> ID：10982567
> 
> 赞同：27
> 
> 时间：2012-06-11T14:55:14.937
> 
> 标签：iphone, objective-c, ios, ipad

我知道有很多类似的问题，但我找不到专门解决这个问题的问题。

为什么`self.navigationController`调用时为null `viewDidLoad`，但从外部调用时正确`viewDidLoad`？

这是我的输出`NSLog(@"%@",self.navigationController);`第一个被调用`viewDidLoad`，第二个我使用调用的方法向界面添加一个按钮`NSLog(@"%@",self.navigationController);`：

```
NavApp[31524:11003] (null)
NavApp[31524:11003] <UINavigationController: 0x6e21190> 
```

我知道这种行为必须有一些简单的解释，我只是好奇它是什么。谢谢！

* * *

## 回答 #1

> 赞同：78
> 
> 时间：2012-06-11T15:06:55.610

当您第一次访问该控制器上的`-view`方法/属性时，会加载视图控制器的视图。加载视图后，将`viewDidLoad`调用该方法。这很简单。您还必须记住，如果在视图离开屏幕时收到内存警告，则可以多次加载/卸载视图。

所以`viewDidLoad`并不意味着您的视图控制器已插入导航控制器。在将视图控制器推送到导航控制器的过程中，它`view`会被访问和加载，但这会发生*在*整个推送完成之前。所以很明显在属性更新`viewDidLoad`之前被调用。`navigationController`

在将视图控制器推送到导航控制器之前，您还必须考虑代码的其他部分可能正在访问视图控制器的视图。

做你`viewDidLoad`正在做的事情的地方也是错误的。您可能想要使用这样的方法，`viewDidAppear:`这样您就知道视图控制器的视图在调用时是视图层次结构的一部分。

# iphone - scrollViewDidEndDecelerating 未执行

> ID：10982568
> 
> 赞同：10
> 
> 时间：2012-06-11T14:55:17.060
> 
> 标签：iphone, xcode, xcode4

我似乎无法调用 scrollViewDidEndDecelerating。我有一个滚动视图，里面有 2 个视图。现在，当滚动视图完成滚动到第二个视图时，我需要它为第一个视图中的标签设置一个值。

头文件：

```
@interface ViewController: UIViewController
{
   UIScrollView *scrollView;
   UIView *view1;
   UIView *view2;
}

@property (strong, nonatomic) IBOutlet UIScrollView *scrollView;
@property (strong, nonatomic) IBOutlet UIView *view1;
@property (strong, nonatomic) IBOutlet UIView *view2;
@property (weak, nonatomic) IBOutlet UILabel *lbl; 
```

实施文件：

```
@synthesize scrollView, view1, view2;

-(void)viewDidLoad
{
   self.view1=[[UIView alloc] initWithFrame:CGRectMake(0, 0, 320, 480)];
   self.view2=[[UIView alloc] initWithFrame:CGRectMake(320, 0, 320, 480)];

   [self.scrollView addSubView:self.view1];
   [self.scrollView addSubView:self.view2];

   self.scrollView.bounces=NO;
   self.scrollView.contentSize=CGSizeMake(640,460);
   [self.scrollView setShowHorizontalScrollIndicator:NO];
   [self.scrollView scrollRectToVisible:CGRectMake(0, 0, 320, 416) animated:NO];
}

-(void)scrollViewDidEndDecelerating:(UIView *)scrollView
{
   lbl.text=@"0";
} 
```

我看不出有什么问题，它应该可以工作。有人可以帮我吗？会很感激。

* * *

## 回答 #1

> 赞同：37
> 
> 时间：2012-10-25T11:19:40.240

如果用户滚动缓慢（即滚动视图在触摸向上时不会继续滚动），则不会调用 scrollViewDidEndDecelerating。在这种情况下，委托调用 scrollViewDidEndDragging。所以当用户停止滚动并且滚动视图停止时做一些事情，你可以将它们组合起来：

```
func scrollViewDidEndDragging(_ scrollView: UIScrollView, willDecelerate decelerate: Bool) {
  if !decelerate {
     endOfScroll()
  }
}

func scrollViewDidEndDecelerating(_ scrollView: UIScrollView) {
  endOfScroll()
}

func endOfScroll() {
  //The user finished scrolling
} 
```

在 Objective-C 中

```
- (void)scrollViewDidEndDragging:(UIScrollView *)scrollView willDecelerate:(BOOL)decelerate
{
   if(!decelerate) [self endOfScroll];
}

-(void)scrollViewDidEndDecelerating:(UIScrollView *)scrollView{
  [self endOfScroll];
}

-(void)endOfScroll{
  //Do something
} 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-06-11T15:21:15.697

要么将滚动视图的委托属性连接到 Interface Builder 中的文件所有者对象，要么只是在 ViewController 的 ViewDidLoad 中手动设置委托。

```
scrollview.delegate = self 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-06-11T15:38:05.897

这会做：

头文件：

```
@interface ViewController: UIViewController <UIScrollViewDelegate> //promise that you'll act as scrollView's delegate
{
   UIScrollView *scrollView;
   UIView *view1;
   UIView *view2;
}

@property (strong, nonatomic) IBOutlet UIScrollView *scrollView;
@property (strong, nonatomic) IBOutlet UIView *view1;
@property (strong, nonatomic) IBOutlet UIView *view2;
@property (weak, nonatomic) IBOutlet UILabel *lbl; 
```

实施文件：

```
@synthesize scrollView, view1, view2;

-(void)viewDidLoad
{
   self.view1=[[UIView alloc] initWithFrame:CGRectMake(0, 0, 320, 480)];
   self.view2=[[UIView alloc] initWithFrame:CGRectMake(320, 0, 320, 480)];

   [self.scrollView addSubView:self.view1];
   [self.scrollView addSubView:self.view2];

   self.scrollView.bounces=NO;
   self.scrollView.contentSize=CGSizeMake(640,460);
   [self.scrollView setShowHorizontalScrollIndicator:NO];
   [self.scrollView scrollRectToVisible:CGRectMake(0, 0, 320, 416) animated:NO];
   [self.scrollView setDelegate:self];//Set delegate
}

-(void)scrollViewDidEndDecelerating:(UIView *)scrollView
{
   lbl.text=@"0";
} 
```

# c++ - 使用 sscanf ，制表符格式化日志文件

> ID：10982573
> 
> 赞同：0
> 
> 时间：2012-06-11T14:55:33.420
> 
> 标签：c++, file, tabs, formatting, scanf

这是文件

```
0   4fd4074a    12  1   1a740   3   2   @BOק15  
1   4fd4074a    12  1   1873c   3   2   @BN15  
2   4fd4074a    12  1   276b6   3   2   @BOק0120  
3   4fd4074a    12  1   5de0    3   2   @BOק15  
4   4fd4074a    12  1   24115   3   2   @BOק0120  
5   4fd4074a    12  1   1ff079  3   2   @BOק0120  
6   4fd40750    12  1   24115   3   2   @BN0120  
7   4fd40751    12  1   ec54    3   2   @BN15 
```

如何使用 sscanf 读取它？

```
 Temp = getLineByHandle(fileHandler);
    // ----
    char var1[1024] = {0};
    char var2[1024] = {0};
    char var3[1024] = {0};
    char var4[1024] = {0};
    char var5[1024] = {0};
    char var6[1024] = {0};
    char var7[1024] = {0};
    char var8[1024] = {0};
    // ----
    sscanf(Temp, "%s/t%s/t%s/t%s/t%s/t%s/t%s/t%s", var1, var2, var3, var4, var5, var6, var7, var8);
    // ----
    printf("%s\s",var2);
    getchar(); 
```

我的代码不起作用

我也试过这样

```
sscanf(Temp, "%s\t%s\t%s\t%s\t%s\t%s\t%s\t%s" 
```

那么我该如何格式化这种类型的格式

表中的最后一个变量是这样的字符串（消息） (hello wsup ???") vars 之间的每个空格都是 (0x09) 表示制表符

（链接到完整代码[http://pastebin.com/d7yvMVJr](http://pastebin.com/d7yvMVJr)）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-11T15:00:15.293

如果要将所有字段视为字符串，则无需在格式说明符字符串中指定制表符。默认情况下`*scanf`，函数族忽略空格。此外，检查返回类型`sscanf`以确保已读取所有八项。

# php - HTML to PHP in expression engine

> ID：10982575
> 
> 赞同：0
> 
> 时间：2012-06-11T14:55:38.073
> 
> 标签：php, hyperlink, expressionengine

I am trying to write a PHP oneliner to show a link to another page. This is in Expression Engine. I came with this:

```
echo  '<li><p><a href="{path='Site2/matcha-tea'}">Matcha Tea</a></p></li>'; 
```

But it gives this error:

> Parse error: syntax error, unexpected '{', expecting ',' or ';' in /home/...../system/expressionengine/libraries/Functions.php(680) : eval()'d code on line 42

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-11T14:57:09.827

Your mixing your quotes ... you could do it this way :

```
echo '<li><p><a href="{path=\'Site2/matcha-tea\'}">Matcha Tea</a></p></li>'; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-11T14:58:01.447

You have an issuewhere you did not escape the quotes within your quotes.

Try this:

```
echo  '<li><p><a href="{path=\'Site2/matcha-tea\'}">Matcha Tea</a></p></li>'; 
```

Or you can just escape out of php in general since you are not using any PHP variable in that list item:

```
?>
    <li><p><a href="{path='Site2/matcha-tea'}">Matcha Tea</a></p></li>
<?php 
```

# maven - Maven 在分支上使用版本 Maven 插件

> ID：10982580
> 
> 赞同：1
> 
> 时间：2012-06-11T14:56:01.933
> 
> 标签：maven

我`org.codehaus.mojo:versions-maven-plugin:1.2:use-latest-versions`用来更新我的内部依赖项。在正常开发中，这没有问题。

现在项目发布了，我们有分支开发，我们不能像我们想要的那样更新依赖项。

主要开发是 3.8-SNAPSHOT，Branch 是 3.7-SNAPSHOT。

当用于主开发时 org.codehaus.mojo:versions-maven-plugin:1.2:use-latest-versions 将 3.8-SNAPSHOT 更新为 3.8.x（x 是 NEXUS 中的最新版本）

但是在分支开发中使用时，会将*3.7-SNAPSHOT*`org.codehaus.mojo:versions-maven-plugin:1.2:use-latest-versions`更新为*3.8.x*。所以我的问题是如何告诉 maven 将 3.7-SNAPSHOT 更新到 3.7.x？（x 是 NEXUS 中的最新 3.7）

 *** * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-18T19:29:01.110

我使用了 org.codehaus.mojo:versions-maven-plugin:1.3.1:set -DnewVersion=3.7.5 -DartifactId=myArtifact -Dgroupid=myGroup**

# java - 使用 Guice AOP 在 Jersey 中进行方法拦截

> ID：10982583
> 
> 赞同：5
> 
> 时间：2012-06-11T14:56:11.773
> 
> 标签：java, jersey, aop, guice

是否可以使用 Guice AOP 拦截 Jersey 资源上的注释方法？

我有一个成功配置的 Guice 集成，与 Jersey 一起使用依赖注入没有任何问题，但是我配置的拦截器根本没有拦截我的注释方法。

**web.xml**

```
<listener>
    <listener-class>my.package.GuiceConfig</listener-class>
</listener>
<filter>
    <filter-name>guiceFilter</filter-name>
    <filter-class>com.google.inject.servlet.GuiceFilter</filter-class>
</filter>
<filter-mapping>
    <filter-name>guiceFilter</filter-name>
    <url-pattern>/*</url-pattern>
</filter-mapping> 
```

**GuiceConfig 配置模块**

```
public class GuiceConfig extends GuiceServletContextListener {

@Override
protected Injector getInjector() {
    return Guice.createInjector(new JerseyServletModule() {

            @Override
            protected void configureServlets() {

                bindInterceptor(Matchers.any(), 
                                Matchers.annotatedWith(RequiredAuthority.class), 
                                new AuthorisationInterceptor());

                Map<String, String> params = new HashMap<String, String>(); 
                params.put(JSP_TEMPLATES_BASE_PATH, "/WEB-INF/jsp"); 
                params.put(FEATURE_FILTER_FORWARD_ON_404, "true");
                params.put(PROPERTY_PACKAGES, "my.service.package");

                filter("/*").through(GuiceContainer.class, params);
            } 
        });
    }
} 
```

**RequiredAuthority 注释**

```
@Target(ElementType.METHOD)
@Retention(RetentionPolicy.RUNTIME)
public @interface RequiredAuthority {
    String value();
} 
```

**授权拦截器方面**

```
public class AuthorisationInterceptor implements MethodInterceptor {

    public Object invoke(MethodInvocation methodInvocation) throws Throwable {

        // Allow invocation to process or throw an appropriate exception
    }
} 
```

**TempResource JAX-RS 资源类**

```
@Path("/temp")
public class TempResource {

    @GET
    @Produces(MediaType.APPLICATION_JSON)
    @RequiredAuthority("PERMISSION")
    public String getTemp() {

        // Return resource normally
    }
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-11T21:26:06.640

看起来 configureServlets() 没有调用：

```
bind(TempResource.class); 
```

# objective-c - 将 UIView nextResponder 转换为 UITableView 委托

> ID：10982587
> 
> 赞同：0
> 
> 时间：2012-06-11T14:56:20.247
> 
> 标签：objective-c, uiview, uiviewcontroller, casting, delegates

在 UIView 中，如何转换 self.nextResponder （指向视图的控制器）以避免下面第三行出现编译器警告？

```
UITableView* tableView = [ [ UITableView alloc ] initWithFrame:CGRectZero style:UITableViewStylePlain];
tableView.tag = TAG_IMAGEADMIN_IMAGESLISTVIEW;
tableView.delegate = self.nextResponder; // compiler warning here
tableView.dataSource = self;
[self addSubview:tableView]; 
```

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-11T15:13:47.560

由于 UITableViewDelegate 是一个协议，您可以转换为

tableView.delegate = (id < UITableViewDelegate >)self.nextResponder。这告诉编译器 self.nextResponder 是任何确认 UITableViewDelegate 协议的对象。

如果你知道 nextResponder 属于任何特定类，比如 UIViewController，你可以写成

tableView.delegate = (UIViewController < UITableViewDelegate>*)self.nextResponder。这告诉编译器 nextResponder 的类型是 UIViewController 类，该类确认 UITableViewDelegate 协议。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-11T15:01:38.910

您可以按如下方式转换为协议：

```
tableView.delegate = (id<UITableViewDelegate>)self.nextResponder 
```

# python - Django 模型：通过相关模型跟踪活动？

> ID：10982591
> 
> 赞同：1
> 
> 时间：2012-06-11T14:56:25.047
> 
> 标签：python, django, performance, algorithm, model

我有一个人的主表。我的 Django 应用程序中的所有内容都与一个或多个人直接或通过长 fk 链相关。此外，我所有的模型都有标准的簿记字段“created_at”和“updated_at”。我想在我的 Person 表上添加一个名为“last_active_at”的字段，主要用于原始 sql 排序目的。

创建或编辑某些相关模型会为这些对象生成新的时间戳。我需要以某种方式用这些值更新 Person.'last_active_at' 。从功能上讲，这并不难实现，但我担心应用程序会承受过大的压力。

我最担心的两个原因是我被限制在一个真正的数据库字段中——我不能将函数分配给 Person 表作为 @property——并且这些“活动”模型之一接收并处理来自我无法控制的外国数据源，偶尔会一次接收大量数据。

我的第一个想法是在“活动”模型中添加一个 post_save 挂钩。似乎仍然是我最好的选择，但我对它们一无所知，它们对数据库的影响有多大，等等。

我的第二个想法是编写某种脚本，通过白天的活动并在晚上更新这些模型。不过，我的雇主是“直播”。

我的第三个想法是修改 post_save 算法以检查“updated_at”是否距离 Person 的“last_active_at”不到半小时，如果为真则不更新该人。

我的想法是否朝着可扩展的方向发展？我应该采用其他方法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-11T15:22:19.237

有人说，过早优化是所有问题之母。您应该从最愚蠢的实现开始（每次都更新它），然后测量并 - 如果需要 - 用更有效的方法替换它。

首先，让我们放一个更新`last_active_at`字段的方法`Person`。这样，所有的更新逻辑本身都集中在这里，我们以后可以很容易地修改它。

信号非常容易使用：它只是声明一个函数并将其注册为接收器，并且每次发出信号时都会运行它。有关完整说明，请参阅[文档](https://docs.djangoproject.com/en/1.4/topics/signals/)，但它可能如下所示：

```
from django.db.models.signals import post_save
from django.dispatch import receiver

@receiver(post_save, sender=RelatedModel)
def my_handler(sender, **kwargs):
    # sender is the object being saved
    person = # Person to be updated
    person.update_activity() 
```

至于更新本身，请从最愚蠢的方式开始。

```
def update_activity(self):
    self.last_active_at = now() 
```

然后测量并决定它是否有问题。如果这是一个问题，您可以做的一些事情是：

*   在再次更新之前检查以前的更新是否是最近的。如果对您的数据库的读取不比写入快，则可能没用。如果您使用缓存，这不是问题。
*   将其写在某处，以便稍后更新。不需要每天：如果问题是您每秒有 100 次更新，您可以让脚本每 10 秒或每分钟更新一次数据库。使用这种技术，您可能会找到一个良好的性能/最新性权衡。

这些只是基于您提出的一些建议，但正确的选择取决于您拥有的数字类型。确定您将拥有什么样的负载，该领域需要什么样的反应时间，并进行实验。

# javascript - 在新窗口中打开链接，如果已经打开，则关注它

> ID：10982593
> 
> 赞同：38
> 
> 时间：2012-06-11T14:56:49.140
> 
> 标签：javascript, html

我有一个应该在新标签中打开的链接，但如果标签已经打开，只需切换到它。我尝试过使用 javascript，wnd = window.open() 而不是 wnd.focus()，它适用于 Chrome 19，但不适用于 FF 13 或 IE 9。这是我编写的代码：

```
<script type="text/javascript">
var loadingTableWnd;
function openOrSwitchToWindow(url){
if(loadingTableWnd == undefined)
loadingTableWnd = window.open(url,'myFrame');
else
loadingTableWnd.focus();
}
</script> 
<a href='javascript:openOrSwitchToWindow("/");' >Loading Table</a> 
```

知道如何从每个浏览器打开或切换到吗？

**编辑**：我需要在新选项卡中打开链接，而不是独立窗口。

* * *

## 回答 #1

> 赞同：42
> 
> 时间：2012-07-05T12:27:36.687

不同的浏览器对 window.open() 和 focus() 的行为不同。对于此代码`window.open('www.sample.com','mywindow').focus()`

*   **Chrome 20**会打开一个新标签页，并专注于后续的 open() 调用，无论是否调用了 focus()。
*   **Firefox 13**打开一个新标签页，关注第一个 open()，不关注后续的 open() 调用/忽略 focus()。
*   **IE 8**会打开一个新窗口，尊重 focus()。
*   **Safari 5**打开一个新窗口，并关注后续的 open() 调用，无论是否调用了 focus()。

小提琴测试：http: [//jsfiddle.net/jaraics/pEG3j/](http://jsfiddle.net/jaraics/pEG3j/)

* * *

## 回答 #2

> 赞同：18
> 
> 时间：2012-06-11T17:39:06.670

对于这样的事情，您不需要任何逻辑。默认情况下，指定第二个参数为`window.open()`窗口提供浏览器记住的“名称”。如果您尝试`window.open()`使用相同的名称呼叫（在它已经打开之后），它不会打开一个新窗口......但您可能仍然需要呼叫`.focus()`它。尝试这个：

```
var a = window.open(url, "name");
a.focus(); 
```

这些应该是您的函数中唯一的代码行，并且您不需要`loadingTableWnd`变量...

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2015-06-10T14:11:16.617

如果窗口已经打开并且您想专注于该窗口，您可以使用

```
window.open('', 'NameOfTheOpenedWindow').focus(); 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-06-11T15:12:08.783

`window.focus()`受到[广泛支持](http://www.w3schools.com/jsref/met_win_focus.asp)，并且对我来说似乎在 Internet Explorer 和 Firefox 中都可以正常工作，问题应该出在您的代码中。我创建了一个简单的[jsFiddle](http://jsfiddle.net/Pharaon/uJy5t/)供您测试。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2018-09-06T07:44:50.173

如果您对保留先前打开的选项卡的状态不感兴趣，可以这样做：

```
var loadingTableWnd;
function openOrSwitchToWindow(url) {
    if (loadingTableWnd != undefined) {
        loadingTableWnd.close();
    }
    loadingTableWnd = window.open(url,'myFrame');
} 
```

# php - file_get_contents 适用于本地但不适用于服务器

> ID：10982595
> 
> 赞同：9
> 
> 时间：2012-06-11T14:57:00.647
> 
> 标签：php, file-get-contents

> **可能重复：**
> [file_get_contents() 错误](https://stackoverflow.com/questions/6551379/file-get-contents-error)

处理连接到 Instagram API 的脚本以从特定标签获取照片。它在本地工作得很好，但在服务器上我得到错误。

警告：file_get_contents(): https:// wrapper 在服务器配置中被 /storage/content/91/103391/instaboll.nu/public_html/instagram.php 第 19 行中的 allow_url_fopen=0 禁用。

这是第 19 行的样子：
$contents = file_get_contents(" [https://api.instagram.com/v1/tags/](https://api.instagram.com/v1/tags/) $tag/media/recent?client_id=$client_id");

有任何想法吗？

已经搜索过这个并找到了一些推荐 curl 的帖子，但不知道如何继续。

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-06-11T15:22:55.430

我用这段代码解决了它。

```
<?php
$url = "http://www.example.org/";
$ch = curl_init();
curl_setopt ($ch, CURLOPT_URL, $url);
curl_setopt ($ch, CURLOPT_CONNECTTIMEOUT, 5);
curl_setopt ($ch, CURLOPT_RETURNTRANSFER, true);
$contents = curl_exec($ch);
if (curl_errno($ch)) {
  echo curl_error($ch);
  echo "\n<br />";
  $contents = '';
} else {
  curl_close($ch);
}

if (!is_string($contents) || !strlen($contents)) {
echo "Failed to get contents.";
$contents = '';
}

echo $contents;
?> 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-11T15:00:02.757

解决方案*在错误消息中*：在您的 ini 中设置`allow_url_fopen`（`1`使用`php.ini`文件，`ini_set`在 php 代码中使用，或与您的主机交谈）。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-11T14:58:42.237

您必须[`allow_url_fopen`](http://php.net/manual/en/filesystem.configuration.php)从主机上的 php.ini 启用或与您的托管服务提供商联系。

> 此选项启用支持访问 URL 对象（如文件）的 URL 感知 fopen 包装器。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-11T14:58:44.817

您的服务器管理员已禁用此功能。您需要让他们启用它。

# vb.net - winforms webbrowser 控制访问标签

> ID：10982601
> 
> 赞同：0
> 
> 时间：2012-06-11T14:57:16.160
> 
> 标签：vb.net, winforms, dom, browser

我有一个关于网络浏览器控件的问题，希望有人能回答。我正在研究一个使用 HTML 来显示和保存数据的文档检索和存储类。我想在使用 VB.Net 的 winforms 中使用 webbrowser 控件。我只想将字段值存储在 html 文档中，而不是整个文档中。我希望在 html 中使用标签并使用 Web 浏览器控件的 DOM 读取它们，但不知道如何执行此操作。

有没有人这样做过，有人可以提供一些关于如何做到这一点的示例代码吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-11T15:37:50.710

```
Private Sub WebBrowser1_DocumentComplete(ByVal pDisp As Object, URL As Variant)
 If (pDisp Is WebBrowser1.object) Then
  Label1.Caption = WebBrowser1.Document.All("myElem").innerHTML
 End If
End Sub 
```

# linq-to-sql - Linq to sql，访问预加载的数据

> ID：10982602
> 
> 赞同：0
> 
> 时间：2012-06-11T14:57:22.447
> 
> 标签：linq-to-sql

我在我的应用程序中使用 linq 和 linq to sql 进行数据验证。

我如何确定在查询我的数据上下文时，查询不会命中数据库？我不想只访问已预加载的数据并对其进行验证。

假设并发在这里不是问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-13T06:57:22.237

如果您想 100% 确定，您需要在`ToList()`查询后使用例如 a 来获取内存中的数据。

之后处理原始数据上下文，您可以确保您的实体`List<>`不再访问数据库。（他们只是给你一个例外......）

但是，您将不再查询数据上下文，因此它不是您问题的完整答案。**如果您对datacontext**执行**新**查询，据我所知，它将始终命中数据库。Linq 没有内置缓存。

# php - PHP Netbeans 匿名函数

> ID：10982607
> 
> 赞同：2
> 
> 时间：2012-06-11T14:57:39.620
> 
> 标签：php, netbeans

有谁知道我怎样才能让**匿名函数**出现在**Netbeans Navigator**中？有没有我可以添加的自定义内容，比如评论块？（这是针对 PHP 的）使用其中许多导航变得非常困难：

```
prggmr\handle(function() {
  foreach ($result as $user) {        
      prggmr\signal(Events::NOTIFICATION_ADD, $type, $content);
  }     
}, new Admin(Events::ADMIN_SYSTEM_NOTIFICATION_ADD)); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-12T02:18:19.507

我知道您可以使用 PHPDocumentor（我认为它是默认安装的）将其添加到 PHP 类的属性和方法中，如下所示：

```
/**
 * @method void my_method() my_method(string $var) This function does something
 * @property string $my_property
 */

class MyClass
{
    .... 
```

也许如果你将你的匿名（讽刺？）函数包装在一个类中（如果还没有的话）你可以做到这一点。

# iphone - 推送通知未在 App Store 应用程序上注册 - iphone

> ID：10982617
> 
> 赞同：3
> 
> 时间：2012-06-11T14:58:08.523
> 
> 标签：iphone, ios, apple-push-notifications

我们最近推出了对 iPhone 应用程序的更新。虽然我们的推送通知在 ad-hoc 中完美运行，但我们已经开始使用，它们不再注册。

查看实时设备日志，我们看到：

**“6 月 11 日 09:40:05 未知的 SpringBoard[5791]：没有为应用程序 'App Name' 找到有效的 'aps-environment' 授权字符串：（null）。不会发送通知。”**

现在，如果您在 Internet 或其他堆栈溢出对话上进行检查，有一个非常常见的答案是配置文件没有正确地将“aps-environment”设置为“生产”，并且需要重新生成配置文件。但是，这似乎不是我们的问题，因为二进制文件清楚地表明它在生产 aps 环境中。请参阅以下 App Store 二进制详细信息中的详细信息：

![App Store 二进制详细信息的屏幕截图](../Images/65bcaf59fcc673d78fcd5b85d9d3716c.png)

所以我们对问题可能是什么感到有点迷茫。鉴于这些信息，以及我在我身边进行的大量检查，配置文件和代码签名似乎是正确的，我目前在网上找不到任何其他解决方案。

在此先感谢您的帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-11T17:35:04.120

所以这个问题在 3 小时内就解决了；它一定是服务器传播问题。

**对于将来可能会在这个问题上**大发雷霆的任何人：如果您的应用刚刚上线并且通知没有注册，并且您确定 aps-environment 设置正确，请等待几个小时后再得出结论应用程序有问题。

我们的应用程序仅在加拿大 iTunes Store 中推出，推送通知注册问题在 3 小时内自行解决。

如果将来有人可以解释为什么会发生这种情况或为此添加更多细节，我将很乐意接受他们的回答。

# actionscript-3 - 从动作脚本 3 中的代理类返回显示对象

> ID：10982620
> 
> 赞同：0
> 
> 时间：2012-06-11T14:58:11.293
> 
> 标签：actionscript-3, proxy

我制作了一个包装显示对象的代理类。

是否可以调用 addChild(proxyObject) 而不是 addChild(proxyObject.wrapped) ？

我曾考虑过从代理对象扩展，但我认为这是为了添加动态属性并对其进行迭代。或者，也许我可以从对象扩展并使用 valueOf() 或类似的东西？

提前致谢，

詹姆士

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-11T15:06:18.707

如果您的代理类扩展了 DisplayObjectContainer（或任何扩展它的类），您可以将其直接添加到显示列表中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-11T21:02:20.697

扩展 valueOf() 是个坏主意。请不要这样做。如果无法扩展 DisplayObject，请使用 proxyObject.wrapped。

# api - Linkedin全名搜索结果

> ID：10982624
> 
> 赞同：0
> 
> 时间：2012-06-11T14:58:18.297
> 
> 标签：api, oauth, linkedin

我已经构建了一个与 LinkedIn 连接并允许我搜索用户的应用程序。它使用带有 aouth 的linkedin api。

您可以使用的一些参数是：名字/姓氏/关键字要搜索一个人，例如可以使用名字和姓氏

如果您不知道在哪里拆分（外国）名称，LinkedIn 建议使用带关键字参数的全名（请参阅[https://developer.linkedin.com/documents/people-search-api](https://developer.linkedin.com/documents/people-search-api)）。

## 例子

```
A name like Zubair Ali:

keywords: Zubair Ali or Zubair+Ali or Zubair%20Ali
has no results

first-name: Zubair
last-name: Ali
has more then 100 results 
```

我知道 Zubair Ali 很容易拆分，但这只是我知道没有结果的一个例子，我想使用全名搜索，这样我就可以使用全名数据库中的名字，其中还包含 Wang Chin Hu 和 Peter van 等名字德文。有解决办法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-11T16:13:37.260

这似乎与当前正在调查的已知问题有关：

[https://developer.linkedin.com/forum/people-search-not-returning-proper-results](https://developer.linkedin.com/forum/people-search-not-returning-proper-results)

# c++ - 非成员函数不能有 cv 限定符

> ID：10982628
> 
> 赞同：65
> 
> 时间：2012-06-11T14:58:32.853
> 
> 标签：c++, templates, constants

在编写以下函数`abs`时，我收到错误：

非成员函数`unsigned int abs(const T&)`不能有 cv 限定符。

```
template<typename T>
inline unsigned int abs(const T& t) const
{
    return t>0?t:-t;
} 
```

删除`const`函数的限定符后没有错误。由于我没有`t`在函数内部进行修改，因此上面的代码应该已经编译。我想知道为什么我得到了错误？

* * *

## 回答 #1

> 赞同：127
> 
> 时间：2012-06-11T15:03:29.670

您不想修改`t`的愿望以`const T& t`. 结尾`const`指定您不会修改该类`abs`所属的任何成员变量。

由于没有此函数所属的类，因此您会收到错误消息。

* * *

## 回答 #2

> 赞同：37
> 
> 时间：2012-06-11T15:01:48.693

`const`函数声明末尾的修饰符适用于成员`this`函数的隐藏参数。

由于这是一个免费功能，因此没有`this`并且不需要该修饰符。

该`t`参数在参数列表中已有自己`const`的参数。

* * *

## 回答 #3

> 赞同：15
> 
> 时间：2012-06-11T15:01:50.757

成员函数上的 cv 限定符指定`this`指针具有间接类型`const`（或`volatile`, `const volatile`），因此可以在具有该限定的实例上调用成员函数。

自由函数（和类静态函数）没有`this`指针。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2015-12-11T01:41:28.483

众所周知，`const`参数列表后面的关键字表示这是一个指向指针常量的指针。

有一个非成员函数，它不属于该类，所以添加 const 对端错误。

**解决问题：**要么成为类成员函数，要么去掉`const`关键字const对端

# windows - C++ Visual Studio 2010 - 使用线程、双端队列和处理程序

> ID：10982632
> 
> 赞同：0
> 
> 时间：2012-06-11T14:58:44.630
> 
> 标签：windows, multithreading, visual-studio-2010, visual-c++, deque

我正在尝试在读取大文件的应用程序中使用多个线程。

我想在主线程中读取文件并将每一行放入一个名为`countedAddresses`. 我希望多个线程从中挑选行`countedAddresses`并从中提取所有电子邮件地址，并将它们放在一个名为`resolvedAddresses`.

目前，如果只有一个`resolveAddressThread`运行，这一切都有效，但如果我运行两个，我会收到堆损坏错误。

我启动线程：

```
_beginthread( resolveAddressThread, 0, NULL );
_beginthread( resolveAddressThread, 0, NULL ); 
```

这是线程代码：

```
unsigned int linesCounted, linesResolved, linesProcessed;
std::deque<std::string> countedAddresses;std::deque<std::string> resolvedAddresses;
HANDLE linesCMutex, linesRMutex, linesRCMutex;

void resolveAddressThread(void* pParams)
{ 
string fileLine= "";

while(1)
{
    WaitForSingleObject(linesCMutex, INFINITE);
    WaitForSingleObject(linesRCMutex, INFINITE);
    if (linesCounted>linesResolved)
    {

        if (countedAddresses.size()!=0)
        {
            fileLine = countedAddresses.front();
            countedAddresses.pop_front();
            ReleaseMutex(linesRCMutex);
            ReleaseMutex(linesCMutex);
        }
        else
        {
            ReleaseMutex(linesRCMutex);
            ReleaseMutex(linesCMutex);
            Sleep(1000);

        }
    }
    else
    { cout<<"All lines in the file have been processed."<<endl;
    ReleaseMutex(linesRCMutex);
    ReleaseMutex(linesCMutex);
    break;}

    if (fileLine.length()>1)
    {
        string::iterator strIter;
        string buffer;
        int tabCount=0;
        bool useFlag =false, keepFlag = false, stopFlag = false;
        buffer.clear();
        for(strIter=fileLine.begin(); strIter!=fileLine.end(); ++strIter)
        {
            if (*strIter == '\t')
            {
                ++tabCount;
            }
            if (tabCount == 10)
            {
                if ('\"'== *strIter)
                {
                    useFlag=!useFlag;
                }
                else if (useFlag && *strIter > 0)
                {

                    if (*strIter == '@')
                    {
                        buffer+=*strIter;
                        keepFlag = true;
                    }

                    else if ((*strIter ==' '||*strIter ==';')&& keepFlag)
                    {
                        if (buffer.at(buffer.length()-1)=='.')
                        {buffer = buffer.substr(0, buffer.length() - 1);}

                        WaitForSingleObject(linesRMutex, INFINITE);
                        resolvedAddresses.push_back(buffer);
                        ReleaseMutex(linesRMutex);
                        buffer.clear();
                        keepFlag = false;

                    }
                    else if (*strIter ==' '||*strIter ==';')
                    {
                        buffer.clear();
                        keepFlag = false;
                    }
                    else
                    {
                        buffer+=*strIter;
                    }

                }
            }
            if (tabCount ==11 && keepFlag==true)
            {
                if (buffer.at(buffer.length()-1)=='.')
                {buffer = buffer.substr(0, buffer.length() - 1);}

                WaitForSingleObject(linesRMutex, INFINITE);
                resolvedAddresses.push_back(buffer);
                ReleaseMutex(linesRMutex);
                buffer.clear();
                keepFlag = false;
            }
        }
        WaitForSingleObject(linesRCMutex, INFINITE);
        ++linesResolved;
        ReleaseMutex(linesRCMutex);
        fileLine.clear();
    }
}
} 
```

请让我知道我哪里出错了。

谢谢， 安赫

# facebook-graph-api - Facebook API 不支持对收件箱线程评论的 GET 请求？

> ID：10982634
> 
> 赞同：3
> 
> 时间：2012-06-11T14:58:46.340
> 
> 标签：facebook-graph-api

我已使用“我/收件箱”发出请求以获取我收件箱中的线程。然后，我可以直接使用它们的 ID 请求一些线程对象，并且能够使用“/comments”作为 GraphAPI URL 访问一些线程对象中的注释。但是，某些朋友的一些线程对象将不会返回。相反，我收到以下错误：

> {“错误”：{“消息”：“不支持的获取请求。”，“类型”：“GraphMethodException”，“代码”：100 } }

我想知道是否有人知道我在请求特定线程时可能会出错的地方，或者这是否是 Facebook 问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-11T17:35:57.353

我需要向“我/线程”发出请求，而不是向“我/收件箱”发出请求。

从返回的“数据”值中，您可以获得包含“id”值的 Thread 对象列表。此“id”值可用于请求特定线程。使用这种检索线程的方法似乎可以解决问题。

欢迎进一步解决从 Facebook 检索线程的方法！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-29T12:44:06.827

我在获取时遇到了同样的问题

[https://graph.facebook.com/246252455409826](https://graph.facebook.com/246252455409826)

但这可以通过像这样放置您的 access_token 来解决

[https://graph.facebook.com/246252455409826?access_token=](https://graph.facebook.com/246252455409826?access_token=) ***** ******

我认为它只需要年龄认证。

# wpf - WinAPI SetTimer() 与 WPF 线程模型冲突

> ID：10982640
> 
> 赞同：0
> 
> 时间：2012-06-11T14:59:08.100
> 
> 标签：wpf, winapi

WinAPI SetTimer() 似乎与 WPF 线程模型冲突。如果您在 WPF 主线程中调用 SetTimer()，可能会导致计时器无法正常触发。SetTimer() 的 HWND 为空。这种冲突是真的吗？

# c++ - 在 gmp 任意精度上生成正态分布

> ID：10982661
> 
> 赞同：4
> 
> 时间：2012-06-11T15:00:14.020
> 
> 标签：c++, c, algorithm, random, gmp

所以，我正在尝试将[gmp](http://gmplib.org/)用于我正在做的一些计算，并且在某些时候我需要从正态分布生成一个伪随机数（prn）。

由于 gmp 有一个统一的随机变量，这已经很有帮助了。但是，我发现很难选择应该使用哪种方法从均匀分布中生成正态分布。在实践中，我的问题是 gmp 只有简单的操作，因此例如我不能使用 cos 或 erf 评估，因为我必须自己实现所有这些。

我的问题是，我可以在多大程度上从 gmp 上的正态分布生成 prn，如果非常困难，是否有任何已经实现正态分布的任意精度库。

作为不起作用的方法的两个示例（从此[问题](https://stackoverflow.com/questions/75677/converting-a-uniform-distribution-to-a-normal-distribution)中检索）：

[Ziggurat 算法](http://en.wikipedia.org/wiki/Ziggurat_algorithm)使用 f 的评估，在这种情况下是非整数指数，因此 gmp 不支持。

[Box–Muller 变换](http://en.wikipedia.org/wiki/Box-Muller_transform)使用 gmp 不支持的 cos 和 sin。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-11T16:16:02.120

将能够为 N(0,1) 分布生成随机数的库与 GMP 的统一生成器结合起来。

例如，假设您的正常生成器生成[0x8.F67E33Ap-1](http://gcc.gnu.org/onlinedocs/gcc/Hex-Floats.html)

可能这些数字中只有少数是真正随机的，因此将数字截断为固定数量的二进制数字（即截断为 16 位， 0x8.F67E33Ap-1 => `0x8.F67p-1`）并在该范围内均匀生成一个数字`[0x8.F67p-1, 0x8.F68p-1)`

为了获得更好的近似值，您可能希望在区间极值处计算密度函数的值（这里双精度就足够了），而不是使用均匀分布，并生成一个随机数，其分布与这两个定义的梯形相关联价值观。

解决该问题的另一种方法是只生成一个包含 1000、10000 或 100000 mpf 值的表格，其中 N(x) 变为 1/n、2/n 等。然后，使用统一随机生成器选择其中一个间隔并再次，使用均匀或线性分布计算所选区间内的随机数。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-03T13:18:30.633

我最终使用了[mpfr](http://www.mpfr.org/)，它本质上是具有更多功能的 gmp。它已经实现了正态分布。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-11T15:26:32.037

如果您的[图书馆](http://en.wikipedia.org/wiki/Marsaglia_polar_method)有`ln`.

# java - 使用java通过FTPS传输文件时连接重置

> ID：10982665
> 
> 赞同：0
> 
> 时间：2012-06-11T15:00:28.040
> 
> 标签：java, ftps

我正在使用 Java(Zehon) 通过 FTPS 传输文件。这是我的代码片段。

```
try {
FTPsClient ftpClient = new FTPsClient(host, port,username ,password ,false,keyStorePath,keyStorePass);
ftpClient.sendFile(absFilePath, ftpsFolder);
}catch (FileTransferException e) {e.printStackTrace();} 
```

我有 telnet 主机 ip 并且我正在连接。我很确定我传递的凭据是正确的。得到的例外是`com.zehon.exception.FileTransferException: java.net.SocketException: Connection reset` 关于在连接到主机时我可能需要添加什么的任何建议，因为 FTPsClient 的 javadoc 没有显示更多连接到主机的方法.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-12T09:57:18.710

问题在于配置密钥库文件。这就是您实际需要的方式：下载 OPENSSL 并键入此命令

```
openssl pkcs12 -export -in  /path/to/YourVeriSignSSLCert.crt -inkey /path/to/YourPrivateKey.key -out mycert.p12 -name tomcat -CAfile /path/to/YourIntermediateCertificate.cer -caname root 
```

YourVeriSignSSLCert.crt 是您当前的 openssl 证书

YourPrivateKey.key 是您当前的私钥

YourIntermediateCertificate.cer 是 VeriSign 中级 CA

导出的密钥库将位于“mycert.p12”中

现在密钥库文件是 pkcs12 格式，我将其转换为 jks 格式：

```
keytool -v -importkeystore -trustcacerts -srckeystore mycert.p12 -srcstoretype PKCS12 -destkeystore md_keystore.jks -deststoretype JKS 
```

现在这是需要传递给程序的密钥库文件。

# android - 通过蓝牙将安卓设备与免提车载收音机连接

> ID：10982666
> 
> 赞同：2
> 
> 时间：2012-06-11T15:00:30.933
> 
> 标签：android, bluetooth

我的问题与 android 设备连接并能够通过蓝牙与另一台设备通信。

一方面我有一个 android 2.3.7 的 android 设备，另一方面我有一个 PIONEER DEH-6400BT。我可以成功连接这两个设备并完成使用无线电免提蓝牙通信时解释的所有操作。

我想做的事情如下：我想通过蓝牙（使用蓝牙插座）连接到收音机，并且能够对与收音机列出联系人/添加联系人/的能力连接的收音机做任何事情显示联系人正在拨号/或只是在收音机显示屏上显示某种字符串。

为了实现这一点，我从 BluetoothChat 示例开始，并使用[InsecureBluetooth 类](http://www.google.com/url?sa=t&rct=j&q=&esrc=s&source=web&cd=2&ved=0CE8QFjAB&url=http://stanford.edu/~tpurtell/InsecureBluetooth.java&ei=jQXWT8CeFND0sgaY3rGYDw&usg=AFQjCNH-tOSqaNp4Hy5y_B683iWNP7r9Pw&sig2=tlVh5Y7sA5bLIgOqIzctlg)，一开始我开始连接普通的蓝牙免提设备。令人惊讶的是，我通过蓝牙套接字实现了与设备的连接，并且收到了启动整个通信协议 (AT+BRSF:27) 的第一条消息，之后所有通信都中断了，发送任何内容后我都没有收到任何答复。所以这给了我一些希望，我可以连接设备，但我不知道如何继续。

这是最相关的代码：

```
/**
 * This thread runs while listening for incoming connections. It behaves
 * like a server-side client. It runs until a connection is accepted
 * (or until cancelled).
 */
private class AcceptThread extends Thread {
    // The local server socket
    private final BluetoothServerSocket mmServerSocket;

    public AcceptThread() {
        BluetoothServerSocket tmp = null;

        // Create a new listening server socket
        try {
            tmp = mAdapter.listenUsingRfcommWithServiceRecord(NAME, MY_UUID);
        } catch (IOException e) {
            Log.e(TAG, "listen() failed", e);
        }
        mmServerSocket = tmp;
    }

    public void run() {
        if (D) Log.d(TAG, "BEGIN mAcceptThread" + this);
        setName("AcceptThread");
        BluetoothSocket socket = null;

        // Listen to the server socket if we're not connected
        while (mState != STATE_CONNECTED) {
            try {
                // This is a blocking call and will only return on a
                // successful connection or an exception
                socket = mmServerSocket.accept();
                Log.i(TAG, ">>>>>>>>>>>>>>>>>>> SOCKEET accept() <<<<<<<<<<<<<<<<<<<<<<");
            } catch (IOException e) {
                Log.e(TAG, "accept() failed", e);
                break;
            }

            // If a connection was accepted
            if (socket != null) {
                synchronized (BluetoothChatService.this) {
                    switch (mState) {
                    case STATE_LISTEN:
                    case STATE_CONNECTING:
                        // Situation normal. Start the connected thread.
                        connected(socket, socket.getRemoteDevice());
                        break;
                    case STATE_NONE:
                    case STATE_CONNECTED:
                        // Either not ready or already connected. Terminate new socket.
                        try {
                            socket.close();
                        } catch (IOException e) {
                            Log.e(TAG, "Could not close unwanted socket", e);
                        }
                        break;
                    }
                }
            }
        }
        if (D) Log.i(TAG, "END mAcceptThread");
    }

    public void cancel() {
        if (D) Log.d(TAG, "cancel " + this);
        try {
            mmServerSocket.close();
        } catch (IOException e) {
            Log.e(TAG, "close() of server failed", e);
        }
    }
}

/**
 * This thread runs while attempting to make an outgoing connection
 * with a device. It runs straight through; the connection either
 * succeeds or fails.
 */
private class ConnectThread extends Thread {
    private final BluetoothSocket mmSocket;
    private final BluetoothDevice mmDevice;

    public ConnectThread(BluetoothDevice device) {
        mmDevice = device;
        BluetoothSocket tmp = null;

        // Get a BluetoothSocket for a connection with the
        // given BluetoothDevice

        try {

//              tmp = device.createRfcommSocketToServiceRecord(MY_UUID);
                tmp = InsecureBluetooth.createRfcommSocket(mmDevice, 10, false);
            } catch (IOException e) {
                Log.e(TAG, "create() failed", e);
            }
        mmSocket = tmp;
    }

    public void run() {
        Log.i(TAG, "BEGIN mConnectThread");
        setName("ConnectThread");

        // Always cancel discovery because it will slow down a connection
        mAdapter.cancelDiscovery();

        // Make a connection to the BluetoothSocket
        try {
            // This is a blocking call and will only return on a
            // successful connection or an exception
            mmSocket.connect();
        } catch (IOException e) {
            connectionFailed();
            // Close the socket
            try {
                mmSocket.close();
            } catch (IOException e2) {
                Log.e(TAG, "unable to close() socket during connection failure", e2);
            }
            // Start the service over to restart listening mode
            BluetoothChatService.this.start();
            return;
        }

        // Reset the ConnectThread because we're done
        synchronized (BluetoothChatService.this) {
            mConnectThread = null;
        }

        // Start the connected thread
        connected(mmSocket, mmDevice);
    } 
```

您会注意到一行被注释掉了 (tmp = device.createRfcommSocketToServiceRecord(MY_UUID);)，这是创建 BluetoothSocket 的常规方式，但即使使用常规免提设备，我也无法连接。我也尝试过使用反射方式，但这也不起作用。

我也尝试过配对/未配对连接/断开状态的任何组合，但没有运气。

我渴望任何提示。

# extjs - EXTJS 4 树拖放

> ID：10982668
> 
> 赞同：0
> 
> 时间：2012-06-11T15:00:50.590
> 
> 标签：extjs, extjs4

我试图在 EXTJS 4 的树面板中移动节点。这些节点的位置存储在 SQL 数据库中。当我移动节点时会发生什么，这些节点的 id 应该在数据库中更改，具体取决于树上的位置。到目前为止，我只获得了父节点的 id，而不是实际的节点本身。我不明白为什么会这样。每次我移动一个节点时，它都会返回父节点的 ID。代码如下：

```
function buildTree() {

consoleWrite('BUILD THE TREE!!!');

var tree = Ext.create('Ext.tree.Panel', {
    title : '',
    border : false,
    height : SYSTEM.panelHeight,
    viewConfig : {
        listeners : {

        },
        enableDD : true,
        plugins : {
            ptype : 'treeviewdragdrop'
        }
    },
    collapsible : false,
    useArrows : true,
    rootVisible : false,
    store : TREEst,
    multiSelect : false,
    singleExpand : true,
    id : 'PAGETREE',
    listeners : {
        afterRender : function() {
            MASK.tree.hide();
        },
                itemmove : {
            fn : function(v, node, oldParent, newParent, index) {
                  var nodeID = node.data.id;
                                     alert(nodeID);
            }
        } 
```

此 nodeID 正在打印父节点的 id，因为它存储在数据库中，而不是实际节点本身。如果有人可以为我提供如何进行的指导，那就太好了。提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-11T16:51:15.193

我认为您的 itemmove 参数签名不正确。4.1 的 API 文档说：

```
itemmove( Ext.data.NodeInterface this, Ext.data.NodeInterface oldParent, Ext.data.NodeInterface newParent, Number index, Object eOpts ) 
```

所以你的节点实际上是指 oldParent。

# sql - Drop Master Key 继续运行

> ID：10982670
> 
> 赞同：1
> 
> 时间：2012-06-11T15:00:54.810
> 
> 标签：sql, sql-server, database, sql-server-2008, sql-server-2005

我正在尝试删除数据库的主密钥，但每次我运行下面的 sql

```
DROP MASTER KEY 
```

查询继续执行并且永远不会完成。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-11T17:03:25.727

每当我发出一个应该立即完成但没有完成的命令时，我就会想到阻塞。所以我会记下我发出命令的窗口的 SPID，然后`select * from sys.dm_os_waiting_tasks where session_id = @spid`解析块是什么。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-11T15:35:24.673

您对数据库有“控制”权限吗？如果是这样，数据库中是否有任何私钥？在执行此操作之前是否已将其删除？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-02T12:01:05.067

所以我在禁用服务代理后让它工作。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-11T15:54:03.963

我只能通过 2 个查询窗口重复这一点。在一个：

```
create  master key ENCRYPTION BY PASSWORD = 'password'
begin tran --!!!
OPEN MASTER KEY DECRYPTION BY PASSWORD = 'password' 
```

第二个窗口：

```
drop master key -- waits... 
```

所以也许有人在使用那个万能钥匙！您可能应该从 db 中踢出所有其他用户，然后尝试.. 或者找出谁在使用它（您自己？）。

# c - 如何在 c 中搜索目录及其子目录中的文件？

> ID：10982677
> 
> 赞同：-1
> 
> 时间：2012-06-11T15:01:15.893
> 
> 标签：c, linux, file, find

如何在 C 中搜索目录及其子目录中的文件？我不允许使用`find` ，我必须使用`opendir`,`readdir`和`stat`.

`ls -ln`如果文件确实存在，我想执行类似命令的操作。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-11T15:58:02.777

要遍历目录，您将需要：[opendir(3)](http://pubs.opengroup.org/onlinepubs/007908799/xsh/opendir.html)、[readdir(3)](http://pubs.opengroup.org/onlinepubs/007908799/xsh/readdir.html)和[closedir(3)](http://pubs.opengroup.org/onlinepubs/007908799/xsh/closedir.html)。

要检查文件的类型（查看它是否是目录以及是否应该在其中递归搜索），您将需要[stat(2)](http://pubs.opengroup.org/onlinepubs/007908799/xsh/stat.html)。

你会想要检查

```
(struct stat).st_mode & S_IFDIR 
```

查看文件是否为目录。有关详细信息，请参阅[<sys/stat.h>](http://pubs.opengroup.org/onlinepubs/007908799/xsh/sysstat.h.html)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-12T10:07:00.983

如果我们尝试用 C 编写一小段代码，那么我们可以轻松地完成这个搜索活动。假设您需要在 /home/Jack/ 中搜索 abc.txt，然后只需打开文件流并将文件路径作为参数传递。现在当这个语句将被执行时，它会尝试打开现有的文件。如果文件存在，此 API 将返回非零，否则返回 -1 或零。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-11T15:26:36.660

您已经提供了基本答案：`opendir`// `readdir`。`closedir`当您遍历目录条目时，您会检查每个条目是指文件还是目录。那些引用目录的，你也遍历（通常是递归的）。对于那些引用文件的人，您可以将它们的名称与您正在寻找的文件进行比较，看看您是否找到了它。

另一个小细节：您可能还想检查符号链接。符号链接可以（例如）引用父目录，这可能/可能导致无限递归。您可能想要完全忽略符号链接，或者您可能想要保留至少已经开始遍历的目录列表，并且仅当符号链接中的内容不在列表中时才解析/遍历它。

# twisted - 如何在 protocol.ReconnectingClientFactory 中捕获错误

> ID：10982679
> 
> 赞同：0
> 
> 时间：2012-06-11T15:01:19.160
> 
> 标签：twisted

我一直在寻找解决方案几个小时，也许我只是错过了一些东西..

我有一个实现的工厂，`protocol.ReconnectingClientFactory`它工作得很好，但是，每当程序结束运行时，我的日志中都会为运行时发生的每次断开连接收到一堆`Unhandled error in Deferred`消息，例如

```
2012-06-14 12:28:51+0100 [-] Unhandled error in Deferred:
2012-06-14 12:28:51+0100 [-] Unhandled Error
        Traceback (most recent call last):
        Failure: twisted.internet.error.ConnectionLost: Connection to the other side was lost in a non-clean fashion: Connection lost. 
```

有什么办法我可以在运行时以某种方式“处理”这些，这样我的日志就不会在最后被垃圾邮件发送..（或避免它以某种方式发送垃圾邮件......）我真的不在乎解决方案是什么，我已经有以下方法可以为我记录所有内容

```
def clientConnectionLost(self, connector, reason):
        log.msg('Lost connection. Reason: %s' % reason) 
```

我可以对其中的“原因”（即失败对象）做些什么，以便正确处理错误..？

无论如何，我并没有声称自己精通 Twisted，所以任何帮助都将不胜感激。

提前非常感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-12T17:31:58.277

该消息`Unhandled error in Deferred`告诉您错误来自哪里，甚至暗示如何消除它。当 a`Deferred`被垃圾收集并产生`Failure`结果时，它会记录这些消息 - 因为未处理错误。

将错误处理程序（和*errback*）添加到以`Deferred`这种方式失败的错误，并根据需要处理错误（包括忽略它，如果这适合您的应用程序）。

# autoit - 无法在 Frame 中检索链接

> ID：10982682
> 
> 赞同：0
> 
> 时间：2012-06-11T15:01:29.230
> 
> 标签：autoit

我正在尝试使用 AutoIt 从该网站检索一些数据：

[http://www.acgme.org/adspublic/default.asp](http://www.acgme.org/adspublic/default.asp)

不幸的是，该页面使用框架，我无法导航到数据所在的页面。

链接是“认可程序”

```
#include <IE.au3> 

$URL="http://www.acgme.org/adspublic/"
$MyIExplorer=_IECreate($URL,1,1,1,1)

Local $theFrame = _IEGetObjById($MyIExplorer,"control")
MsgBox(0,"The Frame",$theFrame.src)

Local $oLinks = _IELinkGetCollection($theFrame)
MsgBox(0, "Link Count", @extended & " links found") 
```

当我运行上面的代码时，我能够填充`$theFrame`包含“Accredited Programs”链接的正确框架对象，但这是我所能得到的。`$oLinks`集合返回空 。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-12T07:18:59.750

相框比较特别。请改用 _IEFrameGetObjByName。

```
#include <IE.au3>

$URL="http://www.acgme.org/adspublic/"
$MyIExplorer=_IECreate($URL,1,1,1,1)

Local $theFrame = _IEFrameGetObjByName($MyIExplorer,"control")

Local $oLinks = _IELinkGetCollection($theFrame)
MsgBox(0, "Link Count", @extended & " links found") 
```

# javascript - onChange 以及所选元素的值在哪里（jQuery Mobile）

> ID：10982683
> 
> 赞同：0
> 
> 时间：2012-06-11T15:01:35.027
> 
> 标签：javascript, jquery, jquery-mobile

如何在下面的示例中获取选定元素的值？'change' 处理程序按预期被触发，但值到底在哪里？

Java脚本：

```
$("#test").bind('change', function(event, ui)
{
   alert(ui.value); // ????!!!!
}); 
```

HTML：

```
<select id="test"  data-native-menu="false">
   <option value="1">1</option>
   <option value="2">2</option>
   <option value="3">3</option>
</select> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-11T15:02:13.583

试试这个：

```
$("#test").bind('change', function(event, ui) {
   alert(this.value);
}); 
```

# c# - 为依赖属性创建代理

> ID：10982685
> 
> 赞同：6
> 
> 时间：2012-06-11T15:01:41.290
> 
> 标签：c#, wpf, xaml, proxy, dependency-properties

我正在尝试创建一个简单的依赖属性代理。我做了一个自定义控件，它是一个文件选择器，它由一个文本框（名称：）`"TextBox_FilePath"`和一个显示打开文件对话框的按钮组成。

当我正在制作一个可重用的控件时，我希望它有一个`"SelectedFilePath"`属性。由于该`Text`属性似乎非常适合我的控件成为该`"SelectedFilePath"`属性，因此我只想代理这些依赖项属性。

我提出的第一种方法是：

```
public static readonly DependencyProperty SelectedFilePathProperty = TextBox.TextProperty;

public string SelectedFilePath
{
    get { return (string) this.TextBox_FilePath.GetValue(SelectedFilePathProperty); }
    set { this.TextBox_FilePath.SetValue(SelectedFilePathProperty, value); }
} 
```

这有效，但在尝试绑定到该属性时抛出了异常。然后我离开了：

```
public static readonly DependencyProperty SelectedFilePathProperty =
    DependencyProperty.Register("SelectedFilePath", typeof (string), typeof (FilePicker), new PropertyMetadata(default(string)));

public string SelectedFilePath
{
    get { return (string) this.TextBox_FilePath.GetValue(SelectedFilePathProperty); }
    set { this.TextBox_FilePath.SetValue(SelectedFilePathProperty, value); }
} 
```

这确实有效，但我不知道为什么？我在哪里指定我想要`text`文本框的属性？

**我缺少什么来简单地代理该依赖属性？**

**编辑：** 解决方案`AddOwner`也不起作用，它会抛出一个 Excetion 说“绑定只能应用于依赖属性”。代码：

```
public static readonly DependencyProperty SelectedFilePathProperty =
    TextBox.TextProperty.AddOwner(typeof(FilePicker));

public string SelectedFilePath
{
    get { return (string)this.TextBox_FilePath.GetValue(SelectedFilePathProperty); }
    set { this.TextBox_FilePath.SetValue(SelectedFilePathProperty, value); }
} 
```

我不明白什么？

**EDIT2：** 对于其他在理解答案方面有问题的人，我制作[了一个小图形](https://stackoverflow.com/a/10997648/808723)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-11T15:04:11.280

第一种方法不起作用，因为该属性仅为*注册*`TextBox`，在另一个类中添加引用什么都不做。

第二个只是创建一个全新的字符串属性。

如果你真的想重用`TextBox.TextProperty`调用[`AddOwner`](http://msdn.microsoft.com/en-us/library/System.Windows.DependencyProperty.AddOwner.aspx)就可以了。

例如

```
public static readonly DependencyProperty SelectedFilePathProperty =
    TextBox.TextProperty.AddOwner(typeof(FilePicker)); 
```

（请注意，此属性已注册为`"Text"`，因此您可能应该像已经创建的那样使用您想要的名称创建一个新属性。我还建议您[将元数据标志设置](http://msdn.microsoft.com/en-us/library/ms557295.aspx)为[默认绑定双向，](http://msdn.microsoft.com/en-us/library/system.windows.frameworkpropertymetadataoptions.aspx)如果您想拥有相同的绑定行为为`TextBox.Text`。）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-12T11:42:04.790

这个解决方案有点棘手，但有效。

鉴于此用户控制：

```
<Grid>
    <StackPanel>
        <WpfApplication1:FilePicker SelectedFilePath ="{Binding MyProperty, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}" />
        <TextBlock Text="{Binding MyProperty}" />
    </StackPanel>
</Grid> 
```

及其视图模型：

```
public class MainWindowViewModel : INotifyPropertyChanged
{
    #region Implementation of INotifyPropertyChanged

    public event PropertyChangedEventHandler PropertyChanged;

    public void OnPropertyChanged(string e)
    {
        var handler = PropertyChanged;
        if (handler != null) handler(this, new PropertyChangedEventArgs(e));
    }

    #endregion

    private string _myProperty;
    public string MyProperty
    {
        get { return _myProperty; }
        set
        {
            _myProperty = value;
            OnPropertyChanged("MyProperty");
        }
    }
} 
```

用于 FilePicker 控件的 XAML：

```
<Grid>
    <TextBox x:Name="TextBox_FilePath" DataContext="{Binding RelativeSource={RelativeSource Mode=FindAncestor, AncestorType={x:Type WpfApplication1:FilePicker}}}" Text="{Binding SelectedFilePath, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}" />
</Grid> 
```

FilePicker 控件的 CodeBehind：

```
public partial class FilePicker : UserControl
{
    public FilePicker()
    {
        InitializeComponent();
    }

    /* private PROXY DP*/
    private static readonly DependencyProperty TextProperty =
        TextBox.TextProperty.AddOwner(typeof(FilePicker));

    /* public DP that will fire getter/setter for private DP  */
    public static readonly DependencyProperty SelectedFilePathProperty =
        DependencyProperty.Register("SelectedFilePath", typeof(string), typeof(FilePicker), new PropertyMetadata(default(string)));

    public string SelectedFilePath
    {
        get { return (string)GetValue(TextProperty); }
        set { SetValue(TextProperty, value); }
    }
} 
```

奇迹般有效。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-12T13:24:43.650

由于我在理解[HBs 的答案](https://stackoverflow.com/a/10982729/808723)时遇到问题，所以我制作了一个小图，帮助我理解幕后发生的事情。这里是;

![在此处输入图像描述](../Images/ad8b5a775963d41ec3055e2e18f99a3b.png)

也许它可以帮助别人:)

# image - 为什么 .mdb 的大小随着小图像增长三倍？

> ID：10982688
> 
> 赞同：5
> 
> 时间：2012-06-11T15:01:49.177
> 
> 标签：image, ms-access, ms-access-2010

我在 Access 2010 中制作了一些表单，并将公司徽标添加到标题表单中。此图片为.jpg，大小为70KB。我不知道为什么 .mdb 的大小立即从 4MB 增加到 12MB？（很少形式和相同的标志）也许有一些图像压缩选项？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-03T21:00:37.773

取自[http://office.microsoft.com/en-us/access-help/store-images-in-a-database-HP005280225.aspx](http://office.microsoft.com/en-us/access-help/store-images-in-a-database-HP005280225.aspx)

> ...“但是，嵌入图像会迅速增加数据库的大小并导致其运行缓慢。如果您存储 GIF 和 JPEG 文件尤其如此，因为 OLE 会创建包含每个图像的显示信息的附加位图文件文件，并且这些附加文件可能比您的原始图像更大。此外，此方法仅支持 Windows 位图 (.bmp) 和设备无关位图 (.dib) 图形文件格式。如果要显示其他常见类型的图像文件，例如 GIF 和 JPEG 图像，您必须安装其他软件。”...

为了解释这些位图文件是如何存储的，下面的链接提供了比微软网站更多的解释：

取自[http://www.ammara.com/support/kb/showkbe5cc.html](http://www.ammara.com/support/kb/showkbe5cc.html)

> ...“OLE 链接和嵌入是 Microsoft Access 用于在数据库表中存储“对象”的一种技术。该技术依赖于相关的外部应用程序来存储、呈现和编辑数据。在某些情况下，还有一个额外的未压缩“预览”图像也保存在表中（即使在链接时）。此预览图像用于更快地显示数据，或者在服务器应用程序不可用时。这可能会导致大量开销。如果您要存储 jpeg 图像未压缩的预览可能是实际图像大小的十倍或二十倍，导致数据库的大小猛增。”...

因此，当您将图像拖放到 MS Access 中的表单上时，未压缩的图像数据将保存到系统表中。这是实际未压缩的表数据，因此压缩和修复可能没什么帮助。

常见的解决方法似乎是将图像的路径存储在数据库表中，并使用该路径来调用表单上的图像。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-03T21:12:02.057

我不知道为什么（我不在乎），但我也已经注意到了这种行为。我对公司徽标或等效项的解决方法是将其插入到一个表单中，然后我将其作为子表单插入到我需要的任何地方。它还有一个额外的好处，即如果徽标一天发生变化，则只有一个地方可以更新。

# android - Android 电子邮件发送不带附件

> ID：10982696
> 
> 赞同：0
> 
> 时间：2012-06-11T15:02:31.330
> 
> 标签：android, email

我必须解决以下问题：

我想发送一封附有图片的电子邮件。我写了这段代码：

```
 File file = context.getDir("Files", context.MODE_WORLD_WRITEABLE);
    File image = new File(file, "image.jpg");

    Uri U = Uri.fromFile(image);
    Intent i = new Intent(Intent.ACTION_SEND);
    i.setType("image/jpg");
    i.putExtra(Intent.EXTRA_STREAM, U);
    context.startActivity(Intent.createChooser(i, "Email:")); 
```

电子邮件已发送，但没有附件。

有人知道为什么发送的电子邮件没有附件吗？

**编辑**

我找到了我的问题的答案。由于图像存储在内部存储中，它没有足够的权限，因此无法通过电子邮件发送。我已将图像移至 externalStorage，现在它可以工作了：）

谢谢，方舟

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-11T15:07:33.197

试试这个——

```
final Intent emailIntent = new Intent(android.content.Intent.ACTION_SEND_MULTIPLE);
emailIntent.setType("plain/text");
emailIntent.putExtra(android.content.Intent.EXTRA_EMAIL,new String[]{"email"});
emailIntent.putExtra(android.content.Intent.EXTRA_SUBJECT, "subject");
emailIntent.putExtra(android.content.Intent.EXTRA_TEXT,"Test");
//has to be an ArrayList
ArrayList<Uri> uris = new ArrayList<Uri>();
//convert from paths to Android friendly Parcelable Uri's
for (String file : filePaths)
{
    File fileIn = new File(file);
    Uri u = Uri.fromFile(fileIn);
    uris.add(u);
}
emailIntent.putParcelableArrayListExtra(Intent.EXTRA_STREAM, uris);
context.startActivity(emailIntent); 
```

也可以看看我的[现有答案](https://stackoverflow.com/a/9273051/940096)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-11T15:10:25.870

```
String smsBody = "Body of the Content";
Intent emailIntent = new Intent(android.content.Intent.ACTION_SEND);
emailIntent.setType("image/*");
emailIntent.putExtra(android.content.Intent.EXTRA_EMAIL,new String[] { "" });
emailIntent.putExtra(android.content.Intent.EXTRA_SUBJECT,"Subject of the Mail");
emailIntent.putExtra(android.content.Intent.EXTRA_TEXT, smsBody);
emailIntent.putExtra(Intent.EXTRA_STREAM,Uri.fromFile("mnt/sdCard/SampleImageFloder/TestImage.png"));
emailIntent.setType("vnd.android.cursor.dir/email");
activity.startActivity(Intent.createChooser(emailIntent,"Email:")); 
```

# c# - 从搜索中排除 OU

> ID：10982698
> 
> 赞同：1
> 
> 时间：2012-06-11T15:02:40.550
> 
> 标签：c#, .net, active-directory

> **可能重复：**
> [不在 OU 中时搜索](https://stackoverflow.com/questions/6208243/search-when-not-in-ou)

我正在尝试`OU`从搜索中排除（组织单位）

我在活动目录上做，这样我就不会显示已被终止或不再受雇于我们的人。

这些人存在于`OU`我不想展示的所谓“暂停”中。我尝试按照`(!OU=Suspended)`.however 的方式做一些事情，但这不起作用。我正在使用 .net 和 System.DirectoryServices。这是我当前的搜索过滤器：

```
search.Filter = String.Format ( "(&(objectCategory=person)(objectClass=user)(sn={0}*)(!employeeType=Student)(!(memberOf=CN=NoDirectoryEntry,OU=Groups,OU=Staff,OU=SPFLDCOL,DC=scad,DC=spfldcol,DC=edu)))", lname ); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-11T15:15:11.817

您不能在 Active-Direcory 的 LDAP 搜索中使用过滤器来排除 OU。

因为标准 LDAP 将 LDAP-SEARCH 描述为具有 4 个参数的函数：

1.  开始搜索的点头是可分辨名称 (DN)
2.  你想恢复的态度
3.  搜索深度（基础、一级、子树）
4.  过滤器。

剩下的解决方案是：

*   互相寻找OU。
*   为挂起的 OU 中的每个对象使用专用属性并使用此属性进行过滤。

# android - 如何从音乐播放器中选择多个项目？

> ID：10982700
> 
> 赞同：0
> 
> 时间：2012-06-11T15:02:47.710
> 
> 标签：android

我需要从我的活动中调用音乐播放器来选择多个歌曲项目并将该列表返回到我的活动中。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-21T14:27:09.713

你不能这样做。您唯一可以执行的操作 - 为一首歌曲启动音乐选择器。检查[此链接](https://stackoverflow.com/questions/3179908/song-picker-for-android)以了解如何操作。

# python - How do I obtain the delta between two dates?

> ID：10982705
> 
> 赞同：3
> 
> 时间：2012-06-11T15:02:59.043
> 
> 标签：python, django

I've been searching around before asking this.

I have Django template, which inputs a water account number, a beginning date, and an ending date. The dates define a search range, and are in mm/dd/yyyy format.

I'd like to convert these dates into a Python format, so I can find the difference between them. I'm aware of date and datetime objects, and I know I can parse -- for example -- 05/01/2012 -- and create a date object from that.

However, I'm interested in a better way to this, like converting the "05/01/2012" directly for start and end date range values, and then taking the delta between those Python date objects.

Thank you.

Edit: This is what I'm using to calculate the delta:

```
d1 and d2 are date strings in the form: mm/dd/yyyy.
def time_delta(d1, d2):
    dd1   = datetime.strptime(d1, "%m/%d/%Y").date()
    dd2   = datetime.strptime(d2, "%m/%d/%Y").date()
    delta = dd2 - dd1
    return delta.days 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-11T15:09:29.690

Maybe something like this?

```
from datetime import *
d1 = datetime.strptime('05/01/2012', "%d/%m/%Y").date()
d2 = datetime.strptime('06/01/2012', "%d/%m/%Y").date()
delta = d2 - d1
print(delta.days) 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-11T15:16:16.830

You should be using Django forms for this kind of thing. If you use date fields, then `start_date` and `end_date` will be Python date objects when you you fetch them out of the form's cleaned data dictionary.

If you haven't used Django forms before, then I recommend that you read through the [forms documentation](https://docs.djangoproject.com/en/dev/topics/forms/#working-with-forms). Here's a couple of snippets as a hint.

```
class MyForm(forms.Form):
    start_date = forms.DateField()
    end_date = forms.DateField()
    # other fields e.g. water account number

# in your view
if request.method == "POST":
    form = MyForm(request.POST)
    if form.is_valid():
        start_date = form.cleaned_data['start_date']
        end_date = form.cleaned_data['end_date']
        delta = end_date - start_date
        # do anything else you need to do 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-11T15:51:34.447

The [dateutil](http://labix.org/python-dateutil) module is really nice for parsing dates:

```
>>> from dateutil.parser import parse
>>> parse("05/01/2012") - parse("04/01/2012")
datetime.timedelta(30) 
```

# ruby-on-rails - 如何在 Rails 上的 .yml 本地化文件中换行？

> ID：10982706
> 
> 赞同：31
> 
> 时间：2012-06-11T15:03:01.137
> 
> 标签：ruby-on-rails, localization, yaml

我有一个带有一些本地化的 terms.en.yml 文件，例如：

```
en:
  devise:
    registrations:
      terms:
        text: 'This agreement was written in English (US). To the extent any translated version of this agreement conflicts with the English version, the English version controls.  Please note that Section 16 contains certain changes to the general terms for users outside the United States.\n\ Some new line' 
```

我怎么能在那里换行或创建一个段落？

这是一些信息，但对我没有帮助，我做错了什么。[http://yaml.org/spec/1.1/#b-paragraph-separator](http://yaml.org/spec/1.1/#b-paragraph-separator)

* * *

## 回答 #1

> 赞同：59
> 
> 时间：2012-06-11T15:21:15.947

这对我有用：

```
en:
  hello: "Hello world"
  bye: |
    Bye!
    See you!
  error: >
    Something happend.
    Try later. 
```

用法：

```
irb(main):001:0> I18n.t 'bye'
=> "Bye!\nSee you!\n"
irb(main):002:0> I18n.t 'error'
=> "Something happend. Try later.\n" 
```

* * *

## 回答 #2

> 赞同：26
> 
> 时间：2016-09-23T10:29:44.857

我认为您的回答意味着：

**“如何在 .yml (YAML) 文件中使用换行符编写短语/段落并使 rails 输出 (HTML) 包含这些换行符？”**

所以对我来说，目标是在 .yml (YAML) 文件中写一个带有断线的短语，以便轻松理解最终输出，然后在 Rails 生成的 HTML 中获得准确的输出。

为此，我们需要在 .yml 文件和 .html.erb|.slim 文件中采取一些简单的预防措施。

这就是我的做法。

**Welcome_page.html.slim**

```
h4.white = t('welcome_html') 
```

**请在此处注意 _html 最后部分。**如果您的翻译密钥以 _html 结尾，您可以免费转义。资料来源： http: [//guides.rubyonrails.org/i18n.html#using-safe-html-translations](http://guides.rubyonrails.org/i18n.html#using-safe-html-translations)

**en.yml**

```
en:
  welcome_html: |
    Welcome on StackOverflow!</br>
    This is your personal dashboard! 
```

**所以现在在我们的 .yml 文件中，我们可以使用将被转义的 </br> HTML 标记。** 为了便于阅读和理解，我们希望使用“|”的输出将如何显示 yaml 选项让我们在 .yml 文件中也有换行符。但提醒一下“|” 此处的选项仅适用于我们，以使开发人员更具可读性和友好性。“|” YAML 选项不会影响输出！我们也可以使用其他 YAML 选项，例如：

```
en:
  welcome_html: >
    Welcome on StackOverflow!</br>
    This is your personal dashboard! 
```

或者：

```
en:
  welcome_html:
    Welcome on StackOverflow!</br>
    This is your personal dashboard! 
```

或者：

```
en:
  welcome_html: "Welcome on StackOverflow!</br>This is your personal dashboard!" 
```

它们都产生相同的输出，所以现在您的 HTML 页面将反映该断线。

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2012-06-12T15:11:45.527

如果您想在代码中包含换行符，但不在输出中：

```
en:   
    devise:
    registrations:
      terms:
        text: >
          This agreement was written in English (US). 
          To the extent any translated version of this 
          agreement conflicts with the English version, 
          the English version controls.  Please note 
          that Section 16 contains certain changes to 
          the general terms for users outside the 
          United States.

          Some new line 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2017-08-24T11:02:33.837

Diego D 使用`_html`as YAML 前缀的回答大多有效，但当它不起作用时（例如在闪光警报中），您也可以尝试`.html_safe`在模板中的本地化字符串上使用。

举个例子：

```
<% flash.each do |name, msg| -%>
  <%= content_tag :div, msg.html_safe, class: name %>
<% end -%> 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2019-05-20T13:08:49.323

以防万一其他人也无法让 Diego D 的答案正常工作：
我需要`</br>`用`<br>`or替换`<br />`。

# jquery - 使用 jquery 和重定向检测 IE 在 shipedia.eu 上不起作用

> ID：10982709
> 
> 赞同：0
> 
> 时间：2012-06-11T15:03:04.387
> 
> 标签：jquery, ajax, internet-explorer

我正在开发网站 Joomla 组件。您可以在起始页的[www.shipedia.eu](http://www.shipedia.eu)上看到它。它是游轮的搜索掩码。

现在我的问题：

我在起始页上有一个“Suchen & Finden”按钮，它应该启动 AJAX 查询（使用 jQuery 执行）。有了 ajax 查询的答案，我想更改页面的内容。在 FF 和所有优秀的浏览器中它可以正常工作，但在 IE 中却不行……所以我所做的就是检查用户是否正在使用 IE。如果他使用的是 IE，它不应该执行 ajax 查询，而是使用 window.location() 重定向。它可以在我的一台 Windows 电脑上安装的 IE 上神奇地工作，但实际上就在那里，在我尝试过的所有其他 Windows 电脑上它都不起作用。

这里是我用来识别 IE 并执行重定向的代码：

```
// check for ie
        if (jQuery.browser.msie) {
            window.location(url);
        } 
```

我需要的是识别 IE 并重定向到给定的 URL 或执行 AJAX 查询并更改内容。

编辑：

这是我用来启动 ajax 查询或进行重定向的整个代码：

```
 // button link
    jQuery('.button_s_link').click(function(){

        // wait on
        jQuery('#wait').show();

        // sammle die werte
        var toc =           jQuery('.change_toc:checked').val();
        var zielgebiet =    jQuery('.zielgebiete_s_select').val();
        var from =          jQuery('.from').val();
        var to =            jQuery('.to').val();
        var reederei =      jQuery('.reederei_s_select').val();
        var schiff =        jQuery('.schiff_s_select').val();

        // erstelle url
        var url =   'index.php'
                   +'?option=com_kreuzfahrten'
                   +'&view=filter'
                   +'&search=1'
                   +'&toc='+toc
                   +'&zielgebiet='+zielgebiet
                   +'&from='+from
                   +'&to='+to
                   +'&reederei='+reederei
                   +'&schiff='+schiff;

        // check for ie
        if (jQuery.browser.msie) {
            url += '&Itemid=<?php echo JRequest::getVar('Itemid'); ?>';
            window.location(url);
        } else {
            url += '&format=raw'
                +  '&template=raw_filter';
        }

        // lade filter ansicht
        jQuery.ajax({
            type: 'POST',
            url: url,
            dataType:'html',
            success: function (data) {
                jQuery('.mainContainer_s').empty().html(function(){
                  // wait off
                  jQuery('#wait').hide();
                  return data;
                });
            },
            error: function () {
                alertErrorMsg();
            }
        }); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-11T15:07:23.150

```
 window.location = url;
 //window.location is not a function 
```

# c++ - C++ 错误：不是成员或多个定义

> ID：10982710
> 
> 赞同：2
> 
> 时间：2012-06-11T15:03:05.790
> 
> 标签：c++, static, constants

我正在尝试使用我在类中定义的静态 const 字段。
当我这样定义它时：

```
class DisjunctionQuery : public Query
{

  public:
    DisjunctionQuery ();
    static const std::string prefix;

};
const std::string DisjunctionQuery::prefix = "Or"; 
```

它说：'DisjunctionQuery::prefix'的多重定义，如果我这样改变（删除两行）：

```
class DisjunctionQuery : public Query
{

  public:
    DisjunctionQuery ();
    //static const std::string prefix;

};
//const std::string DisjunctionQuery::prefix = "Or"; 
```

它说当我尝试在另一个地方调用它时，“前缀”不是“分离查询”的成员。

我怎样才能让它工作？谢谢。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-11T15:04:26.127

您将定义移动到单个实现文件中。

如果您将其保留在标题中，您将打破**单一定义规则**。每个包含标题的文件都会尝试定义`static`成员，这是错误的。

```
//DisjunctionQuery.h
class DisjunctionQuery : public Query
{
  public:
    //....
    static const std::string prefix;
};

//DisjunctionQuery.cpp
#include "DisjunctionQuery.h"
const std::string DisjunctionQuery::prefix = "Or"; 
```

# javascript - 使用javascript将二进制数据转换为base64

> ID：10982712
> 
> 赞同：26
> 
> 时间：2012-06-11T15:03:10.567
> 
> 标签：javascript, html, base64

HTML5 使您能够在本地存储数据，我认为这很棒。例如，这里是你如何使用它：

```
 var store = window.localStorage;
        store.setItem('foo', "hellow world");
        var test = store.getItem('foo');
        // test should = "hellow world" 
```

在 html 中，您可以通过将其来源设置为动态显示图像：

```
 "data:image/jpg;base64," + (base64string) 
```

**所以我的问题是**如何将二进制数据转换为 base64 字符串，以便我可以利用 html5 本地存储？

例如，如果我能：

```
$.ajax({
   url: 'someImage.png',
   type: 'POST',
   success: function (r) {

                // here I want to convert r to a base64 string !
                // r is not binary so maybe I have to use a different approach
                var data = ConvertToBase64(r);

                document.getElementById("img").src = "data:image/png;base64," + data;
            },
}); 
```

* * *

我知道我可以通过使用 html5 将图像包裹在画布周围然后将其转换为 base64string 来解决这个问题。我也可以在服务器上创建一个特定的服务，该服务将发送该图像的 base64 字符串数据（someImage.aspx）。**我只想知道是否可以从服务器检索二进制数据并将其转换为 base64 字符串。**

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2017-01-03T13:51:45.090

为防止出现“InvalidCharacterError”错误，您需要执行以下操作：

```
var base64EncodedStr = btoa(unescape(encodeURIComponent(rawData))); 
```

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2015-03-12T10:05:34.390

使用[FileReader](https://developer.mozilla.org/en-US/docs/Web/API/FileReader)将图像编码为数据 URL：

```
jQuery.ajax({...})
.done(function (r) {
  var reader = new FileReader(
  reader.onload = (function(self) {
    return function(e) {
      document.getElementById("img").src = e.target.result;
    }
  })(this);
  reader.readAsDataURL(new Blob([r]));
}); 
```

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2012-06-11T15:04:48.957

试试这个[`btoa`](https://developer.mozilla.org/en/DOM/window.btoa)功能：

```
 var data = btoa(r); 
```

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2020-08-21T16:40:58.170

这是一个老问题，但找不到更好的答案，所以我写下了这个函数。它会将 Uint8Array 直接转换为 Base64，而不会将其转换为 base64 之前的字符串。希望它会帮助某人。

```
var encoder = new TextEncoder("ascii");
var decoder = new TextDecoder("ascii");
var base64Table = encoder.encode('ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=');
function toBase64(dataArr){
    var padding = dataArr.byteLength % 3;
    var len = dataArr.byteLength - padding;
    padding = padding > 0 ? (3 - padding) : 0;
    var outputLen = ((len/3) * 4) + (padding > 0 ? 4 : 0);
    var output = new Uint8Array(outputLen);
    var outputCtr = 0;
    for(var i=0; i<len; i+=3){              
        var buffer = ((dataArr[i] & 0xFF) << 16) | ((dataArr[i+1] & 0xFF) << 8) | (dataArr[i+2] & 0xFF);
        output[outputCtr++] = base64Table[buffer >> 18];
        output[outputCtr++] = base64Table[(buffer >> 12) & 0x3F];
        output[outputCtr++] = base64Table[(buffer >> 6) & 0x3F];
        output[outputCtr++] = base64Table[buffer & 0x3F];
    }
    if (padding == 1) {
        var buffer = ((dataArr[len] & 0xFF) << 8) | (dataArr[len+1] & 0xFF);
        output[outputCtr++] = base64Table[buffer >> 10];
        output[outputCtr++] = base64Table[(buffer >> 4) & 0x3F];
        output[outputCtr++] = base64Table[(buffer << 2) & 0x3F];
        output[outputCtr++] = base64Table[64];
    } else if (padding == 2) {
        var buffer = dataArr[len] & 0xFF;
        output[outputCtr++] = base64Table[buffer >> 2];
        output[outputCtr++] = base64Table[(buffer << 4) & 0x3F];
        output[outputCtr++] = base64Table[64];
        output[outputCtr++] = base64Table[64];
    }

    var ret = decoder.decode(output);
    output = null;
    dataArr = null;
    return ret;
} 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2021-05-06T20:43:41.937

```
//dataArr is a Uint8Array        
function toBase64(dataArr){
            return btoa(dataArr.reduce((data, val)=> {
                 return data + String.fromCharCode(val);
            }, ''));
        } 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2021-06-29T03:13:44.663

**现代浏览器的公平和简单的解决方案**

```
fetch('https://picsum.photos/536/354', {
    method: 'GET',
})
.then((data) => {
    // IMP to convert your json or other response to blob ( for this you have to check your api response is file / binary 
    return data.blob()
})
.then((data) => {
    var reader = new FileReader();
    reader.onload = function() {                         
        var b64 = reader.result
        console.log("This is base64", b64)
        document.getElementById("imagetoShow").src = b64
    }
    reader.readAsDataURL(data)
})
.catch((error) => {
    error.text().then( errorMessage => {
        console.log(errorMessage)
    })
})
```

```
<image src="" width="200" height="200" id="imagetoShow"/>
```

# java - Glassfish 服务器未在 eclipse 上启动

> ID：10982713
> 
> 赞同：1
> 
> 时间：2012-06-11T15:03:17.293
> 
> 标签：java, eclipse, jsf, glassfish-3

当我启动服务器时，它给了我以下错误：我无法启动服务器。

> 本地主机上的服务器 GlassFish Server Open Source Edition 3 (Java EE 6) 无法启动。

服务器日志如下：

> 2012 年 6 月 11 日晚上 8:28:23
> com.sun.enterprise.admin.launcher.GFLauncherLogger
> 信息信息：JVM 调用命令行：C:\Program Files\Java\jdk1.7.0_04\bin\java.exe -cp C :/Java/glassfish-3.0.1/glassfishv3/glassfish/modules/glassfish.jar
> -XX:+UnlockDiagnosticVMOptions
> -XX:MaxPermSize=192m
> -XX:NewRatio=2
> -XX:+LogVMOutput
> -XX:LogFile=C:\Java \glassfish-3.0.1\glassfishv3\glassfish\domains\domain1/logs/jvm.log
> -Xmx512m
> -javaagent:C:/Java/glassfish-3.0.1/glassfishv3/glassfish/lib/monitor/btrace-agent.jar= unsafe=true,noServer=true
> -client
> -Dosgi.shell.telnet.maxconn=1
> -Djdbc.drivers=org.apache.derby.jdbc.ClientDriver
> -Dfelix.fileinstall.dir=C:\Java\glassfish-3.0.1\glassfishv3\glassfish/modules/autostart/
> -Djavax.net.ssl.keyStore=C:\Java\glassfish-3.0.1\glassfishv3\glassfish\域\domain1/config/keystore.jks
> -Dosgi.shell.telnet.port=6666
> -Djava.security.policy=C:\Java\glassfish-3.0.1\glassfishv3\glassfish\domains\domain1/config/server.policy
> -Dfelix.fileinstall.poll=5000
> -Dcom.sun.aas.instanceRoot=C:\Java\glassfish-3.0.1\glassfishv3\glassfish\domains\domain1 -Dcom.sun.enterprise.config.config_environment_factory_class=com.sun。 enterprise.config.serverbeans.AppserverConfigEnvironmentFactory
> -Dosgi.shell.telnet.ip=127.0.0.1
> -Djava.endorsed.dirs=C:\Java\glassfish-3.0.1\glassfishv3\glassfish/modules/endorsed；
> C:\Java\glassfish-3.0.1\glassfishv3\glassfish/lib/endorsed -Dcom.sun.aas.installRoot=C:\Java\glassfish-3.0.1\glassfishv3\glassfish -Djava.ext.dirs=C: \Program Files\Java\jdk1.7.0_04/lib/ext;C:\Program Files\Java\jdk1.7.0_04/jre/lib/ext;C:\Java\glassfish-3.0.1\glassfishv3\glassfish\domains \domain1/lib/ext
> -Dfelix.fileinstall.bundles.new.start=true
> -Djavax.net.ssl.trustStore=C:\Java\glassfish-3.0.1\glassfishv3\glassfish\domains\domain1/config/cacerts。 jks
> -Dcom.sun.enterprise.security.httpsOutboundKeyAlias=s1as
> -Djava.security.auth.login.config=C:\Java\glassfish-3.0.1\glassfishv3\glassfish\domains\domain1/config/login.conf
> -DANTLR_USE_DIRECT_CLASS_LOADING =true
> -Dfelix.fileinstall.debug=1
> -Dorg.glassfish.web.rfc2109_cookie_names_enforced=false
> -Djava.library.path=C:/Java/glassfish-3.0.1/glassfishv3/glassfish/lib;C:/Program Files/Java/jdk1.7.0_04/bin;C :/Windows/Sun/Java/bin;C:/Windows/System32;C:/Windows;C:/Program Files/Java/jre7/bin/client;C:/Program Files/Java/jre7/bin;C: /Program Files/Java/jre7/lib/i386;C:/Windows/System32/wbem;C:/Windows/System32/WindowsPowerShell/v1.0;C:/Java/eclipse;C:/Java/glassfish-3.0。 1/glassfishv3/glassfish com.sun.enterprise.glassfish.bootstrap.ASMain
> -domainname domain1
> -asadmin-args start-domain,,,--domaindir,,,C:\Java\glassfish-3.0.1\glassfishv3\glassfish\域,,,--debug=false,,,--verbose=false,,,domain1
> -instancename server
> -verbose false
> -debug false
> -asadmin-classpath C:/Java/glassfish-3.0.1/glassfishv3/glassfish/modules/admin-cli.jar
> -asadmin-classname com.sun.enterprise.admin.cli.AsadminMain
> -upgrade false
> -domaindir C:/Java /glassfish-3.0.1/glassfishv3/glassfish/domains/domain1
> -read-stdin true

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-15T06:49:06.797

我已经解决了这个问题。我已经删除了 osgi-cache 以前我无法在系统上删除。即使在关闭日食之后。然后我找到了系统上运行后台任务（Java.exe）的原因。无论如何，感谢您的指导。

# c++ - 使用 boost::asio 获取没有标题的 html

> ID：10982717
> 
> 赞同：3
> 
> 时间：2012-06-11T15:03:26.930
> 
> 标签：c++, boost, boost-asio

我有一个代码来获取 html 文件的来源，但它也得到“标题响应”或 sth。像那样（我不知道怎么称呼它）没有这个标题我怎么能得到它？

我的代码：

```
#include "StdAfx.h"
#include <iostream>
#include <boost/array.hpp>
#include <boost/asio.hpp>

using boost::asio::ip::tcp;

std::size_t completion(const boost::system::error_code& error, std::size_t bytes_transfered)
{
    return ! error;
}

int main(int argc, char* argv[])
{
    boost::asio::io_service io_service;
    boost::asio::ip::address addr = boost::asio::ip::address::from_string("31.170.161.16");
    boost::asio::ip::tcp::endpoint endpoint(addr, 80);
    tcp::socket socket(io_service);
    socket.connect(endpoint);
    boost::asio::streambuf request;
    std::ostream requestStream(&request);
    requestStream << "GET /xD1azt4_panel/bhc.html HTTP/1.1\r\n"
                  << "Connection: Keep-Alive\r\n"
                  << "Host: dublersoft.hostoi.com\r\n\r\n";

    boost::asio::write(socket, request);
    boost::asio::streambuf respond;
    boost::system::error_code ec;
    boost::asio::read(socket, respond, completion, ec);
    std::cout << &respond << std::endl;
    getchar();
    return 0;
} 
```

结果： ![结果](../Images/41790b8ba44f5e667b0213a9704143d7.png)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-11T15:14:07.747

很惊讶我也用它作为我的简单 http 客户端，所以我只是分享我的方法，如果你以后需要，标头放在一个向量中，响应数据放在 ostream 对象中。

```
int do_get(std::string &host_,std::string &port_, std::string url_path,std::ostream &out_,std::vector<std::string> &headers, unsigned int timeout)
{
    try{
        using namespace boost::asio::ip;
        tcp::iostream request_stream;
        if (timeout>0){
            request_stream.expires_from_now(boost::posix_time::milliseconds(timeout));
        }
        request_stream.connect(host_,port_);
        if(!request_stream){
            return -1;
        }
        request_stream << "GET " << url_path << " HTTP/1.0\r\n";
        request_stream << "Host: " << host_ << "\r\n";
        request_stream << "Accept: */*\r\n";
        request_stream << "Cache-Control: no-cache\r\n";
        request_stream << "Connection: close\r\n\r\n";
        request_stream.flush();
        std::string line1;
        std::getline(request_stream,line1);
        if (!request_stream)
        {
            return -2;
        }
        std::stringstream response_stream(line1);
        std::string http_version;
        response_stream >> http_version;
        unsigned int status_code;
        response_stream >> status_code;
        std::string status_message;
        std::getline(response_stream,status_message);
        if (!response_stream||http_version.substr(0,5)!="HTTP/")
        {
            return -1;
        }
        if (status_code!=200)
        {
            return (int)status_code;
        }
        std::string header;
        while (std::getline(request_stream, header) && header != "\r")
            headers.push_back(header);
        out_ << request_stream.rdbuf();
        return status_code;
    }catch(std::exception &e){
        std::cout << e.what() << std::endl;
        return -3;
    }

} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-11T15:14:55.240

答案是，如果你想在标题和正文之间分离，你将不得不使用更高级别的东西。

[另一种方法是只扫描 \r\n\r\n，它是 headers/body 之间的分隔符，正如您可以在此处](http://www.boost.org/doc/libs/1_42_0/doc/html/boost_asio/example/http/client/sync_client.cpp)找到的官方 http 请求示例中所做的那样。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-11T15:12:03.220

Web 服务器将始终返回至少几个标题行——一些（至少`HTTP...`, 和`Server:...`）是 HTTP 的 RFC 要求的。

第一个空行标记标题的结尾。之后是身体。您需要阅读但显然想忽略第一个空行之前的所有数据，并保留之后的所有内容。

# visual-studio - 如何在带有 Javascript 库的 MVC .aspx 视图中使用 Visual Studio 智能感知？

> ID：10982722
> 
> 赞同：1
> 
> 时间：2012-06-11T15:03:46.910
> 
> 标签：visual-studio, javascript-intellisense

我有一个使用 jQuery 和很多其他 Javascript 的 Web MVC 应用程序。总共有超过 20 个`.js`文件在生产应用程序中加入和缩小。

我们混合了引入的框架（如 jQuery）和我们自己的 Javascript。

为了使这些文件具有智能感知，我们有一个通用`vsdoc.js`文件：

```
/// <reference path="/content/js/frameworks/jquery-..-vsdoc.js" />
/// <reference path="/content/js/frameworks/framework1.js" />
...
/// <reference path="/content/js/frameworks/framework9.js" />
$j = jQuery.noConflict(); 
```

然后在我们自己的每个`.js`文件的顶部，我们有：

```
/// <reference path="/content/js/vsdoc.js" /> 
```

这意味着我们正在编写的所有 Javascript 都可以为我们所有的框架提供智能感知。

问题出在`.aspx`MVC 视图中。我们希望在视图中编码时获得所有 Javascript 的智能感知，所以我们有一个`vsdoc-page.js`文件：

```
/// <reference path="/content/js/vsdoc.js" />
/// <reference path="/content/js/file1.js" />
...
/// <reference path="/content/js/file9.js" /> 
```

然后我们在`<head>`所有`.master`页面中引用它：

```
<% if (false) { %>
    <script src="/content/js/vsdoc-page.js" type="text/javascript"></script>
<% } %> 
```

然而，这似乎根本不起作用。任何我们在 XML 文档中`vsdoc-page.js`工作的东西，但是其中的引用没有被跟进。

有什么我做错了吗？有什么方法可以让 VS像在文件中一样跟随页面中的`reference path`内容？`.aspx``.js`

# java - java常量对字节码逆向工程

> ID：10982723
> 
> 赞同：3
> 
> 时间：2012-06-11T15:03:48.317
> 
> 标签：java, string, encryption, reverse-engineering, bytecode

我想知道是否可以在已编译的 java 文件中加密字符串。例如，我需要使用对称密钥解码 zip 文件，并且需要将该密钥存储在 java 类中的私有常量中：

```
private static final String ZIP_PASSW="secret" 
```

但我不希望一个简单的反转字节码显示原始密码......你认为存在避免它的东西吗？

谢谢

PS：我不明白为什么SO说没有这个PS我的问题不符合标准

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-11T15:22:23.307

真正的黑客仍然可以解密密码，但如果您不将密码存储为字符串文字，则可能会更难一些。你可以使用：

```
private static final String KEY = new String(new char[]{'s', 'e', 'c', 'r', 'e', 't'}); 
```

这将产生字节码：

```
javap -c -v TestObfuscate

static {};
  Code:
   Stack=6, Locals=0, Args_size=0
   0:   new #10; //class java/lang/String
   3:   dup
   4:   bipush  6
   6:   newarray char
   8:   dup
   9:   iconst_0
   10:  bipush  115
   12:  castore
   13:  dup
   14:  iconst_1
   15:  bipush  101
   17:  castore
   18:  dup
   19:  iconst_2
   20:  bipush  99
   22:  castore
   23:  dup
   24:  iconst_3
   25:  bipush  114
   27:  castore
   28:  dup
   29:  iconst_4
   30:  bipush  101
   32:  castore
   33:  dup
   34:  iconst_5
   35:  bipush  116
   37:  castore
   38:  invokespecial   #12; //Method java/lang/String."<init>":([C)V
   41:  putstatic   #16; //Field KEY:Ljava/lang/String;
   44:  return 
```

然而

```
private static final String ZIP_PASSW="secret" 
```

返回

```
Constant pool:
const #8 = String   #9; //  secret 
```

请注意我没有调用常量`PASSWORD`或`ZIP_PASSW`（如果字符串是公共的，这很重要）。

作为替代方案或除此之外，您可以使用混淆工具，例如[ProGuard](http://proguard.sourceforge.net/)。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-11T15:23:22.500

如果您将密钥存储在代码中，则始终可以通过逆向工程来检索它。此外，在编译之前或之后存储密钥也没关系。

如果没有对它进行逆向工程的可能性，您就无法使用您的程序提供任何类型的（未加密的）密钥。这就是为什么首先发明了非对称加密的原因。

因此，如果您坚持使用对称加密，则必须将密钥存储在应用程序之外（例如，在文本文件中），并将文件通过安全通道传递给程序用户。（谁当然可以以任何他们想要的方式使用密钥）。

如果这不是您想要的，您应该研究非对称加密技术。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-11T15:16:18.927

当您说您需要使用对称密钥解码 zip 文件时，您*肯定*需要这样做吗？您可能需要查看您的整体架构，而不是考虑如何将密码存储为纯文本或如何对其进行编码等细节。例如，也许您的代码可以调用安全的 Web 服务来获取密钥而不是存储它？显然，如果没有更好地了解您的目标，就很难提出一个可行的替代方案，但是您所描述的内容将很难保持适当的安全 - 它会因默默无闻而安全，但不会很强大对付一个决心要找到你的钥匙的人。

如果这对于您需要做的事情还不够安全，那么最标准的响应可能是集成某种 PGP 密钥交换而不是使用对称加密。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-11T15:16:45.653

你能做的最好的就是让它更难访问。任何加密的字符串都可以使用存储在代码中的密码进行解密。您可以采取措施隐藏密码，但使用私有常量不是此类措施之一。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-11T15:09:32.027

不，如果你存储了一个加密的密码，你仍然需要在某个时候解密它，破解者可以反汇编你的代码并找出算法，并从中获取密码。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-06-11T15:07:13.260

如何存储已经加密的密码？

# html - 移动浏览器关闭事件

> ID：10982724
> 
> 赞同：3
> 
> 时间：2012-06-11T15:03:48.810
> 
> 标签：html, jquery-mobile

我正在为 android/iphone 开发 Jquery 移动 Web 应用程序。safari/android 默认浏览器等移动浏览器的关闭事件是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-11T15:17:16.383

这应该有效：

```
$(window).unload(function() {
    alert('Leaving...');
} 
```

但卸载事件：

*   [http://api.jquery.com/unload/](http://api.jquery.com/unload/)

# php - 如何在 Zend Framework 和 PHP 中访问 [_host:protected]

> ID：10982727
> 
> 赞同：1
> 
> 时间：2012-06-11T15:03:55.173
> 
> 标签：php, zend-framework, amazon-web-services

使用 Zend amazon 服务，我一直到那里。

```
$url=$result->LargeImage->Url;
print_r($url); 
```

这个的输出是：

```
Zend_Uri_Http Object
(
    [_username:protected] => 
    [_password:protected] => 
    [_host:protected] => ecx.images-amazon.com
    [_port:protected] => 
    [_path:protected] => /images/I/41voDxJS62L.jpg
    [_query:protected] => 
    [_fragment:protected] => 
    [_regex:protected] => Array
        (
            [escaped] => %[[:xdigit:]]{2}
            [unreserved] => [A-Za-z0-9-_.!~*'()\[\]]
            [segment] => (?:%[[:xdigit:]]{2}|[A-Za-z0-9-_.!~*'()\[\]:@&=+$,;])*
            [path] => (?:\/(?:(?:%[[:xdigit:]]{2}|[A-Za-z0-9-_.!~*'()\[\]:@&=+$,;])*)?)+
            [uric] => (?:%[[:xdigit:]]{2}|[A-Za-z0-9-_.!~*'()\[\];\/?:@&=+$,])
        )

    [_scheme:protected] => http
) 
```

我们不能 echo $url->_host:protected 在这里做，因为 'protected' 是关键字。

我如何访问它？有人可以帮忙吗？

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-11T15:06:42.293

使用吸气剂。

```
$result->LargeImage->Url->getHost() 
```

或者

```
$url->getHost() 
```

请参阅文档： http: [//framework.zend.com/apidoc/1.9/Zend_Uri/Zend_Uri_Http.html](http://framework.zend.com/apidoc/1.9/Zend_Uri/Zend_Uri_Http.html)

# gridview - EXtjs 3.2：如何将特定单元格设置为不可编辑或只读？

> ID：10982728
> 
> 赞同：0
> 
> 时间：2012-06-11T15:04:09.810
> 
> 标签：gridview, grid, extjs3

我正在使用 Extjs 3.2，我的编辑器网格由 5 列、4 个可编辑字段和 1 个复选框组成，

要求是当我取消选中该复选框时，该行的其他四个单元格必须变为只读。

我通过使用 Cellclick 事件获取 Checked rowIndex ,columnIndex ，但是如何选择该 Cell 并将属性设置为 Readonly/UnEditable。我试过使用

```
 gridItems.setEditable(rowIndex, editable);

    gridItems[rowIndex].set('editable', true); 
```

但它不起作用。

我真的不明白为什么这不起作用，你对我可以做些什么有什么想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-22T06:16:37.840

试试这个为你的复选框设置只读属性

```
Ext.getCmp('id').setReadOnly(true); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-18T10:43:33.197

如果复选框列的记录值为假，您可以使用“beforeEdit”事件并返回假，例如

```
'beforeEdit' : function(e){
    var record = e.record;                          
   if(record.get("checkboxColumnKey") == false){
    return false;       
   }
} 
```

# android - 有没有办法在不使用 try 语句乱扔我的代码的情况下捕获所有错误？

> ID：10982734
> 
> 赞同：-3
> 
> 时间：2012-06-11T15:04:22.340
> 
> 标签：android, error-handling

有没有办法捕获所有错误并执行操作，例如在 Toast 中显示错误消息并重新启动应用程序而不会崩溃？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-11T15:09:25.613

我们所做的是`Thread.setDefaultUncaughtExceptionHandler`在 UI 线程上设置一个全局处理程序。在处理程序中，我们获取堆栈跟踪并向自己发送报告，然后调用

```
Process.killProcess(Process.myPid());
System.exit(0); 
```

优雅地重启

# qt - 在应用 tbb 的 qt 中编译 opencv 时出错

> ID：10982736
> 
> 赞同：0
> 
> 时间：2012-06-11T15:04:33.277
> 
> 标签：qt, opencv, tbb

在应用 tbb 的 qt 中编译 opencv 项目时出现以下问题

```
dyld: Library not loaded: libtbb.dylib
Referenced from: /usr/local/lib/libopencv_core.2.4.dylib
Reason: image not found
The program has unexpectedly finished. 
```

有哪位朋友可以告诉我如何解决这个问题吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-26T15:09:54.543

问题是当您运行应用程序时，它找不到要加载的库。您需要将 DYLD_LIBRARY_PATH 环境变量设置为指向应用程序方案中包含此库的目录。

产品 > 编辑方案 > 环境变量

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-13T09:09:51.323

哦，我突然把libtbb.dylib复制到/usr/local/lib/文件夹下解决了这个问题。

感谢

# php - PHP 和 AJAX 函数根据调用返回或回显

> ID：10982737
> 
> 赞同：2
> 
> 时间：2012-06-11T15:04:36.443
> 
> 标签：php, ajax, backbone.js, crud

我正在编写一个返回数据库结果的函数。

`return`如果该函数是从另一个函数调用的，`echo`而数据是通过 AJAX 调用的，我需要它来处理数据。

**可能的解决方案**

*   传入一个参数...`if($echo) echo $data; else return $data;`
*   分离功能...`function employees_ajax() { echo $this->employees(); }`

我更喜欢更智能的东西，它可以检测到“自身”是从另一个函数调用的，`return`而不是`echo`.

**更新**

另一种可能性是检查 $_SERVER 变量。

*“据我所知，X-Requested-With 是由大多数主要框架的 Ajax 功能发送的，但不是全部......可以肯定地说，它通常不是 100% 可靠的方法来确定请求是否是 AJAX 请求或不。”*

[$_SERVER['HTTP_X_REQUESTED_WITH'] 是否存在于 PHP 中？](https://stackoverflow.com/questions/2579254/php-does-serverhttp-x-requested-with-exist-or-not)

依赖服务器而不是客户端/ js 框架将是故障安全的。

**更新 2：结果**

```
function employees($id = NULL, $return = FALSE) {

    .
    .
    .
    if($return === TRUE) return json_encode($data);
    else echo json_encode($data);
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-11T20:02:48.223

当然，会抛出“遇到 PHP 错误”错误，因为您在`$_SERVER`超全局中获得了未定义的键。

首先，创建确定查询是否来自 XMLHttpRequest 的函数。

```
/**
 * 
 * @return BOOl, true if ajax, false if regular way
 */
function is_ajax(){
  return isset($_SERVER['HTTP_X_REQUESTED_WITH']);
} 
```

然后，根据`is_ajax()`结果，您应该从 SQL 服务器实现另一个表示 key => val 对的函数。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-11T15:14:08.380

尝试给你的`employees`函数一个可选的标志：

```
function employees ($shouldEchoResult = true) {

  if ($shouldEchoResult) {
    echo $result;
  }
  else {
    return $result;
  }

} 
```

如果使用 AJAX 调用，请不要设置标志。否则，在您的代码中，使用`categories(false)`. 这是我能想到的唯一其他解决方案。PHP 没有像 Ruby 那样内置任何东西。

# javascript - typeof 在 IE 中返回“未知”

> ID：10982739
> 
> 赞同：23
> 
> 时间：2012-06-11T15:04:44.933
> 
> 标签：javascript, internet-explorer, typeof

我有一个窗口，在关闭之前我会刷新底层页面。

```
if(opener && typeof(opener.Refresh) != 'undefined')
{
    opener.Refresh();
} 
```

如果我离开原来的打开页面，这段代码会抛出*“Permission Denied”*错误。

调试代码显示`typeof(opener.Refresh)`等于*"unknown"*而不是预期的*"undefined"*。

据我所知，*“未知”*不是 的返回值之一`typeof`，**那么如何以及为什么会返回该值？**

***更多信息***

我通过将检查更改为：

```
if(opener && typeof(opener.Refresh) == 'function') 
```

然而，像这样的例子（[detecting-an-undefined-object-property-in-javascript](https://stackoverflow.com/questions/27509/detecting-an-undefined-object-property-in-javascript)）似乎并没有将“未知”因素考虑在内。

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-06-11T15:17:28.553

根据[Bytes 上的一个重复问题](http://bytes.com/topic/javascript/answers/515951-typeof-operator-returns-unknown-instead-undefined#post2009988)，typeof 值`unknown`与`date`.

Robert Nyman 对博客的[评论](http://robertnyman.com/2005/12/21/what-is-typeof-unknown/#comment-8001)也可以解释：

> 当相关对象位于 COM+ 桥的另一侧时，Internet Explorer 显示“未知”。您可能不知道或意识到这一点，但 MS 的 XMLHTTP 对象是实现 IUnknown 的不同 COM+ 对象的一部分；当您在其上调用方法时，您是通过 COM 桥接器执行此操作，而不是调用本机 JavaScript。
> 
> 如果您尝试测试或访问不是 JScript 引擎真正组成部分的东西，基本上这就是 MS 的答案。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-03-01T07:26:10.223

尝试`in`运营商。我遇到了同样的问题（使用小程序），我使用以下方法解决了它`in`：

```
if("Refresh" in opener) {
    opener.Refresh();
} 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-06-11T15:10:47.990

[ECMAScript 规范](http://es5.github.com/#x11.4.3)规定，对于宿主对象，操作符的返回值为`typeof`：

> 实现定义的 except 不能是“ `undefined`”、“ `boolean`”、“ `number`”或“ `string`”。

我相信这个`unknown`值只会在 Internet Explorer 中返回。有趣的是，[MSDN](http://msdn.microsoft.com/en-us/library/259s7zc1%28v=vs.94%29.aspx)并没有提及：

> typeof 返回六个可能的值：“数字”、“字符串”、“布尔值”、“对象”、“函数”和“未定义”。

# maven - 从 XJC 中导入的模式解析类型定义失败

> ID：10982740
> 
> 赞同：16
> 
> 时间：2012-06-11T15:04:47.880
> 
> 标签：maven, jaxb, xjc, xmlcatalog, jaxb-episode

我有这个 API 使用 JAXB 方便地使用对象模型，由 XJC（XML 到 Java）编译器通过命名引用从 XML 模式生成。它通过各种背景魔法和反射抽象了 JAXB 上下文的创建和查找 ObjectFactory 方法。它的基本要点是您总是定义一个通用模式，然后任何数量（也可能是 0）的模式“扩展”该通用模式，每个模式都会产生自己的数据模型。通用模式带有可重用的定义，扩展它的那些使用这些定义来组成自己的模型。

我现在遇到了一种情况，我想为多个项目重用通用模式。通用类型定义在项目之间应该保持相同，并且将针对从这些生成的抽象类构建一些代码。所以我需要首先为一些通用模式生成类，然后生成那些扩展和单独使用它们的类。我在构建过程中使用 Maven。

我遇到的问题是从扩展模式中的通用模式解析类型定义。

假设我的通用架构名为“general.xsd”，如下所示：

```
<?xml version="1.0" encoding="UTF-8"?>
<xs:schema xmlns:xs="http://www.w3.org/2001/XMLSchema"
targetNamespace="http://www.foobar.com/general"
xmlns:gen="http://www.foobar.com/general"
elementFormDefault="qualified" attributeFormDefault="qualified">

    <!-- Element (will usually be root) -->
    <xs:element name="transmission" type="gen:Transmission" />

    <!-- Definition -->
    <xs:complexType name="Transmission" abstract="true">
        <xs:sequence>
            <!-- Generic parts of a transmission would be in here... -->
        </xs:sequence>
    </xs:complexType>

</xs:schema> 
```

旁边有一个绑定文件来进行一些命名自定义并设置输出的包名称：

```
<?xml version="1.0" encoding="UTF-8"?>
<bindings xmlns="http://java.sun.com/xml/ns/jaxb" 
    xmlns:xs="http://www.w3.org/2001/XMLSchema"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xsi:schemaLocation="http://java.sun.com/xml/ns/jaxb http://java.sun.com/xml/ns/jaxb/bindingschema_2_0.xsd"
    version="2.1">

    <!-- Bindings for the general schema -->
    <bindings schemaLocation="general.xsd" node="/xs:schema">

        <schemaBindings>
            <package name="com.foobar.models.general"/>
        </schemaBindings>

        <bindings node="//xs:complexType[@name='Transmission']">
            <!-- Some customization of property names here... -->
        </bindings>

</bindings> 
```

然后，我将在该项目的 POM 中使用下一点来生成 Java 类：

```
<plugin>
    <groupId>org.jvnet.jaxb2.maven2</groupId>
    <artifactId>maven-jaxb21-plugin</artifactId>
    <version>0.8.0</version>
    <executions>
        <execution>
            <id>xjc-generate</id>
            <goals>
                <goal>generate</goal>
            </goals>
            <configuration>
                <schemaDirectory>${basedir}/src/main/resources/com/foobar/schemas</schemaDirectory>
                <schemaLanguage>XMLSCHEMA</schemaLanguage>
                <addCompileSourceRoot>true</addCompileSourceRoot>
                <episode>true</episode>
                <removeOldOutput>true</removeOldOutput>
            </configuration>
        </execution>
    </executions>
</plugin> 
```

如您所见，我使用的是 JAXB2.1 Maven 插件。我已将选项设置为生成用于逐步编译的剧集文件。删除先前输出的选项是为了解决错误；它所做的只是确保首先清理所有内容，以便强制重新编译。

到目前为止，一切都很好。该项目编译顺利。需要注意的是，除了生成的 Java 类之外，我还将模式打包到生成的 jar 文件中。所以这些在类路径上可用！该`sun-jaxb.episode`文件应该在 META-INF 中。

然后我开始使用将扩展上述模式的项目，首先导入它。其中一种“子类型”可能如下所示（我将其称为 sub.xsd）：

```
<?xml version="1.0" encoding="UTF-8"?>
<xs:schema xmlns:xs="http://www.w3.org/2001/XMLSchema"
targetNamespace="http://www.foobar.com/sub"
xmlns:sub="http://www.foobar.com/sub"
xmlns:gen="http://www.foobar.com/general"
elementFormDefault="qualified" attributeFormDefault="qualified">

    <xs:import namespace="http://www.foobar.com/general" />

    <!-- Definition -->
    <xs:complexType name="SubTransmission">
        <xs:complexContent>
            <xs:extension base="gen:Transmission">
                <xs:sequence>
                    <!-- Additional elements placed here... -->
                </xs:sequence>
            </xs:extension>
        </xs:complexContent>
    </xs:complexType>

</xs:schema> 
```

同样，有一个绑定文件：

```
<?xml version="1.0" encoding="UTF-8"?>
<bindings xmlns="http://java.sun.com/xml/ns/jaxb" 
    xmlns:xs="http://www.w3.org/2001/XMLSchema"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xsi:schemaLocation="http://java.sun.com/xml/ns/jaxb http://java.sun.com/xml/ns/jaxb/bindingschema_2_0.xsd"
    version="2.1">

    <!-- Bindings for sub type -->
    <bindings schemaLocation="sub.xsd" node="/xs:schema">

        <schemaBindings>
            <package name="com.foobar.models.sub"/>
        </schemaBindings>

    </bindings>

</bindings> 
```

以下是该项目的 POM 中处理 XJC 生成的部分内容：

```
<plugin>
    <groupId>org.jvnet.jaxb2.maven2</groupId>
    <artifactId>maven-jaxb21-plugin</artifactId>
    <version>0.8.0</version>
    <executions>
        <execution>
            <id>xjc-generate</id>
            <goals>
                <goal>generate</goal>
            </goals>
            <configuration>
                <schemaDirectory>${basedir}/src/main/resources/com/foobar/schemas</schemaDirectory>
                <schemaLanguage>XMLSCHEMA</schemaLanguage>
                <addCompileSourceRoot>true</addCompileSourceRoot>
                <episode>false</episode>
                <catalog>${basedir}/src/main/resources/com/foobar/schemas/catalog.cat</catalog>
                <episodes>
                    <episode>
                        <groupId>com.foobar</groupId>
                        <artifactId>foobar-general-models</artifactId>
                        <version>1.0.0-SNAPSHOT</version>
                        <scope>compile</scope>
                    </episode>
                </episodes>
                <removeOldOutput>true</removeOldOutput>
            </configuration>
        </execution>
    </executions>
</plugin> 
```

最初，所有模式都在一个文件夹中，我`schemaLocation`将导入中的属性设置为`general.xsd`，效果很好。但是现在事情是跨项目分开的，我遇到了问题。第一个问题是找不到其他模式。我已通过从元素中取出属性`schemaLocation`、`<xs:import />`仅保留`namespace`属性并添加目录文件 ( `catalog.cat`它的内容是：

```
PUBLIC "http://www.foobar.com/general" "classpath:/com/foobar/schemas/general.xsd" 
```

这似乎有效，因为我不再收到指出无法找到架构的错误。但由于某种原因，从导入的模式解析实际类型定义继续失败。这是一个例外：

```
Error while parsing schema(s).Location [ file:/C:/NetBeans_groups/Test/SubModelBundle/src/main/resources/com/foobar/schemas/sub.xsd{...,...}].
org.xml.sax.SAXParseException: src-resolve: Cannot resolve the name 'gen:Transmission' to a(n) 'type definition' component. 
```

这是我到目前为止所尝试的：

*   使用目录文件。部分成功，因为现在可以找到导入的模式。
*   让通用模式的编译生成一个剧集文件，并将其用于子模式的编译。似乎没有什么区别，虽然这应该只在类型被解析后才起作用，所以我认为这还不重要。
*   使用不同的 JAXP（注意：**不是**JAXB，JAXP）实现。它确实使用了不同的，因为我可以在异常的堆栈跟踪中看到它，但最终结果是相同的。
*   使用`maven-jaxb22-plugin`21 代替。没有区别。

在网上环顾四周，似乎人们至少从 2006 年开始就遇到了这个问题，这可能与一些 Xerces 解析器问题有关。我希望这不是一个已经潜伏了 6 年而没有人愿意修复它的错误。其他人有什么建议吗？也许有人遇到了同样的问题并找到了解决方案？我能想到的唯一解决方法是使用 'svn:externals' 将通用模式拖到子项目中并在那里重新生成类，但它很脏，只有当你可以连接到我们的 svn 存储库时才会起作用。

非常感谢您阅读这篇长文。请记住，我已经从现有项目中获取了以上所有内容，并替换了一些命名空间和其他匿名内容，因此可能会出现一些拼写错误。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-17T13:12:42.273

此答案已编辑。之前，我有一个使用自定义目录解析器的解决方案。但是，我现在发现了实际问题。解释如下。对于提供解决方案的 TL;DR 版本，请滚动到此答案的底部。

* * *

问题出在目录文件上。注意它是如何有这条线的：

```
PUBLIC "http://www.foobar.com/general" "classpath:/com/foobar/schemas/general.xsd" 
```

那说明什么？它表示如果`http://www.foobar.com/general`遇到公共 ID，则架构的系统 ID 为`classpath:/com/foobar/schemas/general.xsd`. 到目前为止，一切都很好。如果我们从元素中取出`schemaLocation`属性`<xs:import />`，唯一剩下的就是公共 ID（命名空间 URN），并且目录文件告诉我们在哪里可以找到它的模式。

当该架构随后使用`<xs:include />`元素时，就会出现问题。它们包括具有相同目标命名空间的模式文件。它们指定系统 ID（相对位置）。因此，您希望将其用于分辨率。但是，将调用记录到目录解析器会显示请求是使用公共 ID（命名空间）和系统 ID（相对位置）进行解析的。这就是它出错的地方。由于目录文件中的绑定，优先使用公共 ID。这使我们`general.xsd`再次直接进入文件。

例如，一般模式如下：

```
<?xml version="1.0" encoding="UTF-8"?>
<xs:schema xmlns:xs="http://www.w3.org/2001/XMLSchema"
targetNamespace="http://www.foobar.com/general"
xmlns:gen="http://www.foobar.com/general"
elementFormDefault="qualified" attributeFormDefault="qualified">

    <!-- Including some definitions from another schema in the same location -->
    <xs:include schemaLocation="simple-types.xsd" />

    <!-- Remaining stuff... -->

</xs:schema> 
```

并且使用该模式的模式如下：

```
<?xml version="1.0" encoding="UTF-8"?>
<xs:schema xmlns:xs="http://www.w3.org/2001/XMLSchema"
targetNamespace="http://www.foobar.com/sub"
xmlns:sub="http://www.foobar.com/sub"
xmlns:gen="http://www.foobar.com/general"
elementFormDefault="qualified" attributeFormDefault="qualified">

    <xs:import namespace="http://www.foobar.com/general" />

    <!-- Remaining stuff... -->

</xs:schema> 
```

当 XJC 解析最后一个模式时，会发生这种情况：

1.  解析本地定义。
2.  **遇到对导入**模式定义的引用。
3.  检查导入，没有找到系统 ID，只有公共 ID ( `http://www.foobar.com/general`)。
4.  检查目录。
5.  查找公共 ID 与 的绑定`classpath:/com/foobar/schemas/general.xsd`。
6.  解析导入模式中的定义。
7.  遇到对**包含**架构 (simple-types.xsd) 的定义的引用。
8.  检查包括，查找系统 ID。
9.  检查系统 ID 的目录，但公共 ID 是隐式的。
10.  查找公共 ID 与 的绑定`classpath:/com/foobar/schemas/general.xsd`，它优先于系统 ID。
11.  包含的架构定义的解析失败。

OASIS XML 目录规范中描述了尝试解析的顺序的详细信息：[https](https://www.oasis-open.org/committees/entity/spec.html#s.ext.ent) ://www.oasis-open.org/committees/entity/spec.html#s.ext.ent 。这需要一些解释，但您会发现，如果首选的解析方法是公共 ID，那么即使有系统 ID，在目录文件中绑定时，公共 ID 也会优先。

因此，解决方案是指定系统 ID 是首选的解析方法，而不是在导入中提供系统 ID，以便使用目录的公共 ID 绑定并依赖于包含的相关系统 ID。在 OASIS XML 目录格式中，您可以使用属性`prefer="system"`。在 OASIS TR9401 目录格式中，您可以使用`OVERRIDE no`. 显然默认值是公开/是。

所以我的目录文件就变成了：

```
OVERRIDE no
PUBLIC "http://www.foobar.com/general" "classpath:/com/foobar/schemas/general.xsd" 
```

现在常规目录解析器工作正常。我不再需要定制的了。但是，我不会猜到公共 ID 在包含模式时仍用于解析，并且优先于系统 ID。我原以为公共 ID 只会用于导入，如果解析失败，系统 ID 仍会被考虑。只有在自定义解析器中添加一些日志才能显示这一点。

* * *

简短的回答：添加`OVERRIDE no`为 TR9401 目录文件中的第一个指令，或`prefer="system"`添加到 XML 目录文件中。不要`schemaLocation`在`<xs:import />`指令中指定，而是将命名空间绑定到目录文件中的正确模式位置。确保`<xs:include />`使用包含架构的相对路径。

另一个有趣的事情是：XJC 使用的目录解析器不仅可以处理`classpath:`URI，还可以处理`maven:`URI，这与 Maven 工件相关。如果您将其用作构建工具，则非常有用。 [http://confluence.highsource.org/display/MJIIP/User+Guide#UserGuide-Usingcatalogs](http://confluence.highsource.org/display/MJIIP/User+Guide#UserGuide-Usingcatalogs)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-27T04:15:13.447

使用**Maven 2.2.1**对我**有用 org.jvnet.jaxb2.maven2.resolver.tools.ClasspathCatalogResolver**。

这是一个示例配置：

```
<plugin>
    <groupId>org.jvnet.jaxb2.maven2</groupId>
    <artifactId>maven-jaxb2-plugin</artifactId>
    <version>0.8.0</version>
    <executions>
        <execution>
            <id>executionId</id>
            <goals>
                <goal>generate</goal>
            </goals>
            <configuration>
                <schemaDirectory>src/main/resources/META-INF/schemas</schemaDirectory>
                <generatePackage>com.company.project.data</generatePackage>
                <bindingDirectory>src/main/jaxb</bindingDirectory>
                <catalog>src/main/jaxb/catalog.cat</catalog>
                <catalogResolver>org.jvnet.jaxb2.maven2.resolver.tools.ClasspathCatalogResolver</catalogResolver>
                <verbose>false</verbose>
                <extension>true</extension>
                <episodes>
                    <episode>
                        <groupId>com.company.project</groupId>
                        <artifactId>xsd-common-types</artifactId>
                        <version>${xsd-common-types.version}</version>
                    </episode>
                </episodes>
            </configuration>
        </execution>
    </executions>
    <dependencies>
        <dependency>
            <groupId>com.company.project</groupId>
            <artifactId>xsd-common-types</artifactId>
            <version>${xsd-common-types.version}</version>
        </dependency>
    </dependencies>
</plugin> 
```

使此配置与 Maven 3 一起使用会导致 org.xml.sax.SAXParseException

# c# - 向 ASP.NET GridView 添加行？

> ID：10982744
> 
> 赞同：4
> 
> 时间：2012-06-11T15:05:03.427
> 
> 标签：c#, asp.net, gridview

我有以下 GridView，它有几个 DropDownLists 和 TextBoxes。如何在保留现有 GridView 的同时向其添加新行。我想用 LinkBut​​ton 添加新行。我没有使用 DataSource 控件，并且 GridView 目前是通过 DataTable 填充的。这是网格视图：

```
<asp:LinkButton ID="btnAdd" runat="server" Text="Add Room" 
        onclick="btnAdd_Click"></asp:LinkButton>
    <asp:GridView ID="gvRP" runat="server" AutoGenerateColumns="false" 
        onrowdatabound="gvRP_RowDataBound" 
        onrowediting="gvRP_RowEditing">
    <Columns>
    <asp:TemplateField HeaderText="Room" ItemStyle-Width="100%">
    <ItemTemplate>
    <asp:Label runat="server" Text="Room"></asp:Label>
    <asp:DropDownList ID="ddlRoom" runat="server" AutoPostBack="True" DataTextField="Name"
        DataValueField="Id" AppendDataBoundItems="true" OnSelectedIndexChanged="ddlRoom_SelectedIndexChanged">
        <asp:ListItem Value="-1">Select...</asp:ListItem>
    </asp:DropDownList>
    <asp:Label runat="server" AssociatedControlID="ddlRate" Text="Rate" ID="lblRate"></asp:Label><asp:DropDownList
        ID="ddlRate" runat="server" AppendDataBoundItems="true" DataTextField="Name"
        DataValueField="Id">
        <asp:ListItem Value="-1">Select...</asp:ListItem>
    </asp:DropDownList>

    <asp:Label  runat="server" Text="Adults"></asp:Label>
    <asp:TextBox ID="txtAdults" Text='<%#Bind("Adults") %>' runat="server" Width="25px"></asp:TextBox>
    <asp:Label  runat="server" Text="Children"></asp:Label>
    <asp:TextBox ID="txtChildren" Text='<%#Bind("Children") %>' runat="server"  Width="25px"></asp:TextBox>
    <asp:Label runat="server" Text="Check In"></asp:Label>
    <asp:TextBox ID="txtCheckIn" Text='<%#Bind("CheckIn") %>' runat="server" Width="75px"></asp:TextBox>
    <asp:Label  runat="server" Text="Check Out"></asp:Label>
    <asp:TextBox ID="txtCheckOut" Text='<%#Bind("CheckOut") %>' runat="server"  Width="75px"></asp:TextBox>

    <h3>Rates</h3>
    <asp:GridView ID="gvR" runat="server" AutoGenerateColumns="false">
    <Columns>
    <asp:BoundField DataField="Name" HeaderText="Rate" />
    <asp:BoundField DataField="Effective" HeaderText="Effective" />
    <asp:BoundField DataField="Expire" HeaderText="Expire" />
    <asp:BoundField DataField="Amount" HeaderText="Amount" />
    <asp:BoundField DataField="Code" HeaderText="Currency" />
    </Columns>
    </asp:GridView>
    </ItemTemplate>
    </asp:TemplateField>
    </Columns>
    </asp:GridView> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-11T15:17:31.157

通常我会尝试做一个例子，但这个例子非常彻底，我不“认为”这个网址会去任何地方。请参阅[此链接](http://www.aspsnippets.com/Articles/Adding-Dynamic-Rows-in-ASP.Net-GridView-Control-with-TextBoxes.aspx)以获取全面的示例。

这是重要的代码。

**网格**

```
<FooterStyle HorizontalAlign="Right" />
<FooterTemplate>
    <asp:Button ID="ButtonAdd" runat="server" Text="Add New Row" />
</FooterTemplate> 
```

**后面的代码**

```
protected void ButtonAdd_Click(object sender, EventArgs e)
{
      AddNewRowToGrid()
}

private void AddNewRowToGrid()
{
    int rowIndex = 0;

    if (ViewState["CurrentTable"] != null)
    {
        DataTable dtCurrentTable = (DataTable)ViewState["CurrentTable"];
        DataRow drCurrentRow = null;
        if (dtCurrentTable.Rows.Count > 0)
        {
            for (int i = 1; i <= dtCurrentTable.Rows.Count; i++)
            {
                //extract the TextBox values
            }
            dtCurrentTable.Rows.Add(drCurrentRow);
            ViewState["CurrentTable"] = dtCurrentTable;

            Gridview1.DataSource = dtCurrentTable;
            Gridview1.DataBind();
        }
    }
    else
    {
        Response.Write("ViewState is null");
    }

    //Set Previous Data on Postbacks
    SetPreviousData();
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-07-10T10:21:03.773

将 Label 控件或 Textbox 放在**ItemTemplate**中，如果您最后放置它，它将最终显示，例如

```
<ItemTemplate>
    ....
    <asp:Label Text="foo" runat="server" />
</ItemTemplate> 
```

或者

```
 <ItemTemplate>
    <asp:Label Text="foo" runat="server" />
     ....
 </ItemTemplate> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-11T15:46:17.680

我决定采用这个解决方案：

```
DataTable dt = new DataTable();

DataColumn dcRoom = new DataColumn("Room", typeof(DropDownList));
DataColumn dcAdults = new DataColumn("Adults", typeof(string));
DataColumn dcChildren = new DataColumn("Children", typeof(string));
DataColumn dcCheckIn = new DataColumn("CheckIn", typeof(string));
DataColumn dcCheckOut = new DataColumn("CheckOut", typeof(string));

dt.Columns.AddRange(new DataColumn[] { dcRoom, dcAdults, dcChildren, dcCheckIn, dcCheckOut });

dt.Rows.Add(new object[] { new DropDownList(), "", "", "", "" });
gvRP.DataSource = dt;
gvRP.DataBind(); 
```

它怎么知道在 DropDown (Select...) 中放什么，我没有指定两个 DropDown，但它仍然放了第二个 DropDown。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-05-08T04:46:50.177

```
namespace gridview_row_add
{
    public partial class Form1 : Form
    {
        public Form1()
        {
            InitializeComponent();

            DataGridViewTextBoxColumn columntype = new DataGridViewTextBoxColumn();
            columntype.HeaderText = "Type";
            columntype.Width = 80;
            dataGridView1.Columns.Add(columntype);

            DataGridViewTextBoxColumn columnparameters = new DataGridViewTextBoxColumn();
            columnparameters.HeaderText = "Parameters";
            columnparameters.Width = 320;
            dataGridView1.Columns.Add(columnparameters);

            DataGridViewTextBoxColumn columndisplay = new DataGridViewTextBoxColumn();
            columndisplay.HeaderText = "Display";
            columndisplay.Width = 150;
            dataGridView1.Columns.Add(columndisplay);

            DataGridViewTextBoxColumn enumuration = new DataGridViewTextBoxColumn();
            enumuration.HeaderText = "Format";
            enumuration.Width = 90;
            dataGridView1.Columns.Add(enumuration);

            dataGridView1.AllowUserToAddRows = false;//please add this if u don't want to add exta rows or else make it true.          
        }

        private void button1_Click(object sender, EventArgs e)
        {
            dataGridView1.Rows.Add();//here on each click the new row will be added.

            int rowcount = dataGridView1.Rows.Count;

            dataGridView1.Rows[rowcount - 1].Cells[0].Value = "data" + rowcount.ToString();
            dataGridView1.Rows[rowcount-1].Cells[1].Value = "field";
            dataGridView1.Rows[rowcount-1].Cells[2].Value = "xyzzz";
            dataGridView1.Rows[rowcount-1].Cells[3].Value = "hts";

            rowcount++;                     
        }
    }
} 
```

这段代码对我来说很好。在这段代码中，我在 girdview 中添加了四个标题，您可以根据需要更改它们..单击一个按钮将首先添加新行，然后将数据填充到该行中..希望这对您有用..

# javascript - jQuery包装div

> ID：10982745
> 
> 赞同：1
> 
> 时间：2012-06-11T15:05:07.277
> 
> 标签：javascript, jquery, html, css

我需要将 HTML 包裹在当前的 div 周围，这就是我目前得到的：

HTML：

```
<input type="text" data-placeholder="username" /> 
```

需要渲染为：

```
<div class="placeholding-input">
  <input type="text" data-placeholder="username" />
  <label>Username</label>
</div> 
```

到目前为止我得到了什么：

```
$.each($('input[type="text"], input[type="password"], textarea'), function(){
    var input = $(this);
    var container = $('<div />').addclass('placeholding-input');
    input.wrap(container);
    var label = $('<label />').html(input.data('placeholder')).appendTo(container);
}); 
```

但这由于某种原因不起作用，我不知道为什么。

感谢帮助 ：）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-11T15:09:15.687

```
var container = $('<div />').addclass('placeholding-input'); 
```

到：

```
var container = $('<div />').addClass('placeholding-input');
//                              ^--------------------- upperCase 
```

完整代码：

```
$('input[type="text"], input[type="password"], textarea').each(function() {
    var input = $(this);
    var container = $('<div>').addClass('placeholding-input');
    var label = $('<label>').html(input.data('placeholder'));
    input.wrap(container).after(label);
});​ 
```

[**演示**](http://jsfiddle.net/GJK5m/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-11T15:12:59.920

尝试如下，

```
$(function() {
    $.each($('input[type="text"], input[type="password"], textarea'), function() {    
        var input = $(this);
        var container = $('<div />').addClass('placeholding-input');
        var label = $('<label />').html(input.data('placeholder'));
        input.wrap(container).after(label);
    });
}); 
```

**演示：http:** [//jsfiddle.net/skram/CsGUv/](http://jsfiddle.net/skram/CsGUv/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-11T15:10:28.303

```
var input = $(this).wrap((container = $('<div />').addClass('placeholding-input')));
input.after((label = $('<label />').html(input.data('placeholder')))); 
```

完成，谢谢帮助：）

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-11T15:11:40.223

```
$.each($('input[type="text"], input[type="password"], textarea'), function(){
    var input = $(this);
    var container = $('<div />').addClass('placeholding-input'); // not addclass
    var label = $('<label />').html(input.data('placeholder'));
    input.wrap(container).after(label);
}); 
```

**[演示](http://jsfiddle.net/gjzDZ/5/)**

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-06-11T15:38:44.970

除了 中的语法错误之外，`addclass`在包装输入之前将标签附加到 div。

[http://jsfiddle.net/Yb9QV/](http://jsfiddle.net/Yb9QV/)

```
$.each($('input[type="text"], input[type="password"], textarea'),
       function(){
            var input = $(this);
            var container = $('<div />').addClass('placeholding-input');

            var label = $('<label />')
                .html(input.data('placeholder')).appendTo(container);

            input.wrap(container);
});​ 
```

# python - 需要将输出作为列表而不是 Popen 或任何其他系统命令中的字符串

> ID：10982746
> 
> 赞同：3
> 
> 时间：2012-06-11T15:05:08.387
> 
> 标签：python, list, popen, subprocess

我正在尝试从 Python 脚本运行命令（使用 Popen()）将输出作为列表而不是字符串。

例如，当我使用 Popen() 时，它以字符串形式提供输出。对于像“vgs、vgdisplay、pvs、pvdisplay”这样的命令，我需要将输出作为列表获取，并且应该能够解析它的行和列，以便我可以执行必要的操作（比如删除已经存在的 Vg 等） . 我只是想知道，是否可以获取列表或至少转换为列表....

我一周前开始学习python，所以我可能错过了一些简单的技巧，请原谅我......

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-11T15:33:07.870

只是为了详细说明现有的评论

```
from subprocess import PIPE
import subprocess
pro = subprocess.Popen("ifconfig", stdout=PIPE, stderr=PIPE)
data = pro.communicate()[0].split()
for line in data:
    print "THIS IS A LINE"
    print line
    print "**************" 
```

# php - 如何找到在线的用户

> ID：10982748
> 
> 赞同：-1
> 
> 时间：2012-06-11T15:05:13.470
> 
> 标签：php, mysql, chat

我正在为我的网站聊天。为此，我需要找出有多少注册用户在线。我计算会话的数量并将它们存储在一个表中。当他们注销时，他们的名字将从该表中删除。现在，如果他们不单击注销并直接关闭其选项卡，则不会使他们下线。他们的名字仍然存在于表中。所以为了去除它们，我在网上找到了一个非常复杂的算法。它每五分钟清空一次该表，然后再次添加在线人员的姓名。但问题是，当这种情况发生时，聊天被打断了。所以我需要一个解决这个问题的方法

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-11T15:08:22.113

为“上次活动”添加一列。每次用户执行某些操作（例如，可能包括浏览器通过 AJAX 轮询更多消息）时，您将该列更新为`NOW()`. 然后，您查找活跃用户的查询可能类似于：

```
SELECT user.name FROM user
    WHERE DATE_ADD(user.last_active, INTERVAL 5 MINUTE) >= NOW(); 
```

从表中删除旧记录很好，但可能是可选的增强功能（取决于站点负载）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-11T15:09:18.503

也许看看这个：[在窗口关闭时销毁会话？](https://stackoverflow.com/questions/959655/destroy-session-on-window-close)

您可以执行删除该行的查询，而不是破坏会话。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-11T15:08:37.257

我认为有2个解决方案。

1.) 保存时间戳并进行 cronjob。例如，cron 每分钟或每 2 分钟检查一次条目的存在时间，并删除超过 5 分钟的条目。

2.) 第二种方法做一个与第 1 点相同的功能，但在每个页面调用时运行该功能。但这并不是很有效并且会产生很多负载。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-11T15:46:39.873

如果您将会话存储在 db 表中，您可以轻松检查活动会话，请查看 php 手册[http://in.php.net/manual/en/function.session-set-save-handler.php](http://in.php.net/manual/en/function.session-set-save-handler.php)

# c# - 基于 C# 或 Java 中的多个分数进行字符串查找的好方法

> ID：10982749
> 
> 赞同：4
> 
> 时间：2012-06-11T15:05:14.593
> 
> 标签：c#, java, data-structures

我正在寻找一种基于 C# 或 Java 中的各种分数返回字符串的好方法。例如，假设我有以下用双打表示的分数：

```
double scoreIQ = 4.0;
double scoreStrength 2.0;
double scorePatience 9.0; 
```

假设我想根据上述分数返回一个字符串。什么是一种以清晰、易于理解的方式来构建它的好方法，**与**以下不同：

```
public static string ReturnScore(double scoreIQ, double scoreStrength, double scorePatience)
    {

        if (scoreIQ <= 5.0)
        {
            if (scoreStrength <= 5.0)
            {
                if (scorePatience <= 5.0)
                {
                    return "You're stupid, weak, and have no patience";

                }
                else if (scorePatience <= 7.5)
                {
                    return "You're stupid, weak, and have some patience";
                }
                else
                {
                    return "You're stupid, weak, and have a lot of patience";
                }
            }
            //Continue elseif return string permutations here
        }
        //Continue elseif return string permutations here
    } 
```

立即想到的事情是删除硬编码的字符串并使用关键字/短语的字符串创建器，根据分数创建句子。我不想使用嵌套的 if 语句，因为如果我想超过 3 分怎么办？排列将呈指数增长。

以上只是一个例子，我正在寻找一些可以处理这种情况的结构。显然，这是错误的做法。我正在寻找能引导我朝正确方向前进的人。谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-11T15:07:07.637

如果您有一系列 yes no 值，一种方法是[bitmask](http://en.wikipedia.org/wiki/Mask_%28computing%29)，其中每个位代表一个 yes no 值。

例如，对于 scoreIQ >= 4.0，让位 0（从右到左编号的位，从 0 开始）为真，否则为 0。

对于 scoreStrength >= 2.0，让位 1 为真，否则为 0。

对于 scorePatience >= 9.0，让位 2 为真，否则为 0。

因此，如果您想知道某人是否具有高智商并且非常耐心但不强壮，您可以使用`AND`带有位掩码的运算符`101`来执行此测试。

其他示例：

```
000 - person has poor IQ, is not strong, and is not patient
001 - person has good IQ, is not strong, and is not patient
011 - person has good IQ, is strong, and is not patient
110 - person has poor IQ, is strong, and is patient 
```

随着新条件的添加，您只需为新条件使用另一个位。

因此，要构建一个位掩码来测试您关心的特性，您可以执行以下操作：

```
// find out if person has good IQ and is patient, but not strong
int mask = 0;
mask |= (1<<0);  // set bit 0 (good IQ)
mask |= (1<<2);  // set bit 2 (patient)
if (personsMask & mask == mask) {
    // you know the person has a good IQ and is patient, but they are `not` strong
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-11T15:15:38.847

在 Java 中，您可以使用 NavigableMap（不知道 C# 中有类似的东西）

```
TreeMap<Double, String> patience = new TreeMap<Double, String>();
patience.put(0.0, "no");
patience.put(5.0, "some");
patience.put(7.5, "a lot of");

System.out.println("You have " + patience.floorEntry(6.0).getValue() + " patience!"); 
```

请参阅[http://docs.oracle.com/javase/7/docs/api/java/util/NavigableMap.html](http://docs.oracle.com/javase/7/docs/api/java/util/NavigableMap.html)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-11T15:25:17.190

使用字典你可以做这样的事情......

```
class Program
{
    static void Main(string[] args)
    {
        ScoreTextTranslator dec = new ScoreTextTranslator();
        dec.IfAtLeast(0, "stupid");
        dec.IfAtLeast(5, "average intelligence");
        dec.IfAtLeast(6, "smart");
        Console.WriteLine(dec.GetTextForScore(5.7f));
    }
}

class ScoreTextTranslator
{
    Dictionary<float, string> backing = new Dictionary<float, string>();
    public void IfAtLeast(float value, string text)
    {
        backing.Add(value, text);
    }
    public string GetTextForScore(float ActualScore)
    {
        var scoreRange = backing.Keys.Where(a => a <= ActualScore);
        if (scoreRange.Count() == 0)
            throw new Exception("No valid score text exists");
        else
            return backing[scoreRange.Max()];
    }
} 
```

# android - 歌曲识别算法

> ID：10982760
> 
> 赞同：5
> 
> 时间：2012-06-11T15:05:58.130
> 
> 标签：android, algorithm, pattern-matching, voice-recognition, shazam

知道如何通过将歌曲与歌曲剪辑或人声或曲调相匹配来实现识别歌曲的算法。我不希望有人在这里写出算法:)，我知道它涉及很多事情，但我想知道如何开始。我需要考虑哪些技术来做类似的事情。我正在寻找类似于 Shazaam 或 Midomi 的东西。此外，是否有在线服务可以执行相同的操作并提供 API 来执行此操作。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-11T15:14:20.813

[我在 devoxx 会议上看到了一个关于这个的介绍，在这里](http://www.devoxx.com/display/DV11/What+Shazam+doesn%27t+want+you+to+know)看看。这是演讲者撰写的关于同一主题的博客文章[。](http://www.redcode.nl/blog/2010/06/creating-shazam-in-java/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-11T15:18:50.220

哦，很简单。

将歌曲分割成片段，在每个片段上运行 FFT，提取几个主要幅度并将它们存储为带有时间信息的哈希。
然后对录制的音频执行相同的操作，并根据时间与存储的数据进行匹配。

是不是很简单？老实说，它更复杂，但想法是相似的。

# json - 如何从 JSF 生成 JSON 响应？

> ID：10982762
> 
> 赞同：18
> 
> 时间：2012-06-11T15:06:06.707
> 
> 标签：json, jsf

我创建了一个页面，我想从 JSF 页面获取 JSON 响应，但是当我尝试获取页面时，它会显示整个 html 页面。

```
<html xmlns="http://www.w3.org/1999/xhtml"><head>
        <title>Facelet Title</title></head><body>
[{"value": "21", "name": "Mick Jagger"},{"value": "43", "name": "Johnny Storm"},{"value": "46", "name": "Richard Hatch"},{"value": "54", "name": "Kelly Slater"},{"value": "55", "name": "Rudy Hamilton"},{"value": "79", "name": "Michael Jordan"}]

</body></html> 
```

* * *

## 回答 #1

> 赞同：41
> 
> 时间：2012-06-11T15:16:15.520

JSF 是一个生成 HTML 的 MVC 框架，而不是某种 REST Web 服务框架。您本质上是在将 JSF 作为 Web 服务来滥用。您的具体问题只是由您*自己*`<html>`在视图文件中放置标签等引起的。

 *如果你真的坚持，那么你总是可以通过使用`<ui:composition>`代替来实现这一点`<html>`。您还需要确保使用了正确的内容类型`application/json`，这在 JSF 中默认为`text/html`.

```
<ui:composition
    xmlns:f="http://java.sun.com/jsf/core"
    xmlns:ui="http://java.sun.com/jsf/facelets">
    <f:event type="preRenderView" listener="#{bean.renderJson}" />
</ui:composition> 
```

和

```
public void renderJson() throws IOException {
    FacesContext facesContext = FacesContext.getCurrentInstance();
    ExternalContext externalContext = facesContext.getExternalContext();
    externalContext.setResponseContentType("application/json");
    externalContext.setResponseCharacterEncoding("UTF-8");
    externalContext.getResponseOutputWriter().write(someJsonString);
    facesContext.responseComplete();
} 
```

但我强烈建议您查看 JAX-RS 或 JAX-WS，而不是将 JSF 用作 JSON Web 服务。为工作使用正确的工具。

### 也可以看看：

*   [如何在 JSF 框架中实现 JAX-RS RESTful 服务](https://stackoverflow.com/questions/29982657/how-to-implement-jax-rs-restful-service-in-jsf-framework/)
*   [Servlet 与 RESTful](https://stackoverflow.com/questions/7874695/servlet-vs-restful)
*   [当 UI 可以由 CSS、HTML、JavaScript、jQuery 实现时，JSF 需要什么？](https://stackoverflow.com/questions/4421839/what-is-the-need-of-jsf-when-ui-can-be-achieved-from-css-html-javascript-jquery)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2014-07-11T09:46:20.543

我什至在 JSF 2.2 中使用 contentType="text/xhtml" 并且效果很好。从上面的 BalusC 的答案中不需要 renderJson()

```
<f:view encoding="UTF-8" contentType="text/html"
    xmlns="http://www.w3.org/1999/xhtml"
    xmlns:h="http://xmlns.jcp.org/jsf/html"
    xmlns:f="http://xmlns.jcp.org/jsf/core">
 <h:outputText value="#{stationView.getClosestStationen(param.longitude, param.latitude)}" escape="false"/>
</f:view> 
```

阿贾克斯调用：

```
 $.ajax({
            url: requestContextPath + '/rest/stationen.xhtml',
            type: "GET",
            data: {
               "longitude": x,
               "latitude": y
            },
            dataType: "json",
            success: function (data) {
              $.each(data, function (i, station) {
                 ...
              });
            },
            error: function () {
                ...
            }
        }) 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-07-18T09:10:40.767

我只使用了一个 facelet 作为输出（但 JSF 1.2）

```
<f:view contentType="application/json" xmlns:f="http://java.sun.com/jsf/core" xmlns:h="http://java.sun.com/jsf/html">
<h:outputText value="#{someBean.getJson()}" escape="false"/>
</f:view> 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-06-11T15:16:39.770

你为什么要使用 jsf 呢？使用 servlet 为您的 JSON 提供服务。我的建议是使用 jaxrs 实现，例如 cxf。*

# c# - 启动一个 STA 线程，但带有最终函数的参数

> ID：10982763
> 
> 赞同：1
> 
> 时间：2012-06-11T15:06:13.680
> 
> 标签：c#, delegates, nunit

我对某些委托的行为方式有点弱，例如将方法作为要调用的参数传递。在尝试做一些 NUnit 测试脚本时，我需要一些东西来运行许多测试。这些测试中的每一个都需要创建一个 GUI，因此需要一个 STA 线程。所以，我有类似的东西

```
public class MyTest
{

   // the Delegate "ThreadStart" is part of the System.Threading namespace and is defined as
   // public delegate void ThreadStart();
   protected void Start_STA_Thread(ThreadStart whichMethod)
   {
      Thread thread = new Thread(whichMethod);
      thread.SetApartmentState(ApartmentState.STA); //Set the thread to STA
      thread.Start();
      thread.Join();
   }

   [Test]
   public void Test101()
   { 
      // Since the thread issues an INVOKE of a method, I'm having it call the
      // corresponding "FromSTAThread" method, such as
      Start_STA_Thread( Test101FromSTAThread );
   }

   protected void Test101FromSTAThread()
   {
      MySTA_RequiredClass oTmp = new MySTA_RequiredClass();
      Assert.IsTrue( oTmp.DoSomething() );
   }
} 
```

这部分一切正常......现在下一步。我现在有一组不同的测试，它们也需要一个 STA 线程。但是，我需要做的每个“事情”都需要两个参数......两个字符串（对于这种情况）。

我该如何声明正确的委托，以便我可以传入我需要调用的方法，以及一次性传递两个字符串参数......我可能有 20 多个测试要在这种模式下运行，并且可能会有其他类似的未来也使用不同的参数计数和参数类型进行测试。

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-11T15:50:54.193

您可以使用 lambda 表达式。

这是您要在测试接受参数中调用的修改后的方法：

```
protected void Test101FromSTAThread(String arg1, Int32 arg2)
{
} 
```

`Start_STA_Thread`以下是使用 lambda 表达式调用的方法：

```
public void Test101()
{
   Start_STA_Thread(() => Test101FromSTAThread("foobar", 123));
} 
```

本例中的 lambda 表达式为：

```
() => Test101FromSTAThread("foobar", 123) 
```

这与所需的[`ThreadStart`](http://msdn.microsoft.com/en-us/library/system.threading.threadstart.aspx)委托相匹配。两者都是没有参数且返回类型为 void 的方法。

如果您不熟悉 lambda 表达式，可以通过阅读MSDN 上的[Lambda 表达式（C# 编程指南）了解更多信息。](http://msdn.microsoft.com/en-us/library/bb397687.aspx)lambda 表达式是一个匿名函数，在这里它创建一个委托。委托被传递给线程，并在线程启动时执行匿名函数。在这种情况下，由于涉及到一个线程，匿名函数将在您创建的线程上执行，而不是在测试运行线程上执行。

当您在 C# 中使用 lambda 表达式时，编译器将发出一个具有“有趣”名称的函数，代表匿名函数。如果 lambda 表达式使用来自词法环境的变量（例如，在 lambda 表达式之前定义的局部变量），编译器将在一个特殊类型（同样具有“有趣”的名称）内生成匿名函数，以创建所谓的闭包。这允许编译器将词法环境中的变量捕获到特殊类型的状态中，并在稍后执行匿名函数时使用它。在您的情况下，这发生在线程启动时。

上面的代码将生成类似这样的内容（“有趣”`<Test101>b__0`的名称当然不会编译，但它在 IL 中完全有效）：

```
public void Test101()
{
   Start_STA_Thread(<Test101>b__0);
}

// The "anonymous" function.
void <Test101>b__0()
{
   Test101FromSTAThread("foobar", 123);
} 
```

注意如何`<Test101>b__0`可以用作`ThreadStart`委托。

# javascript - Joomla 1.5 / CK Forms：需要帮助在 javascript 工具提示上调试字体大小

> ID：10982770
> 
> 赞同：0
> 
> 时间：2012-06-11T15:06:39.687
> 
> 标签：javascript, css, firebug, joomla1.5

我有一个安装了 CK Forms 的 Joomla 1.5 站点。一切正常，但验证码上有一个工具提示，无法正确显示。它以 1px 字体大小显示。如果我尝试在 Firebug 中调试元素，则字体设置正确。它有两个属性：

```
#ckformcontainer .ckform div.error {
  display: none;
  font-size:12px;
} 
```

如果我尝试使用 Firebug 删除 display:none ，那么它会正确显示，但是当使用翻转时，字体非常小。看看这里：

[https://www.autismworks.co.uk/expressionofinterest](https://www.autismworks.co.uk/expressionofinterest)

滚动到底部并在验证码附近查找“i”。

到目前为止，我已经确定 1px 字体大小实际上来自 body 元素，尽管被其他样式覆盖？！

元素是：

```
<div id="errorck_captcha_code" class="error"> Please try to enter the captcha again, the code was not accepted this time. </div> 
```

我在 Windows 7 上使用 Firefox 9.0.1（将升级到测试），但这似乎也发生在 IE 中。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-11T16:06:46.393

您需要设置 CSS 规则以强制`.tool-tip`使用更大的字体大小。这将解决它：

```
.tool-tip {
    font-size: 14px !important;
} 
```

将其放在您的 CSS 文件之一中。

# url - 如何更改 Joomla URL 格式

> ID：10982772
> 
> 赞同：0
> 
> 时间：2012-06-11T15:06:51.397
> 
> 标签：url, joomla

我在一个 Joomla 2.5 站点工作，主页中的文章链接是这样的：域/（类别名称）/（文章名称），并且引起了很多问题。

有没有办法将其更改为域/组件/内容/文章/（类别名称）/（文章名称）？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-11T19:59:38.933

我假设您只是通过默认的 joomla 查看文章？但要做到这一点，您基本上需要将其从菜单中删除！由于默认情况下将其添加到菜单项中，您会丢失 url 的“组件/内容/文章”部分，据我所知，唯一的方法是更改​​ router.php 中的代码com_content 中的文件。我不确定确切的位置，因为我从来不需要去更改那个特定的文件

您面临哪些问题使得添加它如此重要？因为它是标准的 joomla 响应——大多数人都想从他们的 url 中删除“组件/内容/文章”！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-11T16:48:37.167

如果您已经打开了 SEF，那么这应该显示 URL，例如您在问题中提供的 URL，但是某些组件对 SEF 不友好，因此会导致问题。确保您的组件对 SEF 友好，否则将其关闭。

# php - PHP 表单 POST 显示为 GET 请求

> ID：10982777
> 
> 赞同：0
> 
> 时间：2012-06-11T15:07:06.077
> 
> 标签：php, forms, post, get

我有一个调查的基本表格（包含单选按钮和几个隐藏字段）。表单提交到另一个 PHP 文件，该文件保存当前页面的答案，然后重定向回调查（通过 GET 传递下一页）。这是使用标头重定向完成的。

偶尔，不同的用户在尝试保存答案时会看到错误。这是因为 $_POST 是空的。每个失败的请求都表明该页面是使用 GET 而不是 POST 请求的，并且 $_REQUEST 变量为空，保存了一些 cookie/会话数据。

我不知道接下来要寻找什么。有任何想法吗？

**更新：**我的数据库显示答案已保存，并且在表单发布后以某种方式再次使用 GET 访问页面然后失败（而不是重定向到上一页）。

**编辑：**

这是一些代码。来自表单页面的 Javascript：

```
function nextPage(page,question_count)
{
    if (checkForm(question_count))
    {
        btn = document.getElementById('nextbutton');
        btn.disabled = true;
        gotoPage(page);
    }
}

function prevPage(page)
{
    btn = document.getElementById('prevbutton');
    btn.disabled = true;
    gotoPage(page)
}

function completeSurvey(question_count)
{
    if (checkForm(question_count))
    {
        frm = document.surveynav;
        frm.action = 'act_complete_survey.php';
        frm.submit();
        return true;
    }
}

function gotoPage(page)
{
    action = document.getElementById('gotopage');
    action.value = page;
    document.surveynav.submit();
    return true;
}

function checkForm(question_count)
{

    frm = document.surveynav;
    answer_count = 0;
    for (var i = 0; i < frm.elements.length; i++)
    {
        if ((frm.elements[i].name.indexOf('q_') > -1) && frm.elements[i].checked)
        {
            answer_count++;
        }
    }
    if (answer_count < question_count)
    {
        alert('Please answer all questions on this page before proceeding.');
        return false;
    }
    return true;
}

function openSurveyWin()
{
    window.open("survey.php", "surveywin", "location=0, toolbar=0, directories=0, status=0, menubar=0, scrollbars=0, resizable=0, fullscreen=0")
} 
```

和表单中的 HTML：

```
 <form action="act_savestate.php" name="surveynav" id="surveynav" method="post">
                      <input type="hidden" name="gotopage" id="gotopage" value="" />
                <div class="question_holder"><div class="question">1 . Some question text here.</div><div><div style="padding-left:15px;"><input type="radio" name="q_1" value="1"  id="a_1" /><label for="a_1">Strongly Disagree</label><br />
    <input type="radio" name="q_1" value="2"  id="a_2" /><label for="a_2">Disagree</label><br />
    <input type="radio" name="q_1" value="3"  id="a_3" /><label for="a_3">Neither Agree nor Disagree</label><br />
    <input type="radio" name="q_1" value="4"  id="a_4" /><label for="a_4">Agree</label><br />
    <input type="radio" name="q_1" value="5"  id="a_5" /><label for="a_5">Strongly Agree</label><br />
    </div></div></div>
    <input type="hidden" name="questions" id="questions" value="1,10,19,28,37,46,55,64,73,2,11,20,29,38,47,56,65,74,3,12" />
<input type="button" id="nextbutton" name="nextbutton" value="Next &gt;&gt;" onclick="nextPage(2,20);" />
    </form> 
```

以及来自 act_savestate.php 的代码：

```
$gotopage = isset($_POST['gotopage']) ? (int)$_POST['gotopage'] : 1;
if (!isset($_POST['questions'])) {
// No post
  die("No questions included");
}

$questions = explode(',',$_POST['questions']);

foreach($questions as $questionid)
{
    if (isset($_POST['q_' . $questionid]))
    {
        $survey->setAnswer($survey_id,$questionid,$_POST['q_' . $questionid]);
    }
}

header("Location: survey.php?page=$gotopage");
die(); 
```

# sql - 使用 xp_cmdshell 通过 DTEXEC 传递变量 (SQL Server 2008)

> ID：10982780
> 
> 赞同：2
> 
> 时间：2012-06-11T15:07:12.997
> 
> 标签：sql, dynamic, ssis

我创建了一个 SSIS 包，可将 Excel 文件导入我的数据库。我创建了一个变量，我想将其用作 Excel 连接管理器的 Excel 文件路径。

我的 SSIS 包中的变量名称是“ExcelSource”，它应该代表完整路径。我想最终动态设置它，因为文件名包含一个日期。

运行它的 T-SQL 代码是什么？这是我到目前为止所拥有的：

```
DECLARE @ssisstr VARCHAR(8000)
, @packagename VARCHAR(200)
, @servername VARCHAR(100)

DECLARE @params VARCHAR(8000)
--my package name
SET @packagename = 'MyPackage'
--my server name
SET @servername = 'MYCOMPUTER\MYSERVER'

SET @params = '/set \package.variables[ExcelSource].Value;"\"Y:\excelFile\Test File - June 11 2012.xlsx\""'

SET @ssisstr = 'dtexec /sq ' + @packagename + ' /ser ' + @servername + ' '
SET @ssisstr = @ssisstr + @params

DECLARE @returncode INT
EXEC @returncode = xp_cmdshell @ssisstr
SELECT @returncode 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-11T16:40:56.487

您将遇到的问题是使用 xp_cmdshell 转义值。对于运行带有复杂命令行参数的包时遇到的另一个问题，我无法解决这个问题。如果有人可以提供相反的信息，请告诉我，我将修改/删除我的回复。

我可以建议作为解决问题的替代方法是让您的包确定当前文件是什么，或者使用不同的机制来指导该行为。

## 包，认识你自己

这种方法是我的首选方法。您为您的软件包提供智能以解决问题。*你*怎么知道正确的 Excel 文件是什么？你说它有一个日期，那么你怎么知道那个日期是什么？

如果是今天的日期，您可以在变量上使用表达式 some 以提供的格式粘贴到当前日期。

它是文件夹中唯一的文件吗？然后使用文件类型的 ForEach 枚举器来识别那里的所有 .xlsx 文件。这个问题和[最优秀的答案](https://stackoverflow.com/questions/8831060/import-most-recent-csv-file-to-sql-server-in-ssis/8838029#8838029);) 描述了如何使用 SSIS 导入最新的 CSV。查找最新的 Excel 文件将是一个微不足道的更改`string fileMask = "*.xlsx";`

如果您有描述如何确定正确文件的业务规则，我很乐意提供有关如何使用 SSIS 实施所述规则的见解。

## 告诉我你想要什么

另一种选择是使用外部配置来提供运行时值。SSIS 提供了许多开箱即用的配置选项。我宁愿为此目的使用 SQL Server，但您的选择是

*   SQL Server 表
*   XML 文件
*   环境变量
*   注册表值
*   父包

最后 3 个是我认为的特殊用例，对您的问题不是特别方便，但为了完整起见，我已经列出了它们。无论您使用什么配置选项，单击 SSIS、包配置、选中启用配置按钮并使用向导设置您的配置类型应该是一件简单的事情。

使用外部配置的第二个选项是做你正在做的事情，提供命令行选项来控制包行为（不需要更改包）。相反，您用 xp_commandshell 换取一些自定义 PowerShell。我认为 PS 只是 2008+ 的一个选项，但您可以编写一个相当简单的脚本来导入 SSIS 对象模型、创建应用程序的实例、打开现有包、应用命令行参数并运行应用程序。[我可能可以根据这里的答案中](https://stackoverflow.com/questions/10202062/list-sqlstatementsource-of-all-execute-sql-task-in-ssis-package/10215621#10215621)的 $app 和 $package 位拼凑一些东西

## 编辑

1）您看到“选项 12.0 无效”的原因是由于 xp_cmdshell 贪婪并急切地将命令行选项中的空格解析为单独的参数。如果你开始搜索 xp_cmdshell 的限制，你会得到很多命中，因为参数中的空格会导致问题。

2) 据我所知，SQL 代理作业是静态的。能够将它们配置为使用可变值参数（在运行时评估的东西）调用任何步骤（sql、ssis 等）真是太棒了，但一般来说，我还没有找到这样做的干净方法。

3) If you're intent on not changing the package to determine what the "right" file is, using configurations or rolling your own invocation method (PS is an job step type in SQL Agent), you could try a low-tech solution of using your existing logic to build out the dtexec call but have that all in a .bat file. xp_cmdshell then calls the batch file which should not have the trouble of handling the space in the argument name.

# java - request.getParameter 无法在类中解析

> ID：10982788
> 
> 赞同：1
> 
> 时间：2012-06-11T15:07:44.180
> 
> 标签：java, jsp, servlets

我正在编写一个类来检查 MySQL 数据库中的登录名和密码。填写的表单转到一个 .jsp 文件，然后我想在这个 .jsp 中导入该类以执行操作。

课程是这样的：

```
import import java.sql.*;

public class TestQuery {   

    public void logging in() {

    String user = request.getParameter("user");
    String passwd = request.getParameter("passwd");
    Connection C = DriverManager.getConnection("jdbc:mysql://localhost:3306/mydb?user=root&password=foo");

    ResultSet rs = stm.executeQuery("SQL QUERY");
    if (rs == NULL) {
        response.sendRedirect("LoginScreen.jsp");
    } else {
        switch (rs.getInt("id")) {
        case 1:
            response.sendRedirect("foo1.jsp");
            break;
        case 2:
            response.sendRedirect("foo2.jsp");
            break;
        case 3:
            response.sendRedirect("foo3.jsp");
            break;
        default:
            response.sendRedirect("LoginScreen.jsp");
                }
            }
        }
    } 
```

但是后来我收到消息*请求无法解决*，*响应无法解决*等。

我究竟做错了什么？这是执行此操作的最佳方法吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-11T15:09:29.563

您的课程必须扩展[`HttpServlet`](http://docs.oracle.com/javaee/6/api/javax/servlet/http/HttpServlet.html).

```
public class TestQuery extends HttpServlet {
    // ...
} 
```

`doGet()`您必须根据请求方法或`doPost()`根据请求方法执行该作业。和`HttpServletRequest`可用作`HttpServletResponse`方法参数。

```
@Override
protected void doPost(HttpServletRequest request, HttpServletResponse response) throws ServletException, IOException {
    // ...
} 
```

由于这相当琐碎，您似乎并没有真正阅读过任何 JSP/Servlet 书籍/教程。我强烈建议在继续之前这样做。

### 也可以看看：

*   [我们的 servlet wiki 页面](https://stackoverflow.com/tags/servlets/info)- 包含 Hello World 示例

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-11T15:12:09.723

我假设您正在实例化此类并从 JSP 调用您的方法。

请求和响应对象在 JSP 中自动声明。您需要将请求和响应参数从 JSP 传递到您的方法中。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-11T15:12:48.133

从[文档](http://docs.oracle.com/cd/B32110_01/web.1013/b28961/genlovw.htm)来看，这意味着您可以`request`在您的 jsp 页面中使用（或通过实现 HTTpServelt 并使用 doPost 或 get 方法的 servlet），但不能在其他类中使用！

> 隐式对象
> 
> JSP 技术使任何 JSP 页面都可以使用一组隐式对象。**这些是由 Web 容器自动创建并允许与底层 servlet 环境交互的 Java 对象。**
> 
> 下面列出的隐式对象可用。有关可用于这些对象的方法的信息，请参阅 Sun Microsystems Javadoc 中提到的类和接口。
> 
> 页
> 
> 这是 JSP 页面实现类的一个实例，在页面翻译时创建。页面实现类实现接口javax.servlet.jsp.HttpJspPage。请注意，在 JSP 页面中 page 与 this 是同义词。
> 
> **要求**
> 
> 这表示一个 HTTP 请求，并且是实现 javax.servlet.http.HttpServletRequest 接口的类的实例，该接口扩展了 javax.servlet.ServletRequest 接口。

# android - 服务未初始化，返回 NullPointerException

> ID：10982789
> 
> 赞同：1
> 
> 时间：2012-06-11T15:07:45.257
> 
> 标签：android, service, nullpointerexception

我正在尝试在我的服务和活动设置之间进行双向通信。为此，我像往常一样启动我的服务，在我的 Activity 中将回复设置为 Messenger 的消息发送到我的服务，然后将其发送到我的服务。这样我就有了双向发送消息的参考。这是我的 Activty 中的一些相关代码：

```
private Messenger mService = null;
private final Messenger mMessenger = new Messenger(new IncomingHandler());

private ServiceConnection mConnection = new ServiceConnection()
{
    public void onServiceConnected(ComponentName className, IBinder service)
    {
        mService = new Messenger(service);
        mBound = true;
    }

    public void onServiceDisconnected(ComponentName className)
    {
        mService = null;
        mBound = false;
    }
};

private void initMessenger()
{
    Message messageHandler = Message.obtain(null, NetworkService.MSG_GET_HANDLER, 0, 0);
    messageHandler.replyTo = mMessenger; //Set the replyTo to give a reference
    try
    {
        mService.send(messageHandler);
    }
    catch(RemoteException e)
    {
        e.printStackTrade();
    }
    catch(NullPointerException e)
    {
        e.printStackTrace(); //Why!!!
    }
}

public void onCreate()
{
...
    //Create the intent to start the network service
    Intent iService = new Intent(this, NetworkService.class);
    int[] connectionConfig = {CONNECTION_BT};
    iService.putExtra(CONNECTION_CONFIG, connectionConfig);
    bindService(iService, mConnection, Context.BIND_ABOVE_CLIENT);
    startService(iService);
    initMessenger();
} 
```

当我尝试调用 mService.send() 时抛出 NullPointerException，很可能是因为当时 mService 为空。如果我将 initMessenger() 代码移动到按钮的 OnClickListener 中，它可以正常工作，这就是混淆的地方。我是否应该在启动服务后等待一段时间才能使用它？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-11T15:12:47.020

为什么不调用`initMessenger()`你的`onServiceConnected()`方法？这种方式`mService`肯定会被分配。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-11T15:16:32.960

`mService`处于`null`此阶段表明此时您的 Service 尚未（尚未）调用`onServiceConnected()`.

不幸的是，[文档](http://developer.android.com/reference/android/content/Context.html#bindService%28android.content.Intent,%20android.content.ServiceConnection,%20int%29)`bindService()`并没有暗示返回和`ServiceConnection`被调用的方法之间会有差距。

事实上，`bindService()`应该`true`在服务启动时返回，这意味着一旦代码通过此阶段，服务应该启动或不启动。`true`因此，我会在调用之前检查 bindService() 是否已返回`initMessenger()`，因为服务可能无法正确启动。

也可能是其中的代码`onServiceConnected()`引发了异常（由于它可能在工作线程上被调用，因此不会导致您的应用程序崩溃），您可能需要重新检查您的日志以检查这是否是案子。

此外，`startService(iService);`在这种情况下是多余的，`bindService()` **启动**服务，调用`startService`服务只是向它发送一条消息。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-11T15:11:42.917

是的。仅当您知道自己已绑定该服务时，才应使用该服务。因为您在尝试绑定后立即尝试使用您的服务，所以您不能保证您将连接到该服务。有时服务可能会立即绑定，因此您不会崩溃。有时需要更长的时间，因此您的调用`initMessenger()`将导致您的 NPE，因为该服务尚未连接。

将您的`initMessenger()`呼叫移动到您的按钮单击是允许您的服务时间绑定。此外，您应该检查以确保您已绑定（即使您给它时间），因为绑定可能会失败

# debugging - 需要堆栈跟踪，但 Cygwin 甚至不会打印核心转储

> ID：10982790
> 
> 赞同：6
> 
> 时间：2012-06-11T15:07:48.457
> 
> 标签：debugging, cygwin

我有一个在 Windows 7 上的 Cygwin 中运行的程序，它总是导致分段错误。这不是我的程序，但我需要帮助，开发人员要求我至少提供一个堆栈跟踪我的 Cygwin 变量如下所示`error_start=c:/cygwin/bin/dumper.exe`：我也在执行程序之前运行了这个命令：`ulimit -c unlimited`. 这是我可以通过谷歌（包括[这个](https://stackoverflow.com/questions/2176299/core-dump-analysis-using-gdb)问题）找到的唯一两个要求，以便在分段错误后从 Cygwin 获取某种信息。

但是，当我运行程序时，它会打印消息`Segmentation fault`，并且不打印 a.exe.stackdump 或任何其他转储文件，也不会启动转储程序实用程序。关于如何获取所需信息的任何建议？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-12T20:16:58.483

与 Unix 不同，核心转储在 Windows 上不是“免费”的。即使你能得到它们，使用它们也不像在 Unix 上那么容易。Cygwin 没有解决这些基本的平台差异。一个简单的事实是，调试在 Windows 上采用了不同的路径：IDE、交互式调试器等。我不会继续尝试将那个方形钉子砸进你熟悉的圆孔中。

除了安装 Visual Studio 并在其调试器下运行程序之外，获得有用的东西的最简单方法可能是安装[WinDbg](http://msdn.microsoft.com/en-us/windows/hardware/gg463009.aspx)，在其下运​​行您的程序，然后说它[`!heap -p -a UserAddr`](http://windbg.info/doc/1-common-cmds.html#20_memory_heap)何时崩溃。堆栈回溯应该在某处的输出中。

# wpf - 整个应用程序的 MS UnityContainer 配置

> ID：10982791
> 
> 赞同：0
> 
> 时间：2012-06-11T15:07:50.680
> 
> 标签：wpf, unity-container

我有一个具有 DAL 依赖项的类：

```
public class FirstClass()
{
    [Dependency]
    public IDalType Dal { get; set; }
} 
```

我可以创建一个类的实例：

```
UnityContainer c = new UnityContainer();  
c.RegisterType<IDalType, DalType>();
FirstClass fc = c.Resolve<FirstClass>(); 
```

这将设置依赖项，我可以使用该实例。这有点像一个开始的主类（主窗体，主 ViewModel）。

现在，我`SecondClass`又有了一个 DAL 依赖项，并且必须实例化第二个类并从第一个类调用。我怎么做？

```
public class FirstClass()
{
    [Dependency]
    public IDalType Dal { get; set; }

    public DoSomething()
    {
        ??? SecondClass sc = App.UnityContainer.Resolve<SecondClass>();
    }
} 
```

如果我在第一个类中使用 UnityContainer，那将是与容器的耦合，我必须在应用程序根目录中的某个位置映射 IDAL -> DAL 并拥有一个静态容器。

我读到与容器的耦合不好，以及使用静态地图： [http ://blog.ploeh.dk/2010/02/03/ServiceLocatorIsAnAntiPattern.aspx](http://blog.ploeh.dk/2010/02/03/ServiceLocatorIsAnAntiPattern.aspx)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-11T16:54:09.817

添加 SecondClass 作为 FirstClass 的依赖项：

```
public class FirstClass
{
    [Dependency]
    public IDalType Dal { get; set; }

    [Dependency]
    public SecondClass Sc { get; set; }

    public DoSomething()
    {
        sc.DoWhatever();
    }
} 
```

但是，我强烈建议改用构造函数注入：

```
public class FirstClass
{
    private IDalType dal;
    private SecondClass sc;

    public FirstClass(IDalType dal, SecondClass sc) 
    {
        this.dal = dal;
        this.sc = sc;
    }

    public DoSomething()
    {
        sc.DoWhatever();
    }
} 
```

这样，您就不会通过属性与容器耦合，也不会公开仅作为输入存在的属性（混淆您的类的公共接口），并且您保证在没有它的情况下无法创建 FirstClass 的实例它需要的所有依赖项。

更新

如果您需要按需创建实例，则可以改为注入 Func。Unity 将为您创建一个工厂方法，在调用该方法时，将回调到容器中。

```
public class FirstClass
{
    private IDalType dal;
    private Func<SecondClass> scFactory;

    public FirstClass(IDalType dal, Func<SecondClass> scFactory) 
    {
        this.dal = dal;
        this.scFactory = scFactory;
    }

    public DoSomething()
    {
        SecondClass cs = scFactory();
        sc.DoWhatever();
    }
} 
```

如果您有更复杂的要求来选择哪个辅助对象做什么，我会重新评估您是否应该从容器中获取有问题的对象。相反，请考虑注入显式工厂对象。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-12T00:00:17.873

使用工厂会将有关服务（您的）实例化的一些知识`SecondClass`放入您的消费者中。在[这篇文章](https://stackoverflow.com/questions/4648318/dependency-injection-new-instance-required-in-several-of-a-classes-methods/4650050#4650050)中， Mark Seemann 描述了另一种方法。

如果您不想浪费时间和精力对这些类型的适配器进行编码，请查看[CodePlex 上的 TecX 项目](http://tecx.codeplex.com/wikipage?title=GenerateLazyProxies&referringTitle=Documentation)。它增加了对使用 Unity 即时生成惰性代理的支持。

# c++ - 继承的差异

> ID：10982794
> 
> 赞同：-2
> 
> 时间：2012-06-11T15:08:11.657
> 
> 标签：c++, inheritance

如果您有从 A 类继承的 B 类，则下面打印的两个值可能不同。为什么？

```
B *myPointer = new B();
A *myOtherPointer = myPointer;

printf(“%x”, myPointer);
printf(“%x”, myOtherPointer); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-11T15:20:55.913

> 下面打印的两个值可能不同。为什么？

假设这`A`是一个基数，`B`因此分配有效，它可能不是唯一的基数`B`（特别是它可能不是第*一个*基数），在这种情况下会有一个偏移量：

```
struct A { int x; };
struct A_ { int y; }
struct B : A_, A {};
int main() {
   B b;
   assert( static_cast<void*>(&b) != static_cast<void*>(static_cast<A*>(&b)) );
} 
```

此外，如果继承关系是虚拟的，那么它们也不会从相同的地址开始：

```
struct A {};
struct B : virtual A {};
int main() {
   B b;
   assert( static_cast<void*>(&b) != static_cast<void*>(static_cast<A*>(&b)) );
} 
```

# asp.net-mvc-3 - 使用 ServiceStack 和 JsonP 重构应用程序

> ID：10982795
> 
> 赞同：1
> 
> 时间：2012-06-11T15:08:15.240
> 
> 标签：asp.net-mvc-3, servicestack

我最初从一个 MVC 应用程序开始，其中包含我的 JQuery Mobile 站点和我的 ServiceStack 休息服务。我的获取和发布是通过 AJAX 完成的，一切正常。

我现在将我的 servicestack 休息服务移动到 ASP.NET 应用程序，现在我遇到了跨域问题。

我考虑过使用 JSONP，但这会解决“获取”问题，但我读到我无法发出“发布”请求（目前对 JSONP 不太熟悉）。

我想知道我的选择是什么？我是不是该

1) 只需将 AJAX 调用回我的 MVC 控制器，然后从那里调用我的新 REST 服务（在带有 ServiceStack 的 ASP.net 应用程序中）

2）如果可能的话，找到一种进行跨域调用（从浏览器）的方法。

如果我选择 1) 是否会影响性能，因为我现在要去 MVC 应用程序，然后调用 ASP.NET 服务堆栈休息服务。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-11T15:59:58.713

我的投票是选项 1，特别是如果应用程序将托管在同一个网络/域之外。

也就是说，如果您对跨域路由感兴趣，那么这也是一种选择。在通过 jsonp 进行跨域获取方面，这篇文章极大地帮助我启动和运行 MVC：[http ://blogorama.nerdworks.in/entry-EnablingJSONPcallsonASPNETMVC.aspx](http://blogorama.nerdworks.in/entry-EnablingJSONPcallsonASPNETMVC.aspx)

跨域 POSTS 有点烦人，因为您需要执行 GET 请求并手动处理任何“GET”参数的序列化。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-11T16:49:17.627

如您所知，当您将 ServiceStack 和 MVC 一起托管时，这不是问题，您可以使用[ServiceStack.Host.Mvc](http://nuget.org/packages/ServiceStack.Host.Mvc) NuGet pacakge 轻松设置，如[SocialBootstrapApi](https://github.com/ServiceStack/SocialBootstrapApi)演示中所示。

## 使用反向代理

我不喜欢选项 1），因为额外的代码样板和开销，您通过 MVC 将所有 HTTP 请求代理到 ServiceStack。

如果您要使用代理，只需将其配置在本机/顶级反向代理服务器下方并将所有以 /api 开头的路径路由到内部 ServiceStack url，其他所有内容都将转到您的 MVC 主机，从而减少开销、代码和清洁度。如果使用 IIS，您可以使用[IIS Rewrite 和 Application Request Routing](http://blogs.iis.net/carlosag/archive/2010/04/01/setting-up-a-reverse-proxy-using-iis-url-rewrite-and-arr.aspx)启用此功能。[这对于使用Nginx](http://tumblr.intranation.com/post/766288369/using-nginx-reverse-proxy)和[Apache](http://www.apachetutor.org/admin/reverseproxies)进行设置也相当简单

## 启用跨域请求

您可以使用 JSONP 或启用 CORS 来发出跨域请求，以下是在 ServiceStack 中执行此操作的方法：

[servicestack REST API 和 CORS](https://stackoverflow.com/questions/8211930/servicestack-rest-api-and-cors)

# regex - 典当脚本语言中的字符串包含或正则表达式

> ID：10982797
> 
> 赞同：0
> 
> 时间：2012-06-11T15:08:20.140
> 
> 标签：regex, string, pawn

或示例

```
if(playerName.Contains("<") || playerName.Contains("-")){

} 
```

或者我如何使用正则表达式模式检查字符串(^[-0-9A-Za-z_]{5,15}$)

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-11T15:12:35.470

我想你是说字符串应该至少包含一个 - 或一个 < 对吗？比它

```
(^(?=.*[-<])[-0-9A-Za-z_<]{5,15}$) 
```

环顾技术被用来使这成为可能

# c# - 基于 HttpModule 安全性是否足以保证 asp.net 应用程序的安全性？

> ID：10982801
> 
> 赞同：3
> 
> 时间：2012-06-11T15:08:36.677
> 
> 标签：c#, asp.net, security, httpmodule

在`ASP.NET`应用程序上工作我已经使用自定义实现了页面级访问控制，`HttpModule`这`HttpModule`会拦截每个传入的请求并检查连接的用户是否可以访问请求的页面，如果不能将他重定向到错误页面。

*   这种方法是否足以保证应用程序的安全性，还是很容易绕过它，
*   你有什么建议来改进它？

提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-11T15:15:44.090

只要标准库中没有任何内容可用于您想要的，这应该没问题，前提是您已经充分测试了您的模块。如果不访问服务器本身来修改 web.config 文件，您就无法绕过 HttpModule，如果攻击者已经这样做了，那么您最不用担心了！

如果标准库中有可以使用的东西，你应该更喜欢这个，因为它不可避免地会被其他人广泛测试！

我建议为您的模块编写一套体面的单元测试，因为它将构成您应用程序的主要防线！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-11T15:12:31.370

> 这种方法是否足以保证应用程序的安全性，还是很容易绕过它，

确保每个用户都有权调用 URL 就足够了。

它无法保护您免受构成 SQL 注入基础的常见攻击 - 错误的参数验证和 SQL 原子的文本。

# iphone - iOS 应用购买日期

> ID：10982806
> 
> 赞同：13
> 
> 时间：2012-06-11T15:08:57.370
> 
> 标签：iphone, objective-c, ios, in-app-purchase

我正在尝试一种新的市场策略，所以我现在将免费提供我的 0.79 欧元应用程序，并通过应用程序内购买解锁所有内容。我也不想背叛已经购买过的用户，所以我想对已经购买过App的用户进行检查，不需要购买App内支付全部解锁。

我的问题是......我可以查看应用程序何时购买？或者也许有一个简单的方法？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2014-04-16T20:22:17.440

只是为了更新这个，这是可能的。看看这个问题的答案——收据中的一个字段是“原始购买日期”

[在 iOS 7 上本地验证应用内收据和捆绑收据的完整解决方案](https://stackoverflow.com/questions/19943183/a-complete-solution-to-locally-validate-an-in-app-receipts-and-bundle-receipts-o)

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-06-11T15:22:54.087

您无法确定地执行此操作，因为无法检查用户是否购买了该应用程序，因为无法向操作系统询问安装/购买日期。

按照建议，您可以将其保存在 中`NSUserDefaults`，但如果用户删除应用程序，此信息将丢失。

可以将它保存在钥匙串中，如果删除应用程序不会清除，但问题仍然存在，因为如果 iOS 设备恢复，这些设置可能会丢失。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-11T15:30:12.653

rckoenes 的解释是正确的。我最近经历过这种情况，我已经考虑了这里的答案中提到的选项。我最终的选择是发布另一个应用程序扩展（如“pro”或“lite”等），而不是现有应用程序的版本。这将消除处理应用程序购买状态的所有麻烦。然后，您将拥有一个包含所有高级内容的完整付费版本的应用程序和一个包含应用程序内购买的免费版本来解锁内容。希望这会有所帮助。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-11T15:14:48.910

假设您当前版本的应用程序保存状态，在第一次启动应用程序的下一个版本时，您可以检查任何保存的状态（例如，输入的键`NSUserDefaults`、文档目录中的文件等）

你应该只做一次，所以你需要在其他地方有另一个标志来告诉你检查已经执行。

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2012-06-12T14:25:08.707

这应该很简单。如果您知道新应用程序何时上线，您只需检查安装日期/时间（首次运行时将日期/时间存储在钥匙串中）。在免费应用上线日期/时间之前安装应用的用户可以访问内容。如果您担心新用户弄乱日期/时间，请使用在线时间服务来获取实际时间。

# ibm-midrange - 如何确定 CPYFRMIMPF 命令中使用的 CCSID？

> ID：10982810
> 
> 赞同：2
> 
> 时间：2012-06-11T15:09:12.870
> 
> 标签：ibm-midrange

我正在尝试将 IFS 流文件复制到 AS400 数据文件，但使用默认 CCSID 设置，复制的数据最终会变成一些奇怪的字符。在 QSH 下使用 cat 命令可以正确显示流文件的内容，所以我怀疑这与 CCSID 有关。我的问题是如何确定在我的情况下使用的正确 CCSID 是什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-11T16:16:15.250

检查源文件和目标文件 CCSID。

来自 qsh的[ls](http://publib.boulder.ibm.com/infocenter/iseries/v7r1m0/topic/rzahz/rzahzls.htm)`-S`选项将识别 IFS 文件 CCSID。

`DSPFD`将显示库文件属性。

如果您可以`cat`找到该文件，则问题很可能是目标文件 CCSID。对于 EBCDIC ，最常见的库文件 CCSID 是**37 。**

您可以使用 . 检查系统默认 CCSID `DSPSYSVAL QCCSID`。

该`CPYFRMIMPF`命令将根据 IFS 文件 CCSID 和库文件 CCSID 转换字符数据。 `CRTPF`默认为作业 CCSID（继承自系统 CCSID）。

# java - 如何隐藏显示标签中的行？

> ID：10982812
> 
> 赞同：2
> 
> 时间：2012-06-11T15:09:18.113
> 
> 标签：java, filter, displaytag

我使用显示标签库（1.1 版）创建了一个表，并用数据库中的值填充它。我不想显示某些行。例如，我只想显示与给定字符串或正则表达式匹配的记录。

从数据库检索的记录：

```
foo
bar
string1
foo2
bar2
string2 
```

给定过滤器：“foo”

预期结果 ：

```
foo
foo2 
```

备注 - 我需要过滤缓存记录列表，我不能将过滤器直接应用于数据库查询。

谢谢您的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-09-10T09:24:50.073

1.  如果您希望过滤器仅在客户端工作，而不需要访问服务器，请尝试使用 JQuery 插件。有很多 JQuery 插件可以对表或结果集进行排序和过滤/搜索。

2.  如果您希望服务器处理该问题，请为`org.displaytag.pagination.PaginatedList`接口编写自定义实现，并添加您自己的过滤器方法，您可以根据您的搜索/排序条件调用该方法。请注意，如果你实现了这个接口，那么你的 List 应该只是 PaginatedList 类型。有关详细信息，请参阅 Interface Spec and [DisplayTag](http://www.displaytag.org/1.2/tut_externalSortAndPage.html)和[Display tag pagination problem](https://stackoverflow.com/questions/3888367/display-tag-pagination-problem)。

# opengl - 使用 OPENGL 或 P3D 库在 Processing.org 中显示复杂矢量文件的 SVG 替代方案

> ID：10982814
> 
> 赞同：2
> 
> 时间：2012-06-11T15:09:24.537
> 
> 标签：opengl, 3d, svg, processing, vector-graphics

我正在尝试使用 OPENGL 或 P3D 库通过 Processing.org 以 3D 显示 SVG 文件。[此处记录](http://processing.org/reference/shape_.html)的问题（以及其他地方：[1](http://processing.org/bugs/bugzilla/947.html)、[2](http://code.google.com/p/processing/issues/detail?id=291)和[不受欢迎的库 hack](http://processing.org/discourse/beta/num_1189397082.html)）是这些渲染器不支持复杂的形状（那些有孔或复杂中断的）。

是否有图形的 SVG 替代品，或者我可以使用的其他库？

以下是图像文件和代码示例。第一个图像使用默认渲染器：

![使用默认渲染器](../Images/ce4bc10fb39a98c56c072212b1378b7f.png)

此图像使用 OPENGL 3D 库。你可以看到它很难重现 SVG 文件。

![使用 OPENGL 3d 渲染器](../Images/b62ba224d3e559a25dbf9a05e1b8ca47.png)

[我已经发布了这个草图的压缩包，](http://owenmundy.com/work/_sketches/opengl_svg_issue.zip)下面有图片和代码。取消注释 OPENGL 行并注释默认行以查看问题。

```
import processing.opengl.*; 

float wh = 0;

void setup() {
  //size(600, 600, OPENGL); // use OPENGL
  size(600, 600); // use default library
  background(255);
  smooth();
}

void draw() {
  wh = random(40, 200);  
  PShape s;
  String file = "gear" + ceil(random(0, 12)) + ".svg";
  s = loadShape(file);
  shape(s, random(-20, width), random(-20, height), wh, wh);
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-17T21:21:04.203

您可以使用与 OPENGL 渲染器配合良好的 Geomerative 库。你可以在那里找到它： [http ://www.ricardmarxer.com/geomerative/](http://www.ricardmarxer.com/geomerative/)

这是您提供的示例，适用于适用于 OPENGL 的 Geomerative：

```
import geomerative.*;
import processing.opengl.*; 

float wh = 0;

void setup() {
    size(600, 600, OPENGL);
    RG.init( this );

    background(255);
    smooth();
}

void draw() {
    wh = random(40, 200);  
    RShape s;
    String file = "gear" + ceil(random(0, 12)) + ".svg";
    s = RG.loadShape(file);

    pushMatrix();
    translate(random(-20, width), random(-20, height));
    s.draw();
    popMatrix();
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-04-30T08:55:33.130

[http://www.hypeframework.org](http://www.hypeframework.org) Hype 框架，skillshare.com 上有一些很酷的教程

# oracle - Jboss 7 和 Spring CLOB 与 Oracle

> ID：10982821
> 
> 赞同：0
> 
> 时间：2012-06-11T15:09:31.980
> 
> 标签：oracle, jboss7.x, spring-jdbc

我在 JBoss 7.1.1 中使用 Spring 3.0.7，并且遇到了 Oracle CLOB 的问题。我的单元测试在容器外通过。但是，我的 maven pom 中缺少一些 JBoss API 类。当我运行时，我收到以下错误....

> 无法初始化 JBossNativeJdbcExtractor，因为 JBoss API 类不可用：java.lang.ClassNotFoundException: ***org.jboss.resource.adapter.jdbc.WrappedConnection***

任何人都知道我需要包含哪些依赖项才能使其正常工作？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-11T18:53:20.987

我让它工作了！我剪切并粘贴了 Spring 3.1.1 代码，并简单地将常量替换为新包，如...

```
...
private static final String WRAPPED_CONNECTION_NAME = "org.jboss.jca.adapters.jdbc.WrappedConnection";
private static final String WRAPPED_STATEMENT_NAME = "org.jboss.jca.adapters.jdbc.WrappedStatement";
private static final String WRAPPED_RESULT_SET_NAME = "org.jboss.jca.adapters.jdbc.WrappedResultSet";
... 
```

然后我包含了一个 jboss-deployment-structure.xml 文件以包含对丢失类的依赖...

```
<jboss-deployment-structure>
 <deployment>
      <!-- need this for Spring CLOB along with my custom JBoss7NativeJdbcExtractor -->     
      <dependencies>
           <module name="org.jboss.ironjacamar.jdbcadapters" />
      </dependencies>        
 </deployment>
</jboss-deployment-structure> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-18T19:36:11.250

你可以看看我们在[oVirt](http://www.ovirt.org)项目中所做的——虽然我们使用 postgreSQL 作为数据库，但我认为它们有同样的问题。但是，请注意我们使用 Spring-jdbc 而不是“普通”的 jdbc 调用。

# jquery - jquery插件中的本地方法和命名空间

> ID：10982825
> 
> 赞同：0
> 
> 时间：2012-06-11T15:09:47.773
> 
> 标签：jquery, variables, jquery-plugins, plugins, private-methods

我创建了一个插件，但想确定我对“本地”函数的作用。

这是我所做的示意图：

```
(function($) {

 var methods = {
     init : function( options ) {

       // CODE ...

       // Call of a local function
       _test( this );

       // CODE .....

     },
     destroy : function( ) {       
         // CODE .....
        _test( this );
         // CODE .....
     }
  };

  function _test( container ) {
       // My code : example :
       $(container).append("<div id='myplugin'></div>");
  }

 $.fn.myplugin = function( method ) {

    if ( methods[method] ) {
      return methods[method].apply( this, Array.prototype.slice.call( arguments, 1 ));
    }
    else if ( typeof method === 'object' || ! method ) {
      return methods.init.apply( this, arguments );
    }
    else {
      $.error( 'Method ' +  method + ' does not exist on jQuery.myplugin' );
    }    

  };

})(jQuery); 
```

如您所见，我没有直接在方法函数中插入代码，而是在其他_函数中。_functions 是否可以被视为插件的本地或私有功能？我没有成功在插件之外调用它们，所以对我来说它们似乎可以被视为私有函数......

我是否总是将我的代码直接放在方法对象的函数中？如何声明将在多个方法中使用的函数？

那么命名空间呢？真不明白。

谢谢 ！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-11T18:00:28.280

由于您要公开方法对象的所有方法，因此该对象的一部分将不是私有的。但是，在另一个函数中声明的任何函数都被限定在声明函数的范围内，因此如果您不以其他方式使该函数可访问，那么它将是私有的。

# android - 在 tablerow 之间插入新行

> ID：10982831
> 
> 赞同：0
> 
> 时间：2012-06-11T15:10:14.073
> 
> 标签：android, android-layout

我正在为我的应用程序使用 tableLayout，并且我使用 addView 在底部添加新的 tablerow，但是当我想在第一行和第二行之间插入一行时，我必须删除所有这些并重新添加视图，谁能给我一个更好的选择？

===============
**第 1 行**

```
 <---Insert a row here. 
```

**第 2 行**

================

**第 3 行**

================

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-11T15:13:27.310

尝试在底部创建一个新单元格，然后（不是删除，而是）重新分配它们。

新行 N = 新 N-1 新行 N-1 = 新 N-2

ETC...

完成向下复制当前行后，您可以创建新行并将其分配给您（基本上）释放的行号。

# c# - C# Automapper 在 Null 时忽略属性

> ID：10982838
> 
> 赞同：5
> 
> 时间：2012-06-11T15:10:54.447
> 
> 标签：c#, .net, asp.net-mvc, automapper

我正在我的`AccountEditViewModel`（用于编辑用户的视图模型）和我的`User`（表示数据库中的用户的数据模型）之间创建一个 Automapper 映射。如果填写了密码字段，我想加密该密码并存储它，但是如果它在我想保留旧密码中为空。我已经尝试过下面的代码，但是它是错误的，model.Ignore() 不返回字符串值。解决此问题的最佳方法是什么。我可以使用该`ForMember()`方法完成此操作，还是需要自定义解析器？

```
Mapper.CreateMap<AccountEditViewModel, User>()
                .ForMember(model => model.Password, model => model.MapFrom(user => user.Password != null ? EncryptPassword(user.Password) : model.Ignore())); 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-06-11T15:18:11.913

试试这个：

```
Mapper.CreateMap<AccountEditViewModel, User>()
.ForMember(model => model.Password, model => model.Ignore()) 
.AfterMap((src, dst) =>
                    {
                        if (src.Password != null)
                            dst.Password= EncryptPassword(src.Password);

                    }); 
```

# html - 看起来像盾牌的 Unicode dingbat 字符

> ID：10982850
> 
> 赞同：0
> 
> 时间：2012-06-11T15:11:34.050
> 
> 标签：html, unicode

我需要显示一个视觉提示以及用户名，以表明该用户是管理员（例如，SO 版主的用户名旁边有一个菱形）。我在 Google 上搜索“管理员图标”以获得一些灵感，并决定显示一个“盾牌”字符（您在 Windows 7 中看到的那个表示该操作需要管理员权限）。

我不打算使用图像。这个有 ASCII/Unicode 字符吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-11T15:31:25.553

我检查了 Notepad++ 字符面板，发现最接近盾牌的是：ø（ASCII 代码 248），或者更大的版本：Ø（ASCII 代码 216）。除此之外，我发现了几种包含多个 ASCII 字符的设计，例如：

[http://www.ascii-art.de/ascii/s/shield.txt](http://www.ascii-art.de/ascii/s/shield.txt)

[http://www.geocities.com/spunk1111/mythical.htm#shield2](http://www.geocities.com/spunk1111/mythical.htm#shield2)

[http://www.retrojunkie.com/asciiart/weapons/shields.txt](http://www.retrojunkie.com/asciiart/weapons/shields.txt)

但我想这些对你来说不会很有用。那是我最好的选择。[无论如何，您可以在http://www.ascii.cl/htmlcodes.htm](http://www.ascii.cl/htmlcodes.htm)查看完整的 ASCII 参考

编辑：我找到了您可能喜欢的 unicode 符号：[http ://www.fileformat.info/info/unicode/char/26e8/index.htm](http://www.fileformat.info/info/unicode/char/26e8/index.htm)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-12T19:38:34.853

也许☗，用 css 变换倒置旋转？

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-01-22T15:34:16.460

⛉ 9929 ⛉ 26C9 变成白色将棋

⛊ 9930 ⛊ 26CA 转黑棋

[黑盾](http://www.fileformat.info/info/unicode/char/26ca/index.htm)

[白盾](http://www.fileformat.info/info/unicode/char/26c9/index.htm)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-22T23:47:52.857

大声笑，dingbat 字符是什么样子的？.. 使用普通的 ASCII 怎么样，比如 (A) = 管理员，(U) = 用户等？.. 或者使用尖 (#) 来表示管理员和美元 ($)对于用户，就像显示 Linux 命令提示符一样？

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2020-09-10T23:34:20.863

自从提出这个问题以来的这些年里，Unicode 已经更新了很多次。现在有官方的盾牌字形：

# ⛨ = [U+26E8](https://www.compart.com/en/unicode/U+26E8)盾牌上的黑色十字

# = [U+1F6E1](https://www.compart.com/en/unicode/U+1F6E1)盾牌表情符号

# ️ = 也[屏蔽表情符号](https://emojiterra.com/shield/)

（带有我不理解的修饰符）

# objective-c - 不在模拟器上运行时显示为损坏符号的变音符号

> ID：10982854
> 
> 赞同：2
> 
> 时间：2012-06-11T15:11:46.400
> 
> 标签：objective-c, ios, xcode, mobile

我很难弄清楚这一点，我正在使用 NSStrings 参数的方法中构建 SQL 请求。一个这样的参数可以有变音符号（àéèç...等），但是当我使用实际的Iphone进行测试时它们显示为损坏的符号（在模拟器中很好......这就是我无法弄清楚的原因）。例如，在我的 SQL 语句中，我可以有类似的东西`WHERE table.column = 'Carouge √† √©paulettes'`，它真的应该是“Carouge à épaulettes”。

像这样用 NSLog 输出一些东西：

```
NSLog(@"Carouge à épaulettes"); 
```

仍然在输出控制台中显示损坏的字符（模拟器除外）。

`NSString`s也有同样的问题：

```
NSString *diacriticString = @"Carouge à épaulettes";
NSLog(@"%@",diacriticString); 
```

我也尝试过一个空项目，看看它是否可能是一些自定义设置，但这也不起作用。

如果有人有建议，将不胜感激。

更新：进一步检查 SQL 构造正确，该错误只是控制台输出问题。不过，如果有人想解决它，我真的很想了解为什么会发生这种情况。

# php - 从单个数组或集合中检索 mysql 条目

> ID：10982855
> 
> 赞同：-1
> 
> 时间：2012-06-11T15:11:52.737
> 
> 标签：php, mysql, sql, database

我做了以下 sql 查询

```
$dates = mysql_query("SELECT DISTINCT `saledate` FROM `phoneappdetail`"); 
```

现在我想像这样在数组中回显结果。

```
$dates[0] 
```

我不想使用 while 语句，所以我可以使用 $date[1]、$date[2] 等。在页面的不同位置。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-11T15:17:42.250

您需要转而执行此操作并在一条记录中读取所有日期

使用while循环将它们读入一个数组，然后引用它会容易得多。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-11T15:20:41.687

您仍然必须使用 while 循环来遍历结果，因为 mysql_query 返回的是资源而不是数组。

```
function getResultArray() {
    $result_array =  array();
    $result_set = mysql_query("SELECT DISTINCT `saledate` FROM `phoneappdetail`");

    while ( $row = mysql_fetch_array($result_set) ) {
        $result_array[] = $row;
    }

    return $result_array;
}

$date = getResultArray();
echo $date[0]['saledate']; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-11T15:16:26.040

查看 mysqli_fetch_array() 函数

[http://www.php.net/manual/en/mysqli-result.fetch-array.php](http://www.php.net/manual/en/mysqli-result.fetch-array.php)

# php - PHP：使用 DOM 或 REGEX 以非侵入方式填写表单输入

> ID：10982856
> 
> 赞同：3
> 
> 时间：2012-06-11T15:12:02.340
> 
> 标签：php, regex, forms, dom

我正在开发用户身份验证系统。因为我希望它尽可能地可定制和灵活，所以我不想将 PHP 与 HTML 混合使用。我开发了一个简单的模板引擎，它工作得很好（仅使用纯 HTML 文件进行布局）。但是我对表格有疑问。在某些情况下（例如输入验证失败时），我想让他们记住之前输入的数据。我使用输出缓冲向用户显示最终的 HTML，因此我将整个布局存储在一个字符串中。我试图在这个字符串中做的是找到特定的 HTML 元素（通过它们的 ID 属性），然后更改它们的值。我知道如何解决文本或密码字段的问题，但我也会使用组合框，并且需要以不同方式处理。我正在考虑使用 DOM 来完成任务，

所以这就是我想要做的：

1.  使用 DOM 在字符串中通过其 ID 查找元素 更改元素 适当地将旧元素替换为字符串中的新元素，但保持字符串的其余部分不变

这是一个简单的（不工作的）片段（应该足以说明问题）：

```
<?php
$content = "<input id=\"id\" name=\"name\" type=\"text\" value=\"\" />";
$itemid = "id";
$dom = new DOMDocument();
$dom->loadXML($content);
$item = $dom->getElementById($itemid);
if($item)
{
$value = "New Value";
$newitem = $item;
$newitem->setAttribute('value', $value);
$item = $item->saveXML();
$newitem = $newitem->saveXML();
$content = str_replace($item, $newitem, $content);
}
echo $content;
?> 
```

或者我应该改用 REGEX 吗？

非常感谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-11T15:37:26.760

不，正则表达式。DOM 是正确的选择。但是，您的实现可能不正确。IIRC，代码应如下所示：

```
 if ($item) {
        $value = "New Value";
        $item->removeAttribute('value');
        $item->setAttribute('value', $value);
        $content = $dom->saveXML();
    } 
```

此外，您的代码可能需要针对 和 等元素进行额外的`<textarea>`调整`<select>`。

尽管这可能不适用于您实现系统的方式，但我还是建议您使用 jQuery。使用 PHP [`json_encode()`](http://php.net/manual/en/function.json-encode.php)，您可以将 PHP 变量“导入”到客户端代码中。然后，导入您的值后，您可以使用 jQuery 的 DOM，尤其是[`val()`](http://api.jquery.com/val/)，它智能地在表单元素上设置人类的“值”概念，因此您不必自己定制逻辑。如果您想对此选项进行更多说明，请发表评论，我相信我或其他人会很乐意指导您朝这个方向发展。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-11T15:50:00.073

更简单的代码版本：

```
<?php
$content = <<<HTML
<input id="id" name="name" type="text" value="" />
HTML;

$item_ID = "id";
$dom     = new DOMDocument();
$dom->loadHTML($content);
$item = $dom->getElementById($item_ID);
$item->setAttribute("value", "New Value");
$content = $dom->saveHTML();
echo $content; 
```

## 积分

*   如果您输入和输出 HTML，请使用`saveHTML`和 `loadHTML`方法，而不是 XML 方法。
*   `DOMDocument`已经为您完成了替换工作，因此您不需要。
*   对于 HTML 字符串，我喜欢使用**[heredoc 语法](http://il.php.net/manual/en/language.types.string.php#language.types.string.syntax.heredoc)**

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-11T17:17:21.300

这可以通过[Simple dom html parser](http://simplehtmldom.sourceforge.net/)轻松完成。

```
$data = $content = "<input id=\"id\" name=\"name\" type=\"text\" value=\"\" />";
$html = str_get_html($data);
$html->find("input[id='id']",0)->value = "New Value";
echo $html->save(); 
```

再简单不过了。

# android - android中的android-amazing-listview onclick事件问题

> ID：10982858
> 
> 赞同：0
> 
> 时间：2012-06-11T15:12:04.787
> 
> 标签：android, onclick, android-listview

我在我的 android 应用程序中使用 android-amazing-listview，我想在用户单击列表视图中的项目时显示一些详细信息。但问题是当我在项目上设置点击侦听器时，它也会将标题部分作为项目进行侦听。下面是我的代码，你也可以看看 XML 文件。

```
 @Override
    public View getAmazingView(int position, View convertView, ViewGroup parent) {
        View res = convertView;
        if (res == null) res = getLayoutInflater().inflate(R.layout.menu_item, null);

        TextView lName = (TextView) res.findViewById(R.id.lName);
        TextView lYear = (TextView) res.findViewById(R.id.lYear);

        LinearLayout item = (LinearLayout) res.findViewById(R.id.item);

        Items composer = getItem(position);
        lName.setText(composer.title);
        lYear.setText(composer.summary);

        // here I set my click listener just for the item
        item.setOnClickListener(new OnClickListener() {

            @Override
            public void onClick(View v) {
                Toast.makeText(context, "OnClick event !!!", Toast.LENGTH_LONG).show();
            }
        });

        return res;
    } 
```

这是项目的 XML。

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android" 
android:orientation="vertical" 
android:layout_width="fill_parent" 
android:layout_height="fill_parent"
android:background="@drawable/menu_item" >
<include
    layout="@layout/menu_header"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content" />
<LinearLayout
    android:id="@+id/item" 
    android:layout_height="wrap_content" 
    android:layout_width="fill_parent" 
    android:orientation="vertical" 
    android:padding="6dp"
    android:clickable="true" >
    <TextView 
        android:textStyle="bold"
        android:textAppearance="?android:attr/textAppearanceLarge"
        android:layout_height="wrap_content" 
        android:layout_width="wrap_content" 
        android:id="@+id/lName" />
    <TextView 
        android:layout_height="wrap_content" 
        android:layout_width="wrap_content"
        android:textAppearance="?android:attr/textAppearanceSmall"
        android:id="@+id/lYear" />
</LinearLayout> 
```

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-11T15:22:29.567

`setOnClickListener`您需要`setOnItemClickListener`在实际上使用，而不是在每个项目上使用`ListView`：

```
listView.setOnItemClickListener(new OnItemClickListener() {
    public void onItemClick(AdapterView<?> parent, View view, int position, long id) {

        if(view.getTag() != NULL) {
            //deal with click on item at position "position"
        }

    }
}); 
```

并删除您将侦听器附加到单个项目的代码。

**编辑**现在，我又查看了 AmazingListView 文档，我意识到您需要更多。当您在 中创建视图时`getAmazingView`，将标签设置为**1**，然后再返回要支持项目单击的每个项目的视图。当您在视图中创建子标题或其他未启用项目单击的元素时，请将它们的标记设置为`null`. 然后在处理点击之前检查标签（参见上面代码中的更新）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-18T07:28:08.247

我终于弄清楚了单击该项目时标题也被单击的原因。

原因是我使用 AmazingListView。所以根据这个库标题和项目是列表的相同项目。当标题到达列表视图的顶部时，将绘制标题的副本以将其固定到列表的顶部。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-06-11T15:25:21.200

在这里，您在适配器类中为项目添加 Click 侦听。它只对一个项目采取行动（我没有经过测试）。如果您想在一个中添加点击侦听器，那么最好在列表视图中添加点击侦听器。

请查看[链接](http://www.vogella.com/articles/AndroidListView/article.html)。这是列表视图示例。

谢谢

# mongodb - mongodb是否支持基于id的multiget？

> ID：10982862
> 
> 赞同：1
> 
> 时间：2012-06-11T15:12:17.733
> 
> 标签：mongodb

如何使用它们的 _id 查询多个文档

即，如果我在某个集合中有一组文档 id，我如何在一次操作中一次获取所有这些文档

我可以使用类似的东西：

```
db.collection.find({_id:[id1,id2,id3]}) 
```

然后mongodb返回id为id1、id2、id3的3个文档

这可能吗？如果可以，确切的语法或方法是什么，是否有任何建议或预防措施需要考虑？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-11T15:18:09.720

对的，这是可能的。正确的语法是：

```
db.collection.find({ _id : { $in : [id1, id2, id3] } ) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-11T15:17:31.797

`$in`正如MongoDB[文档](http://ru.wiki.mongodb.org/display/DOCS/Advanced+Queries#AdvancedQueries-%24in)所说，只需使用运算符：

```
db.collection.find( { field : { $in : array } } ); 
```

# android - Android：IllegalStateException：无法执行活动的方法

> ID：10982864
> 
> 赞同：0
> 
> 时间：2012-06-11T15:12:23.327
> 
> 标签：android, button, error-handling, logcat

我在计算机上有一个 Java (Android) 项目，当我在我的设备上运行它时，它运行得非常好。

在那之后，我不得不将该项目移动到另一台计算机上：相同的文件，相同的东西，任何修改过的东西。但是现在，当它运行时，我收到了这个错误：“FATAL EXCEPTION: main, java.lang.IllegalStateException: could not execute method of the Activity”

当我按下调用 onClick 方法的按钮时出现错误。如果我不按下那个按钮，一切都会顺利。

这是我的 LogCat

```
06-11 17:03:26.881: E/AndroidRuntime(15278): FATAL EXCEPTION: main
06-11 17:03:26.881: E/AndroidRuntime(15278): java.lang.IllegalStateException: Could not execute method of the activity
06-11 17:03:26.881: E/AndroidRuntime(15278):    at android.view.View$1.onClick(View.java:3044)
06-11 17:03:26.881: E/AndroidRuntime(15278):    at android.view.View.performClick(View.java:3511)
06-11 17:03:26.881: E/AndroidRuntime(15278):    at android.view.View$PerformClick.run(View.java:14105)
06-11 17:03:26.881: E/AndroidRuntime(15278):    at android.os.Handler.handleCallback(Handler.java:605)
06-11 17:03:26.881: E/AndroidRuntime(15278):    at android.os.Handler.dispatchMessage(Handler.java:92)
06-11 17:03:26.881: E/AndroidRuntime(15278):    at android.os.Looper.loop(Looper.java:137)
06-11 17:03:26.881: E/AndroidRuntime(15278):    at android.app.ActivityThread.main(ActivityThread.java:4424)
06-11 17:03:26.881: E/AndroidRuntime(15278):    at java.lang.reflect.Method.invokeNative(Native Method)
06-11 17:03:26.881: E/AndroidRuntime(15278):    at java.lang.reflect.Method.invoke(Method.java:511)
06-11 17:03:26.881: E/AndroidRuntime(15278):    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:787)
06-11 17:03:26.881: E/AndroidRuntime(15278):    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:554)
06-11 17:03:26.881: E/AndroidRuntime(15278):    at dalvik.system.NativeStart.main(Native Method)
06-11 17:03:26.881: E/AndroidRuntime(15278): Caused by: java.lang.reflect.InvocationTargetException
06-11 17:03:26.881: E/AndroidRuntime(15278):    at java.lang.reflect.Method.invokeNative(Native Method)
06-11 17:03:26.881: E/AndroidRuntime(15278):    at java.lang.reflect.Method.invoke(Method.java:511)
06-11 17:03:26.881: E/AndroidRuntime(15278):    at android.view.View$1.onClick(View.java:3039)
06-11 17:03:26.881: E/AndroidRuntime(15278):    ... 11 more
06-11 17:03:26.881: E/AndroidRuntime(15278): Caused by: java.lang.NoClassDefFoundError: com.google.gson.GsonBuilder
06-11 17:03:26.881: E/AndroidRuntime(15278):    at iv.AppInditta.DbWorker.NewServerGetActivityTypes(DbWorker.java:3076)
06-11 17:03:26.881: E/AndroidRuntime(15278):    at iv.AppInditta.InDitta.faseuno(InDitta.java:641)
06-11 17:03:26.881: E/AndroidRuntime(15278):    ... 14 more` 
```

有谁知道如何解决这个运行时错误？这不可能是代码错误，我很确定，因为前一台计算机上的相同代码运行良好......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-13T09:29:07.727

经过长时间的搜索，我在论坛上查看了解决方案，

问题是通过对我拥有的库（在我的情况下是 gson）的引用给出的，这是不正确的。我以错误的方式将库添加到我的项目中。我在项目中用于实现库的过程是：

1.  右键单击Eclipse中的项目
2.  构建路径 > 配置构建路径...
3.  在库部分中，单击添加外部 JAR...
4.  在电脑中浏览，找到我要导入的库，点击确定并导入。

但是这个程序是不正确的！！！！

为了添加一个库并使其对项目可用（和工作）**正确的程序是**：

1.  在您的 Eclipse/Android 工作区项目中创建一个名为“libs”的新文件夹（如果您使用的是 Windows 操作系统，则可以在 Windows 资源管理器中创建）。
2.  在 Eclipse 中，右键单击项目并选择“刷新”，这将刷新您的项目并添加“libs”文件夹
3.  右键单击“libs”文件夹，选择“导入”>“常规”>“文件系统”。单击下一步，然后在您的电脑中浏览以找到要添加的库的父文件夹（注意选择库的父文件夹，而不是 library.jar），然后单击确定
4.  单击库的目录名称（显示在左侧面板中）-不是复选框-
5.  在右侧面板上将显示该文件夹中的 JAR 文件列表，选中您要安装的文件的复选框，然后单击完成（此操作会将库添加到您的项目中，现在您必须使其可用于项目代码）
6.  右键单击您的项目，选择构建路径 > 配置构建路径...
7.  在库选项卡中单击添加 JAR...，浏览您的项目并在您的 libs 文件夹中找到库，添加它。

现在该库可用并适用于您的项目。

这些步骤对我有用，如果您遇到同样的问题，我希望它们甚至对您也有用。

再见 ;）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-11T15:17:12.017

这似乎是问题所在：

```
Caused by: java.lang.NoClassDefFoundError: com.google.gson.GsonBuilder 
```

所以我的猜测是你错过了 gson 库。或者，如果您在 Eclipse 中工作，请尝试对项目进行“清理”（项目 -> 清理）

# mysql - MySQL：有什么办法可以减少创建这么多视图

> ID：10982870
> 
> 赞同：1
> 
> 时间：2012-06-11T15:12:48.903
> 
> 标签：mysql, performance, oracle, query-optimization

我有三个这样的表：

表1结构：
名称：registered_applicant_details
字段：application_id INT PRIMARY_KEY，state_id INT；

表2结构：
名称：oc_shortlisted_candidates
字段：candidate_id；>>> 哪个是外键，指的是registered_applicant_details中的applicant_id

表3结构：
名称：oc_selected_candidates
字段：candidate_id；>>> 哪个是外键，指的是registered_applicant_details中的applicant_id

我想要这样的结果集：state_wise_counts

```
state_id | shortlisted_count | selected_counts 
```

* * *

我得到结果的方法是

第 1 步：我创建了两个这样的视图

```
CREATE VIEW  state_wise_shortlisted_count AS 
    (select rad.state_id AS state_id,
             count(0) AS shortlisted 
      from (oc_shortlisted_candidates oec 
             join registered_applicant_details rad) 
      where (oec.candidate_id = rad.applicant_id) 
      group by rad.state_id);

CREATE VIEW state_wise_selected_count AS 
      (select rad.state_id AS state_id,
               count(0) AS selected 
      from (oc_selected_candidates oec 
            join registered_applicant_details rad)
      where (oec.candidate_id = rad.applicant_id) 
      group by rad.state_id); 
```

第 2 步：现在再次使用 state_id 加入这两个视图

```
SELECT s.state_id, sho.shortlisted, sel.selected
FROM statewise_shortlisted_count sho
JOIN statewise_selected_count sel ON sel.state_id = sho.state_id; 
```

## 我的方法的缺点

由于我们有两个外部表，即 (shortlisted_candidates & selected_candidates) 我正在创建两个视图，但如果我们有这样的 10 个表意味着，我需要创建 10 个视图。
因此，对于“state_wise counts”，我们需要创建 10 个视图，如果存在更多属性，即“city”并且如果我们再次想要“city_wise_counts”，我需要再创建 10 个视图。
我认为这不是正确的方法。

请建议我正确的解决方案。
注意：我不想使用子查询，因为这些表有大约 10,000 条记录，我需要减少来自应用程序的 db 调用次数

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-11T15:48:07.383

不知道你对子查询的性能是什么意思。对于投影中的每个计数，您当前的代码都会从 RAD 表中读取一次。子查询怎么会更糟？

尝试这样的事情：

```
select rad.state_id AS state_id
         ,  sum (case when oslc.candidate_id is not null then 1 else 0 end) AS shortlisted
         ,  sum (case when osec.candidate_id is not null then 1 else 0 end) AS selected
from registered_applicant_details rad
     left outer join oc_shortlisted_candidates oslc 
          on (rad.applicant_id = oslc.candidate_id) 
     left outer join oc_selected_candidates osec  
          on (rad.applicant_id = osec.candidate_id) 
group by rad.state_id; 
```

警告：未经测试的代码！

# google-apps-script - 在一定数量的段落之后插入分页符

> ID：10982871
> 
> 赞同：1
> 
> 时间：2012-06-11T15:12:57.723
> 
> 标签：google-apps-script

我编写了一个脚本，该脚本根据电子表格中的数据生成一个段落，它为每一行数据添加一个新段落。我的问题是某些段落在页面之间拆分，我无法弄清楚如何在段落的 6 个实例之后自动插入分页符（实际上第一页是 5 个，之后每页 6 个）。

```
function worksheetGen () {
  var templateDocID = ScriptProperties.getProperty("listTemplateDocID");
  var docID = DocsList.getFileById(templateDocID).makeCopy().getId();
  var doc = DocumentApp.openById(docID);
  var sheet = SpreadsheetApp.getActiveSpreadsheet().getActiveSheet();
  var activeSheetName = sheet.getName();
  var user = Session.getUser().getEmail();
  if (sheet != null) {
    var lastRow = sheet.getLastRow();
    var lastColumn = sheet.getLastColumn();
    var lastACell = sheet.getRange("A"+lastRow);
    Logger.log("Last Column: " + lastColumn + "    Last A Cell: " + lastACell)
      for (var q = 0; q < lastRow; ++q){
        var firstName = sheet.getRange(q+2,3).getValue();
        var lastName = sheet.getRange(q+2,4).getValue();
        var include = sheet.getRange(q+2,1).getValue();
        var dispo1 = "Request Left With Dr.";
        var dispo2 = "Needs Appointment";
        var dispo3 = "Prescription Received";
        var dispo4 = "Prescription Denied";
        var notes = "Notes:";
        if (firstName != null && include == "Y") {
          var nameSet = firstName + " " + lastName + ":          ";
          var dispoSet = "| " + dispo1 + " | " + dispo2 + " | " + dispo3 + " | " + dispo4 + " |";
          var cells = [[nameSet, dispoSet]];
          var table = doc.appendTable(cells);
          table.setBorderWidth(0).setColumnWidth(1, 334);
          var cell2 = table.getCell(0, 1).getChild(0).asParagraph();
          cell2.setAlignment(DocumentApp.HorizontalAlignment.RIGHT).setFontSize(8);
          var content2 = doc.appendParagraph(notes);
          var divider = doc.appendHorizontalRule();
        }
      }
  }
  doc.addFooter().appendParagraph(activeSheetName + " -- " + new Date());
  doc.setName(activeSheetName + " - " + Utilities.formatDate(new Date(), "MDT", "MM/dd/yy"));
  doc.addEditor(user);
  doc.addEditor("ecaldwell@kmrmedical.com");
} 
```

我尝试了一个 if 语句来检查**q**是否等于 5 或​​之后的倍数，但我一定做错了。我确信这是一个简单的修复，但我对此很陌生，所以任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-11T16:53:40.377

在 var divider = doc 下面试试这个...

```
 if(q==5||(q>6&&q/6==parseInt(q/6))){doc.appendPageBreak()} 
```

# c++ - 防止更改作为指针返回的对象

> ID：10982874
> 
> 赞同：2
> 
> 时间：2012-06-11T15:13:02.897
> 
> 标签：c++, constants

我有一个返回指向对象的指针的函数。像这样：

```
class SomeClass
{
public:
    Object* getObject() const { return &obj; };
private:
    Object obj;
} 
```

问题是我没有调用函数来更改返回的对象，它可能会调用在内部对其进行操作的函数，但不要更改 SomeClass 中的*obj* ......一个例子可能更容易理解：

- 如果函数返回指向 const 对象`const Object* getObject() const`的指针，则调用函数将无法使用该对象的非 const 方法（但我希望它们能够使用）。

- 如果我只是返回指针，调用函数可能会更改对象：

```
Object* pointer = sclass.getObject();
*pointer = Object(); 
```

*所以sclass*中的 Object现在是一个不同的对象（我不想发生这种情况）。

有解决方法吗？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-06-11T15:16:26.837

**tl;博士版本：**返回一个`const Object *`.

> 如果函数返回指向 const 对象`const Object* getObject() const`的指针，则调用函数将无法使用该对象的非 const 方法（但我希望它们能够使用）。

但这就是正确性的全部意义所在`const`！任何`Object`不修改对象的可观察状态的方法都应该被声明`const`。如果您对此保持一致，那么您的问题应该会消失。如果您**对此**不一致，那么整个事情就会崩溃（这可能是您的问题的原因！）。

显然，您不能对`const`通过抛弃 的`const`-ness 来颠覆事物的方法做任何事情`this`，但这始终是个问题。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-11T15:17:03.233

如果您不希望用户能够修改对象，请返回指向 const 对象的指针。

假设您的对象是 const 正确的，这意味着他们将能够做任何不修改对象的事情/所有事情。如果不是这种情况，那么您想修复 const 正确性问题，使其成为这种情况（例如，所有不修改对象的成员函数都被标记`const`）。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-11T15:26:13.530

正如上面其他几个人所指出的，如果对象 API 不强制执行 const 正确性，则您无法阻止客户端函数对其进行修改。到目前为止，具有理想的面向对象设计。

唯一的*解决方法*（我自己不会这样做）可能是从 getObject() 方法中返回对象的副本。

```
Object* getObject() const { Object* o = new o(obj); return o; }; 
```

但这会带来不必要的头痛，例如您必须处理删除等问题。但是，它符合您不修改原始 obj 变量的要求。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-12T00:51:52.560

我刚刚意识到你也可以吃蛋糕……前提是你可以控制`Object`类的实现。

`operator=()`在您的特定示例中，如果为 禁用赋值运算符 ( ) `Object`，则表达式

```
*pointer = Object(); 
```

变为无效。

*注意*：当然，这个决定的影响不仅仅是`SomeClass::getObject()`：代码的任何其他部分都不能将`Object`s 的实例相互分配。你必须决定这个限制是否值得你

*注意*：要禁用`operator=`，请将其声明为`private`（并且不需要实现）：

```
class Object
{
  // ... current member declarations/definitions
  private:
    Object& operator=(const Object&); // no implementation
}; 
```

# text - 使用 sed 仅更改连续重复的字母，一般情况

> ID：10982876
> 
> 赞同：0
> 
> 时间：2012-06-11T15:13:06.807
> 
> 标签：text, sed

在[这个问题](https://stackoverflow.com/questions/10899545/using-sed-to-change-only-consecutive-repeated-letters)中，我询问了如何做到这一点，但大写的特殊情况导致了一个也是特殊情况的解决方案，因为它允许使用`/u`. 所以在这里我问得更笼统。我发现我必须在不同的情况下使用它，而不仅仅是大写。

使用`sed`，如何将字母“a”更改为“cool”，但前提是它以两个或多个连续字母重复出现。示例，来自：

```
galaxy
ear
aardvak
Haaaaaaaaa 
```

进入

```
galaxy
ear
coolcoolrdvak
Hcoolcoolcoolcoolcoolcoolcoolcoolcool 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-11T15:45:34.617

删除的答案几乎解决了它：

```
sed 's/aa/coolcool/g; s/coola/coolcool/' 
```

如果一个人不知道要替换的字母，它就会变得更具挑战性。我只能想出相当可怕和自我重复的

```
sed '/\([[:alpha:]]\)\1/ {h; s/.*\([[:alpha:]]\)\1.*/\1/; x; s/\([[:alpha:]]\)\1/coolcool/g; G; s/cool\(.\)\(.*\)\n\1/coolcool\2/; s/\n.*//}' 
```

这改变了

```
galaxy
ear
bbrdvak
Haaaaaaaaa 
```

（注意第三个词）

```
galaxy
ear
coolcoolrdvak
Hcoolcoolcoolcoolcoolcoolcoolcoolcool 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-11T15:23:34.930

```
sed -r 's;aa;coola;g;s;aa;cool;g;s;coola;coolcool;g' inputFile 
```

一般来说，

### 重击

```
l='a' #search string
r='cool' #replacement string
sed -r "s;$l$l;$r$l;g;s;$l$l;$r;g;s;$r$l;$r$r;g" inputFile 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-11T22:19:09.800

这可能对您有用：

```
sed ':a;s/\(a\|cool\)a/coolcool/g;ta' file 
```

或更一般地说：

```
sed ':a;s/\(a\|\n\)a/\n\n/g;ta;s/\n/cool/g' file 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-11T23:12:48.067

列夫的例子是对的。约翰王子给出了一般情况，但把公式弄错了，而且还多了一步。

经过一些测试和思考，合并我们得到的两者：

```
l='a'    #search string
r='cool' #replacement string
sed "s,$l$l,$r$r,g ; s,$r$l,$r$r,g," inputFile 
```

测试它并告诉我，它对我有用。

# php - Mysqli 导致登录表单根本不起作用

> ID：10982877
> 
> 赞同：0
> 
> 时间：2012-06-11T15:13:10.723
> 
> 标签：php, mysqli

我的登录表单有一点问题。我认为问题在于 mysqli 代码，因为当代码是旧的 mysql 代码时，登录可以正常工作，但是自从我将其更改为 mysqli 后，它就不能正常工作了。

假设发生的是用户将在登录表单中输入他们的用户名和密码，当用户单击“登录”按钮时，如果用户名和密码正确，它将检查数据库。如果正确，则导航到 menu.php 页面，否则如果登录不正确，则显示一条消息，指出登录不正确，然后重试。

相反，下面的代码正在做的是，当用户输入他们的用户名和密码并单击“登录”按钮时，无论用户名和密码是否正确，它都会刷新来自，它不会导航到菜单。 php 页面或显示登录错误消息。

所以我的问题是为什么会发生这种情况，为什么登录后它不导航用户或显示不正确的登录消息？

代码已更新以显示当前代码：

```
<?php

ini_set('display_errors',1); 
 error_reporting(E_ALL);

    // PHP code
    session_start(); 

    $username="xxx";
    $password="xxx";
    $database="mobile_app";

    $mysqli = new mysqli("localhost", $username, $password, $database)or die( "Unable to select database");

    foreach (array('teacherusername','teacherpassword') as $varname) {
            $$varname = (isset($_POST[$varname])) ? $_POST[$varname] : '';
          }

    // move this outside the condiitonal
    $loged = false;

    if (isset($_POST['submit'])) {

    $query = $mysqli->prepare("
    SELECT * FROM Teacher t  
    WHERE 
    (t.TeacherUsername=?)
    AND
    (t.TeacherPassword=?)
    ");

   $stmt=$mysqli->prepare($query);
   $stmt->bind_param("s",$teacherusername);
   $stmt->bind_param("s",$teacherpassword);

   $stmt->execute(); 

   $stmt->bind_result($TeacherId,$TeacherForename,$TeacherSurname,$TeacherUsername,$TeacherPassword);

    while($row=$stmt->fetch())
      {

          if ($_POST['teacherusername'] == ($row['TeacherUsername']) && $_POST['teacherpassword'] == ($row['TeacherPassword']))
          {
              $loged = true;
          }

$_SESSION['teacherforename'] = $row['TeacherForename'];
$_SESSION['teachersurname'] = $row['TeacherSurname'];
$_SESSION['teacherusername'] = $row['TeacherUsername'];

      }

      if ($loged == true){
      header( 'Location: menu.php' ) ;
    }
    }

     ?>
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<title>Teacher Login </title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<link rel="stylesheet" type="text/css" href="LoginStyle.css">
</head>
<body>
<?php if ($loged == false && $_POST) {
  echo "The Username or Password that you Entered is not Valid. Try Entering it Again.";
  }
?>
<form action="<?php echo htmlentities($_SERVER['PHP_SELF']); ?>" method="post" id="teachLoginForm">        
    <p>Username</p><p><input type="text" name="teacherusername" /></p>      <!-- Enter Teacher Username-->
    <p>Password</p><p><input type="password" name="teacherpassword" /></p>  <!-- Enter Teacher Password--> 
    <p><input id="loginSubmit" type="submit" value="Login" name="submit" /></p>
    </form>

</body>
</html> 
```

更新：

我已打开错误报告，并使用从其中一个答案中检索到的上述代码，它给了我一个警告和一个致命错误，如下所示：

```
Warning: mysqli::prepare() expects parameter 1 to be string, object given in /web/stud/xxx/Mobile_app/teacherlogin.php on line 33

Fatal error: Call to a member function bind_param() on a non-object in /web/stud/xxx/Mobile_app/teacherlogin.php on line 34 
```

这些是什么意思，有没有人知道如何解决它们？我更新了上面的代码以显示当前代码。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-11T19:30:30.523

## 更新/编辑：

根据您的评论，我再次查看了您的 mysqli 代码，并注意到您犯了许多错误（多个 prepare 和 bind_result 语句以及其他一些事情）。我已经更新了下面的代码，它做了一些改进/应该可以解决您的问题。我不太确定您的数据库架构，但是最好实际说明您想要的列，而不是使用 (*)，就好像您将来添加另一列并且不更新代码一样，它会破坏您的mysqli 语句作为 bind_result 将与您的查询不匹配。

```
<?php
  // PHP code
  session_start(); 

  $username="xxx";
  $password="xxx";
  $database="mobile_app";

  $mysqli = new mysqli("localhost", $username, $password, $database);

  /* check connection */
  if (mysqli_connect_errno()) {
    printf("Connect failed: %s\n", mysqli_connect_error());
    die();
  }

  // required variables (make them explciit no need for foreach loop)
  $teacherusername = (isset($_POST['teacherusername'])) ? $_POST['teacherusername'] : '';
  $teacherpassword = (isset($_POST['teacherpassword'])) ? $_POST['teacherpassword'] : '';
  $loggedIn = false;

  if (isset($_POST['submit'])) {

    // don't use $mysqli->prepare here
    $query = "SELECT * FROM Teacher WHERE TeacherUsername = ? AND TeacherPassword = ? LIMIT 1";
    // prepare query
    $stmt=$mysqli->prepare($query);
    // You only need to call bind_param once
    $stmt->bind_param("ss",$teacherusername,$teacherpassword);
    // execute query
    $stmt->execute(); 
    // get result and assign variables (prefix with db)
    $stmt->bind_result($dbTeacherId,$dbTeacherForename,$dbTeacherSurname,$dbTeacherUsername,$dbTeacherPassword);

    while($stmt->fetch()) {
      if ($teacherusername == $dbTeacherUsername && $teacherpassword == $dbTeacherPassword) {
        $loggedIn = true;
      }
    }

    /* close statement */
    $stmt->close();

    /* close connection */
    $mysqli->close();

    if ($loggedIn == true){
      // left your session code as is - but think wisely about using
      // the Username as a session variable (security risk)
      $_SESSION['teacherforename'] = $dbTeacherForename;
      $_SESSION['teachersurname'] = $dbTeacherSurname;
      $_SESSION['teacherusername'] = $dbTeacherUsername;
      header( 'Location: menu.php' ) ;
      die();
    }
  }
?>
<html>
<head></head>
<body>
  <?php if ($loggedIn == false && $_POST) {
    echo "The Username or Password that you Entered is not Valid. Try Entering it Again.";
    }
  ?>
  <form action="<?php echo htmlentities($_SERVER['PHP_SELF']); ?>" method="post" id="teachLoginForm">        
  <p>Username</p><p><input type="text" name="teacherusername" /></p>      <!-- Enter Teacher Username-->
  <p>Password</p><p><input type="password" name="teacherpassword" /></p>  <!-- Enter Teacher Password--> 
  <p><input id="loginSubmit" type="submit" value="Login" name="submit" /></p>
  </form>
</body>
</html> 
```

**更新/编辑：** 注意我已经更改了这个文本，因为它现在没有意义我已经重写了你的大部分代码。如果上述方法不起作用（因为您仍然收到 mysqli 错误），则意味着您的教师表有超过 5 列。

一个重要的 FYI 将是 $mysqli->prepare 和 $stmt->bind_result 语句之间的连接，这些语句需要根据所选列的数量进行匹配。您可以随意命名 bind_result 中的变量，但变量的数量需要与您在 SELECT 语句中选择的列数相匹配，因此为什么显式命名列总是比 (*) 更好。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-11T16:18:17.183

您需要移动 HTML。您在 html 之后有一个输入表单的 IF。如果如下所示，则将 html 添加到 else 中：

```
session_start(); 

$username="xxx";
$password="xxx";
$database="mobile_app";

$mysqli = new mysqli("localhost", $username, $password, $database)or die( "Unable to select database");

foreach (array('teacherusername','teacherpassword') as $varname) {
        $$varname = (isset($_POST[$varname])) ? $_POST[$varname] : '';
      }

if (isset($_POST['submit'])) {

$query = $mysqli->prepare("
SELECT * FROM Teacher t  
WHERE 
(t.TeacherUsername=?)
AND
(t.TeacherPassword=?)
");

$loged = false;

$stmt=$mysqli->prepare($query);
$stmt->bind_param("s",$teacherusername);
$stmt->bind_param("s",$teacherpassword);

$stmt->execute(); 

$stmt->bind_result($TeacherId,$TeacherForename,
                    $TeacherSurname,$TeacherUsername,$TeacherPassword);

while($row=$stmt->fetch())
  {

      if ($_POST['teacherusername'] == ($row['TeacherUsername']) && $_POST['teacherpassword'] == ($row['TeacherPassword']))
      {
          $loged = true;
      }

   $_SESSION['teacherforename'] = $row['TeacherForename'];
   $_SESSION['teachersurname'] = $row['TeacherSurname'];
   $_SESSION['teacherusername'] = $row['TeacherUsername'];

  }

  if ($loged == true){
  header( 'Location: menu.php' ) ;
}else{
  echo "The Username or Password that you Entered is not Valid. Try Entering it Again.";
}

}else{
?>
<form action="<?php echo htmlentities($_SERVER['PHP_SELF']); ?>" method="post" id="teachLoginForm">        
<p>Username</p><p><input type="text" name="teacherusername" /></p>      <!-- Enter Teacher Username-->
<p>Password</p><p><input type="password" name="teacherpassword" /></p>  <!-- Enter Teacher Password--> 
<p><input id="loginSubmit" type="submit" value="Login" name="submit" /></p>
</form>
<?php
}
 ?> 
```

# eclipse - 导出 Eclipse EMF 的 @generated 不在文件中

> ID：10982878
> 
> 赞同：0
> 
> 时间：2012-06-11T15:13:17.257
> 
> 标签：eclipse, eclipse-emf

在我的 eclipse emf 项目中，我有几个`@generated NOT`标签。我认为当我有很多更改时，这会变得非常混乱。

有没有办法将更改放入单独的文件/文件夹中？！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-11T16:17:00.023

一般来说，这是不可能的。EMF 以一种假装所有文件都在正确位置的方式生成其代码。

一般来说，除非真的没有其他办法，否则我不建议更改 EMF 生成的代码，因为它管理起来很麻烦。但是，如果您替换生成的 EFactory 实例，应该可以用它们的后代替换大多数（如果不是全部）对象，这些对象可以放入另一个源文件夹/包中。

作为旁注，也许使用或多或少未开发的（AFAIK）[Eclipse Mint](http://www.google.hu/url?sa=t&rct=j&q=&esrc=s&source=web&cd=1&ved=0CF8QFjAA&url=http://wiki.eclipse.org/Mint&ei=jBnWT7zdB6704QS2pvDQAw&usg=AFQjCNFqOajYVwl10vTHpvH86VEAMnnS9w&sig2=J5O5EoGxEqyMi4znwnVyRQ)会有所帮助，因为它有一个扩展，可以根据生成的代码为 Package Explorer 着色（不是最好的解决方案，但它是一个有帮助的解决方案）。

# php - 将mysql数据推送到数组中

> ID：10982883
> 
> 赞同：0
> 
> 时间：2012-06-11T15:13:35.263
> 
> 标签：php, mysql, arrays

好的，所以我需要将从几个不同的表中获取的数组推送到一个新数组中。我以为这会做到，但事实并非如此。警告说 array_push() 期望参数 1 是一个数组。可能有一些非常简单的事情我做错了，但我对所有这些 PHP 东西都很陌生，所以不知道。我认为参数 1 是一个数组，因为数组是从数据库中获取的。

这是代码：

```
$newsfeed = array("apple");

$news = mysql_query("
SELECT * FROM news
UNION ALL
SELECT * FROM feature ORDER BY timestamp DESC LIMIT 1
")or die(mysql_error());

while($row = mysql_fetch_array($news))
{

    $artist = mysql_query("
    SELECT * FROM members WHERE artist='Y'
    ORDER BY timestamp DESC LIMIT 2
    ")or die(mysql_error());

    while($row1 = mysql_fetch_array($artist))
    {
        array_push($newsfeed, $row['title'], $row1['artistname']);
    }
}
echo($newsfeed); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-11T15:31:10.483

$row['title'] 不是一个数组。它是数组 $row 的一个元素。

如果您想将所有“标题”和“艺术家名”存储到一个数组中，您可以这样做

```
$artists = array();
array_push($artists, $row['title'], $row1['artistname']);
print_r($artists); 
```

* * *

如果你想将'title'和'artistname'分组

```
$artists = array();
$artist_data = array('title' => $row['title'], 'artistname' => $row['artistname'])
array_push($artists, $artist_data);
print_r($artists); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-11T15:15:18.553

查看[array_push](http://php.net/manual/en/function.array-push.php)的文档。第一个参数必须是您要推入的数组的名称。

```
array_push($myArray, $row['title'], $row1['artistname']); 
```

`$myArray`现在将拥有`$row['title']`并`$row1['artistname']`在其中。

您还缺少 while 循环上的大括号。当大括号后面只有一行时，您只能省略大括号。无论如何，戴牙套仍然是个好习惯。

如果你想查看一个数组的值，你应该使用[`print_r`](http://php.net/manual/en/function.print-r.php)而不是`echo`.

如果要打印出数组的元素，则需要遍历它们。然后`echo`，当您只打印数组的一个元素时，您可以使用 , 。您不能将它用于整个数组，否则它只会打印`array`。[`foreach`](http://php.net/manual/en/control-structures.foreach.php)有关如何执行此操作的示例，请参阅文档：

```
$arr = array("one", "two", "three");
foreach ($arr as $value) {
    echo $value;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-11T16:29:59.630

你能做类似的事情。

```
$artists=array();
$artists[ $row['title'] ] = $row1['artistname']; 
```

还是我误解了这个问题？

# php - 允许用户在朋友 Facebook 墙上发布玩 iOS 应用程序的邀请？

> ID：10982887
> 
> 赞同：1
> 
> 时间：2012-06-11T15:13:48.427
> 
> 标签：php, objective-c, ios, facebook

我的 iOS 应用程序允许人们使用 Facebook 登录，并自动检查您的哪些朋友当前已注册为使用该应用程序。您当前未使用该应用程序的所有朋友都在“邀请”列表中，这与 DrawSomething 具有“播放”和“邀请”朋友列表的方式大致相同。

无论您是邀请还是玩，挑战都会存储在数据库中，随时准备好您的朋友登录。

我被困的地方是试图弄清楚我将如何允许用户在他们的朋友墙上发帖。我的 php 代码已经确定它们是否已注册，所以从那里我只需要发布到“朋友 B”的墙上。我做php的时间不是特别长，我发现我在其他地方处理的Facebook代码不像其他sdk等那样不言自明。

我不确定从哪里开始，因为所有的 Facebook“信息收集”，即朋友用户 ID 都是在应用程序本身中完成的。我可以很容易地将它传递给 php 代码，但是我不确定如何使用它来发布到他们的墙上。我假设由于服务器未登录到用户 A 的 Facebook 帐户，因此它需要以某种方式执行此操作，然后才能将其发布到他们朋友的墙上，但我不希望用户必须再次登录才能按顺序去做这个。鉴于 DrawSomething 允许您通过 Facebook 进行邀请，我知道这是可能的，但我不知道该怎么做。

总结一下：

这是一个 iOS 应用程序，我希望用户能够通过在朋友 Facebook 墙上发帖来邀请他们的朋友。

如果有人能指出我正确的方向，我将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-12T10:53:52.740

好的，所以在与这个斗争了一段时间并且看起来高低没有任何运气之后，我设法偶然发现了今天如何做到这一点。

我会在这里更新它，以便其他正在努力的人可以看到：

```
//using long longs to make sure the really long facebook ID's
//don't exceed integer limits

- (void)inviteUsingFacebook:(long long)facebookID
{
    NSString *numStr = [NSString stringWithFormat:@"%llu", facebookID];    
    NSString *desc = @"Download the app NOW from the App Store to play with ";
    desc = [desc stringByAppendingString:facebookNameStore];

NSMutableDictionary* params = [NSMutableDictionary dictionaryWithObjectsAndKeys:
                               @"_YOUR_APP_ID_GOES_HERE", @"app_id",
                               @"YOUR_LINK", @"link",//most likely you will put itunes link here
                               @"FRIENDS_ID", @"target_id",//facebook id number of person you want to send to
                               @"http://URL_TO_IMAGE_YOU_WANT_TO_APPEAR_IN_WALL_POST.jpeg", @"picture",
                               @"YOUR APP NAME", @"name",
                               @"THIS IS AN INVITE EXAMPLE!", @"description",
                               nil];

[facebook dialog:@"stream.publish" andParams:params andDelegate:self]; 
```

}

就是这样！

我把它放到我的 AppDelegate 类中，当我点击邀请按钮时调用它——工作完成！

需要注意的一点是，这确实会导致一个弹出对话框，允许用户添加自己的消息，我个人认为这是一件好事。

# javascript - 尝试使用javascript获取动态添加行的水平乘积

> ID：10982888
> 
> 赞同：0
> 
> 时间：2012-06-11T15:13:52.343
> 
> 标签：javascript, sum, rows

我正在尝试使用“添加”和“删除”按钮将我动态添加的行的两个输入字段相乘。我有一个单独的 javascript 工作，将所有产品加起来并将它们总结在底部。

在下面的示例中，我已经可以在底部获得所有 z 字段的总和，但是在如何获得每行 x 和 y 的乘积时遇到了问题。我正在使用的 sum javascript 抓取所有带有“z”类的东西并将它们相加

我用于 sum 的 javascript 如下。问题是我不知道会有多少行，名称和 ID 属性附加了 1,2,3 等等

```
 [x] *  [y] =  [z]?
    [x1] * [y1] = [z1]?
    [x2] * [y2] = [z2]?

        [z+z1+z2]

    <script type="text/javascript">
    function calcz() {
   var inputs = document.getElementsByClassName('z');
    var sum = 0;
    for(var i = 0; i < inputs.length; i++) {
        var input = inputs[i];
        var num = Number(input.value);

        if(isNaN(num)) { 
            alert('Please Enter a valid number: ' + input.value);
            num = 0;
        }

        sum += num;
    }

    document.getElementById('zresult').value = '$' + sum; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-11T19:03:44.600

这应该给你一个想法：

```
<div id="table">
    <div class="row">
        <input type="text" class="x"/>
        <input type="text" class="y"/>
        <input type="text" class="z"/>
    </div>
    <div class="row">
        <input type="text" class="x"/>
        <input type="text" class="y"/>
        <input type="text" class="z"/>
    </div>
</div>
<input type="text" id="total"/>
<button onclick='addRow()'> + Row</button>
<button onclick='removeRow()'> - Row</button>
<button onclick='calc()'>Calc</button>

<script type="text/javascript">
    function calc() {
        var rows = document.getElementsByClassName('row');
        var total = document.getElementById('total');

        var zTotal = 0;

        for(var rowIdx = 0; rowIdx < rows.length; rowIdx++) {
            var row = rows[rowIdx];
            var inputX = row.getElementsByClassName('x')[0];
            var inputY = row.getElementsByClassName('y')[0];
            var inputZ = row.getElementsByClassName('z')[0];

            var x = Number(inputX.value);
            var y = Number(inputY.value);
            var z = x * y;

            inputZ.value = z;

            zTotal += z;
        }
        total.value = zTotal;
    }

    function addRow() {
        var table = document.getElementById('table');

        var row = document.createElement('div');
        row.setAttribute('class', 'row');
        row.type = 'text';

        var inputX = document.createElement('input');
        inputX.setAttribute('class', 'x');
        inputX.type = 'text';

        var inputY = document.createElement('input');
        inputY.setAttribute('class', 'y');
        inputY.type = 'text';

        var inputZ = document.createElement('input');
        inputZ.setAttribute('class', 'z');
        inputZ.type = 'text';

        row.appendChild(inputX);
        row.appendChild(inputY);
        row.appendChild(inputZ);
        table.appendChild(row);
    }

    function removeRow() {
        var table = document.getElementById('table');
        if (table.children.length > 1) {
            var row = table.childNodes[table.children.length - 1];
            table.removeChild(row);
        }
    }

</script> 
```

user1202589 的编辑

```
<script LANGUAGE="JavaScript">
// Last updated 2006-02-21
function addRowToTable()
{
  var tbl = document.getElementById('myTable');
  var lastRow = tbl.rows.length;
  // if there's no header row in the table, then iteration = lastRow + 1
  var iteration = lastRow;
  var row = tbl.insertRow(lastRow);

  // left cell
 var cellLeft = row.insertCell(0);
  var textNode = document.createTextNode(iteration);
  var el = document.createElement('input');
  el.type = 'text';
 el.name = 'service_description' + iteration;
  el.id = 'txtRow' + iteration;
  el.size = 55;
  cellLeft.appendChild(el);

  cellLeft.appendChild(textNode);

  // right cell
  var cellRight = row.insertCell(1);
  var eel = document.createElement('input');
  eel.type = 'text';
  eel.name = 'term' + iteration;
  eel.id = 'txtRow' + iteration;
  eel.size = 4
  cellRight.appendChild(eel);

  var cellRight1 = row.insertCell(2);
  var el = document.createElement('input');
  el.type = 'text';
  el.name = 'x' + iteration;
  el.id = 'txtRow' + iteration;
  el.setAttribute('class', 'x');
  el.onblur = function(){calc();};
  el.class = 'x'
  el.size = 4;
  cellRight1.appendChild(el);

  var cellRight2 = row.insertCell(3);
  var el = document.createElement('input');
  el.type = 'text';
  el.setAttribute('class', 'y');
  el.onblur = function(){productcalc();};
  el.name = 'y' + iteration;
  el.id = 'txtRow' + iteration;
  el.size = 4;
  cellRight2.appendChild(el);

  var cellRight4 = row.insertCell(5);
  var el = document.createElement('input');
  el.setAttribute('class', 'mrc');
  el.onblur = function(){calcmrc('mrc','mrcresult');};
  el.type = 'text';
  el.name = 'mrc' + iteration;
  el.id = 'mrc';
  el.size = 4;
  cellRight4.appendChild(el);

  }
  function removeRowFromTable()
  {
  var tbl = document.getElementById('myTable');
  var lastRow = tbl.rows.length;
  if (lastRow > 2) tbl.deleteRow(lastRow - 1);
  }

<div  class="row" align="center">
<p>
<input type="button" class="formbutton" value="Add" onclick="addRowToTable();" />
<input type="button" class="formbutton" value="Remove" onclick="removeRowFromTable();" />
</p>
<p>
</p>
<table width="75%" border="1" id="myTable">
  <tr >
    <td >Service Description</td>
    <td>Term</td>
    <td>x</td>
    <td>y</td>

    <td>MRC</td>
 </tr>
  <tr>
    <td><input type="text" name="service_description"
      "id="txtRow1" size='55'   /></td>

    <td><input type="text" name="term" class="term" 
     value="36 Month" id="txtRow1" size='4'   /></td>

    <td><input type="text" name="x" class="x"
      id="txtRow1" onBlur="productcalc()" size='4'  /></td>
   <td><input type="text"  name="y" class="y"
     id="txtRow1" size='4' onBlur="productcalc()" /></td>

   <td>
    <input type="text" name="mrc" 
    class="mrc"  onBlur="calcmrc('mrc','mrcresult')" id="mrc" size='4'  />

    </td> 
```

很少有变化，我认为这可能是您正在寻找的东西，或者至少是在正确的方向上。

```
cript type="text/javascript">
    // Last updated 2006-02-21
    function addRowToTable()
    {
        var tbl = document.getElementById('tblBlock').tBodies[0];
        var lastRow = tbl.rows.length;
        // if there's no header row in the table, then iteration = lastRow + 1
        var iteration = lastRow + 1;
        var row = tbl.insertRow(lastRow);

        // left cell
        var cellLeft = row.insertCell(0);
        var el = document.createElement('input');
        el.type = 'text';
        el.name = 'service_description' + iteration;
        el.id = 'txtRow' + iteration;
        el.size = 55;
        cellLeft.appendChild(el);

        var textNode = document.createTextNode(iteration);
        cellLeft.appendChild(textNode);

        // right cell
        var cellRight = row.insertCell(1);
        var eel = document.createElement('input');
        eel.type = 'text';
        eel.name = 'term' + iteration;
        eel.id = 'txtRow' + iteration;
        eel.size = 4
        cellRight.appendChild(eel);

        var cellRight1 = row.insertCell(2);
        var el = document.createElement('input');
        el.type = 'text';
        el.name = 'price' + iteration;
        el.id = 'txtRow' + iteration;
        el.setAttribute('class', 'price');
        el.onblur = function() { productcalc(); };
        el.class = 'price'
        el.size = 4;
        cellRight1.appendChild(el);

        var cellRight2 = row.insertCell(3);
        var el = document.createElement('input');
        el.type = 'text';
        el.setAttribute('class', 'qt');
        el.onblur = function() { productcalc(); };
        el.name = 'qt' + iteration;
        el.id = 'txtRow' + iteration;
        el.size = 4;
        cellRight2.appendChild(el);

        var cellRight3 = row.insertCell(4);
        var el = document.createElement('input');
        el.type = 'text';
        el.name = 'nrc' + iteration;
        el.setAttribute('class', 'nrc');
        el.onblur = function() { calcnrc('nrc','nrcresult'); };
        el.class = 'nrc'
        el.id = 'nrc';
        el.size = 4;
        cellRight3.appendChild(el);

        var cellRight4 = row.insertCell(5);
        var el = document.createElement('input');
        el.setAttribute('class', 'mrc');
        el.onblur = function() { calcmrc('mrc','mrcresult'); };
        el.type = 'text';
        el.name = 'mrc' + iteration;
        el.id = 'mrc';
        el.size = 4;
        cellRight4.appendChild(el);
    }

    function removeRowFromTable() {
        var tbl = document.getElementById('tblBlock').tBodies[0];
        var lastRow = tbl.rows.length;
        if (lastRow > 1) tbl.deleteRow(lastRow - 1);
        calcnrc();
        calcmrc();
        productcalc();
    }
</script>

<script type="text/javascript">

    function calcnrc() {
        var inputs = document.getElementsByClassName('nrc');
        var sum = 0;
        for(var i = 0; i < inputs.length; i++) {
            var input = inputs[i];
            var num = Number(input.value);
            if(isNaN(num)) {
                alert('Please enter a valud number: ' + input.value);
                num = 0;
            }
            sum += num;
        }
        document.getElementById('nrcresult').value = '$' + sum;
    }

</script>

<script type="text/javascript">
    function calcmrc() {
        var inputs = document.getElementsByClassName('mrc');
        var sum = 0;
        for(var i = 0; i < inputs.length; i++) {
            var input = inputs[i];
            var num = Number(input.value);
            if(isNaN(num)) {
                alert('Please Enter a valid number: ' + input.value);
                num = 0;
            }
            sum += num;
        }
        document.getElementById('mrcresult').value = '$' + sum;
    }
</script>

<script type="text/javascript">
    function productcalc() {
        var tbl = document.getElementById('tblBlock').tBodies[0];
        var rows = tbl.children;
        var total = document.getElementById('mrcresult');
        var zTotal = 0;
        for(var rowIdx = 0; rowIdx < rows.length; rowIdx++) {
            var row = rows[rowIdx];
            var inputX = row.getElementsByClassName('price')[0];
            var inputY = row.getElementsByClassName('qt')[0];
            var inputZ = row.getElementsByClassName('mrc')[0];
            var x = Number(inputX.value);
            var y = Number(inputY.value);
            var z = x * y;
            inputZ.value = z;
            zTotal += z;
        }
        total.value = '$' + zTotal;
    }
</script>

<div align="center">
    <p>
        <input type="button" class="formbutton" value="Add" onclick="addRowToTable();" />
        <input type="button" class="formbutton" value="Remove" onclick="removeRowFromTable();" />
    </p>
    <p>
    </p>
    <table width="75%" border="1" id="tblBlock">
        <thead>
            <tr>
                <td>Service Description</td>
                <td>Term</td>
                <td>Price</td>
                <td>QT</td>
                <td>NRC</td>
                <td>MRC</td>
            </tr>
        </thead>
        <tbody>
            <tr>
                <td><input type="text" name="service_description"id="txtRow1" size='55' /></td>
                <td><input type="text" name="term" class="term" value="36 Month" id="txtRow1" size='4' /></td>
                <td><input type="text" name="price" class="price" id="txtRow1" onBlur="productcalc()" size='4' /></td>
                <td><input type="text" name="qt" class="qt" id="txtRow1" size='4' onBlur="productcalc()" /></td>
                <td><input type="text" name="nrc" class="nrc" onBlur="calcnrc('nrc','nrcresult')" id="nrc" size='4' /></td>
                <td><input type="text" name="mrc" class="mrc" onBlur="calcmrc('nrc','mrcresult')" id="mrc" size='4' /></td>
            </tr>
        </tbody>
        <tfoot>
            <tr>
                <td></td>
                <td></td>
                <td></td>
                <td></td>
                <td><input type="text" name="nrcresult" id="nrcresult" /></td>
                <td><input type="text" name="mrcresult" id="mrcresult" /></td>
            </tr>
        </tfoot>
    </table>
    <br><br>
</div> 
```

# wordpress - “自定义字段模板”插件是否具有自动取消发布功能？

> ID：10982899
> 
> 赞同：0
> 
> 时间：2012-06-11T15:14:28.407
> 
> 标签：wordpress, plugins, custom-fields

在我没有帮助构建但目前正在进行维护的客户网站上，他们正在使用“自定义字段模板”插件为他们在事件类别中的帖子设置日期。这是他们的模板内容：

[事件日期]
type=textfield
date=true
dateFormat = yyyy/mm/dd
startDate = '1986/10/12'

目前，他们的活动帖子在活动日期过去后没有取消发布存在问题。据我的主管说，过去活动帖子会在活动日期过去后自动取消发布，但现在不再这样做了。我查看了他们安装的其他插件，但没有一个与取消发布帖子有关。我想知道“自定义字段模板”是否有自动取消发布设置，或者我需要在某处插入一些代码来处理我需要做的事情。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-03T01:17:47.877

据我所知，CFT 没有这个功能。我们过去曾将[Content Scheduler 插件](http://wordpress.org/extend/plugins/content-scheduler/)与 CFT 结合使用。这可能是你的一个选择。祝你好运。

# asp.net-mvc-3 - 集成 ASP.NET MVC 和 jQueryMobile - DateBox

> ID：10982902
> 
> 赞同：1
> 
> 时间：2012-06-11T15:14:41.873
> 
> 标签：asp.net-mvc-3, jquery-mobile, razor, datebox

jQueryMobile - DateBox 需要这个才能正常工作：

```
<label for="mydate">Some Date</label>

<input name="mydate" id="mydate" type="date" data-role="datebox" data-options='{"mode": "flipbox"}'> 
```

但是在 Asp.Net MVC Razor Engine 中，我有这个编辑器标签和字段：

```
<div class="editor-label">
        @Html.LabelFor(model => model.ReleaseDate)
    </div>
    <div class="editor-field">
        @Html.EditorFor(model => model.ReleaseDate)
        @Html.ValidationMessageFor(model => model.ReleaseDate)
    </div> 
```

有没有办法在我的 Asp.Net MVC 应用程序中集成两个东西以拥有一个 jQueryMobile - DateBox？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-12T12:08:25.057

抱歉，没有比 HtmlAttributes 更简单的了。所以我提出了这个问题。解决方案，如果有人也需要：

```
<div class="editor-label">
    @Html.LabelFor(model => model.ReleaseDate)
</div>
<div class="editor-field">
    @Html.TextBoxFor(model => model.ReleaseDate, new  { @name = "mydate", @id = "mydate", @type = "date", @data_role = "datebox", @data_options= " {'mode':'flipbox', 'dateFormat':'dd/mm/YYYY' } ")
    @Html.ValidationMessageFor(model => model.ReleaseDate)
</div> 
```

仅注意每个属性前的 @ 字符，复合词属性的 _（下划线）字符而不是 -（破折号）字符，以及 TextBoxFor 而不是 EditorFor。

再见！

# android - 安卓矩形

> ID：10982904
> 
> 赞同：0
> 
> 时间：2012-06-11T15:14:49.067
> 
> 标签：android, android-canvas, shapes

大家好，我的直角有问题。我想消失一个矩形，以便当其他矩形相交时，相交方法无法找到特定的矩形。对不起，如果解决方案很明显，我是编程新手。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-12T15:25:58.053

//检查 API 演示 Graphics->Regions

[代码链接：](http://developer.android.com/resources/samples/ApiDemos/src/com/example/android/apis/graphics/Regions.html)

![在此处输入图像描述](../Images/cac1348992a0d56ae923f3f793f36b75.png)

# jquery - 如何使用 css 转换重新创建我的 jQuery .animate() 元素缩放/平移？

> ID：10982906
> 
> 赞同：9
> 
> 时间：2012-06-11T15:14:52.260
> 
> 标签：jquery, css, jquery-animate, css-transforms

我整理了一个 jsFiddle 来说明我的问题：

[http://jsfiddle.net/VbCcA/3/](http://jsfiddle.net/VbCcA/3/)

我有一个可以平移和缩放到指定元素的功能。这用于在漫画书中创建帧之间的过渡。

我使用 jQuery 的 .animate() 可以正常工作，但我想在可用时使用 css 转换，因为它们在现代浏览器上的性能要好得多。

但是我似乎无法正确地重新创建相同的行为。

与其在这里描述得不好，不如看一下 jsFiddle，您会看到两组控件，每个按钮对应于“漫画”中的一个框架。jQuery 动画控件行为正确，而 css 转换控件则不正确。

一旦使用 css-transforms 对元素进行了缩放，问题似乎就归结于对 offset() 属性的测量。

任何帮助将不胜感激。

**注意：**在将方法从 .animate 切换到 transforms 时，您需要“重新运行”jsFiddle，反之亦然，以重置函数运行时修改的 CSS。

**编辑：**我刚刚更正了指向 jSfiddle 的链接......向那些已经看过它的人道歉。原始链接缺少示例代码的一部分。还要澄清一下，我需要使用基于百分比的值，因为整个应用程序是完全响应的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-11T20:21:13.643

这当然不是最直接的途径，但考虑将 jQuery Transit (http://ricostacruz.com/jquery.transit/) 应用到您的 .animate 版本中，看看它如何处理转换为 CSS3 转换。然后你也许可以从那里向后工作。

# linux - 在 bash 中创建临时文件

> ID：10982911
> 
> 赞同：169
> 
> 时间：2012-06-11T15:15:06.230
> 
> 标签：linux, bash, unix

是否有客观上更好的方法在 bash 脚本中创建临时文件？

我通常只是将它们命名为我想到的任何东西，例如 tempfile-123，因为它会在脚本结束时被删除。除了覆盖当前文件夹中可能的 tempfile-123 之外，这样做有什么缺点吗？或者以更谨慎的方式创建临时文件有什么好处？

* * *

## 回答 #1

> 赞同：193
> 
> 时间：2012-06-11T15:20:51.157

手册页解释得`mktemp(1)`很好：

> 传统上，许多 shell 脚本以 pid 作为后缀的程序名称并将其用作临时文件名。这种命名方案是可预测的，它创造的竞争条件很容易让攻击者获胜。一种更安全但仍然较差的方法是使用相同的命名方案创建一个临时目录。虽然这确实可以保证临时文件不会被破坏，但它仍然允许简单的拒绝服务攻击。由于这些原因，建议改用 mktemp。

在脚本中，我调用 mktemp 类似

```
mydir=$(mktemp -d "${TMPDIR:-/tmp/}$(basename $0).XXXXXXXXXXXX") 
```

它创建了一个我可以在其中工作的临时目录，并且我可以在其中安全地将实际文件命名为可读且有用的名称。

`mktemp`不是标准的，但它确实存在于许多平台上。“X”通常会被转换成一些随机性，更多的可能会更随机；但是，某些系统（例如，busybox ash）比其他系统更明显地限制了这种随机性

* * *

顺便说一句，临时文件的安全创建不仅对 shell 脚本很重要。这就是为什么 python 有[tempfile](http://docs.python.org/library/tempfile.html)， perl 有[File::Temp](http://perldoc.perl.org/File/Temp.html)， ruby​​ 有[Tempfile](http://www.ruby-doc.org/stdlib-1.9.3/libdoc/tempfile/rdoc/Tempfile.html)等等……</p>

* * *

## 回答 #2

> 赞同：48
> 
> 时间：2012-06-11T15:18:10.050

是的，使用[mktemp](http://linux.die.net/man/1/mktemp)。

它将在专为存储临时文件而设计的文件夹中创建一个临时文件，并保证您的名称是唯一的。它输出该文件的名称：

```
> mktemp
/tmp/tmp.xx4mM3ePQY
> 
```

* * *

## 回答 #3

> 赞同：19
> 
> 时间：2012-06-11T15:17:31.807

你可能想看看`mktemp`

> mktemp 实用程序采用给定的文件名模板并覆盖其中的一部分以创建唯一的文件名。模板可以是附加了一些“X”的任何文件名，例如/tmp/tfile.XXXXXXXXXX。尾随的“X”被当前进程号和随机字母的组合替换。

更多细节：[man mktemp](http://unixhelp.ed.ac.uk/CGI/man-cgi?mktemp)

* * *

## 回答 #4

> 赞同：11
> 
> 时间：2015-05-08T19:12:36.540

> 以更谨慎的方式创建临时文件有什么好处吗

`/tmp`临时文件通常创建在所有其他用户和进程具有读写权限的临时目录（例如）中（任何其他脚本都可以在那里创建新文件）。因此脚本应该小心创建文件，例如使用正确的权限（例如只读所有者，请参阅：），`help umask`并且文件名应该不容易猜到（理想情况下是随机的）。否则，如果文件名不是唯一的，它可能会与多次运行的同一脚本产生冲突（例如[竞争条件](https://en.wikipedia.org/wiki/Race_condition)) 或者一些攻击者可以劫持一些敏感信息（例如，当权限太开放并且文件名很容易猜到时）或者用他们自己的代码版本创建/替换文件（比如根据正在替换的命令或 SQL 查询存储）。

* * *

您可以使用以下方法来创建临时目录：

```
TMPDIR=".${0##*/}-$$" && mkdir -v "$TMPDIR" 
```

或临时文件：

```
TMPFILE=".${0##*/}-$$" && touch "$TMPFILE" 
```

然而，它仍然是可预测的，并不被认为是安全的。

根据`man mktemp`，我们可以阅读：

> 传统上，许多 shell 脚本以 pid 作为后缀的程序名称并将其用作临时文件名。这种命名方案是可预测的，它创造的竞争条件很容易让攻击者获胜。

所以为了安全起见，建议使用`mktemp`命令创建唯一的临时文件或目录（`-d`）。

* * *

## 回答 #5

> 赞同：5
> 
> 时间：2020-05-27T17:37:29.843

`mktemp`可能是最通用的，特别是如果您打算使用该文件一段时间。

如果您只需要临时将该文件作为另一个命令的输入，您也可以使用**进程替换运算符，例如：** `<()`

```
$ diff <(echo hello world) <(echo foo bar) 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2022-01-29T01:30:56.507

[`mktemp`文档](https://www.gnu.org/software/coreutils/manual/html_node/mktemp-invocation.html#mktemp-invocation)有一些很好的例子。

如果您的临时文件需要特定的后缀（文件扩展名）。您可以执行以下操作

```
$ myfile=$(mktemp --suffix ".txt")
$ echo "$myfile"
/tmp/tmp.9T9soL2QNp.txt 
```

如果您不想创建文件，而只是想要一个名称，则可以另外使用该`-u/--dry-run`标志。

```
$ myfile=$(mktemp -u --suffix ".txt")
$ echo "$myfile"
/tmp/tmp.Y8cMDJ1DDr.txt 
```

**但请注意**，使用时`-u/--dry-run`

> 使用此命令的输出创建一个新文件本质上是不安全的，因为在生成名称和使用它之间有一个时间窗口，另一个进程可以创建同名对象。

# javascript - Javascript如何在新行上显示数组的每个元素

> ID：10982913
> 
> 赞同：22
> 
> 时间：2012-06-11T15:15:07.990
> 
> 标签：javascript, extjs4

我有一个字符串构建表单逗号分隔值，`split`用于获取每个值，然后我想在新行上显示每个值，但真正发生的是我在新行上获取每个值，除了最后两个显示一起在同一条线上。只是为了说清楚：

> 价值1
> 
> ,值2
> 
> ,值3
> 
> ,值4,值5

这是我正在使用的功能：

```
_checkDates: function(dates) {
    if (dates != null)
    {
        var zzz = dates.split(',');
        var xxx = zzz.length;
        console.log(xxx);
        for (var i=0; i<=xxx; i++)
        {
            zzz[i] = zzz[i] + '<br />';
            return zzz;
        }
    }
    return dates;
} 
```

为了清楚这是用 ExtJS 4 编写的，我几乎可以肯定在这种情况下问题是纯 JavaScript 并且与 ExtJS 4 无关，但无论如何，也许我错了。

那么有什么想法为什么会发生以及我如何使最后一个元素也进入新行？

* * *

## 回答 #1

> 赞同：37
> 
> 时间：2015-11-21T10:14:41.483

我已经修改了您的功能更清洁剂。因为 stefan 已经提到了您的错误。

```
function splitDate(dates) {
    if (dates != null)
    {
        var dates = dates.split(',');
        var xxx = dates.length;
        console.log(xxx);
        for (var i=0; i<xxx; i++)
        {
            dates[i] = dates[i];                    
        }
    }
    console.log(dates.join('\r\n'));
    return dates.join('\r\n');        
} 
```

上面的函数你可以在一行中完成：

**如果它是一个数组，您可以通过以下方式拆分为新行：**

```
var arr = ['apple','banana','mango'];
console.log(arr.join('\r\n')); 
```

**如果是字符串：**

```
var str = "apple,banana,mango";
console.log(str.split(',').join("\r\n")); 
```

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2012-06-11T15:21:37.077

for 循环是可疑的。首先，您不会处理所有项目（正如@sarfraz 指出的那样，最后一个项目丢失了）。`zzz`其次，您将在 for 循环体中返回结果 ( )：

```
for (var i=0; i<=xxx; i++)
{
  zzz[i] = zzz[i] + '<br />';
  return zzz; // for-loop will stop here! resulting in ["value1<br />", "Value2", etc...]
} 
```

在 JavaScript 中，您可以简单地“加入”数组：

```
return dates.split(',').join("<br />") 
```

由于您只是替换字符串，您可以使用以下`replace`方法：

```
return dates.replace(",", "<br />"); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2019-08-19T10:41:54.030

链接：[https ://snack.expo.io/GcMeWpPUX](https://snack.expo.io/GcMeWpPUX)

```
import React from 'react'
import { SafeAreaView, Text, View, FlatList } from 'react-native'

export default class App extends React.Component {

    render() {
        return (
            <SafeAreaView style={{ flex: 1, alignItems: 'center', justifyContent: 'center',margin:20 }}>
                <FlatList
                    data={your_array_name}
                    keyExtractor={(item, index) => String(index)}
                    renderItem={({ item, index }) => {
                        return (
                            <Text style={{ color: '#ff8500', fontSize: 18 }}>{item.skills.splice(',').join("\n")}</Text>
                        )
                    }}
                />

            </SafeAreaView>
        )
    }

}

const your_array_name = [
    {
        id: 1,
        text: 'Lorem ipsum is simple dummy text for printing the line',
        skills: ['javascript', 'java']
    },
    {
        id: 2,
        text: 'Lorem ipsum is simple dummy text.',
        skills: ['javascript', 'java']
    }] 
```

# c# - mvc 4 + iis7.5 应用程序停止

> ID：10982918
> 
> 赞同：1
> 
> 时间：2012-06-11T15:15:29.413
> 
> 标签：c#, asp.net-mvc, asp.net-mvc-4, iis-7.5

这是我第一次在这里写，所以我希望很清楚！我在 iis 7.5 上部署了一个 mvc 应用程序。在 application_start 中，它开始执行一些操作，例如以固定间隔下载文件。我可以通过虚拟机上的远程桌面访问 Windows Server 2008。问题是，当我从该虚拟机注销时，应用程序似乎停止并且不再下载任何内容，直到我再次启动该应用程序。

这是正常的还是我的配置有问题？

我希望应用程序只启动一次并不间断地循环这种操作..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-11T18:02:33.133

在默认应用程序池设置中，这是正常的（假设您的站点流量较低）。应用程序池将在设定的不活动期后关闭，并让您的下载器离线。我相信默认是 20 分钟不活动。

这是有关配置超时的一些信息。 [http://technet.microsoft.com/en-us/library/cc771956(v=ws.10).aspx](http://technet.microsoft.com/en-us/library/cc771956(v=ws.10).aspx)

这里有一些关于将 IIS 配置为自动启动并始终运行的信息（在某种程度上模拟 Windows 服务环境）[http://weblogs.asp.net/scottgu/archive/2009/09/15/auto-start-asp-net-应用程序-vs-2010-and-net-4-0-series.aspx](http://weblogs.asp.net/scottgu/archive/2009/09/15/auto-start-asp-net-applications-vs-2010-and-net-4-0-series.aspx)

[以下是在 asp.net http://haacked.com/archive/2011/10/16/the-dangers-of-implementing-recurring-background-tasks-in-](http://haacked.com/archive/2011/10/16/the-dangers-of-implementing-recurring-background-tasks-in-asp-net.aspx)下运行长时间运行的进程相关的一些风险和解决方法 [asp-net.aspx](http://haacked.com/archive/2011/10/16/the-dangers-of-implementing-recurring-background-tasks-in-asp-net.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-11T15:30:07.713

在我看来，在 application_start 中实现下载并不是一个好主意（在 asp.net 中查看有关生命周期的更多信息）[。](http://msdn.microsoft.com/en-us/library/ms178473.aspx)为此，您需要实施某种服务。你能指定你的目标以获得详细的答案吗？

# asp.net - 为什么我会收到此错误：“ExecuteReader：连接属性尚未初始化。”

> ID：10982919
> 
> 赞同：0
> 
> 时间：2012-06-11T15:10:31.070
> 
> 标签：asp.net

我正在尝试读取 .csv 文件以将其内容导入 SQL 表

我收到错误：

```
ExecuteReader: Connection property has not been initialized. 
```

在这段代码的最后一行：

```
Function ImportData(ByVal FU As FileUpload, ByVal filename As String, ByVal tablename As String) As Boolean
Try

    Dim xConnStr As String = "Driver={Microsoft Text Driver (*.txt; *.csv)};dbq=" & Path.GetDirectoryName(Server.MapPath(filename)) & ";extensions=asc,csv,tab,txt;"

    ' create your excel connection object using the connection string
    Dim objXConn As New System.Data.Odbc.OdbcConnection(xConnStr.Trim())
    objXConn.Open()

    Dim objCommand As New OdbcCommand(String.Format("SELECT * FROM " & Path.GetFileName(Server.MapPath(filename)), objXConn))

    If objXConn.State = ConnectionState.Closed Then
        objXConn.Open()
    Else
        objXConn.Close()
        objXConn.Open()
    End If

    ' create a DataReader
    Dim dr As OdbcDataReader
    dr = objCommand.ExecuteReader() 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-06T08:02:46.317

您的问题的解决方案如下：

```
Dim xConnStr As String = "Driver={Microsoft Text Driver (*.txt; *.csv)};dbq=" & Path.GetDirectoryName(Server.MapPath(filename)) & ";extensions=asc,csv,tab,txt;" 

    ' create your excel connection object using the connection string 
    Dim objXConn As New System.Data.Odbc.OdbcConnection(xConnStr.Trim()) 

    Dim objCommand As New OdbcCommand(String.Format("SELECT * FROM " & Path.GetFileName(Server.MapPath(filename)), objXConn)) 

    objCommand.Connection.Open()

    ' create a DataReader 
    Dim dr As OdbcDataReader 
    dr = objCommand.ExecuteReader() 
```

连接被传递给命令，但命令需要打开连接，如上图所示，`objCommand.Connection.Open()` 因此**删除**了初始`objXconn.Open()`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-11T15:21:55.837

由于您没有使用 OdbcConnection[创建命令](http://msdn.microsoft.com/en-us/library/system.data.odbc.odbcconnection.createcommand.aspx)，因此您需要在执行命令之前设置命令的[Connection 属性：](http://msdn.microsoft.com/en-us/library/system.data.odbc.odbccommand.connection.aspx)

```
objCommand.Connection = objXConn 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-11T15:43:35.437

可能您在调用 ExecuteReader 之前已将其关闭。

```
//this line has rightly assign the connection to the command
Dim objCommand As New OdbcCommand(String.Format("SELECT * FROM " & Path.GetFileName(Server.MapPath(filename)), objXConn)) 
```

但连接必须处于打开状态。你可能在这里以某种方式关闭了它

```
If objXConn.State = ConnectionState.Closed Then
    objXConn.Open()
Else
    objXConn.Close()
    objXConn.Open()
End If 
```

# jquery - RaphaelJS 在悬停时缩放路径

> ID：10982920
> 
> 赞同：0
> 
> 时间：2012-06-11T15:15:33.750
> 
> 标签：jquery, path, svg, raphael, scale

当我将鼠标悬停在 SVG 路径上时，我想添加一个弹出效果。我所尝试的导致我的路径飞过浏览器窗口的底部。

我已经阅读了这篇文章并试图补偿坐标增加，但我的设置失败了。[关联](https://stackoverflow.com/questions/10756423/svg-scale-onmouseover-element-disappears)

路径示例：

```
var paths = {
lakes: {
    name: 'lakes',
           value: 'notSelected',
    path: 'm199,606l121,-45l18,60l-32,60l-52,157l-99,-9l-13,-70l-17,8l-22,0l-11,-30l9,-26l61,-45l12,-6l21,-35l4,-19z'
}, 
```

等等

我用于悬停（仅显示悬停）

```
obj.hover(function(){
if(paths[arr[this.id]].value == 'notSelected')
  {
        this.animate({
        fill: '#32CD32'
        }, 300);
  } 
```

它可以完美地淡化我选择的颜色。我首先补充说：

```
this.animate({transform: 'scale(1.1)'}, 300); 
```

这是我发现路径移动到底部的时候，所以我尝试用

```
this.animate({transform: 'translate(-199,-606)'}, 300); 
```

他们仍然离开。另一位成员指出我的路径都是用大 Y 绘制的，这是我的问题吗？

（我重画了我的 SVG`obj.attr(attributes).attr( { transform: "S0.81,0.81,150,-2000" } );` 以抵消这个 Y 值）`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-12T12:05:02.217

这个例子有效

[http://jsfiddle.net/chrisloughnane/EUwRq/](http://jsfiddle.net/chrisloughnane/EUwRq/)

///// 下面在 IE6,8 或 9 中无法正常工作 /////

我找到了@Timmain 的帖子[cant-scale-multiple-paths-in-raphael的解决方案](https://stackoverflow.com/questions/8171635/cant-scale-multiple-paths-in-raphael)

使用[ScaleRaphaël](http://www.shapevent.com/scaleraphael/)并添加

```
 this.toFront();
    this.scale(1.2); 
```

所以我的悬停现在是

```
'obj
.hover(function(){ 
    if(paths[arr[this.id]].value == 'notSelected')
        {
        this.animate({
            fill: '#32CD32'
        }, 300);
    }
    this.toFront();
    this.scale(1.2);' 
```

我得到了我想要的效果。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-11T17:33:45.957

我在 iPod 上，但我想你可能会觉得这很有趣，也许对你有帮助 2

[http://www.irunmywebsite.com/raphael/additionalhelp.php?q=dynamichorizo​​ntalmenu](http://www.irunmywebsite.com/raphael/additionalhelp.php?q=dynamichorizontalmenu)

它显示缩放作为变换的一部分

希望能帮助到你

# ruby-on-rails - Rails 3.1 应用程序无法与 config.cache_classes = true 连接

> ID：10982922
> 
> 赞同：1
> 
> 时间：2012-06-11T15:15:36.383
> 
> 标签：ruby-on-rails, ruby-on-rails-3.1

我在我的 rails 3.1 应用程序中遇到了一个非常奇怪的问题，该应用程序启动时没有错误，但是当我有`config.cache_classes = true`.

我有一个现有的应用程序，我正在从 3.0.10 升级到 3.1.5，尽管我不是 100% 相信这是导致问题的原因。在部署之前，我确实对 Gems 进行了一些其他更改，这是我不应该做的，但是在 dev 中一切正常，所以我并不担心。

在完全困惑了一天之后，我已将问题缩小到 cache_classes。问题是错误为零，所以我真的不知道该去哪里。

*编辑* 还有一个提示。当我尝试使用 cntrl-c 杀死 rails 服务器时，它会给出“sinatra 已结束他的设置”的信息，但随后它会自行重新启动。我只能用 kill -9 杀死它。没关系`config.cache_class = false`。

这是我的宝石清单...

捆绑包中包含的宝石：

```
* RedCloth (4.2.9)
* actionmailer (3.1.5)
* actionpack (3.1.5)
* activemodel (3.1.5)
* activerecord (3.1.5)
* activerecord-import (0.2.9)
* activeresource (3.1.5)
* activesupport (3.1.5)
* acts_as_reportable (1.1.1)
* addressable (2.2.6)
* ancestry (1.2.4)
* arel (2.2.3)
* aws-sdk (1.3.8)
* bbenezech-nested_form (0.0.6)
* bcrypt-ruby (3.0.1)
* bootstrap-sass (2.0.3.1)
* builder (3.0.0)
* bundler (1.0.15)
* cancan (1.6.5)
* chronic (0.6.5)
* cocaine (0.2.1)
* coffee-rails (3.1.1)
* coffee-script (2.2.0)
* coffee-script-source (1.3.3)
* color (1.4.1)
* css_parser (1.2.6)
* daemons (1.1.4)
* date_validator (0.6.2)
* devise (1.4.9)
* diff-lcs (1.1.3)
* em-websocket (0.3.6)
* erubis (2.7.0)
* eventmachine (0.12.10)
* execjs (1.4.0)
* faker (0.3.1)
* faraday (0.6.1)
* fastercsv (1.5.4)
* formtastic (1.2.4)
* geokit (1.6.5)
* geokit-rails3 (0.1.5)
* god (0.11.0)
* haml (3.1.6)
* has_scope (0.5.1)
* hashie (1.2.0)
* hike (1.2.1)
* hoe (2.12.4)
* hpricot (0.8.6)
* httparty (0.8.1)
* i18n (0.6.0)
* inherited_resources (1.2.2)
* jquery-rails (1.0.17)
* jquery-ui-rails (0.2.2)
* json (1.5.4)
* kaminari (0.13.0)
* mail (2.3.3)
* mailfactory (1.4.0)
* mime-types (1.18)
* mini_fb (1.1.7)
* multi_json (1.0.3)
* multi_xml (0.2.2)
* multipart-post (1.1.3)
* mysql (2.8.1)
* nokogiri (1.5.0)
* oa-core (0.2.5)
* oa-oauth (0.2.5)
* oauth (0.4.5)
* oauth2 (0.4.1)
* orm_adapter (0.0.7)
* paperclip (2.7.0)
* pdf-writer (1.1.8)
* polyglot (0.3.3)
* rack (1.3.6)
* rack-cache (1.2)
* rack-mount (0.8.3)
* rack-pjax (0.5.9)
* rack-ssl (1.3.2)
* rack-test (0.6.1)
* rails (3.1.5)
* rails-dev-boost (0.1.1 a995f0a)
* rails_admin (0.0.3)
* rails_autolink (1.0.9)
* railties (3.1.5)
* rake (0.8.7)
* rdoc (3.12)
* redis (2.2.2)
* redis-namespace (1.0.3)
* remotipart (1.0.2)
* responders (0.6.5)
* resque (1.17.1)
* resque-async-method (1.0.0)
* resque-async_deliver (1.2.0)
* resque-retry (0.1.0)
* resque-scheduler (1.9.9)
* rest-client (1.6.7)
* roadie (1.1.3)
* rspec (2.8.0)
* rspec-core (2.8.0)
* rspec-expectations (2.8.0)
* rspec-mocks (2.8.0)
* rspec-rails (2.8.1)
* rubyzip (0.9.5)
* rufus-scheduler (2.0.12)
* ruport (1.6.3)
* ruport-util (0.14.0)
* sass (3.1.19)
* sass-rails (3.1.6)
* simple_enum (1.3.2)
* sinatra (1.2.7)
* sprockets (2.0.4)
* thor (0.14.6)
* tilt (1.3.3)
* transaction-simple (1.4.0)
* treetop (1.4.10)
* tzinfo (0.3.33)
* uglifier (1.2.4)
* uuidtools (2.1.2)
* vegas (0.1.8)
* warden (1.0.6)
* webrat (0.7.1)
* whenever (0.7.0)
* will_paginate (3.0.pre2) 
```

有任何想法吗？我可以让应用程序在生产环境中运行，但是使用 config.cache_class = false 时速度很慢

# jquery - jquery事件触发时的返回函数

> ID：10982929
> 
> 赞同：0
> 
> 时间：2012-06-11T15:16:05.510
> 
> 标签：jquery, function, events, wait

如何强制函数等待事件触发？我想要一个确认框之类的东西，在他/她回答问题之前，用户不能做任何事情。

像这样的东西：

```
function ask() {
    if ($('a').click(function())) {
         return true;
    }
    return false;
} 
```

PS：我知道如何在 js 中使用“confirm()”。我正在写一个新的样本！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-11T15:19:58.973

试试这个：

```
$('a').click(function() { 
    return confirm('Do you really want to do this?'); 
} ); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-11T15:21:00.857

使用两个功能：

```
function ask() {
    if ($('a').click(function())) {
         execute();
    }
}

function execute(){

} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-11T15:35:35.573

你可以用普通的javascript做类似的事情......

```
function yourFunction(){
    return "something";
}

if(confirm('are you sure?')){
    yourFunction();
}
else{
    //do something else...
} 
```

# azure - 构建具有多个角色的 Azure 解决方案

> ID：10982932
> 
> 赞同：4
> 
> 时间：2012-06-11T15:16:18.047
> 
> 标签：azure, azure-worker-roles, azure-web-roles

我很好奇其他人如何构建（或建议构建）具有多个角色的 Azure 应用程序。特别是我很好奇你是如何让他们在订阅和托管服务之间破坏我们的。

在我的特殊情况下，我们有一个托管 webapp 和 API 的 web 角色。这种变化很快，有时每天多次。我们还有几个不同的工作人员角色来执行视频处理、电子邮件发送和报告/分析等工作。工人很少更换，有时一个月不到一次。我们在一个订阅中运行所有这些。每个角色都在其自己的托管服务中。

这种设置让我们可以轻松部署一个角色，而不会影响其他角色。它还避免了不必要地中断 Worker 角色，因为它们有时处于必须重新启动的长时间（10 分钟以上）处理作业的中间。

那么你们是怎么做到的呢？

我问的部分原因是微软似乎希望你把所有东西都放在一个托管服务中。例如，预览中的新缓存功能仅在单个托管服务中可见，这使得它对我目前拥有的布局几乎无用。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-11T16:45:37.083

这有点意见，但我认为你有它的权利。为所有角色（原子更新、版本控制等）部署单个包当然有优势。但是，在更复杂的场景中，我发现拆分成不同的部署和托管服务效果很好。如果您想要异地冗余，则无论如何您都必须进行不同的部署。

如果您对版本控制小心（假设您的部署进​​行通信），您可以轻松地进行不同的部署并获得更快部署的好处。我们发现我们的工作角色比我们的 Web 角色具有更高的部署率，因此将 Web 角色分开是有意义的。借助用于网站的新 Windows Azure 功能，我们正在认真考虑将它们进一步拆分，并从中简单地运行我们应用程序的 Web 部分。我们的 API 可以去那里，甚至可以部署到其他专用实例。

我们唯一没有做的是在订阅之间拆分。我认为这样做没有技术上的理由。可能有一个企业可以绕过配额，但现实情况是订阅并不重要。但是，如果您使用 Mgmt API 为不同的托管服务使用不同的订阅 ID，那么以后可能会很痛苦。出于管理目的，我也很犹豫混合和匹配来自不同订阅的存储和托管服务。将其全部保存在同一个潜艇中可能是个好主意。

# java - Java 同步未按预期工作

> ID：10982941
> 
> 赞同：37
> 
> 时间：2012-06-11T15:16:30.927
> 
> 标签：java, multithreading, synchronization, thread-safety

我有一个“简单”的 4 类示例，它可靠地显示了多台机器上 java 同步的意外行为。正如您在下面看到的，鉴于 java`sychronized`关键字的约定，`Broke Synchronization`永远不应该从类 TestBuffer 中打印。

这是将重现该问题的 4 个类（至少对我而言）。我对如何修复这个损坏的示例不感兴趣，而是**对它**一开始就损坏的原因感兴趣。

[同步问题 - Controller.java](http://pastebin.com/Jw598wRr)

[同步问题 - SyncTest.java](http://pastebin.com/138xvmG9)

[同步问题 - TestBuffer.java](http://pastebin.com/0KtLkT6J)

[同步问题 - Tuple3f.java](http://pastebin.com/PViwFQsj)

这是我运行它时得到的输出：

```
java -cp . SyncTest
Before Adding
Creating a TestBuffer
Before Remove
Broke Synchronization
1365192
Broke Synchronization
1365193
Broke Synchronization
1365194
Broke Synchronization
1365195
Broke Synchronization
1365196
Done 
```

更新：@Gray 有迄今为止最简单的例子。他的例子可以在这里找到：[Strange JRC Race Condition](http://pastebin.com/AF85FRT7)

根据我从其他人那里得到的反馈，看起来这个问题可能出现在 Windows 和 OSX 上的 Java 64 位 1.6.0_20-1.6.0_31（不确定更新的 1.6.0）上。没有人能够在 Java 7 上重现该问题。它可能还需要多核机器来重现该问题。

原始问题：

我有一个提供以下方法的类：

*   remove - 从列表中删除给定项目
*   getBuffer - 遍历列表中的所有项目

我已将问题简化为下面的 2 个函数，它们都在同一个对象中，并且它们都是`synchronized`. 除非我弄错了，否则永远不应打印“中断同步”，因为在输入`insideGetBuffer`之前应始终将其设置回 false `remove`。但是，在我的应用程序中，当我有 1 个线程重复调用 remove 而其他线程重复调用 getBuffer 时，它正在打印“中断同步”。症状是我得到一个`ConcurrentModificationException`.

### 也可以看看：

[非常奇怪的竞争条件，看起来像 JRE 问题](https://codereview.stackexchange.com/questions/12546/very-strange-race-condition-which-looks-like-a-jre-issue)

### 太阳错误报告：

这被 Sun 确认为 Java 中的一个错误。它显然在 jdk7u4 中已修复（不知不觉？），但他们没有将修复程序向后移植到 jdk6。 [错误 ID：7176993](http://bugs.java.com/bugdatabase/view_bug.do?bug_id=7176993)

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-06-15T17:12:07.620

我认为您确实在查看 OSR 中的 JVM 错误。使用来自@Gray 的简化程序（稍作修改以打印错误消息）和一些选项来混淆/打印 JIT 编译，您可以看到 JIT 发生了什么。而且，您可以使用一些选项将其控制到可以抑制问题的程度，这为这是一个 JVM 错误提供了很多证据。

运行为：

```
java -XX:+PrintCompilation -XX:CompileThreshold=10000 phil.StrangeRaceConditionTest 
```

你会得到一个错误情况（像其他人一样，大约 80% 的运行）并且编译打印有点像：

```
 68   1       java.lang.String::hashCode (64 bytes)
 97   2       sun.nio.cs.UTF_8$Decoder::decodeArrayLoop (553 bytes)
104   3       java.math.BigInteger::mulAdd (81 bytes)
106   4       java.math.BigInteger::multiplyToLen (219 bytes)
111   5       java.math.BigInteger::addOne (77 bytes)
113   6       java.math.BigInteger::squareToLen (172 bytes)
114   7       java.math.BigInteger::primitiveLeftShift (79 bytes)
116   1%      java.math.BigInteger::multiplyToLen @ 138 (219 bytes)
121   8       java.math.BigInteger::montReduce (99 bytes)
126   9       sun.security.provider.SHA::implCompress (491 bytes)
138  10       java.lang.String::charAt (33 bytes)
139  11       java.util.ArrayList::ensureCapacity (58 bytes)
139  12       java.util.ArrayList::add (29 bytes)
139   2%      phil.StrangeRaceConditionTest$Buffer::<init> @ 38 (62 bytes)
158  13       java.util.HashMap::indexFor (6 bytes)
159  14       java.util.HashMap::hash (23 bytes)
159  15       java.util.HashMap::get (79 bytes)
159  16       java.lang.Integer::valueOf (32 bytes)
168  17 s     phil.StrangeRaceConditionTest::getBuffer (66 bytes)
168  18 s     phil.StrangeRaceConditionTest::remove (10 bytes)
171  19 s     phil.StrangeRaceConditionTest$Buffer::remove (34 bytes)
172   3%      phil.StrangeRaceConditionTest::strangeRaceConditionTest @ 36 (76 bytes)
ERRORS //my little change
219  15      made not entrant  java.util.HashMap::get (79 bytes) 
```

有三个 OSR 替换（编译 ID 上带有 % 注释的替换）。我的猜测是第三个，即调用 remove() 的循环，是造成错误的原因。这可以通过位于工作目录中的具有以下内容的 .hotspot_compiler 文件从 JIT 中排除：

```
exclude phil/StrangeRaceConditionTest strangeRaceConditionTest 
```

当你再次运行程序时，你会得到这个输出：

```
CompilerOracle: exclude phil/StrangeRaceConditionTest.strangeRaceConditionTest
 73   1       java.lang.String::hashCode (64 bytes)
104   2       sun.nio.cs.UTF_8$Decoder::decodeArrayLoop (553 bytes)
110   3       java.math.BigInteger::mulAdd (81 bytes)
113   4       java.math.BigInteger::multiplyToLen (219 bytes)
118   5       java.math.BigInteger::addOne (77 bytes)
120   6       java.math.BigInteger::squareToLen (172 bytes)
121   7       java.math.BigInteger::primitiveLeftShift (79 bytes)
123   1%      java.math.BigInteger::multiplyToLen @ 138 (219 bytes)
128   8       java.math.BigInteger::montReduce (99 bytes)
133   9       sun.security.provider.SHA::implCompress (491 bytes)
145  10       java.lang.String::charAt (33 bytes)
145  11       java.util.ArrayList::ensureCapacity (58 bytes)
146  12       java.util.ArrayList::add (29 bytes)
146   2%      phil.StrangeRaceConditionTest$Buffer::<init> @ 38 (62 bytes)
165  13       java.util.HashMap::indexFor (6 bytes)
165  14       java.util.HashMap::hash (23 bytes)
165  15       java.util.HashMap::get (79 bytes)
166  16       java.lang.Integer::valueOf (32 bytes)
174  17 s     phil.StrangeRaceConditionTest::getBuffer (66 bytes)
174  18 s     phil.StrangeRaceConditionTest::remove (10 bytes)
### Excluding compile: phil.StrangeRaceConditionTest::strangeRaceConditionTest
177  19 s     phil.StrangeRaceConditionTest$Buffer::remove (34 bytes)
324  15      made not entrant  java.util.HashMap::get (79 bytes) 
```

并且问题没有出现（至少在我所做的重复尝试中没有出现）。

此外，如果稍微更改 JVM 选项，可能会导致问题消失。使用以下任一方法都无法出现问题。

```
java -XX:+PrintCompilation -XX:CompileThreshold=100000 phil.StrangeRaceConditionTest
java -XX:+PrintCompilation -XX:FreqInlineSize=1 phil.StrangeRaceConditionTest 
```

有趣的是，这两个的编译输出仍然显示了删除循环的 OSR。我的猜测（这是一个很大的猜测）是通过编译阈值延迟 JIT 或更改 FreqInlineSize 会在这些情况下导致 OSR 处理发生更改，从而绕过您可能遇到的错误。

有关 JVM 选项的信息，请参见[此处](http://www.oracle.com/technetwork/java/javase/tech/vmoptions-jsp-140102.html)。

有关-XX:+PrintCompilation 的输出以及如何弄乱 JIT 所做的事情的信息，请参见[此处](http://blog.joda.org/2011/08/printcompilation-jvm-flag.html)和[此处。](https://gist.github.com/1165804#file_notes.md)

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2012-06-11T15:20:53.840

因此，根据您发布的代码，除非在and设置之间引发异常，否则您永远不会被`Broke Synchronization`打印出来。请参阅下面的更好模式。`getBuffer()``true``false`

**编辑：**

我采用了@Luke 的代码并将其缩减为[这个 pastebin 类](http://pastebin.com/AF85FRT7)。如我所见，@Luke 遇到了 JRE 同步错误。我知道这很难相信，但我一直在查看代码，但我看不出问题所在。

* * *

既然你提到`ConcurrentModificationException`了，我怀疑`getBuffer()`它在遍历`list`. *您发布的代码不*应该`ConcurrentModificationException`因为同步而抛出 a ，但我怀疑一些额外的代码正在调用或未`add`同步，或者您在遍历. 在迭代时修改未同步集合的唯一方法是通过以下方法：`remove`*`list``Iterator.remove()`*

 *```
Iterator<Object> iterator = list.iterator();
while (iterator.hasNext()) {
   ...
   // it is ok to remove from the list this way while iterating
   iterator.remove();
} 
```

为了保护您的标志，请务必在设置这样的关键布尔值时使用 try/finally。然后任何异常都会适当地恢复`insideGetBuffer`：

```
synchronized public Object getBuffer() {
    insideGetBuffer = true;
    try {
        int i=0;
        for(Object item : list) {
            i++;
        }
    } finally {
        insideGetBuffer = false;
    }
    return null;
} 
```

此外，围绕特定对象进行同步而不是使用方法同步是一种更好的模式。如果您试图保护`list`，那么每次都围绕该列表添加同步会更好。n

```
 synchronized (list) {
    list.remove();
 } 
```

您还可以将您的列表变成一个同步列表，您不必`synchronize`每次都这样做：

```
 List<Object> list = Collections.synchronizedList(new ArrayList<Object>()); 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-06-11T15:20:05.493

基于该代码，“中断同步”只有两种打印方式。

1.  他们在不同的对象上同步（你说他们不是）
2.  `insideGetBuffer`正在被同步块之外的另一个线程更改。

如果没有这两个，您列出的代码将无法打印“中断同步”和`ConcurrentModificationException`. 你能给出一小段代码来证明你在说什么吗？

**更新：**

我浏览了 Luke 发布的示例，我在 Java 1.6_24-64 位 Windows 上看到了奇怪的行为。TestBuffer 的相同实例和值`insideGetBuffer`在 remove 方法中是“交替的”。**请注意**，该字段不会在同步区域之外更新。只有一个 TestBuffer 实例，但我们假设它们不是 -`insideGetBuffer`永远不会设置为 true（因此它必须是同一个实例）。

```
 synchronized public void remove(Object item) {

            boolean b = insideGetBuffer;
            if(insideGetBuffer){
                    System.out.println("Broke Synchronization : " +  b + " - " + insideGetBuffer);
            }
    } 
```

有时会打印`Broke Synchronization : true - false`

我正在努力让汇编程序在 Windows 64 位 Java 上运行。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-06-11T15:21:59.037

大多数情况下，ConcurrentModificationException 不是由并发线程引起的。它是由在迭代时修改集合引起的：

```
for (Object item : list) {
    if (someCondition) {
         list.remove(item);
    }
} 
```

如果 someCondition 为真，上述代码将导致 ConcurrentModificationException。迭代时，只能通过迭代器的方法修改集合：

```
for (Iterator<Object> it = list.iterator(); it.hasNext(); ) {
    Object item = it.next();
    if (someCondition) {
         it.remove();
    }
} 
```

我怀疑这就是您的真实代码中发生的情况。发布的代码很好。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-06-12T07:27:16.947

你能试试这个自包含测试的代码吗？

```
public static class TestBuffer {
    private final List<Object> list = new ArrayList<Object>();
    private boolean insideGetBuffer = false;

    public TestBuffer() {
        System.out.println("Creating a TestBuffer");
    }

    synchronized public void add(Object item) {
        list.add(item);
    }

    synchronized public void remove(Object item) {
        if (insideGetBuffer) {
            System.out.println("Broke Synchronization ");
            System.out.println(item);
        }

        list.remove(item);
    }

    synchronized public void getBuffer() {
        insideGetBuffer = true;
//      System.out.println("getBuffer.");
        try {
            int count = 0;
            for (int i = 0, listSize = list.size(); i < listSize; i++) {
                if (list.get(i) != null)
                    count++;
            }
        } finally {
//          System.out.println(".getBuffer");
            insideGetBuffer = false;
        }
    }
}

public static void main(String... args) throws IOException {
    final TestBuffer tb = new TestBuffer();
    ExecutorService service = Executors.newCachedThreadPool();
    final AtomicLong count = new AtomicLong();
    for (int i = 0; i < 16; i++) {
        final int finalI = i;
        service.submit(new Runnable() {
            @Override
            public void run() {
                while (true) {
                    for (int j = 0; j < 1000000; j++) {
                        tb.add(finalI);
                        tb.getBuffer();
                        tb.remove(finalI);
                    }
                    System.out.printf("%d,: %,d%n", finalI, count.addAndGet(1000000));
                }
            }
        });
    }
} 
```

印刷

```
Creating a TestBuffer
11,: 1,000,000
2,: 2,000,000
... many deleted ...
2,: 100,000,000
1,: 101,000,000 
```

* * *

更详细地查看您的堆栈跟踪。

```
Caused by: java.util.ConcurrentModificationException
    at java.util.HashMap$HashIterator.nextEntry(Unknown Source)
    at java.util.HashMap$KeyIterator.next(Unknown Source)
    at <removed>.getBuffer(<removed>.java:62) 
```

您可以看到您正在访问 HashMap 的键集，而不是列表。这很重要，因为键集是基础地图上的*视图。*这意味着您需要确保对该地图的每次访问也受到同一个锁的保护。例如说你有一个像

```
Collection list;
public void setList(Collection list) { this.list = list; }

// somewhere else
Map map = new HashMap();
obj.setList(map.keySet());

// "list" is accessed in another thread which is locked by this thread does this
map.put("hello", "world");
// now an Iterator in another thread on list is invalid. 
```

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2012-06-14T14:07:03.573

Controller 类中的“getBuffer”函数造成了这个问题。如果两个线程第一次同时进入下面的“if”条件，那么控制器最终会创建两个缓冲区对象。add 函数在第一个对象上调用， remove 将在第二个对象上调用。

```
if (colorToBufferMap.containsKey(defaultColor)) { 
```

当两个线程（添加和删除线程）同时进入时（缓冲区尚未添加到 colorToBufferMap 时），上面的 if 语句将返回 false，两个线程都会进入 else 部分并创建两个缓冲区，因为缓冲区是一个这两个线程的局部变量将接收两个不同的缓冲区实例作为返回语句的一部分。但是，只有最后一个创建的会存储在全局变量“colorToBufferMap”中。

上面有问题的行是 getBuffer 函数的一部分

```
public TestBuffer getBuffer() {
    TestBuffer buffer = null;
    if (colorToBufferMap.containsKey(defaultColor)) {
        buffer = colorToBufferMap.get(defaultColor);
    } else {
        buffer = new TestBuffer();
        colorToBufferMap.put(defaultColor, buffer);
    }
    return buffer;
} 
```

在 Controller 类中同步“getBuffer”函数将解决此问题。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2012-06-11T15:29:33.367

**编辑：**仅当在重复调用方法时使用两个不同的 Object 实例时，答案才有效。

场景：您有两个同步方法。一个用于删除实体，另一个用于访问。当 1 个线程在 remove 方法中而另一个线程在 getBuffer 方法中并设置 insideGetBuffer=true 时，问题就出现了。

正如您发现的那样，您需要将同步放在列表中，因为这两种方法都适用于您的列表。

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2012-06-12T16:16:09.623

如果对 list 和 insideGetBuffer 的访问完全包含在该代码中，则代码看起来肯定是线程安全的，并且我看不到可以打印“中断同步”的可能性，除非出现 JVM 错误。

您能否仔细检查对您的成员变量（列表和 insideGetBuffer）的所有可能访问？可能性包括列表是否通过构造函数（您的代码未显示）传递给您，或者这些变量是受保护的变量，因此子类可以更改它们。

另一种可能性是通过反射访问。

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2012-06-13T22:32:12.247

我不相信这是 JVM 中的错误。

我的第一个怀疑是编译器正在执行某种重新排序操作（在我的机器上，它在调试器中运行良好，但运行时同步失败）但是

我不能告诉你为什么，但我非常怀疑某些东西正在放弃对 TestBuffer 的锁定，这在声明 getBuffer() 和 remove(...) 同步时是隐含的。

例如，将它们替换为：

```
public void getBuffer() {
    synchronized (this) {
        this.insideGetBuffer = true;
        try {
            int i = 0;
            for (Object item : this.list) {
                if (item != null) {
                    i++;
                }
            }
        } finally {
            this.insideGetBuffer = false;
        }
    }

}

public void remove(final Object item) {
    synchronized (this) {
        // fails if this is called while getBuffer is running
        if (this.insideGetBuffer) {
            System.out.println("Broke Synchronization ");
            System.out.println(item);
        }
    }
} 
```

而且您仍然有同步错误。但是选择其他东西登录，例如：

```
private Object lock = new Object();
public void getBuffer() {
    synchronized (this.lock) {
        this.insideGetBuffer = true;
        try {
            int i = 0;
            for (Object item : this.list) {
                if (item != null) {
                    i++;
                }
            }
        } finally {
            this.insideGetBuffer = false;
        }
    }

}

public void remove(final Object item) {
    synchronized (this.lock) {
        // fails if this is called while getBuffer is running
        if (this.insideGetBuffer) {
            System.out.println("Broke Synchronization ");
            System.out.println(item);
        }
    }
} 
```

一切都按预期工作。

现在，您可以通过添加以下内容来模拟放弃锁：

```
this.lock.wait(1); 
```

在 getBuffer() 的 for 循环中，您将再次开始失败。

我仍然对放弃锁的原因感到困惑，但总的来说，在受保护的锁上使用显式同步可能比同步运算符更好*。*

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2012-06-20T08:16:38.310

我之前也遇到过类似的问题。错误是您没有将某些字段声明为`volatile`. 该关键字用于表示一个字段将被不同的线程修改，因此它不能被缓存。相反，所有写入和读取都必须转到字段的“真实”内存位置。

有关更多信息，请在 Google 上搜索“ [Java 内存模型](https://www.google.com/#q=java+memory+model)”

尽管大多数读者都关注 class `TestBuffer`，但我认为问题可能出在其他地方（例如，您是否尝试在类 Controller 上添加同步？或者将其字段设置为 volatile ？）。

附言。请注意，不同的 java VM 可能在不同的平台上使用不同的优化，因此同步问题在一个平台上可能比另一个平台上出现的频率更高。唯一安全的方法是遵守 Java 规范，如果 VM 不遵守它，则提交错误。*

# c# - 错误：无法计算表达式，因为代码已优化

> ID：10982949
> 
> 赞同：12
> 
> 时间：2012-06-11T15:16:48.633
> 
> 标签：c#, asp.net, master-pages, server.transfer

我的 asp.net 应用程序出现错误，内容为

**“无法评估表达式，因为代码已优化或本机框架位于调用堆栈顶部。”**

```
protected void btnCustomerProfile_Click(object sender, EventArgs e)
{
    try
    {
        Server.Transfer("CustomerProfile.aspx");
    }
    catch (Exception ex)
    {
        Response.Write(ex.ToString());
    }
    finally
    { }
} 
```

搜索SO后，我看到大多数类似的帖子都涉及response.redirect。我的代码正在使用 server.transfer，我的应用程序也正在使用 Master Pages。

我该如何解决这个问题？

**更新：**由于某种原因，发生此错误是我也使用 Response.Redirect 。不幸的是，我不能使用 Server.Execute，因为 Server.Execute 会在最后调用调用页面。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-06-21T01:46:16.793

你会得到一个错误，但下面的代码块会捕获它，你可以继续你的生活。

**尝试这个：**

```
using System.Threading.ThreadAbortException;

catch(ThreadAbortException ex)
{
    throw;
} 
```

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2012-06-11T15:32:06.043

您描述的问题似乎是设计使然，如下所示：

[http://support.microsoft.com/kb/312629/EN-US/](http://support.microsoft.com/kb/312629/EN-US/)

使用`Server.Execute`应该可以解决问题

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2014-12-18T10:49:17.377

当我使用 MS-Test 测试多线程应用程序的工作时，我遇到了这个消息。

我发现这是因为测试主线程结束并初始化了对象清理，而其他创建的旨在无限运行的线程仍在工作。

当乳头清理方法杀死对象时，这些线程被中止并显示上述消息。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-06-11T15:38:30.460

您是否尝试过用`server.transfer`替换`response.redirect()`？

[Server.Transfer VS Response.Redirect](http://www.codeproject.com/Articles/775221/Server-Transfer-VS-Response-Redirect-Simplified)

# ios - Cocos2D 花栗鼠

> ID：10982964
> 
> 赞同：0
> 
> 时间：2012-06-11T15:17:37.623
> 
> 标签：ios, cocos2d-iphone, chipmunk

我正在使用花栗鼠，我想将盒子堆叠成一列，但是当它们碰撞时，它们会反弹。我已经将所有盒子的弹性设置为 0，但它们仍在向上反弹。

有什么建议可以阻止这种行为吗？

谢谢！！！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-11T21:36:46.827

Depending on how large the stack of boxes is, you'll need to increase the number of iterations to increase the solver's accuracy.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-11T16:08:47.157

我不太了解花栗鼠。但我猜它应该接近 Box2D。

在 Box2D 中，您可以简单地将所有框的“恢复”值设置为“0”来阻止它。

例如：

```
boxFixtureDef.restitution = 0.0f; 
```

我希望这能为在 Chipmunk 中解决这个问题提供一些想法。

# ios5 - 如何使 iOS 应用程序中的所有窗口都支持旋转？

> ID：10982966
> 
> 赞同：0
> 
> 时间：2012-06-11T15:17:59.847
> 
> 标签：ios5, rotation, xcode4.3

我了解 iOS 平台的整个应用程序开发。有谁知道如何让所有的窗口都支持 iOS 5 平台的旋转。我目前正在使用 XCode 4.3.2。无论是编码还是故事板解释都会很棒！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-11T15:20:22.077

返回您想要支持的方向，如下所示：

```
- (BOOL)shouldAutorotateToInterfaceOrientation:(UIInterfaceOrientation)interfaceOrientation {
    return interfaceOrientation == UIInterfaceOrientationPotrait;
} 
```

当你创建一个新的视图控制器时，你会在代码底部看到这个函数。

# asp.net - 使用 OneLogin 和 DotNetOpenAuth 在 CrossDomain 上进行 ASP.Net 单点登录

> ID：10982968
> 
> 赞同：5
> 
> 时间：2012-06-11T15:18:08.973
> 
> 标签：asp.net, cross-domain, single-sign-on, onelogin

我正在开发一个需要对 2 个网站进行跨域（非子域）身份验证的单点登录项目。

我在这里和网络上搜索了其他人所说的内容，并尝试使用 DotNetOpenAuth，但我无法理解它，文档也没有太大帮助。所以我转向[OneLogin](http://www.onelogin.com/)，它似乎提供了我想要的东西，但同样缺乏文档。我想我必须同时使用它们，但我无法连接拼图的各个部分。

我越来越接近实现我自己的基于[Web 应用程序的单点登录企业安全性](http://msdn.microsoft.com/en-us/library/ms972971.aspx)的 SSO 解决方案，但我希望避免这种情况，因为它比使用现有解决方案需要更多时间并且更容易出错。

因此，现在为所有大师提出一些问题：

1.  您能否阐明如何使用 DotNetOpenAuth 在 OneLogin 中对用户进行身份验证？
2.  我在哪里可以获得更多 OneLogin 的示例？
3.  对于那些尝试过 VS2010 项目模板的人来说，DotNetOpenAuth 是编译还是缺少 RelyingPartyLogic.dll？我在哪里可以得到那个？

谢谢你的帮助！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-24T22:57:38.613

DotNetOpenAuth supports OpenID, OAuth, and InfoCard. The OneLogin SAML toolkit is for web based-sso with SAML. These two libraries will not work together.

For more information on the OneLogin .NET toolkit I can recommend this article [https://onelogin.zendesk.com/entries/20186386-introduction-to-onelogin-s-saml-toolkits](https://onelogin.zendesk.com/entries/20186386-introduction-to-onelogin-s-saml-toolkits)

DotNetOpenAuth will help you do what you want to do provided you can support OpenID from your 2 websites; however, my recommendation is for you to look into the SAML family of protocols (wikipedia has a good article on this) You need to implement an identity provider (the site that authenticates you), and the consumer (the site you access).

You might want to look at a comparison between OpenID and SAML in order to choose which is better for you. Here is further reading that can help with that: [https://onelogin.zendesk.com/entries/270738-openid-or-saml-for-enterprise-sso](https://onelogin.zendesk.com/entries/270738-openid-or-saml-for-enterprise-sso)

# ivy - 常春藤：解决从描述符中删除配置文件

> ID：10982974
> 
> 赞同：-1
> 
> 时间：2012-06-11T15:18:20.657
> 
> 标签：ivy, artifactory

我有一个实用程序项目，我使用 Ivy 和 Ant 构建并发布到 Artifactory：

**用于 utils 项目的 ivy.xml：**

```
<ivy-module xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
            xmlns:m="http://ant.apache.org/ivy/maven"
            xsi:noNamespaceSchemaLocation="http://ant.apache.org/ivy/schemas/ivy.xsd"
            version="2.0">
    <info organisation="org.abc" module="utils"/>

    <configurations defaultconfmapping="%->default,sources">
        <conf name="default"/>
        <conf name="sources"/>
        <conf name="compile-main" extends="default" visibility="private" transitive="false"/>
        <conf name="compile-test" extends="compile-main" visibility="private" transitive="false"/>
        <conf name="run-test" extends="compile-test" visibility="private" transitive="true"/>
    </configurations>

    <publications>
        <artifact name="utils" type="jar"/>
        <artifact name="utils-src" type="source" ext="zip" conf="sources" m:classifier="sources"/>
    </publications>

    <dependencies>
        <--snip... -->
    </dependencies>
</ivy-module> 
```

这工作正常。我可以看到 JAR、the`-sources.zip`和 Ivy 描述符很好地发布到 Artifactory。

然后我尝试在依赖项目中使用这个 JAR：

**ivy.xml 用于依赖项目：**

```
<ivy-module xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
            xmlns:m="http://ant.apache.org/ivy/maven"
            xsi:noNamespaceSchemaLocation="http://ant.apache.org/ivy/schemas/ivy.xsd"
            version="2.0">
    <info organisation="org.abc" module="dependent"/>

    <configurations defaultconfmapping="%->default,sources">
        <conf name="default"/>
        <conf name="compile-main" extends="default" visibility="private" transitive="false"/>
        <conf name="compile-test" extends="compile-main" visibility="private" transitive="false"/>
        <conf name="run-test" extends="compile-test" visibility="private" transitive="true"/>
    </configurations>

    <dependencies> 
        <dependency org="org.abc" name="utils" rev="latest.integration" conf="default"/> 
        <!-- snip... -->
    </dependencies>
</ivy-module> 
```

如果我`defaultconfmapping`将依赖项目的 更改为`%->default`，一切正常。当我设置为`defaultconfmapping`时`%->default,sources`，其他依赖项（JUnit、log4j 等）的源可以正常下载，但我的 utils 项目的源出现错误：

```
[ivy:resolve] :: problems summary ::
[ivy:resolve] :::: WARNINGS
[ivy:resolve]       ::::::::::::::::::::::::::::::::::::::::::::::
[ivy:resolve]       ::          UNRESOLVED DEPENDENCIES         ::
[ivy:resolve]       ::::::::::::::::::::::::::::::::::::::::::::::
[ivy:resolve]       :: org.abc#utils;20120611153645: configuration not found in org.abc#utils;20120611153645: 'sources'. It was required from org.abc#dependent;working@blah.abc.org default
[ivy:resolve]       :::::::::::::::::::::::::::::::::::::::::::::: 
```

有趣的是，如果我查看 Ivy 缓存内部，Ivy XML 文件如下所示：

```
<ivy-module version="2.0">
    <info organisation="org.abc"
            module="utils"
            revision="20120611153645"
            status="release"
            publication="20120611154459"
            default="true"
    />
    <configurations>
            <conf name="default" visibility="public"/>
    </configurations>
    <publications>
            <artifact name="utils" type="jar" ext="jar" conf="default"/>
    </publications>
</ivy-module> 
```

因此，出于某种原因，Ivy 决定在解析过程中从描述符中删除所有私有 conf（有意义）+ 源 conf + 源工件。我终其一生都无法理解为什么。我可以看到 XML 文件在 Artifactory 中很好——就像我写的一样。那么，为什么 Ivy 在解决它时会放弃源信息呢？

作为参考，这是我的 Ant 脚本的早期部分：

```
<ivy:configure url="http://repo:8081/artifactory/simple/bootstrap-local/ivysettings.xml"/>
<ivy:resolve log="downloadOnly"/>
<fail message="Go check out the cache file now"/> <!-- added to find out whether resolve or retrieve broke it --> 
```

使困惑！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-12T00:24:24.400

无法重现您的问题。也许这个工作示例会有所帮助......

# 测试

```
|-- proj1
|   |-- build.xml
|   `-- ivy.xml
`-- proj2
    |-- build.xml
    `-- ivy.xml 
```

运行构建后如下

```
ant -f ./proj1/build.xml
ant -f ./proj2/build.xml 
```

具有以下文件结构

```
|-- proj1
|   |-- build
|   |   |-- ivy.xml
|   |   |-- utils.jar
|   |   `-- utils-src.zip
|   |-- build.xml
|   `-- ivy.xml
`-- proj2
    |-- build.xml
    |-- ivy.xml
    `-- lib
        `-- utils-20120612011906.jar 
```

## 项目1

构建.xml

```
<project name="demo" default="run" xmlns:ivy="antlib:org.apache.ivy.ant">

    <target name="init">
        <echo file="build/utils.jar"/>
        <echo file="build/utils-src.zip"/>
    </target>

    <target name="run" depends="init">
        <ivy:resolve/>

        <ivy:publish resolver="local">
            <artifacts pattern="build/[artifact].[ext]" />
        </ivy:publish>    
    </target>

</project> 
```

常春藤.xml

```
<ivy-module xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
            xmlns:m="http://ant.apache.org/ivy/maven"
            xsi:noNamespaceSchemaLocation="http://ant.apache.org/ivy/schemas/ivy.xsd"
            version="2.0">
    <info organisation="org.abc" module="utils"/>

    <configurations>
        <conf name="default"/>
        <conf name="sources"/>
    </configurations>

    <publications>
        <artifact name="utils" type="jar" conf="default"/>
        <artifact name="utils-src" type="source" ext="zip" conf="sources" m:classifier="sources"/>
    </publications>

</ivy-module> 
```

## 项目2

构建.xml

```
<project name="demo" default="run" xmlns:ivy="antlib:org.apache.ivy.ant">

    <target name="run">
        <ivy:retrieve/>
    </target>

</project> 
```

常春藤.xml

```
<ivy-module xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
            xmlns:m="http://ant.apache.org/ivy/maven"
            xsi:noNamespaceSchemaLocation="http://ant.apache.org/ivy/schemas/ivy.xsd"
            version="2.0">
    <info organisation="org.abc" module="utils-use"/>

    <configurations>
        <conf name="default"/>
        <conf name="sources"/>
    </configurations>

    <dependencies>
        <dependency org="org.abc" name="utils" rev="latest.integration" conf="default"/> 
    </dependencies>

</ivy-module> 
```

# php - 适合此类项目的数据库结构？

> ID：10982977
> 
> 赞同：0
> 
> 时间：2012-06-11T15:18:29.363
> 
> 标签：php, database, data-structures

我正在做一个网站分析项目。用户可以使用我的 API（如 Google Analytics）记录/查看他们的网站流量报告。

问题是，我不确定应该如何设置数据库结构。

我已经为用户管理目的设置了一些表：

用户表：`|| userID || userName || datReg ||`

账户信息表：`|| accountInfoID || userID || fName || lName || emailAddress ||`

所以我想我可以做类似的事情：

现场分析表：`|| analyID || userID || visitorIP || visitorCountry || pageviewCount || pageviewData`

但这会是可扩展的吗？**我的意思是，使用这种结构，每天**可能会插入数万行，那么几个月后会不会很慢？

有了上面的想法，我会为每次独特的访问运行一个类似的查询：

```
INSERT INTO siteAnaly (userID,visitorIP,visitorCountry,pageviewCount,pageviewData) VALUES ("the accounts holders user ID","the visitors IP","the visitors country","the visitors apge view count","a JSON array of the visitors pageview URI's") 
```

然后，在每次综合浏览量中，从上面的查询中插入的那一行都会被更新。递增`pageviewCount`并附加到`pageviewData`

我的另一个想法（您可能认为这很愚蠢）是为每个用户创建一个以用户 ID 命名的新表。

您认为处理这样​​的项目的最佳方法是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-11T15:21:48.393

`visitorIP`并且`vistorCountry`可以移动到不同的表。这些值肯定会重复。你想保存什么样的数据`pageViewData`？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-11T15:24:57.090

它确实会有大量的数据输入，在这种情况下，您需要做的是将数据拆分到不同的表甚至数据库中，以确保您不会弄乱主数据源。您很少需要查询大部分未处理的数据，因此您的目标是：

1.  创建一个存储未处理数据的数据库以供以后参考
2.  创建一个经过处理的数据库，该数据库编译聚合表中的所有可能数据
3.  创建一个将生成聚合数据的脚本
4.  如果您绝对需要实时数据，请创建一个可以从当今未处理的数据中查找数据的应用程序。

我去看了一个很好的会议并对其进行了评论，发布在我的博客上，您可能想阅读它：

[http://crazycoders.net/2012/03/confoo-2012-continous-data-processing/](http://crazycoders.net/2012/03/confoo-2012-continous-data-processing/)

祝你好运

# javascript - 比较未定义和错误的非常奇怪的行为

> ID：10982979
> 
> 赞同：4
> 
> 时间：2012-06-11T15:18:43.583
> 
> 标签：javascript, comparison, logic, comparison-operators

我在控制台中有这个输出：

```
console.log((!undefined)==(!false)) // true (fine)
console.log((!!undefined)==(!!false)) // true (still fine) 
```

据我所知，`!!x==x`不是吗？

```
console.log((undefined)==(false)) // false 
```

谁能告诉我为什么这返回错误？

不是真的`!!false==false`吗`!!undefined==undefined`？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-11T15:23:35.943

是的。 `!!x`不*返回*x。 `!undefined` *强制* `undefined` *转换为布尔值*, `false`，然后找到`!((bool)undefined)`= `!false`，如果我们使用 C++ 强制转换表示法。所以`!!undefined`给出`!!((bool)undefined)`= `!!(false)`= `!true`= `false`，而不是`undefined`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-11T15:23:10.360

Undefined 不是`boolean`类型，`false`所以当你直接比较它们时，它们是不相等的。

有关其他比较陷阱，请参见[此处](http://www.mapbender.org/JavaScript_pitfalls%3a_null,_false,_undefined,_NaN)。

```
typeof(undefined)
"undefined"

typeof(false)
"boolean" 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-11T15:23:34.283

```
console.log(!undefined)
// true
console.log(!false)
// true
console.log(!!undefined)
// false
console.log(!!false)
// false 
```

# php - 在程序运行时使用 C 连接到数据库（Redis）一次

> ID：10982982
> 
> 赞同：0
> 
> 时间：2012-06-11T15:18:54.083
> 
> 标签：php, c, database, redis

使用一种`OO`语言，我经常使用工厂设计模式连接到数据库：

```
// Connect to Redis ( PHP )
protected function get_redis() {
   static $redis = false;
   if( $redis === false ) {
      $redis = new Predis\Client(Configure::read('redis.db'));
   }
   return $redis;
} 
```

我做过很多`C`但从来没有任何大项目。我想知道如何在不打开多个连接的情况下连接到 C 中的 Redis DB（或任何 DB）。我知道我可以使用全局变量，但有更好的方法吗？我不想强行使用工厂模式——它是面向对象的。有没有人有任何例子？

非常感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-11T15:28:02.403

我在这里不同意你的看法。工厂方法不一定会在您的代码上打上 OO 标记。它只是一种创造事物的模式。

如果您不想创建多个连接，您可以在`get_connection`函数中进行控制。这是此模式的另一个应用程序。

# php - Delphi 相当于 php 中的“fsockopen”函数是什么？

> ID：10982983
> 
> 赞同：2
> 
> 时间：2012-06-11T15:18:56.353
> 
> 标签：php, delphi

Delphi 相当于 php 中的“fsockopen”函数是什么？

在[PHP 手册](http://php.net/manual/en/function.fsockopen.php)中：

```
resource fsockopen ( string $hostname [, int $port = -1 [, int &$errno [, string &$errstr     [, float $timeout = ini_get("default_socket_timeout") ]]]] )
Initiates a socket connection to the resource specified by hostname. 
```

我的代码完全是：

```
function accountcreate($username, $password, $connection, $bandwidth, $disabledate,  $disabletime)
{
$adminpassword='';
$adminport=82;
$proxyaddress='127.1.1.1';

$fp = fsockopen($proxyaddress, $adminport, &$errno, &$errstr, 1000);
if(!$fp) 
{
        echo "$errstr ($errno)<br>\n";
} 
else 
{
    $url_ = "/account";
    $url = "add=1"."&";
    .
    .
    $url = $url."userid=-1";
    $len = "Content-Length: ".strlen($url);
    $auth = "Authorization: Basic ".base64_encode("admin:".$adminpassword);
    $msg = "POST ".$url_." HTTP/1.0\r\nHost: ".$proxyaddress."\r\n".$auth."\r\n".$len."\r\n"."\r\n".$url;
    fputs($fp,$msg);
    echo $msg;

    fclose($fp);
} 
```

该代码在 ccproxy 中创建了一个新帐户。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-11T15:48:22.517

也许看看 Delphi 附带的 Indy Components（至少假设 Delphi7）。你需要：

[TIdTCPConnection 文档](http://www.indyproject.org/docsite/html/frames.html?frmname=topic&frmfile=TIdTCPConnection.html)

其中包含一个`IOHandler`属性（TIdIOHandler），您可以在其中指定以下中使用的参数`fsockopen`：

[TIdTCPConnection.IOHandler 属性](http://www.indyproject.org/docsite/html/frames.html?frmname=topic&frmfile=TIdTCPConnection_IOHandler.html)

[TIdIOHandler 文档](http://www.indyproject.org/docsite/html/frames.html?frmname=topic&frmfile=TIdIOHandler.html)

然而，正如其他人所指出的那样，通过查看 PHP 代码中的大局并可能使用更高级别的工具来实现其功能，您可能会得到很好的服务，例如`TIdHTTP`：

[TIdHTTP 文档](http://www.indyproject.org/docsite/html/frames.html?frmname=topic&frmfile=TIdHTTP.html)

# jsf-2 - 如何将托管 Bean 字段设置为 ui:param 的值？

> ID：10982987
> 
> 赞同：2
> 
> 时间：2012-06-11T15:19:13.957
> 
> 标签：jsf-2

我有一个 JSF 页面，它包含在其他 JSF 页面中（基本上是一个页面标题，带有公共信息）。这个公共页面有它自己的控制器，并且依赖于包含这个公共页面的页面向它传递一些公共数据。

具体来说，我目前正在尝试使用以下方法将这个公共页面包含在其他页面上：

```
<ui:include src="commonPage.xhtml">
   <ui:param name="commonData" value="#{thisPagesController.commonData}"/>
</ui:include> 
```

应该将“commonData”传递给 commonPage.xhtml 页面，并理想地在 CommonPageController 类上设置“commonData”属性：

```
@ManagedProperty("#{commonData}")
CommonData commonData; 
```

但是，这不起作用...托管属性未设置。

这样做的正确方法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-05T19:58:41.710

请参阅 BalusC 的评论。JSF API 规范中没有这方面的标准。请改用复合或自定义组件。

# java - 使用 OpenCV 进行椭圆检测

> ID：10982988
> 
> 赞同：12
> 
> 时间：2012-06-11T15:19:20.187
> 
> 标签：java, android, opencv, image-processing, computer-vision

我想使用 OpenCV for Android 检测椭圆，使用 OpenCV 2.4.1 包中包含的 Tutorial 2-Basic 作为起点。请注意，我的椭圆将是一个完美的 Photoshop 椭圆。

据我了解，使用“HoughCircles”只会找到完美（或左右）的圆圈，因此会忽略椭圆。

任何帮助将不胜感激，因为我是 OpenCV 的初学者

这是我迄今为止尝试过的

```
 case Sample2NativeCamera.VIEW_MODE_CANNY: (ignore the Canny mode...)

        capture.retrieve(mGray, Highgui.CV_CAP_ANDROID_GREY_FRAME);
        Imgproc.HoughCircles(mGray, mCircles, Imgproc.CV_HOUGH_GRADIENT, 1, 20);
        Log.d("Ellipse Points", " X " + mCircles.get(1,1)[0] + mCircles.get(1, 1)[1]);

        break; 
```

如果您认为任何更多信息可能有用，请告诉我。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-11T16:32:45.093

您的问题的一种可能解决方案类似于此线程[Detection of coin (and fit ellipses) on an image](https://stackoverflow.com/q/4785419/1085483)。

你应该看看 opencv 的函数[fitEllipse](http://docs.opencv.org/modules/imgproc/doc/structural_analysis_and_shape_descriptors.html?highlight=fitellipse#fitellipse)。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-06-11T18:11:03.300

中使用的参数`HoughCircles`起着基本作用。`HoughCircles`不仅会检测到完美的，还会检测到接近完美的圆（椭圆）。我建议你检查这个例子：

*   [如何检测照片中的圆圈（硬币）](https://stackoverflow.com/questions/6044119/opencv-cvfindcontours-how-do-i-separate-components-of-a-contour/6931135#6931135)
*   [使用 OpenCV 进行简单的对象检测](https://stackoverflow.com/a/6416361/176769)
*   [OpenCV点目标检测](https://stackoverflow.com/a/10416428/176769)
*   [将嘈杂的硬币改造成圆形](https://stackoverflow.com/q/10313602/176769)

[这个答案](https://stackoverflow.com/questions/5738792/tutorial-for-iphone-opencv-on-shape-recognising/5739247#5739247)有很多参考资料。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-03-16T20:15:03.350

如果您已经知道要查找的椭圆的大小，请尝试以下步骤：

*   在图像中找到 Canny 边缘
*   使用滑动窗口，其大小是您要查找的椭圆长轴的最大长度。
*   在窗口内，收集所有边缘像素，随机选取 6 个像素，并使用[线性最小二乘法拟合](http://en.wikipedia.org/wiki/Linear_least_squares_%28mathematics%29)[一般形式](http://en.wikipedia.org/wiki/Matrix_representation_of_conic_sections)的椭圆。
*   在类似 RANSAC 的过程中重复上述步骤。
*   如果有足够的内点，你就有一个椭圆。

# navigation - JSF 导航期间的 NullPointerException (MyFaces)

> ID：10982990
> 
> 赞同：0
> 
> 时间：2012-06-11T15:19:27.023
> 
> 标签：navigation, nullpointerexception, myfaces

尝试从一页导航到另一页时出现 NullPointerException。我在 faces-config.xml 中像往常一样定义了导航规则

但由于某种原因，我的 webapp 没有导航到下一页。它停留在当前页面上，我得到看起来像堆栈错误消息的无限循环。

我从 Eclipse 控制台得到的错误堆栈是：

```
SEVERE: Servlet.service() for servlet Faces Servlet threw exception
java.lang.NullPointerException
    at javax.faces.component.UIViewRoot.getViewMap(UIViewRoot.java:657)
    at javax.faces.component.UIViewRoot.getViewMap(UIViewRoot.java:645)
    at org.apache.myfaces.renderkit.ErrorPageWriter._writeVariables(ErrorPageWriter.java:574)
    at org.apache.myfaces.renderkit.ErrorPageWriter.debugHtml(ErrorPageWriter.java:288)
    at org.apache.myfaces.renderkit.ErrorPageWriter.debugHtml(ErrorPageWriter.java:250)
    at org.apache.myfaces.renderkit.ErrorPageWriter.handleThrowable(ErrorPageWriter.java:417)
    at org.apache.myfaces.lifecycle.LifecycleImpl.render(LifecycleImpl.java:274)
    at javax.faces.webapp.FacesServlet.service(FacesServlet.java:191)
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:290)
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)
    at org.apache.myfaces.webapp.filter.ExtensionsFilter.doFilter(ExtensionsFilter.java:349)
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:235)
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)
    at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:311)
    at org.springframework.security.web.access.intercept.FilterSecurityInterceptor.invoke(FilterSecurityInterceptor.java:116)
    at org.springframework.security.web.access.intercept.FilterSecurityInterceptor.doFilter(FilterSecurityInterceptor.java:83)
    at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:323)
    at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:113)
    at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:323)
    at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:101)
    at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:323)
    at org.springframework.security.web.authentication.AnonymousAuthenticationFilter.doFilter(AnonymousAuthenticationFilter.java:113)
    at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:323)
    at org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter.doFilter(SecurityContextHolderAwareRequestFilter.java:54)
    at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:323)
    at org.springframework.security.web.savedrequest.RequestCacheAwareFilter.doFilter(RequestCacheAwareFilter.java:45)
    at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:323)
    at org.springframework.security.web.authentication.www.BasicAuthenticationFilter.doFilter(BasicAuthenticationFilter.java:150)
    at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:323)
    at org.springframework.security.web.authentication.AbstractAuthenticationProcessingFilter.doFilter(AbstractAuthenticationProcessingFilter.java:182)
    at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:323)
    at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:105)
    at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:323)
    at org.springframework.security.web.context.SecurityContextPersistenceFilter.doFilter(SecurityContextPersistenceFilter.java:87)
    at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:323)
    at org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:173)
    at org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:346)
    at org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:259)
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:235)
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)
    at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:233)
    at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:191)
    at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:127)
    at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:102)
    at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:109)
    at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:298)
    at org.apache.coyote.http11.Http11Processor.process(Http11Processor.java:859)
    at org.apache.coyote.http11.Http11Protocol$Http11ConnectionHandler.process(Http11Protocol.java:588)
    at org.apache.tomcat.util.net.JIoEndpoint$Worker.run(JIoEndpoint.java:489)
    at java.lang.Thread.run(Thread.java:662) 
```

我已经阅读了发生这种情况的其他论坛主题，他们提到包括（在 web.xml 中）：

```
<context-param>
  <param-name>javax.faces.DEFAULT_SUFFIX</param-name>
  <param-value>.jsp</param-value>
</context-param> 
```

我已经这样做了，但没有运气。只是强调一下，我之前一直在从事其他 JSF 项目，并且毫无问题地实现了页面导航。所以我不认为这是我的导航规则的问题。

我试图导航到的页面称为“login.jsp”。导航规则如下所示：

```
<navigation-rule>
    <display-name>Global Rule to Login Page</display-name>
    <navigation-case>
        <from-outcome>login</from-outcome>
        <to-view-id>/login.jsf</to-view-id>
    </navigation-case>
</navigation-rule> 
```

任何意见或建议将不胜感激。

非常感谢，格伦

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-24T09:03:31.560

看起来抛出了一些异常，MyFaces 准备呈现相应的错误页面。NullPointerException 似乎在呈现错误页面期间发生。所以看起来原始错误以某种方式隐藏了。

您可以尝试禁用 MyFaces 错误处理，以查看是否以某种方式找到了根本原因：

```
<context-param>
  <param-name>org.apache.myfaces.ERROR_HANDLING</param-name>
  <param-value>false</param-value>
</context-param> 
```

# database - 将外键作为主键可以吗？

> ID：10982992
> 
> 赞同：133
> 
> 时间：2012-06-11T15:19:30.910
> 
> 标签：database, foreign-keys, primary-key

我有两张桌子：

*   用户（用户名、密码）
*   个人资料（profileId，性别，出生日期，...）

目前我正在使用这种方法：每个配置文件记录都有一个名为“userId”的字段作为链接到用户表的*外键。*当用户注册时，他的个人资料记录会自动创建。

我对朋友的建议感到困惑：将“userId”字段作为*外*键和*主*键并删除“profileId”字段。哪种方法更好？

* * *

## 回答 #1

> 赞同：172
> 
> 时间：2012-06-11T15:21:14.103

外键几乎总是“允许重复”，这会使它们不适合作为主键。

相反，找到一个唯一标识表中每条记录的字段，或添加一个新字段（自动递增整数或 GUID）作为主键。

唯一的例外是具有[***一对一***](https://en.wikipedia.org/wiki/One-to-one_(data_model))关系的表，其中链接表的*外*键和*主*键是相同的。

* * *

## 回答 #2

> 赞同：56
> 
> 时间：2012-06-11T15:26:22.307

主键总是需要唯一，如果表是一对多关系，外键需要允许非唯一值。如果表是通过一对一关系而不是一对多关系连接的，则使用外键作为主键是完全可以的。如果您希望同一用户记录有可能拥有超过 1 条相关的个人资料记录，请使用单独的主键，否则坚持您拥有的。

* * *

## 回答 #3

> 赞同：21
> 
> 时间：2017-11-29T23:09:52.590

是的，主键是外键是合法的。这是一个罕见的结构，但它适用于：

*   1:1 的关系。这两个表不能合并为一个，因为不同的权限和特权仅适用于表级别（截至 2017 年，这样的数据库会很奇怪）。

*   1:0..1 的关系。配置文件可能存在也可能不存在，具体取决于用户类型。

*   性能是一个问题，并且设计充当分区：与用户表相比，配置文件表很少被访问，托管在单独的磁盘上或具有不同的分片策略。如果下划线存储是柱状的，则没有意义。

* * *

## 回答 #4

> 赞同：8
> 
> 时间：2017-10-03T02:58:47.570

是的，在这些表之间存在一对一关系的情况下，外键可以是主键

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2016-03-22T17:04:49.803

建立一对一的关系通常被认为是不好的做法。这是因为您可以只将数据表示在一个表中并获得相同的结果。

但是，在某些情况下，您可能无法对所引用的表进行这些更改。在这种情况下，使用外键作为主键没有问题。拥有一个由自动递增的唯一主键和外键组成的复合键可能会有所帮助。

我目前正在开发一个用户可以登录并生成注册码以与应用程序一起使用的系统。由于我不会进入的原因，我无法简单地将所需的列添加到用户表中。因此，我将使用代码表进行一对一的路由。

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2012-06-11T15:21:04.747

我不会那样做。我会保留`profileID`表的主键`Profile`

外键只是两个表之间的引用约束

*有人可能会争辩说，作为从其他表中引用它的任何外键的目标，主键是必要的。外键是任何表中的一个或多个列的集合（不一定是该表的候选键，更不用说该表的主键），它可以保存在某些表的主键列中找到的值其他表。所以我们必须有一个主键来匹配外键。还是我们必须？主键/外键对中的主键的唯一目的是提供一个明确的连接 - 以保持对包含被引用主键的“外”表的引用完整性。这确保外键引用的值始终有效（如果允许，则为 null）。*

[http://www.aisintl.com/case/primary_and_foreign_key.html](http://www.aisintl.com/case/primary_and_foreign_key.html)

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2012-06-12T03:51:29.997

这取决于业务和系统。

如果您的 userId 是唯一的并且始终是唯一的，您可以使用 userId 作为您的主键。但是，如果你想扩展你的系统，那会让事情变得很困难。我建议您在表用户中添加外键以与表配置文件建立关系，而不是在表配置文件中添加外键。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2021-07-22T18:59:07.307

它并不完全适用于问题的情况，但由于我最终在这个问题上搜索其他信息并阅读了一些评论，我可以说在表中只有一个 FK 并获得唯一值是可能的。您可以使用具有只能分配 1 次的类的列，它的工作方式几乎与 ID 类似，但是如果您想使用唯一的分类值来区分每条记录，则可以这样做。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2019-05-16T18:54:01.797

简短回答：取决于....在这种特殊情况下，它可能没问题。但是，专家几乎每次都会反对它。包括你的情况。

为什么？

表中的键很少是唯一的，因为它们对于所讨论的表来说是外来的（起源于另一个表中）。例如，项目 ID 在 ITEMS 表中可能是唯一的，但在 ORDERS 表中可能是唯一的，因为同一类型的项目很可能存在于另一个订单中。同样，订单 ID 在 ORDERS 表中可能是唯一的（可能），但在诸如 ORDER_DETAILS 之类的其他表中不是唯一的，其中可以存在具有多个行项目的订单并查询特定订单中的特定项目，您需要连接两个FK（order_id 和 item_id）作为此表的 PK。

我不是数据库专家，但如果你能从逻辑上证明有一个自动生成的值作为你的 PK，我会这样做。如果这不切实际，那么两个（或更多）FK 的串联可以作为您的 PK。但是，我想不出任何可以将单个 FK 值证明为 PK 的情况。

# sql-server - SQL Server：多列索引

> ID：10982995
> 
> 赞同：1
> 
> 时间：2012-06-11T15:19:54.263
> 
> 标签：sql-server, indexing

> **可能重复：**
> [使用包含列或不使用创建索引的差异](https://stackoverflow.com/questions/10828568/difference-of-create-index-by-using-include-column-or-not-using)

**编辑：忽略此帖子，我将其标记为 mod，因为它是重复的。谢谢大家的回复！**

创建多列索引，这两者有什么区别：

```
CREATE INDEX MyIndex ON TABLE1 (COLUMN1 ASC, COLUMN2 ASC, COLUMN3 ASC, [etc...]) 
```

对比

```
CREATE INDEX MyIndex ON TABLE1 (COLUMN1 ASC)
INCLUDE (COLUMN2, COLUMN3, [etc...] ) 
```

MSDN 说后者意味着包括非关键列。通俗地说，这意味着什么？重点是，我基本上要处理这样一种情况，即我必须优化查询，这些查询只需要表中几十列中的 3-5 列的数据，可以说使用其中一列作为“基础”索引并获取来自同一行的其他列值。

在一个上创建聚集索引不是一种选择，因为表会定期更新，这往往会创建大量的锁和等待。我目前正在测试这些，但我也想从你们那里得到一个明智的答案。:)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-11T15:30:23.727

这意味着索引不是基于 INCLUDE 子句中的列，这意味着当 INCLUDE 子句中的列被更新时，索引中的相应行不必移动。有关详细信息，包括使用场景，请参阅[此](http://www.sqlservercentral.com/articles/Stairway+Series/72276/)