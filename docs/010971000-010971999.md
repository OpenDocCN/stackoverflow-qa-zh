# StackOverflow 问答 10971000-10971999

# class - 结构可以从 .NET 中的类继承吗？

> ID：10971003
> 
> 赞同：1
> 
> 时间：2012-06-10T17:59:52.107
> 
> 标签：class, inheritance, struct

我对 .NET 中的继承感到困惑，这就是原因。

我之前的理解是，结构不能从 .NET 中的类继承，因此例如，以下内容将无法编译：

```
struct MyStruct : MyClass
{

} 
```

但是今天我读到整数（和其他值类型）是结构而不是对象，它们继承自[ValueType](http://msdn.microsoft.com/en-us/library/system.valuetype.aspx)类。ValueType 类继承自[System.Object](http://msdn.microsoft.com/en-us/library/system.object.aspx)，其目的是重写[System.Object](http://msdn.microsoft.com/en-us/library/system.object.aspx)中的某些方法，以使这些方法适用于值类型。

那么有什么关系呢？结构可以从 .NET 中的类继承吗？它不能还是只能在某些情况下？

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-11T16:58:45.730

在 .net 的内部，包含某些成员的结构的定义与具有相同字段和成员的类的定义相同，并且继承自`System.ValueType`. 请注意，编译器不允许声明 a`class`继承`ValueType`，但是当声明 a 时`struct`，编译器“在幕后”声明了一个继承的类。

.net 中值类型的特殊之处在于运行时分配存储位置（变量、字段、参数等）的方式。当`ValueType`声明不继承自的类型的存储位置时，运行时将为堆对象分配空间参考。相反，当声明继承自的类型的存储位置时`ValueType`，运行时将为该类型的所有公共和私有字段分配空间。对于类似 的类型`int`，系统会在正常类型系统之外分配一个属于特殊原始类型的私有字段。

请注意，值类型的存储位置并不真正保存该类型的实例。相反，*它是*该类型的一个实例，并*包含*该类型的所有字段。语句 like`struct1 = struct2`不会将值类型实例`struct1`替换为实例`struct2`。`struct2`相反，它会从中的相应字段复制所有字段`struct1`。同样，如果将值类型存储位置作为方法传递给过程而不使用`ref`关键字，则传递的不是结构实例本身，而是其字段的内容。

如果需要将值类型的存储位置复制到非派生的类型`ValueType`（例如`Object`or `IComparable`），系统将创建一个新的值类型的堆对象实例，将值类型的所有字段复制到该值类型new instancen 并将对该新实例的引用存储在目标存储位置。这个过程称为“装箱”。大多数编译器会隐式执行此操作，因此试图表现得好像值类型存储位置包含一个派生自`ValueType`. 不过，重要的是要注意，这是一种错觉。如果 type`X`派生自`Y`，一个有一个`X`named`xx`和一个`Y`named`yy`并且一个执行`xx = yy`，这样的语句应该导致`xx`和`yy`引用相同的对象实例。如果`xx`并且`yy`不是从 派生的类型`ValueType`，即使`yy`持有从 派生的某物的实例，也会发生这种情况`ValueType`。但是，如果`xx`和/或`yy`源自`ValueType`. 在这种情况下，系统会将字段从一个实例复制到另一个（可能是新的）实例。

# objective-c - Cocoa 视觉格式语言中的视图名称是什么？

> ID：10971014
> 
> 赞同：0
> 
> 时间：2012-06-10T18:01:00.050
> 
> 标签：objective-c, cocoa, layout

在[Cocoa 用于定义视图约束的语言中](http://developer.apple.com/library/mac/#documentation/UserExperience/Conceptual/AutolayoutPG/Articles/formatLanguage.html#//apple_ref/doc/uid/TP40010853-CH3)，示例总是命名为“button1”、“button2”等。但是这些名称实际上是什么意思呢？它们是 nub 文件的名称、控制器或视图的类名吗？如果我实例化同一个 nib 文件和类的多个视图，它们会得到什么名称，以及如何设置它们？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-10T18:03:04.507

它们是占位符，将与您的 nib 文件中的实际按钮相关联。

**更新**

如果您在代码中使用`addConstraints:options:metrics:views:`您尝试约束的视图上的方法添加约束（无论该实例`UIView`是在代码中创建还是从 nib 加载），最后一个参数 ( `views:`) 接受字典，谁的键是您在`UIConstraint`'s中提供的键ascii 艺术（button1、button2 等）和值是您在代码中创建的实际视图或从其他地方获取实例（可能是 IBOutlet）。

您可以使用`NSDictionaryOfVariableBindings`宏快速创建字典，该宏将接受可变数量的视图实例并将它们与相同的占位符名称相关联，例如这些实例的名称。例如

```
// This is a ASCII constraint:
NSString *constraintAscii = @"|-[button1]-12-[button2]-|";

// Bound views for constraints:
UIButton *button2 = ... // code to create button2 variable
// let's say that button1 is actually an IBOutlet for instance variable
// now we create the dictionary of views for our new constraint
NSDictionary *views = NSDictionaryOfVariableBindings(button1, button2);

// now we create the constraint using these variables
NSArray *constraints = [NSLayoutConstraint constraintsWithVisualFormat: constraintAscii
                                                               options: 0
                                                               metrics: nil
                                                                 views: views]; 
```

# html - 从 Windows 复制到 Mac 时显示奇怪字符的 html 文件

> ID：10971018
> 
> 赞同：1
> 
> 时间：2012-06-10T18:01:09.153
> 
> 标签：html, windows, macos, file, cross-platform

好的，我认为标题很好地总结了这个问题。基本上，我在我的 Windows 机器上用 HTML 编写了一个帮助文件，所以它包含如下字符： `®`, `'`, `"`,`...`

显然它在 Windows 上显示正常，但是当我将文件复制到我的 Mac 并尝试查看它时，上面的字符会变得乱七八糟并看起来很陌生。我可以在我的 Mac 上输入它们并保存它，但我只是担心我需要做一些事情来防止在其他计算机/环境上发生同样的事情。

如果有人知道我如何尽可能轻松地阻止这种情况发生，我将很高兴知道。提前致谢...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-10T18:04:20.777

确保您的 HTML 文件保存为 UTF8 并使用 UTF8 元标记：

*   要将文件保存为 UTF-8，请使用记事本打开它并选择“另存为”，然后确保将编码设置为 UTF-8。

*   要将 UTF-8 元标记添加到您的 HTML 文件，只需在“head”部分添加以下行：`<meta http-equiv="Content-Type" content="text/html; charset=UTF-8"/>`

UTF8 旨在向后兼容 ASCII 并避免 UTF-16 和 UTF-32 中字节顺序和字节顺序标记的复杂性。参见：[维基百科](http://en.wikipedia.org/wiki/UTF-8)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-10T18:05:18.060

我的假设是由于文件编码（可能一个使用 UTF-8 而另一个使用 iso-8859-1）或由于编辑器之间的差异。尝试在 Windows 机器上将代码粘贴到记事本或写字板中，然后将该代码发送到 Mac。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-10T18:06:37.730

您可以将其保存为 unicode 并像 John Riche 所说的那样添加元数据，或者将其替换为 HTML 实体：

```
&reg; = ® 
```

[http://www.w3schools.com/tags/ref_entities.asp](http://www.w3schools.com/tags/ref_entities.asp)

# mvvm-light - 在 Windows 8 中使用 MVVMLight 通过 ViewModel 进行页面导航

> ID：10971023
> 
> 赞同：10
> 
> 时间：2012-06-10T18:01:59.300
> 
> 标签：mvvm-light, windows-8

我上周刚开始使用 mvvm light 开发我全新的 windows 8 应用程序。我熟悉 mvvmlight WP7 导航。我如何在 Windows 8 中实现相同的功能。任何人都可以建议一种更好的方法在 Windows 8 中实现相同功能。我找到了一个解决方案，我们在 vm 中覆盖 onnavigated 事件并处理导航到其他页面。但我认为这种方法已经过时了。任何人请指导我正确实施。提前致谢。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-06-11T03:07:58.587

我知道这不是您可能正在寻找的确切答案，但这可能会给您一些探索的想法。

就我而言，我没有使用 MVVMLight - 而是我自己的简单 MVVM 实现。我使用`BindableBase`该类（带有默认的 VS 2012 RC 模板）进行属性通知。我想，你可以使用 MVVMLight 为你提供一些基础设施，你可以用下面的东西来补充它。

对于导航，我定义了一个如下所示的界面：

```
public interface INavigationService
{
    void Navigate(Type type);
    void Navigate(Type type, object parameter);
    void EnsureNavigated(Type pageType, object parameter);

    bool CanGoBack { get; }
    bool CanGoForward { get; }
    void GoBack();
    void GoForward(); 

    IView CurrentView { get; }
} 
```

并按如下方式实现：

```
using System;
using System.Collections.Generic;
using System.Threading.Tasks;
using Windows.UI.Xaml.Controls;

public class NavigationService : INavigationService
{
    private readonly Frame _frame;

    public NavigationService(Frame frame)
    {
        _frame = frame;
        _frame.Navigated += OnFrameNavigated;
    }

    private void OnFrameNavigated(object sender, Windows.UI.Xaml.Navigation.NavigationEventArgs e)
    {
        var view = e.Content as IView;
        if (view == null)
            return;

        var navMsg = new NavigationMessage()
        {
            Sender = this,
            NewView = view,
            Parameter = e.Parameter,
            NavigationMode = (int)e.NavigationMode
        };

        EventManager.Current.Publish(navMsg);

        //Anything that the parent needs to be notified should happen in of after this method
        var viewModel = view.ViewModel;
        if (viewModel != null)
            viewModel.Initialise(e.Parameter);
    }

    public void Navigate(Type pageType)
    {
        DisposePreviousView();
        _frame.Navigate(pageType);
    }

    public void Navigate(Type pageType, object parameter)
    {
        DisposePreviousView();
        _frame.Navigate(pageType, parameter);
    }

    private void DisposePreviousView()
    {
        var currentView = this.CurrentView;
        var currentViewDisposable = currentView as IDisposable;
        if (currentViewDisposable != null)
        {
            currentViewDisposable.Dispose();
            currentViewDisposable = null;
        } //view model is disposed in the view implementation
    }

    public void EnsureNavigated(Type pageType, object parameter)
    {
        var currentView = this.CurrentView;
        if (currentView == null || currentView.GetType() != pageType)
        {
            Navigate(pageType, parameter);
        }
    }

    public IView CurrentView
    {
        get { return _frame.Content as IView; }
    }

    public bool CanGoBack
    {
        get { return _frame != null && _frame.CanGoBack; }
    }

    public void GoBack()
    {
        // Use the navigation frame to return to the previous page
        if (_frame != null && _frame.CanGoBack) _frame.GoBack();
    }

    public bool CanGoForward
    {
        get { return _frame != null && _frame.CanGoForward; }
    }

    public void GoForward()
    {
        // Use the navigation frame to return to the previous page
        if (_frame != null && _frame.CanGoForward) _frame.GoForward();
    }

} 
```

视图：

```
public interface IView : IDisposable
{
    IViewModel ViewModel { get; }
    void Refresh();
} 
```

视图模型：

```
public interface IViewModel : INotifyPropertyChanged, IDisposable
{
    void Initialise(object parameter);
    string ViewTitle { get; }
    void Refresh();
} 
```

最后，在 XAML 页面中，定义一个`Frame`元素：

```
<Frame x:Name="ContentFrame" /> 
```

在页面的代码隐藏中：（这是我认为唯一丑陋的部分 - 但希望它不会太糟糕）：

```
var _navigationService = new NavigationService(this.ContentFrame); 
```

您现在可以将 传递`_navigationService`给视图模型。就我而言，我在页面的代码隐藏中创建了视图模型：

```
public HomePage()
{
    this.InitializeComponent();

    var _navigationService = NavigationService.GetFor(this.ContentFrame);

    DataContext = new HomePageViewModel(_navigationService);

} 
```

希望这可以帮助。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-21T05:23:23.603

阅读 Laurent Bugnion 本人最近在 MSDN 杂志上发表的关于使用 MVVM Light Toolkit 和 Windows 8 的文章。

在文章的结尾，他准确地解释了如何设置`NavigationService`你需要的。

[http://msdn.microsoft.com/en-us/magazine/jj651572.aspx](http://msdn.microsoft.com/en-us/magazine/jj651572.aspx)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-26T18:50:32.697

MVVMLight 中的 NavigationService 已迁移到名为 WinRTBehaviors 的新包中。您还可以从 nuget 获取 Win8nl 中的 EventToCommand。请参阅我在此处发布的博客：

使用适用于 Windows 8、EventToCommand 和行为的 MVVM Light 入门 [http://blog.tattoocoder.com/2012/08/getting-started-w-windows-8-mvvm-light.html](http://blog.tattoocoder.com/2012/08/getting-started-w-windows-8-mvvm-light.html)

# algorithm - 遍历树 - 如何首先打印边缘

> ID：10971026
> 
> 赞同：-1
> 
> 时间：2012-06-10T18:02:31.960
> 
> 标签：algorithm, tree, binary-tree, tree-traversal

如果我有一棵树，如下所示：

```
 A                Root Level
        /   \
       /     \
      G       Z            Level 1
     / \     /  \
    /   \   /    \
   C     D  T     J        Level 2 
```

我有三个问题：

*   如何遍历这棵树，以便首先打印级别 1 节点，然后是根级别，然后是级别 2

    G、Z、A、C、D、T、J

*   如何遍历这棵树，以便首先打印级别 1 节点，然后是级别 2，然后是根级别

    G、Z、C、D、T、J、A

*   如何遍历这棵树，以便首先打印 2 级节点，然后是 1 级，然后是根级

    C、D、T、J、G、Z、A

我正在浏览维基百科上的树遍历，并记得我曾经在一次采访中被问到的一个老问题。我相信问题是上述三个中的一个（很可能是第一个或第二个）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-10T21:21:15.113

前序遍历：在子树之前访问根

```
void preorder( BTREE__NODE_p_t node )
    if ( node != NULL )
        visit( node )
        preorder( node->left )
        preorder( node->right ) 
```

中序遍历：在访问子树之间访问根

```
void inorder( BTREE__NODE_p_t node )
    if ( node != NULL )
        inorder( node->left )
        visit( node )
        inorder( node->right ) 
```

后序遍历：访问子树后访问根

```
void postorder( BTREE__NODE_p_t node )
    if ( node != NULL )
        postorder( node->left )
        postorder( node->right )
        visit( node ) 
```

为了清楚起见，确实希望算法具有通用性，例如应用于 n 级或仅 3 级，因为在逻辑方面差异很大。

# android - 从“作为服务”的 Android Activity 中拍照

> ID：10971027
> 
> 赞同：2
> 
> 时间：2012-06-10T18:02:41.143
> 
> 标签：android, android-intent, android-camera, android-activity, android-service

我想从非活动线程（设备上运行的 Web 服务器）中拍照。

为了做到这一点，我希望有一个绑定到应用程序的服务，我可以调用它来拍照，并在完成后返回位图。但看起来我不能这样做，因为出于安全目的，Android 禁止在不显示预览的情况下拍照（即使在某些设备[上接受的答案中显示的虚拟预览也是如此）](https://stackoverflow.com/questions/9744790/android-possible-to-camera-capture-without-a-preview)

然后我想要一个 Activity 为我拍照，并带有一个真实的预览，但我也想不出任何方法来做到这一点，因为：

*   我无法取回位图，因为我无法调用`startActivityForResult()`，因为我的网络服务器不是 Activity，所以我无法覆盖`onActivityResult()`. （webServer 只是引用了 Application 的实例）

*   我不能只将 HttpRequest 与 Intent 一起传递给 Activity 来响应它，因为 Response 对象不可分割？

你会如何以最合乎逻辑/最优雅的方式做这样的事情？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-10T23:14:33.410

我*真诚地*希望这仅供个人使用，并且您不会认真考虑在许多移动设备上放置一个 Web 服务器——带有一个开放的、未受保护的服务器套接字。如果你是，我希望你有一个资金充足的法律辩护基金。

话虽如此：

第 1 步：让您的 Web 守护程序服务注册`BroadcastReceiver`一个`LocalBroadcastManager`

第 2 步：根据需要，拨打服务电话`startActivity()`，提出您的拍照活动

第 3 步：让您的拍照活动`LocalBroadcastManager`为您的 Web 守护程序服务发送广播，其中 JPEG 数据可以是`Intent`额外的，或者如果您确定之前能够处理它，可能只是作为静态数据成员拍摄下一张照片。

使用避免将（及其巨大的额外位图）`LocalBroadcastManager`运送到操作系统并再次返回到您的进程。`Intent`

# css - Javascript 渲染冲突或错误

> ID：10971031
> 
> 赞同：0
> 
> 时间：2012-06-10T18:03:24.323
> 
> 标签：css, z-index

这是我不得不问的关于我的网站建设的第二个问题，它涉及到 Javascript，这远远超出了我的想象。

问题：

当用户突出显示菜单（sprybar）并导致下拉菜单出现在“关于我们”部分，然后单击图库中的图像时，spry 栏以某种方式将自身覆盖在用户单击的图像上 - 非常烦人！

这是该网站的链接[http://sweetvision.co.uk/dynamicpages/gallery.html](http://sweetvision.co.uk/dynamicpages/gallery.html)。

此外，我是这个网站建设的完全业余爱好者，所以不要笑得太厉害，所以任何其他指针也会很棒！

如果需要代码，我会发布它。

提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-10T18:10:32.500

你`z-index`的菜单太高了（至少比灯箱高）。

**sweetvision.css:633**

```
ul.MenuBarActive {
    z-index: 1000;
} 
```

尝试完全删除此规则。

# python - 将 Python 3 open(encoding="utf-8") 向后移植到 Python 2

> ID：10971033
> 
> 赞同：174
> 
> 时间：2012-06-10T18:03:29.443
> 
> 标签：python, python-2.7, python-3.x

我有一个为 Python 3 构建的 Python 代码库，它使用 Python 3 风格的 open() 和 encoding 参数：

[https://github.com/miohtama/vvv/blob/master/vvv/textlineplugin.py#L47](https://github.com/miohtama/vvv/blob/master/vvv/textlineplugin.py#L47)

```
 with open(fname, "rt", encoding="utf-8") as f: 
```

现在我想将此代码反向移植到 Python 2.x，这样我就有一个可与 Python 2 和 Python 3 一起使用的代码库。

解决`open()`差异和缺少编码参数的推荐策略是什么？

我可以有一个 Python 3`open()`风格的文件处理程序来流式传输字节串，所以它会像 Python 2 一样工作`open()`吗？

* * *

## 回答 #1

> 赞同：187
> 
> 时间：2012-06-11T06:32:41.383

### 1\. 在 Python 2 中获取编码参数：

如果您只需要支持 Python 2.6 和 2.7，则可以[`io.open`](https://docs.python.org/2/library/io.html#io.open)使用`open`. `io`是 Python 3 的新 io 子系统，它也存在于 Python 2,6 和 2.7 中。请注意，在 Python 2.6（以及 3.0）中，它完全在 python 中实现并且非常慢，所以如果您需要快速读取文件，这不是一个好的选择。

如果您需要速度，并且需要支持 Python 2.6 或更早版本，则可以[`codecs.open`](https://docs.python.org/2/library/codecs.html#codecs.open)改用。`io.open`它也有一个编码参数，除了它处理行尾的方式不同外，它非常相似。

### 2\. 获取`open()`流字节串的 Python 3 样式文件处理程序：

```
open(filename, 'rb') 
```

注意'b'，意思是'二进制'。

* * *

## 回答 #2

> 赞同：68
> 
> 时间：2012-06-10T18:04:28.777

我认为

```
from io import open 
```

应该做。

* * *

## 回答 #3

> 赞同：29
> 
> 时间：2016-11-17T15:38:29.917

这是一种方法：

```
with open("filename.txt", "rb") as f:
    contents = f.read().decode("UTF-8") 
```

以下是编写时如何做同样的事情：

```
with open("filename.txt", "wb") as f:
    f.write(contents.encode("UTF-8")) 
```

* * *

## 回答 #4

> 赞同：9
> 
> 时间：2014-11-21T10:13:05.040

这可能会奏效：

```
import sys
if sys.version_info[0] > 2:
    # py3k
    pass
else:
    # py2
    import codecs
    import warnings
    def open(file, mode='r', buffering=-1, encoding=None,
             errors=None, newline=None, closefd=True, opener=None):
        if newline is not None:
            warnings.warn('newline is not supported in py2')
        if not closefd:
            warnings.warn('closefd is not supported in py2')
        if opener is not None:
            warnings.warn('opener is not supported in py2')
        return codecs.open(filename=file, mode=mode, encoding=encoding,
                    errors=errors, buffering=buffering) 
```

然后你可以让你的代码保持在 python3 的方式。

请注意，某些 API（如`newline`, `closefd`, ）`opener`不起作用

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2019-06-10T04:51:25.233

If you are using [`six`](https://six.readthedocs.io/), you can try this, by which utilizing the latest Python 3 API and can run in both Python 2/3:

```
import six

if six.PY2:
    # FileNotFoundError is only available since Python 3.3
    FileNotFoundError = IOError
    from io import open

fname = 'index.rst'
try:
    with open(fname, "rt", encoding="utf-8") as f:
        pass
        # do_something_with_f ...
except FileNotFoundError:
    print('Oops.') 
```

And, Python 2 support abandon is just deleting everything related to `six`.

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2020-08-04T14:00:50.743

不是一般的答案，但对于您对默认的 python 2 编码感到满意但想要为 python 3 指定 utf-8 的特定情况可能很有用：

```
if sys.version_info.major > 2:
    do_open = lambda filename: open(filename, encoding='utf-8')
else:
    do_open = lambda filename: open(filename)

with do_open(filename) as file:
    pass 
```

# silverlight - 为什么要为浏览器内可信模式 SL5 应用程序使用虚拟化文件系统？

> ID：10971035
> 
> 赞同：1
> 
> 时间：2012-06-10T18:03:44.660
> 
> 标签：silverlight

在 Silverlight 5 中，当以提升的权限运行时，应用程序可以通过 FileInfo 和相关类不受限制地访问文件系统。同样从 SL5 开始，应用程序可以在具有更高信任度的浏览器中运行。

但是，当在浏览器中运行时，对文件系统的所有访问似乎最终都会被路由到一个特殊的目录*AppData\Local\Microsoft\Windows\Temporary Internet Files\Virtualized\C...*。

这是与完全没有提升信任的运行不同的行为，后者会引发 SecurityException。浏览器外，行为符合预期。

请注意，在所有情况下，我都是通过 Visual Studio 运行该应用程序的，就浏览器内支持而言，这就是我感兴趣的全部。

这是期望的行为吗？我可以改变它吗？

# c# - 我无法在我的查询中选择日期范围 我没有得到我的 Between 查询的答案

> ID：10971036
> 
> 赞同：2
> 
> 时间：2012-06-10T18:03:45.253
> 
> 标签：c#, ms-access

我正在尝试通过 C# 将此消息发送到访问数据库。用户输入是通过 datePicker 选择的两个日期。日期选择器本身被选为短格式。并且access db字段也被选为短日期时间。以下是我的代码

```
"SELECT PLADS,COUNT(*)AS Total FROM OptagetPladser " +
"WHERE( Dato Between #" + date_1 + "# AND #" + date_2 + "# AND Optaget= 0) " +
"GROUP BY PLADS HAVING Total >= " + diffResult; 
```

问题似乎是 between 声明。我已经使用 >= date 1 进行了测试，我得到的所有结果都大于 date 1。然后我尝试只使用结果 <= date 2 并且这有效，但是 >=date 1 并且 <= date 2 给出了一个空答案

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-10T18:15:51.413

尝试使用参数：

```
StringBuilder sb = new StringBuilder();
sb.AppendLine("SELECT PLADS, COUNT(*) AS Total FROM OptagetPladser");
sb.AppendLine("WHERE ((Dato Between ? AND ?) AND Optaget= 0)");
sb.AppendLine("GROUP BY PLADS HAVING Total >= ?"); 
```

使用已建立的连接：

```
using (OleDbCommand cmd = new OleDbCommand(sb.ToString(), cn)) {
  cmd.Parameters.AddWithValue("?", date_1);
  cmd.Parameters.AddWithValue("?", date_2);
  cmd.Parameters.AddWithValue("?", diffResult);
  using (OleDbDataReader rdr = cmd.ExecuteReader()) {
    while (rdr.Read()) {
      // do something
    }
  }
} 
```

对于 OleDb，参数基于它们何时出现在 SQL 字符串中的索引，因此，“？” 值必须按照它们在查询字符串中出现的顺序输入。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-11T12:30:16.310

您确定可以在 Have 子句中使用列别名吗？

```
HAVING Count(*) >= " + diffResult; 
```

建议：将您使用所有值构建的 sql 字符串复制并粘贴到查询设计器中，并确保它在那里运行。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-03-19T20:01:43.073

但是，如果您使用 an`OleDbDataAdapter()`而不是，`OleDbCommand()`以便可以将数据放入 Windows 窗体中的 datagridview 中呢？

# mysql - HAVING 上的索引？

> ID：10971037
> 
> 赞同：0
> 
> 时间：2012-06-10T18:03:46.293
> 
> 标签：mysql, sql

在我对索引的基本理解中，索引用于`WHERE`子句中的列。由于该`HAVING`子句类似于在语句`WHERE`之后应用的子句`GROUP BY`，索引是否对其具有相同的效果？例如：

```
SELECT * FROM table WHERE full_name = 'Bob Jones'
--> index on full_name would be beneficial here 
```

和

```
SELECT * FROM table WHERE first_name = 'Bob' 
GROUP BY
    height HAVING height > 72 
```

在第二个查询中，first_name 和 height 上的索引会提高性能吗？哪个指数更重要，或者它们大致相等？此外，索引是否也能提高`GROUP BY`性能（不管 a `HAVING`）？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-10T18:08:25.953

子句本质上是在将`HAVING`查询结果发送给客户端之前过滤查询结果的最后一件事。`WHERE`仅当您需要过滤聚合函数的结果时才有用，该函数的值在子句执行的行级过滤期间不可用。

从本质上讲，一个`HAVING`子句可以被视为应用另一个查询，将您的主查询变成子查询。

例如

```
SELECT ...
FROM sometable
HAVING somefield = X 
```

真的没有什么不同

```
SELECT *
FROM (
   SELECT ...
   FROM sometable
)
WHERE somefield = X 
```

如果您使用 HAVING 过滤的字段**不是**派生字段（聚合值、计算字段等），那么您几乎肯定最好在 WHERE 级别进行过滤，这样可以防止加载不必要的行首先从磁盘上。

由于最后应用了，因此将从磁盘加载行，如果它们不符合 HAVING 标准，则可能会被丢弃。

# linux - HTTP Live Streaming：Linux 的噩梦

> ID：10971039
> 
> 赞同：22
> 
> 时间：2012-06-10T18:03:54.050
> 
> 标签：linux, http, streaming, mp3, debian

我正在 iPhone 上开发音乐 VOD 应用程序，并且由于 Apple 的指导方针，我必须运行 HTTP Live Streaming 才能在 AppStore 上被接受。但是，由于 Apple 并不关心地球上 98% 的服务器，因此他们没有为基于 Linux 的系统提供如此神奇的 HTTP Live Streaming Tools。从这一点开始，噩梦开始了。

我的目标很简单：获取一个 MP3，对其进行分段并生成一个简单的 .m3u8 索引文件。我搜索了“HTTP Live Streaming Linux”和“哦，太好了！很多人已经这样做了”！

首先，我访问[了 Carson McDonald 的（非常有名的）帖子](http://www.ioncannon.net/programming/452/iphone-http-streaming-with-ffmpeg-and-an-open-source-segmenter/)。结果：svn segmentate.c 是旧的、错误的和编译的噩梦（世界上没有人能准确地知道他们使用的是什么版本的 ffmpeg！）。然后我遇到[了 Carson 的 git repo](https://github.com/carsonmcdonald/HTTP-Live-Video-Stream-Segmenter-and-Distributor/tree/v2)，但太糟糕了，有很多烦人的 ruby​​ 东西，并且 live_segmenter.c 无法获取 mp3 文件。

然后我更深入地寻找。我找到[了这个 stackoverflow topic](https://stackoverflow.com/questions/10247789/http-live-streaming-segmenting-mp3-on-linux)，这正是我想要做的。所以我遵循了 juuni 的建议来使用[这个脚本（httpsegmenter）](http://code.google.com/p/httpsegmenter/)。结果：无法编译任何东西，2 天的工作，最后我设法编译它（ffmpeg 8.1 w/ httpsegmenter rev17）。不，这不是一个好的脚本，它确实需要 mp3 文件，但是生成的 ts 文件和索引文件不能被播放器读取。

然后帖子 krisbulman 的作者提出了一个解决方案，甚至自己提供了一个补丁版本的 m3u8-segmenter ( [git repo](http://github.com/krisbulman/m3u8-segmenter) )。我测试它：不编译，什么也不做。所以我从 johnf [https://github.com/johnf/m3u8-segmenter](https://github.com/johnf/m3u8-segmenter)获取了原始版本。我设法编译并奇迹般地工作（不是真的）。我使用了这个命令行（ffmpeg 0.8.1）：

```
ffmpeg -er 4 -i music.mp3 -f mpegts -acodec libmp3lame -ar 44100 -ab 128k -vn - | m3u8-segmenter -i - -d 10 -p outputdir/prefix -m outputdir/output.m3u8 -u http://test.com/ 
```

该脚本对我的 mp3 文件进行编码（需要 4 秒，太长了），并将其传递给 m3u8-segmenter 以将其分段为 10 秒的 .TS 文件。

我在我的 Mac 上使用 Apple 的 mediastreamvalidator 测试了这个流，它说没问题。所以我把它播放到 quicktime，但每个 .TS 文件之间有大约 0.2 秒的空白！

所以这是我的情况，这是一场噩梦，我无法通过 HLS 协议获得简单的 mp3 流。是否有一个简单的工作解决方案来分割 mp3 ？为什么我不能像苹果的 mediafilesegmenter 那样直接将 mp3 文件分割成多个 mp3 文件？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-10T21:55:05.563

使用 libmp3lame 的 libfaac insteam 消除 0.2 秒的中断。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-12-03T03:10:20.993

Elastic Transcoder Service - 如果您不需要 AES 加密，只需将您的 MP3 放入 S3 存储桶中即可：

[http://aws.amazon.com/elastictranscoder/](http://aws.amazon.com/elastictranscoder/)

然后，您甚至可以添加 Cloudfront CDN 支持。（PS 我完全理解你的痛苦，这整个空间是一场噩梦）。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-14T21:25:51.503

仅对于实时流媒体，您应该为此尝试使用带有 RTMP 模块的 Nginx。[https://github.com/arut/nginx-rtmp-module](https://github.com/arut/nginx-rtmp-module) Live HLS 工作得很好，但有 looooong 缓冲区。但是，它不支持按需 HLS 流。

一块模块的配置例如

```
# HLS requires libavformat & should be configured as a separate
# NGINX module in addition to nginx-rtmp-module:
# ./configure ... --add-module=/path/to/nginx-rtmp-module/hls ...
# For HLS to work please create a directory in tmpfs (/tmp/app here)
# for the fragments. The directory contents is served via HTTP (see
# http{} section in config)
#
# Incoming stream must be in H264/AAC/MP3\. For iPhones use baseline H264
# profile (see ffmpeg example).
# This example creates RTMP stream from movie ready for HLS:
#
# ffmpeg -loglevel verbose -re -i movie.avi  -vcodec libx264 
#    -vprofile baseline -acodec libmp3lame -ar 44100 -ac 1 
#    -f flv rtmp://localhost:1935/hls/movie
#
# If you need to transcode live stream use 'exec' feature.
#
application hls {
    live on;
    hls on;
    hls_path /tmp/app;
    hls_fragment 5s;
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2016-03-25T20:23:23.900

您在使用 httpsegmenter 时遇到了什么问题？它是一个单一的 C 源文件，仅链接到 ffmpeg（或 libav）提供的一些库。我为它维护了一个 Gentoo ebuild，因为我用它来时移谈话电台。如果你在运行 Gentoo，构建就像这样简单：

```
sudo bash -l
layman -S
layman -a salfter
echo media-video/httpsegmenter ~\* >>/etc/portage/package.accept_keywords
emerge httpsegmenter
exit 
```

在 Ubuntu 上，我必须确保 libavutil-dev 和 libavformat-dev 都已安装，所以构建看起来像这样：

```
sudo apt-get install libavutil-dev libavformat-dev
git clone https://gitlab.com/salfter/httpsegmenter.git
cd httpsegmenter
make -f Makefile.txt
sudo make -f Makefile.txt install 
```

一旦构建好（并且一旦我有了音频源 URL），使用就相当简单：curl 流式传输音频，ffmpeg 将其从源（通常是 MP3）的任何内容转码为 AAC，并使用分段器将其分块：

```
curl -m 3600 http://invalid.tld/stream | \
ffmpeg -i - -acodec libvo_aacenc -ac 1 -ab 32k -f mpegts - 2>/dev/null | \
segmenter -i - -d 20 -o ExampleStream -x ExampleStream.m3u8 2>/dev/null 
```

这会抓取一小时的流式音频（需要是 MP3 或 AAC，而不是 Flash），将其转码为 32 kbps 单声道 AAC，并将其分块以用于 HTTP 实时流式传输。将其转储到您的网络服务器提供的目录中，您就可以开始了。

节目完成后，转换为可以作为播客提供的单个 .m4a 也很简单：

```
cat `ls -rt ExampleStream-*.ts` | \
ffmpeg -i - -acodec copy -absf aac_adtstoasc ExampleStream.m4a 2>/dev/null 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-11T21:41:09.787

我知道这是一个老问题，但我在 VLC 中使用它：

```
## To start playing the playlist out to the encoder
cvlc -vvv playlist.m3u --sout rtp:127.0.0.1 --ttl 2

## To start the encoder
cvlc rtp://  --sout='#transcode{acodec=mp3,ab=96}:duplicate{dst=std{access=livehttp{seglen=10,splitanywhere=true,delsegs=true,numsegs=15,index=/var/www/vlctest/mystream.m3u8,index-url=http://IPANDPORT/vlctest/mystream-########.ts},mux=ts,dst=/var/www/vlctest/mystream-########.ts},select=audio}' 
```

如果我没有将播放列表文件流式传输到 VLC 的另一个副本，我会遇到问题，如果您已经有实时流式传输源，则第一步是可选的。（但您可以为“编码器”部分使用任何来源）。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-01-18T22:47:09.487

您可以尝试在 Windows Azure 平台上使用我们的媒体服务：http: [//mingfeiy.com/how-to-generate-http-live-streaming-hls-content-using-windows-azure-media-services/](http://mingfeiy.com/how-to-generate-http-live-streaming-hls-content-using-windows-azure-media-services/)

您可以使用我们的门户以 HLS 格式对视频进行编码和流式传输，无需配置和编码。

* * *

## 回答 #7

> 赞同：-1
> 
> 时间：2012-06-10T18:11:34.767

你的英语很好。

你的沮丧是显而易见的。

问：这里真正的问题是什么？听起来您只需要一个正常工作的 HLS 服务器，对吗？因为苹果的要求，对吗？

您可以使用此处列出的任何现成实现：

*   [http://en.wikipedia.org/wiki/HTTP_Live_Streaming](http://en.wikipedia.org/wiki/HTTP_Live_Streaming)

# amazon-s3 - 流媒体视频 - jwplayer、amazon s3 和 cloudfront

> ID：10971042
> 
> 赞同：6
> 
> 时间：2012-06-10T18:04:19.220
> 
> 标签：amazon-s3, jwplayer, amazon-cloudfront

我在亚马逊的 s6b99lczhnef6.cloudfront.net 上有一个流媒体分发。源是 S3 中的存储桶。该桶有一个视频video.mp4。是公开的。我正在尝试使用 jwplayer 测试流式传输此视频，以下是代码：

```
<html>
<head>
    <script type="text/javascript" src="jwplayer/jwplayer.js"></script>
</head>
<body>
    <div id="container">Loading the player ...</div>
    <script type="text/javascript">
    jwplayer("container").setup({
        flashplayer: "jwplayer/player.swf",
        file: "video.mp4",
        height: 270,
        provider: "rtmp",
        streamer: "rtmp://s6b99lczhnef6.cloudfront.net/cfx/st",
        width: 480
    });
    </script>
</body> 
</html> 
```

视频没有播放。没有 JS 错误。可能出了什么问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-12T13:04:35.877

亚马逊[文档](http://docs.amazonwebservices.com/AmazonCloudFront/latest/DeveloperGuide/TutorialStreamingJWPlayer.html)对 JW Player 5.9 有效，而 JW Player 的文档在使用 CloudFront 流时相当少。[正如这里简要解释](http://www.longtailvideo.com/support/forums/jw-player/servers-and-streaming/29499/jwplayer-6-and-private-rtmp-streaming-from-cloudfront/)的那样，指定流媒体源已随 JW Player 6 更改。这是指定流媒体源的新方法：

```
<div id='mediaplayer'>This text will be replaced</div>
<script type="text/javascript">
   jwplayer('mediaplayer').setup({
      'id': 'playerID',
      'width': '720',
      'height': '480',
      'file': 'rtmp://s1cxpk7od1m10r.cloudfront.net/cfx/st/your_streaming_file.mp4',
      'primary':'flash',
      'autostart' : 'true',
   });
</script> 
```

如果您的流位于该文件夹中，则使用上面的文件参考可能会遇到一些问题。我不确定为什么`rtmp://s1cxpk7od1m10r.cloudfront.net/cfx/st/folder/your_streaming_file.mp4`对我不起作用（我认为它与 URL 编码有关），但是`file`在访问位于文件夹中的流式资源时使用它作为参数对我有用：

```
rtmp://s1cxpk7od1m10r.cloudfront.net/cfx/st/mp4:folder/your_streaming_file.mp4 
```

如果您想测试您的连接字符串并获得一些调试输出，请查看[此流式诊断工具](http://d1k5ny0m6d4zlj.cloudfront.net/diag/CFStreamingDiag.html)。

您无需在嵌入代码中的任何位置指定存储桶名称。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-11T06:43:29.403

我认为您必须将文件字符串值提供为 bucketname/video.mp4 否则一切似乎都很好。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-11T18:41:49.110

不，这是不正确的，因为他使用的是 CloudFront。我看到引号的后续使用。试试这个：

```
<div id="container">Loading the player ...</div>
<script type="text/javascript">
jwplayer("container").setup({
    'flashplayer': 'jwplayer/player.swf',
    'file': 'video.mp4',
    'height': '270',
    'provider': 'rtmp',
    'streamer': 'rtmp://s6b99lczhnef6.cloudfront.net/cfx/st',
    'width': '480'
});
</script> 
```

这是一个详细解释格式和选项的教程。 [http://www.miracletutorials.com/embed-streaming-video-audio-with-html5-fallback/](http://www.miracletutorials.com/embed-streaming-video-audio-with-html5-fallback/)

如果这不起作用，则您的视频可能未针对流媒体进行优化。试试这个教程来转换你的视频： http: [//www.miracletutorials.com/how-to-encode-video-for-web-iphone-ipad-ipod/](http://www.miracletutorials.com/how-to-encode-video-for-web-iphone-ipad-ipod/)

我希望这有帮助？

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-10T19:50:37.047

不，您不需要提供存储桶名称。云端分发已经指向一个存储桶。

* * *

## 回答 #5

> 赞同：-4
> 
> 时间：2012-06-20T04:20:54.633

从“localhost”以外的服务器加载 HTML 页面是可行的。

# android - android-当我使用 sqlite 数据库设置闹钟时出现错误

> ID：10971044
> 
> 赞同：0
> 
> 时间：2012-06-10T18:04:26.857
> 
> 标签：android, sqlite, alarm

我是android新手，我正在开发一个警报应用程序我在设置警报时发现了这个错误

```
Finalizing a Cursor that has not been deactivated or closed.
database = /data/data/com.time/databases/Salarm.db, table = ASTimer,
query = SELECT _id, description, altime, status, frequency, prealarm FROM ASTimer WHERE status='ON' 
```

代码 ：

```
public Cursor getAllAlarmON()
{
Log.i("alarm","Fetching records from the database...");

Cursor cursor= db.query(tableName, new String[]{"_id","description","altime","status","frequency","prealarm"}, "status='ON'", null, null, null, null);

return cursor; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-10T18:09:41.070

`cursor.close()`确保在关闭数据库之前关闭光标或使用`startManaginCursor(cursor)`.

* * *

看看：[finalizing-a-cursor-that-has-not-been-deactivate-or-closed-non-fatal-error](https://stackoverflow.com/questions/3068320/finalizing-a-cursor-that-has-not-been-deactivated-or-closed-non-fatal-error)

# perl - Perl，Parallel::ForkManager - 如何实现 fork 超时

> ID：10971046
> 
> 赞同：7
> 
> 时间：2012-06-10T18:04:27.857
> 
> 标签：perl, parallel-processing, timeout, fork

是否可以使用 Parallel::ForkManager 为 fork 实现某种超时（时间限制）？

基本 Parallel::ForkManager 脚本如下所示

```
use Parallel::ForkManager;
my $pm = Parallel::ForkManager->new( 10 );
for ( 1 .. 1000 ) {
    $pm->start and next;
    # some job for fork
    $pm->finish;
}
$pm->wait_all_children(); 
```

我想限制“# some job for fork”的时间。例如，如果它没有在 90 秒内完成。那么它（叉子）应该被杀死/终止。我考虑过[使用它](https://stackoverflow.com/questions/2423288/ways-to-do-timeouts-in-perl)，但我不得不说，我不知道如何将它与 Parallel::ForkManager 一起使用。

### 编辑

感谢 hobbs 和 ikegami。您的两个建议都有效......但仅在这个基本示例中，而不是在我的实际脚本中:(。 ![截屏](../Images/9cb0e2d8399f718ebda0cb760d49e07c.png) 这些叉子将永远存在并且 - 老实说 - 我不知道为什么。我使用这个脚本几个月。没有改变任何东西（尽管很多事情取决于外部变量）。每个分叉都必须从网站下载页面，解析它并将结果保存到文件中。每个分叉不应超过 30 秒。超时设置为 180 秒. 那些悬挂的叉子是完全随机的，所以很难追踪问题。这就是为什么我想出了一个临时的、简单的解决方案——超时和终止。

什么可能会在我的代码中禁用（中断）您的超时方法？我的代码中没有其他`alarm()`任何地方。

### 编辑 2

其中一个叉子挂了 1 小时 38 分钟并返回“超时 PID”——这是我输入`die()`的`alarm()`。所以超时工作......但它迟到了大约 1h36,5m ;)。你有什么想法？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-11T04:22:17.133

**更新**

很抱歉在收盘后更新，但如果我没有指出 Parallel::ForkManager 也支持`run_on_start`回调，那我就失职了。这可用于安装“子注册”功能，`time()`为您处理 PID 的标记。

例如，

```
$pm->run_on_start(sub { my $pid = shift; $workers{$pid} = time(); }); 
```

结果是，结合`run_on_wait`如下所述，P::FM 的主循环不必做任何特别的事情。也就是说，它可以保持简单`$pm->start and next`，回调将处理其他所有事情。

**原始答案**

Parallel::ForkManager 的`run_on_wait`处理程序和一些簿记可以强制挂起和防 ALRM 的子级终止。

该函数注册的回调可以定期运行，同时`$pm`等待子终止。

```
use strict; use warnings;
use Parallel::ForkManager;

use constant PATIENCE => 90; # seconds

our %workers;

sub dismiss_hung_workers {
  while (my ($pid, $started_at) = each %workers) {
    next unless time() - $started_at > PATIENCE;
    kill TERM => $pid;
    delete $workers{$pid};
  }
}

...

sub main {
  my $pm = Parallel::ForkManager->new(10);
  $pm->run_on_wait(\&dismiss_hung_workers, 1);  # 1 second between callback invocations

  for (1 .. 1000) {
    if (my $pid = $pm->start) {
      $workers{$pid} = time();
      next;
    }
    # Here we are child.  Do some work.
    # (Maybe install a $SIG{TERM} handler for graceful shutdown!)
    ...
    $pm->finish;
  }

  $pm->wait_all_children;

} 
```

（正如其他人建议的那样，最好让孩子们通过 来调节自己`alarm()`，但这对你来说似乎间歇性地行不通。你也可以诉诸浪费的、粗暴的技巧，比如让每个孩子自己来`fork() or exec('bash', '-c', 'sleep 90; kill -TERM $PPID')`。）

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-10T18:36:11.413

您只需要一行：

```
use Parallel::ForkManager;
my $pm = Parallel::ForkManager->new( 10 );
for ( 1 .. 1000 ) {
    $pm->start and next;
    alarm 90;             # <---
    # some job for fork
    $pm->finish;
}
$pm->wait_all_children(); 
```

您不需要设置信号处理程序，因为您确实意味着进程死亡。

如果你`exec`在孩子身上，它甚至可以工作。它不适用于 Windows，但`fork`首先在 Windows 上使用是有问题的。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-10T18:14:15.670

只需在子进程内部（即在循环结束和循环结束之间）执行您链接到的答案建议`$pm->start and next`。除了确保您没有不小心杀死了父母:)

# bash - 更改 Clang 的彩色输出

> ID：10971049
> 
> 赞同：2
> 
> 时间：2012-06-10T18:04:41.567
> 
> 标签：bash, clang, diagnostics

是否可以更改 Clang 对其彩色诊断的颜色选择？我喜欢我的终端有黑色背景，但我只是注意到我错过了 Clang 有用的诊断信息。我知道 -fno-color-diagnostics 编译器选项，但我更喜欢颜色，只是不同的颜色。有什么解决办法吗？我在 OSX 中使用 bash shell。谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-10T20:12:49.567

看起来颜色在[该文件](http://clang.llvm.org/doxygen/TextDiagnostic_8cpp_source.html)（[包含文件](http://llvm.org/viewvc/llvm-project/llvm/trunk/include/llvm/Support/raw_ostream.h?revision=154805&view=markup)）的开头附近是硬编码的。您可以编辑文件并重新编译程序，编写并提交在命令行、环境变量或文件中接受颜色设置的功能，或者以不可移植的方式尝试动态替换颜色。

下面是后者的一个例子：

```
clang ... | sed 's/\o33\[30m/\o33[37m/g' 
```

对于 XTerm 转义序列，这会将黑色变为白色。一些其他序列将需要用于其他终端类型。

# objective-c - NSString 和 unichar 在 Unicode 方面不太匹配

> ID：10971052
> 
> 赞同：0
> 
> 时间：2012-06-10T18:05:12.537
> 
> 标签：objective-c, string, unicode, character-encoding

苹果的[文件](https://developer.apple.com/library/mac/#documentation/Cocoa/Conceptual/Strings/Articles/Strings.html)指出

> 字符串对象实现为 Unicode 字符数组

但是，`unichar`很可能在`unsigned short`幕后的数据类型的大小只有 16 位，这使得无法用`unichar`. 我如何在脑海中调和这两个事实？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-10T19:18:55.667

您是正确的，Apple 的文档在真正表示 UTF-16 代码点时错误地引用了 Unicode 字符。

在 Unicode 的早期，人们希望它不会超过 16 位，但它确实做到了。Apple 和 Microsoft（可能还有其他公司）都使用 16 位整数来表示“Unicode 字符”，即使某些字符必须由代理对表示。

处理这种情况的各种方法`NSString`（加上组合字符）并返回给定字符的范围。例如`-rangeOfCharacterFromSet:...`和`-rangeOfComposedCharacterSequences...`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-10T18:07:54.283

1.  不确定字符串是否由`unichar`数据类型表示。“字符串对象被实现为 Unicode 字符数组”并不意味着它在源代码中存储为`unichar *`. 你不知道它是如何实现的，是吗？
2.  如果`unichar`不是无符号短线怎么办？如果它是 32 位或 64 位数据类型怎么办？

# mysql - MySQL用空格替换字符

> ID：10971053
> 
> 赞同：0
> 
> 时间：2012-06-10T18:05:16.153
> 
> 标签：mysql, replace

哇...使用 MySQL，有没有办法替换以下时间戳中左侧的第三个“-”：

2012-06-05-23:48:10

你会认为经过一个小时的搜索我会找到一些东西..

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-10T18:09:35.280

您描述的文字替换操作可能超出了纯 mySQL 的能力 - 它具有[正则表达式功能](http://dev.mysql.com/doc/refman/5.1/en/regexp.html)，但仅用于匹配。

但是，想到了一种解决方法：

*   使用将字段转换为 DATETIME 字段[`STR_TO_DATE()`](http://dev.mysql.com/doc/refman/5.5/en/date-and-time-functions.html#function_str-to-date)

*   然后使用自定义格式输出它[`DATE_FORMAT()`](http://dev.mysql.com/doc/refman/5.5/en/date-and-time-functions.html#function_date-format)

也就是说，`DATETIME`无论如何，首先将日期存储为本机字段将是一个好主意。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-10T18:09:52.503

为此，使用标准保存数据但以应用程序使用它的方式返回更有意义。[这篇文章](https://stackoverflow.com/questions/4805447/how-to-change-timestamp-format-in-mysql)解释了你在寻找什么。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-06-10T18:07:46.090

MySQL是一个关系数据库管理系统；它不是为了操纵数据。

相反，您将使用诸如 php 之类的编程或脚本语言来查询数据库、将数据拉入字符串、更改它并更新数据库。编辑：有人告诉我这是可能的，但正如另一位用户所说，纯 MySQL 中没有直接的解决方案。

# sql - 删除表声明的变量是否更好地进行优化？

> ID：10971057
> 
> 赞同：1
> 
> 时间：2012-06-10T18:05:46.693
> 
> 标签：sql, sql-server, sql-server-2008

如果我创建这样的表变量：

```
Declare @MyTable Table(ID int,Name varchar(50)) 
```

在服务器上在查询结束时对变量运行删除查询更好吗？有点像关闭一个对象？

```
Delete From @MyTable 
```

还是没有必要？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-10T19:10:22.503

使用`Delete`会更糟。

除了让 SQL Server 在超出范围时隐式删除​​表变量（[它具有最少的日志记录](https://dba.stackexchange.com/q/4163/3690)），您还将为每一行[添加完全记录的删除操作](https://stackoverflow.com/a/8204184/73226)到`tempdb`事务日志中。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-10T18:33:16.510

我看不出这对性能有什么好处 - 充其量是相同的（因为`@table`无论如何都会在超出范围时被删除），最坏的情况是会*更*昂贵，因为它实际上必须先执行删除. 你认为这样做有什么好处吗：

```
DELETE #temptable;
DROP TABLE #temptable; 
```

而不仅仅是这个：

```
DROP TABLE #temptable; 
```

我承认我没有在这个`@table`案例中测试过这个，但你也可以测试和基准测试。应该清楚的是，在上述情况下，运行第`DELETE`一个将占用更多的资源而不是不打扰。

可能有一个原因没有办法`DROP TABLE @MyTable;`或`DEALLOCATE @MyTable;`- 但这里没有人围绕表变量编写代码，我们不太可能知道我们不能及早释放这些对象的官方原因。但是删除表格并不意味着您正在释放空间 - 您只是以某种方式标记页面。

# android - 是否有在 Eclipse 中向清单添加活动的快捷方式？

> ID：10971060
> 
> 赞同：1
> 
> 时间：2012-06-10T18:06:02.527
> 
> 标签：android, eclipse

Eclipse 中是否有执行此操作的功能？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-10T18:10:24.007

我不确定您所说的快捷方式是什么意思，但 Android 清单编辑器（清单文件的默认编辑器）有一些 UI 帮助。单击“应用程序”选项卡，单击“添加”按钮，选择“活动”，然后您可以单击活动名称旁边的“浏览”按钮以浏览可用活动以添加到清单中。

# asp.net - GoDaddy 上的 ASP.Net URL 重写 500 错误

> ID：10971068
> 
> 赞同：2
> 
> 时间：2012-06-10T18:07:06.593
> 
> 标签：asp.net, url-rewriting, iis-7

我想创建一个非常简单的 URL 重写规则。我在本地使用带有 Visual Studio 2010 的 IIS 7 Express (XP)。我创建的规则（从[此处](http://learn.iis.net/page.aspx/461/creating-rewrite-rules-for-the-url-rewrite-module/)的示例复制）在本地完美运行。但是，一旦我将它复制到我的托管服务器，我就会收到 500 错误。

**摘自 web.Config：**

```
<system.webServer>
    <modules runAllManagedModulesForAllRequests="true"/>
    <rewrite>
        <rules>
            <rule name="Rewrite to article.aspx">
                <match url="^article/([0-9]+)/([_0-9a-z-]+)" />
                <action type="Rewrite" url="article.aspx?id={R:1}&amp;title={R:2}" />
            </rule>
        </rules>
    </rewrite>
</system.webServer> 
```

假设规则是破坏应用程序的原因，我删除了**规则**部分，但应用程序仍然抛出 500 错误。但是，如果我完全删除**重写**部分，则应用程序会正确加载。

所以我的问题是，我的 web.Config 中是否缺少任何内容？他们声称这是一个脚本问题，并且 URL 模块已正确安装并在他们的 IIS 7 服务器上运行。有什么办法可以用脚本来确认吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-18T23:23:05.013

我遇到了完全相同的问题，并且花了太多时间尝试与 GoDaddy 支持合作以使 Microsoft URL Rewrite 正常工作。最终，我根据[这篇文章](https://stackoverflow.com/questions/4894718/managedfusion-url-rewriting-not-working-on-godaddy-4th-generation-hosting)启动并运行了 ManagedFusion Rewriter 。

我在启用 SSL 的 GoDaddy 4GH Ultimate Windows 主机上。我在根目录中安装了 WordPress（永久链接现在可以使用！），以及在虚拟目录中运行的其他 .NET 应用程序。

我真的希望这可以帮助某人避免尝试让 Microsoft URL Rewrite 在 GoDaddy Grid Hosting 上工作......

作为记录，这是我对 ManagedFusion 的重写规则，以正确处理 WordPress 永久链接：

```
RewriteEngine On

RewriteBase /

# wordpress admin folder rewrite rules
RewriteCond %{REQUEST_URI} ^wp-admin/
RewriteRule ^wp-admin/(.*) . /wp-admin/$1 [C]

# wordpress includes folder rewrite rules
RewriteCond %{REQUEST_URI} ^wp-includes/
RewriteRule ^wp-includes/(.*) . /wp-includes/$1 [C]

# wordpress general rewrite rules
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule ^(.*) /index.php [L] 
```

我逐字使用链接帖子中的 web.config，除了我删除了该`<defaultDocument enabled="false" />`行。

# java - 如何反编译 .class 文件？

> ID：10971069
> 
> 赞同：2
> 
> 时间：2012-06-10T18:07:18.663
> 
> 标签：java, compilation

> **可能重复：**
> [如何“反编译”Java 类文件？](https://stackoverflow.com/questions/272535/how-do-i-decompile-java-class-files)

我是java新手，我想知道是否有办法`.java`从其编译文件（`.class`文件）中检索文件（即文件）的源代码。

我已经阅读了编译过程，即解析、语法和语义树、中间代码生成、使用的宏等。这听起来像是一个非常复杂的过程。逆向工程将更加困难。因此，我认为这是不可能的，但我不得不问。我用谷歌搜索了它，但找不到任何令人满意的东西。

我还在课堂上学习了代码混淆。如果可以进行反编译，那么它对混淆文件的表现如何？

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-10T18:10:10.107

*[编辑：我不会完成答案，因为这个问题是重复的，这只是对问题第二部分的附加评论]*

当您混淆一个类时，您会删除执行不需要但存在于文件中的所有内容，例如方法的名称。

事实上，混淆一个孤立的类并不会消除很多，因为其他类需要方法或可见字段的名称。所以通常你会使用像 proguard 这样的工具来混淆一组类。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-10T18:11:31.790

是的，顺便说一句，非常简单，获取一个名为`DJ Java Decompiler`（在 google 中搜索很容易找到）的程序，安装后，您只需打开 .class 文件，它会显示所有格式化和缩进的代码。仅限 Microsoft Windows 应用程序

# java - 从Java中的字符串获取Double

> ID：10971072
> 
> 赞同：1
> 
> 时间：2012-06-10T18:07:38.450
> 
> 标签：java, string, parsing

我有一个文本（字符串），我只需要从中获取数字，我的意思是如果我有文本：

“我在 53.2 公里外”，我想得到“53.2”（不是 532 或 53 或 2）

我尝试了[从 Java 中的字符串中提取数字中](https://stackoverflow.com/questions/4030928/extract-digits-from-a-string-in-java)的解决方案。它返回我“532”。

有人对此有想法吗？

谢谢

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-06-10T18:18:49.207

您可以直接使用具有和方法的[扫描仪](http://docs.oracle.com/javase/1.5.0/docs/api/java/util/Scanner.html)，如下所示：`nextDouble()``hasNextDouble()`

```
 Scanner st = new Scanner("I'm 53.2 km away");
        while (!st.hasNextDouble())
        {
            st.next();
        }
        double value = st.nextDouble();
        System.out.println(value); 
```

输出：**53.2**

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-10T18:10:48.710

这是带有测试仪的良好正则表达式站点：

[http://gskinner.com/RegExr/](http://gskinner.com/RegExr/)

这很好用`\d+\.?\d+`

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-06-10T18:14:28.180

```
import java.util.regex.*;

class ExtractNumber
{
    public static void main(String[] args)
    {
        String str = "I'm 53.2 km away";
        String[] s = str.split(" ");
        Pattern p = Pattern.compile("(\\d)+\\.(\\d)+");
        double d;
        for(int i = 0; i< s.length; i++)
        {
            Matcher m = p.matcher(s[i]);
            if(m.find())
                d = Double.parseDouble(m.group());
        }
        System.out.println(d);
    }
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2014-08-16T08:07:32.690

最好和最简单的方法是使用正则表达式和 replaceAll 字符串方法。例如

```
String a = "2.56 Kms";

String b = a.replaceAll("\\^[0-9]+(\\.[0-9]{1,4})?$","");

Double c = Double.valueOf(b);

System.out.println(c); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-10T18:18:09.940

如果您确定您的数字是“单词”（空格分隔）并且不想使用正则表达式，您可以解析它们......

```
String myString = "I'm 53.2 km away";
List<Double> doubles = new ArrayList<Double>();
for (String s : myString.split(" ")) {
    try {
        doubles.add(Double.valueOf(s));
    } catch (NumberFormatException e) {
    }
} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2014-11-26T08:40:19.653

我刚刚做了一个方法getDoubleFromString。我认为这不是最好的解决方案，但效果很好！

```
public static double getDoubleFromString(String source) {
        if (TextUtils.isEmpty(source)) {
            return 0;
        }

        String number = "0";
        int length = source.length();

        boolean cutNumber = false;
        for (int i = 0; i < length; i++) {
            char c = source.charAt(i);
            if (cutNumber) {
                if (Character.isDigit(c) || c == '.' || c == ',') {
                    c = (c == ',' ? '.' : c);
                    number += c;
                } else {
                    cutNumber = false;
                    break;
                }
            } else {
                if (Character.isDigit(c)) {
                    cutNumber = true;
                    number += c;
                }
            }
        }
        return Double.parseDouble(number);
    } 
```

# c++ - 如何有效地计算两点之间的角度？

> ID：10971076
> 
> 赞同：2
> 
> 时间：2012-06-10T18:08:09.383
> 
> 标签：c++, math, optimization, game-physics

我正在尝试优化实验中的模拟功能，这样我就可以一次运行更多的人工大脑控制代理。我分析了我的代码，发现我的代码现在的最大瓶颈是计算每个代理到每个代理的相对角度，即 O(n ² )，减去我所做的一些小的优化。这是我用于计算角度的当前代码片段：

```
[C++]
double calcAngle(double fromX, double fromY, double fromAngle, double toX, double toY)
{
    double d = 0.0;
    double Ux = 0.0, Uy = 0.0, Vx = 0.0, Vy = 0.0;

    d = sqrt( calcDistanceSquared(fromX, fromY, toX, toY) );

    Ux = (toX - fromX) / d;

    Uy = (toY - fromY) / d;

    Vx = cos(fromAngle * (cPI / 180.0));
    Vy = sin(fromAngle * (cPI / 180.0));

    return atan2(((Ux * Vy) - (Uy * Vx)), ((Ux * Vx) + (Uy * Vy))) * 180.0 / cPI;
} 
```

我有两个 2D 点 (x [1] , y [1] ) 和 (x [2] , y [2 ) 以及“从”点 (x] [a] )的朝向。我想计算代理 x 需要转向（相对于其当前面向）面对代理 y 的角度。

根据分析器，最昂贵的部分是**atan2**。我已经用谷歌搜索了几个小时，上面的解决方案是我能找到的最好的解决方案。有谁知道计算两点之间角度的更有效方法？如果这会影响任何事情，我愿意为速度牺牲一点精度（+/- 1-2 度）。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-10T18:17:53.930

正如评论中提到的，可能有一些高级方法可以减少您的计算负载。

但是对于手头的问题，您可以只使用[点积关系](http://en.wikipedia.org/wiki/Dot_product#Geometric_interpretation)：

```
theta = acos ( a . b / ||a|| ||b|| ) 
```

其中`a`和`b`是您的向量，`.`表示“点积”并`|| ||`表示“向量幅度”。

本质上，这会将您的 { `sqrt`, `cos`, `sin`, `atan2`} 替换为 { `sqrt`, `acos`}。

我还建议在所有内部计算中坚持使用弧度，仅在人类可读 I/O 的角度之间进行转换。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-11T09:10:15.007

您的评论说明了很多：“我正在为每个代理模拟 180 度的正面视网膜，所以我需要角度”。不，你没有。您只需要知道位置向量和视觉向量之间的角度是大于还是小于 90 度。

这*很*`A·B`简单：如果 A 和 B 之间的角度小于 90 度，则点积> 0；如果角度正好是 90 度，则为 0，如果角度大于 90 度，则 <0。计算这个需要 3 次乘法和 2 次加法。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-10T18:17:52.073

我认为这更像是一个数学问题：

尝试

abs(arctan((y1-yfrom)/(x1-xfrom)) - arctan(1/((y2-yfrom2)/(x2-xfrom2))))

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-10T18:22:37.447

使用这两个向量的[点积](http://en.wikipedia.org/wiki/Dot_product)，最坏的情况是你需要做一个反余弦：

A = 面对方向。B = 代理 Y 从代理 X 的方向

计算点是简单的乘法和加法。从那里你有角度的余弦。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-10T18:59:37.080

对于初学者，您应该意识到有一些简化可以稍微减少计算：

1.  您无需计算从代理到自身的角度，
2.  如果您有从代理 i 到代理 j 的角度，那么您已经知道从代理 j 回到代理 i 的角度。

我不得不问：“agent i 转向面对 agent j”是什么意思？如果两个表面彼此正对，您是否需要进行计算？你对“直视对方”有什么容忍度？

如果您不再专注于数学并更全面地描述问题，那么建议做什么会更容易。

# spring - Pro Spring 3book，类路径资源【app-context-annotation.xml】无法打开，因为不存在

> ID：10971077
> 
> 赞同：0
> 
> 时间：2012-06-10T18:08:14.690
> 
> 标签：spring

我正在尝试通过以下书籍 Pro Spring3 来学习 Spring3。我在第 4 章，作者解释了 IoC 和 DI。他使用 GenericXmlApplicationContext 来指定配置文件。他执行以下操作：

```
package com.apress.prospring3.ch4;

import org.springframework.context.support.GenericXmlApplicationContext;

public class UsingSetterInjection {

    public static void main(String[] args) {

        GenericXmlApplicationContext ctx = new GenericXmlApplicationContext();
        //ctx.load("classpath:app-context-xml.xml");
        ctx.load("classpath:app-context-annotation.xml");
        ctx.refresh();      

        MessageRenderer messageRenderer = ctx.getBean("messageRenderer", MessageRenderer.class);
        messageRenderer.render();
    }
} 
```

我的结构是

src/main/resources/app-context-annotation.xml

IOException 从类路径资源 [app-context-annotation.xml] 解析 XML 文档；嵌套异常是 java.io.FileNotFoundException：类路径资源 [app-context-annotation.xml] 无法打开，因为它不存在

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-07-19T17:54:44.867

给出完整的路径，它会像魅力一样工作。

```
 GenericXmlApplicationContext ctx = new GenericXmlApplicationContext();
    ctx.load("classpath:META-INF/spring/app-context-annotation.xml"); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-11T05:38:18.407

您可以尝试使用以下行来加载您的 xml 文件吗？

```
ctx.load("classpath*:app-context-annotation.xml"); 
```

我在类路径之后添加了一个*****。我认为这应该可以解决您的问题。否则，您需要检查此文件是否存在于应用程序类路径中。

干杯。

# ruby-on-rails - 尝试运行将 jruby 设置为 1.9 兼容性的 rails 控制台时出现 NullPointer 异常

> ID：10971078
> 
> 赞同：0
> 
> 时间：2012-06-10T18:08:22.977
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, jruby, jrubyonrails

我在尝试运行具有 jruby 1.9 兼容性的 rails 控制台时看到错误。当我在 1.8 模式下运行 rails 控制台时，这工作正常。

我正在使用以下内容，

*   转速 (1.8.1)
*   朱比 (1.6.4)
*   导轨 (3.2.5)
*   mongoid (2.4.11)
*   Mac OSX 狮子

当我创建 rails 应用程序时，我将 jruby 设置为 1.8 兼容性。我不知道这是否是我的问题的根本原因，但我在创建具有 1.9 兼容性的项目时遇到问题，因为 bundle install 似乎挂在 1.9 兼容模式下。

**错误如下**

```
trendy@~/rails/contacts : JRUBY_OPTS=--1.9 rails c
LoadError: load error: /Users/trendy/rails/contacts/config/environment --     java.lang.NullPointerException: null
           require at org/jruby/RubyKernel.java:1047
  require_environment! at /Users/trendy/.rvm/gems/jruby-1.6.4@contacts/gems/railties-3.2.5/lib/rails/application.rb:103
            (root) at /Users/trendy/.rvm/gems/jruby-1.6.4@contacts/gems/railties-3.2.5/lib/rails/commands.rb:40
           require at org/jruby/RubyKernel.java:1047
            (root) at script/rails:6 
```

# c++ - 变量未在私有作用域类中声明，成员函数无法访问

> ID：10971083
> 
> 赞同：0
> 
> 时间：2012-06-10T18:09:15.613
> 
> 标签：c++, private-members

```
//This is the header file (header.h)
class about{

char w[10][40];

public:
void get(const char core[ ][2000], int num);

}; 
```

~~

```
//This is the cpp file (program.cpp)
 #include "header.h"
 #include <cstring>

void about::get(const char core[ ][2000], int num){

char data[2000];

strcpy(w[0], data);

} 
```

我越来越`program.cpp:13: error: 'w' was not declared in this scope`

我正在尝试执行 strcpy ，`data`其中包含一些`w`来自类的私有部分的信息，并使用成员函数来访问它们。

我不确定我是否忘记了什么以及为什么我无法访问它们。

## 感谢 Sergey Vakulenko 的最后回答

**头文件**的顺序很重要。

它应该是

```
 #include <cstring>
 #include "header.h" 
```

不是

```
 #include "header.h"
 #include <cstring> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-10T18:20:28.223

将这些标头添加到您的 cpp 文件中：

```
#include <stdio.h>
#include <string.h>
#include "nameofheader.h" 
```

***编辑（更完整的说明）：***

对我来说，这个例子没有给出任何错误：

1.h：

```
class about{

char w[10][40];

public:
void get(const char core[ ][2000], int num);

}; 
```

1.cpp：

```
#include <stdio.h>
#include <string.h>
#include "1.h"
//This is the cpp file (program.cpp)

void about::get(const char core[ ][2000], int num){

char data[2000];

strcpy(w[0], data);

}

int main (int argc, char** argv) {

return 0;
} 
```

用 g++ 编译：

g++ 1.cpp -o 1

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-10T18:23:44.777

您的程序，您在这里向我们展示的方式，应该可以毫无问题地编译：

[ideone.com/Bj6VU](http://ideone.com/Bj6VU)

如果您需要更多帮助，您应该使您正在编译的所有两个文件（program.cpp 和 header.h）都可用。

# javascript - 如何获取不同选项卡的实例，以便我可以存储变量/执行特定于各个选项卡的操作

> ID：10971087
> 
> 赞同：0
> 
> 时间：2012-06-10T18:09:45.853
> 
> 标签：javascript, gwt, firefox-addon

注意：我正在使用 GWT 构建一个 firefox 扩展

假设我有一个在浏览器的不同选项卡上运行的类：

```
class TabRoutine{
  Element tab;
  static int tabData;

  public TabRoutine(Element tab){
    this.tab=tab;
  }

  public void tabMethod(){
    //Operation on tab
  }      
} 
```

对于每个选项卡，我必须创建一个此类的实例，一旦选项卡关闭，我想将其销毁。因此，每个选项卡都有一个与之相关的 int tabData。这是我的处理方法：

我有与我可用的每个选项卡相关的文档元素（如果有帮助，我也有窗口对象）。因此，我决定使用

```
gBrowser.getBrowserForDocument(doc); 
```

我的问题是这个浏览器元素对于标签来说是独一无二的吗？我的意思是说我有 2 个带有文档 doc1 和 doc2 的选项卡。如果我将这些浏览器元素映射到 TabRoutine 的对象，每个单独的选项卡是否总是返回相同（且正确）的浏览器，以便我可以找到与之相关的对象？

请告诉问题的某些方面是否不清楚，我会详细说明。非常感谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-11T07:05:01.120

是的，每个`<browser>`元素都与一个特定的选项卡相关联。但是，它不绑定到特定的内容文档 - 可以将不同的站点加载到同一选项卡中。您可能希望在扩展程序启动时浏览该[`gBrowser.browsers`集合。](https://developer.mozilla.org/en/XUL/tabbrowser#p-browsers)然后，无论何时打开或关闭选项卡，您都会监听事件以获取通知（使用[`TabOpen`方法`TabClose`](https://developer.mozilla.org/en/Code_snippets/Tabbed_browser#Notification_when_a_tab_is_added_or_removed)获取[与](https://developer.mozilla.org/en/Code_snippets/Tabbed_browser#Notification_when_a_tab_is_added_or_removed)[`gBrowser.getBrowserForTab`这些](https://developer.mozilla.org/en/XUL/tabbrowser#m-getBrowserForTab)事件`<browser>`关联的元素）。

# php - 在我自己的抽象库（Zend 框架）中返回控制器操作

> ID：10971093
> 
> 赞同：0
> 
> 时间：2012-06-10T18:10:22.973
> 
> 标签：php, zend-framework

您好我正在尝试在 Zend Framework 的调度方法之一中检索我自己的库抽象中的控制器操作返回的值，我想知道这个壮举是否可行，如果可以，该怎么做。

我的代码如下：

**索引控制器**

```
class IndexController extends My_Controller
{

    public function init()
    {
        /* Initialize action controller here */
    }

    public function indexAction()
    {
       // action body
        return 'hello world';
    }

} 
```

**我的控制器**

```
abstract class My_Controller extends Zend_Controller_Action
{
    /**
     * Initialize Core_Controller
     * @param Zend_Controller_Request_Abstract $request
     * @param Zend_Controller_Response_Abstract $response
     * @param array $invokeArgs
     */
    public function __construct(Zend_Controller_Request_Abstract $request, Zend_Controller_Response_Abstract $response, array $invokeArgs = array())
    {
        parent::__construct($request, $response, $invokeArgs);
        $this->_helper->viewRenderer->setNoRender();
    }

    public function preDispatch()
    {
        //something here
    }

    public function postDispatch()
    {
        //something here
    }

    public function dispatch()
    {
        //something here
    }
} 
```

我需要获取该库的控制器中返回的值，以便将其转换为 json，然后打印到屏幕上。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-10T19:08:00.960

在 ZF 1 中，无法从控制器操作中获取返回值。Zend Framework 本身从不使用或捕获此值。

看一下`Zend/Controller/Action.php`第 516 行（ZF 1.11.11），这是 ZF 调用控制器动作的地方，并且没有捕获或使用返回值。

```
public function dispatch($action)
{
    // Notify helpers of action preDispatch state
    $this->_helper->notifyPreDispatch();

    $this->preDispatch();
    if ($this->getRequest()->isDispatched()) {
        if (null === $this->_classMethods) {
            $this->_classMethods = get_class_methods($this);
        }

        // If pre-dispatch hooks introduced a redirect then stop dispatch
        // @see ZF-7496
        if (!($this->getResponse()->isRedirect())) {
            // preDispatch() didn't change the action, so we can continue
            if ($this->getInvokeArg('useCaseSensitiveActions') || in_array($action, $this->_classMethods)) {
                if ($this->getInvokeArg('useCaseSensitiveActions')) {
                    trigger_error('Using case sensitive actions without word separators is deprecated; please do not rely on this "feature"');
                }
                $this->$action(); // <--- line 516 - this calls your action
            } else {
                $this->__call($action, array());
            }
        }
        $this->postDispatch();
    }

    // whats actually important here is that this action controller is
    // shutting down, regardless of dispatching; notify the helpers of this
    // state
    $this->_helper->notifyPostDispatch();
} 
```

如您所见，控制器返回的值从未使用过。此外，在 ZF2 中，它们正在改变控制器操作的工作方式，因此返回值实际上具有意义，因此您可能需要考虑不同的方法。

目前我能想到的最快的事情就是不要尝试从控制器返回一个值，只需设置一个稍后可以获取的注册表值。

例如

```
public function returnAction()
{
    // ...

    Zend_Registry::set('controller_return_value', 'hello world');
} 
```

然后，在您的插件中或您尝试获取值的任何地方：

```
try {
    $retval = Zend_Registry::get('controller_return_value');
} catch (Zend_Exception $ex) {
    $retval = null; // no return value set by controller
} 
```

# blackberry - 在 BlackBerry UI 右对齐问题

> ID：10971097
> 
> 赞同：0
> 
> 时间：2012-06-10T18:11:05.823
> 
> 标签：blackberry

在 BlackBerry UI 我试图对齐一些 LabelFields 右对齐和左对齐：

为此，我在顶层创建了一个 VertiFieldManager，然后向其添加一个 Horizo​​ntalFieldmanager，并将所有 lalbelFields 添加到 Horizo​​ntalFieldManager，

水平字段管理器正在强制内容左对齐。如何对齐右侧的字段？

我尝试了间距，但在具有不同 Pixcels 分辨率的 BB 设备中看起来不太好。

请指教。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-10T22:51:19.237

我还是 BB 的新手，但是您是否尝试过更改 Horizo​​ntalField 的 Long 样式？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-11T06:07:15.803

不幸的是，没有很好的解决方案。比以前小我认为是这样的：

```
HorizontalFieldManager hfm = new HorizontalFieldManager();

LabelField leftField = new LabelField("One");
hfm.add(leftField);

LabelField rightField = new LabelField("Two", LabelField.USE_ALL_WIDTH | DrawStyle.RIGHT);
hfm.add(rightField); 
```

基本上，我们将所有可用宽度区域用于第二个字段，并要求它以右对齐方式绘制文本。这个解决方案没问题，因为 LabeLField 不可聚焦。一旦您必须处理可聚焦的字段，请使用@Signare 的解决方案。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-11T05:33:22.937

试试这个代码 -

```
JustifiedHorizontalFieldManager j=new JustifiedHorizontalFieldManager(new NullField(),your_field, true);
add(j); 
```

//JustifiedHorizo​​ntalFieldManager 类如下。

```
public class JustifiedHorizontalFieldManager extends Manager
{
    private static final int SYSTEM_STYLE_SHIFT = 32;

public Field _leftField;
public Field _rightField;

private boolean _giveLeftFieldPriority;

public JustifiedHorizontalFieldManager( Field leftField, Field rightField, boolean giveLeftFieldPriority )
{
    this( leftField, rightField, giveLeftFieldPriority, Field.USE_ALL_WIDTH );
}

public JustifiedHorizontalFieldManager( Field leftField, Field rightField, boolean giveLeftFieldPriority, long style )
{
    super( style );

    _leftField = leftField;
    _rightField = rightField;

    add( _leftField );
    add( _rightField );

    _giveLeftFieldPriority = giveLeftFieldPriority;
}

public JustifiedHorizontalFieldManager( boolean giveLeftFieldPriority, long style )
{
    super( style );
    _giveLeftFieldPriority = giveLeftFieldPriority;
}

public void addLeftField( Field field )
{
    if( _leftField != null ) {
        throw new IllegalStateException();
    }
    _leftField = field;
    add( _leftField );
}

public void addRightField( Field field )
{
    if( _rightField != null ) {
        throw new IllegalStateException();
    }
    _rightField = field;
    add( _rightField );
}

public int getPreferredWidth()
{
    return _leftField.getPreferredWidth() + _rightField.getPreferredWidth();
}

public int getPreferredHeight()
{
    return Math.max( _leftField.getPreferredHeight(), _rightField.getPreferredHeight() );
}

protected void sublayout( int width, int height )
{
    Field firstField;
    Field secondField;
    if( _giveLeftFieldPriority ) {
        firstField = _leftField;
        secondField = _rightField;
    } else {
        firstField = _rightField;
        secondField = _leftField;
    }

    int maxHeight = 0;

    int availableWidth = width;
    availableWidth -= _leftField.getMarginLeft();
    availableWidth -= Math.max( _leftField.getMarginRight(), _rightField.getMarginLeft() );
    availableWidth -= _rightField.getMarginRight();

    layoutChild( firstField, availableWidth, height - firstField.getMarginTop() - firstField.getMarginBottom() );
    maxHeight = Math.max( maxHeight, firstField.getMarginTop() + firstField.getHeight() + firstField.getMarginBottom() );
    availableWidth -= firstField.getWidth();

    layoutChild( secondField, availableWidth, height - secondField.getMarginTop() - secondField.getMarginBottom() );
    maxHeight = Math.max( maxHeight, secondField.getMarginTop() + secondField.getHeight() + secondField.getMarginBottom() );
    availableWidth -= secondField.getWidth();

    if( !isStyle( Field.USE_ALL_HEIGHT ) ) {
        height = maxHeight;
    }
    if( !isStyle( Field.USE_ALL_WIDTH ) ) {
        width -= availableWidth;
    }

    setPositionChild( _leftField, _leftField.getMarginLeft(), getFieldY( _leftField, height ) );
    setPositionChild( _rightField, width - _rightField.getWidth() - _rightField.getMarginRight(), getFieldY( _rightField, height ) );

    setExtent( width, height );
}

private int getFieldY( Field field, int height )
{
    switch( (int)( ( field.getStyle() & FIELD_VALIGN_MASK ) >> SYSTEM_STYLE_SHIFT ) ) {
        case (int)( FIELD_BOTTOM >> SYSTEM_STYLE_SHIFT ):
            return height - field.getHeight() - field.getMarginBottom();
        case (int)( FIELD_VCENTER >> SYSTEM_STYLE_SHIFT ):
            return field.getMarginTop() + ( height - field.getMarginTop() - field.getHeight() - field.getMarginBottom() ) / 2;
        default:
            return field.getMarginTop();
    }
}

public Field getLeftField()
{
    return _leftField;
}

public Field getRightField()
{
    return _rightField;
}

public void replace( Field oldField, Field newField )
{
    if( oldField == newField ) {
        // Nothing to do
        return;
    }

    if( oldField == _leftField ) {
        _leftField = newField;
    } else if( oldField == _rightField ) {
        _rightField = newField;
    }
    add( newField );
    delete( oldField );
}

} 
```

# java - 如何在 Java 中使用 Mockito 验证字符串内容

> ID：10971100
> 
> 赞同：0
> 
> 时间：2012-06-10T18:11:25.870
> 
> 标签：java, mockito

我是使用 Mockito 测试框架的新手。我需要对一种返回字符串内容的方法进行单元测试。同样的内容也将存储在一个 .js 文件中（即“8.js”）。如何验证从该方法返回的字符串内容是否符合我的预期。

请找到以下用于生成 .js 文件的代码：

```
public String generateJavaScriptContents(Project project)
   {

      try
      {
         // Creating projectId.js file
         FileUtils.mkdir(outputDir);
         fileOutputStream = new FileOutputStream(outputDir + project.getId() + ".js");
         streamWriter = new OutputStreamWriter(fileOutputStream, "UTF-8");
         StringTemplateGroup templateGroup =
            new StringTemplateGroup("viTemplates", "/var/vi-xml/template/", DefaultTemplateLexer.class);
         stringTemplate = templateGroup.getInstanceOf("StandardJSTemplate");
         stringTemplate.setAttribute("projectIdVal", project.getId());
         stringTemplate.setAttribute("widthVal", project.getDimension().getWidth());
         stringTemplate.setAttribute("heightVal", project.getDimension().getHeight());
         stringTemplate.setAttribute("playerVersionVal", project.getPlayerType().getId());
         stringTemplate.setAttribute("finalTagPath", finalPathBuilder.toString());
         streamWriter.append(stringTemplate.toString());
         return stringTemplate.toString();
      }
      catch (Exception e)
      {
         logger.error("Exception occurred while generating Standard Tag Type Content", e);
         return "";
      }

   } 
```

上述方法的输出写入 .js 文件，该文件的内容如下所示：

> 变量投影= 8；
> var playerwidth = 300;
> var playerheight = 250;
> var player_version = 1;
> ......

我已经编写了`testMethod()`using mockito 来测试它，但是我能够使用 test 方法成功编写 .js 文件，但是如何验证它的内容？

谁能帮我解决这个问题？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-11T04:16:44.070

As @ŁukaszBachman mentions, you can read the contents from the js file. There are a couple of things to consider when using this approach:

1.  The test will be slow, as you will have to wait for the js content to be written to the disk, read the content back from the disk and assert the content.
2.  The test could theoretically be flaky because the entire js content may not be written to the disk by the time the code reads from the file. (On that note, you should probably consider calling flush() and close() on your OutputStreamWriter, if you aren't already.)

Another approach is to mock your `OutputStreamWriter` and inject it into the method. This would allow you to write test code similar to the following:

```
OutputStreamWriter mockStreamWriter = mock(OutputStreamWriter.class);
generateJavaScriptContents(mockStreamWriter, project);
verify(mockStreamWriter).append("var projectid = 8;\nvar playerwidth = 300;..."); 
```

[http://mockito.googlecode.com/svn/branches/1.5/javadoc/org/mockito/Mockito.html#verify%28T%29](http://mockito.googlecode.com/svn/branches/1.5/javadoc/org/mockito/Mockito.html#verify%28T%29)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-10T20:27:25.483

如果您将此`*.js`文件保存在文件系统上，则只需创建 util 方法，该方法将读取其内容，然后使用某种方式`assertEquals`将其与您的固定数据进行比较。

[这](http://www.dzone.com/snippets/java-read-file-string)是将文件内容读入`String`.

# c++ - Qt 资源文件适用于 Windows XP 但不适用于 Windows 7？

> ID：10971106
> 
> 赞同：1
> 
> 时间：2012-06-10T18:11:47.510
> 
> 标签：c++, windows, qt, windows-xp

![在此处输入图像描述](../Images/281e1f58eda99380c31644f4c64e72ab.png)我在 Windows XP 上的 Qt 中制作了一个程序，现在我将该代码移植到 Windows 7 上，但是当我编译代码时，.qrc（资源文件）中的图片和图标 pic 没有显示在程序中。这些图片位于头文件和 .cpp 文件所在的同一文件夹中。

谢谢

这是代码：

```
void MainWindow::on_actionUmer_s_Program_triggered()
{
    QMessageBox about;

    about.setFont(QFont("Times",13,0,false));
    about.setText("<h2>Umer's Program</h2>");
    setWindowIcon(QIcon(":/pics/umerfariiq.jpg"));
    about.setInformativeText("Copyright ; 2012 Umer Software Inc.\nI wrote this program for fun I am a student of System engineering at UET Peshawar.\nAll thanks to Almighty for giving me the capability to write it\n");
    about.setStandardButtons(QMessageBox::Ok);
    about.setIconPixmap(QPixmap(":/pics/umergokuup.jpg"));
    about.setDefaultButton(QMessageBox::Ok);
    about.show();
    about.exec();
} 
```

Qmake

QT += 核心 gui

目标 = 评论程序模板 = 应用程序

来源 += main.cpp\mainwindow.cpp\itemdialog.cpp\commentdialog.cpp

HEADERS += mainwindow.h \ itemdialog.h \ commentdialog.h

FORMS += mainwindow.ui \ itemdialog.ui \ commentdialog.ui

资源 += \ pics.qrc

这是 .qrc 文件的图片

# sql - 将其他列添加到与组的联接中

> ID：10971107
> 
> 赞同：1
> 
> 时间：2012-06-10T18:11:47.297
> 
> 标签：sql, oracle, join, group-by, oracle11g

在 Oracle 11g Express 中，我有以下查询：

```
select t1.product_name, SUM(t1.product_cost_per_month)
FROM table1 t1 INNER JOIN table2 t2 on (t1.product_name = t2.product_name)
WHERE t2.date > sysdate
GROUP BY t1.product_name 
```

这有效，它返回每月产品成本的总和，在某个日期之后按产品分组（我在这里仅使用 sysdate 作为示例）。

但是，我想显示一些关于每个产品的附加描述，即供应商。所以我使用这段代码：

```
select t1.product_name, SUM(t1.product_cost_per_month), t2.vendor
FROM table1 t1 INNER JOIN table2 t2 ON (t1.product_name = t2.product_name)
WHERE t2.date > sysdate
GROUP BY t1.product_name 
```

这不起作用，因为所有变量都需要对它们应用聚合函数才能使用“分组依据”，但是对于“供应商”之类的聚合函数似乎毫无意义......那么有没有办法做到这一点？

我可能会写一个简短的 pl/sql 例程来解决，但我想知道是否有一种纯粹的 SQL 方法可以做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-10T18:16:22.483

供应商也应包含在 GROUP BY 子句中。

```
GROUP BY t1.product_name, t2.vendor 
```

实现您正在做的事情的另一种技术是嵌套查询：

```
SELECT t1.product_name,
    (
        select sum(product_cost_per_month) 
         from table2 t2 
         where 
            t1.product_name = t2.product_name 
            and t2.date > sysdate
    ) as total_product_cost,
    t1.another_field,
    t1.another_field2,
    t1.another_field3
FROM table1 
```

（为任何错误道歉，我没有测试这个，但这应该给你它的要点）

# fonts - 创建自定义字体

> ID：10971108
> 
> 赞同：1
> 
> 时间：2012-06-10T18:11:55.667
> 
> 标签：fonts, cocos2d-iphone, glyph, sparrow-framework

不久前我用 Cocos2D 开发了一个游戏，并使用了[Glyph Designer](http://glyphdesigner.71squared.com/#!prettyPhoto)

是否可以将 Glyph Desiger 与非 cocos2d 项目一起使用，或者是否有任何其他框架可以用来制作自定义位图字体？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-10T23:47:40.470

是的。Glyph Designer 还可以创建[Sparrow 框架和](http://gamua.com/sparrow/)[学习 iOS 游戏编程](http://www.71squared.com/)一书中的项目可用的字体。一般来说，您几乎可以为任何游戏引擎编写自定义加载器，因为 .fnt 格式是不言自明的。如果该引擎已经支持纹理图集和位图字体渲染，那将会很有帮助。

还有其他位图字体工具（Hiero、BMFont），但它们对于 Mac/iOS 开发人员来说并不理想。一个可行的替代方案可能是[bmGlyph](http://www.bmglyph.com/)，因为它是一个原生 Mac 应用程序。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-01-16T08:30:46.663

[Glyphite.com](https://www.glyphite.com)可以帮助您直接从浏览器设计位图字体。它以标准 BMFont 格式导出，因此可以与 Cocos2D、Sparrow 和许多其他框架一起使用。与其他任何位图字体设计器相比，您可以使用 Glyphite.com 对更多效果进行分层以创建复杂字体。（披露：我为 Glyphite.com 工作）

# android - Libgdx 设置 UI 在新 GWT 项目中出现 2 个意外错误

> ID：10971110
> 
> 赞同：27
> 
> 时间：2012-06-10T18:12:05.637
> 
> 标签：android, gwt, android-emulator, libgdx

我已经运行了 setup ui，但是，我在 -html 项目中遇到了两个与教程中描述的错误不同的错误：[libgdx tutorial](http://www.youtube.com/watch?feature=player_embedded&v=pOYrtJwYaGw#!)

说明的教程错误如下（这是我没有看到的错误）：

> 要修复 HTML5/GWT 项目的错误，请转到“问题”视图，右键单击错误消息“WEB-INF/lib 目录中缺少 GWT SDK JAR gwt-servlet.jar”并选择“快速修复” ”。单击“完成”。

我遇到的错误是：

> 该项目未构建，因为其构建路径不完整。找不到 com.google.gwt.core.client.EntryPoint 的类文件。修复构建路径，然后尝试构建这个项目......

> com.google.gwt.core.client.EntryPoint 类型无法解析。它是从所需的 .class 文件中间接引用的

无论如何我可以解决这个问题吗？我刚刚更新了我的 Eclipse，我还下载了 ADT 版本 18、Android SDK 工具版本 19 和 Android SDK 平台工具版本 11。

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2012-06-10T18:41:07.953

I had the same problem a couple of weeks ago and got around it by installing the [GWT SDK](https://developers.google.com/web-toolkit/download).

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-11-17T02:16:01.377

我知道这篇文章很旧，但是虽然@Rod 的[答案](https://stackoverflow.com/a/10971341/624341)很接近解决我的问题，但它并没有完全解决。在他的回答中安装插件后，我收到了 3 条错误消息，而不是 2 条：以前的相同和新的。

查看导致问题的类，让 Eclipse 直截了当地指出问题所在：编译器合规性要求为 1.5 或更高版本，但 Eclipse 默认为 1.4。我通过**Window > Preferences > Java > Compiler > Compiler compliance level**对其进行了更改，我在其中放置了正确的 1.7，并且所有内容都编译得很干净。

PS：谢谢@Rod

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-10-03T15:46:40.277

使用**[http://dl.google.com/eclipse/plugin/4.2](http://dl.google.com/eclipse/plugin/4.2)**在 eclipse 上安装插件

而不是[http://dl.google.com/eclipse/plugin/](http://dl.google.com/eclipse/plugin/) **4.4 或 4.3**

# macos - Mac 上报价的特殊处理

> ID：10971111
> 
> 赞同：0
> 
> 时间：2012-06-10T18:12:13.040
> 
> 标签：macos, textinput

当我在我的 Mac (OS X 10.7.4) 上键入 ' 或 " 时，它会加下划线，并根据下一个符号将组合视为特殊字符（例如 ä 表示 " + a）。

我怎么能把它关掉？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-10T18:16:37.270

听起来您正在使用外国输入源。您应该转到系统偏好设置 -> 语言和文本 -> 输入并确保您使用的是正确的语言。

然而，这不是一个编程问题，所以这篇文章可能会被删除。

# javascript - 使用数组中的 div 作为 jquery 对象

> ID：10971115
> 
> 赞同：2
> 
> 时间：2012-06-10T18:12:54.763
> 
> 标签：javascript, jquery

我有一个这样的 javascript 类（我知道它在技术上不是一个类）。

```
function StackMedia (container) {

    this.container = container;
    this.items = container.find('.stackItem');
    console.log("this.items.length: "+this.items.length);

} 
```

我传递了一个容器（div），其中包含具有 css 类 stackItem 的其他 div，它们存储在项目中。

在这里我想重用它：

```
StackMedia.prototype.updatePositions = function() {

     for (var i = 0; i < this.items.length; i++) {
         this.items[i].css('left', 50);
    }
} 
```

问题是它不再是 jquery 对象，所以我收到此错误：

**TypeError: 'undefined' 不是函数（评估 'this.items[i].css('left', 50)'）**

如何将它们存储为 jquery 对象？

* * *

更新

这是我创建类的地方（工作正常）：

```
// create a stack by passing a container
    $('.stackContainer').each(function(containerIndex) {
        $(this).css('z-index', containerIndex);
        stacks.push(new StackMedia($(this)));
    }); 
```

除了最后一行之外，这几乎没问题

```
StackMedia.prototype.updatePositions = function() {

    var sm = this; // StackMedia

    // set the css properties of the items
    this.items.each(function(i){
        $(this).css('left', sm.x + i * sm.overlapX);
        $(this).css('top', sm.y + i * sm.overlapY);
        $(this).css('width', sm.itemWidth);
        $(this).css('height', sm.itemHeight);
        $(this).find('img').css('width', sm.itemWidth);
        $(this).find('img').css('height', sm.itemHeight);
    });

    // set the css properties of the container
    //console.log(sm);
    console.log($(this));
    $(this).container.css('width', 400);

}; 
```

我又得到了这个：**TypeError: 'undefined' is not an object (evalating '$(this).container.css')**

所以`$(this).container`失去了它的jquery功能，我怎样才能找回它？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-10T18:20:17.063

`this.items`是一个 jQuery 对象。不要使用普通`for`循环遍历它，使用 jQuery 的`.each`.

```
this.items.each(function(){
    $(this).css('left', 50);
}); 
```

我很确定`.css`会影响 jQuery 对象中的所有元素，所以你可以这样做：

```
this.items.css('left', 50); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-10T18:18:12.540

您的 div 具有 css 类**stackItem**，因此您可以轻松访问这些 div 使用

```
$('.stackItem') 
```

它将返回所有具有此类的 DIV。试试看。

现在容器数组包含什么并不重要。:):)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-10T18:18:55.713

你不能只添加一个项目变量吗？

```
StackMedia.prototype.updatePositions = function() {
     var item;

     for (var i = 0; i < this.items.length; i++) {
         item = this.items[i];
         $(item).css('left', 50);
     }
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-10T18:20:35.817

您可能可以将其重写为

```
StackMedia.prototype.updatePositions = function() {
   this.items.css('left', 50);
} 
```

# java - 简单的 JOGL 游戏在 gtx 470 上运行非常缓慢

> ID：10971121
> 
> 赞同：3
> 
> 时间：2012-06-10T18:13:59.663
> 
> 标签：java, opengl, jogl

我一直在为我的计算机科学课制作游戏。为简单起见，我刚刚制作了一组小游戏。为了好玩，我尝试制作经典 Snake 游戏的 3d 版本。物理和碰撞检测运行良好，在学校计算机（中等质量的 mac）上，游戏运行非常流畅。但是，在我的家用电脑上，它以 8 fps 的速度运行。我的家用电脑在带有最新驱动程序的 gtx 470 上运行，程序中的查询确认代码在带有 opengl 4.2 的 gtx 470 上运行。

这是渲染代码（在 GLCanvas 中运行）

```
 GL2 gl = ( drawable.getGL()).getGL2();
     /*System.out.println(gl.glGetString(GL.GL_VENDOR)+"\n"+
                gl.glGetString(GL.GL_RENDERER)+"\n"+
                gl.glGetString(GL.GL_VERSION));*/

     gl.glClear(GL.GL_COLOR_BUFFER_BIT | GL.GL_DEPTH_BUFFER_BIT);
    //Init camera
    gl.glMatrixMode(GL2.GL_PROJECTION);
    gl.glLoadIdentity();

    // Perspective.
    float widthHeightRatio = (float) getWidth() / (float) getHeight();
    glu.gluPerspective(75, widthHeightRatio, 1, 2000);

    double dX, dY, dZ;
    if (player.locs.size()==0)
    {
        dX=0.1*player.vel.x;
        dY=0.1*player.vel.y;
        dZ=0.1*player.vel.z;
    }
    else
    {
        dX=player.xHead-player.locs.get(0).x;
        dY=player.yHead-player.locs.get(0).y;
        dZ=player.zHead-player.locs.get(0).z;

    }
    player.up.normalizeDist();
    double xPos=4*dX-0.1*player.up.x;
    double yPos=4*dY-0.1*player.up.y;
    double zPos=4*dZ-0.1*player.up.z;
    double desiredDist=0.2;
    double totalDist=Math.sqrt(xPos*xPos+yPos*yPos+zPos*zPos);
    xPos=xPos*desiredDist/totalDist;
    yPos=yPos*desiredDist/totalDist;
    zPos=zPos*desiredDist/totalDist;
    double camX=player.xHead-xPos;
    double camY=player.yHead-yPos;
    double camZ=player.zHead-zPos;
    glu.gluLookAt(xWidth*(camX), yWidth*(camY),zWidth*(camZ), xWidth*(player.xHead+2*dX), yWidth*(player.yHead+2*dY), zWidth*(player.zHead+2*dZ), player.up.x, player.up.y, -player.up.z);
    // Change back to model view matrix.
    gl.glMatrixMode(GL2.GL_MODELVIEW);
    gl.glLoadIdentity();

    float SHINE_ALL_DIRECTIONS = 1;
    float[] lightPos = {xWidth/2, yWidth/2, zWidth/2, SHINE_ALL_DIRECTIONS};
    float[] lightColorAmbient = {0.2f, 0.2f, 0.2f, 0.2f};
    float[] lightColorSpecular = {0.8f, 0.8f, 0.8f, 0.8f};

    // Set light parameters.
    gl.glLightfv(GL2.GL_LIGHT1, GL2.GL_POSITION, lightPos, 0);
    gl.glLightfv(GL2.GL_LIGHT1, GL2.GL_AMBIENT, lightColorAmbient, 0);
    gl.glLightfv(GL2.GL_LIGHT1, GL2.GL_SPECULAR, lightColorSpecular, 0);

    // Enable lighting in GL.

    gl.glEnable(GL2.GL_LIGHT1);
    gl.glEnable(GL2.GL_LIGHTING);

    // Set material properties.
    float[] rgba = {1f, 1f, 1f};
    gl.glMaterialfv(GL2.GL_FRONT, GL2.GL_AMBIENT, rgba, 0);
    gl.glMaterialfv(GL2.GL_FRONT, GL2.GL_SPECULAR, rgba, 0);
    gl.glMaterialf(GL2.GL_FRONT, GL2.GL_SHININESS, 0.5f);
    /*gl.glMaterialfv(GL.GL_BACK, GL.GL_AMBIENT, rgba, 0);
    gl.glMaterialfv(GL.GL_BACK, GL.GL_SPECULAR, rgba, 0);
    gl.glMaterialf(GL.GL_BACK, GL.GL_SHININESS, 0.5f);*/

   // gl.glColor3f(1f,1f,1f);
    if (camX>0)
    {

        gl.glBegin(GL2.GL_POLYGON);
        gl.glNormal3d(1,0,0);
        gl.glVertex3d(0, 0, 0);
        gl.glVertex3d(0, 0, zWidth);
        gl.glVertex3d(0, yWidth, zWidth);
        gl.glVertex3d(0, yWidth, 0);
        gl.glEnd();
    }
    if (camY>0)
    {
        gl.glBegin(GL2.GL_POLYGON);
        gl.glNormal3d(0, 1, 0);
        gl.glVertex3d(0, 0, 0);
        gl.glVertex3d(0, 0, zWidth);
        gl.glVertex3d(xWidth, 0, zWidth);
        gl.glVertex3d(xWidth, 0, 0);
        gl.glEnd();
    }
    if (camZ>0)
    {
        gl.glBegin(GL2.GL_POLYGON);
        gl.glNormal3d(0, 0, 1);
        gl.glVertex3d(0, 0, 0);
        gl.glVertex3d(xWidth, 0, 0);
        gl.glVertex3d(xWidth, yWidth, 0);
        gl.glVertex3d(0, yWidth, 0);
        gl.glEnd();
    }
    if (camX<1)
    {
        gl.glBegin(GL2.GL_POLYGON);
        gl.glNormal3d(-1, 0, 0);
        gl.glVertex3d(xWidth, 0, 0);
        gl.glVertex3d(xWidth, 0, zWidth);
        gl.glVertex3d(xWidth, yWidth, zWidth);
        gl.glVertex3d(xWidth, yWidth, 0);
        gl.glEnd();
    }
    if (camY<1)
    {
        gl.glBegin(GL2.GL_POLYGON);
        gl.glNormal3d(0, -1, 0);
        gl.glVertex3d(0, yWidth, 0);
        gl.glVertex3d(0, yWidth, zWidth);
        gl.glVertex3d(xWidth, yWidth, zWidth);
        gl.glVertex3d(xWidth, yWidth, 0);
        gl.glEnd();
    }
    if (camZ<1)
    {

        gl.glBegin(GL2.GL_POLYGON);
        gl.glNormal3d(0, 0, 1);
        gl.glVertex3d(0, 0, zWidth);
        gl.glVertex3d(xWidth, 0, zWidth);
        gl.glVertex3d(xWidth, yWidth, zWidth);
        gl.glVertex3d(0, yWidth, zWidth);
        gl.glEnd();
    }

    player.draw(xWidth, yWidth, zWidth, drawable, glu);
    for (int i=0; i<bullets.size(); i++)
    {
        bullets.get(i).draw(drawable, glu, xWidth, yWidth, zWidth);
    }
    for (int i=0; i<basicEntities.size(); i++)
    {
        basicEntities.get(i).draw( xWidth, yWidth, zWidth, drawable, glu);
    } 
```

然后对这样的代码进行大量复制粘贴调用：（xHead、yHead 和 zHead 是坐标）

```
GL gl=drawable.getGL();
GL2 gl2=gl.getGL2();        
        gl2.glPushMatrix();
        gl2.glTranslated(xHead*xWidth, yHead*yWidth, zHead*zWidth);
        float[] rgba = {0.3f, 0.5f, 1f};
        gl2.glMaterialfv(GL.GL_FRONT, GL2.GL_AMBIENT, rgba, 0);
        gl2.glMaterialfv(GL.GL_FRONT, GL2.GL_SPECULAR, rgba, 0);
        gl2.glMaterialf(GL.GL_FRONT, GL2.GL_SHININESS, 0.5f);
        GLUquadric head = glu.gluNewQuadric();
        glu.gluQuadricDrawStyle(head, GLU.GLU_FILL);
        glu.gluQuadricNormals(head, GLU.GLU_FLAT);
        glu.gluQuadricOrientation(head, GLU.GLU_OUTSIDE);
        final float radius = (float) (dotSize*xWidth);
        final int slices = 32;
        final int stacks = 32;
        glu.gluSphere(head, radius, slices, stacks);
        glu.gluDeleteQuadric(head);
        gl2.glPopMatrix(); 
```

编辑：我可以通过减少二次曲面中的切片和堆栈数量来让游戏运行得更快，但这会使游戏变得相当丑陋。另外，我删除了 a.add(this) （来自动画师），游戏仍然运行。我是否将所有内容都设置了两次动画？不过还是很慢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-10T21:25:20.353

我无法完全解释为什么它在你的学校计算机上运行得这么好，但你使用 OpenGL 的方式是一种古老的方式，对性能来说很糟糕。

使用 glBegin 绘制总是非常昂贵，因为它必须将每个顶点作为单独的 API 调用发送，这对性能不利。相反，您应该考虑使用顶点数组（好）或顶点缓冲区对象（在大多数情况下更好）进行渲染。使用这些将需要稍微改变思维，但我相信您可以找到许多使用这些搜索词的教程。

我也不是 glu 的专家，尽管您对 gluSphere 和 gluQuadrics 的使用也让我怀疑。**glu**函数的大部分工作可能不在显卡上执行，所以每次调用 gluSphere 时 CPU 必须重新计算球体的所有顶点，然后才能对 GPU 执行任何操作。一个更好的解决方案是生成您自己的球体顶点列表，将其作为 VBO 上传到 GPU，然后在您想要绘制球体的任何时候执行 VBO 绘制调用。这应该可以节省大量的计算时间。

# ruby - Ruby 中来自 Self 的变量名

> ID：10971122
> 
> 赞同：0
> 
> 时间：2012-06-10T18:14:04.263
> 
> 标签：ruby

我有一个变量，可以调用它`@foo`。我希望它是一个字符串，所以我调用`@foo.downcase`. 有时它为零，我会得到这个错误：

```
NoMethodError: undefined method `downcase' for nil:NilClass
    from (irb):4
    from /Users/schneems/.rvm/rubies/ruby-1.9.2-p290/bin/irb:16:in `<main> 
```

我想做的是写一些代码告诉我 nil 实际上是`@foo`

```
NoMethodError: undefined method `downcase' on variable @foo, variable is a nil:NilClass
    from (irb):4
    from /Users/schneems/.rvm/rubies/ruby-1.9.2-p290/bin/irb:16:in `<main> 
```

要执行此类操作，我需要以编程方式获取变量的名称。

**问题：**是否有可能以编程方式 ruby​​ 获取变量的名称？

我正在寻找产生如下输出的东西：

```
@foo.magical_variable_method    #=> '@foo'
bar.magical_variable_method     #=> 'bar'
AweSome.magical_variable_method #=> 'AweSome'
$wat.magical_variable_method    #=> '$wat' 
```

我不想要变量的值，也不关心它是否是`nil`. 我想要变量的人类可读名称。是否有可能以编程方式获取变量的名称？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-10T18:26:42.313

你想要的有点乱。

这是完成此任务的正确方法：

```
@foo && @foo.downcase 
```

或者你可以使用 rails 库：

```
require 'active_support'

@foo.try(:downcase) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-10T19:58:56.290

目前没有任何方法可以做到这一点。

变量只是引用，而不是对象本身。如果您使用点表示法来调用方法，例如`downcase`，则该方法正在对对象进行操作，而不是对变量进行操作。您示例中的对象是单例`nil`；如果`nil`在一个地方分配了一个属性来命名它被分配到的变量，那么相同的属性将适用于所有`nil`s。

更一般地说，一个对象可能有许多指向它的变量/引用，因此没有很好的方法来确定应该将哪个变量名保存在对象中。**但是**，Ruby 中有一些特殊的处理方法可以将类分配给常量。在这种情况下，类对象*确实会*记住分配给它的*第一个*常量的名称，例如：

```
$ irb
1.9.3p194 :001 > Foo = Class.new do
1.9.3p194 :002 >   attr_accessor :foo
1.9.3p194 :003?> end
 => Foo 
1.9.3p194 :004 > Bar = Foo
 => Foo 
1.9.3p194 :005 > Foo.name
 => "Foo" 
1.9.3p194 :006 > Bar.name
 => "Foo" 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-10T20:05:18.297

您可以使用 instance_variable_get(:@foo) 从符号中获取实例变量，这只会为您提供值。

但你可以这样做：

```
puts "I'm gonna call @foo now, people"
some_obj.instance_variable_get(:@foo) 
```

你也可以为你想看的 attrs 做一个 method_missing 钩子。不要为 @foo 创建访问器方法并在 method_missing 中捕获调用并将其转发给一些通用实现，例如 instance_variable_get

未经测试的尝试：

```
def method_missing(method_name, *args)
  super(method_name, *args) unless watched_attributes.include?(method_name)
  attr = ":@#{method_name.to_str}"
  log.debug "Calling watched attribute #{attr}"
  val = instance_variable_get(method_name)
  log.debug "#{attr} was nil omg!" unless val
  val
end 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-10T18:26:06.613

**编辑：** 可能最好的方法（见 mu 的评论）就是确保你正在使用一个字符串：

```
@foo.to_s.downcase 
```

您无需获取“名称”即可执行此操作。您可以只使用条件：

```
# Downcased if @foo's a string, empty string otherwise:
(String === @foo)? @foo.downcase : '' 
```

或者，如果您要在很多地方执行此操作，并且不想将每个地方都包装在有条件的猴子补丁中`NilClass`并添加一个虚拟`downcase`方法：

```
class NilClass
    def downcase
        return ''
    end
end 
```

希望有帮助！

# c - 与c中的硬件交互

> ID：10971126
> 
> 赞同：1
> 
> 时间：2012-06-10T18:14:38.180
> 
> 标签：c, winapi, function, pointers

通过保存函数地址的指针调用函数会生成错误代码：

```
p=GetProcAddress(h,"installhook");//p is a pointer that holds the address returned from getprocaddress() function
(*p)(); //using this pointer making a call to installhook function 
```

但是当我通过它进行调用时，代码正在生成错误，`(*p)();`它说术语不会评估为函数。如何克服这个问题？还有其他方法可以使用指针调用函数吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-10T18:21:15.040

您需要将返回值`GetProcAddress`转换为正确的函数类型。例如：

```
typedef void (*FuncPtr)();    //assuming a function like void f()
FuncPtr p;

p = (FuncPtr) GetProcAddress(h, "funcName");
if (p)
    p();
else
    printf("Function not found\n"); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-10T18:21:30.920

验证`p`声明如下：

```
void (*p)(void); 
```

并且返回值的类型`GetProcAddress`是相同的。

# ruby-on-rails - 运行 bundle install 时，在 1.9 兼容模式下使用 jruby 创建新的 rails 项目会挂起

> ID：10971127
> 
> 赞同：3
> 
> 时间：2012-06-10T18:14:42.070
> 
> 标签：ruby-on-rails, ruby, jruby, jrubyonrails

有人遇到过这个问题吗？我能够在 1.8 兼容模式下正常创建项目。

这是我正在使用的

*   Mac OSX 狮子
*   JRuby 1.6.4
*   Java 1.6.0_31
*   rvm 1.8.1

我正在运行以下命令

```
JRUBY_OPTS=--1.9 rails new myapp 
```

这会继续创建应用程序所需的所有文件，然后在语句处挂起。

```
run bundle install 
```

当我查看 Activity Monitor 时，java 进程正在使用大部分 cpu。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-10-09T06:58:24.167

总结评论中的答案，以便从“未回答”过滤器中删除此问题：

[升级到 1.6.7 解决了这个问题，原始海报 ( Moiz Raja](https://stackoverflow.com/users/420504/moiz-raja) )证实了这一点。[Hang 本身在 1.6.4 ( Dave Newton](https://stackoverflow.com/users/438992/dave-newton) ) 和 1.6.5 ( [febeling](https://stackoverflow.com/users/326840/febeling) )上得到多方确认。

# xcode - Mac OS X 10.7.4 破坏了 OpenGL Profiler

> ID：10971130
> 
> 赞同：1
> 
> 时间：2012-06-10T18:15:03.747
> 
> 标签：xcode, macos, opengl, osx-lion

我最近发现，从 10.7.3 升级到 10.7.4 时，OpenGL Profiler 似乎不再能够挂接到程序中。它可以很好地启动应用程序，但没有断点、跟踪、资源等工作。

我发现了这个问题：[https](https://discussions.apple.com/thread/3958500?start=0&tstart=0) : //discussions.apple.com/thread/3958500?start=0&tstart=0 但似乎无法弄清楚海报建议的解决方案，有人可以阐明如何在 xcode 中执行此操作?

# ios - 将设备语言设置为区域设置？

> ID：10971132
> 
> 赞同：0
> 
> 时间：2012-06-10T18:15:24.203
> 
> 标签：ios, localization, nsdate, locale, nsdateformatter

在我的一个本地化应用程序中，西班牙语是默认语言。但是，用户可以将英语设置为默认语言，并将其区域设置为“西班牙”。

问题是在我的应用程序中我使用以下代码：

```
int day = (60*60*24);
NSDate *nextNextDay = [[NSDate alloc] initWithTimeIntervalSinceNow:(day*2)];
NSString *someString = [[dateFormatter stringFromDate:nextNextDay] capitalizedString];
NSLog(@"The day: %@", someString); 
```

结果是默认语言环境中的日期名称，即（在这种情况下）西班牙语。因此，结果不是我会得到“星期一”，而是会得到“Lunes”。当然，当应用程序的其余部分是英文时，这非常难看。

如何在不硬编码任何语言环境的情况下解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-10T18:39:39.713

为什么不硬编码语言环境？

你可以这样做：

```
NSString *userLocale = [[NSLocale currentLocale]localeIdentifier];
NSString *userLanguage = [userLocale substringToIndex:2];
if([userLanguage isEqualToString:@"en"]){

    //English

}
if([userLanguage isEqualToString:@"es"]){

    //Spanish

} 
```

希望这有帮助

# php - 动态属性的 OOP 和 SQL 查询

> ID：10971134
> 
> 赞同：1
> 
> 时间：2012-06-10T18:15:47.523
> 
> 标签：php, sql, oop, attributes

我有四个类：用户、属性、属性类别、属性值。

以及数据库中的四个表：tbl_user、tbl_attribute、tbl_attribcategory、tbl_attribval​​ue。

这些是表之间的关系：

```
tbl_user 1 --- n tbl_attribvalue n --- 1 attribute 
```

（tbl_attribval​​ue 是属性和用户之间的中间表

```
tbl_attribcategory 1 ---- n tbl_attribute 
```

这是一个例子：

```
tbl_user
{id:1, name: Jack}

tbl_category {id:2,label: Career and Education}

tbl_attribute :
{id:1 ,category:2,label:employer , variable: employer}
{id:2 ,category:2,label: High school , variable: high_school}
{id:3 ,category:2,label:college , variable:college} 
```

并且由于 tbl_attribval​​ue 是 tbl_attribute 和 tbl_user 之间的中间表，所以我们应该知道 user id 和 attribute id ...才能知道 user 的属性值。

示例

```
tbl_attribvalue {id:1,iduser:1,idattrib:3,value: Harvard University} 
```

当我们在应用程序中使用动态属性而不是静态标签时使用此系统。

上课呢？

这四个类：User、Attribute、Attribval​​ue、Attribcategory 分别包含 getter 和 setter 以及属性。

我想返回给定用户的所有这些属性、属性类别和属性值……但我不知道具体使用什么方法，这是一个概念。

我的控制器中已经有这段代码（在 MVC 模型中）：

```
$atcdata=array();
$attribcategory=new Attribcategory($atcdata);
$attribcategories=$manager->viewIt($attribcategory,' defined=0 AND ownertype=1'); 
```

$manager 是一个 DBManager，它包含一个函数 viewIt($object,$criteria)，然后使用给定的条件返回一个包含给定对象结果的数组。

所以属性类别将包含所有类别。

但是如何使用这些类别信息来返回给定用户的属性和属性值？

换句话说 ：

我知道如何返回它们，但就性能而言，我不想使用两个以上的查询来获取所有数据。

对于给定用户，此数据示例将显示如下

```
[attrcategory]
    [attribute] : [attrvalue]
                  [attrvalue]
                  [attrvalue]

Work & Education 
    Employer : Oracle 
               Microsoft

    College : Harvard
    High school : harvard 
```

之类的。

先感谢您

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-10T18:45:57.057

你做错了 MVC .. 但这不是问题。

您在那里拥有的是*“条目-属性-值”*反模式。它在[SQL 反模式](http://pragprog.com/book/bksqla/sql-antipatterns)中进行了探讨（在同标题的章节中）。这就是导致您的问题的原因。

要在单个查询中获取所有结果，您可以做的最好的事情是针对类似于以下响应结构的内容：

```
[attrcategory] , [attribute] , [attrvalue]+[attrvalue]+[attrvalue]
[attrcategory] , [attribute] , [attrvalue]
[attrcategory] , [attribute] , [attrvalue]+[attrvalue]+[attrvalue]+[attrvalue] 
```

能够产生这种结果的查询大致如下所示：

```
SELECT 
    AttributeCategories.title AS attrcategory, 
    Attributes.title AS attribute, 
    GROUP_CONCAT(DISTINCT AttribureValues.value
                 ORDER BY AttribureValues.value DESC SEPARATOR '+')
         AS list
FROM AttribureValues
    LEFT JOIN Attributes USING (attribute_id)
    LEFT JOIN AttributeCategories USING (category_id)
    LEFT JOIN Users USING (user_id)
WHERE 
    Users.name = 'John Smith'
GROUP BY Attributes.attribute_id 
```

然后在 PHP 结束时，您将不得不`explode()`在分隔符上设置值。

# php - (OR) 禁用条件的早期部分

> ID：10971136
> 
> 赞同：1
> 
> 时间：2012-06-10T18:15:54.960
> 
> 标签：php, sql

我的表中的数据示例

```
post_id|post_title|post_status

1       i         1

2       love      0

3       sof       0 
```

我有问题（或）

我正在尝试这种情况

```
WHERE post_status = '1' AND post_id = '1' OR post_title = 'i';
//it should return with i
// but it returned with love,sof 
```

问题是由于条件末尾的 (OR) 引起的

它已在条件的早期部分被禁用

那么，我该如何正确使用 OR？

我想按两个列搜索帖子，post_id 和 post_title

# 笔记：

由于某种原因，我无法移动`post_status='1'`到条件的末尾，它应该在开始

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-10T18:17:29.287

您只需要用 进行逻辑分组`()`，否则，无论是否匹配`OR`，只要条件为真，条件就会取代所需的条件。`post_status = 1`

```
WHERE post_status = '1' AND (post_id = '1' OR post_title = 'i'); 
```

在构建 multipart 子句时，您应该始终考虑逻辑组和优先级`WHERE`，尤其是在使用 logical 时`OR`，因为它会很快破坏您的子句的其余部分。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-10T18:18:08.240

`AND`然后具有更高的优先级`OR`，因此您的查询实际上是

`WHERE (post_status = '1' AND post_id = '1') OR post_title = 'i';`

看来您正在尝试这样做：

`WHERE post_status = '1' AND (post_id = '1' OR post_title = 'i');`

所以只需使用显式大括号

# emacs - Clojure / Emacs 插口：加载时需要命名空间

> ID：10971137
> 
> 赞同：3
> 
> 时间：2012-06-10T18:15:55.253
> 
> 标签：emacs, clojure, leiningen

当我为 Clojure 项目启动 lein repl 时，会导入命名空间 clojure.repl。

如果我在 Emacs 中使用带有 clojure-jack-in 的 Slime，我会得到一个没有这个的 repl。（莱宁根 2）

如何配置 Leiningen（或 Slime？或 Clojure 模式？）以在每次启动时导入它。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-11T01:09:15.573

使用劣质lisp？我的 .emacs 中的一些代码：

```
;;; M-x inferior-lisp
(add-hook 'clojure-mode-hook
          (lambda ()
            (setq safe-local-variable-values
                  '((inferior-lisp-program . "lein repl")
                    (inferior-lisp-program . "smvn clojure:repl"))))) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-19T08:33:44.730

[正如 Phil Hagelberg 在https://groups.google.com/d/msg/swank-clojure/UImhfeHikyM/tl0nd6-7YZMJ](https://groups.google.com/d/msg/swank-clojure/UImhfeHikyM/tl0nd6-7YZMJ)中指出 的那样， 这里不需要 clojure.repl 命名空间：“该命名空间中的所有内容在 slime 中都有等价物效果更好”。

Nic Levines 的 SLIME 章节（一本 Lisp 书的草稿）是了解 SLIME 功能的绝佳开始。[http://lisp-book.org/contents/index.html](http://lisp-book.org/contents/index.html) 对于更多的实验倾向：键绑定表从该章的第 17 页开始。

# ruby-on-rails - Rails 3 - nil:NilClass 的未定义方法“map”用于我自己的验证

> ID：10971138
> 
> 赞同：2
> 
> 时间：2012-06-10T18:15:57.250
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3

我遇到了非常奇怪的问题。我有`Timetable`模型并尝试编写我的自定义验证。所以，现在我只是想为字段添加测试错误以确保一切正常。但它不起作用。所以，我尝试更新时间表模型的对象，但是当我不使用我的测试自定义验证时，一切都很完美。否则我会收到这样的错误：

```
NoMethodError in Timetables#update 

undefined method `map' for nil:NilClass

32: 
33:       <div class="controls">
34:         <%= f.select( :curriculum_id,                                                           
35:                       options_for_select( @subjects_with_curriculums,
36:                                           @tt.curriculum_id ),
37:                       { :include_blank => true }) %>
38:       </div> 
```

这是我的模型：

```
# == Schema Information
#
# Table name: timetables
#
#  id                  :integer         not null, primary key
#  curriculum_id       :integer
#  school_class_id     :integer
#  tt_day_of_week      :string(255)
#  tt_number_of_lesson :integer
#  tt_room             :string(255)
#  tt_type             :string(255)
#  created_at          :datetime        not null
#  updated_at          :datetime        not null
#

class Timetable < ActiveRecord::Base
  belongs_to :curriculum
  belongs_to :school_class

  has_many :lessons

  validates :school_class_id, :presence => { :message => "should exist" }

  validates :tt_day_of_week,
              :presence  => true,
              :inclusion => { :in => %w(Mon Tue Wed Thu Fri) }

  validates :tt_number_of_lesson,
              :presence => true,
              :inclusion => {
                              :in => 1..9,
                              :message => "should have 1..9 symbols"
                            }

  validates :tt_room,
              :length => {
                           :maximum => 3,
                           :message => "should have 3 symbols"
                         },
              :allow_blank => true

  validates :tt_type,
              :inclusion => { :in => ["Primary lesson", "Extra"] },
              :allow_blank => true

  validate :test

  def test
    errors.add(:tt_number_of_lesson, "test")
  end
end 
```

我的控制器：

```
# encoding: UTF-8
class TimetablesController < ApplicationController
  ...

  def edit
    @types_of_lesson = collect_types_of_lesson
    @tt = Timetable.find( params[:id] )
    @subjects_with_curriculums = collect_subjects_with_curriculums( @tt.school_class )
  end

  def update
    @tt = Timetable.find( params[:id] )

    if @tt.update_attributes( params[:timetable] )
      flash[:success] = "Расписание успешно обновлено!"
      redirect_to timetables_path
    else
      flash.now[:error] = @tt.errors.full_messages.to_sentence :last_word_connector => ", ",
                                                               :two_words_connector => ", "
      render 'edit'
    end
  end

  private
    # Collecting subjects names for school class and curriculum_id for each subject.
    def collect_subjects_with_curriculums( school_class )
      subjects = school_class.curriculums.collect do |c|
        [ c.qualification.subject.subject_name, c.id  ]
      end
    end

    def timetable_for_class_with_existance_data( school_class )
      return [] if Timetable.all.empty?

      Timetable.select do |t|
        ( t.school_class.class_code == school_class.class_code ) and
        not ( t.tt_room.blank? ) and not ( t.tt_type.blank? ) and
        not ( t.curriculum_id.nil? )
      end.to_a
    end

    # Return for school class it's timetable.
    def timetable_for_class( school_class )
      Timetable.select{|t| t.school_class.class_code == school_class.class_code }.to_a
    end

    def subjects_of_class( school_class )
      subjects = school_class.curriculums.collect do |c|
        c.qualification.subject.subject_name
      end
    end

    # Return sorted by number of lesson tometable for one day.
    def sorted_timetable_for_day( timetable, day )
      timetable.select{ |t| t.tt_day_of_week == day }
               .sort_by{ |e| e[:tt_number_of_lesson] }
    end

    # Return russian name for type of lesson.
    def collect_types_of_lesson
      [ ["Обязательно занятие", "Primary lesson"], ["Электив", "Extra"] ]
    end

    # Check if timetable already has been created for school class.
    def timetable_exists?( school_class )
      not timetable_for_class( school_class ).empty?
    end
end 
```

我的观点

```
<%= form_for @tt, :html => {:class => "form-horizontal"} do |f| %>
  <%= field_set_tag do %>

    <%= f.hidden_field :tt_number_of_lesson %>
    <%= f.hidden_field :tt_day_of_week %>
    <%= f.hidden_field :school_class_id %>

    <div class="control-group">
       <%= f.label :tt_day_of_week, "Day of the week", :class => "control-label" %>

       <div class="controls">
         <%= content_tag( :span, translate_day_of_week( @tt.tt_day_of_week ),
                          :class =>"input-xlarge uneditable-input span2" ) %>
       </div>
    </div>

    <div class="control-group">
       <%= f.label :tt_number_of_lesson, "Number of lesson", :class => "control-label" %>

       <div class="controls">
         <%= content_tag( :span, @tt.tt_number_of_lesson,
                          :class =>"input-xlarge uneditable-input span1" ) %>
       </div>
    </div>

    <hr/>

    <div class="control-group">
      <%= f.label :curriculum_id, "Type of subject", :class => "control-label" %>

      <div class="controls">
        <%= f.select( :curriculum_id,                                                           
                      options_for_select( @subjects_with_curriculums,
                                          @tt.curriculum_id ),
                      { :include_blank => true }) %>
      </div>
    </div>

    <div class="control-group">
      <%= f.label :tt_room, "Code of the room", :class => "control-label" %>

      <div class="controls">
        <%= f.text_field :tt_room, :class => "span2", :maxlength => 3 %>
      </div>
    </div>

    <div class="control-group">
      <%= f.label :tt_type, "Type of the lesson", :class => "control-label" %>

      <div class="controls">
        <%= f.select( :tt_type,                                                           
                      options_for_select( @types_of_lesson,
                                          @tt.tt_type ),
                      { :include_blank => true }) %>
      </div>
    </div>

    <%= f.submit "Update", :class => "btn btn-large btn-warning" %>
  <% end %>
<% end %> 
```

当我删除：

```
<div class="control-group">
  <%= f.label :curriculum_id, "Type of subject", :class => "control-label" %>

  <div class="controls">
    <%= f.select( :curriculum_id,                                                           
                  options_for_select( @subjects_with_curriculums,
                                      @tt.curriculum_id ),
                  { :include_blank => true }) %>
  </div>
</div>

<div class="control-group">
  <%= f.label :tt_type, "Type of the lesson", :class => "control-label" %>

  <div class="controls">
    <%= f.select( :tt_type,                                                           
                  options_for_select( @types_of_lesson,
                                      @tt.tt_type ),
                  { :include_blank => true }) %>
  </div>
</div> 
```

我可以查看我的测试错误。我不知道发生了什么。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-10T18:49:19.303

You say this in your `update` controller:

```
render 'edit' 
```

That simply tells Rails to render the edit template, it doesn't run any of the code associated with the `edit` controller, it simply renders `edit.html.erb` in the current context.

From the [Layouts and Rendering in Rails Guide](http://guides.rubyonrails.org/layouts_and_rendering.html#rendering-an-action-s-view):

> **2.2.2 Rendering an Action’s View**
> [some stuff about `render 'x'`, `render :x`, and `render :action => :x` being the same...]
> 
> > Using `render` with `:action` is a frequent source of confusion for Rails newcomers. The specified action is used to determine which view to render, but Rails does *not* run any of the code for that action in the controller. Any instance variables that you require in the view must be set up in the current action before calling `render`.

Pay particular attention to the last sentence:

> Any instance variables that you require in the view must be set up in the current action before calling `render`.

You're setting `@subjects_with_curriculums` in the `edit` controller but using the `edit` view from the `update` controller. The result is that `@subjects_with_curriculums` is `nil` when `edit.html.erb` tries to use it when `update` tries to render the edit view.

You'll need to set `@subjects_with_curriculums` in your `update` controller, you might need `@types_of_lesson` as well.

# c# - 如何在 WPF 4.0 中创建发光的文本框？

> ID：10971143
> 
> 赞同：5
> 
> 时间：2012-06-10T18:16:42.540
> 
> 标签：c#, wpf, xaml, animation

我正在尝试创建一个文本框，当聚焦时会发光。

到目前为止，我看到的所有有关如何执行此操作的示例都是基于[OuterGlowBitmapEffect](http://msdn.microsoft.com/en-us/library/ms752037%28v=vs.90%29.aspx)的，而且它似乎[在 .net 4 中不起作用](http://social.expression.microsoft.com/Forums/br/blend/thread/0424f7c5-90b3-449b-ad03-6ca29bf93fa0)。

第二篇推荐使用模糊效果。我不知道如何使用模糊来使对象的外层发光而不扭曲对象的内部内容。

最终，我希望创建一个文本框，它会在聚焦时显示发光动画，并且在控件失去焦点后发光会缓慢（1-2 秒）消失。

关于在 wpf 4.0 中执行此操作的最佳方法有什么想法吗？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-06-10T18:26:53.290

您可以尝试使用`DropShadowEffect`. 这是一个例子

**更新**。A`TextBox`在聚焦时开始“发光”，而在失去焦点时“发光”会慢慢淡出两秒钟

![在此处输入图像描述](../Images/69c017b1ed3d87dc2eb746a33fa9f2da.png)

```
<TextBox Text="Test">
    <TextBox.Style>
        <Style TargetType="TextBox">
            <Setter Property="Effect">
                <Setter.Value>
                    <DropShadowEffect ShadowDepth="0"
                                      Color="Gold"
                                      Opacity="0"
                                      BlurRadius="8"/>
                </Setter.Value>
            </Setter>
            <Style.Triggers>
                <Trigger Property="IsFocused" Value="True">
                    <Trigger.EnterActions>
                        <BeginStoryboard>
                            <Storyboard>
                                <DoubleAnimation To="1.0"
                                                 Storyboard.TargetProperty="(Effect).Opacity"
                                                 Duration="00:00:00"/>
                            </Storyboard>                                    
                        </BeginStoryboard>
                    </Trigger.EnterActions>
                    <Trigger.ExitActions>
                        <BeginStoryboard>
                            <Storyboard>
                                <DoubleAnimation To="0.0"
                                                 Storyboard.TargetProperty="(Effect).Opacity"
                                                 Duration="00:00:02"/>
                            </Storyboard>
                        </BeginStoryboard>
                    </Trigger.ExitActions>
                </Trigger>
            </Style.Triggers>
        </Style>
    </TextBox.Style>
</TextBox> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-10T18:42:10.290

查看 [http://wpfthemes.codeplex.com/](http://wpfthemes.codeplex.com/) 了解很多好的 wpf 主题创意。特别是，请查看 Bureau Black 中文本框的主题。我认为您想要的实际上是他们用于“鼠标悬停”属性的内容，但是应该很容易将其更改为焦点属性。

# .htaccess - .htaccess 使用主机或 IP 地址重定向

> ID：10971147
> 
> 赞同：0
> 
> 时间：2012-06-10T18:17:26.477
> 
> 标签：.htaccess, redirect

我在同一台服务器上有 2 个不同的域：服务器地址 100.12.12.222 上的 domain1.com 和 domain2.com 以及非 www 到 www 的简单重定向规则

```
RewriteCond %{HTTP_HOST} !^www\.    
RewriteRule ^(.*)$ http://www.%{HTTP_HOST}/$1 [R=301,L] 
```

我想要一个规则，比如：如果 host=domain1.com 然后重定向到 www.domain1.com 并且如果 host=100.12.12.222 不要重定向到 www.domain1.com

我试图添加：

```
RewriteCond %{REMOTE_ADDR} ^100\.12\.12\.222
RewriteRule (.*) http://100.12.12.222/$1 [R=301,L] 
```

如果第二个域没有非 www 到 www 重定向，则该方法有效

所以我用谷歌搜索并阅读了 apache 的建议，并尝试结合以下内容：

```
RewriteCond %{HTTP_HOST} !^www\. [OR]
RewriteCond %{REMOTE_ADDR} !^100\.12\.12\.222
RewriteRule ^(.*)$ http://www.%{HTTP_HOST}/$1 [R=301,L] 
```

在这里，我尝试使用 HTTP_HOST 和各种东西，但它没有正确重定向。您的帮助将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-10T19:22:16.493

删除 [or] 标志。您想重定向到 www。如果主机不是`www...` **并且**远程 != 100.12.12.222

# asp.net - 以下部分已定义但尚未为布局页面“~/Views/Shared/_Layout.cshtml”呈现：“脚本”

> ID：10971149
> 
> 赞同：113
> 
> 时间：2012-06-10T18:17:28.897
> 
> 标签：asp.net, asp.net-mvc

我是 ASP MVC 新手，正在使用 ASP MVC 4 Beta 简介教程[http://www.asp.net/mvc/tutorials/mvc-4/getting-started-with-aspnet-mvc4/intro-to-aspnet -mvc-4](http://www.asp.net/mvc/tutorials/mvc-4/getting-started-with-aspnet-mvc4/intro-to-aspnet-mvc-4)

我遇到了一个错误，我似乎找不到答案，也没有太多的编程经验，所以我什至不知道从哪里开始解决这个问题，继续学习本教程。感谢您提供的任何帮助。

我在从控制器访问模型的数据部分，当我尝试创建电影作为教程的一部分时出现此错误，我单击链接“新建”并收到以下错误

> 以下部分已定义但尚未为布局页面呈现 >"~/Views/Shared/_Layout.cshtml": "Scripts"

我没有使用 Visual Studio express，而是选择下载 Visual Studio 2012 RC（不确定这是否是我的问题的根本原因。

我意识到您可能要求我包含代码来回答这个问题，但我不确定要包含哪些代码。请告知您需要我包含哪些代码（如果有），我很乐意将其添加到我的问题中。

谢谢，

* * *

## 回答 #1

> 赞同：161
> 
> 时间：2012-06-10T18:28:18.437

这意味着您已经在主 Layout.cshtml 中定义了一个部分，但您没有在视图中包含该部分的任何内容。

如果你的 _Layout.cshtml 有这样的东西：

```
@RenderSection("scripts") 
```

那么所有使用该 Layout 的 View 都**必须**包含`@section`同名的 a（即使该部分的内容为空）：

```
@{
    ViewBag.Title = "Title";
    Layout = "~/Views/Shared/_Layout.cshtml";
}
@section scripts{
    // Add something here
} 
```

作为替代方案，您可以将 required 设置为 false，那么您将不需要在每个视图中添加该部分，

```
@RenderSection("scripts", required: false) 
```

或者您也可以将其包装`@RenderSection`在一个`if`块中，

```
@if (IsSectionDefined("scripts"))
{
    RenderSection("scripts");
} 
```

* * *

## 回答 #2

> 赞同：28
> 
> 时间：2012-09-12T13:14:21.953

我有一个 3 个级别的案例 a'la _ *MainLayout.cshtml* <--- _ *Middle.cshtml* <--- *Page.cshtml*。即使这样做：

**_MainLayout.cshtml**

```
<head>
   @RenderSection("head", false)
</head> 
```

**_Middle.cshtml**

```
@section head {
    @RenderSection("head")
} 
```

并在**Page.cshtml**中定义

```
@section head {
   ***content***
} 
```

我仍然会收到错误

> 以下部分已定义但尚未为布局页面“~/Views/Shared/_Middle.cshtml”呈现：“head”。

原来，错误是**Middle.cshtml**依赖**/Views/_ViewStart.cshtml** 来解析它的父布局。**通过在Middle.cshtml**中明确定义这个问题解决了这个问题：

```
@{
Layout = "~/Views/_Shared/_MainLayout.cshtml";
} 
```

无法确定这是设计使然还是 MVC 4 中的错误 - 无论如何，问题已解决 :)

* * *

## 回答 #3

> 赞同：28
> 
> 时间：2012-09-27T14:27:52.980

此外，您可以将以下行添加到`_Layout.cshtml`or `_Layout.Mobile.cshtml`：

```
@RenderSection("scripts", required: false) 
```

* * *

## 回答 #4

> 赞同：15
> 
> 时间：2013-03-22T15:35:07.830

如果建议的解决方案没有也没有解决问题，我不确定为什么接受的答案被接受。实际上可能有两个与此主题相关的问题。

**问题 #1**

母版页（例如`_Layout.cshtml`）定义了一个部分，它是**必需**的，但继承的视图没有实现它。例如，

**布局模板**

```
<body>
    @* Visible only to admin users *@
    <div id="option_box"> 
        @* this section is required due to the absence of the second parameter *@
        @RenderSection("OptionBox") 
    </div>
</body> 
```

**继承视图**

无需显示任何代码，只需考虑视图上**没有**实现即可。`@section OptionBox {}`

**问题 #1 的错误**

`Section not defined: "OptionBox ".`

**问题 #2**

母版页（例如`_Layout.cshtml`）定义了一个部分，并且它是**必需**的，并且继承视图**确实**实现了它。但是，实施视图具有未在（任何）其母版页上**定义**`script`的附加部分。

 ****布局模板**

`same as above`

**继承视图**

```
<div>
  <p>Looks like the Lakers can still make it to the playoffs</p>
</div>
@section OptionBox {
<a href"">Go and reserve playoff tickets now</a>
}
@section StatsBox {
<ul>
    <li>1\. San Antonio</li>
    <li>8\. L. A. Lakers</li>
</ul>
} 
```

**问题 #2 的错误**

`The following sections have been defined but have not been rendered for the layout page "~/Views/Shared/_Layout.cshtml": "StatsBox"`

OP 的问题与问题 #2 类似，并且接受的答案是问题 #1。

* * *

## 回答 #5

> 赞同：10
> 
> 时间：2014-02-03T09:09:12.387

我认为我们的解决方案与其他人有很大的不同，所以我将在这里记录下来。

我们设置了主布局，中间布局，然后是最终的操作页面渲染。Main.cshtml <- Config.cshtml <- Action.cshtml

只有当 web.config`customErrors='On/RemoteOnly'`我们得到一个自定义错误并且没有异常也没有`Application_Error`被调用时。我可以`Layout = null`在 Error.cshtml 中在线捕捉到这一点。例外情况与问题一样，缺少脚本部分。

我们确实在 Main.cshtml 中定义了它（需要：false）并且 Action.cshtml 没有任何写入脚本部分的内容。

解决方案是添加`@section scripts { @RenderSection("scripts", false) }`到 Config.cshtml。

* * *

## 回答 #6

> 赞同：9
> 
> 时间：2014-11-26T15:14:45.607

当您使用它创建新模型时，某些版本的 Visual Studio 自动为您生成的视图文件之间似乎存在不匹配。[我使用新的 VS 2013 社区版并在](http://www.visualstudio.com/products/visual-studio-community-vs)[http://www.w3schools.com/aspnet/mvc_app.asp](http://www.w3schools.com/aspnet/mvc_app.asp)浏览 W3Schools 教程时遇到了这个问题，但上面的评论表明它不是教程方向或与VS的单一版本。

确实，您**只需**删除

`@Scripts.Render("~/bundles/jqueryval")`

Visual Studio 自动生成的创建/编辑布局中的行。

但是该解决方案并没有解决根本原因，也没有让您在完成本教程的过程中做更多的事情。在实际应用程序开发的某个时间点（可能相当早），您将希望访问注释掉解决方案从您的应用程序中删除的 jquery 验证代码。

如果您使用 VS 为您创建新模型，它还会创建一组五个视图文件：创建、删除、详细信息、编辑和索引。其中两个视图 Create 和 Edit 旨在让用户为模型基础的数据库记录中的字段添加/编辑数据。对于真实应用程序中的这些视图，您可能希望在将记录保存到数据库之前使用 jquery 验证库进行一些数据验证。这就是VS添加以下行的原因

```
@section Scripts {
    @Scripts.Render("~/bundles/jqueryval")
} 
```

到这两个视图的底部，而不是其他视图的底部。自动生成的代码试图使验证库可用于这些视图，但不能用于其他视图。

发生错误是因为 VS 要么没有向共享的 _Layout.cshtml 文件添加相应的行，要么参见上面的一个答案，添加它但将其注释掉。这条线是

`@RenderSection("scripts", required: false)`

如果您的某些视图有一个脚本部分（如 Create 和 Edit 所做的），则必须在布局中嵌入一个 RenderSection 命令。如果有些脚本有节而有些没有（因为 Delete、Details 和 Index 没有），则 RenderSection 命令必须有`required: false`参数。

因此，最好的解决方案是，如果您想做的不仅仅是完成本教程的学习，就是将语句添加到 _Layout.cshtml，而不是从 Edit 和 Create 视图中删除代码。

PS 这有点令人困惑，这里需要的是一个“捆绑包”，而 require 语句看起来像是试图在项目中不存在的捆绑包文件夹中包含一个文件。但是，对于调试版本和教程，这无关紧要，因为捆绑的文件一次包含一个。请参阅：[http](http://www.asp.net/mvc/overview/performance/bundling-and-minification) ://www.asp.net/mvc/overview/performance/bundling-and-minification这里有争议的代码在页面下方大约三分之二处被简要提及。

* * *

## 回答 #7

> 赞同：8
> 
> 时间：2013-07-25T09:36:21.307

它基本上发生在**_Layout.cshtml**没有时：

```
@RenderSection("scripts", required: false) 
```

或与

```
@RenderSection("scripts") 
```

没有

```
required: false 
```

因此，只需在 _Layout.cshtml 中添加 @RenderSection("scripts", required: false) ， 它特别适用于那些使用**Kendoui****生成**项目的开发人员。

* * *

## 回答 #8

> 赞同：3
> 
> 时间：2013-04-01T16:00:14.817

在使用 Visual Studio 2012 完成 ASP.NET MVC 4 教程时，我在“从控制器部分访问模型的数据”中遇到了同样的错误。修复非常简单。

在共享文件夹中的 _Layout.cshtml 文档中的 Visual Studio 2012 中创建新的 ASP.NET MVC 4 Web 应用程序时，“脚本”部分被注释掉。

```
 @*@RenderSection("scripts", required: false)*@ 
```

只需取消注释该行，示例代码就可以工作。

```
 @RenderSection("scripts", required: false) 
```

* * *

## 回答 #9

> 赞同：2
> 
> 时间：2020-09-22T12:44:58.033

我已经像下面这样更改了“_Layout.cshtml”并且它可以工作。.Net Core 3.1 Blazor 服务器模块身份问题。

```
<!DOCTYPE html>
<html>

<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no" />
    <title>@ViewBag.Title</title>
    <link href="~/css/bootstrap/bootstrap.min.css" rel="stylesheet" />
    <link href="~/css/app.css" rel="stylesheet" />
    @RenderSection("Scripts", required: false)

</head>

<body>
    <div class="main">
        <div class="content px-4">

            @RenderBody()
        </div>
    </div>
</body>

</html>

@section Scripts {    

} 
```

* * *

## 回答 #10

> 赞同：2
> 
> 时间：2021-04-15T14:58:08.983

我刚收到那个错误，我读到背后的原因是你必须渲染一个脚本部分。但在 _Layout 中它已经是原样了。

```
@RenderSection("Scripts", required: false) 
```

在我添加页面底部的部分之前它也有效。

就我而言，原因是一个简单的拼写错误`Scripts`。

```
@section Scripts{
<script src="~/js/myScript.js"></script>
} 
```

* * *

## 回答 #11

> 赞同：1
> 
> 时间：2014-09-11T07:14:38.403

在为 MVC 初学者实施教程时，我遇到了同样的问题。我得到了各种建议来修改你的 layout.cshtml 文件中的@RenderSection，但我没有使用它。

我进行了很多搜索，然后我发现在（View/Edit.cshtml）和其他 cshtml 文件中生成的脚本标签没有呈现

```
**@section Scripts {
@Scripts.Render("~/bundles/jqueryval") 
```

}**

所以我删除了这些行，应用程序开始顺利运行。

* * *

## 回答 #12

> 赞同：1
> 
> 时间：2016-05-11T00:49:16.920

我有一种感觉，您正在从 _Layout 文件中的 @section 中渲染您的部分，该文件引用带有 @section 的局部视图，即您已将 @section 嵌套在 @section 中。在 _Layout 文件中，移除渲染部分周围的 @section。

* * *

## 回答 #13

> 赞同：1
> 
> 时间：2020-02-14T05:17:38.070

我还评论了 **@section Scripts 比它运行顺利。:)

* * *

## 回答 #14

> 赞同：0
> 
> 时间：2019-03-20T14:42:02.170

我通过使用以下解决了这个问题，

```
@await Html.PartialAsync("_ValidationScriptsPartial") 
```

* * *

## 回答 #15

> 赞同：0
> 
> 时间：2015-07-28T07:32:45.890

我在网上搜索了错误并来到了这个页面。我正在使用 Visual Studio 2015，这是我的第一个 MVC 项目。

如果你错过了渲染部分之前的@符号，你会得到同样的错误。我想分享给未来的初学者。

```
 @RenderSection("headscripts", required: false) 
```

* * *

## 回答 #16

> 赞同：0
> 
> 时间：2016-09-11T10:21:41.763

请确保您在视图中键入了使用脚本部分的正确拼写

正确的是

```
@section scripts{ //your script here} 
```

如果您键入`@section script{ //your script here}`这是错误的。

* * *

## 回答 #17

> 赞同：0
> 
> 时间：2021-11-05T12:53:07.263

对我来说，我说的是***脚本***而不是***脚本***， 我不知道为什么它在调试时没有显示为错误。

`@section Script {}`

* * *

## 回答 #18

> 赞同：0
> 
> 时间：2015-09-10T16:33:02.020

检查术语“”的拼写和大写/小写

当我们写 @RenderSection("name", required: false) 确保剃刀视图包含一个部分 @section name{} 所以检查术语“”的拼写和大写/小写在这种情况下正确的是“脚本”

* * *

## 回答 #19

> 赞同：0
> 
> 时间：2019-11-11T09:53:35.347

对我来说，问题出在我的 _Layout.cshtml 中，我在条件中有 RenderSection

```
 @if (theme == "Red" || theme == "Green")
  {
       <div>
       @RenderSection("Footer", false)
       </div>
   } 
```

在我的孩子看来，这是没有条件的

```
@section Footer{
        <div>
            @Html.AwButton("Reject", "Reject")
            @Html.AwSubmit("Ok", "Ok")
        </div>
    } 
```

因此，无论主题如何，孩子都在添加页脚。但是在父主题不是红色或绿色时，它没有添加页脚和抛出未处理的异常。**

# objective-c - 检测 UISlider 上的触摸？

> ID：10971154
> 
> 赞同：14
> 
> 时间：2012-06-10T18:18:06.483
> 
> 标签：objective-c, ios, xcode, cocoa-touch, uislider

我在屏幕上有一个 UISlider，我需要能够检测到用户何时停止触摸它。（所以我可以淡化一些元素）。

我试过使用：

`- (void)touchesEnded:(NSSet *)touches withEvent:(UIEvent *)event`

但这在结束触摸滑块时不起作用。

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-06-10T18:46:40.210

您可以使用两个控制事件来检测触摸何时结束；尝试

```
[slider addTarget:self action:@selector(touchEnded:) 
                       forControlEvents:UIControlEventTouchUpInside]; 
```

### 或者

```
[slider addTarget:self action:@selector(touchEnded:) 
                       forControlEvents:UIControlEventTouchUpOutside]; 
```

如果要检测这两种类型的`touchesEnd`事件，请使用

```
[slider addTarget:self action:@selector(touchEnded:) 
   forControlEvents:UIControlEventTouchUpInside | UIControlEventTouchUpOutside]; 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-06-10T18:25:38.743

而不是使用`touchesEnded:`（无论如何都不应该用于此目的），将操作附加到`UISlider`'`UIControlEventValueChanged`事件并设置to的`continuous`属性，因此当用户完成选择值时将触发该事件。`UISlider``NO`

```
mySlider.continuous = NO;
[mySlider addTarget:self
          action:@selector(myMethodThatFadesObjects) 
          forControlEvents:UIControlEventValueChanged]; 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2018-07-05T21:21:45.950

我无法捕捉到触摸的开始和结束，但是在 RTFD-ing 之后，我想出了一些可以同时兼顾的东西。

```
 @IBAction func sliderAction(_ sender: UISlider, forEvent event: UIEvent) {

    if let touchEvent = event.allTouches?.first {
      switch touchEvent.phase {
      case .began:
        print("touches began")
        sliderTouchBegan()
      case .ended:
        print("touches ended")
        sliderTouchEnded()
      default:
        delegate?.sliderValueUpdated(sender.value)
      }
    }
  } 
```

`sliderTouchBegan()`并且`sliderTouchEnded()`只是我编写的在触摸开始和结束时处理动画的方法。如果它不是一个开始或结束，它是一个`default`并且滑块值更新。

# php - JQuery 附加问题淡化效果

> ID：10971157
> 
> 赞同：0
> 
> 时间：2012-06-10T18:18:11.110
> 
> 标签：php, jquery, html, fade

```
$(document).ready(function(){
  setInterval(function(){
    $('.bopa').load('accounts.php');
  },30000);
}); 
```

嗨，大家好！又是我。所以我回到这些东西上，我意识到这是 JQuery。也许我可以在那里的某个地方放置一个淡入淡出效果。我只是不知道在哪里。如果可以的话，真的有可能吗，请告诉我在哪里。帐户 php 实际上包含类似

```
$command=mysql_query("SELECT * FROM pages order by rand()    limit 1"); 
```

现在它每 3 秒工作一次，内容会发生变化。我先在文本上尝试它，这样会更容易。以后我打算在图片上做。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-10T18:34:51.157

您可以向正在发出的 AJAX 请求添加回调函数：

```
$('.bopa').load('accounts.php'); 
```

可以改为：

```
//start by fading-out the element(s)
$('.bopa').fadeOut(250, function () {
    //continue by loading the new content now that the element(s) has/have faded-out
    $(this).load('accounts.php', function () {

        //now that the new content has loaded, fade the element(s) back in
        $(this).fadeIn(250);
    });
}); 
```

这也利用了所使用的 jQuery 动画函数的回调函数 ( `.fadeIn()`/ `.fadeOut()`)。

# python - 将列表序列化为 SQLite

> ID：10971161
> 
> 赞同：3
> 
> 时间：2012-06-10T18:18:54.487
> 
> 标签：python, list, serialization, sqlite, pysqlite

我正在处理超过 2900 万个元素，因此认为数据库比数组更有意义。

以前我一次将一个元素传递给`execute`函数，但我相信一次将一个包含 100,000 个元素的数组传递给`executemany`函数会更有效。

我已将我的 180 奇数行代码缩短为这个简短的测试用例：

```
import sqlite3

if __name__ == '__main__':
    connection = sqlite3.connect('array.db')
    cursor = connection.cursor()
    cursor.execute("create table array (word text);")
    cursor.executemany("insert into array values (?)", [u'usa', u'sharp', u'rise', u'seen', u'in', u'cd', u'bootlegs', u'sharp', u'rise', u'seen', u'in', u'cd', u'bootlegs', u'los', u'angeles'])
    connection.commit()
    cursor.execute("select * from array;")
    print cursor.fetchall() 
```

输出：

```
Traceback (most recent call last):
        cursor.executemany("insert into array values (?)", [u'usa', u'sharp', u'rise', u'seen', u'in', u'cd', u'bootlegs', u'sharp', u'rise', u'seen', u'in', u'cd', u'bootlegs', u'los', u'angeles'])
    sqlite3.ProgrammingError: Incorrect number of bindings supplied. The current statement uses 1, and there are 3 supplied. 
```

**我究竟做错了什么？**

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-10T18:30:15.903

使用时，`.executemany()`您必须提供一系列元组（或列表）。
因此，您需要做的就是将每个单词包装成一个元组（或列表）。
例子：

```
cursor.executemany("insert into array values (?)", 
                   [(u'usa',), (u'sharp',), (u'rise',)]) 
```

（如果上面不清楚，第二个参数现在是一个单元素元组的列表。）

* * *

当您考虑如何`.execute()`工作时，这种行为是有意义`.execute()`的，因为还要求参数位于元组（或列表）中。
所以这不起作用：

```
cursor.execute("insert into array values (?)", some_word) 
```

但这确实：

```
cursor.execute("insert into array values (?)", (some_word,)) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-10T18:30:58.880

啊，他们需要在自己的元素中：

```
import sqlite3

if __name__ == '__main__':
    connection = sqlite3.connect('array.db')
    cursor = connection.cursor()
    cursor.execute("create table array (word text);")
    cursor.executemany("insert into array values (?)", [[u'nabisco'],[u'usa'], [u'sharp'], [u'rise']])
    connection.commit()
    cursor.execute("select * from array;")
    print cursor.fetchall() 
```

# jquery - Jquery - 无法删除 DIV

> ID：10971163
> 
> 赞同：0
> 
> 时间：2012-06-10T18:19:03.707
> 
> 标签：jquery, html

我试图删除我以前的 Jquery 代码插入的 div。

```
$counter = 0;
$("#add").click(function() {
    $counter++;
    $("#ipblock").append('<input type="text" name="inputip" id="inputip'+$counter+'" size="22" /></br>');
});

$("#del").click(function() {
    $("#inputip'+$counter+'").remove();
    $counter = parseFloat(counter) - 1;
}); 
```

完整的演示可以在这里找到[http://jsfiddle.net/felix001/fQBNE/26/](http://jsfiddle.net/felix001/fQBNE/26/)。我可以通过萤火虫看到输入具有正确的 id`s。但是当我尝试在 jquery 和通过 firebug 控制台中删除它时，它找不到 div (??)。

任何能够指出我正确方向的人。

谢谢，

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-10T18:20:57.003

您的代码中有几个错误：

```
$counter = 0;
$("#add").click(function() {
    $counter++;

    //I removed the `<br />` tag and added a bit of CSS because if you remove the <input /> tags the <br /> tags added with them remain
    $("#ipblock").append('<input type="text" name="inputip" id="inputip'+$counter+'" size="22" />');
});

$("#del").click(function() {

    //this just makes sure there is actually an element to select before trying to select it
    if ($counter) {

        //use double quotes to start and stop the string here
        $("#inputip"+$counter).remove();

        //make sure to refer to `$counter` and not `counter`
        $counter = $counter - 1;
    }
});​ 
```

这是一个演示：http: [//jsfiddle.net/fQBNE/29/](http://jsfiddle.net/fQBNE/29/)

我添加了这个 CSS，以便在您的调用`<br />`中不需要该标签：`.append()`

```
/*This will put each input on its own line*/
#ipblock > input {
    display:block;
}​ 
```

# 更新

在没有变量的情况下完成此操作的另一种方法`$counter`是选择click 事件处理程序`input`中的最后一个元素：`#del`

```
$("#add").click(function() {

    //notice no ID is needed
    $("#ipblock").append('<input type="text" name="inputip" size="22" />');
});

$("#del").click(function() {

    //first try to select the last inputip element
    var $ele = $('#ipblock').children('input[name="inputip"]').last();

    //only proceed if an element has been selected
    if ($ele.length) {

        //and now remove the element
        $ele.remove();
    }
});​ 
```

这是一个演示：http: [//jsfiddle.net/fQBNE/31/](http://jsfiddle.net/fQBNE/31/)

# sql-server - 当我不使用引用完整性和 On Delete/Update Cascade 时，外键是否有意义

> ID：10971164
> 
> 赞同：1
> 
> 时间：2012-06-10T18:19:18.490
> 
> 标签：sql-server, foreign-keys, referential-integrity

*   我不希望在删除客户时删除订单。（关于删除级联）
*   我使用标识列，因此不需要 On Update Cascade
*   尽管存在指向/引用客户的订单，但应该可以删除客户表。我不在乎客户何时离开，因为我仍然需要其他表的订单表。

当我不将引用完整性与 On Delete/Update Cascade 一起使用时，外键在这种情况下是否有意义？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-10T18:21:14.977

是的。外键不仅是为了自己清理，而且主要是为了首先确保数据是正确的（在某些情况下它也可以帮助优化器）。我到处都使用外键，但我还没有找到实现级联动作的需要。我确实理解级联的目的，但我总是发现自己控制这些过程更好。

**编辑**即使我已经尝试解释你可以解决级联问题（因此仍然满足你的第三个条件），我想我会添加一个插图：

在删除客户后，您当然仍然可以保留订单。关键是使`Orders.CustomerID`列可以为空，例如

```
CREATE TABLE dbo.Customers(CustomerID INT PRIMARY KEY);

CREATE TABLE dbo.Orders(OrderID INT PRIMARY KEY, CustomerID INT NULL
    FOREIGN KEY REFERENCES dbo.Customers(CustomerID)); 
```

现在，当您要删除客户时，假设您通过存储过程控制这些操作，您可以这样做，首先将它们设置`Orders.CustomerID`为`NULL`：

```
CREATE PROCEDURE dbo.Customer_Delete
  @CustomerID INT
AS
BEGIN
  SET NOCOUNT ON;

  UPDATE dbo.Orders SET CustomerID = NULL
    WHERE CustomerID = @CustomerID;

  DELETE dbo.Customers
    WHERE CustomerID = @CustomerID;
END
GO 
```

如果您无法控制客户表中的临时删除，那么您仍然可以使用而不是触发器来实现此目的：

```
CREATE TRIGGER dbo.Cascade_CustomerDelete
ON dbo.Customers
INSTEAD OF DELETE
AS
BEGIN
  SET NOCOUNT ON;

  UPDATE o SET CustomerID = NULL
    FROM dbo.Orders AS o
    INNER JOIN deleted AS d
    ON o.CustomerID = d.CustomerID;

  DELETE c
    FROM dbo.Customers AS c
    INNER JOIN deleted AS d
    ON c.CustomerID = d.CustomerID;
END
GO 
```

总而言之，我不确定我是否理解删除客户并保留他们的订单的目的（或任何关于谁下订单的指示）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-10T18:30:37.537

所以要清楚你现在有一个从客户到订单的 FK。此关系未启用级联更新/删除。您的计划是删除客户但保留订单。

这将违反外键约束；并防止删除发生。如果您禁用约束执行删除然后重新启用您可以使其工作。

但是，这会在系统中留下孤立的订单记录；从长远来看，这可能会使支持变得更加困难。下一个必须支持这一点的人会怎么想？

保留记录并为活动/非活动或创建和非活动日期添加状态不是更好吗？

我正在努力破坏数据库的完整性以减少空间......？或者删除的主要原因是什么？

如果您不想总是过滤掉不再活动的记录，请使用创建活动客户集合的视图或包。消除一些但不是所有的数据对我来说似乎是错误的。

# python - 在 Python 中通过引用访问深层列表嵌套值

> ID：10971165
> 
> 赞同：1
> 
> 时间：2012-06-10T18:19:23.557
> 
> 标签：python

我有一个带有嵌套列表的列表，我想创建一个函数 ( `modify_list`)，它获取一个元组并使用传递的值参数修改传递的指针。问题是我不确定如何通过引用以编程方式修改这样的嵌套值。

简化示例：

```
l = [[1, [2,3, [4,5,6]]]] 
```

如果我调用该函数`modify_list`，这些将是如何使用它和预期的结果：

```
> l[0][1][2][2]
6

> modify_list((0, 1, 2, 2), 8)
> l
[[1, [2,3, [4,5,8]]]]

> modify_list((0, 1, 1), 14)
> l
[[1, [2,14, [4,5,8]]]] 
```

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-10T18:28:07.660

```
def modify_list(indices, new_value):
    x = reduce(lambda x, i: x[i], indices[:-1], l)
    x[indices[-1]] = new_value 
```

例子：

```
>>> l = [[1, [2, 3, [4, 5, 6]]]]
>>> modify_list((0, 1, 2, 2), 8)
>>> l
[[1, [2, 3, [4, 5, 8]]]] 
```

此方法与您在问题中要求的内容相匹配，但传入您想要变异的列表而不是总是修改全局变量可能更有意义：

```
def modify_list(lst, indices, new_value):
    x = reduce(lambda x, i: x[i], indices[:-1], lst)
    x[indices[-1]] = new_value

>>> l = [[1, [2, 3, [4, 5, 6]]]]
>>> modify_list(l, (0, 1, 2, 2), 8)
>>> l
[[1, [2, 3, [4, 5, 8]]]] 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-10T18:22:54.267

您可以通过使用相应的索引访问它来确定每个子列表。使用最后一个索引来分配值：

```
def set_nested_val(l, indices, val):
  for i in indices[:-1]:
    l = l[i]
  l[indices[-1]] = val 
```

请注意，此函数对任意列表（第一个参数）进行操作，而不仅仅是`l`. 如果您想始终修改`l`，请使用[`functools.partial`](http://docs.python.org/library/functools.html#functools.partial)：

```
import functools
l = [[1, [2,3, [4,5,6]]]]
modify_list = functools.partial(set_nested_val, l) 
```

请注意，嵌套列表和按索引访问值通常是数据架构不佳的标志。你有没有考虑过[`dict`](http://docs.python.org/library/stdtypes.html#dict)谁的键是元组？

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-10T18:29:22.280

尝试这个：

```
def modify_list(lst, pos, val):
    item = lst
    while len(pos) > 1:
        item = item[pos[0]]
        pos = pos[1:]
    item[pos[0]] = val 
```

或这个：

```
def modify_list(lst, pos, val):
    item = lst
    for i in pos[:-1]:
        item = item[i]
    item[pos[-1]] = val 
```

或这个：

```
def modify_list(lst, pos, val):
    reduce(lambda a, e: a[e], pos[:-1], lst)[pos[-1]] = val 
```

无论如何，像这样使用它：

```
lst = [[1, [2, 3, [4, 5, 6]]]]
modify_list(lst, (0, 1, 2, 2), 8)

lst
> [[1, [2, 3, [4, 5, 8]]]] 
```

# java - Google Tasks API Java 库中缺少 API

> ID：10971166
> 
> 赞同：0
> 
> 时间：2012-06-10T18:19:28.797
> 
> 标签：java, android, api, task

我正在尝试使用 v1.3 库为 Android 编写一个 Tasks 应用程序：

[http://code.google.com/p/google-api-java-client/source/browse/com/google/?repo=mavenrepo&r=07a469e9e478c9e13e375c4d569436d4e261c59c#google%2Fapis%2Fgoogle-api-services-tasks%2Fv1-1.3 .0-beta](http://code.google.com/p/google-api-java-client/source/browse/com/google/?repo=mavenrepo&r=07a469e9e478c9e13e375c4d569436d4e261c59c#google%2Fapis%2Fgoogle-api-services-tasks%2Fv1-1.3.0-beta)

根据[Javadoc](http://javadoc.google-api-java-client.googlecode.com/hg/apis/tasks/v1/index.html)，TaskList 类有一个 getUpdated() API，返回列表的最后修改时间。但是，库中缺少它，我需要这个 API。它丢失的任何原因以及我如何获得它？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-10T20:10:32.217

该 API 是在库的 v1.6 中添加的。不知道为什么它之前丢失了。

# c# - C# 中的“List.Remove”不删除项目？

> ID：10971167
> 
> 赞同：11
> 
> 时间：2012-06-10T18:19:49.323
> 
> 标签：c#, asp.net

您好，我如何从通用列表中删除项目这是我的代码，我试图正确地做，但我不知道我在哪里犯了错误；/

```
Users us_end = new Users();
foreach (var VARIABLE in ((List<Users>)Application["Users_On"]))
{
    if(VARIABLE.Id == (int)Session["Current_Id"])
    {
        us_end.Name = VARIABLE.Name;
        us_end.Id = VARIABLE.Id;
        us_end.Data = VARIABLE.Data;
    }
}
List<Users> us = ((List<Users>)Application["Users_On"]);
us.Remove(us_end);
Application["Users_On"] = us; 
```

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-06-10T18:24:26.973

您必须删除相同的对象，而不是副本。

```
Users us_end;

foreach (var VARIABLE in ((List<Users>)Application["Users_On"]))
{
    if(VARIABLE.Id == (int)Session["Current_Id"])
    {
       us_end = (Users)VARIABLE;
       break;
    }
}

if (us_end != null)
{
    List<Users> us = ((List<Users>)Application["Users_On"]);
    us.Remove(us_end);
    Application["Users_On"] = us;
} 
```

**编辑：**

只是为了澄清这里的地址，正如 pst 指出的那样，您还可以实现`IEquatable`接口和一些覆盖，例如 Groo 的答案以使其工作，但我认为这在这个特定主题上是矫枉过正的。将此作为最常见的做法，但要明确表示也可以从列表中删除项目，即使它们是不同的实例，甚至是具有类似技术的不同对象。

参考：http: [//msdn.microsoft.com/en-us/library/ms131187.aspx](http://msdn.microsoft.com/en-us/library/ms131187.aspx)

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-06-10T18:24:15.773

默认情况下，对象相等性在 .NET 中通过引用进行比较（除非`Equals`被覆盖，否则每个对象都继承自`object.Equals`）。如果您希望该`Remove`方法找到您的对象，则不能传递新对象。

最简单的方法是找到具有所需属性的**实际对象**，然后将其删除：

```
var id = (int)Session["Current_Id"];
var list = (List<Users>)Application["Users_On"];  

// find the exact item to remove.
var itemToRemove = list.FirstOrDefault(u => u.Id = id);

// if found, remove it
if (itemToRemove != null)
{
    list.Remove(itemToRemove);
} 
```

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2012-06-10T18:22:50.910

您正在创建一个*新* `Users`对象 - 这与已经存在的任何对象都不相同`Application["Users_On"]`（它将具有不同的引用），因此不会被删除。

这假设`Equals`和/或`IEquatable<T>`没有被覆盖/实现`Users`。

```
List<Users> us = ((List<Users>)Application["Users_On"]);
Users us_end = us.Where(u => u.Id == (int)Session["Current_Id"]).FirstOrDefault();
us.Remove(us_end);
Application["Users_On"] = us; 
```

顺便说一句 - 您的变量命名不是很好 - 使用更具描述性的名称。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-10T18:30:00.313

这是关于什么的：

```
List<Users> us = ((List<Users>)Application["Users_On"]);
Users us_end = us.First(x => x.ID == (int)Session["Current_Id"]);
us.Remove(us_end);
Application["Users_On"] = us; 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-08-14T08:05:33.917

通过在 remove 语句中找到项目来将其删除，而不是通过附加副本：

```
List<Users> us = ((List<Users>)Application["Users_On"]);
us.Remove(us.FirstOrDefault(u => u.ID == (int)Session["Current_Id"]));
Application["Users_On"] = us; 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2019-08-09T16:00:58.587

正如有人在前面的答案中所说：对象相等性在.NET 中通过引用进行比较。但是您可以通过简单地将 List 中的元素 T 从类转换为结构来从类和结构之间的差异中受益。

# php - 基于 Cookie 的重定向功能

> ID：10971169
> 
> 赞同：0
> 
> 时间：2012-06-10T18:20:04.383
> 
> 标签：php, javascript, cookies, session-cookies

我在我的 js 文件中使用此代码进行重定向

```
setTimeout('top.location=\'http://google.com/?123\';', 1000); 
```

问题是我的 js 文件执行了很多次，但我想在 js 文件中添加一些 cookie 代码，这样我的访问者就不会一次又一次地重定向。那么除非我手动更改 cookie，否则只执行一次此 js 文件的 cookie 代码将是什么

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-10T19:12:14.147

**未测试**

```
function createCookie(name,value,days) {
if (days) {
    var date = new Date();
    date.setTime(date.getTime()+(days*24*60*60*1000));
    var expires = "; expires="+date.toGMTString();
}
else var expires = "";
document.cookie = name+"="+value+expires+"; path=/";
}

function readCookie(name) {
var nameEQ = name + "=";
var ca = document.cookie.split(';');
for(var i=0;i < ca.length;i++) {
    var c = ca[i];
    while (c.charAt(0)==' ') c = c.substring(1,c.length);
    if (c.indexOf(nameEQ) == 0) return c.substring(nameEQ.length,c.length);
}
return null;
}

if(readCookie('redirected')!=true)
{
    createCookie('redirected',true,0); // cookie will be trashed after the browser closed.
    setTimeout('top.location=\'http://google.com/?123\';', 1000);
} 
```

[**在这里阅读。**](http://www.quirksmode.org/js/cookies.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-10T19:07:05.323

记住这个函数来创建你的代码，按顺序使用这些步骤。您可以查看您的 js 参考以了解如何执行每个步骤。我希望这能为您指明正确的方向。

1.  检查现有的 cookie。
2.  如果找到 cookie，请不要重定向，否则，请重定向。（这就是您现有的生产线的用武之地。）
3.  根据您希望它们重定向的频率设置具有超时值的 cookie。

# android - Listview 需要永远加载到模拟器中

> ID：10971170
> 
> 赞同：0
> 
> 时间：2012-06-10T18:20:11.423
> 
> 标签：android

我一直在运行这段代码（除了`onCreate`因为我必须先从网上检索数据），它就停在线上`mainView.setAdapter`，永远不会进入下一个调试语句（或为此加载数据）。我究竟做错了什么？

```
private void loadInteractions(JSONArray interactions){
    mainView = (ListView) findViewById(R.id.list);
    myInteractionsTask.cancel(false);
    String[] interactionsArray=new String[interactions.length()];
    for(int interactionCounter=0; interactionCounter<interactions.length();interactionCounter++){
        TextView interactionView = new TextView(this);
        Log.d("Debug", "Loading Interaction #"+interactionCounter);
        try {
            Log.d("Debug", "Loading text: "+interactions.getString(interactionCounter));
            interactionsArray[interactionCounter]=interactions.getString(interactionCounter);
            Log.d("Debug", "Done loading text");
        } catch (JSONException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        }
    }
    mainView.setAdapter(new ArrayAdapter<String>(this, R.id.list, interactionsArray));
    Log.d("Debug", "Done loading textView");

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-10T18:24:55.843

```
mainView.setAdapter(new ArrayAdapter<String>(this, R.id.list, interactionsArray)); 
```

构造函数的第二个参数`ArrayAdapter`应该是单独的`ListView`项目布局，而不是`ListView`本身的 id。你正在通过`R.id.list`哪个是你的`ListView`身份证。

尝试传递`android.R.layout.simple_list_item_1`，这将为您提供每个项目的单行文本布局。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-10T19:55:38.210

事实证明，我的问题实际上与我发布的代码无关。问题是我曾尝试`doInBackground`在 a中添加 UI 元素，`AsyncTask`而您永远不应该这样做，而是将其放入`onPostExecute`我将编辑帖子以显示这一点。这是最终代码。

```
class LoadInteractionsTask extends AsyncTask<String,Integer,Integer>{
    JSONArray interactions;
    boolean loadStatus=false;

    @Override
    protected Integer doInBackground(String... params) {
        // TODO Auto-generated method stub
        // TODO Auto-generated method stub
        // Create a new HttpClient and Post Header
        myLogin.cancel(false);
        HttpGet httpget = new HttpGet("http://www.example.com/device/get_module_list.php");
        Log.d("Debug", "starting loading");

        try {
            // Execute HTTP Post Request
            HttpResponse response = httpclient.execute(httpget);
            HttpEntity myentity =response.getEntity();
            Log.d("Debug", "response: "+myentity);

            String loginJSON = EntityUtils.toString( myentity );
            JSONTokener myTokener =new JSONTokener(loginJSON);
            //Log.d("Debug", "status: "+myTokener.nextValue());

            //JSONObject
            JSONObject myJSON = (JSONObject) (myTokener).nextValue();
            Log.d("Debug", "status: "+myJSON.getInt("status"));
            if(myJSON.getInt("status")==1){
                interactions=myJSON.getJSONArray("modules");
                loadStatus=true;
            }else{
                Log.d("Debug", "error: "+myJSON.getString("reason"));

            }

        } catch (ClientProtocolException e) {
            // TODO Auto-generated catch block
            Log.d("Debug", "caught ClientProtocolException");
        } catch (IOException e) {
            // TODO Auto-generated catch block
            Log.d("Debug", "caught IOException: "+e.getMessage());
            e.printStackTrace();
        } catch (ParseException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        } catch (JSONException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        }
        return null;
    }

    protected void onPostExecute(Integer result) {
        super.onPostExecute(result);
        if(loadStatus){
            loadInteractions(interactions);
        }
    }

} 
```

# ios - 使用 Xcode 调试 free()

> ID：10971179
> 
> 赞同：1
> 
> 时间：2012-06-10T18:21:10.750
> 
> 标签：ios, xcode, debugging, memory-management

尝试运行我正在开发的 iOS 应用程序时出现以下错误：

```
appname(6097,0x3e835d98) malloc: *** error for object 0x20104600: pointer being freed was not allocated
*** set a breakpoint in malloc_error_break to debug 
```

如何找出`free()`生成此错误的调​​用？如果我为 添加断点`malloc_error_break`，我得到的整个堆栈跟踪是对 " `malloc_error_break`" 的调用，如下所示：

```
libsystem_c.dylib`malloc_error_break:
0x32f20fa8:  push   {r7, lr}                           < Thread 1: breakpoint 1.1
0x32f20faa:  mov    r7, sp
0x32f20fac:  nop    
0x32f20fae:  nop    
0x32f20fb0:  pop    {r7, pc}
0x32f20fb2:  nop 
```

如果我不为 添加断点`malloc_error_break`，我会得到一个同样无用的堆栈跟踪，但这次只有一个`__pthread_kill`和一个汇编指令。

我还能做些什么来更好地了解生成此错误的代码吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-10T19:38:47.593

我刚刚使用以下`main`方法创建了一个名为“Test”的新项目：

```
void* data = malloc(100);    
free(data);
free(data); 
```

然后我打开“Product->Edit Scheme”，单击“Test.app”选项卡，然后单击“Diagnostics”。然后我选择“启用 Guard Malloc”。

现在，如果我运行应用程序，我会在第二个`free`.

# c++ - 链接 1310：VStudio 2010 中的错误

> ID：10971185
> 
> 赞同：0
> 
> 时间：2012-06-10T18:21:37.600
> 
> 标签：c++, windows, visual-studio-2010, visual-c++, linker-errors

我正在 Visual Studio 2010 Ultimate Edition 下开发一个项目。当我按下“开始调试”按钮时，编译开始并出现错误

> “错误链接 1310：pure 不支持导出。MSIL 图像在 ....”

我不知道如何解决这个问题，这似乎是公共语言运行时编译中的一个选项问题，但我不明白这部分文档[http://msdn.microsoft.com/en-us/库/k8d11d4s%28v=vs.90%29.aspx](http://msdn.microsoft.com/en-us/library/k8d11d4s%28v=vs.90%29.aspx)。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-10T18:37:46.910

好吧，将选项从 /clr:pure 更改为只是简单的 /clr ，它将停止抱怨。右键单击您的项目，属性，常规，“公共语言运行时支持”设置。

/clr:pure 选项强制编译器只省略 IL，不允许使用任何机器代码。您不能使用该选项导出函数，编译器必须为导出发出一个存根，以确保加载 CLR 并且代码从本机执行转换为托管执行。该存根需要机器代码。

从这个问题中无法猜测这是否是您*真正想要的。*/clr:pure 选项通常没有多大意义，您不妨用 C# 或 VB.NET 编写代码。如果您需要与本机代码互操作，C++/CLI 语言是首选的武器。导出存根当然很好，它使您不必自己托管 CLR 或迷失在 COM 编程中。但请注意，它并不是特别快。

# java - 在 JAVA 代码中将 ImageViews 添加到 ScrollView

> ID：10971187
> 
> 赞同：0
> 
> 时间：2012-06-10T18:22:06.193
> 
> 标签：java, android, xml

我尝试使用 imageview 制作滚动视图，就像徽标测验应用程序中的滚动视图一样。

我创建了一个带有滚动视图的 XML 文件。

> ```
> <ScrollView
>     android:id="@+id/scrollView1"
>     android:layout_width="fill_parent"
>     android:layout_height="fill_parent"
>     android:background="@color/beige"
>     > 
>     <LinearLayout
>         android:id="@+id/layout_level1"
>         android:layout_width="fill_parent"
>         android:layout_height="wrap_content">
>     </LinearLayout>
> </ScrollView> 
> ```

比我写的：

```
public class Level1 extends Activity {

Level1Draw L1;  
LinearLayout l;
ScrollView s;

@Override
protected void onCreate(Bundle savedInstanceState) {
    // TODO Auto-generated method stub
    super.onCreate(savedInstanceState);
    requestWindowFeature(Window.FEATURE_NO_TITLE);
    getWindow().setFlags(WindowManager.LayoutParams.FLAG_FULLSCREEN, WindowManager.LayoutParams.FLAG_FULLSCREEN);
    L1 = new Level1Draw(this);
    setContentView(R.layout.level1);

    l = (LinearLayout) findViewById(R.id.layout_level1);

    l.addView(L1);

} 
```

这是 Level1Draw 类：

```
private class Level1Draw extends View {

        Bitmap[][] logo_1 = {{BitmapFactory.decodeResource(getResources(), R.drawable.cellcom),BitmapFactory.decodeResource(getResources(), R.drawable.channel1),BitmapFactory.decodeResource(getResources(), R.drawable.doctor_gav)},
                {BitmapFactory.decodeResource(getResources(), R.drawable.golfnew),BitmapFactory.decodeResource(getResources(), R.drawable.globes_only_logo_acrobat),BitmapFactory.decodeResource(getResources(), R.drawable.foxgroup3)},
                {BitmapFactory.decodeResource(getResources(), R.drawable.hando),BitmapFactory.decodeResource(getResources(), R.drawable.hafenix),BitmapFactory.decodeResource(getResources(), R.drawable.haaretz)},
                {BitmapFactory.decodeResource(getResources(), R.drawable.laisha),BitmapFactory.decodeResource(getResources(), R.drawable.jerusalempostred),BitmapFactory.decodeResource(getResources(), R.drawable.hop)},
                {BitmapFactory.decodeResource(getResources(), R.drawable.maariv),BitmapFactory.decodeResource(getResources(), R.drawable.logo),BitmapFactory.decodeResource(getResources(), R.drawable.logodelta)},
                {BitmapFactory.decodeResource(getResources(), R.drawable.renuar),BitmapFactory.decodeResource(getResources(), R.drawable.ravbariah),BitmapFactory.decodeResource(getResources(), R.drawable.pelephone)},
                {BitmapFactory.decodeResource(getResources(), R.drawable.shilav),BitmapFactory.decodeResource(getResources(), R.drawable.sano),BitmapFactory.decodeResource(getResources(), R.drawable.reshet_tv)},
                {BitmapFactory.decodeResource(getResources(), R.drawable.steimatzky),BitmapFactory.decodeResource(getResources(), R.drawable.srigamish),BitmapFactory.decodeResource(getResources(), R.drawable.sport5)},
                {BitmapFactory.decodeResource(getResources(), R.drawable.tambur),BitmapFactory.decodeResource(getResources(), R.drawable.supersal),BitmapFactory.decodeResource(getResources(), R.drawable.superpharm)},
                {BitmapFactory.decodeResource(getResources(), R.drawable.yediot),BitmapFactory.decodeResource(getResources(), R.drawable.walla),BitmapFactory.decodeResource(getResources(), R.drawable.tzometsfarim)},
                };

        public Level1Draw(Context context) {
            // TODO Auto-generated constructor stub
            super(context);

        }

        @Override
        protected void onDraw(Canvas canvas) {  
            // TODO Auto-generated method stub
            super.onDraw(canvas);
            for(int i=0;i<10;i++){
                for(int j=0;j<3;j++){
            canvas.drawBitmap(logo_1[i][j], 60*(j+1)+80*j, 60*(i+1)+80*i, null);
                }
            }

        }

    } 
```

如果我在添加 L1 视图时写了一个特定的宽度和高度，我可以在屏幕上看到该视图，但不能作为滚动视图，否则它不起作用。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-10T22:38:57.160

您的“Level1Draw”类中没有实现 onMeasure，因此它不知道如何告诉其父级所需的大小，并且在创建它时也没有 layoutParams。

简而言之，自定义视图比仅仅绘制它需要更多的努力。

在任何情况下，而不是一个带有滚动视图的线性布局包装它，为什么不使用它里面的 imageViews 的 listView 呢？它更快，更容易，内存效率更高（想象一下为了拥有 100 个图像视图你会做什么......）。

有关更多信息，请查看此视频：

[http://www.youtube.com/watch?v=wDBM6wVEO70](http://www.youtube.com/watch?v=wDBM6wVEO70)

# php - CodeIgniter“内容编码错误”

> ID：10971191
> 
> 赞同：6
> 
> 时间：2012-06-10T18:22:25.383
> 
> 标签：php, apache, codeigniter, encoding

有没有人知道如何`$config['compress_output'] = true`在 CodeIgniter 中找到引发此“内容编码错误”的泄漏点？

我已经尝试调试这个错误好几天了，但我似乎无法找到泄漏的位置。`LogLevel`是在，`debug`但发生此错误时，我在日志中看不到任何信息。

那么，任何想法如何调试呢？

## 更新

我真的不想禁用该`compress_output`功能，我只想看看如何追踪错误产生的位置

## 更新2

我一遍又一遍地查看控制器中是否有任何输出......并且没有，所以其他一些地方一定是引发了错误。没有模型/数据库，只有控制器、库、助手和视图

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-06-13T01:27:29.767

这个问题是输出缓冲开始的地方。对配置变量的检查`system/core/Output.php`在`_display()`. 它在大量代码已经运行后启动 gzipped 缓冲。这使得输出有可能在缓冲开始之前发生。

`compress_output`设置为`false`没关系，因为没有任何编码。将它设置为`true`您最终会得到混合内容。有些输出是编码的，有些不是，这会导致压缩错误。

有两种解决方案：

1) 您可以将`compress_output`设置保留为 false 并添加`ob_start('ob_gzhandler');`到 index.php 文件的顶部。这将确保所有输出始终被压缩，包括错误。

2）另一种解决方案是在之前`ob_flush();`添加。这将在没有错误时输出 gzip 并在有错误时为您提供未编码的内容。`ob_start('ob_gzhandler');``system/Output.php`

我认为 2 是更好的解决方案，应该由 CodeIgniter 团队实施。但是，如果您不想弄乱系统代码（升级时更改将消失），那么 1 对您来说是更好的解决方案。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-15T18:15:23.813

这可能是一个长镜头，但如果您直接从控制器回显/打印数据库输出而不是将其发送到模型，您可能会收到与输出缓冲有关的错误消息。你是从你的控制器回响吗？

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2016-05-04T05:01:02.943

将以下行放在 config.php 中：

```
$config['compress_output'] = FALSE; 
```

解决它。就我而言，问题是我发送了帖子，但它无法识别该`FILLCATEGORIAS`功能。只有通过改变`$ config [ 'compress_output'] = FALSE;`解决了它。

当我们使用 POST 请求发送数据时出现此问题：

> 加载资源失败：net::ERR_CONTENT_DECODING_FAILED

```
<script type="text/javascript">   
            $(document).ready(function() {                       
                $("#idEmpresa").change(function() {
                    $("#idEmpresa option:selected").each(function() {
                        id = $('#idEmpresa').val();
                        $.post("<?php echo base_url();?>Admin/fillCategorias", {
                            idEmpresa : id
                        }, function(data) {
                            $("#idCategoria").html(data);
                        });
                    });
                });
            });
        </script>
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-16T00:26:12.917

1.  PHP 中的任何错误都会破坏压缩。

    要对此进行测试，请在 index.php 中更改：

    ```
    error_reporting(E_ALL); 
    ```

    到

    ```
    error_reporting(E_ALL ^ E_NOTICE); 
    ```

2.  不要回显/打印以显示控制器的输出。

3.  不要在控制器文件的末尾使用“?>”。

我希望它有所帮助。

**更新：**

要在开始缓冲之前检查输出是否为空，可以打开 core/Output.php 并添加

```
ob_flush(); 
```

前

```
ob_start('ob_gzhandler'); 
```

如果甚至有空格或空行，压缩将失败。（*从浏览器检查页面源*）。发生这种情况是因为 $config['compress_output'] = true 会执行 ob_start('ob_gzhandler') （Output.php 中的第 379 行），这将导致“*无法修改标头信息 - 标头已发送...* ”警告。此警告是压缩失败的原因。

*所以基本上，输出类（包括json输出*）之外的任何回显都会将标头发送到客户端，这将导致“*无法修改标头信息 - 标头已发送...* ”警告，这将导致“*内容编码错误*”。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-12-31T05:24:06.340

我有同样的问题。搜索后，我发现我的控制器`?>`在文件末尾。所以我删除了它，它工作得很好。这是更多详细信息的[链接](http://ellislab.com/forums/viewthread/93815/)。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2020-01-24T11:08:56.490

更合规的解决方案：

```
$this->output->set_output($data); 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2020-09-26T20:49:06.273

一些 CPanel lightspeed 扩展更新会产生这个问题。您可以尝试在`.htaccess`文件中添加此代码：

`php_flag zlib.output_compression ON`

# php - 我的脚本中的下一个和上一个

> ID：10971198
> 
> 赞同：-3
> 
> 时间：2012-06-10T18:23:24.933
> 
> 标签：php, image, preview, next, multipage

> **可能重复：**
> [上一个/下一个按钮？](https://stackoverflow.com/questions/10436017/previous-next-buttons)

我怎样才能在我的画廊脚本中制作下一页和上一页..什么时候

```
mid = id of images 
path = link of images 
```

我需要两个按钮：*next*获取下一张图片，*prev*获取最后一张图片。我该怎么做 ？

```
$mid=$_GET['mid'];
$qur="select * from images where mid='$mid'";
$res=mysql_query($qur,$conn);
?>
<?php while($row=mysql_fetch_array($res)){ ?>

<div class="gallery-img">
<a href="admin/<?php echo $row['path'] ?>" rel="prettyPhoto" class="portfolio-img" title="<?php echo $row['image_title'] ?>">
<img src="admin/<?php echo $row['path'] ?>" alt="<?php echo $row['image_title'] ?>" width="100%" height="100%" />
</a>
</div>  

<?php } ?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-10T18:56:13.343

如果您正在使用`$_GET`我假设这将是一个动态页面，您可以查看照片，您希望在页面上显示下一个和上一个，如果是这样，试试这个

```
<?php
$mid=mysql_real_escape_string($_GET['mid']);
$res=mysql_query("select * from images where mid='".$mid."'",$conn);
$prevSQL = mysql_query("SELECT mid, path FROM images WHERE mid > '".$mid."' LIMIT 1");
$nextSQL = mysql_query("SELECT mid, path FROM images WHERE mid < '".$mid."' LIMIT 1");

$row = mysql_fetch_assoc($res);
if(mysql_num_rows($prevSQL)>1){
    $prevRow = mysql_fetch_assoc($prevSQL);
    $prev = '<a href="admin/'.$prevRow['mid'].'">Prev</a>';
} else {
    $prev = 'Prev';
}
if(mysql_num_rows($nextSQL)>1){
    $nextRow = mysql_fetch_assoc($nextSQL);
    $next = '<a href="admin/'.$prevRow['mid'].'">Next</a>';
} else {
    $next = 'Prev';
}
?>
<div class="gallery-img">
<a href="admin/<?=$row['path'] ?>" rel="prettyPhoto" class="portfolio-img" title="<?=$row['image_title'] ?>">
<img src="admin/<?=$row['path'] ?>" alt="<?=$row['image_title'] ?>" width="100%" height="100%" />
</a>
<?=$prev.' '.$next;?>
</div> 
```

# javascript - 为什么 ",,," == new Array(4)

> ID：10971204
> 
> 赞同：1
> 
> 时间：2012-06-10T18:24:15.463
> 
> 标签：javascript

> **可能重复：**
> [为什么 JavaScript 中的“,,,” == Array(4)？](https://stackoverflow.com/questions/10905350/why-does-array4-in-javascript)

在 JavaScript 中为什么

```
",,," == new Array(4) 
```

它在 Chrome 开发者工具和 nodejs 控制台中返回 true。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-10T18:27:56.660

```
console.log(new Array(4).toString()); // ",,," 
```

转换为具有上述值的**字符串，使两者相等。**

```
",,," == ",,," // true 
```

JS看到左边是一个字符串，右边是一个不利于比较的数组，它将数组转换为字符串然后进行比较。

请注意：

```
log(",,," === new Array(4)); 
```

将导致`false`因为`===`不仅检查`value`而且`type`类型当然不同。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-10T18:26:30.047

因为`new Array(4)`被隐式转换为字符串，这将等于`",,,"`（四个空元素，逗号分隔）。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-10T18:26:48.780

因为`Array(4).toString()`返回`",,,"`- 4 个空元素，所以它们之间只有逗号

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-10T18:28:34.880

字符串形式的数组生成一个逗号分隔的元素列表，即`1,2,3,4`. 如果 Array 中没有元素，它将显示为`,,,`.

`(new Array(4)).toString()`产生`,,,`.

请注意，`new Array(4) === ",,,"`返回 false。

# .net - linqpad 和 linq2sql 的内存泄漏

> ID：10971208
> 
> 赞同：4
> 
> 时间：2012-06-10T18:24:34.853
> 
> 标签：.net, linq-to-sql, linqpad

我在 linqpad 中执行非常简单的代码。而且我不明白执行后我的记忆在哪里。它只是占用内存并且不想将其返回。

```
 var step = 200000;
for (int i = 0; i < 1000; i++)
{
        //WordStats is linq2sql entity (dataContext.WordStats)  
    var keys = WordStats.Skip(step*i).Take(step).ToList();
    GC.Collect();
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-11T02:20:22.433

另一种方法是首先告诉 LINQ to SQL 不要缓存对象：

```
this.ObjectTrackingEnabled = false; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-10T18:47:37.620

LINQ DataContext 缓存 DataContext 中的所有读取对象，即使您自己没有对它们的任何引用。如果您稍后查询对象，您将获得缓存版本。

`GC.Collect()`您应该清除 LINQ 上下文的缓存，而不是这样做，[这是一篇](http://blog.robustsoftware.co.uk/2008/11/clearing-cache-of-linq-to-sql.html)描述如何进行的博文。

简而言之：

```
const BindingFlags FLAGS = BindingFlags.Instance | BindingFlags.Public | BindingFlags.NonPublic; 
var method = context.GetType().GetMethod("ClearCache", FLAGS); 
method.Invoke(context, null); 
```

在 LINQPad 中，您应该替换`context`为`this`.

# regex - Selenium Regex：将文字字符串与动态日期匹配

> ID：10971209
> 
> 赞同：0
> 
> 时间：2012-06-10T18:24:39.463
> 
> 标签：regex, selenium

我正在编写一些 Selenium 测试，需要确认是否存在具有动态日期和货币组件的文本字符串。

示例：“这是日期 dd/dd/dd，这是金额 $ddd.dd。”

这可能与 Selenium 正则表达式实现有关吗？

谢谢，理查德

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-10T20:32:47.773

如果我没记错的话 selenium 支持 javascript 的全部功能

*   日期 dd/mm/yyyy

    1900 年 1 月 1 日至 2099 年 12 月 31 日

    匹配无效日期，例如 2 月 31 日

    接受破折号、空格、正斜杠和点作为日期分隔符

    ```
    (0[1-9]|[12][0-9]|3[01])[- /.](0[1-9]|1[012])[- /.](19|20)[0-9]{2} 
    ```

*   货币

    ```
    \$\d*(\.\d*)? 
    ```

# javascript - javascript 返回未定义的变量“函数名”

> ID：10971212
> 
> 赞同：0
> 
> 时间：2012-06-10T18:25:06.820
> 
> 标签：javascript, jquery

我正在实现一些 javascript 函数，当我将它们放在一个单独的 js 文件中时，我得到了这个错误：未定义的变量：“函数名”。当我将它们内联在页面中间时，它们可以正常工作。什么会导致这样的问题？您可以在下面找到一个示例。

```
function cssColorToHex(colorStr) {

  var hex = '#';

  $.each(colorStr.substring(4).split(','), function(i, str) {
      var h = ($.trim(str.replace(')',''))*1).toString(16);
      hex += (h.length == 1) ? "0" + h : h;
  });

  return hex;
}

function hexToRgb(hex) {

  var result = /^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(hex);
  return result ? {
    r: parseInt(result[1], 16),
    g: parseInt(result[2], 16),
    b: parseInt(result[3], 16)
  } : null;
} 
```

我将它们放在以下函数中：

```
function colors_used() {

  var colors_used = [];

  $('.colorpicker').each(function() {

    var box = $(this).closest('.colorbox');
    var preset_color = $(box).css('background-color');
    preset_color = cssColorToHex(preset_color);.... 
```

因此，当我将前两个函数放在单独的文件中时，我得到的错误是：

```
Uncaught exception: ReferenceError: Undefined variable: cssColorToHex   Event thread: DOMContentLoaded 
```

**UPD:** * *FIXED* *: 我在 js 文件中交换了函数的顺序，以便函数`function hexToRgb(hex)`先行`cssColorToHex(colorStr)`后行，然后它开始工作。诡异的。谢谢大家。

# jsf-2 - 添加新数据时出现错误消息（事务中止）

> ID：10971213
> 
> 赞同：0
> 
> 时间：2012-06-10T18:25:18.997
> 
> 标签：jsf-2, ejb-3.0, jpa-2.0

我正在使用 jsf 2.0 + primefaces 3.2 + EJB 2.0 + JPA 2.0 。大家好，当我试图影响一个新学生上课时，系统会发出一条错误消息，该消息是trasaction abored。我的实体代码：ClasseHasEtudiant

```
public class ClasseHasEtudiant implements Serializable {
private static final long serialVersionUID = 1L;
@EmbeddedId
protected ClasseHasEtudiantPK classeHasEtudiantPK;
@JoinColumn(name = "Etudiant_id", referencedColumnName = "id", insertable = false, updatable = false)
@ManyToOne(optional = false)
private Etudiant etudiant;
@JoinColumn(name = "Classe_id", referencedColumnName = "id", insertable = false, updatable = false)
@ManyToOne(optional = false)
private Classe classe;

public ClasseHasEtudiant() {
}

public ClasseHasEtudiant(ClasseHasEtudiantPK classeHasEtudiantPK) {
    this.classeHasEtudiantPK = classeHasEtudiantPK;
}

public ClasseHasEtudiant(int classeid, int etudiantid) {
    this.classeHasEtudiantPK = new ClasseHasEtudiantPK(classeid, etudiantid);
}

public ClasseHasEtudiantPK getClasseHasEtudiantPK() {
    return classeHasEtudiantPK;
}

public void setClasseHasEtudiantPK(ClasseHasEtudiantPK classeHasEtudiantPK) {
    this.classeHasEtudiantPK = classeHasEtudiantPK;
}

public Etudiant getEtudiant() {
    return etudiant;
}

public void setEtudiant(Etudiant etudiant) {
    this.etudiant = etudiant;
}

public Classe getClasse() {
    return classe;
}

public void setClasse(Classe classe) {
    this.classe = classe;
}

@Override
public int hashCode() {
    int hash = 0;
    hash += (classeHasEtudiantPK != null ? classeHasEtudiantPK.hashCode() : 0);
    return hash;
}

@Override
public boolean equals(Object object) {
    // TODO: Warning - this method won't work in the case the id fields are not set
    if (!(object instanceof ClasseHasEtudiant)) {
        return false;
    }
    ClasseHasEtudiant other = (ClasseHasEtudiant) object;
    if ((this.classeHasEtudiantPK == null && other.classeHasEtudiantPK != null) || (this.classeHasEtudiantPK != null && !this.classeHasEtudiantPK.equals(other.classeHasEtudiantPK))) {
        return false;
    }
    return true;
}

@Override
public String toString() {
    return "dossierEtudiants.entities.ClasseHasEtudiant[ classeHasEtudiantPK=" + classeHasEtudiantPK + " ]";
} 
```

}

实体 ClasseHasEtudiantPK 的代码

```
@Embeddable
public class ClasseHasEtudiantPK implements Serializable {
@Basic(optional = false)
@NotNull
@Column(name = "Classe_id")
private int classeid;
@Basic(optional = false)
@NotNull
@Column(name = "Etudiant_id")
private int etudiantid;

public ClasseHasEtudiantPK() {
}

public ClasseHasEtudiantPK(int classeid, int etudiantid) {
    this.classeid = classeid;
    this.etudiantid = etudiantid;
}

public int getClasseid() {
    return classeid;
}

public void setClasseid(int classeid) {
    this.classeid = classeid;
}

public int getEtudiantid() {
    return etudiantid;
}

public void setEtudiantid(int etudiantid) {
    this.etudiantid = etudiantid;
}

@Override
public int hashCode() {
    int hash = 0;
    hash += (int) classeid;
    hash += (int) etudiantid;
    return hash;
}

@Override
public boolean equals(Object object) {
    // TODO: Warning - this method won't work in the case the id fields are not set
    if (!(object instanceof ClasseHasEtudiantPK)) {
        return false;
    }
    ClasseHasEtudiantPK other = (ClasseHasEtudiantPK) object;
    if (this.classeid != other.classeid) {
        return false;
    }
    if (this.etudiantid != other.etudiantid) {
        return false;
    }
    return true;
}

@Override
public String toString() {
    return "dossierEtudiants.entities.ClasseHasEtudiantPK[ classeid=" + classeid + ", etudiantid=" + etudiantid + " ]";
} 
```

}

这是我的 .xhtml 代码：

```
<ui:define name="content">
        <h:panelGroup id="messagePanel" layout="block">
            <h:messages errorStyle="color: red" infoStyle="color: green" layout="table"/>
        </h:panelGroup>
        <h:form>
            <h:panelGrid columns="2">
                <h:outputLabel value="#{bundle.CreateClasseHasEtudiantLabel_etudiant}" for="etudiant" />
                <h:selectOneMenu id="etudiant" value="#{classeHasEtudiantController.selected.etudiant}" title="#{bundle.CreateClasseHasEtudiantTitle_etudiant}" required="true" requiredMessage="#{bundle.CreateClasseHasEtudiantRequiredMessage_etudiant}">
                    <f:selectItems value="#{etudiantController.itemsAvailableSelectOne}"/>
                </h:selectOneMenu>
                <h:outputLabel value="#{bundle.CreateClasseHasEtudiantLabel_classe}" for="classe" />
                <h:selectOneMenu id="classe" value="#{classeHasEtudiantController.selected.classe}" title="#{bundle.CreateClasseHasEtudiantTitle_classe}" required="true" requiredMessage="#{bundle.CreateClasseHasEtudiantRequiredMessage_classe}">
                    <f:selectItems value="#{classeController.itemsAvailableSelectOne}"/>
                </h:selectOneMenu>
            </h:panelGrid>
            <br />
            <h:commandLink action="#{classeHasEtudiantController.create}" value="#{bundle.CreateClasseHasEtudiantSaveLink}" />
            <br />
            <br />
            <h:commandLink action="#{classeHasEtudiantController.prepareList}" value="#{bundle.CreateClasseHasEtudiantShowAllLink}" immediate="true"/>
            <br />
            <br />
            <h:commandLink value="#{bundle.CreateClasseHasEtudiantIndexLink}" action="/index" immediate="true" />
        </h:form>
    </ui:define> 
```

这是我的 managedBean 代码：

```
 public String prepareCreate() {
    current = new ClasseHasEtudiant();
    current.setClasseHasEtudiantPK(new dossierEtudiants.entities.ClasseHasEtudiantPK());
    selectedItemIndex = -1;
    return "Create";
}

public String create() {
    try {
        getFacade().create(current);
        JsfUtil.addSuccessMessage(ResourceBundle.getBundle("/Bundle1").getString("ClasseHasEtudiantCreated"));
        return prepareCreate();
    } catch (Exception e) {
        JsfUtil.addErrorMessage(e, ResourceBundle.getBundle("/Bundle1").getString("PersistenceErrorOccured"));
        return null;
    }
} 
```

最后是我的日志：

```
 Exception [EclipseLink-4002] (Eclipse Persistence Services - 2.3.0.v20110604-r9504): org.eclipse.persistence.exceptions.DatabaseException
Internal Exception: com.mysql.jdbc.exceptions.jdbc4.MySQLIntegrityConstraintViolationException: Cannot add or update a child row: a foreign key constraint fails (`isetdb`.`classe_has_etudiant`, CONSTRAINT `classe_has_etudiant_ibfk_1` FOREIGN KEY (`Classe_id`) REFERENCES `classe` (`id`) ON DELETE CASCADE ON UPDATE CASCADE)
Error Code: 1452
Call: INSERT INTO classe_has_etudiant (Classe_id, Etudiant_id) VALUES (?, ?)
    bind => [2 parameters bound]
Query: InsertObjectQuery(entities.ClasseHasEtudiant[ classeHasEtudiantPK=entities.ClasseHasEtudiantPK[ classeid=0, etudiantid=0 ] ])
    at org.eclipse.persistence.exceptions.DatabaseException.sqlException(DatabaseException.java:324)
    at org.eclipse.persistence.internal.databaseaccess.DatabaseAccessor.executeDirectNoSelect(DatabaseAccessor.java:840)
    at org.eclipse.persistence.internal.databaseaccess.DatabaseAccessor.executeNoSelect(DatabaseAccessor.java:906)
    at org.eclipse.persistence.internal.databaseaccess.DatabaseAccessor.basicExecuteCall(DatabaseAccessor.java:592)
    at org.eclipse.persistence.internal.databaseaccess.DatabaseAccessor.executeCall(DatabaseAccessor.java:535)
    at org.eclipse.persistence.internal.sessions.AbstractSession.basicExecuteCall(AbstractSession.java:1702)
    at org.eclipse.persistence.sessions.server.ClientSession.executeCall(ClientSession.java:253)
    at org.eclipse.persistence.internal.queries.DatasourceCallQueryMechanism.executeCall(DatasourceCallQueryMechanism.java:207)
    at org.eclipse.persistence.internal.queries.DatasourceCallQueryMechanism.executeCall(DatasourceCallQueryMechanism.java:193)
    at org.eclipse.persistence.internal.queries.DatasourceCallQueryMechanism.insertObject(DatasourceCallQueryMechanism.java:342)
    at org.eclipse.persistence.internal.queries.StatementQueryMechanism.insertObject(StatementQueryMechanism.java:162)
    at org.eclipse.persistence.internal.queries.StatementQueryMechanism.insertObject(StatementQueryMechanism.java:177)
    at org.eclipse.persistence.internal.queries.DatabaseQueryMechanism.insertObjectForWrite(DatabaseQueryMechanism.java:472)
    at org.eclipse.persistence.queries.InsertObjectQuery.executeCommit(InsertObjectQuery.java:80)
    at org.eclipse.persistence.queries.InsertObjectQuery.executeCommitWithChangeSet(InsertObjectQuery.java:90)
    at org.eclipse.persistence.internal.queries.DatabaseQueryMechanism.executeWriteWithChangeSet(DatabaseQueryMechanism.java:287)
    at org.eclipse.persistence.queries.WriteObjectQuery.executeDatabaseQuery(WriteObjectQuery.java:58)
    at org.eclipse.persistence.queries.DatabaseQuery.execute(DatabaseQuery.java:829)
    at org.eclipse.persistence.queries.DatabaseQuery.executeInUnitOfWork(DatabaseQuery.java:728)
    at org.eclipse.persistence.queries.ObjectLevelModifyQuery.executeInUnitOfWorkObjectLevelModifyQuery(ObjectLevelModifyQuery.java:108)
    at org.eclipse.persistence.queries.ObjectLevelModifyQuery.executeInUnitOfWork(ObjectLevelModifyQuery.java:85)
    at org.eclipse.persistence.internal.sessions.UnitOfWorkImpl.internalExecuteQuery(UnitOfWorkImpl.java:2863)
    at org.eclipse.persistence.internal.sessions.AbstractSession.executeQuery(AbstractSession.java:1501)
    at org.eclipse.persistence.internal.sessions.AbstractSession.executeQuery(AbstractSession.java:1483)
    at org.eclipse.persistence.internal.sessions.AbstractSession.executeQuery(AbstractSession.java:1443)
    at org.eclipse.persistence.internal.sessions.CommitManager.commitNewObjectsForClassWithChangeSet(CommitManager.java:224)
    at org.eclipse.persistence.internal.sessions.CommitManager.commitAllObjectsWithChangeSet(CommitManager.java:123)
    at org.eclipse.persistence.internal.sessions.AbstractSession.writeAllObjectsWithChangeSet(AbstractSession.java:3784)
    at org.eclipse.persistence.internal.sessions.UnitOfWorkImpl.commitToDatabase(UnitOfWorkImpl.java:1407)
    at org.eclipse.persistence.internal.sessions.RepeatableWriteUnitOfWork.commitToDatabase(RepeatableWriteUnitOfWork.java:634)
    at org.eclipse.persistence.internal.sessions.UnitOfWorkImpl.commitToDatabaseWithChangeSet(UnitOfWorkImpl.java:1497)
    at org.eclipse.persistence.internal.sessions.UnitOfWorkImpl.issueSQLbeforeCompletion(UnitOfWorkImpl.java:3135)
    at org.eclipse.persistence.internal.sessions.RepeatableWriteUnitOfWork.issueSQLbeforeCompletion(RepeatableWriteUnitOfWork.java:344)
    at org.eclipse.persistence.transaction.AbstractSynchronizationListener.beforeCompletion(AbstractSynchronizationListener.java:157)
    at org.eclipse.persistence.transaction.JTASynchronizationListener.beforeCompletion(JTASynchronizationListener.java:68)
    at com.sun.enterprise.transaction.JavaEETransactionImpl.commit(JavaEETransactionImpl.java:435)
    at com.sun.enterprise.transaction.JavaEETransactionManagerSimplified.commit(JavaEETransactionManagerSimplified.java:852)
    at com.sun.ejb.containers.BaseContainer.completeNewTx(BaseContainer.java:5114)
    at com.sun.ejb.containers.BaseContainer.postInvokeTx(BaseContainer.java:4879)
    at com.sun.ejb.containers.BaseContainer.postInvoke(BaseContainer.java:2039)
    at com.sun.ejb.containers.BaseContainer.postInvoke(BaseContainer.java:1990)
    at com.sun.ejb.containers.EJBLocalObjectInvocationHandler.invoke(EJBLocalObjectInvocationHandler.java:222)
    at com.sun.ejb.containers.EJBLocalObjectInvocationHandlerDelegate.invoke(EJBLocalObjectInvocationHandlerDelegate.java:88)
    at $Proxy302.create(Unknown Source)
    at sessionBeans.__EJB31_Generated__ClasseHasEtudiantFacade__Intf____Bean__.create(Unknown Source)
    at managedBeans.ClasseHasEtudiantController.create(ClasseHasEtudiantController.java:86)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
    at java.lang.reflect.Method.invoke(Method.java:601)
    at com.sun.el.parser.AstValue.invoke(AstValue.java:234)
    at com.sun.el.MethodExpressionImpl.invoke(MethodExpressionImpl.java:297)
    at org.jboss.weld.util.el.ForwardingMethodExpression.invoke(ForwardingMethodExpression.java:43)
    at org.jboss.weld.el.WeldMethodExpression.invoke(WeldMethodExpression.java:56)
    at com.sun.faces.facelets.el.TagMethodExpression.invoke(TagMethodExpression.java:105)
    at javax.faces.component.MethodBindingMethodExpressionAdapter.invoke(MethodBindingMethodExpressionAdapter.java:88)
    at com.sun.faces.application.ActionListenerImpl.processAction(ActionListenerImpl.java:102)
    at javax.faces.component.UICommand.broadcast(UICommand.java:315)
    at javax.faces.component.UIViewRoot.broadcastEvents(UIViewRoot.java:794)
    at javax.faces.component.UIViewRoot.processApplication(UIViewRoot.java:1259)
    at com.sun.faces.lifecycle.InvokeApplicationPhase.execute(InvokeApplicationPhase.java:81)
    at com.sun.faces.lifecycle.Phase.doPhase(Phase.java:101)
    at com.sun.faces.lifecycle.LifecycleImpl.execute(LifecycleImpl.java:118)
    at javax.faces.webapp.FacesServlet.service(FacesServlet.java:593)
    at org.apache.catalina.core.StandardWrapper.service(StandardWrapper.java:1539)
    at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:281)
    at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:175)
    at org.apache.catalina.core.StandardPipeline.doInvoke(StandardPipeline.java:655)
    at org.apache.catalina.core.StandardPipeline.invoke(StandardPipeline.java:595)
    at com.sun.enterprise.web.WebPipeline.invoke(WebPipeline.java:98)
    at com.sun.enterprise.web.PESessionLockingStandardPipeline.invoke(PESessionLockingStandardPipeline.java:91)
    at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:162)
    at org.apache.catalina.connector.CoyoteAdapter.doService(CoyoteAdapter.java:330)
    at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:231)
    at com.sun.enterprise.v3.services.impl.ContainerMapper.service(ContainerMapper.java:174)
    at com.sun.grizzly.http.ProcessorTask.invokeAdapter(ProcessorTask.java:828)
    at com.sun.grizzly.http.ProcessorTask.doProcess(ProcessorTask.java:725)
    at com.sun.grizzly.http.ProcessorTask.process(ProcessorTask.java:1019)
    at com.sun.grizzly.http.DefaultProtocolFilter.execute(DefaultProtocolFilter.java:225)
    at com.sun.grizzly.DefaultProtocolChain.executeProtocolFilter(DefaultProtocolChain.java:137)
    at com.sun.grizzly.DefaultProtocolChain.execute(DefaultProtocolChain.java:104)
    at com.sun.grizzly.DefaultProtocolChain.execute(DefaultProtocolChain.java:90)
    at com.sun.grizzly.http.HttpProtocolChain.execute(HttpProtocolChain.java:79)
    at com.sun.grizzly.ProtocolChainContextTask.doCall(ProtocolChainContextTask.java:54)
    at com.sun.grizzly.SelectionKeyContextTask.call(SelectionKeyContextTask.java:59)
    at com.sun.grizzly.ContextTask.run(ContextTask.java:71)
    at com.sun.grizzly.util.AbstractThreadPool$Worker.doWork(AbstractThreadPool.java:532)
    at com.sun.grizzly.util.AbstractThreadPool$Worker.run(AbstractThreadPool.java:513)
    at java.lang.Thread.run(Thread.java:722)
Caused by: com.mysql.jdbc.exceptions.jdbc4.MySQLIntegrityConstraintViolationException: Cannot add or update a child row: a foreign key constraint fails (`isetdb`.`classe_has_etudiant`, CONSTRAINT `classe_has_etudiant_ibfk_1` FOREIGN KEY (`Classe_id`) REFERENCES `classe` (`id`) ON DELETE CASCADE ON UPDATE CASCADE)
    at sun.reflect.NativeConstructorAccessorImpl.newInstance0(Native Method)
    at sun.reflect.NativeConstructorAccessorImpl.newInstance(NativeConstructorAccessorImpl.java:57)
    at sun.reflect.DelegatingConstructorAccessorImpl.newInstance(DelegatingConstructorAccessorImpl.java:45)
    at java.lang.reflect.Constructor.newInstance(Constructor.java:525)
    at com.mysql.jdbc.Util.handleNewInstance(Util.java:409)
    at com.mysql.jdbc.Util.getInstance(Util.java:384)
    at com.mysql.jdbc.SQLError.createSQLException(SQLError.java:1041)
    at com.mysql.jdbc.MysqlIO.checkErrorPacket(MysqlIO.java:3566)
    at com.mysql.jdbc.MysqlIO.checkErrorPacket(MysqlIO.java:3498)
    at com.mysql.jdbc.MysqlIO.sendCommand(MysqlIO.java:1959)
    at com.mysql.jdbc.MysqlIO.sqlQueryDirect(MysqlIO.java:2113)
    at com.mysql.jdbc.ConnectionImpl.execSQL(ConnectionImpl.java:2568)
    at com.mysql.jdbc.PreparedStatement.executeInternal(PreparedStatement.java:2113)
    at com.mysql.jdbc.PreparedStatement.executeUpdate(PreparedStatement.java:2409)
    at com.mysql.jdbc.PreparedStatement.executeUpdate(PreparedStatement.java:2327)
    at com.mysql.jdbc.PreparedStatement.executeUpdate(PreparedStatement.java:2312)
    at org.eclipse.persistence.internal.databaseaccess.DatabaseAccessor.executeDirectNoSelect(DatabaseAccessor.java:831)
    ... 87 more 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-10T18:41:59.743

您的数据库架构表明这`Classe_id`是一个外键。

但是在保存类时，您正在分配一个新的主键，该主键基本上将`classeid`and`etudiantid`设置为零，并且在保存记录时没有匹配 id 的记录。

当前实施：

```
current.setClasseHasEtudiantPK(new dossierEtudiants.entities.ClasseHasEtudiantPK()); 
```

相反，您应该设置要在它们之间进行映射的 Class 的 id 和 Student 的 id。

从 xhtml 来看，我认为在您的托管 bean 中，您将拥有类似的东西

`selected.classe`其中包含选定的类并`selected.etudiant`包含选定的类，因此您的代码应如下所示：

```
ClasseHasEtudiantPK classeHasEtudiantPK = new dossierEtudiants.entities.ClasseHasEtudiantPK(selected.classe.classeid, selected.etudiant.etudiantid);
//Note depending upon your code the above two values selected.classe.classeid and selected.etudiant.etudinatid may change, so set according to your code.
current.setClasseHasEtudiantPK(classeHasEtudiantPK); 
```

# javascript - 带有文本和图像的工具提示（javascript / css / html）

> ID：10971214
> 
> 赞同：0
> 
> 时间：2012-06-10T18:25:22.777
> 
> 标签：javascript, html, css

我想将文本和图像组合在一组工具提示中，因为文本放置在每个工具提示框中的图像旁边。任何想法都将不胜感激。提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-10T18:40:50.083

The easiest would probably be to use jQuery and a tooltip plugin like [Simpletip](http://craigsworks.com/projects/simpletip/) but there are [plenty of others](http://www.1stwebdesigner.com/css/stylish-jquery-tooltip-plugins-webdesign/http://craigsworks.com/projects/simpletip/). There's other libraries too that don't require jQuery, like Skinnytip, etc.

# r - 如何在嵌套函数中传递对象？

> ID：10971217
> 
> 赞同：7
> 
> 时间：2012-06-10T18:25:34.463
> 
> 标签：r, save, overriding, ellipsis

我试图`save()`在 R 中覆盖，以便在保存对象之前创建任何丢失的目录。我无法使用省略号方法将对象通过一个函数传递给另一个函数。

我的例子：

```
save <- function(...,file){ #Overridden save()
  target.dir <- dirname(file) #Extract the target directory
  if(!file.exists(target.dir)) {
      #Create the target directory if it doesn't exist.
      dir.create(target.dir,showWarnings=T,recursive=T)
  }
  base::save(...,file=file.path(target.dir,basename(file)))
}

fun1 <- function(obj) {
  obj1 <- obj + 1
  save(obj1,file="~/test/obj.RData")
}

fun1(obj = 1) 
```

上面的代码导致这个错误：

> ```
> Error in base::save(..., file = file.path(target.dir, basename(file))) : 
> object ‘obj1’ not found 
> ```

我意识到问题在于我的自定义 save() 函数中不存在对象“obj1”，但我还没有弄清楚如何将它从 fun1 传递到 base::save。

我试过了：

```
base::save(parent.frame()$...,file=file.path(target.dir,basename(file))) 
```

和：

```
base::save(list=list(...),file=file.path(target.dir,basename(file))) 
```

没有成功。

有什么建议么？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-10T18:48:26.343

您需要将父环境指定为 'base::save' ：

```
save <- function(...,file){ #Overridden save()
  target.dir <- dirname(file) #Extract the target directory
  if(!file.exists(target.dir)) {
    #Create the target directory if it doesn't exist.
    dir.create(target.dir,showWarnings=T,recursive=T)
  }
  base::save(...,file=file.path(target.dir,basename(file)),envir=parent.frame())
} 
```

注意添加到 base::save 调用的参数。

```
fun1 <- function(obj) {
  obj1 <- obj + 1
  save(obj1,file="~/test/obj.RData")
} 
```

此外，使用 '=' 指定参数名称：

```
fun1(obj = 1) 
```

# facebook-access-token - 如何处理来自服务器端的过期令牌

> ID：10971218
> 
> 赞同：0
> 
> 时间：2012-06-10T18:25:36.717
> 
> 标签：facebook-access-token

我不得不承认在服务器端更新过期令牌的过程，因为 FB 用户已注销，这让我感到困惑。[如本页所示](https://developers.facebook.com/blog/post/2011/05/13/how-to--handle-expired-access-tokens/)，处理过期令牌的解决方案似乎仅在用户正在查看可能提示所述用户重新授权应用程序的服务器页面时才有效（JS location.href 重定向到 FB 对话 URL）。

如果服务器端应用程序由于一些需要一些时间的处理而保存了访问令牌怎么办？如果服务器想在几个小时/几天后使用短期或长期令牌将某些内容发布到用户的墙上，但用户已经退出 Facebook - 那会怎样？当然，由于用户的注销状态，请求将失败，但这在我看来也意味着服务器在用户重新登录 Facebook 之前将无法有效地发布到用户的墙上（并且该应用恰好尝试在正确的时间再次发布）。

我在这里还是遗漏了一些明显的东西？阻止基于服务器的应用程序发布到预授权用户的墙上似乎是一个疯狂的场景，因为所述用户已经注销（我相信很多很多用户都会定期这样做）。为什么注销==取消授权访问令牌？并且，如果用户重新登录，现有的访问令牌是否会再次生效，或者是否需要一个全新的令牌（假设我们已经获得了 60 天的令牌）？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-10T18:32:15.087

> 为什么注销==取消授权访问令牌？

它没有。长期访问令牌不会因为用户退出 Facebook 而变得无效！

因此，获得一个有效期为 60 天的长期证书——你可以在需要令牌的几天后去发帖或做任何事情。如果 60 天结束后用户没有与您的应用互动，那么您必须让用户回到您的应用以获取新令牌。

# git - git add * 和 git add . 有什么区别，如果有的话？

> ID：10971221
> 
> 赞同：13
> 
> 时间：2012-06-10T18:26:03.360
> 
> 标签：git, git-add

[git animals](http://git-animals.tumblr.com/post/24638261758/git-init-git-add-git-commit-a-m-initial)有这一系列命令：

```
git init
git add *
git commit -a -m ‘initial commit and release!’ 
```

`git add *`与`git add .`（我通常做的）相比，它们的作用是什么？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-06-10T18:33:26.710

`git add *`*将添加作为shell*扩展结果的所有路径，`*`而`git add .`将告诉 git 添加当前目录。

`git add *`不会添加以 a 开头的路径，`.`因为 shell 扩展`*`将这些路径视为“隐藏”路径。

`git add *`如果任何扩展路径当前被 git 忽略，也会失败，因为如果您明确指定忽略的路径而不传递`-f`(force) 标志以表明您确实想要添加忽略的路径，git 会认为这是一个错误。

如果您让 git 扩展 glob ( `git add '*'`)，它将添加“隐藏”文件并跳过被忽略的文件。它的工作原理与`git add .`这种情况相同。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-10T18:33:01.283

默认情况下，将目录传递给`git add`将递归地添加其子目录和文件。

通配符`*`将由您的 shell 扩展为当前目录下的文件名。

而且你知道，在 Unix 中`.`只指当前目录，所以这两个命令是等价的。虽然`*`由shell`.`处理并由git处理，但它们做同样的事情。

# c# - C# + MySQL + ExecuteNonQuery 在 UPDATE 上返回“1”，但在 DB 中没有变化

> ID：10971226
> 
> 赞同：2
> 
> 时间：2012-06-10T18:26:26.747
> 
> 标签：c#, mysql

我有一个问题，即使经过数小时的调试，我也显然无法找到解决方案。

我有一个简单的 SQL 命令，我想用某个值更新一行（该值是约 5mb 的文本），在执行 SQL 命令后，C# 代码端的“ExecuteNonQuery()”返回“1”也不例外，但更改有时会反映在数据库行中，有时不会。

我尝试调试以查看将替换旧值的值是否正确并且它们是正确的。我正在使用 MySQL 5.5.11。

*   可能是 MySQL 设置或其他什么？

对这个问题失去理智，如果您有任何想法，将不胜感激。

编辑，包括代码：

代码很简单：

```
cmd.CommandText = "UPDATE user SET data = @data WHERE id = @id"; 
```

然后我将参数添加到 SQL 查询的 DBCommand 对象。“数据”大约是 5mb 大。

即使更改未反映在数据库中，此命令也始终返回“1”（有时有效，有时无效）：

```
cmd.ExecuteNonQuery(); 
```

提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-10T21:43:14.513

不知道mysql提供者有没有使用autocommit？如果不是，那么您必须在 Transaction 对象上调用 commit，您可以在连接对象上使用 BeginTransaction 获得。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-10T18:45:30.617

[http://msdn.microsoft.com/en-us/library/system.data.sqlclient.sqlcommand.parameters.aspx](http://msdn.microsoft.com/en-us/library/system.data.sqlclient.sqlcommand.parameters.aspx)

用于 SQL Server 的 Microsoft .NET Framework 数据提供程序不支持问号 (?) 占位符用于将参数传递给 SQL 语句或由`CommandType.Text`. 在这种情况下，必须使用命名参数。

例如：

```
SELECT * FROM Customers WHERE CustomerID = @CustomerID 
```

**编辑：** 刚刚注意到这是 MySQL，虽然我找不到任何类似的东西，但我还是建议你使用命名参数

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-09-21T00:14:33.637

我遇到了这个问题，它与自动提交有关。

问题：在应用程序生命周期的早期自动提交被应用程序中的另一个进程设置为 0，并且失败。关闭自动提交的连接然后被连接池重用。

这将在不可预测的时间导致这种类型的错误。

# haskell - 如何使用未装箱的向量？

> ID：10971232
> 
> 赞同：1
> 
> 时间：2012-06-10T18:26:51.297
> 
> 标签：haskell

我正在尝试使用此处找到的 Vector 类型来实现射线数据类型：[http ://www.haskell.org/haskellwiki/Numeric_Haskell:_A_Vector_Tutorial#Importing_the_library](http://www.haskell.org/haskellwiki/Numeric_Haskell:_A_Vector_Tutorial#Importing_the_library)

Vector 只能容纳双打，所以我想使用 Vector 类型的 Unboxed 版本。

这是我要编译的代码：

```
module Main where

    import qualified Data.Vector.Unboxed as Vector

    data Ray = Ray Data.Vector.Unboxed Data.Vector.Unboxed 
```

我得到的错误是

```
Not in scope: type constructor or class `Data.Vector.Unboxed'
Failed, modules loaded: none. 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-10T18:34:56.927

该模块`Data.Vector.Unboxed`导出一个类型构造函数`Vector`，该构造函数将要存储的类型作为参数。由于您也将此模块重命名`Vector`为，因此此类型的限定名称为`Vector.Vector`. 假设您想要两个双精度向量，因此您应该像这样使用它：

```
data Ray = Ray (Vector.Vector Double) (Vector.Vector Double) 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-06-10T18:38:01.803

通常，当您导入某些内容时，您会这样做：

```
import Data.Foo -- A module that contains "data Bar = Bar ..."

myfunction = Bar 3 2 4 -- Use Bar 
```

如您所见，您可以`Data.Foo`直接访问模块中的所有内容，就像您在同一个模块中编写代码一样。

您可以改为导入带有限定的东西，这意味着您必须在每次访问时指定完整的模块“路径”到您所指的东西：

```
import qualified Data.Foo -- A module that contains "data Bar = Bar ..."

myfunction = Data.Foo.Bar 3 2 4 -- Use Bar 
```

在这里，您必须指定要访问的数据类型的完整“路径”，因为该模块已作为合格导入。

还有另一种方法可以导入有资格的东西；您可以为模块“路径”指定别名，如下所示：

```
import qualified Data.Foo as Foo -- A module that contains "data Bar = Bar ..."

myfunction = Foo.Bar 3 2 4 -- Use Bar 
```

我们已将该`Data.Foo`部分重命名为 simple `Foo`。这样，我们可以`Foo.Bar`在引用数据构造函数的时候编写。

`Data.Vector.Unboxed`您使用别名导入了模块`Vector`。这意味着当您要访问`Vector`数据类型时，您必须使用`Vector.Vector`. 我建议您改为导入这样的向量：

```
import Data.Vector.Unboxed (Vector)
import qualified Data.Vector.Unboxed as Vector 
```

这样，你`Vector`直接导入类型，这样你就可以在没有任何模块限定符的情况下访问它，但是当你想使用`Vector`函数时，你需要添加`Vector`前缀（例如`Vector.null ...`）。

# php - 从字符串中删除空格和特殊字符

> ID：10971233
> 
> 赞同：10
> 
> 时间：2012-06-10T18:26:53.180
> 
> 标签：php

我正在使用此代码保存上传的文件，但问题是它允许文件名称带有特殊字符和空格。例如它允许

```
hi how are you 
```

但我不想允许任何空间、特殊字符等。这是我的代码。我尝试在 uri 中使用 preg_replace，但之后我尝试上传文件但没有上传任何文件。

```
function save_file($file) {
    $allowed_ext = array('jpg','png','gif','jpeg');
    $ext = $file['name'];
    $ext = strtolower($ext);

    if (in_array($ext, $allowed_ext)) {
        die('Sorry, the file type is incorrect:'.$file['name']);
    }

    $fname = date("H_i",time()).'_'.get_rand(5);
    $dir = date("Ym",time());
    $folder = 'uploads/userfiles/'.$dir;
    $uri = $folder.'/'.$fname.'.'.$ext;

    if (!is_dir($folder))
        mkdir($folder, 0777);

    if (copy($file['tmp_name'],$uri))
        return $uri;
    else {
        return false;
    }
} 
```

* * *

## 回答 #1

> 赞同：34
> 
> 时间：2012-06-10T18:33:27.733

要从字符串中去除非字母，您可以使用以下正则表达式

```
$input = preg_replace("/[^a-zA-Z]+/", "", $input); 
```

# android - 对 Android 中 NetworkManager 类给出的信息的说明

> ID：10971235
> 
> 赞同：0
> 
> 时间：2012-06-10T18:27:23.293
> 
> 标签：android, geolocation, triangulation, location-based-service

我想在没有互联网连接的情况下检测 Android 移动设备的位置。唯一的选择是，要使用附近蜂窝塔的信息，我想知道 TelephonyManager 类是否可以用于此（假设 Cells 的纬度和经度位置在数据库中可用）？

我知道 TelephonyManager.getNeighbouringCellInfo() 提供了一个 NeighbouringCellInfo 列表。

我的问题是，这个方法返回多少 NeighbouringCellInfo？并且可以使用此信息进行三角测量吗？

如果不能，我可以使用 SIM Toolkit 获取所需信息并执行三角测量吗？

请随时提供任何相关输入，因为这对我的程序非常有用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-10T19:02:29.970

首先，你当然不能做*三角测量*。三角测量依赖于角度。我认为你的意思是*三边测量*。相比之下，三边测量依赖于距离。

要根据距离进行三边测量，您需要一个具有具体坐标的数据库，以及与这些坐标中的三个或更多坐标（在本例中为手机信号塔）的距离。但是，如果您查看 的文档`NeighboringCellInfo`，您会发现您*没有*获得远距离读数。你得到一个RSSI。RSSI 和距离之间的联系*不是*线性的，并且不是很好理解或很准确。它可能会因天线方向、天气条件等而有很大差异......因此，认为您将能够简单地选择三个小区并使用它们的相对 RSSI 来对用户进行三边测量，最终将证明非常容易出错（即，几乎大部分时间都是完全错误的）。除了这一切，我不相信`getNeighboringCellInfo`[总能保证返回三个或更多的塔（你可以在这里](https://github.com/android/platform_frameworks_base/tree/master/telephony/java/com/android/internal/telephony)查看低级代码的实现）。因此，我的判断是，你能做的最好的事情就是找出哪个塔的强度最高，然后说你有点“接近”它，我真的怀疑你能做得更好。

相反，我相信你已经想到了一个更好的选择，那就是使用 GPS，但我猜你有理由不想这样做。

我不确定您是否也知道，但`TelephonyManager`有一个实现也可以为您提供位置更新：[here。](http://developer.android.com/reference/android/telephony/CellLocation.html)

（顺便说一句，我曾经做过一个类似的三边测量项目，根据我的经验，没有高精度的接收器和测量，它就是行不通的。我也有原始的 RSSI 数据，即使在中短距离数据中也存在误差是非常不可接受的。）

# performance - 智能纯功能集

> ID：10971237
> 
> 赞同：11
> 
> 时间：2012-06-10T18:27:43.053
> 
> 标签：performance, haskell, data-structures, f#, immutability

由并集、交集和差组成的集合计算通常可以用许多不同的方式表示。是否有任何理论或具体实现试图最小化达到给定答案所需的计算量？

例如，当我试图在模拟无定形材料中将原子分解为相邻壳时，我第一次遇到了这个的实际应用，其中第一个壳是某个给定原始原子的直接邻居，第二个壳是那些相邻的原子第一个外壳不在第一个外壳或在它之前的外壳中：

```
nth 0 = singleton i
nth 1 = neighbors i
nth n = reduce union (map neighbors (nth(n-1))) - nth(n-1) - nth(n-2) 
```

有很多不同的方法可以解决这个问题。您可以在组成结果的同时逐步测试每个集合中的成员资格，或者您可以计算三个相邻壳的并集并使用交集删除前两个壳，留下最外层的壳。在实践中，需要构建大型中间集的解决方案速度较慢。

据推测，智能集实现可以组成要评估的表达式，然后在评估它之前对其进行优化（例如，减少中间集的大小）以提高性能。是否存在这样的集合实现？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-10T20:03:38.873

[您的问题立即让我想起了本文](http://citeseer.ist.psu.edu/viewdoc/summary?doi=10.1.1.104.7401)中描述的 Haskell 的流融合。一般原则可以很容易地总结出来：你不是存储一个列表，而是存储一种构建列表的方法。然后列表转换函数直接在列表生成器上操作，这意味着所有操作都融合到一个数据生成中，而无需任何中间结构。然后，当您完成组合操作时，您将运行生成器并生成数据。

所以我认为你的问题的答案是，如果你想要一些类似的智能机制来融合计算并消除中间数据结构，你需要找到一种方法将集合转换为“共同结构”（这就是论文调用它）生成一个集合并直接对其进行操作，然后在完成后实际生成集合。

我认为这个概念背后有一个非常深刻的理论，论文暗示但从未阐明，如果这里的其他人知道它是什么，请告诉我，因为这与我正在做的其他事情也非常相关！

# php - 将“输出”存储到“输出”

> ID：10971243
> 
> 赞同：0
> 
> 时间：2012-06-10T18:28:07.820
> 
> 标签：php

```
echo '<table border=\'0\' cellpadding=\'0\' cellspacing=\'0\'>';

for ($y=$startY;$y<$startY+$fieldHeight;$y++) {
    echo '<tr>';
    for ($x=$startX;$x<$startX+$fieldWidth;$x++) {
        //echo '(' . $x . ',' . $y . ')';
        echo '<td><img src=\'tiles/' . (isset($map[$x][$y]['terrain']) ? $map[$x][$y]['terrain'] : 'water') . '.png\' alt=\'\' /></td>';
    }
    echo '</tr>';
}

echo '</table>'; 
```

此数据将通过 jQuery 调用进行更新。我只是在寻找一种简单的方法来将上面的输出存储在一个变量中。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-10T18:31:09.847

```
ob_start();
// echo what you want
$content = ob_get_contents();
ob_end_clean(); 
```

[ob_get_contents()](http://it2.php.net/manual/en/function.ob-get-contents.php)的参考；

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-10T18:31:23.040

输出缓冲：

```
ob_start();
// your code
$data = ob_end_clean(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-10T18:30:57.210

我相信几天前我回答了一个非常相似的问题。为什么不把所有东西都分配给一个变量然后`echo`呢？

```
$output = '<table border=\'0\' cellpadding=\'0\' cellspacing=\'0\'>';

for ($y=$startY;$y<$startY+$fieldHeight;$y++) {
    $output .= '<tr>';
    for ($x=$startX;$x<$startX+$fieldWidth;$x++) {
        //echo '(' . $x . ',' . $y . ')';
        $output .= '<td><img src=\'tiles/' . (isset($map[$x][$y]['terrain']) ? $map[$x][$y]['terrain'] : 'water') . '.png\' alt=\'\' /></td>';
    }
    $output .= '</tr>';
}

$output .= '</table>';

echo $output; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-10T18:31:08.787

不要使用 echo，而是使用字符串连接或输出缓冲系统：

例如

```
$var = '<table ....';
for (...) {
   $var .= '<td> ....';
}
$var .= '</table>';
     ^^--- string concatenation shorthand, equivalent to $var = $var . '<table...'; 
```

或者

```
ob_start();
...your code here...
$var = ob_end_clean(); 
```

# c# - 当我构建 Silverlight 项目时，XAML 文件会发生什么情况？

> ID：10971249
> 
> 赞同：4
> 
> 时间：2012-06-10T18:28:40.667
> 
> 标签：c#, .net, silverlight, xaml, build

您能否从编译的角度解释 XAML 文件的生命周期？

当我构建 Silverlight 项目时，XAML 文件在构建过程中会发生什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-10T18:52:03.503

Jon Skeet 关于中间 .g.cs 文件的答案（*现已删除，但下面引用的那部分内容*）部分正确，但没有完整回答您的实际问题：

> JS：构建过程的早期部分在 obj 目录中创建一个 Foo.igcs 文件，其中包含一个部分类，并以正常方式与您自己的 .cs 文件一起编译。

.g.cs 文件包含在`InitialiseComponent()`. 例如，这是来自基本的 MainPage.g.cs：

```
public void InitializeComponent() {
    ...
    System.Windows.Application.LoadComponent(this, new System.Uri("/SilverlightApp1;component/MainPage.xaml", System.UriKind.Relative));
    this.LayoutRoot = ((System.Windows.Controls.Grid)(this.FindName("LayoutRoot")));
} 
```

这有点像为 WinForms 控件/对话框生成的设计器文件，但发生在编译时而不是设计时。

*   编译器解析以验证 XAML 并确定需要生成哪些命名元素（到部分类中）。
*   XAML 文件本身在构建期间作为资源存储在 DLL 中（在上面的示例中，它存储为`"/SilverlightApp1;component/MainPage.xaml"`）
*   注意：仅对于 WPF，嵌入的 XAML 文件实际上被转换为内存效率更高的二进制版本，称为 BAML 文件。

回答您对 Jon Skeet 的评论（现已删除），您的提问部分正确：

> 那么解析整个 XAML 文档——所有元素、属性等——不是 WPF 或 SL 构建的一部分吗？我对么？

除了上面提到的解析之外，对于验证和命名元素，其余的解析（元素树和模板等）实际上*是在运行*时`LoadComponent()`有效地反序列化 XAML 并创建您创作的元素的可视化树时完成的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-10T18:39:29.093

当您构建 Silverlight 项目时，会创建一个 .xap 文件，这基本上只是一个带有另一个扩展名的 .zip 文件，其中包含一个 AppManifest.XAML 和您的项目在一个 DLL 文件中（连同 DLL:s 用于其他依赖项）。

如果您通过 dotPeek 或 Reflector 运行 DLL，您将看到您创建的 XAML 文件在 dll 的资源中完好无损。

# android - 在 xml 文件中更改坐标按钮和编辑文本

> ID：10971250
> 
> 赞同：0
> 
> 时间：2012-06-10T18:29:13.247
> 
> 标签：android, xml, android-layout, android-widget

我是 XML 新手，正在尝试开发一个 android XML 文件。这里的问题是我无法从其他地方移动按钮。或 edittext 都不是，尽管我尝试过`android:layout_x="50dp"`or `android:layout_y="50dp"`。如何将此按钮和编辑文本移动到其他地方？

```
 <?xml version="1.0" encoding="utf-8"?>
    <LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
        android:layout_width="match_parent"
        android:layout_height="match_parent"
        android:orientation="vertical" 
        android:background="@drawable/yeni">

        <EditText
            android:id="@+id/editText1"
            android:layout_width="match_parent"
            android:layout_height="wrap_content"
            android:ems="10" android:text="">

        </EditText>

        <Button
            android:id="@+id/button1"
            android:layout_width="100dp"

            android:layout_height="wrap_content"
            android:layout_x="50dp"
             android:layout_y="50dp"
            android:text="YAP" />

    </LinearLayout> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-18T20:08:55.243

您应该使用`android:gravity="<someOption>"`and`android:layout_gravity="<someOption>"`对齐小部件。

但对于更复杂的控制，我建议您使用`<RelativeLayout>`它提供更复杂的小部件对齐工作。

# c# - 动态添加用户控件到caliburm micro

> ID：10971253
> 
> 赞同：0
> 
> 时间：2012-06-10T18:29:32.230
> 
> 标签：c#, wpf, user-controls, caliburn.micro

我正在将 Caliburn Micro 与 WPF 一起使用。我想创建一个应用程序，左侧有一个菜单，右侧有一个网格。单击菜单项时，右侧的网格将变为另一个视图。另一个视图将位于单独的文件中。

主窗口视图：

```
<UserControl x:Class="CMDemo.Views.MainWindowView"
         xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
         xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
         xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006" 
         xmlns:d="http://schemas.microsoft.com/expression/blend/2008" 
         mc:Ignorable="d" 
         d:DesignHeight="300" d:DesignWidth="300">
<Grid>
    <Grid.ColumnDefinitions>
        <ColumnDefinition Width="90*" />
        <ColumnDefinition Width="210*" />
    </Grid.ColumnDefinitions>
    <StackPanel Name="LeftMenu">
        <Button Name="ChangeDisplay" Content="Click Me"></Button>
        <TextBlock x:Name="MyString"></TextBlock>
    </StackPanel>
    <Grid Grid.Column="1" x:Name="MainGridContent" />
</Grid> 
```

主窗口视图模型：

```
public class MainWindowViewModel : PropertyChangedBase
{

    private UserControl mainGridContent;
    private string myString;

    public UserControl MainGridContent 
    {
        get { return this.mainGridContent; }
        set
        {
            this.mainGridContent = value;
            NotifyOfPropertyChange(() => this.MainGridContent);
        }   
    }

    public string MyString
    {
        get { return this.myString; }
        set
        {
            this.myString = value;
            NotifyOfPropertyChange(() => this.MyString);
        }
    }

    public void ChangeDisplay()
    {
        this.MainGridContent = new ChangeDisplayView();
        this.MyString = "Testing....";
    }

} 
```

更改显示视图模型：

```
public class changeDisplayViewModel: PropertyChangedBase
{
} 
```

更改显示视图：

```
<UserControl x:Class="CMDemo.Views.changeDisplayView"
         xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
         xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
         xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006" 
         xmlns:d="http://schemas.microsoft.com/expression/blend/2008" 
         mc:Ignorable="d" 
         d:DesignHeight="300" d:DesignWidth="300">
<Grid>
    <TextBox content="Hello Caliburn Micro">
</Grid> 
```

当我单击“单击我”按钮时，TextBlock“MyString”被更新并显示，但用户控件没有。我究竟做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-10T22:02:46.340

尝试将 MainGridContent 更改为 changeDisplayViewModel 而不是视图本身。

# xml-parsing - 使用 hasMany 关联、Sencha、ExtJS 读取嵌套 XML 以建模

> ID：10971255
> 
> 赞同：1
> 
> 时间：2012-06-10T18:29:44.013
> 
> 标签：xml-parsing, extjs4, sencha-touch-2, model-associations

我正在尝试解析以下 xml（在我的本地机器上托管之后）并将其加载到存储中。

```
<?xml version="1.0" encoding="UTF-8"?>
<users>
    <user>
       <id>2</id>
       <name>shameel</name>
       <post>
         <user_id>5</user_id>
         <title>programmer</title>
         <body>nothing</body>
       </post>
       <post>
         <user_id>6</user_id>
         <title>newpost</title>
         <body>congrats</body>
       </post>
    </user> 
<user>
       <id>3</id>
       <name>abdulls</name>
       <post>
         <user_id>5</user_id>
         <title>programmer1</title>
         <body>nothing1</body>
       </post>
       <post>
         <user_id>6</user_id>
         <title>newpost1</title>
         <body>congrats1</body>
       </post>
       <post>
         <user_id>7</user_id>
         <title>newpost1</title>
         <body>congrats1</body>
       </post>
    </user>       
</users> 
```

使用的模型如下：

```
Ext.define("SectionModel", {
            extend : 'Ext.data.Model',
            config : {
                fields : [{
                            name : 'section',
                            type : 'string',
                            mapping : '@section'
                        }],
                proxy : {
                    type : 'ajax', 

                     url : 'http://localhost:8080/sample1.xml', //sample1.xml is the file

                    reader : {
                        type : 'xml',
                        rootProperty : 'configs',
                        record : 'navigation'
                    }
                },

                hasMany : [{
                    model : 'ArticlesModel',
                    name : 'articlesModel',
                         associationKey:'sections'

                    }]

            }
        });

Ext.define("ArticlesModel", {
            extend : 'Ext.data.Model',
            config : {
                fields : [{
                        name : 'title',
                        type : 'string',
                        mapping : '@title'
                    }, {
                        name : 'value',
                        type : 'string',
                        mapping : '@value'
                    }],

                    proxy : {
                    type : 'ajax',
                                        url : 'http://localhost:8080/sample1.xml', //sample1.xml is the file
                    reader : {
                        type : 'xml',
                        rootProperty : 'navigation',
                        record : 'section'
                    }
                },

                belongsTo : 'SectionModel'

            }
        }); 
```

商店使用如下：

```
Ext.define("SectionStore", {
            extend : 'Ext.data.Store',

            config : {
                model : 'SectionModel',
                autoLoad : 'true'

            }
        }); 
```

我尝试访问以下内容：

```
var store = Ext.data.StoreManager.get('SectionStore');
        if (!store) {
            console.log("Store not found");
            return;
        }

store.load(function(records, operation, success) {
                    for (var i = 0; i < store.getCount(); i++) {
                        var section_title = store.getAt(i).get('section');
                                                var subsection_val = store.getAt(i).articlesModel().get('title');//this function fails saying no "get" function for the object
}
}); 
```

在这里我可以获得section_title。但无法获取 subsection_val。我已经用商店中的代理尝试过这个，但无法修复它。任何人都可以帮忙。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-18T20:19:40.333

我在解析嵌套的 XML 元素时遇到了类似的问题。不幸的是，在对 XML Parsing 代码进行了多次修改之后，我最终放弃了。（最终编写了一个到我们的 Web 服务的传递，将响应转换为 JSON）

你可以在这里阅读我的（错误）冒险：

[http://www.sencha.com/forum/showthread.php?189537-Sencha-Touch-2.0-nested-XML-parsing](http://www.sencha.com/forum/showthread.php?189537-Sencha-Touch-2.0-nested-XML-parsing)

# javascript - 使用 GetElementByID 提交 Javascript - 在新窗口中打开

> ID：10971260
> 
> 赞同：1
> 
> 时间：2012-06-10T18:30:29.427
> 
> 标签：javascript

我有一个名为“review.asp”的页面，其中包含一个从数据库生成记录列表的表单。如果用户想查看有关特定记录的更多信息，他们只需单击“prjName”字段，这是一个超链接。然后，页面将提交并显示有关记录的信息。目前，这在同一窗口中打开。我希望它打开一个新窗口。

此外，我不想只在 HTML 的表单部分中放置一个 target = _blank，因为此页面会进行多次提交，并且我不希望它们全部在新窗口中打开 - 只是下面的这个。所以，我希望在 Javascript 中有一个解决方案？

提前致谢！

我的 HTML：

```
<form name="frmPrjReview" id="frmPrjReview" method="post">
<p><a href="javascript:selectRecID('<%= RS("recID")%>')";><%=RS("prjName")%></a></p> 
```

我当前的 Javascript：

```
function selectRecID(recID)
{
    //Set the value of the hidden text field = to the record ID in the table.
    document.getElementById("txtRecID").value = recID;

    var submitSearch = document.getElementById("frmPrjReview");

    submitSearch.action = "review.asp"; 
    submitSearch.submit();
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-10T18:38:40.080

在需要时以编程方式设置目标：

```
var submitSearch = document.getElementById("frmPrjReview");
...
submitSearch.setAttribute("target", "_blank");
submitSearch.submit();
submitSearch.removeAttribute("target") 
```

编辑：添加删除。

# lucene.net - lucene.net 支持的语言

> ID：10971261
> 
> 赞同：4
> 
> 时间：2012-06-10T18:30:36.593
> 
> 标签：lucene.net

- Lucene.net 支持哪些所有语言？

- 例如。中文、俄文、日文、阿拉伯文、法文、德文等。

- 如果没有，有没有办法索引其他语言？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-10T18:47:42.777

**Lucene is not limited to English, nor any other language.** To index text properly, you need to use an Analyzer appropriate for the language of the text you are indexing. Lucene's default Analyzers work well for English. There are a number of other Analyzers in Lucene Sandbox, including those for Chinese, Japanese, and Korean.

Here is a list of analyzer which you can integrated with your Lucene.NET: [https://svn.apache.org/repos/asf/incubator/lucene.net/trunk/src/contrib/Analyzers/](https://svn.apache.org/repos/asf/incubator/lucene.net/trunk/src/contrib/Analyzers/)

As you can see above lots of language are already included in the analyzers and if not included, go ahead and create it because if it is not listed only means, no one tried it yet, however it does not mean it is not supported.

Also read this SO discussion on [Indexing multi-lingual content with Lucene.net](https://stackoverflow.com/questions/553404/indexing-multi-lingual-content-with-lucene-net)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-12-19T09:51:29.883

这是最新版本。 [https://lucene.apache.org/core/8_3_1/analyzers-common/index.html](https://lucene.apache.org/core/8_3_1/analyzers-common/index.html)

谷歌最新版本的 Lucene 并在搜索时更改最新版本链接中的版本号。

# php - php 使用表单重定向

> ID：10971268
> 
> 赞同：1
> 
> 时间：2012-06-10T18:31:21.813
> 
> 标签：php, html, forms

我查看堆栈以寻找没有成功的答案。我想用单选按钮制作一个表格。根据选中的单选按钮，按下提交按钮将引导您到不同的页面。现在我使用 php 和 get 选项。然而，我能做的最好的事情是根据获取信息制作动态页面。任何帮助都会很棒

谢谢

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-10T18:43:02.653

在您的 PHP 中，您可以`$_GET['radio_option']`使用函数检查并基于值重定向到其他页面`header`，如下所示：

```
switch($_GET['radio_option']) {
case 'val1':
    header('location: page1.php');
    exit;
case 'val2':
    header('location: page2.php');
    exit;
case 'val3':
    header('location: page3.php');
    exit;
}

//here handle everything else - although normally you shouldn't get here 
```

另一种选择是`action`在提交表单之前使用 javascript 设置表单的属性。例如：

```
$(document).ready(function() {
    $("input:radio[name=your_radio_naem]").click(function() {
        var value = $(this).val();
        var target = "main.php";

        if(value == 'val1')
            target = "page1.php";
        else if(value == 'val2')
            target = "page2.php";
        else if(value == 'val3')
            target = "page3.php";

        $('#myform').attr('action', target);
    });
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-11T16:20:53.727

另一种方法是为每个单选按钮设置一个重定向页面的值。

```
$page=$_GET['radio_buttons'];
header('location: $page'); 
```

# python - 让函数在 pygame 中执行之前等待一定的时间

> ID：10971278
> 
> 赞同：0
> 
> 时间：2012-06-10T18:32:37.570
> 
> 标签：python, pygame

我知道以前有人问过这个问题，但我找不到 pygame 的问题。我有一个硬币加电装置，每次捡起它都会使我的积分增加 5000。然而，当我拿起硬币时，另一个硬币出现了。我不希望它再出现 30 秒。如何在不暂停整个程序的情况下实现这一点？

```
if coin.collidepoint(x,y):
    points+=5000
    coin=makecoin() 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-11T00:04:21.650

由于您使用的是[pygame](http://www.pygame.org/docs/)，因此您已经内置了函数。

[pygame.time.get_ticks()](http://www.pygame.org/docs/ref/time.html#pygame.time.get_ticks)以毫秒为单位获取时间 [pygame.time.set_timer()](http://www.pygame.org/docs/ref/time.html#pygame.time.set_timer)设置重复计时器。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-10T18:45:41.333

你的游戏有一个主循环。当你拿起硬币时，你应该节省你拿起它并设置的时间`coin = None`，然后在那个主循环中你应该有如下内容：

```
if coin is None and current_time > coin_picked_up + 30:
    coin = makecoin() 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-10T18:46:51.583

我会推荐一个计时器。应该就这么简单。

```
from threading import Timer

if coin.collidepoint(x,y):
    points+=5000
    t = Timer(30.0, makecoin)
    t.start() 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-10T18:53:27.677

看一下[sched](http://docs.python.org/library/sched.html)模块。您可以使用它来推迟新硬币的创建。

假设您有一个名为 s 的调度程序，定义如下（就像 Python 手册中的示例一样）...

```
import sched, time
s = sched.scheduler(time.time, time.sleep) 
```

然后你会安排你的硬币像这样创建......

```
if coin.collidepoint(x,y):
    points+=5000
    s.enter(30, 1, make_coin, ()) 
```

你会定期调用 s.run() 来运行任何应该运行的东西。除非您真的需要细粒度的计时，否则您不太可能需要在每个滴答时调用它。

# objective-c - 使用 Cocoa 在 NSComboBox 中显示文本

> ID：10971281
> 
> 赞同：0
> 
> 时间：2012-06-10T18:33:00.970
> 
> 标签：objective-c, cocoa

我正在使用以下代码向 ComboBox 添加一个对象：

```
Ploofed *uped = [Ploofed initwithImageAndURL:(NSImage *)myImage :(NSString *)returnString];
[_OldTrans addItemWithObjectValue:(id)uped];
[_OldTrans selectItemWithObjectValue:(id)uped]; 
```

但是ComboBox List中只有一个空行，如何设置添加对象的文本？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-10T19:46:41.680

来自 Apple 关于组合框的文档（组合框简介）：

当您使用标准 NSControl 方法（例如 setStringValue:、stringValue、setFloatValue: 和 floatValue）设置或检索组合框的值时，您正在设置或检索组合框文本字段的值，而不是当前选择的名单。以编程方式更改组合框的值不会更改在组合框列表中选择的内容。相反，以编程方式更改列表中选择的内容不会更改文本字段的值。如果您希望文本字段值和列表选择匹配，则需要单独设置它们。

例如，假设您要将组合框的列表和文本字段初始化为列表的第三项。此代码对维护内部项目列表的组合框执行此操作：

```
[myComboBox selectItemAtIndex:2]; // First item is at index 0
[myComboBox setObjectValue:[myComboBox objectValueOfSelectedItem]]; 
```

# android - 检测到由于配置更改而暂停的活动？

> ID：10971284
> 
> 赞同：0
> 
> 时间：2012-06-10T18:33:24.003
> 
> 标签：android

我有一个播放和录制音频的应用程序抛出一个后台服务。当调用活动 onPause 方法时，我试图暂停该过程。但我不希望它在配置更改“这将调用 onPause”时暂停。任何想法如何做到这一点，而无需手动处理活动的配置更改？

谢谢，

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-10T18:39:53.817

如果您正在使用`API11`或更高版本，则具有[isChangingConfiguration](http://developer.android.com/reference/android/app/Activity.html#isChangingConfigurations%28%29)方法。

# mysql - ruby mysql错误的参数数量

> ID：10971290
> 
> 赞同：0
> 
> 时间：2012-06-10T18:34:03.383
> 
> 标签：mysql, ruby, arguments

我已经用 ruby​​ v 1.9.3p125 安装了 mysql v2.8.1。

当我尝试使用以下命令连接到 mysql 数据库时：

```
m = Mysql.new('localhost','root','','dbname') 
```

我收到以下错误消息：

```
in `initialize': wrong number of arguments(4 for 0) (ArgumentError) 
```

我已经通过检查 gem 列表以及从显示“true”的 irb 提示符发出命令 require 'mysql' 来测试是否安装了 mysql。

我还多次卸载并安装了 mysql，并尝试使用此处显示的说明进行安装：http: [//thinlight.org/2010/05/12/how-to-install-ruby-mysql-on-mac-os -x-10-6-雪豹/](http://thinlight.org/2010/05/12/how-to-install-ruby-mysql-on-mac-os-x-10-6-snow-leopard/)

有没有人有任何其他建议可以尝试？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-10T18:47:30.203

尝试改用[mysql2 gem](https://rubygems.org/gems/mysql2)的v0.3.11

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-25T13:06:52.037

我找到了解决方案。我在我的 .bash_profile 中添加了 'export DYLD_LIBRARY_PATH="/usr/local/mysql/lib:$DYLD_LIBRARY_PATH"' 并且它起作用了。– pdoak 6 月 12 日 16:49

# matrix - Mathematica 减去缺失值的矩阵

> ID：10971296
> 
> 赞同：5
> 
> 时间：2012-06-10T18:34:39.573
> 
> 标签：matrix, wolfram-mathematica, missing-data

在 Mathematica 中，我有一个缺少值的矩阵“a”，并且我有一个与“a”维度相同的矩阵“b”。我想计算 ab 但如果缺少值，我用“NA”表示，我希望它保持为“NA”。你能帮我解决这个问题吗？请注意，“a”的尺寸为 100 万 X300。

谢谢！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-10T19:03:38.393

一种方法是对结果使用替换规则，如下所示；

```
In[1]  {1, na, 3, na, 5} - {1, 2, 3, 4, 5}
Out[1] {0, -2 + na, 0, -4 + na, 0}

In[2]  {1, na, 3, na, 5} - {1, 2, 3, 4, 5}/. x_ + na -> na
Out[2] {0, na, 0, na, 0} 
```

另一种方法是定义一个`UpValue`for ，`na`这样涉及它的加法（和减法）总是会导致`na`; 像这样：

```
In[3] na /: Plus[___, na, ___] := na 
```

`UpValues`如果您要进行多次手术，这将是一种方法，一次性更换规则。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-10T21:12:56.993

您可以使用`Indeterminate`它，因为它已经具有您正在寻找的行为：

```
In[2]:= {1, na, 3, na, 5} - {1, 2, 3, 4, 5} /. na -> Indeterminate /. Indeterminate -> na

Out[2]= {0, na, 0, na, 0} 
```

就个人而言，我只是使用`Indeterminate`开头，而不是`NA`.

# performance - 使用 nginx 进行负载均衡

> ID：10971298
> 
> 赞同：2
> 
> 时间：2012-06-10T18:34:53.687
> 
> 标签：performance, web-services, nginx, load-balancing, nginx-config

如果这些服务器上的负载超过某个水平，我想停止向后端服务器提供请求。任何已经在网站上冲浪的人仍然会被路由，但新连接将被发送到静态服务器繁忙页面，直到负载下降到预定水平以下。

我可以使用 cookie 让当前客户进入，但我找不到有关如何根据自定义负载指标进行路由的信息。

谁能指出我正确的方向？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-10T23:21:24.693

Nginx 有一个用于负载均衡的[HTTP Upstream模块。](http://wiki.nginx.org/HttpUpstreamModule)`max_fails`使用和`fail_timeout`选项检查后端服务器的响应能力。当没有可用的后端时路由到备用页面是使用该`backup`选项完成的。我建议将您的负载指标转换为 Nginx 提供的选项。

假设当负载比您想要的高时，Nginx 仍然将后端视为“启动”。您可以通过调整后端服务器的最大连接数来进一步调整它。所以，也许后端服务器在负载太高之前只能处理 5 个连接，所以你调整它只允许 5 个连接。然后在前端，Nginx 会在尝试发送第六个连接时立即超时，并将该服务器标记为不可用。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-14T12:51:45.447

另一种选择是在 Nginx 之外处理这个问题。像 Nagios 这样的软件不仅可以监控负载，还可以根据它所做的监控[主动触发操作。](http://nagios.sourceforge.net/docs/nagioscore/3/en/eventhandlers.html)

您可以从模板生成 Nginx 配置，该模板具有将每个上游节点标记为开启或关闭的选项。当监视器检测到上游负载过高时，它可以根据需要从模板中重新生成 Nginx 配置，然后重新加载 Nginx。

相同想法的轻量级版本可以使用与 Nagios 服务器在同一台机器上运行的脚本来完成，并执行简单的监控以及配置文件更新。

# mysql - 设计城市、州、国家表的最佳方式是什么？

> ID：10971300
> 
> 赞同：10
> 
> 时间：2012-06-10T18:35:00.917
> 
> 标签：mysql, database, normalization

我需要帮助设计我的国家、城市、州表。我将从我的表格中提供示例数据，以便您可以更好地帮助我解决我的问题。

这是我的国家表：

```
Country
______
code   name
US     United States
SG     Singapore
GB     United Kingdom 
```

这是我的城市表：

```
City
_____
id   country   city        state
1    US        Birmingham  Alabama
2    US        Auburn      Alabama
.
.
29   GB        Cambridge   NULL
30   GB        Devon       NULL 
```

我的问题是，唯一拥有 state 字段的国家是美国。所有其他城市都有一个空值。

我对此的临时解决方案是只为美国创建一个特殊的城市表，然后所有其他国家都有另一个没有州字段的城市表。

我认为这只会使事情复杂化，因为我有两张城市表。

我该如何改进这个设计？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-10T18:40:32.830

为什么不去关系？

```
Country ( CountryID, CountryCode, CountryName )
Region  ( RegionID, RegionCode, RegionName, CountryID )
City    ( CityID, CityCode, CityName, RegionID ) 
```

“Region”名称比 State 更通用，这意味着它可能在任何地方都更有意义。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-06-10T18:39:00.747

为什么不是标准的三向链接表集？

```
table country (
   id   int primary key,
   name varchar(255)
);

table state (
    id int primary key,
    name varchar(255),
    country_id int foreign key country (id)
);

table city (
    id int primary key,
    name varchar(255)
    state_id int foreign key state (id)
); 
```

这在大多数情况下都适用，除了一些像[萨斯喀彻温省劳埃德明斯特](https://maps.google.ca/maps?q=Lloydminster,%20SK&hl=en&ll=53.283074,-109.962845&spn=0.151892,0.266762&sll=52.802761,-107.457275&sspn=4.916114,8.536377&oq=lloyd&t=h&hnear=Lloydminster,%20Saskatchewan&z=12)这样的退化的情况，它跨越了两个省界。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-10T18:44:12.270

除美国外，还有许多国家在国家级和市级之间存在政治分歧。澳大利亚有州，加拿大有省，日本有县，等等。

问题是您如何跟踪这些信息并保持一致？对于没有的国家，你可以有一个中等水平的“虚拟记录”。处理此问题的另一种方法是将外键非规范化到包含地址的实体的所有级别。如果国家和城市是强制性的，那么它们的外键将不可为空，而您的州 FK 可以为空。

如果您采用非规范化路线，您将需要应用程序逻辑来确保您的外键彼此一致。

如果您采用虚拟状态记录路线，您将需要应用程序逻辑来确保在用户界面中对用户隐藏虚拟层。

# python - 使用 SQLAlchemy 的多列键

> ID：10971306
> 
> 赞同：0
> 
> 时间：2012-06-10T18:36:16.650
> 
> 标签：python, mysql, sqlalchemy, innodb

我有一个具有复合主键的数据库表`(id_a, id_b)`。这不是他们实际上所说的，但我正在简化这个问题。`id_a`是一个外键，`id_b`只是一个整数，可以说是“序列号”。我不能只进行`id_b`auto_incrementing，因为 InnoDB 存储引擎不允许使用它（因为它不是复合键中的第一个字段）。

我想使这些对象可以与“分组” `id_a`，例如：

```
id_a    id_b
----------------
1       1
1       2
2       1
2       2
2       3 
```

并且用 ( ) 插入一行的结果`id_a=1`应该自动设置`id_b=3`。我想避免使用数据库锁，特别是因为当`id_a`完全允许并发插入时不需要锁定整个表。

我通过 SQLAlchemy（使用 ORM）通过 Python 访问这个数据库，尽管我怀疑这个问题可以在客户端（纯 MySQL）方面得到不可知论的回答。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-10T18:58:11.607

`SELECT coalesce(max(ID_B),0)+1 FROM yourTable WHERE ID_A = '1'`

但是，如果没有锁定，您将面临获得重复 ID_B 值的风险，因此您必须处理插入语句中的重复键错误。在代码中自动“重试”一定次数或出错并强制用户重试。

# python - BeautifulSoup4 未能读取所有 html。网站问题还是 BS4 问题？

> ID：10971307
> 
> 赞同：0
> 
> 时间：2012-06-10T18:36:43.670
> 
> 标签：python, beautifulsoup, python-idle

我正在尝试通过在 python 中创建一个玩具项目来学习使用 BS4，以使用各种翻译器翻译不同的单词。

我安装了 BS4 并在导入它之后 urllib2 在交互式控制台（IDLE）中使用了它：

```
soup = BeautifulSoup(urllib2.urlopen('http://morfix.nana10.co.il/test').read()) 
```

它只返回直到

```
<meta content="hyV6tXF5r6ClcgwEB4v4Q9SDIZU_isqlAONC5zk4b-8" name="google-site-verification"><meta content="CUQyCuYF1VpbyV7NX9gCZbe-D34iAwTtK9a5Y1YK3So" name="google-site-verification"><meta content="jKNHb3nlKVIBl0Z059KKo7mtvAVY9U4gbC+W10WdhWc=" name="verify-v1">
</meta></meta></meta></head></html> 
```

其中最后一行结束标签在站点中没有找到，持续了一段时间。在 Eclipse 中它工作正常，并提供了网站的整个 html。

这是 IDLE 的限制吗，它只能打印出一定长度的字符串等？因为我在另一个相当长的网站上尝试过它并且效果很好。或者是别的什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-10T18:55:09.783

我不知道问题是什么，但这是为了表明它不是你想的那样。

从 IDLE 中运行。

```
Python 2.7.3 (default, Apr 20 2012, 22:39:59) 
[GCC 4.6.3] on linux2
Type "copyright", "credits" or "license()" for more information.
>>> from bs4 import BeautifulSoup
>>> import urllib2
>>> soup = BeautifulSoup(urllib2.urlopen('http://morfix.nana10.co.il/test').read())

>>> print soup

<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml" xmlns:fb="http://www.facebook.com/2008/fbml">
<head>
<base href="http://morfix.nana10.co.il/"/>
<script src="js/search2/performanceCounter.js?ver=280512" type="text/javascript"></script>
<script type="text/javascript">
            var oLoadCounter = null;

            try
            {                                           
                oLoadCounter = new PerfomanceCounter('load',true);              
            }catch(e)
            {
            }                                         
        </script>
<meta content="hyV6tXF5r6ClcgwEB4v4Q9SDIZU_isqlAONC5zk4b-8" name="google-site-verification"><meta content="CUQyCuYF1VpbyV7NX9gCZbe-D34iAwTtK9a5Y1YK3So" name="google-site-verification"><meta content="jKNHb3nlKVIBl0Z059KKo7mtvAVY9U4gbC+W10WdhWc=" name="verify-v1">
<link href="images/MobileLandingPage/icon.png" rel="image_src">
<style type="text/css">
        @import "styles/search2_general.css?ver=280512";
        @import "styles/search2_he.css?ver=280512";
        @import "styles/mobileAppsModalPopup.css?ver=280512";
    </style>
<meta content="he" http-equiv="Content-Language"/>
<meta content="תרגום של המילה test על ידי אתר מורפיקס, השירות החינמי המוביל לתרגום אנגלית עברית, הכולל הקראת מילים וביטויים, משפטי דוגמה, ניקוד בעברית, ניתוח נטיות בעברית ובאנגלית ועוד." name="description"><meta content="test,מילון, תרגום אנגלי עברי עיברי, מילון אנגלי עברי עיברי" name="keywords"><link href="MorfixSearch.xml" rel="search" title="מילון מורפיקס" type="application/opensearchdescription+xml"/><link href="images/favicon.ico" rel="shortcut icon"/>
<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.3.2/jquery.min.js" type="text/javascript"></script>
<script src="js/AjaxAutoComplete/AutoComplete.js?ver=280512" type="text/javascript"></script>
<link href="js/AjaxAutoComplete/AutoComplete.css?ver=280512" rel="stylesheet" type="text/css">
<script src="js/search2/global.js?ver=280512" type="text/javascript"></script>
<script src="external/embedded/mobileapps/js/mobileAppsPopup.js?ver=280512" type="text/javascript"></script>
<script type="text/javascript">
        oMobileAppsPopup.initialize({ mode: 'modal'});
    </script>
<script language="javascript" type="text/javascript">
        $(document).ready(function()
        {
            oSearch.changeDefaultSearchPage("http://morfix.nana10.co.il/");
            oStuff.changeKeyboardPage("http://morfix.nana10.co.il/keyboard2.aspx?source=site");
            oDynamicAds.changeMarginLeftAdDirection('right');
        });
    </script>
<script type="text/javascript">
           try
            {                           
                oStuff.oFeatures.oPerformance.bMonitor = true;                                              
            }catch(e)
            {
            }                                         
        </script>
<script type="text/javascript">                                                             
                oSearch.onLoad(90,'transmit performance', function() { 
                   setTimeout('oPerformance.transmitPerformance();',5000);
                });                                                 
            </script>
<script type="text/javascript">
        $(document).ready(function()
        {                                              
           $("[id$=searchField]").autocomplete("http://dictionary.melingo.com/autocomplete/",                                   
            {
            delay:400,
            minChars:3,
            matchSubset:1,
            matchContains:1,
            cacheLength:0,
            cacheActive:false,
            width:443,
            OffsetX: 75,
            offsetHeight: 44,
            maxItemsToShow:10

            });     
        });             
     </script>
<script type="text/javascript">
        $(document).ready(function()
        {                                              
           $("[id$=searchField]").keypress(function()
                                        {
                                            imposeMaxLength(this,50);
                                        });  
           $("[id$=searchField]").blur(function()
                                        {
                                            imposeMaxLength(this,50);
                                        });                                                
           $("[id$=searchField]").bind('input paste',function(eventObject)
                                        {
                                            imposeMaxLength(this,50);
                                        });                             
        });     
    </script>
<script type="text/javascript"> 

      var _gaq = _gaq || []; 
      _gaq.push( 
          ['_setAccount', 'UA-5815264-1'], 
          ['_setDetectFlash', false],
          ['_trackPageview']
        );            

      (function() { 
        var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true; 
        ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js'; 
        var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s); 
      })(); 

    </script>
<!-- (C)2000-2011 Gemius SA - gemiusAudience / nana10.co.il / morfix -->
<script type="text/javascript">
    &lt;!--//--&gt;&lt;![CDATA[//&gt;&lt;!--
        var pp_gemius_identifier = new String('AqJAUqeLz8WkBf708M4kAJdRTO4I5.hWHKupK3C.n2b.l7');
    //--&gt;&lt;!]]&gt;
    </script>
<script src="http://common.nana10.co.il/JScript/GeneralModules/Banner/xgemius.js" type="text/javascript"></script>
<script src="http://storage.conduit.com/PS/morfix/tbinstall/tbInstall.min.js" type="text/javascript"></script>
<meta content="197722006971114" property="fb:app_id"/>
<meta content="100000681777777" property="fb:admins"/>
<meta content="100000681777777" property="fb:moderator"/>
<meta content="http://morfix.nana10.co.il/default.aspx" property="og:url"/>
<script src="js/Facebook.js?ver=280512" type="text/javascript"></script>
<title>
    מילון מורפיקס – Morfix Dictionary  - test
</title></link></meta></meta></link></meta></meta></meta></head>
<body>
<script type="text/javascript">
            var CM8Server = "nana10.checkm8.com";
            var CM8Cat = "pid48.affiliates.morfix.search_page";
            var CM8Profile = "";
        </script>
<script type="text/javascript">
                oStuff.oFeatures.oSound.bEnable = true;
                oStuff.oFeatures.oSound.SoundManagerPath = './SoundManager';
           </script>
<script src="SoundManager/soundmanager2-nodebug-jsmin.js" type="text/javascript"></script>
<script src="js/search2/sound/flashblock.js?ver=280512" type="text/javascript"></script>
<script src="js/search2/flash/detectflash.js?ver=280512" type="text/javascript"></script>
<div id="underHeaderAdv">
<div class="adv_ph">
<center>
<div id="_ctl0_frmResultsPageUnderHeaderLeft1" style="overflow:hidden;padding:0;margin:0;width:780px;height:90px;"></div>
</center>
<div class="clear"></div>
</div>
</div>
<div style="height:5px;"></div>
<div id="_ctl0_headerToolBarContainer" style="overflow:hidden;padding:0;margin:0;margin-left:auto ;margin-right:auto ;width:950px;height:36px;">
</div>
<div id="page">
<div id="header2">
<div class="first_row">
<div class="google">
<div class="googleLogo"></div>
<form action="search.aspx" id="cse-search-box" onsubmit="_gaq.push(['_trackEvent', 'Google', 'Search', 'Milon search page']);">
<input name="cx" type="hidden" value="partner-pub-0096668058692956:f679gw5cgah"/>
<input name="cof" type="hidden" value="FORID:11"/>
<input name="ie" type="hidden" value="UTF-8"/>
<input name="hl" type="hidden" value="he"/>
<input id="queryField" name="q" size="27" style="" type="text"/>
<input class="GoogleSubmitButton" name="sa" type="submit" value=""/>
</form>
<div class="clear"></div>
</div>
<div class="right_menu">
<div class="right_menu_row">
<div class="itemDouble button morfixApps" id="mobileAppsBtn" onclick="oStuff.gaLog('UserAction','To page: mobile applications (Upper Menu)'); return oMobileAppsPopup.startTimedoutModalPopup({url:'external/Embedded/MobileApps/MobileAppsDownload2.htm'});" onmouseout="this.className='itemDouble button morfixApps'" onmouseover="this.className='morfixAppsOver button'">
<em style="vertical-align:top;">אפליקציות להורדה <b>חינם!</b></em>
</div>
<div class="itemDouble button" onclick="oStuff.gaLog('UserAction','To page: storefix (Upper Menu)'); return oBrowser.openURL('https://www.facebook.com/morfix?sk=app_144440148901844','_blank');" onmouseout="this.className='itemDouble button'" onmouseover="this.className='itemDoubleOver button'"><img alt="storefix" src="../images/hive/storefixbtn.png"/>
</div>
</div>
<div class="right_menu_row">
<div class="item button" onclick="oStuff.gaLog('UserAction','To page: blog (Upper Menu)'); return oBrowser.openURL('http://blog.ravmilim.co.il/','_blank');" onmouseout="this.className='item button'" onmouseover="this.className='itemOver button'" style="font-size:9pt">
                            בלוג רב-מילים
                        </div>
<div class="item button" onclick="oStuff.gaLog('UserAction','To page: download toolbar (Upper Menu)'); return oBrowser.openURL('http://downloadmytoolbar.com/morfix/lp2/','_blank');" onmouseout="this.className='item button'" onmouseover="this.className='itemOver button'">סרגל-כלים</div>
<div class="item button" onclick="oStuff.gaLog('UserAction','To page: Nakdan (Upper Menu)'); return oBrowser.openURL('http://www.melingo.co.il/nakdan/naerr.asp','_blank');" onmouseout="this.className='item button'" onmouseover="this.className='itemOver button'">נקדן טקסט</div>
<div class="item button" id="_ctl0_divChangeLangHiveBtn" onclick="oStuff.gaLog('UserAction','To page: english version (Upper Menu)');return oBrowser.openURL('http://morfix.nana10.co.il/en/test')" onmouseout="this.className='item button'" onmouseover="this.className='itemOver button'" style="color:#06377A">English
                        </div>
</div>
<div class="right_menu_row">
<div class="item button" onclick="oStuff.gaLog('UserAction','To page: Ravmilim (Upper Menu)'); return oBrowser.openURL('http://www.ravmilim.co.il','_blank');" onmouseout="this.className='item button'" onmouseover="this.className='itemOver button'">
                            רב-מילים</div>
<div class="item button" id="_ctl0_divMakeMyHomepage" onclick="oStuff.gaLog('UserAction','Make Morfix my homepage'); return oStuff.makeHomePage('http://morfix.nana10.co.il/');" onmouseout="this.className='item button'" onmouseover="this.className='itemOver button'" style="font-size:9pt">הפוך לדף הבית
                        </div>
<div class="item button" onclick="oStuff.gaLog('UserAction','To page: email us (Upper Menu)');window.open('http://morfix.nana10.co.il/pages/contactus', 'morfix_emailus', 'width=600,height=600,status=yes,toolbar=no,menubar=no,scrollbars=yes,left=80,top=60');return false;" onmouseout="this.className='item button'" onmouseover="this.className='itemOver button'" style="">כתבו לנו
                        </div>
</div>
<div class="clear"></div>
</div>
<div class="clear"></div>
</div>
<div id="mobileAppsPopUp">
<div id="mobileAppsPopUpContent">
<div id="mobileAppsPopUpCloseButton"></div>
<iframe frameborder="0" scrolling="no" src="external/Embedded/MobileApps/MobileAppsDownload2.htm"></iframe>
</div>
</div>
<div class="second_row">
<div class="nanaAlign">
<div class="nana_logo"></div>
</div>
<div class="logo_ph">
<div class="logo" onclick="oBrowser.openURL('http://morfix.nana10.co.il/')" style="cursor:pointer;"></div>
<div class="faceBookLikes">
<div id="_ctl0_frmLogoHeaderLeft1" style="overflow:visible;padding:0;margin:0;width:100px;height:21px;"></div>
</div>
</div>
<div class="clear"></div>
</div>
</div>
<form action="default.aspx?hl=&amp;q=test" id="aspnetForm" method="post" name="aspnetForm" onsubmit="return false;">
<input id="originalSearch" name="originalSearch" type="hidden" value="test"/>
<input id="isC" name="isC" type="hidden" value="0"/>
<input id="q" name="q" type="hidden" value="test"/>
<input id="source" name="source" type="hidden" value="milon"/>
<input id="__VIEWSTATE" name="__VIEWSTATE" type="hidden" value="/wEPDwUKLTEwNTI0MDMxN2QYAgUeX19Db250cm9sc1JlcXVpcmVQb3N0QmFja0tleV9fFgEFEl9jdGwwOnRyYW5zbGF0ZUJ0bgUuX2N0bDA6bWFpbkNvbnRlbnQ6dGl0bGVDb250cm9sOnZpZXdDb2xsb2NhdGlvbg8PZGZk/g1bbc4Dh0CUEZ6GxJzIGld9d48="/>
<script type="text/javascript">oAdv.registerAdv({sID : '_ctl0_above_translations_results', sHtmlContent : '&lt;!-- Morfix_HE_Sentences --&gt;&lt;div id=&#39;div-gpt-ad-1334224791925-0&#39; style=&#39;width:468px; height:60px;&#39;&gt;&lt;/div&gt;', sType : 'div', sScriptContent: 'googletag.cmd.push(function() { googletag.display(&#39;div-gpt-ad-1334224791925-0&#39;); });', nWidth : 468, nHeight : 60});</script><script type="text/javascript">oAdv.registerAdv({sID : '_ctl0_popUnder', sHtmlContent : '&lt;div id=&quot;CM8ShowAd_RichInline&quot; title=&quot;RichInline&quot;&gt;&lt;/div&gt;', sType : 'div', sScriptContent: '', nWidth : 10, nHeight : 10});</script><script type="text/javascript">oAdv.registerAdv({sID : '_ctl0_frmLogoHeaderLeft1', sHtmlContent : '&lt;iframe src=&quot;//www.facebook.com/plugins/like.php?href=http%3A%2F%2Fwww.morfix.co.il&amp;amp;send=false&amp;amp;layout=button_count&amp;amp;width=100&amp;amp;show_faces=false&amp;amp;action=like&amp;amp;colorscheme=light&amp;amp;font&amp;amp;height=21&amp;amp;appId=210469539042747&quot; scrolling=&quot;no&quot; frameborder=&quot;0&quot; style=&quot;border:none; overflow:hidden; width:100px; height:21px;&quot; allowTransparency=&quot;true&quot;&gt;&lt;/iframe&gt;', sType : 'div', sScriptContent: '', nWidth : 100, nHeight : 21});</script><script type="text/javascript">oAdv.registerAdv({sID : '_ctl0_rowSearch_subrow1_col3_results', sURL : 'external/ads/nana/rowsearch_subrow1_col3_results.htm', sType : 'div', nWidth : 300, nHeight : 250});</script><script type="text/javascript">oAdv.registerAdv({sID : '_ctl0_row1col3_results', sHtmlContent : '&lt;!-- Morfix_HE_Bottom_Row01Col03 --&gt;&lt;div id=&#39;div-gpt-ad-1330963433824-2&#39; style=&#39;width:300px; height:300px;&#39;&gt;&lt;/div&gt;', sType : 'div', sScriptContent: 'googletag.cmd.push(function() { googletag.display(&#39;div-gpt-ad-1330963433824-2&#39;); });', nWidth : 300, nHeight : 250});</script><script type="text/javascript">oAdv.registerAdv({sID : '_ctl0_row2col3_results', sHtmlContent : '&lt;!-- Morfix_HE_Bottom_Row02Col03 --&gt;&lt;div id=&#39;div-gpt-ad-1330963433824-5&#39; style=&#39;width:300px; height:300px;&#39;&gt;&lt;/div&gt;', sType : 'div', sScriptContent: 'googletag.cmd.push(function() { googletag.display(&#39;div-gpt-ad-1330963433824-5&#39;); });', nWidth : 300, nHeight : 250});</script><script type="text/javascript">oAdv.registerAdv({sID : '_ctl0_row3col3_results', sHtmlContent : '&lt;!-- Morfix_HE_Bottom_Row03Col03 --&gt;&lt;div id=&#39;div-gpt-ad-1330963433824-8&#39; style=&#39;width:300px; height:400px;&#39;&gt;&lt;/div&gt;', sType : 'div', sScriptContent: 'googletag.cmd.push(function() { googletag.display(&#39;div-gpt-ad-1330963433824-8&#39;); });', nWidth : 300, nHeight : 400});</script><script type="text/javascript">oAdv.registerAdv({sID : '_ctl0_row1col1', sHtmlContent : '&lt;!-- Morfix_HE_Bottom_Row01Col01 --&gt;&lt;div id=&#39;div-gpt-ad-1330963433824-0&#39; style=&#39;width:300px; height:300px;&#39;&gt;&lt;/div&gt;', sType : 'div', sScriptContent: 'googletag.cmd.push(function() { googletag.display(&#39;div-gpt-ad-1330963433824-0&#39;); });', nWidth : 300, nHeight : 250});</script><script type="text/javascript">oAdv.registerAdv({sID : '_ctl0_row2col1', sHtmlContent : '&lt;!-- Morfix_HE_Bottom_Row02Col01 --&gt;&lt;div id=&#39;div-gpt-ad-1330963433824-3&#39; style=&#39;width:300px; height:300px;&#39;&gt;&lt;/div&gt;', sType : 'div', sScriptContent: 'googletag.cmd.push(function() { googletag.display(&#39;div-gpt-ad-1330963433824-3&#39;); });', nWidth : 300, nHeight : 250});</script><script type="text/javascript">oAdv.registerAdv({sID : '_ctl0_row3col1', sHtmlContent : '&lt;!-- Morfix_HE_Bottom_Row03Col01 --&gt;&lt;div id=&#39;div-gpt-ad-1330963433824-6&#39; style=&#39;width:300px; height:400px;&#39;&gt;&lt;/div&gt;', sType : 'div', sScriptContent: 'googletag.cmd.push(function() { googletag.display(&#39;div-gpt-ad-1330963433824-6&#39;); });', nWidth : 300, nHeight : 400});</script><script type="text/javascript">oAdv.registerAdv({sID : '_ctl0_row1col2', sHtmlContent : '&lt;div id=&quot;CM8ShowAd_Box_250x250_1&quot; title=&quot;Box_250x250_1&quot;&gt;&lt;/div&gt;', sType : 'div', sScriptContent: '', nWidth : 250, nHeight : 250});</script><script type="text/javascript">oAdv.registerAdv({sID : '_ctl0_row2col2', sHtmlContent : '&lt;!-- Morfix_HE_Bottom_Row02Col02 --&gt;&lt;div id=&#39;div-gpt-ad-1330963433824-4&#39; style=&#39;width:250px; height:250px;&#39;&gt;&lt;/div&gt;', sType : 'div', sScriptContent: 'googletag.cmd.push(function() { googletag.display(&#39;div-gpt-ad-1330963433824-4&#39;); });', nWidth : 250, nHeight : 250});</script><script type="text/javascript">oAdv.registerAdv({sID : '_ctl0_row3col2', sHtmlContent : '&lt;!-- Morfix_HE_Bottom_Row03Col02 --&gt;&lt;div id=&#39;div-gpt-ad-1330963433824-7&#39; style=&#39;width:250px; height:400px;&#39;&gt;&lt;/div&gt;', sType : 'div', sScriptContent: 'googletag.cmd.push(function() { googletag.display(&#39;div-gpt-ad-1330963433824-7&#39;); });', nWidth : 250, nHeight : 400});</script><script type="text/javascript">oAdv.registerAdv({sID : '_ctl0_frmUnderSearchBoxLeft1', sHtmlContent : '&lt;div&gt;&lt;/div&gt;', sType : 'div', sScriptContent: '', nWidth : 468, nHeight : 60});</script><script type="text/javascript">oAdv.registerAdvHighPriority({sID : '_ctl0_frmResultsPageUnderHeaderLeft1', sHtmlContent : '&lt;div id=&quot;CM8ShowAd_Plazma_720x300&quot; title=&quot;Plazma_720x300&quot;&gt;&lt;/div&gt;&lt;div id=&quot;CM8ShowAd_Mainstrip_780x150&quot; title=&quot;Mainstrip_780x150&quot;&gt;&lt;/div&gt;&lt;div id=&quot;CM8ShowAd_Top_728x90&quot; title=&quot;Top_728x90&quot;&gt;&lt;/div&gt;', sType : 'div', sScriptContent: '', nWidth : 780, nHeight : 90});</script><script type="text/javascript">oAdv.registerAdv({sID : '_ctl0_frmMarginLeftResultsTop1', sHtmlContent : '&lt;div id=&quot;CM8ShowAd_Ozen_160x600&quot; title=&quot;Ozen_160x600&quot;&gt;&lt;/div&gt;', sType : 'div', sScriptContent: '', nWidth : 160, nHeight : 600});</script><script type="text/javascript">oAdv.registerAdv({sID : '_ctl0_frmMarginRightResultsTop1', sURL : 'external/ads/nana/margin_right_result.htm', sType : 'div', nWidth : 160, nHeight : 600});</script><script type="text/javascript">oAdv.registerAdvHighPriority({sID : '_ctl0_headerToolBarContainer', sURL : 'http://common.nana10.co.il/GeneralModules/Category/default.asp?sid=27&amp;pid=48&amp;CategoryID=27&amp;TypeID=1000&amp;ABG=c03&amp;AFR=fff&amp;BG=F4F4F4&amp;FR=2&amp;StripBG=c03&amp;Logo=2', sType : 'div', nWidth : 950, nHeight : 36});</script>
<input id="__EVENTVALIDATION" name="__EVENTVALIDATION" type="hidden" value="/wEWAwLF0uiPDQLExriHBgK1vsKpCCf/JKPBwLmLLUs6eTqpIuD8QTIh"/>
<div id="main">
<div class="row">
<div class="colspan_1_2">
<div id="search">
<div class="searchbox_ph">
<div class="searchbox_bg">
<div class="container">
<div class="title">
<div class="description">הקלידו מילה, ביטוי, מושג או משפט קצר, בעברית או באנגלית</div>
</div>
<textarea class="searchField english" id="_ctl0_searchField" name="_ctl0:searchField" onkeyup="oUI.changeSearchFieldDir();" style="overflow:hidden;">test</textarea>
<div class="keyboard_container button" onclick="oStuff.gaLog('UserAction','Show virtual keyboard');oStuff.openKeyboard();" title="לחצו לקבלת מקלדת וירטואלית עברית">
<div class="keyboard"></div>
<div style="color:Gray;font-size:7pt;">מקלדת</div>
</div>
<div class="buttons_container">
<div class="action_buttons">
<div class="translate button" onclick="oStuff.gaLog('UserAction','milon search'); return oSearch.performSearch($('[id$=searchField]').val());" title="לחצו לתרגום מילים מעברית לאנגלית ולהפך">
<input border="0" id="_ctl0_translateBtn" name="_ctl0:translateBtn" style="display:none;" type="image"/>
</div>
</div>
<div class="features_menu">
<div class="search button" onclick="oStuff.gaLog('UserAction','Open Last search list');oUI.changeToWait(this);oBrowser.openURL('http://morfix.nana10.co.il/pages/lastsearches');" title="לחצו לקבלת רשימת מילים אחרונות – לחזרה ולשינון"></div>
<div class="hagrel button" onclick="oStuff.gaLog('UserAction','Request Gesture');oStuff.executeGesture(this);" title="לחצו להגרלת ערך מעניין מויקיפדיה – להרחבת הידע הכללי"></div>
<div class="facebookCommentsLink" id="_ctl0_facebookCommentsLinkPlaceHolder_facebookCommentsLinkRef" onclick="oStuff.scrollTo('facebookComments')">
</div>
<div class="clear"></div>
</div>
</div>
</div>
</div>
</div>
</div>
<div id="result_ph">
<div class="warning_line content" id="reachedMaxCharsLimit" style="display:none">
<div class="content">
                                ניתן להקליד עד 50 תווים בלבד                            
                            </div>
</div>
<div class="box584_m">
<div style="padding: 10px 10px 0 10px">
<script type="text/javascript">
            oFacebook.setFacebookIdURL('http://morfix.nana10.co.il/default.aspx?q=test&amp;source=Milon');  
        </script>
<!-- flash for sound code -->
<div>
<div id="noFlashDiv">
<div class="warning_line noFlash button" onclick="oBrowser.openURL('http://www.adobe.com/go/getflash/','_blank');"><div class="content">על-מנת להשתמש באפשרות השמעת מילים עליכם להתקין פלאש. <span class="link">לחצו כאן</span> להתקנה</div></div>
</div>
<div class="warning_line" id="blockFlashDiv"><div class="content" style="margin-top:2px">על-מנת להשתמש באפשרות השמעת מילים עליכם ללחוץ על סרטון הפלאש שמופיע מתחת להודעה זו</div></div>
<div class="swf-default" id="sm2-container" style=""></div>
</div>
<h1 class="box_title">תוצאות תרגום עבור: test</h1>
<div id="_ctl0_mainContent_milonResultControl_ResultContainer">
<div class="translate_box_en box heWord0">
<div class="title_ph">
<div class="word_ph translation_en">
<span class="word">test</span>
<span class="diber">noun</span>
</div>
<div class="translation translation_he heTrans">מִבְחָן, מִבְדָּק, טֶסְט; תַּבְחִין </div>
<div class="translation translation_he heSoundTrans"> </div>
<div class="clear"></div>
</div>
<div class="goodies_ph">
<div class="goody">
<a class="button speaker imageSoundUnclicked" onclick="oStuff.gaLog('UserAction','Play sound');oSound.playSound('http://morfix.nana10.co.il/getwave.aspx?word=test&amp;ext=.wav&amp;source=site&amp;isEnglish=true')" style="cursor:wait;"></a>
</div>
<div class="clear"></div>
</div>
<div class="extra_data">
<div class="inflection_ph" id="inflDiv0">
<div class="english translation_header">
                                            test
                                        </div>
<div dir="ltr" style="position:relative">
                                            test: <em class="english english_font">יחיד</em>;
                                            tests: <em class="english english_font">רבים</em>;

                                        </div>
</div>
</div>
</div>
<div class="result_seperator"></div>
<div class="translate_box_en box heWord1">
<div class="title_ph">
<div class="word_ph translation_en">
<span class="word">test</span>
<span class="diber">verb</span>
</div>
<div class="translation translation_he heTrans">בָּדַק, בָּחַן </div>
<div class="translation translation_he heSoundTrans"> </div>
<div class="clear"></div>
</div>
<div class="goodies_ph">
<div class="goody">
<a class="button speaker imageSoundUnclicked" onclick="oStuff.gaLog('UserAction','Play sound');oSound.playSound('http://morfix.nana10.co.il/getwave.aspx?word=test&amp;ext=.wav&amp;source=site&amp;isEnglish=true')" style="cursor:wait;"></a>
</div>
<div class="clear"></div>
</div>
<div class="extra_data">
<div class="inflection_ph" id="inflDiv1">
<div class="english translation_header">
                                            to test
                                        </div>
<div dir="ltr" style="position:relative">
                                          tested: <em class="english english_font">עבר</em>;
                                          test / tests: <em class="english english_font">הווה</em>;
                                          is testing: <em class="english english_font">הווה ממושך</em>;
                                          has tested: <em class="english english_font">הווה מושלם</em>;
                                          will test: <em class="english english_font">עתיד</em>;

                                        </div>
</div>
</div>
<div style="height:5px;"></div>
<div id="SampleSentencesTitle">דוגמאות שימוש:</div>
<div style="height:3px;"></div> 
```

由于最大答案长度而被剪断。

# java - 无法执行 .jar 文件“找不到主类”

> ID：10971308
> 
> 赞同：1
> 
> 时间：2012-06-10T18:36:50.393
> 
> 标签：java

我有一个奇怪的问题。当我尝试运行任何 .jar 文件时，我收到一条错误消息：

```
---------------------------
Java Virtual Machine Launcher
---------------------------
Could not find the main class: C:\Program Files (x86)\DirBuster\DirBuster.jar.  Program will exit.
---------------------------
OK   
--------------------------- 
```

我已经尝试了许多 .jar 文件，并且所有文件都出现此错误。我试过重新安装JAVA，通过cmd运行程序，但问题依然存在。任何将不胜感激。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-10T18:44:35.810

确保您有一个 main 方法（必须声明为 public static void） - 如果您的类中有多个 main 方法，请在清单文件中声明入口点。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-10T18:47:05.207

运行 cmd.exe（命令行提示符）并运行命令

```
"C:\Program Files\Java\jdk1.6.0_32\bin\java.exe" -jar "C:\Program Files\DirBuster\DirBuster.jar" 
```

这应该有效。必要时更正目录名称。C:\Program Files\Java\jdk1.6.0_32 是安装 JDK 或 JRE 的目录。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-10T18:57:13.383

你怎么想运行这个？如果您尝试运行 jar 文件，则需要在清单中有一个 Main-Class 条目，其中包含要运行的类的名称，然后您可以执行以下操作：

```
java -jar DirBuster.jar 
```

如果没有主类，您可能需要这样做：

```
java -cp DirBuster.jar MainClass 
```

看看这里： [http ://docs.oracle.com/javase/tutorial/deployment/jar/appman.html](http://docs.oracle.com/javase/tutorial/deployment/jar/appman.html)

# c# - 通过 Nusoap 在 PHP 和 C# 中上传 zip 文件

> ID：10971309
> 
> 赞同：0
> 
> 时间：2012-06-10T18:36:54.790
> 
> 标签：c#, web-services, nusoap

我想用 C# 客户端应用程序和 Nusoap webservice 上传文件。我怎么能这样做？我使用 Nusoap 网络服务插入数据库，但上传文件我不知道。请帮我。谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-10T23:47:35.323

由于我对 NuSOAP 没有任何经验，因此我将尽我所知将文件上传到运行 PHP 的服务器，而不使用 NuSOAP。

以下代码将给`POST`定文件的内容发送到 PHP 页面，就好像它是通过标准 HTML 表单发送的一样。

```
public void UploadFile(string path) {
    WebClient wc = new WebClient();
    wc.Headers.Add("Content-Type", "application/x-www-form-urlencoded");
    Int64 numBytes = new FileInfo(path).Length;
    FileStream fs = new FileStream(path, FileMode.Open, FileAccess.Read);
    BinaryReader br = new BinaryReader(fs);
    Byte[] data = br.ReadBytes(Convert.ToInt32(numBytes));
    br.Close();
    fs.Close();
    wc.UploadData("http://127.0.0.1/upload.php", "POST", data);
} 
```

编辑：这是我不久前用于此的 PHP。它可能不安全，并且每次上传新文件时总是会覆盖*相同的文件。*为了安全起见，您可以尝试对此进行一些动态性，以及一些文件检查......但您也应该能够使用用于标准上传（来自网络表单）的修改后的 PHP 文件。

```
<?php
    $fp = fopen('snap.jpg', 'wb');
    fwrite($fp, file_get_contents('php://input'));
    fclose($fp);
?> 
```

# java - 在 Java 中清除控制台

> ID：10971310
> 
> 赞同：0
> 
> 时间：2012-06-10T18:37:21.663
> 
> 标签：java, eclipse, list, serialization, console

> **可能重复：**
> [如何删除 System.out.println() 打印到控制台的内容？](https://stackoverflow.com/questions/7522022/how-to-delete-stuff-printed-to-console-by-system-out-println)

我有一个 Pickle 类，可以序列化单词和单词计数的链接列表。一切正常，除了当我保存和加载数据时控制台不清除。即使我离开 Eclipse 并再次运行该程序，旧的控制台输出也会与新的输出一起出现。无论如何在加载对象数据之前清除控制台？这是我的保存方法：

```
void save(T obj){
    try{
        FileOutputStream fos = new FileOutputStream(filename);
        ObjectOutputStream out = new ObjectOutputStream(fos);
        out.writeObject(obj);
        out.close();
    }catch(Exception e){
        System.err.println(e);
        System.exit(1);
    }
} 
```

和我的加载方法：

```
T load(){
    try{
        FileInputStream fis = new FileInputStream(filename);
        ObjectInputStream in = new ObjectInputStream(fis);
        temp = (T) in.readObject();
        return temp;
    }catch(FileNotFoundException f){
        System.err.println("Warning! File Not Found. Null is returned");
        System.exit(1);
        return null;
    } catch (Exception e) {
        System.err.println(e);
        System.exit(1);
        return null;
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-10T19:55:37.233

我以前遇到过这个问题。这真是太棒了。[我可以通过使用一个名为 JLine http://jline.sourceforge.net/](http://jline.sourceforge.net/)的免费/开源库来做到这一点。它是一个非常好的库，并且支持 Unix 和 Windows 终端，包括输入密码。它还有一个“clearScreen()”方法来清除屏幕。

我建议您使用 JLine 并查看它是否适合您的需求。我可以向您保证，它是一个不错的库，我相信您会发现它的其他功能很有用。

# php - php getimagesize 动态创建的图片

> ID：10971313
> 
> 赞同：0
> 
> 时间：2012-06-10T18:38:29.037
> 
> 标签：php, getimagesize

我正在尝试确定 image.php 是否是有效的图片文件。它可能是也可能不是，因为如果 DB 有关于调整大小图片的信息，它将是有效的 - image.php 将调整原始图片的大小并将其打印到屏幕上。还有另一种选择 - 数据库中没有文件名信息，它可能导致错误消息或错误图片。我想获取图像的尺寸，如果它是宽度 = 0 和高度 = 0，则打印错误消息。我试图用 getimagesize 来做，但它会产生错误：

[function.getimagesize]：无法打开流：...中没有这样的文件或目录

路径是 100% 正确的。我读过通过php获取动态制作图片的imagesize是不可能的。我总是可以检查我的数据库，但我很好奇是否有任何黑客可以获取通过 php 动态创建的图像大小。

代码：

```
$file = "image.php?img=1";
$a = getimagesize($file);
echo 'aaaaaaaaa' . $a; 
```

编辑：

我以另一种方式做到了，因为没有一个解决方案对我有用——我只是检查数据库是否存在正确的文件名。

感谢帮助。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-10T18:41:05.533

You'd have to use a full-blown absolute url for PHP to realize you're requesting a url. `image.php?img=1` is just a local file-system-only request

```
$file = 'http://example.com/image.php?img=1'; // full-blown HTTP request
$file = 'image.php'; // local-only request 
```

But this is somewhat inefficient, since you're doing a full-blown http round-trip request. if that url is password/session protected, you'll have to "log in" first, etc...

If that image is coming from a local database, then you should recreate the fetching logic or make it usable via function call so that it doesn't do the HTTP request, and simply works "internally" within your script, and then pass the data to GD's [imagecreatefromstring()](http://php.net/imagecreatefromtstring), which'll accept any known image type, then use the [imagesx()](http://php.net/imagesx) and [imagesy()](http://php.net/imagesy) functions to get the height/width.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-10T18:40:20.747

您需要 file_get_contents 因为`image.php?img=1`它不是您系统上的真实文件

```
$cont = file_get_contents($file);
$r = imagecreatefromstring($cont);
imagesx($r);
imagerx($r); 
```

当然你需要完整的 URL：`http://etc`

# coldfusion - cfc 中的函数局部变量

> ID：10971315
> 
> 赞同：4
> 
> 时间：2012-06-10T18:38:34.723
> 
> 标签：coldfusion, scope, coldfusion-9, cfc

在我被要求研究冷融合应用程序中一些奇怪的间歇性错误之前，我没有使用过冷融合。

在阅读了范围后，我认为问题是因为我的 cfc 函数中的变量都没有使用`var`关键字，并且在各种函数中使用了相同的变量名。因此，据我了解，变量的范围是页面级别，调用这些函数的不同线程将覆盖导致“奇怪”问题的变量。

我的问题是这样做的正确方法是什么？

```
 <cfset var listCount = 0>
 <cfquery name="qGetElementsByType" dbtype="query" maxrows="#arguments.num_to_return#">
    SELECT elementId,
           title, PIhtml, Rerhtml,
           text, url, image, Rank, isPoll, pollId, subjectId
    FROM   arguments.element_query
    WHERE  <cfloop list="#arguments.element_type_id#" index="lcv">
               <cfif listCount GT 0>
                  OR
               </cfif>
               subjectid =  #lcv#
              <cfset listCount = listCount + 1>
           </cfloop>
</cfquery> 
```

是否`var`需要在每次设置 listCount 变量时添加，还是仅在初始声明时添加？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-06-10T20:09:26.280

*（我希望这个答案不会太啰嗦。我认为现有的答案没有提供足够的信息，但希望没有走得太远……）*

在 CF 中，有各种各样的范围可以放置变量（应用程序、会话、url、cgi 等）。

其中一些需要使用显式声明（例如，会话变量必须始终具有范围），其他可以在读取变量时自动访问（例如，可以使用无范围变量读取表单和 url 变量） - 有优先顺序这里决定了在哪些范围内检查无范围的变量。

此排序中的底部范围是`variables`范围，它是适用于整个当前页面/对象实例的范围。

设置新变量时，如果没有作用域，则在作用域中创建它`variables`。由于这是一个全局范围，因此可以从同一函数的不同实例以及不同的函数访问它，这会导致您意识到的问题。

为了防止变量进入全局变量范围，您必须将它放在函数的`local`范围内。*（从技术上讲，您可以将它放在函数的`arguments`范围内，但这可能会使人们感到困惑。）*

在早期版本的 CF 中，无法显式访问本地范围 - 您需要使用`var`关键字才能在本地范围内创建变量 - 并且一旦创建，它将始终优先（无论是读取还是写入）变量范围。

使用 CF9，`local`范围现在是“正确”范围并且可以显式访问，因此`<cfset var x = 0 />`您可以编写而不是使用`<cfset local.x = 0 />`- 这样做的主要好处是当您创建`var`无法使用关键字的变量时，例如`<cfquery name="local.qGetElementsByType" ...>`和`<cfloop index="local.lcv"...>`

您仍然只*需要*在第一次创建每个变量时应用本地范围，以防止它进入变量范围 - 如果您愿意，后续读取/更新可以是无范围的，就像在执行 var 范围时一样。
*（尽管无作用域的变量还有其他潜在的作用域相关问题，例如在`<cfloop query="queryname">`块内部，因此有些人会争辩说无论如何你都应该对所有变量进行作用域。）*

**总之，为了使您显示的代码安全，您需要确定以下范围：**

*   `qGetElementsByType`来自 cfquery 标记
*   `lvc`来自 cfloop 标签

由于这些变量不是使用 cfset 创建的，因此最容易通过在名称前加上前缀来完成范围界定`local.`

由于您已经`var`确定了 listCount 变量的范围，因此您不需要在同一个函数中再次执行此操作 - 您可以选择使用`<cfset local.listCount = local.listCount + 1>`（或确实是`<cfset local.listCount++ >`），但这也是一个偏好问题，不需要防止泄漏到变量范围内.

（旁注：理想情况下，您应该使用 cfqueryparam 标记`#lcv#`来防止 SQL 注入 - 即使这是一个查询查询，这可能仍然是一个问题，并且在安全性方面始终保持安全总是更好。）

当然，这只是这个函数——你还需要修复其他函数——一个简单的方法是使用**[varscoper](http://varscoper.riaforge.org)**工具扫描你的整个代码库并识别需要作用域的变量。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-10T19:19:40.923

除了 Evik 在他的回答中所说的之外，您还应该使用`VAR` *所有*的函数局部变量。 `qGetElementsByType`并且也`lcv`应该是 VARed。如果您使用的是 CF9 及更高版本，您可以简单地使用范围来确定它们的`LOCAL`范围，例如：`local.qGetElementsByType`等。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-10T19:06:03.920

我假设您的问题专门针对这一行：

```
<cfset listCount = listCount + 1> 
```

不，您不需要在此行中再次使用 var。

但是，如果稍后在页面中，您尝试使用访问名为 listCount 的变量，它将已经具有您刚刚运行的代码中的值，因此您需要重新创建它。

# c# - c#剥离html标签，解码实体

> ID：10971317
> 
> 赞同：1
> 
> 时间：2012-06-10T18:38:44.887
> 
> 标签：c#, .net, html, winforms

是否有 PHP 函数 strip_tags 和 html_entity_decode 的等价物？我正在使用 .NET 3.5

所以如果我有：

```
<textarea cols="5">Some &lt; text</textarea> 
```

我去拿

```
Some < text 
```

感谢您的回复。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-10T18:45:42.503

您可以使用[HtmlAgilityPack](http://html-agility-pack.net/?z=codeplex) ...

```
string html = @"<textarea cols=""5"">Some &lt; text</textarea>";
HtmlAgilityPack.HtmlDocument doc = new HtmlAgilityPack.HtmlDocument();
doc.LoadHtml(html);

var text = doc.DocumentNode.Descendants("textarea").First().InnerText;
var decodedText = HttpUtility.HtmlDecode(text); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-29T19:41:26.550

使用 Regex 替换标签 * `<.*?>`* 和 HttpUtility 类来解码实体。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2015-03-25T16:47:39.190

我想分享我为此创建的代码。我喜欢 PHP，但我的工作是 C#，所以我重新创建了 StripTag 功能。

如何使用它的示例：

```
string exampleOneWithAllStripped = StripTag("<br />this is an <b>example</b>", null);

string exampleTwoWithOnlyBoldAllowed = StripTag("<br />this is an <b>example</b>", "b");

string exampleThreeWithBRandBoldAllowed = StripTag("<br />this is an <b>example</b>", "b,<br>");

    /// <summary>
    ///     HTML and other mark up tags stripped from a given the string ListOfAllowedTags.
    ///     This Method is the ASP.NET Version of the PHP Strip_Tags Method. It will strip out all html and xml tags
    ///     except for the ones explicitly allowed in the second parameter.  If allowed, this method DOES NOT strip out
    ///     attributes.
    /// </summary>
    /// <param name="htmlString">
    ///     The HTML string.
    /// </param>
    /// <param name="listOfAllowedTags">
    ///     The list of allowed tags.  if null, then nothing allowed.  otherwise, ex: "b,<br/>,<hr>,p,i,<u>"
    /// </param>
    /// <returns>
    ///     Cleaned String
    /// </returns>
    /// <author>James R.</author>
    /// <createdate>10-27-2011</createdate>
    public static string StripTag(string htmlString, string listOfAllowedTags)
    {
        if (string.IsNullOrEmpty(htmlString))
        {
            return htmlString;
        }

        // this is the reg pattern that will retrieve all tags
        string patternThatGetsAllTags = "</?[^><]+>";

        // Create the Regex for all of the Allowed Tags
        string patternForTagsThatAreAllowed = string.Empty;
        if (!string.IsNullOrEmpty(listOfAllowedTags))
        {
            // get the HTML starting tag, such as p,i,b from an example string of <p>,<i>,<b>
            Regex remove = new Regex("[<>\\/ ]+");

            // now strip out /\<> and spaces
            listOfAllowedTags = remove.Replace(listOfAllowedTags, string.Empty);

            // split at the commas
            string[] listOfAllowedTagsArray = listOfAllowedTags.Split(',');

            foreach (string allowedTag in listOfAllowedTagsArray)
            {
                if (string.IsNullOrEmpty(allowedTag))
                {
                    // jump to next element of array.
                    continue;
                }

                string patternVersion1 = "<" + allowedTag + ">"; // <p>
                string patternVersion2 = "<" + allowedTag + " [^><]*>$";

                // <img src=stuff  or <hr style="width:50%;" />
                string patternVersion3 = "</" + allowedTag + ">"; // closing tag

                // if it is not the first time, then add the pipe | to the end of the string
                if (!string.IsNullOrEmpty(patternForTagsThatAreAllowed))
                {
                    patternForTagsThatAreAllowed += "|";
                }

                patternForTagsThatAreAllowed += patternVersion1 + "|" + patternVersion2 + "|" + patternVersion3;
            }
        }

        // Get all html tags included in the string
        Regex regexHtmlTag = new Regex(patternThatGetsAllTags);

        if (!string.IsNullOrEmpty(patternForTagsThatAreAllowed))
        {
            MatchCollection allTagsThatMatched = regexHtmlTag.Matches(htmlString);

            foreach (Match theTag in allTagsThatMatched)
            {
                Regex regOfAllowedTag = new Regex(patternForTagsThatAreAllowed);
                Match matchOfTag = regOfAllowedTag.Match(theTag.Value);

                if (!matchOfTag.Success)
                {
                    // if not allowed replace it with nothing
                    htmlString = htmlString.Replace(theTag.Value, string.Empty);
                }
            }
        }
        else
        {
            // else strip out all tags
            htmlString = regexHtmlTag.Replace(htmlString, string.Empty);
        }

        return htmlString;
    } 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-17T06:39:14.343

我附上完整的代码：

条带化标签。

```
public static string StripTags(string source)
{
  return Regex.Replace(source, "<.*?>", string.Empty);
} 
```

解码实体。

```
public static string DecodeHtmlEntities(string text)
{
    return HttpUtility.HtmlDecode(text);
} 
```

# jquery - 网页设计 - CSS 粘性页脚重叠 JQUERY 内容

> ID：10971318
> 
> 赞同：0
> 
> 时间：2012-06-10T18:38:54.313
> 
> 标签：jquery, html, css

我知道有很多关于 CSS Sticky Footers 的问题。

我的问题是我的粘性页脚完全按照我想要的方式工作——除了在我使用 JQuery 显示我的内容的投资组合页面上。

在较小的屏幕分辨率下，页脚与我的 JQuery 插件中的描述重叠。我尝试为插件添加最小高度，但没有奏效。

www.toddmilliken.com/portfolio.html

任何帮助表示赞赏，谢谢！

-托德

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-10T18:44:41.713

页脚的样式如下：

```
#footer {
    position: relative;
    margin-top: -50px;
    height: 50px;
    clear: both;
    background: #332532;
} 
```

该元素与上面的内容重叠，因为`margin-top`设置为`-50px`。尝试将其设置为`0`，问题将得到解决；）

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-06-10T18:49:04.253

The easiest fix I can suggest is to put non semantic element with height of 50px at the end of your #wrap container. The code should be similar to:

```
<div id="wrap">
  <EXISTING CONTENT HERE>
  <div style="height: 50px;"></div>
</div>
<div id="footer">...</div> 
```

# c# - 如何从目录 c# 中读取所有文件？

> ID：10971321
> 
> 赞同：1
> 
> 时间：2012-06-10T18:39:06.577
> 
> 标签：c#, .net, string, file, streamreader

这就是我想要做的：

1.  选择目录
2.  输入一个字符串
3.  从字符串中读取该目录中的所有文件。

我想实现的想法是这样的：

选择目录，输入字符串。转到该文件夹​​中的每个文件。例如文件夹是：`Directory={file1.txt,file2.txt,file3.txt}`

我想先去file1.txt，把所有的文本读入一个字符串，看看我的字符串是否在那个文件中。如果是：是否转到 file2.txt，依此类推。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-06-10T18:45:52.163

```
foreach (string fileName in Directory.GetFiles("directoryName", "searchPattern")
{
    string[] fileLines = File.ReadAllLines(fileName);
    // Do something with the file content
} 
```

您也可以使用`File.ReadAllBytes()`or`File.ReadAllText()`代替`File.ReadAllLines()`，这取决于您的要求。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-10T19:43:06.330

```
 var searchTerm = "SEARCH_TERM";
        var searchDirectory = new System.IO.DirectoryInfo(@"c:\Test\");

        var queryMatchingFiles =
                from file in searchDirectory.GetFiles()
                where file.Extension == ".txt"
                let fileContent = System.IO.File.ReadAllText(file.FullName)
                where fileContent.Contains(searchTerm)
                select file.FullName;

        foreach (var fileName in queryMatchingFiles)
        {
            // Do something
            Console.WriteLine(fileName);
        } 
```

这是一个基于 LINQ 的解决方案，它也应该可以解决您的问题。它可能更容易理解和维护。因此，如果您能够使用 LINQ，请尝试一下。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-10T18:50:24.387

I think this is what you want...

```
string input = "blah blah";
string file_content;
FolderBrowserDialog fld = new FolderBrowserDialog();
if (fld.ShowDialog() == DialogResult.OK)
{
    DirectoryInfo di = new DirectoryInfo(fld.SelectedPath);
    foreach(string f  in Directory.GetFiles(fld.SelectedPath))
    {
        file_content = File.ReadAllText(f);
        if (file_content.Contains(input))
        {
            //string found
            break;
        }
    }
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-10T18:51:08.900

Hi the easiest way to achieve what you're asking for would be something like this:

```
string[] Files = System.IO.Directory.GetFiles("Directory_To_Look_In");

foreach (string sFile in Files)
{
    string fileCont = System.IO.File.ReadAllText(sFile);
    if (fileCont.Contains("WordToLookFor") == true)
    {
        //it found something
    }

} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2019-01-31T07:44:10.897

```
 // Only get files that are text files only as you want only .txt 
            string[] dirs = Directory.GetFiles("target_directory", "*.txt");
            string fileContent = string.Empty;
            foreach (string file in dirs) 
            {
               // Open the file to read from. 
                fileContent = File.ReadAllText(file);                
                // alternative: Use StreamReader to consume the entire text file.
                //StreamReader reader = new StreamReader(file);
                //string fileContent = reader.ReadToEnd();

                if(fileContent.Contains("searching_word")){
                  //do whatever you want
                  //exit from foreach loop as you find your match, so no need to iterate
                    break;
                }

            } 
```

# android - 在android项目的maven安装中找不到路径

> ID：10971322
> 
> 赞同：0
> 
> 时间：2012-06-10T18:39:08.767
> 
> 标签：android, maven, pom.xml, android-maven-plugin

`mvn clean install`在我的android项目中运行时遇到以下问题：

```
[INFO] Scanning for projects...
[INFO]                                                                         
[INFO] ------------------------------------------------------------------------
[INFO] Building my-project 3.0-SNAPSHOT
[INFO] ------------------------------------------------------------------------
[INFO] 
[INFO] --- maven-android-plugin:2.6.0:generate-sources (default-generate-sources) @ my-project ---
[INFO] ANDROID-904-002: Found aidl files: Count = 0
[INFO] ANDROID-904-002: Found aidl files: Count = 0
[INFO] Copying local resource files to combined resource directory.
[INFO] C:\dev\Android\android-sdk\platforms\android-7/tools/aapt [package, -m, -J, C:\dev\workspace\my-project\target\generated-sources\r, -M, C:\dev\workspace\my-project\AndroidManifest.xml, -S, C:\dev\workspace\my-project\target\generated-sources\combined-resources\res, -I, C:\dev\Android\android-sdk\platforms\android-7\android.jar]
[INFO] The system cannot find the path specified.
[ERROR] Error when generating sources.
org.apache.maven.plugin.MojoExecutionException: 
    at com.jayway.maven.plugins.android.phase01generatesources.GenerateSourcesMojo.generateR(GenerateSourcesMojo.java:293)
    at com.jayway.maven.plugins.android.phase01generatesources.GenerateSourcesMojo.execute(GenerateSourcesMojo.java:109)
    at org.apache.maven.plugin.DefaultBuildPluginManager.executeMojo(DefaultBuildPluginManager.java:107)
    at org.apache.maven.lifecycle.internal.MojoExecutor.execute(MojoExecutor.java:209)
    at org.apache.maven.lifecycle.internal.MojoExecutor.execute(MojoExecutor.java:153)
    at org.apache.maven.lifecycle.internal.MojoExecutor.execute(MojoExecutor.java:145)
    at org.apache.maven.lifecycle.internal.LifecycleModuleBuilder.buildProject(LifecycleModuleBuilder.java:84)
    at org.apache.maven.lifecycle.internal.LifecycleModuleBuilder.buildProject(LifecycleModuleBuilder.java:59)
    at org.apache.maven.lifecycle.internal.LifecycleStarter.singleThreadedBuild(LifecycleStarter.java:183)
    at org.apache.maven.lifecycle.internal.LifecycleStarter.execute(LifecycleStarter.java:161)
    at org.apache.maven.DefaultMaven.doExecute(DefaultMaven.java:319)
    at org.apache.maven.DefaultMaven.execute(DefaultMaven.java:156)
    at org.apache.maven.cli.MavenCli.execute(MavenCli.java:534)
    at org.apache.maven.cli.MavenCli.doMain(MavenCli.java:196)
    at org.apache.maven.cli.MavenCli.main(MavenCli.java:141)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(Unknown Source)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source)
    at java.lang.reflect.Method.invoke(Unknown Source)
    at org.codehaus.plexus.classworlds.launcher.Launcher.launchEnhanced(Launcher.java:290)
    at org.codehaus.plexus.classworlds.launcher.Launcher.launch(Launcher.java:230)
    at org.codehaus.plexus.classworlds.launcher.Launcher.mainWithExitCode(Launcher.java:409)
    at org.codehaus.plexus.classworlds.launcher.Launcher.main(Launcher.java:352)
Caused by: com.jayway.maven.plugins.android.ExecutionException: ANDROID-040-001: Could not execute: Command = cmd.exe /X /C "C:\dev\Android\android-sdk\platforms\android-7\tools\aapt package -m -J C:\dev\workspace\my-project\target\generated-sources\r -M C:\dev\workspace\my-project\AndroidManifest.xml -S C:\dev\workspace\my-project\target\generated-sources\combined-resources\res -I C:\dev\Android\android-sdk\platforms\android-7\android.jar", Result = 1
    at com.jayway.maven.plugins.android.CommandExecutor$Factory$1.executeCommand(CommandExecutor.java:186)
    at com.jayway.maven.plugins.android.phase01generatesources.GenerateSourcesMojo.generateR(GenerateSourcesMojo.java:291)
    ... 22 more
[INFO] ------------------------------------------------------------------------
[INFO] BUILD FAILURE
[INFO] ------------------------------------------------------------------------
[INFO] Total time: 1.795s
[INFO] Finished at: Sun Jun 10 21:17:23 EEST 2012
[INFO] Final Memory: 17M/221M
[INFO] ------------------------------------------------------------------------
[ERROR] Failed to execute goal com.jayway.maven.plugins.android.generation2:maven-android-plugin:2.6.0:generate-sources (default-generate-sources) on project my-project: MojoExecutionException: ANDROID-040-001: Could not execute: Command = cmd.exe /X /C "C:\dev\Android\android-sdk\platforms\android-7\tools\aapt package -m -J C:\dev\workspace\my-project\target\generated-sources\r -M C:\dev\workspace\my-project\AndroidManifest.xml -S C:\dev\workspace\my-project\target\generated-sources\combined-resources\res -I C:\dev\Android\android-sdk\platforms\android-7\android.jar", Result = 1 -> [Help 1] 
```

这个路径 `C:\dev\Android\android-sdk\platforms\android-7/tools/`` 有问题吗？如果是，如何修改？aapt 位于 C:\dev\Android\android-sdk\platform-tools，为什么要在这个位置搜索呢？

我的 pom-xml 文件：

```
<project xmlns="http://maven.apache.org/POM/4.0.0" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xsi:schemaLocation="http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd">
    <modelVersion>4.0.0</modelVersion>
    <groupId>org.my.project</groupId>
    <version>3.0-SNAPSHOT</version>
    <artifactId>my-project</artifactId>
    <packaging>apk</packaging>

    <dependencies>
        <dependency>
            <groupId>com.google.android</groupId>
            <artifactId>android</artifactId>
            <version>2.2.1</version>
            <scope>provided</scope>
        </dependency>
        <dependency>
            <groupId>com.google.android</groupId>
            <artifactId>android-test</artifactId>
            <version>2.2.1</version>
            <scope>provided</scope>
        </dependency>
        <dependency>
            <groupId>junit</groupId>
            <artifactId>junit</artifactId>
            <version>4.10</version>
            <scope>test</scope>
        </dependency>
        <dependency>
            <groupId>org.mockito</groupId>
            <artifactId>mockito-all</artifactId>
            <version>1.8.5</version>
            <scope>test</scope>
        </dependency>
    </dependencies>
    <build>
        <plugins>
            <plugin>
                <groupId>com.jayway.maven.plugins.android.generation2</groupId>
                <artifactId>maven-android-plugin</artifactId>
                <version>2.6.0</version>
                <configuration>
                    <sdk>
                        <platform>7</platform>
                    </sdk>
                    <emulator>
                        <avd>cccc</avd>
                    </emulator>
                    <deleteConflictingFiles>true</deleteConflictingFiles>
                    <undeployBeforeDeploy>true</undeployBeforeDeploy>
                </configuration>
                <extensions>true</extensions>
            </plugin>
            <plugin>
                <artifactId>maven-compiler-plugin</artifactId>
                <version>2.3.2</version>
            </plugin>
        </plugins>
    </build>
</project> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-10T18:53:25.507

您使用的是非常旧版本的 android maven 插件。在 2.8.1 中，路径已从工具更改为平台工具。

你的 pom 应该有如下版本和名称：

```
<groupId>com.jayway.maven.plugins.android.generation2</groupId>
<artifactId>android-maven-plugin</artifactId>
<version>3.1.1</version> 
```

# c++ - C++：删除派生类实例的正确方法是什么？

> ID：10971327
> 
> 赞同：3
> 
> 时间：2012-06-10T18:39:40.307
> 
> 标签：c++, inheritance, destructor

假设我们有：

```
class A {
protected:
    int* iArr;
    float *fArr;
public:
    A(int* iArr,float *fArr);
    ~A();
}

class B : public A {
private:
    double *dArr;
public:
    B(int* iArr,float *fArr,double *dArr);
    ~B();
} 
```

我的直觉是它只会调用 B 的析构函数，但是当我在 Visual C++ 上运行它时，我看到在析构 B 的实例时它会调用 A 和 B 的析构函数。

那么在派生类中编写析构函数的正确方法是什么？我是否总是需要假设父类会负责删除所有内容，但只有派生类有什么？

**编辑**：

1.  如果是这样，那么如果孩子扩展父类只使用覆盖函数，这是否意味着我将孩子的析构函数留空？

2.  如果我想改变它怎么办？我的意思是如果我只想调用子析构函数怎么办？有没有办法做到这一点？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-10T18:41:10.650

一句话，是的。

父类的析构函数总是被自动调用。它的工作是释放父类使用的所有资源。

子类的析构函数负责释放特定于子类的东西。

此外，如果您曾经通过指向父类的指针删除子类的实例，则需要将父类的析构函数设为虚拟。请参阅[何时使用虚拟析构函数？](https://stackoverflow.com/questions/461203/when-to-use-virtual-destructors)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-10T18:45:38.327

A 的析构函数应该是虚拟的。您的问题在于，如果您执行以下操作：

```
A* b = new B( iArr, fArr, dArr );
delete b; 
```

然后 B 的析构函数不会被调用，因为 b 在被实例化为 B 时看起来像一个 A 并且 B 的析构函数在虚拟表中没有条目，这意味着它不知道它在那里（即它认为它只是一个 A )

编辑：

In answer to 1 you could leave the destructor empty or you could not define it.

In answer to 2, you can't really do that. You'd be best off having a virtual protected function called "Destroy" or something thats called from the base class destructor. That is the only way I can think of to control destruction like you describe.

# c# - 静态类对象引用未设置为对象的实例

> ID：10971329
> 
> 赞同：0
> 
> 时间：2012-06-10T18:39:46.137
> 
> 标签：c#, asp.net, static-classes

我有下一个静态类：

```
public static class GlobalVar
{
    public static string DatabaseName = "ProjectDatabase.mdf";

    public static AdminClass Admin;

    public static string TruePath = AppDomain.CurrentDomain.BaseDirectory;

    public static string TimeStampPattern = "dd/MM/yyyy HH:mm";

    static GlobalVar()
    {
        TruePath = TruePath.Remove(TruePath.Length - 1);
        Admin = new AdminClass("Admin", "Admin");
        GlobalStatus = new Dictionary<string, string>();
        string Query = "SELECT * FROM global_status";
        DataTable Types = MyAdoHelper.ExecuteDataTable(GlobalVar.DatabaseName, Query);
        foreach (DataRow Status in Types.Rows)
        {
            GlobalStatus.Add(Status["title"].ToString(), Status["info"].ToString());
        }
    }

    public static Dictionary<string, string> GlobalStatus; 

    public static string BasePath = HttpContext.Current.Request.ApplicationPath;
} 
```

GlobalStatus 是一个字典，接收站点可​​能返回的自定义错误。当我启动项目（Microsoft Visual Web developer 2008）时，它给出了一个错误：

```
Object reference not set to an instance of an object. 
```

尝试从 GlobalStatus 获取值时（例如 GlobalVar.GlobalStatus["Page_NoAccess"]）。

仅一分钟后，当我再次启动该项目时，它运行良好。

我该如何解决这个问题，比如强制浏览器等待它填充 GlobalStatus。我需要这个类只初始化一次，因为它包含全局变量，我不想在每个浏览器请求中都调用它们。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-10T19:11:01.693

首先，我想建议您在面向对象的代码中使用全局变量概念是一个坏主意。

为了解决您的问题，您需要使用内置的、开箱即用的[ASP.NET 方法：**全局应用程序类**。](http://www.codeproject.com/Articles/228879/Global-asax-in-ASP-NET)

在此事件期间使用`Application_Start`事件处理程序并调用初始化过程。

任何反对上述陈述的都是一个坏主意。

**现在......如何做得更好**

1.  对于您发现的所有设置，请*使用*[AppSettings*或*](http://msdn.microsoft.com/en-us/library/system.configuration.configurationmanager.appsettings.aspx)设置[文件](http://msdn.microsoft.com/en-us/library/aa730869%28v=vs.80%29.aspx)。
2.  使用静态构造函数进行应用程序初始化是一个坏主意。**使用静态方法创建一个静态类，`Initialize()``Start()`**例如**，****...。**`Application_Start`在全局应用程序类的事件中调用它们。
3.  在像 ASP.NET 这样的多线程环境中具有静态字段和数据的静态类是一个很大的失败。不止一个线程可以一次初始化您的应用程序。*您的代码如何管理这种情况？*.
4.  在面向对象的软件中忘记*全局变量的概念。*使用设置（就像我在第一点说的）或创建常量或字段（静态或实例）作为将要使用它的类的一部分。

**更新和注意** 我建议这篇关于静态构造函数的[MSDN 文章](http://msdn.microsoft.com/en-us/library/k9x6w0hc%28v=vs.80%29.aspx)，以了解为什么这些在 ASP.NET 初始化中是一个坏主意。

# javascript - Chrome中的并发DOM节点修改？

> ID：10971331
> 
> 赞同：0
> 
> 时间：2012-06-10T18:40:02.060
> 
> 标签：javascript, css, dom, google-chrome, dom-node

我正在尝试以递归方式将对象重新应用`CSSStyleDeclaration`到文档的 innerHTML 中的每个节点。例如，如果您`window.getComputedStyle(document.getElementsByTagName("a")[0])`在此页面上调用，则返回的哈希中有大约 650 个不同的属性。假设我的文档的 innerHTML 中有 1000 个节点。当我遍历 innerHTML 并在每个`CSSStyleDeclaration`哈希中应用样式时，即 650,000 次调用`node.style.setProperty(key, value)`. 但是，通过循环迭代，我正在逐个处理每个节点。相反，一次对 DOM 进行 1000 次调用而不是执行此循环会更有效。问题是，如果这在 Chrome 中是可能的，我不知道怎么做。

我怀疑 Chrome 在整个 DOM 上都有一个 GIL（因为没有更好的词），但这可能只是迷信。如果不是这样，我会假设锁在节点级别。但同样，完全的迷信。我在这个没有事实的环境中运作。如果您有任何指示，我将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-10T18:52:30.640

首先，DOM 被指定为不是线程安全的，因此您几乎不可能同时应用这些属性。此外，javascript 不是并行的，因此要并行执行这些任务，您必须使用 WebWorker，它不能按原样访问 DOM，唉，不是线程安全的。

其次，您为什么不在文档中创建一个样式表，然后使用[insertRule](https://developer.mozilla.org/en/DOM/CSSStyleSheet/insertRule)附加一个新的、动态创建的规则，让浏览器的渲染引擎为您完成工作？

# octave - Octave 将字符串从文件加载到矩阵

> ID：10971332
> 
> 赞同：3
> 
> 时间：2012-06-10T18:40:10.257
> 
> 标签：octave

我有一个文件，每行都有一个单词（字符串）。如何将这个文件以八度音程读入“矩阵”。这样 a[1] = "word1"。

非常感谢您的回复。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-17T19:17:54.400

您将创建一个元胞数组：

```
input_file = fopen('vocab.txt');
number_of_lines = fskipl(input_file, Inf);
frewind(input_file);
cells = cell(number_of_lines, 1);
for i = 1:number_of_lines
    cells{i} = fscanf(input_file, '%s', 1);
end 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2015-11-25T16:24:37.170

只需使用以下[`textread (filepath, format)`](https://www.gnu.org/software/octave/doc/interpreter/Simple-File-I_002fO.html#XREFtextread)功能：

```
column1 = textread('/path/to/file', '%s');    # Where '%s' indicates how to read the values of your file: one string per index.

for i = 1:rows(column1)
    word = column1{ i };

    %do your thing...
end 
```

`column1`是一个**元胞数组**。这就是为什么我们使用`{}`它来访问它。

* * *

**注意**：如果每行包含 2 个由空格分隔的单词，您可以调用：

`[column1, column2] = textread('/path/to/file', '%s %s');`

**性能**：`textread()`是一个基于`fscanf`. 如果您确实需要文件输入的性能，那么您可能更愿意学习如何正确使用[`fscanf(...)`](https://www.gnu.org/software/octave/doc/v4.0.0/Formatted-Input.html)和设置缓冲区长度。请参阅特伦斯关于如何使用的回答`fscanf()`。
`textread()`在我的笔记本电脑上大约 30 秒内读取我的 4 列（一个 2Mb 文件）的 100K 条目。请参阅评论以获取更多解释。

# php - why are my colours changing when i use imagetruecolortopalette()?

> ID：10971343
> 
> 赞同：1
> 
> 时间：2012-06-10T18:41:23.223
> 
> 标签：php, colors, imagemagick, gd, closest

I have an image 4x4 pixels, each pixel has the exact color that i want e.g #439902 etc,

I grab my image convert it to a palette using gd's `imagetruecolortopalette()` function, then i try to find the closest color in my image to another predefined color using `imagecolorclosest()` function, the problem is that it brings back a different color altogether, one thats not in my 4x4 image, the color is close to one of my colors but i need it exact.

I think the problem is that when i use to `imagetruecolortopalette()` function all the colors in my 4x4 image slightly change,

Is there a way round this problem.?

As an example...

if i Search for ( 66,100,39 ) my closest Match is: (76,90,56).

well 76,90,56 has changed because the colour was (78,98,43) in my original image. I know its not far out but i need it to stay the same

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-10T19:45:56.983

如果您保存为 jpg，则可能是压缩问题；尝试另存为 png，因为它不压缩并且比 jpg 具有更多颜色。

从 IM 论坛中提取的一些代码：

```
exec("convert square.png[1x1+0+0] -format " .
     "\"%[fx:floor(255*u.r)],%[fx:floor(255*u.g)],%[fx:floor(255*u.b)]\" " .
     "info: 2>&1",$result);
      print_r($result); 
```

我认为这里走错了路，因为这会识别颜色，这不是你想要的？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-10T20:14:45.510

但是php已经有了这个功能：

[图像颜色精确](http://php.net/manual/en/function.imagecolorexact.php)

# iphone - 获取 UIView 的当前倾斜角度

> ID：10971345
> 
> 赞同：2
> 
> 时间：2012-06-10T18:41:37.397
> 
> 标签：iphone, xcode, uiview, cgaffinetransform, skew

如何获取倾斜图像的当前角度？

我用来扭曲它的代码是：

```
CGAffineTransform t = CGAffineTransformMake(1.0, 0.0, tan(angle*(M_PI/480)), 1.0, 0.0, 0.0); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-10T19:04:25.117

你可以尝试这样的事情：

```
CGFloat angle = [(NSNumber *)[view valueForKeyPath:@"layer.transform.rotation.z"] floatValue]; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-10-03T14:03:59.483

试试这个：

```
CGFloat radians = atan2f([self myview].transform.b, [self myview].transform.a); 
```

有了这个，你可以获得任何的当前角度`UIView`。

继续摇摆...享受... :)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-10T19:17:45.617

试试这个：

```
CGFloat skew_c = [(NSNumber *)[view valueForKeyPath:@"layer.transform.c"] floatValue]; 
```

密钥路径是猜测的，但应该可以工作。[CGAffineTransformMake 文档](http://developer.apple.com/library/ios/DOCUMENTATION/GraphicsImaging/Reference/CGAffineTransform/Reference/reference.html#//apple_ref/doc/uid/TP30000946-CH1g-F16980)。

编辑：

看起来 CGAffineTransform 被转换为 4x4[`CATransform3D`](http://developer.apple.com/library/ios/documentation/GraphicsImaging/Reference/CALayer_class/Introduction/Introduction.html#//apple_ref/doc/c_ref/CATransform3D)矩阵。

`transform`是`CALayer` `of CATransform3D`类型的属性。

这意味着您可以通过以下调用访问`m11`..参数：`m44`

```
CGFloat m11 = [(NSNumber *)[view valueForKeyPath:@"layer.transform.m11"] floatValue];
...
...
CGFloat m44 = [(NSNumber *)[view valueForKeyPath:@"layer.transform.m44"] floatValue]; 
```

你仍然需要做一些计算才能得到你的偏斜因子。[您可以从这个出色的答案](https://stackoverflow.com/a/2352402/653513)中为您的 c_factor 推导出方程式。

# java - Stop watch android - 暂停，然后从停止的地方开始

> ID：10971346
> 
> 赞同：1
> 
> 时间：2012-06-10T18:41:40.350
> 
> 标签：java, android, android-activity, runnable

我有两个按钮“开始”和“暂停”和一个 Textview。

我遇到的问题是当我按下暂停按钮然后按下开始按钮时，秒表不会从停止的地方开始。

谢谢您的帮助

```
public class StopWatch extends Activity {
    /** Called when the activity is first created. */

    private TextView timeflg;
    private Button startButton;
    private Button pauseButton;
    private long mStartTime = 0L;
    private Handler mHandler = new Handler();
    long millis = 0L;

    @Override
    public void onCreate(Bundle savedInstanceState) {
        this.requestWindowFeature(Window.FEATURE_NO_TITLE);
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);

        if (mStartTime == 0L) {
            mStartTime = SystemClock.uptimeMillis();
            mHandler.removeCallbacks(mUpdateTimeTask);
            mHandler.postDelayed(mUpdateTimeTask, 0);

            }

            timeflg = (TextView) findViewById(R.id.timeflag);

            startButton = (Button) findViewById(R.id.start);
            startButton.setOnClickListener(new View.OnClickListener() {
                public void onClick(View view){

                    mHandler.postDelayed(mUpdateTimeTask, 0);

                }
            });

            pauseButton = (Button) findViewById(R.id.pause);
            pauseButton.setOnClickListener(new View.OnClickListener() {
                public void onClick(View view){

                    mHandler.removeCallbacks(mUpdateTimeTask);

                }
            });

    }

    private Runnable mUpdateTimeTask = new Runnable() {
            public void run() {

                    millis = SystemClock.uptimeMillis() - mStartTime;

                    int seconds = (int) (millis / 1000);
                    int minutes = seconds / 60;
                    seconds = seconds % 60;
                    int milliseconds = (int) (millis%1000);
                    timeflg.setText("" + minutes + ":" + String.format("%02d",seconds)+ ":" 
                    + String.format("%03d",milliseconds));
                    mHandler.postDelayed(this,0);
            }

    };

} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-10T19:02:23.300

有问题：

`millis = SystemClock.uptimeMillis() - mStartTime;`

`mStartTime`在创建活动时初始化。然后从 mStartTime 开始计算呈现时间。

编辑：
我看你还是不明白。

按下开始按钮时初始化 mStartTime，它是当前经过的开始时间：

```
 startButton.setOnClickListener(new View.OnClickListener() {
            public void onClick(View view){
                mStartTime = SystemClock.uptimeMillis();
                mHandler.postDelayed(mUpdateTimeTask, 0);
            }
        }); 
```

计算 mCurrenLapse 时间。显示时间是过去经过的时间和当前经过的时间：

```
 private Runnable mUpdateTimeTask = new Runnable() {
        public void run() {
                mCurrentLapse = SystemClock.uptimeMillis() - mStartTime;
                //
                long displayTime = mTime + mCurrentLapse;
                .
                .
                . 
```

总时间是所有流逝的时间，当单击暂停时，当前时间流逝将添加到总时间中：

```
 pauseButton.setOnClickListener(new View.OnClickListener() {
            public void onClick(View view){
                mTime += mCurrentLapse;
                mHandler.removeCallbacks(mUpdateTimeTask);
            }
        }); 
```

# scala - Scala中的咖喱函数相关问题

> ID：10971347
> 
> 赞同：11
> 
> 时间：2012-06-10T18:41:47.720
> 
> 标签：scala

我有几个与咖喱函数相关的问题。在这里我一一问他们

1) [http://twitter.github.com/scala_school/basics.html](http://twitter.github.com/scala_school/basics.html)给出了一个柯里化函数的例子——我认为这是一个函数定义，但实际上不是。REPL 根本不认为这是一个有效的声明。

```
multiplyThenFilter { m: Int =>   m * 2 } { n: Int =>   n < 5} 
```

2) 为什么我们不能从部分参数化的方法中定义一个函数？即，以下定义有什么问题？

```
scala> def multiply(m: Int, n: Int): Int = m * n
multiply: (m: Int, n: Int)Int

scala> val timesTwo = multiply(2,_)
<console>:11: error: missing parameter type for expanded function ((x$1) => multiply(2, x$1))
       val timesTwo = multiply(2,_)
                                 ^ 
```

3）为什么我们不能使一个部分参数化的函数柯里化？即，以下定义有什么问题？

```
scala> (multiply(_,_)).curried
  res13: Int => (Int => Int) = <function1>  // THIS IS OK

scala> (multiply(20,_)).curried
<console>:12: error: missing parameter type for expanded function ((x$1) => multiply(20, x$1))
              (multiply(20,_)).curried
                           ^ 
```

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-06-10T19:23:34.620

# 问题 1

Scala School 的例子*令人*困惑——它绝对不是一个定义。在 GitHub 上存在[一个问题](https://github.com/twitter/scala_school/issues/29)，所以可能是一个错误。您可以想象一个合理的定义可能如下所示：

```
def multiplyThenFilter(f: Int => Int)(p: Int => Boolean): Int => Option[Int] = {
  i =>
    val j = f(i)
    if (p(j)) Some(j) else None
} 
```

（或者，等效地，`f andThen (Some(_) filter p)`。）

那么该示例将是一个函数，它将其输入加倍并在 a 中返回结果，`Some`如果它小于 5，`None`否则返回 a。但在对该问题作出回应之前，没有人确切知道作者的意图。

* * *

# 问题2

你`timesTwo`不起作用的原因只是 Scala 编译器不支持这种类型推断——有关一些相关细节，请参阅[这个问题](https://stackoverflow.com/q/9118264/334519)和[我的回答](https://stackoverflow.com/a/9119507/334519)。您需要使用以下选项之一：

```
def multiply(m: Int, n: Int): Int = m * n    
val timesTwo = multiply(2, _: Int)

def multiply(m: Int)(n: Int): Int = m * n    
val timesTwo = multiply(2) _ 
```

即，如果您想在这里进行类型推断，则需要使用多个参数列表。否则，您必须帮助编译器确定类型。

* * *

# 问题 3

对于您的第三个问题，假设我们有以下内容来避免您的第二个问题中的问题：

```
val timesTwo = multiply(2, _: Int) 
```

这是 a `Function1`，只是没有`curried`方法——你需要 a `Function2`（或`Function3`，等等）。

谈论使用单个参数对函数进行柯里化是没有意义的。Currying 接受一个具有多个参数的函数，并为您提供一个接受单个参数的函数，该函数返回另一个函数（它本身可能接受一个参数并返回另一个函数，等等）。

# sql - Sql IN 函数

> ID：10971351
> 
> 赞同：4
> 
> 时间：2012-06-10T18:42:16.390
> 
> 标签：sql, relational-division

我有这样的东西作为一个 sql 表：

**EmplID**   **SkillID**
1780 128
1780 133
2061 128
2068 128

假设我将字符串传递给存储过程，如“128,133”。我有一个拆分函数，所以 sql 可能如下所示：

```
SELECT DISTINCT EmplID
FROM EmplSkills
WHERE SkillID IN(SELECT data FROM dbo.Split(@Skills, ',')) 
```

您可以很容易地看到，通过 sql 语句，我们将获得 1780、2061 和 2068。我真正想要的是获得那些同时具有 128 和 133 作为技能 ID 的 EmplID，这样我应该只能获得 1780。

任何想法如何在没有一堆疯狂连接的情况下解决这个问题？

非常感谢。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-10T18:46:04.220

```
SELECT EmplID
FROM EmplSkills
WHERE SkillID IN(SELECT data FROM dbo.Split(@Skills, ','))
GROUP BY EmplID
HAVING COUNT(DISTINCT SkillID) = (SELECT COUNT(*) FROM dbo.Split(@Skills, ',')) 
```

或者，如果您使用的是 SQL Server，您可以使用 CTE 让生活更轻松。

```
; WITH Skills AS (
    SELECT DISTINCT data
    FROM dbo.Split(@Skills, ',')
)
SELECT EmplID
FROM EmplSkills
WHERE SkillID IN ( SELECT data FROM Skills )
GROUP BY EmplID
HAVING COUNT(DISTINCT SkillID) = (SELECT COUNT(*) FROM Skills) 
```

# php - WordPress share settings into javascript file

> ID：10971354
> 
> 赞同：-1
> 
> 时间：2012-06-10T18:42:51.270
> 
> 标签：php, javascript, jquery, wordpress

I am making a WordPress plugin and some of the options from the admin interface are for the JavaScript file that handles the interface of the widget.

The issue is that I do not see a practical way to echo the settings into that file. I was considering making a PHP file that fakes its file content type. Or creating a dynamic JavaScript file whenever the page loads, but currently im sharing the options through a hidden div that has the information as a base64 encoded json string that is read and loaded when the page finishes loading.

What is the best way to set my WordPress settings into my JavaScript file?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-10T18:47:22.067

将设置填充到数组中，然后使用 json_encode() 将它们转换为 JS 数组结构：

一些脚本.php：

```
<?php

$settings = array(
   'x' => 'foo',
   'y' => 'bar'
);

header('Content-type: text/javascript');
echo 'var settings = ' . json_encode($settings); 
```

然后将其加载到您的客户端 html 中：

```
<script src="somescript.php" type="text/javascript"></script> 
```

# scala - Scala：将依赖于路径的类型分配给类型投影

> ID：10971358
> 
> 赞同：1
> 
> 时间：2012-06-10T18:43:04.330
> 
> 标签：scala, inner-classes, path-dependent-type

他以下编译：

```
import scala.collection.mutable.MutableList

abstract class GeomBase[T <: DTypes]
{  
  val grids = new MutableList[GridBase]

  def hexs: MutableList[GridBase#HexG with T#HexTr] = grids.flatMap(_.hexs.toList)
  //the above compiles fine

  abstract class GridBase
  { 
    val hexs: MutableList[HexG with T#HexTr] = new MutableList[HexG with T#HexTr]

    class HexG(coodI: Cood) extends Hex
    {
    }
  }
} 
```

但是当我改变这条线时

```
def hexs: MutableList[GridBase#HexG with T#HexTr] = grids.flatMap (_.hexs.toList) 
```

为此（将 MutableList 更改为列表）

```
def hexs: List[GridBase#HexG with T#HexTr] = grids.flatMap (_.hexs.toList) 
```

它不再编译。这也不编译

```
def hexs: MutableList[GridBase#HexG with T#HexTr] = grids(0).hexs 
```

它不会编译，说我在前一种情况下需要一个 MutableList 并在后一种情况下类型不兼容。我不明白为什么。只是为了澄清以防引起混淆 HexG 是 GridBase 的内部类，它本身就是 GeomBase 的内部类。

更新：特拉维斯布朗的回答似乎为第一个错误提供了正确的解释。我已将 MutableList 的所有用途更改为 List。令人惊讶的是，这不仅阻止了第一个错误，还阻止了第二个错误。尝试使用最外层 GeomBase 类之外的类型时，我也遇到了错误。我遇到了编译器崩溃。实例化类型时。再次从 MutableLists 更改为 Lists 会意外删除其中一个错误，但不会导致编译器崩溃。我一直在为 2.10.0-M3 使用 Scala Eclipse 插件 2.1 特别版。这使我得出结论，Scala 编译器和路径相关类型可能仍然存在问题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-10T19:44:48.077

这里的问题（可能）与路径相关类型没有任何关系。考虑以下：

```
val xs: MutableList[Seq[Int]] = new MutableList ++ Seq(1 to 2, 3 to 4) 
```

现在我们可以执行以下操作，例如：

```
scala> xs.flatMap(_.toList)
res0: scala.collection.mutable.MutableList[Int] = MutableList(1, 2, 3, 4) 
```

但 a`MutableList`不是 a `List`：

```
scala> xs.flatMap(_.toList): List[Int]
<console>:10: error: type mismatch;
 found   : scala.collection.mutable.MutableList[Int]
 required: List[Int]
              xs.flatMap(_.toList): List[Int] 
```

例如，如果我们称它为 a `Seq[Int]`，我们会很好，因为`Seq`它是 的超类型`MutableList`。`List`不是（尽管有名字）。

在您的最后一个示例中，您收到一个错误，因为`grids(0).hexs`没有正确的类型 - 它不是`MutableList[GridBase#HexG with T#HexTr]`. 我不确定它是什么，因为您还没有与我们共享该代码。

* * *

作为脚注：有趣的是（或者可能不是），以下确实有效：

```
xs.flatMap(_.toList)(collection.breakOut): List[Int] 
```

不过，不要这样做。`breakOut`是[奇怪的魔法](https://stackoverflow.com/questions/1715681/scala-2-8-breakout)。

# python - python中3D曲线的保形分段三次插值

> ID：10971359
> 
> 赞同：7
> 
> 时间：2012-06-10T18:43:21.453
> 
> 标签：python, numpy, scipy, curve-fitting

我在 3D 空间中有一条曲线。我想在其上使用与 matlab 中的 pchip 类似的形状保持分段三次插值。我研究了 scipy.interpolate 中提供的函数，例如 interp2d，但这些函数适用于某些曲线结构，而不适用于我拥有的数据点。关于如何做的任何想法？

以下是数据点：

```
x,y,z
0,0,0
0,0,98.43
0,0,196.85
0,0,295.28
0,0,393.7
0,0,492.13
0,0,590.55
0,0,656.17
0,0,688.98
0,0,787.4
0,0,885.83
0,0,984.25
0,0,1082.68
0,0,1181.1
0,0,1227.3
0,0,1279.53
0,0,1377.95
0,0,1476.38
0,0,1574.8
0,0,1673.23
0,0,1771.65
0,0,1870.08
0,0,1968.5
0,0,2066.93
0,0,2158.79
0,0,2165.35
0,0,2263.78
0,0,2362.2
0,0,2460.63
0,0,2559.06
0,0,2647.64
-0.016,0.014,2657.48
-1.926,1.744,2755.868
-7.014,6.351,2854.041
-15.274,13.83,2951.83
-26.685,24.163,3049.031
-41.231,37.333,3145.477
-58.879,53.314,3240.966
-79.6,72.076,3335.335
-103.351,93.581,3428.386
-130.09,117.793,3519.96
-159.761,144.66,3609.864
-192.315,174.136,3697.945
-227.682,206.16,3784.018
-254.441,230.39,3843.779
-265.686,240.572,3868.036
-304.369,275.598,3951.483
-343.055,310.627,4034.938
-358.167,324.311,4067.538
-381.737,345.653,4118.384
-420.424,380.683,4201.84
-459.106,415.708,4285.286
-497.793,450.738,4368.741
-505.543,457.756,4385.461
-509.077,460.955,4393.084
-536.475,485.764,4452.188
-575.162,520.793,4535.643
-613.844,555.819,4619.09
-624.393,565.371,4641.847
-652.22,591.897,4702.235
-689.427,631.754,4784.174
-725.343,675.459,4864.702
-759.909,722.939,4943.682
-793.051,774.087,5020.95
-809.609,801.943,5060.188
-820.151,820.202,5085.314
-824.889,828.407,5096.606
-830.696,838.466,5110.448
-846.896,867.72,5150.399
-855.384,883.717,5172.081
-884.958,939.456,5247.626
-914.53,995.188,5323.163
-944.104,1050.927,5398.708
-973.675,1106.659,5474.246
-1003.249,1162.398,5549.791
-1032.821,1218.13,5625.328
-1062.395,1273.869,5700.873
-1091.966,1329.601,5776.411
-1121.54,1385.34,5851.956
-1151.112,1441.072,5927.493
-1180.686,1496.811,6003.038
-1210.257,1552.543,6078.576
-1239.831,1608.282,6154.121
-1269.403,1664.015,6229.658
-1281.875,1687.521,6261.517
-1298.67,1720.451,6304.797
-1317.209,1760.009,6353.528
-1326.229,1780.608,6377.639
-1351.851,1844.711,6447.786
-1375.462,1912.567,6515.035
-1379.125,1923.997,6525.735
-1397.002,1984.002,6579.217
-1416.406,2058.808,6640.141
-1433.629,2136.794,6697.655
-1448.619,2217.744,6751.587
-1453.008,2244.679,6768.334
-1461.337,2301.426,6801.784
-1471.745,2387.628,6848.122
-1479.813,2476.093,6890.468
-1485.519,2566.597,6928.713
-1488.852,2658.874,6962.744
-1489.801,2752.688,6992.481
-1488.358,2847.765,7017.828
-1484.534,2943.865,7038.72
-1478.344,3040.704,7055.099
-1469.806,3137.966,7066.915
-1469.799,3138.035,7066.922
-1458.925,3235.574,7074.155
-1445.742,3333.07,7076.775
-1444.753,3339.757,7076.785
-1438.72,3380.321,7076.785
-1431.268,3430.42,7076.785
-1416.787,3527.779,7076.785
-1402.308,3625.128,7076.785
-1401.554,3630.192,7076.785
-1387.827,3722.487,7076.785
-1373.347,3819.836,7076.785
-1358.866,3917.195,7076.785
-1357.872,3923.882,7076.785
-1353.32,3954.485,7076.785
-1344.387,4014.544,7076.785
-1329.906,4111.903,7076.785
-1315.427,4209.252,7076.785
-1300.946,4306.611,7076.785
-1286.466,4403.96,7076.785
-1271.985,4501.319,7076.785
-1257.504,4598.678,7076.785
-1243.025,4696.027,7076.785
-1228.544,4793.386,7076.785
-1214.065,4890.735,7076.785
-1199.584,4988.094,7076.785
-1185.104,5085.443,7076.785
-1170.623,5182.802,7076.785
-1156.144,5280.151,7076.785
-1141.663,5377.51,7076.785
-1127.183,5474.859,7076.785
-1112.703,5572.218,7076.785
-1098.223,5669.567,7076.785
-1083.742,5766.926,7076.785
-1069.263,5864.275,7076.785
-1054.782,5961.634,7076.785
-1040.302,6058.983,7076.785
-1025.821,6156.342,7076.785
-1011.342,6253.692,7076.785
-996.861,6351.05,7076.785
-982.382,6448.4,7076.785
-967.901,6545.759,7076.785
-953.421,6643.108,7076.785
-938.94,6740.467,7076.785
-924.461,6837.816,7076.785
-909.98,6935.175,7076.785
-895.499,7032.534,7076.785
-895.234,7034.314,7076.785
-883.075,7130.158,7076.785
-874.925,7228.243,7076.785
-871.062,7326.579,7076.785
-871.491,7425,7076.785
-876.213,7523.299,7076.785
-885.218,7621.308,7076.785
-898.489,7718.822,7076.785
-916.003,7815.673,7076.785
-937.722,7911.659,7076.785
-963.61,8006.615,7076.785
-993.613,8100.342,7076.785
-1027.678,8192.681,7076.785
-1065.735,8283.437,7076.785
-1083.912,8323.221,7076.785
-1107.12,8372.742,7076.785
-1148.885,8461.861,7076.785
-1190.655,8550.989,7076.785
-1232.42,8640.108,7076.785
-1274.19,8729.236,7076.785
-1315.955,8818.354,7076.785
-1357.724,8907.482,7076.785
-1399.49,8996.601,7076.785
-1441.259,9085.729,7076.785
-1483.024,9174.848,7076.785
-1486.296,9181.829,7076.785
-1510.499,9231.861,7076.785
-1526.189,9263.304,7076.785
-1570.139,9351.377,7076.785
-1614.085,9439.441,7076.785
-1658.035,9527.514,7076.785
-1701.98,9615.578,7076.785
-1745.93,9703.651,7076.785
-1789.876,9791.715,7076.785
-1833.826,9879.788,7076.785
-1877.771,9967.852,7076.785
-1921.721,10055.925,7076.785
-1965.667,10143.989,7076.785
-2009.625,10232.059,7076.785
-2053.585,10320.115,7076.785
-2097.551,10408.18,7076.785
-2141.512,10496.237,7076.785
-2185.477,10584.302,7076.785
-2229.438,10672.359,7076.785
-2273.403,10760.424,7076.785
-2317.364,10848.481,7076.785
-2352.213,10918.285,7076.785 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-06-10T22:31:55.507

您可能想像这样使用[splprep() 和 splev()](http://docs.scipy.org/doc/scipy/reference/generated/scipy.interpolate.splev.html#scipy.interpolate.splev)（评论中的基本解释）：

```
import scipy
from scipy import interpolate
import numpy as np

#This is your data, but we're 'zooming' into just 5 data points
#because it'll provide a better visually illustration
#also we need to transpose to get the data in the right format
data = data[100:105].transpose()

#now we get all the knots and info about the interpolated spline
tck, u= interpolate.splprep(data)
#here we generate the new interpolated dataset, 
#increase the resolution by increasing the spacing, 500 in this example
new = interpolate.splev(np.linspace(0,1,500), tck)

#now lets plot it!
from mpl_toolkits.mplot3d import Axes3D
import matplotlib.pyplot as plt
fig = plt.figure()
ax = Axes3D(fig)
ax.plot(data[0], data[1], data[2], label='originalpoints', lw =2, c='Dodgerblue')
ax.plot(new[0], new[1], new[2], label='fit', lw =2, c='red')
ax.legend()
plt.savefig('junk.png')
plt.show() 
```

产生：

![enter image description here](../Images/dcbb9dd512257c2ff2e20d0a4567a0ed.png)

这既漂亮又流畅，这也适用于您完整发布的数据集。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-11T12:03:08.320

Scipy 确实有`pchip`---`scipy.interpolate`但是，呃，有人忘记在文档中列出它：

```
import numpy as np
import matplotlib.pyplot as plt
from scipy.interpolate import pchip
x = np.linspace(0, 1, 20)
y = np.random.rand(20)
xi = np.linspace(0, 1, 200)
yi = pchip(x, y)(xi)
plt.plot(x, y, '.', xi, yi) 
```

对于 3-D 数据，只需分别对 3 个坐标中的每一个进行插值。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-24T19:24:37.870

Here is another solution that does what I wanted (shape-preserving).
The problem is that there is no clear formula or equation to connect the points. The answer lies in creating a new data set that is common to the different points. This new data set is the length along the path (norm). We then use interp1 to interpolate each set.

```
import numpy as np
import matplotlib as mpl
from matplotlib import pyplot as plt
from mpl_toolkits.mplot3d import Axes3D

# read data from a file
# as x, y , z

# create a new array to hold the norm (distance along path)
npts = len(x)
s = np.zeros(npts, dtype=float)
for j in range(1, npts):
    dx = x[j] - x[j-1]
    dy = y[j] - y[j-1]
    dz = z[j] - z[j-1]
    vec = np.array([dx, dy, dz])
    s[j] = s[j-1] + np.linalg.norm(vec)

# create a new data with finer coords 
xvec = np.linspace(s[0], s[-1], 5000)

# Call the Scipy cubic spline interpolator
from scipy.interpolate import interpolate

# Create new interpolation function for each axis against the norm 
f1 = interpolate.interp1d(s, x, kind='cubic')
f2 = interpolate.interp1d(s, y, kind='cubic')
f3 = interpolate.interp1d(s, z, kind='cubic')

# create new fine data curve based on xvec
xs = f1(xvec)
ys = f2(xvec)
zs = f3(xvec)

# now let's plot to compare
#1st, reverse z-axis for plotting
z = z*-1 
zs = zs*-1

dpi = 75
fig = plt.figure(dpi=dpi, facecolor = '#617f8a')
threeDPlot = fig.add_subplot(111, projection='3d')
fig.subplots_adjust(left=0.03, bottom=0.02, right=0.97, top=0.98)
mpl.rcParams['legend.fontsize'] = 10

threeDPlot.scatter(x, y, z, color='r')  # Original data as a scatter plot
threeDPlot.plot3D(xs, ys, zs, label='Curve Fit', color='b', linewidth=1)
threeDPlot.legend()
plt.show() 
```

The result is shown int he figure below. the blue line is the curve fit data while the red dots are the original data set. One thing I noticed with this approach though, is that if the data set is long, then interpolate.interp1d is not efficient and takes long time.

![curve fit interpolation](../Images/7053234fcf6ec390304df1d72a61d8b4.png)

# php - PHP本地化

> ID：10971363
> 
> 赞同：4
> 
> 时间：2012-06-10T18:44:09.077
> 
> 标签：php, localization

我正在做一个小项目，包括后端的注册、登录、密码重置和用户管理。我必须为不同的语言创建翻译文件，而不是使用 gettext 之类的东西（我对此一无所知），我决定为每个语言文件使用一个静态数组来实现一个非常简单的方法，如下所示：

```
function plLang($phrase) {
    $trimmed = trim($phrase);
    static $lang = array(
    /* -----------------------------------
    1\. REGISTRATION HTML
    ----------------------------------- */
    'LNG_1'     => 'some text',
    'LNG_2'     => 'some other text',
    etc. ...
    );

    $returnedPhrase = (!array_key_exists($trimmed,$lang)) ? $trimmed : $lang[$trimmed];
    echo $returnedPhrase;
} 
```

它工作正常，在这个阶段非常快，但我的标记现在到处都是 php 语言标签，我不确定我是否做出了正确的决定。我以前从未这样做过，所以我不知道我在期待什么。似乎当我全部完成时，这个文件将有一英里长。

这是这样做的好方法吗？你有没有更好的方法可以建议？

谢谢！

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-10T20:05:12.607

这就是我在我的 cms 中所做的：

*   对于`each`我开发的插件/程序/实体（你命名它），我创建一个`/translations`文件夹。
*   我把我所有的翻译都放在那里，命名为**el.txt、de.txt、uk.txt**等。所有语言
*   我将翻译数据存储在**JSON**中，因为它易于存储、易于阅读并且每个人都最容易发布他们的。
*   files can be easily UTF8 encoded in-file without messing with databases, making it possible to read them in file-mode. (just `JSON.parse` them)
*   on installation of such plugins, i just loop through all translations and put them in database, each language per table row. (etc. `a data column of TEXT datatype`)
*   for each page render i just query once the database for taking this row of selected language, and call `json_decode()` to the whole result to get it once; then put it in a **$_SESSION** so the next time to *get flash-speed translated strings* for current selected language.

the whole thing was developed having i mind both **performance and compatibility**.

in your case a row in such file could be like:

in **en.txt**

```
{"id":"LNG_1","str":"My word"} 
```

in **de.txt**

```
{"id":"LNG_1","str":"Mein Wort"} 
```

The current language could be stored in session like **$_SESSION["language"];** and use that as starting point. Then, you can read translations like:

```
lang("LNG_1"); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-10T20:39:07.917

Many frameworks store those language-arrays in separate files, wherein each array in any language has the same name. Your language-function then just requires the appropriate file for the user-selected language (`require('lang.en.php')`).

```
// lang.en.php
$languageStrings = array(
    'login' => 'Log in',
);

// lang.ru.php
$languageStrings = array(
    'login' => 'Авторизовать в системе',
);

// lang.ja.php
$languageStrings = array(
    'login' => 'ログイン',
); 
```

Which language currently is in use (e.g. selected by the user), can be determined via some globally accessible variable.

Idea: Use [IETF language tags](http://en.wikipedia.org/wiki/IETF_language_tag) as language keys.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-10T18:45:51.073

您应该使用支持国际化的模板引擎。
例如，我自己的模板引擎允许我执行以下操作：

```
<p>(_text to be localized here)</p> 
```

并且该标记内的文本将被翻译。这样可以避免每次打开模板文件中的 php 标签，例如：

```
<p><?php plLang('lang'); ?></p> 
```

无论如何，标准解决方案是使用 gettext [http://php.net/manual/en/book.gettext.php](http://php.net/manual/en/book.gettext.php)

例子：

```
// alias _() for gettext()
echo _("Have a nice day"); 
```

# java - 使用 Google+ API 发帖

> ID：10971365
> 
> 赞同：1
> 
> 时间：2012-06-10T18:44:26.963
> 
> 标签：java, android, google-plus

是否可以使用当前的 G+ API 发布到用户墙？我只能找到有关获取信息的信息。似乎目前不支持发布任何数据。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-10T19:08:19.223

来自[https://developers.google.com/+/api/](https://developers.google.com/+/api/)的信息：

> 注意：Google+ API 目前提供对公共数据的只读访问权限。所有 API 调用都需要 OAuth 2.0 令牌或 API 密钥。

# java - 类是否扩展了另一个注解？

> ID：10971368
> 
> 赞同：4
> 
> 时间：2012-06-10T18:44:50.580
> 
> 标签：java, annotations

我有一个类 Foo，它有一个 @Entity 和 @Table 注释，还有一个类 Bar，它扩展了 Foo。注释是在 Bar 类上吗？如果没有，我可以强迫吗？

非常感谢！山姆。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-10T18:50:14.247

注释不会被继承。

你可以在这里阅读更多：http: [//fusionsoft-online.com/articles-java-annotations.php](http://fusionsoft-online.com/articles-java-annotations.php)

其他一些参考资料： [https](https://stackoverflow.com/a/1644135/1001027) ://stackoverflow.com/a/1644135/1001027 和 [https://stackoverflow.com/a/4745820/1001027](https://stackoverflow.com/a/4745820/1001027)

[例外是使用@Inherited](http://docs.oracle.com/javase/1.5.0/docs/api/java/lang/annotation/Inherited.html)注释其声明的注释。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-12T22:54:22.247

和注解默认情况下不被继承，但是你可以使用超类上的`@Entity`注解使它们被继承到子类。`@Table``@Inheritance`

有关更多信息，请参见此处：[http ://en.wikibooks.org/wiki/Java_Persistence/Inheritance](http://en.wikibooks.org/wiki/Java_Persistence/Inheritance)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-10T18:50:23.473

检查[@MappedSuperclass](http://docs.oracle.com/javaee/5/api/javax/persistence/MappedSuperclass.html)注释。

# uinavigationcontroller - monotouch 旋转和导航视图控制器

> ID：10971372
> 
> 赞同：1
> 
> 时间：2012-06-10T18:45:25.997
> 
> 标签：uinavigationcontroller, xamarin.ios, rotation

我是 monotouch 的新手，使用 NavigationViewController 时遇到问题：在 FinishedLauching 方法中，如果我评论这一行：

window.AddSubview(viewController.NavigationController.View);

窗口旋转没有问题，但导航控制器不起作用。如果此行在代码中（不是注释），则 navigationController 可以工作，但屏幕不会旋转。

任何人都知道如何解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-11T02:27:11.523

设置 UIWindow 的 RootViewController 属性是使用导航控制器的正确方法。

```
MyViewCtrl ctrl1 = new MyViewCtrl ("One");
_nav = new UINavigationController (ctrl1);

window.RootViewController = _nav; 
```

也不要忘记覆盖控制器中的 ShouldAutorotateToInterfaceOrientation 方法。这是一个完整的样本

```
[Register ("AppDelegate")]
public partial class AppDelegate : UIApplicationDelegate
{
    UIWindow window;
    UINavigationController _nav;

    public override bool FinishedLaunching (UIApplication app, NSDictionary options)
    {
        window = new UIWindow (UIScreen.MainScreen.Bounds);

        MyViewCtrl ctrl1 = new MyViewCtrl ("One");
        _nav = new UINavigationController (ctrl1);

        window.RootViewController = _nav;
        window.MakeKeyAndVisible ();

        return true;
    }
}

public class MyViewCtrl : UIViewController
{
    public MyViewCtrl (string title)
    {
        this.Title = title;
    }

    public override void ViewDidLoad ()
    {
        base.ViewDidLoad ();
        this.View.BackgroundColor = UIColor.White;

        if (this.Title.Equals ("One"))
        {
            UIBarButtonItem testButton = 
                new UIBarButtonItem ("Two", UIBarButtonItemStyle.Bordered, 
                                     (object sender, EventArgs e) => {
                    this.NavigationController.PushViewController (
                        new MyViewCtrl ("Two"), true);
                } );
            this.NavigationItem.RightBarButtonItem = testButton;    
        }
    }   

    public override bool ShouldAutorotateToInterfaceOrientation (UIInterfaceOrientation toInterfaceOrientation)
    {
        return true;
    }
} 
```

# android - 拉动刷新不是 Android 中的 ListView

> ID：10971379
> 
> 赞同：2
> 
> 时间：2012-06-10T18:45:41.787
> 
> 标签：android

您好我想在我的 Android 应用程序中实现拉取刷新。但是对于 ListViews 来说只有 Implimentations。我想刷新 TextViews，因为这些 TextViews 中的文本是从 XML（在线）解析的，所以每当我更改 XML 并且您要刷新时，TextViews 都会更新。是否有可能暗示这一点。有没有类似的项目或git？

谢谢！

编辑：所以基本上我只想拉动刷新动画。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-10T19:35:06.963

我肯定会看看[Chris Banes 的 pull-to-refresh 实现](https://github.com/chrisbanes/Android-PullToRefresh)。他的代码不仅包括这种交互风格`ListView`，还包括`GridView`和[`WebView`](https://github.com/chrisbanes/Android-PullToRefresh/blob/master/library/src/com/handmark/pulltorefresh/library/PullToRefreshWebView.java)。

*尤其是后者对您的情况很感兴趣，因为它是不*使用适配器作为其内容的视图的拉动刷新的示例实现。如果您查看源代码，您会发现 Banes 项目中的每个具体的 pull-to-refreh 视图都从 generic 扩展而来[`PullToRefreshBase`](https://github.com/chrisbanes/Android-PullToRefresh/blob/master/library/src/com/handmark/pulltorefresh/library/PullToRefreshBase.java)，其中包含动画和刷新的大部分逻辑。拥有该基类的好处是对任何其他类型的视图（例如 a `TextView`）执行相同的操作应该非常简单。

这种方法的唯一缺点是该实现是其他视图的包装器，这意味着您将需要编写几行额外的代码来获取实际视图。所以它不是一个完整的替代品。但是，它的功能和特性远远超过了那个小小的不便。:)

# ruby-on-rails - 设计一个平台……还是一个 API？

> ID：10971384
> 
> 赞同：0
> 
> 时间：2012-06-10T18:45:52.567
> 
> 标签：ruby-on-rails, ruby

所以我正在考虑构建一个小提醒应用程序。我希望它可以在各种媒体（irc、电子邮件、命令行、网络）上使用，并且正在考虑如何在不使用大量胶带的情况下设计这样的东西。

因此，例如“提醒我在 20 分钟内倒垃圾”将是用户可以提交的一件事。然后，这将在 20 分钟内提醒该人，如果可用则使用提交的媒体，否则使用默认媒体（例如电子邮件）。

所以，我不太确定什么是设计这个的好方法。显然，我觉得像 email 和 irc 之类的东西需要不同的逻辑并且需要单独实现，但我觉得否则我想充实一个坚实的核心，我可以通过各种方式扩展它。我只是不知道如何设计这样的东西或什么是好的模型。

我是一名 RoR 开发人员，将用 ruby​​ 构建它。

那么，解决这个问题的好方法是什么？推荐阅读......类似的问题......我正在尝试获得实现这一点的方向，但不知道在哪里看。这基本上是一个API，不是吗？（显然以前从未做过）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-10T19:22:44.493

听起来是个好主意！这里有一些我认为会有所帮助的资源。

每当您有许多不同的服务直接与您的服务交互时，到目前为止，*最简单*（在我看来也是最理智的）实现这一点的方法是创建一个 REST 服务。IRC、web、命令行——所有这些都可以与 RESTful 界面交互。

Rails 默认是 RESTful 的，所以只要使用标准的 Rails 约定，你就可以得到一个很好的标准 RESTful API。

此外，Github 上有许多用 Ruby 编写的库，它们使与 IRC 交互和创建命令行实用程序变得非常容易。

至于电子邮件，最简单的方法是使用服务（例如[Mailgun](http://mailgun.com)）。使用 Mailgun，您可以创建可以接收邮件的电子邮件地址（例如remind_me@reminderapp.com）。Mailgun 完成所有繁重的工作来接收电子邮件并将其解析出来，并可以将其直接发送到应用程序中的 API 端点。有关更多信息，请参阅[他们的文档](http://documentation.mailgun.net/user_manual.html#receiving-messages)。（需要注意的是，还有其他服务，例如[Send Grid](http://sendgrid.com)也提供入站邮件处理。我用过很多，我推荐 Mailgun。）

我还建议设置一个作业队列来处理提醒和出站通知的入站创建。[Resque](https://github.com/defunkt/resque)是迄今为止用 Ruby 编写的最好的库（尽管[Sidekiq](https://github.com/mperham/sidekiq)是我喜欢使用的一个有趣的新替代方案）。Resque 有几个插件，例如[resque_mailer](https://github.com/zapnap/resque_mailer)，可以非常轻松地发送电子邮件。您还可以使用[resque_scheduler](https://github.com/bvandenbos/resque-scheduler)来安排将来发送的通知（例如，在您的示例中，在 20 分钟内）。

如果您也有兴趣发送 SMS 通知，我会查看[Twilio](http://www.twilio.com/)或[Moonshado](http://moonshado.com/)。一个免费的解决方案是使用运营商的电子邮件到 SMS 网关，但一般来说，传送能力是这些网关的一个问题。[SMS-fu](https://github.com/brendanlim/sms-fu)是一个很好的（但旧的）宝石，但你也可以在[网上](http://www.mutube.com/projects/open-email-to-sms/gateway-list/)找到一个列表并自己做。

您还应该研究[Chronic](https://github.com/mojombo/chronic)，这是一个很棒的日期和时间自然语言解析器（例如，它可以帮助您在“20 分钟内”进行解析）。

希望这可以帮助！

# c - C如何将位掩码为char数组

> ID：10971388
> 
> 赞同：0
> 
> 时间：2012-06-10T18:46:23.830
> 
> 标签：c, mask, bitmask

我有一个 char[16] 数组，我从用户那里得到输入：输入例如 - 15, 21,23, -1

我需要将位置 15,21 和 23 的位值设置为“1”。-1 将完成程序。

每个 char[16] 数组代表 0-127 的值，代表位。我在将“1”输入 15,21 和 23 个单元格时遇到问题。

这是我的程序

```
int temp;
char A[16];
/*Sets all the cells values to o*/
memset(A, 0, 16*sizeof(char));
While (int != -1)
{
    scanf("Enter values from the user:%d", val");
    div = (temp/8);
    mod = (temp%8);
    A[div] |= (mod<<=1);
} 
```

它没有将单元格 15,21 和 23 的值设置为“1”的问题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-10T19:14:13.397

使用它来设置正确的位：

```
A[div] |= (1<<mod); 
```

相关问题：[如何设置、清除和切换单个位？](https://stackoverflow.com/questions/47981/how-do-you-set-clear-and-toggle-a-single-bit-in-c)

完整代码示例：

```
#include <iostream>

int main() {
    unsigned char A[16];
    memset(A, 0, sizeof(A));
    int t;
    std::cin >> t;
    while (t != -1)
    {
        int div = (t/8);
        int mod = (t%8);
        A[div] |= (1<<mod);
        std::cin >> t;
    }
    for(int i = 0; i < 16; ++i) {
        std::cout << (int)A[i] << " ";
    }
    std::cout << std::endl;
    return 0;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-10T19:38:42.990

未为 char 定义位域（如果您使用 char，则使用 unsigned..），请使用 unsigned int。或 C99[布尔](http://pubs.opengroup.org/onlinepubs/007904875/basedefs/stdbool.h.html)类型。[https://stackoverflow.com/a/3971334/1419494](https://stackoverflow.com/a/3971334/1419494)

# javascript - 为什么〜0是-1？

> ID：10971392
> 
> 赞同：5
> 
> 时间：2012-06-10T18:46:52.097
> 
> 标签：javascript, math, binary

所以当我[读到的时候`~`](https://developer.mozilla.org/en/JavaScript/Reference/Operators/Bitwise_Operators#section_7)，

> 对每个位执行 NOT 运算符。

所以我尝试了：

```
 0 = 00000000000000000000000000000000

         so ~0 should be

~0 = 11111111111111111111111111111111 
```

但是当我尝试时，它返回`-1`. 不是`11111111111111111111111111111111`十进制`4294967295`吗？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-06-10T18:48:19.617

它被解释为有符号整数，并且在二进制补码中，所有位为 1 的整数是`-1`.

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-06-10T18:48:22.247

仅当类型为无符号时。有符号整数使用最高位作为否定标志 - 因此将其设置为 1 会导致负数。请参阅[二的补码](http://en.wikipedia.org/wiki/Two%27s_complement)。

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2012-06-10T18:48:14.483

`1`所有s的位模式`4294967295`用于无符号整数或超过*32 位*的有符号整数。对于以*二进制补码*表示的*32 位*有符号整数，其.*`-1`*

# asp.net - 在 .aspx 页面上引发 404

> ID：10971394
> 
> 赞同：2
> 
> 时间：2012-06-10T18:46:59.773
> 
> 标签：asp.net

我有一个 ASP.NET 4.0 Web 表单应用程序 (IIS 7)，我在其中使用 URL 路由来允许友好的 URL。例如，代替`Blog.aspx?title=the-blog-title`，我允许`Blog/the-blog-title`。

我的问题是：如何防止用户直接访问 Blog.aspx？我在 web.config 中包含了以下设置：

```
<httpHandlers>
  <add verb="*" path="*.aspx" type="System.Web.HttpForbiddenHandler" />
</httpHandlers> 
```

这可行，但它显示“未提供此类页面”错误。是否可以使用 IIS 或 web.config 为所有 .aspx 页面请求简单地显示 404 错误？（我知道如何以编程方式执行此操作，但如果可能，我更愿意使用配置文件。）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-10T18:58:58.453

使用[URL 重写](http://www.iis.net/download/urlrewrite)将有问题的地址更改为您喜欢的地址。这是一篇文章[，解释了](http://coderjournal.com/2010/03/difference-between-routing-rewriting/)这两种想法之间的区别。

**URL重写的SEO方面**

URL 重写不会稀释 SEO；实际上，这就是您通过重写 URL 来建立[规范 URL的方式。](http://www.mattcutts.com/blog/seo-advice-url-canonicalization/)搜索引擎只能看到重写后的 URL，而不是用于请求的 URL。

例如，如果您有以下 URL 都指向您的主页：

*   [http://example.com/](http://example.com/)
*   [http://example.com/default.aspx](http://example.com/default.aspx)
*   [http://www.example.com/](http://www.example.com/)
*   [http://www.example.com/default.aspx](http://www.example.com/default.aspx)

然后，您可以重写 URL，以便任何请求上述任何 URL 的人都将获得 URL `http://www.example.com/`。无论最初如何访问该页面，此 URL 都是搜索引擎唯一可以看到的 URL。

**重写是如何工作的**

当您请求 URL 时，无论是 for`example.com/blog.aspx`还是`example.com/blog`，请求都会发送到 Web 服务器。在那里，URL 重写引擎评估请求标头中的 URL。如果 URL 匹配任何重写规则（例如，删除`.aspx`扩展名），则 Web 服务器发出`301 Permanently Moved`响应代码，新 URL 包含在响应标头中。

收到响应后，浏览器请求新的 URL。搜索引擎机器人喜欢`googlebot`看到永久重定向代码并将该链接的索引更改为请求的 URL。因此，如果它已索引`example.com/blog.aspx`，或任何人链接到它，`301 Permanently Moved`响应会告诉蜘蛛新 URL 实际上是`example.com/blog`. 因此，在蜘蛛眼中，`example.com/blog.aspx`是`example.com/blog`。

这就是人们在不丢失 PageRank 的情况下移动网站和页面的方式，因为重写引擎将蜘蛛指向新页面，因此新页面名称与旧页面名称保持相同的 PageRank。

URL 重写也是访问站点的方式，以该站点为例，`www.stackoverflow.com`并让浏览器实际显示`stackoverflow.com`（没有`www`）。`www.stackflow.com`重写引擎告诉浏览器（和蜘蛛）实际调用了对的引用`stackoverflow.com`。

* * *

虽然您已经找到了满意的解决方案，但我强烈建议您花一些时间研究 URL 重写，因为它比发送错误消息更优雅、更专业。它还允许您将所有`non-www`请求重定向到`www`url，进一步防止稀释您的 SEO 排名。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-10T23:32:24.663

我决定只实现一个自定义 HTTP 处理程序并返回 404。

```
public class PageNotFoundHttpHandler : IHttpHandler
{
    public bool IsReusable
    {
        get { return false; }
    }

    public void ProcessRequest(HttpContext context)
    {
        context.Response.StatusCode = 404;

        context.ApplicationInstance.CompleteRequest();
    }
} 
```

在 web.config 中：

```
<httpHandlers>
  <add verb="*" path="*.aspx" type="PageNotFoundHttpHandler" />
</httpHandlers> 
```

编辑：

为每个 saluce 的答案提供 301 重定向是一个更优雅的解决方案。尽管 URL 重写/重定向更多地取决于特定的 Web 服务器，但在我的情况下，我使用的是 IIS 7，并且 URL Rewrite 模块非常好。

# python - 装饰器将输入存储在列表中以调用每个“n”调用？

> ID：10971398
> 
> 赞同：0
> 
> 时间：2012-06-10T18:47:27.890
> 
> 标签：python, list, functional-programming, decorator, delayed-execution

如何编写一个装饰器，将该函数的输入存储在 a 中`list`，并且只在存储后调用该函数`n`？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-10T18:47:28.730

`func`每 100,000 次调用调用一次，在运行之前使用with `@counter`：

```
def counter(func):
    def wrapper(val, *args, **kwargs):
        if val:
            wrapper.count = wrapper.count + 1
            if wrapper.count % 100000 == 0: # insert 100,000 at a time, should be speedier thanks to `.executemany()`
                to_logfile(str(wrapper.count) + '\n', 'counter2.log')
                return func(wrapper.valarr, *args, **kwargs)
            else:
                if len(wrapper.valarr)==1000000:
                    wrapper.vallarr = []
                wrapper.valarr.append([val])
                return
    wrapper.count = 0
    wrapper.valarr = []

    return wrapper 
```

（随时提出改进建议）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-10T19:34:29.367

这是一个类实现，因为其他人已经提交了函数实现：

```
class IntervalCache(object):

    def __init__(self, f):
        self._f = f
        self._cache = []
        self._n = 0
        self._interval = 1000

    def __call__(self, *args, **kwargs):
        if self._n == self._interval:
            result = [self.f(*c_args, **c_kwargs) for c_args, c_kwargs in self._cache]
            self._n = 0
            self._cache = []
            return result + [self.f(*args, **kwargs)]
        else:
            self._cache.append((*args, **kwargs))
            self._n += 1

    @property
    def getCache(self):
        return self._cache

    def resetCache(self):
        self._cache = []
        self._n = 0

    def getInterval(self):
        return self._interval

    def setInterval(self, value):
        self._interval = value

    interval = property(getInterval, setInterval) 
```

用法：

```
#wrapping a function

@IntervalCache
def foo(*args, **kwargs):
    print args, kwargs
    return True

#setting the caching interval
foo.interval = 10

#calling foo a bunch of times
for i in range(20):
    print foo(i, i+1, bar=i*2)

#retrieving the contents of the cache
print foo.getCache()

#resetting the contents of the cache
foo.resetCache() 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-10T19:50:02.137

我假设

*   您的函数接受任意数量的位置参数
*   `f(a); f(b)`是相同的`f(a, b)`
*   它什么也不返回（任何结果都是副作用）

.

```
import functools

class Batcher(object):
    def __init__(self, n=100):
        self.n = n

    def __call__(self, fn):
        @functools.wraps(fn)
        def _fn(*args):
            _fn.cache.extend(args)
            _fn.calls += 1
            if _fn.calls == _fn.n:
                fn(*_fn.cache)
                _fn.cache = []
                _fn.calls = 0
        _fn.n = self.n
        _fn.cache = []
        _fn.calls = 0
        return _fn 
```

然后测试它，

```
@Batcher(20)
def mysum(*args):
    print sum(args)

for i in range(1,25):
    mysum(i) 
```

印刷

```
210    # <- result of sum(1..20) 
```

# ruby-on-rails - Rails：form_for 中的奇怪行为

> ID：10971401
> 
> 赞同：0
> 
> 时间：2012-06-10T18:47:32.767
> 
> 标签：ruby-on-rails, routes, crud, form-for

我有一个命名空间资源，但只是在控制器目录中。所以在 routes.rb 中：

```
namespace :admin do
  resources :user
end 
```

这意味着：

```
admin_user_index GET    /admin/user(.:format)                  admin/user#index
                 POST   /admin/user(.:format)                  admin/user#create
  new_admin_user GET    /admin/user/new(.:format)              admin/user#new
 edit_admin_user GET    /admin/user/:id/edit(.:format)         admin/user#edit
      admin_user GET    /admin/user/:id(.:format)              admin/user#show
                 PUT    /admin/user/:id(.:format)              admin/user#update
                 DELETE /admin/user/:id(.:format)              admin/user#destroy 
```

除了“new”动作外，一切都很好，这很奇怪，因为 _form 渲染在“edit”动作中是相同的，而且效果很好。这是我在管理目录中的控制器：

```
class Admin::UserController < ApplicationController
# GET /users
def index
  @users = User.all
end

# GET /users/1
def show
  @user = User.find(params[:id])
end

# GET /users/new
def new
  @user = User.new
end

# GET /users/1/edit
def edit
  @user = User.find(params[:id])
end

# POST /users
def create
  @user = User.new(params[:user])
  respond_to do |format|
    if @user.save
      format.html { redirect_to @user, notice: 'User was successfully created.' }
    else
      format.html { render action: "new" }
    end
  end
end

# PUT /users/1
def update
  @user = User.find(params[:id])
  respond_to do |format|
    if @user.update_attributes(params[:user])
      format.html { redirect_to [:admin ,@user], notice: 'User was successfully updated.' }
    else
      format.html { render action: "edit" }
    end
  end
end

end 
```

**这是导致错误的表单的第一行：未定义的方法`admin_users_path'**

```
<%= form_for [:admin, @user] do |f| %> 
```

我无法弄清楚错误在哪里。有什么建议吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-10T18:50:40.530

Rails 约定说控制器应该是多元化的。如果您不想遵循该约定，可以使用 :url => 在 form_for 标记中设置 URL `admin_user_path(@user)`。不过，我强烈建议使用 Rails 约定，否则您将经常与需要覆盖默认值的此类问题作斗争。

You can easily update this code to use the Rails conventions by changing your controller class to `Admin::UsersController` and the route to `resources :users`

# python - 标准输入的 python cat (echo) 等效项

> ID：10971404
> 
> 赞同：3
> 
> 时间：2012-06-10T18:47:41.170
> 
> 标签：python, echo, stdin

我认为这个程序会逐行回显我的控制台输入：

```
import os, sys

for line in sys.stdin:
    print line 
```

不幸的是，它等待 EOF ( `Ctrl`+ `D`) 然后产生输出。我应该如何修改我的程序以逐行获取输出？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-06-10T19:02:53.567

Python 2.x：

```
for line in iter(sys.stdin.readline, ''):
    print line, 
```

Python 3.x：

```
for line in iter(sys.stdin.readline, ''):
    print(line, end='') 
```

请参阅[`iter()`](http://docs.python.org/library/functions.html#iter)带有两个参数的文档，它实际上是从这样的文件中读取的示例之一。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-10T18:55:09.107

Python 2.x：

```
while True:
  sys.stdout.write(sys.stdin.readline()) 
```

Python 3.x：

```
while True:
  print(sys.stdin.readline(), end = "") 
```

当您使用该`for line in file:`语法时，Python 会为您管理缓冲，这意味着您无法控制在循环开始执行之前将读取多少行。当您调用`file.readline()`时，它将从文件中读取一行并执行一次循环。

# clojure - Leiningen, :warn-on-reflection。仅适用于当前项目

> ID：10971409
> 
> 赞同：8
> 
> 时间：2012-06-10T18:48:12.523
> 
> 标签：clojure, leiningen

如果我在 Leiningen (Ver. 2) 中打开 :warn-on-reflection ，我不仅会收到当前项目的警告，还会收到依赖项的警告。（而且，例如，即使我调用“lein help”，它也会警告 clucy 中的反射 - leiningen 本身的依赖。）

由于这些项目超出了我当前的范围，我希望可以将警告限制在当前项目中。这可能吗，怎么做？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-12T20:01:54.473

您可以简单地添加

```
(set! *warn-on-reflection* true) 
```

在“主”.clj 文件的顶部。就在外部代码的`use`和语句之后，但在您自己的代码的和/或语句之前。`require``require``load`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-11T11:59:29.200

Clojure 命名空间编译是可传递的。请参阅：[传递 AOT 编译](http://dev.clojure.org/display/design/Transitive+AOT+Compilation)

解决方法，结帐clucy和：

```
→ lein compile :all
→ lein install 
```

所以 Clojure 编译器会跳过 clucy 的编译，因为类文件已经存在。

# meteor - 为什么流星只返回一个空文件？

> ID：10971417
> 
> 赞同：2
> 
> 时间：2012-06-10T18:48:25.937
> 
> 标签：meteor

我正在将 Meteor.js 用于一个新项目。

起初它可以工作，但是现在当我运行流星时，它似乎开始正常，但是当我转到`localhost:3000`浏览器时会自动下载一个空文件。

我尝试清除缓存，重新启动计算机，重新安装节点并重新安装流星。我还尝试运行流星示例应用程序，并创建一个新应用程序，无论我得到与下载空文件相同的结果。斗智斗勇，有什么想法吗？

我在使用 Google Chrome 的 OS X lion 上。

**编辑：**

所以，在搞砸了一些之后，`/usr/local/meteor/examples`如果我使用`sudo meteor --port <some arbitrary port>`.

当我尝试使用我的应用程序时，它说它正在运行，但我仍然一无所获。

示例应用程序中来自`curl`localhost 的标头给出：

```
HTTP/1.1 200 OK
content-type: text/html
connection: close
transfer-encoding: chunked 
```

虽然我的标题是：

```
HTTP/1.1 200 OK
date: Mon, 11 Jun 2012 00:51:47 GMT
cache-control: public, max-age=31536000
last-modified: Sun, 10 Jun 2012 10:36:37 GMT
etag: "0-1339324597000"
content-type: application/octet-stream
accept-ranges: bytes
content-length: 0
connection: close 
```

**Edit2：** 如果我明确抛出错误，看起来我会得到一个正确的错误页面。但是，如果没有错误，那么我的标题是错误的。

**Edit3:*** 或者可能是我的环境出现错误，示例应用程序不再运行，我得到了 `Unexpected mongo exit code 127\. Restarting.`

**Edit4:*** 好的，所以 mongo 错误是无关的。我已经将问题追溯到 gzippo，特别是如果我注释掉： `app.use(gzippo.staticGzip(path.join(bundle_dir, 'static_cacheable'), {clientMaxAge: 1000 * 60 * 60 * 24 * 365}));` 在 /usr/local/meteor/app/server/server.js

然后有一个 CLEAR 缓存（开始一个新的私人会话）它可以工作！如果我的缓存不清晰，仍然会提供一个空白文件。

因此，未创建 static_cacheable 目录，这就是 gzippo 提示空下载的原因。

我不确定这是否应该在流星的 server.js 或 bundler.js 中进行修补......要提交一个错误

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-11T18:42:47.737

提出问题：[https](https://github.com/meteor/meteor/issues/177) ://github.com/meteor/meteor/issues/177 并进行了修复：[https ://github.com/meteor/meteor/pull/179](https://github.com/meteor/meteor/pull/179)

这是一个问题，即 gzippo 期望的文件夹（静态缓存）不是由流星创建的。流星中的相关文件：app/server/server.js:61, app/lib/bundler.js:526

# android - 视图在模拟器和设备上渲染速度极慢

> ID：10971419
> 
> 赞同：1
> 
> 时间：2012-06-10T18:48:58.730
> 
> 标签：android, performance, view, hierarchy

我在屏幕上显示了一系列复杂的视图，我还需要在运行时动态切换视图，我通过删除视图和添加新视图（有时只是设置可见性）来实现。

现在的问题是视图需要花费大量时间来渲染（超过 7-8 秒）。

我在我的方法中添加了时间戳，所有这些似乎都很快返回。但即使在我的最后一个方法返回后，视图也不会呈现，我必须等待它实际显示。在那之后用户界面非常无响应，我`ANR`经常得到。

谁能指出为什么它如此缓慢？

我在运行时使用`Drawable.createFromPath()`. 这可能是问题吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-29T07:34:45.763

我已经找到了相同的解决方案，并将其发布给面临类似问题的任何人。问题是由于视图嵌套很深。由于布局相当复杂，视图嵌套得相当深。在达到 14-15 级之后，性能开始急剧下降。在合并一些存根布局（占位符等）时，性能得到了极大的改善。层次结构查看器在调试此问题时非常有用。更多的观察结果是： 1\. 嵌套时的相对布局非常慢，而线性布局则没有那么多。2\. 软键盘在对话框中使用或在深度嵌套的相对布局中触发时反应迟缓（层次结构主要由相对布局组成。）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-10T18:53:58.457

应用程序变得迟缓的原因之一是当您在 UI 线程中执行一些耗时的非 UI 活动时。我建议您仔细查看您的代码并确定哪些活动需要时间，您可以使用`AsyncTask`这些活动来执行这些活动。

有关更多信息，请参阅此链接：http: [//developer.android.com/reference/android/os/AsyncTask.html](http://developer.android.com/reference/android/os/AsyncTask.html)

# c# - Why won't my counter increment?

> ID：10971421
> 
> 赞同：2
> 
> 时间：2012-06-10T18:49:06.340
> 
> 标签：c#, asp.net, session-state

I've done a bit of C++ programming but I'm new to c#.

I wrote a simple app to count how many times a user clicked a button and then display that count on the button.

On the first click it works, but after that it stays at 1\. Any suggestions? Thanks in advance

```
public partial class Default : System.Web.UI.Page
{
    private int clickcount = 0;
    public virtual void button1Clicked (object sender, EventArgs args)
    {
        clickcount++;
        button1.Text = "You clicked me "+clickcount.ToString()+" time";
    }
    public virtual void GreetButtonClicked (object sender, EventArgs args)
    {
        GreetButton.Text = "Hello "+TextInput.Text;
    }
     } 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-10T18:51:44.610

You are setting the count to zero every time the page is created. This:

```
private int clickcount = 0; 
```

Is almost the same as this:

```
private int clickcount;

public Default()
{
    clickcount = 0;
} 
```

Since the constructor is called every time a page is requested, you'll always reset the value back to zero.

How you solve this depends on what you are trying to count. For example, if you want to count the number of clicks in the current session then you should use a session variable to store the count.

I suggest you read the following webpage to get a good overview of where state can be stored and which type of storage is most suitable for different purposes:

*   [ASP.NET State Management Overview](http://msdn.microsoft.com/en-us/library/75x4ha6s)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-10T18:54:29.280

网页不会自动持久化数据，因此 的值`clickcount`仅保存在内存中，直到服务器完成页面呈现。下次单击该按钮时，您的计数器将重置为 0。如果您想在回发（页面加载）之间保留数据，则必须将数据存储在某处，例如`Session`，`ViewState`或数据库中。

这是一个示例，从您的代码修改：

```
public partial class Default : System.Web.UI.Page 
{ 
    private int clickcount = 0; 
    public virtual void button1Clicked (object sender, EventArgs args) 
    { 
        if (Session["clickcount"] != null)
            clickcount = (int)Session["clickcount"];

        clickcount++; 
        Session["clickcount"] = clickcount;

        button1.Text = "You clicked me "+clickcount.ToString()+" time"; 
    } 
    public virtual void GreetButtonClicked (object sender, EventArgs args) 
    { 
        GreetButton.Text = "Hello "+TextInput.Text; 
    } 
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-10T18:51:44.547

clickcount is going to be set to 0 every time you click the button, because it is initialized on every postback to the value you set (in this case --> 0). If you would make it a private static int, you will see that the values will actually increment.

```
 int counter = 0; <-- gets initialized to 0 on each click
    static int counter1 = 0; <--- gets incremented on each click, so 1,2,3 ... 
```

As it has been pointed out in the comments of this answer: If you plan on actually using the counter, it would be better to use a Session variable to store the amount of times the button has been clicked.

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-10T18:57:44.550

如果您不关心会话和其他类型的持久性，则可以使用 VIEWSTATE 将此值保存在属性中。

像这样使用您的代码，这将起作用：

```
public partial class Default : System.Web.UI.Page
{
    public int clickcount 
  {
   get
   {
     if(Viewstate["clickcount"] != null)
     {
      return (int)Viewstate["clickcount"]; //Need to cast the viewstate object in int.
     }
     else
     {
        return 0;
      }
  }
   set
   {
     Viewstate.add("clickcount",value);
   }
  }
    public virtual void button1Clicked (object sender, EventArgs args)
    {
        clickcount++;
        button1.Text = "You clicked me "+clickcount.ToString()+" time";
    }
    public virtual void GreetButtonClicked (object sender, EventArgs args)
    {
        GreetButton.Text = "Hello "+TextInput.Text;
    }
     } 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-10T18:51:33.217

You should declare `clickcount` as a static variable.

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-06-10T19:59:35.803

我认为有一个简单的方法可以解决这个问题

您可以添加一个新标签并使可见 = false

那么代码会像

```
counter = int.parse(label.text);
counter++;
label.text = counter.ToString();
button.text = "you clicked me "+counter.ToString(); 
```

# java - SWT Layout 重新定位表单控件

> ID：10971424
> 
> 赞同：1
> 
> 时间：2012-06-10T18:49:23.003
> 
> 标签：java, layout, swt

这是我的代码和表单截图。

我希望最上面的文本框占用所有可用的水平空间。
![在此处输入图像描述](../Images/ec90ed8cea9a4ff5f376355dd90b4343.png)

```
![Display display = new Display();][1]
    Shell shell = new Shell(display);
    shell.setLayout(new GridLayout());

    Group group = new Group(shell, SWT.FILL);
    group.setText("Group");
    group.setLayout(new GridLayout(4, false));
    group.setLayoutData(new GridData(GridData.FILL, GridData.FILL, true, false));

    Label lb = new Label(group, SWT.NONE);
    lb.setText("label");
    new Text(group, SWT.BORDER);

    Button btn = new Button(group, SWT.CHECK);
    Label lbbtn = new Label(group, SWT.NONE);
    lbbtn.setText("check");

    Composite comp = new Composite(group, SWT.NONE);
    comp.setLayout(new GridLayout(4, false));
    comp.setLayoutData(new GridData(GridData.HORIZONTAL_ALIGN_END));
    Label lb1 = new Label(comp, SWT.NONE);
    lb1.setText("Text1");
    Text txt = new Text(comp, SWT.BORDER);

    Label lb2 = new Label(comp, SWT.NONE);
    lb2.setText("Text2");
    txt = new Text(comp, SWT.BORDER);

    Label lb3 = new Label(comp, SWT.NONE);
    lb3.setText("Text3");
    txt = new Text(comp, SWT.BORDER);

    Label lb4 = new Label(comp, SWT.NONE);
    lb4.setText("Text4");
    txt = new Text(comp, SWT.BORDER);

    shell.pack();
    shell.open();
    while (!shell.isDisposed()) {
        if (!display.readAndDispatch())
            display.sleep();
    }
    display.dispose();
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-10T19:07:47.127

将`GridData`带有`horizontalSpan`值 2 的 a 用于`Composite`，将`GridData`带有`horizontalAlignment`带有值`FILL`的 a 和`grabExcessHorizontalSpace`带有值`true`的小部件用于`Text`小部件。

我通常使用[GridDataFactory](http://help.eclipse.org/indigo/index.jsp?topic=/org.eclipse.platform.doc.isv/reference/api/org/eclipse/jface/layout/GridDataFactory.html)来创建`GridData`对象，我认为代码更干净。

# bash - bash 在 $(command) 中使用 for i 的正确方法是什么？

> ID：10971427
> 
> 赞同：0
> 
> 时间：2012-06-10T18:50:03.840
> 
> 标签：bash, for-loop

我试图使用 a`for`的输出进行迭代`ls -R`，它只是挂起。

```
for i in $(ls -R /); do echo $i; done; 
```

是一样的

```
for i in $(find /); do echo $i; done; 
```

哪里有问题？为什么保持“光标等待”？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-10T18:54:49.410

它暂停的原因是因为首先 $() 被视为首先要计算的变量。因此，它首先进行查找并将所有内容加载到内存中，然后对其进行迭代。

无论如何，循环查找往往不是一个好主意。即使是少量物品。bash for 循环将所有空格视为项目的分隔符。这意味着如果您的任何文件名包含空格，您将得到不希望的结果。相反，我建议使用 find 的内置 exec 选项。

```
find / -exec echo '{}' \; 
```

正如 Karthik 指出的那样，您还可以将 while 循环与 read 一起使用。

```
ls -R / | while read i; do
    echo $i
done 
```

这个循环有两个原因。首先，仅在 \n （或 EOF）上*读取*中断。这意味着带有空格的文件将被计为一个文件。其次，管道确保数据不会堆积。文件名将被循环吃掉，因为它们是由*ls*生成的。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-10T19:02:39.867

### “寻找”以外的答案

解析 ls 的输出通常是个坏主意。其他人已经向您展示了如何使用 find。您在 bash 中还有另一个选择：globstar。

```
shopt -s globstar
for file in /tmp/**; do
    echo "$file"
done 
```

### 也可以看看

*   [http://www.linuxjournal.com/content/globstar-new-bash-globbing-option](http://www.linuxjournal.com/content/globstar-new-bash-globbing-option)
*   [http://www.gnu.org/software/bash/manual/html_node/The-Shopt-Builtin.html](http://www.gnu.org/software/bash/manual/html_node/The-Shopt-Builtin.html)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-10T18:54:20.663

这是因为变量被读取，加载到 for。

有时，bash 无法在内部处理这些变量。尝试使用这些替代方法以获得最佳效果。

试试这些：

```
#IO based is best.
ls -R / | while read i ; do
  echo $i
done 
```

（或者）

```
#in your case
find / -exec echo \{\} \; 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-11T08:07:52.593

这取决于你想在循环内做什么。管道进入 while 循环的问题是循环内部的任何变量更改在外部都不可见。例如：

```
x=0
ls -R / | while read i; do
    (( x++ ))
done
echo $x 
```

会给出 0（顺便说一下，ksh 没有这个问题）。一种解决方案是使用 Process Substitution，它使用命名管道一次输入一行，这次循环在线运行：

```
x=0
while read i; do
    (( x++ ))
done < <(ls -R /)
echo $x 
```

ksh93 也支持这种语法

# qt - 在 QGLWidget 上使用 QPainter 时启用抗锯齿需要哪些步骤？

> ID：10971428
> 
> 赞同：15
> 
> 时间：2012-06-10T18:50:08.037
> 
> 标签：qt, opengl

我正在尝试在 QGLWidget 上绘制基本形状。我正在尝试启用抗锯齿以平滑线条，但它不起作用。

这就是我目前正在尝试的：

```
QGLWidget *widget = ui->renderWidget;

QPainter painter;

widget->makeCurrent();
glEnable(GL_MULTISAMPLE);
glEnable(GL_LINE_SMOOTH);

painter.setRenderHint(QPainter::Antialiasing);
painter.setRenderHint(QPainter::HighQualityAntialiasing);

painter.begin(widget); 
```

然而，用这个画家画的任何东西仍然有锯齿状的边缘。我还需要做什么？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-06-21T15:19:24.657

我找到了解决方案。在调试其他问题时，我在调试输出中发现消息表明您无法在调用 begin() 之前设置渲染提示。

以下作品：

```
QGLWidget *widget = ui->renderWidget;

QPainter painter;

widget->makeCurrent();
glEnable(GL_MULTISAMPLE);
glEnable(GL_LINE_SMOOTH);

painter.begin(widget);

painter.setRenderHint(QPainter::Antialiasing);
painter.setRenderHint(QPainter::HighQualityAntialiasing); 
```

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2012-06-11T13:22:19.147

您可以尝试在完整的 Widget 上启用抗锯齿：

```
QGLWidget::setFormat(QGLFormat(QGL::SampleBuffers));
```

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2017-05-22T10:49:53.637

这个问题很老了，但我还是在谷歌上找到了。**你不应该再使用`QGLWidget`了。**使用较新的`QOpenGLWidget`. 这会将场景渲染到屏幕外，而不是创建一个原生 OpenGL 窗口，这会导致调整布局大小时出现各种问题。这段代码对我有用。把它放在你的`QGraphicsView`构造函数中：

```
QOpenGLWidget* gl = new QOpenGLWidget;
QSurfaceFormat fmt;
fmt.setSamples(8);
gl->setFormat(fmt);
setViewport(gl);
setRenderHint(QPainter::Antialiasing); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2019-09-23T16:50:41.273

如果你在 PyQt5 上工作，你通常会继承子类`QOpenGLWidget()`来构建你自己的 GPU 驱动的小部件。要打开抗锯齿，请查看下面的代码片段：

```
from PyQt5.QtWidgets import *
from PyQt5.QtGui import *
from PyQt5.QtCore import *

class MyFigureClass(QOpenGLWidget):
    def __init__(self, parent):
        super().__init__(parent)
        fmt = QSurfaceFormat()    # -╷
        fmt.setSamples(8)         #  > anti-aliasing
        self.setFormat(fmt)       # -╵
        [...]

    def paintEvent(self, event):
        qp = QPainter()
        qp.begin(self)
        qp.setRenderHint(QPainter.Antialiasing)
        [...]
        qp.end() 
```

[注意：感谢@Timmmm 的回答。在查看您的 C++ 代码片段时，我找到了 PyQt5 解决方案。]

# lua - 带有空格通配符的 Lua 字符串

> ID：10971443
> 
> 赞同：1
> 
> 时间：2012-06-10T18:52:36.257
> 
> 标签：lua

我想在一个长字符串中搜索各种项目，项目可能是这样的；

```
"test     test"
"test            test"
"test test" 
```

所以我不知道测试之间可能有多少空格，所以只要测试之间至少有1个空格字符，我是否可以使用通配符基本上告诉lua它是否找到它的“测试”和“测试”？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-10T19:17:57.880

尝试匹配此模式：`"test +test"`.

这是一些代码：

```
function try(s)
    print(s:match("test +test")~=nil,s)
end

try"test     test"
try"test            test"
try"test test"
try"test,test"
try"test, test" 
```

# javascript - 是否可以在 node.js 中创建子进程，当它们的父进程退出时它们不会退出？

> ID：10971444
> 
> 赞同：4
> 
> 时间：2012-06-10T18:52:36.537
> 
> 标签：javascript, node.js, child-process

是否可以在 node.js 中创建子进程，当它们的父进程退出时它们不会退出？

我正在运行节点 v0.6.19。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2014-07-05T01:30:01.350

是的，使用`child_process.spawn`并传递`detached`选项，然后调用`child.unref()`.

确保您阅读了注释：[http ://nodejs.org/api/child_process.html#child_process_child_process_spawn_command_args_options](http://nodejs.org/api/child_process.html#child_process_child_process_spawn_command_args_options)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-11T01:08:11.220

是的，这是可能的。

```
npm install daemon 
```

test1.js：

```
var
    spawn = require('child_process').spawn,
    test2 = spawn('node', ['test2.js']);

    console.log(test2.pid); 
```

test2.js：

```
var daemon = require('daemon');
daemon.start();

setInterval(function() {
    // do something
}, 1000); 
```

test1.js 将生成 test2.js 并退出。test2.js 将继续在后台工作。

# ios - 在视图控制器之间传递 NS Core Data 上下文引用

> ID：10971446
> 
> 赞同：2
> 
> 时间：2012-06-10T18:53:04.353
> 
> 标签：ios, core-data, nsmanagedobject

在我最初的 View Controller 中，我设置了我的 NS Core Data 文档，并获得了 managedOBjectContext。然后我将它传递给接下来出现的任何视图控制器。它有效，但看起来很难看。每当我有一个新的 segue 或移动到应用程序的另一个区域时，我都需要传递这个引用。

在 appDelagate 中创建这个引用并让所有视图控制器全局可用不是更容易吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-10T19:01:38.423

这是一篇关于制作数据管理器的好方法的文章，该方法存在于控制器层次结构之外并且可以在需要的地方使用：http: [//nachbaur.com/blog/smarter-core-data](http://nachbaur.com/blog/smarter-core-data)

该文章解释了该理论并具有与实现的链接。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-10T19:01:49.127

您不必传递核心数据上下文。可以通过执行以下操作在视图控制器中检索它：

```
NSManagedObjectContext *context = [(MyAppDelegate *)[[UIApplication sharedApplication\ delegate] managedObjectContext]; 
```

但是，我实际上更喜欢通过在启动控制器时传递上下文来做到这一点。

# node.js - 使用 iodocs 没有响应

> ID：10971447
> 
> 赞同：1
> 
> 时间：2012-06-10T18:53:15.447
> 
> 标签：node.js, redis, mashery, iodocs

嗨，我已经在本地部署了 iodocs，并且它适用于给定的示例。但是对于我的 api，它给出了空的响应。

这是我附加到 /data/apiconfig.json 的内容

```
"cloudspokes": {
    "name": "cloudspokes",
    "protocol": "http",
    "baseURL": "cloudspokes.com",
    "publicPath": "",
    "auth": ""
} 
```

这是/data/cloudspokes.json

```
{
"endpoints":[
  {
     "name":"Challenges",
     "methods":[
        {
           "MethodName":"challenges",
           "Synopsis":"This method returns a list of challenges.",
           "HTTPMethod":"GET",
           "URI":"/challenges.json",
           "RequiresOAuth":"N",
           "parameters":[

            ]
        }

      ]
  }

 ]
} 
```

iodocs 正在正确呈现界面 ![在此处输入图像描述](../Images/e7ae5767593c9c7f02c43c824f555841.png)

还去[http://cloudspokes.com/challenges.json](http://cloudspokes.com/challenges.json)返回非空响应。我是新手，请帮忙。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-02T15:20:06.987

快速修复是更新您的**apiconfig.json**块以使 cloudspokes 看起来像这样：

```
"cloudspokes": {
    "name": "cloudspokes",
    "protocol": "http",
    "baseURL": "www.cloudspokes.com",
    "publicPath": "",
    "auth": ""
} 
```

不同之处在于我添加了“www”。*baseURL*主机名的前缀。我怎么知道你需要这个？因为我打开调试，看到它正在抛出 301（重定向）。检查**config.json**文件并将*debug*更改为*true*，您将看到相同的内容。

但同样，快速修复，只需添加**www。**到*baseURL*，一切就绪。

# cocoa - “无法执行'/usr/bin/make'”...编译框架项目时

> ID：10971450
> 
> 赞同：3
> 
> 时间：2012-06-10T18:53:51.803
> 
> 标签：cocoa, xcode4, frameworks, compiler-errors

我正在尝试编译一个框架（作为项目文件夹出现）。当我单击构建时，我得到这个：

```
error: can't exec '/usr/bin/make' (No such file or directory) 
```

......果然它不在那里。我该如何解决这个问题？我正在使用 XCode 4.3.2

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-10T19:00:16.283

您可能需要从 Xcode中[安装命令行工具。](https://developer.apple.com/library/ios/documentation/DeveloperTools/Conceptual/WhatsNewXcode/Articles/xcode_4_3.html#//apple_ref/doc/uid/1006-SW2)

如果这不能解决问题，也请尝试在终端中执行此操作：

```
sudo xcode-select -switch /Applications/Xcode.app 
```

# javascript - 单击时的javascript功能不起作用

> ID：10971453
> 
> 赞同：0
> 
> 时间：2012-06-10T18:54:05.500
> 
> 标签：javascript, click

这很荒谬，我感觉就像在幼儿园。我已经尝试过任何我能想到的组合，我只是放弃了尝试。

```
<script type="text/javascript">
function myFunction(){
 alert("test");
}
</script>

<a href="#" class="love" id="<?php echo $img_id; ?>" onclick="myFunction()"> 
```

这是一个被“插入”在父 html 中的 php 文件，但我不明白为什么这会与 javascript 混淆。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-10T18:57:10.397

关闭您的`<a>`标签：

```
<a href="#" class="love" id="<?php echo $img_id; ?>" onclick="myFunction()">TEST</a> 
```

你的代码有效：

**[工作示例](http://jsbin.com/osemuj)**

# python - SQLAlchemy 声明式扩展与 elixir

> ID：10971454
> 
> 赞同：6
> 
> 时间：2012-06-10T18:54:08.103
> 
> 标签：python, sqlalchemy, python-elixir

我计划在我的一个项目中使用 SQLAlchemy，我对表的声明性语法非常感兴趣。

有人告诉我为此使用[Elixir 声明层](http://elixir.ematia.de/trac/wiki)，同时 SQLAlchemy 有其内置的[声明性扩展](http://docs.sqlalchemy.org/en/latest/orm/extensions/declarative.html)。

Elixir 和声明式扩展之间的当前区别是什么？优点缺点？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-03-08T16:42:31.667

Elixir 存在是因为 SQLA 声明式不存在。现在我们有了 SQLAlchemy 声明式，你可能不需要 Elixir，除非它有一种特定的方式来做你喜欢的事情。请注意，Elixir 是一个死项目，您将被旧版本的 SQLAlchemy 卡住。

# sql - equi join 与长 DataStructure

> ID：10971455
> 
> 赞同：0
> 
> 时间：2012-06-10T18:54:11.553
> 
> 标签：sql, oracle

我有一堆表格，下面是表格列表：

*   系统_用户
*   Acc_Roles
*   Acc_User_role_map
*   Acc_Permission
*   Acc_Role_Permission_Map
*   Acc_Menu_Items
*   Acc_SubMenu
*   Acc_Menu

我将解释上面的表格字段和关系。

我的查询在这里：

```
select acc_menu_items.* from acc_menu, acc_menu_items, acc_submenu, system_user, acc_user_role_map, acc_roles, acc_role_permission_map, acc_permission
where system_user.user_id=acc_user_role_map.user_id
and acc_user_role_map.ROLE_ID=acc_roles.id
and acc_roles.id=acc_role_permission_map.ROLE_ID
and acc_role_permission_map.PERMISSION_ID=acc_permission.id

and acc_permission.MENUITEM_ID=acc_menu_items.id
and acc_menu_items.menu_id=acc_menu.id

and acc_menu_items.SUBMENU_ID=acc_submenu.id

and system_user.USER_ID='userName' and acc_menu.menu_name='menuName'; 
```

我的问题是当我运行上述查询时，它显示为空。

在那个查询中，当我删除表名“acc_submenu”和“acc_menu_items.SUBMENU_ID=acc_submenu.id”

我得到数据很好，如果我把子菜单列表也放空了。

如果有任何不清楚的地方，我会上传完整的数据。

有人有想法么？

## **已编辑**

找到下面的图片链接

[http://www.4shared.com/photo/2Ml256my/Untitled-1-copy.html](http://www.4shared.com/photo/2Ml256my/Untitled-1-copy.html)

我的查询是：

```
select acc_menu_items.* from acc_menu, acc_menu_items, acc_submenu, system_user, acc_user_role_map, acc_roles, acc_role_permission_map, acc_permission
where system_user.user_id=acc_user_role_map.user_id
and acc_user_role_map.ROLE_ID=acc_roles.id
and acc_roles.id=acc_role_permission_map.ROLE_ID
and acc_role_permission_map.PERMISSION_ID=acc_permission.id

and acc_permission.MENUITEM_ID=acc_menu_items.id
and acc_menu_items.menu_id=acc_menu.id

and system_user.USER_ID='setupadmin' and acc_menu.menu_name='Administrator'; 
```

上面的查询正在获取数据，当我将 'Administrator' 替换为 'MainMenu' 时，它不起作用，请解释是什么问题？

我能做些什么？有任何想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-11T21:09:47.920

您使用显式连接语法的第二个查询：

```
select ami.* 
  from acc_submenu
    -- MISSING JOIN CONDITION
  join acc_roles ar
    -- MISSING JOIN CONDITION
  join acc_user_role_map aurm
    on aurm.role_id = ar.id
  join system_user su
    on su.user_id = aurm.user_id
  join acc_role_permission_map arpm
    on ar.id = arpm.role_id
  join acc_permission ap
    on arpm.permission_id = ap.id
  join acc_menu_items ami
    on ap.menuitem_id = ami.id
  join acc_menu am
    on ami.menu_id = am.id
 where su.user_id = 'setupadmin' 
   and am.menu_name = 'Administrator' 
```

如您所见，您缺少一些连接条件，这意味着您正在对and进行[笛卡尔连接](http://en.wikipedia.org/wiki/Join_(SQL)#Cross_join)。我想这是无意的...`acc_submenu``acc_roles`

您使用显式连接语法的第一个查询：

```
select ami.* 
  from system_user su
  join acc_user_role_map aurm
    on su.user_id = aurm.user_id
  join acc_roles ar 
    on aurm.role_id = ar.id
  join acc_role_permission_map arpm
    on ar.id = arpm.role_id
  join acc_permission ap
    on arpm.permission_id = ap.id
  join acc_menu_items ami
    on ap.menuitem_id = ami.id
  join acc_menu am
    on ami.menu_id = am.id
  join acc_submenu as
    on ami.submenu_id = as.id
 where su.user_id = 'userName' 
   and am.menu_name = 'menuName'; 
```

所有这一切似乎都过于复杂了。如果我们使用您发布的数据向后工作；您想要以下表格`acc_menu_items`中的所有内容`menu_name = 'MainMenu'`：

那将是：

```
select ami.*
  from acc_menu am
  join acc_menu_items ami
    on am.id = ami.menu_id 
```

您还想将其限制为`system_user.user_id = 'setupadmin'`，这对我来说很不幸，因为我现在必须写很多东西……顺便说一句，没有真正的理由去`system_user`这样做，除非您想要`name = 'pradeep'`.

一次建立一个加入，我得到：

```
select ami.*
  from acc_user_role_map aurm
  join acc_role_permission_map arpm
    on aurm.role_id = arpm.role_id
  join acc_permission ap
    on arpm.permission_id = ap.id
    -- Now I'm stuck as there-s nothing else to join to
    -- however, for the sake of argument let-s assume that acc_permission
    -- does have menuitem_id and that that number is one of those
    -- specified
  join acc_menu_items ami
    on ap.menuitem_id = ami.id
  join acc_submenu as
    on ami.submenu_id = as.id
  join acc_menu am
    on am.id = as.menu_id
 where aurm.user_id = 'setupadmin'
   and am.menu_name = 'MainMenu' 
```

如您所见，连接较少，这使其更清晰。还有一个假设我无法验证。我假设存在`menuitem_id`1123、1125、1127 或 1129 中的a `acc_permission`。

不过，还有另一个细微的差别。我`acc_submenu` *先*加入，然后`acc_menu`才能获得查询。这也改变了加入条件；这不再是：

```
on acc_menu_items.menu_id = acc_menu.id 
```

但

```
on acc_menu.id = acc_submenu.menu_id 
```

这就是你没有得到结果的原因；您的联接查询不正确。

* * *

这让我想到了几点：

*   正如您的第二个查询演示的那样，*不*使用显式连接语法是一种容易出错的方法。*不值得使用隐式连接语法*；特别是当您的查询有很多连接或很复杂时。几十年来，它们一直是 SQL 标准，因此您应该使用它们。

*   创建复杂查询时，如果一次构建一层，通常会更容易。这意味着您可以验证是否在每个阶段都返回了您期望的结果。如果你出错了，你可以很容易地查明它发生在哪里。

还有一些友好的建议，您可以随意忽略或不忽略：

您的架构过于复杂；特别是在菜单表周围。尤其令人不安的是，之后的连接`acc_menu_items`必须是两个不同的表之一，而您不知道是哪一个。如果可以简化这一点，请这样做。例如，通过添加一个`parent_id`to`acc_menu`并将子菜单移动到此处。然后，您可以删除 上的额外列`acc_menu_items`。

### 延伸阅读：

*   [加入 (SQL)](http://en.wikipedia.org/wiki/Join_(SQL)) - 维基百科
*   [SQL 连接的可视化解释](http://www.codinghorror.com/blog/2007/10/a-visual-explanation-of-sql-joins.html)- 编码恐怖

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-10T19:01:59.547

不假思索：你的台词阅读

```
and acc_menu_items.SUBMENU_ID=acc_submenu.id 
```

意味着 acc_menu_items.SubMenu_ID 在 Acc_submenu.id 中有相应的条目。你有支持这个断言的数据吗？

含义：在 ACC_MENU_ITEMS.SubMenu_ID 中，您有一个名为“1”的记录，在 Acc_SubMenu.id 中，您还有一个名为“1”的相同数据类型的记录，如果没有，那么您的逻辑是否有缺陷。根据您的测试，这可能是问题所在

# c++ - 使用捆绑属性时 BGL 中的不完整类型错误

> ID：10971456
> 
> 赞同：2
> 
> 时间：2012-06-10T18:54:14.260
> 
> 标签：c++, boost, undefined-behavior, boost-graph

我在某些 g++ 4.x 版本上正确编译了此代码，现在 4.6 版终止编译并出现错误：

```
/usr/include/boost/pending/property.hpp:35:7: error: ‘boost::property<Tag, T, Base>::m_value’ has incomplete type 
```

该错误似乎是由 graph_type 和 edge_info 类型声明之间的循环引起的。

我能够在以下几行代码中隔离问题。如何使用依赖于节点的捆绑属性的类型来定义边的属性？该解决方案仍应使用捆绑属性（因为很多代码取决于此图形类型）。如何更正以下代码？

```
#include <iostream>
#include <boost/graph/adjacency_list.hpp>

using namespace std;
using namespace boost;

template<typename map_type>
struct map_computation {
  map_type m;
};

struct vertex_info;
struct edge_info;

typedef adjacency_list<vecS, 
               vecS, 
               bidirectionalS, 
               vertex_info, 
               edge_info> graph_type;

struct position {
  double x, y;
};

struct vertex_info {
  position p;
};

typedef boost::property_map<graph_type, 
                position vertex_info::*>::type position_map_type;

struct edge_info {
  map_computation<position_map_type>* c;
};

int main(int argc, char* argv[])
{
  graph_type g;
  return 0;
} 
```

编辑：完整的错误日志如下：

```
In file included from /usr/include/boost/graph/graph_traits.hpp:22:0,
                 from /usr/include/boost/graph/adjacency_list.hpp:33,
                 from gtest.cc:2:
/usr/include/boost/pending/property.hpp: In instantiation of ‘boost::property<boost::edge_bundle_t, edge_info, boost::no_property>’:
/usr/include/boost/pending/detail/property.hpp:94:48:   instantiated from ‘boost::detail::build_property_tag_value_alist<boost::property<boost::edge_bundle_t, edge_info, boost::no_property> >’
/usr/include/boost/pending/property.hpp:63:81:   instantiated from ‘boost::property_value<boost::property<boost::edge_bundle_t, edge_info, boost::no_property>, boost::edge_bundle_t>’
/usr/include/boost/graph/properties.hpp:448:63:   instantiated from ‘boost::graph_detail::retagged_bundle<boost::property<boost::edge_bundle_t, edge_info, boost::no_property>, boost::edge_bundle_t>’
/usr/include/boost/graph/properties.hpp:461:64:   instantiated from ‘boost::graph_detail::normal_property<edge_info, boost::edge_bundle_t>’
/usr/include/boost/graph/properties.hpp:473:12:   instantiated from ‘boost::graph_detail::edge_prop<edge_info>’
/usr/include/boost/graph/adjacency_list.hpp:381:70:   instantiated from ‘boost::adjacency_list<boost::vecS, boost::vecS, boost::bidirectionalS, vertex_info, edge_info>’
/usr/include/boost/graph/properties.hpp:418:44:   instantiated from ‘boost::property_map<boost::adjacency_list<boost::vecS, boost::vecS, boost::bidirectionalS, vertex_info, edge_info>, position vertex_info::*>’
gtest.cc:30:32:   instantiated from here
/usr/include/boost/pending/property.hpp:35:7: error: ‘boost::property<Tag, T, Base>::m_value’ has incomplete type
gtest.cc:13:8: error: forward declaration of ‘struct edge_info’
gtest.cc:33:45: error: template argument 1 is invalid 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-11T08:36:12.210

你不能有一个递归类型定义，比如

```
struct edge_info;

typedef adjacency_list<..., edge_info> graph_type;

typedef boost::property_map<graph_type, ...>::type position_map_type;

struct edge_info { map_computation<position_map_type>* c; }; 
```

正如例如[这个问题](https://stackoverflow.com/a/6517325/819272)中提到的，C++ 标准在 §17.4.3.6/2 中说，

> 特别是，在以下情况下效果是不确定的：
> 
> __ [..] — 如果在实例化模板组件时将不完整类型 (3.9) 用作模板参数。__ [..]

根据您想要完成的任务（从您的问题中并不完全清楚），您可能需要考虑 Curiously Recurring Template Pattern (CRTP)，您可以在其中执行以下操作：

```
template<typename edge>
class some_graph_type 
{ // ... };

class my_edge_type
: 
    public some_graph_type<my_edge_type> 
{ // ... }; 
```

因此，您可以让一个`edge`类从一个类模板派生，并将其自身作为模板参数。类似地，您可以让一个`edge`类有一个`edge*`成员（类似于链表），但没有一个您需要首先了解其`edge`自身完整定义的成员。

# c - MSVC 中的函数大小

> ID：10971460
> 
> 赞同：1
> 
> 时间：2012-06-10T18:54:23.647
> 
> 标签：c, visual-c++

> **可能重复：**
> [有没有办法获得 ac 函数的大小？](https://stackoverflow.com/questions/7992420/is-there-any-way-to-get-the-size-of-a-c-function)

我需要在运行时确定 ac 函数的字节大小。我正在使用 MSVC，我可以使用该编译器提供的任何技术。

我知道这个问题被问了很多，但我只能发现人们说“不，不可能”。不过，也许我已经监督了一个解决方案。如果是这种情况，请指出我。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-10T19:07:42.460

通常，它以正常的方式生成代码，按照函数在源代码中出现的顺序。所以大小是下一个函数的地址减去函数的地址。

然而，有几种方法不会奏效。首先是增量链接选项，您将得到一个值 5。这是跳转到实际函数的 jmp 指令的大小。这些跳转允许链接器在不完全重新链接图像的情况下替换代码，它只是附加代码并修补跳转地址。

当然还有优化器。当它被内联时，你不能再有意义地谈论函数大小。你需要 __declspec(noinline)。

可以做到，测试一下它并彻底注释代码，这样有一天没有人会插入一个函数。如果您这样做是为了移动代码，请务必记住编译器不会生成与位置无关的代码，也无法修补该代码上的重定位。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-10T19:00:42.117

如果你真的有兴趣，从 MSVC 编译成 .asm，然后找出函数开始标签和末尾自定义标签之间的字节差异，计算它们之间的差异。:) 通常，编译器不会生成函数标签的结尾......只是开始。

除非函数需要在内存中重新定位并调用，否则您通常不会使用它！

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-10T20:15:49.450

我*认为*这应该是可能的。你如何进行的一点点取决于你需要的结果有多准确。如果可以接受某些可能的不准确性，我的首选是[`SymEnumSymbols`](http://msdn.microsoft.com/en-us/library/windows/desktop/ms680718.aspx). 您提供一个回调函数，该函数会为适合您指定的过滤器的每个符号调用。您的回调函数将被赋予名称和每个符号的计算（猜测）大小。当你找到正确的符号时，你就得到了它为你的函数猜测/计算的大小（虽然要注意：它也可以说大小是 0，所以你可能需要做一些测试才能很好地了解它对你想要的效果有多好）。

一些测试表明这在函数的情况下*似乎*相当准确（我有点担心这可能是它返回 0 的情况）。请注意，您通常确实希望使用调试信息进行构建以使用它（尽管导出您关心的函数可能就足够了）。

另一种可能性（尽管可能更复杂）是使用`#pragma code_seg`将您关心的函数单独放在具有唯一节名称的节中，然后遍历 PE 文件以找到该节的大小。

# jquery - jQuery Mobile 主屏幕 Web 应用程序转换延迟导致闪烁

> ID：10971464
> 
> 赞同：0
> 
> 时间：2012-06-10T18:55:08.513
> 
> 标签：jquery, jquery-mobile, css-transitions, homescreen, iphone-web-app

我正在构建的移动网站存在问题，经过广泛研究后，我找不到相同问题的其他实例。

在移动 Safari 中运行应用程序时不会出现该问题。只有当我以这种方式保存到主屏幕时才会出现问题。

问题如下：

使用带有以下形式的链接的普通列表：

```
<ul data-role="listview">
  <li>
     <a href="example/example.php" data-transition="slide" data-prefetch="true">Example</a>
  </li>
</ul> 
```

当我单击链接时，链接页面会立即出现一瞬间，然后滑入视图，因此实际上直到页面更改后才会发生转换。

对数据进行预完善是我尝试过的一种解决方案，如上图，但在此之前问题就存在了。我是否尝试过 data-rel="external" ，并且行为是相同的。不管我使用什么过渡，结果都是一样的。

```
-webkit-backspace-visibility:hidden 
```

hack没有用，我现在不记得的其他几个也没有用。
我发现该问题的唯一解决方案 - 这绝对不令人满意 - 是将链接页面设置为具有 css

```
#id_of_linked_page {opacity:0;} 
```

..然后将fadeIn 快速函数绑定到$.mobile.pageshow 事件，尽管考虑到它的骇人听闻，它实际上看起来非常干净，但它不会产生预期的效果，而且不是无缝的。

有任何想法吗？

谢谢

ps 我在 iPhone 4s 上使用 IOS 5.1 运行此程序（未越狱）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-25T02:30:55.510

我相信 jQuery Mobile 1.1.1 页面转换存在问题（我遇到了同样的问题）。如果您全局禁用所有页面转换，我相信问题就会消失。

# javascript - 我的瓷砖压模不工作

> ID：10971467
> 
> 赞同：1
> 
> 时间：2012-06-10T18:55:30.197
> 
> 标签：javascript, html, canvas

我试图创建一个“瓷砖压模”应用程序，它允许您从顶部选择一个瓷砖，然后将该瓷砖“印章”到下面的画布区域。您基本上可以将其视为 HTML5 游戏的地图编辑器。

除了选择和标记外，一切正常：[http ://www.exeneva.com/html5/tileStamper](http://www.exeneva.com/html5/tileStamper)

JS 错误控制台说我的事件监听器不正确，但我 100% 确定它们是有效的：

```
// Event listeners
theCanvas.addEventListener("mousemove", onMouseMove, false);   
theCanvas.addEventListener("click", onMouseClick, false); 
```

这是我的鼠标移动和鼠标点击处理代码：

```
function onMouseMove(e) {
  // Accounts for the canvas not being at the top left of screen
  mouseX = e.clientX - theCanvas.offsetLeft;
  mouseY = e.clientY - theCanvas.offsetTop;
}

function onMouseClick(e) {
  console.log("click: " + mouseX + "," + mouseY);
  if (mouseY < 128) {
    // Find tile to highlight
    var totalRows = 7; // 8 total rows, but relative zero means we use 7
    var col = Math.floor(mouseX / tileLength);
    var row = Math.floor(mouseY / tileLength);
    var tileId = (row * totalRows) + (col + row);
    highlightTile(tileId, col * tileLength, row * tileLength);
  } else {
    // stamp the selected tile
    var col = Math.floor(mouseX / tileLength);
    var row = Math.floor(mouseY / tileLength);
    context.putImageData(imageData, col * tileLength, row * tileLength);
  }
} 
```

这是瓷砖突出显示的代码：

```
function highlightTile(tileId, x, y) {
  // redraw tilesheet and highlight selected tile
  context.fillStyle = "#aaaaaa";
  context.fillRect(0, 0, 256, 128);
  drawTileSheet();

  imageData = context.getImageData(x, y, 32, 32);
  // set alpha to 128
  for (j = 3; j < imageData.data.length; j += 4) {
    imageData.data[j] = 128;
  }

  // draw red line around selected tile
  var startX = Math.floor(tileId % 8) * 32;
  var startY = Math.floor(tileId / 8) * 32;
  context.strokeStyle = "red";
  context.strokeRect(startX, startY, 32, 32);
} 
```

有人可以帮我弄清楚为什么这不起作用吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-10T19:02:21.990

根据这条线：

```
var theCanvas = $("#canvasOne"); 
```

`theCanvas`是 jquery 包装器，而不是纯 DOM 元素。所以它没有`addEventListener`方法。你可以这样尝试：

```
theCanvas[0].addEventListener("mousemove", onMouseMove, false);   
theCanvas[0].addEventListener("click", onMouseClick, false); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-10T19:04:47.170

改为这样做：

```
theCanvas.click(onMouseClick);
theCanvas.mousemove(onMouseMove); 
```

根据工程师的回答，您正在使用 jQuery。

PS：你还在做你的坦克项目吗？好的。

# python - 如何将字符串转换为十进制数以在 Python 中进行算术运算？

> ID：10971468
> 
> 赞同：3
> 
> 时间：2012-06-10T18:55:39.993
> 
> 标签：python, python-2.7

类似的帖子，如以下不回答我的问题。 [在 Python 中将字符串转换为带小数的整数](https://stackoverflow.com/questions/1094717/convert-a-string-to-integer-with-decimal-in-python)

考虑以下 Python 代码。

```
>>> import decimal
>>> s = '23.456'
>>> d = decimal.Decimal(s)
>>> d
Decimal('23.456')           # How do I represent this as simply 23.456?
>>> d - 1
22                          # How do I obtain the output to be 22.456? 
```

如何将字符串转换为十进制数，以便能够对其执行算术函数并获得具有正确精度的输出？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-10T19:17:25.350

如果您想保持`decimal`数字不变，最安全的方法是转换所有内容：

```
>>> s = '23.456'
>>> d = decimal.Decimal(s)

>>> d - decimal.Decimal('1')
Decimal('22.456')
>>> d - decimal.Decimal('1.0')
Decimal('22.456') 
```

在 Python 2.7 中，有一个整数的隐式转换，而不是浮点数。

```
>>> d - 1
Decimal('22.456')
>>> d - 1.0
Traceback (most recent call last):
  File "<stdin>", line 1, in <module>
TypeError: unsupported operand type(s) for -: 'Decimal' and 'float' 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-10T19:00:24.903

你`Decimal`的计算需要吗？[十进制定点和浮点算术](http://docs.python.org/library/decimal.html)文档概述了它们的区别。如果没有，你可以这样做

```
 d = float('23.456')
 d
 23.456

 d - 1
 22.456 
```

奇怪的是`Decimal`，我以交互方式得到这个

```
d = decimal.Decimal('23.456')

d
Decimal('23.456')
d - 1
Decimal('22.456') 
```

但是当我打印它时，我得到了值

```
print d
23.456
print d-1
22.456 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-10T19:09:57.870

我的 Python 似乎有不同的做法：

```
>>> s = '23.456'
>>> d = decimal.Decimal(s)
>>> d
Decimal('23.456')
>>> d-1
Decimal('22.456') 
```

您使用的是什么版本/操作系统？

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-01T17:47:47.253

如果使用浮点数，当数字变得太大时——**例如 x = 29345678.91——**你会得到意想不到的结果。在这种情况下，`float(x)`变为**2.934567891E7**，这似乎是不可取的，尤其是在处理财务数字时。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-10T19:00:00.593

使用 bultin float 函数：

```
>>> d = float('23.456')
>>> d
23.456
>>> d - 1
22.456 
```

请参阅此处的文档：http: [//docs.python.org/library/functions.html#float](http://docs.python.org/library/functions.html#float)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-06-10T20:14:18.660

您是专门尝试使用 Decimal 任意精度库，还是只是在努力将字符串转换为 Python 浮点数？

如果您尝试使用十进制：

```
>>> import decimal
>>> s1='23.456'
>>> s2='1.0'
>>> decimal.Decimal(s1) - decimal.Decimal(s2)
Decimal('22.456')
>>> s1='23.456'
>>> s2='1'
>>> decimal.Decimal(s1) - decimal.Decimal(s2)
Decimal('22.456') 
```

或者，我认为更有可能的是，您正试图将字符串转换为 Python 浮点值：

```
>>> s1='23.456'
>>> s2='1'
>>> float(s1)-float(s2)
22.456
>>> float(s1)-1
22.456
>>> float(s1)-1.0
22.456 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2021-11-07T07:50:01.993

在 python 中，要将值字符串转换为浮点数，只需执行以下操作：

```
num = "29.0"
print (float(num)) 
```

将字符串转换为十进制

```
from decimal import Decimal
num = "29.0"
print (Decimal(num)) 
```

# magento - Magento 块缓存技巧

> ID：10971470
> 
> 赞同：1
> 
> 时间：2012-06-10T18:56:12.410
> 
> 标签：magento

好的，所以我最近一直在研究 magento 中的块缓存。看起来是加速页面渲染的一种非常好的方法，但它看起来也有点让人头疼。

例如，缓存类别块似乎需要大量的操作才能正确完成。此外，有很多核心块可能不使用块缓存。在这些情况下，开发人员是否必须创建一个模块，然后重写所有这些核心块，以便在它们上启用块缓存？

对于这个主题的新手，是否还有其他关于阻止缓存的提示？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-11T09:23:20.983

块缓存（在大多数情况下）不需要在 PHP 级别实现，它可以在 XML 中完成。要为已经存在的块启用缓存，您需要打开`<reference />`块，然后使用`<action />`调用设置适当的数据，如下所示：

```
<reference name="myblock">
    <action method="setCacheLifetime"><seconds>1800</seconds></action>
    <action method="setCacheKey"><key>my-unique-cache-key</key></action>
</reference> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-06-06T03:21:39.997

如果您愿意，可以在 PHP 中完成块缓存。缓存管理必须写在Block的构造函数中

[https://magento2.atlassian.net/wiki/display/m1wiki/How+to+use+HTML+output+cache+in+Magento+1.x](https://magento2.atlassian.net/wiki/display/m1wiki/How+to+use+HTML+output+cache+in+Magento+1.x)

```
protected function _construct() {
 $this->addData(array(
  'cache_lifetime' => 3600,
  'cache_tags'     => array(Mage_Catalog_Model_Product::CACHE_TAG),
  'cache_key'      => $this->getProduct()->getId(),
 ));
} 
```

# symfony - Symfony2 和 Doctrine2 保存多个实体 - 问题

> ID：10971473
> 
> 赞同：0
> 
> 时间：2012-06-10T18:56:29.160
> 
> 标签：symfony, doctrine-orm, entity

我在使用多实体保存表单时遇到了一个奇怪的问题。

如果你能想象，我有 2 个实体：`CountryFixture`和`CountryMatch`. 我想在数据库中插入一个新匹配。所以，程序是：

*   保存比赛信息（CountryMatch：play_time，活动）。
*   然后，保存比赛分数（CountryFixture：country_id、match_id、score）。

当匹配和分数保存在数据库中时，有一行 in`CountryMatch`和两行 in `CountryFixture`。

嗯..问题是：当我通过控制台命令（`php app/console cache:clear --env=prod`）清除缓存时，我可以将数据保存在数据库中。保存后，我不能再在 DB 中插入任何数据 - 只有当我再次清除缓存时。

我没有安装 APC。这是一个问题吗？

如果我的解释不是最好的，我深表歉意。如果有人不明白任何事情，我会尽力解释得更好。

**实体：**

[国家匹配： http](http://pastebin.com/LgvNPCcJ) ://pastebin.com/LgvNPCcJ

CountryFIxture： http: [//pastebin.com/WuZftGW5](http://pastebin.com/WuZftGW5)

# facebook - Facebook 评论 - 查看域中的最后 10 个帖子

> ID：10971479
> 
> 赞同：2
> 
> 时间：2012-06-10T18:57:44.280
> 
> 标签：facebook, api, comments

我有一个内容丰富的网站，其中包含许多页面，每个页面都有一篇包含 Facebook 评论的文章。

我想在我的主页上提供一个小部件，列出整个网站的最后 X 条评论。

即，而不是显示特定 URL 的最后 10 条评论，我想为[http://www.site.com/content/](http://www.site.com/content/) *.html之类的内容提供最后 10 条评论

这可以在Javascript中做到吗？

谢谢

# javascript - 我们应该在分配事件之前检查元素是否存在吗？

> ID：10971488
> 
> 赞同：9
> 
> 时间：2012-06-10T18:59:13.580
> 
> 标签：javascript, coffeescript, jquery-events

我看到很多人在分配事件之前检查是否存在 DOM 元素，例如（coffeescript）：

```
$ -> 
    if( $("#progressbar").length > 0 ) 
        $("#progressbar").progressbar( value: 0 ) 
```

这是必要的吗？如果我们只是添加事件，无论元素是否存在，都会影响性能吗？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-06-11T09:22:49.290

jQuery 中的每个方法调用都包装在一个`.each`函数中，因此通常不需要检查元素是否存在 - 如果集合为空，则调用函数将不会迭代，它会静默失败。给出的示例就是一个很好的例子，`$('#progressbar').progressbar()`直接调用不会造成伤害或性能损失。

当您*确实*想要这样做时，可能是因为您正在操作 DOM 或根据元素的存在进行一些昂贵的操作，请确保缓存调用，特别是如果它是一个复杂的选择器：

```
specialThings = $('section .special')

if specialThings.length > 0
    doStuffWith specialThings 
```

或者，利用 coffeescript 的 var 安全性：

```
if (specialThings = $ 'section .special').length
    doStuffWith specialThings 
```

# php - 如何设置抽象层和模块

> ID：10971507
> 
> 赞同：0
> 
> 时间：2012-06-10T19:02:20.563
> 
> 标签：php, model-view-controller, frameworks

我有一个问题，我无法解决问题。我正在用 php 开发自己的 web 应用程序框架。我知道那里有很多好东西，但我喜欢玩这个，我不会将它用于任何敏感的制作内容。

所以问题来了：我有一个抽象基类，其中包含一些我希望所有模型都继承的函数。还有一个抽象的基本控制器，它用基本操作的功能扩展了基本模型。目前，所有创建的模型都扩展了基本模型，所有控制器都扩展了基本控制器。因此，所有控制器也通过 Base 控制器从 Base 模型继承。但是现在我无法从模型控制器访问模型属性，因为模型扩展了基本控制器，而且模型扩展基本控制器似乎很奇怪。

我应该如何设置它以便我可以从它们各自的控制器访问模型属性？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-10T19:28:15.820

*   首先，在我看来，您对什么是 Model .. 以及 .. 的理解很糟糕。也许[这个评论](https://stackoverflow.com/a/5864000/727208)会有所帮助。

*   另一件事，这似乎是错误的，整个画面是这样的：

    > 因此，所有控制器也通过 Base 控制器从 Base 模型继承。

    您应该避免深度继承。由于*Controller*和*What-You-Call-Models*的职责完全不同，所以两者都不应该继承任何东西。你必须明白那`extends`是 的同义词`is-a`。

    如果你写`class Admin extends User`，那么这意味着*每个管理员都是用户*。这也意味着，当你写的时候`class User extends Table`，它是错误的（.. 有点侮辱）。

*   *Controller不应该从**what-you-call-model*中读取属性（假设您没有[实现 MVP](https://stackoverflow.com/a/10960780/727208)模式）。该部分应该由*View*完成，因为那将是负责表示逻辑的部分。

    为此，您*所称的模型*应该具有特定的吸气剂。你永远不应该直接暴露属性（比如设置它们`public`），因为那样你会破坏封装。

.. 我的 3 美分

# javascript - 查找 URL 并从中创建一个变量

> ID：10971512
> 
> 赞同：3
> 
> 时间：2012-06-10T19:02:35.943
> 
> 标签：javascript, jquery, regex

```
<p>Lorem ipsum dolor sit amet http://www.google.com/ consectetur adipisicing.</p> 
```

在上面的句子中从 URL 中创建变量的最佳方法是什么？

我希望 jQuery 搜索整个句子并找到以它开头的`http`内容并从中创建一个变量以及它后面的所有内容，直到它遇到空格字符。所以在这个例子中，变量的值是`http://www.google.com/`.

我在考虑`:contains`可能涉及到正则表达式的事情？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-10T19:13:07.650

URL 的完整正则表达式（国际）：[RFC 3987 - 国际化资源标识符 (IRI)](http://www.faqs.org/rfcs/rfc3987.html)

```
/^[a-z](?:[-a-z0-9\+\.])*:(?:\/\/(?:(?:%[0-9a-f][0-9a-f]|[-a-z0-9\._~\x{A0}-\x{D7FF}\x{F900}-\x{FDCF}\x{FDF0}-\x{FFEF}\x{10000}-\x{1FFFD}\x{20000}-\x{2FFFD}\x{30000}-\x{3FFFD}\x{40000}-\x{4FFFD}\x{50000}-\x{5FFFD}\x{60000}-\x{6FFFD}\x{70000}-\x{7FFFD}\x{80000}-\x{8FFFD}\x{90000}-\x{9FFFD}\x{A0000}-\x{AFFFD}\x{B0000}-\x{BFFFD}\x{C0000}-\x{CFFFD}\x{D0000}-\x{DFFFD}\x{E1000}-\x{EFFFD}!\$&'\(\)\*\+,;=:])*@)?(?:\[(?:(?:(?:[0-9a-f]{1,4}:){6}(?:[0-9a-f]{1,4}:[0-9a-f]{1,4}|(?:[0-9]|[1-9][0-9]|1[0-9][0-9]|2[0-4][0-9]|25[0-5])(?:\.(?:[0-9]|[1-9][0-9]|1[0-9][0-9]|2[0-4][0-9]|25[0-5])){3})|::(?:[0-9a-f]{1,4}:){5}(?:[0-9a-f]{1,4}:[0-9a-f]{1,4}|(?:[0-9]|[1-9][0-9]|1[0-9][0-9]|2[0-4][0-9]|25[0-5])(?:\.(?:[0-9]|[1-9][0-9]|1[0-9][0-9]|2[0-4][0-9]|25[0-5])){3})|(?:[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){4}(?:[0-9a-f]{1,4}:[0-9a-f]{1,4}|(?:[0-9]|[1-9][0-9]|1[0-9][0-9]|2[0-4][0-9]|25[0-5])(?:\.(?:[0-9]|[1-9][0-9]|1[0-9][0-9]|2[0-4][0-9]|25[0-5])){3})|(?:[0-9a-f]{1,4}:[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){3}(?:[0-9a-f]{1,4}:[0-9a-f]{1,4}|(?:[0-9]|[1-9][0-9]|1[0-9][0-9]|2[0-4][0-9]|25[0-5])(?:\.(?:[0-9]|[1-9][0-9]|1[0-9][0-9]|2[0-4][0-9]|25[0-5])){3})|(?:(?:[0-9a-f]{1,4}:){0,2}[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){2}(?:[0-9a-f]{1,4}:[0-9a-f]{1,4}|(?:[0-9]|[1-9][0-9]|1[0-9][0-9]|2[0-4][0-9]|25[0-5])(?:\.(?:[0-9]|[1-9][0-9]|1[0-9][0-9]|2[0-4][0-9]|25[0-5])){3})|(?:(?:[0-9a-f]{1,4}:){0,3}[0-9a-f]{1,4})?::[0-9a-f]{1,4}:(?:[0-9a-f]{1,4}:[0-9a-f]{1,4}|(?:[0-9]|[1-9][0-9]|1[0-9][0-9]|2[0-4][0-9]|25[0-5])(?:\.(?:[0-9]|[1-9][0-9]|1[0-9][0-9]|2[0-4][0-9]|25[0-5])){3})|(?:(?:[0-9a-f]{1,4}:){0,4}[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:[0-9a-f]{1,4}|(?:[0-9]|[1-9][0-9]|1[0-9][0-9]|2[0-4][0-9]|25[0-5])(?:\.(?:[0-9]|[1-9][0-9]|1[0-9][0-9]|2[0-4][0-9]|25[0-5])){3})|(?:(?:[0-9a-f]{1,4}:){0,5}[0-9a-f]{1,4})?::[0-9a-f]{1,4}|(?:(?:[0-9a-f]{1,4}:){0,6}[0-9a-f]{1,4})?::)|v[0-9a-f]+[-a-z0-9\._~!\$&'\(\)\*\+,;=:]+)\]|(?:[0-9]|[1-9][0-9]|1[0-9][0-9]|2[0-4][0-9]|25[0-5])(?:\.(?:[0-9]|[1-9][0-9]|1[0-9][0-9]|2[0-4][0-9]|25[0-5])){3}|(?:%[0-9a-f][0-9a-f]|[-a-z0-9\._~\x{A0}-\x{D7FF}\x{F900}-\x{FDCF}\x{FDF0}-\x{FFEF}\x{10000}-\x{1FFFD}\x{20000}-\x{2FFFD}\x{30000}-\x{3FFFD}\x{40000}-\x{4FFFD}\x{50000}-\x{5FFFD}\x{60000}-\x{6FFFD}\x{70000}-\x{7FFFD}\x{80000}-\x{8FFFD}\x{90000}-\x{9FFFD}\x{A0000}-\x{AFFFD}\x{B0000}-\x{BFFFD}\x{C0000}-\x{CFFFD}\x{D0000}-\x{DFFFD}\x{E1000}-\x{EFFFD}!\$&'\(\)\*\+,;=@])*)(?::[0-9]*)?(?:\/(?:(?:%[0-9a-f][0-9a-f]|[-a-z0-9\._~\x{A0}-\x{D7FF}\x{F900}-\x{FDCF}\x{FDF0}-\x{FFEF}\x{10000}-\x{1FFFD}\x{20000}-\x{2FFFD}\x{30000}-\x{3FFFD}\x{40000}-\x{4FFFD}\x{50000}-\x{5FFFD}\x{60000}-\x{6FFFD}\x{70000}-\x{7FFFD}\x{80000}-\x{8FFFD}\x{90000}-\x{9FFFD}\x{A0000}-\x{AFFFD}\x{B0000}-\x{BFFFD}\x{C0000}-\x{CFFFD}\x{D0000}-\x{DFFFD}\x{E1000}-\x{EFFFD}!\$&'\(\)\*\+,;=:@]))*)*|\/(?:(?:(?:(?:%[0-9a-f][0-9a-f]|[-a-z0-9\._~\x{A0}-\x{D7FF}\x{F900}-\x{FDCF}\x{FDF0}-\x{FFEF}\x{10000}-\x{1FFFD}\x{20000}-\x{2FFFD}\x{30000}-\x{3FFFD}\x{40000}-\x{4FFFD}\x{50000}-\x{5FFFD}\x{60000}-\x{6FFFD}\x{70000}-\x{7FFFD}\x{80000}-\x{8FFFD}\x{90000}-\x{9FFFD}\x{A0000}-\x{AFFFD}\x{B0000}-\x{BFFFD}\x{C0000}-\x{CFFFD}\x{D0000}-\x{DFFFD}\x{E1000}-\x{EFFFD}!\$&'\(\)\*\+,;=:@]))+)(?:\/(?:(?:%[0-9a-f][0-9a-f]|[-a-z0-9\._~\x{A0}-\x{D7FF}\x{F900}-\x{FDCF}\x{FDF0}-\x{FFEF}\x{10000}-\x{1FFFD}\x{20000}-\x{2FFFD}\x{30000}-\x{3FFFD}\x{40000}-\x{4FFFD}\x{50000}-\x{5FFFD}\x{60000}-\x{6FFFD}\x{70000}-\x{7FFFD}\x{80000}-\x{8FFFD}\x{90000}-\x{9FFFD}\x{A0000}-\x{AFFFD}\x{B0000}-\x{BFFFD}\x{C0000}-\x{CFFFD}\x{D0000}-\x{DFFFD}\x{E1000}-\x{EFFFD}!\$&'\(\)\*\+,;=:@]))*)*)?|(?:(?:(?:%[0-9a-f][0-9a-f]|[-a-z0-9\._~\x{A0}-\x{D7FF}\x{F900}-\x{FDCF}\x{FDF0}-\x{FFEF}\x{10000}-\x{1FFFD}\x{20000}-\x{2FFFD}\x{30000}-\x{3FFFD}\x{40000}-\x{4FFFD}\x{50000}-\x{5FFFD}\x{60000}-\x{6FFFD}\x{70000}-\x{7FFFD}\x{80000}-\x{8FFFD}\x{90000}-\x{9FFFD}\x{A0000}-\x{AFFFD}\x{B0000}-\x{BFFFD}\x{C0000}-\x{CFFFD}\x{D0000}-\x{DFFFD}\x{E1000}-\x{EFFFD}!\$&'\(\)\*\+,;=:@]))+)(?:\/(?:(?:%[0-9a-f][0-9a-f]|[-a-z0-9\._~\x{A0}-\x{D7FF}\x{F900}-\x{FDCF}\x{FDF0}-\x{FFEF}\x{10000}-\x{1FFFD}\x{20000}-\x{2FFFD}\x{30000}-\x{3FFFD}\x{40000}-\x{4FFFD}\x{50000}-\x{5FFFD}\x{60000}-\x{6FFFD}\x{70000}-\x{7FFFD}\x{80000}-\x{8FFFD}\x{90000}-\x{9FFFD}\x{A0000}-\x{AFFFD}\x{B0000}-\x{BFFFD}\x{C0000}-\x{CFFFD}\x{D0000}-\x{DFFFD}\x{E1000}-\x{EFFFD}!\$&'\(\)\*\+,;=:@]))*)*|(?!(?:%[0-9a-f][0-9a-f]|[-a-z0-9\._~\x{A0}-\x{D7FF}\x{F900}-\x{FDCF}\x{FDF0}-\x{FFEF}\x{10000}-\x{1FFFD}\x{20000}-\x{2FFFD}\x{30000}-\x{3FFFD}\x{40000}-\x{4FFFD}\x{50000}-\x{5FFFD}\x{60000}-\x{6FFFD}\x{70000}-\x{7FFFD}\x{80000}-\x{8FFFD}\x{90000}-\x{9FFFD}\x{A0000}-\x{AFFFD}\x{B0000}-\x{BFFFD}\x{C0000}-\x{CFFFD}\x{D0000}-\x{DFFFD}\x{E1000}-\x{EFFFD}!\$&'\(\)\*\+,;=:@])))(?:\?(?:(?:%[0-9a-f][0-9a-f]|[-a-z0-9\._~\x{A0}-\x{D7FF}\x{F900}-\x{FDCF}\x{FDF0}-\x{FFEF}\x{10000}-\x{1FFFD}\x{20000}-\x{2FFFD}\x{30000}-\x{3FFFD}\x{40000}-\x{4FFFD}\x{50000}-\x{5FFFD}\x{60000}-\x{6FFFD}\x{70000}-\x{7FFFD}\x{80000}-\x{8FFFD}\x{90000}-\x{9FFFD}\x{A0000}-\x{AFFFD}\x{B0000}-\x{BFFFD}\x{C0000}-\x{CFFFD}\x{D0000}-\x{DFFFD}\x{E1000}-\x{EFFFD}!\$&'\(\)\*\+,;=:@])|[\x{E000}-\x{F8FF}\x{F0000}-\x{FFFFD}|\x{100000}-\x{10FFFD}\/\?])*)?(?:\#(?:(?:%[0-9a-f][0-9a-f]|[-a-z0-9\._~\x{A0}-\x{D7FF}\x{F900}-\x{FDCF}\x{FDF0}-\x{FFEF}\x{10000}-\x{1FFFD}\x{20000}-\x{2FFFD}\x{30000}-\x{3FFFD}\x{40000}-\x{4FFFD}\x{50000}-\x{5FFFD}\x{60000}-\x{6FFFD}\x{70000}-\x{7FFFD}\x{80000}-\x{8FFFD}\x{90000}-\x{9FFFD}\x{A0000}-\x{AFFFD}\x{B0000}-\x{BFFFD}\x{C0000}-\x{CFFFD}\x{D0000}-\x{DFFFD}\x{E1000}-\x{EFFFD}!\$&'\(\)\*\+,;=:@])|[\/\?])*)?$/i 
```

所以：

```
var url = $("p").html().match(/that whole thing/); 
```

[检查字符串是否为有效 URL 的最佳正则表达式是什么？](https://stackoverflow.com/questions/161738/what-is-the-best-regular-expression-to-check-if-a-string-is-a-valid-url)

PS：在 JavaScript 中使用时替换 all`\x{DFFFD}`等。`\uDFFFD`

```
/^[a-z](?:[-a-z0-9\+\.])*:(?:\/\/(?:(?:%[0-9a-f][0-9a-f]|[-a-z0-9\._~\uA0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF\u10000-\u1FFFD\u20000-\u2FFFD\u30000-\u3FFFD\u40000-\u4FFFD\u50000-\u5FFFD\u60000-\u6FFFD\u70000-\u7FFFD\u80000-\u8FFFD\u90000-\u9FFFD\uA0000-\uAFFFD\uB0000-\uBFFFD\uC0000-\uCFFFD\uD0000-\uDFFFD\uE1000-\uEFFFD!\$&'\(\)\*\+,;=:])*@)?(?:\[(?:(?:(?:[0-9a-f]{1,4}:){6}(?:[0-9a-f]{1,4}:[0-9a-f]{1,4}|(?:[0-9]|[1-9][0-9]|1[0-9][0-9]|2[0-4][0-9]|25[0-5])(?:\.(?:[0-9]|[1-9][0-9]|1[0-9][0-9]|2[0-4][0-9]|25[0-5])){3})|::(?:[0-9a-f]{1,4}:){5}(?:[0-9a-f]{1,4}:[0-9a-f]{1,4}|(?:[0-9]|[1-9][0-9]|1[0-9][0-9]|2[0-4][0-9]|25[0-5])(?:\.(?:[0-9]|[1-9][0-9]|1[0-9][0-9]|2[0-4][0-9]|25[0-5])){3})|(?:[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){4}(?:[0-9a-f]{1,4}:[0-9a-f]{1,4}|(?:[0-9]|[1-9][0-9]|1[0-9][0-9]|2[0-4][0-9]|25[0-5])(?:\.(?:[0-9]|[1-9][0-9]|1[0-9][0-9]|2[0-4][0-9]|25[0-5])){3})|(?:[0-9a-f]{1,4}:[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){3}(?:[0-9a-f]{1,4}:[0-9a-f]{1,4}|(?:[0-9]|[1-9][0-9]|1[0-9][0-9]|2[0-4][0-9]|25[0-5])(?:\.(?:[0-9]|[1-9][0-9]|1[0-9][0-9]|2[0-4][0-9]|25[0-5])){3})|(?:(?:[0-9a-f]{1,4}:){0,2}[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){2}(?:[0-9a-f]{1,4}:[0-9a-f]{1,4}|(?:[0-9]|[1-9][0-9]|1[0-9][0-9]|2[0-4][0-9]|25[0-5])(?:\.(?:[0-9]|[1-9][0-9]|1[0-9][0-9]|2[0-4][0-9]|25[0-5])){3})|(?:(?:[0-9a-f]{1,4}:){0,3}[0-9a-f]{1,4})?::[0-9a-f]{1,4}:(?:[0-9a-f]{1,4}:[0-9a-f]{1,4}|(?:[0-9]|[1-9][0-9]|1[0-9][0-9]|2[0-4][0-9]|25[0-5])(?:\.(?:[0-9]|[1-9][0-9]|1[0-9][0-9]|2[0-4][0-9]|25[0-5])){3})|(?:(?:[0-9a-f]{1,4}:){0,4}[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:[0-9a-f]{1,4}|(?:[0-9]|[1-9][0-9]|1[0-9][0-9]|2[0-4][0-9]|25[0-5])(?:\.(?:[0-9]|[1-9][0-9]|1[0-9][0-9]|2[0-4][0-9]|25[0-5])){3})|(?:(?:[0-9a-f]{1,4}:){0,5}[0-9a-f]{1,4})?::[0-9a-f]{1,4}|(?:(?:[0-9a-f]{1,4}:){0,6}[0-9a-f]{1,4})?::)|v[0-9a-f]+[-a-z0-9\._~!\$&'\(\)\*\+,;=:]+)\]|(?:[0-9]|[1-9][0-9]|1[0-9][0-9]|2[0-4][0-9]|25[0-5])(?:\.(?:[0-9]|[1-9][0-9]|1[0-9][0-9]|2[0-4][0-9]|25[0-5])){3}|(?:%[0-9a-f][0-9a-f]|[-a-z0-9\._~\uA0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF\u10000-\u1FFFD\u20000-\u2FFFD\u30000-\u3FFFD\u40000-\u4FFFD\u50000-\u5FFFD\u60000-\u6FFFD\u70000-\u7FFFD\u80000-\u8FFFD\u90000-\u9FFFD\uA0000-\uAFFFD\uB0000-\uBFFFD\uC0000-\uCFFFD\uD0000-\uDFFFD\uE1000-\uEFFFD!\$&'\(\)\*\+,;=@])*)(?::[0-9]*)?(?:\/(?:(?:%[0-9a-f][0-9a-f]|[-a-z0-9\._~\uA0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF\u10000-\u1FFFD\u20000-\u2FFFD\u30000-\u3FFFD\u40000-\u4FFFD\u50000-\u5FFFD\u60000-\u6FFFD\u70000-\u7FFFD\u80000-\u8FFFD\u90000-\u9FFFD\uA0000-\uAFFFD\uB0000-\uBFFFD\uC0000-\uCFFFD\uD0000-\uDFFFD\uE1000-\uEFFFD!\$&'\(\)\*\+,;=:@]))*)*|\/(?:(?:(?:(?:%[0-9a-f][0-9a-f]|[-a-z0-9\._~\uA0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF\u10000-\u1FFFD\u20000-\u2FFFD\u30000-\u3FFFD\u40000-\u4FFFD\u50000-\u5FFFD\u60000-\u6FFFD\u70000-\u7FFFD\u80000-\u8FFFD\u90000-\u9FFFD\uA0000-\uAFFFD\uB0000-\uBFFFD\uC0000-\uCFFFD\uD0000-\uDFFFD\uE1000-\uEFFFD!\$&'\(\)\*\+,;=:@]))+)(?:\/(?:(?:%[0-9a-f][0-9a-f]|[-a-z0-9\._~\uA0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF\u10000-\u1FFFD\u20000-\u2FFFD\u30000-\u3FFFD\u40000-\u4FFFD\u50000-\u5FFFD\u60000-\u6FFFD\u70000-\u7FFFD\u80000-\u8FFFD\u90000-\u9FFFD\uA0000-\uAFFFD\uB0000-\uBFFFD\uC0000-\uCFFFD\uD0000-\uDFFFD\uE1000-\uEFFFD!\$&'\(\)\*\+,;=:@]))*)*)?|(?:(?:(?:%[0-9a-f][0-9a-f]|[-a-z0-9\._~\uA0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF\u10000-\u1FFFD\u20000-\u2FFFD\u30000-\u3FFFD\u40000-\u4FFFD\u50000-\u5FFFD\u60000-\u6FFFD\u70000-\u7FFFD\u80000-\u8FFFD\u90000-\u9FFFD\uA0000-\uAFFFD\uB0000-\uBFFFD\uC0000-\uCFFFD\uD0000-\uDFFFD\uE1000-\uEFFFD!\$&'\(\)\*\+,;=:@]))+)(?:\/(?:(?:%[0-9a-f][0-9a-f]|[-a-z0-9\._~\uA0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF\u10000-\u1FFFD\u20000-\u2FFFD\u30000-\u3FFFD\u40000-\u4FFFD\u50000-\u5FFFD\u60000-\u6FFFD\u70000-\u7FFFD\u80000-\u8FFFD\u90000-\u9FFFD\uA0000-\uAFFFD\uB0000-\uBFFFD\uC0000-\uCFFFD\uD0000-\uDFFFD\uE1000-\uEFFFD!\$&'\(\)\*\+,;=:@]))*)*|(?!(?:%[0-9a-f][0-9a-f]|[-a-z0-9\._~\uA0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF\u10000-\u1FFFD\u20000-\u2FFFD\u30000-\u3FFFD\u40000-\u4FFFD\u50000-\u5FFFD\u60000-\u6FFFD\u70000-\u7FFFD\u80000-\u8FFFD\u90000-\u9FFFD\uA0000-\uAFFFD\uB0000-\uBFFFD\uC0000-\uCFFFD\uD0000-\uDFFFD\uE1000-\uEFFFD!\$&'\(\)\*\+,;=:@])))(?:\?(?:(?:%[0-9a-f][0-9a-f]|[-a-z0-9\._~\uA0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF\u10000-\u1FFFD\u20000-\u2FFFD\u30000-\u3FFFD\u40000-\u4FFFD\u50000-\u5FFFD\u60000-\u6FFFD\u70000-\u7FFFD\u80000-\u8FFFD\u90000-\u9FFFD\uA0000-\uAFFFD\uB0000-\uBFFFD\uC0000-\uCFFFD\uD0000-\uDFFFD\uE1000-\uEFFFD!\$&'\(\)\*\+,;=:@])|[\uE000-\uF8FF\uF0000-\uFFFFD|\u100000-\u10FFFD\/\?])*)?(?:\#(?:(?:%[0-9a-f][0-9a-f]|[-a-z0-9\._~\uA0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF\u10000-\u1FFFD\u20000-\u2FFFD\u30000-\u3FFFD\u40000-\u4FFFD\u50000-\u5FFFD\u60000-\u6FFFD\u70000-\u7FFFD\u80000-\u8FFFD\u90000-\u9FFFD\uA0000-\uAFFFD\uB0000-\uBFFFD\uC0000-\uCFFFD\uD0000-\uDFFFD\uE1000-\uEFFFD!\$&'\(\)\*\+,;=:@])|[\/\?])*)?$/i 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-10T19:12:21.730

如果您只想`http://`使用 jquery 搜索以空格开头的任何内容，则可以`\bhttp://[^ ]+`像这样简单地使用正则表达式：

```
var someVariable = $(someSelector).text().match(/\bhttp:\/\/[^ ]+/g); 
```

开头的 \b 与以下内容不匹配：“some texthttp://google.com”

# c# - 如何在使用 OpenXML 操作的 Word 文档中设置日期？

> ID：10971520
> 
> 赞同：0
> 
> 时间：2012-06-10T19:04:05.203
> 
> 标签：c#, visual-studio-2010, openxml, openxml-sdk

我正在使用 OpenXML 操作一个 word 文档，并且我在该文档中有一个字段来设置日期。但问题是当我插入像 2012 年 1 月 10 日这样的日期时，它会在 2012 年 10 月 10 日星期一打印在文档中。这不是我想要的。我希望它像 2012 年 1 月 10 日一样。我怎样才能做到这一点？

@Hans @skynorth 这是我正在使用的代码

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;
using System.IO;
using DocumentFormat.OpenXml.Packaging;
using DocumentFormat.OpenXml.Wordprocessing;
using DocumentFormat.OpenXml;

namespace Inbay_Debrief_Report_Sender
{
    class InsertDetailsProgram
    {
        public static bool InsertDetals(string[] ObservationsValues, string[] ActiontakenValues, string[] ReccomendationsValues)
        {
            // convert template to document
            TemplateToDocument("DebriefReportTemplate.dotx", "DebriefReportTemplate.docx");

            using (WordprocessingDocument wordDoc = WordprocessingDocument.Open("DebriefReportTemplate.docx", true))
            {
                List<SdtRun> sdtBlocks = new List<SdtRun>();
                sdtBlocks.AddRange(wordDoc.MainDocumentPart.Document.Body.ChildElements.OfType<SdtRun>());

                foreach (Paragraph para in wordDoc.MainDocumentPart.Document.Body.OfType<Paragraph>())
                {
                    var moreBlocks = para.ChildElements.OfType<SdtRun>();
                    if (moreBlocks != null && moreBlocks.Count() > 0)
                        sdtBlocks.AddRange(moreBlocks);
                }

                foreach (SdtRun block in sdtBlocks)
                {
                    if (block.SdtProperties != null)
                    {
                        Tag tag = block.SdtProperties.ChildElements.OfType<Tag>().ElementAt(0);

                        switch (tag.Val.Value)
                        {

                            case "caseTag":
                                block.ModifyContent(Variables.CaseNumber);
                                break;

                            case "nameTag":
                                block.ModifyContent(Variables.CustomerName);
                                break;

                            case "typeTag":
                                block.ModifyContent(Variables.MachineType);
                                break;

                            case "dateTag":
                                block.ModifyContent(Variables.ReportedDate); // this is where i insert the date
                                break;

                            case "engineerTag":
                                block.ModifyContent(Variables.EngineerName);
                                break;

                            case "virusTag":
                                if (Variables.virus == true) { block.Check(); }
                                else { block.UnCheck(); }
                                break;

                            case "diagnosticTag":
                                if (Variables.Diagnostic == true) { block.Check(); }
                                else { block.UnCheck(); }
                                break;

                            case "osupgradeTag":
                                if (Variables.OSUpgrade == true)
                                { block.Check(); }
                                else
                                { block.UnCheck(); }
                                break;

                            case "backupTag":
                                if (Variables.DataBackup == true)
                                { block.Check(); }
                                else
                                { block.UnCheck(); }
                                break;

                            case "datarecoveryTag":
                                if (Variables.DataRecovery == true)
                                { block.Check(); }
                                else
                                { block.UnCheck(); }
                                break;

                            case "softwareTag":
                                if (Variables.SoftwareInstallation == true)
                                { block.Check(); }
                                else
                                { block.UnCheck(); }
                                break;

                            case "datacleanseTag":
                                if (Variables.DataCleanse == true)
                                { block.Check(); }
                                else
                                { block.UnCheck(); }
                                break;

                            case "gadgetTag":
                                if (Variables.GadgetInstallation == true)
                                { block.Check(); }
                                else
                                { block.UnCheck(); }
                                break;

                            case "computersetTag":
                                if (Variables.DataBackup == true)
                                { block.Check(); }
                                else
                                { block.UnCheck(); }
                                break;

                            case "parentalTag":
                                if (Variables.ParentalControl == true)
                                { block.Check(); }
                                else
                                { block.UnCheck(); }
                                break;

                            case "smartphoneTag":
                                if (Variables.SmartPhone == true)
                                { block.Check(); }
                                else
                                { block.UnCheck(); }
                                break;

                            case "factoryresetTag":
                                if (Variables.FactoryReset == true)
                                { block.Check(); }
                                else
                                { block.UnCheck(); }
                                break;

                            case "emailsetupTag":
                                if (Variables.Email == true)
                                { block.Check(); }
                                else
                                { block.UnCheck(); }
                                break;

                            case "networkingTag":
                                if (Variables.Networking == true)
                                { block.Check(); }
                                else
                                { block.UnCheck(); }
                                break;

                            case "tuneupTag":
                                if (Variables.Tuneup == true)
                                { block.Check(); }
                                else
                                { block.UnCheck(); }
                                break;

                            case "broadbandTag":
                                if (Variables.Broadband == true)
                                { block.Check(); }
                                else
                                { block.UnCheck(); }
                                break;

                            case "observationsArea":
                                List<string> dynamicList = new List<string>(ObservationsValues);
                                List<Paragraph> newChildren = CreateNewChildren(dynamicList);
                                Paragraph oldChild = block.Parent as Paragraph;

                                oldChild.ParagraphProperties.SpacingBetweenLines.After = "0";
                                oldChild.ParagraphProperties.SpacingBetweenLines.Before = "0";

                                newChildren.ForEach(ch =>
                                {
                                    oldChild = wordDoc.MainDocumentPart.Document.Body.InsertAfter(ch, oldChild);
                                });
                                break;

                            case "actionsTakenArea":
                                List<string> dynamicList1 = new List<string>(ActiontakenValues);
                                List<Paragraph> newChildren1 = CreateNewChildren(dynamicList1);
                                Paragraph oldChild1 = block.Parent as Paragraph;

                                var oldChildSibling = oldChild1.PreviousSibling() as Paragraph;
                                if (oldChildSibling.InnerText.Length == 0)
                                    oldChildSibling.Remove();

                                oldChild1.ParagraphProperties.SpacingBetweenLines.After = "0";
                                oldChild1.ParagraphProperties.SpacingBetweenLines.Before = "0";

                                // now if you want some space, change the values of After & Before

                                newChildren1.ForEach(ch =>
                                {
                                    oldChild1 = wordDoc.MainDocumentPart.Document.Body.InsertAfter(ch, oldChild1);
                                });
                                break;

                            case "reccomendationsArea":
                                List<string> dynamicList2 = new List<string>(ReccomendationsValues);
                                List<Paragraph> newChildren2 = CreateNewChildren(dynamicList2);
                                Paragraph oldChild2 = block.Parent as Paragraph;

                                var oldChildSibling1 = oldChild2.PreviousSibling() as Paragraph;
                                if (oldChildSibling1.InnerText.Length == 0)
                                    oldChildSibling1.Remove();

                                oldChild2.ParagraphProperties.SpacingBetweenLines.After = "0";
                                oldChild2.ParagraphProperties.SpacingBetweenLines.Before = "0";

                                // now if you want some space, change the values of After & Before

                                newChildren2.ForEach(ch =>
                                {
                                    oldChild2 = wordDoc.MainDocumentPart.Document.Body.InsertAfter(ch, oldChild2);
                                });
                                break;
                        }
                    }
                }

                // save the document
                wordDoc.MainDocumentPart.Document.Save();

            }

            return true;
        }

        private static List<Paragraph> CreateNewChildren(List<string> dynamicList)
        {
            List<Paragraph> newParaCollection = new List<Paragraph>();

            dynamicList.ForEach(item =>
            {
                Paragraph paragraph = new Paragraph() { RsidParagraphMarkRevision = "008C2139", RsidParagraphAddition = "008C2139", RsidParagraphProperties = "00050C00", RsidRunAdditionDefault = "008C2139" };

                ParagraphProperties paragraphProperties1 = new ParagraphProperties() { SpacingBetweenLines = new SpacingBetweenLines() { After = "0", Before = "0" } };
                ParagraphStyleId paragraphStyleId1 = new ParagraphStyleId() { Val = "ListParagraph" };

                NumberingProperties numberingProperties1 = new NumberingProperties();
                NumberingLevelReference numberingLevelReference1 = new NumberingLevelReference() { Val = 0 };
                NumberingId numberingId1 = new NumberingId() { Val = 1 };

                numberingProperties1.Append(numberingLevelReference1);
                numberingProperties1.Append(numberingId1);

                ParagraphBorders paragraphBorders1 = new ParagraphBorders();
                TopBorder topBorder1 = new TopBorder() { Val = BorderValues.Single, Color = "auto", Size = (UInt32Value)6U, Space = (UInt32Value)1U };
                BottomBorder bottomBorder1 = new BottomBorder() { Val = BorderValues.Single, Color = "auto", Size = (UInt32Value)6U, Space = (UInt32Value)1U };

                // paragraphBorders1.Append(topBorder1);
                // paragraphBorders1.Append(bottomBorder1);

                ParagraphMarkRunProperties paragraphMarkRunProperties1 = new ParagraphMarkRunProperties();
                RunStyle runStyle1 = new RunStyle() { Val = "Style1" };
                FontSize fontSize1 = new FontSize() { Val = "29.5" };

                paragraphMarkRunProperties1.Append(runStyle1);
                paragraphMarkRunProperties1.Append(fontSize1);

                paragraphProperties1.Append(paragraphStyleId1);
                paragraphProperties1.Append(numberingProperties1);

                //if (dynamicList.IndexOf(item) == dynamicList.Count - 1)
                //{
                //    paragraphProperties1.Append(paragraphBorders1);
                //}

                paragraphProperties1.Append(paragraphMarkRunProperties1);

                Run run1 = new Run();

                RunProperties runProperties1 = new RunProperties();
                RunStyle runStyle2 = new RunStyle() { Val = "Style1" };
                FontSize fontSize2 = new FontSize() { Val = "29.5" };
                FontSizeComplexScript fontSizeComplexScript1 = new FontSizeComplexScript() { Val = "18" };

                Bold BoldObj = new Bold() { Val = false };
                runProperties1.Append(runStyle2);
                runProperties1.Append(fontSize2);
                runProperties1.Append(BoldObj);
                runProperties1.Append(fontSizeComplexScript1);
                Text text1 = new Text();
                text1.Text = item;

                run1.Append(runProperties1);
                run1.Append(text1);

                paragraph.Append(paragraphProperties1);
                paragraph.Append(run1);
                newParaCollection.Add(paragraph);

            });

            return newParaCollection;
        }

        private static void TemplateToDocument(string templateFile, string documentFile)
        {
            MemoryStream presentationStream = null;

            using (Stream tplStream = File.Open(templateFile, FileMode.Open, FileAccess.Read))
            {
                presentationStream = new MemoryStream((int)tplStream.Length);
                tplStream.Copy(presentationStream);
                presentationStream.Position = 0L;
            }

            using (WordprocessingDocument wordPackage = WordprocessingDocument.Open(presentationStream, true))
            {
                wordPackage.ChangeDocumentType(DocumentFormat.OpenXml.WordprocessingDocumentType.Document);
                MainDocumentPart docPart = wordPackage.MainDocumentPart;
                docPart.AddExternalRelationship("http://schemas.openxmlformats.org/officeDocument/2006/relationships/attachedTemplate",
                   new Uri(templateFile, UriKind.RelativeOrAbsolute));

                docPart.Document.Save();
            }

            File.WriteAllBytes(documentFile, presentationStream.ToArray());
        }
    }

    public static class Extensions
    {
        public static void Copy(this Stream source, Stream target)
        {
            if (source != null)
            {
                MemoryStream mstream = source as MemoryStream;
                if (mstream != null) mstream.WriteTo(target);
                else
                {
                    byte[] buffer = new byte[2048];
                    int length = buffer.Length, size;
                    while ((size = source.Read(buffer, 0, length)) != 0)
                        target.Write(buffer, 0, size);
                }
            }
        }

        public static void ModifyContent(this SdtRun block, string content)
        {
            SdtContentRun contentBlock = block.ChildElements.OfType<SdtContentRun>().ElementAt(0);
            Run run = contentBlock.ChildElements.OfType<Run>().ElementAt(0);
            if (run != null)
            {
                Text text = run.GetFirstChild<Text>();
                text.Text = content;
            }
        }

        public static void Check(this SdtRun block)
        {

            DocumentFormat.OpenXml.Office2010.Word.SdtContentCheckBox chkBox = block.SdtProperties.GetFirstChild<DocumentFormat.OpenXml.Office2010.Word.SdtContentCheckBox>();
            chkBox.Checked.Val = DocumentFormat.OpenXml.Office2010.Word.OnOffValues.One;

            block.ModifyContent("☒");
        }

        public static void UnCheck(this SdtRun block)
        {

            DocumentFormat.OpenXml.Office2010.Word.SdtContentCheckBox chkBox = block.SdtProperties.GetFirstChild<DocumentFormat.OpenXml.Office2010.Word.SdtContentCheckBox>();
            chkBox.Checked.Val = DocumentFormat.OpenXml.Office2010.Word.OnOffValues.Zero;

            block.ModifyContent("☐");

        }
    }

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-21T17:25:02.170

您必须在 sdtContent 中找到 Text 元素并将其替换为已根据您的需要格式化的新元素。

所以你需要这样的东西（未经测试，可能需要编辑第一行）：

```
var dateRun = block.GetFirstChild<SdtContentRun>().GetFirstChild<Run>();
dateRun.RemoveAllChildren<Text>();
dateRun.AppendChild(new Text(now.ToString("dd/MM/yyyy", new CultureInfo("en-US")))); 
```

# objective-c - UISplitViewController 是否只检查 presentWithGesture 一次？

> ID：10971527
> 
> 赞同：2
> 
> 时间：2012-06-10T19:05:23.217
> 
> 标签：objective-c, ios, xcode, uisplitviewcontroller

我的详细视图之一是使用滑块，当有人将其向右移动时，它自然会触发滑动手势。不幸的是，这意味着弹出视图会被调用，即使用户实际上正在尝试操作滑块控件。

我尝试仅在该视图控制器中将 PresentWithGesture 设置为 NO。不幸的是，它不起作用。我已经检查过了，该属性被设置为 no，所以我不知道那里发生了什么。如果我在此过程的早期设置PresentsWithGesture，即在我的AppDelegate 的appDidFinishLaunching 代码中，一切都会完美运行——除了我在其他每个页面上都失去了手势。

编辑：为了清楚起见，我的问题是，如果该值实际上只检查一次然后被忽略（坏苹果！）还是我做错了什么？

```
-(void)viewWillAppear:(BOOL)animated
{
    //code
    splitView.presentsWithGesture=NO;
    NSLog(@"Split view presents: %i", splitView.presentsWithGesture);//results in '0'
} 
```

* * *

## 回答 #1

> 赞同：-2
> 
> 时间：2012-07-17T04:19:48.373

它实际上检查了好几次，我的代码有问题。

# java - 读/写谷歌应用引擎的最简单方法

> ID：10971534
> 
> 赞同：0
> 
> 时间：2012-06-10T19:06:51.217
> 
> 标签：java, string, google-app-engine

我不知道如何使用谷歌应用引擎保存和读取数据。此代码无法编译，但应该让您了解我想要做什么。我似乎无法弄清楚的唯一一件事是如何从字符串创建我自己的密钥......

```
DatastoreService datastore = DatastoreServiceFactory.getDatastoreService();

    Entity article = new Entity("Article", "keyThatIMadeUp");

    article.setProperty("articleHTML", "this is where the article html goes");

    datastore.put(article);
    try {
        Entity articleRetrieved = datastore.get(Key("keyThatIMadeUp"));
    }
    catch (EntityNotFoundException e) {
        System.out.println("data not found");
    } 
```

任何帮助都会非常感谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-10T19:48:24.653

键嵌入了它们作为键的实体类型。因此，要从部分重构密钥，您需要提供实体类型的名称。就您而言，您正在寻找类似的东西

```
... = datastore.get(Key.from_path("Article", "keyThatIMadeUp")) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-11T01:30:30.980

尝试跟随 ndb 概述。它有一个您可以遵循的简单示例。

[https://developers.google.com/appengine/docs/python/ndb/overview](https://developers.google.com/appengine/docs/python/ndb/overview)

# android - Android 处理多个屏幕...（相对布局或线性布局）？

> ID：10971535
> 
> 赞同：13
> 
> 时间：2012-06-10T19:06:55.540
> 
> 标签：android, android-layout, android-screen-support

我已经完成了我的应用程序，现在需要处理适应多种屏幕尺寸的问题。

在这一点上，我唯一的选择似乎是执行以下操作：

有一个单独的 xml 布局：Small、Normal、Large 和 X-Large 屏幕尺寸。在其中有一个单独的 xml 布局：ldpi、mdpi、hdpi 和 xhdpi 在纵向和横向有一个单独的 xml 布局。

一个活动总共有 32 个布局。

我只是想知道是否有更好的方法来做到这一点，因为这将非常耗时，但是如果需要支持所有可能的设备，我不会介意。

我做了一些阅读，人们说要使用线性布局并使用重力，因为这是一个百分比，所以它在所有屏幕上看起来都一样。或者我可以使用RelativeLayout 并使用“AlignAbove 或Below”等。

但是我的主要问题是尺寸错误，而元素的位置似乎通常在正确的位置。

有没有一种被广泛接受的方法来做到这一点？

我真的只是在寻找普通开发人员处理所有屏幕尺寸的“主流”方式。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2015-08-13T05:09:02.007

好问题。但是你这样做的方式不是“**专业**”开发人员会做的事情。*单个 Activity 不需要 32 个布局，Android 足够智能来处理事情。*

> 没有布局的多定义/dimens.xml 多设备支持的多定义是否可能？

**是的，这是绝对可能的，这就是你应该做的。**为单个 Activity 布局定义 32 个布局并不是一件好事。

假设我在 Play 商店中有一个相当大的应用程序，其中包含 20 多个活动，现在如果我为单个活动定义了 32 个布局，那么我的应用程序将有 600 多个布局。**这可行吗？**问问自己。

**你需要先给** [这个](http://developer.android.com/guide/practices/screens_support.html)页面一个非常好的阅读。它几乎包含您需要知道的所有内容。但我会帮你把事情做好。

> 您不需要为屏幕尺寸和密度的每种组合提供替代资源。该系统提供了强大的兼容性功能，可以处理在任何设备屏幕上呈现应用程序的大部分工作，前提是您已使用允许其优雅调整大小的技术实现您的 UI

这句话足以让你相信你不应该这样做。**Android 系统足够智能，可以相应地调整布局大小。**相信我，它真的很好。

> 当您为不同的屏幕尺寸设计 UI 时，您会发现每种设计都需要最少的空间。因此，上面的每个通用屏幕尺寸都有一个由系统定义的相关最小分辨率。这些最小尺寸以“dp”为单位——与您在定义布局时应使用的单位相同

我将尝试指出您需要考虑的一些重要事项。

*   永远不要在布局中硬编码像素
*   始终在您的布局中使用`dp`或。`sp`顾名思义，它们**与不同设备的密度无关**，因此在每个设备中看起来都一样。
*   始终使用`wrap_content`or`match_parent`表示高度和宽度
*   永远不要使用`AbsoluteLayout`
*   `RelativeLayout`或者`LinearLayout`两者都适合您，您只需要根据场景决定要使用哪一个
*   **始终为不同的屏幕尺寸**提供不同版本的可绘制对象。**这是你不能跳过的。如果你不这样做，你的布局不仅在不同的设备上看起来很糟糕，而且会让你的应用消耗不必要的资源。**
***   虽然单一布局也适用于平板电脑，但由于表格的屏幕尺寸比典型手机大得多，**您应该只为它们提供单独的布局。****

 ****Android Studio 丰富的布局编辑器**

Android Studio 有一个很棒的布局编辑器，您可以在其中即时预览您的布局。只需看下面的截图，

[![在此处输入图像描述](../Images/429a855bb969a4eb89376b7f9725dd7d.png)](https://i.stack.imgur.com/LQ90a.png)

我正在以各种屏幕尺寸同时预览我的应用程序的特定屏幕，并且**我的布局看起来就像我想要的那样，在所有这些屏幕中**。

这个活动我只有两种布局，一种用于所有手机，一种用于所有平板电脑。

**实践经验**

如果您想要实际体验，我在 Play 商店中运行了一个应用程序，成千上万的用户在 8000 多种不同屏幕尺寸的不同设备上使用它。

**我只有 2 种特定 Activity 的布局**，一种用于手机，一种用于平板电脑。我的应用程序的用户界面在所有设备上看起来都不错，而且我从未收到任何用户的抱怨。如果您需要，[这里](https://play.google.com/store/apps/details?id=com.codexapps.andrognito)是应用程序的链接。

我相信这个详细的答案可以澄清您的所有疑问，如果没有，请随时告诉我。我很乐意提供进一步的帮助。

**UDPATE**

我会再次尝试消除您的困惑。但首先，我建议您多次**阅读我的答案。**

您需要一种或两种布局，**这完全取决于您正在设计的特定布局**。所有布局都与其他布局不同。**它不能在技术上被定义为它的主观性。**没有经验法则。但我会尽量正式地帮助你。

您需要充分利用**Android Studio 丰富的布局编辑器**及其出色的实时预览功能。

*   首先尝试针对任何平均设备尺寸（如 5 英寸的 Nexus 5）设计布局。只需选择 Nexus 5 即可预览您的布局。

*   对设计感到满意后，选择其他屏幕尺寸进行预览。您也可以像上面的屏幕截图一样选择“预览所有尺寸”。

*   尝试查看您的布局在所有屏幕尺寸（从 4 英寸到 10 英寸的平板电脑）中是否看起来都不错。看看间距、图像大小、字体大小是否都正确。

*   从 4 英寸到 6 英寸的所有手机通常都会有完美的预览，但您可能需要为平板电脑屏幕单独设计另一种布局（因为它们足够大）。只有这里需要 2 种布局，但并非总是如此。

就像在我的应用程序中一样，我有 2 个单独的布局，仅用于 5-6 个活动，但对于其余的，我只有一个布局。这一切都取决于特定的布局。

设计与编程完全不同。**编程可以正式和语法定义，但设计不能**。设计是绝对主观的，取决于设计师的观点。**以自己的方式发挥创意，这就是设计的魔力**。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-10T19:14:58.197

> 但是我的主要问题是尺寸错误，而元素的位置似乎通常在正确的位置。

您是否正确使用 dp 和 sp 单位？

> dp
> 
> 与密度无关的像素 - 基于屏幕物理密度的抽象单位。这些单位是相对于 160 dpi（每英寸点数）的屏幕而言的，在该屏幕上 1dp 大致等于 1px。在更高密度的屏幕上运行时，用于绘制 1dp 的像素数按适合屏幕 dpi 的系数放大。同样，当在较低密度的屏幕上时，用于 1dp 的像素数会按比例缩小。dp与像素的比例会随着屏幕密度而变化，但不一定成正比。使用 dp 单位（而不是 px 单位）是一种简单的解决方案，可以使布局中的视图尺寸针对不同的屏幕密度正确调整大小。换句话说，它为不同设备上 UI 元素的真实尺寸提供了一致性。
> 
> sp
> 
> 与比例无关的像素 - 这类似于 dp 单位，但它也根据用户的字体大小偏好进行缩放。建议您在指定字体大小时使用此单位，以便根据屏幕密度和用户偏好进行调整。

来自android文档。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-08-17T13:26:04.680

[我认为阅读文档很好，他们解释了有关支持多屏](http://developer.android.com/guide/practices/screens_support.html)的每一件事。

但是每个人都混淆了我们必须**如何**以及**何时**使用它，对吗？

在混淆之前只需下载官方示例代码（如[iosched](https://github.com/google/iosched)），尝试了解他们如何管理支持屏幕-

> 第一次很难理解该代码，但我们是开发人员，所以......

示例：我有一个支持 API 10-22 的 Android 设备，所有设备都从（Galaxy star s5280- 非常小的屏幕）到 10 英寸平板电脑（Nexus 10）。

如何管理资源，

* * *

**POINT-1**从布局开始

创建两个布局，如下所示

```
res/layout/my_layout.xml   
res/layout-sw600dp/my_layout.xml // 7 inch tablets 
```

以下是**可选**的，以防您需要非常小或大的布局

```
res/layout-small/my_layout.xml
res/layout-sw720dp/my_layout.xml // 10 inch tablets 
```

* * *

**POINT-2**您还可以使用维度管理布局

```
res/values/dimens.xml
res/values-sw600dp/dimens.xml // 7 inch tablets
res/values-sw720dp/dimens.xml // 10 inch tablets 
```

* * *

**POINT-3**添加不同的drawable

```
res/drawable-mdpi/graphic.png 
res/drawable-hdpi/graphic.png 
res/drawable-xhdpi/graphic.png 
res/drawable-xxhdpi/graphic.png 
```

* * *

根据我的经验，每个人都使用 POINT 1 和 2（根据要求）的组合，而 POINT-3 是通用的:)。阅读[最佳实践](http://developer.android.com/guide/practices/screens_support.html#screen-independence)

* * *

最后别忘了在android manifest文件中使用`<supports-screens>`and`<compatible-screens>`

* * *

编辑：

> 我可以使用 values-large 和 values-xlarge 吗？我对 values-large 和 values-sw600dp 感到困惑

**注意：**从 Android 3.2（API 级别 13）开始，这些尺寸组已被弃用，取而代之的是一种基于可用屏幕宽度管理屏幕尺寸的新技术。如果您正在为 Android 3.2 及更高版本进行开发，请参阅[为 Android 3.2 声明平板电脑布局以](http://developer.android.com/guide/practices/screens_support.html#DeclaringTabletLayouts)获取更多信息。

首先阅读上面的指南，根据它们，我们不必`such as large or xlarge`只使用`600dp of width`. 那是> = 3.2 android os。它在每台设备上都能正常工作，但您可能会在 GALAXY TAB-2、GRAND 等 GALAXY 系列设备中遇到问题，因为它们有时有旧的 API，您可以使用 values-large 和 values-xlarge。这是特定于设备的问题，仅在需要时才执行。

* * *

再注意一点，像我们`listview`在布局中一样根据需要创建上面的布局多个文件，然后只需为所有设备（包括平板电脑）创建一个相同的文件，这样您也可以管理您的应用程序大小。

LINEAR、RELATIVE 和 FRAME 布局让您的生活更轻松。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-08-17T13:00:43.743

您可以通过动态设计布局来实现这一点。它可以适合所有屏幕。在Android中我们无法对可用的移动屏幕做出结论。有很多不同分辨率的屏幕。为了使UI具有灵活性。你需要设计动态布局。例如，我添加了一个可以修复所有屏幕（纵向）的 xml。

xml是：

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:orientation="vertical" android:layout_width="match_parent"
android:layout_height="match_parent"
android:weightSum="10"
android:gravity="center">

<LinearLayout
    android:orientation="horizontal"
    android:layout_width="match_parent"
    android:layout_height="0dip"
    android:layout_weight="4"
    android:weightSum="10"
    android:gravity="center">

    <ImageView
         android:layout_width="0dip"
        android:layout_weight="3"
        android:layout_height="match_parent"
        android:src="@mipmap/ic_launcher"
        android:id="@+id/imageView3" />
</LinearLayout>

</LinearLayout> 
```**

# android - 无法实例化 java.lang.classnotfoundexception android

> ID：10971539
> 
> 赞同：1
> 
> 时间：2012-06-10T19:07:22.140
> 
> 标签：android, classnotfound

我知道已经有很多这样的，但似乎没有一个能解决我的问题。奇怪的是，此错误仅发生在已签名的包上（从 Eclipse 运行它可以完美运行），并且仅在我发布的最新更新中弹出（但我想不出我更改的任何相关内容...... )

```
Caused by: java.lang.ClassNotFoundException: com.domain.app.MainApp 
```

我使用了一个扩展 Application 的类以使用库。适用的清单部分如下所示：

```
<application android:icon="@drawable/launcher" android:label="@string/app_name"
    android:theme="@style/MyTheme" android:name=".MainApp">

    <activity android:name=".MainActivity"
              android:label="@string/app_name"
              android:theme="@style/MyTheme">
               <intent-filter>
            <action android:name="android.intent.action.MAIN" />
            <category android:name="android.intent.category.LAUNCHER" />
        </intent-filter>

    </activity> 
```

有谁知道可能是什么原因造成的？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-07T18:42:32.623

Not sure what was wrong but after cleaning, re-exporting, and re-uploading the problem stopped occurring.

# php - 在页面加载时触发此脚本

> ID：10971540
> 
> 赞同：1
> 
> 时间：2012-06-10T19:07:36.073
> 
> 标签：php, jquery

我有一个 jQuery 脚本，它在选中（或取消选中）复选框时触发。它会导致整个页面被禁用或启用。

它按预期工作，但我必须以“编辑”模式启动页面。

**我需要能够设置页面是在编辑模式下启动，还是在页面最初加载时禁用模式。**

我可以很容易地通过 PHP 传递一个变量——但我不确定在哪里/如何做，或者触发什么？

这是我的触发脚本

```
<script>
    $('#switch-enable').change(function()
    {
        if ($('#switch-enable').is(':checked')) {
            $('#disabled-switches *').prop("disabled", false);  
        } else {
            $('#disabled-switches *').prop("disabled", true);   
        }
    } );
</script> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-10T19:12:03.913

将道具更改代码包装在一个函数中，调用它并通过 例如在复选框上`$(document).ready()`设置适当的属性。`checked``php`

```
<input type="checkbox" <?=$editModeOnStart?' checked="checked"':''?> id="switch-enable" />
<script>
  var handleSwitch = function(){
    if ($('#switch-enable').is(':checked')) {
        $('#disabled-switches *').prop("disabled", false);  
    } else {
        $('#disabled-switches *').prop("disabled", true);   
    }
  }
  $(function(){
    handleSwitch();
    $('#switch-enable').change(handleSwitch);
  });
 </script> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-10T19:16:21.790

```
$(document).ready(function() {
    var editMode = '<?php echo $editMode; ?>;
}); 
```

并使用 GET 在 php 中设置 $editMode

```
$editMode = $_GET['edit']; 
```

# jquery - FireBug - TypeError：项目未定义

> ID：10971541
> 
> 赞同：0
> 
> 时间：2012-06-10T19:07:38.650
> 
> 标签：jquery, firebug, drop-down-menu, jquery-chosen

我在我的网站中使用 Chosen Select Box Jquery 插件。选择中的选项会使用 ajax 进行更新，因此当您在 1 个框中选择某些内容时，会显示下一个框的选项。

我几乎让它工作了，但是当我单击第二个框选项时，第三个框选项不显示。我在 FireBug 中收到一条错误消息：

类型错误：项目未定义

item.selected = true;

它说它在 Chosen Box 的 js 文件中。

JS ========================

```
 Chosen.prototype.result_select = function(evt) {
  var high, high_id, item, position;
  if (this.result_highlight) {
    high = this.result_highlight;
    high_id = high.attr("id");
    this.result_clear_highlight();
    if (this.is_multiple) {
      this.result_deactivate(high);
    } else {
      this.search_results.find(".result-selected").removeClass("result-selected");
      this.result_single_selected = high;
      this.selected_item.removeClass("chzn-default");
    }
    high.addClass("result-selected");
    position = high_id.substr(high_id.lastIndexOf("_") + 1);
    item = this.results_data[position];
    item.selected = true;                                <---------- Error
    this.form_field.options[item.options_index].selected = true;
    if (this.is_multiple) {
      this.choice_build(item);
    } else {
      this.selected_item.find("span").first().text(item.text);
      if (this.allow_single_deselect) this.single_deselect_control_build();
    }
    if (!(evt.metaKey && this.is_multiple)) this.results_hide();
    this.search_field.val("");
    if (this.is_multiple || this.form_field_jq.val() !== this.current_value) {
      this.form_field_jq.trigger("change", {
        'selected': this.form_field.options[item.options_index].value
      });
    }
    this.current_value = this.form_field_jq.val();
    return this.search_field_scale();
  }
}; 
```

我花了几个小时试图弄清楚但不能。任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2014-08-11T10:27:20.833

有同样的问题，在您选择的 HTML 中添加一个空选项标签，应该可以正常工作。

Edit: As [knuturO](https://stackoverflow.com/users/3232242/knuturo) pointed out, arrays are 0 indexed, but most chosen indexes start at 1\. By adding an empty value, there no longer is a mismatch between array indexing and the chosen indexes. A dropdown for example works the same way.

# iphone - 为当前日期设置不同的小时

> ID：10971550
> 
> 赞同：0
> 
> 时间：2012-06-10T19:08:46.583
> 
> 标签：iphone, objective-c

我想获取今天的日期，并将小时设置为用户输入的值。我试过这个：

```
NSDateComponents *components = [[NSCalendar currentCalendar] components:NSDayCalendarUnit | NSMonthCalendarUnit | NSYearCalendarUnit fromDate:[NSDate date]];
int year = [components year];
int month = [components month];
int day = [components day];
int hour = 10;
NSLog(@"%d %d %d", year, month, day);
NSString *yearStr   = [NSString stringWithFormat:@"%d", year];
NSString *monthStr  = [NSString stringWithFormat:@"%d", month];
NSString *dayStr    = [NSString stringWithFormat:@"%d", day];
NSString *hourStr   = [NSString stringWithFormat:@"%d", hour];
NSString *str1      = [yearStr stringByAppendingString:@"-"];
NSString *str2      = [str1 stringByAppendingString:monthStr];
NSString *str3      = [str2 stringByAppendingString:@"-"];
NSString *str4      = [str3 stringByAppendingString:dayStr];
NSString *str5      = [str4 stringByAppendingString:@" "];
NSString *str6      = [str5 stringByAppendingString:hourStr];
NSString *remind    = [str6 stringByAppendingString:@":00:00"];

NSDateFormatter *formatter = [[NSDateFormatter alloc] init];
[formatter setDateFormat:@"yyyy-MM-dd HH:mm:ss"];
NSDate *remindOn = [formatter dateFromString:remind];
NSLog(@"First reminder set on: %@ , str: %@", remindOn, remind); 
```

虽然 'remind' 设置为预期值（当前日期，小时设置为 'hour' 变量的所需值），而 'remindOn' 设置为当前日期。这是为什么？我很困惑。输出是这样的：第一个提醒设置在：2012-06-11 04:30:00 +0000，str: 2012-6-11 10:00:00

说，如果“小时”值为“10”，我希望“提醒”设置为 2012-06-11 10:00:00，即今天的日期，但“时间”设置为“10”

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-10T19:37:31.393

NSLog 会将日期记录为 GMT 日期，如果要打印出更准确的日期使用 `NSDateFormatter`方法`stringFromDate:`

像这样

```
NSDate *remindOn = [formatter dateFromString:remind];

//Instead of nslog directly, use this stringFromDate:remindOn
NSString *str = [formatter stringFromDate:remindOn];
NSLog(@"date is %@", str); //This will log the correct data 
```

所以不要直接 NSLog 日期，因为它会将它作为 GMT 时区返回

# django - Django 模板：如何避免包含和加载的空行？

> ID：10971553
> 
> 赞同：8
> 
> 时间：2012-06-10T19:09:17.383
> 
> 标签：django, django-templates, carriage-return

在模板中，我使用以下代码：

```
{% load i18n %}
{% include "header.html" %}
{% include "top_bar.html" %} 
```

但这会产生几个回车符 ( )，因为我用回车符`\n`分隔每个`include`和。`load`我不想像这样连接包含：

```
{% include "header.html" %}{% include "top_bar.html" %} 
```

因为不可读。

有没有办法避免这些生成的新行？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-12T22:27:55.533

好吧，经过一些研究，我发现[了这个帖子](https://code.djangoproject.com/ticket/2594)，其中提交了一个补丁，目前正在审查中。对于我的项目，此验证步骤花费了太多时间。

这是我为此创建[的 django 模块。](https://github.com/ldiqual/django-linestripper)正如 Gary Wilson 在上面的线程中所问的那样，它处理空格/空白行/空行。

它包含一个模板加载器和一个中间件：

*   模板加载器标记请求的空行（开发人员自愿插入的那些）
*   中间件拦截`HttpResponse`并抑制每个空行。然后，它取消标记先前请求的行并返回清除的响应

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-10T19:29:57.343

检查这个片段：[http](http://djangosnippets.org/snippets/569/) ://djangosnippets.org/snippets/569/ 。您还可以将其转换为中间件以避免模板中出现额外的标签。

# asp.net-mvc - 来自基本控制器的 RedirectToAction

> ID：10971555
> 
> 赞同：2
> 
> 时间：2012-06-10T19:09:53.763
> 
> 标签：asp.net-mvc, t4mvc

我试图`RedirectToAction(actionResult)`从我的基本控制器执行，但 IntelliSense 没有显示这种过载。我发现 RedirectToAction 被放置在每个 T4MVC 控制器部分类中。我有点理解为什么它是这样实现的……但是有一个替代实现不是更好吗？这将是 Controller 的扩展方法？或者我的情况有更好的解决方案吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-11T05:10:57.157

如果你

> 有点理解为什么以这种方式实施...

然后你可以在你的基本控制器中以同样的方式实现它，你很高兴

```
 private ActionResult RedirectToAction(ActionResult actionResult)
    {
        var callInfo = actionResult.GetT4MVCResult();
        return RedirectToRoute(callInfo.RouteValueDictionary);
    } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-29T03:29:33.453

难点在于RedirectToAction的实现需要调用Controller.RedirectToRoute，它是protected而不是public的。因此，您将无法从扩展方法调用它。

另一个缺点是，即使它有效，你也必须打电话`this.RedirectToAction(...)`而不是`RedirectToAction(...)`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-10T20:20:23.283

如果您只想让 IntelliSense 工作，您可以创建自己的扩展方法。它将以低于 T4MVC 控制器分部类提供的类成员方法的优先级进行解析，因此它应该参与 IntelliSense，但实际上不会被编译器触及。

如果您在更高的哲学层面上问“他们为什么要这样做？”，那么恐怕我将不得不听从真正的专业人士。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-28T23:47:50.437

这可能会有所帮助。这是我不久前给出的答案，可能是您正在寻找的

[重定向](https://stackoverflow.com/questions/6532760/avoid-hard-coding-controller-and-action-names/6540414#6540414)

# c++ - 来自旋转矩阵的 Y 旋转

> ID：10971558
> 
> 赞同：1
> 
> 时间：2012-06-10T19:10:24.383
> 
> 标签：c++, math, 3d, matrix, rotation

这是我的斧头。我不知道该怎么称呼它。（是 ZXY 吗？）（这是相机看到的）

![](../Images/1e1b8d3e517cd293020fb7673af2253f.png)

我想知道围绕 Y 轴的平面旋转。目前它在 Y 附近是 0 度。

这就是我所做的，

```
Matrix33 orientmatrix = body->getGlobalOrientation();
return Degree(-asin(orientmatrix[2][0])); 
```

这会返回错误的角度，逆时针方向：0..45..90..45..0..-45..-90..-45..0

它应该是：0...45..90..135..180..-45..-90..-135..0

我究竟做错了什么？

谢谢你。

（这是 OGRE，代码是 C++）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-10T20:08:48.967

你做错了什么是你正在使用`asin`. 它返回一个介于 -pi/2 到 +pi/2 或 -90 度到 +90 度之间的值。

如果你想要一个跨越 360 度的值，你需要使用`atan2`. 假设您的方向确实是关于 y 的旋转，您可以使用

```
Degree(atan2(orientmatrix[0][2], orientmatrix[0][0])) 
```

# c++ - 将 C++ 程序转换为使用 GMP

> ID：10971559
> 
> 赞同：-4
> 
> 时间：2012-06-10T19:10:40.333
> 
> 标签：c++, gmp

我的程序中的所有变量都使用以下数据类型

```
typedef long long ll; 
```

我安装了 GMP 并尝试这样做：

```
typedef mpz_class ll; 
```

我试过了

```
typedef mpz_t ll; 
```

但它不会编译，通常会出现大量“无效运算符”错误。有没有更简单的翻译方法？

示例错误：

```
ll a = sqrt(static_cast<double>(n/2)); 
```

`__gmp_expr<__mpz_struct[1], __gmp_binary_expr<mpz_class, long int, __gmp_binary_divides> >' to type`来自double类型的无效 static_cast '

另一个：

```
count-=myArr[m]; 
```

'myArr[m]' 中的 'operator[]' 不匹配

它也不会让我做

```
 mpz_t count;
 count = (x*x-1); 
```

其中 x 是 long long

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-10T20:51:59.607

首先，mpz_t 没有任何运算符重载，因为它是 C 结构，而不是 C++ 类。接下来， mpz_class*的行为有点*像整数，因为它有一些基本的运算符重载。但是，它*绝对不能*作为其他某种整数值的替代品。您将必须检查您的程序并通过将当前代码替换为下一个适用于 mpz_class 值的代码来修复所有错误。没有简单的方法可以做到这一点：您必须硬着头皮学习如何有效地使用 GMP。

或者，您可以尝试使用诸如 CLN 之类的东西或其他库，这些库试图更接近于 C++ 的大量替代品。据我所知，没有一个图书馆可以完全甚至很好地做到这一点。

# reportviewer - 报表查看器呈现时在组之间插入空白页面

> ID：10971563
> 
> 赞同：2
> 
> 时间：2012-06-10T19:11:02.050
> 
> 标签：reportviewer

我想要帮助论坛上的其他人不想要的东西：我需要在 reportview 分组数据之间放置一个空白页。

我有一个数据库表，它返回基于特定列对它们进行分组的数据，并且此报告在打印之前呈现为 PDF。我的公司使用双面打印机，所以打印使用一张纸的两面，不仅是为了省钱，而且因为数据与医院的病历有关。当我呈现 PDF 时，数据按患者分组。一切都在渲染上运行良好，如果记录只打印在一张纸上，效果会很好。但我们必须使用 2 面。

当我打印此 PDF 时，患者的一些数据记录打印在其他患者的同一张纸上（例如：患者需要 5 页来打印他的记录……下一位患者的记录将从第 6 页开始，同一张纸。 ..因此第一个病人的记录在第三张纸上结束，在这张纸上，第二个病人的记录开始......）所以我需要放置一个分隔符（我认为每个分组都从奇数开始的空白页）但是我想不通。

分页符已设置并且运行良好。我需要“换页”……如果是 2 或 3 名患者的记录，我们可以手动进行。但是对于 70 和 100 名患者，这将成为一项艰巨的任务......我们可以将记录直接发送到打印机，循环或其他方式，由患者在没有预览的情况下，但它会将许多对象放在打印假脱机程序上，并且认为这可能是一个问题，因为纸张可能会卡住，我们的其他问题可能会出现在这个过程中......所以我们更喜欢我们所说的断纸。

# wordpress - Wordpress 将 page_id=2 作为出现的第一页，而不是博客

> ID：10971571
> 
> 赞同：-1
> 
> 时间：2012-06-10T19:12:57.150
> 
> 标签：wordpress, redirect

所以我决定进入 wordpress 的美妙世界，这一切看起来都非常简单直接。

我唯一的问题是当人们访问我的网站时，他们会来到这里......

[http://jamessuske.com/taran/](http://jamessuske.com/taran/)博客页面。

我的问题是如何让我的用户在访问[http://jamessuske.com/taran/](http://jamessuske.com/taran/?page_id=2)时访问此页面[http://jamessuske.com/taran/?page_id=2](http://jamessuske.com/taran/)

我希望这是有道理的......但感谢您的帮助

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-10T19:20:56.803

通过转到设置 -> 阅读设置 -> 检查静态页面（在下面选择） -> 在下拉列表中选择您的页面来解决此问题。

# java - Java - 局部变量的修改

> ID：10971575
> 
> 赞同：3
> 
> 时间：2012-06-10T19:13:14.670
> 
> 标签：java, local-variables

我在 Java 中有一个微不足道但令人恼火的问题。假设我们有以下类和方法：

```
class A{
    void doSth(int[] array){    
        int index1, index2, index3;
        int value1, value2, value3;    

        if(array[index1] > 10){    
            //Long code modifies value1, value2, value3
        }  

        if(array[index3] > 100){    
            //Same long code modifies value1, value2, value3
        }      

        if(array[index2] > 20){    
            //Same long code modifies value1, value2, value3
        }    
    } 
```

不管这是试图实现什么，我想以某种方式使这种冗余消失。通常，我会将值传递给 hlper 方法，但我不能，因为该块正在修改局部变量。知道如何简化吗？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-06-10T19:17:58.937

这听起来像你`value1`，可能有一些`value2`组合*的*含义。因此，将它们封装到一个单独的类中，此时您可以调用一个方法来修改现有实例或返回该类的新实例。无论哪种方式，使用单个局部变量都可以。`value3`

 ** * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-10T19:26:41.327

您可以重构您的代码以分解一个方法，将您需要的所有内容传递给该方法，但您需要引入一些私有字段。：

   私有int值1，值2，值3；

```
private void doIt(int index, int threshold) {
    if (array[index] <= threshold)
        return;
    ... //Same long code modifies value1, value2, value3
} 
```

然后将您的主要代码替换为：

```
void doSth(int[] array, int index1, int index2, int index3) { 
    doIt(index1, 10);
    doIt(index3, 100);
    doIt(index2, 20);
} 
```

你完成了。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-10T19:39:39.083

如果 if 语句中的代码都完全相同，为什么不这样做：

```
class A{
   void doSth(int[] array){
      int value1, value2, value3;
      int index[][] = {
        {val1, 10},
        {val2, 100},
        {val3, 20}
      };

      // ... 

      for(int i = 0; i < index.length; i++){
         if(array[index[i][0]] > index[i][1]){
           // ... Long code modifies value1, value2, value3
         }
      }
   }
} 
```*

# objective-c - 如何从 UITextRange.start 的行首开始偏移

> ID：10971577
> 
> 赞同：3
> 
> 时间：2012-06-10T19:13:22.650
> 
> 标签：objective-c, cocoa-touch, uikit, uitextview, uitextrange

我有一个 UITextView 可以有多行。我感兴趣的是光标在某一行上的位置（第一行、第二行、第三行等都没有关系）。

我一直在记录 UITextRange.start 这正是我所需要的，即 offset 属性：

```
cp <UITextPositionImpl: 0x6e93260> <<WebVisiblePosition: 0x6e92d00>(offset=5, context=([d|], [u+0064|u+0000])> 
```

我的问题是我如何将 offset=5 变成一个简单的整数？

这是我的代码：

```
UITextRange *caretPositionRange = textView.selectedTextRange;
NSLog(@"cp %@", caretPositionRange.start); 
```

我只需要像 int cp = caretPositionRange.start.offset 这样不起作用的东西。

* * *

编辑：

澄清一下，我对每一行的光标位置特别感兴趣，而不是整个 TextView。所以这真的行不通：

```
UITextRange *caretPositionRange = tv.selectedTextRange;
    int caretPosition = [tv offsetFromPosition:tv.beginningOfDocument
                            toPosition:caretPositionRange.start]; 
```

因为这会给我每条线的不同位置。

* * *

编辑2：

杰西给出的以下答案非常有效。第一次，我得到了一个 EXC_BAD_EXCESS，因为我没有检查 startOfLine = nil，所以请记住检查它是否不是 nil。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-10T19:17:52.030

您需要通过 UITextInput 方法询问 UITextView。像这样的东西：

```
UITextPosition *pos = caretPositionRange.start;
id<UITextInputTokenizer> tokenizer = [textView tokenizer];
UITextPosition *startOfLine = [tokenizer positionFromPosition:pos 
                                                   toBoundary:UITextGranularityLine
                                                 inDirection:UITextStorageDirectionBackward];
if (startOfLine != nil) {
    // based on some experiments, startOfLine may be nil for, eg, empty text views
    // the next line crashes if you pass nil, so we check first
    NSUInteger offset = [textView offsetFromPosition:startOfLine
                                          toPosition:pos];
} 
```

# java - 骰子仿真 - 为 for 循环连接 ImageButton 名称

> ID：10971578
> 
> 赞同：1
> 
> 时间：2012-06-10T19:13:23.473
> 
> 标签：java, android, imagebutton

我正在尝试编写一个循环来设置 5 个骰子的资源。如果我将代码最后一行中的“imgBtnName”更改为任何骰子名称（例如“dice1”），则该行不会出错。但是，当我尝试连接名称以适应 for 循环时， setImageesource 上的以下错误通知：

**错误**

```
The method setImageResource(int) is undefined for the type String 
```

有任何想法吗？我觉得我可能缺少类似于“int id”行的语法。

**代码**

```
public void PlayGame()  
    {  
        dice1 = (ImageButton)findViewById(R.id.btndice1);  
        dice2 = (ImageButton)findViewById(R.id.btndice2); 
        dice3 = (ImageButton)findViewById(R.id.btndice3); 
        dice4 = (ImageButton)findViewById(R.id.btndice4); 
        dice5 = (ImageButton)findViewById(R.id.btndice5);

        begin = (Button)findViewById(R.id.btnroll);
        roll = (Button)findViewById(R.id.btnbegin);

        begin.setOnClickListener(new View.OnClickListener(){
            @Override
            public void onClick(View v) {
                Random rand = new Random();     

                for (int i = 0; i < 6; i = i + 1) {
                    int rndInt = rand.nextInt(6) + 1; // Random number between 1 and 6                  
                    String imgBtnName = "dice" + (i + 1);
                    String imgName = "die" + rndInt;                    
                    int id = getResources().getIdentifier(imgName, "drawable", getPackageName());

                    imgBtnName.setImageResource(id);  //trying use the imgButnName string to set dice1, dice2, dice3 etc to set the imagebutton resource
                }

            }
        });  
    } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-10T19:18:34.653

将您的 ImageView 包装成一个数组并围绕它们循环

```
 dice1 = (ImageButton)findViewById(R.id.btndice1);  
    dice2 = (ImageButton)findViewById(R.id.btndice2); 
    dice3 = (ImageButton)findViewById(R.id.btndice3); 
    dice4 = (ImageButton)findViewById(R.id.btndice4); 
    dice5 = (ImageButton)findViewById(R.id.btndice5);

    ImageButton[] dice = new ImageButton[5]{dice1, dice2, dice3, dice4, dice5};

    for (int i = 0; i < dice.length; i++) {
         int id = R.drawable.ic_launcher;
         dice[i].setImageResource(id);
    } 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-10T19:18:42.413

`imgBtnName.setImageResource(id);`

我很确定 String 类没有*方法*`setImageResource(...)`。;)

换句话说，您正在尝试将图像资源 id 转换为字符串，而不是其中一个`ImageButton`。我想象`dice1 ... dice5`应该在例如一个数组中，这样您就可以在 for 循环中迭代它们并调用类似的东西：`dice[i].setImageResource(id)`。

# jquery - 为什么将新内容插入到溢出设置为滚动的 div 时会触发 jQuery 滚动事件？

> ID：10971583
> 
> 赞同：1
> 
> 时间：2012-06-10T19:14:36.640
> 
> 标签：jquery, events, scroll

我有一个带有 CSS“溢出：滚动”属性的 div。通过 jQuery 方法 html 插入新内容时，会触发滚动事件。为什么会这样，我该如何防止呢？因为我实际上并没有滚动，只是插入......

[http://jsfiddle.net/qWckG/](http://jsfiddle.net/qWckG/)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-10T20:00:31.400

它触发（正确）是因为滚动位置从 100 变为 0。

您可以尝试一些丑陋的解决方法：

[http://jsfiddle.net/qWckG/3/](http://jsfiddle.net/qWckG/3/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-10T20:04:46.737

您不需要像上述状态那样的任何解决方法。这不起作用的原因是您创建布局的方式。当您插入“jau”时，您将删除包含它的 800px div。这样做的效果是，当您仅用文本替换它时，该 div 不再存在，并且它重置了高度容器。这会导致滚动条消失，从而调用该`'scroll'`方法。

您需要：

换行`jau`，`<div> jau </div>`或：

```
$('#scrollWrapper').unbind('scroll');
$('#scrollWrapper').html('jau', function(){
  //rebind the scroll in the callback.
  $('#scrollWrapper').on('scroll', function(){
    alert("we have scrolled");
  });
}); 
```

# eclipse - 启动 apache 服务器时出现 Http 404 错误

> ID：10971587
> 
> 赞同：0
> 
> 时间：2012-06-10T19:15:07.517
> 
> 标签：eclipse, apache, tomcat

我在 Eclipse 中运行服务器 Apache Tomcat - 在新计算机上安装 Eclipse 和 Tomcat 之后 - 没有任何问题：INFO：服务器在 575 毫秒内启动。但是当我键入“http://localhost:8080/”时，我没有得到 Apache Tomcat 主页，而是得到以下错误消息：Tomcat 中的 HTTP 状态 404 错误，请求的资源不可用。什么问题？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-10T21:53:21.000

Tomcat 已经在运行。但它无法找到 Apache 主页的资源。当您从 eclipse 运行服务器时，eclipse 不会复制 tomcat“ROOT”文件夹（欢迎/索引页面所在的位置），因此您需要从 `{tomcat directory}\webapps`.Copy 手动复制“ROOT”文件夹，然后转到您的Eclipse 工作区，转到`.metadata`文件夹，然后搜索“wtpwebapps”。您应该找到类似的东西`your-eclipse-workspace\.metadata\.plugins\org.eclipse.wst.server.core\tmp0\wtpwebapps`（或者 .../tmp1/wtpwebapps，如果您已经在 Eclipse 中注册了另一台服务器）。转到 wtpwebapps 文件夹，粘贴/合并 ROOT。然后重新加载`"http://localhost:8080/"`以查看 Tomcat 欢迎页面。

# vb.net - 在 Visual Studio (Windows Mobile) 中使用 My.Resources

> ID：10971589
> 
> 赞同：0
> 
> 时间：2012-06-10T19:15:34.777
> 
> 标签：vb.net, visual-studio-2010, windows-mobile

嗨，伙计们希望有人能在我拔掉所有头发之前帮助我！！

在 VB (Visual Studio 2010) 中，我编写了一个简单的硬币翻转例程，并使用下面的代码根据随机数 0 或 1 显示硬币的图像

> coin = Rnd(1) '随机头部或尾部 head=1 tail = 0 '显示硬币的相关图像 If coin = 0 Then ImageCoin.Image = My.Resources.tail Else ImageCoin.Image = My.Resources.head End If

现在我正在尝试使用 windows mobile SDK 复制相同的功能，但似乎无法访问 My.Resources。我在项目 head.jpg 和 tail.png 的资源文件夹中确实有两个资源我使用生成了一个随机数

> 硬币 = rnd.Next(0, 2)

但似乎找不到显示适当图像的方法。My.Resources 在 Windows Mobile SDK 中不可用还是有不同的方法。

任何帮助都非常感谢谢谢达米安

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-11T15:27:16.020

这是针对 C# 的：

```
Image heads = Namespace.Properties.Resources.head;
Image tails = Namespace.Properties.Resources.tail; 
```

`Namespace`，当然，被替换为您项目的命名空间。

# c# - 多表单任务

> ID：10971592
> 
> 赞同：-2
> 
> 时间：2012-06-10T19:15:44.573
> 
> 标签：c#, winforms

```
dsUni = new DataSet();
dsUni.ReadXml(pathDesc);
frm02.dgv02.DataSource = dsUni.Tables[0];
frm02.ShowDialog(); // this all works well
dsUni.WriteXml(pathDesc);  // this is in the frm02ClosingEvent 
```

错误：当前上下文中不存在名称 dsUni 和 pathDesc
我应该写什么和在哪里 - 访问从 frm01 到 frm02 的所有控件和所有变量（现在和将来，没有任何限制），反之亦然？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-10T19:20:24.840

你可以`var`在 dsUni 前面写，这样你就有了声明。pathDesc 可能应该包含一个 XML 文件的路径，所以它必须在其他地方声明。有关变量范围的介绍，请参阅[http://www.blackwasp.co.uk/CSharpVariableScopes.aspx](http://www.blackwasp.co.uk/CSharpVariableScopes.aspx)或[http://www.codecandle.com/Articles/191/Csharp/Variables/Variable-scope/codedetail.aspx](http://www.codecandle.com/Articles/191/Csharp/Variables/Variable-scope/codedetail.aspx)

# sql-server - 非叶级节点的自定义聚合以避免重复计算

> ID：10971593
> 
> 赞同：0
> 
> 时间：2012-06-10T19:15:47.390
> 
> 标签：sql-server, sql-server-2008, ssas, mdx, ssas-2008

我有一个包含以下行的事实表：

**WorkerName、OrderId、NumberOfPackagesPerOrder**

请注意，在此事实表中， **WorkerName**和**OrderId都不是唯一的。**多个用户可以在单个 OrderId 上工作 另请注意，**NumberOfPackagesPerOrder**仅取决于**OrderId**，即对于每个**OrderId**，**NumberOfPackagesPerOrder**的数量将是相同的。

我正在尝试构建一个多维数据集，以按员工层次结构从这些数据中报告层次结构报告：

```
ManagerLevel1 [完成的订单总数] [运送的包裹总数]
    经理级2
      ......
        经理级别N
                  工人

```

由于多个工作人员可以处理同一个订单，因此我需要避免对经理级别（非叶节点）重复计算 **PackagesPerOrder**。

管理器层次结构是递归定义的，即它不是静态的。

经理也可以运送包裹。

这个怎么做？我需要什么 MDX 脚本才能正确地对 NumberOfPackagesPerOrder 进行求和，仅在通过 OrderId 对这些进行 DISTINC 之后才对它们进行求和？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-11T17:29:31.080

最简单的方法是完全不使用 MDX 脚本，而是实现多对多关系。根据您的描述，我无法完整描述必要的内容，但我模拟了一个示例并获得了正确的值。正如您所描述的那样，我有一个工作人员维度，它与经理建立了层次关系 - 使用父子结构。我有一个包含工人、订单 ID 和包裹数量的事实表。在最后一种情况下，包的数量并不是真正需要的——它应该被忽略。我添加了第二个事实表，以便为订单 ID 和包裹数量提供不同的值。

然后在 SSAS 项目中，我有两个维度 - 一个用于工人，一个用于订单 ID。

然后我创建一个包含两个度量组的多维数据集——每个事实表一个。具有工人和订单 ID 的可以使用包裹数或行数 - 没关系，但需要隐藏度量。它只是用作多对多的中间事实表。

然后，具有不同订单 ID 和包数的事实表是第二个度量值组。您可以添加订单计数并将包裹数用作此度量组中的两个单独度量。

在维度使用选项卡上，Worker 和 Order ID 与中间事实表（该事实表中的 worker 和 order ID 列）有关系。订单 ID 还与带有订单 ID 和包裹数量的事实表有规律的关系。Worker 使用另一个事实表作为中间度量值组，与该事实表（具有唯一订单 ID 的表）具有多对多关系。

当您以这种方式进行设置时，您的订单计数和包裹数量将由工作人员和经理在层次结构的所有级别正确汇总。不需要 MDX。

# ruby-on-rails - RubyMine - 使用 Rails 运行单个测试使用了不正确的参数

> ID：10971594
> 
> 赞同：0
> 
> 时间：2012-06-10T19:16:03.507
> 
> 标签：ruby-on-rails, ruby, rubymine, minitest

我爱上了 Rubymine，但出于某种原因，运行单个测试将始终运行该类的整个测试套件。当我看到控制台输出时，我是这样的：

```
/home/steve/.rvm/rubies/ruby-1.9.2-p136/bin/ruby -e $stdout.sync=true;$stderr.sync=true;load($0=ARGV.shift) -Itest /home/steve/Websites/myapp/test/integration/my_flow_test.rb --name=test_should_run_my_custom_test 
```

我正在使用 Rails 3.1.0，我的所有测试都是 ActiveSupport::TestCase 或 Rails 默认支持的其他测试类之一，我的 Gemfile 中没有额外的 gem。据我所知，Rails 默认使用 MiniTest。这是我看到的问题：

```
-Itest /home/steve/Websites/myapp/test/integration/my_flow_test.rb
  --name=test_should_run_my_custom_test 
```

当我遵循 Rails 测试指南时，它说调用单个测试的语法应该是这样的：

```
-Itest /home/steve/Websites/quest_start/myapp/integration/my_flow_test.rb
  -n test_should_run_my_custom_test 
```

所以使用**-n method_name**而不是**--name=method_name**

在常规控制台中运行后一个命令可以按预期工作。这似乎是 RubyMine 内部的东西，有没有办法改变这个设置，或者 Rails 默认测试框架目前不完全支持？

# mysql - MySQL 在哪里

> ID：10971596
> 
> 赞同：5
> 
> 时间：2012-06-10T19:16:26.893
> 
> 标签：mysql

我的数据库中有五个表，用户、工作、资格、job_qualifications 和 users_qualification

我需要选择所有有资格执行特定工作的员工。如果有诸如 ALL IN 之类的语句会很有用，例如查询将是

```
SELECT user_id
FROM users_qualification
WHERE qualification_id ALL IN 
    (
        SELECT qualification_id 
        FROM job_qualifications 
        WHERE jobs_id = 1
    ) 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-10T19:27:13.687

如果您知道该工作所需的资格数量，则可以编写以下查询：

```
SELECT uq.user_id
FROM users_qualification uq JOIN job_qualifications jq
    ON uq.qualification_id = jq.qualification_id
WHERE jq.jobs_id = 1
GROUP BY uq.user_id
HAVING COUNT(*) = {# of qualifications} 
```

要查找资格数，请运行：

```
SELECT COUNT(*)
FROM job_qualifications
WHERE jq.jobs_id = 1 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-10T19:31:32.447

扩展 Scrum Meister 的答案，您可以执行以下操作：

```
SELECT
    distinct uq.user_id
FROM
    users_qualification uq
    JOIN job_qualifications jq ON uq.qualification_id = jq.qualification_id
WHERE
    jq.jobs_id = 1
GROUP
    BY uq.user_id
HAVING
    COUNT(*) = (SELECT COUNT(*) FROM job_qualifications jq2 WHERE jq2.job_id = jq.job_id) 
```

# mysql - 使用 putty 将 sql.gz 文件导入并插入数据库

> ID：10971597
> 
> 赞同：69
> 
> 时间：2012-06-10T19:16:29.427
> 
> 标签：mysql, import, gzip, putty

我想`sql.gz`使用 SSH 将文件插入到我的数据库中。我应该怎么办？

例如，我有一个来自电话号码的数据库，名称是`numbers.sql.gz`，这种文件是什么类型的文件，如何将这个文件导入我的数据库？

* * *

## 回答 #1

> 赞同：128
> 
> 时间：2012-08-16T12:54:36.047

使用像 putty 这样的 shell 程序登录到您的服务器。

在命令行中输入以下命令

```
zcat DB_File_Name.sql.gz | mysql -u username -p Target_DB_Name 
```

在哪里

`DB_File_Name.sql.gz`= 要导入的 sql.gz 文件的完整路径

`username`=你的mysql用户名

`Target_DB_Name`=要导入数据库的数据库名称

当你在命令行中按回车时，它会提示输入密码。输入您的 MySQL 密码。

你完成了！

* * *

## 回答 #2

> 赞同：58
> 
> 时间：2012-06-10T19:53:48.903

该文件是一个 gzip 压缩（压缩）的 SQL 文件，几乎可以肯定是一个以 .sql 作为扩展名的纯文本文件。您需要做的第一件事是通过 scp 将文件复制到数据库服务器。[我认为 PuTTY 是 pscp.exe](http://www.chiark.greenend.org.uk/~sgtatham/putty/download.html)

```
# Copy it to the server via pscp
C:\> pscp.exe numbers.sql.gz user@serverhostname:/home/user 
```

然后通过 SSH 连接到您的服务器并使用`gunzip`

```
user@serverhostname$  gunzip numbers.sql.gz
user@serverhostname$  ls 

numbers.sql 
```

`<`最后，使用输入重定向运算符将其导入您的 MySQL 数据库：

```
user@serverhostname$  mysql -u mysqluser -p < numbers.sql 
```

如果 numbers.sql 文件没有创建数据库但希望已经存在一个数据库，则您还需要在命令中包含该数据库：

```
user@serverhostname$  mysql -u mysqluser -p databasename < numbers.sql 
```

如果您能够从外部直接连接到 MySQL 服务器，那么您可以使用本地 MySQL 客户端，而不必复制和 SSH。在这种情况下，您只需要一个可以在 Windows 上解压缩 .gz 文件的实用程序。我相信 7zip 会这样做，或者您可以获得适用于 Windows的[gzip/gunzip 二进制文件。](http://www.gzip.org/)

* * *

## 回答 #3

> 赞同：54
> 
> 时间：2012-06-10T19:57:43.990

没有单独的步骤来提取存档：

```
# import gzipped-mysql dump
gunzip < DUMP_FILE.sql.gz | mysql --user=DB_USER --password DB_NAME 
```

我使用上面的代码片段重新导入 mysqldump-backups，并使用下面的代码来备份它。

```
# mysqldump and gzip (-9 ≃ highest compression)
mysqldump --user=DB_USER --password DB_NAME | gzip -9 > DUMP_FILE.sql.gz 
```

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2012-06-10T20:46:08.353

对于 oneliner，在 linux 或 cygwin 上，您需要在主机上进行公钥认证，否则 ssh 将要求输入密码。

```
 gunzip -c numbers.sql.gz | ssh user@host mysql --user=user_name --password=your_password db_name 
```

或者使用“本地”连接进行端口转发并连接到远程 mysql：

```
ssh -L some_port:host:local_mysql_port user@host
```

然后在本地机器上连接 mysql 到**localhost:some_port**。

端口转发也可以在**putty**中使用，使用类似的 -L 选项，或者您可以从树上某处的设置面板中对其进行配置。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2016-02-18T02:11:00.220

如果你有 scp 那么：

要将文件从本地移动到远程：

```
$scp /home/user/file.gz user@ipaddress:path/to/file.gz 
```

要将文件从远程移动到本地：

```
$scp user@ipaddress:path/to/file.gz /home/user/file.gz 
```

要在不登录远程系统的情况下导出 mysql 文件：

```
$mysqldump -h ipaddressofremotehost -Pportnumber -u usernameofmysql -p  databasename | gzip -9 > databasename.sql.gz 
```

要在不登录远程系统的情况下导入 mysql 文件：

```
$gunzip < databasename.sql.gz | mysql -h ipaddressofremotehost -Pportnumber -u usernameofmysql -p 
```

注意：确保您可以通过网络访问远程主机的 ipaddress

检查网络访问：

```
$ping ipaddressofremotehost 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2015-02-19T13:48:33.083

如果你有很多数据库，它会导入并且转储很大（我经常使用多千兆字节的 Gzipped 转储）。

这里有一种方法可以在 mysql 中执行此操作。

```
$ mkdir databases
$ cd databases
$ scp user@orgin:*.sql.gz .  # Here you would just use putty to copy into this dir.
$ mkfifo src
$ mysql -u root -p
Enter password:
Welcome to the MySQL monitor.  Commands end with ; or \g.
Your MySQL connection id is 1
Server version: 5.5.41-0
Copyright (c) 2000, 2014, Oracle and/or its affiliates. All rights reserved.
Oracle is a registered trademark of Oracle Corporation and/or its
affiliates. Other names may be trademarks of their respective
owners.Type 'help;' or '\h' for help. Type '\c' to clear the current input statement.

mysql> create database db1;
mysql> \! ( zcat  db1.sql.gz > src & )
mysql> source src
.
.
mysql> create database db2;
mysql> \! ( zcat  db2.sql.gz > src & )
mysql> source src 
```

这是唯一的优势

```
zcat db1.sql.gz | mysql -u root -p 
```

是您无需多次输入密码即可轻松完成多项操作。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2018-01-22T07:17:14.057

如果 mysql 转储是 .gz 文件，您需要通过键入 $ gunzip mysqldump.sql.gz 来解压缩文件

这将解压缩 .gz 文件，并将 mysqldump.sql 存储在同一位置。

输入以下命令导入sql数据文件：

$ mysql -u 用户名 -p -h localhost 测试数据库 < mysqldump.sql 密码：_

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2019-01-02T22:48:26.157

在当前服务器上创建转储文件 SQL.gz

```
$ sudo apt-get install pigz pv

$ pv | mysqldump --user=<yourdbuser> --password=<yourdbpassword> <currentexistingdbname> --single-transaction --routines --triggers --events --quick --opt -Q --flush-logs --allow-keywords --hex-blob --order-by-primary --skip-comments --skip-disable-keys --skip-add-locks --extended-insert --log-error=/var/log/mysql/<dbname>_backup.log | pigz > /path/to/folder/<dbname>_`date +\%Y\%m\%d_\%H\%M`.sql.gz 
```

可选：连接的命令参数

```
--host=127.0.0.1 / localhost / IP Address of the Dump Server
--port=3306 
```

将上面创建的转储文件导入到不同的服务器

```
$ sudo apt-get install pigz pv

$ zcat /path/to/folder/<dbname>_`date +\%Y\%m\%d_\%H\%M`.sql.gz | pv | mysql --user=<yourdbuser> --password=<yourdbpassword> --database=<yournewdatabasename> --compress --reconnect --unbuffered --net_buffer_length=1048576 --max_allowed_packet=1073741824 --connect_timeout=36000 --line-numbers --wait --init-command="SET GLOBAL net_buffer_length=1048576;SET GLOBAL max_allowed_packet=1073741824;SET FOREIGN_KEY_CHECKS=0;SET UNIQUE_CHECKS = 0;SET AUTOCOMMIT = 1;FLUSH NO_WRITE_TO_BINLOG QUERY CACHE, STATUS, SLOW LOGS, GENERAL LOGS, ERROR LOGS, ENGINE LOGS, BINARY LOGS, LOGS;" 
```

可选：连接的命令参数

```
--host=127.0.0.1 / localhost / IP Address of the Import Server
--port=3306 
```

mysql: [警告] 在命令行界面上使用密码可能不安全。1.0GiB 00:06:51 [8.05MiB/s] [<=>]

可选软件包有助于更快地导入数据库 SQL 文件

*   带有进度视图 (pv)
*   并行 gzip (pigz/unpigz) 到 gzip/gunzip 文件并行

用于更快地压缩输出

# java - 使用 mpj-express 读取控制台输入

> ID：10971598
> 
> 赞同：1
> 
> 时间：2012-06-10T19:16:35.583
> 
> 标签：java, mpj-express

我必须为并行计算课程做一个练习。我使用 MPJ Express 将任务分配给多个进程（在我的例子中是 5 个进程）。我解决了所有工作正常的子任务。现在我想实现一个简单的用户对话框，以便我的教授可以选择他想要运行的子任务，例如“如果你想运行作业 1，请输入'1'。我使用以下代码从控制台读取输入：

```
 InputStreamReader isr = new InputStreamReader(System.in);
                BufferedReader br = new BufferedReader(isr);
                System.out.println("Enter a number between 1 and 4");
                String s = br.readLine(); 
```

由于我必须使用 .bat 文件运行应用程序，该文件使用 5 个实例运行我的应用程序（每个进程一个实例），因此控制台输入不能“映射”到特定进程。所以我的应用程序在等待用户输入时一直挂起。

有没有人可以解决我如何克服这个问题？提前谢谢了！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-11T09:37:02.800

为什么不在 Scatter 操作上实现某种协议来分发用户的输入：例如，将收到的来自父进程的消息视为一对：（命令代码，命令数据）。在您的子进程中处理至少两个命令代码：

1.  用于处理用户输入：检查当前进程 ID 是否与用户请求的执行相同 - 如果是 - 执行操作；
2.  用于接收在应用程序启动时分发的数据。

# ruby-on-rails - 如果我将所有 db 列都放在 attr_accessible 中，我是否可以免受批量分配攻击？

> ID：10971600
> 
> 赞同：0
> 
> 时间：2012-06-10T19:16:40.637
> 
> 标签：ruby-on-rails, ruby-on-rails-3, mass-assignment, attr-accessible

我知道在 Rails 3.2 中，所有属性本质上都是“黑名单”，这迫使您通过`attr_accessible`.

但是，如果我将表`attr_accessible`中的每一列都设为，那我是否容易受到批量分配攻击？

如果不是，为什么不呢？

如果是这样，强制列入白名单有什么意义？

这是一个真正的问题，因为我的一个生产应用程序我被迫拥有这样的东西，只是为了让 Devise 工作：

```
attr_accessible :email, :password, :password_confirmation, :remember_me, :name, :confirmed_at, :confirmation_token 
```

想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-10T22:00:05.147

从某种意义上说，列出的列很容易受到攻击，如果您让用户通过批量分配更新这些记录，那么他们将能够更新这些列。请记住，如果您只是这样做，则不需要使字段可访问`user.foo = 'blah'`- 只涉及对 update_attributes、create an 等的调用。

更改默认值的目的是让您几乎不可能忘记这一点：因为您必须将必须考虑的属性列入白名单，以考虑是否可以访问这些字段。问问自己，如果他们可以更改允许更新的记录上的那些字段，那么攻击可以完成什么。

attr_accessible 模型在接缝处吱吱作响 - 不久前在 rails 博客上有一篇关于他们正在尝试的新控制器级别方法的帖子。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-10T19:53:15.427

在您的示例中，只有两个字段可用于利用身份验证过程，confirmed_at 和confirmation_token。但是在用户确认他的电子邮件之前，它们不能被用户更改，所以在你改变设计的默认行为之前没有问题。我也不明白为什么你必须让它们可以访问。

# jquery - 这是我的错还是带有淡入淡出和停止的 Jquery 错误？

> ID：10971601
> 
> 赞同：0
> 
> 时间：2012-06-10T19:16:42.773
> 
> 标签：jquery, hover, fadein, fadeout

我试图找出我是否做错了什么，或者我是否在 Jquery 中发现了一个错误！我有一个简单的下拉菜单，可以在悬停时淡入淡出。简单的东西。我使用 Stop() 来确保没有任何循环。问题是我注意到，如果我将鼠标悬停在菜单上，然后非常快速地滑开和滑开，它会在中途停止淡入淡出动画并暂停，所以我将有一个部分透明的框。有时它实际上在隐藏框之前就停止了，因此它是不可见的，但仍然存在（您可以看出，因为光标在框刚刚可见的任何地方仍然是指针）。

这是代码：http: [//jsfiddle.net/dillydadally/sjTwc/](http://jsfiddle.net/dillydadally/sjTwc/)。您必须快速悬停并重新打开才能触发错误。从顶部开始是最简单的。这可能需要你尝试几次。

有没有更好的方法来做到这一点，或者这只是 JQuery 处理事情的方式中的一个不幸的错误？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-10T19:23:48.377

利用`.stop(false, true)`

[http://api.jquery.com/stop/](http://api.jquery.com/stop/)

这将强制动画跳到最后。

# javascript - 在文本末尾移动一个 div

> ID：10971605
> 
> 赞同：0
> 
> 时间：2012-06-10T19:17:07.707
> 
> 标签：javascript, html, css

我有以下代码：

```
<li>This is 
  <div class="item1">item1</div>
  <div class="item3">item3</div>
  <div class="item2">item2</div>
a test</li>​ 
```

我想把 li 安排如下`<li>This is a test | div item1 | div item2 | div item3 </li>`

不使用javascript是否可以做到这一点？只有css吗？如果没有，您可以提供 javascript 中的示例吗？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-10T19:34:58.710

[http://jsfiddle.net/LceqM/](http://jsfiddle.net/LceqM/)

```
var li = document.getElementById("theli"),
    textNodes = [], first;

var elem = li.firstChild;

while( elem ) {
    if( elem.nodeType === 3 ) textNodes.push(elem);
    elem = elem.nextSibling;
}

if( textNodes.length ) {
    first = textNodes.shift();
    li.insertBefore( first, li.firstChild );

    while( textNodes.length ) {
        li.insertBefore( textNodes.pop(), first.nextSibling );   
    }
} 
```

​</p>

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-10T19:22:47.097

您可以使用以下 js 代码更改 html 标记的内部 Html：

```
document.getElementById("yourliid").innerHTML = "new value of html that you want" 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-10T19:23:55.783

将您的 HTML 设置为：

```
<li>This is a test
  <div class="item1">item1</div>
  <div class="item3">item3</div>
  <div class="item2">item2</div>
</li>​ 
```

然后申请

```
​li div {
    display: inline-block;
    padding: 0 1ex;
    border-left: 1px solid black;     
}​ 
```

* * *

选项二：在您的 HTML 周围添加一个包装器 div：

```
<li>This is
  <div class="container">
    <div class="item1">item1</div>
    <div class="item3">item3</div>
    <div class="item2">item2</div>
  </div>
  a test
</li>​ 
```

```
​li .container {
    float: right;
}​
​li .container div {
    float: left;
    margin-right: 5px;
}​ 
```

# ruby-on-rails-3 - Rails - 我在哪里存储配置值？

> ID：10971610
> 
> 赞同：4
> 
> 时间：2012-06-10T19:17:56.807
> 
> 标签：ruby-on-rails-3

在 Ruby on Rails 应用程序中存储配置值（键、密码或只是配置值）的最佳位置在哪里？我搜索了很多，没有找到我认为正确的答案。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-10T20:25:27.837

密码（用于应用程序）应由身份验证/授权 gem 处理，例如 Devise、Clearance、authLogic 等。

您希望通过对应用程序的给定请求的 ruby​​ 代码可用的变量可以存储在全局变量中。类级别的固定值可以存储在常量中。在 rails 作为控制器继承自 application_controller 时，您可以在那里定义类级常量。检查 Ruby 语言以了解这些变量类型的变量的确切继承规则。

实际上，最好的做法是根本不这样做或尽可能避免这样做，许多优秀的程序员会像避免瘟疫一样避免这种情况。这意味着您的代码块没有被封装——这些操作现在依赖于外部值，并且它通过使许多项目依赖于可能在其范围之外发生变化的一件事情来增加耦合。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-10T20:17:18.190

如果涉及密码，我建议您将数据存储在外部文件中，这样您就可以避免将敏感数据提交到您的存储库。然后您可以通过在初始化程序中读取文件来将数据加载到内存中，例如：

配置/my_secrets.yml：

```
development:
  password: abcdefgh
test:
  password: abcdefgh 
```

配置/初始化程序/load_my_config.rb：

```
MY_CONFIG = YAML.load_file("#{Rails.root.to_s}/config/my_secrets.yml")[Rails.env] 
```

现在您可以通过访问`password`在任何环境中访问您的`MY_CONFIG['password']`. 生产密码可以单独保存在服务器上（以及另一个安全位置）。

对于非敏感数据，我只需将数据直接放在初始化程序中。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-11T12:50:36.050

想必您已经阅读[了用于配置应用程序的 rails 指南](http://edgeguides.rubyonrails.org/configuring.html)？除此之外，如果需要，每个 gem 通常会在安装后生成器中提供一个初始化程序/配置文件，并将其记录在 README 中。

# linux - 运行并行make时出错

> ID：10971615
> 
> 赞同：4
> 
> 时间：2012-06-10T19:18:37.040
> 
> 标签：linux, compilation, makefile, gnu-make

考虑以下品牌：

```
all: a b

a:
        echo a
        exit 1

b:
        echo b start
        sleep 1
        echo b end 
```

在运行它时，`make -j2`我收到以下输出：

```
echo a
echo b start
a
exit 1
b start
sleep 1
make: *** [a] Error 1
make: *** Waiting for unfinished jobs....
echo b end
b end 
```

我们有一个相当大的 make 文件，很容易错过错误，因为在执行结束时没有错误消息。

有没有办法在 make 执行**结束**时也出现错误消息？

更新：

请参阅我可能的[解决方案](https://stackoverflow.com/questions/10999800/wrapping-gnu-makefile-with-another-makefile/11028784#11028784)如何从 make 中检查 make 退出状态。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-11T03:45:31.580

如果调用的任何程序`make`返回错误，则返回码`make`不会为零。因此，在调用后`make`您可以检查返回码以查看是否发生错误。在`bash`（以及许多其他 shell，如`zsh`）上，您可以执行以下操作：

```
# make
....
# echo $? 
```

如果一切正常，则回`0`显将打印，否则将打印其他内容。

您还可以从 shell 脚本中运行检查：

```
make
if [ $? -eq 0 ]; then
    echo "Everything OK"
else
    echo "Something went wrong!"
fi 
```

如果您需要确切的错误消息，最简单的方法是将输出重定向`make`到某个文件，`grep`如果执行失败则返回错误。

但是我通常这样做的方式是`make`并行运行并在出现问题时重新执行它，`-j1`这样我会得到一个干净的错误消息。我想这可以使用上述技术放入 shell 脚本中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-10T19:26:18.663

您所看到的是这两个任务的输出是独立的。因此，如果您正在并行运行 5 个任务，其中 3 个出现错误，那么它们很可能会被其他任务的输出所穿插。

最好的办法是一起运行一组串行任务，将它们的错误输出发送到一个文件中......并在退出时将其打印到屏幕上。

PS - 另外，除非绝对有错误，否则切勿在任务中使用 exit 1！

# javascript - Galleriffic 带有单个幻灯片容器的多个缩略图画廊

> ID：10971617
> 
> 赞同：0
> 
> 时间：2012-06-10T19:18:46.690
> 
> 标签：javascript, jquery, gallery, image-gallery

我设法将这个出色的示例应用于我的需求：

[http://code.google.com/p/galleriffic/issues/attachmentText?id=76&aid=-3045121742886940548&name=example-2.html&token=4nlvmgAfVpc5whcXC9UEqHZaSz0%3A1339257750721](http://code.google.com/p/galleriffic/issues/attachmentText?id=76&aid=-3045121742886940548&name=example-2.html&token=4nlvmgAfVpc5whcXC9UEqHZaSz0%3A1339257750721)

有一点小改动：两个画廊都将图像应用到同一个幻灯片容器，所以不是让“#thumbs0”缩略图更改“#slideshow0”中的图像，而“#thumbs1”缩略图更改“#slideshow1”中的图像，我让它们都设置为更改 "#slideshow" 中的图像。

这是因为我使用标签来分隔 2 种不同类别的缩略图，它们会在一个幻灯片容器中更改图像。

我通过将 imageContainerSel 设置为“#slideshow”而不是示例中的“#slideshow”+i 来做到这一点。

这是代码：

**HTML：**

```
<div id="tabs">
<div class="each-gallery">
    <div id="thumbs0" class="navigation">
        <ul>
            <li><a href="#tabs-1">Tab 1</a></li>
            <li><a href="#tabs-2">Tab 2</a></li>
        </ul>

            <div id="tabs-1">
                <ul class="thumbs noscript">
                    <li>
                        <a class="thumb" href="images/1.jpg" title="Title #0">
                        <img src="images/thumbs/1.jpg" alt="Title #0" />
                            Title 1
                        </a>
                        <div class="caption">
                            <div class="image-title">Title 1</div>
                            <div class="image-desc">Description 1</div>
                        </div>
                    </li>
                    <li>
                        <a class="thumb" href="images/2.jpg" title="Title #0">
                            <img src="images/thumbs/2.jpg" alt="Title #0" />
                            Title 2
                        </a>
                        <div class="caption">
                            <div class="image-title">Title 2</div>
                            <div class="image-desc">Description 2</div>
                        </div>
                    </li>

                </ul>
            </div>

        </div>
</div>

            <div id="tabs-2">
                <div class="each-gallery">
                    <div id="thumbs1" class="navigation">

                <ul class="thumbs noscript">
                    <li>
                        <a class="thumb" href="images/3.jpg" title="Title #0">
                        <img src="images/thumbs/3.jpg" alt="Title #0" />
                            Title 3
                        </a>
                        <div class="caption">
                            <div class="image-title">Title 3</div>
                            <div class="image-desc">Description 3</div>
                        </div>
                    </li>
                    <li>
                        <a class="thumb" href="images/4.jpg" title="Title #0">
                            <img src="images/thumbs/4.jpg" alt="Title #0" />
                            Title 4
                        </a>
                        <div class="caption">
                            <div class="image-title">Title 4</div>
                            <div class="image-desc">Description 4</div>
                        </div>
                    </li>

                </ul>
                    </div>
                </div>
            </div> 
```

**Javascript：**

```
 <script type="text/javascript">
                    jQuery(document).ready(function($) {
                            // We only want these styles applied when javascript is enabled
                            // We only want these styles applied when javascript is enabled
                            $('div.navigation').css({'width' : '960px', 'float' : 'left'});
                            $('div.content').css('display', 'block');

                            $(".each-gallery").each(function(i){
                                    // Initially set opacity on thumbs and add
                                    // additional styling for hover effect on thumbs
                                    var onMouseOutOpacity = 0.67;
                                    $('#thumbs + i + ul.thumbs li').opacityrollover({
                                            mouseOutOpacity:   onMouseOutOpacity,
                                            mouseOverOpacity:  1.0,
                                            fadeSpeed:         'fast',
                                            exemptionSelector: '.selected'
                                    });

                                    // Initialize Advanced Galleriffic Gallery
                                    var gallery = $('#thumbs'+i).galleriffic({

                                            delay:                     2500,
                                            numThumbs:                 20,
                                            preloadAhead:              0,
                                            enableTopPager:            false,
                                            enableBottomPager:         false,
                                            maxPagesToShow:            7,
                                            imageContainerSel:         '#slideshow',
                                            controlsContainerSel:      '#controls',
                                            captionContainerSel:       '#caption',
                                            loadingContainerSel:       '#loading',
                                            renderSSControls:          true,
                                            renderNavControls:         true,
                                            playLinkText:              'Play Slideshow',
                                            pauseLinkText:             'Pause Slideshow',
                                            prevLinkText:              '&lsaquo; Previous Photo',
                                            nextLinkText:              'Next Photo &rsaquo;',
                                            nextPageLinkText:          'Next &rsaquo;',
                                            prevPageLinkText:          '&lsaquo; Prev',
                                            enableHistory:             false,
                                            autoStart:                 false,
                                            syncTransitions:           true,
                                            defaultTransitionDuration: 900,
                                            onSlideChange:             function(prevIndex, nextIndex) {
                                                    // 'this' refers to the gallery, which is an extension of $('#thumbs')
                                                    this.find('ul.thumbs').children()
                                                            .eq(prevIndex).fadeTo('fast', onMouseOutOpacity).end()
                                                            .eq(nextIndex).fadeTo('fast', 1.0);
                                            },
                                            onPageTransitionOut:       function(callback) {
                                                    this.fadeTo('fast', 0.0, callback);
                                            },
                                            onPageTransitionIn:        function() {
                                                    this.fadeTo('fast', 1.0);
                                            }
                                    });
                            });

                    });
            </script> 
```

**问题：**

在页面加载时，两个画廊同时将它们的第一张图片加载到#slideshow，因此在初始页面加载时，图片出现两次，一个在另一个下方。只有在单击不同的缩略图后，第二个图像才会消失，并且一切都按预期工作。

我如何解决它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-15T13:34:12.413

我设法自己解决了这个问题。

如果有人有兴趣，这里是解决方案：

我给第一个画廊的第一个拇指起了一个独特的名字：

```
<a class="thumb" name="first" href="images/1.jpg" title="Title #0"> 
```

并修改 jquery.galleriffic.js：

```
 var buuga = this.data[nextIndex].hash;
            if(buuga !== 'first') {
                            var newSlide = this.$imageContainer
                .append('<span class="image-wrapper current"><a class="advance-link" rel="history" href="#'+this.data[nextIndex].hash+'" title="'+imageData.title+'">&nbsp;</a></span>')
                .find('span.current').css('opacity', '0');
            } 
```

我更改的是添加“buuga”变量来存储名称，并将为图像构建新隐藏跨度的部分包装在“if”条件中，如果名称为“first”，则该条件不会运行。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-22T20:08:17.530

就我而言，这样做只会隐藏*第一张*图片。我将使用可变数量的画廊/文件夹，因此在 3 个画廊的情况下，将显示其他 2 个图像。

现在，当我将其更改为：

```
var buuga = this.data[nextIndex].hash; 
```

至：

```
var buuga = this.data[imageData.index].hash; 
```

它在页面加载时完美运行。除了第一个图像是单击缩略图时显示的唯一图像。最终发生的是，galleriffic 试图将三个图像附加到第一个跨度。

我最终做的是添加两个全局变量：一个计数和一个文件夹总数。

```
firstImageCount = 0;  
totalFolderCount = 3; // this number is generated with php 
```

以及我最终对 jquery.galleriffic.js 所做的事情：

```
// Construct new hidden span for the image
var firstHash = this.data[nextIndex].hash; // I changed buuga to this more descriptive name
if(firstImageCount >= totalFolderCount-1){  
    var newSlide = this.$imageContainer  
       .append('<span class="image-wrapper current"><a class="advance-link" rel="history" href="#'+this.data[nextIndex].hash+'" title="'+imageData.title+'">&nbsp;</a></span>')  
       .find('span.current').css('opacity', '0');  
}  
firstImageCount++; 
```

然后我让它首先显示系列中的最后一个文件夹，因为那是加载的图像。

# wpf - 在 WPF 的 TextBlock 中使用 StringFormat 格式化日期

> ID：10971620
> 
> 赞同：0
> 
> 时间：2012-06-10T19:19:10.853
> 
> 标签：wpf, textblock, string-formatting

由于某种原因，我已将日期存储在数据库中而没有削减。这意味着我有一个像 20110602 这样的日期字段。

由于我想检索此日期并将其显示在文本块中，因此我需要一种格式来将此日期显示为带有斜线的普通日期。

我怎样才能以这种方式使用 StringFormat ？...有谁知道我应该使用什么格式将“20110602”转换为 2011/06/02 ？

```
<TextBlock  Text="{Binding CreatedDate, StringFormat=?????" 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-10T19:33:45.130

如果您更喜欢实现转换器的路线：

```
class dateTimeConverter : IValueConverter
{
    public object Convert(object value, Type targetType, object parameter, System.Globalization.CultureInfo culture)
    {
        string dateString = (string)value;
        return DateTime.ParseExact(dateString, "yyyyMMdd", System.Globalization.CultureInfo.InvariantCulture);
    }

    public object ConvertBack(object value, Type targetType, object parameter, System.Globalization.CultureInfo culture)
    {
        throw new NotImplementedException();
    }
} 
```

然后在你的 xaml

```
<TextBlock Text="{Binding Path=<path>, Converter={StaticResource <dateTimeConverterKey>}, StringFormat=\{0:yyyy/MM/dd\}}"/> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-10T19:24:41.383

尝试 DateTime.ParseExact 方法：

```
 dateString = "Sun 15 Jun 2008 8:30 AM -06:00";
  format = "ddd dd MMM yyyy h:mm tt zzz";
  try {
     result = DateTime.ParseExact(dateString, format, provider);
     Console.WriteLine("{0} converts to {1}.", dateString, result.ToString());
  }
  catch (FormatException) {
     Console.WriteLine("{0} is not in the correct format.", dateString);
  } 
```

在你的情况下，我认为格式应该是：

```
 format = "yyyyMMdd"; 
```

欲了解更多信息：http: [//msdn.microsoft.com/en-us/library/w2sa9yss.aspx](http://msdn.microsoft.com/en-us/library/w2sa9yss.aspx)

# google-app-engine - 解析 yaml 文件时出错：此处不允许映射值

> ID：10971621
> 
> 赞同：117
> 
> 时间：2012-06-10T19:19:23.350
> 
> 标签：google-app-engine, yaml

我想将应用上传到 Google App Engine：

我明白了

```
Error parsing yaml file:
mapping values are not allowed here
  in "/home/antonio/Desktop/ATI/climate-change/app.yaml", line 2, column 8 
```

跑步时

```
./appcfg.py update /home/antonio/Desktop/ATI/climate-change 
```

使用此 app.yaml 文件：

```
application:climate-change
version: 1
runtime: python27
api_version: 1
threadsafe: true

handlers:
- url: /.*
  script: helloworld.app 
```

第 2 行，第 8 列对应于版本行。这里有什么问题？顺便说一句，我在这里使用的是 Ubuntu 12.04。

* * *

## 回答 #1

> 赞同：138
> 
> 时间：2012-06-10T19:41:37.090

改变

```
application:climate-change 
```

到

```
application: climate-change 
```

如果你想要一个键值对，冒号后面的空格在 yaml 中是强制性的。（见[http://www.yaml.org/spec/1.2/spec.html#id2759963](http://www.yaml.org/spec/1.2/spec.html#id2759963)）

* * *

## 回答 #2

> 赞同：76
> 
> 时间：2016-12-20T07:21:41.587

另一个原因是错误的缩进，这意味着试图创建错误的对象。我刚刚在 Kubernetes Ingress 定义中修复了一个：

**错误的**

```
- path: / 
    backend: 
      serviceName: <service_name> 
      servicePort: <port> 
```

**正确的**

```
- path: /
  backend:
    serviceName: <service_name>
    servicePort: <port> 
```

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2014-09-15T12:01:38.850

或者，如果间距不是问题，它可能需要父目录名而不是文件名。

不是`$ dev_appserver helloapp.py`
但是`$ dev_appserver hello/`

例如：

```
Johns-Mac:hello john$ dev_appserver.py helloworld.py
Traceback (most recent call last):
  File "/usr/local/bin/dev_appserver.py", line 82, in <module>
    _run_file(__file__, globals())
...
  File "/Applications/GoogleAppEngineLauncher.app/Contents/Resources/GoogleAppEngine-default.bundle/Contents/Resources/google_appengine/google/appengine/api/yaml_listener.py", line 212, in _GenerateEventParameters
    raise yaml_errors.EventListenerYAMLError(e)
google.appengine.api.yaml_errors.EventListenerYAMLError: mapping values are not allowed here
  in "helloworld.py", line 3, column 39 
```

相对

```
Johns-Mac:hello john$ cd ..
Johns-Mac:fbm john$ dev_appserver.py hello/
INFO     2014-09-15 11:44:27,828 api_server.py:171] Starting API server at: http://localhost:61049
INFO     2014-09-15 11:44:27,831 dispatcher.py:183] Starting module "default" running at: http://localhost:8080 
```

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2020-04-01T18:58:07.547

不正确：

```
people:
  empId: 123
  empName: John
    empDept: IT 
```

正确的：

```
people:
  emp:
    id: 123
    name: John
    dept: IT 
```

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2016-08-06T19:49:19.787

也许这会对其他人有所帮助，但是当映射的 RHS 包含冒号而没有括起来引号时，我已经看到了此错误，例如：

someKey：另一个关键：今天要做的改变：锻炼更多

应该

someKey：另一个关键：“今天要做出的改变：锻炼更多”

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2019-10-09T08:12:16.997

我在乔的回答中提到的类似情况下看到了这个错误：

```
description: Too high 5xx responses rate: {{ .Value }} > 0.05 
```

我们在描述值中有一个冒号。因此，问题在于描述值周围缺少引号。可以通过添加引号来解决：

```
description: 'Too high 5xx responses rate: {{ .Value }} > 0.05' 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2020-01-28T22:57:41.087

我的问题是缺少一组引号；

```
Foo: bar 'baz' 
```

应该

```
Foo: "bar 'baz'" 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2021-03-13T13:33:34.413

正如大多数人所提到的，yaml 文件中有几个问题，yaml 文件通常很难识别问题，

幸运的是，它可以使用[yaml lint](https://www.npmjs.com/package/yaml-lint)等工具轻松识别，并且您可能不需要社区的帮助。

安装它

```
npm install -g yaml-lint 
```

这是您可以验证的方法

```
E:\githubRepos\prometheus-sql-exporter-usage>yamllint docker-compose.yaml
√ YAML Lint successful. 
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2022-01-28T02:31:20.600

# symfony - 学说：数据库：创建引发错误未定义索引：dbname

> ID：10971623
> 
> 赞同：0
> 
> 时间：2012-06-10T19:19:41.030
> 
> 标签：symfony

这是我的问题

我正在使用 Symfony2，我已经生成了一个实体，现在我正在尝试创建数据库，但是命令“php app/console dictionary:database:create”给了我这个错误：

[ErrorException] 注意：未定义索引：C:\wamp\www\sym\vendor\symfony\src\Symfony\ Bundle\DoctrineBundle\Command\CreateDatabaseDoctrineCommand.php 第 52 行中的 dbname

我在网上查过，但找不到任何答案，请帮忙。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-10T20:39:52.690

您是否正确设置了 app/config/parameters.ini 文件？它应该考虑到这一点：

```
;app/config/parameters.ini
[parameters]
    database_driver   = mysql
    database_host     = localhost
    database_name     = your_dbname
    database_user     = root
    database_password = password
    database_charset  = UTF8 
```

# javascript - 自定义工具提示的基本思想，使用纯 Javascript

> ID：10971637
> 
> 赞同：7
> 
> 时间：2012-06-10T19:21:20.973
> 
> 标签：javascript, tooltip

`Javascript`我需要使用纯代码创建自定义工具提示的基本概念；

*我想要的是 ：*

**例如 ：**

```
<a href="#" onmousemover="tooltip('text')">Link Text</a> 
```

我`onmouseover`想显示一个`fixed position`基于`<a>`元素的自定义工具提示，从元素`position`开始`right:0`或从`left:0`元素开始`<a>`；

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2016-01-16T11:13:47.347

我对这个问题有一个好主意。

**HTML**

```
<a href="https://www.google.com" tooltip="Go to Google">Google</a> 
```

**JavaScript**

```
(function () {

var a = document.getElementsByTagName('*'),
    tip, text,
    base = document.createElement('tooltip'); //Defining all objects

for (var x=0;x < a.length;x++) { //I'm using "for" loop to get all "a" elements with attribute "tooltip".
     a[x].onmouseover = function () {
         text = this.getAttribute('tooltip');
         tip = document.createTextNode(text);
         if (text != null) {// Checking if tooltip is empty or not.
               base.innerHTML = '';
               base.appendChild(tip);
               if (document.getElementsByTagName('tooltip')[0]){// Checking for any "tooltip" element
                   document.getElementsByTagName('tooltip')[0].remove();// Removing old tooltip
               }
               base.style.top = (event.pageY + 20) + 'px';
               base.style.left = (event.pageX + 20) + 'px';
               document.body.appendChild(base);
         }

     };
     a[x].onmouseout = function () {
         document.getElementsByTagName('tooltip')[0].remove();// Remove last tooltip
     };
}

})(); 
```

通过将此脚本包含到您的页面中，您只需`tooltip="Text"`在任何 HTML 元素中使用

**CSS**

```
tooltip {
    position: fixed;
    background: #fff;
    color: #333;
    border: 2px solid #333;
    font-size: 15px;
} 
```

您可以根据需要编辑 CSS！

这是我的[JSFiddle](https://jsfiddle.net/Naman00/uc4mjbze/)

希望这会帮助你。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2016-01-28T23:11:16.333

当用户搜索时出现这个问题`custom tooltip`，我想添加引导程序的 JS 工具提示，尽管您提到了*纯 javascript*。所以从某种意义上说，这个答案只是为了给未来的读者另一个不错的选择。

在[这里](http://www.w3schools.com/bootstrap/bootstrap_tooltip.asp)查看如何使用引导工具提示插件。[在这里](http://www.w3schools.com/bootstrap/bootstrap_ref_js_tooltip.asp)了解使用 Bootstrap 的 JS 工具提示时可用的选项和方法。

我仍然在`tryit`他们的网站上给出：

```
$(document).ready(function() {
  $('[data-toggle="tooltip"]').tooltip();
});
```

```
/* Tooltip */

.test+.tooltip>.tooltip-inner {
  background-color: #73AD21;
  color: #FFFFFF;
  border: 1px solid green;
  padding: 15px;
  font-size: 20px;
}

/* Tooltip on top */

.test+.tooltip.top>.tooltip-arrow {
  border-top: 5px solid green;
}

/* Tooltip on bottom */

.test+.tooltip.bottom>.tooltip-arrow {
  border-bottom: 5px solid blue;
}

/* Tooltip on left */

.test+.tooltip.left>.tooltip-arrow {
  border-left: 5px solid red;
}

/* Tooltip on right */

.test+.tooltip.right>.tooltip-arrow {
  border-right: 5px solid black;
}
```

```
<!DOCTYPE html>
<html lang="en">

<head>
  <title>Bootstrap Example</title>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <link rel="stylesheet" href="http://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/css/bootstrap.min.css">
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.12.0/jquery.min.js"></script>
  <script src="http://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/js/bootstrap.min.js"></script>
</head>

<body>

  <div class="container">
    <h3>Tooltip CSS Example</h3>
    <ul class="list-inline">
      <li><a class="test" href="#" data-toggle="tooltip" data-placement="top" title="Hooray!">Top</a></li>
      <li><a class="test" href="#" data-toggle="tooltip" data-placement="bottom" title="Hooray!">Bottom</a></li>
      <li><a class="test" href="#" data-toggle="tooltip" data-placement="left" title="Hooray!">Left</a></li>
      <li><a class="test" href="#" data-toggle="tooltip" data-placement="right" title="Hooray!">Right</a></li>
    </ul>
  </div>
</body>

</html>
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-02T13:28:59.960

你需要一个像这样的函数：

```
function tooltip(text, element) {

    var offsetDistance = 20;

    tt = document.getElementById('ttdiv');
    elem = document.getElementById(element.id);
    tt.style.top = elem.offsetTop + offsetDistance + 'px';
    tt.style.left = elem.offsetLeft + offsetDistance + 'px';
    tt.style.display = 'block';
    tt.innerHTML = text;
} 
```

`ttdiv`工具提示 div 的 id在哪里，最初设置为`display:none`. 您需要一个随附的功能来在触发`hide()`时隐藏工具提示。`onmouseout`

这是一个有效的[JSFiddle](http://jsfiddle.net/SiCurious/vKw9S/1/)。

# objective-c - UIWebView 到 UIImage 无效上下文 0x0

> ID：10971638
> 
> 赞同：0
> 
> 时间：2012-06-10T19:21:33.787
> 
> 标签：objective-c, ios, uiwebview, drawrect

我正在尝试做一个简单的任务；将 UIWebView 的内容转换为 UIImage 并将其保存到手机的文档目录中，但是每次运行以下代码时，我都会收到一堆类似的错误：

```
 UIGraphicsBeginImageContext(rect.size);
    [self.webView.layer renderInContext:UIGraphicsGetCurrentContext()];
    UIImage *viewImage = UIGraphicsGetImageFromCurrentImageContext();
    UIGraphicsEndImageContext(); 
```

创建以下错误：

```
Jun 10 20:06:18 <Error>: CGContextSaveGState: invalid context 0x0
Jun 10 20:06:18 <Error>: CGContextSetAlpha: invalid context 0x0
Jun 10 20:06:18 <Error>: CGContextSaveGState: invalid context 0x0
Jun 10 20:06:18 <Error>: CGContextSetFillColorWithColor: invalid context 0x0
Jun 10 20:06:18 <Error>: CGContextAddRect: invalid context 0x0
Jun 10 20:06:18 <Error>: CGContextDrawPath: invalid context 0x0 
```

我做了一些研究，发现这是由于上面的代码不在 -(void)drawRect:(CGRect)rect 方法中，但是，在 UIWebView 初始化后如何调用它，或者我不调用它手动？

这是我用来创建 HTML 并将其加载到 WebView 中的代码：

```
-(void)saveHTMLDocument {

    NSMutableString *htmlDocumentToSave = [[NSMutableString alloc] initWithString:@"<html><body>"];
    [htmlDocumentToSave appendString:@"<table border=""1""><tr><th>Snag Number</th><th>Snag Photo</th><th>Snag Description</th><th>Date Taken</th>"];

    for (int i = 0; i < self.fetchedResultsController.fetchedObjects.count; i++) {

    NSData *imageData = [NSData dataWithData:UIImagePNGRepresentation([self.photoArray objectAtIndex:i])];
    NSString *base64String = [imageData base64EncodedString];

    Snag *snag = [self.fetchedResultsController.fetchedObjects objectAtIndex:i];

    NSString *tableString = [NSString stringWithFormat:@"<tr><td>%i</td><td><p><b><img src='data:image/png;base64,%@'></b></p></td><td>%@</td><td>%@</td></tr>", i+1, base64String, snag.snagDescription, snag.dateTaken];
    [htmlDocumentToSave appendString:tableString];

    }

    [htmlDocumentToSave appendString:@"</table></body></html>"];

    //Save the HTMl document that will be attached.
    NSArray* paths = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES);
    NSString *documentsPath = [paths objectAtIndex:0];

    NSString *htmlPath = [documentsPath stringByAppendingPathComponent:@"test"];
    [htmlDocumentToSave writeToFile:htmlPath atomically:NO encoding:NSUTF8StringEncoding error:nil];
    self.htmlData = [NSData dataWithContentsOfFile:htmlPath];

    //Generate the UIWebView and load the HTML into it

    NSString *htmlFile = [[NSBundle mainBundle] pathForResource:@"test" ofType:@"html"];

    NSData *htmlData = [NSData dataWithContentsOfFile:htmlFile];

    self.webView = [[UIWebView alloc] init];
    [self.webView loadData:htmlData MIMEType:@"text/html" textEncodingName:@"UTF-8" baseURL:[NSURL URLWithString:@""]];

    NSString *string = [self.webView stringByEvaluatingJavaScriptFromString:@"document.getElementsByTagName('html')[0].innerHTML"];

    NSLog(@"Check if WebView has loaded %@", string);

}

-(void)drawRect:(CGRect)rect {

    UIGraphicsBeginImageContext(rect.size);
    [self.webView.layer renderInContext:UIGraphicsGetCurrentContext()];
    UIImage *viewImage = UIGraphicsGetImageFromCurrentImageContext();
    UIGraphicsEndImageContext();
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-10T19:50:56.983

不，它不必在drawRect中，我使用这个功能

```
+(UIImage*)captureScreen:(UIView*) viewToCapture
{
    UIGraphicsBeginImageContextWithOptions(viewToCapture.bounds.size, viewToCapture.opaque, 0.0);
    [viewToCapture.layer renderInContext:UIGraphicsGetCurrentContext()];
    UIImage *viewImage = UIGraphicsGetImageFromCurrentImageContext();
    UIGraphicsEndImageContext();
    return viewImage;
} 
```

在我的应用程序中，它正确地截取了我的 WebView 的屏幕截图

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-10T19:54:26.433

是什么`rect.size`？如果宽度或高度为零，则 CG 将无法创建上下文，从而导致您看到的各种错误。

@OmarAbdelhafith 关于其余部分是正确的——您不必在 中进行这项工作`-drawRect:`，并且您的其余代码看起来还可以。此外，请确保在`UIWebView`完全加载后运行此代码。

# php - 有没有办法将播放列表作为变量包含在 Flowplayer 中或链接到外部文件？

> ID：10971639
> 
> 赞同：0
> 
> 时间：2012-06-10T19:21:38.127
> 
> 标签：php, jquery, flowplayer

我想知道是否有办法将播放列表包含为变量或链接到 Flowplayer 中的外部文件。我知道您可以使用 RSS 播放列表，但我需要使用 start 和 duration 参数将剪辑组合成一个流，并且不确定这些是否可以与 RSS 播放列表一起使用。

如果可能的话，我希望能够将我的播放列表保留在播放器之外，以便更容易管理。我想做的是在我的页面上有一个播放器和几个按钮。每个按钮都会导致播放不同的播放列表。在实际插入播放列表之前，我已经完成了所有工作。

现在我只是使用搜索和替换将播放列表文件的内容写入播放器页面，但我希望有更好的方法。

感谢您阅读我的帖子。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-10T19:36:12.960

您可以使用一个 JSON 对象数组，甚至可以通过 AJAX 加载。

您还可以使用外部配置文件，该文件可由 PHP 自身生成。

以下是一些帮助链接： http:
[//flowplayer.org/demos/configuration/external.html](http://flowplayer.org/demos/configuration/external.html)
[http://flowplayer.org/documentation/configuration/playlists.html](http://flowplayer.org/documentation/configuration/playlists.html)
[http://flowplayer.org/plugins/javascript/playlist。 html](http://flowplayer.org/plugins/javascript/playlist.html)

# if-statement - 如果部分单元格匹配变量，则

> ID：10971640
> 
> 赞同：0
> 
> 时间：2012-06-10T19:22:01.217
> 
> 标签：if-statement, excel, vba

我试图弄清楚如何编写 if 语句，以便如果变量与单元格的一部分匹配，则满足条件并运行脚本。

例如

A1 包含“aa ss dd”

A2 包含“dd ss dd”

A3 包含“aa”

变量 v = aa

目前我有一个与整个单元格匹配的语句：

如果 ActiveCell.Value = v 那么...

使用此代码 A3 满足条件，但我希望 A1 也匹配它。有任何想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-10T19:41:02.333

```
If InStr(ActiveCell.Value, v) Then ... 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-10T19:47:04.220

试试这个：

```
Option Explicit

Sub MatchPartOfCell()
    Dim sSearch As String
    Dim rng As Range

    sSearch = "aa"
    Set rng = Range("A1")

    Do Until rng = ""
    If InStr(rng.Value, sSearch) > 0 Then
        rng.Offset(, 1).Value = "I contain aa."
    End If
        Set rng = rng.Offset(1)
    Loop
End Sub 
```

# javascript - 哥伦布序列

> ID：10971646
> 
> 赞同：0
> 
> 时间：2012-06-10T19:22:52.027
> 
> 标签：javascript, node.js

我正在尝试解决一个小的编程挑战，即计算 Golomb 序列的第 n 个数字（请参阅[此](http://www.wolframalpha.com/input/?i=golomb%20sequence)以获得更多帮助）。我写了一个简单的解决方案，但它可能有任何问题，因为 2500000 位置的数字是 10813，但我的程序给了我 10814。

```
var golomb = (function(){
    var cache = [null, 1];
    const o = 0.5 * (1 + Math.sqrt(5)); // Golden ratio 
    return function(n){
        return cache[n] || (function(){
            return Math.round(Math.pow(o, 2-o) * Math.pow(n, o-1));
        })();
    };
})();

var num = golomb(process.argv[2]);
console.log(num); 
```

也许，黄金比例需要比 JavaScript 提供的更长的长度。有人可以帮忙吗？谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-10T20:43:49.850

值得一提的是，这是一个基于递归关系的函数，带有缓存，可以很快给出正确的答案

```
var golomb = (function() {
    var cache = [null, 1];
    return function(n) {
       var i;
       for (i=cache.length;i<n;i++) cache[i]=golomb(i);
       return cache[n] || (cache[n]=1+golomb(n-golomb(golomb(n-1))));
    }
})(); 
```

[在jsFiddle](http://jsfiddle.net/UCWkg/2/)上检查一下

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-18T01:56:58.947

Sgmonda，你从 Wolfram Alpha 那里得到的公式不是一个精确的解决方案。我实际上向他们抱怨过，因为我喜欢 Golomb 序列。重复关系是精确的，但速度很慢，即使您缓存它也是如此。呵呵，这就是为什么编程挑战是一个挑战。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-10T19:45:12.933

来自[维基百科文章](http://en.wikipedia.org/wiki/Golomb_sequence)：

> Colin Mallows 给出了明确的递归关系：
> 
> ```
> a(1) = 1;
> a(n + 1) = 1 + a(n + 1 − a(a(n))) 
> ```

您需要在这个使用整数的迭代方法中实现您的解决方案。

尝试实施的快速尝试给出了：

```
function golomb(n) {
    if(n == 1) return 1;
    else return 1 + golomb(n − golomb(golomb(n-1)));
} 
```

# phpunit - PHPUnit 和 Call-time pass-by-reference

> ID：10971647
> 
> 赞同：4
> 
> 时间：2012-06-10T19:22:57.803
> 
> 标签：phpunit, pass-by-reference

我正在编写一个单元测试并且遇到了一个烦人的问题......假设我正在测试以下功能：

```
public function functionToTest(array &$data, parameter2)
{
    // perform some action on the array that is being passed in by reference
} 
```

现在，当我尝试在我的单元测试中调用这个函数时，我会做这样的事情：

```
public function testMyFunction()
{
    $data = array('key1' => 'val1');

    $mockOfClass = $this->getMockBuilder('ClassName')
        ->disableOriginalConstructor()
        ->setMethods(array('method1', 'method2')) // My function to test is NOT in this list 
        ->getMock();

    $this->mockOfClass->functionToTest($data, true);

    // Perform assertions here
} 
```

但是，我收到以下错误消息：

> ClassName::addNewFriendsToProfile() 的参数 1 应为参考，给定值

这对我来说似乎很奇怪。首先，我只是通过引用传递一个数组，所以它不应该有这个问题。其次，为什么是参数1？不是说参数0吗？然后，我尝试将调用更改为以下内容：

```
$this->mockOfClass->functionToTest(&$data, true); 
```

进行此更改后，它可以正常工作。不幸的是，它还会产生以下警告：

> 在第 xxx 行的 /PathToFile 中不推荐使用调用时传递引用

运行实际代码时，我没有遇到此错误。它只在单元测试中抛出这个错误。另外，我需要使用模拟，因为我正在模拟的类中有方法；所以我不能简单地创建一个类的新实例并调用正在测试的方法。有什么办法可以解决这个问题吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-15T11:24:13.110

事实证明，PHPUnit 克隆了每个传入的参数（感谢 Tim Lytle 将我指向此来源：[在 PHPUnit 中模拟时在回调中通过引用传递](https://stackoverflow.com/questions/5170747/pass-by-reference-in-a-callback-when-mocking-in-phpunit)）。如果在单元测试的调用时传入数组而没有引用，这就是导致错误的原因。幸运的是，解决方案很简单。我不是按引用传递数组，而是按值传递数组并返回数组。

前：

```
public function someFunction(array &$myArray)
{
    $myArray[] = 'new val';
} 
```

后：

```
public function someFunction(array $myArray)
{
    $myArray[] = 'new val';

    return $myArray;
} 
```

# python - 如何从 .t xt 文件中仅读取一些字符并使用 python 将它们存储在数组中？

> ID：10971649
> 
> 赞同：-3
> 
> 时间：2012-06-10T19:23:13.850
> 
> 标签：python, arrays, string, character

> **可能重复：**
> [如何使用 python 从文本文件中的行中读取特定字符？](https://stackoverflow.com/questions/10968973/how-to-read-specific-characters-from-lines-in-a-text-file-using-python)

我有一个 .txt 文件，其中的行看起来像这样

> 水 16:-30.4674 1:-30.4759 17:-30.5373 7:-30.6892 8:-31.128 13:-31.393 2:-31.4036 9:-32.0214 5:-32.4387 12:-32.6972 14:-32.8345 3:-32.8345 4.1 :-34.1308 15:-34.9566 11:-38.799 10:-51.471 6:-211.086
> 
> 水 13:-33.3397 9:-33.511 12:-33.6573 17:-33.7629 5:-33.9539 3:-34.1326 7:-34.3554 15:-34.7484 8:-35.0615 2:-35.4279 16:-37.0666617。 :-38.4928 14:-41.2152 4:-43.3593 10:-80.4689 6:-208.802
> 
> 打哈欠 13:-36.4616 9:-37.1025 15:-37.2519 17:-38.8885 8:-39.1585 14:-39.8553 2:-40.2131 12:-41.2615 1:-41.6317 7:-41.8205 316:-41.8205 3:-41.898-4-8 :-46.8158 5:-49.8107 4:-52.5595 10:-70.4841 6:-220.906

我需要做的是将 ' `:`' 之前的数字存储在一个数组中。

迭代方式或最简单的方法是什么？

```
f=open('path','r')
lines=f.readlines()
for line in lines:
   ... 
```

从这里开始，我不知道拆分和存储过程......请帮忙。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-10T19:32:25.047

如果格式始终相同，您可以对每一行执行此操作：

```
items = line.split()[1:]
items = [item.split(':')[0] for item in items] 
```

然后，如果您希望它们为整数：

```
items = map(int, items) 
```

至于存储它们，在遍历每一行之前创建一个列表`rows = []`，然后你可以添加这样的项目：

```
rows.append(items) 
```

所以总的来说，它看起来像这样：

```
f = open('path','r')
lines = f.readlines()
rows = []

for line in lines:
    items = line.split()[1:]
    items = [item.split(':')[0] for item in items]
    items = map(int, items)
    rows.append(items)

f.close()
print rows 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-10T19:52:53.680

这是正则表达式的工作：

```
import re

with open(myFilePath, "r") as f:
    text = f.read()
    numbers = re.findall(r"(-?\d+):\S+", text) 
```

以上假设冒号之前的所有数字都是整数。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-06-10T19:31:22.353

使用 split 方法并将其附加到您的数组中：

```
myArray=line.split(':-') 
```

# c++ - 零大小结构

> ID：10971651
> 
> 赞同：12
> 
> 时间：2012-06-10T19:23:28.347
> 
> 标签：c++, c, gcc

我注意到用 GCC 4.6 编译时`sizeof(Foo)`为 0 和`sizeof(Bar)`1。由于某种原因，将一个空数组添加到一个空结构中使其大小为 0。我认为两个结构的大小必须相同。这里发生了什么？

```
struct Foo
{
    char x[];
};

struct Bar {}; 
```

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-06-10T19:38:04.953

C 标准不允许任何`struct`声明。n1570 中的 6.7.2.1 (8)：

> 如果 struct-declaration-list 不包含任何命名成员，无论是直接还是通过匿名结构或匿名联合，则行为未定义。

以及同一节中的第 18 段：

> 作为一种特殊情况，**具有多个命名成员**的结构的最后一个元素可能具有不完整的数组类型；这称为灵活数组成员。在大多数情况下，灵活的数组成员被忽略。特别是，结构的大小就像省略了灵活数组成员一样，只是它可能具有比省略所暗示的更多的尾随填充。

（强调我的）

C++ 中不允许灵活的数组成员，因此代码也不是有效的 C++。

由于它不是有效代码，因此`sizeof`这些报告的值是没有意义的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-10T19:40:02.343

sizeof 运算符永远不会产生 0，即使对于空类也是如此。

正如您[在 msdn 上看到的](http://msdn.microsoft.com/en-us/library/4s7x1k91%28v=vs.71%29.aspx)

此外，msdn 声明：

sizeof 运算符不能与以下操作数一起使用：

*   职能。（但是，sizeof 可以应用于指向函数的指针。）
*   位字段。
*   未定义的类。
*   类型无效。
*   动态分配的数组。
*   外部阵列。
*   不完整的类型。
*   不完整类型的括号名称。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-10T20:07:14.883

C 和 C++ 不允许大小为零的对象。

gcc 确实支持它们*作为扩展*。如果您使用正确的选项进行编译，例如

```
gcc -std=c99 -pedantic -Wall -Wextra 
```

gcc 至少会警告你；g++ 有类似的选项。

# php - MySQL 根据 SELECT 查询结果插入多行

> ID：10971653
> 
> 赞同：7
> 
> 时间：2012-06-10T19:23:39.410
> 
> 标签：php, mysql, insert

我有一个这样的 MySQL 查询：

```
SELECT cp.plan_name, cp.plan_time FROM courses c
  INNER JOIN course_to_plan cpl   ON cpl.course_id = c.course_id
  INNER JOIN courseplans cp       ON cp.plan_id = cpl.plan_id
WHERE cpl.course_id = '$course_id'; 
```

这将输出数据，例如：

```
+----------------------------+-----------+
| plan_name                  | plan_time |
+----------------------------+-----------+
| Plan number one name       |         6 |
| Plan number two name       |         6 |
| Plan number three name     |        10 |
+----------------------------+-----------+ 
```

我希望将这些行插入表单提交的新表中。

如何继续编写我的代码`update.php`以使其在表中插入值`newtable`？

```
if (isset($_POST['submit'])) {

 $course_id = $_POST['course_id'];

 $course_result = mysql_query 
    ("SELECT cp.plan_name, cp.plan_time FROM courses c
      INNER JOIN course_to_plan cpl   ON cpl.course_id = c.course_id
      INNER JOIN courseplans cp       ON cp.plan_id = cpl.plan_id
    WHERE cpl.course_id = '$course_id'");

 /* I want the result of the above rows to be inserted in the table
    newtable which has the columns plan_name, plan_time */ 
```

我不想承认我在 PHP 和 MySQL 中完全没用，但我正在努力学习。我想我必须创建某种数组来存储结果，然后循环插入，但我不知道如何。

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-06-10T19:29:32.877

您必须知道的一件事是查询返回的列数必须与您要插入的列数相匹配

```
"INSERT INTO NewTable(plan_name, plan_time)
    SELECT cp.plan_name, cp.plan_time 
    FROM courses c
         INNER JOIN course_to_plan cpl   ON cpl.course_id = c.course_id
         INNER JOIN courseplans cp       ON cp.plan_id = cpl.plan_id
    WHERE cpl.course_id = '$course_id'" 
```

> 警告：注意通过`$course_id`.

请注意，我在 INSERT 语句中指定了 2 列，因为 SELECT 查询返回 2 列

如果表中的列数与查询返回的列数完全匹配，则无需指定列。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-10T19:29:23.820

不确定 php 代码，但如果您将 mysql 查询更改为[插入/选择](http://dev.mysql.com/doc/refman/5.1/en/insert-select.html)，它应该可以工作：

```
INSERT INTO newtable(plan_name, plan_time)
      SELECT cp.plan_name, cp.plan_time 
      FROM courses c
      INNER JOIN course_to_plan cpl   
            ON cpl.course_id = c.course_id
      INNER JOIN courseplans cp       
            ON cp.plan_id = cpl.plan_id
      WHERE cpl.course_id = '$course_id' 
```

# asp.net-mvc-3 - 将新订单发送回 MVC 控制器

> ID：10971655
> 
> 赞同：1
> 
> 时间：2012-06-10T19:23:52.420
> 
> 标签：asp.net-mvc-3, jquery-ui, jquery-ui-sortable

使用 JQuery 可排序，并尝试将新订单发送回我的控制器，但运气不佳。我的看法是：

```
using (Ajax.BeginForm("EditTickerOrder", new AjaxOptions { InsertionMode = InsertionMode.Replace, HttpMethod = "POST", }))
{
    <div id="editableticker">
        @Html.HiddenFor(m => m.ProjectGUID)
        <ul id="sortablediv">
            @foreach (DGI.CoBRA.Tools.BussinessObjects.CollabLibrary.TickerObjects.Ticker t in Model)
            {
                <li class="ui-state-default" id="@t.pKeyGuid.ToString()">
                    <p>@Html.CheckBox(t.pKeyGuid.ToString(), t.Display, new { @class = "activechk" }) 
                        <span style="font-weight: bold">
                            @t.Text
                        </span>
                    </p>
                </li>
            }
        </ul>
    <input type="submit" value="Save New Ticker Order" />
} 
```

我的控制器是：

```
[HttpPost]
public ActionResult EditTickerOrder(Guid ProjectGUID, List<string> items)
{
    TickerCollectionModel TickerData = new TickerCollectionModel();
    TickerData.ProjectGUID = ProjectGUID;
    TickerData.ListAllBySession(ProjectGUID);
    return PartialView("TickerList", TickerData);
} 
```

然而`list<string> items`总是如此`null`。有任何想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-10T19:35:06.397

您正在编写`foreach`循环，这肯定违反了默认模型绑定器期望用于处理集合的表单输入字段的[命名约定。](http://www.hanselman.com/blog/ASPNETWireFormatForModelBindingToArraysListsCollectionsDictionaries.aspx)如果您不尊重已建立的连线格式，则不能期望默认模型绑定器能够在 POST 操作中重新水合您的模型。

事实上，你为什么不使用视图模型和编辑器模板呢？它们使 ASP.NET MVC 中的一切变得微不足道。

因此，让我们定义一个反映您的视图要求的视图模型（或者至少在您的问题中显示的那些=>您当然可以使用您想要处理的其他属性来丰富它）：

```
public class TickerViewModel
{
    public Guid Id { get; set; }
    public bool IsDisplay { get; set; }
    public string Text { get; set; }
}

public class ProjectViewModel
{
    public Guid ProjectGUID { get; set; }
    public IEnumerable<TickerViewModel> Tickers { get; set; }
} 
```

然后是一个控制器，其职责是查询您的 DAL 层，检索域模型，将域模型映射到我们为此视图定义的视图模型中，并将视图模型传递给视图。相反，POST 操作从视图接收视图模型，将视图模型映射回某个域模型，将域模型传递给 DAL 层进行处理并呈现某些视图或重定向到成功操作：

```
public class HomeController : Controller
{
    public ActionResult Index()
    {
        // TODO: those values come from a data layer of course
        var model = new ProjectViewModel
        {
            ProjectGUID = Guid.NewGuid(),
            Tickers = new[]
            {
                new TickerViewModel { Id = Guid.NewGuid(), Text = "ticker 1" },
                new TickerViewModel { Id = Guid.NewGuid(), Text = "ticker 2" },
                new TickerViewModel { Id = Guid.NewGuid(), Text = "ticker 3" },
            }
        };
        return View(model);
    }

    [HttpPost]
    public ActionResult Index(ProjectViewModel model)
    {
        // Everything will be correctly bound here => map the view model
        // back into your domain model and pass the domain model to 
        // your DAL layer for processing ...

        return Content("Thanks for submitting");
    }
} 
```

一个视图（值得注意的是，在此示例中，我使用了标准表单而不是 AJAX，但将其转换为 AJAX 表单很简单）：

```
@model ProjectViewModel

@using (Html.BeginForm())
{
    @Html.HiddenFor(m => m.ProjectGUID)
    <div id="editableticker">
        <ul id="sortablediv">
            @Html.EditorFor(x => x.Tickers)
        </ul>
    </div>
    <button type="submit">OK</button>
} 
```

最后是相应的编辑器模板，它将为 Tickers 集合的每个元素自动呈现（`~/Views/Home/EditorTemplates/TickerViewModel.cshtml`）：

```
@model TickerViewModel

<li class="ui-state-default">
    <p>
        @Html.CheckBoxFor(x => x.IsDisplay, new { @class = "activechk" }) 
        @Html.LabelFor(x => x.IsDisplay, Model.Text)
        @Html.HiddenFor(x => x.Text)
        @Html.HiddenFor(x => x.Id)
    </p>
</li> 
```

# java - 多线程。做类似的任务，但需要看到他们的输出

> ID：10971657
> 
> 赞同：0
> 
> 时间：2012-06-10T19:24:36.613
> 
> 标签：java, multithreading, swing

我有一个程序，我可以选择线程的数量并启动它，但是我想在每个线程启动后控制它们一个一个地关闭，并查看每个线程的输出。

在这种情况下，最好的方法是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-10T19:36:57.417

[这些](http://docs.oracle.com/javase/1.5.0/docs/api/java/util/concurrent/ExecutorService.html#invokeAll%28java.util.Collection%29)方法允许您获取提交给执行器服务的所有任务的结果。这[会](http://docs.oracle.com/javase/6/docs/api/java/util/concurrent/ExecutorService.html#shutdown%28%29)关闭它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-10T19:46:50.200

创建一个包含您的线程的哈希表，并将线程名称用作哈希图中的键。因此，每当您想在线程上执行操作时，您都可以从哈希表中获取它的引用并用它做任何您想做的事情。

```
Hashtable<String, Thread> threadTable = new Hashtable<String, Thread>();

Thread t1 = new Thread() {
    public void run() {
         //Do sttuff
    }
}

Thread t2 = new Thread() {
    public void run() {
         //Do sttuff
    }
}

threadTable.put("T1", t1);
threadTable.put("T2", t2); 
```

当然以上只是一个简单的例子。如果您采用一个类并使其扩展 Thread，则可以添加方法来暂停和恢复线程以及打印其状态。

# javascript - 我怎样才能点击一个 带有 Greasemonkey 的物品？

> ID：10971661
> 
> 赞同：1
> 
> 时间：2012-06-10T19:25:05.247
> 
> 标签：javascript, html, html-lists, greasemonkey, userscripts

```
<ul class="myList clearfix" id="thismyList">
    <li class="myBullet" id="answer1">blabla1</li>
    <li class="myBullet" id="answer2">blabla2</li>
    <li class="myBullet" id="answer3">blabla3</li>
</ul> 
```

在此页面中，如何自动单击 item `blabla2`？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-10T19:26:37.017

最短和最强大的可能是[XPath](http://www.w3.org/TR/xpath/)方式（顺便说一句 - 它是少数 w3 规范之一，实际上是一个非常好的和有用的阅读）。你几乎可以拥有任何你想拥有的条件。

```
var xresult = document.evaluate("//*[text()='blabla2']", document, null, XPathResult.FIRST_ORDERED_NODE_TYPE, null);
xresult.singleNodeValue.click(); 
```

[`evaluate()`](https://developer.mozilla.org/en/DOM/document.evaluate), [`click()`](https://developer.mozilla.org/en/DOM/element.click)

[请参阅此文档以了解有关 JavaScript 中 XPath 的更多信息。](https://developer.mozilla.org/en/Introduction_to_using_XPath_in_JavaScript)

* * *

非 XPath 方法是手动遍历所有节点并搜索包含正确文本的第一个节点：

```
var findElem = function(elems, text) {
    for (var i = 0; i < elems.length; i++) {
        if (elems[i].textContent == text) {
            return elems[i];
        } else {
            var result = findElem(elems[i].children, text);
            if (result != undefined) {
                return result;
            }
        }
    }
    return;
}

findElem(document.documentElement.children, "blabla2").click(); 
```

# javascript - Blueimp Jquery 文件上传：不显示缩略图预览图像

> ID：10971662
> 
> 赞同：5
> 
> 时间：2012-06-10T19:25:36.007
> 
> 标签：javascript, jquery, html, jquery-ui, file-upload

我在我的 Rails 应用程序中使用[了 Blueimp jQuery File Upload 。](https://github.com/blueimp/jQuery-File-Upload)当用户选择文件时，我想在将文件上传到服务器之前显示图像的缩略图和图像的名称。

我一直在参考[演示](http://blueimp.github.com/jQuery-File-Upload/)来自定义这个插件。我可以在屏幕上打印文件的名称，但无法显示缩略图。

这是生成的html

```
<!DOCTYPE html>
<html>
<head>
  <title>Fileupload</title>
  <link href="/assets/application.css?body=1" media="all" rel="stylesheet" type="text/css" />
<link href="/assets/jquery.fileupload-ui.css?body=1" media="all" rel="stylesheet" type="text/css" />
<script src="/assets/jquery.js?body=1" type="text/javascript"></script>
<script src="/assets/jquery_ujs.js?body=1" type="text/javascript"></script>
<script src="/assets/jquery.ui.widget.js?body=1" type="text/javascript"></script>
<script src="/assets/application.js?body=1" type="text/javascript"></script>
<script src="/assets/jquery.tmpl.js?body=1" type="text/javascript"></script>
<script src="/assets/load-image.min.js?body=1" type="text/javascript"></script>
<script src="/assets/canvas-to-blob.min.js?body=1" type="text/javascript"></script>
<script src="/assets/jquery.fileupload.js?body=1" type="text/javascript"></script>
<script src="/assets/jquery.fileupload-fp.js?body=1" type="text/javascript"></script>
<script src="/assets/jquery.fileupload-ui.js?body=1" type="text/javascript"></script>
<meta content="authenticity_token" name="csrf-param" />
<meta content="Akp8GLPQ+DlFYI1g3CUA71hk0vg3G84aVwcVRHTlRUY=" name="csrf-token" />
</head>
<body>
<div class="files">
  <form action="/users" class="upload" id="fileupload" method="post">
    <input id="user_photo" name="user[photo]" type="file" />
    <div>Upload files</div>
  </form>

  <table class="upload_files"></table>
</div>
<!-- The template to display files available for upload -->
<script id="template-upload" type="text/x-jquery-tmpl">
  <tr class="template-upload fade">
    <td class="preview"><span class="fade"></span></td>
    <td class="name"><span>${name}</span></td>
  </tr>
</script>
<script type="text/javascript" charset="utf-8">
    $(function () {
        $('#fileupload').fileupload({
            add: function (e, data) {
                console.log('add');
                $.each(data.files, function (index, file) {
                    console.log('Added file: ' + file.name);
                    //alert($('#tmpl-demo').tmpl(data));
                    $('#template-upload').tmpl(data.files).appendTo('.upload_files');
                });
                var jqXHR = data.submit()
                        .success(function (result, textStatus, jqXHR) {/* ... */})
                        .error(function (jqXHR, textStatus, errorThrown) {/* ... */})
                        .complete(function (result, textStatus, jqXHR) {
                            console.log("complete");
                            //$('.upload_files').append('<tr><td>'+ result +'</td></tr>');
                        });
            },
            progress: function (e, data) {
                console.log('progress');
            },
            start: function (e) {
                console.log('start');
            },
            done: function (e) {
                console.log('done');
            }
        }).bind('fileuploadadd', function (e, data) {
                    console.log('fileuploadadd');
                }).bind('fileuploadprogress', function (e, data) {
                    console.log('fileuploadprogress');
                }).bind('fileuploadstart', function (e) {
                    console.log('fileuploadstart');
                }).bind('fileuploaddone', function (e) {
                    console.log('fileuploaddone');
                });

    });
</script>
</body>
</html> 
```

我比较选择文件后生成的html。唯一的区别是演示应用程序具有我的应用程序中缺少的`<canvas height="72" width="80"></canvas>`元素。`<td class="preview"><span class="fade"></span></td>`

它看起来像一些配置问题。有人可以帮我正确配置它以在用户从磁盘中选择图像后立即显示缩略图吗？

* * *

## 回答 #1

> 赞同：39
> 
> 时间：2013-08-17T02:58:27.177

把它放在你的 add(e, data) 回调函数中，相应地调整你自己的 html 元素：

```
$('body').append('<img src="' + URL.createObjectURL(data.files[0]) + '"/>'); 
```

URL.createObjectURL 函数[在此处](https://developer.mozilla.org/en-US/docs/Web/API/URL/createObjectURL)记录。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-13T14:19:58.437

这些预览不是基本版本的一部分。它们是“*提供完整用户界面的附加插件 (jquery.fileupload-ui.js) 的一部分。* ”

所以你必须包含那些 js 文件，而且你可能需要一些 HTML 包装器。

查看演示的源 HTML，因为它包含在该演示中。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-07-14T02:47:52.677

在文件 jquery.fileupload-ui.js 中编辑函数 _renderPreviews

```
_renderPreviews: function (data) {           
        data.context.find('.preview').each(function (index, elm) {               
            $(elm).append(data.files[index].preview);
            $(elm).append('<img width="90" src="' + URL.createObjectURL(data.files[0]) + '"/>');
        });
    }, 
```

# delphi - 当我更改属性时，为什么我的自定义组件没有更新？

> ID：10971669
> 
> 赞同：12
> 
> 时间：2012-06-10T19:26:43.577
> 
> 标签：delphi, components, vcl, custom-component

我创建了一个基于 TPaintBox 的组件 TGridPaintBox。它基本上是一个添加了“网格功能”的颜料盒。它不是数据网格。更像是一个棋盘组件。

在对象资源管理器中，我可以设置某些属性。最重要的是，我可以设置网格尺寸（跨越/向下多少个单元格），还可以设置与绘图相关的选项。单元格是否应该是正方形，奇数/偶数单元格的颜色等。

我的这个组件的第一个版本直接在类上具有属性，当我更改属性时，设计时绘图会立即更新。随着组件的增长，我想更好地组织我的属性，并引入了一些“选项属性”，如绘图选项、行为选项等。引入这些之后，设计时绘图不再像以前那样更新。更改属性后，我必须单击组件才能更新。谁能告诉我为什么会这样？

这是代码的精简版本。我希望它能解释这种行为：

（PS：这是我的第一个组件，尽管我自 1997 年以来一直在使用 Delphi，所以如果有人能在我这样做的方式中发现任何愚蠢的地方，请随时告诉我）

```
unit GridPaintBox;

interface

type
  TGridDrawOption = (gdoSquareCells,gdoCenterCells,gdoDrawCellEdges,gdoDrawFocus);
  TGridDrawOptions = set of TGridDrawOption;

  TGridOptions = class(TPersistent)
  private
    FCellsX : integer;
    FCellsY : integer;
    FDrawOptions : TGridDrawOptions;
  public
    constructor Create(aGridPaintBox : TGridPaintBox);
    procedure Assign(Source : TPersistent); override;
  published
    property CellsX : integer read FCellsX write FCellsX;
    property CellsY : integer read FCellsY write FCellsY;
    property DrawOptions : TGridDrawOptions read FDrawOptions write FDrawOptions;
  end;

  TGridPaintBox = class(TPaintBox)
  private
    FGridOptions : TGridOptions;
    FFocusedX,
    FFocusedY : integer;
    FOnFocusChanged: TNotifyEvent; 
    procedure CalculateSizeAndPosition; 
    procedure DrawCell(X,Y : integer);
    procedure DrawCells;
    procedure SetGridOptions(const Value: TGridOptions);
  protected
    procedure MouseDown(Button: TMouseButton; Shift: TShiftState; X, Y: Integer); override;
  public
    constructor Create(aOwner : TComponent); override;
    destructor Destroy; override;
    procedure Paint; override;
    procedure SetFocus(X,Y : integer);
  published
    property OnFocusChanged : TNotifyEvent read FOnFocusChanged write FOnFocusChanged;
    property Options : TGridOptions read FGridOptions write SetGridOptions;
  end;

procedure Register;

implementation

procedure Register;
begin
  RegisterComponents('Samples', [TGridPaintBox]);
end;

procedure TGridPaintBox.CalculateSizeAndPosition;
begin
  <...>
end;

constructor TGridPaintBox.Create(aOwner: TComponent);
begin
  inherited;
  FGridOptions := TGridOptions.Create(self);
end;

procedure TGridPaintBox.DrawCell(X, Y: integer);
begin
  <...>
end;

procedure TGridPaintBox.DrawCells;
var
  X,Y : integer;
begin
  CalculateSizeAndPosition;

  for Y := 0 to FGridOptions.CellsY-1 do
    for X := 0 to FGridOptions.CellsX-1 do
      DrawCell(X,Y);
end;

procedure TGridPaintBox.Paint;
begin
  Canvas.Font := Font;
  Canvas.Brush.Color := Color;
  Canvas.Brush.Style := bsSolid;
  Canvas.FillRect(Rect(0,0,Width,Height));
  DrawCells;
  if Assigned(OnPaint) then
    OnPaint(Self); 
end;

procedure TGridPaintBox.SetGridOptions(const Value: TGridOptions);
begin
  FGridOptions.Assign(Value);
  invalidate;
end;

procedure TGridPaintBox.MouseDown(Button: TMouseButton; Shift: TShiftState; X, Y: Integer);
begin
  SetFocus(PixelToCellX(X),PixelToCellY(Y));
  inherited;
end;

procedure TGridPaintBox.SetFocus(X, Y: integer);
begin
  if (FocusedX=X) and (FocusedY=Y) then 
    exit;

  FFocusedX := X;
  FFocusedY := Y;

  if assigned(OnFocusChanged) then
    OnFocusChanged(self);

  invalidate;
end;

constructor TGridOptions.Create(aGridPaintBox : TGridPaintBox);
begin
  FCellsX := 20;
  FCellsY := 8;
  FDrawOptions := [gdoSquareCells,gdoCenterCells,gdoDrawCellEdges];
end;

procedure TGridOptions.Assign(Source : TPersistent);
begin
  if Source is TGridOptions then
  begin
    FCellsX := TGridOptions(Source).CellsX;
    FCellsY := TGridOptions(Source).CellsY;
    FDrawOptions := TGridOptions(Source).DrawOptions;
  end
  else
    inherited;
end;

end. 
```

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-06-10T19:49:52.117

发生这种情况是因为您没有选项集的设置器，这会使您所属的控件无效。表单设计器中的单击会调用控件以使其无效，但您应该在此类选项设置器中自行处理。所以我会存储选项所有者以便更好地访问直接所有者类实例，并在选项设置器中强制此所有者，重绘控件：

```
type
  TGridPaintBox = class;
  TGridDrawOption = (gdoSquareCells, gdoCenterCells, gdoDrawCellEdges, gdoDrawFocus);
  TGridDrawOptions = set of TGridDrawOption;
  TGridOptions = class(TPersistent)
  private
    FOwner: TGridPaintBox;
    FCellsX: Integer;
    FCellsY: Integer;
    FDrawOptions: TGridDrawOptions;
    procedure SetCellsX(AValue: Integer);
    procedure SetCellsY(AValue: Integer);
    procedure SetDrawOptions(const AValue: TGridDrawOptions);
  public
    constructor Create(AOwner: TGridPaintBox);
    procedure Assign(ASource: TPersistent); override;
  published
    property CellsX: Integer read FCellsX write SetCellsX;
    property CellsY: Integer read FCellsY write SetCellsY;
    property DrawOptions: TGridDrawOptions read FDrawOptions write SetDrawOptions;
  end;

implementation

constructor TGridOptions.Create(AOwner: TGridPaintBox);
begin
  FOwner := AOwner;
  FCellsX := 20;
  FCellsY := 8;
  FDrawOptions := [gdoSquareCells, gdoCenterCells, gdoDrawCellEdges];
end;

procedure TGridOptions.SetCellsX(AValue: Integer);
begin
  if FCellsX <> AValue then
  begin
    FCellsX := AValue;
    FOwner.Invalidate;
  end;
end;

procedure TGridOptions.SetCellsY(AValue: Integer);
begin
  if FCellsY <> AValue then
  begin
    FCellsY := AValue;
    FOwner.Invalidate;
  end;
end;

procedure TGridOptions.SetDrawOptions(const AValue: TGridDrawOptions);
begin
  if FDrawOptions <> AValue then
  begin
    FDrawOptions := AValue;
    FOwner.Invalidate;
  end;
end; 
```

***进一步说明：***

如果您不需要明确需要绘制框的已发布属性和事件，例如`Color`，`Font`或事件，请从而不是从`OnPaint`派生您的控件。您可以选择自己发布的属性和事件。`TGraphicControl``TPaintBox`

# jquery - 花式盒 | Ajax 请求不起作用

> ID：10971670
> 
> 赞同：3
> 
> 时间：2012-06-10T19:26:49.110
> 
> 标签：jquery, ajax, fancybox

我已经尝试了几个小时来制作fancybox来加载一个php文件，但没有成功......

这是详细信息：

您可以在[此处](http://patrascity.gr/events-pc/pc-festival/1610-diethnes-festival-patras-2012.html)访问有问题的网站。当您单击每个图像旁边的“Παλαιά Δημοτικά Λουτρά”或“Αρχαίο Ωδείο”时，会调用 Fancybox 请求。

首先，页面的内容是通过 ajax 请求加载的。此页面包含链接：

```
<a class="area_fancybox" href="http://www.mysite/fancy_areas.php?areasName=' . $the_area . '">' . $the_area . '</a> 
```

$the_area 变量是我要传递给fancybox 将加载的php 文件的参数。现在，当页面的内容已经加载时，我添加了 fancybox 代码，就像这样。

```
jQuery('#diethnes_festival_2012').load('../../../diethnes_festival_2012.php', function() {
  jQuery("a.area_fancybox").fancybox();
}); 
```

当您单击“area_fancybox”链接时，fancybox 开始加载，但没有任何反应...

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-10T19:34:11.073

`Fancybox`来自 url 的 ajax 调用请求以开头，`www`而您的链接没有这部分。如果您`www.`在开始时加载页面，则调用有效。这是由于`allow-control-access-policy`浏览器的原因。始终使用`firebug`or`chrome developer tools`在控制台中查找错误。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-10T19:36:55.860

这是一个跨域问题（不允许您从域*mysite加载来自**www.mysite*的内容。您会注意到，如果您访问 URL 中带有*www*的站点，那么它会按原样工作： [http：/ /www.mysite/events-pc/pc-festival/1610-diethnes-festival-patras-2012.html](http://www.mysite/events-pc/pc-festival/1610-diethnes-festival-patras-2012.html)

 ***我建议在href*中使用相对路径，这应该使您的代码适用于两种情况：

```
<a class="area_fancybox" href="/fancy_areas.php?areasName=Παλαιά Δημοτικά Λουτρά">Παλαιά Δημοτικά Λουτρά</a> 
```

Btw, I recommend checking out Firebug if you haven't already-- it's really helpful for debugging this kind of thing. If you're using Chrome, just hit ctrl-shift-J.**

# python - 如何让敌人在pygame中跟随玩家？

> ID：10971671
> 
> 赞同：4
> 
> 时间：2012-06-10T19:27:09.623
> 
> 标签：python, pygame

我正在制作一个自上而下的射击游戏，并希望我的僵尸跟随我的角色，我的程序使用主循环。我的角色的位置是 x 和 y，他由箭头键控制。我有一个僵尸，现在它在被射击时随机生成在屏幕的左边缘。我怎样才能让僵尸从它产生的地方跟随我的位置？

这是僵尸函数：

```
def makezombie():
    global zom
    zom = Rect (0,randint(0, height-40), 49, 38)
    return zom 
```

我设置了zombie=makezombie()

在我的主循环中，我有以下内容：

```
for shot in shots:
    if zombie.collidepoint(shot[X],shot[Y]):
        zombie=makezombie()
        points+=1000
        impact.play()
        blood.play() 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-10T19:33:34.853

我不确定我是否完全理解这个问题，但基本上你可以做的是获取玩家 (x, y) 坐标和僵尸 (x, y) 坐标。假设 (xp, yp) 是玩家坐标， (xz, yz) 是僵尸，您可以使用以下算法找到从僵尸到玩家的方向：

```
import math
(dx, dy) = ((xp - xz)/math.sqrt((xp - xz) ** 2 + (yp - yz) ** 2), 
            (yp - yz)/math.sqrt((xp - xz) ** 2 + (yp - yz) ** 2)) 
```

然后在主循环中，您希望通过执行 newCoord = (xp + dx * spped, yp + dy * speed) 来更新僵尸 x 和 y 位置坐标，其中速度是您希望僵尸每次循环移动的像素数。然后在这个新位置重新绘制僵尸。

希望有帮助！如果不是，请澄清问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-10T23:23:37.753

如果您了解向量数学（即：[euclid](http://partiallydisassembled.net/euclid.html)），则可以使用向量减法。

```
zombie_speed = 50 # pixels / an update
player = Vector2(player.rect.x, player.rect.y)
zombie = Vector2(zombie.rect.x, zombie.rect.y)
movement = player - zombie
movement.normalize()
movement *= zombie_speed 
```

然后将运动的 x,y 值添加到僵尸的 Rect()

# styles - 三星 Galaxy S2 或三星 Nexus i9250 进行测试？

> ID：10971672
> 
> 赞同：-1
> 
> 时间：2012-06-10T19:27:11.200
> 
> 标签：styles, android-4.0-ice-cream-sandwich, mali

由于我想为 ICS 开发，我想购买 4.0.3 智能手机来测试我的应用程序。我不想发布我只用模拟器测试过的应用程序（我猜曾经开发过 j2me 应用程序的人知道为什么......）。

我必须在 S2 和 Nexus i9250 之间做出选择。S2 似乎更强大，很受欢迎，但它不是最初的 ICS 4.0.3 风格。Nexus i9250 操作系统是纯安卓 ICS，价格也便宜一些。

android 应用程序在 S2 上看起来会有所不同吗？我在谈论诸如 TimePickers 之类的小部件。

真诚的，沃尔芬

**编辑：**

主要问题是：TouchWiz 会以任何方式影响我的应用程序吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-10T22:28:50.557

是他们会。

Touchwiz 和 HTC Sense 改变了按钮、日期和时间选择器等小部件的外观。从 Ice Cream Sandwich 开始，您可以[强制](http://android-developers.blogspot.com/2012/01/holo-everywhere.html)设备使用库存的 Android Holo 主题外观。但请记住，除非您更新，否则 Galaxy S2 随附 Gingerbread。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-10T19:31:56.823

在图形方面，S-II 的 Mali-400 GPU 击败了 Nexus 的 PowerVR SGX 540...

但如果您正在测试 NFC 等某些功能，您可能会选择 Nexus。

为什么不等待 S-III？兼有两者的特点。

# android - 如何从程序代码启动 SmartWatch Extension？

> ID：10971674
> 
> 赞同：1
> 
> 时间：2012-06-10T19:27:25.400
> 
> 标签：android, sony, sony-smartwatch

我想知道从程序代码中启动 SmartWatch Extension 的方法。比如 Intent 等。前几天我在 Google Play 中注册了 SmartWatch 的脚本语言。它分为两个程序，一个注册为SmartWatch Extension（BitmapCatcher），另一个注册为智能手机应用程序（Luarida）。脚本从智能手机开始。在这里，我想在启动脚本的同时启动 BitmapCatcher。虽然认为如果将 Intnent 发送到 LiveWare，BitmapCatcher 可以在不触摸屏幕的情况下启动，但该方式不理解。

请教在没有触摸屏幕的情况下启动 SmartWatch Extension 的程序代码。

（当我在索尼移动网站的 Smart Extras 讨论中写这个问题时，建议在这个网站上问 Jerker 先生。）

* * *

SmartWatch Extension 无法从其他 Android 应用程序启动，尽管它参考您的解释进行了测试。请再教。
我应该在“Your.package.name”中写什么？
此外，我应该在“HostAppPackageName”中写什么？

以 sendBroadcast 开头的是 BitmapCatcher。这个包名是“com.luaridaworks.smartwatch.bitmapcatcher”。
在测试程序中，它是这样写的。它继续以下评论。

```
package com.luaridaworks.test02;
 import com.sonyericsson.extras.liveware.aef.control.Control;
 import com.sonyericsson.extras.liveware.aef.registration.Registration;
 import android.app.Activity;
 import android.content.Intent;
 import android.os.Bundle;
 public class Test02Activity extends Activity {
     /** Called when the activity is first created. */
     @Override
     public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);

        Intent intent = new Intent(Control.Intents.CONTROL_START_REQUEST_INTENT);
        intent.putExtra(Control.Intents.EXTRA_AEA_PACKAGE_NAME, "com.luaridaworks.smartwatch.bitmapcatcher");
        intent.setPackage("com.luaridaworks.smartwatch.bitmapcatcher");
        sendBroadcast(intent, Registration.HOSTAPP_PERMISSION);
     }
 } 
```

因为 BitmapCatcher 没有启动，所以 Intent 被重写如下并测试。

```
intent = new Intent(Control.Intents.CONTROL_START_REQUEST_INTENT);
intent.putExtra(Control.Intents.EXTRA_AEA_PACKAGE_NAME, "com.luaridaworks.smartwatch.bitmapcatcher");
intent.setPackage("com.sonyericsson.extras.liveware");
sendBroadcast(intent, Registration.HOSTAPP_PERMISSION); 
```

它并没有以类似的方式开始。Intent 被重写如下并进行了测试。

```
intent = new Intent(Control.Intents.CONTROL_START_REQUEST_INTENT);
intent.putExtra(Control.Intents.EXTRA_AEA_PACKAGE_NAME, "com.luaridaworks.smartwatch.bitmapcatcher");
intent.setPackage("com.luaridaworks.test02");
sendBroadcast(intent, Registration.HOSTAPP_PERMISSION); 
```

它并没有以类似的方式开始。Intent 被重写如下并进行了测试。

```
intent = new Intent(Control.Intents.CONTROL_START_REQUEST_INTENT);
intent.putExtra(Control.Intents.EXTRA_AEA_PACKAGE_NAME, "com.luaridaworks.test02");
intent.setPackage("com.luaridaworks.smartwatch.bitmapcatcher");
sendBroadcast(intent, Registration.HOSTAPP_PERMISSION); 
```

它并没有以类似的方式开始。Intent 被重写如下并进行了测试。

```
intent = new Intent(Control.Intents.CONTROL_START_REQUEST_INTENT);
intent.putExtra(Control.Intents.EXTRA_AEA_PACKAGE_NAME, "com.sonyericsson.extras.liveware");
intent.setPackage("com.luaridaworks.smartwatch.bitmapcatcher");
sendBroadcast(intent, Registration.HOSTAPP_PERMISSION); 
```

它并没有以类似的方式开始。它还没有成功。
请举一个名为 com.luaridaworks.test02 的程序代码示例，其中“com.luaridaworks.smartwatch.bitmapcatcher”通常是从应用程序启动的。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-11T06:06:39.500

您通过发送 START_REQUEST 意图来请求启动您的扩展，如 SDK 实用程序类中所定义。[在SDK](http://developer.sonymobile.com/wportal/devworld/technology/smart-extras/smart-extension-sdk)的 API 规范的第 6.1 章中也有对此的参考。

```
Intent intent = new Intent(Control.Intents.CONTROL_START_REQUEST_INTENT);
intent.putExtra(Control.Intents.EXTRA_AEA_PACKAGE_NAME, "your.package.name");
intent.setPackage(hostAppPackageName);
sendBroadcast(intent, Registration.HOSTAPP_PERMISSION); 
```

引用“your.package.name”是注册扩展时存储到扩展数据库的包名称。如果您查看 SDK 中的示例，每个扩展示例都有一个带有方法*getExtensionRegistrationConfiguration*的 SampleRegistrationInformation 。这是注册通过 ContentProvider 存储到数据库的地方。以下行存储您的包名称。

```
values.put(Registration.ExtensionColumns.PACKAGE_NAME, mContext.getPackageName()); 
```

我认为，通过查看您的示例，您的包名称是“com.luaridaworks.smartwatch.bitmapcatcher”？

hostAppPackageName是 SmartWatch 主机应用程序的包名称*。*您从主机应用程序收到的每个意图都会发送有关此包名称的信息。在 SDK 示例中，我们将主机应用程序包名称存储在一个全局变量中以供以后使用，因此代码中引用了*hostAppPackageName*。[我在这个问题](https://stackoverflow.com/questions/10869538/sony-smartwatch-how-to-get-host-app-package-name)中对此进行了更多讨论。如果您想硬编码主机应用程序包名称，就是：com.sonyericsson.extras.smartwatch。**但我建议你不要这样做**，因为它将来可能会改变。

因此，以下（使用硬编码）应该适合您：

```
Intent intent = new Intent(Control.Intents.CONTROL_START_REQUEST_INTENT);
intent.putExtra(Control.Intents.EXTRA_AEA_PACKAGE_NAME, "com.luaridaworks.smartwatch.bitmapcatcher");
intent.setPackage("com.sonyericsson.extras.smartwatch");
sendBroadcast(intent, Registration.HOSTAPP_PERMISSION); 
```

# clojure - Leiningen，有没有类似 mvn help:effective-pom 的东西？

> ID：10971680
> 
> 赞同：4
> 
> 时间：2012-06-10T19:29:07.653
> 
> 标签：clojure, leiningen

在 Leiningen，有没有像 Mavens "mvn help:effective-pom" 这样的东西？

我想知道哪些依赖项是作为我的部门的传递部门导入的。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-10T20:10:29.957

不确定这是否正是您要查找的内容，但使用 Lein 2，您可以运行`lein deps :tree`以查看依赖关系树。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-10T23:28:11.817

uvtc 响应是正确的，但请记住，您始终可以执行“lein pom”来生成一个 pom，然后使用您想要的任何 maven 工具/插件

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-10-21T11:39:36.197

当我看到这个页面时，我只是在寻找同一个问题的答案。与此同时，我发现

```
lein pprint 
```

它的作用与 help:effective-pom 非常相似

# c++ - 将部分字符串与来自 STDLB 的另一个字符串进行比较

> ID：10971681
> 
> 赞同：0
> 
> 时间：2012-06-10T19:29:13.047
> 
> 标签：c++

我想知道是否有像`preg_match`PHP 那样的函数，我可以在其中找到一个字符串或将一个字符串与另一个字符串匹配。

```
 //In Array `word`       // in array `part`
   "Backdoor",        0        "mark"         3 (matches "Market")
   "DVD",             1        "of"           2 (matches "Get off")
   "Get off",         2        ""            -1 (no match)
   "Market",          3        "VD"           1 (matches "DVD") 
```

我在想，如果有一个函数可以只匹配字符串的一部分，那就太好了，但据我所知，只有`strcmp`但只会比较我的情况下的整个字符串是否匹配永远是假的。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-10T19:31:38.757

[`std::strstr()`](http://en.cppreference.com/w/cpp/string/byte/strstr). 它不做正则表达式，但它做简单的字符串匹配。

```
const char *foo = "Quick brown fox";
const char *bar = "brown";

printf("%d\n", strstr(foo, bar) - foo);  // Displays "6" 
```

当您使用 C++ 时，还有[`std::string::find()`](http://en.cppreference.com/w/cpp/string/basic_string/find)：

```
std::string foo = "Quick brown fox";
std::string bar = "brown";

std::cout << foo.find(bar) << "\n";   // Displays "6" 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-10T19:33:40.840

您可以使用`std::string::find()`

你也可以使用`std::strstr()`

* * *

作为另一种选择，您可以使用动态编程或回溯方法来实现此功能（动态编程具有更高的性能）。

当然，我知道这个问题不是算法问题，但我认为这个答案很有用

# java - 从数据库表中获取结果的更好选择

> ID：10971686
> 
> 赞同：2
> 
> 时间：2012-06-10T19:30:11.057
> 
> 标签：java, database, jdbc, plsql, oracle10g

`SYS_RECURSOR`调用返回或调用查询的过程是否有任何性能改进？

例如

```
CREATE OR REPLACE PROCEDURE my_proc
(
  p_id number,
  emp_cursor IN OUT SYS_REFCURSOR
)
AS
BEGIN

OPEN emp_cursor for
select * from emp where emp_number=p_id
end;
/ 
```

`Java`并通过注册参数调用上述`OUT`方法，传递`IN`参数并获取结果。

或者

从`Java`得到`emp` `table`结果

```
preparedStatement = prepareStatement(connection, "select * from emp where emp_number=?", values); 
resultSet = preparedStatement.executeQuery(); 
```

以上哪一项是更好的选择`Java`？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-10T19:43:47.387

`prepareStatement`假设您的方法对所有绑定变量使用适当的类型，则没有性能差异。也就是说，您需要确保根据参数的数据类型调用`setLong`、`setDate`、等。`setString`如果您错误地绑定数据（即调用`setString`绑定数值），您可能会强制 Oracle 进行数据类型转换，这可能会阻止优化器使用可以提高性能的索引。

然而，从代码组织和维护的角度来看，我宁愿在数据库中而不是在 Java 应用程序中进行查询。例如，如果您发现查询使用了糟糕的计划，那么如果查询在存储过程中，那么 DBA 解决问题可能比在 Java 应用程序中嵌入查询要容易得多。如果查询存储在数据库中，您还可以使用数据库的依赖关系跟踪功能更轻松地进行影响分析，如果您需要做一些事情，例如确定`emp`表需要更改时会影响什么。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-10T19:46:34.080

*好吧，我不认为从Java 调用*的角度来看有很大的不同。

我能想到的一些区别是：

*   您现在必须维护两个不同的代码库：Java 代码和存储过程。如果出现错误，您将不得不在两个不同的地方进行调试，并在两个不同的地方修复问题。
*   一旦生产就绪，除了更改部署的 Java 代码所需的那些之外，对数据库进行更改可能还需要一些额外的形式。
*   另一个需要考虑的重要问题是数据库独立性，如果您正在构建一个产品来使用不同类型的数据库，您将被迫编写不同版本的存储过程，并且您将需要维护更多代码（调试、错误修复、变化等）。
*   如果您正在构建一个您打算在不同（可能但未知）客户端的不同环境中部署的产品，这一点非常重要，您无法预测 RDBMS 将使用什么。
*   如果您想使用 ORM 框架，即 Hibernate、EclipseLink），它将为您生成非常优化的查询。另外，如果您使用存储过程，以后集成它会更加困难。
*   使用适当数量的日志记录很容易分析您的查询以进行优化。您可以使用 JDBC 日志记录或 ORM 提供程序提供的日志记录，并实际查看应用程序如何使用查询、使用次数、频率等，并优化重要的地方。

# jquery - 如何在悬停在另一个 DIV 上时显示一个 DIV？

> ID：10971687
> 
> 赞同：1
> 
> 时间：2012-06-10T19:30:13.173
> 
> 标签：jquery, hover, onmouseover

我知道这种情况有多种变体，但我一直在努力让它发挥作用。

我正在尝试一些非常接近 Yellowpages.com 的东西，只需搜索比萨饼或任何与此相关的内容即可获得填充结果。

请注意“DIV”是如何在每个单独元素的悬停上显示的？每个列表底部的操作？我需要这样做。我有一个非常相似的项目，我正在处理基于数据库内容创建列表。

最好的解释方法是，当我将鼠标悬停在整个列表的主容器上时，是否能够更改“页脚”的 z-index。

这是我在这个网站上的第一篇文章。非常感谢您的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-10T19:49:25.637

在 jQuery 中很容易做到这一点。要显示或隐藏 div，您可以使用：

```
$(".moreInfoDiv").show();
$(".moreInfoDiv").hide(); 
```

当然假设你已经定义了你的 div

```
<div class="div1">
<div class="moreInfoDiv"> 
```

所以你的最终代码显示看起来像这样

```
$('.div1').hover(
    function() {
       $(".moreInfoDiv").show();
    },
    function() {
        $(".moreInfoDiv").hide();
    }
); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-10T19:53:46.727

像这样：

```
$(function(){
  $('#div1').hover(function(){
    $('#div2').css('z-index', '10');
  }, function(){
    $('#div2').css('z-index', '0');  
  });       
}); 
```

这是一个[工作 jsFiddle 的示例，显示悬停时的 z-index 变化。](http://jsfiddle.net/gsQeu/)

# ruby - Ruby - 播放简单的 wav 文件

> ID：10971688
> 
> 赞同：0
> 
> 时间：2012-06-10T19:30:14.593
> 
> 标签：ruby

我正在编写基本的声音通知脚本，我正在使用 mpg123 和 mp3 文件，因为我想要一种非常非常轻量级的方式来播放声音文件。我更喜欢使用 wav，但 mpg123 非常小。

**有没有一种简单的方法可以在 Ruby 中播放 wav 文件？**

拥有音高控制等会很好，但现在我只想要效率，因为运行外部应用程序非常笨重。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-11T02:44:52.803

您想使用外部程序播放文件。我过去成功使用过afplay

# php - 将所有带有子目录的 url 重定向到根目录，除了两个

> ID：10971692
> 
> 赞同：2
> 
> 时间：2012-06-10T19:30:39.027
> 
> 标签：php, .htaccess, exception, redirect

我最近更改了我的一个网站的链接结构，需要进行 301 重定向：

所有带有子目录的链接都指向没有子目录的版本（即只是使子目录消失）

例如

```
domain.com/fdfddffd/test -> domain.com/test
domain.com/yipeee/test -> domain.com/test
domain.com/fdfddffd/aaa -> domain.com/aaa etc. 
```

所以我考虑使用

```
RewriteRule  ^([^/]+)(.*)$     / [R] 
```

但我需要从中排除两个目录，一个是“搜索”，另一个是“数据”。如何将上述重写规则与排除相结合？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-10T19:34:14.693

使用 a`RewriteCond`来排除这两个表达式，例如`!^/(search|data)/`

```
# Unless the request matches /search/ or /data/
RewriteCond %{REQUEST_URI} !^/(search|data)/
# Rewrite to the contents of the second group (.*)
RewriteRule  ^([^/]+)/(.*)$  /$2 [L,R=301] 
```

# asp.net-mvc-3 - 我应该使用 ServiceStack 创建 ASP.net Web 应用程序还是 ASP.net MVC？

> ID：10971695
> 
> 赞同：1
> 
> 时间：2012-06-10T19:31:25.300
> 
> 标签：asp.net-mvc-3, servicestack

我有一个工作的 ServiceStack 应用程序，它启动了我的 MVC 应用程序的一部分，其中包含我的 Jquery Mobile 网站。

服务正在增长，我正在考虑将 ServiceStack 代码移动到单独的应用程序，但不确定是否应该在 Asp.net Web 应用程序或 MVC 应用程序中托管服务堆栈。

如果我选择一种方式或另一种方式，有什么好处吗？将来我需要为服务引入身份验证，这会是决定的一个因素吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-10T19:47:20.010

我会将它托管在一个普通的 ASP.NET 主机上，因为它是一个比 MVC 更准系统的 Web 主机，它增加了额外的（和不必要的）HTTP 模块和开销。

# ruby-on-rails - 当前页面？方法

> ID：10971699
> 
> 赞同：3
> 
> 时间：2012-06-10T19:31:54.550
> 
> 标签：ruby-on-rails, ruby-on-rails-3

有没有办法在 current_page?() 方法中插入控制器的所有页面？

```
<%if (!current_page?(:controller=>'users'))%>
    ...
<%end> 
```

如果我不插入 :action 属性不起作用！

如果我想为特定操作制作控件，我必须插入属性 :action。

我会考虑名为 users 的控制器的所有页面。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-10T19:35:55.643

您可以直接检查控制器名称，而不是使用`current_page`：

```
<% if controller.controller_name != "users" %>
...
<% end %> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-10T19:43:34.013

`params[:controller] != 'users'`

# java - 排列 - 需要帮助设计一个不需要未使用值的更好块

> ID：10971701
> 
> 赞同：0
> 
> 时间：2012-06-10T19:31:57.017
> 
> 标签：java, algorithm

我需要帮助通过预先丢弃不需要的排列来减小排列（重要的、可重复的）大小。

*   当前排列从提供的值中获取全局最小值和最大值。然而，一些排列随后被丢弃，因为它们不在所需的范围内。

*   这个想法是例如有3个需要排列的数字。例如：1-3、8-10 和 5-15。当前代码将创建 1-15 的排列，即使稍后将丢弃 4-7 的值。

不幸的是，在某些情况下，不可能在 Java 中创建一个足够大的数组来包含排列结果。

在计算排列之前将这种排列更改为仅包含必要值的任何帮助将不胜感激。

**置换核心：**

```
public class PermutationCore {
    private String[] a;
    private int n;

    public PermutationCore(String[] arrayOfPossibilities, int lengthOfPermutation) {
        this.a = arrayOfPossibilities;
        this.n = lengthOfPermutation;
    }

    public String[][] getVariations() {
        int l = a.length;
        int permutations = (int) Math.pow(l, n);

        Co.println("Permutation array size: " + permutations);

        String[][] table = new String[permutations][n];

        for (int x = 0; x < n; x++) {
            int t2 = (int) Math.pow(l, x);
            for (int p1 = 0; p1 < permutations;) {
                for (int al = 0; al < l; al++) {
                    for (int p2 = 0; p2 < t2; p2++) {
                        table[p1][x] = a[al];
                        p1++;
                    }
                }
            }
        }

        return table;
    }
} 
```

**排列**

```
public class Permutation {
    private ArrayList<Iteration> listOfIteration = new ArrayList<Iteration>();
    private boolean prepared;
    private PermutationCore permutationCore;
    private int min = Integer.MAX_VALUE;
    private int max = Integer.MIN_VALUE;
    private int count = 0;
    private String[][] arrayOfStringResults;

    public void addIteration(Iteration iteration){
        if (prepared){throw new IllegalStateException("Permuation is already prepared. Create a new instance to add new items");}
        this.listOfIteration.add(iteration);
    }

    public void prepare(){
        String[] arrayOfString;

        for (Iteration iteration : listOfIteration){
            if (iteration.end > max){max = iteration.end;}
            if (iteration.start < min){min = iteration.start;}
        }

        arrayOfString = new String[max-min+1];

        for (int i=0; i<arrayOfString.length; i++){
            arrayOfString[i] = String.valueOf(min+i);
        }

        permutationCore = new PermutationCore(arrayOfString, listOfIteration.size());

        prepared = true;

//      Co.println("Min/max: " + min + "," + max);

        arrayOfStringResults = permutationCore.getVariations();
//      ArrayTools.sort2DStringArray(arrayOfStringResults);

    }

    public boolean iterate(){
        LABEL_ITERATE_LOOP: {
            int i=0;

            if (count == arrayOfStringResults.length){
                return false;
            }

            for (Iteration iteration : listOfIteration){
                int currentValue = Integer.valueOf(arrayOfStringResults[count][i]);

                if (currentValue > iteration.end || currentValue < iteration.start){
                    //Co.println("Failed at: " + iteration.start + "," + iteration.end + " / " + currentValue);
                    count++;
                    break LABEL_ITERATE_LOOP;
                }

                iteration.current = currentValue;
                i++;
            }

            count++;
        }

        return true;
    }

    public Iteration getIteration(Object request) {
        for (Iteration iteration : listOfIteration){
            if (iteration.request == request){
                return iteration;
            }
        }

        return null;
    }

    public ArrayList<Iteration> getListOfIterations(){
        return listOfIteration;
    }

    public static class Iteration{
        private int start;
        private int end;
        private int current;
        private Object request;

        public Iteration(int start, int end, Object request){
            this.start = start;
            this.end = end;
            this.request = request;
        }

        public double getCurrentValue(){
            return this.current;
        }

        public Object getRequest(){
            return this.request;
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-10T19:38:33.300

您的问题是将 k 数字从 0 排列到 (n-1)，并打印 a[n] 而不是 n。:) 这就是你可以做的，以减少迭代。

另一种方法是使用 0 到 n!-1 之间的数字并找出当前排列是什么，然后打印出来。虽然它是一种较慢的方法，但以这种格式恢复操作更快 - 我们可以快速打印第 k 个排列。

假设数字是：1、2、3、4。总共有 4 个！排列 = 24，可能。要打印第 15 个（从零开始计数）排列，我们这样做：

n = 4 a = 1 2 3 4 将 15 除以 (n-1)！

我们得到 15/6 = 2，提醒 = 3。

所以排列从 a[2] = 3 开始。

a = 1 2 4 接受提醒，除以 (n-2)！

我们得到 3/2 = 1，提醒 = 1。

所以排列现在是排列，a[1] = 3, 2

a = 1 4 取提醒，除以 (n-1)！

我们得到 1/1 = 1，提醒 = 0

所以排列现在是排列，a[1] = 3, 2, 4。

直到提醒为零。打印 a[0]= 3, 2, 4, 1。

^ 这是生成任何序列的第 k 个排列的最有效方法。

您可以使用 BigInteger 数学非常有效地执行此方法。

# .net - 删除 WPF 富文本框中的隐藏字符

> ID：10971702
> 
> 赞同：0
> 
> 时间：2012-06-10T19:32:06.560
> 
> 标签：.net, wpf, vb.net, twitter, flowdocument

（由于这个问题没有得到任何答案，我已经重新措辞了）

在我的应用程序中，我有一个包含富文本框的对话框，该框充满了从 Twitter 收集的推文。使用推文实体，我将推文格式化为具有指向推文、提及和主题标签中链接的内联超链接。但是，超链接永远不会正确定位；总是太快太远了 2 或 3 个字符。

这是我用来在富文本框中设置文本的代码：

```
TweetText.Document.ContentEnd.InsertTextInRun(Status.Text)
Dim FlowDocument As FlowDocument = TweetText.Document
If LinkEntity.Count > 0 Then
            For Each Entity As Entities.TwitterUrlEntity In LinkEntity
                Dim Start As TextPointer = FlowDocument.ContentStart
                Dim StartPosition As TextPointer
                Dim EndPosition As TextPointer
                If Entity.StartIndex = 0 Then
                    StartPosition = Start.GetPositionAtOffset(Entity.StartIndex)
                Else
                    StartPosition = Start.GetPositionAtOffset(Entity.StartIndex)
                End If
                EndPosition = Start.GetPositionAtOffset(Entity.StartIndex + Entity.DisplayUrl.Length, LogicalDirection.Backward)
                Dim h As New Hyperlink(StartPosition, EndPosition)
                AddHandler h.MouseLeftButtonDown, AddressOf Hyperclick_Link
                h.NavigateUri = New Uri(Entity.Url)
                h.Cursor = Cursors.Hand
            Next
        End If
'I have the other entities here, they have very similar code'
TweetText.Document = FlowDocument 
```

这是我的富文本框 XAML：

```
<RichTextBox Name="TweetText" Margin="5" FontSize="14" BorderThickness="0" IsReadOnly="True" /> 
```

这是输出：

![问题！](../Images/9f331c61fa3eff66ccdfe0339f66ac8d.png)

推文实体对每个实体都有适当的索引，但我确实认为富文本框具有导致此偏移的隐藏字符。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-30T09:19:42.253

有趣的是没有人回答这个问题，但我有点明白，因为`RichTextBoxes`使用起来非常讨厌。我目前也有一个问题。

所以，你是对的，`RichTextBox`确实使用了隐藏字符，但你不应该尝试删除它们，因为它们有助于它以它的方式工作。索引时只需要计算字符符号，而不需要计算其他不可见的标签和符号。

我对 VB 不太擅长，但你应该能够使用 for 循环并仅在`YourTextPointer.GetPointerContext(LogicalDirection.Forward)`is时增加索引`TextPointerContext.Text`，否则，你只需跳过它。

这样，您的索引将与文本中的索引匹配。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2021-06-01T21:03:58.687

*近10年后..*

好的，我会做的：D

出于我的目的，我所有的文本总是在一个段落中，所以使用这段代码我只检查它的内容（当然可以修改它以检查所有段落）：

```
public static string GetText(this RichTextBox richTextBox)
{
    string textWithoutHiddenSymbols = "";

    Paragraph p = (Paragraph)richTextBox.Document.Blocks.FirstBlock;

    if (p != null)
    {
        InlineCollection inlines = p.Inlines;

        foreach (var inline in inlines)
        {
            textWithoutHiddenSymbols += (inline as Run)?.Text;
        }
    }

    return textWithoutHiddenSymbols;
} 
```

# iphone - UITabBarItem 外观 -setTitleTextAttributes 不断记录“状态 = 1 被解释为 UIControlStateHighlighted”？

> ID：10971705
> 
> 赞同：20
> 
> 时间：2012-06-10T19:32:32.457
> 
> 标签：iphone, ios, ios5

在我的 AppDelegate 实现文件中，我使用这些代码行来设置 tabBarItems 的自定义字体和颜色：

```
[[UITabBarItem appearance] setTitleTextAttributes:
[NSDictionary dictionaryWithObjectsAndKeys:
[UIColor grayColor], UITextAttributeTextColor, 
[UIFont fontWithName:@"Arial" size:0.0], UITextAttributeFont, 
nil] forState:UIControlStateNormal];

[[UITabBarItem appearance] setTitleTextAttributes:
[NSDictionary dictionaryWithObjectsAndKeys:
[UIColor whiteColor], UITextAttributeTextColor, 
[UIFont fontWithName:@"Arial" size:0.0], UITextAttributeFont, 
nil] forState:UIControlStateHighlighted]; 
```

由于某些（未知）原因，会记录以下消息，每个 tabBarItem 一个：

```
button text attributes only respected for UIControlStateNormal, UIControlStateHighlighted and UIControlStateDisabled. state = 1 is interpreted as UIControlStateHighlighted. 
```

使用标准搜索引擎找不到任何东西，所以我寻求您的帮助。我做错了什么以及如何解决这个问题？

提前感谢您的任何建议。

* * *

## 回答 #1

> 赞同：51
> 
> 时间：2012-11-21T07:42:37.653

只需将“UIControlStateHighlighted”更改为“UIControlStateSelected”。希望这可以帮助！

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-07-16T12:05:01.767

我遇到了同样的问题，因为我正在使用：

```
[[UIBarButtonItem appearance] setTitleTextAttributes:
 [NSDictionary dictionaryWithObjectsAndKeys:
  [UIColor whiteColor], UITextAttributeTextColor, nil] forState:UIControlStateSelected]; 
```

我将其更改为：

```
[[UIBarButtonItem appearance] setTitleTextAttributes:
 [NSDictionary dictionaryWithObjectsAndKeys:
  [UIColor whiteColor], UITextAttributeTextColor, nil] forState:UIControlStateHighlighted]; 
```

......问题就消失了。希望这可以帮助！

# python - 查找连续组合

> ID：10971706
> 
> 赞同：5
> 
> 时间：2012-06-10T19:32:52.287
> 
> 标签：python, combinations

> **可能重复：**
> [Python 中的滚动或滑动窗口迭代器](https://stackoverflow.com/questions/6822725/rolling-or-sliding-window-iterator-in-python)

我是编程新手，正在学习 Python。我正在寻找一种有效/pythonic 的方法来解决问题。

我想要一个返回包含父可迭代组合的可迭代列表的函数，只要组合中的元素与原始父可迭代出现相同的连续顺序即可。

如果将这个概念描述为“连续”的正确词通常意味着“重复相同的元素”，我不确定“连续”是否正确。例如 [1,1,1]、'aaa' 等...

我的意思是给定列表 [1,2,3,4,5]：

[1,2,3] 是连续的，但 [1,2,4] 不是。（有这个词吗？）

这是`consecutive_combinations()`我创建的函数和预期的行为：

```
def consecutive_combinations(iterable, consec):
    begin = 0
    chunks = len(iterable) + 1 - consec
    return [iterable[x + begin: x + consec] for x in xrange(chunks)]

def test():
    t = (1,2,3,4,5)
    s = "The quick brown fox jumps over the lazy dog."
    CC = consecutive_combinations
    assert CC(t, 2) == [(1, 2), (2, 3), (3, 4), (4, 5)]
    assert CC(t, 3) == [(1, 2, 3), (2, 3, 4), (3, 4, 5)]
    assert CC(t, 4) == [(1, 2, 3, 4), (2, 3, 4, 5)]
    assert CC(t, 5) == [(1, 2, 3, 4, 5)]
    assert CC(s, 3) == ['The', 'he ', 'e q', ' qu', 'qui', 'uic', 'ick', 'ck ', 'k b', ' br', 'bro', 'row', 'own', 'wn ', 'n f', ' fo', 'fox', 'ox ', 'x j', '  ju', 'jum', 'ump', 'mps', 'ps ', 's o', ' ov', 'ove', 'ver', 'er ', 'r t', '    th', 'the', 'he ', 'e l', ' la', 'laz', 'azy', 'zy ', 'y d', ' do', 'dog', 'og. ']
    assert CC('', 3) == []
    print "All tests passed!"

test() 
```

这是一个有效的解决方案吗？itertools 或其他一些预先构建的模块中是否有可以做这种事情的东西？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-10T19:40:28.973

我喜欢务实的`zip`方法：

```
n = 3
s = "The quick brown fox jumps over the lazy dog."
zip(*(s[i:] for i in xrange(n))) 
```

它不是超高效的，它只适用于序列，但它通常足以完成这项工作。

相应的`itertools`解决方案是对上述内容的非常简单的转换：

```
from itertools import izip, islice, tee

def slices(iterable, n):
    return izip(*(islice(it, i, None) for i, it in enumerate(tee(iterable, n)))) 
```

这么多`i`...

尽管如此，这应该适用于任何可迭代的（但对于像列表或字符串这样的普通序列可能会更慢）。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-10T19:43:48.293

你的解决方案很好。但是，您可以将其缩短一点。例如：

```
def subsequences(iterable, length):
    return [iterable[i: i + length] for i in xrange(len(iterable) - length + 1)] 
```

# ios - 适用于 iOS 的 Amazon AWS S3 开发工具包断开连接（错误 -1005）

> ID：10971707
> 
> 赞同：3
> 
> 时间：2012-06-10T19:33:01.893
> 
> 标签：ios, sdk, amazon-s3, amazon-web-services, region

运行 AWSiOSDemoTVM 项目时，异步 S3 演示代码将开始上传数据，但连接将在几秒钟后断开。

> AWSiOSDemoTVM：didFailWithError：错误域=NSURLErrorDomain Code=-1005“网络连接丢失。”UserInfo=0xb54e850 {NSErrorFailingURLStringKey=https://BUCKETNAME.s3.amazonaws.com/asyncDemoKey, NSErrorFailingURLKey=https://BUCKETNAME.s3。 amazonaws.com/asyncDemoKey, NSLocalizedDescription=网络连接丢失。, NSUnderlyingError=0xb5527f0 "网络连接丢失。"}

不使用异步委托的小型上传将成功。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-10T19:36:46.967

我没有为存储桶设置正确的端点。默认端点仅适用于美国存储桶。

在 AmazonClientManager.m 中，为您的存储桶区域添加正确的终端节点。

```
 s3  = [[AmazonS3Client alloc] initWithCredentials:credentials];
    s3.endpoint = @"https://s3-eu-west-1.amazonaws.com"; 
```

可以在[此处找到 S3 和其他 AWS 服务的区域端点列表](http://docs.amazonwebservices.com/general/latest/gr/rande.html)

# php - 在 Facebook 页面墙上发布为页面

> ID：10971721
> 
> 赞同：1
> 
> 时间：2012-06-10T19:35:06.643
> 
> 标签：php, facebook, post

我已经阅读了很多关于这个主题的其他主题，但我没有找到有用的东西。

**我想做的事**

当我在我的网站上添加文章时，我想在 Twitter 和 Facebook 上发布更新。它适用于 Twitter，但我对 Facebook 有疑问。

我下载了使用 OAuth 的 facebook.php。

**我的问题**

当我发布一个简单的文本时，它可以正常工作，它会根据需要显示为页面发布的内容。但是，当我想发布带有缩略图、链接、标题和描述的文本时，它会像我的个人帐户在我的页面墙上发布此更新一样发布。

这是我的简单文本代码（我在上面请求了 accesss_token）：

```
$post = array('access_token' => $token, 'message' => 'My message');
try{  
$res = $facebook->api('/mypage/feed','POST',$post);  
print_r($res);  

} catch (Exception $e){  

    echo $e->getMessage();  
} 
```

这是错误的代码：

```
$post = array('access_token' => $token,
                'message' => 'My message',
                'picture' => 'http://www.website.com/picture.jpg',
                'link' => 'http://www.website.com',
                'caption' => 'test caption',
                'description' => 'test description', 
                'from' => array('name' =>'Page name', 'id' => 'page id'), 
                );  

try{  
$res = $facebook->api('/mypage/feed','POST',$post);  
print_r($res);  

} catch (Exception $e){  

    echo $e->getMessage();  
} 
```

Facebook API 没有很好的文档记录，但我到处搜索不问你这个问题.. 但我没有找到任何解决方案。

非常感谢你帮助我。

本杰明

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-10T19:48:56.783

希望你有以下权限（publis_stream、manage_pages、offline_access）和access_token，试试下面的代码

```
 <?php
            /**
             * Edit the Page ID you are targeting
             * And the message for your fans!
             */
            $page_id = 'PAGE_ID';
            $message = "I'm a Page!";

            /**
             * This code is just a snippet of the example.php script
             * from the PHP-SDK <http://github.com/facebook/php-sdk/blob/master/examples/example.php>
             */
            require '../src/facebook.php';

            // Create our Application instance (replace this with your appId and secret).
            $facebook = new Facebook(array(
              'appId'  => 'app_id',
              'secret' => 'app_secret',
            ));

            // Get User ID
            // $user supposed to be page admin
            $user = $facebook->getUser();

            if ($user) {
              try {
                $page_info = $facebook->api("/$page_id?fields=access_token");
                if( !empty($page_info['access_token']) ) {
                    $args = array(
                        'access_token'  => $page_info['access_token'],
                        'message'       => $message ,
                        'name'         => 'My Wall Post Header/Title Here',
                        'caption'      => 'Small caption here',
                        'link'         => 'http://www.mywebsite.org',
                        'description'  => 'Wall Post Details Here',
                        'picture'      => "http://www.mywebsite.org/images/logo.gif",           
                    );
                    $post_id = $facebook->api("/$page_id/feed","post",$args);
                }
              } catch (FacebookApiException $e) {
                error_log($e);
                $user = null;
              }
            }

            // Login or logout url will be needed depending on current user state.
            if ($user) {
              $logoutUrl = $facebook->getLogoutUrl();
            } else {
              $loginUrl = $facebook->getLoginUrl(array('scope'=>'manage_pages,publish_stream'));
            }
            ?> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-10T19:38:06.863

您需要`og:tags`在您的页面上实现一些 Open Graph，以便 Facebook 知道要采用哪些图像、描述和标题。

[https://developers.facebook.com/docs/opengraphprotocol/](https://developers.facebook.com/docs/opengraphprotocol/)

它们看起来像这样 -

```
<meta property="og:title" content="The Rock"/>
<meta property="og:type" content="movie"/>
<meta property="og:url" content="http://www.imdb.com/title/tt0117500/"/>
<meta property="og:image" content="http://ia.media-imdb.com/rock.jpg"/>
<meta property="og:site_name" content="IMDb"/>
<meta property="fb:admins" content="USER_ID"/>
<meta property="og:description"
      content="A group of U.S. Marines, under command of
               a renegade general, take over Alcatraz and
               threaten San Francisco Bay with biological
               weapons."/> 
```

一旦您实现了所需的元标记，您就可以使用方便的[Facebook URL 调试器](https://developers.facebook.com/tools/debug)来测试您的工作。它会告诉您是否存在问题，确切的问题以及如何解决这些问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-10T20:10:28.103

这可能不会是这样，但请确保您没有使用解析为内部域名的图片 URL（即通过更新本地*主机*文件）。经过大量测试（尽管它使用 JS 中的 FB.UI 调用）后，我发现如果域名指向内部，*即使它也可以在外部*使用（这是让我感到震惊的一点），您可能会出错。这似乎只对 Picture 论点很重要。

祝你好运！

# java - Android 聊天在带有 redir 的模拟器上工作

> ID：10971723
> 
> 赞同：2
> 
> 时间：2012-06-10T19:35:15.123
> 
> 标签：java, android, sockets, android-emulator

我已经阅读了大量关于使用 telnet 连接两个模拟器的相同建议。例如这个：[Connecting 2 Emulator instances In Android](https://stackoverflow.com/questions/4683854/connecting-2-emulator-instances-in-android/4738690#4738690)

我已经按照所说的做了一切，但没有任何效果。我在模拟器 5554 上有服务器应用程序，在模拟器 5556 上有客户端应用程序。他们使用端口 6000 服务器应用程序和 5000 客户端应用程序。我想要的是在这两个模拟器打开时进行交流 - 以两种方式。

一开始服务器应用程序显示她的IP，并且在客户端应用程序用户必须写这个IP。那是整个配置。

正如在提到的帖子中所说，我已经写过`redir add tcp:5000:6000`但没有任何效果。此外，当我写`redir add tcp:6000:5000`什么也没发生。这些应用程序不会互相听到。但是，如果服务器在其他设备上，则一切正常。

也许这是一个愚蠢的问题，但有人可以指导我解决这个问题，因为我不知道我做错了什么。

# .net - 如何提高 XML 读写性能

> ID：10971725
> 
> 赞同：5
> 
> 时间：2012-06-10T19:35:30.557
> 
> 标签：.net, xml, performance

我有两个独立运行的 .NET 应用程序（可以按任何顺序启动，或者可能只运行一个），它们使用 XML 作为数据存储。所以这两个应用程序都可以读取和写入 XML 文件。为了保持数据更新，我每次在读写操作之前从磁盘加载 XML 文件。我正在使用 XPath 查询来查询特定节点。现在在这种方法中观察到了性能问题，因为每秒都有来自一个应用程序的 XML 读写请求（使用轮询，并且无法更改）我不确定究竟是什么导致了性能下降，但我相信它是连续的读写。

我尝试使用 .NET 4.0 中的内存映射文件，但我被限制使用 .NET 3.5 而不是任何更高版本。

谁能帮我解决这个问题？

注意：XML 节点有一些共同的属性、不同数量的属性和一个用于 XPath 查询的 ID。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-10T19:50:42.567

**如果**您确定性能影响来自 I/O，并且您无法更改这两个应用程序，那么您确实可以做一些事情。

对现有应用程序代码进行零更改的第一个解决方案：使用[RAM 磁盘](http://en.wikipedia.org/wiki/RAM_disk)。如果他们将该文件用作*共享内存*，则无需任何其他更改即可执行此操作。如果数据是持久的，您可能需要在每次写入后执行后台复制到另一个媒体。性能不如真正的共享内存，但至少您不必等待缓慢的 I/O 操作。

第二种解决方案，仅在必须读取数据的应用程序中进行更改：通常 XML 文件的解析非常慢（特别是如果您正在使用`XmlDocument`并且文件不是很少）。在这种情况下，使用`XmlReader`，您必须使您的读取代码更加复杂并忘记 XPath 查询，但它的性能将比它好很多倍`XmlDocument`，并且不会减慢增加文件大小的速度。

小（或不那么小）更新：如果可以更改第二个应用程序（我猜是读取文件的那个）的代码，您可以做一些事情来提高其性能。首先不要每次都读取文件。检查其时间戳，`FileSystemWatcher`为该文件或其他任何内容注册一个，但不要每次都读取/解析文件。当您这样做时，您可以向前迈出一步：仅在文件更改时读取/解析文件，准备您`XmlDocument`的后台（另一个线程）并使其可用于轮询请求。如果请求是*间隔*的，他们甚至可能会看到非常快的响应时间（但`XmlDocument`对典型文件的 XPath 查询性能进行了概要分析）。

**编辑**：[在这里](http://support.microsoft.com/kb/257405)您可以找到 Microsoft 提供的 RAM 磁盘。这非常简单和天真，但通常你/我们不需要更多。此外，它是 DDK 上的一个示例，因此您也将获得源代码（在这种情况下......只是为了好玩）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-10T19:47:48.620

XML 不是为繁重的查询而设计的。如果您需要这样做，请考虑使用数据库。[SQL Server Compact](http://msdn.microsoft.com/en-us/data/ff687142.aspx)可能是一个不错的选择。如果您需要坚持使用 XML 并且需要处理大文件并且需要性能，请考虑使用[XmlReader](http://msdn.microsoft.com/en-us/library/system.xml.xmlreader.aspx) / [XmlWriter](http://msdn.microsoft.com/en-us/library/system.xml.xmlwriter.aspx)，它们不会将整个文件加载到内存中并且速度非常快。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-10T19:52:46.393

无需多次读取 XML 文件，只需第一次读取并获取文件的最后修改时间。

当您需要知道数据是否是最新的时，只需检查文件的修改时间，如果文件确实发生了变化，请再次读取文件。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-06-10T20:00:43.450

不要轮询文件。读取一次并将其保存在内存中，然后*仅*`FileSystemWatcher`在更改时重新加载它。

 *或者，读取修改时间戳并仅在时间戳更改时重新加载文件。

* * *

此外，在读取文件时，请确保将其锁定为非排他性，以免阻止其他读取器。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-06-10T19:47:45.597

尝试以独占方式打开文件。另一个应用程序可能会崩溃，但如果它没有崩溃，您肯定会知道一件事：它不能在一个周期内对共享文件调用太多 I/O 负载，因为它的所有访问尝试都会立即失败。

希望它会等待一秒钟然后重试，这对你来说应该很有效。

```
using (Stream iStream = File.Open("myfile.xml",
            FileMode.Open, FileAccess.ReadWrite, FileShare.None))
{
    ...
} 
```*

# dynamics-crm - 您尝试导入的实体与数据库中存在的实体不同，即使它具有相同的名称

> ID：10971726
> 
> 赞同：2
> 
> 时间：2012-06-10T19:35:33.000
> 
> 标签：dynamics-crm, dynamics-crm-4

尝试为特定实体导入自定义项时，我收到一条错误消息，提示我无法为自定义实体重用系统查询。
标题中的错误出现在详细的 CRM 跟踪中： `Could not import a Saved Query {C9771189-0CB3-E111-A93D-00505699001D} for ObjectTypeCode 10010 because this is a system Saved Query. The Entity you are trying to import is not the same as the one existing in the database even though it has the same name.`

查询的 ID 是*源自*定义中的 ID。

源实体和目标实体似乎都具有完全相同的查询，具有相同的名称。

谷歌在这方面无法提供太多信息。
任何人都可以阐明这个问题吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-11T11:43:25.813

您的源环境是否从 v3.0 升级？如果是这样，您是否将[本知识库文章](http://support.microsoft.com/kb/948043/en-gb)中提到的修补程序（或最新汇总）应用于*两台*服务器？

# grails - 如何从 grails 控制器触发 gradle 构建？

> ID：10971727
> 
> 赞同：1
> 
> 时间：2012-06-10T19:35:35.700
> 
> 标签：grails, service, build, controller, gradle

**如何从 Grails 控制器构建外部 Gradle 项目？**圣杯 2.0.0

**更新**：我向 Adam Murdoch（gradle 的联合创始人）发送了关于这个问题的电子邮件：[http ://forums.gradle.org/gradle/topics/how_can_i_use_the_gradle_tooling_api_from_a_grails_controller](http://forums.gradle.org/gradle/topics/how_can_i_use_the_gradle_tooling_api_from_a_grails_controller)

虽然，我对这个问题没有直接的答案，但我确实有一个解决方案。任何有关此主题的进一步见解将不胜感激。

* * *

我使用了 Luke Daley 提供的 gradle 构建脚本。运行 build.gradle，它输出了 gradle tooling api 所需的 4 个 jar 文件。然后我将它们放入我的 Grails lib 文件夹中。

然后，我将以下代码写入名为 consoleController.groovy 的 grails 控制器中。

```
import org.gradle.tooling.BuildLauncher
import org.gradle.tooling.GradleConnector
import org.gradle.tooling.ProjectConnection

class consoleController {
   def run = {
       println "new run -------------------------------------"
       println "Building file..."

       String projectDir = "C:\\Documents and Settings\\Administrator\\Desktop\\demo"
       GradleConnector connector = GradleConnector.newConnector()
       connector.forProjectDirectory(new File(projectDir))

       ProjectConnection connection = connector.connect()
       try {
           BuildLauncher launcher = connection.newBuild()
           launcher.forTasks("hello")
           launcher.run()
       } finally {
           connection.close()
       }
    }
 } 
```

我还创建了一个名为“demo”的目录 - 带有一个 build.gradle 文件。

```
task hello {
    println "hello world"
} 
```

我得到以下堆栈跟踪 - 错误：请看 - [http://forums.gradle.org/gradle/topics/how_can_i_use_the_gradle_tooling_api_from_a_grails_controller](http://forums.gradle.org/gradle/topics/how_can_i_use_the_gradle_tooling_api_from_a_grails_controller)

StackOverflow.com 的堆栈跟踪太长。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-17T19:24:27.867

您可以访问标题为[http://forums.gradle.org/gradle/topics/how_can_i_use_the_gradle_tooling_api_from_a_grails_controller](http://forums.gradle.org/gradle/topics/how_can_i_use_the_gradle_tooling_api_from_a_grails_controller)的帖子 ，其中提供了设置用于嵌入 grails 工具 API 的最小 grails 项目的说明，并允许用户从 grails 控制器触发构建.

Grails 2.0.0 应该完全支持开箱即用的 Gradle 工具 API，但是 Spring Loaded 一种支持热重载类的技术阻碍了 gradle 工具 API，并引发错误： *java.lang.ClassNotFoundException: com .springsource.loaded.ri.ReflectiveInterceptor* - 尝试构建时。

使用 -noreloading 标志运行 grails 应用程序可以解决问题。

**> grails -noreloading 运行应用程序**

除了 Grails 嵌入之外，仍然允许从 Grails 控制器触发构建的另一种方法是使用支持 REST 的持续集成服务器，例如 Jenkins（TeamCity、Bamboo、CruiseControl 等）；虽然这不是这个问题的直接解决方案，但这些企业应用程序提供了 Gradle 嵌入的替代方案，并且可能更适合企业产品。

干杯，TFM

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-10T22:42:37.197

你会想从阅读开始：

[http://gradle.org/docs/current/userguide/embedding.html](http://gradle.org/docs/current/userguide/embedding.html)

这是工具 api 的 java 连接器：

[http://gradle.org/docs/current/javadoc/index.html?org/gradle/tooling/GradleConnector.html](http://gradle.org/docs/current/javadoc/index.html?org/gradle/tooling/GradleConnector.html)

# iphone - 如何在 iPhone 上跟踪多点触控事件？

> ID：10971730
> 
> 赞同：1
> 
> 时间：2012-06-10T19:35:56.783
> 
> 标签：iphone, touch

我想跟踪从`touchesBegan`一直`touchesMoved`到`touchesEnded`. 我正在获取单次触摸事件的坐标，但我想知道哪个*触摸事件*对应于哪个*触摸事件序列*。

例如，如果我在屏幕上移动食指，然后用食指触摸屏幕，然后移开食指 - 我想用红色显示食指的坐标，用红色显示食指的坐标蓝色。

这可能吗？如果是，我如何确定哪些事件应该是“红色”，哪些事件应该是“蓝色”？

这是我的代码：

```
-(void)touchesBegan:(NSSet *)touches withEvent:(UIEvent *)event {
    [self handleTouches:[event allTouches]];
}
-(void)touchesMoved:(NSSet *)touches withEvent:(UIEvent *)event {
    [self handleTouches:[event allTouches]];
}
-(void)touchesEnded:(NSSet *)touches withEvent:(UIEvent *)event {
    [self handleTouches:[event allTouches]];
}
-(void)touchesCancelled:(NSSet *)touches withEvent:(UIEvent *)event {
    [self handleTouches:[event allTouches]];
}

- (BOOL)handleTouches: (NSSet*)touches {
    for (UITouch* touch in touches) {
        // ...
    }
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-10T20:11:14.827

触摸对象在事件中是一致的，因此如果您想跟踪红色和蓝色触摸，您将为每个触摸声明一个 iVar，当触摸开始时，您将您想要的任何触摸分配给该 ivar，然后在您的循环，您将检查触摸是否与您存储的指针相同。

```
UITouch *red;
UITouch *blue;

-(void)touchesBegan:(NSSet *)touches withEvent:(UIEvent *)event {
    for (UITouch* touch in touches) {
        if(something) red = touch;
        else blue = touch;
    }
}
-(void)touchesMoved:(NSSet *)touches withEvent:(UIEvent *)event {
    [self handleTouches:touches];
}
-(void)touchesEnded:(NSSet *)touches withEvent:(UIEvent *)event {
    for (UITouch* touch in touches) {
        if(red == touch) red = nil;
        if(blue == touch) blue = nil;
    }
}
-(void)touchesCancelled:(NSSet *)touches withEvent:(UIEvent *)event {
    for (UITouch* touch in touches) {
        if(red == touch) red = nil;
        if(blue == touch) blue = nil;
    }
}

- (BOOL)handleTouches: (NSSet*)touches {
    for (UITouch* touch in touches) {
        if(red == touch) //Do something
        if(blue == touch) //Do something else
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-04-16T08:30:05.477

对于那些正在寻找跟踪多次触摸的通用解决方案的人，请参阅我的[答案](https://stackoverflow.com/a/43435058/6109712)。

基本概念是在调用时将每个 UITouch ID 存储在一个数组`touchesBegan::`中，然后将每个 ID 与屏幕上的触摸`touchesMoved::`事件进行比较。这样，每个手指都可以与单个对象配对，并在平移时被跟踪。

通过这样做，每个跟踪触摸的对象都可以显示不同的颜色，然后将其显示在屏幕上以识别不同的手指。

# python - Python 对象属性是另一个对象，不会使用 pickle.load() 加载。我究竟做错了什么？

> ID：10971731
> 
> 赞同：2
> 
> 时间：2012-06-10T19:35:57.157
> 
> 标签：python, object, pickle

我有一个对象：

```
class X():
    def __init__(self, a, b, c):
        self.a = a
        self.b = b
        self.c = c 
```

其属性 c 是列表对象（不同种类）的一个：

```
class Y():
    def __init__(self, x, y):
        self.x = x
        self.y = y 
```

我腌制如下：

```
import pickle
pickle.dump(instance_of_class_X,open(dir, "wb")) 
```

我加载如下：

```
import pickle
from some_library import X, Y # I import the two classes involved
pickle.load(open(dir,"rb")) 
```

我收到以下错误：

> AttributeError：“模块”对象没有属性“Y”

不知道该怎么做，任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-10T19:41:36.690

您可能会因为需要`pickle`通过与最初使用的完全限定名称相同的名称来使用该类。这取决于您最初创建对象时 X 和 Y 所在的命名空间。请参阅[此答案](https://stackoverflow.com/questions/3363281/attributeerror-module-object-has-no-attribute-when-using-cpickle)和[此页面](http://stefaanlippens.net/pickleproblem)。

# ruby - 检查 Ruby 中是否存在 URL

> ID：10971737
> 
> 赞同：0
> 
> 时间：2012-06-10T19:36:54.237
> 
> 标签：ruby, url

> **可能重复：**
> [检查 Ruby 中是否存在 URL](https://stackoverflow.com/questions/5908017/check-if-url-exists-in-ruby)

是否可以使用 Ruby 检查 URL 是否存在？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-10T19:40:20.653

以前有人问过并回答过。

请在此处检查：[检查 Ruby 中是否存在 URL](https://stackoverflow.com/questions/5908017/check-if-url-exists-in-ruby)

我希望它有帮助

# javascript - event.pageX 在 Firefox 中不起作用，但在 Chrome 中起作用

> ID：10971738
> 
> 赞同：3
> 
> 时间：2012-06-10T19:36:55.257
> 
> 标签：javascript, firefox, event-handling, html5-canvas, dom-events

我遇到了我认为是一个简单的问题，但是在寻找解决方案大约一周后，我似乎无法找到其背后的原因。

基本上每次点击鼠标时我都会调用下面的函数，它在 Chrome 中运行良好，但在 Firefox 中`alert("This is not called")`永远不会被调用。

我知道问题出在两行代码中：

```
x = event.pageX - canvas.offsetLeft;
y = event.pageY - canvas.offsetTop; 
```

但似乎找不到什么问题。[Mozilla 的网站](https://developer.mozilla.org/en/DOM/event.pageX)说这`event.pageX`是一个合法的调用命令，[`canvas.offsetLeft`](https://developer.mozilla.org/en/DOM/element.offsetLeft).

但是该函数仍然没有被调用。我尝试在函数中而不是全局定义变量，但这不起作用，并尝试了其他一些替代方案，包括 jQuery 事件处理程序，但我想尽可能远离 jQuery，主要是因为我想了解这里发生了什么，而不仅仅是找到修补它的东西。

任何帮助将非常感激。

此外，有问题的网站是[http://cabbibo.com](http://cabbibo.com)。

编辑：如果它有帮助，Firefox 中的其余 Javascript 运行速度非常慢，这让我相信这可能是代码中其他地方的问题，例如，当侧面导航打开时，每次函数动画被调用，它需要更长的时间。

```
function q(event){  
    if(hasBeenCalled==0){       
        event = event || window.event;
        var canvas = document.getElementById('canvas');

        x = event.pageX - canvas.offsetLeft;
        y = event.pageY - canvas.offsetTop;

        alert("This Is Not Called");

        Changer2();
        stopDraw();
        moveToCenter();

        t = setInterval(rotateDrawRec, 1);
    }else{}
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-10T20:51:57.243

而不是这样做：

```
<canvas id="canvas" onclick="q()"  width="1000" height="900"></canvas>

function q(event){  
    if(hasBeenCalled==0){       
        event = event || window.event;
        var canvas = document.getElementById('canvas');

        x = event.pageX - canvas.offsetLeft;
        y = event.pageY - canvas.offsetTop;

        alert("This Is Not Called");

        Changer2();
        stopDraw();
        moveToCenter();

        t = setInterval(rotateDrawRec, 1);
    }else{}
} 
```

尝试这个：

```
<canvas id="canvas" width="1000" height="900"></canvas>

var canvasElem = document.getElementById('canvas');
canvasElem.addEventListener("click", q, false);

function q(event){  
    if(hasBeenCalled==0){       
        event = event || window.event;

        x = event.pageX - this.offsetLeft;
        y = event.pageY - this.offsetTop;

        alert("This Is Not Called");

        Changer2();
        stopDraw();
        moveToCenter();

        t = setInterval(rotateDrawRec, 1);
    }else{}
} 
```

**JSFiddle：http:**
[//jsfiddle.net/5Xs2S/3/](http://jsfiddle.net/5Xs2S/3/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-10T20:51:25.330

您的网站 (http://cabbibo.com/) 在第 61 行抛出“canvas3 is null”错误：

```
var ctx3 = canvas3.getContext("2d"); 
```

此错误会停止整个脚本的执行，因此可以理解的是，警报`q()`也不会被调用。

# css - CSS 定位 DIV 使其流畅且响应迅速

> ID：10971743
> 
> 赞同：1
> 
> 时间：2012-06-10T19:37:19.850
> 
> 标签：css, html, position, responsive-design

我在使用 CSS 正确定位 DIV 时遇到问题。任何帮助将不胜感激！

**问题：** [http](http://teamcoding.ca/leisure/specialevent/) ://teamcoding.ca/leisure/specialevent/在网站上，我希望“事件” div 以响应方式堆叠在每个顶部，无论高度如何，就像使用此网站完成的那样：[http://themify。 me/demo/#theme=grido](http://themify.me/demo/#theme=grido)我的网站呈现方式，具有最高高度的 DIV 将所有其他 DIV 向下推。例如，如果将其扩展为三列，则 div #5 应低于 div #1。

**JS 小提琴： http:** [//jsfiddle.net/QQFpD/4/](http://jsfiddle.net/QQFpD/4/)这是我的代码。我认为将其发布在 JsFiddle 上比在 msg 框中更容易。（如果我也应该在这里发布我的代码，请告诉我。）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-10T19:55:00.370

这是花车的本质。示例页面（themify）也混淆了元素（浮动的性质），但能够以某种方式缩小差距。仔细观察，我们可以看到浏览器和窗口宽度调整之间存在一些动态相互作用，因为 DOM 更新为新的绝对位置，顶部值。您的解决方案必须在 jQuery 中，而不是在静态 CSS 中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-10T21:08:50.360

您的问题正如在浮动的性质上面指出的那样。您需要重新考虑如何根据列来定位事件。处理这个问题并使用浮动保持布局流畅的一个好方法是创建一个这样的网格，唯一的缺点是一些额外的非语义代码：

```
/* __row
 * A row of columns, we define total page width here */
.row        {width:960px; height:100%; margin: 0 auto; position:relative;}

/* __grid 
 * Master Grid Layout elements */

.col1, .col2, .col3, .col4, .col5, .col6 {
    position:relative;
    height:100%;
    float:left;
    margin-left: 2%;
} 
```

使用百分比可以让我们改变整体宽度`.row`并扩展我们的列以适应。

```
.col1       {width: 15%;}
.col2       {width: 32%;}
.col3       {width: 49%;}
.col4       {width: 66%;}
.col5       {width: 83%;}
.col6       {width: 100%; margin-left:0;}
.colFirst   {margin-left:0;}
.colClear   {clear:both;} 
```

使用它来创建一个 3 列的流体布局：

```
<div class="row"> 
    <div class="col2 colFirst">
        <ul>
             <li>1st item</li>
             <li>2nd item</li>
        </ul>
    </div>
    <div class="col2">... second column div's / data</div>
    <div class="col2">... third column div's / data</div>
    <div class="colClear></div>
</div> 
```

这样，您的数据将全部落入列中，并在页面上无缝流动，提供您希望查看的确切方式，并且使用纯 CSS。

# maven - 在执行之前调用哪个方法来初始化 Maven 插件？

> ID：10971755
> 
> 赞同：1
> 
> 时间：2012-06-10T19:39:01.870
> 
> 标签：maven, initialization

我正在编写一个 Maven 插件，并希望在插件执行之前将作为参数**排除输入的一组字符串转换为模式。**我实现了接口**org.codehaus.plexus.personality.plexus.lifecycle.phase.Initializable**但是当我在**初始化**方法中访问时，参数**excludes**在**执行**方法中为 null 不为 null。在执行之前调用哪个方法来初始化 Maven 插件并可以访问参数？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-10T20:38:57.823

我能给出的最佳建议是深入[研究文档，该文档](http://maven.apache.org/guides/plugin/guide-java-plugin-development.html)将为您提供定义某种参数的建议，并且可能是不同参数的一些默认值。第一个方法通常是您必须继承自 AbstractMojo 类的 execute() 方法。如果您需要某种默认值，只需检查参数是否尚未初始化（这意味着为空）并为它们提供您喜欢的值。

# java - scala, jsr 223 & 编译

> ID：10971759
> 
> 赞同：2
> 
> 时间：2012-06-10T19:39:26.313
> 
> 标签：java, scala, scripting, jsr

我通过 jsr 223 api（scala 2.8.1 和 sling JSR 223 实现）使用 scala 成功设置了小型测试应用程序。但是，当检查 ScriptEngine 是否实现 javax.script.Compilable 时，我发现不是。

```
final ScriptEngine eng = new ScriptEngineManager().getEngineByName("scala");
System.out.println(eng instanceof Compilable); 
```

还有其他支持脚本编译的scala jsr 223 impl吗？谢谢。

# amazon-web-services - 亚马逊网络服务中的状态管理

> ID：10971762
> 
> 赞同：1
> 
> 时间：2012-06-10T19:39:53.237
> 
> 标签：amazon-web-services, state

会话之间的状态如何管理？我知道在 Azure 中，特定于客户端的状态存储在 SQL Azure 中。我想知道这是否在 AWS 中进行了类似的操作？

您的应用程序的各种实例是否都访问了存储状态的数据库？根据您使用的技术，状态管理是否有很大不同？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-10T22:03:07.043

在“作业”级别上，Amazon Web Services 大致由两组不同的事物组成：

*   您自己管理的基础设施服务（EC2、EBS）
*   亚马逊为您管理的更高级别的服务（S3、DynamoDB、ELB）

当您将文件上传到 S3 时，它会存储在多个不同数据中心的多台机器上，Amazon 负责在您请求文件时查找并返回文件（并确保它不会被删除）由于机器故障。）

借助构建在其中一项基础设施服务之上的东西，例如在 EC2 上运行的应用程序，您可以自行决定如何存储和同步状态：

*   一台服务器，内存状态（坏）
*   没有状态处理的负载平衡（非常糟糕！）
*   使用粘性会话进行负载平衡（明智，但本身还不够；如果该服务器掉出池，其他服务器不知道您是谁）
*   使用具有公共状态服务器的服务器进行负载平衡

你如何存储状态？传统上是带有内存缓存（例如[Elasticache](http://aws.amazon.com/elasticache/) - Amazon 的托管 memcached 兼容缓存） 的数据库（可能是 Amazon [RDS ）。](http://aws.amazon.com/rds/)[Amazon 的新 DynamoDB 服务非常适合这种用途](http://aws.typepad.com/aws/2012/04/scalable-session-handling-in-php-using-amazon-dynamodb.html)，作为一种快速、冗余的键值存储。

# sql - 更新触发器更新目标中的所有行，而不仅仅是更新？

> ID：10971763
> 
> 赞同：2
> 
> 时间：2012-06-10T19:39:56.847
> 
> 标签：sql, sql-server, sql-server-2008, geospatial

我有一种非常可疑的感觉，这个更新触发器正在更新目标上的所有行，而不仅仅是那些满足“更新（形状）”测试的行。性能很好，直到我添加了第二个操作。单个空间连接发生得更快，这不是空间索引问题，而且该数据集中只有几条记录。

```
ALTER TRIGGER   [dbo].[GRSM_WETLANDS_Point_GIS_tbl_locations_update]
ON  [dbo].[GRSM_WETLANDS_POINT]
after update  
AS   
BEGIN   
  SET NOCOUNT ON;  
  if UPDATE (shape)
update GRSM_WETLANDS_Point
set X_Coord =CASE WHEN u.shape.STDimension() = 2 THEN u.shape.STCentroid().STX ELSE u.shape.STEnvelope().STCentroid().STX END,
    Y_Coord =CASE WHEN u.shape.STDimension() = 2 THEN u.shape.STCentroid().STY ELSE u.shape.STEnvelope().STCentroid().STY END
    from inserted i 
inner join GRSM_WETLANDS_POint u on i.GIS_Location_ID = u.GIS_Location_ID;
--second spatial operation
update GRSM_WETLANDS_Point
set QuadName = grsm.dbo.USGS_24K_TOPOMAP_BOUNDARIES.name 

FROM GRSM_WETLANDS_POint i
inner join grsm.dbo.USGS_24K_TOPOMAP_BOUNDARIES  
on i.GIS_Location_ID = i.GIS_Location_ID  
WHERE  (USGS_24K_TOPOMAP_BOUNDARIES.Shape.STContains(i.SHAPE) = 1) ;

end 
```

我的怀疑是对的吗？

更新：根据 Aaron 的建议...解决了所有行的火灾问题。

```
update GRSM_WETLANDS_Point
set QuadName = grsm.dbo.USGS_24K_TOPOMAP_BOUNDARIES.name 
FROM inserted i inner join GRSM_WETLANDS_POint u on i.GIS_Location_ID = u.GIS_Location_ID
left outer join  grsm.dbo.USGS_24K_TOPOMAP_BOUNDARIES  
on i.GIS_Location_ID = i.GIS_Location_ID  
WHERE  (USGS_24K_TOPOMAP_BOUNDARIES.Shape.STContains(i.SHAPE) = 1); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-10T20:17:14.793

如果`Shape`不能为 NULL，查看它是否已更改的更好方法是检查`inserted`和中的值`deleted`是否不同。例如：

```
IF EXISTS
(
  SELECT 1 FROM inserted AS i
  INNER JOIN deleted AS d
  ON i.GIS_Location_ID = d.GIS_Location_ID
  WHERE i.Shape.STEquals(d.Shape) = 0
)
BEGIN
  ...
END 
```

如果`Shape`可以为空，那么您只需在此处添加更多条件进行检查，例如

```
 WHERE 
  (
    (i.Shape IS NULL AND d.Shape IS NOT NULL
    OR (i.Shape IS NOT NULL AND d.Shape IS NULL)
    OR (i.Shape.STEquals(d.Shape) = 0)
  ) 
```

（您可能不在乎是否`Shape`已更新*到* `NULL`，我只是在说明如何测试这种情况。）

由于该操作可能发生在多行上，并且此条件将仅标识已发生至少一个此类更新（但不是所有行都满足条件），因此最好让您的操作在 WHERE 子句中包含类似的条件。事实上，我认为您可以在一个操作中执行两个更新，例如

```
ALTER TRIGGER [dbo].[GRSM_WETLANDS_Point_GIS_tbl_locations_update]
ON  [dbo].[GRSM_WETLANDS_POINT]
AFTER UPDATE
AS   
BEGIN   
  SET NOCOUNT ON; 

  UPDATE p SET 
    X_Coord = CASE WHEN i.shape.STDimension() = 2 
      THEN i.shape.STCentroid().STX 
      ELSE i.shape.STEnvelope().STCentroid().STX 
    END,
    Y_Coord = CASE WHEN i.shape.STDimension() = 2 
      THEN i.shape.STCentroid().STY 
      ELSE i.shape.STEnvelope().STCentroid().STY 
    END, 
    QuadName = COALESCE(b.name, p.QuadName)
  FROM 
    dbo.GRSM_WETLANDS_Point AS p
  INNER JOIN 
    inserted AS i
    ON i.GIS_Location_ID = p.GIS_Location_ID
  LEFT OUTER JOIN grsm.dbo.USGS_24K_TOPOMAP_BOUNDARIES AS b
    ON b.Shape.STContains(i.Shape) = 1
  WHERE EXISTS 
  (
    SELECT 1 FROM inserted AS i2
      INNER JOIN deleted AS d
      ON i2.GIS_Location_ID = d.GIS_Location_ID
      WHERE i2.GIS_Location_ID = i.GIS_Location_ID
      AND i2.Shape.STEquals(d.Shape) = 0
      -- ...and NULL handling if necessary
  );
END
GO 
```

一般来说，您似乎在实现触发器时遇到了很多麻烦，并且对语法应该如何工作做出了很多猜测。您是否考虑过通过存储过程强制数据更新，您可以在其中控制所有这些业务逻辑，但消除伪表`inserted`和`deleted`伪表增加的复杂性？

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-10T19:44:16.057

如果 UPDATE (shape) 即使值没有改变也会触发，如果更新语句中存在该列，它将触发

而且您没有在第二次更新中加入 INSERTED

# linux - 在每行匹配后使用 grep 获取下一个 WORD

> ID：10971765
> 
> 赞同：16
> 
> 时间：2012-06-10T19:40:18.093
> 
> 标签：linux, grep

我想从我的服务器日志中获取“ **GET ”查询。**

例如，这是服务器日志

```
1.0.0.127.in-addr.arpa - - [10/Jun/2012 15:32:27] code 404, message File not fo$
1.0.0.127.in-addr.arpa - - [10/Jun/2012 15:32:27] "GET /hello HTTP/1.1" 404 -   
1.0.0.127.in-addr.arpa - - [10/Jun/2012 15:41:57] code 404, message File not fo$
1.0.0.127.in-addr.arpa - - [10/Jun/2012 15:41:57] "GET /ss HTTP/1.1" 404 - 
```

当我尝试使用简单的 grep 或 awk 时，

```
Adi:~ adi$ awk '/GET/, /HTTP/' serverlogs.txt 
```

它发出

```
1.0.0.127.in-addr.arpa - - [10/Jun/2012 15:32:27] "GET /hello HTTP/1.1" 404 -
1.0.0.127.in-addr.arpa - - [10/Jun/2012 15:41:57] "GET /ss HTTP/1.1" 404 - 
```

我只想显示：**你好**和**ss**

有什么办法可以做到吗？

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-06-10T19:58:56.540

假设你有 gnu grep，你可以使用 perl 风格的正则表达式来做一个积极的向后看：

```
grep -oP '(?<=GET\s/)\w+' file 
```

如果您没有 gnu grep，那么我建议您只使用 sed：

```
sed -n '/^.*GET[[:space:]]\{1,\}\/\([-_[:alnum:]]\{1,\}\).*$/s//\1/p' file 
```

如果你碰巧有 gnu sed，那可以大大简化：

```
sed -n '/^.*GET\s\+\/\(\w\+\).*$/s//\1/p' file 
```

这里的底线是，您当然不需要管道来完成此操作。 `grep`或者`sed`单独就足够了。

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2012-06-10T19:43:40.553

在这种情况下，由于日志文件具有已知结构，一个选项是使用[`cut`](http://linux.die.net/man/1/cut)拉出第 7 列（字段默认由制表符表示）。

```
grep GET log.txt | cut -f 7 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2018-02-20T19:05:20.530

我试图这样做并遇到了这个链接：[https ://www.unix.com/shell-programming-and-scripting/153101-print-next-word-after-found-pattern.html](https://www.unix.com/shell-programming-and-scripting/153101-print-next-word-after-found-pattern.html)

总结：使用 grep 查找匹配行，然后使用 awk 查找模式并打印下一个字段：

```
grep pattern logfile | \
  awk '{for(i=1; i<=NF; i++) if($i~/pattern/) print $(i+1)}' 
```

如果您想知道独特的出现：

```
grep pattern logfile | \
  awk '{for(i=1; i<=NF; i++) if($i~/pattern/) print $(i+1)}' | \
  sort | \
  uniq -c 
```

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2014-03-07T04:06:22.310

如果您使用 grep，请使用管道：

```
grep -o /he.* log.txt | grep -o [^/].*
grep -o /ss log.txt | grep -o [^/].* 
```

[^/] 表示从 grep 输出中提取 ^ 符号之后的字母

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-06-10T19:51:15.830

使用管道通常比使用单个复杂的正则表达式更容易。这适用于您提供的数据：

```
fgrep GET /tmp/foo | 
    egrep -o 'GET (.*) HTTP' |
    sed -r 's/^GET \/(.+) HTTP/\1/' 
```

此管道返回以下结果：

```
hello
ss 
```

当然还有其他方法可以完成这项工作，但这显然适用于提供的语料库。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2017-03-28T09:59:18.397

```
gawk '{match($7,/\/(\w+)/,a);} length(a[1]){print a[1]}' log.txt
hello
ss 
```

如果你有`gawk`那么上面的命令将使用`match`函数来使用正则表达式选择所需的值并将其存储到一个数组`a`中。

# javascript - DIV 和表格 - 多行

> ID：10971772
> 
> 赞同：1
> 
> 时间：2012-06-10T19:42:03.803
> 
> 标签：javascript, html, css, html-table

我试图在表格中放置一个 div，但是它不会跨越多行。

这是我正在使用的代码：

```
<table>
    <tr>
        <td><div id="test"></td>
    </tr>
    <tr>
       <td>row 2 stuff</td></td>
    </div>
</table> 
```

我有多个在按钮单击时动态添加的行。我希望每组动态添加的行都在一个 div 内，以便于删除。

问题是 FireFox 会自动关闭同一单元格中的 div 标签。最后，它正在将我的关闭移动到第一个单元格的末尾。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-10T20:03:20.133

最新打开的标签应首先关闭以获得完美的结果。你的代码应该看起来像这样：

```
<table>
    <tr>
        <td><div id="test"></div></td>
    </tr>
    <tr>
       <td>row 2 stuff</td>
    </tr>
</table> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-10T19:44:04.137

您不能`<div>`像这样在表格元素周围包裹标签。如果您想保留对每一行的简单引用，请考虑保留对所有新添加行的引用，或者向它们添加一个类以供以后访问。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-11T02:18:38.613

从您嵌套不当的意义上说，您的标记不遵守 html 标准。如果要添加一行，请使用以下格式

```
<table>
    <div id="test">
    <tr>
        <td></td>
    </tr>
    <tr>
       <td>row 2 stuff</td></td>
    </tr>
    </div>
</table> 
```

如果您注意到，我将两行分组在一个 div 中。当您在表格中嵌套一个 div 时，即使这样做也是不明智的。一个更方便的解决方案是将一个类分配给您想要组合在一起的 div，如下所示：

```
<table>
    <tr class="test">
        <td></td>
    </tr>
    <tr class="test">
       <td>row 2 stuff</td></td>
    </tr>
</table> 
```

在这里，我想组合在一起的行被分配了一个公共类。因此，如果我要使用 Jquery 来选择它们，我会这样做：

```
$("tr.test") 
```

希望有帮助！

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-10T19:54:10.543

Html 标签必须严格位于另一个标签内。因此，不允许使用以下标记：

```
<b>this <i>is a</b> test</i> 
```

您的标记违反了相同的规则。

# android - android发布数据，html表单

> ID：10971774
> 
> 赞同：-1
> 
> 时间：2012-06-10T19:42:35.563
> 
> 标签：android, post

我想用相同的参数向 HTML 源代码中提到的 URL 发送 HTTP POST 请求。表格代码：

```
<form enctype="multipart/form-data" method="post" action="/add/">
   <div style="display:none"><input type="hidden" name="csrfmiddlewaretoken" value="3e7651db3a8925c8079990f0cb13d8f7"></div>   
   <table>
       <tbody><tr><th><label for="id_key">Key:</label></th><td><input id="id_key" type="text" name="key" maxlength="13"></td></tr>
<tr><th><label for="id_val">Val:</label></th><td><input id="id_val" type="text" name="val" maxlength="50"></td></tr>
    </tbody></table>
    <input type="submit" value="Submit" id="Save">
</form> 
```

在android中发送POST请求的等价物是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-10T19:50:21.300

我假设您想调用一个从原生 android 代码执行 HTTP POST 的函数。

```
public void postData() {
// Create a new HttpClient and Post Header
HttpClient httpclient = new DefaultHttpClient();
HttpPost httppost = new HttpPost("http://www.yoursite.com/script.php");

try {
    // Add your data
    List<NameValuePair> nameValuePairs = new ArrayList<NameValuePair>(2);
    nameValuePairs.add(new BasicNameValuePair("id", "12345"));
    nameValuePairs.add(new BasicNameValuePair("stringdata", "AndDev is Cool!"));
    httppost.setEntity(new UrlEncodedFormEntity(nameValuePairs));

    // Execute HTTP Post Request
    HttpResponse response = httpclient.execute(httppost);

} catch (ClientProtocolException e) {
    // TODO Auto-generated catch block
} catch (IOException e) {
    // TODO Auto-generated catch block
} 
```

}

# jsf - 在 prerenderview 事件侦听器中打开有关错误的 primefaces 对话框

> ID：10971775
> 
> 赞同：1
> 
> 时间：2012-06-10T19:43:03.087
> 
> 标签：jsf, dialog, primefaces, listener, modal-dialog

我在 prerenderview 事件侦听器中打开和关闭错误的 primefaces 对话框时遇到问题。我使用事件监听器从第三方系统加载数据，在某些情况下需要特殊的身份验证。

到目前为止，当需要特殊身份验证时，我在请求范围的 bean 上设置了一个属性，并使用对话框的可见属性来决定对话框是否应该可见。

```
<p:dialog widgetVar="#{name}" resizable="false" modal="true"
            closable="false" id="#{name}Dialog" width="375"
            useWindow="true" 
            visible="#{specialAuthenticationBean.authenticationRequired}"> 
```

提示：#{name} 是一个包含参数。

这是推荐的方法吗？

如果是，单击取消或确定按钮时如何关闭对话框？

到目前为止，对于取消按钮，我使用以下代码进行了尝试，但没有成功。

```
<p:commandButton id="cancel" value="#{messages['cancel']}" onclick="#{name}.hide()" type="button" /> 
```

有任何想法吗？

**更新**：我尝试了不同的方法并找到了原因。对话框没有关闭，因为同一个对话框有三个包含不同参数的包含，但是所有三个对话框的可见条件都是正确的。

现在我问自己是否真的有必要拥有同一个对话框的三个实例，只是因为登录按钮执行不同的操作（bean 方法）。我真正想做的是在一个 bean 方法调用导致打开身份验证对话框后，在身份验证对话框中提交正确的身份验证数据后再次执行相同的 bean 方法。

# .net - VB.NET 'Like' 运算符中可能存在的错误？

> ID：10971777
> 
> 赞同：10
> 
> 时间：2012-06-10T19:43:20.420
> 
> 标签：.net, vb.net, wildcard, string-matching, sql-like

为什么以下评估为`True`？

```
Dim result = "b" Like "*a*b" 
```

谢谢。

编辑：
为了概括这一点，以下返回`True`：

```
"String1" Like "*AnyText1*AnyText2*AnyText???******????*String1" 
```

VBA 工作正常，返回`False`.
PowerShell 工作正常，返回`False`：

```
PS C:\Users\XXX> "b" -Like "*a*b"
False 
```

EDIT2：
错误报告的链接：
[https ://connect.microsoft.com/VisualStudio/feedback/details/748415/a-bug-in-net-like-operator](https://connect.microsoft.com/VisualStudio/feedback/details/748415/a-bug-in-net-like-operator)

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-12T01:43:32.890

为了好玩，我决定打开 ilspy 来调试它:-)

在这种方法中；

```
 private static void MatchAsterisk(string Source, int SourceLength, int SourceIndex, LigatureInfo[] SourceLigatureInfo, string Pattern, int PatternLength, int PatternIndex, LigatureInfo[] PattternLigatureInfo, ref bool Mismatch, ref bool PatternError, CompareInfo Comparer, CompareOptions Options) 
```

对于这种情况

```
 if (SourceLength <= 0)
                {
                    return;
                } 
```

通过将其更改为

```
 if (SourceLength < 0)
                {
                    return;
                } 
```

似乎让它按预期工作

我只做了一些小测试，没什么大不了的

问题是；它只查看最后一个星号，当它有效时，就停在那里

我的小改动一定要检查前一个，或者之前的任何东西

用我的修复

```
 Dim result = "b" Like "*a*b"
 now return false

 "String1" Like "*AnyText1*AnyText2*AnyText???******????*String1"
 now return false 
```

但在需要返回 true 时返回 true

# sql - 左连接 SQLite

> ID：10971788
> 
> 赞同：1
> 
> 时间：2012-06-10T19:44:21.763
> 
> 标签：sql, sqlite, join, left-join

使用 SQLite 进行左连接时遇到问题。

表的结构

```
contacts: id_c, first_name, last_name, photo_link
messages: id_msg, id_sender, id_recipient, utimestamp, message, chatID 
```

我正在做如下查询：

```
SELECT * FROM messages m 
  LEFT OUTER JOIN contacts c ON (c.id_c=m.id_sender) 
  WHERE m.chatID=26 
```

此查询从消息表中返回值。
但为联系人表返回 null。

我尝试了几种方法，都无法解决这个问题。有什么建议可以解决这个问题吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-12T02:40:23.137

问题解决了。可能有一个错误。在 SQL Fiddle 中进行测试后，我意识到它可以正常工作。感谢您的关注。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-10T19:47:36.183

在没有与for 26`id_c`匹配的联系人的情况下，从联系人表中返回空值正是我对工作 LEFT JOIN 的期望。您是否仔细检查过您在桌子？`id_sender``chatID``contacts`

# javascript - Can't access YouTube video through YouTube JS API inside of Google Chrome Extension, but can inside of JS Fiddle

> ID：10971792
> 
> 赞同：6
> 
> 时间：2012-06-10T19:44:50.803
> 
> 标签：javascript, google-chrome-extension, youtube

I am attempt to understand the logic behind whatever trips the 'blocking' mechanism for YouTube's video playback.

Here I am attempt to play back a song which is blocked from embedded playback inside of a JS Fiddle. Observe that it works:

[http://jsfiddle.net/E7B9C/17/](http://jsfiddle.net/E7B9C/17/)

![enter image description here](../Images/8e94d27725bd2a8c781f26e05864482c.png)

Now, I use the exact same code inside of my Google Chrome extension:

[http://www.meomixes.com/](http://www.meomixes.com/) if you'd like to click to download extension.

[http://www.meomixes.com/Test.crx](http://www.meomixes.com/Test.crx) for direct link to extension.

Observe that I cannot playback the same youtube video:

![enter image description here](../Images/82ed964f468390d4a5744900e91e86d9.png)

I was wondering what my debugging options were for this scenario. Does anyone have any ideas on what I should explore? I've tried requesting the following permissions in my manifest, but it did not have any effect:

```
"permissions": [
"http://*.youtube.com",
"https://*.youtube.com",
"http://*.google.com",
"https://*.google.com"
] 
```

I've placed the full source of Test.crx here: [http://www.meomixes.com/Test.zip](http://www.meomixes.com/Test.zip) To load:

*   Unzip
*   Go to Google Chrome's extension page and enable 'Developer Mode'
*   Click 'Load Unpacked Extension' and point to the unzipped directory.
*   Observe that the video does not play back.

Last of note: The song plays happily in a Facebook post.

EDIT: I found this: [http://gdata.youtube.com/feeds/api/videos/UfESt2KdOdc?v=2&prettyprint=true](http://gdata.youtube.com/feeds/api/videos/UfESt2KdOdc?v=2&prettyprint=true) for the video in question. It pairs with: [http://apiblog.youtube.com/2011/12/understanding-playback-restrictions.html](http://apiblog.youtube.com/2011/12/understanding-playback-restrictions.html).

Just building on the first response. Basically, there is a setting called 'syndication' which prevents from playing on 'external devices' such as TVs and Google Chrome Extensions.

Looking at ways to bypass this issue now.

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-06-19T15:56:07.327

The Youtube iframe implementation seems to block certain referring urls from displaying licensed content.

**The Problem**

These referring schemas didn't seem to work with the particular video you're testing with.

```
 chrome-extension://
 file:// 
```

It seems like content licenser, UMG, opted to prevent any plays from extensions or local files. An alternative is to avoid using videos that contain licensed content, but that's boring.

It's inconvenient but there is a workaround that will allow you to implement the iframe player into the extension. All Youtube cares about is that the the player is embedded on a page somewhere on the internet.

**Proxy Page**

Try replacing the iframe src in **popup.htm** with the jsfiddle result frame from your example and reload your plugin.

```
 <iframe width="200" height="200" src="http://fiddle.jshell.net/E7B9C/17/show/"></iframe> 
```

You should see the previously "unavailable" video playing now. Your extension now references a page you control on jshell.net. All Youtube knows is that you're calling their player from jshell.net.

**Controls**

Now that we have a player, you may notice that you don't have any of the Youtube controls available to you since you're now referencing your own iframe that's referencing the Youtube iframe and it's API. As if it weren't fun enough already, you now get to make your own iframe API to communicate from the chrome-extension to your iframe to Youtube's iframe!

Under normal circumstances a parent can set the child frame's window.location.hash and that frame watches and parses any changes that come through. The child then calls some callback in the [parent directly](https://stackoverflow.com/questions/2161388/iframe-function-calling-from-iframe-to-parent-page-javascript-function) with some new information.

**Edit:** Instead of using window.location.hash, you could use HTML5's window.postMessage() instead and avoid having to deal with checking and parsing the hash continuously.

That should get you up and running.

# mouse - unity3d：在鼠标点击屏幕的地方拍摄

> ID：10971795
> 
> 赞同：0
> 
> 时间：2012-06-10T19:45:32.900
> 
> 标签：mouse, unity3d, frame-rate

看各种公告板，这是一个常见的问题，但我在网上找不到任何好的答案。

我的项目有一辆通过箭头键移动的第一人称汽车。我希望安装在汽车上的枪能够通过可以瞄准当前屏幕上任何位置的十字准线进行射击。现在子弹一直从中间射出，除了我点击屏幕没有任何反应的时候（大约 50%）。这是我通过网络上的各种脚本获得的代码：

```
var speed = 20;
var bullet: GameObject;

function Update () {

var hit : RaycastHit;

if(Input.GetButtonDown("Fire1")){
    var ray = Camera.main.ScreenPointToRay (Input.mousePosition); //ray from
    // through the mousePosition.

    if(Physics.Raycast(ray, hit, 1000)) { //does the ray collide with 
    // anything.

        //add stuff here for finding type of object and such.
        Debug.Log("Hit Something at mouse position");
        Debug.DrawRay (ray.origin, ray.direction * 10, Color.yellow);
        //Display the ray.
        var projectile:GameObject = Instantiate(bullet,transform.position,transform.rotation);

        projectile.rigidbody.velocity = transform.forward * speed;
    }
} 
```

}

如果有人可以提供帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-06-08T23:28:03.767

您的光线是正确的（指向屏幕中间），但这与您制作子弹的方式无关。子弹基于 transform.forward * 速度移动。您需要做的是获取射线的命中点，然后获取从子弹原点到该点的方向。

```
Vector3 direction = hit.point - projectile.transform.position;
projectile.rigidbody.velocity = direction * speed; 
```

对于 screenPointToRay 来说1000*相当*低，因此如果您想避免将来出现问题，您可能需要将其提高很多。

刚体也已被弃用，我不确定您是否应该像那样直接执行 (GameObject).rigidbody

[http://docs.unity3d.com/ScriptReference/GameObject-rigidbody.html](http://docs.unity3d.com/ScriptReference/GameObject-rigidbody.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-20T17:55:49.077

在没有实际向您发布任何代码的情况下，我可以告诉您，如果我理解您的尝试，您可能应该研究的是为什么您的射弹从变换的旋转而不是射线的旋转来设置其旋转。

射弹显然正在从车辆上获得它的所有属性（包括那些应该与原点分离的属性）并相应地跟随。

尝试将弹丸的旋转设置为射线的旋转。

此外，由于要测试的距离很长，您的射线很可能只命中一半时间。尝试增加该数字，或为其创建墙壁以使其在更短的范围内发生碰撞。

# http - Golang：http 服务器离开开放的 goroutines

> ID：10971800
> 
> 赞同：21
> 
> 时间：2012-06-10T19:46:40.837
> 
> 标签：http, go

我已经搭建了一个用 Go 编写的 http 服务器，每天有超过一千的访问者。我现在有一个累积的 Goroutine 问题。在一天的时间里，我似乎从 http 服务器获得了一千多个新的 Goroutine。

我不知道我怎么能搞砸处理程序。

```
http.Handle("/", http.FileServer(http.Dir(config.htdocs_path))) 
```

下面是堆栈中的 goroutine 之一

```
goroutine 1582 [chan receive]:
net.(*pollServer).WaitRead(0xf84007f680, 0xf84066dea0, 0xf84007aa80, 0xb, 0x1, ...)
        /home/ec2-user/go/src/pkg/net/fd.go:268 +0x73
net.(*netFD).Read(0xf84066dea0, 0xf840ec1000, 0x100000001000, 0x7f7effffffff, 0xf84007c0f0, ...)
        /home/ec2-user/go/src/pkg/net/fd.go:428 +0x1ec
net.(*TCPConn).Read(0xf84068aff8, 0xf840ec1000, 0x100000001000, 0xf800000002, 0x0, ...)
        /home/ec2-user/go/src/pkg/net/tcpsock_posix.go:87 +0xce
io.(*LimitedReader).Read(0xf840d1bc20, 0xf840ec1000, 0x100000001000, 0xdcb00000000, 0x0, ...)
        /home/ec2-user/go/src/pkg/io/io.go:394 +0xc1
bufio.(*Reader).fill(0xf8405b0900, 0xdcb00000000)
        /home/ec2-user/go/src/pkg/bufio/bufio.go:77 +0xf0
bufio.(*Reader).ReadSlice(0xf8405b0900, 0xf840d1bc0a, 0x0, 0x0, 0x0, ...)
        /home/ec2-user/go/src/pkg/bufio/bufio.go:257 +0x1b6
bufio.(*Reader).ReadLine(0xf8405b0900, 0x0, 0x0, 0x0, 0x0, ...)
        /home/ec2-user/go/src/pkg/bufio/bufio.go:283 +0x5b
net/textproto.(*Reader).readLineSlice(0xf840730660, 0xc0, 0x100000000, 0x7f7e00000001)
        /home/ec2-user/go/src/pkg/net/textproto/reader.go:55 +0x4f
net/textproto.(*Reader).ReadLine(0xf840730660, 0xf84061f300, 0x0, 0x48411c)
        /home/ec2-user/go/src/pkg/net/textproto/reader.go:36 +0x25
net/http.ReadRequest(0xf8405b0900, 0xf84061f300, 0x0, 0x0, 0x100000400ccf60, ...)
        /home/ec2-user/go/src/pkg/net/http/request.go:457 +0xb1
net/http.(*conn).readRequest(0xf8402b2b40, 0xf8400e3fc0, 0x0, 0x0, 0xf8405b0a80, ...)
        /home/ec2-user/go/src/pkg/net/http/server.go:240 +0xa8
net/http.(*conn).serve(0xf8402b2b40, 0x0)
        /home/ec2-user/go/src/pkg/net/http/server.go:594 +0x145
created by net/http.(*Server).Serve
        /home/ec2-user/go/src/pkg/net/http/server.go:1040 +0x430 
```

似乎连接陷入读取状态。就像http服务器没有让它们超时。默认服务器没有读取超时吗？

去版本去1

* * *

## 回答 #1

> 赞同：58
> 
> 时间：2012-06-10T21:19:30.393

所有这些 goroutine 都在读取的原因是 keep-alive。当浏览器发送 keep-alive 标头时，服务器会保持连接打开以接受更多请求。当客户端请求许多小文件并且 TCP 连接开销很大时，这是一件好事。读取超时将确保没有连接保持活动超过请求之间的特定时间。这将关闭保持活动连接，但也会阻止某人上传超过超时时间。不幸的是，还没有特定的保持活动超时选项。

默认情况下，没有超时。[您可以在服务器结构http://golang.org/pkg/net/http/#Server](http://golang.org/pkg/net/http/#Server)中设置超时

```
srv := &http.Server{
    Handler: http.FileServer(http.Dir(config.htdocs_path)),
    ReadTimeout: 30*time.Second,
}
srv.ListenAndServe() 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-08-15T03:03:13.890

在 HTTP 连接上使用 ReadTimeout 和 WriteTimeout 时要小心。我不认为他们会做你期望他们做的事。特别是，它们倾向于使连接处于不可用状态而不实际关闭它们。有关详细信息，请参阅[https://groups.google.com/forum/#!topic/golang-nuts/oBIh_R7-pJQ](https://groups.google.com/forum/#!topic/golang-nuts/oBIh_R7-pJQ)，特别是，我看到 ReadTimeout 使连接无法使用并导致响应被丢弃在地板上的情况。 HTTP 处理程序时间超过超时。如果您将超时设置为超过任何处理程序的响应时间的较大值，您可能会没事。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-04-10T13:12:43.077

斯蒂芬的回答仅结合以下内容对我有用：服务器可以告诉其客户端它不希望或不支持保持连接打开。为此，请在服务前设置相应的标志：

```
server := &http.Server{
  // ... see Stephen's answer
}
server.SetKeepAlivesEnabled(false)
server.ListenAndServe() 
```

This will set the response header `Connection: close` and *most* clients will terminate the connection from their side.

# javascript - 如何编码我的 javascript 以使切换正常工作？

> ID：10971807
> 
> 赞同：0
> 
> 时间：2012-06-10T19:47:36.390
> 
> 标签：javascript, html, toggle

我有 javascript 代码来切换隐藏和显示信息，并且适用于一个 showMoreText 文本部分，但想要所有不同链接的 16 个不同切换选项。包括适用于“蒙大拿州冰川”的图像，为什么它很重要？它确实可以切换，但我专门为“Ice now Covers...”链接创建了另一个 javascript 页面 (toggle2.js)，但它不会出现。![在此处输入图像描述](../Images/57f8bd6c83cee20774da31d52c51697b.png)

**toggle.js 中第一个切换选项的代码**

```
window.onload = function(){
    document.getElementById('toggle').onclick = showMore;
}

function showMore(){
    var div = document.getElementById('showMoreText');
    var display = div.style.display;
    display == "none" ? div.style.display = "block" : div.style.display = "none";
} 
```

**toggle2.js 中第二个切换选项的代码**

```
window.onload = function(){
    document.getElementById('toggle2').onclick = showMore;
}

function showMore(){
    var div = document.getElementById('showMoreText2');
    var display = div.style.display;
    display == "none" ? div.style.display = "block" : div.style.display = "none";
} 
```

**用于切换 1 的 HTML 中的代码**

```
<div id="showMoreText" style="display: none"> (missing paranthesis) 
```

**用于切换 2 的 HTML 中的代码**

```
<div id="showMoreText" style="display: none"> (missing paranthesis) 
```

怎么了？我希望能够切换到许多不同的切换 (1-16)，但是当我单击切换 1 并想要单击切换 2 时，它不会改变。什么变量阻止我正常工作？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-10T20:02:55.380

基于 Aleks G 答案进一步优化：

你的脚本：

```
window.onload = function(){
    for(var i=0; i<3; i++){      //here is set to 3
        document.getElementById('toggle'+i).onclick = function(i){
            return function(){
                showMore('showMoreText'+i);
            }
        }(i);
    }
}

function showMore(id){
    var div = document.getElementById(id),
        display = div.style.display;
    display == "none" ? div.style.display = "block" : div.style.display = "none";
} 
```

HTML：

```
<div id="toggle1" class="toggle"></div>
<div id="toggle2" class="toggle"></div>
<div id="toggle3" class="toggle"></div> 
```

CSS：

```
div.toggle{
    display: none;
} 
```

实际上，您甚至不需要`id`in `div`。您可以遍历该类`toggle`并找到所有`div`s。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-10T19:54:13.350

为什么你需要单独拥有所有切换？为什么不这样做呢？

```
window.onload = function(){
    document.getElementById('toggle').onclick = showMore1;
    document.getElementById('toggle2').onclick = showMore2;
    document.getElementById('toggle3').onclick = showMore3;
    ...
}

function showMore1() { showMore('showMoreText'); }
function showMore2() { showMore('showMoreText2'); }
function showMore3() { showMore('showMoreText3'); }
...

function showMore(id){
    var div = document.getElementById(id);
    var display = div.style.display;
    display == "none" ? div.style.display = "block" : div.style.display = "none";
} 
```

这很粗糙，请随时进一步优化。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-10T20:11:39.150

不是一个完整的答案，但只是按照上面的方法，可以将 window.onload 函数简化为单个对象，并将代码重新循环。

```
window.onload = function() {
 var tList={'toggle1': 'showMore1','toggle2': 'showMore2','toggle3': 'showMore3'};
 for(var i in tList){document.getElementById(i).onclick = tList[i]};
} 
```

# java - Proguard保留类名？

> ID：10971810
> 
> 赞同：40
> 
> 时间：2012-06-10T19:47:58.387
> 
> 标签：java, android, obfuscation, proguard

您好，我正在编写一个 Android 应用程序，并且我已经设置了 Proguard 来混淆我的应用程序。然而，我使用类加载器将不同的扩展动态加载到我的应用程序中。问题是，如果它们的名称被更改，它们将无法正确加载。如何防止 Proguard 混淆特定的类名？

* * *

## 回答 #1

> 赞同：45
> 
> 时间：2012-06-10T19:55:08.243

使用`-keepnames`proguard.cfg 中的选项

请参阅手册 [https://www.guardsquare.com/en/proguard/manual/usage#keepoptions](https://www.guardsquare.com/en/proguard/manual/usage#keepoptions)：

> `-keepnames`类规范
> 
> class_specification 的`-keep,allowshrinking`缩写
> 
> 指定要保留其名称的类和类成员，如果它们在收缩阶段没有被删除的话。例如，您可能希望保留实现 Serializable 接口的类的所有类名，以便处理后的代码与任何最初序列化的类保持兼容。完全不使用的类仍然可以删除。仅在混淆时适用。

* * *

## 回答 #2

> 赞同：41
> 
> 时间：2014-09-25T18:25:11.067

这使类名保持不变：

```
-keepnames class com.somepackage.* 
```

* * *

## 回答 #3

> 赞同：16
> 
> 时间：2014-10-02T21:20:29.333

对于不想让 ProGuard 更改**任何**类名的每个人的实用提示：

```
# please KEEP ALL THE NAMES
-keepnames class ** { *; } 
```

这样，您将获得可读的堆栈跟踪，同时仍然丢弃您不需要的东西。:-)

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2019-04-30T12:25:40.070

如果有人对如何指定要保留的多个类名感兴趣，那么这些类可以用逗号分隔。例子：

```
-keepnames class com.foo.**,com.bar.** { *; } 
```

也可以使用否定，因为通常只有自己的类会被混淆，并且可以保留第 3 方库：

```
-keepnames class !com.foo.**,!com.bar.** { *; } 
```

请参阅[Proguard 文档](https://www.guardsquare.com/en/products/proguard/manual/usage#classspecification)。

# batch-file - 批处理文件，如果已经运行，则运行下一个程序

> ID：10971811
> 
> 赞同：0
> 
> 时间：2012-06-10T19:47:58.577
> 
> 标签：batch-file

基本上我刚才有一个简单的批处理脚本，它可以多次启动一个程序，我们称之为 1.exe，1.exe 将启动 20 次，然后在 % 秒后被杀死（由命令行参数指定）。

我需要做的是，如果 1.exe 已经在运行，则启动 2.exe，如果 2.exe 和 1.exe 已经在运行，则启动 3.exe，依此类推。

我现在真正拥有的所有代码是

```
Timeout /t 20 /nobreak >nul
echo.
taskkill /F /IM %programname%
echo.
pause >nul 
```

以及 1.exe 的启动

任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-11T02:16:42.267

下面的批处理代码如果 1.exe 已经在运行，则启动 2.exe，如果 2.exe 已经在运行，则启动 3.exe，依此类推：

```
for /L %%i in (1,1,20) do (
   for /F "skip=3" %%e in ('tasklist /fi "imagename eq %%i.exe"') do (
      if "%%e" equ "%%i.exe" set lastExe=%%i
   )
)
set /A lastExe+=1
%lastExe%.exe 
```

# function - 函数返回可变数组错误

> ID：10971812
> 
> 赞同：-1
> 
> 时间：2012-06-10T19:48:08.107
> 
> 标签：function, plsql, varray

当我运行这段代码时，我不断收到错误，代码有什么问题？

```
create or replace function f_vars(line varchar2,delimit varchar2 default ',')
return line_type is type line_type is varray(1000) of varchar2(3000);
sline varchar2 (3000);
line_var line_type;

pos number;
begin
sline := line;
for i in 1 .. lenght(sline)
loop

pos := instr(sline,delimit,1,1);
if pos =0 then
line_var(i):=sline;
exit;

endif;
string:=substr(sline,1,pos-1);
line_var(i):=string;
sline := substr(sline,pos+1,length(sline));

end loop;
return line_var;
end; 
```

LINE/COL 错误

* * *

20/5 PLS-00103：在预期以下情况之一时遇到符号“LOOP”：如果

22/4 PLS-00103：在预期以下情况之一时遇到符号“文件结尾”：结束不是 pragma 最终实例化顺序覆盖静态成员构造函数映射

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-10T20:52:41.653

[Stack Overflow 并不是真正的调试服务](https://meta.stackexchange.com/questions/128548/what-stack-overflow-is-not/135066#135066)。

不过，我觉得很慷慨。

您拼写`length`错误；更正此问题应该可以解决您的第一个错误。您的第二个是由`endif;`, no space 引起的，这意味着该`if`语句没有终止符。

这*不会*纠正您的所有错误。例如，您正在为未定义（和不必要的）变量分配一些东西`string`。

* * *

不过我还有很多话要说……

我不能过分强调代码风格和空白的重要性。您的代码相当不可读。虽然现在这对你来说可能无关紧要，但对于其他人在 6 个月后使用代码来说却很重要。6 个月后，当你试图弄清楚你写的东西时，它可能对*你很重要。*

其次，我不能过分强调评论的重要性。出于与空白*完全相同*的原因，注释是理解事物如何工作的非常重要的部分。

第三，在结束函数时始终明确命名函数。它使包中的事情变得更加清晰，因此拥有它是一个好习惯，并且在功能中它将有助于匹配`end`导致您的第二个错误的问题。

最后，如果你想返回用户定义的类型`line_type`，你需要在你的函数之外声明这个 _out。类似于以下内容：

```
create or replace object t_line_type as object ( a varchar2(3000));
create or replace type line_type as varray(1000) of t_line_type; 
```

添加空格您的函数可能如下所示。这是*我的*编码风格，我绝对不是建议你盲目地遵循它，但它有助于实现一些标准化。

```
create or replace function f_vars ( PLine in varchar2
                                  , PDelimiter in varchar2 default ','
                                    ) return line_type is 

   /* This function takes in a line and a delimiter, splits
      it on the delimiter and returns it in a varray.
      */

   -- local variables are l_
   l_line varchar2 (3000) := PLine;
   l_pos number;

   -- user defined types are t_
   -- This is a varray.
   t_line line_type;

begin

   for i in 1 .. length(l_line) loop

      -- Get the position of the first delimiter.
      l_pos := instr(l_line, PDelimiter, 1, 1);

      -- Exit when we have run out of delimiters.
      if l_pos = 0 then
         t_line_var(i) := l_line;
         exit;
      end if;

      -- Fill in the varray and take the part of a string
      -- between our previous delimiter and the next.  
      t_line_var(i) := substr(l_line, 1, l_pos - 1);
      l_line := substr(l_line, l_pos + 1, length(l_line));

   end loop;

   return t_line;

end f_vars;
/ 
```

# vb.net - 在 VB.NET 中舍入一个整数

> ID：10971816
> 
> 赞同：-2
> 
> 时间：2012-06-10T19:48:28.940
> 
> 标签：vb.net, algorithm, numbers

如何根据数字的最后一位四舍五入整数？

例如：

```
Dim x As Integer = 12
Dim y As Integer = 139
Dim z As Integer = 2322 
```

结果应该是：

```
x = 20
y = 140
z = 2330 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-10T19:52:33.087

采用：

```
Math.Ceiling(value / 10) * 10 
```

参考：http: [//msdn.microsoft.com/en-us/library/zx4t0t48.aspx#Y0](http://msdn.microsoft.com/en-us/library/zx4t0t48.aspx#Y0)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-10T19:52:31.003

```
x = Math.Ceiling(x / 10.0) * 10 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-10T23:39:01.833

```
Module Module1
    Public Function RoundUp(ByVal val As Double, ByVal pos As Integer) As Double
        Dim base10 As Double = System.Math.Pow(10, pos) 'pos +: right from float point, -: left from float point. 

        If val > 0 Then
            Return System.Math.Ceiling(val * base10) / base10
        Else
            Return System.Math.Floor(val * base10) / base10
        End If
    End Function
    Sub Main()
        System.Console.WriteLine(RoundUp(12, -1)) '20
        System.Console.WriteLine(RoundUp(139, -1)) '140
        System.Console.WriteLine(RoundUp(2322, -1)) '2330
        System.Console.WriteLine(RoundUp(3.1415926, 3)) '3.142
        System.Console.ReadKey()

    End Sub

End Module 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-12-03T18:45:41.103

作为替代方案，执行此减法是一种快速方法：

```
x = value + ((2200000000 - value) % 10) 
```

考虑到该值为`int`(2200000000 > `int.MaxValue`)：

# php - 如何将新模块添加到 opencart 管理？

> ID：10971817
> 
> 赞同：4
> 
> 时间：2012-06-10T19:48:54.100
> 
> 标签：php, opencart

我想在 opencart 管理中将子菜单项“位置”添加到“目录”菜单项。在选择位置时，我想查看我自己的位置管理视图页面，该页面包含我自己在 opencart 数据库中的位置表。

请让我知道在哪里以及创建什么 mvc 以在打开的购物车中实现此功能。谢谢你。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-11T14:01:56.857

**如何创建一个 opencart 管理模块？**

您可以通过调整简单地做到这一点：

```
Admin > controller > view > template > common > header.tpl 
```

您可以简单地调整此页面上的菜单（静态更改）。为您和您的员工等实际创建模块。然后按照此页面上发布的 MVC 教程进行操作：

[如何在 Opencart 中创建自定义管理页面？](https://stackoverflow.com/questions/10700761/how-to-create-a-custom-admin-page-in-opencart/10701414#10701414)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-18T09:56:46.077

我已经在我的 opencart 项目中实现了你的概念。

笔记：

1）默认情况下，在产品添加仪表板页面中有一个输入产品位置的字段，您在那里填写产品位置并按照我的观点

2）打开目录>模型> category.php添加此代码

```
function getCategoryLoction($category_id) {
    $sql = "select p.location,count(p.location) as locCount from " . DB_PREFIX . "product p inner join " . DB_PREFIX . "product_to_category p2c on(p.product_id=p2c.product_id) where p2c.category_id=$category_id group by p.location";
    $query = $this->db->query($sql);
    return $query->rows;
} 
```

3）打开目录>控制器>模块> category.php添加此代码

```
/* location based search starts here */
$incomingCatId  = ($this->data['category_id']!= '')?$this->data['category_id']:'0';
$locations  =   $this->model_catalog_category->getCategoryLoction($incomingCatId); 

foreach($locations as $loc):
    $this->data['locations'][] = array(
        'location' => $loc['location'],
        'count' =>  $loc['locCount'],
        'href' => $this->url->link('product/category', 'path=' . $incomingCatId.'&loc='.$loc['location'].'')
);
endforeach;    
/* location based search ends here */ 
```

4）打开目录>查看>主题>默认>模板>模块>类别.tpl类别添加此代码

```
<div class="l_nav_box">
    <div class="l_nav_title">
        <h6>Location</h6>
    </div>
    <ul class="cat_ul">
         <?php if(!empty($locations)): ?>
         <?php foreach ($locations as $loc) : ?>
         <?php if($loc['location']!= ''): ?>
         <li> <a href="<?php echo $loc['href']; ?>"><?php echo $loc['location']; ?> <span>(<?php echo $loc['count']; ?>)</span> </a> </li>

         <?php endif; ?>
         <?php endforeach; ?>
         <?php else: ?>
         No Locations mentioned
         <?php endif; ?>    
    </ul>       
</div> 
```

5）在管理员端重要激活类别模块并保存选择

# oracle - 在 Debian 上安装 Oracle 以访问外部数据库

> ID：10971819
> 
> 赞同：2
> 
> 时间：2012-06-10T19:49:08.637
> 
> 标签：oracle, debian, sqlplus

我对现有的文档有点迷茫。

我正在尝试使用 Debian Box 访问网络中的 oracle 服务器。理想情况下，我需要做的是在 SQL plus 中执行一些任务，因此它会定期执行。

我的脚本已经准备好，但我不确定如何进行安装，或者安装什么才能访问 SQLPlus。我需要成熟的 oracle 客户端吗？甲骨文 XE？SquirrelSQL 会工作吗？

非常感谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-10T21:21:31.317

您只需要 Oracle 客户端，而不是完整的数据库安装。你可以[在这里下载](http://www.oracle.com/technetwork/database/enterprise-edition/downloads/112010-linuxsoft-085393.html)。从它的声音来看，您不需要完整的客户端。

# image-processing - （生物）使用 OpenCV 进行细胞识别

> ID：10971820
> 
> 赞同：3
> 
> 时间：2012-06-10T19:49:09.703
> 
> 标签：image-processing, opencv, pattern-matching

这里所有与模式识别相关的帖子都涉及面部、手部、字符识别。我想知道，是否有人已经连续使用 OpenCV 来识别显微镜图片上的细胞。我目前能够做的是使用阈值和形状检测来计数单元格（更改阈值、计数形状、丢弃具有无效大小的形状）。我的下一个任务是识别大约 20 种细胞。交流经验会很有趣。可能是，OpenCV 不是适合/过重的工具吗？

问候， 瓦伦丁·海尼茨

**编辑** 投票再次让我对这个老问题的注意力淹没了。我终于用 OpenCV 完成了任务。它运行良好，该工具去年被 FDA 批准为诊断设备的软件部分 :-) 现在我认为 OpenCV 是解决此问题的完美工具，尽管我必须自己实现 Haralick-Features。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-11T00:26:41.790

你的问题是机器学习问题。OpenCV 为此提供了一些工具，[SVM](http://docs.opencv.org/modules/ml/doc/support_vector_machines.html)将非常适合您尝试做的事情。我有使用 Kohonen 神经网络的经验，如果你有一个很好的细胞数据库，这也是一个好主意。但是，我不知道你在 C++ 方面有多好，但从 matlab 开始，让你的算法工作，然后用 C++ 重写它总是一个好主意。为了快速测试你的想法，matlab 绝对是一个更好的工具，它有很多可用的 ML 函数。

# c++ - 如何将子方法作为参数传递给父函数

> ID：10971822
> 
> 赞同：1
> 
> 时间：2012-06-10T19:49:40.430
> 
> 标签：c++, c++builder

在以下极其缩写的类中，我想在基类中定义一个方法（ProcessLines），该方法将遍历一组数据库记录，将每条记录作为参数传递给仅在子类中定义的函数。显然 Base 是一个永远不会自行实例化的虚拟类。

```
Class Base {
 public:
  typedef ProcLineFunc( Long *Line );
  void ProcessLines( ProcLineFunc pf);
}

Class Child{
  void DoWork( Long *Line) { //do something}
} 
```

我不确定如何实现这一点。如果我在子项中重新声明 ProcessLines 并仅调用父方法，则会收到与在创建子项的代码中调用 ProcessLines 相同的错误消息。

```
Child c(//something);
c.ProcessLines(c.DoWork); 
```

给我一个编译器消息：

> [BCC32 错误] main.cpp(67): E2034 无法转换 'bool (* (_closure )(long *))(long *)' >to 'int (* )(long *)'
> 完整的解析器上下文
> main.cpp(56) : class Add2Chan
> main.cpp(78): 决定实例化: bool Add2Chan::ProcessByLines()
> --- 重置解析器上下文以进行实例化...
> main.cpp(67): 解析: bool Add2Chan::ProcessByLines()

我对 c++ 还很陌生，E2034 错误消息吓到我了。

请帮忙。我使用了 typedef，这样我就可以在我的子类中多次调用 ProcessLines，并在执行过程中传递不同的函数。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-10T20:09:14.707

通常你会用一个受保护的纯虚函数来做这种事情：

```
class Base {
  public:
    ProcessLines() {
        //Logic to process lines here, obviously psuedo-code
        while(moreLines) {
            ProcessLine(line);
        }
    }
  protected:
    virtual void ProcessLine(const Line& line) = 0;
}

class Child : public Base {
  protected:
    void ProcessLine(const Line& line) { //Logic to process the line for this type }
};

class DifferentChild : public Base {
  protected:
    void ProcessLine(const Line& line) { //Logic to process the line for DifferentChild }
}; 
```

我想这就是你要找的东西。在我看来，您正试图以一种奇怪的方式实现多态性，但这是在 C++ 中实现它的正常方式。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-10T22:13:19.977

不要使用指向函数的指针，而是使用指向对象的指针。接受你的函数将被调用的限制，`DoWork`没有别的，每个类中只能有一个这样的函数。这不是一个糟糕的限制。*在类（称为接口*）中声明（纯虚）函数，并从中派生类（称为*实现*接口）。

```
struct DoingWork
{
    virtual void DoWork(long *Line) = 0; // does some work on a list
};

struct DoingGreatWork: DoingWork
{
    virtual void DoWork(long *Line) {printf("Great work\n");}
};

struct DoingSlightWork: DoingWork
{
    virtual void DoWork(long *Line) {printf("Slight work\n");}
}; 
```

使用这个例子：

```
class Base {
  public:
    void ProcessLines(DoingWork& object) {
        //Logic to process lines here
        while(moreLines) {
            object.DoWork(line);
        }
    }
};

class Whatever // no need to derive from Base
{
    void DoStuff()
    {
        Base object;

        object.ProcessLines(DoingGreatWork());
        object.ProcessLines(DoingSlightWork());
    }
} 
```

如果工作对象必须有权访问调用对象，请像这样初始化它们：

```
class Whatever // no need to derive from Base
{
    struct DoingElaborateWork: DoingWork
    {
        Whatever& caller;
        DoingElaborateWork(Whatever& caller): caller(caller) {}
        virtual void DoWork(long *Line)
        {
            printf("Doing work requested by %s\n", caller.name());
        }
    };

    void DoStuff()
    {
        Base object;
        object.ProcessLines(DoingElaborateWork(*this));
    }

    const char* name() {return "Whatever";}
} 
```

PS 他们说“在 C++03 中，[函数是二等公民](http://en.wikipedia.org/wiki/First-class_function)”，因为你不能用函数做你可以用对象做的事情（比如我提供的这个解决方案）。我听说在 C++11 中函数有了很大改进，但我不确定细节。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-27T00:40:07.763

由于您在 C++Builder 中执行此操作，因此您可以利用它的`__closure`扩展来完全按照您的要求进行操作（VCL 的某些部分正是为自己的回调执行此操作）：

```
class Base
{ 
public: 
    virtual ~Base() {}

    typedef void (__closure *ProcLineFunc)( Long *Line ); 
    void ProcessLines( ProcLineFunc pf); 
}; 

class Child : public Base
{ 
public:
    void DoWork( Long *Line) { //do something} 
}; 

Child c(...); 
c.ProcessLines(c.DoWork); 
```

# ios - 从通知中心删除“远程通知”

> ID：10971825
> 
> 赞同：0
> 
> 时间：2012-06-10T19:49:58.453
> 
> 标签：ios, objective-c, push-notification, apple-push-notifications

我有以下问题：“我的应用程序从自己的服务器接收一些远程通知，只是为了向用户显示一些实用信息。我没有使用图标徽章，因为我不需要它。如果应用程序用户触摸遥控器来自 iOS 通知中心的通知我的应用程序可以毫无问题地捕获它，我收到选项，`application:didFinishLaunchingWithOptions:`或者，如果应用程序打开，我会使用选择器捕获远程通知`application:didReceiveRemoteNotification:`。但是，现在我想从 iOS 通知中心删除这些通知，因为它只是一条消息，我一直在其他帖子中寻找答案，我已经在我的应用程序中尝试了这些解决方案，但它们不起作用”

接下来是一些解决方案：

```
- (void)application:(UIApplication *)application didReceiveRemoteNotification:(NSDictionary *)userInfo {  
    [application cancelAllLocalNotifications];  
    application.applicationIconBadgeNumber = 0;  
    ...  
}

- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions {  
    ...  
    if (launchOptions) {  
        [application cancelAllLocalNotifications];  
        application.applicationIconBadgeNumber = 0;  
    }  
    ...  
} 
```

远程通知仍然在 iOS 通知中心，我怎样才能在没有任何棘手代码或 iOS SDK 问题的情况下从那个地方删除？我认为这不可能是因为 Tweetbot 应用程序在您进入应用程序后会从 iOS 通知中心删除其远程通知。

问候！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2017-05-12T16:50:51.507

随着`UNUserNotificationCenter`iOS 10 及更高版本的引入，现在可以删除应用程序的少数或全部远程通知。

> [UNUserNotificationCenter 文档](https://developer.apple.com/reference/usernotifications/unusernotificationcenter)

使用此类的共享单例实例，可以管理设备上传递的远程通知。具体来说，可以使用以下方法： `func removeDeliveredNotifications(withIdentifiers: [String])`如果要删除应用程序的特定通知，或者`func removeAllDeliveredNotifications()`删除应用程序的所有通知。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-11T02:57:35.060

首先确保您没有在控制面板中将徽章通知设置为关闭（我注意到如果徽章有一个数字开头，那么徽章在控制面板中被关闭，它不能设置为0） .

如果它没有关闭，那么除了将 applicationIconBadgeNumber 设置为 0 之外，还可以尝试取消所有本地通知（即使您没有排队，如果您先获取它们的列表，然后取消它们，然后重新注册它们） . 是的，清除本地通知可能会影响清除远程通知的徽章编号。

# java - 在命令行中制作一个java包

> ID：10971838
> 
> 赞同：8
> 
> 时间：2012-06-10T19:51:45.853
> 
> 标签：java, linux, command-line, package

虽然它可能被推荐用于编码高级 java 项目的一种用途和 IDE，但我个人更喜欢几乎完全运行命令行（使用 gedit 作为文本编辑器）。所以请不要只告诉我“只需使用 Eclipse！” 什么的：P

我的问题是通过命令在java中创建包的方法是什么。

我不是在谈论打包在命令行中运行的应用程序，而是在谈论在命令行中制作包。我在制作文本文件吗？我在做目录吗？

与此相关的是，如何在不使用 IDE 的情况下链接到相关的库和本机？

我知道我在这里真的很尴尬，但我真的更喜欢控制在命令行中工作。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-06-10T19:57:56.610

它分为三个部分：（1）创建目录结构；(2) 在java文件中指明包；(3) 编译它。

例如，如果要创建 package `com.mycompany.myproject`，则需要从项目的基本目录开始，然后：

(1) 创建目录`com/mycompany/myproject`

(2) 在该目录中创建 java 文件，并`package com.mycompany.myproject`在其中说明；

(3) 编译文件，例如，使用`javac -cp . com/mycompany/myproject/*.java`

您可能希望指定不同的输出目录，以免混合源和编译的类。

如果您需要使用外部库（.jar 文件）进行编译，则需要使用`-cp`或`-classpath`命令行参数`javac`来指定它们，例如

```
javac -cp .:some_library.jar:lib/another_library.java com/mycompany/myproject/*.java 
```

将所有外部库放在一个地方可能是个好主意，例如`lib`主项目目录的子目录。而且，顺便说一下，上面的`javac`命令假定了类 unix 的环境。如果您使用的是 Windows，则需要使用`;`路径分隔。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-06-10T19:56:03.890

包只是文件系统上的目录。所以你的 package:`com.mycompany.util`对应一个 directory `com/mycompany/util`。

在运行和编译等时，您当前的工作目录应该是该顶级目录所在的位置。

要包含库，请在编译和运行时将它们包含在类路径中。例如，创建一个项目目录`myproject`，并在该目录下包含您的 java 文件和包`myproject/src/`以及您在下面使用的库，`myproject/libs/` 然后当您当前的工作目录`myproject`执行`java -cp .:libs/*.jar` 或与`javac`.

但我建议你考虑使用 ant 或 maven。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-10T19:55:15.543

[通过使用诸如Ant](http://ant.apache.org/)或[Maven](http://maven.apache.org/what-is-maven.html)之类的打包工具，您可以在命令行上很好地相处。Maven 特别方便，因为它是一个更高级别的工具，它已经知道如何构建各种项目类型：命令行应用程序、webapps、库等。它还通过从存储库下载库依赖项来处理库依赖项。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2016-01-13T10:09:40.777

Java 包只是一个目录结构，因此创建包的简单方法可以说是终端中的 com.organization.test

```
mkdir -p com/organization/test 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2020-04-30T21:17:14.160

// 创建一个新目录和一个子文件夹作为你的包

```
$ mkdir -p parent/child 
```

// 进入它：

```
$ cd parent/child 
```

//创建一个空的java文件

```
$ touch MyClass.java 
```

//编辑当前文件

```
$ nano MyClass.java

package child; 
 public class MyClass { 
} 
```

PS：你电脑上的目录结构跟包名有关。这意味着当您编辑 .java 文件时，它需要有一个包声明（您的包），否则您将拥有一个默认包（例如：java.util.*）。

# c# - AutoMapper 复杂 ViewModel 属性

> ID：10971839
> 
> 赞同：0
> 
> 时间：2012-06-10T19:52:00.743
> 
> 标签：c#, asp.net-mvc-3, automapper

我希望您能够帮助我解决我正在开发的测试 ASP.NET MVC 应用程序中遇到的 Automapper 问题。

我环顾四周，找不到与我试图通过嵌套 ViewModel 实现的目标完全一样的东西。

基本上，我有这 2 个领域模型……</p>

```
namespace Test.Domain.Entities
{
    public class Contact
    {
        [HiddenInput(DisplayValue = false)]
        [Key]
        public int ID { get; set; }

        public Name Name { get; set; }

        public string Contact_Landline { get; set; }

        public string Contact_Mobile { get; set; }

        [DataType(DataType.EmailAddress)]
        public string Contact_Email { get; set; }
    }
} 
```

和..

```
namespace Test.Domain.Entities
{
    public class Name : DisplayableModel
    {
        [HiddenInput(DisplayValue = false)]
        [Key]
        public int ID { get; set; }

        public string Name_Forename { get; set; }

        public string Name_Surname { get; set; }

        public string GetFullName()
        {
            return Name_Forename + ' ' + Name_Surname;
        }
    }
} 
```

我有这 2 个 ViewModel……</p>

```
namespace Test.WebUI.Models
{
    public class ContactViewModel :
    {
        [HiddenInput(DisplayValue = false)]
        [Key]
        public int ID { get; set; }

        public NameViewModel Name { get; set; }

        public string Contact_Landline { get; set; }

        public string Contact_Mobile { get; set; }

        [DataType(DataType.EmailAddress)]
        public string Contact_Email { get; set; }
    }
} 
```

还有……</p>

```
namespace Test.WebUI.Models
{
    public class NameViewModel 
    {
        [HiddenInput(DisplayValue = false)]
        [Key]
        public int ID { get; set; }

        public string Name_Forename { get; set; }

        public string Name_Surname { get; set; }
    }
} 
```

我想将 ContactViewModel 返回到我的视图，其中 Name 属性填充了填充 Contact 域对象的 Name 属性。

我的控制器中有这段代码……</p>

```
Mapper.CreateMap<Name, NameViewModel>();
Mapper.CreateMap<Contact, ContactViewModel>();
var contact = Mapper.Map<Contact, ContactViewModel>(repository.Contact.Where(c => c.ID == id).Single()); 
return View(contact); 
```

这是我遇到问题的地方，我的 Name 属性永远不会被填充。

我选择以这种方式设计我的应用程序的原因是因为我的视图由自定义模型模板组成，因此我可以一致地呈现 NameViewModel 对象而无需重复代码，就像在这个简单的示例中一样......</p>

```
@model Test.WebUI.Models.NameViewModel

First
@Model.Name_Forename
Last
@Model.Name_Surname 
```

如果有人可以帮助向我解释我应该如何使用 AutoMapper 填充 ContactViewModel 的 NameViewModel 对象，我将不胜感激。

谢谢。吉姆

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-10T19:59:08.677

这应该开箱即用，如下所示：

```
public class Name 
{
    [HiddenInput(DisplayValue = false)]
    [Key]
    public int ID { get; set; }

    public string Name_Forename { get; set; }

    public string Name_Surname { get; set; }

    public string GetFullName()
    {
        return Name_Forename + ' ' + Name_Surname;
    }
}

public class Contact
{
    public int ID { get; set; }

    public Name Name { get; set; }

    public string Contact_Landline { get; set; }

    public string Contact_Mobile { get; set; }

    public string Contact_Email { get; set; }
}

public class NameViewModel
{
    [HiddenInput(DisplayValue = false)]
    [Key]
    public int ID { get; set; }

    public string Name_Forename { get; set; }

    public string Name_Surname { get; set; }

}

public class ContactViewModel
{
    [HiddenInput(DisplayValue = false)]
    [Key]
    public int ID { get; set; }

    public NameViewModel Name { get; set; }

    public string Contact_Landline { get; set; }

    public string Contact_Mobile { get; set; }

    [DataType(DataType.EmailAddress)]
    public string Contact_Email { get; set; }
}

class Program
{
    static void Main()
    {
        Mapper.CreateMap<Name, NameViewModel>();
        Mapper.CreateMap<Contact, ContactViewModel>();

        var contact = new Contact
        {
            Name = new Name
            {
                Name_Forename = "forename"
            }
        };
        var vm = Mapper.Map<Contact, ContactViewModel>(contact);
        Console.WriteLine(vm.Name.Name_Forename);
    }
} 
```

按预期打印：

```
forename 
```

因此，请确保`repository.Contact.Where(c => c.ID == id).Single()`调用返回一个`Contact`实例，该实例的`Name`属性已正确实例化并包含其属性的值。

现在，话虽如此，您的代码存在几个问题：

*   您已经使用属性修饰了域模型属性，该`[HiddenInput]`属性是视图特定的东西并且属于您的视图模型。
*   您已经使用属性修饰了视图模型`[Key]`属性。那是视图模型应该不知道的数据访问特定的东西。
*   `Mapper.CreateMap<TSource, TDest>`您正在控制器操作中调用该方法。这是错误的。在应用程序域的整个生命周期中，映射定义应该只完成一次。这通常发生在内部调用的辅助方法中，`Application_Start`以确保您的映射定义只完成一次。在您的控制器操作中，您应该只使用该`Mapper.Map<TSource, TDest>`方法来执行实际的映射。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-11T09:51:40.517

如前所述，您应该只定义一次映射（在 APP_Start 文件夹中）不确定这是否正是您需要的，但您可以通过以下方式进行映射：

```
Mapper.CreateMap<Contact, ContactViewModel>()
.ForMember(c => c.Name, opt => opt.MapFrom(o => o.Name_Forename + " " + o.Name.Lastname); 
```

# core-data - 如何取消删除 Core Data 中标记为删除的托管对象？

> ID：10971842
> 
> 赞同：2
> 
> 时间：2012-06-10T19:52:21.980
> 
> 标签：core-data, synchronization

在 Core Data 中创建托管对象：

```
NSManagedObject *aManagedObject = [NSEntityDescription
insertNewObjectForEntityForName:@"Employee"
inManagedObjectContext:aContext]; 
```

要删除托管对象，请向其托管对象上下文发送消息。

```
[aContext deleteObject:aManagedObject]; 
```

该方法向 aManagedObject 发送消息

```
- (void)prepareForDeletion 
```

这是我的问题。我正在将此数据与外部数据库同步。我有一个名为“已删除”的属性。当一个对象第一次“删除”时，我想将“已删除”属性设置为 YES，然后将其同步到被删除的外部数据库。在未来某个日期，所有“已删除”==YES 实体都将过期并真正被删除。

在 prepareForDeletion 我想测试看看是否：

*   dateSynced >= dateModified
*   dateSynced <= expirationDate
*   “已删除” == 是

并真正删除对象，否则：

*   dateModified = 现在
*   “已删除” = 是
*   并使其**不被**删除

有没有办法让它此时不删除？

或者，我是否应该尝试使用 prepareForDeletion 覆盖 deleteObject 并创建一个新方法，例如 obsoleteObject 来设置“deleted”= YES 和 dateModified=Now 并且以后只使用 deleteObject 进行清除？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-11T12:10:43.990

我最近实施了这样的机制。

一旦实体被标记为已删除，您就不能延迟实体删除。下次保存上下文时，它将被删除。您必须依靠其他东西来保持同步。

这是我的解决方案。我创建了一个持久的事件日志，其中一些是删除事件。当一个实体被标记为已删除时，我会创建一个相应的日志条目（实际上是在另一个上下文中，它保存在删除对象的上下文之前，以确保日志条目是最新的，并在执行实际删除之前保存）。稍后处理日志并将删除命令发送到服务器。如果保存了日志，但由于崩溃而删除的实体从未删除，则下次启动应用程序时，处理日志，本地和远程同时删除实体，一切正常。

听起来很复杂，但实际上并没有。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-10T21:02:58.070

我想，你不能那样做。我已经这样做了 - 在对象删除时我存储它的对象 ID（在我的情况下它是 guid 存储为文件）并且在同步时我将删除推送到服务器。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-08-17T19:11:23.283

我**不**建议这样做，但有一种方法可以从 Core Data 中“取消删除”一个对象。这可能不是你想要的。

只需调用`insert(object)`要取消删除的对象就可以了。如果对象删除未保存在上下文中，则必须先调用`processPendingChanges()`。

**重要**：在取消删除之后，您还必须设置对象的所有属性，并取消删除在处理未决更改时（或保存上下文时）可能已应用的所有级联删除。

请记住，这是一件危险的事情！你应该避免这样做。

我在 iOS 10 上保存之前测试了取消删除。

# c# - C# 中昂贵对象的内存管理/缓存

> ID：10971845
> 
> 赞同：6
> 
> 时间：2012-06-10T19:52:37.007
> 
> 标签：c#, caching, memory-management, garbage-collection, weak-references

假设我有以下对象

```
public class MyClass
{
    public ReadOnlyDictionary<T, V> Dict
    {
        get
        {
            return createDictionary();
        }
    }
} 
```

假设这`ReadOnlyDictionary`是一个只读包装器`Dictionary<T, V>`。

该`createDictionary`方法需要大量时间才能完成，并且返回的字典相对较大。

显然，我想实现某种缓存，这样我就可以重用结果，`createDictionary`但我也不想滥用垃圾收集器并使用太多内存。

我想过使用`WeakReference`字典，但不确定这是否是最好的方法。

你会推荐什么？如何正确处理可能多次调用的昂贵方法的结果？

更新：

我对 C# 2.0 库（单个 DLL，非可视）的建议感兴趣。该库可能用于 Web 应用程序的桌面。

更新 2：

这个问题也与只读对象有关。我将属性的值从 更改`Dictionary`为`ReadOnlyDictionary`。

更新 3：

是相对简单的`T`类型（例如字符串）。这`V`是一个自定义类。您可能会假设`V`创建一个实例的成本很高。字典可能包含从 0 到几千个元素。

假定从单个线程或具有外部同步机制的多个线程访问代码。

如果没有人使用字典是 GC-ed，我很好。我试图在时间（我想以某种方式缓存 的结果`createDictionary`）和内存开销（我不想让内存占用的时间超过必要的时间）之间找到平衡。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-10T20:25:53.830

WeakReference 不是缓存的好解决方案，因为如果没有其他人引用您的字典，您的对象将无法在下一次 GC 中存活。您可以通过将创建的值存储在成员变量中来制作简单的缓存，如果它不为空，则可以重用它。

这不是线程安全的，如果您有大量的并发访问权限，您最终会在某些情况下多次创建字典。您可以使用双重检查锁定模式以最小的性能影响来防止这种情况。

为了进一步帮助您，您需要指定并发访问是否对您来说是一个问题，以及您的字典确实消耗了多少内存以及它是如何创建的。例如，如果字典是昂贵查询的结果，它可能有助于简单地将字典序列化到光盘并重用它，直到您需要重新创建它（这取决于您的特定需求）。

如果您没有明确的策略何时应从缓存中删除对象，则缓存是内存泄漏的另一个说法。由于您正在尝试 WeakReference，我假设您不知道何时是清除缓存的最佳时机。

另一种选择是将字典压缩成内存较少的结构。你的字典有多少个键，值是什么？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-10T20:34:28.363

有四种主要机制可供您使用（懒惰是 4.0 中的，所以没有选择）

1.  延迟初始化
2.  虚拟代理
3.  鬼
4.  价值持有者

每个都有自己的优势。

我建议使用一个值持有者，它会在第一次调用持有者的 GetValue 方法时填充字典。那么您可以根据需要使用该值并且它只执行一次并且只在需要时完成。

欲了解更多信息，请参阅[马丁福勒页面](http://martinfowler.com/eaaCatalog/lazyLoad.html)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-10T20:58:19.007

您确定需要缓存整个字典吗？

根据您的说法，最好保留一个最近使用的键值对列表。

如果在列表中找到键，则返回值。

如果不是，则创建一个值（据说这比创建所有值更快，并且使用的内存也更少）并将其存储在列表中，从而删除未使用时间最长的键值对。

这是一个非常简单的 MRU 列表实现，它可以作为灵感：

```
using System.Collections.Generic;
using System.Linq;

internal sealed class MostRecentlyUsedList<T> : IEnumerable<T>
{
    private readonly List<T> items;
    private readonly int maxCount;

    public MostRecentlyUsedList(int maxCount, IEnumerable<T> initialData)
        : this(maxCount)
    {
        this.items.AddRange(initialData.Take(maxCount));
    }

    public MostRecentlyUsedList(int maxCount)
    {
        this.maxCount = maxCount;
        this.items = new List<T>(maxCount);
    }

    /// <summary>
    /// Adds an item to the top of the most recently used list.
    /// </summary>
    /// <param name="item">The item to add.</param>
    /// <returns><c>true</c> if the list was updated, <c>false</c> otherwise.</returns>
    public bool Add(T item)
    {
        int index = this.items.IndexOf(item);

        if (index != 0)
        {
            // item is not already the first in the list
            if (index > 0)
            {
                // item is in the list, but not in the first position
                this.items.RemoveAt(index);
            }
            else if (this.items.Count >= this.maxCount)
            {
                // item is not in the list, and the list is full already
                this.items.RemoveAt(this.items.Count - 1);
            }

            this.items.Insert(0, item);

            return true;
        }
        else
        {
            return false;
        }
    }

    public IEnumerator<T> GetEnumerator()
    {
        return this.items.GetEnumerator();
    }

    System.Collections.IEnumerator System.Collections.IEnumerable.GetEnumerator()
    {
        return this.GetEnumerator();
    }
} 
```

在您的情况下， T 是一个键值对。保持 maxcount 足够小，以便搜索保持快速，并避免过多的内存使用。每次使用项目时调用 Add。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-11T20:54:33.507

`WeakReference`如果对象在缓存中存在的有用生命周期与对象的引用生命周期相当，则应用程序应用作缓存机制。例如，假设您有一个方法，该方法将`ReadOnlyDictionary`基于反序列化 a 来创建 a `String`。如果一个常见的使用模式是读取一个字符串，创建一个字典，用它做一些事情，放弃它，然后用另一个字符串重新开始，`WeakReference`可能并不理想。另一方面，如果您的目标是将许多字符串（其中不少是相等的）反序列化为`ReadOnlyDictionary`如果重复尝试反序列化相同的字符串产生相同的实例，这可能非常有用。请注意，节省不仅来自于只需构建一次实例的工作，而且还来自以下事实：（1）不必在内存中保留多个实例，以及（2）如果`ReadOnlyDictionary`变量引用同一个实例，则可以知道它们是等价的，而无需检查实例本身。相比之下，确定两个不同的`ReadOnlyDictionary`实例是否等价可能需要检查每个实例中的所有项目。必须进行许多此类比较的代码可以从使用`WeakReference`缓存中受益，这样保存等效实例的变量通常会保存相同的实例。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-10T20:25:29.447

我认为您可以依靠两种机制进行缓存，而不是自己开发。第一个，正如您自己建议的那样，是使用 Wea​​kReference，并让垃圾收集器决定何时释放此内存。

你有第二种机制——内存分页。如果字典是一口气创建的，它可能会存储在堆的或多或少连续的部分中。只需保持字典处于活动状态，如果不需要，让 Windows 将其分页到交换文件。根据您的使用情况（您的字典访问的随机性），您最终可能会获得比 WeakReference 更好的性能。

如果您接近地址空间限制（这仅在 32 位进程中发生），则第二种方法是有问题的。

# ssh - ec2 scp -i mykey.pem 警告：身份文件 mykey.pem 不可访问：没有这样的文件或目录。权限被拒绝（公钥）

> ID：10971847
> 
> 赞同：0
> 
> 时间：2012-06-10T19:52:47.157
> 
> 标签：ssh, amazon-ec2, pem

尝试将简单的目录或文件上传到 Amazon ec2 实例。我在独立的 java ssh 客户端和 winscp 中使用如下命令：

```
scp -i mykey.pem ~/Downloads/zuni.jpg bitnami@ec2-184-72-159-94.compute-1.amazonaws.com:/home/bitnami/apps/magento/

Warning: Identity file mykey.pem not accessible: No such file or directory. 
```

权限被拒绝（公钥）。

我尝试在实例上找到密钥但找不到，即使我看到一堆其他 .pem 密钥。它没有找到 .pem 文件。很多人都有上传到ec2的这个问题。

1.  我如何在实例上找到 mykey.pem （我尝试了详尽并找到 /etc/ssl/certs 但我的密钥不在其中）。

2.  为什么这不起作用？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-13T13:03:32.793

密钥应该在您的本地机器上而不是实例上。如果您没有尝试使用 aws 管理页面生成它

# objective-c - 使用 CALayer 作为 GLKView 支持层的掩码会阻止触摸事件？

> ID：10971849
> 
> 赞同：1
> 
> 时间：2012-06-10T19:52:56.200
> 
> 标签：objective-c, calayer, cashapelayer

我正在尝试使用 CAShapeLayer 作为 GLKView 支持层的掩码，如下所示：

```
CGRect circleFrame = CGRectMake(0, 0, 800, 800);
UIBezierPath *path = [UIBezierPath bezierPathWithOvalInRect:circleFrame];
CGPoint circleAnchor = CGPointMake(CGRectGetMidX(circleFrame) / CGRectGetMaxX(circleFrame),CGRectGetMidY(circleFrame) / CGRectGetMaxY(circleFrame));

shapeLayerMask = [[CAShapeLayer alloc] init];
shapeLayerMask.path = path.CGPath;
shapeLayerMask.anchorPoint = circleAnchor;
shapeLayerMask.frame = CGRectMake(0, 0,800, 800);
shapeLayerMask.fillColor = [UIColor blackColor].CGColor;

shapeLayerMask.backgroundColor = [UIColor clearColor].CGColor;
shapeLayerMask.opacity = 1.0f;
shapeLayerMask.hidden = NO;

self.view.layer.mask = shapeLayerMask; 
```

但是一旦我这样做，我所有的触摸事件都会停止触发。不再有 touchesBegan、touchesEnded 等。有人知道为什么吗？提前致谢！

# c++ - 如何使用 Qt 在运行时从一个对象绘制一条线（或箭头）到另一个对象

> ID：10971854
> 
> 赞同：1
> 
> 时间：2012-06-10T19:53:14.897
> 
> 标签：c++, qt, draw, lines

我必须使用 Qt 设计一个 GUI。我想画多条线来描绘两个对象之间的关系。这与通过在两者之间画一条直线（可能是对角线）来将单词与定义匹配的想法相同。

在我的情况下，它是一个需要与另一个标签匹配的标签（其中包含图像）。

所以我们有这样的东西 - [http://dl.dropbox.com/u/46437808/DrawLines.png](http://dl.dropbox.com/u/46437808/DrawLines.png)

我想添加线条使它看起来像这样[http://dl.dropbox.com/u/46437808/DrawLines2.png](http://dl.dropbox.com/u/46437808/DrawLines2.png)

我需要在运行时执行此操作，因为这种关系会根据不同的因素而变化。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-11T04:33:36.303

您需要交互还是这只是用户需要根据其他信息看到的图像？如果它只是一个静态图像，我会简单地将它绘制到 QImage 上并显示它。这样你就可以完全控制事物的绘制方式。因此，您可以提前缓存所需的关系图，也可以根据当时需要显示的关系将它们即时绘制到 QImage 上。您可以查看[Qt 的绘画示例](http://qt-project.org/doc/qt-4.8/painting-basicdrawing.html)，了解有关如何完成所需内容的一些想法。

如果您需要交互性，我可能会使用[Graphics View Framework](http://qt-project.org/doc/qt-4.8/graphicsview.html)。这样，如果您出于任何原因需要按钮、复选框等，您可以使用 QGraphicsProxyWidget 来获取它们，或者您可以从 QGraphicsItem 子类中制作自己的。

# paypal - 如何检查 Paypal Express Checkout 的付款失败

> ID：10971857
> 
> 赞同：0
> 
> 时间：2012-06-10T19:53:40.793
> 
> 标签：paypal, recurring-billing

我们在我们的网站上使用 Paypal 定期计费服务（使用**Express Checkout**）进行每月订阅。由于我们有一个*澳大利亚帐户*，因此我们无法使用 Paypal 提供的 DPRP（直接付款定期付款）服务，因为看起来，DPRP 服务仅限于**少数国家**（美国、英国和加拿大）。

在 Express 结帐时，*Paypal 网站*会收到付款详情。所以**我们没有任何信息**，无论是支付失败，用户点击浏览器中的返回按钮还是他/她故意点击取消支付。

在与 Paypal 支持团队交谈后，我们知道**付款失败可能有多种原因**，卖家必须自己联系 Paypal。因此，我们**无法**在我们的网站上提供任何故障排除。

所以我们想知道，*是否有任何可能的解决方案来避免这种情况*，或者至少我们可以*区分付款失败的用户和故意返回我们网站*而不付款的用户，因为这样我们不仅无法跟进他们，而且也失去了一部分对我们的服务感兴趣的客户群。

对此的任何帮助表示赞赏。谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-19T03:45:30.733

You should implement the Pay Pal IPN (Instant Payment Notification).

You configure the IPN url address on your PayPal merchant account settings. This page is simple HTML page with server-side programming that is listening for requests coming from PayPal.

There's no need to do something extra in the checkout process for making IPN work. Once you set this up, it will automatically work.

Every time something happens with a transaction in your merchant account, e.g. transaction completed/failed/canceled, PayPal will send an HTTP Post to your IPN listener URL.

Here you can get all the relevant information about the transaction, like the payer ID, the payment status. With this information you can decide what to do with your customer's order.

# symfony - 表单实体类型

> ID：10971866
> 
> 赞同：0
> 
> 时间：2012-06-10T19:54:24.920
> 
> 标签：symfony, doctrine-orm

任何人都知道如何以一种简洁明了的方式向实体字段类型添加一些自定义选项？例如

```
->add('groups', 'entity', array(
                'class' => 'MyBundle:Groups',
                'multiple' => 'true',
                'query_builder' => function(GroupsRepository $er) {
                            return $er->createQueryBuilder('g')
                                ->orderBy('g.name', 'ASC');
                        })) 
```

假设查询生成器返回“Group1”、“Group2”和“Group3”。我想要的是“注入”另一个名为“Any Group”的选项，例如。

谢谢，斯特利安

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-11T07:55:09.167

`EntityType`是 的孩子`ChoiceType`。因此，您可以访问[相同的选项](http://symfony.com/doc/current/reference/forms/types/choice.html)。

```
->add('groups', 'entity', array(
    'class' => 'MyBundle:Groups',
    'multiple' => 'true',
    'query_builder' => function(GroupsRepository $er) {
        return $er->createQueryBuilder('g')->orderBy('g.name', 'ASC');
     },
     'empty_value' => 'Any group',
)) 
```

# c++ - 在opencv中保存图像的奇怪行为

> ID：10971868
> 
> 赞同：2
> 
> 时间：2012-06-10T19:54:34.193
> 
> 标签：c++, image, opencv

在做了一些 opencv 操作后，我初始化了一个我想使用的新图像。保存这个空图像会产生奇怪的结果

![在此处输入图像描述](../Images/d7bad13d356dce5564f1350e89170efa.png)

我用来保存此图像的行是：

```
Mat dst2 (Size (320, 240), CV_8UC3);
imwrite("bla.jpg", dst2); 
```

我应该得到一个黑色的图像，但这就是我得到的。将这两行移到程序的开头，一切都很好，以前有人遇到过这个问题吗？

我刚刚注意到这些白线包含我在同一程序中处理的其他图像的部分

问候

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-10T21:04:26.117

因为你没有用任何值初始化图像，你只是定义了大小和类型，你会得到随机像素（或者不是那么随机，它可能在内存中显示像素块）。

这与使用/访问未初始化变量的概念相同。

要将图像涂成黑色，您可以使用 Mat::setTo，此处的文档：

[http://docs.opencv.org/modules/core/doc/basic_structures.html#mat-setto](http://docs.opencv.org/modules/core/doc/basic_structures.html#mat-setto)

# php - PHP、正则表达式和新行

> ID：10971871
> 
> 赞同：0
> 
> 时间：2012-06-10T19:55:04.287
> 
> 标签：php, regex

> **可能重复：**
> [从代码文件中提取 php 函数的 PHP 正则表达式](https://stackoverflow.com/questions/2488498/a-php-regex-to-extract-php-functions-from-code-files)

我有一个文件，其中包含格式如下的函数列表：

```
function foo(){
      ...code { code{}  } code...
} 
```

对于这个特定的文件，我将始终将单词“function”一直放在左侧，并将结尾的花括号一直放在左侧。按照惯例，函数中的代码将始终缩进。函数中的代码可以包含任何字符，包括花括号。

我想用 PHP 解析文件以获取函数的关联数组，其中函数的名称是键。我刚开始，这是一个非常简单的开始：

```
$regex = "/function.*/";
preg_match_all($regex, $str, $result, PREG_PATTERN_ORDER);
$arr = $result[0];

print_r($arr); 
```

这将产生以下内容并在每个新行处停止：

```
Array
(
    [0] => function foo(){
    [1] => function bar(){
    [2] => function stop(){
    [3] => function go(){
) 
```

我尝试将正则表达式更改为：

```
$regex = "/function.*\n}$/s"; 
```

我的想法是，如果有一个换行符直接跟在一个结束大括号之后，`\n}$`就会匹配函数的结尾。但是，这不起作用，它会生成一个包含一个长元素的数组，该元素包含之后的所有内容`function foo()`

我还没有开始将函数名放入关联数组的键中。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-10T20:35:49.400

@约翰·R

这是正则表达式解决方案：

```
$regex = '~
  function                 #function keyword
  \s+                      #any number of whitespaces 
  (?P<function_name>.*?)   #function name itself
  \s*                      #optional white spaces
  (?P<parameters>\(.*?\))  #function parameters
  \s*                      #optional white spaces
  (?P<body>\{.*?\})        #body of a function
~six';

if (preg_match_all($regex, $input, $matches)) {
  print_r($matches);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-10T19:59:40.673

在您的情况下，这样的表达式可能就足够了：

```
/^function\s++(\w++).*?^}/ms 
```

它在第一个`}`没有缩进的地方停止匹配。函数名将在第一个捕获组中，整个匹配就是函数。

# html - 通过套接字接收带空格的数据

> ID：10971872
> 
> 赞同：-2
> 
> 时间：2012-06-10T19:55:06.830
> 
> 标签：html, qt, sockets, qt4, large-data

为此，我正在使用带有 QT4 的 C++。当我尝试发送大型 html 文件（在本例中为 8kb）时，发送和接收的过程运行良好。但是收到的文件在 html 文件的每个字符之间都有空格。这里是一个例子，文件是这样发送的：

```
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0//EN" "http://www.w3.org/TR/REC-html40/strict.dtd">
<html><head><meta name="qrichtext" content="1" /><style type="text/css">
p, li { white-space: pre-wrap; }
</style></head><body style=" font-family:'MS Shell Dlg 2'; font-size:8.25pt; font-weight:400; font-style:normal;">
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">a</p></body></html> 
```

它已收到，如下所示：

```
 ¼ < ! D O C T Y P E   H T M L   P U B L I C   " - / / W 3 C / / D T D   H T M L   4 . 0 / / E N "   " h t t p : / / w w w . w 3 . o r g / T R / R E C - h t m l 4 0 / s t r i c t . d t d " > 
 < h t m l > < h e a d > < m e t a   n a m e = " q r i c h t e x t "   c o n t e n t = " 1 "   / > < s t y l e   t y p e = " t e x t / c s s " > 
 p ,   l i   {   w h i t e - s p a c e :   p r e - w r a p ;   } 
 < / s t y l e > < / h e a d > < b o d y   s t y l e = "   f o n t - f a m i l y : ' M S   S h e l l   D l g   2 ' ;   f o n t - s i z e : 8 . 2 5 p t ;   f o n t - w e i g h t : 4 0 0 ;   f o n t - s t y l e : n o r m a l ; " > 
 < p   s t y l e = " - q t - p a r a g r a p h - t y p e : e m p t y ;   m a r g i n - t o p : 0 p x ;   m a r g i n - b o t t o m : 0 p x ;   m a r g i n - l e f t : 0 p x ;   m a r g i n - r i g h t : 0 p x ;   - q t - b l o c k - i n d e n t : 0 ;   t e x t - i n d e n t : 0 p x ; " > < / p > < / b o d y > < / h t m l > 
```

我用于发送和接收的代码：

发送代码：

```
qDebug() << "Connected. Sending file to the server"; QString text = ui->QuestHtmlText->toPlainText();

if(text.length() < 1024)
{
    QByteArray block;
    QDataStream out(&block, QIODevice::WriteOnly);
    out << quint16(0) << QUESTION_HTML;
    out << text;
    out.device()->seek(0);
    out << quint16(block.size() - sizeof(quint16));
    qDebug() << "Block size: " << block.size();
    socket.write(block);
    return;
}

for(int i = 0; i < text.length(); i+=1024)
{
    QByteArray block;
    QDataStream out(&block, QIODevice::WriteOnly);
    out << quint16(0) << QUESTION_HTML;
    if((text.length() - i) > 1024)
        out << text.mid(i, i+1024);
    else
        out << text.right(1024 - i);
    out.device()->seek(0);
    out << quint16(block.size() - sizeof(quint16));
    qDebug() << "Block size: " << block.size();
    socket.write(block);
} 
```

接收代码：

```
qDebug() << "Writing File";
QDataStream in(this);
QString temp = "Teste.html", text;
QFile myFile(".//Questions//" + temp);
myFile.open(QIODevice::WriteOnly);
QDataStream out(&myFile);
while(!in.atEnd())
{
    in >> text;
    out << text;
} 
```

我之前确实在这里打开过一个帖子：[通过套接字空间发送数据，使用空格接收](https://stackoverflow.com/questions/10890161/sending-data-through-socket-spaces-receiving-with-spaces)

人们停止帮助我。顺便说一句，我觉得我的问题没有得到完整的回答。于是我又开了一个帖子。我还查看了常见问题解答部分，看看在这种情况下我应该怎么做。但没有成功。

无论如何，我现在的问题是：我应该删除 quint16 吗？那我应该用什么来确定传入数据包的大小？

谢谢，我很抱歉我可能犯的错误。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-10T21:12:37.120

您在文件中返回的内容不是您的原始文本，而是 QString 序列化形式，这毫不奇怪是 UTF-16。如果您想要返回文本，请将输入 QDataStream 读回 QString 并将其保存到文件中。

虽然在数据前面加上一个长度通常是个好主意，但对于 QString >> QDataStream 来说绝对是多余的。[在这里](http://qt-project.org/doc/qt-4.8/datastreamformat.html)或[这里](http://www.developer.nokia.com/Community/Wiki/How_to_perform_file_IO_using_QDataStream_in_Qt)阅读一些东西。此外，您开发了一种令人难以置信的令人困惑的方式，我怀疑它什么都不做。QByteArray 没有实现 QIODevice （事实上，为什么应该这样做）所以你的 out.device()->seek() 是一个基本的虚拟实现，为[空并且只返回 true](http://qt-project.org/doc/qt-4.8/qiodevice.html#seek)。如果在序列化转储文件的末尾找到您的长度“标题”，我不会感到惊讶。

**编辑：**我认为您的 html 传输可能只有通过完全忽略混淆的 quint 操作并使用`out`QTextStream 而不是 QByteStream 才能开始正常工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-03T21:11:20.483

我在另一篇文章中发布了我的案例的解决方案。

谢谢大家的关注

# visual-studio - Visual Studio 调试器不会在断点处停止

> ID：10971877
> 
> 赞同：1
> 
> 时间：2012-06-10T19:55:16.620
> 
> 标签：visual-studio, xamarin.android

有时我看到调试器根本不支持断点，主要是在涉及线程时。这是一个已知问题吗？如果没有，我会尝试创建一个复制品。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-11T15:43:57.433

仅供参考，一个锁定的 MDB 文件导致了这种行为。填写错误报告： [https ://bugzilla.xamarin.com/show_bug.cgi?id=5608](https://bugzilla.xamarin.com/show_bug.cgi?id=5608)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-11T13:08:01.977

我猜你的 IDE 只是没有附加到那些在你看到断点没有停止时工作的进程。查看此[演练：调试多线程应用程序](http://msdn.microsoft.com/en-us/library/bb157784.aspx)以了解如何安全地执行此操作。

希望有帮助，

# c# - C#创建与文件夹名称同名的文件，带有扩展名

> ID：10971885
> 
> 赞同：1
> 
> 时间：2012-06-10T19:56:52.920
> 
> 标签：c#

假设我有一个名为`test`.
现在我将该文件夹传递给一个程序，它将输出一个`test.xyz`在包含目标文件夹的同一目录中调用的文件。

我使用的一般逻辑类似于

```
string outDir = Path.GetDirectoryName(path);
string outName = Path.GetFileName(path).TrimEnd("\\".ToCharArray()) + ".xyz";
string outFile = Path.Combine(outDir, outName); 
```

哪个有效，但是仅仅为了构建我的新文件名而执行这么多操作似乎有点过分。

1：我可以减少路径调用的次数来达到我的结果吗？
2：我可以对第二行做些什么来避免修剪并避免使用那个添加操作吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-10T20:01:32.260

这似乎在我的快速测试中有效：

```
string outFile = Path.GetFullPath(path) + ".xyz"; 
```

虽然我刚刚意识到你`path`可能已经包含一个斜杠。如果你不能改变它来避免这种情况，你仍然必须包括这个`.TrimEnd()`电话。

在我的测试中，我使用`var path = @"C:\Windows\System32";`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-10T20:10:26.013

您可以为此使用 FileInfo ！

```
string path = @"C:\Windows\System32\";
FileInfo fi = new FileInfo(path);
string outFile = fi.DirectoryName + ".xyz"; 
```

奇迹般有效。即使目录字符串中有斜杠

# android - 如何使用xml时间选择器？

> ID：10971886
> 
> 赞同：4
> 
> 时间：2012-06-10T19:57:34.837
> 
> 标签：android

我在下面的相同 xml 代码中创建了对话框按钮和时间选择器：

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:orientation="vertical" >

    <TimePicker
        android:id="@+id/timePicker1"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content" />

        <LinearLayout android:id="@+id/LinearLayout02" android:layout_height="wrap_content" android:layout_width="fill_parent">
            <Button android:layout_height="wrap_content" android:id="@+id/dialog_ok" android:text="OK" android:layout_width="fill_parent" android:layout_weight="1"></Button>
            <Button android:layout_height="wrap_content" android:text="Cancel" android:id="@+id/dialog_cancel" android:layout_width="fill_parent" android:layout_weight="1"></Button>
        </LinearLayout>

</LinearLayout> 
```

然后我在 java 代码中创建了对话框，并从 xml 代码中引入了对话框和时间选择器，如下所示：

```
public void TimePickerDialog(){
    final Dialog dialog = new Dialog(this);

    dialog.setContentView(R.layout.sign_in_dialog);

/////////////////////updated code////////////////////
  TimePicker timePicker1 = (TimePicker) findViewById(R.id.timePicker1);

   timePicker1.setIs24HourView(true); 
/////////////////////////////////

    dialog.setTitle("Quick Mute");

    //Allow the dialog to be cancelable
    dialog.setCancelable(true);
    // Here we add functionality to our dialog box's content. In this example it's the two buttons
    //reference the button
    Button okButton = (Button) dialog.findViewById(R.id.dialog_ok);
    //Create a click listener
    okButton.setOnClickListener(new OnClickListener() {
         //override the onClick function to do something
         public void onClick(View v) {

         }
    });

    //reference the button
    Button cancelButton = (Button) dialog.findViewById(R.id.dialog_cancel);
    //Create a click listener
    cancelButton.setOnClickListener(new OnClickListener() {
         //override the onClick function to do something
         public void onClick(View v) {
          //Close the dialog</span>
                  dialog.dismiss();
        }
    });
    //finally show the dialog   
    dialog.show();
} 
```

我遇到的问题是如何访问在 xml 代码中创建的时间选择器，以便我可以使时间选择器成为 24 小时时间选择器？...以及如何从 xml 代码中的 timepicker 获取时间？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-10T20:00:22.780

就像它通常做的那样：

```
TimePicker timePicker = (TimePicker)dialog.findViewById(R.id.timePicker1); 
```

和往常一样*，这只在`dialog.setContentView`被调用*后才有效。然后，要选择时间，请致电：

```
timePicker.getCurrentHour();
timePicker.getCurrentMinute(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-10T20:02:42.787

您不能在 XML 中设置 24 小时模式，请`MyTimePicker.setIs24HourView(boolean)`改用。

请参阅[此](http://www.androidpeople.com/android-time-picker-dialog-example)示例以了解如何获取时间。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-11T12:47:22.870

以下是获取 TimePicker 实例的步骤：

```
 final Dialog mTimeDialog = new Dialog(this);
  final RelativeLayout mTimeDialogView = (RelativeLayout)getLayoutInflater().inflate(R.layout.time_dialog, null);

  final TimePicker mTimePicker = (TimePicker) mTimeDialogView.findViewById(R.id.TimePicker);

  mTimePicker.setIs24HourView(true); 
```

# php - 如何使用 Zend 框架和 PHP 检索图书图像和 ISBN 号

> ID：10971887
> 
> 赞同：1
> 
> 时间：2012-06-10T19:57:39.527
> 
> 标签：php, zend-framework, amazon-web-services

我想使用 PHP 和 Zend 框架检索书籍图像和 ISBN 号。你能帮我吗？

```
$amazon = new Zend_Service_Amazon(AMAZON_API_KEY, 'US', AMAZON_SECRET_KEY);

$results = $amazon->itemSearch(array(
    'SearchIndex' => 'Books',
    'Keywords' => "php",
    'AssociateTag' => "php"
));

foreach ($results as $result) {
  print_r($result);
} 
```

在此代码中，输出为：

```
Zend_Service_Amazon_Item Object
(
    [ASIN] => 0596157134
    [DetailPageURL] => http://www.amazon.com/Learning-PHP-MySQL-JavaScript-Step-By-Step/dp/0596157134%3FSubscriptionId%3DAKIAJH3FSKNQTTD2DQZQ%26tag%3Dphp%26linkCode%3Dxm2%26camp%3D2025%26creative%3D165953%26creativeASIN%3D0596157134
    [SalesRank] => 
    [TotalReviews] => 
    [AverageRating] => 
    [SmallImage] => 
    [MediumImage] => 
    [LargeImage] => 
    [Subjects] => 
    [Offers] => 
    [CustomerReviews] => Array
        (
        )

    [SimilarProducts] => Array
        (
        )

    [Accessories] => Array
        (
        )

    [Tracks] => Array
        (
        )

    [ListmaniaLists] => Array
        (
        )

    [_dom:protected] => DOMElement Object
        (
        )

    [Author] => Robin Nixon
    [Manufacturer] => O'Reilly Media
    [ProductGroup] => Book
    [Title] => Learning PHP, MySQL, and JavaScript: A Step-By-Step Guide to Creating Dynamic Websites (Animal Guide)
) 
```

但是您会看到，图像字段都是空的，并且没有 ISBN 字段。你对此有什么想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-10T21:26:05.703

使用 'ResponseGroup' 参数来指定结果中您想要的数据：

```
$results = $amazon->itemSearch(array(
    'SearchIndex' => 'Books',
    'Keywords' => "php",
    'AssociateTag' => "php",
    'ResponseGroup' => 'ItemAttributes'
)); 
```

ItemAttributes 会给你一堆额外的数据，包括 ISBN。

# java - 在 Java 的泛型中实现 vs 扩展

> ID：10971888
> 
> 赞同：15
> 
> 时间：2012-06-10T19:57:42.233
> 
> 标签：java, generics, interface, extend, implements

谁能告诉我第一个和第二个代码之间的区别是什么？MaxPQ 代表优先级队列，它是可以相互比较的“Key”对象的集合。

代码 1：

```
public class MaxPQ<Key extends Comparable<Key>>{
...
} 
```

代码 2：

```
public class MaxPQ<Key implements Comparable<Key>>{
...
} 
```

第二个代码无法编译，但我不直观为什么在使用泛型时我们需要扩展而不是实现接口。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-06-10T20:01:16.753

区别很简单：第二个代码片段不会编译，也永远不会。`extends`对于类和接口，您总是使用泛型。也`super`可以在那里使用关键字，但它具有不同的语义。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-10T20:12:03.497

泛型中没有实现。第二个代码无效。您可能会混淆：

```
public class MaxPQ implements Comparable<Key> {
   ...
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-10T20:26:19.140

我假设它被决定`extends`用于接口和类，因为在泛型类声明的情况下，类型参数绑定到接口或类没有任何区别。

当然，of 的含义`extends`与其在类定义中的典型用法有很大不同。Angelika Langer 确实有很好的关于`extends`Java 中不同含义的文本：[“扩展”是否总是意味着“继承”？](http://www.angelikalanger.com/GenericsFAQ/FAQSections/TechnicalDetails.html#Does%20extends%20always%20mean%20inheritance?)

# jquery - .NET MVC 3：在 JQuery 代码之后不提交表单

> ID：10971890
> 
> 赞同：0
> 
> 时间：2012-06-10T19:57:50.543
> 
> 标签：jquery, asp.net-mvc-3, form-submit

我有一个简单的表单，有两个字段和一个可选字段，如果未选择复选框，则选择复选框时显示，如果未选择复选框 - 显示/隐藏由jQuery控制。问题是，当页面第一次加载时，表单像往常一样提交，但是一旦选中或取消选中复选框，提交按钮就不会提交表单，甚至更奇怪的是它什么也不做。

我有一个模型的强类型视图：

```
@model Metteem.ViewModels.SchedularAccount 
```

我的简单脚本是：

```
<script type="text/javascript">
$(document).ready(function () {
    $("#showhide").click(function () {
        $("#alternatingInput").toggle('fast');
    });
});
</script> 
```

表格的代码在哪里：

```
@using (Html.BeginForm(null, null, FormMethod.Post, new { Class = "well form-horizontal" }))
{
    <fieldset>
        <div class="control-group">
            <label class="control-label">Meeting ID</label>
            <div class="controls">
                @Html.TextBoxFor(model => model.MeetingId, new { Class = "input-xlarge" })
                @Html.ValidationMessageFor(model => model.MeetingId, null, new { Class = "help-inline" })
            </div>
        </div>
        <div class="control-group">
            <label class="control-label">Password</label>
            <div class="controls">
                @Html.PasswordFor(model => model.Password, new { Class = "input-xlarge" })
                @Html.ValidationMessageFor(model => model.Password, null, new { Class = "help-inline" })
            </div>
        </div>
        <div class="control-group">
            <label class="control-label">Login as Host?</label>
            <div class="controls">
                @Html.CheckBoxFor(model => model.IsHost, new { Class = "input-xlarge", id = "showhide" })
            </div>
        </div>
        <div class="control-group" id="alternatingInput" style="display: block; ">
            <label class="control-label">Participant ID</label>
            <div class="controls">
                @Html.TextBoxFor(model => model.UserId, new { Class = "input-xlarge", Value = "0" })
            </div>
        </div>

    </fieldset>
    <div class="form-actions">
        @Html.ActionLink("Cancel", "Index", "Home", null, new { Class = "btn" })
        <button class="btn btn-primary">Login</button>
    </div>
} 
```

在我的操作中，我有一个 HttpPost 属性：

```
[HttpPost]
public ActionResult HostParticipantLogin(SchedularAccount account)
{
   //Rest of my code
} 
```

会出什么问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-12T09:56:07.170

感谢@avesse，添加类型作为提交解决了这个问题..

> 尝试`<button type="submit" class="btn btn-primary">`是否必须使用`<button>`元素。

# javascript - CoffeeScript - 将参数传递给超级构造函数的问题

> ID：10971894
> 
> 赞同：0
> 
> 时间：2012-06-10T19:58:27.877
> 
> 标签：javascript, coffeescript

我有以下 CoffeeScript 代码：

```
planet = new Planet p5, {x: 100, y: 100, diameter: 20} 
```

和其他地方：

```
class GameObject
  constructor: (@p5, @x, @y) ->
    @selected = false

class Planet extends GameObject
  constructor: (p5, opts) ->
    super (p5 opts.x opts.y)
    @diameter = opts.diameter 
```

对于`super`它说的那一行：

> 未捕获的类型错误：对象#<Object> 的属性“x”不是函数

当它只是：

```
class Planet
  constructor: (p5, opts) ->
    @x = opts.x
    @y = opts.y
    @diameter = opts.diameter
    @selected = false 
```

即在使它成为更通用的孩子之前`GameObject`......我已经尝试了一些重新排列以使其工作，但都是徒劳的。不确定它是否与 CoffeeScript 或 JavaScript 有关。官方网站上的“try CoffeScript”在这里没有发现任何错误。浏览器是 Chrome ......这里有什么问题，我该如何克服这个问题？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-10T20:03:48.340

您缺少逗号来分隔参数：

```
super (p5 opts.x opts.y) 
```

应该

```
super (p5, opts.x, opts.y) 
```

否则，该行将被解释为`super(p5(opts.x(opts.y)))`，因此出现“不是函数”错误。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-10T20:03:30.340

你不只是想要

`super p5, opts.x, opts.y`

[这是您的代码运行时没有错误的链接](http://coffeescript.org/#try%3aclass%20GameObject%0A%20%20constructor%3a%20%28@p5,%20@x,%20@y%29%20-%3E%0A%20%20%20%20@selected%20=%20false%0A%0Aclass%20Planet%20extends%20GameObject%0A%20%20constructor%3a%20%28p5,%20opts%29%20-%3E%0A%20%20%20%20super%20p5,%20opts.x,%20opts.y%0A%20%20%20%20@diameter%20=%20opts.diameter%0A%0Ap5%20=%20%27p5%27%0Aplanet%20=%20new%20Planet%20p5,%20%7Bx%3a%20100,%20y%3a%20100,%20diameter%3a%2020%7D%0A%0Aalert%20%22#%7Bplanet%7D%22)。

# c++ - 通过 xor 运算符使用引用或指针交换两个变量的值

> ID：10971895
> 
> 赞同：0
> 
> 时间：2012-06-10T19:58:38.287
> 
> 标签：c++, reference, swap, xor

我有两个整数变量 i 和 j，我想创建一个函数，将这两个变量作为参数，并使用 xor 运算符交换它们的内容。现在，如果我让函数按值获取参数，即`void swap (int x , int y);`（函数体与`swap`下面的函数相同），那么值会在函数内很好地交换。但是我想要的是在调用函数中交换变量的值，我使用通过引用（以及通过指针）传递参数：

```
void swap ( int& x , int& y )
{
    x^=y^=x^=y;
    cout << x<< " " << y << endl ;
}

int main ()
{
    int i (1), j (2) ;
    swap ( i, j ) ;
    cout << i << " " << j << endl ;
} 
```

但两种情况都没有显示正确的结果！

为什么`swap`函数不交换通过引用或指针传递参数的值？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-10T20:05:41.343

> 我有两个整数变量 i 和 j，我想创建一个函数，将这两个变量作为参数，并使用 xor 运算符交换它们的内容。

为什么？

正如您所知道的，您需要将指针传递给对象，或者使用引用。

这个：

```
x^=y^=x^=y; 
```

具有未定义的行为，因为它在序列点之间修改同一个对象两次（它对`x`和都这样做`y`）。

如果两个对象是同一个对象，则异或技巧会失败；第一个异或将对象归零。

如果要交换两个对象，只需使用临时对象：

```
int temp = x;
x = y;
y = temp; 
```

这很简单，而且很*有效*。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-10T20:18:46.137

正如其他人所指出的，这是一个非常愚蠢的优化（如果你可以这样称呼它的话）。问题是就地操作符的链式使用。将其分解为可分离的语句，它可以工作。

```
x^=y;  // values are X^Y, Y
y^=x;  // values are X^Y, X
x^=y;  // values are Y, X 
```

和其他人一样，我鼓励你不要用这种破坏清晰度的聪明来混淆你的代码，除非你有一个通过分析建立的明显需求和一个明显的加速来做你的[小技巧](http://graphics.stanford.edu/~seander/bithacks.html#SwappingValuesXOR)。（酷网站）

# android - 在 Android 中找不到数组

> ID：10971896
> 
> 赞同：1
> 
> 时间：2012-06-10T19:58:43.433
> 
> 标签：android, listadapter

我有这段代码：

```
setListAdapter(new ArrayAdapter<String> (this, R.layout.actiemenu, array));
    ListView lv = getListView();
    lv.setTextFilterEnabled(true);

final String[] array = new String[] {
    "Ding", "AnderDing", "Nogeending", "laatseding"
}; 
```

中的数组`R.layout.actiemenu`，数组应该是之后创建的数组，在最终`String[]`等处。

但是，我的 Eclipse 给了我一个错误。有谁知道为什么它不起作用？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-10T20:01:10.447

您需要在使用它**之前**声明它，因此只需交换两个语句：

```
final String[] array = new String[] {
    "Ding", "AnderDing", "Nogeending", "laatseding"
};

setListAdapter(new ArrayAdapter<String> (this, R.layout.actiemenu, array));
    ListView lv = getListView();
    lv.setTextFilterEnabled(true); 
```

# ruby - 在 Mac OS X 10.7.4 上从 rvm 使用 ruby 1.9.3 时出现 libxml2 问题

> ID：10971900
> 
> 赞同：0
> 
> 时间：2012-06-10T19:59:00.920
> 
> 标签：ruby, installation, gem, libxml2

我正在尝试在 Mac OS X 10.7.4 上使用 gem安装[kitabu 。](https://github.com/jstorimer/kitabu)使用 1.8.X 版的预装 ruby​​，我收到一条错误消息，提示我应该使用 1.9 或更高版本的 ruby​​。

我安装了 rvm 并尝试使用 rvm 中的 gem`sudo gem install kitabu`来获取此错误。

```
checking for xmlParseDoc() in -lxml2... no
-----
libxml2 is missing.  please visit http://nokogiri.org/tutorials/installing_nokogiri.html     for help with installing dependencies. 
```

使用`port install libxml2`，我安装了 libxml2，但 rvm 似乎没有链接到这个库。

我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-21T17:52:36.127

我不确定，但似乎本机 OS X 和端口的一些库混合在一起，当我从中删除 /opt/local/lib 时`DYLD_LIBRARY_PATH=.:/opt/local/lib`，它似乎可以工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-10T20:16:51.063

您需要在系统中有 libxml2 标头（需要为此 gem 构建本机扩展）

与 macports 它`sudo port install libxml2`与 brewd 应与`brew install libxml2`

如果你有linux [http://www.techsww.com/tutorials/libraries/libxml/installation/installing_libxml_on_ubuntu_linux.php](http://www.macports.org/ports.php?by=library&substr=libxml2)[和](http://www.techsww.com/tutorials/libraries/libxml/installation/installing_libxml_on_ubuntu_linux.php)如果你有窗户，我不知道。

# android - 找不到 Facebook SDK.apk

> ID：10971904
> 
> 赞同：20
> 
> 时间：2012-06-10T19:59:31.890
> 
> 标签：android, eclipse, facebook-android-sdk

嘿，我知道以前有人问过这个问题，但似乎没有一个解决方案有帮助。

这**不是**重复的

我之前在一个早期的项目中使用过 Facebook SDK，现在我开始了一个新的，我得到了这个奇怪的错误。

*   我**已经**设置了对图书馆的引用
*   我**已将**Facebook SDK 项目设置为库
*   我**已经尝试根据**[官方文档](http://developers.facebook.com/docs/mobile/android/build/)删除它并重新添加它，并且基本上尝试了[这个问题](https://stackoverflow.com/questions/7258394/could-not-find-com-facebook-android-apk-error-when-running-android-project)中的所有内容。

虽然我仍然收到此错误并且无法找出原因。

值得一提的是，当我尝试使用 facebook 类时，它给了我一个“修复项目”选项的错误，我做了但仍然没有工作，可能是相关的？

* * *

## 回答 #1

> 赞同：60
> 
> 时间：2013-03-09T12:50:11.290

这是常见的错误。只需从 Properties->Java Build Path->Projects 中删除 FacebookSDK 项目。这个项目应该从Properties->Android中引用

有关更多信息，请参阅此答案：[找不到 Library.apk！](https://stackoverflow.com/questions/6337673/could-not-find-library-apk)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-11T08:36:55.920

嗯..我只是想问你是否将 Facebook SDK 导入 Eclipse 本身？因为我曾经使用 Facebook 做过一个项目，事情是除了引用之外，我遵循的指南实际上指示必须将 SDK 导入 Eclipse。

您可能想看看[这个](http://www.androidhive.info/2012/03/android-facebook-connect-tutorial/)。否则，另一种方式就像您所做的那样，复制所有文件。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-10T20:08:55.173

好吧，经过大量搜索后，唯一对我有用的就是创建一个新项目并将所有文件复制到其中。

我试图避免它，但这似乎是唯一有效的方法 =/

由于这个话题没有任何答案，所以如果有人能找到更好的解决方案 - 这将对社区非常有帮助

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-26T16:42:19.623

尝试删除适用于 Android 的 Facebook 应用程序（如果您的手机上安装了一个）。这对我有用。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-06-17T11:21:24.383

我不知道这是怎么发生的，但它有效：

首先：我在一个工作区中添加了所有 facebook3.0 相关示例 + facebookSDk 项目。

第二：我已经运行了一个示例项目。我在其中找到了一个 .jar 文件：androiddependencies->facebooksdk.jar（注意这个确切的路径）

第三 ：

1.) 我创建了我的项目。

2.）在这里面我已经通过以下方式删除了错误：-`FixProjectSetup (atLast position )`

3.) 我已`facebooksdk.jar`通过右键单击添加`project->properties->android->by checking android 4.2 + reference the Facebooksdk -> done`。

现在我能够轻松地创建和运行程序。

# c# - 在 asp.net 中调试一个类

> ID：10971908
> 
> 赞同：3
> 
> 时间：2012-06-10T20:00:00.307
> 
> 标签：c#, asp.net, visual-studio-2010, debugging, class

我有一个 asp.net 网络应用程序，并且我在我的解决方案文件中添加了一些相关的类项目。当我运行 Web 应用程序时，我想中断并单步执行类中的代码（当引用类时）。

我没有收到错误消息。类项目中的代码只是没有启动。

我已经搜索并阅读了这篇文章[Debugging a Class Library](https://stackoverflow.com/q/8789320/247562)但没有运气。

我怎样才能让它发挥作用？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-10T23:09:58.333

你可以在你的代码中调用这个函数，调试器会弹出

`System.Diagnostics.Debugger.Launch();`

替代你可以调用`Debug.Fail("Stop me to see what next");`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-10T20:03:18.703

你确定你已经`<compilation debug="true"/>`在你的 web.config 文件中设置了吗？这些类是否与应用程序的其余部分在同一个程序集中？

编辑：我唯一能建议的另一件事是停止 IIS 和/或 vs 开发服务器的所有实例，清理项目，重建，然后再试一次。还要确保只有一个 web.config 并且您没有在针对 Web.Release.config 或其他东西的发布中运行。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-10T20:11:53.750

您可以尝试停止 ASP.NET 进程吗？当asp.net服务仍在运行时，我通常会遇到这个问题，我编译（通过asp.net服务，我的意思是出现在计算机时钟附近的图标）。尝试关闭它，重新编译，然后运行。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-10T21:20:52.397

这有时会发生。检查 Debug>Modules 以查看是否加载了您的 dll。似乎 VS 调试器没有可用的 .pdb 文件。清除 .NET 文件夹中的临时 ASP.NET 文件，清理/重建并再次尝试调试。

也不要忘记以管理员身份运行 VS。尝试附加到进程而不是 F5。

# node.js - 错误：为 Node.js 和 socket.io 应用程序连接 ECONNREFUSED？

> ID：10971911
> 
> 赞同：4
> 
> 时间：2012-06-10T20:00:39.003
> 
> 标签：node.js, socket.io

> **可能重复：**
> [端口 80 上的 ECONNREFUSED](https://stackoverflow.com/questions/8792869/econnrefused-on-port-80)

直到今天，我的应用程序一直在工作，但它突然停止了：每次我尝试连接到应用程序的启用 socket.io 的部分时，它都会开始抛出这些错误。

```
Error: connect ECONNREFUSED
     at errnoException (net.js:670:11)
     at Object.afterConnect [as oncomplete] (net.js:661:19) 
```

这是我的模块版本号。

```
CompassionPit@0.5.2 /opt/chat
├── async@0.1.18
├── colors@0.6.0-1
├─┬ connect@2.0.2
│ ├── debug@0.7.0
│ ├── formidable@1.0.9
│ ├── mime@1.2.4
│ └── qs@0.4.2
├── date-utils@1.2.9
├─┬ ecstatic@0.1.6
│ ├── ent@0.0.4
│ └── mime@1.2.5
├─┬ express@2.5.8
│ ├─┬ connect@1.8.7
│ │ ├── formidable@1.0.11
│ │ ├── mime@1.2.5
│ │ └── qs@0.5.0
│ ├── mime@1.2.4
│ ├── mkdirp@0.3.0
│ └── qs@0.4.2
├─┬ flatiron@0.1.17
│ ├─┬ broadway@0.1.15
│ │ ├─┬ cliff@0.1.7
│ │ │ └── eyes@0.1.7
│ │ ├── eventemitter2@0.4.9
│ │ ├─┬ nconf@0.5.1
│ │ │ ├── async@0.1.22
│ │ │ ├── ini@1.0.2
│ │ │ └─┬ optimist@0.3.4
│ │ │   └── wordwrap@0.0.2
│ │ ├─┬ optimist@0.3.1
│ │ │ └── wordwrap@0.0.2
│ │ ├─┬ utile@0.0.10
│ │ │ ├── async@0.1.22
│ │ │ ├── mkdirp@0.3.3
│ │ │ ├── ncp@0.2.6
│ │ │ └── rimraf@1.0.9
│ │ └─┬ winston@0.5.11
│ │   ├── async@0.1.22
│ │   ├── eyes@0.1.7
│ │   ├─┬ loggly@0.3.11
│ │   │ ├── request@2.9.202
│ │   │ └── timespan@2.2.0
│ │   └── stack-trace@0.0.6
│ ├── director@1.0.10
│ ├─┬ optimist@0.3.4
│ │ └── wordwrap@0.0.2
│ ├── pkginfo@0.2.3
│ └─┬ prompt@0.1.12
│   ├── async@0.1.22
│   └─┬ winston@0.5.11
│     ├── async@0.1.22
│     ├── eyes@0.1.7
│     ├─┬ loggly@0.3.11
│     │ ├── request@2.9.202
│     │ └── timespan@2.2.0
│     └── stack-trace@0.0.6
├── geoip@0.4.5
├── hashlib2@1.0.3
├── http-digest@v0.1.0
├─┬ jade@0.20.3
│ ├── commander@0.5.2
│ └── mkdirp@0.3.3
├── marked@0.2.1
├─┬ mongoose@2.5.10
│ ├── hooks@0.2.0
│ └── mongodb@0.9.9-4
├─┬ mysql@0.9.5
│ └─┬ hashish@0.0.4
│   └── traverse@0.6.1
├── nave@0.2.13  extraneous
├─┬ optimist@0.2.8
│ └── wordwrap@0.0.2
├── request@2.1.1
├─┬ socket.io@0.9.0
│ ├── policyfile@0.0.4
│ ├── redis@0.6.7
│ └─┬ socket.io-client@0.9.0
│   ├─┬ ws@0.4.0
│   │ ├── commander@0.5.0
│   │ └── options@0.0.3
│   └── xmlhttprequest@1.2.2
├── sqwish@0.2.0
├── uglify-js@1.2.5
├── underscore@1.3.1
├─┬ union@0.1.8
│ ├── pkginfo@0.2.3
│ └── qs@0.3.2
└─┬ vows@0.5.13
  └── eyes@0.1.7 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-11T07:43:26.417

您是否允许 NodeJS 在端口 80 上运行？如果没有，你可能想看看这个：[Node.js: ECONNREFUSED on Port 80](https://stackoverflow.com/questions/8792869/econnrefused-on-port-80)

# php - 移动 mysql_fetch_array 指针

> ID：10971913
> 
> 赞同：0
> 
> 时间：2012-06-10T20:00:48.067
> 
> 标签：php, mysql

如何在 while 循环中间移动 mysql_fetch_array 指针？像这样的东西：

```
 while ($subject = mysql_fetch_array($subject_qry))
{
 $output = "<div class=\"left\" id=\"{$subject['id']}\"></div>";
  next($subject);
     $output = "<div class=\"right\" id=\"{$subject['id']}\"></div>";
  return $output;
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-11T02:17:26.197

对于您的示例，有些事情没有意义。首先，在检索结果时，不能使用带有 mysql_fetch_array 的名称。Mysql_fetch_array 使用数字索引，而不是列名。其次，您不会从循环的 while 语句中返回值。你要么建立一个字符串，要么在循环过程中回显它。

你有没有尝试过这样的事情：

```
$counter = 1;
while ($subject = mysql_fetch_array($subject_qry)) {
    echo "<div class=\"left\" id=\"{$subject[0]}\"></div>";
    mysql_data_seek($subject_qry,$counter);
    $subject = mysql_fetch_array($subject_qry);
    echo "<div class=\"right\" id=\"{$subject[0]}\"></div>";
    $counter=$counter+2;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-10T20:29:47.853

这个怎么样：

```
$counter = 0;
while ($subject = mysql_fetch_array($subject_qry))
{
  if ($counter % 2 == 0)
  {
     $output = "<div class=\"left\" id=\"{$subject['id']}\"></div>";
  }
  else
  {
     $output = "<div class=\"right\" id=\"{$subject['id']}\"></div>";
  }
  // do something with $output here...
  $counter ++;
} 
```

或者您可以使用布尔值实现相同的结果：

```
$left = true;
while ($subject = mysql_fetch_array($subject_qry))
{
  if ($left)
  {
     $output = "<div class=\"left\" id=\"{$subject['id']}\"></div>";
  }
  else
  {
     $output = "<div class=\"right\" id=\"{$subject['id']}\"></div>";
  }
  // do something with $output here...
  $left = !$left;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-10T20:02:09.550

当您从数据库中提取数据时，您不能这样做。您还没有阅读下一行，`mysql_fetch_array()`所以您不能直接跳到下一行。

您必须首先使用所有结果填充一个数组以操作数组的“索引”。或者，您可以在循环中执行附加`mysql_fetch_array()`操作以读取下一行。

# android - LinearLayout 未正确调整大小

> ID：10971918
> 
> 赞同：1
> 
> 时间：2012-06-10T20:01:53.477
> 
> 标签：android, android-layout, android-widget

我有一个 LinearLayout 并动态添加三个 LinearLayouts 到它。每个 LinearLayout 都包含一个 Button。按下其中一个按钮后，我想在二级 LinearLayout 中显示 CalendarView。视图已显示，但未完全显示。我附上了一个截图来可视化这个问题：http: [//i.stack.imgur.com/CE9je.png](https://i.stack.imgur.com/CE9je.png)

这是添加布局的代码：

```
LinearLayout.LayoutParams pLayouts = new LinearLayout.LayoutParams(
        LinearLayout.LayoutParams.MATCH_PARENT,
        LinearLayout.LayoutParams.WRAP_CONTENT
);
hllCalendar = new LinearLayout(this);
hllCalendar.setLayoutParams(pLayouts);
hllCalendar.setId(hllCalendarID);
hllCalendar.setOrientation(LinearLayout.VERTICAL);
btCalendar = {some other code}
hllCalendar.addView(btCalendar);
hllComponents.addView(hllCalendar); 
```

这是添加 CalendarView 的代码：

```
LinearLayout.LayoutParams pCalendar = new LinearLayout.LayoutParams(
        LinearLayout.LayoutParams.MATCH_PARENT,
        LinearLayout.LayoutParams.WRAP_CONTENT
);
CalendarView cal = new CalendarView(this);
cal.setLayoutParams(pCalendar);
cal.setOnDateChangeListener(this);
hllCalendar.addView(cal); 
```

关于如何使日历完全可见的任何建议？

为方便起见，这是动态创建的布局：

```
hllComponents pLayouts
-hllCalendar pLayouts
--btCalendar
--CalendarView pCalendar
-hllStartTime pLayouts
--btStartTime
-hllEndTime pLayouts
--btEndTime 
```

* * *

[问题与这篇文章](https://stackoverflow.com/questions/7894732/android-calendarview-timepicker-not-working-inside-scrollview)中的相同。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-10T23:07:39.297

尝试调用父布局的 requestLayout()。

这将在 UI 的消息循环上发布“重新布局”消息。这将在添加日历后计算布局的新大小，从而将其完全绘制在屏幕上。

# javascript - 加载数据表后触发 JavaScript 操作

> ID：10971920
> 
> 赞同：5
> 
> 时间：2012-06-10T20:02:18.830
> 
> 标签：javascript, jsf, primefaces

在 a `JSF 2.1`+ `PrimeFaces 3.2`web 应用程序中，我需要在`p:dataTable`加载 a 后触发 JavaScript 函数。我知道这个组件中没有这样的事件，所以我必须找到一个解决方法。

为了更好地理解场景，在页面加载时不渲染 dataTable。登录成功后呈现：

```
<p:commandButton value="Login" update=":aComponentHoldingMyDataTable" 
                                    action="#{loginBean.login}" 
                                    oncomplete="handleLoginRequest(xhr, status, args)"/> 
```

从上面的代码可以看出，我在成功登录后有一个 JavaScript 钩子，如果它有帮助的话。该`update`属性强制 dataTable 的渲染属性重新评估：

```
<p:dataTable  var="person" value="#{myBean.lazyModel}" rendered="#{p:userPrincipal() != null}" /> 
```

加载数据表后，我需要在每个行项目上运行一个 JavaScript 函数，以便订阅一个[cometD](http://cometd.org/)主题。

从理论上讲，我可以使用`oncomplete`登录按钮的属性来触发属性`myBean`，以便再次检索要在数据表中显示的值，但这似乎不是很优雅。

`rowKey`JavaScript 函数应该对 dataTable 的每一行做一些事情：

```
function javaScriptFunctionToBeTriggered(rowKey) {
    // do something
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-11T11:21:58.700

`oncomplete`属性中的 javascript 方法在 ajax 请求完成*后调用，因此**在* 加载 dataTable 之后。

因此，您可以执行以下操作：

```
<p:commandButton ... oncomplete="doSomething()"/> 
```

一切都应该正常。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-05-06T14:55:31.550

如果页面重新加载，请尝试在准备好的文档中调用：

```
$(document).ready(function() {
    doSomething();
}); 
```

# erlang - Erlang 中的选择性接收

> ID：10971923
> 
> 赞同：11
> 
> 时间：2012-06-10T20:02:23.540
> 
> 标签：erlang, erl

所以我开始学习 Erlang，我对这段代码有点困惑。

```
 -module(prior).
 -compile(export_all).

    important() ->
      receive
    { Priority, Msg } when Priority > 10 ->
      [Msg | important()]
  after 0 ->
     normal()
  end.

normal() ->
  receive
    { _, Msg } -> 
      [Msg | normal()]
  after 0 ->
      []
  end. 
```

我正在使用调用代码。

```
 10> self() ! {15, high}, self() ! {7, low}, self() ! {1, low}, self() ! {17, high}.
    {17,high}
    11> prior:important(). 
        [high,high,low,low] 
```

我知道此代码将首先处理所有高优先级消息，然后是低优先级消息。我对返回值如何 [high,high,low,low] 感到困惑，因为我看不到它们在哪里连接在一起。

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-06-11T00:46:07.023

**最终返回值是如何构造的...**

第一次返回时`[Msg | important()]`，确定最终返回值的形式。唯一需要担心的是，我们还不知道最终返回值的所有细节。因此`important()`，`[Msg | important()]`将继续对其进行评估。下面是如何`[high,high,low,low]`构造最终返回值的说明。

```
[high | important(                      )]  <---- Defines the final form
        ---------------------------------
        [high | important(             )]   <---- Adds more details
                ------------------------
                normal(                )    <---- Adds more details
                ------------------------
                [low | normal(        )]    <---- Adds more details
                       ----------------
                       [low | normal()]     <---- Adds more details
                              --------
                              [      ]      <---- Adds more details
------------------------------------------
[high | [high | [low | [low | []]]]]
[high,high,low,low]                         <---- The final return value 
```

**代码是如何工作的...**

在 function`important/0`中，`after 0`简单的意思是“我不等消息来”——如果我的邮箱里有消息，我会看；如果没有，我会继续（执行`normal()`）而不是在那里等待。邮箱里已经有*{15, high}, {7, low}, {1, low}, {17, high}*坐在那里。在 Erlang 中，邮箱中的消息**不是**按先到先得的顺序排队的。该`receive`子句可能很挑剔。它扫描邮箱中的所有邮件并“挑选”它想要的邮件。在我们的例子中，*{15, high}*和*{17, high}*根据 被首先选择`{Priority, Msg} when Priority > 10`。之后，该功能`normal/0`接管。和*{7，低}，{1，低}*按顺序处理（consed）。最后，我们得到了`[high,high,low,low]`.

**显示处理顺序的修改版本...**

我们可以稍微修改一下代码，以使处理（consing）顺序更加明确：

```
-module(prior).
-compile(export_all).

important() ->
    receive
    {Priority, Msg} when Priority > 10 ->
        [{Priority, Msg} | important()] % <---- Edited
    after 0 ->
    normal()
    end.

normal() ->
    receive
    {Priority, Msg} -> % <---- Edited
        [{Priority, Msg} | normal()] % <---- Edited
    after 0 ->
        []
    end. 
```

在外壳中运行它：

```
4> c(prior).
{ok, prior}
5> self() ! {15, high}, self() ! {7, low}, self() ! {1, low}, self() ! {17, high}.
{17,high}
6> prior:important().
[{15,high},{17,high},{7,low},{1,low}] 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-10T20:09:49.010

他们在这里连接

```
[Msg | important()] 
```

这`important()`是一个函数，所以它有一个返回值，当你在 REPL 中运行它时，他会打印函数的返回值。该值是`[Head | Tail]`列表构建的效果`import()`

`important()`这是一个常规功能:)

有帮助吗？

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-11T00:44:04.547

所有 Erlang 函数总是返回一个值。该函数`important/0`将接收高优先级消息，然后在表达式中递归调用自身，该表达式`[Msg | important()]`构建一个列表，其中包含将接收的最新`Msg`消息和所有其他消息`important/0`。正是这个列表从`important/0`. 当没有更多高优先级消息时，`important/0`将改为调用`normal/0`以读取所有剩余消息。读取它的消息`normal/0`将以相同方式作为列表返回`important/0`。这将返回给`important/0`which ，然后将其返回到与返回消息相同的列表中。

请注意，一旦`normal/0`被调用，就不会再对高优先级消息进行特殊处理，因为`important/0`它再也不会被调用。也`important/0`只会处理已经在队列中的高优先级消息，因为一旦它找不到任何更多然后它调用`normal/0`。

超时值`0`的特殊之处在于它会立即超时，但保证首先搜索整个消息队列以查找匹配的消息。

# c# - 在套接字中逐字节下载是否更好

> ID：10971925
> 
> 赞同：0
> 
> 时间：2012-06-10T20:02:45.080
> 
> 标签：c#, sockets

我正在构建一个文件共享程序，我想知道使用 Sockets 接收和发送每个字节的字节或固定数量是否更好。在发送和接收文件时，我正在发送 512 字节和 65536 的登录、实际文件大小列表等消息。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-10T20:10:15.633

出于效率原因，使用合理大小的块总是更好。典型的网络数据包大小约为 1500 字节（以太网），每个数据包都带有一堆必要的开销（例如协议、目标地址和端口等）。

单字节是你能做的最差的（就效率而言）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-10T20:10:48.637

一次处理 1500 个左右的字节比一次处理一个字节要高效得多。这大约是典型以太网帧的大小。

请记住，您使用的是字节流：任何消息或记录的概念都由您来实现。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-10T20:14:06.780

这取决于您的使用和目标：

**在非故障环境中获得高性能：**

选择 1500 字节

**对于不良和错误的环境：**

选择较小的大小，但不是每个字节的字节

# python - 如何在 python matplotlib 中使用 set_position 方法修复轴位置？

> ID：10971926
> 
> 赞同：10
> 
> 时间：2012-06-10T20:02:54.097
> 
> 标签：python, matplotlib, position, axes

我认为这很容易，但我搜索了互联网和 matplotlib 用户邮件列表，但找不到答案。ax2 是图“fig”中“ax”轴内的一个插入轴，我在此处进行操作：http: [//matplotlib.sourceforge.net/examples/pylab_examples/axes_demo.html](http://matplotlib.sourceforge.net/examples/pylab_examples/axes_demo.html)

但现在我的问题是我无法将 ax2 修复到我想要的确切位置，似乎 draw() 命令改变了这一点：

```
In [352]:
ax2.set_position([0.125,0.63,0.25,0.25])

In [353]:
ax2.get_position()

Out[353]:
Bbox(array([[ 0.125,  0.63 ],
       [ 0.375,  0.88 ]]))

In [354]:
draw()

In [355]:
ax2.get_position()

Out[355]:
Bbox(array([[ 0.15625,  0.63   ],
       [ 0.34375,  0.88   ]])) 
```

请注意，在“draw()”命令之后，ax2 的 x0 发生了变化。任何人都可以给出任何提示吗？

谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-17T21:11:44.213

尝试通过将参数指定为`Bbox`对象来设置位置：

```
>>> ax2.set_position(matplotlib.transforms.Bbox(array([[0.125,0.63],[0.25,0.25]])))
>>> ax2.get_position()
Bbox(array([[ 0.125,  0.63 ],
       [ 0.25 ,  0.25 ]]))
>>> draw()
>>> ax2.get_position()
Bbox(array([[ 0.125,  0.63 ],
       [ 0.25 ,  0.25 ]])) 
```

有了这个，您可以看到设置像您期望的那样往返。

此外，您可以`tuple`像这样查看结果：

```
>>> a.set_position([0.125,0.63,0.25,0.25])
>>> a.get_position().bounds
(0.125, 0.63, 0.25, 0.25) 
```

这仅取决于您是否要将位置/位置视为边界框：`x0,y0`按`x1,y1`，或改为按位置和大小：`x,y,width,height`。

目前你告诉它设置 a `x,y,width,height`，然后它告诉你`x0,y0,x1,y1`.

# android - 在我的应用程序中查看 iCalendar (.ics) 文件的最简单方法是什么？

> ID：10971943
> 
> 赞同：1
> 
> 时间：2012-06-10T20:05:13.813
> 
> 标签：android, icalendar

我只想在 .ics 文件中显示数据。我需要解析它还是有其他方法可以将它转储到屏幕上？

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-06-10T20:20:48.787

查看[Wikipedia 条目](http://en.wikipedia.org/wiki/ICalendar)，它似乎是一个文本文件，因此您可以显示原始数据。否则，您将需要创建一个不那么困难的解析器。

[如果您使用google java ics parser](https://www.google.com/search?aq=f&sugexp=chrome,mod=4&ix=h9&sourceid=chrome&ie=UTF-8&q=java%20ics%20parser)也有一些可能性。

祝你好运，希望这会有帮助！

# php - 在php中删除zip中的文件夹

> ID：10971948
> 
> 赞同：5
> 
> 时间：2012-06-10T20:06:03.020
> 
> 标签：php, zip

我有一个`skins.zip`具有以下结构的 ZIP 文件 ( )：

```
yellow  
  |_resources  
  |_theme  
  |_codes 
```

我需要删除`theme/`里面调用的文件夹`skins.zip`。我已经尝试了以下代码，但没有奏效。

```
$zip = new ZipArchive;
if ($zip->open('skins.zip') === TRUE) {
        $zip->deleteName('yellow/theme/');
        $zip->close();
} 
```

任何人都可以帮助我吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-10T20:58:09.140

我只有以下代码，并将`print_r`输出留给您了解发生了什么：

```
$z = new ZipArchive;
$folder_to_delete = "gifresizer/resized/";  //folder to delete relative to root
if($z->open("gifresizer.zip")===TRUE){      //zip file name
    print_r($z);
    for($i=0;$i<$z->numFiles;$i++){
        $entry_info = $z->statIndex($i);
        print_r($entry_info);
        if(substr($entry_info["name"],0,strlen($folder_to_delete))==$folder_to_delete){
            $z->deleteIndex($i);
        }
    }
} 
```

它输出如下内容：

```
ZipArchive Object
(
    [status] => 0
    [statusSys] => 0
    [numFiles] => 10
    [filename] => C:\xampp\htdocs\test\zipdelete\gifresizer.zip
    [comment] => 
)
Array
(
    [name] => gifresizer/
    [index] => 0
    [crc] => 0
    [size] => 0
    [mtime] => 1339360746
    [comp_size] => 0
    [comp_method] => 0
)
Array
(
    [name] => gifresizer/frames/
    [index] => 1
    [crc] => 0
    [size] => 0
    [mtime] => 1328810540
    [comp_size] => 0
    [comp_method] => 0
)
Array
(
    [name] => gifresizer/gifresizer.php
    [index] => 2
    [crc] => 1967518989
    [size] => 18785
    [mtime] => 1328810430
    [comp_size] => 3981
    [comp_method] => 8
)

etc.. 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-10T20:12:18.343

尝试

```
$zip->deleteName('./yellow/theme/'); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-02-25T08:20:43.393

这是我使用的方法（基于 Taha Paksu 的回答），带有 php8 风格：

```
/**
 * Removes an entry from an existing zip file.
 *
 * The name is the relative path of the entry to remove (relative to the zip's root).
 *
 *
 * @param string $zipFile
 * @param string $name
 * @param bool $isDir
 * @throws \Exception
 */
public static function deleteFromZip(string $zipFile, string $name, bool $isDir)
{
    $zip = new \ZipArchive();
    if (true !== ($res = $zip->open($zipFile))) {
        throw new \RuntimeException("Could not open the zipFile: " . $zip->getStatusString());
    }

    $name = rtrim($name, DIRECTORY_SEPARATOR);
    if (true === $isDir) {
        $name .= DIRECTORY_SEPARATOR;
    }
    for ($i = 0; $i < $zip->numFiles; $i++) {
        $info = $zip->statIndex($i);
        if (true === str_starts_with($info['name'], $name)) {
            $zip->deleteIndex($i);
        }
    }
    $zip->close();
} 
```

# java - 从 Web 服务检索的 Java-XML

> ID：10971949
> 
> 赞同：0
> 
> 时间：2012-06-10T20:06:05.863
> 
> 标签：java, xml, web-services, utf-8

好的，所以我要做的是创建一个使用从 Web 服务获得的数据的 java 程序。我可以得到数据，但它是 XML 文档的格式，当我将它打印到（Eclipse）控制台时，每个字母之间都有空格，并且 replaceAll 方法不起作用。代码的相关部分如下。

```
BufferedReader reader = new BufferedReader(new InputStreamReader(new URL(webAdress).openStream()));
String XMLcode = reader.readLine();
XMLcode = XMLcode.concat(reader.readLine());
XMLcode = XMLcode.replaceAll(" ", "");
System.out.println(XMLcode); //in the finished program, I will do something with the data in the XML document. 
```

结果看起来像这样-

```
þÿ < ? x m l  v e r s i o n = " 1 . 0 " e n c o d i n g = " U T F - 8 " ? > 
```

其次是我正在寻找的实际数据。一些互联网搜索暗示 þÿ 意味着这是一个文本编码问题，但我能找到的将 UTF-8 转换为 UTF-16 的所有方法都没有帮助（但是，他们确实将 þÿ 更改为 ??）。有谁知道如何解决这个问题，或者知道一种“标准”的方式来读取不需要在文件中提供的 XML？

注意-我没有制作有问题的网络服务，因此无法修改它，也不知道它是如何工作的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-10T20:13:58.490

你为什么不试试

XMLcode = XMLcode.replaceAll("\s","")

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-10T20:26:29.783

也许是一个好主意尝试：

```
new BufferedReader(new InputStreamReader(new URL(webAdress).openStream(), "UTF-16")); 
```

您可以使用以下代码对其进行测试：

```
import java.io.File;
import java.io.FileInputStream;
import java.io.IOException;
import java.io.InputStreamReader;
import java.io.Reader;

public class CharsetChanging {

    public static void main(final String[] args) throws IOException {

        File infile = new File("/tmp/utf16.txt");

        FileInputStream inputStream = new FileInputStream(infile);

        Reader in = new InputStreamReader(inputStream, "UTF-16");

        int read;

        while ((read = in.read()) != -1) {
            System.out.print(Character.toChars(read));
        }

        in.close();
    }
} 
```

只需替换`new FileInputStream(infile)`为`new URL(webAdress).openStream()`

# android - 如何处理图像

> ID：10971953
> 
> 赞同：-1
> 
> 时间：2012-06-10T20:06:56.053
> 
> 标签：android, image, image-processing, ocr, tesseract

目标：使用英国车牌中的 ocr [tesseract for android] 抓取字符

目前，我终于设法让 tesseract 让 android 工作，但是匹配的字符串有点烦人。应该进行哪些图像处理以尝试帮助获得更好的结果？

亲切的问候

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-10T22:15:06.373

这篇内容丰富且写得很好的论文为识别车牌的模式识别问题提供了许多答案：http: [//diplomovka.sme.sk/zdroj/3198.pdf](http://diplomovka.sme.sk/zdroj/3198.pdf)

该小组还有一个免费软件网站，您可以在其中上传自己的算法。

一个应用程序的好主意！

此致，

米

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-21T20:25:54.620

根据您的不良结果，您可以通过使用白名单来修复它，这将限制您接受的字符。Tesseract 仍然会识别不在您的白名单中的其他字符，但它会强制将它们识别为您接受的字符之一（例如，如果您要识别的文本是 B3157，而您的白名单仅适用于数字，它将可能输出 83157 而不是忽略 B)。

# java - 使用 RowFilter 按键查询 HBase 表不起作用

> ID：10971955
> 
> 赞同：1
> 
> 时间：2012-06-10T20:07:08.620
> 
> 标签：java, hbase

我有一个 HBase 表（来自 java），我想通过键列表查询表。我做了以下，但它不工作。

```
mFilterFeatureIt = mFeatureSet.iterator();
FilterList filterList=new FilterList(FilterList.Operator.MUST_PASS_ONE);

while (mFilterFeatureIt.hasNext()) {
    long myfeatureId = mFilterFeatureIt.next();
System.out.println("FeatureId:"+myfeatureId+" , ");
RowFilter filter = new RowFilter(CompareOp.EQUAL,new BinaryComparator(Bytes.toBytes(myfeatureId)) );
filterList.addFilter(filter);
}

outputMap  = HbaseUtils.getHbaseData("mytable", filterList);
System.out.println("Size of outputMap map:"+ outputMap.szie());

public static Map<String, Map<String, String>> getHbaseData(String table, FilterList filter) {

    Map<String, Map<String, String>> data = new HashMap<String, Map<String, String>>();
HTable htable = null;
try {
    htable = new HTable(HTableConfiguration.getHTableConfiguration(),table);
    Scan scan = new Scan();
    scan.setFilter(filter);

    ResultScanner resultScanner = htable.getScanner(scan);
    Iterator<Result> results = resultScanner.iterator();

    while (results.hasNext()) {

    Result result = results.next();
    String rowId = Bytes.toString(result.getRow());
    List<KeyValue> columns = result.list();
    if (null != columns) {

    HashMap<String, String> colData = new HashMap<String, String>();
    for (KeyValue column : columns) {
        colData.put(Bytes.toString(column.getFamily()) + ":"+ Bytes.toString(column.getQualifier()),Bytes.toString(column.getValue()));
    }
                data.put(rowId, colData);
    }

    }

    } catch (IOException e) {
    e.printStackTrace();
    } finally {
        if (htable != null)
    try {
    htable.close();
    } catch (IOException e) {
    e.printStackTrace();
    }
    }
    return data;
} 
```

FeatureId:80515900 , FeatureId:80515901 , FeatureId:80515902 ,

outputMap 地图的大小：0

我看到功能 id 的值是我想要的，但即使密钥存在于 hbase 表中，我也总是得到上述输出。谁能告诉我我做错了什么？

编辑：我在上面也发布了我的 hbase util 方法的代码，以便您可以指出那里的任何错误。

我正在尝试做一个与`select * FROM mytable where featureId in (80515900, 80515901, 80515902)`我的想法等效的 SQL，以在 HBase 中实现相同的目的是创建一个过滤器列表，其中每个 featureId 都有一个过滤器。那是对的吗 ？

这是我表的内容

```
scan 'mytable', {COLUMNS => ['sample:tag_count'] }

80515900                                            column=sample:tag_count, timestamp=1339304052748, value=4                                                                                                
80515901                                            column=sample:tag_count, timestamp=1339304052748, value=0                                                                                                
80515902                                            column=sample:tag_count, timestamp=1339304052748, value=3       
80515903                                            column=sample:tag_count, timestamp=1339304052748, value=1                                                                                                
80515904                                            column=sample:tag_count, timestamp=1339304052748, value=2 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-19T13:28:34.047

它不返回任何数据，因为在将数据插入 hbase 时，
键的数据类型是“字符串”（来自您的扫描结果），并且在获取时，在 RowFilter 中传递的值具有“长”数据类型。使用此过滤器：

```
RowFilter filter = new RowFilter(CompareOp.EQUAL,new    
BinaryComparator(Bytes.toBytes(myfeatureId.toString())) ); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-10T21:58:28.333

while 循环总是会**生成一个新的过滤器**并添加到**过滤器列表中**。

该电路是滤波器中的所有关键。此过滤器永远不能应用于**单行**。在 while 循环中只创建一个过滤器，指向一个已知的“myfeatureId”。

```
while (mFilterFeatureIt.hasNext()) {
    long myfeatureId = mFilterFeatureIt.next();
System.out.println("FeatureId:"+myfeatureId+" , ");
if ( myfeatureId=="80515902") {
     RowFilter filter = new RowFilter(CompareOp.EQUAL,new BinaryComparator(Bytes.toBytes(myfeatureId)) );
     filterList.addFilter(filter);
     }
} 
```

编辑

对于行数，查询负责。HBase 不是

HBase 过滤器

过滤器将行选择标准推送到 HBase。可以远程并行过滤行。使用这些函数可以帮助您避免向客户端发送不需要的行。

**要从钥匙中取出一部分，请从 80515900 中获取全部 .. 80515909 试试这个**

当然从循环中删除

```
RowFilter filter = new RowFilter(CompareOp.EQUAL,new BinaryComparator(Bytes.toBytes(myfeatureId)) );
filterList.addFilter(filter); 
```

并在行上方添加`outputMap = HbaseUtils.getHbaseData("mytable", filterList);`

```
....
RowFilter filter = new RowFilter(CompareOp.EQUAL,new SubStringComparator("8051590"));
filterList.addFilter(filter);
outputMap  = HbaseUtils.getHbaseData("mytable", filterList); 
```

# android - 如何摆脱不需要的形状

> ID：10971957
> 
> 赞同：0
> 
> 时间：2012-06-10T20:07:16.467
> 
> 标签：android, 2d

这是我的“public void create()”的一部分：

```
overallTexture = new Texture(Gdx.files.internal("data/sprite1.png"));
overallTexture.setFilter(TextureFilter.Linear, TextureFilter.Linear);
jumperSprite = new Sprite(overallTexture, 0, 0, 32, 37);
spriteBatch = new SpriteBatch();
world = new World(new Vector2(0.0f, -10.0f), true);

    BodyDef jumperBodyDef = new BodyDef();
    jumperBodyDef.type = BodyDef.BodyType.DynamicBody;
    jumperBodyDef.position.set(1.0f, 3.0f);

    jumper = world.createBody(jumperBodyDef);
    PolygonShape jumperShape = new PolygonShape();
    jumperShape.setAsBox(jumperSprite.getWidth() / (2 * PIXELS_PER_METER),
    jumperSprite.getHeight() / (2 * PIXELS_PER_METER));

    jumper.setFixedRotation(true);

    FixtureDef jumperFixtureDef = new FixtureDef();
    jumperFixtureDef.shape = jumperShape;
    jumperFixtureDef.density = 1.0f;
    jumperFixtureDef.friction = 5.0f; 
```

这是我的“公共无效渲染（）”的一部分

```
if (jumper.getPosition().y < 0.4) {

        overallTexture = new      Texture(Gdx.files.internal("data/sprite1.png"));
        overallTexture.setFilter(TextureFilter.Linear,  TextureFilter.Linear);
        jumperSprite = new Sprite(overallTexture, 0, 0, 32, 37);
        spriteBatch = new SpriteBatch();
        BodyDef jumperBodyDef = new BodyDef();
        jumperBodyDef.type = BodyDef.BodyType.DynamicBody;
        jumperBodyDef.position.set(1.0f, 3.0f);

        jumper = world.createBody(jumperBodyDef);
        PolygonShape jumperShape = new PolygonShape();
        jumperShape.setAsBox(jumperSprite.getWidth() / (2 * PIXELS_PER_METER),
        jumperSprite.getHeight() / (2 * PIXELS_PER_METER));
        jumper.setFixedRotation(true);

        FixtureDef jumperFixtureDef = new FixtureDef();
        jumperFixtureDef.shape = jumperShape;
        jumperFixtureDef.density = 1.0f;
        jumperFixtureDef.friction = 5.0f;

        jumper.createFixture(jumperFixtureDef);
        jumperShape.dispose();

    } 
```

现在会发生什么：当角色到达某个 Y 坐标时，它会将他重置在起点。错误在于，每当发生这种情况时，它重置他的 Y 坐标，他的“形状”仍然像一个盒子一样在那里。所以每当你再次落到那个 Y 坐标时，你不会因为你落在他的“形状”上而被重置。有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-10T20:30:40.580

AndEngine 有一个叫做物理连接器的东西，因为 AndEngine 使用 LibGDX 的 Box2D 实现，可能 LibGDX 中也存在 registerPhysicsConnector() 方法。

# android - 当我的手机没有信用时如何从 onReceiver 获取结果代码（）

> ID：10971958
> 
> 赞同：-5
> 
> 时间：2012-06-10T20:07:35.133
> 
> 标签：android, broadcastreceiver

我的问题是，当我的手机没有信用时，该方法`onReceiver()`永远不会被调用。然后我的问题是如何没有 .The`ResultCode()`每次`onReceiver()`尝试`resultCode`时都是 0 `enviados.getResultCode()`（“enviados”是`BroadcastReceiver`）

* * *

这是我的代码：

```
 @Override
public boolean onTouch(View arg0, MotionEvent arg1) {

    if (arg1.getAction()==MotionEvent.ACTION_DOWN){

        if (arg0.getId()==destinatario.getId()){
              finish();
              guardaTexto=textoet.getText().toString();
              Intent consola = new Intent(this,ListaContactos.class);
              consola.putExtra("guardaTexto", guardaTexto);
              startActivity(consola);
              finish();
              return true; 
        }
        else
            if (arg0.getId()==enviar.getId()){ 

                t=-1;
                s=-1;
                manager=SmsManager.getDefault();

                final String texto=recibeTexto;

                final Intent send = new Intent(SENT);
                final PendingIntent 
                        statusEnviado=PendingIntent.getBroadcast(this, 0,send,0); 

                final Intent delivery = new Intent(DELIVERED);
                final PendingIntent  statusEntregado 
                        =PendingIntent.getBroadcast(this, 0,delivery,0); 

                final ArrayList<PendingIntent> sentIntents = new 
                            ArrayList<PendingIntent>();
                sentIntents.add(statusEnviado);
                final ArrayList<PendingIntent> deliveryIntents = new 
                            ArrayList<PendingIntent>();
                deliveryIntents.add(statusEntregado);

                enviados=new BroadcastReceiver() { 

                    @Override
                    public void onReceive(Context contexto,Intent 
                                    intento){

                             t++;

                             String maximo="";
                             BaseDeDatos sel=new 
           BaseDeDatos(Principal_mensajes.this,"administradorDeMensajes", null,18); 
                             SQLiteDatabase 
           max=sel.getReadableDatabase(); 

                             Cursor cursorMax=max.rawQuery("SELECT 
      max(id) as maximo FROM conversaciones WHERE number='" + number[t] + "'",null);

                             while (cursorMax.moveToNext()){
                             maximo = 
                  cursorMax.getString(cursorMax.getColumnIndex(("maximo")));
                             }
                             cursorMax.close();
                             max.close();
                             sel.close();

                       switch (getResultCode()){

                       case Activity.RESULT_OK:

                           if (address[t].equals("No agendado")){
                            Toast 
                   enviado=Toast.makeText(contexto,"Mensaje enviado con éxito a " + 
                   number[t],Toast.LENGTH_SHORT);
                            enviado.show();
                           }
                           else
                           {
                            Toast enviado=Toast.makeText(contexto,"Mensaje 
                            enviado con éxito a " + address[t],Toast.LENGTH_SHORT);
                            enviado.show();
                           }                      
                            break;
                       case SmsManager.RESULT_ERROR_GENERIC_FAILURE:

                            Toast 
               noEnviado=Toast.makeText(contexto,"Mensaje no enviado a " + address[t] 
               ,Toast.LENGTH_SHORT);
                            noEnviado.show();

                            BaseDeDatos db3=new 
              BaseDeDatos(Principal_mensajes.this,"administradorDeMensajes", null,18); 
                            SQLiteDatabase 
              insertar3=db3.getWritableDatabase(); 

                            insertar3.execSQL("UPDATE conversaciones SET 
                                estado='errorEnviar' WHERE  id='" + maximo + "'"  );
                            insertar3.close();
                            db3.close();

                            break;
                       case SmsManager.RESULT_ERROR_RADIO_OFF:

                            Toast 
                   sinCobertura=Toast.makeText(contexto,"Sin cobertura de red.El 
                   mensajes será enviado cuando" +
                                    " la red esté 
                    disponible",Toast.LENGTH_LONG);
                            sinCobertura.show();

                            BaseDeDatos bd1=new 
              BaseDeDatos(Principal_mensajes.this,"administradorDeMensajes", null,18); 
                            SQLiteDatabase 
              modo1=bd1.getWritableDatabase(); 
                            ContentValues registro1=new 
             ContentValues(); 

                            registro1.put("tipo","cobertura"); 

             registro1.put("address",address[t]);
                            registro1.put("number",number[t]);
                            registro1.put("body", 
             textoet.getText().toString());
                            modo1.insert("reportes", null, registro1); 
                            modo1.close();
                            bd1.close();

                            BaseDeDatos insert=new 
            BaseDeDatos(Principal_mensajes.this,"administradorDeMensajes", null,18); 
                            SQLiteDatabase 
            escribe=insert.getWritableDatabase(); 

                            escribe.execSQL("UPDATE conversaciones SET 
                          estado='errorEnviar'WHERE  id='" + maximo + "'"  );
                            escribe.close();
                            insert.close();

                            Intent servicio = new 
                        Intent(Principal_mensajes.this, servicioEntregaYerror.class);
                            startService(servicio);

                            break; 
                       case SmsManager.RESULT_ERROR_NO_SERVICE:

                            Toast sinServicio=Toast.makeText(contexto,"Sin 
                                servicio.El mensajes será enviado cuando " +
                                    "el servicio esté 
                               disponible",Toast.LENGTH_LONG);
                            sinServicio.show();

                            BaseDeDatos bd2=new 
              BaseDeDatos(Principal_mensajes.this,"administradorDeMensajes", null,18); 
                            SQLiteDatabase 
              modo2=bd2.getWritableDatabase(); 
                            ContentValues registro2=new 
              ContentValues(); 

                            registro2.put("tipo","servicio"); 

               registro2.put("address",address[t]);
                            registro2.put("number",number[t]);
                            registro2.put("body", 
             textoet.getText().toString());
                            modo2.insert("reportes", null, registro2); 
                            modo2.close();
                            bd2.close();

                            BaseDeDatos insert2=new 
             BaseDeDatos(Principal_mensajes.this,"administradorDeMensajes", null,18); 
                            SQLiteDatabase 
             escribe2=insert2.getWritableDatabase(); 

                            escribe2.execSQL("UPDATE 
            conversaciones SET estado='errorEnviar'WHERE  id='" + maximo + "'"  );
                            escribe2.close();
                            insert2.close();

                            Intent servicio2 = new 
                       Intent(Principal_mensajes.this, servicioEntregaYerror.class);
                            startActivity(servicio2);

                            break; 
                       case Activity.RESULT_CANCELED:

                            Toast saldo=Toast.makeText(contexto,"El 
                      mensaje no ha sido enviado.Podría deberse a que su saldo se ha 
                         terminado",Toast.LENGTH_LONG);
                            saldo.show();

                            BaseDeDatos insert3=new 
              BaseDeDatos(Principal_mensajes.this,"administradorDeMensajes", null,18); 
                            SQLiteDatabase 
              escribe3=insert3.getWritableDatabase(); 

                            escribe3.execSQL("UPDATE 
            conversaciones SET estado='errorEnviar'WHERE  id='" + maximo + "'"  );
                            escribe3.close();
                            insert3.close();

                       }

                      }

                   };

                 entregados=new BroadcastReceiver() {    

                        @Override
                        public void onReceive(Context contexto,Intent 
                                     intento){

                             s++;

                             String maximo2="";
                             BaseDeDatos sel2=new 
             BaseDeDatos(Principal_mensajes.this,"administradorDeMensajes", null,18); 
                             SQLiteDatabase 
            max2=sel2.getReadableDatabase(); 

                             Cursor cursorMax2=max2.rawQuery("SELECT 
           max(id) as maximo FROM conversaciones WHERE number='" + number[s] + 
            "'",null);

                             while (cursorMax2.moveToNext()){
                             maximo2 = 
                       cursorMax2.getString(cursorMax2.getColumnIndex(("maximo")));
                             }
                             cursorMax2.close();
                             max2.close();
                             sel2.close();

                             switch (getResultCode()){

                               case Activity.RESULT_OK:

                               BaseDeDatos db=new 
             BaseDeDatos(Principal_mensajes.this,"administradorDeMensajes", null,18); 
                               SQLiteDatabase 
              insertar=db.getWritableDatabase(); 

                               insertar.execSQL("UPDATE conversaciones 
             SET estado='entregado' WHERE id=" + maximo2 );
                               insertar.close();
                               db.close();

                                 break;

                              case Activity.RESULT_CANCELED:

                                 BaseDeDatos db2=new 
           BaseDeDatos(Principal_mensajes.this,"administradorDeMensajes", null,18); 
                                 SQLiteDatabase 
            insertar2=db2.getWritableDatabase(); 

                                 insertar2.execSQL("UPDATE 
          conversaciones SET estado='noEntregado' WHERE id=" + maximo2 );
                                 insertar2.close();
                                 db2.close();

                                  break;
                             }

                         }

                      };

                 registerReceiver(enviados,new IntentFilter(SENT));
                 registerReceiver(entregados,new IntentFilter(DELIVERED));

                AlertDialog.Builder builder = new 
                             AlertDialog.Builder(this);
                builder.setMessage("Estas seguro de enviar el mensaje?")  
                .setCancelable(false)       
                .setPositiveButton("Aceptar", new 
                          DialogInterface.OnClickListener() { 

                public void onClick(DialogInterface dialog, int id) 
             {                

                       for(int c=0;c<number.length;c++){

                       BaseDeDatos bd1=new 
              BaseDeDatos(Principal_mensajes.this,"administradorDeMensajes", null,18); 
                       SQLiteDatabase modo1=bd1.getWritableDatabase(); 
                       ContentValues registro1=new ContentValues(); 

                       registro1.put("address", address[c]); 
                       registro1.put("number", number[c]); 
                       registro1.put("body", textoet.getText().toString());
                       Calendar calendario = new GregorianCalendar();
                       int horas=calendario.get(calendario.HOUR_OF_DAY); 
                       int minutos=calendario.get(calendario.MINUTE); 
                       int segundos=calendario.get(calendario.SECOND); 
                       String fecha=String.valueOf(horas + ":" + minutos + ":" 
                              + segundos);
                       registro1.put("horario",fecha );
                       Time time1= new Time(Time.getCurrentTimezone());
                       time1.setToNow();
                       String stringTime1=String.valueOf(time1.monthDay + "/" 
                              + time1.month + "/" + time1.year);
                       registro1.put("fecha",stringTime1);
                       modo1.insert("enviados", null, registro1); 
                       modo1.close();
                       bd1.close();

                       BaseDeDatos bd2=new 
            BaseDeDatos(Principal_mensajes.this,"administradorDeMensajes", null,18); 
                       SQLiteDatabase modo2=bd2.getWritableDatabase(); 
                       ContentValues registro2=new ContentValues(); 

                       registro2.put("address", address[c]); 
                       registro2.put("number", number[c]); 
                       registro2.put("body", textoet.getText().toString());
                       Calendar calendario2 = new GregorianCalendar();
                       int horas2=calendario.get(calendario2.HOUR_OF_DAY); 
                       int minutos2=calendario.get(calendario2.MINUTE); 
                       int segundos2=calendario.get(calendario2.SECOND); 
                       String fecha2=String.valueOf(horas2 + ":" + 
                                   minutos2 + ":" + segundos2);
                       registro2.put("horario",fecha2 );
                       Time time2= new Time(Time.getCurrentTimezone());
                       time2.setToNow();
                       String stringTime2=String.valueOf(time2.monthDay + "/" 
                               + time2.month + "/" + time2.year);
                       registro2.put("fecha",stringTime2);
                       registro2.put("envia","true" );
                       registro2.put("ordenDeEnvio",String.valueOf(c) );
                       modo2.insert("conversaciones", null, registro2); 
                       modo2.close();
                        bd2.close();
                       }

                       BaseDeDatos borra=new 
              BaseDeDatos(Principal_mensajes.this,"administradorDeMensajes", null,18); 
                       SQLiteDatabase 
               cont=borra.getWritableDatabase(); 
                       cont.execSQL("DELETE FROM multipleContacts");
                       cont.close();
                       borra.close();

                     int length=textoet.length();

                        if (length>160){

                            ArrayList<String> parts = 
                                      manager.divideMessage(textoet.toString());

                            for(int a=0;a<number.length;a++){

   manager.sendMultipartTextMessage(number[a], null,parts,sentIntents,deliveryIntents);

                            }
                        }
                        else
                        {

                            for(int b=0;b<number.length;b++){

                               manager.sendTextMessage(number[b], 
            null,textoet.getText().toString(),statusEnviado,statusEntregado);

                            }

                        }  

                       Intent SMS = new Intent(Principal_mensajes.this, 
                                   lista.class);
                       startActivity(SMS);
                       finish();

                }     
                })       
                .setNegativeButton("Cancelar", new 
                             DialogInterface.OnClickListener() {   

                public void onClick(DialogInterface dialog, int id) 
                               {                
                   dialog.cancel();        
                    }

                });

                AlertDialog alert = builder.create();
                alert.show();

                  return true; 
        }
            else
                if (arg0.getId()==cancelar.getId()){

                       BaseDeDatos borraTodo=new 
             BaseDeDatos(Principal_mensajes.this,"administradorDeMensajes", null,18); 
                       SQLiteDatabase 
             contTodo=borraTodo.getWritableDatabase(); 
                       contTodo.execSQL("DELETE FROM 
               multipleContacts");
                       contTodo.close();
                       borraTodo.close();

                       Intent lista = new Intent(this,lista.class);
                       startActivity(lista);
                       finish();

                }

    }

        return false;

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-11T06:18:56.420

在不需要代码的情况下，您可能会得出结论，您的应用程序正在完全按其应有的方式工作。

如果您的 BroadCastReceiver 只侦听成功发送的 SMS，而您没有信用，则不会发送 SMS，因此永远不会收到 Intent，因此不会返回任何结果代码...

# python - 用于创建完全定制的 UI 的 GUI 工具包？如果我想要一个完全非操作系统的原生外观，你会推荐哪个工具包？

> ID：10971959
> 
> 赞同：1
> 
> 时间：2012-06-10T20:07:47.003
> 
> 标签：python, user-interface

我被要求为一个朋友构建一个 gui。我们将寻求完全定制的外观。所有按钮、状态、小部件等都将由艺术家绘制。我预见需要的唯一本机小部件是列表框（因为我不完全确定如何从头开始构建一个）。

其他要求是 mp3 播放支持。

python.org 上的可用框架列表非常令人生畏！任何人都可以提出一个好的起点吗？

我为这个问题的开放性道歉！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-10T20:10:01.803

我的建议是用[pygame](http://www.pygame.org)构建它。

这将在所有平台上为您提供像素相同的 GUI - 如果您有艺术家为您制作一切，这是理想的选择。

您必须实现自己的列表框，但 pygame 播放 mp3 就很好。

# java - 为某些代码关闭声纳

> ID：10971968
> 
> 赞同：223
> 
> 时间：2012-06-10T20:09:10.700
> 
> 标签：java, jenkins, sonarqube, findbugs

是否可以关闭不希望测量的特定代码块的声纳（ [www.sonarsource.org ）测量？](http://www.sonarsource.org)

Findbugs 输出的“保留堆栈跟踪”警告就是一个例子。离开服务器时，我可能只想将消息传递回客户端，不包括我刚刚捕获的实际异常，如果客户端不知道该异常（因为客户端没有其中的 JAR例如包含异常）。

* * *

## 回答 #1

> 赞同：299
> 
> 时间：2015-04-01T21:05:17.600

您可以使用 SuppressWarnings 注释类或方法

```
@java.lang.SuppressWarnings("squid:S00112") 
```

**squid:S00112**在这种情况下是 Sonar 问题 ID。您可以在 Sonar UI 中找到此 ID。转到问题钻取。找到一个你想禁止警告的问题。在代码中的红色问题框中，有一个带有给定问题定义的规则链接。单击该按钮后，您将在页面顶部看到 ID。

* * *

## 回答 #2

> 赞同：121
> 
> 时间：2015-05-21T20:04:18.363

我建议您尝试使用`@SuppressWarnings("squid:S2078")`.

为了抑制多个警告，您可以这样做`@SuppressWarnings({"squid:S2078", "squid:S2076"})`

还有`//NOSONAR`一条注释告诉 SonarQube 忽略特定行的所有错误。

最后，如果您对用户界面具有适当的权限，则可以直接从界面发出标志作为误报。

我建议抑制特定警告的原因是，更好的做法是阻止特定问题，而不是使用`//NOSONAR`Sonar 问题并冒着意外潜入代码的风险。

[您可以在常见问题解答](https://docs.sonarqube.org/latest/faq/#header-1)中阅读有关此内容的更多信息

编辑：2016 年 6 月 30 日 SonarQube 现在称为 SonarLint

如果您想知道如何找到鱿鱼编号。只需单击 Sonar 消息（例如`Remove this method to simply inherit it.`），Sonar 问题就会展开。

在左下角，它将有 squid 编号（例如，`squid:S1185`可维护性 > 可理解性）

那么你可以通过`@SuppressWarnings("squid:S1185")`

* * *

## 回答 #3

> 赞同：99
> 
> 时间：2012-06-10T20:48:45.653

这是一个[常见问题解答](https://docs.sonarqube.org/latest/faq/)。您可以放在`//NOSONAR`触发警告的行尾。

> **`//NOSONAR`**
> 
> 对于大多数语言，SonarQube 支持使用通用机制：`//NOSONAR`在问题的行尾。这将压制所有可能在网上提出的问题——现在和将来。

不过，我更喜欢使用 FindBugs 机制，其中包括添加 @SuppressFBWarnings 注释：

```
@edu.umd.cs.findbugs.annotations.SuppressFBWarnings(
    value = "NAME_OF_THE_FINDBUGS_RULE_TO_IGNORE",
    justification = "Why you choose to ignore it") 
```

* * *

## 回答 #4

> 赞同：10
> 
> 时间：2018-10-19T07:11:24.937

如果您无法帮助您的代码，请在收到警告的行上使用 //NOSONAR。有用！

* * *

## 回答 #5

> 赞同：5
> 
> 时间：2017-03-15T14:39:09.347

我无法在声纳 5.6 中找到 squid 编号，此注释也适用：

```
@SuppressWarnings({"pmd:AvoidCatchingGenericException", "checkstyle:com.puppycrawl.tools.checkstyle.checks.coding.IllegalCatchCheck"}) 
```

* * *

## 回答 #6

> 赞同：4
> 
> 时间：2021-06-23T13:05:52.287

实际上很难理解哪个是问题的 ID，所以我使用了 @SuppressWarnings("all") 注释，它基本上适用于所有规则，但更准确地说，最好使用 ID。点击查看图片 -> [声纳问题 ID](https://i.stack.imgur.com/Wv9Hc.jpg)

所以当点击“为什么这是一个问题？” 在红色框中，您将进入一个带有解释的屏幕。在左侧的屏幕顶部，您可以看到规则名称，左侧是该规则的 ID。因此，要申请此规则，您只需将此注释添加到您的类或方法中。

@SuppressWarnings("common-java:DuplicatedBlocks")

# apex-code - Salesforce Apex 字符串替换有趣的业务

> ID：10971971
> 
> 赞同：0
> 
> 时间：2012-06-10T20:09:24.063
> 
> 标签：apex-code

有谁知道如何区分字符`'\"'`和 `'"'`？我正在尝试预处理一个字符串，这个语句让我感到困惑。

```
system.assert(' "b" ' == ' "\"" '.replace('\"','b'); //FAILS, returns ' bbb ' 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-11T19:25:20.393

在您的示例中，Salesforce 基本上忽略了反斜杠，如下所示：

```
system.assert('"' == '\"'); // yup
system.assertEquals(1, '\"'.length()); // just one character
system.assertEquals(1, '"'.length()); // just one character--the same one 
```

如果您的原始字符串中有一个真正的反斜杠字符，那么您需要使用另一个反斜杠转义该反斜杠，如下所示：

```
system.assertEquals(1, '\\'.length()); // just one character:  \
system.assertEquals(2, '\\"'.length()); // two characters:  \"
system.assert(' "b" ' == ' "\\"" '.replace('\\"','b')); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-10T20:34:05.263

你能试试这个（替换（'\“'而不是替换（'\”'））：

```
system.assert(' "b" ' == ' "\"" '.replace('\\"','b'); 
```

# c++ - Qt - 记住最后选中的单选按钮

> ID：10971973
> 
> 赞同：3
> 
> 时间：2012-06-10T20:09:43.220
> 
> 标签：c++, windows, qt, radio-button

我有 3 个单选按钮和一个旋转框。每个单选按钮都应该将 spinboxes 值分别更改为英寸、英尺或米。我该怎么做？我必须知道哪个单选按钮最后是活动的，对吗？有人可以给我一些示例代码吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-10T20:25:15.860

单选按钮和复选框将其状态作为值保存，并将其公开给您的用户。您可以调用[isChecked()](http://qt-project.org/doc/qt-4.8/qabstractbutton.html#checked-prop)来了解您的成员变量单选按钮的状态。就像是

```
void some_button_hit(bool checked)
{
    if (inches.isChecked()) {...}
    else if (feet.isChecked()) {...}
    else if (meters.isChecked()) {...}
} 
```

并“连接”从其中任何一个[切换](http://qt-project.org/doc/qt-4.8/qabstractbutton.html#toggled)的事件。这通常在初始化时使用表单编辑器或通过连接完成。

使用表单编辑器，右键单击单选按钮，然后按照 goto slot... 编辑器构建并连接事件处理程序：

```
void GroupBox::on_feet_toggled(bool checked)
{
    ui->label->setText("feet");
}
void GroupBox::on_inches_toggled(bool checked)
{
    ui->label->setText("inches");
}
void GroupBox::on_meters_toggled(bool checked)
{
    ui->label->setText("meters");
} 
```

# watir - Watir 不会选择/查找链接元素

> ID：10971976
> 
> 赞同：1
> 
> 时间：2012-06-10T20:09:51.477
> 
> 标签：watir, watir-webdriver

我已经多次遇到这个问题了。

当我想通过以下语法找到它时，Watir 似乎找不到锚（链接）元素：

```
@browser.link(:text => 'View page directly').click 
```

如果我尝试检查链接是否存在，它会说它不存在，尽管链接在那里。

以下是导致此行为的原始源代码的链接： [https ://dl.dropbox.com/u/3290107/watir-test.xhtml](https://dl.dropbox.com/u/3290107/watir-test.xhtml)

为什么会发生这种情况以及如何解决？

感谢帮助

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-11T08:10:22.343

这对我来说似乎是一个错误。你应该在这里报告：[https ://github.com/watir/watir-webdriver/issues](https://github.com/watir/watir-webdriver/issues)

```
browser.a(:text => "View page directly").present?
# => false 

browser.as[-2].text
# => "View page directly" 

browser.as[-2].present?
# => true 
```

# php - 使用数组中的foreach从数据库中获取数据

> ID：10971979
> 
> 赞同：1
> 
> 时间：2012-06-10T20:10:05.753
> 
> 标签：php, mysql, database, arrays, foreach

我从数据库中获取数据并对其进行处理时遇到问题。

这就是我获取数据的方式：

```
 $results = $db->get_results('SELECT *
    FROM `'.$db->base_prefix.'users` 
    LEFT JOIN `'.$db->base_prefix.'usermeta` ON '.$db->base_prefix.'users.id = '.$db->base_prefix.'usermeta.user_id 
    AND '.$db->base_prefix.'usermeta.meta_key=\''.'cpoints'.'\''.$extraquery.' 
    ORDER BY '.$db->base_prefix.'usermeta.meta_value+0 DESC'
    . $limit . ';'
    ,ARRAY_A); 
```

当我打印数组时，它是这样的：

```
(
[0] => Array
(
[ID] => 4
[user_login] => member3
[user_name] => member3
[user_email] => member3@member.com
) 
```

到目前为止一切都很好，但是当我想使用数据时，我得到空结果，这就是我使用 foreach 的方式：

```
foreach($results as $result){
    $user =  $result[0]['ID'];          
    $username = $result[0]['user_login'];
    $user_nickname = $result[0]['display_name'];
    $gravatar = get_avatar( $result[0]['ID'] , $size = '32' ); 
```

在此之后，我将值（例如 $user ）回显到表中，结果为空。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-10T20:13:10.993

`[0]`从所有引用中删除`$result`。它已经由以下人员处理`foreach`：

```
foreach($results as $result){
   $user =  $result['ID'];          
   $username = $result['user_login'];
   $user_nickname = $result['display_name']; //shouldn't this be user_name?
   $gravatar = get_avatar( $result['ID'] , $size = '32' );
   //...
} 
```

同样在你`print_r`的结果中没有这样的字段`display_name`。

# asp.net-mvc - ASP.NET 中的 MVC - 使用下拉列表设计数据库和视图

> ID：10971986
> 
> 赞同：0
> 
> 时间：2012-06-10T20:10:52.927
> 
> 标签：asp.net-mvc, entity-framework, razor, drop-down-menu, asp.net-mvc-4

我是 MVC 的新手，我的项目有一些问题。我想做的是一个用户可编辑的汽车租赁平台。在我的项目中，我希望有如下选项：

*   将汽车添加到数据库
*   使用数据库中所有汽车的下拉列表添加新的汽车租赁请求
*   注册/登录
*   查看数据库中每辆车的租金请求历史记录

项目将基于带有实体框架的 *.sdf 数据库。我在 Models/ 目录中创建了一个类文件：

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Web;
using System.Data.Entity;
namespace MVC4.Models
{
   public class Car
   {
     public int ID {get; set;}
     public string Make {get; set;}
     public string Model {get; set;}
     public virtual ICollection<Car> Cars{ get; set; }
   }

   public class Request
   {
     public int ID {get; set;}
     public string User {get; set;}
     public int CarID{ get; set; }
     public virtual Car Car { get; set; }
   }

   public class CarDBContext : DbContext
   {
     public DbSet<Car> Cars { get; set; }
     public DbSet<Request> Requests { get; set; }
   }
} 
```

控制器：

```
using System;
using System.Collections.Generic;
using System.Data;
using System.Data.Entity;
using System.Linq;
using System.Web;
using System.Web.Mvc;
using MVC4.Models;

namespace MVC4.Controllers
{ 
public class RequestController : Controller
{
    private CarDBContext db = new Car1DBContext();

    //
    // GET: /Request/

    public ViewResult Index()
    {
        return View(db.Requests.ToList());
    }

    //
    // GET: /Request/Details/5

    public ViewResult Details(int id)
    {
        Wypozyczenie1 Request = db.Requests.Find(id);
        return View(request);
    }

    //
    // GET: /Request/Create

    public ActionResult Create()
    {
        return View();
    } 

    //
    // POST: /Request/Create

    [HttpPost]
    public ActionResult Create(Request request)
    {
        if (ModelState.IsValid)
        {
            db.Requests.Add(request);
            db.SaveChanges();
            return RedirectToAction("Index");  
        }

        return View(request);
    }

    //
    // GET: /Request/Edit/5

    public ActionResult Edit(int id)
    {
        Request request= db.Requests.Find(id);
        return View(request);
    }

    //
    // POST: /Request/Edit/5

    [HttpPost]
    public ActionResult Edit(Request requests)
    {
        if (ModelState.IsValid)
        {
            db.Entry(request).State = EntityState.Modified;
            db.SaveChanges();
            return RedirectToAction("Index");
        }
        return View(request);
    }

    //
    // GET: /Request/Delete/5

    public ActionResult Delete(int id)
    {
        Request request= db.Requests.Find(id);
        return View(request);
    }

    //
    // POST: /Request/Delete/5

    [HttpPost, ActionName("Delete")]
    public ActionResult DeleteConfirmed(int id)
    {            
        Request request = db.Requests.Find(id);
        db.Requests.Remove(request);
        db.SaveChanges();
        return RedirectToAction("Index");
    }

    protected override void Dispose(bool disposing)
    {
        db.Dispose();
        base.Dispose(disposing);
    }
}
} 
```

创建请求视图：

```
........

 <div class="editor-field">
    ViewBag.PossibleCategories = context.Cars;
@Html.DropDownListFor(model => model.ID,
    ((IEnumerable<MVC4.Models.Car>)ViewBag.PossibleCategories)
    .Select(option => new SelectListItem {
    Text = (option == null ? "None" : option.Make), 
    Value = option.ID.ToString(),
    Selected = (Model != null) && (option.ID == Model.CarID)
}), "Choose...")
@Html.ValidationMessageFor(model => model.CarID)

</div>
.......... 
```

这对我不起作用。如何填充此下拉列表并使此视图能够将数据插入数据库？谢谢你的帮助。我已经花了很多时间在这上面，但无法弄清楚。对不起我的英语，我希望你们能理解我。

我得到错误：

```
Value cannot be null.
Parameter name: source.

Description: An unhandled exception occurred during the execution of the 
current web request. Please review the stack trace for more 
information about the error and where it originated in the code. 

Exception Details: System.ArgumentNullException: Value cannot be null.
Parameter name: source

Source Error: 

Line 32:         <div class="editor-field">
Line 33:         ViewBag.PossibleCategories = context.Cars;
Line 34:     @Html.DropDownListFor(model => model.ID,
Line 35:         ((IEnumerable<MVC6.Models.Car>)ViewBag.PossibleCategories)
Line 36:         .Select(option => new SelectListItem { 
```

这是我的请求/视图：

```
@model IEnumerable<MVC6.Models.Request>

@{
ViewBag.Title = "Index";
}

<h2>Index</h2>

<p>
@Html.ActionLink("Create New", "Create")
</p>
<table>
<tr>
    <th>
        User
    </th>
    <th>
        Car
    </th>
    <th></th>
</tr>

@foreach (var item in Model) {
<tr>
    <td>
        @Html.DisplayFor(modelItem => item.User)
    </td>
    <td>
        @Html.DisplayFor(modelItem => item.Car.Make)
    </td>
    <td>
        @Html.ActionLink("Edit", "Edit", new { id=item.ID }) |
        @Html.ActionLink("Details", "Details", new { id=item.ID }) |
        @Html.ActionLink("Delete", "Delete", new { id=item.ID })
    </td>
</tr>
}

</table> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-21T12:54:02.043

[您可以从在 ASP.NET MVC3 Razor 中创建汽车租赁应用程序中](http://blog.scheduler-net.com/post/2012/06/15/creating-car-rental-application-in-asp-net-mvc3-razor.aspx)学习一点。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-11T13:59:23.793

我发现让下拉列表也变得有点困难，但我终于想通了......

像往常一样，有几种方法可以做到这一点。我是这样做的：

在控制器中，我创建了选择列表并放入 ViewBag

`ViewBag.mylist = new SelectList(db.Whatever, "ValueColumn", "DisplayColumn");`

然后在我看来：

```
Html.DropDownList("myname", (SelectList)ViewBag.mylist, "Select Something",

   new
   {
       @onchange = "form.submit();"
   }) 
```

如果您在视图上放置表单，那么这也会发布表单（如果您需要）。我认为您也可以在 ViewModel 中执行此类操作。这对我来说似乎是最简单的方法，虽然看起来有点笨拙。很高兴听到反馈。

# java - 如何在 Eclipse 中制作一个包含启动 jar 时需要运行的 HTML 文件的 jar？

> ID：10971987
> 
> 赞同：0
> 
> 时间：2012-06-10T20:11:13.490
> 
> 标签：java, html, eclipse, jar

我被卡住了，我应该如何将 HTML 文件添加到我的项目中，以便在创建 jar 并将其移动到计算机中的任何位置时，它会在我运行 jar 时加载 HTML 文件。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-10T20:15:15.260

您应该将它们添加为`src/main/resources`文件 - 然后将它们与您的代码一起打包到您的 .jar 中。

然后您可以使用`Class`方法`getResource()`或`getResourceAsStream()`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-10T20:15:13.187

您将 Web 组件添加到名为 Web 应用程序存档 (WAR) 的包中的 Java EE 应用程序，它是一个类似于用于 Java 类库的包的 JAR。WAR 通常包含除 Web 组件之外的其他资源，包括：

服务器端实用程序类（数据库 bean、购物车等）。静态 Web 资源（HTML、图像和声音文件等） 客户端类（小程序和实用程序类）

检查此链接 [http://docs.oracle.com/javaee/6/tutorial/doc/bnadx.html](http://docs.oracle.com/javaee/6/tutorial/doc/bnadx.html)

# javascript - double not (!!) 与 JavaScript 中的类型强制

> ID：10971995
> 
> 赞同：5
> 
> 时间：2012-06-10T20:12:25.613
> 
> 标签：javascript, type-conversion, not-operator

除了指示显式转换之外，在 JavaScript 中使用双非运算符有什么好处吗？似乎这些天来，人们喜欢使用 double not 检查新 API 的存在，但我从来没有读过它的任何优点。

```
if(!!window.File)
    // The File API is supported.
else
    // Your browser sucks. 
```

我读过的一件事是，这是一种将类型强制转换为布尔值的简洁、晦涩的方法，但是，当在这种情况下使用时，对象将自动强制转换为布尔值，因为我们正在检查它是否已定义。

简而言之，为什么人们要在引擎之上进行两次布尔运算？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-10T20:17:26.227

我真的看不出有任何理由在你现在的情况下这样做。它不会以任何方式影响结果。

唯一一次我认为这是一个好主意是，如果您正在构建一个应该返回 bool 值的函数，并且您需要从其他值转换它，例如...

```
function isNotFalsy(val) { return !!val; } 
```

这个例子可能有点勉强，但你明白了。您总是希望确保返回值是用户期望的类型。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-10T20:15:27.327

您不需要`!!`在`if`表达式中使用。
它被用于将值转换为布尔值，并且`if`默认情况下会这样做。

```
var x = ""; // a falsy value
!x // true
!!x // false

if (x) === if (!!x) 
```

# android - 当模拟器屏幕被锁定时，sendKeys 的 Android JUnit 测试失败

> ID：10971996
> 
> 赞同：3
> 
> 时间：2012-06-10T20:12:40.417
> 
> 标签：android, junit, sendkeys, screen-lock

我有一个 Android JUnit 测试，当模拟器屏幕解锁时运行良好，但如果屏幕被锁定，则会失败。这是一个演示问题的示例：

```
package com.example.helloandroid.test;

import com.example.helloandroid.HelloAndroid;

import android.test.ActivityInstrumentationTestCase2;
import android.view.KeyEvent;
import android.widget.EditText;

public class HelloAndroidTest extends
    ActivityInstrumentationTestCase2<HelloAndroid> {
    private HelloAndroid mActivity;
    private EditText editText;

    public HelloAndroidTest() {
        super("com.example.helloandroid", HelloAndroid.class);
    }

    @Override
    protected void setUp() throws Exception {
        super.setUp();
        mActivity = this.getActivity();
        editText = (EditText)mActivity.findViewById
            (com.example.helloandroid.R.id.editText);
    }

    public void testEditTextFormatting() {
        this.sendKeys(KeyEvent.KEYCODE_1);
        assertEquals("1", editText.getText().toString());
    }
} 
```

此示例中的测试应用程序是 Android 教程“Hello World”，其中 TextView 替换为名为 editText 的 EditText 字段。

目前，我通过让应用程序解锁屏幕来解决我的应用程序中的这个问题。但是，此解决方案不是最理想的，因为它强制应用程序需要 DISABLE_KEYGUARD 权限，否则它不需要。

在过去的一年里，我多次在互联网上搜索过，但都是空的。有什么建议么？谢谢你的时间！

# url - 通过 Greasemonkey 重定向链接

> ID：10971999
> 
> 赞同：4
> 
> 时间：2012-06-10T20:13:03.280
> 
> 标签：url, redirect, greasemonkey

我想将一个 URL 重定向到另一个 URL。例如，如果我要输入：

```
google.com 
```

然后按回车，它应该将我重定向到：

```
yahoo.com 
```

[我在上一个帖子中找到了这个的代码](https://stackoverflow.com/questions/3168944/how-can-i-redirect-some-page-with-javascript-in-greasemonkey)，但不幸的是，它适用于我不想要的所有 URL。此外，一旦重定向完成（在 yahoo.com），页面将再次重新加载，无限循环。

编辑：当前代码：

```
 // ==UserScript==
// @name        Google to Yahoo
// @description Redirects Google to Yahoo
// @include     http://*.google.*/*
// @version     1
// ==/UserScript==
    if(content.document.location == "http://google.com"){
            window.location.replace("http://yahoo.com")
} 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-10T20:18:46.697

您发布的脚本只是转发用户，它从不检查用户正在加载的页面。由于 Greasemonkey 是 Javascript，您可以使用获取当前页面的 URL 并进行比较。

获取网址

```
var current_location = content.document.location; 
```

然后比较一下。我认为它会是这样的：

```
if(content.document.location == "http://google.com"){
    window.location.replace("http://yahoo.com")
} 
```

*编辑*

按照 Shoaib 所说的，您可以在 Greasemonkey 脚本中使用 include 指令。所以，在顶部你会放

```
// @include     http://*.google.*/* 
```

这将在每个页面的每个国家/地区的每个 google 子域上运行脚本，而不会在其他页面上运行该脚本。

*编辑 2*

使用命名空间指令将使它：

```
// ==UserScript==
// @name        Redirect Google
// @namespace   http://domain.com/directory
// @description Redirect Google to Yahoo!
// @include     http://*.google.*/*
// ==/UserScript==

window.location.replace("http://yahoo.com"); 
```