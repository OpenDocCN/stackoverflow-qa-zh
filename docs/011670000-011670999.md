# StackOverflow 问答 11670000-11670999

# c# - 正则表达式以数字开头

> ID：11670001
> 
> 赞同：0
> 
> 时间：2012-07-26T13:07:57.650
> 
> 标签：c#, regex

我有一个字符串，如“1 n。鼠标 2 n。扫描仪”。我正在寻找一个正则表达式来提取各个事件。谁能帮助我？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-26T13:17:43.923

`\d+\D+`将匹配从数字开始到下一位的所有内容。然后，您可以使用`Regex.Matches`来查找该类型的所有匹配项。

快速 PowerShell 测试：

```
PS> [regex]::matches('1 n. Of mouse 2 n. Of scanners', '\d+\D+') | select -expand Value
1 n. Of mouse
2 n. Of scanners 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-26T13:31:45.463

我假设您的字符串有一个或多个组，这些组由一个数字组成，后跟“n. of”和一个对象，并且您想要提取每个对象及其出现。以下是基于此格式的示例：

```
MatchCollection matches = Regex.Matches(
    "1 n. Of mouse 2 n. of scanners",
    @"(?<num>\d+)\s+n\.\s+of\s+(?<obj>\w+)",
    RegexOptions.IgnoreCase);

foreach(Match m in matches) {
    Console.WriteLine("Match found:");
    Console.WriteLine("\tCount: {0}", m.Groups["num"]);
    Console.WriteLine("\tObject: {0}\n", m.Groups["obj"]);
} 
```

及其输出：

```
Match found:
  Count: 1
  Object: mouse

Match found:
  Count: 2
  Object: scanners 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-26T13:22:16.017

尝试使用此代码

```
 var value = "1 n. Of mouse 2 n. Of scanners";
        var result =  value.Split().Select(p => Regex.Match(p, @"^\d+$").Value).Where(p => ! p.Equals(string.Empty)).ToList(); 
```

结果是

1

2

# c# - 当后台窗口发送特定消息时如何做“某事”

> ID：11670009
> 
> 赞同：-1
> 
> 时间：2012-07-26T13:08:36.247
> 
> 标签：c#, .net, winapi, window, wndproc

我试图在一个应用程序上做一些事情，我知道它的名字等等......（所以我已经在铸造 findwindow 和东西）例如。我想在该窗口试图获得焦点时通知用户。

我搞砸了 wndproc，但我似乎根本不明白。例如。这是我在stackoverflow上找到的代码，甚至执行失败

```
 public IntPtr WndProc(int hwnd, int msg, IntPtr wParam, IntPtr lParam)
    {

        if (msg == WM_NCACTIVATE)
        {
            SystemSounds.Beep.Play();
            SystemSounds.Beep.Play();
            SystemSounds.Beep.Play();
            SystemSounds.Beep.Play();
            SystemSounds.Beep.Play();
        }

        return IntPtr.Zero;
    } 
```

现在我不明白的是，我认为有 int msg 代表消息。不是 wndproc 是应该得到它的那个吗？把它交给 wndproc 有什么意义？

其次，执行这个功能。我该怎么办，每 100 毫秒检查一次消息还是有事件类型的东西呢？

我在这里真的很困惑，在这里我将不胜感激。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-26T13:40:06.420

恐怕我不完全明白你在这里问什么。

您发现的 WndProc 函数定义与 C# 中的不同。相反，您将覆盖[类的](http://msdn.microsoft.com/en-us/library/system.windows.forms.control.wndproc.aspx)[`WndProc`成员函数`Control`](http://msdn.microsoft.com/en-us/library/system.windows.forms.control.wndproc.aspx)。所有窗口消息都通过此函数进行路由。如果您想以不寻常的方式处理消息，您只会覆盖它，以执行 .NET Framework 尚未为您执行的操作。

例如，对于表单，您可以像这样覆盖 WndProc：

```
public class MyForm : Form
{
    // other code

    protected override void WndProc(ref Message m)
    {
        switch (m.Msg)
        {
            case WM_NCACTIVATE:
            {
                SystemSounds.Beep.Play();
                break;  
            }
            base.WndProc(ref m);  // proceed with default processing
        }
    }
} 
```

请注意，.NET Framework 将所有消息信息包装到一个[`Message`结构](http://msdn.microsoft.com/en-us/library/system.windows.forms.message.aspx)中，而不是像 Win32 API 那样将 4 个原始参数传递给函数。

> 我认为有 int msg 代表消息。不是 wndproc 是应该得到它的那个吗？把它交给 wndproc 有什么意义？

该[`Message.Msg`成员](http://msdn.microsoft.com/en-us/library/system.windows.forms.message.msg.aspx)对应`int msg`于函数定义中的参数。这是要处理的窗口消息的标识符。这些都是在 Windows 头文件中定义的，它们通常以`WM_`. 您可以在 MSDN 上找到这些消息的文档，其中会告诉您它们的含义以及收到它们的时间。例如，当窗口的非客户区被激活或停用时，[`WM_NCACTIVATE`消息被发送到窗口。](http://msdn.microsoft.com/en-us/library/windows/desktop/ms632633.aspx)

*每次收到任何消息时*都会调用 WndProc 函数。您确定收到*哪*条消息以及应该处理哪条消息的方法是打开`Message.Msg`成员的值（或者，在您的原始示例中，`msg`参数）。

> 其次，执行这个功能。我该怎么办，每 100 毫秒检查一次消息还是有事件类型的东西呢？

你不必检查任何东西。WndProc 是一个*函数*，就像任何其他函数一样，包括您自己编写的函数，这意味着它只在应该执行时被调用。

它本身并不是一个事件，尽管 WndProc 函数内部的默认处理负责引发您熟悉的事件以响应它接收到的某些消息。

> 我试图在一个应用程序上做一些事情，我知道它的名字等等......（所以我已经在铸造 findwindow 和东西）例如。我想在该窗口试图获得焦点时通知用户。

我不确定这意味着什么，但您应该查看[`WM_ACTIVATEAPP`消息](http://msdn.microsoft.com/en-us/library/windows/desktop/ms632614.aspx)。每当窗口被激活和被停用时，此消息都会发送到窗口。为了响应该消息，您可以选择做任何您喜欢的事情，包括播放声音。如链接文档所示，`wParam`参数（在[`Message.WParam`member](http://msdn.microsoft.com/en-us/library/system.windows.forms.message.wparam)中找到）告诉您您的窗口是被激活还是被停用。

这几乎和它一样先进。在 WinForms 中编程时，需要重写 WndProc 方法的情况极为罕见。通过这样做，您几乎可以做任何事情，但几乎总是有更好、更简单的方法来做事。

# android - 在 childbrowser.java 中出现错误

> ID：11670010
> 
> 赞同：0
> 
> 时间：2012-07-26T13:08:39.077
> 
> 标签：android, cordova, phonegap-plugins

我在 childbrowser.java 中收到错误“ctx 无法解析”。我按照视频链接[http://www.youtube.com/watch?v=84jmuXS8GJI](http://www.youtube.com/watch?v=84jmuXS8GJI)的说明使用 Phonegap 在我的 Android 应用程序中获取子浏览器，但仍然出现此错误。任何人请解决这个问题。

* * *

```
/*This is my childBrowser.java code*/

package com.phonegap.plugins.childBrowser;

import java.io.IOException;

public class ChildBrowser extends Plugin`  
    protected static final String LOG_TAG = "ChildBrowser";
    private static int CLOSE_EVENT = 0;
    private static int LOCATION_CHANGED_EVENT = 1;

    private String browserCallbackId = null;

    private Dialog dialog;
    private WebView webview;
    private EditText edittext; 
    private boolean showLocationBar = true;

    /**
     * Executes the request and returns PluginResult.
     *
     * @param action        The action to execute.
     * @param args          JSONArry of arguments for the plugin.
     * @param callbackId    The callback id used when calling back into JavaScript.
     * @return              A PluginResult object with a status and message.
     */
    public PluginResult execute(String action, JSONArray args, String callbackId) {
        PluginResult.Status status = PluginResult.Status.OK;
        String result = "";

        try {
            if (action.equals("showWebPage")) {
                this.browserCallbackId = callbackId;

                // If the ChildBrowser is already open then throw an error
                if (dialog != null && dialog.isShowing()) {
                    return new PluginResult(PluginResult.Status.ERROR, "ChildBrowser is already open");
                }

                result = this.showWebPage(args.getString(0), args.optJSONObject(1));

                if (result.length() > 0) {
                    status = PluginResult.Status.ERROR;
                    return new PluginResult(status, result);
                } else {
                    PluginResult pluginResult = new PluginResult(status, result);
                    pluginResult.setKeepCallback(true);
                    return pluginResult;
                }
            }
            else if (action.equals("close")) {
                closeDialog();

                JSONObject obj = new JSONObject();
                obj.put("type", CLOSE_EVENT);

                PluginResult pluginResult = new PluginResult(status, obj);
                pluginResult.setKeepCallback(false);
                return pluginResult;
            }
            else if (action.equals("openExternal")) {
                result = this.openExternal(args.getString(0), args.optBoolean(1));
                if (result.length() > 0) {
                    status = PluginResult.Status.ERROR;
                }
            }
            else {
                status = PluginResult.Status.INVALID_ACTION;
            }
            return new PluginResult(status, result);
        } catch (JSONException e) {
            return new PluginResult(PluginResult.Status.JSON_EXCEPTION);
        }
    }

    /**
     * Display a new browser with the specified URL.
     *
     * @param url           The url to load.
     * @param usePhoneGap   Load url in PhoneGap webview
     * @return              "" if ok, or error message.
     */
    public String openExternal(String url, boolean usePhoneGap) {
        try {
            Intent intent = null;
            if (usePhoneGap) {
                intent = new Intent().setClass(this.ctx.getContext(), org.apache.cordova.DroidGap.class);
                intent.setData(Uri.parse(url)); // This line will be removed in future.
                intent.putExtra("url", url);

                // Timeout parameter: 60 sec max - May be less if http device timeout is less.
                intent.putExtra("loadUrlTimeoutValue", 60000);

                // These parameters can be configured if you want to show the loading dialog
                intent.putExtra("loadingDialog", "Wait,Loading web page...");   // show loading dialog
                intent.putExtra("hideLoadingDialogOnPageLoad", true);           // hide it once page has completely loaded
            }
            else {
                intent = new Intent(Intent.ACTION_VIEW);
                intent.setData(Uri.parse(url));
            }
            this.ctx.startActivity(intent);
            return "";
        } catch (android.content.ActivityNotFoundException e) {
            Log.d(LOG_TAG, "ChildBrowser: Error loading url "+url+":"+ e.toString());
            return e.toString();
        }
    }

    /**
     * Closes the dialog
     */
    private void closeDialog() {
        if (dialog != null) {
            dialog.dismiss();
        }
    }

    /**
     * Checks to see if it is possible to go back one page in history, then does so.
     */
    private void goBack() {
        if (this.webview.canGoBack()) {
            this.webview.goBack();
        }
    }

    /**
     * Checks to see if it is possible to go forward one page in history, then does so.
     */
    private void goForward() {
        if (this.webview.canGoForward()) {
            this.webview.goForward();
        }
    }

    /**
     * Navigate to the new page
     * 
     * @param url to load
     */
    private void navigate(String url) {        
        InputMethodManager imm = (InputMethodManager)this.ctx.getSystemService(Context.INPUT_METHOD_SERVICE);
        imm.hideSoftInputFromWindow(edittext.getWindowToken(), 0);

        if (!url.startsWith("http") && !url.startsWith("file:")) {
            this.webview.loadUrl("http://" + url);
        } else {
            this.webview.loadUrl(url);
        }
        this.webview.requestFocus();
    }

    /**
     * Should we show the location bar?
     * 
     * @return boolean
     */
    private boolean getShowLocationBar() {
        return this.showLocationBar;
    }

    /**
     * Display a new browser with the specified URL.
     *
     * @param url           The url to load.
     * @param jsonObject 
     */
    public String showWebPage(final String url, JSONObject options) {
        // Determine if we should hide the location bar.
        if (options != null) {
            showLocationBar = options.optBoolean("showLocationBar", true);
        }

        // Create dialog in new thread 
        Runnable runnable = new Runnable() {
            /**
             * Convert our DIP units to Pixels
             * 
             * @return int
             */
            private int dpToPixels(int dipValue) {
                int value = (int) TypedValue.applyDimension( TypedValue.COMPLEX_UNIT_DIP,
                                                            (float) dipValue,
                                                            ctx.getContext().getResources().getDisplayMetrics()
                );

                return value;
            }

            public void run() {
                // Let's create the main dialog
                dialog = new Dialog(ctx.getContext(), android.R.style.Theme_NoTitleBar);
                dialog.getWindow().getAttributes().windowAnimations = android.R.style.Animation_Dialog;
                dialog.requestWindowFeature(Window.FEATURE_NO_TITLE);
                dialog.setCancelable(true);
                dialog.setOnDismissListener(new DialogInterface.OnDismissListener() {
                        public void onDismiss(DialogInterface dialog) {
                            try {
                                JSONObject obj = new JSONObject();
                                obj.put("type", CLOSE_EVENT);

                                sendUpdate(obj, false);
                            } catch (JSONException e) {
                                Log.d(LOG_TAG, "Should never happen");
                            }
                        }
                });

                // Main container layout
                LinearLayout main = new LinearLayout(ctx.getContext());
                main.setOrientation(LinearLayout.VERTICAL);

                // Toolbar layout
                RelativeLayout toolbar = new RelativeLayout(ctx.getContext());
                toolbar.setLayoutParams(new RelativeLayout.LayoutParams(LayoutParams.FILL_PARENT, this.dpToPixels(44)));
                toolbar.setPadding(this.dpToPixels(2), this.dpToPixels(2), this.dpToPixels(2), this.dpToPixels(2));
                toolbar.setHorizontalGravity(Gravity.LEFT);
                toolbar.setVerticalGravity(Gravity.TOP);

                // Action Button Container layout
                RelativeLayout actionButtonContainer = new RelativeLayout(ctx.getContext());
                actionButtonContainer.setLayoutParams(new RelativeLayout.LayoutParams(LayoutParams.WRAP_CONTENT, LayoutParams.WRAP_CONTENT));
                actionButtonContainer.setHorizontalGravity(Gravity.LEFT);
                actionButtonContainer.setVerticalGravity(Gravity.CENTER_VERTICAL);
                actionButtonContainer.setId(1);

                // Back button
                ImageButton back = new ImageButton(ctx.getContext());
                RelativeLayout.LayoutParams backLayoutParams = new RelativeLayout.LayoutParams(LayoutParams.WRAP_CONTENT, LayoutParams.FILL_PARENT);
                backLayoutParams.addRule(RelativeLayout.ALIGN_LEFT);
                back.setLayoutParams(backLayoutParams);
                back.setContentDescription("Back Button");
                back.setId(2);
                try {
                    back.setImageBitmap(loadDrawable("www/childbrowser/icon_arrow_left.png"));
                } catch (IOException e) {
                    Log.e(LOG_TAG, e.getMessage(), e);
                }
                back.setOnClickListener(new View.OnClickListener() {
                    public void onClick(View v) {
                        goBack();
                    }
                });

                // Forward button
                ImageButton forward = new ImageButton(ctx.getContext());
                RelativeLayout.LayoutParams forwardLayoutParams = new RelativeLayout.LayoutParams(LayoutParams.WRAP_CONTENT, LayoutParams.FILL_PARENT);
                forwardLayoutParams.addRule(RelativeLayout.RIGHT_OF, 2);
                forward.setLayoutParams(forwardLayoutParams);
                forward.setContentDescription("Forward Button");
                forward.setId(3);
                try {
                    forward.setImageBitmap(loadDrawable("www/childbrowser/icon_arrow_right.png"));
                } catch (IOException e) {
                    Log.e(LOG_TAG, e.getMessage(), e);
                }
                forward.setOnClickListener(new View.OnClickListener() {
                    public void onClick(View v) {
                        goForward();
                    }
                });

                // Edit Text Box
                edittext = new EditText(ctx.getContext());
                RelativeLayout.LayoutParams textLayoutParams = new RelativeLayout.LayoutParams(LayoutParams.FILL_PARENT, LayoutParams.FILL_PARENT);
                textLayoutParams.addRule(RelativeLayout.RIGHT_OF, 1);
                textLayoutParams.addRule(RelativeLayout.LEFT_OF, 5);
                edittext.setLayoutParams(textLayoutParams);
                edittext.setId(4);
                edittext.setSingleLine(true);
                edittext.setText(url);
                edittext.setInputType(InputType.TYPE_TEXT_VARIATION_URI);
                edittext.setImeOptions(EditorInfo.IME_ACTION_GO);
                edittext.setInputType(InputType.TYPE_NULL); // Will not except input... Makes the text NON-EDITABLE
                edittext.setOnKeyListener(new View.OnKeyListener() {
                    public boolean onKey(View v, int keyCode, KeyEvent event) {
                        // If the event is a key-down event on the "enter" button
                        if ((event.getAction() == KeyEvent.ACTION_DOWN) && (keyCode == KeyEvent.KEYCODE_ENTER)) {
                          navigate(edittext.getText().toString());
                          return true;
                        }
                        return false;
                    }
                });

                // Close button
                ImageButton close = new ImageButton(ctx.getContext());
                RelativeLayout.LayoutParams closeLayoutParams = new RelativeLayout.LayoutParams(LayoutParams.WRAP_CONTENT, LayoutParams.FILL_PARENT);
                closeLayoutParams.addRule(RelativeLayout.ALIGN_PARENT_RIGHT);
                close.setLayoutParams(closeLayoutParams);
                forward.setContentDescription("Close Button");
                close.setId(5);
                try {
                    close.setImageBitmap(loadDrawable("www/childbrowser/icon_close.png"));
                } catch (IOException e) {
                    Log.e(LOG_TAG, e.getMessage(), e);
                }   
                close.setOnClickListener(new View.OnClickListener() {
                    public void onClick(View v) {
                        closeDialog();
                    }
                });

                // WebView
                webview = new WebView(ctx.getContext());
                webview.setLayoutParams(new LinearLayout.LayoutParams(LayoutParams.FILL_PARENT, LayoutParams.FILL_PARENT));
                webview.setWebChromeClient(new WebChromeClient());
                WebViewClient client = new ChildBrowserClient(edittext);
                webview.setWebViewClient(client);
                WebSettings settings = webview.getSettings();
                settings.setJavaScriptEnabled(true);
                settings.setJavaScriptCanOpenWindowsAutomatically(true);
                settings.setBuiltInZoomControls(true);
                settings.setPluginsEnabled(true);
                settings.setDomStorageEnabled(true);
                webview.loadUrl(url);
                webview.setId(6);
                webview.getSettings().setLoadWithOverviewMode(true);
                webview.getSettings().setUseWideViewPort(true);
                webview.requestFocus();
                webview.requestFocusFromTouch();   

                // Add the back and forward buttons to our action button container layout
                actionButtonContainer.addView(back);
                actionButtonContainer.addView(forward);

                // Add the views to our toolbar
                toolbar.addView(actionButtonContainer);
                toolbar.addView(edittext);
                toolbar.addView(close);

                // Don't add the toolbar if its been disabled
                if (getShowLocationBar()) {
                    // Add our toolbar to our main view/layout
                    main.addView(toolbar);
                }

                // Add our webview to our main view/layout
                main.addView(webview);

                WindowManager.LayoutParams lp = new WindowManager.LayoutParams();
                lp.copyFrom(dialog.getWindow().getAttributes());
                lp.width = WindowManager.LayoutParams.FILL_PARENT;
                lp.height = WindowManager.LayoutParams.FILL_PARENT;

                dialog.setContentView(main);
                dialog.show();
                dialog.getWindow().setAttributes(lp);
            }

          private Bitmap loadDrawable(String filename) throws java.io.IOException {
              InputStream input = ctx.getAssets().open(filename);    
              return BitmapFactory.decodeStream(input);
          }
        };
        this.ctx.runOnUiThread(runnable);
        return "";
    }

    /**
     * Create a new plugin result and send it back to JavaScript
     * 
     * @param obj a JSONObject contain event payload information
     */
    private void sendUpdate(JSONObject obj, boolean keepCallback) {
        if (this.browserCallbackId != null) {
            PluginResult result = new PluginResult(PluginResult.Status.OK, obj);
            result.setKeepCallback(keepCallback);
            this.success(result, this.browserCallbackId);
        }
    }

    /**
     * The webview client receives notifications about appView
     */
    public class ChildBrowserClient extends WebViewClient {
        EditText edittext;

        /**
         * Constructor.
         * 
         * @param mContext
         * @param edittext 
         */
        public ChildBrowserClient(EditText mEditText) {
            this.edittext = mEditText;
        }       

        /**
         * Notify the host application that a page has started loading.
         * 
         * @param view          The webview initiating the callback.
         * @param url           The url of the page.
         */
        @Override
        public void onPageStarted(WebView view, String url,  Bitmap favicon) {
            super.onPageStarted(view, url, favicon);            
            String newloc;
            if (url.startsWith("http:") || url.startsWith("https:") || url.startsWith("file:")) {
                newloc = url;
            } else {
                newloc = "http://" + url;
            }

            if (!newloc.equals(edittext.getText().toString())) {           
                edittext.setText(newloc);
            }

            try {
                JSONObject obj = new JSONObject();
                obj.put("type", LOCATION_CHANGED_EVENT);
                obj.put("location", url);

                sendUpdate(obj, true);
            } catch (JSONException e) {
                Log.d("ChildBrowser", "This should never happen");
            }
        }
    }
} 
```

* * *

这些是我在 ChildBrowser.java 页面中遇到的错误：

```
Description Resource    Path    Location    Type
ctx cannot be resolved  ChildBrowser.java   /childBrowser/src/com/phonegap/plugins/childBrowser line 228    Java Problem
ctx cannot be resolved  ChildBrowser.java   /childBrowser/src/com/phonegap/plugins/childBrowser line 236    Java Problem
ctx cannot be resolved  ChildBrowser.java   /childBrowser/src/com/phonegap/plugins/childBrowser line 254    Java Problem
... 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-27T05:52:47.293

你看错地方了......要获取 childbrowser 的更新和工作副本，请在此处查看[https://github.com/phonegap/phonegap-plugins/tree/65be38cf02466748a3b3e93c2d18cb2c198feb28/Android/ChildBrowser](https://github.com/phonegap/phonegap-plugins/tree/65be38cf02466748a3b3e93c2d18cb2c198feb28/Android/ChildBrowser)

**更新：-**

请参阅此[http://simonmacdonald.blogspot.fi/2012/07/phonegap-android-plugins-sometimes-we.html](http://simonmacdonald.blogspot.fi/2012/07/phonegap-android-plugins-sometimes-we.html)

你需要修改一些这样的东西

1.  ctx.getContext() 替换为 cordova.getContext()

2.  ctx.startActivity() 替换为 cordova.getActivity().startActivity()

3.  ctx.getSystemService() 替换为 cordova.getActivity().getSystemService()

4.  ctx.getAssets() 替换为 cordova.getActivity().getAssets()

5.  ctx.runOnUiThread() 替换为 cordova.getActivity().runOnUiThread()

6.  ctx.getApplicationContext() 替换为 cordova.getActivity().getApplicationContext()

7.  ctx.getPackageManager() 替换为 cordova.getActivity().getPackageManager()

8.  ctx.getSharedPreferences() 替换为 cordova.getActivity().getSharedPreferences()

9.  ctx.unregisterActivity() 替换为 cordova.getActivity().unregisterActivity()

10.  ctx.getResources() 替换为 cordova.getActivity().getResources()

11.  import com.phonegap.api.* 替换为 import org.apache.cordova.api.*

# asp.net - 如何检索站点核心超链接？

> ID：11670012
> 
> 赞同：2
> 
> 时间：2012-07-26T13:08:44.517
> 
> 标签：asp.net, .net, sitecore

**情况：**
假设我的内容树中有一个位于“sitecore/Content/Home/mypage”的项目（页面）。我想在我的 .aspx 布局中创建指向此项目的超链接。

**问题：**
如何在我的 .aspx 布局中创建指向此项目的超链接？

（*不记得正确的语法了`<asp:Hyperlink>`*）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-26T13:38:32.760

如果您需要在代码中获取项目的 url，无论您是否在链接中使用它，都可以使用`Sitecore.Links.LinkManager.GetItemUrl(item, options)`.

我建议不要将它与单个参数 ( `GetItemUrl(item)`) 一起使用，因为它不会尊重配置选项（例如禁用语言字符串作为路径的一部分：`/en/path/to/item`可能会出现而不是`/path/to/item`）。

要使用配置选项，您可以克隆默认 URL 选项：

```
var opts = (UrlOptions) UrlOptions.DefaultOptions.Clone();
var url = LinkManager.GetItemUrl(item, opts); 
```

我经常使用它，以至于我使用以下扩展方法：

```
public static string GetUrl(this Item source, bool absolutePath = false)
{
    if (source == null)
        throw new ArgumentNullException("source");
    var options = (UrlOptions) UrlOptions.DefaultOptions.Clone();
    options.AlwaysIncludeServerUrl = absolutePath;
    return LinkManager.GetItemUrl(source, options);
} 
```

使用这种格式的优点是它允许您通过 ID 识别项目并链接到它，无论它位于内容树的什么位置。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-26T13:26:10.593

我不确定在 Adil 的示例中，URL 是否由 LinkProvider 处理？我通常会在我的代码隐藏中绑定 NavigateUrl 属性

```
<asp:HyperLink ID="hlHyperLink" runat="server" Text="my link text" /> 
```

然后在 C#

```
hlHyperLink.NavigateUrl = Sitecore.Links.LinkManager.GetItemUrl(Sitecore.Context.Database.GetItem("path_to_item")); 
```

# c++ - boost::asio::async_read_until 不调用处理程序

> ID：11670014
> 
> 赞同：0
> 
> 时间：2012-07-26T13:08:51.060
> 
> 标签：c++, linux, serial-port, boost-asio

我正在学习如何将 Boost:asio 库与串行端口一起使用。我使用同步写入和读取编写了一些代码，现在我想使用异步但它不起作用。简单示例：

```
void readHandler(const boost::system::error_code&,std::size_t);

streambuf buf;

int main(int argc,char *argv[]){

    io_service io;
    serial_port port(io,PORT);

        if(port.isopen()){
           while(1){
            // ... getting std::string::toSend from user ...

                write(port,buffer(toSend.c_str(),toSend.size())); 

                async_read_until(port,buf,'\n',readHandler); // <= it's returning but not calling readHandler at all
           }
           port.close(); 
        }

}

void readHandler(const boost::system::error_code& error,std::size_t bytes_transferred){

    std::cout << "readHandler()" << std::endl;
    //... reading from buf object and calling buf.consume(buf.size()) ...
} 
```

**async_read_until()**它正在返回但不调用***readHandler()***。如果我更改为同步读取，它正在从端口读取 OK。我还在每个 while 循环中检查***buf***对象，它是空的。我做错了什么？？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-26T13:11:50.623

您需要调用 io_service 上的 run() 方法才能使回调起作用。在您的循环中，您需要`io.run()`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-26T13:28:32.033

正如 Janm 指出的那样，您需要调用 io.run 才能使 async_read_until 工作。

但...

您还需要将写入转换为 async_write，因为同步和异步调用在 asio 中不能很好地协同工作。您需要做的是：

设置第一个 async_write 调用 io.run

在您的写处理程序设置 async_read_until

在您的读取处理程序设置下一个 async_write

# python - 无法在 nuke6.1v2 中导入 ctypes 模块

> ID：11670015
> 
> 赞同：1
> 
> 时间：2012-07-26T13:08:53.757
> 
> 标签：python, import, ctypes

如标题所示，如果我尝试在 nuke6.1v2 中导入 ctypes，则会收到此错误：

```
import ctypes
# Result: Traceback (most recent call last):
File "<string>", line 1, in <module>
File "C:\Program Files\Nuke6.1v2\lib\ctypes\__init__.py", line 10, in <module>
from _ctypes import Union, Structure, Array
ImportError: No module named _ctypes 
```

我还尝试从 Python 2.6 主文件夹中导入它，但没有成功。

但是，如果我尝试将它导入另一个包（例如 softimage），我完全没有问题。

我发现很多人都有同样的问题，但没有一个解决方案对我有用。

任何想法？

谢谢

# java - 使用 Java 7 删除文件

> ID：11670017
> 
> 赞同：1
> 
> 时间：2012-07-26T13:09:10.397
> 
> 标签：java, java-7

我正在开发一个`java.nio.*`用于文件操作的项目。基本上我的产品正在服务器上运行，现在我正在使用 Java 7 在服务器上创建文件。

```
Files.createFile(path)//For creating file. 
```

但是当我想使用删除它时

```
Files.delete(path) 
```

它给了我信息

```
The process cannot access the file because it is being used by another process.** 
```

删除文件代码....

```
Files.walkFileTree(start, new SimpleFileVisitor<Path>() {
            @Override
            public FileVisitResult visitFile(Path file,
                    BasicFileAttributes attrs) throws IOException {

                Files.delete(file);
                return FileVisitResult.CONTINUE;
            }

            @Override
            public FileVisitResult postVisitDirectory(Path dir, IOException e)
                    throws IOException {
                if (e == null) {
                     Files.delete(dir);
                    return FileVisitResult.CONTINUE;
                } else {
                    // directory iteration failed
                    throw e;
                }
            }

        }); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-26T13:12:05.690

您不能删除已被您的进程或其他进程锁定的文件。在 Windows 上，文件默认被锁定，在 linux 上它们必须被显式锁定。

这个例子

```
Path path = FileSystems.getDefault().getPath("test.log");
Path file = Files.createFile(path);
Files.delete(file); 
```

运行没有错误

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-26T13:12:28.687

要删除文件，您必须获取文件处理程序（通常由创建它的线程拥有）。因此，如果一个线程创建了一个文件，另一个线程**不能**删除它。

确保，当您删除文件时，服务器没有创建另一个线程，这是每个服务器代码上发生的情况。

**PS：**如果您想要更多更好的答案，您将不得不提供更多信息

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-08-11T17:03:22.613

如果您正在使用 swing 组件打开文件，则可以使用该`dispose()`组件打开文件的方法。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-26T13:13:15.400

您是否关闭了所有使用给定文件引用的编写器？

# javascript - object.style.color 只返回 rgb

> ID：11670019
> 
> 赞同：5
> 
> 时间：2012-07-26T13:09:12.520
> 
> 标签：javascript

环境：JavaScript object.style.color 返回类似于 `"rgb(255,0,0)"` 是否有另一种返回格式，例如十六进制？

```
var colorvariable = document.getElementById('text1').style.color 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-26T13:20:27.730

如果你设置：

```
document.getElementById('text1').style.color = '#000'; 
```

它会返回`#000`。

但是，如果您设置：

```
document.getElementById('text1').style.color = 'rgb(0,0,0)'; 
```

它将 return `rgb(0,0,0)`，因此此返回值取决于设置的值。

您可以使用`getComputedStyle`RGB 格式获取颜色，然后转换为 HEX。请参阅此代码：

```
var hexChars = '0123456789ABCDEF';
var rgb = getComputedStyle(document.body).color.match(/\d+/g);
var r = parseInt(rgb[0]).toString(16);
var g = parseInt(rgb[1]).toString(16);
var b = parseInt(rgb[2]).toString(16);
var hex = '#' + r + g + b; 
```

# javascript - Javascript/jQuery 对象数组？

> ID：11670020
> 
> 赞同：-5
> 
> 时间：2012-07-26T13:09:13.003
> 
> 标签：javascript, jquery, oop, javascript-objects, iscroll

是否可以创建对象数组？我想知道这一点，因为我正在开发一个 iPad 网站，其中包含许多需要在 iPad 上滚动的字段。

当然，iPad/Safari 不得不让事情变得困难，而不是使用 overflow-x/y 选项来允许滚动条。所以，我希望做的是创建一个 iScroll 对象数组，因为需要创建大量的东西，我宁愿不这样做：

```
var myScroll = new iScroll();
var myScroll = new iScroll(); 
```

等等。

我希望做的是有某种循环，如：

```
var arrayOfObjects=new Array();
for(var i=0; i < numFields; i++)
{
   var temp = new iScroll();
   arrayOfObjects.push(temp);
} 
```

那么，这样的事情可行吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-26T13:13:06.473

我认为您发布的代码可以正常工作。一些挑剔：

```
var arrayOfObjects = []; // use this syntax instead of "new array"
for (var i = 0; i < numFields; i++) {
   arrayOfObjects.push(new iScroll()); // no reason for a temp var
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-26T13:13:43.767

是的

```
var arrayOfObjects=new Array();
for(var i=0; i < 10; i++)
{
   var temp = new Object();
   arrayOfObjects.push(temp);
} 
```

上面的代码为 arrayOfObjects 的值生成： [Object, Object, Object, ... ]

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-26T13:20:14.753

你想要的，可以通过[jQuery.map()](http://api.jquery.com/jQuery.map/)来实现，如下所示：

```
var arrayObjects = $.map(Array(numFields), function(){ return new iScroll(); } ); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-26T13:12:18.350

是的，就我而言，你可以做到这一点。

我通常会说：

```
var myArray = []
var myArray[0] = new iScroll();
var myArray[1] = new iScroll();
var myArray[2] = new iScroll();
var myArray[3] = new iScroll(); 
```

但是在循环中执行它应该工作相同:)

# ruby - 获取网页大小的 Ruby 代码（以字节为单位）

> ID：11670024
> 
> 赞同：3
> 
> 时间：2012-07-26T13:09:18.500
> 
> 标签：ruby, ruby-on-rails-3, nokogiri, page-size

我想以字节为单位计算网页的大小，例如 www.google.com 的大小约为 44kb，facebook.com 的大小约为 17k。我尝试过 Nokogiri 来计算 HTML 的长度，但它为 Google 提供了 8k，为 Facebook 提供了 32k。我不想使用任何第三方工具，我想在我的应用程序中计算它。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-26T13:25:34.717

此代码示例应该让您上路。它下载站点，并使用长度方法检索大小。

```
require 'net/http'
require 'fileutils' #I'm pretty sure this is needed for the delete method  
  class HttpSample  
  def downloadGoogleHome  
    proxy = Net::HTTP::Proxy('ipaddress', portnumber) # use actual ip and port  
    url = URI.parse('http://www.google.com')  
    http_response = proxy.get_response(url) 
    puts http_response.body.length #size
  end
  s = HttpSample.new  
  s.downloadGoogleHome  
end 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-26T17:49:15.760

使用`Net::HTTP::Head`允许您向服务器询问页面，而不必返回页面并浪费他们以及您的带宽和 CPU 时间。返回的标头之一应该是`Content-Length`：

```
require 'net/http'
request = Net::HTTP.new('google.com', 80)
head = request.request_head('/') 
```

返回：

```
#<Net::HTTPMovedPermanently:0x102157ae0
    @body_exist = false,
    @read = true,
    @socket = nil,
    attr_accessor :body = nil,
    attr_reader :code = "301",
    attr_reader :header = {
                "location" => [
            [0] "http://www.google.com/"
        ],
            "content-type" => [
            [0] "text/html; charset=UTF-8"
        ],
                    "date" => [
            [0] "Thu, 26 Jul 2012 17:46:30 GMT"
        ],
                 "expires" => [
            [0] "Sat, 25 Aug 2012 17:46:30 GMT"
        ],
           "cache-control" => [
            [0] "public, max-age=2592000"
        ],
                  "server" => [
            [0] "gws"
        ],
          "content-length" => [
            [0] "219"
        ],
        "x-xss-protection" => [
            [0] "1; mode=block"
        ],
         "x-frame-options" => [
            [0] "SAMEORIGIN"
        ],
              "connection" => [
            [0] "close"
        ]
    },
    attr_reader :http_version = "1.1",
    attr_reader :message = "Moved Permanently"
> 
```

这是一个重定向，显示浏览器需要寻找其他地方。

不幸的是，并非所有 HTTPd 都返回`content-length`标头，因为页面可能是动态创建的，因此在实际呈现和发送内容之前无法做出很好的猜测。

按照上面的重定向和另一个 HEAD 请求结果：

```
#<Net::HTTPOK:0x10217e8c0
    @body_exist = false,
    @read = true,
    @socket = nil,
    attr_accessor :body = nil,
    attr_reader :code = "200",
    attr_reader :header = {
              "set-cookie" => [
            [ 0] "NID=62=c2jRl25ItoF5YkVgNv3g2woB2A3iIqkY__EYX5BGst--KYmjNbfCeVL0FIUcq6jm6PqH_-YV6QFO_yNjy1BzMms-QJKPRsfcq0px030WVzKTMtMF9dJUJpS0XdV1NLOv; expires=Fri, 25-Jan-2013 17:50:22 GMT; path=/; domain=.google.com; HttpOnly",
            [ 1] "expires=; expires=Mon, 01-Jan-1990 00:00:00 GMT; path=/; domain=www.google.com",
            [ 2] "path=; expires=Mon, 01-Jan-1990 00:00:00 GMT; path=/; domain=www.google.com",
            [ 3] "domain=; expires=Mon, 01-Jan-1990 00:00:00 GMT; path=/; domain=www.google.com",
            [ 4] "expires=; expires=Mon, 01-Jan-1990 00:00:00 GMT; path=/; domain=www.google.com",
            [ 5] "path=; expires=Mon, 01-Jan-1990 00:00:00 GMT; path=/; domain=www.google.com",
            [ 6] "domain=; expires=Mon, 01-Jan-1990 00:00:00 GMT; path=/; domain=www.google.com",
            [ 7] "expires=; expires=Mon, 01-Jan-1990 00:00:00 GMT; path=/; domain=.www.google.com",
            [ 8] "path=; expires=Mon, 01-Jan-1990 00:00:00 GMT; path=/; domain=.www.google.com",
            [ 9] "domain=; expires=Mon, 01-Jan-1990 00:00:00 GMT; path=/; domain=.www.google.com",
            [10] "expires=; expires=Mon, 01-Jan-1990 00:00:00 GMT; path=/; domain=.www.google.com",
            [11] "path=; expires=Mon, 01-Jan-1990 00:00:00 GMT; path=/; domain=.www.google.com",
            [12] "domain=; expires=Mon, 01-Jan-1990 00:00:00 GMT; path=/; domain=.www.google.com",
            [13] "expires=; expires=Mon, 01-Jan-1990 00:00:00 GMT; path=/; domain=google.com",
            [14] "path=; expires=Mon, 01-Jan-1990 00:00:00 GMT; path=/; domain=google.com",
            [15] "domain=; expires=Mon, 01-Jan-1990 00:00:00 GMT; path=/; domain=google.com",
            [16] "expires=; expires=Mon, 01-Jan-1990 00:00:00 GMT; path=/; domain=google.com",
            [17] "path=; expires=Mon, 01-Jan-1990 00:00:00 GMT; path=/; domain=google.com",
            [18] "domain=; expires=Mon, 01-Jan-1990 00:00:00 GMT; path=/; domain=google.com",
            [19] "expires=; expires=Mon, 01-Jan-1990 00:00:00 GMT; path=/; domain=.google.com",
            [20] "path=; expires=Mon, 01-Jan-1990 00:00:00 GMT; path=/; domain=.google.com",
            [21] "domain=; expires=Mon, 01-Jan-1990 00:00:00 GMT; path=/; domain=.google.com",
            [22] "expires=; expires=Mon, 01-Jan-1990 00:00:00 GMT; path=/; domain=.google.com",
            [23] "path=; expires=Mon, 01-Jan-1990 00:00:00 GMT; path=/; domain=.google.com",
            [24] "domain=; expires=Mon, 01-Jan-1990 00:00:00 GMT; path=/; domain=.google.com",
            [25] "PREF=ID=51ce2f15ffbc5de1:FF=0:TM=1343325022:LM=1343325022:S=H8-1NoxuEbX7fepF; expires=Sat, 26-Jul-2014 17:50:22 GMT; path=/; domain=.google.com",
            [26] "NID=62=aO6oBKx_v48l5SqQrRDUiNxfOixEE0QnkQIBSZK4u0xS8cHGc7uXTUt6yJhIZTyCe_XWGn6t3-Ov4EvxPE8hAO7I89ao9RR9dLUyYPBB784fR12bJsqbkTaCVaZI7ihT; expires=Fri, 25-Jan-2013 17:50:22 GMT; path=/; domain=.google.com; HttpOnly"
        ],
                    "date" => [
            [0] "Thu, 26 Jul 2012 17:50:22 GMT"
        ],
                 "expires" => [
            [0] "-1"
        ],
           "cache-control" => [
            [0] "private, max-age=0"
        ],
            "content-type" => [
            [0] "text/html; charset=ISO-8859-1"
        ],
                     "p3p" => [
            [0] "CP=\"This is not a P3P policy! See http://www.google.com/support/accounts/bin/answer.py?hl=en&answer=151657 for more info.\""
        ],
                  "server" => [
            [0] "gws"
        ],
        "x-xss-protection" => [
            [0] "1; mode=block"
        ],
         "x-frame-options" => [
            [0] "SAMEORIGIN"
        ],
              "connection" => [
            [0] "close"
        ]
    },
    attr_reader :http_version = "1.1",
    attr_reader :message = "OK"
> 
```

注意，没有`content-length`返回任何标题。

去一个返回静态页面的网站会给我一个不同的响应：

```
request = Net::HTTP.new('tools.ietf.org', 80)
head = request.request_head('/html/rfc2606') 
```

返回：

```
#<Net::HTTPOK:0x100914370
    @body_exist = false,
    @read = true,
    @socket = nil,
    attr_accessor :body = nil,
    attr_reader :code = "200",
    attr_reader :header = {
                    "date" => [
            [0] "Thu, 26 Jul 2012 17:55:23 GMT"
        ],
                  "server" => [
            [0] "Apache/2.2.21 (Debian)"
        ],
        "content-location" => [
            [0] "rfc2606.html"
        ],
                    "vary" => [
            [0] "negotiate"
        ],
                     "tcn" => [
            [0] "choice"
        ],
           "last-modified" => [
            [0] "Sat, 26 May 2012 22:18:00 GMT"
        ],
                    "etag" => [
            [0] "\"d44ff-43da-4c0f7db90d600;4c5bf43471540\""
        ],
           "accept-ranges" => [
            [0] "bytes"
        ],
          "content-length" => [
            [0] "17370"
        ],
              "connection" => [
            [0] "close"
        ],
            "content-type" => [
            [0] "text/html; charset=UTF-8"
        ]
    },
    attr_reader :http_version = "1.1",
    attr_reader :message = "OK"
> 
```

所以，是的，可以说出来，但有时您无法从`HEAD`请求中获得所需的信息。

在过去，我解决这个问题的方法是先尝试 HEAD，如果这没有给我我需要的东西，那么我会使用普通的 GET 检索页面，然后从中获取大小。采用这种方法有助于减少浪费的带宽。

# javascript - asp.net MVC3中的Javascript验证

> ID：11670027
> 
> 赞同：0
> 
> 时间：2012-07-26T13:09:26.247
> 
> 标签：javascript, jquery, asp.net-mvc-3, jquery-validate

我的问题是第一次加载页面时，弹出警报（1）和警报（2），但是当我点击我的保存按钮时警报（3）不弹出但显示验证消息（不计如果我填写正确或错误的下拉列表）并且所有内容都已保存。我有这种JS：

```
 <script src="@Url.Content("~/Scripts/jquery.validate.min.js")" type="text/javascript"></script>
    <script src="@Url.Content("~/Scripts/jquery.validate.unobtrusive.min.js")" type="text/javascript"></script>
    <script type="text/javascript">

        $(document).ready(function () {
            alert(1);
            PassWayValidators();
            $('#documents_TravelDocumentDocumentPass_PassDate').datepicker();           

        });

        function PassWayValidators() {
            alert(2);
            $.validator.addMethod('PassWayValidator',
                    function (value, element) {
                        alert(3);
                    }, 'Please Inert Valid Numbers');

            $("#documents_TravelDocumentDocumentPass_PassWayId").rules("add", {
                PassWayValidator: true
            });
        }
    </script>
    <...Some Code Here...>
         <div class="TravelDocumentDocumentPassCommentInner">
                                <span>გადაცემის ფორმა
                                    <br />
                                    @Html.DropDownListFor(model => documents.TravelDocumentDocumentPass.PassWayId, (IEnumerable<SelectListItem>)ViewBag.DocumentPassTypeList, String.Empty, isDisabled)
                                    @Html.ValidationMessageFor(model => documents.TravelDocumentDocumentPass.PassWayId, "*")
                                </span>
                            </div>
    <...Some Code Here too... and>
 @Html.ValidationSummary() 
```

谁能告诉我有什么问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-26T16:07:00.417

由于您正在编写自定义验证器，因此我立即看到两件事需要更正。

首先，您需要`PassWayValidators();`在 $(document).ready() 之外调用。我不是 100% 确定它是必要的，但我认为这是我能够让自定义验证工作的唯一方法。

```
PassWayValidators();

$(document).ready(function () {
    $('#documents_TravelDocumentDocumentPass_PassDate').datepicker();                     
}); 
```

然后，您需要配置您的下拉菜单，以确保它通过指定某些 html 属性调用您的验证函数。

```
@Html.DropDownListFor(model => 
    documents.TravelDocumentDocumentPass.PassWayId, 
    (IEnumerable<SelectListItem>)ViewBag.DocumentPassTypeList, 
    String.Empty, 
    new { 
        data_val = "true",
        data_val_PassWayValidator = "Please insert valid numbers"
    }) 
```

类似的东西。我不知道 rules("add" { }) 的用途，但我不确定您是否需要。万一我错过了什么，这里是从我的一个应用程序中获取的完整示例。

```
<!-- some form and other html and stuff -->
@Html.TextBox("Amount", null, new 
{ 
    data_val = "true", 
    data_val_required = "This field is required", 
    data_val_number = "The field must be a number",
    data_val_notBeZero = "Value must not be zero"
})

<script type="text/javascript" src="@Url.Content("~/Scripts/jquery.validate.min.js")"></script>
<script type="text/javascript" src="@Url.Content("~/Scripts/jquery.validate.unobtrusive.min.js")"></script>

<script type="text/javascript">
    // validators
    $.validator.addMethod("notBeZero", function (value, element)
    {
        if (Number(Math.abs(value).toFixed(2)) == 0)
        {
            return false;
        }

        return true;

    }, "Value must not be zero");

    $.validator.unobtrusive.adapters.addBool("notBeZero");
</script> 
```

# algorithm - 两个旋转矩形的交点面积

> ID：11670028
> 
> 赞同：24
> 
> 时间：2012-07-26T13:09:33.070
> 
> 标签：algorithm, graphics, geometry, intersection

我有两个 2D 矩形，定义为**原点**（x，y）、**大小**（高度、宽度）和**旋转角度**（0-360°）。我可以保证两个矩形的大小相同。

我需要计算这两个矩形相交的近似面积。 ![矩形交点](../Images/33c28b0df9822d491543c7d7e6d45c07.png)

计算**不需要精确**，尽管可以。我会将结果与其他相交区域进行比较，以确定一组矩形中的*最大相交区域*，因此它只需要相对于同一算法的其他计算是准确的。

我考虑过使用相交区域的边界框区域，但由于所有不同的可能情况，我无法获取相交区域的顶点： ![这么多可能的交叉点形状](../Images/4e018557fdf2cf24c62e15484d8758ee.png)

我正在 Cocoa 框架中用 Objective-C 编写这个程序，为了它的价值，所以如果有人知道任何使用的快捷方式`NSBezierPath`或者你也欢迎提出建议。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-07-26T15:07:19.780

为了补充其他答案，您的问题是*line clipping*的一个实例，这是一个在计算机图形学中深入研究的主题，并且有许多可用的算法。如果您旋转坐标系以使一个矩形具有水平边缘，那么问题正是从那里开始剪线。

您可以从[有关该主题的 Wikipedia 文章](http://en.wikipedia.org/wiki/Line_clipping)开始，然后从那里进行调查。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-07-26T13:14:26.647

一个可以给出近似答案的简单算法是采样。

将您的一个矩形分成小正方形的网格。对于每个交点，检查该点是否在另一个矩形内。位于另一个矩形内的点数将很好地近似于重叠区域的面积。增加点的密度将提高计算的准确性，但会以性能为代价。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-07-26T14:52:01.667

在任何情况下，计算两个*凸*多边形的精确交多边形是一件容易的事，因为任何凸多边形都可以看作是半平面的交集。“连续切割”可以完成这项工作。

选择一个矩形（任意）作为切割矩形。一个接一个地遍历切割矩形的边。通过包含切割矩形当前边的线切割第二个矩形，并丢弃位于“外部”半平面中的所有内容。

一旦你完成了所有切割边的迭代，剩下的就是另一个矩形的结果。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-07-26T13:29:45.880

您实际上可以计算确切的面积。

1.  从两个矩形中制作一个多边形。看到[这个问题](https://stackoverflow.com/q/2667748/912144)（尤其是[这个答案](https://stackoverflow.com/a/2823292/912144)），或者使用[gpc](http://www.cs.man.ac.uk/~toby/alan/software/)库。
2.  求这个多边形的面积。见[这里](http://www.mathopenref.com/coordpolygonarea2.html)。
3.  共享区域是

    ```
    area of rectangle 1 + area of rectangle 2 - area of aggregated polygon 
    ```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-07-26T14:08:04.863

取每个矩形的每个线段，看看它们是否相交。会有几种可能：

1.  如果没有相交 - 共享区域为零 - 除非一个的所有点都在另一个内部。在这种情况下，共享区域是较小的区域。

2.  a 如果一个矩形的两条连续边与另一个矩形的一条边相交，则形成一个三角形。计算它的面积。

    湾。如果边不是连续的，则形成四边形。从四边形的两个对角计算一条线，这会产生两个三角形。计算每个的面积并求和。

3.  如果一个的两条边与另一个的两条边相交，那么你将有一个四边形。计算如 2b。

4.  如果一个的每个边缘与另一个的每个边缘相交，您将有一个八边形。将其分解为三角形（例如，从一个顶点到另一个顶点绘制一条射线以形成 4 个三角形）

@edit：我有一个更通用的解决方案。

检查1中的特殊情况。

然后从任何相交的顶点开始，沿着边缘从那里到任何其他相交点，直到回到第一个相交的顶点。这形成了一个凸多边形。从第一个顶点到每个相对的顶点绘制一条射线（例如跳过左右的顶点。）这会将它分成一堆三角形。计算每个的面积并求和。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-07-26T14:34:18.843

蛮力式的方式：

*   从 [矩形的角] + [边缘的交点] 集合中获取所有点
*   删除不在两个矩形内部或边缘上的点。
*   现在你有路口的角落。请注意，交点是凸的。
*   按集合中任意点、任意其他点和给定点之间的角度对剩余点进行排序。
*   现在您已经按顺序排列了交点。
*   以通常的方式计算面积（通过叉积）

.

# dll - 从 C++ 自定义操作 dll WIX 调用函数时出现问题

> ID：11670031
> 
> 赞同：0
> 
> 时间：2012-07-26T13:09:45.500
> 
> 标签：dll, wix, custom-action

我目前使用 wix 并开发了一个安装程序。此安装程序调用 C++ 自定义操作 DLL。DLL 和安装程序都已成功构建，但是当我去安装它时，安装以“安装程序向导因错误而提前结束”结束 有人知道可能的答案吗？

这是 C++ Dll 函数：

```
extern "C" UINT __stdcall StopOrcService(MSIHANDLE hInstall) 
```

然后我继续使用该函数的代码。然后我使用 def 文件将其导出。

```
<CustomAction Id='StopOrcService' BinaryKey='StopOrcService' DllEntry='StopOrcService' Execute='immediate' Return='check'/>

<InstallExecuteSequence>
  <Custom Action='StopOrcService' After='ProcessComponents' />
</InstallExecuteSequence>

<Binary Id='StopOrcService' SourceFile='SetupDLL.dll' /> 
```

那是我的wix代码。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-26T14:42:16.023

有几十个可能的答案，如果没有看到你的 C++ 和你的 WiX 代码就很难说。

需要考虑的事项：

C++ dll 是否有目的地构建为自定义操作？（它是否导出 Type1 stdcall MsiCustom Action？）该函数的名称是什么？您的 WiX 代码中的函数名称是否正确？您是否在函数中添加了任何日志以查看它是否被执行？

更新：您不应该使用自定义操作来执行安装程序可以本地执行的操作。此外，在创建需要提升和/或更改机器状态的 CA 时，它们应该始终被安排为延迟，而不是立即进行模拟。您需要阅读大量有关安装程序最佳实践的资料，以解决您的战略问题，而不是解决您的战术问题。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-07-27T10:05:11.970

我意识到我忘了添加以下行，这使我的代码完美运行。希望这对其他人有帮助。:)

```
#pragma comment(linker, "/EXPORT:StopOrcService=_StopOrcService@4") 
```

# java - 设置背景色上的 NPE

> ID：11670036
> 
> 赞同：0
> 
> 时间：2012-07-26T13:10:12.430
> 
> 标签：java, android, android-layout, nullpointerexception

我创建了一个线性布局，其中包含四次相同的线性布局，以获得一种列表。但是当我尝试更改其中一个包含的布局的背景颜色时，我得到一个空指针异常。任何人都知道为什么以及如何解决它？

我的课：

```
protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.overview);

        String language =  Locale.getDefault().getISO3Language();
        georgiaI = Typeface.createFromAsset(getAssets(), "georgiai.ttf");  
        arialB = Typeface.createFromAsset(getAssets(), "arialbd.ttf");  

        llPlaces= (LinearLayout)findViewById(R.id.ll_overview_list_places);

        // Places
        llitem1= (LinearLayout)llPlaces.findViewById(R.id.lloverview);
        llitem1.setBackgroundColor(R.color.list_even);
        String item1a;
        String item1b;
        if(language.equals("nld")){
            item1a = "dutchstring";
            item1b = "dutchstring";
        }else{
            item1a = "englishString";
            item1b = "englishString";
        }
        tvitem1a=(TextView)llPlaces.findViewById(R.id.tvoverviewname);
        tvitem1a.setTypeface(arialB);
        tvitem1a.setText(item1a.toUpperCase());
        tvitem1b=(TextView)llPlaces.findViewById(R.id.tvoverviewtext);
        tvitem1b.setTypeface(georgiaI);
        tvitem1b.setText(item1b);
        iv1= (ImageView)llPlaces.findViewById(R.id.ivoverviewimage);
        iv1.setImageResource(R.drawable.categories_places); 
```

NPE 发生的行是：`llitem1.setBackgroundColor(R.color.list_even);` 我想要交替颜色，这就是我没有在 xml 中添加颜色的原因。当然，我可以为不同的颜色制作两个 xml 文件，但这应该可以。

xml文件：

概述.xml

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:orientation="vertical" 
    android:background="@color/orange">

     <include
            android:id="@+id/bt_overview_list_places"
            layout="@layout/single_overview_item" 
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_gravity="center"/>
      <include
            android:id="@+id/bt_overview_list_agenda"
            layout="@layout/single_overview_item" 
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_gravity="center"/>
       <include
            android:id="@+id/bt_overview_list_shopping"
            layout="@layout/single_overview_item" 
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_gravity="center"/>
        <include
            android:id="@+id/bt_overview_list_food"
            layout="@layout/single_overview_item" 
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_gravity="center"/>

</LinearLayout> 
```

单个概览项：

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout
  xmlns:android="http://schemas.android.com/apk/res/android"
  android:id="@+id/lloverview"
  android:layout_width="fill_parent"
  android:layout_height="wrap_content"
  android:orientation="vertical"
  android:background="@color/custom_button_grey"
  >
<LinearLayout
  xmlns:android="http://schemas.android.com/apk/res/android"
  android:layout_width="fill_parent"
  android:layout_height="fill_parent"
  android:orientation="horizontal"
  >
  <ImageView
      android:id="@+id/ivoverviewimage"
      android:layout_width="50dp"
      android:layout_height="50dp" android:src="@drawable/ic_launcher" android:scaleType="centerCrop"
      android:layout_margin="10dp"
      android:layout_weight="1"/>

  <LinearLayout
      android:layout_width="225dp"
      android:layout_height="wrap_content"
      android:orientation="vertical" >

  <TextView
      android:id="@+id/tvoverviewname"
      android:layout_width="225dp"
      android:layout_height="wrap_content"
      android:layout_gravity="left|top"
      android:layout_marginLeft="10dip"
      android:text="naam"
      android:textSize="16dip" 
      android:maxLines="1"
      android:ellipsize="marquee"
      android:textColor="@color/black"/>

 <TextView
     android:id="@+id/tvoverviewtext"
     android:layout_width="225dp"
     android:layout_height="wrap_content"
     android:layout_marginLeft="10dip"
     android:maxLines="3"
     android:text="tip"
     android:textSize="12dip" 
     android:ellipsize="end"
     android:textColor="@color/black"/>

 </LinearLayout>

 <ImageView 
     android:id="@+id/arrow"
      android:layout_width="wrap_content"
      android:layout_height="wrap_content"
      android:layout_weight="1"
      android:src="@drawable/iconarrowsmall"
      android:layout_gravity="center_vertical"
      android:layout_margin="2dip"
     />

</LinearLayout>
<ImageView 
     android:id="@+id/bottom_border"
     android:layout_width="fill_parent"
      android:layout_height="wrap_content"
      android:src="@drawable/custombuttonlist_bottomborder"
     />

</LinearLayout> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-26T13:15:46.177

如果您为包含元素设置不同的 id，那么您的代码应该是这样的（布局中不再有`LinearLayout`带有 id的 a）：`lloverview`

```
llPlaces= (LinearLayout)findViewById(R.id.ll_overview_list_places);
llPlaces.setBackgroundColor(R.color.list_even); 
```

如果你设置一个标签`id`，`include`那么这将是`id`添加布局的根视图。

# zend-framework - Zend Framework 1.11.12，Doctrine 2.2.2 集成：错误 500

> ID：11670037
> 
> 赞同：0
> 
> 时间：2012-07-26T13:10:13.267
> 
> 标签：zend-framework, doctrine-orm

我正在尝试将 Doctrine 2 集成到 Zend Framework 中（我是 ZF 的新手）。我在网上到处找，但找不到我的答案......

我遵循了这个最近的教程：[http](http://hectorpinol.com/zend-framework-1-11-and-doctrine-2-2-x-integration/) ://hectorpinol.com/zend-framework-1-11-and-doctrine-2-2-x-integration/并且我已经设法使用 CLI 生成了一个表。

教程的最后一步是在这个表中添加一个新行，只需使用 Index 控制器。但是我的网站不再工作了（一个残酷的错误 500，没有消息），因为我更改了引导程序。

如果我删除添加到`_initDoctrine()`方法中的最后几行，它会再次起作用（但当然没有 Doctrine）。他们来了：

```
 // set the proxy dir and set some options
    $config->setProxyDir(APPLICATION_PATH . '/models/Proxies');
    $config->setAutoGenerateProxyClasses(true);
    $config->setProxyNamespace('App\Proxies');

    // now create the entity manager and use the connection
    // settings we defined in our application.ini
    $connectionSettings = $this->getOption('doctrine');
    $conn = array(
        'driver'    => $connectionSettings['conn']['driv'],
        'user'      => $connectionSettings['conn']['user'],
        'password'  => $connectionSettings['conn']['pass'],
        'dbname'    => $connectionSettings['conn']['dbname'],
        'host'      => $connectionSettings['conn']['host']
    );
    $entityManager = \Doctrine\ORM\EntityManager::create($conn, $config);

    // push the entity manager into our registry for later use
    $registry = Zend_Registry::getInstance();
    $registry->entitymanager = $entityManager;

    return $entityManager; 
```

你有什么解开局势的想法吗？这很令人沮丧，因为我知道我已经很接近让它工作了......

UPDATE1：我忘了提一下，以防万一：我在 Windows 上使用 WAMP。谢谢

UPDATE2：添加了`create()`函数的参数。

UPDATE3：实际上它可能不是错误 500。Chrome 这么说，但 Firefox 什么也没显示。服务器没有回答。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-27T08:29:43.637

1）把环境改成开发看看报错信息。

2）改用 Bisna 库，将节省大量时间（我认为手动集成 Doctrine 没有意义，仅用于教育目的，但您可能希望将其保存以备后用）。

# php - 一个 SQL 查询中的两个数组

> ID：11670038
> 
> 赞同：0
> 
> 时间：2012-07-26T13:10:13.547
> 
> 标签：php, sql

考虑以下内容：我有几个数组（比如说 2 个），我通过 post 得到，就像这样：

```
$_POST['date-pack'] :
$date_pack array {
[0] ==> "Juillet 2012"
[1] ==> "Avril 2012"
... 
```

有了这个数组，我还有另一个数组，其 id 的顺序与日期相同：

```
$_POST['id_pack'] :
$id_pack array {
[0] ==> "6"
[1] ==> "8"
... 
```

问题是，我想更新一个表，如下所示：

```
"UPDATE my_table 
SET date_service = *the_first_date_in_array*
WHERE id_service = *the first_id_in_array*" 
```

然后对我的数组中的所有元素执行相同的操作（它们将具有相同数量的元素）。

我不知道是否可以对多个数组使用“foreach”并将我的查询放入循环中......？

在此先感谢您的帮助 ！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-26T13:14:37.693

你可以试试这个：

```
<?php

foreach($_POST['date_pack'] as $k => $date) {
ExecuteQuery("UPDATE my_table SET date_service = " . $date . "
          WHERE id_service = ". $_POST['id_pack'][$k]);
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-26T13:15:08.643

为什么不使用类似的东西：

```
if(is_array($_POST['date_pack'])
{
    for($i=0;$i<count($_POST['date_pack'];$i++)
    {
    $sql='
    UPDATE my_table 
    SET date_service = '.$_POST['date_pack'][$i].'
    WHERE 
        id_service = '.$_POST['id_pack'][$i].'
        -- and your other conditions....
    ';
    }
}
else
{
    $sql='
    UPDATE my_table 
    SET date_service = '.$_POST['date_pack'].'
    WHERE 
        id_service = '.$_POST['id_pack'].'
        -- and your other conditions....
    ';
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-26T13:17:09.377

考虑到 $date_pack & $id_pack 是 2 个数组

```
for($i=0;$i<count($date_pack);$i++)
{
  $the_first_date_in_array = $date_pack[$i];
  $the_first_id_in_array = $id_pack[$i];
  $query = mysql_query("UPDATE my_table 
   SET date_service = ".$the_first_date_in_array."
   WHERE id_service = ".$the_first_id_in_array.");
} 
```

# algorithm - 从二维平面中的一组点中找到一对大小点

> ID：11670044
> 
> 赞同：3
> 
> 时间：2012-07-26T13:10:25.303
> 
> 标签：algorithm, time-complexity

以下是我努力解决的一个面试问题。要求的界限是小于`O(n^2)`。这是问题所在：

> 你得到一组点 S = `(x1,y1)....(xn,yn)`。这些点是 XY 平面上的坐标。当且仅当且时，称点 `(xa,ya)`大于点。目标是从集合 S 中找到所有点对 p1 = (xa,ya) 和 p2 = (xb,yb)，使得 p1 > p2。`(xb,yb)``xa > xb``ya > yb`

**例子：**

```
Input S = (1,2),(2,1),(3,4)

Answer: {(3,4),(1,2)} , {(3,4),(2,1)} 
```

我只能想出一个`O(n^2)`解决方案，包括与其他点检查每个点。如果有更好的方法，请帮助我。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-26T14:03:38.140

我不确定你能做到。

**示例案例：**设点为 (1,1), (2,2) ... (n,n)。

有 O(n^2) 个这样的点，输出它们本身需要 O(n^2) 时间。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-26T15:10:24.677

我假设你真的想**计算**这样的对。

`x`按in降序排序`O(n log n)`。现在我们将问题简化为一个维度：对于每个位置`k`，我们需要计算它之前有多少个数字大于 position 处的数字`k`。这相当于计数倒置，这个问题在这个网站上已经回答了很多次，包括我，例如[这里](https://stackoverflow.com/questions/6523712/calculating-the-number-of-inversions-in-a-permutation)。

解决该问题的最简单方法`O(n log n)`是使用合并排序算法，如果您想在单击该链接之前自己考虑一下。其他方法包括使用二叉索引树（fenwick 树）或二叉搜索树。实践中最快的可能是使用二叉索引树，因为它们只涉及按位操作。

如果你想打印这些对，你不能比`O(n^2)`最坏的情况做得更好。不过，我也会对输出敏感`O(num_pairs)`算法感兴趣。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-26T13:20:45.410

为什么不按 X 和 Y 作为二级索引对点列表进行排序？( **O(nlogn)** )

然后你可以只给出一个“惰性”指示器，显示每个点右侧的所有点都比它大。

如果你想全部找到它们，无论如何都需要**O(n^2)**，因为有**O(n^2)**对。

考虑一个排序列表，第一个是最小的，所以有 n-1 个更大的点，第二个有 n-2 个更大的点......加起来大约是 (n^2)/2 == **O(n^ 2)**

# c# - Adobe indesign 从代码合并

> ID：11670052
> 
> 赞同：1
> 
> 时间：2012-07-26T13:10:42.487
> 
> 标签：c#, adobe-indesign

我创建了一个网络表单，用户可以在其中输入一些值。我也有一个 Indesign 模板。

是否可以从代码（C#）进行数据合并？我会像通常使用 CSV 一样创建一个逗号分隔的字符串。然后以某种方式将其发送到模板以获取 PDF 的最终结果。我怎样才能做到这一点？

谢谢

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-08-07T22:35:24.977

您可以在 InDesign 中轻松地对逗号或制表符分隔的文件进行数据合并。

[http://help.adobe.com/en_US/indesign/cs/using/WSa285fff53dea4f8617383751001ea8cb3f-6c3ca.html](http://help.adobe.com/en_US/indesign/cs/using/WSa285fff53dea4f8617383751001ea8cb3f-6c3ca.html)

# php - 逆条件

> ID：11670053
> 
> 赞同：0
> 
> 时间：2012-07-26T13:10:44.147
> 
> 标签：php, conditional

我正在尝试改写 a 条件以删除`{ .. }`语句（以减少代码缩进）。

目前我有：

```
while($something){
  if((strcasecmp($str1, $str2)  === 0)
     || (isset($arr[0]) && strcasecmp($str3, $str4) === 0)){

    // a lot of code here...
    break;
  }
} 
```

使用反转的 IF 条件，它应该如下所示：

```
while($something){
  if((strcasecmp($str1, $str2) !== 0)
     && (empty($arr[0]) && strcasecmp($str3, $str4) !== 0))
       continue;
  // a lot of code here...
  break;
} 
```

但它不起作用。我的代码和 break 语句在不应该执行的时候被执行。

我在这里做错了什么。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-26T13:14:52.227

这应该工作

```
while($something){
  if((strcasecmp($str1, $str2) !== 0)
     && (!isset($arr[0]) || strcasecmp($str3, $str4) !== 0))
       continue;
  // a lot of code here...
  break;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-26T13:15:31.433

这里

```
(empty($arr[0]) && strcasecmp($str3, $str4) !== 0)) 
```

`&&`必须`||`是。

我自己会保留第一个变体，因为它稍微简单一些。

更新：好的，正如我所想的那样，这`break;`让我感到奇怪。你想摆脱一个意图？

```
if ($something 
    && ((strcasecmp($str1, $str2)  === 0) || (isset($arr[0]) && strcasecmp($str3, $str4)) === 0)
){

    // a lot of code here...
} 
```

并且知道一些微优化:)（`!strcasecmp()`意味着它们*是*平等的，除非是这种情况）

```
if ($something && (!strcasecmp($str1, $str2) || (isset($arr[0]) && !strcasecmp($str3, $str4))) {

    // a lot of code here...
} 
```

我希望括号匹配。

# javascript - 本地磁盘上的图像未在 Tomcat 项目配置中加载

> ID：11670057
> 
> 赞同：0
> 
> 时间：2012-07-26T13:10:50.097
> 
> 标签：javascript, html, tomcat, canvas

我正在开发一个使用 HTML5 和 JavaScript 的项目。我正在从 C: 驱动器加载图像，如下所示：

```
window.onload = function() {
    var canvas = document.getElementById("myCanvas");
    var context = canvas.getContext("2d");
    var imageObj = new Image();

    imageObj.onload = function() {
      context.drawImage(imageObj, 69, 50);
    };
    imageObj.src = "file:///C:/Images/Demo.jpg";
  }; 
```

图像在此页面上完美加载。在我的项目中尝试相同的操作时，图像不会加载到画布元素中。我从浏览器收到以下错误：

```
Component returned failure code: 0x80040111 (NS_ERROR_NOT_AVAILABLE)[nsIDOMCanvasRenderingContext2D.drawImage] 
```

如何解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-26T13:20:23.673

在项目上，不建议使用直接路径，您应该根据服务器目录使用相关路径，如 '<%=request.getContextPath()%>'/Remaing_path_from_webContent_folder_of_project

希望它会起作用

# html - 将元素锚定到它的兄弟姐妹

> ID：11670064
> 
> 赞同：0
> 
> 时间：2012-07-26T13:11:12.707
> 
> 标签：html, css, layout

是否有可能仅使用 HTML 和 CSS 实现类似以下的锚定布局？

```
+- #parent ------
| +-# elem1 ---
| | Varibale height (depends on content) - top anchored
| | to #parent (top: 0)
| |
| +------------
| +-# elem2 ---
| | Varibale height (depends on content) - top anchored
| | to #elem1 bottom and bottom #anchored to #elem3 top
| |
| +------------
| +-# elem3 ---
| | Fixed height - top anchored to #elem2 bottom and
| | bottom anchored to #parent bottom (bottom: 0)
| |
| +------------
+---------------- 
```

编辑：#parent 元素高度可能是固定的，我正在寻找类似的东西：

[http://doc.qt.nokia.com/qtquick-components-symbian-1.1/examples-native-scalability-anchors.html](http://doc.qt.nokia.com/qtquick-components-symbian-1.1/examples-native-scalability-anchors.html)

[http://doc.qt.nokia.com/qt-maemo/anchor-layout.html](http://doc.qt.nokia.com/qt-maemo/anchor-layout.html)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-26T13:37:09.137

我是否误解了，或者这是你想要的 - [http://jsfiddle.net/joplomacedo/rkKqy/](http://jsfiddle.net/joplomacedo/rkKqy/) - ？

的HTML

```
<div class="parent">
    <div class="child">varaible height child</div>
    <div class="child">varaible height child</div>
    <div class="child">fixed height child</div>
</div>​ 
```

CSS

```
.parent {
    position: relative;
    padding-bottom: 50px; //equal to last-child's height
}

.child:first-child {
    /*styles for the first-child here*/
}

.child:nth-child(2) {
    /*styles for the second-child here*/
}

.child:last-child {
    position: absolute;
    bottom: 0;
    width: 100%;
    height: 50px; //the fixed height
    /*anymore styles for the last-child here*/
}
​ 
```

# reporting-services - SQL Reporting Services IIf 语句评估导致 #ERROR 的 if 两边

> ID：11670067
> 
> 赞同：4
> 
> 时间：2012-07-26T13:11:21.770
> 
> 标签：reporting-services, ssrs-2008

我目前正在编写一份报告，其中包含从 Web 服务注入的数据。该网络服务向其发送“双重？” 允许空值。在报告中，它显示返回的值，这些值稍后用于对数字进行求和和平均。我的问题在于显示值的表达式（当我进行计算时，我会看到类似的问题，但每次只有一步......）我正在使用 IIf 语句检查值是否为数字，如果如果不显示空字符串，则显示值（将其转换为双精度值）。当它是一个数值时，该值会正确显示，但是当它为空时，我得到的值是#ERROR。似乎 IIf 语句评估了 IIf 语句的两端！！！

无论如何，我已经做了一些研究，似乎人们建议修改发送代码以检查其是否为空并发送 0**但**在我的情况下这不会有帮助（负数也不会，因为它也会发送负数）。这在我的情况下不起作用的原因是我必须使用全 0 但不是空值来计算平均值。例如...

> "100, 0, null" => 这应该是 50 的平均值...如果要转换为 0 的那个 null 将平均为 25...

无论如何继承我的代码...

```
=IIf(IsNumeric(Fields!Ventas.Value), CDbl(Fields!Ventas.Value), "") 
```

我也尝试过使用 switch 语句并得到同样的问题......

```
=Switch(IsNumeric(Fields!Ventas.Value) = False, "", IsNumeric(Fields!Ventas.Value) = True, CDbl(Fields!Ventas.Value)) 
```

我还通过测试测试了 IIf 条件是否正常工作：

```
=IIf(IsNumeric(Fields!Ventas.Value), 1, 0) 
```

这工作正常......无论如何，任何帮助将不胜感激，因为我不知道还能尝试什么......下面是我发现的一些关于我的问题的链接，但他们再次建议发送 0 而不是 null ，这在我的情况下是无用的...并且一个链接建议使用开关，但同样不起作用...

[链接#1](https://stackoverflow.com/questions/835954/sql-2005-reporting-services-if-check-for-null)

[链接#2](http://forums.asp.net/t/1312897.aspx)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-26T15:02:01.547

我刚刚解决了这个问题，这是如何做到的，希望这可以帮助其他人解决同样的问题！！

```
=IIf(IsNumeric(Fields!Ventas.Value), CDbl(IIf(IsNumeric(Fields!Ventas.Value), Fields!Ventas.Value, 0)),  "") 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-10-16T15:11:39.583

使用可能被零除的表达式，您将遇到同样的问题，例如`IIF([B]=0, Nothing, [A]/[B])`

我使用了一个简单的解决方法：`IIF([B]=0, Nothing, [A]/IIF([B]=0, 1, [B]))`

此错误也在[Microsoft Connect](https://connect.microsoft.com/SQLServer/feedback/details/725800/ssrs-iif-function-calculate-both-true-and-false-part-of-the-iif-expresion)上注册，但到目前为止 MS 没有回答。

# iphone - 在“创建事务响应”中出现错误

> ID：11670068
> 
> 赞同：4
> 
> 时间：2012-07-26T13:11:24.157
> 
> 标签：iphone, objective-c, ios, ipad

我正在使用 ios 中的授权 .net

移动设备已获得批准，但我在“createTransaction”中收到以下错误，即使我也没有发送 ant 交易密钥

```
Create Transaction response
2012-07-26 18:23:40.600 Authorized[2095:207] <?xml version="1.0" encoding="utf-8"?><ErrorResponse xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns="AnetApi/xml/v1/schema/AnetApiSchema.xsd"><messages><resultCode>Error</resultCode><message><code>E00003</code><text>The element 'merchantAuthentication' in namespace 'AnetApi/xml/v1/schema/AnetApiSchema.xsd' has incomplete content. List of possible elements expected: 'name, transactionKey, sessionToken, password' in namespace 'AnetApi/xml/v1/schema/AnetApiSchema.xsd'.</text></message></messages></ErrorResponse>
namespace warning : xmlns: URI AnetApi/xml/v1/schema/AnetApiSchema.xsd is not absolute
ttp://www.w3.org/2001/XMLSchema" xmlns="AnetApi/xml/v1/schema/AnetApiSchema.xsd"
                                                                               ^
2012-07-26 18:23:40.601 Authorized[2095:207] Error = (null)
2012-07-26 18:23:40.601 Authorized[2095:207] Message: 
Message.code = E00003
Message.text = The element 'merchantAuthentication' in namespace 'AnetApi/xml/v1/schema/AnetApiSchema.xsd' has incomplete content. List of possible elements expected: 'name, transactionKey, sessionToken, password' in namespace 'AnetApi/xml/v1/schema/AnetApiSchema.xsd'.
Message.description = (null)
2012-07-26 18:23:40.601 Authorized[2095:207] Messages: 
Messages.resultCode = Error
Messages.message = (
    "Message.code = E00003\nMessage.text = The element 'merchantAuthentication' in namespace 'AnetApi/xml/v1/schema/AnetApiSchema.xsd' has incomplete content. List of possible elements expected: 'name, transactionKey, sessionToken, password' in namespace 'AnetApi/xml/v1/schema/AnetApiSchema.xsd'.\nMessage.description = (null)\n"
)
2012-07-26 18:23:40.635 Authorized[2095:207] Messages: 
Messages.resultCode = (null)
Messages.message = (
)
2012-07-26 18:23:40.636 Authorized[2095:207] SplitTenderPayment = SplitTenderPayment.transId = (null)
SplitTenderPayment.responseCode = (null)
SplitTenderPayment.responseToCustomer = (null)
SplitTenderPayment.authCode = (null)
SplitTenderPayment.accountNumber = (null)
SplitTenderPayment.accountType = (null)
SplitTenderPayment.requestedAmount = (null)
SplitTenderPayment.approvedAmount = (null)
SplitTenderPayment.balanceOnCard = (null)
2012-07-26 18:23:40.637 Authorized[2095:207] CreateTransactionResponse: createTransactionResponse.anetAPIResponse = ANetApiResponse.refId = (null)
ANetApiResponse.messages = Messages.resultCode = Error
Messages.message = (
    "Message.code = E00003\nMessage.text = The element 'merchantAuthentication' in namespace 'AnetApi/xml/v1/schema/AnetApiSchema.xsd' has incomplete content. List of possible elements expected: 'name, transactionKey, sessionToken, password' in namespace 'AnetApi/xml/v1/schema/AnetApiSchema.xsd'.\nMessage.description = (null)\n"
) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-06T18:52:37.307

正如 Sandchitsignh 指出的那样，这看起来像是您正在处理一个响应，这不是一个完全有效的 xml 响应。彻底检查响应，确保没有隐藏的、腐败的或未转义的字符偷偷进入。

# ios - 减少启动图像时间 IOS

> ID：11670073
> 
> 赞同：0
> 
> 时间：2012-07-26T13:11:43.350
> 
> 标签：ios, objective-c, cocoa-touch

是否可以减少初始图像的 default.png 图像的标准时间（3 秒）？

我的意图是将其设置为 1.5 秒。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-07-26T13:15:53.547

没有显示启动画面的标准时间 - 一旦您的应用程序完成加载并准备好显示其第一个屏幕，它就会消失。

为了减少时间，您需要优化应用程序的加载时间（例如，将一些繁重的计算/资源加载移动到后台线程，使用延迟加载等）

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-07-26T13:17:31.087

1) 推迟所有处理，直到第一个视图收到 viewDidAppear。

2) 减少链接到的库和框架的数量，因为加载器在启动时需要时间。

3) 观看 WWDC 2012 会议视频。在 Instruments 的一次演讲中深入讨论了这个话题（我在听众中）。如果不出意外，本次会议将向您展示如何准确监控启动期间发生的情况。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-07-26T13:16:02.433

没有“标准时间”。它显示的时间是您`applicationDidFinishLaunching`完成之前的时间。

如果您希望它显示更少，请优化或抵消该方法的一些负载。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-26T14:11:25.867

执行期间显示的启动画面`applicationDidFinishLaunching`。尝试在调用 from 的后台方法中初始化您的应用程序`applicationDidFinishLaunching`，例如：

```
-(BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions {
    [NSTimer scheduledTimerWithTimeInterval:0.1 target:self selector:@selector(initApplication:) userInfo:nil repeats:NO];
    return YES;
}

-(void)initApplication {
    ...
} 
```

但是在应用图形初始化之前，您可能会出现一些黑屏！

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-26T13:33:21.143

只是在这里权衡一下，例如，如果您正在为 UITabBarController 初始化一堆视图控制器，建议将这些视图控制器的任何重初始化推迟到`viewDidLoad:`而不是它们的`init:`方法。这样，在需要视图控制器之前，不会加载任何需要在内存中分配和初始化的内容。

# javascript - 如何创建 iframe 然后使用 jQuery 将 javascript 附加到它？

> ID：11670078
> 
> 赞同：1
> 
> 时间：2012-07-26T13:12:02.260
> 
> 标签：javascript, jquery, iframe

我尝试创建 iframe，然后向其中添加脚本，脚本将运行。创建了 iframe，但在将脚本附加到该 iframe 的过程中总是出错。请帮忙。

```
<div align="center" id="adframe1">
<script type="text/javascript">
var response1 = '<script>var ad_unit="123";</scr'+'ipt><script src="http://abc.com/abc.js"></scr'+'ipt>';
$('<iframe id="adframe1mopub"/>').appendTo('#adframe1');
$('#adframe1mopub').ready(function() {
$('#adframe1mopub').contents().find('body').append(response1);
});
</script>
</div> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-26T13:51:51.837

你可以试试这个脚本：

HTML：

```
​&lt;div id=container-iframe>​&lt;/div>​​​​​​​ 
```

JS：

```
var response1 = '<script>var ad_unit="123";</scr' + 'ipt><script src="http://abc.com/abc.js"></scr' + 'ipt>';

$('<iframe></iframe>', { id: 'adframe1mopub' }).bind('load', function(event) {

    if (!this.contentWindow) {
        return;
    }

    this.contentWindow.document.body.innerHTML += response1;

}).appendTo('#container-iframe'); 
```

但这将是实现这一点的最佳方法：

```
$('<iframe></iframe>', { id: 'myiframe' }).bind('load', function(event) {

    if (!this.contentWindow) {
        return;
    }

    var scripWidthCode = document.createElement('script');
    scripWidthCode.type ='text/javascript';
    scripWidthCode.innerText = 'var ad_unit="123";';

    this.contentWindow.document.getElementsByTagName('head')[0].appendChild(scripWidthCode);

    var scripWidthSrc = document.createElement('script');
    scripWidthSrc.type ='text/javascript';
    scripWidthSrc.src = 'http://abc.com/abc.js';

    this.contentWindow.document.getElementsByTagName('head')[0].appendChild(scripWidthSrc);

}).appendTo('#container-iframe'); 
```

[​测试](http://jsfiddle.net/adescalzo/fwA3u/)

# c# - IGraphBuilder 使用 ColorConverter

> ID：11670085
> 
> 赞同：0
> 
> 时间：2012-07-26T13:12:22.540
> 
> 标签：c#, webcam, directshow, directshow.net

我尝试使用此代码来获取我的摄像头的照片：

```
 IGraphBuilder _graph = null;
            ISampleGrabber _grabber = null;
            IBaseFilter _sourceObject = null;
            IBaseFilter _grabberObject = null;
            IMediaControl _control = null;

            // Create the main graph
            _graph = Activator.CreateInstance(Type.GetTypeFromCLSID(FilterGraph)) as IGraphBuilder;

            // Create the webcam source
            _sourceObject = FilterInfo.CreateFilter(_monikerString);

            // Create the grabber
            _grabber = Activator.CreateInstance(Type.GetTypeFromCLSID(SampleGrabber)) as ISampleGrabber;
            _grabberObject = _grabber as IBaseFilter;

            // Add the source and grabber to the main graph
            _graph.AddFilter(_sourceObject, "source");
            _graph.AddFilter(_grabberObject, "grabber");

            IPin pin = _sourceObject.GetPin(PinDirection.Output, 0);

            IAMStreamConfig streamConfig = pin as IAMStreamConfig;
            int count = 0, size = 0;
            streamConfig.GetNumberOfCapabilities(out count, out size);

            int width = 0, height = 0;
            AMMediaType mediaType = null;
            AMMediaType mediaTypeCandidate = null;
            for(int index = 0; index < count; index++) {
                VideoStreamConfigCaps scc = new VideoStreamConfigCaps();
                int test = streamConfig.GetStreamCaps(index, out mediaTypeCandidate, scc);
                if(mediaTypeCandidate.MajorType == MediaTypes.Video && mediaTypeCandidate.SubType == MediaSubTypes.YUY2) {
                    VideoInfoHeader header = (VideoInfoHeader)Marshal.PtrToStructure(mediaTypeCandidate.FormatPtr, typeof(VideoInfoHeader));

                    if(header.BmiHeader.Width == 1280 && header.BmiHeader.Height == 720) {
                        width = header.BmiHeader.Width;
                        height = header.BmiHeader.Height;
                        if(mediaType != null)
                            mediaType.Dispose();
                        mediaType = mediaTypeCandidate;
                    } else
                        mediaTypeCandidate.Dispose();
                } else
                    mediaTypeCandidate.Dispose();
            }

            streamConfig.SetFormat(mediaType); 
```

它可以工作，但我看不到此代码生成的图像：

```
uint pcount = (uint)(_capGrabber.Width * _capGrabber.Height * PixelFormats.Bgr32.BitsPerPixel / 8);

                    // Create a file mapping
                    _section = CreateFileMapping(new IntPtr(-1), IntPtr.Zero, 0x04, 0, pcount, null);
                    _map = MapViewOfFile(_section, 0xF001F, 0, 0, pcount);

                    // Get the bitmap
                    BitmapSource = Imaging.CreateBitmapSourceFromMemorySection(_section, _capGrabber.Width,
                        _capGrabber.Height, PixelFormats.Bgr32, _capGrabber.Width * PixelFormats.Bgr32.BitsPerPixel / 8, 0) as InteropBitmap;
                    _capGrabber.Map = _map;

                    // Invoke event
                    if (NewBitmapReady != null)
                    {
                        NewBitmapReady(this, null);
                    } 
```

因为 SubMediaTyp 是 YUY2。如何在此代码中添加转换器？我已经阅读了一些关于 ColorConvert 的内容，可以将其添加到 IGraphBuilder 中。这是如何运作的？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-26T18:22:17.957

[除了RGB 的味道，](http://msdn.microsoft.com/en-us/library/system.windows.media.pixelformats.aspx)我不希望`CreateBitmapSourceFromMemorySection`接受其他任何东西。它更不可能接受媒体类型，因此您需要 DirectShow 管道将视频流转换为 RGB，然后再将其导出为托管位图/图像对象。`YUY2`

为此，您通常添加初始化为 24 位 RGB 子类型的 Sample Grabber 过滤器，并让 DirectShow 自动提供必要的转换器。

请在此处查看详细说明和代码片段：[DirectShow：使用 SampleGrabber 抓取框架和...的示例](http://www.codeproject.com/Articles/34663/DirectShow-Examples-for-Using-SampleGrabber-for-Gr)

```
media.majorType    = MediaType.Video;
media.subType    = MediaSubType.RGB24;
media.formatPtr = IntPtr.Zero;
hr = sampGrabber.SetMediaType(media); 
```

# google-analytics - Google Analytics 内容实验不适用于 _setDomainName "none"

> ID：11670092
> 
> 赞同：0
> 
> 时间：2012-07-26T13:12:54.273
> 
> 标签：google-analytics, cross-domain, google-experiments

预先感谢。

我正在实施 GA 内容实验，但有以下问题。

我已经`_gaq.push(['_setDomainName', 'none'])`在我的原始 GA 跟踪代码中定义了，因为我想分别跟踪子域和顶级域。

但是在我设置实验之后，它从来没有得到数字。我在网上进行了研究，发现了这个信息： http: [//support.google.com/analytics/bin/answer.py ?hl=en&answer=2658141](http://support.google.com/analytics/bin/answer.py?hl=en&answer=2658141)

我怀疑我的问题可能是由我的`_gaq.push(['_setDomainName', 'none'])`,

所以我使用了以下代码：

```
<script>
_udn = "none";
</script>
... 
Google Analytics Experiment code here
...

<script type="text/javascript>
var _gaq = _gaq || [];
_gaq.push(['_setAccount', 'UA-xxxxxx-x']);
_gaq.push(['_setDomainName', 'none']);
_gaq.push(['_trackPageview']);
</script> 
```

但是，我仍然没有得到任何实验数据。

我的实施有什么问题吗？`_gaq.push(['_setDomainName', 'none'])`或者如果我在原始 GA 跟踪代码中定义了内容实验，我应该怎么做？

非常感谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-08T04:31:44.890

if your experiment goal is on a different domain/subdomain, you also need to set

```
_gaq.push(['_setAllowLinker', true]); 
```

in your analytics code, and modify all anchors and form actions that send the browser across domains/subdomains so that the analytics script passes the analytics cookie data as a query string.

[https://developers.google.com/analytics/devguides/collection/gajs/gaTrackingSite](https://developers.google.com/analytics/devguides/collection/gajs/gaTrackingSite)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-06T16:20:56.797

我今天早上在搜索与我在 GA 中获得的相同类型的结果时发现了您的问题。这是我发现的...

根据 GA Help，他们希望跟踪代码高于所有其他 GA 片段。看看这里：[https ://support.google.com/analytics/bin/answer.py?hl=en&answer=2364634](https://support.google.com/analytics/bin/answer.py?hl=en&answer=2364634)

如果您仍然遇到问题，也许将您的跟踪代码移到所有其他代码之上（无论如何）。

虽然这可能会对您没有回答我的问题有所帮助，“在运行测试 5 天并且数百名用户看到测试页面后，为什么在 GA 中没有访问或结果？”

于是我不断搜索，发现了这个网站： http: [//online-behavior.com/testing/content-experiments](http://online-behavior.com/testing/content-experiments)

根据第 4 点“测试结果至少在 2 周内不会出现，这是一种鼓励统计显着性的机制。”

啊哈！有我的答案（希望这是真的！）。我期待下周左右，看看谷歌是否会让我进入我的数据。希望所有这些都有帮助。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-05-19T17:04:17.853

实际上，过去我在设置实验代码时遇到了很多问题。不在子域上，而是在常规页面上。对我来说，从来没有如上所述的 2 周延迟（通常我的实验更新 2-3 次/天）。对我来说，这是代码放置的问题，我的 header.php 文件中的一小段附加代码有帮助。但是，您可能会发现此资源很有帮助，它提供了 4 个潜在问题以及可帮助您解决问题的相应修复：[https ://www.atinyrhino.com/google-experiments-in-wordpress-not-working/](https://www.atinyrhino.com/google-experiments-in-wordpress-not-working/)

我希望这有帮助！

# eclipse - 如何将eclipse java项目转换为groovy项目？

> ID：11670093
> 
> 赞同：0
> 
> 时间：2012-07-26T13:13:02.143
> 
> 标签：eclipse, groovy

我已经从 svn 签出了十到十二个本地 Java 项目。最终，我正在考虑将所有代码转换为 groovy。我首先只专注于这两个步骤：

1）将java项目转换为Groovy项目

2）将所有项目中的10,000个奇数文件的扩展名全部更改为.groovy。

所以我想知道eclipse是否可以为我提供这两个步骤的帮助（通过UI），而我不必更改所有.classpath条目或.project条目。

PS：我已经安装了 groovy 插件

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-27T00:35:18.050

java项目也是Maven项目吗？这会造成更多的混乱，但是是可行的。您应该可以从编辑 .classpath 开始

```
<?xml version="1.0" encoding="UTF-8"?>
<classpath>
    <classpathentry kind="src" path="test"/>
    <classpathentry kind="src" path="src"/>
    <classpathentry kind="src" path="resources"/>
    <classpathentry kind="con" path="org.eclipse.m2e.MAVEN2_CLASSPATH_CONTAINER"/>
    <classpathentry exported="true" kind="con" path="GROOVY_SUPPORT"/>
    <classpathentry exported="true" kind="con" path="GROOVY_DSL_SUPPORT"/>
    <classpathentry kind="con" path="org.eclipse.jdt.launching.JRE_CONTAINER"/>
    <classpathentry combineaccessrules="false" kind="src" path="/someDirectory"/>
    <classpathentry kind="output" path="target/classes"/>
</classpath> 
```

这是针对 Maven 和 Groovy 项目的。如果不需要，您可以省略 Maven 行。Eclipse 似乎不喜欢 Maven+Groovy 项目，因此您必须在导入后再次修复 .classpath，但之后不会再更改它。

我建议使用批处理文件进行重命名（或 C# 程序，如果您也安装了 VS）。

我找到了这个例子： [https ://superuser.com/questions/205083/which-command-can-i-use-to-recursively-rename-or-move-a-file-in-windows](https://superuser.com/questions/205083/which-command-can-i-use-to-recursively-rename-or-move-a-file-in-windows)

For 循环在批处理文件中有点奇怪，但它们工作得很好。

我认为那会让你继续前进。当然，从最小的项目开始！

# java - 为什么我不能从我的 servlet 发送电子邮件？

> ID：11670104
> 
> 赞同：-1
> 
> 时间：2012-07-26T13:13:34.010
> 
> 标签：java, google-app-engine, jakarta-mail

我正在尝试从我的 servlet 发送电子邮件。也不例外，但我的帐户中没有收到电子邮件。我正在使用以下代码：

```
 public class SendEmailServlet extends HttpServlet {
@SuppressWarnings({ "unchecked" })
public void doPost(HttpServletRequest req, HttpServletResponse resp)
        throws IOException {
    resp.setContentType("text/plain");
    PrintWriter out = resp.getWriter();
    PersistenceManager pm = PMF.get().getPersistenceManager();
    try
    {
         String to[] = {"mygmail@gmail.com"};
            String host = "smtp.gmail.com";
            String username = "mygmail@gmail.com";
            String password = "password";
            Properties props = new Properties();
            props.put("mail.smtps.auth", "true");
            // ...
            Session session = Session.getInstance(props);
            MimeMessage msg = new MimeMessage(session);
            // set the message content here
            msg.setFrom(new InternetAddress(username,"Me"));
            msg.setSubject("Testing");
            msg.setText("Testing...");
            Address[] addresses = new Address[to.length];
            for (int i = 0; i < to.length; i++) {
                Address address = new InternetAddress(to[i]);               
                addresses[i] = address;
                // Add the given addresses to the specified recipient type.
                msg.addRecipient(Message.RecipientType.TO, new InternetAddress(to[i]));
            } 

            Transport t = session.getTransport("smtps");

            t.connect(host, username, password);
            t.sendMessage(msg, msg.getAllRecipients());
            t.close();

            out.println(0);
        }
    }
    catch (Exception e)
    {
       System.out.println("Exception error: " + e);
       out.println(e);
    }
    finally
    {
        pm.close();
    }
} 
```

}

我现在收到以下异常：

```
 Exception error: java.security.AccessControlException: access denied (java.net.SocketPermission smtp.gmail.com resolve) 
```

谁能告诉我为什么我没有收到电子邮件以及这段代码有什么问题。提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-26T13:20:57.443

似乎错误是：

```
props.put("mail.smtp.host","localhost"); 
```

在您在系统上运行邮件服务器之前，它不应该是**localhost 。**

看这个问题： [Using Javamail to connect to Gmail smtp server ignores specified port and try to use 25](https://stackoverflow.com/questions/1990454/using-javamail-to-connect-to-gmail-smtp-server-ignores-specified-port-and-tries)

是的，正如 Axel 评论的那样，首先尝试使用命令行

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-26T13:23:22.583

您是否在本地主机上运行电子邮件服务器？如果是这样，它是否禁用了身份验证？

也许您可以在其日志中看到错误消息。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-26T13:27:59.360

原因是，您使用 localhost 作为 smtp 主机，在使用 localhost 作为发件人之前，您应该在您的计算机上使用部署邮件服务器。即使在那之后，您也可能需要注册您的服务器。

你也可以使用 gmail 或 yahoo 邮件来做到这一点。使用谷歌邮件的 smtp 主机。使用您的信用进行身份验证，然后继续。

试试这个链接：

[http://www.mkyong.com/java/javamail-api-sending-email-via-gmail-smtp-example/](http://www.mkyong.com/java/javamail-api-sending-email-via-gmail-smtp-example/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-26T17:13:40.950

通常，您可以使用 JavaMail 使用 servlet 发送邮件。您说您正在使用 AppEngine（[为什么我不能从我的 servlet 发送电子邮件并获得 java.security.AccessControlException？](https://stackoverflow.com/questions/11672491/why-cant-i-send-email-from-my-servlet-and-getting-java-security-accesscontrolex)）。Google App Engine 允许您使用 JavaMail 发送电子邮件，但您不能使用 appengine 提供的 JavaMail 连接到任何邮件服务器。添加到 Transport 或 Session 的 SMTP 配置将被忽略。 [https://developers.google.com/appengine/docs/java/mail/usingjavamail#JavaMail_Features_Not_Supported](https://developers.google.com/appengine/docs/java/mail/usingjavamail#JavaMail_Features_Not_Supported)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-27T02:30:01.963

阅读[https://developers.google.com/appengine/docs/java/mail/overview](https://developers.google.com/appengine/docs/java/mail/overview) 基本上停止在您的应用程序中包含任何 JavaMail 库，并且不要尝试连接到主机。构建消息并直接跳转到 Transport.send(msg);

# c# - 试图将字符串的第一个符号转换为 int，得到奇怪的值

> ID：11670105
> 
> 赞同：2
> 
> 时间：2012-07-26T13:13:33.747
> 
> 标签：c#, string, integer

```
static void Main(string[] args)
{
    string str_val = "8584348,894";
    //int prefix = Convert.ToInt32(str_val[0]); //prefix = 56 O_o
    //int prefix = (int)str_val[0]; //what, again 56? i need 8!
    int prefix = Convert.ToInt32("8"); //at least this works -_-
} 
```

知道如何将第一个符号转换为正确的数值吗？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-07-26T13:17:32.400

如果您使用：

```
Convert.ToInt32(str_val[0]); 
```

那么你实际上是在调用重载：

```
Convert.ToInt32(char val); 
```

它给出了作为参数传递的 Unicode/Ascii 字符数。

如果要转换第一个字符，则需要将其强制为字符串类型：

```
Convert.ToInt32(str_val.Substring(0, 1)); 
```

这样你就调用了重载：

```
Convert.ToInt32(string val); 
```

它实际上做了你想要的（将字符串值转换为这个字符串表示的 int 值）。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-26T13:17:10.697

您试图解析一个字符串但传入一个字符。首先将字符转换为字符串。

```
int prefix = Convert.ToInt32(str_val[0].ToString()); 
```

所以字符值 8 是 ASCII 值 56，你要做的是将值解释为字符串而不是 ASCII 值。通过使用 .ToString() 方法，您可以将字符转换为以空字符结尾的字符串，该字符串可由 ToInt32 方法读取。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-26T13:16:46.983

通过这种方式`Convert.ToInt32(str_val[0])`，您正在读取将 char 转换为 int 的字符串索引处的字符。int 是它的 ascii

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-26T13:20:45.593

就像 Bridge 提到的那样，它正在获取 ASCII 值。当您在字符串类上使用索引器仅获取一个字符时，它会将其作为字符返回。如果您阅读[char 文档](http://msdn.microsoft.com/en-us/library/system.char%28v=VS.90%29.aspx)，您会看到它在内部存储为数字 UTF-16 值。它还具有与大多数数字类型之间的隐式转换，可提取 UTF-16 值，或将数字形式转换为字符形式。这就是你正在做的事情。

您的意思是将其解析为 int，而不是获取 UTF-16 值的数字表示。这就是转换答案的全部来源。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-07-26T13:48:39.760

```
Int32.Parse(str_val[0]) 
```

会给你字符串中的数字。

# android - 在Android中选择后更改菜单项

> ID：11670107
> 
> 赞同：1
> 
> 时间：2012-07-26T13:13:40.457
> 
> 标签：android

我试图在选择后将菜单项替换为另一个菜单项。我尝试了以下方法，但没有按预期工作。对此的任何解决方案。谢谢。

menu.xml 文件是：

```
<?xml version="1.0" encoding="utf-8"?>
<menu xmlns:android="http://schemas.android.com/apk/res/android" >
    <item android:id="@+id/add" android:visible="true" android:enabled="true" android:title="Add"></item>
    <item android:id="@+id/delete" android:visible="false" android:enabled="true" android:title="Delete"></item>
</menu> 
```

MyActivity.java 里面的代码是：

```
@Override
    public boolean onCreateOptionsMenu(Menu menu) {
        MenuInflater inflater = getMenuInflater();
        inflater.inflate(R.menu.defaultmenu, menu);
        return true;
    }

    @Override
    public boolean onPrepareOptionsMenu(Menu menu) {

        if(isAdded) {
            menu.removeItem(R.id.add);
            menu.add(0, R.id.delete, 0, "Delete");
        } else {
            menu.removeItem(R.id.delete);
            menu.add(0, R.id.add, 0, "Add");
        }

        return super.onPrepareOptionsMenu(menu);
    }

    @Override
    public boolean onOptionsItemSelected(MenuItem item) {
        // Handle item selection
        switch (item.getItemId()) {
            case R.id.add:
                isLogin = true;
                return true;
            case R.id.delete:
                isLogin = false;
                return true;
            default:
                return super.onOptionsItemSelected(item);
        }
    } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-26T13:18:36.363

刷新你的菜单调用`invalidateOptionsMenu();`
我猜`onPrepareOptionsMenu`你可以做..

```
if(isAdded) {
        menu.findItem(R.id.add).setVisible(false);
        menu.findItem(R.id.delete).setVisible(true);
        return true;
    } else {
        menu.findItem(R.id.add).setVisible(true);
        menu.findItem(R.id.delete).setVisible(false);
        return true;
    }

    return super.onPrepareOptionsMenu(menu); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-27T05:26:01.540

我改变了`onPrepareOptionsMenu`，现在它工作正常。

```
@Override
    public boolean onPrepareOptionsMenu(Menu menu) {
        //menu.clear();
        if(isadded) {
            menu.removeItem(R.id.add);
            menu.removeItem(R.id.delete);
            menu.add(0, R.id.delete, 0, "Delete");
        } else {
            menu.removeItem(R.id.add);
            menu.removeItem(R.id.delete);
            menu.add(0, R.id.add, 0, "Add");
        }

        return super.onPrepareOptionsMenu(menu);
    } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-26T13:23:16.170

像这样试试

```
public static final int ADD_CATEGORY_INDEX = Menu.FIRST;
public static final int DELETE_CATEGORY_INDEX= Menu.FIRST+1;

@Override
public boolean onCreateOptionsMenu(Menu menu) {
    super.onCreateOptionsMenu(menu);

    menu.add(0, ADD_CATEGORY_INDEX, 0, "Add");
          menu.add(0, DELETE_CATEGORY_INDEX, 0, "delete");

    return true;
}

public boolean onOptionsItemSelected(MenuItem item) {
    switch (item.getItemId()) {
    case ADD_CATEGORY_INDEX:             
        break;
    }
            case DELETE_CATEGORY_INDEX:          
        break;
    }
    return true;
} 
```

# php - 正则表达式引擎如何解析带有递归子模式的正则表达式？

> ID：11670111
> 
> 赞同：5
> 
> 时间：2012-07-26T13:14:06.207
> 
> 标签：php, regex, recursion, pcre, palindrome

这个正则表达式匹配回文： `^((.)(?1)\2|.?)$`

无法理解它是如何工作的。递归什么时候结束，什么时候正则表达式从递归子模式中中断并进入`"|.?"`部分？

谢谢。

编辑：对不起，我没有解释`\2`和`(?1)`

`(?1)`- 指第一个子模式（对自身）

`\2`- 反向引用第二个子模式的匹配，即`(.)`

上面的例子是用 PHP 编写的。匹配“abba”（没有中间回文字符）和“abcba” - 有一个中间的非反射字符

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-26T15:27:29.843

`^((.)(?1)\2|.?)$`

`^`和分别断言字符串的`$`开头和结尾。让我们看一下中间的内容，比较有趣：

```
((.)(?1)\2|.?)
1------------1 // Capturing group 1
 2-2           // Capturing group 2 
```

看第一部分`(.)(?1)\2`，我们可以看到它会尝试匹配任何字符，并且最后是相同的字符（反向引用`\2`，它指的是匹配的字符`(.)`）。中间，它会递归匹配整个捕获组 1。请注意，有一个隐式断言（由`(.)`开头`\2`匹配一个字符并在结尾匹配相同字符引起）要求字符串至少为 2 个字符. 第一部分的目的是递归地切断字符串的相同末端。

查看第二部分`.?`，我们可以看到它将匹配一个或 0 个字符。仅当字符串最初的长度为 0 或 1，或者在递归匹配的剩余部分为 0 或 1 个字符之后，才会匹配。第二部分的目的是匹配空字符串或字符串从两端截断后的单个孤独字符。

递归匹配的工作原理：

*   整个字符串必须是回文才能通过，由`^`and断言`$`。我们不能从任何随机位置开始匹配。
*   如果字符串 <= 1 个字符，则通过。
*   如果字符串大于 2 个字符，是否接受仅由第一部分决定。如果匹配，它将被 2 端切断。
*   剩余的如果匹配，只能被 2 端切断，或者如果其长度 <= 1 则通过。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-26T16:25:55.190

正则表达式本质上等同于以下伪代码：

```
palin(str) {
    if (length(str) >= 2) {
      first = str[0];
      last = str[length(str)-1];
      return first == last && palin(substr(str, 1, length(str)-2));
    } else
      // empty and single-char trivially palindromes
      return true;
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-26T23:32:19.877

我还没有为 PCRE 正则表达式找到任何好的调试工具。我能找到的更多是如何转储字节码：

```
$ pcretest -b
PCRE version 7.6 2008-01-28

  re> /^((.)(?1)\2|.?)$/x
------------------------------------------------------------------
  0  39 Bra
  3     ^
  4  26 CBra 1
  9   6 CBra 2
 14     Any
 15   6 Ket
 18   6 Once
 21   4 Recurse
 24   6 Ket
 27     \2
 30   5 Alt
 33     Any?
 35  31 Ket
 38     $
 39  39 Ket
 42     End
------------------------------------------------------------------ 
```

Perl 有比 PCRE 更好的调试工具，试试`echo 123454321 | perl -Mre=debug -ne '/^((.)(?1)\2|.?)$/x'`. 这不仅给出了一些类似于 PCRE 的字节码，而且还显示了每一步，以及每一步输入的消耗和剩余部分：

```
Compiling REx "^((.)(?1)\2|.?)$"
Final program:
   1: BOL (2)
   2: OPEN1 (4)
   4:   BRANCH (15)
   5:     OPEN2 (7)
   7:       REG_ANY (8)
   8:     CLOSE2 (10)
  10:     GOSUB1[-8] (13)
  13:     REF2 (19)
  15:   BRANCH (FAIL)
  16:     CURLY {0,1} (19)
  18:       REG_ANY (0)
  19: CLOSE1 (21)
  21: EOL (22)
  22: END (0)
floating ""$ at 0..2147483647 (checking floating) anchored(BOL) minlen 0 
Guessing start of match in sv for REx "^((.)(?1)\2|.?)$" against "12321"
Found floating substr ""$ at offset 5...
Guessed: match at offset 0
Matching REx "^((.)(?1)\2|.?)$" against "12321"
   0 <> <12321>              |  1:BOL(2)
   0 <> <12321>              |  2:OPEN1(4)
   0 <> <12321>              |  4:BRANCH(15)
   0 <> <12321>              |  5:  OPEN2(7)
   0 <> <12321>              |  7:  REG_ANY(8)
   1 <1> <2321>              |  8:  CLOSE2(10)
   1 <1> <2321>              | 10:  GOSUB1[-8](13)
   1 <1> <2321>              |  2:    OPEN1(4)
   1 <1> <2321>              |  4:    BRANCH(15)
   1 <1> <2321>              |  5:      OPEN2(7)
   1 <1> <2321>              |  7:      REG_ANY(8)
   2 <12> <321>              |  8:      CLOSE2(10)
   2 <12> <321>              | 10:      GOSUB1[-8](13)
   2 <12> <321>              |  2:        OPEN1(4)
   2 <12> <321>              |  4:        BRANCH(15)
   2 <12> <321>              |  5:          OPEN2(7)
   2 <12> <321>              |  7:          REG_ANY(8)
   3 <123> <21>              |  8:          CLOSE2(10)
   3 <123> <21>              | 10:          GOSUB1[-8](13)
   3 <123> <21>              |  2:            OPEN1(4)
   3 <123> <21>              |  4:            BRANCH(15)
   3 <123> <21>              |  5:              OPEN2(7)
   3 <123> <21>              |  7:              REG_ANY(8)
   4 <1232> <1>              |  8:              CLOSE2(10)
   4 <1232> <1>              | 10:              GOSUB1[-8](13)
   4 <1232> <1>              |  2:                OPEN1(4)
   4 <1232> <1>              |  4:                BRANCH(15)
   4 <1232> <1>              |  5:                  OPEN2(7)
   4 <1232> <1>              |  7:                  REG_ANY(8)
   5 <12321> <>              |  8:                  CLOSE2(10)
   5 <12321> <>              | 10:                  GOSUB1[-8](13)
   5 <12321> <>              |  2:                    OPEN1(4)
   5 <12321> <>              |  4:                    BRANCH(15)
   5 <12321> <>              |  5:                      OPEN2(7)
   5 <12321> <>              |  7:                      REG_ANY(8)
                                                        failed...
   5 <12321> <>              | 15:                    BRANCH(19)
   5 <12321> <>              | 16:                      CURLY {0,1}(19)
                                                        REG_ANY can match 0 times out of 1...
   5 <12321> <>              | 19:                        CLOSE1(21)
                                                          EVAL trying tail ... 9d86dd8
   5 <12321> <>              | 13:                          REF2(19)
                                                            failed...
                                                        failed...
                                                      BRANCH failed...
   4 <1232> <1>              | 15:                BRANCH(19)
   4 <1232> <1>              | 16:                  CURLY {0,1}(19)
                                                    REG_ANY can match 1 times out of 1...
   5 <12321> <>              | 19:                    CLOSE1(21)
                                                      EVAL trying tail ... 9d86d70
   5 <12321> <>              | 13:                      REF2(19)
                                                        failed...
   4 <1232> <1>              | 19:                    CLOSE1(21)
                                                      EVAL trying tail ... 9d86d70
   4 <1232> <1>              | 13:                      REF2(19)
                                                        failed...
                                                    failed...
                                                  BRANCH failed...
   3 <123> <21>              | 15:            BRANCH(19)
   3 <123> <21>              | 16:              CURLY {0,1}(19)
                                                REG_ANY can match 1 times out of 1...
   4 <1232> <1>              | 19:                CLOSE1(21)
                                                  EVAL trying tail ... 9d86d08
   4 <1232> <1>              | 13:                  REF2(19)
                                                    failed...
   3 <123> <21>              | 19:                CLOSE1(21)
                                                  EVAL trying tail ... 9d86d08
   3 <123> <21>              | 13:                  REF2(19)
                                                    failed...
                                                failed...
                                              BRANCH failed...
   2 <12> <321>              | 15:        BRANCH(19)
   2 <12> <321>              | 16:          CURLY {0,1}(19)
                                            REG_ANY can match 1 times out of 1...
   3 <123> <21>              | 19:            CLOSE1(21)
                                              EVAL trying tail ... 9d86ca0
   3 <123> <21>              | 13:              REF2(19)
   4 <1232> <1>              | 19:              CLOSE1(21)
                                                EVAL trying tail ... 0
   4 <1232> <1>              | 13:                REF2(19)
   5 <12321> <>              | 19:                CLOSE1(21)
   5 <12321> <>              | 21:                EOL(22)
   5 <12321> <>              | 22:                END(0)
Match successful!
Freeing REx: "^((.)(?1)\2|.?)$" 
```

正如你所看到的，Perl 首先消耗所有输入递归直到`(.)`失败，然后开始回溯并尝试从交替的第二个分支`.?`和第一部分的其余部分`\2`，当失败时它回溯，直到它最终成功。

# ruby-on-rails - Ruby Mechanize.get(url) 的两种不同语法 - 有什么好处？

> ID：11670112
> 
> 赞同：3
> 
> 时间：2012-07-26T13:14:08.997
> 
> 标签：ruby-on-rails, ruby, mechanize

这些语法有什么区别？第一个比第二个有什么好处吗？

```
agent = Mechanize.new

# first
agent.get(url) do |page|
work
end

#second
page = agent.get(url) 
```

我应该在何时以及为什么使用哪一个？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-26T13:18:39.110

这是一个偏好问题，选择任何你觉得更好用和阅读的风格。第一个的优点是您不必进行任何分配，但这并不重要（除非您的代码在视图中，您应该避免分配 - 但这是另一个主题）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-26T21:50:21.733

调用 get 方法的两种方式最终会做同样的事情。你可以用任何你喜欢的方式使用它。它允许您传递块的第一种方式可能有助于编写更简洁和/或可读的代码。由您来选择适合您需要的。举个例子；

```
agent = Mechanize.new

agent.get(url) do |page|
   item = page.forms.first do |form|
     form.fieldname = "foo"
   end.submit
   # do something with item
end 
```

读起来比

```
page = agent.get(url)
form = page.forms.first
form.fieldname = "foo"
item = agent.submit(form).body
#do something with item 
```

进行机械化初始化时也适用相同的情况。我更喜欢

```
@agent = Mechanize.new { |agent|
  agent.user_agent_alias = 'Mac Safari'
  agent.follow_meta_refresh = true
  agent.redirect_ok = true
} 
```

到

```
@agent = Mechanize.new
@agent.user_agent_alias = 'Mac Safari'
@agent.follow_meta_refresh = true
@agent.redirect_ok = true 
```

}

# clone - 如何一一处理响应消息？

> ID：11670114
> 
> 赞同：0
> 
> 时间：2012-07-26T13:14:12.873
> 
> 标签：clone, response, wso2

我需要向多个不同的地址发送请求。有些成功，有些可能返回错误，我需要为此响应写入日志。我想我需要一一处理响应消息。如何在外部执行此操作。我的服务配置是：

```
<proxy xmlns="http://ws.apache.org/ns/synapse" name="CloneTest" transports="https,http" statistics="disable" trace="disable" startOnLoad="true">
   <target>
      <inSequence>
         <clone id="12345">
            <target>
               <endpoint>
                  <address uri="address1" format="pox" />
               </endpoint>
            </target>
            <target>
               <endpoint>
                  <address uri="address2" format="pox" />
               </endpoint>
            </target>
            <target>
               <endpoint>
                  <address uri="address3" format="pox" />
               </endpoint>
            </target>
         </clone>
      </inSequence>
      <outSequence>
         <log level="full" />
         <send />
      </outSequence>
   </target>
</proxy> 
```

此致。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-29T18:49:26.993

你可以试试下面的方法。首先在 ESB 中创建三个端点，即“ep1”、“ep2”和“ep3”，对应于您要将克隆请求发送到的三个目的地。然后在您的代理服务配置中引用这些端点，如下所示。

```
<proxy xmlns="http://ws.apache.org/ns/synapse" name="CloneTest" transports="https,http" statistics="disable" trace="disable" startOnLoad="true">
   <target>
      <inSequence>
         <clone id="12345">
            <target endpoint="ep1">
            <target endpoint="ep2">
            <target endpoint="ep3">
         </clone>
      </inSequence>
      <outSequence>
         <log level="full" />
         <send />
      </outSequence>
   </target>
</proxy> 
```

# c# - 获取 XElement 的名称

> ID：11670115
> 
> 赞同：2
> 
> 时间：2012-07-26T13:14:17.690
> 
> 标签：c#, xml, windows-phone-7, xelement

我正在为 windows phone 的应用程序解析 xml。我的 XML 看起来像这样：

```
<?xml version="1.0" encoding="utf-8" ?>
<people>
    <person name="Kurt Cobain">
      <overall>

      </overall>
      <childhood>

      </childhood>
      <youth>

      </youth>

     <picture1>

      </picture1>
    </person>

</people> 
```

我应该得到人物节点元素的名称（整体、童年、青年等），因为对于每个人物节点，它们都会有所不同。到目前为止，这是我的代码，但查询结果为空：

```
XDocument loadedXml = XDocument.Load("people.xml");

                    var data = from query in loadedXml.Descendants("person")
                               where ((query.Attribute("name").Value as string).Equals("Kurt Cobain"))
                               select query.Elements();

                     string test = "";
                     foreach (var item in data)
                     {

                             test + = (item as XElement).Name.LocalName;

                     }
                     MessageBox.Show(test); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-26T13:22:09.953

```
var data = from item in loadedXml.Descendants("person")
                   where ((item.Attribute("name").Value as string).Equals("Kurt Cobain"))
                   select item;

string test = "";
foreach (var item in data)
   test += item.Attribute("name").Value; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-26T13:22:39.517

`.Elements()`从您的 linq 中删除。

```
var data = from query in loadedXml.Descendants("person") 
           where ((query.Attribute("name").Value as string).Equals("Kurt Cobain")) 
           select query; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-26T14:04:33.197

我看到您尝试在代码的一部分中使用 XElement，其他建议应该有效，但您也可以执行以下操作：

```
 XElement loadedXml = XElement.Load("people.xml");

  string test = "";

  foreach (var item in loadedXml.XPathSelectElements("person[@name='Kurt Cobain']"))
  {
  test += item.Attribute("name").Value;
  } 
```

或者你可以这样做（但是它很难阅读）。

```
 XElement loadedXml = XElement.Load("people.xml");

 string test = loadedXml.XPathSelectElements("person[@name='Kurt Cobain']").Aggregate("", (current, item) => current + item.Attribute("name").Value); 
```

# php - php tidy 奇怪的行为

> ID：11670116
> 
> 赞同：4
> 
> 时间：2012-07-26T13:14:20.287
> 
> 标签：php, html, tidy, htmltidy

我正在使用 php 的 tidy 库来“清理和修复”来自用户输入的一些 html。

一切正常，但我遇到了一个问题，我无法弄清楚它的原因是什么。我的代码是这样的：

```
$tidy = new tidy();

    $tidy_options = array(
        'hide-comments' => true,'tidy-mark' => false, 'indent' => false,
        'new-blocklevel-tags' => 'article,footer,header,hgroup,output,progress,section,video',
        'new-inline-tags' => 'audio,details,time,ruby,rt,rp',
        'drop-empty-paras' => false, 
        'doctype' => '<!DOCTYPE HTML>',
        'sort-attributes' => 'none', 'vertical-space' => false,
        'output-xhtml' => true,'wrap' => 180,
        'wrap-attributes' => false,
        'break-before-br' => false,
        'show-body-only' => true
        );
$data = $tidy->repairString($data, $tidy_options, 'UTF8');
echo $data; 
```

这适用于所有类型的输入，除非我尝试使用 html 嵌入 swf 文件。
所以，我试试这个代码：

```
<object data="http://the_swf_file_url" type="application/x-shockwave-flash" width="853" height="520"> 
    <param name="movie" value="http://the_swf_file_url"> 
</object> 
```

但是 repairString 将其全部删除，并返回一个空字符串。
**最奇怪的是： -**
**如果**我在上面输入了一些文本，那么输入就像`Hello world<object...>...</object>`然后它工作正常。
**- 或者，如果**我指定`'show-body-only' => false`它也可以正常工作！

任何线索为什么会这样？提前致谢。

编辑：尝试了 pankar 的建议，将保留实体设置为 true，但没有运气......

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-02T10:54:35.963

问题是您正在尝试处理 HTML**片段**。

**执行此操作时，将推断**文档的其余部分。如果您将配置保留为默认值，并输出一个仅包含一段文本的整洁文档，您将看到您没有提供的、和`DOCTYPE`标签`html`。它推断这些标签必须存在。`head``body`

这里的问题是[关于对象的 HTML 规范](http://www.w3.org/TR/html4/struct/objects.html#h-13.3)指出：

> OBJECT 元素也可能出现在 HEAD 元素的内容中。

当你的片段的位置被推断出来时，它会把它放在它*可能*发生的第一位。这意味着 tidy 会将其放在`head`标签中。

影响您的输出的原因`show-body-only`是因为您的片段没有被放置在`body`.

* * *

**但是**，当您添加一些文本时，它会强制您的代码段进入`body`标签。这是因为标签中**不允许使用**原始文本。`head`因此，您的片段的逻辑推断位置位于`body`.

在我看来，您可用的最佳选择是将所有代码片段注入“模板”文档，然后再将它们解析出来。您可以使用[`DOMDocument`](http://php.net/DOMDocument).

第二种解决方案是注入一个标记值，之后您可以在仅显示主体时再次删除该值。

IE

```
____MY_MAGIC_TOKEN____
<object ...></object> 
```

然后你可以在之后再次将其剥离。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-26T13:28:38.523

~~尝试将[配置](http://tidy.sourceforge.net/docs/quickref.html)选项指定`preserve-entities`为`true`（默认为`false`）。~~

**编辑**

秒（更彻底）的想法。这是预期的行为。通过设置`show-body-only`您`true`告诉输出已处理文档`tidy`的正文部分。`xhtml`

此设置实际上会忽略`<head>`文档中的所有内容。`<object>`组件是`<head>`. 您可以通过简单地指定来验证这一点

`$data = "<title>My Site</title>"`.

输出再次为空白。

您尝试将前缀文本添加到`<object>`标记中只是简单地欺骗了整洁，因为它认为必须将这些数据作为页面正文的一部分进行处理，然后才能显示出来。

希望这次能有更多帮助。

# javascript - 如何在 HTM 文件中创建与可折叠面板扩展器等效的东西？

> ID：11670117
> 
> 赞同：0
> 
> 时间：2012-07-26T13:14:21.977
> 
> 标签：javascript, asp.net, client-side, collapsiblepanelextender

我创建了一个带有工作可折叠面板的 asp.net 文件。我假设如果我获取客户端的源并将其复制到 HTM 文件中，它仍然可以工作 - 但事实并非如此。

我所做的是“查看源代码”并将其全部复制到空白 HTM 文件中。除了可折叠面板外，一切都在工作。

为什么？我可以修复它吗？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-26T15:41:03.430

## 这就是为什么

我将尝试简短地解释，但必须使用假设。ASP.NET 是一个在运行时编译的 Web 应用程序框架，这意味着您的页面从对象和控件转换为 html、css 和 javascript；Javascript (ScriptResource.axd) 已加密，您无法访问 htm 页面中的脚本。[关于 ScriptResource.axd 的好链接](http://www.hanselman.com/blog/ASPNETAjaxScriptCombiningAndMovingScriptResourceaxdsToStaticScripts.aspx)

## 如何解决？

**好消息是肯定的！**假设您使用的是 AJAXToolKit（是的，这是一个很大的假设），您可以改为使用仅包含一个部分的 jQuery UI Accordion。我测试了两者，它们的工作方式相同。我希望这有帮助！[jQuery 手风琴参考](http://jqueryui.com/demos/accordion/#collapsible)

## 使用 AJAX（可折叠面板）的 ASPX 示例：

```
<form id="form1" runat="server">
  <div>
    <asp:ScriptManager ID="ScriptManager1" runat="server" />
    <ajaxToolkit:CollapsiblePanelExtender runat="server" 
        TargetControlID="Panel1" 
        Collapsed="true"
        ExpandControlID="LinkButton1" 
        CollapseControlID="LinkButton1" />

    <asp:LinkButton ID="LinkButton1" runat="server">Panel</asp:LinkButton>
    <asp:Panel ID="Panel1" runat="server">
        This is a Test
    </asp:Panel>
  </div>
</form> 
```

## 使用 jQuery（手风琴）的 HTM 示例：

```
<head>
<title></title>
<script type="text/javascript" src="https://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js"></script>
<script type="text/javascript" src="https://ajax.googleapis.com/ajax/libs/jqueryui/1.8.21/jquery-ui.min.js"></script>
<script type="text/javascript">

    $(document).ready(function () {
        $('#Panel1').hide();

        $('#pnlLink').click(function () {
            $(this).next().toggle();
            return false;
        }).next().hide();
    });

</script>
</head>
<body>
   <a id="pnlLink" href="#">Panel</a>
   <div id="Panel1">
    <div>
        This is a test</div>
    </div>
</body> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-02-05T20:31:32.137

您可以使用 jQueryUI 手风琴功能 [http://jqueryui.com/accordion/](http://jqueryui.com/accordion/)

或 jQuery slideToggle() 函数问候 Nate

# php - 使用 jquery 附加元素非常慢

> ID：11670120
> 
> 赞同：0
> 
> 时间：2012-07-26T13:14:25.480
> 
> 标签：php, jquery, html, append, bpopup

我一直在使用 jquery 从从数据库中检索到的信息追加/创建一个表。在本地主机上测试代码时，附加工作正常，但是当我通过网络上传它并尝试浏览网站时，似乎从数据库加载信息很慢，并且当用户多次单击按钮时。附加也不止一次发生。这是我的代码：

```
$('.viewemp').live("click", function () {

    empviewmodalctr = 1;

    var userid = $(this).attr("id");

        var empviewdata = {userid:userid,action:"viewempinfo"};

        $.ajax({                        
                url:"../includes/MC.Admin.ajax.php",
                type: "POST",
                data: empviewdata,
                success: function(empinfo) {

                    var empJson = $.parseJSON(empinfo);

                    $("#employeeinfo_tbl").html(empJson.empinfo);   

                    $("#employeeemploymentinfo_tbl").html(empJson.empempinfo);      

            $('#employee-view').bPopup({
                modalClose: false
             });

                }

        }); 
```

页：

```
<div id = "employee-view">
<div id = 'employee-view-container'>

    <div id = 'employee-view-container-title'>Employee's Information</div>
    <div class = 'closebtn'><img src = '../images/close.png' style ='"width:100%;height:100%;'/></div>

        <div id = 'employee-view-container-content-left'>

            <table id = 'employeeinfo_tbl'>

            </table>

        </div>

        <div id = 'employee-view-container-content-right'>

            <table id = 'employeeemploymentinfo_tbl'>

             </table>

        </div>

 </div> 
```

我通过重新设计我的元素并正确使用 ajax 调用并仍然使用 .html() 来让它工作

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-26T13:29:05.763

您需要做两件事：在最初单击按钮时禁用该按钮，然后在 AJAX 调用完成后重新启用它，因此将您的 jquery 修改为：

```
$('.viewemp').live("click", function () {
    var clicked = this;
    $(clicked).attr('disabled', 'disabled');
    empviewmodalctr = 1;
    var userid = $(this).attr("id");
    var empviewdata = {userid:userid,action:"viewempinfo"};
    $.ajax({                        
        url:"../includes/MC.Admin.ajax.php",
        type: "POST",
        data: empviewdata,
        success: function(empinfo) {
            var empJson = $.parseJSON(empinfo);
            $("#employee-view").html("<div id = 'employee-view-container'>"+
            "<div id = 'employee-view-container-title'>Employee's Information</div>"+
            "<div id = 'closebtn'><img src = '../images/closebtn.png' style ='"+                                        "width:100%;height:100%;'/></div></div>");
            var a = "<div id = 'employee-view-container-content-left'></div>"+
            "<div id = 'employee-view-container-content-right'></div>";
            $("#employee-view-container").append(a);
            var b = "<table id = 'employeeinfo_tbl'>";
            $("#employee-view-container-content-left").append(b);
            $("#employeeinfo_tbl").append(empJson.empinfo); 
            var empemploymentviewdata = {userid:userid,action:"viewempemploymentinfo"};

            $.ajax({                        
                url:"../includes/MC.Admin.ajax.php",
                type: "POST",
                data: empemploymentviewdata,
                success: function(empemployment) {
                    var empemploymentJson = $.parseJSON(empemployment);
                    var c = "<table id = 'employeeemploymentinfo_tbl' border = 0>";
                    $("#employee-view-container-content-right").append(c);
                    $("#employeeemploymentinfo_tbl").append(empemploymentJson.empempinfo);
                }
            });
            $("#employee-view-container").append("</table></div>");             
            $('#employee-view').bPopup({
            modalClose: false
            });
        },
        complete: function() {
            $(clicked).removeAttr('disabled', '');
        }
    });
}); 
```

# batch-file - 使用来自变量的字符串批量修剪字符串

> ID：11670124
> 
> 赞同：1
> 
> 时间：2012-07-26T13:14:41.903
> 
> 标签：batch-file, trim

如果您的参数无效，我有一批会显示用法。

例如。

```
 Running "sample.bat update fuh"

   :usageactions
   set actions=%*
   set toremove=update
   set todisplay=%actions:%toremove% =%
   echo Error: Invalid Arguments - '%todisplay%'.
   echo Type sample.bat %toremove% -h for usage. 
```

预期输出：

```
 Error: Invalid Arguments - 'fuh'.
  Type sample.bat update -h for usage 
```

但我的输出是：

```
 Error: Invalid Arguments - 'update'.
  Type sample.bat update -h for usage 
```

如何实现它？任何帮助，将不胜感激。谢谢。

（顺便说一句，如果问题如此混乱，请修改问题。）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-26T13:23:11.373

您尝试在一行中多次扩展表达式，但解析器无法猜测哪些百分比是成对的。

```
set todisplay=%actions:%toremove% =% 
```

你可以在这里使用延迟扩展

```
setlocal EnableDelayedExpansion
set toDisplay=!actions:%toRemove% =! 
```

首先 %toRemove% 将被扩展，然后该行看起来像

```
set toDisplay=!actions:update =! 
```

然后将评估感叹表达式。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-26T13:24:58.463

幸运的是，我找到了解决问题的方法，doh。无论如何，这是解决方案。

```
:usageactions
setLocal EnableDelayedExpansion
set actions=%*
set toremove=update
set todisplay=!actions:%toremove% =!
echo Error: Invalid Arguments - '%todisplay%'.
echo Type sample.bat %toremove% -h for usage.
endlocal 
```

这将显示。

```
Error: Invalid Arguments - 'fuh'.
Type sample.bat update -h for usage 
```

# django - 错误的 url 正则表达式让 django 很忙

> ID：11670127
> 
> 赞同：0
> 
> 时间：2012-07-26T13:14:51.980
> 
> 标签：django, django-views, django-urls

我有用“-”字符替换空格的网址。所以我做了一个这样的url正则表达式：

```
url(r'^(?P<item_url>(\w+-?)*)/$', 'detail'), 
```

我的观点：

```
def detail(request, item_url):
   i = get_object_or_404(Page, url=item_url,published=True)
   return render_to_response('item/detail.html', {'item':i},
       context_instance=RequestContext(request)) 
```

不幸的是，这让 django 非常忙于处理超过 20 个字符的 url。该过程挂起 20 秒 - 1 分钟，然后返回正确的结果。这是基于我使用的错误正则表达式吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-26T13:32:07.540

尝试以下网址模式：

```
url(r'^(?P<item_url>[\w-]+)/$', 'detail'), 
```

`[\w-]+`将匹配一个或多个字母数字字符或连字符。

# jsf - 如何在 JSF 中创建 h:commandButton 以打开新页面

> ID：11670129
> 
> 赞同：1
> 
> 时间：2012-07-26T13:14:58.113
> 
> 标签：jsf, jsf-2

我想在 JSF 页面中创建命令按钮。当我按下它时，我想打开一个新页面并使用 http 发送一个值。我对此进行了测试，`h:commnadButton`但它不起作用。

```
<h:commandButton id="lnkHidden" value=" Edit User " action="EditAccountProfile.jsf">
 <f:param name="id" value="#{item.userid}" />
</h:commandButton> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-26T13:25:11.947

[`h:commandButton`](http://docs.oracle.com/cd/E17802_01/j2ee/javaee/javaserverfaces/2.0/docs/pdldocs/facelets/h/commandButton.html)用于提交表单，通常在服务器中执行操作。

用于[`h:button`](http://docs.oracle.com/cd/E17802_01/j2ee/javaee/javaserverfaces/2.0/docs/pdldocs/facelets/h/button.html)简单导航：

```
<h:button id="lnkHidden" value=" Edit User " outcome="EditAccountProfile.jsf">
 <f:param name="id" value="#{item.userid}" />
</h:button> 
```

这将生成一个普通的 HTML `<input type="button" onclick="window.location.href=/correct/path/to/EditAccountProfile.jsf" />`，不需要 HTTP POST。

**也可以看看：**

[什么时候应该使用 h:outputLink 而不是 h:commandLink？](https://stackoverflow.com/questions/4317684/when-should-i-use-houtputlink-instead-of-hcommandlink)

# android - 嵌套的 Activity 类和 AsyncTask

> ID：11670130
> 
> 赞同：0
> 
> 时间：2012-07-26T13:15:00.623
> 
> 标签：android, android-asynctask, nested, android-activity

我在这里发帖是因为我有一个难题。

我有一个扩展 Activity 的 TabNewsActivity 的类

此类包含一个嵌套类 TabNewsActivity: DownloadData，它扩展为 AsyncTask >>

此类 TabNewsActivity 显示从我的 Web 服务恢复的数据，一个点 DownloadData 是异步的，它允许我在列表中检索我的 Web 服务的值。

要执行更新值（在我的应用程序中 => 刷新）我必须这样做：

```
DownloadData (). Execute (); 
```

但我不能脱离我的上下文 TabNewsActivity: s

我想要一种重新执行此命令的方法，但例如在另一个选项卡中。

感谢您的帮助

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-26T14:14:17.970

建议在单独的类文件中创建您的 DownloadData 子类，而不是 TabNewsActivity 的嵌套类。您可以将其传递给 Handler 以充当完成回调。这样，您可以从 TabNewsActivity 执行 DownloadData，并在完成后将其传递给 TabNewsActivity 调用的 Handler。从另一个类调用它时也是如此。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-26T13:56:41.047

AsyncTask execute() 方法是静态的，因此您不需要任何实例来调用它。你这样称呼它：

```
AsyncTask.execute(); 
```

这将运行您在 doInBackground() 方法中的内容。据我所知，只要导入 AsyncTask，您就应该能够在应用程序的任何位置调用 AsyncTask.execute()。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-27T02:48:06.950

在 Service 中使用 AsyncTask。

# php - 循环遍历指定的像素区域

> ID：11670135
> 
> 赞同：4
> 
> 时间：2012-07-26T13:15:08.017
> 
> 标签：php, loops

我在我的照片网站上按颜色功能进行了搜索。为此，我遍历了一张图像中的所有像素，并在我的数据库中记录了前 10 个像素。我遇到的问题是，因为我的照片有人物主题，我的搜索者*实际上是*在搜索主题的颜色，而不是背景（天空、铺路、草等）。我知道这将很难完全消除，但我想我需要稍微改变颜色以获得更好的效果。

请看这张照片的例子：

![在此处输入图像描述](../Images/6fbb9637d469621d4027fecdbf858d46.png)

左边的例子是我正在做的，收集所有像素。黑色和灰色占据了该选择的前 3 种颜色，粉红色第 4 位，背景女孩连衣裙的海军蓝色第 5 位——我只收集前 5 种颜色，而我的主色并不是那么好。如果我可以改变循环像素的方式，只选择绿色框中的颜色（右），我认为这会对我的收藏产生一点影响。这是我很难看到数学的地方。

我正在这样做，以循环遍历所有像素：

```
$size = @getimagesize($imageFile); 

for ($x = 0; $x < $size[0]; $x += $granularity) { 
  for($y = 0; $y < $size[1]; $y += $granularity) { 
    // do stuff here
} 
```

但我需要改变它，使顶部和底部大约减少 5%，侧面大约减少 8-10%，然后循环通过新的选择。

我确实开始了，但后来停止了，因为我不确定我的计算是否返回奇数或像 1.030044858 这样的数字。

这是我走了多远，希望有人可以帮助清理它并让我越过这条线：

```
$granularity = 4;
$granularity = max(1, abs((int)$granularity));

$size = @getimagesize($imageFile);
$sizeX = $size[0];
$sizeY = $size[1];

$xPerCent = 8; // for me to set & adjust
$yPerCent = 5; // for me to set & adjust

$xSelectionWidth = ($sizeX/100)  * $xPerCent;
$xSelectionWidth = $sizeX - ($xSelectionWidth * 2);

$xSelectionHeight = ($sizeY/100)  * $yPerCent;
$xSelectionHeight = $sizeY - ($ySelectionHeight * 2);

$xSelectionStart = 0;
$xSelectionEnd = 0;
$ySelectionStart = 0;
$ySelectionEnd = 0;

for($x = 0; $x < $size[0]; $x += $granularity) { 
    for($y = 0; $y < $size[1]; $y += $granularity) { 
        // do stuff here
    } 
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-26T13:45:42.783

如果您想忽略图片中的某些内容，我建议您将其转换为黑白并获取最大的白色区域（您需要设置转换的详细信息以确保您不会将所有非白色都变成黑色）。

我的意思是红色，肤色应该设置为白色，紫色为黑色。在这种情况下，背景和任何深色表面都是黑色的。阅读[http://www.switchonthecode.com/tutorials/csharp-tutorial-convert-a-color-image-to-grayscale](http://www.switchonthecode.com/tutorials/csharp-tutorial-convert-a-color-image-to-grayscale)它是一个很好的介绍，但是，我说的是真正的黑白，所以你可以调整/适应这个一。

这将极大地帮助您将注意力集中在图像的正确部分。

B&W 表单识别越准确，您就越能识别出您的颜色对象。有关模式识别的详细信息，请阅读[http://en.wikipedia.org/wiki/Pattern_recognition 。](http://en.wikipedia.org/wiki/Pattern_recognition)

获取您想要在原始图像中查看的一组坐标。

对不起，我不是 PHP 人，我不能以这种方式更具体，但我希望这会对你有所帮助......

# jquery - Jquery .show() 在 chrome 和 safari 中增加表格高度而不是 Firefox、IE

> ID：11670138
> 
> 赞同：0
> 
> 时间：2012-07-26T13:15:15.740
> 
> 标签：jquery, css, google-chrome

我一直在尝试使用 jquery、css 和 html 创建一个可扩展的表。我已经让它在 Firefox 和 IE 中运行良好，但是我遇到了一个奇怪的问题，使用 .hide() 可以正常工作，但是当使用 .show() 再次显示表格时，表格的高度会增加时间 .show() 完成。现在我不确定它是否是 chrome/safari、jquery 或我的 CSS 中的错误。

以下是代码的链接 -

[http://jsfiddle.net/fonzee666/CN7re/](http://jsfiddle.net/fonzee666/CN7re/)

在运行 chrome 时单击表顶部几次，我在办公室的几台不同的机器上尝试过，得到了相同的结果。我正在运行的 chrome 版本是 - 20.0.1132.57

我的代码是 -

```
<link rel="stylesheet" type="text/css" href="test.css" />
<!-- For ease i'm just using a JQuery version hosted by JQuery- you can download any version and link to it locally -->
<script src="http://code.jquery.com/jquery-latest.js"></script>
<script>
$(document).ready(function() {
        $(".headRow").click(function(){
                //alert("hello");
                //console.log("here") 
                var $divRow = $(this).nextAll(".divRow")
                if ($divRow.is(":hidden")) {
                       $divRow.show('fast');
                }
                else {
                       $divRow.hide('fast');
                }
        });

});

</script>
<p>hello</p>
</br>
<div class="divTable" id='tableuno'>
        <div class="headRow">
                <div class="divCell" align="center">VIP Name</div>
                <div  class="divCell">IP</div>
                <div  class="divCell">Ports</div>
                <div  class="divCell">Method</div>
                <div  class="divCell">Mode</div>
                <div  class="divCell">Protocol</div>
                <div  class="divCell">Graph</div>
        </div>
        <div class="divRow">
                        <div class="divCell">Rip Label</div>
                        <div class="divCell">IP</div>
                        <div class="divCell">ports</div>
                        <div class="divCell">Weight</div>
                        <div class="divCell">onlineoffline</div>
                        <div class="divCell">updownarrow</div>
                        <div class="divCell">graph</div> 
                </div>
                <div class="divRow">
                        <div class="divCell">xxx</div>
                        <div class="divCell">yyy</div>
                        <div class="divCell">www</div>
                </div>
                <div class="divRow">
                        <div class="divCell">ttt</div>
                        <div class="divCell">uuu</div>
                        <div class="divCell">Mkkk</div>
                </div>
      </div>
</br>
</body>
</html> 
```

而CSS是 -

```
.divTable{
  display:table;         
  width:auto;         
  background-color:#eee;         
  border:1px solid  #666666;         
  border-spacing:5px;
}
.divRow{
  display:table-row;
  width:auto;
  clear:both;
 background-color:#fff;
}
.headRow:hover {
filter:Alpha(opacity=55);
//-moz-opacity:0.55;
opacity:0.55;
//border:none;
}
.headRow {
display:table-row;

}
.divCell{
  float:left;
  display:table-column;         
  width:200px;          
// background-color:#ccc;

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-26T13:22:42.490

尝试从 hide() 中删除“快速”参数；和显示（）；。那应该解决它。

分叉小提琴：http: [//jsfiddle.net/wjSmz/](http://jsfiddle.net/wjSmz/)

（唯一的缺点是没有褪色，但因为它们很快，我怀疑你会想念它们）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-26T13:24:38.030

表格的高度每次恰好增加十个像素，这使我找到`border-spacing: 5px`了`.divTable`. 如果您删除它，您的桌子每次都保持相同的高度。

但是，由于您可能希望在其中保留该间距，因此我的解决方案是`display: table-xxx`完全取消这些属性，因为您并没有完全使用它们。试试这个：

[http://jsfiddle.net/mblase75/CN7re/12/](http://jsfiddle.net/mblase75/CN7re/12/)

CSS：

```
.divTable{
    overflow: auto;
    background-color:#eee;             
    border:1px solid  #666666;         
}
.divRow{
    overflow: auto;
    margin: 5px;
    background-color:#fff;
}
.headRow {
    overflow: auto;
    margin: 5px;
}
.divCell{
    float:left;
    width:200px;          
} 
```

（这`overflow: auto`将迫使 div 的高度非零，足以容纳其中的浮动 div。）

jQuery：

```
$("#hideshow").click(function() {
    var $divRow = $(".divRow");
    $divRow.fadeToggle('fast'); 
});​ 
```

# xcode4.3 - 是否可以使用 Xcode 创建一个混合的 Master-Detail 和 Tabbed bar 应用程序？

> ID：11670147
> 
> 赞同：0
> 
> 时间：2012-07-26T13:15:47.807
> 
> 标签：xcode4.3

我正在尝试创建一个 Master-Detail iPad 应用程序，其中包含主视图中保存的文件列表，以及详细视图中的主界面。但是，细节中会有许多不同的视图，我希望能够使用标签栏，以便用户可以在细节视图之间快速移动。是否可以创建一个标签栏来在不同的详细视图之间导航，并且仍然保持相同的主视图？我可以放入一个“主菜单”类型的视图，它有按钮可以访问所有不同的主界面，但如果可以的话，我想避免这样做。

谢谢！麦克风

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-18T15:57:06.857

从我所看到的一切来看，这种类型的布局是不可能的，并且与拆分视图的用途并不完全一致。更合适的方法是在 UITabBarController 中使用标准 UIViews，然后将保存的文件作为它自己的视图在弹出窗口中打开。

# python - 在 matplotlib 子图中显示 LineCollections

> ID：11670154
> 
> 赞同：1
> 
> 时间：2012-07-26T13:16:02.620
> 
> 标签：python, matplotlib

当我尝试在两个子图中显示 LineCollections 时，没有显示。当我只在第一个显示它时，它可以工作。我怎样才能让它同时显示在两者中？

```
import numpy
import matplotlib.delaunay
from matplotlib import pyplot as plt
from matplotlib.collections import LineCollection

# Unique points
points = numpy.random.randint(0,2000, (1000, 2))
points = numpy.vstack([numpy.array(u) for u in set([tuple(p) for p in points])])

# Delaunay edges
centers, edges, tris, neighb = matplotlib.delaunay.delaunay(points[:,0], points[:,1])

# LineCollection of edges
lc_edges = LineCollection(points[edges])

# 1x2 subplots
fig,(ax) = plt.subplots(1, 2, figsize=(12,16))

ax1 = plt.subplot(211, aspect='equal', xlim=[points[:,0].min()- 100, points[:,0].max() + 100], ylim=[points[:,1].min() - 100, points[:,1].max() + 100])
plt.title("First plot")
plt.gca().add_collection(lc_edges)
plt.scatter(points[:,0], points[:,1])

ax2 = plt.subplot(212, aspect='equal', xlim=[points[:,0].min()- 100, points[:,0].max() + 100], ylim=[points[:,1].min() - 100, points[:,1].max() + 100])
plt.title("Second plot")
#plt.gca().add_collection(lc_edges)
plt.scatter(points[:,0], points[:,1])

fig.savefig('myfile.png', dpi=250)
plt.close() 
```

编辑：

真正的问题是“可以重复使用 LineCollection 对象吗？”

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-27T02:58:36.047

您可以使用复制模块制作 lc_edges 的卷影副本。lc_edges2 和 lc_edges 都将使用相同的路径列表，您可以通过以下方式确认：`lc_edges._paths is lc_edges2._paths`。

```
import numpy
import matplotlib.delaunay
from matplotlib import pyplot as plt
from matplotlib.collections import LineCollection
import copy

# Unique points
points = numpy.random.randint(0,2000, (1000, 2))
points = numpy.vstack([numpy.array(u) for u in set([tuple(p) for p in points])])

# Delaunay edges
centers, edges, tris, neighb = matplotlib.delaunay.delaunay(points[:,0], points[:,1])

# LineCollection of edges
lc_edges = LineCollection(points[edges])
lc_edges2 = copy.copy(lc_edges)
# 1x2 subplots
fig,(ax) = plt.subplots(1, 2, figsize=(12,16))

ax1 = plt.subplot(211, aspect='equal', xlim=[points[:,0].min()- 100, points[:,0].max() + 100], ylim=[points[:,1].min() - 100, points[:,1].max() + 100])
plt.title("First plot")
plt.gca().add_collection(lc_edges)
plt.scatter(points[:,0], points[:,1])

ax2 = plt.subplot(212, aspect='equal', xlim=[points[:,0].min()- 100, points[:,0].max() + 100], ylim=[points[:,1].min() - 100, points[:,1].max() + 100])
plt.title("Second plot")

plt.gca().add_collection(lc_edges2)
plt.scatter(points[:,0], points[:,1])

plt.show() 
```

结果如下所示：

[![LineCollection 结果](../Images/88d37d6272fdbb301a941e67367ad956.png)](https://i.stack.imgur.com/SMwFHm.png)

# c++ - 使用 C++Builder 后期绑定 COM 对象

> ID：11670175
> 
> 赞同：5
> 
> 时间：2012-07-26T13:17:10.610
> 
> 标签：c++, com, c++builder, late-binding

我们正在与来自 C++Builder 2010 应用程序的一些第 3 方 COM 对象进行交互。

目前我们导入类型库并生成组件包装器，然后能够以相当自然的方式进行方法调用和访问属性。

```
object->myProperty = 42;
object->doSomething(666); 
```

然而，我们已经被 COM 对象的接口（仍在扩展和开发）的变化所困扰，导致我们自己的应用程序失败，因为某些方法 GUID 似乎变得无效 - 即使接口的唯一变化是添加一种新方法）。

已建议将后期绑定作为解决此问题的一种方式。我认为这需要[像这样更改我们的代码：](http://www.oocities.org/siliconvalley/way/9281/e_comcb1.html)

```
object.OlePropertySet("myProperty", 42);
object.OlePrcedure("doSomething", 666); 
```

显然，这读和写起来很痛苦，所以我们不得不编写包装类。

当我们导入类型库时，有什么方法可以自动生成后期绑定包装器？而且，如果是这样，它们是否足够聪明，只在创建对象时进行一次文本绑定，而不是在每个单独的方法调用上？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-27T18:44:30.567

当您为支持后期绑定（当它实现接口时）的 COM 对象导入 TypeLibrary 时，导入`IDispatch`器可以为静态绑定和后期绑定生成单独的包装类（而不是组件）。

向现有接口添加新方法不应使您的代码无效。方法没有 GUID。但是，对于`IDispatch`基于 - 的接口，它的方法确实具有`DISPID`与之关联的值，并且这些`DISPID`值可以从一个版本更改为另一个版本。尽管一旦锁定了接口定义，任何受人尊敬的 COM 开发人员都不应该这样做。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-12-17T23:18:28.617

在深入研究了 TLIBIMP 生成的代码和标头之后，这变得相当容易。

如果您的类型库有一个类`Foo`，那么在导入类型库后，您通常会使用自动生成的智能指针类`IFooPtr`。

```
{
  IFooPtr f;
  ...
  f->myMethod(1,2);
} 
```

您应该注意，此时绑定是静态的 - 也就是说，它们不仅取决于对象的 GUID 和方法的 DISPID，还取决于 DLL 中 VTable 的确切布局。任何影响 vtable 的更改 - 例如，向基类添加额外`Foo`的方法将导致方法调用失败。

要使用动态绑定，您可以使用`IFooDisp`类而不是`IFooPtr`. 同样，这些是智能包装器，自动处理对象生命周期。请注意，对于这些类，您应该使用`.`运算符来访问方法，而不是间接`->`运算符。使用间接运算符将调用该方法，但通过静态绑定。

```
{
  IFooDisp f;
  ...
  f.myMethod(1,2);
} 
```

通过使用这些`IDispatch`基于包装器，方法将由它们的 DISPID 分派，即使对象 vtable 布局已更改。我认为这些类还提供了一种通过函数名而不是 DISPID 进行调度的方法，但尚未确认其细节。

# r - "%%" 和 "%/%" 表示余数和商

> ID：11670176
> 
> 赞同：71
> 
> 时间：2012-07-26T13:08:06.060
> 
> 标签：r

我想知道运算符和为什么`%%`是`%/%`余数和商。

R 开发人员是否有任何理由或历史赋予他们所拥有的意义？

```
 > 0 %/% 10
[1] 0
> 30 %% 10
[1] 0
> 35 %/% 10
[1] 3
> 35 %% 10
[1] 5 
```

* * *

## 回答 #1

> 赞同：43
> 
> 时间：2012-07-26T13:34:11.883

在 R 中，您可以使用`%[characters]%`. 一个简单的例子：

```
'%p%' <- function(x, y){x^2 + y}

2 %p% 3 # result: 7 
```

虽然我同意`%%`相当标准的 BlueTrin，但我怀疑`%/%`可能与我上面展示的那种运算符定义有关——也许它更容易实现，而且很有意义：`%/%`意味着做一种特殊的除法（整数除法） )

* * *

## 回答 #2

> 赞同：31
> 
> 时间：2017-06-05T10:15:11.217

请查看以下示例，以更清楚地了解不同运算符之间的差异：

```
> # Floating Division:
> 5/2
[1] 2.5
> 
> # Integer Division:
> 5%/%2
[1] 2
> 
> # Remainder:
> 5%%2
[1] 1 
```

* * *

## 回答 #3

> 赞同：11
> 
> 时间：2012-07-26T13:16:36.080

我认为这是因为`%`在许多编程语言中经常与模运算符相关联。

例如，在 C、C++、C# 和 Java 以及许多其他从 C 派生语法的语言中就是这种情况（C 本身从 B 中获取）。

# c - c - pcap 过滤器表达式

> ID：11670178
> 
> 赞同：4
> 
> 时间：2012-07-26T13:17:16.680
> 
> 标签：c, tcp, filter, network-programming, pcap

我想知道这个表达式中的输入数据实际上是如何工作的。

```
char *filter = "dst host 172.17.14.90 and ip"; 
```

据我了解，`dest host`以下 IPv4 地址定义了接收到的数据包应发送到的地址。

手册页在这一点上有点令人困惑，说：

> dst host host
> 如果数据包的 IPv4/v6 目标字段是主机，则为真，主机可以是地址或名称。

[http://www.manpagez.com/man/7/pcap-filter/](http://www.manpagez.com/man/7/pcap-filter/)

这就是它的意思吗？至于那`and ip`一点我不知道。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-26T13:53:20.720

你是对的第一点：

```
dst host 172.17.14.90 
```

表示数据包应发送至`172.17.14.90`。

第二个：

```
ip 
```

就像手册页所说的是：

```
ether proto ip 
```

这意味着必须使用 IP 协议发送数据包。

因此，总结一下：必须使用 IP 协议将数据包发送到具有 IP 地址的主机`172.17.14.90`。

* * *

作为说明，上述内容可以使用以下方式更简单地表达：

```
ip dst host 172.17.14.90 
```

（较短的语法`host`在手册页中的解释附近进行了解释）

# performance - 一些 MongoDB 查询的性能极慢

> ID：11670181
> 
> 赞同：1
> 
> 时间：2012-07-26T13:17:19.543
> 
> 标签：performance, mongodb

我收集了大约 30K 个项目，所有这些项目都有一个名为 Program 的元素。“程序”是复合索引的第一部分，因此查找具有特定程序值的项目非常快。运行范围查询也很快，例如：

```
db.MyCollection.find(
{ $and: [ { Program: { "$gte" : "K", "$lt" : "L" } }, 
{ Program: { "$gte" : "X", "$lt" : "Y" } } ] }).count(); 
```

上面的查询没有返回任何结果，因为我正在查询两个非重叠范​​围（KL）和（XY）的重叠）。左侧范围 (KL) 包含大约 7K 项。

但是，如果我用“where”表达式替换第二个“and”子句，查询执行需要很长时间：

```
db.MyCollection.find(
{ $and: [ { Program: { "$gte" : "K", "$lt" : "L" } }, { "$where" : "this.Program == \"Z\"" } ] }).count(); 
```

如您所见，上面的查询也应该返回一个空结果集（范围 KL 与 Program=="Z" 结合）。我知道“where”的性能很慢，但是 Mongo 不应该首先通过评估 left 子句（这将导致大约 7K 项）来减少潜在的结果集，然后才应用“where”检查？如果是这样，处理几千个项目是否应该像在我的机器上那样花费几秒钟而不是几分钟，而 Mongo 服务在执行此操作时消耗大约 3GB RAM？相对较小的收藏看起来太重了。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-26T14:21:18.560

你可以做几件事——

1.  用于`explain()`查看您的查询发生了什么。`explain()`描述[here](http://www.mongodb.org/display/DOCS/Explain)。使用 $explain 运算符返回描述用于返回查询的过程和索引的文档。例如 -

    db.collection.find(查询).explain()

2.  如果这没有返回足够的信息，您可以查看使用[Database Profiler](http://www.mongodb.org/display/DOCS/Database+Profiler)。但是，请记住，这不是免费的，它本身会增加负载。在此页面中，您还可以找到一些关于优化查询性能的基本[说明。](http://www.mongodb.org/display/DOCS/Database+Profiler#DatabaseProfiler-OptimizingQueryPerformance)

3.  但是，就您而言，这一切都归结为 $where 运算符：

    $where 评估 JavaScript 并且不能利用索引。因此，当您使用标准 MongoDB 运算符（例如，$gt、$in）表达查询时，查询性能会提高。

    通常，只有在无法使用其他运算符表达查询时才应使用 $where。如果您必须使用 $where，请尝试至少包含一个其他标准查询运算符来过滤结果集。单独使用 $where 需要进行表扫描。$where 和 Map Reduce 一样，会限制你的[并发](http://www.mongodb.org/display/DOCS/How%20does%20concurrency%20work#Howdoesconcurrencywork-Javascript)。

仅供参考：关于以下输出的几点注意事项`explain()`：

*   `ntoreturn`客户端请求从查询中返回的对象数。例如`findOne()`，设置 ntoreturn 以`limit()`设置适当的限制。零表示没有限制。
*   `query`查询规范的详细信息。
*   `nscanned`执行操作时扫描的对象数。
*   `reslen`查询结果长度（以字节为单位）。
*   `nreturned`从查询返回的对象数。

# .net - 加速 CruiseControl.Net

> ID：11670191
> 
> 赞同：0
> 
> 时间：2012-07-26T13:18:08.720
> 
> 标签：.net, msbuild, cruisecontrol.net

测试后我注意到 CC 运行相同的 msbuild 进程慢了 2 次。如果我从命令行使用相同的参数运行 msbuild，我将有 2 分钟，CC - 4 分钟。构建时间为 4 分钟的较大项目给了我 8 分钟的 CC 时间。那么如何加速 CC 或者它执行了哪些额外的操作呢？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-26T20:29:50.433

查看您的构建日志以了解 CCNET 是如何花费时间的。MSBuild 只是 CCNET 在构建过程中执行的众多操作之一。

话虽如此，如果不查看项目的 CCNET 配置，就无法真正了解原因。另外，您在哪里进行手动 MSBuild 调用？如果它不在 CCNET 服务器上，那么您的本地计算机可能比 CCNET 服务器更快、更新。

# android - 在画布上设置位图的新位置并删除前一个

> ID：11670193
> 
> 赞同：0
> 
> 时间：2012-07-26T13:18:17.040
> 
> 标签：android, canvas, bitmap, position

我有这个代码：

```
protected void onDraw(Canvas canvas) {
    // TODO Auto-generated method stub
    super.onDraw(canvas);
    canvas.drawColor(Color.WHITE);
    canvas.drawBitmap(ball, (canvas.getWidth()/2), 0, null); 
```

它在屏幕上绘制位图，但如果我想设置新位置，它会绘制新位置，我如何绘制新位置并擦除前一个位置。我想在画布上设置位图的新位置。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-26T13:29:28.443

首先绘制颜色将擦除所有然后用新位置绘制您的位图。

# c# - 如何使用带有序列号的 ISession.Merge？

> ID：11670198
> 
> 赞同：0
> 
> 时间：2012-07-26T13:18:29.207
> 
> 标签：c#, .net, nhibernate

拥有 NHibernate 实体：

```
public class Employee
{
    public virtual int Id { get; set; }
    public virtual int Idc { get; set; }
    public virtual int Ide { get; set; }
    .
    . other properties
    .
} 
```

将 ID 映射为：

```
<id name="Id" unsaved-value="0">
    <generator class="sequence">
        <param name="sequence">employee_id_seq</param>
    </generator>
</id> 
```

如果我填充除 Id 之外的新 Employee 的所有属性，然后调用`session.Merge()`它只是创建另一行，其所有属性都与除 Id 之外的原始行相同，而不是与现有员工合并。

是否可以在与这些属性对应的行上进行数据库级别的更新？ `Idc`+`Ide`一起是唯一的，因此应该可以识别要合并的行。

谢谢你的帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-26T13:46:12.377

NHibernate 会话为所有当前加载（持久）的对象维护一个[身份映射。](http://martinfowler.com/eaaCatalog/identityMap.html)身份映射使用实体 id 作为键。在您的情况下，您`Id`是一个简单的`int`值，并且由于它等于`0`（默认情况下）新创建的对象，`session.Merge()`因此无法在会话中找到匹配的持久实体。相反，一个新行被添加到数据库中。

阅读 Ayende 关于[跨会话操作](http://ayende.com/blog/4282/nhibernate-cross-session-operations)的文章以获得更深入的解释。

在其他情况下，如果您希望拥有不同的实体平等概念，您将覆盖您的实体`Equals()`的`GetHashCode()`方法 - 即比较所有属性，但恐怕在这种情况下它不会帮助您。

仅供参考，这里有一些关于`Equals()`和`GetHashCode()`用法的链接：
[Is there a sample why Equals/GetHashCode should be overwritten in NHibernate?](https://stackoverflow.com/questions/11446152/is-there-a-sample-why-equals-gethashcode-should-be-overwritten-in-nhibernate)
[NHibernate：重写 Equals 和 GetHashCode 的原因](https://stackoverflow.com/questions/5851398/nhibernate-reasons-for-overriding-equals-and-gethashcode)

**编辑**

有两个选项可以在数据库级别更新行：

1.  您可以执行[NHibernate update query](http://nhforge.org/doc/nh/en/index.html#batch-direct)，类似于以下内容：

    ```
    Employee emp; // = your new employee instance
    session.CreateQuery(
               "update Employee set Property1 = :property1, ... " +
               "where Idc = :idc, Ide = :ide")
           .SetParameter("idc", emp.Idc)
           .SetParameter("ide", emp.Ide)
           .SetParameter("property1", emp.Property1)
           // other properties
           .ExecuteUpdate(); 
    ```

    此外，您可以使用本机 SQL 来执行此操作：`session.CreateSQLQuery("...").ExecuteUpdate();`

2.  或者您可以先加载实体，更新其属性，然后保存：

    ```
    Employee emp; // = your new employee instance
    Employee oldEmployee = session.Query<Employee>()
        .Where(x => x.Idc == emp.Idc)
        .Where(x => x.Ide == emp.Ide)
        .Single();
    oldEmployee.Property1 = emp.Property1;
    oldEmployee.Property2 = emp.Property2;
    // other properties
    session.SaveOrUpdate(oldEmployee); 
    ```

# android - Android 设备与 Arduino 微控制器之间的通信

> ID：11670199
> 
> 赞同：0
> 
> 时间：2012-07-26T13:18:34.743
> 
> 标签：android

我想`Arduino microcontroller`通过`USB port`. 我没有 Arduino ADK 板，没有这块板和微控制器就无法进行通信？？我应该如何进行这种沟通？此外，`Android 3.1`还有其他设备具有主机模式，我如何使用`Android 2.3.4`附件模式进行通信？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-26T13:52:44.673

你检查过IOIO吗？它不使用您计算机的 USB 端口……但我仍然认为它可能会有所帮助：[https ://www.sparkfun.com/products/10748](https://www.sparkfun.com/products/10748)

# mysql - MySql 查询浏览器：alter table for foreign key

> ID：11670204
> 
> 赞同：0
> 
> 时间：2012-07-26T13:18:53.283
> 
> 标签：mysql, sql, database-design, orm, entity-relationship

如何使 message_id 成为外键，以便评论和消息之间是一对多的？（一条消息可以有很多评论。）

```
mysql> use nntp;
Reading table information for completion of table and column names
You can turn off this feature to get a quicker startup with -A

Database changed
mysql> show tables;
+----------------+
| Tables_in_nntp |
+----------------+
| comments       |
| messages       |
+----------------+
2 rows in set (0.00 sec)

mysql> describe comments;
+------------+---------+------+-----+---------+-------+
| Field      | Type    | Null | Key | Default | Extra |
+------------+---------+------+-----+---------+-------+
| id         | int(11) | NO   | PRI | NULL    |       |
| message_id | int(11) | NO   |     | NULL    |       |
| comment    | text    | NO   |     | NULL    |       |
| stamp      | date    | NO   |     | NULL    |       |
+------------+---------+------+-----+---------+-------+
4 rows in set (0.00 sec)

mysql> describe messages;
+-----------+---------+------+-----+---------+-------+
| Field     | Type    | Null | Key | Default | Extra |
+-----------+---------+------+-----+---------+-------+
| id        | int(11) | NO   | PRI | NULL    |       |
| newsgroup | text    | NO   |     | NULL    |       |
| subject   | text    | NO   |     | NULL    |       |
| content   | text    | NO   |     | NULL    |       |
| number    | text    | NO   |     | NULL    |       |
+-----------+---------+------+-----+---------+-------+
5 rows in set (0.00 sec)

mysql> quit
Bye
thufir@dur:~/NetBeansProjects/USENET$ 
```

我正在使用 MySql 查询浏览器并查看：

![在此处输入图像描述](../Images/c1481d00e2a0702deb706c4e1acfca38.png)

虽然我可以从查询浏览器或命令行输入 SQL，但我对它不是很熟悉。如果可能的话，我更愿意为此使用 GUI 查询浏览器。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-26T13:21:47.453

应该做的伎俩：

```
ALTER TABLE comments ADD FOREIGN KEY (message_id) REFERENCES messages(id); 
```

从阅读[MySQL 文档](http://dev.mysql.com/doc/refman/5.1/en/alter-table.html)中可以看出。

# javascript - 使用 jQuery 创建一个简单的子菜单下拉菜单

> ID：11670209
> 
> 赞同：0
> 
> 时间：2012-07-26T13:19:04.063
> 
> 标签：javascript, jquery, html, navigation

这是我的目标[示例：](http://jsbin.com/welcome/4812/edit)

* * *

我不喜欢我必须`li`用一个类来装饰一个元素才能正确触发事件。如果我有多个嵌套类别下拉菜单会怎样？事情变得一团糟！

一旦我离开事件捕获区域，我似乎也无法选择一个选项而不关闭它。

有关如何构建精心制作的下拉导航菜单的任何建议？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-26T13:43:40.553

您真的不需要任何巧妙地使用选择器的类：P

我用一个例子设置了一个[小提琴，这是代码：](http://jsfiddle.net/XKuUa/)

HTML：

```
<nav>
    <ul>
        <li><a href="#">HOME</a></li>
        <li>
            <a href="#">OFFERS</a>
            <ul>
                <li>
                    <a href="#">NEW</a>
                    <ul>
                        <li>YAY!</li>
                    </ul>
                </li>
            </ul>
        </li>
        <li><a href="#">SETTINGS</a></li>
        <li><a href="#">TV's</a></li>
        <li><a href="#">COMPUTERS</a></li>
        <li><a href="#">RICE</a></li>
    </ul>
</nav>​ 
```

如您所见，不需要单个类/ID :P 元素“OFFERS”是唯一具有下拉菜单的元素，并且在该菜单中，元素“NEW”还有另一个。

CSS：

```
li > ul { display: none; }
li li { margin-left: 10px; } 
```

第一种风格是重要的。首先，我们希望隐藏我们的子菜单。另一种风格只是为了清楚起见。

jQuery：

```
$("nav ul li").hover(function(){
    if ($("> ul", this).length > 0) {
        $("> ul", this).show();
    }
}, function(){
    if ($("> ul", this).length > 0) {
        $("> ul", this).hide();
    }
});​ 
```

是的，就这么简单 :) 当我们`hover`是一个菜单元素时，我们检查它是否有任何`ul`直接的子元素，如果有，我们显示它们。当我们离开菜单元素时，我们再次检查它是否有任何`ul`直接子元素，如果有，我们隐藏它们。

当然，您需要对其进行样式设置，并确保清除 any 中的任何浮动`li`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-26T13:24:14.430

您需要使用类来正确控制流程。特别是在你的外容器上。

例如，在我的菜单中，我有一个`ul`包含所有菜单的菜单，每个菜单项都是一个`li`. 里面`li`是第一级标题，以及另一个`ul`包含子菜单的标题。

```
<ul class="menu">
    <li>
        Item 1
        <ul><!--Further items--></ul>
    </li>
    <li>
        Item 2
        <ul><!--Further items--></ul>
    </li>
</ul> 
```

然后，您可以使用子选择器来控制它。尽管有时简单地使用一个类更容易。

```
$(".menu > li") //First level items
$(".menu > li > ul") //Submenus 
```

假设您想在单击第一级项目之一时使菜单向下滑动：

```
$(".menu > li").click(function() {
    $this = $(this); //Caching. Not really needed for this example. But anyway :)
    $this.children("ul").slideToggle("fast");
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-04-25T11:02:23.863

```
$(document).ready( function(){ 
   $("ul.MenuNavi li").mouseover(function(){ 
     $(this).children('ul').slideDown('3000'); 
   }); 
   $("ul.MenuNavi li").mouseleave(function(){                    
     $(this).children('ul').stop(true).slideUp('3000'); 
   }); 
}); 
```

# ruby-on-rails - 每个用户的 Railscarrierwave 上传目录

> ID：11670210
> 
> 赞同：3
> 
> 时间：2012-07-26T13:19:09.500
> 
> 标签：ruby-on-rails, carrierwave

我一直在尝试使用 Carrierwave 进行图像上传，效果很好，我只是想知道如何为每个用户创建一个上传目录，即：-

> 上传/current_user.id/gallery.id/

我有两张桌子，

图片

*   ID
*   标题
*   描述
*   画廊_id
*   created_at
*   更新时间

画廊

*   ID
*   标题
*   描述
*   用户身份
*   created_at
*   更新时间

非常感谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-26T13:27:23.513

*由于您提供的设置细节很少，我将根据我的回答做出假设。*

如果您有某个`Gallery`模型与相关上传者绑定，则上传者有一个`model`返回`Gallery`实例的方法。我还将假设您的实例与某些记录`Gallery`有关系。您需要做的就是向您的上传程序添加一个方法来重载默认提供的内容。`owner``User``store_dir``CarrierWave::Uploader::Base`

```
def store_dir
  "uploads/#{model.owner.id}/#{model.id}"
end 
```

# c# - 实体框架不会检测到导航属性的变化

> ID：11670212
> 
> 赞同：15
> 
> 时间：2012-07-26T13:19:13.813
> 
> 标签：c#, entity-framework-4

我无法检测导航属性的更改：

我的测试模型如下所示：

```
public class Person
{
    public int Id { get; set; }

    public string Name { get; set; }

    public virtual Address Address { get; set; }
}

public class Address
{
    public int Id { get; set; }

    public string Name { get; set; }
} 
```

我创建并保存了一个 Person 类型的对象，同时分配了 Name 和 Address 属性。我的问题是，如果我从数据库中取回 Person 对象并更改 Address 属性（例如更改为 Null），则 ef 不会检测到更改！我的代码是这样的：

```
using (var ctx = new EFContext())
{
    Person p = ctx.People.First();
    //p.Address IS NOT NULL!
    p.Address = null;
    var entry = ctx.Entry(p);
} 
```

为什么`entry.State` **不变**？

**编辑：**如果我调用 SaveChanges，记录会正确保存（地址变为空）！

**编辑 2：**我已经按照比利的建议创建了外键属性，如果我在 Visual Studio 中检查 Person 对象，则状态已修改。如果我不停止调试器检查对象的值，则状态为未更改！

**编辑 3：**使用 ctx.People.Include(x => x.Address).First(); 加载 Person 对象 解决问题。有没有办法避免调用 Include 并继续修改 Address 属性而不是 AddressId ？

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2012-07-26T14:36:18.013

首先：您必须按照@billy 的建议使用`Include`. 您的评论“ *p.Address IS NOT NULL！* ”仅是正确的，因为您正在`p.Address`调试器中观看，从而触发调试器中的延迟加载，因此`null`检测到设置地址的更改。在发布模式下或当您不检查调试器中的属性时，您的代码将无法工作，并且不会保存任何更改。

因此，您的编辑 3 的答案是：不。

第二：`var entry = ctx.Entry(p)`只返回*实体状态*，并且您没有更改实体状态，而是更改了*关系状态*，或者更准确地说，您*删除*了关系。您不能使用 API 检查关系状态，`DbContext`而只能使用`ObjectContext`API：

```
Person p = ctx.People.Include(x => x.Address).First();
p.Address = null;
var objCtx = ((IObjectContextAdapter)ctx).ObjectContext;
var objentr = objCtx.ObjectStateManager.GetObjectStateEntries(EntityState.Deleted); 
```

`objentr`现在将有一个类型的条目`RelationshipEntry`：

![在此处输入图像描述](../Images/7c71ba193dbb7d61341658b0410aadc3.png)

`SaveChanges()`当您调用和删除关系时， EF 会将此关系条目与实体状态条目一起考虑，即将数据库中的`Address`外键列设置为。`Person``NULL`

关于编辑 2：更改外键属性（这是模型中的标量属性）是实体本身的更改，因此`Modified`在这种情况下实体状态将是。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-07-26T13:33:07.147

您需要包括地址导航。支柱。在您的查询中，否则 EF 在您保存时不会考虑对其进行更改：

```
using (var ctx = new EFContext())
{
    Person p = ctx.People.Include(x => x.Address).First();
    //p.Address IS NOT NULL!
    p.Address = null;
    var entry = ctx.Entry(p);
} 
```

您还可以在模型中使用外键，我非常喜欢：

```
public class Person
{
    public int Id { get; set; }

    public string Name { get; set; }

    public virtual Address Address { get; set; }

    public int? AddressId {get; set;}
} 
```

...

```
using (var ctx = new EFContext())
{
    Person p = ctx.People.First();
    p.AddressId = null;
    var entry = ctx.Entry(p);
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-08-19T00:33:00.940

在我的应用程序中，在请求重新加载或用户离开项目/视图之前，我会执行一些检查以确保没有未保存的更改。

这基本上超出了当前接受的答案，但我想提供一个实现并提请注意您必须在可以获取关系更改`Context.ChangeTracker.DetectChanges()`之前调用！`ObjectContext.ObjectStateManager`我花了很多时间调试这个，傻！

```
_EagleContext.ChangeTracker.DetectChanges();

var objectContext = ((IObjectContextAdapter)_EagleContext).ObjectContext;
var changedEntities = objectContext.ObjectStateManager.GetObjectStateEntries(EntityState.Added | EntityState.Deleted | EntityState.Modified);

if (_EagleContext.ChangeTracker.Entries().Any(e => e.State == EntityState.Modified)
    || changedEntities.Count() != 0)
{
    var dialogResult = MessageBox.Show("There are changes to save, are you sure you want to reload?", "Warning", MessageBoxButton.YesNo);
    if (dialogResult == MessageBoxResult.No)
    {
        return;
    }
}

// Continue with reloading... 
```

# c# - 如何填写网络表格并提交

> ID：11670213
> 
> 赞同：0
> 
> 时间：2012-07-26T13:19:13.680
> 
> 标签：c#, winforms, webrequest

> **可能重复：**
> [如何模拟浏览器 HTTP POST 请求并在 C# 中捕获结果 在 C](https://stackoverflow.com/questions/2071321/how-to-simulate-browser-http-post-request-and-capture-result-in-c-sharp)
> [# 中像网页一样发送 POST 请求？](https://stackoverflow.com/questions/6377339/send-post-request-in-c-sharp-like-a-web-page-does)

我正在用 c# 制作一个测试应用程序，我想知道如何填写网络表单。

我只想填写 1 个盒子，详细信息如下：

```
<td>Your name: </td>
      <td><input class="text" type="text" name="name" /></td></tr>
      <tr><td colspan="2" align="center">
         <input class="text" type="submit" name="submitBtn" value="Login" /> 
```

所以基本上我想在我的 WinForms 应用程序中获取文本框的文本（它是简单的部分:)）并将其放入 url 地址上的**名称**字段中，然后发送请求或按下**登录**按钮。

是否有捷径可寻？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-26T13:21:04.587

看一下（[Http](http://msdn.microsoft.com/en-us/library/system.net.httpwebrequest.aspx)）[WebRequest](http://msdn.microsoft.com/en-us/library/system.net.webrequest.aspx)

[如何：使用 WebRequest 类发送数据 如何：使用 WebRequest 类](http://msdn.microsoft.com/en-us/library/debx8sh9.aspx)
[请求数据](http://msdn.microsoft.com/en-us/library/456dfw4f.aspx)

# mysql - 如何获得两列的交集

> ID：11670216
> 
> 赞同：4
> 
> 时间：2012-07-26T13:19:25.313
> 
> 标签：mysql

例如我有表 A 和表 B

a.data = {1,2,3,4,5,6} b.data = {4,5,7}

如果要在 a.data 或 b.data 中查找一个值，可以使用 FIND_IN_SET(3, b.data)。但是我想知道是否*至少*b.data 的所有值都在 a.data 中，或者我是否至少可以找到 b.data 和 a.data 之间的交集。所以在这种情况下{4,5}。

WHERE INTERSECT(a.data, b.data) ...类似的东西。我应该如何在 MySQL 中做到这一点？

*更新*

b.data {4,5,7} 是一个 1 记录的列数据，所以在 b.data 上加入 a.data 是行不通的。

```
table A  
=======
ID     DATA  
1      {1,2,3,4,5,6}  
2      {7,9,12}  

table B  
=======  
ID     DATA  
1      {4,5,7}  
2      {9,10,11,12} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-26T13:31:01.340

您可以使用`INNER JOIN`

看看[联接的视觉解释](http://www.codinghorror.com/blog/2007/10/a-visual-explanation-of-sql-joins.html)

```
SELECT fn_intersect_string(a.data, b.data) AS result FROM table_name; 
```

您也可以将用户定义的函数编写为：

```
CREATE FUNCTION fn_intersect_string(arg_str1 VARCHAR(255), arg_str2 VARCHAR(255))
RETURNS VARCHAR(255)
BEGIN
    SET arg_str1 = CONCAT(arg_str1, ",");
    SET @var_result = "";

    WHILE(INSTR(arg_str1, ",") > 0)
    DO
        SET @var_val = SUBSTRING_INDEX(arg_str1, ",", 1);
        SET arg_str1 = SUBSTRING(arg_str1, INSTR(arg_str1, ",") + 1);

        IF(FIND_IN_SET(@var_val, arg_str2) > 0)
        THEN
            SET @var_result = CONCAT(@var_result, @var_val, ",");
        END IF;
    END WHILE;

    RETURN TRIM(BOTH "," FROM @var_result);
END; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-26T13:26:38.807

您从内部连接获得交集：

```
SELECT a.data FROM a, b WHERE a.data = b.data 
```

要确定 b 是否是 a 的子集，您可以执行

```
SELECT b.data FROM b LEFT JOIN a ON a.data = b.data WHERE a.data IS NULL 
```

这将计算差异：来自 b*且不*包含在 a 中的所有值。如果为空，则 b 是 a 的子集。

您可以将这两种方法用作较大查询中的子查询。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-26T13:40:31.963

如果您的列是 type [`SET`](http://dev.mysql.com/doc/refman/5.6/en/set.html)，那么它会在内部存储为一个数字，并会在适当的情况下自动转换为该数字。您描述的操作对应于这些数字的按位逻辑操作。例如，可以使用来自两列的值的[逐位和计算交集。](http://dev.mysql.com/doc/refman/5.6/en/bit-functions.html#operator_bitwise-and)

```
a.data & b.data AS intersection,
(a.data & b.data) <> 0 AS aAndBIntersect,
(a.data & b.data) == b.data AS bIsSubsetOfA 
```

这要求两列的类型相同，以便相同的字符串对应相同的位。要将结果转换回字符串，您可以使用[`ELT`](http://dev.mysql.com/doc/refman/5.6/en/string-functions.html#function_elt)，但所有组合可能会变得丑陋。作为替代方案，您可以将结果保存在具有相同数据类型的临时表中，将其存储为数字，然后以字符串的形式检索。

# git - 使用 git skip-worktree 禁用文件更新，合并问题

> ID：11670221
> 
> 赞同：1
> 
> 时间：2012-07-26T13:19:58.963
> 
> 标签：git, intellij-idea

我们使用 Git、IntelliJ 和 Maven。我们在 IntelliJ 的配置文件中遇到了一些问题。例如，*.iml 文件会根据项目是构建还是重新构建或`mvn clean`执行“”而不断变化。我们知道 IntelliJ 中有一些错误会导致这些文件发生更改。

计划是`git update-index --skip-worktree`对所有 *.iml 文件（以及其他一些文件）使用“”。这样，开发人员可以为这些文件维护适当的状态，并且如果他们必须更改（新的依赖项或模块）以重新启用跟踪，更改文件然后切换回跳过更改。所以其他开发人员获得了更新的文件，但他们的更改不会被推送回 git 存储库。

根据[http://fallengamer.livejournal.com/93321.html](http://fallengamer.livejournal.com/93321.html)这有可能起作用。

这确实适用于本地测试存储库。但是一旦移动到远程它开始表现不同。" `git status`" 显示不需要做任何事情，但切换分支会显示本地更改将被覆盖的消息（主要是“忽略”的 *,iml 文件），尽管“ `git ls-files -v`”在文件上显示了正确的标志。在 IntelliJ 中有一个带有相同警告的空窗口，所以这相当混乱。

“skip-worktree”选项有什么问题？它不应该在合并中幸存下来吗？还是它的行为是为了不同的目的？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-26T14:59:55.743

这种行为是有意的。 `git update-index --skip-worktree`（以及类似的选项`--assume-unchanged`）旨在隐藏状态中的一些修改。当您合并，并且合并即将更改这些文件时，我会说，Git 会警告您而不是简单地覆盖您的更改，这很好。

以下是`man git-update-index`关于此的内容：

> 工作目录版本可能存在或不存在。如果存在，其内容可能与索引版本匹配或不匹配。写入不受该位影响，内容安全仍是第一要务。请注意，如果这样做是安全的（即工作目录版本与索引版本匹配），Git 可以更新标记为 skip-worktree 的工作目录文件

* * *

As about behavior of IntelliJ, it also (as well as `git status`) doesn't check if some files are marked with this flag, so when it tries to show you differences, it can't find modifications which prevent the merge. You may vote for [a couple](http://youtrack.jetbrains.com/issue/IDEA-76682) [of issues](http://youtrack.jetbrains.com/issue/IDEA-72550) related to `--assume-unchanged` (they are probably totally the same for `--skip-worktree` as well).

# javascript - JavaScript 没有通过点击执行

> ID：11670222
> 
> 赞同：-3
> 
> 时间：2012-07-26T13:20:08.707
> 
> 标签：javascript, html, onclick

我让这个 JavaScript 运行了一段时间，但我稍微修改了一下，现在我什至无法让它运行。我在 JavaScript 中有一段时间的警报，但我什至无法触发它。这段代码上面有一些 PHP，但它不应该干扰 JavaScript。

```
<form action="http://go.gbpi.net/Outage/add-question/" method="post">
Question Name (A descriptive name for the question. Example: "Phone number", or "Pizza Size"): <br /><input type="text" name="questionName" />
<?php
echo("Category: <br /><select name=\"category\" id=\"category\">");
$mysqli = db_init();
$mysqli->next_result();
    $cats = $mysqli->query("call GetActiveCategories()");
    while ($row = $cats->fetch_assoc()){
        $categori = $row['Category_Text'];
        if(!($categori == $category)){
        echo("<option value = \"".$categori."\">".$categori."</option>");}
    }
echo("</select>");
?>
Question Text:<br /><input type="text" name="questionText" style='width:80%' />
Question Type:<br /><select name="myList" id="myList" onchange="selectType(); return false;">
<option value = "1">Yes or No</option>
<option value = "2">Multiple Choice</option>
<option value = "3">Multiple Select</option>
<option value = "4">Open Response</option>
    <option value = "5">Final Reply</option>
    <option value = "6">Summary</option>
</select>
<div id='regexes'>
type of input: <br /><select name="regex" id="regex">
<option value = "-1">any input</option>
<?php
    $mysqli->next_result();
    $regexes = $mysqli->query("call GetValidRegexes()");
    while($regex_row = $regexes->fetch_assoc()){
        $rid = $regex_row['Validation_ID'];
        $rname = $regex_row['Validation_Name'];
        echo("<option value = \"".$rid."\">".$rname."</option>");
    }
?>
</select>
</div>
<div id='buttons'></div>
<button id="adda" onclick="addAnswer(); return false;">add answer (max: 10)</button>
<input type="submit" value="add question" />
</form>
    <?php
            echo("<a href='./define-relationships/'>Define Question Relationships</a><br />");
    ?>
<script type="text/javascript">
    document.getElementById("adda").style.visibility="hidden";
</script>

<script type="text/javascript">
var answers = 0;
var inHTML = "";
function addAnswer()
{
if(answers < 10){
write = document.getElementById('buttons');
write.innerHTML = write.innerHTML + "answer: <input type=\"text\" name=\"answer" + answers + "\" /> <br>";
answers = answers + 1;}
}
</script>

<script type="text/javascript">
function selectType()
{
alert("HAHA I HATE YOU!");
var type=document.getElementById("myList").value;
if(type == "2" || type == "3"){
    document.getElementById("buttons").style.visibility="visible";
    document.getElementById("adda").style.visibility="visible";
    document.getElementById("regexes").style.visibility="hidden";
}
else if(type == "4"{
    document.getElementById("buttons").style.visibility="hidden";
    document.getElementById("adda").style.visibility="hidden";
    document.getElementById("regexes").style.visibility="visible";
}
else{
    document.getElementById("buttons").style.visibility="hidden";
    document.getElementById("adda").style.visibility="hidden";
    document.getElementById("regexes").style.visibility="hidden";
}}
</script> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-26T13:23:44.947

如果没有 jsfiddle，很难确定这是否是问题所在，但您在页面上的最后一个脚本中有语法错误。

```
else if(type == "4"{ 
```

添加右括号，看看是否有帮助。

# java - 基于正则表达式的拆分模式

> ID：11670224
> 
> 赞同：0
> 
> 时间：2012-07-26T13:20:16.263
> 
> 标签：java, regex, garbage-collection, matcher

我正在尝试编写一个程序来解析 Java 垃圾收集日志。我刚刚创建了一个与次要集合匹配的语法。一旦我确定了一个模式，我想把它解析成单独的标记。我的问题是，有没有什么优雅的方法可以用我之前定义的语法来做到这一点？

```
public class RegexTestHarness {
  private final static String REGEX_SMALL_COLLECTION = "\\d+\\.\\d+: \\[GC \\d+.\\d+: \\[ParNew: \\d+K\\-\\>0K\\(\\d+K\\), \\d+.\\d+ secs\\] \\d+K\\-\\>\\d+K\\(\\d+K\\), \\d+.\\d+ secs\\]";

  public static void main(String[] args){
    Pattern pattern = Pattern.compile(REGEX_SMALL_COLLECTION);           
    Matcher matcher = pattern.matcher("54.770: [GC 54.770: [ParNew: 5232768K->0K(5237824K), 1.1304192 secs] 5238622K->380448K(10480704K), 1.1306410 secs]");
    while (matcher.find()) {            
      System.out.println(matcher.group(0));
      System.out.println(matcher.start());
      System.out.println(matcher.end()); 
    }
  }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-26T13:33:12.997

您需要将组添加到您的正则表达式。

`private final static String REGEX_SMALL_COLLECTION = "(\\d+\\.\\d+): \\[GC (\\d+.\\d+): \\[ParNew: \\d+K\\-\\>0K\\(\\d+K\\), \\d+.\\d+ secs\\] \\d+K\\-\\>\\d+K\\(\\d+K\\), \\d+.\\d+ secs\\]";`

然后访问这些组的值。在上面的示例中，我在您想要的前两项周围添加了括号——这告诉正则表达式引擎捕获匹配的子字符串。您将需要添加更多。正如您目前所做的那样，您使用[`Matcher.group()`](http://docs.oracle.com/javase/7/docs/api/java/util/regex/Matcher.html#group%28int%29)来获取每个组。请注意，第 0 组始终是整场比赛。其余的从`1`上开始编号，按照它们的开头括号的顺序`(`。

# sql-server - 为什么此数据类型转换失败但没有失败？

> ID：11670226
> 
> 赞同：1
> 
> 时间：2012-07-26T13:20:19.970
> 
> 标签：sql-server, sqldatatypes, type-conversion

好吧，所以我正在为此绞尽脑汁......

这两个查询......虽然它们看起来相同......在某些方面显然不同。在 SQL Server Management Studio 中针对数据库运行时，顶部的会导致错误（从字符串转换为唯一标识符时转换失败。）而底部的运行得很好。关于为什么会这样的任何想法？

```
SELECT CONVERT(UNIQUEIDENTIFIER,'459B621C-A49A-49Cl-900F-AB14D61841E2');
SELECT CONVERT(UNIQUEIDENTIFIER,'459B621C-A49A-49C1-900F-AB14D61841E2'); 
```

会不会是字符编码问题？

谢谢

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-26T13:22:51.950

它们是有区别的。第一个使用 an `l`，第二个是`1`。

# eclipse - 在资源管理器窗口中以深色主题显示黑线

> ID：11670230
> 
> 赞同：1
> 
> 时间：2012-07-26T13:20:34.320
> 
> 标签：eclipse, aptana, aptana3

我喜欢在编程中使用深色主题。但我有错，资源管理器窗口（显示子文件夹）上的线条没有变成白色，看不到它们。

见图片：![在此处输入图像描述](../Images/11af5ea0537522def0bec94a64aea479.png)

如果我转向浅色主题，这是一张图片..你会看到这些线条： ![在此处输入图像描述](../Images/1de8dce2f6464487b5ef017185c5c3a6.png)

我能做些什么让所有的窗口都有深色背景，但线条较浅？

# string - SQL函数替换字符串中的多个字符

> ID：11670234
> 
> 赞同：0
> 
> 时间：2012-07-26T13:20:48.723
> 
> 标签：string, sql-server-2008, replace, while-loop

我正在编写一个 SQL Server 2008 用户定义函数来用另一个字符替换字符串的字符。我认为下面的代码应该可以工作，但事实并非如此。它似乎没有`@input`正确更新变量。

知道如何解决这个问题吗？

```
 DECLARE @Input AS VarChar(1000)
 DECLARE @i AS TinyInt
 DECLARE @Substring AS VarChar(1000)
 DECLARE @Prestring  AS VarChar(1000)
 DECLARE @Poststring  AS VarChar(1000)

 Select @Input='ABCDEFGHIJKLMNOPQRSTUVWXYZ123456789',
        @i = 1

 WHILE @i <= LEN(@Input) 
 BEGIN
    SELECT @Prestring = SUBSTRING(@Input,-1,@i)
    SELECT @Poststring = SUBSTRING(@Input,@i+1,LEN(@Input))    

    SELECT @Substring =  replace(replace(replace(replace(replace(replace(replace(replace(replace(replace(replace(replace(replace(replace(replace(replace
(replace(replace(replace(replace(replace(replace(replace(replace(replace(replace(replace(replace(replace(replace(replace(replace(replace(replace(replace
(SUBSTRING(@Input,@i,1), 'A', 'N'),'B', 'O'), 'C', 'P'), 'D', 'Q'), 'E', 'R'), 'F', 'S'), 'G', 'T'), 'H', 'U'), 'I', 'V'), 'J', 'W'), 'K', 'X'), 'L', 'Y'), 'M', 'Z'), 'N', 'A'), '0', 'B'), 'P', 'C')
, 'Q', 'D'),'R', 'E'),'S', 'E'),'T', 'E'),'U', 'F'),'V', 'G'),'W', 'H'),'X', 'I'),'Y', 'J'), '1', '9'),'2','8'),'3','7'),'4','6'),'5','5'),'6','4'),'7','3'),'8','2'),'9','1'),' ','')

    SELECT @Input = @Prestring + @Substring + @Poststring
    SELECT @i = @i + 1

    PRINT 'Prestring= ' + @Prestring PRINT 'SUBSTRING= ' + @Substring PRINT 'PostString= '     + @Poststring PRINT 'Total String: ' + @Prestring + ' + ' + @Substring + ' + ' + @Poststringenter code here

    PRINT 'END'

 END

Output:
Prestring= 
SUBSTRING= A
PostString= BCDEFGHIJKLMNOPQRSTUVWXYZ123456789
Total String:  + A + BCDEFGHIJKLMNOPQRSTUVWXYZ123456789
1
END

Prestring= A
SUBSTRING= O
PostString= CDEFGHIJKLMNOPQRSTUVWXYZ123456789
Total String: A + O + CDEFGHIJKLMNOPQRSTUVWXYZ123456789
2
END

Prestring= AO
SUBSTRING= C
PostString= DEFGHIJKLMNOPQRSTUVWXYZ123456789
Total String: AO + C + DEFGHIJKLMNOPQRSTUVWXYZ123456789
3
END

Prestring= AOC
SUBSTRING= D
PostString= EFGHIJKLMNOPQRSTUVWXYZ123456789
Total String: AOC + D + EFGHIJKLMNOPQRSTUVWXYZ123456789
4
END

...... 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-26T14:45:21.187

这是另一种双向工作的方式：

```
declare @input nvarchar(max) = N'ABCDEFGHIJKLMNOPQRSTUVWXYZ123456789'
    , @output nvarchar(max) = N''
    , @i int = 1

while @i <= len(@input) begin
    declare @unicode int = unicode(substring(@input, @i, 1))
    select @output = @output + nchar(
            case
                when @unicode between 65 and 77 then @unicode + 13
                when @unicode between 78 and 90 then @unicode - 13
                when @unicode between 49 and 57 then 106 - @unicode
                else @unicode
            end
        )
        , @i = @i + 1
end

select @input as VerySimpleCipher
union all
select @output 
```

如果您要执行更多条件，我可能会使用表变量作为地图。您可能想要添加对小写字母、零、空值等的处理。此外，我会警告不要将其用作某种类型的密码，而不是为了好玩。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-26T13:35:13.103

重新检查您的转化。

您转换 C->P，然后稍后替换将其更新为 P->C。

每个替换都是从最里面的调用开始的。您应该将它们分解为一个函数，并在它第一次匹配某些内容时返回。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-26T13:36:50.150

这应该让你开始......

```
-- A should return N
select dbo.ConvertChars('A');
-- B should return O
select dbo.ConvertChars('B');

--create function dbo.ConvertChars(@input char(1))
alter function dbo.ConvertChars(@input char(1))
returns char(1)
begin

    IF @input='A' return 'N';   
    IF @input='B' return 'O';

    return '';

end 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-26T13:58:03.947

我没有对此进行测试，但它会从上面的代码中继续。它至少应该让您了解如何做到这一点。

```
create function dbo.ConvertCharString(@input varchar(1000))
returns varchar(1000)
begin
declare @id int
declare @len int
declare @c vhar(1)
declare @return varchar(1000)
        SET @idx = 0
        SELECT @idx = CHARINDEX(@delimiter, @str)
        SELECT @len = len(@input)

        -- loop through delimiter sep. list until no more comma's found i.e. charindex returns 0
        while  (@idx <= @len)
        begin
            set @c = substring(@input, @idx, 1)
            select @return = @return + dbo.ConvertChars(@c)
            select @idx = @idx-1
        end

end 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-26T17:07:34.873

请看下面我的答案！多亏了所有人，这对我来说比应该的要难！

创建函数 dbo.Translate(@Input varchar(1000)) RETURNS VARCHAR (1000) BEGIN

```
DECLARE @i AS Int
Declare @SingleChar_Offset AS VarChar(1000)
Declare @Output AS VarChar(1000)
DECLARE @Unicode_Offset AS Int
DECLARE @UnicodeChar AS Int

SELECT @i = 1
Select @Output = ''

WHILE @i <= LEN(@Input) 
BEGIN
  Select @UnicodeChar = unicode(substring(@Input, @i, 1))

    IF @UnicodeChar <=52
      BEGIN
            Select @Unicode_Offset = @UnicodeChar+5
      END
  ELSE IF @UnicodeChar >52 AND @UnicodeChar <=57
      BEGIN
            Select @Unicode_Offset = @UnicodeChar-5
      END

  IF @UnicodeChar >= 65 AND @UnicodeChar <=77
      BEGIN
            Select @Unicode_Offset = @UnicodeChar+13
      END
  ELSE IF @UnicodeChar > 77
      BEGIN
            Select @Unicode_Offset = @UnicodeChar-13
      END

  Select @SingleChar_Offset = CHAR(@Unicode_Offset)
  SELECT @i = @i + 1   
  --PRINT @SingleChar_Offset
     Select @Output = @Output + @SingleChar_Offset
-- print 'END
-- '

END

--PRINT @Output

RETURN @Output

END 
```

# android - Android OpenGL ES 中的图像

> ID：11670237
> 
> 赞同：0
> 
> 时间：2012-07-26T13:21:03.973
> 
> 标签：android, bitmap

我想知道`bitmap`我们在这里得到的输出的数据结构是什么：

```
Bitmap bitmap = BitmapFactory.decodeResource(context.getResources(), R.drawable.mypngimage); 
```

# asp.net-mvc-3 - 是否可以在带有布局的 asp .net mvc 项目中使用 ajax 渲染正文？

> ID：11670243
> 
> 赞同：0
> 
> 时间：2012-07-26T13:21:17.230
> 
> 标签：asp.net-mvc-3

是否可以在带有布局的 asp .net mvc 项目中使用 ajax 渲染正文？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-26T13:23:40.653

是的，这是可能的，但它没有任何意义，因为它会导致完全损坏和无效的标记。你最终会得到一个像 Quazimodo 这样的 2 头和 2 身体的野兽。请求查看 AJAX 的操作通常应该只返回部分视图，而不是带有布局的完整视图。或者，如果您属于某个节省带宽的团体，您可以让您的操作返回 JSON，然后使用客户端模板框架来布置标记。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-26T13:27:00.890

RenderBody 用于页面回发以呈现一个新的 HTML 文档，其中包含来自服务器的数据，该数据已使用 Razor 模板引擎进行了注释。AJAX 用于从服务器异步检索数据（通常采用 JSON 格式）。AJAX 请求可用于检索与 RenderBody() 相同的数据，但它没有多大意义，也不是最佳实践。

# blackberry - HttpConnection 连接移动网络或 3G

> ID：11670246
> 
> 赞同：1
> 
> 时间：2012-07-26T13:21:25.707
> 
> 标签：blackberry, network-connection

当我在使用 WiFi 的设备上运行此应用程序时，它工作正常。但是当我使用移动网络或 3g 时，它会出错。它不适用于移动网络。

我正在使用这段代码：

```
connection = (HttpConnection) Connector.open(APIURL+ updateConnectionSuffix()); 
```

还有我的 ConnectionTools 类代码：

```
public String updateConnectionSuffix() {
    String connSuffix;
    if (DeviceInfo.isSimulator()) {
        connSuffix = ";deviceside=true";
    } else if ((WLANInfo.getWLANState() == WLANInfo.WLAN_STATE_CONNECTED)
            && RadioInfo.areWAFsSupported(RadioInfo.WAF_WLAN)) {
        connSuffix = ";interface=wifi";
    } else {
        String uid = null;
        ServiceBook sb = ServiceBook.getSB();
        ServiceRecord[] records = sb.findRecordsByCid("WPTCP");
        for (int i = 0; i < records.length; i++) {
            if (records[i].isValid() && !records[i].isDisabled()) {
                if (records[i].getUid() != null
                        && records[i].getUid().length() != 0) {
                    if ((records[i].getCid().toLowerCase().indexOf("wptcp") != -1)
                            && (records[i].getUid().toLowerCase().indexOf(
                                    "wifi") == -1)
                            && (records[i].getUid().toLowerCase().indexOf(
                                    "mms") == -1)) {
                        uid = records[i].getUid();
                        break;
                    }
                }
            }
        }
        if (uid != null) {
            // WAP2 Connection
            connSuffix = ";ConnectionUID=" + uid;
        } else {
            connSuffix = ";deviceside=true";
        }
    }
    return connSuffix;
} 
```

你能给我任何解决方案吗？

我们应该为移动网络或3g做些什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-30T15:37:02.337

试试这个代码。

```
public static String getConnectionString() {

    String connectionString = null;

    // Simulator behaviour is controlled by the USE_MDS_IN_SIMULATOR
    // variable.
    if (DeviceInfo.isSimulator()) {

        connectionString = ";deviceside=true";
    }

    // Wifi is the preferred transmission method
    else if (WLANInfo.getWLANState() == WLANInfo.WLAN_STATE_CONNECTED) {

        connectionString = ";interface=wifi";
    }

    // Is the carrier network the only way to connect?
    else if ((CoverageInfo.getCoverageStatus() & CoverageInfo.COVERAGE_DIRECT) == CoverageInfo.COVERAGE_DIRECT) {

        String carrierUid = getCarrierBIBSUid();

        if (carrierUid == null) {
            // Has carrier coverage, but not BIBS. So use the carrier's TCP
            // network

            connectionString = ";deviceside=true";
        } else {
            // otherwise, use the Uid to construct a valid carrier BIBS
            // request

            connectionString = ";deviceside=false;connectionUID="+carrierUid + ";ConnectionType=mds-public";
        }
    }

    // Check for an MDS connection instead (BlackBerry Enterprise Server)
    else if ((CoverageInfo.getCoverageStatus() & CoverageInfo.COVERAGE_MDS) == CoverageInfo.COVERAGE_MDS) {

        connectionString = ";deviceside=false";
    }

    // If there is no connection available abort to avoid hassling the user
    // unnecssarily.
    else if (CoverageInfo.getCoverageStatus() == CoverageInfo.COVERAGE_NONE) {
        connectionString = "none";

    }

    // In theory, all bases are covered by now so this shouldn't be reachable.But hey, just in case ...
    else {

        connectionString = ";deviceside=true";
    }

    return connectionString;
}

/**
 * Looks through the phone's service book for a carrier provided BIBS
 * network
 * 
 * @return The uid used to connect to that network.
 */
private synchronized static String getCarrierBIBSUid() {
    ServiceRecord[] records = ServiceBook.getSB().getRecords();
    int currentRecord;

    for (currentRecord = 0; currentRecord < records.length; currentRecord++) {
        if (records[currentRecord].getCid().toLowerCase().equals("ippp")) {
            if (records[currentRecord].getName().toLowerCase()
                    .indexOf("bibs") >= 0) {
                return records[currentRecord].getUid();
            }
        }
    }

    return null;
} 
```

用您的 updateConnectionSuffix() 替换此函数。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-27T12:52:50.593

让我解释一下： - 这是使用移动网络 2g 或 3g 任何网络连接”只需复制粘贴即可享受

**字符串 url = "vm.b24esolution.com:9090";**

**最终 HttpConnection 连接 = (HttpConnection) Connector.open("socket://"+url+updateConnectionSuffix()+";apn=rim.net.gprs;tunnelauthusername =;tunnelauthpassword=",Connector.READ_WRITE);**

# c# - 强制 ListCollectionView 中的组为第一组

> ID：11670248
> 
> 赞同：3
> 
> 时间：2012-07-26T13:21:39.403
> 
> 标签：c#, wpf

我使用 ListCollectionView 作为选项卡控件的数据上下文。我已经基于枚举向它添加了一个 GroupDescription，我希望一个特定的组显示为选项卡控件中的第一个选项卡，但是现在它总是放在底部。

```
Profiles = new ListCollectionView(_profiles);
        Profiles.GroupDescriptions.Add(new PropertyGroupDescription("ProfileType"));
        Profiles.SortDescriptions.Add(new SortDescription("ProfileName", ListSortDirection.Ascending)); 
```

_profiles 是我的个人资料 ViewModels 的 ObservableCollection。

我的枚举看起来像：

```
public enum ProfileTypeEnum
    {
        CurrentSettings,
        CustomSettings,
        DefaultSettings
    } 
```

那么我怎样才能强制 CurrentSettings 组总是第一个呢？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-26T13:43:27.167

尝试使用辅助属性：

```
public class Item
{
    public ProfileTypeEnum ProfileType { get; set; }
    public string ProfileName { get; set; }
    public int ProfileTypeValue { get { return (int)ProfileType; } }
} 
```

给枚举赋值：

```
public enum ProfileTypeEnum
{
    CurrentSettings=0,
    CustomSettings=1,
    DefaultSettings=2
} 
```

并添加排序描述：

```
Profiles.SortDescriptions.Add(new SortDescription("ProfileTypeValue", ListSortDirection.Ascending));
Profiles.SortDescriptions.Add(new SortDescription("ProfileName", ListSortDirection.Ascending)); 
```

通过这种方式，您可以使用枚举的值来改变顺序并强制一个在上面。

# c# - 从 C# 调用 Exchange 命令行管理程序

> ID：11670249
> 
> 赞同：2
> 
> 时间：2012-07-26T13:21:42.227
> 
> 标签：c#, powershell, exchange-server

我目前正在使用 .NET 3.5 / C# 开发执行自动化 Exchange 操作的 Windows 服务。该服务基本上监视 SQL 数据库以执行操作，然后生成 PowerShell 并重定向输出，以便可以从位于其他地方的 UI 监视结果。下面是我用来调用该过程的代码...

```
Action<object, DataReceivedEventArgs> DataReceived = (sender, data) =>
{
    // Log data in SQL
};
System.Diagnostics.Process p = new System.Diagnostics.Process();
p.StartInfo.FileName = "powershell.exe"
p.StartInfo.Arguments = arguments;

// Arguments are (they're coming from SQL, didn't feel like escaping everything just for this example)
// -command ". 'C:\Program Files\Microsoft\Exchange Server\V14\bin\RemoteExchange.ps1'; Connect-ExchangeServer -auto; Get-Mailbox –ResultSize unlimited | Search-Mailbox -SearchQuery ... stuff ...

p.StartInfo.LoadUserProfile = true;           
p.StartInfo.RedirectStandardOutput = true;
p.StartInfo.RedirectStandardInput = true;
p.StartInfo.UseShellExecute = false;
p.StartInfo.CreateNoWindow = true;
p.OutputDataReceived += new DataReceivedEventHandler(DataReceived);
p.Start(); 
```

这段代码可以执行诸如运行 ping、tracert、nslookup、echo、dir 以及所有常见的命令行嫌疑人之类的操作，其行为与我在命令提示符中键入它时的行为相同。例如，我可以将上面的内容复制粘贴到“运行”框中，它会完美运行。但是，每当我尝试按上述方式运行它时，我都会收到以下信息：

```
Get-ItemProperty : Cannot find path 'HKLM:\SOFTWARE\Microsoft\ExchangeServer\v14\Setup' because it does not exist.
At C:\Program Files\Microsoft\Exchange Server\V14\bin\RemoteExchange.ps1:46 char:34
+ $global:exbin = (get-itemproperty <<<<  HKLM:\SOFTWARE\Microsoft\ExchangeServer\v14\Setup).MsiInstallPath + "bin\"
    + CategoryInfo          : ObjectNotFound: (HKLM:\SOFTWARE\...erver\v14\Setup:String) [Get-ItemProperty], ItemNotFo 
    undException
    + FullyQualifiedErrorId : PathNotFound,Microsoft.PowerShell.Commands.GetItemPropertyCommand

Get-ItemProperty : Cannot find path 'HKLM:\SOFTWARE\Microsoft\ExchangeServer\v14\Setup' because it does not exist.
At C:\Program Files\Microsoft\Exchange Server\V14\bin\RemoteExchange.ps1:47 char:38
+ $global:exinstall = (get-itemproperty <<<<  HKLM:\SOFTWARE\Microsoft\ExchangeServer\v14\Setup).MsiInstallPath
    + CategoryInfo          : ObjectNotFound: (HKLM:\SOFTWARE\...erver\v14\Setup:String) [Get-ItemProperty], ItemNotFo 
    undException
    + FullyQualifiedErrorId : PathNotFound,Microsoft.PowerShell.Commands.GetItemPropertyCommand

Get-ItemProperty : Cannot find path 'HKLM:\SOFTWARE\Microsoft\ExchangeServer\v14\Setup' because it does not exist.
At C:\Program Files\Microsoft\Exchange Server\V14\bin\RemoteExchange.ps1:48 char:38
+ $global:exscripts = (get-itemproperty <<<<  HKLM:\SOFTWARE\Microsoft\ExchangeServer\v14\Setup).MsiInstallPath + "scri
pts\"
    + CategoryInfo          : ObjectNotFound: (HKLM:\SOFTWARE\...erver\v14\Setup:String) [Get-ItemProperty], ItemNotFo 
    undException
    + FullyQualifiedErrorId : PathNotFound,Microsoft.PowerShell.Commands.GetItemPropertyCommand

The term 'bin\CommonConnectFunctions.ps1' is not recognized as the name of a cmdlet, function, script file, or operable
    program. Check the spelling of the name, or if a path was included, verify that the path is correct and try again.
At C:\Program Files\Microsoft\Exchange Server\V14\bin\RemoteExchange.ps1:52 char:2
+ . <<<<  $global:exbin"CommonConnectFunctions.ps1"
    + CategoryInfo          : ObjectNotFound: (bin\CommonConnectFunctions.ps1:String) [], CommandNotFoundException
    + FullyQualifiedErrorId : CommandNotFoundException 
```

在此之后会出现大量其他错误，但通过查看 RemoteExchange PowerShell 脚本，我确定这一切都归结为前三个错误：无法从注册表中读取。有谁知道为什么会发生这种情况？

我试图让它工作的事情：

*   在控制台应用程序中运行此代码，而不是在服务上下文中。
*   每次我运行它时，我都是作为域和 Exchange 管理员这样做的，但我从来没有收到过 UAC 提示，所以我怀疑问题是凭据之一
*   检查注册表项...它正在查看的 HKLM 密钥也具有授予所有人的完全读取权限
*   我在服务器上启用了未签名的 PowerShell 脚本执行
*   将命令放入 PowerShell 脚本并以编程方式调用它
*   将注册表项的值硬编码到 PowerShell 脚本中（这只是给了我另一组注册表读取错误进一步向下行）
*   在进程上使用 ShellExecute（这不能通过输出重定向来完成，我需要）
*   在 StartInfo 上显式设置环境变量以匹配生成环境中的环境变量

感谢任何可以帮助我的人...谢谢十亿！

***编辑：也许我应该澄清硬编码位。我已经破解了打开 RemoteExchange.ps1 并将出错的变量设置为正确的值（而不是使用 GetProperty 或其他），我稍微走得更远：

```
Exception calling "TryLoadExchangeTypes" with "2" argument(s): "Unable to determine the installed file version from the
 registry key 'HKEY_LOCAL_MACHINE\SOFTWARE\Microsoft\ExchangeServer\v14\Setup'."
At C:\Program Files\Microsoft\Exchange Server\V14\bin\RemoteExchange.ps1:79 char:92
+ $typeLoadResult = [Microsoft.Exchange.Configuration.Tasks.TaskHelper]::TryLoadExchangeTypes <<<< ($ManagementPath, $t
ypeListToCheck)
    + CategoryInfo          : NotSpecified: (:) [], MethodInvocationException
    + FullyQualifiedErrorId : DotNetMethodException 
```

根据我从 79 的样子推测，这不是我可以改变的。它正在尝试从库中加载类型，为此它仍然需要查看注册表，所以我不能只修复一个变量。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-16T19:42:52.177

只需尝试在 x64 中编译您的程序。

我知道这很奇怪，但是在 x86 托管的 powershell 中，一些 cmdlet 看不到 x64 程序的注册表项。

（我的线索来自：“其中一个与另一个不同 | 可怕的 DBA 之家”：[http ://www.scarydba.com/2010/06/30/one-of-these-things-is -not-like-the-other/](http://www.scarydba.com/2010/06/30/one-of-these-things-is-not-like-the-other/) )

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-18T20:57:52.937

有同样的问题，实际上终于弄清楚了。我之前的回答是完全错误的。

[我在这里](https://stackoverflow.com/questions/13266159/how-can-i-run-command-in-microsoft-exchange-server-powershell-through-python-scr)回答正确。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-26T14:42:44.347

您可以打开位于 \bin 中的 Exchange.ps1，然后编辑出现在下面的变量

```
## EXCHANGE VARIABLEs ######################################################## 
```

将 $global:exbin、$global:exinstall 和 $global:exscripts 更改为硬编码路径

```
"C:\Program Files\Microsoft\Exchange Server\V14\bin\"
"C:\Program Files\Microsoft\Exchange Server\V14\"
"C:\Program Files\Microsoft\Exchange Server\V14\scripts\" 
```

这不是一个理想的解决方案，但解决方法不应影响调用这些变量的任何其他内容。

# sql-server - 无法从存储过程中获取返回值（0 或 1）。？

> ID：11670252
> 
> 赞同：2
> 
> 时间：2012-07-26T13:21:46.897
> 
> 标签：sql-server, c#-4.0, stored-procedures

我从如下存储过程中返回 0 和 1。如何在 c# asp.net 文件中获取它？

```
ALTER procedure [dbo].[crudprocedure] 

    @getusername        varchar(20),
    @getfirstname       varchar(20),
    @getlastname        varchar(20),
    @getaddress         varchar(20)
 as 
 begin
IF not exists (select username from crudtable where username=@getusername)
begin 
insert into crudtable(username,firstname,lastname,address) 
values (@getusername,@getfirstname,@getlastname,@getaddress)
return 0
end
else
return 1
end 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-26T13:32:49.517

如果您使用的是 SQL Server - 请在此处尝试此代码：

```
using (SqlConnection conn = new SqlConnection("...put your connection string here..."))
using (SqlCommand cmd = new SqlCommand("dbo.crudprocedure", conn))
{
   cmd.CommandType = CommandType.StoredProcedure;

   cmd.Parameters.Add("@getusername", SqlDbType.VarChar, 20).Value = "test";
   cmd.Parameters.Add("@getfirstname", SqlDbType.VarChar, 20).Value = "test";
   cmd.Parameters.Add("@getlastname", SqlDbType.VarChar, 20).Value = "test";
   cmd.Parameters.Add("@getaddress", SqlDbType.VarChar, 20).Value = "test";

   // define additional paramter of Direction = ReturnValue
   cmd.Parameters.Add("RETURN_VALUE", SqlDbType.Int).Direction = ParameterDirection.ReturnValue;

   // open connection, execute stored proc, close connection
   conn.Open();
   cmd.ExecuteNonQuery();
   conn.Close();

   // fetch the value of the "ReturnValue" parameter
   int returnValueInt = Convert.ToInt32(cmd.Parameters["RETURN_VALUE"].Value);
} 
```

基本上，由于您使用`RETURN 1`存储过程发回该值，因此您需要向`SqlCommand`具有`.Direction`of的对象添加一个附加参数`ParameterDirection.ReturnValue`。

该参数将设置为您使用从存储过程发回的值`RETURN ....`

# c# - 在 C# 中运行 R

> ID：11670253
> 
> 赞同：-1
> 
> 时间：2012-07-26T13:21:50.697
> 
> 标签：c#, .net, r

> **可能重复：**
> [从 .net 调用 R（编程语言）](https://stackoverflow.com/questions/5025340/call-r-programming-language-from-net)

有没有办法在不安装 R 本身的情况下从 C# 代码中运行 R？我现在正在尝试使用 R.NET，看来它需要安装 R。我想要的是我可以引用 R dll 而不用任何设置安装 R 的东西。谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-26T13:40:52.913

R.NET 不只是取代 R。它充当 C# 代码和 R 之间的接口（即在本地仍需要 R）。你看过[Rapache](http://rapache.net/)吗？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-26T13:23:36.463

要在 C# 中执行此操作，您需要使用 shell (R CMD BATCH myRprogram.R)

一定要像这样的 pdf(file="myoutput.pdf") plot (x,y) dev.off() 或图像包装器来包装你的图。

# asp.net-mvc - 为什么远程服务器返回错误：(400) Bad Request.?

> ID：11670254
> 
> 赞同：0
> 
> 时间：2012-07-26T13:21:59.300
> 
> 标签：asp.net-mvc, wcf, c#-4.0, rest

我第一次尝试实现 Restful WCF 服务，但无法将其发布到我的对象 :( 它在客户端代码中崩溃（见下文）。有什么解决方法？？谢谢

部分 web.config

```
<system.serviceModel>
    <services>
      <service name="MyRest.Service1" behaviorConfiguration="ServBehave">
        <!--Endpoint for REST-->
        <endpoint address="XMLService" binding="webHttpBinding" behaviorConfiguration="restPoxBehavior" contract="MyRest.IService1" />
      </service>
    </services>
    <behaviors>
      <serviceBehaviors>
        <behavior name="ServBehave">
          <!-- To avoid disclosing metadata information, set the value below to false and remove the metadata endpoint above before deployment -->
          <serviceMetadata httpGetEnabled="true" />
          <!-- To receive exception details in faults for debugging purposes, set the value below to true.  Set to false before deployment to avoid disclosing exception information -->
          <serviceDebug includeExceptionDetailInFaults="false" />
        </behavior>
      </serviceBehaviors>
      <endpointBehaviors>
        <!--Behavior for the REST endpoint for Help enability-->
        <behavior name="restPoxBehavior">
          <webHttp helpEnabled="true" />
        </behavior>
      </endpointBehaviors>
    </behaviors>
    <serviceHostingEnvironment aspNetCompatibilityEnabled="true" multipleSiteBindingsEnabled="true" />
  </system.serviceModel> 
```

客户端代码：

```
 public string ClientStuff()
        {
            var ServiceUrl = "http://localhost/MyRest/Service1.svc/XMLService/";
            var empserializer = new DataContractSerializer(typeof(MyRest.Employee));
            var url = new Uri(ServiceUrl + "PostEmp");
            var request = (HttpWebRequest)WebRequest.Create(url);
            request.Method = "POST";
            request.ContentType = "application/XML";
            var emp = new MyRest.Employee { DeptName = "sale", EmpName = "ted", EmpNo = 11112 };
            using (var requeststream = request.GetRequestStream())
            {
                empserializer.WriteObject(requeststream, emp);
            }
            var response = (HttpWebResponse)request.GetResponse();// crashes here with error in title
            var statuscode = response.StatusCode;
            return statuscode.ToString();
        } 
```

服务1.svc.cs

```
 public bool PostEmp(Employee employee)
        {
            //something
            return true;
        } 
```

服务合约

```
[ServiceContract]
public interface IService1
{
    [OperationContract]
    [WebInvoke(Method = "POST", UriTemplate = "/PostEmp", RequestFormat = WebMessageFormat.Json, ResponseFormat = WebMessageFormat.Json)]
    bool PostEmp(Employee employee);

    // TODO: Add your service operations here
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-26T13:47:39.153

有几件事你应该解决。第一个当然是使用正确的内容类型标头，没有这样的东西`application/XML`：

```
request.ContentType = "text/xml"; 
```

另一个更重要的事情是确保您`Employee`在服务器和客户端中引用完全相同的类，否则客户端数据协定序列化程序将在 XML 中发出不同的命名空间，从而导致服务器崩溃。基本上，此类`Employee`应在服务器和客户端应用程序之间的共享类库中声明。

顺便说一句，将来您可以更轻松地自己调试此类问题，而不是在这里发布问题，只需在您的服务端[启用跟踪：](http://msdn.microsoft.com/en-us/library/ms733025.aspx)

```
<system.diagnostics>
    <sources>
        <source name="System.ServiceModel" 
                switchValue="Information, ActivityTracing"
                propagateActivity="true">
            <listeners>
                <add name="traceListener" 
                     type="System.Diagnostics.XmlWriterTraceListener" 
                     initializeData= "c:\log\Traces.svclog" />
            </listeners>
        </source>
    </sources>
</system.diagnostics> 
```

然后使用内置于 .NET SDK 跟踪查看器 ( [SvcTraceViewer.exe](http://msdn.microsoft.com/en-us/library/ms732023.aspx) ) 来简单地加载生成的日志文件，所有内容都将通过 GUI 显示和解释给您（看起来像是来自 90 年代，但确实有效） .

啊，顺便说一句，您可能需要通过从 web.config 中删除以下行来禁用 ASP.NET 兼容性：

```
<serviceHostingEnvironment aspNetCompatibilityEnabled="true" multipleSiteBindingsEnabled="true" /> 
```

我不是 100% 确定，但 IIRC 这对于启用 REST 的服务是必要的（尽管在这个服务上可能是错误的）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-01-14T15:57:06.947

非常感谢，花了几天之后，现在我可以使用以下代码得到正确的响应：

```
 var ServiceUrl = "http://localhost/MyRest/Service1.svc/XMLService/";
            var empserializer = new DataContractSerializer(typeof(MyRest.Employee));
            var url = new Uri(ServiceUrl + "PostEmp");
            var request = (HttpWebRequest)WebRequest.Create(url);
            request.Method = "POST";
            request.ContentType = "application/XML";
            var emp = new MyRest.Employee { DeptName = "sale", EmpName = "ted", EmpNo = 11112 };
            using (var requeststream = request.GetRequestStream())
            {
                empserializer.WriteObject(requeststream, emp);
            }
            var response = (HttpWebResponse)request.GetResponse();// crashes here with error in title
            var statuscode = response.StatusCode;
            return statuscode.ToString(); 
```

在代码行下面添加此附加：

```
 StreamReader reader = new StreamReader(response.GetResponseStream());
 string ResponseMessage = reader.ReadToEnd(); 
```

# android - android 应用程序在哪里选择要使用的可绘制文件夹

> ID：11670255
> 
> 赞同：1
> 
> 时间：2012-07-26T13:22:02.710
> 
> 标签：android, android-layout, mdpi

我的设备和 Google nexus 都有 320 dpi 显示，但是当我为 Nexus 构建相同的源代码（VideoEditor 应用程序）时，它会从 xhdpi 文件夹中选择图标，而当我为我的设备构建它时，它会选择 mdpi 文件夹。

谁能告诉为什么会这样？究竟在源代码中的哪个位置做出了图标集选择的决定？

此外，当为特定设备构建应用程序时，它使用的所有配置文件是什么？bcoz 相同的源代码在为两种设备构建时给出不同的结果（尽管具有相同的 dpi）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-26T13:24:54.603

每个手机都从与其硬件规格相关的可绘制文件夹中挑选所需的资源。

如果您的设备选择 m-dpi，那么您设备的制造商已决定 m-dpi 最适合该手机。

选择它的源代码不是您应用程序的一部分，Android 系统本身会在运行时自动执行此操作，我们的开发人员无法控制它。

# c - 为 C 代码生成调用图

> ID：11670260
> 
> 赞同：8
> 
> 时间：2012-07-26T13:22:14.890
> 
> 标签：c, parsing, clang, doxygen, call-graph

我正在编写一个工具，我需要为一些 C 项目生成调用图。我能够使用 clang 生成一个文件的调用图，但我无法找出如何在包含数十个头文件和源文件的整个项目中生成调用图。

任何可以将调用图生成到可以解析的文件的工具都可以。一个可用的库会更好。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-26T15:05:06.803

另外值得一提的是，优秀的[GNU cflow](http://www.gnu.org/software/cflow/)：

> GNU cflow 分析一组 C 源文件并打印一个图表，绘制程序内的控制流图表。
> 
> GNU cflow 能够为 C 源代码生成直接流程图和反向流程图。可以选择生成交叉引用列表。实现了两种输出格式：POSIX 和 GNU（扩展）。
> 
> 输入文件可以选择在分析之前进行预处理。

**编辑**
至于图书馆请求。您可能想“调整”`output.c`而不是打印对数据做其他事情。内部流程被组织成输出处理程序，所以我认为编写自己的处理程序已经可以解决问题。虽然它不是开箱即用的。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-26T14:56:00.697

*将我的评论变成答案。*

您可以使用脚本查看程序集输出和处理。假设 gcc 在 linux 上，您将`-S`标志传递给`gcc`并使用以下内容处理结果：

```
perl -ne '/^([^. \t#].*):/ and $f=$1;/call\s+([^*]\S*)/ and print "$f -> $1\n";' *.S 
```

这将为每个静态调用提供一行，包含调用和被调用的函数。您可以在其周围添加一些样板并将结果提供给`dot`，或者您想用它做的任何事情。

您也可以省略正则表达式的“不得以星号开头”部分，以获得间接调用的一些指示。您仍然无法确定此时将调用*哪些*函数，但至少您会知道还有更多需要了解的东西。

# jquery - 使用 jQuery 在 SVG 路径上制作动画的自定义时间

> ID：11670264
> 
> 赞同：1
> 
> 时间：2012-07-26T13:22:31.633
> 
> 标签：jquery, animation, svg

我正在使用@phrogz (http://phrogz.net/SVG/animation_on_a_curve.html) 完成的这个库

我做了一些更改，所以我可以放置自己的 SVG 路径而不是贝塞尔点，所以我的代码如下所示：

```
function CurveAnimator(from) {
    this.path = document.createElementNS('http://www.w3.org/2000/svg', 'path');
    this.path.setAttribute('d',from);
     this.updatePath();
    CurveAnimator.lastCreated = this;

}
CurveAnimator.prototype.animate = function(duration, callback, delay) {
    var curveAnim = this;
    // TODO: Use requestAnimationFrame if a delay isn't passed
    if (!delay) delay = 1 / 40;
    clearInterval(curveAnim.animTimer);
    var startTime = new Date;
    curveAnim.animTimer = setInterval(function() {
        var now = new Date;
        var elapsed = (now - startTime) / 1000;
        var percent = elapsed / duration;
        if (percent >= 1) {
            percent = 1;
            clearInterval(curveAnim.animTimer);
        }
        var p1 = curveAnim.pointAt(percent - 0.01),
            p2 = curveAnim.pointAt(percent + 0.01);
        callback(curveAnim.pointAt(percent), Math.atan2(p2.y - p1.y, p2.x - p1.x) * 180 / Math.PI);
    }, delay * 1000);
};
CurveAnimator.prototype.stop = function() {
    clearInterval(this.animTimer);
};
CurveAnimator.prototype.pointAt = function(percent) {
    return this.path.getPointAtLength(this.len * percent);
};
CurveAnimator.prototype.updatePath = function() {
    this.len = this.path.getTotalLength();
};
CurveAnimator.prototype.setStart = function(x, y) {
    var M = this.path.pathSegList.getItem(0);
    M.x = x;
    M.y = y;
    this.updatePath();
    return this;
};
CurveAnimator.prototype.setEnd = function(x, y) {
    var C = this.path.pathSegList.getItem(1);
    C.x = x;
    C.y = y;
    this.updatePath();
    return this;
};
CurveAnimator.prototype.setStartDirection = function(x, y) {
    var C = this.path.pathSegList.getItem(1);
    C.x1 = x;
    C.y1 = y;
    this.updatePath();
    return this;
};
CurveAnimator.prototype.setEndDirection = function(x, y) {
    var C = this.path.pathSegList.getItem(1);
    C.x2 = x;
    C.y2 = y;
    this.updatePath();
    return this;
}; 
```

和：

```
 //animate
      var curve = new CurveAnimator('M174.067 130.431c0.552189,2.06787 258.914,-17.0323 343.662,119.608 86.3697,139.256 202.539,214.796 301.269,236.977 0.998363,0.224221 1.99474,0.443339 2.9897,0.656504');

    var o = document.getElementById('plane');
    o.style.position = 'relative';

    curve.animate(25, function(point,angle){
      o.style.left = point.x+"px";
      o.style.top  = point.y+"px";
      o.style.transform =
        o.style.webkitTransform =
        o.style.MozTransform =
        "rotate("+angle+"deg)";
    }); 
```

所以在这里我想为路径的不同部分自定义时间，我想对某些部分更快，对其他部分更慢，这是我可以为整个动画设置持续时间的地方：

```
 curve.animate(25, 
```

我正在考虑将路径分成更小的路径，以便我可以调整每个部分的时间，对此的任何建议将不胜感激。

谢谢。

# html - 在点击返回按钮时重新加载页面

> ID：11670269
> 
> 赞同：0
> 
> 时间：2012-07-26T13:22:42.200
> 
> 标签：html, xml, session, struts2

我正在为我的项目使用 Struts2。从事简单的注册项目。当用户 Login 时，他被定向到他的个人资料，但点击浏览器的后退按钮登录页面再次出现。XML:

```
<action name="home" class="bharat.Home">
            <result name="success">/jsp/home.jsp</result>
             <result name="student">/jsp/Welcome.jsp</result>
</action>
<action name="Login" class="bharat.LoginAction">
            <result name="input">/index.jsp</result>
            <result name="success">/jsp/Welcome.jsp</result>
</action> 
```

主页.java：

```
public String execute() {
           if((String)ActionContext.getContext().getSession().get("studentName")!=null)
        {
            return "student";
        }
        if((String) ActionContext.getContext().getSession().get("instructorName")!=null)
        {
            return "instructor";
        }
        session = ActionContext.getContext().getSession();
        session.put("roleName","notAdmin");
        return SUCCESS;
    } 
```

主页.jsp

```
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1">
<meta name="cache-control" content="no-cache" />
<meta name="expires" content="0" />
<meta name="pragma" content="no-cache" />
    <sx:head/> 
```

我希望当用户在登录后点击返回按钮时，他必须被重定向回同一页面。任何人都可以帮助我吗..

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-26T13:28:15.977

我了解当前流程如下所示：

> 用户连接到 URL -> 在登录页面上提供登录 -> 加载第一页

您是否考虑将流程更改为以下内容：

> 用户连接到 URL -> 在登录页面上提供登录信息 -> 转到具有自动重定向到第一页的页面 -> 加载第一页。

这样，当用户从“第一页”返回按钮时，它将获得重定向页面并自动返回“第一页”。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-26T13:33:58.270

您可以使用 post 和 redirect 方法，当用户登录时，他/她应该被重定向到欢迎页面。如果您看到银行站点或任何其他安全站点，他们已经部署了相同的机制，并且运行良好。

其次，我建议不要玩，`ActionContext`因为 Struts2 为您提供了一种更简洁灵活的`SessionAware`接口实现方式，通过实现这一点，您的 Action 不受底层框架依赖且易于测试

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-07-27T01:46:55.247

```
<script type="text/javascript">
    function fn()
        {   
                 window.open("WelcomeDirect.action","_self");               
        }
</script>
</head>
<body onLoad="fn()">
Reloading.....
</body> 
```

重定向页面

# javascript - Javascript 鼠标悬停音频未在 Safari 中播放

> ID：11670282
> 
> 赞同：1
> 
> 时间：2012-07-26T13:23:24.610
> 
> 标签：javascript, audio, safari, mouseover

我无法让鼠标悬停的音频在 Safari 中播放。它适用于 Chrome、||Opera、Camino、Firefox 和 IE。我在 HTML 中使用它：

```
<a onmouseover="mouseoversound.playclip()" onclick="clicksound.playclip()" href="#">link/a> 
```

在我的页脚中使用这个 javascript：

```
<script>

// Mouseover/ Click sound effect- by JavaScript Kit (www.javascriptkit.com)
// Visit JavaScript Kit at http://www.javascriptkit.com/ for full source code

//** Usage: Instantiate script by calling: var uniquevar=createsoundbite("soundfile1",                 "fallbackfile2", "fallebacksound3", etc)
//** Call: uniquevar.playclip() to play sound

var html5_audiotypes={ //define list of audio file extensions and their associated audio types. Add to it if your specified audio file isn't on this list:
"mp3": "audio/mpeg",
"mp4": "audio/mp4",
"ogg": "audio/ogg",
"wav": "audio/wav"
}

function createsoundbite(sound){
var html5audio=document.createElement('audio')
if (html5audio.canPlayType){ //check support for HTML5 audio
    for (var i=0; i<arguments.length; i++){
        var sourceel=document.createElement('source')
        sourceel.setAttribute('src', arguments[i])
        if (arguments[i].match(/.(w+)$/i))
            sourceel.setAttribute('type', html5_audiotypes[RegExp.$1])
        html5audio.appendChild(sourceel)
    }
    html5audio.load()
    html5audio.playclip=function(){
        html5audio.pause()
        html5audio.currentTime=0
        html5audio.play()
    }
    return html5audio
}
else{
    return {playclip:function(){throw new Error("Your browser doesn't support HTML5 audio unfortunately")}}
}
}

//Initialize two sound clips with 1 fallback file each:

var mouseoversound=createsoundbite("http://graphicviolence.co.uk/sounds/typewriter.ogg", "http://graphicviolence.co.uk/sounds/typewriter.mp3")
var clicksound=createsoundbite("http://graphicviolence.co.uk/sounds/bell.ogg", "http://graphicviolence.co.uk/sounds/bell.mp3")

</script> 
```

有人知道为什么 Safari 不会执行这个吗？请参阅我的网站： http: [//graphicviolence.co.uk](http://graphicviolence.co.uk)

谢谢蒂姆，伦敦

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-23T15:34:29.803

我在我的项目中使用完全相同的脚本，它在 Chrome 和 Safari 中都可以正常工作。但是当谈到 iPhone 和 iPad Safari 时，它也搞砸了。我测试过你的，真的不行。也许您可能想检查您的脚本插件

# php - Symfony2 在 FosUserBundle 的 RegistrationFormType 中获取会话

> ID：11670288
> 
> 赞同：1
> 
> 时间：2012-07-26T13:23:34.693
> 
> 标签：php, session, symfony

我尝试在我的对象会话中获取对象会话，`RegistrationFormType`但出现此错误：`Warning: Missing argument 2 for Meet\MembreBundle\Form\Type\RegistrationFormType::__construct()`

我的注册表格类型：

```
namespace Meet\MembreBundle\Form\Type;
use Symfony\Component\Form\FormBuilder;
use Symfony\Component\Form\FormBuilderInterface;
use FOS\UserBundle\Form\Type\RegistrationFormType as BaseType;

    class RegistrationFormType extends BaseType
    {
        private $session;
        public function __construct($session, $class)
        {
            $this->session = $session;
            parent::__construct($class);
        }

        public function buildForm(FormBuilder $builder, array $options)
        {
            parent::buildForm($builder, $options);
            $locale = $this->session->getLocale();
            var_dump($locale);

        }

        public function getName()
        {
            return 'meet_user_registration';
        }
    } 
```

我的 config.yml

```
fos_user:
    db_driver: orm # other valid values are 'mongodb', 'couchdb' and 'propel'
    firewall_name: main
    # Permet de renseigner la nouvelle entity utilisateur
    user_class: Meet\MembreBundle\Entity\Membre
    registration:
        form:
            type: meet_user_registration
services:
  meet_user_registration:
    class: Meet\MembreBundle\Form\Type\RegistrationFormType
    arguments: [@session, %fos_user.model.user.class%]
    tags:
        - { name: form.type, alias: my_user_registration } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-26T13:36:24.553

对我来说，您似乎忘记定义`%fos_user.model.user.class%`参数

您是否遵循了[这些步骤](https://github.com/FriendsOfSymfony/FOSUserBundle/blob/master/Resources/doc/index.md#step-5-configure-the-fosuserbundle)？

# php - 如何搜索整个单词，而不仅仅是 PHP 的子字符串

> ID：11670293
> 
> 赞同：-1
> 
> 时间：2012-07-26T13:23:41.057
> 
> 标签：php

如果我有以下字符串：“brasil”和“brasil-carinhoso”，我只想替换“brasil”，但如果它直接后跟其他字符则不替换。

所以如果我有这个列表：“pac pac pac brasil brasil-carinhoso pac brasil”，如果我尝试使用以下代码，它会失败：

```
//$_GET['exclusion_tags'] is 'brazil'
//$tags_maior is the string: "pac pac pac brasil brasil-carinhoso pac brasil" 
$tags_maior = preg_replace('/\b'.$_GET['exclusion_tags'].'\b/u', "", $tags_maior); 
```

当我像这样使用 str_replace 或 preg_replace 时，我得到“pac pac pac -carinhoso pac”，我需要得到“pac pac pac brasil-carinhoso pac”

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-26T13:27:47.650

你的问题是你的正则表达式。您需要选择一个单词前后有空格的单词。

`(space)brazil(space)`不只是`brazil`

你现在必须问这个问题：“我该如何编写一个正则表达式来搜索一个有前导空格和尾随空格的单词？”

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-26T13:27:51.173

你没有[`preg_replace()`](http://php.net/manual/en/function.preg-replace.php)正确设置你。您的字符串需要标识您要替换的内容，并且仅当查询前后有空格时才替换它。我希望我能提供更多帮助，但我并不精通正则表达式。运气好的话，有人会编辑这篇文章或为您想要的查询提供正则表达式解决方案。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-26T13:35:12.273

试试这个...

```
$_GET['exclusion_tags'] = 'brazil';
$tags_maior = "pac pac pac brazil brazil-carinhoso pac brazil";
$tags_maior = trim(str_replace(" ".$_GET['exclusion_tags']." ", " ", " ".$tags_maior." "));

var_dump($tags_maior); 
```

# silverlight - 每n秒更换一次图像源wp7

> ID：11670296
> 
> 赞同：0
> 
> 时间：2012-07-26T13:23:52.610
> 
> 标签：silverlight, windows-phone-7, animation

我需要每 25 毫秒在 windows phone 7 应用程序上更新一次图像。此动画应在按下按钮后开始播放并播放 10 秒。wp7有什么办法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-26T13:28:26.123

在按钮单击事件上，您可以创建一个计时器对象并启动它，然后在计时器滴答事件上检查计时器上的当前毫秒读数是否可以被 25 整除（使用模运算符），如果可以的话运行将更改图像源属性的代码，并在同一滴答事件处理程序中，您可以设置检查第二次读数是否为 10 秒，以及是否停止计时器

# java - 添加到数据库，并在“输入”按下时可编辑的 ComboBoxModel ......使用按键侦听器？

> ID：11670299
> 
> 赞同：2
> 
> 时间：2012-07-26T13:23:57.090
> 
> 标签：java, swing

当我在组合框中输入新名称时，我想添加到数据库和可编辑的组合框模型。我有添加到数据库的方法很好，我只是想让它以某种方式监听添加到 ComboBox 的条目。

**最好的方法是什么？**

我已经阅读了关于[Editable ComboBoxes](http://docs.oracle.com/javase/tutorial/uiswing/components/combobox.html#editable)的 Java 教程，并注意到它说的地方：

> 当用户从菜单中选择一个项目并且用户输入 Enter 时，一个可编辑的组合框会触发一个动作事件。请注意，当用户在组合框中输入值时，菜单保持不变。如果需要，*您可以轻松编写一个动作侦听器，每次用户键入一个唯一值时，它都会向组合框的菜单中添加一个新项目*。

所以我心想，好吧，让我们试试这个，并查了一些[例子](https://stackoverflow.com/q/6395164/1075247)。这是我的尝试，基本上是从我找到的示例中复制粘贴，并带有我的变量名：

```
playerNameComboBox.addActionListener(new ActionListener() {

    @Override
    public void actionPerformed(ActionEvent e) {
        if (e.getActionCommand().equals("comboBoxEdited")) {
            System.out.println("Adding new player!");
            IController.Util.getInstance().addNewPlayer();
            playerNameComboBox.insertItemAt(playerNameComboBox.getSelectedItem(), 0);
        }
    }
}); 
```

当我输入一个新名称并按回车键时，它什么也不做。ComboBox 上没有新的数据库条目和附加选项。我没有将动作命令附加到 ComboBox 上，因为我认为上面的示例假定它会将其作为默认设置，我也是如此。

但是当我按下回车键时，如何让它喊出那个动作命令，重点放在组合框上？我会认为组合框会有某种默认行为来喊出来？我需要使用`if(playerNameComboBox.hasFocus())`声明吗？当我的组合框 hasFocus() 时，我应该实现某种 keylistener 吗？

我是 Java 的新手，所以我不确定应该如何做这种事情；很感谢任何形式的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-26T15:35:11.367

根据要求，这是我的简短示例，其中可以将名称添加到 JComboBox。

```
import java.awt.event.ActionEvent;
import java.awt.event.ActionListener;
import javax.swing.*;

public class Test extends JFrame {

    private JComboBox box;

    public static void main(String[] args) {
        new Test();
    }

    public Test()
    {
        super();
        setSize(200, 100);
        setDefaultCloseOperation(EXIT_ON_CLOSE);

        box = new JComboBox();
        box.setEditable(true);
        getContentPane().add(box);

        box.addActionListener(new ActionListener() { 
            @Override 
            public void actionPerformed(ActionEvent e) { 
                if (e.getActionCommand().equals("comboBoxEdited")) { 
                    System.out.println("Adding new player!");
                    box.insertItemAt(box.getSelectedItem(), 0);
                } 
            } 
        });

        setVisible(true);
    }
} 
```

# maven - tycho plugin + maven-dependency-plugin：从本地项目复制依赖项而不是存储库

> ID：11670300
> 
> 赞同：3
> 
> 时间：2012-07-26T13:23:57.210
> 
> 标签：maven

主要目标：将项目部署为 jar*和*eclipse-plugin

当前状态：项目作为 jar 包构建良好

现在我想创建第二个项目，将 jar 项目包装为 eclipse 插件

*   使用 tycho-maven-plugin 创建 eclipse-plugin
*   添加原始项目的jar（具有复制依赖）
*   添加激活器
*   从 jar 中导出包
*   创建正确的 MANIFEST.MF

我尝试使用绑定到创建资源的复制依赖项来复制 jar。只要在存储库中找到 jar，这就会起作用，但本地项目会被忽略。这会导致构建失败，因为找不到 jar。

是否可以告诉复制依赖项从项目的目标目录中获取 jar？或者我应该使用其他方法而不是使用第谷？

编辑：

我用 4 个项目解决了我的问题：

*   正常项目（这里没什么特别的）
*   使用 tycho maven 和 copy-dependencies 的包装器项目。在编译之前将复制依赖项绑定到某个目标（例如生成资源）。排除了在 MANIFEST.MF 中设置为依赖项的所有 artefactid。
*   一个准备项目，它调用普通项目并将其安装到存储库中。这是必需的，因为 tycho-maven-plugin 必须进行验证，并且无法事先调用 exec 插件（至少不容易）。
*   一个多模块项目，它在包装项目之前调用准备项目。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-26T14:57:11.427

使用“mvm install”构建您的本地项目（遗漏了哪个工件）。它将部署在您的本地存储库 ($USER_HOME$/.m2/repositories) 中。之后应该解决此依赖关系。

或者，如果您有像 Artifactory 或 Nexus 这样的本地公司 maven 存储库，您可以“mvn deploy”。

# iphone - iOS iTunes 商店国家

> ID：11670302
> 
> 赞同：19
> 
> 时间：2012-07-26T13:24:04.137
> 
> 标签：iphone, ios, itunes, country

我想知道是否有解决方案可以找出用户在哪个国家/地区下载了应用程序。

例如：应用 x 已在美国下载，当用户打开应用时，应用会检查它是在哪个国家/地区下载的。在此示例中，返回将是“USA”

有人知道如何解决这个问题吗？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-12-09T06:34:06.627

如果您有任何可用的应用内购买，您可以从 SKProduct 读取区域设置。作为后备，使用设备的语言环境。

```
NSLocale *locale;
SKProduct *baseProduct = nil; // replace as applicable
if (baseProduct) {
    locale = baseProduct.priceLocale; // from the user's credit card on iTunes
} else {
    locale = [NSLocale currentLocale]; // from user preferences
}
NSString *countryCode = [locale objectForKey:NSLocaleCountryCode];
NSLog(@"Two-letter country code: %@", countryCode); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-26T13:31:03.203

iTunes 商店国家/地区与用户设置的**区域**之间可能存在足够好的相关性。这取决于您的需求 - 如果这还不够，我认为没有办法知道应用程序是从哪个实际商店下载的。

要检索该语言环境，您可以使用：

```
NSString *localeIdentifier = [[NSLocale currentLocale] localeIdentifier]; 
```

希望这足以满足您的需求。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-26T13:29:41.563

无法检查应用下载了“哪个”应用商店。

如果您需要做任何基于位置的操作，您应该查看`CLLocation`以获取用户的当前位置，但是如果应用程序不清楚为什么需要该位置，则询问用户他们的位置可能会显得很麻烦。

您还可以检查用户设备上的语言，例如英国的 en_gb、丹麦的 dk、加拿大的 en_ca 等。虽然这并不能完全涵盖某些国家/地区的人们将语言设置为其他国家/地区的情况母语，总比没有好。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2020-08-28T08:59:19.133

`SKStoreFront`，在 iOS 13 SDK 中引入似乎可以完成这项工作。

**迅速**

```
if let storefront = SKPaymentQueue.default().storefront {
    print(storefront.countryCode) // Returns an Alpha-3 country code (USA, GBR etc.)
} 
```

**对象 C**

```
[SKPaymentQueue defaultQueue].storefront.countryCode; // Returns an Alpha-3 country code (USA, GBR etc.) 
```

`SKStoreFront`即使您的应用程序不提供任何购买，您也应该能够通过将 StoreKit 框架添加到您的项目来访问该实例。

# c++ - mmorpg中的c中的多线程

> ID：11670314
> 
> 赞同：5
> 
> 时间：2012-07-26T13:25:03.480
> 
> 标签：c++, multithreading, thread-safety

我想在 C++ 中的 mmorpg 中使用多线程，目前我有 5 个线程，我想将另一个分成两部分，但是我的 mmorpg 服务器包含大量向量，并且因为向量不是线程安全的编写，我不能正确地做到这一点。

是否有跨线程使用向量的替代方法，或者有没有办法使向量读/写多线程安全。

下面是我不想要的示例，尝试找到类似这样的替代方法： 显然这不是实际代码，我只是在做一个示例。

```
//Thread1
//Load monster and send data to the player
globals::monstername[myid];//Myid = 1 for now -.-
senddata(globals::monstername[myid]);//Not the actual networking code, im just lazy.

//Thread2
//Create a monster and manage it
globals::monstername.push_back("FatBlobMonster");
//More managing code i cant be bothered inserting >.< 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-26T13:32:58.280

两件事情。

1.  不要将共享数据存储在一个完全锁定的大数据结构中。只锁定其中的一部分。例如，如果您必须使用向量，则为向量的区域创建一组锁。假设我有 1000 个条目，我可能会创建 10 个锁，即每个锁 100 个连续的条目。但你可能会做得更好。例如，将怪物存储在哈希表中，其中哈希表中的每个“桶”都有自己的锁。

2.  使用“读/写”锁。可以创建一种允许多个读取器和单个写入器的锁。所以每个哈希桶都可能有一个读写锁。如果在特定的桶中没有创建怪物，那么多个线程可以从该桶中读取怪物。如果您需要将一个新怪物散列到存储桶中，那么您可以锁定存储桶以进行写入。这个锁会等待所有当前的读者释放，并且在写完成之前不允许更多的读者加锁。一旦没有更多的读者，写操作成功

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-26T13:30:37.687

我不知道任何线程安全向量类。但是，您可以自己创建一个使用`std::vector`和一个`std::mutex`（在 C++11 中）：

```
template <typename T>
class LockedVector {

private:
    std::mutex m;
    std::vector<T> vec;
}; 
```

您使用 锁定互斥锁`std::lock`。

# java - XML Parsing：计算子元素的数量

> ID：11670317
> 
> 赞同：2
> 
> 时间：2012-07-26T13:25:07.973
> 
> 标签：java, android, xml, xml-parsing

我对 XML 很陌生。我有一个如下的 XML 输出，

```
<ResultSet xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns="urn:yahoo:srch" xsi:schemaLocation="urn:yahoo:srch http://search.yahooapis.com/WebSearchService/V1/WebSearchRelatedResponse.xsd">
<Result>london olympics 2012</Result>
<Result>olympics schedule</Result>
<Result>olympics closing ceremony</Result>
<Result>winter olympics</Result>
<Result>nbc olympics</Result>
<Result>2016 olympics</Result>
<Result>olympics opening ceremony</Result>
<Result>special olympics</Result>
<Result>2008 olympics</Result>
<Result>2020 olympics</Result>
</ResultSet> 
```

我需要计算父标签中的标签数量。

```
NodeList nl = doc.getElementsByTagName("ResultSet"); 
```

上面给出了一个单一的元素对象。如何知道这个集合中有多少个结果？

谢谢！拉胡尔。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-26T13:31:34.450

要获取集合的大小：

`nl.getLength()`

`public int getLength()`

> 列表中的节点数。有效子节点索引的范围是 0 到 length-1（含）。

[节点列表](http://docs.oracle.com/javase/1.4.2/docs/api/org/w3c/dom/NodeList.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-26T13:31:44.803

看文档

[http://developer.android.com/reference/org/w3c/dom/NodeList.html](http://developer.android.com/reference/org/w3c/dom/NodeList.html)

int count = nl.getLength();

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-06-10T02:37:15.607

更通用的方法是使用 XPath 来计算元素的数量。

```
count(/resultSet/result) 
```

# javascript - 调整从其他域加载的 iframe/object 标记的内容

> ID：11670322
> 
> 赞同：0
> 
> 时间：2012-07-26T13:25:23.860
> 
> 标签：javascript, html, cross-domain

我有一个脚本，它加载内容链接并将其显示在 iframe 或对象标记中。当内容与脚本位于同一服务器上时 - 我可以访问并调整其大小

`iFrameObject.contentDocument().getElementsByTag().width = ...;`

但是当内容在其他服务器上时，我遇到了跨域限制。请给我一个建议是（以及如何）可以在不使用其他框架的情况下解决这个问题，只需使用`HTML`and `Javascript`。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-26T13:31:15.550

您无法读取或写入从其他域加载的 iframe 的属性。这里的所有都是它的。

一些资源：

*   [维基百科](http://en.wikipedia.org/wiki/Same_origin_policy)
*   [MDN](https://developer.mozilla.org/en/Same_origin_policy_for_JavaScript)
*   [谷歌代码](http://code.google.com/p/browsersec/wiki/Part2)

# c# - 如何使用 LINQ 拆分为子列表？

> ID：11670325
> 
> 赞同：0
> 
> 时间：2012-07-26T13:25:26.523
> 
> 标签：c#, linq

> **可能重复：**
> [使用 LINQ 将列表拆分为子列表](https://stackoverflow.com/questions/419019/split-list-into-sublists-with-linq)

我正在寻找某种方法来使用 LINQ 将可枚举拆分为三个可枚举，以便输入中的每个连续项目都位于序列中的下一个子列表中。所以输入

```
{"a", "b", "c", "d", "e", "f", "g", "h"} 
```

会导致

```
{"a", "d", "g"}, {"b", "e", "h"}, {"c", "f"} 
```

我已经这样做了，但我确信必须有一种方法可以使用 LINQ 更优雅地表达这一点。

```
var input = new List<string> {"a", "b", "c", "d", "e", "f", "g", "h"};
var list = new List<string>[3];

for (int i = 0; i < list.Length; i++)
    list[i] = new List<string>();

int column = 0;
foreach (string letter in input)
{
    list[column++].Add(letter);
    if (column > 2) column = 0;
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-26T13:36:02.620

这就是您要查找的内容：（按列拆分）根据以前的帖子进行了修改

关键区别在于 group by，使用 mod 而不是 division。

我还把它变成了通用的，所以它会给你正确的类型（而不是“对象类型”代码）。您可以将类型推断与泛型一起使用。

```
public static IEnumerable<IEnumerable<T>> SplitColumn<T>( IEnumerable<T> source ) {
    return source
        .Select( ( x, i ) => new { Index = i, Value = x } )
        .GroupBy( x => x.Index % 3 )
        .Select( x => x.Select( v => v.Value ).ToList() )
        .ToList();
} 
```

# iphone - 如何在 iPhone 应用程序中显示阿拉伯数字而不本地化每个数字

> ID：11670330
> 
> 赞同：7
> 
> 时间：2012-07-26T13:25:43.187
> 
> 标签：iphone, localization, numbers, arabic

我想知道如何在 iPhone 应用程序中显示阿拉伯数字而不本地化每个数字。

例如，我在代码中有一个整数，其值 = 123

我想将其显示为 ١٢٣ 而不必自己本地化每个数字并强制应用程序使用阿拉伯语作为本地化语言，而不管用户选择的语言如何

因为我在整个应用程序中有很多动态变化的数字，所以我需要一个通用的智能解决方案

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-07-26T13:42:45.327

```
NSDecimalNumber *someNumber = [NSDecimalNumber decimalNumberWithString:@"123"];
NSNumberFormatter *formatter = [[NSNumberFormatter alloc] init];
NSLocale *arLocale = [[[NSLocale alloc] initWithLocaleIdentifier:@"ar"] autorelease];
[formatter setLocale:arLocale];
NSLog(@"%@", [formatter stringFromNumber:someNumber]); // Prints in Arabic
[formatter setLocale:[NSLocale currentLocale]];
NSLog(@"%@", [formatter stringFromNumber:someNumber]); // Prints in Current Locale
[formatter release]; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-06-24T11:47:48.040

如果您有浮点数，则必须在初始化后添加此行，`NSNumberFormatter` `[formatter setNumberStyle:NSNumberFormatterDecimalStyle];` 因此上述代码的修改如下

```
NSString *test = [NSString stringWithFormat:@"%lu", fileSizeEvet];
//    NSString *test = [NSString stringWithFormat:@"%f", (double)folderSize/1024/2014];
NSDecimalNumber *someNumber = [NSDecimalNumber decimalNumberWithString:test];
NSNumberFormatter *formatter = [[NSNumberFormatter alloc] init];
[formatter setNumberStyle:NSNumberFormatterDecimalStyle];
NSLocale *gbLocale = [[NSLocale alloc] initWithLocaleIdentifier:@"ar"];

[formatter setLocale:gbLocale];
float myInt = [someNumber floatValue]/1024/1024;
//    NSLog(@"%@", [formatter stringFromNumber:[NSNumber numberWithFloat:myInt]]);
//    NSLog(@"%@", [formatter stringFromNumber:someNumber]); // Prints in Arabic
NSString *folderSizeInArabic = [formatter stringFromNumber:[NSNumber numberWithFloat:myInt]];
fileSizeLabel.text = [NSString stringWithFormat:@" قه‌باره‌ی فایل: %@ مب", folderSizeInArabic]; 
```

欲了解更多信息，请访问[此链接](http://www.objc.io/issues/9-strings/string-localization/)

# jquery - 在悬停时添加缓动/动画，以便彩色 div 隐藏和图像显示

> ID：11670331
> 
> 赞同：0
> 
> 时间：2012-07-26T13:25:48.010
> 
> 标签：jquery, hover, fade

[http://jsfiddle.net/lxm7/Zzuq3/](http://jsfiddle.net/lxm7/Zzuq3/)

我环顾了许多类似的解决方案，但似乎找不到答案。当用户将鼠标悬停在橙色 div 上时，我基本上只想对图像产生缓和渐变效果。下面 jsfiddle 中的代码片段。我知道这以前会得到回答，但它总是隐藏图像以显示 div 而不是相反。

提前致谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-26T13:51:16.867

我将两个 div 叠放在一起，并`animate()`用来使有色的一个随着时间的推移而淡出（反之亦然）：http: [//jsfiddle.net/CLdP3/29/](http://jsfiddle.net/CLdP3/29/)

有更多选项可以控制动画功能，请查看[jQuery API 参考](http://api.jquery.com/animate/)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-26T14:06:01.727

Anders Holmstrom 击败了我——我使用了相同的基本方法，但使用了绝对定位的内部图像和 jQuery fadeIn() 和 fadeOut()。检查出来比较：http: [//jsfiddle.net/AjXYK/1/](http://jsfiddle.net/AjXYK/1/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-26T14:07:26.157

由于 jQuery 只能真正为具有数值的元素设置动画，因此最好的办法是将图像和颜色元素分层，然后淡入淡出。

[http://jsfiddle.net/ufomammut66/9xv4e/](http://jsfiddle.net/ufomammut66/9xv4e/)

上面的 jsFiddle 示例展示了如何做到这一点。我创建了一个位于外部容器上方的颜色 div。当您悬停时，此颜色 div 会淡入淡出。然后，我通过绝对定位可见 div 将可见内容拉到颜色 div 上。希望这会有所帮助。

# .net - 如何从 WPF 中临时冻结整个显示

> ID：11670333
> 
> 赞同：-1
> 
> 时间：2012-07-26T13:25:53.110
> 
> 标签：.net, wpf, screen, freeze

我正在寻找一种方法——可能是 win32 API——从我的 .Net WPF 应用程序中冻结整个显示。

原因：嗯，这次不是为了惹恼用户。我基本上想隐藏一些后台文件操作，他们正在打开文件保存对话框。我的应用程序正在通过模拟击键来处理应用文件名。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-26T14:09:21.787

正如所有评论都指出的那样，这可能是一个糟糕的设计，但无论如何你都需要一个答案。

我过去做过类似的事情，通过截屏并将其放置在一个没有边框或标题的窗口上，该窗口使用所有空间并且高于所有其他窗口。

# workflow - Activiti 中的安全功能

> ID：11670335
> 
> 赞同：1
> 
> 时间：2012-07-26T13:25:57.870
> 
> 标签：workflow, business-process-management, bpmn, activiti

我正在收集 Activiti Process Engine 中提供的安全功能，例如身份验证、授权、数据库安全（文件加密、Https 连接）。我需要了解更多关于使业务流程安全的 Activiti 的安全功能。

例如; 如果一个数据包是由一家快递公司运送给客户的，那么在执行这个流程模型时应该考虑哪些实时安全测量以及 Activiti 提供了什么？

我所拥有的是；活动有

*   身份验证功能（只有正确的人可以访问系统）
*   授权功能（Activiti 负责谁将访问什么）
*   安全数据库连接

还有什么？任何机构都可以帮助我吗？Activiti 默认提供的功能是什么，额外的用户代码或插件可以做什么？任何文件/研究论文？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-09T07:43:00.747

由于没有人回答我，我做了自己的研究，发现了 Activiti 提供的一些安全控制，我想分享我的经验。我从作为标准提供的两个现有安全目录开始；

1.  NIST (SP 800-53)
2.  通用标准 (ISO 15408)

并试图从上述目录中找出 Activiti 作为安全功能提供（完全或部分）的控件。初稿包括：

1.  用户身份验证*[参考：通用标准 (ISO 15408)；页。94，NIST（SP 800-53）；页。128]*
2.  用户识别*[参考：通用标准 (ISO 15408)；页。99, NIST (SP 800-53); 页。128]*
3.  账户管理*[参考：NIST (SP 800-53)；页。77]*
4.  安全管理角色 (CC)/职责分离 (NIST) *[参考：通用标准 (ISO 15408)；页。116, NIST (SP 800-53), p. 82]*
5.  最小特权*[参考：NIST (SP 800-53)，p。83]*
6.  远程访问*[参考：NIST (SP 800-53)，p。88]*
7.  回滚*[参考：通用标准 (ISO 15408)；页。79]*
8.  存储数据完整性 (CC)/媒体存储 (NIST) *[参考：通用标准 (ISO 15408)；页。81, NIST (SP 800-53); 页。146]*
9.  媒体访问*[参考：NIST (SP 800-53)；页。145]*
10.  内部 TOE 传输 (CC)/传输完整性 (NIST) *[参考：通用标准 (ISO 15408)；页。74, NIST (SP 800-53); 页。185]*
11.  传输机密*性 [参考：NIST (SP 800-53)；页。186]*

我希望它可以帮助某人。

萨尔曼

# xml - 从 Google 电子表格导出到 XML

> ID：11670338
> 
> 赞同：8
> 
> 时间：2012-07-26T13:26:31.067
> 
> 标签：xml, google-apps-script, google-sheets

我有一个 google docs 电子表格和一个基于此电子表格制作的 XML 文件。我现在需要的是一种加快将信息导出为 XML 格式的方法。所以我转向了谷歌脚本。

我目前可以从电子表格中检索某些单元格并制作字符串变量，但是我需要使用最少的点击次数将结果字符串保存到 XML 文件中。

有什么方法可以立即使用谷歌脚本制作一个 xml 文件并将其发送到浏览器下载？保存我找到的结果的唯一方法是在 google drive 文件夹中创建一个纯文本文档，打开此文档并将其内容手动复制粘贴到我的 xml 文件中。但似乎这个纯文本文档不理解制表符 (\t)，我有点需要它们在我的 xml 中建立某种结构。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-26T13:46:16.283

您是否研究过[内容服务](https://developers.google.com/apps-script/class_textoutput#downloadAsFile)？您将生成 XML 并通过 Content Service 提供它，设置 XML mime-type，然后使用 downloadAsFile 告诉浏览器只下载文件而不是显示它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-26T14:34:58.353

ContentService 将允许您精确控制您希望 XML 的外观。您还可以通过发布您的工作表让 Google 为您创建 XML Atom/RSS 提要。

在旧表格中，发布选项允许 XML 导出。（不再受支持。）这是[XML 的示例](https://spreadsheets.google.com/feeds/list/0Ak8fMLTb8GUKdE9NMEIxdnZORDhrSVNaZmdaY2JfZ0E/od6/public/basic?alt=rss)。

# javascript - Facebook iFrame 选项卡 - 滚动到顶部

> ID：11670340
> 
> 赞同：-1
> 
> 时间：2012-07-26T13:26:35.790
> 
> 标签：javascript, html, facebook, iframe

我创建了一个 facebook iFrame 选项卡，它显示了我的 html（位于我的服务器上），但是当我单击图像时，我试图将窗口滚动到顶部。有任何想法吗？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-07-26T13:59:12.510

```
FB.Canvas.scrollTo(0,0); 
```

[Facebook SDK 参考 > JavaScript SDK](http://developers.facebook.com/docs/reference/javascript/FB.Canvas.scrollTo/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-06-16T13:55:58.943

当您使用时引入了新的 Facebook 页面： FB.Canvas.scrollTo(0,0); 它将页面拉到封面图像，您只会看到一点点 FB 标签应用程序（如果您使用的是小屏幕）。为了仅将选项卡应用程序带到顶部，我正在使用：FB.Canvas.scrollTo(0,360);

# android - 应用程序已停止

> ID：11670343
> 
> 赞同：0
> 
> 时间：2012-07-26T13:26:43.420
> 
> 标签：android

我的代码有问题，我似乎没有找到它。错误是：

> 应用程序意外停止！

这是我的代码：

```
public class MainActivity extends ListActivity {

    private static final int REQUEST_BT_ENABLE = 0x1;

    ListView listGeraete;
    TextView text;
    BluetoothAdapter bluetoothAdapter;
    ArrayAdapter<String> arrayAdapter;
    static private ArrayAdapter<BluetoothDevice> BtDevices = null;

    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);

        bluetoothAdapter = BluetoothAdapter.getDefaultAdapter();
        text = (TextView) findViewById(R.id.txt);
        listGeraete = (ListView) findViewById(R.id.list);
        arrayAdapter = new ArrayAdapter<String>(MainActivity.this,
            android.R.layout.simple_list_item_1);
        listGeraete.setAdapter(arrayAdapter);
        registerReceiver(ActionFoundReceiver, new IntentFilter(
            BluetoothDevice.ACTION_FOUND));
    }

    // Aktivierung von Bluetooth
    public void ClickBtOn(View view)
    {
        bluetoothAdapter.enable();
        Intent enablerBt = new Intent(bluetoothAdapter.ACTION_REQUEST_ENABLE);
        startActivityForResult(enablerBt, REQUEST_BT_ENABLE);
    }

    // Deaktivierung von Bluetooth
    public void ClickBtOff(View view) {
        bluetoothAdapter.disable();
    }

    protected void onDestroy() {
        // TODO Auto-generated method stub
        super.onDestroy();
        unregisterReceiver(ActionFoundReceiver);
    }

    public void ClickBtScan(View view) {
        if (!bluetoothAdapter.isEnabled()) {
            Intent enableBt = new Intent(BluetoothAdapter.ACTION_REQUEST_ENABLE);
            startActivityForResult(enableBt, REQUEST_BT_ENABLE);
    }
    arrayAdapter.clear();

    bluetoothAdapter.startDiscovery();
}

private final BroadcastReceiver ActionFoundReceiver = new BroadcastReceiver() {
    public void onReceive(Context context, Intent intent) {

        String action = intent.getAction();

        if (BluetoothDevice.ACTION_FOUND.equals(action)) {
            BluetoothDevice device = intent
                    .getParcelableExtra(BluetoothDevice.EXTRA_DEVICE);
            arrayAdapter.add(device.getName() + "\n" + device.getAddress());
            arrayAdapter.notifyDataSetChanged();
        }
    }
};

protected void onListItemClick(ListView l, View v, final int position, long id) {

super.onListItemClick(l, v, position, id);

if(bluetoothAdapter.isDiscovering()) {                               

    bluetoothAdapter.cancelDiscovery();

 } 
```

日志猫是：

```
07-26 15:33:48.105: D/Process(3919): killProcess, pid=3919
07-26 15:33:48.105: D/Process(3919): dalvik.system.VMStack.getThreadStackTrace(Native Method)
07-26 15:33:48.105: D/Process(3919): java.lang.Thread.getStackTrace(Thread.java:599)
07-26 15:33:48.105: D/Process(3919): android.os.Process.killProcess(Process.java:788)
07-26 15:33:48.105: D/Process(3919): com.android.internal.os.RuntimeInit$UncaughtHandler.uncaughtException(RuntimeInit.java:104)
07-26 15:33:48.115: D/Process(3919): java.lang.ThreadGroup.uncaughtException(ThreadGroup.java:693)
07-26 15:33:48.115: D/Process(3919): java.lang.ThreadGroup.uncaughtException(ThreadGroup.java:690)
07-26 15:33:48.115: D/Process(3919): dalvik.system.NativeStart.main(Native Method)
07-26 15:33:48.115: I/Process(3919): Sending signal. PID: 3919 SIG: 9
07-26 15:34:09.476: D/AndroidRuntime(4062): Shutting down VM
07-26 15:34:09.476: W/dalvikvm(4062): threadid=1: thread exiting with uncaught exception (group=0x40ad6228)
07-26 15:34:09.486: E/AndroidRuntime(4062): FATAL EXCEPTION: main
07-26 15:34:09.486: E/AndroidRuntime(4062): java.lang.RuntimeException: Unable to start activity ComponentInfo{com.upcin.kommunikationuberbt/com.upcin.kommunikationuberbt.MainActivity}: java.lang.RuntimeException: Your content must have a ListView whose id attribute is 'android.R.id.list'
07-26 15:34:09.486: E/AndroidRuntime(4062):     at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2194)
07-26 15:34:09.486: E/AndroidRuntime(4062):     at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2229)
07-26 15:34:09.486: E/AndroidRuntime(4062):     at android.app.ActivityThread.access$600(ActivityThread.java:139)
07-26 15:34:09.486: E/AndroidRuntime(4062):     at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1261)
07-26 15:34:09.486: E/AndroidRuntime(4062):     at android.os.Handler.dispatchMessage(Handler.java:99)
07-26 15:34:09.486: E/AndroidRuntime(4062):     at android.os.Looper.loop(Looper.java:154)
07-26 15:34:09.486: E/AndroidRuntime(4062):     at android.app.ActivityThread.main(ActivityThread.java:4945)
07-26 15:34:09.486: E/AndroidRuntime(4062):     at java.lang.reflect.Method.invokeNative(Native Method)
07-26 15:34:09.486: E/AndroidRuntime(4062):     at java.lang.reflect.Method.invoke(Method.java:511)
07-26 15:34:09.486: E/AndroidRuntime(4062):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:784)
07-26 15:34:09.486: E/AndroidRuntime(4062):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:551)
07-26 15:34:09.486: E/AndroidRuntime(4062):     at dalvik.system.NativeStart.main(Native Method)
07-26 15:34:09.486: E/AndroidRuntime(4062): Caused by: java.lang.RuntimeException: Your content must have a ListView whose id attribute is 'android.R.id.list'
07-26 15:34:09.486: E/AndroidRuntime(4062):     at android.app.ListActivity.onContentChanged(ListActivity.java:250)
07-26 15:34:09.486: E/AndroidRuntime(4062):     at com.android.internal.policy.impl.PhoneWindow.setContentView(PhoneWindow.java:281)
07-26 15:34:09.486: E/AndroidRuntime(4062):     at android.app.Activity.setContentView(Activity.java:1885)
07-26 15:34:09.486: E/AndroidRuntime(4062):     at com.upcin.kommunikationuberbt.MainActivity.onCreate(MainActivity.java:36)
07-26 15:34:09.486: E/AndroidRuntime(4062):     at android.app.Activity.performCreate(Activity.java:4531)
07-26 15:34:09.486: E/AndroidRuntime(4062):     at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1071)
07-26 15:34:09.486: E/AndroidRuntime(4062):     at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2150)
07-26 15:34:09.486: E/AndroidRuntime(4062):     ... 11 more 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-26T13:43:49.010

你的日志说明了一切

```
Your content must have a ListView whose id attribute is 'android.R.id.list' 
```

这意味着你需要设置你的id`ListView's` **所以**`android.R.id.list` 你必须`ListView`在你的布局`XML`文件中有一个`id="@android:id/list"`

```
<ListView
   android:id="@android:id/list"
   ...
/> 
```

因为你是从`ListActivity`.

你也可以看看

*   [`runtime exception ListView whose id attribute is 'android.R.id.list'`](https://stackoverflow.com/questions/3040374/runtime-exception-listview-whose-id-attribute-is-android-r-id-list)

# java - 跟踪IP地址

> ID：11670346
> 
> 赞同：0
> 
> 时间：2012-07-26T13:27:04.283
> 
> 标签：java, network-programming, ip, ip-address, jpcap

我想跟踪 IP 地址，其中有 135 个目标端口，然后在具有相同 IP 地址的下一个数据包中有 4445 个目标端口。我尝试下面的代码，但无法运行它。如何解决？

```
 packet = jpcap.getPacket();
           if(packet instanceof IPPacket){
           IPPacket ipp = (IPPacket)packet;
           InetAddress destAdd = ipp.dst_ip;
           InetAddress srcAdd = ipp.src_ip;
           if(ipp instanceof TCPPacket){
           TCPPacket tcp = (TCPPacket)ipp;
            int destPort = tcp.dst_port;
            int srcPort = tcp.src_port;
            if(destPort == 135)
            {

                System.out.println(srcAdd + " " + destAdd + " " +srcPort + " "  + destPort);
                Packet packet2 = jpcap.getPacket();
                if(packet2 instanceof IPPacket){
                    IPPacket ipp2 = (IPPacket)packet2;
                    InetAddress destAdd2 =ipp2.dst_ip;
                    InetAddress srcAdd2 = ipp.src_ip;
                    if(destAdd2 == destAdd && srcAdd2 == srcAdd ){
                    if(ipp2 instanceof TCPPacket){
                        TCPPacket tcp2 =(TCPPacket)ipp2;
                        int destPort2 = tcp2.dst_port;
                        int srcPort2 = tcp2.src_port;
                        if(destPort2 == 4444){

                        System.out.println(srcAdd2 + " " + destAdd2 + " " +srcPort2 + " "  + destPort2);    
                        }
                     }       
                    }
                }
            }
           } 
```

# php - 从 JQuery Accordion 中删除行，然后从 MySQL 中删除行

> ID：11670347
> 
> 赞同：0
> 
> 时间：2012-07-26T13:27:08.103
> 
> 标签：php, jquery, mysql

我正在尝试从 JQuery 中的手风琴中删除一行，然后通过删除来更新我的数据库。到目前为止，手风琴中的行的删除工作正常。然后，我尝试获取已删除行的索引并将其发布回同一页面，以便它可以运行 MySQL 查询以删除数据库中的行，然后从数据库中重新加载手风琴，因为该行已被删除.

我的 JavaScript 是有限的，所以我认为我没有正确传递索引？

谢谢您的帮助。

```
 <?PHP    
 if(isset($_POST['id'])){
 $id = intval($_POST['id']);
 mysql_query("DELETE FROM `$db_name`.`$tbl_3` WHERE id='$id'");
 unset($_POST['id']);
 header("Location: ".$siteurl."messenger.php");
 }
 ?>

<SCRIPT>
$(function(){
$( "#inbox" ).accordion({
    collapsible: true,
    icons: { "header": "ui-icon-plus", "headerSelected": "ui-icon-minus" },
    active: false
});

$('#myClicker').click(function() {
    var parent = $(this).closest('DIV');
    var head = parent.prev('DIV');
    parent.add(head).fadeOut('slow',function(){$(this).remove();});
            var index = jQuery(this).find("H4").index(ui.newHeader[0]);
    $.post('messenger.php', { id: index }, function(data) {});
});
});

</SCRIPT> 
```

这就是我显示数据库中数据的方式。

```
<DIV id="inbox">
    <?PHP
      $sql="SELECT * FROM `$tbl_3` ORDER BY id DESC";
      $result = mysql_query($sql);
      while ($row=mysql_fetch_row($result))
      {
    ?>
    <DIV>
        <H4><A href="#"><?PHP echo "".$row[3]."";?></A></H4>
    </DIV>
    <DIV>
        <P><?PHP echo "".$row[4]."";?></P>
        <INPUT type="button" id="myClicker" value="delete"/>
    </DIV>

    <?PHP
    }
    ?>
</DIV> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-26T13:57:29.680

我对这类事情使用完全不同的方法。

我所做的是为我创建一个为我编译手风琴、菜单、表格、div 的 php 函数/文件，当我需要更新它时，我只需通过对生成器的 ajax 调用重新加载容器 div 的内容。

这样我就可以排除所有猜测，只需将一个值传递给 php 脚本。然后这个脚本也可以做数据库的东西。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-26T14:00:59.920

尝试这个

```
 $('#myClicker').click(function() {
    var parent = $(this).closest('DIV');
    var head = parent.prev('DIV');
    var index = parent.prev('DIV').find("H4").index(ui.newHeader[0]);
    parent.add(head).fadeOut('slow',function(){$(this).remove();});

    $.post('messenger.php', { id: index }, function(data) {});
});
}); 
```

# perl - 为什么 prefix=/path/to/perllib 不足以设置 PERL5LIB？

> ID：11670352
> 
> 赞同：1
> 
> 时间：2012-07-26T13:27:23.607
> 
> 标签：perl

如果我创建一个 Perl 模块并将其安装为

```
perl Makefile.PL prefix=/path/to/perllib 
```

然后我希望能够将 PERL5LIB 设置为 /path/to/perllib 并找到该模块。情况似乎并非如此。该模块被安装到 /path/to/perllib/site_perl/5.8.5/，所以这就是 PERL5LIB 必须设置的（或传递给“使用库”）。

我在如何安装模块或如何设置 PERL5LIB 方面做错了什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-26T15:39:23.243

您将 PREFIX= 和 LIB= 混为一谈。

发行版不仅包含模块。一方面，文档没有安装在与模块本身相同的目录中。PREFIX= 告诉 Perl 所有组件的基本路径。

LIB= 告诉 Perl 在哪里安装模块。

使用（例如）

```
perl Makefile.PL PREFIX=~ LIB=~/lib/perl5 
```

然后你会使用

```
export PERL5LIB=~/lib/perl5 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-26T14:03:26.590

不，这就是它的工作原理。前缀表示安装的根目录，但库目录通常位于该目录结构的更深处。

但是，如果您安装多个具有相同前缀的模块，它们应该都可以使用相同的`PERL5LIB`值。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-26T16:57:41.283

长话短说，使用[`INSTALL_BASE`](https://metacpan.org/module/ExtUtils::MakeMaker#INSTALL_BASE)代替`PREFIX`. 它的工作方式更像`--prefix`其他安装程序，并创建可预测的安装模式。然后你可以设置`PERL5LIB`去`<INSTALL_BASE>/lib/perl5`。

[ExtUtils::MakeMaker::FAQ](https://metacpan.org/module/ExtUtils::MakeMaker::FAQ)解释：

> PREFIX 的行为很复杂，并且密切依赖于 Perl 的配置方式。由此产生的安装位置会因机器而异，甚至同一台机器上的 Perl 安装也会不同。因此，很难记录前缀将放置模块的位置。
> 
> 相反，INSTALL_BASE 具有可预测的、易于解释的安装位置。现在 Module::Build 和 MakeMaker 都有 INSTALL_BASE ，除了保留现有的安装位置之外，几乎没有理由使用 PREFIX。如果您要开始全新的 Perl 安装，我们鼓励您使用 INSTALL_BASE。如果您通过 PREFIX 安装了现有安装，请考虑将其移动到与 INSTALL_BASE 匹配的安装结构并改用它。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-26T15:08:33.310

What version of perl? You should only have to specify the path up to 'site_perl'. For libraries not under site_perl, you should also specify the path up to 'perllib'. More recent versions of perl (5.8 or better?) are better at letting you specify only these two directories, without having to specify version and architecture directories.

# python - pygame图像到base64

> ID：11670354
> 
> 赞同：0
> 
> 时间：2012-07-26T13:27:35.900
> 
> 标签：python, base64, pygame

我像这样捕获我的 pygame 程序的屏幕

```
 data = pygame.image.tostring(pygame.display.get_surface(),"RGB") 
```

如何将其转换为 base64 字符串？（无需将其保存到硬盘）。重要的是没有保存到 HDD。我知道我可以将其保存到文件中，然后将文件编码为 base64，但我似乎无法“即时”编码

谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-26T14:14:18.750

如果需要，可以将其保存到[StringIO](http://docs.python.org/library/stringio.html "字符串IO")，它基本上是存储为字符串的虚拟文件。

但是，我真的建议使用[base64](http://docs.python.org/library/base64.html)模块，它有一个名为`base64.b64encode`. 它可以很好地处理您的“即时”要求。

代码示例：

```
import base64
data = pygame.image.tostring(pygame.display.get_surface(),"RGB")
base64data = base64.b64encode(data) 
```

快乐编码！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-26T21:16:41.653

实际上 -`pygame.image.tostring()` 是一个非常奇怪的函数（真的不理解它返回的二进制字符串，我找不到任何可以正确处理它的东西）。

在 pygame bitbucket 上似乎有一个增强问题：（[https://bitbucket.org/pygame/pygame/issue/48/add-optional-format-argument-to](https://bitbucket.org/pygame/pygame/issue/48/add-optional-format-argument-to)）

我是这样解决的：

```
 data = cStringIO.StringIO()
            pygame.image.save(pygame.display.get_surface(), data)
            data = base64.b64encode(data.getvalue()) 
```

所以最后你得到了有效且正确的 base64 字符串。它似乎有效。还不确定格式，将添加更多信息tmrw

# java - 如何为 org.quartz.JobDetail 创建自定义编辑器？

> ID：11670358
> 
> 赞同：0
> 
> 时间：2012-07-26T13:27:50.317
> 
> 标签：java, spring, quartz-scheduler

我正在尝试设置 CronTriggerFactoryBeanusing `Spring`，它有一个名为**JobDetail**的属性，我正在尝试对其进行初始化。

```
 <bean id="cronTrigger" class="org.springframework.scheduling.quartz.CronTriggerFactoryBean">
        <property name="name" value="NTrigger"></property>
        <property name="group" value="Group Trigger"></property>
        <property name="jobDetail" value="Group Trigger"></property>
        <property name="cronExpression" value="${quartz.slaPollerCronExpression.timeInterval}"></property>
    </bean> 
```

但我收到一个错误：

```
org.springframework.beans.factory.BeanCreationException: Error creating bean with name
'cronTriggerForSLAPoller' defined in ServletContext resource [/WEB-INF/config/quartz
-config.xml]: Initialization of bean failed; nested exception is
org.springframework.beans.ConversionNotSupportedException: Failed to convert property value
of type 'java.lang.String' to required type 'org.quartz.JobDetail' for property
'jobDetail'; nested exception is java.lang.IllegalStateException:
Cannot convert value of type [java.lang.String] to required type [org.quartz.JobDetail
for property 'jobDetail': no matching editors or conversion strategy found. 
```

我认为它`String`作为默认类型。

我看看`[propertyeditors][1]`。我想我将需要使用`ClassEditor`. 我想对了吗？

如何消除此错误？如何为此创建自定义编辑器？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-26T13:33:26.103

看来您需要传递引用而不是字符串：

```
Failed to convert property value of type 'java.lang.String' to required type 'org.quartz.JobDetail' for property 'jobDetail' 
```

**CronTriggerFactoryBean**

```
/**
 * Set the JobDetail that this trigger should be associated with.
 */
public void setJobDetail(JobDetail jobDetail) {
    this.jobDetail = jobDetail;
} 
```

请参阅*[第 23 章。调度和线程池](http://static.springsource.org/spring/docs/2.5.x/reference/scheduling.html)*。

```
<bean id="exampleJob" class="org.springframework.scheduling.quartz.MethodInvokingJobDetailFactoryBean">
    <property name="targetObject" ref="exampleBusinessObject" />
    <property name="targetMethod" value="doIt" />
    <property name="concurrent" value="false" />
</bean>

<bean id="cronTrigger" class="org.springframework.scheduling.quartz.CronTriggerBean">
    <property name="jobDetail" ref="exampleJob" />
    <!-- Runs every morning at 6 AM -->
    <property name="cronExpression" value="0 0 6 * * ?" />
</bean> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-26T13:36:53.593

您需要创建一个转换模式。

1.  更改 `<property name="jobDetail" value="Group Trigger"></property>`为 `<property name="jobDetail" ref="myconversion" />`
2.  添加转换模式：

    ```
    <bean id="myconversion" class="org.springframework.scheduling.quartz.JobDetailBean"> 
    <property name="jobClass" value="com.nuance.ndm.ou.jobs.MserverCalllogTransformerJob" /> 
    <property name="jobDataAsMap"> 
      <map> 
        <entry key="groupTrigger" value="Group Trigger"" />            
      </map> 
    </property> 
    ```

# x509certificate2 - 使用 X509Certificate Pfx 进行客户端证书身份验证会在 C:\ProgramData\Microsoft\Crypto\RSA\MachineKeys 中创建太多临时文件

> ID：11670361
> 
> 赞同：2
> 
> 时间：2012-07-26T13:28:03.487
> 
> 标签：x509certificate2

我们正在使用带有 HttpWebRequest 的 ClientCertificate 身份验证。对于客户端证书身份验证，我们从 Pfx 文件创建 X509Certificate 并附加到传出的 HttpWebRequest。

我们看到的是，在创建请求后，我们看到了文件夹中的许多临时文件：C:\ProgramData\Microsoft\Crypto\RSA\MachineKeys

随着我们提出更多请求，我们看到在 C:\ProgramData\Microsoft\Crypto\RSA\MachineKeys 文件夹中创建的临时文件数量不断增加。

我们从 pfx 文件创建证书，然后设置密钥容器。使用 CryptoKeySecurity 和 CryptKeyAccessRule 授予显式访问权限。私有方法 SetKeyContainerSecurity 采用 CspKeyContainerInfo 和 CryptoSecurity。然后它使用 CryptAcquirecontext 和 CryptSetProvParam 来设置密钥容器的安全性。

我们面临的问题是在磁盘中创建大量临时文件的位置：C:\ProgramData\Microsoft\Crypto\RSA\MachineKeys。

确保删除这些临时文件的正确方法是什么。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-25T16:43:13.273

[http://support.microsoft.com/kb/931908](http://support.microsoft.com/kb/931908)上的修补程序是否相关？它解决了“在基于 Windows Server 2003 或基于 Windows Server 2008 的客户端计算机上，系统不会删除应用程序调用“CryptQueryObject”函数时创建的临时文件”的问题

# ms-access - JRO 同步 accdb 访问（不是 mdb！）数据库？

> ID：11670365
> 
> 赞同：1
> 
> 时间：2012-07-26T13:28:20.503
> 
> 标签：ms-access, ms-access-2010, synchronize

我可以使用 JRO 来同步 accdb 访问（不是 mdb！）数据库吗？
如果是这样怎么办？谢谢

# licensing - 提交新文件时的 GPL 版权声明

> ID：11670368
> 
> 赞同：20
> 
> 时间：2012-07-26T13:28:26.557
> 
> 标签：licensing, gpl

在贡献新文件而不是修改文件时，如何编写 GPL 版权声明？在项目中，所有文件都以：

```
/**
 * Some open source application
 * Component Foo
 * (C) 20?? by Scruffy H. Hacker (scruffy@foo.bar)
 * Released under the GPL
 *
 * Awesome description here.
 */ 
```

我是否应该只将我的名字写在版权声明中，如下所示：

```
/**
 * Some open source application
 * Component Bar
 * (C) 20?? by Tobier Hackerson <tobier@foo.bar)
 * Released under the GPL
 *
 * Awesome description here.
 */ 
```

或者我应该包括项目的原始创建者：

```
/**
 * Some open source application
 * Component Bar
 * (C) 20?? by Scruffy H. Hacker (scruffy@foo.bar)
 * (C) 20?? by Tobier Hackerson (tobier@foo.bar)
 * Released under the GPL
 *
 * Awesome description here.
 */ 
```

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-08-05T10:16:57.817

GPL 不是按文件的 copyleft 许可，而是按整个软件包的许可。

所以新文件也应该在 GPL 下获得许可。由于原始许可标头没有指定 GPL 版本，您可以选择您喜欢的任何 GPL 版本。如果您想了解更多关于为什么有多个 GPL 版本以及它如何与升级许可证版本一起使用的更多信息，请参阅：

*   [为什么程序应该说“GPL 版本 3 或任何更高版本”？^(*GPL 常见问题解答*)](http://www.gnu.org/licenses/gpl-faq.html#VersionThreeOrLater)

 *因此，在澄清许可版本后，您会询问版权声明以及将您的姓名放在哪里。我不是你的律师，作为一名软件开发人员在这里发言，要从所有角度完全回答这个问题并不容易，所以我试图概述我对我认为发挥作用的部分的理解。

根据版权，您将多位作者的多部作品汇集在一起​​。您正在创建一个组合作品。对于版权意义上的每件作品，您都有作者和版权所有者。

对于合并后的作品，您也拥有此版权，然后合并。

所以对于单个文件，如果你是自己写的，假设是 2012，因为你是作者，你可以写你自己的版权标题：

```
/**
 * My Extension to some open source application
 *
 *  Copyright 2012 by Tobias Eriksson <author@tobier.se>
 */ 
```

如果该文件位于您的硬盘驱动器上，那将是完全可以的。然后你想分发它，所以明确许可证是*明智的。*假设您选择了 GPL-3.0+。遵循指导方针

*   [如何为您自己的软件使用 GNU 许可证^(*GNU DOCS*)](http://www.gnu.org/licenses/gpl-howto.html)

 *和一些评论/文档块标记指南：

*   [使用 SPDX 许可证列表标记和链接^(*Hakres 的提示*)](http://hakre.wordpress.com/2012/07/25/using-the-spdx-license-list-for-tagging-and-linking/)

 *您可能希望使用车牌扩展它，如下例所示：

```
/**
 * My Extension to some open source application
 *
 *  Copyright 2012 by Tobias Eriksson <author@tobier.se>
 *
 * This file is part of some open source application.
 * 
 * Some open source application is free software: you can redistribute 
 * it and/or modify it under the terms of the GNU General Public 
 * License as published by the Free Software Foundation, either 
 * version 3 of the License, or (at your option) any later version.
 * 
 * Some open source application is distributed in the hope that it will 
 * be useful, but WITHOUT ANY WARRANTY; without even the implied warranty 
 * of MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
 * GNU General Public License for more details.
 * 
 * You should have received a copy of the GNU General Public License
 * along with Foobar.  If not, see <http://www.gnu.org/licenses/>.
 *
 * @license GPL-3.0+ <http://spdx.org/licenses/GPL-3.0+>
 */ 
```

此牌照可确保接收文件的人可以看到此文件在哪个许可证下，他们对代码拥有哪些权利。他们还可以通过您的版权声明看到原作者。在我看来，这里最重要的部分是明确：a）谁是作者/版权持有者，b）什么是许可证。这样这些信息就不会丢失，是可见的。如果您想遵循由您决定的建议。为了不削减您自己的作者的权利，我强烈建议您至少保留您的姓名，即使根据法律这不是必需的（但如果您不这样做并且其他人将她放在以后，您将无法记录您的作者身份里面有名字）。

所以现在您可以建议将此文件添加到上游。这是迄今为止您第一次接触到该软件的原作者。他们可能有自己的做事方式，可能更喜欢自己的标题等。所以你离开了法律基础，进入了一个社交领域，合作，一起工作。

您可以事先询问在项目内部如何管理它，通常有多种方法可以做，两种常见的方法是：

*   管理每个文件的许可和版权
*   集中管理许可和版权。

当项目开始时，每个文件的方法很方便。当项目变得更大时，中心方法很方便。

每个文件的方法在上面有所概述，它需要跟踪每个文件的许可和版权/作者信息的变化。

在一个中心方法中，一个公认的过程是有一个所谓的 AUTHORS（可能还有一个 CONTRIBUTORS）文件，列出软件的作者，并有一个包含许可证的 COPYING 文件（如果它是整个软件包的单个文件，否则主要许可证加上附加许可证）。

也可能发生两种概念混合在一起的情况，例如，整个包都在 GPL 下，但在代码库中也有 MIT 或 BSD 类型许可证下的代码。然后，您应该保留这些部分的许可证信息，以便将这些部分的更改返回给上游。此外，应该让为这些部分做出贡献的作者意识到他们需要在 MIT / BSD 下许可他们的更改，并保留该部分的许可。如果您想了解更多相关信息以及有关如何以及在何处记录许可的一些详细信息，请阅读以下内容：

*   [在 GPL 许可项目中维护许可文件：开发人员指南^(*SFLC 论文*)](http://www.softwarefreedom.org/resources/2007/gpl-non-gpl-collaboration.html)

 *然后，中心方法允许减少每个文件顶部的版权标题和牌照：

```
/**
 * Some open source application
 *
 *  Copyright 2010, 2012 by it's authors. 
 *  Some rights reserved. See COPYING, AUTHORS.
 */ 
```

如果您正在寻找信息压缩并且作者可以在每个文件中看不到他们的名字。你不能用超级巨星做到这一点，真的。所以可能会有一个社会排名，谁的名字排在第一位等等。但是不要让自己被愚弄：如果你是作者，你有权看到你的名字。如果有人否认你的权利，你就是被骗了。正如您可以想象的那样，这也说明了很多关于（免费）软件项目中的尊重。

从技术上讲，您*在顶部*添加您的版权行是完全可以的，因为是您进行了最新的更改。许可证只告诉你需要保留原始版权，而不是你需要把它放在上面：

```
/**
 * Some open source application
 *
 *  Copyright 2012 by Tobias Eriksson <author@tobier.se>
 *  Copyright 2010, 2011 by Scruffy H. Hacker <scruffy@foo.bar>
 *
 *  Licensed under GNU General Public License 3.0 or later. 
 *  Some rights reserved. See COPYING, AUTHORS.
 *
 * @license GPL-3.0+ <http://spdx.org/licenses/GPL-3.0+>
 */ 
```

可能是此类许可证/版权标头文档块的更常见/真实示例。记住要始终像对待自己的作者一样尊重其他作者。这通常在合作项目中效果最好，法律方面除外。当事情不再内联时，您只需要法律文件。

另见：

*   [自动管理源文件中的许可证/作者/版本标头](https://stackoverflow.com/q/9990094/367456)
*   [许可证和作者维护](https://stackoverflow.com/q/10055372/367456)

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-07-26T13:37:42.527

# 伊纳尔

如果原始作者贡献了此文件中的任何代码（例如，您复制了他的一个文件并对其进行了修改），那么两者都应该被记入。如果您编写了所有代码，那么您的名字就足够了。

您应该符合项目模板，但通常您会包含以下内容：

```
* Released under the GNU General Public License 
```

'GPL' 并不像它应该的那样精确。您可能还需要指定版本。有关详细信息，请参阅许可证（[版本 2](http://www.gnu.org/licenses/gpl-2.0.html)或[版本 3](http://www.gnu.org/licenses/gpl-3.0.html)）本身。就目前而言，理论上它可以在 GPL 版本 1 下发布，尽管这不太可能是任何人的想法（但律师不会认为假设有任何问题）。

GNU GPL 版本 2 建议（最后，在“如何将这些条款应用于您的新程序”下）：

```
one line to give the program's name and an idea of what it does.
Copyright (C) yyyy  name of author

This program is free software; you can redistribute it and/or
modify it under the terms of the GNU General Public License
as published by the Free Software Foundation; either version 2
of the License, or (at your option) any later version. 
```

（以及另外两段）。****

# sql - 如何在 PL/SQL 中使用 `SELECT COUNT(*)` 作为条件语句？

> ID：11670369
> 
> 赞同：0
> 
> 时间：2012-07-26T13:28:26.700
> 
> 标签：sql, plsql, count

我有一个存储过程，如果记录存在则更新记录，如果记录不存在则添加新记录。

SQL：

```
CREATE OR REPLACE PROCEDURE ADDRECORD(ihost VARCHAR, iip VARCHAR)
AS 
   rc VARCHAR(4000);
   ROWCOUNT NUMBER;
BEGIN
   rc := 'select count(0) from myTable where physical_host =  ihost and primary_ip = iip';
   ROWCOUNT := to_number(rc, '99');

   IF ROWCOUNT = 1 THEN
      UPSERTRECORD(ihost, iip);
   ELSE
      INSERT INTO myTable(PHYSICAL_HOST, PRIMARY_IP)
      VALUES (ihost, iip);
      INSERT INTO IP (IP, IP_IND) VALUES (iip, 'V');
   END IF;    
END ADDRECORD; 
```

这`UPSERTRECORD`是另一个被调用的存储过程。它工作正常。事实上，错误发生在包含`to_number`. 错误是：

```
ORA-06502: PL/SQL: numeric or value error: character to number conversion error 
```

还有另一种方法可以做到这一点吗？抱歉，我对 SQL 不是很有经验，但我需要弄清楚这一点。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-26T13:33:33.717

做

```
DECLARE rowcount As Number(38)
select count(*) INTO rowcount from myTable 
where physical_host =  ihost and primary_ip = iip 
```

# c++ - C++ libPNG - 简单的初始化错误

> ID：11670371
> 
> 赞同：1
> 
> 时间：2012-07-26T13:28:37.580
> 
> 标签：c++, macos, clang, libpng

尝试编译时出现以下错误......

> 架构 x86_64 的未定义符号：“_png_sig_cmp”，引用自：RenderUtils.o 中的 RenderUtils::isValidPng(std::istream&) ld：未找到架构 x86_64 的符号 clang：错误：链接器命令失败，退出代码为 1 (使用 -v 查看调用）

我的代码如下：

```
//called from here
ifstream s;
s.open("/Users/tmg06qyu/Desktop/texture_512.png", ios::binary);

if(!RenderUtils::isValidPng(s)){
    throw 20;
}

//header
class RenderUtils{
public:
    static bool isValidPng(std::istream &source);
};

//implementation
#include <iostream>
#include "RenderUtils.h"
#include "png.h"
#define PNGSIGSIZE 8

using namespace std;

bool RenderUtils::isValidPng(std::istream &source){
//Allocate a buffer of 8 bytes, where we can put the file signature.
png_byte pngsig[PNGSIGSIZE];
int is_png = 0;

//Read the 8 bytes from the stream into the sig buffer.
source.read((char*)pngsig, PNGSIGSIZE);

//Check if the read worked...
if (!source.good()) return false;

//Let LibPNG check the sig. If this function returns 0, everything is OK.
is_png = png_sig_cmp(pngsig, 0, PNGSIGSIZE);
return (is_png == 0);
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-26T13:40:12.257

我的猜测是您构建了一个 32 位版本的 libpng，但现在您正试图将 64 位代码与其链接。尝试`file *`或`otool -L *`检查（根据记忆）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-26T15:32:56.883

对不起大家....愚蠢的我。我需要链接到 zlib .....注意自我......总是阅读自述文件......（并非总是如此！）

# syntax-highlighting - 用于 AspectJ 的 Pygments 词法分析器

> ID：11670373
> 
> 赞同：0
> 
> 时间：2012-07-26T13:28:38.943
> 
> 标签：syntax-highlighting, aspectj, pygments

我刚刚询问了 GitHub 上的支持人员，为什么 AspectJ (*.aj) 文件没有语法高亮显示。答案是他们正在使用 Pygments，但不知道任何现有的 AspectJ 词法分析器。我做了一个快速的网络搜索，也没有找到任何东西。这里有没有人写过或者可以指向我现有的链接？

很久以前，我为 Kconfig（Linux 内核配置）文件编写了一个词法分析器，但这对我来说相当困难，因为我不会说 Python。所以在我再次开始折磨我的大脑之前，我认为我应该先问清楚，而不是重新发明轮子。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-08T14:29:23.150

在`JavaLexer`最初创建了一个“复制、粘贴和修改”解决方案之后，因为我真的不会说 Python，我设法破解了另一个 quick'n'dirty 解决方案，`JavaLexer`它在大多数情况下子类和委托对它进行词法分析。例外是

*   AspectJ 特定的关键字，
*   处理类型间声明后跟没有空格的冒号不是作为 Java 标签，而是作为 AspectJ 关键字加上“：”运算符和
*   将类型间注释声明作为 AspectJ 关键字处理，而不是作为 Java 名称装饰器。

我确信我的小启发式解决方案遗漏了一些细节，但正如 Andrew Eisenberg 所说：一个不完美但可行的解决方案比一个不存在的完美解决方案要好：

```
class AspectJLexer(JavaLexer):
    """
    For `AspectJ <http://www.eclipse.org/aspectj/>`_ source code.
    """

    name = 'AspectJ'
    aliases = ['aspectj']
    filenames = ['*.aj']
    mimetypes = ['text/x-aspectj']

    aj_keywords = [
        'aspect', 'pointcut', 'privileged', 'call', 'execution',
        'initialization', 'preinitialization', 'handler', 'get', 'set',
        'staticinitialization', 'target', 'args', 'within', 'withincode',
        'cflow', 'cflowbelow', 'annotation', 'before', 'after', 'around',
        'proceed', 'throwing', 'returning', 'adviceexecution', 'declare',
        'parents', 'warning', 'error', 'soft', 'precedence', 'thisJoinPoint',
        'thisJoinPointStaticPart', 'thisEnclosingJoinPointStaticPart',
        'issingleton', 'perthis', 'pertarget', 'percflow', 'percflowbelow',
        'pertypewithin', 'lock', 'unlock', 'thisAspectInstance'
    ]
    aj_inter_type = ['parents:', 'warning:', 'error:', 'soft:', 'precedence:']
    aj_inter_type_annotation = ['@type', '@method', '@constructor', '@field']

    def get_tokens_unprocessed(self, text):
        for index, token, value in JavaLexer.get_tokens_unprocessed(self, text):
            if token is Name and value in self.aj_keywords:
                yield index, Keyword, value
            elif token is Name.Label and value in self.aj_inter_type:
                yield index, Keyword, value[:-1]
                yield index, Operator, value[-1]
            elif token is Name.Decorator and value in self.aj_inter_type_annotation:
                yield index, Keyword, value
            else:
                yield index, token, value 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-29T03:53:21.200

如果您从 Java 词法分析器开始，aspectj 的语法高亮应该很容易实现。词法分析器将与 Java 相同，但有一些额外的关键字。

有关 AspectJ 特定关键字的列表，请参见此处：http: [//git.eclipse.org/c/ajdt/org.eclipse.ajdt.git/tree/org.eclipse.ajdt.core/src/org/eclipse/ ajdt/core/AspectJPlugin.java](http://git.eclipse.org/c/ajdt/org.eclipse.ajdt.git/tree/org.eclipse.ajdt.core/src/org/eclipse/ajdt/core/AspectJPlugin.java)

这里是Java关键字： http: [//git.eclipse.org/c/ajdt/org.eclipse.ajdt.git/tree/org.eclipse.ajdt.ui/src/org/eclipse/ajdt/internal/ui /editor/AspectJCodeScanner.java](http://git.eclipse.org/c/ajdt/org.eclipse.ajdt.git/tree/org.eclipse.ajdt.ui/src/org/eclipse/ajdt/internal/ui/editor/AspectJCodeScanner.java)

# xsl-fo - 如何防止我的页脚在 xsl-fo 中溢出？

> ID：11670374
> 
> 赞同：6
> 
> 时间：2012-07-26T13:28:46.050
> 
> 标签：xsl-fo, apache-fop

我正在从我的 xsl 和 xml 文件生成一个 pdf，其中我需要在第一页的末尾显示一个表格。但是由于该表上方也有一些表，因此将其显示为静态文本会将其向下推到第 2 页（或第 3 页，依此类推）。所以我想把这张表作为页脚（就在第一页上）。

所以我将此表定义为我的 xsl 文件中的页脚。我的表在以下代码下 `<fo:static-content flow-name="xsl-region-after" font-size="10pt">`

当我尝试生成 pdf 时，页脚表中的一些行溢出并且在 pdf 上不可见。（我认为这与区域后部分的固定大小有关）

如何修复它以便我可以在页脚中获取所有文本？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-27T08:25:02.427

我得到了它。对于所有遇到相同问题的人 - 增加`<fo:region-after extent="4cm"/>`.

然后添加属性“space-after” - `<fo:region-body space-after="125pt"/>`。

它解决了两个问题 - 页脚溢出和区域主体和区域重叠后。

# selenium - 访问 Selenium 类函数所需的 Jar 文件

> ID：11670378
> 
> 赞同：2
> 
> 时间：2012-07-26T13:29:04.467
> 
> 标签：selenium, jar, selenium-rc, selenium-webdriver

目前，我已包含以下 JAR 文件来使用 JAVA 播放 selenium 录音。

1.  junit-4.10.jar
2.  selenium-java-2.24.1.jar
3.  selenium-server-standalone-2.24.1.jar

我也导入了这些包

```
import com.thoughtworks.selenium.Selenium;
import java.util.NoSuchElementException;
import java.util.concurrent.TimeUnit;

import org.junit.After;
import static org.junit.Assert.fail;
import org.junit.Before;
import org.junit.Test;

import org.openqa.selenium.Alert;
import org.openqa.selenium.By;
import org.openqa.selenium.NoAlertPresentException;
import org.openqa.selenium.WebDriver;
import org.openqa.selenium.WebElement;
import org.openqa.selenium.firefox.FirefoxDriver;
import org.openqa.selenium.htmlunit.HtmlUnitDriver;
import org.openqa.selenium.support.ui.Select; 
```

但是只有这些，我无法访问像 getAlert() 或 getConfirmation() 这样的 selenium 类函数。

那么有没有我错过的任何库文件或 JAR 文件？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-30T12:07:05.140

[您可以从Selenium HQ 站点](http://seleniumhq.org/download/)下载 Java 客户端驱动程序包 2.25.0 ，然后将所有 jars 添加到项目的引用库中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-28T06:48:52.803

您没有导入 com.thoughtworks.selenium 包中的 DefaultSelenium 类，因此将此行添加到您的代码中，它将起作用。

导入 com.thoughtworks.selenium.DefaultSelenium；

# debian - Debian软件包卸载过程

> ID：11670379
> 
> 赞同：2
> 
> 时间：2012-07-26T13:29:05.037
> 
> 标签：debian, apt-get, dpkg

我有一个定制的 Debian 软件包，现在可以正常安装和卸载，但有几个问题：

1.  我想知道如何使卸载过程检查磁盘上的文件。假设如果文件`/etc/file.conf`存在，我不希望软件包被卸载。那可能吗？我尝试将检查添加到 prerm 和 postrm，但是即使如果 prerm 和 postrm 脚本退出并出现错误，软件包安装的所有文件都会被删除。

我猜我应该在这些脚本中使用特定的退出代码？

2.  在卸载过程中，有时某些由包创建的目录不会被删除，因为它们不是空的。错误类似于：*“dpkg：警告：删除包名时，目录 '/opt/packagename/' 不为空，因此未删除。”* 尽管有内容，有没有办法强制删除软件包安装的所有文件？

我已经通过文档几次寻找答案，但似乎我没有找到正确的地方。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-27T19:34:34.897

> 我想知道如何使卸载过程检查磁盘上的文件。假设如果文件 /etc/file.conf 存在，我不希望软件包被卸载。那可能吗？我尝试将检查添加到 prerm 和 postrm，但是即使如果 prerm 和 postrm 脚本退出并出现错误，该软件包安装的所有文件都会被删除。

prerm 脚本的非零退出**不会**删除所有已安装的文件。

```
#!/bin/sh
if [ -x /etc/file.conf ]; then
  echo "You shall not remove me" >&2
  exit 1
fi 
```

> 在卸载过程中，某些由打包创建的目录有时不会被删除，因为它们不是空的。错误类似于：“dpkg：警告：删除包名时，目录 '/opt/packagename/' 不为空，因此未删除。” 尽管有内容，有没有办法强制删除软件包安装的所有文件？

软件包安装的文件将被删除。该警告表示在应用程序生命周期内创建的文件。您可以使用 postrm 脚本来删除它们。

附带说明一下，包不应该将东西放入 /opt。

# python - 使用 Python 在命令提示符下执行一些简单的命令

> ID：11670381
> 
> 赞同：0
> 
> 时间：2012-07-26T13:29:09.210
> 
> 标签：python, command-prompt

我需要使用 Python26 在 Windows 7 命令提示符中执行下面的简单命令。

```
cd C:\Python26\main project files\Process

C:\Aster\runtime\waster Analysis.comm 
```

它运行有限元模拟，我手动尝试过，效果很好。现在，我想使用 Python26 自动化写入过程。

我研究了其他问题，发现 os.system 有效，但没有。我也看到了 subprocess 模块，但它没有用。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-26T13:36:38.003

当前目录是一个进程属性：每个进程都有自己的当前目录。像一条线

```
os.system("cd xyz") 
```

启动命令解释器（`cmd.exe`在 Windows 7 上）并`cd`在此子进程中执行命令，不会以任何方式影响调用进程。要更改调用进程的目录，可以使用`os.chdir()`或`cwd`关键字参数为`subprocess.Popen()`.

示例代码：

```
p = subproces.Popen(["C:/Aster/runtime/waster", "Analysis.comm"],
                    cwd="C:/Python26/main project files/Process")
p.wait() 
```

（旁注：在 Python 文件的路径名中使用正斜杠。除非确实必要，否则应避免`os.system()`并传递`shell=True`给模块中的函数。）`subprocess`

# ajax - 在 commandButton 中更新操作后调用 bean 的方法

> ID：11670383
> 
> 赞同：0
> 
> 时间：2012-07-26T13:29:18.367
> 
> 标签：ajax, jakarta-ee, jsf-2, primefaces

我试过这样的事情：

```
<p:commandButton type="push" value="Ack" disabled="false"
    oncomplete="bean.method2()" update=":form:alarmTable"
    action="#{bean.method1()}" 
```

但是method2不会调用，否则：

```
<p:commandButton type="push" value="Ack" disabled="false"
    oncomplete="alert('onComplete')" update=":form:alarmTable"
    action="#{bean.method1()}" 
```

按预期工作。

我想实现下一个动作链：method1-update-method2。怎么办？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-26T15:36:29.640

正如其他所有人都同意的那样，您可能不应该尝试在您的视图中调用方法。您应该做的是在您的支持者中从 method1 调用您的 method2。

例子：

```
public void method1() {
  // do stuff
  method2();
}

public void method2() {
  // do stuff
} 
```

# javascript - jsonPath 和意外的非法令牌

> ID：11670384
> 
> 赞同：1
> 
> 时间：2012-07-26T13:29:23.117
> 
> 标签：javascript, jquery, json, xpath, jsonpath

将以下字符串传递给 jsonPath 以过滤对象集合时：

```
$[?(en|**|(@.object.property.one=='other') && (@.object.property.two=='something(abc/def)'))] 
```

我收到以下错误：

```
jsonPath: Unexpected token ILLEGAL: (_v.object.property.one=='other') && (_v.object.property.two=='something(abc/def)) 
```

我最初的猜测是非法字符与圆括号或文字值中存在的正斜杠有关。这可以解释为什么最后一个文字周围缺少单引号。我尝试转义圆括号和正斜杠，但无济于事。什么会导致过滤方法抛出上述异常？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-26T13:55:10.330

快速阅读 jsonPath 文档后，看起来括号并不能起到您想像的作用。

在 XPath 中，括号用于进行分组，但在 jsonPath 中，它们用于脚本表达式（使用任何底层脚本引擎）。

可能是您作为脚本表达式呈现的值无效。

# android - 更改所有按钮的背景

> ID：11670385
> 
> 赞同：1
> 
> 时间：2012-07-26T13:29:23.377
> 
> 标签：android, android-button

我想改变所有的`Buttons`背景`View`。

```
android:background="@drawable/button_red" 
```

我想在`OnClick()`活动中这样做。

```
android:onClick="ChangeCouleur" 
```

我想`foreach`循环执行此操作，但我不确定如何执行此操作。

例如：

```
for( b in ... )
    if (b.getid()!=idofthebutton)
         b.setbackgroud(button_red) 
```

谢谢你的帮助！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-26T13:37:25.347

把你所有的都`Buttons`放在一个`Array`中`Buttons`，然后循环到它改变背景。

```
Button button1 = (Button)this.findViewById(...);
Button button2 = (Button)this.findViewById(...);
Button button3 = (Button)this.findViewById(...);

Button[] buttons={button1, button2, button3};

for (Button currentButton : buttons) {
    currentButton.setBackgroundResource(R.drawable.my_new_background);
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-26T13:34:02.960

用于更改单击按钮的背景

```
public void changeColor(View v) {
    v.setBackground(btn_red);
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-26T13:34:53.017

您可以做的一件事是 subclass `Button`，然后在您的应用程序实例中创建新类的所有按钮。这样，如果您决定要调整颜色或更改其他内容，您只需执行一次，它将更改应用程序中的所有按钮。[这是一个问题](https://stackoverflow.com/questions/8436077/subclass-button-with-android-lots-of-errors)，应该给你一些关于如何做到这一点的指示。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-26T13:38:10.743

您将必须获得对所有按钮的引用。将它们添加到 ArrayList 或类似的东西。在您的 ChangeCouleur 方法中，使用循环遍历所有更改每个按钮颜色的按钮。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-07-26T13:48:27.387

在“res/drawable/”中创建 .XML 文件并在其中使用选择器属性。并为按钮使用不同的图像。请参考此链接。

[http://www.mkyong.com/android/android-imagebutton-selector-example/](http://www.mkyong.com/android/android-imagebutton-selector-example/)

这将清除您的想法。:)

# python - Python网络爬虫

> ID：11670389
> 
> 赞同：-4
> 
> 时间：2012-07-26T13:29:28.990
> 
> 标签：python, web-crawler

是否有任何 python 爬虫可以从网页中提取所有数据，例如：[http ://www.bestbuy.com/site/HTC+-+One+S+4G+Mobile+Phone+-+Gradient+Blue+%28T-Mobile %29/4980512.p?id=1218587135819&skuId=4980512&contract_desc=](http://www.bestbuy.com/site/HTC+-+One+S+4G+Mobile+Phone+-+Gradient+Blue+%28T-Mobile%29/4980512.p?id=1218587135819&skuId=4980512&contract_desc=) 在此页面中，客户评论有两个页面 1 和 2。我想抓取他的 url 并获取两个页面的内容。这可能与 python 爬虫。

python爬虫也支持所有现代的GET/POST技术

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-07-26T13:32:00.637

你可以使用[Scrapy](http://scrapy.org/)：

> Scrapy 是一个快速的高级屏幕抓取和网络抓取框架，用于抓取网站并从其页面中提取结构化数据。它可用于广泛的用途，从数据挖掘到监控和自动化测试。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-26T14:47:48.627

如果您想抓取网站，请参阅[这篇文章](https://stackoverflow.com/questions/2667509/curl-alternative-in-python)。如果您只想处理一些页面并分析它们的内容（意味着您知道要处理的 URL），请尝试[BeautifulSoup](http://www.crummy.com/software/BeautifulSoup/)，它允许您执行以下操作：

```
page = urllib2.urlopen(url)
soup = BeautifulSoup(page.read())
for f in soup.findAll('form'):
    target_url = f['action']
    #do something with each one of the forms 
```

# dsl - Drools 5.4.0- DSL 结果错误，包含三个整数和字符串组合的捕获

> ID：11670391
> 
> 赞同：0
> 
> 时间：2012-07-26T13:29:41.083
> 
> 标签：dsl, drools, rule-engine

我正在尝试编写用于处理消息的 DSL。我有几种构造与以下构造一起使用会导致错误-

从 DSL - [结果] []字段 {bit} 验证失败将字段 {bit2} 设置为 "{field_value}"=System.out.println("Test");

在 DSLR 中 - 在字段 2 的验证失败时将字段 39 设置为“181”

奇怪的是，以下工作正常

从 DSL - [结果][]字段 {bit} 验证失败将字段 {bit2} 设置为 {field_value}=System.out.println("Test");

在 DSLR 中 - 在字段 2 的验证失败时将字段 39 设置为 181（请注意“field_value”上已删除的双引号）

难道我做错了什么？. 我正在使用 Drools 5.4.0 Final。

谢谢！

Rule Compilation error : [Rule name='handle authorization transactions for validation failures'] defaultpkg/Rule_handle_authorization_transactions_for_validation_failures_bea353bc1d7c4114aa7fb7548bcc7b83.java (21:1344) : on cannot be resolved to a type defaultpkg/Rule_handle_authorization_transactions_for_validation_failures_bea353bc1d7c4114aa7fb7548bcc7b83.java (21:1358) : Syntax error on token “失败”， ; 预期的 defaultpkg/Rule_handle_authorization_transactions_for_validation_failures_bea353bc1d7c4114aa7fb7548bcc7b83.java (21:1366) : of 无法解析为 defaultpkg/Rule_handle_authorization_transactions_for_validation_failures_bea353bc1d7c418914aa7fb71:14bcc5b78 类型 重复的局部变量字段 defaultpkg/Rule_handle_authorization_transactions_for_validation_failures_bea353bc1d7c4114aa7fb7548bcc7b83.java (21:1375)：令牌“2”的语法错误，；expected defaultpkg/Rule_handle_authorization_transactions_for_validation_failures_bea353bc1d7c4114aa7fb7548bcc7b83.java (22:1450) : on cannot be resolved to a type defaultpkg/Rule_handle_authorization_transactions_for_validation_failures_bea353bc1d7c4114aa7fb7548bcc7b83.java (22:1453) : Duplicate local variable validation defaultpkg/Rule_handle_authorization_transactions_for_validation_failures_bea353bc1d7c4114aa7fb7548bcc7b83.java (22:1464) : Syntax error on token "失败”， ; 预期 defaultpkg/Rule_handle_authorization_transactions_for_validation_failures_bea353bc1d7c4114aa7fb7548bcc7b83.java (22:1472)：of cannot be resolved to a type defaultpkg/Rule_handle_authorization_transactions_for_validation_failures_bea353bc1d7c4114aa7fb7548bcc7b83.java (22:1475) : Duplicate local variable field defaultpkg/Rule_handle_authorization_transactions_for_validation_failures_bea353bc1d7c4114aa7fb7548bcc7b83.java (22:1481) : Syntax error on token "3", ; expected defaultpkg/Rule_handle_authorization_transactions_for_validation_failures_bea353bc1d7c4114aa7fb7548bcc7b83.java (23:1556) : on cannot be resolved to a type defaultpkg/Rule_handle_authorization_transactions_for_validation_failures_bea353bc1d7c4114aa7fb7548bcc7b83.java (23:1559) : Duplicate local variable validation defaultpkg/Rule_handle_authorization_transactions_for_validation_failures_bea353bc1d7c4114aa7fb7548bcc7b83.java (23:1570) : Syntax error on token " 重复的局部变量字段 defaultpkg/Rule_handle_authorization_transactions_for_validation_failures_bea353bc1d7c4114aa7fb7548bcc7b83.java (23:1587)：令牌“4”的语法错误，；预期的 重复的局部变量字段 defaultpkg/Rule_handle_authorization_transactions_for_validation_failures_bea353bc1d7c4114aa7fb7548bcc7b83.java (23:1587)：令牌“4”的语法错误，；预期的

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-27T09:01:10.793

看起来 drools 以递归方式应用规则！我将 DSL 中的条目设为 [consequence][]on 字段 {bit} 的验证失败，将字段 {second_bit} 设置为“{val}”=...

但还有另一个这样的 - [consequence][]set field {bit} to "{field_value}"= ...

所以流口水将第一个条目的最后一部分与第二个条目的 RHS 匹配！。感谢 drools.dump.dir 选项，我可以看到发生了什么！

# shell - 为什么 uniq -c 输出带有空格而不是 \t？

> ID：11670393
> 
> 赞同：8
> 
> 时间：2012-07-26T13:29:41.590
> 
> 标签：shell, awk, uniq

我使用 uniq -c 一些文本文件。它的输出是这样的：

```
123(space)first word(tab)other things
  2(space)second word(tab)other things 
```

……

所以我需要提取总数（比如上面的 123 和 2），但我不知道怎么做，因为如果我用空格分割这一行，它会像这样`['123', 'first', 'word(tab)other', 'things']`。我想知道为什么它不使用标签输出？

以及如何提取shell中的总数？（我终于用python提取了，WTF）

**更新**：对不起，我没有正确描述我的问题。我不想将总数相加，我只想将（空格）替换为（制表符），但这不会影响单词中的空格，因为我仍然需要后面的数据。像这样：

```
123(tab)first word(tab)other things
  2(tab)second word(tab)other things 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-26T13:49:37.977

试试这个：

```
uniq -c | sed -r 's/^( *[^ ]+) +/\1\t/' 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-07-26T13:56:22.320

尝试：

```
uniq -c text.file | sed -e 's/ *//' -e 's/ /\t/' 
```

这将删除行数之前的空格，然后只用制表符替换第一个空格。

要用制表符替换所有空格，请使用 tr：

```
uniq -c text.file | tr ' ' '\t' 
```

要用单个选项卡替换所有连续运行的选项卡，请使用 -s：

```
uniq -c text.file | tr -s ' ' '\t' 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-26T13:37:56.753

您可以使用以下方法对所有数字求和`awk`：

```
awk '{s+=$1}END{print s}' 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-26T13:38:14.420

```
$ cat <file> | uniq -c | awk -F" " '{sum += $1} END {print sum}' 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-26T14:03:45.687

在计数后获取选项卡的一种可能解决方案是编写一个`uniq -c`类似于您想要的格式的脚本。这是一个快速尝试（这似乎通过了我一分钟左右的测试）：

```
awk '
(NR == 1) || ($0 != lastLine) {
    if (NR != 1) {
        printf("%d\t%s\n", count, lastLine);
    }
    lastLine = $0;
    count = 1;
    next;
}
{
    count++;
}
END {
    printf("%d\t%s\n", count, lastLine);
}
' yourFile.txt 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-07-26T14:49:12.573

另一种解决方案。这相当于早期的`sed`解决方案，但它确实`awk`按请求/标记使用！

```
cat yourFile.txt \
    | uniq -c \
    | awk '{
        match($0, /^ *[^ ]* /);
        printf("%s\t%s\n", $1, substr($0, RLENGTH + 1));
      }' 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2020-04-01T03:38:29.897

根据[William Pursell 的回答](https://stackoverflow.com/a/11670788/4970442)，如果您喜欢 Perl 兼容的正则表达式 (PCRE)，也许更优雅和现代的方式是

```
perl -pe 's/ *(\d+) /$1\t/' 
```

选项是[执行 ( `-e`) 和打印 ( `-p`)](https://www.perl.com/pub/2004/08/09/commandline.html/)。

# javascript - 手工与引擎编写的画布性能

> ID：11670396
> 
> 赞同：1
> 
> 时间：2012-07-26T13:29:50.730
> 
> 标签：javascript, html, canvas

我目前正在将游戏开发为 HTML5 画布应用程序，它们在 Chrome 上运行良好；然而，Firefox 和 Opera 都会在最简单的绘图程序上产生明显的延迟（绘制 50 张图像，例如 32x32）。iPad 和 Android Chrome 的性能还不错……低于标准。在桌面上也比 Opera 和 Firefox 更糟糕。

我看到人们在 tilemap 引擎上实现了 60 FPS，即使在更高的分辨率下也是如此。我的问题是：这是怎么做到的？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-26T14:59:28.943

你问了一个有千万个答案的问题。

良好的性能是很多事情的结晶，首先是编写高性能的 JavaScript、良好的编码实践、谨慎使用 Canvas API 以及有时巧妙的 hack。

如果你想提高性能：

1.  获取 Zakas 的高性能 JavaScript 的副本

2.  [阅读有关 Canvas 性能的 HTML5rocks 文章](http://www.html5rocks.com/en/tutorials/canvas/performance/)。那里引用了我的一些[文章。](http://simonsarris.com/blog/tag/performance)

3.  使用浏览器附带的 JavaScript 分析器来查明究竟是什么降低了您的代码速度

4.  向我们展示您的代码并提出具体问题！

# python - mod_wsgi 挂起 RuntimeWarning: 除以零

> ID：11670404
> 
> 赞同：0
> 
> 时间：2012-07-26T13:30:41.820
> 
> 标签：python, apache, warnings, mod-wsgi

我有一些 python 代码可能会导致除以 0，但它在 python (3.2) 解释器中正确运行。但是，如果我尝试使用 mod_wsgi 运行它，它只会挂起而不会出现错误，并且不会提供请求。

解释器中的警告（输出正确）：`pathwayAnalysis.py:30: RuntimeWarning: divide by zero encountered in double_scalars`

有谁知道使用 mod_wsgi 运行它的正确方法是什么？

代码如下。差异和大小都是长度为 2 的 numpy 浮点数组。任何一个浮点数都`difference`可能为 0（但不能同时为 0）。在此之前添加`difference += 0.0001`使其正常运行，但不是一个好的解决方案，因为输出不准确：

```
if abs(difference[0] / difference[1]) > (size[0] / size[1]):
    ratio = abs(size[0] / difference[0])
else: ratio = abs(size[1] / difference[1])
for i in range(len(base)):
    result.append(base[i] + difference[i] * ratio/2)
return array(result) 
```

执行以下操作不起作用：

```
try:
    cond = abs(difference[0] / difference[1]) > (size[0] / size[1])
except RuntimeWarning:
    cond = True
# hangs before this point
if cond:
    '''as above''' 
```

一些测试代码（使用任一`difference`定义）：

```
def application(environ, start_response):
    from numpy import array

    size = array([10., 10.])

    difference = array([115., 0.]) # hangs
    difference = array([115., 10.]) # returns page with text 'Yes.'

    if abs(difference[0]/difference[1]) > (size[0]/size[1]):
        output = 'Yes.'
    else:
        output = 'No.'

    status = '200 OK'

    response_headers = [('Content-type', 'text/plain'),\
        ('Content-Length', str(len(output)))]
    start_response(status, response_headers)

    return [output] 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-29T21:02:50.310

一些使用 C 扩展模块的 Python 第三方包，包括 numpy，只能在 Python 主解释器中工作，不能在子解释器中使用，因为 mod_wsgi 默认使用。结果可能是线程死锁、不正确的行为或进程崩溃。这些在以下内容中有详细说明：

[http://code.google.com/p/modwsgi/wiki/ApplicationIssues#Python_Simplified_GIL_State_API](http://code.google.com/p/modwsgi/wiki/ApplicationIssues#Python_Simplified_GIL_State_API)

解决方法是强制 WSGI 应用程序在进程的主解释器中运行，使用：

```
WSGIApplicationGroup %{GLOBAL} 
```

如果在同一台服务器上运行多个 WSGI 应用程序，您可能希望开始使用守护程序模式进行调查，因为某些框架不允许多个实例在同一个解释器中运行。Django就是这种情况。因此使用守护进程模式，这样每个进程都在自己的进程中，并强制每个进程在各自的守护进程模式进程组的主解释器中运行。

# python - 在对象字典上调用 str

> ID：11670414
> 
> 赞同：1
> 
> 时间：2012-07-26T13:31:02.953
> 
> 标签：python, string, oop, repr

我有一个像这样的对象字典 `{'name1':oject_instance_1,'name2':oject_instance_2,'name3':oject_instance_3}` 在我的对象类定义中，我定义`__str__() method`了方法和`__repr__()`方法，如下所示：

```
def __str__(self):
    return('{0} pathway containing {1} genes, with a total sequence length of {2}'.format(self.id, len(self.genes), self.length))

def __repr(self):
    return self.__str__ 
```

如果重要的话 self.id 是一个字符串，self.genes 是一个列表，self.length 是一个 int

问题是当我去打印这本字典时，我得到：

```
{'pid1003': <Pathway.Pathway instance at 0x10169d680>, 'pid1002': <Pathway.Pathway instance at 0x10169d638>, 'pid1001': <Pathway.Pathway instance at 0x10169d5f0>} 
```

但是像这样循环打印

```
for v in dict.values():
    print(v) 
```

工作正常。

任何想法为什么？谢谢！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-26T13:33:03.460

也许你应该实施`__repr__`，而不是`__repr`。

**编辑：**

并且`__repr__`应该返回一个字符串，而不是一个函数。因此，如评论中所述， return `str(self)`。

# visio - 如何在 visio 2010 中减去形状

> ID：11670415
> 
> 赞同：2
> 
> 时间：2012-07-26T13:31:07.780
> 
> 标签：visio, shapes

我正在使用我们 msdnaa 中的 Visio 2010。我正在搜索从彼此“减去”两个形状的功能。例如，我有一个圆圈，但我只想要半个圆圈，所以我在圆圈上放置一个矩形并“减去”彼此的形状。

我在网上搜索时只找到visio 2003的帮助。必须有这样的功能！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-26T22:21:50.620

您没有说明您是尝试手动执行此操作还是通过自动化执行此操作。

如果您手动执行此操作，则需要使用[Shape Operations](http://office.microsoft.com/en-us/visio-help/about-merged-shapes-HP001025415.aspx)；特别是片段操作。此操作不在功能区上。找到形状操作的一种简单方法是打开开发人员模式，请参阅以下说明：[在开发人员模式下工作](http://social.technet.microsoft.com/Forums/en-US/visiogeneral/thread/176f6300-9bfc-4a76-a59f-252e784ff897/)。或者，您可以自定义现有功能区以添加形状操作。

如果您尝试通过自动化执行此操作，则需要Selection 对象上的[Fragment方法。](http://msdn.microsoft.com/en-us/library/ff768748.aspx)

# c# - 关闭辅助窗口时间歇性抛出 System.AccessViolationException

> ID：11670417
> 
> 赞同：0
> 
> 时间：2012-07-26T13:31:14.670
> 
> 标签：c#, wpf, winforms, exception

我目前正在使用一个 Windows 表单应用程序，该应用程序在单击按钮时会打开一个新窗口。当我关闭第二个窗口时，我间歇性地收到以下异常，这反过来又使我的应用程序崩溃。

> 应用程序：Manager.exe 框架版本：v4.0.30319 描述：进程因未处理的异常而终止。异常信息：System.AccessViolationException 堆栈：在 System.Drawing.SafeNativeMethods+Gdip.GdipDrawImageRectI(System.Runtime.InteropServices.HandleRef, System.Runtime.InteropServices.HandleRef, Int32, Int32, Int32, Int32, Int32, Int32, Int32, Int32 , Int32, System.Runtime.InteropServices.HandleRef, DrawImageAbort, System.Runtime.InteropServices.HandleRef) 在 System.Drawing.Graphics.DrawImage(System.Drawing.Image, System.Drawing.Rectangle, Int32, Int32, Int32, Int32, System.Drawing.GraphicsUnit, System.Drawing.Imaging.ImageAttributes, DrawImageAbort, IntPtr) 在 System.Drawing.Graphics.DrawImage (System.Drawing.Image, System.Drawing.Rectangle, Int32, Int32, Int32, Int32, System.
> 在 System.Windows.Forms.ControlPaint.DrawBackgroundImage（System.Drawing.Graphics，System.Drawing.Image，System.Drawing.Color，System.Windows.Forms.ImageLayout，System.Drawing.Rectangle，System.Drawing.Rectangle，系统.Drawing.Point, System.Windows.Forms.RightToLeft) 在 System.Windows.Forms.Control.PaintBackground(System.Windows.Forms.PaintEventArgs, System.Drawing.Rectangle, System.Drawing.Color, System.Drawing.Point)在 System.Windows.Forms.Control.PaintBackground(System.Windows.Forms.PaintEventArgs, System.Drawing.Rectangle) 在 System.Windows.Forms.Control.OnPaintBackground(System.Windows.Forms.PaintEventArgs) 在 System.Windows.Forms .ScrollableControl.OnPaintBackground(System.Windows.Forms.PaintEventArgs) 在 System.Windows.Forms.Control.PaintWithErrorHandling(System.Windows.Forms.PaintEventArgs,Int16) 在 System.Windows.Forms.Control.WmEraseBkgnd(System.Windows.Forms.Message ByRef) 在 System.Windows.Forms.Control.WndProc(System.Windows.Forms.Message ByRef) 在 System.Windows.Forms.ScrollableControl .WndProc(System.Windows.Forms.Message ByRef) 在 System.Windows.Forms.Control+ControlNativeWindow.OnMessage(System.Windows.Forms.Message ByRef) 在 System.Windows.Forms.Control+ControlNativeWindow.WndProc(System.Windows .Forms.Message ByRef) 在 System.Windows.Forms.NativeWindow.Callback(IntPtr, Int32, IntPtr, IntPtr) 在 System.Windows.Forms.UnsafeNativeMethods.IntBeginPaint(System.Runtime.InteropServices.HandleRef, PAINTSTRUCT ByRef) 在系统。 Windows.Forms.Control.WmPaint(System.Windows.Forms.Message ByRef) 在 System.Windows.Forms.Control.WndProc(System.Windows.Forms.Message ByRef) 在 System.Windows.Forms.ScrollableControl.WndProc(System.Windows.Forms.Message ByRef) 在 System.Windows.Forms.Control+ControlNativeWindow.OnMessage(System.Windows.Forms.Message ByRef) 在 System.Windows。 Forms.Control+ControlNativeWindow.WndProc(System.Windows.Forms.Message ByRef) 在 System.Windows.Forms.NativeWindow.Callback(IntPtr, Int32, IntPtr, IntPtr) 在 System.Windows.Forms.UnsafeNativeMethods.DispatchMessageW(MSG ByRef)IntPtr) 在 System.Windows.Forms.UnsafeNativeMethods.DispatchMessageW(MSG ByRef)IntPtr) 在 System.Windows.Forms.UnsafeNativeMethods.DispatchMessageW(MSG ByRef)
> 在 System.Windows.Forms.Application+ComponentManager.System.Windows.Forms.UnsafeNativeMethods.IMsoComponentManager.FPushMessageLoop(IntPtr, Int32, Int32) 在 System.Windows.Forms.Application+ThreadContext.RunMessageLoopInner(Int32, System.Windows.Forms. ApplicationContext) 在 System.Windows.Forms.Application+ThreadContext.RunMessageLoop(Int32, System.Windows.Forms.ApplicationContext) 在 System.Windows.Forms.Application.Run(System.Windows.Forms.Form) 在 Manager.Program.Main ()

我通常可以在白天毫无问题地打开和关闭，但是如果我让程序在一夜之间运行并尝试在早上打开第二个窗口，当我尝试关闭窗口时会出现此异常。这个异常现在比我第一次开始运行应用程序时更频繁地抛出。

有没有人看到这个异常或知道如何解决它？我在网上进行了广泛搜索，试图找到答案，但一直找不到适用的答案。

# magento - 如何检查 Magento 产品是否已添加到购物车中？

> ID：11670419
> 
> 赞同：9
> 
> 时间：2012-07-26T13:31:15.263
> 
> 标签：magento

我想在 Magento 中首次将产品添加到购物车时显示弹出窗口，并且不想在再次添加或更新产品时显示弹出窗口。简而言之，我想知道将要添加到购物车中的产品是不是第一次出现？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-07-26T15:13:06.873

答案很大程度上取决于您想如何处理父/子类型的产品（如果需要）。

如果您只处理简单的产品或者您有父/子类型的产品并且您需要测试子 ID，那么：

```
$productId = 1;
$quote = Mage::getSingleton('checkout/session')->getQuote();
if (! $quote->hasProductId($productId)) {
    // Product is not in the shopping cart so 
    // go head and show the popup.
} 
```

或者，如果您正在处理父/子类型的产品并且您只想测试父 ID，那么：

```
$productId = 1;
$quote = Mage::getSingleton('checkout/session')->getQuote();

$foundInCart = false;
foreach($quote->getAllVisibleItems() as $item) {
    if ($item->getData('product_id') == $productId) {
        $foundInCart = true;
        break;
    }
} 
```

**编辑**

在评论中询问了为什么`controller_action_predispatch_checkout_cart_add`无法在 cart.phtml 中检索设置注册表值的问题。

本质上，注册表值仅在单个请求的生命周期内可用 - 您发布到 checkout/cart/add 然后被重定向到 checkout/cart/index - 因此您的注册表值丢失。

如果您想在这些之间保留一个值，那么您可以改用会话：

**在你的观察者中：**

```
Mage::getSingleton('core/session')->setData('your_var', 'your_value'); 
```

**检索值**

```
$yourVar = Mage::getSingleton('core/session')->getData('your_var', true); 
```

传递给 getData 的 true 标志将为您从会话中删除该值。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-26T13:36:08.873

为了检查产品是否已经在购物车中，您可以简单地使用以下代码：

```
$productId = $_product->getId(); //or however you want to get product id
$quote = Mage::getSingleton('checkout/session')->getQuote();
$items = $quote->getAllVisibleItems();
$isProductInCart = false;
foreach($items as $_item) {
    if($_item->getProductId() == $productId){
        $isProductInCart = true;
        break;
    }
}
var_dump($isProductInCart); 
```

希望这可以帮助！

# iphone - 在 CocoS2d 中移动图像

> ID：11670420
> 
> 赞同：1
> 
> 时间：2012-07-26T13:31:22.953
> 
> 标签：iphone

我正在用 Cocos2d 开发游戏。在其中，场景的背景随着 x 轴不断移动。我想了解我该怎么做，因为我是 cocos2d 的新手。

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-26T13:50:45.667

看看我的代码 -[这里是源代码](https://docs.google.com/open?id=0B1Fnnssd1z64eW1heWVtcFJsZTA)。在 中找到“移动”技术`HelloWorldLayer.m`。我拍摄了一张 360 度全景照片，并将其从右到左连续移动，全屏显示。

在 YourClass.h 文件中：

```
#import "cocos2d.h"
@interface YourClass : CCLayer

+(CCScene *) scene;

@end 
```

在 YourClass.m 文件中：

```
#import "YourClass.h"

@implementation YourClass

CCSprite *panorama;
CCSprite *appendix;
//_____________________________________________________________________________________
+(CCScene *) scene
{
    // 'scene' is an autorelease object.
    CCScene *scene = [CCScene node];

    // 'layer' is an autorelease object.
    YourClass *layer = [YourClass node];

    // add layer as a child to scene
    [scene addChild: layer];

    // return the scene
    return scene;
}
//_____________________________________________________________________________________
// on "init" you need to initialize your instance
-(id) init
{
    // always call "super" init
    // Apple recommends to re-assign "self" with the "super" return value
    if( (self=[super init])) {

        panorama = [CCSprite spriteWithFile: @"panorama.png"];
        panorama.position = ccp( 1709/2 , 320/2 );
        [self addChild:panorama];

        appendix = [CCSprite spriteWithFile: @"appendix.png"];
        appendix.position = ccp( 1709+480/2-1, 320/2 );
        [self addChild:appendix];

        // schedule a repeating callback on every frame
        [self schedule:@selector(nextFrame:)];

    }
    return self;
}
//_____________________________________________________________________________________
- (void) nextFrame:(ccTime)dt {

    panorama.position = ccp(panorama.position.x - 100 * dt, panorama.position.y);
    appendix.position = ccp(appendix.position.x - 100 * dt, appendix.position.y);
    if (panorama.position.x < -1709/2) {
        panorama.position = ccp( 1709/2 , panorama.position.y );
        appendix.position = ccp( 1709+480/2-1, appendix.position.y );
    }

}
// on "dealloc" you need to release all your retained objects
- (void) dealloc
{
    // in case you have something to dealloc, do it in this method
    // in this particular example nothing needs to be released.
    // cocos2d will automatically release all the children (Label)

    // don't forget to call "super dealloc"
    [super dealloc];
}
//_____________________________________________________________________________________
@end 
```

玩一点这段代码，你会得到你需要的。

# javascript - 如何转义 ajaxed 数据中的特殊字符？

> ID：11670423
> 
> 赞同：1
> 
> 时间：2012-07-26T13:31:31.017
> 
> 标签：javascript, ajax, json, jquery

我正在 ajaxing 一个页面，成功后我有以下代码：

```
success: function(html){
var product_json = [];
data=$(html);

$(".product_json", data).each(function(){
      product_json.push( jQuery.parseJSON( $(this).html() ) );
});
....
//code continue 
```

我的 Json 看起来像：

```
{
  "item_logoagenzia": "/resource/loghi/medium/13.gif",
  "item_description": "Some Bernini ven.."
} 
```

如果我有一些像双引号这样的字符它停止工作，它工作正常。

错误 Json 看起来像：

```
 {
  "item_logoagenzia": "/resource/loghi/medium/13.gif",
  "item_description": "Some "Bernini" ven.."
} 
```

我无法控制 json 创建。如何修改它或删除上面给出的脚本中的双引号等特殊字符？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-27T18:35:49.187

我已经做了。我修改了我的代码：

```
$(".product_json", data).each(function(){
  product_json.push( jQuery.parseJSON( $(this).html() ) );
}); 
```

到

```
$(".product_json", data).each(function(){
var myString = $(this).html().split('"item_description":"');

var myStringDesc = myString[1]; //split the string into two

myStringDesc = myStringDesc.substring(0, myStringDesc.length - 2);

myStringDesc = escapeHtml(myStringDesc);//escapeHtml is just function for removing special chars

var myNewString = eval( '('+ myString[0]+'"item_description":"'+ myStringDesc+'"}'+')');

myNewString = JSON.stringify(myNewString);

product_json.push( jQuery.parseJSON( myNewString ) );
 }); 
```

我不确定代码的效率，但它看起来工作正常。

* * *

## 回答 #2

> 赞同：-3
> 
> 时间：2012-07-26T13:34:09.063

你的 JSON 应该是：

```
{
  "item_logoagenzia": "/resource/loghi/medium/13.gif",
  "item_description": "Some \"Bernini\" ven.."
} 
```

编辑：好的，我没有看到作者不能编辑 JSON ......

你可以试试：

```
$(this).html().replace("\"Bernini\"","\\\"Bernini\\\"") 
```

但这取决于您收到的 html

```
success: function(html){
var product_json = [];
data=$(html);

$(".product_json", data).each(function(){
      product_json.push( jQuery.parseJSON( $(this).html().replace("\"Bernini\"","\\\"Bernini\\\"") ) );
}); 
```

另一个可能有效的解决方案是，您可以删除/替换值中的所有双引号，第一个和最后一个引号除外....这样您将收到有效的 JSON 字符串，但您将显示不带引号的描述，否则它将是带单引号。

# python - Python：带有 pytz 时区迹象的奇怪行为

> ID：11670425
> 
> 赞同：1
> 
> 时间：2012-07-26T13:31:32.713
> 
> 标签：python, datetime, pytz

我在阿根廷，我的时间是 GMT-3 (http://wwp.greenwichmeantime.com/time-zone/south-america/argentina/)

我在玩 Pytz 并注意到一些奇怪的东西，看看：

```
from pytz import timezone
bsas = timezone('America/Argentina/Buenos_Aires')

gmt_plus_3 = timezone('Etc/GMT+3')
gmt_min_3 = timezone('Etc/GMT-3')

# Date and time at this momement: 2012-07-26 10:23:01

fmt = '%Y-%m-%dT%H:%M:%S'
datetime.now(bs).strftime(fmt)  #'2012-07-26T10:23:01' <-- GOOD!

datetime.now(gmt_min_3).strftime(fmt)  #'2012-07-26T16:25:21' <-- WRONG!

datetime.now(gmt_plus_3).strftime(fmt)  #'2012-07-26T10:23:01' <-- GOOD! WTF! 
```

我希望：

```
GMT-3 should be 10:23:01 and gives me 16:23:01
GMT+3 should be 16:23:01 and gives me 10:23:01 
```

这是一个错误吗？我做错了吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-26T13:47:31.927

这不是一个错误，它是一个功能（[维基百科：**Tz_database**](http://en.wikipedia.org/wiki/Tz_database#Area)）：

*Etc的特殊区域用于一些行政区域，特别是代表协调世界时的“Etc/UTC”。为了符合 POSIX 风格，那些以“Etc/GMT”开头的区域名称**的符号与大多数人的预期相反**。在这种风格中，格林威治标准时间以西的区域有一个正号，而东部的区域有一个负号（例如，“Etc/GMT-14”是格林威治标准时间之前/东部的 14 小时。）*

# ruby-on-rails - 我的控制器一直在 Rails 中发送错误的参数 [:id]？！

> ID：11670429
> 
> 赞同：1
> 
> 时间：2012-07-26T13:31:48.497
> 
> 标签：ruby-on-rails, params

我是 Ruby on Rails 和网络编程的新手。在我的应用程序中，我有两个模型；Directorate which`has_many :users`和 User which `belongs_to :directorate`。创建新用户时，我使用`<%= f.collection_select(:directorate_id,Directorate.all, :id, :name) %>`new.html.erb 表单将新用户分配给特定的董事会。但是，我想为列出所有董事的 dba 构建一个用户友好的界面；并在每个董事会旁边列出所有用户，并带有一个链接，可以将任何用户分配到特定的董事会。

我所做的是以下内容：

在 Directorate 模型中，我定义了以下函数：

```
 def assign_user!(user)
      user.update_attributes(directorate_id: @directorate)
   end 
```

在董事会控制器中，我定义了以下操作：

```
 def assign_user
   @directorate = params[:directorate]
   assign_user! params[:user]
   redirect_to directorates_url
 end 
```

现在，directates/index.html.erb 包含以下内容：

```
 <h1>Listing directorates</h1>

<table>
  <tr>
    <th>Name</th>
    <th>Info</th>
  </tr>

<% @directorates.each do |directorate| %>
  <tr>
    <td><%= directorate.name %></td>
    <td><%= directorate.info %></td>

    <td><%= link_to 'Show', directorate %></td>
    <td><%= link_to 'Edit', edit_directorate_path(directorate) %></td>
    <td><%= link_to 'Destroy', directorate, confirm: 'Are you sure?', method: :delete %></td>
    <%= @directorate = directorate%>
<%= render 'users_form' %>
  </tr>
<% end %>
</table>

<br />

<%= link_to 'New Directorate', new_directorate_path %> 
```

并且，-users_form.html.erb 包含以下表单（应该列出每个部门旁边的所有用户，并带有将任何用户分配到某个部门的链接）：

```
 <h1>Listing Users</h1>

    <table>
      <tr>
        <th>User Name</th>
      </tr>

      <% @users.each do |user| %>
      <tr>

        <td><%= user.username %></td>

        <td><%= link_to 'Assign to Current Directorate', {controller: 'directorates', action: 'assign_user', directorate: @directorate, user: user}, :method => :put %></td>
      </tr>
      <% end %>
    </table>

<br /> 
```

这是问题所在，当列出董事会并单击“分配给当前董事会”时，我收到以下错误：

```
http://127.0.0.1:3000/directorates/assign_user?directorate=4&user=5

ActiveRecord::RecordNotFound in DirectoratesController#update

Couldn't find Directorate with id=assign_user
Rails.root: /home/ehab/sites/IAMS

Application Trace | Framework Trace | Full Trace
app/controllers/directorates_controller.rb:61:in `update'
Request

Parameters:

{"_method"=>"put",
 "authenticity_token"=>"L5tz3hv2IW0meE79qUq0/tjfGKwDlpC23hOeAWtmTvk=",
 "directorate"=>"4",
 "user"=>"5",
 "id"=>"assign_user"} 
```

很明显，参数正在提交我不想要的“id”=>“assign_user”，我想要的是“id”=>“directorate.id”（上例中的 4）。我该怎么做才能解决这个问题？！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-26T14:27:19.503

首先，您的路线应该说 assign_user 是`member`某个`directorate`对象的方法：

```
resources :directorates do
  member do
    put :assign_user
  end
end 
```

其次，您说您`assign_user!`在`Directorate`模型`assign_user`中定义，`DirectoratesController`但两种方法都暗示它们共享相同的对象状态，例如实例变量`@directorate`，这是不正确的

你的控制器方法`assign_user`应该看起来有点像

```
def assign_user
  @directorate = Directorate.find params[:id]
  @user        = User.find params[:user_id]

  @directorate.assign_user! @user
end 
```

和模型方法应该看起来像

```
def assign_user!(user)
  user.update_attributes(directorate_id: self.id)
end 
```

甚至我会切换到而不是告诉`Directorate`更改用户的属性，你会告诉`User`将自己分配给任何控制器想要的。

最后一点是您将用户分配到董事会的链接：

```
link_to 'Assign to Current Directorate',
  assign_user_directorates_path(@directorate, :user_id => user) 
```

上面 0 行代码经过了语法正确性测试，请勿复制粘贴、阅读和理解

# batch-file - 使用 POST 参数打开 URL

> ID：11670434
> 
> 赞同：1
> 
> 时间：2012-07-26T13:32:03.930
> 
> 标签：batch-file, cmd

我正在搜索或使用两个 POST 参数打开 URL 的方法。我现在唯一的选择是编写一个小 exe，它在 WebBrowser 控件中创建一个表单，然后自动单击一个按钮，这太可怕了。有没有更好的方法可以做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-26T13:58:30.803

您可以使用以下 javascript 创建一个 HTML 文件：

```
<script type="text/javascript">
<!-- The function below does a post without requiring a form or the click of a button -->
function postwith (to,p) {
    var myForm = document.createElement("form");
    myForm.method="post" ;
    myForm.action = to ;
    for (var k in p) {
        var myInput = document.createElement("input") ;
        myInput.setAttribute("name", k) ;
        myInput.setAttribute("value", p[k]);
        myForm.appendChild(myInput) ;
    }
    document.body.appendChild(myForm) ;
    myForm.submit() ;
    document.body.removeChild(myForm) ;
}
</script> 
```

示例用法：

```
 <script type="text/javascript">
    function delconfirm(id){
        if(confirm('Are you sure?'))
        {
            postwith('http://somesite.com/webpagetorecievepost.php',{KEY:VALUE,KEY:'STRING VALUE'});
        }
    }
   </script> 
```

您可以拥有任意数量的**KEY:VALUE**对。

一旦你有了这个 html 文件，你就可以在 Internet Explorer 中修改和打开它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-26T13:38:09.043

有可以驱动 IE 的网络浏览器自动化工具，例如[Selenium](http://seleniumhq.org/)。Selenium 是可编写脚本的，并且具有主要浏览器的驱动程序。我只将 selenium 用于这种由 java 代码驱动的事情；有[替代品](https://stackoverflow.com/questions/426190/selenium-alternatives)。

还有一些 Windows GUI 自动化工具，例如[AutoIT](http://www.autoitscript.com/site/autoit/)，可以打开给定的程序并操作 GUI 元素。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-27T11:12:00.550

我得到了这个工作，所以你可以打开一个带有查询字符串的标准 .html 文件，以将参数转发到 URL。

```
function postFromQueryString(url) {
    // grab params from query string into KVP array
    var postParams = [], hash;
    var hashes = window.location.href.slice(window.location.href.indexOf('?') + 1).split('&');
    for(var i = 0; i < hashes.length; i++) {
        hash = hashes[i].split('=');
        postParams.push(hash[0]);
        postParams[hash[0]] = hash[1];
    }
    if(postParams.length === 0) {
        alert('No parameter was passed');
        window.close();
        return;
    }
    // create a form
    var formToPost = document.createElement("form");
    formToPost.method="post";
    formToPost.action = url;
    // add params to form
    for (var k in postParams) {
        var postInput = document.createElement("input");
        postInput.setAttribute("name", k);
        postInput.setAttribute("value", postParams[k]);
        formToPost.appendChild(postInput);
    }
    document.body.appendChild(formToPost);
    formToPost.submit();
    document.body.removeChild(formToPost);
} 
```

将其称为 onLoad：

```
(function () {
    // build dynamic form and post
    postFromQueryString('http://yourUrlToPostTo.aspx');
})(); 
```

# sql-server - 尝试同时运行 Delete 语句时，SQL Server 在 KEY Lock 上死锁

> ID：11670452
> 
> 赞同：3
> 
> 时间：2012-07-26T13:32:57.507
> 
> 标签：sql-server, sql-server-2008, tsql, transactions, deadlock

我真的很感激这方面的一些帮助。它让我难过。基本上我在事务中运行带有一系列 Delete 语句的 Proc。这个过程将被一个多线程应用程序调用，所以有很多调用。大多数语句都执行得很好，但最后一个语句由于键锁问题而不断死锁。它似乎与主键及其上的聚簇索引 PK_Payloads 有关。我附上了所有相关信息。感谢您提供的任何帮助。

**DDL**

```
CREATE TABLE [dbo].[Payloads]
(
[Id] [bigint] IDENTITY(1,1) NOT NULL,
[Guid] [uniqueidentifier] NOT NULL DEFAULT NEWID(),
[Name] [nvarchar](max) NOT NULL,    
[LastProcessedDate] [datetime] NOT NULL DEFAULT GETDATE(),
[SourceSystem] [nvarchar](32) NOT NULL,
[DestinationSystem] [nvarchar](32) NULL,
[Error] [bit] NOT NULL DEFAULT 0,
[ErrorDetails] [nvarchar](max) NULL,
[CreateDate] [datetime] NOT NULL DEFAULT GETDATE(), 
[TypeId] [tinyint] NOT NULL,
[StatusId] [smallint] NOT NULL, 
[TagId] [integer] NULL,
[EngineExecutionCrawlLocationId] [bigint] NOT NULL,
[PayloadId] [bigint] NULL,

CONSTRAINT [PK_Payloads] PRIMARY KEY CLUSTERED ([Id] ASC),
CONSTRAINT [FK_Payloads_W] FOREIGN KEY([TypeId]) REFERENCES [dbo].[W] ([Id]),
CONSTRAINT [FK_Payloads_X] FOREIGN KEY([StatusId]) REFERENCES [dbo].[X] ([Id]),
CONSTRAINT [FK_Payloads_Y] FOREIGN KEY([TagId]) REFERENCES [dbo].[Y] ([Id]),
CONSTRAINT [FK_Payloads_Z] FOREIGN KEY([EngineExecutionCrawlLocationId]) REFERENCES [dbo].[Z] ([Id]),
CONSTRAINT [FK_Payloads_Payloads] FOREIGN KEY([PayloadId]) REFERENCES [dbo].[Payloads] ([Id])
) 
```

外键上也有非聚集索引，并且也有几个覆盖非聚集索引。

```
CREATE NONCLUSTERED INDEX [Payloads_I5] ON [dbo].[Payloads] 
(
[Id] ASC
)
INCLUDE ([Name], [StatusId]) WITH (SORT_IN_TEMPDB = OFF, IGNORE_DUP_KEY = OFF, DROP_EXISTING = OFF, ONLINE = OFF) ON [PRIMARY] 
```

**过程**

```
DECLARE @Details NVARCHAR(MAX)

SELECT @Details = 'Name: ' + p.[Name] + ',  Source Ref: ' + pc.[SourceContentReference] 
   + ',  Quarantine Ref: ' + ISNULL(pc.[DestinationContentReference], '')
   + ',  Archive Ref: ' + ISNULL(pc.[ArchiveContentReference], '')
FROM Payloads p
INNER JOIN PayloadContent pc ON p.[Id] = pc.[PayloadId]
WHERE p.[Id] = @PayloadId

BEGIN TRANSACTION

-- Audit Payload Deleted
INSERT INTO [Audit] ([AuditTypeId], [ObjectId], [Details])
VALUES (1, @PayloadId, ISNULL(@Details, ''))

DELETE FROM [A]
WHERE [PayloadId] = @PayloadId

DELETE FROM 
WHERE [PayloadId] = @PayloadId

DELETE FROM [C]
WHERE [PayloadId] = @PayloadId

DELETE FROM [D]
WHERE [PayloadId] = @PayloadId

DELETE FROM [E]
WHERE [PayloadId] = @PayloadId

DELETE FROM [F]
WHERE [PayloadContentId] IN (SELECT [Id] 
FROM [G]
WHERE [PayloadId] = @PayloadId)

DELETE FROM [G]
WHERE [PayloadId] = @PayloadId

/* Offending statement Here */
DELETE FROM [Payloads]
WHERE [Id] = @PayloadId

COMMIT TRANSACTION 
```

**死锁图**

```
<deadlock victim="process940c6088">
<process-list>
<process id="process940c6088" taskpriority="0" logused="3080" waitresource="KEY: 31:72057594041139200 (5cd3004a5da8)" waittime="2431" ownerId="85480" transactionname="user_transaction" lasttranstarted="2012-07-26T11:24:03.970" XDES="0x98861950" lockMode="S" schedulerid="4" kpid="5432" status="suspended" spid="58" sbid="0" ecid="0" priority="0" trancount="2" lastbatchstarted="2012-07-26T11:24:03.970" lastbatchcompleted="2012-07-26T11:24:03.923" clientapp=".Net SqlClient Data Provider" hostname="CRUSADER" hostpid="2792" loginname="AIL\matt" isolationlevel="read committed (2)" xactid="85480" currentdb="31" lockTimeout="4294967295" clientoption1="673185824" clientoption2="128056">
<executionStack>
<frame procname="AI.DataPoint.Database.dbo.DeletePayload" line="47" stmtstart="2474" stmtend="2580" sqlhandle="0x03001f00fb1c2229b2c7b7009aa000000100000000000000">
DELETE FROM [Payloads]
WHERE [Id] = @PayloadId </frame>
</executionStack>
<inputbuf>
Proc [Database Id = 31 Object Id = 690101499] </inputbuf>
</process>
<process id="process4dd048" taskpriority="0" logused="3732" waitresource="KEY: 31:72057594041139200 (a903f5656cf9)" waittime="2413" ownerId="85496" transactionname="user_transaction" lasttranstarted="2012-07-26T11:24:03.987" XDES="0x9724e3b0" lockMode="S" schedulerid="4" kpid="2560" status="suspended" spid="60" sbid="0" ecid="0" priority="0" trancount="2" lastbatchstarted="2012-07-26T11:24:03.987" lastbatchcompleted="2012-07-26T11:24:03.940" clientapp=".Net SqlClient Data Provider" hostname="CRUSADER" hostpid="2792" loginname="AIL\matt" isolationlevel="read committed (2)" xactid="85496" currentdb="31" lockTimeout="4294967295" clientoption1="673185824" clientoption2="128056">
<executionStack>
<frame procname="AI.DataPoint.Database.dbo.DeletePayload" line="47" stmtstart="2474" stmtend="2580" sqlhandle="0x03001f00fb1c2229b2c7b7009aa000000100000000000000">
DELETE FROM [Payloads]
WHERE [Id] = @PayloadId </frame>
</executionStack>
<inputbuf>
Proc [Database Id = 31 Object Id = 690101499] </inputbuf>
</process>
<process id="process4c3b88" taskpriority="0" logused="3732" waitresource="KEY: 31:72057594041139200 (b6d1e11077fc)" waittime="2288" ownerId="85471" transactionname="user_transaction" lasttranstarted="2012-07-26T11:24:03.930" XDES="0x83925950" lockMode="S" schedulerid="3" kpid="5608" status="suspended" spid="56" sbid="0" ecid="0" priority="0" trancount="2" lastbatchstarted="2012-07-26T11:24:03.927" lastbatchcompleted="2012-07-26T11:24:03.927" clientapp=".Net SqlClient Data Provider" hostname="CRUSADER" hostpid="2792" loginname="AIL\matt" isolationlevel="read committed (2)" xactid="85471" currentdb="31" lockTimeout="4294967295" clientoption1="673185824" clientoption2="128056">
<executionStack>
<frame procname="AI.DataPoint.Database.dbo.DeletePayload" line="47" stmtstart="2474" stmtend="2580" sqlhandle="0x03001f00fb1c2229b2c7b7009aa000000100000000000000">
DELETE FROM [Payloads]
WHERE [Id] = @PayloadId </frame>
</executionStack>
<inputbuf>
Proc [Database Id = 31 Object Id = 690101499] </inputbuf>
</process>
<process id="process4dd288" taskpriority="0" logused="3732" waitresource="KEY: 31:72057594041139200 (a903f5656cf9)" waittime="2427" ownerId="85487" transactionname="user_transaction" lasttranstarted="2012-07-26T11:24:03.973" XDES="0x800bf950" lockMode="S" schedulerid="4" kpid="2900" status="suspended" spid="59" sbid="0" ecid="0" priority="0" trancount="2" lastbatchstarted="2012-07-26T11:24:03.973" lastbatchcompleted="2012-07-26T11:24:03.933" clientapp=".Net SqlClient Data Provider" hostname="CRUSADER" hostpid="2792" loginname="AIL\matt" isolationlevel="read committed (2)" xactid="85487" currentdb="31" lockTimeout="4294967295" clientoption1="673185824" clientoption2="128056">
<executionStack>
<frame procname="AI.DataPoint.Database.dbo.DeletePayload" line="47" stmtstart="2474" stmtend="2580" sqlhandle="0x03001f00fb1c2229b2c7b7009aa000000100000000000000">
DELETE FROM [Payloads]
WHERE [Id] = @PayloadId </frame>
</executionStack>
<inputbuf>
Proc [Database Id = 31 Object Id = 690101499] </inputbuf>
</process>
</process-list>
<resource-list>
<keylock hobtid="72057594041139200" dbid="31" objectname="AI.DataPoint.Database.dbo.Payloads" indexname="PK_Payloads" id="lock97039400" mode="X" associatedObjectId="72057594041139200">
<owner-list>
<owner id="process4c3b88" mode="X"/>
</owner-list>
<waiter-list>
<waiter id="process940c6088" mode="S" requestType="wait"/>
</waiter-list>
</keylock>
<keylock hobtid="72057594041139200" dbid="31" objectname="AI.DataPoint.Database.dbo.Payloads" indexname="PK_Payloads" id="lock8a589900" mode="X" associatedObjectId="72057594041139200">
<owner-list/>
<waiter-list>
<waiter id="process4dd048" mode="S" requestType="wait"/>
</waiter-list>
</keylock>
<keylock hobtid="72057594041139200" dbid="31" objectname="AI.DataPoint.Database.dbo.Payloads" indexname="PK_Payloads" id="lock8a589000" mode="X" associatedObjectId="72057594041139200">
<owner-list>
<owner id="process4dd048" mode="X"/>
</owner-list>
<waiter-list>
<waiter id="process4c3b88" mode="S" requestType="wait"/>
</waiter-list>
</keylock>
<keylock hobtid="72057594041139200" dbid="31" objectname="AI.DataPoint.Database.dbo.Payloads" indexname="PK_Payloads" id="lock8a589900" mode="X" associatedObjectId="72057594041139200">
<owner-list>
<owner id="process940c6088" mode="X"/>
</owner-list>
<waiter-list>
<waiter id="process4dd288" mode="S" requestType="wait"/>
</waiter-list>
</keylock>
</resource-list>
</deadlock> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-26T14:00:32.163

你需要一个关于`Payloads(PayloadID)`. 没有它，FK 验证必须进行表扫描。这也将有助于所有其他 DELETE，但其他 DELETE 也是如此，它们的效率非常低。其他删除不会死锁，因为它们*是*表扫描，因此都按相同的顺序进行。最后一个至少可以从索引中受益，`[Id]`但这样做会导致所有这些扫描的顺序冲突。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-11-27T11:35:32.473

遇到类似情况，只想分享一下。列上的聚集主键或索引将避免表扫描并随后与引用的表发生死锁

# solr - 用于多个域的 nutch 和 solr

> ID：11670461
> 
> 赞同：1
> 
> 时间：2012-07-26T13:33:16.117
> 
> 标签：solr, lucene, search-engine, nutch

我想为多个域创建自定义搜索引擎。
如何使用 solr 和 nutch 为 500 多个域创建自定义搜索，同时搜索每个域应该能够显示自己的数据。

例如
example.com exapmle2.com example3.com 等等，当用户在 example.com 上搜索时，他应该获得属于 example.com 的数据，与 example2.com 等相同

这些网站可能是博客文章、电子商务网站、分类网站或酒店预订网站。

任何建议将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-29T15:43:58.087

这应该是开箱即用的。当您使用 nutch 架构索引到 solr 时，它有一个名为 site 的字段来存储域。在搜索界面（您将构建的）上，当您选择一个域（又名站点）时，您只需传递一个过滤查询，如“site:domain”，以便将结果限制在搜索的域中。

注意：如果您想限制对注入域的抓取，请确保将 nutch 中的外部链接属性设置为 false。

希望这能回答你的问题。

# powershell - 检查远程机器上的进程所有者并在所有者为 xyz 时将其杀死

> ID：11670466
> 
> 赞同：3
> 
> 时间：2012-07-26T13:33:27.047
> 
> 标签：powershell, wmi

嘿，我想在远程计算机上检查特定进程的进程所有者，并在所有者为 xyz 时将其终止。我已经设法检查了它的所有者，但是当所有者是 xyz 时，我不知道如何杀死它。

到目前为止我所拥有的：

```
get-wmiobject -computername remotePC win32_process|where{$_.name -eq "firefox.exe"}|select name,@{n="owner";e={$_.getowner().user}} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-26T13:36:49.900

```
Get-WmiObject -Class Win32_Process -Filter "Name='firefox.exe'" -ComputerName remotePC | 
Where-Object { $_.GetOwner().User -eq 'xyz' } | 
Foreach-Object { $_.Terminate() } 
```

# ios - 将没有根键的对象映射到动态网址？

> ID：11670469
> 
> 赞同：0
> 
> 时间：2012-07-26T13:34:01.580
> 
> 标签：ios, restkit

我正在尝试映射以下对象：

```
{"walletAccepted":false,"creditCardTypesAccepted":["visa","mastercard","discover","americanexpress"],"paypalAccepted":false} 
```

到具有相同属性的对象。但是，ResourcePath 是动态的，因为它遵循 /paymentmethods/zone/:internalZoneCode

我在映射时所做的每一次尝试总是以“映射期间遇到错误：找不到 keyPath 的对象映射：''”而告终

我认为问题在于没有根密钥/密钥路径。我还尝试了以下方法，但没有运气：

```
RKURL *rkUrl = [RKURL URLWithBaseURL:[RKClient sharedClient].baseURL resourcePath:[NSString stringWithFormat:@"/paymentoptions/zone/%@", zoneNumber]];
RKObjectLoader* loader = [[RKObjectLoader alloc] initWithURL:rkUrl mappingProvider:[RKObjectManager sharedManager].mappingProvider];
loader.method = RKRequestMethodGET;
loader.delegate = self;

loader.objectMapping = [[RKObjectManager sharedManager].mappingProvider objectMappingForClass:[PMZonePaymentMethods class]];
[loader send]; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-26T14:14:11.233

我发现实现它的方法是配置映射，并将映射添加到对象管理器而不需要关键路径或资源k

所以像这样：

```
RKObjectMapping* zonePaymentMethodsMapping = [RKObjectMapping mappingForClass:[PMZonePaymentMethods class]];
[zonePaymentMethodsMapping mapKeyPath:@"walletAccepted" toAttribute:@"walletAvailable"];
[zonePaymentMethodsMapping mapKeyPath:@"creditCardTypesAccepted" toAttribute:@"cards"];
[zonePaymentMethodsMapping mapKeyPath:@"paypalAccepted" toAttribute:@"paypalAvailable"];

[[RKObjectManager sharedManager].mappingProvider addObjectMapping:zonePaymentMethodsMapping]; 
```

并使用它来提出请求：

```
RKURL *rkUrl = [RKURL URLWithBaseURL:[RKClient sharedClient].baseURL resourcePath:[NSString stringWithFormat:@"/paymentoptions/zone/%@", zoneNumber]];
RKObjectLoader* loader = [[RKObjectLoader alloc] initWithURL:rkUrl mappingProvider:      [RKObjectManager sharedManager].mappingProvider];
loader.method = RKRequestMethodGET;
loader.delegate = self;

loader.objectMapping = [[RKObjectManager sharedManager].mappingProvider  objectMappingForClass:[PMZonePaymentMethods class]];
[loader send]; 
```

# php - 如何在json中拆分日期和时间？

> ID：11670478
> 
> 赞同：2
> 
> 时间：2012-07-26T13:34:39.127
> 
> 标签：php, javascript, jquery, json

我在 json 中得到这样的日期时间 2012-02-06 16:30,2012-02-08 16:45,2012-02-10 16:30。
这是我的代码。

```
<script type="text/javascript">
<?php if($this->Date) : ?>
var date = JSON.parse('<?=$this->Date?>');
$.each(date, function(index, value) {
    switch(index) {
      case 0:
        $("#Date").val(value);
        $("#Time").val(value);
      case 1:
        $("#Date1").val(value);
        $("#Time1").val(value);
      case 2:
        $("#Date2").val(value);
        $("#Time2").val(value);
     }
});
<?php endif; ?>  
</script> 
```

在这里，我想在时间字段中传递日期提交时间中的日期。请帮帮我

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-26T13:38:33.100

首先，我会改变 id`#Date`和`#Time`to`#Date0`并`#Time0`保持统一。这样你就可以完全摆脱你的`switch`陈述，做这样的事情，这样编码更少，并且可以在不更改代码的情况下扩展更多项目。

您问题的关键是`split()`将您的日期字符串拆分为一组片段的函数。

```
<script type="text/javascript">
    <?php if($this->Date) : ?>
        var date = JSON.parse('<?=$this->Date?>');
        $.each(date, function(index, value) {

            // Split the Date/Time string into an array with two items
            //(0=date, 1=time)
            var pieces = date.split(' ');

            $("#Date"+index).val(pieces[0]);
            $("#Time"+index).val(pieces[1]);
        });
    <?php endif; ?>  
</script> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-26T13:40:47.597

这可能有效：

```
 var new_arr = [];
    var a = "2012-02-06 16:30,2012-02-08 16:45,2012-02-10 16:30".split(",");
    for(var i =0; i<a.length; i++)
    { 
      new_arr.push(a[i].split(' '));
    }
   console.log(new_arr); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-26T13:38:27.780

```
var date = '2012-02-06 16:30';
var date_parts = date.split(' ');
# date_parts[0] <- date
# date_parts[1] <- time 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-26T13:50:48.653

如果字符串包含有效日期，您只需将其转换为 Date 对象。

```
 d = new Date("2012-02-06 16:30") 
```

那么您应该可以访问 Date 对象的所有方法。

*   getTime() - 自 1/1/1970 @ 12:00 AM 以来的毫秒数
*   getSeconds() - 秒数 (0-59)
*   getMinutes() - 分钟数 (0-59)
*   getHours() - 小时数 (0-23)
*   getDay() - 星期几 (0-6)。0 = 星期日, ... , 6 = 星期六
*   getDate() - 一个月中的哪一天 (0-31)
*   getMonth() - 月数 (0-11)
*   getFullYear() - 四位数年份 (1970-9999)

# c++ - 矢量超出范围

> ID：11670480
> 
> 赞同：-2
> 
> 时间：2012-07-26T13:34:47.707
> 
> 标签：c++, exception, vector

所有堆垛机的美好一天。我在 Quincy2005 中运行我的程序，并且出现以下错误。“抛出 'std::out_of_range 的实例后调用终止” “what(): vector::_M_range_check”

以下是我的一堆代码

```
int ptextLoc,ctextLoc;       //location of the plain/cipher txt
char ctextChar;     //cipher text variable
//by default, the location of the plain text is even
bool evenNumberLocBool = true;
ifstream ptextFile;
//open plain text file
ptextFile.open("ptext.txt");

    //character by character encryption
    while (!ptextFile.eof())
    {

        //get (next) character from file and store it in a variable ptextChar
        char ptextChar = ptextFile.get();

        //find the position of the ptextChar in keyvector Vector
        ptextLoc = std::find(keyvector.begin(), keyvector.end(), ptextChar) - keyvector.begin();

        //if the location of the plain text is even
        if (  ((ptextLoc % 2) == 0) || (ptextLoc == 0) )
            evenNumberLocBool = true;
        else
            evenNumberLocBool = false;

        //if the location of the plain text is even/odd, find the location of the cipher text    
        if (evenNumberLocBool)
            ctextLoc = ptextLoc + 1;
        else
            ctextLoc = ptextLoc - 1;

        //store the cipher pair in ctextChar variable
        ctextChar = keyvector.at(ctextLoc);

        cout << ctextChar;

    } 
```

ptext.txt ab cd ef 的内容

如果第一个字母是位置 0 的“a”，则配对密码字母表将是 kevector[1]。

最新更新：我找到了导致此错误的行。ctextChar = keyvector.at(ctextLoc); 但是，我不确定为什么这条线会发生这种情况。我希望有人能够指导我。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-26T13:37:08.733

`std::vector`'s`size()`返回一个值`1 --- N`，其中 as`at()`依赖于值`0 --- (N - 1)`。因此，您应该使用：

```
if (keyvector.size() != 0 && ctextLoc > keyvector.size() - 1)
  break; 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-26T13:38:20.203

```
if (ctextLoc > keyvector.size()) 
```

应该是

```
if (ctextLoc >= keyvector.size()) 
```

# objective-c - 在按钮上显示数组元素

> ID：11670483
> 
> 赞同：0
> 
> 时间：2012-07-26T13:34:55.697
> 
> 标签：objective-c, xcode4, uibutton, iboutlet, iboutletcollection

我正在为当地学校系统开发一个教育游戏，在这个游戏中，学生会看到六个数字，他们必须尝试使用​​尽可能多的数字来等于第七个数字，这些数字存储在一个名为的数组中currentHand，并且数字需要在屏幕上的按钮上显示为文本。问题是，当它们将数字组合在一起时，按钮上的值需要相应地更改。假设我添加了两个按钮，一个值为 1 的按钮和一个值为 2 的按钮，值 3 被添加到数组中，值 1 和 2 被删除，然后一个按钮需要变得不可见，另一个需要更新值为 3。有人告诉我用 IBOutletCollection 尝试这个，但是因为我对目标 C 还是很陌生，所以我不知道如何使用 IBOutCollection 来做到这一点，

```
{1,2,3,4,5,6} 
```

每个按钮都会有一个值分配给它们，但正如列表更改为

```
{1,2,3,4,11} 
```

显示数字 6 的按钮将消失，而持有数字 5 的按钮将变为 11，但正如我所说，我不知道如何完成此操作。

由于我无法显示作为这样一个新成员的图片，因此我将一张图片与我尝试设置[IBOutletCOllection的方式相关联](http://i.imgur.com/ccahv.png)

下面是实例化 currentHand 的代码

```
-(NSMutableArray *) currentHand{
    if (_currentHand == nil) {
        _currentHand = [[NSMutableArray alloc]init];

    }
    self.currentHand = self.myDeck.giveHand;
    return _currentHand;

} 
```

对此的任何建议将不胜感激，在此先感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-28T22:23:31.177

这是解决此问题的一种方法。正如我在评论中所说，当您单击按钮时，我认为不需要数组来跟踪数字（只需一个为标题提供原始数字），也不需要 IBOutletCollection。

因此，在下面的示例中，我创建了一个单视图项目，将 6 个按钮添加到视图控制器的视图中，将它们的所有标签设置为 1，并将它们全部连接到一个操作方法 buttonPressed:。我没有为按钮使用任何插座，因为您可以通过循环浏览视图的子视图来完成您需要做的事情——在这个例子中标签并不是真正需要的，但是如果您的视图中有任何其他按钮，标签将是一种将这 6 个游戏按钮与其他任何按钮区分开来的方法。

我不确定这是否正是您想要的外观，但请尝试一下，看看它是否接近。

```
@interface ViewController : UIViewController

@property (assign) int total;
@property (retain) UIButton *previousButton;

#import "ViewController.h"

@implementation ViewController
@synthesize previousButton,total;

- (void)viewDidLoad
{
    [super viewDidLoad];
    self.total = 0;
    NSMutableArray *theData = [NSMutableArray arrayWithObjects:@"1",@"3",@"5",@"7",@"8",@"4",nil];
    for (id obj in [self.view subviews]) {
        if ([obj isKindOfClass:[UIButton class]] && [obj tag] == 1) {
            [(UIButton *)obj setTitle:theData.lastObject forState:UIControlStateNormal] ;
            [theData removeLastObject];
        }
    }
}

-(IBAction)buttonPressed:(UIButton *)sender {
    self.total += sender.titleLabel.text.intValue;
    [sender setTitle:[NSString stringWithFormat:@"%d",self.total] forState:UIControlStateNormal];
    self.previousButton.hidden = YES;
    sender.enabled = NO;
    [sender setTitleColor:[UIColor lightGrayColor] forState:UIControlStateDisabled];
    self.previousButton = sender; 
```

}

# maven - 无法生成 maven plugin.xml 描述符

> ID：11670485
> 
> 赞同：2
> 
> 时间：2012-07-26T13:35:04.790
> 
> 标签：maven, plugins, pom.xml, descriptor

`<packaging>maven-plugin</packaging>`编辑：已解决在我的项目 pom.xml中缺少标签。我误解了这个[帖子](https://stackoverflow.com/questions/7187379/why-is-my-maven-plugin-descriptor-not-being-generated-automatically?lq=1)中的句子，不知道省略的意思......：

> 谢谢伙计，我已经想通了，我`<packaging>maven-plugin</packaging>`在pom文件中遗漏了希望这对其他人有帮助

* * *

我正在尝试构建一个 Maven 插件，但是我无法生成 plugin.xml 文件。

我已经尝试了 maven-plugin-plugin 的命令行和 pom 配置，有/没有描述符目标和阶段。我想我正在那里做。

可能是其余的没有正确完成。我发现的唯一相关主题是[为什么我的 Maven 插件描述符没有自动生成？](https://stackoverflow.com/questions/7187379/why-is-my-maven-plugin-descriptor-not-being-generated-automatically)并没有太大帮助。

这是 maven 日志 [http://pastebin.com/uA2KFTXN](http://pastebin.com/uA2KFTXN)

我有两个带有 Java4 注释的 mojo（@goal 和 @phase）。我的 Pom 中有以下标签

```
 <plugin>
            <groupId>org.apache.maven.plugins</groupId>
            <artifactId>maven-plugin-plugin</artifactId>
            <version>3.1</version>
            <configuration>
                <goalPrefix>signature</goalPrefix>
            </configuration>
            <executions>
                <execution>
                    <goals>
                        <goal>descriptor</goal>
                    </goals>
                    <phase>process-classes</phase>
                </execution>
            </executions>
        </plugin> 
```

# jquery - 如果我向左设置浮动高度不起作用

> ID：11670488
> 
> 赞同：1
> 
> 时间：2012-07-26T13:35:13.510
> 
> 标签：jquery, css

如果我设置浮动左侧 jquery 的高度不起作用网站是[http://imperiorwebdesign.com/portofoliu](http://imperiorwebdesign.com/portofoliu) 我在 css 中设置了高度，但我不喜欢它的工作方式

```
(function($) {

    $.Tabs = function(el, options) {

        var base = this;
        base.$el = $(el);
        base.$nav = base.$el.find(".nav");

        base.init = function() {

            base.options = $.extend({},$.Tabs.defaultOptions, options);

            // Accessible hiding fix
            $(".hide").css({
                "position": "relative",
                "top": 0,
                "left": 0,
                "display": "none"
            }); 

            base.$nav.delegate("li > a", "click", function() {

                // Figure out current list via CSS class
                var curList = base.$el.find("a.current").attr("href").substring(1),

                // List moving to
                    $newList = $(this),

                // Figure out ID of new list
                    listID = $newList.attr("href").substring(1),

                // Set outer wrapper height to (static) height of current inner list
                    $allListWrap = base.$el.find(".list-wrap"),
                    curListHeight = $allListWrap.height();
                $allListWrap.height(curListHeight);

                if ((listID != curList) && ( base.$el.find(":animated").length == 0)) {

                    // Fade out current list
                    base.$el.find("#"+curList).fadeOut(base.options.speed, function() {

                        // Fade in new list on callback
                        base.$el.find("#"+listID).fadeIn(base.options.speed);

                        // Adjust outer wrapper to fit new list snuggly
                        var newHeight = base.$el.find("#"+listID).height();
                        $allListWrap.animate({
                            height: newHeight
                        });

                        // Remove highlighting - Add to just-clicked tab
                        base.$el.find(".nav li a").removeClass("current");
                        $newList.addClass("current");

                    });

                }   

                // Don't behave like a regular link
                // Stop propegation and bubbling
                return false;
            });

        };
        base.init();
    };

    $.Tabs.defaultOptions = {
        "speed": 300
    };

    $.fn.Tabs = function(options) {
        return this.each(function() {
            (new $.Tabs(this, options));
        });
    };

})(jQuery);
$(function() {

      $("#pagew").Tabs({
            "speed": 200
      });

});` 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-26T13:49:38.107

对我来说听起来像是一个清除问题，您可能需要向周围的 div 添加一个清除。

这是一篇关于这个主题的好文章 - [http://css-tricks.com/snippets/css/clear-fix/](http://css-tricks.com/snippets/css/clear-fix/)

# android - 让 ListView 重新加载它的视图

> ID：11670489
> 
> 赞同：1
> 
> 时间：2012-07-26T13:35:15.020
> 
> 标签：android, listview, reload

情况：
我有一个带有微调器的活动和一个带有`BaseAdapter`.

该列表已加载一次，并正确显示...但是当我单击微调器以更改基础数据并调用`adapter.notifyDataSetChanged();`该列表时，该列表不会刷新。

我的意思是数据已更改并且适配器具有正确的数据，只是 listView 不会更改视图。

如何强制 listViews 显示正确的数据？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-26T13:35:58.493

~~尝试`adapter.notifyDataSetInvalidated();`以及`adapter.notifyDataSetChanged();`~~

* * *

**编辑：** 在添加更多项目之前清除您的 ArrayList 或您正在使用的任何内容`.clear();`，然后添加新项目并调用`adapter.notifyDataSetChanged();`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-26T13:38:51.900

尝试

```
myListView.invalidateViews(); 
```

# c++ - 如何处理在同一个socket上发布多个操作的情况

> ID：11670491
> 
> 赞同：4
> 
> 时间：2012-07-26T13:35:18.680
> 
> 标签：c++, sockets, asyncsocket, iocp

我正在开发一个管理一个套接字的客户端应用程序。我正在使用 IOCP 来管理异步 I/O。

这是网络编程书中的一句话：

> 所有重叠的操作都保证按照应用程序发出它们的顺序执行。但是，不保证从完成端口返回的完成通知的顺序相同。也就是说，如果应用程序发布两个重叠的 WSARecv 操作，一个具有 10 KB 缓冲区，下一个具有 12 KB 缓冲区，则首先填充 10 KB 缓冲区，然后填充 12 KB 缓冲区。应用程序的工作线程可能会在 10 KB 操作的完成事件之前收到来自 GetQueuedCompletionStatus 的 12 KB WSARecv 通知。当然，这只是在一个套接字上发布多个操作时的问题。

那么我该如何处理这个案子呢？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-26T13:47:20.723

最简单的解决方案是，不具有超过一次的出色读取或写入。因此，如果通知完成，则很明显，所有数据都已写入套接字。如果在等待 IO 完成时，需要向套接字写入更多数据，则只需缓冲该数据并在 IO 完成时将其写入。

如果一个套接字有多个未完成的 IO，则必须在读取端对它们进行排序。在写入方面，您必须做一些记录以了解最后一次写入，从而了解何时完全写入数据。

另一方面，仅仅将数据成功写入套接字并不意味着数据在另一端被正确接收或处理，因此必须有某种协议。如果是这样，您可以简单地依赖该协议并简单地查找错误通知。

# actionscript-2 - 在动作脚本中声明全局变量？

> ID：11670492
> 
> 赞同：0
> 
> 时间：2012-07-26T13:35:21.227
> 
> 标签：actionscript-2

我想在一个动作脚本文件中创建一个变量（可能的全局变量），并希望在项目中的所有其他动作脚本文件中使用相同的变量。如何创建这样的变量以及如何在所有 .as 文件中使用相同的变量？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-27T10:50:11.603

一种简单的方法是在类中定义一个[静态](http://www.kirupa.com/developer/oop2/AS2OOPClassStructure4.htm)变量（创建一个新类或使用现有类之一）：

```
// in MyConfig.as
class MyConfig {

    static var myVariable:String = "Hi";

}

// You can access / set the value from any class using MyConfig.myVariable
trace(MyConfig.myVariable); // prints Hi

MyConfig.myVariable = "Hello";
trace(MyConfig.myVariable); // prints Hello 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-09-11T12:23:15.063

创建一个公共类（假设 GlobalVariables.as） 无需添加其实例。现在将要跨多个类使用的所有变量声明为 STATIC。（您还可以在该类中声明和创建类的实例以避免多个类实例）您还可以向该类添加常用方法

因此，每当您想访问在 GlobalVariables 类中声明的变量时，您需要使用引用来访问，例如 GlobalVariables.variableName

示例代码：

```
package classes{    
    public class GlobalVariables{
        public static var strURL:String;
        public static function setExternalLinks(){          
            strURL = "http://demourl.asmx/";
        }
     }
} 
```

# python - RuntimeError：保存并关闭 pyplot 图时，底层 C/C++ 对象已被删除

> ID：11670495
> 
> 赞同：1
> 
> 时间：2012-07-26T13:35:36.893
> 
> 标签：python, matplotlib, runtime-error

我遇到了一个 python 错误，我已经尝试解决好几天了。我的程序创建数字，保存并关闭它们，除了这个错误之外工作正常。通常它不会妨碍保存过程，但有时保存时图片会丢失下部。奇怪的是，这种情况只会在循环到达 savefig 方法时每秒钟发生一次，这是我的代码：

```
for num in np.arange(file_number):
    plt.figure('abc' + str(num),figsize=(22,12),dpi=100)
    #some plots are added to the figure
    print 1
    plt.savefig(os.path.join(savepath,filename),dpi=100)
    print 2
    plt.close()                                                                    
    print 3 
```

我使用打印命令查看错误发生的位置。这是 spyder 的控制台输出：

```
Reading file1.file
1
2
3
Reading file2.file
1
Traceback (most recent call last):
  File "/usr/lib/pymodules/python2.7/matplotlib/backends/backend_qt4.py", line 151, in <lambda>
    lambda: self.close_event())
  File "/usr/lib/pymodules/python2.7/matplotlib/backend_bases.py", line 1564, in close_event
    self.callbacks.process(s, event)
RuntimeError: underlying C/C++ object has been deleted
2
3
Reading file3.file
1
2
3
Reading file4.file
1
Traceback (most recent call last):
  File "/usr/lib/pymodules/python2.7/matplotlib/backends/backend_qt4.py", line 151, in <lambda>
    lambda: self.close_event())
  File "/usr/lib/pymodules/python2.7/matplotlib/backend_bases.py", line 1564, in close_event
    self.callbacks.process(s, event)
RuntimeError: underlying C/C++ object has been deleted
2
3 
```

据我了解，在保存图形时（每第二次）已经发生了错误，尽管如果我省略 close() 命令它工作正常。在这种情况下，我的 RAM 在大约 70 个文件后被填满，有时我需要评估数百个文件。这就是为什么我需要包含 close() 命令或类似的东西。如果您解决了这个问题（或改进了我的编程，我想我保存和关闭的方式可能被认为是丑陋的）请帮助我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-27T02:42:19.200

如何将后端更改为其他选项？例如：

```
import matplotlib as mpl
mpl.use( "agg" )

from matplotlib import pyplot as plt
import numpy as np

print plt.get_backend()

file_number = 100
for num in np.arange(file_number):
    plt.figure('abc' + str(num),figsize=(22,12),dpi=100)
    #some plots are added to the figure
    print 1
    plt.savefig("%d.png" % num,dpi=100)
    print 2
    plt.close()
    print 3 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-27T17:08:32.790

我无法复制您的问题（部分原因是您的示例不是自包含的），但我认为您可以考虑解决稍微不同的问题。

由于您的图形定义（大小、dpi 等）在整个循环中保持不变（即使没有），您可以查看只生成一个图形，并在循环内更新它：

```
import matplotlib as mpl
mpl.use( "tkagg" )

from matplotlib import pyplot as plt
import numpy as np

file_number = 1000
fig = plt.figure('abc', figsize=(22,12), dpi=100)

plt.show(block=False)

for num in np.arange(file_number):
    fig.set_label('abc%s' % num)

    # add an axes to the figure
    ax = plt.axes()

    #some plots are added to the figure (I just plotted a line)
    plt.plot(range(num))

    plt.savefig("%d.png" % num, dpi=100)
    # draw the latest changes to the gui
    plt.draw()

    # remove the axes now that we have done what we want with it.
    fig.delaxes(ax)

# put in a blocking show to wait for user interaction / closure.
plt.show() 
```

通常这不是您做事的方式（我通常会更新轴而不是每次都添加/删除轴），但也许您有充分的理由这样做。

这应该会显着提高性能。

# iphone - 在 iPhone 标签中打印星号符号

> ID：11670496
> 
> 赞同：-1
> 
> 时间：2012-07-26T13:35:40.697
> 
> 标签：iphone, ios, xcode4.2

我正在尝试在我正在处理的一个 iPhone 应用程序的标签中打印 ascii 值。我希望输出是这样的。我该怎么做？![在此处输入图像描述](../Images/04921fc9330a09915128c8649cf6a7a6.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-26T13:38:03.533

```
myLabel.text = @"Cutomer's First Name*"; 
```

* * *

为制作不同颜色的文本而编辑，您可以使用[TTTAttributedLabel](https://github.com/mattt/TTTAttributedLabel/tree/master/TTTAttributedLabelExample)。下面是代码

```
TTTAttributedLabel *label = [[TTTAttributedLabel alloc] initWithFrame:CGRectMake(20, 20, 200, 200)];
NSString* text = @"Cutomer's First Name*";
[label setText:text afterInheritingLabelAttributesAndConfiguringWithBlock:^(NSMutableAttributedString *mutableAttributedString){
    //NSMutableAttributedString *mutableAttributedString;
    NSRange whiteRange = [text rangeOfString:@"*"];
    if (whiteRange.location != NSNotFound) {
        [mutableAttributedString addAttribute:(NSString *)kCTForegroundColorAttributeName value:(id)[UIColor redColor].CGColor range:whiteRange];
    }
    return mutableAttributedString;
}];
label.font = [UIFont fontWithName: @"Helvetica Neue" size: 10]; 
```

# c++ - 如何从头开始在 Xcode 4 上构建 C++ 项目 - 链接现有和新的外部库

> ID：11670498
> 
> 赞同：2
> 
> 时间：2012-07-26T13:35:42.683
> 
> 标签：c++, macos, xcode4

我一直在尝试在 Xcode 中构建一些基于 C++ 控制台的程序。我设法打开一个新项目（命令行工具-> C++）并编辑 main.cpp，但我仍然无法弄清楚两件事：

*   如何创建新的 .cpp 和 .h 文件来构建新库，尤其是如何将它们链接到 main.cpp （我实际上设法创建了 .h 和 .cpp 文件，但是使用 #include 将它们导入 main.cpp似乎不起作用）
*   如何链接外部现有库？我有这个斯坦福 C++ 库（来自 iTunes U 上的 CS106B），它是一组 .h 标头和一个 .o 存档。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-26T18:39:23.943

如果您打算使用您的项目来编写 C++ 库，您必须做的第一件事是为您要编写的每个库添加一个目标。通过从项目窗口左侧的项目导航器中选择您的项目来打开项目编辑器。项目编辑器的底部是一个添加目标按钮。单击按钮。在 Mac OS X 下选择 Framework and Library。从库目标列表中选择 C/C++ Library 或 STL C++ Library。单击下一步按钮。在产品名称文本字段中输入库名称。使用类型菜单创建动态或静态库。单击完成按钮。

创建库目标后，您可以向其中添加新的 C++ 文件。创建新的 C++ 文件时，请确保将文件添加到库目标，而不是工具目标。在“保存”面板中选中库目标复选框。

此时是时候将库链接到工具目标了。从项目编辑器左侧的目标列表中选择工具目标。单击编辑器顶部的 Build Phases 按钮。单击 Link Binary with Libraries 构建阶段旁边的显示三角形。单击 + 按钮链接到现有库。

您可能希望 Xcode 在构建工具目标时自动构建库目标。要让 Xcode 执行此操作，请单击 Target Dependencies 构建阶段旁边的显示三角形。单击 + 按钮添加依赖项。在打开的工作表中选择一个库目标。

您将不得不提供更多信息以让任何人回答您关于让 main.cpp 包含您创建的新文件的问题。至少您必须提供有关如何在 main.cpp 中包含头文件的代码，以及当您说 #include 似乎不起作用时的意思。以下包括应该工作：

```
#include "NewFile.h" 
```

其中 NewFile.h 是您创建的新头文件。

# php - 没有输出？PHP foreach 似乎不起作用

> ID：11670502
> 
> 赞同：0
> 
> 时间：2012-07-26T13:36:00.240
> 
> 标签：php

我试图从给定的文本中形成一个首字母缩写词。这里的想法是 $text ($text[0]) 中的第一个字母将被取出并使用 array_push() 放置在数组 $storage 中。现在，如果数组中有空格，则下一个索引的字母应该是 Acronym 的一部分。我目前没有得到输出，我错过了什么？

```
public function Acronym($text)
        {
            $text = str_split($text);
            $count = strlen($text);
            $storage = array();

            for($i=0; $i<$count; $i++)
            {
                array_push($storage, $text[0]);

                if($text[$i]==' ')
                {
                    array_push($storage, $text[$i+1]);
                }

                foreach($storage as $clean)
                {
                    echo $clean;
                }       
            }   
        } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-26T13:48:46.937

您的算法存在一些致命缺陷：

1.  `strlen()`当您应该调用时，您正在调用一个数组`count()`：

    ```
    $text = str_split($text);
    $count = count($text); 
    ```

2.  `str_split()`但是，您可以将字符串索引为数组，因此在这种情况下不需要，您可以`$count = strlen( $text);`通过删除对`str_split()`.

3.  这应该只发生一次，所以它应该在循环之外（这意味着从`$i`1 开始）：

    ```
    array_push($storage, $text[0]); 
    ```

4.  `foreach`打印数组的`$storage`循环应该在创建首字母缩写词的循环之外。

5.  您可以使用速记表示法来节省调用函数的开销`array_push()`。`array_push()`在向数组添加多个元素时应该使用。否则，这就足够了：

    ```
    $storage[] = $text[0]; 
    ```

6.  你需要`return`从你的函数中获取一些东西，否则你将无法访问它之外的任何东西。

把这些放在一起，你会得到：

```
public function Acronym($text)
{
    $count = strlen( $text);

    $storage[] = $text[0];

    for( $i = 1; $i < $count; $i++)
    {
        if( $text[$i] == ' ') 
        {
            $storage[] = $text[$i+1]);
            $i++; // Can increment $i here because we know the next character isn't a space
        }
    }
    foreach($storage as $clean)
    {
        echo $clean;
    }
    return $storage;
} 
```

话虽如此，有更好的实现来形成一个提供字符串输入的首字母缩写词。这是我能想到的一个：

```
public function Acronym( $text) 
{
    $acronym = array();
    foreach( explode( ' ', $text) as $word)
    {
        $word = trim( $word);
        $acronym[] = strtoupper( $word[0]);
    }
    return implode( '', $acronym);
} 
```

请注意，对于像`Hello World`. 我将其留给 OP 进行这些修改（如有必要）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-26T13:41:27.093

你正在运行你的循环，因为 return on 正在从它的数组`$count`中获取它的值`str_len``$text = str_split($text);`

所以你已经覆盖了你的`$text`变量，你可以通过先改变顺序获取长度然后拆分来修复它。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-26T13:41:38.967

你覆盖你的第一个变量`$text`

```
$count = strlen($text); 
```

这一行`$text`是一个数组，因为您在方法的第一行更改了它。

尝试反转前两行：

```
$count = strlen($text);
$text = str_split($text); 
```

**笔记**

这将解决您的次要问题，并使您的算法能够正确运行。它不能修复你的算法，但至少你现在可以调试它。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-26T13:43:26.497

`str_split`将字符串转换为数组。

`str_length`带来您已经用数组覆盖的字符串的长度。你需要`count()`

# php - 谷歌 cPanel 和 Zend/PHP

> ID：11670507
> 
> 赞同：0
> 
> 时间：2012-07-26T13:36:10.623
> 
> 标签：php, zend-framework, zend-gdata

我试图从域中检索所有用户，但出现错误..

已下载 Zend 库

文件：

[https://developers.google.com/google-apps/provisioning/?hl=da#retrieving_user_accounts](https://developers.google.com/google-apps/provisioning/?hl=da#retrieving_user_accounts)

得到这个错误：

```
Fatal error: Call to undefined method Zend_Gdata_HttpClient::retrieveAllUsers() 
```

脚本：

```
require_once 'Zend/Loader.php';
Zend_Loader::loadClass('Zend_Gdata_ClientLogin');
Zend_Loader::loadClass('Zend_Gdata_Gapps');

$email = 'alias@mail.com';
$password = 'password';
$client = Zend_Gdata_ClientLogin::getHttpClient($email, $password, Zend_Gdata_Gapps::AUTH_SERVICE_NAME);

echo '<pre>';
print_r($client->retrieveAllUsers());
echo '</pre>'; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-26T13:51:59.493

似乎您尝试在错误对象的实例上访问 retrieveAllUsers 方法（Zend_Gdata_HttpClient 而不是 Zend_Gdata_Gapps）。

试试这个：

```
$client = Zend_Gdata_ClientLogin::getHttpClient($email, $password, Zend_Gdata_Gapps::AUTH_SERVICE_NAME);
$gdata = new Zend_Gdata_Gapps($client, 'mydomain.com');
$users = $gdata->retrieveAllUsers(); 
```

# javascript - node.js - 将异步函数转换为同步函数

> ID：11670508
> 
> 赞同：1
> 
> 时间：2012-07-26T13:36:12.397
> 
> 标签：javascript, node.js, asynchronous, sync, synchronous

像许多其他人一样，我想将第三方模块（Patio）的异步功能转换为同步功能。

```
function get_user_message_list(parameters, array, response)
{
var new_array = [];
for (var i in array) {

    var json = array[i];
    json['content']['users_seen'] = ["1757842565"];
    json['content']['users_not_seen'] = [];

    new_array.push(json);
}

console.log("NEW ARRAY :");
console.log(new_array);

response.writeHeader(200, {'Content-Type':'application/json'});
response.end(JSON.stringify(new_array));
}

function get_json_message(parameters, json)
{
console.log("JSON OBJECT :");
console.log(json);
var dataset = db.from(TABLES.USER).join(TABLES.MOVIE_LIST, {MLUserId: sql.URId}).join(TABLES.MOVIE, {MVId: sql.MLMovieId});

dataset.where('MLSeen={seen} AND MVSourceId={movie} AND MVSource={source} AND URId!={user}', {seen: 1, movie: json['content']['movie_id'], source: json['content']['movie_source'], user:parameters.FACEBOOK_ID}).all().then(function(users){
    if (users) {
        for (var j in users) {
            json['content']['users_seen'].push(users[j].URId);
        }
    }

    //console.log(json['content']['users_seen']);

    dataset.where('MLSeen={seen} AND MVSourceId={movie} AND MVSource={source} AND URId!={user}', {seen: 0, movie: json['content']['movie_id'], source: json['content']['movie_source'], user:parameters.FACEBOOK_ID}).all().then(function(users){
        if (users) {
            for (var j in users) {
                json['content']['users_not_seen'].push(users[j].URId);
            }
        }

        console.log(json);
    }, errorHandler);
}, errorHandler);
} 
```

在 get_user_message_list 函数中，我迭代到一个数组中，并且对于每次迭代，我调用 async 函数。在这个异步函数中，我使用 Patio 模块向 MySQL 数据库发出请求。但是正如你所看到的，我必须在将结果发送到前一个函数后等待得到查询结果。

如何将 get_json_message 变成 sync_get_json_message ？谢谢你。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-02T18:04:55.643

当需要解决问题时，您可以并且应该将异步函数转换为行为类似于同步函数的东西。你不能永远不是正确的答案，不应该是程序员的答案。

所以，我最近在 nodeunit 模块中发现了一些可能对你有帮助的代码。它触发异步函数，跟踪哪些函数已准备就绪。在所有请求都进入后，触发回调。这可能是您的问题解决方案背后的想法（所以不，这不是最终解决方案）。

```
async.forEachSeries = function (arr, iterator, callback) {
    if (!arr.length) {
        return callback();
    }
    var completed = 0;
    var iterate = function () {
        iterator(arr[completed], function (err) {
            if (err) {
                callback(err);
                callback = function () {};
            }
            else {
                completed += 1;
                if (completed === arr.length) {
                    callback();
                }
                else {
                    iterate();
                }
            }
        });
    };
    iterate();
}; 
```

这个测试让我看到它是如何完成的：

```
exports['series'] = function (test) {
    var call_order = [];
    async.series([
        function (callback) {
            setTimeout(function () {
                call_order.push(1);
                callback(null, 1);
            }, 25);
        },
        function (callback) {
            setTimeout(function () {
                call_order.push(2);
                callback(null, 2);
            }, 50);
        },
        function (callback) {
            setTimeout(function () {
                call_order.push(3);
                callback(null, 3, 3);
            }, 15);
        }
    ],
    function (err, results) {
        test.equals(err, null);
        test.same(results, [1, 2, [3, 3]]);
        test.same(call_order, [1, 2, 3]);
        test.done();
    });
}; 
```

快乐编程！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-01-19T19:19:02.873

我一直在使用[syncrhonize.js](http://alexeypetrushin.github.io/synchronize/docs/index.html)并取得了巨大的成功。甚至还有一个挂起的拉取请求（效果很好）来支持具有多个参数的异步函数。比 node-sync imho 更好也更容易使用。额外的好处是它具有易于理解和详尽的文档，而 node-sync 没有。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-07-26T13:44:26.003

你不能也不应该。这将有效地阻止您的 Node.JS 服务器，并且您将失去 Node.JS 提供的所有优势。这也违背了 Node.JS 背后的整个异步思想。

只需将`callback`参数传递给您的函数：

```
function get_json_message(parameters, json, callback){ // <---- note the callback
    // some other stuff
    dataset.where( ...
        // some other stuff
        dataset.where( ...
            // some other stuff
            // I've finished the job, call the callback
            callback(); // <--- you can pass additional params here
        });
    });
} 
```

并这样称呼它：

```
get_json_message( params, json, function() {
    console.log('Hello world!');
    // do whatever you like inside callback
}); 
```

# objective-c - How to reference a singleton?

> ID：11670513
> 
> 赞同：1
> 
> 时间：2012-07-26T13:36:30.513
> 
> 标签：objective-c, singleton

I am trying to use singleton in my app. I want to share 8 strings using a singleton.

This is the tutorial I referred to -> [http://www.galloway.me.uk/tutorials/singleton-classes/](http://www.galloway.me.uk/tutorials/singleton-classes/)

My code: - MyManager.h

```
#import <foundation/Foundation.h>

@interface MyManager : NSObject {
NSString *someProperty1;
NSString *someProperty2;
NSString *someProperty3;
NSString *someProperty4;
NSString *someProperty5;
NSString *someProperty6;
NSString *someProperty7;
NSString *someProperty8;
}

@property (nonatomic, retain) NSString *someProperty1;
@property (nonatomic, retain) NSString *someProperty2;
@property (nonatomic, retain) NSString *someProperty3;
@property (nonatomic, retain) NSString *someProperty4;
@property (nonatomic, retain) NSString *someProperty5;
@property (nonatomic, retain) NSString *someProperty6;
@property (nonatomic, retain) NSString *someProperty7;
@property (nonatomic, retain) NSString *someProperty8;

+ (id)sharedManager;

@end 
```

MyManager.m

```
#import "MyManager.h"

@implementation MyManager

@synthesize someProperty;

#pragma mark Singleton Methods

+ (id)sharedManager {
static MyManager *sharedMyManager = nil;
static dispatch_once_t onceToken;
dispatch_once(&onceToken, ^{
    sharedMyManager = [[self alloc] init];
});
return sharedMyManager;
}

- (id)init {
  if (self = [super init]) {
someProperty1 = [[NSString alloc] initWithString:@"Default Property Value"];
someProperty2 = [[NSString alloc] initWithString:@"Default Property Value"];
someProperty3 = [[NSString alloc] initWithString:@"Default Property Value"];
someProperty4 = [[NSString alloc] initWithString:@"Default Property Value"];
someProperty5 = [[NSString alloc] initWithString:@"Default Property Value"];
someProperty6 = [[NSString alloc] initWithString:@"Default Property Value"];
someProperty7 = [[NSString alloc] initWithString:@"Default Property Value"];
someProperty8 = [[NSString alloc] initWithString:@"Default Property Value"];
  }
  return self;
}

- (void)dealloc {
// Should never be called, but just here for clarity really.
}

@end 
```

I want to use this singleton to use these string variables to add string in one other view and then use it to store in database in another third view.

Can someone please tell me how to reference them and store string in these variables and again access them in the third different view?

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-26T13:42:10.193

1.  import MyManager.h where you use singleton.
2.  `[[MyManager sharedManager] setSomeProperty1:@abc"]; //for setting`
3.  `[[MyManager sharedManager] someProperty1]; // for getting`

or you can use like this also

```
MyManager *manager = [MyManager sharedManager];
manager.someProperty1 = @"abc";
NSString *str = manager.someProperty1; 
```

# cocoa - Mountain Lion 中的 NSShadow 未显示

> ID：11670523
> 
> 赞同：1
> 
> 时间：2012-07-26T13:36:58.653
> 
> 标签：cocoa, calayer, nsview, osx-mountain-lion, nsshadow

我有一个奇怪的问题，自从升级到 10.8 后，我无法再为我的（支持图层的）视图设置阴影。

```
NSShadow *shadow = [[NSShadow alloc] init];
[shadow setShadowColor:[NSColor darkGrayColor]];
[shadow setShadowOffset:NSMakeSize(0.0, -2.0)];
[shadow setShadowBlurRadius:2.0];

[[self imageView] setWantsLayer:YES];
[[self imageView] setShadow:shadow]; 
```

此代码片段在 10.7 Lion 中运行良好，但在操作系统升级后就不行了。

我还创建了一个测试项目，我只通过 IB 添加一个图像视图并设置这些阴影属性。这也不起作用。

我还下载了名为“CocoaSlides”的 Apple 示例代码，其中还使用了支持图层的视图和 NSShadow。它在那里工作得很好，但电话似乎和我的一样。

有没有人遇到过这个问题？你找到解决办法了吗？

# jquery - 带有下拉菜单的选项卡式内容

> ID：11670524
> 
> 赞同：1
> 
> 时间：2012-07-26T13:37:00.483
> 
> 标签：jquery, tabs

是否可以添加额外的 jQuery 来为这些选项卡添加下拉菜单？

这是添加了下拉菜单项的 HTML：

```
 <div class="tabs">

                <ul class="tabs-nav">

                    <li><a href="#tab1">Tab 1</a></li>
                    <li><a href="#tab2" >Tab 2</a></li>
                    <li><a href="#tab3" >Tab 3</a>
                          <ul><!-- added drop-down items -->
                               <li><a href="#son-of-tab3" >drop-down 1</a></li> 
                               <li><a href="#son-of-tab3" >drop-down 2</a></li> 
                             <li><a href="#son-of-tab3" >drop-down 3</a></li> 
                            </ul>
                     </li><!-- end tab 3-->

                </ul>

                <div class="tabs-content">

                    <div id="tab1" class="content">
                        <!-- tab1 content -->
                    </div>

                    <div id="tab2" class="content">
                        <!-- tab2 content -->
                    </div>

                    <div id="tab3" class="content">
                        <!-- tab3 content -->
                    </div>

                </div> <!-- /tabs-content -->

            </div> <!-- /tabs --> 
```

使选项卡工作但需要额外的东西才能使下拉菜单工作的 jQuery？

```
 <script>
                $(document).ready(function() {

                    //add active class to the first li
                    $('.tabs-nav li:first').addClass('active');

                    //hide all content classes.
                    $('.content').hide();

                    //show only first div content
                    $('.content:first').show();

                    //add the click function
                    $('.tabs-nav li').click(function(){

                            //remove active class from previous li
                            $('.tabs-nav li').removeClass('active');

                            //add active class to the active li.
                            $(this).addClass('active');

                            //hide all content classes
                            $(".content").hide();

                            //find the href attribute of the active tab
                            var activeTab = $(this).find("a").attr("href");

                            //fade in the content of active tab
                            $(activeTab).fadeIn(1000);

                        return false;

                    });
                });
            </script> 
```

如果需要，我可以发布 css

非常感谢，

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-26T13:45:28.307

```
.tabs li ul{
  position:absolute;
    left:0;
  display:none;
}

$(function(){
  var parentH = $('.tabs-nav li ul').parent().height();
  $('.tabs-nav li ul').css('top', parentH);
  $('.tabs-nav li').hover(function(){
    $('ul', this).show();
  }, function(){
    $('ul', this).hide();
  });
}); 
```

[工作的jsFiddle](http://jsfiddle.net/Ohgodwhy/NdNnJ/)

# objective-c - UIPrintInteractionController - 限制打印副本/获取打印副本数量

> ID：11670529
> 
> 赞同：4
> 
> 时间：2012-07-26T13:37:16.993
> 
> 标签：objective-c, ios, cocoa-touch, ipad, printing

我正在开发一个包含打印文档功能的 iPad 应用程序。一些文档需要权限管理，其中可以打印有限数量的副本，并且必须记录打印的副本数量。

我浏览了[UIPrintInteractionController](http://developer.apple.com/library/ios/#documentation/uikit/reference/UIPrintInteractionController_Class/Reference/Reference.html)文档，并没有发现这样的功能。一年多以前在这里问过这个问题：[iOS 打印 UI - 限制份数](https://stackoverflow.com/questions/6200486/ios-printing-ui-limit-number-of-copies)，当时此功能不可用 - 希望它已经改变。

我的问题是：

1.  一年过去了，cocoa touch 还没有限制打印份数的能力吗？
2.  有没有办法获得打印的份数？
3.  是否被迫使用 UIPrintInteractionController？如果我无法设置或获取副本，那么我可能会被迫自己编写（如果可能的话）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-02T00:25:55.360

尝试使用 UIPrintInteractionController 控制用户可以打印的副本数量。我有同样的问题，我正走路回家，它击中了我。为什么我不为 UIStepper 创建一个类别并覆盖它的行为。

我不在我的应用程序中使用 UIStepper，所以这不会影响我的应用程序，但如果你这样做，可能有一种方法可以有选择地应用此代码。

无论如何，你想要这样的东西：

```
@implementation UIStepper (MJStepper)

- (id)initWithFrame:(CGRect)frame
{
    self = [super initWithFrame:frame];
    if (self) {
        // Initialization code
        self.minimumValue = 1;
        self.maximumValue = 1;
    }
    return self;
}

@end 
```

因此，创建一个类别并将其包含在使用 UIPrintInteractionController 的同一视图中

然后在 init 和 BAM 上设置最小值和最大值。打印模式说 1 份，没有 uistepper。:)

您可以通过编程将其设置为任何数字，甚至可以给用户一个固定的范围。

我真的希望 Apple 有一个完整的编程 API 用于打印。我正在构建一个 Kiosk 应用程序，我想要的最后一件事是让用户能够打印 100 个副本。

我认为纸张类型和打印机选择仍然很烦人，但我可能可以忍受。

有谁知道是否有办法控制您的打印机支持的纸张类型？我知道有一个委托回调，我可以用它来强制使用特定类型的纸张，所以我可以尝试一下。

无论如何，希望这会有所帮助！:)

# java - 为什么 volatile 无法正常工作

> ID：11670530
> 
> 赞同：2
> 
> 时间：2012-07-26T13:37:18.950
> 
> 标签：java, multithreading, static, volatile

今天我正在使用创建一个超时作业，`TimerTask`但遇到了一个新问题，我有一个`static volatile boolean`变量 `flag`。我的理解是，一旦此变量的值发生更改，所有正在运行的`thread`. 但是当我运行这个程序时，我得到了低于输出的结果，这是不可接受的。

**输出/输出：**

```
--------------
--------------
DD
BB
Exiting process..
CC 
```

我的期望是我的最后一次打印应该是**Exiting process..**为什么会出现这种奇怪的行为？

我的代码是：

```
public class TimeOutSort {

    static volatile boolean flag = false;

    public static void main(String[] args) {

        Timer timer = new Timer();
        timer.schedule(new TimerTask() {

            @Override
            public void run() {

                flag = true;
                System.out.println("Exiting process..");
                // System.exit(0);
            }
        }, 10 * 200);

        new Thread(new Runnable() {

            @Override
            public void run() {
                while (!flag)
                    System.out.println("BB");

            }
        }).start();

        new Thread(new Runnable() {

            @Override
            public void run() {
                while (!flag)
                    System.out.println("CC");

            }
        }).start();

        new Thread(new Runnable() {

            @Override
            public void run() {
                while (!flag)
                    System.out.println("DD");

            }
        }).start();
    }

} 
```

**编辑：**我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-26T13:41:14.203

`volatile`几乎意味着每次线程访问一个变量时，它必须确保使用每个线程可见的版本（即没有每个线程缓存）。

这**不会**强制 CC 打印线程*在*设置`flag`为`true`. 完全有可能（尤其是在单核机器上）一个线程在 CC 打印线程甚至有机会运行*之前设置标志**并*打印消息。

 *另外：请注意，打印到`System.out`涉及获取锁（在`println()`调用内部的某处），这可以*修改*测试代码的多线程行为。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-26T13:42:12.463

线程可以按任何顺序执行代码

```
thread BB: while (!flag) // as flag is false
thread Main:   flag = true;
thread Main:   System.out.println("Exiting process..");
thread BB:     System.out.println("BB"); 
```

> 我的期望是我的最后一次打印应该是退出过程..

线程被设计为并发和独立运行。如果这始终是最后一条语句，那将是令人惊讶的，因为当您设置标志时，您无法确定每个线程的位置。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-26T13:40:32.447

打印“CC”的线程碰巧没有收到任何 CPU 时间，直到打印“退出进程...”的线程打印出来。这是预期的行为。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-26T13:42:12.880

它不是 volatile 不工作（如果不是，你的一些线程就不会停止）。它与不同线程中指令的执行顺序有关，这是随机的（取决于操作系统调度），除非您在中间步骤显式同步循环。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-07-26T13:46:56.433

要为您得到的解释添加替代措辞：在您的示例输出中，打印的线程`"CC"`被暂停（某处）“*在*”行`while (!flag)`和`System.out.println()`. 这意味着它唤醒后，在下一次检查标志*之前*`println()`执行。（它也不会因为您更改标志值而被唤醒，而是因为其他一些线程阻塞或用完它的时间片。）

 ** * *

## 回答 #6

> 赞同：0
> 
> 时间：2015-02-01T16:55:34.563

我没有测试它，但你可以像这样实现它

```
public class TimeOutSort {

static volatile boolean flag = false;

public static void main(String[] args) {

    Timer timer = new Timer();
    timer.schedule(new TimerTask() {

        @Override
        public void run() {

            synchronized(flag){
                 flag = true;
                 notifyAll();
            }

        }
    }, 10 * 200);

    new Thread(new Runnable() {

        @Override
        public void run() {

            synchronized(flag){
                if(!flag)
                {
                    wait();
                }
                System.out.println("BB");

            }

        }
    }).start();

    new Thread(new Runnable() {

        @Override
        public void run() {

              synchronized(flag){
                if(!flag)
                {
                    wait();
                }
                System.out.println("CC");

            }
        }
    }).start();

    new Thread(new Runnable() {

        @Override
        public void run() {

              synchronized(flag){
                if(!flag)
                {
                    wait();
                }
                System.out.println("DD");

            }

        }
    }).start();
} 
```

}**

# jquery - 将值从 dynatree 保存到数据库

> ID：11670532
> 
> 赞同：0
> 
> 时间：2012-07-26T13:37:20.683
> 
> 标签：jquery, jquery-plugins

我正在尝试使用 DynaTree 创建树视图。然后将复选框值保存到数据库。

任何人都知道将复选框值保存到数据库以获取以下代码。此代码来自 dynatree。

```
 <html>
<head>
  <meta http-equiv="content-type" content="text/html; charset=ISO-8859-1">
  <title>User Access Details</title>

  <script src="jquery/jquery.js" type="text/javascript"></script>
  <script src="jquery/jquery-ui.custom.js" type="text/javascript"></script>
  <script src="jquery/jquery.cookie.js" type="text/javascript"></script>

  <link href="src/skin/ui.dynatree.css" rel="stylesheet" type="text/css" id="skinSheet">
  <script src="src/jquery.dynatree.js" type="text/javascript"></script>

  <!-- (Irrelevant source removed.) -->

<script type="text/javascript">
  var treeData = [

    {title: "Authorised Access", key: "id3",
      children: [
        {title: "POS",select: true,
          children: [
            {title: "Read", key: "id3.1.1" },
            {title: "Write", key: "id3.1.2" }
          ]
        },
        {title: "MATE",
          children: [
            {title: "Read", key: "id3.2.1" },
            {title: "Write", key: "id3.2.2" }
          ]
        }
      ]
    },
    {title: "Unauthorised Access", key: "id4",
      children: [
        {title: "Logical Access", activate: true,
          children: [
            {title: "Email", key: "id4.1.1" },
            {title: "Internate", key: "id4.1.2" }
          ]
        },

      ]
    }
  ];
  $(function(){

    // --- Initialize sample trees
    $("#tree1").dynatree({
      checkbox: true,
      // Override class name for checkbox icon:
      classNames: {checkbox: "dynatree-radio"},
      selectMode: 1,
      children: treeData,
      onActivate: function(node) {
        $("#echoActive1").text(node.data.title);
      },
      onSelect: function(select, node) {
        // Display list of selected nodes
        var s = node.tree.getSelectedNodes().join(", ");
        $("#echoSelection1").text(s);
      },
      onDblClick: function(node, event) {
        node.toggleSelect();
      },
      onKeydown: function(node, event) {
        if( event.which == 32 ) {
          node.toggleSelect();
          return false;
        }
      },
      // The following options are only required, if we have more than one tree on one page:
//      initId: "treeData",
      cookieId: "dynatree-Cb1",
      idPrefix: "dynatree-Cb1-"
    });

    $("#tree2").dynatree({
      checkbox: true,
      selectMode: 2,
      children: treeData,
      onSelect: function(select, node) {
        // Display list of selected nodes
        var selNodes = node.tree.getSelectedNodes();
        // convert to title/key array
        var selKeys = $.map(selNodes, function(node){
             return "[" + node.data.key + "]: '" + node.data.title + "'";
        });
        $("#echoSelection2").text(selKeys.join(", "));
      },
      onClick: function(node, event) {
        // We should not toggle, if target was "checkbox", because this
        // would result in double-toggle (i.e. no toggle)
        if( node.getEventTargetType(event) == "title" )
          node.toggleSelect();
      },
      onKeydown: function(node, event) {
        if( event.which == 32 ) {
          node.toggleSelect();
          return false;
        }
      },
      // The following options are only required, if we have more than one tree on one page:
      cookieId: "dynatree-Cb2",
      idPrefix: "dynatree-Cb2-"
    });

    $("#tree3").dynatree({
      checkbox: true,
      selectMode: 3,
      children: treeData,
      onSelect: function(select, node) {
        // Get a list of all selected nodes, and convert to a key array:
        var selKeys = $.map(node.tree.getSelectedNodes(), function(node){
          return node.data.key;
        });
        $("#echoSelection3").text(selKeys.join(", "));

        // Get a list of all selected TOP nodes
        var selRootNodes = node.tree.getSelectedNodes(true);
        // ... and convert to a key array:
        var selRootKeys = $.map(selRootNodes, function(node){
          return node.data.key;
        });
        $("#echoSelectionRootKeys3").text(selRootKeys.join(", "));
        $("#echoSelectionRoots3").text(selRootNodes.join(", "));
      },
      onDblClick: function(node, event) {
        node.toggleSelect();
      },
      onKeydown: function(node, event) {
        if( event.which == 32 ) {
          node.toggleSelect();
          return false;
        }
      },
      // The following options are only required, if we have more than one tree on one page:
//        initId: "treeData",
      cookieId: "dynatree-Cb3",
      idPrefix: "dynatree-Cb3-"
    });

    $("#tree4").dynatree({
      checkbox: false,
      selectMode: 2,
      children: treeData,
      onQuerySelect: function(select, node) {
        if( node.data.isFolder )
          return false;
      },
      onSelect: function(select, node) {
        // Display list of selected nodes
        var selNodes = node.tree.getSelectedNodes();
        // convert to title/key array
        var selKeys = $.map(selNodes, function(node){
             return "[" + node.data.key + "]: '" + node.data.title + "'";
        });
        $("#echoSelection4").text(selKeys.join(", "));
      },
      onClick: function(node, event) {
        if( ! node.data.isFolder )
          node.toggleSelect();
      },
      onDblClick: function(node, event) {
        node.toggleExpand();
      },
      onKeydown: function(node, event) {
        if( event.which == 32 ) {
          node.toggleSelect();
          return false;
        }
      },
      // The following options are only required, if we have more than one tree on one page:
//      initId: "treeData",
      cookieId: "dynatree-Cb4",
      idPrefix: "dynatree-Cb4-"
    });

    $("#btnToggleSelect").click(function(){
      $("#tree2").dynatree("getRoot").visit(function(node){
        node.toggleSelect();
      });
      return false;
    });
    $("#btnDeselectAll").click(function(){
      $("#tree2").dynatree("getRoot").visit(function(node){
        node.select(false);
      });
      return false;
    });
    $("#btnSelectAll").click(function(){
      $("#tree2").dynatree("getRoot").visit(function(node){
        node.select(true);
      });
      return false;
    });
    <!-- (Irrelevant source removed.) -->
  });

  $("form").submit(function() {
      // Serialize standard form fields:
      var formData = $(this).serializeArray();

      // then append Dynatree selected 'checkboxes':
      var tree = $("#tree").dynatree("getTree");
      formData = formData.concat(tree.serializeArray());

      // and/or add the active node as 'radio button':
      if(tree.getActiveNode()){
        formData.push({name: "activeNode", value: tree.getActiveNode().data.key});
      }

      alert("POSTing this:\n" + jQuery.param(formData));

      $.post("http://127.0.0.1:8001/submit_data",
           formData,
           function(response, textStatus, xhr){
             alert("POST returned " + response + ", " + textStatus);
           }
      );
      return false;
    });
</script>
</head>

<body class="example">
   <form>
  <div id="tree3"></div>
   <div id="tree" name="selNodes">
    </div>

    <input type="submit" value="Send data">
 </form>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-04-23T09:57:46.557

本文解释了如何使用 Dynatree 在表单发布后获取设置复选框的值：

[http://www.llakomy.com/articles/adding-dynatree-with-checkboxes-to-a-form/](http://www.llakomy.com/articles/adding-dynatree-with-checkboxes-to-a-form/)

一旦你得到了这些值，你就可以将它们持久化到你的数据库中。

# java - 如何从外部无关代码中读取正在运行的 Swing GUI 的 TextField 或 Cell 值？

> ID：11670533
> 
> 赞同：0
> 
> 时间：2012-07-26T13:37:20.277
> 
> 标签：java, multithreading, swing, concurrency, jvm

它必须以某种方式访问​​它。事实上，我从不使用任何类型的程序。我想它们是 JVM 的两个实例，所以一定是有冲突的..

例如，从已经在另一个 Java 应用程序上运行的 JTable 中读取行。我想以编程方式测试那里出现的结果，运行 myTest 应用程序一个 Swing 应用程序正在运行

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-27T14:38:28.127

我最终使用了 FEST： http: [//fest.easytesting.org/](http://fest.easytesting.org/)

它也可以用来模拟运行摇摆应用程序上所有可以想象的人类动作

# asp.net - MyFile.aspx“在浏览器中查看”的Visual Studio快捷方式

> ID：11670535
> 
> 赞同：0
> 
> 时间：2012-07-26T13:37:27.520
> 
> 标签：asp.net, visual-studio

我经常需要在浏览器中显示 MyFile.aspx，但它不是我正在处理的实际文件：我可能正在处理在 Myfile.aspx 文件或某些后端库中引用的 .js 文件。

因此，我必须从 MyFile.aspx 选项卡上的选项卡切换，然后单击“在浏览器中查看”按钮。有没有办法避免这个额外的步骤？我知道我可以将 MyPage.aspx 设置为默认起始页并点击“播放”按钮，但随后整个站点将被重建，并且比不断地查找和切换选项卡需要更长的时间。

如何在浏览器中直接预览 MyFile.aspx 的工具栏上添加一个按钮？

我正在使用 VS2012 RC（真的很酷 BTW）

感谢您的建议。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-26T13:47:45.360

是的。你应该：

1.  转到工具->自定义
2.  选择选项卡“命令”，单击“键盘”按钮。
3.  在“显示包含的命令”文本框中，键入以下内容：`file.viewinbrowser`
4.  为此设置热键

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-26T13:48:19.043

好吧，您的简单答案是在浏览器中保持该页面打开并刷新浏览器

一个更复杂的答案是添加一个外部工具命令来做到这一点。转到`Tools`->并使用 Command或您选择的任何浏览器`External Tools...`创建一个新条目，然后将您的 URL 放在 Arguments 字段中。`C:\Program Files (x86)\Internet Explorer\iexplore.exe`如果要将其分配给键盘快捷键，请按照[http://msdn.microsoft.com/en-us/library/80cb6ks3.aspx上的说明进行操作](http://msdn.microsoft.com/en-us/library/80cb6ks3.aspx)

# android - 升级到 ADT v20 后不再能够创建项目

> ID：11670536
> 
> 赞同：1
> 
> 时间：2012-07-26T08:24:05.050
> 
> 标签：android, linux, adt

我最近将我的 ADT 更新到 v20，但我现在在创建新项目时遇到了问题。我已经为 API 级别 8、10 和 15 安装了平台 SDK，但是当我尝试创建一个基于 2.3.3 且具有最低 2.2 SDK 的项目时，Eclipse 说：

> 此模板依赖于未安装的 Android 支持库，或者模板依赖于比您安装的版本更新的版本

当我使用旧版本的 ADT 时，我对这些 SDK 没有任何问题，但现在它似乎引起了问题。我在带有 ADT 20 的 Ubuntu 上使用 Eclipse Indigo 2。我无法从 SDK 管理器下载资源，因为它们在我的国家/地区不可用，因此我必须手动安装组件。

有什么建议么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-05T18:38:12.590

我不确定这个特定的错误，但要下载并安装任何 coponant，您可以按照以下链接进行操作。[离线安装android组件](https://stackoverflow.com/questions/2766713/android-download-the-android-sdk-components-for-offline-install/9403527#9403527)

# iphone - 应用内购买错误的恢复按钮

> ID：11670538
> 
> 赞同：3
> 
> 时间：2012-07-26T13:37:43.143
> 
> 标签：iphone, objective-c, ios, in-app-purchase

在我的应用中恢复应用内购买时遇到问题

我已经在我的项目中应用了这行代码：

```
[[SKPaymentQueue defaultQueue] addTransactionObserver:self];

[[SKPaymentQueue defaultQueue] restoreCompletedTransactions]; 
```

但它调用了这个函数

```
- (void)paymentQueue:(SKPaymentQueue*)queue restoreCompletedTransactionsFailedWithError:(NSError*)error
{
    NSLog(@"error");
} 
```

我必须做什么才能避免出现此错误？并调用此函数：

```
- (void) paymentQueueRestoreCompletedTransactionsFinished:(SKPaymentQueue *)queue
{
    NSMutableArray *purchasedItemIDs = [[NSMutableArray alloc] init];

 NSLog(@"received restored transactions: %i", queue.transactions.count);
    for (SKPaymentTransaction *transaction in queue.transactions)
    {
        NSString *productID = transaction.payment.productIdentifier;
        [purchasedItemIDs addObject:productID];
    }

} 
```

提前谢谢各位！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-27T21:52:32.123

从模拟器进行测试时，我遇到了同样的问题。在物理设备上试用它，因为模拟器上不提供应用内购买。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-13T10:04:17.070

来自“In-App Purchase Programming Guide”：Store Kit 不在 iOS 模拟器中运行。在 iOS 模拟器中运行您的应用程序时，如果您的应用程序尝试检索支付队列，Store Kit 会记录一个警告。必须在实际设备上测试商店。

[http://developer.apple.com/library/ios/#documentation/NetworkingInternet/Conceptual/StoreKitGuide/DevelopingwithStoreKit/DevelopingwithStoreKit.html](http://developer.apple.com/library/ios/#documentation/NetworkingInternet/Conceptual/StoreKitGuide/DevelopingwithStoreKit/DevelopingwithStoreKit.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-05-08T10:49:43.320

inapp 购买可在模拟器中使用，因此您可以在模拟器中查看。

# xcode - 横向的presentModalViewController

> ID：11670539
> 
> 赞同：2
> 
> 时间：2012-07-26T13:37:45.033
> 
> 标签：xcode, ipad, uiviewcontroller, orientation, landscape

我已经搜索了这个论坛（和其他），但还没有找到解决方案。我有一个横向模式的应用程序。一切都很好，但是当我更改为另一个视图（使用 UITable）时，它处于纵向模式并且不会旋转。我已经尝试了一整天，但无法弄清楚。

```
@property (nonatomic, strong) IBOutlet UIView *aView;
@property (nonatomic, strong) IBOutlet UIViewController *aViewcontroller;
-----
aViewcontroller = [[UIViewController alloc] initWithNibName:@"ViewController" bundle:nil];
aViewcontroller.view = aView;
-----
[self presentModalViewController:aViewcontroller animated:YES];
//got my view in portrait orientation. 
```

我的 .xib 文件中的视图都设置为 Orientation:Landscape。这应该很简单吧？

预先感谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-26T13:43:10.397

默认情况下 UIViewController 只支持纵向。为了支持其他方向，您需要创建新的自定义视图控制器来支持您需要的方向。

脚步：

创建新的自定义视图控制器`ViewControllerLandscape`

然后将其导入您的 mainn 视图控制器

```
#import "ViewControllerLandscape.h" 
```

更改您的代码：

```
aViewcontroller = [[ViewControllerLandscape alloc] initWithNibName:@"ViewController" bundle:nil];
aViewcontroller.view = aView;
[self presentModalViewController:aViewcontroller animated:YES]; 
```

在你`ViewControllerLandscape`添加方法：

```
- (BOOL)shouldAutorotateToInterfaceOrientation:(UIInterfaceOrientation)interfaceOrientation
{
    if((interfaceOrientation == UIInterfaceOrientationLandscapeLeft) ||
      (interfaceOrientation == UIInterfaceOrientationLandscapeRight))  {   
       return YES;
    }
    return NO;
} 
```

# java - java hmac/sha512代

> ID：11670542
> 
> 赞同：2
> 
> 时间：2012-07-26T13:37:57.130
> 
> 标签：java, php, sha256, hmac

我有这个生成**HMAC**的 php 代码（而不是简单的消息摘要）：

```
<?php 
$key = "0123456789ABCDEF0123456789ABCDEF0123456789ABCDEF0123456789ABCDEF0123456789ABCDEF0123456789ABCDEF0123456789ABCDEF0123456789ABCDEF";
$binkey = pack("H*", $key); 
echo strtoupper(hash_hmac('sha512', "ABC", $binkey)); 
?> 
```

输入它的`ABC`输出是：

```
100A6A016A4B21AE120851D51C93B293D95B7D8A44B16ACBEFC2D1C9DF02B6F54FA3C2D6802E52FED5DF8652DDD244788A204682D2D1CE861FDA4E67F2792643 
```

我需要在java中克隆它。

所以这是我当前的 java 克隆：

```
private String generateHMAC( String datas )
    {

        //                final Charset asciiCs = Charset.forName( "utf-8" );
        Mac mac;
        String result = "";
        try
        {
            byte[] bytesKey = PayboxConstants.KEY.getBytes( );
            final SecretKeySpec secretKey = new SecretKeySpec( bytesKey, "HmacSHA512" );
            mac = Mac.getInstance( "HmacSHA512" );
            mac.init( secretKey );
            final byte[] macData = mac.doFinal( datas.getBytes( ) );
            byte[] hex = new Hex( ).encode( macData );
            result = new String( hex, "ISO-8859-1" );
        }
        catch ( final NoSuchAlgorithmException e )
        {
            AppLogService.error( e );
        }
        catch ( final InvalidKeyException e )
        {
            AppLogService.error( e );
        }
        catch ( UnsupportedEncodingException e )
        {
            AppLogService.error( e );
        }

        return result.toUpperCase( );

    } 
```

但它不能完成这项工作，因为对于相同的输入（ABC），它的输出是：

```
AA6492987D7A7AC81109E877315414806F1973CC47B897ECE713171A25A11B279329B1BFF39EA72A5EFB7EDCD71D1F34D5AAC49999A780BD13F019ED99685B80 
```

我尝试了很多其他 java 代码，但没有一个是 php 版本的精确克隆。

我做错什么了？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-26T14:49:38.623

您只是忘记`pack()`在 Java 代码中模仿 的行为（无论您需要什么）。

采用

```
final SecretKeySpec secretKey = new SecretKeySpec( DatatypeConverter.parseHexBinary(PayboxConstants.KEY), "HmacSHA512" ); 
```

在您的 Java 代码中。

[JAXB API](http://docs.oracle.com/javase/6/docs/api/javax/xml/bind/DatatypeConverter.html#parseHexBinary%28java.lang.String%29)`DatatypeConverter.parseHexBinary()`来自哪里。

或者，如果您不想仅仅为了将 HEX 字符串转换为字节而包含 JAXB，您可能需要使用[此处](https://stackoverflow.com/questions/140131/convert-a-string-representation-of-a-hex-dump-to-a-byte-array-using-java)发布的代码。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-07-26T13:42:59.430

我将它用于 Java 中的 SHA 512。它可能会有所帮助：

```
public static String sha512 ( String str )
    {
        try
        {
            return sha512 ( str.getBytes ( "UTF-8" ) );
        }
        catch ( UnsupportedEncodingException e )
        {
            e.printStackTrace ( );
            return "";
        }
    }

public static String sha512 ( byte[] array )
{
    try
    {
        MessageDigest m = MessageDigest.getInstance ( "SHA-512" );
        m.update ( array );
        String hash = new BigInteger ( 1, m.digest ( ) ).toString ( 16 );
        while ( hash.length ( ) < 32 )
        {
            hash = "0" + hash;
        }
        return hash;
    }
    catch ( NoSuchAlgorithmException e )
    {
        e.printStackTrace ( );
        return "";
    }
} 
```

我还记得在stackoverflow的帖子中有关于MD-5的详细答案（只是算法不同）

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-07-26T13:44:47.920

试试看：

```
private String generateHMAC( String datas )
{
    MessageDigest md = MessageDigest.getInstance("SHA-512");

    md.update(datas.getBytes("UTF-8")); // Change this to "UTF-16" if needed
    byte[] digest = md.digest();

    StringBuffer hexString = new StringBuffer();
    for (int i=0;i<digest.length;i++) {
        hexString.append(Integer.toHexString(0xFF & digest[i]));
    }

    return  hexString.toString();
} 
```

# c++ - casting an object two times vs once performance

> ID：11670544
> 
> 赞同：0
> 
> 时间：2012-07-26T13:38:04.040
> 
> 标签：c++

This is a question of pure curiosity, I don't think the answer could cause great improvements.

Let suppose there is this tree of inheritance:

```
 A
          / \
         /   \
       AB     AC
      /\       /\
  ABB  ABC   ACB ACC 
```

I have to write a function that executes differents actions basing on the object type. I'm 100% sure that this object can only be an AC object or one of its childs.

now which code is faster:

```
 int t = getObjectType();
 A*  obj = getObject();
 switch (t) {
      case 0:
         ACB* casted_obj = static_cast<ACB*>(obj);
      case 1:
         ACC* casted_obj = static_cast<ACC*>(obj);
 } 
```

or

```
 int t = getObjectType();
 A*  sup = getObject();
 AC* obj = static_cast<AC*>(sup);
 switch (t) {
      case 0:
         ACB* casted_obj = static_cast<ACB*>(obj);
      case 1:
         ACC* casted_obj = static_cast<ACC*>(obj);
 } 
```

Probably C++ standards doesn't say anything about how the tree of inheritance must be managed, so the answer depends on the implementation.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-26T13:41:05.177

Static casts are done entirely at compile time, so the performance impact will always be zero. The only type cast done at run time is `dynamic_cast`. More: [http://www.cplusplus.com/doc/tutorial/typecasting/](http://www.cplusplus.com/doc/tutorial/typecasting/)

# mysql - 从 MySQL SELECT WITH ROLLUP 中排除列？

> ID：11670548
> 
> 赞同：0
> 
> 时间：2012-07-26T13:38:18.547
> 
> 标签：mysql, rollup

继我之前提出的[这个问题](https://stackoverflow.com/questions/11668672/mysql-with-rollup-not-showing-what-i-expected)之后，说我想添加`ID`到查询中：

`SELECT client, ID, job_type, SUM(actual_value_fee) FROM jo2details GROUP BY client, job_type WITH ROLLUP`

但我不希望 MySQL 尝试总计`ID`列，因为它是表上记录的标识符，而不是“可总结”的东西。我怎样才能排除`ID`在`WITH ROLLUP`请？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-21T23:45:44.993

一种方法是联合两个查询。第一个查询将具有 id，第二个查询将生成小计。使用您的示例，它看起来像这样：

```
SELECT a.id, a.client, a.job_type, sum(a.actual_value_fee)
FROM jo2details a
GROUP BY a.client, a.job_type, a.id

UNION

SELECT NULL, b.client, NULL, sum(b.actual_value_fee)
FROM jo2details b
GROUP BY b.client
WITH ROLLUP 
```

从这里开始，您将不得不使用它来使小计正确排序。

# php - IF 语句不分隔 Empty 或 Isset

> ID：11670556
> 
> 赞同：0
> 
> 时间：2012-07-26T13:38:36.877
> 
> 标签：php, mysql, if-statement, isset

我创建了一个会员资格，人们可以在其中建立个人资料。如果尚未创建，我想做的是显示“创建个人资料”，如果尚未创建，则显示“编辑个人资料”和“查看个人资料”。我尝试使用 if empty 和 if isset 代码设置，但是两者都不能区分谁有个人资料，谁没有。

以下是相关代码：

```
 $colname_rs_Members_tbl = "-1";
if (isset($_SESSION['MM_Username'])) {
  $colname_rs_Members_tbl = $_SESSION['MM_Username'];
}
mysql_select_db($database_members_db_conn, $members_db_conn);
$query_rs_Members_tbl = sprintf("SELECT * FROM members_tbl WHERE username = %s", GetSQLValueString($colname_rs_Members_tbl, "text"));
$rs_Members_tbl = mysql_query($query_rs_Members_tbl, $members_db_conn) or die(mysql_error());
$row_rs_Members_tbl = mysql_fetch_assoc($rs_Members_tbl);
$totalRows_rs_Members_tbl = mysql_num_rows($rs_Members_tbl);

$first = $row_rs_Members_tbl['first_name'];
$last = $row_rs_Members_tbl['last_name'];
$profile_url_name = strtolower($first . $last);

$colname_rs_Actors_tbl = "-1";
if (isset($_SESSION['$profile_url_name'])) {
  $colname_rs_Actors_tbl = $_SESSION['$profile_url_name'];
}
mysql_select_db($database_profiles_db_conn, $profiles_db_conn);
$query_rs_Actors_tbl = sprintf("SELECT profile_url_name FROM actors_tbl WHERE profile_url_name = %s", GetSQLValueString($colname_rs_Actors_tbl, "text"));
$rs_Actors_tbl = mysql_query($query_rs_Actors_tbl, $profiles_db_conn) or die(mysql_error());
$row_rs_Actors_tbl = mysql_fetch_assoc($rs_Actors_tbl);
$totalRows_rs_Actors_tbl = mysql_num_rows($rs_Actors_tbl);

<p align="center"><?php if (isset($row_rs_Actors_tbl['profile_url_name'])) {echo '<a href="http://profiles.oneforestfilms.com/actors/add_profile.php">Create Actor Profile</a><br />';} else {echo '<a href="http://profiles.oneforestfilms.com/actors/edit_profile.php?profile_url_name=<?php echo $profile_url_name; ?>">Edit Actor Profile</a><br />
    <a href="http://profiles.oneforestfilms.com/actors/actor.php?profile_url_name=<?php echo $profile_url_name; ?>">View Actor Profile</a>';} ?></p> 
```

现在我也试过这个：

```
<?php $profile = $row_rs_Actors_tbl['profile_url_name']; if (empty($profile)) {echo... 
```

我也用isset试过了。问题在于，对于有个人资料的人来说，与没有个人资料的人显示的内容是一样的。有人对此有答案吗？先感谢您。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-26T14:01:55.360

您似乎关心但还不够，因为您不断检查是否`$_SESSION`设置了变量，因此验证用户是否具有配置文件，但是无论如何您都执行 MySQL 语句。

此外，该行`if (isset($_SESSION['$profile_url_name'])) {`有`$profile_url_name`单引号 - 这意味着它的值不会被使用；相反，它将被用作“$profile_url_name”。`$_SESSION`如果您实际上将索引命名为 ，这可能很好`$_SESSION['$profile_url_name']`，但考虑到您实际上有一个名为 的变量，这看起来很奇怪`$profile_url_name`。我想它应该是这样的`$_SESSION['first_name last_name']`？

作为解决问题的开始，最好清理现有代码并更清楚地分开事物。尝试这样的事情：

```
<?php
$valid_user = false;
$row_rs_Members_tbl = '';
$row_rs_Actors_tbl = '';
$profile_url_name = '';
if (isset($_SESSION['MM_Username'])) {
    // first-check, success; we have a set username
    mysql_select_db($database_members_db_conn, $members_db_conn);
    $query_rs_Members_tbl = sprintf("SELECT * FROM members_tbl WHERE username = %s", GetSQLValueString($_SESSION['MM_Username'], "text"));
    $rs_Members_tbl = mysql_query($query_rs_Members_tbl, $members_db_conn) or die(mysql_error());
    $row_rs_Members_tbl = mysql_fetch_assoc($rs_Members_tbl);

    $profile_url_name = strtolower($row_rs_Members_tbl['first_name'] . $row_rs_Members_tbl['last_name']);
    if (isset($_SESSION[$profile_url_name])) {
        // there is a session-value set for this name; good chance we have a profile!
        mysql_select_db($database_profiles_db_conn, $profiles_db_conn);
        $query_rs_Actors_tbl = sprintf("SELECT profile_url_name FROM actors_tbl WHERE profile_url_name = %s", GetSQLValueString($_SESSION[$profile_url_name], "text"));
        $rs_Actors_tbl = mysql_query($query_rs_Actors_tbl, $profiles_db_conn) or die(mysql_error());

        if (mysql_num_rows($rs_Actors_tvl) > 0) {
            // w00t, we found a profile =]
            $row_rs_Actors_tbl = mysql_fetch_assoc($rs_Actors_tbl);
            $valid_user = true;
        }
    }
}
?>
<p align="center">
    <?php if ($valid_user === true) { ?>
        <a href="http://profiles.oneforestfilms.com/actors/add_profile.php">Create Actor Profile</a>
    <?php } else { ?>
        <a href="http://profiles.oneforestfilms.com/actors/edit_profile.php?profile_url_name=<?=urlencode($profile_url_name);?>">Edit Actor Profile</a>
        <br />
        <a href="http://profiles.oneforestfilms.com/actors/actor.php?profile_url_name=<?=urlencode($profile_url_name);?>">View Actor Profile</a>
    <?php } ?>
</p> 
```

在上面的示例中，我删除了对您的`$totalRows_*`变量的引用，因为它们没有被使用。另外，我用 替换`$_SESSION['$profile_url_name']`，`$_SESSION[$profile_url_name]`以防万一。

# php - 单独的html和php

> ID：11670558
> 
> 赞同：-4
> 
> 时间：2012-07-26T13:38:38.703
> 
> 标签：php, html, while-loop

我对 HTML 和 PHP 非常陌生，无法弄清楚如何正确分离它们。

```
<html>
$data = mysql_query("SELECT * FROM deviation")
 or die(mysql_error());
while($info = mysql_fetch_array( $data ))
{
  Print "<tr>";
  <input type="radio" name="chassi" value=<?php $info['chassi']/>  $info['chassi']
<br />  
}
<html> 
```

您可能会看到 PHP 和 HTML 代码的狂野混合。它采用 HTML 格式。我想使用 PHP while 循环，但同时使用 HTML 输入。我该怎么办？

提前致谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-26T13:40:10.710

**你需要添加php标签！**

在任何 php 代码的开头和结尾添加 a`<?php`和 a ！`?>`

例如，您将编写如下内容：

```
<?php $variable = "Something"; ?>
<div><?php echo $variable ?></div>

//Would show
<div>Something</div> 
```

要修复您的代码，您应该尝试：

```
<html>
    <!--Head and body tags missing?-->
    <?php
        $data = mysql_query("SELECT * FROM deviation")
        or die(mysql_error());

        while($info = mysql_fetch_array( $data ))
        { ?>
            <tr><td>
                <input type="radio" name="chassi" value="<?php echo $info['chassi'] ?>" />
            <td></tr>
        <?php } ?>
    <!--Closing body tag here?-->
 <html> 
```

从下面的评论中清除：

```
<div>Some text</div> <!--This is html-->
<?php echo $var //This is PHP ?> 
```

要将这些添加在一起，您必须在任何 PHP`<?php`的开头和结尾使用。`?>`也许值得在[这里阅读 PHP 手册](http://php.net/manual/en/language.basic-syntax.phptags.php)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-26T13:42:41.567

您需要向所有 php 代码部分添加打开关闭 php 标记，如下所示：

```
<html>
<?php $data = mysql_query("SELECT * FROM deviation")
 or die(mysql_error());
while($info = mysql_fetch_array( $data ))
{ 
  echo "<tr>"; ?>
  <input type="radio" name="chassi" value=<?php $info['chassi']/>  $info['chassi']
<br />  
<?php } ?>
<html> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-26T13:42:51.637

每个 php 代码都应该在其中，并且每个都不应该是它的一部分。如果你想要它，你可以像 echo ""; 一样回显它。

```
<table>
<?php
$data = mysql_query("SELECT * FROM deviation")
 or die(mysql_error());
while($info = mysql_fetch_array( $data ))
{
?>
  <tr><td>
  <input type="radio" name="chassi" value="<?php echo $info['chassi'] ?>" /> <?php echo $info['chassi'];?>
</td></tr>
<?php
}
?> 
```

您的 HTML 代码也被正确标记。For 循环应该有适当的表格行“”并且它应该有它的内容。您必须学习 HTML 和 PHP 基础知识。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-26T13:48:05.653

您可以使用 while 简写。当输出变量确保你在 HTML 中回显

```
<html>
<?php
  $data = mysql_query("SELECT * FROM deviation") or die(mysql_error());
  while($info = mysql_fetch_array( $data )) : 
?>
  <tr>
  <input type="radio" name="chassi" value=<?php echo $info['chassi']?>/> <?php echo $info['chassi'] ?>
  <br />  
  <?php endwhile; ?>
<html> 
```

# ruby-on-rails-3 - Rails 3 和 SQLite - 处理异常

> ID：11670560
> 
> 赞同：0
> 
> 时间：2012-07-26T13:38:42.307
> 
> 标签：ruby-on-rails-3, exception-handling, sqlite

我目前正在使用基本的自定义内容管理系统构建一个投资组合，并且遇到了 SQLite 错误的问题。

由于网站上的大多数页面都是使用 CMS 创建的，因此它们存储在表格中。我想实现一种在 url 中捕获错误并呈现漂亮的错误页面的方法——而不是标准的 Rails“动作控制器异常”页面。

我有一个彻底的谷歌，真的很难找到任何与我的问题相似的东西。我对 RoR 还很陌生，所以这对我来说并不是显而易见的——如果有这么简单的解决方案的话。

如果有人至少能指出我正确的方向，那将不胜感激。

非常感谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-26T18:33:34.427

带有堆栈跟踪的异常页面仅在开发模式下显示。

在生产中，当出现路由错误时，即上面提到的 url 中的某些错误，它将呈现 public/404.html 页面，因此您需要做的就是自定义该页面以获得漂亮的错误页面。

要在开发中测试它，在 config/development.rb 文件中，更改

```
config.consider_all_requests_local = true 
```

至`config.consider_all_requests_local = false`

# jquery - 淘汰视图模型已更改

> ID：11670565
> 
> 赞同：1
> 
> 时间：2012-07-26T13:39:08.467
> 
> 标签：jquery, mvvm, knockout.js

我正在尝试使用敲除创建一个场景来监视视图模型的更改并通知任何订阅者发生了更改，这工作正常并且通知被触发，但是然后我更改视图并且视图模型更改了通知再次触发，就像在处理视图模型时仍在观察属性一样，有没有办法解决这种行为。

```
 var options = {
            callback: function () {
                var type = "modelChanged";
                var subscription = $.config.core._subscriptions[type];
                if (subscription) {
                    $.config.core._subscriptions[type] = null;
                }
                self.savePersonalInformation();
            },
            event: "forceSave",
            moduleId: "MemberInformationPersonalInfo"
        };
        $.config.core.subscribeView(options); 
```

注意：订阅视图是一个自定义扩展器，基本上是订阅的包装器。

```
 monitorPropertyValues: function (model) {
        //subscribe to each property in the model to monitor changes to the value
        // loop through all the properties in the model
        for (var property in model) {
            if (model.hasOwnProperty(property)) {
                if (model[property].subscribe) { //subcribe to observable properties
                    // subscribe to changes
                    model[property].subscribe(function(value) {
                        if (value) {
                            $.config.core.notifySubscribers(true, "modelChanged");
                        }
                    });
                }
            }

        }
    } 
```

初始化视图时调用 MonitorPropertyValues。

我试图实现的基本行为如下，我在页面上有一个选项卡列表，每个选项卡都有自己的视图模型。当我单击一个选项卡时，我想检查视图模型中是否发生了变化。如果有我想向视图模型发送通知以保存所有更改。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-26T23:09:15.893

您可以使用自动触及所有属性的 a 来实现此类功能`computed`（这是使用 ko.toJS 完成的，它会遍历您的视图模型）。这比您的扩展更简单，并且不应该有任何处置问题。

```
var viewModel = {
    data: {
        first: ko.observable("Ted"),
        last: ko.observable("Smith") 
    },
    isChanged: ko.observable(false)
}

viewModel.allChanges = ko.computed(function() {
   ko.toJS(viewModel.data);  //just touches all observables, that's it.
});

viewModel.allChanges.subscribe(function() {
    if (!viewModel.isChanged()) {
        viewModel.isChanged(true);     
    }
});

ko.applyBindings(viewModel);​ 
```

这个解决方案取自 RP Niemeyer 的小提琴，但我现在找不到原件。无论如何，功劳归于他。

# emacs - 获取正在运行的 Emacs 计时器列表

> ID：11670567
> 
> 赞同：26
> 
> 时间：2012-07-26T13:39:10.930
> 
> 标签：emacs, elisp

我创建了一个计时器并在 Emacs 中存储了对它的引用

```
(setq my-timer-store (run-at-time "1 min" 900 'my-func)) 
```

我通常在早上执行这个 elisp，然后通过执行来阻止它在一夜之间运行

```
(cancel-timer my-timer-store) 
```

不幸的是，我启动了两次计时器（中间没有取消它），所以我不再引用我启动的第一个计时器，因此我无法取消它。有没有办法列出所有正在运行的计时器，这样我就可以清理我离开的那个。

* * *

## 回答 #1

> 赞同：35
> 
> 时间：2012-07-26T13:46:16.310

计时器似乎存储在`timer-list`和中`timer-idle-list`。

# json - IE 8 中的 json stringify 给出运行时错误 Object property or method not supported

> ID：11670572
> 
> 赞同：1
> 
> 时间：2012-07-26T13:39:19.577
> 
> 标签：json, internet-explorer-8, stringify

/* 问题描述 - 我正在使用 json stringify 方法将 javascript 数组转换为 json 表示法中的字符串。但是我在 hidden.value = JSON.stringify(jsonObj); 这应该可以工作，因为 IE8 支持 stringify。请告知

```
Full code below  */    
function getgridvalue() {

        var exportLicenseId;
        var bolGrossQuantity;
        var bolNetQuantity;
        var totalBolGrossQty =0 ;
        var totalBolNetQty =0;
        var jsonObj = []; //declare array
            var netQtyTextBoxValue = Number(document.getElementById("<%= txtNetQty.ClientID %>").value);
        var atLeastOneChecked = false;

        var gridview = document.getElementById("<%= ExporterGrid.ClientID %>"); //Grab a reference to the Grid

        for (i = 1; i < gridview.rows.length; i++) //Iterate through the rows
        {

            if (gridview.rows[i].cells[0].getElementsByTagName("input")[0] != null && gridview.rows[i].cells[0].getElementsByTagName("input")[0].type == "checkbox")
            {

                if (gridview.rows[i].cells[0].getElementsByTagName("input")[0].checked)
                {

                    atLeastOneChecked = true;
                    exportLicenseId = gridview.rows[i].cells[8].getElementsByTagName("input")[0].value;
                    bolNetQuantity = gridview.rows[i].cells[5].getElementsByTagName("input")[0].value;

                    if (bolNetQuantity == "") {
                        alert('<%= NetQuantityMandatory %>');
                        return false;
                        }
                    if (!isNumber(bolNetQuantity)) {
                        alert('<%= NetQuantityNumber %>');
                        return false;
                    }

                    totalBolNetQty += Number(bolNetQuantity);
                    jsonObj.push({ ExportLicenseId: Number(exportLicenseId),  BolNetQuantity: Number(bolNetQuantity) });

                }

            }
        }
if (gridview.rows.length > 2 && !atLeastOneChecked)
{
    alert('<%= SelectMsg %>');
                        return false;
                    }

if (totalBolNetQty != 0 && netQtyTextBoxValue != totalBolNetQty)
            {
                alert('<%= NetQuantitySum %>');
                return false;
            }

        var hidden = document.getElementById('HTMLHiddenField');
//        if (!this.JSON) {
//            this.JSON = {};
//        }
        var JSON = JSON || {};
        if (hidden != null) {

            hidden.value = JSON.stringify(jsonObj);

        }

    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-12T19:06:53.427

使用[F12 开发者工具](http://msdn.microsoft.com/en-us/library/gg589500)检查浏览器模式。JSON 对象存在，但在 IE7 模式下没有方法。使用 json2 库作为后备。

*   [json2.js](https://github.com/douglascrockford/JSON-js/blob/master/json2.js)

# php - PHP json_encode - JSON_FORCE_OBJECT 混合对象和数组输出

> ID：11670575
> 
> 赞同：44
> 
> 时间：2012-07-26T13:39:24.563
> 
> 标签：php, json

我有一个我想要 JSON 编码的 PHP 数据结构。它可以包含许多空数组，其中一些需要编码为数组，而另一些需要编码为对象。

例如，假设我有这个数据结构：

```
$foo = array(
  "bar1" => array(), // Should be encoded as an object
  "bar2" => array() // Should be encoded as an array
); 
```

我想将其编码为：

```
{
  "bar1": {},
  "bar2": []
} 
```

但是如果我使用`json_encode($foo, JSON_FORCE_OBJECT)`我会得到对象：

```
{
  "bar1": {},
  "bar2": {}
} 
```

如果我使用`json_encode($foo)`，我将得到数组：

```
{
  "bar1": [],
  "bar2": []
} 
```

有没有办法对数据进行编码（或定义数组），所以我得到混合数组和对象？

* * *

## 回答 #1

> 赞同：82
> 
> 时间：2012-07-26T13:41:49.153

创建`bar1`为`new stdClass()`对象。这将是`json_encode()`区分它的唯一方法。它可以通过调用来完成`new stdClass()`，或者使用`(object)array()`

```
$foo = array(
  "bar1" => new stdClass(), // Should be encoded as an object
  "bar2" => array() // Should be encoded as an array
);

echo json_encode($foo);
// {"bar1":{}, "bar2":[]} 
```

或通过类型转换：

```
$foo = array(
  "bar1" => (object)array(), // Should be encoded as an object
  "bar2" => array() // Should be encoded as an array
);

echo json_encode($foo);
// {"bar1":{}, "bar2":[]} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2018-09-14T18:22:33.137

对于 php7+ 和 php 5.4，答案相同。

```
$foo = [
  "bar1" => (object)["",""],
  "bar2" => ["",""]
]; 
```

回声 json_encode($foo);

* * *

## 回答 #3

> 赞同：-6
> 
> 时间：2012-07-26T13:42:18.010

答案是否定的。该函数无法猜测您的意图，即哪个数组应该是数组，哪些应该是对象。您应该在 json_encoding 之前简单地将您想要的数组转换为对象

# asp.net - Firefox 中的“连接已重置”仅在回发时

> ID：11670576
> 
> 赞同：0
> 
> 时间：2012-07-26T13:39:26.583
> 
> 标签：asp.net, firefox, postback

我在 ASP.NET 站点上的 Firefox 中收到“连接已重置”的错误消息。以下是详细信息：

*   在 Firefox 11、12 和 14 中不起作用，但在 3.6 中显示
*   发生在有回发的网站的任何地方
*   执行 POST 后，消息会在一秒钟内出现
*   适用于 Chrome 和 IE
*   在当地工作
*   视图状态比较小
*   页面没有执行长时间的操作（例如，文件上传）

我试过清除缓存并在安全模式下运行 Firefox，但没有任何区别。

任何帮助将不胜感激！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-26T13:43:02.633

关闭所有防病毒软件并重新启动 FF。

请参阅[连接解决方](http://www.yanfei.info/2011/07/firefox-link-error)​​案已重置以获得更多帮助。

# java - 通过 Java 在 RTF 文件中搜索单词

> ID：11670577
> 
> 赞同：1
> 
> 时间：2012-07-26T13:39:29.453
> 
> 标签：java, search, data-mining, rtf, apache-tika

我正在寻找使用 Java 在 300 多个 RTF 文档中搜索特定单词的方法。我想使用搜索功能：

1.  计算特定单词在所有 RTF 文档中使用的次数。
2.  找出在哪些 RTF 文档中使用了这个词。

我研究过使用 Apache TIKA 将 RTF 文档转换为文本文件并进行搜索，但我觉得有一种更简单、更快捷的方法。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-26T13:44:34.267

尝试使用lucene？它支持多种文件格式的全文搜索。

# java - 用于在 10 分钟内触发活动的简单 AlarmManager 示例

> ID：11670580
> 
> 赞同：5
> 
> 时间：2012-07-26T13:39:33.330
> 
> 标签：java, android, user-interface, alarmmanager

我发现了很多与此类似的问题，但至少我认为它们太复杂了（代码太多）。

这件事可以用几行代码完成吗？我想在 10（比方说）分钟内启动一项活动，就是这样。谢谢你。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-26T14:03:55.647

设置警报 10 分钟（假设）使用此代码

```
 AlarmManager alarmMgr = (AlarmManager)getSystemService(ALARM_SERVICE);
 Intent intent = new Intent(this, ShortTimeEntryReceiver.class);   
 PendingIntent pendingIntent = PendingIntent.getBroadcast(this, 0,  intent, PendingIntent.FLAG_UPDATE_CURRENT);
 alarmMgr.setRepeating(AlarmManager.RTC_WAKEUP, System.currentTimeMillis(),10*60*1000, pendingIntent); 
```

开始活动

```
public class ShortTimeEntryReceiver extends BroadcastReceiver{

@Override
public void onReceive(Context context, Intent intent) {

 try {
         Bundle bundle = intent.getExtras();
         String message = bundle.getString("alarm_message");

         // Your activity name
         Intent newIntent = new Intent(context, ReminderPopupMessage.class); 
         newIntent.putExtra("alarm_message", message);
         newIntent.addFlags(Intent.FLAG_ACTIVITY_NEW_TASK);  
         context.startActivity(newIntent);
        } catch (Exception e) { 
         e.printStackTrace();

        } 
} 
} 
```

在您的清单文件中添加以下内容

```
 <receiver android:name=".ShortTimeEntryReceiver"
                      android:enabled="true"
                      android:process=":remote"> 
            </receiver> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-26T13:48:02.897

我使用的此功能根据“设置”参数设置或取消警报

```
public static void SetAlarm(Context c, long AlarmTime, int ItemID, String Message, Boolean Set) {
    Intent intent = new Intent(c, AlarmReceiver.class);
    intent.putExtra("Message", Message);
    intent.putExtra("ItemID", ItemID);

    PendingIntent sender = PendingIntent.getBroadcast(c, 8192 + ItemID, intent, PendingIntent.FLAG_UPDATE_CURRENT);

            // Clear the seconds to 0 for neatness
    Calendar ca = Calendar.getInstance();
    ca.setTimeInMillis(AlarmTime);
    ca.set(Calendar.SECOND, 0);
    AlarmTime = ca.getTimeInMillis();

    // Get the AlarmManager service
    AlarmManager am = (AlarmManager) c.getSystemService(Context.ALARM_SERVICE);
    if (Set) {
        am.set(AlarmManager.RTC_WAKEUP, AlarmTime, sender);
    } else {
        am.cancel(sender);
    }
} 
```

然后，您将需要一个广播接收器来处理警报并执行您想做的任何事情。

```
public class AlarmReceiver extends BroadcastReceiver {

@Override
public void onReceive(Context context, Intent intent) {
    try {
        Bundle bundle = intent.getExtras();
        String Message = bundle.getString("Message");
        int ItemID = bundle.getInt("ItemID");

        // Do what you want to do, start an activity etc

    } catch (Exception e) {
        e.printStackTrace();
    }
} 
```

}

# gcc - 为什么默认定义_GNU_SOURCE以及如何关闭它？

> ID：11670581
> 
> 赞同：12
> 
> 时间：2012-07-26T13:39:38.980
> 
> 标签：gcc

我正在使用 g++，它告诉我我`_GNU_SOURCE`在命令行上定义了，但我没有。

我现在`_GNU_SOURCE`可以使用定义来启用 gnu 扩展，但现在我不想要这些扩展。我添加了`-std=c++0x -pedantic`，但`_GNU_SOURCE`仍然定义。

输出`g++ -v`如下：

```
$ g++ -v
Using built-in specs.
COLLECT_GCC=/usr/bin/g++
COLLECT_LTO_WRAPPER=/usr/lib/gcc/x86_64-linux-gnu/4.6/lto-wrapper
Target: x86_64-linux-gnu
Configured with: ../src/configure -v --with-pkgversion='Ubuntu/Linaro 4.6.3-1ubuntu5' --with-bugurl=file:///usr/share/doc/gcc-4.6/README.Bugs --enable-languages=c,c++,fortran,objc,obj-c++ --prefix=/usr --program-suffix=-4.6 --enable-shared --enable-linker-build-id --with-system-zlib --libexecdir=/usr/lib --without-included-gettext --enable-threads=posix --with-gxx-include-dir=/usr/include/c++/4.6 --libdir=/usr/lib --enable-nls --with-sysroot=/ --enable-clocale=gnu --enable-libstdcxx-debug --enable-libstdcxx-time=yes --enable-gnu-unique-object --enable-plugin --enable-objc-gc --disable-werror --with-arch-32=i686 --with-tune=generic --enable-checking=release --build=x86_64-linux-gnu --host=x86_64-linux-gnu --target=x86_64-linux-gnu
Thread model: posix
gcc version 4.6.3 (Ubuntu/Linaro 4.6.3-1ubuntu5) 
```

当我给它一个空文件并用 编译时`g++ -E -dD -std=c++98 -pedantic empty.cpp`，我得到了这个：

```
$ g++ -E -dD -std=c++98 -pedantic empty.cpp
# 1 "empty.cpp"
# 1 "<built-in>"
#define __STDC__ 1
#define __cplusplus 1
#define __STDC_HOSTED__ 1
#define __GNUC__ 4
#define __GNUC_MINOR__ 6
#define __GNUC_PATCHLEVEL__ 3
#define __VERSION__ "4.6.3"
#define __FINITE_MATH_ONLY__ 0
#define _LP64 1
#define __LP64__ 1
#define __SIZEOF_INT__ 4
#define __SIZEOF_LONG__ 8
#define __SIZEOF_LONG_LONG__ 8
#define __SIZEOF_SHORT__ 2
#define __SIZEOF_FLOAT__ 4
#define __SIZEOF_DOUBLE__ 8
#define __SIZEOF_LONG_DOUBLE__ 16
#define __SIZEOF_SIZE_T__ 8
#define __CHAR_BIT__ 8
#define __BIGGEST_ALIGNMENT__ 16
#define __ORDER_LITTLE_ENDIAN__ 1234
#define __ORDER_BIG_ENDIAN__ 4321
#define __ORDER_PDP_ENDIAN__ 3412
#define __BYTE_ORDER__ __ORDER_LITTLE_ENDIAN__
#define __FLOAT_WORD_ORDER__ __ORDER_LITTLE_ENDIAN__
#define __SIZEOF_POINTER__ 8
#define __GNUG__ 4
#define __SIZE_TYPE__ long unsigned int
#define __PTRDIFF_TYPE__ long int
#define __WCHAR_TYPE__ int
#define __WINT_TYPE__ unsigned int
#define __INTMAX_TYPE__ long int
#define __UINTMAX_TYPE__ long unsigned int
#define __CHAR16_TYPE__ short unsigned int
#define __CHAR32_TYPE__ unsigned int
#define __SIG_ATOMIC_TYPE__ int
#define __INT8_TYPE__ signed char
#define __INT16_TYPE__ short int
#define __INT32_TYPE__ int
#define __INT64_TYPE__ long int
#define __UINT8_TYPE__ unsigned char
#define __UINT16_TYPE__ short unsigned int
#define __UINT32_TYPE__ unsigned int
#define __UINT64_TYPE__ long unsigned int
#define __INT_LEAST8_TYPE__ signed char
#define __INT_LEAST16_TYPE__ short int
#define __INT_LEAST32_TYPE__ int
#define __INT_LEAST64_TYPE__ long int
#define __UINT_LEAST8_TYPE__ unsigned char
#define __UINT_LEAST16_TYPE__ short unsigned int
#define __UINT_LEAST32_TYPE__ unsigned int
#define __UINT_LEAST64_TYPE__ long unsigned int
#define __INT_FAST8_TYPE__ signed char
#define __INT_FAST16_TYPE__ long int
#define __INT_FAST32_TYPE__ long int
#define __INT_FAST64_TYPE__ long int
#define __UINT_FAST8_TYPE__ unsigned char
#define __UINT_FAST16_TYPE__ long unsigned int
#define __UINT_FAST32_TYPE__ long unsigned int
#define __UINT_FAST64_TYPE__ long unsigned int
#define __INTPTR_TYPE__ long int
#define __UINTPTR_TYPE__ long unsigned int
#define __GXX_WEAK__ 1
#define __DEPRECATED 1
#define __GXX_RTTI 1
#define __EXCEPTIONS 1
#define __GXX_ABI_VERSION 1002
#define __SCHAR_MAX__ 127
#define __SHRT_MAX__ 32767
#define __INT_MAX__ 2147483647
#define __LONG_MAX__ 9223372036854775807L
#define __LONG_LONG_MAX__ 9223372036854775807LL
#define __WCHAR_MAX__ 2147483647
#define __WCHAR_MIN__ (-__WCHAR_MAX__ - 1)
#define __WINT_MAX__ 4294967295U
#define __WINT_MIN__ 0U
#define __PTRDIFF_MAX__ 9223372036854775807L
#define __SIZE_MAX__ 18446744073709551615UL
#define __INTMAX_MAX__ 9223372036854775807L
#define __INTMAX_C(c) c ## L
#define __UINTMAX_MAX__ 18446744073709551615UL
#define __UINTMAX_C(c) c ## UL
#define __SIG_ATOMIC_MAX__ 2147483647
#define __SIG_ATOMIC_MIN__ (-__SIG_ATOMIC_MAX__ - 1)
#define __INT8_MAX__ 127
#define __INT16_MAX__ 32767
#define __INT32_MAX__ 2147483647
#define __INT64_MAX__ 9223372036854775807L
#define __UINT8_MAX__ 255
#define __UINT16_MAX__ 65535
#define __UINT32_MAX__ 4294967295U
#define __UINT64_MAX__ 18446744073709551615UL
#define __INT_LEAST8_MAX__ 127
#define __INT8_C(c) c
#define __INT_LEAST16_MAX__ 32767
#define __INT16_C(c) c
#define __INT_LEAST32_MAX__ 2147483647
#define __INT32_C(c) c
#define __INT_LEAST64_MAX__ 9223372036854775807L
#define __INT64_C(c) c ## L
#define __UINT_LEAST8_MAX__ 255
#define __UINT8_C(c) c
#define __UINT_LEAST16_MAX__ 65535
#define __UINT16_C(c) c
#define __UINT_LEAST32_MAX__ 4294967295U
#define __UINT32_C(c) c ## U
#define __UINT_LEAST64_MAX__ 18446744073709551615UL
#define __UINT64_C(c) c ## UL
#define __INT_FAST8_MAX__ 127
#define __INT_FAST16_MAX__ 9223372036854775807L
#define __INT_FAST32_MAX__ 9223372036854775807L
#define __INT_FAST64_MAX__ 9223372036854775807L
#define __UINT_FAST8_MAX__ 255
#define __UINT_FAST16_MAX__ 18446744073709551615UL
#define __UINT_FAST32_MAX__ 18446744073709551615UL
#define __UINT_FAST64_MAX__ 18446744073709551615UL
#define __INTPTR_MAX__ 9223372036854775807L
#define __UINTPTR_MAX__ 18446744073709551615UL
#define __FLT_EVAL_METHOD__ 0
#define __DEC_EVAL_METHOD__ 2
#define __FLT_RADIX__ 2
#define __FLT_MANT_DIG__ 24
#define __FLT_DIG__ 6
#define __FLT_MIN_EXP__ (-125)
#define __FLT_MIN_10_EXP__ (-37)
#define __FLT_MAX_EXP__ 128
#define __FLT_MAX_10_EXP__ 38
#define __FLT_DECIMAL_DIG__ 9
#define __FLT_MAX__ 3.40282346638528859812e+38F
#define __FLT_MIN__ 1.17549435082228750797e-38F
#define __FLT_EPSILON__ 1.19209289550781250000e-7F
#define __FLT_DENORM_MIN__ 1.40129846432481707092e-45F
#define __FLT_HAS_DENORM__ 1
#define __FLT_HAS_INFINITY__ 1
#define __FLT_HAS_QUIET_NAN__ 1
#define __DBL_MANT_DIG__ 53
#define __DBL_DIG__ 15
#define __DBL_MIN_EXP__ (-1021)
#define __DBL_MIN_10_EXP__ (-307)
#define __DBL_MAX_EXP__ 1024
#define __DBL_MAX_10_EXP__ 308
#define __DBL_DECIMAL_DIG__ 17
#define __DBL_MAX__ double(1.79769313486231570815e+308L)
#define __DBL_MIN__ double(2.22507385850720138309e-308L)
#define __DBL_EPSILON__ double(2.22044604925031308085e-16L)
#define __DBL_DENORM_MIN__ double(4.94065645841246544177e-324L)
#define __DBL_HAS_DENORM__ 1
#define __DBL_HAS_INFINITY__ 1
#define __DBL_HAS_QUIET_NAN__ 1
#define __LDBL_MANT_DIG__ 64
#define __LDBL_DIG__ 18
#define __LDBL_MIN_EXP__ (-16381)
#define __LDBL_MIN_10_EXP__ (-4931)
#define __LDBL_MAX_EXP__ 16384
#define __LDBL_MAX_10_EXP__ 4932
#define __DECIMAL_DIG__ 21
#define __LDBL_MAX__ 1.18973149535723176502e+4932L
#define __LDBL_MIN__ 3.36210314311209350626e-4932L
#define __LDBL_EPSILON__ 1.08420217248550443401e-19L
#define __LDBL_DENORM_MIN__ 3.64519953188247460253e-4951L
#define __LDBL_HAS_DENORM__ 1
#define __LDBL_HAS_INFINITY__ 1
#define __LDBL_HAS_QUIET_NAN__ 1
#define __DEC32_MANT_DIG__ 7
#define __DEC32_MIN_EXP__ (-94)
#define __DEC32_MAX_EXP__ 97
#define __DEC32_MIN__ 1E-95DF
#define __DEC32_MAX__ 9.999999E96DF
#define __DEC32_EPSILON__ 1E-6DF
#define __DEC32_SUBNORMAL_MIN__ 0.000001E-95DF
#define __DEC64_MANT_DIG__ 16
#define __DEC64_MIN_EXP__ (-382)
#define __DEC64_MAX_EXP__ 385
#define __DEC64_MIN__ 1E-383DD
#define __DEC64_MAX__ 9.999999999999999E384DD
#define __DEC64_EPSILON__ 1E-15DD
#define __DEC64_SUBNORMAL_MIN__ 0.000000000000001E-383DD
#define __DEC128_MANT_DIG__ 34
#define __DEC128_MIN_EXP__ (-6142)
#define __DEC128_MAX_EXP__ 6145
#define __DEC128_MIN__ 1E-6143DL
#define __DEC128_MAX__ 9.999999999999999999999999999999999E6144DL
#define __DEC128_EPSILON__ 1E-33DL
#define __DEC128_SUBNORMAL_MIN__ 0.000000000000000000000000000000001E-6143DL
#define __REGISTER_PREFIX__
#define __USER_LABEL_PREFIX__
#define _FORTIFY_SOURCE 2
#define __GNUC_GNU_INLINE__ 1
#define __NO_INLINE__ 1
#define __STRICT_ANSI__ 1
#define __GCC_HAVE_SYNC_COMPARE_AND_SWAP_1 1
#define __GCC_HAVE_SYNC_COMPARE_AND_SWAP_2 1
#define __GCC_HAVE_SYNC_COMPARE_AND_SWAP_4 1
#define __GCC_HAVE_SYNC_COMPARE_AND_SWAP_8 1
#define __GCC_HAVE_DWARF2_CFI_ASM 1
#define __PRAGMA_REDEFINE_EXTNAME 1
#define __SSP__ 1
#define __SIZEOF_INT128__ 16
#define __SIZEOF_WCHAR_T__ 4
#define __SIZEOF_WINT_T__ 4
#define __SIZEOF_PTRDIFF_T__ 8
#define __amd64 1
#define __amd64__ 1
#define __x86_64 1
#define __x86_64__ 1
#define __k8 1
#define __k8__ 1
#define __MMX__ 1
#define __SSE__ 1
#define __SSE2__ 1
#define __SSE_MATH__ 1
#define __SSE2_MATH__ 1
#define __gnu_linux__ 1
#define __linux 1
#define __linux__ 1
#define __unix 1
#define __unix__ 1
#define __ELF__ 1
#define __DECIMAL_BID_FORMAT__ 1
# 1 "<command-line>"
#define _GNU_SOURCE 1
# 1 "empty.cpp" 
```

结果告诉我这`_GNU_SOURCE`是在命令行中定义的。

我怎样才能关闭它？我不想`#undef _GNU_SOURCE`在每个源文件中。

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-07-27T00:53:18.467

在网上查了一些，发现有很多关于这个的投诉。

实际上就是`libstdc++`需要定义这个宏。

简单的回答，目前`_GNU_SOURCE`需要为 定义`libstdc++`，短期内不会修复。

libstd++ 文档中甚至还有一个[常见问题解答：](http://gcc.gnu.org/onlinedocs/libstdc++/faq.html#faq.predefined)

> 在 Solaris 上，`g++`（但不是`gcc`）总是定义预处理器宏 `_XOPEN_SOURCE`。在 GNU/Linux 上，同样的情况也发生在`_GNU_SOURCE`. （这不是一个详尽的列表；其他宏和其他平台也会受到影响。）
> 
> 这些宏通常用在 C 库头文件中，保护新版本的函数免受旧版本的影响。C++ 标准库包括 C 标准库，但它需要 C90 版本，出于向后兼容的原因，这通常不是许多供应商的默认设置。
> 
> 更重要的是，C++ 标准要求在定义某些符号后仅在某些平台上可用的行为。通常问题涉及与 I/O 相关的 typedef。为了确保正确性，编译器简单地预定义了这些符号。
> 
> `#define`请注意，仅在构建库时（在安装期间）对他们来说是不够的。由于我们没有“export”关键字，因此库中的大部分内容都以标头形式存在，这意味着在解析和编译程序时也必须定义符号。
> 
> 要查看定义了哪些符号，请`CPLUSPLUS_CPP_SPEC`在目标的 gcc 配置标头中查找（并尝试更改它们以查看在构建复杂代码时会发生什么）。您还可以运行“ `g++ -E -dM - < /dev/null`”来显示任何特定安装的预定义宏列表。
> 
> 这已经在邮件列表中讨论了很多。
> 
> 这种方法有点像疣。我们想找到一个更清洁的解决方案，但还没有人投入时间。

# perforce - Perforce - 从流中删除文件

> ID：11670585
> 
> 赞同：2
> 
> 时间：2012-07-26T13:39:53.257
> 
> 标签：perforce

我在 Perforce 中创建了一个新 Stream 并从我的本地文件夹中填充它。无意中 - 我也添加了所有目标文件。

现在我想*从仓库中删除所有对象文件 - .o 用于流，例如 P4 delete //myDepot/myStream/* .o （递归）

查看了 P4 命令，但似乎找不到可以执行此操作的命令

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-26T14:32:58.273

尝试这个：

```
p4 delete //myDepot/myStream/....o 
```

# .net - Castle Windsor：注册具有相同构造函数参数的接口的所有实现

> ID：11670586
> 
> 赞同：2
> 
> 时间：2012-07-26T13:40:02.067
> 
> 标签：.net, inversion-of-control, castle-windsor, castle

我有同一个接口的多个实现，它们都具有相同的构造函数参数（strConn）。是否可以使用 1 个 container.Register 调用注册所有实现？

这是我所拥有的：

```
container.Register(
            Classes.FromAssemblyContaining<IUserMenuDao>()
                .BasedOn<IDataAccess>().WithService.FromInterface()
            ); 
```

这些实现都具有相同的构造函数参数；strConn。注册一个将是：

```
container.Register(Component.For<IUserMenuDao>()
                               .DependsOn(new {strConn = ConfigurationManager.ConnectionStrings["ABC123"].ConnectionString})
                               .ImplementedBy<UserMenuDaoSqlServerImpl>()); 
```

有没有办法按照类似于代码示例 #1 的约定进行注册，但对所有实现都使用 DependsOn？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-27T07:00:43.480

确实是的

```
container.Register( 
    Classes.FromAssemblyContaining<IUserMenuDao>() 
         .BasedOn<IDataAccess>()
         .WithService.FromInterface() 
         .Configure(c => c.DependsOn(new {strConn = ConfigurationManager.ConnectionStrings["ABC123"].ConnectionString}))
    ); 
```

# salesforce - 在 Salesforce 中设置来自 web 服务调用的 cookie

> ID：11670593
> 
> 赞同：1
> 
> 时间：2012-07-26T13:40:20.123
> 
> 标签：salesforce, apex-code

有人可以在下面解释一下吗？

```
stub.inputHttpheaders_x.put('Cookie', 'name = value'); 
```

在这种情况下，'name = value' 是什么？

我得到的cookie如下：

```
stub.outputHttpheaders_x.get('Set-cookie'); 
```

我如何在第一个语句中使用这个 cookie？

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-27T12:00:56.033

获取存根后，您可以使用 inputHttpheaders_x.put 方法设置 HTTP 标头字段。

这个[Wikipedia 链接](http://en.wikipedia.org/wiki/HTTP_header)很好地描述了您可以在 HTTP 标头上设置哪些字段。要设置的这些字段之一是“Cookie”。它可以设置为“key=value”值，例如“site=google”。

代码块

```
stub.inputHttpheaders_x.put('Cookie', 'name = value'); 
```

将值 'name = value' 设置为 Cookie 标头字段。

同样，您可以使用以下方法访问响应对象的 HTTP 标头中设置的 cookie 值：

```
String cookie = stub.outputHttpHeaders_x.get('Set-Cookie') 
```

希望这是有道理的！

Anup PS：如果您正在尝试使用适当的集成设置。尝试将值打印出来以了解输出的格式。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-10-01T11:15:43.690

准确地说：

您必须通过初始化地图拳头来“启用” outputHttpHeaders_x 之后您可以访问 Set-Cookie。

可以在这里阅读： [https ://developer.salesforce.com/docs/atlas.en-us.apexcode.meta/apexcode/apex_callouts_wsdl2apex.htm](https://developer.salesforce.com/docs/atlas.en-us.apexcode.meta/apexcode/apex_callouts_wsdl2apex.htm)

> outputHttpHeaders_x 的值默认为空。您必须先设置 outputHttpHeaders_x，然后才能访问响应中的标头内容。

```
docSample.DocSamplePort stub = new docSample.DocSamplePort();
stub.outputHttpHeaders_x = new Map<String, String>();
String input = 'This is the input string';
String output = stub.EchoString(input);

//Getting cookie header
String cookie = stub.outputHttpHeaders_x.get('Set-Cookie');

//Getting custom header
String myHeader = stub.outputHttpHeaders_x.get('My-Header'); 
```

# c# - C# - 从客户端机器获取图像路径

> ID：11670598
> 
> 赞同：2
> 
> 时间：2012-07-26T13:40:35.487
> 
> 标签：c#, asp.net

我想获取保存在客户端机器中的图像的路径。我知道图像的路径和文件名。通过使用 FileUpload 我可以做到，但不使用 fileupload 是否可以获得文件的路径？？。

我的场景如下，

```
Public void ConverttoByte()
{
    //Get the image path from web.config & this image is in client machine
    string strConfig = @"C:\Manikandan\image\image1.jpg"; 
    MemoryStream MS = new MemoryStream();
    Byte[] data;
    int fiFileSize;
    System.Drawing.Image image;
    image = System.Drawing.Image.FromFile(strConfig);
    image.Save(MS, System.Drawing.Imaging.ImageFormat.Gif);
    data = MS.ToArray();
    CallDBMethod(data);
} 
```

在这里，我将图像转换为*字节*，并调用**CallDBMethod**将此字节详细信息插入 DB..

此图像在客户端计算机中可用，但在服务器计算机中不可用..

那么，如何从客户端计算机获取此图像路径以及如何解决此问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-26T13:42:56.707

如果没有文件上传控件，除非您创建 Activex 控件（可能不适用于所有浏览器。用户必须授予运行此控件的权限），否则**这是不可能的。**

在 Web 应用程序中，您不能从用户的计算机中获取（窃取）任何文件，除非他们采取行动（例如：在“文件输入”控件中选择文件并单击某个上传按钮）。

如果您想在文件上传控件中选择文件用户的完整文件路径，您可以通过`HttpPostedFile.FileName`属性获取，该属性为您提供客户端上文件的完全限定名称（例如：）`C:\MySomeFolder\SomeFile.jpg`。

```
 string fullPath=FileUpload1.HttpPostedFile.FileName 
```

假设`FileUpload1`是文件上传控件的 ID。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-26T13:44:40.647

据我所知，这是不可能的。您无法获取客户端的图像路径。浏览器不允许我们获取路径。`Using fileupload control you can also not get the complete path.` 我的一个类似问题 [如何使用 asp.net 中的文件上传控制或任何其他方式获取完整的文件路径？](https://stackoverflow.com/questions/7364757/how-to-get-complete-file-path-using-file-upload-control-in-asp-net-or-any-other)

# xml - xml 元素的正则表达式组

> ID：11670608
> 
> 赞同：0
> 
> 时间：2012-07-26T13:41:07.377
> 
> 标签：xml, regex

如何获得观察元素及其内部元素？

```
 <organizer moodCode="EVN" classCode="CLUSTER">
    <templateId root="2.16.840.1.113883.3.129.3.3.6.0"/>
    <statusCode code="completed"/>
    <component>
       <observation moodCode="EVN" classCode="OBS">
          <templateId root="2.16.840.1.113883.3.129.3.3.6.1"/>
          <code codeSystemVersion="2.0" displayName="Kabul Bilgileri" codeSystemName="Veri Kısmı" code="KABUL_BILGILERI" codeSystem="2.16.840.1.113883.3.129.2.2.3"/>
          <effectiveTime value="20120102134751"/>
          <value xsi:type="CD" codeSystemVersion="2.0" displayName="Diğer" codeSystemName="Kabul Şekli" code="98" codeSystem="2.16.840.1.113883.3.129.1.2.7"/>
       </observation>
    </component>
    <component>
       <observation moodCode="EVN" classCode="OBS">
          <templateId root="2.16.840.1.113883.3.129.3.4.365"/>
          <code codeSystemVersion="2.0" displayName="Vaka Türü" codeSystemName="Veri Elemanı" code="VAKA_TURU" codeSystem="2.16.840.1.113883.3.129.2.2.7"/>
          <value xsi:type="CD" codeSystemVersion="2.0" displayName="Normal" codeSystemName="Vaka Türü" code="1" codeSystem="2.16.840.1.113883.3.129.1.2.53"/>
       </observation>
    </component>
 </organizer> 
```

更新：这可能是 html 或其他标记语言。我只想检索观察元素和内部元素。我不会在程序运行时使用它。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-26T13:45:06.170

[正如 Jeff 解释](http://www.codinghorror.com/blog/2009/11/parsing-html-the-cthulhu-way.html)的那样，当 XML 解析器存在并且会为您处理所有令人讨厌的细节时，您绝对应该避免在该工作中使用正则表达式！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-26T14:15:36.880

正如其他人所指出的，您需要 XML 解析*而不是*正则表达式。

将您的 XML 解析器的¹ XPath 选择与查询一起使用：

```
//observation 
```

获取所有`<observation>`元素及其子节点。

* * *

¹在不了解您的编程平台的情况下，我们无法在该部分为您提供帮助。

# redirect - 为什么应用会开始重定向到主页？

> ID：11670615
> 
> 赞同：0
> 
> 时间：2012-07-26T13:41:33.847
> 
> 标签：redirect, iframe, fbml

在最近的某个时间点（即本月），我们的 Facebook 应用程序开始重定向到[https://www.facebook.com/home.php](https://www.facebook.com/home.php)，而不是加载应用程序。该应用程序最初是作为 FBML 画布应用程序创建的，但我们在 6 月 5 日截止日期之前将其转换为 iframe 画布应用程序（或者至少我们认为我们这样做了）（它在 Canvas FBML/iframe 下的 Facebook 开发人员应用程序中显示 iframe）。

我已经确认该应用程序在 7 月 24 日开始运行，因此我们已经超过了 FBML 的 7 月 5 日结束日期。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-26T16:43:00.920

重定向来自我们的代码，因为它找不到请求页面的 page_id。为什么 page_id 参数在 7 月 25 日突然消失了，我还不能说。

# servlets - 从服务器的角度来看，如何最好地实现导航器？

> ID：11670620
> 
> 赞同：0
> 
> 时间：2012-07-26T13:41:39.133
> 
> 标签：servlets, navigation, oracle10g, tomcat6

我必须为 Web 应用程序（基于这些：java、tomcat、jsp、oracle db）创建一个导航菜单，一旦用户登录，它就会出现在所有内容中。关键是几乎每个连接的人都有不同的权限，所以每个人都会看到不同的导航菜单。这是我的第一个 Web 开发项目之一，所以我对事物如何从客户端通信到服务器以及反之亦然的概念不是很强大，因此，最好的做法是什么，但是我的一些考虑有他们的优点和缺点。

*   制作过滤器以在每个请求中加载菜单。这将查询对它来说很痛苦的数据库，因为在少数情况下，事情会发生变化（或者至少不会经常发生）；但是，当有变化时，它会立即加载。
*   制作一个 iframe 来加载菜单一次并控制第二个 iframe（我认为这是最不鼓励的，但仍然是一个选项，并且具有每次单击某些内容时不会向服务器发出相同请求的优点）。当发生变化时，重新加载将加载新数据。
*   使菜单作为对象保留在会话中。一旦用户登录，这将查询数据库。更改将在每个连接中加载（或通过制作按钮重新加载）。但是这种方法会将东西放在服务器内存中，我认为这是最糟糕的想法之一。（不确定我在这里说什么，我错了吗？）

正如我所说，我对此太陌生，所以我不知道我还能做些什么。据我所知，我无法将文件写入客户端（例如 xml），因此它是菜单的数据源并每天左右删除它。我可以用数据在服务器中写一个文件，所以我不需要从数据库中查询（但这仍然是对服务器的请求），但这带来了其他问题，数据的更改不会被刷新（除非当然，我做了一些需要更多时间和更多维护的东西）而且我不知道这是否比仅仅访问数据库更快。

这些东西如何最好地实施？考虑开发成本、维护成本、性能（减少*每次点击*时对相同信息的请求）、用户感知滞后以及我在该主题上的成熟度尚未看到的其他成本。关于网页设计的书籍有什么推荐吗？

**编辑：** 我打算使用 jsTree 进行可视化并制作菜单子级别以加载 ajax 请求。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-26T16:31:58.383

我会忘记第二个选项，而选择最简单的无状态选项：第一个。数据库很快！

如果看起来这需要太多时间或给数据库带来太多负载（但我对此表示怀疑：加载用户的权限应该非常快），您总是可以使用第三个选项。当然它会在会话中存储菜单（或只是权限），但如果需要，会话也可以写入磁盘或数据库。

不要预先优化。

# php - php中的屏蔽密码

> ID：11670624
> 
> 赞同：0
> 
> 时间：2012-07-26T13:41:51.947
> 
> 标签：php, mysql, masking, password-encryption

嗨，有一个 xml，我在其中分配了我从第三方获得的密码值。我想掩饰在里面。我想隐藏那个密码。代码在 php.ini 中。是否可以在 php 中屏蔽密码？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-26T13:45:05.967

您可以使用以下方法加密密码：

```
define('SALT', 'atopsecretphrase'); 

function encrypt($text) 
{ 
    return trim(base64_encode(mcrypt_encrypt(MCRYPT_RIJNDAEL_256, SALT, $text, MCRYPT_MODE_ECB, mcrypt_create_iv(mcrypt_get_iv_size(MCRYPT_RIJNDAEL_256, MCRYPT_MODE_ECB), MCRYPT_RAND)))); 
} 

function decrypt($text) 
{ 
    return trim(mcrypt_decrypt(MCRYPT_RIJNDAEL_256, SALT, base64_decode($text), MCRYPT_MODE_ECB, mcrypt_create_iv(mcrypt_get_iv_size(MCRYPT_RIJNDAEL_256, MCRYPT_MODE_ECB), MCRYPT_RAND))); 
} 

$encryptedmessage = encrypt("mypassword"); 
echo decrypt($encryptedmessage); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-26T13:44:30.663

您可以使用`md5()`或`sha1()`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-26T13:44:56.310

如果你需要传递密码，你能做的最好的就是加密密码。

如果您只需要检查密码，您应该查看哈希。见： http: [//phpsec.org/articles/2005/password-hashing.html](http://phpsec.org/articles/2005/password-hashing.html)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-26T13:45:32.457

您可以将其保存为散列。例如，`sha1($password)`已经为相同的密码返回相同的哈希值，但无法解密。

这样密码是安全的，您可以随时获取用户的输入，以相同的方式对其进行哈希处理，并将他输入的密码与 XML 文件中的密码进行比较。

否则，另一种解决方案是编写自己的加密/解密算法而不是散列。

* * *

## 回答 #5

> 赞同：-2
> 
> 时间：2012-07-26T13:45:04.717

尝试以下操作：

```
echo md5("password"); 
```

将返回：

```
5f4dcc3b5aa765d61d8327deb882cf99 
```

# java - 我如何知道是否选择了网格中的项目？

> ID：11670625
> 
> 赞同：1
> 
> 时间：2012-07-26T13:41:54.377
> 
> 标签：java, gwt, grid, gxt

嗨，我的代码有一个问题，我用这样的插件创建了一个网格：

[http://www.sencha.com/examples-2/#gridplugins](http://www.sencha.com/examples-2/#gridplugins)（第二个网格）

好吧，现在我需要知道单击按钮时选择了哪些项目。我该怎么办 ？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-26T13:59:37.773

使用网格`GridSelectionModel`（假设您的数据是`ModelData`，用任何合适的替换）：

```
ModelData item = grid.getSelectionModel().getSelectedItem(); 
```

或者

```
List<ModelData> items = grid.getSelectionModel().getSelectedItems(); 
```

# javascript - 页面重新加载后css类处于活动状态

> ID：11670626
> 
> 赞同：2
> 
> 时间：2012-07-26T13:42:00.947
> 
> 标签：javascript, jquery, asp.net-mvc-3, razor

我遇到了一些麻烦。我正在做一个 asp.net mvc3 应用程序，我下载了一些 css 菜单，问题是我想在单击菜单选项卡后保持菜单处于活动状态，并且只有在单击另一个选项卡时才会更改。

这是 _Layout.cshtml 上的菜单代码

```
<nav>
<div class="cssmenu">
                <ul>
                    <li class='active'><span>@Html.ActionLink("Início", "Index", "Home")</span></li>
                    <li><span>@Html.ActionLink("Tarefas Contabilidade", "SelectEmpresa", "Empresa")</span></li>
                    <li><a href='#'><span>Clientes</span></a>
                        <ul>
                            <li><span>@Html.ActionLink("Listar clientes", "ListarEmpresas", "Empresa")</span></li>
                           </ul>
                    </li>
                     <li><a href='#'><span>Balancetes</span></a>
                        <ul>
                            <li><span>@Html.ActionLink("Listar registos", "ListaBalancetesPorSalaoMes", "Balancete")</span></li>
                        </ul>
                    </li>
                    <li><span>@Html.ActionLink("Sobre", "About", "Home")</span></li>
</ul>
 </div>
        </nav> 
```

我有这个脚本：

```
 <script type="text/javascript">

                    $("li").click(function () {
                        $("li").removeClass("active");
                        $(this).addClass("active");

                    });
</script> 
```

我放在那里的第一个选项卡 class="active" 有效，但是当我单击另一个菜单选项卡时脚本似乎不起作用，它只显示第一个活动的选项卡，请帮助:)

**更新**

这是呈现的html：

```
 <nav>

           <div class="cssmenu">

                <ul>

                    <li><span><a href="/">In&#237;cio</a></span></li>

                    <li><span><a href="/Empresa/SelectEmpresa">Tarefas Contabilidade</a></span></li>

                    <li><a href='#'><span>Clientes</span></a>

                        <ul>

                            <li><span><a href="/Empresa/ListarEmpresas">Listar clientes</a></span></li>

                            <li><span><a href="/Salao/ListaSalaoByEmpresa">Listar sal&#245;es</a></span></li>

                             <li><span><a href="/Salao/ListaEmpregadosBySalao">Gerir empregados</a></span></li>                           

                            <li><span><a href="/Empresa/Create">Novo cliente</a></span></li>

                            <li><span><a href="/Salao/Create">Novo sal&#227;o</a></span></li>   

                           </ul>

                    </li>

                     <li><a href='#'><span>Balancetes</span></a>

                        <ul>

                            <li><span><a href="/Balancete/ListaBalancetesPorSalaoMes">Listar registos</a></span></li>

                            <li><span><a href="/Balancete/UploadFile">Upload novo balancete</a></span></li>

                            <li><span><a href="/Balancete/GraficoBalancetePorSalao">Mapa Resultados/Gr&#225;fico</a></span></li>

                            <li><span><a href="/Balancete/MapaEstruturaRendimentoseGastos">Mapas Contabilidade/Gest&#227;o</a></span></li>

                            <li><span><a href="/Balancete/MapasGestao">An&#225;lise Rentabilidade</a></span></li>

                            <li><span><a href="/Balancete/alteraTaxas">Alterar taxas</a></span></li>

                        </ul>

                    </li>

                    <li><span><a href="/Home/About">Sobre</a></span></li>

                </ul>

            </div>

</nav> 
```

我不知道我是否应该将 javascript 放入 div 或其他东西 xD

泰

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-26T13:46:12.663

您可以使用`child selector`which 选择所有直接子元素，尝试以下操作：

```
$(document).ready(function(){
    $(".cssmenu > ul > li").click(function () {
          $(this).siblings().removeClass("active");
          $(this).addClass("active");
    });
}) 
```

* * *

如果要选择`li`内部`ul`标签的标签，可以尝试：

```
$(document).ready(function() {
    $("ul:eq(1) > li").click(function() {
       $('ul:eq(1) > li').removeClass("active");
       $(this).addClass("active");
    });
}) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-26T13:47:10.863

你能试一下吗：

```
 <script type="text/javascript">
    $("li a").bind('click', function () {
      $("li").removeClass("active");
      $(this).addClass("active");
    });
 </script> 
```

li 项是不可点击的，所以必须将点击事件绑定到 a。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-26T13:47:51.100

尝试

```
$("li").click(function (e) {
  e.preventDefault();
  $(this).siblings().removeClass("active").end().addClass("active");

}); 
```

# hibernate - hibernate 不会在持久化时插入外键 id 的值

> ID：11670633
> 
> 赞同：0
> 
> 时间：2012-07-26T13:42:19.760
> 
> 标签：hibernate

我有 2 个班级，学生和班级。每个学生只能是一个班级的一部分。

我正在尝试使用以下代码插入学生

```
 for (Class cls : classList) {
            if (cls.getId().getClassId() == selectedClassId.intValue()) {
                selectedStudent.setClass(cls);
            }
        }
        HibernateUtil.beginTransaction();
        StudentHome stuhome = new StudentHome();
        stuhome.persist(selectedStudent);
        HibernateUtil.commitTransaction(); 
```

但是由于某种原因，Hibernate 没有在 Student 表中插入 classId 字段。

下面是我从 Hibernate 得到的 SQL 输出

```
Hibernate: 
select
    class_.ClassId,
    class_.EntityId,
    class_.ClassName as ClassName2_ 
from
    school.class102 class_ 
where
    class_.ClassId=? 
    and class_.EntityId=?

Hibernate: 
insert 
into
    school.student102
    (StudentId, ParentId, RouteId, FirstName, LastName, MiddleName, DoB, DoJ, DoL, Status, RegistrationId, EntityId) 
values
    (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?) 
```

如您所见，插入语句中显然缺少 classId。我不确定 Hibernate 是否没有在插入语句中包含 classId。

EntityId 和 RegistrationId 是 Student 和 EntityId 的 PK，ClassId 是 Class 的 PK。两个表中都存在与 (EntityId, ClassId) 的外键关系。通过具有预定义 EntityId 的视图尝试插入

可能是什么问题？

下面是映射

```
<hibernate-mapping>
<class name="Student" table="student104" catalog="school">
    <composite-id name="id" class="studentId">
        <key-property name="registrationId" type="int">
            <column name="RegistrationId" />
        </key-property>
        <key-property name="entityId" type="int">
            <column name="EntityId" />
        </key-property>
    </composite-id>
    <many-to-one name="class" class="class" update="false" insert="false" fetch="select">
        <column name="ClassId" />
        <column name="EntityId" not-null="true" />
    </many-to-one>
    <property name="studentId" type="java.lang.Integer">
        <column name="StudentId" />
    </property>
    <property name="parentId" type="java.lang.Integer">
        <column name="ParentId" />
    </property>
    <property name="routeId" type="java.lang.Integer">
        <column name="RouteId" />
    </property>
    <property name="firstName" type="string">
        <column name="FirstName" length="45" />
    </property>
    <property name="lastName" type="string">
        <column name="LastName" length="45" />
    </property>
    <property name="middleName" type="string">
        <column name="MiddleName" length="45" />
    </property>
    <property name="doB" type="date">
        <column name="DoB" length="10" />
    </property>
    <property name="doJ" type="date">
        <column name="DoJ" length="10" />
    </property>
    <property name="doL" type="date">
        <column name="DoL" length="10" />
    </property>
    <property name="status" type="string">
        <column name="Status" length="45" />
    </property>
</class> 
```

```
<hibernate-mapping>
<class name="class" table="class102" catalog="school">
    <composite-id name="id" class="classId">
        <key-property name="classId" type="int">
            <column name="ClassId" />
        </key-property>
        <key-property name="entityId" type="int">
            <column name="EntityId" />
        </key-property>
    </composite-id>
    <property name="className" type="string">
        <column name="ClassName" length="45" not-null="true" />
    </property>
    <set name="students" table="student104" inverse="true" lazy="true" fetch="select">
        <key>
            <column name="ClassId" />
            <column name="EntityId" not-null="true" />
        </key>
        <one-to-many class="student" />
    </set>
</class> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-26T16:04:47.750

如果您查看学生的映射

```
<many-to-one name="class" class="class" update="false" insert="false" fetch="select">
        <column name="ClassId" />
        <column name="EntityId" not-null="true" />
</many-to-one> 
```

您说不要将关系插入或更新到学生中。如果您认为一旦学生分配到一个班级就不能修改，那么 set `update="false" insert="true"`else 可以稍后修改然后 set `update="true" insert="true"`。并且这两个属性值都是默认的（如果您从映射中省略它们）`true`。

# android - Android：更改在后台运行的服务的更新间隔

> ID：11670641
> 
> 赞同：0
> 
> 时间：2012-07-26T13:42:44.907
> 
> 标签：android, service, sharedpreferences

我有一项服务正在运行，每 x 分钟更新一次数据，我希望用户选择更新频率（每 10 分钟、30 分钟......）。我使用了 sharedpreferences 但似乎该服务不会改变更新的频率。这是我的服务代码：

```
 public void onCreate()
    {

      super.onCreate();     

      _startService();

     // if (MAIN_ACTIVITY != null)  Log.d(getClass().getSimpleName(), "FileScannerService started");
    }
  /*
     * starting the service
     */
    private void _startService()
    {   

      timer.scheduleAtFixedRate(   

              new TimerTask() {

                    public void run() {

                        try{

                        doServiceWork();

                        Thread.sleep(UPDATE_INTERVAL);

                        }catch(InterruptedException ie){

                            Log.e(getClass().getSimpleName(), "FileScannerService InterruptedException"+ie.toString());
                        }

                    }
                  },
                  DELAY_INTERVAL,
                  UPDATE_INTERVAL);

      Log.i(getClass().getSimpleName(), "FileScannerService Timer started....");
    } 
```

这是我的共享首选项代码：

```
 SharedPreferences SP = PreferenceManager.getDefaultSharedPreferences(getBaseContext());
     String interval= SP.getString("synchronisation", "1");
    if(interval.equals("1")) UPDATE_INTERVAL= 30000;
    if(interval.equals("2")) UPDATE_INTERVAL= 60000;
    if(interval.equals("3")) UPDATE_INTERVAL= 120000; 
```

我试图将 sharedpreferences 代码放在我的服务方法中的任何地方，但它不起作用。也许我走错路了。提前感谢您的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-31T17:14:34.250

我找到了解决该问题的方法，如果您使用 sharedpreferences 来更改计时器的更新延迟，您应该对`run()`方法进行服务工作，而不是调用其他方法。例如：在我的代码中，我调用了该方法`do service work()`，当我删除方法调用并将该方法的代码直接放入时，它就起作用了。希望我解释得对。

# wpf - 从数据网格内部引用日期选择器选择日期

> ID：11670644
> 
> 赞同：0
> 
> 时间：2012-07-26T13:42:51.837
> 
> 标签：wpf, datagrid, datepicker

编程新手，需要一点帮助。我有一个用于 Outlook 加载项的 WPF 用户控件，一切都很顺利，直到我在 celleditingtemplate 列中尝试了一个带有日期选择器的数据网格，但 celltemplatecolumn 只是有一个文本块。这个想法是将文本块绑定到数据源（工作正常），当用户编辑列时，日期选择器显示并且用户可以选择一个日期。我根本无法弄清楚如何将选定日期中的值发送到文本块，我完全束手无策。下面是数据网格及其绑定，带有以下字段的简单 SQL 表：[Project]、[Deadline]、[DaystoDeadline]、[Responibility]、[ProcessCount]、[TasksCompleted]、[TasksRemaining]。任何帮助将不胜感激。

```
 <Grid>
                <DataGrid AutoGenerateColumns="False" HorizontalAlignment="Left" Margin="6,0,0,0" Name="ProjectsGrid" ScrollViewer.CanContentScroll="True" VerticalAlignment="Top" VerticalScrollBarVisibility="Auto" ItemsSource="{Binding}" CanUserAddRows="False" CanUserDeleteRows="False">
                    <DataGrid.Columns>
                        <DataGridTemplateColumn Header="Commands">
                            <DataGridTemplateColumn.CellTemplate>
                                <DataTemplate>
                                            <Button Click="Select_Button" Content="Select" Name="SelectButton" />
                                </DataTemplate>
                            </DataGridTemplateColumn.CellTemplate>
                        </DataGridTemplateColumn>
                        <DataGridTextColumn Binding="{Binding Project}" Header="Project" IsReadOnly="True" FontFamily="Verdana" />
                            <DataGridTemplateColumn Header="Deadline">
                                <DataGridTemplateColumn.CellTemplate>
                                    <DataTemplate>
                                        <TextBlock Text="{Binding Deadline, StringFormat='yyyy/MM/dd'}" FontFamily="Verdana" x:Name="DeadlineTxt" />
                                    </DataTemplate>
                                </DataGridTemplateColumn.CellTemplate>
                                <DataGridTemplateColumn.CellEditingTemplate>
                                    <DataTemplate>
                                        <DatePicker SelectedDate="{Binding Deadline, StringFormat='yyyy/MM/dd'}" FontFamily="Verdana" x:Name="DeadlineDatePicker">
                                            <DatePicker.CalendarStyle>
                                                <Style TargetType="Calendar">
                                                    <Setter Property="DisplayMode" Value="Month"/>
                                                </Style>
                                            </DatePicker.CalendarStyle>
                                        </DatePicker>
                                    </DataTemplate>
                                </DataGridTemplateColumn.CellEditingTemplate>
                            </DataGridTemplateColumn>
                        <DataGridTextColumn Binding="{Binding DaystoDeadline}" Header="Days to Deadline" IsReadOnly="True" FontFamily="Verdana" />
                        <DataGridTextColumn Binding="{Binding Responsibility}" Header="Responsibility" IsReadOnly="True" FontFamily="Verdana" />
                        <DataGridTextColumn Binding="{Binding Processes}" Header="Processes" IsReadOnly="True" FontFamily="Verdana" />
                        <DataGridTextColumn Binding="{Binding Completed}" Header="Completed" IsReadOnly="True" FontFamily="Verdana" />
                        <DataGridTextColumn Binding="{Binding Remaining}" Header="Remaining" IsReadOnly="True" FontFamily="Verdana" />
                    </DataGrid.Columns>
                </DataGrid> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-26T13:56:05.780

我将首先删除 ( ) 中的控件名称并从: ( `DataTemplate`)中`x:Name="DeadlineTxt"` `x:Name="DeadlineDatePicker"`删除`StringFormat``SelectedDate``SelectedDate="{Binding Deadline}"`

```
 <DataGridTemplateColumn Header="Deadline">
                <DataGridTemplateColumn.CellTemplate>
                    <DataTemplate>
                        <TextBlock Text="{Binding Deadline, StringFormat='yyyy/MM/dd'}" FontFamily="Verdana" />
                    </DataTemplate>
                </DataGridTemplateColumn.CellTemplate>
                <DataGridTemplateColumn.CellEditingTemplate>
                    <DataTemplate>
                        <DatePicker SelectedDate="{Binding Deadline}" FontFamily="Verdana" >
                            <DatePicker.CalendarStyle>
                                <Style TargetType="Calendar">
                                    <Setter Property="DisplayMode" Value="Month"/>
                                </Style>
                            </DatePicker.CalendarStyle>
                        </DatePicker>
                    </DataTemplate>
                </DataGridTemplateColumn.CellEditingTemplate>
            </DataGridTemplateColumn> 
```

# ios - 将私钥添加到 iOS 钥匙串中

> ID：11670647
> 
> 赞同：20
> 
> 时间：2012-07-26T13:42:58.917
> 
> 标签：ios, objective-c, keychain, private-key

我正在尝试将私钥添加到 iOS 钥匙串中。证书（公钥）工作正常，但私钥拒绝......我完全困惑为什么下面的代码不起作用。

首先，我正在检查当前密钥（如果钥匙串是键/值存储，则 = 键）在钥匙串中是否“免费”。然后我要添加私钥。

```
CFStringRef labelstring = CFStringCreateWithCString(NULL, [key cStringUsingEncoding:NSUTF8StringEncoding], kCFStringEncodingUTF8);

NSArray* keys = [NSArray arrayWithObjects:(__bridge id)kSecClass,kSecAttrLabel,kSecReturnData,kSecAttrAccessible,nil];
NSArray* values = [NSArray arrayWithObjects:(__bridge id)kSecClassKey,labelstring,kCFBooleanTrue,kSecAttrAccessibleWhenUnlocked,nil];
NSMutableDictionary* searchdict = [NSMutableDictionary dictionaryWithObjects:values forKeys:keys];

CFRelease(labelstring);

NSMutableDictionary *query = searchdict;

CFTypeRef item = NULL;
OSStatus error = SecItemCopyMatching((__bridge_retained CFDictionaryRef) query, &item);

if (error)
{
    NSLog(@"Error: %ld (statuscode)", error);
}

if(error != errSecItemNotFound)
{
    SecItemDelete((__bridge_retained CFDictionaryRef) query);
}

[query setObject:(id)data forKey:(__bridge id)kSecValueData];

OSStatus status = SecItemAdd((__bridge_retained CFDictionaryRef) query, &item);

if(status)
{
    NSLog(@"Keychain error occured: %ld (statuscode)", status);
    return NO;
} 
```

调试输出如下：

```
2012-07-26 15:33:03.772 App[15529:1b03] Error: -25300 (statuscode)
2012-07-26 15:33:11.195 App[15529:1b03] Keychain error occured: -25299 (statuscode) 
```

第一个错误代码`-25300`代表`errSecItemNotFound`. 所以这个键没有存储任何值。然后，当我尝试将私钥添加到钥匙串中时，我得到`-25299`这意味着 `errSecDuplicateItem`. 我不明白这个。为什么会这样？

有人对此有任何线索或提示吗？

苹果的错误代码：

```
errSecSuccess                = 0,       /* No error. */
errSecUnimplemented          = -4,      /* Function or operation not implemented. */
errSecParam                  = -50,     /* One or more parameters passed to a function where not valid. */
errSecAllocate               = -108,    /* Failed to allocate memory. */
errSecNotAvailable           = -25291,  /* No keychain is available. You may need to restart your computer. */
errSecDuplicateItem          = -25299,  /* The specified item already exists in the keychain. */
errSecItemNotFound           = -25300,  /* The specified item could not be found in the keychain. */
errSecInteractionNotAllowed  = -25308,  /* User interaction is not allowed. */
errSecDecode                 = -26275,  /* Unable to decode the provided data. */
errSecAuthFailed             = -25293,  /* The user name or passphrase you entered is not correct. */ 
```

提前致谢！

**更新#1：我发现它只在第一次工作。即使数据和密钥不同，在第一次存储到钥匙串后，我也无法存储更多的密钥。**

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-09-12T11:57:31.940

以下代码对我有用：

```
NSMutableDictionary *query = [[NSMutableDictionary alloc] init]; 
[query setObject:(id)kSecClassKey forKey:(id)kSecClass]; 
[query setObject:(id)kSecAttrAccessibleWhenUnlocked forKey:(id)kSecAttrAccessible]; 
[query setObject:[NSNumber numberWithBool:YES] forKey:(id)kSecReturnData];

//adding access key 
[query setObject:(id)key forKey:(id)kSecAttrApplicationTag];

//removing item if it exists 
SecItemDelete((CFDictionaryRef)query);

//setting data (private key) 
[query setObject:(id)data forKey:(id)kSecValueData];

CFTypeRef persistKey; OSStatus status = SecItemAdd((CFDictionaryRef)query, &persistKey);

if(status) {
    NSLog(@"Keychain error occured: %ld (statuscode)", status);
    return NO; 
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-26T23:23:30.813

抱歉，我永远无法调试您的代码。Apple 提供了一些示例代码（KeychainItemWrapper），可以让您保存一个字符串（我记得）。它对处理钥匙链有很大帮助。网络上有一个要点是该类的修改版本，但保存和恢复字典（存档为数据对象，这是 Apple 代码对字符串所做的）。这使您可以在一个界面中将多个项目保存到钥匙串。要点在这里[Keychain for NSDictionary/data](https://gist.github.com/3185191)

# html - 如何在 org 模式下调整图像大小

> ID：11670654
> 
> 赞同：50
> 
> 时间：2012-07-26T13:43:13.207
> 
> 标签：html, image, resize, export, org-mode

是否有一种通用方法来定义链接的图像的大小（以百分比或像素为单位）`org-mode`？

假设我的`.org`文件中有以下链接：

```
[[~/images/example.jpg]] 
```

这个 JPG 太大了，所以如果我将它导出为 HTML 或 LaTeX 或打开它，`org-mode`只会`C-c C-o i`看到图像的一小部分。

* * *

## 回答 #1

> 赞同：72
> 
> 时间：2013-06-18T19:04:49.597

从[Org 8.0](http://orgmode.org/cgit.cgi/org-mode.git/)开始，“属性行现在采用[plists](http://orgmode.org/worg/org-8.0.html#sec-8-3) ”：

```
#+attr_html: :width 100px
#+attr_latex: :width 100px
[[~/images/example.jpg]] 
```

* * *

## 回答 #2

> 赞同：38
> 
> 时间：2016-07-20T09:19:55.850

根据 Jacobo 的评论，将以下内容添加到您的 init.el 文件中：

```
(setq org-image-actual-width nil) 
```

然后在 org-mode 中，您可以将其用于 JPG 和 PNG 的内联预览。

```
#+ATTR_ORG: :width 100
[[~/images/example.svg]] 
```

如果你想为内联预览和 html 输出调整这个大小：

```
#+ATTR_HTML: width="100px"
#+ATTR_ORG: :width 100
[[~/images/example.svg]] 
```

* * *

## 回答 #3

> 赞同：13
> 
> 时间：2012-07-26T14:38:46.190

```
#+ATTR_HTML: width="100px"
[[~/images/example.jpg]] 
```

* * *

## 回答 #4

> 赞同：8
> 
> 时间：2017-04-02T06:40:41.133

这是一个关于如何使用百分比调整图像大小的示例*（Org 模式版本 9.0.5）*：

```
#+CAPTION: Weight space                                                                                                                                     
#+ATTR_HTML: :alt neural network :title Neural network representation :align right                                                                          
#+ATTR_HTML: :width 50% :height 50%                                                                                                                         
https://i.stack.imgur.com/nzHSl.jpg 
```

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2017-07-07T08:59:44.537

对于 LaTeX，要删除默认值`width=.9\linewidth`，请将 设置`org-latex-image-default-width`为空字符串。通过这种方式，图像将具有其自然大小。

要即时执行此操作，请使用`set-variable`emacs 命令。或者要永久设置此变量，请在 init.el 中添加以下行： `(setq org-latex-image-default-width "")`

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2021-09-26T23:52:52.630

这是一种在 emacs Org 模式下调整图像大小以进行预览（不导出）的方法。通常，

1.  我们希望在需要时将图像设置为特定宽度，例如 249px。
2.  我们想设置一个默认的图像宽度，这样我们就不需要`+attr_html`为每个图像指定 - 这会很乏味。

这可以通过`org-image-actual-width`如下配置来实现：

```
(setq org-image-actual-width (list 550)) 
```

然后，在您的`.org`文件中，如果您有

```
#+attr_html :width 249
[[~/images/example1.jpg]] 
```

然后图像将以 249px 的宽度显示在预览中。对于另一个图像，如果没有`+attr_*`指定，将应用 550px 的默认宽度。

```
[[~/images/example2.jpg]] 
```

[您可以从org-mode source code](https://github.com/bzg/org-mode/blob/5832c8fc9326f495a898c9ac518b1fbf943882e5/lisp/org.el#L15453)的文档中看到此行为：

```
When set to a number in a list, try to get the width from any
#+ATTR.* keyword if it matches a width specification like
  #+ATTR_HTML: :width 300px
and fall back on that number if none is found. 
```

我发现很难理解“列表中的数字是什么意思”，所以我查看[了实现](https://github.com/bzg/org-mode/blob/5832c8fc9326f495a898c9ac518b1fbf943882e5/lisp/org.el#L16681)，实际上，类似的东西`(list 550)`。

# internet-explorer-9 - 谷歌饼图在 IE9 中根本不显示

> ID：11670659
> 
> 赞同：0
> 
> 时间：2012-07-26T13:43:27.470
> 
> 标签：internet-explorer-9, pie-chart

我有一个简单的饼图，它在 FireFox 或 Chrome 中显示良好，但在 IE9 中不显示。我只是得到一个白屏，在 IE9 中没有别的。有人可以帮我找出问题所在并帮我解决这个问题吗？非常感谢。

```
<html>  
<head>
<script type="text/javascript" src="https://www.google.com/jsapi"></script>
    <script type="text/javascript">
      google.load("visualization", "1", {packages:["corechart"]});
      google.setOnLoadCallback(drawChart);
      function drawChart() {
        var data = google.visualization.arrayToDataTable([
          ['Timeline', 'Likage'],
          ['Badeurlaub', #c_0001#],
          ['Aktiv-/Sport-Urlaub', #c_0002#],
          ['Kultur-/Bildungsreise', #c_0003#],
          ['Kreuzfahrt/Rundreise', #c_0004#],
          ['Sonstiges', #c_0005#],
        ]);

       var options = {
          title: ' ',
          colors: ['#686800', '#8E8E40', '#a6a6a6', '#40B3D9', '#0099cc']
        };
        var chart = new google.visualization.PieChart(document.getElementById('chart_div'));
    chart.draw(data, options);
      }    
   </script>
  </head>
  <body>
    <div id="chart_div" style="width: 900px; height: 500px;"></div>
 </body>
</html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-26T13:48:56.857

不应该引用数组中的主题标签，或者它们可能是后端脚本中未替换的占位符。IE 很可能会因此而中断。

# javascript - 骨干网中的比较器在添加新模型时需要排序调用？

> ID：11670660
> 
> 赞同：1
> 
> 时间：2012-07-26T13:43:28.727
> 
> 标签：javascript, backbone.js

我在我的 Backbone.Collection 中定义了比较器。

当我将模型添加到该集合时，我应该调用 sort 方法吗？

```
this.collection.add(this.newModel);
this.collection.sort(); // should I add this line? 
```

根据文档不是，但我的应用程序似乎需要它。任何的想法？

* * *

我添加了[jsfiddle ..但](http://jsfiddle.net/Cpn3g/375/)我还有另一个问题...知道如何解决它吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-26T13:46:32.847

不，当您从比较器函数返回对象时使用负号。这是对元素进行排序的另一种方法。

```
 //Model
     comparator: function(activity){

                var date = new Date(activity.get('created_at'));
                return -date.getTime();

            }

//View
 events : {
        'click .refresh' : 'refresh',
        'click .reverse' : 'reverse'
    },

    refresh : function() {

     this.collection.fetch();
    console.log('refresh', this.collection);
     this.render();

    },

    reverse : function() {

        var $ref = $(".notifyRefresh");

        console.log("you clicked reverse");

        console.log(this.collection, "collection");

        this.collection.sort();
    } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-26T14:26:34.107

不需要调用`sort()`，该`comparator()`方法用于每个 Collection 插入。

检查[jsFiddle 中的工作示例](http://jsfiddle.net/fguillen/t5ptL/)

您的问题应该在其他地方。

# c - free() 一块内存时出错

> ID：11670668
> 
> 赞同：0
> 
> 时间：2012-07-26T13:43:47.387
> 
> 标签：c

下面的程序接受输入`a sentence`,`an old word`和 a `new word`。
目标是`replace all the occurrences old word with the new word`。

```
int countOccurrence(char* sen,char* word) //counts occurrences of old word
{
    int count=0,i,k,len1,len2;

    len1=strlen(sen);
    len2=strlen(word);
    for(i=0;i<len1-len2+1;)
    {
            k=0;
            while(word[k] && sen[k+i]==word[k])
                    k++;
            if(k==len2 && sen[k+i]==' ' || sen[k+i]=='\0')
            {
                    count++;
                    i+=len2;
            }
            else ++i;
    }
    return count;
}

void replace(char* sen,char* oldword,char* newword)
{
    int count,len1,len2,len3,i,top=-1,k;
    char *ptr;

    count=countOccurrence(sen,oldword);

    if(!count) return;

    len1=strlen(sen);
    len2=strlen(oldword);
    len3=strlen(newword);

    ptr=(char*)malloc(sizeof(len1+count*(len3-len2)+1));

    for(i=0;i<len1-len2+1;)
    {
            k=0;
            while(oldword[k] && sen[k+i]==oldword[k])
                    k++;
            if(k==len2 && sen[k+i]==' ' || sen[k+i]=='\0')
            {
                    for(k=0;newword[k];++k)
                            ptr[++top]=newword[k];
                    i+=len2;
            }
            else
            {
                    ptr[++top]=sen[i];
                    ++i;
            }
    }       
    ptr[++top]='\0';

    strcpy(sen,ptr);

    free(ptr); <-------------------------------
} 
```

执行后，我收到错误：http: [//ideone.com/mh3X1](http://ideone.com/mh3X1)

```
*** glibc detected *** ./prog: free(): invalid next size (fast): 0x08f49008 ***
======= Backtrace: =========
/lib/libc.so.6[0xb75fcfd4]
/lib/libc.so.6(cfree+0x9c)[0xb75fe87c]
./prog[0x8048834]
./prog[0x80484c1]
======= Memory map: ======== 
```

当我评论声明时，程序有效：

```
free(ptr); 
```

见这里：http: [//ideone.com/fr34H](http://ideone.com/fr34H)

**为什么当我尝试释放（）堆上分配的内存时出现错误？**

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-26T13:47:23.343

您弄乱了保存的内部信息`malloc`，它在下一次操作时检测到它（这是免费的）。原因如下：

```
ptr=(char*)malloc(sizeof(len1+count*(len3-len2)+1));
                  ^^^^^^ 
```

在这种情况下， sizeof 评估为您平台上整数的大小：几乎肯定**小于您想要**的。因此，当您写入`ptr`4 或 8 个字节后，您将走出分配的区域，并且所有赌注都已关闭。

* * *

旁注：这在很大程度上是一个品味问题，但您可能应该停止转换`malloc`.

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-26T13:47:33.257

这条线是可疑的：

```
ptr=(char*)malloc(sizeof(len1+count*(len3-len2)+1)); 
```

你不想`sizeof`在那里。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-26T13:45:58.663

这是堆损坏的典型案例。在您的程序中的某个地方，您正在写出一些动态数组的边界，覆盖`free`了理解它应该做什么所必需的数据。

尝试运行[valgrind](http://valgrind.org/)：

```
valgrind --leak-check=full ./your_program 
```

正如其他人所提到的，您没有为`ptr`. 我可以看到的另一个问题是`strcpy(sen,ptr);`. 最终结果的大小可能比句子大，因此您`sen`也超出了范围。

# firefox - chrome.manifest：替换整个窗口

> ID：11670673
> 
> 赞同：0
> 
> 时间：2012-07-26T13:44:00.587
> 
> 标签：firefox, firefox-addon, xul

我正在对 FF 进行扩展。我想用我自己的布局替换*整个主窗口。*我知道如何在现有主窗口上添加和覆盖

```
overlay chrome://browser/content/browser.xul chrome://foo/content/foo.xul 
```

但是如何添加*替代*主窗口的布局？

这不起作用（我仍然有主窗口）：

```
overlay chrome://foo/content/foo.xul 
```

从哪里`foo.xul`开始

```
<?xml version="1.0"?>                                                        
<overlay id="foo-main-overlay"                                               
         xmlns="http://www.mozilla.org/keymaster/gatekeeper/there.is.only.xul">

    <script type="application/x-javascript"                                  
            src="chrome://foo/content/foo.js" />                             

    <toolbox id="navigator-toolbox">                                         

    ... 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-30T19:05:19.870

您可以使用该[`override`指令](https://developer.mozilla.org/en/Chrome_Registration#override)：

```
override chrome://browser/content/browser.xul chrome://foo/content/foo.xul 
```

这将确保`chrome://browser/content/browser.xul`替换为`chrome://foo/content/foo.xul`. 但是，我希望你真的不想替换整个浏览器窗口......

# vb.net - 以编程方式在 vb.net 中插入分页符

> ID：11670675
> 
> 赞同：2
> 
> 时间：2012-07-26T13:44:02.257
> 
> 标签：vb.net, printing, formatting

所以我试图在直接从我的 VB.NET 程序打印时强制分页。我基本上是使用 MSDN 中的这段代码来打印我的文档：

```
Private Sub printDocument1_PrintPage(ByVal sender As Object, _
    ByVal e As PrintPageEventArgs)

    Dim charactersOnPage As Integer = 0
    Dim linesPerPage As Integer = 0

    ' Sets the value of charactersOnPage to the number of characters 
    ' of stringToPrint that will fit within the bounds of the page.
    e.Graphics.MeasureString(stringToPrint, Me.Font, e.MarginBounds.Size, _
        StringFormat.GenericTypographic, charactersOnPage, linesPerPage)

    ' Draws the string within the bounds of the page
    e.Graphics.DrawString(stringToPrint, Me.Font, Brushes.Black, _
    e.MarginBounds, StringFormat.GenericTypographic)

   ' Remove the portion of the string that has been printed.
    stringToPrint = stringToPrint.Substring(charactersOnPage)

    ' Check to see if more pages are to be printed.
    e.HasMorePages = stringToPrint.Length > 0

End Sub 
```

这使它可以很好地打印，但我想在特定位置放置分页符。我试过 e.HasMorePages = true，但我不明白这如何让我在特定位置中断。假设我的 stringToPrint 长度为 5000 个字符，我想在 1000 个字符后开始新页面，然后在接下来的 2500 个字符后重新开始。我该怎么做？

此外，将linesOnPage 和charactersOnPage 更改为其他值似乎根本没有改变任何东西。

编辑：我想关于我的程序所做的更多信息会有所帮助。基本上它所做的是程序将创建大约 4 个完整的数据页，并将其打印到 .txt 文件中。现在，我想打印整个 .txt 文件。我知道如何做到这一点的唯一方法是打印一个字符串，所以我让它逐行读取整个 .txt 文件并将其全部存储为一个字符串（即 stringToPrint）。现在，使用上面的代码，我打印 stringToPrint。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-26T14:52:42.287

您当前的代码基于打印到矩形：`e.MarginBounds`

为了测试，我使用了这段代码：

```
Private pageNum As Integer

Private Sub Button1_Click(ByVal sender As Object, ByVal e As EventArgs) _
                          Handles Button1.Click
  Dim sb As New StringBuilder
  For i As Integer = 1 To 100
    sb.AppendLine(i.ToString & ") This is a line.")
  Next
  stringToPrint = sb.ToString

  pageNum = 0
  Using pvw As New PrintPreviewDialog()
    pvw.Document = printDocument1
    pvw.ShowDialog()
  End Using
End Sub 
```

然后我改变了你的例程，在第一页上使用了一个较小的矩形：

```
Private Sub printDocument1_PrintPage(ByVal sender As Object, _
                                     ByVal e As PrintPageEventArgs) _
                                     Handles printDocument1.PrintPage
  Dim charactersOnPage As Integer = 0
  Dim linesPerPage As Integer = 0

  pageNum += 1

  Dim printSize As Size = e.MarginBounds.Size
  If pageNum = 1 Then
    printSize = New Size(printSize.Width, printSize.Height / 2)
  End If
  e.Graphics.MeasureString(stringToPrint, Me.Font, printSize, _
      StringFormat.GenericTypographic, charactersOnPage, linesPerPage)

  ' Draws the string within the bounds of the page
  e.Graphics.DrawString(stringToPrint, Me.Font, Brushes.Black, _
    New Rectangle(e.MarginBounds.Location, printSize), _
    StringFormat.GenericTypographic)

  ' Remove the portion of the string that has been printed.
  stringToPrint = stringToPrint.Substring(charactersOnPage)

  ' Check to see if more pages are to be printed.
  e.HasMorePages = stringToPrint.Length > 0
End Sub 
```

如果您需要根据字符控制打印，则必须放弃打印文本块的代码并逐行打印所有内容。

# assembly - 读取扇区的引导加载程序

> ID：11670681
> 
> 赞同：1
> 
> 时间：2012-07-26T13:44:27.153
> 
> 标签：assembly, bootloader, sector

我正在制作一个引导加载程序，它当然会位于第 0 个扇区。由于只有 512 字节的限制，这是引导加载程序允许的大小，我让它读取第一个扇区，即引导加载程序之后的扇区。第一个扇区的信息量是否可以超过 512 字节并且仍然可以读取，或者我必须指定计算机开始读取第三个扇区吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-26T13:51:35.430

每个扇区是 512，因此如果您希望引导加载获得超过 512 字节，您实际上需要加载更多扇区。哪些扇区实际上可供您保留代码或数据，取决于分区模式，该模式应用于底层磁盘（对于 MBR、GPT 等会有所不同）。

# java - 什么时候 AtomicInteger 比同步更可取？

> ID：11670687
> 
> 赞同：19
> 
> 时间：2012-07-26T13:44:45.497
> 
> 标签：java, multithreading, performance, concurrency, atomic

既然`AtomicInteger`可以至少比`int`受保护的要慢一个数量级`synchronized`，我为什么要使用 AtomicInteger？

例如，如果我只想以`int`线程安全的方式增加一个值，为什么不[总是](https://stackoverflow.com/a/9851273)使用：

```
synchronized(threadsafeint) {
  threadsafeint++;
} 
```

而不是使用慢得多的[AtomicInteger.incrementAndGet()](http://developer.android.com/reference/java/util/concurrent/atomic/AtomicInteger.html#incrementAndGet%28%29)？

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-07-26T13:46:32.803

> 由于 AtomicInteger 至少比受同步保护的 int 慢一个数量级，我为什么要使用 AtomicInteger？

AtomicInteger 更快。

```
static final Object LOCK1 = new Object();
static final Object LOCK2 = new Object();
static int i1 = 0;
static int i2 = 0;
static final AtomicInteger ai1 = new AtomicInteger();
static final AtomicInteger ai2 = new AtomicInteger();

public static void main(String... args) throws IOException {
    for(int i=0;i<5;i++) {
        testSyncInt();
        testAtomicInt();
    }
}

private static void testSyncInt() {
    long start = System.nanoTime();
    int runs = 10000000;
    for(int i=0;i< runs;i+=2) {
        synchronized (LOCK1) {
            i1++;
        }
        synchronized (LOCK2) {
            i2++;
        }
    }
    long time = System.nanoTime() - start;
    System.out.printf("sync + incr: Each increment took an average of %.1f ns%n", (double) time/runs);
}

private static void testAtomicInt() {
    long start = System.nanoTime();
    int runs = 10000000;
    for(int i=0;i< runs;i+=2) {
        ai1.incrementAndGet();
        ai2.incrementAndGet();
    }
    long time = System.nanoTime() - start;
    System.out.printf("incrementAndGet: Each increment took an average of %.1f ns%n", (double) time/runs);
} 
```

印刷

```
sync + incr: Each increment took an average of 32.4 ns
incrementAndGet: Each increment took an average of 20.6 ns
sync + incr: Each increment took an average of 31.4 ns
incrementAndGet: Each increment took an average of 12.9 ns
sync + incr: Each increment took an average of 29.6 ns
incrementAndGet: Each increment took an average of 12.9 ns
sync + incr: Each increment took an average of 35.1 ns
incrementAndGet: Each increment took an average of 16.6 ns
sync + incr: Each increment took an average of 29.9 ns
incrementAndGet: Each increment took an average of 13.0 ns 
```

* * *

正如@assylias 建议的那样添加一些争论。它表明，当您真正使用一个线程时，CPU 可以优化访问。

```
static final Object LOCK1 = new Object();
static final Object LOCK2 = new Object();
static int i1 = 0;
static int i2 = 0;
static final AtomicInteger ai1 = new AtomicInteger();
static final AtomicInteger ai2 = new AtomicInteger();

public static void main(String... args) throws  ExecutionException, InterruptedException {
    for(int i=0;i<5;i++) {
        testSyncInt();
        testAtomicInt();
    }
}

private static void testSyncInt() throws ExecutionException, InterruptedException {
    long start = System.nanoTime();
    final int runs = 1000000;
    ExecutorService es = Executors.newFixedThreadPool(2);
    List<Future<Void>> futures = new ArrayList<>();
    for(int t=0;t<8;t++) {
        futures.add(es.submit(new Callable<Void>() {
            public Void call() throws Exception {
                for (int i = 0; i < runs; i += 2) {
                    synchronized (LOCK1) {
                        i1++;
                    }
                    synchronized (LOCK2) {
                        i2++;
                    }
                }
                return null;
            }
        }));
    }
    for (Future<Void> future : futures) {
        future.get();
    }
    es.shutdown();
    long time = System.nanoTime() - start;
    System.out.printf("sync + incr: Each increment took an average of %.1f ns%n", (double) time/runs/2);
}

private static void testAtomicInt() throws ExecutionException, InterruptedException {
    long start = System.nanoTime();
    final int runs = 1000000;
    ExecutorService es = Executors.newFixedThreadPool(2);
    List<Future<Void>> futures = new ArrayList<>();
    for(int t=0;t<8;t++) {
        futures.add(es.submit(new Callable<Void>() {
            public Void call() throws Exception {
                for (int i = 0; i < runs; i += 2) {
                    ai1.incrementAndGet();
                    ai2.incrementAndGet();
                }
                return null;
            }
        }));
    }
    for (Future<Void> future : futures) {
        future.get();
    }
    es.shutdown();
    long time = System.nanoTime() - start;
    System.out.printf("incrementAndGet: Each increment took an average of %.1f ns%n", (double) time/runs/2);
} 
```

印刷

```
sync + incr: Each increment took an average of 478.6 ns
incrementAndGet: Each increment took an average of 191.5 ns
sync + incr: Each increment took an average of 437.5 ns
incrementAndGet: Each increment took an average of 169.8 ns
sync + incr: Each increment took an average of 408.1 ns
incrementAndGet: Each increment took an average of 180.8 ns
sync + incr: Each increment took an average of 511.5 ns
incrementAndGet: Each increment took an average of 313.4 ns
sync + incr: Each increment took an average of 441.6 ns
incrementAndGet: Each increment took an average of 219.7 ns 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-26T13:50:06.907

如果您真的想了解更多关于为什么`java.util.concurrent`东西更好以及与经典同步方法相比有什么区别的详细信息，请阅读[此链接](http://mechanical-sympathy.blogspot.com/2011/11/biased-locking-osr-and-benchmarking-fun.html)（以及整个博客）

# python - davlib.py 入门

> ID：11670688
> 
> 赞同：0
> 
> 时间：2012-07-26T13:44:46.143
> 
> 标签：python, webdav

我想编写一个脚本来连接和访问 webdav 服务器。我发现有一个

```
/usr/local/lib/python2.7/dist-packages/davlib.py 
```

但是如何使用呢？没有教程，没有文档，也没有谷歌。任何人都可以为它写一个小小的 hello world 吗？

测试 webdav 服务器已打开`localhost:80/webdav`，并且里面有一个`davtest.txt`包含单词的文件`dav`。

```
$ cd <path_to_webdav>
$ ls
davtest.txt
$ cat davtest.txt
dav 
```

我可以阅读 python，所以如果我可以连接并阅读有一个名为的文件`davtest.txt`，甚至可能是它的内容，我想我可以开始使用源代码。但是，不知道 webDAV 是如何工作的并且不知道`davlib.py`两者是相当困难的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-26T15:26:49.073

使用[webdav-lib](https://launchpad.net/python-webdav-lib)我可以解决这个问题：

```
 url = "davs://localhost:80/webdav/davtest.txt"   
    r = ResourceStorer(url)
    result = r.downloadContent().read() 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-10-15T21:24:02.993

使用 davlib 做一个简单的 get 请求

```
import davlib
import base64

host = 'myhost'
protocol = 'myprotocol'
username = 'myusername'
password = 'mypassword'

url = '{}://{}/{}'.format(protocol, host, some_file_path)
d = davlib.DAV(protocol=myprotocol, host=myhost)
auth_token = base64.encodestring('%s:%s' %(username, password)).strip()
header = {"Authenication": "Basic %s' %auth_token}

d.get(url,header) 
```

基本身份验证仅在 https 上可用。有关 webDAV 的更多（干）细节，请参阅[RFC](https://www.rfc-editor.org/rfc/rfc4918 "RFC")。

我发现的最成熟的 webDAV 客户端库是[python-webdav-library](https://launchpad.net/python-webdav-lib)

# javascript - 从对象命名空间环境中的嵌套 setInterval 调用嵌套函数

> ID：11670689
> 
> 赞同：1
> 
> 时间：2012-07-26T13:44:45.643
> 
> 标签：javascript

我有以下这段代码：

```
var stats = {
....,
checkExistance :
function(url){
    var newUrl = url.substring(0, url.lastIndexOf("/")) + "/asyncCheckChartExistance";
    var xhrObj = stats.getXhr();

    var poolInterval = setInterval("poll()", 100);

    function poll(){
        xhrObj.open("GET", newUrl, true);
        xhrObj.send(null);

        xhrObj.onreadystatechange = function(){
            if(xhrObj.readyState === 4 && xhrObj.status === 200){
                if (xhrObj.responseText.length === true){
                    console.log("Exists!");
                    clearInterval(poolInterval);
                } else {
                    console.log("Not Yet!");
                }
            }
        }
    }
},
} 
```

我创建了 stats 命名空间。在这个命名空间中，我试图创建一个每秒轮询服务器的函数。我应该以这种方式访问​​此功能：`stats.checkExistance(myUrl)`.

但是似乎 setInterval 函数无法看到该`poll()`函数。考虑到这些嵌套在另一个函数中，我知道这是正常行为。

如果我要在 Global 命名空间中编写它，那将没有问题，但我有兴趣在这种命名空间中进行这项工作。有任何想法吗？谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-26T13:47:45.063

当您将字符串传递给 时`setInterval`，该字符串将被解释为全局代码，并且由于`poll`不是全局函数，因此会引发引用错误。

但是，您可以传递函数引用而不是字符串，并且由于该`poll`函数在进行调用的范围内可用，因此`setInterval`您可以这样写：

```
var poolInterval = setInterval( poll, 100 ); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-26T13:50:37.140

当您将字符串传递给 时`setInterval`，它会在全局范围内运行，默认情况下，`poll`不会定义 where 因为它只存在于`checkExistance`函数的范围内。

要解决此问题，请将匿名函数传递给`setInterval`：

```
var poolInterval = setInterval(function () {
    poll();
}, 100); 
```

传递匿名函数通常是最好的主意，因为它允许您为间隔编写任何 javascript 表达式/语句，而不仅仅是调用一个函数。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-26T13:57:12.710

```
var stat = {
    say: function(name){
        function doit(){
            console.log(name);
        }
        setInterval(doit, 1000);
    }
};
stat.say("hi");​​​​​​​​​​​ 
```

一个简单的演示来展示如何。你会每秒看到“嗨”。

# ajax - jquery ajax 多表单提交

> ID：11670690
> 
> 赞同：2
> 
> 时间：2012-07-26T13:44:46.433
> 
> 标签：ajax, jquery, asp-classic

需要一点帮助。我的 jQuery 今天很顺利，直到我碰壁了。我正在尝试通过 AJAX 动态编辑多个表单（单个行项目），带有文本提交链接或某种提交按钮。问题是，我可以让它通过 AJAX 提交表单，但没有表单中的任何数据......即点击提交，它发送请求，但没有查询字符串。有人可以帮我确定缺少什么吗？

这是我的jQuery：

```
 $('.submitLineChanges').click(function() {
            var formID = $(this).closest('form').attr('ID')
            datastring = $(formID).serialize();
            $.ajax({
                    type:'POST', 
                    url: 'update_ajax.asp', 
                    data: datastring,
                    success: function(response) {
                        alert("Success " + id)
                    //$('#ContactForm').find('.form_result').html(response);
                }//end ajax options
            });//end ajax
            return false;
        });//end of click function 
```

我的表格：

```
 <form id="line-item-<%= intRecID %>-form" class="submitLineForm">
        <input type="hidden" name="UpdateLineItem" value="true" />
        <span class="edit" id="edit-line-<%= intRecID %>" style="display: none;">
            <span class="quantity"><input name="part_qty" id="part_qty_<%= intRecID %>" type="text" value="<%=FormatNumber(rs("quote_part_qty"),0)%>"></span>
            <span class="partno"><input name="part_no" id="part_no_<%= intRecID %>" type="text" value="<%=rs("quote_part_id")%>"></span>
            <span class="descrip"><Textarea name="part_descrip" type="text" id="descrip<%= intRecID %>" rows="3"><%=rs("quote_part_descrip")%></Textarea></span>
            <span class="sellprice">$<input name="part_sale" id="part_sale_<%= intRecID %>" type="text" value="<%=FormatNumber(rs("quote_part_sale"),2)%>"></span>
            <span class="margin" id="emargin_<%= intRecID %>"><%=margin%></span>
            <span class="cost"><strong>Cost: </strong>$<input name="part_cost" id="part_cost_<%= intRecID %>" type="text" value="<%=FormatNumber(cost,2)%>"></span>
            <span class="wt"><strong>Weight: </strong><input name="part_wt" id="part_wt_<%= intRecID %>" type="text" value="<%=FormatNumber(rs("quote_part_wt"),2)%>"></span>
            <span class="update"><input type="button"  value="Save Changes" class="submitLineChanges" /></span>
        </span>
    </form> 
```

正如你应该知道的那样，我在 ASP 中运行它。该表格基本上适用于购物车中的每个行项目。由于页面的性质，我不想有一个单独的页面来编辑所有信息。看来这应该可行，但我现在的隧道视野很可能错过了一些东西。

我应该注意，表格是针对每一行的，我不需要它来提交所有表格，只需要一个。

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-26T13:46:30.260

改变

```
datastring = $(formID).serialize(); 
```

到

```
var datastring = $('#' + formID).serialize(); 
```

您需要使用`#`ID 选择器使用前缀。另外 - 如果没有`var`关键字，您会无缘无故地污染全局命名空间。

甚至更好......你可以更换

```
var formID = $(this).closest('form').attr('ID');
var datastring = $('#' + formID).serialize(); 
```

和

```
var datastring = $(this).closest('form').serialize(); 
```

它一口气找到`form`并连载它！

感谢[@MikeBrant](https://stackoverflow.com/users/1529853/mike-brant)的建议。

# magento-1.6 - 添加到购物车后如何获取产品的选定自定义字段值？

> ID：11670697
> 
> 赞同：4
> 
> 时间：2012-07-26T13:45:09.183
> 
> 标签：magento-1.6

我在购物车中添加了一些自定义字段的产品。现在，我想在添加到购物车后获取产品的选定自定义字段值。

# mp3 - 识别 mp3 或 wav 文件中的固定短语

> ID：11670701
> 
> 赞同：1
> 
> 时间：2012-07-26T13:45:25.077
> 
> 标签：mp3, wav

我想扫描 mp3/wav 中的短语“恭喜你已成功完成......”。这是来自 IVR 录音，其中短语被预先录制并在客户完成操作时背诵给他们。

我不确定的是：1）如何获得我正在寻找的短语的数字表示？2) 如何将该数字表示与数千个 wav/mp3 文件进行比较，以查看它是否存在于文件中。

# c# - 将列表分组为 3 个组并选择每个组的最大值

> ID：11670706
> 
> 赞同：3
> 
> 时间：2012-07-26T13:45:32.207
> 
> 标签：c#, linq, linq-group

我有一个动态列表列表，目前正在通过此过滤：

```
var CPUdataIWant = from s in rawData
                   where s.stat.Contains("CPU")
                   select s;

//CPUDataIWant is a List<List<dynamic>>. 
```

我在每个内部列表中有 86000 个值。

我需要做的是将值分组为 3 个组，选择该组的最大值，然后将其插入另一个动态列表列表中，或者将其从`CPUDataIWant`.

所以我想要的一个例子是：

```
Raw data = 14,5,7,123,5,1,43,87,9 
```

我的处理价值将是：

```
ProceData = [14,5,7], [123,5,1], [43,87,9]
ProceData = [14,123,87] 
```

不必使用 linq，但越容易越好。

编辑：好的，我解释了想要的东西有点差。

这就是我所拥有的：

```
List<List<object>> 
```

在这个列表中，我将有 X 个称为 A 的列表。在 A 中，我将有 86000 个值，假设它们现在是整数。

我想要的是拥有

```
List<List<object>> 
```

但是我想要 28700，而不是 A 中的 86000 个值，这将由 A 中每 3 个值的最大值组成。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-26T14:02:07.720

```
IEnumerable<int> filtered = raw.Select((x, i) => new { Index = i, Value = x }).
    GroupBy(x => x.Index / 3).
    Select(x => x.Max(v => v.Value)); 
```

或者，如果您打算更频繁地使用它

```
public static IEnumerable<int> SelectMaxOfEvery(this IEnumerable<int> source, int n)
{
    int i = 0;
    int currentMax = 0;
    foreach (int d in source)
    {
        if (i++ == 0)
            currentMax = d;
        else
            currentMax = Math.Max(d, currentMax);
        if (i == n)
        {
            i = 0;
            yield return currentMax;
        }
    }
    if (i > 0)
        yield return currentMax;
}

//...

IEnumerable<int> filtered = raw.SelectMaxOfEvery(3); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-26T13:56:59.260

这应该会产生预期的结果：

```
var data = new List<dynamic> { 1, 2, 3,   3, 10, 1,   5, 2, 8 };
var firsts = data.Where((x, i) => i % 3 == 0);
var seconds = data.Where((x, i) => (i + 2) % 3 == 0);
var thirds = data.Where((x, i) => (i + 1) % 3 == 0);
var list = firsts.Zip(
    seconds.Zip(
        thirds, (x, y) => Math.Max(x, y)
    ), 
    (x, y) => Math.Max(x, y)
).ToList(); 
```

列表现在包含：

```
3, 10, 8 
```

或者推广到扩展方法：

```
public static IEnumerable<T> ReduceN<T>(this IEnumerable<T> values, Func<T, T, T> map, int N)
{
    int counter = 0;
    T previous = default(T);
    foreach (T item in values)
    {
        counter++;
        if (counter == 1)
        {
            previous = item;
        }
        else if (counter == N)
        {
            yield return map(previous, item);
            counter = 0;
        }
        else
        {

            previous = map(previous, item);
        }
    }

    if (counter != 0)
    {
        yield return previous;
    }
} 
```

像这样使用：

```
data.ReduceN(Math.Max, 3).ToList() 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-26T14:13:52.417

老派的做事方式让它变得非常简单（尽管它不像 LINQ 那样紧凑）：

```
// Based on this spec: "CPUDataIWant is a List<List<dynamic>>"
// and on the example, which states that the contents are numbers.
//
List<List<dynamic>> filteredList = new List<List<dynamic>>();
foreach (List<dynamic> innerList in CPUDataIWant)
{
    List<dynamic> innerFiltered = new List<dynamic>();

    // if elements are not in multiples of 3, the last one or two won't be checked.
    for (int i = 0; i < innerList.Count; i += 3)
    {   
        if(innerList[i+1] > innerList[i])
            if(innerList[i+2] > innerList[i+1])
                innerFiltered.Add(innerList[i+2]);
            else
                innerFiltered.Add(innerList[i+1]);
        else
            innerFiltered.Add(innerList[i]);
    }
    filteredList.Add(innerFiltered);
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-26T16:04:33.077

如果您觉得需要使用 Aggregate，您可以这样做：

（使用 LinqPad 测试）

```
class Holder
{
       public dynamic max = null;
       public int count = 0;
}

void Main()
{
    var data = new List<dynamic>
        {new { x = 1 }, new { x = 2 }, new { x = 3 }, 
         new { x = 3 }, new { x = 10}, new { x = 1 }, 
         new { x = 5 }, new { x = 2 }, new { x = 1 },
         new { x = 1 }, new { x = 9 }, new { x = 3 }, 
         new { x = 11}, new { x = 10}, new { x = 1 }, 
         new { x = 5 }, new { x = 2 }, new { x = 12 }};

    var x = data.Aggregate(
       new LinkedList<Holder>(),
       (holdList,inItem) => 
       {
          if ((holdList.Last == null) || (holdList.Last.Value.count == 3))
          {
            holdList.AddLast(new Holder { max = inItem, count = 1});
          }
          else
          {
            if (holdList.Last.Value.max.x < inItem.x)
               holdList.Last.Value.max = inItem;

            holdList.Last.Value.count++;
          }
          return holdList;
       },
       (holdList) => { return holdList.Select((h) => h.max );} );

    x.Dump("We expect 3,10,5,9,11,12");
} 
```

# xslt - 如何在 XSLT 中创建具有动态属性的元素？

> ID：11670712
> 
> 赞同：1
> 
> 时间：2012-07-26T13:45:49.590
> 
> 标签：xslt, xpath

我有一些看起来像这样的 XML：

```
 <ExtensionObject>
    <Value xmlns="">
        <Key>key01</Key>
        <StringValue>somewords</StringValue>
    </Value>
    <Value xmlns="">
        <Key>key01</Key>
        <NumberValue>12345</NumberValue>
    </Value>

...........hundreds more Values..............
  </ExtensionObject> 
```

我相当乐观地写了这样的 XSLT：

```
<xsl:template match="/ExtensionObject">
    <VResult>
        <xsl:for-each select="Value">
            <xsl:variable name="fld">
                <Value><xsl:value-of select="Key"/></Value>
            </xsl:variable>
            <Result field="$fld">
                <Value>
                    <xsl:choose>
                        <xsl:when test="NumberValue">
                            <xsl:value-of select="NumberValue"/>
                        </xsl:when>
                        <xsl:otherwise>
                            <xsl:value-of select="StringValue"/>
                        </xsl:otherwise>
                    </xsl:choose>
                </Value>
            </Result>
        </xsl:for-each>
    </VResult>
</xsl:template> 
```

并期望得到这个：

```
<VResult>
    <Result field="key01"><Value>somewords</Value></Result>
    <Result field="key02"><Value>12345</Value></Result>
    ...........hundreds more Values..............
</VResult> 
```

相反，我得到了：

```
<VResult>
    <Result field="$fld"><Value>somewords</Value></Result>
    <Result field="$fld"><Value>12345</Value></Result>
    ...........hundreds more Values..............
</VResult> 
```

有谁知道如何插入带有键值的字段名称？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-26T13:49:09.193

```
<xsl:attribute name="field"><xsl:value-of select="Key"/></xsl:attribute> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-26T13:57:26.710

与其使用 for-each，不如使用模板：

```
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
    <xsl:template match="/">
        <VResults>
            <xsl:apply-templates select='*' />
        </VResults>
    </xsl:template>
    <xsl:template match="Value">
        <Result>
            <xsl:attribute name='field'><xsl:value-of select='Key' /></xsl:attribute>
            <xsl:apply-templates />
        </Result>
    </xsl:template>
    <xsl:template match="NumberValue|StringValue">
        <Value><xsl:value-of select='.' /></Value>
    </xsl:template>
    <xsl:template match="text()" />
</xsl:stylesheet> 
```

# objective-c - Apple LLVM 4.0 新的“默认合成”功能如何运作？

> ID：11670715
> 
> 赞同：4
> 
> 时间：2012-07-26T13:46:11.397
> 
> 标签：objective-c, llvm, declared-property

我正在浏览 Xcode 4.4 的发行说明并注意到这一点：

> LLVM 4.0 编译器
> 
> Xcode 现在包括 Apple LLVM Compiler 4.0 版，包括以下新的Objective-C 语言功能：
> 
> *   默认@synthesize：未实现时自动合成一个@property

我对这个功能很感兴趣。它是如何工作的？我试过删了`@synthesize`，还是不行。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-26T13:59:40.467

它确实有效，请确保在您的项目和目标设置中，编译器设置为 LLVM 4.0。然后，当您删除 @synthesize 行时，您可以通过两种方式访问​​它：

通过带有 self.myProperty 的访问器或通过带有 _myProperty 的相应实例变量（是的，下划线是自动添加的）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-15T20:31:11.370

在很多情况下它根本不起作用。这些都在这里列出为例外：

[http://useyourloaf.com/blog/2012/08/01/property-synthesis-with-xcode-4-dot-4.html](http://useyourloaf.com/blog/2012/08/01/property-synthesis-with-xcode-4-dot-4.html)

但对我来说最重要的一个叫做

**具有非默认 Getter 和 Setter 的读写属性**

这意味着，除非您的属性只是面向公众的 ivars，否则您需要包含 @synthesize。或者换一种说法，如果你很好地使用了封装并填充了那些 setter 和 getter，你就不能使用它。

**稍后注意：**我不确定此处指定的条件，但我发现对于我遇到的几乎所有情况都有一个自动合成的 ivar。

# jquery-ui - jquery ui自动完成错误如何解决

> ID：11670721
> 
> 赞同：0
> 
> 时间：2012-07-26T13:46:20.707
> 
> 标签：jquery-ui, autocomplete

当我将鼠标悬停在自动完成菜单上时将值输入到 texbox 时出现的错误，当我将鼠标移出菜单时，即使我将焦点放在文本框上，文本框也会获得原始值：返回 false。

```
<label for="tags">Tags: </label>
<input id="tags" />​

var availableTags = [
"ActionScript",
"AppleScript",
"Asp",
"BASIC",
"C",
"C++",
"Clojure",
"COBOL",
"ColdFusion",
"Erlang",
"Fortran",
"Groovy",
"Haskell",
"Java",
"JavaScript",
"Lisp",
"Perl",
"PHP",
"Python",
"Ruby",
"Scala",
"Scheme"
];

var tags = $("#tags").autocomplete({
source: availableTags,
focus: function(event, ui){
    return false;        
}
});

availableTags.push("foo");

tags.autocomplete( "option", "source", availableTags);
window.setTimeout(function(){$("#tags").val("BASIC")},10000 ); 
```

我正在做的是在 10 秒后输入“BASIC”值，如果您将鼠标悬停在自动完成菜单上，那么当您将鼠标移出时，#tags 值将返回原点，我不希望这种情况发生。

我可以解决这个问题吗？！如何？！谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-31T07:24:12.680

它在下一个版本中得到更正，所以目前你必须使用：

```
 <script src="http://code.jquery.com/ui/jquery-ui-git.js" type="text/javascript"></script> 
```

而不是从 jquery-ui 站点下载的。

# javascript - 循环/闭包中的javascript函数

> ID：11670722
> 
> 赞同：0
> 
> 时间：2012-07-26T13:46:21.987
> 
> 标签：javascript, javascript-events

我是 javascript 新手并试图了解此代码的行为，该代码尝试将唯一的 onclick 处理程序分配给数组 myElements[] 中的不同 DOM 元素：

```
(function handleClicks(){
for (var i = 0; i < 100; ++i) {
myElements[i].onclick = function() {
        alert( 'You clicked on: ' + i );
};
})(); 
```

我的理解是，每次单击 DOM 元素时，浏览器都应提醒“您单击了 100”，因为一旦函数完成，javascript 将使用*i的值*

我有两个问题：

1.  如果*i*仅在函数 handleClicks() 中具有作用域，一旦函数完成，浏览器如何访问*i* - 肯定*i*不再存在？
2.  我通过将两个 HTML 元素放入数组中来尝试此代码

`var myElements = [];`

 ````
myElements.push( document.getElementById('1');

myElements.push( document.getElementById('2'); 
````  `[http://jsfiddle.net/bramong/fS7qE/](http://jsfiddle.net/branmong/fS7qE/)

但是当程序运行时，它会为每个单击的元素提醒“您点击了：2”。

为什么它不提醒“您点击了：100”。因为一旦函数完成运行，这肯定是 i 的值？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-26T13:48:36.047

> *“如果`i`只有功能范围内的功能，一旦功能完成`handleClicks()`，浏览器如何访问- 肯定不再存在？”`i``i`*

`i`变量在封闭范围内（*函数`handleClicks`）*。当一个函数被创建时，它会在函数的生命周期内携带它的原始变量范围。这称为*闭包*。

Because of this, all the handler functions created in the loop are referencing the same `i` variable that exists in `handleClicks`. This keeps `i` alive. When you destroy the handlers, `i` will be able to be garbage collected.

* * *

The second code example stops at `2` because you get a *TypeError* for accessing a property on `undefined`. This halts the execution of the code.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-26T13:48:50.837

This is because you have only two elements in the myElements array. So, the loop executes only uptil 2 and errors out after that. If you added 5 elements it would show 5, show 100 if you added 100.`

# php - 更快地走图像

> ID：11670729
> 
> 赞同：2
> 
> 时间：2012-07-26T13:46:44.997
> 
> 标签：php, image

我需要找到图像的特定像素。假设“89 21 24”。

我正在使用两个嵌套循环来遍历图像：

```
for( $y=$inity; $y<$h; $y++) {
 for( $x=$initx; $x<$w; $x++) {

   $pixel = getpixelat($img,$x,$y);
   if ($pixel == "892124" and getpixelat($img,$x+1,$y) == "1212224") {
       $px = $x; $py = $y;
       break 2;
   }
} 
```

我想通过增加 $y 和 $x 来获得更快的算法，而不是一一增加，而是例如 4 乘 4。（快 16 倍？）当然，我需要确切地知道构建 4x4 正方形的像素。

我会这样做：

```
 if ($pixel == "" and nextpixel...) {
        $px = $x - 1; $py = $y -...;
    }
   //etc. 
```

有没有更聪明的方法来实现这一目标？

编辑：

这是getpixelat函数：

```
function getpixelat($img,$x,$y) {
$rgb = imagecolorat($img,$x,$y);
$r = ($rgb >> 16) & 0xFF;
$g = ($rgb >> 8) & 0xFF;
$b = $rgb & 0xFF;
return $r.$g.$b;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-26T13:51:17.670

如果您知道要查找的颜色始终以至少 2x2、3x3 或任何固定大小的色块出现，那么可以，您可以通过在每次迭代中递增`$x`和`$y`不止一个来加快查找速度。

例如，如果你知道你的补丁总是至少大小`KxL`，你可以执行以下操作：

```
for( $y=$inity; $y<$h; $y += L) {
    for( $x=$initx; $x<$w; $x += K) {
        $pixel = getpixelat($img,$x,$y);

        if ($pixel == "892124" and getpixelat($img,$x+1,$y) == "1212224") {
            $px = $x; $py = $y;
            break 2;
        }
   }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-26T14:08:43.053

1.) 避免嵌套循环：

2.）保存像素的旧值（调用函数不是那么快）

3.) 不要将颜色转换为字符串/不要比较字符串！（什么是 1212224？它不是 Hex-Color ）

```
$px=-1;
$py=-1;

$lineW = ($w-$initx);
$lineH = ($h-$inity);
$count = $lineW * $lineH;

$color1 =hexdec ("892124") ;
$color2 =hexdec ("1212224") ;

$x=$initx;
$y=$inity;
$new = imagecolorat($img,$x,$y);

while(true) {
  $x++;
  if ($x>=$w) {
    $x=$initx+1;
    $y++;
    if ($y>=$h) break;
    $new = imagecolorat($img,$x-1,$y);
  }
  $old = $new;
  $new = imagecolorat($img,$x,$y);

  if ($old == $color1 && $new == $color2)
  {
    $px = $x; $py = $y;
    break;
  }
} 
```

（代码未经测试:-)）

# javascript - mongodb mongoose find - 我如何获得适用的字符串作为结果？

> ID：11670730
> 
> 赞同：2
> 
> 时间：2012-07-26T13:46:50.977
> 
> 标签：javascript, node.js, mongodb, mongoose

我想使用我的 MongoDB 中的数据通过 Node.js 在 HTML 代码上显示。到目前为止，我知道如何将来自 HTML5 公式的信息插入到我的 MongoDB 中，以及如何读出这些信息 - 但我的结果`find()`是：

```
[ { name: 'Mr. Banana', _id: 123aclongvalueinHEX001c000001 } ] 
```

`node.exe`这是函数的 cmdshell 上显示的简单结果示例：

```
People.find(
    {},
    ['name'],
    function(err, docs) {
        if (!err){ 
            console.log(docs);
        }
        else { throw err;}
    }
); 
```

`People`是 Mongoose 模式并具有一些属性，在此示例中，我仅搜索所有名称，其中仅保存一个实体`People`。

所以问题是，我想永远寻找它，我如何只提取`Mr. Banana`而不提取整个`[{ name: and id}]`- 东西？我想它有一些功能或选项，但我找不到它！我可以发明一个函数来通过 leftstr 等来修剪它。这将是我的紧急解决方案。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-26T13:57:33.007

如果您只想在`name`结果中输出第一个文档的属性：

```
console.log(docs[0].name); 
```

如果您想阻止`_id`甚至包含在返回的文档中，请参阅[这篇文章](https://stackoverflow.com/questions/9598505/mongoose-retrieving-data-without-id-field)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-01T11:25:08.430

我得到了猫鼬具有称为查询流的功能的提示。这导致了我的解决方案。

```
var Bericht = new Schema({
    name     : String
  , mail     : String
  , standort : String
  , betreff  : String
  , inhalt   : String
  , datum    : Date
});
var Bericht = mongoose.model('Bericht', Bericht);

  var stream = Bericht.find().stream()
  , names = []
  , mails = []
  , standorts = []
  , betreffs = []
  , inhalts = []
  , datums = []
  , i=0;

function closeHandler() {
    function closeHandler() {
        console.log(JSON.stringify(names));
    };
     stream.on('data', function (doc) {
            if (doc.name) {
        names.push(doc.name);
        mails.push(doc.mail);
        standorts.push(doc.standort);
        betreffs.push(doc.betreff);
        inhalts.push(doc.inhalt);
        datums.push(doc.datum);
      }
    })
    stream.on('close', closeHandler) 
```

我的架构有多个名称，在本例中是 6 个属性。使用 stream.on 函数后，我将数据库中的所有内容放入一个数组中，例如 mails[1] 是我的 mongodb 中第二个条目的邮件。有了它，我可以使用函数轻松地在 html 中显示我的数据库的全部内容。也许这太多了，但由于喜欢这个板，我会完成这个线程。

使用此函数，您将构建一个包含所有名称的简单表作为返回值：

```
 function namestable(){
        value = "<table border='1'><tr><th>Namen</th></tr>"
        for(var i=0;i<names.length;i++){
    value+="<tr><td>"+names[i]+"</td>";
        ;}
        value+="</table>";
    return value;
    } 
```

因此，当您构建 html 代码时，您只需将此函数添加到您的 nodejs 中：

```
var body = '<html>'+
    '<head>'+
    '<meta http-equiv="Content-Type" content="text/html; '+
    'charset=UTF-8" />'+
    '</head>'+
    '<body>'+
    '<form action="/upload" method="post">'+
    namestable()+
    '<input type="submit" value="Hario" />'+
    '</form>'+
    '</body>'+
    '</html>';

        response.writeHead(200, {'Content-Type': 'text/html'});
        response.write(body);
        response.end(); 
```

我喜欢 ：）

# c# - 需要初始化的接口实现

> ID：11670732
> 
> 赞同：1
> 
> 时间：2012-07-26T13:46:57.933
> 
> 标签：c#, interface, constructor, initialization

我想提取需要初始化的类的接口。

```
public class Example<T>
{
    public Example(SomeData data)
    {
        // initialize self with data
    }

    public IEnumerable<T> GetObjects(SomeData data)
    {
        // extract data
    }
} 
```

问题是我们不能编写一个强制非默认类型构造函数的接口。我当然可以将我的课程改为：

```
public interface IExample<T>
{
    void Initilize(SomeData data);
    IEnumerable<T> GetObjects(SomeData data);
}

public class Example<T> : IExample<T>
{
    public void Initilize(SomeData data)
    {
        // initialize self with data
    }

    public IEnumerable<T> GetObjects(SomeData data)
    {
        // extract data
    }
} 
```

但这不一样，因为当实例化这种类型时，可以直接调用`GetObjects`它，然后会导致实例未初始化的异常。

## 我还有什么其他选择？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-26T13:53:29.797

由于这只是一个接口，你不应该关心构造函数。接口定义了实现可以做什么，但没有具体定义它们如何做或调用什么顺序方法。

你怎么能现实地说，将来不会有一些接口的实现会以不同的方式工作并且不需要构造函数？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-26T13:52:13.940

你没有。构造函数参数是类的实现细节——除非您决定创建`GetObjects`读/写属性，否则它们与接口无关。

在某个地方你正在构造一个具体的实例，并且你已经知道那里的类本身，所以你知道你需要传递某些构造函数参数。

如果您真的想在外部强制执行“必须使用某些参数构造所有 IExamples”这一想法，请使用工厂模式：

```
public static class ExampleFactory {
    public static IExample<T> MakeAnExample(SomeData data) {
        // return some concrete implementation... 
    }
} 
```

# google-maps - 信息窗口不显示

> ID：11670733
> 
> 赞同：0
> 
> 时间：2012-07-26T13:47:02.737
> 
> 标签：google-maps, google-maps-api-3, infowindow

我正在尝试这样做，以便有人点击地图，然后弹出一个 infoWindow 告诉他们 latlng。现在，只是想弄清楚如何让 infoWindow 出现。我在这里用标记发现了一个类似的问题并稍微编辑了函数，但我错过了一些我确定很简单的东西，我只是无法指出。这是代码：

```
 function InfoWindow(location) {
          if ( marker ) {
            marker.setPosition(location);
          } else {
            marker = new google.maps.infoWindow({
              position: location,
              content: "sam"
            });
          }
        }

        google.maps.event.addListener(map, 'click', function(event) {
          InfoWindow(event.latLng);
        });
                } 
```

非常感谢帮助！谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-26T14:48:09.403

您传递事件的 LatLng (event.latLng) 是正确的，而不是整个事件。为了帮助输出，我包含了将 lat 和 lng 拆分为字符串的代码。我修复的其他几件事：需要在 google.maps.InfoWindow 中成为大写“I”；如果窗口已经存在，则将内容设置为新的 latLng；添加了代码以在最后实际打开窗口。这应该照顾你的一切

```
function InfoWindow(location) {
    var lat = location.lat().toString();
    var lng = location.lng().toString();
    var new_content = "Lat: " + lat + "<br />Long: " + lng
  if ( marker ) {
    marker.setPosition(location);
    marker.setContent(new_content);
  } else {
      marker = new google.maps.InfoWindow({
      position: location,
      content: new_content
    });
  }
  marker.open(map);
}

google.maps.event.addListener(map, 'click', function(event) {
  InfoWindow(event.latLng);
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-26T14:03:35.887

事件是一个 LatLng

```
 google.maps.event.addListener(map, 'click', function(event) {
      InfoWindow(event);
    }); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-26T13:59:24.403

我正在使用 InfoBubble，它看起来比 InfoWindow 更好，而且处理起来也更容易。试试看。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-26T14:49:52.320

[Map MouseEvent](https://developers.google.com/maps/documentation/javascript/reference#MouseEvent)有一个 latLng 属性

```
google.maps.event.addListener(map, 'click', function(event) 
{
   new google.maps.InfoWindow({
              map:map, 
              content:"coordinates:"+event.latLng.toUrlValue(),
              position:event.latLng});});
} 
```

“地图”是对您的 google.maps.Map 的引用。

通过将其粘贴到地址栏中，然后单击地图在[此地图上](http://www.geocodezip.com/v3_MW_example_map1.html)进行测试：

```
javascript:google.maps.event.addListener(map, 'click', function(event) {new google.maps.InfoWindow({map:map, content:"coordinates:"+event.latLng.toUrlValue(),position:event.latLng});}); 
```

# iphone - 在 ios 中使用授权的 .net 支付网关

> ID：11670742
> 
> 赞同：0
> 
> 时间：2012-07-26T13:47:30.020
> 
> 标签：iphone, objective-c

我正在使用 ios 中的授权 .net 支付网关，方法如下

```
 (void) createTransaction {
    AuthNet *an = [AuthNet getInstance];

    [an setDelegate:self];

    CreditCardType *creditCardType = [CreditCardType creditCardType];
    creditCardType.cardNumber = @"4111111111111111";
    NSLog(@"babul cardNumber is %@",creditCardType.cardNumber);
    creditCardType.cardCode = @"100";
    NSLog(@"babul cardCode is %@",creditCardType.cardCode);
    creditCardType.expirationDate = @"1212";
    NSLog(@"babul expirationDate is %@",creditCardType.expirationDate);
    PaymentType *paymentType = [PaymentType paymentType];
    paymentType.creditCard = creditCardType;

    ExtendedAmountType *extendedAmountTypeTax = [ExtendedAmountType extendedAmountType];
    extendedAmountTypeTax.amount = @"0";
    extendedAmountTypeTax.name = @"Tax";

    ExtendedAmountType *extendedAmountTypeShipping = [ExtendedAmountType extendedAmountType];
    extendedAmountTypeShipping.amount = @"0";
    extendedAmountTypeShipping.name = @"Shipping";

    LineItemType *lineItem = [LineItemType lineItem];
    lineItem.itemName = @"Soda";
    lineItem.itemDescription = @"Soda";
    lineItem.itemQuantity = @"1";
    lineItem.itemPrice = @"1.00";
    lineItem.itemID = @"1";

    TransactionRequestType *requestType = [TransactionRequestType transactionRequest];
    requestType.lineItems = [NSArray arrayWithObject:lineItem];
    requestType.amount = @"1.00";
    requestType.payment = paymentType;
    requestType.tax = extendedAmountTypeTax;  
    requestType.shipping = extendedAmountTypeShipping;

   CreateTransactionRequest *request = [CreateTransactionRequest createTransactionRequest];
    request.transactionRequest = requestType;
    request.transactionType = AUTH_ONLY;
    request.anetApiRequest.merchantAuthentication.mobileDeviceId =
    [[[UIDevice currentDevice] uniqueGlobalDeviceIdentifier]
     stringByReplacingOccurrencesOfString:@"-" withString:@"_"];
    request.anetApiRequest.merchantAuthentication.sessionToken = sessionToken;
    [an purchaseWithRequest:request];
} 
```

我得到的回应是

创建事务响应 2012-07-26 19:14:00.131 Authorized[2355:207] 错误`E00003`命名空间“AnetApi/xml/v1/schema/AnetApiSchema.xsd”中的元素“merchantAuthentication”在命名空间“AnetApi/xml/v1/schema/AnetApiSchema.xsd”中具有无效的子元素“mobileDeviceId”。预期的可能元素列表：命名空间“AnetApi/xml/v1/schema/AnetApiSchema.xsd”中的“名称、事务密钥、会话令牌、密码”。命名空间警告：xmlns：URI AnetApi/xml/v1/schema/AnetApiSchema.xsd 不是绝对的 ttp://www.w3.org/2001/XMLSchema" xmlns="AnetApi/xml/v1/schema/AnetApiSchema.xsd" ^ 2012-07-26 19:14:00.131 Authorized[2355:207] Error = (null) 2012-07-26 19:14:00.247 Authorized[2355:207] babul 输出为 Message.code = E00003 Message.text = The元素“商家身份验证” 在命名空间“AnetApi/xml/v1/schema/AnetApiSchema.xsd”中，在命名空间“AnetApi/xml/v1/schema/AnetApiSchema.xsd”中有无效的子元素“mobileDeviceId”。预期的可能元素列表：命名空间“AnetApi/xml/v1/schema/AnetApiSchema.xsd”中的“名称、事务密钥、会话令牌、密码”。

上述问题是否有任何替代方法以及交易将如何存储在授权的 .net 中（我创建了我的测试帐户，我提供了这些凭据，我批准了我的设备，但后来我收到了上述错误）

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-26T19:29:04.623

我认为您需要进行应用内购买，因为 Apple 不会通过任何网络服务或 API 批准应用程序付款。

# android - 使用 AnimatorSet 恢复动画

> ID：11670757
> 
> 赞同：17
> 
> 时间：2012-07-26T13:48:03.427
> 
> 标签：android, android-animation

我正在创建一个动画，`AnimatorSet`当它结束时，我想离开`View`它原来的位置。

代码是这样的：

```
mLastAnimation = new AnimatorSet();
mLastAnimation.playTogether(
  ObjectAnimator.ofFloat(mImageView, "scaleX", 1.5f, 1f),
  ObjectAnimator.ofFloat(mImageView, "translationY", 40f, 0f));
mLastAnimation.setDuration(3000);
mLastAnimation.addListener(this);
mLastAnimation.start();

// The Activity implements the AnimatorListener interface
  @Override
  public void onAnimationEnd(Animator animator) {
    // Undo the animation changes to the view.
  } 
```

编辑：

我正在使用新的动画 API，所以`setFillAfter()`在这里不起作用。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-12-11T07:38:00.097

如果您使用的是 Nineoldandroids，则有一个名为`reverse`. 您可以将持续时间设置为 0 并调用`reverse`以反转动画。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-07-26T13:53:09.613

您必须将`View`背面的属性设置为其原始值。

例如，如果您向前平移 40 像素，则需要向后平移 40 像素。这是因为在**属性动画期间 的实际***属性*发生了`View`变化，而不仅仅是渲染方式。

 **[http://developer.android.com/guide/topics/graphics/prop-animation.html#property-vs-view](http://developer.android.com/guide/topics/graphics/prop-animation.html#property-vs-view)

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2017-06-07T11:33:15.390

使用`ObjectAnimator`时您可以简单地设置

```
android:repeatMode="reverse" 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2017-04-17T04:18:59.680

你可以使用这个：

```
ObjectAnimator scaleX = ObjectAnimator.ofFloat(mImageView, "scaleX", 1.5f, 1f);
// here is the important part!
scaleX.setRepeatMode(ValueAnimator.REVERSE);
scaleX.setRepeatCount(1);
ObjectAnimator transl = ObjectAnimator.ofFloat(mImageView, "translationY", 40f, 0f));
// here is the important part!
transl.setRepeatMode(ValueAnimator.REVERSE);
transl.setRepeatCount(1);

mLastAnimation = new AnimatorSet();
mLastAnimation.playTogether(scaleX, transl);
// the rest is the same... 
```**

# javascript - 为什么'nextTick' 在这里没有按预期运行？

> ID：11670761
> 
> 赞同：1
> 
> 时间：2012-07-26T13:48:27.247
> 
> 标签：javascript, node.js

以下程序将挂在 NodeJS 中，有人知道为什么吗？

```
结束=假；

事件 = 要求（“事件”）；
eventEmitter = 新事件。EventEmitter();
eventEmitter.on('end', function() {
  结束=真；
});
设置超时（函数（）{
  eventEmitter.emit('end');
}, 100);

而（！结束）{
  process.nextTick();
}

console.log('结束');

```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-26T13:52:54.160

[`nextTick`](http://nodejs.org/api/process.html#process_process_nexttick_callback)不是某种yield操作，它用于安排在下次引擎空闲时调用回调。它是“挂起”的，因为`while`循环的退出条件永远不会满足（并且永远不可能，使用该代码）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-26T13:53:29.307

简短的回答：因为 Node.JS 是单线程的。

长答案：JavaScript 被组织成一个包含事件的队列。这些事件在触发时无法停止，直到它们完成工作。也没有其他代码可以并行运行，因为 Node.JS**是**单线程的。这意味着这段代码：

```
while (!ended) {
  process.nextTick();
} 
```

是一个无限循环。该`ended`变量永远不会改变，因为`end`在主事件（即您向我们展示的代码）完成其工作之前，处理程序无法触发。它永远不会。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-26T14:06:55.113

`process.nextTick();`不调用主循环的下一个循环，下一个循环自动到来，`.nextTick()`方法用于在下一个循环调用回调函数，信息：[http](http://nodejs.org/api/process.html#process_process_nexttick_callback) ://nodejs.org/api/process.html#process_process_nexttick_callback 。

`while(!ended)`是一个无限循环，这就是应用程序挂起的原因，`ended`变量不会改变，直到当前循环没有结束，这会被你的 while 循环淹没。

# javascript - 如何实现复选框或面向类别的照片库

> ID：11670762
> 
> 赞同：0
> 
> 时间：2012-07-26T13:48:27.680
> 
> 标签：javascript, jquery, html, css

我不确定这个问题的最佳表达方式，因此谷歌为什么让我悬而未决。

本质上，我想创建一个包含（例如）30 张图片的照片库，在这 30 张图片中，它们可以分为 3 个不同的类别。

我希望用户能够单击一个复选框来显示或隐藏不同的类别（和后续图片）或查看它们。

例如，照片库左侧将有 4 个复选框。顶部的框是 ALL，然后是 Category 1、Category 2、Category 3。当您单击每个框时，只会出现那些“类型”的图像。

任何关于代码的提示（甚至是我应该寻找的代码类型，即 CSS、Javascript、jQuery）都将不胜感激。谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-26T14:32:46.777

CSS ->

```
.chkbox-container{
  float:left;
  width:95px;
  border:1px solid #ccc;    
}
.img-container{
  float:left;
  width:300px;
  border:1px solid #ccc;    
}
img{
  display:inline-block;
  width:90px;
  height:75px;
  padding:2px;
  border:1px solid black;
  display:none;    
} 
```

jQuery ->

```
$('.chkbox-container :radio').on('change', function(){
  var me = $(this);
  $.each($('.img-container img'), function(i,v){
    var theCats = $(v).attr('rel');
    theCats = theCats.split(' ');
    if($.inArray(me.val(), theCats)){
      $(v).show();
    }else{
      $(v).hide();
    }

  });        
}); 
```

HTML ->

```
<div class="chkbox-container">
  <input type="radio" name="catfilter[]" value="all" checked="checked"/> All<br/>
  <input type="radio" name="catfilter[]" value="category1" /> Category 1<br/>
  <input type="radio" name="catfilter[]" value="category2" /> Category 2<br/>
  <input type="radio" name="catfilter[]"value="category3" /> Category 3<br/>
</div>
<div class="img-container">
  <img src="path.to/the/image/ext" rel="category1" />
  <img src="path.to/the/image/ext" rel="category2" />
  <img src="path.to/the/image/ext" rel="category3" />
</div> 
```

[为任何发现它有用的人工作 jsFiddle。](http://jsfiddle.net/Ohgodwhy/xdmd2/)

# php - 如何获得对年份敏感的日历周？date("W") 在 1 月 1 日返回 52

> ID：11670763
> 
> 赞同：8
> 
> 时间：2012-07-26T13:48:29.630
> 
> 标签：php, date, week-number

正如标题所说，PHP 的 date("W") 函数返回日历周（当天）。不幸的是，它在大多数年份的第一天返回 52 或 53。以简单的思维方式，这是正确的，但非常烦人，因为 2012 年 1 月 1 日不是日历周 52，它不是当年的日历周。大多数日历将其定义为上一年的第 0 周或第 52 周。

当您按日历周对一年中的每一天进行分组时，这非常棘手：2012 年 1 月 1 日和 2012 年 12 月 31 日都放在同一个日历周组中。

**所以我的问题是：PHP 的 date("W") 是否有（本机）年份敏感的替代方案？**

编辑：我想我以一种非常不清楚的方式写了这个问题的第一个版本，所以这是我的编辑：我正在寻找一个函数，它可以在一年的第一天返回正确的日历周。PHP 的 date("W") 在 2012 年 1 月 1 日返回 52，这是“错误的”。它应该为 0 或 null。根据官方消息，一年中的第一个日历周从一年的第一个星期一开始。所以，如果一年的第一天不是星期一，那就不是第一周！这是第 0 周。[维基百科的文章](http://en.wikipedia.org/wiki/ISO_week_date#First_week)说

*如果 1 月 1 日在星期一、星期二、星期三或星期四，则在第 01 周。如果 1 月 1 日在星期五、星期六或星期日，则在上一年的第 52 周或第 53 周。*

这变得很棘手，因为一年中的最后几天也在第 52/53 周。date("W") 不分为当年和上年。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-12-30T16:42:43.267

此解决方案将 12 月的多余部分转换为第 53 周，并将第 1 周之前的 1 月的所有部分转换为第 0 周。

```
$w=(int)date('W');
$m=(int)date('n');
$w=$w==1?($m==12?53:1):($w>=51?($m==1?0:$w):$w);

echo "week $w in ".date('Y'); 
```

2013-12-31 ==> 2013 年第 53 周

2014-01-01 ==> 2014 年第 1 周

2015-12-31 ==> 2015 年第 52 周

2016-01-01 ==> 2016 年第 0 周

和一个小测试运行，所以你可以自己看看;-)

```
$id=array(25,26,27,28,29,30,31,1,2,3,4,5,6,7,8);        
for($iy=2013;$iy<2067;++$iy){foreach($id as $k=>$v){if($k<7){$im=12;}else{$im=1;}
if($k==7){++$iy;echo '====<br>';}$tme=strtotime("$im/$v/$iy");
echo date('d-m-Y',$tme),'  * *  ';
//THE ACTUAL CODE =================
    $w=(int)date('W',$tme);
    $m=(int)date('n',$tme);
    $w=$w==1?($m==12?53:1):($w>=51?($m==1?0:$w):$w);
//THE ACTUAL CODE =================
echo '<b>WEEK: ',$w,' --- ','YEAR: ',date('Y',$tme),'</b><br>';}--$iy;
echo '----------------------------------<br>';} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-01T16:06:13.493

> PHP 的 date("W") 是否有（本机）年份敏感的替代方案？

不，没有。

> 根据官方消息，一年中的第一个日历周从一年的第一个星期一开始。

我不确定你指的是什么官方消息来源。

PHP`date("W")`根据 ISO 8601 返回星期数。作为国际标准，ISO 8601 可能是许多“官方来源”之一。如果它对周数的定义不适合您的应用程序，您可以随意使用您喜欢的任何其他内容。

如果您使用“一年中的第一周”的非标准定义，或者如果您使用未被广泛认可的官方来源，则预计必须编写自己的函数来替换`date("W")`. （我很确定您需要编写一个函数。）

日期 2012-01-01 是星期日。ISO 8601、[Wikipedia](http://en.wikipedia.org/wiki/ISO_week_date#First_week)和 php 同意 2012-01-01 的 ISO 周数为 52。

ISO 8601 没有定义第 0 周。

> 所以，如果一年的第一天不是星期一，那就不是第一周！

ISO 和维基百科都没有这么说。ISO 8601 将第 1 周定义为包含一年中第一个星期四的那一周。对于 2012 年，第一个星期四是 1 月 5 日，因此第 1 周是 1 月 2 日至 1 月 8 日。2012-01-01 是上一年的最后一周，就 ISO 周而言。

如果你想要不同的东西，你可以玩算术、除法等等。（例如，尝试将 date("z") 除以 7。）或者您可以将这些数据存储在数据库中，并以您喜欢的方式安排您的星期。

如果您正在处理会计期间，我几乎肯定会将这些数据存储在数据库的表中。使用电子表格生成此类数据非常容易。

表格中的数据文本比 php 函数的文本更容易审计，无论该函数多么简单。对于任何访问它的程序，数据肯定是相同的，无论它是用什么语言编写的。（因此，如果有一天你的数据库有用 5 种不同语言编写的程序访问它，你不必编写、测试、并维护 5 个不同的函数来获取周数。）

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-26T13:57:49.267

```
$d = new DateTime('first monday january '.date('Y'));
echo $d->format("W"); 
```

# sql - 访问SQL，选择多行重复

> ID：11670767
> 
> 赞同：0
> 
> 时间：2012-07-26T13:48:44.497
> 
> 标签：sql, ms-access, duplicates

我需要选择表中的所有重复项，但是重复项必须分布在两行中。我尝试了一些导致我找到这段代码的东西：

```
SELECT builder_2, sequence, clientname_2, clientPcode_2, status
  FROM tblClient
 WHERE clientname_2 IN (SELECT clientname_2
                          FROM tblClient
                         GROUP BY clientPcode_2, clientname_2
                        HAVING (COUNT(clientPcode_2) > 1) AND (COUNT(clientname_2) > 1)
                        )
   AND clientPcode_2 IN (SELECT clientPcode_2
                           FROM tblClient
                          GROUP BY clientPcode_2, clientname_2
                         HAVING (COUNT(clientPcode_2) > 1) AND (COUNT(clientname_2) > 1)
                        )
 ORDER BY clientPcode_2, clientname_2 
```

但是，由于显而易见的原因，此代码不起作用，它会选择两个字段中的任何重复项，因此如果客户名称出现在两行中，即使邮政编码不匹配，他也会被视为“重复”。

我尝试在其中添加主键（数字和序列）的单个子选择，但是结果不是我想要的，似乎是因为 group by。我无法解释，但样本中缺少我的测试数据，因此我拒绝了该解决方案。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-26T14:15:13.647

我认为这样的事情会做你正在寻找的东西。它本质上只是将您的`WHERE IN`条款移动到`JOIN`更灵活的 a 。

```
SELECT  T1.builder_2, T1.sequence, T1.clientname_2, T1.clientPcode_2, T1.status
FROM    tblClient T1
        INNER JOIN 
        (   SELECT  clientname_2, clientPcode_2
            FROM    tblClient
            GROUP BY clientname_2, clientPcode_2
            HAVING COUNT(*) > 1
        ) AS T2
            ON T1.clientname_2 = T2.clientname_2
            AND T1.clientPcode_2 = T2.clientPcode_2 
```

**编辑**

我不确定您要如何过滤它，因此将添加一个示例来展示您可以过滤数据的 3 种方式。

样本数据（仅相关列）

```
clientname_2    |   clientPcode_2   |   Status
----------------+-------------------+--------------------
ClientA         |   M1 2AA          |   Accepted
ClientA         |   M1 2AA          |   Pending
ClientA         |   M1 2AA          |   Rejected
ClientB         |   M1 2AA          |   Accepted
ClientB         |   M1 2AA          |   Rejected
ClientC         |   M1 2AA          |   Accepted
ClientC         |   M1 2AA          |   Pending

SELECT  T1.builder_2, T1.sequence, T1.clientname_2, T1.clientPcode_2, T1.status
FROM    tblClient T1
        INNER JOIN 
        (   SELECT  clientname_2, clientPcode_2
            FROM    tblClient
            WHERE   Status NOT LIKE '%Rejected%'        -- FILTER A
            GROUP BY clientname_2, clientPcode_2
            HAVING  COUNT(*) > 1
            AND     SUM(IIF(Status LIKE '%Rejected%', 1, 0)) = 0    -- FILTER C
        ) AS T2
            ON T1.clientname_2 = T2.clientname_2
            AND T1.clientPcode_2 = T2.clientPcode_2
WHERE   Status NOT LIKE '%Rejected%'                        -- FILTER B 
```

**仅过滤 A**

这会将其限制为仅具有 2 行或更多行且状态未被拒绝的客户/邮政编码组合。状态为拒绝的行仍将被退回。

```
clientname_2    |   clientPcode_2   |   Status
----------------+-------------------+--------------------
ClientA         |   M1 2AA          |   Accepted
ClientA         |   M1 2AA          |   Pending
ClientA         |   M1 2AA          |   Rejected
ClientC         |   M1 2AA          |   Accepted
ClientC         |   M1 2AA          |   Pending 
```

**仅过滤器 B**

这将找到所有重复的客户/邮政编码组合，并仅返回状态未被拒绝的行：

```
clientname_2    |   clientPcode_2   |   Status
----------------+-------------------+--------------------
ClientA         |   M1 2AA          |   Accepted
ClientA         |   M1 2AA          |   Pending
ClientB         |   M1 2AA          |   Accepted
ClientC         |   M1 2AA          |   Accepted
ClientC         |   M1 2AA          |   Pending 
```

**过滤器 A 和过滤器 B**

这将仅限制仅过滤器的结果集以删除状态被拒绝的行

```
clientname_2    |   clientPcode_2   |   Status
----------------+-------------------+--------------------
ClientA         |   M1 2AA          |   Accepted
ClientA         |   M1 2AA          |   Pending
ClientC         |   M1 2AA          |   Accepted
ClientC         |   M1 2AA          |   Pending 
```

**过滤器 C**

这将只返回不存在行的客户/邮政编码组合，具有相同的组合，状态为 Rejected：

```
clientname_2    |   clientPcode_2   |   Status
----------------+-------------------+--------------------
ClientC         |   M1 2AA          |   Accepted
ClientC         |   M1 2AA          |   Pending 
```

# quickbooks - 尝试在 Quickbooks SDK 中获取或设置销售税国家

> ID：11670771
> 
> 赞同：0
> 
> 时间：2012-07-26T13:48:48.740
> 
> 标签：quickbooks

我正在使用 Quickbooks SDK v11 与 C# 应用程序集成。几乎一切正常，但我对销售税国家有疑问。我想将客户记录添加到 Quickbooks，但我不知道该怎么做。

要查看 Quickbooks 中已有的内容，我正在使用以下代码片段：

```
ICustomerRet ret = [My code to retrieve a customer];
ENSalesTaxCountry stc = (ENSalesTaxCountry)ret.SalesTaxCountry.GetValue(); 
```

这适用于英国客户，但如果客户的销售税国家为法国，则 GetValue() 调用会引发异常。

对 Intellisense 的一探发现，我的 ENSalesTaxCountry 类型只有三个选项：stcAustralia、stcCanada 和 stcUK - 显然不包括法国。

SDK 枚举似乎只支持这三个国家，而 Quickbooks 本身支持一大堆其他国家。

关于如何修补 SDK 或以其他方式解决问题的任何想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-06T05:21:03.267

无需依赖 intellisense 文档 - 您可以使用[IDN Onscreen Reference](https://member.developer.intuit.com/qbSDK-current/Common/newOSR/index.html)获得 SDK 查询和响应的完整描述。您显然使用的是加拿大版或英国版 QuickBooks，因此请务必选中*Allow CA 或 UK 2008+*，然后选择*CA*或*UK*以指明您正在使用的版本。

但是，一旦您这样做，您将看到 SDK 支持的唯一销售税国家是澳大利亚、英国和加拿大。为了查明 qbXML 是否返回 France 或其他未记录的值，您可以调用`ToXmlString()`ICustomerRet 接口上的方法。这将为您提供原始的 qbXML。如果存在“France”值，您应该能够看到它。

如果您发现 qbXML 支持未记录的国家/地区，您可以尝试将它们包含在客户添加请求中，但您必须自己构建 qbXML 并使用请求处理器组件而不是 QBFC 来发送消息。

您可以通过在 Intuit 开发者论坛上发帖获得更多相关信息，在那里您可以找到[英国](https://idnforums.intuit.com/categories.aspx?catid=67)和[加拿大](https://idnforums.intuit.com/categories.aspx?catid=15)QuickBooks 开发的专用论坛。事实上，现在英国论坛上正在[积极讨论销售税国家](https://idnforums.intuit.com/messageview.aspx?catid=67&threadid=17970)，但你不会觉得它令人鼓舞。

# c - c程序输出说明

> ID：11670773
> 
> 赞同：1
> 
> 时间：2012-07-26T13:48:53.020
> 
> 标签：c, multidimensional-array

我在网上的某个地方找到了这段代码。程序的输出是 string string string 有人可以解释一下为什么第一个和第三个 printf 语句打印相同的输出，即使它们的参数不同？

```
#include<stdio.h>
int main()
{
char a[2][3][3] = {'s','t','r','i','n','g'};
printf("%s\n", *a);
printf("%s\n", a);
printf("%s\n", **a);
getchar();
return 0;
} 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-26T13:53:04.877

由于这是 3 维数组（数组数组中的数组），所以`*a`, `a`, 和`**a`都指向同一个地址。前两个的类型不正确`printf()`，但在所有情况下都会被解释为扁平`char *`字符串。如果您在编译器上打开警告，您应该会看到一些关于格式字符串和类型不匹配的信息。

请记住，`*a`就像`a[0]`和`**a`就像`a[0][0]`。这可能更容易理解它们为什么引用相同的地址。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-26T13:56:14.363

您将 a`char (*)[3]`和 a`char (*)[3][3]`视为`char *`. 由于它们指向相同的地址，并且（在这种情况下）它们具有相同的内存表示，因此它们的读取方式与`char *`指向该地址的 a 相同。

这是未定义的行为；不要这样做。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-26T14:17:46.617

让我们看看`char a[2][3][3]`在内存中是如何布局的。在我的机器上是这样的：

```
0x7fffffffe220: 0x73    0x74    0x72    0x69    0x6e    0x67    0x00    0x00
0x7fffffffe228: 0x00    0x00    0x00    0x00    0x00    0x00    0x00    0x00
0x7fffffffe230: 0x00    0x00 
```

这是很自然的，因为所有数组实际上都是线性的。这些维度意味着什么，与数组索引（如`a[i][j][k]`. 但从内存的角度来看，这只是一种计算基地址偏移量的棘手方法。

现在因为您已将其定义为 3 维数组，您可能想知道 C 在初始化后将如何处理此数组：

```
{{{0x73, 0x74, 0x72}, {0x69, 0x6e, 0x67}, {0x0, 0x0, 0x0}}, {{0x0, 0x0, 0x0}, {0x0, 0x0, 0x0}, {0x0, 0x0, 0x0}}} 
```

现在让我们看看我们这里有什么......

调用 Printf 以打印字符串并通过地址传递。所以 printf 会做的是获取那个地址，并尝试**直到它看到一个 null**

每次调用`print`同一件事，因为：

```
(gdb) x/10xb **a
0x7fffffffe220: 0x73    0x74    0x72    0x69    0x6e    0x67    0x00    0x00
0x7fffffffe228: 0x00    0x00
(gdb) x/10xb *a
0x7fffffffe220: 0x73    0x74    0x72    0x69    0x6e    0x67    0x00    0x00
0x7fffffffe228: 0x00    0x00
(gdb) x/10xb a
0x7fffffffe220: 0x73    0x74    0x72    0x69    0x6e    0x67    0x00    0x00
0x7fffffffe228: 0x00    0x00 
```

最后一句忠告，这样做编码。如果您足够聪明，请仅凭指针做所有事情。但它更容易出错。因此，尽管底层将几乎可以互换地处理指针和数组，但你还是坚持你已经开始的。如果可以用手操作东西，请处理指针之类的东西。如果您想通过索引进行更严格的操作，请处理数组之类的东西。

# c# - 自动检测是否有投影仪连接电脑

> ID：11670776
> 
> 赞同：0
> 
> 时间：2012-07-26T13:49:00.860
> 
> 标签：c#, projector

我想写一个程序来自动检测是否有投影仪连接到电脑，投影仪是否打开？我不知道该怎么做。你能给我一些关于如何做的建议吗？我使用 C# 语言。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-26T13:56:02.680

也许您可以检查是否连接了另一个显示器？我不确定，但您可以从显示器中获取详细信息，看看它是否是投影仪。

可能查看这些链接：

[如何检测其他监视器是否已连接并处于活动状态](http://www.news2news.com/vfp/?example=542&ver=vcs)

看起来 WMI 可能是这样，[检测监视器是否在 c#](https://stackoverflow.com/questions/3913025/detect-if-monitor-is-on-c-sharp)

# c# - 在用户未登录时将文件复制到映射驱动器（计划任务）

> ID：11670777
> 
> 赞同：4
> 
> 时间：2012-07-26T13:49:02.990
> 
> 标签：c#, file, io, copy, console-application

我有一份工作需要连接到两个文件共享并复制一些文件以供数据馈送。

源服务器在我们域的网络上，并且工作正常。然而，远程服务器让我窒息并抛出“找不到路径的一部分”错误。我应该添加目标服务器与源服务器位于不同的域中。

从我的 app.config 文件中读取源路径和目标路径。

我认为持续映射驱动器会起作用，但由于这是一项计划任务，这似乎不起作用。我考虑过使用 NET USE，但这似乎不喜欢使用用户名和密码。

真正奇怪的是——如果我在登录机器时双击该作业，它将成功运行。

示例代码：

```
DirectoryInfo di = new DirectoryInfo(srcPath);

        try
        {

            FileInfo[] files = di.GetFiles();

            foreach (FileInfo fi in files)
            {
                if(!(fi.Name.Contains("_desc")))
                {
                    Console.WriteLine(fi.Name + System.Environment.NewLine);
                    File.Copy(fi.FullName, destPath + fi.Name, true);
                    fi.Delete();
                }
            }
        } 
```

显然这并不像复制文件那么简单。关于在 C# 4.0 中使用凭据映射驱动器的任何建议？

**编辑**

我正在尝试使用从控制台应用程序调用的批处理文件，该文件在程序运行时映射驱动器。我会确定这在早上是否有效。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-26T14:03:11.983

我建议研究适当的文件传输协议，例如 FTP。

假设这是不可能的，请尝试使用 UNC 路径，例如`\\servername\path\file.txt`. 您仍然需要凭据，但假设运行应用程序的帐户具有这些权限，您应该没问题。鉴于您提到了一个 web.config 文件，我猜这将是一个 ASP.NET 应用程序，因此我指的是在 IIS 中运行应用程序池的帐户。请参阅[http://learn.iis.net/page.aspx/624/application-pool-identities/](http://learn.iis.net/page.aspx/624/application-pool-identities/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-01T12:18:03.283

我最终做的是将驱动器映射到我的程序调用的批处理文件中。我只是启动一个`NET USE`命令并暂停几秒钟以完成映射。

看起来当用户注销时，映射驱动器周围没有上下文。

# iphone - 目标C：在特定时间录制后自动播放

> ID：11670778
> 
> 赞同：0
> 
> 时间：2012-07-26T13:49:04.263
> 
> 标签：iphone, objective-c, ios, avfoundation, openal

美好的一天，你能帮我制作一个录音项目吗？在你使用 AVAudioRecorder 录制之后，它会在特定时间**自动**播放，你能给我或给我一个与我的问题有关的链接吗？我很糟糕需要您的帮助大师，因为我是 iOS 开发的新手。提前谢谢你们。祝你有美好的一天。

这是我的代码@startrecording：

```
-(void)startRecording:(UIButton *)sender
{   //for recording

    recStopBtn.enabled=NO;
    recStopBtn.hidden = NO;
    recStopBtn.enabled =YES;
    playRecBtn.enabled = NO;
    loading.hidden = NO;
    [loading startAnimating];

    AVAudioSession *audioSession = [AVAudioSession sharedInstance];
    NSError *err = nil;
    [audioSession setCategory :AVAudioSessionCategoryPlayAndRecord error:&err];
    if(err)
    {
        NSLog(@"audioSession: %@ %d %@", [err domain], [err code], [[err userInfo] description]);
        return;
    }
    [audioSession setActive:YES error:&err];
    err = nil;
    if(err)
    {
        NSLog(@"audioSession: %@ %d %@", [err domain], [err code], [[err userInfo] description]);
        return;
    }

    recordSetting = [[NSMutableDictionary alloc] init];

    // We can use kAudioFormatAppleIMA4 (4:1 compression) or kAudioFormatLinearPCM for nocompression
    [recordSetting setValue :[NSNumber numberWithInt:kAudioFormatAppleIMA4] forKey:AVFormatIDKey];

    // We can use 44100, 32000, 24000, 16000 or 12000 depending on sound quality
    [recordSetting setValue:[NSNumber numberWithFloat:16000.0] forKey:AVSampleRateKey];

    // We can use 2(if using additional h/w) or 1 (iPhone only has one microphone)
    [recordSetting setValue:[NSNumber numberWithInt: 1] forKey:AVNumberOfChannelsKey];

    // These settings are used if we are using kAudioFormatLinearPCM format
    //[recordSetting setValue :[NSNumber numberWithInt:16] forKey:AVLinearPCMBitDepthKey];
    //[recordSetting setValue :[NSNumber numberWithBool:NO] forKey:AVLinearPCMIsBigEndianKey];
    //[recordSetting setValue :[NSNumber numberWithBool:NO] forKey:AVLinearPCMIsFloatKey];

    recorderFilePath = [NSString stringWithFormat:@"%@/MySound.caf", DOCUMENTS_FOLDER];

    NSLog(@"recorderFilePath: %@",recorderFilePath);

    NSURL *url = [NSURL fileURLWithPath:recorderFilePath];

    err = nil;

    NSData *audioData = [NSData dataWithContentsOfFile:[url path] options: 0 error:&err];
    if(audioData)
    {
        NSFileManager *fm = [NSFileManager defaultManager];
        [fm removeItemAtPath:[url path] error:&err];
    }

    err = nil;
    recorder = [[ AVAudioRecorder alloc] initWithURL:url settings:recordSetting error:&err];
    if(!recorder){
        NSLog(@"recorder: %@ %d %@", [err domain], [err code], [[err userInfo] description]);
        UIAlertView *alert =
        [[UIAlertView alloc] initWithTitle: @"Warning"
                                   message: [err localizedDescription]
                                  delegate: nil
                         cancelButtonTitle:@"OK"
                         otherButtonTitles:nil];
        [alert show];

        return;
    }

    //prepare to record
    [recorder setDelegate:self];
    [recorder prepareToRecord];
    recorder.meteringEnabled = YES;

    BOOL audioHWAvailable = audioSession.inputIsAvailable;
    if (! audioHWAvailable) {
        UIAlertView *cantRecordAlert =
        [[UIAlertView alloc] initWithTitle: @"Warning"
                                   message: @"Audio input hardware not available"
                                  delegate: nil
                         cancelButtonTitle:@"OK"
                         otherButtonTitles:nil];
        [cantRecordAlert show];

        return;
    }

    // start recording
    [recorder record];

    lblStatusMsg.text = @"Recording...";
    NSLog(@"RECORDING");
    //recIcon.image = [UIImage imageNamed:@"rec_icon.png"];
    //progressView.progress = 0.0;
    //timer = [NSTimer scheduledTimerWithTimeInterval:6.0 target:self selector:@selector(handleTimer) userInfo:nil repeats:YES];
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-26T14:41:56.480

如果您只需要在一定时间后如何让某事发生，请使用`NSTimer`. 我看到您的代码中已经注释掉了一个。

记录一定的时间使用`recordForDuration`。要手动停止录制，请使用`stop`. 要播放录音，请使用in方法的`url`属性。`AVAudioRecorder``AVAudioPlayer``initWithContentsOfURL`

所以基本上，取消注释你`NSTimer`然后做

```
AVAudioPlayer *player;
- (void) handleTimer
{
    player = [[AVAudioPlayer alloc] initWithContentsOfURL:nameOfAudioRecorder.url];
} 
```

# tcp - 发送的 60 字节的 Tcp 数据包无数据

> ID：11670779
> 
> 赞同：1
> 
> 时间：2012-07-26T13:49:07.070
> 
> 标签：tcp, wireshark

我的应用程序使用 TCP 连接到服务器并且系统工作正常。使用 Wireshark 我注意到一些 60 字节的 TCP 数据包在没有数据的情况下发送。这是正常的吗？

作为 TCP 传输和握手的一部分，是否发送了一些没有数据的数据包？

谢谢库马尔

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-26T13:53:07.177

有些`ACK`数据包不携带数据，只确认接收到的数据。使用 Wireshark 时，它应该在空包上显示这些“标志”。

为了更准确，您应该显示wireshark捕获的屏幕截图，这样我们就知道您的意思是什么大小。同时，我在这里剖析了一个 IPv4 TCP 流量的 ACK 数据包，这些是我的结果：

```
    协议大小描述
以太网协议 14 字节 2 MAC 地址（6 字节），协议类型（2 字节）
Internet 协议 20 字节 默认标头大小
      TC 协议 32 字节 默认头大小（20 字节）+ 选项（12 字节）
_____________________________________________________________________________________
            共 66 字节
       没有 EP 52 字节（可能是 OP 所说的大小）
 没有 EP，Opts 40 字节（评论中谈到的大小）

```

在我的例子中，选项是 2 个 NOP（每个 1 字节）和两个时间戳（每个 5 字节？？）。协议的顺序与 Wireshark 中的相同。

Wireshark 将信息拆分为每个字段，因此您可以查看哪些内容占用了多少空间。

# c# - 我如何只获得一个列表用户

> ID：11670780
> 
> 赞同：0
> 
> 时间：2012-07-26T13:49:07.337
> 
> 标签：c#, asp.net

我有一个问题，我没有找到解决方案:(

我有一个从 Active Directory 获取数据的 ASP.NET 应用程序。我构建了一个 3 层应用程序。我有一个模型项目，它有一个用户类（“Benutzer.cs”）和一个数据层和服务层。在我的数据层中，我获得了有关 AD 中用户的信息。我现在只想获得一个用户，我的问题是如何过滤列表中的一个用户。也许是一个愚蠢的问题，但我不知道我必须做什么：D

我的代码：

```
...

                    IUserService srv = new UserService();
                    List<Model.Benutzer> usr = srv.GetUser(Domain, null, null, UserID); 

                        // I want the one User of this List can I found this User about
                        //  Benutzer User = usr.? 

                    ... 
```

我只想要一个用户。这是我的 getUser 方法的代码：

```
public List<Benutzer> GetUser(string Domain, string Benutzer, string Werk, string GUID)
        {
            List<Benutzer> result = new List<Benutzer>();

                DirectoryEntry Entry = new DirectoryEntry("LDAP://<GUID=" + GUID + ">");

                string filter = "(&(objectClass=user)(objectCategory=person)(cn=*))"; 

                DirectorySearcher Searcher = new DirectorySearcher(Entry, filter);

                   SearchResult res = Searcher.FindOne();

                    result.Add(new Benutzer()
                    {
                        Benutzername = GetProperty(res, "sAMAccountName"),
                        Vorname = GetProperty(res, "givenName"),
                        Nachname = GetProperty(res, "sn"),
                        eMail = GetProperty(res, "mail"),
                        Unternehmen = GetProperty(res, "company"),
                        Abteilung = GetProperty(res, "Department"),
                        Raum = GetProperty(res, "physicalDeliveryOfficeName"),
                        Beschreibung = GetProperty(res, "Description"),
                        Kostenstelle = GetProperty(res, "extensionAttribute3"),
                        Telefonnummer = GetProperty(res, "telephoneNumber"),
                        Mobilnummer = GetProperty(res, "mobile"),
                        Haustelefon = GetProperty(res, "homePhone"),
                        Fax = GetProperty(res, "facsimileTelephoneNumber"),
                        Pager = GetProperty(res, "pager"),
                        Standort = GetProperty(res, "l")
                    });

            return result; 
        } 
```

塔拉索夫

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-26T13:53:02.053

如果您只关注一个用户，则更新您的`GetUser`方法以返回单个用户实例而不是列表：

```
public Benutzer GetUser(...)
{
    ....
    return new Benutzer(...);
} 
```

如果您无法控制该`GetUser`方法并且只想从返回的列表中提取用户，则调用：

```
srv.GetUser(Domain, null, null, UserID).FirstOrDefault(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-26T13:59:08.493

您的代码应该只返回列表中的一个用户。DirectorySearcher.FindOne 仅返回找到的第一个条目。

如果您不想在列表中返回它，请将返回值设为 Benutzer，然后结果也应为 Benutzer 类型：

```
public Benutzer GetUser(string Domain, string Benutzer, string Werk, string GUID)
{
    Benutzer result = new Benutzer();
    DirectoryEntry Entry = new DirectoryEntry("LDAP://<GUID=" + GUID + ">");
    string filter = "(&(objectClass=user)(objectCategory=person)(cn=*))";

    DirectorySearcher Searcher = new DirectorySearcher(Entry, filter);
    SearchResult res = Searcher.FindOne();
    result =new Benutzer()
    {
        Benutzername = GetProperty(res, "sAMAccountName"),
        Vorname = GetProperty(res, "givenName"),
        Nachname = GetProperty(res, "sn"),
        eMail = GetProperty(res, "mail"),
        Unternehmen = GetProperty(res, "company"),
        Abteilung = GetProperty(res, "Department"),
        Raum = GetProperty(res, "physicalDeliveryOfficeName"),
        Beschreibung = GetProperty(res, "Description"),
        Kostenstelle = GetProperty(res, "extensionAttribute3"),
        Telefonnummer = GetProperty(res, "telephoneNumber"),
        Mobilnummer = GetProperty(res, "mobile"),
        Haustelefon = GetProperty(res, "homePhone"),
        Fax = GetProperty(res, "facsimileTelephoneNumber"),
        Pager = GetProperty(res, "pager"),
        Standort = GetProperty(res, "l")
    };              

    return result;  
} 
```

# javascript - 单页 webapp 所需的设计建议

> ID：11670784
> 
> 赞同：4
> 
> 时间：2012-07-26T13:49:23.160
> 
> 标签：javascript, architecture, backbone.js, ember.js, single-page-application

我们需要将现有的一系列页面/工作流程屏幕更改/重写为一个标准页面。该项目本身本质上是在一个更大的现有应用程序的上下文中构建一个单一的网页应用程序。

我们的目标是尽可能地保留服务器端的实现方式。这意味着我们不会使用 REST 模型，而只是将一些表单提交到 java 后端。每个端点都将指向一个 JSP。

每个表单都将创建为一个小部件。当一个小部件提交时，它可能会影响其他需要动态更改其值的小部件的值。

似乎单页 Web 应用程序的 2 个主要选项是 Backbone.js 或 Ember.js。

鉴于我们的要求，这两个（或任何其他框架）中的哪一个最适合？还是我们应该一起采取其他一些方法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-26T14:02:08.667

你看过[AngularJS](http://angularjs.org/)吗？它更接近于 EmberJS。

我暂时推荐你 EmberJS，因为它在生态系统（路由，数据，...）方面更加成熟

骨干比这两个先例都低。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-26T13:54:26.293

要么会完成你想要的。

我偏爱 Ember，因为它提供了一个真正有助于锁定应用程序行为的路由/状态图框架。更不用说它是 MVC，它会帮助你分离你的关注点。应用程序中的每个表单或小部件都是您定义的视图，将输入绑定到模型层。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-26T14:26:06.150

您可能应该研究很多事情。

Emberjs 是 42k 压缩+gzip，而 Backbone.js 只有 5.6kb。Emberjs 在其中包含了准系统 Backbone 所没有的强大功能。

分析您是否甚至需要所有这些功能。如果您的要求仅由 Backbone 满足，IMO 您应该通过 Emberjs。无用地运送所有这些多余的东西是愚蠢的。

使用 Emberjs，您还必须使用 jQuery。不确定您是否已经在使用它。

恕我直言，如果单页 Web 应用程序非常复杂且有很多功能要求，我会使用 Emberjs，否则 Backbone 就足够了。

# c++ - 什么会导致 _mm_setzero_si128() 到 SIGSEGV？

> ID：11670785
> 
> 赞同：5
> 
> 时间：2012-07-26T13:49:24.207
> 
> 标签：c++, multithreading, wxwidgets, sse, segmentation-fault

> **可能重复：**
> [Qt、GCC、SSE 和堆栈对齐](https://stackoverflow.com/questions/2386408/qt-gcc-sse-and-stack-alignment)

我正在将模拟器从 TinyPTC 转换为 WxWidgets。一些图形例程使用 SSE 内在函数进行了优化。在 GUI 的初始化过程中，初始状态被渲染一次，所有的 SSE 例程都可以正常工作。但是，如果我稍后从事件处理程序中调用它们，我会得到一个 SIGSEGV。

起初我认为这些是一些奇怪的对齐问题，但它甚至发生在：

```
__m128i zero = _mm_setzero_si128(); 
```

当我用非优化代码替换 SSE 例程时，一切正常。

我想事件处理发生在与初始化不同的线程中。从不同线程使用 SSE 时有什么需要注意的吗？还有什么可能导致这种行为？

* * *

SIGSEGV 发生在一条`movdqa %xmm0, -40(%ebp)`指令上（其中有几个）。如果我用 编译`-O1`，`movdqa`指令会被完全优化掉，程序运行良好。正如评论中已经指出的那样，这似乎是堆栈的对齐问题。

这是 CodeLite 为编译而生成的命令：

```
g++ -c "x:/some/folder/sse.cpp" -g -O1 -Wall -std=gnu++0x -msse3
-mthreads -DHAVE_W32API_H -D__WXMSW__ -D__WXDEBUG__ -D_UNICODE
-ID:\CodeLite\wxWidgets\lib\gcc_dll\mswud -ID:\CodeLite\wxWidgets\include
-DWXUSINGDLL -Wno-ctor-dtor-privacy -pipe -fmessage-length=0 -o ./Debug/sse.o -I. 
```

有什么不寻常的吗？WxWidgets 是否有可能在某处更改对齐设置？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-26T15:26:04.670

您的堆栈指针可能未对齐。SSE 指令要求所有内存位置都是 16 字节对齐的。问题不在于`_mm_setzero_si128`指令，它只是将一个常量加载到 SSE 寄存器中，而是编译器生成的用于将该寄存器存储回堆栈上的内存的指令。

首先确保您没有使用过时版本的 GCC（旧版本在与 SSE 的堆栈对齐方面存在问题）。然后，尝试[`-mstackrealign`](http://gcc.gnu.org/onlinedocs/gcc/i386-and-x86_002d64-Options.html)为该翻译单元添加选项，这将在函数入口处强制将堆栈重新对齐为 16 字节对齐（这会增加非常小的运行时成本）。

[请参阅英特尔架构软件开发人员手册](http://www.intel.com/content/www/us/en/processors/architectures-software-developer-manuals.html/)第 2B 卷第 4-67 页，了解有关`movdqa`指令的更多详细信息以及它可以生成异常的确切条件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-26T13:54:33.633

AFAIK，wxWidgets 事件处理在主线程（GUI 线程）中运行。您应该能够通过在调试器中运行来确认这一点。调试器还应该给出一些关于段错误发生位置的提示。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-26T14:00:08.643

您可能在 SSE 例程中有错误。SSE 指令会将数据写入更大的块中。使用 SSE 将其归零时，您可能会超出数组的末尾。例如，检查归零数组是否不是 8 字节的倍数。因此，您可能希望使用未优化的指令来处理数组的任何奇数端。

# php - 通过PHP将日期作为输入参数传递给mssql存储过程

> ID：11670786
> 
> 赞同：1
> 
> 时间：2012-07-26T13:49:26.510
> 
> 标签：php, sql-server, stored-procedures

我正在尝试运行一个 mssql 存储过程，它传入一些用户输入的数据。我直接运行存储过程，它工作正常，但是当我尝试使用附加代码运行它时，我没有收到任何错误，也没有任何更新。我认为这与传入的日期有关。数据库中的日期字段定义为“日期时间”。它可能是别的东西，但其他存储过程在这个系统上以相同的方式运行都可以正常工作。

```
//initiate function
    $proc = mssql_init('usp_Update_Certificate_Customer_Details', $msdb); 

    //define parameters
    $telId = $_POST['telId'];
    $certNumber = $_POST['certNumber'];
    $custTel = $_POST['main_tel'];
    $instRef = $_POST['install_ref'];
    //$commDate = $_POST['comm_date'];
    $standards = $_POST['standards'];
    $commDate = date('Y-m-d h:i:s');
    echo 'telid: '.$telId.' certNumber: '.$certNumber.' custTel: '.$custTel.' instRef: '.$instRef.' commDate: '.$commDate.' standards: '.$standards;
    mssql_bind($proc, '@Telephone_ID', $telId, SQLINT4, false, false, 10);
    mssql_bind($proc, '@Certificate_Number', $certNumber, SQLINT4, false, false, 10);
    mssql_bind($proc, '@Customer_Telephone', $custTel, SQLVARCHAR, false, false, 10);
    mssql_bind($proc, '@Installers_Reference', $instRef, SQLVARCHAR, false, false, 10);
    mssql_bind($proc, '@Commisioned_Date', $commDate, SQLDATETIME, false, false, 10);
    mssql_bind($proc, '@Installed_to_Standards', $standards, SQLVARCHAR, false, false, 10);

    //Execute Procedure 
    $result = mssql_execute($proc); 

    //Free Memory 
    mssql_free_statement($proc); 
```

当我在字段设置为“SQLDATETIME”的情况下按上述方式运行时，我收到一个 php 警告

```
 Warning: mssql_bind() expects parameter 4 to be long, string given 
```

如果我使用设置为“SQLVARCHAR”的字段运行它，我不会收到错误，但数据库中不会发生更新

我已粘贴在下面运行的存储过程中：

```
 SET ANSI_NULLS ON

GO

SET QUOTED_IDENTIFIER ON

GO

-- =============================================

-- Author:        Phil Yeomn

-- Create date: 19-04-2008

-- Description:   Update Customer Details

-- =============================================

ALTER PROCEDURE [dbo].[usp_Update_Certificate_Customer_Details](

@Telephone_ID INT,

@Certificate_Number Int,

@Customer_Telephone Varchar(50),

@Installers_Reference Varchar(50),

@Commisioned_Date Datetime,

@Installed_To_Standards Varchar(50)

)

AS

BEGIN

SET NOCOUNT ON;

IF @Telephone_ID <> 0 AND @Customer_Telephone IS NULL

BEGIN

      DELETE FROM ssaib.dbo.Telephone_T

      WHERE Telephone_ID = @Telephone_ID

      SET @Telephone_ID = NULL

END

IF @Telephone_ID = 0 AND @Customer_Telephone IS NOT NULL

BEGIN

INSERT INTO       ssaib.dbo.Telephone_T (Telephone_Number_VC, Last_Update_DT)

VALUES               (@Customer_Telephone, GETDATE())

SET @Telephone_ID = SCOPE_IDENTITY()

END

IF @Telephone_ID = 0

BEGIN

SET @Telephone_ID = NULL

END

UPDATE      ssaib.dbo.Certificate_Returns_T

SET         Customer_Telephone_ID = @Telephone_ID,

            Installers_Reference_VC = @Installers_Reference,

            Commisioned_Date_DT = @Commisioned_Date,

            Installed_To_Standards_VC = @Installed_To_Standards

WHERE  (Certificate_Return_ID = @Certificate_Number)

END 
```

我在下面粘贴了完整的错误，第一行是传递到存储过程中的值，只是显示为一个字符串，以检查它们是否都在那里。

```
telid: 61529 certNumber: 1262789 custTel: 01423 734002 instRef: /3548 commDate: 2012-05-05 00:00:00 standards: PD 6662 and DD 243
Warning: mssql_bind() expects parameter 4 to be long, string given in /home/ssaibuk/public_html/common/modules/supplier/certificates-direct.php on line 111

Warning: mssql_execute() [function.mssql-execute]: message: Procedure or function 'usp_Update_Certificate_Customer_Details' expects parameter '@Commisioned_Date', which was not supplied. (severity 16) in /home/ssaibuk/public_html/common/modules/supplier/certificates-direct.php on line 116

Warning: mssql_execute() [function.mssql-execute]: General SQL Server error: Check messages from the SQL Server (severity 16) in /home/ssaibuk/public_html/common/modules/supplier/certificates-direct.php on line 116

Warning: mssql_execute() [function.mssql-execute]: stored procedure execution failed in /home/ssaibuk/public_html/common/modules/supplier/certificates-direct.php on line 116 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-02T09:32:38.407

信不信由你，将 DATETIME 字段设置为 VARCHAR 然后传入日期时间格式 'Ymd H:i:s' 是正确的方法。您还必须确保它后面的字段（@Installed_To_Standards）在传递时具有大写“T”，因为它区分大小写。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-26T13:56:35.503

我讨厌在 SQL Server 中处理日期对象。我为解决这个问题所做的工作是为存储过程中的每个日期输入设置 2 个参数。

基本上，一个是 VARCHAR (19)，只是一个日期字符串。另一个是真实的 DATETIME 对象，默认设置为 NULL。

我检查了 DATETIME 对象是否为 NULL；如果是，我将 VARCHAR (19) 参数转换为 DATETIME 对象。

这是我用来将 PHP 时间戳转换为 VARCHAR (19) 参数的格式化字符串的方法：`date("Y-m-d H:i:s",$timestamp);`

这是在存储过程中将 VARCHAR (19) 转换为 DATETIME 的方法：`SET @dateObject = CONVERT(VARCHAR(19),@dateString,120)`

这是一个示例存储过程：

```
CREATE PROCEDURE [dbo].[WorkingWithDateObjects] 
-- Add the parameters for the stored procedure here

@dateString [varchar] (19) = null, -- ex: '2009-07-01 00:00:00.000'
@dateObject [datetime] = null -- computed in sp from @dateString

AS

BEGIN
SET NOCOUNT ON;
SET @dateObject = CONVERT(VARCHAR(19),@dateString,120)

    SELECT *

    FROM SomeTable

    WHERE DateField >= @dateObject

  END 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-26T13:59:43.773

您正在使用 12 小时格式和`h`. 您需要`H`24 小时格式。可能不是你*唯一*的问题。但它就是其中之一。

```
$commDate = date('Y-m-d H:i:s'); 
```

我相信根本问题是`SQLFLT8`用作日期参数类型。它应该反映`datetime`数据。

# android - 手机上的 Web 应用程序兼容性

> ID：11670791
> 
> 赞同：0
> 
> 时间：2012-07-26T13:49:39.573
> 
> 标签：android, android-layout, android-emulator

我是移动开发新手。我正在为 Android 手机开发一个网页。我正在使用 User Agent 测试该页面。

Mozilla/5.0 (Linux; U; Android 2.2.1; en-ca; LG-P505R Build/FRG83) AppleWebKit/533.1 (KHTML, like Gecko) Version/4.0 Mobile Safari/533.1

这仅适用于指定的型号还是适用于所有 Android 手机？

我想知道，当移动尺寸改变时，网页对齐是否会改变？

提前致谢 。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-26T14:08:39.690

戈文德，

我想你的问题可能有几个答案。从我的角度来看，作为 .NET 开发人员，我会使用[此 CodeProject 页面](http://www.codeproject.com/Articles/213825/ASP-net-Mobile-device-detection)上描述的方法来检测客户端浏览器的“移动性”。但是，如果您严格查看用户代理，请查看“Android”一词是如何出现的。只要确保您的比较代码包含“android”这个词，没有任何其他内容并忽略大小写，您应该没问题。

只要大小发生变化，您的移动设备将尽力向您显示您要查看的页面。这可能意味着它只是“缩小”，所以一切看起来都很小，或者它可能只向您显示常规尺寸的一小部分页面。您应该研究响应式设计技术。我读过的关于这个主题的所有文档都说，加载一个单独的页面，或者至少是一组单独的 CSS，而不是你的普通网站和/或移动浏览器的 CSS，会更有益。然后，您可以针对这些设备优化页面中显示的脚本和 CSS 甚至 HTML 代码。

祝你好运，

*   马特

# objective-c - 如何在不使用 UIDocumentInteractionController 的情况下在其他特定应用程序中打开文档 - 例如 Safari 在查看 PDF 时使用 iBooks 进行操作？

> ID：11670793
> 
> 赞同：2
> 
> 时间：2012-07-26T13:49:44.080
> 
> 标签：objective-c, ios, cocoa-touch, uidocumentinteraction

如果您在 Safari 中查看 PDF，它将在工具栏中显示“在 iBooks 中打开”按钮。据我所知，iBooks 有自定义 URL 方案“itms-books:”，它允许传递文件路径。然后 iBooks 似乎能够从源应用程序复制文件（从任何地方，还是仅从个人文档文件夹？）。

这是如何运作的？我知道与其他应用程序共享文档的唯一方法是 via `UIDocumentInteractionController`，但这与默认弹出窗口相关联。有没有办法像 iBooks 那样使用自定义 URL 方案传输文件？或者这是只允许Apple使用的一些黑客（私有API）？

我能想到的另一种方法是将控制器渲染到屏幕外，循环通过它并通过代码触摸正确的目标应用程序。虽然听起来很脏......

请注意，我的意图不是在 iBooks 中打开某些内容，而是在其他人实现的另一个应用程序中打开（该应用程序将针对我提供的文件类型进行注册，并且如果需要，可能具有自定义 URL 方案）。

# c# - NameValueCollection Equals 方法是否比较两个集合是否具有相同的键值对？

> ID：11670795
> 
> 赞同：4
> 
> 时间：2012-07-26T13:49:47.933
> 
> 标签：c#, .net

如果不是，那么确定两个 NameValueCollections 对象是否相等的最佳方法是什么。

我正在使用它来确定解析为 namevaluecollection 的两个查询字符串是否具有相同的键和值，而不管顺序如何。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-28T21:59:41.027

Equals 似乎没有做你想做的事。它似乎检查引用相等，而不是它们是等价的。

以下方法应该有效（使用 System.Linq），但可能有更有效的方法：

```
public bool CompareNameValueCollections(NameValueCollection nvc1,
                                        NameValueCollection nvc2)
{
    return nvc1.AllKeys.OrderBy(key => key)
                       .SequenceEqual(nvc2.AllKeys.OrderBy(key => key))
        && nvc1.AllKeys.All(key => nvc1[key] == nvc2[key]);
} 
```

注意：如果顺序确实很重要，可以删除 OrderBy 语句。如果每个键有多个值，并且无论顺序如何，您都需要检查值是否相等，那么最后一行可以更改为：

```
 && nvc1.AllKeys
               .All(key => nvc1.GetValues(key)
                               .OrderBy(val => val)
                               .SequenceEqual(nvc2.GetValues(key)
                                                  .OrderBy(val => val))); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-26T14:09:49.923

我建议创建一个辅助方法或类似的方法来手动比较集合的键/值，以便您可以确定它们是否符合您的需要。

请记住，有很多变量取决于您的具体情况 - 如果集合具有相同的内容（键和值），但顺序不同，它们是否相等？如果内容相同（值相等）但没有引用相等，那么集合是否相等，或者它们必须是所有键和值的相同实例？等等。

因此，可能没有一个适合所有框架内置的解决方案 - 您需要编写一些代码来将两个集合与确定相等性所需的标准进行比较。

# c++ - 检查实例是否存在并在 Singleton getInstance() 中返回引用；

> ID：11670796
> 
> 赞同：0
> 
> 时间：2012-07-26T13:49:49.817
> 
> 标签：c++, singleton, instance

我正在按照[此处第一个答案中描述的方式实施 Singleton。](https://stackoverflow.com/questions/1008019/c-singleton-design-pattern/1008289#1008289)getInstance() 方法返回一个引用，但我不确定我应该如何创建我的新实例并在创建它并返回它之前检查它是否已经存在。

```
class Song {

private:
    Song song;
    Song();
    Song(Song const&); // don't implement
    void operator = (Song const&); //don't implement

public:
    static Song &getInstance();
} 
```

那么我的`getInstance();`实现应该是什么样的呢？如果歌曲成员对象已经存在，我想返回它，否则创建它然后返回它。我知道我添加的链接中有一个实现，但我不确定它是否符合我的要求，而且我不太了解它。

另外，有人可以解释这两行的用途以及为什么`=`要覆盖运算符吗？

```
 Song(Song const&); // don't implement
    void operator = (Song const&); //don't implement 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-26T13:57:51.967

实施在您引用的答案中：

```
static S& getInstance()
{
    static S    instance; // Guaranteed to be destroyed.
                          // Instantiated on first use.
    return instance;
} 
```

该实例是静态的，因此它在第一次调用`getInstance()`函数时被实例化。

有关更多信息，请参阅[此相关 SO 问题](https://stackoverflow.com/questions/246564/what-is-the-lifetime-of-a-static-variable-in-a-c-function)。

关于第二个问题的说明。第一个是复制构造函数：

```
Song(Song const&); 
```

如果要初始化一个对象以获取另一个对象的值，则需要它：

```
Song a;
Song b = a; // calls copy constructor 
```

第二个是赋值运算符：

```
void operator=(const Song&); 
```

为已经存在的实例赋值需要：

```
Song a;
Song b;
b = a; // calls assignment operator. 
```

请注意，赋值运算符的标准返回值是参考：

```
Song& operator=(const Song&); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-26T13:59:47.217

> 那么我的 getInstance(); 应该怎么做？实现是什么样的？如果歌曲成员对象已经存在，我想返回它，否则创建它然后返回它。

这正是您链接的代码所做的。引用这个答案：

```
static S& getInstance()
{
    static S    instance; // Guaranteed to be destroyed.
                          // Instantiated on first use.
    return instance;
} 
```

正如评论所说，它是在首次使用时实例化的；这就是函数范围内的静态变量的工作方式。

与实现 Singleton 反模式的这种特定尝试相关的致命陷阱是，在它被销毁后可以访问它，例如从另一个静态对象的析构函数中访问它。

> 另外，有人可以解释这两行的用途以及 = 运算符被覆盖的原因吗？

这些是为了防止复制对象。复制可以使用复制构造函数（创建新对象）或复制赋值运算符（覆盖现有对象）来完成；如果这些被声明为私有且未实现，则无法复制实例。在 C++11 中，可以通过删除它们来使其更加明确：

```
Song(Song const&) = delete;
void operator = (Song const&) = delete; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-26T14:00:22.203

为了回答第二个问题，这两行将复制构造函数和赋值运算符声明为私有，因此它们不能被调用。如果没有这两行，编译器将生成这些的默认实现，并且客户端可以创建副本，从而违背了`Singleton`模式的目的。

# .net - System.Windows.Shell 在哪里？

> ID：11670797
> 
> 赞同：3
> 
> 时间：2012-07-26T13:49:50.737
> 
> 标签：.net, namespaces

基本上，我想在里面使用一些方法`System.Windows.Shell`，但我找不到它。

我正在将 .Net 4 与带有完整 .Net 框架（不是客户端配置文件）的 Visual Studio 2010 一起使用，但我无法在添加引用对话框的 .Net 选项卡下找到它。我在哪里可以找到它？

谢谢

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-26T13:52:13.153

如果您访问 MSDN 并打开[您要查找的特定类，](http://msdn.microsoft.com/en-us/library/system.windows.shell.jumpitem.aspx)它会告诉您要在 .NET 选项卡中添加什么 DLL，以便显示名称空间。

例如：

> # JumpItem 类
> 
> **命名空间：** System.Windows.Shell
> **程序集：** PresentationFramework（在 PresentationFramework.dll 中）

因此，您需要`PresentationFramework`在 .NET 选项卡中添加引用。

# ios - 精灵的 iOS 性能

> ID：11670798
> 
> 赞同：1
> 
> 时间：2012-07-26T13:49:53.537
> 
> 标签：ios, memory-management, cocos2d-iphone, ccsprite

我正在使用 cocos2d 为游戏中的战斗场景制作健康栏。如果我在网页设计中这样做，那么最优化的方法就是我想要的颜色的 1px（高度）图像，水平重复到我需要的程度。iPhone的情况也是这样吗？

在性能方面，拥有 1 个小精灵并重复多次，直到达到我需要的宽度会更好吗？ ?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-26T16:04:55.857

从 1px by height 图像开始。设置 scale x 属性以适当地缩放它以对应于健康。我很确定你可以将精灵缩放到你想要的任何东西，并且仍然会使用相同数量的内存（不要引用我的话）。

尽管如此，一个全尺寸的精灵不会对性能产生很大影响，所以如果你想使用一个完整的图像（使它比一个盒子更详细），那么它可能没问题。

如果您想使用全尺寸图像并且仍然担心性能，请将其与所有其他精灵一起放入纹理图集（精灵表）中（因为您正在使用纹理图集（精灵表），对吗？;)）和使用 CCBatchNode 渲染它。

希望这可以帮助。

# objective-c - Cocoa 方法命名约定

> ID：11670801
> 
> 赞同：0
> 
> 时间：2012-07-26T13:50:15.377
> 
> 标签：objective-c, cocoa, naming-conventions

以下哪个命名更“正确”？

```
- (void) forPrimaryKeySetValue:(id)value 
```

或者

```
- (void) setValueForPrimaryKey:(id)value 
```

它的作用：它是一个 NSManagedObject 类别方法，它在实体的 userInfo 中搜索键 primaryKey，如果它是 pressend，则将对应（primaryKey）属性的值设置为 value

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-26T13:53:47.857

该方法有什么作用？第二个是名为 的 ivar 的默认设置器名称`valueForPrimaryKey`。如果您所做的只是设置主键，则可能应该调用该方法`setPrimaryKey:`- valueFor 是多余的。

我不完全按照您对该方法的作用的解释，但我猜您正在设置它，以便您可以在任何托管对象上调用此方法，如果它存在，它将设置主键值，否则它将安全失败？在那种情况下，像`safeSetPrimaryKey:`？我不确定这种方法的约定，但如果它只是一个美化的设置器，你不应该偏离标准太远，而且价值的东西仍然令人困惑。

# ms-access - 如果您尝试更新 JET 中的锁定记录，会发生什么情况？

> ID：11670804
> 
> 赞同：0
> 
> 时间：2012-07-26T13:50:19.230
> 
> 标签：ms-access, dao, jet, rowlocking, database-locking

如果我使用 JET/DAO 在使用锁定的 MDB 数据库上打开记录集`dbPessimistic`，如果另一个用户当时尝试更新该记录集中的行会发生什么情况？会出现错误，还是 JET/DAO 会一直尝试直到解锁行？

# php - 在指定范围内猜测用户密码需要多长时间？

> ID：11670811
> 
> 赞同：0
> 
> 时间：2012-07-26T13:51:15.197
> 
> 标签：php, security, hash

我正在使用 crypt 函数在 php 中使用河豚。我想知道如果密码范围是 0001 - 9999，猜测用户密码需要多长时间？

我是否应该为用户实现另一个输入密码值。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-26T14:02:34.750

这基本上为您提供了 10,000 种组合，并且猜测它会非常快（即时）。

现在检查这个旧表要快得多[密码恢复速度](http://www.lockdown.co.uk/?pg=combi)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-26T13:55:39.963

在任何现代计算机上测试所有大小为 4 的数字密码都*非常快。*您应该确保您的密码由**不同的字符**（大写/小写字母、标点符号、特殊字符）组成，并且**更长**（至少 10 个字符，甚至更多，具体取决于系统的敏感性）。

请参阅Jeff Atwood 关于该主题的[这篇非常有趣的文章](http://www.codinghorror.com/blog/2012/04/speed-hashing.html)。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-26T14:10:26.163

假设您想出了哈希速度和可用性的良好组合。

```
more hashing time =~ more brute-force resilient 
```

但同时

```
more hashing time =~ less usability 
```

假设您做出了一些妥协，并认为密码检查逻辑可以占用`5`几秒钟的时间（您通过大量迭代来做到这一点，这意味着您对密码进行了多次哈希处理）。

中断时间*（以小时为单位）* = 组合 * hashing_time *（以秒为单位）* / 3600（+ 查找时间，微不足道）

让我们尝试一下

休息时间*（小时）* = 9999 * 5 / 3600 = 大约 13 小时 48 分钟

所以底线，听从[@Wookai](https://stackoverflow.com/users/56761/wookai)的建议，不要使用短数字密码。

# sql-server - 使用合并和动态 SQL 仅更新更改的值

> ID：11670815
> 
> 赞同：-1
> 
> 时间：2012-07-26T13:51:28.720
> 
> 标签：sql-server, coalesce

我创建了一个存储过程来仅更新表中已更改的行

我使用了**SQLSERVER** `coalesce`函数。

```
CREATE PROCEDURE update_only_changed

            @FName varchar(50) = NULL,

            @LName varchar(50) = NULL,

            @CUST_DB VARCHAR(20) 

AS

BEGIN

            DECLARE @QUERY VARCHAR(255)

            SET @QUERY = 'UPDATE ' + @CUST_DB + '..people SET LastName = COALESCE(@LName, LastName) WHERE id = 1'

            EXEC (@QUERY)

END

GO 
```

**一些注意事项**

*   是动态sql

*   数据库的名称在过程中作为参数传递

所以，当我运行 sql 时，我有两种情况：

*   `EXEC(@ QUERY)`：

    ```
    I get the error saying: Must declare the scalar variable "@ LName".
    it does not interpret the variable that the command coalesce 
    ```

*   `EXEC @QUERY (without parentheses)`

    ```
     I get the error saying: The database 'UPDATE CUSTOMER' does not exist. Make sure the name is spelled correctly. 
    ```

我怎样才能让它发挥作用？

请记住，如果使用更新语句静态运行过程，而不使用 EXEC，它可以工作

```
UPDATE CUSTOMER..people SET LastName = COALESCE(@LName, LastName) WHERE id = 1 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-26T13:53:44.840

第一个不起作用，因为在 exec 的上下文中没有变量 @Lname - 它只存在于您的过程的范围内。`sp_executesql`您需要使用而不是 exec将其传递到查询范围

```
exec sp_executesql @query, N'@LName varchar(50)', @Lname 
```

**但**

我不建议做任何这样的事情。

# c# - 如何使用 Open XML 刷新 Excel 2010 的数据透视缓存

> ID：11670816
> 
> 赞同：1
> 
> 时间：2012-07-26T13:51:29.253
> 
> 标签：c#, openxml

我正在制作一个使用**Open XML**进行一些数据处理的**Excel 工具。**在这种情况下，我需要在插入数据后通过刷新数据**透视表以编程方式刷新数据透视表****Cache**。我可以通过**Microsoft.Office.Interop.Excel 程序集**来做到这一点，但打开大文件需要时间，所以我想通过使用 Open XML 来做到这一点。

 ******您知道如何使用 Open XML 执行此操作吗？

请尽快回复。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-18T12:31:28.297

使用 SDK 在这里查看答案： [Excel "Refresh All" with OpenXML](https://stackoverflow.com/questions/3903697/excel-refresh-all-with-openxml)

直接编辑 ooxml 以填充模板时 xlsx：
编辑 pivotcache xml 文件：**xl/pivotCache/pivotCacheDefinition*.xml**
将属性值：**refreshOnLoad="1"**
添加到节点：**pivotCacheDefinition**

```
<pivotCacheDefinition 
    xmlns="http://schemas.openxmlformats.org/spreadsheetml/2006/main" 
    xmlns:r="http://schemas.openxmlformats.org/officeDocument/2006/relationships" 
    r:id="rId1" 
    refreshOnLoad="1"> 
```******

# mysql - PDO fetchColumn() 忽略 SQL“LIMIT”？

> ID：11670819
> 
> 赞同：0
> 
> 时间：2012-07-26T13:51:42.380
> 
> 标签：mysql, pdo, limit

为什么 PDO 的 fetchColumn() 忽略我查询的 SQL LIMIT 部分？

$result 在数据库中找到 2 条记录时返回“2”？

谢谢！

```
$sql = "SELECT count(*) FROM table WHERE Username = ? and 
Password = ? LIMIT 1";

$q = $this->connection->prepare($sql);
$q->execute(array($user, $pwd));

$result = $q->fetchColumn();
echo $result; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-26T13:55:47.267

因为在数据库中找到的记录数的计数可能是 2，但是该聚合函数只需要一行来返回结果。这里的限制实际上是没有用的。

换句话说，在您的服务器上运行没有 LIMIT 的查询，您将看到一个值为 2 的单行结果集（如果表中有两个这样的用户/密码组合）。

# android - 如何将 ac 结构从本机 c 库传递到 java 并访问其元素

> ID：11670824
> 
> 赞同：1
> 
> 时间：2012-07-26T13:51:52.223
> 
> 标签：android

我在我的本地 c 库中定义了一个结构，我想将它传递给 java.util. 在java中，我想访问这个结构元素。这个怎么做。谁能用一个同时显示 c 和 java 代码的例子来解释我。我一定会感谢您的帮助。请尽快帮助我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-26T15:41:44.183

在您的 C 代码中创建一个 Java 对象，并使用 C 结构中的数据填充它。[有关如何在 JNI 中将 C 结构来回传递给 Java 代码，](https://stackoverflow.com/questions/3923299/how-to-pass-c-structs-back-and-forth-to-java-code-in-jni)请参阅已接受的答案？更多细节。

# c# - 快速读取图像标题

> ID：11670825
> 
> 赞同：0
> 
> 时间：2012-07-26T13:51:54.487
> 
> 标签：c#, image, image-processing, tiff

需要将大量各种图像合并到 tiff 文件中。原始图像可以有不同的编码、分辨率、颜色深度等。如果我在添加到 tiff 之前将它们解析为位图（img = Bitmap.FromStream()），那么它将花费太多时间。另一种方法是仅解析标题，将它们复制到相应的 tiff 页面，然后复制编码数据（如 jpeg、png...）而不重新编码。
什么是快速解析所有图像标题的好方法？有哪些图书馆？
谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-26T14:15:06.377

TIFF 不是一种旨在处理内部其他图像格式的容器格式。您必须对图像进行解码，然后使用支持 TIFF 的图像编码器对其进行重新编码。

唯一的例外是可以包含的 JPEG - 使用 TIFF 6.0 引入的 JPEG-in-TIFF 方法：[http ://www.remotesensing.org/libtiff/support.html](http://www.remotesensing.org/libtiff/support.html)

如果您只想将图像存储在容器中，最好将它们保存在 ZIP 文件中（禁用压缩）并为每个图像添加一个元数据文件（例如 XMP）。那可能更适合你。

# android - fragmentTransaction.hide 和 setVisibility(GONE) 之间的区别；

> ID：11670826
> 
> 赞同：8
> 
> 时间：2012-07-26T13:51:58.497
> 
> 标签：android, android-layout, android-fragments

`GONE`将包含片段的布局可见性设置为 addToBackStack和`fragmentTransaction.hide(fragment)`addToBackStack之间是否有任何主要区别？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-29T18:20:13.747

`fragmentTransaction.hide(fragment)`做

```
public void hideFragment(Fragment fragment, int transition, int transitionStyle) {
    if (DEBUG) Log.v(TAG, "hide: " + fragment);
    if (!fragment.mHidden) {
        fragment.mHidden = true;
        if (fragment.mView != null) {
            Animator anim = loadAnimator(fragment, transition, true,
                    transitionStyle);
            if (anim != null) {
                anim.setTarget(fragment.mView);
                // Delay the actual hide operation until the animation finishes, otherwise
                // the fragment will just immediately disappear
                final Fragment finalFragment = fragment;
                anim.addListener(new AnimatorListenerAdapter() {
                    @Override
                    public void onAnimationEnd(Animator animation) {
                        if (finalFragment.mView != null) {
                            finalFragment.mView.setVisibility(View.GONE);
                        }
                    }
                });
                anim.start();
            } else {
                fragment.mView.setVisibility(View.GONE);
            }
        }
        if (fragment.mAdded && fragment.mHasMenu && fragment.mMenuVisible) {
            mNeedMenuInvalidate = true;
        }
        fragment.onHiddenChanged(true);
    }
} 
```

所以它的作用几乎相同，但它

*   支持动画
*   支持backstack
*   设置`View`返回的 from`Fragment#onCreateView()`而`GONE`不是容器
*   如果您在此处分段添加某物，请注意菜单

# android - Android中的Html5拖放

> ID：11670828
> 
> 赞同：7
> 
> 时间：2012-07-26T13:52:08.720
> 
> 标签：android, html

我尝试使用 HTML5 在 Android 浏览器中实现简单的拖放操作。当我尝试拖动一个对象时，只有屏幕滚动，我不能在其中拖动任何东西。有没有办法做到这一点？

HTML在这里：

```
 For drag:   

<div id="an-obj-12" draggable="true" ondragstart="drag(event)" dropzone="copy">42a</div>
<div id="an-obj-13"  draggable="true" ondragstart="drag(event)" dropzone="copy">4a</div>
<div id="an-obj-14"  draggable="true" ondragstart="drag(event)" dropzone="copy">14</div>

For drop:

<div id="an-obj-7" ondrop="drop(event,'12a^2')" ondragover="allowDrop(event)"></div>
<div id="an-obj-8" ondrop="drop(event,'42a')" ondragover="allowDrop(event)"></div>
<div id="an-obj-9" ondrop="drop(event,'4a')" ondragover="allowDrop(event)"></div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-03-20T09:54:06.297

Android 浏览器不支持 HTML5 拖放：http: [//caniuse.com/#search=drag](http://caniuse.com/#search=drag)

您可以使用第三方 js 库来模拟它，例如 jquery ui

但是您必须添加一个插件才能在移动设备上启用拖放此 jquery ui 插件在 Android 浏览器上运行良好：http: [//touchpunch.furf.com/](http://touchpunch.furf.com/)

玩得开心

# java - Perl 到 Java 的翻译

> ID：11670829
> 
> 赞同：0
> 
> 时间：2012-07-26T13:52:10.120
> 
> 标签：java, perl

我想知道是否有人可以帮助解释以下代码片段中发生的事情，因为我正在尝试翻译成 Java，但我的 Perl 知识很少。

```
sub burble {
    my $cw = "%START%";
    my $sentence;
    my $nw;
    my ( $score, $s, $roll );
    while ( $cw ne "." )    # while we're not at the end
                            # of the sentence yet
    {
        $score = 0;

        # get total score to randomise within
        foreach $s ( values %{ $dict{$cw} } ) {
            $score += $s;
        }

        # now get a random number within that
        $roll  = int( rand() * $score );
        $score = 0;
        foreach $nw ( keys %{ $dict{$cw} } ) {
            $score += ${ $dict{$cw} }{$nw};
            if ( $score > $roll )    # chosen a word
            {
                $sentence .= "$nw " unless $nw eq ".";
                $cw = $nw;
                last;
            }
        }
    }
    return $sentence;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-26T14:41:54.607

```
foreach $s (values %{$dict{$cw}}) {
    $score += $s;
} 
```

就好像

```
Map<String, Map<String, int>> dict = ...;
...
int score;
Map<String, int> mcw = dict.get( cw );

for ( mcw.values() : int s) {
    score += s;
} 
```

和

```
foreach $nw (keys %{$dict{$cw}}) 
```

就好像

```
KEY_LOOP:
for ( mcw.keys() : String nw ) {
    ...
} 
```

最后，

```
if ($score > $roll) # chosen a word
{
    $sentence .= "$nw " unless $nw eq ".";
    $cw = $nw;
    last;
} 
```

就好像：

```
if ( score > roll ) { // a break case
   if ( !nw.equals( "." )) { 
       sentence = sentence + nw + " ";
   }
   cw       = nw
   break KEY_LOOP;
} 
```

# fullcalendar - 如何将 Google 日历/FullCalendar 事件显示为链接

> ID：11670834
> 
> 赞同：0
> 
> 时间：2012-07-26T13:52:35.330
> 
> 标签：fullcalendar, google-calendar-api

谷歌日历中有没有办法让一个事件成为可点击的链接，特别是在 FullCalendar 中显示？

如果没有，有没有办法让从 Google 日历中提取的 FullCalendar 中的事件成为可点击的链接？

从本质上讲，我需要从 Google 日历中提取并显示在 FullCalendar 中的每个事件作为指向不同页面的链接。有没有简单的方法可以做到这一点？

预先感谢您的任何帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-26T14:09:35.937

您可以将`URL`事件对象的属性设置为您想要的任何 url。`eventRender`或者，您可以在使用回调渲染之前拦截事件对象，`url`然后编辑属性。

# teamcity - 使用 TeamCity 更改远程 app.config

> ID：11670835
> 
> 赞同：0
> 
> 时间：2012-07-26T13:52:37.453
> 
> 标签：teamcity

我有一个测试库，它读取一个 app.config 配置键值，用于从构建到构建的测试运行（嵌入了版本号的应用程序窗口）。另一个键也会根据测试将要命中的环境（开发/测试等）而变化。

例如。键="AppVersion" 值="AppVersion (1.0.0.19)" 键="AppSubVersion" 值="Ver (1.0.0)" 键="DataDirectory" 值="数据-开发"

目前，在本地机器上，这不是问题，因为我手动将它们从运行更改为运行。但是，我们现在正在考虑转移到自动运行场景，在该场景中，测试作为自动测试运行的一部分启动，TeamCity 服务器将在远程机器上启动测试。非常感谢您回答两个问题

1 - TeamCity 有没有办法更改位于远程计算机上的 app.config 文件上的特定键？

2 - 如果没有，实现这一目标的最佳方法是什么？

谢谢 ！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-26T20:15:57.450

我认为 TeamCity 无法为您做到这一点。但是，如果您让 TeamCity 为您运行 nant 脚本，您可以使用 XmlPoke 替换配置文件中的文本，您可以使用当前 Teamcity 内部版本号进行版本标记。如果你想使用 ant，我认为 ant 有类似的东西。

# c++ - 使用winapi从桌面打开C++文件

> ID：11670836
> 
> 赞同：-1
> 
> 时间：2012-07-26T13:52:37.780
> 
> 标签：c++, file, winapi, message

我制作了一个可以编辑和打开 .BMP 文件的程序，但您只能从程序中打开这些文件。

如果我通过单击文件并选择我自己的程序来使用程序打开文件，它只会打开我的程序并且什么都不做。

如何以这种方式打开文件，或者我必须处理哪些消息。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-26T13:54:41.187

默认情况下（意味着您的程序没有安装请求 DDE 关联的注册表项），文件名将在命令行上传递。您可以使用该[`GetCommandLine`](http://msdn.microsoft.com/en-us/library/windows/desktop/ms683156.aspx)功能来检索它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-26T13:59:46.563

当您通过“打开方式...”上下文菜单项打开 .bmp 文件时，将使用等于文件名的命令行参数调用您的程序。

因此你应该解析你的命令行参数

# mysql - MySQL 手动更改跟踪

> ID：11670837
> 
> 赞同：0
> 
> 时间：2012-07-26T13:52:40.140
> 
> 标签：mysql, sql, database, relational-database, change-tracking

我正在尝试使用 MySQL 实现数据库更改控制。为了控制插入和更新，我想使用类似于 SQLServer 中的 TIMESTAMP 字段（当对一行进行插入/更新时自动递增的列）。MySQL中是否存在类似的东西？如果想用 MySQL 做到这一点，我唯一的方法是编写一个更新触发器，另一个插入数据库的每个表中？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-26T13:55:01.660

是的，您可以像这样创建列

```
CREATE TABLE t1 (
  created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
  updated_at TIMESTAMP DEFAULT ON UPDATE CURRENT_TIMESTAMP
); 
```

该`created_at`字段在插入时设置，并且该`updated_at`字段在更新时自动更新。

[文档在这里](http://dev.mysql.com/doc/refman/5.0/en/timestamp-initialization.html)

# grid - Ext JS 4.1 GroupHeaderTpl 内部的条件

> ID：11670840
> 
> 赞同：0
> 
> 时间：2012-07-26T13:52:51.130
> 
> 标签：grid, extjs4, grouping, extjs4.1

我需要将 groupHeaderTpl 更改为 groupingField 值。就我而言，我通过一个布尔字段进行分组。我怎样才能做到这一点？

```
groupHeaderTpl: '{name}=="true" ? Shared : Your own'

groupHeaderTpl: '[{name}=="true" ? Shared : Your own]' 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-23T18:45:57.330

如果以下答案对您没有帮助，则可以使用以下技术进行调试：

在你的页面中引入一个调试函数“objectToString”：

```
function ObjectToString(object) {
    var string;
    var name;

    for (name in object) {
        if (typeof object[name] !== 'function') {
            string += "{\"" + name + "\": \"" + object[name] + "\"}<br />";
        }
    }

    return string;
} 
```

然后，使用此函数转储 values.rows[0] 对象中的属性，以便您可以查看所需的列/值是否可用于测试：

```
var groupingFeature = Ext.create('Ext.grid.feature.Grouping',{
groupHeaderTpl: 'Debug: {[ObjectToString( values.rows[0] ) ]}',
    hideGroupedHeader: true
}); 
```

当它用于调试下面的示例时，您可以获得以下调试输出：

![调试输出示例](../Images/1fb5f790bdeb5345f33b68ac4186dfa2.png)

所以，从这里你可以看到，通过设置我分组的列的“id”属性，这使得列名在 values.rows 数组中可用，所以我可以测试它的值。

再次，希望这种技术和下面的原始示例有所帮助。

==== 调试代码之前的原始示例 ====

这是一个从 Sencha 网格分组示例稍微修改的示例。（参见[sencha 网站，网格分组示例](http://dev.sencha.com/deploy/ext-4.1.0-gpl/examples/grid/groupgrid.html)）。

```
var groupingFeature = Ext.create('Ext.grid.feature.Grouping',{
groupHeaderTpl: 'Cuisine: {[ values.rows[0].cuisine == "American" ? "North American" : values.rows[0].cuisine ]}',
    hideGroupedHeader: true
});

var grid = Ext.create('Ext.grid.Panel', {
    renderTo: Ext.getBody(),
    collapsible: true,
    iconCls: 'icon-grid',
    frame: true,
    store: Restaurants,
    width: 600,
    height: 400,
    title: 'Restaurants',
    resizable: true,
    features: [groupingFeature],
    columns: [{
        text: 'Name',
        flex: 1,
        dataIndex: 'name'
    },{
        text: 'Cuisine',
        id: 'cuisine',    // NOTE: you must assign an id here
        flex: 1,
        dataIndex: 'cuisine'
    }],
    fbar  : ['->', {
        text:'Clear Grouping',
        iconCls: 'icon-clear-group',
        handler : function(){
            groupingFeature.disable();
        }
    }]
}); 
```

要记住的事情是：

1.  在列定义中设置“id”属性，否则您将无法在 groupHeaderTpl 中引用这些列
2.  在 groupHeaderTpl 中使用 {[ ... ]} 运行一些任意 javascript 来执行您的检查
3.  使用 value.rows[0].FIELDNAME 从组中的第一行中提取您想要的列值

我希望这对你有帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-09-28T21:10:07.507

您可能想尝试以下方法：

```
groupHeaderTpl: '{[values.groupValue ? "Shared" : "Your own"]}' 
```

这适用于我的 Ext JS 4.2（虽然我还没有用 4.1 验证它，但[文档](http://docs.sencha.com/extjs/4.1.3/#!/api/Ext.grid.feature.Grouping-cfg-groupHeaderTpl)也描述了 groupValue）。

高温高压

# ios - 位置服务不更新 iPad 3 上的标题

> ID：11670849
> 
> 赞同：1
> 
> 时间：2012-07-26T13:53:10.423
> 
> 标签：ios, ipad, core-location

我刚刚开始开发导航应用程序并且很早就碰壁了。我正在尝试获取磁力计数据，但由于某种原因，位置管理器没有通过委托呼叫向我发送数据。我正在获取位置更新，但没有获取航向更新。我已经阅读了所有文档，但无法弄清楚......这是一件简单的事情，这意味着我可能遗漏了一些简单的东西。这是我用来初始化位置管理器的代码：（注意，我使用的是 4G 的 iPad 3，所以它确实有 GPS 芯片组。可能没关系，但我还应该提到我使用的是 ARC。）

```
- (void)viewWillAppear:(BOOL)animated {

if (!self.locationManager) {
    self.locationManager = [[CLLocationManager alloc] init];
    self.locationManager.delegate = self;
    self.locationManager.distanceFilter = kCLDistanceFilterNone;
    self.locationManager.desiredAccuracy = kCLLocationAccuracyBestForNavigation;
    [self.locationManager startUpdatingLocation];
    if ([CLLocationManager headingAvailable]) {
        self.locationManager.headingFilter = kCLHeadingFilterNone;
        [self.locationManager startUpdatingHeading];
        NSLog(@"Start updating heading.");
    }
}

[super viewWillAppear:animated]; 
```

}

谢谢你的帮助！！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-26T14:01:10.603

好吧，我没疯……在墙上撞了几个小时后，我想，嘿，也许不是我，也许是 iPad……果然，重新启动 iPad 解决了我的问题…… .如果你遇到同样的问题，请给老女孩重新启动....

# hibernate - 带有注释的 Hibernate 数据库视图

> ID：11670852
> 
> 赞同：2
> 
> 时间：2012-07-26T13:53:28.203
> 
> 标签：hibernate, hibernate-annotations

我只是尝试使用 Hibernate Annotaions 创建一个 DB 视图，看起来像这样

```
@Entity
@Subselect(value = "SELECT id, [..] FROM [] WHERE [..]")
@Synchronize({ "t1", "t2", "t3" })
public class SomeViewImpl implements SomeView {

    @Id
    protected String id;
[..] 
```

然后我将它添加到 sessionFactory 中的注释类列表中（我正在使用 Spring）并尝试运行它。

我没有收到任何错误，但没有在数据库上创建视图（实际上是 PostreSQL）。尽管我无法在文档中找到类似的内容，但可能是 Hibernate 不应该在数据库中创建视图。

所以我有一个问题：有没有办法强制 Hibernate 在我的数据库中创建一个视图？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-24T07:39:35.170

不幸的是，没有办法让 Hibernate 在数据库上为您创建视图。我们的解决方案是在数据库上手动创建视图

# android - 以底部中心为轴心点缩放图像视图

> ID：11670862
> 
> 赞同：1
> 
> 时间：2012-07-26T13:54:05.077
> 
> 标签：android

目前，我正在使用以下 XML 文件来制作动画`ImageView`：

```
<?xml version="1.0" encoding="utf-8"?>
<set xmlns:android="http://schemas.android.com/apk/res/android" 

android:interpolator="@android:anim/anticipate_overshoot_interpolator">
       <scale
        android:fromXScale="0.5"
        android:fromYScale="0.5"
        android:toXScale="1.0"
        android:toYScale="1.0"
        android:pivotX="1.0"
        android:pivotY="1.5"

        android:duration="500"></scale>
</set> 
```

但比例从左上角开始。我想从底部中心开始秤。我玩弄了它的一些价值，但我仍然无法实现它。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-26T14:21:51.220

试试这些值

```
<scale
    android:fromXScale="0.5"
    android:fromYScale="0.5"
    android:toXScale="1.0"
    android:toYScale="1.0"
    android:pivotX="50%"
    android:pivotY="100%"

    android:duration="500"></scale> 
```

# html - CSS 中心文本（在列表项网格中）

> ID：11670863
> 
> 赞同：1
> 
> 时间：2012-07-26T13:54:16.077
> 
> 标签：html, css

我有一些简单的 css，它可以制作出漂亮的三乘三网格。我似乎无法做的是使文本居中（垂直和水平）。这是一个[JSFiddle](http://jsfiddle.net/ashanova/a735p/)。

```
 #card {
            width: 300px;
            height: 300px;
            border: 1px solid #ccc;
            border-width: 0 1px 1px 0;
        }

        #card ul {
            padding: 0;
            margin: 0;
        }

        #card li {
            float: left;
            border: 1px solid #ccc;
            border-width: 1px 0 0 1px;
            width: 99px;
            height: 99px;
        }​ 
```

我试过垂直对齐但无济于事。我需要跨越每个列表项吗？我跟不上css！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-26T13:56:24.880

将`line-height: 99px;`（垂直对齐）和`text-align: center;`（水平对齐）添加到#card li，如下所示：

```
#card li {
    float: left;
    border: 1px solid #ccc;
    border-width: 1px 0 0 1px;
    width: 99px;
    height: 99px;
    line-height: 99px;
    text-align: center;
} 
```

看到这个[小提琴](http://jsfiddle.net/c_kick/GjFAc/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-26T14:00:46.923

如果您可以将 HTML 更改为单独的列表，我会[建议](http://jsfiddle.net/a735p/12/)

如果没有，您知道只会使用一行`line-height`

如果以前的建议没有帮助，`span`那就去做吧`display: table-cell;`

# ms-access - 错误转到不工作

> ID：11670870
> 
> 赞同：1
> 
> 时间：2012-07-26T13:54:53.637
> 
> 标签：ms-access, vba, ms-access-2003

我在表单上有一个简单的命令按钮，“单击”事件过程用于将 Excel 文件逐行导入数据库，作为自定义过程的一部分。我已经设置了我的：

```
On Error GoTo DtUplErr 
```

在程序开始时，还检查了 VBA 选项以确保“中断未处理的错误是我的选项”，但它根本不会移动到我的句柄书签，而是抛出标准运行时错误提示。

实际过程本身使用工作区来执行更新（不确定这是否会导致问题）

我遇到的错误是 3022（重复值），我确实打算查看并捕获它，因此这不是一个糟糕的数据问题。

我已经尝试将我所有的对象导入一个干净的 mdb 并且仍然没有运气，我真的很困惑。

有什么建议么？

完整代码（金额道歉）

```
Private Sub cmdSelect_Click()

'MS Excel
Dim xlApp       As Object 'Late Binding
Dim xlWrkBk     As Object
Dim xlWrkSt     As Object
Dim lngRow      As Long
Dim lngRowCnt   As Long

'Recordsets/Workspace
Dim WkSp        As DAO.Workspace 'Transaction Buffer
Dim rsMs        As DAO.Recordset 'Master
Dim rsSu        As DAO.Recordset 'Supplier
Dim rsAd        As DAO.Recordset 'Address
Dim rsAs        As DAO.Recordset 'Asset

'Misc
Dim strFile     As String
Dim dblMPRN     As Double
Dim lngPerc     As Long

On Error GoTo DtUplErr

Loading 1
strFile = DataUploadDialog
If strFile & "" = "" Then Exit Sub 'Quit if no file selected

'Open up the file
Set xlApp = CreateObject("Excel.Application")
Set xlWrkBk = xlApp.Workbooks.Open(strFile)
Set xlWrkSt = xlWrkBk.Worksheets(1)

Forms!frmUpload!cmdHidden.SetFocus
DoCmd.Hourglass -1

'Validate file format before import
With xlWrkSt
    If .Range("A1") <> "MPRN" _
    Or .Range("B1") <> "Notification" _
    Or .Range("C1") <> "Asset" _
    Or .Range("D1") <> "Reference No." _
    Or .Range("E1") <> "WMS Job No." _
    Or .Range("F1") <> "Meter Worker" _
    Or .Range("G1") <> "Job Status" _
    Or .Range("H1") <> "Date" _
    Or .Range("I1") <> "Time" _
    Or .Range("J1") <> "Sales district" _
    Or .Range("K1") <> "Customer" _
    Or .Range("L1") <> "Location" _
    Or .Range("M1") <> "Additional Info" _
    Or .Range("N1") <> "Street" _
    Or .Range("O1") <> "Dependent Locality" _
    Or .Range("P1") <> "Post Town" _
    Or .Range("Q1") <> "Postal Code" _
    Or .Range("R1") <> "Serial number" _
    Or .Range("S1") <> "Cur. Serial No." _
    Or .Range("T1") <> "Manufacturer Code" _
    Or .Range("U1") <> "Model Code" _
    Or .Range("V1") <> "Year of Manufacture" _
    Then
        xlWrkBk.Close
        xlApp.Quit
        Set xlApp = Nothing
        Set xlWrkBk = Nothing
        Set xlWrkSt = Nothing

        DoCmd.Hourglass 0

        MsgBox "Selected file is not in the correct format, please ensure " & _
               "the original column headers have not been moved/renamed" & _
               vbCr & vbCr & _
               "For further assistance please contact app support", 48
        Exit Sub
    End If
End With

Forms!frmUpload!cmdSelect.Enabled = 0
Forms!frmUpload!cmdClose.Enabled = 0

'Get total number of rows in file
lngRow = 1

Do Until xlWrkSt.Cells(lngRow, 1).Value & "" = ""
    lngRow = lngRow + 1
Loop

lngRowCnt = lngRow - 2

'Start writing to the tables
Set WkSp = DBEngine.Workspaces(0)

WkSp.BeginTrans

    Set rsMs = CurrentDb.OpenRecordset("tblMaster", dbOpenDynaset)
    Set rsSu = CurrentDb.OpenRecordset("tblSupplierHist", dbOpenDynaset)
    Set rsAd = CurrentDb.OpenRecordset("tblAddress", dbOpenDynaset)
    Set rsAs = CurrentDb.OpenRecordset("tblAssetHist", dbOpenDynaset)

    lngRow = 2

    Do Until lngRow > lngRowCnt + 1

ProcessUpload:
        With xlWrkSt

            dblMPRN = .Range("A" & lngRow) 'Store MPRN for additional tables

            'Master
            rsMs.AddNew
                rsMs!MPRN = dblMPRN
                rsMs!LoadTimestamp = Now()
                rsMs!Notification = .Range("B" & lngRow)
                rsMs!Asset = .Range("C" & lngRow)
                rsMs!JobRef = .Range("D" & lngRow)
                rsMs!WmsJobRef = .Range("E" & lngRow)
                rsMs!MeterWorker = .Range("F" & lngRow)
                rsMs!JobStatus = .Range("G" & lngRow)
                rsMs!JobTimestamp = .Range("H" & lngRow) & " " & .Range("I" & lngRow)
                rsMs!SalesDistrict = .Range("J" & lngRow)
                rsMs!AddInfo = .Range("M" & lngRow)
            rsMs.Update

            'Supplier
            rsSu.AddNew
                rsSu!MPRN = dblMPRN
                rsSu!SupplierID = .Range("K" & lngRow)
                rsSu!Timestamp = Now()
                rsSu!Advisor = "System"
            rsSu.Update

            'Address
            rsAd.AddNew
                rsAd!MPRN = dblMPRN
                rsAd!Street = .Range("N" & lngRow)
                rsAd!Locality = .Range("O" & lngRow)
                rsAd!Town = .Range("P" & lngRow)
                rsAd!PostCode = .Range("Q" & lngRow)
            rsAd.Update

            'Asset
            rsAs.AddNew
                rsAs!MPRN = dblMPRN
                rsAs!SN = .Range("R" & lngRow)
                rsAs!Make = .Range("T" & lngRow)
                rsAs!Model = .Range("U" & lngRow)
                rsAs!YOM = .Range("V" & lngRow)
                rsAs!Location = .Range("L" & lngRow)
                rsAs!Timestamp = Now()
                rsAs!Advisor = "System"
            rsAs.Update

            'Work out progress
            lngPerc = Round((lngRow / lngRowCnt) * 100)
            lngPerc = IIf(lngPerc > 0, lngPerc - 1, lngPerc)

            Forms!frmUpload!txtPerc = lngPerc & "/" & lngRowCnt & "  (" & lngPerc & " %)"
            Forms!frmUpload!ProgBar.Value = lngPerc

            'Let the display catch up
            DoEvents
            Sleep 100

            lngRow = lngRow + 1 'Advance

        End With

    Loop

WkSp.CommitTrans

Forms!frmUpload!txtPerc = lngRowCnt & "/" & lngRowCnt & "  (100 %)"
Forms!frmUpload!ProgBar.Value = 100
DoEvents

'Cleanup
xlWrkBk.Close
xlApp.Quit
Set xlApp = Nothing
Set xlWrkBk = Nothing
Set xlWrkSt = Nothing

rsMs.Close
rsSu.Close
rsAd.Close
rsAs.Close
WkSp.Close
Set rsMs = Nothing
Set rsSu = Nothing
Set rsAd = Nothing
Set rsAs = Nothing
Set WkSp = Nothing

Forms!frmUpload!cmdClose.Enabled = -1

DoCmd.Hourglass 0

Exit Sub

DtUplErr:
Select Case Err

    Case 3022 'Index Violation (Assumed PK MPRN in tblMaster)
        lngRow = lngRow + 1
        GoTo ProcessUpload

    Case Else 'Cleanup and then show error
        WkSp.Rollback 'Cancel transaction so data not affected

        xlWrkBk.Close
        xlApp.Quit
        Set xlApp = Nothing
        Set xlWrkBk = Nothing
        Set xlWrkSt = Nothing

        rsMs.Close
        rsSu.Close
        rsAd.Close
        rsAs.Close
        WkSp.Close
        Set rsMs = Nothing
        Set rsSu = Nothing
        Set rsAd = Nothing
        Set rsAs = Nothing
        Set WkSp = Nothing

        Forms!frmUpload!cmdSelect.Enabled = -1
        Forms!frmUpload!cmdClose.Enabled = -1

        DoCmd.Hourglass 0

        ShowError Err, "ModFunctions", "DataUpload", Err.Description

End Select

End Sub 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-26T14:54:47.180

感谢@HansUp 的建议，我逐步检查了我的代码，试图阻止错误的根源，正如我所期望的那样，这是最简单（但最令人讨厌）的事情。

在第一个错误上，我的代码将按预期运行到这一点：

```
DtUplErr:
    Select Case Err

    Case 3022 'Index Violation (Assumed PK MPRN in tblMaster)
        lngRow = lngRow + 1
        GoTo ProcessUpload 
```

然后回到下一个项目和过程的其余部分，但是在下一个错误时它会失败，并且有效地归结为一个“单词”，我已经改变了这一行：

```
Goto ProcessUpload 
```

到：

```
Resume ProcessUpload 
```

现在继续处理错误，唷，我一直知道“Resume”关键字超过“GoTo”是有充分理由的，但直到现在还没有感受到错误的痛苦^_^

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-26T16:15:48.867

为了简化您的代码以使将来的故障排除更容易，我提出了这个建议。

将部分从更改`'Cleanup`为`Exit Sub`：

```
MySubShallHaveOnlyOneExitPoint:
    xlWrkBk.Close
    xlApp.Quit
    Set xlApp = Nothing
    Set xlWrkBk = Nothing
    Set xlWrkSt = Nothing
    rsMs.Close
    rsSu.Close
    rsAd.Close
    rsAs.Close
    WkSp.Close
    Set rsMs = Nothing
    Set rsSu = Nothing
    Set rsAd = Nothing
    Set rsAs = Nothing
    Set WkSp = Nothing
    Forms!frmUpload!cmdClose.Enabled = -1
    DoCmd.Hourglass 0
    Exit Sub 
```

然后`Case Else`你的错误处理程序中的可以简化为：

```
Case Else ' Cleanup and then show error '
    WkSp.Rollback ' Cancel transaction so data not affected '
    Forms!frmUpload!cmdSelect.Enabled = -1
    ShowError Err, "ModFunctions", "DataUpload", Err.Description
    Resume MySubShallHaveOnlyOneExitPoint 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-26T14:13:54.353

编辑：Err 对象默认返回的“数字”属性。

~~我认为问题在于你的`Select Case`陈述。您缺少 err 对象的“数字”属性。所以它只是跳过整个`Select Case`块~~

 ~~```
DtUplErr:
Select Case Err.Number 'Use the Error Number for your Select Case Statement

    Case 3022 'Index Violation (Assumed PK MPRN in tblMaster)
        lngRow = lngRow + 1
        Err.Clear
        On Error Goto DtUplErr 'might need to tell it to branch on error again, i havn't tested
        GoTo ProcessUpload

    Case Else 'Cleanup and then show error
        MsgBox Err.Description
        'do whatever here
End Select 
```~~

# html - 是否有等效于背景大小：图像元素的覆盖和包含？

> ID：11670874
> 
> 赞同：294
> 
> 时间：2012-07-26T13:55:20.730
> 
> 标签：html, image, css

我有一个包含许多页面和不同背景图片的网站，我从 CSS 中显示它们，例如：

```
body.page-8 {
    background: url("../img/pic.jpg") no-repeat scroll center top #000;
    background-size: cover;
} 
```

但是，我想使用`<img>`元素在一个页面上显示不同的（全屏）图片，并且我希望它们具有与上述属性相同的 `background-image: cover;`属性（图像不能从 CSS 显示，它们必须从 HTML 文档显示）。

通常我使用：

```
div.mydiv img {
    width: 100%;
} 
```

或者：

```
div.mydiv img {
    width: auto;
} 
```

使图片完整且响应迅速。`width: 100%`但是，当屏幕变得太窄时，图片会缩小太多（ ），并在底部屏幕中显示主体的背景色。另一种方法，`width: auto;`，仅使图像全尺寸并且不响应屏幕尺寸。

有没有办法以同样的方式显示图像`background-size: cover`？

* * *

## 回答 #1

> 赞同：474
> 
> 时间：2014-11-17T07:05:41.553

## 解决方案 #1 - [object-fit 属性](http://www.w3.org/TR/css3-images/#object-fit)（[缺乏 IE 支持](http://caniuse.com/#feat=object-fit)）

只需`object-fit: cover;`在 img 上设置。

```
body {
  margin: 0;
}
img {
  display: block;
  width: 100vw;
  height: 100vh;
  object-fit: cover; /* or object-fit: contain; */
}
```

```
<img src="http://lorempixel.com/1500/1000" />
```

请参阅[MDN](https://developer.mozilla.org/en-US/docs/Web/CSS/object-fit#Values) - 关于`object-fit: cover`：

> 被替换的内容在填充元素的整个内容框时调整大小以保持其纵横比。如果对象的纵横比与其框的纵横比不匹配，则对象将被裁剪以适应。

对于`object-fit: contain`：

> 被替换的内容被缩放以保持其纵横比，同时适合元素的内容框。整个对象被制作成填充盒子，同时保持其纵横比，因此如果其纵横比与框的纵横比不匹配，则该对象将被“信箱化”。

另外，请参阅[此 Codepen 演示](https://codepen.io/danield770/pen/XYjZvN)，该演示将`object-fit: cover`应用于图像与`background-size: cover`应用于背景图像进行比较

* * *

## 解决方案 #2 - 将 img 替换为带有 css 的背景图像

```
body {
  margin: 0;
}
img {
  position: fixed;
  width: 0;
  height: 0;
  padding: 50vh 50vw;
  background: url(http://lorempixel.com/1500/1000/city/Dummy-Text) no-repeat;
  background-size: cover;
}
```

```
<img src="http://placehold.it/1500x1000" />
```

* * *

## 回答 #2

> 赞同：33
> 
> 时间：2015-02-27T18:30:20.553

假设您可以安排一个您希望填充的容器元素，这似乎可行，但感觉有点 hackish。本质上，我只是`min/max-width/height`在更大的区域上使用，然后将该区域缩放回原始尺寸。

```
.container {
  width: 800px;
  height: 300px;
  border: 1px solid black;
  overflow:hidden;
  position:relative;
}
.container.contain img {
  position: absolute;
  left:-10000%; right: -10000%; 
  top: -10000%; bottom: -10000%;
  margin: auto auto;
  max-width: 10%;
  max-height: 10%;
  -webkit-transform:scale(10);
  transform: scale(10);
}
.container.cover img {
  position: absolute;
  left:-10000%; right: -10000%; 
  top: -10000%; bottom: -10000%;
  margin: auto auto;
  min-width: 1000%;
  min-height: 1000%;
  -webkit-transform:scale(0.1);
  transform: scale(0.1);
}
```

```
<h1>contain</h1>
  <div class="container contain">
    <img 
       src="https://www.google.de/logos/doodles/2014/european-parliament-election-2014-day-4-5483168891142144-hp.jpg" 
       />
    <!-- 366x200 -->
  </div>
  <h1>cover</h1>
  <div class="container cover">
    <img 
       src="https://www.google.de/logos/doodles/2014/european-parliament-election-2014-day-4-5483168891142144-hp.jpg" 
       />
    <!-- 366x200 -->
  </div>
```

* * *

## 回答 #3

> 赞同：32
> 
> 时间：2015-06-11T10:54:05.823

实际上有一个非常简单的[CSS 解决方案](http://jsfiddle.net/BuschFunker/sjt71j99/)，它甚至可以在 IE8 上运行：

```
.container {
  position: relative;
  overflow: hidden;
  /* Width and height can be anything. */
  width: 50vw;
  height: 50vh;
}

img {
  position: absolute;
  /* Position the image in the middle of its container. */
  top: -9999px;
  right: -9999px;
  bottom: -9999px;
  left: -9999px;
  margin: auto;
  /* The following values determine the exact image behaviour. */
  /* You can simulate background-size: cover/contain/etc.
     by changing between min/max/standard width/height values.
     These values simulate background-size: cover
  */
  min-width: 100%;
  min-height: 100%;
}
```

```
<div class="container">
    <img src="http://placehold.it/200x200" alt="" />
</div>
```

* * *

## 回答 #4

> 赞同：22
> 
> 时间：2018-08-23T12:05:57.923

我找到了一个模拟覆盖和包含的简单解决方案，它是纯 CSS，适用于具有动态尺寸的容器，并且对图像比例没有任何限制。

请注意，如果您不需要支持 IE，或者 16 之前的 Edge，那么您最好使用 object-fit。

## 背景尺寸：封面

```
.img-container {
  position: relative;
  overflow: hidden;
}

.background-image {
  position: absolute;
  min-width: 1000%;
  min-height: 1000%;
  left: 50%;
  top: 50%;
  transform: translateX(-50%) translateY(-50%) scale(0.1);
  z-index: -1;
}
```

```
<div class="img-container">
  <img class="background-image" src="https://picsum.photos/1024/768/?random">
  <p style="padding: 20px; color: white; text-shadow: 0 0 10px black">
    Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat. Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur. Excepteur sint occaecat cupidatat non proident, sunt in culpa qui officia deserunt mollit anim id est laborum.
  </p>
</div>
```

此处使用 1000% 以防图像自然尺寸大于其显示尺寸。例如，如果图像是 500x500，但容器只有 200x200。使用此解决方案，图像将被调整为 2000x2000（由于最小宽度/最小高度），然后缩小到 200x200（由于`transform: scale(0.1)`）。

x10 因子可以用 x100 或 x1000 代替，但在 20x20 的 div 上渲染 2000x2000 的图像通常并不理想。:)

## 背景大小：包含

遵循相同的原则，您也可以使用它来模拟`background-size: contain`：

```
.img-container {
  position: relative;
  overflow: hidden;
  z-index: 0;
}

.background-image {
  position: absolute;
  max-width: 10%;
  max-height: 10%;
  left: 50%;
  top: 50%;
  transform: translateX(-50%) translateY(-50%) scale(10);
  z-index: -1;
}
```

```
<div style="background-color: black">
  <div class="img-container">
    <img class="background-image" src="https://picsum.photos/1024/768/?random">
    <p style="padding: 20px; color: white; text-shadow: 0 0 10px black">
      Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat. Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur. Excepteur sint occaecat cupidatat non proident, sunt in culpa qui officia deserunt mollit anim id est laborum.
    </p>
  </div>
</div>
```

* * *

## 回答 #5

> 赞同：11
> 
> 时间：2014-02-10T02:55:49.910

**不**，你不能完全理解，`background-size:cover` **但是..**

这种方法非常接近：它使用 JavaScript 来确定图像是横向还是纵向，并相应地应用样式。

JS

```
 $('.myImages img').load(function(){
        var height = $(this).height();
        var width = $(this).width();
        console.log('widthandheight:',width,height);
        if(width>height){
            $(this).addClass('wide-img');
        }else{
            $(this).addClass('tall-img');
        }
    }); 
```

CSS

```
.tall-img{
    margin-top:-50%;
    width:100%;
}
.wide-img{
    margin-left:-50%;
    height:100%;
} 
```

[http://jsfiddle.net/b3PbT/](http://jsfiddle.net/b3PbT/)

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2015-09-30T16:00:56.393

您可以做的是使用 'style' 属性将背景图像添加到元素中，这样您仍然可以在 HTML 中调用图像，但您仍然可以使用 background-size: 覆盖 css 行为：

HTML：

```
 <div class="image-div" style="background-image:url(yourimage.jpg)">
    </div> 
```

CSS：

```
 .image-div{
    background-size: cover;
    } 
```

这就是我如何将 background-size:cover 行为添加到我需要动态加载到 HTML 中的元素。然后，您可以使用很棒的 CSS 类，例如 background-position: center。繁荣

* * *

## 回答 #7

> 赞同：3
> 
> 时间：2016-06-07T22:22:03.520

我需要 emulate ，但由于缺乏支持而`background-size: contain`无法使用。`object-fit`我的图像具有定义尺寸的容器，这最终对我有用：

```
.image-container {
  height: 200px;
  width: 200px;
  overflow: hidden;
  background-color: rebeccapurple;
  border: 1px solid yellow;
  position: relative;
}

.image {
  max-height: 100%;
  max-width: 100%;
  margin: auto;
  position: absolute;
  transform: translate(-50%, -50%);
  top: 50%;
  left: 50%;
}
```

```
<!-- wide -->
<div class="image-container">
  <img class="image" src="http://placehold.it/300x100">
</div>

<!-- tall -->
<div class="image-container">
  <img class="image" src="http://placehold.it/100x300">
</div>
```

* * *

## 回答 #8

> 赞同：2
> 
> 时间：2015-06-25T20:12:57.683

使用 CSS，您可以模拟`object-fit: [cover|contain];`. 它是使用`transform`和`[max|min]-[width|height]`。 **这并不完美。**这在一种情况下不起作用：如果图像比容器更宽更短。

```
.img-ctr{
  background: red;/*visible only in contain mode*/
  border: 1px solid black;
  height: 300px;
  width: 600px;
  overflow: hidden;
  position: relative;
  display: block;
}
.img{
  display: block;

  /*contain:*/
  /*max-height: 100%;
  max-width: 100%;*/
  /*--*/

  /*cover (not work for images wider and shorter than the container):*/
  min-height: 100%;
  width: 100%;
  /*--*/

  position: absolute;
  top: 50%;
  left: 50%;
  transform: translate(-50%, -50%);
}
```

```
<p>Large square:
<span class="img-ctr"><img class="img" src="http://placehold.it/1000x1000"></span>
</p>
<p>Small square:
<span class="img-ctr"><img class="img" src="http://placehold.it/100x100"></span>
</p>
<p>Large landscape:
<span class="img-ctr"><img class="img" src="http://placehold.it/2000x1000"></span>
</p>
<p>Small landscape:
<span class="img-ctr"><img class="img" src="http://placehold.it/200x100"></span>
</p>
<p>Large portrait:
<span class="img-ctr"><img class="img" src="http://placehold.it/1000x2000"></span>
</p>
<p>Small portrait:
<span class="img-ctr"><img class="img" src="http://placehold.it/100x200"></span>
</p>
<p>Ultra thin portrait:
<span class="img-ctr"><img class="img" src="http://placehold.it/200x1000"></span>
</p>
<p>Ultra wide landscape (images wider and shorter than the container):
<span class="img-ctr"><img class="img" src="http://placehold.it/1000x200"></span>
</p>
```

* * *

## 回答 #9

> 赞同：2
> 
> 时间：2017-08-29T06:38:51.330

我们可以采取ZOOM的方式。如果纵横比图像的高度或宽度小于所需的高度或宽度，我们可以假设最大 30%（或高达 100%）可以是缩放效果。我们可以使用溢出隐藏其余不需要的区域：隐藏。

```
.image-container {
  width: 200px;
  height: 150px;
  overflow: hidden;
}
.stage-image-gallery a img {
  max-height: 130%;
  max-width: 130%;
  position: relative;
  top: 50%;
  left: 50%;
  transform: translateX(-50%) translateY(-50%);
} 
```

这将调整具有不同宽度或高度的图像。

* * *

## 回答 #10

> 赞同：1
> 
> 时间：2013-11-06T01:20:52.050

尝试*同时* `min-height`设置and `min-width`, with `display:block`:

```
img {
    display:block;
    min-height:100%;
    min-width:100%;
} 
```

（[小提琴](http://jsfiddle.net/yfFqK/)）

如果您的图像的包含元素是`position:relative`或`position:absolute`，则图像将覆盖容器。但是，它不会居中。

如果您知道图像是水平溢出（set `margin-left:-50%`）还是垂直溢出（set），您可以轻松地将图像居中`margin-top:-50%`。可以使用 CSS 媒体查询（和一些数学）来解决这个问题。

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2014-11-17T06:24:48.283

我不允许'添加评论'这样做，但是是的，Eru Penkman 所做的几乎是正确的，要让它像背景封面一样，你需要做的就是改变

```
.tall-img{
    margin-top:-50%;
    width:100%;
}
.wide-img{
    margin-left:-50%;
    height:100%;
}
```

到

```
.wide-img{
    margin-left:-42%;
    height:100%;
}
.tall-img{
    margin-top:-42%;
    width:100%;
}
```

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2017-04-11T21:03:31.723

我知道这很旧，但是我在上面看到的许多解决方案都存在图像/视频对于容器来说太大的问题，因此实际上不像背景大小的封面。但是，我决定制作“实用程序类”，以便它适用于图像和视频。您只需给容器类 .media-cover-wrapper 和媒体项目本身类 .media-cover

然后你有以下jQuery：

```
function adjustDimensions(item, minW, minH, maxW, maxH) {
  item.css({
  minWidth: minW,
  minHeight: minH,
  maxWidth: maxW,
  maxHeight: maxH
  });
} // end function adjustDimensions

function mediaCoverBounds() {
  var mediaCover = $('.media-cover');

  mediaCover.each(function() {
   adjustDimensions($(this), '', '', '', '');
   var mediaWrapper = $(this).parent();
   var mediaWrapperWidth = mediaWrapper.width();
   var mediaWrapperHeight = mediaWrapper.height();
   var mediaCoverWidth = $(this).width();
   var mediaCoverHeight = $(this).height();
   var maxCoverWidth;
   var maxCoverHeight;

   if (mediaCoverWidth > mediaWrapperWidth && mediaCoverHeight > mediaWrapperHeight) {

     if (mediaWrapperHeight/mediaWrapperWidth > mediaCoverHeight/mediaCoverWidth) {
       maxCoverWidth = '';
       maxCoverHeight = '100%';
     } else {
       maxCoverWidth = '100%';
       maxCoverHeight = '';
     } // end if

     adjustDimensions($(this), '', '', maxCoverWidth, maxCoverHeight);
   } else {
     adjustDimensions($(this), '100%', '100%', '', '');
   } // end if
 }); // end mediaCover.each
} // end function mediaCoverBounds 
```

调用它时，请确保注意页面大小调整：

```
mediaCoverBounds();

$(window).on('resize', function(){
  mediaCoverBounds();
}); 
```

然后是以下CSS：

```
.media-cover-wrapper {
  position: relative;
  overflow: hidden;
}

.media-cover-wrapper .media-cover {
  position: absolute;
  z-index: -1;
  top: 50%;
  left: 50%;
  -ms-transform: translate(-50%, -50%);
  -moz-transform: translate(-50%, -50%);
  -webkit-transform: translate(-50%, -50%);
  transform: translate(-50%, -50%);
} 
```

是的，它可能需要 jQuery，但它的响应非常好，并且行为与 background-size:cover 完全一样，您可以在图像和/或视频上使用它来获得额外的 SEO 价值。

* * *

## 回答 #13

> 赞同：-1
> 
> 时间：2013-06-21T15:11:58.360

对于 IE6，您还需要包括第二行 - width: 100%;

```
.mydiv img {
    max-width: 100%;
    width: 100%;
} 
```

* * *

## 回答 #14

> 赞同：-2
> 
> 时间：2013-11-06T00:42:11.117

```
background:url('/image/url/') right top scroll; 
background-size: auto 100%; 
min-height:100%; 
```

遇到相同的确切症状。以上对我有用。

# jquery - 如何在 Jquerymobile 中打开一个 servlet？

> ID：11670877
> 
> 赞同：1
> 
> 时间：2012-07-26T13:55:45.880
> 
> 标签：jquery, google-app-engine, servlets, jquery-mobile

我有一个用 jquery mobile 编码的表单页面。在服务器上，我在谷歌应用引擎上有我的 servlet。我想继续写在表格中的数据。

怎么做？JQM 中是否有类似行动的内容，或者是否有良好的最佳实践？

# mysql - 为产品变体设计数据库

> ID：11670883
> 
> 赞同：5
> 
> 时间：2012-07-26T13:56:00.593
> 
> 标签：mysql, database-design

我想为产品变体建模（不是选项或属性，只是变体）。

因此，每一个变体本身就是一个产品。对产品的所有变体有效的一般信息存储在另一个表中（例如：文本描述）。好的，我认为这很好，无需进一步更改。

对于依赖选项（例如颜色：红色，尺寸：小），我创建了两个变体。

**变体 1：**

![图1](../Images/9d4f65d069302c45402c656e63a62ba5.png)

表的简短描述：

*   选项：存储所有可用选项（颜色、尺寸、材料……）
*   value：存储所有可用的值（红、蓝、绿、小、中、大、铁、木）
*   option_value：存储选项和值的所有可能组合（颜色：{red,blue,green}, size:{small, medium, large},...
*   product_option_value 现在将产品与其选项连接起来（例如：color:red、size:small、product_id:1；color:blue、size:small、product_id:1）

好的，我认为这会很好用——左边是用于构建 UI 的元数据描述（哪些选项、哪些值、哪些组合）——右边是与产品的链接。

但是有一个问题......描述了选项和值的可能组合以构建GUI，并且可以通过编程方式对其进行验证，但数据库无法进行验证。

因此我创建了**变体 2：**

![图2](../Images/e7a003657357c992946c9c2517b2dbe4.png)

现在我不确定第二种解决方案是否会更好。你怎么看？有没有改进的余地？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-26T18:31:27.373

如果您只想限制`product_option_value` **中**已经存在的值`option_value`，那么是的，第二种模型更好。

但是，该模型允许在多个选项之间共享单个值（例如，“红色”可以是“颜色”和“大小”）。我猜这不是您想要的，在这种情况下，模型应该类似于：

![在此处输入图像描述](../Images/26469071b44a4687875a3dd041399e3a.png)

# android - 结合 Holo 主题和自定义标题 - AndroidRuntimeException

> ID：11670886
> 
> 赞同：2
> 
> 时间：2012-07-26T13:56:06.203
> 
> 标签：android, titlebar, android-theme

在我的应用程序中，我使用带有自定义标题的普通主题（具有动态更改颜色的背景、徽标和文本）。对于受支持的设备，我想使用 Holo 主题。顺便说一句，我有点迷路了..

在 Android 3.0 之前是否支持 Holo 主题（我想不支持）？

出于这个原因，我想将我的应用程序保留在以前版本的 Android 中，并将 HoloTheme 与新版本一起使用。我创建了一个目录 values-v14 并使用 Holo.Theme 添加了一个 Themes.xml。顺便说一句，这不起作用，因为我有一个 RuntimeException：

```
android.util.AndroidRuntimeException: You cannot combine custom titles with other title features 
```

我的自定义标题是在一个 xml 文件中定义的，然后像这样调用：

```
requestWindowFeature(Window.FEATURE_CUSTOM_TITLE);
setContentView(R.layout.main);
getWindow().setFeatureInt(Window.FEATURE_CUSTOM_TITLE, R.layout.custom_title); 
```

是否也可以像使用自定义标题一样动态地修改 ActionBar？

谢谢。

# wpf - 复选框的项目文本选择

> ID：11670889
> 
> 赞同：0
> 
> 时间：2012-07-26T13:56:18.047
> 
> 标签：wpf, xaml, combobox

我有 CheckBox，它是一些 DataGrid 的。Combobox 的 itemtemplate 是：

```
<ComboBox Name="cbxM" SelectedItem="{Binding Path=SelectedItem}" ItemsSource="{Binding SomeList}">
    <ComboBox.ItemTemplate>
        <DataTemplate>
            <TextBlock Text="{Binding SomeValue}" />
        </DataTemplate>
    </ComboBox.ItemTemplate>
</ComboBox> 
```

我想要实现的是：

当用户单击此 ComboBox 两次时，列表关闭，他可以从 SelectedItem 中选择文本。

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-26T14:04:02.213

尝试[`MouseDoubleClick`](http://msdn.microsoft.com/en-us/library/system.windows.controls.control.mousedoubleclick)为您的 ComboBox 处理事件。然后，您可以更改[`IsEditable`](http://msdn.microsoft.com/en-us/library/system.windows.controls.combobox.iseditable.aspx)ComboBox 的属性并使用它做任何您想做的事情。

# java - 如何在地图中找到一个点并左右搜索

> ID：11670892
> 
> 赞同：1
> 
> 时间：2012-07-26T13:56:21.340
> 
> 标签：java, search, map, iterator

我有一系列对象沿着由 a 表示的线设置，`LinkedHashMap<Foo, Double>`其中第一个字段是对象，第二个字段是它与测量原点的距离。我知道元素是通过增加距离来排序的。我希望能够选择一些位置`x`并左右搜索返回的实例`Foo`，而不必遍历整个地图。`foo.isInteresting()``true`

我的第一个想法是做类似的事情：

*   遍历所有条目以找到距离大于的第一个条目`x`
*   从这一点开始，向左看所有条目，直到`foo.isInteresting()`
*   从这一点开始，正确查看所有条目，直到`foo.isInteresting()`

`Map`但据我所知，没有办法从某个起点迭代 a 。从我的地图创建两个`List`对象并使用是否明智`ListIterator`？

交换键和值也不是完全明智的，因为我需要`Foo`在我的应用程序的其他地方进行搜索。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-26T14:01:54.783

navigablemap或[treemap](http://docs.oracle.com/javase/1.4.2/docs/api/java/util/TreeMap.html)可能会有所帮助，[特别](http://docs.oracle.com/javase/6/docs/api/java/util/NavigableMap.html)是方法`tailmap``submap`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-26T14:08:22.620

您可以使用`TreeSet<Foo>`，保持距离`Foo`并准备一个比较器。您还可以创建一个包含 Foo 和 distance 且具有可比性的包装器对象，并将其保存在`TreeSet<Wrapper>`. 然后你可以使用`lower`和`higher`的方法`NavigableSet`。

```
class Wrapper implements Comparable<Wrapper> {

    public Foo foo;
    public Double distance;

    public Wrapper(Foo foo, Double distance) {
        this.foo = foo;
        this.distance = distance;
    }

    /**
     * Use only Foo for hashcode and equals 
     */
    @Override
    public int hashCode() {
        final int prime = 31;
        int result = 1;
        result = prime * result + ((foo == null) ? 0 : foo.hashCode());
        return result;
    }

    @Override
    public boolean equals(Object obj) {
        if (this == obj)
            return true;
        if (obj == null)
            return false;
        if (getClass() != obj.getClass())
            return false;
        Wrapper other = (Wrapper) obj;
        if (foo == null) {
            if (other.foo != null)
                return false;
        } else if (!foo.equals(other.foo))
            return false;
        return true;
    }

    @Override
    public int compareTo(Wrapper o) {
        return distance.compareTo(o.distance);
    }

}@Override
public boolean equals(Object obj) {
    if (this == obj)
        return true;
    if (obj == null)
        return false;
    if (getClass() != obj.getClass())
        return false;
    Wrapper other = (Wrapper) obj;
    if (foo == null) {
        if (other.foo != null)
            return false;
    } else if (!foo.equals(other.foo))
        return false;
    return true;
}

@Override
public int compareTo(Wrapper o) {
    return distance.compareTo(o.distance);
}

} 
```

这使您可以按 Foo 搜索并按距离排序。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-26T14:10:12.193

我认为 a`Map`不应该是您在这里选择的数据类型。相反，创建一个`ArrayList<Foo>`并使用与原点的距离作为比较器对其进行排序。然后，您可以使用它`Collections.binarySearch()`来快速找到最接近您所需距离的索引。完成此操作后，您可以使用`List.subList()`.

A `TreeSet`(using `TreeSet.subSet()`) 的工作方式类似，但是您需要使s`Comparator`更复杂一些，因为它需要能够将`Foo`s 作为辅助比较进行比较（当两个元素与原点的距离相等时）。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-26T14:19:09.723

使用两个 Map（同时更新）是不是一个糟糕的主意：

```
LinkedHashMap<Foo, Double> basicMap;
SortedMap<Double, Set<Foo>> distMap; // may have same Double for two 'Foo's. 
```

*编辑以更改 SortedMap*

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-26T16:28:07.187

您可以使用数组 [2] [n] 或两个数组 [n]，其中第一行是距离值，第二行是您的对象。因此，您将能够根据距离对其进行排序并使用二进制搜索。当您找到具有所需距离的元素时，您将能够向左或向右移动。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-02-10T22:06:15.407

考虑[indexed-tree-map](http://code.google.com/p/indexed-tree-map/)，您将能够通过索引访问元素并获取元素的索引，同时保持排序顺序。可以将重复项作为同一键下的值放入数组中。

# google-app-engine - 谷歌应用引擎限制访问一组谷歌账户

> ID：11670894
> 
> 赞同：5
> 
> 时间：2012-07-26T13:56:24.567
> 
> 标签：google-app-engine

在谷歌帐户的应用引擎上运行身份验证非常容易。我正在寻找只允许一组特定帐户访问页面的最简单方法，更一般地说是资源（servlet、静态文件等）。我会对 web.xml 中硬编码的电子邮件名称列表感到非常满意。或java代码中的类似内容。灵活性不是首要任务。上下文是一个 GWT+GAE 应用程序，只有 3 个用户可以访问。

谢谢， 马蒂亚斯

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-27T03:27:48.573

login_required 装饰器的伪代码可能如下所示。

```
def myuser_login_required(f):
    def wrap(request, *args, **kwargs):
            if not (user and user in ["allowedemail","andallowedemail"]):
                 return redirect()
            return f(request, *args, **kwargs)
    wrap.__doc__=f.__doc__
    wrap.__name__=f.__name__
    return wrap 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-26T14:23:53.670

如果您愿意为这些用户授予管理权限（鉴于您的安全限制），您可以为这些资源添加安全约束。有关更多详细信息，请参阅[文档](https://developers.google.com/appengine/docs/java/config/webxml#Security_and_Authentication)。您可以授予他们查看者角色，这是权限较少的角色。它还取决于您要添加到该列表中的用户数量。

# c# - 通过 WCF 公开 winforms 应用程序内部

> ID：11670896
> 
> 赞同：0
> 
> 时间：2012-07-26T13:56:32.617
> 
> 标签：c#, visual-studio-2010, wcf, ipc

我正试图迈出进入 IPC 和 WCF 的第一步，但到目前为止，我的脸都跌倒了。我有一个 Winforms 应用程序，我想为远程调用者提供一些工具。winforms 应用程序的大部分业务逻辑都局限于一个处理所有后台工作的单例。我想通过 IPC 机制公开一些功能。WCF 似乎是前进的方向，所以我从那个开始。

我尝试的是在我的解决方案中添加一个 WCF 服务库项目，我想通过它公开一些调用。当我在 VS 调试器中启动 Winforms 项目时，它正常运行，并且 WcfSvcHost 启动。我可以使用 WcfTestClient 与 WCF 服务通信。

但是，当我尝试访问持有我想与之通信的代码的单例时，似乎我得到了一个新的单例对象。显然，我做错了；我猜正在发生的是服务在不同的进程中运行，因此没有真正的共享代码，因此没有共享单例。

我不确定我应该如何继续。我选择为 IPC 使用 WCF 是错误的吗？我应该在 Winforms 应用程序中集成 WCF 端点吗？我正在尝试的方法是否可行？

编辑：我认为这太高级了，也太简单了，以至于任何代码示例都是无用的。我想我错了。所以一些代码：

在 WinForms 程序集中：

```
public partial class Form1 : Form
{
  public Form1()
    {
      InitializeComponent();
      label1.Text = MySingleton.Instance.InitedAt.ToString();
    }
}

public class MySingleton
{
  private static MySingleton instance = new MySingleton();
  private DateTime inited;

  private MySingleton()
  {
    this.inited = DateTime.Now;
  }

  public static MySingleton Instance
  {
    get
    {
      return instance;
    }
  }

  public DateTime InitedAt
  {
    get
    {
      return this.inited;
    }
  }
} 
```

在 WCFServiceLibrary 程序集中：

```
[ServiceContract]
public interface IApplicationProbe {

  [OperationContract]
  string DoesItWork();

  [OperationContract]
  string SingletonInited();
}

public class ApplicationProbe : IApplicationProbe {
  public string DoesItWork(){
    return "Why yes, yes it does";
  }

  public string SingletonInited(){
    return MySingleton.Instance.InitedAt.ToString();
  }
} 
```

当我`SingletonInited`通过 WcfTestClient 查询时，我得到一个 InitedAt，它与 winforms 单例的实例化的 DateTime 不同。

编辑2：

我让这段代码按原样运行（使用围绕 Winforms 的自动生成的脚手架）。表单上的标签显示的时间与 WCF 调用返回的时间不同，表明它是不同的实例。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-26T14:27:24.653

我假设您将单例类用作服务（它实现了合同）。我建议你开发一个 WCF 合同和一个服务，它会调用你的单例。

所以你会有这样的东西：

```
public class YourImpportantSingleton
{
    public YourImpportantSingleton Instance { get; set; }
    public void DoSeriousBusiness(){...}
}

[ServiceContract]
public interface IYourContract
{
    void YourRemoteAction();
} 

public class YourService : IYourContract
{
    public void YourRemoteAction()
    {
        YourImportantSingleton.Instance.DoSeriousBusiness();
    }
} 
```

UPD：好的，刚刚意识到，您可能没有在 winforms 应用程序中使用自托管，很抱歉浪费了时间。

然后，您的选择是`ServiceHost`在您的表单应用程序中托管服务或单独托管服务（例如，使用 IIS）并使该服务成为您的单例的守护者。当然，您必须更改表单应用程序以调用单独的服务，因为它现在保持状态。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-27T11:17:57.370

这里的问题是 WCF 服务主机托管的是服务，而不是应用程序本身。这导致应用程序在单独的 ApplicationDomain 中运行，进而导致创建新的单例。切换到自托管解决了这个问题。

# android - Android转C使用NDK，然后在C中调用Java函数

> ID：11670897
> 
> 赞同：0
> 
> 时间：2012-07-26T13:56:33.400
> 
> 标签：android, c, android-ndk, java-native-interface

因此，我正在重新创建一个 Palm Pilot 程序以在 Android 中运行。有一个库我必须继续使用用 C 编写的，但我正在重写应用程序的 UI 组件和蓝牙组件以在 Android 中运行。为了在蓝牙连接的另一端初始化设备，我`InitRelay`从 C 代码调用。

这是原始的 C 代码（尚未进行任何更改）：

```
fp_setbaud RelayAPI_SetBaud;
fp_get RelayAPI_get;
fp_put RelayAPI_put;
fp_flush RelayAPI_flush;
fp_delay RelayAPI_delay;
fp_ProgressUpdate RelayAPI_ProgressUpdateTX;
fp_ProgressUpdate RelayAPI_ProgressUpdateRX;
...

BYTE __stdcall InitRelay(fp_setbaud _setbaud, fp_get _get, fp_put _put, fp_flush _flush, fp_delay _delay){

    RelayAPI_SetBaud=_setbaud;
    RelayAPI_get=_get;
    RelayAPI_put=_put;
    RelayAPI_flush=_flush;
    RelayAPI_delay=_delay;
    ...
} 
```

fp_* 函数在`.h`文件中的类型定义如下：

```
typedef void (__stdcall *fp_setbaud)(WORD);
typedef short (__stdcall *fp_get)(WORD);
typedef void (__stdcall *fp_put)(BYTE);
typedef void (__stdcall *fp_flush)(void);
typedef void (__stdcall *fp_delay)(WORD);
//typedef void (__stdcall *fp_err)(WORD);
typedef short (__stdcall *fp_ProgressUpdate)(WORD); 
```

在`main method`中`old C program`，InitRelay() 调用如下：

```
InitRelay(Changeit,getit,putit,flushit,delayit); 
```

传递的参数是在 main 方法中定义的函数。我已经用 Java 重写了所有这些函数，并创建了一个新的 C 方法，如下所示：

```
jmethodID RelayAPI_SetBaud;
jmethodID RelayAPI_get;
jmethodID RelayAPI_put;
jmethodID RelayAPI_flush;
jmethodID RelayAPI_delay;
jmethodID RelayAPI_ProgressUpdateTX;
jmethodID RelayAPI_ProgressUpdateRX;
jclass    bluetoothClass;

BYTE __stdcall InitRelayJava( JNIEnv *env, jobject obj  ) {
    bluetoothClass = (*env)->GetObjectClass( env, obj );

    RelayAPI_SetBaud=(*env)->GetMethodID( env, bluetoothClass, "changeitJava", "(I)Z"  );
    RelayAPI_get    =(*env)->GetMethodID( env, bluetoothClass, "getitJava"   , "()V"   );
    RelayAPI_put    =(*env)->GetMethodID( env, bluetoothClass, "putitJava"   , "([B)V" );
    RelayAPI_flush  =(*env)->GetMethodID( env, bluetoothClass, "flushitJava" , "()V"   );
    RelayAPI_delay  =(*env)->GetMethodID( env, bluetoothClass, "delayitJava" , "(I)V"  );
    ...
} 
```

当我尝试编译它时，我收到了数千个关于我的所有 RelayAPI_* 成员都不是函数的错误。这是一个屏幕截图：

![在此处输入图像描述](../Images/d2afa9a97d024eead298ccb3092c2ab8.png)

我也被告知要添加这个函数来创建一个JVM，但我真的一点也不明白......

```
JNIEnv* create_vm( JavaVM ** jvm ) {
    JNIEnv *env;
    JavaVMInitArgs vm_args;

    JavaVMOption options;

    options.optionString = "-Djava.class.path=C:\\Users\\andrew\\workspace\\Singleton2\\src\\my\\eti\\commander";
    vm_args.version = JNI_VERSION_1_7;
    vm_args.nOptions = 1;
    vm_args.options = &options;
    vm_args.ignoreUnrecognized = 0;
    int ret = JNI_CreateJavaVM( jvm, (void**)&env, &vm_args );
    if( ret < 0 ) 
        printf( "\nUnable to Launch JVM\n" );
    return env;
} 
```

告诉我编写上述函数的教程在[这里](http://www.codeproject.com/Articles/22881/How-to-Call-Java-Functions-from-C-Using-JNI)...

所以，我不确定我做错了什么。我假设`GetMethodID`调用实际上并没有返回方法本身......有谁知道还能做什么？我一直在阅读教程，有一些关于 a 的内容，`CallVoidMethod`但我不明白……这是[教程](http://journals.ecs.soton.ac.uk/java/tutorial/native1.1/implementing/method.html)的链接……

请让我知道你在想什么。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-26T14:14:37.423

对于 void 方法，例如您的`RelayAPI_flush`方法。

如果您在 JNI 中有您的 Java 类，`jobject bluetoothClass`并且您`jmethodID`通过调用获得了该类的方法

```
RelayAPI_flush = env->GetMethodID(bluetoothClass, "flushitJava" , "()V"); 
```

然后，您可以像这样调用 Java`flushitJava`函数：

```
env->CallVoidMethod(bluetoothClass, RelayAPI_flush); 
```

您可能还必须正确地将线程附加到 VM 或从 VM 分离线程，网上有关于在 Android 中使用 JNI 的教程。

对于我们在 JNI 中的其他方法，根据[http://java.sun.com/docs/books/jni/html/functions.html](http://java.sun.com/docs/books/jni/html/functions.html)

```
Call<Type>Method
<NativeType>
CallVoidMethod
void
CallObjectMethod
jobject
CallBooleanMethod
jboolean
CallByteMethod
jbyte
CallCharMethod
jchar
CallShortMethod
jshort
CallIntMethod
jint
CallLongMethod
jlong
CallFloatMethod
jfloat
CallDoubleMethod
jdouble 
```

# gwt - 来自 DOM 和 Document 类的 getElementById 方法之间的区别

> ID：11670901
> 
> 赞同：16
> 
> 时间：2012-07-26T13:56:40.870
> 
> 标签：gwt, dom

`GWT`提供两种通过其唯一性检索 HTML 元素的方法`ID`。

之间有什么区别（如果有的话）：

*   **DOM.getElementById("divID") ：**

> 获取与整个文档中给定唯一 ID 关联的元素。
> 
> @param id 要检索其关联元素的 id
> @return 关联元素，如果没有找到则返回 null

*   **Document.get().getElementById("divID") ：**

> 返回其 id 由 elementId 给出的元素。如果不存在这样的元素，则返回 null。如果多个元素具有此 ID，则不定义行为。
> 
> @param elementId 元素的唯一id值
> @return 匹配的元素

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-07-26T14:26:49.847

基本上什么都没有。在 GWT 生命周期的某个时刻，整个 DOM 相关代码被重写到`dom`包中。在每个 HTML 标签的新包中，都有一个特定的 Element 类可用，例如`DivElement`为这些标签提供特定的方法。例如，在您的示例中，如果您使用它来查找 div 元素，您可以直接使用`DivElement`. 两个版本的代码如下所示：

```
DivElement divID = (DivElement) Document.get().getElementById("divID"); 
```

或者

```
DivElement divID = (DivElement) DOM.getElementById("divID").cast(); 
```

为了向后兼容，保留了旧代码。所有 Widget 类都使用旧`Element`类，该类也由`DOM.getElementById`. 旧`Element`类被更改并扩展了新`Element`类，没有任何额外的。所以它们基本上是一样的。一般来说，您应该只使用`Document.get()`. 在使用元素时，这一切都会让人有些困惑。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-07-27T22:57:34.580

看：

在`com.google.gwt.dom.client.Document`

```
public final native Element getElementById(String elementId) /*-{
    return this.getElementById(elementId);
}-*/; 
```

在`com.google.gwt.user.client.DOM`

```
public static Element getElementById(String id) {
    return Document.get().getElementById(id).cast();
} 
```

所以它只是一个“方便的包装方法”。

但是，尽管它们都从不同的包中返回`Element`这些 ara ，并且由于两者都是并且意味着相同，您可以在它们之间进行转换，而忽略继承层次结构，无论是使用 java cast 语法还是使用便捷方法`Element``Element``JavaScriptObject``()``JavaScriptObject.<T extends JavaScriptObject> cast()`

顺便提一句。文档是 JSO 覆盖类型，因此“本机`this`”指向`this`;)

# c - 使指针中的值无效

> ID：11670902
> 
> 赞同：1
> 
> 时间：2012-07-26T13:56:50.880
> 
> 标签：c, pointers

我很久没有做过指针运算了，所以我想我会尝试 C 语言并做一个简单的二叉搜索树。但是，我无法掌握删除的窍门。这些方面的东西按我的预期工作：

```
typedef struct Node{
    int value;
    struct Node *left;
    struct Node *right;
}Node;

typedef struct Tree{
    struct Node* root;
}Tree;

int main(){
    Tree *tree = createTree(); 

    treeInsert(10, tree);    // Inserts 10 at root
    treeInsert(30, tree);    // Inserts 30 to root->right
    treeInsert(5, tree);     // Inserts 5 to root->left
    treeInsert(7, tree);     // Inserts 7 to root->left->right
    treeInsert(12, tree);    // Inserts 12 to root->right->left

    // Removes Node "7" from the tree successfully
    free(tree->root->left->right);   // Free memory for this node in the tree
    tree->root->left->right = NULL;  // Set the pointer to NULL

    return 0;
} 
```

我想编写一个`nodeDelete(Node *killNode)`函数来释放与节点关联的内存，然后将其指向 NULL，但我发现它不像我期望的那样工作。

```
int main(){
   // ... snip ...

   Node *kill = tree->root->left->right  // Points kill node to Node "7"
   free(kill);                           // Deallocates memory
   kill = NULL;                          // Points kill to NULL, but keeps 
                                         //   tree->root->left->right **undefined** 
   // ... snip ...
} 
```

我认为我的问题是我告诉它`kill`现在指向 NULL，这将它与树中的节点断开连接并且不会影响原始节点指针。我怎样才能告诉它我想指向`tree->root->left->right`NULL 而不是`kill`？在这种情况下我需要一个指向指针的指针吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-26T14:07:23.863

是的，如果要删除该节点，则需要设置`tree->root->left->right`为`NULL`. 这意味着您不能只将该指针的*值*传递给删除函数。

您有两个选择：您可以将指针传递给要删除的节点的*父*节点，以及有关要删除的子节点的信息：

```
nodeDelete(Node *parent, int kill_right)
{
    Node *kill;

    if (kill_right) {
        kill = parent->right;
        parent->right = NULL;
    } else {
        kill = parent->left;
        parent->left = NULL;
    }

    free(kill);
} 
```

在这种情况下，您会调用`nodeDelete(tree->root->left, 1);`.

或者，您可以将指针传递给要删除的指针：

```
nodeDelete(Node **killptr)
{
    free(*killptr);
    *killptr = NULL;
} 
```

在这种情况下，您会调用`nodeDelete(&tree->root->left->right);`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-26T14:13:22.307

是的，您需要使用双指针。您还需要确保递归删除要删除的节点的任何子节点：

```
void nodeDelete(Node **killNode)
{
    if(!*killNode)
        return;

    // Free child nodes
    nodeDelete((*killNode)->left);
    nodeDelete((*killNode)->right);

    // Free the node itself
    free(*killNode);
    *killNode=NULL;
} 
```

空指针检查是有意在开始时执行的——这可以防止您将递归调用包装在空指针检查中。

# android - 设置视图标签时Android GRef增加

> ID：11670906
> 
> 赞同：1
> 
> 时间：2012-07-26T13:57:08.153
> 
> 标签：android, memory, reference

我正在处理日历活动并实现了一个适配器来处理数据。对于一个月中的每一天，我都有一个按钮，我为其设置了一个标签。然后，当按下按钮时，我可以从标签中分辨出它是哪个日期。可以跳到下个月/上个月，从而更改日历视图的数据。但是我的问题是，每次我设置按钮的标签（因为视图被重用）时，GRef 都会增加并且永远不会被释放，并且当它达到 2000 时应用程序崩溃。当取消注释设置标签的代码行时，Gref 不会增加，应用程序不会崩溃。以下方法来自我的适配器：

```
 private int key = Resource.Id.string_key;     
public override View GetView(int position, View convertView, ViewGroup parent)
            {
                View row = convertView;
                if (row == null)
                {
                    LayoutInflater inflater = (LayoutInflater)_context.GetSystemService(Context.LayoutInflaterService);
                    row = inflater.Inflate(Resource.Layout.calendar_grid_cell, parent, false);
                }

                // Get a reference to the Day gridcell
                gridcell = (Button)row.FindViewById(Resource.Id.calendar_day_gridcell);
                gridcell.SetOnClickListener(this);
                string[] words = list[position].Split(delimiterChars);
                gridcell.Text = words[2];
                gridcell.SetTag(key, words[1]);

                return row;
            } 
```

有人对我能做什么有建议吗？在设置新标签之前，我已经尝试将标签属性设置为空 - 或者我应该避免使用标签并找到其他方式吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-18T19:36:36.720

这里的问题是双重的：

1.  您正在调用[View.SetTag(int, Java.Lang.Object)](http://androidapi.xamarin.com/?link=M%3aAndroid.Views.View.SetTag)。

2.  存在从[字符串到 Java.Lang.Object](http://androidapi.xamarin.com/?link=ecma%3a3337%23Object%2fO%2fConversion%2f44)的隐式转换。

所以这：

```
gridcell.SetTag(key, words[1]) 
```

在道德上相当于：

```
Java.Lang.Object tmp = words[1];
gridcell.SetTag(key, tmp); 
```

这会导致 gref 被消耗，并且它可能永远不会被收集，因为 Android 持有 Dalvik 端的`java.lang.String`实例，这意味着 Android 的 GC 的 Mono 将认为`tmp`无法收集该实例。

幸运的是，*我们*知道得更多，并且可以做出相应的行为。将您的代码更改为：

```
using (var tag = new Java.Lang.String(words[1]))
    gridcell.SetTag(key, tag); 
```

这`Dispose()`是包装器实例的意志，这很好（*在这种情况下！*）因为我们不需要它，而且我们*知道*我们不需要它。

**注意：**[使用“知道”的东西](http://docs.xamarin.com/Android/Guides/Advanced_Topics/Garbage_Collection#Helping_the_GC)时必须[非常小心](http://docs.xamarin.com/Android/Guides/Advanced_Topics/Architecture#Premature_Dispose%28%29_Calls)。

这就是事情的初始方面。事物的查找方面是相同但不同的：

```
using (var tag = new Java.Lang.String("some-tag")) {
    var gridcell = row.FindViewWithTag(tag).JavaCast<Button>();
    // use gridcell...
} 
```

这是有效的，因为[View.findViewWithTag()](http://developer.android.com/reference/android/view/View.html#findViewWithTag%28java.lang.Object%29)被记录为使用`Object.equals()`而不是引用相等，并且由于我们在这里使用字符串，所以我们正在使用`String.equals()`，它执行值相等。

如果 gref 是一个主要问题，您可以更进一步并处理`gridcell`gref，*除非* `gridcell`它可能是 C# 子类。（*知道*这一点需要访问您的`.axml`.）

```
private int key = Resource.Id.string_key;     
public override View GetView(int position, View convertView, ViewGroup parent)
{
    View row = convertView;
    if (row == null) {
        LayoutInflater inflater = (LayoutInflater)_context.GetSystemService(Context.LayoutInflaterService);
        row = inflater.Inflate(Resource.Layout.calendar_grid_cell, parent, false);
    }

    // Get a reference to the Day gridcell
    using (var gridcell = row.FindViewById<Button>(Resource.Id.calendar_day_gridcell)) {
        gridcell.SetOnClickListener(this);
        string[] words = list[position].Split(delimiterChars);
        gridcell.Text = words[2];
        using (var tag = new Java.Lang.String(words[1]))
            gridcell.SetTag(key, tag);
    }

    return row;
} 
```

# android - Android 中的 Web 视图 HTML

> ID：11670909
> 
> 赞同：0
> 
> 时间：2012-07-26T13:57:13.113
> 
> 标签：android

我`Web View`在我的应用程序中使用。我想将一个值传递给 HTML。例如，我正在做一个在线支付系统；我想将一个保存金额的变量传递给将在我的 Web 视图中显示的 HTML。

有什么想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-03-03T04:47:54.277

您可以在 JavaScript 中维护变量，并在页面加载后将其传递给您的 WebView。按如下方式使用它：

```
webview.loadUrl("javascript:var a=(%s);",data); 
```

# java - 未使用 OpenJPA 从数据库中检索到主键 (ID) (?)

> ID：11670910
> 
> 赞同：2
> 
> 时间：2012-07-26T13:57:17.030
> 
> 标签：java, mysql, database, jpa, openjpa

这是一个简单的程序，用于写入和读取 mysql 数据库。当我输入测试数据时，所有这些都在 mySQL 客户端中可见。然而，当我使用 OpenJPA 检索相同的数据时，所有 id 都显示为“0”，但名称是正确的。ID 在交易过程中丢失的原因可能是什么？

POJO类

```
import java.io.Serializable;

import javax.persistence.*;

@Entity (name="People")
public class People implements Serializable{

/**
 * 
 */
private static final long serialVersionUID = 801578124126646759L;

@Id
private int id;

@Column(length=32)
private String name;

public People(int id,String name)
{
    setId(id);
    setName(name);
}

public int getId() {
    return id;
}

public void setId(int id) {
    this.id = id;
}

public String getName() {
    return name;
}

public void setName(String name) {
    this.name = name;
}   

} 
```

从数据库中读取的类

```
import java.util.List;

import javax.persistence.EntityManager;
import javax.persistence.Query;

 public class PeopleGetter {

EntityManager entityManager;

public PeopleGetter(EntityManager entityManager)
{
    this.entityManager=entityManager;
}

@SuppressWarnings("unchecked")
public List<People> getAllPeople()
{
    Query query=entityManager.createQuery("SELECT x FROM People x");
    return query.getResultList();
}

} 
```

打印数据的类

```
import java.io.PrintStream;
import java.util.List;

import javax.persistence.EntityManager;
import javax.persistence.Query;

public class PeoplePrinter {

private PeopleGetter peopleGetter;

private PrintStream out = System.out;

public PeoplePrinter(PeopleGetter peopleGetter)
{
    this.peopleGetter=peopleGetter;
}

public void setPrintStream (PrintStream stream){
    out = stream;
}

public void getAllPeopleAndPrint() 
{
    List<People>peopleList=peopleGetter.getAllPeople();
    for(People person: peopleList) {
        out.println(person.getId()+"=>"+person.getName());
    }
}
} 
```

主要测试人员类

```
import javax.persistence.*;

public class MainClass {

public static void generateNames()
{
    EntityManager entityManager = getEntityManager();
    EntityTransaction userTransaction = entityManager.getTransaction();
    userTransaction.begin();
    entityManager.persist(new People(1,"Ali"));
    userTransaction.commit();
    userTransaction.begin();
    entityManager.persist(new People(2,"Veli"));
    userTransaction.commit();
    userTransaction.begin();
    entityManager.persist(new People(3,"Ahmet"));
    userTransaction.commit();
    userTransaction.begin();
    entityManager.persist(new People(4,"Mehmet"));
    userTransaction.commit();       
    entityManager.close();
}

public static EntityManager getEntityManager()
{
     EntityManagerFactory entityManagerFactory =      Persistence.createEntityManagerFactory("openjpa");
     EntityManager entityManager = entityManagerFactory.createEntityManager();
     return entityManager;
}

public static void resetTable()
{
    EntityManager em = getEntityManager();
    Query query = em.createQuery("DELETE FROM People x");
    EntityTransaction userTransaction = em.getTransaction();
    userTransaction.begin();
    query.executeUpdate();
    userTransaction.commit();
    em.close();
}

public static void main(String[] args)
{
        resetTable();
        generateNames();
        EntityManager em = getEntityManager();
        PeoplePrinter peoplePrinter=new PeoplePrinter(new PeopleGetter(em));
        peoplePrinter.getAllPeopleAndPrint();   
        em.close();
}
 } 
```

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-26T15:44:57.437

我假设您正在使用 Eclipse 增强器，它有几个[已知的错误](https://issues.apache.org/jira/browse/OPENJPA-1879)。我建议获得[构建时间或使用 javaagent](http://openjpa.apache.org/enhancement-with-ant.html)增强器。

# c++ - 当 setter-method 参数是 C++ 中的引用时会发生什么？

> ID：11670911
> 
> 赞同：2
> 
> 时间：2012-07-26T13:57:22.617
> 
> 标签：c++, reference, member

我对何时复制以及何时在 C++ 中引用它们感到有些困惑。例如，我有一个非常简单的方法，其中参数是引用：

```
void setTimeSig(const int &tsNumerator, const int &tsDenominator) {
    this->timeSigNum = tsNumerator;
    this->timeSigDenom = tsDenominator;
} 
```

这是否意味着因为我在函数 where`setTimeSig`完成时使用了引用，所以带有`timeSigNum`和的对象`timeSigDenom`将使这两个字段为空？还是此时正在复制它：`this->timeSigNum = tsNumerator;`

还有一个关于同一件事的问题：

```
class A{
public:
    B bObject;
}
B b;
A a;
a.bObject = b; 
```

现在是`bObject`引用 b 还是包含副本？

非常感谢有关我应该在哪里阅读或阅读有关此内容的任何信息。我仍然对很多事情感到困惑。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-26T14:01:16.987

引用可以被认为是隐式指针。虽然在语义上它们可以具有更复杂的含义（即，引用通常被认为是“绑定的”，但不能是`NULL`），但底层编译器通常将它们视为自动取消引用的指针。因此，从编译器的角度来看，您的代码实际上如下所示：

```
this->timeSigNum = *tsNumerator;
this->timeSigDenom = *tsDenominator; 
```

所以引用本身的值不会被复制，而是引用绑定到的原始变量的值被复制，就像您手动取消引用显式指针一样。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-26T14:11:08.033

在第一个示例中，您将函数参数引用的值复制到成员变量中。

在您的第二个示例中也是如此，在这里您将值从对象 b 复制到对象 a.bObject。

使用 operator= 时始终使用赋值运算符，默认方式是所谓的浅拷贝。当您的类中有动态数据时，您需要小心，因为默认的不会这样做，因为您只会复制动态数据的地址，并且这些数据可以在原始实例或复制的实例中被破坏。在这种情况下，您需要进行深度复制，这意味着您需要通过重载赋值运算符来手动复制动态数据。

更多关于浅拷贝和深拷贝的信息：

[http://www.learncpp.com/cpp-tutorial/912-shallow-vs-deep-copying/](http://www.learncpp.com/cpp-tutorial/912-shallow-vs-deep-copying/)

来自同一来源的更多关于复制/分配操作员主题的阅读：

[http://www.learncpp.com/cpp-tutorial/911-the-copy-constructor-and-overloading-the-assignment-operator/](http://www.learncpp.com/cpp-tutorial/911-the-copy-constructor-and-overloading-the-assignment-operator/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-26T14:00:54.030

1.  那时它正在被复制： this->timeSigNum = tsNumerator;
2.  包含一个副本。

C++ 仅在您将内容显式声明为引用时（几乎）使用引用。

# jquery - $.get - 不允许来源

> ID：11670915
> 
> 赞同：5
> 
> 时间：2012-07-26T13:57:33.633
> 
> 标签：jquery, ajax, macos, google-chrome

今天我在尝试使用`$.get`.

它仅在 Mac OS X (Snow Leopard) 上的 Safari 和 Chrome 中发生，在 Windows 上它在所有浏览器中都能正常工作。

函数如下：

```
function _fc() {
   $.get("_x_fc.php", { xaction: 'login', xv1: $('#login').attr("value"), xv2: $('#pass').attr("value") }, function (data) {

      if (data=='0') { letItGo=true; $('#loginform').submit(); }
      else ...//Do some other checks
   });
} 
```

*   它不是本地服务器，而是具有现有域的 Web 服务器
*   我不想执行任何跨域 ajax。两个文件都在同一个目录中。

我找不到任何解决方案。

确切的错误：

```
XMLHttpRequest cannot load 
http://www.asking1.com/_x_fc.php?xaction=login&xv1=something&xv2=something.
Origin http://asking1.com is not allowed by Access-Control-Allow-Origin. 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-26T14:10:41.437

`www`在技​​术上是一个子域。所以你违反了`same-origin policy`. 您可以通过设置解决此问题

```
function _fc() {
   document.domain = "www.asking1.com";
   $.get("_x_fc.php", { xaction: 'login', xv1: $('#login').attr("value"), xv2: $('#pass').attr("value") }, function (data) {

      if (data=='0') { letItGo=true; $('#loginform').submit(); }
      else ...//Do some other checks
   });
} 
```

或者您可以完全限定您作为 AJAX 请求的一部分传递的 URL，以确保它是相同的。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-26T14:09:25.907

您的答案在错误消息中：

```
XMLHttpRequest 无法加载
http://www.asking1.com/_x_fc.php?xaction=login&xv1=something&xv2=something。
Access-Control-Allow-Origin 不允许来源 http://asking1.com。
```

`http://www.asking1.com`并且`http://asking1.com`是*不同*的来源，因此这违反了同源政策。[请参阅此处](http://en.wikipedia.org/wiki/Same_origin_policy#Origin_determination_rules)的第六个示例。

如果您的代码确实是引用的，带有相对 URL，那不应该发生，因为从错误消息文档是 on `http://asking1.com`，所以相对路径将解析为`http://askign1.com/_x_fc.php`，这很好。

如果您的代码中有绝对路径，那就是您的问题。只需将其删除即可看起来像您引用的代码。

如果您的代码确实具有相对路径，那么您需要深入研究一下。某处某处使浏览器认为对`www.asking1.com`内容的请求来自`asking1.com`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-26T16:56:55.443

我是这样做的：

```
$.get("http://<?php echo $_SERVER['HTTP_HOST']; ?>/_x_fc.php", { xaction: 'login', xv1: $('#login').attr("value"), xv2: $('#pass').attr("value") }, function (data) { (...) 
```

你们是最棒的。谢谢你。

# java - 在 Java 中实现双缓冲

> ID：11670916
> 
> 赞同：6
> 
> 时间：2012-07-26T13:57:37.213
> 
> 标签：java, graphics, doublebuffered

我有一个简单的 Java JFrame 画布。我每半秒左右更新一次屏幕上的内容，并且闪烁。我想实现双缓冲以消除闪烁，但我对 Java 还很陌生，不熟悉如何做到这一点。我找到了一些示例，但不确定如何将它们的方法实现到我的中。

以下是我现在拥有的基本设置。这不是我的确切代码 - 只是基本设置的一个示例。

感谢您朝着正确的方向努力！

```
public class myCanvas extends Canvas{
    //variables
    Color rectColor=Color.red;

    public myCanvas()
    {
    }

    public void paint(Graphics graphics)
    {
        //initial setup, such as
        graphics.setColor(rectColor);
        graphics.fillRect(X,Y,W,H);
    }
    public static void main(String[] args)
    {
        myCanvas canvas = new myCanvas();
        JFrame frame = new JFrame("GUI");
        frame.setSize(frameWidth,frameHeight);
        frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        frame.getContentPane().add(canvas);
        frame.setVisible(true);
        while(true){
            rectColor=Color.green;
            canvas.validate();
            canvas.repaint();
            Thread.sleep(500);
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-26T14:17:52.303

首先，您应该避免混合使用重型和轻型组件（AWT 和 SWING），主要是因为它们使用非常不同的方法来绘制显示器（如果您想了解更多信息，请阅读[此处）。](http://java.sun.com/products/jfc/tsc/articles/mixing/)

因此`Canvas`，您可以使用`JPanel`. 这也为您提供了一个潜在的解决方案，因为`JPanel`有一个方法`setDoubleBuffered(boolean)`，更具体地说，这是在`JComponent`类中实现的。

我相信只需更换就足够了

```
public class myCanvas extends Canvas 
```

经过

```
public class myCanvas extends JPanel 
```

. 虽然我没有测试过，但我希望它对你有帮助！

编辑：当然，在设置你`frame`的方法时，你必须放置方法调用`canvas``main`

```
canvas.setDoubleBuffered(true); 
```

某处。

# sql - 为什么在底层视图中使用 DISTINCT 时 NUMBER 格式会在视图中丢失

> ID：11670917
> 
> 赞同：0
> 
> 时间：2012-07-26T13:57:46.657
> 
> 标签：sql, oracle, oracle11g

我试图弄清楚为什么在从特定视图中选择时（创建另一个视图或复制视图以创建表时）丢失了列号格式，并且惊讶地发现 DISTINCT 是罪魁祸首。使用最简单的视图来说明问题：

```
CREATE VIEW Test AS
SELECT DISTINCT CAST(1.5 AS  NUMBER(6,3)) AS TestCol from dual;

desc test;
TESTCOL NUMBER(6,3)

create view test2 as
select * from test;

desc test2;
TESTCOL NUMBER 
```

但是，如果我在创建辅助视图时也使用 DISTINCT，则会保留数字格式：

```
create view test3 as
select DISTINCT * from test;

desc test3;
TESTCOL NUMBER(6,3) 
```

对我来说更大的问题是使用复制命令从此视图生成表时：

```
copy from bob/bob@localhost/ora create test4 using select * from test;

desc test4;
TESTCOL NUMBER(38) 
```

我的数字精度丢失了：

```
select * from test4;

TESTCOL
2  -- should be 1.5 
```

但是，如果我还在`DISTINCT`复制命令中指定，数字将被正确复制。

问题是为什么`DISTINCT`会以这种方式影响数字格式？经过（诚然快速）搜索后，我找不到原因，有人知道吗？

# ios - 一个开发者帐户拥有多家公司？

> ID：11670921
> 
> 赞同：0
> 
> 时间：2012-07-26T13:57:58.460
> 
> 标签：ios, app-store, iphone-developer-program

嗨，我正在为几家公司开发一些应用程序。我在 App Store 上注意到，当应用程序发布时，还有一个“来自此开发者的更多信息”的链接。由于我正在开发的应用程序完全不相关，我是否必须为每个应用程序注册一个单独的开发者帐户？或者我是否可以设置不同的公司名称/防止用户发现由同一帐户制作的其他应用程序？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-26T14:01:02.680

如果您希望应用程序看起来来自不同的开发人员，那么您将需要单独的帐户。如果这是您需要的，那么我会让您正在开发的公司获得一个帐户并使用它为他们发布它。这样他们就可以访问他们的应用程序和报告，而无需访问您其他客户的数据。如果您不介意这些链接，那么这是一种节省一些钱并使管理更容易的方法，尽管提供统计数据稍微复杂一些。

# c# - System.Drawing.Point 运算符错误

> ID：11670924
> 
> 赞同：0
> 
> 时间：2012-07-26T13:58:10.090
> 
> 标签：c#, location, operators, picturebox

> **可能重复：**
> [如何使 + 运算符在相互添加两个点的同时工作？](https://stackoverflow.com/questions/10663499/how-to-make-the-operator-work-while-adding-two-points-to-each-other)

我的代码

```
position.Location = (e.Location + pic1.Location) - bild_posi.Location; 
```

错误之类的：

```
the operator "+" isnt compatible with "System.Drawing.Point + System.Drawing.Point" 
```

我怎样才能解决这个问题？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-26T14:01:43.003

这取决于您要如何将积分加在一起

您可以编写一个名为 AddPoints 的方法和一个名为 SubtractPoints 的方法，例如

```
private Point AddPoints(Point A, Point B)
{
    return new Point(A.X + B.X, A.Y + B.Y);
}

private Point SubtractPoints(Point A, Point B)
{
    return new Point(A.X - B.X, A.Y - B.Y);
} 
```

然后像这样使用它

```
position.Location = SubtractPoints(AddPoints(e.Location,pic1.Location),bild_posi.Location); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-26T14:02:32.073

该[`System.Drawing.Point`结构](http://msdn.microsoft.com/en-us/library/system.drawing.point.aspx)没有定义将两个`Point`对象作为参数的加法运算符的重载。

有一个加法运算符，它接受一个`Point`对象和一个`Size`对象，然后将对象中包含的一对数字与`Size`对象的值相加`Point`。该函数的文档可[在此处](http://msdn.microsoft.com/en-us/library/system.drawing.point.op_addition.aspx)获得。

您可以通过将第二个`Point`对象转换为对象来使用该版本`Size`。这很简单，因为该`Size`结构为 提供了[显式转换运算符`Point`](http://msdn.microsoft.com/en-us/library/system.drawing.size.op_explicit.aspx)，因此您只需将第二个`Point`对象转换为一个`Size`对象：

```
position.Location = (e.Location + (Size)pic1.Location) - (Size)bild_posi.Location; 
```

请注意，我必须对第三个`Point`对象做同样的事情，因为减法运算符的实现方式与加法运算符相同。

不幸的是，您不能重载 C# 中的现有运算符，但您可以创建一个包含内部逻辑的常规旧函数，然后调用它而不是使用运算符。你甚至可以使它成为`Point`类的扩展方法。

**编辑：** [坚果，事实证明我已经回答了这个问题](https://stackoverflow.com/questions/10663499/how-to-make-the-operator-work-while-adding-two-points-to-each-other/10663526#10663526)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-26T14:03:43.710

将点视为图形上的 x/y 坐标。不幸的是，您不能只添加 PointA 和 PointB 来在图表上获得 PointC。

您需要分别计算 x 和 y 坐标以实现您的目标。

话虽如此，请尝试以下操作

```
var pointA = new Point(e.Location.X + pic1.Location.X, e.Location.Y + pic1.Location.Y);
var pointB = new Point(pointA.Location.X - bild_posi.Location.X, pointA.Location.Y - bild_posi.Location.Y);
position.Location = pointB; 
```

# asp-classic - 经典 ASP：错误停止

> ID：11670927
> 
> 赞同：3
> 
> 时间：2012-07-26T13:58:17.123
> 
> 标签：asp-classic, error-handling

我有一个 ASP 页面，它在显示页面之前在开头运行两个 SQL 插入语句。如果我遇到主键冲突（即插入当天已经运行），我只想继续。

我的代码基本上是：

```
on error resume next
' insert statements 
```

执行语句后，我想恢复默认错误行为，即页面因错误消息而死。

是否有命令，例如“错误停止”、“错误死亡”或“错误默认值”，或者将错误处理重置为默认行为的命令？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-26T14:01:18.513

如果您希望它在不使用任何类型的自定义错误处理程序的情况下引发错误，请使用：

```
On Error GoTo 0 
```

您可以使用以下内容在快速示例 ASP 页面中对其进行测试：

```
<% Language="VBScript" %>

<% Response.Write "Hello" %>

<% On Error Resume Next
   Dim rs
   SET rs = Server.CreateObject("ADODB.RecordSet")

   'On Error Goto 0
   rs.MoveNext

%>

<% Response.Write "Bye" %> 
```

`On Error Goto 0`注释掉后，将`Bye`照常写入。启用后，您将收到`On Error Goto 0`以下错误：

> ADODB.Recordset 错误“800a0e78”
> 
> 对象关闭时不允许操作。

# c# - C#，从字符串错误中解析日期

> ID：11670930
> 
> 赞同：4
> 
> 时间：2012-07-26T13:58:23.280
> 
> 标签：c#

在 C# 中，我从字符串中解析日期，但它给了我错误

```
DateTime.Parse("07/26/2012"); 
```

错误

```
 System.FormatException: String was not recognized as a valid DateTime.
   at System.DateTimeParse.Parse(String s, DateTimeFormatInfo dtfi, DateTimeStyles styles)
   at System.DateTime.Parse(String s) 
```

它与日期格式有关吗？和我的电脑设置有关吗？

谢谢

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-07-26T14:00:18.933

默认情况下，`Parse`使用您当前的文化。[`ParseExact`](http://msdn.microsoft.com/en-us/library/system.datetime.parseexact.aspx)允许您手动指定日期格式。

试试这个：

```
DateTime date = DateTime.ParseExact("07/26/2012", "MM/dd/yyyy", CultureInfo.InvariantCulture); 
```

该`InvariantCulture`选项允许您忽略系统上的当前文化设置。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-07-26T14:00:41.663

也许您运行它的文化与此日期格式不兼容。你可以使用`InvariantCulture`：

```
DateTime.Parse("07/26/2012", CultureInfo.InvariantCulture); 
```

请记住，该`Parse`方法使用当前线程区域性。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-26T13:59:51.430

使用 ParseExact 方法：http: [//msdn.microsoft.com/en-us/library/w2sa9yss.aspx](http://msdn.microsoft.com/en-us/library/w2sa9yss.aspx)

```
string dateString = "Mon 16 Jun 8:30 AM 2008"; // Modified from MSDN
string format = "ddd dd MMM h:mm tt yyyy";

DateTime dateTime = DateTime.ParseExact(dateString, format,
    CultureInfo.InvariantCulture); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-26T14:03:44.483

```
 Thread.CurrentThread.CurrentUICulture = new CultureInfo( "en-US", false ); 
```

来自： http: [//msdn.microsoft.com/en-us/library/system.globalization.cultureinfo.currentculture (v=vs.71).aspx](http://msdn.microsoft.com/en-us/library/system.globalization.cultureinfo.currentculture(v=vs.71).aspx)

确保正确解析日期。

# command-line - 命令行 Zsh 中的注释

> ID：11670935
> 
> 赞同：143
> 
> 时间：2012-07-26T13:58:55.230
> 
> 标签：command-line, zsh

我最近在 Ubuntu 上从 Bash 切换到了 Zsh，对此我感到非常高兴。但是，我真的很想念一些东西，我没有找到如何实现同样的目标。

在 Bash 中，每当我输入一个长命令并注意到我之前必须运行其他东西时，我只需将其注释掉，如下所示：

```
me@home> #mysuperlongcommand with some arguments
me@home> thecommandIhavetorunfirst #and then: then up up
me@home> #mysuperlongcommand with some arguments #I just need to uncomment it! 
```

但是，这种经常发生的情况并不像使用 .git 那样容易解决`zsh`，因为`#mysuperlongcommand`将按原样运行（并导致：`zsh: command not found: #mysuperlongcommand`.

* * *

## 回答 #1

> 赞同：210
> 
> 时间：2012-08-08T21:56:00.553

刚开始尝试zsh，我也遇到了这个问题。您可以`setopt interactivecomments`激活 bash 样式的注释。

[Z Shell 手册指出](https://zsh.sourceforge.io/Doc/Release/Options.html)，虽然这是`ksh`(Korn shell) 和(Bourne shell)的默认行为`sh`，而且我猜测`bash`(Bourne-again shell) 也是如此，但它不是`zsh`(Z shell) 的默认行为：

> 在以下列表中，所有仿真中默认设置的选项都标记为`<D>`；仅在 csh、ksh、sh 或 zsh 仿真中默认设置的那些标记为`<C>`, `<K>`, `<S>`,`<Z>`视情况而定。

> INTERACTIVE_COMMENTS (-k)`<K>` `<S>` 即使在交互式 shell 中也允许评论。

* * *

## 回答 #2

> 赞同：44
> 
> 时间：2012-07-27T15:08:00.447

我用

```
bindkey "^Q" push-input 
```

从 zsh 手册：

> 将整个当前多行构造推入缓冲区堆栈并返回到顶层 (PS1) 提示符。如果当前解析器结构只有一行，这与 push-line 完全一样。下次编辑器启动或使用 get-line 弹出时，结构将从缓冲区堆栈顶部弹出并加载到编辑缓冲区中。

所以它看起来像这样：

```
> long command
Ctrl+Q => long command disappears to the stack
> forgotten command
long command reappears from stack
> long command 
```

* * *

此外，如果您设置`INTERACTIVE_COMMENTS`选项 ( `setopt INTERACTIVE_COMMENTS`)，您将能够像以前一样在交互式 shell 中使用注释。

* * *

## 回答 #3

> 赞同：21
> 
> 时间：2012-07-26T15:02:39.517

我发现自己也经常这样做。我所做的是剪切长命令，执行需要先执行的命令，然后将长命令粘贴回去。这很简单：*CTRL+U*将当前命令剪切到缓冲区中，*CTRL+Y*粘贴它。在 zsh 和 bash 中工作。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2021-08-06T07:42:25.690

```
: sh generate_sample.sh arg1 
```

添加“：”不会执行zsh中的命令。

```
sh generate_sample.sh : arg1 
```

现在 arg1 被注释掉了。

我在 Mac OS Big Sur 上并多次使用它。

编辑：“：”程序不给空格。":command" 是正确的，但 ":command" 不是

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2020-01-08T15:54:13.420

除了`setopt interactivecomments`@Lajnold 建议的之外，您可能还想添加类似以下内容以防止某些评论被写入历史记录（来自[https://superuser.com/questions/352788/how-to-prevent-a-命令in-the-zshell-from-being-saved-into-history](https://superuser.com/questions/352788/how-to-prevent-a-command-in-the-zshell-from-being-saved-into-history)）：

这将覆盖 ZSH 内置函数 zshaddhistory()：

*   将记录从第 1 列开始的注释，后面没有一个或多个空格（即我想返回的#somecommand）
*   不会记录从第 1 列开始后跟一个或多个空格的评论
*   不会记录缩进的注释，由第 1 列的空格填充
*   不会在第 1 列中记录带有空格的命令（运行您不想记录的命令的便捷快捷方式

```
setopt interactivecomments

function zshaddhistory() {
  emulate -L zsh
  if ! [[ "$1" =~ "(^#\s+|^\s+#|^ )" ]] ; then
      print -sr -- "${1%%$'\n'}"
      fc -p
  else
      return 1
  fi
} 
```

作为参考，这是默认的 zshaddhistory() [http://zsh.sourceforge.net/Doc/Release/Functions.html](http://zsh.sourceforge.net/Doc/Release/Functions.html)

```
zshaddhistory() {
  print -sr -- ${1%%$'\n'}
  fc -p .zsh_local_history
} 
```

# c++ - 多态性是否在没有指针/引用的 C++ 中工作？

> ID：11670936
> 
> 赞同：7
> 
> 时间：2012-07-26T13:58:56.423
> 
> 标签：c++, object-slicing

> **可能重复：**
> [虚拟功能对象切片](https://stackoverflow.com/questions/3479712/virtual-functions-object-slicing)

让我们考虑一下：

```
#include <vector>
#include <iostream>
using namespace std;

struct A {
    virtual void do_it() { cout << "A" << endl; } 
};

struct B : public A {
    virtual void do_it()  { cout << "B" << endl; } 
};

int main() {
    vector<A> v;
    v.push_back(B());
    v[0].do_it(); // output is A
} 
```

哪个函数会被调用？如果不存在切片，基本上是否可以在没有指针的情况下使用多态性？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-07-26T14:07:13.737

不，没有指针是不可能的。

由于您创建了一个对象`B`并将其推送到包含 的向量`A`，因此它将被复制（发送到 的复制构造函数`A`），并且 的实例`A`将被添加到向量中。即对象将被切片。

鉴于此代码：

```
struct A {
        virtual void d() { 
            std::cout << "Hello A" << std::endl; 
        } 
};

struct B : public A {
        virtual void d() { 
            std::cout << "Hello B" << std::endl; 
        } 
};

int main() {
        std::vector<A> v;
        v.push_back(B());
        v[0].d();
} 
```

输出将是：

```
Hello A 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-07-26T14:07:02.913

问题是在你的例子中实际上有[slicing](http://en.wikipedia.org/wiki/Object_slicing)。使用`push_back`在某种程度上等同于：

```
A array[N];
array[last++] = B(); 
```

第二行是切片的位置，因为数组中的每个位置都可以保存 type 中的对象，`A`但不能保存 type 中的对象`B`。

您可以使用指针来解决这个问题，定义`v`为`std::vector<A*> v`. 可能更好的是，您可以使用智能指针（[C++11](http://en.cppreference.com/w/cpp/memory)中的指针或[Boost](http://www.boost.org/doc/libs/1_50_0/libs/smart_ptr/smart_ptr.htm)中的指针）。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-07-26T14:26:22.957

> 多态性是否在没有指针/引用的 C++ 中工作？

是和不是。

**当指针或引用的静态类型*可能与它所引用的对象的*动态类型不同时，**动态*多态性在 C++ 中起作用，并且基于动态类型选择行为。这需要指针或引用，因为对象本身只有一种类型。*

 **使用模板的静态*多态性与对象完美配合，但解决了另一类问题。您的示例需要动态多态性，以根据对象的运行时类型选择行为。

> 哪个函数会被调用？

该向量包含类型的对象`A`，因此`A::do_it()`将被调用。该对象不知道它是通过切片类型的对象创建的`B`。

> 如果不存在切片，基本上是否可以在没有指针的情况下使用多态性？

当您从派生类对象创建基类对象时，总是存在切片。这就是切片的定义。

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2012-07-26T14:26:40.893

> 多态性是否在没有指针/引用的 C++ 中工作？

是的。请参阅**[静态多态性](http://www.cpptutor.com/static-polymorphism-and-dynamic-polymorphism-in-c++.htm)**。

在您的情况下，将调用基本函数，但是说多态不起作用是错误的。多态性保证可以工作，只是你没有利用它。你所拥有的基本上是一个 A 对象的集合。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-26T14:01:32.250

这不起作用，因为 sizeof(parent) 并不总是等于 sizeof(child)*

# clojure - 在clojure中生成从'a'到'z'的字符序列

> ID：11670941
> 
> 赞同：16
> 
> 时间：2012-07-26T13:59:20.110
> 
> 标签：clojure, character, sequence

我想生成从“a”到“z”的字符序列。在 scala 中，我可以非常简单地生成字符序列：

```
('a' to 'z') 
```

但是在clojure中，我最终得到以下代码：

```
(->> (range (int \a) (inc (int \z))) (map char)) 
```

或者

```
(map char (range (int \a) (inc (int \z)))) 
```

在我看来，这很冗长。有没有更好的方法来做到这一点？

* * *

## 回答 #1

> 赞同：36
> 
> 时间：2012-07-28T05:20:42.230

如果代码看起来“冗长”，通常只是表明您应该将其分解为单独的函数。作为奖励，您有机会给函数起一个有意义的名称。

只需执行以下操作，您的代码就会更具可读性：

```
(defn char-range [start end]
  (map char (range (int start) (inc (int end)))))

(char-range \a \f)
=> (\a \b \c \d \e \f) 
```

* * *

## 回答 #2

> 赞同：17
> 
> 时间：2012-07-26T14:10:15.663

根据[this StackOverflow Answer](https://stackoverflow.com/questions/10712645/clojure-generate-all-keyboard-typeable-characters)，一个简单的解决方案是：

`(map char (range 97 123))`

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2012-07-26T14:11:01.233

AFAIK，没有像 Scala 这样花哨的方式。怎么样

```
(flatten (partition 1 "abcdefghijklmnopqrstuvwxyz")) 
```

### 编辑

更花哨的方式，感谢@rhu

```
(seq "abcdefghijklmnopqrstuvwxyz") ; if you copied this from an earlier version, \w and \v were in the wrong positions 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2018-05-07T11:13:51.280

如果您对提供方便`char-range`功能的库感兴趣，我的库`djy`有一个：请参阅[`djy.char/char-range`](https://github.com/daveyarwood/djy/blob/74e1992/src/djy/char.clj#L123-L141).

```
boot.user=> (char-range \a \z)
(\a \b \c \d \e \f \g \h \i \j \k \l \m \n \o \p \q \r \s \t \u \v \w \x \y \z) 
```

它甚至可以处理足够大以至于需要 2 个字符的补充 Unicode 字符，将它们表示为字符串：

```
boot.user=> (char-range (char' 0x1f910) (char' 0x1f917))
("" "" "" "" "" "" "" "") 
```

[djy：Clojure 的字符实用函数库](https://github.com/daveyarwood/djy)

# python - PyQt 信号：设置变量

> ID：11670942
> 
> 赞同：2
> 
> 时间：2012-07-26T13:59:23.463
> 
> 标签：python, qt, pyqt, pyside

我有一个信号，它只需要做一件事：如果发出，则为变量分配给定值。为此创建一个方法似乎很愚蠢，所以我在想：有没有办法做这样的事情：

```
self.myButton.clicked.connect(self.someVariable = None) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-26T14:21:17.950

使用 lambda：

```
self.myButton.clicked.connect(lambda : self.someVariable = None) 
```

笔记：

1.  `self`在插槽调用时引用，因此您可能想要执行以下操作：

    `self.myButton.clicked.connect(lambda self=self: self.someVariable = None)`

2.  一些小部件发送带有参数的信号，您必须将它们放入 lambda 定义中。

        `self.myButton.clicked.connect(lambda checked=False, self=self: self.someVariable = None)`

更新：

lambda 中不允许赋值，所以你必须使用真正的函数或类似的东西：

```
self.myButton.clicked.connect(lambda self=self: setattr(self, 'someVariable', None)) 
```

# asp.net - 在 asp.net 运行时添加标签

> ID：11670946
> 
> 赞同：0
> 
> 时间：2012-07-26T13:59:35.333
> 
> 标签：asp.net, textbox, runtime, label

我在 asp.net 中创建一个自定义文本框控件。我在文本框中为字母、数字、电子邮件地址放置了一些内置验证。现在我想如果这些验证中的任何一个失败，则应在文本框下方动态添加标签（错误标签）。

可能吗 ？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-26T14:04:29.450

ValidationSummary 控件也可能对您有用。

[MSDN 上的验证摘要](http://msdn.microsoft.com/en-us/library/dd5c6s6h%28v=vs.71%29.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-26T14:02:45.043

您不需要单独的标签，`Validator`可以为 ASP.NET 中的每个标签指定一个合适的标签，该标签`ErrorMessage`可以出现在文本框旁边。

查看从 继承[的验证器列表](http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.basevalidator.aspx)，这将为您`BaseValidator`提供执行此操作所需的一切

如果您坚持要使用自己的验证，并且使用客户端 JavaScript 进行验证，请创建类似以下内容...

```
<asp:Label runat="server" id="lblErrors" style="display:none;">
  You have errors!
</asp:Label> 
```

然后在您的验证器中...

```
document.getElementById("<%=lblErrors.ClientID%>").style.display = 
  (anyErrors ? "" : "none"); 
```

如果您的验证都在服务器上完成，那么有类似...

```
<asp:Label runat="server" id="lblErrors" Visible="false">
  You have errors!
</asp:Label> 
```

然后在您的验证器中...

```
lblErrors.Visible = anyErrors 
```

（如果没有进行验证，您还需要确保它`lblErrors.Visible`也设置为）`false`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-26T14:01:15.370

不要添加标签，而是添加[CustomValidator](http://msdn.microsoft.com/library/system.web.ui.webcontrols.customvalidator.aspx)（或其他验证器之一）。

`Display`如果您希望它仅在检测到错误时出现，请将其属性设置为动态。

# java - 反向排序减速器键

> ID：11670953
> 
> 赞同：4
> 
> 时间：2012-07-26T13:59:57.867
> 
> 标签：java, hadoop, mapreduce

以相反的顺序将 Map 输出键获取到减速器的最佳方法是什么？默认情况下，reducer 以键的升序接收所有键。任何帮助或评论广受赞赏。

简而言之，在正常情况下，如果 map 发出键*1,4,3,5,2 ，reducer 会收到与**1,2,3,4,5*相同的键。我希望减速器改为接收*5,4,3,2,1*。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-26T14:04:35.270

在 Hadoop 1.X 中，您可以使用[`JobConf.setOutputKeyComparatorClass`](http://hadoop.apache.org/common/docs/r1.0.3/api/org/apache/hadoop/mapred/JobConf.html#setOutputKeyComparatorClass%28java.lang.Class%29).

您的比较器必须实现[`RawComparator`接口](http://hadoop.apache.org/common/docs/r1.0.3/api/org/apache/hadoop/io/RawComparator.html)。

在 Hadoop 2.X 中，这是通过[`Job.setSortComparatorClass`](http://hadoop.apache.org/common/docs/current/api/org/apache/hadoop/mapreduce/Job.html#setSortComparatorClass%28java.lang.Class%29)使用`RawComparator`.

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2015-12-05T15:19:29.123

示例，简单的代码

```
class MyKeyComparator extends WritableComparator {
    protected DescendingKeyComparator() {
        super(Text.class, true);
    }

    @SuppressWarnings("rawtypes")
    @Override
    public int compare(WritableComparable w1, WritableComparable w2) {
        Text key1 = (Text) w1;
        Text key2 = (Text) w2;          
        return -1 * key1.compareTo(key2);
    }
} 
```

然后将其添加到作业中

```
job.setSortComparatorClass(MyKeyComparator.class); 
```

您可以根据您的使用更改以下文本类型。

```
Text key1 = (Text) w1;
Text key2 = (Text) w2; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-02-27T01:55:00.100

在从映射器发出之前，您可以将密钥乘以 -1。这将导致框架按升序排序但负值 -5,-4,-3,-2,-1 然后在减速器中将其再次乘以 -1 得到 5,4,3,2,1 . 这将导致框架按 sudo 降序排序。在更复杂的排序中，最好编写一个自定义类进行比较，然后将其设置在您的驱动程序类中。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2020-10-15T19:46:24.337

根据@user3123372 的回答，您可以扩展文本类并覆盖比较方法。

```
public class NewText extends Text implements Writable,WritableComparable<BinaryComparable> { 
 @Override
 public int compareTo(BinaryComparable other) {
   return -1 * super.compareTo(other);  //Return inverse value
  }
} 
```

# ruby-on-rails - 失败/错误：期望 { click_button submit }

> ID：11670954
> 
> 赞同：0
> 
> 时间：2012-07-26T14:00:07.520
> 
> 标签：ruby-on-rails, testing, rspec

我用 rspec 测试，我还在学习，我想我是在正确的方式......但是当我测试我的 rspec 文件时，我得到了这个错误：

```
 Failures:

1) UsersController signup with valid information should create a user
 Failure/Error: expect { click_button submit }.to change(User, :count).by(1)
   count should have been changed by 1, but was changed by 0
 # ./spec/controllers/user_controller_spec.rb:31

Finished in 1.16 seconds 
```

2个例子，1个失败

我知道这意味着什么，但我不知道如何解决它，任何人都可以帮我解决这个问题...另外我把我的 rspec 文件

```
require 'spec_helper'

describe UsersController do

describe "signup" do

before { visit new_user_registration_path }

let(:submit) { "Sign up" }

describe "with invalid information" do
  it "should not create a user" do
    expect { click_button submit }.not_to change(User, :count)
  end
end

describe "with valid information" do
  before do
    fill_in "Email", :with=> "user@example.com"
    fill_in "Password", :with=> "foobar"
    #fill_in "password_confirmation", :with=> "foobar"
  end 
```

（这是出现错误...下一行）

```
 it "should create a user" do
         expect { click_button submit }.to change(User, :count).by(1)
      end
   end
  end
end 
```

感谢您的关注

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-26T14:28:28.907

所以，你有一个失败的规范。规范本身看起来不错。所以我会检查

*   实施到位了吗？您可以在浏览器中尝试该场景。它在那里工作吗？如果没有，您的测试失败（这很好）并且需要添加实现。
*   如果实施有效，请再次仔细检查规范。是否提供信息

    fill_in "电子邮件", :with=> "user@example.com" fill_in "密码", :with=> "foobar"

    足以创建用户？

*   如果您仍然没有找到原因，您可以使用 capybaras save_and_open_page （为此安装launchy gem）并在测试期间查看页面。

添加：

好的，正如我所说，这应该是一个集成测试 - 将其从规范/控制器移动到规范/请求文件夹（并更改第一行，因为您没有描述用户控制器！但这不应该导致问题）。

# blackberry - 如何在黑莓中检查互联网连接（Wifi、GPRS、EDGE）的可用性

> ID：11670956
> 
> 赞同：2
> 
> 时间：2012-07-26T14:00:13.363
> 
> 标签：blackberry, connection

如何在黑莓中检查互联网连接（Wifi、GPRS、EDGE）的可用性。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-26T14:01:09.087

试试这个....它对我有用。

```
protected static boolean isInternetAvailable() {

        boolean flag = false; 

        if(WLANInfo.getWLANState() == WLANInfo.WLAN_STATE_CONNECTED){
            flag = true;
        }
        else if(RadioInfo.isDataServiceOperational()){
            flag = true;
        }

        return flag;
    } 
```

# python - 在最终一致性的情况下如何测试？

> ID：11670963
> 
> 赞同：3
> 
> 时间：2012-07-26T14:00:37.633
> 
> 标签：python, google-app-engine

我有一个应用程序（谷歌应用程序引擎 + 高复制数据存储），到目前为止还没有使用最终一致性（高复制），我的所有测试都运行良好。

现在，对于高复制的本地测试，一旦我转向最终一致性，它们就开始失败。我该如何防止呢？或者我如何测试那部分？我需要它来进行 x 实体交易。

我正在使用类似于[https://developers.google.com/appengine/docs/python/tools/localunittesting#Writing_HRD_Datastore_Tests](https://developers.google.com/appengine/docs/python/tools/localunittesting#Writing_HRD_Datastore_Tests)

编辑：

我需要正确测试代码。我遇到的问题是测试部分。任何人如何测试最终一致性？

编辑1：我暂时解决了在上面链接的示例中使用probability=100% 的问题。但想法是受欢迎的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-27T15:36:14.777

您面临的情况是 High Replication Data Store 的缺点之一（或称其为功能）。通常这些情况是通过使用 memcache 的透明缓存来解决的。如果您之前有使用数据库主/从架构的经验，那么从属滞后以类似的方式解决。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-26T15:01:52.017

修复故障。

由于您没有代码并且非常模糊，因此很难回答您的问题。但本质上，您的应用程序代码或您的测试都没有考虑最终的一致性（即，查询可能不会返回数据库中刚刚更新的值）。当您在数据存储中打开最终一致性时，您得到的查询结果会有所不同。

您要么需要更新代码以处理事务的最终一致性情况，要么更新测试以预期最终一致性结果。

**编辑**

这个问题还是太笼统了。这取决于你是在做功能测试还是系统测试。您是否正在寻找特定的结果？或者只是一个 HTTP 状态=200？

一般来说，像所有测试一样，您需要确定什么构成成功，什么构成失败。在给定的情况下，旧数据出现是否可以接受？在这种情况下，测试应该使用旧值或新值成功。

我建议您开始考虑是否要运行确定性或非确定性测试。对于确定性测试，您基本上希望以概率 = 0 和概率 = 100 运行相同的测试，并确保您获得两者的正确值。

除了作为压力测试之外，我还没有弄清楚如何以一种完全有用的方式编写非确定性测试。您可以验证是否满足某些要求的值，以及其他最终一致的值是否在有效范围内。这是很多工作，因为很可能您的值范围可能取决于另一个值范围，并且由于您的最终输出可能包含两者，因此您必须验证组合是否正确 - 基本上您结束了如果您真的想验证一切是否正确，请复制您的一些应用程序逻辑。

# javascript - 在全局范围内定义的具有相同名称的变量

> ID：11670964
> 
> 赞同：5
> 
> 时间：2012-07-26T14:00:38.640
> 
> 标签：javascript

谁能解释一下，为什么下一个 js 代码会用“string1”文本上升两个警报窗口，而不是用“未定义”文本上升第二个？如果两个变量都在同一范围内描述..

```
var a = 'string1';  
alert(a);  
var a;  
alert(a);​ 
```

[http://jsfiddle.net/FdRSZ/1/](http://jsfiddle.net/FdRSZ/1/)

谢谢

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-26T14:03:03.127

变量声明（和函数声明）被*提升*到它们出现的范围的顶部。分配发生在适当的位置。代码的有效解释如下：

```
var a;
var a;
a = 'string1'; 
```

例如，考虑如果在`if`语句体中声明变量会发生什么：

```
console.log(myVar); //undefined (NOT a reference error)
if (something === somethingElse) {
    var myVar = 10;
}
console.log(myVar); //10 
```

因为 JavaScript 没有块作用域，所以每个作用域中的所有声明都被提升到该作用域的顶部。如果你试图记录一些没有声明的变量，你会得到一个引用错误。上面的例子是这样解释的：

```
var myVar; //Declaration is hoisted
console.log(myVar);
if (something === somethingElse) {
    myVar = 10; //Assignment still happens here
}
console.log(myVar); 
```

因此，即使条件评估为`false`，该`myVar`变量仍然可以访问。这是[JSLint](http://jslint.com/)会告诉您将所有声明移动到它们出现的范围顶部的主要原因。

* * *

稍微详细一点……这是[ECMAScript 5 规范](http://es5.github.com/#x10.5)必须说的（加粗强调）：

> *对于代码*中的每个*VariableDeclaration*和*VariableDeclarationNoIn d*，按源文本顺序执行
> 
>  **   令*dn*为*d*中的*标识符*。
> **   让 *varAlreadyDeclared*成为调用*env 的*HasBinding 具体方法并传递*dn*作为参数的结果。*   **如果*varAlreadyDeclared*是`false`，那么**
>     *   调用*env 的*CreateMutableBinding 具体方法，传递*dn*和 *configureBindings*作为参数。
>     *   调用*env 的*SetMutableBinding 具体方法，传递*dn*、`undefined`和*strict*作为参数。**

 **因此，如果已经存在与我们现在尝试绑定的标识符的绑定，则不会发生任何事情。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-26T14:03:12.567

那是因为 JavaScript 做了一些叫做*变量提升*的事情。事实上，你的 JS 看起来像这样：

```
var a; // hoisted -> declared on top

a = 'string1';
alert(a);
alert(a); 
```

有关 JavaScript 工作原理的更多详细信息，请参阅[良好的 C# 习惯如何鼓励不良的 JavaScript 习惯](http://enterprisejquery.com/2010/10/how-good-c-habits-can-encourage-bad-javascript-habits-part-3/)。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-07-26T14:02:30.467

那是因为第二个`var a`不是单独的变量声明。就 javascript 解释器而言，它与第一个解释器相同。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-07-26T14:02:37.783

`var`表示“将此变量的范围限定为此函数”而不是“将此变量的值设置为`undefined`”。

如果变量已经作用于函数，则`var foo`意味着与普通的相同`foo`**

# python - 小胡子、通天塔和 gettext

> ID：11670967
> 
> 赞同：3
> 
> 时间：2012-07-26T14:00:41.850
> 
> 标签：python, flask, jinja2, mustache, python-babel

我正在使用 Flask、jinja 和 Mustachjs。

为了完成工作，我使用了 {% raw %} 标签。

现在，它是一个多语言应用程序，我使用 Babel。

我能怎么做 ：

```
 {% raw %}
  <script id="details" type="text/template">

        <table class="table" >

        <thead>
        <tr>
                <th>**{{gettext('col1')}}</th>
                <th>**{{gettext('col2')}}</th>
                <th>**{{gettext('col6')}}</th> 

        </tr>
        </thead>
        <tbody>
        {{#skyrsla}}
                <tr>
                        <td> {{index}}</td>
                        <td> {{nafn}}</td>
                        <td> {{mean_growth_index}}</td>
                </tr>
        {{/skyrsla}}
        </tbody>

        </table>
</script>
{% endraw %} 
```

由于是在原始标签之间，所以 Babel 扩展并没有检测到 {{gettext('col1')} 有没有办法改变 Babel 的配置。

我的实际配置如下：

```
[python: **.py]
[jinja2: **/templates/**.html]
extensions=jinja2.ext.autoescape,jinja2.ext.with_ 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-26T20:48:30.780

只需在调用之间结束您的原始块`gettext`：

```
{% raw %}
  <script id="details" type="text/template">

        <table class="table" >

        <thead>
        <tr>
                <th>**{% endraw %}{{gettext('col1')}}{% raw %}</th>
                <th>**{% endraw %}{{gettext('col2')}}{% raw %}</th>
                <th>**{% endraw %}{{gettext('col6')}}{% raw %}</th> 

        </tr>
        </thead>
        <tbody>
        {{#skyrsla}}
                <tr>
                        <td> {{index}}</td>
                        <td> {{nafn}}</td>
                        <td> {{mean_growth_index}}</td>
                </tr>
        {{/skyrsla}}
        </tbody>

        </table>
</script>
{% endraw %} 
```

# tridion - 使用 SDL Tridion 2011 SP1 模板生成器“基础连接已关闭”

> ID：11670969
> 
> 赞同：2
> 
> 时间：2012-07-26T14:00:53.190
> 
> 标签：tridion, tridion-2011

从安装在 64 位 Windows 7 笔记本电脑上的 Template Builder (TB) 连接到 CMS 时，我们偶尔会收到以下错误：

```
The underlying connection was closed: An unexpected error occurred on a receive.
   at System.Web.Services.Protocols.WebClientProtocol.GetWebResponse(WebRequest request)
   at System.Web.Services.Protocols.HttpWebClientProtocol.GetWebResponse(WebRequest request)
   at System.Web.Services.Protocols.SoapHttpClientProtocol.Invoke(String methodName, Object[] parameters)
   at Tridion.ContentManager.Templating.CompoundTemplates.DomainModel.Model.Login(Uri contentManager, NetworkCredential credentials)
   at Tridion.ContentManager.UI.CompoundTemplateDesigner.DesignerForm.LogonAs(Uri uri, Exception initialError) 
```

此错误似乎仅在从客户端计算机访问时发生，而从安装在 CMS 服务器本身上的 TB 连接时似乎从未发生。这似乎也不是特定于 CMS 服务器，因为在连接到其他环境和其他客户端安装时也会间歇性地发生错误。我已尝试重新安装 TB，但问题仍然存在。

有没有其他人遇到过类似的问题，或者对可能导致错误的原因有什么建议？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-26T14:58:05.167

如果在托管模板 Web 服务的 CM 服务器上打开了太多连接，就会发生这种情况。

尝试重新启动服务器。如果仍然继续在模板 Web 服务中添加以下配置：

```
<httpRuntime executionTimeout="3600" maxRequestLength="102375" ></httpRuntime> 
```

这将使文件`../Tridion/Templating/web.config`看起来像下面这样：

```
<configuration>
  <tridionConfigSections>
    <sections>
      <clear />
      <add filePath="..\config\Tridion.ContentManager.config" />
    </sections>
  </tridionConfigSections>
  <system.web>
    <httpRuntime executionTimeout="3600" maxRequestLength="1023750"/>
    <authentication mode="Windows" />
    <authorization>
      <allow users="*" />
      <deny users="*" />
    </authorization>
    <identity impersonate="false" />
  </system.web>
  <appSettings>
    <add key="cmeWebRoot" value="WebUI" />
  </appSettings>
</configuration> 
```

# android - 像启动器android这样的垃圾布局？可能吗？

> ID：11670972
> 
> 赞同：0
> 
> 时间：2012-07-26T14:01:01.570
> 
> 标签：android, android-layout, icons, launcher, recycle-bin

是否可以实现像启动器 android 这样的垃圾布局？在我的应用程序中，从布局中移动图标，然后我会在此布局中将其删除，例如“消失”。

例如，按住我要删除的图标。然后将其拖入布局“垃圾箱”，此布局消失后。

谢谢

# google-apps-script - 使用 addListItem 时如何触发电子邮件通知？

> ID：11670979
> 
> 赞同：0
> 
> 时间：2012-07-26T14:01:16.513
> 
> 标签：google-apps-script

在 Google 协作平台中，可以在列表页面更改时订阅通知，或者更确切地说，在项目或添加和删除时订阅通知。但是，当列表项由脚本创建时，似乎不会出现这些电子邮件通知。是否有另一个调用或标志设置会允许这种情况发生？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-27T13:23:23.390

在问题跟踪器中打开了一个类似的功能请求，为站点中的公告添加此行为。我已将您的请求添加到该请求中：[http ://code.google.com/p/google-apps-script-issues/issues/detail?id=710](http://code.google.com/p/google-apps-script-issues/issues/detail?id=710)

# c# - 添加第二个数据时出现 ObjectStateManager 错误（实体框架）

> ID：11670983
> 
> 赞同：3
> 
> 时间：2012-07-26T14:01:31.110
> 
> 标签：c#, entity-framework, savechanges, objectstatemanager

当我添加多个连续数据时，SaveChanges() 方法中发生错误。

异常 **对数据库的更改已成功提交，但在更新对象上下文时发生错误。ObjectContext 可能处于不一致的状态。内部异常消息：AcceptChanges 无法继续，因为对象的键值与 ObjectStateManager 中的另一个对象冲突。在调用 AcceptChanges 之前确保键值是唯一的。**

我的基础服务

```
public void Delete(T entity)
    {
        ObjectSet.DeleteObject(entity);
        Context.SaveChanges();
    }

    public void Add(T entity)
    {
        ObjectSet.AddObject(entity);
        Context.SaveChanges();

    }

    public void Attach(T entity)
    {
        ObjectSet.Attach(entity);
        Context.SaveChanges();
    }

    public void Update(Expression<Func<T, bool>> where, T entity)
    {
        var ent = First(where);
        ent = entity;
        Context.SaveChanges();
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-11-05T16:55:55.873

我遇到了这个问题，发现我在做以下操作，使得EntityFramework变得与数据库中的数据不同步：

1）通过实体框架的上下文对表的行进行查询。这样做，EntityFramework 上下文会在其本地视图中保留这些对象的副本。

2）通过 SQL 查询截断表（因此实体框架上下文不知道发生了这种情况。实体仍然在其本地视图中，即使它们在数据库中被截断）。由于表的主键是自动递增的（IDENTITY (1,1)），截断调用使表的主键计数器重置为 1。

3）通过Entity Framework向表中添加行，然后调用SaveChanges()。由于表截断，新行的主键为 1。创建行后，EntityFramework 查询数据库以获取行值，创建新实体，填充实体中的值并将实体添加到其本地视图.

由于上下文已经在其本地视图中存储了另一个主键 = 1 的对象（从步骤 1 开始），因此在尝试将具有相同主键的第二个实体添加到本地视图时会引发异常。

为避免这种情况，实体框架必须在进行新操作之前与数据库内容保持同步。

就我而言，我必须通过调用来解决这个问题：

```
Context.MyTableEntities.Local.Clear();
Context.SaveChanges(); 
```

所以先删除 Entity，然后将上下文告诉它。然后我用 SQL 查询截断了表以重置自动增量计数器。

由于首先从本地视图中删除了对象，然后进行了表截断（因此它重置了自动增量计数器），因此避免了主键冲突。

希望有帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-26T14:21:23.847

您确定要向 EF添加*不同的实体吗？*内部异常状态`AcceptChanges()`失败，因为您尝试添加的当前实体与已被跟踪的实体共享密钥。

有关更多信息`AcceptChanges()`，请查看：http: [//msdn.microsoft.com/en-us/library/system.data.objects.objectstateentry.acceptchanges.aspx](http://msdn.microsoft.com/en-us/library/system.data.objects.objectstateentry.acceptchanges.aspx)

# wpf - DataTemplateTrigger 不适用于数据模板选择器

> ID：11670986
> 
> 赞同：0
> 
> 时间：2012-07-26T14:01:39.243
> 
> 标签：wpf, triggers, datatemplate

我已经定义了一个数据模板，它有一个触发器，如果​​选择了该项目，该触发器应该简单地改变背景颜色。由于某种原因，它似乎不起作用。

```
 <DataTemplate x:Key="existingDeviceTemplate" >
            <StackPanel Orientation="Horizontal">
                <Border Name="bd" Background="Green"  BorderThickness="1" Padding="5">
                    <Grid>
                        <Grid.RowDefinitions>
                            <RowDefinition/>
                        </Grid.RowDefinitions>
                        <Grid.ColumnDefinitions>
                            <ColumnDefinition />
                            <ColumnDefinition />
                            <ColumnDefinition />
                        </Grid.ColumnDefinitions>

                        <TextBlock Grid.Column="0" Text="{Binding Path=Name}" Width="200"/>
                        <Button Grid.Column="1" Content="Settings" Click="cmdSettings_Clicked"/>
                        <Button Grid.Column="2" Content="Delete" Click="cmdDelete_Clicked"/>
                    </Grid>
                </Border>
            </StackPanel>
            <DataTemplate.Triggers>
                <DataTrigger Binding="{Binding IsSelected}" Value="true" >
                    <Setter TargetName="bd" Property="Background" Value="Red"/>
                </DataTrigger>
            </DataTemplate.Triggers>
        </DataTemplate> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-26T17:57:16.740

尝试绑定到的`IsSelected`属性`ListBoxItem`：

```
<DataTemplate.Triggers>
     <DataTrigger Binding="{Binding IsSelected, RelativeSource={RelativeSource AncestorType={x:Type ListBoxItem}}}" Value="true">
          <Setter TargetName="bd" Property="Background" Value="Red" />
     </DataTrigger>
</DataTemplate.Triggers> 
```

*如果您的列表控件是 a`ListView`您必须替换`x:Type ListBoxItem`为`x:Type ListViewItem`.*

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-27T18:15:51.623

您的绑定模型是否有一个名为 IsSelected 的属性？我的猜测是你的意思是行的 IsSelected 属性。如果是这种情况，您需要将带有 FindAncestor 的 RelativeSource 绑定到 ListItem

# ios - 来自用户输入的年龄验证

> ID：11670990
> 
> 赞同：1
> 
> 时间：2012-07-26T14:01:44.830
> 
> 标签：ios

我想为 iOS 创建一个年龄验证系统

我有一个用户通过 UITextField 输入的日期。如何将此日期与当前日期进行比较以了解用户是否未满 18 岁。

这是我到目前为止所做的，但即使今天的年份 - 出生年份 = 18，但显然人们的年龄可能小于 18 岁；

```
 NSArray *ageArray = [ageString componentsSeparatedByString:@"/"];

    int day = [[ageArray objectAtIndex:0] intValue];
    int month = [[ageArray objectAtIndex:1] intValue];
    int year = [[ageArray objectAtIndex:2] intValue];

    if(day <= 31 && month <= 12){

        NSDateFormatter* df = [[NSDateFormatter alloc] init];
        [df setDateFormat:@"MM/dd/yyyy"];
        NSDate* userDate = [df dateFromString:ageString];

        NSDateComponents *otherDay = [[NSCalendar currentCalendar] components:NSEraCalendarUnit|NSYearCalendarUnit|NSMonthCalendarUnit|NSDayCalendarUnit fromDate:userDate];
        NSDateComponents *today = [[NSCalendar currentCalendar] components:NSEraCalendarUnit|NSYearCalendarUnit|NSMonthCalendarUnit|NSDayCalendarUnit fromDate:[NSDate date]];

        NSLog(@"%d - %d\n%d", [today year], [otherDay year], ([today year] - [otherDay year]));

        if([today year] - [otherDay year] =< 18) {
            NSLog(@"too young");

            if([today month] < [otherDay month])

        } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-26T14:21:32.753

你可以这样做：

```
NSDate *dateA = [NSDate date];
NSDate *dateB = [NSDate date]; //User's age

NSCalendar *calendar = [[NSCalendar alloc] initWithCalendarIdentifier:NSGregorianCalendar];
NSDateComponents *components = [calendar components:NSYearCalendarUnit|NSMonthCalendarUnit|NSDayCalendarUnit
                                               fromDate:dateA
                                                 toDate:dateB
                                                options:0];

NSLog(@"Difference in date components: %i/%i/%i", components.day, components.month, components.year);

if (components.year < 18) {
    //Under Age
} else {
    //Ok Age
} 
```

在那个 NSLog 你会得到这些日期之间的差异

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2012-07-26T14:13:31.557

此代码应将 NSTimeInterval 转换为天数：

```
NSTimeInterval time = [enteredDate timeIntervalSinceDate:currentDate];
NSInteger days  = time/60/60/24; 
```

然后您可以使用它与设定的天数进行比较。

# php - 为什么 is_dir() 函数不适用于 PHP 中的网络路径？

> ID：11670994
> 
> 赞同：0
> 
> 时间：2012-07-26T14:01:53.737
> 
> 标签：php, file-io, samba

我正在检查我的代码，如果目录存在或不存在`is_dir()`.

它适用于本地驱动器，但不适用于网络路径。

谁能帮我吗？

这是我的示例代码：

```
public function setXMLFilePath($filePath) {
    if(is_dir($filePath)) {
        $this->XMLFilePath = $filePath;
        $retVal = true;
    } else {
        $ratVal = false;
    }

    return $retVal;
}//setXMLFilePath 
```

我的网络路径是这样的：

```
$filePath = '\\Nas-heidi\heidi\FAS\Polish GameRobot\Export_Raffle\'; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-26T14:08:17.940

与文件相关的功能包含[一些协议](http://php.net/manual/en/wrappers.php)，Windows 网络架构不是其中之一。

同样值得注意的是，当您访问这些（外部）协议之一时，您不应该使用速记，例如`\\\network_computer\network_folder\`您应该使用完整的协议规范，例如`ftp://`/ `http://`/`ssh://`如果存在 Windows 网络协议，它可能会有这样一个标识符。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-26T14:13:43.213

这可能是因为运行 PHP 脚本的帐户（可能是启动 Apache 服务的计数）对此类目录没有权限。

# php - Htaccess 将所有 .html 页面重定向到 php 获取变量

> ID：11670997
> 
> 赞同：1
> 
> 时间：2012-07-26T14:01:54.497
> 
> 标签：php, .htaccess, mod-rewrite, redirect

我的网址目前如下：

/events.html /contact.html

我想要做的是，将它们重定向到一个 php get 变量。

例如 events.html = index.php?page=events

关于如何实现这一点的任何想法？

多谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-26T14:04:46.637

你在这里寻找[`mod_rewrite`](http://httpd.apache.org/docs/current/mod/mod_rewrite.html)。

使用规则类似于（假设 mod_rewrite 已安装并启用，并且您将其放入 .htaccess 文件中）

```
RewriteEngine on
RewriteRule ^/(.*).html /index.php?page=$1 
```

# jquery - 通过从表单中获取值，单击 jquery 函数将值存储在数据库中

> ID：11670998
> 
> 赞同：0
> 
> 时间：2012-07-26T14:01:56.277
> 
> 标签：jquery, ajax, cakephp-2.1

如何在单击 jquery 函数时提交选择值并将值保存在数据库中并返回同一页面？

我有这个选择框，这个选择框不在任何表单内。

```
<select name="myRating" class="rating" id="serialStar">  
   <option value="1">Alright</option>  
   <option value="2">Ok</option>  
   <option value="3">Getting Better</option>  
   <option value="4">Awesome</option> 
   <option value="5">Loved!</option>  
</select> 
```

我正在使用下面的 jQuery 函数将选择值发送到控制器操作“set_ratings”

```
$(document).ready(function(){
$(".ui-rating").click(function(){
    // we want to store the values from the select box, then send via ajax below
    var fid = $('#serialStar').val();
    $.ajax({
        type: "POST",
        url: "http://localhost/reelstubs/movies/set_ratings",
        data: "fid="+ fid
    });
    return false;
}); 
```

});

现在我想将值保存到数据库中。我怎样才能做到这一点？方式合适吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-26T14:15:17.487

来自 ajax 的 url 不能是来自 localhost 的相对路径。

代替

`url: "http://localhost/reelstubs/movies/set_ratings"`

利用

`url: "../reelstubs/movies/set_ratings"`或者你的 php 文件在哪里

给数据库增值的方法，从这里学习： http: [//www.ibm.com/developerworks/opensource/library/os-php-jquery-ajax/](http://www.ibm.com/developerworks/opensource/library/os-php-jquery-ajax/) （这是一个例子）

祝你好运