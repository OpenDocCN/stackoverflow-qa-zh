# StackOverflow 问答 12158000-12158999

# php - 在 PHP 中去除特定的 HTML 标签

> ID：12158000
> 
> 赞同：2
> 
> 时间：2012-08-28T11:09:35.087
> 
> 标签：php, strip-tags

我搜索了很多关于从某些特定数据库内容（字段）中剥离 HTML 标记的内容。我在某个地方得到了这个代码。它工作正常。但是，它用于剥离除指定标签之外的所有 HTML 标签。

但我想剥离我指定的标签并保留其他标签。我该怎么做？

我找到的用于剥离除提供的所有标签之外的所有标签的代码是这样的：

```
<?php 
   echo strip_tags(nl2br($content), "<img><b><br><p><a>"); 
?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-22T21:42:20.900

strip_tags 还有第二个参数，您可以在其中设置您不想删除的所有标签。

这样，它只会删除您不想保留的所有内容。

[http://php.net/manual/en/function.strip-tags.php](http://php.net/manual/en/function.strip-tags.php)

# xslt - 识别 XSLT 中的 null 元素，即使在子元素中也没有值

> ID：12158008
> 
> 赞同：3
> 
> 时间：2012-08-28T11:10:06.433
> 
> 标签：xslt, xpath, xslt-1.0

检查 Null 元素

```
<image><a><img src="abcd"/></a></image> 
```

XSLT 模板：

```
<xsl:if test="image!=''">
IMAGE HAS TEXT OR INNER ELEMENT
</xsl:if> 
```

尽管“图像”元素具有子元素，但我得到空白输出。理想情况下它不为空。

我必须检查它应该具有值或子元素的条件。子元素可以为空。

如何纠正这种情况。

谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-28T11:27:38.997

**使用**：

```
image[string() or node()] 
```

`true()`仅当当前节点至少有一个子节点时才计算`image`结果，这样它的字符串值是非空的，或者它有子节点（或两者都有）。

**这可以简化为**：

```
 image[node()] 
```

考虑到为了具有字符串值，元素必须在其子树中具有文本节点后代。

**如果您希望（如果有）的字符串值`image`不是全空白**，请将上述 XPath 表达式中的第一个修改为：

```
image[normalize-space() or node()] 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-28T11:27:11.097

用于`<xsl:if test="image/node()">...</xsl:if>`检查`image`元素是否有任何类型的子节点或`<xsl:if test="image/*">...</xsl:if>`测试`image`元素是否至少有一个子元素。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-28T11:36:36.807

您可以使用它来检查任何子节点（文本、元素等）

```
<xsl:template match="image">
    <xsl:if test="node()">
        IMAGE HAS TEXT OR INNER ELEMENT
    </xsl:if>
</xsl:template> 
```

或者你可以更具体：

```
<xsl:template match="image">
    <xsl:if test="a | text()">
        IMAGE HAS TEXT OR INNER ELEMENT
    </xsl:if>
</xsl:template> 
```

# java - 在另一个类中访问 Try-Catch 块的代码

> ID：12158013
> 
> 赞同：2
> 
> 时间：2012-08-28T11:10:36.777
> 
> 标签：java, exception

可能是愚蠢的，但我想澄清我对这段代码的技术理解：

```
import netscape.*;//ldap jar
public class A {

    public void method() {
        ...

        try {
            //code is written here.
             LDAPSearchResults lsr = ldi.search(LDAPConnectionInfo.MY_SEARCHBASE,LDAPConnectionInfo.MY_SCOPE,LDAPConnectionInfo.MY_FILTER,null,false);
             while(lsr.hasMoreElements()){
             LDAPEntry findEntry = (LDAPEntry)lsr.nextElement();

        } catch(...) { 
        } 
    } 
} 
```

现在我打电话给另一个班级

```
public class B {
    A a = new A();
    //here I want to use attributeName 
} 
```

*   我如何在 B 类中访问 A 类的成员（在 try 块中）。
*   任何处理尝试块代码以便在另一个类中重用的方法。
*   我怎么能在另一个类中处理所有这些异常。

我需要任何修改...

Object 类型的调用方法。

```
public class C{
private String attributeName;

   public String getAttributeName() {
       return attributeName;
   }

public Object method(){
attributeName=lAttribute.getName(); 
}
} 
```

*   如何将此 Object 类型的方法打印到 String（在 jsp 页面中）...任何输入

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-28T11:14:33.037

你需要一个班级成员`A`和一个吸气剂：

```
public class A {
   private String attributeName;

   public String getAttributeName() {
       return attributeName;
   }

   public void method(){
        ...

        try {
            //code is written here.
            attributeName = lAttribute.getName(); 
        }
        catch() { 
        } 
   } 
} 
```

然后：

```
public class B {
    A a = new A();

    // somewhere
    String str = a.getAttributeName();
} 
```

无法像在原始示例中那样访问方法的私有变量，因为它们仅在方法调用期间存在于堆栈中。

**编辑**：我注意到另一个问题：

> 我怎么能在另一个类中处理所有这些异常。

我假设您想在其他地方调用您的方法并在那里捕获异常。在这种情况下，您可以使用`throws`关键字来传达您的方法会将异常传递给调用者：

```
public class A {

    public void method() throws IOException {

        //code is written here.
        String attributeName = lAttribute.getName(); 
    } 

    public void anotherMethod() {
        try {
            method();
        } catch(IOException ex) {
            ...
        } 
    }
} 
```

那么如果其他一些代码调用`method`它将被迫处理或进一步传播异常。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-28T12:12:14.953

为什么不`return`呢？

```
public String method() {
String attributeName
    try {
        //code is written here.
        attributeName = lAttribute.getName(); 
    } catch(...) { 
    } 
return attributeName;
}

public class B {
A a = new A();
String attributeName = a.method();
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-28T11:18:40.540

> 我怎么能在另一个类中处理所有这些异常。

在您的调用类中，您可以捕获 Throwable （它将捕获所有异常和错误）

```
try {
....
}
catch (Throwable t) {
//do something with the throwable.
} 
```

如果你不想在 Java 中捕获错误（我只在搞乱 ImageIO 并且有内存问题时才这样做）然后捕获异常而不是

> 任何处理尝试块代码以在另一个类中重用的方法

在这里你可以在另一个类中创建一个方法，然后在你的 try /catch 块中调用它

```
public class XYX {
    public void methodForTry() throws Exception {
    //do something
    }
}

try {
    new XYZ().methodForTry();
}
catch (Exception e){
} 
```

您可能想也可能不想在这里创建新的 XYZ。这取决于这个对象可能持有或不持有什么状态。

至于最后一个问题，我认为都铎王朝的回答涵盖了这个

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-28T11:53:33.627

您的问题可能是关于提取代码模板

```
try { ... do stuff ... } 
catch (MyFirstException e) { ...handle ... }
catch (MySecondException e) { ...handle ... }
... more catch ... 
```

您只想更改`... do stuff ...`零件的地方。在这种情况下，你需要Java 8 附带的*闭包*，而今天你需要一些相当麻烦的东西，比如：

```
public static void tryCatch(RunnableExc r) {
  try { r.run(); } 
  catch (MyFirstException e) { ...handle ... }
  catch (MySecondException e) { ...handle ... }
  ... more catch ...
} 
```

哪里`RunnableExc`会有

```
interface RunnableExc { void run() throws Exception; } 
```

你会这样使用它：

```
tryCatch(new RunnableExc() { public void run() throws Exception {
   ... do stuff ...
}}); 
```

# jquery - 无法在 jQuery 中获取文本

> ID：12158015
> 
> 赞同：1
> 
> 时间：2012-08-28T11:10:54.903
> 
> 标签：jquery, html, datatables, jeditable

我有一个`<td>`像这样的元素：

`<td class="right editable qty">100</td>`

我想得到那个 ( `100`) 里面的值，但是遇到了一些问题。

这是我的脚本：

```
$('#example tbody tr td.qty').change(function () {
    var sQty = $(this);

    console.log(sQty); // print [<td class="right editable qty">100</td>]
    console.log($.text(sQty)); // print nothing
    console.log(sQty.val()); // print nothing
    console.log(sQty.text()); // print nothing
    console.log(sQty.html()); // print <form><input style="width: 100%; height: 100%; " autocomplete="off" name="value"></form>
}); 
```

我的脚本有什么遗漏吗？

*我正在使用：[DataTables](http://datatables.net/)和[jeditable](http://www.appelsiini.net/projects/jeditable)*

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-28T11:14:20.007

你可以得到价值`$(selector).text();`

改变

```
console.log($.text(sQty)); 
```

至

```
console.log(sQty.text()); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-10-27T15:08:55.917

我写这个以防有人发现这个问题

当尝试选择各种`<td>`时，为了从多个`<td>`标签中获取（或设置）每个值，如下所示：

```
<td class='myClass'>1</td>
<td class='myClass'>2</td>
<td class='myClass'>3</td> 
```

如果使用`.text()`,`.val()`或`.html()`, 如下：

```
//Example
var tdContainer;
for (int k = 0; k < $("td.myClass").length; k++){
     var tdContainer = $("td.myClass")[k].text() + ", "; //Throws "Uncaught TypeError"
} 
```

Javascript 抛出错误，返回“[used method] is not a function”。

在这种情况下，**解决方案**是使用`.textContent`：

```
//Example
var tdContainer;
for (int k = 0; k < $("td.myClass").length; k++){
     tdContainer += $("td.myClass")[k].textContext + ", ";
} 
```

希望这对你们中的一些人有所帮助。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-28T11:13:30.070

提示：来自[.change](http://api.jquery.com/change/)文档

> 当元素的值改变时， **change**事件被发送到元素。此事件仅限于元素、框和元素。用于选择框、复选框和单选按钮。

所以得到文本 [`.text()`](http://api.jquery.com/text/)

```
console.log($('#example td.qty').text()); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-29T01:50:28.840

```
/* Apply the jEditable handlers to the table */
oTable.$('td.editable').editable(
    function(value, settings) {
        if($(this).hasClass('qty')) // The editable class not only on one column.
            console.log(value);
        return(value);
    },
    {   
        "height": "100%",
        "width": "100%"
    }
); 
```

当我尝试运行`jEditable`处理程序和`change`事件时（关于上面的问题），我发现`change`事件将首先触发，然后是`jEditable`处理程序。处理`jEditable`程序将做的是将`value`和设置返回到已编辑的单元格中。

默认情况下，表格单元格将如下所示：

`<td class="right editable qty">1</td>`

当我单击单元格时，它将生成此表单：

```
<td class="rigth editable qty">
    <form>
        <input style="width: 100%; height: 100%; " autocomplete="off" name="value">
    </form>
</td> 
```

正如我们看到的单元格的值消失了（我在尝试使用萤火虫检查元素时得到的这个表格）。当我尝试更改萤火虫`input`内元素的值时，`form`根本没有显示任何变化（该值隐藏在某处）。所以当我按下`Enter`按钮时，我意识到`change`事件将首先被触发，并且在那一刻`<td>`元素仍然是空的，这就是为什么当我们尝试打印值时仍然是空的。

因此`change`，我没有使用事件来获取值，而是在`jEditable`将值返回到单元格之前使用处理程序（如果我们按下`Enter`按钮，处理程序将被触发）。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-28T11:15:13.740

首先`td`没有`change`属性用途`click`而是

```
$('#example tbody tr td.qty').click(function () {
    var sQty = $(this);

    console.log(sQty.html()); // print [<td class="right editable qty">100</td>]
    console.log(sQty.text()); // print 100
    console.log(sQty.val()); // nothing will print,val() is for input type elements
}); 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-08-28T11:45:35.317

嗨朋友，

您可以通过使用类名称（.righteditableqty）选择该列，然后使用 .text() 函数选择文本来简单地从表行的表列中获取值。

或使用该脚本：

***`$(".righteditableqty").Text()`***

# ruby-on-rails - 如何选择结果集而不在 Rails 中缓存

> ID：12158026
> 
> 赞同：0
> 
> 时间：2012-08-28T11:11:14.563
> 
> 标签：ruby-on-rails, ruby-on-rails-3.1

我想使用 rails 运行 NOn_cached 查询。有什么帮助吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-28T14:04:42.440

Rails 只会在请求-响应周期内缓存查询结果，因此它只会在请求期间有效。

您应该能够使用未缓存的命令

未缓存的做 find(blah) 结束

至少在控制器动作中。

另一种（糟糕！）方法是添加一个查询属性来破坏缓存

where("name= ? OR 0= ?", 'smith', rand(100))

或类似的，这样你就得到 OR '0=0.3567' 这对于每个请求总是错误的并且不同。

你*真的*很想使用未缓存的:)

# javascript - jquery ui中的iframe div内的可放置div

> ID：12158030
> 
> 赞同：2
> 
> 时间：2012-08-28T11:11:38.667
> 
> 标签：javascript, jquery, jquery-ui, jquery-ui-draggable

我们的问题：我在 iframe 外面有一个可拖动的东西，里面有一个可放置的目标。在这里，我将 iframe 显示为包含由其 src 属性加载的 HTML 片段。

***所以见代码：***

内部 iframe 页面 (inner_iframe.html)：

```
<body style="cursor: auto;">
    <div id="container">
    </div>
</body> 
```

主页 ：

```
<div id="main">
    <iframe id="containeriframe" src="inner_iframe.html"></iframe>
</div>
    <div id="container1">
        <div class="drag" style="left: 20px;" id="lable"></div>
    </div> 
```

JavaScript 代码：

```
 $("#containeriframe").load(function () {
          var $this = $(this);
          var contents = $this.contents();
          // here, catch the droppable div and create a droppable widget
          contents.find('#container').droppable({
              iframeFix: true,
              drop: function (event, ui) { alert('dropped'); }
          });
      });

$( "#lable" ).draggable({
        revert: "invalid", 
        helper: "clone",
        cursor: "move",
        iframeFix: true
    }); 
```

现在我使用 Jquery 1.8 和 Jquery UI。

所以我加载页面并尝试放入 iframe div 但没有响应，那么如何管理它。

请帮我 ....

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-29T05:18:30.307

这对我有用：

主页：

```
<!DOCTYPE html>

<html lang="en" xmlns="http://www.w3.org/1999/xhtml">
<head>
    <meta charset="utf-8" />
    <title></title>

        <script src="http://ajax.googleapis.com/ajax/libs/jquery/1.8.0/jquery.min.js""></script>
     <script src="http://ajax.googleapis.com/ajax/libs/jqueryui/1.8.23/jquery-ui.min.js"></script>
    <script>
        $(function () {

            $("iframe").load(function () {
                var iframe = $(this).contents();
                iframe.find('#iframe_container').droppable(
                {
                    drop: function (event, ui) { alert('dropped'); }
                });
            });

            $('#drag').draggable();

        });
    </script>
</head>
<body>

    <iframe src="iframe.html"></iframe>

    <div  style="width:20px; height:20px; background-color: #808080" id="drag"></div>

</body>
</html> 
```

框架：

```
<!DOCTYPE html>

<html lang="en" xmlns="http://www.w3.org/1999/xhtml">
<head>
    <meta charset="utf-8" />
    <title></title>
</head>
<body>

    <div id="iframe_container" style=" width: 40px; height: 40px; background-color: #0094ff">
    </div>

</body>
</html> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-11-14T11:29:38.047

试试这个插件[http://maxazan.github.io/jquery-ui-droppable-iframe/](http://maxazan.github.io/jquery-ui-droppable-iframe/)

```
<!--jquery -->
<script type="text/javascript" src="js/jquery-1.11.3.min.js"></script>
<!--jquery UI -->
<script type="text/javascript" src="js/jquery-ui-1.11.4.custom.js"></script>
<!-- jquery-ui-droppable-iframe -->
<script type="text/javascript" src="jquery-ui-droppable-iframe.js"></script>    
<!--Activate drag and drop zones -->
<script type="text/javascript">
$(function() {
    //After frame loaded
    $("#testframe").load(function() {
        //Activate droppable zones
        $(this).contents().find('.droppable').droppable({
            drop: function(event, ui) {
                //ACTION ON DROP HERE
            }
        });
    });

    //Activate draggable zones
    $('.draggable').draggable({
        iframeFix: true,    //Core jquery ui params needs for fix iframe bug
        iframeScroll: true  //This param needs for activate iframeScroll
    });

});
</script> 
```

# objective-c - “无法删除观察者”或“类的实例已被释放，而键值观察者仍向其注册”错误

> ID：12158036
> 
> 赞同：0
> 
> 时间：2012-08-28T11:12:04.267
> 
> 标签：objective-c, xcode, cocos2d-iphone

所以，我在 cocos2d 框架上写了一个游戏。我有一枚火箭飞过太空，当按下暂停按钮时，我需要停止一切。正因为如此，我在基`GameObject`类中做了一个观察者，它说：

`[[Game sharedGame] addObserver:self forKeyPath:@"isPaused" options:0 context:nil];`

在`init`方法和

`[[Game sharedGame] removeObserver:self forKeyPath:@"isPaused"];`

在`dealloc`方法中

`Cannot remove an observer <Rocket 0xa3a1c10> for the key path "isPaused" from <Game 0x94a7cc0> because it is not registered as an observer.` 所以，当我尝试重新启动场景时，我收到一条错误消息。如果我用 try catch 尝试这个，它不会调用异常但仍然无法正常工作，给我一条消息

`An instance 0xb1d3380 of class Game was deallocated while key value observers were still registered with it. Observation info was leaked, and may even become mistakenly attached to some other object. Set a breakpoint on NSKVODeallocateBreak to stop here in the debugger. Here's the current observation info: <NSKeyValueObservationInfo 0x13c6fa20> ( <NSKeyValueObservance 0xb1b6740: Observer: 0xb120ce0, Key path: isPaused, Options: <New: NO, Old: NO, Prior: NO> Context: 0x0, Property: 0xb1171a0>` 和废话废话

我应该怎么办？

问候。

# iphone - CDATA 块解析

> ID：12158039
> 
> 赞同：1
> 
> 时间：2012-08-28T11:12:09.343
> 
> 标签：iphone, objective-c, nsxmlparser, cdata

我被搜查了，我正在脑火上烧。我是gettig

```
<description><![CDATA[<img src='http://behance.vo.llnwd.net/profiles22/700504/projects/2335700.jpg' style='float:left; margin-right:15px;' /><br /> NIL]]></description> 
```

我不知道解析特定链接（http://behance.vo.llnwd.net/profiles22/700504/projects.jpg）。

即使我尝试使用

```
 - (void)parser:(NSXMLParser *)parser foundCDATA:(NSData *)CDATABlock
   {
         if([sElementName isEqualToString:@"description"])
            {
                   NSMutableString *someString= [[NSMutableString alloc] initWithData:CDATABlock encoding:NSUTF8StringEncoding];

                    NSLog(@"%@",str);
             }
  } 
```

它被打印出来了

```
<img src='http://behance.vo.llnwd.net/profiles22/700504/projects/2335700.jpg' style='float:left; margin-right:15px;' /><br /> NIL 
```

帮助我获取特定链接。任何链接或答案可能会有所帮助..，在此先感谢。，

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-28T11:16:15.577

CDATA 函数正是为此目的 - 如果您有一些 XML 想要作为文本嵌入到另一个 XML 中（而不是修改结构本身的嵌套 XML）。因此，在获得这个特定的字符串，即`<img>`标记之后，您可以使用另一个 XML 解析器来获取该`src`属性的值。

# google-app-engine - GAE 迁移后返回原始别名

> ID：12158041
> 
> 赞同：0
> 
> 时间：2012-08-28T11:12:12.893
> 
> 标签：google-app-engine, migration, google-cloud-datastore

我刚刚完成了从主/从到 HRD 的迁移。在此迁移期间，我被迫将我的应用名称从 myapp.appspot.com 更改为 myapp-hrd.appspot.com。我已经设置了一个别名，所以我的用户仍然可以使用旧的网站 url。

但是我发现拥有两个应用程序，其中一个只是将请求转发给另一个应用程序是相当混乱的。

有什么办法可以将我的新 myapp-hrd 迁移回 myapp？

我能想到的唯一方法是擦除我的旧 myapp，然后从 myapp-hrd 迁移到它，但删除一个 GAE 应用程序需要 3 天。并且 3 天的停机时间不是一种选择。我必须保持 myapp 运行，因为许多 Android 手机中的 url 都是硬编码的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-28T11:26:54.733

即使您删除了旧应用程序，您也无法创建具有相同标识符的新应用程序。你用过迁移工具吗？如果是这样，新应用程序现在应该同时提供新旧应用程序 URL。否则，我建议您[报告生产问题](http://code.google.com/p/googleappengine/issues/entry?template=Production%20issue)，以便 Google 的人员手动链接应用程序。

# android - 从资源加载 JPG 时 Android 上的 OutOfMemoryError（三星 Galaxy SIII 和模拟器）

> ID：12158042
> 
> 赞同：0
> 
> 时间：2012-08-28T11:12:12.707
> 
> 标签：android, exception, resources, out-of-memory

当我尝试从资源加载 JPG 时出现“内存不足”异常。

JPG 大小为 540x960 (80Kb)，并且已经加载了两个这样的 JPG。

这个问题出现在三星 Galaxy SIII 上，在其他设备上都可以正常工作。此外，问题出现在模拟器 WXGA/ARM 720x1280 (Android 4.0.3)

我做错了什么？我怎样才能找到问题的原因并解决它们？可能是糟糕的JPG有问题吗？Jr SDK/Runtime 中有错误吗？

模拟器信息：

```
CPU/ABI: ARM (armeabi-v7a)
Target:  Android 4.0.3 (API level 15)
Skin:    WXGA720
SD Card: 1Gb
--------------
hw.mainKeys:    no
hw.lcd.density: 320
hw.keyboard.lid:no
hw.cpu.model:   cortex-a8
vm.heapSize:    48
hw.ramSize:     1024 
```

# php - CodeIgniter 配置字符集和 UTF-8 支持

> ID：12158043
> 
> 赞同：5
> 
> 时间：2012-08-28T11:12:23.203
> 
> 标签：php, mysql, codeigniter, character-encoding

我正在开发一个在数据库中使用/存储重音字符的网站。我设置了页面模板，以便**config.php**字符集变量与设置匹配，例如：

```
<meta charset="<?php echo $this->config->item('charset');?>"> 
```

我遇到的问题是，当`$config['charset']`设置为**UTF-8**时，表单验证失败，如果包含重音字符，就好像没有提交任何字符。因此，例如，如果 á 包含在字符串中的任何位置，必填字段将反弹。字符串减去 á 工作正常。

我已经设法通过在`$config['charset']`使用**php**`utf8_encode()`和`utf8_decode()`. 这是最好的方法，还是我错过了在 CodeIgniter 中工作以获取带有重音字符的 UTF-8 所需的东西？

任何建议表示赞赏。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-08-28T11:22:46.187

您必须确保在任何地方都使用 UTF-8，并且 PHP 和 MySQL 都配置为处理 UTF-8。

在 html 中，添加元标记：

```
<meta charset="utf-8" /> 
```

并将其保存为 UTF-8 格式。这里是[如何在记事本++ 中做到这一点](https://superuser.com/questions/21135/how-can-i-edit-unicode-text-in-notepad)。

定义 MySQL 表以支持 UTF-8，创建表：

```
DEFAULT CHARSET=utf8; 
```

并将连接设置为：

```
mysql_set_charset('utf8', $con); 
```

在`php.ini`:中[启用 UTF-8](http://www.php.net/manual/en/ini.core.php#ini.default-charset)

```
default_charset = "utf-8" 
```

[有关在 Web 应用程序中从前到后处理 Unicode](http://kunststube.net/frontback/)的完整手动检查

# python - 更改已设置的日志记录的“基本配置”

> ID：12158048
> 
> 赞同：48
> 
> 时间：2012-08-28T11:12:31.183
> 
> 标签：python, logging

我在 python 中使用日志记录模块：

```
import logging, sys
logger= logging.getLogger(__file__)
logging.basicConfig(stream = sys.stderr, level=logging.DEBUG, format='%(filename)s:%(lineno)s %(levelname)s:%(message)s')
logger.debug("Hello World") 
```

现在，在我设置了基本配置之后`line 3`，我想要一个命令行参数，可以将输出流从 sys.stderr 更改为文件。

我已阅读文档，它说如果两者`filename`和`stream`同时存在，`stream`则忽略。

`basicConfig`现在，我想知道在我已经完成之后如何将流更改为文件`line 3`？

* * *

## 回答 #1

> 赞同：90
> 
> 时间：2012-08-28T11:24:26.167

如果您查看 的 Python 源代码`logging/__init__.py`，您会看到`basicConfig()`通过调用`addHandler()`. 如果您想从头开始，您可以删除所有现有的处理程序，然后`basicConfig()`再次调用。

```
# Example to remove all root logger handlers and reconfigure. (UNTESTED)
import logging

# Remove all handlers associated with the root logger object.
for handler in logging.root.handlers[:]:
    logging.root.removeHandler(handler)

# Reconfigure logging again, this time with a file.
logging.basicConfig(filename = 'myfile.log', level=logging.DEBUG, format='%(filename)s:%(lineno)s %(levelname)s:%(message)s') 
```

# javascript-events - jQuery 中的“组合”事件

> ID：12158050
> 
> 赞同：1
> 
> 时间：2012-08-28T11:12:35.903
> 
> 标签：javascript-events, jquery

## TL;博士：

如何将三个“触摸”浏览器事件与延迟结合起来以模拟“长按”事件并使其可供 jQuery 附加到任何适当的 DOM 元素？

## 完整问题

由于我相信 iPad 和其他触摸屏设备最可靠地仅触发 touchstart、touchmove 和 touchend 事件，我猜想需要一个复杂程度或其他级别的框架来对手势、长按和多个事件等事件做出反应触及。

我还没有准备好在我当前的项目中添加一个移动框架，所以为此，我添加了一些代码，这些代码似乎在模拟“长”按下时效果很好，并且允许有人来并触发预定义的处理程序或为此类事件添加额外的处理程序：

```
var touchTimeout = null;
var $element = null;

$('div#SomeIdOnADIVElementOrTwo')
    .on('touchstart', function(){
        $element = $(this);
        //not sure if this is absolutely necessary, but it was based off an Internet resource found when it didn't work like I wanted it to - and it works, so...
        touchTimeout = setTimeout(
            function($element){
                return function(){
                    $($element).trigger('longpress');
                };
            }($element), 1000
        );
    })
    .on('touchend touchmove', function(){
        clearTimeout(touchTimeout);
    })
    .on('longpress', function(){
        $(this).dblclick();
    }); 
```

然而，这目前仅限于我在第一行传递给原始 jQuery 全功能调用的任何选择器或 jQuery 对象（在我的例子中，是一个 id 的 div `SomeIdOnADIVElementOrTwo`）。我想做的是将三个事件“touchstart”、“touchmove”和“touchend”（以及延迟/超时等）定义为标准“事件”，有人可以在任何“可触摸”上“处理” " DOM 对象。

这就像将我的选择器更改为一样简单`*`吗？我很确定这在概念上会起作用，但我不禁认为这在具有大量元素的页面上很可能无法管理 - 或者我可能对事件处理程序的注册方式感到困惑？`.longPress()`用一个函数（与`.click()`and`.dblClick()`函数相同）扩展 jQuery 可能会更好吗？这是不可行的还是不可能的？它非常简单，我错过了什么吗？

# javascript - JavaScript 检查某些文本中的许多关键字？

> ID：12158054
> 
> 赞同：1
> 
> 时间：2012-08-28T11:12:44.297
> 
> 标签：javascript, google-apps-script

请问，检查某个文本句子是否提供了一些关键字的最佳方法是什么，可能有 100 个关键字。

例如：

```
var text = "Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua.";
var keywords = ["lorem", "sit", "elit", "sed do"]; 
```

现在检查任何关键字是否在文本中的最好和最快的方法是什么，但就像整个单词不是单词的一部分，并且它**不区分大小写**？

顺便说一句，它的谷歌脚本，也许有一些我没有看到的功能：\

提前致谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-28T11:28:22.520

```
for(var i = 0; i <= keywords. length - 1; i++) {
  var a = new RegExp('\\b' + keywords[i] + '\\b', 'gi');
  if(a.test(text)) {
    alert('Match ! - ' + keywords[i]);
  }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-28T11:28:56.203

```
var text = "Lorem Ipsumdolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua.";
var keywords = ["Lorem", "ipsum", "not there", "Sed do"];

for (var i in keywords) {
    var index = new RegExp("\\b" + keywords[i] + "\\b", "i");
    if (text.match(index)) {
        alert(keywords[i]);
        // do something
    }
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-28T11:33:52.633

在这些线上尝试一些东西。

```
var text = "Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua.";
var keywords = ["lorem", "sit", "elit", "sed do"];
var words = text.split(/[\s,]+/); //Add all other delimiters you want to include. 
for(var i in words){ 
   words[i] = words[i].toLowerCase(); 
}
for(var i in keywords){
  if(words.indexOf(keywords[i].toLowerCase()) != -1){
    Logger.log('Match found for ' + keywords[i]);
    break;
  }
} 
```

感谢[这篇文章](https://stackoverflow.com/questions/650022/how-do-i-split-a-string-with-multiple-separators-in-javascript)拆分多个分隔符

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-29T15:01:01.687

如果您使用对象而不是数组来存储关键字，那么这段代码的效率会大大提高。

```
var text = "Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua.";
var keywords = {"lorem" : 1, "sit": 1, "elit" : 1, "sed do" : 1};
var words = text.split(/[\s,]+/); //Add all other delimiters you want to include. 
for(var i in words) { 
   if (keywords[words[i].toLowerCase()]) { 
     Logger.log('Match found for ' + keywords[i]);
     break;
  }
} 
```

# java - 从 xml bean 中提取属性到 java

> ID：12158063
> 
> 赞同：1
> 
> 时间：2012-08-28T11:13:30.683
> 
> 标签：java, xml, spring

大家好，我是 Web 开发的新手，我在这里遇到了一个问题。我希望我的 java 程序使用 Jdbs 连接器连接到数据库，但不是硬编码数据库变量，而是希望我的程序读取一个 xml 文件，其中值存储在 bean 中。我要读取的行存储在 applicationContext.xml 文件中，如下所示：

```
<bean id="ObjectMapperFactory" scope="singleton" class="someClass"/>
<bean id="UgcDataSource" class="org.apache.commons.dbcp.BasicDataSource">
 <property name="driverClassName"><value>com.mysql.jdbc.Driver</value></property>
 <property name="username"><someUser</value></property>
 <property name="password"><somePassword</value></property>
 <property name="url"><value>jdbc:mysql://localhost:3306/dbName?autoReconnect=true</value></property>
 <property name="defaultAutoCommit"><value>false</value></property>
 <property name="maxActive"><value>20</value></property>
 <property name="maxIdle"><value>3</value></property>
</bean> 
```

阅读后，我希望将这些变量存储在字符串中，如下所示：

```
String url = "jdbc:mysql://localhost:3306/dbName"
String username = "someUser"
String password = "somePassword" 
```

所以我正在寻找的是一种提取这三个值的方法，有什么建议吗？非常感激！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-28T11:55:53.513

使用 Spring，您可以`@Value`像这样使用注释

```
@Value("#{UgcDataSource.url}")
private String url; 
```

# jsp - Liferay：如何使用 processAction 或将 jsp 链接到 action 类

> ID：12158065
> 
> 赞同：0
> 
> 时间：2012-08-28T11:13:33.330
> 
> 标签：jsp, portlet, liferay-6

我很难理解 JSP 如何链接到操作。

我有`view.jsp`,`edit.jsp`和一个 Java 类`setVal`作为它的方法

我在edit.jsp中包含了以下代码

```
<portlet:actionURL var="editURL" name="setVal">
    <portlet:param name="jspPage" value="/edit.jsp" />
</portlet:actionURL> 
```

这在形式

```
action="<portlet:actionURL name="processAction"> 
```

请指导我从 JSP 调用操作的正确方法是什么。

我正在使用 Liferay6.1

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-28T12:57:17.463

当您创建一个 actionURL 时，

```
<portlet:actionURL var="editURL" name="setVal">
<portlet:param name="jspPage" value="/edit.jsp" />
</portlet:actionURL> 
```

你的表格应该看起来像

```
<form action="<%=editURL%>">
....
...
..
.
</form> 
```

并且您的 portlet 类应该包含一个按名称命名的方法：

```
void setVal(ActionRequest request, ActionResponse response) {
......
....
} 
```

您使用创建的 actionURL 的方式是错误的，请阅读基本的 portlet 教程。

# objective-c - CGImageCreateWithImageInRect 静态分析警告

> ID：12158073
> 
> 赞同：0
> 
> 时间：2012-08-28T11:14:07.840
> 
> 标签：objective-c, ios, uiimage, cgimage, cgimageref

我有 UIImage 类别的以下功能部分：

```
- (UIImage *)copyImageAtRect:(CGRect)rect {
CGImageRef imageToSplit = self.CGImage;
CGImageRef partOfImageAsCG = CGImageCreateWithImageInRect(imageToSplit, rect);
UIImage *image = [UIImage imageWithCGImage:partOfImageAsCG];
CGImageRelease(partOfImageAsCG);
return image;} 
```

但是，当我分析我的代码时，我收到以下静态分析警告：“对象具有 +0 保留计数返回给调用者，其中预期 +1（拥有）保留计数”并突出显示返回图像行。

我试过改变很多东西，但似乎无法弄清楚为什么这会成为潜在的泄漏。

任何帮助是极大的赞赏。

非常感谢。

**编辑** 正如 waldrumpus 所指出的，问题是我的函数的名称。它包括编译器正在使用的“复制”一词。通过重命名函数来解决这个问题。谢谢你，waldrumpus。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-28T11:33:35.300

因为您的方法的名称以单词 开头`copy...`，所以编译器按照惯例假定它将返回对象的保留副本。`copy...`这与以or开头的方法名称有关`init...`。

将该方法重命名为其他名称，警告应该会消失。

# ios - iOS : Dynamically introduce UILabel or UITextView on an image inside iPad application by tapping and dragging

> ID：12158075
> 
> 赞同：0
> 
> 时间：2012-08-28T11:14:10.240
> 
> 标签：ios, ipad, uilabel, uitextview, ios5.1

I need to annotate on an image.

Probably a simple solution that I am not able to see at the moment.

I need to introduce a UILabel or UITextView onto an image that is currently displaying on the iPad probably by the TouchesBegan/TouchesMoved/TouchesEnded methods (which is something I tried) and then add some text onto the created UILabel or UITextView. Consequently, I need to embed the added text onto that particular image.

Any ideas?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-28T11:45:03.760

So you will create a custom label, move it around, and when the user is done moving it, you will use:

```
CGSize size = image.size;
UIGraphicsBeginImageContextWithOptions( size, NO, 0);
CGContextRef context = UIGraphicsGetCurrentContext();

// UIImages and CGImageRefs are flipped
CGAffineTransform flipVertical = CGAffineTransformMake(1, 0, 0, -1, 0, size.height);
CGContextConcatCTM(context, flipVertical);

CGContextDrawImage(context, rect, [image CGImage]); // draw the image

// CGContextConcatCTM(context, flipVertical); uncomment if the text is flipped - not sure now

[label.text drawAtPoint:label.frame.origin withFont:label.font];

UIImage *newImage = UIGraphicsGetImageFromCurrentImageContext();
UIGraphicsEndImageContext();
return image; 
```

# oracle - 如何使用 TOAD for Oracle 连接服务器数据库？

> ID：12158079
> 
> 赞同：0
> 
> 时间：2012-08-28T11:14:18.547
> 
> 标签：oracle, toad, ora-12170

我将 TOAD 用于 Oracle 数据库（版本 10.6.1.3）。当我尝试连接服务器数据库时，它返回错误：

> ORA-12170: TNS: 发生连接超时

我为 DIRECT-Host、Port、SID 编写了用户名、密码并使用：OraClient11g_home 进行连接。你对这个错误有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-08-26T15:32:46.533

如果端口 1521 被阻止，您将收到此错误消息。确保从源 IP（Toad 服务器）到目标 IP（Oracle DB）的端口是开放的；你可以用telnet测试一下。

请注意，也*可以*使用不同的端口；您可以通过单击`TNSNames Editor`按钮在新连接窗口中确认在 Toad 中配置的端口。

# c# - Math.Round() 为 double 产生了意外的结果

> ID：12158085
> 
> 赞同：5
> 
> 时间：2012-08-28T11:14:39.577
> 
> 标签：c#, .net, double

我在我的代码中偶然发现了一个方法，其中我的代码中的舍入值计算错误。我知道比较双值会产生意外结果的问题。

例子

```
 double x = 19.08;
    double y = 2.01;
    double result = 21.09;

    if (x + y == result)
    {
        // this is never reached
    } 
```

此处说明：http: [//csharpindepth.com/Articles/General/FloatingPoint.aspx](http://csharpindepth.com/Articles/General/FloatingPoint.aspx)

但是，直到现在，我希望 Math.Round() 方法即使使用双精度值也是准确的。

看看这段代码。

```
 var decimals = 2;
        var value1 = 4.725;
        var value2 = 4.725M;

        var result1 = Math.Round(value1, decimals, MidpointRounding.ToEven);
        var result2 = Math.Round(value1, decimals, MidpointRounding.AwayFromZero);
        var result3 = Math.Round(value2, decimals, MidpointRounding.ToEven);
        var result4 = Math.Round(value2, decimals, MidpointRounding.AwayFromZero);

        Console.WriteLine("Double (ToEven): {0}", result1); // outputs 4.72
        Console.WriteLine("Double (AwayFromZero): {0}", result2); // outputs 4.72 (expected: 4.73)
        Console.WriteLine("Decimal (ToEven): {0}", result3); // outputs 4.72
        Console.WriteLine("Decimal (AwayFromZero): {0}", result4); // outputs 4.73 
```

对我来说，result2 应该是 4.73 是完全清楚的。然而，事实并非如此。有人可以解释为什么吗？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-08-28T11:17:47.740

好吧，您可能需要重新考虑您的“完全清楚”的概念，因为 4.725（相对于 4.625）*不能*用`double`. 实际上正是

> 4.7249999999999996447286321199499070644378662109375

请记住，浮点数只是对实数的数学概念的近似——许多关于数字应该如何表现的直观概念并不适用。您最终得到的值*大约*为 4.725，但显然略低于它。因此，中点舍入模式在这里不会做任何事情，因为它并不完全位于两个可能要舍入的数字之间。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-28T11:17:38.597

你`value1`很容易成为`4.724999999999999999999999999999999`。为什么要四舍五入 to`4.73`而不是`4.72`？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-28T11:19:05.450

在检查 Double 值是否相等时总是会出现问题。添加两个像 0.5 + 0.5 这样的双精度值不会是 1.0，但很可能最终会是 0.99999 和 1.00001。这与使用浮点数从二进制到十进制的转换有关。

您应该在舍入误差/精度部分检查以下内容：http: [//www.learncpp.com/cpp-tutorial/25-floating-point-numbers/](http://www.learncpp.com/cpp-tutorial/25-floating-point-numbers/) 它提供了一些关于浮点精度的有价值的见解，案例应该遵循对于 C# 也是如此。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-08-21T09:28:50.430

使用 Convert.ToDouble(value1.ToString("f2")) 而不是 Math.Round(value1, 2)

# emacs - 在 emacs 中通过 ssh 打开文件

> ID：12158088
> 
> 赞同：2
> 
> 时间：2012-08-28T11:14:54.467
> 
> 标签：emacs

我在 Mac (Lion) 上，使用 GNU/Emacs 24.1 版。我创建了一个虚拟机，并为其分配了一个静态 IP。我想使用 emacs 打开/编辑文件。AFAI 发现，在版本 23 以上，`tramp-mode`预装了。所以我尝试了以下`C-x C-f /ssh:username@192.168.1.23:/path_to_file.rb`方法，但它所做的是创建一个名为**ssh:...rb 的文件。**

我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-03T10:02:12.297

Emacs 24 启用了 tramp-mode。如果您在 ~/.emacs.d 目录或一些 init.el 文件中放置了任何东西来自定义tramp模式，请删除它们。

您需要做的就是`C-x C-f ~//username@ip_address.` 您将被要求输入密码，提供并享受！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-28T13:18:29.390

尚未升级到 24.1，但在此之前，路径是：

> Cx Cf /scp:username@192.168.1.23:/path_to_file.rb

# android - 如何使用 EditText 将数据插入数据库，然后将数据保存到 android 的数据库中

> ID：12158093
> 
> 赞同：-2
> 
> 时间：2012-08-28T11:15:14.163
> 
> 标签：android, sqlite

我是 android 开发的新手，所以我正在尝试，但我无法使用 Edit Text 将数据插入数据库，然后使用 android 中的 Button 将数据保存到数据中。所以有人请帮帮我，我只是一个初学者，所以请在上面写一个示例教程/程序。

先进的谢谢你，阿诺布

好的，这是我的一项课堂活动和我附上的一个 xml 文件 -

我的活动类名称之一“Registration.java”，它包含 -

```
package com.ggit.trip.caster;

  public class Registration extends AppBaseActivity {

private Button submit3;
private Button exit3;

DatePicker d;
Dialog dialog;
public TextView date;
private ImageView cal;

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.registration);

    registerBaseActivityReceiver();

    submit3 = (Button) findViewById(R.id.button1);
    exit3 = (Button) findViewById(R.id.button2);

    cal = (ImageView) findViewById(R.id.imageView1);
    date = (TextView) findViewById(R.id.textView8);

    submit3.setOnClickListener(new OnClickListener() {

        @Override
        public void onClick(View arg0) {
            // TODO Auto-generated method stub
            Intent intent = new Intent(getApplicationContext(),
                    CostManagement.class);
            startActivity(intent);

        }
    });

    cal.setOnClickListener(new OnClickListener() {

        @Override
        public void onClick(View v) {
            // TODO Auto-generated method stub
            dialog = new Dialog(Registration.this);
            dialog.setContentView(R.layout.date);
        //dialog.setTitle("Set Date");
            dialog.setCancelable(true);

            Button ok = (Button) dialog.findViewById(R.id.button1);
            Button cancel = (Button) dialog.findViewById(R.id.button2);

            d = (DatePicker) dialog.findViewById(R.id.datePicker1);

            ok.setOnClickListener(new OnClickListener() {

                @Override
                public void onClick(View v) {
                    // TODO Auto-generated method stub
                    int day = d.getDayOfMonth();
                    int month = d.getMonth();
                    int year = d.getYear();

            String curDate = "" + day + "/" + month + "/" + year;

                    Log.d("date", "" + curDate);

                    date.setText(curDate);
                    date.setVisibility(View.VISIBLE);
                    cal.setVisibility(View.INVISIBLE);

                    dialog.dismiss();
                }
            });
            cancel.setOnClickListener(new OnClickListener() {
                @Override
                public void onClick(View v) {

                    dialog.dismiss();
                }           
            });     

            dialog.show();
        }
    });

    exit3.setOnClickListener(new OnClickListener() {
        @Override
        public void onClick(View arg0) {
            // TODO Auto-generated method stub
            closeAllActivities();
        }
    });
}
@Override
public void onDestroy() {

    super.onDestroy();
    unRegisterBaseActivityReceiver();
} 
```

}

对于此类活动，我为此注册制作了名为“registration.xml”的布局。

```
 <?xml version="1.0" encoding="utf-8"?>
  <RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
  android:layout_width="match_parent"
  android:layout_height="match_parent"
  android:orientation="vertical"
  android:background="@drawable/sea_01" >

<TextView
    android:id="@+id/textView1"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_alignParentLeft="true"
    android:layout_alignParentTop="true"
    android:layout_marginTop="30dp"
    android:text="User Name"
    android:textAppearance="?android:attr/textAppearanceMedium"
     />
<EditText
    android:id="@+id/editText1"
    android:layout_width="160dp"
    android:layout_height="wrap_content"
    android:layout_alignBaseline="@+id/textView1"
    android:layout_alignBottom="@+id/textView1"
    android:layout_alignParentRight="true"
    android:layout_marginRight="24dp"
    android:background="@drawable/rounded_edittext"
    android:ems="10"
    android:hint="  insert your name"
    android:inputType="textPersonName" >

    <requestFocus />
</EditText>

<TextView
    android:id="@+id/textView2"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_alignParentLeft="true"
    android:layout_below="@+id/editText1"
    android:layout_marginTop="20dp"
    android:text="Passord"
    android:textAppearance="?android:attr/textAppearanceMedium"
     />
<EditText
    android:id="@+id/editText2"
    android:layout_width="160dp"
    android:layout_height="wrap_content"
    android:layout_alignBaseline="@+id/textView2"
    android:layout_alignBottom="@+id/textView2"
    android:layout_alignLeft="@+id/editText1"
    android:background="@drawable/rounded_edittext"
    android:ems="10"
    android:inputType="textPassword" />

<TextView
    android:id="@+id/textView3"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_alignParentLeft="true"
    android:layout_below="@+id/editText2"
    android:layout_marginTop="20dp"
    android:text="E-mail"
    android:textAppearance="?android:attr/textAppearanceMedium"
     />

<EditText
    android:id="@+id/editText3"
    android:layout_width="160dp"
    android:layout_height="wrap_content"
    android:layout_alignBaseline="@+id/textView3"
    android:layout_alignBottom="@+id/textView3"
    android:layout_alignLeft="@+id/editText2"
    android:background="@drawable/rounded_edittext"
    android:ems="10"
    android:hint="  insert your email"
    android:inputType="textEmailAddress" />

<TextView
    android:id="@+id/textView4"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_alignParentLeft="true"
    android:layout_below="@+id/editText3"
    android:layout_marginTop="20dp"
    android:text="Phone Number"
    android:textAppearance="?android:attr/textAppearanceMedium"
     />

<EditText
    android:id="@+id/editText4"
    android:layout_width="160dp"
    android:layout_height="wrap_content"
    android:layout_alignBaseline="@+id/textView4"
    android:layout_alignBottom="@+id/textView4"
    android:layout_alignRight="@+id/editText3"
    android:background="@drawable/rounded_edittext"
    android:ems="10"
    android:hint="   contact number"
    android:inputType="phone" />

<TextView
    android:id="@+id/textView5"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_alignParentLeft="true"
    android:layout_below="@+id/editText4"
    android:layout_marginTop="32dp"
    android:text="Gender"
    android:textAppearance="?android:attr/textAppearanceMedium"
     />

<RadioButton
    android:id="@+id/radioButton1"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_alignBaseline="@+id/textView5"
    android:layout_alignBottom="@+id/textView5"
    android:layout_alignLeft="@+id/editText4"
    android:text="Male"
     />

<RadioButton
    android:id="@+id/radioButton2"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_alignBaseline="@+id/radioButton1"
    android:layout_alignBottom="@+id/radioButton1"
    android:layout_toRightOf="@+id/radioButton1"
    android:text="Female"
     />

<TextView
    android:id="@+id/textView7"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_alignParentLeft="true"
    android:layout_below="@+id/radioButton1"
    android:layout_marginTop="26dp"
    android:text="Location"
    android:textAppearance="?android:attr/textAppearanceMedium"
     />

<EditText
    android:id="@+id/editText5"
    android:layout_width="160dp"
    android:layout_height="wrap_content"
    android:layout_alignBaseline="@+id/textView7"
    android:layout_alignBottom="@+id/textView7"
    android:layout_alignLeft="@+id/radioButton1"
    android:background="@drawable/rounded_edittext"
    android:ems="10"
    android:hint="   place you living" />

<TextView
    android:id="@+id/textView6"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_alignParentLeft="true"
    android:layout_below="@+id/editText5"
    android:layout_marginTop="32dp"
    android:text="Birthday"
    android:textAppearance="?android:attr/textAppearanceMedium" />

<ImageView
    android:id="@+id/imageView1"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_alignLeft="@+id/editText5"
    android:layout_alignTop="@+id/textView6"
    android:src="@drawable/calendar" />

<TextView
    android:id="@+id/textView8"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_alignBottom="@+id/textView6"
    android:layout_alignLeft="@+id/imageView1"
    android:text="Medium Text"
    android:textAppearance="?android:attr/textAppearanceMedium"
    android:visibility="invisible" />

<Button
    android:id="@+id/button1"
    android:layout_width="100dp"
    android:layout_height="45dp"
    android:layout_alignParentBottom="true"
    android:layout_toLeftOf="@+id/imageView1"
    android:background="@drawable/gloss_nine_patch"
    android:text="Submit" />

<Button
    android:id="@+id/button2"
    android:layout_width="100dp"
    android:layout_height="45dp"
    android:layout_alignLeft="@+id/imageView1"
    android:layout_alignParentBottom="true"
    android:layout_marginLeft="24dp"
    android:background="@drawable/gloss_nine_patch"
    android:text="Exit" />

<TextView
    android:id="@+id/textView9"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_alignParentLeft="true"
    android:layout_alignParentRight="true"
    android:layout_alignParentTop="true"
    android:text="User Registration"
    android:gravity="center"
    android:textAppearance="?android:attr/textAppearanceMedium"
    android:textSize="12dp" />

  </RelativeLayout> 
```

现在请有人使用数据库查询完整填写这个“Registration.java”类，在写完所有信息后，当我单击“提交”按钮时，它将保存到数据库中，然后转到其他活动。

谢谢大家现在请帮助我

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-28T11:30:13.380

Arnob 您可以在以下链接中找到非常好的教程，...

[http://www.vogella.com/articles/AndroidSQLite/article.html](http://www.vogella.com/articles/AndroidSQLite/article.html)

[http://www.androidhive.info/2011/11/android-sqlite-database-tutorial/](http://www.androidhive.info/2011/11/android-sqlite-database-tutorial/)

我希望它对你有帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-28T11:20:52.763

Android SDK 平台提供了一个记事本 SDK 示例，可以完成所有这些工作。你可以通过那个。此外，还有数百个关于在 Android 应用程序中使用数据库的免费教程。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-28T11:26:15.527

你可能需要类似的东西

```
public class AndroidSQLiteTutorialActivity extends Activity {
  @Override
  public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);
    DatabaseHandler db = new DatabaseHandler(this);
    EditText getTextFromThis = (EditText) findViewById(getTextFromThis);
    EditText putTextHere = (EditText) findViewById(putTextHere);
    Button b1 = (Button) findViewById(R.id.myButton);
      b1.setOnClickListener(new OnClickListener() {
        @Override
        public void onClick(View v) {
          String s = getTextFromHere.getText().toString(); //getting confused where you get/put the data.
          db.add(new StringObjectThingy(s)); //say you have a SQLiteDB with StringObjectThingies
          putTextHere.setText(s);
        }
      }
    }
  });
} 
```

这个更好？

# android - 如何将带有列表视图的其他元素放入活动中？

> ID：12158095
> 
> 赞同：0
> 
> 时间：2012-08-28T11:15:24.670
> 
> 标签：android, listview

我想要一个包含徽标的标题。然后是列表视图。但我正在努力让它们都出现在屏幕上。我要么只得到标题，要么只得到 Listview。任何人都可以在这里阐明一下。这是我的文件。

## // Grammar_sections.java

```
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.grammar_sections);
   Intent i = getIntent();

    module_id =i.getStringExtra("module_id");

    TestAdapter mDbHelper = new TestAdapter(getBaseContext());        
    mDbHelper.open();

    ArrayList<String> testdata = mDbHelper.getAllSections(module_id);

    for(String t : testdata )
    {
        //Log.d("out", t.toString());
    }

    mDbHelper.close();

    m_listview = (ListView) findViewById(R.id.list);

    if(m_listview != null)
    {
        Log.i("check","yup");
    }
    else
    {
        Log.i("check","nope");
    }

    ArrayAdapter<String> adapter =
      new ArrayAdapter<String>(this,R.layout.grammar_sections , R.id.list_item, testdata);

     m_listview.setAdapter(adapter); 
```

## 语法节.xml

```
 // grammar_sections.xml

  <?xml version="1.0" encoding="utf-8"?>
 <RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="fill_parent"
android:layout_height="wrap_content"
android:orientation="vertical"
android:padding="10dip" >

<!--  Header  Starts-->
    <LinearLayout android:id="@+id/header"
            android:layout_width="fill_parent"
            android:layout_height="wrap_content"
            android:background="@layout/header_gradient"
            android:paddingTop="5dip"
            android:paddingBottom="5dip">
            <!-- Logo Start-->
            <ImageView android:src="@drawable/logo_icon"
                        android:layout_width="wrap_content"
                        android:layout_height="fill_parent"
                        android:layout_marginLeft="10dip"/>

            <ImageView android:src="@drawable/logo_text"
                        android:layout_width="wrap_content"
                        android:layout_height="fill_parent"
                        android:layout_marginLeft="10dip"/>

            <!-- Logo Ends -->
       </LinearLayout>
   <!--  Header Ends -->

<TextView
    android:id="@+id/list_item"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:gravity="center_vertical"
    android:padding="16dip"
    android:typeface="sans"
    android:textSize="16dip"
    />

    <ListView
    android:id="@+id/list"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:divider="#b5b5b5"
    android:dividerHeight="1dp"
     />

 </RelativeLayout> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-28T11:21:57.363

有`ListView`方法[addHeaderView](http://developer.android.com/reference/android/widget/ListView.html#addHeaderView%28android.view.View,%20java.lang.Object,%20boolean%29)。正如文档所说：

```
Add a fixed view to appear at the top of the list. 
```

因此，只需创建您的`view`并通过`inflater`. 然后将其添加到`ListView`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-28T11:22:54.023

从您的代码中，

```
 ArrayAdapter<String> adapter = new ArrayAdapter<String>(this,R.layout.grammar_sections , R.id.list_item, testdata); 
```

您将相同的**grammar_sections.xml**文件传递​​给您的**ArrayAdapter**。所以我认为这是问题所在，而是制作一个包含列表项的不同 xml 布局文件并将这个 xml 布局文件传递给**ArrayAdapter**构造函数。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-28T11:58:42.810

这是一个有效的示例 xml 代码：

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:background="@color/background"
    android:orientation="vertical" >

    <include layout="@layout/header" />

    <ListView
        android:id="@+id/listView"
        android:layout_width="fill_parent"
        android:layout_height="fill_parent"
        android:cacheColorHint="@color/white"
        android:choiceMode="singleChoice"
        android:divider="@color/blue_vdark"
        android:dividerHeight="1dp" />

</LinearLayout> 
```

您可以用自定义替换包含，`View`或者`Layout`在`ListView`.
尝试将此代码与您的代码进行比较。此外，我没有`</RelativeLayout>`在您的 xml 文件末尾看到标签。

# jquery - 当内容太大时，将溢出应用于单个子元素

> ID：12158096
> 
> 赞同：1
> 
> 时间：2012-08-28T11:15:26.293
> 
> 标签：jquery, css, overflow

我有一列包含几个不同的元素，如下所示：

```
<div id="column">
    <h2>Title - can be any length</h2>
    <p id="content">Lorem ipsum, yadda yadda yadda...</p>
    <button>There might be a button here.</button>
    <p>Another paragraph.</p>
    <button>A button here.</button>
</div> 
```

我使用的是流体布局，取决于窗口大小，并且如上所述，元素将具有不同数量的内容和/或可能存在或不存在。

我希望能够对元素进行样式设置，使它们都彼此叠放，按顺序排列在顶部（显然很简单）......*除非*在组合内容高于容器的情况下。在这种情况下，我希望`<h2>`保持在顶部，从第一个`<button>`开始到所有都位于底部，`<p id="content">`填充剩余的高度，并带有滚动条。

一个纯粹的 CSS 解决方案会很棒，但无论如何我在整个网站上都使用 jQuery，所以无论如何都能完成工作。我敢肯定这很简单，但我一生都无法弄清楚。

jsfiddle - [http://jsfiddle.net/C4hzp/](http://jsfiddle.net/C4hzp/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-28T11:25:57.213

**更新**不同的方法：将内容放在带有 的容器中`max-heigth`，这样它可以是任何高度，直到达到最大高度：然后会出现滚动条。

```
<div id="column">
    <h2>Title - can be any length</h2>

    <p class="content">       <!-- Scrollbar starts here -->
        Lorem ipsum, yadda yadda yadda...
    </p>                      <!-- Scrollbar ends here -->

    <button>There might be a button here.</button>

    <p class="content">      <!-- Scrollbar starts here -->
        Another paragraph.
    </p>                     <!-- Scrollbar ends here -->

    <button>A button here.</button>
    <!-- Etc. -->
</div> 
```

CSS：

```
p.content {
    max-height: 100px;
    overflow:auto;
} 
```

工作[JSfiddle](http://jsfiddle.net/C4hzp/12/)

# php - PHP创建API连接同一服务器上的2个应用程序

> ID：12158097
> 
> 赞同：0
> 
> 时间：2012-08-28T11:15:29.903
> 
> 标签：php, mysql, api

想象一下 2 个应用程序在同一台服务器上使用不同的 mysql 数据库运行。我需要一种在两个应用程序之间交换数据的方法。一个应用程序无权访问另一个应用程序的数据库。交换只是后端相关（自动的东西），不需要用户交互。

使用 php 执行此操作的最佳和最安全的方法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-28T12:14:47.823

您可以使用命名管道——它们非常适合进程间通信。

[http://my.opera.com/zomg/blog/2007/08/29/php-and-named-pipes](http://my.opera.com/zomg/blog/2007/08/29/php-and-named-pipes)

您可以在交互式 php 中尝试一下：

```
Davids-MacBook-Air:~ dearlbry$ php -a
Interactive shell

php > posix_mkfifo("test-pipe", 0644);
php > $pipe = fopen('test-pipe','r+');
php > print fgets($pipe); 
```

让它坐在那里等待，然后打开另一个终端：

```
Davids-MacBook-Air:~ dearlbry$ php -a
Interactive shell

php > $pipe = fopen('test-pipe','r+');
php > fwrite($pipe, "Hello World\n");
php > fclose($pipe); 
```

观看第一个过程中出现的“Hello World”。确保输入“\n”，因为管道被缓冲并且换行符发出刷新它的信号。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-28T11:21:19.877

您可以使用一个[RESTful](http://en.wikipedia.org/wiki/Representational_state_transfer) API，其中一个应用程序可以向另一个应用程序 POST 和 GET 数据。

```
// From application2.com

$id = $curl->post('http://application1.com/users/save/', array(
    'name' => 'Matt',
    'bio' => 'I am a person.'
));

// $id is generated from a DB insert

$user = $curl->post('http://application1.com/users/bio/', array(
    'id' => $id
));

// $user contains an array or object of information about Matt 
```

# ruby-on-rails - 如何创建与渲染“some_partial”一起使用的类，：collection

> ID：12158102
> 
> 赞同：0
> 
> 时间：2012-08-28T11:15:59.973
> 
> 标签：ruby-on-rails, ruby-on-rails-3

我尝试使用包含的 Enumarable 创建 ruby​​ 类所以在视图中我尝试渲染类，它具有**每个**方法并且应该返回为特定 content_id 构建的对象

这是使用此代码的视图**some_file.haml**

```
.
.
.
%table{:border => "0"}
  %thead
    %tr
      %td Files
      %td Views
      %td Comments
      %td Likes 
  %tbody
    - render 'content_stats_row', :collection => @graphs.content_stats_table, :as => :row
.
.
. 
```

这是我的**@graphs 课程**

```
module FusionGraphs
  class ContentStatsTable
    include Enumerable

    def initialize(content_ids, start_date, end_date)
      @content_ids, @start_date, @end_date = content_ids, start_date, end_date 
    end

    def summarized_content
      @summarized_content ||= Hash[ Content.where(:id => @content_ids).value_of(:id, :name) ]
    end

    def summarized_comments
      @summarized_comments ||= Comment.where(:content_id => @content_ids)
                                  .where('date(created_at) between ? and ? ', @start_date, @end_date)
                                  .group(:content_id)
                                  .count
    end

    def summarized_views
      @summarized_views ||= View.where(:viewable_type => 'Content', :viewable_id => @content_ids)
                            .where('date(created_at) between ? and ? ', @start_date, @end_date)
                            .group(:viewable_id)
                            .count

    end

    def summarized_likes
      @summarized_likes ||= Like.where(:content_id => @content_ids)
                            .where('date(created_at) between ? and ? ', @start_date, @end_date)
                            .group(:content_id)
                            .count
    end

    def each
      @rows ||= @content_ids.map do |content_id|
              OpenStruct.new( :content_name => summarized_content[content_id],
                              :views => summarized_views[content_id] || 0,
                              :comments => summarized_comments[content_id] || 0,
                              :likes => summarized_likes[content_id] || 0
                            )
             end
    @rows.each {|row| yield row }
    end

  end
end 
```

我无法从 ** render 'content_stats_row', :collection => graphs.content_stats_table, :as => :row 获得结果 ** 它不工作 我做错了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-28T11:39:41.747

在渲染之前放置 (-) 连字符的 haml 视图文件中，它应该 (=) 相等。

# c# - 用MVC3创建的第二个数据库，如何预防？

> ID：12158114
> 
> 赞同：4
> 
> 时间：2012-08-28T11:16:42.797
> 
> 标签：c#, asp.net-mvc-3, code-first

我对 MVC 3 很陌生，我对 Code First 方法有疑问。我创建了 2 个模型、一个上下文、一个视图等，一切都很完美（能够添加、删除等）

但是当我签入 Microsoft SQL Management Studio 时，我看到了 2 个数据库。其中之一是我在 web.config 中要求的。这个只包含会员表

```
<connectionStrings>
<add name="RecettesMaison" connectionString="Data Source=.\SQLEXPRESS;Initial Catalog=RecettesMaison;User Id=user;Password=password;"
     providerName="System.Data.SqlClient"/> 
```

第二个有一个奇怪的名字：“RecettesMaison.DB.RecettesMaisonContext”。它是包含生成表的那个......

我想知道这个名字是从哪里来的，我该怎么做才能让所有生成的表只用我指定的名字进入我的连接字符串。我只想要一个数据库。我确定它只是上下文中的一个标签，但我在谷歌上找不到这个信息。

**编辑：**简而言之，我希望我的数据库继续使用，`DropCreateDatabaseIfModelChanges<RecettesMaisonContext>`但我希望它使用连接字符串中指定的名称创建数据库，但事实并非如此（它使用命名空间和数据库的名称创建一个名称语境）

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-28T12:21:16.227

默认情况下，code first 将为您创建一个数据库。但是，如果您想覆盖此行为，只需使用

```
Database.SetInitializer<YourDataContext>(null); 
```

MSDN：[msdn.microsoft.com/en-us/library/gg679461 (v=vs.103).aspx](http://msdn.microsoft.com/en-us/library/gg679461%28v=vs.103%29.aspx)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-28T11:44:01.097

这是因为您没有找到数据库文件的 connectionString，因此 CodeFirst 通过使用 DbContext 文件名所在的完整命名空间自动创建一个。

**通过将filename.mdf**更改为所需的文件名，将此文本插入到 connectionString 中：`AttachDBFilename=|DataDirectory|filename.mdf`。数据库文件将位于您的**project\App_Data**文件夹中。

你会有这样的东西：

```
<connectionStrings>
    <add name="RecettesMaison" connectionString="Data Source=.\SQLEXPRESS;Initial catalog=RecettesMaison;AttachDBFilename=|DataDirectory|filename.mdf;User Id=user;Password=password;" providerName="System.Data.SqlClient"/>
</connectionStrings> 
```

通过在 DbContext 构造函数中传递 connectionStringName 来确保您的 DbContext 使用正确的 connectionString，如下所示：

```
public class RecettesMaisonContext : DbContext
{
    public RecettesMaisonContext()
        : base("RecettesMaison")
    {
    }

    protected override void OnModelCreating(DbModelBuilder modelBuilder)
    {
        var typesToRegister =
            Assembly.GetExecutingAssembly().GetTypes().Where(
                type =>
                type.BaseType.IsGenericType &&
                type.BaseType.GetGenericTypeDefinition() == typeof(EntityTypeConfiguration<>));

        foreach (object configurationInstance in typesToRegister.Select(Activator.CreateInstance))
        {
            modelBuilder.Configurations.Add((dynamic)configurationInstance);
        }
    }

    ...
} 
```

# entity-framework - EF和数据导入

> ID：12158120
> 
> 赞同：2
> 
> 时间：2012-08-28T11:17:05.733
> 
> 标签：entity-framework, entity-framework-4, ef-code-first

我正在开发我首先使用 EF 代码（v4.4）作为 ORM 和 SqlServer 作为数据库的应用程序。我还需要一个选项来从另一个具有相似数据结构的数据库类型中导入数据。在数据传输期间，我需要使用它们所具有的值传输标识列，以免破坏相关数据。

假设这是操作序列：

1.  获取数据
2.  将其转换为适合 EF 模型
3.  将每个实体添加到 DbContext
4.  保存更改

问题是它不会像原来那样插入标识值，因为我的主键被设置为标识列。

解决这个问题的方法之一是使用 IDENTITY_INSERT 命令，但它需要在同一个连接周期下与插入查询一起执行。连接周期是指在所有操作（IDENTITY_INSERT 和 INSERT INTO）期间不得关闭连接。

问题：ExecuteSqlCommand 会关闭连接，即使在调用它之前已显式打开它。

解决此问题的方法是不使用 EF 执行此任务，而是使用 ADO.NET SqlCommand。这样我们就可以更好地控制连接何时打开/关闭。

问题：如果我改变我的模型，我也需要改变导入查询，所以我需要在两个地方维护数据库结构。

任何建议如何使用 EF 实现这一目标？我不知道为什么 EF 团队决定在调用 ExecuteSqlCommand 后总是关闭连接。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-03T10:15:09.533

为了使用 EF DbContext，需要执行以下操作：

*   使用 IObjectContextAdapter 打开连接
*   使用 ObjectContext 的 ExecuteStoreCommand 打开/关闭 IDENTITY_INSERT
*   在 DbContext 中有一个构造函数，您可以在其中进行数据转换时关闭 DatabaseGeneratedOption.Identity for PKs

至于性能，我发现最好的方法是对 X 记录进行批量更新，然后处理/重新创建上下文。此外，将 AutoDetectChangesEnabled 设置为 false

可以在此处找到有关性能的有趣阅读：

[在实体框架中插入的最快方式](https://stackoverflow.com/questions/5940225/fastest-way-of-inserting-in-entity-framework)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-29T05:54:43.473

我认为正确的方法是放弃对标识值在源数据库和目标数据库中保持相同的要求。如果您将数据导入 EF 模型并保持关系不变，即创建一个父对象，然后正确添加其子对象，那么您的结构和关系将保持不变。

无论如何，您永远不会在查询中使用标识值，因此不必担心它们的值。

如果不出意外，这将更易于维护。

另一种选择是将 PK 列创建为常规可插入列，而不是自动生成。在 POCO 中，使用

```
<DatabaseGenerated(DatabaseGeneratedOption.None)> 
```

装饰来实现这一点。

# c# - 如何使用 C#.NET HashTable 实现所需的 JSON 格式

> ID：12158123
> 
> 赞同：4
> 
> 时间：2012-08-28T11:17:23.403
> 
> 标签：c#, hashtable

如何使用 C#.NET HashTable 实现下面提到的 JSON 格式

```
{"DoWorkResult":
      [
       {"Perimeter":"55},
       {"Mortgage":"540"},
       {"Area":"1000"}
      ]
} 
```

我尝试使用 Hashtable 执行此操作，示例如下

```
 Hashtable hashtable = new Hashtable();

    hashtable.Add("Area", 1000);
    hashtable.Add("Perimeter", 55);
    hashtable.Add("Mortgage", 540); 
```

但是结果如下图

```
{"DoWorkResult":
      [
       {"Key":"Perimeter","Value":55},
       {"Key":"Mortgage","Value":540},
       {"Key":"Area","Value":1000}
      ]
} 
```

**注意：**我在 WCF 服务方法中返回实际的哈希表，并且我正在使用 ajax 调用从后端读取输出。

**我在前端使用的 Ajax 方法：**

```
$.ajax({
            type: 'POST',
            url: '/Service.svc/DoWork',
            success: function(data) {
                alert(data);
            }
        }); 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-28T11:33:32.837

同时使用[JavaScriptSerializer](http://msdn.microsoft.com/en-us/library/system.web.script.serialization.javascriptserializer.aspx)和[Json.Net](http://json.codeplex.com/)

```
var list = new ArrayList();
list.Add(new { Area = 1000 });
list.Add(new { Perimeter = 55 });
list.Add(new { Mortgage = 540 });

var s1 = new JavaScriptSerializer().Serialize(new { DoWorkResult = list });
var s2 = JsonConvert.SerializeObject(new { DoWorkResult = list }); 
```

# android - NFC makereadonly 在某些设备上失败

> ID：12158128
> 
> 赞同：0
> 
> 时间：2012-08-28T11:17:41.593
> 
> 标签：android, nfc

我试图将 NFC-Tag 设为只读。在不同的设备上我得到不同的结果：

```
Samsung Galaxy Nexus returns for ndef.canMakeReadOnly():
true

Sony Xperia S returns for ndef.canMakeReadOnly():
false 
```

它是相同的标签，相同的代码。没有检查我得到一个错误：

```
pphLibNfc_ConvertToReadOnlyNdef() returned 0x00ff [NFCSTATUS_FAILED] 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-29T13:28:39.153

有特定于类型或供应商的方式来锁定或解锁标签，因此通常您不能期望它们全部出现在所有设备中。

# c++ - 在 pthreads 上采用 Cilk++

> ID：12158132
> 
> 赞同：0
> 
> 时间：2012-08-28T11:17:51.563
> 
> 标签：c++, multithreading, pthreads, cilk, cilk-plus

我有这个问题有一段时间了。我看到了关于 Cilk++ 的 MIT 开放课件讲座。
使用线程的界面看起来很简单，工具似乎很有用。讲师解释了使用 Cilk++ 代替 pthread 或 OpenMP 的优点。通过一般的书店浏览，我曾经遇到过一本关于 Cilk++ 的书。

但是，尽管麻省理工学院对 Cilk++（现在归英特尔所有）说了很多好话，但似乎很少有人采用它。

这方面的证据，无论它可能多么小或有偏差，都将是缺乏出版书籍以及关于 SO 的数量或追随者或标记的问题。（在撰写本文时）

亚马逊搜索给出
1\. Cilk++ 2 个结果
2\. pthreads 166 个结果
3\. OpenMP 278 个结果

SO 标签
1\. Cilk 11 位关注者
2\. OpenMP 242 位关注者
3\. pthreads 258 位关注者

Cilk++ 采用缓慢/很少的可能原因是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-05T10:51:55.543

我想说，思想共享是人们不采用新技术的最大原因之一。就 cilk++ 而言，它涵盖了许多替代技术（例如 boost.thread、posix 线程、openMP 和 C++11 中的新特性）所涵盖的“足以完成工作”的领域。

此外，任何新技术的采用曲线在开始时都非常缓慢。有些想法需要 10 年或更长时间才能实现（可悲但真实）。其他人被纳入现有的想法。有些人因为糟糕而迷失在历史中，有些人尽管很出色，但也被历史迷失了。

我认为英特尔决定保持 Cilk++ 开源并在 gcc 中保持对它的支持将有所帮助（假设他们使 cilk++ 与 C++11 兼容）。我的感觉是，如果它起飞了，它最终会被纳入 C++ 中，这并不是一件坏事。

**2018 年 11 月更新**

cilk 支持[已从 gcc8](https://gcc.gnu.org/gcc-8/changes.html)中删除。这可能是因为[英特尔弃用它](https://software.intel.com/en-us/forums/intel-cilk-plus/topic/745556)而支持 openMP 和 TBB。ISO C++ 的并发性最近和持续增加了许多，这使得 cilk 的语法糖变得不那么重要，并且库解决方案更可取（以跟上步伐）。

基于任务的并行性包含在[并行性 ts](https://github.com/cplusplus/parallelism-ts/releases)中，因此非常接近标准化（作为可选附加项）。

这个的历史大致如下

*   cilk 人在 2012 年的 N3409 提案中提议将他们的增强功能添加到 C++ 标准中。
*   这被拒绝支持调查基于库的方法导致[http://www.open-std.org/JTC1/SC22/WG21/docs/papers/2013/n3557.pdf](http://www.open-std.org/JTC1/SC22/WG21/docs/papers/2013/n3557.pdf)不久之后
*   最近到[http://www.open-std.org/jtc1/sc22/wg21/docs/papers/2014/n4088.pdf](http://www.open-std.org/jtc1/sc22/wg21/docs/papers/2014/n4088.pdf) 这似乎已经演变成我们今天所拥有的并行性的一部分。

# java - 如何使用servlet动态生成pdf

> ID：12158138
> 
> 赞同：0
> 
> 时间：2012-08-28T11:18:22.880
> 
> 标签：java, jasper-reports

我在*JSP* servlet中使用*JasperReports生成 pdf。*我将字符串参数传递给报告。当我尝试生成单个 pdf 时，生成的 pdf 很好，但是当我尝试生成两个 pdf 时，对于第一个参数，生成 pdf，但对于第二个参数，不生成 pdf。

 *我通过循环传递参数。

```
String array[]={"1233","234"};
HashMap params = new HashMap();
Class.forName("oracle.jdbc.driver.OracleDriver");
Connection cn=DriverManager.getConnection("jdbc:oracle:thin:@103.179.1.218:1521:tims","scoot","tiger");

for(int i=0;i<array.length;i++) {
    params.put("seller_name",array[i]);

    JasperDesign jasperDesign = JRXmlLoader.load(getServletContext().getRealPath("/")+"report\\CForm.jrxml");
    JasperReport jasperReport = JasperCompileManager.compileReport(jasperDesign);
    JasperPrint jasperprint = JasperFillManager.fillReport(jasperReport,params, cn);
    byte[] pdfasbytes = JasperExportManager.exportReportToPdf(jasperprint);
    ServletOutputStream outstream=response.getOutputStream();
    response.setContentType("application/pdf");
    response.setContentLength(pdfasbytes.length);
    String fileName="report"+i+".pdf";
    response.setHeader("Content-disposition", "attachement; filename="+fileName);
    outstream.write(pdfasbytes);
    JRExporter exporter = new JRPdfExporter();
    exporter.setParameter(JRExporterParameter.JASPER_PRINT, jasperprint);
    exporter.setParameter(JRExporterParameter.OUTPUT_STREAM, outstream);
    params.clear();

} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-28T16:31:42.673

有一些方法可以在响应中发送多个文件，但在浏览器之间是不一致的。我相信最好的方法是在单个文件的情况下返回一个 pdf，在多个文件的情况下返回一个 zip 文件，以防您希望该单个文件直接在浏览器中打开。

我更改了您的代码以返回包含报告的 zip 文件，但您应该满足那里的硬编码字符串（seller_name），并将一些功能移动到其他类而不是单个方法。

```
protected void processRequest(HttpServletRequest request, HttpServletResponse response) {
    ZipOutputStream zipfile = null;

    try {
        String array[] = {"1233", "234"};
        HashMap params = new HashMap();

        Class.forName("oracle.jdbc.driver.OracleDriver");
        Connection cn = DriverManager.getConnection("jdbc:oracle:thin:@103.179.1.218:1521:tims", "scoot", "tiger");

        // Wrap the servlet output stream with a zip output stream
        zipfile = new ZipOutputStream(response.getOutputStream());

        for (int i = 0; i < array.length; i++) {
            params.put("seller_name", array[i]);

            JasperDesign jasperDesign = JRXmlLoader.load(getServletContext().getRealPath("/") + "report\\CForm.jrxml");
            JasperReport jasperReport = JasperCompileManager.compileReport(jasperDesign);                
            JasperPrint jasperprint = JasperFillManager.fillReport(jasperReport, params, cn);

            byte[] pdfAsBytes = JasperExportManager.exportReportToPdf(jasperprint, params, cn);

            // Create and add the zip entry 
            ZipEntry zipentry = new ZipEntry("report" + i + ".pdf");                                
            zipfile.putNextEntry(zipentry);                
            zipfile.write(pdfAsBytes);                                
        }            

        // Add the response headers
        response.setHeader("Content-disposition", "attachement; filename=" + UUID.randomUUID().toString() + ".zip");                
        response.setContentType("application/zip");            
    } catch (Exception ex) {
        log("An error occured", ex);
    } finally{
        try {
            // Flush the stream
            zipfile.flush();
        } catch (Exception e) {                
        }

        try {
            // Close the stream
            zipfile.close();
        } catch (Exception e) {                
        }
    }
} 
```

我希望它有帮助！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-28T11:37:37.017

一些意见/建议

1.  servlet 的响应是每个请求的。即一个请求后一个响应。
2.  您将在循环结束时关闭 ServletOutputSteam，从而停止任何进一步的响应。
3.  您的方法现在可能适用于多个 PDF。一种方法是在循环中创建一个 PDF 列表，创建所有 PDF 的 zip 并将其发送给最终用户。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-28T11:27:10.677

如果要使用相同的输出流生成两个 pdf 是不可能的。您只能使用输出流生成一个文件。

如果您想生成 2 个或更多 pdf 文件，我建议您创建一个 zip 文件并将其写入输出流。

分析您的代码很明显您无法生成两个文件，因为在循环期间您关闭输出流并刷新数据。

您应该以这种方式获得一个 Response 已经 commeted 或类似的东西。*

# apache - mod-rewrite 无限递归

> ID：12158143
> 
> 赞同：0
> 
> 时间：2012-08-28T11:18:36.463
> 
> 标签：apache, mod-rewrite, redirect

我对 apaches mod-rewrite 有以下问题（这可能是一个简单的问题，但我就是不明白......）

我希望我的 URL 路径以两个字母部分（国家代码）开头，例如

```
http://www.example.com/se/ 
```

每当一个 URL 与此模式不匹配时，我希望我`.htaccess`重定向到一个固定的起始地址，如上面的`http://www.example.com/se/`。

我还需要重定向不以斜杠结尾的 URL（即`http://www.example.com/se`也应该重定向......）

我在我的`.htaccess`:

```
RewriteEngine On
RewriteBase /
RewriteCond %{QUERY_STRING} !^/[a-z]{2}/
RewriteRule ^(.*)$ se/ [R,L] 
```

但这会导致无限递归，因为请求`http://www.example.com/se/`也会被重定向。我不明白，为什么`RewriteCond`在这种情况下变成真的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-28T17:43:08.653

您正在检查您的查询字符串（这是 URL 中的所有内容*）*是否`?`不以`/[a-z]{2}/`. 在你的例子中，它没有。因此，在重定向之后，查询字符串**仍然**不是以此开头，因此您会再次被重定向到相同的 URL。然后一次又一次。

我认为您正在寻找的是`%{REQUEST_URI}`：

```
RewriteEngine On
RewriteBase /
RewriteCond %{REQUEST_URI} !^/[a-z]{2}/
RewriteRule ^(.*)$ se/ [R,L] 
```

# bash - 是否有可能在 Bash 中获得所有同时运行的子进程的输出

> ID：12158146
> 
> 赞同：1
> 
> 时间：2012-08-28T11:18:52.690
> 
> 标签：bash, subprocess

我有一个这样的 bash 代码。

```
while <some_condition>
do
    some_script &
done 
```

我的目的是获取 some_script 代码的所有输出并分配一个变量。我试着写

```
out=`some_script &` 
```

但是这次 some_script 代码没有同时运行。我能做些什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-28T11:30:34.453

您可以将后台命令重定向到临时文件，然后`wait`让它们完成并将输出收集回变量：

```
while <some_condition>
do
    temp=$(mktemp)
    temps=$temps" $temp"
    some_script > $temp &
done
wait
output=$(cat $temps)
rm $temps 
```

# php - 使用 MSSQL 选择语句 - 未定义函数 sqlsrv_exec()

> ID：12158149
> 
> 赞同：0
> 
> 时间：2012-08-28T11:19:00.413
> 
> 标签：php, sql, sql-server

我正在使用`xampp, PHP, and MSSQL`. 我需要`SELECT`从数据库做一个声明`MSSQL`。现在我只建立了一个连接`MSSQL`并且发现很难对来自数据库的声明做一个`SELECT`声明。`dbo.My_TABLE`

我的代码如下；

我得到的错误`Fatal error: Call to undefined function sqlsrv_exec() i`

```
$ser = "COMP\DEF";
$co = array( "Database"=>"IST");
$conn = sqlsrv_connect( $seR, $CO);

if(! $conn ) {
     echo "failed.";
}

if ($conn) 
{ 
  //the SQL statement that will query the database 
  $query = "select * from dbo.MY_TABLE"; 
  //perform the query 
  $result=sqlsrv_exec($conn, $query); 

  //print field name 
  $colName = sqlsrv_num_fields($result); 
  for ($j=1; $j<= $colName; $j++) 
  {  
    echo "<th>"; 
    echo sqlsrv_field_name ($result, $j ); 
    echo "</th>"; 
  } 

  //fetch tha data from the database 
  while(sqlsrv_fetch_row($result)) 
  { 
    echo "<tr>"; 
    for($i=1;$i<=sqlsrv_num_fields($result);$i++) 
    { 
      echo "<td>"; 
      echo sqlsrv_result($result,$i); 
      echo "</td>"; 
    } 
    echo "</tr>"; 
  } 

  echo "</td> </tr>"; 
  echo "</table >"; 

  //close the connection 
  sqlsrv_close ($conn); 
} 

?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-28T11:45:51.297

尝试将其替换为`sqlsrv_execute`

这是手册和示例：

[http://www.php.net/manual/en/function.sqlsrv-execute.php](http://www.php.net/manual/en/function.sqlsrv-execute.php)

# database - Star sql ODBC 驱动程序 - 将数据库名称显示为乱码

> ID：12158150
> 
> 赞同：0
> 
> 时间：2012-08-28T11:19:00.703
> 
> 标签：database, odbc, db2, database-connection

我正在使用带有定义的 ODBC 连接的 windows xp 机器，用于使用 star sql odbc 驱动程序的 DB2 数据库。

当我尝试使用连接访问数据库时，水晶报告菜单会显示乱码。如图所示。 ![在此处输入图像描述](../Images/1ea4b70cbfc44a32e4968952d8ca2202.png)

早些时候显示的是数据库名称，而不是这个乱码。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-13T11:04:07.417

我自己解决了。

似乎需要更新与此 ODBC 连接关联的星型 sql 数据库驱动程序。更新驱动后问题解决。

# c++ - 使用模板对象进行操作

> ID：12158153
> 
> 赞同：1
> 
> 时间：2012-08-28T11:19:10.973
> 
> 标签：c++, templates, pointers, function-pointers, pointer-to-member

**免责声明**我不允许使用 BOOST 或任何其他库，只能使用标准库。

在我的类`Foo`中，我有一个模板函数`foo`，它有两个参数：一个*指向对象*的指针和一个*指向这个对象成员函数*的指针。`foo`如您所见，该函数适用于任何类的指针。我不知道，什么类将传递给它。此函数创建模板结构的实例。

```
template <typename TypeName>
struct Bar
{
    void(TypeName::*action)();
    TypeName* objPtr;
};

template <typename TypeName> void Foo::foo ( void(TypeName::*action)() , TypeName* objPtr )
{
    Bar <TypeName> bar;
    bar.action = action;
    bar.objPtr = objPtr;
}; 
```

我的问题是：如何存储`Bar`, created in 的对象`foo`，以便以后可以遍历它们并像这样调用*指向对象成员函数*的指针：

```
(BarStorage[i].objPtr->*BarStorage[i].action)(); 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-28T11:31:14.830

使用*类型擦除*：

```
class BarBase {
    virtual void invoke() = 0;
};

template<typename TypeName>
class Bar final : public BarBase {
    void(TypeName::*action)();
    TypeName* objPtr;
    virtual void invoke() override { (objPtr->*action)(); }
};

class Foo {
    std::vector<std::unique_ptr<BarBase>> myBars;
/* ... */
};

template <typename TypeName>
void Foo::foo ( void(TypeName::*action)() , TypeName* objPtr)
{
    auto bar = new Bar<TypeName>();
    bar->action = action;
    bar->objPtr = objPtr;
    myBars.emplace_back(bar);
}; 
```

然后只需调用`myBars[x]->invoke();`

* * *

回答评论中的问题。

**怎么了`override`？**明确地说您从基类中重写虚函数。这在这里并不是真正必要的，但被认为是良好的做法。有关更多详细信息，请参阅[Wikipedia 文章](http://en.wikipedia.org/wiki/C%2B%2B11#Explicit_overrides_and_final)。

它是 C++11 的一个新特性，一些编译器在很长一段时间内都以某种方式支持这个特性，但它直到现在才被标准化。[GCC 应该从 4.7 版本开始支持这个特性](http://gcc.gnu.org/projects/cxx0x.html)——你必须使用命令行参数`-std=c++0x`。

**怎么了`unique_ptr`？**它使生活更轻松。当您分配时`new Bar<XXX>()`，您必须在某个时候说`delete`释放该内存。如果您将指针放在像 之类的资源管理对象`unique_ptr`中，则不再需要担心删除它。你将`vector<BarBase*>`不得不声明一个析构函数，`Foo`它执行以下操作：

```
for each element in myBars
    delete element 
```

如果您使用`vector<unique_ptr<BarBase>>`，则无需担心删除任何内容。当在 的生命`vector`结束时被销毁时`Foo`，它将销毁其元素 - 并`unique_ptr`删除它包含在自己的析构函数中的内存。

这也是 C++11 的特性——标准库的补充。您不必使用它（但请确保最后删除所有内容）。

**怎么了`auto`？**而不是重复相同的类型两次（`Bar<Type> * bar = new Bar<Type>();`），只需使用一次，然后让编译器根据初始化程序的类型推断出变量的正确类型。它的行为完全相同，只是打字更少，看起来更好:)

还有 C++11 特性，自 v4.4 起在 GCC 中得到支持。

**为什么`myBars[x]->invoke()`做对的事？**因为`invoke`在`BarBase`. 这意味着执行的方法是根据 的动态类型（执行期间的实际类型）而`myBars[x]`不是静态类型来选择的。有关深入解释，请参阅[Wiki](http://en.wikipedia.org/wiki/Virtual_function)。这种机制有一点运行时开销，但在处理动态类型时无济于事。

# fonts - 选定文本字体检测

> ID：12158156
> 
> 赞同：0
> 
> 时间：2012-08-28T11:19:21.720
> 
> 标签：fonts, selection, font-family

接下来是问题：

1.  我有一个空的`textarea`.
2.  然后我在其中粘贴一些外部文本，其中包含特定`font`的 .
3.  我选择（突出显示）此文本的某些部分。
4.  我需要检测，什么`font`是`selection`.

请注意，textarea 的文本是纯文本，其中没有`HTML`格式。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-28T11:39:13.860

textarea 只会以页面指定的字体呈现，因此您可以通过执行以下操作使用 jQuery 获取字体：

```
var font = $("textarea").css("font-family"); 
```

但是，听起来您想知道文本最初的字体。不幸的是，这是不可能的，因为字体信息在粘贴到浏览器时会丢失。

# java - Java“存储过程”思想

> ID：12158157
> 
> 赞同：1
> 
> 时间：2012-08-28T11:19:27.200
> 
> 标签：java, stored-procedures

我有一个相当“疯狂”的想法，即在我的应用程序中拥有一个“存储过程”设施。基本上，我的应用程序是以数据为中心的，它可以通过某种形式的 Restful 接口访问数据存储区。

我想拥有以`JSON`多种方式操作数据（这是一个字符串）的功能，比如

*   递增/递减
*   散列/加密/解密和各种各样的东西

我最初的实现是创建一个 Java 类来执行这些操作。典型的。

但是，我希望能够灵活地进行此类操作。也就是说，我可以添加一个过程来即时操作数据，也就是说，就像一个 `script`可以选择的过程，它将处理检索到的数据，然后将其再次保存在数据存储中。

例如：

```
http://127.0.0.1:8888/resources?key=somekey&operation=funkyops 
```

*这将导致服务器使用此类密钥在内部获取实体，然后操作数据并将实体保存回数据存储区。*

检索和持久化逻辑可以被硬编码，但“存储过程”必须作为脚本或类似的东西存储在数据存储中，然后在选择时将被传递到某种处理块中。

这是我正在尝试做的一个具体示例：[HashBend.java](https://bitbucket.org/kerbymart/whopper/src/7813a4ab917b/src/keyvalue/java/org/whopper/persistence/bend/types/HashBend.java)

关于如何实现这一目标的任何想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-28T11:25:16.957

您可以使用 javascript 引擎：请参阅“Java 平台脚本” [http://java.sun.com/developer/technicalArticles/J2SE/Desktop/scripting/](http://java.sun.com/developer/technicalArticles/J2SE/Desktop/scripting/)

例如：

```
http://host/resources?key=somekey&operation=return+{newkey:123,data1:"hello"}; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-28T11:26:13.227

您最好的选择是简单地使用脚本语言并通过 Java 调用解释器。

如果您坚持只使用 Java，那么可能有一种方法....

创建一个所有脚本都符合的接口，该接口指定操作数据的方法。创建您的特定类，对其进行序列化，然后将其包含在 json 中（可能是 base 64 编码）。

当你得到 json 时，提取 base 64 数据，转换回二进制，反序列化并转换为你知道的接口类型。调用操作方法。

我还没有尝试过，但我看不出它不起作用的任何原因。不过，我建议的是实施一个签名方案，这样您就可以确定您执行的代码来自您认为它来自哪里。您不希望有人注入恶意代码。

# sql-server - 如何在调度程序的基础上自动运行存储过程？

> ID：12158158
> 
> 赞同：14
> 
> 时间：2012-08-28T11:19:30.080
> 
> 标签：sql-server

我想在每晚自动执行一个存储过程。我该怎么做。请指导我实现这一目标的步骤。

提前致谢。

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-08-28T11:25:29.123

您可以使用 SQL Server 代理创建作业。

![在此处输入图像描述](../Images/163c2e6eea4258ffb17ac5dbadf9fd41.png)

右键单击 Jobs 文件夹以打开菜单，选择 New Job：

![在此处输入图像描述](../Images/a8f9dea8ab0d97e55e6d56af562da847.png)

当您创建新工作时，将打开一个窗口，您将提供您想要创建的工作的详细信息。包含：

*   名称 - 在常规选项卡中
*   步骤 - 可以运行 SQL 脚本、SSIS 包、存储过程
*   计划 - 以您选择的频率重复、每周、每天等。

这是[创建 SQL 作业的分步指南](https://web.archive.org/web/20180805020140/http://www.dailycoding.com/Posts/step_by_step_guide_to_add_a_sql_job_in_sql_server_2005.aspx)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-28T11:48:52.200

尝试这个：

```
CREATE PROCEDURE MyTask
 AS
BEGIN  
    SET NOCOUNT ON;
    --  For executing the stored procedure at 11:00 P.M
    declare @delayTime nvarchar(50)
    set @delayTime = '23:00'

    while 1 = 1
    begin
        waitfor time @delayTime 
        begin
            --Name for the stored proceduce you want to call on regular bases
            execute [DatabaseName].[dbo].[StoredProcedureName];
        end
    end
END 
```

然后，

```
-- Sets stored procedure for automatic execution.
sp_procoption    @ProcName = 'MyTask',
                @OptionName = 'startup',
                @OptionValue = 'on' 
```

参考：

[sp_procoption (Transact-SQL)](http://msdn.microsoft.com/en-us/library/ms181720.aspx)

设置或清除自动执行的存储过程。每次启动 SQL Server 实例时，都会运行一个设置为自动执行的存储过程。

[等待](http://msdn.microsoft.com/en-us/library/ms187331.aspx)

阻止批处理、存储过程或事务的执行，直到达到指定的时间或时间间隔，或者指定的语句修改或返回至少一行。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-28T11:24:34.943

快速解决方案是，

创建存储过程 编写 SQL 作业（以下是步骤）

[http://www.dailycoding.com/Posts/step_by_step_guide_to_add_a_sql_job_in_sql_server_2005.aspx](http://www.dailycoding.com/Posts/step_by_step_guide_to_add_a_sql_job_in_sql_server_2005.aspx)

在步骤 5 中配置您创建的存储过程。

# javascript - WinJS：如何直接在选项中解析全局资源

> ID：12158159
> 
> 赞同：1
> 
> 时间：2012-08-28T11:19:31.187
> 
> 标签：javascript, microsoft-metro, windows-runtime, visual-studio-2012, winjs

有没有办法在我的 WinJS 控件选项定义中直接使用 WinJS 评估全局资源，而不是使用`data-win-res`属性，因为特定选项是一个复杂的对象？

这是我所拥有的：

```
<div id="CustomControl" data-win-control="My.Custom.NameSpace.Control" data-win-options="{
     opt1: 123,
     opt2: [
         { prop1: WinJS.Resources.getString('Global_Resource_String').value },
         ...
     }">
</div> 
```

以下评估资源的尝试因解释器需要括号但看到左括号的错误而崩溃。你可以看到为什么我不能轻易地为这个选项生成一个 setter 并且`data-win-res="{ winControl: {opt2[0].prop1: "Global_Resource_String"} }"`对我不起作用。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-13T11:13:49.143

事实证明，在`data-win-options`属性内部无法执行函数评估，因此评估全局资源存在问题。如果我想为全局资源分配一个复杂的选项，我需要在全局变量中进行函数评估，然后像这样分配给它：

```
<script type="text/javascript">
    var resource = WinJS.Resources.getString('Global_Resource_String').value;
</script>

<div id="CustomControl" data-win-control="My.Custom.NameSpace.Control" data-win-options="{
     opt1: 123,
     opt2: [
         { prop1: resource },
         ...
     }">
</div> 
```

# javascript - 一页应用程序的 javascript 集成测试

> ID：12158163
> 
> 赞同：5
> 
> 时间：2012-08-28T11:19:49.773
> 
> 标签：javascript, testing, selenium, integration, phantomjs

我目前正在开发一个单页 javascript 应用程序，在服务器端使用 Sinatra Ruby，在客户端使用 Backbone.js、jQuery、jQuery UI。该应用程序的主要目的是允许客户查看/编辑不同类型的项目，每个项目视图都是或多或少复杂的表单。

为了确保一切正常，我打算这样做：

*   使用 QUnit 的单一测试
*   功能/集成测试

在这种情况下，您推荐哪些框架/工具用于集成测试？我从 Selenium 开始，但我不太喜欢它。我刚开始研究 PhantomJS 和 CasperJS，它们对于导航、点击链接、...

你有什么建议？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-10-31T01:36:09.317

您没有说您不喜欢 Selenium 的哪些方面，但我猜您对 JavaScript 很有信心，所以我的建议是使用[CasperJS](http://casperjs.org/)作为主要工具。它确实适用于单页网络应用程序，并带有自己的测试工具。`wait`使用嵌套子句时，代码有时仍会有些复杂；通过确保您在每个测试中不要尝试做太多事情来解决这个问题，然后如果仍然很复杂，请重构。并且不要忘记为测试而设计：如果您的选择器非常复杂，请考虑`<span id="xxxx">...</span>`在它周围添加一个，这样您的测试就可以直接进入它！

您可以将 CasperJS 与[PhantomJS](http://phantomjs.org/)和[SlimerJS](http://slimerjs.org/)一起使用。我目前更喜欢 SlimerJS，因为：

*   PhantomJS 1.x 停留在旧的 WebKit（相当于 Safari 5.1 和 Chrome 13）上，因此测试任何更现代的功能都令人沮丧。
*   SlimerJS 可以与 Gecko 引擎一起使用，也可以直接与您安装的 Firefox 版本一起使用。这允许您使用额外的插件、安全证书等配置 Firefox 配置文件。
*   SlimerJS 是用 JavaScript 编写的，因此如果您有需要，更容易破解。

一旦 PhantomJS 2.0 发布（希望在 2013 年底左右），或者如果您的网站不依赖任何最新的 HTML5 API，您可以运行 CasperJS 两次，以获得双重覆盖。（顺便说一句，PhantomJS 自然是无头的；SlimerJS 需要使用[Xvfb](http://en.wikipedia.org/wiki/Xvfb)，仅适用于 Linux 或 Mac。）

[Selenium](http://docs.seleniumhq.org/)为您提供的额外功能是您可以控制其他浏览器，尤其是 IE。（当然，对于 IE，您需要运行 Windows 机器。）Selenium 和 SlimerJS 一样，需要 Xvfb 是无头的（同样，不包括 Windows）。（顺便说一句，[支持的浏览器上](http://docs.seleniumhq.org/about/platforms.jsp#browsers)的 Selenium 文档已经很久没有更新了，但我假设每个浏览器的更高版本至少有相同的支持。）

# mongodb - 如何在mongo map reduce函数中处理大型数组数据集

> ID：12158168
> 
> 赞同：1
> 
> 时间：2012-08-28T11:20:01.097
> 
> 标签：mongodb, mapreduce

我有一个 map/reduce 作业，它建立一个数组，reduce 执行数组连接。有时，生成的文档似乎达到了最大 bson 大小限制，并且 map reduce 失败并出现“值太大而无法减少”错误。

请让我们知道如何处理这种情况。我想要数组中的所有文档。我无法在数组中连接，因为如果有更多文档，它会因上述错误而失败..

谢谢 MRK

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-28T14:11:34.100

您可以使用 MongoDB Hadoop Adapter 之类的东西在真正的 map/reduce 框架上运行 map reduce 作业。

[https://github.com/mongodb/mongo-hadoop/](https://github.com/mongodb/mongo-hadoop/)

# c# - 查询 x64-GAC

> ID：12158170
> 
> 赞同：3
> 
> 时间：2012-08-28T11:20:14.680
> 
> 标签：c#, .net, winapi, gac

使用以下代码，我正在查询 GAC 以查看它是否安装了某个程序集。代码本身工作正常，但我只得到[x86 GAC](http://i.stack.imgur.com/h8j09.png)的结果。该程序集安装在 GAC GAC_64 和 GAC_32 中。

我该怎么做才能让“QueryAssemblyInfo”检查 x64 GAC？

```
 public bool IsInGac(string assemblyName)
  {
     ASSEMBLY_INFO assembyInfo = new ASSEMBLY_INFO();
     assembyInfo.cchBuf = 512;
     assembyInfo.currentAssemblyPath = new string('\0', assembyInfo.cchBuf);

     IAssemblyCache assemblyCache = null;

     IntPtr hr = NativeMethods.CreateAssemblyCache(out assemblyCache, 0);
     if (hr == IntPtr.Zero)
     {
        hr = assemblyCache.QueryAssemblyInfo(1, assemblyName, ref assembyInfo);
        if (hr != IntPtr.Zero)
        {
           return false;
        }

        return true;
     }

     return false;
  }

  internal static class NativeMethods
  {
     [DllImport("fusion.dll")]
     public static extern IntPtr CreateAssemblyCache(out IAssemblyCache ppAsmCache, int reserved);
  }

  [ComImport, InterfaceType(ComInterfaceType.InterfaceIsIUnknown), Guid("e707dcde-d1cd-11d2-bab9-00c04f8eceae")]
  internal interface IAssemblyCache
  {
     int Dummy1();
     [PreserveSig]
     IntPtr QueryAssemblyInfo(int flags, [MarshalAs(UnmanagedType.LPWStr)]string assemblyName, ref ASSEMBLY_INFO assemblyInfo);
     int Dummy2();
     int Dummy3();
     int Dummy4();
  }

  [StructLayout(LayoutKind.Sequential)]
  internal struct ASSEMBLY_INFO
  {
     public int cbAssemblyInfo;
     public int assemblyFlags;
     public long assemblySizeInKB;

     [MarshalAs(UnmanagedType.LPWStr)]
     public String currentAssemblyPath;

     public int cchBuf;
  } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-28T11:40:52.363

```
 [DllImport("fusion.dll")]
    public static extern IntPtr CreateAssemblyCache(...) 
```

此函数的返回类型是 HRESULT。这是一个**int**，而不是 C# 中的 IntPtr 。QueryAssemblyInfo() 声明也是如此。

当您以 AnyCPU 为目标时，这可能会导致随机故障。除此之外，代码很好，在我的机器上找到 GAC_64 中的程序集也没有问题。

![在此处输入图像描述](../Images/2f121431e987ced24e2a82dbea900c24.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-01-25T21:42:14.693

自 .NET 1.1 起，这一切都可以通过[System.EnterpriseServices程序集获得](https://msdn.microsoft.com/en-us/library/system.enterpriseservices.internal.publish(v=vs.110).aspx)

```
var publisher = new System.EnterpriseServices.Internal.Publish();
publisher.GacInstall(@"C:\Temp\MyDLL.dll") 
```

或者

```
publisher.GacRemove(@"C:\Temp\MyDLL.dll") 
```

# android - 使用三星 Galazy SIII/S3 调试模式 (AVD)

> ID：12158171
> 
> 赞同：3
> 
> 时间：2012-08-28T11:20:21.443
> 
> 标签：android, mobile

我正在尝试安装我在 S3 上编写的 android 应用程序。我已经下载了 USB 驱动程序，设备可以正常识别。我启用了 USB 调试，但是当我连接设备时，AVD 管理器中没有显示任何内容。我错过了什么吗？我尝试更改 MTP 和 PTP 之间的 USB 连接类型，但没有任何区别。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-28T11:22:09.447

您可能需要`android_winusb.inf`使用设备 ID 填充文件（在 {android-sdk}/extras/google/usb_driver 中）。您还需要在 SDK 管理器中安装“Google USB 驱动程序”。

1.  在 Windows 设备管理器中找到设备的 ID，右键单击您的 USB 设备，然后转到属性和详细信息选项卡，应该有类似“设备 ID 号”的内容：

2.  将其添加到 android_winusb.inf（在“[Google.NTx86]”部分中）：

    [谷歌.NTx86]

    %SingleAdbInterface% = USB_Install, USB\VID_04E8&PID_681C

    %CompositeAdbInterface% = USB_Install, USB\VID_04E8&PID_681C&MI_03

# html - 我正在尝试创建一种效果，当我将鼠标悬停在 div 中时，它会影响所有的孩子

> ID：12158172
> 
> 赞同：1
> 
> 时间：2012-08-28T11:20:23.637
> 
> 标签：html, css, hover, children

我对 HTML 和 CSS 真的很陌生，我在创建网站的过程中一直在学习它。在我的作品集页面之前一直进展顺利，我的问题是我创建了一个作品集主页，其中显示了我的所有作品，并带有标题和项目的简短描述，我设置了 CSS 样式以更改图像悬停点亮（使用恶意表并移动图像的位置）和标题变成蓝色以及描述，我的问题是我希望该部分的所有这些元素或子项同时激活当鼠标悬停在该部分时，目前悬停效果仅在您将鼠标悬停在每个孩子上时才有效。

我已经寻找了很长时间的解决方案，但似乎找不到任何解决方案，我真的很感激这个问题的一些帮助，这可能是一个非常简单的解决方案，但我对 Web 开发非常陌生，所以我被困住了！

这是我的部分 HTML

```
`<section id="port1">
<a href="tempura.html">
<div id="image1"></div>
<h3>TEMPURA</h3>
<p>Branding project incorporating the japanese culture and an animal as the key elements to       represent the brand.</p>
</a>
</section>` 
```

这是CSS

```
`#port1 {
width:247px;
height:280px;
float:left;
background-color:#FFF;
text-decoration:none;

}

#port1 a {
text-decoration:none;

}

#image1 {
height:150px;
width:227px;
background-image:url(../images/Tempuraimg.jpg);
background-position:top left;
margin:10px;
float:left;

}

#image1:hover {
background-position:bottom left;

}

#port1 h3 {
font-size:10pt; 
font-family:"Helvetica", Arial, sans-serif;
font-weight:bold;
color:#333;
margin-left:10px;
margin-right:10px;
padding-bottom:5px;
padding-top:5px;
border-bottom:1px dotted #999;
text-decoration:none;

}

#port1 h3:hover {
color:#09F;

}

#port1 p {
font-size:8pt;  
font-family:"Helvetica", Arial, sans-serif;
font-weight:200;
color:#999;
padding-top:10px;
margin-left:10px;
margin-right:10px;
text-decoration:none;

}

#port1 p:hover {
color:#0099FF;

}` 
```

最后这是我的网站到目前为止，页面是问题是投资组合页面这里是链接

[http://mattwilsongraphicdesigns.co.uk/portfolio.html](http://mattwilsongraphicdesigns.co.uk/portfolio.html)

如果您认为您可以帮助我，我将不胜感激

最良好的祝愿

马特·威尔逊

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-28T11:29:34.067

给**:hover**给父母并`child's`根据他们改变他的风格。像这样写：

```
#port1:hover p,
#port1:hover h3{
 color:#0099FF;
}

#port1:hover #image1{
 background-position:bottom left;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-28T11:25:18.780

你这样做的方式并不是说实话的最佳方式，因为你使用了太多的 ID。您可以简单地使用类而不是 ID... 而不是 port1、port2、port3 ... 并一遍又一遍地重写相同的规则，您可以简单地使用 class="port"。CSS 是关于编写可反复使用的可重用规则的工作量和工作量。

你应该阅读更多关于 CSS 的内容。我建议您查看[HTML Dog 上的 CSS Beginner Tutorials](http://www.htmldog.com/guides/cssbeginner/)

无论如何，这就是如何实现您想要做的事情。这将适用于除 IE6 之外的所有浏览器，因为它无法识别 :hover 除了锚元素

```
#wrapper section:hover p,
#wrapper section:hover h3 {
    color:#0099FF;
}

#wrapper #image1{
    background-position:bottom left;
} 
```

或者，您可以使用此选择器让图像容器使用一次，而不是 #image1、#image2 ... 等

```
div[id^=image] {
    background-position:bottom left;
} 
```

# mysql - 我无法从 REST Web 服务将数据发布到 mysql 数据库

> ID：12158173
> 
> 赞同：0
> 
> 时间：2012-08-28T11:20:36.943
> 
> 标签：mysql, rest, jakarta-ee, jax-rs

这是我的休息代码

```
@Path("Users")
public class ItemsResource extends stu{

  @Context
  private UriInfo context;

  /**
   * Creates a new instance of ItemsResource
   */
  public ItemsResource() {
  }

  /**
   * Retrieves representation of an instance of service.ItemsResource
   * @return an instance of java.lang.String
   */
  @GET
  @Produces("text/plain")
  public String getText() {
      //TODO return proper representation object
      throw new UnsupportedOperationException();
  }

  /**
   * POST method for creating an instance of ItemResource
   * @param content representation for the new resource
   * @return an HTTP response with content of the created resource
   */
   @POST
   @Consumes("text/plain")
   @Produces("text/plain")
   public Response postText(@PathParam("id") int id,@PathParam("Password") String Password,
                        @PathParam("Username") String Username) {
    //TODO

       super.createText(id,Password,Username);
       return Response.created(context.getAbsolutePath()).build();
      // return "success";
   }
  /**
   * Sub-resource locator method for {id}
   */   
} 
```

这是 stu.java

```
class stu {

     public String createText(int id,String Username,String Password) {
        //TODO
       try 
       {
          Class.forName("com.mysql.jdbc.Driver");
          Connection con=DriverManager.getConnection("jdbc:mysql://localhost:3306/users","root","789456");

          String query=  "Insert into users (id,username,password) values('"+id+"','"+Username+"','"+Password+"')";
          PreparedStatement stm = con.prepareStatement(query);         

          stm.executeUpdate(query);
        } catch(ClassNotFoundException e){
           System.err.println ("Sql Exception"+e);
        } catch(SQLException e){
           System.err.println ("Sql Exception"+e);
        }

    return "success";
  } 
} 
```

现在，当我测试休息并发布数据时，它已成功发布，但它没有在数据库中更新，请告诉我我的错误

REST 响应如下

```
Request: POST localhost:8090/WebApplication16/resources/Users?
timestamp=1346152551629

Status: 201 (Created)

Time-Stamp: Tue, 28 Aug 2012 11:15:51 GMT

Sent:
1,hey,hdhb

Received:

-----------------------------------------------------------------------

Request: localhost:8090/WebApplication16/resources/application.wadl

Status: 200 (OK)

Time-Stamp: Tue, 28 Aug 2012 11:15:41 GMT

Received:

<?xml version="1.0" encoding="UTF-8"?>
   <application xmlns="research.sun.com/wadl/2006/10">
       <doc xmlns:jersey="jersey.dev.java.net/" jersey:generatedBy="Jersey: 1.5 01/14/2011 12:36 PM"/>
       <resources base="localhost:8090/WebApplication16/resources/">
           <resource path="Users">
               <param xmlns:xs="www.w3.org/2001/XMLSchema" name="id" style="template" type="xs:int"/>
               <param xmlns:xs="www.w3.org/2001/XMLSchema" name="Username" style="template" type="xs:string"/>
               <param xmlns:xs="http://www.w3.org/2001/XMLSchema" name="Password" style="template" type="xs:string"/>
               <method id="getText" name="GET">
                   <response>
                       <representation mediaType="text/plain"/>
                   </response>
               </method>
               <method id="postText" name="POST">
                   <response>
                       <representation mediaType="text/plain"/>
                   </response>
               </method>
           </resource>
       </resources>
   </application> 
```

它能够联系我的数据库，并在表中创建一个新行，但具有 null、null、null 值。请帮我解决这个问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-28T12:39:55.027

我认为数据没有“成功发布”。`@PathParam`当你有参数时，你可以使用注释`@Path`，比如`@Path("Users/{id}")`.

你是如何发送参数的？如果您使用浏览器和 POST 发送它们`<form>`，请尝试使用`@FormParam`注释。有关更多信息，请参阅[此问题](https://stackoverflow.com/questions/8194408/how-to-access-parameters-in-a-restful-post-method)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-28T12:32:39.470

使用准备好的声明，您不应该立即将值放入。尝试以下

```
String query=  "insert into users (id,username,password) values(?,?,?)";
PreparedStatement stm = con.prepareStatement(query); 
stm.setInt(1, id);
stm.setString(2, Username);
stm.setString(3, Password);
stm.executeUpdate(); 
```

[API页面](http://docs.oracle.com/javase/6/docs/api/java/sql/PreparedStatement.html)上有一个例子

另外，请注意您的论点。您的方法定义有`createText(int id,String Username,String Password)`，但您传递的值与密码和用户名混合在一起。

# iphone - 在后台线程上构建 UIViews

> ID：12158175
> 
> 赞同：4
> 
> 时间：2012-08-28T11:20:44.620
> 
> 标签：iphone, ios, uiview, nsoperationqueue

我知道 UI 应该只在主线程上更新，但是是否可以在单独的线程上创建和添加子视图，只要它们没有添加到可见视图中？它会导致内存和性能问题吗？这是一些示例代码。

```
NSOperationQueue *queue = [[NSOperationQueue alloc] init];
[queue addOperationWithBlock:^{ 
    // do some fancy calculations, building views
    UIView *aView = ..
    for (int i, i<1000, i++)
    {
        UIView *subView = …
        [aView addSubview:subView];
    }

    // Update UI on Main Thread
    [queue addOperationWithBlock:^{
        [[NSOperationQueue mainQueue] addOperationWithBlock:^{

            // Update the interface
            [self.view addSubview:aView];
        }];
    }];
}]; 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-28T11:41:11.520

我对您为什么不想这样做的理解`CALayer`是由非线程安全的内存支持。因此，您可以在后台线程上绘图，但不能渲染图层或操作视图。

因此，您所做的就是将复杂的视图逻辑绘制到图像上下文中，并将图像传递给主线程以在图像视图中显示。

希望这可以帮助！

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-28T11:46:04.493

辅助线程上的 UI 更改将导致应用程序崩溃。所以总是在主线程上进行 UI 更改。

```
[self performSelectorOnMainThread:@selector(makeUIChanges:) withObject:nil waitUntilDone:YES]; 
```

# android - 如何像在 Google Play 应用程序中一样在背景上创建线条？

> ID：12158181
> 
> 赞同：2
> 
> 时间：2012-08-28T11:21:11.163
> 
> 标签：android

`shapes`有一篇不错的文章/教程，如何在特定角度使用or `lines`... 或 some`drawings`在末尾创建带有线条的背景。有人知道吗？谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-28T12:15:22.403

你可以像[这样通过xml做到这一点](https://blob-s-docs.googlegroups.com/docs/OgAAACUiML83LMfFVJuBtKTMHrCdp2mT1q0xrrQm4SE4qBBra2T_PCCWQJLrBdV4Pz0_6pDyiw0FSXsvqxJ0D0YqrEwA15jOjGmXXi2uJk-BEaa2plde4cVwmb8r)

[参见第 27 页：](https://docs.google.com/present/view?id=dfp6vxvn_47dcz63pjj)

![在此处输入图像描述](../Images/0a94e455355ed167beff7555a2e23f86.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-28T11:29:49.700

很少有网站可以在线生成带有预览的条纹：[stripegenerator.com](http://www.stripegenerator.com/)和[stripemania.com](http://www.stripemania.com/)

# php - 通过任务管理器在本地运行 php 脚本

> ID：12158183
> 
> 赞同：1
> 
> 时间：2012-08-28T11:21:21.297
> 
> 标签：php, windows, apache, local, crontab

我正在寻求一些建议。

Rignt 现在我有一堆我通过 cron 安排的 php 脚本。他们在我的本地机器上运行，做一些事情，比如从 mysql 数据库中提取东西并发送自动电子邮件。为了运行它们，我在 crontab 中有这样的东西：`0 7 * * 1 /usr/bin/php /phpscripts/script.php`

我需要将所有这些脚本迁移到 Windows 机器上。我打算使用 Windows 任务计划程序来运行脚本，但是如何在本地运行实际的 php 脚本呢？据我了解，您需要像 xampp 这样的东西来运行 apache 服务器？我想我需要的是 crontab 中 /usr/bin/php 的 Windows 等价物。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-28T11:24:05.450

设置你的任务在你想要的时候运行（时间等等）

并将其弹出到`command`：

```
C:\Path\to\php.exe -f "C:\Path\to\file.php" 
```

编辑：您还可以设置第二个 php.ini 在使用 CLI 运行文件时使用，它对最大执行时间等没有限制。非常方便的区别，更适合运行（可能）长执行脚本。

您可以通过在文件所在`php-cgi.ini`的 PHP 文件夹中创建一个文件来完成此`php.ini`操作。这将在从 CLI 执行 PHP 文件时自动使用（这是计划任务的运行方式）。

另请注意，Windows 调度程序只会以导致脚本失败的错误结束，因此运行一些额外的日志记录可能是一个好主意，以防脚本提前退出。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-28T11:38:20.950

**安装 PHP**

不用安装`xammp`，可以单独安装PHP，看看windows PHP安装指南：

*   [Windows 安装程序（PHP 5.1.0 及更早版本）](http://www.php.net/manual/en/install.windows.installer.php)
*   [Windows 安装程序（PHP 5.2 及更高版本）](http://www.php.net/manual/en/install.windows.installer.msi.php)
*   [手动安装步骤](http://www.php.net/manual/en/install.windows.manual.php)

如果您更喜欢安装 XAMP，您可以在找到`php.exe`带有`-f`标志的 之后运行 PHP 脚本：

```
C:\Xampp\php\php.exe -f C:\Xampp\htdocs\my_script.php 
```

**运行 PHP 文件**

安装 PHP 后，请查看[Microsoft Windows 上的命令行 PHP 手册](http://php.net/manual/en/install.windows.commandline.php)以获取有关如何运行脚本的信息。在页面上有如何使 php 文件可执行的说明，因此您可以将其运行为：

```
"C:\PHP Scripts\script" -arg1 -arg2 -arg3 
```

确保您使用管理帐户来运行该命令。否则你可能会遇到权限问题。[在命令行上使用 PHP 简介中](http://www.php.net/manual/en/features.commandline.introduction.php)的更多信息

**调度任务**

去`Start -> Programs -> Accessories -> System Tools -> Scheduled Tasks`，

1.  右键单击“计划任务”窗口中的空白处，然后选择“新建”->“计划任务”（也可通过“文件”->“新建”->“计划任务”访问）
2.  命名新任务（“比尔”怎么样？他看起来像比尔，不是吗？“Mr. B. Evolution, II”听起来很豪华。）
3.  双击新任务打开属性窗口（或文件 -> 属性）
4.  在“任务”选项卡下，输入您用于测试上述脚本的相同命令。例如，我会输入：

    > C:\PHP\php.exe "C:\Inetpub\wwwroot\blogs\cron\cron_exec.php"

5.  转到计划选项卡并输入任务应该运行的时间和频率。该计划默认为每天运行一次，对于基本使用应该没问题，但可以根据需要随意调整。
6.  其余字段可以保持原样，除非您是高手并且知道自己在做什么。
7.  单击确定，我们就完成了！

有关更多信息，请查看[设置窗口计划任务](http://manual.b2evolution.net/Set_up_a_Windows_Scheduled_Task)。

# javascript - 关闭窗口时触发函数

> ID：12158190
> 
> 赞同：1
> 
> 时间：2012-08-28T11:21:52.700
> 
> 标签：javascript

> **可能重复：**
> [javascript检测浏览器关闭选项卡/关闭浏览器](https://stackoverflow.com/questions/3888902/javascript-detect-browser-close-tab-close-browser)

我的页面上有一个 java 脚本倒数计时器，如果用户尝试关闭窗口或选项卡，我想触发警报消息。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-28T11:26:28.357

[https://developer.mozilla.org/en-US/docs/DOM/window.onbeforeunload](https://developer.mozilla.org/en-US/docs/DOM/window.onbeforeunload)

更新：这个答案是阿德南在我之前几分钟的评论中提供的:)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-28T11:27:40.237

使用此活动

```
window.onbeforeunload = function() {
   //your message goes here
} 
```

通过使用 jQuery

```
$(window).unbind("beforeunload");
$(window).bind("beforeunload", function (e) {
   //do your work here
}); 
```

# solaris - Solaris 终端中的管道不起作用？

> ID：12158192
> 
> 赞同：0
> 
> 时间：2012-08-28T11:21:54.470
> 
> 标签：solaris, pipe

对于任何 Solaris 管理员来说，这应该是一个非常简单的问题

似乎我无法将结果从一个命令传递到另一个命令，例如，

ipadm | 更多的

不起作用，它仍然显示整个结果而没有很好地分页我确定我忘记了一些东西，但是什么？

我在 VMWARE 中使用 Solaris 11

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-28T11:30:45.330

ipadm 将其输出打印到标准错误，而不是标准输出。

使用`ipadm 2>&1 | more`或类似的构造。

# c# - 谷歌分析核心报告 v 3 - 如何获取基本 url

> ID：12158196
> 
> 赞同：2
> 
> 时间：2012-08-28T11:22:05.840
> 
> 标签：c#, google-analytics, reporting, google-analytics-api

我正在尝试获取 Google 分析的基本网址，但由于某种原因我无法让它工作 - 我尝试了以下方法：

```
 //this is the old url and did use to work ( see   `//https://developers.google.com/analytics/devguides/reporting/core/v2/ )`
    //const string baseUrl = "https://www.google.com/analytics/feeds/data";

                // this is also outdated 
//const string baseUrl = "https://www.googleapis.com/analytics/v2.4/data";

               // this doesnt  seem to work!!! 
const string baseUrl = "https://www.googleapis.com/analytics/v3/data"; 
```

这是我编写的一些代码，应该构建 url

```
 const string baseUrl = "https://www.googleapis.com/analytics/v3/data/";

                var retailers = affiliateRetailerRepository.GetAffiliateRetailerByScheme(affiliateScheme.Id);
                foreach (var affiliateRetailer in retailers)
                {
                    var query = new DataQuery(baseUrl)
                                    {
                                        Ids = affiliateRetailer.Code,
                                        //todo - custom var may neeed to be put back Dimensions = "ga:customVarName(n),transactionId,ga:productName,ga:productSku,ga:date,ga:hour",
                                        Dimensions = "transactionId,ga:productName,ga:productSku,ga:date,ga:hour",
                                        //Metrics = "ga:itemRevenue,ga:revenuePerItem,ga:itemQuantity",
                                        Metrics = "ga:itemRevenue,ga:itemQuantity",
                                        Segment = "gaid::-8",
                                        Filters = filters,
                                        GAStartDate = startDate.ToString("yyyy-MM-dd"),
                                        GAEndDate = endDate.ToString("yyyy-MM-dd"),
                                        NumberToRetrieve = 10000
                                    };
                    Uri url = query.Uri; 
```

使用上面我得到以下http：

{https://www.googleapis.com/analytics/v3/data/?max-results=10000&dimensions=transactionId,ga:productName,ga:productSku,ga:date,ga:hour&end-date=2012-08-28&filters= ga:source=@where-to-buy.co,ga:source=@where-to-purchase.us,ga:source=@where-to-buy.fr,ga:source=@wheretopurchase.de,ga: source=@where-to-buy.es,ga:source=@wheretopurchase.it,ga:source=@where-to-purchase.ru,ga:source=@where-to-buy.pl,ga:source= @where-to-buy.se,ga:source=@where-to-buy.nl,ga:source=@where-to-purchase.us,ga:source=@wheretopurchase.ca&ids=ga:57437629&metrics=ga: itemRevenue,ga:itemQuantity&start-date=2012-03-13&segment=gaid::-8}

我知道我的代码腐烂了，因为我已经有一段时间没有看过这段代码了，但是如果有人有任何建议 - 我认为这只是将基本 url 更改为最新的，但事实并非如此似乎工作。

任何帮助表示赞赏。

编辑：或者只是如果有人有一个工作 url，我可以用它来构建我的，这也很有用，因为我提到这是不久前放在一起的，所以这可能意味着我需要根据新的 API 格式重新格式化整个代码所以看到一个有用的，然后我可以根据我的需要定制它。谢谢

# extjs - 店铺装货顺序

> ID：12158199
> 
> 赞同：0
> 
> 时间：2012-08-28T11:22:16.713
> 
> 标签：extjs, extjs4, extjs-mvc

我的 App.js 代码在这里：

```
Ext.Loader.setConfig({
    enabled: true
});

Ext.application({
    name: 'KP',
    appFolder: 'scripts/app',

    controllers: [
        'MainSearch', 'List'
    ],

    launch: function () {
        Ext.create('Ext.container.Viewport', {
            items: {
                xtype: 'searchdata'
            }
        });
    }
}); 
```

问题是：我有 model('List')、store('List')、view('List') 和 controller('List') - 所有这些都适用于我的网格。在 store('List') 中，我调用了该服务，它给了我一些数据。

我想在“MainSearch”表单之后查看我的网格。所以，我首先调用了“MainSearch”。（在 App.js 中）。但是，在我的浏览器中显示“MainSearch”表单之前，调用了“List”中的服务。我不明白为什么会这样。（当 App.js 中不包含“列表”控制器时 - 一切正常）

“列表”的“商店”代码：

```
Ext.define('KP.store.List', {

    extend: 'Ext.data.Store',
    model: 'KP.model.List',          

    autoLoad: true,

    pageSize: 20,
    autoLoad: { start: 0, limit: 20 },

    autoSync: true,
    proxy: {
        type: 'ajax',
        limitParam: 'size',
        startParam: undefined,
        api: {

        read: '/adres/listls'
        },
        reader: {
            type: 'json',
            root: 'data',
            successProperty: 'success',
            totalProperty: 'total'
        }     
    }

}); 
```

“列表”控制器代码：

```
Ext.define('KP.controller.List', {

    extend: 'Ext.app.Controller',

    views: ['personAccount.List'],
    models: ['List'],
    stores: ['List'],

    init: function () {
        this.control({
            'list button[action=close]': {
                click: this.closeClick
            }
        });
    },

    //закрытие формы
    closeClick: function (button) {
        var win = button.up('window');
        win.close();
    }

}); 
```

我的列表视图代码：

```
Ext.define('KP.view.personAccount.List', {
    extend: 'Ext.window.Window',
    alias: 'widget.list',

    autoScroll: true,
    modal: false,
    plain: false,
    autoShow: true,
    layout: {
        type: 'fit'
    },

    initComponent: function () {
        var me = this;
        Ext.applyIf(me, {

            items: [
                            {
                                xtype: 'gridpanel',
                                store: 'List',

                                forceFit: true,
                                columns: [
                                            ....
                                       ],

                                dockedItems: [
                                              {
                                                  xtype: 'pagingtoolbar',
                                                  store: 'List',
                                                  dock: 'bottom',                                                     
                                                  displayInfo: true
                                              }

                                            ]
                            }

                    ]
        });

        me.callParent(arguments);
    }

}); 
```

非常感谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-28T12:49:46.573

您需要做的是`autoLoad`在您的商店中禁用。这种方式存储将被初始化，但它不会调用您的服务来获取数据。稍后您将调用网格`store.load()`的处理程序。`afterrender`

# ios5 - 无法在 iOS 5 中输入 UITextfield？

> ID：12158200
> 
> 赞同：1
> 
> 时间：2012-08-28T11:22:17.043
> 
> 标签：ios5

我正在使用成为文本字段的第一响应者。如果我尝试点击 becomeFirst responder 文本字段。光标移动到该文本字段，但我无法输入该文本字段。此问题仅在 iOS 5 中出现，但在 iOS 4 中可以正常工作。请解释我来解决这个问题。

```
 if (textField == fnameTxtFld){

        if([fnameTxtFld.text length]>0)
        {
            if ([fnameTxtFld.text length]<= 100) {

                if (![self checkForSpecialChar:fnameTxtFld.text]) {

                    Custom_Alert *alert=[[Custom_Alert alloc]initWithTitle:@"Alert" message:@"Please check the details entered in First Name" delegate:self cancelButtonTitle:@"Ok" otherButtonTitles:nil, nil];

                    [alert show];
                    [alert release];

                    [fnameTxtFld becomeFirstResponder];

                    return NO;

                }
                else
                {
                    [textField resignFirstResponder];
                    fnameTxtImg.image=[UIImage imageNamed:@"birth_date.png"];
                    //    [lnameTxtFld performSelector:@selector(becomeFirstResponder) withObject:nil afterDelay:0.0];
                    [lnameTxtFld becomeFirstResponder];

                    return YES;
                }
            }        
            else {
                Custom_Alert *alert=[[Custom_Alert alloc]initWithTitle:@"Alert" message:@"Please check the details entered in First Name" delegate:self cancelButtonTitle:@"Ok" otherButtonTitles:nil, nil];
                [alert show];
                [alert release];

                [fnameTxtFld becomeFirstResponder];

                return NO;

            }

        }
        else {
            [lnameTxtFld becomeFirstResponder];

            return YES;
            // [fnameTxtFld resignFirstResponder];
        }
    } 
```

如果我在 fnameTxtFld 中，并且我尝试点击 lnaneTxtFld 光标从 fnameTxtFld 移动到 lnameTxtFld 但我无法输入该文本字段。文本不会出现在该文本字段中。请帮助我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-30T07:39:04.083

我认为这个问题出现在 xcode 4.2 中，如果我们在同一个循环中使用**resignFirstResponder 和 becomeFirstResponder**有时我们会遇到这种问题，要解决这个问题，您可以按照下面的代码进行操作。这可能会帮助你

**辞职第一响应者**

```
[[UIApplication sharedApplication] sendAction:@selector(resignFirstResponder) to:nil from:nil forEvent:nil]; 
```

**成为第一响应者**

```
[textfield performSelector:@selector(becomeFirstResponder) withObject:nil afterDelay:0.0]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-30T09:07:24.000

我认为这只会部分起作用。我通过在应该开始编辑中设置布尔变量解决了这个问题。我将在 didend 编辑中访问这个变量。当 didendEditing 被调用时，应该开始不应该被调用。谢谢你的回复。。

# unix - 如何在mutt中更改发件人的姓名或电子邮件地址？

> ID：12158201
> 
> 赞同：76
> 
> 时间：2012-08-28T11:22:20.467
> 
> 标签：unix, mutt

如何更改发件人的姓名或电子邮件地址（`From:`标题）使用的`mutt`？

* * *

## 回答 #1

> 赞同：75
> 
> 时间：2012-08-28T11:42:52.323

通常，mutt根据您在以下设置[的](http://www.mutt.org/doc/manual/#from)[配置变量](http://www.mutt.org/doc/manual/#from)`From:`设置标头：[`from`](http://www.mutt.org/doc/manual/#from)`~/.muttrc`

```
set from="Fubar <foo@bar>" 
```

如果未设置，则默认`mutt`使用`EMAIL`环境变量。在这种情况下，您可以在命令行上像这样调用 mutt （与您在评论中显示的方式相反）：

```
EMAIL="foo@bar" mutt -s '$MailSubject' -c "abc@def" 
```

但是，如果您希望能够*在撰写*`From:`时编辑标题，则需要[配置](http://www.mutt.org/doc/manual/#edit-headers)[为允许您先编辑标题](http://www.mutt.org/doc/manual/#edit-headers)。这涉及在您的 中添加以下行：*[`mutt`](http://www.mutt.org/doc/manual/#edit-headers)`~/.muttrc`*

 *```
set edit_headers=yes 
```

之后，下次打开 mutt 并撰写电子邮件时，您选择的文本编辑器也会弹出，其中包含标题，因此您可以编辑它们。这包括`From:`标题。

* * *

## 回答 #2

> 赞同：31
> 
> 时间：2013-01-21T04:21:55.700

如果您只想更改一次，可以在命令行中指定 'from' 标头，例如：

```
mutt -e 'my_hdr From:obama@whitehouse.org' 
```

`my_hdr`是 mutt 提供自定义标头值的命令。

最后一句话，不要作恶！

* * *

## 回答 #3

> 赞同：27
> 
> 时间：2014-03-14T19:43:15.310

在发送电子邮件之前，您可以按`<ESC> f`（Escape 后跟 f）更改`From:`地址。

约束：这仅在您在诅咒模式下使用 mutt 并且不想编写脚本或者您想永久更改地址时才有效。然后其他解决方案更好！

* * *

## 回答 #4

> 赞同：12
> 
> 时间：2013-08-03T01:51:56.427

一种特殊情况是，如果您在 ~/.muttrc 中使用了如下结构：

```
# Reset From email to default
send-hook . "my_hdr From: Real Name <email@example.com>" 
```

这个 send-hook 将覆盖以下任何一个：

```
mutt -e "set from=email@example.com"
mutt -e "my_hdr From: Other Name <otheremail@example.com>" 
```

您的电子邮件仍会带有标题：

```
From: Real Name <email@example.com> 
```

在这种情况下，我发现的唯一命令行解决方案实际上是覆盖发送挂钩本身：

```
mutt -e "send-hook . \"my_hdr From: Other Name <otheremail@example.com>\"" 
```

* * *

## 回答 #5

> 赞同：6
> 
> 时间：2013-07-03T12:28:16.180

对于一次性更改，您可以执行以下操作：

```
export EMAIL='sender@example.com'; mutt -s "Elvis is dead" receiver@bar.com 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2017-12-16T04:33:28.803

**100% 工作！**

要在旅途中使用单行的发件人和收件人邮件地址发送邮件正文中的 HTML 内容，您可以尝试以下操作，

```
export EMAIL="sender@example.com" && mutt -e "my_hdr Content-Type: text/html" -s "Test Mail" "recipient@example.com" < body_html.html 
```

文件：body_html.html

```
<HTML>
<HEAD> Test Mail </HEAD>
<BODY>
<p>This is a <strong><span style="color: #ff0000;">test mail!</span></strong></p>
</BODY>
</HTML> 
```

**注意：在 RHEL、CentOS、Ubuntu 中测试。**

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2021-07-05T09:39:48.280

第 1 步：找到 Muttrc，如果是 Oracle Linux 7.6，可以在 /etc 中找到第 2 步：在 vi 编辑器中打开文件以添加以下条目，即。vi /etc/Muttrc 步骤 3：要添加或/和取消注释的内容

set from = "user@domain.com" set realname = "用户的真实姓名"

Step4：保存文件并退出。还尝试使用以下语法发送电子邮件，

echo "$Body of the email" | mutt -a "$name_of_the_attachment" -s $subject_line_of_the_email" -- $USER@DOMAIN.com*

# .net - 查询执行为 1 等于 1 而不是空检查

> ID：12158211
> 
> 赞同：0
> 
> 时间：2012-08-28T11:22:55.967
> 
> 标签：.net, nhibernate, linq-to-sql, linq-to-nhibernate

我正在尝试选择“值”列为空或空格的所有行。它是 nvarchar 类型，允许为空值。

执行以下查询时，不会产生正确的 sql。

```
current.Where(
            a =>
            a.Data.All(ad => ad.AccountTag.Id != currentTag.Item1)
            || a.Data.Any(ad => ad.AccountTag.Id == currentTag.Item1 && string.IsNullOrWhiteSpace(currentTag.Item2))) 
```

string.IsNullOrWhiteSpace 函数转换为`1 /* @p3 */ = 1`

我已经尝试使用上述功能，也尝试使用`currentTag.Item2 == null || currentTag.Item2.Equals(string.Empty)`两者并获得相同的结果。

下面是完整的 SQL

```
select data2_.Id from   [isnapshot.Client].[dbo].AccountData data2_
    where  account0_.Id = data2_.ClientAccountId
    and data2_.AccountTagId = 1 /* @p2 */
    and 1 /* @p3 */ = 1) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-28T11:27:16.627

查询是正确的。`currentTag`是一个与查询无关的局部变量。因此，表达式`string.IsNullOrWhiteSpace(currentTag.Item2)`将在转换为 SQL*之前*进行评估，结果为`true`(1) 或`false`(0)，这将是 的值`p3`。

# android - 仅在没有 Jelly Bean 的小部件中崩溃 setTextViewTextSize

> ID：12158212
> 
> 赞同：8
> 
> 时间：2012-08-28T11:22:58.017
> 
> 标签：android, widget, remoteview

我正在制作一个小部件，您可以在其中指定文本大小

> controles.setTextViewTextSize(R.id.LblMsg, TypedValue.COMPLEX_UNIT_SP, textSize);

我正在使用 android 4.1

> android:minSdkVersion="8" android:targetSdkVersion="16"

问题是它在 android 4.1 中可以正常工作，但在任何其他版本（ICS、姜饼等）中都显示强制关闭。

> java.lang.NoSuchMethodError: android.widget.RemoteViews.setTextViewTextSize

如果我删除使用“setTextViewTextSize”的代码行，则应用程序可以完美运行。

我没有找到有关此错误原因的信息。

我很感激任何帮助。

问候

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-05-18T23:14:03.807

如果您希望使用适用于所有版本的东西，请使用：

```
remoteViews.setFloat(R.id.textView,"setTextSize",fontSize); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-28T11:24:30.960

此方法仅从 API 级别 16 (android 4.1) 开始可用：http: [//developer.android.com/reference/android/widget/RemoteViews.html#setTextViewTextSize(int, int, float)](http://developer.android.com/reference/android/widget/RemoteViews.html#setTextViewTextSize%28int,%20int,%20float%29)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-29T01:11:55.403

我做了这个

```
if (Build.VERSION.SDK_INT >= Build.VERSION_CODES.JELLY_BEAN) {
   remoteViews.setTextViewTextSize(R.id.price, TypedValue.COMPLEX_UNIT_PX, 100f);
} 
```

# wix - WiX用户知道复选框是否选中

> ID：12158213
> 
> 赞同：0
> 
> 时间：2012-08-28T11:23:02.833
> 
> 标签：wix, burn

我正在使用 Burn 来安装我的组件。我正在使用 RTFTheme.xml，并在选项页面中添加了一个复选框。

如果我想知道用户是否选择了复选框，我应该怎么做。我的意思是如何访问选项页面中定义的捆绑代码中的变量。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-31T19:33:41.637

我很幸运得到了它，我在选项页面中使用我的控件创建了自己的主题文件，并且我得到了值。

谢谢拉维小号

# android - 在后台上传图像和视频，而不使用 Android 中的异步任务

> ID：12158219
> 
> 赞同：-1
> 
> 时间：2012-08-28T11:23:15.507
> 
> 标签：android

我需要使用 Xml Web 服务将图像和视频等数据上传到服务器。我可以在 Android 中使用异步任务上传，但我需要在后台将所有数据上传到服务器，这意味着不应该显示任何进度条。

所以我认为使用服务来实现同样的目标，使用服务是正确的方法吗？我如何将活动转化为服务。还有其他方法可以实现这一目标吗？

我在我的代码下面写了异步任务的按钮单击事件：

```
 UploadDataInBackground uploader = new UploadDataInBackground();
  uploader.execute(ReplyForm.this, true, replyform);    // it is asynch class 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-28T11:27:24.550

您应该在 AsyncTask 中继续执行此操作。如果您不希望显示进度对话框，请简化、删除或注释掉该部分代码。它应该在你的onPreExecute() 和onPostExecute() 中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-28T11:55:29.977

您可以使用 ResultReceiver 来完成。我制作了一个应用程序，我将大型视频上传到服务器并使用了这样的东西：

```
public class MyResultReceiver extends ResultReceiver {

    public final String TAG = getClass().getSimpleName();
    private Receiver mReceiver;

    public TmResultReceiver(Handler handler) {
        super(handler);
        // TODO Auto-generated constructor stub
    }

    @Override
    protected void onReceiveResult(int resultCode, Bundle resultData) {
        // TODO Auto-generated method stub
        Log.d("MyResultReceiver", "onReceiveResult");
        if( mReceiver != null ){
            mReceiver.onReceiveResult(resultCode, resultData);
        }
    }

    public void setReceiver(Receiver receiver) {
        //Log.d("MyResultReceiver", "setReceiver");
        mReceiver = receiver;
    }

    public interface Receiver {
        public void onReceiveResult(int resultCode, Bundle resultData);
    }   

} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-28T11:57:50.600

只需实现您自己的`Service`，请参阅此帖子以使用`Services, but you must implement your own upload`Service`[下载文件，使用 Android 下载文件，并在 ProgressDialog 中显示进度](https://stackoverflow.com/questions/3028306/download-a-file-with-android-and-showing-the-progress-in-a-progressdialog)

# mysql - 使用 SQL 从字段中删除尾随数字

> ID：12158220
> 
> 赞同：2
> 
> 时间：2012-08-28T11:23:22.887
> 
> 标签：mysql, sql

我有一个标签表。由于一些用户已经从我们的网站进行了复制粘贴，所以一些标签的末尾带有计数，如下所示：

```
Tag1
Tag1 (5)
Tag2
Tag1 (7) 
```

据我所知，mysql不支持正则表达式替换，那么我该如何删除这些呢？

我不想用 php 来做，因为表很大，我想定期运行它。

预期的最终结果：

```
Tag1
Tag1
Tag2
Tag1 
```

干杯!

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-28T11:28:54.603

您可以通过使用[字符串函数](http://dev.mysql.com/doc/refman/5.5/en/string-functions.html)来实现这一点：

```
SELECT TRIM(SUBSTRING(tag, 1, (CHAR_LENGTH(tag) - LOCATE('(', REVERSE(tag))))) AS new_tag
FROM table_name; 
```

**[SQLFIDDLE 演示在这里](http://sqlfiddle.com/#!2/76000/2)**

# iphone - 如何检查是否有任何要添加到数组中的项目为空

> ID：12158221
> 
> 赞同：1
> 
> 时间：2012-08-28T11:23:28.603
> 
> 标签：iphone, xcode, nsarray

如何检查是否在数组中添加了任何项字符串并且为空，那么如何在运行时从数组中删除它我有数组

```
 NSArray *myArray = [[NSArray alloc] initWithObjects:iphone,droid,blackberry,donotUse,window,other,nil]; 
```

我希望如果 iphone 在运行时为空，它不应该在数组中。

因为如果它是空的，那么它不会显示其余的值，所以如何解决这个问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-28T11:26:41.487

改为使用`NSMutableArray`，并且仅在它不同于 时才添加`nil`：

```
NSMutableArray *arr = [[NSMutableArray alloc] init];
if([iphone length] > 0)
  [arr addObject:iphone];
... 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-28T11:35:41.300

```
NSArray *myArray = [[NSArray alloc] initWithObjects:iphone,droid,blackberry,donotUse,window,other,nil];
NSMutableArray *cleanArray = [[NSMutableArray alloc] init];

for(int i = 0 ; i < [myArray count]; i++)
{
   if([[myArray objectAtIndex:i] length])
       [cleanArray addObject:[myArray objectAtIndex:i]];   
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-28T11:42:06.167

做这个：

```
NSMutableArray *arrValues = [[NSMutableArray alloc]init];

for(NSString *str in myArray)
{
 if (str != (id)[NSNull null] || str.length != 0 )
 {
    [arrValues addObject:str]; 
 }
} 
```

# sql-server-2005 - 如何查找日期格式 dd/mm/yyyy 的整月数据？

> ID：12158222
> 
> 赞同：0
> 
> 时间：2012-08-28T11:23:38.063
> 
> 标签：sql-server-2005

我有一个日期格式为“yyyyymmdd”且数据类型为 varchar(8) 的数据库。在这种情况下，当我需要查找整个月的数据时，我曾经编写如下代码：

```
 select * from table1
  where Date Between (convert(varchar(6),getdate(),112)+'01')
  AND (convert(varchar(6),getdate(),112)+'31')) 
```

现在我只有一个日期格式为“dd/mm/yyyy”和日期类型为 varchar(10) 的新表，我想从表中提取整个月的数据而不指定确切的日期。我希望开始日期为当前月份的第一天，结束日期为当前月份的最后一天。

但是我现在不知道如何做，因为日期格式现在是“dd/mm/yyyy”。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-28T11:27:01.180

首先，您应该将日期存储为数据类型`date`而不是`varchar`

您可以使用[`MONTH()`](http://msdn.microsoft.com/en-us/library/ms187813.aspx)

```
SELECT *
FROM yourTable
WHERE MONTH(convert(datetime, dt, 103)) = MONTH(getdate()) -- or month you want 
```

或者[`DATEPART()`](http://msdn.microsoft.com/en-us/library/ms174420.aspx)

```
SELECT *
FROM yourTable
WHERE DatePart(month, convert(datetime, dt, 103)) = DatePart(month, getdate()) 
```

请参阅[带有演示的 SQL Fiddle](http://sqlfiddle.com/#!3/e1e1a/2)

这两个，获取`MONTH()`- 8, 9, 10 - 的值，然后将其与您想要的月份进行比较。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-28T11:31:57.247

**[演示 2](http://sqlfiddle.com/#!3/50efd/7)**

**[演示 1](http://sqlfiddle.com/#!3/05bc3/1)**

样本
`select idcol,namecol,datecol, from table where datepart(mm,datecol)='9'`

**编辑：**

`select * from dummy where datepart(mm,dob)= datepart(mm,getdate())` [http://sqlfiddle.com/#!3/50efd/7](http://sqlfiddle.com/#!3/50efd/7)

他们是同月不同年份的可能性，因此您还需要通过添加来照顾年份`and datepart(yyyy,dob)=datepart(yyyy,getdate())`

# c++ - `不命名类型`错误与`命名空间标准;`和文件

> ID：12158223
> 
> 赞同：1
> 
> 时间：2012-08-28T11:23:42.177
> 
> 标签：c++, header, namespaces

编译下面的代码`g++ main.cpp functions.cpp -o run`给了我错误`error: ‘vector’ does not name a type`。在顶部声明命名空间`main.cpp`通常适用于我的所有`.cpp`文件。

主文件

```
using namespace std;

#include "functions.h"

main () {} 
```

函数.h

```
#include <vector> 
```

函数.cpp

```
#include "functions.h"
vector <int> x; 
```

编辑：我很欣赏所有响应者都知道他们在说什么的事实，但这通常对我有用。使用makefile会对此有任何影响吗？还有什么我可能会错过的吗？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-08-28T11:25:37.397

是的，但在这个例子`functions.cpp`中没有看到`using namespace std`，因为你只在`main.cpp`.

* * *

不要添加`using namespace std`到`functions.h`, 用于`std::`限定类型。添加 a`using..`会给标题的用户带来不必要的负担。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-08-28T11:25:47.833

您需要限定命名空间：

```
#include "functions.h"
std::vector<int> x; 
```

你有一个`using namespace std`in `main.cpp`，它不能被 看到`functions.cpp`。这就是问题的根源。

通常，您应该避免`using namespace std`使用 ，特别是在标题中。如果您真的必须将其包含在 中`main`，请将其放在所有标题之后。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-08-28T11:25:23.160

`std`您只在 中导入了命名空间`main.cpp`，而不是在`functions.cpp`.

您必须限定您的使用 -`std::vector`在第二个文件中，或使用`using`指令：

```
//functions.cpp
#include "functions.h"
std::vector <int> x;   // preferred 
```

或者

```
//functions.cpp
#include "functions.h"
using namespace std;
vector <int> x; 
```

或（奖金）

```
//functions.cpp
#include "functions.h"
using std::vector;
vector <int> x; 
```

> 在 main.cpp 顶部声明命名空间通常适用于我的所有 .cpp 文件。

那么你有一个非常有缺陷的编译器。`using`指令不应影响对指令没有直接可见性的翻译单元。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-28T11:26:35.737

您`using namespace std`仅是 main.cpp 的本地用户。你需要使用

```
 std::vector<int> x; 
```

在你的源文件functions.cpp

# ruby-on-rails - 如何从字符串末尾获取数字

> ID：12158225
> 
> 赞同：2
> 
> 时间：2012-08-28T11:23:45.090
> 
> 标签：ruby-on-rails, ruby

我对 Ruby 还是有点陌生​​，我有点卡住了。我需要从字符串的末尾获取一个数字。假设我有字符串“potato85”，我需要 85。数字中的位数可能会有所不同，就像它可能是“potato8” - “potato8585”。有什么办法可以拆分字符串并获取第一部分和数字？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-08-28T11:30:49.103

### 使用 String#scan 方法

您可以使用[String#scan](http://www.ruby-doc.org/core-1.9.3/String.html#method-i-scan)方法。例如：

```
my_string = 'potato8585'
my_string.scan( /\d+$/ ).first
# => "8585"

my_string = 'potato8'
my_string.scan( /\d+$/ ).first
# => "8" 
```

此方法会将字符串中所有可能的匹配项读入一个数组，但`$`锚点将确保只有一个元素。然后，只需从数组中弹出第一个元素即可返回一个字符串。

还有其他方法可以做到这一点，但这对我来说似乎是最简单的解决方案。YMMV。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-28T11:29:34.643

这是一种方法：

```
"potato85".reverse.to_i.to_s.reverse.to_i # => 85 
```

但是您可能想使用正则表达式。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-28T11:27:58.897

我会在这里使用带有 .match() 的正则表达式：[http ://www.ruby-doc.org/core-1.9.3/Regexp.html](http://www.ruby-doc.org/core-1.9.3/Regexp.html)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-28T11:35:37.167

使用一点正则表达式就能得到你需要的东西。看一下这个：

```
[1] pry(main)> r = /(.*?)(\d+)$/
=> /(.*?)(\d+)$/
[2] pry(main)> m = r.match "potato8"
=> #<MatchData "potato8" "potato" "8">
[3] pry(main)> m = r.match "potato85"
=> #<MatchData "potato85" "potato" "85">
[4] pry(main)> m = r.match "potato8585"
=> #<MatchData "potato8585" "potato" "8585">
[5] pry(main)> m = r.match "p0t4to8585"
=> #<MatchData "p0t4to8585" "p0t4to" "8585">
[6] pry(main)> m[1]
=> "p0t4to"
[7] pry(main)> m[2].to_i
=> 8585 
```

所以`(.*?)`非贪婪地匹配任意数量的任意字符，`(\d+)$`然后匹配字符串末尾的 1 个或多个数字。

# ruby-on-rails - 运行 rake 任务时如何跳过 Rails 初始化程序的加载？

> ID：12158226
> 
> 赞同：20
> 
> 时间：2012-08-28T11:23:50.253
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3

我的 rails 应用程序有一个网站爬虫，它加载爬虫在`config/initializers`. 初始化程序通过调用 SiteLogin 模型中的模型方法来加载身份验证。

当我运行`rake db:migrate`创建`SiteLogin`模型表时，它失败了，因为初始化程序期望数据库表已经存在。我可以简单地注释掉初始化器中的代码，运行迁移以创建表，然后取消注释初始化器代码，而不必担心问题。

问题是，我正在使用 Capistrano 进行部署，这意味着我必须先在没有初始化代码的情况下进行部署才能运行迁移，然后再使用初始化代码再次部署。有没有更好的方法可以做到这一点，或者在这种情况下我的方法完全错误。

这是一些代码示例，可以更好地解释我的情况：

```
# config/initializers/site_crawler_init.rb
SiteCrawler.setup do |config|
  config.hostname = "www.example.com"
end

# model/site_crawler.rb
class SiteCrawler
  ...
  class << self
    attr_accessor :configuration

    def setup
      self.configuration ||= Configuration.new
      yield(configuration)
    end
  end

  class Configuration

    attr_accessor :hostname, :login_credentials

    def initialize
      @login_credentials = SiteLogin.admin_user
      ...
    end
  end
end 
```

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-08-28T11:32:37.617

它可能不是更好的解决方案，但您可以检查表是否存在：

```
if ActiveRecord::Base.connection.tables.include?('your_table_name')
  # your code goes here
end 
```

但它通常还不够，因为可能会有待处理的迁移。

现在，您还可以检查您是否处于 rake 任务中：

```
if ActiveRecord::Base.connection.tables.include?('your_table_name') and !defined?(::Rake)
  # your code goes here
end 
```

而且在启动测试时可能还不够，因为在rake任务中执行，因此您还可以检查Rails环境是否为test（`Rails.env.test?`）。

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2015-05-11T15:51:09.773

我有一个类似的问题，我需要在运行特定的 rake 任务时跳过特定的初始化程序（对于延迟的作业，这需要存在延迟的作业表） - 在本例中为 db:migrate。

我在我的 Rakefile 中添加了以下内容：

```
def running_tasks
  @running_tasks ||= Rake.application.top_level_tasks
end

def is_running_migration?
  running_tasks.include?("db:migrate")
end 
```

然后是我有问题的初始化程序中的以下内容：

```
unless defined?(is_running_migration?) && is_running_migration?
  ... do whatever
end 
```

# android - 终结器抛出未捕获的异常

> ID：12158228
> 
> 赞同：1
> 
> 时间：2012-08-28T11:24:07.917
> 
> 标签：android, android-layout, android-mapview

嗨，我收到了这个错误。我正在使用此代码[http://www.androidhive.info/2012/08/android-working-with-google-places-and-maps-tutorial/](http://www.androidhive.info/2012/08/android-working-with-google-places-and-maps-tutorial/)

当我点击地图上的显示位置时，我得到了这个错误。请告诉我解决方案

```
08-28 16:38:20.554: E/System(4978): Uncaught exception thrown by finalizer
08-28 16:38:20.554: E/System(4978): java.lang.IllegalStateException: Binder has been finalized!
08-28 16:38:20.554: E/System(4978):     at android.os.BinderProxy.transact(Native Method)
08-28 16:38:20.554: E/System(4978):     at android.database.BulkCursorProxy.close(BulkCursorNative.java:288)
08-28 16:38:20.554: E/System(4978):     at android.database.BulkCursorToCursorAdaptor.close(BulkCursorToCursorAdaptor.java:133)
08-28 16:38:20.554: E/System(4978):     at android.database.CursorWrapper.close(CursorWrapper.java:49)
08-28 16:38:20.554: E/System(4978):     at android.content.ContentResolver$CursorWrapperInner.close(ContentResolver.java:1591)
08-28 16:38:20.554: E/System(4978):     at android.content.ContentResolver$CursorWrapperInner.finalize(ContentResolver.java:1604)
08-28 16:38:20.554: E/System(4978):     at java.lang.Daemons$FinalizerDaemon.doFinalize(Daemons.java:182)
08-28 16:38:20.554: E/System(4978):     at java.lang.Daemons$FinalizerDaemon.run(Daemons.java:168)
08-28 16:38:20.554: E/System(4978):     at java.lang.Thread.run(Thread.java:856) 
```

这是我的clickevent ..我从上面的android hive示例中引用了samecode ..这是我需要的代码 [谁能指导我如何使用JSON在两个位置之间获取Google Directions](https://stackoverflow.com/questions/12067454/can-anyone-guide-me-how-to-get-google-directions-between-two-locations-using-jso)

点击事件

```
btnShowOnMap = (Button) findViewById(R.id.btn_show_map);

    // calling background Async task to load Google Places
    // After getting places from Google all the data is shown in listview
    new LoadPlaces().execute();

    /** Button click event for shown on map */
    btnShowOnMap.setOnClickListener(new View.OnClickListener() {

        @Override
        public void onClick(View arg0) {
            Intent i = new Intent(getApplicationContext(), PlacesMapActivity.class);
            // Sending user current geo location
            Log.i("getLatitude",""+ gps.getLatitude());
            i.putExtra("user_latitude", Double.toString(gps.getLatitude()));
            i.putExtra("user_longitude", Double.toString(gps.getLongitude()));

            // passing near places to map activity
            i.putExtra("near_places", nearPlaces);
            // staring activity
            startActivity(i);
        }
    }); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-28T12:34:38.563

这是获取`Google`两个位置之间的路线的代码。愿这对你有所帮助。

```
double srcLatitude = 0;
double srcLongitude = 0;
Location location = GeoLocationUtil.getGeoLocation(this);
if (GeoLocationUtil.isValidLocation(location)) {
    srcLatitude = location.getLatitude();
    srcLongitude = location.getLongitude();
}

final Intent intent = new Intent(Intent.ACTION_VIEW,
/** Using the web based turn by turn directions url. */
Uri.parse("http://maps.google.com/maps?" + "saddr=" + srcLatitude + ","
    + srcLongitude + "&daddr=" + destLat + "," + destLong));

intent.setClassName("com.google.android.apps.maps",
    "com.google.android.maps.MapsActivity");
startActivity(intent); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-18T17:04:09.333

正如我在这个答案中所写： [https ://stackoverflow.com/a/13161591/1716620](https://stackoverflow.com/a/13161591/1716620)

我认为这个问题是由于在执行绘图时不正确的缩放级别引起的，在执行绘图之前尝试检查您的缩放级别，我这样解决了

# php - PHP表单提交

> ID：12158229
> 
> 赞同：0
> 
> 时间：2012-08-28T11:24:10.077
> 
> 标签：php, forms

我尝试创建的表单有问题。基本上，它不允许我将电子邮件发送给收件人，即使 PHP 代码是正确的。可能是TRIM PHP代码的问题吗？

```
<?php
    if ($_POST['submit']) {
        if (empty($_Post['name'])  || 
            empty($_POST['email']) || 
            empty($_POST['comments'])) {

            $error = true;
        } 
        else {

            $to = "linardsberzins@gmail.com";

            $name = trim($_POST['name']);
            $email = trim($_POST['email']);
            $comments = trim($_POST['comments']);

            $subject = "Contact Form";

            $messages =  "Name: $name \r\n Email: $email \r\n Comments: $comments";
            $headers = "From:" . $name;
            $mailsent = mail($to, $subject, $message, $headers);

            if ($mailsent) {
                $sent = true;
            }
        }
    }
?> 
```

我的 HTML 是：

```
<?php if($error == true){ ?>

    <p class="error">Text</p>

<?php } if($sent == true) { ?>

    <p class="sent">Text</p>

<?php } ?>

<div id="form">
    <form name="contact" action="<?php echo $_SERVER['PHP_SELF']; ?>" method="post">
        <fieldset>
            <h4>Contact Me!</h4>
            <label for="name">Name:</label>
                <input type="text" name="name" id="name"/>
                <label for="email"/>Email:</label>
                <input type="text" name="email" id="email"/>
                <label for="comments" id="comments">Comments:</label>
                <textarea name="comments" id=""></textarea>
                <fieldset>
                    <input class="btn" type="submit" name="submit"   class="submit" value="Send email"/>
                    <input class="btn" type="reset" value="Reset"/>
                </fieldset>
        </fieldset>
    </form> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-28T11:32:33.790

试试这个（我必须解决一些问题）：

```
<?php
    $error = false;
    $sent = false;

    if(isset($_POST['submit'])) {
        if(empty($_POST['name']) || empty($_POST['email']) || empty($_POST['comments'])) {
            $error = true;
        }
        else {
            $to = "linardsberzins@gmail.com";

            $name = trim($_POST['name']);
            $email = trim($_POST['email']);
            $comments = trim($_POST['comments']);

            $subject = "Contact Form";

            $message =  "Name: $name \r\n Email: $email \r\n Comments: $comments";
            $headers = "From:" . $name;
            $mailsent = mail($to, $subject, $message, $headers);

            if($mailsent) {
                $sent = true;
            }
        }
    }
?>

<?php if($error == true){ ?>
<p class="error">Text</p>
<?php } if($sent == true) { ?>
<p class="sent">Text</p>
<?php } ?>
<div id="form">
    <form name="contact" action="<?php echo $_SERVER['PHP_SELF']; ?>" method="post">
        <fieldset>
            <h4>Contact Me!</h4>
            <label for="name">Name:</label>
                <input type="text" name="name" id="name"/>
                <label for="email"/>Email:</label>
                <input type="text" name="email" id="email"/>
                <label for="comments" id="comments">Comments:</label>
                <textarea name="comments" id=""></textarea>
                <fieldset>
                <input class="btn" type="submit" name="submit"  class="submit" value="Send email"/>
                <input class="btn" type="reset" value="Reset"/>
                </fieldset>
        </fieldset>
    </form>
</div> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-08-02T17:36:59.040

```
<script>
    window.scroll(0,0);
    $('#table_content').dataTable( {
        "bJQueryUI": true,
        "bProcessing": true,
        "sPaginationType": "full_numbers",
        "sAjaxSource": "../gym_facility_v0/load_facility.php"
    });

    $("#men a").click( function (){
        var link = $(this);

        $.ajax({ url: "../"+link.attr("href"),
            dataType: 'html',
            data: {post_loader: 1},
            success: function(data){
                $("#content").html(data);
            }});
            return false;
    });
</script>

<div class="title"><h5> Gym Facility</h5></div>

<div class="table">
    <div class="head"  id="men"><h5 class="iAdd"><a class="open-add-client-dialog" href="gym_facility_v0/form_facility.php"><i class="icon-plus"></i>Add Facility</a></h5></div>
        <div class="dataTables_wrapper" id="example_wrapper">
        <div class="">
        <div class="dataTables_filter" id="example_filter">

            <!--<label>Search: <input type="text" placeholder="type here...">
            <div class="srch">
            </div>
            </label>-->

        </div>
    </div>
    <table cellpadding="0" cellspacing="0" border="0" class="display" id="table_content">
        <thead>
            <tr>
            <th class="ui-state-default" rowspan="1" colspan="1" style="width: 2%;">
            <div class="DataTables_sort_wrapper">S.No
            </div></th>
            <th class="ui-state-default" rowspan="1" colspan="1" style="width: 227px;">
            <div class="DataTables_sort_wrapper">Gym Facility</div></th><th class="ui-state-default" rowspan="1" colspan="1" style="width: 130px;">
            <div class="DataTables_sort_wrapper"> Action</div></th></tr>
        </thead>

        <tbody><tr class="gradeA odd">
                   <td colspan="5" class="gradeA">Loading data from server</td>
               </tr>
        </tbody>
    </table>

</div><!-- End of .content --> 
```

# jsf - 无法找到与 from-view-id '/login.xhtml' 匹配的导航案例，用于操作 '#{admin.Validity}' 结果为 'failure'

> ID：12158234
> 
> 赞同：4
> 
> 时间：2012-08-28T11:24:26.690
> 
> 标签：jsf

我无法让它工作。我得到以下信息：

```
Unable to find matching navigation case with from-view-id '/login.xhtml' for action '#{admin.Validity}' with outcome 'failure' 
```

这是我正在使用的代码：

HTML：

```
<div id="main" >

        <h:form id="login_form">
            <table>
                <tr>
                    <td><h:outputText value="User: " /></td>
                    <td><h:inputText id="username"
                            value="#{admin.username}" /></td>
                </tr>
                <tr>
                    <td><h:outputText value="Password: " /></td>
                    <td><h:inputSecret id="password"
                            value="#{admin.password}" /></td>
                </tr>
                <tr>
                    <td></td>
                    <td><h:commandButton value="Login" type="submit"
                            action="#{admin.Validity}" /></td>
                </tr>
            </table>
        </h:form>

    </div> 
```

管理员.java

```
import java.io.Serializable;
import javax.faces.bean.ManagedBean;
import javax.faces.bean.SessionScoped;

@ManagedBean(name="admin")
@SessionScoped
public class Admin implements Serializable {
/**
 * 
 */
private static final long serialVersionUID = 1L;
Boolean authenticated;
String username;
String password;

public String getUsername() {
    return username;
}
public void setUsername(String username) {
    this.username = username;
}
public String getPassword() {
    return password;
}
public void setPassword(String password) {
    this.password = password;
}

public String Validity() {
    if(username.equals("admin") && password.equals("admin")) {
        authenticated=true;
        return "success";
    }   else   {
        authenticated=false;
        return "failure";
    }
}

} 
```

面孔-config.xml

```
<faces-config
    xmlns="http://java.sun.com/xml/ns/javaee"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xsi:schemaLocation="http://java.sun.com/xml/ns/javaee
    http://java.sun.com/xml/ns/javaee/web-facesconfig_2_0.xsd"
    version="2.0">

<navigation-rule>
    <from-view-id>/login.xhtml</from-view-id>

    <navigation-case>
       <from-action>#{Admin.Validity}</from-action>
       <from-outcome>success</from-outcome>
       <to-view-id>/main.xhtml</to-view-id>
       <redirect/>
    </navigation-case>

    <navigation-case>
        <from-action>#{Admin.Validity}</from-action>
        <from-outcome>failure</from-outcome>
        <to-view-id>/login.xhtml</to-view-id>
    </navigation-case>
</navigation-rule>
</faces-config> 
```

谢谢你。是

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-08-28T12:01:50.283

您的托管 bean 名为`#{admin}`,

```
@ManagedBean(name="admin") 
```

但是您尝试像`#{Admin}`在导航案例中一样访问它，

```
<from-action>#{Admin.Validity}</from-action> 
```

所以它肯定行不通。Java 区分大小写。

相应地修复导航案例中的托管 bean 名称：

```
<from-action>#{admin.Validity}</from-action> 
```

* * *

**与具体问题无关**，您有几个小的设计错误。

1.  托管 bean 名称已经默认为第一个字符小写的类名。所以你`@ManagedBean(name="admin")`可以替换为`@ManagedBean`.

    ```
    @ManagedBean
    @SessionScoped
    public class Admin implements Serializable { 
    ```

2.  [方法名称不应以大写字母开头](http://www.oracle.com/technetwork/java/codeconventions-135099.html#367)。替换`Validity()`为`validity()`。此外，方法名称中还有一个语法/语言错误，但这可能是语言障碍。您通常会为它命名，`validate()`或者在这种情况下更好地命名它`authenticate()`或其他东西。

3.  导航案例是 JSF 1.x。从 JSF 2.0 开始，您可以利用新的“隐式导航”特性。您可以将结果值用作映射/无扩展视图 ID。

    ```
    public String authenticate() {
        if (username.equals("admin") && password.equals("admin")) {
            authenticated=true;
            return "main";
        } else {
            authenticated=false;
            return "login";
        }
    } 
    ```

    这样您就可以`<navigation-rule>`完全删除整个块。

### 也可以看看：

*   [JSF 2.0 中的通信](http://balusc.blogspot.com/2011/09/communication-in-jsf-20.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-06-29T02:45:45.817

为了使导航规则正常工作，请确保您还将 .xhtml 定义为 facelet 文件的默认扩展名。我在 web.xml 中添加了以下行，它解决了导航问题。

```
<context-param>
    <param-name>javax.faces.DEFAULT_SUFFIX</param-name>
    <param-value>.xhtml</param-value>
</context-param> 
```

参考： http: [//www.coderanch.com/t/570654/JSF/java/Error-navigation](http://www.coderanch.com/t/570654/JSF/java/Error-navigation)

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2012-08-28T11:38:19.680

问题解决了！我正在使用 jsf2 顺便说一句。

我从 faces-config.xml 中删除了以下行

```
<from-action>#{Admin.Validity}</from-action> 
```

而已。希望这可以帮助某人

# ruby - Bundler 忽略“no_proxy”

> ID：12158237
> 
> 赞同：1
> 
> 时间：2012-08-28T11:24:32.447
> 
> 标签：ruby, gem, bundler

我终于有一个 gem 服务器在我们的局域网中工作，它为我们为项目创建的 gem 提供服务。但是这些 gem 彼此之间以及第 3 方 gem 之间存在一些依赖关系。

虽然我们的“私有”gem 驻留在本地 gem 服务器上，但第 3 方 gem 驻留在 ruby​​gems.org 等网站上

由于我们的局域网位于代理后面，我必须设置 $http_proxy $https_proxy 变量才能访问互联网。对于不应该通过代理解决的东西，我设置了 $no_proxy 变量。

不幸的是，bundler/ruby 似乎并不关心 $no_proxy 变量？

在我的 gemfile 中，我设置了所有需要的 URL。内部的和外部的。但是，当设置代理（包括带有本地 URL 的 $no_proxy）时，我会从本地 gem 服务器的代理获得网关超时。

有没有办法（不修补 Bundler/Ruby 源代码）告诉 Bundler/Ruby 遵守代理排除？

干杯，斯特凡

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-28T22:30:29.453

奇怪的是，我今天遇到了同样的问题。

作为一种解决方法，我最终安装了[CNTLM](http://cntlm.sourceforge.net/)。它指向我的上游代理，但配置为（通过 cntlm.conf 中的 NoProxy 选项）对某些主机忽略它。

我还必须将`$http_proxy`环境变量设置为指向 CNTLM（默认为 http://localhost:3128）而不是我的上游代理。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-30T13:18:52.657

我挖得更深一点，发现 Ruby 的`Net::HTTPSession`just plain 不包含任何用于从代理查找中排除主机的代码。由于 Bundler 使用这个类，它不可能服从这个`no_proxy`变量。

**我的解决方法：**

我最终收集了 Ruby 项目所需的所有 gem，并将它们放在本地 gem 服务器上。这绝对不理想。但至少它让我对我们项目中使用的 Gems 有了更多的控制权。

正如我在 Ruby 错误跟踪器中所读到的，`no_proxy`Ruby 2.0 中将包含一个意识。这意味着我们现在必须接受解决方法。

# facebook-graph-api - 获取托管 bean JSF Spring 中的完整 url

> ID：12158238
> 
> 赞同：0
> 
> 时间：2012-08-28T11:24:34.300
> 
> 标签：facebook-graph-api, servlets, jsf-2

嗨，我正在我的应用程序中使用 facebook 登录功能。现在的问题是，当我从 facebook 帐户登录时，我被重定向到带有访问令牌的指定重定向 url。我需要在托管 bean 中获取此访问令牌。我的重定向网址是这样的：localhost:8080/XXXXXX/myholiday.xhtml#access_token=AAAGHUgDJZCg0BAG2I8o

我试过了：

```
 HttpServletRequest request = (HttpServletRequest)FacesContext.getCurrentInstance().getExternalContext().getRequest();

    String url = request.getRequestURL().toString();

    System.out.println(url);

    System.out.println( FacesContext.getCurrentInstance().getExternalContext().getRequestParameterMap().get("access_token"));

    // Getting request information without the hostname.

    String uri = request.getRequestURI();
    System.out.println(uri); 
```

输出如下： localhost:8080/xxxxxxx/myholiday.xhtml

空值

xxxxxxx/myholiday.xhtml

谁能帮我获取访问令牌？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-28T12:20:12.733

如果在 URL 的哈希部分中传递访问令牌，则*无法获取访问令牌，因为哈希部分**不会*传输到服务器。

您还没有向我们展示您是如何调用 Auth 对话框的——但它有一个`response_type`可以设置为`code`或的参数`token`。`code`应该是默认值 - 如果您将其设置为`token`，请更改它。

（或者，如果您的登录被[Authenticated Referrals](https://developers.facebook.com/docs/opengraph/authentication/#referrals)触发，请将`Auth Token Parameter`您的应用设置中的设置设置为`Query String`。）

然后从那里遵循[服务器端身份验证流程](https://developers.facebook.com/docs/authentication/server-side/)。

# android - Android 乱舞事件

> ID：12158241
> 
> 赞同：1
> 
> 时间：2012-08-28T11:24:39.090
> 
> 标签：android, flurry

我已经完成了[教程](http://support.flurry.com/index.php?title=Analytics/GettingStarted/TechnicalQuickStart/Android)并完全按照它所说的做了。我给了**INTERNET,COARSE_LOCATION,FINE_LOCATION**权限。在库中添加了 jar 文件。它不工作。应用程序在**FlurryAgent.onStartSession()**处崩溃。这是他们给出的我正在使用的代码：

```
@Override
    protected void onStart() {
        super.onStart();
        FlurryAgent.onStartSession(MainActivity.this, MY_KEY);//MY_KEY is key given by them.
    }
    @Override
    protected void onStop() {
        super.onStop();
        FlurryAgent.onEndSession(this);
    } 
```

这是堆栈跟踪：

```
08-28 16:52:49.499: E/AndroidRuntime(18639): FATAL EXCEPTION: main
08-28 16:52:49.499: E/AndroidRuntime(18639): java.lang.NoClassDefFoundError: com.flurry.android.FlurryAgent
08-28 16:52:49.499: E/AndroidRuntime(18639):    at com.example.test.MainActivity.onStart(MainActivity.java:31)
08-28 16:52:49.499: E/AndroidRuntime(18639):    at android.app.Instrumentation.callActivityOnStart(Instrumentation.java:1166)
08-28 16:52:49.499: E/AndroidRuntime(18639):    at android.app.Activity.performStart(Activity.java:3842)
08-28 16:52:49.499: E/AndroidRuntime(18639):    at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1719)
08-28 16:52:49.499: E/AndroidRuntime(18639):    at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1765)
08-28 16:52:49.499: E/AndroidRuntime(18639):    at android.app.ActivityThread.access$1500(ActivityThread.java:158)
08-28 16:52:49.499: E/AndroidRuntime(18639):    at android.app.ActivityThread$H.handleMessage(ActivityThread.java:996)
08-28 16:52:49.499: E/AndroidRuntime(18639):    at android.os.Handler.dispatchMessage(Handler.java:130)
08-28 16:52:49.499: E/AndroidRuntime(18639):    at android.os.Looper.loop(SourceFile:351)
08-28 16:52:49.499: E/AndroidRuntime(18639):    at android.app.ActivityThread.main(ActivityThread.java:3850)
08-28 16:52:49.499: E/AndroidRuntime(18639):    at java.lang.reflect.Method.invokeNative(Native Method)
08-28 16:52:49.499: E/AndroidRuntime(18639):    at java.lang.reflect.Method.invoke(Method.java:538)
08-28 16:52:49.499: E/AndroidRuntime(18639):    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:901)
08-28 16:52:49.499: E/AndroidRuntime(18639):    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:659)
08-28 16:52:49.499: E/AndroidRuntime(18639):    at dalvik.system.NativeStart.main(Native Method) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-28T11:28:33.250

那么它显然找不到`com.flurry.android.FlurryAgent`类。检查 JAR 是否包含此类。如果不是，那就是错误的 JAR。如果是这样，则说明您没有在构建路径中正确包含 JAR。

请记住，要自动添加到构建路径，您必须将其添加到**`libs/`**目录中（而不是`lib/`）。IIRC 最近随着 Android SDK 的更新，这种情况发生了变化。无论如何，我建议您手动将其添加到构建路径以确保。

完成后不要忘记清理和重建。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-28T11:28:46.203

它显然在运行时崩溃，您可以在构建 apk 时检查您的 jar 是否已导出：在项目属性 > Java 构建路径中，转到“Order and Export”文件夹并填写与您的 jar 对应的复选框。并重建。

# image-processing - 图像的颜色直方图

> ID：12158243
> 
> 赞同：4
> 
> 时间：2012-08-28T11:24:48.063
> 
> 标签：image-processing, machine-learning, computer-vision

在颜色直方图中，我们通常在每个颜色通道中提取直方图，这不包含颜色如何共现的信息，例如有多少像素的强度为 I(100,200,50)？

有没有办法建立一个代表颜色共现的直方图？（多少像素包含强度值（200,100,50）？）

我正在寻找这种类型的直方图的一些改进版本，例如。喜欢这篇[论文](http://research.microsoft.com/pubs/68706/cvpr1.pdf)

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-28T11:29:34.687

您可以使用 256^3 个值构建一个非常大的直方图，或者您可以量化每个通道中的值（例如每个通道 10 个值），这将导致具有 1000 个条目的直方图。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-29T11:23:06.547

由于您想将其用作图像级描述符以进行进一步识别，因此简单的分箱可能不是最佳选择，因为颜色在您的样本中分布不均匀。

典型的做法是[词袋](http://en.wikipedia.org/wiki/Bag-of-words_model_in_computer_vision)。您从整组图像（3D 空间中的点）中获取所有像素值，并使用一些聚类算法（如[k-means](http://en.wikipedia.org/wiki/K-means_clustering)或[EM 算法](http://en.wikipedia.org/wiki/EM_algorithm)）对它们进行量化。假设您使用了*K*个集群（可能取决于您的目的和样本量，您可以从*K* = 100 开始）。为了描述一个单独的图像，你为每个像素找到最近的聚类（所谓的*视觉词），并用**K*个 bin构建直方图，这样每个 bin 的值就是对应于视觉词的像素数。这是您的描述符，您可以使用欧几里得距离或 χ² 距离在描述符上比较图像。

请注意，根据您的平台，有很多可用的聚类算法（甚至是词袋框架）的实现。[OpenCV](http://en.wikipedia.org/wiki/OpenCV)是最受欢迎的之一。请注意，您还可以使用基于梯度的描述符，例如[HOG](http://en.wikipedia.org/wiki/Histogram_of_oriented_gradients)，具体取决于您的问题。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-28T11:29:25.703

我认为你只是回答了你自己的问题。

是的，可以建立这样的直方图。就实现而言，它应该相当简单，因为通常`(r,g,b)`由 32 位表示，其中前三位是`r`，`g`并且`b`

# linq - 我无法获得列表的最高记录

> ID：12158244
> 
> 赞同：0
> 
> 时间：2012-08-28T11:24:53.390
> 
> 标签：linq, list, group-by, sql-order-by, record

我有两个列表，ddr.Out 和 ddr.Dil。第一个列表我必须按合同分组，然后按合同降序排列，然后按金额排序，因为同一合同可能有多个记录，我只想要金额最高的记录。

然后我必须使用 ddr.dil 中存在的合同金额更新 ddr.out 中的每个金额。

我的问题是，我无法在此声明中找到从 ddr.out 获得最高金额的方法。

有任何想法吗？瑞马丁斯

```
ddr.Out.GroupBy(ou => ou.Contract);
ddr.Out.OrderByDescending(ou => ou.Contract).ThenByDescending(ou=> ou.Amount);
ddr.Out.ForEach(ou => ou.Amount += ddr.Dil
    .Where(dil => dil.Referred && 
                  dil.Wad == wad &&
                  dil.Cycle == cal.ID && 
                  dil.Contract == ou.Contract)
    .Select(dil => dil.Amount)
    .FirstOrDefault()); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-28T11:31:49.910

`ddr.Dil`使用`IEnumerable`'s [Max 功能](http://msdn.microsoft.com/en-us/library/bb548659.aspx)可以得到最大的量。

另请注意，[ForEach](http://msdn.microsoft.com/en-us/library/bwabdf9z.aspx)上的文档说：

```
Modifying the underlying collection in the body of the Action<T> delegate 
is not supported and causes undefined behavior. 
```

而是使用`Select`并替换`ddr.Out`：

```
newOut = 
    ddr.Out.GroupBy(ou => ou.Contract)
       .OrderByDescending(ou => ou.Contract)
       .ThenByDescending(ou=> ou.Amount)
       .Select(ou => ou.Amount += ddr.Dil
           .Where(dil => dil.Referred && 
                  dil.Wad == wad &&
                  dil.Cycle == cal.ID && 
                  dil.Contract == ou.Contract)
           .Max(dil => dil.Amount)); 
```

# heap-memory - 对非常大的 db4o 数据库文件进行碎片整理

> ID：12158246
> 
> 赞同：1
> 
> 时间：2012-08-28T11:25:01.770
> 
> 标签：heap-memory, db4o, defragmentation

我有一个非常大 (102gb) 的 db4o .yap 文件，我正在尝试对其进行碎片整理。我不断收到 java 堆空间错误。我可以做些什么来调整设置以防止这种情况发生吗？我已经将 objectCommitFrequency 设置为 10000。我给 java 进程 3 gigs 的内存来运行它，但它仍然崩溃。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-04T11:07:24.063

唯一可能有帮助的是使用[DatabaseIdMapping](http://community.versant.com/documentation/reference/db4o-8.1/java/reference/Content/advanced_topics/defragment/configuration/id_mapping.htm)。但我猜你已经试过了，不是吗？

```
IdMapping mapping = new DatabaseIdMapping("temporary-mapping.tmp");
DefragmentConfig config = new DefragmentConfig("database.db4o", "database.db4o.back", mapping);

Defragment.defrag(config); 
```

# javascript - Javascript 条件语法

> ID：12158247
> 
> 赞同：-3
> 
> 时间：2012-08-28T11:25:02.673
> 
> 标签：javascript, conditional-statements

我正在尝试使条件正常工作，但不确定语法...

我将如何在 jquery/javascript 中编写这个？

```
if (value.type) == 'football' then {
 //do something
} else {
  //do something else
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-28T11:25:49.353

```
if (value.type == 'football') {
    //do something
} else {
    //do something else
} 
```

参考：[`if...else`](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Statements/if...else), [== 与 ===](https://stackoverflow.com/questions/359494/javascript-vs-does-it-matter-which-equal-operator-i-use)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-28T11:32:22.613

```
if ((value.type) == 'football') {
 //do something
} 
else {
  //do something else
}

or

if (condition) {
 //do something
} 
else if(condition) {
  //do something else
}
else {
  //do something else
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-28T11:37:00.457

JS

```
if (value.type === 'football')
{
    //Do something
}
else
{
    //Do something else
} 
```

或者你可以使用short if

```
message = ('value.type' === 'football') ? "type is equal to football" : "type is not equal to football"; 
```

jQuery 只是一个 js 库，它没有 if else 实现，因为它真的不需要。

希望能帮助到你

# javascript - jQuery Cycle - 如何根据活动幻灯片更改元素的类别

> ID：12158248
> 
> 赞同：0
> 
> 时间：2012-08-28T11:25:08.220
> 
> 标签：javascript, jquery, jquery-cycle

我有一个使用[jQuery Cycle](http://jquery.malsup.com/cycle/)的杂耍。它的工作方式是单击 .next 或 .prev div 按预期循环播放幻灯片。我需要它做的是让它更新 .timeline_pagination 中的 UL，并将“活动”类添加/删除到相应的幻灯片。例如。如果 #tl_2004 幻灯片处于活动状态，则 #goto2004 li 需要活动类。我不希望或不需要#goto*** 起作用，它们纯粹是作为显示参考。

提前感谢您的帮助。

这是标记：

```
<!-- FAKE PAGINATION -->    
<div class="timeline_pagination">
        <ul>
            <li class="active" id="goto1994">1994</li>
            <li id="goto2000">2000</li>
            <li id="goto2004">2004</li>
            <li id="goto2007">2007</li>
        </ul>
</div>
<!-- END FAKE PAGINATION --> 

<div class="timeline_slideshow">
    <div class="prev"></div>
    <div class="next"></div>
    <div class="tl_slideshow">

        <div id="tl_1994">
            <div class="caption">
                <h4>title</h4>
                <p>my text</p>
            </div>
        </div>

        <div id="tl_2000">
            <div class="caption">
                <h4>title</h4>
                <p>my text</p>
            </div>
        </div>

        <div id="tl_2004">
            <div class="caption">   
                <h4>title</h4>
                <p>my text</p>
            </div>
        </div>

        <div id="tl_2007">
            <div class="caption">
                <h4>title</h4>
                <p>my text</p>
            </div>
        </div>

    </div>
</div> 
```

这是javascript：

```
$('.tl_slideshow').cycle({
        fx:         'scrollHorz',
        next:       '.next', 
        prev:       '.prev',
        timeout:    0,
        speed:      750,
        nowrap:     1,
        after:      onAfter
});

function onAfter(curr, next, opts) {
    var index = opts.currSlide;
    $('.prev')[index == 0 ? 'fadeOut' : 'fadeIn']();
    $('.next')[index == opts.slideCount - 1 ? 'fadeOut' : 'fadeIn']();
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-28T13:20:03.007

试试这个 jquery 代码

```
var PREFIX_ID_PAGINATION = "goto";
var PREFIX_ID_SLIDESHOW = "tl_";

$('.tl_slideshow').cycle({
        fx:         'scrollHorz',
        next:       '.next',
        prev:       '.prev',
        timeout:    0,
        speed:      750,
        nowrap:     1,
        after:      onAfter
});

function onAfter(prev, current, opts) {
    var index = opts.currSlide;
    $('.prev')[index == 0 ? 'fadeOut' : 'fadeIn']();
    $('.next')[index == opts.slideCount - 1 ? 'fadeOut' : 'fadeIn']();

    var current_id = $(current).attr('id');
    if( current_id.match("^" + PREFIX_ID_SLIDESHOW + "[0-9]+$")){
        $('li.active').removeClass('active');
        $('#' + PREFIX_ID_PAGINATION + current_id.replace(PREFIX_ID_SLIDESHOW,"")).addClass('active');
    }
} 
```

[这里](http://jsfiddle.net/dJaXU/)有一个 jsfiddle 示例

# http - 请求 Content-Type 标头是可选的吗？

> ID：12158250
> 
> 赞同：0
> 
> 时间：2012-08-28T11:25:14.583
> 
> 标签：http

多部分/表单数据请求的 Content-Type 标头是可选的吗？我的意思是每个内容处置部分。请在您的回答中参考 RFC。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-28T11:34:06.173

[RFC 2388](http://www.ietf.org/rfc/rfc2388.txt)，来自*3\. multipart/form-data 的定义*：

> 与所有多部分 MIME 类型一样，每个部分都有一个**可选**的 “Content-Type”，默认为 text/plain。如果通过填写表格返回文件的内容，则文件输入被标识为适当的媒体类型（如果已知）或“应用程序/八位字节流”。如果要返回多个文件作为单个表单条目的结果，它们应该表示为嵌入在“multipart/form-data”中的“multipart/mixed”部分。

# javascript - 如何使用 JavaScript 或 jQuery 将 null 值设置为变量？

> ID：12158254
> 
> 赞同：0
> 
> 时间：2012-08-28T11:25:20.443
> 
> 标签：javascript, jquery, null, jquery-events

我将图像值存储在变量中`first_img`：

```
var first_img = $('img[alt="example"]').attr('src'); 
```

我想在`null`单击按钮后设置值 JavaScript 或 jQuery。

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-28T11:27:38.607

`src`单击图像时，您可以删除该属性：

```
$('img[alt="example"]').click(function() {
    $(this).removeAttr('src');
}); 
```

`<img>`或者从 DOM中完全删除标签：

```
$('img[alt="example"]').click(function() {
    $(this).remove();
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-28T11:27:54.363

不确定我是否明白这一点，因为这听起来很明显？

```
var first_img = $('img[alt="example"]').attr('src');

$('button').on('click', function() {
    first_img = null;
}); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-28T11:33:05.230

```
var first_img = $('<img alt="example"/>').attr('src',[...] )
 .on('click',
      function(){$(this).remove()}
  );​ 
```

见[jsfiddle](http://jsfiddle.net/KooiInc/duDxb/)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-28T12:07:48.790

```
Try this:-`enter code here`
***$('img[alt="example"]').click(function() {
    $(this).removeAttr('src');
});*** 
```

# javascript - 在画布上绘制图像不起作用

> ID：12158261
> 
> 赞同：-1
> 
> 时间：2012-08-28T11:25:41.637
> 
> 标签：javascript, html, html5-canvas

我正在尝试在画布上绘制图像。该图像位于 html 文件的文件夹中。但是当我调用 drawImage() 函数时，图像不会绘制。这是我的代码，

```
var upcan = document.createElement("canvas");
upcan.width = "190";
upcan.height = "380";
upcan.style.cssText = 'border-radius:25px; '
var upctx = upcan.getContext('2d');

var pb = new Image();

pb.onload = function() {
upctx.drawImage(pb,0,0,100,400);
};
pb.src = "photobooth.png";
var canvasData = upcan.toDataURL("image/png"); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-28T11:37:09.400

试试这个代码......你已经在绘制图像之后提供了 src 所以它现在正在绘制......

```
var upcan = document.createElement("canvas");
    upcan.width = "190";
    upcan.height = "380";
    upcan.style.cssText = 'border-radius:25px; '
    var upctx = upcan.getContext('2d');

    var pb = new Image();
    pb.src = "~/../urpath/photobooth.png"; //give here proper path
    pb.onload = function() {
    upctx.drawImage(pb,0,0,100,400);

    }; 
```

我认为它会解决你的问题

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-28T11:31:42.377

```
 var upcan;
    var img = d.createElement('img');
    var reader = new FileReader();
    reader.onload = (function(aImg, aName) { 
       return function(e) {
        aImg.src = e.target.result;
        aImg.onload = function(){
            var upcan = createImgCanvas(aImg, 100, 400);
        }
    }; })(img, file.name);
    reader.readAsDataURL(file);

function createImgCanvas(img, imgWidth, imgHeight) {
    var canvas = document.createElement('canvas');
    canvas.width = imgWidth;
    canvas.height = imgHeight;
    var imageCanvas2D = canvas.getContext("2d");
    try{
        imageCanvas2D.drawImage(img, 0, 0, imgWidth, imgHeight);
    } catch(err) { alert(err);}
    return canvas;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-28T11:32:01.013

试试这个：

```
var upcan = document.createElement("canvas");
upcan.width = "190";
upcan.height = "380";
upcan.style.cssText = 'border-radius:25px; '
var upctx = upcan.getContext('2d');

var pb = new Image();
pb.src = "photobooth.png";
pb.onload = function() {
upctx.drawImage(pb,0,0);
}; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-28T11:34:46.813

首先，您是否将画布附加到文档或任何其他元素？

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-28T11:56:59.190

我在此页面上使用开发人员工具在 Chrome 中尝试了您的代码，使用此页面中的现有图像之一并将画布附加到正文。代码运行良好，问题一定出在其他地方。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-08-28T22:02:38.303

负载处理程序异步运行；直到图像下载完成后才会执行。当前脚本将继续执行，因此将在图像下载之前拍摄画布的快照。将您的处理移动到负载处理程序中，以确保在捕获之前已绘制所有内容。

```
pb.onload = function() {
    upctx.drawImage(pb,0,0,100,400);
    var canvasData = upcan.toDataURL("image/png");
    // do stuff
};
pb.src = "photobooth.png"; 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-09-10T14:53:49.973

问题出在 upcan.toDataURL("image/png"); 中。由于安全原因，它不会绘制来自外部的图像。

# php - 使用 jquery 在 php 中调用两个 ajax 页面

> ID：12158265
> 
> 赞同：0
> 
> 时间：2012-08-28T11:25:47.780
> 
> 标签：php, javascript, jquery, ajax

```
$(document).ready(function(e) {

    $('#btn_emials').click(function(e) {
        var emails=$('#txt_emails').val();
        $.ajax({
            url:"../eoe/eoe_ajax.php",
            type:"POST",
            data:{emails:emails},
            success: function(d){               
                if(d=="u"){
                    alert("Unfinished Task");
                }
            },
            error: function(e){
                alert("java error");
            }
        });
    });

    get_status();   
    setInterval( function() { get_status(); }, 5000 );

    function get_status(){

        $.ajax({
            url:"../eoe/live.php",
            success:function(data){
            alert(data);
                var v=data.split(",");
                var g=v[0];
                var b=v[1];
                var n=v[2];

                FusionCharts.setCurrentRenderer('javascript');
               var myChart = new FusionCharts( "Column3D.swf", "myChartId2", "400", "200", "0", "0" );
                 myChart.setXMLData('<chart>' +
                                    '<set label="Good" value="'+g+'"  color="CC99FF"/>' +
                                    '<set label="Bad" value="'+b+'" color=" #00BFFF"/>' +
                                    '<set label="Yet to be" value="'+n+'" color="#FF7F50"/>' +
                                    '</chart>');
                myChart.render("chartContainer1");

                tot=parseInt(g)+parseInt(b)+parseInt(n);
                d=parseInt(g)+parseInt(b);
                /*alert(tot);
                alert(d); */
                var p=d*100/tot;
                p=Math.round(p);
                p1=p*5;
                $('.pbar_fill').width(p1+'px');
                $('.perc').html(p+"%");
                $('.fin_no').html(d);
                //alert(p);
            },
             error:function (xhr, ajaxOptions, thrownError){
                 alert("live error");
                }    
        });
    }

}); 
```

这里每 5 秒通过 get_status() 函数调用 live.php 页面，如果单击该验证按钮，它将转到 eoe_ajax.php 页面以验证 v 发送到该页面的电子邮件....但 live.php 不执行直到 eoe_ajax.php 完成电子邮件验证......

所以我想每 5 秒获取一次 live.php 页面...请帮助我...谢谢...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-28T15:03:43.007

似乎这可能是一个PHP问题。如果您使用应用程序处理会话，则只能有一个脚本同时访问会话。 [http://php.net/manual/en/function.session-write-close.php](http://php.net/manual/en/function.session-write-close.php)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-28T14:06:00.407

只需在after上使用[async](http://api.jquery.com/jQuery.ajax/)：`false``$.ajax({`

```
$.ajax({
...
async: false,
... 
```

# java - 如何从Java运行groovy作为一个单独的进程？

> ID：12158271
> 
> 赞同：2
> 
> 时间：2012-08-28T11:26:02.273
> 
> 标签：java, groovy, process

我正在尝试从 java 程序中运行一个 groovy 脚本，作为一个单独的进程（为了避免 jar 冲突问题）。

这是我到目前为止所拥有的：

```
public static void runGroovyScript(Path scriptPath, String... args) {
    try {
        List<String> argsList = newArrayList();
        argsList.add("groovy");
        argsList.add(scriptPath.toAbsolutePath().toString());
        Collections.addAll(argsList, args);

        Process process = Runtime.getRuntime().exec(argsList.toArray(new String[argsList.size()]));
        // Note - out input is the process' output
        String input = Streams.asString(process.getInputStream());
        String error = Streams.asString(process.getErrorStream());

        logger.info("Groovy output for " + Arrays.toString(args) + "\r\n" + input);
        logger.info("Groovy error for " + Arrays.toString(args) + "\r\n" + error);

        int returnValue = process.waitFor();
        if (returnValue != 0) {
            throw new RuntimeException("Groovy process returned " + returnValue);
        }
    } catch (Throwable e) {
        throw new RuntimeException("Failure running build script: " + scriptPath + " " + Joiner.on(" ").join(args), e);
    }
} 
```

当然，问题在于这`groovy`不是一个公认的命令。`PATH`由于环境变量以及 cmd.exe 所做的解析，它可以从命令行运行。在 linux 上，有不同的解析机制。找到 groovy 可执行文件以便将其传递给的独立于平台的方法是什么`Runtime.exec()`？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-28T12:38:56.473

一种干净的方法是将可执行文件的绝对路径作为某种配置参数传递给您的应用程序。

您也可以解析`PATH`环境变量并自己搜索，但是：

*   不同的平台可以有不同的机制来搜索可执行文件。例如，它们使用不同的[路径分隔符](http://docs.oracle.com/javase/6/docs/api/java/io/File.html#pathSeparator)，你需要处理它。
*   这是一种安全问题。攻击者可以传递给您的程序`PATH`环境变量，指向一个名为`groovy`.

* * *

我建议采取不同的方法。您可以使用单独的 ClassLoader 来加载您的 groovy 脚本。优点：

1.  您还将避免 JAR 碰撞问题。
2.  但是您不需要产生任何外部进程。
3.  [您还可以使用自定义SecurityManager](http://java.sun.com/developer/onlineTraining/Programming/JDCBook/signed2.html)限制允许脚本执行的操作。
4.  您可以更好地与脚本通信 - 使用方法调用而不是标准输入/输出。

也可以看看：

*   [Java 类加载器教程](https://stackoverflow.com/questions/1673256/java-class-loader-tutorial)
*   [Java 安全性：通过 URLClassLoader 加载的沙盒插件](https://stackoverflow.com/questions/3947558/java-security-sandboxing-plugins-loaded-via-urlclassloader)
*   [URL类加载器](http://docs.oracle.com/javase/6/docs/api/java/net/URLClassLoader.html)

* * *

您还可以将它与 Java Scripting API 结合使用。这可能是最强大和最灵活的解决方案。为此，请参阅

*   [Java 平台的脚本](http://java.sun.com/developer/technicalArticles/J2SE/Desktop/scripting/)
*   [使用 Groovy 编写 JSR 223 脚本](http://groovy.codehaus.org/JSR+223+Scripting+with+Groovy)
*   [http://docs.oracle.com/javase/6/docs/technotes/guides/scripting/programmer_guide/index.html](http://docs.oracle.com/javase/6/docs/technotes/guides/scripting/programmer_guide/index.html)
*   [沙盒 JSR-223](https://stackoverflow.com/questions/1399505/sandboxing-jsr-223)
*   [脚本引擎管理器](http://docs.oracle.com/javase/6/docs/api/javax/script/ScriptEngineManager.html#ScriptEngineManager%28java.lang.ClassLoader%29)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-06-14T13:43:56.003

[java-sandbox](http://blog.datenwerke.net/p/the-java-sandbox.html)允许远程执行沙盒代码。看看[http://blog.datenwerke.net/2013/06/sandboxing-groovy-with-java-sandbox.html](http://blog.datenwerke.net/2013/06/sandboxing-groovy-with-java-sandbox.html)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-29T07:00:38.260

我们实际上摆弄了另一个类加载器，但没有雪茄。我们所做的是在系统变量中定义 groovy 可执行文件的位置，并为 Windows 添加“cmd /c”：

```
import com.google.common.base.Joiner;
import org.apache.commons.lang.SystemUtils;
import org.apache.log4j.Logger;

import java.nio.file.Path;
import java.util.Arrays;
import java.util.Collections;
import java.util.List;

import static com.google.common.collect.Lists.newArrayList;
import static org.apache.ivy.util.Checks.checkNotNull;

public class GroovyRunner {
    private final static Logger logger = LoggerHelper.getLogger();

    public static void runGroovyScript(Path scriptPath, String... args) {
        try {
            List<String> argsList = newArrayList();
            String groovyPath = System.getenv("PLAY_GROOVY_PATH");

            if (SystemUtils.IS_OS_WINDOWS) {
                // Window, no easy default for PLAY_GROOVY_PATH
                checkNotNull(groovyPath, "Missing Env Var 'PLAY_GROOVY_PATH'");

                argsList.add("cmd");
                argsList.add("/c");
                argsList.add(groovyPath);
            } else {
                if (groovyPath == null) {
                    // Provide a reasonable default for linux
                    groovyPath = "/usr/bin/groovy";
                }
                argsList.add(groovyPath);
            }

            argsList.add(scriptPath.toAbsolutePath().toString());
            Collections.addAll(argsList, args);

            String join = Collections3.join(argsList, " ");

            ExecCommand process = new ExecCommand(join);

            // Note - out input is the process' output
            String output = process.getOutput();
            String error = process.getError();

            logger.info("Groovy output for " + Arrays.toString(args) + "\r\n" + output);
            logger.info("Groovy error for " + Arrays.toString(args) + "\r\n" + error);

            if (process.getReturnValue() != 0) {
                throw new RuntimeException("Groovy process returned " + process.getReturnValue());
            }
        } catch (Throwable e) {
            throw new RuntimeException("Failure running groovy script: " + scriptPath + " " + Joiner.on(" ").join(args), e);
        }
    }
} 
```

# swi-prolog - 编译文件中的 XPCE for Prolog

> ID：12158293
> 
> 赞同：2
> 
> 时间：2012-08-28T11:27:25.253
> 
> 标签：swi-prolog, xpce

我对 Unix 上的 SWI Prolog 6.2.0 和 XPCE 有一个奇怪的问题。

当我运行一个 prolog 程序时，它工作得非常好。

```
swipl -f file.pl 
```

但是，每当我尝试编译相同的程序时

```
swipl -o launch -c file.pl 
```

我收到一条错误消息，告诉我 pce 库不可用

```
source_sink `library(pce)' does not exist 
```

至于可能是什么原因，我完全迷失了。. .

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-28T18:17:05.017

我试图编译`colour.pl`，一个来自 XPCE 手册的样本，我发现你报告的同样的问题。似乎必须指定 XPCE 库路径。

我能够编译

```
swipl -p library=~/lib/swipl-6.1.13/xpce/prolog/lib/ -o colour -c colour.pl 
```

`:- use_module(library(pce)).`获取库路径不是立即的：我发现的简单方法：使用 IDE打开文件的源代码，在第一条错误消息（应该类似于）的行。然后用鼠标右键打开库源，从菜单中`File`单击`Save as...`，该框将显示您可以用来编译的路径。

高温高压

# java - 升级到 Hibernate 4.1 和“臭名昭著”的 HibernateTemplate

> ID：12158294
> 
> 赞同：21
> 
> 时间：2012-08-28T11:27:35.247
> 
> 标签：java, spring, hibernate

我正在将我们的项目从 Hibernate 3.0 升级到 Hibernate 4.1.6。（我们目前使用的是spring 3.1）

我在许多文章和 HibernateTemplate 文档中读到，由于不支持 4.0 版 HibernateTemplate，我应该用调用`sessionFactory.getCurrentSession()`来获取会话来替换它的用法。

由于这个项目是从旧版本的 Hibernate 开始的，因此鼓励使用，我们目前在整个项目`HibernateTemplate`中有 124 次使用。`HibernateTemplate`我担心替换所有这些事件`sessionFactory.getCurrentSession()`可能会在我们的项目中插入回归错误。此外，有些地方在`HibernateTemplate`非事务性上下文中使用，没有“当前”会话。在这些情况下我该怎么办？打开一个新会话并自己处理（关闭）它？我用的时候不是这样的`HibernateTemplate`。

你有解决这些问题的好策略吗？

谢谢。

相关阅读：

1.  [休眠与。Spring - HibernateTemplate 历史](http://jroller.com/kimchy/entry/hibernate_vs_spring_hibernate_template)
2.  [Hibernate 核心迁移指南](https://community.jboss.org/wiki/HibernateCoreMigrationGuide40)
3.  [迁移到 Spring 3.1 和 HIBERNATE 4.1](http://blog.springsource.org/2012/04/06/migrating-to-spring-3-1-and-hibernate-4-1/)
4.  [org.springframework.orm.hibernate3.HibernateTemplate](http://static.springsource.org/spring/docs/2.5.x/api/org/springframework/orm/hibernate3/HibernateTemplate.html)

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-10-02T17:44:36.170

好的，这就是我实际所做的，我不知道这是否是解决此问题的最佳解决方案，但在我们的情况下，并且由于我一直在寻找最本地化的解决方案，因此对我来说似乎是最好的。

我扩展了 springframework.orm.hibernate3.HibernateTemplate 并创建了一个新的 MyHibernateTemplate。新模板的主要作用是覆盖大多数 hibernate3.HibernateTemplate 最终导致的 doExecute 方法，并提供旧 SessionFactoryUtils 提供的一些功能（如 isSessionTransactional 和 applyTransactionTimeout）。

新的 doExecute 复制了旧的逻辑，但不是 SessionFactoryUtils.getNewSession 来获取会话，而是首先尝试查找打开的会话 getSessionFactory().getCurrentSession() ：

```
boolean newSessionOpened = false;
Session session;

if (enforceNewSession){
    session = SessionFactoryUtils.openSession(getSessionFactory());
    newSessionOpened = true;
} else {
    try {
        // look for an open session
        session = getSessionFactory().getCurrentSession();
    }
    catch (HibernateException ex) {
        try {
            // if there isn't an open session, open one yourself
            session = getSessionFactory().openSession();
            newSessionOpened = true;
        } catch (HibernateException e) {
            throw new DataAccessResourceFailureException("Could not open Hibernate Session", ex);
        }
    }
}

// is the open session, is a session in a current transaction?
boolean existingTransaction = (!enforceNewSession &&
        (!isAllowCreate() || isSessionTransactional(session, getSessionFactory()))); 
```

您只需要手动关闭此会话：

```
 finally {
    // if session was used in an existing transaction restore old settings
    if (existingTransaction) {
        //logger.debug("Not closing pre-bound Hibernate Session after HibernateTemplate");
        disableFilters(session);
        if (previousFlushMode != null) {
            session.setFlushMode(previousFlushMode);
        }
    }
    // if not and a new session was opened close it
    else {
        // Never use deferred close for an explicitly new Session.
        if (newSessionOpened) {
            SessionFactoryUtils.closeSession(session);
            //_log.info("Closing opened Hibernate session");
        }
    } 
```

我试图保持这个答案简短，但如果有任何问题，我可以进一步详细说明这个问题。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-28T19:42:32.977

在文档中查看[此部分。](http://docs.jboss.org/hibernate/orm/4.1/manual/en-US/html_single/#architecture-current-session)它说这`SessionFactory.getCurrentSession()`是可插入的，并且有一个[`ThreadLocalSessionContext`](http://docs.jboss.org/hibernate/core/3.5/api/org/hibernate/context/ThreadLocalSessionContext.html)实现将“当前会话”保留在 JTA 事务中`ThreadLocal`而不是 JTA 事务中。ThreadLocalSessionContext 还将在从该会话创建的休眠事务结束时关闭会话，因此您不必担心`Session`自己关闭。

关于引入回归错误，升级库总是有风险的，特别是当它是你的应用程序的核心时，如休眠。我能给出的唯一建议是确保您的测试套件在升级之前具有良好的覆盖率。毕竟，这是您的测试套件的工作——捕捉回归错误。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-05-30T07:06:52.560

您也可以继续使用`HibernateTemplate`with `getCurrentSession()`，因为在许多情况下`openSession()`可能不是最佳选择，因为您需要自行关闭会话。要使用 currentSession，您可以添加以下内容来管理事务：

`<prop key="hibernate.transaction.jta.platform">org.hibernate.engine.transaction.jta.platform.internal.JBossAppServerJtaPlatform</prop>`

其中键的值将取决于您的 AS。

# sql - 在触发器中使用插入的值

> ID：12158298
> 
> 赞同：2
> 
> 时间：2012-08-28T11:27:42.153
> 
> 标签：sql, triggers, sql-server-2008-r2

我正在为我的一张表编写触发器。我想要做的是，我想用插入的字段之一更新另一个表列。

```
CREATE TRIGGER [dbo].[Trigger_TestTrigger]
ON [dbo].[TableA]
FOR INSERT
AS

BEGIN
    SET NoCount ON
    DECLARE @variable UNIQUEIDENTIFIER
    SELECT @variable = TableB.colA1 FROM TableB WHERE (TableB.colB1 = INSERTED.colA1) 
    IF (@variable != INSERTED.colA2)
    BEGIN
        UPDATE TableB SET colB4 = INSERTED.colA2 WHERE TableB.colB1 =INSERTED.colA1
    END 
END 
```

但是在向数据库创建此触发器时会出错。错误是：

```
 "INSERTED.colA1" could not be bound.
 "INSERTED.colA2" could not be bound. 
```

通常 INSERTED 具有刚刚插入的值。那么，我应该如何拥有已插入表“TableA”的值。如果插入不能这样使用，这样做的正确方法是什么。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-28T11:29:34.757

您应该像对待任何其他表一样对待插入

```
SELECT @variable = TableB.colA1 
FROM TableB 
     inner join inserted ON TableB.colB1 = INSERTED.colA1 
```

请注意，它`inserted`可能包含不止一行，因此这实际上不会始终提供您想要的结果

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-28T11:30:43.007

您应该将 INSERTED 作为表格处理。

# visual-c++ - 连接两个字符串的字符

> ID：12158299
> 
> 赞同：-3
> 
> 时间：2012-08-28T11:27:47.360
> 
> 标签：visual-c++

我正在解决这个问题。

编写一个 String 类并重载 + 运算符以混合两个字符串，以便创建一个新字符串，其中每个字符串中的一个字符拼凑在一起，直到所有字符都混合在一起。例如 • "1234567890" + "QWERTYUIOP" = "1Q2W3E4R5T6Y7U8I9O0P"

你能帮我连接两个字符串的字符吗？

这是我写的代码：

```
#include "stdafx.h"
#include<iostream>
#include<conio.h>
#include<string>
using namespace std;
class MY_String : public string
{
  public:
    char *rep;
    MY_String(){}
    MY_String(char *tem)
    {
      rep = new char[strlen(tem)+1] ;
      strcpy(rep,tem); 
    }
    MY_String operator + (const MY_String &rhs)
    {
      char *temp;MY_String obj11("1234567890");
      temp= new char[strlen(rep) + strlen(rhs.rep)+1];//cout<<"TEMP::"<<rhs.rep<<endl;
      temp = strcat(rep,rhs.rep);
      return MY_String(temp);
    }
};
int main()
{
    MY_String obj1("1234567890");
    MY_String obj2("QWERTYUIOP");
    MY_String obj3;

    obj3 = obj1+obj2;
    cout<<obj3.rep;
    return 0;

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-28T11:32:47.820

假设您知道如何重载`operator+`，算法可能非常简单。

```
 string A, B, Result;
 int As = A.size(), Bs = B.size();
 int MixingLenght = min(As,Bs);
 for (int index = 0; index < MixingLength; ++index)
 {
     Result += A[index];
     Result += B[index];
 } 
```

然后你必须决定如何处理剩余的部分（如果字符串的大小不同）。您可以忽略它，也可以附加到`Result`.

# android - Android应用内购买，取消订单

> ID：12158301
> 
> 赞同：2
> 
> 时间：2012-08-28T11:27:51.533
> 
> 标签：android, in-app

我已将应用程序购买集成到我的 android 应用程序中。当我进入购买屏幕选择我的信用卡时，4111111111111111 和其他测试信用卡失败。所以我试试我真正的信用卡。这也失败了，每次我收到“错误。无法处理您的付款。登录到您的 Google 电子钱包帐户以请求支持。

电子邮件 ID`x@gmail.com`是我设备上的主要帐户（是的，我正在设备上进行测试）。`x@gmail.com`在我的 play.google.com-> 编辑个人资料页面上也设置为“测试帐户”。我可能做错了什么？

编辑：我在市场上推出的应用程序没有启用“BILLING”权限。我上传但未“激活”的新版本具有 BILLING 权限。我的测试应用程序和我的在线“最新非活动应用程序”都具有相同的版本，版本代码。此外，我还“发布了我的应用内非托管产品”（因为我的实时产品不具备应用内功能）。

是的，我的公钥已正确添加到我的 Security.java 文件中。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-28T11:37:45.017

仅在以下提到的国家/地区支持 Google Play 商家帐户。如果您居住在印度并且在以下提到的任何国家/地区都没有银行账户，则您不能出售您的付费应用程序。

[商家支持的位置](http://support.google.com/googleplay/android-developer/bin/answer.py?hl=en&answer=150324)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-07-04T12:19:01.120

测试帐户不是我手机上的主要帐户。我必须删除所有帐户并将测试帐户创建为手机上的主要帐户才能正常工作。

# java - 使用由单个安装程序安装的 SQLite 的 Java 桌面应用程序

> ID：12158304
> 
> 赞同：6
> 
> 时间：2012-08-28T11:28:01.727
> 
> 标签：java, sqlite, installation, portability

我是编程与数据库交互的 Java 桌面应用程序的初学者。我的目标是制作一个简单的 java 应用程序，它使用数据库在本地存储它的数据。经过一番谷歌搜索后，我发现 SQLite/Derby 可以满足我的需求。

我用谷歌搜索了 SQLite 和 Derby，发现为了使用它们，我需要通过终端中的命令将它们安装在计算机上。

我的问题是如何完成应用程序，以便最终客户端将获得一个简单的安装程序文件，该文件安装 Java 应用程序和 SQLite/Derby 数据库，避免之前进行任何安装。

那可能吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-28T11:55:32.047

我认为对您来说最简单的是在`embedded`模式下使用数据库。可以通过这种方式使用不同的数据库：

*   [德比](http://db.apache.org/derby/docs/10.2/devguide/cdevdeploy855655.html)
*   [SQLLite](http://blog.rungeek.com/post/81611917/how-to-use-sqlite-with-java)和更多细节你可以在[这个答案](https://stackoverflow.com/questions/41233/java-and-sqlite/593137#593137)
*   [数据库](http://hsqldb.org/doc/2.0/guide/deployment-chapt.html#dec_embedded_desktop_db)

该数据库与您的应用程序 jar 打包在一起，因此您无需安装它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-28T11:42:13.390

您可以编写一个脚本（例如 UNIX 上的 bash 脚本）来检查数据库是否已安装，在需要时安装它并运行程序的 .jar 文件。在 Windows 上，您可以使用批处理脚本实现相同的目的。所以用户只需要执行脚本。

# c# - 如何自动插入xml元素，序列号

> ID：12158306
> 
> 赞同：1
> 
> 时间：2012-08-28T11:28:12.157
> 
> 标签：c#

我使用以下代码将数据保存在 xml 中，

```
var path = Path.Combine(Environment.GetFolderPath(Environment.SpecialFolder.MyDocuments), "codedata.xml");
            XmlDocument doc = new XmlDocument();
            if (!System.IO.File.Exists(path))
            {                   
                XmlDeclaration declaration = doc.CreateXmlDeclaration("1.0", "UTF-8", "yes");
                XmlComment comment = doc.CreateComment("This is an XML Generated File");
                doc.AppendChild(declaration);
                doc.AppendChild(comment);
                doc.AppendChild(doc.CreateElement("Root"));
            }
            else
            {
                doc.Load(path);
            }
            XmlElement root = doc.DocumentElement;
            XmlElement Subroot = doc.CreateElement("data");
            XmlElement sno=doc.CreateElement("Sno");
            XmlElement Companycode = doc.CreateElement("Companycode");
            XmlElement Productcode = doc.CreateElement("Productcode");
            XmlElement Productname = doc.CreateElement("Productname");
            XmlElement Brandcode = doc.CreateElement("Brandcode");
            XmlElement Brandname = doc.CreateElement("Brandname");
            sno.InnerText = txt_sno.Text;
            Companycode.InnerText = txt_companycode.Text;
            Productcode.InnerText = txt_productcode.Text;
            Productname.InnerText = txt_productname.Text;
            Brandcode.InnerText = txt_brandcode.Text;
            Brandname.InnerText = txt_brandname.Text;
            Subroot.AppendChild(sno);
            Subroot.AppendChild(Companycode);
            Subroot.AppendChild(Productcode);
            Subroot.AppendChild(Productname);
            Subroot.AppendChild(Brandcode);
            Subroot.AppendChild(Brandname);
            root.AppendChild(Subroot);
            doc.AppendChild(root);
            doc.Save(path);
            MessageBox.Show("Details  added Successfully"); 
```

在这里我手动输入了序列号，我需要它自动。当我点击按钮时，sno 会增加它的数量。建议我一些想法。

# java - System.currentTimeMillis()、new Date().getTime() 和 Calendar.getInstance().getTimeInMillis() 的准确度？

> ID：12158307
> 
> 赞同：1
> 
> 时间：2012-08-28T11:28:14.560
> 
> 标签：java, date, calendar

`System.currentTimeMillis()`当我注意到以下段落出现在其 Javadoc 中时，我正要在 Eclipse 中使用：

```
Returns the current system time in milliseconds since January 1, 1970
00:00:00 UTC. This method shouldn't be used for measuring timeouts or
other elapsed time measurements, as changing the system time can affect
the results. 
```

所以这意味着我不能依赖`System.currentTimeMillis()`我是否想专门维护对这个当前时间点的引用。那么，最准确的方法是什么？这三种方法标记当前时间是否彼此不同？

**更新**：我想做的是测量两个单独程序运行中两个时间点之间的差异。我担心的是，如果我`System.currentTimeMillis()`在第一次运行后使用并且用户使用系统时间，我可能会在第二次运行时得到一个奇怪的意外值。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-28T11:33:11.580

您应该使用`System.nanoTime()`API 文档中的 , ：

> 返回最精确的可用系统计时器的当前值，以纳秒为单位。
> 
> 此方法**只能用于测量经过的时间**，与系统或挂钟时间的任何其他概念无关。返回的值表示自某个固定但任意时间以来的纳秒（可能在将来，因此值可能为负数）。此方法提供纳秒精度，但不一定提供纳秒精度。不保证值的变化频率。由于数值溢出，超过大约 292 年（2 ^(63纳秒）的连续调用的差异将无法准确计算经过的时间。)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-28T11:33:14.830

如果你想参考一个特定的时间点，你绝对可以依靠[`System.currentTimeInMillis()`](http://docs.oracle.com/javase/7/docs/api/java/lang/System.html#currentTimeMillis%28%29). 您描述的三种方法将以相同的方式标记时间，不同之处在于它包装在哪种对象中。在程序中使用您需要的变体。

如果要在程序运行期间测量两个时间点之间的差异，请 [`System.nanoTime()`](http://docs.oracle.com/javase/7/docs/api/java/lang/System.html#nanoTime%28%29)改用。

要在两个单独的程序运行中获得两个时间点之间的时间差，如果您担心用户可能会玩弄系统时钟，您将不得不依赖外部时间源。例如，您可以查看[`Java SNTP Client`](http://support.ntp.org/bin/view/Support/JavaSntpClient).

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-28T11:34:05.037

使用 System.nanoTime() 而不是 System.currentTimeInMillis()

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-28T12:07:15.970

的一个特点`System.currentTimeMillis()`是它会定期进行校正，以使其从长远来看更准确。这可能意味着时间在更正后会倒退或向前跳跃。

的一个特点`System.nanoTime()`是单调递增。不能保证它在 JVM 之间是相关的，但在许多系统上，它恰好是自上次处理器重置以来的时间。即它将在重新启动时重置。

# spring-mvc - Spring DAO - 使用 JdbcTemplate 的第一次查询需要更长的时间

> ID：12158309
> 
> 赞同：3
> 
> 时间：2012-08-28T11:28:17.880
> 
> 标签：spring-mvc, dao, performance

在我的应用程序中，我使用带有 DAO 模式的 Spring MVC 通过 JdbcTemplate 访问 MSSql 数据库。一切正常，但我注意到第一个查询比每个请求中的下一个查询需要更长的时间。

我写了一个简单的测试：

```
String sql = "SELECT 1";
for (int i = 0; i < 5; i++) {
    long startTime = System.currentTimeMillis();
    jdbcTemplate.queryForList(sql);
    logger.debug("query took: " + TimeHelper.showDuration(startTime));
} 
```

结果是：

```
2012-08-28 12:55:07,665 | Start
2012-08-28 12:55:08,878 | query took: 424 milliseconds
2012-08-28 12:55:08,893 | query took: 15 milliseconds
2012-08-28 12:55:08,908 | query took: 14 milliseconds
2012-08-28 12:55:08,922 | query took: 14 milliseconds
2012-08-28 12:55:08,937 | query took: 14 milliseconds 
```

我知道 Spring 正在做一些活动来准备所有 bean。但是，如果对服务器的请求只执行 1 个查询，那么每个请求需要 424 毫秒。

我的问题是：这种行为可以吗？或者我的代码中可能存在一些错误？它是否可以在每次请求时 Spring 都需要这段时间进行初始化？（然后请求中的所有其他查询都会运行得很快）？或者我可以做一些启动初始化，然后在每个请求期间，第一个查询也需要 15 毫秒？

我的配置如下：

```
datasource: class="org.apache.commons.dbcp.BasicDataSource" 
```

dao 被注入到测试类：

```
@Resource(name="testDao")  
private TestDao testDao; 
```

我使用基于注释的方法。测试类和 DAO 不使用 @Transaction。

编辑：我也尝试配置 initialSize 但这没有帮助，（initialSize=2 需要 800 毫秒，initialSize=1 需要 400 毫秒 - 每个请求）。

我不明白为什么每个请求都需要 400 毫秒，而可能需要 15 毫秒。Spring 似乎有些开销。:(

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-28T11:36:47.980

您的 DataSource 是一个连接池。第一个查询需要连接。后续查询重用该连接。您可以将 dbcp 配置为预先创建一些连接，或者在应用程序启动后立即手动连接和释放。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-28T14:55:28.357

我检查了连接池及其连接（initialSize）是在第一次调用时在需要连接时创建的，然后它在所有请求中被重用，这就是它应该如何工作:)，我还注意到 400 毫秒的时间更低（大约 100ms) 当同时有多个请求时。我认为最初较长时间的原因是因为建立了 John Watts 提到的 TCP 连接，或者是因为一些 Spring 后台管理。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-28T12:20:19.427

看看[javadoc](http://static.springsource.org/spring/docs/3.0.x/javadoc-api/org/springframework/jdbc/core/JdbcTemplate.html)和[source](http://grepcode.com/file/repo1.maven.org/maven2/org.springframework/spring-jdbc/3.0.1.RELEASE/org/springframework/jdbc/support/JdbcAccessor.java#JdbcAccessor.afterPropertiesSet%28%29)。`getExceptionTranslator()`可能涉及一些设置工作。也许您可以使用参数控制该工作何时发生`lazy-init`。

# html - 从具有填充公式的网页获取页面源作为字符串。asp.net mvc 2

> ID：12158312
> 
> 赞同：0
> 
> 时间：2012-08-28T11:28:20.917
> 
> 标签：html, asp.net-mvc-2

在我的网页中，我可以用用户信息填写一些表格。

[http://hotcont.eu/OnlineVertrag/EContract](http://hotcont.eu/OnlineVertrag/EContract)

填充后，如果所有内容都按我想要的方式填充，我可以再次看到它。现在应该发送给合作伙伴。

我的问题，我怎样才能读取这个页面的html页面源，里面有填充的用户信息？

我想将页面源作为字符串作为 HTML 正文与 MailMessage 一起发送。

```
<tr>
                    <td style="width: 400px;">
                        <b style="font-size: smaller; color: #00008B;">
                            <%= Html.DisplayFor(model => model.NameSeller) %></b>
                        <p style="margin-top: 3px; border-top: solid 1px #fddf99; width: 300px;">
                            Vorname, Nachname</p>
                    </td>
                    <td>
                        <b style="font-size: smaller; color: #00008B;">
                            <%= Html.DisplayFor(econtract => econtract.NameBuyer)%></b>
                        <p style="margin-top: 3px; border-top: solid 1px #fddf99; width: 308px;">
                            Vorname, Nachname</p>
                    </td>
                </tr> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-28T11:34:01.447

您可以查看[以下帖子](https://stackoverflow.com/a/2759898/29407)，该帖子说明了如何通过将您在提交表单后检索到的模型传递给字符串来将视图呈现为字符串。

如果您使用的是 MVC 3，您可以查看专为此目的设计的[MvcMailer 。](https://github.com/smsohan/MvcMailer/wiki/MvcMailer-Step-by-Step-Guide)

# vba - 如何在visual basic中比较一组值

> ID：12158315
> 
> 赞同：2
> 
> 时间：2012-08-28T11:28:28.323
> 
> 标签：vba

```
 If Target.Column = 6 Then
  End If 
```

如果 Column 为 6 或 8 或 10，我希望执行 If 代码。我应该如何修改上面的代码

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-28T11:31:23.473

你可以使用 case 语句

[CASE 语句 (VBA)](http://www.techonthenet.com/excel/formulas/case.php)

见章节

```
You can also comma delimit values. For example:

Select Case LNumber
    Case 1, 2
       LRegionName = "North"
    Case 3, 4, 5
       LRegionName = "South"
    Case 6
       LRegionName = "East"
    Case 7, 11
       LRegionName = "West"
 End Select 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-28T12:50:01.650

这就是你问的更具体的问题：

```
If Target.Column = 6 OR Target.Column = 8 OR Target.Column = 10 Then
'Code for if a match is found.
else
'Code for when a match isn't found.
End If 
```

或如 asstander 所示：

```
Select Case Target.Column
Case 6, 8, 10
'Code for if a match is found.
Case Else
'Code for when a match isn't found.
End Select 
```

甚至另一种方式：

```
With Target
If .Column = 6 Or .Column = 8 OR .Column = 10 then
'Code for if a match is found.
else
'Code for when a match isn't found.
End If
End with 
```

# ruby-on-rails-3 - 轨道活动记录分组范围

> ID：12158317
> 
> 赞同：3
> 
> 时间：2012-08-28T11:28:34.597
> 
> 标签：ruby-on-rails-3, activerecord, grouping

我有一个带有**质量**字段的用户模型。该字段的数据类型是浮点数。

现在我想根据质量范围对所有用户进行分组如下

```
[65 - 75],[75 - 85], [85 - 95] and [95 - 100] 
```

注意：我希望所有用户的质量表格在一个组中为 65 到 75，在另一组中为 75-85。

如何使用 ActiveRecord 实现这一点。

谢谢

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-08-28T11:41:51.503

那么你可以使用`group`和这样`having`的功能`ActiveRecord`：

```
Model.select(:quality).group(:quality).having("quality > 65 AND quality < 75")
Model.select(:quality).group(:quality).having("quality > 75 AND quality < 85")
Model.select(:quality).group(:quality).having("quality > 85 AND quality < 95")
Model.select(:quality).group(:quality).having("quality > 95 AND quality < 100") 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-08-28T11:47:42.623

```
User.where(:quality => (65..75))
User.where(:quality => (75..85))
User.where(:quality => (85..95))
User.where(:quality => (95..100)) 
```

或者，如果您想要一个查询，您有 3 个选项：

*   使用字符串形式

    ```
    User.where("(quality >= 65 AND quality <= 75) OR (quality >= 75 AND quality <= 85) OR (quality >= 85 AND quality <= 95) OR (quality >= 95 AND quality <= 100)").group(:quality) 
    ```

*   使用 OR 子句编写 SQL 或

*   使用[ARel](https://github.com/rails/arel)宝石。

# objective-c - 如何从 viewcontroller 调用 Delegate 到 tableview

> ID：12158318
> 
> 赞同：1
> 
> 时间：2012-08-28T11:28:39.197
> 
> 标签：objective-c, ios, cocoa-touch, uiviewcontroller, delegates

我将 TableView 作为我的 MainView，将 viewcontroller 作为我的第二个视图。视图控制器有 3 个文本字段..我正在编写协议，以便我可以获得 Textfileds 的值并可以添加到 Tableview 数组中。目的是我在文本字段中给出的任何内容都必须添加到表格单元格中。我有 secondviewcontroller.h

```
@property (nonatomic,assign) id<secondviewcontrollerDelegate> delegate;

 @protocol secondviewcontrollerDelegate<NSObject>
- (void)additemsintoarray;
@end 
```

第二视图控制器.m

```
-(IBAction)ok:(id)sender
{
    [self.delegate additemsintoarray];
} 
```

在 Tableview.h 中

```
@interface RootViewController : UITableViewController<secondviewcontrollerDelegate> 
```

在 tableview.m 中

```
- (void)additemsintoarray
{
    [self.array1 insertObject:scontroller.iditem1.text atIndex:[array1 count]];
    [self.array1 insertObject:scontroller.nameitem1.text atIndex:[array1 count]];
    [self.array1 insertObject:scontroller.iditem1.text atIndex:[array1 count]];
    [[self navigationController]popViewControllerAnimated:YES];
} 
```

注意：该数组在 Tableview 中声明了一些值......
我收到一个错误：

> 由于未捕获的异常“NSInvalidArgumentException”而终止应用程序，原因：“*** - [UIView additemsintoarray:]：无法识别的选择器发送到实例

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-28T11:58:28.813

你`RootViewController`应该是代表。您遇到此问题是因为 UIView 作为您的`SecondViewController`.

希望这可以帮助

# javascript - 引用左轮手枪崩溃网站

> ID：12158319
> 
> 赞同：1
> 
> 时间：2012-08-28T11:28:45.200
> 
> 标签：javascript, jquery, random, crash, quotes

我有一个使用 javascript 随机显示报价列​​表的网站。我已经在 7-8 个其他站点上使用了相同的脚本，没有问题，但是在这个当前站点上，它只是在几秒钟后使浏览器崩溃。

我确实有一个类似的问题，这是由于在没有引号的页面上调用了 javascript，但是我通过将 javascript 移动到与引号相同的“包含”文件中来解决这个问题（这意味着没有引号就永远无法调用其他）

该站点与另一个站点位于同一服务器空间，并且文件完全相同，因此我无法弄清楚为什么该站点有问题而其他站点则没有...

这是脚本...

```
<ul id="quote">
<?php perch_content('Testimonials'); ?>
</ul>

<script type="text/javascript"> 

this.randomtip = function() {
    var pause = 5000; // define the pause for each tip (in milliseconds) Feel free to make the pause longer so users can have time to read the tips :)
    var length = $("#quote li").length;
    var temp = -1;
    this.getRan = function() {
        // get the random number
        var ran = Math.floor(Math.random() * length) + 1;
        return ran;
    };
    this.show = function() {
        var ran = getRan();
        // to avoid repeating tips we need to check 
        while (ran == temp) {
            ran = getRan();
        };
        temp = ran;
        $("#quote li").hide();
        $("#quote li:nth-child(" + ran + ")").fadeIn(500);
    };
    // initiate the script and also set an interval
    show();
    setInterval(show, pause);
};
$(document).ready(function() {
    randomtip();
});
</script> 
```

提前谢谢各位！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-28T11:45:48.803

我注意到的第一件事是您的脚本根本没有封装。在您的代码中，“this”表示窗口对象。show 和 getRan 函数都是窗口（全局）对象的成员。

你可以试试这个版本来完全封装你的变量：

```
$(document).ready(function () {
    var pause = 5000; // define the pause for each tip (in milliseconds)
    var length = $("#quote li").length;
    var temp = -1;
    var getRan = function() {
        // get the random number
        var ran = Math.floor(Math.random() * length) + 1;
        return ran;
    };
    var show = function() {
        var ran = getRan();
        // to avoid repeating tips we need to check 
        while (ran == temp) {
            ran = getRan();
        };
        temp = ran;
        $("#quote li").hide();
        $("#quote li:nth-child(" + ran + ")").fadeIn(500);
    };
    // initiate the script and also set an interval
    show();
    setInterval(show, pause);
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-28T12:26:24.287

你只有一个引号，这意味着它`getRan()`总是会返回相同的值 (1)。由于`temp`设置为先前的值，因此您会在此处获得无限循环：

```
var ran = getRan();
while (ran == temp) {
    ran = getRan();
} 
```

如果您将其包装在这样的安全检查中，它应该可以工作。

```
var ran = getRan();
if (length > 1) {
    while (ran == temp) {
        ran = getRan();
    }
} 
```

# java - 与 Web 服务调用相关的 Java 异常

> ID：12158327
> 
> 赞同：0
> 
> 时间：2012-08-28T11:29:12.913
> 
> 标签：java, web-services, exception, soap

我对网络服务一无所知，但我被要求解决与网络服务相关的问题。

运行程序时出现以下异常：

> org.springframework.ws.soap.axiom.AxiomSoapBodyException：无法访问信封：解析器已到达文档末尾。没有找到兄弟姐妹；嵌套异常是 org.apache.axiom.om.OMException：解析器已经到达文档末尾。没有找到兄弟姐妹

我应该在哪里解决问题？我查看了这些异常的 java-docs，但没有提供有用的信息。

任何了解这些基础知识的链接都会很有用。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-28T12:39:42.870

尝试使用soapUI 4.0.1 从他们的网站[http://www.soapui.org/下载它](http://www.soapui.org/)

这将在 GUI 中为您提供响应，并帮助您找到问题。

# regex - 所有以后缀结尾但不使用否定的文件

> ID：12158329
> 
> 赞同：5
> 
> 时间：2012-08-28T11:29:17.480
> 
> 标签：regex, regex-negation

我正在尝试匹配除以 .bmp 结尾的所有文件。

由于某些限制，我不能使用否定（？：，！：）和引用（\ 1，...）。

我做了一个表达式，它适用于大多数字符串：

```
^\w+\.([^b].*|b|b[^m].*|bm|bm[^p].*|bmp.+)$ 
```

它匹配不以 .bmp 结尾的所有内容 - 包括 test.txt、test.bmp.txt 等。但不幸的是，它确实允许 test.bi.bmp。

关于如何改进正则表达式以使其仅匹配**不**以 .bmp 结尾的文件的任何想法？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-28T11:42:25.600

为什么不：

```
^.*[^p]$|^.*[^m]p$|^.*[^b]mp$|^.*[^.]bmp$ 
```

?

[http://regexr.com?31vg7](http://regexr.com?31vg7)

另一种[选择](http://regexr.com?31vga)是`^.*([^p]|[^m]p|[^b]mp|[^.]bmp)$`（更短）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-28T11:44:37.830

```
/^.+\.([^b][^.]*|b|b[^m][^.]*|bm|bm[^p][^.]*|bmp[^.]+)$/ 
```

只需确保“bmp”之前的点是最后一个点

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-28T11:39:34.350

不太优雅但有效：

```
^.*([^b][^m][^p]|b[^m][^p]|[^b]m[^p]|[^b][^m]p|bm[^p]|[^b]mp)$ 
```

# extjs - Resource on Ext-JS Framework

> ID：12158342
> 
> 赞同：0
> 
> 时间：2012-08-28T11:29:49.923
> 
> 标签：extjs, extjs4

Can any body please provide some good resources on **Ext-JS framework?**

I'm going to work on a project and client want to implement *MVC architecture* via **Ext-JS framework**.

Any resource on this to get started with would be appreciated.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-28T11:32:53.420

The best resource is [http://docs.sencha.com/ext-js/4-1/](http://docs.sencha.com/ext-js/4-1/)

It contains:

*   API documentation
*   Guides
*   Videos
*   Examples

# svn - svn - 合并后查看“分支更新”文件的更新？

> ID：12158343
> 
> 赞同：0
> 
> 时间：2012-08-28T11:30:03.843
> 
> 标签：svn, branch, branching-and-merging, svn-merge

我正在 SVN 的一个功能分支上工作，我试图经常从主干中引入更改，这样我就不会太过时了。

我一直在使用命令：`svn merge ^/parent/branch/path`

如何获得两个文件的清晰列表：

1.  父分支更新的文件。
2.  自从我创建分支以来，我在某个时候修改过的文件。

问题是工作副本有大约 3k 的源文件。我的分支更改仅涵盖约 50 个文件。

合并命令为与我的工作无关的文件带来了许多更新。还行吧。我相信 SVN 可以更新这些罚款。

但是，我确实想手动审查合并到我在我的分支中处理过的文件。

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-28T12:43:21.667

看看这对你有没有帮助...

[SVN 合并信息和预览](http://svnbook.red-bean.com/en/1.7/svn.branchmerge.basicmerging.html#svn.branchmerge.basicmerging.mergeinfo)

# c# - 无法评估 list.update() 上显示的异常和访问被拒绝

> ID：12158349
> 
> 赞同：2
> 
> 时间：2012-08-28T11:30:23.897
> 
> 标签：c#, sharepoint, sharepoint-2010, sharepoint-2007, moss

我在 sharepoint 2007 站点上添加了用户控件。当我添加一个项目时，它会被添加，因为我是站点管理员。但是，当我的朋友尝试登录时，它会抛出“无法评估表达式 bcoz 代码已优化或本机框架位于堆栈顶部”在网站上`list.update()`并在网站上显示访问被拒绝错误。

以下是代码：

```
protected void btnOk_Click(object sender, EventArgs e)
{   
    try
    {             
        using (SPSite site = new SPSite("http URL"))
        {
            using (SPWeb web = site.OpenWeb())
            {
                SPList list = web.Lists["List name"];
                UserItem = list.Items.Add();
                UserItem["col 1"] = Data1;
                UserItem["col 2"] = Data2;
                UserItem["col 3"] = Data3;
                UserItem["col 4"] = Data4;
                UserItem["col 5"] = Data5;
                UserItem.Update();
                list.Update();
            }
        }
    }
} 
```

我还尝试了以下网址：

*   [http://frazzleddad.blogspot.in/2011/03/getting-past-sharepoint-exceptions-with.html](http://frazzleddad.blogspot.in/2011/03/getting-past-sharepoint-exceptions-with.html)
*   [http://msdn.microsoft.com/en-us/library/microsoft.sharepoint.spsecurity.catchaccessdeniedexception.aspx](http://msdn.microsoft.com/en-us/library/microsoft.sharepoint.spsecurity.catchaccessdeniedexception.aspx)

但即使这样也行不通。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-29T05:49:31.693

当您的朋友没有所需的特权时，可能会发生这种情况。对于您作为站点管理员来说，一切都很好。您需要做的一件事是修改 btnOk_Click 代码，如下所示。

```
 SPSecurity.RunWithElevatedPrivileges(delegate()
 {
   using (SPSite site = new SPSite("http URL"))
    {
        using (SPWeb web = site.OpenWeb())
        {  
            web .AllowUnsafeUpdates = true;
            SPListItemCollection listitems = web.Lists["List name"].Items;
            SPListItem userItem = listitems.Add();
            userItem ["col 1"] = Data1;
            userItem ["col 2"] = Data2;
            userItem ["col 3"] = Data3;
            userItem ["col 4"] = Data4;
            userItem ["col 5"] = Data5;
            userItem.Update();               
            web .AllowUnsafeUpdates = false;
        }
    }
  }); 
```

试试这个......希望它会工作。

# python - Python 中类的 __key__ 参数

> ID：12158351
> 
> 赞同：7
> 
> 时间：2012-08-28T11:30:32.070
> 
> 标签：python, sorting, key

我有一个向量数组，我想按长度对它们进行排序：

```
class Vector:

     def __init__(self, x, y):
       self.x, self.y = x, y

     def __add__(a, b):
       return Vector(a.x + b.x, a.y + b.y)

     def __str__(a):
       return str(a.x) + ' ' + str(a.y) + '\n'

     def __key__(self):
       return self.x * self.x + self.y * self.y

a = []
a.append(Vector(1,2))
a.append(Vector(1, 1))
a.sort()
print("".join(map(str,a))) 
```

它说：“不可排序的类型：Vector() < Vector()”它要我创建`lt`, `gt`.. 方法。但我想在不使用的情况下进行排序`cmp`。可能吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-28T11:36:13.787

我将实现`__lt__`然后`__eq__`使用[`functools.total_ordering`](http://docs.python.org/library/functools.html#functools.total_ordering)类装饰器来获取其余的比较方法。

如果像这样对向量进行排序没有意义，那么您始终可以使用`key`关键字来`sort`（或`sorted`就此而言）：

```
mylist.sort(key = lambda v: v.x**2 + v.y**2) 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-08-28T11:37:58.947

您在这里有两种变体：`__cmp__`在类中实现函数`Vector`或以这种方式执行排序：

```
...
a.sort(key=Vector.__key__) 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-28T11:35:33.890

[Python 文档说](http://docs.python.org/reference/datamodel.html#object.__lt__)lt/le/gt/ge/eq/ne 是

> [...] 所谓的“丰富的比较”方法，并且优先于 __cmp__() 调用比较运算符

如果你实现一个[`__cmp__(self, other)`](http://docs.python.org/reference/datamodel.html#object.__cmp__)方法，它应该用于比较/排序操作。

# jquery - jQuery 内联编辑选择器

> ID：12158353
> 
> 赞同：0
> 
> 时间：2012-08-28T11:30:36.860
> 
> 标签：jquery, html, css, inline-editing

我在客户端有一个功能性内联编辑脚本，但是我想添加一个按钮，例如`<input type="button" value="edit here">`当有人单击该按钮时，它应该能够像我的悬停选择器一样选择值并生成表单

简而言之，我想将悬停状态选择器删除到单击按钮选择器。

查看代码以了解更多信息：

```
<div id="pesa"><p>PERSONAL INFORMATION</p>
    <ul>
        EMAIL:<li class="editable"><?php echo $email;?></li><input type="button" value="edit here">
        NAME:<li class="editable"><?php echo $name;?></li><input type="button" value="edit here">
        TELLPHONE:<li class="editable"><?php echo $tel;?></li>
        COUNTRY:<li class="editable"><?php echo $country;?></li>
        CITY:<li class="editable"><?php echo $city;?></li>
    </ul>
</div> 
```

谢谢。好的，对不起，我在这里放置代码标签时遇到了麻烦是 js

```
$(document).ready(function() 
{
var oldText, newText;
$(".editable").hover(
    function()
    {
        $(this).addClass("editHover");
    }, 
    function()
    {
        $(this).removeClass("editHover");
    }
);

$(".editable").bind("dblclick", replaceHTML);

$(".btnSave").live("click", 
                function()
                {
                    newText = $(this).siblings("form")
                                     .children(".editBox")
                                     .val().replace(/"/g, "&quot;");

                    $(this).parent()
                           .html(newText)
                           .removeClass("noPad")
                           .bind("dblclick", replaceHTML);
                }
                ); 

$(".btnDiscard").live("click", 
                function()
                {
                    $(this).parent()
                           .html(oldText)
                           .removeClass("noPad")
                           .bind("dblclick", replaceHTML);
                }
                ); 

function replaceHTML()
                {
                    oldText = $(this).html()
                                     .replace(/"/g, "&quot;");
                    $(this).addClass("noPad")
                           .html("")
                           .html("<form><input type=\"text\" class=\"editBox\" value=\"" + oldText + "\" /> </form><a href=\"#\" class=\"btnSave\">Save changes</a> <a href=\"#\" class=\"btnDiscard\">Discard changes</a>")
                           .unbind('dblclick', replaceHTML);

                }
   }
 ); 
```

和CSS

```
 #pesa a{
color: #000;
     }

    #pesa a:hover{
color: #;
     }

    #pesa a:hover{
text-decoration: none;
    }

    h1{
font-size: 30px;
padding: 0;
margin: 0;
    }

    h2{
font-size: 20px;
    }

    .editHover{
background-color: #E8F3FF;
   }

     .editBox{
width: 326px;
min-height: 20px;
padding: 10px 15px;
background-color: #fff;
border: 2px solid #E8F3FF;
    }

    #pesa ul{
list-style: none;
    }

    #pesa li{
width: 330px;
min-height: 20px;
padding: 10px 15px;
margin: 5px;
    }

   li.noPad{
padding: 0;
width: 360px;
   }

   #pesa form{
width: 100%;
  }

.btnSave, .btnCancel{
padding: 6px 30px 6px 75px;
}

.block{
float: left;
margin: 20px 0;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-28T12:16:11.863

```
function replaceHTML()
{
    $(this).removeClass('editHover'); 
} 
```

或者[`toggleClass()`](http://api.jquery.com/toggleClass/)，如果您使用相同的方法添加和删除内联编辑器，请使用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-28T13:48:17.637

**编辑**

所以我在评论中说我改变了 DOM 和其他东西。我觉得给的课太糟糕了:)

**HTML：**

```
<div id="pesa"><p>PERSONAL INFORMATION</p>
    <div class="ul">
        <div>
            EMAIL:<div class="li editable">test</div>
            <input type="button" value="edit here" class="jim"><br>
        </div>
        <div>
            NAME:<div class="li editable">name</div>
            <input type="button" value="edit here" class="jim">
        </div>
        <div>
            TELLPHONE:<div class="li editable">000000000</div>
        </div>
        <div>
            COUNTRY:<div class="li editable">Tazmania</div>
        </div>
        <div>
            CITY:<div class="li editable">Fouilly les oies</div>
        </div>
    </div>
</div> 
```

**JS：**

```
$(document).ready(function(){

$(".editable").hover(
    function()
    {
        if(!$(this).hasClass("noPad")){
            $(this).addClass("editHover");
        }
    },
    function()
    {
        $(this).removeClass("editHover");
    }

);

$(".editable").bind("dblclick", function(){
    replaceHTML(this);
});

$(".jim").bind("click", function(){
    replaceHTML($(this).siblings(".li"));
});

$(".btnSave").live("click",
    function(){
        $(this).parent()
               .html($(this).parent().find("form input").val())
               .removeClass("noPad");
    });

$(".btnDiscard").live("click",
    function(){
        $(this).parent()
               .html( $(this).parent().find("form").data("oldText") )
               .removeClass("noPad");
    });

function replaceHTML(element){
    if( $(element).hasClass("noPad") ){
        return
    }
    var value = $(element).html().replace(/"/g, "&quot;");
    $(element).addClass("noPad")
           .html("<form><input type=\"text\" class=\"editBox\" value=\"" + value + "\" /> </form><a href=\"#\" class=\"btnSave\">Save changes</a> <a href=\"#\" class=\"btnDiscard\">Discard changes</a>");

    $(element).removeClass("editHover");
    $(element).find("form").data("oldText", value);
}

}); 
```

我希望这个新版本对你有好处

您可以在此处找到新的 jsfiddle 示例，并[在此处](http://jsfiddle.net/RWCkE/1/)[找到之前的示例](http://jsfiddle.net/charlesjourdan/RWCkE/9/)

# c# - 如何在空接口方法上使用异步

> ID：12158357
> 
> 赞同：12
> 
> 时间：2012-08-28T11:30:56.440
> 
> 标签：c#, asynchronous, syntax

说我有一个界面

```
interface IFoo {
    Task SomeMethodAsync();
} 
```

我想实现这个接口，但是对于一个类，方法是空白的。

我应该忍受由此产生的警告吗？

```
async Task SomeMethodAsync() {} 
```

或者我应该让它返回一些虚拟任务？

```
async Task SomeMethodAsync() { await Task.Run(() => {}); } 
```

或者还有其他选择吗？

我也想将此方法实现为显式接口方法。这会有什么不同吗？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-08-28T12:51:25.623

返回的方法`Task`不必是`async`.

我会推荐这样的东西：

```
Task IFoo.SomeMethodAsync()
{
  return Task.FromResult(true);
} 
```

我假设如果这是一个同步方法，那么您将只有一个空方法体；这`async`相当于一个空的方法体。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-28T11:38:23.147

这仅取决于您如何决定框架必须处理此类情况。

imo，您有几个选择：

*   引发异常（将立即中断执行，您必须在执行链中的某个位置以某种方式*处理它）。*

*   return `default-value`（这可以是您提供的解决方案：只是一个不做任何事情的空任务。不好的是我调用函数*期望*它做某事，它不会通知我任何事情但也不做任何事情。 Imo，这是糟糕的设计。

*   return some `not-valid-value`，它被调用者拦截，所以调用者“知道”某些事情*是不正常*的。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-06-15T14:58:29.227

我遇到了一个抽象基类。我尝试了 Stephen Cleary 的方法，但在 C# 6 中出现编译器错误。

我的基本方法的一个例子：

```
protected abstract Task OnFoo(Bar bar); 
```

这是我在派生类中必须做的：

```
protected override async Task OnFoo(Bar bar)
{
    await Task.FromResult(true);
} 
```

另一个答案的问题是`return`短语中的关键字。因为 的返回值`Task`本质上是`void`，所以你不能返回任何东西。此外，`await`关键字是必需的。

# python - Django，这是处理 css、js 和图像的奇怪方式

> ID：12158362
> 
> 赞同：-1
> 
> 时间：2012-08-28T11:31:28.450
> 
> 标签：python, django, django-staticfiles

我的问题：我可以简单地忽略所有那些无意义的静态、媒体、collectstatic 和上帝知道什么，并且简单地正常链接我的 css、img 和我的 js 文件吗？

以管理文件为例。我将模板复制到我的项目模板文件夹中以进行编辑。很简单，但是当我想改变css时......哦，男孩。我无法链接任何css文件！只有这个模板愿意找到的 css 位于我的 django 源中......将其更改为任何内容（如 href="/assets/css/admin.css"），但找不到它。我试图编辑 settings.py 文件和那里的静态文件；这显然没有用。

请帮助我：我究竟需要写什么到我的 settings.py 才能具有以下结构并能够正常链接我的文件？

项目

- - 地点

----模板

- - - - 行政

- - - - 地点

- - 资产

--------图片

--------CSS

--------Js

提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-28T12:27:46.347

从 Surviving django.contrib.staticfiles 中提取[（或：如何使用 django 管理静态文件）](http://blog.yourlabs.org/post/30382323418/how-to-manage-static-files-with-django)：

> ### 如何覆盖静态文件
> 
> 想象一下，您想要覆盖`/static_url/admin/css/base.css`. 您要做的第一件事是找到它的位置：
> 
> ```
> >>> ./manage.py findstatic admin/css/base.css
> Found 'admin/css/base.css' here:
>   /home/jpic/env/lib/python2.7/site-packages/django/contrib/admin/static/admin/css/base.css 
> ```
> 
> 然后，将其复制到您`/srv/project/static_dir/`已添加到的 中`settings.STATICFILES_DIRS`（参见上一段），例如：
> 
> ```
> mkdir -p /srv/project/static_dir/admin/css/
> cp /home/jpic/env/lib/python2.7/site-packages/django/contrib/admin/static/admin/css/base.css /srv/project/static_dir/admin/css 
> ```
> 
> 您的副本将驻留在 `/srv/project/static_dir/admin/css/base.css`. 对于`collectstatic`, `/srv/project/static_dir/`具有优先级 `django/contrib/admin/static`，因为 的默认顺序 `settings.STATICFILES_FINDERS`。
> 
> 因此，`collectstatic`将 `/srv/project/static_url/admin/css/base.css`成为您的 override 的副本`/srv/project/static_dir/admin/css/base.css`，而不是原始的`django/contrib/admin/static/admin/css/base.css`

在哪里：

*   `/static_url/`是`STATIC_URL`
*   `/srv/project/static_root/`是`STATIC_ROOT`
*   `/srv/project/static_dir/`是列出的目录`STATICFILES_DIRS`

此外，您必须在部署时运行 collectstatic。

是的，我写这篇文章是因为我认为它可以帮助很多人，他们宁愿阅读一篇只涵盖最常见用例而不是完整文档的简短文章——即。最后期限。

希望这可以帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-28T11:44:44.170

在开发环境中，您可以通过 Django ( [django.contrib.staticfiles](https://docs.djangoproject.com/en/dev/howto/static-files/) ) 提供这些文件。在生产环境中，您可以简单地通过 Apache 等网络服务器提供静态文件（您可以为静态文件目录配置别名）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-28T11:45:47.430

是的，您可以忽略所有用于静态、媒体等的内置`Django`机制。尽管一旦您掌握了它确实很方便。

但是，如果您确实想忽略它，并在资产文件夹中提供资产，则需要考虑两个不同的环境：`development`和`production`.

在开发中，您可以让`Django`运行服务器提供静态资产，只需告诉它在哪里可以找到它们。[查看此处](https://docs.djangoproject.com/en/1.4/howto/static-files/#serving-other-directories)的文档以查看使用该`Django` `serve()`函数执行此操作的示例。

在生产环境中，您只需将服务器配置为在该目录中查找以路径开头的任何`/assets/`内容`URL`。

# android - 在模拟器上运行的命令不在安卓手机上

> ID：12158363
> 
> 赞同：-1
> 
> 时间：2012-08-28T11:31:35.077
> 
> 标签：android, linux, android-emulator, android-binder

我在模拟器上运行了广告外壳并执行了以下命令：-

```
cd /proc
cd binder
cat transaction_log 
```

但是当我在我的安卓手机上运行 adb shell 并运行以下命令时

```
cd /proc
cd binder 
```

**在这里我遇到了一个错误，说不能 cd 到 BINDER**

谁能告诉问题是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-28T11:32:19.573

这只是意味着`/proc/binder/`您的手机上不存在该文件夹...

# visual-studio - 使用 Sitefinity API 以编程方式创建页面

> ID：12158364
> 
> 赞同：1
> 
> 时间：2012-08-28T11:31:36.010
> 
> 标签：visual-studio, api, sitefinity, sitefinity-3x

我想使用 Sitefinity API 以编程方式创建一个页面，我知道要编写哪个代码，但我不知道要创建或编辑哪个文件来插入此代码，请帮助我，这是我要插入的代码， 提前致谢：

Telerik.Cms.CmsManager cmsManager = new Telerik.Cms.CmsManager();

Telerik.Cms.ICmsPage newPage = cmsManager.CreatePage("关于我们");

cmsManager.SavePage(newPage);

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-28T15:09:45.037

I got the answer (From Josh Morales) "it depends what you are trying to accomplish. You could put execute this on a blank webforms page (create a test.aspx page and put it in the code behind) and run that page to execute it. You can also place it in a user control (ascx file) as a widget and drop it on a page to run it. Alternatively you could wrap it in a module, but this is more advanced and probably only necessary if you need something reusable. For more on module creation take a look at the testimonials intra site module example: [http://www.sitefinity.com/documentation/documentationarticles/developers-guide/how-to/how-to-create-a-testimonials-intra-site-module](http://www.sitefinity.com/documentation/documentationarticles/developers-guide/how-to/how-to-create-a-testimonials-intra-site-module)"

# selenium - 关闭firefox的声音？(selenium webdriver 编程)

> ID：12158366
> 
> 赞同：3
> 
> 时间：2012-08-28T11:31:47.727
> 
> 标签：selenium, webdriver

我想知道是否有办法通过 selenium 中的配置文件设置来禁用 firefox 的声音？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-12-04T12:13:00.137

您可以将“media.volume_scale”firefox 属性设置为“0.0”

`FirefoxProfile firefoxProfile = new FirefoxProfile(); firefoxProfile.setPreference("media.volume_scale", "0.0");`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-08T15:29:44.530

如果您对 Flash 或显示的任何其他视频/广告不感兴趣，您可以尝试使用 AdBlock 或 Flash Block 阻止该内容。

如果您有该插件，您可以专门只阻止让您烦恼的视频或该页面中的所有视频，但不能专门阻止所有页面。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-07-29T18:52:56.450

截至2018.07。29,

如果您更新了 selenium 和 firefox 驱动程序（geckodriver）

你应该使用

`profile = webdriver.FirefoxProfile() profile.set_preference("media.volume_scale", "0.0")`

# ios - UIPopover 外观：丑陋的圆角边缘

> ID：12158367
> 
> 赞同：0
> 
> 时间：2012-08-28T11:31:48.990
> 
> 标签：ios, uitableview, uipopover

我将 UITableView 放在 UIPopover 中，并在表格视图的滚动条可见时得到这些白色边缘而不是真正的圆角（并且，过了一段时间，即使没有滚动条）：

![在此处输入图像描述](../Images/662e553aeb01b984faff113a16b35857.png)

这是预期的行为吗？我知道 UIPopover 应该为子视图添加一个带圆角的剪贴蒙版，但我无法想象这会发生吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-28T11:50:45.073

尝试这个：

**编辑**我假设你有 tableView

```
[yourTableView setBackgroundColor:[UIColor clearColor]]; 
```

* * *

```
[yourPopover.contentViewController.view setBackgroundColor:[UIColor clearColor]]; 
```

# c++ - C++ 程序在 VC++ 2010 中编译，但在 Visual C++ 6.0 中没有

> ID：12158370
> 
> 赞同：0
> 
> 时间：2012-08-28T11:31:56.547
> 
> 标签：c++, visual-studio-2010, visual-c++

我不会粘贴整个程序，而只会粘贴包含的文件和错误，因为我很确定，错误本身就在那里！

VS 2010 中包含的文件

```
#include <cstdlib>
#include <windows.h>
#include "iostream"
#include "conio.h"
#include "vector"
#include "math.h"
#include <string.h>
#include <bitset> 
```

Visual C++ 6.0 中包含的文件

```
#include <cstdlib>
#include <windows.h>
#include "iostream"
#include "conio.h"
#include "vector"
#include "math.h"
#include <string.h>
#include <bitset>
#include <String> 
```

好吧，只有一个区别，我`#include <String>`在 Visual C++ 2006 中添加，这个特定的文件减少了读取为的错误

> 错误 C2678: 二进制 '!=' : 未定义运算符，它采用 () 'class std::basic_string,class std::allocator >' 类型的左操作数（或没有可接受的转换）

我在 VS2006 中仍然面临的其他主要错误是

线 ：`str.append(to_string((long double)(value)));`

错误：`error C2065: 'to_string' : undeclared identifier`

线：`vector <vector <float>> distOfSectionPoint, momentAtSectionPoint, preFinalMoment, finalMoments, momentAtSectionPtOnPtLoadProfile ;`

错误：`error C2208: 'class std::vector' : no members defined using this type`

谁能解释 Visual C++ 2006 中出了什么问题？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-28T11:41:33.093

```
错误 C2065：“to_string”：未声明的标识符

```

[`std::to_string()`](http://en.cppreference.com/w/cpp/string/basic_string/to_string)是 VS2010 支持的 C++11 特性。任何早期版本的 Microsoft 编译器都不支持它。另一种选择是[`boost::lexical_cast`](http://www.boost.org/doc/libs/1_51_0/doc/html/boost_lexical_cast.html).

* * *

```
错误 C2208：“类 std::vector”：没有使用此类型定义的成员

```

C++11 和 VS2010 允许使用，[`>>`](http://en.wikipedia.org/wiki/C%2B%2B11#Right_angle_bracket)但 C++11 之前不允许使用。需要改为：

```
vector <vector <float> > distOfSectionPoint,
                    //^ space here 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-28T11:43:59.827

假设`to_string`是`std::to_string`，那么这是一个 C++11 函数，在较旧的编译器中不可用。你可以拼凑一些大致相当的东西，比如

```
template <typename T>
std::string nonstd::to_string(T const & t) {
    std::ostringstream s;
    s << t;
    // For bonus points, add some error checking here
    return s.str();
} 
```

涉及的错误`vector`是由两个右尖括号引起的，较旧的编译器会将其解释为单个`>>`标记。在它们之间添加一个空格：

```
vector<vector<float> >
                    ^ 
```

由于没有 Visual C++ 2006，因此不太清楚您使用的是哪个编译器。如果您实际上是指 Visual C++ 6.0（从 1998 年开始），那么您可能注定要失败。从那时起，有两次主要的语言修订，使得编写该编译器和现代编译器都支持的代码变得非常困难。如果您的意思是 2005 或 2008，那么请小心避免使用 C++11 功能。

# android - 当我按下后退按钮时，如何在 backstack 片段上获得动画？

> ID：12158381
> 
> 赞同：1
> 
> 时间：2012-08-28T11:32:29.793
> 
> 标签：android, android-ui

我正在处理片段过渡，并且我有自定义过渡动画。

```
public class FlipAnimation extends Animation {

public FlipAnimation() {
    setDuration(500);
}

public void applyTransformation(float interpolatedTime, Transformation t) {
    t.getMatrix().reset();
    t.getMatrix().preTranslate((float) Math.random() * 6 - 3,
            (float) Math.random() * 6 - 3);
}
} 
```

现在要将此过渡设置为我的片段，我使用了以下方法

```
public Animation onCreateAnimation(int transit, boolean enter, int nextAnim) {
    FlipAnimatio anim=new FlipAnimatio();
    return anim;
} 
```

但这不会在返回堆栈片段上执行动画。当我按下返回按钮时如何在返回堆栈片段上获取动画？还有谁能解释什么是transit，nextAnim 做什么以及如何使用它们？

# css - 如何在css中做一个解决方法，删除navigator7 vaadin插件页脚中的间距

> ID：12158387
> 
> 赞同：1
> 
> 时间：2012-08-28T11:32:59.090
> 
> 标签：css, vaadin

我将 vaadin 与 navigator7 插件结合使用。在页眉和页脚中，我不会有组件之间的间距。我尝试使用 setSpacing(false) 删除页眉和页脚组件的间距，但它可能由于插件而无法正常工作。所以我尝试使用 css 解决这个问题。下面的示例 ia 测试了 vaadin 生成的输出 html：

```
<!DOCTYPE html>
<html>
<head>
<style type="text/css">
div div .footer-label, .footer-label{
color: green;
width: 100px !important;
}
</style>
</head>

<body>
<div class="my-footer">
<div>
<div style="color: red; height: 20px; width: 482px; overflow: hidden; float: left;    padding-left: 0px; padding-top: 0px; background-color:yellow;">
<div style="float: left; margin-left: 0px;">
<button class="footer-label" style="width: 400px;">Text</button>
</div>
</div>
</div>
</div>
</div>
</body>
</html> 
```

div div 里面有一个按钮。我想让根 div 的宽度与按钮的宽度完全相同。

我以这个 css 代码结束，但它不起作用。根 div 的宽度保持在 482 像素。

```
div div .footer-label, .footer-label{
color: green;
width: 100px !important;
} 
```

**瓦丁密码**

```
 public class MyAppLevelWindow extends HeaderFooterFixedAppLevelWindow {    

    @Override
    protected Component createHeader() {
        ...
    }

    @Override
    protected Component createFooter() {
        HorizontalLayout myFooter = new HorizontalLayout();
        akmedFooter.setSpacing(false);
        akmedFooter.setStyleName("my-footer");

        NativeButton sendProblemButton = new NativeButton("Button");
        sendProblemButton.setStyleName("footer-label");
        myFooter.addComponent(sendProblemButton);
        .....

        return myFooter;
    }

    .............
    } 

```

请帮助我使用 css 解决此问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-29T22:26:08.597

这里的问题是 FixedApplLevelWindow 为从 createHeader() 和 createFooter() 方法返回的页眉和页脚设置了固定宽度。请参阅 FixedApplLevelWindow 中的 pageWidth。这意味着从您的 createFooter() 方法返回的 Horizo​​ntalLayout 获得了这个宽度，并且 Horizo​​ntalLayout 在这种情况下工作，以便它划分布局的子组件的宽度，以便每个组件都获得相同的大小。因此，页脚内的组件之间实际上没有间距，组件的插槽刚好大于组件的宽度。尝试为页脚布局中的组件说 setWidth("100%") 并且“间距”消失了。现在组件使用插槽中的所有可用空间。

解决此问题的一种方法是将组件包装在另一个 Horizo​​ntalLayout 中。Horizo​​ntalLayout 的宽度默认是未定义的（setWidth(null)），这意味着布局从其子项计算其宽度。

```
protected Component createFooter() {
    HorizontalLayout myFooter = new HorizontalLayout();
    myFooter.setStyleName("my-footer");

    HorizontalLayout layout = new HorizontalLayout();

    NativeButton sendProblemButton = new NativeButton("Button 1");
    sendProblemButton.setStyleName("footer-label");
    layout.addComponent(sendProblemButton);

    NativeButton sendProblemButton2 = new NativeButton("Button 2");
    sendProblemButton2.setStyleName("footer-label");
    layout.addComponent(sendProblemButton2);

    myFooter.addComponent(layout);

    return myFooter;
} 
```

有关详细信息，请参阅《Vaadin 之书》中的[6.12 布局格式](https://vaadin.com/book/-/page/layout.settings.html)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-28T11:37:20.193

试试这个

```
div div .footer-label{
color: green;
width: 100px!important;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-28T11:39:57.623

宽度似乎是通过 javascript 或直接内联服务器端设置的。您应该首先防止这种行为，例如通过调用一些 jQuery javascript：

```
$('body > div').css({width: ""}); 
```

然后，这个css应该可以工作

```
body > div{
    width: 100px !important;
} 
```

# c# - 订购清单 通过对象的内部字段

> ID：12158391
> 
> 赞同：2
> 
> 时间：2012-08-28T11:33:05.360
> 
> 标签：c#, linq, list, ienumerable

考虑下面的代码

```
class Pin
{
   string Name; //can be either Numerical or AlphaNum
}

enum Place
{
    Left,
    Right
}

class Map
{
   Pin pin;
   Place Place;
   Rectangle Rect;
} 
```

' `Pin`s`Name`字段只能是数字或字母数字，所以我通过字符串来支持两者。

现在我的问题是，如果我有一个`List<Map>`如何按 Pin 的名称字段对这个列表进行排序？我尝试了下面的代码，但它无法编译：

```
map.Sort((x, y) => x.Pin.Name.CompareTo(y.Pin.Name)); 
//Cannot implicitly convert type 'void' to 'System.Collections.Generic.List<DataModels.PinMap> 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-08-28T11:35:42.047

您显示的代码不会产生该编译器错误。我假设您正在尝试将结果分配给新变量或自身。像这样的东西：

```
map = map.Sort(...); 
```

*这与就地*`List<T>.Sort`排序一样是不可能或没有必要的，即它会更改原始列表，因此不会返回任何内容。因此，简单地删除分配应该会使编译器错误消失。

 *如果您不想要就地排序，只需`Enumerable.OrderBy`结合使用`ToList`来生成一个新列表：

```
var result = map.OrderBy(x => x.pin.Name).ToList(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-28T11:36:18.203

LINQ 救援：

```
var ordered = map.OrderBy(x => x.pin.Name); 
```

当然，假设地图中没有一个大头针是`null`. 如果它可以为空，那么：

```
var ordered = map.Where(x => x.pin != null).OrderBy(x => x.pin.Name); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-28T11:41:39.770

使用 Linq。

```
map = (from a in allAgents
      orderby a.AgentId
      select a).ToList<Map>(); 
```*

# java - 如何以编程方式从颜色名称中获取 RGB 值

> ID：12158392
> 
> 赞同：2
> 
> 时间：2012-08-28T11:33:05.847
> 
> 标签：java, swt

通过知道颜色名称，我们如何以编程方式在 Java 中找到它的红-绿-蓝值？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2014-02-13T13:33:26.430

`javax.swing.text.html.StyleSheet`可用于此：

```
import javax.swing.text.html.StyleSheet;

StyleSheet s = new StyleSheet();
String rgb = "black";
Color c1 = s.stringToColor(rgb);
r1 = c1.getRed();
g1 = c1.getGreen();
b1 = c1.getBlue();

System.out.println(r1 + ", " + g1 + ", " + b1); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-28T12:02:10.027

由于您使用的是 SWT，因此您可以使用[ColorRegistry](http://help.eclipse.org/helios/index.jsp?topic=/org.eclipse.platform.doc.isv/reference/api/org/eclipse/jface/resource/ColorRegistry.html) API。有几种方法可以获取预填充的注册表 (`JFaceResources.getColorRegistry()`和`ITheme.getColorRegistry()`)，尽管从 javadocs 中并不清楚它们预填充的颜色以及颜色定义的来源。

或者，使用创建地图并使用基于 SWT.COLOR_XXX 常量的名称和通过使用获得的颜色值填充它`Display.getSystemColor(...)`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-02-14T15:02:07.967

如果您正在为 Eclipse 平台编写代码，那么该[`ColorUtil#getColorValue`](http://help.eclipse.org/oxygen/index.jsp?topic=%2Forg.eclipse.platform.doc.isv%2Freference%2Fapi%2Forg%2Feclipse%2Fui%2Fthemes%2FColorUtil.html&anchor=getColorValue-java.lang.String-)方法是一种替代方法。

它可以访问`SWT`类中定义的常量的所有颜色，以及系统颜色。

该方法在`org.eclipse.ui.workbench`插件中。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2017-04-15T05:47:05.490

```
Color c= Color.red;
int rgb=c.getRed()*65536+c.getGreen()*256+c.getBlue(); 
```

这是你想知道的吗？

* * *

## 回答 #5

> 赞同：-2
> 
> 时间：2012-08-28T11:40:59.287

您可以从十六进制值获取 rgb 值。

以下代码：

```
Color aColor = new Color(0xFF0096); // Use the hex number syntax
        aColor.getRGB() 
```

# matlab - 如何检查四个点是否形成一个矩形

> ID：12158396
> 
> 赞同：10
> 
> 时间：2012-08-28T11:33:19.717
> 
> 标签：matlab, image-processing, shape-recognition

我正在开发一个形状识别应用程序。此时一组点 (x,y) 由角检测器确定（红点，img. [2](https://i.stack.imgur.com/WJvBS.jpg) .）。其中四个点（在红色框架中，img. [2](https://i.stack.imgur.com/WJvBS.jpg) .）是矩形的顶点（有时是一些变形的矩形）。在其他人中找到它们的最佳方式是什么？

这是输入图像的示例： ![输入图像](../Images/ba72c870d8f7f9313eb40dbef0c28af4.png)

角点检测后看起来像这样：

![检测到角点的图像](../Images/6e5caa025e01abdc006579b178f2c84e.png)

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-08-28T11:45:22.343

这不是您问题的答案 - 这只是建议。

**在我看来，角检测器是检测矩形的一种不好的方法 - 正如mathematician1975**所建议的那样，计算所有点距离需要很长时间。在这种情况下，您必须使用另一种技术：

1.  那个印章是紫色的，所以你应该做的第一件事是颜色分割。
2.  完成**步骤 1**后，您可以使用[Houhg 变换](http://en.wikipedia.org/wiki/Hough_transform)来检测二进制图像上的线条。或者找到图像中的所有轮廓。
3.  最后一步是检测矩形。

**更新：**

这是另一个也适用于灰色图像的解决方案。

1.  做一个阈值将图像转换为 1bit（我使用255 中的**200作为阈值）。**
2.  在新图像中找到面积大于某个常数的所有轮廓（我取了**1000**）。
3.  查找每个轮廓的边界矩形并进行检查：

> ContourArea / BoundingReactangleArea > 常量

我把它`constant`当作**0.9**。

这个算法给了我下一个结果： ![在此处输入图像描述](../Images/e0281ee79649f9547209ceb81a49eef0.png)

这是 OpenCV 代码：

```
Mat src = imread("input.jpg"), gray, result;
vector<vector<Point> > contours;
vector<Vec4i> hierarchy;

result = Mat(src.size(), CV_8UC1);

cvtColor(src, src, CV_BGR2GRAY);
threshold(src, gray, 200, 255, THRESH_BINARY_INV);
findContours(gray, contours, hierarchy, CV_RETR_TREE, CV_CHAIN_APPROX_SIMPLE, Point(0, 0));

result = Scalar::all(0);
for (size_t i=0; i<contours.size(); i++)
{
    Rect rect = boundingRect(contours[i]);
    if (rect.area() > 1000)
    {
        double area = contourArea(contours[i]);
        if (area/rect.area() > 0.9)
        {
            drawContours(result, contours, i, Scalar(255), -1);
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-08-28T11:39:27.893

计算每对 4 个不同点之间的 6 个长度的集合。如果有超过 3 个不同的值，则在这 6 个长度的集合中，您没有矩形（2 个相等的边长加上相等的对角线长度）

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-28T12:11:52.320

您是否知道，通过目视检查点云，您已经可以区分多个矩形？换句话说，如果您不进行某种预选程序，您可能会发现很多矩形......

无论如何，除了@mathematician1975 已经给出的方法之外，您还可以检查边是否（或多或少）平行。

让我们调用@mathematician1975 的方法`method 1`和并行检查`method 2`。然后：

```
%# method 1: 
n1 = |u1-u2|    %#  3 sub., 3 mult, 2 add. per distance
n2 = |u3-u2|    %#  total of 6 distances to compute.
n3 = |u4-u3|    %#  then max 5+4+3+2+1 = 15 comp. to find unique distances
n4 = |u1-u4|    
n5 = |u4-u2|    %#  Total:
n6 = |u3-u1|    %#  12 sub., 18 mult., 12 add, 15 comp

%# method 2:
w1 = u1-u2       %#  3 subtractions per vector
w2 = u3-u2       %#  total of 4 vectors to compute 
w3 = u3-u2
w4 = u1-u4                
                        %#  12 sub.
abs(w1-w3) == [0 0 0]   %#  3 sub., 3 comp., 1 sign.
abs(w2-w4) == [0 0 0]   %#  3 sub., 3 comp., 1 sign.

                        %# Total: 18 sub., 6 comp. 2 sign. 
```

请注意，这些都是最坏的情况；通过一些簿记，您可以大大降低两者的成本。

另请注意，`method 2`需要事先知道顶点的顺序正确。如果不是这种情况，它将使成本增加 4 倍，比`method 1.`.

请问您是如何计算距离的？

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-28T11:53:23.380

考虑你应该有 number`8`但你有 number `7`，然后你要添加 number `1`（称为 delta 或错误更正）来更正它。

以类似的方式有一个delta矩形坐标来校正矩形。检查点（坐标）是否落在增量矩形内。

矩形坐标如下：

```
x+delta,y+delta
x-delta,y+delta
x+delta,y-delta
x-delta,y-delta 
```

让我知道这是否适合您，或者您是否找到了更好的解决方案

# java-me - 低级图形 Java ME 中的用户输入

> ID：12158397
> 
> 赞同：1
> 
> 时间：2012-08-28T11:33:21.307
> 
> 标签：java-me, midp, lcdui

我目前正在使用 j2me 开发移动应用程序，我需要从 Canvas 获取用户输入。

我知道几种在低级图形中创建自定义输入的方法，但我基本上想要的是在屏幕上绘制一个文本框，当人们点击它时，它们会被重定向到手机的默认输入，就像你 在**表单中选择了一个****TextField** . 有没有办法做到这一点？

 *** * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-28T16:47:12.970

在另一个问题上有一个很好的方法：[j2me 中的画布上的文本框](https://stackoverflow.com/questions/3243982/textbox-on-canvas-in-j2me)

> 您可以绘制一个基本文本框并显示一个字符串，当它获得焦点时，您可以将视图切换到该特定文本框。**

# spring-security - Spring框架安全@preauthorize注释在osgi中不起作用

> ID：12158403
> 
> 赞同：0
> 
> 时间：2012-08-28T11:33:50.567
> 
> 标签：spring-security, osgi, eclipse-virgo

我正在将 osgi 与基于弹簧注释的配置一起使用。（使用 virgo 部署应用程序）
方法 impl 上的 @preauthorize 注释不起作用。
尽管没有角色，但它允许用户访问它。

如果我在界面上放置相同的注释，它会为所有用户抛出 AccessDenied 异常。例外：

```
org.springframework.security.access.AccessDeniedException: Access is denied 
 252881 [http-bio-8080-exec-3] ERROR c.w.HomeController  - handleAccessDeniedException####Access is denied 
    at org.springframework.security.access.vote.AffirmativeBased.decide(AffirmativeBased.java:71) 
    at org.springframework.security.access.intercept.AbstractSecurityInterceptor.beforeInvocation(AbstractSecurityInterceptor.java:203
    at org.springframework.security.access.intercept.aopalliance.MethodSecurityInterceptor.invoke(MethodSecurityInterceptor.java:64) 
    at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:172) 
    at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:202) 
    at $Proxy421.save(Unknown Source) 
    at c.w.controllers.HomeController.home(HomeController.java:125) 
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method) 
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39) 
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25) 
    at java.lang.reflect.Method.invoke(Method.java:597) 
    at org.springframework.web.bind.annotation.support.HandlerMethodInvoker.invokeHandlerMethod(HandlerMethodInvoker.java:176) 
    at org.springframework.web.servlet.mvc.annotation.AnnotationMethodHandlerAdapter.invokeHandlerMethod(AnnotationMethodHandlerAdapte
    at org.springframework.web.servlet.mvc.annotation.AnnotationMethodHandlerAdapter.handle(AnnotationMethodHandlerAdapter.java:414) 
```

这是我的配置：

```
 <bean id="expressionHandler"
      class="org.springframework.security.access.expression.method.DefaultMethodSecurityExpressionHandler">
        <property name="permissionEvaluator" ref="aclPermissionEvaluator"/>
  </bean>
  <global-method-security pre-post-annotations="enabled" run-as-manager-ref="runAsManager"
    secured-annotations="enabled">
    <expression-handler ref="expressionHandler" />
  </global-method-security> 
```

我正在使用 spring-security 3.0.4.RELEASE

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-06T12:52:58.893

我在一个包中使用了@Preauthorize 注释，并在另一个包中定义了 global-method-security
将其移动到同一个包后问题得到了解决。

# javascript - 在 jquery 事件中引用 javascript 对象

> ID：12158406
> 
> 赞同：1
> 
> 时间：2012-08-28T11:33:58.950
> 
> 标签：javascript, jquery

我有这个代码。

```
var NotificationsBox={
    HideNotificationBox:function()
    {
          document.getElementById("NotificationBox").style.visibility="hidden"; 
    },
    toggleNotificationBox:function()
    {
        $('#NotificationBox').toggle();             
    },
    SetContainerClick_NotificationHide_Event:function()
    {
        $('#Container').click(this.HideNotificationBox);        
    },
    SetNotificationBoxClick_NotificationToggleEvent:function()
    {
        $('#ShowNotification').click(function(){
            $(this).html("0");
            $(this).css("background-color","#000");

            this.toggleNotificationBox();     ///  <-- PROBLEM
        });
    }

};

NotifyBox=Object.create(NotificationsBox);
NotifyBox.HideNotificationBox();
NotifyBox.SetContainerClick_NotificationHide_Event();
NotifyBox.SetNotificationBoxClick_NotificationToggleEvent(); 
```

现在你可以看到问题所在了。这里`this`将引用`#ShowNotification`和我想在`NotificationBox`这里引用，以便我可以调用该函数。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-28T11:36:05.103

保存对`this`before binding的引用`click`，并使用此引用而不是`this`在`click`事件处理程序中：

```
SetNotificationBoxClick_NotificationToggleEvent:function()
{
    var self = this;
    $('#ShowNotification').click(function(){
        $(this).html("0");
        $(this).css("background-color","#000");

        self.toggleNotificationBox(); //  <-- self will refer to NotificationsBox
    });
} 
```

或者，作为替代方案，使用`NotificationsBox.toggleNotificationBox()`，尽管如果您碰巧更改了变量的名称，这将停止工作`NotificationsBox`：

```
SetNotificationBoxClick_NotificationToggleEvent:function()
{
    $('#ShowNotification').click(function(){
        $(this).html("0");
        $(this).css("background-color","#000");

        NotificationsBox.toggleNotificationBox();
    });
} 
```

# c# - 好的设计 DDD 和 IoC，如何将 IRepository 注入模型

> ID：12158408
> 
> 赞同：3
> 
> 时间：2012-08-28T11:34:00.253
> 
> 标签：c#, domain-driven-design, inversion-of-control

我有一个复杂的实体 ( `Message`)，它有一个庞大的构造函数 (13 个参数)，其中一些参数又是实体 ( `Verb`)。

有很多事情我需要另一个实体的存储库（例如某些默认值）。

使用 IoC 并保持代码干净/最佳实践的好方法是什么？

简化代码（我将默认动词列表作为由静态构造函数亲自构造的静态对象，这是我的 Message 实体需要某种 IRepositry 的最简单的例子）。

```
private static IVerbRepository verbRepository;

static Message()
{
    using (IKernel kernel = new StandardKernel())
    {
        verbRepository = kernel.Get<IVerbRepository>();
    }
}

public Message(int id, string precis,
    DateTime created, DateTime validTo,
    PriorityType priority, Source source, SID createdBy,
    string content = null, string helpText = null,
    DateTime? validFrom = null, bool emailOnExpiry = false,
    IEnumerable<SID> targetUsers = null,
    IOrderedEnumerable<MessageVerb> verbs = null) : base(id)
{
    Verbs = verbs ??
            new List<MessageVerb>
            {
                new MessageVerb(
                verbRepository.GetByName("Acknowledge"), true,
                string.Empty)
            }.OrderBy(x => x.IsDefault);

    Precis = precis;
    Created = created;
    ValidTo = validTo;
    Priority = priority;
    Source = source;
    CreatedBy = createdBy;
    Content = content;
    HelpText = helpText;
    ValidFrom = validFrom;
    EmailOnExpiry = emailOnExpiry;
    TargetUsers = targetUsers;
} 
```

常见的做法似乎是在构造函数中添加一个额外的参数。我不明白这样更好吗？这意味着每次您要创建消息时，都需要编写代码来检索存储库。假设您将其包装在工厂中，那么允许（逻辑上如果不是实际上）为消息实体拥有不同的存储库是没有意义的？

**编辑 1**

基于第一个解决方案，代码会这样，

```
public Message(IVerbRepository verbRepository ...) {  } 
```

在同一域程序集中的其他地方

```
public MessageService
{
    private IVerbRepository VerbRepository {get; set;}
    public static IOrderedEnumerable<MessageVerb> DefaultVerb {get;}
} 
```

在我的 DDD 之外更高（假设我的网络服务接受创建的消息）

```
public class MessageWebService
{
    private static IVerbRepository _verbRepository;

    public void AddMessage(some parameters)
    {
        var message = new Message(_verbRepository, ...);
    }
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-28T11:46:08.257

IoC 有两种风格：您正在使用的*Service Locator*和您正在询问的*Dependency Injection 。*

到目前为止，Service Locator 被认为是一种反模式，因为它引入了隐式依赖项（通过查看类的公共接口无法弄清楚的依赖项）并使测试变得更加困难。

另一方面，依赖注入没有这些问题，但在类声明中往往更加冗长。

现在，关于你的问题。

> 我不明白这样更好吗？

这是明确的。您可以看到您的课程依赖于这个或那个服务。顺便说一句，*你的*班级没有，它只使用动词存储库来定位默认动词（可以很容易地移出课堂）。

> 假设您将其包装在工厂中，那么允许（逻辑上如果不是实际上）为消息实体拥有不同的存储库是没有意义的？

当您想到测试时，它确实如此。您应该可以轻松地用可测试的实现（存根）替换您的 CUT 所依赖的任何服务。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-28T11:52:02.197

领域模型不应该知道数据源 = 不要在其中使用存储库。您可能需要一个可以实现所需业务规则的服务类（服务可以使用存储库）。

看起来你的模型也太胖了。你不能把它分成更小的部分并使用组合吗？

构造函数应该只将所需的信息作为参数。它只是用来表示的。其他一切都可以使用属性设置器或方法进行设置。我倾向于使用私有设置器和公共方法，但它要求您使用基于任务的 UI 而不是 crud（恕我直言，CRUD 不适合 DDD）

# javascript - jQuery touchSwipe 内容滚动功能

> ID：12158414
> 
> 赞同：4
> 
> 时间：2012-08-28T11:34:14.647
> 
> 标签：javascript, jquery, math, mobile, scroll

我正在使用 jQuery 和 touchSwipe 插件来上下滚动内容。我遇到了一些与数学相关的问题，想看看社区是否可以快速帮助我解决这个问题。

touchSwipe“距离”变量仅返回从零开始的正值，因此当用户向上滑动然后决定向下滑动时，问题就出现了，因为距离值从 ex:(0 initial, 15up, 32up, 20up, 5 上、10 下、40 下）。我创建了 4 个 if 语句来捕捉所有这些情况。如何处理“方向变化”if 语句？

touchSwipe：[http ://labs.skinkers.com/touchSwipe/](http://labs.skinkers.com/touchSwipe/)

上下滑动功能：

```
var _scrolling=false;
var _prev=0;
$("#list").swipe({
  swipeStatus:function(event, phase, direction, distance, fingerCount) {
    if(phase=="end"){return false;}
    if(phase=="move" && !_scrolling) {
      var t = parseInt($("#list").css("top").split('px')[0]);
      var s = 0;
      if(direction=="up" && (distance-_prev) > 0){
         //still moving up
         s = t-(distance-_prev);
         _prev=distance;
       } else if(direction=="up" && (distance-_prev) < 0){
          //direction change - moving down    
       } else if(direction=="down" && (distance-_prev) > 0){
         //still moving down
          s = t+(distance-_prev);
         _prev=distance;
       } else if(direction=="down" && (distance-_prev) < 0){
          //direction change - moving up
       }
       _scrolling=true;
       $("#list").animate({ top:s }, 70, function() {_scrolling=false;});   
   }<!--if end-->
  }<!--swipeStatus end-->
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-29T22:06:11.440

所以几天后我解决了这个问题，修改了原来的“swipeStatus”函数，并使用touchSwipe jQuery插件创建了一个非常高效的全功能函数来滚动绝对区域。

**解决方案：**

```
function swipeScroll(c,b,pd,f){
    $(c).swipe({//c style must be position:absolute;top:0; b style must be position:relative;
      swipeStatus:function(event, phase, direction, distance, fingerCount) {
        if(phase=="start"){pd=0;}
        if(phase=="end"){return false;}
        if(phase=="move" && pd!=distance){
          var t = parseInt($(c).css("top"),10);
          var u = (pd-distance);
          if(direction=="up" && t != u){ t+=u; }else if(direction=="down" && t != -u){ t-=u; }
          pd=distance;
          if(t > 0 || $(b).height() > $(c).height()){t=0;}//top of content
          else if(($(b).height()-t) >= $(c).height()){//bottom of content
            t=$(b).height()-$(c).height();
            if(typeof f != "undefined"){f();}
          }
          $(c).css("top",t);
        }
      }
    });
} 
```

**功能参数说明：**

c：您要滚动的绝对内容 b：围绕内容“c”的相对容器 pd：用于存储从上一个滚动移动的距离的变量 f：滚动到达底部时调用的函数

注意：“b”必须是相对位置，“c”必须是绝对位置，top:0

**示例用法：**

```
var distance;
swipeScroll("#list","#body",distance, function() { alert("bottom"); }); 
```

**研究：**

而不是使用 "$(c).css("top",t);" 我还使用 jQuery animate() 函数对此进行了测试，以提供平滑的滑动效果，但这实际上使滚动变得迟缓。动画给出了意想不到的结果，因为当滑动太快时，“t”有时会跳过“0”，并且方向会从“顶部”变为“向下”，导致滚动的内容突然跳跃。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-12-30T16:25:31.723

只是一个说明：使用该行

```
if (phase == "end") { return false; } 
```

将阻止使用点击事件。因此，如果您需要该事件，则必须删除此行。

# java-me - j2me中的HTML文本提取，没有任何HTML标签和特殊字符

> ID：12158416
> 
> 赞同：0
> 
> 时间：2012-08-28T11:34:29.107
> 
> 标签：java-me, lwuit

解析后我有一个来自 RSS 文件的字符串。

字符串 htmlString=

```
<p><img border="1" align="left" width="200" vspace="2" hspace="2" height="133" alt="Prime Minister Manmohan Singh will leave for Iran on August   28, 2012 to attend the Non-Aligned Movement summit, which will   be preceded by crucial bilateral talks with Iran&rsquo;s supreme   leader Ayotollah Ali Khamenei and Iranian President Mahmoud   Ahmadinejad." src="/tmdbuserfiles/manmohan ahmadi(3).jpg" />Prime Minister summit, which will be preceded by crucial bilateral talks with Iran&rsquo;s supreme leader place at a time when the U.S. is pushing India to reduce engagement with Iran and implement sanctions imposed by some countries over its controversial nuclear programme.<br />
    <br />
    &nbsp;</p> 
```

我需要在我的 LWUIT 表单上显示没有任何 HTML 标记且没有来自 htmlString 上方的 HTML 特殊字符的文本，例如：

```
Prime Minister ManmohanSingh will leave for Iran on August 28, 2012 to attend the Non-Aligned Movement summit, which will  
be preceded by crucial bilateral talks with Iran supreme leader Ayotollah Ali Khamenei and Iranian etc...........? 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-28T11:49:44.123

```
 int startIndex = htmlString.indexOf("alt=\"");
    int endIndex = htmlString.indexOf("\"", startIndex+5);
    String resultantString = htmlString.substring(startIndex+5, endIndex);
    resultantString = replaceAll(resultantString ,"&quot;","\"");
    resultantString = replaceAll(resultantString ,"&amp;","&");
    resultantString = replaceAll(resultantString ,"&rsquo;","’");

private String replaceAll(String source, String pattern, String replacement) {
        if (source == null) {
            return "";
        }
        StringBuffer sb = new StringBuffer();
        int index;
        int patIndex = 0;
        while ((index = source.indexOf(pattern, patIndex)) != -1) {
            sb.append(source.substring(patIndex, index));
            sb.append(replacement);
            patIndex = index + pattern.length();
        }
        sb.append(source.substring(patIndex));
        return sb.toString();
    } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-30T15:51:19.580

它还有助于使用 UTF-8 编码打开 HttpConnection 输入流，如下所示：

```
String encoding = "UTF-8";
Reader reader = new InputStreamReader(in, encoding); 
```

使用这套 String Utils 获得干净且格式良好的文本。：

```
 /**
 * Method removes HTML tags from given string.
 *
 * @param text  Input parameter containing HTML tags (eg. <b>cat</b>)
 * @return      String without HTML tags (eg. cat)
 */
public static String removeHtml(String text) {
    try {
        int idx = text.indexOf("<");
        if (idx == -1) {
            text = decodeEntities(text);
            return text;
        }

        String plainText = "";
        String htmlText = text;
        int htmlStartIndex = htmlText.indexOf("<", 0);
        if (htmlStartIndex == -1) {
            return text;
        }
        htmlText = StringUtils.replace(htmlText, "</p>", "\r\n");
        htmlText = StringUtils.replace(htmlText, "<br/>", "\r\n");
        htmlText = StringUtils.replace(htmlText, "<br>", "\r\n");
        while (htmlStartIndex >= 0) {
            plainText += htmlText.substring(0, htmlStartIndex);
            int htmlEndIndex = htmlText.indexOf(">", htmlStartIndex);
            htmlText = htmlText.substring(htmlEndIndex + 1);
            htmlStartIndex = htmlText.indexOf("<", 0);
        }
        plainText = plainText.trim();
        plainText = decodeEntities(plainText);
        return plainText;
    } catch (Exception e) {
        System.err.println("Error while removing HTML: " + e.toString());
        return text;
    }
}

public static String decodeEntities(String html) {
    String result = StringUtils.replace(html, "&lt;", "<");
    result = StringUtils.replace(result, "&gt;", ">");
    result = StringUtils.replace(result, "&nbsp;", " ");
    result = StringUtils.replace(result, "&amp;", "&");
    result = StringUtils.replace(result, "&auml;", "ä");
    result = StringUtils.replace(result, "&ouml;", "ö");
    result = StringUtils.replace(result, "&quot;", "'");
    result = StringUtils.replace(result, "&lquot;", "'");
    result = StringUtils.replace(result, "&rquot;", "'");
    result = StringUtils.replace(result, "&#xd;", "\r");
    return result;
}

/* Replace all instances of a String in a String.
 *   @param  s  String to alter.
 *   @param  f  String to look for.
 *   @param  r  String to replace it with, or null to just remove it.
 */
public static String replace(String s, String f, String r) {
    if (s == null) {
        return s;
    }
    if (f == null) {
        return s;
    }
    if (r == null) {
        r = "";
    }
    int index01 = s.indexOf(f);
    while (index01 != -1) {
        s = s.substring(0, index01) + r + s.substring(index01 + f.length());
        index01 += r.length();
        index01 = s.indexOf(f, index01);
    }
    return s;
}

public static String cleanEncodedString(String str) {
    String resultStr = str;
    String encoding = "UTF-8";

    InputStream in = new ByteArrayInputStream(str.getBytes());
    InputStreamReader isr;
    try {
        isr = new InputStreamReader(in, encoding);

        ByteArrayOutputStream buf = new ByteArrayOutputStream();
        int result = isr.read();
        while (result != -1) {
            byte b = (byte) result;
            buf.write(b);
            result = isr.read();
        }
        resultStr = buf.toString();

        return resultStr;
    } catch (Exception uee) {
        uee.printStackTrace();
    }
    return resultStr;
} 
```

# xcode - 如何在 xcode 中创建动画，如 iPad 上的 zite 启动屏幕

> ID：12158419
> 
> 赞同：0
> 
> 时间：2012-08-28T11:34:46.687
> 
> 标签：xcode

我想创建一个应用程序，其中启动屏幕播放一个简单的动画。

例如，在 iPad 上的 Zite 应用程序中，磁贴在开始时都是聚集在一起的，然后一旦加载，它们就会分散在新闻文章所在的固定位置。

如何创建动画？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-24T06:55:41.867

当您提到一个 iPad 应用程序作为示例时，我猜您希望您的动画在 iOS 上播放，为此，Apple 编写了一个很棒的[核心动画编程指南。](https://developer.apple.com/library/ios/#documentation/Cocoa/Conceptual/CoreAnimation_guide/Introduction/Introduction.html#//apple_ref/doc/uid/TP40004514)

# c - OPENCV 问题在 cvMat (C) 中保存原始矩阵并绘制它

> ID：12158422
> 
> 赞同：0
> 
> 时间：2012-08-28T11:35:06.530
> 
> 标签：c, image-processing, opencv

我对 OpenCv 中的这个问题感到抓狂。我必须读取原始图像，将其保存为二进制文件中的数组，并将其保存在 opencv 中准备的 cvMat 结构中。我做到了，而且似乎可行，我可以访问数据。但我无法绘制它。它显示为许多对角线。我已经在数据矩阵中打印了数字，并且似乎是正确的，只是有时会出现一些 0。这告诉我带有“步骤”字段的东西正在运行，但我不知道。

我在这里写了我的代码，我希望你们中的一些人明白发生了什么。提前非常感谢！我的天啊。

```
#include <stdio.h>//printf;fread...
#include <stdlib.h>//malloc,calloc ...
#include <cv.h>
#include <highgui.h>
// READING IMAGES
int read_raw_image(FILE* filehandler,float*** datamatrix,int* height,int* width);
//THIS READ THE RAW FILE SAVING THE DATA IN A MATRIX [HEIGHT][WIDTH]
char image_file[]="IR.raw";
CvMat image;

//RUBBISH FOR READ THE IMAGE
FILE *Fimage;
int height,width;
float **pimage=(float**)malloc(sizeof(float**));
if((Fimage=fopen(image_file,"rb"))!= NULL)
{
    printf("\n\tFile: %s was opened correctly\n",image_file);
    read_raw_image(Fimage,&pimage,&height,&width);
    fclose(Fimage);
}
else {printf("\n\tFile: %s wasn't opened correctly\n",image_file);return 0;}

//NOW THE PROBLEM
image=cvMat(height,width,CV_32FC1,*pimage);//HEIGHT=640; WIDTH=480; THE NUMBERS ARE FLOATS
printf("%i",image.step);//THE NUMBER GIVEN IS 1920 (480*4)
int i,j;
for(j = 0;j<2;j++)//print just two rows
{
    for(i = 0;i<480;i++)
{
    printf("%f\n",cvmGet(image,j,i));/The numbers showed are well, except some 0's in the middle
        if(*(Aux->data.fl+(j*640)+i)<10)
    {
      printf("piiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiii\n");//MAKE EASY TO SEE THE 0'S
    }
}
     printf("fila:%i\n",j);//Print the number of row at the end
}
 //AND NOW PLOT IT!
cvNamedWindow("win1",CV_WINDOW_AUTOSIZE);
cvShowImage("win1",&image);
cvWaitKey(0);
return 0; 
```

我不知道 image.step 值有什么问题。我测试改变它。当我添加更多时，一些 0 消失了，但图像也没有打印出来。

谢谢你的帮助。我的天啊

PD：剧情……我不能发图！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-03T07:07:13.040

多亏了 Dimitar，我终于实现了解决方案。由于某种原因，每行都以浮点 0 结尾，这在每行中产生了偏移，在图中表示为四个黑点。由于现在每条线都被置换了，结果是置换了 4 个黑点，这似乎是一条对角线。最后对这个0的解释应该是我将数组（它没有出现在代码中）保存为二维动态分配数组的方式，首先我分配了行数，然后分别分配了每一行。但是，保存图像的最佳方式是在一维数组中，只分配一次。当您将其放入 cvMat 或 IplImage 时，代码仅在知道行数、列数和步长（每行的字节长度）的情况下按行和列运行。另外，如果我将原始问题中的步骤更改为 16 字节，我得到的 0 没有被取代，并且作为一个黑色的柱子站在右边。同样重要的是要注意原始文件，对于红外摄像机，阵列中的数字必须缩放到 0 到 1 的比例才能表示为灰度图。谢谢大家的帮助。

# android - 自定义 AlertDialog 中的动画

> ID：12158423
> 
> 赞同：2
> 
> 时间：2012-08-28T11:35:13.037
> 
> 标签：android

我正在使用以下代码为自定义 AlertDialog 中的加载圈设置动画：

```
 public static void create_custom_progress_dialog(Activity activity, String message){
            Context mContext = activity;
            AlertDialog.Builder builder;
            AlertDialog custom_progress_dialog;         

            LayoutInflater inflater = (LayoutInflater)mContext.getSystemService(LAYOUT_INFLATER_SERVICE);
            View layout = inflater.inflate(R.layout.myprogressbar, null);

            TextView tv_message = (TextView) layout.findViewById(R.id.message);
            tv_message.setText("" + message);
            ImageView loading_circle = (ImageView)layout.findViewById(R.id.loading_circle);
            loading_circle.setBackgroundResource(R.anim.progress_anim);

            /////////////My ANIMATION/////////////////
            final AnimationDrawable frameAnimation = (AnimationDrawable)loading_circle.getBackground();
            frameAnimation.setCallback(loading_circle);
            frameAnimation.setVisible(true, true);
            loading_circle.post(new Runnable(){

                @Override
                public void run() {
                    // TODO Auto-generated method stub
                    frameAnimation.start();
                }

            });

            builder = new AlertDialog.Builder(mContext);
            builder.setView(layout);
            custom_progress_dialog = builder.create();
            custom_progress_dialog.show();
        } 
```

图像正在显示，但没有动画。我究竟做错了什么？

# c# - 在同一控件的另一个 onclick 中防止 onclick

> ID：12158432
> 
> 赞同：0
> 
> 时间：2012-08-28T11:35:49.827
> 
> 标签：c#, asp.net, event-handling, onclick

我有一个带有 onclick 事件的按钮

```
<asp:Button ID="btn_Save" runat="server" Text="Save" OnClick="btn_Save_Click"/> 
```

我有这个按钮的第二个 onclick 事件，如下所示。

```
((Button)btn).Click += new EventHandler(SaveClicked); 
```

我调试并看到第一个发生在第二个之前，

我想从第一个取消第二个 onclick。

**为什么我需要 2 个点击事件：** 我有一个 web 控件（BulkEditGridView），它以一个 Button 控件作为参数，并且该控件保存整行。第二次点击事件充当保存整个表格。现在我向我的 web 控件添加了一些字段，并且我想在单击按钮时阻止保存。由于无法修改 webcontrols 事件处理程序（第二次点击事件），我添加了第一个 onclick 事件。我要做的是，如果其中一个字段（例如：文本框字段）为空，则阻止保存 gridview，这可以通过阻止默认单击事件来完成。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-28T11:41:01.177

只需从按钮单击事件中删除第二个事件处理程序。

```
((Button)btn).Click -= new EventHandler(SaveClicked); 
```

但是当您不需要第二个事件处理程序时，为什么要添加它？

您也可以通过反射删除事件处理程序，您可以尝试此代码，但未经测试。

```
BindingFlags AllBindings = BindingFlags.IgnoreCase | BindingFlags.Public | BindingFlags.NonPublic | BindingFlags.Instance | BindingFlags.Static;

List<FieldInfo> lst = new List<FieldInfo>();

foreach (EventInfo ei in btn.GetType().GetEvents(AllBindings))
{
    Type dt = ei.DeclaringType;
    FieldInfo fi = dt.GetField(ei.Name, AllBindings);
    if (fi != null)
        lst.Add(fi);
}

foreach (FieldInfo fi in lst)
{
    EventInfo ei = btn.GetType().GetEvent(fi.Name, AllBindings);
    if (ei != null)
    {
        object val = fi.GetValue(btn);
        Delegate mdel = (val as Delegate);
        if (mdel != null)
        {
            foreach (Delegate del in mdel.GetInvocationList())
                ei.RemoveEventHandler(btn, del);
        }
    }
} 
```

它将删除所有事件处理程序。有关更多信息，您可以查看此链接 [http://www.codeproject.com/Articles/103542/Removing-Event-Handlers-using-Reflection](http://www.codeproject.com/Articles/103542/Removing-Event-Handlers-using-Reflection)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-28T11:40:14.403

我不知道我是否正确理解了您的查询。

使用 -= 删除第一种方法，然后添加第二种方法，然后再次添加第一种方法。

因此，您将首先执行第二种方法。

再次，不确定

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-13T12:41:42.943

可以使用会话变量。

# javascript - 图像缩略图库中的问题下一个和上一个按钮

> ID：12158433
> 
> 赞同：0
> 
> 时间：2012-08-28T11:36:01.830
> 
> 标签：javascript, jquery

对我的实际需要是最初我需要显示 3thumbnail 图像。当我单击下一步时，应显示接下来的三个新缩略图。如果您参考此链接 [http://www.frontendwebhelp.com/javascript/jquery-photo-gallery.php](http://www.frontendwebhelp.com/javascript/jquery-photo-gallery.php)

这正是我所需要的。这里的下一个和上一个按钮功能对于缩略图和大图是不同的。

我不应该使用任何类型的轮播插件来获得这种效果。

这是我尝试过的。

[http://jsfiddle.net/L7yKp/37/](http://jsfiddle.net/L7yKp/37/)

我需要一些帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-28T15:21:02.700

见[http://jsfiddle.net/L7yKp/60/](http://jsfiddle.net/L7yKp/60/)

```
function thumbs(i,incr){
    var num_thumbs=2;
    if(i===null){
        i=$("#thumbs").prop('data-index'),
        i+=num_thumbs*incr;
    }
    i=Math.max(1,Math.min(i,$('#thumbs .UiUx3DSSVFlow').length-num_thumbs+1));
    $("#thumbs").prop('data-index',i);
    $('#thumbs .UiUx3DSSVFlow').hide();
    $('#thumbs .UiUx3DSSVFlow:nth-child(n+'+i+'):nth-child(-n+'+Number(i+num_thumbs-1)+')').show();
}
$("#panel .UiUx3DSSVFlow").not(':first').hide();
$("#thumbs .UiUx3DSSVFlow").click(function(){
    getIndex = $(this).index();
    $("#thumbs .clicked").removeClass('clicked');
    $("#panel .UiUx3DSSVFlow").hide().eq(getIndex).show();  
    $(this).addClass('clicked');
    thumbs(getIndex+1);        
});
$("#thumbs .UiUx3DSSVFlow:first").click();
$("#thumbs").prop('data-index',1);
$([['next',1],['prev',-1]]).each(function(){
    var that=this;
    $('#t'+that[0]).click(function(){
        thumbs(null,that[1]);
    });
    $('#l'+that[0]).click(function(){
        $('#thumbs .clicked')[that[0]]().click();
    });
});
$('#tprev').click(); 
```

# java - 使用 Sqlite 查询，从存储的毫秒中获取日期

> ID：12158443
> 
> 赞同：7
> 
> 时间：2012-08-28T11:36:38.260
> 
> 标签：java, android, datetime-format, android-sqlite

我在我的应用程序中使用 sqlite 数据库，我在其中以毫秒为单位存储日期和时间。现在使用 Sqlite 查询，我试图以“yyyy-MM-dd”格式获取从毫秒到日期的日期时间，但没有得到正确的结果。

我想使用 Sqlite 查询来做到这一点。您的帮助将不胜感激。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-08-29T04:39:39.763

`Datetime`需要 epochtime，它以秒为单位，而您以毫秒为单位。转换为秒并应用。

```
SELECT datetime(1346142933585/1000, 'unixepoch'); 
```

可以从这个小提琴中验证这一点

*   [http://sqlfiddle.com/#!5/d41d8/223](http://sqlfiddle.com/#!5/d41d8/223)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-28T11:42:12.137

尝试：

```
select strftime("%Y-%m-%d", YOUR_DATE_COL) from ....... 
```

# magento - 添加产品视图抵押标签 Magento Enterprise v1.12

> ID：12158444
> 
> 赞同：2
> 
> 时间：2012-08-28T11:36:41.380
> 
> 标签：magento

我正在使用 Magento Enterprise 1.12 并希望将自定义选项卡（交付、视频）添加到产品视图页面，其内容从产品属性中指定。初始化选项卡的脚本如下：

```
//<![CDATA[
    var collateralTabs = new Enterprise.Tabs('collateral-tabs');
        Event.observe(window, 'load', function() {
        collateralTabs.select();
    });
//]]> 
```

除了创建产品属性之外，我真的不确定从哪里开始，所以任何帮助将不胜感激！

亲切的问候

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-06T15:54:34.087

Enterprise 中的选项卡的处理方式与 Community 不同，这可能会导致试图找到解决方案时出现问题。在catalog.xml 中，您会找到带有如下代码的选项卡设置：

```
<block type="catalog/product_view_description" name="product.description" as="description" template="catalog/product/view/description.phtml">
<action method="addToParentGroup"><group>detailed_info</group></action>
<action method="setTitle" translate="value"><value>Details</value></action>
</block> 
```

所以要添加另一个，添加另一个块：

```
<block type="catalog/product_view_description" name="product.video" as="video" template="catalog/product/view/video.phtml">
<action method="addToParentGroup"><group>detailed_info</group></action>
<action method="setTitle" translate="value"><value>Video</value></action>
</block> 
```

然后使用您希望选项卡包含的任何内容创建模板文件 catalog/product/view/video.phtml。

虽然这会很好地添加一个选项卡，但如果您想以正确的 Magento 方式进行添加，则应使用主题的 local.xml 文件中的引用进行添加：

```
<catalog_product_view translate="label">
<reference name="product.info">
    <block type="catalog/product_view_description" name="product.video" as="video" template="catalog/product/view/video.phtml" after="product.attributes">
    <action method="addToParentGroup"><group>detailed_info</group></action>
        <action method="addToParentGroup"><group>detailed_info</group></action>
        <action method="setTitle" translate="value"><value>Video</value></action>
    </block>
</reference>
</catalog_product_view> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-03T07:55:09.247

我不确定，但我认为这对您非常有帮助，请参见以下 URL：-

**Magento Enterprise 选项卡 - 如何在链接中选择特定选项卡？**

[Magento Enterprise 选项卡 - 如何在链接中选择特定选项卡？](https://stackoverflow.com/questions/6526527/magento-enterprise-tabs-how-to-select-specific-tab-in-link)

**试试看，但先看看上面的网址：-**

我会考虑修改课程的启动方式。

```
initialize: function (container) {
    this.container = $(container);
    this.container.addClassName('tab-list');
    this.tabs = this.container.select('dt.tab');
// change starts here //
    var hashTab = $(window.location.hash.slice(1));
    this.activeTab = ( this.tabs.include(hashTab) ? hashTab : this.tabs.first());
// change ends here //
    this.tabs.first().addClassName('first');
    this.tabs.last().addClassName('last');
    this.onTabClick = this.handleTabClick.bindAsEventListener(this);
    for (var i = 0, l = this.tabs.length; i < l; i ++) {
        this.tabs[i].observe('click', this.onTabClick);
    }
    this.select();
} 
```

在这里，我只更改了初始选项卡的选择方式。它检查通常称为散列的 URL 片段，如果它标识了它预选的选项卡之一。作为奖励，如果可能的话，浏览器也会滚动到该元素。

然后您只需要将选项卡的 ID 附加到 URL。例如，您可以通过以下方式生成 URL；

```
$productUrl = Mage::getUrl('catalog/product/view', array(
    'id' => $productId,
    '_fragment' => 'tab_id',
)); 
```

# java - 为什么我不能为 ConcurrentSkipListMap 设置初始容量？

> ID：12158447
> 
> 赞同：5
> 
> 时间：2012-08-28T11:36:46.810
> 
> 标签：java, data-structures

为什么 [ConcurrentSkipListMap](http://docs.oracle.com/javase/6/docs/api/java/util/concurrent/ConcurrentSkipListMap.html)构造函数不允许我们`initial capacity`像[HashMap](http://docs.oracle.com/javase/6/docs/api/java/util/HashMap.html)那样设置？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-28T11:43:15.030

因为此数据结构由多个[LinkedList](http://docs.oracle.com/javase/6/docs/api/java/util/LinkedList.html)支持，对于这些 LinkedList，初始容量构造函数参数没有任何意义。

HashMap 由一个数组（连续内存空间）支持，为其设置初始容量是有意义的，因为超过该表的初始大小会导致 HashMap 重新分配一个大小增加的新表，这是非常昂贵的。

# c# - 有没有办法将匿名委托存储在视图状态中？

> ID：12158449
> 
> 赞同：6
> 
> 时间：2012-08-28T11:36:57.830
> 
> 标签：c#, serialization, delegates, webforms, viewstate

在 a`WebControl`中，我有一个`Filters`这样定义的属性：

```
public Dictionary<string, Func<T, bool>> Filters
{
    get
    {
       Dictionary<string, Func<T, bool>> filters =
               (Dictionary<string, Func<T, bool>>)ViewState["filters"];
       if (filters == null)
       {
          filters = new Dictionary<string, Func<T, bool>>();
          ViewState["filters"] = filters;
       }
       return filters;
    }
 } 
```

这个 webcontrol 是一个`DataSource`，我创建这个属性是因为我想有可能轻松过滤数据，例如：

```
//in page load    
DataSource.Filters.Add("userid", u => u.UserID == 8); 
```

但是，如果我将代码更改为：

```
//in page load    
int userId = int.Parse(DdlUsers.SelectedValue);
DataSource.Filters.Add("userid", u => u.UserID == userId); 
```

它不再起作用，我收到此错误：

> 程序集“...”中的类型 System.Web.UI.Page 未标记为可序列化。

发生了什么 ：

1.  序列化程序检查字典。它看到它包含一个匿名委托（此处为 lambda）
2.  由于委托是在一个类中定义的，它会尝试序列化整个类，在本例中为 System.Web.UI.Page
3.  此类未标记为可序列化
4.  由于 3，它会引发异常。

**有没有方便的解决方案来解决这个问题？**由于显而易见的原因，我无法将使用数据源的所有网页标记为 [可序列化]。

* * *

**编辑1**：我不明白的东西。如果我将 存储`Dictionary`在`Session`对象中（使用`BinaryFormatter`vs `LosFormatter`for `ViewState`），它可以工作！我不知道怎么可能。也许`BinaryFormatter`可以序列化任何类，即使那些不是`[serializable]`？

* * *

**编辑2**：重现问题的最小代码：

```
void test()
{
    Test test = new Test();
    string param1 = "parametertopass";
    test.MyEvent += () => Console.WriteLine(param1);

    using (MemoryStream ms = new MemoryStream())
    {
       BinaryFormatter bf = new BinaryFormatter();
       bf.Serialize(ms, test); //bang
    }
}

[Serializable]
public class Test
{
   public event Action MyEvent;
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-28T11:49:18.977

好问题。我可以确认您的诊断（稍加修正：基础设施尝试序列化可能包含对您的页面的引用的闭包类）。

您可以定义自己的闭包类并将其序列化：

```
[Serializable] class Closure { int userId; bool Filter(User u) { ... } }; 
```

不过，这并不方便。

我建议您使用不同的模式：不要序列化“代码”。序列化过滤器使用的数据：

```
class FilterSettings { int userId; int someOtherFiler; string sortOrder; ... } 
```

尽管我无法指出为什么我更愿意凭直觉知道这是一种更好的方法的确切原因。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-21T11:09:45.270

我找到了一个解决方案，我是这样做的：

我像这样修改了字典定义：

```
Dictionary<string, KeyValuePair<Func<T, object[], bool>, object[]>> 
```

(`KeyValuePair`是可序列化的，就像`Dictionary`)

并创建了一个新`Add()`功能：

```
public void Add(string key, Func<T, object[], bool> filter, params object[] args)
{
    this.Add(key, new KeyValuePair<Func<T, object[], bool>, object[]>
          (filter, args));
} 
```

现在过滤器可以这样设置：

```
int userId = int.Parse(DdlUsers.SelectedValue);
DataSource.Filters.Add("userid", (u, args) => u.UserID == (int)args[0], userId); 
```

它起作用了，因为现在捕获的变量不再是委托的一部分，而是作为委托的参数给出。

# html - jQuery选择器间歇性工作，为什么？

> ID：12158457
> 
> 赞同：7
> 
> 时间：2012-08-28T11:37:36.410
> 
> 标签：html, jquery, jquery-events

我只是想操纵`#content`div 中的元素，但`$('#content')`似乎不起作用，但在其他地方却可以！我的相关代码很简单：

## HTML

```
<body>
  <input type='button' value='Save design' id='save'  />
  <div id="content" style="height: 200px; width:600px;border: 1px solid black;" class='whatev'></div>
</body> 
```

## 脚本

```
$(document).ready(function(){   
   $('#save').click(function(e){
     alert( document.getElementById('content').id); // this works!
     alert($("#content").length); // this works! it outputs "1"
     alert($("#content").id); // this does NOT work - undefined, why?
     //end save function
   });

    $('#content').click(function(e){ 
       // do stuff // ALL of this works!
    });
}); 
```

这就对了。如果您注意到，它确实在某些地方有效（绑定到它的整个点击功能非常好），但在它不起作用的地方，它奇怪地仍然存在，因为`length = 1`. 我也尝试使用上下文来搜索 div，以防万一，（使用`$('#content','body')`），但没有用。

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-08-28T11:41:03.260

DOM 元素和包含 DOM 元素的 jQuery 选择之间是有区别的。jQuery 选择是 DOM 对象的包装器，使其更易于使用。它没有`id`属性，但 DOM 元素有。另一方面，jQuery 确实提供了一种使用以下方法访问元素属性的[`attr`](http://api.jquery.com/attr)方法：

```
document.getElementById('content').id // access the id property of a DOM element
$('#content').attr('id')              // use jQuery to select the element and access the property 
```

然而，该`length`属性是由一个 jQuery 选择提供的，这就是为什么它对你很有效。

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2012-08-28T11:39:44.430

`id`是一个普通的 DOM 属性/属性，适用于普通的 DOM 对象，而不是 jQuery 对象。

您可以在 jQuery 中执行此操作：

```
$("#content").attr('id'); 
```

这等于：

```
document.getElementById('content').id 
```

或者

```
$("#content")[0].id; //[0] gets the first DOM object in the collection 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-08-28T11:39:47.883

试试这个

```
$("#content").attr("id") 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-08-28T11:41:50.053

`$("#content")`返回包含 id 的 elmenent 的 jQuery 集合`content`。`id`是元素的属性，而不是集合的属性。您可以通过将方法链接到集合中来获取元素的 ID `attr()`：

```
alert($("#content").attr('id')); 
```

或者，当`each`收集集合时，传递给的函数内部`each` `this`将是实际元素，因此您可以访问`this.id`

```
$("#content").each(function () {alert(this.id);}); 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-08-28T11:43:26.303

对于这个问题，您应该直接访问 jsfiddle，并访问 jquery 文档了解如何获取 html 元素的属性 -> [http://api.jquery.com/attr/](http://api.jquery.com/attr/)。

jQuery 选择器对象本身没有属性`id`。你必须使用`.attr('id')`函数。

正如你在这个 jsfiddle 中看到的那样，我修复了这个问题，其他一切正常：http: [//jsfiddle.net/AdtrX/1/](http://jsfiddle.net/AdtrX/1/)

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2012-08-28T11:48:31.267

总记得！

在 jQuery 中当你想访问某些`attribute`被选中的元素时，你使用`jQuery`'s `.attr()`API。

现在你说这个， `document.getElementById("content").id`Works，这行的等效`jQuery`声明是

`$("#content").attr('id');`

用于选择属性使用`.attr()` 用于操作样式/css 使用`.css()`

您还可以使用更改所选元素的 CSS 属性`.attr()`

像`.attr('style','your new style');`

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2012-08-28T12:04:25.610

您可以使用 .attr("id") 函数获取 id。使用此代码： ***$("#content").attr("id");***

* * *

## 回答 #8

> 赞同：2
> 
> 时间：2017-06-04T07:34:18.693

是什么让我进入了这个页面

我有这个带有 id 的 div`LING_a_00224.s03`

```
<div id="LING_a_00224.s03" ></div> 
```

当我使用 jquery 选择器来获取它时

```
$("#LING_a_00224.s03") 
```

我得到了`not element`（jquery 选择器不工作）

那是因为`dot (.)`在`the id`

jquery将`interpret`它作为所有元素`id="LING_a_00224" and class="s03"`，而不是所有元素`id="LING_a_00224.s03"`

> 所以请确保 id 选择器不包含像 ( `.`)这样的 jquery 选择器符号

或者如果你`don't have control`超过元素 `ids`，你可以做

```
selector=document.getElementById("LING_a_00224.s03");//JQuery selector sometimes fails because id may contains dot on it like #fn12.e2e
$(selector).jqueryFunction()// wrap the JavaScript object into $() to convert it to jquery object 
```

希望这对你有帮助

# regex - AS3 - 如何正确转义正则表达式

> ID：12158459
> 
> 赞同：2
> 
> 时间：2012-08-28T11:37:39.993
> 
> 标签：regex, actionscript-3, syntax

我在 AS3 中有几个正则表达式，它们是用内联 AS3 正则表达式语法定义的，例如：

*   `/\/\*[\s\S]*?\*\//gm`

我想将其转换为 AS3 RegEx 类构造函数，例如：

*   `new RegExp('/\/\*[\s\S]*?\*\//', "gm")`

我不确定是否必须转义反斜杠。你知道如何转换吗？

* * *

```
 /**  ------------------------- Regular Expressions ---------------------------- */

    public static var multiLineCComments:RegExp     = /\/\*[\s\S]*?\*\//gm;
    public static var singleLineCComments:RegExp        = /\/\/.*$/gm;
    public static var singleLinePerlComments:RegExp = /#.*$/gm;
    public static var doubleQuotedString:RegExp     = /"([^\\"\n]|\\.)*"/g;
    public static var singleQuotedString:RegExp     = /'([^\\'\n]|\\.)*'/g;
    public static var multiLineDoubleQuotedString:XRegExp   = new XRegExp('"([^\\\\"]|\\\\.)*"', 'gs');
    public static var multiLineSingleQuotedString:XRegExp   = new XRegExp("'([^\\\\']|\\\\.)*'", 'gs');
    public static var xmlComments:RegExp                = /(&lt;|<)!--[\s\S]*?--(&gt;|>)/gm;
    public static var url:RegExp                        = /\w+:\/\/[\w-.\/?%&=:@;]*/g; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-28T12:04:30.730

我明白该怎么做。

1.  删除作为`/`AS3 正则表达式语法的一部分的第一个和最后一个。

2.  将结束选项如`g`或`gm`放在第二个参数中。

3.  `\`最后通过用 2 个反斜杠替换每个反斜杠 ( )

总而言之：

*   内联语法：`/\/\*[\s\S]*?\*\//gm`
*   正则表达式语法：`new RegExp ("\\/\\*[\\s\\S]*?\\*\\/", 'gm')`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-28T12:04:19.933

你可以用另一种方式做到这一点：

```
private static const pattern:RegExp = /\/\*[\s\S]*?\*\//;
public static var regex:XRegExp = new XRegExp(pattern.source, "gm"); 
```

# django - 如何将 Django 模型设为只读？

> ID：12158463
> 
> 赞同：24
> 
> 时间：2012-08-28T11:37:53.063
> 
> 标签：django, django-models, django-orm, readonly

是否可以将 Django 模型设为只读？没有创建，更新等。

注意这个问题不同于：

[将 Django 模型设为只读？](https://stackoverflow.com/questions/4334049/make-a-django-model-read-only)（这个问题允许创建新记录）

[整个模型为只读](https://stackoverflow.com/questions/7920371/whole-model-as-read-only)（仅涉及 Django 管理界面 - 我希望模型在整个应用程序中都是只读的）

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2012-08-28T11:39:55.280

覆盖模型的保存和删除方法。您打算如何将对象添加到模型中？

```
def save(self, *args, **kwargs):
     return

def delete(self, *args, **kwargs):
     return 
```

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2018-01-10T18:41:01.220

## 数据库路由器

要采取更多预防措施，您的模型是只读的，您可以使用[DATABASE_ROUTERS](https://docs.djangoproject.com/en/2.0/topics/db/multi-db/#using-routers)设置来禁用基于每个模型的写入：

```
# settings.py
DATABASE_ROUTERS = ('dbrouters.MyCustomRouter', )

# dbrouters.py
class MyCustomRouter(object):
    def db_for_write(self, model, **hints):
        if model == MyReadOnlyModel:
            raise Exception("This model is read only. Shame!")
         return None 
```

我认为这是一项保险单，而不是解决问题的主要方法。例如，Mikael 的回答很好，但并未涵盖所有情况，因为一些 Django 操作绕过`delete`和`save`方法。

请参阅 Django 中的 Juan José Brown 的回答[- 如何为模型指定数据库？](https://stackoverflow.com/questions/3519143/django-how-to-specify-a-database-for-a-model)有关使用数据库路由器的更详细说明。

## 设置数据库用户的权限

然而，即使是数据库路由器方法似乎也存在漏洞，即有一些方法可以绕过您的路由器代码从 Django 发送 SQL。为了**绝对确保**将某些内容设为只读，您应该设置数据库用户的权限。 [这个问题](https://stackoverflow.com/questions/760210/how-do-you-create-a-read-only-user-in-postgresql)描述了如何设置一个只读的 postgreql 用户，该用户可以是 Django 在`settings.DATABASES`.

* * *

## 回答 #3

> 赞同：-3
> 
> 时间：2014-11-12T17:15:05.507

您可以`managed = False`在模型中设置`Meta`：

```
from django.db import models

class MyReadOnlyModel(models.Model):
    class Meta:
        managed = False 
```

> 如果`False`，则不会对该模型执行任何数据库表创建或删除操作。如果模型表示现有表或已通过其他方式创建的数据库视图，这将很有用。

[https://docs.djangoproject.com/en/dev/ref/models/options/#managed](https://docs.djangoproject.com/en/dev/ref/models/options/#managed)

# ios - 在 Uitableview 中显示 Sqlite 数据

> ID：12158465
> 
> 赞同：2
> 
> 时间：2012-08-28T11:37:58.983
> 
> 标签：ios, uitableview, sqlite

抱歉，我自己尝试过，但找不到解决方案我的 viewdidload 方法中有以下代码

```
NSString *docsDir;
NSArray *dirPaths;

dirPaths=NSSearchPathForDirectoriesInDomains(NSDocumentDirectory,NSUserDomainMask,YES);
docsDir=[dirPaths objectAtIndex:0];
databasePath=[[NSString alloc] initWithString: [docsDir stringByAppendingPathComponent: @"database.db"]];

NSLog(@"%@",databasePath);
NSFileManager *filemgr=[NSFileManager defaultManager];

if([filemgr fileExistsAtPath:databasePath]==YES)
{

[self getFinal];
}
else {
    NSLog(@"please order");
}
[super viewDidLoad]; 
```

它调用一个名为 getFinal 的方法，如下所示

```
 sqlite3_stmt  *statement;

const char *dbpath = [databasePath UTF8String];

if (sqlite3_open(dbpath,&database)==SQLITE_OK)
{
    NSString *querySQL = [NSString stringWithFormat: @"SELECT * FROM FINALORDER"];

    const char *query_stmt = [querySQL UTF8String];     
    sqlite3_prepare_v2(database,query_stmt,-1,&statement,NULL);

    if (sqlite3_step(statement) == SQLITE_ROW)
    {
        NSString *itemname = [[[NSString alloc] initWithUTF8String:(const char *) sqlite3_column_text(statement, 1)]autorelease];
        //itemn.text = itemname;

        NSString *qua = [[[NSString alloc] initWithUTF8String:(const char *) sqlite3_column_text(statement, 2)]autorelease];
        //quantity.text = qua;

        NSString *total = [[[NSString alloc] initWithUTF8String:(const char *) sqlite3_column_text(statement, 3)]autorelease];
        //totalcost.text=total;
    }

}
    sqlite3_finalize(statement);
    sqlite3_close(database); 
```

我想以 tableview 格式显示 itemname、qua 和 total。我尝试使用协议并实现委托以及数据源方法，但数据源方法 cellforindexpath 无法识别这些变量，我应该怎么做？谢谢这里是表格视图的代码

```
 - (NSInteger)tableView:(UITableView *)table numberOfRowsInSection:(NSInteger)section
   {
  //I DONT KNOW WHAT TO RETURN HERE..
   }

 - (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath {

static NSString *CellIdentifier = @"Cell";

UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier];
if (cell == nil) {
    cell = [[[UITableViewCell alloc] initWithStyle:UITableViewCellStyleSubtitle reuseIdentifier:CellIdentifier] autorelease];
}

// Set up the cell...
cell.textLabel.text = itemname  //i need to get the itemname here
cell.detailTextLabel.text = qua,total //i need the quantity and the totalcost values   

return cell; 
```

}

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-28T12:15:16.580

您可以使用代码：

```
NSString *itemname, *qua, *total; 
```

内部功能：

```
sqlite3_stmt  *statement;
const char *dbpath = [databasePath UTF8String];

if (sqlite3_open(dbpath, & database) == SQLITE_OK) {
    NSString *querySQL = [NSString stringWithFormat: @"SELECT * FROM FINALORDER"];
    const char *query_stmt = [querySQL UTF8String];

    if (sqlite3_prepare_v2(database, query_stmt, -1, &statement, NULL) == SQLITE_OK) {

       while (sqlite3_step(statement) == SQLITE_ROW) {

          itemname = [[[NSString alloc] initWithUTF8String:(const char *) sqlite3_column_text(statement, 1)]autorelease];
          qua = [[[NSString alloc] initWithUTF8String:(const char *) sqlite3_column_text(statement, 2)]autorelease];
          total = [[[NSString alloc] initWithUTF8String:(const char *) sqlite3_column_text(statement, 3)]autorelease];
       }
    }
sqlite3_finalize(statement);
}
sqlite3_close(database);
[tblView reloadData]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-28T12:29:26.083

为此，您需要一个数组。然后添加到while循环中的代码，例如。

```
listOfItems = [[NSMutableArray alloc] init]; 
[listOfItems addObject:itemname]; 
```

然后，方法：

```
- (NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section {
return [listOfItems count]; } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-28T11:58:15.897

您已将`itemName`等声明为数据源方法不可见的范围内的局部变量。您需要将它们保存为视图控制器的实例变量。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-28T11:45:54.717

为了清晰和简单，您应该使用 Core Data 或至少[FMDB](https://github.com/ccgus/fmdb)作为您和数据库之间的层。

现在对于 TableView 问题，如果您也可以发布一些代码，那就太好了。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2017-04-04T07:33:26.680

```
Please Try This one it might be help you

    +(NSMutableArray*)getData
    {
        NSString *strDestPath = [NSString stringWithFormat:@"%@/Documents/DBEmployee.sqlite",NSHomeDirectory()];
        sqlite3 *db;
        NSMutableArray   *empArr = [[NSMutableArray alloc]init];
        if(sqlite3_open([strDestPath UTF8String] , &db)  == SQLITE_OK)
        {
            NSString *query = @"SELECT * FROM Employee";
            char* err_msg;
            sqlite3_stmt* statement;
            if(sqlite3_prepare_v2(db, [query UTF8String], -1,&statement, &err_msg) == SQLITE_OK)
            {
                while (sqlite3_step(statement) == SQLITE_ROW) {
                    DatabaseKeys *emp = [[DatabaseKeys alloc]init];
                    emp.Eno = sqlite3_column_int(statement, 0);
                    NSString *strn = [NSString stringWithFormat:@"%d",emp.Eno];
                    [empArr addObject:strn];

                }
            }
        }
        return empArr;
    } 
```

# r - 访问通过 file() 创建的文件连接的属性

> ID：12158467
> 
> 赞同：11
> 
> 时间：2012-08-28T11:38:02.453
> 
> 标签：r, file, connection-string, file-connection

我正在通过创建文件连接，`path <- file("C:/test.txt")`并且在打印与连接关联的对象时，我可以**看到**连接的“属性”：

```
> path
  description         class          mode          text        opened 
"C:/test.txt"        "file"           "r"        "text"      "closed" 
     can read     can write 
        "yes"         "yes" 
```

但是，我似乎无法弄清楚如何实际**访问**各种属性值

这是我到目前为止所尝试的：

```
> attributes(path)
$class
[1] "file"       "connection"

$conn_id
<pointer: 0x0000004b>

> path$description
Error in path$description : $ operator is invalid for atomic vectors

> path["description"]
[1] NA

> file.info(path)
Error in file.info(path) : invalid filename argument 
```

有任何想法吗？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-08-28T11:50:14.523

快速浏览一下`base:::print.connection`就会发现您想要`summary(path)`.

```
summary(path)
$description
[1] "C:/test.txt"

$class
[1] "file"

$mode
[1] "r"

$text
[1] "text"

$opened
[1] "closed"

$`can read`
[1] "yes"

$`can write`
[1] "yes" 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-28T11:51:13.670

我能得到的最接近你想要的是使用*summary()*。例如：

```
summary(path)$mode
[1] "rt" 
```

使用*file.info()*的错误是因为该函数需要文件的路径，*即*“C:/test.txt”作为其参数。

# .net - 64 位 .net 上 Int32/Int64 操作的线程安全

> ID：12158475
> 
> 赞同：2
> 
> 时间：2012-08-28T11:38:24.580
> 
> 标签：.net, multithreading

我想我读到 Int32 和 Int64 上的操作在 .Net 中的 64 位系统上是真正的原子操作（即程序集/应用程序编译为 64 位）。

真的吗？

我找不到 MSDN 引用，所以我想我会在这里问你们。

我想知道是否使用 Interlocked 类来检查和减少来自多个线程的 Int32 的值，我将它编译为 64 位应用程序。

MSDN 上这些方法的文档有一些帮助，但我不确定我是否理解正确。

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-28T11:46:56.180

重新增加一个值：

手动*增量* ***永远不能***保证是原子的——不是在 x86 上，也不是在 x64 上；它是四个操作：加载、加载、添加、存储。JIT 可能会发现一个 load-constant-1 ( `ldc_i4_1`/ `ldc_i8`) 并使其更简单一些，但从根本上说：这不是一个单一的原子操作。如果**不**使用某种锁定结构或使用`Interlocked`.

重新分配原子性（又名撕裂值）：

`int`语言规范保证对 (etc) 的操作是原子的；***不保证***对`long`(etc)的操作是. 是的，它们很可能在 x64 上*是*原子的，但问题是：当担心原子性时，您必须处理线程。在处理线程时，您**不会查看**实现，即*发生*了什么 - 因为这***不能保证***，并且您可能关心此代码是否符合其预期。因此，IMO 你必须只关心*什么****是有****保证*的，这意味着：你不能依赖（等）是原子的。********`long`********

 ******相反，使用`Interlocked.Increment`,`Interlocked.Add`等。******

# html - PHP 和 css 链接按钮

> ID：12158479
> 
> 赞同：0
> 
> 时间：2012-08-28T11:38:40.163
> 
> 标签：html, css, hyperlink

我决定为我的登录页面设计一个链接按钮，而不是无聊的按钮。唯一的问题是我不确定如何让它工作。

这是链接按钮之前的代码：

```
 <div id="centerDoc">
    <div id="loginScreen">
     <table width="400" border="0" align="center" cellpadding="0" cellspacing="1" bgcolor="#CCCCCC">
    <tr>
    <form name="form1" method="post" action="">
    <td>
    <table width="100%" border="0" cellpadding="3" cellspacing="1" bgcolor="#FFFFFF">
    <tr>
    <td colspan="3"><strong>User Login </strong></td>
    </tr>
    <tr>
    <td width="78">Username</td>
    <td width="6">:</td>
    <td width="294"><input name="username" type="text" id="username"></td>
    </tr>
    <tr>
    <td>Password</td>
    <td>:</td>
    <td><input name="password" type="password" id="password"></td>
    </tr>
    <tr>
    <td>&nbsp;</td>
    <td>&nbsp;</td>
    <td><input type="submit" name="login" value="Login"></td>

    </tr>
    <tr><td colspan="3"><?php   require_once 'checkLogin.php';   ?></td></tr>
    </table>
    </td>

    </form> 
```

所以唯一的区别是：

```
<td><input type="submit" name="login" value="Login"></td> 
```

我已经添加：

```
<td><a href="#" class="loginButton" name="login" value="login">Log in</a></td> 
```

但正如我怀疑它没有做任何事情。我怎样才能解决这个问题？谢谢。

编辑：我想使用自定义 css 按钮而不是默认按钮。我的理解是，这需要通过链接按钮来完成。但我还需要获取 post 事件，以便`checkLogin.php`可以通过 isset test 进行必要的处理`if (isset($_POST['login'])){`。希望这是有道理的。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-28T11:40:55.943

您可以为输入设置样式以使其看起来不错，但对于链接，您需要包含以下属性：

```
onclick="document.forms[0].submit(); return false;" 
```

根据代码的其余部分，您也可能不需要`name`or属性。`value`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-28T11:42:45.167

快速谷歌搜索“javascript表单提交”

```
<form name="myform" action="handle-data.php">
Search: <input type='text' name='query' />
<a href="javascript: submitform()">Search</a>
</form>
<script type="text/javascript">
function submitform()
{
  document.myform.submit();
}
</script> 
```

编辑：cgoddard 的解决方案更好

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-28T11:53:51.640

您还需要将 loginButton 定义为

```
.loginButton {
    display:block;
    width:90px;
    height:50px;
    background:#ccc;
} 
```

这也需要加载到页面中。

```
<html>
<head>
<title>Test</title>
<style>
.loginButton {
    display:block;
    width:90px;
    height:50px;
    background:#ccc;
}
</style>
</head>
<body>
   <a href="#" class="loginButton" name="login" value="login">Log in</a>
</body> 
```

上面的示例应该适合您。

# android - 如何将 ArrayList 写入文件并检索它？

> ID：12158483
> 
> 赞同：8
> 
> 时间：2012-08-28T11:39:12.300
> 
> 标签：android

现在我试图用这个

```
FileOutputStream fos = getContext().openFileOutput("CalEvents", Context.MODE_PRIVATE);
    ObjectOutputStream oos = new ObjectOutputStream(fos);
    oos.writeObject(returnlist);
    oos.close(); 
```

为了将作为 ArrayList 的“returnlist”保存到文件“CalEvents”中，现在我的问题是，这是正确的方法吗？以及如何检索列表？

提前致谢

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-28T11:45:06.430

这是你想做的吗？

```
FileInputStream fis;
try {
    fis = openFileInput("CalEvents");
    ObjectInputStream ois = new ObjectInputStream(fis);
    ArrayList<Object> returnlist = (ArrayList<Object>) ois.readObject();
    ois.close();
} catch (FileNotFoundException e) {
    e.printStackTrace();
} catch (IOException e) {
    e.printStackTrace();
} catch (ClassNotFoundException e) {
    e.printStackTrace();
} 
```

**编辑：**可以简化：

```
FileInputStream fis;
try {
    fis = openFileInput("CalEvents");
    ObjectInputStream ois = new ObjectInputStream(fis);
    ArrayList<Object> returnlist = (ArrayList<Object>) ois.readObject();
    ois.close();
} catch (Exception e) {
    e.printStackTrace();
} 
```

假设您在一个扩展的类中`Context`（如`Activity`）。如果没有，那么您将不得不在`openFileInput()`扩展的对象上调用该方法`Context`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-03-26T06:44:10.347

使用此方法将您的 Arraylist 写入文件

```
public static void write(Context context, Object nameOfClass) {
    File directory = new File(context.getFilesDir().getAbsolutePath()
            + File.separator + "serlization");
    if (!directory.exists()) {
        directory.mkdirs();
    }

    String filename = "MessgeScreenList.srl";
    ObjectOutput out = null;

    try {
        out = new ObjectOutputStream(new FileOutputStream(directory
                + File.separator + filename));
        out.writeObject(nameOfClass);
        out.close();
    } catch (FileNotFoundException e) {
        e.printStackTrace();
    } catch (IOException e) {
        e.printStackTrace();
    }
} 
```

[此处的完整示例，带有 Read 方法](https://gagandroid.blogspot.in/2015/03/read-or-write-serializable-arraylist.html)

# node.js - 在 expressJS 中捕获所有无效 url 也是在捕获静态或公共文件

> ID：12158494
> 
> 赞同：1
> 
> 时间：2012-08-28T11:39:48.143
> 
> 标签：node.js, connect, express

我正在使用 expressJs 3.x 和节点 0.8.8。在我的应用程序中，我试图捕获所有无效的 url。所以我添加了以下代码。它工作正常，如果我尝试访问公共或静态文件，它也会捕获 url。

```
app.all('/*', function(req, res){
    \\ Do some action like redirecting or whatever ...
}); 
```

如何避免或传递静态文件夹文件（GET 请求）以及如何仅捕获无效 url？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-28T11:48:17.963

最有可能的是，您在`app.use(app.router)`之前调用`app.use(express.static(...))`，因此`express`首先尝试找到匹配的路由，并且只有在没有匹配的路由时它才会尝试查找相应的静态文件。

配置代码应该是这样的：

```
app.configure(function () {
    app.use(express.static(__dirname + '/public'));
    app.use(app.router);
}); 
```

所以这`express`将首先尝试找到一个静态文件。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-28T16:00:38.137

有很多原因`Express`不能区分静态和非静态，这有时可能是一个问题，但它非常灵活。

我不确定你的意思是什么`expressjs have to differentiate static calls`，没有这样的东西`invalid url`，它只是你解释任意字符串的方式。

# javascript - Javascript多选和自动完成插件

> ID：12158498
> 
> 赞同：0
> 
> 时间：2012-08-28T11:40:05.723
> 
> 标签：javascript, jquery, plugins, html-select

我正在寻找一个用于选择框的 js/jquery 插件。

要求如下：

1.  允许多选项目，理想情况下不重复（删除已经选择的项目）
2.  自动完成，如[jquery 自动完成](http://jqueryui.com/demos/autocomplete/)或[选择](http://harvesthq.github.com/chosen/)
3.  应该允许用户输入初始选择中不存在的值。
4.  它应该能够快速研磨大量选项。金额约为3至1万。
5.  它应该能够处理用于自动完成的 unicode 字符。

我以前用过[choose](http://harvesthq.github.com/chosen/)，它符合大多数要求，除了4和5。

这样的东西存在吗？或者至少是一些接近且可用于分叉的东西？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-30T15:47:58.700

当我阅读您的规范时，首先想到的是[Atlassian](http://www.atlassian.com/)的[JIRA](http://www.atlassian.com/software/jira/overview)正在使用的选择框。由于这是迄今为止我遇到的最用户友好/好看的选择器，我将首先提到它。

它：

*   允许多选，显示得非常漂亮： ![在此处输入图像描述](../Images/142d90789538cae6a832de2b226fdbb9.png)

*   具有基于 REST 服务的自动完成功能：

![在此处输入图像描述](../Images/bdc23d48c47ce9c2e66da9733d776cc6.png)

*   允许发布外部值（尽管 JIRA 会在我尝试过的场景中拒绝 POST 之后的值，但这取决于应用程序的逻辑）。
*   由于它使用 REST，它能够在合理的时间内处理的数据量完全取决于您的服务器端代码和服务器规范。
*   JIRA 是 unicode-proof，所以我没有理由相信这个组件不是。请注意，服务器端 REST 服务也应该是 unicode 证明，它们之间的通信也应该是。

Atlassian 在其 API 中将此组件称为[“起泡器控件”：](http://docs.atlassian.com/jira/latest/com/atlassian/jira/webtest/framework/component/fc/FrotherControl.html)

> AJS.MultiSelect JavaScript 控件。有时他们可能被称为“采摘者”。但大多数时候人们只是称它为 Frother Control™。

我找到了上述[AJS.MultiSelect 类](http://code.google.com/p/net-mvc-demo/source/browse/trunk/Research/MultiSelect.js?r=201)的一些来源，但还没有找到包含的许可证，所以我不确定它是否可以自由分叉。我认为 AJS 是 Atlassian 自己的 JavaScript 库，因此它很可能处于商业或受限许可之下。

* * *

您可以调查的另一件事是[Sencha 的 ExtJS4 的 ComboBox](http://docs.sencha.com/ext-js/4-1/#!/api/Ext.form.field.ComboBox)。（[示例](http://docs.sencha.com/ext-js/4-1/#!/example/form/combos.html)）。

这种控制非常灵活、可扩展和可分叉。

我过去曾在各种项目中使用过这个 ComboBox，我可以确认它可以进行多选、外来值、自动完成（本地和/或服务器端）和 unicode。

大多数 Ext 组件都可以单独使用，而无需使用整个框架。过去我们在将 Ext 与 jQuery 结合使用时有些头疼，但我相信这些问题已成为过去。

# javascript - 为粗体定义 ExecCommand 函数？

> ID：12158503
> 
> 赞同：6
> 
> 时间：2012-08-28T11:40:22.247
> 
> 标签：javascript, contenteditable, execcommand

ExecCommand 提供了一种在 iFrame 中加粗文本、斜体、下划线等的方法。

但它缺少创建`<cite>`或`<strong>`或的选项`<em>`（`formatBlock`但仅适用于块元素而不是内联元素）。

我想使用 ExecCommand 函数进行创建`<cite>`-有什么方法可以实现吗？很明显，我想保持完美的解析，就像你在同一个选择中使用它两次时那样，`bold`而不是像这样的东西。`surroundContents`

我正在寻找 ExecCommand 粗体命令的定义或使用现有命令完美添加`<cite>`. 有什么建议么？我无法从浏览器的功能中提取它。当我尝试这样做时，它会说“本机代码”。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-28T19:33:11.973

我看到之前的评论之一中提到了 CKEditor :) 所以这就是我们处理执行命令的方式：

*   我们手动完成**所有**操作。正如您所看到的，DOM API 是不够的，并且浏览器之间的实现有所不同，所以我猜（但我没有检查过）在一个浏览器中包含一些具有应用样式的文本的 HTML 在其他浏览器中不起作用（因为应用了一个浏览器`strong`和第二个`b`或`span`内联样式）。
*   首先，我们需要自定义[Range](http://nightly-v4.ckeditor.com/ckeditor_api/#!/api/CKEDITOR.dom.range)和[Selection](http://nightly-v4.ckeditor.com/ckeditor_api/#!/api/CKEDITOR.dom.selection)实现。你不能使用它们，但是有一个很酷的[Rangy](http://code.google.com/p/rangy/)库。
*   您需要的下一个组件是一组用于应用、删除和检查样式的方法。这是[我们的 impl](http://nightly-v4.ckeditor.com/ckeditor_api/#!/api/CKEDITOR.style)。
*   最后一个组件是琐碎的 -[自定义命令](http://nightly-v4.ckeditor.com/ckeditor_api/#!/api/CKEDITOR.editor-method-execCommand)，因为它很方便模仿 W3C 的 API 和想法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-28T11:45:39.267

我在一年前研究了这个问题，除了在嵌套标签上使用正则表达式而不是 EC 之外找不到任何解决方案。我在不使用 ExecCommand 的情况下开发了我的文本编辑器。

# c# - 跨线程操作无效

> ID：12158505
> 
> 赞同：1
> 
> 时间：2012-08-28T11:40:32.080
> 
> 标签：c#, multithreading

> **可能重复：**
> [为什么我收到此错误：“跨线程操作无效：控制 lbFolders 从创建它的线程以外的线程访问。”？](https://stackoverflow.com/questions/244591/why-am-i-getting-this-errorcross-thread-operation-not-valid-control-lbfolders)
> [在创建窗口句柄之前，不能对控件调用 Invoke 或 BeginInvoke](https://stackoverflow.com/questions/808867/invoke-or-begininvoke-cannot-be-called-on-a-control-until-the-window-handle-has)

我有线程问题。

我每 600 毫秒从 COM 端口获取数据，当我处于调试模式时，我会在几秒钟后收到错误消息，但是当我处于非调试运行模式时，我会在一两分钟后收到错误消息，但错误仍然存​​在。

我得到的错误发生在每个线程上调用的某些函数上。

这是错误的图片：

![错误](../Images/07b682df773c652d1a843c5780fcb049.png)

代码的其他部分：

```
private void LoadData()
        {
            while (td.IsAlive)
            {
                eng.GetSpeedKmh();
                eng.GetEngineRpm();
                eng.GetCalculatedEngineLoadValue();
                eng.GetFuelLevelInput();
                eng.GetEngineTemp();
                eng.MAF();

                System.Threading.Thread.Sleep(600);
            }
        } 
```

我能做些什么来解决这个问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-28T12:27:49.533

试试下面的代码

```
public void eng_OnGetSpeedDone(OBDIIEngineEventArgs args)
        {
            if (this.InvokeRequired)
            {
                Action action = () => eng_OnGetSpeedDone(args);
                Invoke(action);
                return;
            }
            if (!args.OBDResultNoData)
                brzina_ele.Text = arg.OBDValue.ToString();
            else
                brzina_ele.Text = "0";

        } 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-08-28T11:46:46.333

调用 .Text 属性的编辑：

```
this.Invoke((MethodInvoker) delegate { brzina_ele.Text = "Its new value"; }); 
```

您还可以使用 Windows.Forms.Timer 的 Tick 事件进行调用。这更加线程安全，并且拥有您需要的一切。

# java - 如何使用 JDK Logging 手动翻转日志文件

> ID：12158507
> 
> 赞同：1
> 
> 时间：2012-08-28T11:40:36.463
> 
> 标签：java, logging, java.util.logging

我有一个应用程序，它使用 JDK Logging 和一个 logging.properties 文件，该文件通过 java.util.logging.FileHandler.count 配置许多旧日志文件。

在应用程序的某些点，我想触发日志文件的手动翻转以启动新的日志文件，例如在计划的活动开始之前。

JDK日志记录可以做到这一点吗？

在 Log4j 中，我使用以下内容，但是在这种情况下，我想使用 JDK Logging！

```
Logger logger = Logger.getRootLogger();
Enumeration<Object> appenders = logger.getAllAppenders();
while(appenders.hasMoreElements()) {
    Object obj = appenders.nextElement();
    if(obj instanceof RollingFileAppender) {
        ((RollingFileAppender)obj).rollOver();
    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2014-12-30T20:33:35.487

您可以通过创建一个零限制且无附加的一次性 FileHandler 来触发轮换。

`new FileHandler(pattern, 0, count, false).close();`

1.  删除并关闭您现有的 FileHandler
2.  创建并关闭旋转 FileHandler。
3.  使用您的默认设置创建和添加您的 FileHandler。

否则，您可以诉诸使用反射：

```
 Method m = FileHandler.class.getDeclaredMethod("rotate");
        m.setAccessible(true);
        if (!Level.OFF.equals(f.getLevel())) { //Assume not closed.
            m.invoke(f);
        } 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-29T16:32:45.337

您必须编写自己的处理程序才能使轮换工作。[JBoss Log Manager](https://github.com/jboss-logging/jboss-logmanager)之类的东西可以与 JDK 日志一起使用，并且只是替换了 logmanger 部分。它已经有几个不同的[旋转处理程序](https://github.com/jboss-logging/jboss-logmanager/tree/master/src/main/java/org/jboss/logmanager/handlers)。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2016-03-03T13:05:15.850

```
RollingFileHandler fileHandler = new RollingFileHandler(path);
fileHandler.setFormatter( newFormatter );
fileHandler.setLevel(level);
logger.addHandler(fileHandler);

import java.io.ByteArrayOutputStream;
import java.io.File;
import java.io.FileOutputStream;
import java.io.IOException;
import java.text.SimpleDateFormat;
import java.util.Date;
import java.util.Locale;
import java.util.logging.ErrorManager;
import java.util.logging.LogRecord;
import java.util.logging.StreamHandler;

public class RollingFileHandler extends StreamHandler {

    private static String dateFormat = "yyyy-MM-dd"; //default

    private String path = null;

 // Standard-Log-Puffer (vergrößert sich on Demand)
    static ByteArrayOutputStream bas = new ByteArrayOutputStream(1024*200*25);  

    /**
     * Constructor.
     */
    public RollingFileHandler() {
        super();
        setOutputStream(bas);
        // Write old data in Multithread-Environment
        flush();
    }

    public RollingFileHandler(String path) {
        this.path = path;
    }

    /**
     * Overwrites super.
     */
    public synchronized void publish(LogRecord record) {
        if (!isLoggable(record)) {
            return;
        }
        super.publish(record);
    }

    @Override
    public synchronized void flush() {

        // Puffer ist leer
        if (bas.size() == 0) {
            return;
        }

        super.flush();

        File file = null;

        try {

            String dateString = null;

            SimpleDateFormat sdf = new SimpleDateFormat(dateFormat, Locale.getDefault());
            dateString = sdf.format(new Date());
            String fileName = "dummyFile_" + dateString + ".log";

            try {

                // Auf den Servern mapping, bei lokalem Test am Arbeitsplatz brauche ich kein Logfile-Mapping

                boolean windows = System.getProperty("os.name").toLowerCase().indexOf("win") >= 0 ;

                if (!windows 
                        && path != null) {

                    File unixLogDir = new File(path);

                    if (unixLogDir.exists()) {

                        // Versuchen in das neue Directory zu speichern
                        File logfile = new File (path + "/" + fileName);
                        if (!logfile.exists()) {
                            logfile.createNewFile();
                        }
                        file = logfile;
                    }
                } 

            } catch(Exception e) {
                e.printStackTrace();
            }

            if (file == null) {

                // Fallback - Umzug hat nicht geklappt
                file = new File(fileName);
                if (!file.exists()) {
                    file.createNewFile();
                }
            }

            FileOutputStream fos = new FileOutputStream(file,true);
                bas.flush();    
                bas.writeTo(fos);
                bas.reset();
            fos.close();

    } catch (Exception fnfe) {
        reportError(null, fnfe, ErrorManager.GENERIC_FAILURE);
        fnfe.printStackTrace(System.err);
        setOutputStream(System.out); //fallback stream
        try {
            bas.writeTo(System.out);
        } catch (IOException e) {
            // Da kann man nichts machen
        }

    }

} 
```

}

# django - 有没有一种方法可以从 django 数据库中只获取前几条记录

> ID：12158520
> 
> 赞同：0
> 
> 时间：2012-08-28T11:41:23.613
> 
> 标签：django

我正在尝试从数据库中获取酒店记录。我使用了下面的查询，它工作正常。

```
hotels = models.Hotel.objects.filter(wed=True, county=hotel.county.id) 
```

但我只想获取前几条记录（例如：10）而不是获取多条记录并希望减少执行时间......有没有办法......

任何帮助都会很棒......

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-28T11:47:11.920

```
hotels = models.Hotel.objects.filter(wed=True, county=hotel.county.id)[:10] # limit to 10 
hotels = models.Hotel.objects.filter(wed=True, county=hotel.county.id)[5:10] # Slicing 6 to 10 
```

请参阅[限制查询集](https://docs.djangoproject.com/en/dev/topics/db/queries/#limiting-querysets)

# php - 我如何 chmod 在此脚本中上传的文件？

> ID：12158521
> 
> 赞同：0
> 
> 时间：2012-08-28T11:41:24.803
> 
> 标签：php, image, upload, chmod

我有一个上传图片的 PHP 脚本（如下所列）。但是，当上传图像时，它默认为 640 9so 在网络浏览器中被禁止），我需要将其上传为 644。有没有人对如何实现这一点有任何建议？

非常感谢，达伦

```
<?php
class upload
{
/**
* the maximum file size allowed
*/
var $maxFileSize;

/**
* array of valid file extensions
*/
var $validExts;

/**
* directory to upload files to
*/
var $uploadDir;

/**
* name of the file uploaded
*/
var $fileName;

/**
* temporary file name
*/
var $tempFileName;

/**
* name of the file when uploaded
*/
var $uploadedFileName;

/**
* current file size
*/
var $fileSize;

/**
* current file extension
*/
var $fileExt;

/**
* last known error
*/
var $error;

/**
* class constructor
* @return NULL
*/
function upload () {
    $this->setValidExts = array(".jpg", ".gif");
}

/**
* set the valid extensions
* @return boolean
*/
function setValidExts ($exts) {
    $this->validExts = array();
    if (is_array($exts) && sizeof($exts) > 0) {
        $this->validExts = $exts;
    }
    return TRUE;
}

/**
* set a filename
* @return
*/
function setFileName ($name, $ufn = FALSE) {
    $this->fileName = "";
    if (strlen($name) > 0) {
        $this->fileName = $name;
        if ($ufn) {
            $this->setUploadFileName($name);
        }
    }
}

/**
* set the uploaded filename
* @return
*/
function setUploadedFileName ($name) {
    $this->uploadedFileName = "";
    if (strlen($name) > 0) {
        $this->uploadedFileName = $name;
    }
}

/**
* set the temporary file name
* @return
*/
function setTempFileName ($name) {
    $this->tempFileName = "";
    if (strlen($name) > 0) {
        $this->tempFileName = $name;
    }
}

/**
* set the maximum file size
* @return
*/
function setMaxFileSize ($size = 0) {
    $this->maxFileSize = intval($size);
}

/**
* set the upload directory
* @return boolean
*/
function setUploadDir ($dir) {
    $dir = $dir;
    if (is_dir($dir)) {
        $this->uploadDir = $dir;
        return TRUE;
    }
    return FALSE;
}

/**
* validate the extension of the uploaded file
* @return boolean
*/
function validateExt () {
    $this->fileExt = strtolower(strrchr($this->fileName, "."));
    if (sizeof($this->validExts) == 0) {
        return TRUE;
    }

    foreach ($this->validExts AS $key => $value) {
        if ($value == $this->fileExt) {
            return TRUE;
        }
    }
    return FALSE;
}

/**
* validate the size of the file
* @return boolean
*/
function validateSize () {
    $this->fileSize = filesize($this->tempFileName);
    if ($this->fileSize <= $this->maxFileSize || $this->fileSize == 0) {
        return TRUE;
    }
    return FALSE;
}

/**
* validate the upload directory
* @return boolean
*/
function validateUploadDir () {
    if (is_writable($this->uploadDir)) {
        return TRUE;
    }
    $this->error = $this->uploadDir. " is not writeable";
    return FALSE;
}

/**
* check the error code
* @return boolean
*/
function checkError () {
    switch ($_FILES['error'])
    {
        case UPLOAD_ERR_OK:

            return TRUE;
            break;

        case UPLOAD_ERR_INI_SIZE:
        case UPLOAD_ERR_FORM_SIZE:
        case UPLOAD_ERR_PARTIAL:
        case UPLOAD_ERR_NO_FILE:
        case UPLOAD_ERR_NO_TMP_DIR:
        default:

            return FALSE;
            break;
    }
}

/**
* the upload function
* @return boolean
*/

function uploadFile () {
    if (!$this->checkError()) {
        return FALSE;
    }

    if ($this->validateUploadDir() && $this->validateExt()) {
        if (is_uploaded_file($this->tempFileName)) {
            if (move_uploaded_file($this->tempFileName, $this->uploadDir . $this->uploadedFileName . $this->fileExt)) {
                return TRUE;
            }
        }
    }
    return FALSE;
}

/**
* resize an image
* @return
*/
function thumbnail ($filename, $new_w, $new_h) {
    $filename = $this->uploadDir . $filename . $this->fileExt;
    if (preg_match('/jpg|jpeg/', $this->fileExt)) {
        $src_img = @imagecreatefromjpeg($this->uploadDir . $this->uploadedFileName . $this->fileExt);
    } elseif (preg_match('/gif/', $this->fileExt)) {
        $src_img = @imagecreatefromgif($this->uploadDir . $this->uploadedFileName . $this->fileExt);
    }

    // get image details
    list($old_x, $old_y) = getimagesize($this->uploadDir . $this->uploadedFileName . $this->fileExt);

    // create new imge
    $dst_img = imagecreatetruecolor($new_w,$new_h);
    imagecopyresampled($dst_img, $src_img, 0, 0, 0, 0, $new_w, $new_h, $old_x, $old_y);

    // save the new image
    if (preg_match('/jpg|jpeg/', $this->fileExt)) {
        @imagejpeg($dst_img, $filename);
    } elseif (preg_match('/gif/', $this->fileExt)) {
        @imagegif($dst_img, $filename);
    }

    // memory saving
    imagedestroy($dst_img); 
    imagedestroy($src_img);
    return TRUE;
}

/**
* delete an image
* @access public
* @return boolean
*/
function deleteImage ($name) {
    for ($i = 0; $i < (sizeof($this->validExts) - 1); $i++) {
        @unlink($this->uploadDir.$name.$this->validExts[$i]);
    }
    return TRUE;
} 
```

}

?>

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-28T11:46:35.587

尝试编辑此部分

```
function uploadFile () {
    if (!$this->checkError()) {
        return FALSE;
    }

    if ($this->validateUploadDir() && $this->validateExt()) {
        if (is_uploaded_file($this->tempFileName)) {
            if (move_uploaded_file($this->tempFileName, $this->uploadDir . $this->uploadedFileName . $this->fileExt)) {
                return TRUE;
            }
        }
    }
    return FALSE;
} 
```

对此：

```
function uploadFile () {
    if (!$this->checkError()) {
        return FALSE;
    }

    if ($this->validateUploadDir() && $this->validateExt()) {
        if (is_uploaded_file($this->tempFileName)) {
            if (move_uploaded_file($this->tempFileName, $this->uploadDir . $this->uploadedFileName . $this->fileExt)) {
                // Try to change permissions
                if (chmod($this->uploadDir . $this->uploadedFileName . $this->fileExt, 0644)) {
                    return TRUE;
                }
            }
        }
    }
    return FALSE;
} 
```

可能是您没有更改文件权限的权限，或者 PHP 配置限制了`chmod()`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-28T11:46:51.313

您可以使用[`chmod`](http://lv.php.net/manual/en/function.chmod.php)

```
<?php
// Read and write for owner, nothing for everybody else
chmod("/somedir/somefile", 0600);

// Read and write for owner, read for everybody else
chmod("/somedir/somefile", 0644);

// Everything for owner, read and execute for others
chmod("/somedir/somefile", 0755);

// Everything for owner, read and execute for owner's group
chmod("/somedir/somefile", 0750);
?> 
```

# visual-c++ - 取消组合框值更改

> ID：12158522
> 
> 赞同：1
> 
> 时间：2012-08-28T11:41:28.743
> 
> 标签：visual-c++, ccombobox

1.  用户在 CComboBox 中选择一个新值。
2.  调用函数 OnCbnSelchangeXXX()。

有没有办法让我取消函数中CComboBox中值的变化？在某些情况下，应该取消更改，CComboBox 保留旧值，并向用户显示错误消息。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-28T22:20:50.953

没有标准的方法。您必须手动对其进行编码。在每次调用时保留组合框的旧选择值`OnCbnSelchangeXXX()`，检查条件并在满足时恢复它。

# wpf - 如何在 XAML 中绘制一个“毡笔”风格的圆圈而不结束连接

> ID：12158526
> 
> 赞同：3
> 
> 时间：2012-08-28T11:41:48.757
> 
> 标签：wpf, xaml

我正在使用 XAML 设计一个 Metro Style 应用程序，并且我需要画一个圆圈，使末端没有正确地相遇，就好像它是用红毡笔潦草地写的一样。像这样的东西：

![在此处输入图像描述](../Images/567aee4657774aa624ac61aa733a83f1.png)

这怎么能在 XAML 中完成？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-28T12:16:59.620

好的，准备一点 XAML：

```
<Path Grid.Row="1" Grid.Column="1" Margin="10"              
        Stroke="Red" StrokeThickness="5">
    <Path.Data>
        <PathGeometry>
            <PathGeometry.Figures>
                <PathFigureCollection>
                    <PathFigure IsClosed="False" StartPoint="5,50">
                        <PathFigure.Segments>
                            <PathSegmentCollection>

                                <ArcSegment Point="50,5" Size="80, 40" SweepDirection="Clockwise" />
                                <ArcSegment Point="95,50" Size="50, 50" SweepDirection="Clockwise" />
                                <ArcSegment Point="50,95" Size="50, 50" SweepDirection="Clockwise" />
                                <ArcSegment Point="5,55" Size="55, 100" SweepDirection="Clockwise" />

                            </PathSegmentCollection>
                        </PathFigure.Segments>
                    </PathFigure>
                </PathFigureCollection>
            </PathGeometry.Figures>
        </PathGeometry>
    </Path.Data>
</Path> 
```

此代码产生：

![在此处输入图像描述](../Images/0f7981d5b7c904cb00400c0b03e13046.png)

您可以稍微调整坐标以获得更| 更圆的结果，并且可能使用 BezierSegments。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-28T11:47:03.513

[您可以使用XAML 中的可用形状](http://msdn.microsoft.com/en-us/library/ms747393.aspx)绘制一个没有轮廓的封闭形状，用红色填充。特别是，您可以将形状轮廓基于[BezierSegment](http://msdn.microsoft.com/en-us/library/system.windows.media.beziersegment.aspx)。

# c# - 替换多个文件中的文本但保留原始文本

> ID：12158529
> 
> 赞同：2
> 
> 时间：2012-08-28T11:41:51.207
> 
> 标签：c#, winforms

（Visual Studio C# 2010，Windows 窗体应用程序）嘿，我想替换 .txt 文件中的一些单词。我知道该怎么做，但我也不知道如何保留原始文件。我想将修改后的文本输出到与输入文件不同名称的文件中。否则，没有简单的方法进行比较，因为原始文件被覆盖......

这就是我到目前为止所得到的。

```
this.openFileDialog1.Filter =`enter code here`"TEXT (*.xml;*.txt|";
this.openFileDialog1.Multiselect = true;
this.openFileDialog1.Title = "My text editor";
DialogResult dr = openFileDialog1.ShowDialog();

if (dr == DialogResult.OK)
{
    foreach (String file in openFileDialog1.FileNames)
    {
        try
        {
            StreamReader reader = new StreamReader(file);
            string content = reader.ReadToEnd();
            reader.Close();

            content = Regex.Replace(content, "play", "player");
            content = Regex.Replace(content, "game", "gamer");
            content = Regex.Replace(content, "walk", "walking");
            StreamWriter writer = new StreamWriter(file);
            writer.Write(content); writer.Close(); 
        }
        catch
        { // The user lacks appropriate permissions to read files, discover paths, etc. MessageBox.Show("Security error. Please contact your administrator for details.\n\n" + "Error message: Not found" ); } {
        }
      }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-28T11:47:31.980

在您的代码中，您使用*相同*的文件进行读取和写入 - 您只需写入与正在读取的文件不同的文件。

```
StreamReader reader = new StreamReader(file);
string content = reader.ReadToEnd();
reader.Close();

...

StreamWriter writer = new StreamWriter(some_other_file); // <--- here
writer.Write(content); 
writer.Close(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-11T21:58:25.323

确保这样做：

使用 System.Text.RegularExpressions；

# ajax - Rails 3 和 Ajax

> ID：12158531
> 
> 赞同：1
> 
> 时间：2012-08-28T11:42:01.097
> 
> 标签：ajax, ruby-on-rails-3

我需要更新我的 index.html.erb 文件（用于产品），但无需重新加载整个页面。例如，我有一个名为“Sold”的列，它的值为“YES”或“NO”。我有一个更新这些值的后台 rake 任务，但我希望我的索引文件更新为，向用户显示哪些产品已售出。我不知道如何从 rake 任务中调用这种更改。请问有什么帮助吗？我看到的大多数 ajax 和 rails 3“教程”主要处理用户到服务器的交互，而不是服务器到用户的交互。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-28T12:14:32.643

获取服务器更新的[方法](http://en.wikipedia.org/wiki/Push_technology)有很多。

*   轮询（setTimeout 每隔一段时间发出一个 ajax 请求）
*   长轮询（facebook 使用什么）
*   Comet（阻止请求，在定期注入 javascript 时不让它完成，类似于长轮询）
*   WebSockets（html5 的东西）
*   Flash/Java 小程序等

通常一个简单的轮询——每隔这么多秒就可以完成这项工作。-> ( [asciicast](http://railscasts.com/episodes/229-polling-for-changes?view=asciicast) )

[这](http://dsheiko.com/weblog/websockets-vs-sse-vs-long-polling)是不同方法的比较。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-28T12:15:57.090

您可能会在您的产品索引页面上添加 javascript 代码来 ping 您的服务器以定期（每 n 秒）获取产品的状态。如果您的页面上有很多产品，这可能是一个昂贵的电话。所以我会在你的身上有这样的东西`index.html.erb`

```
<script type="text/javascript">
  $('document').ready(function() {
    $.ajax({
      method: 'get',
      url : 'products/ping',
      dataType : 'json',
      success: function (json) {
        // iterate through json objects and update their respective sold status
        // on page.
      }
    });
</script> 
```

然后将 ping 路由添加到您的产品控制器，该控制器基本上以 JSON 对象响应，其中包含您要在视图上更新的产品的状态和 id。因此，当 Ajax 请求完成并获得 JSON 对象时，迭代产品并根据其 id 更新该产品的状态。因此，您对产品控制器的操作将如下所示：

```
# app/controllers/products_controller.rb
def ping
  respond_to do |format|
    products_sold_statuses = {}
    format.json do
      Products.all.each do |product|
        # add product sold status and probably id to products_sold_statuses
      end
      render :json => product_sold_statuses, :layout => false
    end
  end
end 
```

该代码未经测试，因此只需将其用作构建解决方案的基础。它还假设您使用的是 JQuery。

# android - 具有间隔任务的非粘性服务

> ID：12158535
> 
> 赞同：2
> 
> 时间：2012-08-28T11:42:05.060
> 
> 标签：android, intentservice

假设以下代码：

```
public class MyApplication extends Application {

    @Override
    public void onCreate()
    {
        super.onCreate();
        getApplicationContext().startService(new Intent(getApplicationContext(), MyService.class););
    }
}

public class MyService extends IntentService {

    private Handler mLoadContactsHandler;

    public MyService() {
        super(MyService.class.getName());
        myHandler = new Handler();
    }

    @Override
    public int onStartCommand(Intent intent, int flags, int startId) {

        super.onStartCommand(intent, flags, startId);
        return START_NOT_STICKY;
    }

    @Override
    protected void onHandleIntent(Intent intent)
    {    
        int delay = intent.getIntExtra("delay", 1000 * 60 * 5);
        myHandler.postDelayed(updateTask, delay);
    }

    private Runnable updateTask = new Runnable() {
        public void run() {

            Thread thread = new Thread()
            {
                public void run()
                {
                    ... some task ...
                }
            };
            thread.start();

            myHandler.postDelayed(this, 1000*60*15);
        }
    };
} 
```

即使我退出应用程序，该服务会继续运行吗？（退出就像使用后退按钮关闭应用程序一样）

我的意思是，服务从未真正完成。如果应用程序已关闭，如何使服务退出。当然，我希望它完成它正在做的事情。

编辑。只要应用程序正在运行，我希望服务在其间隔内继续运行。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-28T11:52:57.867

改用[IntentService](http://developer.android.com/reference/android/app/IntentService.html)以便 Android 系统对其进行管理（例如在完成时停止服务等）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-28T15:28:25.357

```
Would this service keep running even if I exit the app? (Exit as in closing the app using back-button)<p> 
```

是的，除非 android 杀死它，否则它会继续运行，它每天会执行几次。

```
How can I make the service quit if the app has been shut down. Of course, I would like it to finish what it's doing.<p> 
```

AFAIK，可以知道活动/服务何时被销毁，但无法知道应用程序何时被销毁（因为android喜欢让应用程序在内存中保持活动状态，因此没有固定时间）。所以，我建议你 `stopSelf();`在你的线程的 run() 方法的最后一行调用。在您的线程完成手头的任务后，这将停止您的服务。

```
public void run()
                {
                  //  ... some task ...

                stopSelf();
                } 
```

# apache - Apache - 重新路由

> ID：12158537
> 
> 赞同：0
> 
> 时间：2012-08-28T11:42:06.603
> 
> 标签：apache, mod-rewrite, redirect, url-rewriting, apache2

好的，这是一些递归的东西，我不知道如何在 Apache 中做到这一点。我想要这个：我有一些文件夹，比如说`test.web.com`, `website`。现在这是应该发生的：

1) 访问时`(.*).(.*).[...].test.web.com`，检查该目录是否存在。如果没有，请尝试是否`(.*).[...].test.web.com`存在。（所以高一级）。在这种情况下重复步骤 1。因此，例如，当我访问时`a.b.test.web.com`，它会首先检查是否`a.b.test.web.com`存在，如果存在，它将加载该文件夹。如果不存在，它将测试`b.test.web.com`，如果不存在，它将测试`test.web.com`最终存在的！

2）当仍然没有文件夹存在时，使用该`website`文件夹。所以比如我去的时候`bla.web.com`，找不到这样的目录，所以会加载`website`。

我怎样才能得到这个工作？

# java - Swing中绘图面板的清晰前景

> ID：12158538
> 
> 赞同：3
> 
> 时间：2012-08-28T11:42:07.633
> 
> 标签：java, swing, graphics, jpanel

制作[这个](https://stackoverflow.com/questions/12137465/mouseevent-on-jpanel-wrong-coordinate)画笔程序我决定我要清除面板容器（`panel2`在链接代码中）。我用过`PanelName.setForeground(null)`，效果很好。我想知道的是这种方法和其他从容器中删除图形对象的方法是否存在已知的缺点。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-28T11:57:23.040

如果你覆盖`paintComponent`，你可以清除它的`Graphics`using [`Graphics#clearRect`](http://docs.oracle.com/javase/7/docs/api/java/awt/Graphics.html#clearRect%28int,%20int,%20int,%20int%29)。但总的来说，我更喜欢你的方法，因为我的方法需要你要么 subclass `JPanel`，要么匿名声明一个。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-28T13:49:28.387

The converse of @mre's answer is that "It is up to the look and feel to honor this [property](http://docs.oracle.com/javase/7/docs/api/javax/swing/JComponent.html#setForeground%28java.awt.Color%29), some may choose to ignore it." I don't know of a `PanelUI` that ignores the foreground color, but it's something to be aware of when testing.

Addendum: As @kleopatra comments, the [`JComponent@setForeground()`](http://docs.oracle.com/javase/7/docs/api/javax/swing/JComponent.html#setForeground%28java.awt.Color%29) API links to the [`Component#getForeground()`](http://docs.oracle.com/javase/7/docs/api/java/awt/Component.html#getForeground%28%29) API, which notes the following: "if this component does not have a foreground color, the foreground color of its parent is returned."

# wcf - 使用 RESTful Web 服务

> ID：12158539
> 
> 赞同：1
> 
> 时间：2012-08-28T11:42:08.813
> 
> 标签：wcf

我想使用第三方 RESTful Web 服务，它公开 GET 请求的方法。GET 请求将在 Windows 服务 + 计时器中执行，它们都返回 JSON。

如果可能的话，我希望使用 WCF 库来反序列化 JSON -> POCO，同时实现前向兼容性。据我了解，后者是通过实现 IExtensibleDataObject 的 DataContracts 实现的。我可以使用这种方法来使用 3rd 方 restful (JSON) Web 服务吗？

任何反馈表示赞赏。谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-28T12:40:40.653

听起来您正在尝试使用 WCF 客户端库来使用第三方服务。WCF 客户端库旨在使用已定义的服务契约，无论是来自 WSDL 文档还是来自具有`ServiceContract`类以及相关`OperationContract`和`DataContract`标记的方法和类的程序集。您可以使用客户端库来使用 JSON，但您几乎必须将第三方服务“重新创建”为基于 soap 的服务来生成 WSDL 或`ServiceContract`为服务合同编写程序集。

查看这篇[简短的 CodeProject 文章](http://www.codeproject.com/Articles/167159/How-to-create-a-JSON-WCF-RESTful-Service-in-60-sec)，了解如何创建 WCF JSON 输出*服务*以及如何在 WCF 中配置[WebHttpBinding](http://msdn.microsoft.com/en-us/library/system.servicemodel.webhttpbinding.aspx)。

至于使用`IExtensibleDatObject`JSON，这篇[其他 CodeProject 文章](http://www.codeproject.com/Articles/33063/Consuming-JSON-data-in-NET-with-WCF)有一些很好的信息，但我认为它不适用于您的场景，因为您必须控制第三方服务合同。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-10-17T08:12:22.750

在 IService1.cs 页面中：-

```
[OperationContract]
[WebInvoke(Method = "GET", ResponseFormat = WebMessageFormat.Json, BodyStyle = WebMessageBodyStyle.Wrapped, UriTemplate = "Json/{id}")]
string myfun(string id); 
```

在 Service1.cs 页面中：-

```
public string myfun(string id)
{
    string ConnectString = "server=localhost;database=test_local;integrated security=SSPI";
    string QueryString = "select * from tbl_af_register where id=" + id;

    SqlConnection myConnection = new SqlConnection(ConnectString);
    SqlDataAdapter da = new SqlDataAdapter(QueryString, myConnection);
    DataSet ds = new DataSet();
    da.Fill(ds, "TestName");
    string i = ds.Tables[0].Rows[0]["name"].ToString();

    return "your name is " + i;
} 
```

在 Web.Config 文件中：-

在 -> 'system.serviceModel' 部分

```
<system.serviceModel>
    <services>
      <service name="WcfService2.Service1">
        <!-- Service Endpoints -->
        <!-- Unless fully qualified, address is relative to base address supplied above -->
        <endpoint address ="" binding="webHttpBinding" contract="WcfService2.IService1" behaviorConfiguration="web">
          <!-- 
              Upon deployment, the following identity element should be removed or replaced to reflect the 
              identity under which the deployed service runs.  If removed, WCF will infer an appropriate identity 
              automatically.
          -->
        </endpoint>
      </service>
    </services> 
```

在 web.config 的“行为”部分：-

```
 <behaviors>
    <endpointBehaviors>
            <behavior name="web">
              <webHttp/>
            </behavior>
          </endpointBehaviors> 
```

注意：- 此名称“web”应与 -> behaviorConfiguration="web" 相同

# css - “显示：无”会阻止图像加载吗？

> ID：12158540
> 
> 赞同：366
> 
> 时间：2012-08-28T11:42:08.843
> 
> 标签：css, responsive-design

每个响应式网站开发教程都建议使用`display:none`CSS 属性来隐藏移动浏览器加载的内容，以便网站加载更快。这是真的吗？不`display:none`加载图像还是仍然在移动浏览器上加载内容？有什么方法可以防止在移动浏览器上加载不必要的内容？

* * *

## 回答 #1

> 赞同：207
> 
> 时间：2012-08-28T11:50:34.927

浏览器变得越来越智能。今天，如果您的浏览器（取决于版本）可以确定它没有用，它可能会跳过图像加载。

图像具有`display:none`样式，但脚本可以读取其大小。如果父级隐藏，Chrome v68.0 不会加载图像。

你可以在那里查看：http: [//jsfiddle.net/tnk3j08s/](http://jsfiddle.net/tnk3j08s/)

您也可以通过查看浏览器开发人员工具的“网络”选项卡来检查它。

请注意，如果浏览器位于小型 CPU 计算机上，则不必渲染图像（和布局页面）将使整个渲染操作更快，但我怀疑这在今天是否真正有意义。

如果您想阻止加载图像，您可能根本不将 IMG 元素添加到文档中（或将 IMG`src`属性设置为`"data:"`或`"about:blank"`）。

* * *

## 回答 #2

> 赞同：137
> 
> 时间：2013-03-11T19:01:46.887

如果您在 CSS 中将图像设置为 div 的背景图像，则当该 div 设置为“display: none”时，图像将不会加载。当 CSS 被禁用时，它仍然不会加载，因为 CSS 被禁用了。

* * *

## 回答 #3

> 赞同：61
> 
> 时间：2014-04-09T18:28:02.880

答案并不像简单的是或否那么简单。看看我最近做的一个测试的结果：

*   在 Chrome 中：加载所有 8 个屏幕截图-* 图像 (img 1)
*   在 Firefox 中：仅加载了当前显示的 1 个屏幕截图-* 图像 (img 2)

所以在进一步挖掘之后我发现[了这个](http://web.archive.org/web/20130830082659/http://www.justinmarsan.com/blog/researches/hidden-elements-and-http-requests.html)，它解释了每个浏览器如何处理加载基于 css display: none; 的 img 资产。

摘自博客文章：

> *   Chrome 和 Safari (WebKit)：
>     WebKit 每次都会下载文件，除非通过不匹配的媒体查询应用背景。
> *   Firefox：
>     如果样式被隐藏，Firefox 将不会下载带有背景图像的图像，但它们仍会从 img 标签下载资源。
> *   Opera：
>     与 Firefox 一样，Opera 不会加载无用的背景图像。
> *   Internet Explorer：
>     IE，像 WebKit 一样会下载背景图像，即使它们有 display: none; IE6 出现了一些奇怪的东西：带有背景图像和显示的元素：将不会下载内联设置...但如果这些样式未内联应用，它们将会是。

![Chrome-所有 8 个屏幕截图-* 已加载图像](../Images/da9a535335645f820b4bb7c5b215dcf3.png)

![Firefox-仅加载了 1 个屏幕截图-* 当前正在显示的图像](../Images/ac3653f3f577338ea307f10deb4acc5b.png)

* * *

## 回答 #4

> 赞同：38
> 
> 时间：2017-03-15T00:52:10.280

# HTML5`<picture>`标签将帮助您根据屏幕宽度解析正确的图像源

显然浏览器的行为在过去 5 年中没有太大变化，许多人仍然会下载隐藏的图像，即使`display: none`它们上设置了属性。

即使有[媒体查询](https://developer.mozilla.org/en-US/docs/Web/CSS/Media_Queries/Using_media_queries)解决方法，它也只有在图像被设置为 CSS 中的背景时才有用。

虽然我认为这个问题只有一个 JS 解决方案（[延迟加载](https://css-tricks.com/snippets/javascript/lazy-loading-images/)、[图片填充](http://scottjehl.github.io/picturefill/)等），但似乎有一个很好的纯 HTML 解决方案，它是开箱即用的 HTML5。

那就是`<picture>`标签。

[MDN](https://developer.mozilla.org/en/docs/Web/HTML/Element/picture)是这样描述它的：

> **HTML`<picture>`元素**是一个容器，用于为其中包含`<source>`的特定元素指定多个元素`<img>`。浏览器将根据页面的当前布局（图像将出现的框的约束）和将在其上显示的设备（例如普通或 hiDPI 设备）选择最合适的来源。

以下是如何使用它：

```
<picture>
 <source srcset="mdn-logo-wide.png" media="(min-width: 600px)">
 <img src="mdn-logo-narrow.png" alt="MDN">
</picture> 
```

### 背后的逻辑

`img`仅当没有任何媒体规则适用时，浏览器才会加载标签的来源。当`<picture>`浏览器不支持该元素时，它将再次回退到显示`img`标签。

通常，您会将最小的图像作为来源，`<img>`因此不会为较大的屏幕加载重图像。反之亦然，如果媒体规则适用，`<img>`则不会下载源代码，而是下载相应`<source>`标签的 url 内容。

这里唯一的陷阱是，如果浏览器不支持该元素，它只会加载小图像。另一方面，在 2017 年，我们应该以*移动优先*的方式思考和编码。

在有人过于退出之前，这是*当前*浏览器支持的`<picture>`：

## 桌面浏览器

[![桌面浏览器支持](../Images/6d27ce1290605d444275df07fdec4453.png)](https://developer.mozilla.org/en/docs/Web/HTML/Element/picture)

## 移动浏览器

[![移动浏览器支持](../Images/3c5e3895e48650c55b9ad910b3922022.png)](https://i.stack.imgur.com/wk7IN.png)

有关浏览器支持的更多信息，您可以在[Can I use](http://caniuse.com/#search=picture)上找到。

好消息是[html5please](http://html5please.com/#picture)的语句是将*它与后备*一起使用。我个人打算听取他们的建议。

有关标签的更多信息，您可以在[W3C 的规范](http://w3c.github.io/html/semantics-embedded-content.html#the-picture-element)中找到。那里有一个免责声明，我觉得很重要：

> 该元素与外观相似的`picture`元素有些不同。虽然它们都包含元素，但当元素嵌套在元素中时，源元素的属性没有意义，并且资源选择算法不同。同样，元素本身不显示任何内容。它只是为其包含的元素提供一个上下文，使其能够从多个 URL 中进行选择。`video``audio``source``src``picture``picture``img`

所以它说的是，它只通过为图像提供一些上下文来帮助您提高加载图像时的性能。

你仍然可以使用一些 CSS 魔法来隐藏小型设备上的图像：

```
<style>
  picture { display: none; }

  @media (min-width: 600px) {
    picture {
      display: block;
    }
  }
</style>

<picture>
 <source srcset="the-real-image-source" media="(min-width: 600px)">
 <img src="a-1x1-pixel-image-that-will-be-hidden-in-the-css" alt="MDN">
</picture> 
```

因此浏览器*不会显示*实际图像，只会下载`1x1`像素图像（如果您多次使用它可以缓存）。但是请注意，如果`<picture>`浏览器不支持该标签，即使在桌面屏幕上，*也不会*显示实际图像（因此您肯定需要一个 polyfill 备份）。

* * *

## 回答 #5

> 赞同：13
> 
> 时间：2019-04-24T19:43:06.960

** **2019 年答案****

在正常情况下`display:none`不会阻止图像被下载

```
/*will be downloaded*/

#element1 {
    display: none;
    background-image: url('https://picsum.photos/id/237/100');
} 
```

但是如果祖先元素有，`display:none`那么后代的图像将不会被下载

```
 /* Markup */

<div id="father">
    <div id="son"></div>
</div>

/* Styles */

#father {
    display: none;
}

/* #son will not be downloaded because the #father div has display:none; */

#son {
    background-image: url('https://picsum.photos/id/234/500');
} 
```

**其他阻止图片下载的情况：**

1-目标元素不存在

```
/* never will be downloaded because the target element doesn't exist */

#element-dont-exist {
    background-image: url('https://picsum.photos/id/240/400');
} 
```

2- 两个相等的类加载不同的图像

```
/* The first image of #element2 will never be downloaded because the other #element2 class */

#element2 {
    background-image: url('https://picsum.photos/id/238/200');
}

/* The second image of #element2 will be downloaded */

#element2 {
    background-image: url('https://picsum.photos/id/239/300');
} 
```

您可以在这里观看：[https ://codepen.io/juanmamenendez15/pen/dLQPmX](https://codepen.io/juanmamenendez15/pen/dLQPmX)

* * *

## 回答 #6

> 赞同：10
> 
> 时间：2012-08-28T11:54:33.793

是的，它会渲染得更快一点，只是因为它不需要渲染图像，而且在屏幕上排序的元素少了一个。

如果您不想加载它，请将 DIV 留空，以便稍后将包含`<img>`标签的 html 加载到其中。

尝试使用我之前提到的 firebug 或 wireshark，你会看到即使`display:none`存在文件也会被传输。

~~如果显示设置为无，Opera 是唯一不会加载图像的浏览器。~~Opera 现在已经转移到 webkit 并且将渲染所有图像，即使它们的显示设置为无。

这是一个可以证明这一点的测试页面：

[http://www.quirksmode.org/css/displayimg.html](http://www.quirksmode.org/css/displayimg.html)

* * *

## 回答 #7

> 赞同：8
> 
> 时间：2014-10-29T20:16:13.593

[怪癖模式：图像和显示：无](http://www.quirksmode.org/css/displayimg.html)

> 当图像具有`display: none`或位于带有 的元素中时 `display:none`，浏览器可能会选择不下载图像，直到将`display` 设置为另一个值。
> 
> `display`当您切换到时，只有 Opera 会下载图像`block`。所有其他浏览器都会立即下载它。

* * *

## 回答 #8

> 赞同：8
> 
> 时间：2018-02-01T17:13:44.950

如果 div 设置为“display:none”，**则会加载**div 元素的背景图像。

无论如何，如果同一个 div 有一个父级并且该父级设置为 'display:none'，则子元素的背景图像**将不会加载**。:)

使用引导程序的示例：

```
<link href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-BVYiiSIFeK1dGmJRAkycuHAHRg32OmUcww7on3RYdg4Va+PmSTsz/K68vbdEjh4u" crossorigin="anonymous">

<div class="col-xs-12 visible-lg">
	<div style="background-image: url('http://via.placeholder.com/300x300'); background-repeat:no-repeat; height: 300px;">lg</div>
</div>
<div class="col-xs-12 visible-md">
	<div style="background-image: url('http://via.placeholder.com/200x200'); background-repeat:no-repeat; height: 200px;">md</div>
</div>
<div class="col-xs-12 visible-sm">
	<div style="background-image: url('http://via.placeholder.com/100x100'); background-repeat:no-repeat; height: 100px">sm</div>
</div>
<div class="col-xs-12 visible-xs">
	<div style="background-image: url('http://via.placeholder.com/50x50'); background-repeat:no-repeat; height: 50px">xs</div>
</div>
```

* * *

## 回答 #9

> 赞同：6
> 
> 时间：2021-01-24T18:16:32.947

即使后者直接或间接隐藏在`display: none`属性中，浏览器似乎仍然会下载图像。

我发现防止这种情况发生的唯一标准方法是使用标签`loading`的属性：`img`

`<img src="https://cdn.test/img.jpg" loading="lazy">`

所有最新的浏览器都支持它，除了 Safari 和 Firefox Android。

[MDN img 元素规范](https://developer.mozilla.org/en-US/docs/Web/HTML/Element/img)。

* * *

## 回答 #10

> 赞同：5
> 
> 时间：2016-01-06T20:46:40.240

[如果您在 CSS 中将图像设置为 div 的背景图像，则当该 div 设置为“显示：无”时，图像将不会加载。](https://stackoverflow.com/a/15346450)

只是扩展布伦特的解决方案。

您可以为纯 CSS 解决方案执行以下操作，它还使 img 框实际上在响应式设计设置中表现得像一个 img 框（这就是透明 png 的用途），如果您的设计使用响应式动态 - 这尤其有用 -调整图像大小。

```
<img style="display: none; height: auto; width:100%; background-image: 
url('img/1078x501_1.jpg'); background-size: cover;" class="center-block 
visible-lg-block" src="img/400x186_trans.png" alt="pic 1 mofo"> 
```

仅当触发与 visible-lg-block 相关的媒体查询并将 display:none 更改为 display:block 时，才会加载图像。透明 png 用于允许浏览器在流畅的设计（高度：自动；宽度：100%）中为您的 <img> 块（以及背景图像）设置适当的高度：宽度比率。

```
1078/501 = ~2.15  (large screen)
400/186  = ~2.15  (small screen) 
```

因此，对于 3 个不同的视口，您最终会得到如下所示的内容：

```
<img style="display: none; height: auto; width:100%; background-image: url('img/1078x501_1.jpg'); background-size: cover;" class="center-block visible-lg-block" src="img/400x186_trans.png" alt="pic 1">
<img style="display: none; height: auto; width:100%; background-image: url('img/517x240_1.jpg'); background-size: cover;" class="center-block visible-md-block" src="img/400x186_trans.png" alt="pic 1">
<img style="display: none; height: auto; width:100%; background-image: url('img/400x186_1.jpg'); background-size: cover;" class="center-block visible-sm-block" src="img/400x186_trans.png" alt="pic 1"> 
```

并且仅在初始加载期间加载您的默认媒体视口大小图像，然后根据您的视口，图像将动态加载。

而且没有javascript！

* * *

## 回答 #11

> 赞同：5
> 
> 时间：2016-04-13T10:21:47.313

> 如果是这样，有没有办法不在移动浏览器上加载不必要的内容？

利用`<img src="" srcset="">`

[http://www.webdesignerdepot.com/2015/08/the-state-of-responsive-images/](http://www.webdesignerdepot.com/2015/08/the-state-of-responsive-images/)

[https://caniuse.com/#feat=srcset](https://caniuse.com/#feat=srcset)

* * *

## 回答 #12

> 赞同：3
> 
> 时间：2015-09-06T19:19:53.040

为了防止获取资源，请使用[`<template>`Web Components 的元素](http://webcomponents.org/articles/introduction-to-template-element/)。

* * *

## 回答 #13

> 赞同：2
> 
> 时间：2017-11-21T11:40:58.190

不会。如果您考虑节省手机用户带宽，图像将照常加载并且仍将使用用户的带宽。您可以做的是使用媒体查询并过滤您希望加载图像的设备。您的图像必须设置为 div 等的背景图像，而不是标签，因为无论屏幕大小和媒体查询设置如何，图像标签都会加载图像。

* * *

## 回答 #14

> 赞同：2
> 
> 时间：2017-05-24T09:06:35.827

大家好，我在同样的问题上苦苦挣扎，如何不在移动设备上加载图像。

但我想出了一个很好的解决方案。首先制作一个img标签，然后在src属性中加载一个空白svg。现在您可以将图像的 URL 设置为带有内容的内联样式：url('link to your image');。现在将您的 img 标签包装在您选择的包装器中。

```
<div class="test">
  <img src="data:image/svg+xml,%3Csvg%20xmlns=%22http://www.w3.org/2000/‌​svg%22/%3E" style="content:url('https://blog.prepscholar.com/hubfs/body_testinprogress.gif?t=1495225010554')">
</div>

  @media only screen and (max-width: 800px) {
      .test{
       display: none;
      }
    } 
```

将包装器设置为在您不想加载图像的断点上不显示。img 标签的内联 css 现在被忽略，因为包装在带有 display none 的包装器中的元素的样式将被忽略，因此不会加载图像，直到到达包装器具有显示块的断点。

好了，不用在移动断点上加载 img 的非常简单的方法 :)

查看此代码笔，以获取工作示例：[http ://codepen.io/fennefoss/pen/jmXjvo](http://codepen.io/fennefoss/pen/jmXjvo)

* * *

## 回答 #15

> 赞同：2
> 
> 时间：2016-11-29T11:06:02.583

使用@media query CSS，基本上我们只是发布了一个项目，其中我们在桌面上有一个巨大的树图像，但没有显示在桌面/移动屏幕上。所以防止图像加载它很容易

这是一个小片段：

```
.tree {
    background: none top left no-repeat; 
}

@media only screen and (min-width: 1200px) {
    .tree {
        background: url(enormous-tree.png) top left no-repeat;
    }
} 
```

您可以使用相同的 CSS 来显示和隐藏显示/可见性/不透明度，但图像仍在加载，这是我们想出的最安全的代码。

* * *

## 回答 #16

> 赞同：0
> 
> 时间：2015-11-27T10:05:38.907

我们正在谈论无法在移动设备上加载的图像，对吗？那么如果你只是做了一个@media (min-width: 400px){background-image:thing.jpg}

那么它不会只在某个屏幕宽度以上寻找图像吗？

* * *

## 回答 #17

> 赞同：0
> 
> 时间：2016-03-11T15:39:34.190

另一种可能性是使用`<noscript>`标签并将图像放置在`<noscript>`标签内。然后根据需要使用 javascript 删除`noscript`标签。通过这种方式，您可以使用渐进增强按需加载图像。

使用我写的这个 polyfill 来读取`<noscript>`IE8 中标签的内容

[https://github.com/jameswestgate/noscript-textcontent](https://github.com/jameswestgate/noscript-textcontent)

* * *

## 回答 #18

> 赞同：-3
> 
> 时间：2017-01-31T03:35:18.377

将 display:none 与图像一起使用的技巧是为它们分配一个 id。这是因为不需要很多代码就可以让它工作。这是一个使用媒体查询和 3 个样式表的示例。一种用于手机，一种用于平板电脑，一种用于台式机。我有 3 张图片，手机、平板电脑和台式机的图片。手机屏幕上只会显示手机的图像，平板电脑只会显示平板电脑的图像，桌面会显示桌面计算机的图像。这是一个使其工作的代码示例：

源代码：

```
<div id="content">
<img id="phone" src="images/phone.png" />
<img id="tablet" src="images/tablet.png" />
<img id="desktop" src="images/desktop.png" />
</div> 
```

不需要媒体查询的电话 CSS。它的 img#phone 使它工作：

```
img#phone {
    display: block;
    margin: 6em auto 0 auto;
    width: 70%;
    }

img#tablet {display: none;}
img#desktop {display: none;} 
```

平板电脑CSS：

```
@media only screen and (min-width: 641px) {
img#phone {display: none;}

img#tablet {
    display: block;
    margin: 6em auto 0 auto;
    width: 70%;
    }
} 
```

和桌面css：

```
@media only screen and (min-width: 1141px) {
img#tablet {display: none;}

img#desktop {
    display: block;
    margin: 6em auto 0 auto;
    width: 80%;
    }
} 
```

祝你好运，让我知道它是如何为你工作的。

# c# - 肥皂头身份验证

> ID：12158545
> 
> 赞同：1
> 
> 时间：2012-08-28T11:42:40.153
> 
> 标签：c#, web-services, authentication, soap

我无法让我的客户协调视觉工作室添加到代理类的 AuthHeaderValue 我已经看到了很多示例，但找不到任何关于如何解决此问题的信息。

肥皂类

```
 public class AuthHeader : SoapHeader
     {
        public string Username;
        public string Password;

     } 
```

网络服务

```
 public class Service1 : System.Web.Services.WebService
     {
        public AuthHeader Authentication; ** where does visual studio append value to proxy 

    [SoapHeader("Authentication", Required = true)]
    [WebMethod]
    public string security()
    {
        if (Authentication.Username == "test" &&
            Authentication.Password == "test")
        {
            return "authenticated";
        }
        else
        {
            return "get lost";
        }            
    } 
```

客户

```
 static void Main(string[] args)
    {
        ServiceReference1.AuthHeader auth = new ServiceReference1.AuthHeader();
        auth.Username = "test";
        auth.Password = "test";

        ServiceReference1.Service1SoapClient ser = new ServiceReference1.Service1SoapClient();
        ser.AuthHeaderValue = auth;  ** does not reconise authheadervalue
        String message = ser.security();
        Console.WriteLine(message);

    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-21T10:55:48.927

```
WebService service = new WebService();
       service.Authentication.Username = "a";
       service.Authentication.Password = "a";
       string str = service .CheckAuthn(); 
```

应用该代码

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-24T01:22:22.013

您必须像`TRUE`标头一样传递身份验证参数值。[在此处](http://tamedotnet.blogspot.com/2013/04/soap-header-authentication-for-web.html)查看完整的解决方案

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-08-12T04:26:41.297

尝试这个

```
public ServiceAuthHeader Credentials;
public class ServiceAuthHeader : SoapHeader
{
    public string Username;
    public string Password;
} 
```

安全方法更改如下

```
 public static string Validate(ServiceAuthHeader soapHeader)
 {
        string error_msg = "Pass";
        if (soapHeader == null)
        {
            error_msg = "No soap header was specified.";
        }
        else if (soapHeader.Username == null || soapHeader.Username == "")
        {
           error_msg = "Username was not supplied for authentication in SoapHeader.";
        }
        else if (soapHeader.Password == null || soapHeader.Password == "")
        {
           error_msg = "Password was not supplied for authentication in SoapHeader.";
        }

        else if (soapHeader.Username != "test" || soapHeader.Password != "test")
        {
             error_msg = "Please pass the proper username and password for this service.";
        }

      return error_msg;
 } 
```

将您的凭证保存在某个公共类或其他地方的方法中

```
 public static void AuthValidatoin(WebserviceObject callwebservice)
 {
       ServiceAuthHeader serviceAuthHeaderValue = new LocalERPWebService.ServiceAuthHeader();
       serviceAuthHeaderValue.Username = "test";
       serviceAuthHeaderValue.Password = "test";
       callwebservice.ServiceAuthHeaderValue = serviceAuthHeaderValue;
 } 
```

当您调用 Web 服务时，使用上述方法对服务进行身份验证，如下所示

```
 WebserviceObject CallWebService = new WebserviceObject();
 common.AuthValidatoin(CallWebService); 
```

# java - 如何确定 JDialog 显示在哪个屏幕上

> ID：12158548
> 
> 赞同：7
> 
> 时间：2012-08-28T11:42:41.037
> 
> 标签：java, swing, center, jdialog, multiple-monitors

我有一个非常大的应用程序，它有多个对话框。我的任务是确保将不完全可见的对话框（因为用户将其拉出可见屏幕区域）移回屏幕中心。

当我只处理一个屏幕时，这没问题。它工作得很好......但是，这个应用程序的大多数用户在他们的桌面上有两个屏幕......

当我试图弄清楚对话框显示在哪个屏幕上并将其居中在该特定屏幕上时，...嗯，它实际上确实居中，但在主屏幕上（可能不是显示对话框的屏幕）。

为了向您展示我到目前为止的想法，这是代码...

```
 /**
 * Get the number of the screen the dialog is shown on ...
 */
private static int getActiveScreen(JDialog jd) {
    int screenId = 1;
    GraphicsEnvironment ge = GraphicsEnvironment.getLocalGraphicsEnvironment();
    GraphicsDevice[] gd = ge.getScreenDevices();
    for (int i = 0; i < gd.length; i++) {
        GraphicsConfiguration gc = gd[i].getDefaultConfiguration();
        Rectangle r = gc.getBounds();
        if (r.contains(jd.getLocation())) {
            screenId = i + 1;
        }
    }
    return screenId;
}

/**
* Get the Dimension of the screen with the given id ...
*/
private static Dimension getScreenDimension(int screenId) {
    Dimension d = new Dimension(0, 0);
    if (screenId > 0) {
        GraphicsEnvironment ge = GraphicsEnvironment.getLocalGraphicsEnvironment();
        DisplayMode mode = ge.getScreenDevices()[screenId - 1].getDisplayMode();
        d.setSize(mode.getWidth(), mode.getHeight());
    }
    return d;
}

/**
 * Check, if Dialog can be displayed completely ...
 * @return true, if dialog can be displayed completely
 */
private boolean pruefeDialogImSichtbarenBereich() {
    int screenId = getActiveScreen(this);
    Dimension dimOfScreen = getScreenDimension(screenId);
    int xPos = this.getX();
    int yPos = this.getY();
    Dimension dimOfDialog = this.getSize();
    if (xPos + dimOfDialog.getWidth() > dimOfScreen.getWidth() || yPos + dimOfDialog.getHeight() > dimOfScreen.getHeight()) {
        return false;
    }
    return true;
}

/**
 * Center Dialog...
 */
private void zentriereDialogAufMonitor() {
    this.setLocationRelativeTo(null);
} 
```

在调试时，我遇到了一个事实，`getActiveScreen()`但它似乎不像我那样工作；它似乎总是返回 2（这是一种废话，因为这意味着对话框总是显示在第二个监视器中......这当然不是事实）。

任何人都知道如何将我的对话集中在实际显示的屏幕上？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-28T16:14:18.530

您的`getActiveScreen`方法有效，只是它使用了包含窗口左上角的屏幕。如果您改用 Component.getGraphicsConfiguration()，它会告诉您哪个屏幕拥有最多的窗口像素。`setLocationRelativeTo(null)`在这里没有帮助，因为它总是使用主屏幕。以下是解决方法：

```
static boolean windowFitsOnScreen(Window w) {
    return w.getGraphicsConfiguration().getBounds().contains(w.getBounds());
}

static void centerWindowToScreen(Window w) {
    Rectangle screen = w.getGraphicsConfiguration().getBounds();
    w.setLocation(
        screen.x + (screen.width - w.getWidth()) / 2,
        screen.y + (screen.height - w.getHeight()) / 2
    );
} 
```

然后你可以这样做：

```
JDialog jd;
...
if (!windowFitsOnScreen(jd)) centerWindowToScreen(jd); 
```

这将使对话框居中到最近的屏幕（监视器）。您可能需要确保首先显示/定位对话框。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-29T03:41:14.893

我不确定其中有多少用处，但这是我在尝试确定 Windows 的图形设备时使用的代码。

我有点作弊，我倾向于使用`Component`并允许实用程序方法找到顶级窗口或使用`Component`屏幕点。

```
/**
 * Returns the GraphicsDevice that the specified component appears the most on.
 */
public static GraphicsDevice getGraphicsDevice(Component comp) {

    GraphicsDevice device = null;

    GraphicsEnvironment ge = GraphicsEnvironment.getLocalGraphicsEnvironment();
    GraphicsDevice lstGDs[] = ge.getScreenDevices();

    ArrayList<GraphicsDevice> lstDevices = new ArrayList<GraphicsDevice>(lstGDs.length);
    if (comp != null && comp.isVisible()) {
        Rectangle parentBounds = comp.getBounds();

        /*
         * If the component is not a window, we need to find its location on the
         * screen...
         */
        if (!(comp instanceof Window)) {
            Point p = new Point(0, 0);
            SwingUtilities.convertPointToScreen(p, comp);
            parentBounds.setLocation(p);
        }

        for (GraphicsDevice gd : lstGDs) {
            GraphicsConfiguration gc = gd.getDefaultConfiguration();
            Rectangle screenBounds = gc.getBounds();
            if (screenBounds.intersects(parentBounds)) {
                lstDevices.add(gd);
            }
        }

        if (lstDevices.size() == 1) {
            device = lstDevices.get(0);
        } else {

            GraphicsDevice gdMost = null;
            float maxArea = 0;
            for (GraphicsDevice gd : lstDevices) {
                int width = 0;
                int height = 0;

                GraphicsConfiguration gc = gd.getDefaultConfiguration();
                Rectangle bounds = gc.getBounds();

                Rectangle2D intBounds = bounds.createIntersection(parentBounds);

                float perArea = (float) ((intBounds.getWidth() * intBounds.getHeight()) / (parentBounds.width * parentBounds.height));
                if (perArea > maxArea) {
                    maxArea = perArea;
                    gdMost = gd;
                }
            }

            if (gdMost != null) {
                device = gdMost;
            }
        }
    }
    return device;
}

/**
 * Returns the GraphicsDevice at the specified point
 */
public static GraphicsDevice getGraphicsDeviceAt(Point pos) {
    GraphicsDevice device = null;
    GraphicsEnvironment ge = GraphicsEnvironment.getLocalGraphicsEnvironment();
    GraphicsDevice lstGDs[] = ge.getScreenDevices();

    List<GraphicsDevice> lstDevices = new ArrayList<GraphicsDevice>(lstGDs.length);
    for (GraphicsDevice gd : lstGDs) {

        GraphicsConfiguration gc = gd.getDefaultConfiguration();
        Rectangle screenBounds = gc.getBounds();
        if (screenBounds.contains(pos)) {
            lstDevices.add(gd);
        }
    }

    if (lstDevices.size() > 0) {
        device = lstDevices.get(0);
    }

    return device;
}

/**
 * Returns the Point that would allow the supplied Window to be
 * centered on it's current graphics device.
 * 
 * It's VERY important that the Window be seeded with a location
 * before calling this method, otherwise it will appear on the 
 * device at 0x0
 *
 * @param window
 * @return
 */
public static Point centerOfScreen(Window window) {
    // Try and figure out which window we actually reside on...
    GraphicsDevice gd = getGraphicsDeviceAt(window.getLocation());
    GraphicsConfiguration gc = gd.getDefaultConfiguration();

    Insets screenInsets = Toolkit.getDefaultToolkit().getScreenInsets(gd.getDefaultConfiguration());
    Rectangle bounds = gc.getBounds();
    Dimension size = bounds.getSize();

    size.width -= (screenInsets.left + screenInsets.right);
    size.height -= (screenInsets.top + screenInsets.bottom);

    int width = window.getWidth();
    int height = window.getHeight();

    int xPos = screenInsets.left + ((size.width - width) / 2);
    int yPos = screenInsets.top + ((size.height - height) / 2);

    return new Point(xPos, yPos);
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-28T12:28:48.483

这是用于居中窗口位置的代码。

```
 //Center the window
  Dimension screenSize = Toolkit.getDefaultToolkit().getScreenSize();
  Dimension frameSize = frame.getSize();
  if (frameSize.height > screenSize.height) {
    frameSize.height = screenSize.height;
  }
  if (frameSize.width > screenSize.width) {
    frameSize.width = screenSize.width;
  }
  frame.setLocation((screenSize.width - frameSize.width) / 2, (screenSize.height - frameSize.height) / 2); 
```

您也可以使用`frame`该对话框。

# ios - UIViewController 最佳实践——加载

> ID：12158555
> 
> 赞同：1
> 
> 时间：2012-08-28T11:43:05.113
> 
> 标签：ios, uiviewcontroller, uikit, viewdidload

我有一个带有一些 UI 接口的简单视图控制器。我正在使用 ARC 我在`viewDidLoad`设置标签属性、if 语句以动态调整某些组件的大小等方面进行了额外的设置。我的问题是`viewDidLoad`放置此代码的最佳位置？我已经发布了我在该方法中拥有的一些代码的示例。谢谢。

```
self.messageTitleLabel.numberOfLines = 1;
self.messageTitleLabel.adjustsFontSizeToFitWidth = YES;
self.messageTitleLabel.minimumFontSize = 15.0f;
[self someMethodToReframeLabelHeight]; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-28T11:47:05.397

是的，很棒的地方。回想一下，在 iOS 中，由于内存压力，系统可能会卸载您的视图，因此您稍后可能会再次收到此消息。因此，在那里有代码来调整新加载的视图是完美的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-28T13:09:32.783

正如大卫所说，是的，在这里执行额外的设置是完美的。但请注意，`viewDidLoad`尚未为其视图设置几何图形。因此，如果您需要在控制器的视图中安排子视图的位置，请使用`viewWillAppear`或`viewDidAppear`.

希望有帮助。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-28T13:05:04.100

是的。正如 David H 提到的，`viewDidLoad`出于内存原因，这是一个好地方 - 如果您的应用程序收到内存警告，您的视图将在下次加载时再次设置。但是，使用 的另一个重要原因`viewDidLoad`是，如果您尝试将上述代码放入`init`or中`initWithWhatever:`，您会遇到一些奇怪的问题。原因是在该`init`方法中，视图还没有被创建并从它的.nib中唤醒，从那里访问它会打乱整个视图控制器循环。如果您不使用 .nib，您还可以在 .nib 中进行一些基本设置`-loadView`。只要确保您`super`在覆盖这些方法之一时调用。

# php - 数据表插件中的服务器端自定义

> ID：12158560
> 
> 赞同：1
> 
> 时间：2012-08-28T11:43:18.650
> 
> 标签：php, mysql, datatable

我有 10,000 条记录。我正在使用数据表，而对于后端，我正在使用 php 和 mysql。当我第一次尝试加载我的应用程序时，由于记录繁重，需要花费很多时间。所以请告诉我如何避免这个加载问题，以及我在加载我想要加载的 20 条记录期间的时间。我的代码是这样的：

```
 $('#example').dataTable( {
      "bProcessing": true,
      "sAjaxSource": "datatable-businesslist.php",
       "bJQueryUI": true,
       "sPaginationType": "full_numbers",
       "sDom": 'T<"clear">lfrtip',
       "oLanguage": {
            "sSearch": "Search all columns:"
        },
        "oTableTools": {
             "aButtons": [
                {
                 "sExtends": "csv",
             "sButtonText": "Save to CSV",
                 "mColumns":[0,1,2,3,4,5,6,7,8],
                 "bFooter":false
                 }
         },
         "aoColumns": [
                   null,null,null,null,null,{ "bSortable": false },null,null,null,{ "bSortable": false }
                     ]
} ); 
```

在 datatable-businesslist.php 页面中，我写下了从 datatables.net 站点获得的简单服务器端代码。所以请帮助我如何避免这个问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-28T11:53:23.413

尝试添加这一行：

```
"bServerSide": true, 
```

# c++ - 在 Qt 中递归遍历目录，跳过文件夹“。” 和 ”..”

> ID：12158565
> 
> 赞同：8
> 
> 时间：2012-08-28T11:43:30.740
> 
> 标签：c++, qt, directory

我在使用 Qt 函数递归遍历目录时遇到了一点麻烦。我正在尝试做的事情：

打开指定目录。遍历目录，每次遇到另一个目录时，打开该目录，遍历文件等。

现在，我将如何处理：

```
QString dir = QFileDialog::getExistingDirectory(this, "Select directory");
if(!dir.isNull()) {
    ReadDir(dir);
}

void Mainwindow::ReadDir(QString path) {
    QDir dir(path);                            //Opens the path
    QFileInfoList files = dir.entryInfoList(); //Gets the file information
    foreach(const QFileInfo &fi, files) {      //Loops through the found files.
        QString Path = fi.absoluteFilePath();  //Gets the absolute file path
        if(fi.isDir()) ReadDir(Path);          //Recursively goes through all the directories.
        else {
            //Do stuff with the found file.
        }
    }
} 
```

现在，我面临的实际问题是：自然，entryInfoList 也会返回“。” 和“..”目录。使用这种设置，这被证明是一个主要问题。

通过进入“.”，它将遍历整个目录两次，甚至无限次（因为“.”始终是第一个元素），使用“..”它将为父目录下的所有文件夹重做该过程。

我想做这个漂亮又时尚，有什么办法可以解决这个问题，我不知道吗？或者是唯一的方法，我得到纯文件名（没有路径）并对照'。'检查它。和 '..'？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-08-28T11:48:38.703

您应该尝试使用`QDir::NoDotAndDotDot`您的过滤器`entryInfoList`，如[文档](http://qt-project.org/doc/qt-4.8/qdir.html#entryInfoList-2)中所述。

**编辑**

*   不要忘记添加`QDir::Files`、 或`QDir::Dirs`来`QDir::AllFiles`获取文件和/或目录，如[本文](http://www.qtcentre.org/threads/19085-QDir-entryInfoList-and-NoDotAndDotDot-filter)所述。

*   您可能还想检查[这个先前的问题](https://stackoverflow.com/questions/8052460/recursive-scanning-of-directories)。

# c++ - 将 C++ 带入 Objective-C 项目的最佳方式

> ID：12158567
> 
> 赞同：1
> 
> 时间：2012-08-28T11:43:35.090
> 
> 标签：c++, objective-c, xcode, cocoa

对于即将到来的 XCode iOS 项目，我计划在 Objective-C 中编写我的视图和视图控制器。我的模型将以 C++ 提供给我。

我知道在 Objective-C 项目中使用 C++ 的两种方法。它们如下所述。每种方法的优缺点是什么。有没有其他推荐的方法，它的优点和缺点是什么？

[- 在 C++ 头文件中，使用Wikipedia](https://en.wikipedia.org/wiki/Extern_%22C%22#Linking_C_and_C.2B.2B_code)中描述的 extern "C" 声明。

[- 如Rob Napier](http://robnapier.net/blog/wrapping-cppfinal-edition-759)所述，使用 Objective-C++ 包装 C++ 。

# c# - 如何禁用点击事件的按钮？

> ID：12158568
> 
> 赞同：0
> 
> 时间：2012-08-28T11:43:34.890
> 
> 标签：c#, asp.net

以下代码在 IE 中不起作用。我需要在 chrome、fire fox 和 IE 中修复此问题

```
 button.Attributes["disabled"] = "disabled"; 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-28T11:46:37.710

您只需将其[`Enabled`属性](http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.webcontrol.enabled)设置为`false`在服务器端：

```
button.Enabled = false; 
```

编辑：如果`button`是一个链接并且它在 IE 以外的其他浏览器中不起作用，请查看以下链接：[http ://www.aspnetajaxtutorials.com/2009/05/how-to-enable-or-disable-linkbutton -in.html](http://www.aspnetajaxtutorials.com/2009/05/how-to-enable-or-disable-linkbutton-in.html)

```
<asp:LinkButton ID="lnkTest" runat="server" CommandArgument="1" CommandName="1x"
OnClick="lnkTest_Click">Test</asp:LinkButton> 
```

启用和禁用的样式是

```
<style>
.LnkEnabled
{
cursor: pointer;
}
.LnkDisabled
{
cursor: default;
color: Gray;
}
</style> 
```

javascript函数

```
<script language="javascript">
function EnableLinkButton(ID,flag)
{
   document.getElementById(ID).onclick=function(){return flag;};
   if(!flag)
   { 
      document.getElementById(ID).setAttribute("disabled","disabled");
      document.getElementById(ID).className="LnkDisabled";
   }
   else
   {
      document.getElementById(ID).setAttribute("disabled","");
      document.getElementById(ID).className="LnkEnabled";
   }
}
EnableLinkButton('<%= lnkTest.ClientID %>',false);
</script> 
```

**Edit2**：如果这不起作用（尚未测试），您也可以试试这个：

```
button.Attributes.Add("onClick", "return !this.disabled;") 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-28T11:47:41.733

```
 button.Attributes.Add("disabled", "true"); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-28T11:47:41.670

```
$('#button_id').attr('disabled', 'disabled'); 
```

# linux - Linux SLAB_CTOR_VERIFY 和缓存未声明

> ID：12158571
> 
> 赞同：1
> 
> 时间：2012-08-28T11:43:54.200
> 
> 标签：linux, linux-kernel, linux-device-driver, embedded-linux, kernel

我尝试编译一个程序，作为存储分配如何工作的示例。

编译器给了我一个错误，“缓存”和“SLAB_CTOR_VERIFY”未声明。

我在整个内核项目（Linux Kernel 2.6.32）中找不到声明。

也许有一些替代品或类似的东西。

我在网上一无所获，但也许你们中的一些人可以给我一个线索。

这是源代码：

```
#include <linux/module.h>
#include <linux/completion.h>
#include <linux/slab.h>

static int thread_id=0;
static DECLARE_COMPLETION( on_exit );
static kmem_cache_t *cache;

struct linobj {
    int dummy_i, dummy_j, dummy_k;
    char dummy_feld[250];
    wait_queue_head_t wq;
};

static void linobj_destructor(void *objp, kmem_cache_t *cache,
    unsigned long flags)
{
    printk("linobj_destructor( %p )\n", objp);
    return;
}

static void linobj_constructor(void *objp, kmem_cache_t *cache,
       unsigned long flags)
{
    struct linobj *ptr = (struct linobj *)objp;
    if( flags & SLAB_CTOR_VERIFY )
        return;
    printk("linobj_constructor( %p )\n", objp);
    init_waitqueue_head(&ptr->wq);
    return;
}

static int thread_code( void *data )
{
    unsigned long timeout, retvalue;
    int i;
    struct linobj *obj;

    daemonize("linobj-test");
    allow_signal( SIGTERM );
    for( i=0; i<5; i++ ) {
        obj = (struct linobj *)kmem_cache_alloc( cache, GFP_KERNEL );
        printk("objadr=%p\n", obj );
        timeout=HZ;
        retvalue=schedule_timeout_interruptible(timeout);
        kmem_cache_free( cache, obj );
        if( retvalue )
            break;
    }
    complete_and_exit( &on_exit, 0 );
}

static int __init slab_init(void)
{
    cache = kmem_cache_create( "linobj", sizeof(struct linobj),
        0, 0, linobj_constructor, linobj_destructor );
    if( !cache )
        return -EFAULT;
    thread_id=kernel_thread( thread_code, NULL, CLONE_KERNEL );
    if( thread_id==0 ) {
        kmem_cache_destroy( cache );
        return -EIO;
    }
    return 0;
}

static void __exit slab_exit(void)
{
    kill_pid( find_vpid(thread_id), SIGTERM, 1 );
    wait_for_completion( &on_exit );
    if( cache )
        kmem_cache_destroy( cache );
}

module_init( slab_init );
module_exit( slab_exit );

MODULE_LICENSE("GPL"); 
```

提前致谢

彼得

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-28T12:08:21.740

SLAB_CTOR_VERIFY 在[2.6.22中被移除](http://git.kernel.org/?p=linux/kernel/git/torvalds/linux-2.6.git;a=commitdiff;h=50953fe9e00ebbeffa032a565ab2f08312d51a87)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-28T12:14:34.443

让它通过一些更改进行编译。SLAB.. 已被删除，并且 kmem_cache 函数已更改。`kmem_cache_t`已替换为`struct kmem_cache`：

```
#include <linux/module.h>
#include <linux/completion.h>
#include <linux/slab.h>
#include <linux/sched.h> // daemonize

static int thread_id=0;
static DECLARE_COMPLETION( on_exit );
typedef struct kmem_cache kmem_cache_t; //
static kmem_cache_t *cache;

struct linobj {
    int dummy_i, dummy_j, dummy_k;
    char dummy_feld[250];
    wait_queue_head_t wq; 
};

static void linobj_destructor(void *objp, kmem_cache_t *cache,
    unsigned long flags)
{
    printk("linobj_destructor( %p )\n", objp);
    return;
}

static void linobj_constructor(void *objp) {
    struct linobj *ptr = (struct linobj *)objp;
    printk("linobj_constructor( %p )\n", objp);
    init_waitqueue_head(&ptr->wq);
    return;
}

static int thread_code( void *data )
{
    unsigned long timeout, retvalue;
    int i;
    struct linobj *obj;

    daemonize("linobj-test");
    allow_signal( SIGTERM );

    for( i=0; i<5; i++ ) {
        obj = (struct linobj *)kmem_cache_alloc( cache, GFP_KERNEL );
        printk("objadr=%p\n", obj );
        timeout=HZ;
        retvalue=schedule_timeout_interruptible(timeout);
        kmem_cache_free( cache, obj );
        if( retvalue )
            break;
    }
    complete_and_exit( &on_exit, 0 );
}

static int __init slab_init(void)
{
    cache = kmem_cache_create( "linobj", sizeof(struct linobj),
          0, 0, linobj_constructor);
    if( !cache )
        return -EFAULT;
    thread_id=kernel_thread( thread_code, NULL, CLONE_KERNEL );
    if( thread_id==0 ) {
        kmem_cache_destroy( cache );
        return -EIO;
    }
    return 0;
}

static void __exit slab_exit(void)
{
    kill_pid( find_vpid(thread_id), SIGTERM, 1 );
    wait_for_completion( &on_exit );
    if( cache )
        kmem_cache_destroy( cache );
}

module_init( slab_init );
module_exit( slab_exit );

MODULE_LICENSE("GPL"); 
```

# android - 通知待处理意图的问题

> ID：12158577
> 
> 赞同：3
> 
> 时间：2012-08-28T11:44:25.487
> 
> 标签：android, notifications, android-pendingintent

我正在尝试启动不可取消的持续通知，但无论我尝试什么，它都是可取消的。

代码：

```
 NotificationManager = (NotificationManager) getSystemService(Context.NOTIFICATION_SERVICE);
    int icon = R.drawable.btn_rating_star_on_pressed_holo_light;
    long when = System.currentTimeMillis();

    notification = new Notification(icon, getString(R.string.notificationMSG), when);
    notification.ledARGB = 999;

    Intent notificationIntent = new Intent(this, MainActivity.class);
    PendingIntent contentIntent = PendingIntent.getActivity(this, 0, notificationIntent, Notification.FLAG_ONGOING_EVENT + Notification.FLAG_NO_CLEAR + Notification.FLAG_SHOW_LIGHTS);

    notification.setLatestEventInfo(context, getString(R.string.app_name), getString(R.string.notificationMSG), contentIntent);

    notificationManager.notify(Global.NOTIFICATION_ID,notification); 
```

我还想知道一旦启动它的活动完成后如何让它消失。尝试执行以下操作，但它只工作了几次。

```
@Override
protected void onDestroy(){
    notificationManager.cancel(Global.NOTIFICATION_ID);
    super.onDestroy();
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-28T11:53:14.977

```
PendingIntent contentIntent = PendingIntent.getActivity(this, 0, notificationIntent, 0);

notification.flags |= Notification.FLAG_ONGOING_EVENT;
notification.flags |= Notification.FLAG_NO_CLEAR;
notification.flags |= Notification.FLAG_SHOW_LIGHTS; 
```

由于某些愚蠢的原因，我们不能将标志直接放在 中，`PendingIntent`而是需要以这种方式设置它们。

# javascript - 哈希和数字

> ID：12158579
> 
> 赞同：1
> 
> 时间：2012-08-28T11:44:39.240
> 
> 标签：javascript, jquery, hash, numbers, responsive-design

我在 jQuery Elastislide 中有一个画廊。

图库的每张图片都有一个对应的Hash。

例如：*www.example.com/gallery.html#4/title_of_the_picture*

所以，当我重新加载第四张图片时，页面会加载第四张图片。

但是当我重新加载没有哈希中标题之前的数字时，图片不会加载。

*www.example.com/gallery.html#title_of_the_picture*

我可以删除这个号码吗？如果可以的话，Jquery 中正确的代码是什么？

jQuery代码：

```
Gallery = (function() {
    // index of the current item        
    var imageIndex = 0;
    if (window.location.hash) {
        var imageIndexStr = window.location.hash.replace('#', ''); // remove #
        imageIndex = parseInt(imageIndexStr, 0); // convert to int
    }

    var current = imageIndex;
    // mode : carousel || fullview
    mode = 'carousel',
    // control if one image is being loaded
    anim = false, init = function() {
        // (not necessary) preloading the images here...
        $items.add('<img src="ajax-loader.gif"/><img src="black.png"/>').imagesLoaded(function() {
            // add options
            _addViewModes();
            // add large image wrapper
            _addImageWrapper();
            // show first image
            _showImage($items.eq(current));
        });
    }
}​ 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-28T12:28:30.093

代码行：

```
var imageIndexStr = window.location.hash.replace('#', '');
imageIndex = parseInt(imageIndexStr, 0); // convert to int 
```

将尝试将散列的第一个 char 转换为 int，但如果第一个 char 不是有效的 int（就像你说的那样，如果你删除了 4 就是这种情况），那么 JavaScript 将在那一点，不要再进一步了。

`parseInt()`此外，根据文档，- 0 似乎不是一个有效的选项。

**编辑：**替换到 W3Schools 的链接

[https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/parseInt](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/parseInt)

# c# - 检查asp:fileupload是否为空，客户端验证

> ID：12158580
> 
> 赞同：1
> 
> 时间：2012-08-28T11:44:42.640
> 
> 标签：c#, asp.net

我在表单视图中有一个文件上传控件。如果没有上传文件，我希望它会导致验证错误。我可以在上面应用某种验证器还是让控件本身抛出验证错误？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-28T12:03:54.370

```
<asp:FileUpload ID="FileUpload1" runat="server" />
 <asp:RequiredFieldValidator ID="RequiredFieldValidator1"
    runat="server" ErrorMessage="your own error message" 
    ControlToValidate="FileUpload1"></asp:RequiredFieldValidator> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-28T11:56:25.587

要检查文件上传是否有文件，请像这样使用 jquery

```
 $(document).ready(function(){
        $('#button').click(function(){
          if($('#uploadFile').val()=="")
           {
           alert("no file selected!");
           return false;
          }
        });
    }); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-28T11:46:37.927

尝试类似的东西

```
<asp:FileUpload ID="fu1" runat="server" />
<asp:Button ID="btn" runat="server" CausesValidation="true" Text="Click" 
       OnClientClick="return ValidateFileName();" /> 

 <script type="text/javascript">
function ValidateFileName() {
    var fu = document.getElementById("<%= fu1.ClientID %>");
    var f = fu.value + "";
    if ((f.indexOf("#", 0) >= 0) || (f.indexOf("$", 0) >= 0) ||
          (f.indexOf("%", 0) >= 0) || (f.indexOf("^", 0) >= 0)) {
        alert("Filename: [" + f + "] contains invalid char");
        return false;//will stop button click event here
    }

    return true;
} 
```

# c++ - 如何实现通用的 max 函数？

> ID：12158582
> 
> 赞同：4
> 
> 时间：2012-08-28T11:44:46.583
> 
> 标签：c++, templates

我知道这是因为模板函数的返回类型与第一个参数（T）的返回类型相同。
如何修改此模板，使其在所有情况下都能正常运行？

```
#include <iostream>
using namespace std;
template <typename T, typename U>
T max(T x, U y)
{
    return x>y ? x : y;
}

int main()
{
    cout<<max(17.9,17)<<"\n";
    cout<<max(17,17.9)<<"\n";
} 
```

**输出：**

```
17.9  
17 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-08-28T12:13:05.383

*您的*实现行为是正确的，尽管您可能不想要该输出。*代码中返回类型*的问题。

如果可以使用 C++11，则可能需要使用[*尾随返回类型：*](http://en.wikipedia.org/wiki/C%2B%2B11#Alternative_function_syntax)

```
template <typename T, typename U>
auto max(T x, U y) -> decltype(x>y ? x : y)    //C++11 only
{
    return x>y ? x : y;
} 
```

这将给出这个输出：

```
17.9
17.9 
```

我希望这是所需的输出。

在线演示：http: [//ideone.com/2Sh5Y](http://ideone.com/2Sh5Y)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-28T12:38:35.830

使用 c++11 很容易，使用 std::common_type<> 特征：

```
template <typename T, typename U>
typename std::common_type<T,U>::type max(T x, U y) /// why not const& T and const& U ?
{
    return x>y ? x : y;
} 
```

common_type<> 使用 decltype 关键字和 declval<> 特征，它们都是自 c++11 以来的新特性

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-08-28T11:49:00.617

输出是正确的。您从未指定类型，因此抱怨它没有使用您希望它使用的类型是不合理的。如果您需要特定类型，则必须确保两个参数*都是*该类型。

您可以将第一个参数强制转换为`double`. 或者您可以专门调用
`max<double, double>`. `max<int, double>`如果您真的非常想要，您也可以专门化和类似的组合。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-08-28T12:21:30.067

这是 C++03 的答案。对于 C++11 - 使用 auto/decltype （请参阅其他答案）。

您必须创建另一个模板`template CommonNumericType<T1,T2>`：：

```
template <typename L, typename R>
typename CommonNumericType<T1,T2>::Type max(L x, R y)
{
    return x>y ? x : y;
} 
```

并将这个 CommonNumericType 专门用于每对可能的数字类型：

```
template <typename L, typename R>
struct CommonNumericType;
template <typename T>
struct CommonNumericType<T,T> {
   typedef T Type;
};
template <typename L>
struct CommonNumericType<L,long double> {
   typedef long double Type;
};
template <typename R>
struct CommonNumericType<long double,R> {
   typedef long double Type;
};
// ...
template <>
struct CommonNumericType<int,short> {
   typedef int Type;
};
// and many others stuff 
```

我可以考虑创建一些数字类型的层次结构——浮点类型在 int 类型之前——等等。因为`<number of numeric types>^2`是相当大的数字：

```
template <typename T>
struct NumericTypeOrder;
template <>
struct NumericTypeOrder<long double> { enum { VALUE = 1 }; };
template <>
struct NumericTypeOrder<double> { enum { VALUE = 2 }; };
template <>
struct NumericTypeOrder<float> { enum { VALUE = 3 }; };
template <>
struct NumericTypeOrder<unsigned long long> { enum { VALUE = 4 }; };
// etc for all numeric types - where signed char is last one...

template <typename L, typename R, bool L_bigger_than_R>
struct CommonNumericTypeImpl;
template <typename L, typename R>
struct CommonNumericTypeImpl<L,R,true> {
  typedef L type;
};
template <typename L, typename R>
struct CommonNumericTypeImpl<L,R,false> {
  typedef R type;
};
template <typename L, typename R>
struct CommonNumericType 
: CommonNumericTypeImpl<L,R,NumericTypeOrder<L>::value >= NumericTypeOrder<R>::value > {
}; 
```

或者只使用宏：

```
#define max(l,r) ((l) >= (r) ? (l) : (r)) 
```

简单多了，不是吗？

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-08-28T12:13:36.053

在 C++11 中，您可以使用类型推断（带有`auto`、后期返回类型和`decltype`）：

```
template <typename T, typename U>
auto max(T x, U y) -> decltype(x>y ? x : y)
{
  return x>y ? x : y;
} 
```

# java - 如何将 JPA 添加到现有的 Eclipse 项目？

> ID：12158583
> 
> 赞同：0
> 
> 时间：2012-08-28T11:44:54.183
> 
> 标签：java, spring, jpa, jdbc, phpmyadmin

我有一个现有的 Eclipse 项目（JAVA 应用程序），现在我在 xampp - phpMyAdmin 中创建了一个表。在项目中，我需要以两种方式实现所有查询和数据库：

1) JDBC

2) JPA

并使用 Spring 机制选择其中之一。

所以我有一些问题：

1）如何将JPA添加到现有项目中？因为我读到我需要
一个'persistence.xml'文件，该文件需要位于我在java项目中没有的'META-INF'文件夹中。

2) 如何使用 JPA 连接到我在 phpMyAdmin 中的数据库？

3）如何在使用Spring机制的JDBC和JPA之间进行选择？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-28T12:11:35.013

回答部分问题，如果您使用 Hibernate 作为 JPA 提供程序，您可以通过这种方式从 JPA 更改为 JDBC：

```
Session session = em.unwrap(Session.class);
session.doWork(new Work() {

    @Override
    public void execute(Connection connection) throws SQLException {
        Statement stmt = connection.createStatement();
        String nativeSql = "SELECT * FROM USERS"; 
        stmt.executeUpdate(nativeSql);
        stmt.close();
    }
}); 
```

回答问题 1 和 2：您只需要像您所说的那样创建一个名为 persistence.xml 的文件，如下所示：

```
<?xml version="1.0" encoding="UTF-8"?>
<persistence version="2.0" xmlns="http://java.sun.com/xml/ns/persistence" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://java.sun.com/xml/ns/persistence http://java.sun.com/xml/ns/persistence/persistence_2_0.xsd">
    <persistence-unit name="MyJPA" transaction-type="RESOURCE_LOCAL">
        <provider>org.hibernate.ejb.HibernatePersistence</provider>
        <properties>
            <property name="javax.persistence.jdbc.url" value="jdbc:mysql://localhost:3306/mydb"/>
            <property name="javax.persistence.jdbc.user" value="user"/>
            <property name="javax.persistence.jdbc.password" value="pass"/>
            <property name="javax.persistence.jdbc.driver" value="com.mysql.jdbc.Driver"/>
            <property name="hibernate.dialect" value="org.hibernate.dialect.MySQLInnoDBDialect"/>
        </properties>
    </persistence-unit>
</persistence> 
```

现在，关于 Spring 与 JPA 一起工作的方式，我无法回答你，也许是其他人。但我希望这会有所帮助

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-28T13:26:35.720

> 1）如何将JPA添加到现有项目中？因为我读到我需要一个'persistence.xml'文件，该文件需要位于我在java项目中没有的'META-INF'文件夹中。

您可以手动添加它。

样本

```
<persistence xmlns="http://java.sun.com/xml/ns/persistence"
                 xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
                 xsi:schemaLocation="http://java.sun.com/xml/ns/persistence http://java.sun.com/xml/ns/persistence/persistence_1_0.xsd"
                 version="1.0">
         <persistence-unit name="foo" transaction-type="RESOURCE_LOCAL">
            <class>org.bar.foobar</class>
                // Add required classes here
         </persistence-unit>

        // You can add more persistence unit as per required.
 </persistence> 
```

> 2) 如何使用 JPA 连接到我在 phpMyAdmin 中的数据库？

`phpMyAdmin`只是另一个使用 MySQL 的工具，你应该关心数据库而不是工具。检查此[链接](http://javahowto.blogspot.in/2006/07/helloworld-with-jpa-toplink-and-mysql.html)，您可能会发现这很有帮助

> 3）如何在使用Spring机制的JDBC和JPA之间进行选择？

JDBC 是最低级别，其他的都是建立在它之上的。在性能方面我更喜欢 JDBC。此外，当我只想非常频繁地编辑特定列时，我更喜欢 JDBC 而不是 JPA。

[JDBC 与 ORM (JPA)](http://www.roseindia.net/jpa/jdbc-vs-orm.shtml)

JDBC的优点

*   清洁和轻松的小程序
*   JDBC 在处理大量数据时提供了良好的性能
*   小型 JDBC 程序可以很容易地开发
*   非常适合小型应用

JDBC的缺点

*   如果在大型项目中使用 JDBC，则并不容易。有很大的编程开销。
*   程序员必须硬编码应用程序中的事务和并发代码。
*   处理 JDBC 连接并正确关闭连接也是一个大问题。必须正确关闭连接。
*   JDBC 不适合大型应用程序

ORM 的好处

*   无需处理 SQL 查询来保存和检索数据
*   简单配置
*   用于持久化业务对象的标准化 API
*   应用程序快速开发
*   并发支持
*   出色的兑现支持，以提高应用程序的性能
*   注入事务管理
*   可配置的日志记录
*   易于学习和使用

ORM的缺点

*   大批量更新时性能下降
*   比 JDBC 慢一点

# linux - cSipSimple 应用程序错误：- 'SL_ANDROID_STREAM_VOICE' 未声明（在此函数中首次使用）

> ID：12158586
> 
> 赞同：0
> 
> 时间：2012-08-28T11:45:14.483
> 
> 标签：linux, android-ndk, pjsip

我正在尝试在 linux 上运行 cSipSimple 应用程序。要构建它，我使用链接[http://code.google.com/p/csipsimple/wiki/HowToBuild](http://code.google.com/p/csipsimple/wiki/HowToBuild)。首先我已经安装了所有的包。然后 ndk 和 sdk 已经安装在我的 linux 机器上。所以我只是在 .bashrc 中设置以下路径

> "export ANDROID_NDK=/home/nishant/JAVA/android-ndk-r6m-linux/export ANDROID_SDK=/home/nishant/JAVA/android-sdk-linux_86/export PATH=$PATH:$ANDROID_SDK/tools:$ANDROID_SDK/platform -工具：$ANDROID_NDK"

现在，当我运行命令 make 时，出现以下错误：-

> /home/nishant/CSipSimple/jni//pjsip/android_toolchain/pjmedia/../../sources/pjmedia//../../android_sources/pjmedia/src//pjmedia-audiodev/opensl_dev.c：在函数中'opensl_create_stream'：/home/nishant/CSipSimple/jni//pjsip/android_toolchain/pjmedia/../../sources/pjmedia//../../android_sources/pjmedia/src//pjmedia-audiodev/opensl_dev。 c:532: 错误: 'SL_ANDROID_STREAM_VOICE' 未声明（在此函数中首次使用）/home/nishant/CSipSimple/jni//pjsip/android_toolchain/pjmedia/../../sources/pjmedia//../../ android_sources/pjmedia/src//pjmedia-audiodev/opensl_dev.c:532：错误：（每个未声明的标识符只报告一次/home/nishant/CSipSimple/jni//pjsip/android_toolchain/pjmedia/../../sources /pjmedia//../../android_sources/pjmedia/src//pjmedia-audiodev/opensl_dev.c:532：错误：对于它出现的每个函数。) /home/nishant/CSipSimple/jni//pjsip/android_toolchain/pjmedia/../../sources/pjmedia//../../android_sources/pjmedia/src//pjmedia-audiodev/opensl_dev.c:557 : 错误: 'SL_ANDROID_KEY_STREAM_TYPE' 未声明（在此函数中首次使用）/home/nishant/CSipSimple/jni//pjsip/android_toolchain/pjmedia/../../sources/pjmedia//../../android_sources/pjmedia /src//pjmedia-audiodev/opensl_dev.c:654: 错误: 'SL_ANDROID_RECORDING_PRESET_GENERIC' 未声明（在此函数中首次使用）/home/nishant/CSipSimple/jni//pjsip/android_toolchain/pjmedia/../../sources /pjmedia//../../android_sources/pjmedia/src//pjmedia-audiodev/opensl_dev.c:669：错误：'SL_ANDROID_KEY_RECORDING_PRESET'未声明（在此函数中首次使用）make [1]：/android_sources/pjmedia/src//pjmedia-audiodev/opensl_dev.c:557: 错误：'SL_ANDROID_KEY_STREAM_TYPE' 未声明（在此函数中首次使用）/home/nishant/CSipSimple/jni//pjsip/android_toolchain/pjmedia/../ ../sources/pjmedia//../../android_sources/pjmedia/src//pjmedia-audiodev/opensl_dev.c:654: 错误: 'SL_ANDROID_RECORDING_PRESET_GENERIC' 未声明（在此函数中首次使用）/home/nishant/CSipSimple /jni//pjsip/android_toolchain/pjmedia/../../sources/pjmedia//../../android_sources/pjmedia/src//pjmedia-audiodev/opensl_dev.c:669：错误：“SL_ANDROID_KEY_RECORDING_PRESET”未声明（在此函数中首次使用）make[1]：/android_sources/pjmedia/src//pjmedia-audiodev/opensl_dev.c:557: 错误：'SL_ANDROID_KEY_STREAM_TYPE' 未声明（在此函数中首次使用）/home/nishant/CSipSimple/jni//pjsip/android_toolchain/pjmedia/../ ../sources/pjmedia//../../android_sources/pjmedia/src//pjmedia-audiodev/opensl_dev.c:654: 错误: 'SL_ANDROID_RECORDING_PRESET_GENERIC' 未声明（在此函数中首次使用）/home/nishant/CSipSimple /jni//pjsip/android_toolchain/pjmedia/../../sources/pjmedia//../../android_sources/pjmedia/src//pjmedia-audiodev/opensl_dev.c:669：错误：“SL_ANDROID_KEY_RECORDING_PRESET”未声明（在此函数中首次使用）make[1]：未声明（在此函数中首次使用）/home/nishant/CSipSimple/jni//pjsip/android_toolchain/pjmedia/../../sources/pjmedia//../../android_sources/pjmedia/src//pjmedia- audiodev/opensl_dev.c:654: 错误: 'SL_ANDROID_RECORDING_PRESET_GENERIC' 未声明（在此函数中首次使用）/home/nishant/CSipSimple/jni//pjsip/android_toolchain/pjmedia/../../sources/pjmedia//.. /../android_sources/pjmedia/src//pjmedia-audiodev/opensl_dev.c:669：错误：'SL_ANDROID_KEY_RECORDING_PRESET'未声明（在此函数中首次使用）make [1]：未声明（在此函数中首次使用）/home/nishant/CSipSimple/jni//pjsip/android_toolchain/pjmedia/../../sources/pjmedia//../../android_sources/pjmedia/src//pjmedia- audiodev/opensl_dev.c:654: 错误: 'SL_ANDROID_RECORDING_PRESET_GENERIC' 未声明（在此函数中首次使用）/home/nishant/CSipSimple/jni//pjsip/android_toolchain/pjmedia/../../sources/pjmedia//.. /../android_sources/pjmedia/src//pjmedia-audiodev/opensl_dev.c:669：错误：'SL_ANDROID_KEY_RECORDING_PRESET'未声明（在此函数中首次使用）make [1]：/android_sources/pjmedia/src//pjmedia-audiodev/opensl_dev.c:669：错误：'SL_ANDROID_KEY_RECORDING_PRESET'未声明（在此函数中首次使用）make [1]：/android_sources/pjmedia/src//pjmedia-audiodev/opensl_dev.c:669：错误：'SL_ANDROID_KEY_RECORDING_PRESET'未声明（在此函数中首次使用）make [1]：***
> 
> [/home/nishant/CSipSimple/obj/local/armeabi/objs/pj_opensl_dev/../../android_sources/pjmedia/src//pjmedia-audiode

宏“SL_ANDROID_STREAM_VOICE”和其他宏，定义在文件“OpenSLES_AndroidConfiguration.h”中，该文件位于ndk中。我不明白，我正在提供 ndk 路径，但仍然为什么它无法追踪它。

我是否缺少为 NDK 设置路径的东西？

请帮忙

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-11T10:52:08.277

我在ndk源中跟踪版本android-ndk-r8d，文件平台/android-9/arch-arm/usr/include/SLES/OpenSLES_AndroidConfiguration.h：

第 20 行：

```
#ifdef __cplusplus
extern "C" {

// some source code

}
#endif 
```

我认为，最好这样定义：

```
#ifdef __cplusplus
extern "C" {
#endif

// some source code

#ifdef __cplusplus
}
#endif 
```

我将平台/android-9/arch-arm/usr/include/SLES/OpenSLES_AndroidConfiguration.h 中的所有定义移动到 pjmedia/src//pjmedia-audiodev/opensl_dev.c 并且它工作正常。但这不是一个好的解决方案。

# http - Jmeter http请求在某个随机线程中获得400响应代码

> ID：12158589
> 
> 赞同：1
> 
> 时间：2012-08-28T11:45:29.183
> 
> 标签：http, response, jmeter

我使用 JMeter 编写了一个测试计划。它的结构是这样的：

线程组

*   HTTP 缓存管理器
*   HTTP Cookie 管理器
*   CSV 数据集配置
*   CSV 数据集配置
*   索引页
    *   一些 Http 请求
*   随机顺序控制器
    *   一些 Http 请求
*   登录页面
    *   一些 Http 请求
    *   随机顺序控制器
    *   一些 Http 请求
    *   吞吐量控制器
    *   一些 Http 请求
*   简单控制器
    *   一些 Http 请求
*   查看结果树

我运行了 50 个线程，但是，一些随机的 http 请求在一个线程中失败并显示“响应代码：400”，但在其他线程中它是成功的。

所以我不知道如何对此进行调查，因为它有时可以正常工作，但会失败一两次。

谁能给我一些建议？我将非常感谢您的帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-28T15:42:46.397

你可能用 50 个线程（疯狂猜测）超过了它`Gateway Timeout perhaps`。

看看[http://w3.org/Protocols/rfc2616/rfc2616-sec10.html](http://w3.org/Protocols/rfc2616/rfc2616-sec10.html)

`Note to implementors: some deployed proxies are known to return 400 or 500 when DNS lookups time out`

如果减少线程数量可以消除问题而不是测试问题，那么它就在其他地方。

**来自 user1488025 的分辨率详细信息：**

我们在 mod_jk 中发现了这个错误。基本上 mod_jk 的默认配置在高负载下不起作用，随着时间的推移，它会变得缓慢、无响应、导致 http 错误和半关闭连接。

# java - xjc 不会在生成的字段上添加 @XmlElement(nillable=false)

> ID：12158591
> 
> 赞同：0
> 
> 时间：2012-08-28T11:45:38.437
> 
> 标签：java, jaxb, jaxb2, xjc, jaxb2-maven-plugin

我在使用 xjc 生成类时遇到问题。在架构中，我有 nillable="false"，但这并未作为注释 (@XmlElement(nillable=false)) 添加到生成的字段上。这会导致 Jackson 在字段为空时不会删除它们。如果我更改为 nillable=true，则会更新类以反映预期的...

有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-29T06:56:27.187

So I ended up writing my own plugin for maven-jaxb2-plugin which checks the attributes and adds missing `@XmlElement(nillable = false)`.

# extjs - Ext JS 4 -- 树形面板和条件卡片显示

> ID：12158602
> 
> 赞同：0
> 
> 时间：2012-08-28T11:46:09.113
> 
> 标签：extjs

我正在开发一个使用树进行导航的 Ext JS 应用程序。在中心窗格中（使用边框布局），我使用卡片视图。在树上选择一个节点会更改显示的卡片。每张卡可能包含完全不同的组件。

到目前为止，这并不是很难做到的。但这是问题所在。某些卡片只有在满足某些条件时才会显示。例如，我有一张卡片，允许用户查看上传的 CSV 文件。当用户单击树中的“查看 CSV 文件”节点时会显示此卡片。但是，如果用户还没有上传 CSV 文件，并且他点击了该节点，我想显示一张带有文件上传字段的卡片，以便用户可以上传 CSV 文件。

现在，我的控制器初始化中有以下内容：

```
this.control({
    'nav-tree': {
        select: {
           fn: function(model, record, index){
               record.handler();  
           },
           scope: this
        }
    }
}) 
```

`record.handler()`是在我的模型中定义的函数，它从模型中读取属性 cardId 并将布局切换到具有该 ID 的卡片（它还执行其他一些操作。）

我意识到我可以在我的处理函数中抛出一堆 if 语句来检查 CSV 文件是否已上传并加载适当的卡，但我可以看到这种方法至少有两个缺点：

(1) 它非常不优雅，并且 (2) 我要检查的条件将变得更加复杂，使得 if 语句难以阅读和管理。

我希望有一个更好的 Ext JS 友好的解决方案来解决这个困难。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-28T11:51:57.873

这绝对是应该在控制器中的代码，模型不应该决定加载哪些视图。当然，您可以在模型中添加辅助函数来检索数据/检查数据条件，但任何决策都应该在控制器中进行。

# xpages-extlib - 在 formTable 中使用 tabbedPanels

> ID：12158603
> 
> 赞同：0
> 
> 时间：2012-08-28T11:46:09.463
> 
> 标签：xpages-extlib

有没有人有一个在 formTable 中使用 tabbedPanel 的例子？

我的表单有很多字段，我是 Xpages 的新手，所以只是在寻找最佳实践。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-04T15:34:47.453

我有一个相反的工作示例 - 一个 tabbedPanel，每个里面都有一个带有验证的 formTable，当有很多字段时它工作得很好。请记住，如果您使用 SSJS 验证，则无论何时单击任何选项卡，都会触发当前选项卡的验证。

你可以尝试一个dojo tabContainer，里面也有formTables，如果你切换标签，不会触发验证。如果将焦点设置到不同选项卡中的字段，则可能会出现 js 错误。我没有使用dojo tabContainer，因为这个项目是针对IE7的，我发现这个浏览器非常慢。

# java - 春季在列表集合中提交多列表单

> ID：12158616
> 
> 赞同：0
> 
> 时间：2012-08-28T11:47:02.110
> 
> 标签：java, spring, spring-mvc

我有 4 个文本框，如 A、B、C、DI 必须采用上一年、今年和当年的值，即我们可以采用多个列，你能告诉我该怎么做。

提前致谢。

[看到这个链接](http://viralpatel.net/blogs/spring-mvc-multi-row-submit-java-list/comment-page-1/#comment-35729) 就像多行一样我有列

# qt - 在 Qt 中呈现自定义选择列表

> ID：12158628
> 
> 赞同：2
> 
> 时间：2012-08-28T11:47:41.980
> 
> 标签：qt, qt4

我对在 QT 中绘制的不同选项感到非常困惑。为了清楚起见，我不是要代码。如果有人能阐明实现它的最佳方法，我将非常感激。我觉得不是很复杂！

这是我正在寻找的结果！

![在此处输入图像描述](../Images/5dbcc5a46c1d8e764d7b2bbd16d27eb8.png)

主要思想是在顶部有一个文本输入，并在上面有一个匹配结果的建议列表。

目前，我使用 a ，并使用 a 和a`QTreeWidget`添加行。显然它看起来不像屏幕截图:) 我应该使用 a来处理绘图吗？我做了一些研究，但是用 QPainter 绘制看起来有点痛苦。我认为实现自定义小部件并以某种方式复制它可能会更容易？?`QTreeWidgetItem``QStringList``QItemDelegate``QListView``QListWidget`

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-28T11:57:15.420

您确实可以尝试使用 a`QListView`来绘制您的组合，它可能比 a 更容易处理`QTreeWidget`。

不幸的是，我担心你将不得不继承一个`QItemDelegate`（或其他类型的委托）来处理你的数据的自定义显示（例如，混合一个图标、几个字符串和一个日期字段......）。

对于数据本身，您可能需要考虑使用`QStandardItemModel`. 因为您只想显示一些数据，所以覆盖`data`方法应该就足够了（当然还有`rowCount`and`columCount`方法）。

# c# - 关于绘制图表的建议

> ID：12158634
> 
> 赞同：5
> 
> 时间：2012-08-28T11:48:03.373
> 
> 标签：c#, .net, wpf, winforms, graph

![在此处输入图像描述](../Images/016758739a3b42caf993cd52f266a222.png)

我需要在我的应用程序中绘制如上图所示的图表。Y 轴的值会定期更新，该值是从电子设备获得的，X 轴指的是经过的时间。默认情况下，X 轴的查看范围会随着秒数的流逝而自动更新（水平扩展）。

一件我觉得非常具有挑战性的事情是，用户还可以手动设置 X 和 Y 轴的范围，所以我需要想出一种灵活的方式来处理这部分。

我可以就处理上述要求获得一些建议吗？我更喜欢 WPF，但 Winforms 也很好。是否有任何示例项目可以解决与上述类似的问题？或者我可以使用的任何第三方 dll（用于商业目的）？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-05T21:16:22.397

我现在正在考虑切换到的一种方法是简单地将 Web 控件嵌入到任何类型的应用程序（winforms、wpf）中，然后使用 html/javascript 使用开源库绘制图形，例如：[flotr2](http://coderbay.com/free-html5-and-javascript-charting-library-flotr2/)、[Style Chart](http://chart.inetsoft.com/)、[jqPlot](http://www.jqplot.com/)、[Protovis](http://mbostock.github.com/protovis/)和[D3](http://d3js.org/)。这样做的好处是，如果您决定更改平台，您的图形不需要更改。

现在我正在使用[动态数据显示](http://dynamicdatadisplay.codeplex.com/)，它是一个 WPF 图形库。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-05T21:07:13.863

表格：

.NET3.5 及更高版本内置了图表控件（我认为）

我也是新手，但您必须创建图表控件，然后使用数据创建一个系列对象。然后使用包含您的数据的系列更新图表控件。

这里有一个示例项目：

[http://archive.msdn.microsoft.com/mschart/Release/ProjectReleases.aspx?ReleaseId=4418](http://archive.msdn.microsoft.com/mschart/Release/ProjectReleases.aspx?ReleaseId=4418)

# haskell - 使用 Haskell 图形库 Gloss，是否可以将图片屏蔽为仅在一定范围内（即矩形内）显示

> ID：12158639
> 
> 赞同：2
> 
> 时间：2012-08-28T11:48:14.393
> 
> 标签：haskell, graphics

我一直在使用[Gloss Library](http://hackage.haskell.org/package/gloss-1.7.4.1)进行一些游戏编程，并且已经到了在屏幕上布置不同元素时最困难的地步。我想知道是否可以将`Picture`类型限制为仅显示屏幕的某个矩形区域。该库已经有了带有`Extent`类型的矩形区域的概念，但似乎没有任何方法可以从图片中“减去”。

如果有办法做到这一点，那么似乎创建一个`View`类型或类似的类型来接管屏幕的某个区域——它也可以包含额外的视图，并且它们之间有适当的坐标替换等——将是一个可实现的并且明智的目标。但是如果没有一种方法来限制绘图区域，在 Gloss 框架内似乎是不可能的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-20T17:11:18.980

Gloss 似乎不支持剪辑。

尽管如此，递归绘制每个视图都有自己的相对坐标系似乎仍然是一个可行且有用的目标，我现在正在为此编写代码。

# mdx - MDX 查询中总和的平均值

> ID：12158641
> 
> 赞同：1
> 
> 时间：2012-08-28T11:48:24.027
> 
> 标签：mdx, average

如何计算 MDX 中总和的平均值？我想计算每个人的支出总和，然后计算它的平均值。到目前为止，我有以下查询，但我相信它给了我错误的结果：

```
WITH MEMBER [Measures].[Average] AS
AVG(Measures.cost)
SELECT [Measures].[Average] ON COLUMNS
FROM
( SELECT Measures.cost ON COLUMNS,
{Person.[Last name].MEMBERS}*
{Person.[First name].MEMBERS} ON ROWS
FROM Cube ) 
```

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-28T12:33:33.127

您只需要输入[Avg](http://msdn.microsoft.com/en-us/library/ms146067)的第一个参数即可。

```
WITH MEMBER [Measures].[Average] AS
    AVG(Person.[Last name].MEMBERS * Person.[First name].MEMBERS, Measures.cost)
SELECT [Measures].[Average] ON COLUMNS
FROM Cube 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-28T12:01:24.823

尝试像这样为此函数创建计算度量

```
IIF (([Measures.cost] > 0), AVG(Person.Members,Measures.cost),null) 
```

然后在您的 MDX 查询中使用此计算的度量

```
SELECT Person, 'calculated.measure' 
FROM Cube 
```

这只是一个示例代码来说明该功能。

# html - 如何查找标签是否打开

> ID：12158652
> 
> 赞同：0
> 
> 时间：2012-08-28T11:49:21.267
> 
> 标签：html, tags

是否有软件可以检查 .html 文件以查看所有标签是否正确关闭？

我试过`TagCheck`了，但这不起作用，因为我放了我的文件并运行它并且没有错误，然后我添加了一个`<tr>`没有结束标签的标签并再次运行但仍然没有错误

那么是否有其他软件可以做到这一点或任何其他方式来做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-28T11:52:15.567

查看[W3C 标记验证服务](http://validator.w3.org/#validate_by_upload)和所有[其他验证](http://www.w3.org/QA/Tools/)器

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-28T11:57:38.677

使用[**notepad++**](http://notepad-plus-plus.org/)代码编辑软件。您可以使用它轻松检查。

还要检查您的 HTML，将其粘贴到[http://validator.w3.org/#validate_by_input](http://validator.w3.org/#validate_by_input)以在线验证它。

[http://img210.imageshack.us/img210/8066/testjn.png](http://img210.imageshack.us/img210/8066/testjn.png)

# asp.net - 查找项目何时添加到缓存

> ID：12158655
> 
> 赞同：0
> 
> 时间：2012-08-28T11:49:23.883
> 
> 标签：asp.net, caching, outputcache

所以，我正在学习缓存......

我正在构建一个压缩和缓存 JS 文件的函数。

我试图在我更改文件时随时更新它，为此，我试图比较服务器上 JS 文件的 lastWrite 时间和写入缓存文件的时间。

因此，将数据添加到缓存中如下所示：

```
HttpContext.Current.Cache.Insert("cachedJS", FileJS, Nothing, DateTime.Now.AddMinutes(1200), TimeSpan.Zero) 
```

而且我可以很容易地检索这些数据，但是，我如何确定`lastWriteTime`CACHE 键的值？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-28T12:01:01.230

您可以开发扩展方法 InsertWithLog 并使用此方法将项目插入缓存中，并跟踪插入时间，但如果不进行自定义则无法实现此工作。

这里所有可用的插入格式：http://msdn.microsoft.com/en-us/library/system.web.caching.cache.insert%28v=vs.71%29.aspx

# php - MYSQL 查询结果重复

> ID：12158661
> 
> 赞同：0
> 
> 时间：2012-08-28T11:49:45.890
> 
> 标签：php, mysql

嗨，我有一个查询可以产生我需要的内容，但是我在输出中得到重复的行并且无法弄清楚为什么每行出现两次。有任何想法吗？

```
$query = "SELECT * FROM orders LEFT JOIN users ON orders.USER_ID = users.USER_ID
          LEFT JOIN items ON items.CHECKOUT_ID = orders.CHECKOUT_ID ORDER BY
           date_order DESC LIMIT 0,1000";

            $result = mysqli_query($con, $query);

            while($row = mysqli_fetch_array($result, MYSQL_ASSOC)){
                $order_id = $row["ORDER_ID"];
                $date_order = $row["date_order"];
                $date_req = $row["delivery"];
                $country = $row["country"];
                $firstname = $row["name"];
                $lastname = $row["surname"];
                $email = $row["email"];
                $size = $row["size"];
                $total_cost = $row["total_cost"];

                echo '<tr><td>' . $order_id . ' </td>' .
                     '<td>' . $date_order . '</td>' . 
                     '<td>' . $date_req . '</td>' . 
                     '<td>' . $country . ' </td>' . 
                     '<td>' . $firstname . ' </td>' .
                     '<td>' . $lastname . ' </td>' .
                     '<td>' . $email . ' </td>' .
                     '<td>' . $size . ' </td>' .
                     '<td>&euro;' . number_format($total_cost, 2, '.', '') . ' </td>' .
                     '<td style="text-align:right"><a href="xxxxxxx_Order_Details_Admin.php?id=' . $order_id . '">More Details</td>' .
                     '<td style="text-align:right"><a href="xxxxxxxx_Order_Details_print.php?id=' . $order_id . '">Print</td>' .

                    '</tr>'; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-28T15:41:37.447

您的查询应该为行中的每个项目返回一行。这是你所期待的吗？如果您期望每个用户一行或每个订单一行，那么您的查询错误。

从您提取的字段中，我认为您不想要这些项目。试试这个查询：

```
SELECT *
FROM orders LEFT JOIN
     user
    ON orders.USER_ID = users.USER_ID
ORDER BY date_order DESC LIMIT 0,1000 
```

如果您仍然得到重复项（或者当您期望每个项目一行时重复行），那么您需要查看基础表以查看重复项的来源。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-28T11:54:13.107

将您的查询更改为：

```
SELECT DISTINCT o.ORDER _ID, o.date_order, ...
FROM orders o
  LEFT JOIN users u
    ON o.USER_ID = u.USER_ID 
  LEFT JOIN items i
    ON i.CHECKOUT_ID = o.CHECKOUT_ID 
ORDER BY date_order DESC LIMIT 0,1000 
```

哦，*始终*指定要返回的列。使用`*`使调试变得更加困难。

# netbeans - 在目标平台上找不到 JUnit 4 库；您需要安装 JUnit（Netbeans 平台）

> ID：12158663
> 
> 赞同：1
> 
> 时间：2012-08-28T11:49:48.437
> 
> 标签：netbeans, junit, netbeans-7, netbeans-platform

在运行 Netbeans 7.1.1 一段时间后，突然所有来自 org.junit.* 的导入都丢失了，我无法再构建项目了。即使插件 JUnit 似乎安装正确。当我单击以自动解决单元测试库中缺少的依赖项时，我收到以下错误：

> 在目标平台上找不到 JUnit 4 库；你需要安装 JUnit

在其他带有 Netbeans 7.1 的 Linux 机器上，同样的项目运行没有任何问题。奇怪的是这个库被称为“org.netbeans.libs.junit4”而不是“JUnit 4”，整个包似乎是空的。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-10T14:20:06.447

该问题是由使用`sudo`命令将 Netbeans 安装到`/usr/local/netbeans*`. 之后安装 JUnit，即使安装似乎已成功完成，但有些可能没有被复制，或者不可读。

当 Netbeans 安装到用户的主目录时，一切正常。这似乎是自 6.9 以来尚未解决的 Netbeans 错误

# html - 可滚动 div 中的绝对 div 滚动

> ID：12158667
> 
> 赞同：2
> 
> 时间：2012-08-28T11:50:28.133
> 
> 标签：html, css

我们的问题：我制作了一个 div 并制作了另一个 div 来悬停这个 div 并且我使用绝对位置，但是父 div 制作可滚动的 div 那么这个绝对位置 div 不是 scroll 。那么***如何在可滚动的 div 中滚动这个 div？***

我像这样制作悬停div：

```
#hover {
height: 56px;
    left: 158px;
    top: 156px;
    width: 56px;
    border: 2px dashed red;
    display: block;
    position: absolute;
} 
```

检查此链接：http: [//jsfiddle.net/kamlesh0606/yrjPA/](http://jsfiddle.net/kamlesh0606/yrjPA/)

请参阅 jsfiddle 链接中的悬停 div（红色边框）。

我在可滚动的主 div 中的其他 div 上制作了一个悬停 div。所以我使用绝对位置制作悬停div。但我遇到了一个问题：当主 div 滚动时，这个悬停 div 不像相对 div 那样滚动。那么如何在可滚动的 div 中滚动悬停 div 呢？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-28T12:26:09.823

你可以试试这个

```
<div style="position: relative;">
    <div id="hover">
    ...
    </div>
</div> 
```

你必须把你的绝对 div 放在相对 div

# c++ - 整数产生十六进制值错误

> ID：12158670
> 
> 赞同：0
> 
> 时间：2012-08-28T11:50:36.507
> 
> 标签：c++, integer, hex

我的程序发生了一些奇怪的事情。我目前在我的程序中使用了很多线程，在这里粘贴所有内容是不可行的。

然而这是我的问题：

```
int value = 1000;
std::cout << value << std::endl;
//output:  3e8 
```

知道为什么我的输出是 3e8 吗？

修复它以打印十进制值的命令是什么？

提前致谢！:)

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-08-28T11:53:27.380

其他一些线程将`std::cout`流的默认输出基数更改为十六进制。请注意 1000 [10] = 3e8 [16]，即`1000 == 0x3e8`。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-08-28T11:58:02.700

在您的程序中的某处调用，例如：

```
std::cout << std::hex << value; 
```

已经用过。要将输出恢复为正常（十进制），请使用：

```
std::cout << std::dec; 
```

这是在 std::cout 上输出数字的不同方式的[相关链接。](http://www.cplusplus.com/reference/iostream/manipulators/dec/)

此外，正如下面评论中所指出的，安全修改 cout 标志的标准方法如下所示：

```
ios::fmtflags cout_flag_backup(cout.flags()); // store the current cout flags

cout.flags ( ios::hex ); // change the flags to what you want

cout.flags(cout_flag_backup); // restore cout to its original state 
```

[链接到 IO 基本标志](http://www.cplusplus.com/reference/iostream/ios_base/flags/)

* * *

正如下面的评论中所述，指出在使用 IO 流时，最好在线程和流之间进行某种形式的同步，也就是说，确保没有两个线程可以使用相同的线程。一次流。
这样做可能还会集中您的流调用，这意味着将来调试这样的东西会容易得多。
[这是一个可以帮助你的问题](https://stackoverflow.com/questions/9332263/synchronizing-std-cout-output-multi-thread)

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-08-28T11:53:32.480

可能是另一个线程在 cout 上将输出更改为十六进制。我怀疑这些流是线程安全的。

# ios5 - kAudioSessionCategory_MediaPlayback

> ID：12158671
> 
> 赞同：1
> 
> 时间：2012-08-28T11:50:40.303
> 
> 标签：ios5, core-audio, audioqueue

试图让设置属性 kAudioSessionProperty_OverrideCategoryMixWithOthers 与 AudioQueue 中的 MediaPlayback 类别一起使用。最终，我需要应用程序与其他音频混合并在后台模式下播放，这是 MediaPlayback 类别和 OverrideCategoryMixWithOthers 将完成的。但是，在设置 mixWithOthers 属性时，应用程序会崩溃。有什么建议么？

米克

# ruby-on-rails - Rails has_many through with condition, build new

> ID：12158690
> 
> 赞同：4
> 
> 时间：2012-08-28T11:52:35.273
> 
> 标签：ruby-on-rails, ruby-on-rails-3, has-many-through

I've got users and organisations with a join model UsersOrganisation. Users may be admins of Organisations - if so the is_admin boolean is true.

If I set the is_admin boolean by hand in the database, Organisations.admins works as I'd expect.

In the console, I can do `Organisation.first.users << User.first` and it creates an organisations_users entry as I'd expect.

However if I do `Organisation.first.admins << User.last` it creates a normal user, not an admin, ie the is_admin boolean on the join table is not set correctly.

Is there a good way of doing this other than creating entries in the join table directly?

```
class User < ActiveRecord::Base

  has_many :organisations_users
  has_many :organisations, :through => :organisations_users

end

class Organisation <  ActiveRecord::Base

  has_many :organisations_users
  has_many :users, :through => :organisations_users
  has_many :admins, :through => :organisations_users, :class_name => "User", 
            :source => :user, 
            :conditions => {:organisations_users => {:is_admin => true}}

end

class OrganisationsUser < ActiveRecord::Base

  belongs_to :organisation
  belongs_to :user

end 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-28T12:34:44.657

You can always override the << method of the association:

```
has_many :admins do

  def <<(user)
    user.is_admin = true
    self << user
  end

end 
```

(Code has not been checked)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-28T12:42:10.577

there are some twists with the `has_many :through` and the `<<` operator. But you could overload it like in @Erez answer.

My approach to this is using scopes (I renamed OrganisationsUsers to Memberships):

```
class User < ActiveRecord::Base

  has_many :memberships
  has_many :organisations, :through => :memberships

end

class Organisation <  ActiveRecord::Base
  has_many :memberships
  has_many :members, :through => :memberships, :class_name => 'User', :source => :user

  # response to comment:
  def admins 
    memberships.admin
  end
end

class Memberships < ActiveRecord::Base

  belongs_to :organisation
  belongs_to :user

  scope :admin, where(:is_admin => true)
end 
```

Now I create new admins like this:

```
Organisation.first.memberships.admin.create(:user => User.first) 
```

What I like about the scopes is that you define the "kind of memberships" in the membership class, and the organisation itself doesn't have to care about the kinds of memberships at all.

**Update**:

Now you can do

`Organisation.first.admins.create(:user => User.first)`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-28T12:33:10.797

You can try below code for organization model.

```
class Organisation < ActiveRecord::Base

  has_many :organisations_users
  has_many :organisations_admins, :class_name => "OrganisationsUser", :conditions => { :is_admin => true }

  has_many :users,  :through => :organisations_users
  has_many :admins, :through => :organisations_admins, :source => :user

end 
```

# ios - 如何让每个 customLabel 在自己的行上？

> ID：12158695
> 
> 赞同：1
> 
> 时间：2012-08-28T11:53:12.100
> 
> 标签：ios, objective-c, listview, uiview, uilabel

我尝试为我的 listView 中的书签功能创建一个带有 3 个标签、名称、书籍和章节的自定义 UIView。现在我希望标签位于 tableView 单元格中的不同行中。如果您查看下面的代码，哪种方法是最好的方法，或者您会怎么做才能在自己的行上制作标签？我是 Objective C 和 Iphone 开发的新手。

结果在每个单元格的列表中应如下所示：

```
--------
name

book

chapter
-------- 
```

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
static NSString *CellIdentifier = @"BookmarkCell";
UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier];

if (cell == nil)
{
    cell = [[UITableViewCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:CellIdentifier];
}
Bookmark *item = [self.items objectAtIndex:indexPath.row];

NSArray *chunks = [item.name componentsSeparatedByString: @","];

NSString *name;
NSString *book;
NSString *chapter;

if ([chunks count] > 0)
{
    name = [chunks objectAtIndex:0];
    if ([chunks count] > 1)
    {
        book = [chunks objectAtIndex:1];
        if ([chunks count] > 2)
        {
            chapter = [chunks objectAtIndex:2];
        }
    }
}

UIView * pNewContentView= [[UIView alloc] initWithFrame:cell.contentView.bounds];
CGRect labelFrame= pNewContentView.bounds;
labelFrame.size.width= labelFrame.size.width * 0.25;

UILabel* pLabel1=[[UILabel alloc] initWithFrame:labelFrame];
[pNewContentView addSubview:pLabel1];

labelFrame.origin.x= labelFrame.size.width;
UILabel* pLabel2=[[UILabel alloc] initWithFrame:labelFrame];
[pNewContentView addSubview:pLabel2];

labelFrame.origin.x= labelFrame.origin.x + labelFrame.size.width;
UILabel* pLabel3=[[UILabel alloc] initWithFrame:labelFrame];
[pNewContentView addSubview:pLabel3];

[cell.contentView addSubview:pNewContentView];

[pLabel1 setText:(name)];    
[pLabel2 setText:(book)];  
[pLabel3 setText:(chapter)];       

//cell.textLabel.text = name;
//cell.detailTextLabel.text = book;

return cell;
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-28T12:01:23.373

全部替换`x`为`y`和`width`。`height`检查输出并调整标签的高度和宽度以满足您的要求。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-28T12:09:49.353

也许您在 Interface Builder 中创建自定义单元格然后在 cellForRowAtIndexPath 中设置您的单元格会更容易，有很多关于此的演示教程。

如果您想以编程方式执行此操作，那么它应该如下所示：

```
UILabel *name = [[UILabel alloc] initWithFrame:CGRectMake(10,15,300,20)];
name.text = @"some name";
UILabel *book = [[UILabel alloc] initWithFrame:CGRectMake(10,25,300,20)];
book.text = @"some book";
UILabel *chapter = [[UILabel alloc] initWithFrame:CGRectMake(10,35,300,20)];
chapter = @"chapter";

[cell.contentView addSubview:name];
[cell.contentView addSubview:book];
[cell.contentView addSubview:chapter]; 
```

# asp.net - MVC RedirectToAction 和负载平衡

> ID：12158702
> 
> 赞同：2
> 
> 时间：2012-08-28T11:53:36.273
> 
> 标签：asp.net, asp.net-mvc, asp.net-mvc-3, iis-7

对于特定请求，我需要使用 TempData 将请求重定向到另一个操作。我知道 TempData 使用会话来存储数据。

如果请求到达 server01 并且请求使用 TempData 重定向到另一个操作，请求会保留在 server01 上还是会转到 server02？如果它转到 server02 ，我将无法正确处理 TempData。

有没有办法将特定重定向的请求保留在 server01 上？还是我必须创建一个 cookie 来指向我的数据库上的数据并检查是否存在 cookie 的请求？

问候

注意：负载平衡由服务器所在网络之外的设备处理，并且服务器不在 IIS Web 场中。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-28T11:58:35.090

> 有没有办法将特定重定向的请求保留在 server01 上？

您需要使用`StateServer`或[存储您的会话](http://msdn.microsoft.com/en-us/library/ms178586.aspx)`SQLServer`，而不是. 另一种可能性是将您的负载均衡器配置为始终将来自同一 IP 的请求发送到同一台服务器。`InProc`

当然，所有这些都是非常糟糕的想法。实现这一点的最佳方法是简单地摆脱会话和 TempData 并以无状态的 RESTFul 方式设计您的应用程序。我最喜欢`sessionState`的模式如下：

```
<sessionState mode="Off" /> 
```

# jquery-ui - 循环键/值对

> ID：12158703
> 
> 赞同：0
> 
> 时间：2012-08-28T11:53:50.297
> 
> 标签：jquery-ui, jquery

我正在尝试循环我在查询中收到的键/值对并控制台输出电子邮件地址。我做错了什么？

我收到的 JSON...

```
{"ERRORS":[],"DATA":[{"INCENTIVEID":"1","CREATED":"","EMAIL":"email","RECIPIENTID":"1","NAME":"glyn","ACTIVE":0,"MODIFIED":"","MOBILE":"11111111111"},{"INCENTIVEID":"1","CREATED":"","EMAIL":"eee","RECIPIENTID":"2","NAME":"edem","ACTIVE":0,"MODIFIED":"","MOBILE":"11111111111"}],"MESSAGES":[]} 
```

当前脚本

```
$(document).ready(function(){
        var digits = /^\d{11}$/;
        $("#mobile").on("keyup keypress", function(){

            if (digits.test(this.value)) {
                $.ajax({
                    url: "http://api.domain.com/recipients/lookup",
                    data: {
                        mobile: this.value,
                        incentiveID:  $("#incentiveID").val()
                    },
                    success: function(data){
                        $.each(data.DATA, function(index, value) {
                          console.log(value.EMAIL);
                        });
                         console.log(data);
                    }
                });
            }
        });
}); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-28T11:55:39.800

电子邮件在`DATA`数组内；您应该使用`data.DATA`而不是 just `data`，它指的是整个 JSON 对象：

```
$.each(data.DATA, function(index, value) {
  console.log(value.EMAIL);
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-28T13:22:30.300

在下面添加，问题已解决。有谁知道为什么？

类型：“GET”，数据类型：“json”，

# intellisense - VS 2012 RC 中的 Intellisense 不适用于 SignalR 类

> ID：12158707
> 
> 赞同：1
> 
> 时间：2012-08-28T11:54:09.037
> 
> 标签：intellisense, visual-studio-2012, signalr

我已经导入了 SignalR Nuget 包，并且 SignalR 示例在我的项目中运行良好。但即使在拥有所有必需的 using 语句之后，我也无法让智能感知为 SignalR 中的类（如 Hub 类）工作。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-28T12:02:46.740

集线器代理是在运行时动态生成的，因此您不会获得任何智能感知。

您可以使用 Hubify.exe（参见[http://weblogs.asp.net/davidfowler/archive/2012/06/10/signalr-0-5-1-released.aspx](http://weblogs.asp.net/davidfowler/archive/2012/06/10/signalr-0-5-1-released.aspx)上的 Hubify 部分）生成静态 javascript-文件。

或者您可以创建自己的 T4 模板来做同样的事情。见：[https ://github.com/SignalR/SignalR/issues/106](https://github.com/SignalR/SignalR/issues/106)

**更新：**

关于 C# 的智能感知 你不会得到`Clients`and的智能感知`Caller`，因为它们是动态的。

> 缺少编译时类型检查也会导致缺少 IntelliSense。因为 C# 编译器不知道对象的类型，所以它无法枚举其属性和方法。这个问题可以通过额外的类型推断来解决，就像在 Visual Studio 的 IronPython 工具中所做的那样，但目前 C# 不提供它。 [http://visualstudiomagazine.com/articles/2011/02/01/understanding-the-dynamic-keyword-in-c4.aspx](http://visualstudiomagazine.com/articles/2011/02/01/understanding-the-dynamic-keyword-in-c4.aspx)

```
public class Chat : Hub 
  {
      public void Send(string message) 
      {
          // No intellisense for addMessage, sorry
          Clients.addMessage(message);
      }
  } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-29T09:25:55.573

[在此处](https://github.com/SignalR/SignalR/wiki/Hubs)查看 SignalR 文档 ，Hub.Caller 和客户端本质上是动态的。
[dynamic](http://msdn.microsoft.com/en-us/magazine/gg598922.aspx)是 .Net 4 中添加的新关键字，并且 dosent 支持编译时检查，因此您无法获得动态对象的智能感知。仅在运行时检查所有动态对象。因此，即使您自己创建了一个动态对象，例如

```
dynamic d = new ExpandoObject(); 
```

并尝试这样做`"d."`。你不会得到任何智能感知，因为框架知道动态对象中存在什么。并且只会在运行时被发现。

# django - 如何在 Django 中使用 DeleteView 显示相关项目？

> ID：12158714
> 
> 赞同：27
> 
> 时间：2012-08-28T11:54:37.293
> 
> 标签：django, view, cascade

我正在做一个视图来删除（使用来自 Django 的通用视图 DeleteView）模型中的一个实例，但它会级联并从其他模型中删除实例：

```
url(r'^person/(?P<pk>\d+)/delete/$', login_required(DeleteView.as_view(model=Person, success_url='/person/', template_name='delete.html')), name='person_delete'), 
```

我想要做的是显示将要删除的相关项目的列表，就像管理界面一样，例如：

```
Are you sure you are going to delete Person NAMEOFTHEPERSON?
By deleting it, you are also going to delete:
CLASSNAME1: CLASSOBJECT1 ; CLASSNAME2: CLASSOBJECT2 ; CLASSNAME3: CLASSOBJECT3 ; etc 
```

* * *

## 回答 #1

> 赞同：52
> 
> 时间：2012-08-28T15:29:21.473

您可以使用[`Collector`](https://github.com/django/django/blob/master/django/db/models/deletion.py)Django 使用的类来确定要在级联中删除哪些对象。实例化它，然后`collect`通过您要删除的对象调用它。它需要一个列表或查询集，所以如果你只有一个对象，只需放入一个列表中：

```
from django.db.models.deletion import Collector

collector = Collector(using='default') # or specific database
collector.collect([some_instance])
for model, instance in collector.instances_with_model():
    # do something 
```

`instances_with_model`返回一个生成器，因此您只能在循环的上下文中使用它。如果您更喜欢可以操作的实际数据结构，`admin`contrib 包有一个`Collector`名为 的子类[`NestedObjects`](https://github.com/django/django/blob/master/django/contrib/admin/util.py)，它的工作方式相同，但有一个`nested`返回分层列表的方法：

```
from django.contrib.admin.utils import NestedObjects

collector = NestedObjects(using='default') # or specific database
collector.collect([some_instance])
to_delete = collector.nested() 
```

更新：从 Django 1.9 开始，*django.contrib.admin.util*被重命名为*django.contrib.admin.utils*

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2016-09-16T14:10:15.573

我使用管理员对 get_deleted_objects() 的缩减修改，并使用它在删除视图的 get_context 中扩展我的上下文：

### 在某处定义

```
from django.contrib.admin.utils import NestedObjects
from django.utils.text import capfirst
from django.utils.encoding import force_text

def get_deleted_objects(objs): 
    collector = NestedObjects(using='default')
    collector.collect(objs)
    #
    def format_callback(obj):
        opts = obj._meta
        no_edit_link = '%s: %s' % (capfirst(opts.verbose_name),
                                   force_text(obj))
        return no_edit_link            
    #
    to_delete = collector.nested(format_callback)
    protected = [format_callback(obj) for obj in collector.protected]
    model_count = {model._meta.verbose_name_plural: len(objs) for model, objs in collector.model_objs.items()}
    #
    return to_delete, model_count, protected 
```

### 那么在你看来

```
from somewhere import get_deleted_objects
#
class ExampleDelete(DeleteView):
    # ...
    def get_context_data(self, **kwargs):
        #
        context = super().get_context_data(**kwargs)
        #
        deletable_objects, model_count, protected = get_deleted_objects([self.object])
        #
        context['deletable_objects']=deletable_objects
        context['model_count']=dict(model_count).items()
        context['protected']=protected
        #
        return context 
```

### 现在您可以在模板中使用它们

```
<table>
  <tr>
    <th>Name</th>
    <th>Amount</th>
  </tr>
  {% for model_name, object_count in model_count %}
    <tr>
      <td>{{ model_name|capfirst }}</td>
      <td>{{ object_count }}</td>
    </tr>
  {% endfor %}
</table>
<p>
  <ul>
    {{ deletable_objects|unordered_list }}
  </ul>
</p> 
```

### 大多数只是从 django admin 复制/粘贴/编辑/删除不需要的内容

# php - 如何在 Mustache 模板中使用 switch case？

> ID：12158715
> 
> 赞同：4
> 
> 时间：2012-08-28T11:54:43.697
> 
> 标签：php, switch-statement, mustache

我在核心 PHP 中使用 Mustache 模板将 PHP 页面转换为模板。现在我想在模板中使用 switch case，例如：

```
<?php
    switch ($gift_card['FlagStatus']) {
        case 'P': 
            echo "Pending";
            break;
        case 'A':
            echo "Active";
            break;
        case 'I':
            echo "Inactive";
            break;
    } 
```

?>

它的类似 Mustache 翻译应该是什么？提前致谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-10-25T14:06:10.017

如果您需要做的不仅仅是从 switch 语句中输出单个值，最简单的解决方法是创建一系列布尔值，每个状态一个：`isPending`，`isInactive`等`isActive`，然后为每个可能性使用单独的部分：

```
{{#isPending}}
Your gift card is pending. It will be activated on {{activationDate}}.
{{/isPending}}
{{#isActive}}
Your gift card is active. Its balance is ${{balance}}.
{{/isActive}}
{{#isInactive}}
Your gift card is inactive. Go <a href="/active/{{cardId}}">here</a> to reactivate it.
{{/isInactive}} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-24T23:12:55.903

switch 语句将放在 php 中，例如：

## 在 php

```
$card_status = null;
switch ($gift_card['FlagStatus']) {
        case 'P': 
            $card_status = "Pending";
            break;
        case 'A':
            $card_status =  "Active";
            break;
        case 'I':
            $card_status = "Inactive";
            break;
    }

render_template('giftcard_stuff', array('card_status'=>$card_status); 
```

## 在模板中

```
<div>The status of this gift card is: {{card_status}}</div> 
```

当您尝试将这样的标志放入下拉列表中时，事情会变得更加棘手，在这种情况下，您必须提前写出数组，例如：

```
$status_dropdown = [
    ['flag_display'=>'Pending', 'flag'=>'P'],
    ['flag_display'=>'Active', 'flag'=>'A'],
    ['flag_display'=>'Inactive', 'flag'=>'I'],
]; 
```

# streaming - 使用 live555 进行 JPEG 流式传输

> ID：12158716
> 
> 赞同：2
> 
> 时间：2012-08-28T11:54:55.257
> 
> 标签：streaming, jpeg, rtsp, live555

我想通过实时 555 流式传输 JPEG 图像或运动 JPEG 文件。但问题是在实时 555 中 Jpegs 的实现不可用。任何人都可以帮忙？？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-12-14T14:09:03.343

您可以找到发布到开发邮件列表[http://lists.live555.com/pipermail/live-devel/2012-February/014672.html](http://lists.live555.com/pipermail/live-devel/2012-February/014672.html)的实现。代码和示例可用，但此修改被 live555 维护者拒绝。

首先我们需要实现一个`MJPEGVideoSource`than can feed a `JPEGVideoRTPSink`。

```
#include "JPEGVideoSource.hh"

class MJPEGVideoSource : public JPEGVideoSource
{
        public:
                static MJPEGVideoSource* createNew (UsageEnvironment& env, FramedSource* source)
                {
                        return new MJPEGVideoSource(env,source);
                }
                virtual void doGetNextFrame()
                {
                    if (m_inputSource)
                        m_inputSource->getNextFrame(fTo, fMaxSize, afterGettingFrameSub, this, FramedSource::handleClosure, this);                     
                }
                virtual void doStopGettingFrames()
                {
                    FramedSource::doStopGettingFrames();
                    if (m_inputSource)
                        m_inputSource->stopGettingFrames();                    
                }
                static void afterGettingFrameSub(void* clientData, unsigned frameSize,unsigned numTruncatedBytes,struct timeval presentationTime,unsigned durationInMicroseconds) 
                {
                                MJPEGVideoSource* source = (MJPEGVideoSource*)clientData;
                                source->afterGettingFrame(frameSize, numTruncatedBytes, presentationTime, durationInMicroseconds);
                }        
                void afterGettingFrame(unsigned frameSize,unsigned numTruncatedBytes,struct timeval presentationTime,unsigned durationInMicroseconds)
                {
                    int headerSize = 0;
                    bool headerOk = false;
                    fFrameSize = 0;

                    for (unsigned int i = 0; i < frameSize ; ++i)
                    {
                        // SOF
                        if ( (i+8) < frameSize  && fTo[i] == 0xFF && fTo[i+1] == 0xC0 )
                        {
                             m_height = (fTo[i+5]<<5)|(fTo[i+6]>>3);
                             m_width = (fTo[i+7]<<5)|(fTo[i+8]>>3);
                        }
                        // DQT
                        if ( (i+5+64) < frameSize && fTo[i] == 0xFF && fTo[i+1] == 0xDB)
                        {
                            if (fTo[i+4] ==0)
                            {
                                memcpy(m_qTable, fTo + i + 5, 64);
                                m_qTable0Init = true;
                            }
                            else if (fTo[i+4] ==1)
                            {
                                memcpy(m_qTable + 64, fTo + i + 5, 64);
                                m_qTable1Init = true;
                            }
                        }
                        // End of header
                        if ( (i+1) < frameSize && fTo[i] == 0x3F && fTo[i+1] == 0x00 )
                        {
                             headerOk = true;
                             headerSize = i+2;
                             break;
                        }
                    }

                    if (headerOk)
                    {
                        fFrameSize = frameSize - headerSize;
                        memmove( fTo, fTo + headerSize, fFrameSize );
                    }

                    fNumTruncatedBytes = numTruncatedBytes;
                    fPresentationTime = presentationTime;
                    fDurationInMicroseconds = durationInMicroseconds;
                    afterGetting(this);
                }
                virtual u_int8_t type() { return 1; };
                virtual u_int8_t qFactor() { return 128; };
                virtual u_int8_t width() { return m_width; };
                virtual u_int8_t height() { return m_height; };
                u_int8_t const* quantizationTables( u_int8_t& precision, u_int16_t& length )
                {
                    length = 0;
                    precision = 0;
                    if ( m_qTable0Init && m_qTable1Init )
                    {
                        precision = 8;
                        length = sizeof(m_qTable);
                    }
                    return m_qTable;            
                }

        protected:
                MJPEGVideoSource(UsageEnvironment& env, FramedSource* source) : JPEGVideoSource(env),
                m_inputSource(source),
                m_width(0),
                m_height(0),
                m_qTable0Init(false),
                m_qTable1Init(false)
                {
                    memset(&m_qTable,0,sizeof(m_qTable));
                }
                virtual ~MJPEGVideoSource() 
                { 
                    Medium::close(m_inputSource); 
                }

        protected:
                FramedSource* m_inputSource;
                u_int8_t      m_width;
                u_int8_t      m_height;
                u_int8_t      m_qTable[128];
                bool          m_qTable0Init;
                bool          m_qTable1Init;
}; 
```

接下来我们可以将其用作视频源以构建一个简单的 RTSP 服务器：

```
#include "liveMedia.hh"
#include "BasicUsageEnvironment.hh"
#include "GroupsockHelper.hh"
#include "MJPEGVideoSource.hh"

char const* inputFileName = "test.mjpeg";

int main(int argc, char** argv) {
  // Begin by setting up our usage environment:
  TaskScheduler* scheduler = BasicTaskScheduler::createNew();
  UsageEnvironment* env = BasicUsageEnvironment::createNew(*scheduler);

  // Create 'groupsocks' for RTP and RTCP:
  struct in_addr destinationAddress;
  destinationAddress.s_addr = chooseRandomIPv4SSMAddress(*env);

  const unsigned short rtpPortNum = 18888;
  const unsigned short rtcpPortNum = rtpPortNum+1;
  const unsigned char ttl = 255;

  const Port rtpPort(rtpPortNum);
  const Port rtcpPort(rtcpPortNum);

  Groupsock rtpGroupsock(*env, destinationAddress, rtpPort, ttl);
  rtpGroupsock.multicastSendOnly(); // we're a SSM source
  Groupsock rtcpGroupsock(*env, destinationAddress, rtcpPort, ttl);
  rtcpGroupsock.multicastSendOnly(); // we're a SSM source

  // Create a 'JPEG Video RTP' sink from the RTP 'groupsock':
  RTPSink* videoSink = JPEGVideoRTPSink::createNew(*env, &rtpGroupsock);

  // Create (and start) a 'RTCP instance' for this RTP sink:
  const unsigned estimatedSessionBandwidth = 5000; // in kbps; for RTCP b/w share
  const unsigned maxCNAMElen = 100;
  unsigned char CNAME[maxCNAMElen+1];
  gethostname((char*)CNAME, maxCNAMElen);
  CNAME[maxCNAMElen] = '\0'; // just in case
  RTCPInstance* rtcp = RTCPInstance::createNew(*env, &rtcpGroupsock,
                estimatedSessionBandwidth, CNAME,
                videoSink, NULL /* we're a server */,
                True /* we're a SSM source */);
  // Note: This starts RTCP running automatically

  RTSPServer* rtspServer = RTSPServer::createNew(*env, 8554);
  if (rtspServer == NULL) {
    *env << "Failed to create RTSP server: " << env->getResultMsg() << "\n";
    exit(1);
  }
  ServerMediaSession* sms = ServerMediaSession::createNew(*env, "testStream", inputFileName,"Session streamed by \"testMJPEGVideoStreamer\"",
                       True /*SSM*/);
  sms->addSubsession(PassiveServerMediaSubsession::createNew(*videoSink, rtcp));
  rtspServer->addServerMediaSession(sms);

  char* url = rtspServer->rtspURL(sms);
  *env << "Play this stream using the URL \"" << url << "\"\n";
  delete[] url;

  // Start the streaming:
  *env << "Beginning streaming...\n";
  // Open the input file as a 'byte-stream file source':
  ByteStreamFileSource* fileSource = ByteStreamFileSource::createNew(*env, inputFileName);
  if (fileSource == NULL) {
    *env << "Unable to open file \"" << inputFileName
     << "\" as a byte-stream file source\n";
    exit(1);
  }

  // Create the MJPEG video source:
  MJPEGVideoSource* videoSource = MJPEGVideoSource::createNew(*env, fileSource);

  // Finally, start playing:
  *env << "Beginning to read from file...\n";
  videoSink->startPlaying(*videoSource, NULL, NULL);

  env->taskScheduler().doEventLoop();

  return 0; 
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-10-25T10:25:59.587

希望你已经做到了，但如果没有 -[使用 live555 看到这个 Jpeg Streaming](http://dbmibu.blogspot.in/2011/06/streaming-jpeg-images-over-rtp-using.html) 这与你要求流式传输图像/Jpegs 做同样的事情。对于 MJpeg，您必须执行相同的过程。

# c - g_signal 延迟 (C, GTK+)

> ID：12158725
> 
> 赞同：1
> 
> 时间：2012-08-28T11:55:52.327
> 
> 标签：c, gtk, gobject

我有一个带有两个按钮（**A**，**B**）和一个绘图区域（**C**）的小 GTK-Application 。当我单击**A**时，应重新计算**C的大小并使用 gtk_widget_set_size_request() 进行设置。**这将导致一个*暴露事件*，其处理程序将计算一些数据。此外，单击**A将在****B**处发出*clicked*信号，其处理程序需要由**C**的*expose-event*计算的数据。

 *****事实上，一切正常，但*暴露事件*以某种方式延迟，并且*单击*的处理程序在之前被调用并且数据（您可能猜到了）丢失了。

```
a_handler() {
   new_size = calculate_size();
   gtk_widget_set_size_request(C, new_size); //Will cause expose-event
   g_signal_emit_by_name(B, "clicked");
}

b_handler() {
   calculate_something(data); //Error
}

c_handler() {
   draw_something();
   data = calcluate_data();
} 
```

我能做些什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-28T13:04:16.207

Gtk（和大多数其他 GUI 工具包）在一个线程中完成所有绘制和事件处理。因此，当暴露事件被发出时，它会进入一个队列，只有在`a_handler`返回后才会被处理。

我认为最好的方法是将计算移到其他地方，如果没有充分的理由将其绑定到 GUI 绘图中。例如，可能有一个从和`calculate_data`调用的单独方法。`b_handler``c_handler`

The next best way is to call `gdk_window_process_updates` to force the expose event to be handled immediately: [http://developer.gnome.org/gdk/stable/gdk-Windows.html#gdk-window-process-updates](http://developer.gnome.org/gdk/stable/gdk-Windows.html#gdk-window-process-updates)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-28T12:14:15.063

丑陋的解决方法通常是添加对 的调用`gtk_main_iteration()`，例如在调用`gtk_widget_set_size_request()`和信号发射之间。*****

# javascript - ExtJS 使网格为 100% 高度

> ID：12158732
> 
> 赞同：5
> 
> 时间：2012-08-28T11:56:07.597
> 
> 标签：javascript, extjs4

我在这里发现了 2 个类似的问题，但它们对我没有帮助，我的代码是：

```
var grid = Ext.create('Ext.grid.Panel', {
    autoScroll: true,
    // if set this to any numeric value, then everything works just good, but 
    // i was hoping that `ExtJS` already can detect browser window height, am i wrong ?
    height: '100%', 
    title: 'Products',
    store: store,
    itemId: 'product_grid',
    columns: [.. columns skipped ...],
    plugins: [ rowEditing ],
    dockedItems: [ ..addRow button here..]
});
var panel = Ext.create('Ext.panel.Panel', {
    autoScroll: true,
    items: [
    {
        xtype: 'productGrid'
    }
    ]
});
Ext.create('Ext.container.Viewport', {
    layout: 'fit',
    items: panel
}); 
```

我需要的是填充整个浏览器窗口的可滚动网格，但这里的网格不会在高度上扩展，所以如果网格有 0 行，那么它有 0 高度，当我按下“添加行”时，添加的行看起来被滚动条和这个看起来很丑。

此外，当网格包含的行数超出浏览器窗口的容量时，会出现页面滚动条（不是网格的滚动条！），这会滚动整个页面，因此按钮栏会滚动，这也是不可取的和丑陋的。

任何想法我的设置有什么问题。

**更新：**

最后修复它，中间面板也应该包含**layout: 'fit'**

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-28T12:07:12.283

你可以在这里做几件事。首先，使用`fit`视口上的布局，因为它会强制其子组件填充可用空间。其次，网格是面板。您不需要在面板中嵌套网格，并且可能不应该这样做。

该`autoScroll`配置不适用于网格。默认情况下启用双向滚动，但如果您需要更改它，请使用该`scroll`属性。最后，`height`配置只接受一个数字，不适用于字符串或百分比。如果您指定一个高度，它会覆盖布局管理器给定的任何高度，并且布局不需要它`fit`。

```
var grid = Ext.create('Ext.grid.Panel', {
    title:       'Products',
    store:       store,
    itemId:      'product_grid',
    columns:     [/* ... */],
    plugins:     [rowEditing],
    dockedItems: [/* ... */]
});

var viewport = Ext.create('Ext.container.Viewport', {
    layout: 'fit',
    items:  [grid]
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-12-03T18:51:53.597

奇怪的是，将 viewConfig 添加到网格中，解决了我的 gridpanel 在具有 vbox 布局的浮动窗口中没有显式高度的问题，仅包含一个表单和一个网格。

```
xtype: 'gridpanel',
store: 'DCLocations',
columnLines: true,
autoScroll : true,
viewConfig : {
        emptyText : i18n.message.noresultstodisplay,
},
```

# php - MySQL和PHP根据while循环内的函数打印最高日期

> ID：12158736
> 
> 赞同：0
> 
> 时间：2012-08-28T11:56:17.880
> 
> 标签：php, mysql, function, date, loops

`MySQL`我像这样打印行`loop`：

```
$list_students = mysql_query(
"SELECT 
    s.student_id, s.student_firstname, s.student_lastname, s.isActive, 
    c.city_name,
    sd.student_startdate, sd.student_enddate
        FROM students s 
            INNER JOIN cityselections c ON c.city_id = s.student_city_id
            INNER JOIN studentdates sd ON sd.student_id = s.student_id
                WHERE s.student_city_id NOT LIKE '1'");

while ($row = mysql_fetch_array($list_students)) 
{
    echo "<tr>\n";
        echo "<td>" . $row['student_lastname'] . ",  " . $row['student_firstname'] ."</td>\n";
        echo "<td>" . $row['student_startdate'] . "</td>\n";
        echo "<td>" . $row['student_enddate'] . "</td>\n";          
    echo "</tr>\n";
} 
```

我也有这个`function`：

```
function calculateNextDate($startDate, $days)
{
        $dateTime = new DateTime($startDate);

        while($days) {
            $dateTime->add(new DateInterval('P1D'));    

            if ($dateTime->format('N') < 6) {
                $days--;
            }
        }

        return $dateTime->format('Y-m-d');
} 
```

给定开始日期和数字，Wich 计算日期，不包括周末。例如：

```
calculateNextDate ($list_students['student_startdate'],15) 
```

现在我希望这个函数在while循环中工作，使用另一个**可以为每个返回多行的**`MySQL`查询：**`student_id`**

```
SELECT scp.cpl_id, scp.student_id, SUM(scpe.scpe_estimated_days) AS total FROM studentcourseplan scp
    INNER JOIN studentcourseplanelements scpe ON scpe.scpe_cpl_id = scp.cpl_id
            GROUP BY scp.cpl_id 
```

这可以输出：

```
+--------+------------+-------+
| cpl_id | student_id | total |
+--------+------------+-------+
|    195 |         34 |    74 |
|    204 |         85 |   153 |
|    205 |         85 |   199 |
|    206 |         65 |    11 |
+--------+------------+-------+ 
```

**我需要该函数来计算内部输出的最大数量`loop`并打印此输出的日期**

.. 对于每个学生 ( `student_id`)。

如何才能做到这一点？

# javascript - 根据下拉列表显示/隐藏文本框

> ID：12158737
> 
> 赞同：6
> 
> 时间：2012-08-28T11:56:20.803
> 
> 标签：javascript, html

例如，我有一个代码：

```
<form name="myform">
<table>
<td>
<select name="one" onchange="if (this.selectedIndex=='other'){this.myform['other'].style.visibility='visible'}else {this.myform['other'].style.visibility='hidden'};">
<option value="" selected="selected">Select...</option>
<option value="1">1</option>
<option value="2">3</option>
<option value="3">3</option>
<option value="4">4</option>
<option value="5">5</option>
<option value="6">6</option>
<option value="7">7</option>
<option value="other">Other</option>
</select>
<input type="textbox" name="other" style="visibility:hidden;"/>
</td>
</table>
</form> 
```

I need the textbox to appear when option "other" is selected. 上面的代码不起作用:(

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-08-28T12:02:34.520

`selectedIndex`给出一个索引，即一个数字，所以“其他”的索引是 8，你可以从 select 元素的 value 属性中获取所选选项的值。要访问表单，控件正在使用元素表单属性`this.form`，您的表格单元格也应该在一行中。

```
<form name="myform">
<table>
<tr>
<td>
<select name="one" onchange="if (this.value=='other'){this.form['other'].style.visibility='visible'}else {this.form['other'].style.visibility='hidden'};">
<option value="" selected="selected">Select...</option>
<option value="1">1</option>
<option value="2">3</option>
<option value="3">3</option>
<option value="4">4</option>
<option value="5">5</option>
<option value="6">6</option>
<option value="7">7</option>
<option value="other">Other</option>
</select>
<input type="textbox" name="other" style="visibility:hidden;"/>
</td>
</tr>
</table>
</form> 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-28T12:03:21.873

```
 <form name="myform">
       <table>
         <td>
           <select name="one" onchange="if (this.options[this.selectedIndex].value =='other'){document.myform['other'].style.visibility='visible'}else {document.myform['other'].style.visibility='hidden'};">
             <option value="" selected="selected">Select...</option>
             <option value="1">1</option>
             <option value="2">3</option>
             <option value="3">3</option>
             <option value="4">4</option>
             <option value="5">5</option>
             <option value="6">6</option>
             <option value="7">7</option>
             <option value="other">Other</option>
          </select>
         <input type="textbox" name="other" style="visibility:hidden;"/>
       </td>
    </table>
 </form>​ 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-08-28T12:07:00.937

```
<form name="myform">
<table>
<td>
<select name="one" id="mySelect">
<option value="" selected="selected">Select...</option>
<option value="1">1</option>
<option value="2">3</option>
<option value="3">3</option>
<option value="4">4</option>
<option value="5">5</option>
<option value="6">6</option>
<option value="7">7</option>
<option value="other">Other</option>
</select>
<input type="textbox" name="other" style="visibility:hidden;"/>
</td>
</table>
</form>

<script type="text/javascript">
$('#mySelect').bind('onchange',function(){
if (this.value==='other')
{
this.myform['other'].style.visibility='visible'
}
else {
this.myform['other'].style.visibility='hidden'};
}
</script> 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2016-04-13T07:26:24.887

```
$(document).ready(function () {
        $('#types').change(function () {
            if ($('#types').val() == 'Other') {
                $('#other').show();
            }
            else {
                $('#other').hide();
            }
        });
    });

<body>
<form id="form1" runat="server">
    <div>

   <select id="types" name="types">
            <option value="Type 1">Type 1</option>
            <option value="Type 2">Type 2</option>
            <option value="Type 3">Type 3</option>
            <option value="Other">Other</option>
        </select>

        <input type="text" id="other" name="other" style="display: none;" />
    </div>
</form> 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-28T12:04:07.030

`this.selectedIndex`返回一个整数而不是字符串。类似 0,1,2 的东西，对于“其他人”来说可能是 8。`8 == 'other'`永远不可能是真的

试试这个

```
onchange="if (this.options[this.selectedIndex].value =='other')" 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-08-28T12:09:44.900

首先将您的内容包含**`td`**在 a 中**`tr`**，然后下面是 DEMO

[http://jsfiddle.net/3Snmh/5/](http://jsfiddle.net/3Snmh/5/)

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2015-12-23T12:42:36.260

```
<form name="form" action="" method="post">
<table>
<tr>
<td>
<select name="one" onchange="if (this.value=='yes'){this.form['yes'].style.visibility='visible'}else {this.form['yes'].style.visibility='hidden'};">
<option value="" selected="selected">Select...</option>
<option value="yes">yes</option>
<option value="no">no</option>
</select>
<input type="text" name="yes" style="visibility:hidden;"/>
</td>
</tr>
</table>
</form> 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2016-08-18T09:41:35.287

**jQuery**

```
$(document).ready(function() {
        $("select").change(function() {
            $(this).find("option:selected").each(function() {
                if ($(this).attr("value") == "class") {
                    $(".box").not(".class_name").hide();
                    $(".class_name").show();
                    $(".box").not(".class_name").val("");
                } 

                else if ($(this).attr("value") == "ref") {
                    $(".box").not(".ref_id").hide();
                    $(".ref_id").show();
                    $(".box").not(".ref_id").val("");
                }

                else {
                    $(".box").hide();
                }
            });
        }).change();
    }); 
```

**HTML**

```
<div>
            <select>
                <option>Choose</option>
                <option value="class">Class</option>
                <option value="ref">Particular</option>
            </select>
        </div>
        <div class="class_name box">
            Class Name: <input type="text" name="c">
        </div>
        <div class="ref_id box">
            Reference_id : <input type="text" name="r">
        </div> 
```

# exception - Spring AOP 和 RestEasy ExceptionMapper 冲突

> ID：12158741
> 
> 赞同：1
> 
> 时间：2012-08-28T11:56:39.767
> 
> 标签：exception, aop, resteasy, spring-aop

我有一个为我的 REST 资源之一编写的 ExceptionMapper。我还为同一资源定义了一个 Spring AOP 方面。现在的问题是，如果 REST 资源抛出异常，则不会调用 ExceptionMapper。我知道这是因为 AOP 代理对象。（如果我删除它工作的方面。）无论如何我可以让 ExceptionMapper 和方面都工作。

# php - 关于变量

> ID：12158744
> 
> 赞同：-2
> 
> 时间：2012-08-28T11:56:49.533
> 
> 标签：php, variables, global

因此，如果我刚刚创建的 php 文件中有一个变量，如果我将它与其他 php 文件放在同一个文件夹中并将其包含到其中一个文件中，我可以使用该文件中的任何变量，对吗？对不起，如果它有点笨拙

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-28T12:00:17.743

基本上是的。运行[`include`](http://php.net/manual/en/function.include.php)相当于粘贴代码。

具体来说，来自 PHP 手册：

> 当一个文件被包含时，它包含的代码继承了包含发生的行的变量范围。**从那时起，调用文件中该行的任何可用变量都将在被调用文件中可用**。但是，包含文件中定义的所有函数和类都具有全局范围。

一般来说，PHP 手册都是自我解释的。您会在此找到基本问题的大多数答案。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-28T12:04:36.053

简而言之，是的。

[从文档](http://php.net/manual/en/language.variables.scope.php)

> 变量的范围是定义它的上下文。大多数情况下，所有 PHP 变量都只有一个作用域。这个单一范围也涵盖了包含和必需的文件。例如：

```
<?php
$a = 1;
include 'b.inc';
?> 
```

> 这里 $a 变量将在包含的 b.inc 脚本中可用。

请注意，这也适用于另一个方向：

```
<?php
  /* a.inc */
  $a = 1;
?>

<?php
  /* b.php */
  include 'a.inc';
  echo $a;
?> 
```

# java - 如何在java中使用CsvReader从csv文件中读取特定行

> ID：12158745
> 
> 赞同：3
> 
> 时间：2012-08-28T11:56:55.123
> 
> 标签：java, csv

我正在使用 CsvReader 库并想从 java 中的 csv 文件中读取特定行。样本 csv ：

```
**Name**,     **Address**,        **Email-Id**
student,    studentaddress,     student@email.com 
student2,   student2address,    student2@email.com 
employee,   employeeaddres1,    employee@email.com

```

我想阅读名称为“student2”的行。你能提供一个解决方案吗？

提前致谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-28T11:58:40.673

由于行的字节大小不同，并且 CSV 格式不包含索引，因此您不能直接[随机访问](http://en.wikipedia.org/wiki/Random_access)一行。

因此，您必须阅读所有前面的行并简单地跳过它们，直到您到达所需的行。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-16T09:52:30.683

我对这种类型的操作有一些经验，试试这个 API [http://opencsv.sourceforge.net/](http://opencsv.sourceforge.net/)

我们可以选择跳过第一`n`条记录

例如：`CSVReader reader = new CSVReader(new FileReader("yourfile.csv"), '\t', '\'', 2);`

这表明它将跳过前 2 条记录。看透它

[其他 API](http://commons.apache.org/csv/)

# python - 日本系统上的 Jython 'unknown enocoding ms932'

> ID：12158747
> 
> 赞同：3
> 
> 时间：2012-08-28T11:57:03.727
> 
> 标签：python, unicode, utf-8, jython, python-unicode

我在 Jython 2.5.1 中编写了一个程序，它在我的 Windows 7 机器上运行良好，但在日本机器上它抛出一个异常，说**“未知编码'ms932'”**

我发现*codecs.java*是唯一打印*未知编码“xyz”*消息的模块

此文件加载*aliases.py*确实包含

```
# cp932 codec
'932'                : 'cp932',
'ms932'              : 'cp932',
'mskanji'            : 'cp932',
'ms_kanji'           : 'cp932', 
```

文件 cp932.py 包含

```
 import _codecs_jp, codecs 
```

但是.. _codecs_jp 不**存在**，[正如本页中所讨论的那样](http://web.archiveorange.com/archive/v/8tc1Zc2rV3qiUcy9zPlA) 有没有人知道从这里去哪里？

[http://web.archiveorange.com/archive/v/8tc1Zc2rV3qiUcy9zPlA](http://web.archiveorange.com/archive/v/8tc1Zc2rV3qiUcy9zPlA)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-10T03:33:54.350

日语博主和其他人不推荐以下内容，它也适用于我：

使用参数调用 jython `-C utf-8`。

请注意，显然仍然存在一些限制，例如无法访问日文路径名或将日文打印到控制台。我还没有遇到过这些，所以我无法评论解决方法。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-28T12:02:28.053

你应该使用`sys.setdefaultencoding`即

```
sys.setdefaultencoding(name) 
```

或者只是把

```
# -*- coding: utf-8 -*- 
```

在脚本的开头。

> 设置 Unicode 实现使用的当前默认字符串编码。如果 name 不匹配任何可用的编码，则引发 LookupError。此功能仅供站点模块实现使用，并在需要时由 sitecustomize 使用。一旦被站点模块使用，它就会从 sys 模块的命名空间中删除。

[http://docs.python.org/library/sys.html](http://docs.python.org/library/sys.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-07-27T09:16:33.213

这是 Jython 错误问题 #1066：

[http://bugs.jython.org/issue1066](http://bugs.jython.org/issue1066)

# jquery-ui - 如何处理后端冷融合处理脚本响应

> ID：12158768
> 
> 赞同：1
> 
> 时间：2012-08-28T11:58:40.517
> 
> 标签：jquery-ui, jquery-plugins, coldfusion, plupload

我已经使用 ColdFusion 后端脚本（可在[https://gist.github.com/1116037](https://gist.github.com/1116037)获得）实现 plupload。

上传页面中的 url 属性是 url : '../upload.cfc?method=upload'，这只是调用 cfc 脚本中的一个函数。它工作正常。该脚本还创建了一个名为“response”的变量来保存信息上传的文件。

我遇到的问题是访问“响应”变量中保存的信息。在所有文件上传到服务器后，我想在表格中显示该信息。

我正在使用 queue_widget 来满足我的需要'认为需要触发一个事件（onComplete）来调用一个函数来处理变量中的信息，但我不知道该怎么做。

我需要访问保存在“响应”变量中的信息，最好是在 ColdFusion 代码中。有没有人设法让 plupload 与 ColdFusion 一起工作？

任何帮助、指导或编码将不胜感激。

这是我使用的完整代码：

这是主页 - queue_widget.cfm

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" dir="ltr">
<head>
<meta http-equiv="content-type" content="text/html; charset=UTF-8"/>
<title>Plupload - Queue widget example</title>
<link rel="stylesheet" href="../../js/jquery.plupload.queue/css/jquery.plupload.queue.css" type="text/css" media="screen" />
<script type="text/javascript" src="https://ajax.googleapis.com/ajax/libs/jquery/1.5.1/jquery.min.js"></script>
<script type="text/javascript" src="../../js/plupload.js"></script>
<script type="text/javascript" src="../../js/plupload.flash.js"></script>
<script type="text/javascript" src="../../js/jquery.plupload.queue/jquery.plupload.queue.js"></script>
</head>
<body>
  <h1>Queue widget example</h1>
  <p>Shows the jQuery Plupload Queue widget and under different runtimes.</p>
  <div style="float: left; margin-right: 20px">
  <h3>Flash runtime</h3>
    <div id="flash_uploader" style="width: 700px;">Your browser does not have Flash installed!</div>
  </div>  
  <br style="clear: both" />
<cfoutput><cfset mnum=6></cfoutput>
<script type="text/javascript">
$(function() {
    // Setup flash version
$("#flash_uploader").pluploadQueue({
    // General settings
    runtimes : 'flash',
    url : '../upload.cfc?method=upload',
    max_file_size : '1mb',
    max_file_count: <cfoutput>#mnum#</cfoutput>, // You can limit the num of files that can be uploaded by manipulating the mnum variable above
    unique_names : false,
    multiple_queues : true,
    multi_selection: true,
    filters : [
        {title : "Image files", extensions : "jpg,gif,png"}
    ],
    init : {
        FilesAdded: function(up, files) {
            plupload.each(files, function(file) {
            if (up.files.length > <cfoutput>#mnum#</cfoutput>) {
                up.removeFile(file);
                }
            });
            if (up.files.length >= <cfoutput>#mnum#</cfoutput>) {
                $('#pickfiles').hide('slow');
            }
        },
        FilesRemoved: function(up, files) {
            if (up.files.length < 1) {
                $('#pickfiles').fadeIn('slow');
            }
        }
    },
    resize : {width : 300, height : 10000, quality : 90}, // forces images to be resized to a width of 300px if wider than 300px
    preinit: attachCallbacks,
    UploadComplete: function(up, file, response) {
        if ($("#result").length > 0){
            $("#results").prepend(info.response);
        } else {
            $("#flash_uploader").after("<div id='results'>"+info.response+"</div>");
        }
    },
    flash_swf_url : '../../js/plupload.flash.swf'
});
});
// Where should we go after upload
function attachCallbacks(Uploader){
    Uploader.bind('FileUploaded', function(Up, File, response){
        function IsJson(response) {
        alert('Response from server: ' + response.file); // for testing only
        counter++
        var newRow = '<tr><td><input type="hidden" name="file_'+counter+'" value="'+response.file+'">'
        newRow += 'Label the file: '+response.file+' <input type="text" name="filename_'+counter+'"></td></tr>'
        $("#detail").append(newRow)
    }});
};
</script>
<div id="results"></div>
<table id="detail">
</table>
<cfif IsDefined('response')><cfdump var="#response#"></cfif>
</body>
</html> 
```

这是后端处理页面 - upload.cfc

```
<cfcomponent>
  <cffunction name="upload" access="remote" returntype="struct" returnformat="json" output="false">
    <cfscript>
      var uploadDir = expandPath('/uploads/'); // should be a temp directory that you clear periodically to flush orphaned files 
      var uploadFile =  uploadDir & arguments.NAME;
      var response = {'result' = arguments.NAME, 'id' = 0};
      var result = {};
    </cfscript>     

    <!--- save file data from multi-part form.FILE --->
    <cffile action="upload" result="result" filefield="FILE" destination="#uploadFile#" nameconflict="overwrite"/>

    <cfscript>
      // Example: you can return uploaded file data to client 
      response['size'] = result.fileSize;
      response['type'] = result.contentType;
      response['saved'] = result.fileWasSaved;
      return response;
    </cfscript>
  </cffunction>
</cfcomponent> 
```

你可以在这里试试上面的例子：[url] www.turn2cash.co.uk/plupload/examples/jquery/queue_widget.cfm [/url]

如上所述，该脚本可以很好地上传（在这种情况下）最多 6 个由 mnum 变量确定的图像。我需要帮助的是如何访问上传的文件（通过页面刷新）并能够操作它们。

我已经设置了一个示例（使用 cffileupload）我在这里 [url] www turn2cash.co.uk/a/index.cfm [/url] 虽然这工作正常，但它需要刷新页面，这就是我试图避免。

请提供任何可以提供的帮助。

2012 年 9 月 7 日添加

我尝试了 Miguel 建议的两种方法，但没有取得任何积极的结果。他们实际上导致 UI 根本没有播种。但是我发现了这个并尝试了它：

```
preinit: attachCallbacks,
        UploadComplete: function(up, file, response) {
            if ($("#result").length > 0){
                $("#results").prepend(info.response);
            } else {
                $("#flash_uploader").after("<div id='results'>"+info.response+"</div>");
            }
        },
        flash_swf_url : '../../js/plupload.flash.swf'
    });
});
// Where should we go after upload
function attachCallbacks(Uploader){
    Uploader.bind('FileUploaded', function(Up, File, Response){
        alert('Response from server: ' + Response.response);
});
};
</script> 
```

我现在收到一条警报显示：

```
Response from server: {"saved":true,"result":"home.png","id":"0","size":"5988","type":"image"} 
```

这至少证明 cfc 脚本正在工作并且正在返回“响应”变量。我仍然不知道如何利用这些信息，因为我不了解 jquery、ajax 或 javascript。如果可以的话请帮忙。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-05T13:35:47.330

我之前发布的链接有示例代码。很抱歉将此作为答案发布，但由于我没有代表，我无法发表评论。

我认为您的部分困惑在于请求处理。您的示例底部有这行代码。

```
<cfif IsDefined('response')><cfdump var="#response#"></cfif> 
```

这永远不会触发，因为在您对服务器进行 javascript ajax 调用以进行文件上传之前，会处理冷融合页面。您将需要在 javascript 中处理响应。

您是否从 attachCallbacks 函数中看到此警报？

```
alert('Response from server: ' + response.file); // for testing only 
```

# c - 将长期运行的子进程的输出重定向到父进程

> ID：12158771
> 
> 赞同：0
> 
> 时间：2012-08-28T11:58:51.047
> 
> 标签：c, unix

我有两个可执行文件 - 父进程和它的子进程，以长模式运行（例如服务器等）。我所需要的只是将孩子的 stdout 和 stderr 重定向到父进程并将它们写入文件或打印到 tty，现在没关系。

如果我们谈论简单的孩子，这是非常简单的任务，但是对于具有部分输出的长期运行的孩子来说，这是一个问题。

例如，让我们看看流行的解决方案`pipe`（错误检查和其他不重要的部分省略）：

**父.c**

```
#include <stdio.h>
#include <unistd.h>
#include <stdlib.h>

int main(int argc, const char *argv[])
{
  int link[2];
  pid_t pid;
  char str[4096];

  pipe(link);
  pid = fork();

  if (pid == 0) {
    dup2(link[1], STDOUT_FILENO);
    close(link[0]);
    execl("/path_to_bin/fast_child", "fast_child", (char *)0);
  }
  else 
  {
    close(link[1]);
    read(link[0], str, sizeof(str));
    printf("Pipe contents: %s\n", str);
    wait(NULL);
  }

  return 0;
} 
```

**fast_child.c**

```
#include <stdio.h>
#include <unistd.h>

int main(int argc, const char *argv[])
{
  printf("I'm fast child\n");
  return 0;
} 
```

以出色且无问题的方式使用这种类型的子进程在父进程中获取 str(out|err) ，但是将此代码用作子进程会导致父进程中的输出消失问题：

**慢孩子.c**

```
#include <stdio.h>
#include <unistd.h>

int main(int argc, const char *argv[])
{
  for (;;)
  {
    printf("I'm slow child\n");
    sleep(1);
  }
  return 0;
} 
```

我正在考虑使用套接字作为解决问题的解决方案，但我确信这不是那么有效的方法，Unix 提供了更好的工具来做到这一点（像往常一样:)

谢谢你。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-28T12:13:00.673

您需要不时刷新孩子的输出，否则父任务将看不到任何内容。`fflush(stdout)`在适当的地方使用。或者您可以关闭 stdout 上的缓冲，但这可能会对您的孩子的性能产生影响，因为它会对每个写入的字符进行系统调用。

# r - T检验以查找R中的差异表达基因

> ID：12158773
> 
> 赞同：-2
> 
> 时间：2012-08-28T11:59:00.800
> 
> 标签：r

我有一个包含基因和 mrna 的矩阵。

```
ID_REF    GSM362168 GSM362169 GSM362170 GSM362171 GSM362172 GSM362173 GSM362174      
244901_at   5.171072  5.207896  5.191145  5.067809  5.010239  5.556884  4.879528      
244902_at   5.296012  5.460796  5.419633  5.440318  5.234789  7.567894  6.908795 
```

我想使用 t 检验从矩阵中找到差异表达的基因，我进行了以下操作。

```
stat=mt.teststat(control,classlabel,test="t",na=.mt.naNUM,nonpara="n") 
```

我收到以下错误

```
Error in is.factor(classlabel) : object 'classlabel' not found. 
```

我不确定如何分配分类标签。这是找到差异表达基因的正确方法吗？

类标签应该是对应于观察（列）类标签的整数向量。我不明白那是什么。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-28T12:31:18.143

如果您打开 mt.teststat 的文档：

```
?mt.teststat 
```

向下滚动到最后，您将看到一个使用“Golub 数据”的示例：

```
data(golub)
teststat <- mt.teststat(golub, golub.cl) 
```

如果你看一下*golub.cl*，就会清楚类*标签*向量应该是什么样子：

```
golub.cl
 [1] 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 1 1 1 1 1 1 1 1 1 1 1 
```

在这种情况下，0 或 1 是两类样本的标签。向量中应该有与样本一样多的值，其顺序与样本在数据矩阵中出现的顺序相同。您还可以查看：

```
?golub 
```

> golub.cl：表示肿瘤类别的数字向量，27 例急性淋巴细胞白血病（ALL）病例（代码 0）和 11 例急性髓细胞白血病（AML）病例（代码 1）。

因此，您需要创建一个类似的向量，无论您为自己的数据拥有多少类，都带有标签 (0, 1, ...)。

# sorting - 带有布尔字段的 Lucene neo4j 排序

> ID：12158777
> 
> 赞同：0
> 
> 时间：2012-08-28T11:59:13.633
> 
> 标签：sorting, lucene, neo4j

我已经用一个并不总是存在的布尔属性索引了一些文档（neo4j 的节点）。例如。节点1

> 标签：“标签A”

节点2：

> 标签：“标签 A”（注意，与 node1 相同的标签）特殊：true

目标是让查询“标签 A”的节点 2 高于节点 1。

这里的代码：

```
Index<Node> fulltextLucene = graphDb.index().forNodes( "my-index" );
Sort sort = new Sort(new SortField[] {SortField.FIELD_SCORE,
                     new SortField("special", SortField.????, true) }); 
IndexHits<Node> results = fulltextLucene.query( "label", new QueryContext( "label A").sort(sort)); 
```

我怎样才能做到这一点？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-28T15:36:23.477

您确定要索引只有 2 个可能值（真、假）的属性吗？因为索引意味着创建一个唯一值，通过它您可以知道数据库中的位置。这种独特的价值取决于财产的价值。

当您有许多具有相同值的属性时，索引会创建所谓的冲突 - 简单地说，它有多个索引查询的结果。当您按顺序遍历图形时（没有索引），您还必须从几个结果中进行选择。因此，在只有 2 个属性值的许多节点上建立索引可能毫无价值。

我建议使用此优先级值创建 1 个节点，并在您需要优先级节点时与其建立关系。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-08-25T10:11:56.427

如果你想像这样对一个布尔值进行排序，你可以使用字符串排序：SortField.STRING。

这将对值进行 alfabetally 排序，因此首先为 false，然后为 true。没有值（空）来表示假。

# delphi - 当通过 COM 实例化 dll 时，delphi 2006 中的 Debuggin ISAPI dll 失败

> ID：12158778
> 
> 赞同：0
> 
> 时间：2012-08-28T11:59:13.123
> 
> 标签：delphi, debugging, com, asp-classic

我们有一个在 IIS 中运行的 delphi ISAPI dll Web 应用程序。该应用程序允许通过 ASP 页面可以实例化的 COM 对象进行扩展（com 对象驻留在 ISAPI dll 中）。当我们在调试时，一旦调用实例化 COM 对象的 ASP 页调试失败，就不会再有断点了。

此问题仅在 Windows 7 中出现。在 Windows XP 上调试工作正常。（问题是我们不能继续在 XP 上开发！）任何对可能导致此问题的原因的见解将不胜感激。

注意我们使用的是 Delphi 2006

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-28T18:26:16.073

我记得在 Windows XP 上进行调试时，我会将隔离级别设置为高，然后自己启动 dllhost.exe 以获得由 IIS 在 COM+ 系统中自动生成的 ApplicationID。

在 Windows 7 和新的 IIS 上，此部分已修改，IIS 现在运行自己的 w3wp.exe 进程，这些进程分组在应用程序池中。检查您的 ASP 项目（或 ISAPI 扩展？）的应用程序池的隔离设置和最大进程，并尝试使用正确的参数自行启动 w3wp.exe 进程或附加到已启动的进程。

# java - 使用@RunWith Annotation 和 powerMock 时的问题

> ID：12158779
> 
> 赞同：14
> 
> 时间：2012-08-28T11:59:14.920
> 
> 标签：java, junit, mockito, powermock

最初我在junits中只使用了Mockito，所以我在@RunWith注释中使用了SpringJUnit4ClassRunner.class，即

```
@RunWith(SpringJUnit4ClassRunner.class) 
```

由于哪个spring依赖注入工作正常并且正在通过一个bean

```
@Autowired

Someservice someservice ; 
```

但现在，我也将 PowerMock 集成在其中。

因此，根据[doc](http://code.google.com/p/powermock/wiki/MockStatic)，我已将 @RunWith 注释中提到的类替换为

```
@RunWith(PowerMockRunner.class) 
```

但是现在， someservice 即将为空。有没有办法在 @RunWith 注释中同时使用**SpringJUnit4ClassRunner.class**和**PowerMockRunner.class**

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2017-02-09T10:12:15.220

[我知道这个线程很旧，但是从 2014 年和这个pull request](https://github.com/powermock/powermock/pull/6)开始添加它是很好的，您可以使用`@PowerMockRunnerDelegate`注释将运行上下文“委托”给`SpringJUnit4ClassRunner`（或任何其他跑步者）。

上面的代码看起来像：

```
@RunWith(PowerMockRunner.class)
@PowerMockRunnerDelegate(SpringJUnit4ClassRunner.class)
@PrepareForTest(X.class);
public class MyTest {

    // Tests goes here
    ...
} 
```

有了这个注解，你就不再需要 PowerMock 规则了！

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2012-08-28T12:00:57.883

您必须使用[PowerMockRule](http://code.google.com/p/powermock/wiki/PowerMockRule)。

```
@RunWith(SpringJUnit4ClassRunner.class) 
@PrepareForTest(X.class)
public class MyTest {
    @Rule
    public PowerMockRule rule = new PowerMockRule();

    // Tests goes here
    ...
} 
```

有关使用 PowerMock 和 Mockito 进行 Spring 集成测试的完整示例，您可以查看这个[maven 项目](http://powermock.googlecode.com/svn/tags/powermock-1.4.12/examples/spring-mockito/)。

```
svn co http://powermock.googlecode.com/svn/tags/powermock-1.4.12/examples/spring-mockito/
cd spring-mockito/ 
```

查看 powermock 的依赖项。

```
less pom.xml 
```

然后运行测试

```
mvn test 
```

你应该得到以下测试结果：

```
Tests run: 4, Failures: 0, Errors: 0, Skipped: 0 
```

# android - 我们如何强制 Android 系统从特定布局文件夹中获取特定布局

> ID：12158783
> 
> 赞同：2
> 
> 时间：2012-08-28T11:59:47.227
> 
> 标签：android, android-layout

我在 layout 和 layout-xlarge 文件夹中有 main.xml。在 Galaxy Note 等屏幕更宽的手机中，我想使用 layout-xlarge 文件夹中的 main.xml。如何重定向 android 系统以根据条件从代码动态使用该特定布局文件？

例如：如果某些条件为真，则使用布局文件夹中的 main.xml 文件，如果为假，则使用 layout-xlarge 文件夹中的 main.xml。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-28T12:08:49.810

**如果您使用**XHDPI设备，您将****无法**重定向 Android 系统，它会从**layout-xhdpi 获取**。例如，**三星 S3**会将布局作为**layout-xhdpi** .. 它总是取决于设备密度。**

 **假设 DPI 为 120dpi - layout-ldpi

DPI 为 160dpi - layout-mdpi

DPI 为 240 和 256dpi - 布局-hdpi

DPI > 256dpi - layout-xhdpi

以上所有给定值都是近似值。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-28T12:07:32.850

快速解决方案：

1.  复制 main.xml 并将其命名为 main_phone_large.xml

2.  然后在你的主要活动中。

    ```
    //whatever width you decide for 
    if(getResources().getDisplayMetrics().widthPixels > 500){
    setContentView(R.layout.main_phone_large.xml);
    }else
    setContentView(R.layout.main.xml); 
    ```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-28T12:09:03.550

你不用做任何事情，只要你为不同的密度提供不同的布局，系统会自动选择适合设备屏幕的布局。您也不必为所有密度提供布局。如果某些元素不需要不同的布局，只需在布局文件夹中创建一个 xml，它将用于所有屏幕密度。

我强烈建议你阅读官方文档的这个页面：http: [//developer.android.com/guide/practices/screens_support.html](http://developer.android.com/guide/practices/screens_support.html)**

# c# - 浏览器客户端和服务器端代码中的加密

> ID：12158784
> 
> 赞同：0
> 
> 时间：2012-08-28T12:00:02.137
> 
> 标签：c#, javascript, encryption

我想用 javascript 加密数据，而发布的数据想用 c# 代码解密。是否有任何想法或任何代码可以使用相同的算法来做到这一点。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-28T12:23:52.963

由于`JavaScript`在最终用户的网络浏览器中执行，因此您的加密代码和算法会暴露出来。这意味着代码很可能很容易被逆转并被用来对付你。

您所要求的更好的替代方法是使用 SSL 通过 Internet 安全地发送数据。如果您需要，您可以在数据到达您的服务器并且将其存储在您的数据库中或传递到另一个系统之前对其进行加密。

有关在您的网站上激活的信息（如果您正在运行） ，请参阅[此处。](http://learn.iis.net/page.aspx/144/how-to-set-up-ssl-on-iis/#IISManager)`SSL``IIS 7`

# symfony - Sonata AdminBundle 和 UserBundle：我怎样才能找到这个参数？

> ID：12158787
> 
> 赞同：1
> 
> 时间：2012-08-28T12:00:34.523
> 
> 标签：symfony, symfony-sonata, sonata-admin

在“完成”了 Symfony2 的学习之后，我开始查看 Sonata Admin 和 User 包，因为这些包可以帮助我在未来的一些工作中。

首先，在我看来，一切都非常复杂且难以理解。但是通过几个小时的体系结构研究，应用于真实的文件、类等，我想我已经完全理解了这个包的本质是什么以及它是如何工作的。

我唯一了解的整个事情的“黑洞”是，我在哪里可以找到用于的参数`sonata.user.admin.user`，称为`sonata.user.admin.user.entity`？据我所知，该参数仅指向负责从数据库读取/写入操作的用户类。

我问这个是因为，经过几十分钟的寻找，我找到这些信息的唯一地方是

```
./app/cache/prod/appProdProjectContainer.php
./app/cache/dev/appDevDebugProjectContainer.xml
./app/cache/dev/appDevDebugProjectContainer.php 
```

这个变量有可能只在那里定义吗？
如果是，因为被放入`cache`文件夹？加载时间更快吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-28T12:50:42.933

您还应该查看`DependencyInjection`文件夹中的扩展 - 有时参数`yaml`以一种方式定义，但在连接加载后，它们会转换为另一种：

如果`parameters`你有类似的东西：

```
your_user: 'Somename' 
```

并在`DependencyInjection`其中解析如下：

```
foreach($config as $key => $value) {
    $container->setParameter('your.prepend.'.$key, $value);
} 
```

然后最后你会用 index 编译你的参数`your.prepend.your_user`。

我想，在提到的捆绑包中使用了相同的逻辑。

* * *

**更新：**

所描述逻辑的使用[示例](https://github.com/sonata-project/SonataUserBundle/blob/2.0/DependencyInjection/SonataUserExtension.php#L131)

# java - ClassNotFoundException 仅当 JAR 已签名时

> ID：12158789
> 
> 赞同：2
> 
> 时间：2012-08-28T12:00:49.847
> 
> 标签：java, jar, applet, signing

这是一个难题！

我在 JAR 中有一个小程序。当 JAR 被签名时——无论是*自签名*还是使用 DigiCert 证书——我`ClassNotFoundException`在主小程序类上得到一个。当我*不*签署小程序时，它加载得很好 - （`SecurityException`由于未签署代码，不计算预期）。

但是我可以解压已签名的 JAR 并找到它应该在的地方。

最奇怪的是，直到上周，设置都运行良好。相同的主类、自签名、相同的 JS/HTML 部署组合等。

有什么想法吗？

**这是错误消息：**

```
java.lang.ClassNotFoundException: com.spraklab.ilos.applet.Applet
at sun.plugin2.applet.Applet2ClassLoader.findClass(Applet2ClassLoader.java:195)
at sun.plugin2.applet.Plugin2ClassLoader.loadClass0(Plugin2ClassLoader.java:249)
at sun.plugin2.applet.Plugin2ClassLoader.loadClass(Plugin2ClassLoader.java:179)
at sun.plugin2.applet.Plugin2ClassLoader.loadClass(Plugin2ClassLoader.java:160)
at java.lang.ClassLoader.loadClass(ClassLoader.java:247)
at sun.plugin2.applet.Plugin2ClassLoader.loadCode(Plugin2ClassLoader.java:690)
at sun.plugin2.applet.Plugin2Manager.createApplet(Plugin2Manager.java:3045)
at sun.plugin2.applet.Plugin2Manager$AppletExecutionRunnable.run(Plugin2Manager.java:1497)
at java.lang.Thread.run(Thread.java:680) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-28T12:18:54.470

在上面的代码中，您尝试切换安全小程序类加载器。从 Java 1.2 开始，这是不允许的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-30T22:52:42.130

简短版本：JAR 名称中没有连字符！

戏剧性的故事：终于！发现问题后的许多工作日。未签名时小程序加载正常，签名时出现 ClassNotFoundException。关于类加载器切换的答案让我相信我的代码中发生了一些变化。所以我把我的代码精简到最低限度。但是为了避免一直重启浏览器并清空缓存等，我只是使用了 Chrome 的隐身模式。我重建了代码。最后一切都很好。不是！然后当我在隐身之外对其进行测试时，我再次遇到了错误。

So what was the difference? An examination of the server logs showed that the Jar simply wasn't being requested from the server when in regular mode! I compared my code once again against an different app with similar embed-code, and saw only one difference: I was using a hyphen in stead of an underscore in the JAR-name - which should be allowed, and which had worked fine up until about 2 weeks ago. But wasn't there also a Java update about 2 weeks ago ...?!?!

# vba - 如何浏览 box.com 文件夹以选择文件并下载所选文件

> ID：12158792
> 
> 赞同：1
> 
> 时间：2012-08-28T12:00:50.520
> 
> 标签：vba, excel, cloud, box-api

我需要一个 excel 宏 (vba) 通过迭代现有文件夹从 box.com 中选择一个文件，同时我需要使用 excel 宏将文件从我的机器上传到 box.com 文件夹。我在网上找了很久。但是没有用。请帮助或尝试提供一些想法如何实现这一目标。

提前致谢。

-编辑

我正在使用以下代码获取身份验证令牌。但是我在 .send(url) 的地方收到一条错误消息。错误消息是“无法解析服务器名称或地址”。

```
Function getAuthToken()

    Dim WinHttpReq As WinHttp.WinHttpRequest
    Dim api_key As String

    api_key = "{api_key}"

    Set WinHttpReq = New WinHttp.WinHttpRequest

   strUrl = "https://www.box.net/api/1.0/rest?action=get_ticket&api_key=" & api_key

  WinHttpReq.Open Method:="GET", url:=strUrl, async:=False
  WinHttpReq.Send
  getTicket = WinHttpReq.responseText
  Debug.Print getTicket

End Function 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-28T23:55:55.473

不是 vba 专家，我怀疑如果你用 vba 标签标记你的问题，你会得到更多答案。但是，一些快速浏览表明 vba 可以通过执行以下操作来调用 REST api：

```
Dim MyURL as String
MyURL = "http://api.box.com/2.0/folders/0.xml"
Set objHTTP = CreateObject("MSXML2.ServerXMLHTTP")

With objHTTP
    .Open "GET", MyURL, False
    .setRequestHeader "Content-Type", "application/x-www-form-urlencoded"
    .setRequestHeader "Authorization", "BoxAuth api_key=<your api key>&auth_token=<your auth token>
    .send (MyURL)
End With 
```

我会听从真正的 VBA 专家的意见，但大致遵循这些原则的东西应该可以工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-10-04T15:43:09.413

是的，这令人沮丧。我尝试了像 Peter 一样使用 WinHttp.WinHttpRequest.5.1 和 MSXML2.ServerXMLHTTP 的代码，并且两者都得到了一个零长度的字符串。没有错误信息或任何东西。

我安装了 cURL 并测试了 URL。它在那里工作得很好。下面的脚本也适用于通用 JSON Web 服务，例如 jsonplaceholder.typicode.com。

所有这一切让我认为 Box.com 正在接收消息，检测到它来自未经批准的来源，并且没有返回任何内容。. . 可能出于安全原因。

```
Option Explicit
Const URL As String = "https://api.box.com/2.0/folders/0 -H ""Authorization: Bearer MyToken"""
'Const URL As String = "https://jsonplaceholder.typicode.com/posts/1"
Sub Test()

    Dim winHTTP As Object
'    Set winHTTP = CreateObject("WinHttp.WinHttpRequest.5.1")
    Set winHTTP = CreateObject("MSXML2.ServerXMLHTTP")

    winHTTP.Open "GET", URL
    winHTTP.setRequestHeader "Content-Type", "application/json"
    winHTTP.send
    Debug.Print winHTTP.ResponseText

    If Len(winHTTP.ResponseText) = 0 Then
        MsgBox "blank string returned"
    Else
        Dim objResponse As Object
        Set objResponse = JsonConverter.ParseJson(winHTTP.ResponseText) 'Converter from Tim Hall - https://github.com/VBA-tools/VBA-JSON
    End If

 End Sub 
```

# objective-c - 在这种情况下，主队列/当前队列和主线程/后台线程之间的区别？

> ID：12158793
> 
> 赞同：3
> 
> 时间：2012-08-28T12:00:52.463
> 
> 标签：objective-c, ios, multithreading, queue

我正在执行以下方法：

**运动处理器.m**

```
-(void)startAccelerationUpdates
{
    [motionManagerstartDeviceMotionUpdatesToQueue:[NSOperationQueue mainQueue]withHandler:^(CMDeviceMotion *motion, NSError *error){.....}
} 
```

在后台线程上，如下所示：

```
[currentMotionHandler performSelectorInBackground:@selector(startAccelerationUpdates) withObject:nil]; 
```

但是上述方法使用`main Queue`（在主线程上）执行必要的更新，即使我在后台线程上调用它。所以在后台线程或主线程上执行加速更新，我'我很困惑..？

更有趣的是，当我再次在后台线程上调用上述方法时，但这次使用`current Queue`，我没有得到任何更新。有人可以解释一下在以下位置运行某些东西的区别：

```
 1\. a background thread but on the main queue

 2\. a background thread but on the current queue 

 3\. the main thread but on the main queue  

 4\. the main thread but on the current queue 
```

在当前的实施中？谢谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-28T13:23:47.493

我会试一试。首先，在没有被 NSOperationQueue 类引用告知的情况下，我们无法推断出任何关于“mainQueue”将在哪个线程上运行的信息。阅读它，我们看到实际上队列在主线程上运行其操作，UI 使用的主线程，因此您可以在发布到该队列的操作中更新 UI。虽然没有说出来，但这些操作必须是串行的，因为它们是由 runLoop 执行的（它们也有可能被抢占，不是 100% 肯定的）。

currentQueue 的目的是使正在运行的操作可以确定它们所在的队列，因此它们可以潜在地在该队列上排队新操作。

1.  一个后台线程，但在主队列上

不可能 - NSOperation 的 mainQueue 始终与 mainThread 相关联。

1.  一个后台线程，但在当前队列中

当您创建一个 NSOperationQueue 并向其中添加 NSOperations 时，它们会在队列管理的后台线程上运行。任何给定的操作都可以查询它在哪个线程上，并且该线程在运行时不会改变。也就是说，该队列上的第二个操作可能会在不同的线程上运行。

1.  主线程但在主队列上

见 1)

1.  主线程但在当前队列中

如果您将操作排队到 mainQueue（我们知道它总是在 mainThread 上），并且您请求 currentQueue，它将返回 mainQueue：

```
[NSOperationQueue currentQueue] == [NSOperationQueue mainQueue]; 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-28T13:28:07.507

您将队列与线程混淆了。尤其是由于NSPertionQueue已经被重写为使用GCD，队列和特定线程之间几乎没有联系（除了主线程的特殊情况）。

操作/块/任务——无论你想怎么称呼它们——都被插入到队列中，“工作线程”将它们拉下来并执行它们。您几乎无法控制哪个确切的线程将执行该工作——除了主队列。 *请注意，这并不完全正确，因为它是一种简化，但它是正确的，除非您正在做一些非常高级和具体的事情。*

因此，您的 4 个场景都没有任何意义，因为例如，您不能在“后台线程但在主队列上”运行某些东西。

现在，您的方法`startAccelerationUpdates`专门告诉 CMMotionManager 将您的处理程序放在主队列中。因此，当`startAccelerationUpdates`被调用时，它会在它正在运行的任何线程中运行，但它会安排处理程序在主线程上执行。

为了使事情变得有些复杂，您`startAccelerationUpdates`通过调用来调用该方法`performSelectorInBackground`。同样，您不知道实际调用哪个线程`startAccelerationUpdates`，但它不会是主线程。

但是，在您的情况下，该线程所做的只是调用`startAccelerationUpdates`正在启动运动更新，并告诉它们在主线程上处理（通过主队列）。

现在，这里有一些东西可以阻止您直接从文档中使用主队列来处理运动事件......

> 因为处理的事件可能会以很高的速率到达，所以不建议使用主操作队列。

不幸的是，你的陈述

> 更有趣的是，当我再次在后台线程上调用上述方法时，但这次使用当前队列，我没有得到任何更新。

没有提供足够的信息来确定您尝试了什么、您是如何尝试的，或者您认为它为什么不起作用。所以，我会猜测......这可能是错误的。

我将重点介绍您对`the current Queue`.

我假设你的意思是你`[NSOperationQueue mainQueue]`用`[NSOperationQueue currentQueue]`.

好吧，让我们看看它有什么作用。您将使用“其他”队列，而不是使用主队列。哪一个？好吧，让我们看一下文档：

> **当前队列**
> 
> 返回启动当前操作的操作队列。
> 
> `+`(id)当前队列
> 
> **返回值**
> 
> 启动操作的操作队列，如果无法确定队列，则为 nil。
> 
> **讨论**
> 
> 您可以在正在运行的操作对象中使用此方法来获取对启动它的操作队列的引用。从正在运行的操作的上下文之外调用此方法通常会导致返回 nil。

请注意讨论部分。如果您在没有运行从 调用的操作时调用它`NSOperationQueue`，您将得到`nil`这意味着将没有队列可以放置您的处理程序。所以，你将一无所获。

如果要使用`NSOperationQueue`主队列以外的队列，则必须指定要使用的队列。所以，如果那是你想走的路线，只需创建你自己的操作队列来处理运动事件，然后离开！

祝你好运！

# select - 使用带有条件的 TypoScript 选择

> ID：12158800
> 
> 赞同：1
> 
> 时间：2012-08-28T12:01:30.620
> 
> 标签：select, typo3, typoscript

我得到了这个条件：

```
[globalVar = TSFE:fe_user|sesData|get_car = Katowice]
  get_carpid = TEXT
  get_carpid.value = 27  
[global] 
```

而这个选择：

```
plugin.Tx_Formhandler.settings.predef.formhandler-multistep-forms.markers.input_readonly_a_price = CONTENT
plugin.Tx_Formhandler.settings.predef.formhandler-multistep-forms.markers.input_readonly_a_price {
            table = tx_pricelist_prices_full
            select {
              pidInList = 27
              orderBy = uid
              selectFields = uid, group_a_1_3
              # possible conditions
               where = ( tx_pricelist_prices_full.uid='1' AND hidden='0' AND deleted='0')
            } 
            renderObj = COA
            renderObj {
              #value  
              1 = TEXT
              1.insertData = 1 
              1.data = field:group_a_1_3
              2 = TEXT
              2.value = *
              3 = TEXT
              3.insertData = 1 
              3.data = TSFE:fe_user|sesData|finish_day          
              stdWrap.prioriCalc = 1   
            }
} 
```

如何在 pidInList = get_carpid 行中的 SELECT 中使用定义的 get_carpid

谢谢你的帮助！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-28T12:40:25.737

您可以创建一个 cObject CASE。但这仅适用于 [a-zA-z0-9_-]

```
# TS Setup
... snip  ...
pidInList.cObject = CASE
pidInList.cObject {
  key.data = TSFE:fe_user|sesData|get_car
  key.case = lower
  default = TEXT
  default.value = 0

  # special chars are not allowed
  katowice = TEXT
  katowice.value = 27 
}
... snip  ... 
```

另一种可能性是使用常量：

```
# TS Constants
[globalVar = TSFE:fe_user|sesData|get_car = Katowice]
  get_carpid = 27  
[globalVar = TSFE:fe_user|sesData|get_car = Lublin]
  get_carpid = 28  
[global]

# TS Setup
... snip  ...
pidInList = {$get_carpid}
... snip  ... 
```

第一个解决方案更有趣，第二个对新手来说更容易 - 我猜 :)

# php - Zend Framework 2：使用 MvcEvent 设置布局

> ID：12158802
> 
> 赞同：4
> 
> 时间：2012-08-28T12:01:38.390
> 
> 标签：php, layout, zend-framework2

我想使用 mvc 事件更改布局。我尝试了以下方法：

```
// $event instanceof \Zend\Mvc\MvcEvent
$serviceManager = $event->getApplication()->getServiceManager();
$controllerLoader = $serviceManager->get('ControllerLoader');
$controllerLoader->addInitializer(function ($controller) {

    $controller->layout('layout/example');
    // OR THIS
    $controller->getEvent()->getViewModel()->setTemplate('layout/example');
}); 
```

我的方法不会产生任何错误通知或其他东西。即使`layout/example`不存在也不行。为什么可以从控制器内部更改布局，`$this->layout()`但不能从外部使用`$controller->layout()`？

我也试过这样：

```
// $event instanceof \Zend\Mvc\MvcEvent
$serviceManager = $event->getApplication()->getServiceManager();
$renderingStrategy = $serviceManager->get('DefaultRenderingStrategy');
$renderingStrategy->setLayoutTemplate('layout/example'); 
```

这也不会抛出任何错误，但不会改变任何东西。

如何在运行时从控制器外部切换布局？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-28T12:14:39.477

aww，这很容易：只需直接在事件中调用它..

```
// $event instanceof \Zend\Mvc\MvcEvent
$event->getViewModel()->setTemplate('layout/example'); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-05T01:09:25.603

```
//$this instanceof Zend\Mvc\Controller\AbstractActionController
$this->layout('layout/example'); 
```

# html - Doxygen 和 Mathjax。通过 HTML 文档导航缓慢

> ID：12158803
> 
> 赞同：4
> 
> 时间：2012-08-28T12:01:43.420
> 
> 标签：html, doxygen, mathjax

我一直在使用 Doxygen（用于文档）。

我也使用 mathjax，因为我的文档有很多数学公式。

通常一切都运行良好，但今天我注意到 HTML 页面的导航速度非常慢（比如加载 10 秒或更长时间）。

我发现（使用 CHROME 的网络工具）问题是 http GET 到**mathjax**服务器上的 mathjax.js。

这是罕见的事情，不经常发生还是mathjax服务器有问题？

这很常见吗？是否有**另一种方法**可以在不使用 Internet 连接的情况下为 HTML 文档创建**乳胶公式？**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-29T15:39:15.553

有一个选项[`MATHJAX_RELPATH`](http://www.doxygen.nl/manual/config.html#cfg_mathjax_relpath)指向包含`MathJax.js`. 它默认为网络上 MathJax 的下载位置。

因此，只需下载脚本（来自[http://cdn.mathjax.org/mathjax/latest/MathJax.js](http://cdn.mathjax.org/mathjax/latest/MathJax.js)）并将选项更改为相对于您放置它的文档输出的本地目录。文档甚至暗示了这一点。

# php - PHP 数组到 JQuery

> ID：12158808
> 
> 赞同：2
> 
> 时间：2012-08-28T12:01:55.900
> 
> 标签：php, jquery, laravel

我有一个通过会话传递给页面的数组：

```
Array(
[0] => Somewhere
Belfast
[1] => New York
) 
```

然后将数据收集到一个 JS 变量中：

```
var json_university_addresses = '<?php echo (Session::get('university_address'))?>'; 
```

在它被拆分成一个 JS 数组之前：

```
var aUniversityAddresses = json_university_addresses.split(','); 
```

我遇到的问题是“某处”和“贝尔法斯特”之间的换行符。这导致页面失败。

我可以对任何一方的数据做些什么来使这更容易吗？我想向用户显示换行符。

谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-28T12:03:49.217

使用起来不是更好（阅读：更容易）[`json_encode`](http://php.net/manual/en/function.json-encode.php)吗？然后您可以在客户端对其进行格式化。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-28T12:05:18.723

这是解决方案...

```
<?php
    $arr = array('a' => 1, 'b' => 2, 'c' => 3, 'd' => 4, 'e' => 5);
    echo json_encode($arr);
 ?> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-28T12:07:03.077

您可以直接在php代码中尝试`implode`直接输出数组：

```
var aUniversityAddresses = [<?php echo implode(",", Session::get('university_address'))?>]; 
```

[http://php.net/manual/en/function.implode.php](http://php.net/manual/en/function.implode.php)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-28T13:12:09.630

我认为你的 php 数组中有换行符，所以你应该先从会话数组中删除它们，然后在脚本中使用它

```
$sesion_array=Session::get('university_address');

$sesion_array=array_filter($sesion_array,'myFunction');

function myFunction($elem)
{
  return str_replace("\n","&nbsp;",$elem); 
} 
```

然后尝试

```
var json_university_addresses = '<?php echo $sesion_array ?>'; 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-28T12:41:15.223

在将数据输出到 javascript 之前，您应该首先[转义换行符：](https://stackoverflow.com/questions/4270665/how-to-handle-newlines-in-javascript-from-php)

```
$txt = str_replace( array( "\n", "\r" ), array( "\\n", "\\r" ), $txt); 
```

这样，您的最终代码将是：

```
$universities = Session::get('university_address');
$universities_string = implode(',', $universities);
$universities_js = str_replace( array( "\n", "\r" ), array( "\\n", "\\r" ), $universities_string); 
```

然后在 javascript 文件中：

```
var json_university_addresses = "<?php echo $universities_js ?>"; 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-08-28T12:42:29.453

好的，我设法得到了我想要的：

```
var json_university_addresses = '<?php echo (Session::has('university_address')) ? preg_replace('/[\r\n]+/', "\\n",addslashes(implode(',',Session::get('university_address')) )) : "" ?>'; 
```

谢谢您的帮助。我在这里用 JSON 快速搜索了未终止的字符串文字，并得到了上面的 preg 替换语句。

谢谢

# java - 设置 Google App Engine 应用程序有多难？

> ID：12158809
> 
> 赞同：0
> 
> 时间：2012-08-28T12:01:57.190
> 
> 标签：java, google-app-engine

我找到了一个我想玩的简单的 Google App Engine 开源应用程序。来自 Objective-C 我的 Java 知识是有限的。

是否有教程介绍了如何创建一个简单的 Google App Engine 应用程序的整个过程？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-28T12:14:27.317

我个人会推荐 python，因为您实际上可以即时编辑页面，按下刷新并立即在浏览器中查看效果。

如果我能给你两个指点

1) 每个动作都需要是一个 http 请求 - 当你开始时记住这一点，它会让你的事情变得容易

2) 忘记 SQL。并使用类之间的关系在它们之间导航。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-28T12:10:17.023

你看到了[吗](http://googcloudlabs.appspot.com/codelabexercise0.html)[？](https://developers.google.com/appengine/docs/java/gettingstarted/)[googcloudlabs.appspot.com/codelabexercise0.html](http://googcloudlabs.appspot.com/codelabexercise0.html)

# java - 数据库连接重用

> ID：12158810
> 
> 赞同：2
> 
> 时间：2012-08-28T12:01:58.313
> 
> 标签：java, jsp, jdbc

我正在编写一个简单的类来与数据库建立连接。我想在我的应用程序中重用这个类。谁能告诉我，我该怎么做？我正在使用 JSP 和 JavaBeans。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-28T12:08:21.113

创建实现 ServletContextListener 的类：

```
public class YourContextListener implements ServletContextListener {

    @Override
    public void contextInitialized(ServletContextEvent sce) {      
        //This method is called by the container on start up
    }

    @Override
    public void contextDestroyed(ServletContextEvent sce) {        
    }   

} 
```

然后在您的 web.xml 中定义该侦听器：

```
<listener>
    <listener-class>your.package.YourContextListener</listener-class>
</listener> 
```

在 contextInitialized 方法中，您可以使用以下方法获取 servlet 上下文：

```
ServletContext context = sce.getServletContext(); 
```

将您的对象添加到应用程序范围：

```
context.setAttribute("yourObject", yourObject); 
```

在应用程序的任何位置获取数据源：

```
YourObject ob = (YourObject) servletContext.getAttribute("yourObject"); 
```

# oracle - 在oracle中合并两个记录集

> ID：12158813
> 
> 赞同：0
> 
> 时间：2012-08-28T12:02:04.323
> 
> 标签：oracle, join, merge

我有以下 2 个记录集：

记录集 1：

```
Id  isVal  isVal1
1   Y      N
2   Y      N 
```

记录集 2：

```
Id  isVal  isVal1
2   N      Y
3   N      Y 
```

所需的实际记录集是：

```
Id  isVal  isVal1
1  Y       N
2  Y       Y
3  N       Y 
```

我应该使用加入吗？你能告诉我如何解决这个问题吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-28T12:16:37.307

不，您想将记录放在一起，因此您需要使用`union`.

```
select id, max(isval) as isval, max(isval1) as isval1
  from ( select id, isval, isval1
           from recordset1
          union all
         select id, isval, isval1
           from recordset1
                )
 group by id 
```

我使用`union all`，因为您不需要删除重复项，为此您将删除`all`.

`max`作品因为“`'Y'`大于” `'N'`。

我假设`'Y'`优先`'N'`于第一个记录集中的值而不是第二个记录集中的值重要。

# android - 如何在android中动态改变位图的不透明度

> ID：12158814
> 
> 赞同：1
> 
> 时间：2012-08-28T12:02:05.253
> 
> 标签：android, opacity, alpha, seekbar

> **可能重复：**
> [设置位图图像的 alpha！](https://stackoverflow.com/questions/5118894/set-alpha-of-bitmap-image)

我想在改变搜索栏的进度时改变位图的不透明度。我正在使用下面的代码。

```
opacityseekbar.setMax(255);
opacityseekbar.setProgress(255);
opacityseekbar.setOnSeekBarChangeListener( new OnSeekBarChangeListener()
                {

                    public void onStopTrackingTouch(SeekBar arg0) {
                        // TODO Auto-generated method stub

                    }

                    public void onStartTrackingTouch(SeekBar arg0) {
                        // TODO Auto-generated method stub

                    }

                    public void onProgressChanged(SeekBar arg0, int arg1, boolean arg2) {
                        // TODO Auto-generated method stub
                        Log.e("Progress Value", "Progress number" + arg1);

                        Bitmap mutableBitmap = theTattoo.isMutable()? theTattoo: theTattoo.copy(Bitmap.Config.ARGB_8888, true);
                        Canvas canvas = new Canvas(mutableBitmap);
                        int colour = ((opacityseekbar.getProgress() << 24) & 0xFF000000);
                        canvas.drawColor(colour, Mode.DST_IN);

                        theTattoo=mutableBitmap;

                    }
                }); 
```

但是，当我尝试这样做时。与搜索栏相比，它可以非常快速地改变不透明度。此外，即使我们增加搜索栏，它也总是会降低不透明度。我在做什么错？请分享您的建议。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-28T12:11:10.677

使用 a`BitmapDrawable`而不是`Bitmap`直接使用 a。

更改不透明度要容易得多：

```
BitmapDrawable bmpDrawable = new BitmapDrawable(getResources(), bitmap);
bmpDrawable.setAlpha(150); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-05T10:52:06.360

您可以使用 Color.argb .. 这是示例代码。

```
canvas.drawColor(Color.argb(alpha, red, green, blue)); 
```

其中 alpha 是不透明度，因此您可以在 alpha 中使用您的 progess 值。

这里 aplha, red, green & blue 必须是 0 到 255

在您的情况下，您必须每次通过相同的 RGB 只需更改 Alpha 值

# actionscript-3 - AIR BitmapData.draw 慢

> ID：12158818
> 
> 赞同：2
> 
> 时间：2012-08-28T12:02:32.470
> 
> 标签：actionscript-3, flash, air, bitmapdata

我正在处理需要调整大小的大型位图数据，做了一些测试，我意识到相同的代码在 AIR 中运行速度太慢了。

这是代码：

```
import flash.display.BitmapData;
import flash.geom.Matrix;
import flash.display.Bitmap;
import flash.geom.Point;

var MAX_BITMAP_SIZE:Point = new Point( 596, 842 );

var bitmapdata:BitmapData = new MyBitmap();
var sc:Number = Math.min( MAX_BITMAP_SIZE.x / bitmapdata.width, MAX_BITMAP_SIZE.y /     bitmapdata.height );
var outBitmap:BitmapData = new BitmapData( bitmapdata.width >> 1, bitmapdata.height >> 1, false, 0x0 );
var bitmap:Bitmap = new Bitmap();
addChild( bitmap );
var scaleMatrix:Matrix = new Matrix();
scaleMatrix.scale(sc,sc);

var time:Number = new Date().getTime();
outBitmap.draw( bitmapdata, scaleMatrix, null,null,null,true );
trace( new Date().getTime()-time );
bitmap.bitmapData = outBitmap; 
```

相同的代码测试：

发布为 flash 11.4 -> 1ms 发布为 AIR 3.4 ->62ms

任何人？

# sql-server-2008 - 如何在不使用 UI 的情况下在 SQL SERVER 2008 R2 中生成脚本？

> ID：12158820
> 
> 赞同：0
> 
> 时间：2012-08-28T12:02:43.373
> 
> 标签：sql-server-2008, sql-server-2008-r2

嗨，我正在使用 SQL SERVER 2008 R2，有人可以帮我生成一个脚本，如创建、更改而不使用 UI。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-28T12:18:51.607

存储过程、视图、函数等都可以被脚本化，`sys.sql_modules`只要它们没有被加密：

```
SELECT definition 
  FROM sys.sql_modules
  WHERE [object_id] = OBJECT_ID(N'dbo.object_name'); 
```

或者，如果您想编写多个脚本：

```
SELECT definition + CHAR(13) + CHAR(10) + 'GO'
  FROM sys.sql_modules
  WHERE OBJECT_NAME([object_id]) IN (N'name1', N'name2', ...); 
```

或全部：

```
SELECT '--' + QUOTENAME(OBJECT_SCHEMA_NAME([object_id]))
  + '.' + QUOTENAME(OBJECT_NAME([object_id]))
  + CHAR(13) + CHAR(10) + definition 
  + CHAR(13) + CHAR(10) + 'GO' + CHAR(13) + CHAR(10)
FROM sys.sql_modules
WHERE definition IS NOT NULL; 
```

（当然，如果您在 Management Studio 中运行它们并且任何超过那里的输出字符串的最大长度，大约 8K 的文本结果，这些都注定要失败。但听起来您想在其他地方使用这些。）

请注意，这不会为创建对象时有效的 SET 设置编写脚本，但您可以扩展此查询以包括`ANSI_NULLS`和`QUOTED_IDENTIFIER`-[您可以从同一视图中获取的](https://dba.stackexchange.com/questions/22448/find-out-what-setting-were-used-for-a-given-stored-procedure/22450#22450)设置。

表有点棘手。如果您在分析器运行时在 SSMS 中生成脚本，您将看到它通过大量查询执行此操作并在代码中构造创建表脚本（换句话说，您无法嗅出它）。它可能非常复杂，具体取决于您为表使用的选项，是否需要编写所有外键和依赖对象的脚本等。为此，我更喜欢[podiluska 的答案](https://stackoverflow.com/a/12158870/61305)中突出显示的 SMO 方法。

如果您已经在使用 SSMS，那么我不明白不使用生成脚本菜单项的目的。如果单例方法存在问题，您可以使用对象资源管理器详细信息而不是对象资源管理器对多个对象执行此操作：

![在此处输入图像描述](../Images/83fa03d96179e8fe621222a5528008fc.png)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-28T12:06:47.753

您可以使用`Scripter`SQL 管理对象 (SMO) 中的类来执行此操作。

例如：[http ://www.mssqltips.com/sqlservertip/1833/generate-scripts-for-database-objects-with-smo-for-sql-server/](http://www.mssqltips.com/sqlservertip/1833/generate-scripts-for-database-objects-with-smo-for-sql-server/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-28T12:30:17.693

试试这个：

使用以下步骤创建存储过程。

1.首先获取您需要创建表脚本的所有表名。

2.遍历每个表并获取以下信息：

```
 select COLUMN_NAME,DATA_TYPE,CHARACTER_MAXIMUM_LENGTH,IS_NULLABLE  from INFORMATION_SCHEMA.COLUMNS where TABLE_NAME = 'tablename' 
```

3.现在在循环本身尝试动态填充创建表脚本。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-09-06T17:13:42.500

[我编写了一个名为SchemaZen](https://github.com/sethreno/schemazen#schemazen---script-and-create-sql-server-objects-quickly)的开源命令行实用程序来执行此操作。它比管理工作室的脚本要快得多，而且它的输出对版本控制更友好。它支持脚本模式和数据。

要生成脚本运行：

```
schemazen.exe 脚本 --server localhost --database db --scriptDir c:\somedir
```

然后从脚本运行重新创建数据库：

```
schemazen.exe 创建 --server localhost --database db --scriptDir c:\somedir
```

# iphone - 应用程序中的 iOS 类作为数据传输对象

> ID：12158823
> 
> 赞同：1
> 
> 时间：2012-08-28T12:03:15.143
> 
> 标签：iphone, ios, model-view-controller, dto

我目前正在开发一个启用许多功能的项目。

其中之一是用户的注册。我确实有一个视图控制器以及一个用于处理用户输入的视图。我进一步实现了一个 UserService ，启动一个上传器来上传用户数据，并在上传成功/失败等情况下通知视图控制器。

现在，我不会将数据保存到 coredata（只是其中的一部分），并且想知道在整个应用程序中将数据从视图控制器发送到上传器的最佳方法。

我知道简单的方法是这样的：

```
- (void) startUserRegistrationEmail:(NSString *) aEmail
                          firstname:(NSString *) aFirstname
                               name:(NSString *) aName
                          birthdate:(NSDate *) aBirthdate
                        citizenship:(NSString *) aCitizenship
                             street:(NSString *) aStreet
                       streetnumber:(NSString *) aStreetNumber
                           postcode:(NSString *) aPostcode
                            address:(NSString *) aAddres; 
```

优点是我的服务和上传器不依赖于任何可能增加可重用性的模型。

但在我看来有几个缺点。我必须验证视图控制器中的输入字段。如果我有一个模型对象，我可以轻松地将所有输入填充到这个对象中，调用是有效的，如果它失败，形成一个将显示给用户的正确错误。

此外，我在服务中的方法和上传者将缩小到

```
- (void) startCustomerRequestQueryEmail:(AMRegistration *) aRegistration 
```

由于 AMRegistration 类的数据不会保存在 coredate 中，我不会将其实现为 managedObject，而是自定义类。

上传完成后，我可能会查看引用并将所需的数据保存到我的托管对象中。（这是另一个优势，因为我不需要在 9 个字符串上保存引用，而只需要在一个 AMRegistration 对象上保存引用）。

我想知道您是如何处理这些问题的？您是更频繁地使用那些“辅助对象”还是避免使用它们？

# qt - QImage Rotation 不会丢失信息

> ID：12158828
> 
> 赞同：0
> 
> 时间：2012-08-28T12:03:31.650
> 
> 标签：qt, qimage

我有一个 GIF 格式的 12x12 大小的 QImage。我想以非常高的频率将它旋转到某个角度。我的应用程序涉及一个机器人，所以当它改变它的方向（它经常这样做）时，我在模拟中的 QImage 也应该旋转，但它会导致信息丢失。我正在做类似下面的事情。

```
 robot_transform.rotate(angle);
*robot2 = robot->transformed(robot_transform,Qt::SmoothTransformation);
*robot2=  robot2->scaled(12,12, Qt::KeepAspectRatio,Qt::SmoothTransformation); 
```

我需要建议这种方法有什么问题，其次，对于所需的应用程序还有其他最佳方法吗？谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-28T12:26:14.913

我会将源图像的分辨率至少提高一倍。将图像旋转到非 90 度角会导致像素信息丢失。更高的分辨率源可以弥补这一点。

大多数基于精灵的动画对每个可能的角度都使用预渲染的图像。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-28T12:10:01.843

问题是之后的缩放，您需要裁剪图像的中心。你可以用[QImage::copy](http://qt-project.org/doc/qt-4.8/qimage.html#copy)做到这一点。

# android - 确定 Activity 是否由于向后导航而出现在前面

> ID：12158831
> 
> 赞同：14
> 
> 时间：2012-08-28T12:03:47.587
> 
> 标签：android, android-activity, back, onresume

我想知道我的活动是否因为用户按下了其他活动而被显示。在生命周期中，我无法识别任何有力地为我提供该信息的回调。

`onRestart()`不管用。如果将应用程序任务放在前面，它也会触发。 `onResume()`出于同样的原因将无法正常工作。

我想有一个简单的解决方案，但在 Android 中，据说简单的事情可能非常讨厌。

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-08-28T12:05:10.377

使用 调用您的第二个活动`startActivityForResult(Intent, int)`，然后覆盖`onBackPressed()`第二个活动中的 并将其`setResult()`设置为`RESULT_CANCELED`。最后，让第一个活动在`onActivityResult()`.

**代码示例：**

活动一：

```
Intent i = new Intent(Activity1.this, Activity2.class);
startActivityForResult(i, 0); 
```

* * *

```
@Override
public void onActivityResult(int requestCode, int resultCode, Intent data) {
    super.onActivityResult(requestCode, resultCode, data);

    if (requestCode == 0) {
        if (resultCode == RESULT_CANCELED) {
                // user pressed back from 2nd activity to go to 1st activity. code here
        }
    }
} 
```

活动二：

```
@Override
public void onBackPressed() {
    setResult(RESULT_CANCELED);
    finish();
} 
```

# javascript - 两个浏览器选项卡之间的共享变量范围？

> ID：12158835
> 
> 赞同：8
> 
> 时间：2012-08-28T12:04:05.540
> 
> 标签：javascript

我有一个包含选择/选项条目的 HTML 表单的 Web 应用程序。它在一个包含 200 个项目的演示中运行良好，即使找到你想要的那个很笨拙，但实际上有超过 30000 个项目。（这是一个零件清单。）

我的第一个想法是有一个“选择零件”按钮，而不是下拉框，这会打开第二个浏览器选项卡（“搜索零件”），然后显示完整列表、搜索功能等，每个都有一个“副本”到剪贴板'按钮。然后用户可以按一个并返回到原始表单并按“粘贴”按钮，零件的名称将输入到表单中。

我要问的是，是否有一个 javascript 范围，我可以在“搜索部件”选项卡中存储一个小文本字段和 ID 号，以便在用户按下主窗体上的“粘贴”按钮时检索它页？我不想将消息发送回服务器。

（顺便说一句，我不一定对实现 Ctrl+C/V 或使用系统剪贴板感兴趣，除非这是简单解决方案的一部分。）

谢谢！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-28T12:06:59.093

您可以使用 HTML5 存储 API -`window.localStorage`

```
var val = localStorage.getItem("key"); //get

localStorage.setItem("key", val);  //set 
```

比饼干干净得多。更多[在这里](http://diveintohtml5.info/storage.html)。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-28T12:08:12.380

只要第一页打开“搜索部件”选项卡，您就应该有权（从“搜索部件”页面内部）访问该`window.opener`对象。如果您在包含所需属性/变量的父页面中设置了一个全局对象，则您应该可以从子页面中完全访问。因为第一页是打开的，所以您仍然可以访问孩子中的调用方法，但我个人会坚持让其中一个或另一个执行更新。

# django - 如何从 Django Form FileField 中提取文件对象

> ID：12158837
> 
> 赞同：2
> 
> 时间：2012-08-28T12:04:08.180
> 
> 标签：django, django-models, django-forms, django-file-upload

我创建了一个带有字段、`title`和`file`的ModelForm `content`。这`file`是一个 FileField()。`save()`但是由于某些原因，我无法调用此表单的方法。所以我必须手动创建一个模型对象并将清理后的值分配给该对象。除了那个 FileField 之外，一切都正常工作。该文件未保存。我怎样才能解决这个问题？提取FileField的方法是否正确？

形式

```
class TestForm(forms.ModelForm):
    class Meta:
        model = Test
        fields = ('title','file', 'content',) 
```

视图.py

```
 form = TestForm(request.POST,request.FILES)
 if form.is_valid():
     content = form.cleaned_data['content']
     file = form.cleaned_data['file']
     title = form.cleaned_data['title']
     fax = Fax()
     fax.title = title
     fax.file = file
     fax.content = content
     fax.save() 
```

这里文件没有保存。我怎样才能解决这个问题？任何帮助将不胜感激！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-03T09:08:12.810

你有没有`enctype="multipart/form-data"`在你的表格中使用过似乎代码很好。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-09T06:39:11.297

请使用这种类型的验证。这可能有效

```
if request.method == 'POST':
    form = ModelFormWithFileField(request.POST, request.FILES)
    if form.is_valid():
        # file is saved
        form.save()
        return HttpResponseRedirect('/success/url/')`` 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-28T12:12:40.237

我认为你可以使用

```
request.FILES['file'] 
```

用于获取文件对象

# java - 用户使用 Spring MVC 提交表单后如何获取表单数据？

> ID：12158841
> 
> 赞同：1
> 
> 时间：2012-08-28T12:04:25.667
> 
> 标签：java, exception, spring-mvc, forms-authentication, java.lang.class

我收到一条错误消息：org.springframework.web.util.NestedServletException：请求处理失败；嵌套异常是 java.lang.ClassCastException：java.lang.Object 无法转换为 com.crimetrack.business.Login

登录.java

```
public class Login {

    private String userName;
    private String password;
    private boolean loggedin;

    public Login(){};

    /**
     * @return the loggedin
     */
    public boolean isLoggedin() {
        return loggedin;
    }

    /**
     * @param loggedin the loggedin to set
     */
    public void setLoggedin(boolean loggedin) {
        this.loggedin = loggedin;
    }

    /**
     * @param userName
     * @param password
     */
    public Login(String userName, String password) {
        this.userName = userName;
        this.password = password;
    }

    /**
     * @return the userName
     */
    public String getUserName() {
        return userName;
    }

    /**
     * @param userName the userName to set
     */
    public void setUserName(String userName) {
        this.userName = userName;
    }

    /**
     * @return the password
     */
    public String getPassword() {
        return password;
    }

    /**
     * @param password the password to set
     */
    public void setPassword(String password) {
        this.password = password;
    }

} 
```

* * *

```
@Controller
public class AuthenticationController {

    private final Logger logger = Logger.getLogger(getClass());

    private AuthenticationManager authenticationManager;
    private Login login = new Login();

    String message = "Congrulations You Have Sucessfully Login";
    String errorMsg = "Login Unsucessful";

    @RequestMapping(value="login.htm")
    public ModelAndView onSubmit(Object command) throws ServletException {

        String userName = ((Login)command).getUserName();
        String password = ((Login)command).getPassword();

        login.setUserName(userName);
        login.setPassword(password);

        logger.info("Login was set");

        logger.info("the username was set to " + login.getUserName());
        logger.info("the password was set to " + login.getPassword());

        if (authenticationManager.Authenticate(login) == true){
            return new ModelAndView("main","welcomeMessage", message);
        }

        //return new ModelAndView("main","welcomeMessage", message);
        return new ModelAndView("login","errorMsg", "Error!!!");
    }

} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-28T12:19:17.327

试试这个解决方案：

**JSP**

```
<form:form action="yourUrl" modelAttribute="login" method="POST">
<% ... %>
</form:form> 
```

**控制器**

```
// your method that prints the form
public ModelAndView onGet(@ModelAttribute Login login) {
    // return ...
}

@RequestMapping(value="login.htm")
public ModelAndView onSubmit(@ModelAttribute Login login) {
    String userName = login.getUserName();
    String password = login.getPassword();
    // ...
} 
```

**解释**

注释`@ModelAttribute`的作用与`model.addAttribute(String name, Object value)`. 例如，`@ModelAttribute Login login`与 相同`model.addAttribute("login", new Login());`。

也就是说，使用该`onGet`方法，您可以将这样的对象传递给您的视图。由于属性`modelAttribute="login"`，标签`<form:form>`将查看模型的属性列表以找到名称为 的属性`login`。如果没有找到，则抛出异常。

然后，这就是神奇的部分：使用标签`<form:input path="userName" />`，Spring MVC 将自动设置属性`userName`中 bean 的`modelAttribute="login"`属性，即在您的情况下，`login`. 如果你放了类似的东西`<form:input path="wtf" />`，它会抛出一个异常，因为 bean`Login`没有这样的属性。

因此，最后，在您的`onSubmit`方法上（再次感谢 to 注释`@ModelAttribute`），您可以访问`login`之前由 Spring MVC 自动绑定的 bean。

**笔记**

我个人（几乎）从不使用`ModelAndView`实例，但如下进行：

```
// the methods can have the name you want
// not only onGet, onPost, etc. as in servlets

@RequestMapping("url1.htm")
public String loadAnyJsp(@ModelAttribute Login login) {
    return "path/to/my/views/login";
}

@RequestMapping("url2.htm")
public String redirectToAnotherController(@ModelAttribute Login login) {
    return "redirect:url1.htm";
} 
```

JSP 的路径在您的 web.xml 文件中指定，例如：

```
...
<bean class="org.springframework.web.servlet.view.ContentNegotiatingViewResolver" p:favorPathExtension="true" p:favorParameter="true" p:ignoreAcceptHeader="true" p:defaultContentType="text/html">
    <description>Depending on extension, return html with no decoration (.html), json (.json) or xml (.xml), remaining pages are decoracted</description>
    <property name="mediaTypes">
        <map>
            <entry key="xml" value="application/xml" />
            <entry key="json" value="application/json" />
            <entry key="html" value="text/html" />
            <entry key="action" value="text/html" />
        </map>
    </property>
    <property name="defaultViews">
        <list>
            <bean class="org.springframework.web.servlet.view.xml.MarshallingView" p:marshaller-ref="xstreamMarshaller" />
            <bean class="org.springframework.web.servlet.view.json.MappingJacksonJsonView" />
        </list>
    </property>
    <property name="viewResolvers">
        <list>
            <bean id="nameViewResolver" class="org.springframework.web.servlet.view.BeanNameViewResolver">
                <description>Maps a logical view name to a View instance configured as a Spring bean</description>
            </bean>
            <bean class="org.springframework.web.servlet.view.InternalResourceViewResolver" p:prefix="/WEB-INF/views/" p:suffix=".jsp" />
        </list>
    </property>
</bean>
... 
```

您应该阅读[文档](http://static.springsource.org/spring/docs/current/spring-framework-reference/html/mvc.html)以获取更多信息（参见 16.5 解析视图）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-28T12:07:38.370

在您的“onSubmit”方法中，您将转换`command`为`Login`.

显然不是。

# php - Ubuntu 中奇怪的 Netbeans IDE 行为（PHP 开发）

> ID：12158845
> 
> 赞同：0
> 
> 时间：2012-08-28T12:04:43.437
> 
> 标签：php, ubuntu, netbeans

我一直使用 Netbeans 作为我的 PHP IDE。我从 netbeans 站点下载了 netbeans 并将其解压缩到文件夹 /opt/ 然后我使用执行它

```
$ sudo /opt/netbeans-7.1.2/bin/./netbeans 
```

它似乎加载。启动屏幕显示并在启动屏幕中收到消息，完成加载模块。之后我应该得到一个完全加载的 Netbeans IDE。但我什么也得不到。Netbeans 似乎正在加载，但我没有得到任何图形屏幕，似乎 Netbeans 的 GUI 已完全隐藏，但所见的 netbeans 进程正在进行中。我使用验证了它的执行

```
$ ps -aux | grep netbeans 
```

这表明该过程实际上已成功加载。

我一直在尝试解决此问题，并且已经尝试更改 netbeans.conf 中的几个参数。

我正在寻求帮助、建议和猜测。可能是什么导致了这个问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-28T13:19:54.457

我找到了解决方案。似乎有一些错误配置导致了这个问题。我删除了“~/.netbeans/7.1.2”，然后重新启动了netbeans。

我的 Netbeans 版本是 7.1.2。因此，要删除文件夹，我使用了下面列出的命令。

```
$ rm -rf ~/.netbeans/7.1.2 
```

如果您有多个 netbeans 实例，那么您必须找到要删除的正确文件夹。

它工作得很好，我得到了 netbeans GUI。我想我搞砸了一些配置。重新启动 netbeans 会重新创建该文件夹。

@Jan：感谢您的回答。我已经在使用来自 java.com 的 jre、jdk。

# objective-c - 在 Objective-C 中不要有未使用的类导入重要吗？

> ID：12158848
> 
> 赞同：3
> 
> 时间：2012-08-28T12:05:15.290
> 
> 标签：objective-c, ios, xcode, compiler-construction

我想在 Xcode 项目的**“ProjectName”-Prefix.pch文件中****#import**我的自定义类。

 **```
#ifdef __OBJC__
    #import <UIKit/UIKit.h>
    #import <Foundation/Foundation.h>
    #import "CustomClass.h"
#endif 
```

但是，我不会在每个项目文件中使用我的自定义类，所以我想知道，它会以某种方式损害我的应用程序性能或其他什么吗？

这有什么问题吗？
不推荐吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-28T12:44:37.440

`#import`确保给定的头文件实际上只包含一次，因此会出现性能问题。来自 Apple 的文档：

> 当您想在源代码中包含头文件时，通常使用`#import`指令。这就像`#include`，除了它确保同一个文件永远不会被包含超过一次。Objective-C 示例和文档都喜欢使用`#import`，您自己的代码也应该使用。

来自[学习目标 C：入门](https://developer.apple.com/library/mac/#referencelibrary/GettingStarted/Learning_Objective-C_A_Primer/_index.html)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-28T12:20:56.883

性能肯定不会受到影响。除非它们在您的应用程序中被广泛使用，否则在其中包含头文件不是一个好习惯，因为它会使不熟悉您的类的人更难阅读代码。**

# ios - 分发配置文件错误：未找到有效的签名身份

> ID：12158850
> 
> 赞同：3
> 
> 时间：2012-08-28T12:05:21.727
> 
> 标签：ios, xcode, distribution, provisioning, adhoc

当我创建一个开发配置文件（分发应用程序 Ad-Hoc）时，Xcode 中的组织者给出了以下错误：未找到有效的签名身份。

我尝试了以下步骤来解决我的问题，但没有任何运气：

*   删除我的钥匙串中的所有钥匙和证书。
*   在 iOS 配置门户中吊销了我的开发证书
*   创建了新的开发证书
*   编辑了我的应用程序的开发配置文件并选择了我的证书。
*   Xcode 说我的个人资料对 de Development Provisiong Profile 有效。
*   创建了分发配置文件。
*   Xcode 说没有为 Distribution Provisiong Profile 找到有效的签名身份。

我可以尝试哪些其他解决方案？我的同事在 App Store 中已经发布了一个应用程序。

我正在使用 Xcode 4.4.1

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-07-18T08:34:56.583

当您错过证书签名者的私钥时，就会发生这种情况。您的钥匙串中必须有私钥。

通常，当您从证书颁发机构请求证书时，它会在您的钥匙串中创建一个私钥，该私钥随后用于创建所有配置文件。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-28T12:31:17.737

我认为你错过了一个重要的步骤。'从证书颁发机构请求证书'。请看看[这个](https://www.vbulletin.com/forum/content.php/506-Creating-your-iOS-Certificates)。

# javascript - 如何知道用户何时在 iPad 上完成滚动？

> ID：12158854
> 
> 赞同：2
> 
> 时间：2012-08-28T12:05:36.733
> 
> 标签：javascript, ipad, scroll

我正在使用 JavaScript/JQuery 来更新可水平滚动的 div 的内容。我需要避免在用户滚动时更新内容。在普通浏览器中，这很容易，因为 onscroll 事件会告诉我用户何时完成。

不幸的是，这在 iPad 上并不容易。iPad上有2个场景：

1.  用户慢慢滚动并松开手指——这里会触发一个“touchend”事件，仅此而已。
2.  用户快速滚动并在滑动中松开手指——当他们抬起手指时，触摸端会触发，但设备将使用滑动的“动量”继续滚动一两秒。一旦它停止，就会触发一个“滚动”事件。

问题是，没有办法知道情况 2 正在发生。touchend 事件在这两种情况下都会发生，并且除了等待查看是否会触发滚动事件之外，无法知道是否会触发滚动事件。

更糟糕的是，iPad 仅在滚动完成后更新 div 的 scrollLeft 属性（在任一情况下）。所以我不能定期检查 scrollLeft 是否仍在变化）。

那么如何知道 div 内容已经滚动完毕呢？

# jquery - jquery ui选项卡：选择选项卡，但如何从文本文件加载内容

> ID：12158855
> 
> 赞同：0
> 
> 时间：2012-08-28T12:05:39.387
> 
> 标签：jquery, jquery-ui, jquery-selectors, jquery-ui-tabs

初学者。我有一个通过链接动态加载内容的选项卡控件。这些是简单的文本文件。因此，您单击选项卡 3，它会从文本文件中获取内容并加载它。真正的基本。

在选项卡 2 上，我有一个按钮，我想通过传递 ID 值进入选项卡 3。我可以以最糟糕的方式做到这一点，但我还有另一个问题。如果我使用：

```
$('#myTabs').tabs({selected:2}); 
```

它打开 tab3 但它不会加载内容。其他一切都很好，我只是不知道我错过了什么，或者为了加载内容而做错了。

一如既往地感谢任何帮助！

这就是我用来加载标签的东西

```
$(document).ready(function () {
   $('#myTabs').tabs({selected: '0'});  
}); 
```

```
<div id='myTabs'>
<ul>
<li><a href="#tabs-1">Overview</a></li>
<li><a href="/scripts/content2.txt">Content Area 2</a></li>
<li><a href="/scripts/content3.txt">Content Area 3</a></li>
</ul>
</div> 
```

不会打扰选项卡 1 的内容...所有这些都有效。我可以单击任何选项卡并得到我想得到的东西。所以可以说 content3.txt 包含这个（每个文本也包含指向库和样式表的链接）：

```
$(document).ready(function() {
     $('#testing').text('Hello World');
}); 
```

content2.txt 包含一个切换到 content3.txt 的按钮单击事件：

```
$('#thisBtn').click(function () {
$('#myTabs').tabs({selected:2});
$('#myTabs').load('/scripts/content3.txt', function () {
   alert('worked');
}); 
```

以上清除了标签...我想是因为我正在使用包含标签的 div 并向其中加载不同的内容？所以我的问题是 div '发短信' 在文本文件中并且在选择选项卡之前不会加载？那有意义吗。

最后我如何改变这个/改进这个？等等

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-28T12:09:30.540

您没有从您提供给我们的内容中加载任何内容，您只是在切换标签。您将不得不使用类似 jquery [load()](http://api.jquery.com/load/)的东西。下面的代码会将 的内容加载`myTextFile.txt`到 id 的元素中`result`。

```
$('#result').load('myTextFile.txt', function() {
  alert('Load was performed.');
}); 
```

jquery ui tabs 的一般布局如下 html：

```
<div id="tabs">
    <ul>
        <li><a href="#tabs-1">Nunc tincidunt</a></li>
        <li><a href="#tabs-2">Proin dolor</a></li>
        <li><a href="#tabs-3">Aenean lacinia</a></li>
    </ul>
    <div id="tabs-1"></div>
    <div id="tabs-2"></div> <--- Load content into these divs
    <div id="tabs-3"></div>
</div> 
```

如您所见，每个选项卡都有一个分配给它的 id。您需要将内容加载到与您要加载的选项卡相对应的正确 div 中。

# jsf - 在 JSF 中设置变量

> ID：12158856
> 
> 赞同：1
> 
> 时间：2012-08-28T12:05:43.240
> 
> 标签：jsf, jsf-2

我的jsf中有这样的东西：

```
<div title="Percentage: #{myBean.numberToBeConvertedToPercentage}"></div> 
```

我想做这样的事情：

```
<h:outputText value="#{myBean.numberToBeConvertedToPercentage}">
    <f:convertNumber maxFractionDigits="2" type="percent"/>
</h:outputText> 
```

当然，不是在输出文本中，而是将转换后的数字设置为变量，所以我可以在我的 div 中使用它。我不想直接从我的 bean 中获取这个转换后的数字，因为我在视图的其他地方使用它而不格式化它，并为此创建一个 get，我不喜欢这个想法。只有在我看来，有什么办法可以做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-28T13:30:07.690

1.  To go with `<h:outputText>` + converter, it is the best approach for this purpose in JSF. You can redesign your Html ~~to separate the label "Percentage: " and the data.~~ to use rendered value in JS code to pass it to 'title' attribute.

    ```
    <div id="titleDiv" />

    <script type="text/javascript">
    $('#titleDiv').title = 'Percentage: <h:outputText value="#{myBean.numberToBeConvertedToPercentage}"><f:convertNumber maxFractionDigits="2" type="percent"/></h:outputText>';
    </script> 
    ```

2.  If you still want to stay without converters, then you can create one more bean per your view and render values in get methods.

3.  Other option is to use *EL 2.2 Method call* feature and to call your own format bean

    ```
    <div title="Percentage: #{formatBean.formatNumber(myBean.numberToBeConvertedToPercentage, 2)}"></div> 
    ```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-28T13:44:07.513

我没有检查这个，但也许你可以使用 ui:param 并为其分配一个转换器。

然后在您的页面中使用它

```
<div title="Percentage: #{myVar}></div> 
```

请参阅[在 JSF 页面中定义和重用 EL 变量](https://stackoverflow.com/questions/6434866/defining-and-reusing-variable-in-jsf-page)

# android - 检查传感器的长盖

> ID：12158858
> 
> 赞同：0
> 
> 时间：2012-08-28T12:05:49.583
> 
> 标签：android, detection, android-sensors

我在检查传感器的长时间覆盖时遇到了一些问题（用于在手机靠近耳朵时关闭屏幕）。我想检测这个传感器的长短覆盖（例如通过我的手指）。这是我的代码，我可以检测到封面，但我无法检查它是长还是短（我认为我的线程中有错误，但我不知道是什么）

```
public class NextActivity extends Activity implements SensorEventListener {

    private static final String TAG = "DISTANCE";
    private SensorManager mSensorManager;
    private Sensor mProximity;
    public TextView tv;
    public TextView tv2;
    public int check=0;
    float distance=0;
    public float eventTime;
    public MyThread thread;

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_next);  

        mSensorManager = (SensorManager) getSystemService(Context.SENSOR_SERVICE);
        mProximity = mSensorManager.getDefaultSensor(Sensor.TYPE_PROXIMITY);

        tv = (TextView)findViewById(R.id.textView1);
        tv2= (TextView)findViewById(R.id.textView2);
        thread = new MyThread();
        thread.start();
    }

  public final void onSensorChanged(SensorEvent event) {
    distance = event.values[0];
        tv.setText(""+thread.isAlive());
  }

  @Override
  protected void onResume() {
    // Register a listener for the sensor.
    super.onResume();
    mSensorManager.registerListener(this, mProximity, SensorManager.SENSOR_DELAY_NORMAL);
  }

  @Override
  protected void onPause() {
    // Be sure to unregister the sensor when the activity pauses.
    super.onPause();
    mSensorManager.unregisterListener(this);
  }

    public class MyThread extends Thread {

        @Override
        public void run() {
            while(true){
            if(distance<1) 
            {
                long time = System.currentTimeMillis();
                while(System.currentTimeMillis()<time+300);
                if(distance<1)
                {   
                    tv.setText("DOUBLE -> NEXT"); 
                    distance=5;
                } else tv.setText("ONCE -> BACK");      
            }else tv.setText("NONE CLICKED");
            }}
    }

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-14T15:55:37.790

现在，线程不断旋转，这对电池不利，可能对其他所有设备的性能都不利。

```
 long time = System.currentTimeMillis();
           while(System.currentTimeMillis()<time+300); 
```

应替换为：

```
 try {
               Thread.sleep(300);
           } catch(InterruptedException ie) {} 
```

第二个问题是 TextViews 没有在 UI 线程中更新。因此，必须设置一个 Hnadler 来接收消息以设置文本，或者定义为与 runOnUiThread 一起使用的 Runnables。

# python - Python 创建的线程数是预期的 2 倍

> ID：12158859
> 
> 赞同：3
> 
> 时间：2012-08-28T12:05:59.193
> 
> 标签：python, multithreading

我是 Python 新手，所以如果这很明显，我深表歉意。

我正在尝试构建多线程应用程序，但是当我想创建一个线程时，我得到了两个而不是一个。

**我的线程.py**

```
from threading import Thread
import time

class MyThreadClass(Thread):

    def __init__(self):
        Thread.__init__(self)

    def run(self):
        print "starting " + self.getName() + "\n"
        from main import var1
        while True:
            print self.getName() + " is running\n"
            print "value: " + var1 + "\n"
            time.sleep(1) 
```

**主文件**

```
from MyThread import MyThreadClass
var1 = "Test"
MyThreadClass().start() 
```

我得到的输出

```
 Thread-1 is running
 Thread-2 is running
 Thread-1 is running
 Thread-2 is running
 Thread-1 is running
 Thread-2 is running
 ..... 
```

为什么会这样？我注意到如果我替换`MyThreadClass().start()`为`MyThreadClass().run()`我得到 2 个线程但只有一个线程继续运行

```
 Thread-1 is running
 Thread-2 is running
 Thread-2 is running
 Thread-2 is running
 Thread-2 is running
 ..... 
```

知道代码有什么问题吗？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-08-28T12:10:25.810

当您导入`main.py`时`MyThread.py`，该行

> MyThreadClass().start()

再次执行（因为模块被加载），因此启动了第二个线程。

* * *

您可以`main.py`通过将该行替换为

```
if __name__ == "__main__":
    MyThreadClass().run() 
```

或者更好的是，只需将`var1`to`MyThreadClass`作为参数传递以避免循环依赖。

**我的线程.py**：

```
from threading import Thread
import time

class MyThreadClass(Thread):

    def __init__(self, var1):
        Thread.__init__(self)
        self.var1 = var1

    def run(self):
        print "starting " + self.getName() + "\n"
        while True:
            print self.getName() + " is running\n"
            print "value: " + self.var1 + "\n"
            time.sleep(1) 
```

**主文件**

```
from MyThread import MyThreadClass

if __name__ == "__main__":
    MyThreadClass("Test").run() 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-28T12:13:31.827

您启动线程两次，一次是在您运行时`main.py`（因为它是`__main__`模块），另一次是在您在`MyThreadClass`'s`run()`方法中导入它时。

`import`语句将运行模块内的所有代码，而不仅仅是您要求的；该`from`表单便于将特定项目带入您当前的命名空间。

它在两个线程处停止的原因是，即使您`main`在第二个线程中再次导入，Python 也不会重新执行模块的代码，因为它已经被加载。如果不是这样，您将拥有两个以上的线程；-)

使用[另一个答案](https://stackoverflow.com/a/12158930/722332)`if __name__ == '__main__':`中提到的结构不仅对于这种情况而且对于所有类型的模块都非常有用，因为它允许您执行它们（许多模块将其用于测试代码）并在避免副作用的同时导入它们。

# .htaccess - .htaccess 重写规则 404 错误

> ID：12158860
> 
> 赞同：1
> 
> 时间：2012-08-28T12:05:59.183
> 
> 标签：.htaccess

我正在尝试让 /game/game-name/ 重定向到 /game.php?g=game-name

我在 .htaccess 中使用的代码是：

```
Options +FollowSymLinks

RewriteEngine On
RewriteRule ^game/([a-zA-Z0-9]+)/$ game.php?g=$1 
```

但是当我去 /game/game-name/ 我得到一个 404 错误。任何帮助，将不胜感激。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-28T12:09:12.860

那是因为您的规则将此网址`/game/game-name/`转换为`/game/game-name/game.php?g=game-name`

您需要做的是：

```
Options +FollowSymLinks

RewriteEngine On
RewriteRule ^game/([a-zA-Z0-9]+)/$ /game.php?g=$1 
```

或这个 ：

```
Options +FollowSymLinks

RewriteEngine On
RewriteBase /
RewriteRule ^game/([a-zA-Z0-9]+)/$ game.php?g=$1 
```

# visual-c++ - 从 CComboBox 获取旧值

> ID：12158862
> 
> 赞同：1
> 
> 时间：2012-08-28T12:06:18.847
> 
> 标签：visual-c++, ccombobox

1.  用户更改 a 中的值`CComboBox`。
2.  该函数`OnCbnSelchangeXXX()`被调用。

我可以检索`CComboBox´s`函数中的旧值吗？

# javascript - 我可以按特定顺序迭代标签中的不同数据标签吗？

> ID：12158863
> 
> 赞同：0
> 
> 时间：2012-08-28T12:06:19.027
> 
> 标签：javascript, jquery

在我的 HTML 中，我有以下代码。根据显示的内容，它可以有 0、1、2、3、4 或 5 个不同的时间点。第一个感兴趣的时间段是 data-t0，然后下一个是 data-t1 减去 data-t0 等。

```
<table id="dataTable" data-t2="1828" data-t1="1552" data-t0="1163" ></table>
<h1>Grid data</h1> 
```

如果至少存在时间点data-t0，有没有办法可以像这样将时间添加到h1标签？

```
<h1 title="Response time: t1=1163, t2=11, t3=276">Grid data</h1> 
```

我遇到的问题是我需要一些方法来完成并添加每个时间点的时间。我可以做简单的 jQuery，但我不知道如何让它遍历每个时间点。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-28T12:16:17.383

您可能只想使用 JSON 文字将数据存储在单个属性中：

```
<table id="dataTable" data-t="[1163, 1552, 1828]" ></table> 
```

```
var data = $("#dataTable").data('t'); //jQuery does the JSON parsing for us
var diffs = [];

for(var i = 0; i + 1 < data.length; i++) {
    diffs[i] = data[i + 1] - data[i];
}

alert(diffs.join(', ')); 
```

# android - AsyncTask - 不调用 onPostExecute

> ID：12158864
> 
> 赞同：1
> 
> 时间：2012-08-28T12:06:22.950
> 
> 标签：android, http, android-asynctask, httpclient

我正在做一个项目，我需要调用一个`AsyncTask`，但`onPostExecute`没有调用该方法。

这是我的课：

```
public class WebService extends AsyncTask<String, String, String> {
    private ArrayList<SimpleObserver> listeners;
    private int responseCode;
    private String message;
    private String response;
    private String URL;

    public WebService() {
        listeners = new ArrayList<SimpleObserver>();
    }

    public void addListener(SimpleObserver obs) {
        listeners.add(obs);
    }

    public void removeListener(SimpleObserver obs) {
        listeners.remove(obs);
    }

    public void notifyListener(String s) {
        for (SimpleObserver listener : listeners)
            listener.onChange(s);
    }

    public String getResponse() {
        return response;
    }

    public String getErrorMessage() {
        return message;
    }

    public int getResponseCode() {
        return responseCode;
    }

    @Override
    protected void onPreExecute() {
        //notifyListener("A calcular");
    }

    @Override
    protected String doInBackground(String... urls) {
        String response = "";
        for (String url : urls) {
            HttpParams my_httpParams = new BasicHttpParams(); 
            final String proxyHost = android.net.Proxy.getDefaultHost();
            final int proxyPort = android.net.Proxy.getDefaultPort();
            if(proxyPort != -1)
            {
              my_httpParams.setParameter(ConnRoutePNames.DEFAULT_PROXY, new HttpHost(proxyHost, proxyPort));            
            }

            DefaultHttpClient client = new DefaultHttpClient(my_httpParams);
            HttpGet httpGet = new HttpGet(url);
            Log.d("URL serviço HttpGet", url);
            try {
                HttpResponse execute = client.execute(httpGet);
                InputStream content = execute.getEntity().getContent();

                BufferedReader buffer = new BufferedReader(
                        new InputStreamReader(content));
                String s = "";
                while ((s = buffer.readLine()) != null) {
                    response += s;
                }

                Log.d("RESPOSTA do web service", response);

            } catch (Exception e) {
                e.printStackTrace();
                response = e.getMessage();
                Log.e("ERRO de respota", e.getMessage());
            }
        }
        return response;
    }

    @Override
    protected void onPostExecute(String result) {
        Log.d("onPostExecute Serviço", result);
        notifyListener(result);
    }
} 
```

我创建了这个方法：

```
public void executeService(String param) {
        try {
            Log.d("Entrar", "no serviço");
            s.execute(new String [] {URL+param});
        } catch (Exception e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
            Log.e("Erro ao aceder ao web service", e.getMessage());
        }
    } 
```

调用任务。

这些是日志的结果

```
08-28 17:47:21.936: D/URL serviço HttpGet(2055): http://192.168.56.1:8080/pt.Agile21.Acerola.WebService/rest/acerola?id=g;ana@eu.com
08-28 17:47:22.456: D/RESPOSTA do web service(2055): ana;ana@eu.com;pass;0
08-28 17:47:22.456: D/RESPOSTA do web service(2055): ana;ana@eu.com;pass;0 
```

如您所见，我得到了 doInBackground() 的所有结果。:S

有人可以帮我理解是哪个问题吗？

我现在看到的东西正在寻找日志文件..当我故意完成我的应用程序时，我的 onPostExeute 方法返回..这是不正常的..：有人可以帮助我吗？

# php - 如何从xml文件中删除特定元素

> ID：12158866
> 
> 赞同：0
> 
> 时间：2012-08-28T12:06:41.333
> 
> 标签：php, xml

我想删除：

```
<newWord>
    <Heb>צהוב</Heb>
    <Eng>yellow</Eng>
 </newWord> 
```

从：

```
<?xml version="1.0" encoding="UTF-8"?>
<xml>
  <newWord>
    <Heb>מילה ראשונה</Heb>
    <Eng>first word</Eng>
  </newWord>
  <newWord>
    <Heb>צהוב</Heb>
    <Eng>yellow</Eng>
  </newWord>
</xml> 
```

所以输出将是：

```
<?xml version="1.0" encoding="UTF-8"?>
    <xml>
      <newWord>
        <Heb>מילה ראשונה</Heb>
        <Eng>first word</Eng>
      </newWord>
    </xml> 
```

我尝试找到标签`<newWord>`，然后去它的孩子， `<Eng>yellow</Eng>` 如果我找到它，`$searchString = 'yellow';`我应该去它的父母并删除元素`<newWord>`。

我尝试通过以下代码执行此操作，但我不知道如何去 `<newWord>`. 非常感谢您的帮助。

这是我的代码：

```
<?php 
$del=true;
        if ($del==TRUE){
                $searchString = 'yellow';
                header('Content-type: text/xml; charset=utf-8');
                $xml = simplexml_load_file('./Dictionary_user.xml');

                foreach($xml->children() as $child){
                  if($child->getName() == "newWord") {
                      if($searchString == $child['Eng']) {
                        $dom->parentNode->removeChild($xml);
                    } else {
                        echo('no match found resualt');
                    }
                  }
                }

                $dom = new DOMDocument; 
                $dom->preserveWhiteSpace = FALSE;
                $dom->formatOutput = true;
                $dom->load('Dictionary_user.xml');

                $dom->save("Dictionary_user.xml");
                $dom->saveXML();
                header('Location: http://127.0.0.1/www/www1/ajax/ajax4/workwell/popus1.html');
}
?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-28T12:20:42.047

在这条线上

```
if($searchString == $child['Eng']) { 
```

您正在尝试比较子节点的主体，但它不会自动转换为字符串。它仍然是 a `SimpleXMLElement object`，所以比较失败。

尝试将其显式转换为字符串以获取标签的正文。

```
if($searchString == (string)$child['Eng']) { 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-28T12:22:26.853

试试这个：

```
$searchString = 'yellow';
$xml = simplexml_load_file('./Dictionary_user.xml');

foreach($xml->children() as $child){    
  if($child->getName() == "newWord") {
    if($child->Eng == $searchString){
        $dom = dom_import_simplexml($child);
        $dom->parentNode->removeChild($dom);
    }
  }
}

echo $xml->asXML(); 
```

# android - 带有微调器的 ListView 缺少项目单击

> ID：12158869
> 
> 赞同：-1
> 
> 时间：2012-08-28T12:06:45.427
> 
> 标签：android

嗨，我是 android 新手，我正在构建我的第一个应用程序。我已经实现了一个列表视图，其中包含一个 ImageView、一个 TextView 和一个 Spinner（一个下拉列表）。我用数据动态填充微调器，事情是每个当微调器为空时，列表会相应地运行，尽管如果微调器中至少有一个项目，则不会发生这种情况。如果微调器不为空，则永远不会调用列表的 onListItemClick 函数，就像我从未单击它一样。我在我用于列表的适配器的实现上填充了 getView 函数的微调器，我不知道它是否相关，我提到它以防万一。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-28T14:05:48.790

其实这个也骗了我！我发现这篇[文章](http://code.google.com/p/android/issues/detail?id=3414)如果您的列表视图包含可以获得焦点的项目，则您的列表视图将不会获得点击项目事件...尝试在您的列表视图 xml 中添加它对我有用

```
 android:descendantFocusability="blocksDescendants" 
```

# sharepoint-2010 - 如何在 Sharepoint 2010 中查找谁将 sharepoint 网站集置于只读模式

> ID：12158874
> 
> 赞同：0
> 
> 时间：2012-08-28T12:07:03.067
> 
> 标签：sharepoint-2010

我有一个 sharepoint2010 站点。突然我今天看到该网站已进入只读模式。如何审核，谁做的。我想知道是谁将站点置于只读模式（通过 CA->站点配额和锁定）。有什么办法可以找到吗？（通过 powershell 命令、SPD、数据库或任何其他东西）

谢谢西瓦库玛。磷

# iphone - xCode Profile：分析时有错误，但运行时没有

> ID：12158876
> 
> 赞同：0
> 
> 时间：2012-08-28T12:07:06.397
> 
> 标签：iphone, ios, xcode, profile

> **可能重复：**
> [分析我的应用程序时发生 GData 错误](https://stackoverflow.com/questions/12156593/errors-of-gdata-occurs-when-profiling-my-app)

这个问题在标题中说明。我想知道我的应用程序提交到应用程序商店是否可以，因为某些文件仅动态链接。谁能给我一些建议？

# c# - 使用 stacktrace / stackframe 进行反射以获取方法名称和参数

> ID：12158882
> 
> 赞同：3
> 
> 时间：2012-08-28T12:07:23.870
> 
> 标签：c#, debugging, reflection, helpermethods

在编写问题主题时，我遇到了其他一些最相关的帖子...导致 MSDN [http://msdn.microsoft.com/en-us/library/system.reflection.parameterinfo.aspx](http://msdn.microsoft.com/en-us/library/system.reflection.parameterinfo.aspx)

但我无法提取我需要的代码

我刚刚学习了如何使用基于 st 和 sf 的辅助方法获取方法名称，如下所示：

```
 public void setLogView(View ViewMode)
    {
        AAdToAppLog();

        Lview_AH_AutomationLog.Sorting = SortOrder.Ascending;
        ColumnHeader ColHeadRowNo = new ColumnHeader();
        ColumnHeader ColHeadFunction = new ColumnHeader();
        ColumnHeader ColHeadContent = new ColumnHeader();
        ColumnHeader ColHeadTime = new ColumnHeader();

        Lview_AH_AutomationLog.View = ViewMode;
        Lview_AH_AutomationLog.Columns.Add(ColHeadRowNo);
        Lview_AH_AutomationLog.Columns.Add(ColHeadFunction);
        Lview_AH_AutomationLog.Columns.Add(ColHeadContent);
        Lview_AH_AutomationLog.Columns.Add(ColHeadTime);
        ColHeadRowNo.Text = "#";
        ColHeadFunction.Text = "Function Name";
        ColHeadContent.Text = "Content";
        ColHeadTime.Text = "Time";
        ColHeadRowNo.Width = 45;
        ColHeadFunction.Width = 150;
        ColHeadContent.Width = 150;
        ColHeadTime.Width = 100;
    }

    public void AAdToAppLog(string FunctionOutPut = "N/A")
    {
        string t = DateTime.Now.ToString("mm:ss.ff");
        string h = DateTime.Now.ToString("HH");
        ListViewItem FirstCell= new ListViewItem();
        FirstCell.Text =h+":" +pre0Tosingle_9(LogCounter.ToString());//Another helper puts 0 infront <=9 digits
        Lview_AH_AutomationLog.Items.Insert(0, FirstCell);
        StackTrace st = new StackTrace(); 
        StackFrame sf = st.GetFrame(1);
        string FunctionName = sf.GetMethod().ToString().Replace("Void", "").Replace("System.Windows.Forms.", ""); 
        FirstCell.SubItems.Add(FunctionName);
        FirstCell.SubItems.Add(FunctionOutPut);
        FirstCell.SubItems.Add(t);

        LogCounter++;

    } 
```

所以在我想要的每一种方法中，我只是把

```
AddToAppLog() 
```

该方法包含我对 AddToAppLog() 的调用，然后报告（通过 ListView）方法的名称，我只是添加了调用时间。

我想在这篇文章中解决两件事，关于我对该辅助方法的实现：我从 sf.GetMethod 收到的“FunctionName”很好，它抛出了给定方法的参数类型我喜欢这个想法，只是它包含 parameter.type 的父亲 + 祖父 + 曾祖父，但我只想要底部的类型：

```
System.Windows.Forms.View 
```

这是最短的方法之一（：我试图通过玩 .Replace() 来通过它自己**查看**，所以是否有另一种方法可以将其剥离，或者实际上是同一系列中的另一种方法以我上面提到的方式提取它或我可以使用包含所有可能最常用类型的列表并使用 stringReplace 进行 foreach？

更重要的是，**我如何获得 Method(parameterName) 以及？**

非常感谢提前！

有人可以显示一个易于理解的简单语法获取参数名称的示例吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-28T12:16:39.123

关键在于涉及的线路`sf.GetMethod()`; 如果您改为存储：

```
var method = sf.GetMethod();
string name = method.Name;
var parameters = method.GetParameters(); 
```

您可以访问完整的签名，并注意这`.Name`只是简单的名称 - 不是完整的声明类型名称等。`method.DeclaringType.Name`如果您想要更多上下文，您当然可以访问。注意只能获取参数的***声明***；您无法通过任何正常机制获得它们的*值。*

然而！！！我还将观察到所有这些都具有与反射和堆栈遍历相关的性能成本。如果您有 C# 5 编译器，您可能更喜欢：

```
public void AAdToAppLog([CallerMemberName] string callerName = "")
{ ... } 
```

这意味着**编译器将***自愿*提供调用者的名称（作为在 IL 中生成的常量） - 无需提供它，也不需要遍历堆栈来找出它。但是，您无法获得这样的参数。

# android - 清除整个后台堆栈

> ID：12158888
> 
> 赞同：3
> 
> 时间：2012-08-28T12:07:40.417
> 
> 标签：android, stack, back, activity-finish

有什么方法可以清除整个后台堆栈并以与 JB 上的 finishAffinity() 相同的方式终止 ICS 上的应用程序？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-28T12:13:10.553

可能不会，因为在 JB 中引入了 finishAffinity() 以便能够做到这一点。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-28T12:19:16.717

您可以通过在创建活动时（在 中）在某处跟踪活动来实现相同的结果，`onCreate()`当您想要清除堆栈时，您可以遍历活动并调用`finish()`它们中的每一个。确保你也删除了你在他们的方法中跟踪的活动`onDestroy()`，否则你会泄漏内存。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-28T17:19:19.793

我通过添加 launchMode="singleTask" 解决了

# php - PHP多维数组提取

> ID：12158892
> 
> 赞同：-1
> 
> 时间：2012-08-28T12:07:56.013
> 
> 标签：php, arrays, loops, foreach

我试图从 foreach 循环创建简单的数组

```
function ptd_get_taxanomies(){
            foreach ($ptd_taxs as $ptd_tax) {
                $taxon_arg[] = array(
                    'taxonomy' =>$ptd_tax->taxonomy,
                    'field' => 'id',
                    'terms' => $values
                );
            }
    return $taxon_arg;
} 
```

，但它返回给我多维数组，

```
 Array
(
    [0] => Array
        (
            [taxonomy] => application
            [field] => id
            [terms] => 8

        )

    [1] => Array
    (
        [taxonomy] => dimension
        [field] => id
        [terms] => 4

    )

); 
```

但这不是我想要的，我需要这样的输出 >

```
 array(
    'taxonomy' => 'application',
    'field' => 'id',
    'terms' => '8',
   ),
   array(
    'taxonomy' => 'dimension',
    'field' => 'id',
    'terms' => '4',
  ) 
```

我如何删除第一级数组并获得如上所示的输出

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-28T12:31:13.337

```
function ptd_get_taxanomies(){
    foreach ($ptd_taxs as $ptd_tax) {
        $taxon_arg = $ptd_tax;            
    }
    return $taxon_arg;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-28T12:10:35.420

只是循环结果？

```
$taxon_arg =ptd_get_taxanomies();

foreach($taxon_arg as $arg){
    var_dump($arg);
} 
```

# javascript - 在 JavaScript 中查找弹出窗口的名称

> ID：12158893
> 
> 赞同：2
> 
> 时间：2012-08-28T12:07:59.363
> 
> 标签：javascript, popup

我正在创建多个用于聊天的弹出窗口。现在我的问题是如何从弹出窗口中唯一地找到调用 SendMessage() 以向其他人发送消息。至少如何找到弹出窗口的名称。

请帮助我，以便我可以继续前进

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-28T12:21:59.503

只是回答你的问题，它是对象的`name`属性`window`。

```
window.name 
```

前任：

```
var myWindow = window.open('','someName','width=200,height=100');
myWindow.document.write("<p>This window's name is: " + myWindow.name + "</p>"); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-28T12:27:03.247

您可以像这样向窗口提供您的姓名

```
window.open(URL,name,specs,replace);
myWindow=window.open('','MsgWindow','width=200,height=100');
myWindow.document.write("This window's name is: " + myWindow.name ); 
```

干杯

# image-processing - 如何从这个视频序列中去除噪音？

> ID：12158896
> 
> 赞同：7
> 
> 时间：2012-08-28T12:08:03.913
> 
> 标签：image-processing, signal-processing, kinect, noise

您好，我正在尝试进行一些图像处理。我使用 Microsoft Kinect 来检测房间里的人。我得到深度数据，做一些背景减法工作，当一个人进入场景并四处走动时，我得到了这样的视频序列：

[http://www.screenr.com/h7f8](http://www.screenr.com/h7f8)

我放了一个视频，以便您可以看到视频中噪声的行为。不同的颜色代表不同的深度。白色代表空。如您所见，它非常嘈杂，尤其是红噪声。

我需要尽可能地摆脱除人类之外的一切。当我进行腐蚀/膨胀（使用非常大的窗口大小）时，我可以消除很多噪音，但我想知道是否还有其他方法可以使用。尤其是视频中的红噪声很难使用腐蚀/膨胀去除。

一些注意事项：

1）如果我们知道场景中什么时候没有人，则可以进行更好的背景减除，但是我们所做的背景减除是全自动的，即使场景中有人，甚至当相机移动等时它也可以工作。所以这是我们现在能得到的最好的背景减法。

2) 该算法将在嵌入式系统上实时运行。所以算法越高效、越简单越好。它不一定是完美的。尽管也欢迎复杂的信号处理技术（也许我们可以在另一个不需要嵌入式实时处理的项目中使用它们）。

3）我不需要实际的代码。只是想法。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-28T19:52:04.273

只是我的两分钱：

如果您不介意为此使用 SDK，那么您可以很容易地使用 PlayerIndexBitmask 仅保留人物像素，如 Outlaw Lemur 所示。

现在，您可能不想依赖于驱动程序，而是希望在图像处理级别上做到这一点。我们在一个项目中尝试过并且效果很好的一种方法是基于轮廓的。我们从背景减法开始，然后我们检测到图像中最大的轮廓，假设这是人（因为通常剩下的噪音是非常小的斑点），我们填充了那个轮廓并保留了它。您还可以使用某种中值过滤作为第一遍。

当然，这并不完美，也不适合每种情况，可能还有很多更好的方法。但我只是把它扔在那里，以防它帮助你想出任何想法。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-28T21:38:19.333

看看[眼网](http://www.infomus.org/eyesweb_eng.php)。

它是一个支持 kinect 设备的设计平台，您可以在输出上应用噪声过滤器。它是一个非常有用和简单的`multimodal`系统设计工具。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-28T13:08:37.153

假设您使用的是 Kinect SDK，这非常简单。我会按照[这个](http://channel9.msdn.com/Series/KinectQuickstart/Working-with-Depth-Data)视频了解深度基础知识，然后做这样的事情：

```
 private byte[] GenerateColoredBytes(DepthImageFrame depthFrame)
    {

        //get the raw data from kinect with the depth for every pixel
        short[] rawDepthData = new short[depthFrame.PixelDataLength];
        depthFrame.CopyPixelDataTo(rawDepthData); 

        //use depthFrame to create the image to display on-screen
        //depthFrame contains color information for all pixels in image
        //Height x Width x 4 (Red, Green, Blue, empty byte)
        Byte[] pixels = new byte[depthFrame.Height * depthFrame.Width * 4];

        //Bgr32  - Blue, Green, Red, empty byte
        //Bgra32 - Blue, Green, Red, transparency 
        //You must set transparency for Bgra as .NET defaults a byte to 0 = fully transparent

        //hardcoded locations to Blue, Green, Red (BGR) index positions       
        const int BlueIndex = 0;
        const int GreenIndex = 1;
        const int RedIndex = 2;

        //loop through all distances
        //pick a RGB color based on distance
        for (int depthIndex = 0, colorIndex = 0; 
            depthIndex < rawDepthData.Length && colorIndex < pixels.Length; 
            depthIndex++, colorIndex += 4)
        {
            //get the player (requires skeleton tracking enabled for values)
            int player = rawDepthData[depthIndex] & DepthImageFrame.PlayerIndexBitmask;

            //gets the depth value
            int depth = rawDepthData[depthIndex] >> DepthImageFrame.PlayerIndexBitmaskWidth;

            //.9M or 2.95'
            if (depth <= 900)
            {
                //we are very close
                pixels[colorIndex + BlueIndex] = Colors.White.B;
                pixels[colorIndex + GreenIndex] = Colors.White.G;
                pixels[colorIndex + RedIndex] = Colors.White.R;
            }
            // .9M - 2M or 2.95' - 6.56'
            else if (depth > 900 && depth < 2000)
            {
                //we are a bit further away
                pixels[colorIndex + BlueIndex] = Colors.White.B;
                pixels[colorIndex + GreenIndex] = Colors.White.G;
                pixels[colorIndex + RedIndex] = Colors.White.R;
            }
            // 2M+ or 6.56'+
            else if (depth > 2000)
            {
                //we are the farthest
                pixels[colorIndex + BlueIndex] = Colors.White.B;
                pixels[colorIndex + GreenIndex] = Colors.White.G;
                pixels[colorIndex + RedIndex] = Colors.White.R;
            }

            ////equal coloring for monochromatic histogram
            //byte intensity = CalculateIntensityFromDepth(depth);
            //pixels[colorIndex + BlueIndex] = intensity;
            //pixels[colorIndex + GreenIndex] = intensity;
            //pixels[colorIndex + RedIndex] = intensity;

            //Color all players "gold"
            if (player > 0)
            {
                pixels[colorIndex + BlueIndex] = Colors.Gold.B;
                pixels[colorIndex + GreenIndex] = Colors.Gold.G;
                pixels[colorIndex + RedIndex] = Colors.Gold.R;
            }

        }

        return pixels;
    } 
```

这把除了人类以外的一切都变成了白色，而人类则是金子。希望这可以帮助！

**编辑**

我知道你不一定想要代码只是想法，所以我会说找到一种算法来找到深度，找到人类的数量，并将除人类之外的所有东西都涂成白色。我已经提供了所有这些，但我不知道你是否知道发生了什么。我也有最终程序的图像。

![图像1](../Images/1774007ad96a54427ba371c3b595f5f9.png)

*注意：我为透视添加了第二个深度框架*

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-28T13:24:04.297

我可能是错的（我需要未经处理的视频）但我倾向于说你正试图摆脱照明变化。

这就是使人在“真实”环境中的检测变得非常困难的原因。

您可以查看[其他 SO question](https://stackoverflow.com/questions/3539849/how-to-do-the-illumination-correction-when-images-are-taken-in-various-illuminat)以获得一些链接。

我曾经以与您相同的配置实时检测人类，但使用单目视觉。就我而言，一个非常好的描述符是[LBPs](http://en.wikipedia.org/wiki/Local_binary_patterns)，它主要用于纹理分类。这很容易付诸实践（网络上到处都有实现）。

LBP 基本上用于定义检测到运动的感兴趣区域，这样我就可以只处理部分图像并消除所有噪声。

例如，本文使用 LBP 对图像进行灰度校正。

希望能带来一些新的想法。

# c# - C# - DataGridView - 始终显示 TopLeftHeaderCell

> ID：12158897
> 
> 赞同：0
> 
> 时间：2012-08-28T12:08:08.550
> 
> 标签：c#, winforms

即使 DataGridView 不包含行或列，是否可以显示 DataGridView 的 TopLeftHeaderCell？

目前 TopLeftHeaderCell 在至少存在一列时显示，但在没有列和行时不显示。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-28T14:16:09.620

向数据网格视图添加一个虚拟列，然后将该列的可见性设置为 false。

```
dataGridView1.Columns.Add("dummyheader", "Dummy");
        dataGridView1.Columns[0].Visible = false; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-28T14:21:22.270

这是不可能的，你的 gridview 必须包含 columns ，如果你没有行，你可以打印你的 TopLeftHeaderCell

# c# - 如何在 LINQ 中循环集合并传递数据

> ID：12158899
> 
> 赞同：3
> 
> 时间：2012-08-28T12:08:12.717
> 
> 标签：c#, .net, linq, lambda

我如何在 LINQ 中执行此操作 - 所以我不必使用 ForEach 或循环？

当满足某些条件时，我似乎无法弄清楚如何传递列表，并以这种方式使用 LINQ 循环集合。

```
products.ForEach(delegate(CustomEcomProducts p)
{                            
  p.VariantProducts = variants.Where(prod => prod.VariantParentID == p.ProductID)
                        .ToList();
}); 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-28T12:10:28.413

这不是 LINQ 的用途。LINQ 中的**Q**代表“查询”。

最好/最干净/最易读的方法如下：

```
foreach(var product in products)
    product.VariantProducts = variants.Where(x => x.VariantParentID == p.ProductID)
                                      .ToList(); 
```

# algorithm - 这种关系的时间复杂度 - 矩阵链乘法

> ID：12158906
> 
> 赞同：0
> 
> 时间：2012-08-28T12:08:37.980
> 
> 标签：algorithm, recursion, big-o, time-complexity, matrix-multiplication

我认为矩阵链乘法问题的（低效）递归过程可以是这样的（基于Cormen中给出的递归关系）：

```
MATRIX-CHAIN(i,j)
    if i == j
        return 0
    if i < j
        q = INF

        for k = i to j-1
            q = min (q, MATRIX-CHAIN(i,k) + MATRIX-CHAIN(k+1, j) + c)  
            //c = cost of multiplying two sub-matrices.

        return q 
```

时间复杂度为：

`T(n) = summation over k varying from i to j [T(k) + T(n-k)]`

这里，n = 要相乘的矩阵数。

T(n) 的值是多少以及如何？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-28T12:20:05.650

这是[http://en.wikipedia.org/wiki/Catalan_number](http://en.wikipedia.org/wiki/Catalan_number)

您可以将递归关系视为做括号。wiki 页面深入描述了如何获得公式。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-28T12:28:57.663

This might help:

you only have to work out each matrix-chain once (and store its value).

start = anywhere between i and j

end = anywhere between start and j

k = anywhere between start and end

if we think of a number with all 0's apart from three 1's (which represent start, k, end)

this special number has j-i+1 digits.

e.g. if i = 3 and j = 6 we need 4 digits giving us the following options:

```
1101 (i=3, k=4, j=6)

1011 (i=3, k=5, j=6)

0111 (i=4, k=5, j=6)

1110 (i=3, k=4, j=5) 
```

number of choices for i,j,k = Combinations(3, j-i+1)

this is `n!/(k! * (n-k)!) = (j-i+1)! / (3! * (j-i+1-3)!)`

# mysql - MySQL - 我可以在实际插入查询本身中使用将要插入的 insert_id 吗？

> ID：12158911
> 
> 赞同：1
> 
> 时间：2012-08-28T12:08:52.893
> 
> 标签：mysql, duplicates, unique-id

我刚刚遇到一种情况，我需要在另一列中复制每个新行的唯一（自动递增）ID。所以我想知道，而不是用老式的方式来做：

1.  插入行
2.  获取 insert_id
3.  使用 insert_id 更新行

我可以告诉 MySQL 使用要设置新 id 的相同值作为另一列的值吗？

沿着这条线的东西：

```
INSERT INTO my_table(unique_column, id_duplicate) 
VALUES('value', GET_UNIQUE_ID_OF_THIS() ) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-28T12:33:49.577

在单个查询中使用自动增量列无法完成您尝试完成的任务。

尝试从另一个方向接近它。假设您的自动增量列是`id`，而您的另一列称为`other_id`。您可以将`other_id`列设置为允许 NULL，并简单地将其值设置为 NULL 以进行初始插入。

然后，当您查询该值时，只需执行以下操作：

```
SELECT id, IFNULL(other_id, id) AS other_id FROM mytable 
```

最终结果是一样的。如果你有反对 NULL 的东西，你也可以使用 0 作为默认值，因为自动增量值从 1 开始。

# r - 使用希伯来语（或 UTF-8）编码为 R 中的 pdf/svg 设备中的文本保存绘图？

> ID：12158912
> 
> 赞同：5
> 
> 时间：2012-08-28T12:08:56.613
> 
> 标签：r, encoding, utf-8, svg, hebrew

我想保存一个文本（例如，在标题中）使用希伯来语的情节。尝试以下方法不起作用：

```
pdf("temp.pdf")
plot(1, main = "שלום")
dev.off()

svg("temp.svg")
plot(1, main = "שלום")
dev.off() 
```

虽然使用：

```
png("temp.png")
plot(1, main = "שלום")
dev.off() 
```

将给出正确的输出。

有没有办法为pdf和svg修复它？

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-28T12:54:30.410

尝试使用`Cairo`：

```
library(Cairo)
CairoPDF("temp.pdf")
plot(1, main = "שלום")
dev.off()

CairoSVG("temp.svg")
plot(1, main = "שלום")
dev.off() 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-28T12:38:39.433

您需要使用`pdfFonts`来分配具有正确字形的字体。目前，您的屏幕设备似乎正在使用这种字体，但您的 pdfFonts 在希伯来语方面是不明确的。

```
?pdfFonts
names(pdfFonts() 
```

# android - 从 Wifi 到 3G 的不同 SMTP 端口

> ID：12158920
> 
> 赞同：2
> 
> 时间：2012-08-28T12:09:38.630
> 
> 标签：android

我的 android 应用程序使用该`JavaMail`库发送带有附件的电子邮件。通过`Wifi`应用程序工作得很好，但是当我断开连接`WiFi`并打开时`3G`，邮件无法发送。似乎我无法联系到邮件服务器，即使邮件服务器在互联网上是公共的，而不是在网络上本地。

当我连接到 3G 时，SMTP 端口会改变吗？如果是这样，那就很奇怪了。发送邮件的代码片段如下

```
package Logic;

public class SendMail extends javax.mail.Authenticator {

    private String _user;
    private String _pass;

    private String[] _to;
    private String _from;

    private String _port;
    private String _sport;

    private String _host;

    private String _subject;
    private String _body;

    private boolean _auth;

    private boolean _debuggable;

    private Multipart _multipart;
    SharedPreferences sharedPrefs;

    public SendMail() {

        _user = ""; // username
        _pass = ""; // password
        _from = ""; // email sent from
        _subject = ""; // email subject
        _body = ""; // email body

        _debuggable = false; // debug mode on or off - default off
        _auth = true; // smtp authentication - default on

        _multipart = new MimeMultipart();

        // There is something wrong with MailCap, javamail can not find a
        // handler for the multipart/mixed part, so this bit needs to be added.
        MailcapCommandMap mc = (MailcapCommandMap) CommandMap
                .getDefaultCommandMap();
        mc.addMailcap("text/html;; x-java-content-handler=com.sun.mail.handlers.text_html");
        mc.addMailcap("text/xml;; x-java-content-handler=com.sun.mail.handlers.text_xml");
        mc.addMailcap("text/plain;; x-java-content-handler=com.sun.mail.handlers.text_plain");
        mc.addMailcap("multipart/*;; x-java-content-handler=com.sun.mail.handlers.multipart_mixed");
        mc.addMailcap("message/rfc822;; x-java-content-handler=com.sun.mail.handlers.message_rfc822");
        CommandMap.setDefaultCommandMap(mc);

    }

    public SendMail(Context c) {
        this();

        sharedPrefs = PreferenceManager.getDefaultSharedPreferences(c);
        _host = sharedPrefs.getString("host", null);
        _port = sharedPrefs.getString("port", null);
        _sport = sharedPrefs.getString("port", null); 
        _user = sharedPrefs.getString("mail", null);
        _pass = sharedPrefs.getString("pw", null); 

    }

    public boolean send() throws Exception {
        Properties props = _setProperties();

        if (!_user.equals("") && !_pass.equals("") && _to.length > 0
                && !_from.equals("") && !_subject.equals("")
                && !_body.equals("")) {

            Session session = Session.getInstance(props,
                    new GMailAuthenticator(_user, _pass));

            MimeMessage msg = new MimeMessage(session);

            msg.setFrom(new InternetAddress(_from));

            InternetAddress[] addressTo = new InternetAddress[_to.length];
            for (int i = 0; i < _to.length; i++) {
                addressTo[i] = new InternetAddress(_to[i]);
            }
            msg.setRecipients(MimeMessage.RecipientType.TO, addressTo);

            msg.setSubject(_subject);
            msg.setSentDate(new Date());

            // setup message body
            BodyPart messageBodyPart = new MimeBodyPart();
            messageBodyPart.setText(_body);
            _multipart.addBodyPart(messageBodyPart);

            // Put parts in message
            msg.setContent(_multipart);

            // send email, henger noe her?!
            Transport.send(msg);

            return true;
        } else {
            return false;
        }
    }

    public void addAttachment(String filename) throws Exception {
        BodyPart messageBodyPart = new MimeBodyPart();
        DataSource source = new FileDataSource(filename);
        messageBodyPart.setDataHandler(new DataHandler(source));
        messageBodyPart.setFileName(filename);

        _multipart.addBodyPart(messageBodyPart);
    }

    class GMailAuthenticator extends Authenticator {
        String user;
        String pw;

        public GMailAuthenticator(String username, String password) {
            super();
            this.user = username;
            this.pw = password;
        }

        public PasswordAuthentication getPasswordAuthentication() {
            return new PasswordAuthentication(user, pw);
        }
    }

    private Properties _setProperties() {
        Properties props = new Properties();

        props.put("mail.smtp.host", _host);
        props.put("mail.smtp.starttls.enable", "true");

        if (_debuggable) {
            props.put("mail.debug", "true");
        }

        if (_auth) {
            props.put("mail.smtp.auth", "true");
        }

        props.put("mail.smtp.port", _port);
        props.put("mail.smtp.socketFactory.port", _sport);
        props.put("mail.smtp.socketFactory.fallback", "true");

        return props;
    }

    public String getBody() {
        return _body;
    }

    public void setBody(String _body) {
        this._body = _body;
    }

    public void setTo(String[] toArr) {
        this._to = toArr;
    }

    public void setFrom(String string) {
        this._from = string;
    }

    public void setSubject(String string) {
        this._subject = string;
    }
} 
```

是的，我在清单中指定了正确的权限

```
<uses-permission android:name="android.permission.INTERNET"/> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-28T12:14:08.703

一些 ISP 限制 SMTP 服务器的使用，并强制您使用他们的 SMTP 服务器而不是您自己的服务器。
因此，您将`pop.yourmailserver.com`使用`smtp.yourisp.com`.

或者，他们禁止您使用 3G 的 SMTP 发送邮件。

# symfony1 - symfony required 选项是如何工作的？

> ID：12158925
> 
> 赞同：0
> 
> 时间：2012-08-28T12:09:58.713
> 
> 标签：symfony1, symfony-1.4, propel, required

我不知道为什么，但我记得当您有一个未呈现必填字段的 symfony 表单时，该`isValid`函数不会检查它们。

我的意思是它只检查小部件在您使用时是否有值。在我目前的项目中，这似乎是错误的。

是否有设置或允许这样做的东西？

编辑：这是表格：

```
 class DemandeForm extends BaseDemandeForm
    {
  public function configure()
  {
    $this->widgetSchema['DEMANDE_DESC']         = new sfWidgetFormTextarea();
    $this->validatorSchema['DEMANDE_DESC']      = new sfValidatorString(array('required' => true),
    array("required" => str_replace('$1','Description de la demande',MessagePeer::getFrameworkMessageFromNum(7))));

    $this->validatorSchema['DEMANDE_LIB']      = new sfValidatorString(array('required' => true),
    array("required" => str_replace('$1','Libelle de la demande',MessagePeer::getFrameworkMessageFromNum(7))));

    $this->widgetSchema['TIERS_ID']         = new crfcWidgetAutocomplete();
    $this->validatorSchema['TIERS_ID']      = new sfValidatorString(array('required' => true),
    array("required" => str_replace('$1','Tiers',MessagePeer::getFrameworkMessageFromNum(7))));

    $bat_choices = $this->getOption('bat_choices');
    $this->widgetSchema['BAT_CODE']         = new sfWidgetFormChoice(array('choices' => $bat_choices , 'expanded' => false, 'multiple' => false));
    $this->validatorSchema['BAT_CODE']      = new sfValidatorChoice(array('choices' => array_keys($bat_choices),'required' => false)
    );

    $local_choices = $this->getOption('local_choices');
    $this->widgetSchema['LOCAL_CODE']       = new sfWidgetFormChoice(array('choices' => $local_choices, 'expanded' => false, 'multiple' => false));
    $this->validatorSchema['LOCAL_CODE']    = new sfValidatorChoice(array('choices' => array_keys($local_choices),'required' => false)
    );

    $site_choices = $this->getOption('site_choices');
    $this->widgetSchema['SITE_CODE']       = new sfWidgetFormChoice(array('choices' => $site_choices, 'expanded' => false, 'multiple' => false));
    $this->validatorSchema['SITE_CODE']    = new sfValidatorChoice(array('choices' => array_keys($site_choices),'required' => false)
    );

    $ress = Array(""=>"") + EnumereValeurPeer::getByType('FONCTIONS',true);
    $this->widgetSchema['FONCTION_EVAL_NUMINT']         = new sfWidgetFormChoice(array('choices' => $ress , 'expanded' => false, 'multiple' => false));
    $this->validatorSchema['FONCTION_EVAL_NUMINT']      = new sfValidatorChoice(array('choices' => array_keys($ress),'required' => false),
    array("required" => str_replace('$1','Fonction demandeur',MessagePeer::getFrameworkMessageFromNum(7))));

    $ress = Array(""=>"") + EnumereValeurPeer::getByType('CIRCONSTANCE',true);
    $this->widgetSchema['CIRCONSTANCE_EVAL_NUMINT']       = new sfWidgetFormChoice(array('choices' => $ress, 'expanded' => false, 'multiple' => false));
    $this->validatorSchema['CIRCONSTANCE_EVAL_NUMINT']    = new sfValidatorChoice(array('choices' => array_keys($ress),'required' => false),
    array("required" => str_replace('$1','Circonstance de la demande',MessagePeer::getFrameworkMessageFromNum(7))));

    $ress = Array(""=>"") + EnumereValeurPeer::getByType('TRAVAUX',true);
    $this->widgetSchema['CATEGORIE_EVAL_NUMINT']         = new sfWidgetFormChoice(array('choices' => $ress , 'expanded' => false, 'multiple' => false));
    $this->validatorSchema['CATEGORIE_EVAL_NUMINT']      = new sfValidatorChoice(array('choices' => array_keys($ress),'required' => false),
        array("required" => str_replace('$1','Catégorie de travaux',MessagePeer::getFrameworkMessageFromNum(7)))
    );

    $ress = Array(""=>"") + EnumereValeurPeer::getByType('QUALIFICATION',true);
    $this->widgetSchema['QUALIFICATION_EVAL_NUMINT']         = new sfWidgetFormChoice(array('choices' => $ress , 'expanded' => false, 'multiple' => false));
    $this->validatorSchema['QUALIFICATION_EVAL_NUMINT']      = new sfValidatorChoice(array('choices' => array_keys($ress),'required' => true),
        array("required" => str_replace('$1','Qualification',MessagePeer::getFrameworkMessageFromNum(7)))
    );

    $ress = Array(""=>"") + EnumereValeurPeer::getByType('PROGRAMME',true);
    $this->widgetSchema['PROGRAMME_EVAL_NUMINT']         = new sfWidgetFormChoice(array('choices' => $ress , 'expanded' => false, 'multiple' => false));
    $this->validatorSchema['PROGRAMME_EVAL_NUMINT']      = new sfValidatorChoice(array('choices' => array_keys($ress),'required' => true),
            array("required" => str_replace('$1','Programme',MessagePeer::getFrameworkMessageFromNum(7)))
            );

    $ress = Array(""=>"") + EnumereValeurPeer::getByType('SUPPORT',true);
    $this->widgetSchema['SUPPORT_EVAL_NUMINT']         = new sfWidgetFormChoice(array('choices' => $ress , 'expanded' => false, 'multiple' => false));
    $this->validatorSchema['SUPPORT_EVAL_NUMINT']      = new sfValidatorChoice(array('choices' => array_keys($ress),'required' => false),
    array("required" => str_replace('$1','Support',MessagePeer::getFrameworkMessageFromNum(7))));

    $this->widgetSchema['COMMENTAIRE']         = new sfWidgetFormTextarea();
    $this->validatorSchema['COMMENTAIRE']      = new sfValidatorString(array('required' => false));

    $this->widgetSchema['DEMANDE_DTDEM']                    = new myWidgetFormRichDate();
    $this->validatorSchema['DEMANDE_DTDEM']                 = new sfValidatorDate(array('required' => true, 'date_format'=>'@(?P<day>\d{2})/(?P<month>\d{2})/(?P<year>\d{4})@'),
        array('required'=> str_replace('$1','Date de la demande',MessagePeer::getFrameworkMessageFromNum(7)),
        'bad_format' => str_replace('$1','Date de la demande',MessagePeer::getFrameworkMessageFromNum(19)),
        'invalid' => str_replace('$1','Date de la demande',MessagePeer::getFrameworkMessageFromNum(19))));

    $this->widgetSchema['DEMANDE_DTFIN']                    = new myWidgetFormRichDate();
    $this->validatorSchema['DEMANDE_DTFIN']                 = new sfValidatorDate(array('required' => true, 'date_format'=>'@(?P<day>\d{2})/(?P<month>\d{2})/(?P<year>\d{4})@'),
        array('required'=> str_replace('$1','Date de fin des travax souhaitée',MessagePeer::getFrameworkMessageFromNum(7)),
        'bad_format' => str_replace('$1','Date de fin des travax souhaitée',MessagePeer::getFrameworkMessageFromNum(19)),
        'invalid' => str_replace('$1','Date de fin des travax souhaitée',MessagePeer::getFrameworkMessageFromNum(19))));

    $this->widgetSchema['DEMANDE_ACCESSIBILITE']            = new sfWidgetFormInputCheckbox();
    $this->validatorSchema['DEMANDE_ACCESSIBILITE']         = new sfValidatorBoolean(array('required' => false));

    $this->widgetSchema['DEMANDE_URGENT']                   = new sfWidgetFormInputCheckbox();
    $this->validatorSchema['DEMANDE_URGENT']                = new sfValidatorBoolean(array('required' => false));

    $this->widgetSchema['DEMANDE_INCENDIE']                 = new sfWidgetFormInputCheckbox();
    $this->validatorSchema['DEMANDE_INCENDIE']              = new sfValidatorBoolean(array('required' => false));

    $this->validatorSchema->setOption('allow_extra_fields' , true);
    $this->validatorSchema->setOption('filter_extra_fields' , false);
  }

} 
```

编辑 2：

问题是：它是否比所需的 DEMANDE_DTDEM 字段正常，引发所需的表单字段错误，而他没有被渲染？

表单字段不应该只在他被使用时才被验证吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-28T19:22:03.183

是的，这是正常行为。字段验证与渲染无关。如果您不想呈现小部件，则必须显式删除小部件和验证器（使用 unset 或 useFields）。

如果您定义了一个小部件和一个验证器（如您的情况），但您不调用 to `$form['DTDEM']->render()`，则该值将始终为空。

**您理解这一点非常重要**。在这种情况下，该字段是必需的，然后变成该错误，但如果它不是必需的，该`$form->save()`方法将始终清除数据库中对象的值！

永远不要让小部件不渲染。您应该在调试时做一些回`$form`显以查看配置了哪些小部件，如果您不想要其中一些，只需在表单`configure()`方法中删除它们（正如我所说，使用 unset 或 useField）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-31T14:33:05.047

我想对 glerendegui 的回答进行补充。

他所说的在一般情况下是正确的。但是，有一个元素游戏正在改变。表单的选项 filter_extra_fields(false) 显着改变了规则。这也是我最初误解的原因。

因为将此选项设置为 false，当您的小部件尚未呈现时，$form->save() 将不会在您的对象中设置空值。

这是一个重要的补充，因为在我继承的所有遗留代码中，此选项的使用很常见，并且没有受到挑战。

# php - 如何静默取消映射映射的网络驱动器

> ID：12158931
> 
> 赞同：0
> 
> 时间：2012-08-28T12:10:24.730
> 
> 标签：php, exec, net-use, subst

我有一个本地运行的 PHP 脚本，我在其中执行此操作

```
exec('subst T: C:\\Development'); 
```

但如果 T: 已经映射或替换到某个其他位置，我想先取消映射它。所以我这样做

```
exec('net use T: /DELETE /y');
exec('subst T: /D'); 
```

但是当 T: 未映射时， exec net use 将向控制台打印错误，而当它*已*映射但未映射时， exec subst 将向控制台打印错误。我想在控制台窗口中有干净的输出，所以当我尝试取消映射未映射的驱动器时不会出错。问题是我完全不知道该怎么做。我可以禁止打印错误消息吗？如果没有，仅当驱动器已映射时如何运行命令？那么，巧合的是，我怎么知道我应该使用 net use /d 还是 subst /d？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-28T12:12:53.347

在每个命令之后添加一个`> NUL`以将其输出通过管道传输到...无处。IE`exec('net use T: /DELETE /y > NUL');`

# asp.net - ASP.NET 捆绑 - 包含的文件更改后捆绑不更新（返回 304 未修改）

> ID：12158933
> 
> 赞同：74
> 
> 时间：2012-08-28T12:10:34.577
> 
> 标签：asp.net, bundle, asp.net-optimization, bundling-and-minification

我正在尝试 ASP.NET 捆绑与 ASP.NET MVC 4 应用程序。情况是我想做一个 CDN 风格的服务，它有 JS 和 CSS 文件，你可以从其他站点使用这种类型的地址访问它们：[http://www.mycdn.com/scripts/plugin/js](http://www.mycdn.com/scripts/plugin/js)，其中捆绑并缩小所有包含的 .js 文件。

我的一个文件的捆绑配置如下所示：

```
bundles.Add(new ScriptBundle("~/Scripts/plugin/pluginjs").Include("~/Scripts/plugin/jquery.plugin.js")); 
```

但是，当我这样做时，即使我更改了原始 js 文件，捆绑包也没有得到更新。当我刷新浏览器时，我不断收到 304 Not Modified，并且缩小文件的内容没有更新。我怎样才能使包更新，因为旧内容的包是没用的？我尝试了各种方法，但无法找到解决方案。

提前致谢！

* * *

## 回答 #1

> 赞同：86
> 
> 时间：2012-11-07T07:58:45.687

我只是遇到了完全相同的问题。我有一个包含 2 个 CSS 文件的文件夹：

*   ~/内容/main.css
*   ~/Content/main.min.css（在我之前的手动缩小过程中已经存在）

我的捆绑代码是这样的：

```
bundles.Add(new StyleBundle("~/css/main").Include("~/content/main.css")); 
```

无论我改变了多少`main.css`，输出都是相同的 url 具有相同的内容：

```
<link href="/css/main?v=6Xf_QaUMSlzHbXralZP7Msq1EiLTd7g1vId6Vcy8NJM1" rel="stylesheet"/> 
```

更新捆绑包的唯一方法是重建我的解决方案——显然不是最好的方法。

但是**，一旦我删除`main.min.css`，一切都开始正常工作。**再玩一点，我发现如果两者都有`main.css`和`main.min.css`，那么更新`main.min.css`实际上会更新捆绑包......很奇怪，但至少是可以预测的。

* * *

## 回答 #2

> 赞同：34
> 
> 时间：2015-12-11T21:27:17.607

在努力弄清楚包缓存刷新的原因之后，我得出了一些希望对其他人有所帮助的结论：

## 如果 .min 文件包含在包中：

*   发布模式 + 更改最小 js 代码 = 缓存刷新
*   发布模式 + 更改非最小 js 代码 = 无缓存刷新
*   调试模式 + 更改最小 js 代码 = 无缓存刷新
*   调试模式 + 更改非最小 js 代码 = 无缓存刷新

## 如果 .min 文件不包含在包中：

*   调试模式 + 更改 js 代码 = 无缓存刷新
*   发布模式+更改js代码=缓存刷新

## 笔记

*   调试模式是指 web.config 编译 debug = true （和 BundleTable.EnableOptimizations = false 或被省略）
*   发布模式是指 web.config 编译 debug = false （和 BundleTable.EnableOptimizations = true 或被省略
*   确保您实际上是在进行代码更改。空格和注释之类的更改不会影响生成的缩小 js，因此服务器是正确的，因为没有更改（因此不刷新捆绑缓存）。

* * *

## 回答 #3

> 赞同：11
> 
> 时间：2017-01-04T20:26:59.713

请注意，如果您使用的是 Google Chrome，缓存会非常激进。为确保没有缓存任何内容，您可以调出`Ctrl-Shift-I`开发人员窗格。转到`Network`并单击`Disable Cache`。确保您保持打开状态。现在刷新页面。您的缓存应该被清除，并且文件更改现在应该反映。

[![在谷歌浏览器中禁用缓存](../Images/ade24bc0aad792a2bf30727549f71b51.png)](https://i.stack.imgur.com/4RHG2.png)

* * *

## 回答 #4

> 赞同：9
> 
> 时间：2013-06-27T12:18:58.663

好的，这是我的故事。我禁用了 Web Essentials 中较少文件的最小文件生成。旧的 min 文件没有被删除，并且 bundle thingy 看到的是那些而不是更新的 CSS。祝你好运！

**编辑**

过了一段时间，我又在同一个问题上花了 2 个小时。我想这次是我的错 - 我忘记了领先的波浪号，即我写了

```
Scripts.Render("/js/script") 
```

替代

```
Scripts.Render("~/js/script") 
```

无论出于何种原因，它有时会奏效，有时却没有。

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2012-08-29T07:57:57.343

我实际上决定不使用 System.Web.Optimization 来完成这项任务，但我发现了 Microsoft Ajax Minifier，它也包含在 WebGrease.dll 中，它与 MVC4 System.Web.Optimization 库一起提供。我编写了以下函数，然后在 Application_Start 中为每个缩小文件调用该函数：

```
 public static void MinifyFile(string virtualPath)
    {
        string fullPath = HttpContext.Current.Server.MapPath(virtualPath);
        string extension = Path.GetExtension(fullPath).ToLower();
        string targetPath = fullPath.Substring(0, fullPath.Length - extension.Length) + ".min" + extension;
        if(File.Exists(fullPath) == false) 
        {
            throw new FileNotFoundException("File not found: " + fullPath);
        }
        string input = File.ReadAllText(fullPath);
        string output;
        if (extension == ".js")
        {
            Microsoft.Ajax.Utilities.Minifier jsmin = new Microsoft.Ajax.Utilities.Minifier();
            output = jsmin.MinifyJavaScript(input);
        }
        else if (extension == ".css")
        {
            Microsoft.Ajax.Utilities.Minifier jsmin = new Microsoft.Ajax.Utilities.Minifier();
            output = jsmin.MinifyStyleSheet(input);                
        }
        else
        {
            throw new NotSupportedException(extension + " is not supported for minification.");
        }
        File.WriteAllText(targetPath, output);
    } 
```

现在，我的应用程序正在缩小 Application_Start 上的所有文件。

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2017-02-06T20:34:57.497

捆绑操作区分大小写。确保文件名大小写正确。

我不得不在我的 BundleConfig.cs 中更改一行：

```
bundles.Add(new StyleBundle("~/Content/css").Include(
    "~/Content/bootstrap.css",
    "~/Content/Site.css"));  <-- Uppercased. 
```

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2012-08-28T20:22:05.017

我不确定目前的功能是否真的支持成为 CDN，因为它隐式依赖 url 包含哈希码以防止浏览器缓存。

但是我可以尝试帮助您尝试到达那里，也许今天有可能......一个可能成为障碍的问题是 BundleHandler 将在任何包含 IfLastModified 标头的捆绑请求上返回 304，因为假设是由于 url 中的指纹，浏览器缓存始终有效。

您能否添加一些有关如何呈现对捆绑包的引用的详细信息？你在使用类似 Scripts.Render("~/Scripts/plugin/pluginjs") 的东西吗？

您的捆绑脚本标签应如下所示：

```
Good: <script src="/fbt/bundles/js?v=wvLq7H7qEZB2giyIRn7aEZAxhHOb2RfTYYh2HMd9EqM1"></script> 
```

如果您的脚本标签引用了没有版本字符串的原始包，这可能会解释您看到的缓存问题：

```
Not good: <script src="/fbt/bundles/js></script> 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2014-04-16T17:23:55.973

我看到了这个答案，但这些都不是我的情况。有一些 CSS 规则使样式捆绑器失败并且我得到相同的哈希，即使我对 CSS 文件进行了更改。以前对我来说一切正常。

在我的情况下，违反 css 选择器规则是 -

```
#globalSearch.searching { ... } 
```

如果我做这个

```
.searching { ... } 
```

这一切都重新开始工作，我对我的 css 文件所做的任何更改，捆绑器哈希都会正确更改。只需添加此答案，因为它可能会对某人有所帮助。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2013-02-27T16:19:52.453

我知道自从更新以来已经有一段时间了，但我发现我只需要等待几秒钟就可以让包赶上我的 css 更改。我将引导程序较少的文件编译成 css 和 min.css，而且绝对不能立即看到我的更改。对我来说，在带有 ssd 的快速电脑上大约需要 10 秒。您的里程可能会因您的系统规格而异。

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2015-01-04T23:54:33.860

只需通过 NuGet 更新您的 System.Web.Optimization ![在此处输入图像描述](../Images/e5e2bd66febccba4a456578f82481ef0.png)

![在此处输入图像描述](../Images/bf2a1c777b43e8f9cd168de08bbfbb2f.png)

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2019-11-22T19:56:18.893

确保您的应用程序确实以发布模式部署，并且您的主机正在摆弄设置。我遇到了这个问题，但经过调查，我意识到我的文件实际上并没有被捆绑。我在发布模式下部署，但由于某种原因（我怀疑是主机），我认为我的应用程序实际上是在调试中部署的。

我必须在 BundleConfig.cs 文件的末尾设置以下内容以强制捆绑，这反过来又强制更新的文件最终显示在浏览器中。

```
BundleTable.EnableOptimizations = true; 
```

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2016-12-29T21:28:31.330

对我来说，问题是我让 Fiddler 运行。在我关闭 dit 并重建我的解决方案后，它正在为我加载 js 文件中的更改。

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2019-12-28T08:03:44.040

我今天遇到了这个问题，我浏览了所有答案，但这里的任何解决方案都没有解决我的问题。后来我发现这是因为我的 CSS 中有错误。其中一个 url 未关闭（缺少最后一个单引号）。

这会导致 css 文件出现语法错误，并且无法针对 Bundleconfig 进行编译。我想输出日志中会有一条消息，但我没有检查。

如果您在 2020 年发生这种情况，请尝试确保您的 CSS 没有语法错误。

* * *

## 回答 #14

> 赞同：0
> 
> 时间：2016-12-08T11:36:49.833

对于它的价值，我刚才遇到了同样的问题，一个 js 文件无论如何都莫名其妙地拒绝更新（重建、强制清除缓存等）。过了一会，我打开IE中的客户端调试工具（F12）开始观察网络流量，仅此行为就强制刷新JS文件。去看看，但它奏效了。

* * *

## 回答 #15

> 赞同：0
> 
> 时间：2017-07-13T16:25:14.780

我有一个类似的问题。在我的情况下，我在样式包中引用了一个 CSS 文件，并在我的 MVC 视图中引用了该包。我还在捆绑代码中将“EnableOptimizations”标志设置为 false。

尽管如此，视图拒绝更新以包含新的 CSS 文件。

我的解决方案是创建 CSS 文件的缩小版本并将其包含在项目中并开始工作。我不知道为什么会出现这种情况，因为该缩小文件在任何地方都没有被引用（即使在视图更新之后），甚至不应该考虑，因为代码被设置为不被优化。这很可能是捆绑功能的错误（或功能）。我希望这可以帮助其他人遇到这个问题。

# javascript - Javascript绘制画布内存泄漏

> ID：12158937
> 
> 赞同：5
> 
> 时间：2012-08-28T12:10:41.693
> 
> 标签：javascript, memory, canvas, memory-leaks, draw

该脚本在所有浏览器中都无休止地占用内存。我不明白为什么！

```
var canvas = document.getElementById("canvas");
var ctx = canvas.getContext("2d");
var particles = [], amount = 5;
var x = 100; var y = 100;
var W, H;
var p, gradient;  

//dimensions
if(window.innerHeight){
    W = window.innerWidth, H = window.innerHeight;
}else{
    W = document.documentElement.clientWidth, H = document.documentElement.clientHeight;
}
canvas.width = W, canvas.height = H;

//array voor de meerdere particles
for(var i=0;i<amount;i++){
    particles.push(new create_particle());
}

function create_particle(){
    //random positie op canvas
    this.x = Math.random()*W;
    this.y = Math.random()*H;

    //random snelheid
    this.vx = Math.random()*20-10;
    this.vy = Math.random()*20-10;

    //Random kleur
    var r = Math.random()*255>>0;
    var g = Math.random()*255>>0;
    var b = Math.random()*255>>0;
    this.color = "rgba("+r+", "+g+", "+b+", 0.5)";
    this.radius = Math.random()*20+20;

}

window.requestAnimFrame = (function(){
  return  window.requestAnimationFrame       || 
          window.webkitRequestAnimationFrame || 
          window.mozRequestAnimationFrame    || 
          window.oRequestAnimationFrame      || 
          window.msRequestAnimationFrame     || 
          function( callback ){
            window.setTimeout(callback, 1000 / 60);
          };
})();

function draw(){
    canvas.width = canvas.width;
    canvas.height = canvas.height;
    //achtergrond tekenen
    //ctx.globalCompositeOperation = "source-over";
    //ctx.fillStyle = "rgba(0,0,0,0.5)";
    ctx.fillRect(0, 0, W, H);
    //ctx.globalCompositeOperation = "lighter";

    //teken cirkel
    for(var t=0; t<particles.length;t++){
        p = particles[t];

        //gradient
        gradient = ctx.createRadialGradient(p.x,p.y,0,p.x,p.y,p.radius);
        gradient.addColorStop(0,"white");
        gradient.addColorStop(0.4,"white");
        gradient.addColorStop(0.4,p.color);
        gradient.addColorStop(1,"black");
        ctx.beginPath();
        ctx.fillStyle = gradient;
        ctx.arc(p.x,p.y,p.radius,Math.PI*2,false)
        ctx.fill();

        //beweeg
        p.x+=p.vx;
        p.y+=p.vy;

        //canvas boundery detect
        if(p.x < -50)p.x = W+50;
        if(p.y < -50)p.y=H+50;
        if(p.x > W+50)p.x = -50;
        if(p.y > H+50)p.y = -50;
    }
}

(function animloop(){
    canvas.width = canvas.width;
    canvas.height = canvas.height;
    requestAnimFrame(animloop);
    draw();
})();

//resize?
function resizeCanvas(){ 
    canvas.height = W; 
    canvas.width = H;
    ctx.fillRect(0, 0, W, H);
}
if(window.addEventListener){
     window.addEventListener('resize', resizeCanvas, false);
}else{
     window.attachEvent('resize', resizeCanvas);
} 
```

我试图改变一些代码（这也是最终版本），但它仍然泄漏。如果您使用此脚本并观看“任务管理器”或浏览器内存检查，您会发现它缓慢且不断地消耗内存。

**编辑：**添加 canvas.height 解决方案并移动一些声明后，脚本仍然泄漏！我必须说，看起来 Firefox 比 Chrome 更容易泄漏！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-17T06:43:16.360

你有：

```
 canvas.width = canvas.width;
    canvas.height = canvas.height; 
```

我猜这和 clearRect 一样……但一定要试试这个：

```
function draw(){

   ctx.clearRect ( 0 , 0 , canvas.width , canvas.height );

   /* draw */
} 
```

看看有没有什么变化。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-28T12:18:41.477

在开始另一组绘图之前尝试清洁画布。您可以通过再次设置它的宽度和高度来清除它。

这是一些定向代码：

```
function draw() {
   canvas.width = canvas.width;
   canvas.height = canvas.height;

   /* draw */
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-02-25T04:10:56.207

我的猜测是您的 create_particle 函数可能会泄漏，但我不确定如何泄漏，一个想法是创建一个内部对象而不是使用`this`

```
function create_particle(){
  return {
    x: Math.random()*W,
    y: Math.random()*H,
    vx: Math.random()*20-10,
    vy: Math.random()*20-10,
    r: Math.random()*255>>0,
    g: Math.random()*255>>0,
    b: Math.random()*255>>0,
    color: "rgba("+r+", "+g+", "+b+", 0.5)",
    radius: Math.random()*20+20,
  };
} 
```

我不确定这是否是问题所在，但这似乎是我唯一能真正想到的东西，看起来有点奇怪，

# sql - 在 Crystal Report 中仅打印组中的第一条记录并使其可汇总

> ID：12158945
> 
> 赞同：0
> 
> 时间：2012-08-28T12:11:17.027
> 
> 标签：sql, crystal-reports

我有一张表格，列出了操作员一天完成的每项任务。这是由车间控制程序收集的。还有一列是当天工作的总小时数，这个字段来自他们的时间。该表如下所示：

```
Operator 1   Bestupid        0.5    8      5/12/1986

Operator 1   BeProductive    0.1    8      5/12/1986

Operator 1   Bestupidagain   3.2    8      5/12/1986

Operator 1   Belazy          0.7    8      5/13/1986

Operator 2   BetheBest       1.7    9.25   5/12/1986 
```

我试图通过将流程时间相加并将其与工作时间进行比较来提高效率。问题是，当我对工作时间列进行任何类型的总结时，它会汇总每条详细信息。

我试过了：

```
If Previous (groupingfield) = (groupingfield) Then 
    HoursWorked = 0
Else
    HoursWorked = HoursWorked 
```

我尝试了一个全局三公式技巧，但以上都没有给我一个可总结字段，我得到“已在非重复字段上指定了摘要”

我目前使用一个全局变量，在组标题中重置，但不是 WhilePrintinganything。但是它缺少一些记录，有时我会在同一组中得到两个小时的工作时间> 0 :(

有任何想法吗？

我只是想澄清一下，我有三组：

组：工作中心 --> 操作员 --> 日期

我可以总结任何组的流程时间，这很好。但是，工作时间会打印在每个详细信息行上，即使它实际上应该每个日期只打印一次。因此，当我总结一个操作员的工作时间时，总数是很差的，因为每个条目加起来是 8 小时，而不是每天加起来 8 小时。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-28T12:57:04.817

尝试按操作员分组。然后为每条记录的总和并在组更改时重置的流程小时数创建一个运行总计。在组页脚中，您可以显示您关心的操作员的运行总计和任何其他统计信息。

尝试每天运行另一个总计，但选择最大值作为摘要类型。由于当天的所有记录都将具有相同的工作时间，因此最大值将是正确的。随着日期组的更改重置，您应该一切顺利。

# asp.net - 在 Application_Start() 中显示“正在加载”消息

> ID：12158947
> 
> 赞同：0
> 
> 时间：2012-08-28T12:11:20.947
> 
> 标签：asp.net, asp.net-mvc-3

我有一个 MVC3 应用程序，执行 global.asax Application_Start() 需要 30 多秒。当用户在应用程序池重置后第一次访问该站点时，浏览器只是坐在那里并显示“等待网站...”消息。

有没有办法显示“正在加载数据...”消息/页面，让用户知道一切正常并耐心等待？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-28T12:15:38.260

不，无法显示来自`Application_Start`. IIS 7.5 有一个很酷的[自动启动功能](http://weblogs.asp.net/scottgu/archive/2009/09/15/auto-start-asp-net-applications-vs-2010-and-net-4-0-series.aspx)，它允许您将应用程序预加载到内存中，从而避免长时间的等待。另一种可能性是让一些外部服务定期查询您的站点，这样它就不会被 IIS 卸载。

如果您不能使用此功能，那么您将不得不减少/优化您的工作量，`Application_Start`以便不需要 30 秒。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-28T12:16:53.000

您不能以那种特别的方式这样做，因为服务器没有响应，因此，您无能为力。

但是如何实现一个*心跳*来查询应用程序的任何 URL 以避免它不进入待机模式？

* * *

一个想法：设置一个外部服务每 5 分钟查询一次您的应用程序：

> [在 momentapp 的 restful api 上的 RestSharp 请求](https://stackoverflow.com/questions/9524130/restsharp-requests-on-momentapps-restful-api)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-28T12:20:12.607

不在同一个 .net 应用程序中 - 您不能从 .net 应用程序中显示任何内容`Application_Start`。您可以创建另一个小应用程序作为登录页面，该页面会轮询来自您的主应用程序的响应，然后在收到响应后重定向。

But a better solution would be to move some work out of `Application_Start` - can't you let the user arrive at your first page and then call an initialization method once they have landed?

# c++ - 下限 == 上限

> ID：12158948
> 
> 赞同：24
> 
> 时间：2012-08-28T12:11:23.003
> 
> 标签：c++, math, stl, naming-conventions

下限是什么意思。如果我不得不猜测，我会回答这个函数在小于请求值的最后一个元素处返回迭代器。但我看到lower_bound 几乎和upper_bound 一样。唯一的区别是在 upper_bound 的情况下严格不等式。stl 中是否存在与下限的正常定义一致的真正下限选择函数。

编辑：文档中有太多的否定让我感到困惑。问题是我得到了相同的迭代器。我通过从 lower_bound 返回值中减去 1 来解决它。我用它来插值：

```
 float operator()(double f)
        {
        SpectrumPoint* l=std::lower_bound(beginGet(),endGet(),(SpectrumPoint){float(f),0.0f}
            ,SpectrumPoint::CompareFreqLessThan);
        if(l>beginGet())
            {--l;}

        SpectrumPoint* u=std::lower_bound(beginGet(),endGet(),(SpectrumPoint){float(f),0.0f}
            ,SpectrumPoint::CompareFreqLessThan);

        if(u==endGet())
            {u=beginGet();}

        if(l==u)
            {
            if(u==endGet())
                {return u->amp;}
            return l->amp;
            }

        double f_min=l->freq;
        double A_min=l->amp;
        double f_max=u->freq;
        double A_max=u->amp;

        double delta_f=f_max-f_min;
        double delta_A=A_max-A_min;

        return A_min + delta_A*(f-f_min)/delta_f;
        } 
```

我很抱歉这种混乱:-(

* * *

## 回答 #1

> 赞同：131
> 
> 时间：2012-08-28T12:23:07.017

*   下限：第一个大于或等于的元素。

*   上限：严格大于的第一个元素。

**例子：**

```
+- lb(2) == ub(2)       +- lb(6)        +- lb(8)
|        == begin()     |  == ub(6)     |   +- ub(8) == end()
V                       V               V   V
+---+---+---+---+---+---+---+---+---+---+---+
| 3 | 4 | 4 | 4 | 4 | 5 | 7 | 7 | 7 | 7 | 8 |
+---+---+---+---+---+---+---+---+---+---+---+
    ^               ^                       ^
    |               |                       |
    +- lb(4)        +- ub(4)                +- lb(9) == ub(9) == end()

    |- eq-range(4) -| 
```

如您所见，n 的半开等程*是*[lb( *n* ), ub( *n* ))。

请注意，这两个边界都为您提供了所需值的元素的有意义的插入位置，以便保持顺序，但`lower_bound`有一个显着特征，即*如果*该元素已经存在，那么您将获得一个实际指向该元素的迭代器。因此，您可以使用`lower_bound`有序范围来实现您自己的唯一成员*或多*成员容器。

```
void insert(Container & c, T const & t)
{
    auto it = std::lower_bound(c.begin(), c.end(), t);

    // if unique container:
    if (it != c.end() && *it == t) { /* error, element exists! */ return; }

    c.insert(it, t);
} 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-08-28T12:16:40.790

它在最后一个小于请求值的元素之后返回迭代器。这作为插入位置很有用（这就是函数返回该迭代器的原因）。半开范围`first, lower_bound(first, last, value)`指定所有小于 的值也很有用`value`。

`upper_bound`返回迭代器过去最后一个元素[小于或等于/不大于]所要求的值。或者严格来说：值不小于的最后一个元素，因为这两种算法都专门处理小于比较器。

如果您希望迭代器在由`lower_bound`. `lower_bound`.

当心没有元素小于所要求的值的边缘情况，在这种情况下你不能拥有你想要的东西，因为它不存在。`lower_bound`当然在这种情况下返回范围的开头，因此不需要特殊情况的返回值。

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2012-08-28T14:27:49.673

由于这已重新打开，我将尝试让我的评论成为答案。

这个名字`lower_bound`在数学上是不正确的。一个更好的名字可能是`least_upper_bound`，但这可能会使大多数没有数学头脑的人感到困惑。（然后你怎么称呼`upper_bound`？？`almost_least_upper_bound`耶！）

`lower_bound`我的建议：克服名称和`upper_bound`技术上不正确的事实。定义的两个函数非常有用。将这些功能视为对符号的有用滥用。

`lower_bound`要生成符合 C++ 迭代器概念的数学上正确的函数，该函数必须返回反向迭代器而不是正向迭代器。返回反向迭代器并不像可能被错误命名的`lower_bound`and所采用的方法那么有用`upper_bound`，并且返回反向迭代器的概念与并非所有容器都是可逆的事实相冲突。

为什么是反向迭代器？正如不能保证容器中存在上限一样，同样不能保证会存在下限。存在`lower_bound`和`upper_bound`返回`end()`表明搜索到的值是超出范围的高。需要返回一个真正的下限`rend()`以指示搜索到的值是超出范围的低值。

有一种方法可以以前向迭代器的形式实现真正的下限，但其代价是滥用`end()`“没有下限”的含义。这种滥用符号的问题在于，该函数的某些用户可能会做一些等效的事情`true_lower_bound(off_scale_low_search_value)-1`，瞧！one 有一个指向集合中最大元素的指针。

也就是说，这是如何做到的。`end()`如果容器为空或搜索的值小于容器中的第一个值，则返回真正的下界函数。否则返回`upper_bound()-1`。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-08-28T12:22:49.907

`lower_bound`,`upper_bound`和`equal_range`是在排序序列中执行二进制搜索的函数。对三个函数的需求来自于元素可能在序列中重复的事实：

```
1, 2, 3, 4, 4, 4, 5, 6, 7 
```

在这种情况下，当搜索值 4 时，`lower_bound`将返回一个指向三个值为 4 的元素中的第`upper_bound`一个的迭代器，将返回一个指向值为 5 的元素的迭代器，`equal_range`并将返回一个包含这两个迭代器的对。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2019-06-26T10:24:04.133

在大卫哈曼的回答之后，我试图解释为什么我们经常觉得`lower_bound`/的名字`upper_bound`不正确，或者至少不直观。

这是因为我们正在寻找一个低于查询的元素。我画了一张图和一个用例：

[![稀疏范围查询](../Images/c0d7468b4571e1306ffcffcfef4a13a0.png)](https://i.stack.imgur.com/Z1UBH.png)

代码：

```
template< typename T, typename U >
auto infimum(std::map<T,U> const& ctr, T query)
{
    auto it = ctr.upper_bound(query);
    return it == ctr.begin() ? ctr.cend() : --it;
}

template< typename T, typename U >
bool is_in_interval(std::map<T,U> const& ctr, T query)
{
    auto inf = infimum(ctr, query);
    return inf == ctr.end() ? false : query <= inf->second;
} 
```

[https://ideone.com/jM8pt3](https://ideone.com/jM8pt3)

基本上要获得“灰色箭头”的行为，我们需要`upper_bound - 1`这就是为什么它很奇怪。

*让我稍微改一下：*从`lower_bound`我们本能地期望的名字`returns-first-immediately-inferior-element`（如灰色箭头）。但是我们得到`returns-first-immediately-superior-element`了lower_bound；和`first-immediately-strictly-superior-element`上限。这就是令人惊讶的地方。

令人惊讶的是，假设您使用的是上图中我的思想实验这样的*稀疏序列。*`equal_range`但是，当您按照*密集序列*中的“边界”来考虑它时，它会很有意义，其中充满了高原，就像美丽的 Kerrek SB 描绘的那样。

测试代码：

```
#include <map>
#include <cassert>
#include <iostream>

// .. paste infimum and is_in_interval here

int main()
{
    using std::cout;
    using Map = std::map<int,int>;
    Map intervals{{2,5}, {8,9}};

    auto red = infimum(intervals, 4);
    assert(red->first == 2);
    cout << "red->first " << red->first << "\n";

    auto green = infimum(intervals, 6);
    assert(green->first == 2);
    cout << "green->first " << green->first << "\n";

    auto pink = infimum(intervals, 8);
    assert(pink->first == 8);
    cout << "pink->first " << pink->first << "\n";

    auto yellow = infimum(intervals, 1);
    assert(yellow == intervals.cend());

    auto larger_than_all = infimum(intervals, 15);
    assert(larger_than_all->first == 8);

    bool red_is = is_in_interval(intervals, 4);
    cout << "red is in " << red_is << "\n";

    bool green_is = is_in_interval(intervals, 6);
    cout << "green is in " << green_is << "\n";

    bool pink_is = is_in_interval(intervals, 8);
    cout << "pink is in " << pink_is << "\n";

    bool yellow_is = is_in_interval(intervals, 1);
    cout << "yellow is in " << yellow_is << "\n";
} 
```

结果是

```
red->first 2
green->first 2
pink->first 8
red is in 1
green is in 0
pink is in 1
yellow is in 0 
```

似乎还可以。

所以当然实用函数不是很好，它们应该设计一个范围 API，所以我们可以使用任何集合或子范围，或者反向迭代器，或者过滤视图等等。当我们拥有 C++20 时，我们可以做到这一点。与此同时，我刚刚制作了一个简单的教育性地图绘制 API。

玩它：
[https ://ideone.com/jM8pt3](https://ideone.com/jM8pt3)

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-08-28T12:19:23.167

`lower_bound`and的另一种用法`upper_bound`是在容器中查找一系列相等的元素，例如

```
std::vector<int> data = { 1, 1, 2, 3, 3, 3, 3, 4, 4, 4, 5, 5, 6 };

auto lower = std::lower_bound(data.begin(), data.end(), 4);
auto upper = std::upper_bound(lower, data.end(), 4);

std::copy(lower, upper, std::ostream_iterator<int>(std::cout, " ")); 
```

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2014-03-11T11:27:49.967

哎呀！

您是否更改了原始代码或者从第一天开始就出现复制粘贴错误？

```
float operator()(double f)
{
    SpectrumPoint* l=std::lower_bound//...
...
    SpectrumPoint* u=std::lower_bound//...
...
} 
```

在我今天阅读的代码中，您将 lower_bound 分配给“l”和“u”。

# php - 如何使用多次 PHP PDO 返回对象？

> ID：12158950
> 
> 赞同：1
> 
> 时间：2012-08-28T12:11:30.183
> 
> 标签：php, sqlite, pdo

如何使用多次 PHP PDO 返回对象？

根据我下面的代码 $result 对象在 while 循环中不显示任何数据。

**我的代码**

```
try {
    $dbhandle = new PDO("sqlite:".$database);
} catch (PDOException $e) {
    echo 'Connection failed: ' . $e->getMessage();
}

$result=$dbhandle->query("select * from table");

if($result)
{
    $row=$result->fetch(PDO::FETCH_ASSOC)

    if(count($row)>0)
    {
        while ($rs1 = $result->fetch(PDO::FETCH_ASSOC, PDO::FETCH_ORI_NEXT)) 
        {
            echo "<pre>";
            print_r($rs1);
            echo "</pre>";
        }
    }
    else
    {
        // error message
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-28T12:17:51.803

虽然没有严格回答您的问题，但您为什么不看一下`[$stmt->fetchAll](http://il.php.net/manual/en/pdostatement.fetchall.php)`with PDO 语句，它会为您处理循环并返回完整的关联数组？为您节省大量时间！

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-28T12:15:16.240

这是因为光标在末尾。所以你必须重置光标。

[http://us.php.net/manual/en/pdostatement.closecursor.php](http://us.php.net/manual/en/pdostatement.closecursor.php)

通常在 MySQL 中，您可以使用 MySQL Free 结果。

[pdo 免费结果](https://stackoverflow.com/questions/6084396/pdo-free-result)

# android - 带有 ksoap2 for android 的 Java Web 服务

> ID：12158952
> 
> 赞同：-1
> 
> 时间：2012-08-28T12:11:35.970
> 
> 标签：android, web-services, android-ksoap2

```
I am implenting java web services for android project and calling with KSOAP2.
My Code is mention below..

package com.android.service;
import org.ksoap2.SoapEnvelope;
import org.ksoap2.serialization.SoapObject;
import org.ksoap2.serialization.SoapSerializationEnvelope;
import org.ksoap2.transport.HttpTransportSE;
import android.app.Activity;
import android.os.Bundle;
import android.widget.TextView;

public class MyAndroidService extends Activity {
    private static final String NAMESPACE = "http://project.com/";
    private static final String METHOD_NAME = "sayHello";
    String SOAP_ACTION = "http://project.com/sayHello";
    private static final String URL = 
            "http://localhost:8080/MyProject/wsdl/Hello.wsdl";  
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);
        TextView tv=(TextView)findViewById(R.id.text);

        try{
            SoapObject object=new SoapObject(NAMESPACE, METHOD_NAME);
            object.addProperty("name", "dev");
            SoapSerializationEnvelope envelope=new SoapSerializationEnvelope(SoapEnvelope.VER11);
            envelope.setOutputSoapObject(object);
            HttpTransportSE httpTransportSE=new HttpTransportSE(URL);
            httpTransportSE.call(SOAP_ACTION, envelope);
            Object result=envelope.getResponse();
            System.out.println("result :"+result.toString());
        }catch (Exception e) {
            System.out.println(e);
        }
    }
} 
```

但我们总是得到一个扩展，这也在下面提到

```
08-28 17:32:18.378: E/AndroidRuntime(6739): FATAL EXCEPTION: main
08-28 17:32:18.378: E/AndroidRuntime(6739): java.lang.NoClassDefFoundError: org.ksoap2.serialization.SoapObject
08-28 17:32:18.378: E/AndroidRuntime(6739):     at com.android.service.MyAndroidService.onCreate(MyAndroidService.java:24)
08-28 17:32:18.378: E/AndroidRuntime(6739):     at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1047)
08-28 17:32:18.378: E/AndroidRuntime(6739):     at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2627)
08-28 17:32:18.378: E/AndroidRuntime(6739):     at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2679)
08-28 17:32:18.378: E/AndroidRuntime(6739):     at android.app.ActivityThread.access$2300(ActivityThread.java:125)
08-28 17:32:18.378: E/AndroidRuntime(6739):     at android.app.ActivityThread$H.handleMessage(ActivityThread.java:2033)
08-28 17:32:18.378: E/AndroidRuntime(6739):     at android.os.Handler.dispatchMessage(Handler.java:99)
08-28 17:32:18.378: E/AndroidRuntime(6739):     at android.os.Looper.loop(Looper.java:123)
08-28 17:32:18.378: E/AndroidRuntime(6739):     at android.app.ActivityThread.main(ActivityThread.java:4627)
08-28 17:32:18.378: E/AndroidRuntime(6739):     at java.lang.reflect.Method.invokeNative(Native Method)
08-28 17:32:18.378: E/AndroidRuntime(6739):     at java.lang.reflect.Method.invoke(Method.java:521)
08-28 17:32:18.378: E/AndroidRuntime(6739):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:871)
08-28 17:32:18.378: E/AndroidRuntime(6739):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:629)
08-28 17:32:18.378: E/AndroidRuntime(6739):     at dalvik.system.NativeStart.main(Native Method) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-28T12:16:09.523

它显然在运行时找不到 ksoap2 jar。

您可以在构建 apk 时检查您的 jar 是否已导出：在项目 Properties > Java Build Path 中，转到“Order and Export”文件夹并填写与您的 jar 对应的复选框。并重建。

# ios - 如何使用 GLKMathProject？[GLKit - iOS]

> ID：12158953
> 
> 赞同：0
> 
> 时间：2012-08-28T12:11:35.617
> 
> 标签：ios, sdk, glkit

我试过：

```
int viewport[4];
viewport[0] = 0;
viewport[1] = 480;
viewport[2] = 320;
viewport[3] = 480;

GLKVector3 x = GLKMathProject(position, effect.transform.modelviewMatrix, effect.transform.projectionMatrix, viewport);

NSLog(@"%@", NSStringFromGLKVector3(x)); 
```

position 是一个像这样的 GLKVector3 {3, 5, 6}

但它给了我一些奇怪的值：{1.52313e+12, 8.0313e+08, -160.131}

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-28T12:34:05.740

您未初始化大部分视口数组。你可能的意思是：

```
int viewport[4];
viewport[0] = 0;
viewport[1] = 480;
viewport[2] = 320;
viewport[3] = 480; 
```

或者，更短：

```
int viewport[4] = {0, 480, 320, 480}; 
```

旁注：不应该是`{0, 0, 320, 480}`（原点 0, 0）吗？

# ruby - 我可以检查一个数组是否只包含红宝石中的整数？

> ID：12158954
> 
> 赞同：8
> 
> 时间：2012-08-28T12:11:45.940
> 
> 标签：ruby, arrays, loops

标题，我认为是自我声明。我是一个 java 开发人员，想确保我的数组只包含整数值。我知道 ruby​​ 中的一切都是对象。我发现循环遍历数组并检查每个元素是不方便的。ruby 有什么捷径吗？

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-08-28T12:14:54.453

[`Enumerable#all?`](http://ruby-doc.org/core-1.9.3/Enumerable.html#method-i-all-3F)与块一起使用。整数是ruby​​ 中[Integer类的实例。](https://ruby-doc.org/core-2.4.0/Integer.html)

```
[1, 2, 3].all? {|i| i.is_a?(Integer) } # => true
[1, 2, 3, '4'].all? {|i| i.is_a?(Integer) } # => false 
```

# com - 如何使用 Windows Installer XML 注册 COM 对象

> ID：12158955
> 
> 赞同：3
> 
> 时间：2012-08-28T12:11:47.040
> 
> 标签：com, wix

我遇到了以下问题：在我的 WiX 设置中，我需要注册一个 COM 对象。我有一个“.tlb”文件和一个“.dll”文件（在我的示例中：XYCommon.dll 和一个 XYCommon.tlb）现在我想进行设置以注册 TLB。如何在 Windows Installer XML 中执行此操作？

我的第一次尝试是使用 CustomAction 并打开“Regasm.exe”并注册它 - 但我不知道如何将 Regasm.exe 用于注册 XYCommon.tlb

任何帮助？谢谢

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-08-28T12:33:10.380

[使用名为Heat](http://wix.sourceforge.net/manual-wix3/heat.htm)的 WiX 收割机实用程序。它将生成包含正确注册（和注销）您的 COM 对象所需的注册表项的 WiX 源。

您的 COM 对象（XYCommon.dll 和 XYCommon.tlb）会经常更改吗？

**如果不是：**那么只需在这两个文件上运行 Heat（阅读命令行参数并试验它们以获得所需的输出），如有必要，清理它们，并将它们添加到您的项目中。

**如果是：**

如果您想尝试将 Heat 作为 Visual Studio 预构建事件运行，这个 SO 答案应该会给您一些指导：[Add a folder to installer in wix not files?](https://stackoverflow.com/questions/11121092/add-a-folder-to-installer-in-wix-not-files/11121289#11121289)

有时，当您使用 Heat 时，您仍然需要稍微调整然后生成的 .wxs 文件。因此，您可能想要编写一些包装实用程序，在文件列表或目录上调用 heat，然后按照您的意愿清理输出。然后，您可以将该实用程序添加到您的构建过程中。

**在单个文件上使用热的示例：**

> heat.exe 文件 myFile.dll -gg -g1 -suid -svb6 -out myFile.wxs

**在整个目录上使用 heat 的示例：**

> heat.exe 目录 myDirectory -gg -g1 -suid -svb6 -out myDirectory.wxs

我使用的一些参数的细分：

*   heat.exe：如果它不在您的路径中，您必须指定可执行文件的完整路径
*   文件 myFile.dll：指定要在单个文件 myFile.dll 上运行热
*   dir myDirectory：指定要在目录myDirectory上运行heat
*   gg：为组件生成 guid
*   g1：生成不带花括号的 guid
*   suid：禁止为文件和组件创建唯一生成的 id，而是使用文件名作为 id
*   svb6：禁止为 VB6 运行时收集 COM 信息。注意：如果要注册使用 VB6 运行时的 COM 对象，则需要使用此标志，以免覆盖 VB6 运行时注册表项

# gwt - 如何将滚动添加到 TabLayoutPanel (GWT) 选项卡栏

> ID：12158956
> 
> 赞同：1
> 
> 时间：2012-08-28T12:11:48.947
> 
> 标签：gwt

知道如何将“滑块”添加到`TabLayoutPanel`(GWT) 吗？

![在此处输入图像描述](../Images/522f47467cead10ec7bd05bd4725d23e.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-29T05:21:41.617

这可能不是转发某些内容的正确答案，但这[可以](https://groups.google.com/forum/?fromgroups=#!topic/google-web-toolkit/wN8lLU23wPA)帮助您。我还尝试使用代码查看滚动按钮看不到它。在这种情况下，您可能需要为此进行自定义实现。

# objective-c - 将列表添加到视图而不更改视图

> ID：12158959
> 
> 赞同：0
> 
> 时间：2012-08-28T12:12:02.647
> 
> 标签：objective-c, uitableview, view, uiview

如何在不更改视图的情况下将列表（TableView）添加到视图中，我想在当前视图上但在视图中间显示列表，因此也会显示原始视图。

我尝试使用标签...但是添加 tableView 而不是标签时遇到了一些问题。

```
UIView *testView = [[[UIView alloc] initWithFrame:CGRectMake(0,0, 100, 100)autorelease];     
testView.backgroundColor = [[UIColor grayColor] colorWithAlphaComponent:0.2f];         UILabel *label = [[[UILabel alloc] init] autorelease];        
label.text = @"TEST";         
[label sizeToFit]; 
[testView addSubview:label];  
[self addSubview:testView ]; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-28T12:19:35.350

根据您的要求参考[mjpopupviewcontroller链接](http://www.cocoacontrols.com/platforms/ios/controls/mjpopupviewcontroller)

# java - XML 请求格式不正确或请求不完整

> ID：12158960
> 
> 赞同：4
> 
> 时间：2012-08-28T12:12:08.350
> 
> 标签：java, xml, http, payment-gateway, fiddler

我们在我们的应用程序中使用虚拟商户支付网关：

[https://www.myvirtualmerchant.com/VirtualMerchant/download/developerGuide.pdf](https://www.myvirtualmerchant.com/VirtualMerchant/download/developerGuide.pdf)

我正在尝试记录 CCSALE 交易，但我不断收到此错误：

```
<?xml version="1.0" encoding="UTF-8"?>
<txn><errorCode>6042</errorCode><errorName>Invalid Request Format</errorName><errorMessage>XML request is not well-formed or request is incomplete.</errorMessage></txn> 
```

我在 Fiddler POST 中传递请求的 XML 是：

```
<txn>
<ssl_merchant_id>my_mer_id</ssl_merchant_id>
<ssl_user_id>my_usr_id</ssl_user_id>
<ssl_pin>my_pin</ssl_pin>
<ssl_test_mode>false</ssl_test_mode>
<ssl_transaction_type>ccsale</ssl_transaction_type>
<ssl_card_number>4111111111111111</ssl_card_number>
<ssl_exp_date>1215</ssl_exp_date>
<ssl_amount>1.00</ssl_amount>
</txn> 
```

我只是删除了我的商家 ID、用户 ID 和 ssl 密码。其余的信息是一样的。我将数据发布到：[https ://demo.myvirtualmerchant.com/VirtualMerchantDemo/processxml.do](https://demo.myvirtualmerchant.com/VirtualMerchantDemo/processxml.do)

谁能告诉我为什么它说 XML 格式不正确？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-01T19:45:17.987

首先，经过数小时的挫折后，我发现 PHP 这样做的方式非常迟钝。由于这个 XML 错误非常持久，我想在 Coldfusion 中尝试这个，并且在 2-3 分钟内，整个事情就完成了，没有 XML 错误，也没有从 API 返回 SSL 废话。无论如何，足够的通风！这可能是您需要防止 XML 格式良好的超级骗子消息：

```
curl_setopt($ch, CURLOPT_POSTFIELDS, array("xmldata=" . $fields_string)); 
```

假设您正在关注他们的文档并且您将变量保存在 fields_string 中，您需要做的就是键入一些模仿 API 变量的内容。在这种情况下，xmldata 就可以了。

我还没有听过抛出这个的答案：`Curl error: SSL read: error:00000000:lib(0):func(0):reason(0), errno 104`

这要归功于侦听错误，否则在我摆脱 XML 错误后 $result 返回空。所以，这里是：

```
$ch = curl_init();
curl_setopt($ch, CURLOPT_URL, $url);
curl_setopt($ch, CURLOPT_POST, 1);
curl_setopt($ch, CURLOPT_POSTFIELDS, array("xmldata=" . $fields_string));
curl_setopt($ch, CURLOPT_SSL_VERIFYPEER, false);
curl_setopt($ch, CURLOPT_SSL_VERIFYHOST, false);
$result = curl_exec($ch);

if(curl_errno($ch))
    echo 'Curl error: ' . curl_error($ch);
else
    echo 'the return is ' . $result; 
```

SSL 还没有设置，那么他们为什么要为 CURLOPT_SSL_VERIFYPEER 和 CURLOPT_SSL_VERIFYHOST 烦恼呢？即使它是错误的，它也不起作用，这整件事变成了查理 Foxtrot！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2019-03-12T17:49:24.460

我也遇到了这个错误，这是我的工作 curl 功能

```
 public function send_curl_xml($xml=NULL){

    $data = http_build_query(array("xmldata"=>$xml));

    $headers = array(
        "Accept: application/xml",
        "Content-type: application/x-www-form-urlencoded"
        //,"Content-length: " . strlen($data)
    );

    $ch = curl_init(); 
    curl_setopt($ch, CURLOPT_URL, $url);
    curl_setopt($ch, CURLOPT_RETURNTRANSFER, 1);
    curl_setopt($ch, CURLOPT_POST, true);
    curl_setopt($ch, CURLOPT_POSTFIELDS, $data);
    curl_setopt($ch, CURLOPT_HTTPHEADER, $headers);
    curl_setopt($ch, CURLOPT_SSL_VERIFYPEER, false);
    curl_setopt($ch, CURLOPT_SSL_VERIFYHOST, false);

    $response = curl_exec($ch);

    //echo $response;

    if(curl_errno($ch)){
        print curl_error($ch);
        return false;
    } else {
        curl_close($ch);
        return $data;
    }
} 
```

$xml 变量是 DOCDocument 对象，如果要动态生成 xml，请务必使用 $xml->saveHTML() （这里的关键是删除 xml 字符串中的 "" 行。）

# android - Android对齐textview和edittext

> ID：12158964
> 
> 赞同：4
> 
> 时间：2012-08-28T12:12:18.040
> 
> 标签：android, android-layout

在下面的 xml 文件中。我试图对齐内容。即，第一个文本视图，然后是下一行的编辑文本，依此类推。但是现在文本被强加给另一个如何解决这个问题。

```
 <?xml version="1.0" encoding="utf-8"?>
  <LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
      android:layout_width="fill_parent"
      android:layout_height="fill_parent"
      android:orientation="vertical" >

      <RelativeLayout
          android:layout_width="match_parent"
          android:layout_height="wrap_content"
          android:layout_weight="0.70" >

          <TextView
              android:id="@+id/hostname"
              android:layout_width="wrap_content"
              android:layout_height="wrap_content"
              android:layout_alignBaseline="@+id/ip"
              android:layout_alignParentLeft="true"
              android:text="hostname" />

          <EditText
              android:id="@+id/ip"
              android:layout_width="wrap_content"
              android:layout_height="wrap_content"
              android:layout_alignParentLeft="true"
              android:layout_alignParentTop="true"
              android:layout_marginLeft="39dp"
              android:ems="10"
              android:inputType="textEmailAddress" >

          </EditText>

   <TextView
              android:id="@+id/username"
              android:layout_width="wrap_content"
              android:layout_height="wrap_content"
              android:layout_alignBaseline="@+id/ip"
              android:layout_alignBottom="@+id/ip"
              android:layout_alignParentLeft="true"
              android:text="Hostname" />
          <EditText
              android:id="@+id/username"
              android:layout_width="wrap_content"
              android:layout_height="wrap_content"
              android:layout_alignLeft="@+id/editText1"
              android:layout_below="@+id/ip"
              android:layout_marginLeft="45dp"
              android:layout_marginTop="42dp"
              android:ems="10" />

           <TextView
              android:id="@+id/password"
              android:layout_width="wrap_content"
              android:layout_height="wrap_content"
              android:layout_alignBaseline="@+id/hostname"
              android:layout_alignBottom="@+id/username"
              android:layout_alignParentLeft="true"
              android:text="Password" />
          <EditText
              android:id="@+id/password"
              android:layout_width="wrap_content"
              android:layout_height="wrap_content"
              android:layout_below="@+id/password"
              android:layout_centerHorizontal="true"
              android:layout_marginTop="47dp"
              android:ems="10"
              android:inputType="textPassword" />

      </RelativeLayout>

  </LinearLayout> 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2014-02-18T17:38:31.427

另一种对我来说效果很好的方法是，在您的 xml 文件中，添加一个`<LinearLayout>`指定`android:orientation="horizontal"`包含您的`TextView`和`EditText`.

这个父母`LinearLayout`必须**在**你的第一个`LinearLayout`必须指定一个`android:orientation="vertical"`：

```
<!-- Root Layout -->
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:orientation="vertical" <!-- Vertical orientation -->
    android:paddingLeft="15sp"
    android:paddingRight="15sp"
    android:paddingTop="15sp"
    android:paddingBottom="15sp" >

    <!-- First Row -->
    <LinearLayout
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:orientation="horizontal" <!-- Horizontal orientation for the row -->
        android:paddingTop="15sp">
        <TextView
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:text="Poids :"
            android:textSize="15sp"
            android:textStyle="bold" />
        <EditText
            android:id="@+id/btn_poids"
            android:inputType="numberDecimal"
            android:hint="Entrez votre poids"
            android:layout_width="match_parent"
            android:layout_height="wrap_content" />
    </LinearLayout>

    <!-- Second Row -->
    <LinearLayout
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:orientation="horizontal" <!-- Horizontal orientation for the row -->
        android:paddingTop="15sp">
        <TextView
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:text="Taille :"
            android:textSize="15sp"
            android:textStyle="bold" />
        <EditText
            android:id="@+id/btn_poids"
            android:inputType="numberDecimal"
            android:hint="Entrez votre taille"
            android:layout_width="match_parent"
            android:layout_height="wrap_content" />
    </LinearLayout>

</LinearLayout> 
```

这是结果（警告标志是因为提示和文本的硬编码字符串......）：

![以上结果](../Images/3867c852d1d6f0b7f4095359247b5346.png)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2017-02-17T19:39:10.557

我在尝试针对 android 4.X 时遇到了同样的问题。我通过使用解决了它`android:gravity="center_vertical"`

```
<LinearLayout
        android:orientation="horizontal"
        android:layout_width="match_parent"
        android:layout_height="wrap_content">

        <TextView
            android:layout_width="0dp"
            android:layout_height="match_parent"
            android:ems="10"
            android:id="@+id/itemNameLabel"
            android:text="@string/entry_item_label"
            android:textSize="@dimen/baseTextSize"
            android:layout_weight=".15"
            android:gravity="center_vertical" />

        <EditText
            android:layout_width="0dp"
            android:layout_weight=".85"
            android:layout_height="wrap_content"
            android:inputType="textPersonName"
            android:ems="10"
            android:id="@+id/itemName"
            android:textSize="@dimen/baseTextSize"
            android:hint="Food, Video Game, etc..." />
    </LinearLayout> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-28T12:18:54.293

您对多个视图使用相同的 id，然后多个视图`layout_below`使用相同的 id，这就是为什么有些视图彼此重叠。使它们成为唯一的 ID。即使在那里，您也用于某些`align_left`arnt的 id `editText1`，例如。

简短的回答：为每个视图使用唯一的 ID，并检查对齐和定位等的参考。

你的下一个问题是你不应该尝试像这样分层你的视图，有一种东西叫做`android:hint="hint text"`这就是我认为你想要的。一旦用户开始输入文本，文本将隐藏，但除此之外，它就像在它上面有一个文本视图......

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-09-28T10:52:47.093

这些都没有解决我的问题。我所做的是添加 `android:textAlignment="center"`到 XML 中的 textView 中。编辑文本默认居中。

the`TextView`和 the`EditText`都在一个水平的`LinearLayout`.

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2015-10-11T12:26:38.670

将此属性添加到 EditText：

```
android:layout_below="@+id/hostname" 
```

* * *

## 回答 #6

> 赞同：-4
> 
> 时间：2012-08-28T12:19:47.850

最好的方法是删除所有 textview 并设置`andoid:hint`为 edit text 。

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:orientation="vertical" >

    <EditText
        android:id="@+id/ip"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignParentLeft="true"
        android:layout_alignParentTop="true"
        android:ems="10"
        android:hint="HostName"
        android:inputType="textEmailAddress" >
    </EditText>

    <EditText
        android:id="@+id/username"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:ems="10"
        android:hint="HostName" />

    <EditText
        android:id="@+id/password"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:ems="10"
        android:hint="Password"
        android:inputType="textPassword" />

</LinearLayout> 
```

![在此处输入图像描述](../Images/333df9c0873ef7b25e40912a3616e74e.png)

# vb.net - 使列表视图中的行可点击/可选择 vb.net

> ID：12158968
> 
> 赞同：0
> 
> 时间：2012-08-28T12:12:46.070
> 
> 标签：vb.net, listview, row, multiple-columns

我有一个四列的列表视图。如果有人单击行中的一个元素，我希望选择整行。有谁知道如何做到这一点？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-28T12:15:56.513

你可能只需要这个：

```
ListView1.FullRowSelect = True 
```

# ruby - 如何通过mixin定义实例变量

> ID：12158980
> 
> 赞同：2
> 
> 时间：2012-08-28T12:13:19.027
> 
> 标签：ruby

我正在编写这样的程序：

```
module Filter
  def self.included?(klass)
    @count = 0
  end
end

class Object
  include Filter
end

class Person
  def get_count
    puts @count
  end
end 
```

我想通过混合过滤器定义一个实例变量@count，希望所有对象都可以访问这个mixin。

但是，我的方法行不通。

谁能告诉我如何实现这一目标？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-28T12:38:08.423

不要使用变量，使用属性：

```
module Counter
  attr_accessor :count
end

class Person
  include Counter
end

person = Person.new
person.count = 50
puts person.count 
```

另外，不要将内容`Object`包含在 中，仅包含在您的类中。使用非通用方法污染主命名空间是不好的，并且可能导致其他类中的方法名称冲突，从而导致难以发现的错误。

只包含您认为需要的模块，而不是任何地方。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-29T17:26:37.790

@HanXu，Maurício Linhares 的解决方案（以及不污染主命名空间的建议）是理想的选择。

但是，如果您*真的*希望更改 的每个实例`Object`，那么您可能只需打开 Object 类并添加您正在寻找的特定功能：

```
class Object
  attr_accessor :count
end

...

p = Person.new
p.count = 10
puts p.count    # => 10 
```

不推荐，但可以使用（无论如何，您现在正在打开 Object 以包含该模块。）

# asp.net-mvc - MVC 3.0 基础 - 在 IIS 服务器上需要安装 MVC3.0？

> ID：12158981
> 
> 赞同：0
> 
> 时间：2012-08-28T12:13:28.567
> 
> 标签：asp.net-mvc

我有需要部署到 windows server 2008 的 mvc3.0 (.net 4.0) 应用程序。

有人可以帮我解决下面的问题吗？

1.  如果我引用了所有 MVC dll（将 Copy Local 设置为 true，是否需要在服务器上安装 MVC 3.0？）

2.  如果我在 Web 服务器上安装了 MVC 2.0，IIS 是否会在上面的第 1 步场景中选择 MVC2.0 dll 或 MVC 3？

3.  IIS 何时查看 DLL 与 BIN 文件夹？

多谢了。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-28T12:19:28.137

> 1.）如果我引用了所有 MVC dll（将 Copy Local 设置为 true，我是否需要在服务器上安装 MVC 3.0？）

不，你可以[`bin deploy`](http://haacked.com/archive/2011/05/25/bin-deploying-asp-net-mvc-3.aspx)申请。

> 2.) 如果我在 Web 服务器上安装了 MVC 2.0，IIS 是否在上面的第 1 步场景中选择 MVC2.0 dll 或 MVC 3？

假设您已正确放置[`assembly binding redirects`](http://www.asp.net/whitepapers/mvc3-release-notes#upgrading)在 web.config 中，它将选择 MVC 3：

```
<runtime>
   <assemblyBinding xmlns="urn:schemas-microsoft-com:asm.v1">
     <dependentAssembly>
       <assemblyIdentity name="System.Web.Mvc"
           publicKeyToken="31bf3856ad364e35"/>
       <bindingRedirect oldVersion="1.0.0.0-2.0.0.0" newVersion="3.0.0.0"/>
     </dependentAssembly>
   </assemblyBinding>
</runtime> 
```

> 3.) IIS 何时查看 DLL 与 BIN 文件夹？

当应用程序启动时，或第一次需要时（假设某些程序集可以在运行时动态加载）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-28T12:19:38.787

> 如果我引用了所有 MVC dll（将 Copy Local 设置为 true，是否需要在服务器上安装 MVC 3.0？）

不必要。您无需在服务器中安装 MVC 即可运行 MVC 应用程序。Visual Studio 中有一种叫做**可部署依赖的东西。**当您发布它时，它将在您的 bin 文件夹中发布您的 MVC DLL

从[msdn](http://msdn.microsoft.com/en-us/library/gg286946.aspx)页面，

> 这会将程序集（DLL 文件）添加到网站项目或 Web 应用程序项目中。当您部署您的网站或应用程序时，这些文件将包含在已部署的项目中。如果您的项目所依赖的应用程序或技术尚未安装在将托管您的 Web 项目的服务器上，这将非常有用。例如，您可以使用此功能将 ASP.NET MVC 3 Web 应用程序部署到未安装 ASP.NET MVC 3 的服务器。

签出[这个](https://stackoverflow.com/questions/10441568/do-i-need-to-install-mvc-3-4-on-web-server-to-run-mvc-application/10441585#10441585)答案，我已经逐步说明如何做到这一点。

查看这篇文章了解更多详情[http://haacked.com/archive/2011/05/25/bin-deploying-asp-net-mvc-3.aspx](http://haacked.com/archive/2011/05/25/bin-deploying-asp-net-mvc-3.aspx)

你应该有**Visual Studio 2010 SP1**。否则，当您右键单击要发布的项目时，它不会显示在上下文菜单中。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-28T12:27:43.820

1.  Already asked, see - [ASP.NET MVC deployment in a form of distribution package](https://stackoverflow.com/questions/5790184/asp-net-mvc-deployment-in-a-form-of-distribution-package)

2.  it'll get exact version, which you used to build application

3.  Local assembly has priority over GAC (global assembly cache)

# php - php注释中@var是什么意思

> ID：12158987
> 
> 赞同：24
> 
> 时间：2012-08-28T12:13:46.727
> 
> 标签：php

我在 php 评论中经常看到这个（@var），但不知道它是什么意思。请告诉。

```
// example.php (taken from yii framework application code)

<?php
/* @var $this CategoriesController */
/* @var $data Categories */
?>

<div class="view">

    <b><?php echo CHtml::encode($data->getAttributeLabel('idCategory')); ?>:</b>
    <?php echo CHtml::link(CHtml::encode($data->idCategory), array('view', 'id'=>$data->idCategory)); ?>
    <br />
</div> 
```

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2012-08-28T12:16:51.857

> 您可以使用@var 标签来记录类变量的数据类型。
> 
> 数据类型应该是有效的 PHP 类型（int、string、bool 等）、对象类型的类名，或者简单地“混合”。phpDocumentor 将显示未修改的可选描述，如果数据类型不存在，则默认为“混合”

[https://manual.phpdoc.org/HTMLSmartyConverter/PHP/phpDocumentor/tutorial_tags.var.pkg.html](https://manual.phpdoc.org/HTMLSmartyConverter/PHP/phpDocumentor/tutorial_tags.var.pkg.html)

> > 使用@var 标签可以记录类属性的类型和功能。当提供时，它必须包含一个类型来指示预期的内容；另一方面，描述是可选的，但建议在复杂结构的情况下使用，例如关联数组。
> 
> @var 标签可以有一个多行的描述并且不需要明确的分隔。
> 
> 建议在记录时将此标签与每个属性一起使用。
> 
> 此标记不得在 PHPDoc 中的每个属性中出现一次以上，并且仅限于类型属性的结构元素。

例子：

```
class DemoVar
{
   /**
    * Summary
    *
    * @var object Description
    */
   protected $varWithDescriptions;

   /**
    * @var \DemoVar $instance The class instance.
    */
   protected static $instance;

   /**
    * Summary for varWithWrongType
    *
    * @var boolean The varWithWrongType. Boolean will be put in the type.
    */
   protected $varWithWrongType = array();
} 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-08-28T12:15:58.337

它们是 PHPdoc 注释，通常用于 IDE 类型提示/代码完成（有时也用于文档生成，但在这种情况下不适用）。它们与应用程序本身无关，可以毫无意外地删除。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-08-28T12:16:50.147

它位于内联类型提示中。

例如

```
/* @var bool */
$switch 
```

在这种情况下，它意味着`$this`是类型`CategoriesController`并且`$data`是类型`Categories`

通常由 IDE 用于类型提示。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-08-28T12:15:50.833

[http://manual.phpdoc.org/HTMLSmartyConverter/PHP/phpDocumentor/tutorial_tags.var.pkg.html](http://manual.phpdoc.org/HTMLSmartyConverter/PHP/phpDocumentor/tutorial_tags.var.pkg.html)

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-08-28T12:15:48.910

也就是说`phpdoc`，要制作自动化文档：

[文档](http://www.phpdoc.org/)

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2019-11-27T14:30:51.530

这是需要为数组指定的方式：

```
/**
 * @var MyDto[]
 */ 
```

# javascript - iPhone应用程序的jquery中的滑块导航菜单

> ID：12158988
> 
> 赞同：1
> 
> 时间：2012-08-28T12:13:48.317
> 
> 标签：javascript, jquery, iphone, html, css

[http://media02.hongkiat.com/mobile-navi-with-jquery/demo/index.html](http://media02.hongkiat.com/mobile-navi-with-jquery/demo/index.html)

[http://indiqo.eu/demos/hotcake/](http://indiqo.eu/demos/hotcake/)

上面的两个示例是 jquery 中的菜单滑块导航菜单作为 web 应用程序，但都不能用作 iPhone 应用程序（phonegap / xcode）。它适用于网络应用程序，但遗憾的是不适用于 iphone 应用程序。

iPhone应用程序的jquery中的滑块导航菜单吗？存在或者是否有我可以获取或购买代码的工作示例？

或者任何人都可以让它在 iPhone 应用程序中的滑块导航菜单中工作吗？请。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-28T12:19:21.517

`jQuery`不适用于本机`iOS`应用程序。

您可以尝试为此使用[ZUUIRevealController](http://www.cocoacontrols.com/platforms/ios/controls/zuuirevealcontroller)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-31T10:11:27.530

解决了。

解决方案：

```
enter code here`<script src="js/1.7_jquery.min.js"></script> 
```

代替

```
<script type="text/javascript"
src="http://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js"></script> 
```

# jquery - 使用常用的 jquery 和深度链接将内容加载到 div

> ID：12158995
> 
> 赞同：1
> 
> 时间：2012-08-28T12:14:17.613
> 
> 标签：jquery, html

我不是程序员，我主要是设计师，所以我在开发某些东西时遇到了一些困难。

我对如何在以下场景中使用深度链接和 asual jquery（或其他更合适的插件）有疑问。

导航结构更像是：

```
<ul>
<li><a href="/pt/empresa/historia" title="História">História</a></li>
<li><a href="/pt/empresa/historia/missao" title="Missão">Missão</a></li>
<li><a href="/pt/empresa/historia/universo" title="Universo">Universo</a></li>
<li><a href="/pt/empresa/historia/numeros" title="números">números</a></li>
</ul> 
```

和 div

```
<div id="content-mask">
<div id="content-container">
</div>
</div> 
```

我想将单击链接页面中内容容器的内容加载到内容容器中。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-28T12:18:08.660

首先将`id`标签添加到`ul`：

```
<ul id="myList"> 
```

然后：

```
$("ul#myList li a").click(function(){
   $.ajax({
      url : $(this).attr("href"),
      success:function(data){
         $("#content-container").html($(data).find("#content-container").html());
      }
   })
  return false;
}) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-28T12:18:36.490

您可以使用以下`load`方法：

> 从服务器加载数据并将返回的 HTML 放入匹配的元素中。

```
$(document).ready(function(){
    $('ul li a').click(function(e){
       e.preventDefault() // prevents the default action of the click event
       $('.content-container').load(this.href) // loads the content based on the value of href attribute 
       // or $('.content-container').load(this.href + " .content-container") in case that I have misunderstood your question
    })
}) 
```

*   [加载（）](http://api.jquery.com/load/)

[请注意，您应该只有一个具有 class 的元素，`content-container`否则您将有重复的内容。]

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-28T12:28:15.647

Edited:

**As OP Stated in his comment below:**

> how can I make it deeplink? So that the if I enter in the addressbar, for instance, www.site.com/pt/empresa/historia, it would load the content in the div of the associated file?

**Solution:**

```
$("ul li a").click(function(e){           

    // Include your domain address in a URL string with anchor's href
    var url = "http://www.your-website-address.com/" + $(this).attr('href')

    $('#content-container').html("Loading Please Wait");
    $('#content-container').load(url);    
    e.preventDefault();

}); 
```

**Additional Notes:**

> Due to browser security restrictions, most "Ajax" requests are subject to the same origin policy; the request can not successfully retrieve data from a different domain, subdomain, or protocol.

## [A WORKING DEMO](http://jsfiddle.net/akhurshid/brHSk/)

**OLD:**

Use jQuery [.load()](http://api.jquery.com/load/) function to achieve this.

```
$("ul li a").click(function(e){           
    $('#content-container').html("Loading Please Wait");
    $('#content-container').load(this.href);    
    e.preventDefault(); 
})​; 
```

[**WORKING DEMO**](http://jsfiddle.net/akhurshid/aUSeA/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-28T12:19:52.920

你有没有想过像这样使用 span 标签：（如果需要，你也可以使用 div 标签，同样的代码。

```
<!DOCTYPE html>
<html>
<head>
  <style>
  div { color:blue; }
  span { color:red; }
  </style>
  <script src="http://code.jquery.com/jquery-latest.js"></script>
</head>
<body>
  <div>
    The values stored were 
    <span></span>
    and
    <span></span>
  </div>
<script>var div = $("div")[0];
    jQuery.data(div, "test", { first: 16, last: "pizza!" });
    $("span:first").text(jQuery.data(div, "test").first);
    $("span:last").text(jQuery.data(div, "test").last);</script>

</body>
</html> 
```