# StackOverflow 问答 11166000-11166999

# android - 如何从 QuietlyCoding 的 NumberPicker 中检索值？

> ID：11166001
> 
> 赞同：1
> 
> 时间：2012-06-23T01:13:20.670
> 
> 标签：android, dialog

我有一个按钮，单击该按钮必须生成一个包含数字选择器和确定取消按钮的对话框。我正在使用 Android 2.3.3（不是 API 11），所以我从**[这里](http://www.quietlycoding.com/?p=5)**下载了数字选择器。它工作正常。单击确定按钮后，我需要在数字选择器中输入计数。任何帮助，将不胜感激。谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-23T01:36:25.047

1.  将 android:id 值添加到布局 XML 中的 NumberPicker 元素。

2.  当您为 AlertDialog 扩展布局时，在扩展布局上调用 findViewById()，传入您在步骤 #1 中提供的 ID，并将结果转换为 NumberPicker。

3.  在演示中有一个 NumberPicker 类对应于您的数字选择器小部件，该类包含一个 getCurrent() 方法，使用它来检索数字选择器的当前值。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-23T01:37:26.130

试试这门课

公共类 DialogPicker 扩展 Picker {

```
public DialogPicker(Context context) {
    super(context);
    setContentView(R.layout.picker_dialog);
    NumberPicker numberPicker = (NumberPicker)findViewById(R.id.my_number_picker);
    //do whatever
    Button okbutton = (Button) findViewById(R.id.my_ok_button);
    //set your click listener
} 
```

}

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-23T01:28:49.457

创建自定义对话框...

在 XML 中创建布局，称为 picker_dialog.xml 即：

```
<LinearLayout
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:orientation="vertical"/>
    <com.mypackage.NumberPicker
         //set your layout
         />
    <LinearLayout
         android:layout_width="fill_parent"
         android:layout_height="wrap_content"
         android:orientation="horizontal">
         <Button
              //cancel button
              />
         <Button
              //Ok button
              />
    </LinearLayout>
</LinearLayout> 
```

创建您的自定义对话框类

```
public class DialogPicker extends Picker {

    public DialogPicker(Context context) {
        super(context);
        setContentView(R.layout.picker_dialog);
        NumberPicker numberPicker = (NumberPicker)findViewById(R.id.my_number_picker);
        //do whatever
        Button okbutton = (Button) findViewById(R.id.my_ok_button);
        //set your click listener
    }
} 
```

在您的活动中，只需运行：

```
PickerDialog pd = new PickerDialog(this);
pd.show(); 
```

祝你好运

# perforce - Perforce (p4v) - 如何在 p4 的不同位置存储相同的包文件？

> ID：11166004
> 
> 赞同：1
> 
> 时间：2012-06-23T01:13:38.903
> 
> 标签：perforce

我在 Perforce 中维护一个文件的单个副本（相同的包名称和相同的内容）时遇到了一个严重问题，该文件用于 2 个不同的 Java 项目。我们有一个文件被 2 个不同的 Java 项目文件夹使用；但是，具有相同的包名称和相同的源文件。但是我们只需要在 Perforce 中创建一个副本。但是，没有选择这样做。

您能否告诉我们如何实现此功能？最坏的情况是：我们在 Perforce 中有 1 个单独的源文件作为 2 个单独的副本，但我们希望避免这种情况，因为当有人在 Perforce 中只签入一个文件而忽略其他文件时，这会造成不一致。

```
`enter code here`
For e.g
C:\folder1\com.aaa.ccc.FileName
C:\folder2\com.aaa.ccc.FileName 
```

# c - 分段错误 - 文件写入

> ID：11166006
> 
> 赞同：1
> 
> 时间：2012-06-23T01:14:07.217
> 
> 标签：c, file-io, gdb

在写入由变量 fp2 表示的文件 parent2.txt 时出现分段错误。我在程序停止运行的行和负责该问题的行上添加了注释。我猜测分段错误是“temp4.value”设置为空的结果，即使我认为我给了它一个值。“temp2 = *temp2.​​next”这行似乎有问题。temp2 是子结构的变量。我不知道代码到底有什么问题，这就是我需要帮助的地方。这是我的代码：

```
#include <stdio.h>
#include <stdlib.h>
#include <errno.h>
#include <string.h>

typedef struct Parent
{
    char *value;
    struct Child *next;
    int numChildren;
}Parent;

typedef struct Child
{
    char *value;
    struct Child *next;
    Parent *prev1;
    struct Child *prev2;
}Child;

int isFirst(int parent[], int index)
{
    int i;
    for (i = 0; i < index; i++)
    {
        if (parent[i] == parent[index])
        {
            return 0;
        }
    }
    return 1;
}

int addChild(Parent parents[], int index, char *num)
{
    int i;
    Child temp, temp2;
    temp.value = num;
    if (parents[index].numChildren == 0)
    {
        parents[index].next = &temp;
        temp.prev1 = &parents[index];
        temp.prev2 = NULL;
    }
    else
    { 
        for (i = 0; i < parents[index].numChildren; i++)
        {
            if (i == 0)
            {
                temp2 = *parents[index].next;
            }
            else
            {
                temp2 = *temp2.next; // setting temp2 to null?
            }
        }
        temp.prev1 = NULL;
        temp.prev2 = &temp2;
        temp2.next = &temp;
    }
}

int main() { 

    FILE *fp, *fp2;
    char read_file [256];
    char current[256];
    char space = ' ';
    char *curr2, *curr3;
    int i, index;
    int j = 0;
    int parent[] = {1, 1, 1, 3, 3, 4, 4, 1};
    int child[] = {3, 4, 5, 7, 8, 10, 11, 100};
    Parent parents[10];
    Parent temp;
    Child temp2, temp3;
    int numParents = 0;
    int done = 0;

    fp = fopen ("/home/sam/parent.txt","w+");

    if (fp == NULL) {
        printf ("Error opening file: %s\n", strerror(errno));
        exit(1);
    }

    for (i = 0; i < 8; i++)
    {
        fprintf(fp, "%d", parent[i]);
        fprintf(fp, " ");
        fprintf(fp, "%d", child[i]);
        fprintf(fp, "\n");
    }

    for (i = 0; i < 8; i++)
    {
        fgets(current, 7, fp);
        printf("%s\n", current);
        curr2 = strtok(current, &space);
        if (isFirst(parent, i) == 1)
        {
            parents[numParents].value = curr2;
            parents[numParents].numChildren = 0;
            numParents++;
        }
        printf("%s\n", curr2);
        curr3 = strtok(NULL, &space);
        while (done == 0)
        {
            temp = parents[j];
            index = j;
            if (temp.value == curr2)
            {
                done = 1;
            }
            j++;
        }
        j = 0;
        printf("\n");
        addChild(parents, numParents-1, curr3);
        parents[index].numChildren++;
        printf("%s\n", curr3);
        done = 0;
    }

    fp2 = fopen ("/home/sam/parent2.txt","w+");

    if (fp2 == NULL) {
        printf ("Error opening file: %s\n", strerror(errno));
        exit(1);
    }

    Child temp4;

    for (i = 0; i < 3; i++)
    {
        fprintf(fp2, "%s", parents[i].value);
        temp4 = *parents[i].next;
        for (j = 0; j < parents[i].numChildren; j++)
        {
            fprintf(fp2, "%s", temp4.value); // segmentation fault occuring on this line second time through inner loop
            fprintf(fp2, " ");
            if (j < parents[i].numChildren-1)
            {
                temp4 = *temp4.next;
            }
        }
        fprintf(fp2, "\n");
    }
    rewind(fp2);
    for (i = 0; i < 3; i++)
    {
        fgets(current, 100, fp2);
        printf("%s\n", current);
    }
    fclose(fp);
    fclose(fp2);
    return 0;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-23T02:25:29.460

我认为您的问题已经从这里开始，在`addChild`函数中

```
int addChild(Parent parents[], int index, char *num)
{
    int i;
    Child temp, temp2;
    temp.value = num;
    if (parents[index].numChildren == 0)
    {
        parents[index].next = &temp;     // <---
        temp.prev1 = &parents[index];
        temp.prev2 = NULL;
    } 
```

您将局部变量的地址分配给`Parent`结构的成员。当函数返回时，this 将指向一个已经消失的对象（一个悬空指针）。

以后对该指针的任何使用都会引起各种麻烦。

# android - 关于在 android 中使用 DP 的问题？

> ID：11166010
> 
> 赞同：4
> 
> 时间：2012-06-23T01:14:44.803
> 
> 标签：android, android-layout

在开发应用程序时，这就是我所做的： 1\. 保持 320*480 作为我的基本分辨率和 160dpi 作为我的基本密度。2.将所有图像保留在drawable-mdpi文件夹中 3.在xml布局中指定图像的宽度和高度时使用dp。

我发现正如它在开发者网站上提到的，如果我们使用 dp，那么它会根据屏幕自动放大和缩小。但我没有得到想要的结果，并且图像没有为较小的设备正确缩放。

所以我所做的是 1.在 xml 文件中创建布局 2.在运行时以屏幕宽度和高度的百分比设置图像的宽度和高度 通过这样做，我得到了想要的结果。所有图像都正确缩放设备范围从小型 240*320 到标签 600*1024。

所以我的问题是，正如开发人员网站中提到的那样，我应该使用 dp 来指定宽度和高度，还是应该以编程方式进行。如果没有，dp 的概念是什么，我在哪里可以使用它？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-23T07:50:29.537

首先，我认为使用“dp”很好。没有问题。

其次，为了解决你提到的问题，最好的办法是把合适大小的图片放在ldpi、hdpi和xhdpi文件夹中。然后您不必动态调整布局。

LDPI:MDPI:HDPI:XHDPI= 3:4:6:8 中的图像大小比例

或者您可以通过以下方式动态预测设备的大小，然后相应地设置布局：

```
 DisplayMetrics displayMetrics = new DisplayMetrics();
    getWindowManager().getDefaultDisplay().getMetrics(displayMetrics);
    switch(displayMetrics.densityDpi){ 
        case DisplayMetrics.DENSITY_LOW: 
            //your layout for samll sized devices
            break; 
        case DisplayMetrics.DENSITY_MEDIUM: 
            //your layout for medium sized devices
            break; 
        case DisplayMetrics.DENSITY_HIGH: 
            //your layout for large sized devices
            break; 
    } 
```

# python - 如何判断您是否安装了多个 Django

> ID：11166014
> 
> 赞同：7
> 
> 时间：2012-06-23T01:15:42.310
> 
> 标签：python, django, installation, duplicates

在尝试安装django的过程中，遇到了一系列的失败。我在网上遵循了许多不同的教程，最后尝试安装了好几次。我想我可能已经安装了两次（网站说这不是一件好事），那么我如何判断我是否真的安装了多个版本？我有一台运行 Lion 的 Mac。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-06-23T03:18:18.927

打开终端并输入`python`，然后`import django`输入`django`，它会告诉您要导入的 django 的路径。转到该文件夹​​ [它应该看起来像这样：`/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/site-packages/`] 并查找多个 django 实例（如果有多个实例，它们将紧挨着彼此）。删除你不想要的。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-06-23T06:50:29.990

你可以安装[yolk](http://pypi.python.org/pypi/yolk/) - 如果你调用它，它会列出你所有的 python 包（'yolk -l'）

此外，按照 maxi 的建议研究[virtualenv](http://pypi.python.org/pypi/virtualenv)也是值得的。它基本上允许您拥有不同的 python 配置（即安装的包......），并且可以轻松地在它们之间切换。

此外，您似乎一直在手动安装 django。我建议查看 pip 和 setuptools（又名 easy_install），这两个非常流行的 python 包管理实用程序。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-06-23T02:59:01.050

查看 virtualenv 和 virtualenvwrapper

# coffeescript - CoffeeScript 对象语法：exports.index vs exports = {}

> ID：11166020
> 
> 赞同：1
> 
> 时间：2012-06-23T01:16:10.857
> 
> 标签：coffeescript, express

我发现

```
exports.index = (req, res) ->
  res.render "index",
    title: "Hello" 
```

编译为

```
exports.index = function(req, res) {
    return res.render("index", { title: "Hello" })
} 
```

与 ExpressJS 一起工作的东西。但是，我认为我可以使用：

```
exports = 
    index: (req, res) ->
        res.render "index",
            title: "Hello" 
```

这样我就不必`exports.xxx`为所有路线输入，但编译为

```
var exports;
exports = {
  index: function(req, res) {
    return res.render("index", {
      title: "Hello"
    });
  }
}; 
```

这似乎不适用于 ExpressJS，为什么？

```
Error: In /labs/Projects/jiewmeng/routes/index.coffee, Parse error on line 1: Unexpected '{'
    at Object.parseError (/usr/lib/node_modules/coffee-script/lib/coffee-script/parser.js:477:11)
    at Object.parse (/usr/lib/node_modules/coffee-script/lib/coffee-script/parser.js:554:22)
    at /usr/lib/node_modules/coffee-script/lib/coffee-script/coffee-script.js:43:20
    at Object..coffee (/usr/lib/node_modules/coffee-script/lib/coffee-script/coffee-script.js:19:17)
    at Module.load (module.js:353:31)
    at Function._load (module.js:311:12)
    at Module.require (module.js:359:17)
    at require (module.js:375:17)
    at Object.<anonymous> (/labs/Projects/jiewmeng/server.coffee:6:12)
    at Object.<anonymous> (/labs/Projects/jiewmeng/server.coffee:74:4) 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-23T01:34:01.893

请看[这个解释 module.exports vs exports = foo vs exports.foo = bar 的答案](https://stackoverflow.com/a/9714474/266795)

简而言之，如果您将一个名为的局部变量分配给`exports`一个全新的对象，则您无法将属性分配给“真实”`exports`对象，因此您的代码无法按预期工作。您可以 A) 将对象分配给`module.exports`或 B) 将属性分配给现有`exports`对象。

在 CoffeeScript 中运行良好的一种模式是：

```
module.exports = {
  SomeClass
  someFunction
  someObject
} 
```

# state-machine - 状态机，字符串集？

> ID：11166023
> 
> 赞同：1
> 
> 时间：2012-06-23T01:16:26.423
> 
> 标签：state-machine

我正在做一个处理状态机的家庭作业。我了解它们的运作方式，但是我不了解这个特定问题的几个方面。

```
Let L be the set of strings over {a,b} ending with the substring abba.
a. Build a DFA that accepts L.
b. Build an NFA with 6 transitions that accepts L. 
```

如何将 L 合并到状态机中？我完全迷失了b部分，但我觉得一旦我理解了a部分，b应该不会太难。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-23T01:32:13.233

让我们备份一下。按照惯例，“L”用于定义“语言”——在这种情况下，一组（可能是无限的）符合某些定义的字符串。在玩有限自动机时，您会关心机器“接受”哪些字符串以及“拒绝”哪些字符串，通常您希望接受给定语言中的所有字符串并拒绝那些不在其中的字符串（另一种看待问题的方式是，您可以将语言定义为机器接受的所有字符串的集合——它们是等价的）。

第一个问题是构建一个接受 L 的 DFA 的练习——也就是说，给定任何以“aaba”结尾的字符串，它接受并给定不以“abba”结尾的字符串，它拒绝。您的困惑似乎来自于认为 L 不知何故是您机器的“一部分”；充其量您将 L 的描述编码到您的机器中。

第二个问题是要求您对 NFA 做同样的事情，但附加限制是它只有 6 个转换。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-23T01:41:14.157

让我试试这个：

```
Node 0:
a -> node 1   <-- This means, "if the next character is a, then go to node 1"
b -> node 0
END -> error
Node 1:
a -> node 1
b -> node 2
END -> error
Node 2:
a -> node 1
b -> node 3
END -> error
Node 3:
a -> node 4
b -> node 0
END -> error
Node 4:
END -> Success!
a -> node 1
b -> node 0 
```

我相信应该这样做。每个节点都有 3 个可能的箭头，用于 a、b 或字符串结尾 (END)。作为“abbaEND”一部分的每个输入都会导致下一个节点并最终成功，并且不属于“abbaEND”的每个输入都会将您带回适当的节点。基本上，如果它是 a，它会将其视为另一个“abba”块的开始，如果它是 ab，则假定“abba”接下来会出现。提前结束是失败的。那应该是您的 DFA 地图。

因此，使用 a 和 b 的任何字符串作为输入......这个 DFA 应该只以 Success 结尾！如果字符串以“abba”结尾，并且对于任何其他字符串都应该以错误结尾。

# php - 只接受来自定义的引荐来源网址的访问？

> ID：11166029
> 
> 赞同：3
> 
> 时间：2012-06-23T01:17:37.693
> 
> 标签：php, web, paypal

我的网站上有一个 Paypal 按钮，并且我有一个页面，一旦用户完成付款，Paypal 就会将其引导至该页面。如何确保访问此页面的唯一人员是由 paypal.com 推荐的？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-23T01:19:28.667

您可以使用[`$_SERVER["HTTP_REFERER"]`](http://php.net/manual/en/reserved.variables.server.php)来获取推荐人并对照 paypal.com 进行检查

```
$referer = $_SERVER['HTTP_REFERER'];
$referer_parts = parse_url($referer);
if($referer_parts['host'] == "paypal.com") {
    echo "good";
} else {
    echo "bad";
} 
```

**笔记：**

> 'HTTP_REFERER'
> 
> 将用户代理引向当前页面的页面地址（如果有）。这是由用户代理设置的。不是所有的用户代理都会设置这个，有些提供修改 HTTP_REFERER 作为一个特性的能力。简而言之，它不能真正被信任。

我认为没有任何可靠的方法可以检查用户来自何处。我可以简单地转到一个贝宝页面，然后简单地运行`location.href='http://yoursite.com/yourpage.php'`或插入一个链接到我可以单击的 DOM 中，而您将无法知道。

我认为唯一的方法是，如果贝宝使用您可以最终验证的唯一代码将客户发送到您的网站。这样，只有拥有代码的人才能访问您的页面。

# android - SherlockFragmentActivity 与多个 ListFragment 和 SQLite 游标战斗

> ID：11166032
> 
> 赞同：3
> 
> 时间：2012-06-23T01:17:45.740
> 
> 标签：android, sqlite, android-fragments, android-loadermanager, android-cursorloader

我正在使用一个扩展**SherlockFragmentActivity**的 Activity ，它有 3 个选项卡。这 3 个选项卡是实现**LoaderManager.LoaderCallbacks的****ListFragments**。Activity 的 OnCreate 方法像这样加载选项卡

 **```
bar.addTab(bar.newTab()
    .setTag("venues_list")
    .setText(getString(R.string.list_venues_header))
    .setTabListener(new TabListener<VenueListFragment>(
        this, getString(R.string.list_invites_header), VenueListFragment.class, null)));

// I do the EXACT same thing for the other two tabs, using their respective ListFragments

if (savedInstanceState != null) {
    bar.setSelectedNavigationItem(savedInstanceState.getInt("tab", 0));
} 
```

我将标签加载到的布局非常简单：

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:orientation="vertical" >

</LinearLayout> 
```

每个选项卡都有一个与此相同的类，只是称为不同的：

```
import android.content.Context;
import android.content.SharedPreferences;
import android.database.Cursor;
import android.os.Bundle;
import android.support.v4.app.LoaderManager;
import android.support.v4.content.Loader;
import android.support.v4.widget.CursorAdapter;
import android.support.v4.widget.SimpleCursorAdapter;
import android.view.View;
import android.widget.AdapterView;
import android.widget.AdapterView.OnItemClickListener;
import android.widget.ListView;
import android.widget.Toast;

import com.actionbarsherlock.app.SherlockListFragment;
import com.lateral.oursvp.R;
import com.lateral.oursvp.database.SimpleCursorLoader;
import com.lateral.oursvp.database.VenuesDataSource;

/**
 * @author rabbott
 *
 */
public class VenueListFragment extends SherlockListFragment implements LoaderManager.LoaderCallbacks<Cursor> {  
    SharedPreferences appPreferences;

    private CursorAdapter cursorAdapter;

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
    }

    @Override
    public void onActivityCreated(Bundle savedInstanceState) {
        super.onActivityCreated(savedInstanceState);

        // bind the columns of the cursor to the list
        String[] from = new String[] { VenuesDataSource.KEY_NAME, VenuesDataSource.KEY_DESCRIPTION };
        int[] to = new int[] { R.id.list_item_title, R.id.list_item_subtitle };

        cursorAdapter = new SimpleCursorAdapter( getActivity(), R.layout.list_item, null, from, to, 0);

        // retrieve the listview to populate
        ListView lv = (ListView) getActivity().findViewById(android.R.id.list);

        // set the adapter on the listview
        lv.setAdapter(cursorAdapter);

        // click event for each row of the list
        lv.setOnItemClickListener(new OnItemClickListener() {

            public void onItemClick(AdapterView<?> arg0, View view,
                    int position, long id) {
                Cursor cursor = cursorAdapter.getCursor();
                cursor.moveToPosition(position);

                Toast.makeText(getActivity(), "Tapped row " + position + "!", Toast.LENGTH_SHORT).show();
            }
        });

        // Start out with a progress indicator.
        setListShown(false);

        // load the data
        getActivity().getSupportLoaderManager().initLoader(0, null, this);
    }

    public Loader<Cursor> onCreateLoader(int loaderId, Bundle args) {
        return new VenueCursorLoader(getActivity());
    }

    public void onLoadFinished(Loader<Cursor> loader, Cursor cursor) {
        cursorAdapter.swapCursor(cursor);

        // the list should now be shown
        if (isResumed()) {
            setListShown(true);
        } else {
            setListShownNoAnimation(true);
        }
    }

    public void onLoaderReset(Loader<Cursor> loader) {
        cursorAdapter.swapCursor(null);
    }

    public static final class VenueCursorLoader extends SimpleCursorLoader {

        Context mContext;

        public VenueCursorLoader(Context context) {
            super(context);

            mContext = context;
        }

        @Override
        public Cursor loadInBackground() {
            VenuesDataSource datasource = new VenuesDataSource(mContext);

            return datasource.getAllVenues(((EventActivity) mContext).getEventId());
        }

    }
} 
```

它使用此处定义的**SimpleCursorLoaded**：

```
import android.content.Context;
import android.database.Cursor;
import android.support.v4.content.AsyncTaskLoader;

public abstract class SimpleCursorLoader extends AsyncTaskLoader<Cursor> {
    private Cursor mCursor;

    public SimpleCursorLoader(Context context) {
        super(context);
    }

    /* Runs on a worker thread */
    @Override
    public abstract Cursor loadInBackground();

    /* Runs on the UI thread */
    @Override
    public void deliverResult(Cursor cursor) {
        if (isReset()) {
            // An async query came in while the loader is stopped
            if (cursor != null) {
                cursor.close();
            }
            return;
        }
        Cursor oldCursor = mCursor;
        mCursor = cursor;

        if (isStarted()) {
            super.deliverResult(cursor);
        }

        if (oldCursor != null && oldCursor != cursor && !oldCursor.isClosed()) {
            oldCursor.close();
        }
    }

    /**
     * Starts an asynchronous load of the contacts list data. When the result is ready the callbacks
     * will be called on the UI thread. If a previous load has been completed and is still valid
     * the result may be passed to the callbacks immediately.
     * <p/>
     * Must be called from the UI thread
     */
    @Override
    protected void onStartLoading() {
        if (mCursor != null) {
            deliverResult(mCursor);
        }
        if (takeContentChanged() || mCursor == null) {
            forceLoad();
        }
    }

    /**
     * Must be called from the UI thread
     */
    @Override
    protected void onStopLoading() {
        // Attempt to cancel the current load task if possible.
        cancelLoad();
    }

    @Override
    public void onCanceled(Cursor cursor) {
        if (cursor != null && !cursor.isClosed()) {
            cursor.close();
        }
    }

    @Override
    protected void onReset() {
        super.onReset();

        // Ensure the loader is stopped
        onStopLoading();

        if (mCursor != null && !mCursor.isClosed()) {
            mCursor.close();
        }
        mCursor = null;
    }
} 
```

我遇到的问题是，当我选择说.. 第二个选项卡（第三个选项卡也是如此）时，它会尝试加载光标，但是当它尝试填充 list_items 时，我收到一条错误消息

```
E/AndroidRuntime(2055): java.lang.IllegalArgumentException: column 'GIVEN_VARIABLE' does not exist 
```

在设置了几个断点之后，我发现它尝试使用的光标是第一个选项卡中的光标，它在通货膨胀时加载良好，但显然没有关闭，并且显然试图再次使用，即使我（认为）正在向它发送与 getAllVenues() 不同的光标

**编辑：这是堆栈跟踪发送给我的最后一个地方** 当我设置一些断点时，我可以看到这里提供的光标是第一个选项卡的光标，而不是 Venue 选项卡的光标。

![在此处输入图像描述](../Images/c45177bb5449cdffbd04914e06af798e.png)

**编辑：显示 getAllVenues 方法的 VenuesDataSource 代码**

```
import org.json.JSONArray;
import org.json.JSONException;
import org.json.JSONObject;

import android.content.ContentValues;
import android.content.Context;
import android.database.Cursor;
import android.database.SQLException;
import android.util.Log;

/**
 * @author rabbott
 *
 */
public class VenuesDataSource extends appSQLiteHelper {

    public static final String TABLE_NAME               = "venues";

    // venue columns
    public static final String KEY_NAME                 = "name";
    public static final String KEY_DESCRIPTION          = "description";
    public static final String KEY_START_TIME           = "start_time";
    public static final String KEY_ADDRESS              = "address";
    public static final String KEY_CITY                 = "city";
    public static final String KEY_STATE                = "state";
    public static final String KEY_ZIP                  = "postal_code";
    public static final String KEY_LNG                  = "lng";
    public static final String KEY_LAT                  = "lat";
    public static final String KEY_PHONE                = "phone";

    public static String COLUMNS_VENUES[] = { 
        DatabaseConstants.KEY_ROWID, 
        DatabaseConstants.KEY_EVENT_ID,
        KEY_NAME, 
        KEY_DESCRIPTION, 
        KEY_START_TIME,
        KEY_ADDRESS, 
        KEY_CITY, 
        KEY_STATE,
        KEY_ZIP, 
        KEY_LNG, 
        KEY_LAT, 
        KEY_PHONE,
        DatabaseConstants.KEY_CREATED_AT
    };

    public static final String CREATE_STATEMENT = "CREATE TABLE IF NOT EXISTS " + TABLE_NAME + " ("
            + "_id              INTEGER PRIMARY KEY AUTOINCREMENT,"
            + "event_id         INTEGER NOT NULL,"
            + "name             TEXT NOT NULL,"
            + "description      TEXT,"
            + "start_time       TEXT,"
            + "address          TEXT NOT NULL,"
            + "city             TEXT NOT NULL,"
            + "state            TEXT NOT NULL,"
            + "postal_code      TEXT,"
            + "lat              TEXT,"
            + "lng              TEXT,"
            + "phone            TEXT,"
            + "created_at       TEXT);";

    public VenuesDataSource(Context context) {
        super(context);

        Log.i("VenueDataSource", "Constructor");
    }

    // create a new contact locally
    public long createVenue(Integer venue_id, Integer event_id, String name, String description, String start_time, String address, String city, String state, String postal_code, String lat, String lng, String phone, String created_at) {
        ContentValues initialValues = new ContentValues();

        initialValues.put(DatabaseConstants.KEY_ROWID, event_id);
        initialValues.put(DatabaseConstants.KEY_EVENT_ID, event_id);
        initialValues.put(KEY_NAME, name);
        initialValues.put(KEY_DESCRIPTION, description);
        initialValues.put(KEY_START_TIME, start_time);
        initialValues.put(KEY_ADDRESS, address);
        initialValues.put(KEY_CITY, city);
        initialValues.put(KEY_STATE, state);
        initialValues.put(KEY_ZIP, postal_code);
        initialValues.put(KEY_PHONE, phone);
        initialValues.put(KEY_LAT, lat);
        initialValues.put(KEY_LNG, lng);
        initialValues.put(DatabaseConstants.KEY_CREATED_AT, created_at);

        return getWritableDatabase().insert(TABLE_NAME, null, initialValues);
    }

    // retrieve a venue from the local database
    public Cursor getVenue(long rowId) throws SQLException {
        Cursor mCursor = getWritableDatabase().query(true, TABLE_NAME, COLUMNS_VENUES, DatabaseConstants.KEY_ROWID + "=" + rowId, null, null, null, null, null);

        if (mCursor != null) {
            mCursor.moveToFirst();
        }

        return mCursor;
    }

    // update a local venue
    public long updateVenue(Integer venue_id, Integer event_id, String name, String description, String start_time, String address, String city, String state, String postal_code, String lat, String lng, String phone) {
        ContentValues initialValues = new ContentValues();

        initialValues.put(DatabaseConstants.KEY_EVENT_ID, event_id);
        initialValues.put(KEY_NAME, name);
        initialValues.put(KEY_DESCRIPTION, description);
        initialValues.put(KEY_START_TIME, start_time);
        initialValues.put(KEY_ADDRESS, address);
        initialValues.put(KEY_CITY, city);
        initialValues.put(KEY_STATE, state);
        initialValues.put(KEY_ZIP, postal_code);
        initialValues.put(KEY_PHONE, phone);
        initialValues.put(KEY_LAT, lat);
        initialValues.put(KEY_LNG, lng);

        return getWritableDatabase().update(TABLE_NAME, initialValues, "_id=?", new String[] { Long.toString(venue_id) });
    }

    // delete a local venue
    public boolean deleteVenue(long rowId) {
        return (getWritableDatabase().delete(TABLE_NAME, DatabaseConstants.KEY_ROWID + "=" + rowId, null) > 0);
    }

    // retrieve all local venues
    public Cursor getAllVenues(long event_id) {
        Cursor mCursor = getWritableDatabase().query(true, TABLE_NAME, COLUMNS_VENUES, DatabaseConstants.KEY_EVENT_ID + "=" + event_id, 
                null, null, null, null, null);

        return mCursor; 
    }

    public boolean venueExists(int venue_id) {
        Cursor mCursor = getWritableDatabase().query(true, TABLE_NAME, COLUMNS_VENUES, DatabaseConstants.KEY_ROWID + "=" + venue_id,
                    null, null, null, null, null);

        if (mCursor.getCount() == 0) {
            mCursor.close();
            return false;
        } else {
            mCursor.close();
            return true;
        }
    }

    public void parseVenue(JSONObject venueJson) throws JSONException {
        boolean venue_exists = false;

        int event_id, venue_id;
        String venue_name, venue_description, start_time, venue_address, venue_city, venue_state, venue_postal_code, lat, lng, venue_phone, created_at;

        venue_id            = venueJson.getInt(DatabaseConstants.KEY_REMOTE_ID);
        event_id            = venueJson.getInt(DatabaseConstants.KEY_EVENT_ID);
        venue_name          = venueJson.getString(KEY_NAME);
        venue_description   = venueJson.getString(KEY_DESCRIPTION);
        start_time          = venueJson.getString(KEY_START_TIME);
        venue_address       = venueJson.getString(KEY_ADDRESS);
        venue_city          = venueJson.getString(KEY_CITY);
        venue_state         = venueJson.getString(KEY_STATE);
        venue_postal_code   = venueJson.getString(KEY_ZIP);
        venue_phone         = venueJson.getString(KEY_PHONE);
        lat                 = venueJson.getString(KEY_LAT);
        lng                 = venueJson.getString(KEY_LNG);
        created_at          = venueJson.getString(DatabaseConstants.KEY_CREATED_AT);

        // check to see if this venue already exists
        venue_exists = this.venueExists(venue_id);

        if (venue_exists == true) {
            this.updateVenue(
                    venue_id, 
                    event_id, 
                    venue_name,
                    venue_description,
                    start_time,
                    venue_address, 
                    venue_city, 
                    venue_state,
                    venue_postal_code, 
                    lat,
                    lng, 
                    venue_phone);
        } else {
            this.createVenue(
                    venue_id,
                    event_id,
                    venue_name,
                    venue_description,
                    start_time,
                    venue_address, 
                    venue_city,
                    venue_state,
                    venue_postal_code, 
                    lat,
                    lng,
                    venue_phone,
                    created_at);
        }
    }

    public void parseVenues(JSONArray venuesArray) throws JSONException {
        JSONObject venueJson;

        for (int i = 0; i < venuesArray.length(); i++) {
            // Iterate through each venue
            venueJson = venuesArray.getJSONObject(i);

            this.parseVenue(venueJson);
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-28T21:38:18.513

问题是您`Fragment`的 s 直接操纵`Activity`'s `LoaderManager`，因此第一个`Loader`带有 ID`0`的总是被重用。

应用程序中的每个 Activity 和 Fragment 都有自己的 LoaderManager 实例，因此不要直接从 Fragment 操作 Activity 的 LoaderManager，而应该让 Fragment 使用自己的 LoaderManager。也就是说，而不是

```
// initialize a new Loader that will be managed by the Activity's LoaderManager
getActivity().getSupportLoaderManager().initLoader(0, null, this); 
```

您应该让每个单独的 Fragment 实现 LoaderCallbacks，然后在 onActivityCreated 中，分别调用，

```
// initialize a new Loader that will be managed by the Fragment's LoaderManager
getSupportLoaderManager().initLoader(0, null, this); 
```

在有关 Fragments 的文档中，他们最强调的一件事是 Fragments 应该被设计为可重用，而不应该特定于特定的 Activity。因此，您的“hack”（即为每个 Fragment 提供不同的 Loader id）在技术上是“不好的做法”，因为您的 Fragments 只有在附加到该特定 Activity 时才能正常工作。您希望您的 Fragments 可以与任何 Activity 一起使用，因此您通常希望在打包您的 Fragments 时尽可能多地控制它自己的 UI。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-28T18:00:44.943

问题是**initLoader**方法的第一个参数是一种唯一标识要加载的每个项目的方法，我的所有项目都设置为相同的 (0) 值——将它们更改为唯一值修复了问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-09T07:44:13.010

对我来说，这是

```
 public abstract class AbstractListFragment extends SherlockFragment implements
    LoaderCallbacks<Cursor> 
```

通过注释第一行代码并添加第二行，解决了不加载内容的问题：

```
 // getActivity().getSupportLoaderManager().initLoader(0, null, this);
    getLoaderManager().initLoader(0, null, this); 
```**

# ruby-on-rails - 使用 link_to 为 has_many 传递参数以形成表单：通过关联

> ID：11166033
> 
> 赞同：0
> 
> 时间：2012-06-23T01:17:54.910
> 
> 标签：ruby-on-rails, form-for

我是 Rails 新手，在将参数传递给表单时遇到了一些麻烦。

我有一个课程模型和课程模型。Courses 和 Lessons 与 have_many :through 关联相关联。代码如下：

```
 class Course < ActiveRecord::Base
      attr_accessible :description, :name

      has_many :course_listings
      has_many :lessons, through: :course_listings

    end

    class Lesson < ActiveRecord::Base
      attr_accessible :title, :body, :category_ids

      has_many :course_listings
      has_many :courses, through: :course_listings

    end

    class CourseListing < ActiveRecord::Base
      attr_accessible :course_id, :lesson_id

      belongs_to :course
      belongs_to :lesson
    end 
```

我希望允许用户将课程添加到现有课程中，即创建新课程列表。现在我在 app/views/courses/show.html.erb 上有以下内容

```
 <%= link_to 'Add New Lesson', new_course_listing_path(course_id: @course.id) %> 
```

在 CourseListingsController 中，我有：

```
 def new
      @course_listing = CourseListing.new
      if params[:course_id]
        @course_listing.course_id = params[:course_id]
      end
    end 
```

在新课程列表的表格中，我有：

```
 <%= form_for(@course_listing) do |f| %>

      <%= f.hidden_field :course_id, value: @course_id %>

  <%= f.label :lesson_id, "Enter Lesson" %>
  <%= f.text_field :lesson_id %>

  <%= f.submit "Save" %>

    <% end %> 
```

上面的代码没有提交课程 ID。在日志中我看到：

```
 Parameters: {..., "course_listing"=>{"course_id"=>"", "lesson_id"=>"7"},   
    "commit"=>"Save Lesson"}
    (0.1ms)  begin transaction
    (0.1ms)  rollback transaction 
```

从上面可以看出， course_id 没有被传递到 CourseListingsController。已经花了很多时间研究这个问题，任何指导都将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-23T01:42:58.737

这里可能存在一些问题。

*   您已经参考了上面的 :text_lessons 以及课程。那是错字吗？
*   拥有 CourseListings 的控制器并不是理想的方式。您应该通过课程模型创建一个嵌套课程。请参阅此 railscast [http://railscasts.com/episodes/196-nested-model-form-revised](http://railscasts.com/episodes/196-nested-model-form-revised)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-23T16:09:36.303

您在视图中使用了@course_id 变量，但我看不到它的设置位置？当您检查页面时，那里有值吗？此外，嵌套属性提示是一个很棒的提示。您需要经常使用该模式以使现在学习它变得有价值。（并且快速错字/修复“have_many”显然是 has_many。你越是确保你从未正确输入它，它就越不可能潜入你的代码）。

# c# - C# Math.Cos(double) 返回错误值

> ID：11166034
> 
> 赞同：12
> 
> 时间：2012-06-23T01:18:03.353
> 
> 标签：c#

在 C# 中，我有这个：

```
double Cos = Math.Cos(32.471192290848492); //Equals 0.49299653250335213 
```

但是当我在计算器中这样做时，我得到了这个

```
(0.84366148773210745476752872050588) 
```

为什么它返回错误的值？

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-06-23T01:19:59.227

Math.Cos 期望*以弧度为单位*的角度。我怀疑你的计算器是以度数工作的。

通过将度数转换为弧度，您应该能够得到相同的答案：

```
double angleInDegrees = 32.471192290848492;
double cos = Math.Cos(angleInDegrees * (Math.PI / 180.0)); 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-06-23T01:19:51.120

您可能将度数与弧度混淆了。大多数计算器使用度数，而大多数编程语言设置为使用弧度。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-06-23T01:20:02.517

因为`Math.Cos`以*弧度为单位*工作，而您的计算器以*度*为单位。

# plone - 下拉菜单中的内容类型图标丢失

> ID：11166042
> 
> 赞同：1
> 
> 时间：2012-06-23T01:19:22.480
> 
> 标签：plone

我正在从 3.3.5 升级到 Plone 4 并使用 webcouturier.dropdownmenu 2.3。

使用 Plone 3.3.5，我可以在下拉菜单中看到内容类型图标，但在 Plone 4 中它们不见了。实际上，除了具有 mime 类型的内容之外，所有其他项目都缺少内容类型图标。有什么办法让他们回来？在主题设置中，我设置了“始终显示图标”。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-25T07:39:28.073

如果您认为这是错误，请使用插件的问题跟踪器： [https ://github.com/collective/webcouturier.dropdownmenu/issues](https://github.com/collective/webcouturier.dropdownmenu/issues)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-23T14:27:35.743

`http://yourplone/@@skins-controlpanel`（您可以从 plone 控制面板 -> 主题中获取）

有一个选择。

# ios - 是否可以编写安装 CA 的 iOS 应用程序？

> ID：11166046
> 
> 赞同：0
> 
> 时间：2012-06-23T01:19:47.110
> 
> 标签：ios, ios5, ios4

我希望这个问题不会太愚蠢。我们内部有许多需要安全的网站。但是，我们不想为每个人从受信任的 CA（证书颁发机构）购买证书。我们有自己的自制 CA。它适用于 Windows PC 浏览器。

现在我们需要它为数十台 iPad（和 iPhone）工作。:-(

我想知道是否可以编写一个可以在设备上安装我们的 CA 的 iOS 应用程序，以便 Safari 信任我们的网站证书？

如果这是可能的，任何指针将不胜感激！

谢谢！

电动汽车

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-23T01:37:41.993

您是否看过适用于 Mac 的 Apple Configurator？这允许您在设备上批量安装配置文件。或者，您可以发送附有 CA 的电子邮件并在每台设备上打开它。但是，我认为应用程序无法安装 CA。

# php - 关于google爬取php页面

> ID：11166048
> 
> 赞同：0
> 
> 时间：2012-06-23T01:19:54.770
> 
> 标签：php, google-crawlers

我有一个网站，基于 php。我想知道谷歌是否会抓取具有相同标题但内容不同的 php 网站。

[http://www.nyitforums.com/professors/browse_all_prof.php?bdepartment=0](http://www.nyitforums.com/professors/browse_all_prof.php?bdepartment=0)

每个“查看”按钮都返回相同的 html 模板但结果不同，那么 google 会抓取所有这些吗？如果没有，我该怎么做？提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-23T01:24:18.263

注册 Google 网站管理员工具：[http](http://www.google.com/webmasters/)
://www.google.com/webmasters/ 这样您就可以更好地了解 Google 在您的网站上抓取的内容。

# android - Android SimpleCursorTreeAdapter 挂起

> ID：11166055
> 
> 赞同：0
> 
> 时间：2012-06-23T01:20:51.913
> 
> 标签：android

我正在尝试在我为学习目的编写的一些代码中使用 SimpleCursorTreeAdapter。正在发生的事情是，当我单击父级时，它会展开并显示子级，但是我不能再做任何事情了。我使用调试器遍历代码并犯规，我被困在 looper.loop 中一个永无止境的循环中。我已经在下面的代码段中注释掉了所有实际工作的东西，但它仍然挂起。使用下面的代码段，我希望单击第二个父级会导致它展开（如箭头变化所示）。我在代码中留下了旧的东西（但被注释掉了）来展示我想要做什么。

我真的很感激任何意见或建议。

```
 private void showEvents(final Cursor cursor) {

    ExpandableListView lv1 = this.getExpandableListView();

    SimpleCursorTreeAdapter  adapter = new SimpleCursorTreeAdapter (this, cursor, R.layout.simplerow, FROM, TO, 
            R.layout.childrow, FROMCHILD, TOCHILD) {
        //@Override
        //public void setViewText(TextView v, String text) {
        //  super.setViewText(v, convText(v, text, cursor));
        //}

        @Override
        protected Cursor getChildrenCursor(Cursor parentCursor) {

            int groupPos = parentCursor.getPosition(); 
              Log.d("TEST", "getChildrenCursor() for groupPos " + groupPos); 

            String sql = "select f._id, f.NAME as ASSETCLASS, "
                    + "f.value as AMOUNT, "
                    + "0 as PERCENTAGE, "
                    + "0 as TARGET "
                    + "from funds f "
                    + "where f.asset_class = " + parentCursor.getInt(0) + ";";

            sql = "select f._id, f.NAME as FUNDNAME, "
                    + "f.value as AMOUNT_OWNED "
                    + "from funds f "
                    + "where 1  = 1;";

            Log.d("TEST", sql);

            //SQLiteDatabase db = pfdata.getReadableDatabase();

            //Cursor cursor = db.rawQuery(sql, null);
            //startManagingCursor(cursor);
            //return cursor;

            //Log.d("TEST", Integer.toString(cursor.getCount()));
            //return cursor;
            return null;
        }

    };

    // Log.d("TEST", Integer.toString(adapter.getCount()));

    lv1.setAdapter(adapter);

} 
```

我尝试了这个建议，但我没有看到行为有任何变化。这是我目前拥有的：

```
 private void showEvents(final Cursor cursor) {

    ExpandableListView lv1 = this.getExpandableListView();

    MyExpandableListAdapter mAdapter = new MyExpandableListAdapter(cursor, this, 
            R.layout.simplerow, R.layout.childrow, 
               FROM, TO, 
               FROMCHILD, TOCHILD); 
        lv1.setAdapter(mAdapter); 
       }

public class MyExpandableListAdapter extends SimpleCursorTreeAdapter { 

public MyExpandableListAdapter(Cursor cursor, Context context, 
        int groupLayout, int childLayout, String[] groupFrom, 
        int[] groupTo, String[] childrenFrom, int[] childrenTo) { 
    super(context, cursor, groupLayout, groupFrom, groupTo, 
            childLayout, childrenFrom, childrenTo); 
} 

@Override 
protected Cursor getChildrenCursor(Cursor parentCursor) { 

    String sql = "select f._id, f.NAME as ASSETCLASS, "
            + "f.value as AMOUNT, "
            + "0 as PERCENTAGE, "
            + "0 as TARGET "
            + "from funds f "
            + "where f.asset_class = " + parentCursor.getInt(0) + ";";

    Log.d("TEST", sql);

    return null;        
} 
```

我尝试实际运行查询并返回光标，但这并没有什么不同，所以我尝试回到基础。如果有人对正在发生的事情有任何想法，我将不胜感激。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-23T04:25:54.963

我相信您的问题是因为您正在覆盖`SimpleCursorTreeAdapter`而不是扩展它。当您这样做时，您需要重新创建它用于处理列表的所有方法（您还没有这样做）。

您有两个选择：添加所有缺少的方法或创建一个扩展的新类`SimpleCursorTreeAdapter`并将其用作适配器。最后一个（IMO）比第一个容易得多。您只需覆盖您需要的方法。

下面是我的一个项目的一个例子。

```
mAdapter = new MyExpandableListAdapter(mGroupsCursor, getActivity(),
       R.layout.rowlayout_expgroup, R.layout.rowlayout_itemlist_exp,
       new String[] { "_id" }, new int[] { android.R.id.text1 },
       new String[] { GroceryDB.ITEM_NAME, GroceryDB.LISTITEM_QTY,
               GroceryDB.ITEM_UNIT }, new int[] { R.id.ListItem1,
               R.id.ListItem3, R.id.ListItem2 });
lv.setAdapter(mAdapter);

public class MyExpandableListAdapter extends SimpleCursorTreeAdapter {
    public MyExpandableListAdapter(Cursor cursor, Context context,
            int groupLayout, int childLayout, String[] groupFrom,
            int[] groupTo, String[] childrenFrom, int[] childrenTo) {
        super(context, cursor, groupLayout, groupFrom, groupTo,
                childLayout, childrenFrom, childrenTo);
    }

    @Override
    protected Cursor getChildrenCursor(Cursor groupCursor) {
        Cursor childCursor = mDbHelper.fetchChildren(GroceryListMain.group,
                groupCursor.getString(groupCursor.getColumnIndex("_id")),
                ListFragment_ShopList.listId);
        getActivity().startManagingCursor(childCursor);
        childCursor.moveToFirst();
        return childCursor;
    }

    protected void bindChildView(View view, Context context, Cursor cursor,
            boolean isLastChild) {
        TextView name = (TextView) view.findViewById(R.id.ListItem1);
        TextView qty = (TextView) view.findViewById(R.id.ListItem3);
        TextView unit = (TextView) view.findViewById(R.id.ListItem2);
        TextView cost = (TextView) view.findViewById(R.id.ListItem4);

        name.setText(cursor.getString(2));
        qty.setText(cursor.getString(1));
        unit.setText(cursor.getString(4));
        DecimalFormat df = new DecimalFormat("0.00");
        Double hold = Double.valueOf(cursor.getString(3));
        Double qtyhold = Double.valueOf(cursor.getString(1));
        Double total = hold * qtyhold;
        cost.setText("$" + df.format(total));
    }
} 
```

# java - BitSet 向后显示值？

> ID：11166056
> 
> 赞同：4
> 
> 时间：2012-06-23T01:21:00.213
> 
> 标签：java, bitset

我已经设置了以下使用 Java 运行的代码：

```
BitSet bitSet = BitSet.valueOf(new byte[] { (byte)15 });
System.out.println(bitSet); 
```

令我惊讶的是

```
{0, 1, 2, 3} //the indexes of the 1's in the bitset 
```

代替

```
{ 4, 5, 6, 7 }. 
```

如果我没记错的话，2 的补码中的 15 写为 00001111（有 1 个字节）。

这让我想知道为什么 BitSet 会向后显示索引。有什么合理的解释吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-23T01:23:20.537

引用 Java 标准`BitSet`：

> 返回此位集的字符串表示形式。对于此 BitSet 包含处于设置状态的位的每个索引，该索引的十进制表示包含在结果中。此类索引按从低到高的顺序列出，用“、”（逗号和空格）分隔并用大括号括起来，从而形成一组整数的常用数学符号。

正如这所说，顺序是“从最低到最高”。这意味着最低有效位（个位）在前，最高有效位在后。

排序（从左到右的符号顺序或从最少到最多的数字顺序）都是有意义的，尽管方式不同。

# c# - 在 C# 应用程序中使用 b-pac SDK 进行标签打印开发

> ID：11166063
> 
> 赞同：2
> 
> 时间：2012-06-23T01:22:48.963
> 
> 标签：c#, .net, printing, label

我正在**Visual Studio 2012 RC 中开发 POS 系统的 C# 应用程序**。我必须使用标签打印机打印销售额

> **Brothers P-Touch QL-500 标签打印机。**

**我已经做了什么。**

*   **我已经安装了最新的 b-pac SDK 3.0**
*   **成功添加对我的 C# 应用程序的引用。**
*   **为了创建标签模板，我安装了最新版本的 p-touch Editor 5.0。**
*   **制作了一个模板（Mylabel.lbl）。**

    但在那之前。

**我运行了一些内置的示例，但这些示例引发了异常。**在 Google 上进行了大量搜索后，我发现这是**打印机的驱动程序问题**。

我无法安装驱动程序，因为驱动程序的安装需要连接打印机。 **我没有打印机。**

> **我需要做什么**

*   你知道我该怎么做这个任务吗？
*   **使用Brothers P-Touch QL-500 标签打印机**打印标签的正确方法是什么。

    > 请帮助我我已经做了很多时间搜索。stackoverflow 是我最后的希望。我是这种标签打印的新手。请帮助我将不胜感激。

**我正在使用的 ruff 示例代码。**

```
bpac.DocumentClass doc = new DocumentClass();
if (doc.Open("templateFile.lbx"))
{
    doc.GetObject("field1").Text = "...";
    doc.GetObject("field2").Text = "...";

    doc.StartPrint("", PrintOptionConstants.bpoDefault);
    doc.PrintOut(1, PrintOptionConstants.bpoDefault);
    doc.EndPrint();
    doc.Close();
} 
```

这是我正在尝试的示例代码。第一行抛出异常

```
bpac.DocumentClass doc = new DocumentClass(); 
```

我还附上了一个异常屏幕预览。

![抛出异常屏幕预览](../Images/ab050373cb7a5d2eeec41763d2c3b674.png)

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-11-30T15:20:36.683

发生异常时，我收到了完全相同的错误消息。我的解决方案是将“平台目标”设置为“X86”CPU。这可以通过：（菜单）项目->属性->（选项卡）构建->平台目标“x86”而不是“任何CPU”来完成

我在 Windows 7 64 位上开发了该软件。

您可以在 b-PAC SDK 文档中找到有关此的更多信息。C:\Program Files (x86)\Brother bPAC3 SDK\Doc\bPAC30_eng.chm 在“故障排除”部分您会发现：“程序无法在64位操作系统上运行。将平台更改为“x86”，然后重新编译它。”

此解决方案已使用连接到我的 PC 的 QL560 硬件进行测试，并且可以正常工作。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-23T02:43:54.573

这是我用来使用此对象打印的一些代码。

```
 string strPrinterAddress = "domain\machinename";
            objDoc = new BrssCom.Document();
            string strPath = "192.168.1.45" + " /D" + strPrinterAddress;
            if (objDoc.Open(strPath))
            {
                objDoc.SetText(0, "Recycle: " + recycleReason);

                objDoc.SetText(1, "Other Text");
                objDoc.SetBarcodeData(0, "1234");
                objDoc.DoPrint(BrssCom.PrintOptionConstants.bpoAutoCut, "0");
            } 
```

但是，@JamieMeyer 是对的。你不能，绝对不能确定这在没有打印机测试的情况下会起作用。在我的示例中，我使用了一个非常简单的标签，其中包含 3 个字段，其中一个是条形码。这不是使用命名变量的简单问题，它实际上取决于添加字段的顺序等。

我自己没有打印机，我花了大约 2 周的时间在晚上发送代码更新，然后第二天客户进行一轮又一轮的测试，以使外观和感觉恰到好处。如果让我重新做一遍，我会自己购买一台打印机。

祝你好运，但你是在没有打印机的情况下在黑暗中拍摄。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-23T01:45:40.430

你打算如何在没有物理单元的情况下验证你的编码结果？Brother 不提供任何类型的视觉模拟器，因此您最好的选择是购买该设备。这些可以以 75 美元的街头价格买到，并且很可能在您当地的办公用品商店的货架上。[http://www.officedepot.com/a/products/506232/Brother-P-Touch-QL-500-PC/](http://www.officedepot.com/a/products/506232/Brother-P-Touch-QL-500-PC/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-05-25T08:40:25.843

这是我的工作代码。我认为 c# 示例不正确，您必须将 DocumentClass 更改为 Document。

Actives 代码用于 interop.bpac.dll 注释代码用于 bpac.dll

> 块引用

公共无效 ETQ_Print（字符串 Lote，字符串 NumSerie）{

```
 try
        {
            // bpac.Document PrnLabel = new bpac.Document ();
            ///  bpac.Document PrnLabel = new bpac.Document();

            bpac.Document doc = new Document();

            // Actualizo los Campos de la Etiqueta.

            // if (PrnLabel.Open(this.txtETQ_Plantilla.Text))
            if (doc.Open (this.txtETQ_Plantilla.Text) != false)
            { // hemos cargado la plantilla corectamente.

                // Editamos los campos necesarios..
                // PrnLabel.GetObject("BarCode").Text = Lote + NumSerie;
                doc.GetObject("BarCode").Text = Lote + NumSerie;
                // PrnLabel.GetObject ("objName").Text = ETQ_txtNumSerie.Text;
                // PrnLabel.StartPrint("", PrintOptionConstants.bpoDefault);
                doc.StartPrint("", PrintOptionConstants.bpoDefault);
                // PrnLabel.PrintOut(1, PrintOptionConstants.bpoDefault);
                doc.PrintOut(1, PrintOptionConstants.bpoDefault);
                // PrnLabel.EndPrint();
                doc.EndPrint();
                // PrnLabel.Close();
                doc.Close();
            }
            else
            {
                MessageBox.Show(this, "Open() Error: " + doc.ErrorCode); //  PrnLabel.ErrorCode);
            }
        }
        catch
        {
            MessageBox.Show(this, "Error de Etiqueta", "Error Etiqueta", MessageBoxButtons.OK, MessageBoxIcon.Error);

        }
    } 
```

> 块引用

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2017-09-28T00:56:45.677

我有同样的问题。原来我无意中下载了 32 位版本的 SDK。来自[http://www.brother.com/product/dev/label/bpac/download/index.htm#full的版本信息](http://www.brother.com/product/dev/label/bpac/download/index.htm#full)

[![在此处输入图像描述](../Images/a7f359ec92e246e4c96667e2597cbed4.png)](https://i.stack.imgur.com/NIptV.png)

一旦我删除了 32 位 SDK 并添加了 64 位 SDK，该示例就可以立即使用。这适用于 b-PAK 3.2.001。对我来说，下一步是将示例代码中使用的模板加载到 P-touch 编辑器中，并设置正确的颜色和打印​​尺寸。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2019-01-27T23:32:39.107

来源：兄弟 youtube 教学视频：[https](https://www.youtube.com/watch?v=WRssVf8zxQQ) ://www.youtube.com/watch?v=WRssVf8zxQQ和上面的其他优秀答案。他们不太适合我。

在 Visual Studio Community 2017 中，我添加了对 interop.bpac 的引用，然后运行：

```
 try
        {
            bpac.Document mylabel = new bpac.Document();
            if (mylabel.Open("SensorNodeLabel.lbx"))
            {
                mylabel.GetObject("labelText").Text = "blah blah";

                mylabel.StartPrint("", bpac.PrintOptionConstants.bpoDefault);
                mylabel.PrintOut(1, bpac.PrintOptionConstants.bpoDefault);
                mylabel.EndPrint();
                mylabel.Close();
            }
        }
        catch ... 
```

这在 QL-700 标签打印机上运行良好。

# c# - 这是一个已知的线程安全同步/锁定模式吗？

> ID：11166073
> 
> 赞同：4
> 
> 时间：2012-06-23T01:25:34.267
> 
> 标签：c#, design-patterns, c#-4.0, thread-safety

我觉得我在重新发明轮子，而且很有可能有人已经用头撞到代码上，想出了一个好的、稳定的、经过测试的模式来解决这个问题，而我没有还没有遇到。

我想出了以下似乎对我有用的解决方案。
它应该提供一个一致的接口来处理应该以线程安全方式访问的对象。

[@pst](https://stackoverflow.com/questions/11166073/is-this-a-known-thread-safe-syched-locked-pattern#comment14645626_11166073)称其为*“原子”对象 get/set holder*，这是在其他地方使用的模式吗？

这是界面：

```
public interface ISynched<T>
{
    bool Read( ref T value );
    bool Read( ref T value, TimeSpan timeout );

    bool Write( T value );
    bool Write( T value, TimeSpan timeout );

    bool Do( Action<T> roAction );
    bool Do( Action<T> roAction, TimeSpan timeout );
    bool Do( Action<T, Action<T>> rwAction );
    bool Do( Action<T, Action<T>> rwAction, TimeSpan timeout );
} 
```

实现如下：

```
public class Synched<T>: ISynched<T>
{
    static public readonly TimeSpan Infinity = TimeSpan.FromMilliseconds(-1);

    private T _value;

    public static Synched<T> MakeSynched( T value )
    {
        return new Synched<T>() { _value = value };
    }

    private Synched() {}

    public bool Read( ref T value )
    {
        return Read( ref value, Infinity );
    }
    public bool Read( ref T value, TimeSpan timeout )
    {
        var tmp = default(T);
        var success = Do( (v) => tmp = v, timeout );
        if( success ) value = tmp;
        return success;
    }

    public bool Write( T value )
    {
        return Do( (v, set) => set(v) );
    }
    public bool Write( T value, TimeSpan timeout )
    {
        return Do( (v, set) => set(v), timeout );
    }

    public bool Do( Action<T> roAction )
    {
        return Do( roAction, Infinity );
    }
    public bool Do( Action<T> roAction, TimeSpan timeout )
    {
        bool lockWasTaken = false;
        try
        {
            Monitor.TryEnter(this, timeout, ref lockWasTaken);
            if(!lockWasTaken) return false;

            roAction( _value );
            return true;
        }
        finally
        {
            if (lockWasTaken) Monitor.Exit(this);
        }
    }

    public bool Do( Action<T, Action<T>> rwAction )
    {
        return Do( rwAction, Infinity);
    }
    public bool Do( Action<T, Action<T>> rwAction, TimeSpan timeout )
    {
        bool lockWasTaken = false;
        try
        {
            Monitor.TryEnter(this, timeout, ref lockWasTaken);
            if(!lockWasTaken) return false;

            rwAction( _value, value => _value = value );
            return true;
        }
        finally
        {
            if (lockWasTaken) Monitor.Exit(this);
        }
    }
} 
```

还有一个额外的静态非泛型类，可以更轻松地编写同步对象创建代码：

```
public static class Synched
{
    public static Synched<T> MakeSynched<T>( T value )
    {
        return Synched<T>.MakeSynched( value );
    }
} 
```

编辑：我已经更改了示例以使其更有意义示例用例看起来像这样（代码没有任何意义，只是一个示例（一个不好的示例）：

```
var synchedCol = Synched.MakeSynched( new List<SomeClass>() );

synchedCol.Do( c => {
    c.Add(new SomeClass());
    c.Add(new SomeClass() { Property1 = "something" } );
} );

var i = 1;
SomeClass val;
synchedCol.Do( c => val = c[i] );

var i = 1;
synchedCol.Do( c => {
    if( c[i].Property1 == "something" )
    {
        c.Remove(c[i]);
    }
}); 
```

那么我在正确的轨道上吗？有没有人遇到过类似的事情？有没有类似的现有模式？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-23T07:59:42.933

*不要试图重新发明轮子*

如果您想要一个线程安全的集合，请从**[System.Collections.Concurrent](http://msdn.microsoft.com/en-us/library/system.collections.concurrent.aspx)**命名空间中选择一个。

例如`BlockingColletion<T>`，为实现`IProducerConsumerCollection<T>`. 这将比您的实现性能更高，因为它实现了生产者/消费者（读取器/写入器）模式。这意味着阅读器不必同步，也不会相互阻塞。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-25T23:57:42.530

根据您在做什么，我建议一个好的模式是有一个方法接受一个`Func<T,T>`应该 - 给定数据项的现有值，产生一个新值；如果底层数据项在执行时被写入，调用者必须为委托可能被多次调用的可能性做好准备。例如，两个调用者尝试使用计算的 a 更新相同的数据项（最初为 5），有`Func<int,int>`可能`(x) => x+1`两个委托都将被调用，值为 5（计算 6），一个更新会成功，另一个会重新调用它的委托值为 6（计算 7），然后存储该结果。

*当争用不严重时，如果调用者准备多次调用该函数*，则该方法相对容易正确工作*. 但是，如果函数的计算时间很长，并且对资源有很多争用，那么直接的方法可能会有点慢。然而，通过检测争用并开始使用监控对象来实现“定时咨询锁”的代码，它的性能可以变得有些合理：如果一个项目的新值正在由一个客户端的委托计算，允许另一个客户端访问该项目将导致挂起的客户端或新客户端完成的工作被浪费。取决于挂起的客户端的函数运行了多长时间，它的努力可能永远不会产生任何结果，因此使其操作无效可能不会造成真正的损失。另一方面，*

# c++ - C++ Excel 保存工作簿

> ID：11166074
> 
> 赞同：0
> 
> 时间：2012-06-23T01:25:35.483
> 
> 标签：c++, excel, interfacing

我正在使用 C++ 创建一个 Excel 图表。我在用几张纸保存工作簿时遇到问题。这是我的代码：

```
try
{

    CoInitialize(NULL);
    Excel::_ApplicationPtr XL;
    XL.CreateInstance(L"Excel.Application");
    XL->Visible=false;
    Excel::_WorkbookPtr workbook = XL->Workbooks->Add(Excel::xlWorksheet);
    Excel::_WorksheetPtr pSheet= XL->ActiveSheet;

    for (i='1';i<='z';i++){

                pSheet = XL->Worksheets->Add();

                char arr[25];

                    sprintf(arr, "Podaci za %c", i);

                pSheet->Name = arr;

                        ...

    }

pSheet = XL->Worksheets->Add();
pSheet->Name = "some page";

pSheet->SaveAs("c:\\test.xls");

workbook->Close();
XL->Quit();

}

catch(_com_error & error)
{
    printf("\n  Greska u komunikaciji s MS Excelom.");
}

CoUninitialize(); 
```

我有一个创建几张纸的 for 循环。“...”代表我填写表格的代码部分。一切都很好，直到我尝试保存它。现在，当它到达 SaveAs() 时，它会跳起来捕捉。我也尝试使用 workbook->saveas("table.xls"); 但我不知道正确的语法。

提前感谢您的帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-18T09:52:59.057

确保在运行应用程序时未打开该文件。

# java - 在Android中以编程方式设置ToggleButton的状态？

> ID：11166082
> 
> 赞同：1
> 
> 时间：2012-06-23T01:28:14.237
> 
> 标签：java, android, togglebutton

> **可能重复：**
> [ToggleButton 状态以编程方式更改而不是在 Android 中自动更改？](https://stackoverflow.com/questions/5041021/togglebutton-state-change-programmatically-rather-than-automatically-in-android)

我正在尝试切换图像，一个带有切换按钮的数组。唯一的问题是我需要在三卷后重置切换按钮。我已经知道如何在 3 次滚动后重置图像；但是，我必须单击切换按钮两次才能使状态与切换按钮中的图像相匹配。我正在阅读[这个线程](https://stackoverflow.com/questions/10352133/how-to-work-with-a-togglebutton-android)，但是当我尝试将 setActivated(false) 应用于循环时，我得到了这个语法错误：

```
The method setActivated(boolean) is undefined for the type ToggleButton 
```

按钮的 XML：

```
 <ToggleButton
            android:id="@+id/tbDice1"
            android:layout_width="50dip"
            android:layout_height="50dip"
            android:textOn="" 
            android:textOff=""              
            android:layout_marginLeft="5dp"
            android:layout_marginTop="5dp" 
            android:background="@drawable/die_grn_6" />

        <ToggleButton
            android:id="@+id/tbDice2"
            android:layout_width="50dip"
            android:layout_height="50dip"
            android:textOn="" 
            android:textOff=""
            android:layout_marginLeft="5dp"
            android:layout_marginTop="5dp" 
            android:background="@drawable/die_grn_6" />

        <ToggleButton
            android:id="@+id/tbDice3"
            android:layout_width="50dip"
            android:layout_height="50dip"
            android:textOn=""
            android:textOff=""
            android:layout_marginLeft="5dp"
            android:layout_marginTop="5dp" 
            android:background="@drawable/die_grn_6" />

        <ToggleButton
            android:id="@+id/tbDice4"
            android:layout_width="50dip"
            android:layout_height="50dip"
            android:textOn=""
            android:textOff=""
            android:layout_marginLeft="5dp"
            android:layout_marginTop="5dp"
            android:background="@drawable/die_grn_6" />

        <ToggleButton
            android:id="@+id/tbDice5"
            android:layout_width="50dip"
            android:layout_height="50dip"
            android:textOn="" 
            android:textOff=""
            android:layout_marginLeft="5dp"
            android:layout_marginTop="5dp"
            android:background="@drawable/die_grn_6" />
        </TableRow> 
```

听众的Java：

```
public void playGame()  
{  
    final Random rand = new Random();       

    dice0 = (ToggleButton)findViewById(R.id.tbDice1);  
    dice1 = (ToggleButton)findViewById(R.id.tbDice2);
    dice2 = (ToggleButton)findViewById(R.id.tbDice3);
    dice3 = (ToggleButton)findViewById(R.id.tbDice4);
    dice4 = (ToggleButton)findViewById(R.id.tbDice5);

    txtTurnNum = (TextView)findViewById(R.id.turnNum);
    txtRollNum = (TextView)findViewById(R.id.rollNum);

    final ToggleButton[] dice = {dice0, dice1, dice2, dice3, dice4}; //array of buttons (dice)
    final int [] diceValue = new int [5];
    final boolean [] isHeld = {false, false, false, false, false};  // array of dice to be held (hold)

    roll = (Button)findViewById(R.id.btnroll);
    score = (Button)findViewById(R.id.btnscore);        

    roll.setOnClickListener(new View.OnClickListener(){
        @Override
        public void onClick(View v ) {   
            rollDice(dice, diceValue, isHeld, rand);    
        }
    }); 

    score.setOnClickListener(new View.OnClickListener(){
        @Override
        public void onClick(View v ) {   
            scoreDice(diceValue);   
        }
    }); 

    dice0.setOnClickListener(new OnClickListener() {
        public void onClick(View v) {
            if (dice0.isChecked()) {
                isHeld[0] = true;
                String imgName = "die_red_" + diceValue[0];                 
                int id = getResources().getIdentifier(imgName, "drawable", getPackageName());   
                dice0.setBackgroundResource(id);  //Changes to red
            } else {
                isHeld[0] = false;
                String imgName = "die_grn_" + diceValue[0];                 
                int id = getResources().getIdentifier(imgName, "drawable", getPackageName());   
                dice0.setBackgroundResource(id);  //Changes to green
            }
        }
    });

    dice1.setOnClickListener(new OnClickListener() {
        public void onClick(View v) {
            if (dice1.isChecked()) {
                isHeld[1] = true;
                String imgName = "die_red_" + diceValue[1];                 
                int id = getResources().getIdentifier(imgName, "drawable", getPackageName());   
                dice1.setBackgroundResource(id);  //Changes to red
            } else {
                isHeld[1] = false;
                String imgName = "die_grn_" + diceValue[1];                 
                int id = getResources().getIdentifier(imgName, "drawable", getPackageName());   
                dice1.setBackgroundResource(id);  //Changes to green
            }
        }
    });

    dice2.setOnClickListener(new OnClickListener() {
        public void onClick(View v) {
            if (dice2.isChecked()) {
                isHeld[2] = true;
                String imgName = "die_red_" + diceValue[2];                 
                int id = getResources().getIdentifier(imgName, "drawable", getPackageName());   
                dice2.setBackgroundResource(id);  //Changes to red
            } else {
                isHeld[2] = false;
                String imgName = "die_grn_" + diceValue[2];                 
                int id = getResources().getIdentifier(imgName, "drawable", getPackageName());   
                dice2.setBackgroundResource(id);  //Changes to green
            }
        }
    });

    dice3.setOnClickListener(new OnClickListener() {
        public void onClick(View v) {
            if (dice3.isChecked()) {
                isHeld[3] = true;
                String imgName = "die_red_" + diceValue[3];                 
                int id = getResources().getIdentifier(imgName, "drawable", getPackageName());   
                dice3.setBackgroundResource(id);  //Changes to red
            } else {
                isHeld[3] = false;
                String imgName = "die_grn_" + diceValue[3];                 
                int id = getResources().getIdentifier(imgName, "drawable", getPackageName());   
                dice3.setBackgroundResource(id);  //Changes to green
            }
        }
    });

    dice4.setOnClickListener(new OnClickListener() {
        public void onClick(View v) {
            if (dice4.isChecked()) {
                isHeld[4] = true;
                String imgName = "die_red_" + diceValue[4];                 
                int id = getResources().getIdentifier(imgName, "drawable", getPackageName());   
                dice4.setBackgroundResource(id);  //Changes to red
            } else {
                isHeld[4] = false;
                String imgName = "die_grn_" + diceValue[4];                 
                int id = getResources().getIdentifier(imgName, "drawable", getPackageName());   
                dice4.setBackgroundResource(id);  //Changes to green
            }
        }
    });
}

public int[] rollDice(ToggleButton [] dice, int [] diceValue, boolean [] isHeld, Random rand)
{

    if(rollNum < MAX_ROLLS){
        for (int i = 0; i < dice.length; i++) {
            if (!isHeld[i]) {
                int rndInt = rand.nextInt(6) + 1; // Random number between 1 and 6          
                String imgName = "die_grn_" + rndInt;                   
                int id = getResources().getIdentifier(imgName, "drawable", getPackageName());   
                diceValue[i] = rndInt;
                dice[i].setBackgroundResource(id);  //Loops through the dice array and sets the appropriate dice images based on individual randoms
            } else {
                //do nothing                        
            }
        }
        rollNum++;              
    } else {
        //Turn is over
        if(turnNum < MAX_TURNS){
            rollNum = 1;  //reset turn number to 1
            turnNum++;                  
            txtTurnNum.setText("" + turnNum);
            scoreDice(diceValue);
            updateScores(scoresArray);
            for (int i = 0; i <dice.length; i++) {
                if (isHeld[i]) {
                    isHeld[i] = false;
                    String imgName = "die_grn_" + diceValue[i];                 
                    int id = getResources().getIdentifier(imgName, "drawable", getPackageName());   
                    dice[i].setBackgroundResource(id);  //Changes to green
                    dice[i].setActivated(false);  //PROBLEM HERE
                }
            }
        } else {
            Toast.makeText(getApplicationContext(), "Game Over",
                    Toast.LENGTH_LONG).show();          
        }
    }

    txtRollNum.setText("" + rollNum);   

    return diceValue;
} 
```

有什么想法可以为我指明正确的方向吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-23T01:28:14.987

我最终找到了[这个线程](https://stackoverflow.com/questions/5041021/togglebutton-state-change-programmatically-rather-than-automatically-in-android)，它给了我正确的 button.setChecked(true) 语法

# java - 图像处理中的距离测量

> ID：11166087
> 
> 赞同：1
> 
> 时间：2012-06-23T01:29:18.917
> 
> 标签：java, image, javacv, rapidminer

我真的希望有人可以帮助我，因为我真的坚持这个。我将有一个需要处理的大型图像数据集，由于集合的大小无法手动处理。

需要做的是我需要在每张图像大约 30 个对象的集合中找到水平像素距离。这些对象都是相同的形状和相似的颜色（即较浅/较深的阴影）。X/Y 0,0 将分配给最低 Y 对象的中心 X 底部 Y 边界，从那里我需要测量并记录到图像中剩余 29 个对象中每个对象中心的 x 轴距离。中心部分并不是真正必要的，因为我可以重新调整以重新对齐中心，其主要目的不一定是 x/y 坐标，而是它们显示/具有的模式。

我已经能够使用 Photoshop 以及带有 IMMI 扩展的 Rapidminer 来提取对象，但是我找不到任何测量距离的工具。我看过 JavaCV，但没有看到任何可以做到这一点的东西。如果有人对工具包、Java 或其他方式有任何想法，请告诉我！

如何测量我已经找到的 2 个对象之间的距离？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-23T16:02:06.317

[`ImageJ`](http://rsbweb.nih.gov/ij/)在这种情况下被广泛使用。您可能能够找到现有的[插件](http://rsbweb.nih.gov/ij/plugins/index.html)或使用广泛的[宏](http://rsbweb.nih.gov/ij/developer/macro/macros.html)语言。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-19T12:16:43.513

如果要测量的图像较少，可以使用 KLONK Image Measurement for Windows。下载并使用免费版：[http ://www.imagemeasurement.com](http://www.imagemeasurement.com)

# ios - 向字符串添加换行符，使其适合多行 UILabel

> ID：11166088
> 
> 赞同：2
> 
> 时间：2012-06-23T01:29:25.370
> 
> 标签：ios, string, uilabel, truncate, break

我已经有一个 UILabel ，它的换行模式设置为截断尾部。问题是我有一个没有换行符的字符串。

UILabel 是否有一种简单的方法可以在字符串中添加断线？

示例：“这是一个适合 2 行的长字符串”--添加换行符-->“这是一个适合 2 行的长字符串\n”

或者我是否必须创建一个函数来计算，给定宽度和中断模式，在哪里插入中断线？

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-23T01:31:31.723

将 \r\n 添加到字符串中。

这在字符 10 和字符 13 中连续出现。

这实际上是向系统发出回车和换行符的消息。这将告诉它把文本放在下一行:)

您还必须告诉标签允许多行。

```
UILabel *label; // We will assume this label exists.
label.numberOfLines = 3;
label.text = @"This String Breaks Here -->\r\nThis is on the next line"; 
```

即使我将标签设置为 3，标签也将有 2 行。因为我只有一个换行符...除非文本换行，然后一行会换行。另一个会在中间截断。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-23T01:33:17.340

[`UITextView`](http://developer.apple.com/library/ios/#DOCUMENTATION/UIKit/Reference/UITextView_Class/Reference/UITextView.html)对于简单的多行文本来说，这可能是一个更好的选择。如果您希望它是只读的，只需将`editable`属性设置为。`NO`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-03T20:43:08.827

我认为最好的答案是你不应该照顾断线。只需将文本提供给 UILabel，它就会根据其断线模式正确地打破它。

重要的是要记住 UILabel 不会自行调整大小。如有必要，您必须增加其高度，然后分配文本。或者做这两件事都覆盖 setText: 方法。

# r - 连接到 Rgui 控制台？

> ID：11166089
> 
> 赞同：0
> 
> 时间：2012-06-23T01:29:40.843
> 
> 标签：r, rgui

是否可以改变 R 控制台的行为，例如

*   在每个命令执行之前`fortune()`打印 a ，或者
*   类似`browser()`，提示符有所改变，引入了一些新的命令(c,n,Q)？

我正在寻找一种`readline()`保持历史功能（键向上）完整的替代方法。

我在带有 Rgui 的 winxp 上使用 R，但便携式解决方案会很棒。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-23T01:33:55.900

是的，尽管它独立于 GUI，因为它只使用回调机制，例如 R 上的问题[：在 R 命令行中显示时钟](https://stackoverflow.com/questions/4222476/r-display-a-time-clock-in-the-r-command-line)。

# scala - 为什么 Scala 2.10 在匹配单例类型时会给出“匹配可能并不详尽”的警告？

> ID：11166098
> 
> 赞同：2
> 
> 时间：2012-06-23T01:32:04.093
> 
> 标签：scala, singleton, pattern-matching, scala-2.10, non-exhaustive-patterns

在 Scala 2.10.0-M4 中

```
object X
def f(e: Either[Int, X.type]) = e match {
  case Left(i) => i
  case Right(X) => 0
} 
```

给出：

```
warning: match may not be exhaustive.
It would fail on the following input: Right(<not X>) 
```

这个对吗？当然，比赛实际上是详尽无遗的。

（同时，回到 Scala 2.9.X 我们得到

```
error: pattern type is incompatible with expected type;
 found   : object X
 required: X.type
           case Right(X) => 0 
```

这大概是一个错误。）

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-23T02:03:07.240

可悲的是，存在两种价值观`X.type`。一个是显而易见`X`的，另一个当然是`null`。因此，您的模式错过了一个案例:(

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-24T04:03:48.880

它已被修补，参见[https://github.com/retronym/scala/compare/ticket/5968](https://github.com/retronym/scala/compare/ticket/5968)。

# iphone - 在越狱设备上升级应用程序

> ID：11166107
> 
> 赞同：0
> 
> 时间：2012-06-23T01:34:33.967
> 
> 标签：iphone

我有一个免费的应用程序。我还为越狱 iphone 制作了版本。问题是 iphone 上的正常升级只是运行 appstore 应用程序的更新。但是对于越狱设备上的版本，我希望我可以检查新版本是否存在，如果确定，它会从网络下载版本并自动安装在设备上。

我需要调用什么样的 sdk 才能在越狱设备上安装 ipa 文件？

欢迎任何评论

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-23T04:20:58.330

即使在越狱设备上，应用程序也无法自动更新；用户必须参与开始更新过程（通常的方式是用户在应用商店中按下“更新”时）。尽管您无法自动更新您的应用程序，无论是在越狱设备还是非越狱设备上，Nick Lockwood 都有一个名为 iVersion 的库，它会在您的应用程序有可用更新时提醒用户。[您可以在其Github 页面](https://github.com/nicklockwood/iVersion)下载 iVersion 。Github 页面上还有全面的安装和配置说明，因此我建议您检查一下。

希望这可以帮助！

# ruby - 上传文件产生 406（不可接受）错误

> ID：11166108
> 
> 赞同：2
> 
> 时间：2012-06-23T01:35:16.820
> 
> 标签：ruby, ruby-on-rails-3

我正在尝试使用示例代码上传文件。我没有收到任何编译错误，而是一条`406 Not Acceptable`错误消息。这是什么意思？

**发布请求：**

```
Started POST "/files/upload" for 10.15.24.38 at 2012-06-22 21:18:11 -0400
Processing by FilesController#upload as HTML
  Parameters: {"utf8"=>"â", "authenticity_token"=>"wfpBi3Y8KgmqitXrh4fZ3xfun73mWOfXiTQ+J7bdfWU=", "user_id"=>"231",
"button"=>"", "upload"=>{"datafile"=>"ws_1920x1080.jpg"}} 
```

**看法：**

```
<%= form_tag files_upload_path, :remote => true, :method => :post, :multipart => true do %>
#The form has some other values too. I am keeping it short here.  
<p>
<label for="upload_file">Select File</label> :
<%= file_field 'upload', 'datafile' %>
</p>
<% end %> 
```

**控制器：**

```
 def upload
    #The controller has some other values too, that are not related to file upload. 

    if params[:datafile]
    uploaded_io = params[:upload][:datafile]
    File.open(Rails.root.join('public', 'uploads', uploaded_io.original_filename), 'w') do |file|
    file.write(uploaded_io.read)
    end
    end

    if params[:user_id] 
    #do some extra stuff
    end 

    respond_to do |format|
    format.js
    end 

 end 
```

**错误：**

```
Completed 406 Not Acceptable in 2736ms (ActiveRecord: 3.2ms) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-23T01:45:31.957

没有足够的信息来提供答案，但您`:multipart => true`在我们的`form_for`电话中显然缺少，如下所示：

```
<%= form_for @upload, :multipart => true do |f| %>
  Your form code here
<% end %> 
```

并且发生了不可接受的错误，因为您要求进行 HTML 渲染，但可能没有任何`respond_to`内容响应 HTML。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-23T09:54:20.587

`ajax`我猜你不能仅仅通过指定`remote => true`你需要某种插件或类似的东西来上传文件

`remotipart`, `plupload`,`uploadify` 或类似的东西。

因此，如果您没有使用任何插件，那么即使您指定`remote => true`表单也将作为普通 HTML 请求发送，**而不是** `XMLHttpRequest`

现在因为在你的控制器中你已经**删除了**

`format.html`部分，因为您假设这将是一个`ajax`请求，但实际上它不是（HTML 请求）

因为 Rails 找不到合适的格式来回复它报告`406 Not Acceptable`

帮自己一个忙，将`request.xhr?`方法记录在控制器中。

就像是

`logger.info "******************** #{request.xhr?} *********************"`

如果`request.xhr?`返回**nil**指定该请求**不是**ajax 请求

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-23T08:58:17.783

您不允许（以直接方式）通过远程请求上传文件。看看这里：[如何异步上传文件？](https://stackoverflow.com/questions/166221/how-can-i-upload-files-asynchronously-with-jquery)

# java - Java Hibernate 的麻烦

> ID：11166111
> 
> 赞同：0
> 
> 时间：2012-06-23T01:35:53.467
> 
> 标签：java, hibernate, jpa

我有这个映射：

实体 1 实体 2 实体 3

和实体 4

实体编号 1,2 和 3 有一个实体 4 的列表。实体 4 只有 2 个字段：一个字符串（数据）和一个我设置为 @Id 和 @GeneratedValue 的 Id

在包含实体 4 数据的数据库表中，我不希望 String(DATA) 重复。

但是实体 1,2 和 3 可以在它们的实体 4 列表中具有它们之间的重复数据。

一个示例（实例是指定实体的对象）：

```
Instance 1 (Entity 1): List: ["hi","hello","music"]
Instance 2 (Entity 2): List: ["tv","hi","sofa"]
Instance 3 (Entity 2): List: ["sofa","wii"]
Instance 4 (Entity 3): List: ["music","otherString"]; 
```

实体 4 的 db 表条目应该是：
ID 字符串
1 hi
2 hello
3 music
4 tv
5 sofa
6 wii
7 otherString

我得到的是：
ID 字符串
1 hi
2 hello
3 音乐
4 电视 5 hi 6 沙发
7 沙发 8 wii
9 音乐
10 otherString

数据重复。当我尝试使用 @Id 注释提供字段字符串时，当我尝试保存实体 1,2 或 3 的实例及其列表中已经存在的字符串时，它会发送实体 4 的重复条目错误并执行不保存实体 1,2 或 3。

我该如何正确注释呢？

我的一些代码：

实体 1,2 或 3（在这部分代码中它们都是相同的）：

```
@Entity
 public class Entity1 {
      private List<Entity4> entity4List;

       @OneToMany(targetEntity=Entity4.class,cascade =CascadeType.ALL)
        public List<Entity4> getEntity4List() {
         return entity4List;
       }
    } 
```

实体 4：

```
@Entity
 public class Entity4 {

    private long id;
      private String stringn;

      @Id
      @GeneratedValue
       public long getId() {
        return id;
       }
     } 
```

还有我保存实体 1,2 或 3 的休眠代码：

```
public void addEntity1(ArrayList<String> list){
List<Entity4> L = new ArrayList<Entity4>();
for(String s:list)
{
    L.add(new Entity4(s));
 }
  Entity1 e=new Entity1(L);
   Session session = sf.getCurrentSession();
       session.beginTransaction();
    session.save(e);
     session.getTransaction().commit();
 } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-23T06:23:19.663

如果 Entity4 的数据字段应该是唯一的，那么您应该对数据库中的相应列具有唯一约束。

为了确保您不会在代码中创建重复的 Entity4 实例，您应该

*   在数据库中搜索具有此数据字段的 Entity4 实例
*   如果它已经存在，则将其添加到Entity1（或2，或3）中的列表中
*   如果不存在，则新建一个并将其添加到 Entity1（或 2，或 3）中的列表中

请注意，如果 entity4 存在，您可能仍然有两个线程同时检查，并让这两个线程同时创建一个新线程。由于数据库中的唯一约束，这将导致其中一个线程出现异常。

# php - 如何使用正则表达式将 srt 文件插入 mysql？

> ID：11166113
> 
> 赞同：1
> 
> 时间：2012-06-23T01:35:58.337
> 
> 标签：php, regex

我有一个 SRT 文件目录，格式为：

```
8
00:00:45,879 --> 00:00:50,680
- Oh! Just leave me in the car with the window open a crack.
- That's the plan.

9
00:00:50,784 --> 00:00:54,117
I think it's nice we're doing something
Maggie will enjoy for once.

10
00:00:54,220 --> 00:00:58,350
Besides, I'm sure Storytown Village
is also fun for everyone... 
```

我正在尝试将某些值输入 MySQL 数据库，但我完全不知道如何使用正则表达式和 php 来做到这一点。

我想将第一次（即 00:00:50）放入“时间”，并将与该时间相关的任何文本行放入“文本”。

如果有更简单的方法可以做到这一点，我什至不能 100% 确定正则表达式是否可行？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-23T01:43:24.300

你的文本中有很多分隔符，所以我不会使用正则表达式。这是使用字符串操作的解决方案：

```
$lines = explode( "\n", $str);

for( $i = 0, $ii = count( $lines); $i < $ii; $i += 5) {
    $num = trim( $lines[ $i ]);

    list( $line2a, $line2b) = explode( ' --> ', $lines[ $i + 1]);
    list( $time1, $val1) = explode( ',', $line2a);
    list( $time2, $val2) = explode( ',', $line2b);

    $text1 = $lines[ $i + 2];
    $text2 = $lines[ $i + 3];

    echo "$num $time1 $val1 $time2 $val2\n$text1\n$text2\n\n";
} 
```

请参阅[演示](http://viper-7.com/vFcZed)以查看哪些变量分配给文件中的哪些值。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-23T02:01:48.537

这种模式会起作用：

```
$pattern = '/([\d,:]+) --> [\d,:]+\n(.*\n.*)[^\n\n]/m';
$string = "
8
00:00:45,879 --> 00:00:50,680
- Oh! Just leave me in the car with the window open a crack.
- That's the plan.

9
00:00:50,784 --> 00:00:54,117
I think it's nice we're doing something
Maggie will enjoy for once.

10
00:00:54,220 --> 00:00:58,350
Besides, I'm sure Storytown Village
is also fun for everyone..."; //Your File Contents Here

preg_match_all($pattern, $string, $matches);
print_r($matches); 
```

这将导致：

```
Array
(
[0] => Array
    (
        [0] => 00:00:45,879 --> 00:00:50,680 
```

- 哦！把我留在车里，车窗开裂。- 这就是计划。[1] => 00:00:50,784 --> 00:00:54,117 我觉得很高兴我们正在做一些 Maggie 会喜欢的事情。[2] => 00:00:54,220 --> 00:00:58,350 此外，我相信 Storytown Village 对每个人来说也很有趣......）

```
[1] => Array
    (
        [0] => 00:00:45,879
        [1] => 00:00:50,784
        [2] => 00:00:54,220
    )

[2] => Array
    (
        [0] => - Oh! Just leave me in the car with the window open a crack.
 - That's the plan
        [1] => I think it's nice we're doing something
Maggie will enjoy for once
        [2] => Besides, I'm sure Storytown Village
is also fun for everyone..
    )

) 
```

更新：

```
foreach($matches[1] as $i => $data){
    $time = $data;
    $message = $matches[2][$i];
    mysqli_query("INSERT INTO Table (time,message) VALUES ('{$time}', '{$message}')");
} 
```

# jquery - 点击时展开 YouTube 视频，例如 Facebook

> ID：11166121
> 
> 赞同：4
> 
> 时间：2012-06-23T01:38:45.727
> 
> 标签：jquery, youtube

我有一个网站，里面有很多遵循这种格式的 YouTube 视频的缩略图：

```
<iframe width="250" height="141" src="http://www.youtube.com/embed/<VIDEOID>" frameborder="0" allowfullscreen ></iframe> 
```

我想要发生的是，当您单击播放视频时，播放器在开始播放之前会变为 500x500 的大小。它需要对这个集合中的任何视频执行此操作。

这与当有人点击 Facebook 上的视频时发生的情况相同，它会变大然后开始播放。

使用 jQuery 或其他方法执行此操作的任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-23T02:20:04.190

Facebook 开始时没有显示框架；他们显示了一个顶部带有“播放”按钮的图像：

![https://fbexternal-a.akamaihd.net/safe_image.php?d=AQD6a6UECdMO9RsC&url=http%3A%2F%2Fi4.ytimg.com%2Fvi%2FsWwNTSj2Cy0%2Fmqdefault.jpg](../Images/99a8efec23823526fb8f212162a5fa24.png)

（缩小）加

[![https://s-static.ak.fbcdn.net/rsrc.php/v2/yG/r/Gj2ad6O09TZ.png](../Images/88a2a5a9f2c72b66d40ddbd01d250501.png)](https://i.stack.imgur.com/LsVMk.png)

等于

![https://dl-web.dropbox.com/u/113308/so/fb_movie.png](../Images/1d78cd1fe828d231bc1fae593585fbb5.png)

当您单击此图像时，图像（和周围的标记）将替换为`iframe`.

由于图像的加载速度比 Flash 播放器快，因此即使页面上有许多此类缩略图，也可以快速加载页面。

[编辑] 这是一个[工作示例](https://jsfiddle.net/BinaryMuse/5BKYZ/4/)。

# .net - 使用 .NET 4 System.ServiceProcess.ServiceBase 将 Ninject v2 升级到 v3

> ID：11166122
> 
> 赞同：1
> 
> 时间：2012-06-23T01:39:05.090
> 
> 标签：.net, .net-4.0, ninject, ninject.web.mvc, ninject-3

我正在尝试使用 Ninject v3 测试托管在 .NET4 Windows 服务 ( `System.ServiceProcess.ServiceBase`) 中的 Web 服务。

我创建`MyServerModule : NinjectModule`，并在其中`Load()`根据`app.config`设置有条件地将我的接口绑定到运行时对象。

在`ServiceBase.OnStart()`中，初始化步骤是：首先，`StandardKernel`基于实例创建一个新的`MyServerModule`，并将其与 Ninject 容器相关联。接下来，`NinjectServiceHost`基于我的服务类创建一个实例，并打开服务主机开始监听。

在 Ninject v2 中，代码为：

```
IKernel kernel = new StandardKernel(new MyServerModule());
KernelContainer.Kernel = kernel; 
NinjectServiceHost serviceHost = new NinjectServiceHost(typeof(MyService));
serviceHost.Open(); 
```

但是，在 Ninject v3 中，`KernelContainer`不再存在。此外，`NinjectServiceHost()`现在接受子类化的服务器工厂`IServiceBehavior`。

如何在 Ninject v3 中执行类似的初始化步骤？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-15T16:54:26.707

我在 Windows 服务中运行多个自托管 WCF 服务时遇到了类似问题。在初始化每个 NinjectServiceHost 时，我最终将`kernel.Get<IServiceBehavior>()`其用作第一个参数。

您的示例可能如下所示：

```
IKernel kernel = new StandardKernel(new MyServerModule());
NinjectServiceHost serviceHost = new NinjectServiceHost( kernel.Get<IServiceBehavior>(), typeof(MyService));
serviceHost.Open(); 
```

# hadoop - 从 CDH4 jar 文件构建 Hadoop Ecplise 库

> ID：11166125
> 
> 赞同：1
> 
> 时间：2012-06-23T01:39:21.347
> 
> 标签：hadoop

我正在尝试构建一个包含在 Eclipse 中构建 map/reduce 作业所需的所有 jar 文件的 Hadoop 库。

在 Ubuntu 上安装 Hadoop 时，我需要哪些 .jar 文件以及从 CDH4 的单节点安装的哪些文件夹？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-23T18:46:59.313

[假设您已经从https://ccp.cloudera.com/display/SUPPORT/CDH4+Downloadable+Tarballs](https://ccp.cloudera.com/display/SUPPORT/CDH4+Downloadable+Tarballs)下载了 CDH4 tarball 发行版

1.  解压压缩包
2.  在解压后的目录中找到`build.properties`文件：

    `hadoop-2.0.0-cdh4.0.0/src/hadoop-mapreduce-project/src/contrib/eclipse-plugin`

3.  为您的 Eclipse 安装目录添加一个属性到此文件：

    `eclipse.home=/opt/eclipse/jee-indigo-SR2`

4.  最后`ant`从`hadoop-2.0.0-cdh4.0.0/src/hadoop-mapreduce-project`目录运行构建jar

您现在将在`hadoop-2.0.0-cdh4.0.0/src/hadoop-mapreduce-project/build/contrib/eclipse-plugin/`文件夹中有一个 jar

为了最终回答您的问题，依赖 jars 现在位于：

*   `hadoop-2.0.0-cdh4.0.0/src/hadoop-mapreduce-project/build/contrib/eclipse-plugin/`

如果您想要列表，要非常详细，请参阅此[pastebin](http://pastebin.com/QFcKaFhQ)

# php - 在页面上显示特定类别的帖子

> ID：11166126
> 
> 赞同：1
> 
> 时间：2012-06-23T01:39:28.863
> 
> 标签：php, wordpress

我只想在“博客”页面上显示特定的帖子类别，您可以在此处查看：http: [//dev.n8geeks.com/blog](http://dev.n8geeks.com/blog)

从字面上尝试了显然有助于此的每个代码版本，它给我留下了完全不同的样式或缺失的部分，例如没有日期或摘录。

目前，它（自然地）显示所有类别 - 如何在格式保持当前外观的同时显示特定类别？我只是想让它看起来和你在那里看到的完全一样，除了只显示一个特定的帖子类别。

我的第二个问题是我的“视频”页面使用下面的代码仅显示此特定类别的帖子，但是它使用与“博客”页面相同的模板部分（例如 content_single），这很好，但我'已经编辑了 content_single 页面文件，以使其看起来像我想要的那样（即显示一个带有花哨框的缩略图，但我不希望在视频帖子上出现这种情况）。

```
<?php $my_query = new WP_Query('category_name=videos&showposts=1'); ?>
<?php while ($my_query->have_posts()) : 
  $my_query->the_post(); ?>
  <a href="<?php the_permalink() ?>" title="<?php the_title(); ?>"><?php the_title(); ?></a><br />

  <?php the_content(); ?>

<?php endwhile; ?> 
```

所以，我基本上只想在视频页面上显示视频帖子类别，但没有你点击帖子名称时看到的框（如这里所示：http: [//dev.n8geeks.com/how-to-识别自闭症的早期迹象/](http://dev.n8geeks.com/how-to-recognize-early-signs-of-autism/)） - 因此我想使用不同的模板部分。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-23T02:00:28.687

要更改博客页面上的默认循环，请在 `get_header();`.

```
global $query_string;
query_posts( $query_string . '&category_name=videos' ); 
```

如果您没有定义模板，请复制`index.php`并重命名它，`home.php`然后按照上面的说明进行操作。

# sql - 在访问控制列表中的查找中按名称查询记录（在 sql 和 korma 中）

> ID：11166131
> 
> 赞同：1
> 
> 时间：2012-06-23T01:41:16.650
> 
> 标签：sql, postgresql, clojure, acl, korma

我是 sql 的新手，我想在这里遵循这个例子：http: [//net.tutsplus.com/tutorials/php/a-better-login-system/](http://net.tutsplus.com/tutorials/php/a-better-login-system/)

所以问题的要点是，

1.  有些`permissions`允许访问资源
2.  有`roles`可以有多个`permissions`
3.  有`users`可能有多个`roles`和多个`permissions`

db 表如下所示：

`permission` `role` `user` `role_permissions` `user_roles`和`user_permissions`

这是创建表的代码：

```
CREATE TABLE "permission" (
    "id" SERIAL PRIMARY KEY,
    "permission_key" VARCHAR(32) NOT NULL UNIQUE,
    "permission_name" VARCHAR(32) NOT NULL);

CREATE TABLE "role" (
    "id" SERIAL PRIMARY KEY,
    "role_name" varchar(32) NOT NULL);

CREATE TABLE "role_permissions" (
    "id" SERIAL PRIMARY KEY,
    "role_id" INTEGER NOT NULL,
    "permission_id" INTEGER  NOT NULL,
    "value"  BOOLEAN NOT NULL DEFAULT FALSE,
    "created_date" DATE NOT NULL, 
    UNIQUE ("role_id","permission_id"));

CREATE TABLE "user" (
    "id" SERIAL PRIMARY KEY,
    "username" VARCHAR(32) UNIQUE);

CREATE TABLE "user_permissions" (
    "id" SERIAL PRIMARY KEY,
    "user_id" INTEGER NOT NULL,
    "permission_id" INTEGER  NOT NULL,
    "value"  BOOLEAN NOT NULL DEFAULT FALSE,
    "created_date" DATE NOT NULL, 
    UNIQUE ("user_id","permission_id"));

CREATE TABLE "user_roles" (
    "id" SERIAL PRIMARY KEY,
    "user_id" INTEGER NOT NULL,
    "role_id" INTEGER NOT NULL,
    "created_date" DATE NOT NULL, 
    UNIQUE ("user_id", "role_id")); 
```

## 我的问题是：

我希望能够在 sql 语句中编写以下内容：

1.  “找到我所有`PERMISSIONS`可用`ROLE`的`NAME`东西`________`”

2.  “找到我所有`PERMISSIONS`可用`USER`的`NAME`东西`________`”

我知道我可以使用 ID 来匹配所有内容，但我想改用名称，因为我认为“找到用户 x 的所有权限”对我来说更有意义

另外，关于第二个问题，请注意用户可以通过两种方式获得权限：

```
User > Role > Permission
User > Permission 
```

为简洁起见，我更愿意在单个语句中获得结果。

另外，如果有人知道如何将其转换为[Korma](http://sqlkorma.com/docs#entities)查询，我将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-23T17:13:28.287

我不得不做出一些选择。如果同时存在用户权限和角色权限，则适用用户权限。我用zuser和zrole替换了用户和角色，因为它们是postgres中的保留字，我不喜欢引用。该查询目前的形式不是很东方，但它似乎有效。数据是虚构的。

```
DROP SCHEMA tmp CASCADE;
CREATE SCHEMA tmp ;
SET search_path='tmp';

CREATE TABLE permission
    ( id SERIAL PRIMARY KEY
    , permission_key VARCHAR(32) NOT NULL UNIQUE
    , permission_name VARCHAR(32) NOT NULL
    );
INSERT INTO permission(id,permission_key, permission_name) VALUES
 (1, 'Eat', 'Eat' ) , (2, 'Drink', 'Drink' )
 ,(3, 'Shit', 'Shit' ) , (4, 'Urinate', 'Urinate' )
    ;

CREATE TABLE zrole
    ( id SERIAL PRIMARY KEY
    , role_name varchar(32) NOT NULL
    );
INSERT INTO zrole(id, role_name) VALUES
  (1, 'Manager'), (2, 'Employee'), (3, 'Client') , (4, 'Visitor')
    ;

CREATE TABLE zuser
    ( id SERIAL PRIMARY KEY
    , username VARCHAR(32) UNIQUE
    );
INSERT INTO zuser(id, username) VALUES
  (1, 'Jan Kees de Jager'), (2, 'Wildplasser'), (3, 'Joop') , (4, 'Mina')
    ;

CREATE TABLE role_permissions
    ( id SERIAL PRIMARY KEY
    , role_id INTEGER NOT NULL REFERENCES zrole(id)
    , permission_id INTEGER  NOT NULL REFERENCES permission(id)
    , created_date DATE NOT NULL
    , value  BOOLEAN NOT NULL DEFAULT FALSE
    , UNIQUE (role_id,permission_id)
    );
INSERT INTO role_permissions( id, role_id, permission_id, created_date, value) VALUES
 (1,1,1, '2012-01-01', True )
,(2,1,2, '2012-01-01', False )
,(3,2,2, '2012-01-01', True )
,(4,2,3, '2012-01-01', False )
,(5,2,4, '2012-01-01', True )
,(6,3,2, '2012-01-01', True )
,(7,3,3, '2012-01-01', True )
,(8,3,4, '2012-01-01', True )
,(9,4,2, '2012-01-01', True )
,(10,4,3, '2012-01-01', True )
,(11,4,4, '2012-01-01', True )
    ;
CREATE TABLE user_permissions
    ( id SERIAL PRIMARY KEY
    , user_id INTEGER NOT NULL REFERENCES zuser(id)
    , permission_id INTEGER  NOT NULL REFERENCES permission(id)
    , created_date DATE NOT NULL
    , value  BOOLEAN NOT NULL DEFAULT FALSE
    , UNIQUE (user_id,permission_id)
    );

INSERT INTO user_permissions( id, user_id, permission_id, created_date, value) VALUES
 (1,1,1, '2012-01-01', False )
,(2,1,2, '2012-01-01', False )
,(3,2,2, '2012-01-01', True )
,(4,3,2, '2012-01-01', True )
,(5,4,1, '2012-01-01', True )
    ;

CREATE TABLE user_roles
    ( id SERIAL PRIMARY KEY
    , user_id INTEGER NOT NULL REFERENCES zuser(id)
    , role_id INTEGER NOT NULL REFERENCES zrole(id)
    , created_date DATE NOT NULL
    , UNIQUE (user_id, role_id)
    );

INSERT INTO user_roles (id, user_id, role_id, created_date) VALUES
 (1,1,1, '2010-01-01' )
,(2,2,2, '2010-01-01' )
,(3,3,4, '2010-01-01' )
,(4,4,3, '2010-01-01' )
-- uncomment the next line to add a duplicate role
-- ,(5,2,4, '2010-01-01' )

    ;

WITH lutser AS (
    SELECT up.user_id AS user_id
    , up.permission_id AS permission_id
    , up.value AS uval
    FROM user_permissions up
    )
, roler AS (
    SELECT
    ur.user_id AS user_id
    , rp.permission_id AS permission_id
    , rp.value AS rval
    FROM user_roles ur
    JOIN role_permissions rp ON rp.role_id = ur.role_id
    )
SELECT us.username
    , pe.permission_name
    , pe.id AS permission_id
    , lu.uval AS uval
    , ro.rval AS rval
    , COALESCE(lu.uval , ro.rval) AS tval
FROM lutser lu
FULL JOIN roler ro ON ro.user_id = lu.user_id
        AND ro.permission_id = lu.permission_id
JOIN zuser us ON us.id = COALESCE(lu.user_id ,ro.user_id)
JOIN permission pe ON pe.id = COALESCE(ro.permission_id , lu.permission_id)
    ; 
```

结果：

```
 username      | permission_name | permission_id | uval | rval | tval 
-------------------+-----------------+---------------+------+------+------
 Jan Kees de Jager | Eat             |             1 | f    | t    | f
 Jan Kees de Jager | Drink           |             2 | f    | f    | f
 Wildplasser       | Drink           |             2 | t    | t    | t
 Wildplasser       | Shit            |             3 |      | f    | f
 Wildplasser       | Urinate         |             4 |      | t    | t
 Joop              | Drink           |             2 | t    | t    | t
 Joop              | Shit            |             3 |      | t    | t
 Joop              | Urinate         |             4 |      | t    | t
 Mina              | Eat             |             1 | t    |      | t
 Mina              | Drink           |             2 |      | t    | t
 Mina              | Shit            |             3 |      | t    | t
 Mina              | Urinate         |             4 |      | t    | t
(12 rows) 
```

顺便说一句：上面的查询仍然不正确。如果用户属于多个角色，则查询将为该用户生成多行。需要将 distinct/max() 添加到角色子查询。

更新：为了解决每个人的重复角色问题，我创建了这个双嵌套 CTE：

```
WITH lutser AS (
    WITH aggr AS (
        WITH rope AS (
            SELECT DISTINCT
            ur.user_id AS user_id
            , rp.permission_id AS permission_id
            , rp.value AS value
            FROM user_roles ur
            JOIN role_permissions rp ON rp.role_id = ur.role_id
            GROUP BY ur.user_id , rp.permission_id , rp.value
            )
        SELECT user_id,permission_id, value
        FROM rope yes
        WHERE yes.value = True
        UNION ALL
        SELECT user_id,permission_id, value
        FROM rope nono
        WHERE nono.value = False
        AND NOT EXISTS (SELECT * FROM rope nx
                WHERE nx.user_id= nono.user_id
                AND nx.permission_id= nono.permission_id
                AND nx.value = True
                )
        )
    SELECT COALESCE(up.user_id , ag.user_id) AS user_id
    , COALESCE(up.permission_id , ag.permission_id) AS permission_id
    , up.value AS uval
    , ag.value AS rval
    FROM user_permissions up
    FULL JOIN aggr ag ON ag.user_id = up.user_id AND ag.permission_id = up.permission_id
    )
SELECT us.username
    , pe.permission_name
    , lu.uval AS uval
    , lu.rval AS rval
    , COALESCE(lu.uval , lu.rval) AS tval
FROM lutser lu
JOIN zuser us ON us.id = lu.user_id
JOIN permission pe ON pe.id = lu.permission_id
    ; 
```

`,(5,2,4, '2010-01-01' )`可以通过在 user_role 表中添加/取消注释数据行来显示其功能。再次，我必须做出选择：如果一个用户存在两个角色，且真值冲突，则`True`一个获胜。我认为查询可以简化/美化，但至少现在可以正常工作。

# windows-phone-7 - 在哪里可以获得 WP7 应用程序的评分、评论和排名的汇总视图？

> ID：11166132
> 
> 赞同：0
> 
> 时间：2012-06-23T01:41:38.500
> 
> 标签：windows-phone-7, windows-phone

您使用什么服务或工具来跟踪市场上的 Windows Phone 7 应用程序（随着时间的推移排名，所有市场的评论）？这可能不是提出这个问题的最佳论坛。但是，由于某些人必须为 WP 开发应用程序，我相信有人知道。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-23T02:42:27.673

从[这里](http://www.hanselman.com/blog/FromConceptToCodeIn6HoursShippingMyFirstWindowsPhoneApp.aspx)：

[http://wp7reviews.tomverhoeff.com/](http://wp7reviews.tomverhoeff.com/)

[http://www.wpdashboard.net/](http://www.wpdashboard.net/)（不工作）

我认为这是新的：[http](http://wpdwebsite.apphb.com/) ://wpdwebsite.apphb.com/ - 该页面上“立即获取”的链接不起作用，也许它现在已关闭。如果以后有问题，我会更新这个。

# ruby-on-rails - Rails 活动记录关联

> ID：11166134
> 
> 赞同：0
> 
> 时间：2012-06-23T01:41:44.913
> 
> 标签：ruby-on-rails, associations, has-many, belongs-to, has-one

我一直在阅读和重新阅读 Rails 协会指南：

[http://guides.rubyonrails.org/association_basics.html](http://guides.rubyonrails.org/association_basics.html)

这很接近但不完全相同：

[Ruby on Rails 活动记录关联](https://stackoverflow.com/questions/8771551/ruby-on-rails-active-record-associations)

我不确定如何设置以下场景。

事件的状态为挂起、打开或关闭。

我认为这很简单，只需：

```
event has_one status
status belongs_to event 
```

但这确实不是一对一的关系，因为一个状态可以属于许多事件。

所以我想我会做类似的事情：

```
status has_many events
event belongs_to status 
```

但这似乎很有趣，因为状态不拥有事件。一个事件拥有一个状态，对吧？

我曾尝试使用枚举但没有状态模型。但这变得很棘手，因为 ActiveRecord 似乎并不真正支持枚举。我还认为，如果有人想扩展状态选项的数量，例如添加“等待批准”或其他内容，拥有一个单独的模型可能会很好。

这篇文章表明我的后一种设置是可以的，即使它读起来很有趣：

[非常简单的 Rails Active-Record 关联问题](https://stackoverflow.com/questions/6789459/really-easy-rails-active-record-associations-question)

但我只是想知道我是否不知道有更好的 Ruby/Rails 方法来处理这个简单的场景。

提前致谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-23T02:29:42.657

这样做作为一个活动的记录关联是矫枉过正的。想想看，创建一个完整的表只是为了在其中存储 3 个永远不会改变的值？

你真正需要的是一个枚举。但当然，ruby 没有枚举。

幸运的是，你可以伪造它。

```
module StatusCodes
  pending = 0
  open = 1
  closed = 2
end 
```

然后你可以做这样的事情

```
if @event.status == StatusCodes::open
  # do something
end 
```

这是一个更简单的解决方案，您的代码保持非常可读。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-23T02:31:56.867

忽略你脑海中的那个声音：你做得很好。哪个模型真正重要的`belongs_to`是外键的存储位置。在这个例子中很清楚，外键应该存储在`Event`模型中，这意味着它应该`belongs_to :status`.

不过，我也同意其他帖子 - 如果您有少量且固定数量的潜在`Status`记录，请考虑创建一个常量哈希来存储它们，而不是为它们创建整个数据库表。

为什么不添加一`status`列`Event`（作为整数），并有这样的东西：

```
class Event < ActiveRecord::Base
  STATUS_TYPES = {1 => "active", 2 => "inactive", 3 => "closed"}

  def status
    STATUS_TYPES[self[:status]]
  end

  def status=(new_status)
    new_status = STATUS_TYPES.invert[new_status] if new_status.class == "String"
    self[:status] = new_status
  end
end 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-23T03:07:31.767

您可能要考虑使用[state_machine](https://github.com/pluginaweek/state_machine)和一个简单的字符串列来实现状态，而不是使用关联或手动枚举。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-23T01:54:24.413

你错了。

如果你这样做

```
Event
 has_one :status

Status
 belongs_to :event 
```

Rails 将确保它是一对一的关联，因此状态将只属于一个事件

我很确定如果您尝试将事件状态分配给不同的事件会发生这种情况

```
e1 = Event.first
status = e1.status

e2 = Event.new
e2.status = status
e2.save

Event.first.status #=> nil 
```

# c++ - C++ 从空格分隔的文本文件中填充字符串向量

> ID：11166136
> 
> 赞同：1
> 
> 时间：2012-06-23T01:42:08.963
> 
> 标签：c++

我有一个空格分隔的文本文件，我需要从中提取单个单词来填充`vector<string>`.

我试过玩弄`strtok`，但我知道这不起作用，因为`strtok`返回一个`char pointer`. 有什么方法可以从文件中提取单词并填充`string vector`它们？谢谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-23T01:53:15.310

有一些“更花哨”的方法，但在我看来，对于初学者来说，以下是最容易理解的（并且作为变化的基础很有用）：

```
if (std::ifstream input(filename))
{
    std::vector<std::string> words;
    std::string word;
    while (input >> word)
        words.push_back(word);
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-23T01:49:10.673

考虑使用`ifstream`读取文件。

然后您可以使用`>> operator`将下一个单词移动到`string`.

# qt - 自定义 QtTreePropertyBrowser 上的分支图标？

> ID：11166137
> 
> 赞同：1
> 
> 时间：2012-06-23T01:42:52.320
> 
> 标签：qt, branch, stylesheet

我继承了一个代码项目，并负责使用 Qt 的样式表重新设计 GUI。

我设计了一个子类`QtTreePropertyBrowser`来更改背景颜色/字体颜色，但我一生都无法弄清楚如何更改分支指示器图标的外观。它们在新的深色背景上几乎不可见，如下所示：

![在此处输入图像描述](../Images/87045a3930207e5c2ec8002543624ba0.png)

做一些谷歌搜索，我找到[了这个例子](http://doc.qt.nokia.com/4.7-snapshot/stylesheet-examples.html#customizing-qtreeview)。

但从我到目前为止的实验来看，它没有奏效。阅读文档，似乎`QtTreePropertyBrowser`继承自`QTreeView`，但我不知道为什么它不起作用。有什么见解吗？

# php - 刷新 PHP 服务器缓存

> ID：11166141
> 
> 赞同：0
> 
> 时间：2012-06-23T01:43:53.580
> 
> 标签：php, caching, server-side-includes

我在我维护的网站的目录中有一个贝宝监听器，例如 \paypal\listener.php

我将它设置为写入 mysql 数据库，但它正在写入我的开发环境而不是我的生产环境。

这很奇怪，因为我有一个模型，例如 DAO.php，它控制对数据库的所有访问。在其他目录如\directory2\page.php page.php 成功写入生产环境。

问题：对我来说，这意味着 listener.php 包含旧版本的 DAO.php（这是一个内部设置为开发环境的类）在其他目录中，尽管包含此文件时包含新版本。

一个 PHP 实现是否有可能将文件的不同版本提供给不同的脚本？？？如果是这样，我如何刷新导致这种情况发生的服务器缓存？

我已经尝试修改并重新保存每个相关文件，以使服务器认为它们是新的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-25T18:42:00.220

重新启动服务器可能会解决这个问题，但这不是一个选项，服务器是使用应用程序池的 Microsoft IIS 机器，刷新应用程序池解决了这个问题。

# c++ - C++ 库编程错误：ld：未找到架构 x86_64 的符号

> ID：11166153
> 
> 赞同：0
> 
> 时间：2012-06-23T01:48:19.003
> 
> 标签：c++, gcc, compiler-construction, compilation

我开始编写一个库，并决定做一个测试，但我在问题标题中得到了错误（Mac OSX，gcc-4.7.1）：

tlib.cpp：

```
template <typename T>
T dobra(const T& valor){
  return valor*2;
} 
```

tlib.h：

```
template <typename T>
T dobra(const T& valor); 
```

测试2.cpp：

```
#include "tlib.h"
#include <iostream>

using namespace std;

int main (int argc, char const *argv[])
{ 
  double b = dobra<double>(10);
  cout << b << endl;
  return 0;
} 
```

**编译**：

```
no25-89:CPROP canesin$ g++ -dynamiclib -Wall -std=c++11 tlib.cpp -o libdobra.so
no25-89:CPROP canesin$ g++ test2.cpp -Wall -std=c++11 -o test2 -L. -ldobra
Undefined symbols for architecture x86_64:
  "double dobra<double>(double const&)", referenced from:
      _main in cctLJGqf.o
ld: symbol(s) not found for architecture x86_64
collect2: error: ld returned 1 exit status
no25-89:CPROP canesin$ 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-23T02:07:44.967

C++ 中的一个事实是，您必须在使用模板的每个编译单元中包含模板的完整实现，或者将自己限制在特定的实例中。

实际上，这意味着您可以：

1.  将 tlib.cpp 中的内容放入 tlib.h。这是最常见的解决方案。
2.  限制自己只使用 (say) `dobra<double>`，并将显式实例化放入 tlib.cpp：

    `template double dobra<double>(const double& valor);`

# python - 如何创建 Django 图片库

> ID：11166156
> 
> 赞同：10
> 
> 时间：2012-06-23T01:50:04.577
> 
> 标签：python, django, image, gallery, portfolio

我正在寻找使用 Django 创建一个投资组合。我曾尝试使用 ImageField，但它只允许我上传和替换 1 张照片。

我是 Python 和 Django 编程的新手。我将如何创建一个模型来上传多个图像并将它们显示在画廊中？谢谢。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-06-23T07:10:51.220

您还可以使用[photologue](http://code.google.com/p/django-photologue/)、[imagekit](https://github.com/jdriscoll/django-imagekit)等应用程序来简化一些任务。

您也可以使用[Model Formsets上传多张图片](https://docs.djangoproject.com/en/dev/topics/forms/modelforms/#model-formsets)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-23T01:56:36.857

查看[https://web.archive.org/web/20120621233904/http://lightbird.net/dbe/photo.html](https://web.archive.org/web/20120621233904/http://lightbird.net/dbe/photo.html) 这将解释基础知识。

如果您想通过管理员添加更多图片，您可以执行以下操作：

```
class ChoiceInline(admin.StackedInline):
    model = Image # or what ever your models name is
    extra = 5 # or how ever many you want to add at a time 
```

您还应该阅读 Django 教程：[https ://docs.djangoproject.com/en/dev/intro/tutorial01/](https://docs.djangoproject.com/en/dev/intro/tutorial01/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2021-09-05T13:55:07.913

你可以试试[django-galleryfield](https://github.com/dzhuang/django-galleryfield)。顺便说一句，我是包的作者。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2021-03-15T06:27:22.520

只需将以下代码放入您的图库模板中。

```
{% for image in images %}
                {% if forloop.first %}
                    <div class="row ">
                {% endif %}
                <div class="col-lg-4 col-md-4 col-12" >
                    <div class="text-center mt-2">
                        <img src="{{image.image.url}}"height="70%" width="70%" class="img-thumbnail" alt="...">
                    </div>
                </div>
                {% if forloop.counter|divisibleby:3 %}
                    </div>
                    <div class=row>
                {% endif %}
                {% if forloop.last %}
                        </div>
                {% endif %}
{% endfor %} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2021-01-13T22:26:56.080

这是一个教程，如果您的 Web 应用程序有无法访问管理面板的用户，该教程将引导您使用管理面板和表单集[构建一个图像库。](https://engineertodeveloper.com/how-to-build-a-photo-gallery-with-django-part-1/)

# regex - 什么正则表达式将匹配没有 3 级的域名？

> ID：11166157
> 
> 赞同：0
> 
> 时间：2012-06-23T01:50:11.923
> 
> 标签：regex

什么是匹配这些域的最有效的正则表达式，而不必指定任何要忽略的规则？

示例匹配：

```
domain.com
test.com
example.net
company.org 
```

示例忽略：

```
dev.domain.com
m.domain.com
www.domain.com 
```

任何顶级域都是可能的。本质上，我试图确保域没有第三级。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-23T01:54:28.023

要将域与任何 TLD 匹配，请使用以下命令：

`^[^.\s]+\.[^.\s]+$`

# javascript - Jquery Tab 菜单滚动箭头

> ID：11166163
> 
> 赞同：1
> 
> 时间：2012-06-23T01:51:14.447
> 
> 标签：javascript, jquery, jquery-ui

我是 jquery/js 的新手。我在制作滚动标签菜单时遇到了困难。这是我在[JSFIDDLE](http://jsfiddle.net/apRrq/14/)中的示例选项卡。我的目标是只显示 5 个选项卡并隐藏其余选项卡。因此，如果用户想要查看隐藏的选项卡，他们将单击侧箭头。有没有更好的方法来做到这一点，或者谁能告诉我这个机制如何与我的例子一起工作？

![滚动选项卡菜单](../Images/2b7e7aefb47d44a60376ab5ffcc6e909.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-23T01:55:24.097

有许多可用的插件：

这是一个例子

演示：http: [//jsfiddle.net/LtmA5/1/](http://jsfiddle.net/LtmA5/1/)

来源：

[http://jquery.aamirafridi.com/jst/](http://jquery.aamirafridi.com/jst/)

# html - CSS边框折叠不起作用 我有一个不可能的时间border-collapse来为我工作。我正在使用的页面中有一个表格。该表有 2 列，一列用于标签，另一列用于数据。有时没有要显示的数据，但我仍然需要渲染表格行和标签列，因为我有一个可能需要将数据写入数据列的 JQuery 脚本。换句话说，无论有没有数据，我都需要将表格行渲染为占位符。如果没有数据，我希望该行折叠。 在下面的 html 中，visibility:hidden 问问题 问问题 2012-06-23T01:51:29.920 13683 次 This question shows research effort; it is useful and clear 0 This question does not show any research effort; it is unclear or not useful Bookmark this question. Show activity on this post. 我有一个不可能的时间border-collapse来为我工作。我正在使用的页面中有一个表格。该表有 2 列，一列用于标签，另一列用于数据。有时没有要显示的数据，但我仍然需要渲染表格行和标签列，因为我有一个可能需要将数据写入数据列的 JQuery 脚本。换句话说，无论有没有数据，我都需要将表格行渲染为占位符。如果没有数据，我希望该行折叠。 在下面的 html 中，visibility:hidden因为我看不到标签“条件：”，所以它正在工作，但该行不会折叠。我尝试在 FireFox 13、Safari 5 和 IE 8 中查看它。所有三个都显示相同的问题 - 即使它不显示任何内容，该行也不会崩溃。 #data { font-size: 95%; } #data table { border-collapse: collapse; margin-top: 15px; margin-bottom: 15px; } #data table td { padding-left: 5px; }....

| Condition: |  |

....我还需要做些什么来实现这一点？我希望它是跨浏览器兼容的。我正在尝试支持 IE7 及更高版本。我猜有人会因为我首先使用一张桌子而给我下地狱......;） &nbps;如果单元格中没有数据，请尝试使用 and或类似的东西 就像是：

| Condition: |   |

htmlcss 4 2 回答 2 This answer is useful 5 可见性属性确定给定元素是否可见（visibility="visible|hidden"）。但是，当可见性设置为隐藏时，被隐藏的元素仍然在页面布局中占据相同的位置。 显示 VS 可见性 用来display:none;隐藏和display:block;显示

| Condition: |  |

注意：border-collapse:collapse;用于为容器和包含的指定边框并且希望边框显示一次的情况。 于 2012-06-23T02:08:26.887 回答 This answer is useful 0 &nbps;如果单元格中没有数据，请尝试使用 and或类似的东西 就像是：

| Condition: |   |

于 2012-06-23T01:54:57.330 回答 Related 2 java - 在 Java 中编码透明动画 gif 3 objective-c - 如何创建多维数组？ 3 java - 将 udp 数据保存到数组中 2 asp.net-mvc-3 - 在图像 asp.net MVC3 之间切换 2 asp.net - ASP.NET Web 应用程序部署 - 具有域/服务器名称访问权限 2 perl - 如何从 Perl 模块创建具有 C 或 C++ 链接的静态库？ 3 python - 对列表的一列求和（跟进） 5 javascript - 在javascript中的第一个数字之前获取一个子字符串 1 css - 为什么使用 p:nth-child(3n+0) css 伪类从第二个元素开始？ 3 c# - 使用 Monotouch 进 行跨平台代码重用 - 但是 app.config 呢？ Reference php × 1429865 c/c++ × 756500 nginx × 49975 mongodb × 159057 mybatis × 3233 anaconda × 13410 pycharm × 14671 python × 1902243 vscode × 56040 docker × 110988 github × 49000 flask × 49129 ffmpeg × 24037 jmeter × 16910 matplotlib × 63493 bootstrap × 54641

> ID：11166165
> 
> 赞同：0
> 
> 时间：
> 
> 标签：html, css

我有一个不可能的时间`border-collapse`来为我工作。我正在使用的页面中有一个表格。该表有 2 列，一列用于标签，另一列用于数据。有时没有要显示的数据，但我仍然需要渲染表格行和标签列，因为我有一个可能需要将数据写入数据列的 JQuery 脚本。换句话说，无论有没有数据，我都需要将表格行渲染为占位符。如果没有数据，我希望该行折叠。

在下面的 html 中，`visibility:hidden`因为我看不到标签“条件：”，所以它正在工作，但该行不会折叠。我尝试在 FireFox 13、Safari 5 和 IE 8 中查看它。所有三个都显示相同的问题 - 即使它不显示任何内容，该行也不会崩溃。

```
#data
{
    font-size: 95%;
}
#data table
{
    border-collapse: collapse;
    margin-top: 15px;
    margin-bottom: 15px;
}
#data table td
{
    padding-left: 5px;
}

<div id="data">

....

    <table>
        <tr style="visibility:hidden;">
            <td><div class="datalabel">Condition:</div></td>
            <td class="datainfo"></td>
        </tr>
    </table>

....

</div> 
```

我还需要做些什么来实现这一点？我希望它是跨浏览器兼容的。我正在尝试支持 IE7 及更高版本。我猜有人会因为我首先使用一张桌子而给我下地狱......;）

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-23T02:08:26.887

> 可见性属性确定给定元素是否可见（visibility="visible|hidden"）。但是，当可见性设置为隐藏时，被隐藏的元素仍然在页面布局中占据相同的位置。

[显示 VS 可见性](http://www.devx.com/tips/Tip/13638)

用来`display:none;`隐藏和`display:block;`显示

```
 <table style="border-collapse:collapse;">
        <tr style="display:none;">
            <td><div class="datalabel">Condition:</div></td>
            <td class="datainfo"></td>
        </tr>
    </table> 
```

**注意**：`border-collapse:collapse;`用于为容器和包含的指定边框并且希望边框显示一次的情况。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-23T01:54:57.330

```
<table border="0" cellpading="0" cellspacing="0"> 
```

`&nbps;`如果单元格中没有数据，请尝试使用 and或类似的东西

就像是：

```
<table border="0" cellpading="0" cellspacing="0">
    <tr style="visibility:hidden;">
        <td><div class="datalabel">Condition:</div></td>
        <td class="datainfo">&nbsp;</td>
    </tr>
</table> 
```

# perl - 使用 Perl 修改比特流

> ID：11166171
> 
> 赞同：2
> 
> 时间：2012-06-23T01:54:17.353
> 
> 标签：perl, pdf, bit-manipulation, lzw, bitstream

在 Perl 中修改比特后，如何将比特重新打包到比特流中？

我目前正在使用以下内容来解包：

```
my $bits = 5;
my $code = '';

foreach my $i (reverse 0..$bits-1) {
    $code <<= 1;
    $code  |= vec($data,$i,1);
} 
```

例如，输出可能是 16。

**编辑：**

这个问题与GIF图像的数据块有关。

我要做的是填充 LZW 代码以匹配 PDF`LZWDecode`方法所需的长度。

`LZWDecode`需要 8 位图像，其中`<Clear>`代码为 256，`<End>`代码为 257（[PDF 参考](http://partners.adobe.com/public/developer/en/pdf/PDFReference13.pdf)，第 44 页。）

对于 5 位图像，代码 0-31 映射到图像全局颜色表中的颜色，分别`<Clear>`为 32 和`<End>`33。

所以我需要重新打包比特流，使代码 0-31 保持不变，但 32+ 偏移 256-32。

我正在为 Windows 使用 ActiveState Perl。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-26T18:00:25.310

```
# Unpack from 8 bit fields.
my @vals = unpack('C*', $bytes);

... transform @vals into 5 bit values here ...

# Pack to 5 bit fields.
my $bits = join '', map substr(pack('B*', $val), -5), @vals;
$bits .= '0' x (-length($bits) % 8);  # Pad with zeros to byte boundary
$bytes = pack('B*', $bits); 
```

# c++ - 如何管理固定数组中的对象？

> ID：11166174
> 
> 赞同：0
> 
> 时间：2012-06-23T01:54:45.783
> 
> 标签：c++, arrays

这如果是为了我的家庭作业。

我有一个名为的类`Student`，它需要 3 个参数（`id`, `name`, `class`），我想将每个学生存储在一个名为的数组中`Roster`（它只能有 7 个学生）。

用户将提供输入以添加或删除学生。因此，我必须通过创建或删除学生来管理数组。因此，如果用户指定学生 ID，我必须将他删除为数组。

我尝试使用固定数组，但我正在努力使其工作。有没有更好的方法来实现这一点？

我不能使用一个`vector`或任何 STL 容器。

学生.h

```
#ifndef STUDENT_H
#define STUDENT_H
#include <iostream>
#include <string>

static const int SIZE = 7;

class Student {  
        private:
        int student_id;
        std::string name;
        std::string classification;

        public:
        Student(int, std::string, std::string);     // constructor; initialize the list to be empty
        ~Student();
        void print();

    };

#endif 
```

学生.cpp

```
#include <iostream>
#include <string>

#include "student.h"

#define PROMPT "class> "
using namespace std;

Student::Student(int a, string b, string c){
    student_id = a;
    name = b;
    classification = c;
}

Student::~Student(){
    //delete Student
}

void Student::print(){
    cout<<"Enrolled:"<<endl;
    cout<<student_id<<"-"<<name<<"-"<<classification<<endl;
} 
```

主文件

```
#include <iostream>
#include <string>
//#include <sstream>
#include "student.h"

#define PROMPT "class> "
using namespace std;

//**** Implement Error Handling ****\\

enum errorType {
    UNKNOWN_ERROR,
    INPUT_ERROR,
    HANDLER,
    NUM_ERRORS
};

// error messages

string errorMessage[NUM_ERRORS] = {
    "Unknown Error\n",
    "Input Error\n",
};

// error handler

void handleError(errorType err) {
    if(err > 0 && err < NUM_ERRORS)
        cout<< "Error: "<< errorMessage[err];
    else cout<< "Error: "<< errorMessage[UNKNOWN_ERROR];
}

//**** END Error Handling ****\\

void enroll(Student newStudent){
        cout<<"test";
        Student roster[SIZE];
     for(int i=0;i<SIZE;i++){
        newStudent->roster[i];
     }
}

void handleInput() {
    int id; string n, c;

    cin>>id>>n>>c; 
    Student newStudent(id,n,c);
    newStudent.print(); 
    enroll(newStudent);
    //cout<<"hello3"<<endl;
    return;
}

int main() {
    //Student newStudent;   /* <-- why doesn't this work?!*/
    string input = "";
    bool finished = false;

    cout<<PROMPT; // prompt the user
    while(!finished) {
        if(input!="") cout<<PROMPT;
        cin>>input;
        if(input=="enroll") {
            cout<<PROMPT<<"Enroll student:"<<endl;
            handleInput();
        }
        else if(input=="drop") {
            cout<<PROMPT<<"Enter ID:"<<endl;
        }
        else if(input=="roster") {
            cout<<"This will print formatted list of students"<<endl;
        }
        else if(input=="quit") {
            finished=true;
        }
        else handleError(errorType(1));
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-23T02:47:10.610

由于这是一项家庭作业，我想指出你犯的一些错误，因为首先了解你在做什么很重要。

您绝不能巧合地编程，而是试图准确地理解正在发生的事情。通过这样做，您将变得越来越好，并且答案应该到位。

# 你做了什么

因此，根据您的描述，数组是固定的。因此，像您一样使用常量 (SIZE) 是一个好主意。

但是，正如我们在下面看到的，在函数中声明了一个大小为 SIZE 的数组。通过这样做，您的数组就像一个临时变量，因为它的范围在函数内部。每次调用该函数时，都会再次声明该数组，然后在退出时删除该数组。所以应该在外面声明。

```
void enroll(Student newStudent)
{
     cout<<"test";
     Student roster[SIZE]; // Here 'roster' will be available only inside the function.

     for(int i=0;i<SIZE;i++)
     {
        newStudent->roster[i]; // Here there is few mistakes see my explanation below*
     }
} 
```

如果我们看这部分：

```
newStudent->roster[i]; 
```

首先，箭头'->' 与指针一起使用。点“。” 与对象一起使用。在这两种情况下，它都做同样的事情，访问 Student 的公共成员。

自从你通过

```
void enroll(Student newStudent) 
```

你应该使用 ' **。**' 反而。

```
newStudent.SomeOfYourMembers; 
```

如果参数是指向学生的指针

```
void enroll(Student *newStudent) 
```

然后，您必须像以前一样使用箭头“->”。

回到原来的说法：

```
newStudent->roster[i]; 
```

这意味着，您希望访问学生对象 (newStudent) 内位置“i”处的“名册”数组。正如您在代码中看到的那样， roster 没有在 Student 内部声明（并且不应该因为您想要一个 Student 数组），所以这是行不通的。

# 指导方针

正如我所提到的，您的数组应该在函数之外，因此在更高的范围内。

然后，如果你需要一个学生数组，基本上，'roster[i]' 会让你访问学生'i'。因此，如果你想打印学生，你会做这样的事情：

```
roster[i].print(); 
```

这将是有效的，因为 'print()' 被定义为公共的。

为了将学生存储在数组中，您可以执行以下操作：

```
roster[i] = new Student(0 /* id*/, "name", "classification"); 
```

但是不要忘记，每次使用 new 的时候，都要用 delete 来平衡它。如果您在循环中创建这样的学生，则必须以相同的方式清理它们：

```
for(int i = 0; i < SIZE; ++i)
{
    delete roster[i];
} 
```

祝你好运！

如果有什么我可以澄清的，请不要犹豫。我希望这有帮助！

## 编辑：回复您的第一条评论。

### 关于名册排列

不，创建班级名册不是强制性的，您可以在 main.cpp 中声明名册。

关键概念是通过定义

```
Student roster[SIZE]; 
```

该数组将包含 Student 类型的对象。

roster[i].print() 的意思是您正在打印该数组的一个学生，实际上是位于“i”位置的那个。

### 关于 print() 函数

面向对象语言的强大之处在于，每个对象都将具有相同的 print() 函数。因此，您不需要将数组转换为字符串。

但是，如果您想要打印出（或返回）字符串，您可以在 print() 函数中编写代码来完成这项工作。

这样做的好处是，如果您需要进一步以某种方式更改数组，您的 print() 函数将始终有效。

### 关于删除

当您在包含对象的数组上执行类似操作时：

```
delete roster[i]; 
```

它将删除位置“i”处的对象。因此，将调用该学生“i”的析构函数。如果您的对象 Student 包含其他对象，则必须在析构函数中删除它们。

### 进一步通知

由于 ID 是您存储到字符串中的输入，因此您必须将 ID 转换为与 student_id 相同的类型，即 int。然后，您始终可以为每个学生编写一个循环并检查他们的 ID 以删除正确的 ID。

关于容器，固定数组可能不是完成这项工作的最佳选择。您可能想查看[LinkedList 概念](http://en.wikipedia.org/wiki/Linked_list)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-23T02:00:00.637

成为成员函数没有多大意义`enroll`，所以我将名册包装到一个类中以自动清理我的指针。

```
#include <cstddef>

struct Student {};

class Roster
{
private:
  static const size_t size = 7; 
  // non-copyable
  Roster(const Roster&);
  Roster& operator=(const Roster&);
public:
  Roster() {
    for(unsigned i = 0; i < size; ++i) {
      roster_[i] = NULL;
    }
  }

  ~Roster() {
    for(unsigned i = 0; i < size; ++i) {
      delete roster_[i];
    }
  }

  // enroll by copy
  bool enroll(const Student& s) {
    for(unsigned i = 0; i < size; ++i) {
      if(roster_[i] == NULL) {
        roster_[i] = new Student(s);
        return true;
      }
    }
    // out of space
    return false;
  }

  // enroll by taking ownership
  bool enroll(Student* s) {
    for(unsigned i = 0; i < size; ++i) {
      if(roster_[i] == NULL) {
        roster_[i] = s;
        return true;
      }
    }
    // out of space
    return false;
  }

private:
  // data
  Student* roster_[size];
};

int main()
{
  Roster r;
  Student s;
  r.enroll(s);
  Student* sp = new Student();
  r.enroll(sp);
  return 0;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-23T02:03:50.230

那这个呢？

```
Student * roster[2];
roster[0] = new Student(5,"first","2A");
roster[1] = new Student(2,"Second","5B"); 
```

附言：

Enroll 和 Size 不应该是学生班级的成员。理想情况下，打印应该被外部化，而应该添加一个 ToString 函数。

您应该改用内联构造函数初始化：

```
Student(int a,string b,string c):id(a),name(b),class(c){} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-23T02:33:53.707

您已将关键字`class`用作字符串类型的变量名。你不应该那样做。它甚至可以这样编译吗？

`enroll`应该有两个参数：`void enroll( Student enrollee, Student Roster[])`. 您可能应该更改 to 的名称，`Roster`因为`roster`它不是一个类，并且通常类名大写。

如果您的数组只有 7 个学生，那么您可以使用一些哨兵值将当前学生标记为无效学生。也许`id`将要`-1`标记这一点。这基本上意味着您需要一些方法来跟踪您仍然可以使用阵列中的哪些点。如果您不这样做，那么声明一个学生数组将为您提供一个带有垃圾成员变量的学生数组。您将无法分辨哪些学生是真实的学生，哪些只是新入学时的占位符。我将创建一个默认构造函数`Student`并初始化其成员变量，如下所示：

```
id=-1;
name="";
name_of_class=""; 
```

我更改了你的名字`string class`以避免混淆。

毕竟，注册看起来像这样：

```
void Student::enroll( Student enrolee, Student roster[]){

    //search through roster to check for the first student with an
    //id of -1
    //if there are no students with id of -1, produce an error message
    //that the class is full

    //overwrite the student with id of -1  with the id, name, and
    //name_of_class of enrollee

} 
```

虽然我不确定到底`string class`是为了什么。它是否存储学生所在的班级？他们像大一、大二一样在校学习吗？

但是，如果您想使用名册的动态分配，那就另当别论了，但是您说它永远只有七名学生。

# python - 从 Python 模块制作“快捷方式”

> ID：11166176
> 
> 赞同：0
> 
> 时间：2012-06-23T01:55:06.897
> 
> 标签：python, packages

假设`vtk`我的 Python 站点包中有模块，并且我想从具有自己的 Python 发行版的应用程序中访问该模块。

我尝试了几件事，例如：

```
import sys
sys.path.append("C:\Python27\Lib\site-packages")
sys.path.append("C:\Python27\Lib\site-packages\vtk")
import vtk
lut = vtk.vtkLookupTable() 
```

但它无法正确加载模块：

```
AttributeError: 'module' object has no attribute 'vtkLookupTable' 
```

如果我从默认的 Python 解释器做同样的事情，一切都很好。

现在我想`vtk`用简单的解析路径在这个应用程序站点包中制作一个包装器`__init__.py`，这样当我这样做时，`import vtk`它有望加载正确的东西，但我没有使用 Python 包的经验来尝试使这项工作

简而言之，如何通过创建与引用包和简单`__init__.py`文件同名的文件夹来将任意文件夹中的模块包装在 Python 站点包中？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-23T02:12:46.167

删除这些行：

```
sys.path.append("C:\Python27\Lib\site-packages")
sys.path.append("C:\Python27\Lib\site-packages\vtk") 
```

将`site-packages`已经在您的 python 路径上。在该 python 路径中添加一个包/文件夹（尤其是在第一级），只会弄乱您的导入。这个`vtk`包的结构是怎样的？

```
/path/to/site-packages/
                      vtk/
                          __init__.py
                          vtk.py 
```

在这种情况下，要访问 vtk 中的函数：

```
from vtk import vtk
lut = vtk.vtkLookupTable() 
```

这一切都取决于文件夹的排列方式。你也可以这样做：

```
import vtk
lut = vtk.vtk.vtkLookupTable() 
```

不要仅仅因为你不了解 python 导入是如何工作的，就试图通过创建代理模块来破解 python 导入。错误很明显。无论您导入什么，该属性`vtkLookupTable`都不存在。你输入了错误的东西。修理它。

您应该非常非常非常少需要`sys.path`手动操作。当你必须这样做时，你应该知道这是正确的理由——不要解决你不完全理解的事情。

当我第一次开始使用 python 时，我遇到了 python 路径的问题。这可能令人沮丧，但了解它的工作原理是必要的。可以帮助您的是以下内容：

```
import vtk
print dir(vtk) 
```

这将打印 vtk 的属性，因此在您认为导入正确的东西的情况下，您可以准确地探索包或模块中的内容。

重新阅读您的问题后，这似乎是您正在谈论的不同 python 安装。答案是将此包安装到其他 python 安装中，或者通过将文件夹复制到应用程序的根级别来将此包作为顶级导入。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-23T03:06:46.090

`"C:\Python27\Lib\site-packages"`已经在您的 python 路径上。所以附加路径是不必要的。消除：

```
import sys
sys.path.append("C:\Python27\Lib\site-packages")
sys.path.append("C:\Python27\Lib\site-packages\vtk") 
```

在 中创建一个名为 ' `vtk\`'的新文件夹，然后创建一个名为in`"C:\Python27\Lib\site-packages"`的新 python 文件并将您自己的模块放在此目录中。使用：`__init__.py``"C:\Python27\Lib\site-packages\vtk"``vtk.py`

```
import vtk 
```

或者

```
from vtk import vtk 
```

使用您自己的模块。

# objective-c - 从字符串objective-c中检测类型

> ID：11166183
> 
> 赞同：1
> 
> 时间：2012-06-23T01:56:44.887
> 
> 标签：objective-c, ios, types, type-conversion

从 Objective-c 中的字符串中检测数据类型的最佳方法是什么？

我正在导入 CSV 文件，但每个值只是一个字符串。

例如，我如何判断“2.0”是一个数字，“London”应该被视为一个类别，而“Monday 2nd June”或“2/6/2012”是一个日期。

在将数据传递到下游之前，我需要以某种方式测试数据类型，并对使用哪种类型充满信心。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-23T02:04:36.357

正则表达式是我唯一能想到的，但如果你在 mac 或 iphone 上，你可以试试 RegexKitLite

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-23T02:26:32.160

----------更新--------- 代替我之前的建议，试试这个：

```
NSString *csvString = @"333";
NSString *charSet = @"abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ.,";
NSScanner *typeScanner = [NSScanner scannerWithString: csvString];
[typeScanner setCharactersToBeSkipped: [NSCharacterSet characterSetWithCharactersInString:charSet]];
NSString *checkString = [[NSString alloc] init];
[typeScanner scanString:csvString intoString:&checkString];

if([csvString length] == [checkString length]){

    //the string "csvString" is an integer
} 
```

要检查其他类型（浮点数、字符串等），请将此行（检查`int`类型）`NSString *charSet = @"abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ.,";`更改为`NSString *charSet = @"abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";`（检查`float`类型）或`NSString *charSet = @"1234567890";`（检查仅由字母组成的字符串）。

--------初始发布-----

你可以这样做：

```
NSString *stringToTest = @"123";
NSCharacterSet *intValueSet = [NSCharacterSet decimalDigitCharacterSet];
NSArray *test = [stringToTest componentsSeparatedByCharactersInSet:intValueSet];

if ([test count]==[stringToTest length]+1){

    NSLog(@"It's an int!");
}
else {
    NSLog(@"It's not an int");
} 
```

这适用于没有小数点或逗号作为千位分隔符的数字，例如“8493”和“883292837”。我已经对其进行了测试，并且可以正常工作。

希望这为您提供了一个开始！我将尝试弄清楚如何测试带有小数点和字符串的数字。

就像安德鲁说的那样，正则表达式可能对此有好处，但它们有点复杂。

# python - 我在 python 中使用此代码出现“无效语法”错误。帮我找补救办法？

> ID：11166184
> 
> 赞同：2
> 
> 时间：2012-06-23T01:57:14.253
> 
> 标签：python

在`def(pentagon):`块中，我命名了一个变量“ `first`”。但是，这会导致“无效语法”错误。怎么了？我尝试将它命名为其他名称，从单个字母到小写/大写字母的组合，如“preArea”。

```
def display():
    print('This program will tell you the area some shapes')
    print('You can choose between...')
    print('1\. rectangle    2\. triangle')
    print('3\. circle       4\. pentagon')
    print('5\. rhombus      6\. trapezoid')

def shape():
    shape = int(input('What shape do you choose?'))
    if shape == 1: rectangle()
    elif shape == 2: triangle()
    elif shape == 3: circle()
    elif shape == 4: pentagon()
    elif shape == 5: rhombus()
    elif shape == 6: trapezoid()
    else:
        print('ERROR: select 1 2 3 4 5 or 6')
        shape()

def rectangle():
    l = int(input('What is the length?'))
    w = int(input('What is the width?'))
    areaR=l*w
    print('The area is...')
    print(areaR)

def triangle():
    b = int(input('What is the base?'))
    h = int(input('What is the height?'))
    first=b*h
    areaT=.5*first
    print('The area is...')
    print(areaT)

def circle():
    r = int(input('What is the radius?'))
    preCircle = r**2
    areaC = 3.14*preCircle
    print('The area is...')
    print(areaC)

def pentagon():
    s = int(input('What is the side length')
    first = s**2
    areaP = 1.72*first
    print('The area is...')
    print(areaP)

def rhombus():
    b = int(input('What is the base?')
    h = int(input('What is the height?')
    areaR = b*h
    print('The area is...')
    print(areaR)

def trapezoid():
    baseOne = int(input('What is the first base?')
    baseTwo = int(input('What is the second base?')
    h = int(input('What is the height')
    first = baseOne*baseTwo
    second = first/2
    areaT = second*h
    print('The area is...')
    print(areaT)

if __name__=="__main__":
    display() 
    shape() 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-23T01:58:57.903

这一行：

```
s = int(input('What is the side length') 
```

缺少一个结束括号。编程需要注意很多细节...

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-23T01:59:39.570

```
 s = int(input('What is the side length') 
```

你错过了一个结束`)`

事实上，我注意到您在 中的其他`input`语句`rhombus`，`pentagon`并且`trapezoid` 有类似的问题，您可能复制了代码:)

您可能想要使用一个可以帮助您匹配左括号和右括号的编辑器。这将有助于避免此类错误。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-23T01:59:36.710

缺少右括号：`s = int(input('What is the side length'))`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-23T02:54:06.300

这些行中缺少右括号：

在函数五边形（）

```
s = int(input('What is the side length') 
```

在函数菱形（）

```
b = int(input('What is the base?')
h = int(input('What is the height?') 
```

在函数梯形（）

```
baseOne = int(input('What is the first base?')
baseTwo = int(input('What is the second base?')
h = int(input('What is the height') 
```

# fancybox - Fancybox 2 加载页面，流过浏览器而不滚动

> ID：11166188
> 
> 赞同：1
> 
> 时间：2012-06-23T01:58:08.043
> 
> 标签：fancybox, fancybox-2

我正在通过fancybox 和AJAX 动态加载页面。一切都很好，除非动态加载的页面对屏幕来说太高。它只会溢出屏幕底部。

我正在使用..

```
function dynamic_page(){        
    var url = "#ajax url here#";
    $.fancybox.showLoading();
    $.post(url, function(res){
        $.fancybox.open(res,{
            afterClose : function (){
                $("#remove_val").val(0);
            }
        });

        $.fancybox.update();
    });
} 
```

当用户点击页面时，它会再次动态重新加载，保持原来fancybox的宽度和高度：

```
$.post(url, function(res){
            if(res){
                $("#page_load_here").html(res);
            } 
```

如何根据动态加载页面的高度调整或重新调整花式框的大小？

所有帮助将不胜感激

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-23T02:14:54.680

修复它： $.fancybox.update();

# javascript - 使用 match() 将长文本拆分为单独句子的正则表达式

> ID：11166195
> 
> 赞同：0
> 
> 时间：2012-06-23T02:00:16.043
> 
> 标签：javascript, jquery, regex, pattern-matching, match

这是用户写一些文本的文本区域。我在里面写了一个例子。

```
<textarea id="text">First sentence. Second sentence? Third sentence!
Fourth sentence.

Fifth sentence
</textarea> 
```

**正则表达式中已经考虑的要求**

*   分隔符包含在数组项中
*   最后一句不一定需要分隔符（它可以以任何字符结尾）
*   如果一个句子有多个分隔符，则将其包含在数组项中。示例：**第二句话？！？**应该是 [...,"第二句?!?",...]

**缺少要求（我需要帮助）<<**

每个新行应由一个空数组项表示。如果应用了正则表达式，这应该是响应：

```
["First sentence.", "Second sentence?", "Third sentence!", "", "Fourth sentence.", "", "", "Fifth sentence"] 
```

相反，我收到了这个：

```
["First sentence.", "Second sentence?", "Third sentence!", "Fourth sentence.", "Fifth sentence"] 
```

这是正则表达式和匹配调用：

```
var tregex = /[^\r\n.!?]+(:?(:?\r\n|[\r\n]|[.!?])+|$)/gi;
var sentences = $('#text').val().match(tregex).map($.trim); 
```

有任何想法吗？谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-23T02:07:09.703

我简化了很多，要么匹配行尾（新行），要么匹配一个句子后跟标点符号：

```
var tregex = /\n|([^\r\n.!?]+([.!?]+|$))/gim; 
```

我也相信`m`多行的标志很重要

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-23T02:26:44.567

您可以使用以下正则表达式：

```
/((?:\S[^\.\?\!]*)[\.\?\!]*)/g 
```

让我们分解一下：

“ **g** ”是全局匹配的标志，表示在第一次出现后保持匹配

从内到外，**(?:)**是一个分隔符，它允许我们对表达式进行分组，但从输出中丢弃匹配的结果。我们正在匹配不包含句点、问号或感叹号的**\S （非空格）。**

你说你想保留这个标点符号，所以匹配**[.\?!]**之后的下一部分是一个包含这些相同标点符号的系列，因此它们包含在外部分隔符中。编辑：我为此添加了星号以包含任意数量的标点符号，或者在句末根本没有标点符号。

[使用http://www.pagecolumn.com/tool/regtest.htm](http://www.pagecolumn.com/tool/regtest.htm)或类似的 Javascript 正则表达式测试器检查匹配的组。

# ruby-on-rails - 如何创建可以重复复制但也可以编辑的数据库记录？

> ID：11166200
> 
> 赞同：0
> 
> 时间：2012-06-23T02:01:41.860
> 
> 标签：ruby-on-rails, ruby, forms

这是我在这里的第一篇文章，如果我不能说得足够具体，请见谅。我刚开始使用 ruby​​ on rails 并正在尝试为自己构建一个日志应用程序来跟踪锻炼。我希望能够创建一个包含无限量举重（卧推、腿部推举等）的锻炼，并且每个举重都需要若干组和多次重复。我希望用户能够添加创建一个由 8 次升降机组成的锻炼，然后能够重复复制它以记录每天修改组和代表的锻炼。我知道我需要一个锻炼模型，然后是一个举重模型，我想我只需要帮助来正确建立关联。同样，我可以更清楚地说明我正在尝试做什么，我没有那么多编程经验，但我正在弄清楚。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-23T02:18:46.103

也许你应该考虑三个模型：

*   `Lift`模型 - 每个练习一个（卧推、腿部推举、深蹲）。`has_and_belongs_to_many :workouts`
*   `Workout`模型 - 一种用于每种类型的锻炼。`has_and_belongs_to_many :lifts`.
*   `WorkoutExecution`模型 - 每次用户进行锻炼时使用一个。`belongs_to :user`和`belongs_to :workout`。

`User`（如果您允许用户登录并创建锻炼/注册锻炼的执行，您当然也需要一个模型）。

`WorkoutExecution`这样，用户可以提前创建一个锻炼（或者说，他们在他们的程序中有 3 个锻炼），然后通过创建记录在每次执行时注册该锻炼的执行。

对于您的第一个项目，这是一组相当复杂的关系！请务必阅读[有关关联的 Rails 指南，](http://guides.rubyonrails.org/association_basics.html)以帮助您了解它。

# python - GAE 简单请求处理程序只运行一次

> ID：11166212
> 
> 赞同：1
> 
> 时间：2012-06-23T02:04:38.540
> 
> 标签：python, google-app-engine, request, handler

再会！

[https://developers.google.com/appengine/docs/python/gettingstarted/helloworld](https://developers.google.com/appengine/docs/python/gettingstarted/helloworld)
这是我试图运行的hello world。

我可以看到

```
Hello, world!
Status: 500 
```

信息。但是在我刷新后它会变成“HTTP错误500”。
并且...似乎在我重新保存 app.yaml 或 helloworld.py 后，appengine 只向我显示了一次良好的结果

这是良好结果的跟踪

```
Traceback (most recent call last):
  File "C:\Program Files\Google\google_appengine\google\appengine\runtime\wsgi.py", line 187, in Handle
    handler = _config_handle.add_wsgi_middleware(self._LoadHandler())
  File "C:\Program Files\Google\google_appengine\google\appengine\runtime\wsgi.py", line 239, in _LoadHandler
    raise ImportError('%s has no attribute %s' % (handler, name))
ImportError: <module 'helloworld' from 'D:\work\[GAE] tests\helloworld\helloworld.pyc'> has no attribute app
INFO     2012-06-23 01:47:28,522 dev_appserver.py:2891] "GET /hello HTTP/1.1" 200 -
ERROR    2012-06-23 01:47:30,040 wsgi.py:189] 
```

这是错误 500 的跟踪

```
Traceback (most recent call last):
  File "C:\Program Files\Google\google_appengine\google\appengine\runtime\wsgi.py", line 187, in Handle
    handler = _config_handle.add_wsgi_middleware(self._LoadHandler())
  File "C:\Program Files\Google\google_appengine\google\appengine\runtime\wsgi.py", line 239, in _LoadHandler
    raise ImportError('%s has no attribute %s' % (handler, name))
ImportError: <module 'helloworld' from 'D:\work\[GAE] tests\helloworld\helloworld.pyc'> has no attribute app
INFO     2012-06-23 01:47:30,127 dev_appserver.py:2891] "GET /hello HTTP/1.1" 500 - 
```

这是我的 helloworld.py

```
print 'Content-Type: text/plain'
print ''
print 'Hello, world!' 
```

我的主要.py。（应用程序代替应用程序）

```
import webapp2

class hello(webapp2.RequestHandler):
    def get(self):
        self.response.out.write('normal hello')

app = webapp2.WSGIApplication([
    ('/', hello),
], debug = True) 
```

和 app.yaml

```
application: helloworld
version: 1
runtime: python27
api_version: 1
threadsafe: true

handlers:
- url: /favicon\.ico
  static_files: favicon.ico
  upload: favicon\.ico

- url: /hello
  script: helloworld.app

- url: /.*
  script: main.app

libraries:
- name: webapp2
  version: "2.5.1" 
```

任何线索是什么原因造成的？

问候，

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-23T03:12:49.857

您没有`helloworld.app`在 helloworld.py 模块中创建对象。

看线

```
app = webapp2.WSGIApplications([... 
```

在你的 main.py 文件中？`script: main.app`这将创建app.yaml 中的处理程序引用的 main.app 对象。

您在`helloworld.app`上面几行引用了一个对象；该对象不存在。App Engine 中的 Python 2.7 不支持在 2.5“Hello World”演示中使用的简单模块模型——没有 WSGI 处理程序，只有一个简单的脚本。

正如 presveva 所说，使用 2.7 入门指南可以减少混淆。

# php - 在函数中包含已经存在的变量

> ID：11166213
> 
> 赞同：-1
> 
> 时间：2012-06-23T02:04:57.350
> 
> 标签：php, function

我试图创建一个函数，它接受输入，确定其值，并从脚本中包含的现有数组中输出一个单词。问题是输出是空白的，我相信函数会忽略脚本中已经存在的变量，有没有办法改变这个，所以现有的变量不会被函数忽略？

这是功能：

由于多语言要求，单词需要来自数组。

```
function get_genre($id)
{
    if($id == "1"){
        $genre = $lang['277'];
    }
    if($id == "2"){
        $genre = $lang['278'];
    }
    if($id == "3"){
        $genre = $lang['279'];
    }
    if($id == "4"){
        $genre = $lang['280'];
    }
    if($id == "5"){
        $genre = $lang['281'];
    }
    if($id == "6"){
        $genre = $lang['282'];
    }
    if($id == "7"){
        $genre = $lang['283'];
    }
    if($id == "8"){
        $genre = $lang['284'];
    }
    if($id == "9"){
        $genre = $lang['285'];
    }
    if($id == "10"){
        $genre = $lang['286'];
    }
    if($id == "11"){
        $genre = $lang['287'];
    }
    if($id == "12"){
        $genre = $lang['288'];
    }
    if($id == "13"){
        $genre = $lang['289'];
    }
    if($id == "14"){
        $genre = $lang['290'];
    } 
    if($id == "15"){
        $genre = $lang['374'];
    }
    return $genre;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-23T02:15:00.353

```
function get_genre($id)
{
    global $lang;
    ....
} 
```

或者

```
function get_genre($id, $lang) //Must pass $lang array to function here
{

} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-23T02:15:08.973

```
function get_genre($id)
{
 global $lang;

if($id == "1"){
    $genre = $lang['277'];
}
if($id == "2"){
    $genre = $lang['278'];
}
if($id == "3"){
    $genre = $lang['279'];
}
if($id == "4"){
    $genre = $lang['280'];
}
if($id == "5"){
    $genre = $lang['281'];
}
if($id == "6"){
    $genre = $lang['282'];
}
if($id == "7"){
    $genre = $lang['283'];
}
if($id == "8"){
    $genre = $lang['284'];
}
if($id == "9"){
    $genre = $lang['285'];
}
if($id == "10"){
    $genre = $lang['286'];
}
if($id == "11"){
    $genre = $lang['287'];
}
if($id == "12"){
    $genre = $lang['288'];
}
if($id == "13"){
    $genre = $lang['289'];
}
if($id == "14"){
    $genre = $lang['290'];
} 
if($id == "15"){
    $genre = $lang['374'];
}
return $genre; 
```

}

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-06-23T02:14:42.420

虽然这并不理想，但您是否考虑过使用关联数组？

```
var $lookupArray = array();
$lookupArray["1"] = $lang['274'];
.... 
```

然后你可以这样称呼它：

```
function get_genre($id)
{            

   return(array_key_exists($id,$lookupArray)) ? $lookupArray[$id] : null;                      

} 
```

# android - PocketSphinx 在 Windows 上为 android 编译

> ID：11166220
> 
> 赞同：0
> 
> 时间：2012-06-23T02:07:45.093
> 
> 标签：android, voice-recognition, cmusphinx

我必须为 android 构建和运行 PocketSphinx 示例

我在 Windows 7 + Eclipse 中的 android 开发系统

我已经安装了 NDK 和 Cygwin 我的 Cygwin 现在没有 gcc 或 g++。你在 cygwin 中需要这些编译器吗？

我已经把这些模块——bison——make——automake——libiconv——libtool——python解释器

在上面。

我很困惑是否需要对 sphinxbase 和 pocketsphinx 执行以下步骤？按照建议[http://cmusphinx.sourceforge.net/2011/05/building-pocketsphinx-on-android/comment-page-2/#comments](http://cmusphinx.sourceforge.net/2011/05/building-pocketsphinx-on-android/comment-page-2/#comments)

./autogen.sh ./configure make make install

如果是这样，我需要在 cygwin 上使用 gcc 或 g++ 吗？

请指教，

谢谢，艾哈迈德

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-30T14:59:27.913

我在 Windows 上也遇到了本教程的一些问题，但现在我得到了它并写了一个小教程，也许它会有所帮助：

[https://sites.google.com/site/opiatefuchs/home/pocketsphinxandroiddemo](https://sites.google.com/site/opiatefuchs/home/pocketsphinxandroiddemo)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-26T06:34:37.657

您不再需要 NDK，您可以只编译原始源代码。有关更多信息，请参阅官方 CMUSphinx 教程

[http://cmusphinx.sourceforge.net/wiki/tutorialandroid](http://cmusphinx.sourceforge.net/wiki/tutorialandroid)

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2012-06-23T02:25:59.850

我使用 gcc，已经使用它参与了几个 NDK 项目。

# java - 在一个安静的帖子调用中部分反序列化一个 json 对象

> ID：11166224
> 
> 赞同：1
> 
> 时间：2012-06-23T02:08:29.100
> 
> 标签：java, json, spring, spring-mvc, jackson

我正在尝试在 springmvc 中获取一个方法来接受对象的部分 json 字符串，并让 jackson 自动为我反序列化它。我可以通过制作一个仅包含我想要的属性的临时对象来解决它，或者将其作为字符串传递并使用 Gson 为我反序列化它，但这些感觉很hacky。有没有办法告诉杰克逊怎么做？

这是控制器片段：

```
@RequestMapping(value = "/task", 
    method = RequestMethod.POST,
    consumes="application/json")
public @ResponseBody String postTask(@RequestBody Task task){
    if(task.getId() == null){
        task.setId(UUID.randomUUID());
    }
    if(task.getDate_entered() == 0){
        task.setDate_entered(System.currentTimeMillis());
    }
    TaskDao.addTask(task);
    return "success";
} 
```

而任务，一个基本的pojo：

```
@JsonSerialize(include=JsonSerialize.Inclusion.NON_NULL)
public class Task {
    private UUID id;
    private String name;
    private String description;
    private long date_entered;
    private long finish_by;

    public UUID getId() {
        return id;
    }
    public void setId(UUID id) {
        this.id = id;
    }
    // Rest of the getters and setters
} 
```

如果您无法通过我的其他与春季相关的问题来判断，那么我有点盲目，并且无法为这个问题找出正确的谷歌查询。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-23T05:28:03.640

您需要`@JsonIgnore`在方法（反序列化的 setter 和序列化的 getter 上）或字段上使用 jackson 的注释，您希望忽略序列化和/或反序列化。例如，在您的示例中，如果您不想序列化`description`，那么您可以这样做，

```
@JsonIgnore
public void setDescription(String description) {
        this.description = description;
 } 
```

你会看到，你不会`description`在转换后的模型中获得价值。

# c - 从 Cuda 传输大量可变内存

> ID：11166227
> 
> 赞同：4
> 
> 时间：2012-06-23T02:09:43.360
> 
> 标签：c, cuda

Cuda 很棒，我正在疯狂地使用它，但我没有充分发挥她的潜力，因为我在传输内存时遇到了问题，并且想知道是否有更好的方法来获取可变数量的内存。基本上我将 65535 项数组发送到 Cuda 中，Cuda 以大约 20,000 种不同的方式分析每个数据项，如果我的程序逻辑中有匹配项，那么它会保存一个 30 个 int 列表作为结果。想想我分析每个不同组合然后查看总数的逻辑，如果总数等于我正在寻找的数字，那么它会保存结果（这是每个分析项目的 30 int 列表）。

问题是 65535（数据数组中的块/项目）* 20000（每个项目测试的总组合）= 1,310,700,000。这意味着我需要创建一个该大小的数组来处理所有数据都将是正匹配的机会（这极不可能并且创建`int output[1310700000][30]`似乎对内存来说很疯狂）。我被迫使它更小并发送更少的块来处理，因为我不知道 Cuda 是否可以有效地写入链表或动态大小的列表（通过这种方法，它使用块将输出写入主机内存* number_of_different_way_tests）。

有一个更好的方法吗？Cuda 可以以某种方式写入不是从 blockid 派生的空闲内存吗？当我在 CPU 上测试这个过程时，只有不到 10% 的项目数组有一个正匹配，所以我每次向内核发送工作时都不太可能使用这么多内存。

ps 我在上面看，虽然它正是我在做的事情，如果它令人困惑，那么另一种思考方式（不完全是我在做什么，但足以理解问题）是我发送 20,000 个数组（那个每个包含 65,535 个项目）并将每个项目与其对等项添加到其他数组中，如果总数等于一个数字（比如 200-210），那么我想知道它添加的数字以获得匹配结果。如果数字范围很广，那么并非所有数字都匹配，但使用我的方法，我不得不 malloc 大量内存。我可以通过分配更少的内存来捕获结果吗？我目前的方法是尽可能多地使用 malloc，但我不得不运行更少的块，这不是有效的（我想一次运行尽可能多的块和线程，因为我喜欢 Cuda 组织和运行块的方式） .

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-22T20:14:29.303

正如 Per Roger Dahl 的最佳[答案](https://stackoverflow.com/questions/11148860/how-to-gather-solutions-from-threads-in-cuda)：您正在寻找的功能称为流压缩。

您可能确实需要提供一个数组，其中每个线程包含 4 个解决方案的空间，因为尝试以紧凑的形式直接存储结果可能会在线程之间创建如此多的依赖关系，以至于能够将更少的数据复制回所获得的性能主机因内核执行时间较长而丢失。例外情况是，如果几乎所有线程都找不到解决方案。在这种情况下，您也许可以使用原子操作来维护数组的索引。因此，对于找到的每个解决方案，您将其存储在索引处的数组中，然后使用原子操作来增加索引。我认为为此使用 atomicAdd() 是安全的。在存储结果之前，线程将使用 atomicAdd() 将索引增加一。atomicAdd() 返回旧值，

但是，考虑到更常见的情况，即有相当数量的结果，最好的解决方案是将压缩操作作为单独的步骤执行。一种方法是使用thrust::copy_if。有关更多背景信息，请参阅此问题。

# bash - RubyGems 如何修改 $PATH

> ID：11166228
> 
> 赞同：2
> 
> 时间：2012-06-23T02:09:56.120
> 
> 标签：bash, shell, rubygems, zsh

当您使用 bin 目录安装 gem 时，它会自动添加到 zsh 和 bash 中的 $PATH 中。rubygems 如何在不修改 bashrc、bash_profile 或任何其他 pre-shell 脚本的情况下解决这个问题？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-24T21:17:51.347

> **当您使用 bin 目录**安装 gem时，它会自动添加到 zsh 和 bash 中的 $PATH 中。

这个问题看起来好像`$PATH`是在安装 gem 时被操纵的。它不是。相反，gem 安装*在 上的某个位置`$PATH`*，这很常见。我相信（未经测试），当您安装`ruby`or`rubygems`时，`gem environment`变量`EXECUTABLE DIRECTORY`值（我的默认值是`/usr/bin`）将添加到 中`$PATH`，如果它不存在的话。但是，正如在 上`/usr/bin` *应该*`$PATH`那样，这是未经检验的猜想，我找不到支持该理论的文档。

在我的测试中（我能想到的第一个分发可执行文件的 gem） ，`rake`我`/usr/bin/rake`从`version 0.8.7`. `version 0.9.2.2`我`$PATH`没有被`sudo gem install rake`命令感动。

这是有道理的，因为 RubyGems 是一个版本化系统。它会自动处理 gem 版本，将最新版本的符号链接（或类似的 - 它可能是复制和覆盖）到您的`$PATH` *而不修改`$PATH`自身*。我认为这`/usr/bin/`是一个常见的`$PATH`位置。

我不确定 OP 在哪个平台上工作。以下内容至少与 OS X 有关。

`gem environment`：

```
 ...SNIP...

  - EXECUTABLE DIRECTORY: /usr/bin

  ...SNIP...

  - GEM PATHS:
     - /Library/Ruby/Gems/1.8
     - /Users/simont/.gem/ruby/1.8
     - /System/Library/Frameworks/Ruby.framework/Versions/1.8/usr/lib/ruby/gems/1.8 
```

因此，这`EXECUTABLE DIRECTORY`是我们将捆绑在`/bin`gems 中的可执行文件放置的地方，`GEM PATHS`也是我们放置 gem 本身的地方。我相当确定，如果您查看 .gem文件`GEM PATHS`，您*可以*找到同一个 gem 的多个版本，包括它们的`/bin`目录，但只有*最新*的可执行文件链接到`EXECUTABLE DIRECTORY`.

以问题中提到的方式“手动”编辑`$PATH`将取决于平台并且有些难以实现（例如，`bash`vs `zsh`vs启动文件， vs vs vs环境变量变化很大），并且也将是（在我看来）有点“粗鲁”。`tsch``Windows``OS X``Linux``$OTHER_OS`

# android - android 的文本编辑器 - 如何连接到其他应用程序

> ID：11166231
> 
> 赞同：-4
> 
> 时间：2012-06-23T02:10:25.007
> 
> 标签：android

请你指出我正确的方向吗？

基本上我想编写一个文本编辑器应用程序来满足我的个人需求（希望它专门处理一些键盘组合 - 如 shift + x 等）。

第一个问题 - 是如何实现文本编辑器本身 - 我知道有一个 TextView 类，我需要处理 OnPress 方法（或类似的方法）来覆盖输入（例如，如果用户按下 shift + X - 我会如“XXXX”附加到输入）。TextView 我应该从哪里开始或从哪里开始更好（同时对于 android 编程中的新手来说很简单）？

我的第二个问题是，一旦我实现了这样的应用程序 - 我如何将它挂钩/集成到/与其他应用程序 - 例如短信/电子邮件应用程序等。

如果您可以向我指出网络上的一些文章/源代码 - 将非常感激，因为它对我来说非常重要，确实如此。

干杯。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-23T11:12:04.727

> TextView 我应该从哪里开始

不完全是。

> 哪里更好

`EditText`通常用于编辑文本。`EditText`继承自`TextView`; 它的大部分行为都定义在`TextView`.

> 我如何将它与其他应用程序挂钩/集成到/与其他应用程序 - 例如短信/电子邮件应用程序等。

这意味着我们可以读懂您的想法并知道您所说的“挂钩/整合”是什么意思。

如果您的意思是“我如何用我的编辑器替换他们的编辑器？”，答案是：出于明显的隐私和安全原因，您不能。

> 伙计们，如果你不知道该怎么做——请不要试图把它隐藏在一个大词后面——它看起来很可悲。

t0mm13b 的第一条评论是准确的。

# math - d-ary堆的运行时间？

> ID：11166235
> 
> 赞同：2
> 
> 时间：2012-06-23T02:12:00.963
> 
> 标签：math, computer-science

d-Ary 堆的运行时间如何从 O(log [d] n) 简化为 O( (log n) / (log d))？

正确的简化是：log [d] n = log d * log n

除法简化是如何得出的？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-23T02:27:47.820

这使用公共恒等式在对数底之间进行转换：

```
log[x](z) = log[m](z) / log[m](x)
```

两边都乘以 log [m] (x)，得到：

```
log[m](z) = log[x](z) * log[m](x)
```

这相当于您网站问题中的答案。

更多信息可[在此处](http://mathforum.org/library/drmath/view/55568.html)获得。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-23T02:22:27.940

认为

```
x = log d (n)
```

等效地，我们有，

```
n = d x
```

然后

```
日志2 n = 日志2 (d x ) = x 日志2 (d)
```

除以 log [2] (d) 得到：

```
日志2 (n) / 日志2 (d) = x
```

所以

```
log 2 (n) / log 2 (d) = x = log d (n)
```

当然，假设`d`是固定的，那么 log [2] (d) 只是一个常数。所以

```
O（log d（n））= O（1 / log 2（d）* log 2（n））= O（log 2（n））
```

也就是说，就 Big-Oh 表示法而言，您可以将任何对数底（大于 1）更改为任何其他（此类）对数底。所以习惯上只是去掉基数并写 O( log(n) )

# c++ - 什么会导致罕见的 lchown() 失败：不允许操作

> ID：11166236
> 
> 赞同：1
> 
> 时间：2012-06-23T02:12:04.090
> 
> 标签：c++, symlink, nfs

我对 C++ 代码进行了测试，在大多数运行中都通过了，但在极少数情况下，由于在我的被测应用程序中调用 lchown() 而失败，出现 errno EPERM 和 strerror 失败：

```
Operation not permitted. 
```

我的应用程序中有问题的代码是这样的：

```
::lchown("pathnameToFile", uid_t(500), static_cast<unsigned>(-1)); // This line works
::lchown("pathnameToFile", static_cast<unsigned>(-1), gid_t(500)); // This fails rarely 
```

同样在失败的测试用例迭代中，先前尝试创建指向“pathnameToFile”的符号链接也未能在我的应用程序中创建它，但代码未检测到任何错误（以下返回0）：

```
::symlink("pathnameToFile", "linkToPathname"); 
```

我想这两件事是相关的。这是在 32 位 Centos 4 机器上运行的。

“pathnameToFile”存在于 NFS 挂载的分区上。正在创建的文件和指向它的链接和 lchown 之间是否存在某种竞争条件，因为 NFS 还没有反映它的存在？

然而，经过一段时间后，符号链接出现了，尽管 chown 仍然无效。

“pathnameToFile”位于具有权限的目录中：

```
drwxrwxr-x   2 me me   4096 Jun 22 17:33 .
-rw-rw-r--   1 me root   33 Jun 22 17:33 pathnameToFile
lrwxrwxrwx   1 me root    8 Jun 22 17:33 LinkToPathname -> pathnameToFile 
```

gid 500 是“me”的主要组，另一组是“wheel”。

```
> groups
me wheel 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-23T18:29:13.390

这是一个竞争条件，当 lchown 失败时添加一个短暂的睡眠并重试。

# .net - 从数据上下文中删除/删除表

> ID：11166237
> 
> 赞同：0
> 
> 时间：2012-06-23T02:12:20.783
> 
> 标签：.net, datacontext

我想在数据上下文中显示表/类的列表，选择几个并将它们从数据上下文中删除。我知道如何获取表列表，但是如何以编程方式从数据上下文中删除/删除它们？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-23T02:22:17.190

我不确定如何选择要删除的多个项目，但是如果您使用 LINQ 并通过查询选择它们，则可以使用以下代码：

```
var items = DataContext.Items.Where(item => item.ItemId == selectedId);
foreach(var item in items)
 DataContext.Items.DeleteObject(item); 
```

# android - 有没有办法在Android RelativeLayout中填充父母减去固定数字？

> ID：11166238
> 
> 赞同：35
> 
> 时间：2012-06-23T02:12:24.163
> 
> 标签：android, android-relativelayout, android-imagebutton, fill-parent

我有一个`ImageButton`我想填充它的父`RelativeLayout`容器的宽度，但减去一些`dp`，所以它有一些左右填充。我试过`fill_parent-10dp`了，但这会导致错误并且不会呈现。

* * *

## 回答 #1

> 赞同：46
> 
> 时间：2012-06-23T02:15:57.630

`android:layout_margin="10dp"`在 ImageButton 上放一个

```
android:layout_width="fill_parent"
android:layout_height="fill_parent" 
```

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2012-06-23T02:45:50.830

1.  使用 xml 属性`android:layout_marginLeft`指定视图左侧的额外空间。
2.  使用 xml 属性`android:layout_marginRight`指定视图右侧的额外空间。
3.  使用 xml 属性`android:layout_marginTop`指定视图顶部的额外空间。
4.  使用 xml 属性`android:layout_marginBottom`指定视图底部的额外空间。
5.  使用 xml 属性`android:layout_margin`指定视图左侧、顶部、右侧和底部的额外空间。

在您的情况下，您的 ImageButton 声明如下所示

```
<ImageButton
    android:id="@+id/button1"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:text="Button" 
    android:layout_marginLeft="15dp"
    android:layout_marginRight="15dp"
    android:src="@drawable/a" 
```

# django - 识别登录用户的后端提供者

> ID：11166240
> 
> 赞同：0
> 
> 时间：2012-06-23T02:12:47.780
> 
> 标签：django, django-socialauth

使用 django-social-auth，有没有一种很好的方法来找出登录用户的后端提供者？找到相应的 UserSocialAuth 对象应该是最好的方法吗？

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-27T19:11:18.193

默认情况下，最后一个登录提供程序使用密钥存储在会话中`social_auth_last_login_backend`，否则是的，检查`UserSocialAuth`实例是首选方式`user.social_auth.filter()`。

这两种方法可以通过以下方式组合：

```
user.social_auth.filter(provider=request.session['social_auth_last_login_backend']) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-13T07:34:27.443

在您看来，请尝试：

```
request.user.social_auth.values_list('provider') 
```

获取用户连接的后端列表。

# python - 应用引擎 NDB：如何访问属性的详细名称

> ID：11166242
> 
> 赞同：6
> 
> 时间：2012-06-23T02:13:17.020
> 
> 标签：python, google-app-engine, google-cloud-datastore, app-engine-ndb

假设我有这个代码：

```
class A(ndb.Model):
    prop = ndb.StringProperty(verbose_name="Something")

m = A()
m.prop = "a string value" 
```

当然，如果我打印 m.prop，它将输出“一个字符串值”，而实际上它是一个 StringProperty 实例。所以 verbose_name 不能以“正常”方式访问，即`m.prop._verbose_name`.
我阅读了代码并找到了访问它的方法：`m._properties["prop"]._verbose_name`，它可以工作，但它看起来很hacky o_o。
所以告诉我，还有其他方法吗？
注意：我说的是 NDB API，而不是旧 API

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-23T15:39:31.670

使用类属性：`A.prop._verbose_name`. 或`m.__class__.prop._verbose_name`。

# algorithm - 为什么以下两种重复查找算法具有不同的时间复杂度？

> ID：11166247
> 
> 赞同：2
> 
> 时间：2012-06-23T02:14:29.983
> 
> 标签：algorithm, time, time-complexity, duplicate-removal

我正在阅读这个[问题](https://stackoverflow.com/questions/3951547/java-array-finding-duplicates)。所选答案包含以下两种算法。我不明白为什么第一个的时间复杂度是 O(ln(n))。在最坏的情况下，如果数组不包含任何重复项，它将循环 n 次，第二个也是如此。我错了还是我错过了什么？谢谢

1）更快（在极限）的方式

这是一种基于哈希的方法。您必须为自动装箱付费，但它是 O(ln(n)) 而不是 O(n2)。一个有进取心的人会去寻找一个原始的基于 int 的哈希集（Apache 或 Google Collections 有这样的东西，我想。）

```
boolean duplicates(final int[] zipcodelist)
{
  Set<Integer> lump = new HashSet<Integer>();
  for (int i : zipcodelist)
  {
    if (lump.contains(i)) return true;
    lump.add(i);
  }
  return false;
} 
```

2）向惠勒鞠躬

请参阅 HuyLe 的答案以获得或多或少的 O(n) 解决方案，我认为这需要几个附加步骤：

```
static boolean duplicates(final int[] zipcodelist) {    
    final int MAXZIP = 99999;    
    boolean[] bitmap = new boolean[MAXZIP+1];    
    java.util.Arrays.fill(bitmap, false);    

    for (int item : zipcodeList)
        if (!bitmap[item]) bitmap[item] = true;
        else return true;    
    }

    return false; 
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-23T02:26:45.583

第一个解决方案应该具有 O(n) 的预期复杂度，因为必须遍历整个邮政编码列表，并且处理每个邮政编码的预期时间复杂度是 O(1)。

即使考虑到插入 HashMap 可能会触发重新散列，复杂度仍然是[O(1)](http://www.cs.cornell.edu/courses/cs312/2008sp/lectures/lec20.html)。这有点不合理，因为 Java HashMap 与链接中的假设之间可能没有关系，但它表明这是可能的。

来自[HashSet](http://docs.oracle.com/javase/1.4.2/docs/api/java/util/HashSet.html)文档：

> 此类为基本操作（**添加**、删除、**包含**和大小）提供**恒定的时间性能，***假设哈希函数将元素正确地分散在桶*中。

 *****正确分析的第二个解决方案也是如此：O(n)。

（只是一个题外话，BitSet 比数组快，如在原始帖子中所见，因为 8 `boolean`s 被打包成 1 `byte`，它使用更少的内存）。*****

# php - 发送变量 POST 和 GET

> ID：11166254
> 
> 赞同：0
> 
> 时间：2012-06-23T02:15:50.437
> 
> 标签：php, post, get

如何在不通过 HTML 表单使用的情况下使用自己的变量请求 URL？

谢谢！

编辑：

当加载特定页面时，我想使用我自己的几个变量向 url 发送请求。

例如：我来到 www.example.com/done 页面向 www.example2.com?abc=123&def=456 发送请求

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-23T02:18:39.547

你的问题太笼统了，但有一个答案......

通过以不同的方式发出 HTTP 请求，例如：

*   通过从某个网站（例如[`jQuery.post()`](http://api.jquery.com/jQuery.post/)）使用 AJAX 调用它，
*   通过使用某种工具发出请求，例如浏览器扩展（例如[Postman REST Client](https://chrome.google.com/webstore/detail/fdmmgilgnpjigdojojpjoooidkmcomcm)或Google Chrome 的[Simple REST Client](https://chrome.google.com/webstore/detail/fhjcajmcbmldlhcimfajhfbgofnpcjmb)），
*   通过使用某些库以自动方式进行此类调用（例如[Python 的 Requests 库](http://docs.python-requests.org/en/latest/index.html)），

一般来说，`GET`参数是在 URL 中传递的，而`POST`参数是在正文中传递的，因此要同时传递两者，您需要同时通过发出`POST`请求和：

*   以 URL 编码的方式（如“ ”）将参数附加`GET`到 URL ，`...?par1=1&par2=2`
*   在请求正文中传递`POST`参数，也是 URL 编码的

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-23T02:23:21.130

`POST`变量要么通过表单发送（因此，`POST`ing 它们），要么使用`AJAX`.

`GET`然而，变量只是通过 URL 传递。例如，如果你想发送`foo=bar`到`example2.php`，你可以使用

```
<a href="example2.php?foo=bar">Go to example2.php</a> 
```

然后在`example2.php`，你可以说

```
$foo = $_GET['foo']; 
```

简单的。:)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-23T02:18:22.023

在 JavaScript 中使用 AJAX。对于初学者，我建议使用 jQuery 库

```
$.get("url", {key: "value"}, function(resp) {}) 
```

或者

```
$.post("url", {key: "value"}, function(resp) {}) 
```

应该够了

# html - 如何让div水平折叠到内容

> ID：11166256
> 
> 赞同：1
> 
> 时间：2012-06-23T02:16:54.683
> 
> 标签：html, css, web-applications

我整天都在尝试让一个容器以列的形式显示其内容，并在 children 的数量`div`增加时向侧面扩展而不是向下扩展。我已经尝试了从`-vendor-box-orient`布局到的所有方法`inline-block`，似乎没有任何效果。这是用例。

```
<div class="container">
    <div class="row">
        <div class="item">
        </div>
        <div class="item">
        </div>
    </div>
</div> 
```

如果它有足够的孩子这样做，`.container`则应该是`overflow-x:scroll`while`.row`应该超过，而不是让溢出可见。**那么，如果它是垂直的****，我怎样才能折叠到它的集体孩子的宽度呢？**`.container`**`.row`**

用例：[JSfiddle](http://jsfiddle.net/NzXQG/)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-23T04:13:33.807

看着你的小提琴演示，我找到[了 ThirtyDot 的这个答案](https://stackoverflow.com/a/5186832/451969)（[这里的小提琴](http://jsfiddle.net/thirtydot/jwJBd/)），并适应了对正确流动的内容做同样的事情来正确拟合。我并不完全了解滚动功能，但请告诉我。`UL`这应该适用于除and以外的元素`LI`，但我尚未修改标记以进行检查。

当然，这使用了奇怪而奇妙的`display: table-`属性。这样做，某些旧版浏览器必然不支持它。看看[我什么时候可以使用？](http://caniuse.com/#search=table-)有关支持的详细信息。

我测试了以下内容：

**Firefox 13** - *Works*
**Chrome 最新**- *Works*
**Opera 11.67** - *Works*
**IE 8** - *Works*
**IE 9** - *Works*
**IE 7** -*不工作*
**Safari** -*未经测试*

因此，如果 IE7 支持很重要，那么至少对于该浏览器不起作用。但除非我误解了某些东西，否则它在所有其他方面都很好用。

**标记**

```
<div>
    <div class="super-scroller">
        <ul class="horizontal-fit">
            <li class="outer-block"><span class="inner-block"></span></li>
        </ul>
    </div>
</div> 
```

**CSS**

```
.super-scroller {
    border: 1px solid green;
    overflow-x: scroll;
    padding: 5px;
    margin: 10px auto;
    width: 90%;
}
.horizontal-fit {
    display: table;
    border: 1px solid blue;
}
.horizontal-fit .outer-block {
    display: table-cell;
}
.horizontal-fit .inner-block {
    display: block;
    border: 1px solid red;
    text-align: center;
    margin: 5px;
    width: 100px;
    height: 100px;
} 
```

[http://jsfiddle.net/suJ3d/2/](http://jsfiddle.net/suJ3d/2/)

互动演示：

[http://jsfiddle.net/userdude/suJ3d/5/embedded/result/](http://jsfiddle.net/userdude/suJ3d/5/embedded/result/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-23T03:23:12.333

这是一个工作示例。红色 div 在蓝色 div 内移动。

关键是

```
overflow-x:scroll;
white-space: nowrap; 
```

在外部 div 和

```
display:inline-block; 
```

在内部 div

[http://jsfiddle.net/WTw2P/2/](http://jsfiddle.net/WTw2P/2/)

# c# - 使用 Ninject 基于对象（callcontext）返回不同的提供者（绑定）

> ID：11166262
> 
> 赞同：2
> 
> 时间：2012-06-23T02:18:15.690
> 
> 标签：c#, ninject

我正在尝试根据自定义上下文返回不同的提供程序。鉴于以下

```
public interface IProvider
{
    string WhoAreYou();
} 
```

和两个供应商

```
namespace ProviderOne
{
    public class Implementation : IProvider
    {
        public string WhoAreYou()
        {
            return "Provider One";
        }
    }
}

namespace ProviderTwo
{
    public class Implementation : IProvider
    {
        public string WhoAreYou()
        {
            return "Provider Two";
        }
    }
} 
```

上下文如下

```
public class CallContext
{
    public string SomeValue{ get; set; }
    public int AnotherValue { get; set; }
} 
```

我的绑定看起来像这样

```
 CallContext context1 = new CallContext()
        {
            SomeValue = "one",
            AnotherValue = 1
        };

        Bind<IProvider>().To<ProviderOne.Implementation>().WithMetadata("callcontext", context1);

        CallContext context2 = new CallContext()
        {
            SomeValue = "two",
            AnotherValue = 2
        };

        Bind<IProvider>().To<ProviderOne.Implementation>().WithMetadata("callcontext", context2); 
```

我相当肯定它到此为止是正确的，尽管为时已晚，而且我没有想法。

我的问题是得到那些绑定。我尝试了各种方法

```
 var test1 = kernel.Get<IProvider>(b => b.Get<CallContext>("callcontext") == context1);
        //var test1 = kernel.Get<IProvider>(m => m.Has("callcontext") && m.Get<CallContext>("callcontext").Equals(context1));
        //var test1 = kernel.Get<IProvider>(m => m.Get<CallContext>("callcontext").Equals(context1));
        //var test1 = kernel.Get<IProvider>().Equals(context1); 
```

但是它们不起作用，充其量我得到“无绑定”错误，最坏的情况是我得到错误。我敢肯定，一定有一些容易被我忽略的东西，或者只是没有意识到。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-23T09:54:23.480

我发现了问题，如果将来有人遇到这个问题，上面的解决方案很好，除了你必须显式覆盖 Equals 才能让 Ninject 解析到对象。如下。

```
 public override bool Equals(object obj)
    {
        if (obj.GetType() == typeof(CallContext))
        {
            var context = (CallContext)obj;

            if (Country != null)
            {
                if (Country.ToLower() != context.Country.ToLower())
                    return false;
            }

            if (Store != context.Store)
                return false;

            return true;
        }

        return false;
    } 
```

然后您可以按照建议解决它。

```
 CallContext context1 = new CallContext()
    {
        SomeValue = "one",
        AnotherValue = 1
    };

    var test1 = kernel.Get<IProvider>(b => b.Get<CallContext>("callcontext").Equals(context1)); 
```

# node.js - node.js 范围问题？

> ID：11166266
> 
> 赞同：1
> 
> 时间：2012-06-23T02:19:11.133
> 
> 标签：node.js

我正在使用 node.js 制作一个脚本，用于在 i3 中设置我的 dzen2，并且之前还没有真正使用过 node 来做类似的事情。

我需要从屏幕的几何形状开始，我可以通过以下方式获得：

```
geometry = getGeo();

function getGeo() {
  var sh = require('child_process').exec("i3-msg -t get_outputs",
    function(error, stdout, stderr) {
      var out = JSON.parse(stdout);
      return out[0].rect; //this is the geometry, {"x":0, "y":0, "width":1280, "height":768}
  });
};

console.log(geometry); 
```

console.log 正在记录未定义的日志。

我不确定这样做的正确方法是什么，我的大脑很累。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-23T02:28:29.303

由于是异步的，因此您无法从回调函数返回。而是编写另一个函数并将回调对象传递给它。

```
function getGeo() {
var sh = require('child_process').exec("i3-msg -t get_outputs",
    function(error, stdout, stderr) {
      var out = JSON.parse(stdout);
      getRect(return out[0].rect);
    });
};

function getRect(rect) {
    // Utilize rect here...
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-23T02:20:25.520

您永远不会从 getGeo() 返回值，而是从其中的匿名函数返回一个函数。但是由于 .exec() 调用的异步性质，您无法返回该值。您可以将 console.log 放入回调函数中，但这可能不是您希望在实际程序中使用它的地方。

# function - 在 Matlab 中，我需要一个函数/脚本来读取两个不同图像中的元素 ij 并输出一个新图像，该图像是函数的输出

> ID：11166270
> 
> 赞同：0
> 
> 时间：2012-06-23T02:19:41.140
> 
> 标签：function, matlab, image-processing

很简单：

我需要一个脚本来读取两个图像（相同大小）的元素 ij。这两个元素将是我拥有的一个函数的输入（实际上是一个模糊逻辑系统）。我希望这个函数的输出形成一个新的图像，这个是用我的函数的输出为之前打开的两个图像的**每个**ij 元素制作的。

非常感谢！

罗德里戈

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-23T03:52:41.893

天真的方法：

```
sz = size(img1);
out = zeros(sz,class(img1));
for i=1:sz(1)
     for j=1:sz(2)
         out(i,j) = myFunc(img1(i,j), img2(i,j));
     end
end 
```

如果您的函数已正确矢量化，您可以执行以下操作：

```
out = myFunc(img1,img2); 
```

# iphone - 为什么我的所有 NSManagedObjects 都会立即出现故障？

> ID：11166271
> 
> 赞同：0
> 
> 时间：2012-06-23T02:19:52.870
> 
> 标签：iphone, objective-c, ios, cocoa-touch, core-data

我正在运行一个非常基本的获取请求，它返回大约 2000 个对象。我正在使用批处理大小为 15 的 NSFetchedResultsController。

```
 predicate= [NSPredicate predicateWithFormat:@"ANY tags.tagName==%@", currentTagObject.tagName];
    [fetchRequest setPredicate:predicate];

    NSSortDescriptor *sort= [[NSSortDescriptor alloc] initWithKey:@"createDate" ascending:NO selector:@selector(compare:)];
    [fetchRequest setSortDescriptors:[NSArray arrayWithObject:sort]];
    [fetchRequest setFetchBatchSize:15];
   self.fetchedResultsController = [[NSFetchedResultsController alloc] initWithFetchRequest:fetchRequest managedObjectContext:appDelegate.managedObjectContext sectionNameKeyPath:@"createDay" cacheName:nil]; 
```

但是，获取请求需要超过 10 秒。我已经启用了 SQLite 调试，所以我可以看到发生了什么。我认为它正在获取所有 2000 个实体，其中只有 15 个具有实际值，然后出于某种原因遍历 2000 个对象中的每一个并将它们错误地放入其中。

在提取过程中，这些行出现了数千次：

```
2012-06-22 21:14:47.546 app[9227:707] CoreData: annotation: sql connection fetch time: 0.0107s
2012-06-22 21:14:47.551 app[9227:707] CoreData: annotation: total fetch execution time: 0.0171s for 15 rows.
2012-06-22 21:14:47.568 app[9227:707] CoreData: sql: SELECT 0, t0.Z_PK, t0.Z_OPT, t0.ZAUTHOREMAIL, t0.ZAUTHORNAME, t0.ZCREATEDATE, t0.ZISGLOBAL, t0.ZISLOCKED, t0.ZISNEW, t0.ZISPENDINGDELETE, t0.ZISPENDINGSYNC, t0.ZLASTUPDATED, t0.ZLOCALLYMODIFIEDDATE, t0.ZMETALASTUPDATED, t0.ZNOTEID, t0.ZNUMBEROFCHILDREN, t0.ZPARENTAUTHOREMAIL, t0.ZPARENTNOTEID, t0.ZROOTAUTHOREMAIL, t0.ZROOTNOTEID, t0.Z4PENDINGADDNOTES, t0.Z4PENDINGREMOVENOTES FROM ZMBNOTEOBJECT t0 WHERE  t0.Z_PK IN  (?,?,?,?,?,?,?,?,?,?,?,?,?,?,?)  ORDER BY t0.ZCREATEDATE DESC LIMIT 15
...thousands more lines exactly similar to the three above 
```

我的表一次只显示 5 个单元格，所以我不知道为什么所有对象都会立即出现故障。这可能是什么原因造成的？为什么我什至不滚动表格，所有对象都会立即出现故障？是否可以在某个地方访问它们，也许是迭代的？调用是否`NSArray *fetchedObjects = fetchedResultsController.fetchedObjects`会导致所有对象发生故障？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-23T10:16:08.033

您看到的行为在[批处理故障和预取](https://developer.apple.com/library/ios/ipad/#documentation/Cocoa/Conceptual/CoreData/Articles/cdPerformance.html#//apple_ref/doc/uid/TP40003468-SW6)段落下的核心数据编程指南中有很好的描述。

简而言之，如果您使用谓词来获取具有特定名称标签的对象，则应该预先获取标签对象。这是因为通常在获取对象时，Core Data 不会获取相关对象，而是使用故障代替。现在，您的谓词触发单独触发这些故障，这很慢。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-06-23T09:08:58.830

查看文档中关于`batchSize`（我的重点）的内容：

> 默认值为 0。批量大小为 0 被视为无限，这将禁用批量故障行为。
> 
> 如果设置非零批量大小，则执行提取时返回的对象集合被分成多个批次。执行 fetch 时，**会评估整个请求**并记录所有匹配对象的身份，但一次**不会`batchSize`**从持久存储**中****获取对象的数据**。执行请求返回的数组将是一个代理对象，可以根据需要透明地对批次进行故障处理。（在数据库术语中，这是一个内存游标。）
> 
> 您可以使用此功能来限制应用程序中的工作数据集。结合 fetchLimit，您可以创建任意结果集的子范围。

所以，很明显，根据这个解释，你有 2000/15 次往返商店。这肯定需要一些时间。由于您的排序和`ANY`谓词，您需要所有数据，但您指示请求一次只能获取 15 个。

另外，为了完整起见，从前面的评论中：`compare`从你的排序描述符中删除。

# c++ - 调用 fdopen() 后出现 Errno 22

> ID：11166273
> 
> 赞同：0
> 
> 时间：2012-06-23T02:20:09.493
> 
> 标签：c++, linux, pipe, errno

调用时出现错误`fdopen`，它设置`errno`为 22。我正在使用 exec 命令调用子进程。子进程调用`fdopen`文件描述符 4。第一个子进程工作并将数据发送回父`errno`进程，为 0。父进程创建下一个子进程后，`fdopen(4, "w");`再次调用，此时`errno`设置为 22。

根据我的阅读，`errno`22 for`fdopen()`可能意味着模式参数不正确。我还读到这可能是一个错误`fnctl`，这可能意味着文件描述符错误。我指定文件描述符 4，它适用于第一个子进程。这可能`errno`是我尝试创建另一个时设置为 22 的原因`FILE*`吗？

我无法弄清楚它何时适用于一个子进程，但不适用于下一个。任何人都可以为我阐明这一点吗？

这是代码：

```
int main(int argc, char* argv[])
{
    cout << "Child " << argv[argc-1] << " starting" << endl;
    //close(3);
    if(argc < 1) fatal("Not enough arguments provided to ChildMain");
    int id = atoi(argv[argc-1]);
    //Child kid((int) *argv[1]);
    cout << "Error before fdopen(): " << errno << endl;
    FILE* out = fdopen(4, "w");
    if(out == NULL)
    {
        cout << "Child ID: " << id << endl;
        cout << "\tError: " << errno << endl << endl;
    }
    int ret = fprintf(out, "%d", id);
    fflush(out);
    return 0;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-23T02:23:50.373

对于第一个子进程，文件描述符的编号是 4。对于第二个子进程，4 正在父进程中使用，因此它获取其他文件描述符编号。孩子要么必须搜索文件描述符，要么父母必须在环境中、在孩子的命令行上或其他方式将其传达给孩子。

# c# - 将填充和未填充椭圆的点渲染到 C# 中的数组

> ID：11166275
> 
> 赞同：2
> 
> 时间：2012-06-23T02:20:19.657
> 
> 标签：c#, math, drawing, ellipse

有谁知道将椭圆渲染到 C# 中的数组的任何代码？我看了看，我找不到任何可以回答我的问题的东西。

给定以下数组：

```
bool[,] pixels = new bool[100, 100]; 
```

我正在寻找在矩形区域内渲染空心椭圆和填充椭圆的函数。例如：

```
public void Ellipse(bool[,] pixels, Rectangle area)
{
    // fill pixels[x,y] = true here for the ellipse within area.
}

public void FillEllipse(bool[,] pixels, Rectangle area)
{
    // fill pixels[x,y] = true here for the ellipse within area.
}

Ellipse(pixels, new Rectangle(20, 20, 60, 60));
FillEllipse(pixels, new Rectangle(40, 40, 20, 20)); 
```

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-28T09:29:59.227

像这样的东西应该可以解决问题

```
public class EllipseDrawer
{
    private static PointF GetEllipsePointFromX(float x, float a, float b)
    {
        //(x/a)^2 + (y/b)^2 = 1
        //(y/b)^2 = 1 - (x/a)^2
        //y/b = -sqrt(1 - (x/a)^2)  --Neg root for upper portion of the plane
        //y = b*-sqrt(1 - (x/a)^2)
        return new PointF(x, b * -(float)Math.Sqrt(1 - (x * x / a / a)));
    }

    public static void Ellipse(bool[,] pixels, Rectangle area)
    {
        DrawEllipse(pixels, area, false);
    }

    public static void FillEllipse(bool[,] pixels, Rectangle area)
    {
        DrawEllipse(pixels, area, true);
    }

    private static void DrawEllipse(bool[,] pixels, Rectangle area, bool fill)
    {
        // Get the size of the matrix
        var matrixWidth = pixels.GetLength(0);
        var matrixHeight = pixels.GetLength(1);

        var offsetY = area.Top;
        var offsetX = area.Left;

        // Figure out how big the ellipse is
        var ellipseWidth = (float)area.Width;
        var ellipseHeight = (float)area.Height;

        // Figure out the radiuses of the ellipses
        var radiusX = ellipseWidth / 2;
        var radiusY = ellipseHeight / 2;

        //Keep track of the previous y position
        var prevY = 0;
        var firstRun = true;

        // Loop through the points in the matrix
        for (var x = 0; x <= radiusX; ++x)
        {
            var xPos = x + offsetX;
            var rxPos = (int)ellipseWidth - x - 1 + offsetX;

            if (xPos < 0 || rxPos < xPos || xPos >= matrixWidth)
            {
                continue;
            }

            var pointOnEllipseBoundCorrespondingToXMatrixPosition = GetEllipsePointFromX(x - radiusX, radiusX, radiusY);
            var y = (int) Math.Floor(pointOnEllipseBoundCorrespondingToXMatrixPosition.Y + (int)radiusY);
            var yPos = y + offsetY;

            var ryPos = (int)ellipseHeight - y - 1 + offsetY;

            if (yPos >= 0)
            {
                if (xPos > -1 && xPos < matrixWidth && yPos > -1 && yPos < matrixHeight)
                {
                    pixels[xPos, yPos] = true;
                }

                if(xPos > -1 && xPos < matrixWidth && ryPos > -1 && ryPos < matrixHeight)
                {
                    pixels[xPos, ryPos] = true;
                }

                if (rxPos > -1 && rxPos < matrixWidth)
                {
                    if (yPos > -1 && yPos < matrixHeight)
                    {
                        pixels[rxPos, yPos] = true;
                    }

                    if (ryPos > -1 && ryPos < matrixHeight)
                    {
                        pixels[rxPos, ryPos] = true;
                    }
                }
            }

            //While there's a >1 jump in y, fill in the gap (assumes that this is not the first time we've tracked y, x != 0)
            for (var j = prevY - 1; !firstRun && j > y - 1 && y > 0; --j)
            {
                var jPos = j + offsetY;
                var rjPos = (int)ellipseHeight - j - 1 + offsetY;

                if(jPos == rjPos - 1)
                {
                    continue;
                }

                if(jPos > -1 && jPos < matrixHeight)
                {
                    pixels[xPos, jPos] = true;
                }

                if(rjPos > -1 && rjPos < matrixHeight)
                {
                    pixels[xPos, rjPos] = true;
                }

                if (rxPos > -1 && rxPos < matrixWidth)
                {
                    if(jPos > -1 && jPos < matrixHeight)
                    {
                        pixels[rxPos, jPos] = true;
                    }

                    if(rjPos > -1 && rjPos < matrixHeight)
                    {
                        pixels[rxPos, rjPos] = true;
                    }
                }
            }

            firstRun = false;
            prevY = y;
            var countTarget = radiusY - y;

            for (var count = 0; fill && count < countTarget; ++count)
            {
                ++yPos;
                --ryPos;

                // Set all four points in the matrix we just learned about
                //  also, make the indication that for the rest of this row, we need to fill the body of the ellipse
                if(yPos > -1 && yPos < matrixHeight)
                {
                    pixels[xPos, yPos] = true;
                }

                if(ryPos > -1 && ryPos < matrixHeight)
                {
                    pixels[xPos, ryPos] = true;
                }

                if (rxPos > -1 && rxPos < matrixWidth)
                {
                    if(yPos > -1 && yPos < matrixHeight)
                    {
                        pixels[rxPos, yPos] = true;
                    }

                    if(ryPos > -1 && ryPos < matrixHeight)
                    {
                        pixels[rxPos, ryPos] = true;
                    }
                }
            }
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-29T11:58:46.030

尽管似乎已经有了源代码和这个问题的[完全有效的答案](https://stackoverflow.com/a/11241715/650012)，但我只想指出，[WriteableBitmapEx](http://writeablebitmapex.codeplex.com/)项目还包含许多有效的[源代码](http://writeablebitmapex.codeplex.com/SourceControl/BrowseLatest)，用于绘制和填充不同的多边形类型（例如椭圆）所谓的`WriteableBitmap`对象。

此代码可以很容易地适应应以不同方式呈现 2D 数组（或 2D 数组的 1D 表示）的一般场景。

对于椭圆情况，请特别注意 WriteableBitmapShapeExtensions.cs 文件中的*方法*和 WriteableBitmapFillExtensions.cs 文件`DrawEllipse...`中*的*`FillEllipse...`方法，所有内容都位于*trunk/Source/WriteableBitmapEx*子文件夹中。

 *** * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-23T02:28:29.833

这通常更适用于所有语言，我不确定您为什么要特别寻找这样的东西，而不是使用预先存在的图形库（家庭作业？），但是对于绘制椭圆，我建议使用可以适应椭圆（也适用于圆）的中点线绘制算法：

[http://en.wikipedia.org/wiki/Midpoint_circle_algorithm](http://en.wikipedia.org/wiki/Midpoint_circle_algorithm)

我不确定我是否完全同意这是对 Bresenham 算法的概括（当然，我们被告知 Bresenham 和 Midpoint 算法不同，但被证明产生相同的结果），但该页面应该让您开始了解它。有关特定于椭圆的算法，请参阅底部附近的论文链接。

至于填充椭圆，我想说你最好的办法是采用扫描线方法 - 依次查看每一行，找出左右线条所在的像素，然后填充中间的每个像素。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-27T21:46:34.003

最简单的做法是遍历矩阵的每个元素，并检查某个椭圆方程的计算结果是否为真

![在此处输入图像描述](../Images/495c0ad9225fafadd998d6264fee1a94.png)

取自[http://en.wikipedia.org/wiki/Ellipse](http://en.wikipedia.org/wiki/Ellipse)

我要开始的是类似的东西

```
 bool[,] pixels = new bool[100, 100];

        double a = 30;
        double b = 20;
        for (int i = 0; i < 100; i++)
            for (int j = 0; j < 100; j++ )
            {
                double x = i-50;
                double y = j-50;
                pixels[i, j] = (x / a) * (x / a) + (y / b) * (y / b) > 1;
            } 
```

如果你的椭圆是相反的，不仅仅是`>`改变`<`

`(x / a) * (x / a) + (y / b) * (y / b)`对于空心的，您可以检查和之间的差异是否`1`在某个阈值之内。如果您只是将不等式更改为方程式，它可能会丢失一些像素。

现在，我实际上还没有完全测试过这个，所以我不知道方程是否正确应用，但我只是想说明这个概念。**

# jquery - 在函数参数中向 jQuery 对象添加选择器

> ID：11166279
> 
> 赞同：0
> 
> 时间：2012-06-23T02:21:45.710
> 
> 标签：jquery, function, selector, arguments

对不起，主题行，但我不确定如何准确表达它。我想`$('#progress-row-1 .indicator).css('width', 100);`通过以下方式将其自动化为一个函数：

```
setWidth($('#progress-row-1'), 100); 
```

所以我只将元素的 ID 传递给函数。该元素只有一个具有名为“.indicator”的类的子元素。所以...

在函数中，我想设置具有名为“indicator”的类的元素的 CSS 宽度：

```
function setWidth(obj, size) {
    $('obj .indicator').css('width', size);
} 
```

我知道`$('obj .indicator')`语法是错误的，但我不知道什么是正确的。我将如何以这种方式访问​​具有名为“.indicator”的类的传递对象的孩子？谁能帮我吗？谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-23T02:28:30.180

把它变成一个插件方法：

```
$.fn.setIndicatorWidth=function(width){
    return this.each(function(){
        $(this).find('.indicator').width(width);
    });
} 
```

用途：

```
$('#progress-row-1').setIndicatorWidth(100); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-23T02:27:43.613

最简洁的语法（我相信最快）的解决方案是：

```
$('.indicator', obj).css('width', size); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-23T02:22:57.510

采用`.find()`

```
obj.find(".indicator").css('width', size); 
```

# java - IntelliJ - 启动失败：0 已通过，1 未启动

> ID：11166283
> 
> 赞同：17
> 
> 时间：2012-06-23T02:22:49.357
> 
> 标签：java, unit-testing, ide, intellij-idea

刚刚第一次玩 IntelliJ IDEA 社区版，我第一次使用它，所以如果我遗漏了什么，请原谅。

我运行了一堆单元测试，但是，在 IntelliJ 中运行它们时（使用开箱即用的标准设置），我在控制台中间歇性地收到以下错误：

> 03:14:17 启动失败：58个通过，1个未启动

我在网上搜索过，但无济于事。如果我只运行失败的测试，它可能会或可能不会打印出类似的错误：

> 03:19:54 启动失败：0通过，1未启动

如果我继续尝试，最终它会起作用并告诉我我所有的测试都已通过。

该图像不是感叹号的错误，它是一个不同的错误图标 ( ![错误图标](../Images/df95dd402e7da6b37743eb25109ed762.png))，我不认识。事件日志窗口中的错误显示为红色文本。

它似乎总是只发生在一个测试中，并且对于任何给定的测试集总是相同的测试。IE 在不同的项目中，同样的问题也会出现，但对于不同的测试（但在每个项目或一组测试中总是相同的）。

还有一点需要注意的是，这只发生在调试时而不是运行时，所以它可能与连接调试器有关？

这一切都与 Eclipse 完美配合。

有什么想法可能导致这种情况吗？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2020-11-22T15:45:15.820

我的问题是**Failed to start: 1, pass: 0**。我正在使用带有 Junit5 的 Spring Boot 2.4.0 来测试控制器类。我刚刚注释掉了 junit-jupiter-engine 依赖项中的版本标记。然后它起作用了。真的很奇怪。它可能对某人有帮助。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-10-30T08:18:09.227

我得到了同样的错误。发送给`System.out`IntellJ IDEA 测试“未开始”的东西很奇怪。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2020-04-03T07:59:12.160

就我而言，问题出在 pom.xml 中。我从完整的工作应用程序转移到 spring-boot 实现，并且只导入了 spring-boot-starter-test 依赖项进行测试。

我通过从 spring-boot-starter-test 中排除 junit 部分来解决，并在单独的块中添加了最新版本的 junit 依赖项。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2021-06-24T18:02:09.480

有时，当您将 sclamock's`MockFactory`与 scalatest's混合使用时，scala 代码会发生类似的错误`AsyncFlatSpec`。

所以，一定要`AsyncMockFactory`像下面这样使用。

```
class ExampleSpec extends AsyncFlatSpec with AsyncMockFactory 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2017-06-26T13:08:24.493

我已经为 IntelliJ IDEA 创建了[一张票](https://youtrack.jetbrains.com/issue/IDEA-175006)，如果你仍然遇到这个问题，你可以投票给它。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-06-26T14:43:11.713

看起来这可能是 IntelliJ 上的一个错误，它已与他们一起提出。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2015-01-24T14:55:11.080

我遇到了这个问题（在 Android Studio 中，但它是一个定制的 IntelliJ），原因是当我使用 CTRL-SHIFT-F10 运行测试时光标在哪里。

```
@Parameterized.Parameters
public static Collection data() 
```

一旦我将光标移动到测试方法中或不在任何方法中，它就起作用了。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2017-08-11T09:44:41.007

在 IntelliJ IDEA 2017.2.1 中，我遇到了同样的问题，让我有点崩溃。测试用例运行时没有任何可识别的错误或违规行为，但最终 JUnit 声称该用例未开始。

发现这是由于尝试打印到已经关闭的 PrintWriter 引起的。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2021-05-10T20:25:27.780

就我而言，我试图**模拟**一个具有**公共静态方法**的类。当一切都从静态上下文中解放出来时，问题就解决了。

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2021-08-05T15:38:28.533

在尝试测试调用`System.exit(1)`. IntelliJ 不会开始我的测试，直到我删除了这样的退出行为：

起初我替换了代码中的所有直接行

```
System.exit(1) 
```

至

```
onFailure.run(); 
```

和

```
unnable onFailure = () -> System.exit(1); 
```

在代码本身中。在测试代​​码中，我用可测试的模拟 Runnable 替换了 Runnable

```
 Runnable mockOnFailure =
      () -> {
        throw new CustomError(
            "Some descriptive message here.");
      }; 
```

并且比我预期的错误会像这样抛出（使用 AssertJ 进行漂亮的断言语句）

```
import static org.assertj.core.api.Assertions.assertThat;
import static org.assertj.core.api.Assertions.assertThatExceptionOfType;

  assertThatExceptionOfType(CustomError.class).isThrownBy(
      () -> {
        callingCodeThatCallsOnFailure();
      }
  ); 
```

现在测试都由 IDE 根据需要开始。

如果对您有帮助，请随意重复使用。我不主张任何这些代码行的任何所有权或版权。

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2015-12-30T05:44:36.030

我遇到过同样的问题。无论是多少，它都在舞台`scenarios`上显示1个额外的。我正在使用 Scenario Outline 运行测试，并在.`scenario``NOT STARTED``Example tables`

后来我发现**评论整个示例表**（我不想运行）解决了这个问题，而不是评论每一行。

# javascript - PhoneGap 构建服务“以 HTML5、CSS、JavaScript 构建”声明

> ID：11166287
> 
> 赞同：3
> 
> 时间：2012-06-23T02:23:16.490
> 
> 标签：javascript, css, html, cordova

[PhoneGap 构建服务](https://build.phonegap.com/)表示您可以使用HTML5、CSS 和 JavaScript 构建应用程序。但是，phonegap.js 并非适用于每台设备（最新下载的 PhoneGap 1.8.1 没有适用于 Bada 或 iOS 的设备）。所以我认为构建服务是为了让我们免于为每个环境创建 shell，但我看不到 PhoneGap API 应该如何工作。

我也认为这个想法是您可以为每个环境构建一个代码库。我知道有怪癖，但为什么会有一个单独的 phonegap.js 文件用于 Android、WebOS 等？

缺乏文档让我感到困惑。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-02T17:55:22.980

根据我的经验，每个文件都有单独的文件，但是在使用 phonegap 构建时，如果你想为构建包含一个通用文件，有一种方法，放入`<script src="phonegap.js"></script>`你的 index.html 文件并且不包含任何 js 文件，你实际上不甚至不需要 phonegap.js 文件，当我这样做并通过 phonegap build 运行它时，它会将适当的 .js 文件附加到适当的构建，我突然可以将 phonegap API 用于我正在测试的所有构建

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-23T02:37:46.477

phonegap 框架是为特定的移动操作系统而设计的。之所以有这么多，是因为每个框架都针对每种类型的操作系统。就像游戏一样，大多数只适用于 Windows，有些适用于 mac，但对基于 Linux 的系统的支持很少。Phonegap 创建 API 以使用相机和操作系统的其他功能。

Phonegap 有他们的教程向您展示如何为 iOS 和 Android 安装。我还没有为更新的系统开发。

许多人使用[jQueryMobile](http://www.jquerymobile.com)与 PhoneGap 一起开发，以创建一个漂亮的简单移动应用程序。

我希望这有帮助。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-02T18:01:25.650

虽然每个设备都有不同的 phonegap.js 文件，但它们非常相似（我发现这一点是因为我不小心将它从 iOS 项目复制到了 Android 项目几次）。差异很重要，但它们几乎可以按原样工作。

它们不同的主要原因是它们只是暴露了 Phonegap 设备原生代码（Java、OC 等）提供的底层功能，这些代码依赖于设备。Phonegap 开发人员只是负责将其隐藏起来。所有 phonegap.js 文件都公开了相同的功能，它们有时只是连接到“内部”的不同位置。因此存在差异。

由于上述原因，大多数为 Phonegap 应用程序编写的源“你或我”都是独立于设备的。

# r - 递归提取列表中的对象

> ID：11166289
> 
> 赞同：3
> 
> 时间：2012-06-23T02:23:36.643
> 
> 标签：r

我有一个列表作为条目，如下所示：

```
A <- list(scores1 = list(a = "a", b = "b"), scores2 = list(a = "c", b = "d"), scores3 = list(a = "e", b = "f"))
B <- list(scores1 = list(a = "aa", b = "bb"), scores2 = list(a = "cc", b = "dd"), scores3 = list(a = "ee", b = "ff"))
C <- list(scores1 = list(a = "aaa", b = "bbb"), scores2 = list(a = "ccc", b = "ddd"), scores3 = list(a = "eee", b = "fff"))
ABC <- list(A, B, C) 
```

我可以得到元素 score1 如下：

```
a1 <- lapply(ABC, "[", "scores1") 
```

这给了我

```
[[1]]
[[1]]$scores1
[[1]]$scores1$a
[1] "a"

[[1]]$scores1$b
[1] "b"

[[2]]
[[2]]$scores1
[[2]]$scores1$a
[1] "aa"

[[2]]$scores1$b
[1] "bb"

[[3]]
[[3]]$scores1
[[3]]$scores1$a
[1] "aaa"

[[3]]$scores1$b
[1] "bbb" 
```

现在，我真正想要的是对象“a”中的内容，所以我正在寻找一个给我的电话

```
"a"
"aa"
"aaa" 
```

我可以循环执行此操作，但这似乎效率很低。如何提取这些值？我努力了

```
lapply(lapply(ABC, "[", "scores1"), "[", "a") 
```

但这只会返回

```
[[1]]
[[1]]$<NA>
NULL

[[2]]
[[2]]$<NA>
NULL

[[3]]
[[3]]$<NA>
NULL 
```

这样做的正确方法是什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-23T02:37:19.123

我认为你被“[”和“[[”之间的区别绊倒了。使用“[[”为您提供由“scores1”索引的元素的内容，而不是子列表。然后，您可以访问名为“a”的元素的内容：

```
a1 <- lapply(ABC, "[[", "scores1")
sapply(a1, "[[", "a")
#[1] "a"   "aa"  "aaa" 
```

# php - 使用 SimpleXMLElement 解析 XML 时遇到问题

> ID：11166292
> 
> 赞同：0
> 
> 时间：2012-06-23T02:24:09.147
> 
> 标签：php, soap, simplexml

对于我的生活，我无法弄清楚为什么我无法访问此肥皂包中的任何属性（甚至无法弄清楚它们是什么）。我不能使用水星返回给我的任何东西。我已经阅读了其他几个类似的问题，但没有运气。我相信这只是我无知的产物，但任何帮助都将不胜感激。

```
$transactionInfo = new MercuryPaymentHandler($paymentID);
$returnValue = $transactionInfo->verifyPayment();
$xml = new SimpleXMLElement($returnValue);
var_dump(get_object_vars($xml)); 
```

返回：

```
array(0) { } 
```

但是这个：

```
$transactionInfo = new MercuryPaymentHandler($paymentID);
$returnValue = $transactionInfo->verifyPayment();
$xml = new SimpleXMLElement($returnValue);
echo $xml->asXML(); 
```

返回：

```
<?xml version="1.0" encoding="utf-8"?>
<soap:Envelope xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema">
<soap:Body>
    <VerifyPaymentResponse xmlns="http://www.mercurypay.com/">
        <VerifyPaymentResult>
            <ResponseCode>0</ResponseCode>
            <Status>Approved</Status>
            <StatusMessage>AP</StatusMessage>
            <DisplayMessage>Your transaction has been approved.</DisplayMessage>               
            <AvsResult/>
            <CvvResult>M</CvvResult>
            <AuthCode>000027</AuthCode>
            <Token>ItIu8ayb9ZyMcBjHUkyHS0krnFVf6esnfs6tULuAo2giERIQACMQAgyc</Token>
            <RefNo>0028</RefNo>
            <Invoice>48</Invoice>
            <AcqRefData>KbMCC2110080622 </AcqRefData>
            <CardType>M/C</CardType><MaskedAccount>xxxxxxxx6781</MaskedAccount>
            <Amount>7</Amount>
            <TaxAmount>0</TaxAmount>
            <TransPostTime>2012-06-22T21:10:08.65</TransPostTime>
            <CardholderName>Test-User</CardholderName>
            <AVSAddress/>
            <AVSZip/>
            <TranType>Sale</TranType>
            <PaymentIDExpired>true</PaymentIDExpired>
            <CustomerCode/>
            <Memo>Mighty Wash 2.0</Memo>
            <AuthAmount>7</AuthAmount>
            <VoiceAuthCode/>
            <ProcessData>|00|600550672000</ProcessData>
            <OperatorID/>
            <TerminalName/>
        </VerifyPaymentResult>
        </VerifyPaymentResponse>
    </soap:Body>
</soap:Envelope> 
```

是什么赋予了？

**更新**

我从来没有使用 PHPs 原生类来解决这个问题，但是使用 CakePHPs XML 类很容易。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-23T02:31:43.817

1.  你不能转储 SimpleXMLElement
2.  SimpleXMLElement 背后的想法是您应该能够分层访问每个节点。所以基本上是RootNode->FirstChildNode->FirstChildNodeOfTheFirstChildNode->AndSoOn
3.  默认情况下，如果将 SimpleXMLElement 与字符串或变量连接，则会调用 __toString() 方法。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-23T02:32:12.020

问题是，在内部，`SimpleXMLElement`它没有被存储为一个微不足道的对象。基本上，您必须知道要访问哪些属性，并且它会根据其内部结构即时组成结果。在您的情况下，您可以使用以下内容： http: [//php.net/manual/en/simplexmlelement.xpath.php](http://php.net/manual/en/simplexmlelement.xpath.php)（参见示例）来有效地提取数据。此外，要严格回答您的问题，您可以使用以下内容：[http ://www.php.net/manual/en/simplexmlelement.attributes.php](http://www.php.net/manual/en/simplexmlelement.attributes.php)

# ios - 检索城市统计数据（任何 API 或数据库？）

> ID：11166295
> 
> 赞同：3
> 
> 时间：2012-06-23T02:25:49.507
> 
> 标签：ios, objective-c, xcode, city

我要做的是检索城市统计数据。很像中央情报局世界概况。但是，我想要一个可以查询并获得结果的 API、数据库或数据集。另外，我实际上更喜欢使用 a`UIWebView`并加载一个网站，其中包含已经搜索和显示的统计数据。例如，像 TheWeatherChannel 一样，我可以用给定的坐标形成一个 URL。但是像 CIA World Factbook 这样的网站对每个国家都有一个唯一的两个字母代码，它们不是特定的格式。

另外，我想获得 CITY 统计数据，这将包括：

*   人口
*   犯罪率
*   描述
*   使用的语言
*   运输系统
*   地理

和更多！我什至有一个想法来展示该国家使用的插头类型。但是，我不知道如何以及在哪里寻找这样的信息。

请帮帮我...

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-23T02:42:33.533

您需要非常通用的数据集和 API，因此您可能想要探索[http://en.wikipedia.org/wiki/Open_data](http://en.wikipedia.org/wiki/Open_data)、[https://explore.data.gov/](https://explore.data.gov/)和[http://www .freebase.com/](http://www.freebase.com/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-01-06T01:46:15.997

有点晚了，它可能不会做市级，但

[http://data.worldbank.org/developers/data-catalog-api](http://data.worldbank.org/developers/data-catalog-api)

对于寻找类似东西的人也可能有用，并且在上述答案的链接中没有提到（AFAICS）。

该数据还有一个 drupal 模块，位于

[https://drupal.org/project/wbapi](https://drupal.org/project/wbapi)

# perl - 如何读取/存储 Selenium 网格/表格的内容？

> ID：11166296
> 
> 赞同：2
> 
> 时间：2012-06-23T02:25:58.220
> 
> 标签：perl, selenium

在 UI 中，我单击按钮，它会在新窗口中显示一些详细信息。在此数据中以网格/表格格式显示。我正在使用 Selenium IDE 在 perl 中记录和导出测试用例。但我无法读取/存储这些网格/表格内容。我该怎么做 ？你能告诉我吗？

是否可以借助 IDE 命令（例如获取总行数和列数）来做到这一点？我只能检索特定单元格的值。但是每个单元格的 xpath 都会发生变化，所以即使我也无法对其进行迭代。有什么可能的方法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-24T12:58:27.930

IDE 不会产生非常可维护的测试，当我上次使用它时，有一个“导出为 perl”选项 - 使用它而不是尝试自己转换网格/表格。

如果可以的话，我建议您改用[Test::WWW::Selenium::More](https://metacpan.org/module/Test%3a%3aWWW%3a%3aSelenium%3a%3aMore "测试::WWW::Selenium::更多")，您可以编写非常干净和模块化的测试代码，如下所示：

```
use Test::Most;
use Test::WWW::Selenium::More;

my $s = Test::WWW::Selenium::More->new( 
    host           => "localhost", # selenium server host
    port           => 4444,        # selenium server port
    browser        => "*firefox",
    browser_url    => "http://www.google.com",
);

$s->open_ok("http://www.google.com", undef, "fetched G's site alright");
$s->type_ok( "q", "hello world");
$s->click_ok("btnG");
$s->wait_for_page_to_load_ok(5000);
$s->title_like(qr/Google Search/);

done_testing; 
```

阅读[手册](https://metacpan.org/module/Test%3a%3aWWW%3a%3aSelenium%3a%3aMore%3a%3aManual "手动的")和[Test::WWW::Selenium](https://metacpan.org/module/Test%3a%3aWWW%3a%3aSelenium "测试::WWW::硒")，这是它的扩展（您可以在 Test::WWW::Selenium 中执行的任何操作，您可以在 ::More 中执行）。

# php - 为 Hovercard 获取从 PHP 到 jQuery 的数据 - JSON

> ID：11166298
> 
> 赞同：0
> 
> 时间：2012-06-23T02:26:00.347
> 
> 标签：php, jquery, json

好的，所以我尝试在我的网站上为在我的网站上注册的用户使用 HoverCard。我如何设法使用 PHP 从数据库中获取数据并将其发送到我的 jQuery 脚本？

我知道如何使用 jQuery 从 PHP 获取数据，但由于某种原因它无法正常工作。这是我的代码：

jQuery代码：

```
var user = null;
$.post('userjson.php',{},
    function(output) {
        user = output;
    });

$('#loggedUser').hovercard({
    showCustomCard: true, 
    customCardJSON: user
}); 
```

PHP代码：

```
$username = $_COOKIE['username'];

$user_select = mysql_query("SELECT * FROM users WHERE username='$username'",$con);
$user_array = mysql_fetch_array($user_select);

$user = array(
    'name' => $user_array['username'],
    'bio' => $user_array['bio'],
    'image' => $user_array['propic']
);

echo json_encode($user); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-23T02:28:25.543

是异步的`POST`，因此您必须在回调中创建悬停卡

```
var user = null;
$.post('userjson.php',{}, function(output) {
    user = output;
    $('#loggedUser').hovercard({
        showCustomCard: true, 
        customCardJSON: JSON.parse(user)
    });
}); 
```

在您的代码中，当您尝试创建悬停卡时未设置用户变量。

# r - 通过 POST 请求发送压缩数据

> ID：11166299
> 
> 赞同：2
> 
> 时间：2012-06-23T02:26:20.007
> 
> 标签：r

我正在尝试将列表编码为 JSON，在 Rcompression 中使用 gzip 对其进行压缩，然后使用 RCurl 中的 POST 请求将其发送到服务器。

```
# COMPRESS THE REQUEST
all <- list(this=1,is=2,a=3,list=4)
json <- toJSON(all)
gzip <- gzip(json)

# SEND IT TO THE SERVER
status <- postForm(SERVER_URI,data=fileUpload(contents=gzip,contentType="application/x-gzip"),style="HTTPPOST",binary=TRUE) 
```

但是，当我尝试将数据 POST 到服务器时，出现以下错误：

```
Error in postForm(SERVER_URI, data = gzip) : 
  STRING_ELT() can only be applied to a 'character vector', not a 'raw' 
```

我知道 gzip 数据是原始格式，而 postForm 函数不喜欢那样，但我不清楚如何解决通过 POST 请求将原始数据发送到服务器的问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-23T02:49:00.293

RCurl的官方[文件](http://www.omegahat.org/RCurl/RCurlJSS.pdf)指出 POSTing binary data 尚未实现，并列在“Future Work”下的文档中。因此，自文档发布以来，RCurl 中可能还没有解决方案。

# c# - 如何右对齐 WPF ListItem 的某些元素？

> ID：11166303
> 
> 赞同：9
> 
> 时间：2012-06-23T02:27:01.150
> 
> 标签：c#, .net, wpf, xaml

我有一个 WPF 列表框，并已将列表项数据模板更新为基本上具有 3 列布局。

我想：

|状态颜色|名称| 按钮|

这些可能是 CSS 术语，但我想将状态颜色和名称浮动到左侧，我已经完成了，然后我希望按钮浮动到右侧，并且即使窗口变宽也始终保持在右侧.

我觉得我很接近，当窗口变宽时，列表项的宽度会增加，我觉得我所要做的就是告诉按钮向右浮动，但不知道如何。我试过堆栈面板，一个带有自动|*|自动列布局的网格（最后一列有一个拉伸），我试过一个停靠面板。

这是我的 XAML：

```
 <Controls:MetroWindow x:Class="Appsecute.Views.MainView2"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:Controls="clr-namespace:MahApps.Metro.Controls;assembly=MahApps.Metro"
        xmlns:AppsecuteControls="clr-namespace:Appsecute.Controls"
        Title="APPSECUTE" Height="630" Width="480" Icon="/Appsecute;component/Images/icon.png" WindowStartupLocation="CenterScreen">

    <Window.Resources>
        <ResourceDictionary>
            <ResourceDictionary.MergedDictionaries>
                <ResourceDictionary Source="pack://application:,,,/MahApps.Metro;component/Styles/Colours.xaml" />
                <ResourceDictionary Source="pack://application:,,,/MahApps.Metro;component/Styles/Fonts.xaml" />
                <ResourceDictionary Source="pack://application:,,,/MahApps.Metro;component/Styles/Controls.xaml" />
                <ResourceDictionary Source="pack://application:,,,/MahApps.Metro;component/Styles/Controls.AnimatedSingleRowTabControl.xaml" />
                <ResourceDictionary Source="pack://application:,,,/MahApps.Metro.Resources;component/Icons.xaml" />
                <ResourceDictionary Source="pack://application:,,,/MahApps.Metro;component/Styles/Accents/Blue.xaml" />
                <ResourceDictionary Source="pack://application:,,,/MahApps.Metro;component/Styles/Accents/BaseLight.xaml" />
            </ResourceDictionary.MergedDictionaries>
        </ResourceDictionary>
    </Window.Resources>

    <Grid Margin="0,0,12,0">
        <AppsecuteControls:NotifyIcon
            x:Name="NotifyIcon"
            Text="Appsecute"
            Icon="/Images/icon.ico" MouseDoubleClick="NotifyIconMouseDoubleClick" Grid.ColumnSpan="2">
            <AppsecuteControls:NotifyIcon.ContextMenu>
                <ContextMenu StaysOpen="False">
                </ContextMenu>
            </AppsecuteControls:NotifyIcon.ContextMenu>
        </AppsecuteControls:NotifyIcon>

        <Grid Height="auto" HorizontalAlignment="Stretch" VerticalAlignment="Stretch" Width="auto" Margin="12,0,0,24">
            <Grid.RowDefinitions>
                <RowDefinition Height="auto" />
                <RowDefinition Height="*" />
                <RowDefinition Height="auto" />
                <RowDefinition Height="*" />
            </Grid.RowDefinitions>

            <Label Content="APPLICATIONS" Height="auto" Name="LabelApplications" Grid.Row="0" Padding="2" Margin="0,8,0,0" VerticalAlignment="Top" />
            <ListBox Height="auto" Name="ListBoxApplications" Width="auto" Grid.Row="1" Grid.ColumnSpan="3" Focusable="False" Background="White" BorderBrush="{x:Null}" SelectionChanged="ListBoxApplicationsSelectionChanged">
                <ListBox.ItemContainerStyle>
                    <Style TargetType="{x:Type ListBoxItem}">
                        <Setter Property="HorizontalAlignment" Value="Stretch"></Setter>
                        <Setter Property="Padding" Value="0"></Setter>
                        <Setter Property="Background" Value="#EEEEEE"></Setter>
                        <Setter Property="BorderBrush" Value="White"></Setter>
                        <Setter Property="BorderThickness" Value="0,0,0,2"></Setter>
                        <Style.Triggers>
                            <Trigger Property="IsMouseOver" Value="True">
                                <Setter Property="BorderBrush" Value="#FF4EA6EA"></Setter>
                            </Trigger>
                        </Style.Triggers>
                    </Style>
                </ListBox.ItemContainerStyle>
                <ListBox.ItemTemplate>
                    <DataTemplate>
                        <Grid>
                            <Grid.ColumnDefinitions>
                                <ColumnDefinition Width="*" />
                                <ColumnDefinition Width="Auto" />
                            </Grid.ColumnDefinitions>

                            <StackPanel Grid.Column="0" Orientation="Horizontal">
                                <Rectangle Fill="{Binding StateColor}" Width="5" Height="auto" Margin="0,0,5,0"></Rectangle>
                                <StackPanel Orientation="Vertical">
                                    <StackPanel Orientation="Horizontal" Margin="0,4,0,0">
                                        <TextBlock Text="{Binding DisplayName}" FontSize="20" Padding="2" />
                                    </StackPanel>
                                    <StackPanel Orientation="Horizontal" Margin="0,4">
                                        <TextBlock Text="{Binding CloudName}" FontSize="12" Foreground="#FF666666" />
                                        <TextBlock Text=" - " FontSize="12" Foreground="#FF666666" />
                                        <TextBlock Text="{Binding Username}" FontSize="12" Foreground="#FF666666" />
                                    </StackPanel>
                                </StackPanel>
                            </StackPanel>

                            <DockPanel Grid.Column="1" VerticalAlignment="Center" HorizontalAlignment="Right">
                                <Button Background="{x:Null}" BorderBrush="{x:Null}" Focusable="False" Tag="{Binding}" Name="ButtonUpload" ToolTip="Upload Application" Click="ButtonUploadClick">
                                    <StackPanel>
                                        <Image Width="24" Height="24" Source="/Appsecute;component/Images/upload.png"/>
                                    </StackPanel>
                                </Button>
                                <Button Background="{x:Null}" BorderBrush="{x:Null}" Focusable="False" Tag="{Binding}" Name="ButtonStart" Click="ButtonStartClick" ToolTip="Start Application" IsEnabled="{Binding IsStopped}">
                                    <StackPanel>
                                        <Image Width="24" Height="24" Source="/Appsecute;component/Images/play.png" />
                                    </StackPanel>
                                </Button>
                                <Button Background="{x:Null}" BorderBrush="{x:Null}" Focusable="False" Tag="{Binding}" Name="ButtonStop" ToolTip="Stop Application" Click="ButtonStopClick" IsEnabled="{Binding IsStarted}">
                                    <StackPanel>
                                        <Image Width="24" Height="24" Source="/Appsecute;component/Images/stop.png"/>
                                    </StackPanel>
                                </Button>
                                <Button Background="{x:Null}" BorderBrush="{x:Null}" Focusable="False" Click="ButtonRestartClick" Tag="{Binding}" Name="ButtonRestart" ToolTip="Restart Application">
                                    <StackPanel>
                                        <Image Width="24" Height="24" Source="/Appsecute;component/Images/restart.png"/>
                                    </StackPanel>
                                </Button>
                            </DockPanel>
                        </Grid>
                    </DataTemplate>
                </ListBox.ItemTemplate>
            </ListBox>
            <Label Content="SERVICE INSTANCES" Height="auto" Name="LabelServiceInstances" Grid.Row="2" Grid.ColumnSpan="3" Padding="2" Margin="0,8,0,0" VerticalAlignment="Top" />
            <ListBox Height="auto" Name="ListBoxServiceInstances" Width="auto" Grid.Row="3" Grid.RowSpan="2" Grid.ColumnSpan="3" />
        </Grid>
        <Label Height="28" HorizontalAlignment="Left" Margin="0,0,0,0" Name="LabelStatus" VerticalAlignment="Bottom" Width="auto" VerticalContentAlignment="Bottom" HorizontalContentAlignment="Stretch" FontSize="10" />
    </Grid>
</Controls:MetroWindow> 
```

还有我想要实现的图像：

![在此处输入图像描述](../Images/4e13a81919ab904bc6d5d69c43afd885.png)

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-23T03:02:53.660

问题出在下面的第一级*`DataTemplate`*，这里：

```
<StackPanel Orientation="Horizontal" HorizontalAlignment="Stretch"> 
```

从本质上讲， a*`StackPanel`*会将项目向左对齐，因此它不是一个非常适合您想要做的布局。而是尝试使用具有两列的*Grid*，给出 left column*`Width=*`*和 right *`Width=Auto`*。

```
<ListBox HorizontalContentAlignment="Stretch">
    <ListBox.ItemTemplate>
        <DataTemplate>
            <Grid>
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="*" />
                    <ColumnDefinition Width="Auto" />
                </Grid.ColumnDefinitions>
                <StackPanel Grid.Column="0" Orientation="Vertical">
                    ...
                </StackPanel>
                <DockPanel Grid.Column="1" VerticalAlignment="Center">
                    ...
                </DockPanel>
            </Grid>
        <DataTemplate>
    </ListBox.ItemTemplate>
<ListBox> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-23T03:32:01.227

在您的`ItemContainerStyle`中，将 设置`HorizontalAlignment`为`Stretch`。我相信默认情况下它是 Left，这可能会导致 Grid 或 StackPanel 或您使用的任何容器崩溃。

# android - 在 android 中对图像的动画记忆有问题

> ID：11166304
> 
> 赞同：1
> 
> 时间：2012-06-23T02:27:28.977
> 
> 标签：android, image, memory, animation, view

伙计们在显示动画时遇到内存不足的问题，由于某种原因系统似乎一次保存了所有图像，有没有办法告诉它一次只保存一个图像，这里是代码正在使用并将其链接到图像视图，这是代码的一小部分，基本上是相同的，只是有更多图像，谢谢

```
 <animation-list xmlns:
   android="http://schemas.android.com/apk/res/android"
   android:oneshot="false">
   <item android:drawable="@drawable/image1" android:duration="50" />
   <item android:drawable="@drawable/image2" android:duration="50" />
   <item android:drawable="@drawable/image3" android:duration="50" />
   <item android:drawable="@drawable/image4" android:duration="50" />
   <item android:drawable="@drawable/image5" android:duration="50" />
   <item android:drawable="@drawable/image6" android:duration="50" />
   <item android:drawable="@drawable/image7" android:duration="50" />
   <item android:drawable="@drawable/image8" android:duration="50" />
   <item android:drawable="@drawable/image9" android:duration="50" />
   <item android:drawable="@drawable/image10" android:duration="50" />
</animation-list> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-23T02:36:57.800

我强烈建议您减小图像的文件大小，方法是缩小尺寸或更改为不同的文件格式，如 jpg。如果这不起作用，请将其添加到清单中的应用程序标记中：

```
android:largeHeap="true" 
```

# java - 如何在 Java 中制作 Windows 7 工具提示

> ID：11166318
> 
> 赞同：3
> 
> 时间：2012-06-23T02:30:48.970
> 
> 标签：java, windows, swing, windows-7, tooltip

我一直在网上到处寻找，但我没有找到这个小问题的答案。在 Windows 7 中（我认为在 Vista 中）你有一个漂亮的圆形银色工具提示，它看起来比旧的黄色盒装蹩脚的工具提示要好得多。下面的“如何在 Java 中制作 Windows 7 工具提示 - 堆栈溢出”提示是它的显示方式。

![在此处输入图像描述](../Images/376556e3a4a7515badc14ba03463cc2b.png)

所以在 Java 中，我想做到这一点，制作漂亮的新 Windows 工具提示。问题是我不知道该怎么做。

在下面的简单代码之外是一个主要方法，它简单地创建这个类“工具提示”的一个对象。

```
import java.awt.FlowLayout;
import javax.swing.JButton;
import javax.swing.JFrame;
import javax.swing.UIManager;
import javax.swing.UnsupportedLookAndFeelException;

public class Tooltip extends JFrame {
public Tooltip() {

    try {
        UIManager.setLookAndFeel(UIManager.getSystemLookAndFeelClassName());
    } catch (ClassNotFoundException | InstantiationException | IllegalAccessException | UnsupportedLookAndFeelException e) {
        e.printStackTrace();
    }

    setLayout(new FlowLayout());

    JButton button = new JButton("Tooltip Button");
    button.setToolTipText("Tooltip");
    add(button);

    setVisible(true);
    setDefaultCloseOperation(EXIT_ON_CLOSE);
    setSize(250, 160);
    }
} 
```

正如您在 try/multi catch 中看到的那样，我将 Look and Feel 设置为程序当前正在运行的操作系统。如果我在 Windows 上运行这个程序，我会得到糟糕的黄色工具提示。

那么，如果程序在 Windows 操作系统上运行，我必须对代码进行哪些更改才能获得漂亮的银色工具提示？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-23T06:41:57.433

您可能需要为此使用基于 a 的组件`JWindow`，如我对“预览窗口”的回答[（如 Windows 7 任务栏显示已打开的应用程序）](https://stackoverflow.com/questions/10090622/preview-window-like-windows-7-taskbar-shows-for-opened-applications/10093168#10093168)。

![](../Images/d9c80aeed1c3cf42a252608a21cabc1b.png)

对于圆角，请参阅[如何创建半透明和异形窗口](http://docs.oracle.com/javase/tutorial/uiswing/misc/trans_shaped_windows.html)。

![异形窗](../Images/b3cf763154d48a30fd183d6e7da588e8.png)

对于轻微的渐变（斜视），使用[`GradientPaint`](http://docs.oracle.com/javase/7/docs/api/java/awt/GradientPaint.html).

工具提示提供了链接的简单示例中未包含的功能。但这是一个起点。确保您不会意外地将 Windows 7 样式的工具提示丢给 Windows 7 之前的用户或其他操作系统的用户。就像您感觉“方形/黄色 BG”工具提示冲突一样，他们不会发现冲突风格“漂亮”。这导致..

* * *

实现效果的最佳方式是通过基于[Synth Look and Feel](http://docs.oracle.com/javase/tutorial/uiswing/lookandfeel/synth.html)的自定义 PLAF 。

> 创建自定义外观或修改现有外观可能是一项艰巨的任务。该`javax.swing.plaf.synth`软件包可用于轻松创建自定义外观和感觉。您可以通过编程方式或通过使用外部 XML 文件来创建 Synth 外观。

# php - mysql 返回每个 user_id 的总行数

> ID：11166320
> 
> 赞同：1
> 
> 时间：2012-06-23T02:30:55.343
> 
> 标签：php, mysql, sql, aggregate-functions

```
 $sql = "SELECT * FROM books LEFT JOIN users
           ON books.readby=users.user_id WHERE users.email IS NOT NULL";
  $result = mysql_query($sql);
  while($row = mysql_fetch_array($result))
     {
echo $row['readby']. " - read 10 books";
 } //while ends 
```

这是我到目前为止的代码。我正在尝试检索每个用户阅读的书籍数量并回显结果。回显 user_id 和他/她读过的书的数量表是这样的： id - name - pages - readby 行 readby 包含用户 id。有什么想法/建议吗？我正在考虑使用 count() 但我不确定如何去做。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-23T02:35:15.590

你可以`count()`这样使用：

```
<?php
    $count = mysql_fetch_array(mysql_query("SELECT COUNT(`user_id`) FROM books LEFT JOIN users ON books.readby=users.user_id WHERE users.email IS NOT NULL GROUP BY `user_id`"));
    $count = $count[0];
?> 
```

希望这可以帮助！:)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-23T02:42:28.863

子查询可以返回每个用户阅读的书籍数。这与主表左连接以检索有关每个用户的其他列。

**编辑**已`GROUP BY`被省略...

```
SELECT 
  users.*,
  usersread.numread
FROM 
  users
  /* join all user details against count of books read */
  LEFT JOIN  (
    /* Retrieve user_id (via readby) and count from the books table */
    SELECT 
      readby,
      COUNT(*) AS numread
    FROM  books
    GROUP BY readby
  ) usersread ON users.user_id = usersread.readby 
```

然后，在您的 PHP 中，您可以`$row['numread']`在获取结果后进行检索。

```
// Assuming you already executed the query above and checked errors...
while($row = mysql_fetch_array($result))
{
  // don't know the contents of your users table, but assuming there's a 
  // users.name column I used 'name' here...
  echo "{$row['name']} read {$row['numread']} books.";
} 
```

# vb.net - 在 VB.NET 中循环访问控件

> ID：11166323
> 
> 赞同：2
> 
> 时间：2012-06-23T02:31:40.957
> 
> 标签：vb.net

我正在创建一个国际象棋程序。它由 64 个黑白背景颜色交替的画框组成。
我已将它们命名为`pba1`、`pba2`、`pbb1`、`pbb2`等`pbc1`。
现在，我只想循环遍历黑色的，例如，我只想循环遍历 pba1、pbb2、pbc3 等。
如何在 VB.NET 中为此创建一个循环？

我知道循环通过类似命名的控件的方法，但我无法针对我的问题调整该方法。你能告诉我一个解决方案吗？

编辑：在 pba1 中，pb 代表图片框，a1 代表正方形。以防万一，你想知道为什么会有这样的名字。

编辑：看看这个[答案](https://stackoverflow.com/a/11168550/1453258)

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-23T03:15:50.893

循环遍历 ControlCollection 中的 PictureBox 并测试 BackColor。我使用了表单的 ControlCollection，如果它们在其他类型的容器控件中，请使用它。

```
For Each cntrl As Control In Me.Controls
    If TypeOf cntrl Is PictureBox Then
        If cntrl.BackColor = Color.Black Then
            'Do Something
        End If
    End If
Next 
```

* * *

根据您在回答中提供的其他信息，您的示例不起作用的原因是控件名称是一个字符串，并且您将其与 PictureBox 控件而不是控件的名称进行比较。

您可以尝试使用[`Tag`](http://msdn.microsoft.com/en-us/library/system.windows.forms.control.tag.aspx)Property 而不是`Name`Control 的，它会更清晰，更易于阅读。我只是在 PictureBox 的标签属性中为黑色添加了 1，为白色添加了 0。

```
Private Sub OriginalColour()               
    For Each cntrl As Control In Me.Controls
        Dim result As Integer
        If TypeOf cntrl Is PictureBox Then
            If Integer.TryParse(cntrl.Tag.ToString, result) Then
                If result = 1 Then
                    cntrl.BackColor = Color.Gray
                Else
                    cntrl.BackColor = Color.White
                End If
            End If

        End If
    Next
End Sub 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-23T10:06:11.017

在设计时通过表单设计器生成控件只对受益于表单设计器的布局有意义。

在您的情况下，您只有 8 行 8 行中的 64 个统一框。不要为此使用表单设计器，在运行时创建控件，不要给它们命名`pba1`，只需将它们放入适当的数据结构中（例如 8x8 数组）：

```
Private chessFields As PictureBox(8, 8)

' In Form_Load:
For i = 0 To 7
    For j = 0 To 7
        chessFields(i, j) = New PictureBox
        ' Set size, position … then, finally,
        Controls.Add(chessFields(i, j))
    Next
Next 
```

这样，您可以有序地访问字段，而无需通过`Form.Controls`集合。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-23T09:56:59.927

将所有图片框放在一个 8x8 的 tableLayoutPanel 中（也可用于缩放等）。然后

```
 For Each pb As PictureBox In TableLayoutPanel1.Controls
        Dim col As Integer = TableLayoutPanel1.GetCellPosition(pb).Column
        Dim row As Integer = TableLayoutPanel1.GetCellPosition(pb).Row
        If col Mod 2 = 0 Xor row Mod 2 = 0 Then
            pb.BackColor = Color.Black
        Else
            pb.BackColor = Color.White
        End If
    Next 
```

当然，如果您有可用的正方形数组，您也可以使用它。

这不会影响事件（pba1.click 等）。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-02-10T19:26:21.073

这相当简单，它可能会占用大量资源，但它确实有效。我有一个包含 36 个复选框的表单。这利用了这样一个事实，即当您复制复选框时，它只会增加名称的数量。我最终得到了 36 个名为 CheckBox1 到 Checkbox36 的复选框。该函数返回一个复选框，可用于设置或读取任何属性。

```
Private Function GetCheckBox(ByVal Index As Integer) As CheckBox
    Dim CKBox As checkbox
    For Each cntrl As Control In Me.Controls
        If TypeOf cntrl Is CheckBox Then
            CKBox = cntrl
            If CKBox.Name = "CheckBox" & Index Then
                Exit For
            End If
        End If
    Next
    Return ckbox
End Function 
```

# objective-c - 在 obj-c @interface 中转发声明 C typedef 的选项

> ID：11166327
> 
> 赞同：1
> 
> 时间：2012-06-23T02:31:59.140
> 
> 标签：objective-c, automatic-ref-counting, chipmunk

我的 obj-c 类使用 C 库（Chipmunk 物理引擎），它有一个 Obj-C 包装器接口。

我想向我的对象添加一个花栗鼠类型（cpLayers）的属性，如下所示：

```
@interface
@property cpLayers layers;
... 
```

最简单的方法是#import "ObjectiveChipmunk.h"，但是为了获得一种微不足道的类型而导入所有标题似乎很荒谬。

如果我#import cpLayers 定义为“typedef unsigned int cpLayers;”的C“chipmunk_types.h”文件，我会得到与ARC相关的编译器错误。它们是在chipmunk_types.h 中定义并在我的.m 文件中使用的宏中的桥接/转换错误。

如果我只添加定义或#include chipmunk_types.h，我会收到重新定义错误。

有没有更好的方法来做到这一点？为什么会出现 ARC 错误？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-23T14:57:19.647

看看 ObjectiveChipmunk.h，它使用预处理器定义覆盖了基本的 Chipmunk 类型。如果你想解决这个问题，你可以将这些定义添加为编译器标志，但我并不担心。毕竟你已经在做Objective-C编程了，你有没有看过当你导入像Foundation.h这样无害的东西时被引入的大量包含？相比之下，导入完整的 ObjectiveChipmunk.h 标头大约是 1%。

# php - 多字段查询搜索，无需全文搜索

> ID：11166329
> 
> 赞同：0
> 
> 时间：2012-06-23T02:32:59.137
> 
> 标签：php, mysql

查询看起来像这样：

```
$query = "
SELECT $field1, $field2, $field3, $field4, $field5 
FROM . $usertable 
WHERE $field1 = '$a' 
  AND $field2 = '$b'
  AND $field3 = '$c'
  AND $field4 = '$d'
  AND $field5 = '$e'
"; 
```

现在

*   a 是一个 varchar(20)
*   b 是双倍的
*   c 是一个整数
*   d 是一个整数
*   e 是一个 varchar(25)
*   a - e 都是用户输入

**全文搜索不是一种选择**，因为即使不是完全匹配，搜索也必须始终返回结果。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-23T10:33:09.923

使用`LIKE`：

```
$query = "  
SELECT $field1, $field2, $field3, $field4, $field5  
FROM $usertable  
WHERE $field1 LIKE '%$a%'  
  AND $field2 LIKE '%$b%'  
  AND $field3 LIKE '%$c%'  
  AND $field4 LIKE '%$d%'  
  AND field5 LIKE '%$e%'  
"; 
```

如果所有搜索条件都匹配，上述解决方案只会为您提供结果。
如果您正在寻找至少一个匹配的，请使用`OR`over `AND`。

```
$query = "  
SELECT $field1, $field2, $field3, $field4, $field5  
FROM $usertable  
WHERE $field1 LIKE '%$a%'  
  OR $field2 LIKE '%$b%'  
  OR $field3 LIKE '%$c%'  
  OR $field4 LIKE '%$d%'  
  OR field5 LIKE '%$e%'  
"; 
```

在上述两种情况下，如果没有匹配的搜索条件，查询可能不会返回结果。
结果将是一个空集。

# ios - Xcode 4 for Dummies：为什么应用程序运行时没有应用情节提要设置？

> ID：11166332
> 
> 赞同：0
> 
> 时间：2012-06-23T02:34:28.583
> 
> 标签：ios, xcode, storyboard, xcode4.3, ios5.1

**解决方案**

确保在 plist 中将故事板名称列为主故事板文件名。

* * *

我有一个`Storyboard`连接`UINavigationViewController`到一个`NavigationViewController`类的 a ，它被设置为`UIWindow rootViewController`. 当应用程序运行时（在模拟器 (5.1) 中），我得到一个空白的黑屏，顶部带有蓝色导航栏。

第一个问题是在情节提要中，我将导航栏设置为黑色。我还将状态栏设置为半透明黑色。应用程序运行时，这两种样式都不会受到尊重。

第二个问题是导航控制器的视图是空的，即使在故事板中它与`UITableViewController`.

我该如何解决这两个问题。我刚开始再次使用 Xcode，之前一直在使用 4.0，所以故事板让我失望了……

**更新**

这是所要求的代码。显然我不能发布故事板（可以吗？）。

应用委托：

```
#import "AppDelegate.h"

@implementation AppDelegate

@synthesize window = _window;
@synthesize navigationController;

- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions {
    self.window = [[UIWindow alloc] initWithFrame:[[UIScreen mainScreen] bounds]];

navigationController = [[NavigationViewController alloc] init];

    self.window.rootViewController = navigationController;
[self.window makeKeyAndVisible];

    return YES;
}

- (void)applicationWillResignActive:(UIApplication *)application {
}

- (void)applicationDidEnterBackground:(UIApplication *)application {
}

- (void)applicationWillEnterForeground:(UIApplication *)application {
}

- (void)applicationDidBecomeActive:(UIApplication *)application {
}

- (void)applicationWillTerminate:(UIApplication *)application {
}

@end 
```

导航视图控制器：

```
#import "NavigationViewController.h"

@interface NavigationViewController ()
@end

@implementation NavigationViewController

- (id)initWithNibName:(NSString *)nibNameOrNil bundle:(NSBundle *)nibBundleOrNil {
    self = [super initWithNibName:nibNameOrNil bundle:nibBundleOrNil];

if (self) {
    }

    return self;
}

- (void)viewDidLoad {
    [super viewDidLoad];
}

- (void)viewDidUnload {
    [super viewDidUnload];
}

 - (BOOL)shouldAutorotateToInterfaceOrientation:(UIInterfaceOrientation)interfaceOrientation {
    return (interfaceOrientation == UIInterfaceOrientationPortrait);
}

@end 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-23T02:56:55.197

问题是您将一个完全空白的根控制器设置为根控制器，而不是故事板上的那个。您要做的是删除那部分代码，然后在情节提要上单击“是初始视图控制器”的内容

使用故事板时，您通常不必修改 appdelegate，因为 xcode 设置了将出现的初始视图，所有这些仅基于您设置故事板的方式。您可以在 plist 中检查这一点，其中说明将使用哪个故事板作为主要故事板。

如果您想像那样加载导航控制器，那么您可以执行类似的操作，您必须从情节提要本身获取视图控制器并呈现它。

> instanceViewControllerWithIdentifier

但是在使用情节提要时没有必要这样做，因为它会自动加载设置为初始的那个（可以看作是箭头指向它的视图控制器）

您的应用委托方法应如下所示

```
- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions
{
    return YES;
} 
```

# c++ - 无法访问私有对象数据

> ID：11166333
> 
> 赞同：0
> 
> 时间：2012-06-23T02:34:40.497
> 
> 标签：c++, object

所以我正在为我的 OO 课程做这个项目。我们需要创建两个类，Sale 和 Register。我写过销售和注册的大部分内容。我唯一的问题（目前）是我似乎无法从我的注册类访问销售对象的私有成员数据。

销售标头：

```
enum ItemType {BOOK, DVD, SOFTWARE, CREDIT};

class Sale
{
public:
Sale();         // default constructor, 
            // sets numerical member data to 0

void MakeSale(ItemType x, double amt);  

ItemType Item();        // Returns the type of item in the sale
double Price();     // Returns the price of the sale
double Tax();       // Returns the amount of tax on the sale
double Total();     // Returns the total price of the sale
void Display();     // outputs sale info (described below)

private:
double price;   // price of item or amount of credit
double tax;     // amount of sales tax (does not apply to credit)
double total;   // final price once tax is added in.
ItemType item;  // transaction type
}; 
```

注册头：

```
class Register{
public:

Register(int ident, int amount);
~Register();
int GetID(){return identification;}
int GetAmount(){return amountMoney;}
void RingUpSale(ItemType item, int basePrice);
void ShowLast();
void ShowAll();
void Cancel();
int SalesTax(int n);

private:

int identification;
int amountMoney;
int listSize = 5;
int numSales;
Sale* sale;
}; 
```

所以我现在正在尝试编写`RingUpSale()`函数，但我似乎无法访问私有字段。这是我的代码：

```
void Register::RingUpSale(ItemType item, int basePrice){
if(numSales == listSize){
        listSize += 5;
        Sale * tempArray = new Sale[listSize];
        memcpy(tempArray, sale, numSales * sizeof(Sale));
        delete [] sale;
        sale = tempArray;
    }
    sale[numSales]->item = item; //this works for some reason
    sale[numSales]->total = basePrice; // this doesn't
    if(item == 'CREDIT'){ 
            sale[numSales]->tax = 0; // and this doesn't
            sale[numSales]->total = basePrice; // and neither does this
            amountMoney -= basePrice;
    }
    ++numSales;
} 
```

尝试设置销售对象的总计和税收字段在 Eclipse 中出现错误：

```
"Field 'total' cannot be resolved" 
```

我不确定这是为什么或如何解决它。任何帮助，将不胜感激。是的，我在必要时添加了`#include "sale.h"`and 。`#include "register.h"`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-23T04:45:52.760

1.  在您的最后一个片段中，您说，`if(item == 'CREDIT')`但出于多种原因，这是错误的。单引号仅用于单个字符。'item' 的类型为 'ItemType'，它是一个枚举。您应该使用`if(item == CREDIT)`，因为 CREDIT 被定义为枚举元素。否则，该语句会导致与您希望它执行的操作无关的行为。

2.  我认为最好保持对构造函数的初始化（参见listSize）。

3.  您不能从班级外部访问私人成员。您应该将代码的某些部分外部化到另一个类，使公共函数可用，以便在需要时使用参数进行处理，或者创建朋友类（我认为在大多数情况下不赞成这样做，因为它是糟糕设计的标志（又名“我不知道如何做 X，所以我求助于 Y")。

如果您需要更多帮助，也许我明天可以为您提供一些代码，今天有点晚了。

# asp.net-mvc - 使用实体框架 (MVC3 Razor) 更新导航属性

> ID：11166334
> 
> 赞同：1
> 
> 时间：2012-06-23T02:34:56.150
> 
> 标签：asp.net-mvc, entity-framework, razor

我无法弄清楚如何使用实体框架更新我的导航属性。我使用了数据库优先方法并设置了所有适当的 FK 关系。这是我正在使用的两个表的样子：

**费率概况**

*   RateProfileID
*   个人资料名称

**速度**

*   费率ID
*   RateProfileID (FK)
*   我要更新的其他几个属性

一个 RateProfile 可以/将有多个 Rates。我为 RateProfile 构建了我的编辑页面，以显示 RateProfile 实体及其所有关联的 Rate 实体的编辑器，并将所有这些都粘贴在带有提交按钮的表单中。我可以很好地显示所有内容，但我的更改只会持续存在于模型类 (RateProfile) 而不是它的导航属性 (Rates)。

下面是我的视图/HttpPost 编辑/模型在我的 HttpPost 编辑方法中，您可以看到我在模型的导航属性 Rates 中循环和更新每条记录的微弱尝试。

```
@model  PDR.Models.RateProfile

@using (Html.BeginForm()) {
@Html.ValidationSummary(true)
<fieldset>
    <legend>RateProfile</legend>

    @Html.HiddenFor(model => model.RateProfileID)
    @Html.HiddenFor(model => model.LoginID)

    <div class="editor-label">
        @Html.LabelFor(model => model.ProfileName)
    </div>
    <div class="editor-field">
        @Html.EditorFor(model => model.ProfileName)
        @Html.ValidationMessageFor(model => model.ProfileName)
    </div>

    <div class="editor-label">
        @Html.LabelFor(model => model.isDefault)
    </div>
    <div class="editor-field">
        @Html.EditorFor(model => model.isDefault)
        @Html.ValidationMessageFor(model => model.isDefault)
    </div>
    <div>
        <fieldset>
        <legend>Dime</legend>
        <table>
            <tr>
                <th>
                    Min
                </th>
                <th>
                    Max
                </th>
                <th>
                    Price
                </th>
                <th></th>
            </tr>
        @foreach (var rate in Model.Rates)
        {
            <tr>
                <td>
                    @Html.EditorFor(modelItem => rate.minCount)

                    @Html.ValidationMessageFor(model => rate.minCount)
                </td>
                <td>
                    @Html.EditorFor(modelItem => rate.maxCount)
                    @Html.ValidationMessageFor(model => rate.maxCount)
                </td>
                <td>
                    @Html.EditorFor(modelItem => rate.Amount)
                    @Html.ValidationMessageFor(model => rate.Amount)
                </td>
            </tr>
        }
        </table>
    </fieldset>

    <p>
        <input type="submit" value="Save" />
    </p>
</fieldset>
} 
```

* * *

```
[HttpPost]
    public ActionResult Edit(RateProfile rateprofile)
    {

        if (ModelState.IsValid)

        {
            db.Entry(rateprofile).State = EntityState.Modified;

            foreach (Rate rate in rateprofile.Rates)
            {
                db.Entry(rate).State = EntityState.Modified;
            }
            db.SaveChanges();
            return RedirectToAction("Index");
        }
        return View(rateprofile);
    } 
```

* * *

```
public partial class Rate
{
    public int RateID { get; set; }
    public int RateProfileID { get; set; }
    public string Size { get; set; }
    public decimal Amount { get; set; }
    public int minCount { get; set; }
    public int maxCount { get; set; }
    public int PanelID { get; set; }

    public virtual Panel Panel { get; set; }
    public virtual RateProfile RateProfile { get; set; }
}

public partial class RateProfile
{
    public RateProfile()
    {
        this.Rates = new HashSet<Rate>();
    }

    public int RateProfileID { get; set; }
    public string ProfileName { get; set; }
    public int LoginID { get; set; }
    public bool isDefault { get; set; }

    public virtual Login Login { get; set; }
    public virtual ICollection<Rate> Rates { get; set; }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-23T03:26:09.463

您更改`foreach`into`for`语句并尝试模型绑定是否工作正常。

```
@for (var int i = 0; i < Model.Rates; i++)
{
    <tr>
        <td>
            @Html.EditorFor(modelItem => Model.Rates[i].minCount)
            @Html.ValidationMessageFor(model => Model.Rates[i].minCount)
        </td>
        <td>
            @Html.EditorFor(modelItem => Model.Rates[i].maxCount)
            @Html.ValidationMessageFor(model => Model.Rates[i].maxCount)
        </td>
        <td>
            @Html.EditorFor(modelItem => Model.Rates[i].Amount)
            @Html.ValidationMessageFor(model => Model.Rates[i].Amount)
        </td>
    </tr>
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-23T04:17:18.580

那么，当您在 Edit foreach 语句上放置断点并检查 rateprofile.Rates 中的内容时会发生什么？

请记住，从视图返回的模型不是您分发的原始对象，它是在您的控制器函数中从头开始创建的断开连接的对象。

另外，为什么 Rates 是一个 Hashset？不要将你的数据库引用约束与你的 UI 混合，因为它只会增加混乱:)

马克在这里的建议是正确的。表单上的字段应命名为 Rates[0].ProfileName、Rates[1].ProfileName 等，但由于您有一个 HashSet，我不确定 MVC 如何将它们重新生成到模型中。

用断点测试，然后按照 Mark 的建议，我建议你用数组或列表替换 HashSet。

# jsf - 避免JSF中el中的空点异常

> ID：11166338
> 
> 赞同：3
> 
> 时间：2012-06-23T02:35:28.463
> 
> 标签：jsf, el

我正在使用 JPA(EclipseLink 2.0) 和 Primefaces 开发 JSF 应用程序。我想知道当el调用空对象的属性时有什么方法可以避免空点异常。我已经描述了情况。我有比尔课。可能没有或有多个带有 Bill 对象的 BillItem 对象。每个 BillItem 对象都有 Make、Country、Manufacturer 等对象。我正在像这样的单个 JSF 文件中显示账单的多个属性。

```
"#{billControlled.bill.billItem.modal.name}" 
```

但是，如果未选择账单，或者当没有选定账单的账单项目时，EL中访问的属性为null。我可以通过为每个账单创建新对象来避免这种情况，例如，为新账单项目创建新品牌等，或者通过在控制器本身中为所有属性创建新属性。但这是一条很长的路，感觉很初级。

有没有什么好的做法可以避免 JSF 中的 el 中出现这个空点异常？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-23T03:19:39.317

我得到了解决方案。在每个 el 之前，我可以检查 null。

[JSF：h：输出文本；当值为空字符串时如何显示破折号？](https://stackoverflow.com/questions/4787730/jsf-houtputtext-how-to-show-a-dash-when-the-value-is-empty-string)

```
<h:outputText value="#{userHandler.user.phoneNumber != null 
? userHandler.user.phoneNumber : '-'}" /> 
```

或者

```
<h:outputText rendered="#{userHandler.user.phoneNumber ne null}"  value="#{userHandler.user.phoneNumber}" /> 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-06-24T07:59:34.130

解决方案是检查是否为空（您也可以检查是否为空）并与渲染属性一起使用。

Empty 可以很好地与 Collections 一起工作（检查空和 null），也可以与 null 一起工作。

例如：

```
<h:outputText rendered="#{not empty myBean.myData}"  value="..." /> 
```

# c# - 'button1_Click' 没有重载匹配委托 'System.EventHandler'

> ID：11166342
> 
> 赞同：0
> 
> 时间：2012-06-23T02:36:08.820
> 
> 标签：c#

我有这段代码：

```
 using System;
 using System.Collections.Generic;
 using System.ComponentModel;
 using System.Data;
 using System.Drawing;
 using System.Linq;
 using System.Text;
 using System.Threading.Tasks;
 using System.Windows.Forms;

 namespace WindowsFormsApplication1
 {
     public partial class Form1 : Form
     {
         public Form1()
         {
             InitializeComponent();
         }
         public class vars
         {
             public static int x = 250;
             public static int y = 250;
         }
         private void button1_Click(object sender, EventArgs e)
         {
             button1.Visible = false;
             Pen main = new Pen(Color.Black);
             this.Graphics.DrawRectangle(main, vars.x, vars.y, 2, 2);
             while (true)
             {

             }
         }
      }
 } 
```

但是我不断收到一个烦人的错误（'button1_Click' 没有重载匹配委托'System.EventHandler'），我不知道如何处理。我在网上搜索并解决了一段时间，但没有找到任何答案。任何建议，将不胜感激。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-23T02:38:38.830

删除`PaintEventArgs g`代码的一部分。附加到事件的方法必须与事件的“模式”相匹配。

在您自己的类之外声明变量，除非您在 Form1 之外需要它们。它只是不必要的。

```
namespace WindowsFormsApplication1
{
    public partial class Form1 : Form
    {
        int x = 250;
        int y = 250;

        public Form1()
        {
            InitializeComponent();
        }

        private void button1_Click(object sender, EventArgs e)
       {
            button1.Visible = false;
            Pen main = new Pen(Color.Black);
            this.CreateGraphics().DrawRectangle(main, vars.x, vars.y, 2, 2);
       }
    }
} 
```

那应该工作！

# hadoop - 控制 Reducer 结果输出文件/桶

> ID：11166343
> 
> 赞同：0
> 
> 时间：2012-06-23T02:36:33.523
> 
> 标签：hadoop

我有一个应用程序，我想让我的 reducer（我有几个用于 map/reduce 作业）根据要处理的密钥将它们的输出记录到 HDFS 上的不同文件中。因此，如果reducer 看到A 类型的键，应用reduce 逻辑但告诉Hadoop 将结果放入属于A 类型结果的hdfs 文件中，依此类推。显然，多个reducer可以输出A类型结果的不同部分，每个reducer最终可以处理任何类型，如A或B，但告诉hadoop将结果写入A类型存储桶或其他东西

这可能吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-23T03:24:58.730

MultipleOutputs 几乎是您正在寻找的（假设您至少是 0.21 版）。在我自己的工作中，我使用了这个类的克隆，修改后的命名约定更加灵活，可以根据我想要的任何内容将输出发送到不同的文件夹/文件，包括输入记录（键或值）的各个方面。照原样，该类对您可以为输出命名的名称有一些严格的限制。

# c++ - QDbus：服务调用返回 QList

> ID：11166352
> 
> 赞同：4
> 
> 时间：2012-06-23T02:38:57.313
> 
> 标签：c++, qt, pidgin, qdbus

我在从应该返回整数数组的服务调用中检索值时遇到了困难。接口xml文件中的方法调用定义为：

```
<method name="PurpleFindBuddies">
    <annotation name="org.qtproject.QtDBus.QtTypeName.Out0" value="QList&lt;int>"/>
    <arg name="accountId" type="i" direction="in" />
    <arg name="screenName" type="s" direction="in" />
    <arg name="buddies" type="ai" direction="out" />
</method> 
```

qdbusxml2cpp 生成以下方法：

```
 inline QDBusPendingReply<QList<int> > PurpleFindBuddies(int accountId, const QString &screenName)
{
    QList<QVariant> argumentList;
    argumentList << QVariant::fromValue(accountId) << QVariant::fromValue(screenName);
    return asyncCallWithArgumentList(QLatin1String("PurpleFindBuddies"), argumentList);
} 
```

我还添加了

```
Q_DECLARE_METATYPE(QList<int>) 
```

在生成的 .h 文件的顶部。在 main.cpp 中，我进行了以下调用

```
QDBusPendingReply<QList<int> > buddies = pidgin->PurpleFindBuddies(accountId, "email@gmail.com");
buddies.waitForFinished();

if ( buddies.isError() ) {
    qDebug() << buddies.error();
    return -1;
}

qDebug() << buddies.argumentAt(0).toList().size(); 
```

当我启动程序时，我可以从启用的调试输出中看到我得到了结果，如下所示，但是 qDebug() 行打印 0。我不知道如何正确检索结果。

```
QDBusConnectionPrivate(0x138fbc0) got message reply (async): QDBusMessage(type=MethodReturn, service=":1.135", signature="ai", contents=([Argument: ai {859}]) ) 
```

我错过了什么？任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-11T04:13:13.577

所以显然一切都配置正确。但是，当尝试检索数据时，而不是这样做：

```
qDebug() << buddies.argumentAt(0).toList().size(); 
```

我应该一直在做：

```
qDebug() << QString::number(buddies.value().size()); 
```

检索单个 ID

```
foreach(int id, buddies.value() )
    qDebug() << QString::number(id);
// or simply
QList<int> ids = buddies.value(); 
```

# jquery - JQuery 没有正确解析 JSON 响应

> ID：11166355
> 
> 赞同：3
> 
> 时间：2012-06-23T02:40:21.567
> 
> 标签：jquery, asp.net, fullcalendar

我正在使用 jQuery fullcalendar 插件，我尝试过很多不同的方式来改变其他问题的答案，但没有运气，这是我的 jQuery：

```
 $(document).ready(function () {

    var date = new Date();
    var d = date.getDate();
    var m = date.getMonth();
    var y = date.getFullYear();

    $('#calendar').fullCalendar({
        theme: true,

        aspectRatio: 3,
        height: 1000,
        header: {
            left: 'prev,next today',
            center: 'title',
            right: 'month,agendaWeek,agendaDay'
        },
        editable: true,
        events: function (start, end, callback) {
            $.ajax({
                type: "POST",
                url: "Default.aspx/GetEvents",
                data: "{'userID':" + "'B473795D-306A-4718-804B-2813884D5B48'}",
                contentType: "application/json; charset=utf-8",
                dataType: "json",
                success: function (doc) {
                    var events = [];
                    var obj = $.parseJSON(doc.d);
                   var res = unescape(obj);
                    $(res).find('event').each(function () {
                        events.push({
                            title: $(this).attr('title'),
                            start: $(this).attr('start') // will be parsed
                        });
                    });
                    callback(events);
                }
            });
        }
    });
}); 
```

这是我的回应：

```
 {"d":"[{ \"title\"  : \"circleJerk\", \"start\"  : \"2012-06-22\" }, { \"title\"  : \"BangTheWife\", \"start\"  : \"2012-06-15\" , \"end\" : \"2012-06-23\" } ]"} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-23T02:52:30.483

您的方法的返回类型`GetEvents`不是`string`吗？

尝试返回一个`List<Event>`（或任何你的对象被调用），然后你就不需要经历转义 JSON 字符串的混乱。

```
$.ajax({
    type: "POST",
    url: "Default.aspx/GetEvents", //return type List<Event>
    data: "{'userID':" + "'B473795D-306A-4718-804B-2813884D5B48'}",
    contentType: "application/json; charset=utf-8",
    dataType: "json",
    success: function (doc) {
        //doc.d = [Event,Event,Event] (no processing needed)
        callback(events);
    }
}); 
```

作为对您的评论的回应，返回类型为 List<> 的方法将如下所示：

```
[{"title": "sometitle", "start": "yourData"},{"title":"someTitle2", "start":"yourStart2"}] 
```

将 ASP.NET ASMX webmethod`DateTime`序列化转换为 JavaScript`Date`对象：

```
DateFromASPNET = function (sNetDate) {
    if (sNetDate == null) return;
    var r = /\/Date\(([0-9]+)\)\//i
    var matches = sNetDate.match(r);
    if (matches.length == 2) {
        return new Date(parseInt(matches[1]));
    }
    else {
        return sNetDate;
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-23T02:59:48.793

问题是 AJAX 是异步的，因此通过将函数传递给`events`选项，由于 AJAX 调用，不会返回任何内容。

只需将 ajax 选项传递给选项，即可使用插件的内置 AJX 方法 `eventsources`。

来自文档： [http ://arshaw.com/fullcalendar/docs/event_data/events_json_feed/](http://arshaw.com/fullcalendar/docs/event_data/events_json_feed/)

```
$('#calendar').fullCalendar({
   eventSources: [

    // your event source
    {
        url: "Default.aspx/GetEvents",
        contentType: "application/json; charset=utf-8",
        type: 'POST',
        data: "{'userID':" + "'B473795D-306A-4718-804B-2813884D5B48'}"
    }

 ]
}); 
```

编辑：还可以将单个事件源 ajax 选项对象传递给`events`每个文档的选项

# scala - 使用 Play Framework 2.0 向 Twitter API 发送 POST 请求

> ID：11166356
> 
> 赞同：6
> 
> 时间：2012-06-23T02:40:24.747
> 
> 标签：scala, playframework-2.0

如何使用 Play Framework 2.0（使用 Scala）向 twitter API 发送 POST 请求？我尝试调用的 API 与 GET 和 POST 一起使用，并且我已经使用 GET 和以下代码成功调用了它：

```
val followersURL = "http://api.twitter.com/1/users/lookup.json?user_id=" + listOfFollowers.mkString(",")            
WS.url(followersURL)
  .sign(OAuthCalculator(Twitter.KEY, tokens))
  .get()
  .map{ response => 
      val screenName: Seq[String] = response.json match {
          case res: JsArray => res.value.map{ value => (value \ "name").toString }
          case _ => Seq("")
      }
  } 
```

然后我尝试使用 POST 调用 API，如下所示：

```
WS.url("http://api.twitter.com/1/users/lookup.json")
  .sign(OAuthCalculator(Twitter.KEY, tokens))
  .post(Map("user_id"->listOfFollowers))
  .map { response => 
      val screenName: Seq[String] = response.json match {
          case res: JsArray => res.value.map{ value => (value \ "name").toString }
          case _ => Seq("")
      }
  } 
```

它没有用，我得到了这个异常：

```
[error] play - Waiting for a promise, but got an error: null
java.lang.NullPointerException: null
        at java.io.Reader.<init>(Unknown Source) ~[na:1.7.0_01]
        at java.io.InputStreamReader.<init>(Unknown Source) ~[na:1.7.0_01]
        at oauth.signpost.OAuth.decodeForm(OAuth.java:157) ~[signpost-core.jar:na]
        at oauth.signpost.AbstractOAuthConsumer.collectBodyParameters(AbstractOAuthConsumer.java:236) ~[signpost-core.jar:na]
        at oauth.signpost.AbstractOAuthConsumer.sign(AbstractOAuthConsumer.java:96) ~[signpost-core.jar:na]
        at play.api.libs.oauth.OAuthCalculator.sign(OAuth.scala:106) ~[play_2.9.1.jar:2.0.1] 
```

因为它说异常发生在 OAuthCalculator 上，所以我尝试注释掉`.sign`调用，它没有抛出任何异常，但当然我没有得到正确的结果。

难道我做错了什么？我做错了什么，为什么？我该如何解决这个问题？

之前谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-23T17:54:37.273

我发现这个工作：

```
WS.url("http://api.twitter.com/1/users/lookup.json?user_id="+listOfFollowers)
  .sign(OAuthCalculator(Twitter.KEY, tokens))
  .post("ignored")
  .map { response => 
      val screenName: Seq[String] = response.json match {
          case res: JsArray => res.value.map{ value => (value \ "name").toString }
          case _ => Seq("")
      }
  } 
```

我还做了笔记，以便在 Play 的每次重大升级时重新访问我的代码！检查上述是否得到修复，因为这显然是不对的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-11T18:46:23.680

一旦您使用 Play Framework 工具获取用户的令牌和密码，您就可以使用 twitter4j ( `"org.twitter4j" % "twitter4j-core" % "3.0.3"`) 库像这样发布您的帖子。

```
import twitter4j.conf.ConfigurationBuilder
import twitter4j.{StatusUpdate, TwitterFactory}

val config = new ConfigurationBuilder()
  .setOAuthConsumerKey(twitterKey)
  .setOAuthConsumerSecret(twitterSecret)
  .setOAuthAccessToken(token)
  .setOAuthAccessTokenSecret(secret)
  .build()
val twitter = new TwitterFactory(config).getInstance()
val status = new StatusUpdate(tweet)
status.media(photoName, stream)
val twitResp = twitter.updateStatus(status) 
```

不得不使用两个库很烦人，而且 twitter4j 不是异步的，所以它的资源效率略低，但它可以让你做有时需要的真实帖子。

# javascript - 使用 javascript 从页面中删除变量或对象

> ID：11166358
> 
> 赞同：0
> 
> 时间：2012-06-23T02:41:26.137
> 
> 标签：javascript

我使用 delete 关键字删除变量，但它似乎不起作用....

```
var txt = "Some text";
alert(txt); //Output - Some text
delete txt;
alert(txt); //SAME OUTPUT - Some text 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-23T02:51:09.887

`delete`用于删除*属性*，而不是变量。也就是说，它用于从对象中删除属性。

根据[MDN 的解释`delete`](https://developer.mozilla.org/en/JavaScript/Reference/Operators/delete)，“您可以使用 delete 运算符来删除隐式声明的变量，但不能删除使用 var 或 function 语句声明的变量。”

所以你描述的行为是正确的。

# html - 使用 CSS 突出显示活动表单？

> ID：11166359
> 
> 赞同：4
> 
> 时间：2012-06-23T02:41:26.180
> 
> 标签：html, css, forms, focus

```
<!doctype html>
<html lang="en">
    <head>
        <meta charset="utf-8"/>
        <style>
            form:focus{
                background:red;
            }
        </style>
        <title>Home, sweet home</title>
    </head>
    <body>
        <form>
            <input type="text"/>
            <input type="submit"/>
        </form>
        <form>
            <input type="text"/>
            <input type="submit"/>
        </form>
        <form>
            <input type="text"/>
            <input type="submit"/>
        </form>
    </body>
</html> 
```

这显然不起作用，这就是我问这个问题的原因。如果将输入作为突出显示的焦点，我如何获得具有一个的表单？也就是说，我希望能够将样式应用于活动 FORM，而不是活动 INPUT - 没有 JS 或其他东西是否可行？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2017-08-06T18:41:42.780

这是一个较老的问题，但截至目前，一些更流行的浏览器正在支持一个名为 的 CSS 伪选择器`:focus-within`，它可以为具有焦点输入的表单（没有 javascript）设置样式。

这是**当前**对选择器的支持：http: [//caniuse.com/#search=focus-within](http://caniuse.com/#search=focus-within)

如果您使用的是受支持的浏览器，这里有一个**示例**：[https ://codepen.io/jumprope-design/pen/LjxORX](https://codepen.io/jumprope-design/pen/LjxORX)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-23T05:12:07.487

此代码用作练习~~但可能不是您应该使用的解决方案~~. 依赖的版本`legend`实际上似乎可以接受。

没有`form:focus`选择器，所以我认为个人`input:focus`可以使用伪元素创建所需的效果。但是，伪元素[只能用于具有 content 的元素](https://stackoverflow.com/q/2587669/1081234)，就像我要替换`input[type=submit]`为`button`

```
form {
    position:relative;
}
/*style the pseudo-element before a button that is a general sibling
  of any element that currently has focus within a form*/
form *:focus~button:before{
    content:"";display:block;background:red;
    /*take up the entire space of the form*/
    position:absolute;top:0;right:0;bottom:0;left:0;
    /*but render behind its children*/
    z-index:-1;
} 
```

[Fiddled](http://jsfiddle.net/ovfiddle/PEK7h/2/)，但它立即看起来很疯狂，所以我重构了解决方案以[依赖`legend`element](http://jsfiddle.net/ovfiddle/PEK7h/3/)。享受 ：）

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-06-23T02:53:02.613

CSS 中没有父选择器，因此需要 javascript。然而，CSS 4 计划获得此功能。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-08-17T19:59:13.150

一段时间以来，我一直在寻找相同的造型技术。从 UI/UX 的角度来看 - 将搜索表单简化为单个元素在某些情况下很有意义。

*考虑下面的例子：*

![搜索表单示例](../Images/48ac854499589d99daa958664e9c76cd.png)

当您从开发的角度处理它时，下意识地决定为表单本身而不是输入元素设置样式。左侧有一个透明的 input[type=text]，右侧有一个透明的 .PNG 提交按钮，您就有了一个清晰的搜索字段。

正如您所发现的，您放弃了与 :focus 相关的 CSS 样式功能，因为输入字段不是控制背景/颜色等的字段 - 而是表单元素。

form:focus 选择器将是处理该问题的完美方式。不幸的是，我们不得不等待 CSS4 来解决这个问题（感谢 matt3141 的花絮）。

与此同时，您有几个选择

* * *

## 选项 1 - 放弃可点击的提交按钮

如果可能，我通常会尽量避免这种情况，但您可以选择完全放弃提交按钮。按照您的预期设置文本字段的样式，并使用位置限制在字段左侧或右侧的背景图像。当用户输入他们的查询并按下回车键时，您仍然可以触发 GET 操作。上面的示例图像使用了这种技术。

*示例：[http ://designdisease.com/](http://designdisease.com/)*

优点：最容易设置。

缺点：仍然点击搜索按钮的用户可能会感到困惑。

* * *

## 选项 2 - 使用替代元素来设置背景样式

您的下一个选择是利用 ov 在他/她之前的回答中如此慷慨地解释的兄弟选择器和内容标签。当 :focus 效果应用于输入字段时，此效果添加了一个新元素并将其设置为指定区域的新背景。

*示例：http: [//jsfiddle.net/ovfiddle/PEK7h/2/](http://jsfiddle.net/ovfiddle/PEK7h/2/)*

优点：更容易扩展到具有多个字段的更大表单。

缺点：密集的选择器可能不会像我们希望的那样优雅地降级。

* * *

## 选项 3 - 使用绝对定位来堆叠元素

在文本字段将包含表单的整个宽度的情况下，您可以使用 position:absolute; 属性来简单地将提交按钮加载到输入元素的顶部，然后在按钮上进行一些 css 调整以删除背景/边框 - 产生与我们上面的示例图像相同的效果，但增加了使其可点击的好处。

**第一步：**给表格一个位置——相对/绝对/固定。

**第二步：**为文本字段设置 100% 的宽度。

**第三步：**给按钮一个绝对位置，右边位置为0。

我已经更新了 ov 的小提琴以融入新技术：

*示例：http: [//jsfiddle.net/PEK7h/17/](http://jsfiddle.net/PEK7h/17/)*

Pro's：优雅地降级，在大多数单输入字段情况下为我们提供我们想要的东西。

缺点：不像 ov's fix 那样容易扩展到大型表单。

--

正如您所看到的，每个选项都有其自身的缺点 - 但如果您提前了解它们，通常可以减少它们的影响。希望这可以帮助！

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-23T03:10:54.633

您不能“专注”于表单。您只能使用 CSS“关注”表单内的表单元素（可编辑和启用）。希望这可以帮助。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-06-23T02:58:48.187

如果页面中有多个表单，没有 JS，渲染器将无法链接样式表和表单。最好的方法是使用表单名称/ID 并让 JavaScript 在表单获得焦点时应用样式表。

# javascript - Javascript\Kango：如何在非异步函数中返回异步 JS 函数？

> ID：11166360
> 
> 赞同：1
> 
> 时间：2012-06-23T02:41:30.480
> 
> 标签：javascript, jquery, asynchronous, browser-extension

问这个问题我的理论可能有点弱，所以请随时告诉我。

此代码是使用[Kango 框架](http://kangoextensions.com/kango.html)的浏览器插件的一部分。基本上我有代码生成一个随机字符串，它是一个用户ID。我还有另一个设置大 ole JSON 的函数。它看起来像这样：

```
function createJSON() {
data = {};
data["userID"] = generateID();
}

function generateID() {
kango.invokeAsync('kango.storage.getItem', 'userID', function(data) {
    uid = data;

    if (!uid) {
      console.log("uid doesn't exist, creating uid!");
      kango.invokeAsync('kango.storage.setItem', userID, function(data) { return data; });
    } else {
      console.log("uid found!: " + uid);
      return uid;
    }

    return data;
  });
} 
```

[kango.invokeAsync 文档在这里](http://kangoextensions.com/docs/api-reference/kango.html?highlight=invoke#kango.invokeAsync)。我的理解是它的工作原理有点像异步 ajax 调用，从这个意义上说，当我尝试将其值分配给数据 [“userID”] 时，它不会及时返回。

我想我可以通过先执行 userID 调用然后使用它的回调（这里的术语有点模糊）继续添加到数据数组来解决这个问题。

我不知道这是否是正确的方法。如何获得要使用的异步函数的返回？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-23T08:26:46.020

[更仔细地查看文档](http://kangoextensions.com/docs/api-reference/kango.html#kango-invokeasync)中的 invokeAsync 示例。

在您的代码中，您有两个错误`invokeAsync`并`kango.storage.setItem`调用：

```
// 1\. Second argument should be string 'item name'
// 2\. Third argument should be 'item value'
kango.invokeAsync('kango.storage.setItem', userID, function(data) { callback(data); }); 
```

您应该以这种方式使用[kango.storage.setItem ：](http://kangoextensions.com/docs/api-reference/kango-storage.html#kango-storage-setitem)`invokeAsync`

```
kango.invokeAsync('kango.storage.setItem', 'userID', '123'); 
```

因此，结果代码将如下所示：

```
function generateID(callback) {
    kango.invokeAsync('kango.storage.getItem', 'userID', function(uid) {
        if(!uid) {
            kango.console.log("uid doesn't exist, creating uid!");
            uid = '123'; // TODO: replace with your ID generation algorithm
            kango.invokeAsync('kango.storage.setItem', 'userID', uid);
        }
        else {
            kango.console.log("uid found!: " + uid);
        }
        callback(uid);
    });
}

data = {};
generateID(function(uid) {
    data["userID"] = uid;
}); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-23T02:44:10.917

由于 generateID() 的异步性质，您不能这样做。它将在异步调用完成之前返回，因此数据不可用：

```
data["userID"] = generateID(); 
```

相反，您必须使用这样的回调：

```
generateID(function(val) {data["userID"] = val;});

function generateID(callback) {
kango.invokeAsync('kango.storage.getItem', 'userID', function(data) {
    uid = data;

    if (!uid) {
      console.log("uid doesn't exist, creating uid!");
      kango.invokeAsync('kango.storage.setItem', userID, function(data) { callback(data); });
    } else {
      console.log("uid found!: " + uid);
      callback(uid);
    }

  });
} 
```

使用异步函数时，不能使用正常的顺序编程。相反，您必须在完成回调中继续执行流程，因为只有这样才能知道异步函数的结果。

因此，您将无法从中调用`createJSON()`并返回所需的值。如果之后的任何代码`createJSON()`需要结果，它也必须在回调中。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-23T02:47:51.463

```
function createJSON() {
  data = {};
  generateID(function(id) {
    data["userID"] = id;
  });
}

function generateID(callback) {
  kango.invokeAsync('kango.storage.getItem', 'userID', function(data) {
  uid = data;

  if (!uid) {
    console.log("uid doesn't exist, creating uid!");
    kango.invokeAsync('kango.storage.setItem', userID, function(data) { callback(data); });
  } else {
    console.log("uid found!: " + uid);
    callback(uid);
  }

  callback(data);
});
} 
```

这对你有用吗？

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-23T02:50:38.503

您不能从异步调用中返回对象。而是创建另一个函数并将回调对象传递给它。

```
// some code
if (!uid) {
  console.log("uid doesn't exist, creating uid!");
  kango.invokeAsync('kango.storage.setItem', userID, function(data) { 
    getData(data); 
  });
} else {
  console.log("uid found!: " + uid);
  getData(uid);
}

function getData(data) {
    // Use data here.
} 
```

# objective-c - 在 iOS 中使用 clock() 函数获取抽动

> ID：11166361
> 
> 赞同：1
> 
> 时间：2012-06-23T02:41:30.717
> 
> 标签：objective-c, ios, c, time.h

我试图使用 C [clock()函数在](http://www.cplusplus.com/reference/clibrary/ctime/clock/)[iOS](http://en.wikipedia.org/wiki/IOS)应用程序中获取抽动，但它更新非常缓慢。看起来 wich 中的线程正在运行（在 UIViewController 中运行）大部分时间都处于非活动状态。当前抽动的一次测量与随后的抽动测量之间的差异应该非常大，但它变化很小，除非我经常触摸屏幕。

有没有办法在iOS中使用这个功能并获得好的结果？iOS有类似的库吗？我想用它来为游戏创建一个计时器。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-23T03:50:02.333

`clock()` measures cpu time used, not wall clock, could that be what you're seeing?

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2012-06-23T02:51:43.310

为什么不试试这个`sleep`功能？

```
sleep(X); 
```

X 是毫秒数。

# facebook - 一个fb用户可以在同一天向所有朋友发送一个apprequest，不管有多少？

> ID：11166363
> 
> 赞同：0
> 
> 时间：2012-06-23T02:42:05.137
> 
> 标签：facebook, facebook-javascript-sdk, apprequests

您好，我正在使用此功能，该功能由单个 ID ( `52000121`) 和逗号分隔的 ID ( `5000000,500002,500004,000002001`)

```
function invite(id) {

        FB.ui({method: 'apprequests',
          message: '<?=get_texto_clave('wants_you_to_join')?>',
          title: '<?=get_texto_clave('send_app_request')?> <?=$_SESSION['alias']?>',
          to: id, 
        }, function(response){
            if(response!=null){
                var invitados = id.split(',');
                for( i=0; i<invitados.length; i++){
                     $('#friend_'+invitados[i]).addClass('invited');
                     $('#friend_'+invitados[i]+' .inviteButton').addClass('invitedBtn').text('<?=get_texto_clave('Invitado')?>');
                }
            }
        });
} 
```

似乎工作正常，

但我刚刚向我的朋友发送了 500 多个邀请，他们都得到了“邀请”课程（当我完成弹出窗口时）；

¿ 他们都收到了吗？

我知道响应调试可能会更好，但仍然想知道用户是否可以在同一天向他的所有朋友发送邀请，无论有多少朋友。还是有任何用户/应用程序限制？

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-23T06:09:45.710

您发送的应用请求没有限制

但是如果你使用多好友选择器，在 IE 中最多可以选择 50 和 25。

自然，如果您是垃圾邮件，您仍然会收到很多报告，并且自动化系统可能会阻止您，因此请记住保持合理的请求数量。

> 顺便说一句，您可以阅读回复以了解其发送给谁。

# ruby - 在 Ruby/Rails 中清理文件名

> ID：11166368
> 
> 赞同：3
> 
> 时间：2012-06-23T02:43:02.593
> 
> 标签：ruby, mime-types

为了确定附加文件的文件类型，我使用了操作系统“文件”实用程序：

```
class AttachedFileTypeValidator < ActiveModel::Validator
  def validate(record)
    file = record.resource.uploaded_file
    attached_file = Rails.root + file.path
    file_type = `file #{attached_file}`
    Rails.logger.info "Attached file type determined to be: #{file_type}"
    unless file_type.split(',').first =~ /ASCII|UTF/
      record.errors[:resource_content_type] << "Attachment does not appear to be a text CSV file, please ensure it was saved correctly."
    end
  end
end 
```

不幸的是[，brakeman](https://github.com/presidentbeef/brakeman "刹车手")建议它是一个命令行注入机会。我假设这意味着有人想出一个聪明的文件名称，例如：

```
; rm -rf /; 
```

我们走了。什么是清理文件名的好方法？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-23T03:14:06.970

使用[IO#popen](http://www.ruby-doc.org/core-1.9.3/IO.html#method-c-popen)调用外部命令：

```
file_type = IO.popen(['file', attached_file]).read 
```

这将为您处理文件名中有趣字符的正确转义。

# java - 是否有可能使 IntelliJ 显示提示更加健壮？

> ID：11166371
> 
> 赞同：1
> 
> 时间：2012-06-23T02:44:00.003
> 
> 标签：java, coding-style, editor, intellij-idea, hint

我用了很长时间的Eclipse。在 Eclipse 中，可以按 F2 并且提示（例如关于错误）不会消失，我也可以直接从提示中复制消息。但是在 IntelliJ Idea（现在开始使用）中，提示会显示几毫秒。是否可以通过配置文件中的设置或更改来修复？谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-26T17:17:45.537

`Help > Default Keymap Reference`在 IntelliJ 菜单中查看。也许`Ctrl-q`或者`Ctrl-F1`是您正在寻找的东西？

您始终可以在 IDEA 中重新映射按键，并非所有功能默认都有按键，但可以添加。

# css - 如何使用 CSS 每隔几秒旋转一次图像和文本？

> ID：11166382
> 
> 赞同：0
> 
> 时间：2012-06-23T02:46:51.873
> 
> 标签：css

在我网站的一部分中，我想在每个图像下插入一些图像和文本，并且我希望图像和文本每隔几秒钟旋转一次。是否可以只使用CSS？

我用谷歌搜索过，但我只找到了使用 Java Script 或 Flash 左右的解决方案。也可以使用 CSS3 @keyframes。但问题是IE和Opera都不支持。我正在寻找一个也兼容的纯 CSS 解决方案。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-23T02:51:17.053

仅使用 css 是不可能的。您可以使用 CSS 3 制作一些不错的图片库；但是，据我所知，它们不会自动旋转。此外，由于 IE 不支持大多数 CSS 3 功能，如果您需要支持 IE，则必须使用 javascript 或 flash。

您可能想查看[jquery-image-slider-plugins它是](http://www.tripwiremagazine.com/2012/02/jquery-image-slider-plugins.html)[http://www.tripwiremagazine.com/](http://www.tripwiremagazine.com/)上的一篇文章，其中列出了您可能感兴趣的几个不错的图像旋转器插件。

**编辑**：

对于您在评论中链接的页面。它使用 javascript 作为图片旋转器。从我读过的内容来看，这个插件似乎来自[http://jquery.malsup.com/cycle/download.html](http://jquery.malsup.com/cycle/download.html)。这些是我认为用于它的两个文件：

```
<script src="http://livedemo00.template-help.com/drupal_38002/sites/all/libraries/jquery.cycle/jquery.cycle.all.min.js?lzqlgq" type="text/javascript">
<script src="http://livedemo00.template-help.com/drupal_38002/sites/all/modules/views_jqfx_cycle/views_jqfx_cycle.js?lzqlgq" type="text/javascript"> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-23T02:53:18.457

是的，我不认为你可以停止它并重新开始。这绝对是一个有用的 CSS 功能。

在我调查的时候发现了这个：[http ://codepen.io/whootboy/pen/simple_css_3d_cubes/1](http://codepen.io/whootboy/pen/simple_css_3d_cubes/1)

不是你要找的，但有趣的是动画如何与 CSS 一起工作

# iphone - 在iOS中，如何将当前时间的当前小时、分钟和秒保存到单独的整数中？

> ID：11166386
> 
> 赞同：1
> 
> 时间：2012-06-23T02:47:26.603
> 
> 标签：iphone, ios, api, ios5

在 iOS 中，是否可以将小时、分钟、秒保存到当前时间的不同整数变量中？

谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-23T02:58:46.133

是的你可以：

```
NSCalendar *calendar = [NSCalendar currentCalendar];
NSDateComponents *components = [calendar components:(NSHourCalendarUnit | NSMinuteCalendarUnit | NSSecondCalendarUnit) fromDate:[NSDate date]];
NSInteger hour = [components hour];
NSInteger minutes = [components minute];
NSInteger seconds = [components second]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-23T02:56:36.723

这是一种表示：

```
CFGregorianDate date =
       CFAbsoluteTimeGetGregorianDate(CFAbsoluteTimeGetCurrent(), tz); 
```

（你打算如何*拯救*那个otoh……）

# mysql - mySQL 查询；忽略特定的 ID 值

> ID：11166388
> 
> 赞同：1
> 
> 时间：2012-06-23T02:47:50.643
> 
> 标签：mysql

我需要做一个 mySQL 查询，但不确定格式应该是什么。

这是情况，我有一个包含字段的表 - id、name、type

我将使用类似于以下的查询从表中获取结果：

```
SELECT * FROM table WHERE type='1' 
```

但是，我有一个来自另一个查询的 ID 列表。这些是应从结果中排除的项目。

我确信答案很简单，但我对 mySQL 查询的了解还不够，无法找到答案。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-23T02:52:55.460

一个简单的 NOT IN 将是您想要的 :) 它可以让您发送一个值列表并确保它不在其中 :)

```
SELECT * FROM table WHERE ID NOT IN (1,2,3) 
```

您也可以使用子查询来执行此操作，例如：

```
SELECT id FROM table WHERE ID NOT IN (SELECT id FROM table2 WHERE type = 1) 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-23T02:56:42.867

您可以使用`NOT IN`这样的查询：

```
SELECT * FROM `table` WHERE `type`=1 WHERE `id` NOT IN (SELECT `blocked_ids` FROM `block`); 
```

因此，您将在`block`表中阻止 ID！希望这可以帮助！:)

考虑这张表：

```
+----+-------------+
| id | name        |
+----+-------------+
|  1 | America     |
|  2 | Europe      |
|  3 | India       |
|  4 | Japan       |
|  5 | Brazil      |
|  6 | Switzerland |
|  7 | Syria       |
|  8 | Wales       |
|  9 | Taiwan      |
| 10 | Zaire       |
+----+-------------+ 
```

和被封锁的桌子：

```
+-----+
| IDs |
+-----+
|   1 |
|   4 |
|   6 |
|   8 |
|   9 |
+-----+ 
```

现在，当我提出如下查询时：

```
SELECT * FROM `countries` WHERE `id` NOT IN (SELECT * FROM `blocked`); 
```

我得到这个结果：

```
+----+--------+
| id | name   |
+----+--------+
|  2 | Europe |
|  3 | India  |
|  5 | Brazil |
|  7 | Syria  |
| 10 | Zaire  |
+----+--------+ 
```

希望这可以帮助！:)

# c++ - 为什么 cout.tellp 总是返回 -1？

> ID：11166398
> 
> 赞同：7
> 
> 时间：2012-06-23T02:50:15.347
> 
> 标签：c++, iostream, cout

我想为 C++ 文本输出流提供类似选项卡的功能。该功能应该允许我说“注意这个位置”，然后允许多次插入操作，最后允许我说“添加足够的填充字符以便结束`N`字符超过最初记录的位置”。

标准`iostream`系统似乎没有保持列位置，但我认为我可以使用`tellp()`. `tellp()`我的假设是我的输出序列中两点之间的差异将对应于中间字节的数量。

不幸的是，至少在我的 Gnu C++ 环境中，`cout`并没有保持流位置的虚构。每次`cout.tellp()`通话`returns -1`。这是为什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-23T02:58:11.950

tellp 在流中返回一个位置，以便您可以寻找它。控制台不允许搜索。此外，即使您将位置解释为“自创建以来写入流的字节数”，该数字也不会用于光标定位 - 屏幕环绕，其宽度通常是不可预测的。你只是不知道你在哪一列，因为行长是可变的。

如果您想在屏幕上合理定位光标，请查看 ANSI 终端规范和随附的转义命令。它们允许光标位置发现和放置。

[http://ascii-table.com/ansi-escape-sequences.php](http://ascii-table.com/ansi-escape-sequences.php)

一般来说，屏幕不是流。就此而言，键盘也不是:)

# objective-c - 访问超级视图属性

> ID：11166399
> 
> 赞同：0
> 
> 时间：2012-06-23T02:50:33.327
> 
> 标签：objective-c, c, view, parent, subview

我已经搜索了这个问题的答案，但我找到的答案不起作用。

我有一个视图，它是 UIView 的子类，我向其中添加了一个属性。我想从这个视图创建的子视图中访问这个属性。那可能吗？

我试过引用 self.superview.propertyname，但我得到一个错误，即在 UIView 类型的对象上找不到属性名。嗯，对。我意识到，因为它是 UIView 的子类，所以它是一个 UIView，但是我怎样才能让它知道我添加的额外属性呢？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-23T03:00:35.987

你有很多选择，其中两个是：

**1、铸造：**

```
@implementation SubviewView
- (void)blah
{
  ((CustomView *)self.superview).property = ...`
}
@end 
```

**2\. 代表：**

```
@protocol SubviewViewDelegate
- (void)customView:(SubView *)sv modified:(...)value;
@end

@class SubView
@property (nonatomic, weak) id <CustomViewDelegate> delegate;
@end

@implementation SubviewView
- (void)blah
{
  [self.delegate subView modified:...];
}
@end

@implementation CustomView
- (void)subView:(SubView *)sv modified:(...)value
{
  self.property = value;
}
@end 
```

虽然第二种选择是更多的代码，但我认为它通常更适合。[使用委托可以减少耦合并与得墨忒耳法则](http://en.wikipedia.org/wiki/Law_of_Demeter)很好地配合使用。有关详细信息，请参阅此[文档](https://developer.apple.com/library/ios/#documentation/Cocoa/Conceptual/ObjectiveC/Chapters/ocProtocols.html#//apple_ref/doc/uid/TP30001163-CH15-SW1)。

# objective-c - 调用 NSFetchedResultsController 的 fetchedObjects 属性会导致所有对象出错吗？

> ID：11166407
> 
> 赞同：0
> 
> 时间：2012-06-23T02:51:50.497
> 
> 标签：objective-c, ios, core-data

我正在尝试调试[我遇到的一个奇怪问题](https://stackoverflow.com/questions/11166271/why-are-all-my-nsmanagedobjects-being-faulted-immediately)，但我完全不知道从哪里开始。这个问题很简单：

我有一个 fetch 请求，它返回大约 2000 个对象，但 batchSize 为 15。所以只有 15 个对象被加载到内存中，其余的在需要时出错。我遇到的问题是，由于某种原因，当获取请求完成时，我的所有对象都会立即出现故障。这大约需要 20 秒。我不明白为什么会这样。

这一定意味着我正在以某种方式访问​​所有这些对象，导致它们都出现故障。调用是否`fetchedResultsController.fetchedObjects.count`会导致所有对象发生故障？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-23T02:59:42.210

文件说这个`fetchedObjects`

> 如果获取请求没有谓词，则结果数组包括获取请求指定的实体的所有实例。

你想做什么？获取计数的正确方法是这样的：

```
id <NSFetchedResultsSectionInfo> sectionInfo = [controllers sections] objectAtIndex:section];

return [sectionInfo numberOfObjects]; 
```

# django - django - 将标头从管理员复制到所有模板

> ID：11166413
> 
> 赞同：4
> 
> 时间：2012-06-23T02:53:44.413
> 
> 标签：django, django-admin, django-templates

所以我想做的是在我自己的项目基本模板中添加 django 管理头。我将 base.html 从管理模板复制到我的项目中。我可以以某种方式将 {% block header %} 标签放在 base.html 中，然后在我自己的项目基本模板中调用它吗？

```
{% block header %}
<!-- Header -->
<div id="header">
    <div id="branding">
    {% block branding %}{% endblock %}
    </div>

    {% if user.is_active and user.is_staff %}
    <div id="user-tools">

        {% trans 'Hi,' %}

        <strong>{% filter force_escape %}{% firstof user.first_name user.username %}{% endfilter %}</strong>.
        {% block userlinks %}
            {% url 'django-admindocs-docroot' as docsroot %}
            {% if docsroot %}
                <a href="{{ docsroot }}">{% trans 'Documentation' %}</a> /
            {% endif %}
            <a href="{% url 'admin:password_change' %}">{% trans 'Change password' %}</a> /
            <a href="{% url 'admin:logout' %}">{% trans 'Log out' %}</a>
        {% endblock %}
    </div>
    {% endif %}
    {% block nav-global %}{% endblock %}
</div>
<!-- END Header -->
{% endblock %} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-24T16:28:42.743

扩展自的所有模板都将包含and`'base.html'`中的内容，只要它们不覆盖块或其祖先（通过删除部分）。`{% block header %}``{% endblock %}``{% block header %}...{% endblock %}`

如果有不从 扩展的模板`base.html`，您可以将代码放入它们的公共基础中，或使用[内联标签](https://docs.djangoproject.com/en/dev/ref/templates/builtins/#include)或[包含标签之类的东西](https://docs.djangoproject.com/en/dev/howto/custom-template-tags/#inclusion-tags)

此外，为了使代码对经过身份验证的用户正常工作，您需要确保上下文中存在变量：通常它已经存在，或者如果您之前已将其删除，则`user`需要重新启用，检查[文档](https://docs.djangoproject.com/en/dev/ref/settings/#std%3asetting-TEMPLATE_CONTEXT_PROCESSORS)`"django.contrib.auth.context_processors.auth"`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-12T03:09:02.540

我最终从管理员“base.html”模板扩展了我的主模板并从那里开始。有点乱，但它的工作原理

# objective-c - NSString initWithBytes 结果在 iOS 上是错误的

> ID：11166415
> 
> 赞同：0
> 
> 时间：2012-06-23T02:54:13.803
> 
> 标签：objective-c, ios, nsstring

代码在这里：

```
 NSString * str = [[NSString alloc] initWithFormat:@"abcdefgh"];
    void * pbuffer = malloc(128);
    memset(pbuffer, 0, 128);
    NSUInteger nsu;
    NSRange range = NSMakeRange(0, 128);
    [str getBytes:pbuffer maxLength:128 usedLength:&nsu encoding:NSUnicodeStringEncoding options:0 range:range remainingRange:nil];

    NSString * str2 = [[NSString alloc] initWithBytes:pbuffer length:128 encoding:NSUnicodeStringEncoding]; 
```

然后我会看到字符串 str 和 str2 结果会有所不同。缓冲区仍然是正确的，内存就像“61 00 62 00 ....”。str2 中的内存就像“00 61 00 62 ....”。

我的测试代码有什么问题？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-23T03:02:39.330

使用`NSUTF8StringEncoding`代替`NSUnicodeStringEncoding`

# php - 使用 str_replace() 从 ' 转换为 " 时出错

> ID：11166417
> 
> 赞同：-1
> 
> 时间：2012-06-23T02:54:30.173
> 
> 标签：php

```
<?php
$str='<p style="text-align: center;">
<img style="width: 448px; height: 321px;" src="http://admin.vn/images/images/car_1.jpg" alt="">
</p>';
$search='"';
$replace=''';
$string= str_replace($search,$replace,$str);
echo $string;
?> 
```

当我回显 $string 结果没有从 " 转换为 ' 时，如何解决它

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-23T02:57:38.260

在您的原始代码中，您将一个未定义的变量 ( `$str`) 传递给[str_replace](http://php.net/manual/en/function.str-replace.php)函数
，我相信您的意图是将`$tr`变量传递给 str_replace 函数。

此外，在您的`$replace`变量中，我已将其更改为在字符之间使用双引号 (")。

```
<?php
$tr='<p style="text-align: center;">
<img style="width: 448px; height: 321px;" src="http://admin.vn/images/images/car_1.jpg"     alt="">
</p>';
$search= '"';
$replace= "'";
$string = str_replace($search,$replace,$tr);
echo $string;
?> 
```

更改`$str`为未定义的`$tr`。如果你改变你的双引号`$str`也会有帮助`$replace`

```
 $replace= "'"; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-23T02:57:09.967

您将文本存储在 $tr 而不是 $str 中。

```
<?php
$tr='<p style="text-align: center;">
<img style="width: 448px; height: 321px;" src="http://admin.vn/images/images/car_1.jpg" alt="">
</p>';
$search='"';
$replace="'";
$string= str_replace($search,$replace,$tr); // Changed to $tr
echo $string;
?> 
```

并确保转义`'`in `$replace=''';`（或使用“”）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-23T02:58:40.760

`$replace=''';`是不正确的。你需要逃避第二个`'`。

使用任一

`$replace = "'"`这样单引号就不会干扰，或者 `$replace = '\''`逃脱中间的单引号。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-23T02:59:12.403

逃避报价。

```
$replace='\''; 
// or
$replace="'"; 
```

# mysql - Ruby 中的 SQL 查询：仅选择更改

> ID：11166419
> 
> 赞同：0
> 
> 时间：2012-06-23T02:55:21.667
> 
> 标签：mysql, sql, ruby-on-rails, ruby, select

假设我有一个这样的表（`PriceHistory`），每次更改行中的**任何内容**时，我都会在表中再次记录**整**行。

```
id | buy_price | sell_price | change_date
 1 |         2 |          2 | 2012-06-22
 2 |         3 |          2 | 2012-06-20
 3 |         2 |          6 | 2012-06-15
 4 |         5 |          5 | 2012-06-15
 5 |         5 |          7 | 2012-06-15
 6 |         4 |          8 | 2012-06-12 
```

我只关心 的变化`BuyPrice`，有没有办法只选择第 1、2、3 和 5 行？

这是我想出的 Ruby 代码，但它不仅选择更改的行

```
PriceHistory.select("id, BuyPrice, change_date").
order("change_date DESC") 
```

Ruby 和 SQL 的答案都很好。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-23T04:21:31.220

尝试这个：

```
@histories = PriceHistory.select("id, BuyPrice, change_date").order("change_date DESC")

(@histories.size - 1).times do |n|
  if @histories[n].buy_price != @histories[n+1].buy_price
    puts "changed from : " + @histories[n].id.to_s + " to: " + @histories[n+1].id.to_s
  end
end 
```

祝你好运！

# c++ - 如何在 C/C++ 中完成此功能

> ID：11166429
> 
> 赞同：7
> 
> 时间：2012-06-23T02:57:42.247
> 
> 标签：c++, c, macros

我需要一个宏来帮助输出给定参数的名称和值。它类似于以下代码。

```
#define AA "Hello"
#define BB "World"
#define PRINT(input_param) printf("input_param: %s\n", (input_param))
void main()
{
  PRINT(AA);
  PRINT(BB);
} 
```

我期待结果：`AA: Hello\n BB: World\n`

但显然不是。任何人都可以纠正我吗？谢谢。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-06-23T03:01:46.110

您需要使用 对宏名称进行字符串化`#`。这也是如何`assert()`工作的：

```
#define AA "Hello"
#define BB "World"
#define PRINT(input_param) printf(#input_param ": %s\n", (input_param))
void main()
{
  PRINT(AA);
  PRINT(BB);
} 
```

如果我这样写可能会更清楚：

```
#define PRINT(input_param) printf("%s: %s\n", #input_param, (input_param)) 
```

# android - 使用选项卡在 android 应用程序中更改焦点

> ID：11166431
> 
> 赞同：0
> 
> 时间：2012-06-23T02:58:06.003
> 
> 标签：android, focus

我是 android 编程新手。我想使用 TAB（在键盘中）将焦点更改为下一个编辑文本框。请告诉我该怎么做。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-23T03:09:27.327

`android:nextFocusDown`在所有 EditText 中使用 Xml 属性

如果您想以编程方式使用它（不使用 Xml 属性）

```
private void setUpView(){
    editText1=(EditText)findViewById(R.id.editText1);
    editText2=(EditText)findViewById(R.id.editText2);
    editText3=(EditText)findViewById(R.id.editText3);
 }
private void setDownFocus(){
    editText1.setNextFocusDownId(R.id.editText2);
    editText2.setNextFocusDownId(R.id.editText3);// you can give focus to any id
    editText3.setNextFocusDownId(R.id.editText1);
 } 
```

在**onCreate()**调用**setUpView()**之前**setDownFocus()**

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-23T03:39:55.930

您可以在布局中使用此 XML

```
<EditText
            android:id="@+id/editTextName"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:ems="10"
            android:inputType="textPersonName"
            android:hint="Enter Name"/>

         <requestFocus /> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-09T14:00:27.223

我认为您想拦截 TAB 按键并跳转到屏幕上的下一个元素。我所做的是扩展 EditText 并覆盖“onKeyDown”方法，以便将焦点发送到下一个元素。这是我对 EditText 的简单扩展：

```
package my.package;

import android.content.Context;
import android.util.AttributeSet;
import android.view.KeyEvent;
import android.widget.EditText;

public class TabExitEditText extends EditText {

    public TabExitEditText(Context context) {
        super(context, null);
    }

    public TabExitEditText(Context context, AttributeSet attrs) {
        super(context, attrs);
    }

    public TabExitEditText(Context context, AttributeSet attrs, int defStyle) {
        super(context, attrs, defStyle);
    }

    @Override
    public boolean onKeyDown(int keyCode, KeyEvent event) {
        if (keyCode == KeyEvent.KEYCODE_TAB) {
            focusSearch(FOCUS_RIGHT).requestFocus();
            return true;
        }
        return super.onKeyDown(keyCode, event);
    }

} 
```

在你刚刚设置的布局中

```
<my.package.TabExitEditText
   ... 
   android:nextFocusRight="@id/nextRightFocusId"
/> 
```

您可以自定义使用其他焦点方向顺序。

# jquery - 是否可以将链接添加到 jquery 可拖动/可拖放文本的 html 链接？

> ID：11166435
> 
> 赞同：0
> 
> 时间：2012-06-23T02:58:46.067
> 
> 标签：jquery, jquery-ui

我想在一些被删除的文本的末尾添加一个链接。在下面 Spiritfyre 和 tehlulz 的建议下，我在下面的代码中更改`$( "<li class='padding0'></li>" ).text( ...`为`$( "<li class='padding0'></li>" ).html( ...`。

jQuery 掉落：

```
drop: function( event, ui ) {
    $( "<li class='padding0'></li>" ).html( ui.draggable.text() + " <a href='/items/1' data-method='delete' rel='nofollow'><img alt='Delete' src='/images/delete.png?1335803006' /></a>" ).appendTo( this );
} 
```

该链接仍呈现为文本。我错过了什么？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-23T03:04:50.760

您需要使用 .html() 而不是 .text()

.html() 设置匹配元素集中每个元素的 HTML 内容，而 .text() 设置每个元素的文本内容。

```
drop: function( event, ui ) {
    $( "<li class='padding0'></li>" ).html( ui.draggable.text() + " <a href='/items/1' data-method='delete' rel='nofollow'><img alt='Delete' src='/images/delete.png?1335803006' /></a>" ).appendTo( this );
} 
```

# mongodb - NoSQL 用于时间序列/记录的仪器读取数据，也是版本化的

> ID：11166441
> 
> 赞同：10
> 
> 时间：2012-06-23T02:59:33.160
> 
> 标签：mongodb, cassandra, hbase, accumulo, nosql

## 我的数据

它主要是监控数据，以时间戳的形式传递：值，对于每个受监控的值，在每个受监控的设备上。它定期收集在许多设备和许多监控值上。

此外，它还有一个古怪的特点，即许多这些数据值是从源头导出的，计算会不时发生变化。这意味着我的数据被有效地版本化，并且我需要能够仅从最新版本的计算中调用数据。 **注意：**这不是覆盖旧值的版本控制。我只是有时间戳截止，超出了数据会改变它的含义。

## 我的使用

在下游，我将对数据进行各种未定义的数据挖掘/机器学习用途。目前还不清楚这些用途是什么，但很明显我将用 Python 编写所有下游代码。此外，我们是一家非常小的商店，所以我真的只能处理设置、维护和与下游应用程序接口方面的复杂性。我们只是没有那么多人。

## 选择

我不允许使用 SQL RDBMS 来存储这些数据，所以我必须找到合适的 NoSQL 解决方案。这是我到目前为止发现的：

1.  卡桑德拉
    *   在我看来完全没问题，但似乎一些主要用户已经继续前进。这让我想知道它是否不会成为一个充满活力的生态系统。这篇 SE 帖子似乎有好话要说：[Cassandra time series data](https://stackoverflow.com/questions/2212279/cassandra-time-series-data)
2.  累积
    *   同样，这似乎很好，但我担心这不是一个主要的、积极开发的平台。看起来这会让我对工具和文档感到有点饥渴。
3.  MongoDB
    *   我对 Mongo 人群有一种可能是非理性的强烈厌恶，我正在寻找任何理由放弃它作为解决方案。在我看来，Mongo 的数据模型对于具有这种静态、规则结构的事物来说都是错误的。我的数据甚至按顺序排列（并且必须保持不变）。也就是说，每个人和他们的母亲似乎都喜欢这个东西，所以我真的在尝试评估它的适用性。请参阅这篇文章和许多其他 SE 帖子：[What NoSQL DB to use for sparse Time Series like data？](https://stackoverflow.com/questions/10157931/what-nosql-db-to-use-for-sparse-time-series-like-data)
4.  HBase
    *   这就是我目前正在倾斜的地方。它似乎是 Cassandra 的继任者，它为我的问题提供了一种完全可用的方法。也就是说，它是一项重要的技术，如果我选择它，我担心真的知道我要注册的是什么。
5.  开放TSDB
    *   这基本上是一个时间序列特定的数据库，建立在 HBase 之上。完美，对吧？我不知道。我试图弄清楚另一层抽象能给我带来什么。

## 我的标准

*   开源
*   与 Python 配合得很好
*   适合小团队
*   非常有据可查
*   具有利用有序时间序列数据的特定功能
*   帮助我解决一些我的版本化数据问题

那么，哪个 NoSQL 数据库实际上可以帮助我满足我的需求？它可以是任何东西，无论是否来自我的列表。我只是想了解哪个平台实际上有代码，而不仅仅是使用模式，它们支持我的超级具体、很好理解的需求。我不是在问哪个最好或哪个更酷。我试图了解哪种技术最能原生存储和操作此类数据。

有什么想法吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-23T18:06:57.943

听起来您正在描述 Cassandra 最常见的用例之一。一般来说，时间序列数据通常非常适合 cassandra 数据模型。更具体地说，许多人像您描述的那样存储指标/传感器数据。看：

*   [http://rubyscale.com/blog/2011/03/06/basic-time-series-with-cassandra/](http://rubyscale.com/blog/2011/03/06/basic-time-series-with-cassandra/)
*   [http://www.datastax.com/dev/blog/advanced-time-series-with-cassandra](http://www.datastax.com/dev/blog/advanced-time-series-with-cassandra)
*   [http://engineering.rockmelt.com/post/17229017779/modeling-time-series-data-on-top-of-cassandra](http://engineering.rockmelt.com/post/17229017779/modeling-time-series-data-on-top-of-cassandra)

至于您对社区的关注，我不确定是什么给了您这样的印象，但是有相当大的社区（参见 irc，邮件列表）以及越来越多的 cassandra 用户。

[http://www.datastax.com/cassandrausers](http://www.datastax.com/cassandrausers)

关于您的标准：

*   开源
    *   是的
*   与 Python 配合得很好
    *   [http://pycassa.github.com/pycassa/](http://pycassa.github.com/pycassa/)
*   适合小团队
    *   是的
*   非常有据可查
    *   [http://www.datastax.com/docs/1.1/index](http://www.datastax.com/docs/1.1/index)
*   具有利用有序时间序列数据的特定功能
    *   见上面的链接
*   帮助我解决一些我的版本化数据问题
    *   如果我正确理解您的描述，您可以通过多种方式解决此问题。当版本更改时，您可以开始编写新行。或者，您可以使用复合列来存储版本以及时间戳/值对。

我还会注意到 Accumulo、HBase 和 Cassandra 都具有基本相同的数据模型。关于每个数据库提供的特定功能，您仍然会发现围绕数据模型的细微差别，但基础是相同的。

三者之间更大的区别将是系统的架构。Cassandra 的架构来自亚马逊的 Dynamo。集群中的每台服务器都是相同的，设置起来非常简单。HBase 和 Accumulo 或更直接的 BigTable 克隆。这些有更多的移动部件，并且需要更多的设置/类型的服务器。例如，设置 HDFS、Zookeeper 和 HBase/Accumulo 特定的服务器类型。

免责声明：我为 DataStax 工作（我们与 Cassandra 合作）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-23T10:41:34.643

我只有 Cassandra 和 MongoDB 的经验，但我的经验可能会增加一些东西。

所以你基本上是在做基于时间的指标？

好的，如果我理解正确，您使用时间戳作为版本控制机制，以便您根据某个时间戳进行查询，比如根据指标 ID 或其他什么获取最新的计算并获取 ts DESC 并删除第一行？

有时听起来像是版本化的键值存储。

考虑到这一点，我可能不会推荐我使用过的两种。

Cassandra 太死板了，也太古怪了，也基于你如何查询到只能从（我想你想绘制这些指标）columfamily 中对图表数据进行一个枢轴的程度，这很疯狂，因此我放弃了它. 至于搜索（Facebook 使用它，仅此而已），它也没有那么令人印象深刻。

MongoDB，我喜欢 MongoDB，我是用户组的精英，如果你不使用键值存储策略，它可以在这里工作，但如果你没有下定决心，你不喜欢技术然后让我第一个说：不要使用它！你不会擅长你不喜欢的技术，所以远离它。

虽然我会想象在 Mongo 中发生的这种情况很像：

```
{
_id: ObjectID(),
metricId: 'AvailableMessagesInQueue',
formula: '4+5/10.01',
result: NaN
ts: ISODate()
} 
```

您通过以下方式查询最新版本的计算：

```
var results = db.metrics.find({ 'metricId': 'AvailableMessagesInQueue' }).sort({ ts: -1 });
var latest = results.getNext(); 
```

这将输出您在上面看到的文档结构。在不了解您希望如何查询以及一般服务器和应用程序场景等的更多信息的情况下，这是我能想到的最好的。

我喜欢 HBase 上的这个帖子：http: [//mail-archives.apache.org/mod_mbox/hbase-user/201011.mbox/%3C5A76F6CE309AD049AAF9A039A39242820F0C20E5@sc-mbx04.TheFacebook.com%3E](http://mail-archives.apache.org/mod_mbox/hbase-user/201011.mbox/%3C5A76F6CE309AD049AAF9A039A39242820F0C20E5@sc-mbx04.TheFacebook.com%3E)

这可能很有趣，它似乎支持 HBase 是一个很好的基于时间的键值存储的论点。

我没有亲自使用过 HBase，所以不要认真对待我所说的任何事情......

我希望我已经添加了一些内容，如果没有，您可以尝试缩小您的标准，以便我们可以回答更多专门的问题。

希望有点帮助

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-07-09T13:34:40.187

不是任何特定技术的插件，但这篇关于使用 MongoDB 进行时间序列存储的文章可能会提供另一种思考存储大量“传感器”数据的方式。

[http://www.10gen.com/presentations/mongodc-2011/time-series-data-storage-mongodb](http://www.10gen.com/presentations/mongodc-2011/time-series-data-storage-mongodb)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-08-06T19:03:23.317

[Axibase 时间序列数据库](https://axibase.com/docs/atsd/)

*   开源

    有一个免费的社区版

*   与 Python 配合得很好

    [https://github.com/axibase/atsd-api-python](https://github.com/axibase/atsd-api-python)。还有其他语言包装器，例如 ATSD R 客户端。

*   适合小团队

    内置图形和规则引擎使其能够高效地构建内部报告、仪表板或监控解决方案，而编码更少。

*   非常有据可查

    很难击败 IBM 红皮书，但我们正在努力。API、配置和管理都有详细的文档和示例。

*   具有利用有序时间序列数据的特定功能

    它是一个从头开始的时间序列数据库，因此可以使用聚合、过滤和非参数 ARIMA 和硬件预测。

*   帮助我解决一些我的版本化数据问题

    ATSD 在 SE 和 EE 版本中本机支持版本化时间序列数据。版本跟踪状态、更改时间和源更改，以用于审计跟踪和核对的相同时间戳。如果您需要带有跟踪的干净、经过验证的数据，这是一个有用的功能。想想能源计量，PHMR 记录。ATSD 模式还支持系列标签，如果您使用 CE 版本，或者您需要扩展默认版本控制列：状态、来源、更改时间，您可以使用这些标签手动存储版本控制列。

披露 - 我为开发 ATSD 的公司工作。

# windows-8 - 您在哪里找到要传递给 TileUpdateManager.CreateTileUpdaterForApplication(string) 以执行后台任务的 ApplicationId

> ID：11166442
> 
> 赞同：2
> 
> 时间：2012-06-23T02:59:36.120
> 
> 标签：windows-8, windows-runtime

我想从后台任务更新动态磁贴（和锁屏徽章，并显示 toast 通知）。我有在应用程序运行时工作的代码，它作为后台任务一直运行到完成，但实时磁贴/吐司/徽章没有任何反应。我假设那是因为我需要使用`TileUpdateManager.CreateTileUpdaterForApplication()`带字符串的重载，但我不知道在哪里可以找到字符串和/或格式是什么。

有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-23T03:34:22.580

[包相对应用标识符 (PRAID)](http://msdn.microsoft.com/en-us/library/windows/apps/windows.applicationmodel.core.coreapplication.id.aspx)

根据评论编辑：您是否尝试过在清单中指定的应用程序 ID 或用于创建辅助磁贴的 ID？

# java - java - 如何使用Java中的分隔符从xml文件中读取键和值？

> ID：11166446
> 
> 赞同：1
> 
> 时间：2012-06-23T02:59:47.593
> 
> 标签：java, xml

我想`<LINE>`使用 java 读取以下 xml 标签。你能帮忙吗？提前致谢。

```
<?xml version="1.0" encoding="UTF-8" ?> 
<LINE>002:OR,004:0001,002:01,002:01,007:SCEM_02,000:,007:590,000,002:KG,002:PC;/</LINE> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-23T03:19:22.883

```
import java.util.regex.*;

public String extractLine(String xmlSource) {
    Pattern p = Pattern.compile("<LINE>(.*?)</LINE>");
    Matcher m = p.matcher(xmlSource);
    boolean found = m.find();
    if (!found)
        return null;
    return m.group(1);
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-23T03:18:54.753

具体情况的解决方案是：

```
String str = "<LINE>002:OR,004:0001,002:01,002:01,007:SCEM_02,000:,007:590,000,002:KG,002:PC;/</LINE> ";
str = str.substring((str.indexOf(">")+1),str.lastIndexOf("<"));
System.out.println(str); 
```

# php - PHP 动态页面级 DocBlocks

> ID：11166449
> 
> 赞同：1
> 
> 时间：2012-06-23T02:59:56.827
> 
> 标签：php, wordpress, docblocks

我想知道是否有办法与页面级 DocBlocks 交互。我的问题更具体地说是关于 wordpress 插件开发，但这个问题也出现在非 wordpress 环境中。

原因主要是可以在整个大型项目中轻松更改版本和名称，并且可能具有恒定的定义 - 但这也将反映在 docblock..

以下示例 Docblock 来自我编写的 wordpress 插件 -

```
/*
Plugin Name: o99 Auxilary Functions v0.4.7
Plugin URI: http://www.myurl.com
Description: some simple description that nobody reads.
Version: 0.4.7
Author: my cool name
Author URI: http://www.ok-alsouri.com
*/ 
```

有没有办法将其转换为：

```
$ver = '0.4.7';
$uri = 'http://www.myurl.com';
$desc = 'some simple description that nobody reads.';
$mcn = 'my cool name';
etc.. 
etc..

    /*
    Plugin Name: o99 Auxilary Functions ($ver)
    Plugin URI: ($uri)
    Description: ($desc)
    Version: ($ver)
    Author: ($mcn)
    Author URI: ($$uri)
    */ 
```

显然，要使 echo 工作，我需要破坏 docblock 本身，并且我不能将 docblock 直接写入它自己的文件中。

简而言之：我能否以某种方式用 php 本身“生成”一个 docblock（我认为答案是 - 页面本身的“否”.. 但也许我错了，有人有一些巧妙的 hack :-)）

这甚至可能吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-23T03:30:36.497

你可以这样做：

```
$ver = '0.4.7';
$uri = 'http://www.myurl.com';
$desc = 'some simple description that nobody reads.';
$mcn = 'my cool name';
etc.. 
etc..

$docblock = <<<TEMPLATE
/*
Plugin Name: o99 Auxilary Functions ($ver)
Plugin URI: $uri
Description: $desc
Version: $ver
Author: $mcn
Author URI: $uri
*/
TEMPLATE;

$file_data = $docblock;
$file_data .= file_get_contents('yourplugin.php');
file_put_contents('yourplugin.php', $file_data); 
```

# selenium-webdriver - 如何让 Selenium 2 webdriver 与 Nightly（Firefox 64 位）一起使用

> ID：11166452
> 
> 赞同：0
> 
> 时间：2012-06-23T03:00:17.173
> 
> 标签：selenium-webdriver, testng

我正在寻找针对 Nightly 浏览器（FireFox 64 位）执行 Selenium 2 测试。使用 Selenium IDE (v1.8.1) 可以很好地记录。并且使用 IDE 也可以很好地播放。然后我将代码导出为 TestNG 格式。顺便说一句，我已经加载了 Webdriver Backed 插件，因此它导出了 Selenium 2 版本的 WebDriver 代码。我遇到的问题是，当我将代码导出为 TestNG 格式（Java）并执行它时，断言永远不会在屏幕上找到文本。它执行得很好，所以不是代码没有转换。它似乎与断言有关。如果我从 IDE 插件中播放它，它会找到它的文本并断言很好，但是一旦它在 Java 中执行，它就会使所有断言失败。对可能发生的事情有任何想法。我的代码如下。非常感谢！

```
import org.openqa.selenium.WebDriver;
import org.openqa.selenium.WebDriverBackedSelenium;
import org.openqa.selenium.firefox.FirefoxDriver;
import org.testng.annotations.AfterMethod;
import org.testng.annotations.BeforeMethod;
import org.testng.annotations.Test;
import static junit.framework.Assert.*;

import com.thoughtworks.selenium.Selenium;

public class TestWithConfig {

    WebDriver driver;
    Selenium selenium;

    @BeforeMethod
    public void startSelenium() {
        driver = new FirefoxDriver();
        selenium = new WebDriverBackedSelenium(driver,
                "http://en.wikipedia.org/wiki/Main_Page");
    }

    @AfterMethod
    public void stopSelenium() {
        driver.close();
    }

    @Test
    public void testTest() {
        selenium.setSpeed("600");
        selenium.open("/wiki/Main_Page");
        assertTrue("face not found",selenium.isTextPresent("face"));
        selenium.click("link=Contents");
        selenium.waitForPageToLoad("30000");
        assertTrue("Below not found",selenium.isTextPresent("Below"));
        selenium.click("link=Toolbox");
        selenium.click("link=What links here");
        selenium.waitForPageToLoad("30000");
        assertTrue("Pages not found",selenium.isTextPresent("Pages that link to"));
        selenium.click("link=exact:Talk:Wine");
        selenium.waitForPageToLoad("30000");
        assertTrue("Some not found",selenium.isTextPresent("Some"));
    }

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-25T23:04:30.287

由于您使用 selenium 2 和 webdriver，Assert 的工作有点不同。我可以看到您使用 WebDriverBackedSelenium。但是请记住。那不是硒2。这只是一种轻松进入 selenium 2 的方法。我会使用这样的东西。

```
WebElement tooltip = driver.findElement(By.xpath("the xpath of the element"));

assertNotNull("Name:","IP Address:",tooltip); 
```

我在这里做的是。我正在寻找一个工具提示。在该工具提示中，有两个主要标签保持不变：名称和 IP 地址：。所以我正在测试工具提示中是否存在这些词。输出应为名称：IP 地址：。这告诉我答案是正确的。

# opengl - OpenGL中的状态

> ID：11166457
> 
> 赞同：0
> 
> 时间：2012-06-23T03:00:55.503
> 
> 标签：opengl

这是一些绘制到屏幕上的简单代码。

```
GLuint vbo;

glGenBuffers(1, &vbo);

glUseProgram(myProgram);

glBindBuffer(GL_ARRAY_BUFFER, vbo);

glEnableVertexAttribArray(0);
glVertexAttribPointer(0, 4, GL_FLOAT, GL_FALSE, 0, 0);

//Fill up my VBO with vertex data
glBufferData(GL_ARRAY_BUFFER, sizeof(vertexes), &vertexes, GL_STATIC_DRAW);

/*Draw to the screen*/ 
```

这工作正常。但是，我尝试更改一些 GL 调用的顺序，如下所示：

```
GLuint vbo;

glGenBuffers(1, &vbo);

glUseProgram(myProgram);

glEnableVertexAttribArray(0);
glVertexAttribPointer(0, 4, GL_FLOAT, GL_FALSE, 0, 0);

//Now comes after the setting of the vertex attributes.
glBindBuffer(GL_ARRAY_BUFFER, vbo);

//Fill up my VBO with vertex data
glBufferData(GL_ARRAY_BUFFER, sizeof(vertexes), &vertexes, GL_STATIC_DRAW);

/*Draw to the screen*/ 
```

这使我的程序崩溃。`GL_ARRAY_BUFFER`为什么在设置顶点属性时需要绑定一个 VBO ？对我来说，`glVertexAttribPointer`所做的只是设置 OpenGL 最终用来绘制事物的顶点格式。它不是特定于任何 VBO。因此，如果多个 VBO 想要使用相同的顶点格式，则无需再次格式化 VBO 中的顶点。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-23T03:11:57.400

我相信这是因为最后一个参数`glVertexAttribPointer`是`pointer`在 VBO 之后的偏移量，`glBindBuffer(nonzero)`但是当 VBO 未绑定时，它应该是指向实际数据数组的指针。因此，如果您根本不使用 VBO，则最后一个参数将是`&vertexes`并且它不会崩溃。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-23T11:20:33.143

> 为什么我只是设置顶点属性时需要绑定到 GL_ARRAY_BUFFER 的 VBO？

不，您不是“只是”设置顶点属性。您实际上是在使用当前绑定的缓冲区对象创建一个引用。

如果没有绑定缓冲区对象，则 gl...Pointer 将创建对指向给定地址的进程地址空间的引用。由于在您的情况下这是一个空指针，因此任何取消引用顶点的尝试都会导致分段错误/访问冲突。

> 对我来说，glVertexAttribPointer 所做的只是设置 OpenGL 最终用来绘制事物的顶点格式。

不，它还创建了从何处获取数据的引用。

> 它不是特定于任何 VBO。

是的，它实际上特定于绑定的 VBO，或者如果没有绑定 VBO，则特定于进程地址空间。并且更改缓冲区绑定不会沿 gl…指针引用更新。

# php - 抽象类是否可以强制其子类在 PHP 中具有构造函数？

> ID：11166458
> 
> 赞同：4
> 
> 时间：2012-06-23T03:01:07.860
> 
> 标签：php, oop, constructor, abstract-class

我想做这样的事情：

```
abstract class Foo
{
    public function __construct()
    {
        echo 'This is the parent constructor';
    }

    abstract function __construct();
}

class Bar extends Foo
{
    // constructor is required as this class extends Foo
    public function __construct() 
    {
        //call parent::__construct() if necessary
        echo 'This is the child constructor';
    }
} 
```

但是这样做时我遇到了一个致命错误：

```
Fatal error: Cannot redeclare Foo::__construct() in Foo.php on line 8 
```

有没有另一种方法来确保子类有一个构造函数？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-23T03:12:56.570

简而言之，没有。非魔法方法可以通过 abstract 关键字声明。

如果要使用构造函数的旧方式，请创建一个与类同名的方法，并将其声明为抽象。这将在类的实例化时调用。

例子：

```
abstract class Foo
{
    public function __construct()
    {
        echo 'This is the parent constructor';
    }

    abstract function Bar();
}

class Bar extends Foo
{
    // constructor is required as this class extends Foo
    public function Bar() 
    {
        parent::__construct();
        echo 'This is the child constructor';
    }
} 
```

不过，我建议为您的功能使用接口。

# xtk - 交互后相机的up、focus和position值

> ID：11166460
> 
> 赞同：0
> 
> 时间：2012-06-23T03:01:37.203
> 
> 标签：xtk

在以某种方式与 XTK 相机交互后——平移、旋转、缩放——有没有办法从相机中检索位置、焦点和向上矢量的新值？看起来 getter 和 setter 是在相机 javascript 中定义的，但是在交互过程中，它们对应的属性并没有更新。例如，返回的值`camera.position`即使在翻译之后也不会更新。

是否有一种机制可以提供这些值，或者有一种方法可以为所有修改相机的交互添加额外的观察者？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-23T05:46:02.280

位置、向上向量和焦点首先用于配置 3d 空间。然后，所有交互只修改创建的视图矩阵。

您可以像这样查询视图矩阵

```
ren = new X.renderer3D()
console.log(ren.camera.view + "") // prints the view matrix as a string 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-26T10:38:32.287

我看到了一些解决方案，具体取决于谁来完成这项工作。

首先：向摄像机添加一个选项以启用跟踪（默认情况下禁用），一个可以更新向上/位置/焦点的选项很容易不是吗？因为它只是在同一时刻将前一个向量乘以变换矩阵，而不是我们将视图矩阵乘以变换矩阵。但这可能会带来额外的运营成本。或者我们可以像我的“第二”一样计算它

**第二：如果我的记忆很好，那么基础 B(O(x,y,z), i** ,* *j* *, **k** ) 中的变换矩阵 T具有众所周知的结构不是吗？像这样的东西（也许我忘记了换位）：

```
 i1 j1 k1 u1
 i2 j2 k2 u2
 i3 j3 k3 u3
 0  0  0  1 
```

在哪里 ：

```
 ([u1,u2,u3])=T(0(x,y,z)) i.e. gives the translation in the base B
 ([i1,i2,i3])=T(**i**)
 ([j1,j2,j3])=T(**j**)
 ([k1,k2,k3])=T(**k**) 
```

然后**，如果您想要 3 个角度，则非常苛刻**（请参阅欧拉的计算），但是**如果您想要其他的东西，它可能会更容易**。例如，您想要通过我们的变换 T 得到基 B 的“k”向量的图像的上向量，所以它是 [j1,j2,j3] 不？然后，您无法轻松获得焦点，但您可以轻松获得焦点矢量：它是 [k1,k2,k3] ！（实际上可能是 -1*[k1,k2,k3]）。如果你看好 X.camera3D 的 LookAt_ 方法，它不会给 webgl 一个焦点，而是一个归一化的焦点向量：点位置无关紧要，你只需要焦点向量上的 1 个点，你可以计算它现在不 ？它只是 currentposition 和 currentfocusvector 坐标的总和。

我希望我的记忆很好，我并不是说完全狗屎。

只有一个问题：视图矩阵有一个设置器，那么为什么要存储和设置/聚焦/位置而不是直接存储和设置视图？

PS：小心，可能有一个比例运算符k，所以矩阵会有所不同，但我认为xtk中没有。PS 2：粗体是向量。[number,number,number] 是由他的坐标显示的 3D 矢量。

# css - 包含 ul 列表的 Div 的宽度不是 100%，它继承了较短 ul 的宽度

> ID：11166461
> 
> 赞同：-1
> 
> 时间：2012-06-23T03:01:45.050
> 
> 标签：css

我正在尝试制作一个链接列表，连续 6 个链接。

问题是我不知道会有多少链接。可能只有 2 个或 25 个。

请看看这个[小提琴](http://jsfiddle.net/sexywebteacher/v8e3q/23/)。

我一定对css做错了，因为：

1.  例如，如果只有 3 个链接，则**.toplist div 的边框不会覆盖****wrap** div的整个长度。

2.  此外，在出现新行之前，我无法对齐两个以上的 div。

3.  这并不重要，但是在 IE6 中，即使我使用**overlow:auto**我也看不到我的 ul 的背景（如果我设置了一个），而且，如果我为 ul 设置了 margin-bottom 我没有看见。

关于css有什么问题的任何想法？

泰

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-23T03:08:55.717

我对你原来的 fiddle 对我的[fiddle](http://jsfiddle.net/v8e3q/24/)做了一些更改。看一下这个：

```
.wrap {
width:960px; 
margin:0 auto;
border:1px solid #000
}

.toplist {
border:1px solid #0f6;
padding:0 0 0.5em 1em
}

.toplist ul {
list-style:none;
overflow:hidden;
margin:0;
padding:0;
}
.toplist ul li {
float:left;    
width:15%;
margin-right:1em;
line-height:1.4em;
border-bottom:solid 1px #222;
}
.toplist ul li a, .toplist ul li .cat {
display:block;
font-size:0.7em;
}

.content{
background-color:#FF2E2E;
color:#FFF;
margin-top:100px;
heyight:40px
}​ 
```

希望这有效。:) 它也适用于**IE 6**！:)

# cocoa - 结合 Kod 和 Komodo Edit 的合理性？

> ID：11166465
> 
> 赞同：0
> 
> 时间：2012-06-23T03:02:53.117
> 
> 标签：cocoa, open-source, gecko, komodoedit

我想知道将精心设计的[Kod](http://kodapp.com)编辑器和功能强大的[Komodo Edit](http://activestate.com/komodo-edit)合并在一起会有多困难。我想它可以变成一个原生的 Mountain Lion 编程编辑器，具有简单的界面（专注于优雅），但具有强大的编辑功能。

Kod 是本机 OS X 应用程序，而 Komodo 是基于 Mozilla 代码的跨平台应用程序。两者都在“开源”许可下——Kod 的许可似乎非常宽松，而 Komodo 的许可……很长。我仍在破译它，但似乎可以将代码放入一个新项目中。

我认为这将成为一个新的开源项目：Kodmodo。我只是不知道源代码在两个程序之间的兼容性如何。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-26T19:59:38.407

Kod 看起来很有趣，但很年轻。没有键绑定和配色方案的首选项部分的编辑器？可能会发展成一个有趣的项目（基于 node.js）。相当多的 Komodo 编辑是用 javascript 完成的。

唉，Komodo 的主要实现语言是 Python，接口（打开文件等）是 Mozilla。Kod 在其主页上使用 OSX 好东西并声明

> 使用现代 OS X 10.6 API 从头编写，**提供最大的 OS 集成**（添加了重点）

[集成OpenKomodo](http://www.openkomodo.com/)和[Eric](http://eric-ide.python-projects.org/)几乎是不可能的，因为两者都使用 python 进行开发，使用宏和 scintilla 进行编辑组件。Komodo 和 Kod 永远不会发生，因为它们完全从不同的地方开始。

# jquery - 在 iframe 中定位谷歌地图图块以使用 jQuery 更改其不透明度

> ID：11166467
> 
> 赞同：0
> 
> 时间：2012-06-23T03:03:16.190
> 
> 标签：jquery, google-maps, google-maps-api-3, opacity, tiles

基本上正如标题所说，我想使用 jQuery 来标记 iframe 内的谷歌地图图块。

任何想法我怎么能做到这一点？

# c++ - 这个 C++ 代码有什么问题？3n+1 编程挑战/UVa

> ID：11166468
> 
> 赞同：-1
> 
> 时间：2012-06-23T03:03:21.570
> 
> 标签：c++

Programming-Challenges 网站将其标记为错误答案。我检查了样本输入，它们都是正确的。我对代码添加了优化，我做了它，所以它不会检查已知在另一个数字序列中的数字，因为它是一个子序列并且显然具有更短的循环长度。

此外，我刚刚重新开始编程，所以程序不太简洁，但我希望它是可读的。

这是代码：

```
#include <iostream>
#inclue <vector>
struct record
{
   int number;
   int cyclelength;
};

void GetOutput(int BEGIN, int END)
{
    //determines the output order at the end of function
    bool reversed = false;
    if (BEGIN > END)
    {
        reversed = true;
        int temp = BEGIN;
        BEGIN = END;
        END = temp;
    }
    vector<record> records;
    for (int i = BEGIN; i <= END; ++i)
    {
        //record to be added to records
        record r;
        r.number = i;
        r.cyclelength = 1;
        records.push_back(r);
    }

    int maxCycleLength = 1;
    //Determine cycle length of each number, and get the maximum cycle length
    for (int i =0;i != records.size(); ++i)
    {
        //
        record curRecord = records[i];
        //ABCD: If a number is in another number's sequence, it has a lower cycle length and do not need to be calculated,
        //set its cyclelength to 0 to mark that it can be skipped
        if (curRecord.cyclelength != 0)
        {
            //
            while (curRecord.number != 1)
            {
                //next number in the sequence
                int nextNumber;
                //finds the next number
                if (curRecord.number % 2 == 0)
                    nextNumber = curRecord.number / 2;
                else
                {
                    nextNumber = curRecord.number * 3 + 1;
                    //if nextNumber is within bounds of input, mark that number as skippable; see ABCD
                    if (nextNumber <= END)
                    {
                        records[nextNumber - BEGIN].cyclelength = 0;
                    }
                }
                curRecord.number = nextNumber;
                curRecord.cyclelength += 1;
            }
            maxCycleLength = max(curRecord.cyclelength, maxCycleLength);
        }
    }
    if (reversed)
    {
        cout << END << " " << BEGIN << " " << maxCycleLength;
    }
    else
    {
        cout << BEGIN << " " << END << " " << maxCycleLength;
    }
}

int main(){
    //The first and last numbers
    vector< vector<int> > input;
    int begin, end;

    while (cin >> begin >> end)
    {
        //storage for line of input
        vector<int> i;
        i.push_back(begin);
        i.push_back(end);
        input.push_back(i);
    }

    for (int i = 0;i != input.size(); ++i)
    {
        GetOutput(input[i][0], input[i][1]);
        cout << endl;
    }

    return 0;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-23T03:58:10.437

I'll try to give you a hint to nudge you into figuring out the problem.

The sample inputs are good as a smoke test, but they're often not good indicators that your program can handle the more extreme test cases too. You should always test with more than the sample inputs. If my calculations are correct, your program will produce the wrong result for the following input:

```
999000 999250 
```

For reference, the expected output for this is:

```
999000 999250 321 
```

There, I narrowed your search space down to 251 cycles :) Now get your debugger and finish the job.

Anyway, what follows is the full explanation and solution in spoiler markup. Mouse over the blank space if you want to read it, stay put if you want to figure it yourself.

> The problem states that i and j are less than one million and that no operation overflows a 32-bit integer. This means that no intermediate result will be larger than 4294967295\. However, an `int` is a signed type, so, even if it has 32-bits, it only has 31 bits for the absolute value, and thus cannot fit any number larger than 2147483647\. Numbers larger than these occur in the cycles of for several Ns in the problem range, one of which is 999167\. Using an unsigned 32 bit integer is one solution.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-23T03:57:45.197

There is nothing mystery. The largest intermediate number overflows 31-bit of the signed integer. You need to declare `record.number` and `nextNumber` as `unsigned int`.

# ios - 在 cocos2d removeChild 中将清理设置为 YES 有什么作用？

> ID：11166469
> 
> 赞同：3
> 
> 时间：2012-06-23T03:04:02.083
> 
> 标签：ios, cocos2d-iphone

我想我可能会在我的代码中造成错误，因为我不清楚 cleanup: 部分 removeChild:cleanup: cocos2d ccnode 类的方法。

谢谢。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-23T03:27:14.707

它停止所有操作并取消调度与 CCNode 关联的任何已调度选择器，基本上删除了 cocos 可能对该对象具有的任何引用。它还将清理调用传播到对象的所有子对象。如果该对象是一个可自动释放的对象并且您没有保留对它的引用，则该内存应该由objective-c 运行时回收，用于对象本身及其子对象。几乎所有对象都是如此，但如果您将对象添加为目标触摸委托，则情况并非如此。在这种情况下，我建议重写 onExit 方法，如下所示：

```
- (void) onExit{
    [[CCTouchDispatcher sharedDispatcher] removeDelegate:self];
    [super onExit];
} 
```

这样，当您清理时，该对象将完全可释放。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-23T03:25:31.923

cleanup 基本上指定是否应该清理该特定节点的正在运行的操作，基本上，如果它设置为 YES，则被删除的对象将停止所有正在运行的操作并取消调度所有选择器。

# ios - 显示 UIView 子类 - 此类与键的键值编码不兼容

> ID：11166470
> 
> 赞同：3
> 
> 时间：2012-06-23T03:04:10.013
> 
> 标签：ios, uiview

我正在尝试创建一个可以从多个视图控制器调用的自定义弹出视图，但我遇到了一些麻烦。

只要我从 viewController 本身编写并调用“presentPopup”方法，我就能让它正常工作。与其在每个 VC 中编写一个单独的方法，我更愿意在一个单独的类中编写一个方法，然后只传递参数来个性化它。

无论如何，每当我尝试这样做时，我都会不断收到著名的“此类与键的键值编码不兼容”错误。只是想知道是否有人对如何使类键值编码兼容有任何见解？或者一般如何解决这个问题？谢谢！！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-23T05:49:52.160

这个答案的末尾有一个简单的解释，但是我最近看到了一些类似的问题，所以我想我会提供一些背景知识。

该错误还应该告诉您该类不符合键值编码的*哪个键。*您问题的措辞表明您认为可以添加一些通用代码以使类“符合键值编码”。事实并非如此。

所有可可/可可触摸对象都能够执行键值编码操作。KVC 允许您通过使用`valueForKey:`或`setValue:forKey:`代替直接使用访问器方法来访问访问器方法。

您看到的错误将类似于：

> XXX - 此类不符合键 YYY 的键值编码。

XXX 是有问题的班级，YYY 是关键。所以在某个地方，`[xxx setValue:something forKey:@"YYY"]`正在被调用。

在这一点上，你在想“但我从来没有`setValue:forKey`在我的代码中使用过！”。你可能是对的。但是当您加载 xib 文件时，框架会使用它*-*所有的出口都是使用键值编码设置的。

因此，您的 xib 中将有一个出口，该出口连接到已在其链接的类中删除或重命名的内容。如果幸运的话，它旁边会有一个小感叹号。如果不是，您甚至不会在界面生成器中看到它，您必须将 xib 作为源代码进行编辑并将其从 XML 中删除。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-23T03:07:26.430

您正在`setValue:forKey:`某处调用方法（可能是`NSMutableDictionary`在您应该调用的地方`setObject:forKey`）或类似的东西......

# css - PhoneGap 中的 CSS3 过渡：Div 宽度问题

> ID：11166473
> 
> 赞同：2
> 
> 时间：2012-06-23T03:04:38.120
> 
> 标签：css, cordova, css-transitions

我正在构建一个 PhoneGap/Cordova 应用程序，并且有一个简单的代码，它使用[http://ricostacruz.com/jquery.transit/](http://ricostacruz.com/jquery.transit/) 在单击另一个 div 时显示一个 div。

```
<style>
#hiddendiv {
    top: -2000px;
    position:absolute;
}
</style>

<script>
$('#clickme').click(
            function() {
            //SHOW DIV
            $('#hiddendiv').transition({ y: '2100px' });
            });
</script>

<!--HTML-->
<div id="hiddendiv">
Lorem Ipsum blah blah blah Loooong piece of text
</div>

<div id="clickme">
Click Me
</div> 
```

它工作正常。问题是一旦显示#hiddendiv，我就无法在我的设备上滚动。

我这部分是因为页面只有大约 500px 高度（*实际上没有设置在任何地方*），而 #hiddendiv 大约是 1500px 高度

有谁知道解决这个问题？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-23T22:52:58.060

如果您在 IOS 或 Android 中工作，为什么不在 css 中使用 Webkit 转换。如果将body标签的高度设置为100%？

```
<style>
body {
height: 100%
}

#hiddendiv {
-webkit-transform: translate(0, -2000px);
-webkit-transition: all ease-in 3s;
}
</style>

<script>
   $('#clickme').click(
            function() {
            //SHOW DIV
            $('#hiddendiv').css('-webkit-transform','translate(0, 2100px)');
            });
   </script> 
```

而且它本身会更快（至少在 iOS 上），因为它使用 webkit 而不是 jquery animate。

# c# - SQL CLR UDT 的 ToString() 给出了一个奇怪的结果

> ID：11166476
> 
> 赞同：2
> 
> 时间：2012-06-23T03:05:35.360
> 
> 标签：c#, .net, sql-server, sqlclr, user-defined-types

我是 CLR UDT 的新手，我认为在大多数情况下我还可以，但我目前有一个非常烦人的问题，即行没有显示正确的值。我有一个性别数据类型并输入“男性”或“女性”，但结果窗口中的值分别显示为“0x044D616C65”和“0x0646656D616C65”。这是我的UDT：

```
[Serializable]
[SqlUserDefinedType(Format.UserDefined, IsByteOrdered = true, MaxByteSize = 512)]
public struct Gender : INullable, IBinarySerialize
{
    private bool m_Null;
    private SqlString genderName;

    public override string ToString()
    {
        return Convert.ToString(genderName);
    }

    public bool IsNull
    {
        get { return m_Null; }
    }

    public static Gender Null
    {
        get
        {
            Gender h = new Gender();
            h.m_Null = true;
            return h;
        }
    }

    public static Gender Parse(SqlString s)
    {
        if (s.IsNull)
        {
            return Null;
        }
        Gender u = new Gender();

        bool isValid = false;
        string str = s.ToString().Trim();
        if (str.StartsWith("M") || str.StartsWith("F"))
        {
            isValid = true;
        }

        if (isValid)
        {
            u.genderName = new SqlString(str);
        }
        else
        {
            throw new SqlTypeException("Gender not valid");
        }

        return u;
    }

    public void Write(BinaryWriter writer)
    {
        writer.Write(genderName.ToString());
    }

    public void Read(BinaryReader reader)
    {
        genderName = new SqlString(reader.ReadString());
    }
} 
```

编辑

图片澄清：

![表设计](../Images/0c25501b98f09d7458b6ed0bc086a33a.png)

![SQL 结果视图](../Images/708220b8f2d2ef15adea68eec58282db.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-20T23:42:12.983

[我在这个链接中](http://social.msdn.microsoft.com/forums/en-US/sqlgetstarted/thread/20781d53-3814-4273-bc39-04cf7b74f50c/?prof=required)得到了答案。丹·古兹曼写道：

> 默认情况下，SQL Server 返回 SQLCLR 类型的序列化二进制值。如果您想要 SSMS 等临时查询工具的可显示值，则需要在列上使用 ToString 方法：
> 
> ```
>  SELECT *, MySqlClrUdt.ToString() FROM Customers; 
> ```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-23T04:20:55.270

假设您使用的是 Visual Studio 2010。问题是您将 VS 配置为将结果视为“十六进制”。您可以在结果视图中右键单击更改此设置（当您看到变量值时的那个小窗口），然后**取消选中** `hexadecimal view` 您可能使用快捷方式激活它，您没有注意到

你可以在图片中看到我告诉你的内容：

![在此处输入图像描述](../Images/1f97dd8921b6bd5c466158005ce7504a.png)

（我的 VS 是西班牙文，英文是“十六进制视图”

您也可以在工具栏中检查此选项（仅在调试时）

![在此处输入图像描述](../Images/21eb6cfd2fcd34a8d0025bd43c8da292.png)

# macos - DTrace END 探针从不触发

> ID：11166477
> 
> 赞同：5
> 
> 时间：2012-06-23T03:05:38.070
> 
> 标签：macos, sudo, dtrace, control-c

我有一台 2009 年中期的 MacBook Pro 和一台新的 2012 MacBook Pro，我正在学习 DTrace（一个非常棒的工具）。当我在新的 2012 MBP 上计算聚合时，聚合不会打印出来。

```
sudo dtrace -n 'syscall:::entry { @[execname] = count() }' 
```

在我的 2009 年中期 MBP 中，它显示如下：

```
 usbmuxd                                                           1
  GrowlHelperApp                                                    2
  imklaunchagent                                                    2
  installd                                                          2
  stackshot                                                         2
  ... 
```

2012 MBP 没有显示任何内容。

我在 BEING 和 END 探针中添加了一个 printf，以查看 END 探针是否会像这样触发：

```
BEGIN
{
    printf("Hi!");
}

syscall:::entry
{
   @[execname] = count();
}

END
{
    printf("Bye!")
} 
```

在 2009 年中期的 MBP 上，两个探头都发射并打印了，而在 2012 MBP 上，只有 BEGIN 探头发射了。END 从未触发过。

两个 MBP 都运行 Lion 10.7.3。我不确定下一步该尝试什么。现在想到的唯一区别是我没有在 2012 MBP 上安装开发人员命令行工具。但这对我来说没有意义，而且是在黑暗中拍摄的。

任何帮助或想法将不胜感激。谢谢。

=============[已启用根帐户]====================

所以我启用了root帐户并重新运行了命令

```
sudo dtrace -n 'syscall:::entry { @[execname] = count() }' 
```

没有成功，但如果我这样做

```
su
dtrace -n 'syscall:::entry { @[execname] = count() }' 
```

有用！

=============[ kill -s INT ]=============================

我做了更多的实验。如果我运行：

```
sudo kill -s INT [pid of dtrace] 
```

一切正常并显示输出。

如果我运行：

```
sudo kill -s INT [pid of sudo running dtrace] 
```

这也有效！

但是如果我在终端中使用 control-c，它不会显示输出。

control-c 和 kill -s INT 有什么区别？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-10T03:58:07.493

我在linux上也注意到了。

如果 dtrace 由 sudo 生成，则 Ctrl-C 不起作用。

如果您 sudo -i 获得一个 root shell，然后调用 dtrace 它可以工作。

# gtk3 - 如何在 Gtk+3 中设置背景颜色 GtkBox？

> ID：11166482
> 
> 赞同：1
> 
> 时间：2012-06-23T03:06:52.893
> 
> 标签：gtk3, pygobject

我在 GTK+3 中创建应用程序，我想更改背景颜色，`GtkBox`但不能在这里代码：

```
box.modify_bg(Gtk.StateType.NORMAL, color); 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-02T20:18:51.663

在GTK+3 的[“常见问题”](http://developer.gnome.org/gtk3/3.0/gtk-question-index.html#id530878)中是您问题的答案。

在基本形式中，您可以使用：

```
box.override_background_color(Gtk.StateType.NORMAL, Gdk.RGBA(.5,.5,.5,.5)) 
```

在这种情况下，颜色将是柔和的灰色，半透明。可能，您想在`draw`信号期间绘制它。

# javascript - JavaScript：JavaScript 中是否有任何“python 的生成器”等价物？

> ID：11166483
> 
> 赞同：2
> 
> 时间：2012-06-23T03:07:04.137
> 
> 标签：javascript, iteration

*JavaScript 中是否有任何“python 的生成器”等价物？*

*PS：当我们需要对一个***大数组进行****一次**迭代 时，Python的Generator非常节省内存，hash... *“生成器是可迭代的，但你****只能读取一次****。这是因为它们不会将所有值都存储在内存中，****他们即时生成价值****“*

 ******（Python 的生成器在此线程中解释：[“yield”关键字在 Python 中的作用是什么？](https://stackoverflow.com/questions/231767/the-python-yield-keyword-explained)）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-23T03:13:07.950

不是以标准方式。一些浏览器[已经实现了](https://developer.mozilla.org/en/JavaScript/Guide/Iterators_and_Generators)python 样式的生成器，但它们需要需要显式激活的扩展。有人提议[将生成器添加](http://wiki.ecmascript.org/doku.php?id=proposals%3aiterators_and_generators)到 ECMAScript 规范的下一个版本中，但我认为它不会很快可用。

到目前为止，您能做的最好的事情就是使用老式的[外部迭代器](https://en.wikipedia.org/wiki/Iterator)模式。它同样强大，尽管在更复杂的情况下编写起来很痛苦。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-23T03:56:20.583

这不是超级实用，但你可以达到这样的基本效果：

```
function make_generator(start, end) {
  var i=start;
  return function() {
    if (i<end) {
      output = i;
      i += 1;
      return output;
    }
    else {
      return null;
    }
  }
}
var out = document.getElementById('out');
var generator = make_generator(1,10);
var g = generator();
while (g) {
  if (out.innerHTML)
    out.innerHTML = out.innerHTML + '<br>' + g;
  else
    out.innerHTML = g;
  g = generator();
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-23T03:14:25.647

在 JavaScript 1.7 中：

```
function rangeGen(n) {
    for (let i = 0; i < n; i++)
        yield i;
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2022-02-10T19:52:27.217

您可以使用`yield`关键字。[您可以在此处](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Operators/yield)(MDN)阅读有关它的更多信息。

> yield 关键字用于暂停和恢复生成器函数

```
function* range(n) {
    for (let i = 0; i < n; i++) {
        yield i;
    }
}

const generator = range(10);

console.log(generator.next());  // { value: 0, done: false }
console.log(generator.next());  // { value: 1, done: false }
...
console.log(generator.next());  // { value: 9, done: false }
console.log(generator.next());  // { value: undefined, done: true } 
```

注意关键字`*`后面的。`function`

现在得到广泛支持：[caniuse](https://caniuse.com/es6-generators) , [MDN](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Operators/yield#browser_compatibility)

* * *

打字稿符号：

```
function* range(n: number): IterableIterator<number> {
    for (let i = 0; i < n; i++) {
        yield i;
    }
} 
```******

# java - 将 Apache 通用依赖添加到 Play Framework 2.0

> ID：11166484
> 
> 赞同：10
> 
> 时间：2012-06-23T03:07:11.547
> 
> 标签：java, scala, playframework, playframework-2.0

我想导入 org.apache.commons.io 但我收到了这个错误：

```
[info] Compiling 1 Java source to /home/ghost/Bureau/app/play-2.0.1/waf/target/scala-2.9.1/classes...
[error] /home/ghost/Bureau/app/play-2.0.1/waf/app/controllers/Application.java:9: error: package org.apache.commons.io does not exist
[error]     import org.apache.commons.io.*;
[error]     ^
[error] /home/ghost/Bureau/app/play-2.0.1/waf/app/controllers/Application.java:41: error: cannot find symbol
[error]                 FileUtils.copyFile(file, destinationFile);
[error]                 ^
[error]   symbol:   variable FileUtils
[error]   location: class Application
[error] 2 errors
[error] {file:/home/ghost/Bureau/app/play-2.0.1/waf/}waf/compile:compile: javac returned nonzero exit code
[error] application - 
```

Play 找不到包 org.apache.commons.io 。如何将 apache io 添加为依赖项？

* * *

## 回答 #1

> 赞同：35
> 
> 时间：2012-06-23T05:25:38.087

添加依赖项

1.  编辑项目 Build.scala 文件：`/project/Build.scala`并添加依赖项`commons-io`

    ```
    val appDependencies = Seq(
       // Add your project dependencies here,
      "commons-io" % "commons-io" % "2.4"
    ) 
    ```

2.  使用播放控制台检查依赖关系已解决或不使用命令：`play dependencies`

提示：如果您不熟悉 SBT 语法 mvnrepository.com 允许您在`SBT`选项卡中复制正确的一个：[commons-io 示例](http://mvnrepository.com/artifact/commons-io/commons-io/2.3)

# python - Heroku上的Flask很多500错误，在开发机器上运行

> ID：11166486
> 
> 赞同：3
> 
> 时间：2012-06-23T03:07:28.227
> 
> 标签：python, heroku, flask, gunicorn

我有一个关于在 Heroku 上运行烧瓶的快速问题。我不确定我做错了什么，但我很新，所以请原谅愚蠢的错误。

我正在使用 Flask 在 Heroku 上部署一个应用程序。为了确保实现中的错误最小化，代码直接取自[https://github.com/orf/simple](https://github.com/orf/simple)。[遵循此https://devcenter.heroku.com/articles/python](https://devcenter.heroku.com/articles/python)时，我做了一些小调整。虽然当我在开发机器上运行时程序运行良好（通过 python simple.py），但程序在 heroku 上遇到了一致的内部服务器错误。附上日志。

有什么想法吗？

```
2012-06-23T02:43:47+00:00 heroku[api]: Deploy 69a4995 by *********@gmail.com
2012-06-23T02:43:47+00:00 heroku[web.1]: State changed from up to bouncing
2012-06-23T02:43:47+00:00 heroku[web.1]: State changed from bouncing to created
2012-06-23T02:43:47+00:00 heroku[web.1]: State changed from created to starting
2012-06-23T02:43:47+00:00 heroku[slugc]: Slug compilation finished
2012-06-23T02:43:49+00:00 heroku[web.1]: Stopping all processes with SIGTERM
2012-06-23T02:43:49+00:00 heroku[web.1]: Starting process with command `gunicorn simple:app -b 0.0.0.0:25399 -w 3`
2012-06-23T02:43:49+00:00 app[web.1]: 2012-06-23 02:43:49 [5] [INFO] Worker exiting (pid: 5)
2012-06-23T02:43:49+00:00 app[web.1]: 2012-06-23 02:43:49 [7] [INFO] Worker exiting (pid: 7)
2012-06-23T02:43:49+00:00 app[web.1]: 2012-06-23 02:43:49 [2] [INFO] Handling signal: term
2012-06-23T02:43:49+00:00 app[web.1]: 2012-06-23 02:43:49 [6] [INFO] Worker exiting (pid: 6)
2012-06-23T02:43:49+00:00 app[web.1]: 2012-06-23 02:43:49 [2] [INFO] Shutting down: Master
2012-06-23T02:43:50+00:00 app[web.1]: 2012-06-23 02:43:50 [2] [INFO] Starting gunicorn 0.13.4
2012-06-23T02:43:50+00:00 app[web.1]: 2012-06-23 02:43:50 [2] [INFO] Listening at: http://0.0.0.0:25399 (2)
2012-06-23T02:43:50+00:00 app[web.1]: 2012-06-23 02:43:50 [2] [INFO] Using worker: sync
2012-06-23T02:43:50+00:00 app[web.1]: 2012-06-23 02:43:50 [6] [INFO] Booting worker with pid: 6
2012-06-23T02:43:50+00:00 app[web.1]: 2012-06-23 02:43:50 [5] [INFO] Booting worker with pid: 5
2012-06-23T02:43:50+00:00 app[web.1]: 2012-06-23 02:43:50 [7] [INFO] Booting worker with pid: 7
2012-06-23T02:43:50+00:00 heroku[web.1]: Process exited with status 0
2012-06-23T02:43:51+00:00 heroku[web.1]: State changed from starting to up
2012-06-23T02:45:00+00:00 heroku[router]: GET deep-rain-4577.herokuapp.com/ dyno=web.1 queue=0 wait=0ms service=21ms status=500 bytes=291
2012-06-23T02:45:01+00:00 heroku[router]: GET deep-rain-4577.herokuapp.com/favicon.ico dyno=web.1 queue=0 wait=0ms service=14ms status=404 bytes=238
2012-06-23T02:45:01+00:00 heroku[router]: GET deep-rain-4577.herokuapp.com/ dyno=web.1 queue=0 wait=0ms service=3ms status=500 bytes=291
2012-06-23T02:45:01+00:00 heroku[router]: GET deep-rain-4577.herokuapp.com/favicon.ico dyno=web.1 queue=0 wait=0ms service=15ms status=404 bytes=238
2012-06-23T02:45:02+00:00 heroku[router]: GET deep-rain-4577.herokuapp.com/ dyno=web.1 queue=0 wait=0ms service=5ms status=500 bytes=291
2012-06-23T02:45:02+00:00 heroku[router]: GET deep-rain-4577.herokuapp.com/ dyno=web.1 queue=0 wait=0ms service=2ms status=500 bytes=291
2012-06-23T02:45:02+00:00 heroku[router]: GET deep-rain-4577.herokuapp.com/ dyno=web.1 queue=0 wait=0ms service=4ms status=500 bytes=291
2012-06-23T02:45:02+00:00 heroku[router]: GET deep-rain-4577.herokuapp.com/ dyno=web.1 queue=0 wait=0ms service=3ms status=500 bytes=291
2012-06-23T02:45:02+00:00 heroku[router]: GET deep-rain-4577.herokuapp.com/ dyno=web.1 queue=0 wait=0ms service=3ms status=500 bytes=291
2012-06-23T02:45:02+00:00 heroku[router]: GET deep-rain-4577.herokuapp.com/ dyno=web.1 queue=0 wait=0ms service=5ms status=500 bytes=291
2012-06-23T02:45:02+00:00 heroku[router]: GET deep-rain-4577.herokuapp.com/ dyno=web.1 queue=0 wait=0ms service=2ms status=500 bytes=291
2012-06-23T02:45:03+00:00 heroku[router]: GET deep-rain-4577.herokuapp.com/ dyno=web.1 queue=0 wait=0ms service=2ms status=500 bytes=291
2012-06-23T02:45:03+00:00 heroku[router]: GET deep-rain-4577.herokuapp.com/ dyno=web.1 queue=0 wait=0ms service=4ms status=500 bytes=291
2012-06-23T02:45:03+00:00 heroku[router]: GET deep-rain-4577.herokuapp.com/ dyno=web.1 queue=0 wait=0ms service=4ms status=500 bytes=291
2012-06-23T02:45:03+00:00 heroku[router]: GET deep-rain-4577.herokuapp.com/favicon.ico dyno=web.1 queue=0 wait=0ms service=2ms status=404 bytes=238
2012-06-23T02:45:32+00:00 heroku[router]: GET deep-rain-4577.herokuapp.com/ dyno=web.1 queue=0 wait=0ms service=2ms status=500 bytes=291
2012-06-23T02:45:32+00:00 heroku[router]: GET deep-rain-4577.herokuapp.com/favicon.ico dyno=web.1 queue=0 wait=0ms service=13ms status=404 bytes=238 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-25T18:41:02.410

编辑：您的应用程序在本地工作吗？你的 Procfile 是什么样的？

此外，似乎 Heroku 在处理线程时表现得很时髦。看起来您的应用在几秒钟后收到了 SIGTERM。我会放入一些打印语句来确定应用程序在终止之前所做的最后几件事。

这是您的第一个烧瓶应用程序吗？你的最终目标是什么？学习？如果是这样，我不会从这个开始。尝试从头开始编写您的第一个应用程序，以便了解每一行的作用。我将从 Flask 教程开始：

[http://flask.pocoo.org/docs/](http://flask.pocoo.org/docs/)

然后也许可以查看以下关于在 Heroku 上部署烧瓶应用程序的教程：

[http://ryaneshea.com/lightweight-python-apps-with-flask-twitter-bootstrap-and-heroku](http://ryaneshea.com/lightweight-python-apps-with-flask-twitter-bootstrap-and-heroku)

# sorting - 在 Makefile 中排序

> ID：11166488
> 
> 赞同：0
> 
> 时间：2012-06-23T03:07:32.880
> 
> 标签：sorting, makefile

我的makefile中有这个

```
test:
   cat t.txt | sort -t $$'\t' -k 2,2 
```

但是“make test”给了我这个错误

猫t.txt | sort -t $'\t' -k 2,2 sort: multi-character tab `$\t' make: *** [test] Error 2

在 Redhat linux 上工作正常，但在 Ubuntu linux 上失败

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-23T07:02:54.430

`$'\t'`您尝试使用的语法是 bash-ism，但默认情况下 gmake`/bin/sh`用作 shell。您可以覆盖您的 makefile 中的 SHELL 变量，如下所示：

```
SHELL=/bin/bash 
```

或为此特定命令显式调用 bash：

```
test:
   bash -c "cat t.txt | sort -t $$'\t' -k 2,2" 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-23T03:15:23.310

问：这是在什么操作系统上失败？

建议：

*   [如何使用 cygwin 排序对第 n 列上的制表符分隔文件进行排序？](https://stackoverflow.com/questions/426647/how-do-i-sort-a-tab-seperated-file-on-the-nth-column-using-cygwin-sort)

*   [http://linux.derkeiler.com/Mailing-Lists/Fedora/2008-03/msg02180.html](http://linux.derkeiler.com/Mailing-Lists/Fedora/2008-03/msg02180.html)

您可以替换一个实际的选项卡，例如`sort -t "<Ctl-V><Tab>"`

# ruby-on-rails - 谁能告诉我如何制作“Mailboxer”的控制器、模型、视图和路由？

> ID：11166490
> 
> 赞同：1
> 
> 时间：2012-06-23T03:08:15.680
> 
> 标签：ruby-on-rails, devise

首先，提前感谢。这可能是一个菜鸟问题。

我已经设置了设计和邮箱。设计完全正常！然后将“用户名”列添加到用户表中，我就像这样配置

/config/initializers/mailboxer.rb

```
#Configures the methods needed by mailboxer
config.email_method = :email
config.name_method = :username 
```

现在我完全被困住了！！我不知道如何为简单的消息系统制作其余部分。我想要的是下面列出的这些消息功能

index(index/received or index/sent)... 您可以看到收到的邮件列表（仅显示发件人/发件人、主题和收到日期） 显示...您可以看到整个邮件正文。新...消息创建表单，作为选项，您可以从“显示”页面选择“回复”。在这种情况下，正文文本字段已经包含消息引号。

有人可以为我做一个非常简单的例子吗？我可以通过贝宝支付高达 50 美元的费用！

如果您需要使用邮箱 gem “view/messages/index”、“view/messages/show”、“view/messages/new”、“routes”，我想我需要制作“messages_controller”“message”模型。

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-11T16:23:43.257

我假设你现在已经解决了你的问题，但为了将来参考，一个具有邮箱 gem 的示例应用程序是：

[https://github.com/RKushnir/mailboxer-app](https://github.com/RKushnir/mailboxer-app)

（不是我的，但有助于起床和走）

# ruby-on-rails - 如何使用 Draper 0.14.0 访问装饰器规范文件中的辅助方法

> ID：11166493
> 
> 赞同：4
> 
> 时间：2012-06-23T03:08:32.153
> 
> 标签：ruby-on-rails, ruby-on-rails-3, draper

目前在我的 spec/decorators/product_decorator_spec.rb 中，我有以下内容：

```
require 'spec_helper'

describe ProductDecorator do
  let(:product) { FactoryGirl.create(:product) }

  subject do
    ProductDecorator.first
  end

  before do
    product
  end

  it 'should render the name attribute with a link to the product page' do
    subject.name.should == h.link_to(product.name, 'test')
  end
end 
```

当我运行我的规范时，我得到以下信息：

```
F.....

Failures:

  1) ProductDecorator should render the name attribute with a link to the product page
     Failure/Error: subject.name.should == h.link_to(product.name, 'resr')
      NameError:
       undefined local variable or method `h' for #<RSpec::Core::ExampleGroup::Nested_2:0x007fbbf212c8b0>
     # ./spec/decorators/product_decorator_spec.rb:15:in `block (2 levels) in <top (required)>'

Finished in 0.98531 seconds
6 examples, 1 failure

Failed examples:

rspec ./spec/decorators/product_decorator_spec.rb:14 # ProductDecorator should render the name attribute with a link to the product page 
```

根据文档，放置在装饰器文件夹中的规范应该可以访问辅助方法，但是我的规范没有。我也尝试过手动标记我的规格，但似乎没有任何效果。

感谢您的关注。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-24T21:13:56.530

如果您想访问帮助程序，您可以通过`your_decorator.h.link_to`.

当你设置主题时，你需要确保你调用的东西会被路由到助手，你的 rspec 示例中没有注入任何东西！

在您的示例中，它将`subject.h.link_to`用于调用辅助方法。

我还认为你的规范中有很多有线的东西。你对 , 的使用`let`对`subject`我`before`来说有点令人不安......

这是一篇关于如何编写干净的 rspec 的好文章：http: [//eggsonbread.com/2010/03/28/my-rspec-best-practices-and-tips/](http://eggsonbread.com/2010/03/28/my-rspec-best-practices-and-tips/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-05-09T20:04:27.937

我遇到了同样的问题，在装饰器的辅助代理（.h）上调用辅助方法在测试中不起作用（在 Draper 1.3 中）。我最终解决了这个问题，尽管我对此不太满意：

```
my_decorated_object.h.extend ApplicationHelper 
```

您的里程可能会有所不同，具体取决于您在助手中访问的控制器功能的数量。

# php - 取决于项目查询的意外项目评论

> ID：11166495
> 
> 赞同：2
> 
> 时间：2012-06-23T03:08:59.447
> 
> 标签：php, mysql, sql

我正在使用此函数`helps`根据参数列出表中的项目：（我包含了大部分代码，但您实际上可以只关注 mysql 查询）

```
function list_helps($by,$value,$page = -1,$ipp = 20){
    /* Yes I concatenate querys... so i use some variables to help it a bit */
    $sql = 'SELECT helps.* FROM helps ';
    $where = ''; $orderBy = ''; $in = ''; $join = ''; $limit = '';  $resultitems = ''; $header = '';
    if($page > 0)   $limit = 'LIMIT '.$page*$ipp.', '.($page+1)*$ipp; else $limit = 'LIMIT 10';
    switch($by){

        case 'byuser':
            $where = 'WHERE id_user ='.$value;
            $orderBy = 'ORDER BY id DESC';
            break;
        case 'byfriend':
            $sql = 'SELECT
              h.*,
              f.* 
            FROM (
              SELECT
                id,
                CASE followerid WHEN '.$value.' THEN followingid ELSE followerid END AS friend_id
              FROM friends
              WHERE acepted = 1
                AND (followerid  = '.$value.' OR followingid = '.$value.')
            ) AS f
              INNER JOIN helps AS h ON h.id_user = f.friend_id
              ORDER BY h.id DESC';
            break;
        default:
            break;
    }
    $sql .= $where.' '.$orderBy.' '.$limit;
    $res = cache_query($sql,'',60*60*5);
    /* checks in cache first, if not; executes query.. next code it's to render content */
} 
```

还有更多案例，但让我们专注于这两个。

它们都提供被请求的“帮助”（如果是用户，或者如果用户的朋友）；问题是当我试图检索那些评论时（比如博客文章的位置）；我正在这样做：

```
res = cache_query('SELECT help_replies.content, help_replies.date, 
            help_replies.offers, help_replies.accepted, help_replies.id_responds,
            usuarios.first_name, usuarios.last_name, usuarios.avatar,usuarios.id
        FROM help_replies left join usuarios 
            ON  help_replies.id_user = usuarios.id
        WHERE  help_replies.id_responds = '.$this->id.' 
        ORDER BY help_replies.id ASC', '', 30);

foreach($res as $obj) {
    /* $obj['id_responds'] */
    }
} 
```

问题是`help_replies.id_responds`引用了该项目，所以当情况是“byuser”时很好；但是当案例是'byfriend'时，这个字段会丢失（所以总是显示相同的评论）

结论：

*   byuser -> 帮助很好&评论很好
*   byfriend -> 帮助很好（这很奇怪）& 评论错误

知道为什么 $this->id 与 (JOINED) 查询不符吗？

-编辑-

$this->id 来自这个构造方法（我省略了很多属性）

```
function __construct($item) {
    $this->id = $item['id'];
    $this->id_user = $item['id_user'];
    ..  
} 
```

并且 $item 是 foreach 的一次迭代（因此它返回的行转换为数组）

穆哈斯·格拉西亚斯

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-25T05:44:30.597

您`byfriends`执行的查询`function list_helps(...)`似乎返回一个标记`id`两次的字段；一次用于您的`helps`表，然后再次用于表`f`的别名`friends`，作为子查询的一部分。

我可以想象，如果`$this->id`包含*朋友 ID*而不是*帮助 ID*，那么您的评论查询 ( `help_replies`) 将返回错误的结果。

所以也许用朋友ID的别名来改变你的子查询，如图所示，即`id AS friendsId,`一切都会按预期工作？

```
function list_helps($by,$value,$page = -1,$ipp = 20){
    ...
    ...
    case 'byfriend':
        $sql = 'SELECT
            h.*,
            f.* 
        FROM (
            SELECT
                id  AS friendsId,
                CASE followerid WHEN '.$value.' THEN followingid ELSE followerid END AS friend_id
            FROM friends
            WHERE acepted = 1
            AND (followerid  = '.$value.' OR followingid = '.$value.')
        ) AS f
            INNER JOIN helps AS h ON h.id_user = f.friend_id
            ORDER BY h.id DESC';
        break; 
```

出于这个原因，我已经养成了命名我的表标识符字段的习惯，`<tablename>Id`并且不必在任何地方使用别名。

# session - PassportJS如何检查用户是否登录？

> ID：11166497
> 
> 赞同：3
> 
> 时间：2012-06-23T03:10:21.640
> 
> 标签：session, express

如何检查用户是否登录 ExpressJS/ [PassportJS](http://passportjs.org/)应用程序？我相信 PassportJS 会自动设置会话？但它设置了什么变量？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-17T01:25:56.900

`session.passport.user`调用`req.logIn`时设置，调用时取消设置`req.logOut`

```
sessionStore = new MongoStore # RedisStore or whatever

sessionStore.get data.sessionID, (err, session) ->
  if session.passport.user?
     # Logged in 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-12-04T21:08:33.863

在 connect.js 你应该检查`request.user`你的中间件

[如何知道用户是否使用passport.js 登录？](https://stackoverflow.com/questions/18739725/how-to-know-if-im-logged-in-with-passport)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-29T21:29:08.037

如果您设置正确，您应该能够在 POST 到会话创建路由后看到 HTTP 响应中的 Set-Cookie 行（尝试`curl -v -d "username=whoever&password=supersecret" http://localhost:3000/session/new`对用户名、密码和 url 进行适当的替换）。

但是，要直接回答您的问题，您应该看到`connect.sid`并且`remember_token`默认情况下。如果您没有看到这个集合，但仍然可以在您的身份验证策略中转储一个有效的用户对象，请验证您的`app.configure`调用中是否包含以下行：

```
app.use(express.cookieParser());
app.use(express.session({secret: "replace"}); // lots of options here, read up
app.use(passport.session()); 
```

# php - PHP + jQuery - undefined index: ，但它仍然成功发布？

> ID：11166498
> 
> 赞同：1
> 
> 时间：2012-06-23T03:10:30.253
> 
> 标签：php, jquery, jquery-post

将记录插入数据库时​​，服务器返回“未定义索引：类别”错误，但仍然成功发布。

```
 $('#button').click(function(){
    var newvendor    = $('#input_vendor').val();
        newplantcode = $('#input_plantcode').val();
        newcategory  = $('#input_category').val();

$.post("php/addSite.php",
    {vendor: newvendor, 
     plant_code: newplantcode, 
     category: newcategory}, // <--- Error on this line, for some reason...

     function(result){
            console.log("server returned : " + result);
            [ RELOAD THE PAGE ]
     } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-23T03:15:54.673

您几乎在所有代码中都缺少引号：

```
 $('#button').click(function(){
var newvendor    = $('#input_vendor').val();
var newplantcode = $('#input_plantcode').val();
var newcategory  = $('#input_category').val();

$.post("php/addSite.php",
{vendor: newvendor, 
 plant_code: newplantcode, 
category: newcategory}, // <--- Error on this line, for some reason...

 function(result){
        console.log("server returned : " + result);
        [ RELOAD THE PAGE ]
 }
 //closing the post function
 )
 //closing the click event 
 }); 
```

现在再试一次

# data-binding - 敲除将文本标签绑定到下拉值选定的选项文本

> ID：11166504
> 
> 赞同：12
> 
> 时间：2012-06-23T03:11:50.763
> 
> 标签：data-binding, drop-down-menu, knockout.js

是否有一种简单的方法可以绑定 div 的文本框以根据同一页面上下拉列表中所选选项的文本值进行更改？

```
<div data-bind="text: dropdownValue"></div>
<select>
  <option value="1">Value1</option>
  <option value="2">Value2</option>
</select> 
```

请注意，我不想使用 javascript 将值放入 select 元素中。我想直接从 HTML 绑定到值。我还可以包含 jQuery 以使其工作。

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2012-06-23T15:12:29.947

我在昨天拼凑的东西中寻找类似的功能但找不到它，所以我最终只是更改了我在值属性中存储的内容。有时这是最简单的解决方案。

这是使用 jQuery 解决问题的一种快速而丑陋的解决方案：

### HTML

```
<div data-bind="text: dropdownText"></div>
<select data-bind="value: dropdownValue" id="dropdown">
  <option value="1">Value1</option>
  <option value="2">Value2</option>
</select> 
```

### JS

```
function ViewModel() {
    var self = this;
    this.dropdownValue = ko.observable();
    this.dropdownText = ko.computed(function() {
        return $("#dropdown option[value='" + self.dropdownValue() + "']").text();
    });
};

ko.applyBindings(new ViewModel()); 
```

现场示例：http: [//jsfiddle.net/5PkBF/](http://jsfiddle.net/5PkBF/)

如果您希望在多个地方执行此操作，最好编写自定义绑定，例如：

### HTML

```
<div data-bind="text: dropdownValue"></div>
<select data-bind="selectedText: dropdownValue">
  <option value="1">Value1</option>
  <option value="2">Value2</option>
</select> 
```

### JS

```
ko.bindingHandlers.selectedText = {
    init: function(element, valueAccessor) {
        var value = valueAccessor();
        value($("option:selected", element).text());

        $(element).change(function() {
            value($("option:selected", this).text());
        });
    },
    update: function(element, valueAccessor) {
        var value = ko.utils.unwrapObservable(valueAccessor());
        $("option", element).filter(function(i, el) { return $(el).text() === value; }).prop("selected", "selected");
    }
};

function ViewModel() {
    this.dropdownValue = ko.observable();
};

ko.applyBindings(new ViewModel()); 
```

现场示例：http: [//jsfiddle.net/5PkBF/1/](http://jsfiddle.net/5PkBF/1/)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-07T18:58:24.637

这就是我实现类似功能的方式。我在模型中定义了一个名为“dropDownValue”的可观察对象。我还有一个名为“dropDownValues”的可观察数组。我的 HTML 看起来像：

```
<span data-bind="text: dropDownValue"></span>
<select data-bind="options: dropDownValues, optionsValue: 'FieldText', optionsText: 'FieldText', value: dropDownValue"></select> 
```

请注意，我对 optionValues 和 optionsText 使用了相同的字段（不确定在这种情况下是否真的需要 optionsText）。在我的特定应用程序中，“dropDownValue”已在其他地方预填充，因此当我打开一个带有上述选择的对话框时，我希望它默认为先前填充的值，并绑定它，以便如果用户更改它，我可以在数据库中反映该更改。

# jquery - Strange CSS Positioning issue with a fader on a responsive site

> ID：11166505
> 
> 赞同：1
> 
> 时间：2012-06-23T03:11:53.213
> 
> 标签：jquery, html, css, wordpress, responsive-design

I'm developing a prototype responsive wordpress theme version of my homepage. I'm running into issues with the fader on the homepage.

[http://dev.epicwebdesign.ca/epicblog/](http://dev.epicwebdesign.ca/epicblog/)

When the image switches, it uses position:absolute to overlay the pictures, then goes back to position:relative.

I need to make the absolute be relative to the bottom left corner of the menu instead of the top left corner of #wrap so it doesn't overlap.

I tried putting it in a container div like this: [http://wiki.orbeon.com/forms/doc/contributor-guide/browser#TOC-Absolutely-positioned-box-inside-a-box-with-overflow:-auto-or-hidden](http://wiki.orbeon.com/forms/doc/contributor-guide/browser#TOC-Absolutely-positioned-box-inside-a-box-with-overflow:-auto-or-hidden) but that doesn't seem to work.

Any ideas?

There are major CSS compatibility issues in IE, try it in chrome. It should look similar to [http://epicwebdesign.ca](http://epicwebdesign.ca). When the browser window is shrunk horizontially, the whole theme compensates.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-23T03:36:51.547

Your main content is floating upwards and so to fix this issue, I would expand both the navigation and content to 100% and float them left to keep them from overlapping.

For your element with id "navigation", add a style of float:left.

Then, for your element with id "wrapper", add a style of float:left and width:100%.

I only tested this in Firefox so you may have to tweak some other styles for it to work in all browsers correctly.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-23T03:41:45.227

Turns out I'm an idiot and was setting position:relative on the wrong element via the most annoying typo ever. (.rslider instead of .rslides)

# google-app-engine - 超出最大每日预算且结算状态为“更改每日预算”

> ID：11166507
> 
> 赞同：2
> 
> 时间：2012-06-23T03:12:01.677
> 
> 标签：google-app-engine, billing

我们的应用已超出每日最大预算，但由于 Google 计费系统存在严重缺陷，我们无法增加预算。Google App Engine 和 Google Wallet 对多点登录的支持不是很强大。结果，我去更改预算，但它使用了错误的 Google 电子钱包帐户（我登录时使用的另一个 Google 帐户）。我不得不回去再试一次，但现在我们的 GAE 应用程序显示以下状态：

**帐单状态：更改每日预算** 在我们处理您的预算更改期间，您的帐户已被锁定。如果您被重定向到 Google Checkout 但未完成该过程，您的设置将保持不变。（处理完未付款项后，您将能够再次更改预算设置。）

现在我完全无法进行任何计费更改，我们的应用程序被关闭（超过配额），我无能为力修复它。这是 App Engine 的计费系统和 Google Wallet 集成中的一个严重的根本缺陷。

有没有人遇到过这个？有没有人知道的解决方法？

现在，由于这个问题，我们的生产应用程序完全崩溃了。

您能提供的任何帮助将不胜感激？

如果您来自 Google，并且您可能能够在后端提供帮助，我们的应用程序 ID 是“nhldraftpik”。

谢谢！

布赖恩

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-25T18:07:34.777

当您连接到错误的 Google 电子钱包帐户时，就会发生这种情况。

如果您再次遇到此问题，请检查您是否通过良好的 Google 电子钱包连接。

如果没有，请点击注销，然后使用好帐户登录（不要点击返回按钮）。

# javascript - jQuery用动画改变图像并等待它触发超链接

> ID：11166508
> 
> 赞同：1
> 
> 时间：2012-06-23T03:12:05.497
> 
> 标签：javascript, jquery, html, animation

我想使用 url attr 在 .click() 上切换图像，但我不知道如何让它等待，直到动画完成以重定向到新网页。这是js

```
$(function() {
    $('.cv').click(function() {
        $("#cv img").fadeOut(2000, function() {
            $(this).load(function() {
                $(this).fadeIn();
            });
            $(this).attr("src", "images/cv2.png");
            return true;
        });
    });
}); 
```

这是html：

```
<div id="cv" class="img one-third column">
  <a class="cv" target="#" href="cv.joanlascano.com.ar">
  <img src="images/cv1.png" alt="Curriculum"/>
  <br />CV</a>
</div> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-23T03:25:31.620

`false`您需要通过单击处理程序返回来防止浏览器默认跟随链接。然后在fadeIn()的回调中做重定向

```
$(function() {
    $('.cv').click(function() {
        /* store url*/
        var href = this.href;
        $("#cv img").fadeOut(2000, function() {
            /* bind load to image*/
            $(this).load(function() {
                $(this).fadeIn(function() {
                    /* redirect in callback of fadeIN*/
                    window.location = href;
                });
                /* change src*/
            }).attr("src", "images/cv2.png");
        });
        /* prevent browser default following href*/
        return false;
    });
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-23T03:22:08.813

```
$('.cv').click(function(e) {
    e.preventDefault();  // prevent browser reload
    $("#cv img").fadeOut(2000, function() {  // fadeout the image
         $(this)
              .attr('src',  "images/cv2.png")  // change src of image
              .load(function() {  // load image
                 $(this).fadeIn(); // display the image
             });
    });
}); 
```

# vb.net - 将数据列表变成 3 x 3

> ID：11166509
> 
> 赞同：0
> 
> 时间：2012-06-23T03:12:37.063
> 
> 标签：vb.net, datalist

这是我的产品页面代码。问题是每当我在网站中添加新对象时，我的数据列表都会填写新项目。所以我可以知道如何添加代码，以便我可以将数据列表变成 3x3。谢谢。

背后的代码

```
Protected Sub Page_Load(ByVal sender As Object, ByVal e As System.EventArgs) Handles Me.Load
        Dim Product As New Product
        Dim DataSet As New DataSet
        Dim pds As New PagedDataSource
        DataSet = Product.GetProduct
        Session("Dataset") = DataSet
        pds.PageSize = 4
        pds.AllowPaging = True
        pds.CurrentPageIndex = 1
        Session("Page") = pds
        If Not Page.IsPostBack Then
            UpdateDatabind()
        End If
    End Sub
    Sub UpdateDatabind()
        Dim DataSet As DataSet = Session("DataSet")
        If DataSet.Tables(0).Rows.Count > 0 Then
            pds.DataSource = DataSet.Tables(0).DefaultView
            Session("Page") = pds
            dlProducts.DataSource = DataSet.Tables(0).DefaultView
            dlProducts.DataBind()
            lblCount.Text = DataSet.Tables(0).Rows.Count
        End If
    End Sub
    Private Sub dlProducts_UpdateCommand(source As Object, e As System.Web.UI.WebControls.DataListCommandEventArgs) Handles dlProducts.UpdateCommand
        dlProducts.DataBind()
    End Sub

    Public Sub PrevNext_Command(source As Object, e As CommandEventArgs)
        Dim pds As PagedDataSource = Session("Page")
        Dim CurrentPage = pds.CurrentPageIndex
        If e.CommandName = "Previous" Then
            If CurrentPage < 1 Or CurrentPage = pds.IsFirstPage Then
                CurrentPage = 1
            Else
                CurrentPage -= 1
            End If
            UpdateDatabind()
        ElseIf e.CommandName = "Next" Then
            If CurrentPage > pds.PageCount Or CurrentPage = pds.IsLastPage Then
                CurrentPage = CurrentPage
            Else
                CurrentPage += 1
            End If
            UpdateDatabind()
        End If
        Response.Redirect("Products.aspx?PageIndex=" & CurrentPage)
    End Sub 
```

这是我的 product.vb 代码

```
Public Function GetProduct() As DataSet
        Dim strConn As String
        strConn = ConfigurationManager.ConnectionStrings("HomeFurnitureConnectionString").ToString
        Dim conn As New SqlConnection(strConn)
        Dim strSql As String
        strSql = "SELECT p.ProdName, p.UnitPrice, pd.Color, pd.PDPic FROM Product p INNER JOIN ProductDetail pd ON p.ProdID = pd.ProdID  " & _
                 "WHERE pd.PdColor = (SELECT min(PdColor) FROM ProductDetail as pd1 WHERE pd1.ProdID = p.ProdID)"
        Dim cmd As New SqlCommand(strSql, conn)
        Dim ds As New DataSet
        Dim da As New SqlDataAdapter(cmd)
        conn.Open()
        da.Fill(ds)
        conn.Close()
        Return ds
    End Function 
```

# android - Android VideoView - 强制缓冲整个文件

> ID：11166510
> 
> 赞同：1
> 
> 时间：2012-06-23T03:12:37.327
> 
> 标签：android, android-videoview

是否可以强制 VideoView 下载/缓冲整个文件（文件是远程 URL）？这个想法是强制下载整个视频，以便用户可以在离线时查看它。

# javascript - Javascript .removeChild() 只删除偶数节点？

> ID：11166517
> 
> 赞同：2
> 
> 时间：2012-06-23T03:13:48.000
> 
> 标签：javascript

我正在尝试在 ID="prnt" 的 DIV 下动态添加子 DIV。添加节点工作正常没问题。然而，对于已删除的节点，它只删除包括 0 在内的偶数节点就足够奇怪了。为什么会这样，我可能有点愚蠢，但它看起来更像是一个错误。我可能是非常错误的。

```
 <script type="text/javascript">

        function displayNodes()
        {
            var prnt = document.getElementById("prnt");
            var chlds = prnt.childNodes;
            var cont = document.getElementById("content");

            for(i = 0; i < chlds.length; i++)
            {
                if(chlds[i].nodeType == 1)
                {

                    cont.innerHTML +="<br />";
                    cont.innerHTML +="Node # " + (i+1);
                    cont.innerHTML +="<br />";
                    cont.innerHTML +=chlds[i].nodeName;
                    cont.innerHTML +="<br />";

                }
            }
        }

        function deleteENodes()
        {
            var prnt = document.getElementById("prnt");
            var chlds = prnt.childNodes;

            for(i = 0; i < chlds.length; i++)
            {

                    if(!(chlds[i].nodeType == 3))
                    {
                        prnt.removeChild(chlds[i]);
                    }

            }

        }

        function AddENodes()
        {
            var prnt = document.getElementById("prnt");

           //Only even nodes are deletable PROBLEM

            for(i = 0; i < 10; i++)
            {

                var newDIV = document.createElement('div');
                newDIV.setAttribute("id", "c"+(i));

                var text = document.createTextNode("New Inserted Child "+(i));
                newDIV.appendChild(text);
                prnt.appendChild(newDIV);

            }
        }

    </script>

    <title>Checking Div Nodes</title>
</head>

<body>

    <div id="prnt">
        Parent 1

    </div>

    <br />
    <br />
    <br />

   <button type="button" onclick="displayNodes()">Show Node Info</button>
   <button type="button" onclick="deleteENodes()">Remove All Element Nodes Under Parent 1</button>
   <button type="button" onclick="AddENodes()">Add 5 New DIV Nodes</button>

    <div id="content">

    </div>
</body> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-23T03:21:18.223

问题是您在循环遍历集合时正在修改集合。反向迭代应该可以解决这个问题......

```
for(i = chlds.length-1; i >= 0; i--)
{
    if(!(chlds[i].nodeType == 3))
    {
         prnt.removeChild(chlds[i]);
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-23T03:20:33.960

取消 if(!(chlds[i].nodeType == 3)) nodeType 检查。

您可以通过执行 .querySelectorAll('div') 来仅提取 div

```
function deleteENodes()
        {

 var chlds = document.getElementById("prnt").querySelectorAll('div');<----

            for(i = 0; i < chlds.length; i++)
            {

                    if(!(chlds[i].nodeType == 3))
                    {
                        prnt.removeChild(chlds[i]);
                    }

            }

        } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-23T03:22:31.870

问题是当您删除节点（从头开始）时，剩余子节点的索引每次都会减少一个：

给5个孩子：

```
Child1 Index0
Child2 Index1
Child3 Index2
Child4 Index3
Child5 Index4 
```

当你去移除它们时，这就是正在发生的事情

```
.removeChild(0) removes Child1
Child2 is now Index0
Child3 is now Index1
....

next Iteration:
.removeChild(1) removes Child3
Child2 is still Index0
Child4 is now Index1
Child5 is now Index2
.... 
```

解决方案。从最后一个索引中删除子元素并移向 0。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-23T03:24:50.413

`NodeList`返回的是`childNodes`“live” - 删除一个孩子会立即更新列表。

发生的事情是您正在删除一个元素，这会将列表的长度减少 1，从而导致您的循环跳过一个元素。

避免这种情况的一种方法是将元素复制到`Array`.

例如

```
var nodes = [];
for (var i = 0; i < chlds.length; i++) {
  nodes.push(chlds[i]);
}

for(i = 0; i < nodes.length; i++)
{
  if(!(nodes[i].nodeType == 3))
  {
    prnt.removeChild(nodes[i]);
  }
} 
```

# php - 在 Doctrine 2 结果中交换原始值

> ID：11166521
> 
> 赞同：1
> 
> 时间：2012-06-23T03:14:22.110
> 
> 标签：php, symfony1, doctrine, doctrine-orm

### 问题：

我正在开发一个 WordPress Symfony 包并为其创建实体。

我有一个`Comment`实体，并`$comment->user`映射到一个`User`实体。

然而**WordPress`0`用来代表一个来宾用户**。它在 Doctrine 中引起了很多问题，因为 id 为 0 的用户永远不存在。它会导致以下问题：

*   `$comment->getUser()``user_id`当该行是时，可能会引发实体未找到异常`0`。
*   `$comment->setUser()`不起作用，因为您不能使用`null`repensent guest（应该使用`0`），并且您也不能使用`new User(0)`。

### 问题：

默认情况下，以下代码将保存`null`到`user_id`数据库中的列：

```
$comment->setUser(null); 
```

是否可以将 Doctrine 保存`0`（而不是`null`）到`user_id`列？

或者更好的是，我可以`0`在`null`处理`user_id`列时交换吗？

感谢您的时间。

### 测试用例：

```
// if a guest posted a comment, pass null to setUser()
// although the actual value will be saved to user_id column is 0
$guestComment->setUser(null);

// if a comment was posted by a guest, getUser() should return null
// although the actual value returned by user_id column is 0
$guestComment->getUser(); // return null

// if a member posted a comment, pass a User entity to setUser()
$memberComment->setUser(new User());

// if a comment was posted by a member, getUser() should return the User entity
$guestComment->getUser(); // return User entity. 
```

### 方向：

我正在考虑创建自定义映射类型 [http://docs.doctrine-project.org/projects/doctrine-dbal/en/latest/reference/types.html](http://docs.doctrine-project.org/projects/doctrine-dbal/en/latest/reference/types.html)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-24T03:29:58.663

结果我通过创建自定义类型解决了这个问题：

[https://github.com/kayue/WordpressBundle/blob/master/Types/WordPressIdType.php](https://github.com/kayue/WordpressBundle/blob/master/Types/WordPressIdType.php)

```
<?php

/**
 * Datatype for WordPress's IDs
 *
 * WordPress use 0 to represent a guest user. It cause a lots of problems
 * in Doctrine because the user with id zero never exist. This datatype
 * convert 0 to null, make life easier.
 */

namespace Hypebeast\WordpressBundle\Types;

use Doctrine\DBAL\Types\Type;
use Doctrine\DBAL\Types\BigIntType;
use Doctrine\DBAL\Platforms\AbstractPlatform;

class WordPressIdType extends BigIntType
{
    const NAME = 'wordpressid';

    public function convertToPHPValue($value, AbstractPlatform $platform)
    {
        if($value === 0) {
            return null;
        }

        return $value;
    }

    public function convertToDatabaseValue($value, AbstractPlatform $platform)
    {
        if($value === null) {
            return 0;
        }

        return $value;
    }

    public function getName()
    {
        return self::NAME;
    }
} 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-06-23T12:50:06.017

是的，这很简单。

只需将您的`setUser`函数替换为将 0 转换为 null 的函数，并将您的`getUser`函数替换为将 null 转换为 0 的函数。

```
public function setUser($user) {
    if($user == 0) {
        $user = null;
    }

    $this->user = $user;
}

public function getUser() {
    return $this->user == null ? 0 : $this->user;
} 
```

Doctrine 2 不会以任何方式限制您的 getter 和 setter 可以做什么。（或您实体中的任何方法）

# ruby - 使用 Nokogiri 解析多个 URL？

> ID：11166525
> 
> 赞同：0
> 
> 时间：2012-06-23T03:15:45.153
> 
> 标签：ruby, nokogiri

我正在尝试从十个 URL 列表中获取 href 列表并遇到了麻烦。

这些块中的每一个都彼此分开工作，但是，当我尝试将它们组合起来时，我得到了第 1-10 页的列表和一个错误。解决这个问题的正确方法是什么？

```
#!/usr/bin/env ruby

require 'rubygems'
require 'nokogiri'
require 'open-uri'

#/ this prints all 10 of the URLs to pull page hrefs from.

1.upto(10) do |pagenum|
url = "http://www.mywebsite.com/page/#{pagenum}"
  puts url
end

#/ Prints out all of the hrefs. 

doc = Nokogiri::HTML(open(url))
doc.xpath('//h2/a/@href').each do |node|
  puts node.text
end 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-24T04:51:02.083

这是您的代码，注释：

```
1.upto(10) do |pagenum|
  # Create a local variable named `url`
  url = "http://www.mywebsite.com/page/#{pagenum}"

  # Print it
  puts url
end

# Open...uhm...which URL?
doc = Nokogiri::HTML(open(url)) 
```

问题是变量在块`url`的本地“范围” 。`upto`一旦您存在该块，它就不再存在。也许你想要这个：

```
1.upto(10) do |pagenum|
  # Create a local variable named `url`
  url = "http://www.mywebsite.com/page/#{pagenum}"

  # Print it
  puts url

  # Print this URL
  doc = Nokogiri::HTML(open(url))
  doc.xpath('//h2/a/@href').each do |node|
    puts node.text
  end
end 
```

# opencl - OpenCL 中 For 循环的奇怪行为

> ID：11166531
> 
> 赞同：0
> 
> 时间：2012-06-23T03:16:31.127
> 
> 标签：opencl

当我想在循环中使用计数器来生成值时，opencl 中的循环出现问题，似乎计数器值在迭代期间保持不变。我的 OpenCL 功能代码如下：

```
void my_loop( __global unsigned int* tab1, unsigned int* tab2){
  uint i, j;
  uint global_id_y = get_global_id(1);
  uint global_size_y = get_global_size(1);
  uint loop = global_size_y - global_id_y - 1
  uint length = get_global_size(0);

  for(i = 0; i < loop; i++){
      sidx = i * length; 
      for(j = 0; j < length; j++){
          tab2[sidx + j ] = i*10 + j;
      }
} 
```

调用 clEnqueueNDRangeKernel 函数的代码

```
global_work_size[0] =  ncols; //ncols = 5
global_work_size[1] =  nbfrequents; //nbfrequents = 10

local_work_size[0] = ncols;
local_work_size[1] = nbfrequents;

clEnqueueNDRangeKernel(command_queue, kernel, 2, NULL, global_work_size, 
                                         local_work_size, 0, NULL, &event); 
```

执行后，我得到的结果是这样的：

```
0 1 2 3 4
0 1 2 3 4
0 1 2 3 4
0 1 2 3 4 
...
0 1 2 3 4 
```

正常吗？如何使用我的计数器的不同值？

# objective-c - 更新数组中的值

> ID：11166533
> 
> 赞同：0
> 
> 时间：2012-06-23T03:16:41.940
> 
> 标签：objective-c, ios5

如何更新数组每一行中的单个值？

例如，我有一个从 SQL DB 创建的数组，其中包含以下列。

```
Name
Address
Lat
Long
Distance 
```

距离最初设置为 0，直到从纬度/经度计算。我想用计算出的距离更新那个 0 。

我发现的每个示例都没有显示如何更新每行的单个列。

```
NSMutableArray *barInfo = [BarDatabase database].barInfo;
for (Bars *info in barInfo) {
    NSLog(@"%@, %@, %@, %@, %@", info.barName, info.barAddress, info.Lat, info.Long, info.cachedDist);
    NSString *strLat = info.Lat;
    NSString *strLong = info.Long;
    CLLocation *barLocation = [[CLLocation alloc] initWithLatitude:[strLat doubleValue] longitude:[strLong doubleValue]];
    CLLocationDistance bdistance = [currentLat distanceFromLocation:barLocation]/1000;
    [barInfo addObject:bdistance];
} 
```

我正在使用 NSMutableArray，因为我不知道如何修改 NSArray 中的距离字段。我知道 Apple 声明这是可能的，但我找不到。

# javascript - 即内存释放

> ID：11166540
> 
> 赞同：1
> 
> 时间：2012-06-23T03:18:30.683
> 
> 标签：javascript, internet-explorer, memory

这是在IE8中测试的代码：

```
var stack = [];
function test() {
    var i = 0;
    while(i++ < 100000) {
        stack[i] = {a: "some string"};
        delete stack[i];
    };
}
test(); 
```

这个脚本只在 IE 中使用了一点内存。Windows任务管理器显示29704K，但下一个：

```
var stack = [];
function test() {
    var i = 0;
    while(i++ < 100000) {
        stack[i] = {a: "some string"};
    };
    i = 0;
    while(i++ < 100000) {
        delete stack[i];
    }
}
test(); 
```

它使用 54860K 内存。我徘徊为什么或如何以其他方式释放内存。

感谢您的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-23T03:23:28.200

如果您只是查看系统级别的浏览器总内存使用量，那么您可能查看的是最大浏览器内存使用量，而不是实际使用的内存量。仅仅因为您在浏览器中释放了一些东西并不意味着浏览器将该内存返回给操作系统。该内存可能可供将来在浏览器中重复使用，但尚未返回给操作系统。

您的第二个示例将比第一个示例具有更高的峰值内存使用量，因为您在删除元素之前完全填充了数组。因此，如果由于更高的峰值使用率而在系统级别显示出更大的内存使用量，那就不足为奇了。这并不意味着更多的内存仍在使用中，只是浏览器必须从系统请求更多的内存来处理更高的峰值使用率，并且浏览器不一定会将现在未使用的内存返回给操作系统。该内存将位于浏览器的可用内存池中，可用于将来的内存请求，因此它不是内存泄漏。

# java - Java 核心还是 Java EE？

> ID：11166542
> 
> 赞同：0
> 
> 时间：2012-06-23T03:18:54.997
> 
> 标签：java, jakarta-ee

我知道这个问题可能有点傻，但我似乎找不到正确的答案。我在学校学习 Java，我知道的 Java 是面向对象的，使用 Eclipse/Netbeans 和 Notepad++ 进行编码。使用过 java API，我也知道 java swing 库。当我去面试时，他们问我是否有使用 Java spring、hibernate 或 Java EE 的经验，因为我的简历暗示我精通 Java。

谁能告诉我我知道的 Java 的名称是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-23T03:30:01.477

爪哇 SE；“核心 Java”。

它不再是“J2SE”，已经很多年了。

Hibernate 和 Spring 都不是 Java EE，但它们也不是 Java 本身的一部分。它们只是广受欢迎的库/框架。Hibernate 恰好是 JPA 的实现，Spring 支持一些 Java EE 注释。它们都可以在 Java SE 或 Java EE 环境中使用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-23T03:32:39.523

您正在使用 Core Java....Core java 是所有基本类和 API。它是“C lib”或 VB 中的内在控件和内置函数的 Java 等价物。

然后将这些添加到额外的 API 中以形成“平台”，即运行应用程序所需的完整 API 集。

核心 java + 通用 API 存在于不同的应用领域，例如，我们有 Java EE 平台、Java SE 平台和 Java ME 平台。

这是常识，这意味着特定类型应用程序的开发人员需要向平台添加很少或根本不需要添加来支持他们的应用程序，同时避免可笑的膨胀。

请注意，您可以使用“core java”并向其中添加制作完整的 JSP Web/应用服务器所需的所有包。使用已经包含此类内容的平台更方便。

# macos - 究竟如何处理 Oracle .dmp 文件

> ID：11166543
> 
> 赞同：0
> 
> 时间：2012-06-23T03:18:55.237
> 
> 标签：macos, oracle

所以我试图对 Oracle 转储文件中的数据集进行一些分析。事实证明，正如你们中的一些人所知，Oracle 不再支持（或托管）在 OS X 上运行的最后一个版本的 Oracle 的任何二进制文件。

我想我有几个选择，我可能需要一些帮助：

1.  查找下载适用于 Mac OSX 的 Oracle 10 g 的链接。

2.  找到一种将转储文件加载到另一个数据库（例如 MySQL 或 Postgres）的方法。

还有其他想法/建议吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-23T08:12:39.857

我假设您的问题是您唯一可用的平台是 Mac。所以显而易见的解决方案是虚拟化。Oracle 的 Virtualbox 可用于 Mac OSX cattery 中的各种版本。 [越出越多](https://www.virtualbox.org/wiki/Mac%20OS%20X%20build%20instructions)。

然后，您可以安装其中一个 Oracle 设备。 [在这里下载它们](http://www.oracle.com/technetwork/community/developer-vm/index.html)。这些设备基于 Oracle Enterprise Linux 构建，但与 BSD 并无太大区别。我建议使用 Database App Developer。它适用于 11gR2，但将 10g 导出文件导入到更高版本的数据库中应该没有任何问题。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-23T03:25:41.840

如果没有向 Oracle 提出支持请求（假定您在 Mac 上拥有 Oracle 的商业许可），您可能不会找到旧版本 Oracle 的信誉良好的链接。我担心您找到的任何链接至少可能会感染恶意软件。

转储文件是 Oracle 未记录的 Oracle 专有二进制格式。我不知道有任何工具可以将该数据导入非 Oracle 数据库——如果有人会努力对该文件格式进行逆向工程，我会感到惊讶。

你能在 Windows 或 Linux 机器上安装 Oracle（可能是在你的 Mac 上运行的 VM）吗？这将是导入数据的最简单的选择。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-23T05:15:11.137

dmp 文件是专有格式。我怀疑您将能够导入另一个数据库。

# python - 生成随机词

> ID：11166547
> 
> 赞同：2
> 
> 时间：2012-06-23T03:19:39.090
> 
> 标签：python, random

我正在尝试创建一个字符串，该字符串在列表中包含一定数量的不同单词，但是我使用的代码仅随机使用一个单词，而不是每个打印的单词都使用不同的单词。

这是我的代码：

```
import random

words = ['hello', 'apple', 'something', 'yeah', 'nope', 'lalala']
print random.choice(words) * 5 
```

一个示例输出是：

`hellohellohellohellohello`

一个示例预期输出将是：

`appleyeahhellonopesomething`

谁能告诉我我做错了什么？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-23T03:20:56.063

`random.choice(words) * 5`只执行`random.choice`一次，然后将结果乘以 5，导致重复相同的字符串。

```
>>> import random
>>> words = ['hello', 'apple', 'something', 'yeah', 'nope', 'lalala']
>>> print ''.join(random.choice(words) for _ in range(5))
applesomethinghellohellolalala 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-06-23T03:43:09.280

如果您不想重复原始列表中的单词，则可以使用`sample`.

```
import random as rn
words = ['hello', 'apple', 'something', 'yeah', 'nope', 'lalala']

word = ''.join(rn.sample(words, 5)) 
```

结果：

```
>>> word
'yeahhellosomethingapplenope' 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-06-23T03:24:00.947

你不是调用`random.choice(words)`5 次，而是得到一个输出，`random.choice(words)`然后乘以 5 次。使用字符串，它只是重复字符串。

`"abc" * 3`会给你`"abcabcabc"`

因此，首先取决于您随机选择的单词，它只会重复 5 次。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-06-23T03:26:17.017

“乘以”一个字符串将多次打印该字符串。例如，`print '=' * 30`将打印一行 30 `"="`，这就是为什么你得到 5 次`"hello"`- 它重复随机选择的单词 5 次。

```
import random, sys
words = ['hello', 'apple', 'something', 'yeah', 'nope', 'lalala']

for i in range(5):
    sys.stdout.write(random.choice(words)) 
```

使用[choice()](http://docs.python.org/library/random.html?highlight=choice#random.choice)将为您提供一组5 个随机选择。请注意，我们使用`sys.std.write`以避免连续`print`语句在单词之间放置空格。

例如，从两次运行：

```
yeahsomethinghelloyeahlalala 
```

和

```
somethingyeahsomethinglalalanope 
```

> `choice()`
> 
> 从非空序列 seq 返回一个随机元素。如果 seq 为空，则引发 IndexError。

当然，在 Python 3.x 中，我们可以使用`print`代替`sys.stdout.write`并将其`end`值设置为`''`. IE，

```
print(random.choice(words), end='') 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2014-09-17T03:37:49.443

```
import random
WORDS = ("Python","Java","C++","Swift","Assembly")
for letter in WORDS:
    position = random.randrange(len(WORDS))
    word = WORDS[position]
    print(word) 
```

# sql - 基于三个列删除重复记录，但将具有最高值的记录保留在第四列中

> ID：11166552
> 
> 赞同：1
> 
> 时间：2012-06-23T03:20:33.313
> 
> 标签：sql, date, ms-access, duplicates, sql-delete

我已经阅读了很多关于处理重复项的问题，它们帮助我编写了我拥有的 SQL，但我的任务是删除重复项，而不是基于重复字段，而是基于另一个字段。

在我的项目中，我根据三个列相等来定义重复项，但是有一个永远不会*重复的第四列事务日期/时间。我想保留最新的交易并丢弃旧的交易。

这是我已经拥有的
`SELECT Table_A.Fld1, Table_A.Fld2, Table_A.Fld3, Table_A.Fld4, Table_A.Date_Updated FROM Table_A INNER JOIN (SELECT Table_A.Fld2, Table_A.Fld3, Table_A.Fld4 FROM Table_A GROUP BY Table_A.Fld2, Table_A.Fld3, Table_A.Fld4 HAVING count(*)>1) AS Temp ON (Table_A.Fld4 = Temp.Fld4) AND (Table_A.Fld3 = Temp.Fld3) AND (Table_A.Fld2 = Temp.Fld2);`

这会产生一个重复列表

```
FLD_reUpdates_qry
Fld2 Fld3 Fld4 Date_Updated
6 用户 ID_lst 1394522856 2012 年 6 月 21 日 15:21:59
6 用户 ID_lst 1394522856 2012 年 6 月 21 日 15:22:21
67 [活跃？] 1099608160 2012 年 6 月 19 日 19:09:16
67 [活动？] 1099608160 2012 年 6 月 19 日 19:09:17
68 Url_lst 1107138998 2012 年 6 月 21 日 15:21:16
68 Url_lst 1107138998 2012 年 6 月 21 日 15:21:42
74 用户 ID_lst 1044317178 2012 年 6 月 21 日 15:26:24
74 用户 ID_lst 1044317178 2012 年 6 月 21 日 15:27:15
74 用户 ID_lst 1044317178 2012 年 6 月 21 日 15:28:50
```

好吧，这很好，花花公子我有重复的列表，你可以看到记录 74 有三个重复。但我想要的只是最新时间的副本。所以我有这个查询..
`SELECT max(date_updated) AS LatestUpdate, Table_A.Fld2, Table_A.Fld3, Table_A.Fld4 FROM Table_A GROUP BY Table_A.Fld2, Table_A.Fld3, Table_A.Fld4 HAVING count(1)> 1;`
它产生以下列表......

```
FLD_LatestReupdates_Qry
最新更新 Fld2 Fld3 Fld4
2012 年 6 月 21 日 15:22:21 6 User_ID_lst 1394522856
2012 年 6 月 19 日 19:09:17 67 [活动？] 1099608160
2012 年 6 月 21 日 15:21:42 68 Url_lst 1107138998
2012 年 6 月 21 日 15:28:50 74 用户 ID_lst 1044317178
```

啊! 现在我有一个我想要保留的列表，即使有记录 74 我也只有最新的条目。但我真正想要的是删除其他重复项。这就是我似乎遇到了心理障碍的地方。如何编写一个只删除较旧的重复项（保留最后一个）而不是任何其他非重复记录的查询？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-23T04:36:58.587

使用您的查询**FLD_LatestReupdates_Qry**作为此代码中的子查询，我删除了重复的行，只留下那些具有最新 date_updated 的记录。DELETE 的这个 systax 对应于 Sql Server，如果你想要它用于不同的后端，它可能需要一些小的改动。

```
DELETE A 
FROM Table_A A
INNER JOIN 
( SELECT max(date_updated) AS LatestUpdate, Table_A.Fld2, Table_A.Fld3, Table_A.Fld4 
    FROM Table_A 
GROUP BY Table_A.Fld2, Table_A.Fld3, Table_A.Fld4 HAVING count(1)> 1 
) B
ON A.Fld2 = B.Fld2 AND A.Fld3 = B.Fld3 AND A.Fld4 = B.Fld4
WHERE A.date_updated < B.LatestUpdate 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-23T03:23:44.270

既然您有一个选择要*保留*的查询，您可以创建一个删除查询来删除该查询未返回的任何内容。因此，您可以像这样包装您的查询：

```
DELETE FROM Table_A
WHERE date_updated NOT IN (
  SELECT max(date_updated) 
  FROM Table_A GROUP BY Table_A.Fld2, Table_A.Fld3, Table_A.Fld4 
  HAVING count(1)> 1    
) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-04T17:31:38.920

在这里，我更新 SQL 代码以删除仅保留第一条记录的重复项。您也可以在 Access 2007 中使用此代码......

```
DELETE *
    FROM Test
    WHERE ID NOT IN (SELECT * 
                        FROM (SELECT MIN(n.ID)
                                FROM Test n
                            GROUP BY n.Projects)); 
```

**测试**是一个表名..

**Projects**是要消除重复项的字段名称

**n**是一个对象，您可以使用相同的对象或随意更改

# ios - iOS 上的 /etc/hosts

> ID：11166553
> 
> 赞同：2
> 
> 时间：2012-06-23T03:20:33.340
> 
> 标签：ios, unix, networking, hosts

如何`/etc/hosts`在我的 iOS 设备上进行编辑？我只是`sudo nano /etc/hosts`在 OS X 上做。也许写一个小应用程序来做这件事是最好的方法。

请注意，我只想在我的 iOS 设备上编辑它。我不打算为应用商店中的应用编辑它。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-23T03:25:18.323

您无法在应用程序的沙箱之外编辑任何文件（无需越狱）。有关查看应用程序沙箱中文件的更多信息，请参阅此问题（[是否可以在不越狱的情况下访问 iPhone/iPad 应用程序文件？](https://stackoverflow.com/questions/11114502/is-it-possible-to-access-iphone-ipad-app-files-without-jailbreak)）。如果你越狱你的 iPhone，你可以通过多种方式访问​​ /etc/hosts：

*   下载 iFile 并导航到该目录
*   下载 OpenSSH 并从您的计算机编辑 /etc/hosts 的内容
*   下载 MobileTerminal，就像在 OS X 上一样，使用`cd`命令导航到 /etc/hosts

我刚刚找到了一种**无需**越狱即可访问您的文件的方法，但我还没有尝试过。有一个名为 iFunbox 的应用程序声称允许用户访问 iPhone 的根文件系统而无需越狱。再一次，我没有尝试过，不知道它是否有效，但您可能想检查一下。你可以在这里下载它[http://www.i-funbox.com/](http://www.i-funbox.com/)。

希望这可以帮助！

# php - 使用定义函数销毁定义的键

> ID：11166555
> 
> 赞同：4
> 
> 时间：2012-06-23T03:20:47.267
> 
> 标签：php, unset

我怎样才能销毁一个常量？我尝试了 unset( KEY )，但不起作用。

```
<?php
define('KEY', 'value');
echo KEY; //output value
unset( KEY ); //no work
?> 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-23T03:24:29.977

创建的常量`define()`一旦创建就不能取消定义。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-23T03:27:05.170

最接近取消设置常量的是使用 RunKit 扩展。见[http://php.net/manual/en/function.runkit-constant-remove.php](http://php.net/manual/en/function.runkit-constant-remove.php)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-23T07:19:53.950

这是不可能的。如果您可以取消设置一个常数，那么它就不会非常恒定！

如果你真的需要删除这个常量，你可能需要使用一个变量。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-23T03:25:13.120

您不能在运行时销毁常量或更改其值。

您最好的选择是使用变量。

```
$key = "value";

echo $key;

unset($key); 
```

更何况; 如果可以，那将是非常糟糕的做法：P

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-01-15T17:39:11.650

您不能在 PHP 中销毁或取消设置常量，并且它的值不能随 de Script 更改。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2018-11-29T11:39:53.803

利用

```
runkit_constant_remove ( 'KEY' ); 
```

[http://php.net/manual/es/function.runkit-constant-remove.php](http://php.net/manual/es/function.runkit-constant-remove.php)

# c# - 使用窗口窗体大小自动调整directx控件的大小？

> ID：11166557
> 
> 赞同：2
> 
> 时间：2012-06-23T03:20:57.187
> 
> 标签：c#, winforms

我正在制作的这个应用程序可能会部署在具有不同屏幕尺寸的机器上。虽然我将表单默认设置为最大化，但directx 控件的大小（我也希望最大化）目前需要在不理想的代码中手动完成。我想知道是否有一种简单的方法可以让它根据表单窗口的大小自动调整大小。

winform 是 mazimised：

```
this.WindowState = FormWindowState.Maximized; 
```

和directx控制窗口：

```
this.ClientSize = new System.Drawing.Size(1200, 1200); 
```

我认为这样的事情会起作用，但它没有（这些属性甚至不可用）：

```
this.ClientSize = new System.Drawing.Size(Form.Height, Form.Width); 
```

对不起，我还是很新！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-26T19:32:16.757

在 Form 的 resize 事件中，您必须调用 Directx 设备的 reset 方法，将新的演示参数放入其中。此外，您应该使用 XNA over Managed Directx。

# php - PHP- Zend Framework- 在 CentOS 服务器上从另一个动作的视图调用动作

> ID：11166565
> 
> 赞同：1
> 
> 时间：2012-06-23T03:22:46.000
> 
> 标签：php, zend-framework, action, centos, call

我在 CentOS 上部署我的 PHP 项目并使用 Zend 框架。

**我有问题**：

当我从另一个动作的视图中调用一个动作时，它在 Windows Server 上显示得很好，但在 CentOS Server 上显示得不好。查看源代码 html 时，它不会在 head 标签中加载信息。

**示例**：

在文件中：*index.phtml*（用于产品控制器中的索引操作）

```
<div class="left">
     <?php echo $this->action('left', $this->controller,'product',array('currentModule'=>$this->module)); ?>
</div>
<div class='right'>
    <?php echo $this->action('list', $this->controller, 'product',array('currentModule'=>$this->module,'back'=> $this->back,'page'=> $this->page)); ?>
</div> 
```

所以，我们可以看到。在 index.phtml 中，我调用了 2 另一个动作（*产品控制器中的左动作和列表动作*）。*Windows 可以，但在 CentOS 上，此代码不起作用。*

**请帮助我让它在 CentOS 上运行。**

当我尝试删除 2 这个动作时：

```
<div class="left">
     //code 
  </div>
    <div class='right'>
       //code 
    </div> 
```

所以，它在 CentOS 上醒来 :)

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-23T15:37:09.410

当您遇到区分大小写的问题时，Windows 迁移到基于 unix 的系统通常会遇到这样的问题——windows 不需要大小写正确，但 unix 需要。确保您的文件夹和 php 文件名的大小写正确，然后再试一次 - 如果没有给我们一些您遇到的错误，我们可以提供更多帮助！

顺便说一句，这里有点离题，但动作视图助手效率不高，我建议改为查看自定义视图助手和渲染视图助手。

# sql - 复制 SQL 条目数百万次以进行扩展测试

> ID：11166566
> 
> 赞同：2
> 
> 时间：2012-06-23T03:23:07.957
> 
> 标签：sql

对于我们更关键的项目之一，我们需要通过一些具有极大数据库的测试集来运行我们的应用程序。我们正常的最大平均数约为 100,000 个条目，但我们希望针对大约 18-24,000,000 个条目进行测试。

现在我可以深入了解它的细节，但我认为我最好从高层次问：将数据复制到这种规模的最佳方法是什么？最好采用一个小集合（3 个条目）并将其复制到 18,000,000，还是应该采用具有 100,000 条记录的现有数据库并减少复制次数？

确实需要进行一些数据编辑，因为每个条目需要在一列中具有唯一的 GUID，而在另一列中具有友好名称。

我有一个从前同事的档案中清理的存储过程，它记录并在两个唯一列的末尾添加一个增量编号，然后关闭并再次运行。达到 6,000,000 需要大约 4 个小时，我认为大约是 14GB。我们只将它用于多达 100,000 条记录，但它做得相当好。

但是对于这种大小，它似乎被锁定（SQL Management Studio 崩溃），运行速度非常慢，或者什么都不做，但仍然像它一样（没有 CPU 活动）。并且日志文件变得很大，例如 14GB 的数据库文件需要 20GB。

这是现在的存储过程：

```
USE [DBNAME]
GO
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
CREATE PROCEDURE [dbo].[PERSON_Insert]
@LoopCount int,
@PersonId varchar(50)
AS 
BEGIN
DECLARE @intFlag INT ,@P_FIELD1 Varchar(50),@T_FIELD2 Varchar(10),@T_FIELD3 numeric(11,0), @T_FIELD4 numeric(11,0), @T_FIELD5 varchar(8000), @T_FIELD6 numeric(20,0)
,@TR_FIELD7 Varchar(10),@TR_FIELD8 numeric(11,0), @TR_FIELD9 numeric(11,0), @TR_FIELD10 varchar(8000), @TR_FIELD11 numeric(20,0)
    SET @intFlag = 1
select @P_FIELD1=dbo.MyRegistratonNo(@PersonId)
select @T_FIELD2=dbo.MyENGINETYPE(@PersonId,1)
select @T_FIELD3=dbo.MyTEMPLATEID(@PersonId,1)
select @T_FIELD4=dbo.MyTEMPLATETYPE(@PersonId,1)
select @T_FIELD5=dbo.MyTEMPLATEFEATURE(@PersonId,1)
select @T_FIELD6=dbo.MyTEMPLATESIZE(@PersonId,1)
select @TR_FIELD7=dbo.MyENGINETYPE(@PersonId,2)
select @TR_FIELD8=dbo.MyTEMPLATEID(@PersonId,2)
select @TR_FIELD9=dbo.MyTEMPLATETYPE(@PersonId,2)
select @TR_FIELD10=dbo.MyTEMPLATEFEATURE(@PersonId,2)
select @TR_FIELD11=dbo.MyTEMPLATESIZE(@PersonId,2)
WHILE (@intFlag <=@LoopCount)
BEGIN
INSERT INTO [PERSON]
([PERSONID],[REGISTRATIONNO] , [TYPEID] , [REGISTEREDDATE] , [STATUS])
VALUES(@PersonId+CAST(@intFlag AS varchar(50)),@P_FIELD1+CAST(@intFlag AS varchar(50)),1,GETDATE(),1)
INSERT INTO [TEMPLATES]
([PERSONID],[ENGINETYPE] , [TEMPLATEID] , [TEMPLATETYPE] , [TEMPLATEFEATURE] , [TEMPLATESIZE])
VALUES(@PersonId+CAST(@intFlag AS varchar(50)),@T_FIELD2,@T_FIELD3,@T_FIELD4,@T_FIELD5,@T_FIELD6)
INSERT INTO [TEMPLATES]
([PERSONID],[ENGINETYPE] , [TEMPLATEID] , [TEMPLATETYPE] , [TEMPLATEFEATURE] , [TEMPLATESIZE])
VALUES(@PersonId+CAST(@intFlag AS varchar(50)),@TR_FIELD7,@TR_FIELD8,@TR_FIELD9,@TR_FIELD10,@TR_FIELD11)
PRINT @P_FIELD1 +CAST(@intFlag AS varchar(50))
SET @intFlag = @intFlag + 1
END
END 
```

还有一些标量函数，其中使用了六个并且都遵循相同的格式：

```
USE [DBNAME]
GO
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
CREATE FUNCTION [dbo].[MyENGINETYPE]
(@PersonID varchar(50),@TemplateID numeric(11,0))
RETURNS varchar(10)
AS
BEGIN
DECLARE @Return varchar(10)
SELECT @Return = (SELECT ENGINETYPE FROM TEMPLATES WHERE PERSONID=@PersonID AND TEMPLATEID=@TemplateID)
RETURN @Return
END 
```

请记住，我是一个轻量级的脚本编写者/webdev，不是真正的 dba 或擅长这样的企业级数据。话虽这么说，这至少是一种体面的方式，还是我用笨重的东西谋杀了这个服务器？我们只有 SQL Server 2012，没有第三方工具或它附带的任何东西，我们希望保持这种状态。

任何例子都会很棒，提前谢谢！！！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-25T21:01:16.623

这可能会给你一些想法。

`SET NOCOUNT ON`停止“插入的 1 行”消息很重要。

在插入之前禁用/删除索引也可能值得一看 - 可能会加快速度。

```
CREATE TABLE Person
(
    PersonId UNIQUEIDENTIFIER DEFAULT NEWID() PRIMARY KEY,
    Blah1 VARCHAR(50) DEFAULT REPLICATE('X', 50)
)
GO

SET NOCOUNT ON
GO

DECLARE @i INT
SET @i = 1

WHILE (@i <= 1000000)
BEGIN
   INSERT INTO Person DEFAULT VALUES 
   SET @i = @i + 1
END 
```

另一种选择是创建一个平面文件，并使用批量插入。创建平面文件可能需要一些努力，但应该是一次性的 - 除非您需要更改数据。

# xaml - Win8 RC 中 WinRT ControlTemplate 的变化

> ID：11166571
> 
> 赞同：0
> 
> 时间：2012-06-23T03:23:46.710
> 
> 标签：xaml, windows-8, windows-runtime

我有以下模板，它基本上根据按钮的按下状态改变了按钮边框的颜色：

```
 <ControlTemplate x:Name="SkillIconTemplate" TargetType="Button">
        <Border CornerRadius="10" BorderThickness="2" Margin="5" Background="{TemplateBinding Background}">
            <VisualStateManager.VisualStateGroups>
                <VisualStateGroup x:Name="CommonStates">
                    <VisualStateGroup.Transitions>
                        <VisualTransition To="MouseOver" GeneratedDuration="0:0:0.05"/>
                        <VisualTransition To="Pressed" GeneratedDuration="0:0:0.05"/>
                    </VisualStateGroup.Transitions>
                    <VisualState x:Name="Normal" />
                    <VisualState x:Name="MouseOver">
                        <Storyboard>
                            <ColorAnimation Storyboard.TargetName="BorderBrush" 
                                                    Storyboard.TargetProperty="Color" 
                                                    To="Yellow" />
                        </Storyboard>
                    </VisualState>
                    <VisualState x:Name="Pressed">
                        <Storyboard>
                            <ColorAnimation Storyboard.TargetName="BorderBrush" 
                                                    Storyboard.TargetProperty="Color"
                                                    To="Black"/>
                        </Storyboard>
                    </VisualState>
                </VisualStateGroup>
            </VisualStateManager.VisualStateGroups>
            <Border.BorderBrush>
                <SolidColorBrush x:Name="BorderBrush" Color="White"/>
            </Border.BorderBrush>
        </Border>
    </ControlTemplate> 
```

现在，它似乎在 Win8 RC 中不起作用。在 Consumer Preview 中，它执行了以下操作：

```
Normal State: White
Hovered State: Yellow
Pressed State: Black 
```

现在它做到了：

```
Normal State: White
Hovered State (Before Pressed): White
Hovered State (After Pressed): Black
Pressed State: Black 
```

任何想法为什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-23T06:44:54.740

定义的视觉状态集已更改，请使用 PointerOver 而不是 MouseOver。此处列出了来自消费者预览版的大部分更改[http://go.microsoft.com/fwlink/?LinkId=251943](http://go.microsoft.com/fwlink/?LinkId=251943)

# c - 文本被重写 1000 次？

> ID：11166575
> 
> 赞同：0
> 
> 时间：2012-06-23T03:24:38.400
> 
> 标签：c, random

嗨，我是 c 新手，我制作了一个随机数应用程序，如下所示：

```
#import "stdio.h"
#import "stdlib.h"
#import "time.h"
int main (int argc, char *argv[]){
    unsigned int iseed = (unsigned int)time(NULL);
    srand (iseed);
    int Ran;
    int N;
    int max;
    int min;
    int dec;
    int dec1;
    printf("Enter Max Value: \n");
    scanf ("%i",&max);
    printf("Enter Min Value: \n");
    scanf ("%i",&min);
    Ran=rand ();
    N=(Ran % (max+1-min))+min;
    //this is a decoration
    for(i=1;i<1000;i++){
        dec=rand ();
        dec1=(dec % (max+1-min))+min;
        printf("Random Number is %d\r",dec1);
        sleep(10)
     }
    printf ("Random Number is %d",N);
    getchar(); 
```

它要求您输入最大值和最小值，然后显示“随机数为 %%”，并且 %% 部分每 10 毫秒更改一次。问题是“随机数是”也因为\r而每次都被重写。虽然它可能对人们来说太快了，但我仍然知道它在那里，我不喜欢它。我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-23T04:16:02.330

[在大多数终端上，您可以使用ANSI 控制序列](http://www.termsys.demon.co.uk/vtansi.htm)将光标移动到屏幕上的任何位置。

为了只重写数字部分，您需要做的是将光标向后移动足够远，以便它只覆盖下一个循环中的数字部分。

例如，从上面的文档中，将光标向后移动 COUNT 个字符的 ANSI 代码是：

> 光标向后：`<ESC>[{COUNT}D`
> 
> 将光标向后移动 COUNT 列；默认计数为 1。

所以你会做这样的事情：

```
// Pseudocode..
printf("The random number is: ");
for (...) {
   printf("%5d", dec1); // Print a 5 field wide number
   printf("\e[5D");     // Move cursor back 5 steps
   ...
} 
```

但是，您不必担心每次都重新打印该行。这样做的机制，以便您只重新打印数字只会不必要地使您的代码复杂化。您必须查看奖励和复杂性与努力。现代计算机打印文本的速度比您需要担心的要快得多。

此外，如果您只打印数字，那么如果用户在您的程序运行时碰巧在终端中键入，整个序列将会变得混乱，并且它会开始在屏幕上看起来很奇怪。通过重新打印来自用户（或可能来自其他地方）的整行虚假垃圾字符不会弄乱输出，因为它只会在下一个循环中重新生成所有内容。

所以是的，你可以只用数字来做，但它会变得混乱，我认为在这种情况下它是不值得的。我实际上更喜欢重印整行。

但是，如果您正在构建更复杂的东西，您希望对屏幕和光标进行大量控制，那么您可以查看诸如[curses 编程库](http://en.wikipedia.org/wiki/Curses_(programming_library))之类的东西，它将允许“全屏”控制光标和您的输出。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-23T03:30:22.720

如果问题是一遍又一遍地打印出“随机数是”，为什么不直接执行 printf("%d\r",dec1);

这将在最后一个之后打印每个新数字。当然，除非您做一些真正花哨的事情，否则您将无法覆盖您已经编写的终端输出。

# css - CSS3 过渡：是否有不使用 JQuery 的点击选项？

> ID：11166580
> 
> 赞同：13
> 
> 时间：2012-06-23T03:25:05.413
> 
> 标签：css, click, hover, transitions

这很好用：

```
<style type="text/css"> 
    div
    {
    width:100px;
    height:100px;
    background:red;
    transition:width 2s;
    -moz-transition:width 2s; /* Firefox 4 */
    -webkit-transition:width 2s; /* Safari and Chrome */
    -o-transition:width 2s; /* Opera */
    }

    div:hover
    {
    width:300px;
    }
    </style> 
```

但是有谁知道使用点击而不是悬停来做到这一点的方法？不涉及JQuery？

谢谢！

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-06-23T05:59:25.950

你可以这样写：

**CSS**

```
input{display:none}
.ani
    {
    width:100px;
    height:100px;
    background:red;
    transition:width 2s;
    -moz-transition:width 2s; /* Firefox 4 */
    -webkit-transition:width 2s; /* Safari and Chrome */
    -o-transition:width 2s; /* Opera */
    display:block;
    }
input:checked + .ani{width:300px;} 
```

**HTML**

```
<input type="checkbox" id="button">
<label class="ani" for="button"></label> 
```

检查这个[http://jsfiddle.net/nMNJE/](http://jsfiddle.net/nMNJE/)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-23T03:33:16.030

您有两种选择，一种使用 javascript，另一种使用 CSS 伪类“活动”。旧浏览器将支持 javascript 方法，这是我推荐的方法。但是，要使用 CSS 方法，只需将 div:hover 更改为 div:active。

Javascript：

```
<script type="text/javascript">
function expand(){
    document.getElementById('id').style.width="300px";
}
</script> 
```

CSS：

```
<style type="text/css"> 
div#id
{
width:100px;
height:100px;
background:red;
transition:width 2s;
-moz-transition:width 2s; /* Firefox 4 */
-webkit-transition:width 2s; /* Safari and Chrome */
-o-transition:width 2s; /* Opera */
}
</style> 
```

HTML：

```
<div id="id" onClick="expand()">
    Div Content...
</div> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-08-31T11:29:48.653

实际上有一个不使用 javascript 的点击选择器。**您可以使用:target**伪类来影响不同的 DOM 元素。如果一个元素是锚目标的目的地，它将获得**:target**伪元素（为了影响被点击的元素，只需将 ID 设置为与其锚标签相同）。

```
<style>
a { color:black; }
a:target { color:red; }
</style>

<a id="elem" href="#elem">Click me</a> 
```

这是一个可以玩的小提琴： [https ://jsfiddle.net/k86b81jv/](https://jsfiddle.net/k86b81jv/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-23T04:09:49.987

没有使用 sass 就没有 css 选择器，所以使用 jquery 可能是你最好的选择

```
$(document).ready(function(){
$('#DIV_ID').click(function(){
$(this).animate({width:'300px'},200);
});
}); 
```

（（（不要忘记在标题中包含插件链接！！））

```
<script src="http://code.jquery.com/jquery-1.7.2.min.js"></script> 
```

# php - ZendFramework 2.0.0beta4 服务管理器配置——子键的区别

> ID：11166583
> 
> 赞同：2
> 
> 时间：2012-06-23T03:25:31.327
> 
> 标签：php, zend-framework2, zend-db, servicemanager

**编辑：**在我发布这个问题几周后，Evan Coury 写了一篇关于 ZF2 ServiceManager 主题的优秀博客文章，这是我找到问题的最佳答案的地方：[http ://blog.evan.pro/introduction-to -the-zend-framework-2-servicemanager](http://blog.evan.pro/introduction-to-the-zend-framework-2-servicemanager)

--

我正在使用 ZendFramework 2.0.0beta4 开发一个项目，并且在使用 Zend\ServiceManager 处理依赖项时遇到了麻烦。这是当前的[ZF2 ServiceManager 文档](http://packages.zendframework.com/docs/latest/manual/en/zend.service-manager.quick-start.html)

它列出了在使用 ServiceManager 注册类以在我们的模块中使用时使用的 6 个子键：**abstract_factories**、**aliases**、**factory**、**invokables**、**services**和**shared**。如果我只想注册一个模型类，我将在控制器中使用它从数据库中提取数据，那么哪个最好？我特别尝试将下面显示的[ZF2 Skeleton Application](https://github.com/zendframework/ZendSkeletonApplication/)中的示例改编为我自己的应用程序（DashboardTable 是一个模型），并且此示例使用**工厂**方式。

```
public function getServiceConfiguration()
{
    return array(
        'factories' => array(
            'album-table' => function($sm) {
                $dbAdapter = $sm->get('db-adapter');
                $table = new DashboardTable($dbAdapter);
                return $table;
            },
            'test-model' => Dashboard\Model\TestModel(),
        ),
    );
} 
```

但是，我不知道“db-adapter”是如何在来自 SkeletonApplication 的单独工作示例中进入 ServiceManager ($sm) - 它与自动加载的 global.php 配置文件中的一个条目有关db' 包含数据库信息的条目。因为我不确切知道如何从配置文件到 ServiceManager，所以我在下面创建了一个简单的条目，以将问题减少到它的基本组件 - “test-model”。当我注释掉“仪表板表”条目并从控制器中的 TestModel 调用一个函数时，它只输出一些文本。下面是我的 Module.php 中的 ServiceManager 配置

```
<?php

namespace Dashboard\Model;

class TestModel {

public function testMethod()
{
    $testResult = "Hello";
    return $testResult;
}

} 
```

然后从我的控制器传递到视图：

```
<?php

namespace Dashboard\Controller;

use Zend\Mvc\Controller\ActionController;
use Zend\View\Model\ViewModel;
use Dashboard\Model\AlbumTable;
use Dashboard\Model\TestModel;
use Dashboard\Model\Dashboard;

class DashboardController extends ActionController
{
    public function indexAction()
    {   
        return new ViewModel(array(
            'users' => $this->getTestModel()->testMethod(),
        ));
    }

    public function getAlbumTable()
    {
        if (!$this->albumTable) {
            $sm = $this->getServiceLocator();
            $this->albumTable = $sm->get('album-table');
        }
        return $this->albumTable;
    }

    public function getTestModel()
    {
        if (!$this->testModel) {
            $sm = $this->getServiceLocator();
            $this->testModel = $sm->get('test-model');
        }
        return $this->testModel;
    }

} 
```

这段代码给了我一个完全空白的页面，没有错误。当我从 Module.php 中注释掉 ServiceManager 配置并只渲染一个新的 ViewModel 而没有在我的 DashboardController.php 文件中传递任何参数时，页面会正常渲染 - 加载 layout.phtml 和 index.phtml。

我相信我误解了如何使用 ServiceManager 或可能的 ZF2 的基本部分，并且非常感谢任何人可以提供的任何见解。这也是我在 StackOverflow 上的第一个问题，所以我欢迎任何关于格式化我的问题的建议。谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-24T07:57:09.893

从服务经理那里获得工厂有两个不错的选择。一种是创建工厂类，这在 Zend 框架代码本身中发生的大部分时间。第二个是使用闭包，就像你正在做的那样。

确保您不键入以下内容：

```
'test-model' => Dashboard\Model\TestModel(), 
```

但是像你的第一个这样的真正的闭包就是一个很好的例子。其次，当您尝试获取无法实例化的服务时，服务管理器总是会给出异常。请注意，此异常不包括消息原因：可能找不到类或在实例化期间引发异常（例如，因为服务管理器无法实例化您尝试获取的服务的依赖项）。

最后一点是您不需要`use`在您尝试*获取*的位置使用语句导入 FQCN（完全限定的类名） 。但是当您尝试*实例化*时需要导入 FQCN 。

所以这有效：

```
<?php

class MyClass
{
  protected $sm;

  public function setServiceManager($sm)
  {
    $this->sm = $sm;
  }

  public function doSomething()
  {
    $this->sm->get('some-special-key');
  }
} 
```

这也是：

```
<?php

use Foo\Bar\Baz;

$serviceConfig = array(
  'factories' => array(
    'some-special-key' => function($sm) {
      return new Baz;
    }
  ),
); 
```

但这不是（如果您尝试获得 a `Foo\Bar\Baz`）：

```
<?php

$serviceConfig = array(
  'factories' => array(
    'some-special-key' => function($sm) {
      return new Baz;
    }
  ),
); 
```

您可能想查看我的[SlmCmfKernel](https://github.com/juriansluiman/SlmCmfKernel)存储库。在我的[Module.php 中](https://github.com/juriansluiman/SlmCmfKernel/blob/master/Module.php#L30)，我包含了一个服务配置文件，它被放在一个[单独的位置](https://github.com/juriansluiman/SlmCmfKernel/blob/master/config/services.config.php)。在[代码的另一部分，](https://github.com/juriansluiman/SlmCmfKernel/blob/master/Module.php#L48)我从经理那里得到了服务。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-21T01:14:11.380

只是为了澄清：

```
public function getServiceConfiguration()
{
    return array(
        'factories' => array(
            'test-model' => function($sm){
                return new Model\TestModel;
            },
        ),
    );
} 
```

也可以写成可调用的：

```
public function getServiceConfiguration()
{
    return array(
        'invokables' => array(
            'test-model' => 'Model\TestModel',
        ),
    );
} 
```

在这种情况下，您可能需要考虑在配置文件而不是 Module.php 中定义它，因为您可以利用配置缓存，因为它只是一个标量数组。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-23T21:33:27.753

我最终通过更多调试找到了我自己问题的答案（我以前没有 ini_set('display_errors', '1'); set - 傻我）。

将类添加到 ZF2 ServiceManager（在您的 Module.php 中）的正确语法似乎是：

```
public function getServiceConfiguration()
{
    return array(
        'factories' => array(
            'album-table' => function($sm) {
                $dbAdapter = $sm->get('db-adapter');
                $table = new AlbumTable($dbAdapter);
                return $table;
            },
            'test-model' => function($sm){
                return new Model\TestModel;
            },
        ),
    );
} 
```

为了完整起见，为了从您包含的类中调用方法，只要您扩展 ActionController 类，您就可以在控制器文件（在我的情况下为 DashboardController.php）中使用它：

```
class DashboardController extends ActionController
{
    public function indexAction()
    {   
        return new ViewModel(array(
            'users' => $this->getTestModel()->testMethod(),
        ));
    }

    public function getTestModel()
    {
        if (!$this->testModel) {
            $sm = $this->getServiceLocator();
            $this->testModel = $sm->get('test-model');
        }
        return $this->testModel;
    }

} 
```

其中 testMethod() 是 TestModel 类中的一个方法。对于 Zend 或命名空间的新手来说，这里有一些注意事项 - 我的一个问题是，当我将文件顶部的命名空间设置为 Dashboard 时，我使用的是完整的类名引用 (Dashboard\Model\TestModel)，所以第一个 Dashboard 是不必要的，并导致 PHP 查找 Dashboard\Dashboard\Model\TestModel。此外，在撰写本文时，ZF2 模块示例很少——我建议查看 EvanDotPro 的 ZfcUser 之类的示例，以获取有关此类事物的示例。

我最初对用于向 ServiceManager 添加类的各种子键的困惑仍然存在，因此，如果您对此有任何见解，我将继续监视这个问题，并将您的答案标记为“该”答案，如果您解决了那一点， 谢谢你 ：）。

# java - 如何在java中实现与观察者模式相反的？

> ID：11166587
> 
> 赞同：1
> 
> 时间：2012-06-23T03:26:03.213
> 
> 标签：java, design-patterns, observer-pattern

在观察者模式中，观察者通常通过调用每个方法来通知侦听器，例如：

```
OnSomethingUpdated(Object) {
.... 
```

在这种情况下，我们有耦合：观察者应该对每个监听者做一些操作。当我想通过继承修改观察者或监听器或尝试提取抽象超类以简化观察者（或监听器）的逻辑时，它很难传播消息，我收到意大利面条代码。我认为应该存在某种方式将 Observer 的工作业务逻辑与将消息传播到侦听器的逻辑解耦。相反可能更好——听众应该检查一些消息池。是否存在类似的模式？谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-23T10:07:50.953

监听器实际上应该是一个接口：

```
interface MyListener {
  void onSomethingUpdated(Object eventData);
} 
```

通过这种方式，主体与观察者的具体实例分离；它应该保留这些接口引用的列表。

在[此处](http://www.artima.com/designtechniques/eventgen.html)查看如何在 Java 中实现此模式。

现在，为了进一步将主题与消息传播分离，我建议您看一下[中介](http://en.wikipedia.org/wiki/Mediator_pattern)者模式。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-23T03:55:09.713

You're probably not going to like this answer very much, but I'll say it anyway: **inheritance is not for code reuse.** The observer pattern should not lead to tight coupling -- it should lead to decoupling! So if you're ending up with spaghetti code around your observers/listeners when you're extracting abstract base classes or subclassing, it's because you **shouldn't be using inheritance.**

There, I said it.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-23T03:43:19.720

在[*观察者模式*](http://en.wikipedia.org/wiki/Observer_pattern)中，an向主题`Observer` *注册*`Observable`。的`onSomethingUpdated()`方法由`Observer`调用`Observable`，它通知所有松散耦合的侦听器。[这里](https://stackoverflow.com/a/3072979/230513)有一个相关的例子。

[![观察者模式](../Images/5cf4aed87362293ef00733fbb462d8a2.png)](http://en.wikipedia.org/wiki/Observer_pattern)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-23T03:34:54.357

您可以在两者之间添加一个[业务代表](http://java.sun.com/blueprints/corej2eepatterns/Patterns/BusinessDelegate.html)或一个简单的外观。

因此，观察者只会收到通知，然后将实现委托给包含业务逻辑的实际对象。这样您就可以随意更改您的业务逻辑类。

# c - 使用回溯的 N 个皇后

> ID：11166593
> 
> 赞同：1
> 
> 时间：2012-06-23T03:27:04.950
> 
> 标签：c, backtracking, n-queens

我已经通过使用回溯实现了 N 个皇后问题的解决方案。我正在检查每个皇后的位置是否安全，方法是检查它的左上角、右上角和顶部，然后将其放在行中，否则我会回溯。

它为 N 的某些值（例如 4 和 8）提供了正确的解决方案，但对于其他值（例如 6）则不正确。

我不知道我错过了什么。任何帮助将不胜感激。

这是代码：

```
int S;
static int cnt=0;

int safepos(int board[][S+1],int i,int j)
{
    if(i==1)        
    return 1;

    int a,b;
    a=i-1;
    b=j-1;

    //checking for top-left side
    while(a>0 && b>0 )
    {
        if(board[a--][b--]==1)
        return 0;
    }

    a=i-1;
    b=j+1;
    //checking for top-right side    
    while(a>0 && b<=S )
    {
        if(board[a--][b++]==1)
        return 0;
    }

    //checking for the same column        
    for(a=1;a<i;a++)
        if(board[a][j]==1)
            return 0;
    return 1;
}

void Nqueens(int board[][S+1],int N,int n)  //n is the number of the rows
{
    if(n==N+1) //for those which reaches the last position we will have a solution
    {
        cnt++;
        return;    
    }
    int i;    
    for(i=1;i<=N;i++)  //for every column
    {
        if( safepos(board,n,i) )
        {
            board[n][i]=1;    
            Nqueens(board,N,n+1);  //checking for next row
        }
        board[n][i]=0;
    }
}

int main()
{
    int N=6;
    S=N;
    int board[N+1][N+1];    
    Nqueens(board,N,1);
    printf("%d",cnt);
    return 0;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-27T02:08:17.200

您对回溯想法的实现是正确的，问题在于必须手动将数组“板”的值初始化为零，默认情况下数组带有未定义的值。如果你这样做，你应该得到正确的答案，我测试了代码。有关数组初始化的更多信息，请参阅[http://www.fredosaurus.com/notes-cpp/arrayptr/array-initialization.html](http://www.fredosaurus.com/notes-cpp/arrayptr/array-initialization.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-10-25T23:38:20.137

我知道这有一个公认的答案，但想分享我的实现，它使用初始化为 -1 而不是零的向量，以免干扰行 = 0 的零偏移

```
#include <iostream>
#include <vector>

const int GRID_SIZE = 8;

bool isValid ( int queenNum, int col, std::vector<int>& cols )
{
  // check for other queen number that collide with this one
  for ( int queenRow = 0; queenRow < queenNum; ++queenRow )
  {
    int queenCol = cols[queenRow];

    if ( col == queenCol )  
      return false; // same col

    if ((queenNum - queenRow) == abs( queenCol-col))
      return false; // same diagonal
  }
  return true;
}

void solve( int queenNum, std::vector<int>& cols,  std::vector<std::vector<int> >& results  )
{
  if ( queenNum == GRID_SIZE) 
  {
    // we have a solution 
    results.push_back (cols);
  }

  for ( int i = 0; i < GRID_SIZE; ++ i)
  {
    if ( isValid(queenNum,i,cols) )
    {
      cols[queenNum] = i;
      solve(queenNum + 1,cols, results);
    }
  }
}

void drawLine() {
  std::string line;
  for (int i=0;i<GRID_SIZE*2+1;i++)
    line.append("-");
  std::cout << line << std::endl;
}

void printBoard(std::vector<int>& cols) 
{
  drawLine();
  for(int i = 0; i < GRID_SIZE; i++){
    std::cout << "|";
    for (int j = 0; j < GRID_SIZE; j++){
      if (cols[i] == j) {
        std::cout << "Q|";
      } else {
        std::cout << " |";
      }
    }
    std::cout << std::endl;
    drawLine();
  }
  std::cout << "" << std::endl;;
}

void printBoards(std::vector<std::vector<int> >&  boards) {
  for (int i = 0; i < (int)boards.size(); i++) 
  {
    printBoard(boards[i]);
  }
}

int main ()
{
  std::vector<int> cols ( GRID_SIZE, -1);
  std::vector<std::vector<int> > results;
  solve(0, cols, results );
  printBoards(results);
  std::cout << results.size() << std::endl;
  return 0;
} 
```

# r - SharePoint 中的 R

> ID：11166596
> 
> 赞同：7
> 
> 时间：2012-06-23T03:28:20.853
> 
> 标签：r, sharepoint, rexcel

在 MS SharePoint 中使用 R 功能的最佳方式是什么？如果我使用 Excel Services 在 SharePoint 中导入 Excel 工作表，RExcel 会起作用吗？还有其他选择吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2014-12-11T02:16:27.973

如果您拥有 SharePoint，则必须拥有 SQL Server 许可证，因此为什么不创建一个名为 R_DataAnalysis 的表或数据库，然后使用带有[SSRS的](http://msdn.microsoft.com/en-us/library/ms159106.aspx)[PowerPivot](https://support.office.com/en-gb/article/Power-Pivot-Add-in-a9c2c6e2-cc49-4976-a7d7-40896795d045)或[PowerView](https://support.office.com/en-gb/article/Power-View-Explore-visualize-and-present-your-data-98268d31-97e2-42aa-a52b-a68cf460472e?ui=en-US&rs=en-GB&ad=GB)来显示您的数据呢？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-23T11:43:08.620

R 很容易导出到平面文件： `write.csv(dataframe,'someFile.csv')`

这些可以轻松导入以用于 SharePoint BI 功能。

# mysql - ActiveRecord 配置用于从从 MySQL 机器读取

> ID：11166598
> 
> 赞同：3
> 
> 时间：2012-06-23T03:29:32.393
> 
> 标签：mysql, ruby-on-rails, activerecord

我有一个非常直接的 MySQL 主/从复制设置。ActiveRecord 被配置为在 database.yml 中命中主主机名。我的问题是，目前是否可以为 ActiveRecord 设置一个选项以从从属设备进行所有读取并将写入内容留给主设备？我正在使用 Ruby on Rails/ActiveRecord 3.1.3。我没有找到执行以下操作的任何选项，只有 database.yml 中的一个主机条目字段。这目前可能吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-23T03:52:31.103

是的，这是可能的，但是您需要为此使用 gem；它不是内置在 Rails 本身中的。

我目前使用[无缝数据库池](https://github.com/bdurand/seamless_database_pool)，效果很好。[章鱼](https://github.com/tchandy/octopus)是另一种选择。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-03-22T22:20:30.143

有[玛卡拉宝石](https://github.com/taskrabbit/makara)。它将所有`SELECT`语句发送到从站并将操作写入主站。

像这样添加到您的`Gemfile`：

```
gem 'makara' 
```

然后像这样配置你的 database.ml：

```
production:
  adapter: 'mysql2_makara'
  database: 'MyAppProduction'
  # any other standard AR configurations

  # add a makara subconfig
  makara:

    # the following are default values
    blacklist_duration: 5
    master_ttl: 5
    sticky: true

    # list your connections with the override values (they're merged into the top-level config)
    # be sure to provide the role if master, role is assumed to be a slave if not provided
    connections:
      - role: master
        host: master.sql.host
      - role: slave
        host: slave1.sql.host
      - role: slave
        host: slave2.sql.host 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-11-22T07:47:12.943

我们也有同样的要求。目前，这在 ActiveRecord 中是不可能的。

我们加了 2 颗宝石，章鱼和马卡拉。我写了一篇比较这两个宝石的博客：[https ://ypoonawala.wordpress.com/2015/11/15/octopus-vs-makara-read-write-adapters-for-activerecord-2/](https://ypoonawala.wordpress.com/2015/11/15/octopus-vs-makara-read-write-adapters-for-activerecord-2/)

在我看来，Makara 效果很好，弥补了 Octopus 的问题。

# javascript - Firefox - 启用 Javascript 错误报告

> ID：11166603
> 
> 赞同：5
> 
> 时间：2012-06-23T03:30:30.570
> 
> 标签：javascript, firefox

如何让 Firefox 在每个 Javascript 错误时弹出一些东西？我不想为这个基本功能使用附加组件，我不需要花哨的调试或任何东西，只是为了立即查看是否存在 Javascript 错误以及它在哪一行。

我尝试了 about:config 并将 devtools.errorconsole.enabled 设置为 true，但它仍然不会报告错误（IE 和 Opera 会）。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-23T03:34:49.507

Firefox 使用错误控制台来显示在网页上发现的错误。

要查看它，请按`ctrl`+ `shift`+ `j`。

其他浏览器（如 Microsoft Internet Explorer）已选择在默认情况下提醒发现的错误，这就是您在弹出窗口中看到它们的原因。

* * *

可以在[MDN](https://developer.mozilla.org/en/Error_Console)错误控制台页面上阅读：

> 错误控制台是大多数基于 Mozilla 的应用程序中可用的工具，用于报告应用程序 chrome 和用户打开的网页中的错误。它报告与 JavaScript 相关的错误和警告、CSS 错误和来自 chrome 代码的任意消息。在 Firefox 中，可以从工具菜单或按 Ctrl-Shift-J 打开错误控制台。

* * *

**如需立即显示 Firefox 上的错误**，任何愿意使用附加组件的人：

[控制台²](https://addons.mozilla.org/en-US/firefox/addon/console%C2%B2/)具有在发现错误时自动获得焦点的选项。

![在此处输入图像描述](../Images/b60202bcb0464bf61442060d0eec7ac3.png)

* * *

[Web Developer](https://addons.mozilla.org/en-US/firefox/addon/web-developer/)包含三个图标，一个代表`DocType`，一个代表`CSS`另一个代表`JS`错误，让您知道何时发生错误。

![在此处输入图像描述](../Images/7bba3838afaea0e9fdb5a45f8c2032f4.png)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-23T03:33:22.337

按 Ctrl-Shift-J，您将获得错误控制台。这应该是你所需要的，对吧？您可以在单独的窗口中查看每个错误及其行号。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-06-05T20:07:01.803

有一个插件可以完全满足您的要求。

请参阅[Firefox 的 JavaScript 错误通知插件](https://addons.mozilla.org/en-US/firefox/addon/javascript-errors/)

# javascript - 鼠标移动时旋转

> ID：11166609
> 
> 赞同：2
> 
> 时间：2012-06-23T03:33:09.950
> 
> 标签：javascript, jquery, css

很久以前就想学的东西，一直没搞明白。

[http://jsfiddle.net/Mobilpadde/Xt7ag/](http://jsfiddle.net/Mobilpadde/Xt7ag/)

然后你移动鼠标，它跟随，这是简单的部分，但我也想旋转，就像总是看着鼠标的方向，但不是那么静止，更像是，如果你向上移动鼠标，它应该有点首先旋转，然后将鼠标移得更远，它应该再次开始跟随（如果您知道我的意思）。

这是简单的事情，还是 3k 行？（或者也许是一个 jQuery 插件？）

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-23T03:50:51.783

嗨，我通过使用我的旧帖子更接近了它：**演示** [http://jsfiddle.net/Z3pGQ/3/](http://jsfiddle.net/Z3pGQ/3/)

我还在工作，会给你更流畅的版本*，或者*如果你能在我之前改进：

旧帖子：[根据单独元素中的光标位置旋转元素](https://stackoverflow.com/questions/9972449/rotating-an-element-based-on-cursor-position-in-a-separate-element)

希望对你有帮助，我现在正努力让它更顺畅，干杯

**示例代码**

```
$(document).ready(function() {
    $(document).mousemove(function(e) {
        $(".firefly").css({
            "top": (e.pageY * 2) + "px",
            "left": (e.pageX * 2 + 130) + "px"
        });
    })
})
var img = $(".firefly");
if (img.length > 0) {
    var offset = img.offset();

    function mouse(evt) {
        var center_x = (offset.left) + (img.width() / 2);
        var center_y = (offset.top) + (img.height() / 2);
        var mouse_x = evt.pageX;
        var mouse_y = evt.pageY;
        var radians = Math.atan2(mouse_x - center_x, mouse_y - center_y);
        var degree = (radians * (180 / Math.PI) * -1) + 90;
        img.css('-moz-transform', 'rotate(' + degree + 'deg)');
        img.css('-webkit-transform', 'rotate(' + degree + 'deg)');
        img.css('-o-transform', 'rotate(' + degree + 'deg)');
        img.css('-ms-transform', 'rotate(' + degree + 'deg)');
    }
    $(document).mousemove(mouse);
}​ 
```

**图片**

![在此处输入图像描述](../Images/e29e1e4bfab5f7d8d0c1a5f35f342e63.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-23T03:43:34.227

这将涉及比我现在想做的更多的数学运算，但是您可以轻松地使用 css 应用旋转。以下是 mozilla 和 webkit 的属性，您可以[在此页面](http://davidwalsh.name/css-transform-rotate)查看 (IE,Opera...) 的其余部分。这是应用了 120 度旋转的函数。您仍然需要计算正确的旋转，并相应地调整`left`和`top`。

```
$(document).mousemove(function(e){
                $(".firefly").css({
                    "top":(e.pageY*2)+"px",
                    "left":(e.pageX*2+130)+"px",
                    "-moz-transform": "rotate(120deg)",
                    "-webkit-transform": "rotate(120deg)"});
            }) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-02-04T15:04:49.753

[该http://pixelscommander.com/en/iphone-development/rotate-html-elements-with-mouse/](http://pixelscommander.com/en/iphone-development/rotate-html-elements-with-mouse/)有一个 jQuery 插件

# php - Wordpress PHP - 类别

> ID：11166614
> 
> 赞同：1
> 
> 时间：2012-06-23T03:34:07.407
> 
> 标签：php, wordpress

我认为我之前的问题过于复杂，老实说，让我感到困惑，更不用说那些试图回答的人了。

我目前需要页面，两个页面都分配有一类帖子，但是两个帖子页面都使用相同的 content.php 和 content-single.php，但是出于美观的原因，我是两个页面都使用这些页面的不同迭代。

例如，访问[http://dev.n8geeks.com/blog/](http://dev.n8geeks.com/blog/)并单击第一篇博客文章。它显示一个缩略图，这很酷，是我想要的。但是，现在在此处看到的“视频”页面上；[http://dev.n8geeks.com/videos/](http://dev.n8geeks.com/videos/)（在那里，点击帖子）它还显示缩略图框（但此帖子页面类别上不会附加缩略图）。

这就是为什么我需要使用 content.php 和 content-single.php 的不同迭代，但我根本不知道怎么做。如果“视频”页面的格式与“博客”页面的格式相同，那就太好了，但同样，我不知道如何实现这一点。

我用于当前“视频”页面的代码如下。

```
<?php get_header(); ?>

<div id="content">
<div id="main">

<?php if ( have_posts() ) : while ( have_posts() ) : the_post(); ?>
<?php the_content(); ?>
<?php endwhile; else: endif; ?>

<?php query_posts('category_name='.get_the_title().'&post_status=publish,future');?>
<?php if ( have_posts() ) : while ( have_posts() ) : the_post(); ?>
<h1 class="entry-title"><a href="<?php the_permalink(); ?>">
<?php the_title();  ?></a></h1>
<p><?php the_content(); ?>
<?php endwhile; else: endif; ?>

</div>
</div>

<?php get_footer(); ?> 
```

在此先感谢您，我真的很感谢您不会相信的任何帮助-现在是凌晨 4 点 33 分，我要疯了，试图找到解决此问题的方法。

问候

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-23T03:42:48.150

仍然非常令人困惑，哈哈，但是从它的声音来看，当您查看单个帖子时，您希望根据帖子所在的类别显示不同的模板？

如果是这样，您可以尝试将其设置为 single.php：

```
<?php get_header(); ?>

    <?php
        if ( have_posts() ) { the_post(); rewind_posts(); }
        if ( in_category(1) || in_category(2) ) {
            include(TEMPLATEPATH . '/single-cat1-2.php');
        }
        else {
            include(TEMPLATEPATH . '/single-default.php');
        }
    ?>

<?php get_footer(); ?> 
```

（来自[http://wordpress.org/support/topic/alternate-single-post-template-for-specific-categories](http://wordpress.org/support/topic/alternate-single-post-template-for-specific-categories)）

并创建文件“single-cat1-2.php”和“single-default.php”，只需添加到 if 语句中，检查帖子是否属于某个（或多个类别）并加载正确的模板。您也可以使用 ID、名称和它们的 slug 作为`in_category`函数的选择器，在[此处阅读更多信息](http://codex.wordpress.org/Function_Reference/in_category)。

编辑：凯，你确实需要学习插件编程才能真正做到这一点。我已经开始为您提供一个快速插件来帮助您。它有效，只是并不完美。您当然可以使用不同的系统，例如在类别菜单中绑定类别，但我不想使用该页面的设置 API。

所以在你的插件目录中创建一个新目录，调用它`PostCatTheme`，在那里创建一个新文件`index.php`并把它放进去：

```
<?php
/*
 * Plugin Name: Post Category Templates
 */
//Replace __FILE__ with whatever the real path is because of symbolic link

/**
 * Allows declarations of which categories a single-post template is assigned to
 */
class WordpressPostCatTheme
{
    private $pluginDir, $templates;

    function __construct ()
    {
        $this->pluginDir = dirname(__FILE__);

        add_action("init", array($this, "load"));
        add_filter('single_template', array($this, 'get_post_template'));
    }

    public function WPCT_deactivate ()
    {
        delete_option("PostCatTheme_templates");
    }

    public function load ()
    {
        register_deactivation_hook( __FILE__, array(&$this, 'WPCT_deactivate') );

        $this->templates = get_option("PostCatTheme_templates");
        if ($this->templates === FALSE)
        {
            $this->templates = $this->get_post_templates();
            update_option("PostCatTheme_templates", $this->templates);
        }
    }

    //  This function scans the template files of the active theme, 
    //  and returns an array of [category] => {file}.php]
    public function get_post_templates()
    {
        $themes = get_themes();
        $theme = get_current_theme();
        $templates = $themes[$theme]['Template Files'];
        $post_templates = array();

        $base = array(trailingslashit(get_template_directory()), trailingslashit(get_stylesheet_directory()));

        foreach ((array)$templates as $template)
        {
            $template = WP_CONTENT_DIR . str_replace(WP_CONTENT_DIR, '', $template); 
            $basename = str_replace($base, '', $template);

            // don't allow template files in subdirectories
            if (false !== strpos($basename, '/'))
                continue;

            $template_data = implode('', file( $template ));

            $categories = '';
            if (preg_match( '|Categories (.*)$|mi', $template_data, $categories))
                $categories = _cleanup_header_comment($categories[1]);

            //The categories are split by a | (pipe), if there aren't any pipes, assume it's just
            //one category, otherwise split at the pipe
            if (empty($categories))
                continue;

            if (strpos($categories, "|") === FALSE)
                $categories = array($categories);
            else
                $categories = explode("|", $categories);

            foreach ($categories as $category)
            {
                if (!empty($category))
                {
                    if (isset($post_templates[$category]))
                        throw new Exception("Error, category assigned to more than one template");

                    if(basename($template) != basename(__FILE__))
                        $post_templates[trim($category)] = $basename;
                }
            }
        }
        //file_put_contents($this->pluginDir . "/log", json_encode($post_templates));
        return $post_templates;
    }

    //  Filter the single template value, and replace it with
    //  the template chosen by the user, if they chose one.
    function get_post_template($template)
    {
        global $post;

        $cats = wp_get_post_categories($post->ID);

        //Go through each category, until one hits
        foreach ($cats as $c)
        {
            $templateP = $this->templates[$c];

            if(!empty($templateP) && file_exists(TEMPLATEPATH . "/{$templateP}"))
            { 
                $template = TEMPLATEPATH . "/{$templateP}";
                break;
            }
        }
        return $template;
    }
}

if (!isset($PostCatThemePlugin))
    $PostCatThemePlugin = new WordpressPostCatTheme;
?> 
```

之后，在您的自定义 single.php 模板中，将代码添加`Categories: 1|2`到标题部分（在哪里`Template Name`）。每当您更改或添加这些时，请确保停用并重新激活插件，以刷新存储此信息的缓存。

要获取类别的 ID，请编辑类别，在 URL 中，tag_ID= 后面的数字是类别的 ID。

希望对一些人有所帮助，
马克斯

# javascript - jQuery $.ajax 调用在某些视频中使用 YouTube API 获取 JSON 失败

> ID：11166615
> 
> 赞同：0
> 
> 时间：2012-06-23T03:34:07.700
> 
> 标签：javascript, jquery, youtube-api

除其他详细信息外，我正在尝试获取某个 YouTube 视频的给定视频的标题。因为它们可能都源于同一个问题，所以我将仅展示一个简化示例，仅使用 API 获取标题。这是我到目前为止所拥有的：

```
$.ajax({
    url: "https://gdata.youtube.com/feeds/api/videos/" + videoID + "?v=2&alt=json",
    dataType: "jsonp",
    success: function(data) {
        videoName = data.entry.title.$t;
        $('#video_name').text(videoName);
    }
}); 
```

对于某些视频，例如[这个](http://www.youtube.com/watch?v=SJMPK5DLEXk)，这非常有效。对于其他人，例如[this](http://www.youtube.com/watch?v=oSd0keSj2W8)，它永远不会获取该信息。

为什么这不起作用？第二个示例只是一个不适用于此的视频。大约 1/3 似乎不起作用。

我真的很感激对此的一些见解。

**编辑**我如何得到`videoID`：

```
var videoID = getUrlVars()["v"];
function getUrlVars() {
    var vars = {};
    var parts = window.location.href.replace(/[?&]+([^=&]+)=([^&]*)/gi, 
    function(m,key,value) {
        vars[key] = value;
    });
    return vars;
} 
```

示例视频的结尾如下：`?v=J66NOwZegc4`

**EDIT2**所以我添加了 $.ajax 函数，它似乎是导致问题的原因：

```
$.ajax({
    url: "https://gdata.youtube.com/feeds/api/videos/" + videoID + "?v=2&alt=json",
    dataType: "jsonp",
    async: "false",
    success: function(data) {
        commentCount = data.entry.gd$comments.gd$feedLink.countHint;
        iterations = Math.floor(commentCount/50);
        remaining = commentCount - (iterations*50);
        videoDesc = data.entry.title.$t;
        $('#video_name').text(videoDesc);
        document.title = 'Watching "' + videoDesc + '" on YTRT';
        $('#shareLink').val('http://www.ytrealtime.com?v=' + videoID);
    }
}); 
```

# factory-bot - Factory Girl 为什么它为每个请求创建两个记录？

> ID：11166617
> 
> 赞同：0
> 
> 时间：2012-06-23T03:34:23.190
> 
> 标签：factory-bot

使用：

```
factory_girl-2.6.4 
cucumber-1.2.1 
ruby 1.8.7 (2012-02-08 patchlevel 358) [x86_64-linux] 
Rails 3.0.15

FactoryGirl.define do

  factory :user do
    email {Factory.next(:email)}
    password 'test123'
  end

  factory :participant do

    factory :person do
      sequence(:name) {|n| Faker::Name.last_name + " #{n}" }
      sequence(:other_names) { |n| Faker::Name.first_name }
      type Participant::PERSON_TYPE
    end

    factory :organisation do
      sequence(:name) {|n| Faker::Company.name + " #{n} Pty Ltd" }
      type Participant::ORGANISATION_TYPE
      sequence(:abn) {|n| "56 122 456 78#{n}" }
    end
  end

  factory :client do
    association :participant, :factory=>:organisation #, :name=> Faker::Name.name + ' Client'
    role_type      { RoleType.where(:id => RoleType::CLIENT_ID).first }
    type            Role::CLIENT_TYPE
    sequence(:email) {|n| Faker::Internet::user_name + ".client#{n}@mailinator.com" }
    std_account { Faker::PhoneNumber.phone_number[0,20] }
    commenced_on { rand(60).days.ago }
  end 
```

在黄瓜

```
Feature: test the construction of a factories

  Background: Because factories also need to be tested

    Given a client exists                              # factory_girl-2.6.4/lib/factory_girl/step_definitions.rb:107
    And Show Roles                                     # features/step_definitions/sign_in.rb:19 
```

这会产生 2 个组织（即参与者）和 2 个客户，如下所示：

```
"-------- Roles & Organisations -------"
[#<Client id: 2, participant_id: 2, user_id: nil, role_type_id: 5, type: "Client", std_account: "(989)416-2268", email: "amani.aufderhar.client1@mailinator.com", url: nil, phone: nil, mobile: nil, fax: nil, commenced_on: "2012-05-14", expired_on: nil, created_at: "2012-06-23 03:27:43", updated_at: "2012-06-23 03:27:43", lock_version: 0>,
 #<Client id: 3, participant_id: 3, user_id: nil, role_type_id: 5, type: "Client", std_account: "301.424.0762 x123", email: "brennan.client2@mailinator.com", url: nil, phone: nil, mobile: nil, fax: nil, commenced_on: "2012-05-28", expired_on: nil, created_at: "2012-06-23 03:27:43", updated_at: "2012-06-23 03:27:43", lock_version: 0>]
[#<Organisation id: 2, name: "Lowe, Lesch and Swift 1 Pty Ltd", type: "Organisation", other_names: nil, preferred_name: nil, salutation_id: nil, abn: "56 122 456 781", expired_on: nil, created_at: "2012-06-23 03:27:42", updated_at: "2012-06-23 03:27:42", lock_version: 0>,
 #<Organisation id: 3, name: "Deckow, Strosin and Schiller 2 Pty Ltd", type: "Organisation", other_names: nil, preferred_name: nil, salutation_id: nil, abn: "56 122 456 782", expired_on: nil, created_at: "2012-06-23 03:27:43", updated_at: "2012-06-23 03:27:43", lock_version: 0>] 
```

任何人都可以为我阐明这一点 - 据我所知，每个人都应该有一个。

罗斯

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-11T05:16:01.997

将 factory_girl 更新到最新版本。问题消失了。

# perl - 从 perl 中的多个哈希和数组数据结构中取消引用数据

> ID：11166619
> 
> 赞同：0
> 
> 时间：2012-06-23T03:34:31.880
> 
> 标签：perl, perl-data-structures

尝试从以下 DoxyDocs1.pm 文件中的详细 -> 文档 -> 参数 -> 参数 -> 名称中提取数据；还包括提取一些数据的脚本示例，但在提取参数 -> 参数 -> 名称时遇到问题。取消注释评论部分以查看数据。

```
#!/bin/perl
use Data::Dumper;
use warnings;
require "DoxyDocs1.pm";
print "API Content Analyzer\n";
&GenerateClassInfo($doxydocs->{classes});
sub GenerateClassInfo()
{
    my ($classes) = @_; 
    foreach my $class (@$classes) {
    print "\nClass name is: $class->{name}\n";
    foreach my $pubmeth (@{$class->{public_methods}->{members}}) {
       print "\n" if exists $pubmeth->{name};
       print "\tpublic methods include: $pubmeth->{name}\n";
       my ($key, $pmcontent) = each (@{$pubmeth->{detailed}->{doc}});
       print "\t\tdescription: $pmcontent->{content}\n" if exists $pmcontent->{content};
       # foreach my $pmp (@{$pubmeth->{detailed}->{doc}}) {
         # print "\t\t";
         # print Dumper($pmp);
       # }
       print "\t\tkind: $pubmeth->{kind}\n";
       print "\t\ttype: $pubmeth->{type}\n" if exists $pubmeth->{type};
    }
    foreach my $privmeth (@{$class->{private_methods}->{members}}) {
        print "\n" if exists $privmeth->{name};
        print "\tprivate methods include: $privmeth->{name}\n";
        my ($key, $pmcontent) = each (@{$privmeth->{detailed}->{doc}});
        print "\t\tdescription: $pmcontent->{content}\n" if exists $pmcontent->{content};
        # foreach my $info (@{$privmeth->{detailed}->{doc}}) {
         # print "\t\t";
         # print Dumper($info);
        # }
        print "\t\tkind: $privmeth->{kind}\n";
        print "\t\ttype: $privmeth->{type}\n" if exists $privmeth->{type};
    }       
  }
} 
```

示例 DoxyDocs1.pm 文件

```
$doxydocs=
{
  classes => [
    {
     name => 'Panoply::Composite',
     public_methods => {
     members => [
      {
        kind => 'function',
        name => 'addChild',
        virtualness => 'non_virtual',
        protection => 'public',
        static => 'no',
        brief => {},
        detailed => {
          doc => [
            {
              type => 'text',
              content => 'Add a child to the container '
            },
            params => [
              {
                parameters => [
                  {
                    name => 'child'
                  }
                ],
                doc => [
                  {
                    type => 'text',
                    content => 'is the child element to add'
                  }
                ]
              }
            ]
          ]
        },
        type => 'void',
        const => 'no',
        volatile => 'no',
        parameters => [
          {
            declaration_name => 'child',
            type => 'Ptr'
          }
        ]
      },
      {
        kind => 'function',
        name => 'operator<',
        virtualness => 'non_virtual',
        protection => 'public',
        static => 'no',
        brief => {},
        detailed => {
          doc => [
            {
              type => 'text',
              content => 'Less than operator'
            },
            {
              type => 'parbreak'
            },
            params => [
              {
                parameters => [
                  {
                    name => 'rval'
                  }
                ],
                doc => [
                  {
                    type => 'text',
                    content => 'The '
                  },
                  {
                    type => 'url',
                    link => 'classPanoply_1_1Package',
                    content => 'Package'
                  },
                  {
                    type => 'text',
                    content => ' against which we are comparing this one. '
                  }
                ]
              }
            ],
            {
              return => [
                {
                  type => 'text',
                  content => 'true if this.packageID < rval.packageID, false otherwise.'
                }
              ]
            }
          ]
        },
        type => 'bool',
        const => 'yes',
        volatile => 'no',
        parameters => [
          {
            declaration_name => 'rval',
            type => 'const Composite &'
          }
        ]
      },
    ]
  },
  private_methods => {
    members => [
      {
        kind => 'function',
        name => 'addChild',
        virtualness => 'virtual',
        protection => 'private',
        static => 'no',
        brief => {},
        detailed => {
          doc => [
            {
              type => 'text',
              content => 'Add a child to the container '
            },
            params => [
              {
                parameters => [
                  {
                    name => 'child'
                  }
                ],
                doc => [
                  {
                    type => 'text',
                    content => 'is the child element to add '
                  }
                ]
              },
              {
                parameters => [
                  {
                    name => 'parent'
                  }
                ],
                doc => [
                  {
                    type => 'parbreak'
                  },
                  {
                    type => 'text',
                    content => 'is this own parent, except in weak pointer format to avoid a memory leak'
                  }
                ]
              }
            ]
          ]
        },
        type => 'virtual void',
        const => 'no',
        volatile => 'no',
        parameters => [
          {
            declaration_name => 'child',
            type => 'Ptr'
          },
          {
            declaration_name => 'parent',
            type => 'Ptr'
          }
        ]
      },
    ]
  },
    }
  ]
 };
1; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-23T04:25:42.137

你说你想要

```
detailed -> doc -> params -> parameters -> name 
```

但这缺少许多索引。哪个`doc`，你想要吗`param`？`parameters`

```
detailed -> doc -> ??? -> params -> ??? -> parameters -> ??? -> name 
```

语法是：

```
$member->{detailed}->{doc}->[$i]->{params}->[$j]->{parameters}->[$k]->{name} 
```

或简称：

```
$member->{detailed}{doc}[$i]{params}[$j]{parameters}[$k]{name} 
```

如果要遍历每个文档、参数、参数，可以使用：

```
my $docs = $member->{detailed}{doc};
for my $doc (@$docs) {
   my $params = $doc->{params};
   for my $param (@$params) {
      my $parameters = $param->{parameters};
      for my $parameter (@$parameters) {
         ...
      }
   }
} 
```

（为什么doc是单数而params和parameters是复数？？？为什么params有参数？？？）

# html - 在静态 html 的 Magento 1.6.2 中调用右块

> ID：11166624
> 
> 赞同：0
> 
> 时间：2012-06-23T03:35:54.360
> 
> 标签：html, magento, static-block

我正在 magento 中创建一个 CMS 页面，作为即将推出的产品的预告片。我正在使用带有右栏的两列，并在后端使用布局更新 XML 来调用我为右侧制作的一些自定义块。

好吧，现在我只加载占位符，然后在事后编辑 phtml。

如果我在右边使用两个块，它看起来很好..但是如果我添加更多，那么整个页脚会损坏并移动到右列。

我试图在右侧获得 3 个自定义块。

这是我的布局更新 XML

```
<reference name="right">
<block type="newsletter/subscribe" name="left.newsletter" template="newsletter/rightsubscribe.phtml"/>
<block type="core/template" name="name1" template="page/custom/custom1.phtml"/>
<block type="core/template" name="name2" template="page/custom/custom2.phtml"/>
</reference> 
```

这是我正在使用的海关区块的 HTML。

```
<div id="shop-with-confidence" class="white-box">
    <h3>Custom1</h3>
    <div class="white-box-inner">
         Testing1
    </div>

    <div id="shop-with-confidence" class="white-box">
    <h3>Custom2</h3>
    <div class="white-box-inner">
         Testing2
    </div> 
```

有谁知道为什么这会破坏我正在编辑的页面？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-24T12:05:23.110

OP 已经为自己解决了这个问题，但值得注意的是，可以轻松检查父子块关系以确定问题是否与框架或标记相关。

要检查父块具有的子块列表，只需在模板中执行以下操作：

```
Zend_Debug::dump($this->getChild()) //list of children
Zend_Debug::dump($this->getSortedChildren()) //list of ordered children 
```

在缺少模板的块（`core/text_list`例如“right”）的情况下，也可以从子块模板中执行此操作：

```
Zend_Debug::dump($this->getParentBlock()->getChild()) //list of children
Zend_Debug::dump($this->getParentBlock()->getSortedChildren()) //list of ordered children 
```

更多信息请参考[`Mage_Core_Block_Abstract`](http://svn.magentocommerce.com/source/branches/1.7/app/code/core/Mage/Core/Block/Abstract.php)。

# ruby-on-rails - github的替代品： 在宝石文件中

> ID：11166625
> 
> 赞同：1
> 
> 时间：2012-06-23T03:36:13.813
> 
> 标签：ruby-on-rails, gem, bundler

我正在尝试在我的系统中构建[docrails 。](https://github.com/lifo/docrails)当我克隆回购并`bundle install`按照指南所说的那样做时。

我收到以下错误

`You passed :github as an option for gem 'rails/active_record_deprecated_finders' , but it is invalid.`

gemfile 中的条目如下所示： `gem 'rails/active_record_deprecated_finders', github: 'rails/active_record_deprecated_finders'`

为避免我正在做的是这样评论该行的其余部分： `gem 'rails/active_record_deprecated_finders'#, github: 'rails/active_record_deprecated_finders'`

然后它放弃了这一点，下一个问题伴随着错误消息出现： `Could not find gem 'active_record_deprecated_finders (>= 0) x86-mingw32' in any of the gem sources listed in your Gemfile.`

**环境规格**：

捆绑器版本 1.0.21

导轨 3.2.3

Win7 64位

**问题**

1.  当我的系统是 64 位时，我不知道它为什么要寻找 x86。有什么解决方法吗？还是它的错误？

2.  如果 gem 文件不能接受`github:`作为参数，为什么它首先存在？

请让我知道是否有任何解决此问题的方法

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-06-23T06:37:56.163

该`:github`选项只是更长的 :git 选项的简写：

```
gem :foo, :github => 'rails/foo' 
```

只是缩写

```
gem :foo, :git => 'git://github.com/rails/foo.git' 
```

这是 bundler 1.1 中的新功能，这就是它在您的设置中不起作用的原因。您可以重写 gemfile，但更新捆绑器可能会更容易。此外，bundler 1.1 比 1.0 快很多

# c# - 如何从paypal账户获取交易信息

> ID：11166627
> 
> 赞同：0
> 
> 时间：2012-06-23T03:36:40.820
> 
> 标签：c#, .net, api, paypal

在 C# 桌面项目上工作，我在 paypal 上有一个帐户，从我的桌面应用程序想要获取我的 paypal 帐户交易信息。需要帮助从贝宝获取交易信息

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-23T04:40:37.893

你看过paypal API吗？
[https://www.x.com/developers/paypal](https://www.x.com/developers/paypal)

如果是这样，您可能需要查看“TransactionSearch”或“GetTransactionDetails”操作。

[https://www.x.com/developers/paypal/documentation-tools/api/transactionsearch-api-operation-soap](https://www.x.com/developers/paypal/documentation-tools/api/transactionsearch-api-operation-soap)
顺便说一句，他们有一个名称值对选项，以防你像我一样鄙视 SOAP :)

# mysql - MySQL 加入 + “WHERE something=MAX(something)”

> ID：11166631
> 
> 赞同：2
> 
> 时间：2012-06-23T03:38:20.813
> 
> 标签：mysql, join, left-join

我有几个需要连接的表。这些表是：

**球员**

*   名
*   姓
*   性别
*   location_id
*   *（其他不相关的列）*

和

**score_entry**

*   分数
*   约会时间
*   player_id
*   *（其他不相关的列）*

我需要根据`player_id`并且只想选择`players.location_id`最大的记录来加入他们。所以是这样的：

```
SELECT
players.first_name,
players.last_name,
players.gender,
score_entries.score,
score_entries.datetime as jump_date
players.location_id,
FROM score_entries
LEFT JOIN players
ON score_entries.player_id = players.id
WHERE gender="m"
AND location_id="***(ONLY THE HIGHEST LOCATION_ID VALUE IN THE TABLE)***" 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-23T03:56:52.613

请尝试以下查询

```
SELECT 
    players.first_name, 
    players.last_name, 
    players.gender, 
    score_entries.score, 
    score_entries.datetime as jump_date, 
    players.location_id
FROM score_entries 
LEFT JOIN players 
ON score_entries.player_id = players.id 
WHERE gender="m" 
AND players.location_id = (SELECT MAX(location_id) from players) 
```

# python - ndb 模型 appengine 的 ModelForms（djangoforms 不适合我）

> ID：11166632
> 
> 赞同：1
> 
> 时间：2012-06-23T03:38:22.660
> 
> 标签：python, django, google-app-engine, django-forms, app-engine-ndb

我正在使用 webapp2，ndb 模型。
我试图将 django 模型表单与 ndb 模型一起使用。以下是我的设置中的相关部分：

**应用程序.yaml：**

```
libraries:
- name: webapp2
  version: "2.5.1"
- name: jinja2
  version: latest
- name: markupsafe                                                              
  version: latest
- name: django
  version: 1.3 
```

**模型.py：**

```
class SubTask(ndb.Model):

    task = ndb.StructuredProperty(TaskList)
    description = ndb.TextProperty()
    start_time = ndb.DateTimeProperty()
    end_time = ndb.DateTimeProperty() 
```

**表格.py：**

```
from django.forms import ModelForm
from models import TaskList, TaskCategory, SubTask

class SubTaskForm(ModelForm):
    class Meta:
        model = SubTask 
```

**处理程序：**

```
class CreateSubTask(BaseHandler):
    def get(self):
        self.render_template('index.html', {'form':SubTaskForm})

app = webapp2.WSGIApplication([('/', IndexPage),
                               ('/subtask', CreateSubTask), ],
                              debug=True) 
```

我得到的错误是： **AttributeError: type object 'SubTask' has no attribute '_meta'**

**我的问题：**有没有办法可以将 django 模型表单与 ndb 一起使用，或者如果我犯了一个错误，那是什么？如果不是 django modelforms，ndb 模型是否适用于 WTForms？

下面附上堆栈跟踪：

```
ERROR    2012-06-23 03:25:58,770 wsgi.py:189] 
Traceback (most recent call last):
  File "/homeproject/expts/google_appengine/google/appengine/runtime/wsgi.py", line 187, in Handle
    handler = _config_handle.add_wsgi_middleware(self._LoadHandler())
  File "/homeproject/expts/google_appengine/google/appengine/runtime/wsgi.py", line 225, in _LoadHandler
    handler = __import__(path[0])
  File "/homeproject/expts/google_appengine/google/appengine/tools/dev_appserver_import_hook.py", line 676, in Decorate
    return func(self, *args, **kwargs)
  File "/homeproject/expts/google_appengine/google/appengine/tools/dev_appserver_import_hook.py", line 1858, in load_module
    return self.FindAndLoadModule(submodule, fullname, search_path)
  File "/homeproject/expts/google_appengine/google/appengine/tools/dev_appserver_import_hook.py", line 676, in Decorate
    return func(self, *args, **kwargs)
  File "/homeproject/expts/google_appengine/google/appengine/tools/dev_appserver_import_hook.py", line 1722, in FindAndLoadModule
    description)
  File "/homeproject/expts/google_appengine/google/appengine/tools/dev_appserver_import_hook.py", line 676, in Decorate
    return func(self, *args, **kwargs)
  File "/homeproject/expts/google_appengine/google/appengine/tools/dev_appserver_import_hook.py", line 1665, in LoadModuleRestricted
    description)
  File "/homeproject/expts/google_appengine/tdl/main.py", line 18, in <module>
    from views import IndexPage, CreateSubTask
  File "/homeproject/expts/google_appengine/google/appengine/tools/dev_appserver_import_hook.py", line 676, in Decorate
    return func(self, *args, **kwargs)
  File "/homeproject/expts/google_appengine/google/appengine/tools/dev_appserver_import_hook.py", line 1858, in load_module
    return self.FindAndLoadModule(submodule, fullname, search_path)
  File "/homeproject/expts/google_appengine/google/appengine/tools/dev_appserver_import_hook.py", line 676, in Decorate
    return func(self, *args, **kwargs)
  File "/homeproject/expts/google_appengine/google/appengine/tools/dev_appserver_import_hook.py", line 1722, in FindAndLoadModule
    description)
  File "/homeproject/expts/google_appengine/google/appengine/tools/dev_appserver_import_hook.py", line 676, in Decorate
    return func(self, *args, **kwargs)
  File "/homeproject/expts/google_appengine/google/appengine/tools/dev_appserver_import_hook.py", line 1665, in LoadModuleRestricted
    description)
  File "/homeproject/expts/google_appengine/tdl/views.py", line 4, in <module>
    from forms import SubTaskForm
  File "/homeproject/expts/google_appengine/google/appengine/tools/dev_appserver_import_hook.py", line 676, in Decorate
    return func(self, *args, **kwargs)
  File "/homeproject/expts/google_appengine/google/appengine/tools/dev_appserver_import_hook.py", line 1858, in load_module
    return self.FindAndLoadModule(submodule, fullname, search_path)
  File "/homeproject/expts/google_appengine/google/appengine/tools/dev_appserver_import_hook.py", line 676, in Decorate
    return func(self, *args, **kwargs)
  File "/homeproject/expts/google_appengine/google/appengine/tools/dev_appserver_import_hook.py", line 1722, in FindAndLoadModule
    description)
  File "/homeproject/expts/google_appengine/google/appengine/tools/dev_appserver_import_hook.py", line 676, in Decorate
    return func(self, *args, **kwargs)
  File "/homeproject/expts/google_appengine/google/appengine/tools/dev_appserver_import_hook.py", line 1665, in LoadModuleRestricted
    description)
  File "/homeproject/expts/google_appengine/tdl/forms.py", line 4, in <module>
    class SubTaskForm(ModelForm):
  File "/homeproject/expts/google_appengine/lib/django_1_3/django/forms/models.py", line 205, in __new__
    opts.exclude, opts.widgets, formfield_callback)
  File "/homeproject/expts/google_appengine/lib/django_1_3/django/forms/models.py", line 145, in fields_for_model
    opts = model._meta
AttributeError: type object 'SubTask' has no attribute '_meta' 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-23T15:42:57.533

请不要使用 djangoforms - Python 2.7 App Engine 运行时不支持它。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-23T09:10:12.687

除了上面的注释，如果你没有在 main.py 文件中提供设置，djangoforms 将不会呈现。除此之外，您需要添加一个中间件：

```
'google.appengine.ext.ndb.NdbDjangoMiddleware' 
```

做到以上两点就可以解决问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-23T08:38:09.527

我从来没有使用过 django 表单，所以可能缺少一些魔法（它可能无法使它工作......），但这条线看起来是错误的：

```
self.render_template('index.html', {'form':SubTaskForm}) 
```

您将类传递给您的模板，而不是它的实例：

```
self.render_template('index.html', {'form':SubTaskForm()}) 
```

# java - 找不到主类，IntelliJ 构建一个 jar

> ID：11166633
> 
> 赞同：5
> 
> 时间：2012-06-23T03:38:49.430
> 
> 标签：java, intellij-idea, executable-jar, classnotfound

当我尝试运行在 IntelliJ 中创建的 jar 文件时遇到问题。
我按照此处列出的步骤操作：[如何正确地从 IntelliJ 构建 jars？](https://stackoverflow.com/questions/1082580/how-to-build-jars-from-intellij-properly)并使用 IntelliJ 广泛搜索其他有相同问题的人，但没有找到解决方案。
在菜单 Project Structure>Artifacts 部分中，我有包和主类名称，我还尝试使用源文件和 .class 文件的相对和绝对路径指定“类路径”位（这似乎隐藏在IntelliJ 项目显示树..），但即使有这一切（我也确保每次更改某些内容时都重建 jar）我得到“找不到主类。程序将退出。” 当我尝试运行 jar 时的消息。

在主项目文件夹中，有 src 和 out。
out 包含带有包树的“production”，类文件
out 还包含带有 jar 文件夹的“artifacts”，jar 可执行文件
src 包含一个图像文件夹、META-INF 和包树。
包中的第一个文件夹包含主类，所以 src/ravelDemo/RavelDemoMain.java

在 Project Settings>Artifacts 中，主类当前列为 ravelDemo.RavelDemoMain
，类路径为 out\production\RavelSequence v1.03\ravelDemo\ 但我指定（或留空）的所有其他类路径都没有t 似乎指向正确的地方。（RavelSequence v1.03 是项目的名称）。

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-24T11:06:53.027

根据上面的讨论，似乎 IntelliJ IDEA 正在使用 Manifest 中正确指定的主类构建有效的可执行 jar，当`java -jar ...`使用用户的项目目标 JDK 版本从命令行执行命令时，此 jar 工作正常机器。

**问题是它在@sideways8**系统上双击时不起作用。这可能是由于默认 Java 安装损坏或`.jar`Windows 注册表中的文件类型关联错误造成的。这是机器特定的问题，因为**我通过双击在我的系统上运行共享项目 jar 没有问题**。

要解决此问题，您可以尝试从`Control Panel`|卸载此机器上存在的所有 Java 版本。`Programs and Features`，然后从头开始安装新的 JDK，使其成为系统上唯一的 JDK，并且`.jar`文件类型由它处理。

我使用[Total Commander](http://ghisler.com)，它有一个很好的功能来检查/编辑文件关联（`File`| `Associate With...`），这是`.jar`我按下时关联的显示方式`Edit type...`：

![jar 文件类型](../Images/ce8b667b1b2813711f2237855f6e7ec5.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-11-09T21:25:21.023

我有同样的问题。jar 文件是使用 IntelliJ IDEA 或其他 IDE 创建的。我发现问题在于我的计算机上安装了两个版本的 java（java 6 和 java 8）。这是系统配置错误的问题。所以删除你拥有的任何版本的java并重新安装它，问题就解决了。

# c# - 如何获取在记事本中打开的文件的文件名和路径？

> ID：11166634
> 
> 赞同：3
> 
> 时间：2012-06-23T03:38:53.770
> 
> 标签：c#, windows, winapi

是否可以使用在记事本中打开的文件的路径获取名称。我已经有了 Notepad.exe 的 ProcessId。

谢谢，纳夫尼特

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-23T04:18:14.437

它是标题栏的一部分，所以需要获取窗口句柄，然后调用 Win API 函数`GetWindowText()`

这可能是您想要的：[使用 Process 对象获取正确的窗口标题。](http://social.msdn.microsoft.com/Forums/en-US/csharpgeneral/thread/8013bc78-059a-42e7-ae3e-e38960752656/)

编辑：[MSDN GetWindowText](http://msdn.microsoft.com/en-us/library/ms633520(VS.85).aspx)

编辑：正如评论中提到的，这并没有给出完整的路径。

# c# - 在 C# 中剪切、复制和粘贴？

> ID：11166637
> 
> 赞同：2
> 
> 时间：2012-06-23T03:39:35.593
> 
> 标签：c#, winforms

我有很多文本框。我有一个按钮，可以剪切焦点文本框的选定文本。我怎么做？我试过这个：

```
 if (((TextBox)(pictureBox1.Controls[0])).SelectionLength > 0)
        {
            ((TextBox)(pictureBox1.Controls[0])).Cut();
        } 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-23T03:43:40.597

希望是 WinForms

```
var textboxes = (from textbox in this.Controls.OfType<TextBox>()
                    where textbox.SelectedText != string.Empty
                    select textbox).FirstOrDefault();
if (textboxes != null)
{
    textboxes.Cut();
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-23T03:48:50.010

循环遍历控件以找到具有选定文本的控件：

```
foreach (Control x in this.PictureBox1.Controls)
{
    if (x is TextBox)
    {
        if (((TextBox)x).SelectionLength > 0)
        {
            ((TextBox)(x).Cut(); // Or some other method to get the text.
        }
    }
} 
```

希望这可以帮助！

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-23T04:01:26.987

尝试使用 common`Enter`和`Leave`events 设置最后一个具有焦点的 TextBox。

```
private void textBox_Enter(object sender, EventArgs e)
{
    focusedTextBox = null;
}

private void textBox_Leave(object sender, EventArgs e)
{
    focusedTextBox = (TextBox)sender;
}

private void button1_Click(object sender, EventArgs e)
{
    if (!(focusedTextBox == null))
    {
        if (focusedTextBox.SelectionLength > 0)
        {
            Clipboard.SetText(focusedTextBox.SelectedText);
            focusedTextBox.SelectedText = "";
            focusedTextBox = null;
        }
    }
} 
```

# php - 将单例作为连接变量访问

> ID：11166643
> 
> 赞同：0
> 
> 时间：2012-06-23T03:41:18.090
> 
> 标签：php

我怎样才能得到这样的工作

```
$name = 'Config';
$static = $name . '::init()';

$static->test(); 
```

如何从该设置访问测试方法？

我想拼凑几个变量来建立一个动态的单例调用。

所以`$name`可能是'Db'，'Array'等。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-23T04:08:35.823

你可以使用[call_user_func](http://php.net/manual/en/function.call-user-func.php)

```
$name = 'Config';
call_user_func(array($name , 'init'));
call_user_func($name.'::init'); // As of 5.2.3 
```

# java - 通过java创建jar文件所在的目录

> ID：11166644
> 
> 赞同：5
> 
> 时间：2012-06-23T03:41:41.647
> 
> 标签：java, path, directory

我已经对 SO 进行了调查以寻求答案，但找不到合适的答案。

当我从 jar 启动程序时，我需要在 jar 文件所在的目录中创建一个文件夹。用户将 jar 文件保存在哪里并不重要。

这是我正在使用的最新代码： A`System.out.println`将打印出正确的目录，但不会创建文件夹。相反，到目前为止，所有内容都保存到我的 System32 文件夹中。

```
 public static String getProgramPath() throws IOException{
    String currentdir = System.getProperty("user.dir");
    currentdir = currentdir.replace( "\\", "/" );
    return currentdir;

}

File dir = new File(getProgramPath() + "Comics/");//The name of the directory to create
    dir.mkdir();//Creates the directory 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-23T04:34:22.967

获取 Jar 的路径可能比简单地获取 user.dir 目录要复杂一些。我不记得详细原因，但 user.dir 在所有情况下都不会可靠地返回此路径。如果您绝对必须获取 jar 的路径，那么您需要做一些黑魔法并首先获取类的 protectionDomain。就像是：

```
import java.io.File;
import java.io.IOException;
import java.io.UnsupportedEncodingException;
import java.net.URL;
import java.net.URLDecoder;

import javax.swing.JOptionPane;

public class MkDirForMe {
   public static void main(String[] args) {
      try {
         String path = getProgramPath2();

         String fileSeparator = System.getProperty("file.separator");
         String newDir = path + fileSeparator + "newDir2" + fileSeparator;
         JOptionPane.showMessageDialog(null, newDir);

         File file = new File(newDir);
         file.mkdir();
      } catch (IOException e) {
         e.printStackTrace();
      }
   }

   public static String getProgramPath2() throws UnsupportedEncodingException {
      URL url = MkDirForMe.class.getProtectionDomain().getCodeSource().getLocation();
      String jarPath = URLDecoder.decode(url.getFile(), "UTF-8");
      String parentPath = new File(jarPath).getParentFile().getPath();
      return parentPath;
   }
} 
```

即使这样也不能保证有效，您必须接受这样一个事实，即有时（例如出于安全原因）您将无法获得 Jar 的路径。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-23T03:56:42.427

With some changes (such as adding a "/" before Comics), I managed to create the directory where you expected it to. Here is the full code I used.

```
import java.io.*;
public class TestClass {

        public static String getProgramPath() throws IOException{
                String currentdir = System.getProperty("user.dir");
                currentdir = currentdir.replace( "\\", "/" );
                return currentdir;

        }
        public static void main(String[] argv) {
                try {
                        String d = getProgramPath() + "/Comics/";
                        System.out.println("Making directory at " + d);
                        File dir = new File(d);//The name of the directory to create                                                                                      
                        dir.mkdir();//Creates the directory                                                                                                               
                }
                catch (Exception e) { System.out.println("Exception occured" + e);}
        }
} 
```

In the future, please don't hard code things like "/" and such. Use built-in libraries which will ask the OS what is right in this case. This ensures the functionality doesn't break (as easily) cross platform.

Of course, catch the exception properly etc. This is just quick and dirty attempt to mold your code into something that works.

# android - 神经网络识别加速度计模式

> ID：11166647
> 
> 赞同：9
> 
> 时间：2012-06-23T03:42:42.453
> 
> 标签：android, neural-network

我正在为 Android 设备构建一个应用程序，该应用程序需要它通过加速度计数据识别步行噪声和双击它之间的区别。我正在尝试使用神经网络解决这个问题。

一开始它进行得非常好，教它识别噪音中的水龙头，例如站立/坐下和以较慢的速度四处走动。但是当它正常行走时，即使我给它输入了大量的噪音数据，它似乎也从来没有学习过。

**我的问题**：我的方法有什么严重的缺陷吗？问题是基于缺乏数据吗？

### 网络

我选择了一个 25 输入 1 输出的多层感知器，我正在使用反向传播对其进行训练。输入是每 20ms 的加速度变化，输出范围从 -1（无抽头）到 1（抽头）。我已经尝试了几乎所有隐藏输入的星座，但最幸运的是 3 - 10。

我正在使用 Neuroph 的 easyNeurons 进行培训并导出到 Java。

### 数据

我的总训练数据大约是 50 次双击和大约 3k 噪声。但我也尝试用与双击成比例的噪音来训练它。

数据如下所示（范围从 +10 到 -10）：

坐着双击：![坐姿双击，相当容易判断。](../Images/800d112f2182bcacf1911561607d2333.png)

* * *

快步走： ![快走和双击，没那么容易](../Images/2938779ce4416365ede58e761354aa12.png)

所以重申我的问题：我的方法是否存在严重缺陷？我是否需要更多数据才能识别步行和双击之间的区别？还有其他提示吗？

**更新**

好的，经过多次调整，我们将基本问题归结为在快走时能够识别双击。坐着和经常（内部）步行我们可以很好地解决。

快步走 ![快步走](../Images/590ca16b56ad5ef69ca127e952601169.png)

所以这是一些我先走然后停下，站着不动，然后走，在我走的时候做5次双击的测试数据。

如果有人对原始数据感兴趣，我将其链接为最新（快走）数据[here](http://www.2shared.com/file/6I2niK0b/walkx3_5dt.html?)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-26T13:24:49.923

你坚持使用神经网络吗？如果没有，这里有一个想法：

采取 0.5 秒的窗口并考虑曲线下的区域（或者由于您的信号是离散的，因此每个传感器读数的绝对值之和 - 所附图像中的红色区域）。您可能会发现，当用户走路时，这个总和很高，而当他们坐着和/或敲击时，这个总和要低得多。您可以设置一个阈值，高于该阈值时您认为在用户行走时采用给定窗口。或者，由于您有标记数据，您可以训练任何二元分类器来区分步行和不步行。

您可能可以通过考虑信号的其他特征来改进您的系统，例如线的锯齿状程度。如果电话放在桌子上，线路几乎是平的。如果用户正在打字，这条线会有点平，你会时不时地看到一个尖峰。如果他们正在行走，您会看到类似正弦波的东西。

![在此处输入图像描述](../Images/ced4f996c7f3a18af8ce8f28b03ec3c0.png)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-27T17:03:25.327

您是否考虑过“快走”和“快走 + 双击”信号可能过于相似而无法仅使用加速度计数据进行区分？可能根本不可能达到超过一定量的准确度。

否则，神经网络可能是您的数据的不错选择，并且仍然有可能从中获得更好的性能。

这篇非常有用的论文 (http://yann.lecun.com/exdb/publis/pdf/lecun-98b.pdf) 建议您对数据集进行白化，使其具有零均值和单位协方差。

此外，由于您的问题是分类问题，您应该确保使用交叉熵标准 (http://arxiv.org/pdf/1103.0398v1.pdf) 而不是 RMSE 来训练网络。（我不知道 Neuroph 是否支持交叉熵。）

正如其他海报所建议的那样，您可以尝试的另一件相对简单的事情是转换您的数据。使用 FFT 或 DCT 将数据转换到频域是时间序列分类的相对标准。

您还可以尝试在不同大小的窗口上训练网络并对结果进行平均。

如果您想尝试一些更困难的 NN 架构，您可以查看 Time-Delay-Neural-Network（只需在 google 上搜索该论文），它在其结构中考虑了多个窗口。使用其中一个 Torch 库 (http://www.torch.ch/) 来实现这一点应该相对简单，但是将网络导出到 Android 环境可能会很困难。

最后，在时间序列数据中获得更好分类性能的另一种方法是考虑相邻标签之间的关系。条件神经场（http://code.google.com/p/cnf/ - 注意：我从未使用过此代码）通过将神经网络集成到条件随机场中来做到这一点，并且取决于您实际中的行为模式数据，可能会做得更好。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-20T13:16:28.377

可能会起作用的是首先使用[傅里叶](http://en.wikipedia.org/wiki/Fast_Fourier_transform)变换过滤数据。行走有一个类似窦的幅度，你的双击会在变换结果中突出显示为不同的频率。我猜神经网络可以确定数据是否包含您的双标签，因为它具有额外的频率（双标签频率）。一些问题仍然存在：

1.  数据样本需要多长时间？
2.  你的手机能做它需要做的所有工作吗，它有足够的处理能力吗？

您甚至可能要考虑为此使用 GPU。

另一种选择是使用傅立叶输出和一些好的旧[模糊逻辑](http://en.wikipedia.org/wiki/Fuzzy_logic)。

这听起来很有趣……

# javascript - 如何合并这些数组/json 对象？

> ID：11166651
> 
> 赞同：6
> 
> 时间：2012-06-23T03:43:22.183
> 
> 标签：javascript, jquery

在这一点上，我对什么是对象、什么是数组以及什么是 JSON 有点困惑。有人可以解释两者之间的语法差异吗？以及如何向每个项目添加项目，如何合并每种类型，等等？我试图让这个函数从 JSON 对象（我认为）中获取新信息并将其与一些新信息合并。然后，此信息将传递给 PHP 脚本进行处理。

这是控制台输出：

```
{"public":{"0":["el29t7","3bmGDy"]}} 
{"public":"[object Object][object Object]"} 
```

这是我正在使用的 JS：

```
/* Helper function to clean up any current data we have stored */
function insertSerializedData(ids, type) {
    // Get anything in the current field
    current_data = $('#changes').val();
    if (!current_data) {
        var data = {};
        data[index++] = ids;
        var final_data = {};
        final_data[type] = data;
        $('#changes').val(JSON.stringify(final_data));
    } else {
        current_data = JSON.parse(current_data);
        var data = {};
        data[index++] = ids;
        // Does the index exist?
        if (type in current_data) {
            var temp_data = current_data[type];
            current_data[type] = temp_data + data;
        } else {
            current_data[type] = data;
        }
        //var extra_data = {};
        //extra_data[type] = data;
        //$.merge(current_data, extra_data);
        $('#changes').val(JSON.stringify(current_data));
    }
    console.log($('#changes').val());
} 
```

这个想法是，如果密钥（公共的或其他任何密钥）尚不存在，则使其指向数组数组。如果确实存在，则需要将数组数组与新数组合并。例如：

如果我有

```
{"public":{"0":["el29t7","3bmGDy"]}} 
```

我想将它与

```
["aj19vA", "jO71Ba"] 
```

那么最终结果将是：

```
{"public":{"0":["el29t7","3bmGDy"], "1":["aj19vA", "jO71Ba"]}} 
```

我该怎么做呢？谢谢

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-23T04:17:08.647

优秀的两部分问题。总体而言，由于第一个问题的复杂性，第二个问题并不重要。

问题一：

> 什么是对象，什么是数组，什么是 JSON。有人可以解释两者之间的语法差异吗？

问题2：

> 以及如何向每个项目添加项目，

问题 3：

> 如何合并每种类型，等等？

答案1：

这是一个常见的绊脚石，因为 JavaScript 比人们最初预期的更灵活。这是曲线。

> 在 JavaScript 中，一切都是对象。

所以这里是每个的代码：

```
//What is an object?
var obj = { };                

var obj2 = { member:"value", myFunction:function(){} } 
```

上面是一个空对象。然后是另一个带有变量和函数的对象。它们被称为对象文字。

```
//What is an array 
var array1 = [ ] ;     

var array2 = [0,1,2,3,4]; 
```

上面是一个空数组。然后是另一个包含五个整数的数组。

这是引起混乱的曲线。

```
//Get elements from each of the prior examples.
var x = obj2["member"];
var y = array2[1]; 
```

什么？？？Object 和 Array 都使用括号访问值？这是因为两者都是对象。事实证明，这对于编写高级代码来说是一种很好的灵活性。数组是对象。

//什么是JSON？

JSON 代表 JavaScript 对象表示法。你可能已经猜到了。一切都是一个对象......它也是一个`{ };`但它是不同的，因为 - 它用于将数据传输到 - 和 - 从 JavaScript，而不是*在*JavaScript 中实际使用（通常）。它是一种文件传输格式。

```
var JSONObject = {"member":"value"}; 
```

与前面示例的唯一区别是引号。本质上，我们将对象文字包装为字符串，以便可以将其传输到服务器或返回，并且可以很容易地重新解释它。比 XML 更好 - 因为它不必进行自定义解析。只需打电话，`stringify()`或`ParseJSON()`。去谷歌上查询。重点是... JSON 可以转换为 object-literal JS 对象，而 JS object-literal 可以转换为 JSON，例如传输到服务器或 CouchDB 数据库。

对不起，切线。

答案 2：

如何为每个项目添加一个项目？这是曲线不再令人讨厌的地方，并且开始变得很棒！因为一切都是对象，所以一切都差不多。

```
//Add to an object
var obj {member1:"stringvalue"}
obj.member2 = "addme";    //That is it!

//Add to an array
var array1 [1,2,3,4,5];
array1[0] = "addme";

array[6] = null;

//We shouldn't mix strings, integers, and nulls in arrays, but this isn't a best-practice tutorial. 
```

记住 JS 对象语法，你可能会开始看到一个全新的灵活的对象世界打开了。但这可能需要一点时间。

答案3：啊，是啊...如何合并。

有很多（非常多）方法可以合并两个数组。这完全取决于您需要什么。排序，复制，连接......有一些。

[这是答案](https://stackoverflow.com/questions/1584370/how-to-merge-two-arrays-in-javascript)！

更新：如何制作漂亮的多维数组。

```
//Multiple Dimension Array
var array1 = [1,2,3];
var array2 = [3,4];

var arraysinArray = [array1,array2]; //That is it! 
```

这是曲线，这可能在一个对象中：

```
var obj{
   array1:[1,2,3],
   array2:[3,4]
} 
```

JavaScript 是强大的东西，坚持下去；它变得很好。:)

希望对您有所帮助，一切顺利！纳什

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-23T04:23:11.920

在这种情况下，将 JavaScript 的对象字面量`{}`视为 PHP 的关联数组。

鉴于此，“数组数组”实际上看起来像这样（使用您上面想要的输出）：

`{public: [["el29t7","3bmGDy"], ["aj19vA", "jO71Ba"]]}`

所以这里我们有一个对象字面量，它有一个名为“public”的属性，它的值是一个二维数组。

如果我们将上面的内容分配给一个变量，我们可以将`push`另一个数组放到“public”上，如下所示：

```
var current_data = {public: [["el29t7","3bmGDy"], ["aj19vA", "jO71Ba"]]};

// Using direct property access
current_data.public.push(["t9t9t9", "r4r4r4"]);

// Or using bracket notation
current_data["public"].push(["w2w2w2", "e0e0e0"]); 
```

`current_data`的值现在是：

```
{public: [
  ["el29t7","3bmGDy"], 
  ["aj19vA", "jO71Ba"], 
  ["t9t9t9", "r4r4r4"], 
  ["w2w2w2", "e0e0e0"]
]} 
```

所以现在“public”是一个长度为4的数组。

```
current_data.public[0]; // ["el29t7","3bmGDy"]
current_data.public[1]; // ["aj19vA", "jO71Ba"]
current_data.public[2]; // ["t9t9t9", "r4r4r4"]
current_data.public[3]; // ["w2w2w2", "e0e0e0"] 
```

MDN 有非常好的关于 Array 的文档，可以帮助您深入了解您可能需要的其他功能。 [https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/Array](https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/Array)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-23T03:53:01.887

第一个是一个对象，包含数组，第二个是一个数组。

DEMO 显示显示输出 [http://jsfiddle.net/GjQCV/](http://jsfiddle.net/GjQCV/)

```
var object={"public":{"0":["el29t7","3bmGDy"]}};
var arr=["aj19vA", "jO71Ba"] ;
/* use object notation to add new property and value which is the array*/
object.public[1]=arr; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-23T03:53:15.580

`{"0": ...}`如果是一个真正的数组而不是一个对象，那会更自然，但无论如何：

```
function maxKey(b) {
    var max;
    for( var key in b )
        var max = key;
    return max;
}
function merge(a,b) {
    for( var key in a ) {
        b[key] = b[key] ? (b[key][maxKey(b)+1]=a[key], b[key]) : a[key];
    }
    return b;
} 
```

请注意，这假设您将在下一个整数索引处插入

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-23T03:54:48.737

1.  数组是一种特殊的 Javascript 对象
2.  JSON 是一种表示 Javascript 对象的方式（因此可以表示数组等）
3.  对象更为通用，可以是可以表示为 JSON 的简单对象，也可以包含函数和原型。

因此，这不是数组数组（您可以使用 JSON 表示法访问项目，例如*myobj["0"]*）：

```
{"0":["el29t7","3bmGDy"], "1":["aj19vA", "jO71Ba"]} 
```

这是一个数组数组，这意味着您可以使用*[push](https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/Array/push)*方法添加一个项目，并使用诸如*myobj[0]*之类的数组表示法访问项目：

```
[ ["el29t7","3bmGDy"], ["aj19vA", "jO71Ba"] ] 
```

看起来你想要的结构是这样的：

```
var myobj = { "public": [ ["key", "value"], ["key", "value"] ] } 
```

然后，如果你想添加/合并新项目，你会这样写：

```
if (myobj["public"] != null) {
    myobj["public"].push(["newkey", "newval"]);
} else {
    myobj["public"] = ["newkey", "newval"];
} 
```

# eclipse - Google AppEngine 按钮已从 Eclipse 中消失

> ID：11166655
> 
> 赞同：0
> 
> 时间：2012-06-23T03:43:58.110
> 
> 标签：eclipse, google-app-engine, eclipse-plugin

我一直在使用 Eclipse 为 AppEngine 开发，并且在工具栏中总是有一个方便的蓝色按钮用于部署。现在没了，不知道怎么部署了！

我试过了：

*   在“自定义透视”对话框中寻找可能的选项......但我不确定要寻找什么
*   正在更新 Eclipse 的 Google 插件...但显然它已经是最新的了

不幸的是，我不确定是什么改变导致了这种情况。请帮我取回我的按钮！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-23T04:06:22.057

在您的 Eclipse 顶部菜单中选择 WINDOW --> SHOW VIEW 它应该是选项之一。如果没有，请选择 OTHER 并导航对话框，直到您在 Google 下找到它。

# c# - 按顺序在多个 Web 表单之间进行条件导航？

> ID：11166656
> 
> 赞同：0
> 
> 时间：2012-06-23T03:44:10.927
> 
> 标签：c#, asp.net, webforms

我有一个网站（ASP.NET，没有 MVC），其中包含多个 Web 表单，用于填写客户魔法风格的数据。

假设我`Form1, Form2, Form3, Form4, Form5, Form6, form7` 除了第一个和最后一个表单之外的所有表单都有一个 Next 和 Previous 按钮，其中包含用于重定向的简单代码，例如在 Form4 上

```
btnNext_Click -> Response.Redirect("Form5.aspx");
btnPrevious_Click -> Response.Redirect("Form3.aspx"); 
```

工作正常，但在第一个表单上有一个单选按钮列表，根据选择的内容，应该跳过一些表单，所以我不能再对导航进行硬编码。即如果选择了单选按钮 1，那么向导将是

```
Form1 -> Form2 -> Form6 -> Form7 
```

如果选择了单选按钮 2，那么向导将是

```
Form2- > Form3 -> Form7 
```

单选按钮列表是客户类型，将与其余数据一起保存到数据库中。

不是在寻找完整的代码示例，而是更多，您将如何继续这样做？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-23T03:53:01.670

Use [wizard control](http://www.codeproject.com/Articles/15804/ASP-NET-2-0-Wizard-Control), it provide built in next previous functionality

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-23T04:03:52.657

使用 Switch 创建一个单独的类 .. 案例代码来处理适当的代码分支。

```
class OpenWebForm
{
    protected void SelectForm(string option)
    {
        switch (option)
        {
            case "1":

                break;

            case "2":

                break:

        }

    }
} 
```

创建此类的一个实例并将所选选项作为参数传递。在您的 Web 窗体的 Next Button Click 中，调用此类的方法。

# ipad - 如何使 UIAlertView 模态化？

> ID：11166657
> 
> 赞同：0
> 
> 时间：2012-06-23T03:44:20.563
> 
> 标签：ipad, ios5, objective-c-2.0

如有必要，我想显示登录对话框和登录错误对话框。

我使用 UIAlertView 来显示这些对话，但在显示 UIAlertView 时进程会继续运行。

我在下面写了一个代码。现在 NSUserDefaults 不保留这些值，所以我预计会显示登录对话框并等到按钮被点击。

但是当运行它时，会显示错误对话框，然后点击 OK 后，会显示登录对话框。

我怎样才能解决这个问题？

提前致谢。

```
- (void)storeEvernote
{
    NSUserDefaults *defaults = [NSUserDefaults standardUserDefaults];

    evID = [defaults stringForKey:@"evID"];
    evPW = [defaults stringForKey:@"evPW"];
    NSLog(@"%@", evID);

    if( evID == NULL || evPW == NULL )
    {
        login = true;
        [self showLoginDialogue];
    }
    else
    {
        evernoteID = evID;
        evernotePW = evPW;
    }
    if( evernoteID == NULL || evernotePW == NULL )
    {
        login = false;
        [self showErrMessage];
        return;
    }
    [self getEvernoteNotebooks];
}

- (void)showLoginDialogue
{
    UIAlertView *loginDialogue = [[UIAlertView alloc] initWithTitle:@"Evernote Login"     message:@"Enter your Evernote Info" delegate:nil cancelButtonTitle:@"Cancel" otherButtonTitles:@"Login", nil];
    loginDialogue.delegate = self;
    loginDialogue.alertViewStyle = UIAlertViewStyleLoginAndPasswordInput;

    [loginDialogue show];
}

- (void)showErrMessage
{
    UIAlertView *loginalert = [[UIAlertView alloc] initWithTitle:@"Login Failure" message:@"Invalid ID & Password" delegate:nil cancelButtonTitle:nil otherButtonTitles:@"OK", nil];
    [loginalert show];
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-23T04:30:59.567

该`storeEvernote`方法第一次运行时`evID`，第一个为真，它显示then 它继续到第二个，因为和`evPW`仍然如此，第二个语句中的条件也为真，所以它显示. 要解决此问题，请将第二个语句移动到ALSO ADD的委托方法到第一个语句的末尾，例如：`NULL``if``LoginDialoge``if``evernoteID``evernotePW``NULL``if``errorMessage``if``loginDialogue``return;``if`

```
- (void)storeEvernote
{

NSUserDefaults *defaults = [NSUserDefaults standardUserDefaults];
    evID = [defaults stringForKey:@"evID"];
    evPW = [defaults stringForKey:@"evPW"];
    NSLog(@"%@", evID);
if( evID == NULL || evPW == NULL )
{
    login = true;
    [self showLoginDialogue];
    return;
}
else
{
    evernoteID = evID;
    evernotePW = evPW;
}

[self getEvernoteNotebooks];
}

//The login dialoge delegate method:

- (void)alertView:(UIAlertView *)alertView clickedButtonAtIndex:(NSInteger)buttonIndex
{
   //Process user input
      ...
   if( evernoteID == NULL || evernotePW == NULL )
    {
        login = false;
        [self showErrMessage];
        return;
    }
    [self getEvernoteNotebooks];
} 
```

# html - 设置下拉宽度比菜单长

> ID：11166660
> 
> 赞同：0
> 
> 时间：2012-06-23T03:44:42.520
> 
> 标签：html, css, drop-down-menu, menu

我一直在尝试不同的事情，但仍然能够得到我想要的东西。我想创建一个菜单。我希望菜单的宽度约为 20 像素，下拉菜单的宽度为 80-100 像素。

```
<div id="menulevel2grouping2">
                <ul>
                    <li><a href="#" onClick="">T</a>
                        <ul>
                            <li><a href="#" onClick="">Type 1</a></li>
                            <li><a href="#" onClick="">Type 2</a></li>
                            <li><a href="#" onClick="">Type 3</a></li>
                            <li><a href="#" onClick="">Type 4</a></li>
                        </ul>
                    </li>
                    <li><a href="#" onClick="">S</a>
                        <ul>
                            <li><a href="#" onClick="">Small</a></li>
                            <li><a href="#" onClick="">Medium</a></li>
                            <li><a href="#" onClick="">Large</a></li>
                        </ul>    
                    </li>
                </ul>

            </div>

   #menulevel2grouping2{
    margin: 0px;
    padding: 0px;
}

#menulevel2grouping2 ul{
    margin: 0px;
    padding: 0px;
    line-height: 30px;

}

#menulevel2grouping2 li{
    margin: 0px;
    padding: 0px;
    list-style: none;
    float: left;
    position: relative;

}

#menulevel2grouping2 ul li a{
    text-align: center;
    font-family: Helvetica, Verdana Arial, sans-serif;
    font-size: 12px;

    background-color: blue;

    width: 60px;

    text-decoration: none;

    display: block;
    color: #000000;
}    

#menulevel2grouping2 ul ul{
    position: absolute;
    display: none;
    top: 30px
}

#menulevel2grouping2 ul li:hover ul{
    display: block;

} 
```

关于如何完成它的任何想法？

谢谢！

杰伊

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-23T04:38:13.670

这是你想要的效果吗？在这里看小提琴：http: [//jsfiddle.net/scTgZ/](http://jsfiddle.net/scTgZ/)

我已经修改了你的 CSS。见小提琴。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-23T04:01:06.230

首先，只要有可能，您应该为您的元素提供一个类或 id 以避免复杂化。这就是 CSS 的目的，让事情变得简单，而不是让事情复杂化。

无论如何，这样的事情应该有效：

```
#menulevel2grouping2 ul li{width:20px; position:relative; z-index:10}
#menulevel2grouping2 ul li ul li{width:200px; position:relative; z-index:10} 
```

您可能不需要位置和 z-index（我没有测试它）并且您可能需要一些浮动来用于上部 li，但这应该足以让您了解

# actionscript-3 - 大物体的等距深度排序问题

> ID：11166667
> 
> 赞同：3
> 
> 时间：2012-06-23T03:46:08.080
> 
> 标签：actionscript-3, sorting, depth, isometric

我目前正在构建一个 as3 等距游戏，但我在深度排序方面遇到了很多问题。我已经寻找解决方案，但没有找到任何与我的问题匹配的东西（矩形对象）。

这是我的游戏截图：

![在此处输入图像描述](../Images/e4b9ccbae3d254c104580a1c9dedb3a8.png)

如您所见，深度排序在 1x1 平铺对象之间时效果很好。我只是使用它们的 x 和 y 坐标（相对于等轴测图）对它们进行排序。

当我有更大的物体时，问题就出现了，比如 2x2 或 1x4 或 4x1。

知道我应该如何处理深度排序吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-23T06:56:11.707

我认为不可能根据每个对象的单个`x`,`y`值对场景进行排序，如果其中一些对象的长度足够长以至于一端的深度应该与另一端不同。例如，考虑一下如果图片中的棕色椅子向左下方移动了一个正方形（到蓝色椅子和长沙发之间的正方形），您将如何处理渲染。它在场景中会比沙发后面的红色桌子更深，但需要在沙发顶部渲染，而沙发需要在桌子顶部。

我认为有两个简单的解决方案：

*   **设计你的关卡只使用一种大对象的重叠**。例如，您可以指定对象的深度基于其最近的角，这将要求您避免将事物放在其最远的位之前（因为它将在它们之上渲染）。或者你可以坚持你当前的代码（它似乎使用最远的角落作为深度）并避免在更近的部分后面放置任何东西。但是，您可能仍然无法处理四处移动的角色和其他物体。如果您对您的设计很小心，您可能可以使麻烦的图块无法访问，但在某些情况下，这可能过于严格。
*   **把你的大物体分解成更小的物体，它们会有自己的深度**。您可能希望直接缩小到 1x1 件，每件都有明确的深度。您可以选择将较大的对象保留在代码中作为较小部分的不可见容器，或者可以完全消除它们，以使您更容易加载并启用与各个位的交互。

将较大的对象拆分成不同`1x1`大小的部分也很不错，因为您可以将它们模块化。也就是说，您可以通过将`1x1`不同组合的部件组合在一起来构建不同大小的对象。例如，如果您将`2x1`图像中的表格垂直切成两半，并创建一个`1x1`适合它们之间的中间图块，您可以将设计拉伸到`3x1`或`10x1`，具体取决于您重复中间图块的次数。还有很多其他方法可以使平铺图形看起来不错，只需要少量的艺术。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-09-19T18:52:24.607

Ultima Online 仿真器（特别是 POL，尽管可能还有其他仿真器）通过实现和使用“多”的概念来实现这一点 - 由分割的较大图形部分组成的单个对象。这些分割图形使得它们的精灵在 iso 网格边界的左右角点垂直分割。

其他注意事项： - 从上到下渲染按屏幕 Y 轴排序的“多”件。- 'multi' 的南部（即屏幕左下角）组件成为锚定瓷砖位置（在沙发的情况下，它最左边的部分）。- 考虑到每个地图位置也可以拥有自己的垂直对象堆栈；通过 screen-Y 偏移每个对象的渲染模拟高度/高度，并且这些必须从下到上排序（例如最低高度到最高高度）。

祝你好运！

# css - 居中具有不同列表项宽度的流体导航

> ID：11166669
> 
> 赞同：0
> 
> 时间：2012-06-23T03:46:15.640
> 
> 标签：css, fluid-layout

如何在导航栏中将列表项居中，列表项的宽度不同？谢谢

```
<div class="wrapper" style="width:100%">
<div class="nav" style="width:100%">
    <ul>
        <li><a href="#">HOME</a></li>
        <li><a href="#">PROJECTS</a></li>
        <li><a href="#">TOURS</a></li>
        <li><a href="#">VOLUNTEER</a></li>
    </ul>
</div>
</div> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-23T04:03:33.303

试试**这个**：

```
.nav ul {text-align: center;}
.nav ul li {display: inline-block; *display: inline; *zoom: 1; border: 1px solid #999; background: #ccc; padding: 5px;}​​
.nav ul li a {text-decoration: none;} 
```

你给了一个`</nav>`，实际上是`</div>`。更正后的**HTML**：

```
<div class="wrapper" style="width:100%">
    <div class="nav" style="width:100%">
        <ul>
            <li><a href="#">HOME</a></li>
            <li><a href="#">PROJECTS</a></li>
            <li><a href="#">TOURS</a></li>
            <li><a href="#">VOLUNTEER</a></li>
        </ul>
    </div>
</div>​ 
```

希望这可以帮助。看看[小提琴](http://jsfiddle.net/sfYnm/)！:)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-23T03:57:51.193

try

> > .nav ul{text-align:center;}

if that doesn't work, try

> > .nav ul {width:100%; overflow:hidden;} .nav ul li{position:relative;margin:0px auto;}

# node.js - node.js 中有很多异步调用？

> ID：11166671
> 
> 赞同：0
> 
> 时间：2012-06-23T03:46:59.590
> 
> 标签：node.js, asynchronous

我一直想知道用 node.js 这样的语言来做这件事的最好方法是什么。Node 是异步的，但是如果我们必须进行 5 次调用才能继续执行程序呢？我正在整理一些东西来用 node.js 开始我的 dzen 并且必须获得输出大小。这就是我所拥有的：

```
var geo = require('child_process').exec("i3-msg -t get_outputs",
  function(error, stdout, stderr) {
    var out = JSON.parse(stdout);
    doStuff(out[0].rect);
});

function doStuff(geom) {
// set up dzen
} 
```

out[0].rect 是一个包含 x、y、宽度和高度的对象。

稍后我需要这些值，这是我唯一要做的调用，所以我不必担心。但是如果我不得不打更多电话怎么办？如果我需要进行大量调用，但仍然必须使用 node.js，该怎么办？我不喜欢这样的想法

```
var call1 = do.stuff('thing', function(data){
  call2(data);
});

function call2(d1){
  do.more.stuff('yeah', function(data){
    call3(d1, data);
  });
}

function call3(d1,d2){
...
function finallyDone(d1,d2,d3,d4,d5,d6){
// actually use the data now with 6 params 
```

这是正确的方法，还是有更好的方法？我想我可以做类似的事情：

```
var d1, d2, d3, d4, d5;
var call1 = do.thing(stuff, function(data){
  setd1(data);
});
function setd1(data){
  d1 = data;
  getd2();
}
...
function setd5(data){
  d5 = data;
  getd6();
}
function getd6(){
  var sh = call.thing(stuff, function(data){
    doProgram(data);
  });
}
function doProgram(d6){
  console.log(d1 + d2 + d3 + d4 + d5 + d6);
} 
```

那行得通吗？全局变量通常不好？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-23T03:50:35.510

You my friend would want to use a library called Async. [https://github.com/caolan/async](https://github.com/caolan/async)

It lets you chain async requests together with a variety of options on how to have your application behave :)

[https://github.com/caolan/async#control-flow-1](https://github.com/caolan/async#control-flow-1) is where you would want to look at the examples :)

# tomcat - Cloudfoundry，默认协议

> ID：11166674
> 
> 赞同：0
> 
> 时间：2012-06-23T03:48:11.270
> 
> 标签：tomcat, comet, cloud-foundry

我在cloudfoundry 中部署了一个Web 应用程序，现在我想通过在我的云部署中编辑servelt.xml 来更改tomcat 使用的默认协议。

cloudfoundry 是否允许您更改 servlet.xml ？

```
 <!--
<Connector port="8080" protocol="**HTTP/1.1**" 
           connectionTimeout="20000" 
           redirectPort="8443" />
           -->

<Connector connectionTimeout="20000" port="8080"   
   protocol="**org.apache.coyote.http11.Http11NioProtocol**" redirectPort="8443"/> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-23T05:30:34.417

如果要使用 HTTPS 配置 Tomcat，则不能。所有 SSL 都在路由器处终止，内部流量为 HTTP。

您可以使用独立应用程序对您的 Tomcat 配置进行其他更改：http: [//blog.cloudfoundry.org/2012/06/18/deploying-tomcat-7-using-the-standalone-framework/](http://blog.cloudfoundry.org/2012/06/18/deploying-tomcat-7-using-the-standalone-framework/)

# heroku - Heroku 上的 PyGreSQL

> ID：11166681
> 
> 赞同：0
> 
> 时间：2012-06-23T03:50:32.723
> 
> 标签：heroku

Heroku 不支持 PyGreSQL，还是我在 requirements.txt 文件中做错了什么？

```
web.py==0.36
PyGreSQL 
```

当我在本地运行 pip 时，一切都安装得很好。当我尝试部署时，我收到以下错误消息。

```
-----> Installing dependencies using pip version 1.0.2
   Requirement already satisfied (use --upgrade to upgrade): web.py==0.36 in ./.heroku/venv/lib/python2.7/site-packages (from -r requirements.txt (line 1))
   Downloading/unpacking PyGreSQL (from -r requirements.txt (line 2))
     Storing download in cache at /app/tmp/repo.git/.cache/pip_downloads/http%3A%2F%2Fpypi.python.org%2Fpackages%2Fsource%2FP%2FPyGreSQL%2FPyGreSQL-4.0.tar.gz
     Running setup.py egg_info for package PyGreSQL
       Traceback (most recent call last):
         File "<string>", line 14, in <module>
         File "/tmp/build_35fg1nd48mese/.heroku/venv/build/PyGreSQL/setup.py", line 98, in <module>
           mk_include()
         File "/tmp/build_35fg1nd48mese/.heroku/venv/build/PyGreSQL/setup.py", line 69, in mk_include
           for f in os.listdir(pg_include_dir_server):
       OSError: [Errno 2] No such file or directory: '/usr/include/postgresql/8.4/server'
       Complete output from command python setup.py egg_info:
       Traceback (most recent call last):

     File "<string>", line 14, in <module>

     File "/tmp/build_35fg1nd48mese/.heroku/venv/build/PyGreSQL/setup.py", line 98, in <module>

       mk_include()

     File "/tmp/build_35fg1nd48mese/.heroku/venv/build/PyGreSQL/setup.py", line 69, in mk_include

       for f in os.listdir(pg_include_dir_server):

   OSError: [Errno 2] No such file or directory: '/usr/include/postgresql/8.4/server'

   ----------------------------------------
   Command python setup.py egg_info failed with error code 1
   Storing complete log in /app/.pip/pip.log
!     Heroku push rejected, failed to compile Python app 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-06T01:29:54.137

PyGreSQL 库目前不支持 PostgreSQL 9.1，因此与 Heroku 不兼容。

# wpf - VB.NET 2008 的加载程序锁定错误（仅限 Windows XP？）

> ID：11166686
> 
> 赞同：8
> 
> 时间：2012-06-23T03:50:52.873
> 
> 标签：wpf, vb.net, loaderlock

当我在 Windows XP 上运行我的应用程序（WPF、VB.net 2008）时，我得到了奇怪的 Windows 错误。当我在出现错误和调试的机器上安装 VS2008 时。我遇到了加载程序锁定异常，所以我进入调试并删除了它。但是，当它安装在机器上时，我仍然会收到错误消息。

有没有办法在安装应用程序时删除加载程序锁定异常。我知道它可能不是最好的解决方案，但似乎只有当我使用 ReportViewer 启动 WindowsElementHost 时才会发生这种情况，这会导致问题，所以我真的不知道还能用它做什么。

所有版本的 XP 都有这个问题，就像 2003 一样。

在 Windows 7 和 Vista 中，我在调试和安装产品时从未遇到过该错误。同样的事情也适用于 2008 和 2008R2。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-04T18:45:48.697

我做了一些研究，下面你可以找到我的猜测：

*   也许这是报告查看器控件本身的错误，您应该更新到更高版本。我注意到 2012 年 12 月发布了一个新版本（参见[这篇文章](http://blogs.msdn.com/b/arvindsh/archive/2012/12/11/microsoft-report-viewer-2012-update-a-gotcha-to-be-aware-of.aspx)），据说可以在 .NET 3.5 和 4.0 上运行（因此它应该适用于 VB 2008，参见[下载页面](http://www.microsoft.com/en-us/download/details.aspx?id=35747)）；
*   我注意到 Report Viewer 2008 SP1 需要 .NET 3.5 SP1（请参阅[下载页面](http://www.microsoft.com/en-us/download/details.aspx?id=3841)）——也许过时的版本会触发您看到的异常；
*   可能 Windows XP 没有更新到最新的 Service Pack 或者是错误的版本 - Report Viewer 2010 SP1 需要 Windows XP SP3（请参阅[下载页面](http://www.microsoft.com/en-us/download/details.aspx?id=6610)）并且 Report Viewer 2012 不能在 Windows XP Starter Edition 上运行；
*   也许是报告查看器使用的库导致了这个异常（尤其是混合模式程序集）——转储或堆栈跟踪在这个意义上会有所帮助；
*   [在 Visual Studio Tools for Office 论坛中的这个线程](http://social.msdn.microsoft.com/Forums/en-US/vsto/thread/dd192d7e-ce92-49ce-beef-3816c88e5a86)中有一个全面的答案，其中列出了一些资源来理解这个问题；
*   上一个链接表明在某些情况下忽略此锁是安全的。如果在禁用加载程序锁定 MDA 的 Visual Studio 下进行测试，您发现没有问题，您可以使用此[博客文章](http://blogs.msdn.com/b/tlai/archive/2006/06/15/how-to-disable-a-specific-mda.aspx)中的说明在生产机器中禁用 MDA——基本上它涉及设置环境变量并添加一些行到`app.config`文件（另请参阅 Loader Lock MDA 的[文档](http://msdn.microsoft.com/en-us/library/ms172219.aspx)以查看新行的外观）。我还没有尝试过，但我认为它作为最后的解决方案可能对您有用 - 请务必彻底测试您的应用程序以避免不希望的副作用。

为了获得更多帮助，我建议您指定：

*   您正在使用的报告查看器版本；
*   您所针对的 .NET Framework 版本（特别是包括 Service Pack）；
*   为 Windows XP 安装了哪些 Service Pack；
*   您可以收集的任何堆栈跟踪或调试信息。

# text - Removing quotes from a text file in python

> ID：11166698
> 
> 赞同：-1
> 
> 时间：2012-06-23T03:53:32.067
> 
> 标签：text, python-3.x

I have to remove quotes from a relatively large text file. I have looked at the questions that may have matched this one, yet I am still not able to remove the quotes from specific lines from the text file.

This is what a short segment from the file looks like:

```
1 - "C1".

E #1 - "C1".

2 - "C2".

1

2

E #2 - "C2". 
```

I would like to have `1-"C1"`. be replaced by `c1`, and `E #1 - "C1"` be replaced with `E c1`. I tried replacing these in python, but I get an error because of the double `"'s`.

I tried:

```
input=open('file.text', 'r')
output=open(newfile.txt','w')
clean==input.read().replace("1 - "C1".","c1").replace("E #1 - "C1"."," E c1")
output.write(clean) 
```

I have with sed:

```
sed 's\"//g'<'newfile.txt'>'outfile.txt'. 
```

But yet another syntax error.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-23T15:18:58.010

If you're sure you want **literal** replacement, you just need to escape the quotes or use single quotes: `replace('1 - "C1".', "c1")` and so on (and to correct a couple of syntax-breaking typos). This, however, will only work on the first line, so there's no point in reading the whole file then. To do a smarter job, you could use [`re.sub`](http://docs.python.org/library/re.html#re.sub):

```
with open('file.text') as input, open('newfile.txt','w') as output:
     for line in input:
         line = re.sub(r'^(?P<num>\d+) - "C(?P=num)".$',
                       lambda m: 'c' + m.groups()[0], line)
         line = re.sub(r'^E #(?P<num>\d+) - "C(?P=num)".$',
                       lambda m: 'E c' + m.groups()[0], line)
         output.write(line) 
```

In the `sed` command you seem to try to simply remove the quotes:

```
sed 's/"//g' newfile.txt > outfile.txt 
```

# java - 有没有办法在java（或scala）信号量对象中 包含一个条件来获取方法？

> ID：11166699
> 
> 赞同：0
> 
> 时间：2012-06-23T03:53:32.143
> 
> 标签：java, scala, locking, semaphore, synchronizing

我有一个包含许多线程的程序，让我们以六个线程为例。其中五个应该能够同时使用给定资源，但如果发生给定条件，最后一个线程不应该，并且应该等到该条件结束。

据我了解，不能使用 ReentrantLock，因为它一次只能由一个线程持有。另一方面，信号量可以一次由多个线程持有，但我找不到将条件附加到获取方法的方法。

这个高级对象可以做到这一点，或者我将不得不使用通知来实现这个功能并直接等待？

例如。

```
class A{
   getResource{ ... }
}

//This Runable could be spawn many times at the same time
class B implements Runnable{
   run {
      setConditionToTrue
      getResource
      ...
      getResource
      ...
      getResource
      setConditionToFalse
   }
}

//This will be working forever but only one Thread
class C implements Runnable{
   run{
      loop{
         if(Condition == true) wait
         getResource
      }
   }
} 
```

提前谢谢朋友们

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-23T05:00:26.520

我在这里重申您的问题：您希望您的 B 线程同时访问共享资源，但您的 C 线程应该在使用资源之前等待某些条件发生。

如果我正确理解您的问题，您可以使用它`ReentrantLock`来解决您的问题。

引入一个新的函数调用`getAccess()`，让C线程调用这个函数来获取共享资源。引入另外两个函数来允许和停止对共享资源的访问。

```
class A {

  private final ReentrantLock lock = new ReentrantLock();
  private Condition someCondition = lock.newCondition();
  private boolean bCondition = false;

  getResource{ ... } // Your existing method used by B threads

  getAccess() { // Protected access to some resource, called by C thread
    lock.acquire();

    try {
      if (!bCondition)
        someCondition.await(); // B thread will wait here but releases the lock
    } finally {
      lock.release();
    }
  }

  allowAccess() { // B thread can call this func to notify C and allow access
    lock.acquire();
    try {
      bCondition = true;
      someCondition.signal(); // Decided to release the resource
    } finally {
      lock.release();
    }
  }

  stopAccess() { // B thread can stop the access
    lock.acquire();
    try {
      bCondition = false;
    } finally {
      lock.release();
    }
  }

} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-24T08:16:48.583

如果您希望多个线程共享一个资源，您需要更具体地了解该共享的含义。通常，这意味着要区分*读取*资源当前值的线程和*更改*值的其他线程。如果写入是无竞争且稳定的，这意味着是并发读取/独占写入模式（'crew'）。

在 Java API 中，这是由[ReentrantReadWriteLock](http://docs.oracle.com/javase/6/docs/api/java/util/concurrent/locks/ReentrantReadWriteLock.html)提供的。还有其他值得考虑的替代方案，例如 JCSP 中精心实施的[Crew](http://www.cs.kent.ac.uk/projects/ofa/jcsp/jcsp-1.1-rc4/jcsp-doc/org/jcsp/lang/Crew.html)。

使用 [J]CSP，还可以使用不同的模式：将公共资源包装在自己的线程中，并通过所有客户端线程的共享 JCSP 通道提供对其的访问。[鉴于线程通信图是非循环的（更多](http://wotug.ukc.ac.uk/parallel/theory/formal/csp/jeremy-martin/)），这种客户端-服务器模式易于理解和实现，并且具有形式上无死锁的额外好处。

# yesod - Meaning of "id" in yesod persistent field attributes

> ID：11166703
> 
> 赞同：1
> 
> 时间：2012-06-23T03:54:16.470
> 
> 标签：yesod

What is the meaning of "id=name" in the definition of the User entity? Any resources about the persist field attributes?

User name Text Asc id=name

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-07T18:54:50.143

id=... 属性设置表主键的列名。

例如：

```
Product id=product_id
    name Text
    quantityInStock Int 
```

...将创建一个名为“product_id”的具有整数主键的表

# jquery - jquery contenteditable issue

> ID：11166705
> 
> 赞同：0
> 
> 时间：2012-06-23T03:54:36.970
> 
> 标签：jquery, html, contenteditable

i'm somewhat new to html5 and i'm trying to implement its contenteditable attribute through jquery and i have this

```
 var note = document.forms["form"]["add"].value;
    $("body").append("<div class=\"post_it\"><div class=\"flag\"></div><span class=\"note\" contenteditable=\"true\">" + note + "</span></div>"); 
```

now everything works except for the contenteditable feature? the div is appended and whatnot but i still can't edit it and i'm not quite sure why

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-23T04:01:23.503

这是对跨浏览器可编辑内容的支持：http: [//caniuse.com/#feat=contenteditable](http://caniuse.com/#feat=contenteditable)

# javascript - jQuery 滑动选项卡：控制选项 - NEXT/PREVIOUS

> ID：11166707
> 
> 赞同：0
> 
> 时间：2012-06-23T03:55:00.083
> 
> 标签：javascript, jquery

我正在尝试使用下一个/上一个选项控制选项卡。这是我的[JSFIDDLE 示例](http://jsfiddle.net/kFNtX/1/)。我花了几个小时研究并在这个[WEBSITE](http://css-tricks.com/jquery-ui-tabs-with-nextprevious/)中找到了方法 NEXT/PREVIOUS 函数。我已经复制了示例中的所有内容，但没有得到任何结果。有人可以看看我的[示例](http://jsfiddle.net/kFNtX/1/)并告诉我我做错了什么吗？

**下一个/上一个 jquery/js**

```
<script>
$(document).ready(function() {
    var $tabs = $('#st_horizontal').tabs();
    $(".st_tab_view").each(function(i) {
        var totalSize = $(".st_tab_view").size() - 1;
        if (i != totalSize) {
            next = i + 2;
            $(this).append("<a href='#' class='next-tab mover' rel='" + next + "'>Next Page &#187;</a>");
        }
        if (i != 0) {
            prev = i;
            $(this).append("<a href='#' class='prev-tab mover' rel='" + prev + "'>&#171; Prev Page</a>");
        }
    });
    $('.next-tab, .prev-tab').click(function() {
        $tabs.tabs('select', $(this).attr("rel"));
        return false;
    });
});
</script> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-23T04:36:10.350

首先，您必须包含 jQuery UI JS 库才能使用 jQuery UI 选项卡。我编辑了你的小提琴以包含它，并显示了下一个按钮 - [http://jsfiddle.net/100thGear/kFNtX/3/](http://jsfiddle.net/100thGear/kFNtX/3/)

其次，您将两个选项卡插件组合在同一个 DOM 元素（滑动选项卡和 jQuery UI 选项卡）上 - 然后您尝试使用 jQuery UI 方式以编程方式遍历它们。我认为这不会很好。您需要选择一个插件来使用。

第三，滑动标签插件已经为您提供了下一个和上一个按钮。因此，我建议仅使用您上面提到的网站中的下一个/上一个功能与 jQuery UI 选项卡一起使用。

希望这可以帮助！

***更新***：这个小提琴 - [http://jsfiddle.net/100thGear/PS336/](http://jsfiddle.net/100thGear/PS336/) - 演示了如何使用滑动标签实现下一个/上一个功能。

# html - hyperlink tag in tag

> ID：11166708
> 
> 赞同：4
> 
> 时间：2012-06-23T03:55:04.217
> 
> 标签：html, hyperlink

So i'm trying to assign a hyperlink to a single word in a {p} tag in an .aspx page in MS expressions.

My problem: when i try to do this:

```
 <p>Some text with a <a href="******">HYPERLINK</a> then there's more text here like this</p> 
```

it shows up in the browser as such:

some text with a

HYPERLINK

then there's more text here like this

I'm trying to get it all on one line like it should be.. any ideas??

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-23T03:58:33.777

My best guess, is that your anchor tag is styled as display : block, can you confirm this by using inspect element, or providing a link to where this bug is occurring?

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-23T04:03:43.143

使用[Nobr](http://davidwalsh.name/nobr-css) html 标签。介于两者之间的任何内容都不会分成多行。

```
<a href="#"><nobr>My long sentence</nobr></a> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-11-06T20:34:19.373

`<nobr>`标签已弃用。

一个可以使用：空白：nowrap；

```
<a style = " white-space:nowrap; " href="******">HYPERLINK</a> 
```

# java - Java Error: New Generic TreeNode Array

> ID：11166710
> 
> 赞同：1
> 
> 时间：2012-06-23T03:55:15.167
> 
> 标签：java, arrays, generics, initialization, treenode

I have generic class of TreeNode:

```
public class TreeNode<E> {
public E key;
public int num_of_children;
public TreeNode<E> [] children;

public TreeNode(int num_of_children)
{
    this.num_of_children = num_of_children;
    children = new TreeNode[num_of_children];// Why not: new TreeNode<E>[num_of_children]?
}

public TreeNode<E> clone()
{
    TreeNode<E> node = new TreeNode<E>(num_of_children);
    return node;
}

} 
```

When I try to do:`children = new TreeNode<E> [num_of_children];`

I get error. But "new TreeNode[num_of_children]" works. I read about type erasure, and I don't understand why `TreeNode<E>[]` doesn't work. Why is that? Please enlighten me!

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-23T10:53:42.953

Java 不允许使用`new TreeNode<String>[]`和之类的东西。`new TreeNode<E>[]`您唯一能做的就是`new TreeNode[]`和`new TreeNode<?>[]`（无界通配符参数）。

这样做的原因有点复杂，但很有启发性。Java 中的数组在运行时就知道它们的组件类型，每次你放入一些东西时，它都会检查它是否是组件类型的实例，如果不是，则抛出异常（这与数组类型如何协变有关，因此在编译时本质上是不安全的）。

```
Object[] foo = new Integer[5];
foo[2] = "bar"; // compiles fine, but throws ArrayStoreException at runtime 
```

现在添加泛型。泛型组件类型的问题在于，由于泛型已从运行时类型中删除，因此您无法`TreeNode<Integer>`在运行时（而不是）检查对象是否是 say 的实例。`TreeNode<String>`它只能检查`TreeNode`，但不能检查组件类型。但是程序员可能已经预料到数组的这种检查和异常抛出行为，因为它通常可以工作。因此，为了避免这种意外失败，Java 不允许这样做。（在大多数代码中，无论如何你都不会遇到这个问题，因为你不会混合相同类型但不同类型参数的对象。但理论上是可以出现的。）

当然，您可以通过创建原始或通配符参数类型的数组，然后转换为正确的类型（例如`(TreeNode<Integer>)new TreeNode[5]`. 有什么不同？好吧，这是一个未经检查的强制转换，它会产生一个警告，而你，程序员，要对以后可能发生的所有不安全的事情负责。如果它做了一些意想不到的事情，编译器可以说，“我们告诉过你！”。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-23T08:19:20.553

因为Java语言规范[写道](http://docs.oracle.com/javase/specs/jls/se7/html/jls-15.html#jls-15.10)：

> 数组创建表达式创建一个对象，该对象是一个新数组，其元素属于 PrimitiveType 或 ClassOrInterfaceType 指定的类型。
> 
> 如果 ClassOrInterfaceType 不表示可具体化类型（第 4.7 节），则为编译时错误。否则，ClassOrInterfaceType 可以命名任何命名的引用类型，甚至是抽象类类型（第 8.1.1.1 节）或接口类型（第 9 节）。
> 
> *上面的规则意味着数组创建表达式中的元素类型不能是参数化类型，除了无界通配符。*

我不清楚他们为什么需要这个。当然，数组的组件类型必须在运行时可用，如果它与源代码中指定的类型不同，会误导程序员。考虑：

```
E[] a = new E[10]; 
```

在这里，如果编译器使用擦除`E`作为数组组件类型会很糟糕，因为程序员很可能会依赖数组来检查除了实例之外什么都没有`E`存储在其中。

目前尚不清楚允许会带来什么危害：

```
List<E>[] lists = new List<E>[10]; 
```

唯一想到的是分配一个数组元素将相当于一个未经检查的强制转换，因为数组会检查元素是 a `List`，但不是它是 a `List<E>`，因此无法抛出 a `ArrayStoreException`。

在实践中，只要您知道数组不会检查其组件类型的类型参数，您就可以安全地抑制此警告。

# python - 从pyqt中的布局中删除项目的最佳方法是什么

> ID：11166712
> 
> 赞同：5
> 
> 时间：2012-06-23T03:55:24.110
> 
> 标签：python, layout, pyqt, qwidget

我在 pyqt 中的布局有一些问题。关闭布局中的项目后，如果 layout.count() 返回旧项目计数。所以我认为 .close() 并没有真正从布局中删除项目。这是一个完整的工作示例。

```
import sys
from PyQt4 import QtGui,QtCore
class LayoutTest(QtGui.QWidget):
    def __init__(self):
        super(LayoutTest, self).__init__()
        self.vvbox = QtGui.QVBoxLayout()
        self.dvbox = QtGui.QVBoxLayout()
        vbox = QtGui.QVBoxLayout()
        vbox.addLayout(self.vvbox)
        vbox.addLayout(self.dvbox)
        self.setLayout(vbox)

        self.add_button = QtGui.QPushButton("Add Items")
        self.edit_button = QtGui.QPushButton("Remove Items")
        self.chk_button = QtGui.QPushButton("Check Items")

        self.vvbox.addWidget(self.add_button)
        self.vvbox.addWidget(self.edit_button)
        self.vvbox.addWidget(self.chk_button)

        self.connect(self.add_button, QtCore.SIGNAL("clicked()"), self.addButtons)
        self.connect(self.edit_button, QtCore.SIGNAL("clicked()"), self.removeButtons)
        self.connect(self.chk_button, QtCore.SIGNAL("clicked()"), self.checkItems)

        self.setGeometry(300, 200, 400, 300)

    def keyPressEvent(self, event):
        if event.key() == QtCore.Qt.Key_Escape:
            self.close()

    def addButtons(self):
        for i in range(0, 5):
            self.r_button = QtGui.QPushButton("Button %s " % i)
            self.dvbox.addWidget(self.r_button)

    def removeButtons(self):
        for cnt in range(self.dvbox.count()):
            self.dvbox.itemAt(cnt).widget().close()

    def checkItems(self):
        QtGui.QMessageBox.information(self, 'Count',"You have %s Items in Layout" % self.dvbox.count(), QtGui.QMessageBox.Ok)

def run():

    app = QtGui.QApplication(sys.argv)
    ex = LayoutTest()
    ex.show()
    sys.exit(app.exec_())

if __name__ == "__main__":
    run() 
```

只需在添加按钮中单击两次，然后删除按钮。然后只需检查项目。关闭后，您还将在布局中获得 n 个项目。

那么除了关闭之外，从布局中删除小部件的最佳方法是什么？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-06-23T07:04:48.927

您的评论确实是一个解决方案，而不是`close`使用`deleteLater`. 它更安全。通过一些修改，我会将您的方法重写为：

```
def removeButtons(self):
    for cnt in reversed(range(self.dvbox.count())):
        # takeAt does both the jobs of itemAt and removeWidget
        # namely it removes an item and returns it
        widget = self.dvbox.takeAt(cnt).widget()

        if widget is not None: 
            # widget will be None if the item is a layout
            widget.deleteLater() 
```

# node.js - 在 zappa 的 coffeekup 视图中嵌入咖啡脚本

> ID：11166715
> 
> 赞同：0
> 
> 时间：2012-06-23T03:56:20.557
> 
> 标签：node.js, coffeescript, coffeekup, zappa

有没有办法将变量值（显然只是为了读取）从应用程序传递到coffeekup视图（在zappa中）中的嵌入式coffeescript，例如：

```
.... @render 'index', myVar:"something"

@view index: ->
  coffeescript ->
    $(document).ready ->
      I need to get to myVar here... 
```

如果它可以工作，它看起来真的很漂亮......（作为嵌入式javascript的替代品）

**更新：**这里有一些尝试。我只是想在我的嵌入式脚本中使用字符串作为 id。

```
coffeescript ->
  $(document).ready ->
    id = myVar

coffeescript ->
  $(document).ready ->
    id = "#{myVar}"

coffeescript ->
  $(document).ready ->
    id = @myVar

coffeescript ->
  $(document).ready ->
    id = "#{@myVar}" 
```

我已经在脚本-> 函数中编写了一些快速的 javascript（因为它只是一个字符串，我可以轻松地插入变量），所以我已经解决了它，但是咖啡脚本的方式会更干净。在浏览器端丢失范围是有道理的——我只是想弄清楚如何去做。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-23T14:13:46.627

我猜“脚本->函数”的意思是：

```
 doctype 5
  html ->
    body ->
      h1 "Hello world."
      script "myvar = \"#{@myvar}\""
      coffeescript ->
        console.log myvar 
```

至少这是一个骇人听闻的解决方法。它也可以用对象来完成，通常使用 JSON 或类似的序列化。

但我不会将其归类为“干净的咖啡脚本方式”，所以我想这个问题仍然存在！

只是详细说明一下；这里的问题是我们在两个上下文中执行咖啡脚本代码；一个在生成要发送给客户端的 html 的服务器上，另一个在客户端本身上，通过在`coffeescript ->`构造的上下文中。

服务器端知道本地和类似的，因此对于在服务器上运行的代码，评估基于咖啡脚本的模板并用值和类似的替换模板变量很简单。

客户端不是这样。首先，客户端对本地/模板变量一无所知，它只看到页面在服务器端呈现时包含的任何内容。并且在coffeescript 构造中进行简单的模板扩展也不起作用，因为coffeescript 不知道您是引用客户端上的局部变量还是服务器上的模板变量。理论上，也可能有特殊的序列表示“在咖啡脚本代码中扩展模板变量”，但是我们只是 - 再次 - 在咖啡杯之上创建一种新的模板语言。当然，它可以看起来像普通的咖啡脚本，例如`serverLocal(SOMEREF)`，其中 SOMEREF 将被替换为相应的值。

理论上，Coffeecup 可以支持一个共享所有（或选择的）本地变量的结构，也可以作为要在客户端访问的变量，使用类似于`script`我上面展示的 hack 的“hack”，它可能不会太不同，除了使用 JSON 或类似的东西来支持比简单字符串更多种类的数据。

# java - Spring SimpleJDBCInsert - How to get generated keys on a batch insert?

> ID：11166717
> 
> 赞同：4
> 
> 时间：2012-06-23T03:56:37.893
> 
> 标签：java, spring, jdbc

Suppose I insert ten rows to a table using batch update. I think it is possible to get all the ten generated keys using JDBC PreparedStatement method-

```
ResultSet getGeneratedKeys() 
```

But how to achieve this with the spring framework? The SimpleJDBCInsert class has executeAndReturnKey() method, that works fine for one row insert at a time. But is there a way to do it for batch inserts ie., when using the executeBatch() method?

# linux - 如何从双语词典构建 4 语言词典

> ID：11166718
> 
> 赞同：1
> 
> 时间：2012-06-23T03:56:39.207
> 
> 标签：linux, perl, text, nlp

3 天前，我问了一个关于构建具有 3 种语言的并行词典的问题：[删除一些文本对的差异](https://stackoverflow.com/questions/11135928/removing-differencies-of-some-text-pairs)

问题如下：我有 2 对具有以下特征的文件：pair1: (File1.txt , File2.txt) pair2: (File3.txt , File4.txt)

这些对中的每个文件之间存在逐行对应关系。说 File1.txt 和 File3.txt 是一些英文单词，File2.txt 和 File4.txt 分别是它们的阿拉伯语和法语翻译。此外，File1.txt 和 File3.txt 非常相似（在某些情况下相同）。

```
 File1.txt       File2.txt
    EnWord1         ArTrans1
    EnWord2         ArTrans2
    EnWord3         ArTrans3
    Enword4         ArTrans4

    File3.txt       File4.txt
    EnWord1         FrTrans1
    EnWord3         FrTrans3
    Enword4         FrTrans4
    Enword5         FrTrans5 
```

那时我想做的是比较这对的英文面，找到两个文件中出现的共同词（EnWord1、EnWord3 和 EnWord4）并过滤掉它们对应的翻译。简而言之，我可以说使用两个双语英语-阿拉伯语和英语法语词典，我正在尝试构建一个 3 语种英语-阿拉伯语-法语词典。

史蒂夫回答了我并写了一个很好的代码来查找重复的英语单词并删除其他单词及其翻译：[答案可以在这里找到](https://stackoverflow.com/a/11141345/1265960)

但我还有一个更复杂的问题：如果我想添加另一种语言，我该怎么办？我的意思是我有另一个英俄词典（比如说 File5.txt 包含英语实体，File6.txt 包含俄语实体），我想构建一个 4 语言词典而不是 3 语言词典。

一种方法是使用当前代码构建一个 3 语言词典，然后在新的语言对上重新运行它，构建一个 4 语言词典。但我认为它不够高效，它会更好地解决这个问题。它也可能在其他语言中带来一些不一致。我的主要挑战是检查重复：当只有 2 个语言对时，检查重复将非常容易。但是如果我想检查 3 对中的重复，我该怎么办？如何更改代码以便一次提取 4language 字典？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-23T10:46:55.477

我将描述我将在此任务中使用的通用方法。

1）定义`%dictionary`哈希。这个散列的每个键都是一个英文单词，而每个值又是对包含该单词翻译的另一个散列的引用。像这样的东西：

```
my %dictionary = ( 
  'EnWord1' => { 
     arabic => 'Arabic EnWord1', 
     french => 'French EnWord1',
     ...
  },
  ...
); 
```

（在我们开始处理文件之前，这个哈希是空的，我只是在这里展示一个结构）。

2）同时扫描每对文件，在这个hash中添加一条对应的记录。有一个简单的方法：

```
my %filenames = (
  'arabic' => ['File1.txt', 'File2.txt'],
  'french' => ['File3.txt', 'File4.txt'],
  ...
);

for my $lang (keys %filenames) {
  open my $efh, '<', $filenames{$lang}[0] or die $!, "\n";
  open my $tfh, '<', $filenames{$lang}[1] or die $!, "\n";
  while (<$efh>) {
    chomp(my $enLine = $_);
    chomp(my $trLine = <$tfh>);
    $dictionary{$enLine}{$lang} = $trLine;
  }
} 
```

3) Refine `%dictionary`：只留下那些在所有扫描语言中定义了翻译的元素......

```
my $proper_translations_count = scalar keys %filenames;
for my $word (keys %dictionary) {
  my $translations = $dictionary{$word};
  if (scalar keys %$translations != $translations_count) {
    delete $dictionary{$word};
  }
} 
```

4）`%dictionary`以任何合适的方式输出。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-23T23:12:55.477

我不知道 Perl，但我会使用哈希映射。每种语言的 2 个哈希映射。含义的全局标识符（中间语言），适用于所有字典。所以英语单词 x 有 id1，而阿拉伯语中的 id1 是单词 y。因此，一个哈希映射将单词映射到全局标识符，另一个哈希映射将全局标识符映射到实际单词。因此，您可以通过 2 个 hashmap 调用将每个单词从一种语言翻译成另一种语言 (dict1.get(word):id dict2ID.get(id))

如果您想要一个更简单的解决方案，请使用英语作为您的中间语言，但是您会在这些词典中遇到一些错误。

添加新词典将非常容易。您只需获取该语言的英语文件，然后使用 english2intermediate 哈希映射来获取新语言的标识符。

# html - DIV 没有放在单元格的顶部

> ID：11166721
> 
> 赞同：0
> 
> 时间：2012-06-23T03:57:07.393
> 
> 标签：html, css, alignment, css-tables

我有一个[像这样的简单表](http://jsfiddle.net/Rf8Hz/)

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">

<head>
    <link href="Theme.css" rel="stylesheet" type="text/css" />
</head>

<body>
    <div class="Calendar">
        <div>   
            <div>
                <div>
                    <div class="headerLeft">yyyyyy</div>
                    <div class="headerRight">xxxxxx</div>
                    <div class="clear"></div>
                </div>
            </div>

            <div>
                <div>
                    <div class="headerLeft">yyyyyy</div>
                    <div class="headerRight">xxxxxx</div>
                    <div class="clear"></div>
                </div>

                <div>asfs</div>
            </div>

        </div>
    </div>
</body>
</html> 
```

CSS

```
.Calendar
{
    display:table;
    width:500px;
    table-layout:fixed;
}
.Calendar > div
{
    display:table-row;
}
.Calendar > div > div
{
    display:table-cell;
    height:70px;
    border: solid 1px #e0e0e0;
}

.headerRight
{
    float:right;
}
.headerLeft
{
    float:left;
}
.clear
{
    clear: both;
} 
```

为什么第一个单元格中的 div ("yyy xxx") 不在顶部？如果我做错了什么或遗漏了需要添加的内容，请现在告诉我。我在 Firefox 和 Chrome 上进行了测试。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-23T04:01:44.047

你可以添加`vertical-align: top;`到`.Calendar > div > div`CSS。这是假设您希望所有单元格的内容与`top`默认对齐而不是对齐`middle`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-23T03:59:51.063

该解决方案非常不优雅，但您所要做的就是颠倒您的 div 的顺序，因此在您的 HTML 中将 .headerRight div 放在 .headerLeft div 的前面

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-23T07:55:34.187

添加 `vertical-align:top;`到CSS`.Calendar > div > div`

```
 .Calendar > div > div
{
    vertical-align:top;
    display:table-cell;
    height:70px;
    border: solid 1px #e0e0e0;
} 
```

这是[演示](http://jsfiddle.net/Rf8Hz/3/)

# regex - about twitter autolink

> ID：11166723
> 
> 赞同：1
> 
> 时间：2012-06-23T03:57:18.753
> 
> 标签：regex, api, twitter

I have read [twitter's autolink testcases](https://github.com/twitter/twitter-text-conformance/blob/master/autolink.yml) but still can't find my answer.

I'm making an application and post updates to twitter's API server, which contains one url link.

I want to keep autolink alive, but there is a chance that the following case happens

```
messagetexthttp://example.com 
```

I do not want to insert space or colon between messagetext and the url. (letter count is well calculated to be 140 so..)

In this case, the autolink dead.

Any solutions?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-10T12:18:43.173

`http://`从 URL 中删除部分。很可能，Twitter 仍会识别 URL，您将获得更多空间而不是失去。

# android - Android File Manager only allowing me to go one folder deep

> ID：11166726
> 
> 赞同：0
> 
> 时间：2012-06-23T03:58:08.007
> 
> 标签：android, file-management

I've created a file manager that I will use in my other program, however I am having problems with it. It displays a list of files on my android phone, and I can click through one folder deep, however going more than one it stops working. Mainly I think because of "if(K.getAbsoluteFile().isDirectory()==true)", if I get rid of this line though it simply crashes. So it seems to only allow me to go one folder deep, can anyone figure out what I've done wrong here?

Also any guides or what have you on this topic would be appreciated, its kind of a mangling of random code I've found.

* * *

```
package book.BouncySquare;

import java.io.File;
import java.util.ArrayList;
import java.util.List;
import android.app.ListActivity;
import android.os.Bundle;
import android.util.Log;
import android.view.View;
import android.widget.ArrayAdapter;
import android.widget.ListView;

public class FileManager extends ListActivity {
    public File clickedFile = null;
    private List<String> directoryEntries = new ArrayList<String>();

    //private List<String> directoryEntries = new ArrayList<String>();
    private File currentDirectory = new File("/");

    @Override
    public void onCreate(Bundle icicle) {
        Log.d("startx", "start");
        super.onCreate(icicle);
        browseToRoot();
    }

    public void browseToRoot() {
        Log.d("Browse", "browse"+currentDirectory.getAbsoluteFile());
        browseTo(new File("/"));
    }

    private void browseTo(File file) {
        Log.d("mew", "too");
        if(file.isDirectory()){
            Log.d("check", "it");
        fill(file);     }
    }

    private void browse(String x) {
        Log.d("created", "newfile");
        final File K=new File(x);   
        Log.d("broke", "ass");
        if(K.getAbsoluteFile().isDirectory()==true){
        Log.d("Z"+K.getAbsoluteFile(), "directory");
        fill(K.getAbsoluteFile());}
        else{
            Log.d("X"+K.getName(), "NotADirectoryOrHidden");
            Log.d("A"+K.getAbsoluteFile(), "directory");
        }

    }

    private void fill(File files) {
        File[] meow=null;
        this.directoryEntries.clear();
        meow= files.listFiles();
        Log.d("sss", "sss");
        this.directoryEntries.add(getString(R.string.current_dir));// directoryentries is an arraylist that holds our Directories names
        this.directoryEntries.add(getString(R.string.up_one_level));
        for (File file : meow) {
            this.directoryEntries.add(file.getName());      //fill our string array directoryentries with each files getName, then we pass it to arrayAdapter to populate
            }
        ArrayAdapter<String> directoryList = new ArrayAdapter<String>(this,R.layout.file_row, this.directoryEntries); //our context,layout, and array of directories is created
        this.setListAdapter(directoryList);
    }

    @Override
    protected void onListItemClick(ListView l, View v, int position, long id) {
        String clickedEntry =this.directoryEntries.get((int) id);
        Log.d("clickedID="+id, "clickedPosition="+clickedEntry);    
        browse(clickedEntry);
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-24T01:27:50.290

尝试将当前目录添加到要列出的内容之前。

```
private void browse(String x) {
    Log.d("created", "newfile");
    final File K=new File(currentDirectory, x);   
    Log.d("broke", "ass");
    if(K.getAbsoluteFile().isDirectory()==true){
    Log.d("Z"+K.getAbsoluteFile(), "directory");
    currentDirectory = K.getAbsoluteFile();
    fill(K.getAbsoluteFile());}
    else{
        Log.d("X"+K.getName(), "NotADirectoryOrHidden");
        Log.d("A"+K.getAbsoluteFile(), "directory");
    }

} 
```

# jquery - jquery ajax responseText在ie9中不起作用

> ID：11166732
> 
> 赞同：0
> 
> 时间：2012-06-23T03:58:57.757
> 
> 标签：jquery, ajax

以下代码在除 IE 之外的所有应用中都非常有用。在 IE 中，警告`data.responseText`是说未定义。但在所有其他浏览器中，它会返回正确的数据。

我错过了什么？它在 Firefox、Chrome、Safari 等中运行良好。

如果我更改`data.responseText`为只是数据，我会得到`[object Object]`.

```
$.ajax({
    type: "POST",
    url: "",
    data: "command=loadComments&id=" + song_id,
    dataType: "html",
    complete: function(data) {
        loading.fadeOut('slow');

        $("#comments-list").fadeIn('slow', function() {
            $("#comments-list").html(data.responseText);
            alert(data.responseText);
        });
    }
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-23T04:02:03.163

而不是`.complete()`你可以尝试使用`.success()`功能。

**代码**

```
 success: function(data){
        loading.fadeOut('slow');
        $("#comments-list").fadeIn('slow', function() {
            $("#comments-list").html(data.responseText);
            alert(data.responseText);
        });
    } 
```

来自 jQuery 文档：

> **成功（数据，文本状态，jqXHR）**
> 
> 请求成功时调用的函数。该函数获得三个参数： 从服务器返回的数据，根据 dataType 参数格式化；描述状态的字符串；和 jqXHR（在 jQuery 1.4.x 中，XMLHttpRequest）对象。

和

> **完成（jqXHR，文本状态）**
> 
> 请求完成时要调用的函数（在执行成功和错误回调之后）。该函数获得两个参数：jqXHR（在 jQuery 1.4.x 中，XMLHTTPRequest）对象和一个对请求状态进行分类的字符串（“成功”、“未修改”、“错误”、“超时”、“中止”或“解析器错误”）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-23T04:04:47.977

原因可能是它在`success`IE 中引发错误。还要添加一个`error`回调来检查问题所在。例如，文本编码是 AJAX 调用中常见的仅 IE 错误。

# version-control - 将一个 mercurial 存储库拆分为不同的婴儿存储库

> ID：11166733
> 
> 赞同：2
> 
> 时间：2012-06-23T03:59:35.067
> 
> 标签：version-control, mercurial

情况是，我曾经把一些概念上相关的代码放在一个包里，希望以后逐渐交织在一起，结果它们最终变得相互独立（可以安全地分开）。因此，我决定是时候将它们拆分为不同的包，但我不确定如何以某种方式执行此操作，以便我还可以为每个子包保留各自的版本控制历史记录。有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-23T04:22:12.150

标准发行版中包含的[Convert](http://mercurial.selenic.com/wiki/ConvertExtension)扩展用于此目的。具体来说，查看该`--filemap`选项，它可以在从一个数据库转换到另一个数据库时包含、排除和重命名文件和目录。

# hosting - 无法加载类型“System.Reflection.IntrospectionExtensions”，ASP.NET MVC 4 (RC)，可能是 Facebook C# SDK 的错？

> ID：11166737
> 
> 赞同：2
> 
> 时间：2012-06-23T04:00:31.850
> 
> 标签：hosting, facebook-c#-sdk, asp.net-mvc-4, discountasp

我正在开发一个 ASP.NET MVC 4 (RC) 网站，在我的本地开发盒上运行良好。

部署到我的主机 (DiscountASP) 需要我更改`<compilation targetFramework="4.5" />`为，`<compilation targetFramework="4.0" />`即使我已经部署了它。

该网站运行良好，直到有人登录 Facebook，或尝试使用他们的 Facebook 帐户（几乎所有，我的会员系统主要使用 Facebook）连接到我的网站，它会引发错误：

无法从程序集“mscorlib，版本=4.0.0.0，文化=中性，PublicKeyToken=b77a5c561934e089”加载类型“System.Reflection.IntrospectionExtensions”。

由于它是测试版，我不担心此时将错误留在网上，您应该可以[在我的网站上重新创建错误](http://www.atmybase.com/)。

看起来 Facebook C# SDK 正在抛出错误，但这是 SDK 的错，还是我不得不更改为 4.0 框架的事实？我该如何解决这个问题？

**更新**

据我所知，System.Reflection.IntrospectionExtensions 是 .net 4.5 的新功能，它不在我的主机上。但是，我的项目以 .net 4.0 框架为目标，并且是这样部署的。在我的开发系统上运行良好，在主机上运行错误。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-24T03:37:54.113

事实证明，当我添加 Facebook C# SDK 参考（后来将项目更改为目标 4.0）时，我的项目针对 .net 4.5。

我删除了引用，确保我的项目设置为 .net 4.0，并使用 Nuget 重新安装 Facebook C# SDK。立即解决了问题。

# php - MySQL 数据库随机停止接收数据？

> ID：11166741
> 
> 赞同：0
> 
> 时间：2012-06-23T04:01:26.763
> 
> 标签：php, mysql, loops, while-loop

我正在开发一个不错的小应用程序。我正在制作一个 Tick 计数器，以计算程序运行的次数。但是，它随机停止在 1355 处输入数据...我必须让它继续运行直到达到 5000。但有时它会像 5002 一样...丢失在那个上...我更喜欢循环永远运行，直到它被终止。如果有人可以帮助我，你会得到一点饼干。总之，我的主要问题是将数据连续放入数据库中，没有随机停止。

```
while($run && $dataA['StateOfBot'] == 1){
    if($dataA['Tick'] >= 5000){
        mysql_query("UPDATE state SET StateOfBot = 0 WHERE ID = 1;");
    }
    $dataA['Tick'] = $dataA['Tick'] + 1;
    mysql_query("UPDATE state SET Tick = '".$dataA['Tick']."' WHERE ID = 1;");
    $data = mysql_query("SELECT * FROM state");
    $dataA = mysql_fetch_array($data);
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-23T04:10:42.843

我认为您的代码有很多错误

```
while($run && $dataA['StateOfBot'] == 1){
    if($dataA['Tick'] >= 5000){
        mysql_query("UPDATE state SET StateOfBot = 0 WHERE ID = 1;");
        break; //get out of the loop
    }
    $dataA['Tick'] = $dataA['Tick'] + 1;
    mysql_query("UPDATE state SET Tick = '".$dataA['Tick']."' WHERE ID = 1;");
    $data = mysql_query("SELECT onefield_only FROM state");
    $dataA = mysql_fetch_array($data);
} 
```

我试着稍微修复一下。您需要一个 break 语句才能跳出循环。

# c# - 仅在 xna 游戏库上添加内容参考

> ID：11166746
> 
> 赞同：3
> 
> 时间：2012-06-23T04:02:27.423
> 
> 标签：c#, visual-studio, xna, clickonce

首先，我将向您介绍有关此问题的一些背景知识。我的解决方案有 2 个 Windows 窗体项目（地图编辑器和另一个工具）、一个 XNA 游戏、一个游戏库和一个内容项目。

我将内容引用添加到由表单和游戏引用的库中。通过这种方式，我认为我可以在任何地方访问内容，让一切变得更容易。

在我尝试使用 ClickOnce 功能部署项目之前，它一直有效。当我尝试这样做时，我得到：

**错误 1 ​​无法加载 XmlPeek 任务的参数。必须设置 XmlContent 或 XmlInputPath 参数之一。**

而且我不知道这个错误的原因。现在我什至无法使用此设置进行调试。它曾经可以工作，直到我尝试使用 ClickOnce 发布，现在甚至无法调试。我必须添加对游戏的内容引用，并将其从库中删除，因为让游戏和库引用相同的内容项目会给我的每个内容文件带来 1 个错误。

对此错误消息有任何想法吗？

# iphone - 使用设定的行数垂直对齐标签中的文本

> ID：11166747
> 
> 赞同：0
> 
> 时间：2012-06-23T04:02:28.547
> 
> 标签：iphone, uilabel

我对上述问题有一些问题。我在表格视图中有一个标签（X-300、Y-26、width-192 和 height-42），其中包含不同长度的随机和未知字符串。最大行数应为 2。文本应始终位于标签的顶部。

我有一个可行的解决方案（如下），但它看起来很脏 - 必须有一种更清洁的方法来做一些看起来很简单的事情：

```
UILabel *cellLabel = (UILabel *)[cell viewWithTag:2];

// First set cell lines back to 0 and reset height and width of the label - otherwise it works until you scroll down as cells are reused.
cellLabel.numberOfLines = 0; 
cellLabel.frame = CGRectMake(cellLabel.frame.origin.x, cellLabel.frame.origin.y, 192, 42);

// Set the text and call size to fit
[cellLabel setText:[[products objectAtIndex:indexPath.row] objectForKey:@"title"]];
[cellLabel sizeToFit];

// Set label back to 2 lines.
cellLabel.numberOfLines = 2;

// This 'if' solves a weird the problem when the text is so long the label ends "..." - and the label is slightly higher.
if (cellLabel.frame.size.height > 42) {
    cellLabel.frame = CGRectMake(cellLabel.frame.origin.x, cellLabel.frame.origin.y, 192, 42);
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-23T04:20:53.560

这是我使用的，UILabel 上的一个类别。我正在设置标签的最大高度+尾部截断。这是 sizeToFitFixedWidth: 方法的修改版本，我在另一篇 SO 帖子中找到。也许您可以使用类似的方法来容纳最大行数？

```
@implementation UILabel (customSizeToFit)

- (void)sizeToFitFixedWidth:(CGFloat)fixedWidth andMaxHeight:(CGFloat)maxHeight;
{
    self.frame = CGRectMake(self.frame.origin.x, self.frame.origin.y, fixedWidth, 0);
    self.lineBreakMode = UILineBreakModeWordWrap;
    self.numberOfLines = 0;
    [self sizeToFit];

    if (maxHeight != 0.0f && self.frame.size.height > maxHeight) {
        self.lineBreakMode = UILineBreakModeTailTruncation;
        self.frame = CGRectMake(self.frame.origin.x, self.frame.origin.y, fixedWidth, maxHeight);
    }    
}

@end 
```

# python - Python中无的身份与平等

> ID：11166748
> 
> 赞同：16
> 
> 时间：2012-06-23T04:02:45.760
> 
> 标签：python, coding-style

各种 Python 指南说使用`x is None`而不是`x == None`. 这是为什么？相等用于比较值，因此询问是否`x`具有值似乎很自然`None`，用`==`和 not表示`is`。有人可以解释为什么`is`是首选形式并举例说明两者给出的答案不同吗？

谢谢。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-06-23T04:05:11.963

人们使用的原因`is`是因为使用没有优势`==`。可以编写比较等于 的对象`None`，但这并不常见。

```
class A(object):
    def __eq__(self, other):
        return True

print A() == None 
```

输出：

```
True 
```

运算符也更快，但我认为这个`is`事实并不重要。

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2012-06-23T05:43:53.437

`is`关键字测试身份。它不是比较运算符，如`==`. Using`is`不仅仅测试两个参数是否具有相同的值和/或相同的内部结构：即，它测试两个参数是否实际上引用了内存中的同一个对象。这有很多含义，其中一个是`is`不能重载，另一个是可变类型和不可变类型之间的行为不同。例如，考虑以下情况：

```
>>> l1 = range(5)
>>> l2 = range(5)
>>> l1 == l2
True
>>> l1 is l2
False
>>> l3 = l1
>>> l1 is l3
True
>>> s1 = "abcde"
>>> s2 = "abcde"
>>> s1 == s2
True
>>> s1 is s2
True 
```

在这里，由于列表是可变的，它们不能共享内存中的位置，因此`is`会`==`产生不一致的结果。另一方面，字符串是不可变的，因此在某些情况下它们的内存可能会被池化。基本上，`is`只能可靠地用于简单的、不可变的类型，或者在多个名称指向内存中完全相同的对象的情况下（例如`l3`上面示例中的使用），并且它的使用表明希望测试身份而不是价值。我希望`is`比`==`它不执行方法查找要快一些，但我可能弄错了。当然，对于复杂的容器对象，如列表或字典，`is`应该比`==`（大概是 O(1) 与 O(n)）。也就是说，速度问题主要是一个有争议的问题，因为两者不应被视为可以互换。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-06-23T22:13:06.303

PEP 8 说：“与像 None 这样的单例的比较应该始终使用 'is' 或 'is not' 来完成，而不是相等运算符。” 这是一个很好的解释为什么：

[http://jaredgrubb.blogspot.com/2009/04/python-is-none-vs-none.html](http://jaredgrubb.blogspot.com/2009/04/python-is-none-vs-none.html)

# android - 安卓 DTmf 音

> ID：11166752
> 
> 赞同：2
> 
> 时间：2012-06-23T04:03:44.167
> 
> 标签：android

我正在通过此代码发送 dtmf 音。

```
String number="tel:+962791212121,2,3,3";
Intent c1= new Intent(android.content.Intent.ACTION_CALL, Uri.parse(number));
startActivity(c1); 
```

它像这样发送完美的 dtmf。 *2+ **（2 秒延迟）** +3+ **（2 秒延迟）** +3。*

但我想消除那个 2 秒的延迟，或者我想控制那个延迟。

如何控制**（2 秒延迟）**？或任何其他在通话期间发送 dtmf 音的方法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-23T04:31:19.453

要删除延迟，请删除逗号。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-10-10T06:07:26.077

试试这个方法（）。

```
private void call(int profileid) {//call procedure logic 
        ProfileDo profile = adapter.getProfile(profileid);
        if (profile.getStepCount() == 0) {
            Toast.makeText(getApplicationContext(), "Please edit the profile and add atleast one value to make a call", 10000).show();
            return;}
            String call = "tel:";
        for (StepDO step : profile.getSteps()) {
            String value = URLEncoder.encode(step.getValue());
            int delay = step.getDelay();
            String pausesStr = "";
            for (int i = 0; i < delay / 2; i++) {
                pausesStr += PhoneNumberUtils.PAUSE;
            }
            call += value + pausesStr;
        }
         startActivity(new Intent("android.intent.action.CALL", Uri.parse(call)));      
    } 
```

希望这可以帮助你。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-10-18T00:56:17.607

试试这个：

```
Intent signalIntent = new Intent(Intent.ACTION_CALL, Uri.parse("tel:12334566778"+","+","+"1"));
startActivity(signalIntent); 
```

# tridion - 内容交付的正确 DTAP 设置

> ID：11166754
> 
> 赞同：8
> 
> 时间：2012-06-23T04:03:59.310
> 
> 标签：tridion

我有这个设置，但它似乎不太正确。

**您将如何改进跨多个 .NET（客户）开发团队的内容交付 (CD) 开发？**

**CMS 服务器 -> 演示服务器环境**

*   CMS 制作 -> 实时和预览网站
*   CMS 组合测试+验收（内部称为“Staging”）-> Live（“Staging”）
*   CMS 开发（DEV）-> Live（开发网站）*，有时开发本地机器（笔记本电脑）*

**期望和限制：**

*   多个团队和多个网站
*   *单一*DEV CMS 许可证（我相信对客户来说很典型？）
*   为每个开发人员提供足够的 CD 许可证
*   最好开发人员可以在本地编程和运行更改*——这是一个合理的期望吗？*

**工作过**

我们使用 Content Delivery API 针对本地机器和 CD DEV 的相同代理数据库开发了 ASP.NET 页面。本地机器具有 CD dll、它们自己的许可证文件，并且可以通过查询和组件演示调用很好地运行/调试。

**坏的**

我们偶尔会同时发布到 Dev 演示服务器*和*Developer 机器，这似乎不是现在，但我认为这是为了在我们的本地机器上获取模式文件。但是，是的，我们不信任开发代理数据库。

**有问题的：**

本地机器有时需要 Tridion 发布的页面，但我们无法可靠地发布到本地机器：

*   为单个“本地计算机”发布目标设置多个发布目标是行不通的——我们经常将这些“服务器”带回家。
*   VPN 阻止了对异地笔记本电脑的访问（当时使用“传入”文件夹）。

为每个开发人员管理发布目标并为每台新笔记本电脑设置 CD 是一种很好的做法（就像在练习中一样，不一定是一个好主意），但有点乏味。

这些后见之明的方法会适用吗？

*   我们自己将物理文件从 Dev 同步到本地机器？
*   不要在本地（本地主机）运行演示站点，而是从 Dev 构建、上传 dll 和测试？
*   我们只是缺少第四个 CMS 环境？尽管我们很喜欢我们的销售员，但我们对购买另一个 CM 许可证不感兴趣。

**您如何才能更好地为组织中的多个开发人员设置 .NET CD？**

编辑：@DominicCronin 指出这只是正确 DTAP 设置的一个子集。我更新了我的条款并创建了一个[单独的问题来澄清 DTAP 与 Tridion](https://stackoverflow.com/questions/11475217/tridion-dtap-clarified-how-many-content-delivery-setups-do-i-need)。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-11T11:17:57.493

这个问题的答案在很大程度上取决于您选择的发布模型。

当使用像[DD4T](http://code.google.com/p/dynamic-delivery-4-tridion/)这样的框架的动态模型时，您只需一个开发环境就足够了。该环境中有一台 CMS 和一台 CD 服务器，所有内容都发布到代理数据库。CD 环境可以用作自动构建系统，开发人员纯粹在 localhost 网站上本地工作（从开发代理数据库获取数据），并且他们的更改在 VCS 中检查（基于该 VCS 可以进行自动构建完毕）。
这个解决方案可以只使用一个 CMS，因为在 CMS 端几乎没有开发任何代码（模板是标准化的，所有工作都在 CD 端完成）。

如果您使用静态或代理发布模型，它会变得更加复杂。然后我认为解决方案是确实按照 Nuno 和 Chris 的指示将 Dev 拆分为 Unit-Dev 和 Dev。该解决方案需要在 CMS 和 CD 端进行编码，因此每个开发人员都可以在拥有自己的本地 CMS 和 CD 环境中受益匪浅。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-12T19:02:01.753

与您的 Tridion 客户经理交谈并同意适合您想要的开发模型的许可证包。当然，他们想要最大化他们的收入，但计算的各种东西都是为了确保大客户相应地支付，而小客户则以反映他们获得的利益的价格获得他们能够负担得起的东西。事实上，建立一条以质量为重点的深思熟虑的开发街道正是确保良好的客户满意度和长期参与的事情。

好的 - 所以客户经理仍然需要遵循内部规则，但他们在与客户达成明智交易方面也有相当大的自主权。我并不是说这将永远有效，但它比盲目地假设他们将坚持以相同的方式计算每台服务器要好。

在技​​术方面 - 当然，尝试让本地开发人员设置和一个通用的主开发服务器 a-la Chris 的 5th。如今，您的通用开发环境可能应该被视为构建/集成服务器：团队保证所有测试都会运行的第一个地方。

CM 和 CD 开发的要求并没有太大的不同，尽管如果没有太多的 CM 开发，您可以从一个 CM 发布到多个开发人员目标。（这在某种程度上适用于 MVC-ish 方法，但它不是灵丹妙药。）

# java - 在 onCreate 之后如何将项目添加到 ActionBarSherlock？

> ID：11166758
> 
> 赞同：2
> 
> 时间：2012-06-23T04:05:57.733
> 
> 标签：java, android, android-actionbar, actionbarsherlock

好的，当我的应用程序启动时，它有两个选项卡，操作栏中有一个操作，当我切换到第二个选项卡时，我更改了布局，我想删除我在栏中的操作，并添加一个不同的操作，有什么简单的方法可以做到这一点？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-23T05:42:06.957

我让它工作了！

您所要做的就是在 onCreateOptionsMenu 中添加条件语句，然后在切换选项卡时简单地使菜单无效！希望这对某人有帮助！

有条件的：

```
 public boolean onCreateOptionsMenu(Menu menu) {
            if (getSupportActionBar().getSelectedNavigationIndex() == 1) {
                menu.add("Share")
                .setIcon(android.R.drawable.ic_menu_share)
                .setShowAsAction(MenuItem.SHOW_AS_ACTION_IF_ROOM | MenuItem.SHOW_AS_ACTION_WITH_TEXT);
            }
            if (getSupportActionBar().getSelectedNavigationIndex() == 0)) {
                menu.add("Settings")
            .setIcon(android.R.drawable.ic_menu_manage)
                .setShowAsAction(MenuItem.SHOW_AS_ACTION_IF_ROOM | MenuItem.SHOW_AS_ACTION_WITH_TEXT);      
            }

            return true;
        } 
```

并使无效：

```
 invalidateOptionsMenu(); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-27T22:21:54.647

我认为您的标签`Fragments`在`FragmentActivity`. 在这种情况下，您应该`setHasOptionsMenu(true)`在选项卡片段的`onCreate()`方法中。并覆盖`onCreateOptionsMenu`和`onOptionsItemSelected`片段。

其余的将为您完成（例如在切换选项卡后使 actionItems 无效等）

# asynchronous - Netty ServerBootstrap - 异步绑定？

> ID：11166759
> 
> 赞同：5
> 
> 时间：2012-06-23T04:06:03.610
> 
> 标签：asynchronous, jboss, bind, netty

首先，这是我在哪里阅读我现在所知道的关于这个问题的所有内容的参考：http: [//docs.jboss.org/netty/3.2/api/org/jboss/netty/bootstrap/ServerBootstrap.html#bind%28 %29](http://docs.jboss.org/netty/3.2/api/org/jboss/netty/bootstrap/ServerBootstrap.html#bind%28%29)

尽管文档没有明确指定，但它似乎`ServerBootstrap.bind`是同步的 - 因为它不返回 a `ChannelFuture`，而是返回 Channel。如果是这种情况，那么我看不到使用`ServerBootstrap`该类进行异步绑定的任何方法。我错过了什么还是我必须推出自己的解决方案？

此致

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-23T13:10:35.463

我最终推出了自己的引导程序实现，并添加了以下内容：

```
public ChannelFuture bindAsync(final SocketAddress localAddress)
{
    if (localAddress == null) {
        throw new NullPointerException("localAddress");
    }
    final BlockingQueue<ChannelFuture> futureQueue =
        new LinkedBlockingQueue<ChannelFuture>();
    ChannelHandler binder = new Binder(localAddress, futureQueue);
    ChannelHandler parentHandler = getParentHandler();
    ChannelPipeline bossPipeline = pipeline();
    bossPipeline.addLast("binder", binder);
    if (parentHandler != null) {
        bossPipeline.addLast("userHandler", parentHandler);
    }
    getFactory().newChannel(bossPipeline);
    ChannelFuture future = null;
    boolean interrupted = false;
    do {
        try {
            future = futureQueue.poll(Integer.MAX_VALUE, TimeUnit.SECONDS);
        } catch (InterruptedException e) {
            interrupted = true;
        }
    } while (future == null);
    if (interrupted) {
        Thread.currentThread().interrupt();
    }
    return future;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-08-11T20:09:47.813

在 Netty 3.6 中有一个异步绑定。这是javadoc： http: [//netty.io/3.6/api/org/jboss/netty/bootstrap/ServerBootstrap.html#bindAsync()](http://netty.io/3.6/api/org/jboss/netty/bootstrap/ServerBootstrap.html#bindAsync())

# c++ - 如何改进 cvMat 中的像素排序？

> ID：11166760
> 
> 赞同：2
> 
> 时间：2012-06-23T04:06:05.220
> 
> 标签：c++, sorting, opencv

我正在尝试将图像的像素值（例如 80x20）从最低到最高排序。

下面是一些代码：

```
bool sortPixel(int first, int second)
{
    return (first < second);
}

    vector<int>vect_sortPixel;
    for(int y=0; y<height; y++)
    {
        for(int x=0; x<width; x++)
        {
            vect_sortPixel.push_back(cvGetReal2D(srcImg, y, x));
            sort(vect_sortPixel.begin(), vect_sortPixel.end(), sortPixel);
        }
    } 
```

但是计算需要相当长的时间。有什么减少处理时间的建议吗？谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-23T05:10:09.247

不要使用 getReal2D。这很慢。

将图像转换为 cv::Mat 或 Mat。使用它的数据指针来获取像素值。Mat.data() 将为您提供指向原始矩阵的指针。用那个。

就排序而言，我建议您首先制作一个包含所有像素的数组，然后使用合并排序对其进行排序（时间复杂度 O(n log n)）

```
#include<opencv2/highgui/highgui.hpp>
#include<stdio.h>
using namespace cv;
using namespace std;
int main()
{
    Mat img = imread("filename.jpg",CV_LOAD_IMAGE_COLOR);
    unsigned char *input = (unsigned char*)(img.data);
    int i,j,r,g,b;
    for(int i = 0;i < img.cols;i++){
            for(int j = 0;j < img.rows;j++){
                b = input[img.cols * j + i] ;
                g = input[img.cols * j+ i + 1];
                r = input[img.cols *j + i +2];
            }
        }
    return 0;
} 
```

使用它，您可以从主矩阵访问像素值。

**警告：这不是你比较它的方式。我建议通过使用这样的东西，您可以访问像素值。**

Mat.data() 为您提供指向原始矩阵的指针。该矩阵是具有所有给定像素值的一维矩阵。

图像 => (x,y,z),(x1,y1,z1) 等。

Mat(原始矩阵) => x,y,z,x1,y1,z1,...

如果您对如何从 Mat 中提取数据仍有疑问，请访问此链接[OpenCV get pixel channel value from Mat image](https://stackoverflow.com/questions/7899108/opencv-get-pixel-information-from-mat-image)

这是关于合并排序的链接[http://www.cplusplus.happycodings.com/Algorithms/code17.html](http://www.cplusplus.happycodings.com/Algorithms/code17.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-23T07:05:19.050

您的代码中存在一些问题：

*   正如[Froyo](https://stackoverflow.com/users/891373/froyo)已经说过的那样，您使用`cvGetReal2D`它实际上并不是很快。您必须将您的转换`cvMat`为`cv::Mat`. 为此，有[cv::Mat 构造函数](http://opencv.willowgarage.com/documentation/cpp/basic_structures.html#mat)：

> ```
> // converts old-style CvMat to the new matrix; the data is not copied by default
> Mat(const CvMat* m, bool copyData=false); 
> ```

[在此之后使用此 SO 问题](https://stackoverflow.com/questions/7899108/opencv-get-pixel-information-from-mat-image)中提到的直接像素访问。

*   另一个问题是你使用`push_back`which 实际上也不是很快。你知道数组的大小，为什么不在开始时分配所需的内存呢？像这样：

`vector<int> vect_sortPixel(mat.cols*mat.rows);`

而不仅仅是`vect_sortPixel[i]`用来获得所需的像素。

*   为什么要`sort`在循环中调用？当数组已经创建时，您必须在循环之后调用它！默认[STL 的排序](http://www.cplusplus.com/reference/algorithm/sort/)应该工作得很快：

> 复杂
> 
> 平均大约 N*logN 比较（其中 N 是最后一个）。在最坏的情况下，最多 N^2，具体取决于库实现使用的特定排序算法。

# python - Python Bottle 模板问题：AttributeError("'dict' object has no attribute 'city'",)

> ID：11166763
> 
> 赞同：2
> 
> 时间：2012-06-23T04:06:48.803
> 
> 标签：python, mongodb, bottle

作为一个学习项目，我将 MongoDB 与 Bottle 一起用于 Web 服务。我想要做的是从 MongoDB 中获取结果并将它们显示在模板中。这是我想要的模板的输出：

```
output.tpl
<html><body>
%for record in records:
   <li>{{record.city}} {{record.date}}
%end
</body></html> 
```

我可以毫无问题地提取数据：

```
result = db.records.find(query).limit(3)
return template('records_template', records=result) 
```

但这根本没有输出 - 一些调试告诉我结果是某种游标：

```
<pymongo.cursor.Cursor object at 0x1560dd0> 
```

所以我试图把它转换成模板想要的东西：

```
result = db.records.find(query).limit(3)
viewmodel=[]
for row in result:
  l = dict()
  for column in row:
    l[str(column)]=row[column]
  viewmodel.append(l)
return template('records_template', records=viewmodel) 
```

调试显示我的视图数据看起来不错：

```
[{'_id': ObjectId('4fe3dfbc62933a0338000001'),
  'city': u'CityName',
  'date': u'Thursday June 21, 2012'},
 {'_id': ObjectId('4fe3dfbd62933a0338000088')
  'city': u'CityName',
  'date': u'Thursday June 21, 2012'},
 {'_id': ObjectId('4fe3dfbd62933a0338000089')
  'city': u'CityName',
  'date': u'Thursday June 21, 2012'}] 
```

但这是我得到的回应。任何想法为什么？

> AttributeError("'dict' 对象没有属性 'city'",)

编辑：我添加了关于 l[str(column)]=row[column] 的那一点，以将字典键转换为非 unicode 字符串，以防万一出现问题，但这似乎并不重要。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-06-23T04:14:26.663

您需要使用字典语法来查找属性：

```
{{record['city']}} {{record['date']}} 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-12-31T10:12:58.737

```
result = db.records.find(query).limit(3)
viewmodel=[]
for row in result:
  l = dict()
  for column in row:
    l[str(column)]=row[column]
  viewmodel.append(l)
return template('records_template', records=viewmodel) 
```

可以概括为：

```
result = db.records.find(query).limit(3)
return template('records_template', records=list(result)) 
```

蟒蛇的美丽...

# javascript - Rails 3.x Assets Pipeline Facebox jQuery 插件（如何设置）

> ID：11166765
> 
> 赞同：0
> 
> 时间：2012-06-23T04:07:04.513
> 
> 标签：javascript, jquery, ruby-on-rails-3, asset-pipeline, facebox

我整晚都在用头撞墙，试图弄清楚为什么 jQuery Facebox 插件在我的 Rails 应用程序中不起作用。这是我得到的错误，从 doc ready 中调用它：

```
$.facebox("<a href='#'>hello</a>"); 
```

我觉得这与资产管道有关，但不确定。这就是我设置所需文件的方式：

```
vendor/assets/images/facebox/
./loading.gif
./closelabel.png

vender/assets/javascripts/facebox/
./facebox.js

vender/assets/stylesheets/facebox/
./facebox.css 
```

然后在我的**application.css**

```
...
*= require_self
 *= require_tree .
 *= require_tree ../../../vendor/assets/stylesheets/.
... 
```

然后在我的**application.js**

```
...
//= require jquery
//= require jquery_ujs
//= require_tree ../../../vendor/assets/javascripts/.
//= require_tree .
... 
```

抛出这个 javascript 错误：

```
TypeError: Object function ( selector, context ) {// The jQuery object is actually just the init constructor 'enhanced'return new jQuery.fn.init( selector, context );} has no method 'facebox' 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-23T04:07:05.107

只需使用[facebox-rails gem](https://github.com/bai/facebox-rails)，您的生活就会大大改善。

由于这花了我 2 小时的挫败感试图弄清楚，我想我会发布我的解决方案，这花了我 2 分钟的时间来设置。

我也非常喜欢将其放入 gem 中的解决方案，因为您不必经历将所有文件拆分并确保将它们放在正确的位置并配置路径的痛苦。因为我在我所有的项目中都使用了这个弹出窗口，所以它真的出现在 andy 中。说真的，感谢制作这颗宝石的人！

# java - 如何识别根子节点？

> ID：11166768
> 
> 赞同：1
> 
> 时间：2012-06-23T04:07:52.793
> 
> 标签：java, swing, jtree

如何识别这个节点是java swing中Jtree中根节点的子节点。前任：

```
Root
  |> Parent1
       |> Child1
  |> Parent2
       |> Child 2
       |> Child 3 
```

在这里，我将选择我想知道的任何一个节点是根节点的子节点。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-23T04:12:44.403

查看[TreeNode API](http://docs.oracle.com/javase/7/docs/api/javax/swing/tree/TreeNode.html)，您会发现`getParent()`将获取节点的父节点。如果父级为空 - 你在根。

您还可以调用`getRoot()`将返回根节点的 JTree 模型。查看[TreeModel API](http://docs.oracle.com/javase/7/docs/api/javax/swing/tree/TreeModel.html)了解更多信息。

# android - 在 Android 中跨“清除数据”保留数据库？

> ID：11166772
> 
> 赞同：3
> 
> 时间：2012-06-23T04:08:39.900
> 
> 标签：android, database

我正在开发一个需要数据库来存储应用程序值的 android 应用程序。

我的要求是，*当应用程序中的清除数据选项完成时，我需要不清除数据库*。

任何人请建议我可以存储数据库的位置，以便在使用清除数据选项时不会被删除。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-23T04:15:47.107

我假设您的意思是“首选项”->“应用程序”菜单中的“清除数据”。

我建议您查看阻止这种情况的原因。

点击“清除数据”将允许用户在新安装时重置应用程序，这实际上意味着从您没有考虑过的可能的应用程序错误中恢复。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-23T04:27:52.013

存储在 SD 卡上对您有用吗？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-23T04:14:36.697

您可以将数据存储到mysql数据库并使用服务器php从android获取数据试试这个[链接](http://www.coderzheaven.com/2011/04/08/android-phpmysql-connection/)

# php - 选择 count() 等于特定值的所有用户

> ID：11166774
> 
> 赞同：8
> 
> 时间：2012-06-23T04:09:19.027
> 
> 标签：php, mysql, sql

```
 $sql = "SELECT * FROM cars WHERE COUNT(brand)='4'";
   $results = mysql_query($sql);
   $rows = mysql_fetch_array($results);
   print_r($rows); 
```

表汽车有这些列：

```
id brand     price
0  bmw
1  corvette
2  mercedes
3  bmw
4  bmw
5  toyota
6  bmw
7  honda
8  lotus 
```

这就是我想要做的，从表中返回`'cars'`每个拥有 4 种不同汽车的品牌。在此示例中，bmw 有 4 4 辆不同的汽车，即 4 个不同的行具有相同的品牌名称。所以我试图呼应库存总数为 4 的品牌名称。我希望我说得通，任何帮助将不胜感激。

编辑：我尝试 SELECT * FROM cars LEFT JOIN users ON cars.user_id=users.user_id HAVING count(user_id) = 4 这没有任何想法？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-06-23T04:12:48.820

```
SELECT brand FROM cars GROUP BY brand HAVING COUNT(brand) = 4 
```

***为您编辑：***

```
SELECT t1.brand, t2.email 
FROM cars t1  
LEFT JOIN users t2 ON t1.user_id = t2.user_id 
GROUP BY t1.brand HAVING COUNT(t1.brand) = 4 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-23T04:11:29.693

我认为在查询中像你有你需要使用有

```
SELECT * FROM cars HAVING COUNT(brand)=4; 
```

并根据您分组的内容进行分组

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-23T04:22:03.700

您想一次对多行执行聚合函数 (COUNT)。几乎任何时候您想要执行多个计数，您都应该考虑 GROUP BY。

```
$sql = "SELECT brand FROM cars GROUP BY brand HAVING COUNT(*) >= 4"; 
```

如果您`SELECT *`在此查询中执行此操作，您将获得每个品牌的 1 个随机行（可能是 ID 较低的那个）。

HAVING 子句将充当每个组的 WHERE。

# c++ - 如何修复以下代码中的转换错误？

> ID：11166777
> 
> 赞同：0
> 
> 时间：2012-06-23T04:10:42.637
> 
> 标签：c++, templates, type-conversion, copy-constructor

我有一个模板类：

```
template<class T>
class A{
  T a, b;
  public:
  A(A<T> const & o) : a(o.a), b(o.b){}
  A(T const & _a, T const & _b) : a(_a), b(_b){}
};

A<double> d(1.2, 4.5);
A<float> f = d; //error: conversion from A<double> to non-scalar type A<float> requested 
```

如何为我的班级定义转换函数？我的编译器是 g++ 4.7.0

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-23T04:49:26.570

您可以制作一个模板构造函数：

```
template<class T>
class A{
    T a, b;
public:

    template<class U>
    A(A<U> const & rhs) : a(rhs.a), b(rhs.b) {}

    A(T const & _a, T const & _b) : a(_a), b(_b){}
}; 
```

然后，您应该能够将任何类转换`A<U>`为任何类`A<T>`，只要`U`可转换为`T`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-23T04:27:26.930

你试图做的不是一个好主意。
但是，要克服编译器错误，您可以专门化该类 -

```
template <>
class A<float>
{
    public:
    A(A<double> const & o) {}
}; 
```

# asp.net - 嵌套的 UpdatePanel 导致父级回发？

> ID：11166779
> 
> 赞同：12
> 
> 时间：2012-06-23T04:11:01.333
> 
> 标签：asp.net, asp.net-ajax, nested, updatepanel

我的印象是嵌套 UpdatePanel 中的控件将导致顶级 UpdatePanel 刷新（从而刷新两个 UpdatePanel），因为该控件上的任何事件都充当“隐式”触发器。那是对的吗？

我一直在尝试连接这样的东西-

```
UserControl

   Parent UpdatePanel

   "Show" button

      ASP:Panel

         Dynamically added UserControls, each with UpdatePanels 
```

单击 Show 按钮时，ASP:Panel 变为可见并开始根据某些后端逻辑动态地将 UserControls 添加到自身。

每个动态添加的控件（以下称为 UserControls）都有自己的支持 Atlas 的按钮和链接，因此它们也有 UpdatePanel。目前，当我单击其中一个 UserControls 中的链接时，ASP:Panel 的全部内容都会消失，就好像它正在重新渲染一样。我所有动态添加的控件都消失了，并且它们的点击事件都没有被调试器捕获。

我假设这里发生的是驻留在嵌套更新面板中的控件导致父 UpdatePanel 回发，因为它们正在触发“隐式”触发器。有没有办法让我的 UserControls 自主操作而不弄乱包含它们的 ASP:Panel？

如果不是，我应该在这里采取什么策略？如果每次在一个（可能很多）UserControls 上发生事件时我都必须重新渲染整个 ASP:Panel，这意味着我将不得不重新创建 UserControls，这需要花费一些精力来创建。我还必须保留某种视图状态来重新创建它们。我对 ASP.NET 有点陌生，这听起来很吓人。如果可以避免的话，我宁愿永远不要刷新顶层 UserControl 和 ASP:Panel，并让每个动态添加的 UserControl 触发并异步处理它们自己的事件。

编辑：我没有动态添加控件，而是将它们添加到标记中（不是一个糟糕的解决方案）。所以摆脱了控件消失的问题，因为现在控件不是动态添加而是存在于标记中。但仍然是父 UpdatePanel 发布对性能造成很大影响，因为所有 UserControls 都被发布而不是一个。如何只进行一次 UserControl 回发？另外，我想知道如何摆脱动态添加控件消失的问题？

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-06-23T05:06:45.927

首先，请记住：UpdatePanel*不会*改变页面的生命周期。

**所有的控制树（包括更新面板）都*必须*像正常的回发生命周期一样重建。¹ ²** UpdatePanel 确保只返回*一部分*呈现的 (HTML) 视图。删除所有 UpdatePanel*应该*会导致*相同的行为*，但完整的回发除外。例如，只有表示嵌套 UpdatePanel 的 HTML（可能是因为数据已更改）可能会在 XHR 响应中发回。

要获得“真正的”AJAX，请考虑页面方法。或者，DevExpress（也许还有 Telerik 和其他人？）提供他们自己的“回调面板”形式，类似于 UpdatePanel，但可以绕过部分生命周期（因此通常不完全支持 ViewState 模型或者可能会介绍他们自己的怪癖）。

* * *

虽然不理解上述内容是控件“消失”的最可能原因，但这是我的规则：**不要让 [Nested] UpdatePanels “自动”工作。**

*将*遇到具有动态控件和嵌套 UpdatePanel 的边缘情况。可能有一种很好的方法来处理这个问题，但我在多次不同的尝试中都失败了。

相反，对于*每个*更新面板，运行：

```
UpdateMode="Conditional"
ChildrenAsTriggers="False" 
```

使用“条件”更新模式，确保根据需要手动指定触发控件或调用`panel.Update()`（尽管这与控件硬连线）。根据需要`ChildrenAsTriggers="True"`也可以工作。最重要的是 UpdateMode*不是*默认的“始终”。

切换到这种方法后，我对嵌套的 UpdatePanel没有任何问题——嗯，*几乎没有问题。*

快乐编码！

* * *

¹如果页面在部分渲染（在 ScriptManager 中）被禁用（例如所有请求都是完整的回发）的情况下不能正确渲染，那么没有理由期望/相信它会与 UpdatePanels 一起正常工作。

²有时，必须“欺骗”控制树中昂贵的重新计算，以获得不会重新渲染的控件。但是，我会考虑这些仅在性能分析表明存在特定需求时才应执行的高级案例。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2016-07-06T01:08:57.653

`Gridview`我在繁重的 ajax控件和带有多个`UpdatePanels`、一些嵌套、一些没有的 HTML 页面上遇到了类似的问题。

我花了超过 3 周的反复试验、阅读、测试、调试和原型设计，最终解决了所有回发和部分回发。

但是我确实注意到了一种对我有用的模式。

与上面的@user 响应一样，请确保您的 UpdatePanel 设置为 Conditional 并且仅针对`asp:PostBackTrigger`您希望页面执行完整回发的最终或决定性控件。我总是`asp:AsyncPostBackTrigger`尽可能使用。

因此，例如，如果您在 GridView 中使用 UpdatePanel，并且希望在 gridview 行的单元格中弹出一个窗口，那么您需要使用嵌套的 UpdatePanel。

IE

```
 <asp:TemplateField HeaderText="Actions &amp; Communications">
    <ItemTemplate>
        <asp:UpdatePanel ID="upAction1" runat="server" UpdateMode="Conditional">
            <Triggers>
                <asp:AsyncPostBackTrigger ControlID="btnActionOK" />
            </Triggers>
            <ContentTemplate>
...
...
                            <ajaxToolkit:ModalPopupExtender ID="ajaxMPE" runat="server"
                                BackgroundCssClass="modalBackground"
                                PopupControlID="upAction2"
                                TargetControlID="btnADDaction">
                            </ajaxToolkit:ModalPopupExtender>
                            <asp:UpdatePanel ID="upAction2" runat="server" UpdateMode="Conditional">
                                <ContentTemplate>
                                    <asp:Panel ID="pnlACTION" runat="server" CssClass="pnlACTION">
                                        <div id="divHDR">
                                            <asp:Label ID="lblActionHdr" runat="server">** header **</asp:Label>
                                        </div>
                                        <div id="divBOD">
                                            <table style="width: 98%; text-align:left">
                                                <tr>
                                                    <td colspan="2">
                                                    Please enter action item:<br />
                                                        <asp:TextBox ID="txtAction" runat="server" ValidationGroup="vgAction" TextMode="MultiLine" Rows="3" Width="98%"></asp:TextBox>
                                                        <asp:RequiredFieldValidator ID="rfvAction" runat="server" ControlToValidate="txtAction" ValidationGroup="vgAction"
                                                            ErrorMessage="* Required" SetFocusOnError="True"></asp:RequiredFieldValidator></td>
                                                </tr>
                                                <tr>
                                                    <td colspan="2">
                                                    Select staff assigned to this task:<br />
                                                        <asp:DropDownList ID="ddlActionStaff" runat="server" AppendDataBoundItems="true" ValidationGroup="vgAction" />
                                                        <asp:RequiredFieldValidator ID="rfvStaff" runat="server" ControlToValidate="ddlActionStaff" InitialValue="0" ValidationGroup="vgAction"
                                                            ErrorMessage="* Required" SetFocusOnError="True" Width="98%"></asp:RequiredFieldValidator></td>
                                                </tr>
                                                <tr>
                                                    <td colspan="2" style="text-align: center">
                                                            <asp:Button ID="btnActionOK" runat="server" Text="OK" OnClick="btnActionOK_Click" ValidationGroup="vgAction" CausesValidation="false" />
                                                            <asp:Button ID="btnActionCANCEL" runat="server" Text="CANCEL" OnClick="btnActionCANCEL_Click" ValidationGroup="vgAction" CausesValidation="false" />
                                                    </td>
                                                </tr>
                                            </table>
                                        </div>
                                    </asp:Panel>
                                </ContentTemplate>
                            </asp:UpdatePanel>
                        </td>
                    </tr>
                </table>
                <asp:SqlDataSource ID="sdsTETactions" runat="server" ConnectionString="<%$ ConnectionStrings:ATCNTV1ConnectionString %>"
...
...
                </asp:SqlDataSource>
            </ContentTemplate>
        </asp:UpdatePanel>
    </ItemTemplate>
    <ItemStyle HorizontalAlign="Center" />
</asp:TemplateField> 
```

请注意这里的几件事：

*   ModalPopupExtender 不引用 Ok 和 Cancel 按钮。这是因为我希望他们触发对服务器的部分回发（代码隐藏）
*   嵌套的 UpdatePanel (upAction2) 纯粹是为了强制仅在该面板上进行部分回发 (pnlAction)！因此，如果用户未在必填字段验证器中提供数据，这将强制数据验证触发器工作并保持面板打开
*   主 UpdatePanel (upAction1) 控制整个批次，并仅将所有回发保留在该面板中，并且不影响 gridview（未完全显示）。

[这里](http://www.asp.net/web-forms/overview/older-versions-getting-started/aspnet-ajax/understanding-asp-net-ajax-updatepanel-triggers)有一篇很棒的文章，它更好地解释了它。

我希望这可以帮助别人

# ruby-on-rails - 您可以使用 django 为客户端提供动态呈现的 javascript

> ID：11166781
> 
> 赞同：1
> 
> 时间：2012-06-23T04:11:25.820
> 
> 标签：ruby-on-rails, django

我正在决定是否将 rails 或 django 用于小型网络应用程序。

我喜欢 rails 的其中一个功能是您可以渲染 .js.erb 文件，然后将它们作为响应提供给客户端，浏览器将执行脚本

django 中是否有等价的东西？如果我将响应的 MIME 类型更改为文本/脚本，浏览器会意识到它是一个脚本并运行它吗？另外，我可以使用 django 模板语言像 rails 和 erb 一样渲染脚本吗？谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-23T07:20:43.627

您可以通过将 js 文件视为普通的“Django 模板”并使用适当的 MIME 类型在 Django 中呈现 js 文件，以便浏览器正确检测文件。

# xml - Xslt 1.0 - 查找最后一次出现并在之前获取字符串

> ID：11166784
> 
> 赞同：7
> 
> 时间：2012-06-23T04:11:38.773
> 
> 标签：xml, xslt

我的问题类似于[查找最后一次出现](https://stackoverflow.com/questions/3141847/xslt-finding-last-occurance-in-a-string)

但是我需要在最后一次出现分隔符之前输出整个字符串。所以示例中的输出应该是`ABC_12345`

必须是 XSLT 1.0

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-23T06:24:00.687

看看`substring-before-last`我为另一个问题实现的模板。

[删除 XSLT 字符串中的最后一个字符](https://stackoverflow.com/questions/1119449/removing-the-last-characters-in-an-xslt-string/1119666#1119666)

这似乎正是您所需要的。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-23T14:57:02.160

**这本质上是相同的解决方案，但为了在结果中保留中间分隔符，必须添加以下三行**：

```
<xsl:if test="contains(substring-after($pText, $pDelim), $pDelim)">
  <xsl:value-of select="$pDelim"/>
</xsl:if> 
```

**现在整个转变变成：**

```
<xsl:stylesheet version="1.0"
 xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
     <xsl:output method="text"/>

      <xsl:variable name="s" select="'ABC_12345_Q-10'"/>
      <xsl:template match="/">
        <xsl:call-template name="stripLast">
         <xsl:with-param name="pText" select="$s"/>
        </xsl:call-template>
      </xsl:template>

      <xsl:template name="stripLast">
        <xsl:param name="pText"/>
        <xsl:param name="pDelim" select="'_'"/>

         <xsl:if test="contains($pText, $pDelim)">
           <xsl:value-of select="substring-before($pText, $pDelim)"/>
           <xsl:if test="contains(substring-after($pText, $pDelim), $pDelim)">
             <xsl:value-of select="$pDelim"/>
           </xsl:if>
           <xsl:call-template name="stripLast">
             <xsl:with-param name="pText" select=
              "substring-after($pText, $pDelim)"/>
             <xsl:with-param name="pDelim" select="$pDelim"/>
           </xsl:call-template>
         </xsl:if>
       </xsl:template>
</xsl:stylesheet> 
```

**当将此转换应用于任何 XML 文档（未使用）时，将产生所需的正确结果**：

```
ABC_12345 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-23T04:50:49.113

```
 <xsl:variable name="s">string_to_cut_no_matter_how_many_underscores</xsl:variable>
 <xsl:variable name="s-tokenized" select="tokenize($s, '_')"/>
 <xsl:variable name="s_final" select="string-join(remove($s-tokenized, count($s-tokenized)),'_')"/> 
```

作为一个函数：

```
<xsl:function name="mynamespace:before-last-delimeter">
<xsl:param name="s" />
<xsl:param name="d" />

<xsl:variable name="s-tokenized" select="tokenize($s, $d)"/>

<xsl:value-of select="string-join(remove($s-tokenized, count($s-tokenized)),$d)"/>

</xsl:function>

<xsl:variable name="output" select="mynamespace:before-last-delimeter('I-only-want-before-the-last-dash','-')"/> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-23T06:26:38.760

好吧，XSLT 1.0 更具挑战性：

拿了两个模板

2.after-delim（输出下一个值，如果另一个 delim 则调用自身） 3.before-last-delim（启动进程，）

```
 <xsl:template name="after-delim">
    <xsl:param name="s"/>
    <xsl:param name="d"/>
     <xsl:choose>
       <xsl:when test="contains($s,$d)">
          <xsl:value-of select="concat($d,substring-before($s,$d))"/>
          <xsl:call-template name="after-delim">
            <xsl:with-param name="s" select="substring-after($s,$d)"/>
            <xsl:with-param name="d" select="$d"/>
          </xsl:call-template>
       </xsl:when>
       <xsl:otherwise>
       </xsl:otherwise>
     </xsl:choose>
    </xsl:template>

    <xsl:template name="before-last-delim">
    <xsl:param name="s"/>
    <xsl:param name="d"/>
    <xsl:choose>
       <xsl:when test="contains($s,$d)">
          <xsl:value-of select="substring-before($s,$d)"/>
          <xsl:call-template name="after-delim">
            <xsl:with-param name="s" select="substring-after($s,$d)"/>
            <xsl:with-param name="d" select="$d"/>
          </xsl:call-template>
       </xsl:when>
       <xsl:otherwise>
         <xsl:value-of select="$s"/>
       </xsl:otherwise>
     </xsl:choose>

    </xsl:template>

 <xsl:call-template name="before-last-delim">

   <xsl:with-param name="s" select="'string_to_cut_with_delim'"/>
   <xsl:with-param name="d" select="'_'"/>

 </xsl:call-template> 
```

# google-custom-search - 自定义 Google 自定义搜索

> ID：11166791
> 
> 赞同：1
> 
> 时间：2012-06-23T04:13:07.243
> 
> 标签：google-custom-search

有谁知道如何跨越谷歌自定义搜索中提供的所有链接的搜索结果集。例如，如果我提供了喜欢`site 1,site 2....site n`搜索的网站，那么我想将所有这些单独网站的前五个结果作为 JSON。有没有办法做到这一点。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-07-29T04:20:08.420

我知道这可能有点晚了，但也许可以帮助别人。

这将通过 GCSE 的 REST API 返回 2 个结果。

[https://www.googleapis.com/customsearch/v1?key=YOUR-KEY_HERE&cx=CX_HERE&fields=kind,items&filter=1&num=2&prettyPrint=true&q=querystring](https://www.googleapis.com/customsearch/v1?key=YOUR-KEY_HERE&cx=CX_HERE&fields=kind,items&filter=1&num=2&prettyPrint=true&q=querystring)

它是您正在寻找的 num=2 部分...

# heroku - heroku：java.lang.IllegalStateException：无法处理（64）'@'

> ID：11166794
> 
> 赞同：0
> 
> 时间：2012-06-23T04:13:40.240
> 
> 标签：heroku

我正在尝试将 java 应用程序部署到 Heroku。

它使用环境变量（例如 postgres://foo:foo@heroku.com/hellodb）在 spring applicationcontext.xml [https://devcenter.heroku.com/articles/spring-mvc-hibernate#modify_database_configuration中配置数据库](https://devcenter.heroku.com/articles/spring-mvc-hibernate#modify_database_configuration)

我按照文档，配置它，并设置DATABASE_URL使用*set DATABASE_URL=postgres://postgres:huang@heroku.com/yan*（windows）。

但是当我在本地运行它时，我得到一个错误： *在ServletContext资源[/WEB-INF/spring/applicationContext.xml]中定义名称为'dataSource'的bean：初始化bean失败; 嵌套异常是 o rg.springframework.beans.factory.BeanExpressionException: Expression parsing fai led; 嵌套异常是 java.lang.IllegalStateException: 无法处理 (64) '@'*

我的春天 xml 是这样的：

```
 `<bean class="java.net.URI" id="dbUrl">
    <constructor-arg value="#{systemEnvironment['DATABASE_URL']}" />
</bean>
<bean id="dataSource" class="org.apache.commons.dbcp.BasicDataSource">
    <property name="url"
        value="#{ 'jdbc:postgresql://' + @dbUrl.getHost() + @dbUrl.getPath() }" />
    <property name="username" value="#{ @dbUrl.getUserInfo().split(':')[0] }" />
    <property name="password" value="#{ @dbUrl.getUserInfo().split(':')[1] }" />
</bean>` 
```

似乎弹簧容器无法处理'@'符号，但我真的不知道如何处理它！我在谷歌搜索，但我得到了任何东西。

有谁知道如何处理它？谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-25T05:41:58.157

是的，我修好了！！！

官方文档有错误！！！

我只是删除“@”符号，它的工作原理

这个spring xml是这样的：

```
<bean class="java.net.URI" id="dbUrl">
    <constructor-arg value="#{systemEnvironment['DATABASE_URL']}" />
</bean>
<bean id="dataSource" class="org.apache.commons.dbcp.BasicDataSource">
   <property name="url"
       value="#{ 'jdbc:postgresql://' + dbUrl.getHost() + dbUrl.getPath() }" />
   <property name="username" value="#{ dbUrl.getUserInfo().split(':')[0] }" />
   <property name="password" value="#{ dbUrl.getUserInfo().split(':')[1] }" />
</bean> 
```

我会写信报告这个错误

# asp.net-mvc-3 - 如何在同一个视图上使用 webgrid 和 html 辅助方法

> ID：11166796
> 
> 赞同：0
> 
> 时间：2012-06-23T04:14:11.007
> 
> 标签：asp.net-mvc-3

在 asp.net mvc3 项目中，iam 使用 ienumerable 视图在 webgrid 中显示对象的集合。在同一个视图中，我使用 html 辅助方法来创建对象。我在帮助方法“System.collection.generic.ienumerable<...> 不包含 <...> 的定义”中遇到错误

```
@model IEnumerable<TRADEBLOTTER_MVCPOC.Models.Trader />
@{
   ViewBag.Title = "NewTrader";
}

@{
      var grid = new WebGrid(source: Model, 
                             defaultSort: "TradeID",
                             rowsPerPage: 5, fieldNamePrefix: "wg_",
                             canPage: true, canSort: true,
                             pageFieldName: "pg", sortFieldName: "srt" );  
}

<h2>NewTrader</h2>
@using (Html.BeginForm(FormMethod.Post))
{
@Html.ValidationSummary()
<table cellpadding="0" cellspacing="0" width="100%">
   <tr>
      <td>
         @Html.LabelFor(t=>t.TraderName,"Trader Name")
      </td>
      <td>
         @Html.TextBoxFor(t=>t.TraderName)
      </td>
   </tr>
   <tr>
      <td>
      </td>
      <td>
         <input type="submit" value="Submit Trader" />
      </td>
   </tr>
</table>
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-23T05:25:58.827

我认为通常您会在变量上方的模型中使用类似的东西

```
[DisplayName("Trader Name")]
public string TraderName { get; set; } 
```

然后你的观点

```
<h2>NewTrader</h2>
@using (Html.BeginForm(FormMethod.Post))
{
@Html.ValidationSummary()
<table cellpadding="0" cellspacing="0" width="100%">
   <tr>
      <td>
         @Html.LabelFor(t=>t.TraderName)
      </td>
      <td>
         @Html.TextBoxFor(t=>t.TraderName)
      </td>
   </tr>
   <tr>
      <td>
      </td>
      <td>
         <input type="submit" value="Submit Trader" />
      </td>
   </tr>
</table>
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-05T13:26:23.290

我的建议：对网格使用部分页面（使用模型的 IEnumerable 版本），对单个变量使用另一个部分页面（使用单个模型）。

如果网格仅显示信息，而不是编辑任何内容，则将网格绑定到模型中定义的方法 - 那么视图不需要具有 IEnumberable 模型。

# c# - MVC3 控制器如何检索 HTTPPOST 参数？

> ID：11166800
> 
> 赞同：2
> 
> 时间：2012-06-23T04:14:49.333
> 
> 标签：c#, asp.net, asp.net-mvc, asp.net-mvc-3, razor

我不太明白这是如何工作的。

从我的实体对象传递参数工作正常。但是当我创建新字段时，只检索到第一个字段。

模型用户类：

```
public class User {

    [Key]
    public long Uid { get; set; }

    [Required]
    [StringLength(50, ErrorMessage = "The {0} must be at least {2} characters long.", MinimumLength = 4)]
    [DataType(DataType.EmailAddress)]
    [Display(Name = "Email:")]
    public string Email { get; set; }

    [Required]
    [StringLength(20, ErrorMessage = "The {0} must be at least {2} characters long.", MinimumLength = 4)]
    [Display(Name = "User Name:")]
    public string Username { get; set; }

    public string Password { get; set; }

    public byte Role { get; set; }

    public DateTime Created { get; set; }
} 
```

CSHTML：

```
@using (Html.BeginForm( null,
                    null,
                    FormMethod.Post,
                    new { id = "regform" })
    ) {
@Html.ValidationSummary(true)
<fieldset>
    <legend>Register</legend>

    <div class="editor-label">
       @Html.LabelFor(model => model.Email)
    </div>
    <div class="editor-field">
        @Html.EditorFor(model => model.Email)
        @Html.ValidationMessageFor(model => model.Email)
    </div>

    <div class="editor-label">
        @Html.LabelFor(model => model.Username)
    </div>
    <div class="editor-field">
        @Html.EditorFor(model => model.Username)
        @Html.ValidationMessageFor(model => model.Username)
    </div>

    <div class="editor-label">
        Password:
    </div>
    <div class="editor-field">
        @Html.Password("pwd")
    </div>

    <div class="editor-label">
        Confirm Password:
    </div>
    <div class="editor-field">
        @Html.Password("confirm")
    </div>

    <p>
        <input type="submit" value="Register" />
    </p>
</fieldset>
} 
```

控制器：

```
 [HttpPost]
    public ActionResult Register(User user, string pwd, string confirm) {
        user.Username = confirm;
        user.Created = DateTime.Now;
        user.Role = 255;
        user.Password = EncryptPassword.Password(pwd);

        if (ModelState.IsValid && pwd == confirm) {
            db.Users.Add(user);
            db.SaveChanges();
            return RedirectToAction("Index");
        }

        return View(user);
    } 
```

我感到困惑的地方是`pwd`很好。`confirm`另一方面依然存在`null`。我最初的想法是它是按顺序调用的，`confirm`在模型中是简单的`conPwd`。当这不起作用时，我将其名称更改为`confirm`. 它仍然无法正常工作，我找不到任何解释如何将多个参数传递给控制器​​的东西。

编辑：更新了我的代码。信不信由你，仅此一项就花费了我一天的大部分时间来写作，因为我一直在努力了解自己在做什么。当您同时学习 Entities、LINQ、MVC、ASP.NET 和 Razor 时，有很多东西需要学习。基本 C# 是我了解这一点的唯一部分。:)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-23T04:23:13.843

您需要一个强类型视图，`RegisterModel`然后使用 a`Html.BeginForm`将数据发布到控制器。

**模型**

```
// This is the Model that you will use to register users
public class RegisterModel
{
    [Required]
    [Display(Name = "User name")]
    public string UserName { get; set; }

    [Required]
    [DataType(DataType.EmailAddress)]
    [Display(Name = "Email address")]
    public string Email { get; set; }

    [Required]
    [StringLength(100, ErrorMessage = "The {0} must be at least {2} characters long.", MinimumLength = 6)]
    [DataType(DataType.Password)]
    [Display(Name = "Password")]
    public string Password { get; set; }

    [DataType(DataType.Password)]
    [Display(Name = "Confirm password")]
    [Compare("Password", ErrorMessage = "The password and confirmation password do not match.")]
    public string ConfirmPassword { get; set; }
} 
```

* * *

**查看 (CSHTML)**

```
// This is your strongly typed view that will use
// model binding to bind the properties of RegisterModel
// to the View.
@model Trainer.Models.RegisterModel

// You can find these scripts in default projects in Visual Studio, if you are
// not using VS, then you can still find them online
<script src="~/Scripts/jquery.validate.min.js"></script>
<script src="~/Scripts/jquery.validate.unobtrusive.min.js"></script>

// This is where your form starts
// The "Account" parameter states what controller to post the form to
@using (Html.BeginForm((string)ViewBag.FormAction, "Account")) {
    @Html.ValidationSummary(true, "Account creation was unsuccessful. Please correct the errors and try again.")

    <fieldset>
        <legend>Registration Form</legend>
        <ol>
            <li>
                @Html.LabelFor(m => m.UserName)
                @Html.TextBoxFor(m => m.UserName)
                @Html.ValidationMessageFor(m => m.UserName)
            </li>
            <li>
                @Html.LabelFor(m => m.Email)
                @Html.TextBoxFor(m => m.Email)
                @Html.ValidationMessageFor(m => m.Email)
            </li>
            <li>
                @Html.LabelFor(m => m.Password)
                @Html.PasswordFor(m => m.Password)
                @Html.ValidationMessageFor(m => m.Password)
            </li>
            <li>
                @Html.LabelFor(m => m.ConfirmPassword)
                @Html.PasswordFor(m => m.ConfirmPassword)
                @Html.ValidationMessageFor(m => m.ConfirmPassword)
            </li>
        </ol>
        <!-- The value property being set to register tells the form
             what method of the controller to post to -->
        <input type="submit" value="Register" /> 
    </fieldset>
} 
```

* * *

**控制器**

```
// The AccountController has methods that only authorized
// users should be able to access. However, we can override
// this with another attribute for methods that anyone
// can access
[Authorize]
public class AccountController : Controller
{

    // This will allow the View to be rendered
    [AllowAnonymous]
    public ActionResult Register()
    {
        return ContextDependentView();
    }

        // This is one of the methods that anyone can access
        // Your Html.BeginForm will post to this method and
        // process what you posted.
        [AllowAnonymous]
        [HttpPost]
        public ActionResult Register(RegisterModel model)
        {
            // If all of the information in the model is valid
            if (ModelState.IsValid)
            {
                // Attempt to register the user
                MembershipCreateStatus createStatus;
                Membership.CreateUser(model.UserName, model.Password, model.Email, passwordQuestion: null, passwordAnswer: null, isApproved: true, providerUserKey: null, status: out createStatus);

                // If the out parameter createStatus gives us a successful code
                // Log the user in
                if (createStatus == MembershipCreateStatus.Success)
                {
                    FormsAuthentication.SetAuthCookie(model.UserName, createPersistentCookie: false);
                    return RedirectToAction("Index", "Home");
                }
                else // If the out parameter fails
                {
                    ModelState.AddModelError("", ErrorCodeToString(createStatus));
                }
            }

            // If we got this far, something failed, redisplay form
            return View(model);
        }

} 
```

# javascript - 循环遍历数组

> ID：11166804
> 
> 赞同：0
> 
> 时间：2012-06-23T04:17:04.280
> 
> 标签：javascript, arrays, dynamic-arrays

我想用 Javascript 编写类似下面的代码。

我有一个从数组加载的下拉列表，如下所示：

```
apple 
orange
mango 
grapes 
```

现在，如果用户从下拉列表中选择芒果，那么我应该将我的数组重置为：

```
mango
grapes
apple
orange 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-23T04:44:54.837

为什么不在循环内使用 Array 的 shift 和 push 方法。

例如。

```
var items = ["mango","grapes","apple"]
var selectedIndex = combo.selected.index
for( i = 0; i<selectedIndex ; i++){
items.push(items.shift())
}
combo.items = items 
```

我不是日常的 javascript 程序员，所以这只是一个想法。

# c# - 如何使用代理导航到网站？

> ID：11166808
> 
> 赞同：0
> 
> 时间：2012-06-23T04:18:16.557
> 
> 标签：c#, proxy, proxies

我浏览了谷歌，我看到了 WebRequest、WebProxy 等。有很多页面，但我不明白。因此，假设我有一个带有 URL 的 TextBox，以及另一个带有代理的 TextBox。我将如何做到这一点，以便我可以在 URL 上使用代理？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-23T04:29:34.947

一种选择是使用此处详述的 HttpWebRequest 对象创建请求：http:
[//msdn.microsoft.com/en-us/library/system.net.httpwebrequest.aspx](http://msdn.microsoft.com/en-us/library/system.net.httpwebrequest.aspx)

HttpWebRequest 对象的属性之一是“代理”：http:
[//msdn.microsoft.com/en-us/library/system.net.httpwebrequest.proxy.aspx](http://msdn.microsoft.com/en-us/library/system.net.httpwebrequest.proxy.aspx)

可以在这里找到一个很好的实现示例：
[Problem using proxy with HttpWebRequest in C#](https://stackoverflow.com/questions/6161608/problem-using-proxy-with-httpwebrequest-in-c-sharp)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-11-13T13:59:36.640

您可以使用 RestSharp 的 Rest Client ( [https://www.nuget.org/packages/RestSharp](https://www.nuget.org/packages/RestSharp) ) 提取数据，然后在 WebBrowser 对象中呈现：

```
 try {
    var response = new RestClient {
      BaseUrl = "https://theproxisright.com/",
      Proxy = new WebProxy("1.2.3.4", 8080),
      Timeout = 10000
    }.Execute(new RestRequest {
      Resource = "api/Proxy/Get?apiKey=ENTER_FREE_OR_UNLIMITED_API_KEY_HERE",
      Method = Method.GET,
    });
    if (response.ErrorException != null) {
      throw response.ErrorException;
    } else {
      Console.WriteLine(response.Content);

      var wb = new WebBrowser{ Width = 200 };
      webBrowserStack.Children.Add(wb);
      wb.NavigateToString(response.Content);
    }
  } catch (Exception ex) {
    Console.Error.WriteLine(ex.Message);
  } 
```

# javascript - 给定偏移量，使用 javascript 将跨度添加到文本字符串

> ID：11166810
> 
> 赞同：1
> 
> 时间：2012-06-23T04:19:00.170
> 
> 标签：javascript

我有字符串，称它为包含一些文本的 s，比如说

```
var s = 'The cat in the hat'; 
```

我知道“猫”从 4 开始，以 6 结束。添加跨度的最佳方法是什么，以便我最终得到

```
'The <span id='myid'>cat</span> in the hat.' 
```

是否有一些 HTML dom 解析魔法机器可以很好地做到这一点？假设我从纯文本开始。重复答案的链接也将不胜感激。

**更新**请注意，我可能需要插入多个跨度。所以我必须以某种方式记住原始字符串才能将其重新组合在一起。例如，考虑我也有坐标来插入“帽子”的跨度。

**Update2**已经有不少替代类型的解决方案，我想强调一下，我是从偏移量开始的，例如

[[4, 6], [16, 18]] 添加跨度。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-23T04:27:11.397

你可以使用[`String#replace`](https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/String/replace)：

```
var s = 'The cat in the hat';
var keywords = ['cat', 'hat'];

for (var i=0; i < keywords.length; i++) {
    s = s.replace(keywords[i], '<span>$&</span>');
}

console.log(s); // The <span>cat</span> in the <span>hat</span> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-23T04:37:25.227

尝试像这样替换...

```
var s = 'The cat in the hat'
s.replace(s.substring(4,7),'<span id="myid">' + s.substring(4,7) + '</span>'); 
```

**或者**

要同时替换**'cat'**和**'hat'** 使用如下：

```
var s = 'The cat in the hat';
var arr = ['cat', 'hat'];

for (var i=0; i < arr.length; i++) {
    s = s.replace(new RegExp(arr[i],"g"),'<span id="myid">' + arr[i] + '</span>');
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-23T06:00:51.870

途中有，

```
var s = 'The cat in the hat';
var newStr = '';
​var strArr = s.split(" ");
for (i=0;i<strArr.length;i++){
    alert(strArr[i]);
    if(strArr[i] == 'cat'){
        newStr  += ' <span>' + strArr[i] + '</span>';    
    }else{
            newStr  += ' ' + strArr[i];
    }       
}
alert(newStr);
​ 
```

试试这个[小提琴](http://jsfiddle.net/vrW2n/25/)

# iphone - iOS 尝试将图像保存到相机胶卷但未成功

> ID：11166813
> 
> 赞同：0
> 
> 时间：2012-06-23T04:20:12.747
> 
> 标签：iphone, objective-c, ios, uiimage

我在 UIImageView 中有一张图像，并希望将其保存到设备的照片中，以便最终将其保存为墙纸。虽然代码编译没有错误，但图像没有保存，我担心在使用“UIImage”与“UIImageView”或其他东西时我做错了什么。图片的名称是“Q115birdsfull~iphone.png”，到目前为止我的代码如下。我究竟做错了什么？？？

**Q115birdsViewController.h**

```
#import <UIKit/UIKit.h>

@interface Q115birdsViewController : UIViewController 
{
    UIImage *Q115birdsfull;
}

@property (nonatomic, strong) UIImage *Q115birdsfull;

- (IBAction)onClickSavePhoto:(id)sender;

@end 
```

**Q115birdsViewController.m**

```
#import "Q115birdsViewController.h"

@interface Q115birdsViewController ()
@end

@implementation Q115birdsViewController

@synthesize Q115birdsfull;

- (id)initWithNibName:(NSString *)nibNameOrNil bundle:(NSBundle *)nibBundleOrNil
{
     self = [super initWithNibName:nibNameOrNil bundle:nibBundleOrNil];
if (self) {
    // Custom initialization
}
return self;
}

- (void)viewDidLoad
{
[super viewDidLoad];
// Do any additional setup after loading the view.
}

- (IBAction)onClickSavePhoto:(id)sender{
    UIImageWriteToSavedPhotosAlbum(Q115birdsfull, nil, nil, nil);
} 
```

` 提前谢谢你！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-23T05:06:05.373

您要保存的是`UIImage`作为财产和 ivar 保留的内容。我在您的代码中*没有*看到的是您实际将该图像设置为任何内容的位置。这可能是您缺少的步骤。

尝试这样做：

```
- (IBAction)onClickSavePhoto:(id)sender{

    if(Q115birdsfull == NULL)
    {
        NSLog( @"there is no Q115birdsfull image set");
        Q115birdsfull = [UIImage imageNamed: @"Q115birdsfull"];

        // if it's STILL null, we'll try a much more specific name
        if(Q115birdsfull == NULL)
        {
            Q115birdsfull = [UIImage imageNamed: @"Q115birdsfull~iphone"];
        }
    }

    if(Q115birdsfull){
        // by the way, variable names should *always* start with lower case letters
        UIImageWriteToSavedPhotosAlbum(Q115birdsfull, nil, nil, nil);
    }
    else {
        NSLog( @"never found the Q115birdsfull png file... is it really being copied into your built app?");
    }
} 
```

# php - 从子域和域中读取 PHP 会话 cookie？

> ID：11166814
> 
> 赞同：1
> 
> 时间：2012-06-23T04:20:50.517
> 
> 标签：php, session

我添加`php_value session.cookie_domain .example.com`到我的 .htaccess 以便能够从所有子域读取 PHP cookie，它似乎工作但是当我在：'example.com'（无子域）时我无法读取 cookie。

这让我发疯，我确信这是一个常见问题，因为大多数人希望他们的用户在通过身份验证后同时登录域和所有子域。

我该怎么做才能从任何域/子域写入/读取 php cookie？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-23T04:32:06.530

使用会话变量没有可靠的方法来做到这一点。您可以将根域更改为`www.example.com`或使用 cookie。

PHP 的 setcookie 的文档说 Cookie 可用于较低域，例如“example.com”，将可用于较高的子域，例如“www.example.com”。

# php - 将表单中的 POST 数据发送到数据库后向页面发送警报 - PHP、JavaScript

> ID：11166818
> 
> 赞同：-3
> 
> 时间：2012-06-23T04:21:03.890
> 
> 标签：php, javascript, forms, post, alert

我有一个表格。提交表单数据后，我想向用户发送一个 JavaScript 警报，说“感谢提交表单”。

我正在寻找某种条件来使这成为可能。我尝试使用 $_POST 数组进行测试`isset`，即使`print_r`显示的是空数组，也会出现警报。似乎不可靠。

任何想法都非常感谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-23T04:24:11.493

```
if ($_SERVER['REQUEST_METHOD'] == 'POST') {
   echo <<<EOL
<script type="text/javascript">
   alert('POST received');
</script>
EOL;
} 
```

REQUEST_METHOD 是唯一 100% 可靠的测试特定类型的 HTTP 请求是否处于活动状态的方法。检查表单字段是不可靠的 - 字段名称可能会出现拼写错误、遗漏、删除、黑客攻击等...

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-23T04:31:51.607

```
<?php if ($_SERVER['REQUEST_METHOD'] == 'POST'):?>
<script type="text/javascript">
   alert('POST received');
</script>
<?php endif;?> 
```

写马克 B 答案的不同方式

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-06-23T04:24:24.317

如果您只想说感谢您提交表单，为什么不添加`onclick`提交按钮。

```
<input type="submit" onclick="alert('Thank you for submitting the form!');" value="Submit Form"> 
```

用于在接收数据后提交，在 PHP 中，

```
if (isset($_POST['whatever']) && (more_conditions) {
 echo "<script type='text/javascript'>alert('Successful Submission.)</script>";
} 
```

# android - 如何在 Android 的 viewflipper 中应用动画

> ID：11166819
> 
> 赞同：0
> 
> 时间：2012-06-23T04:21:05.103
> 
> 标签：android, viewflipper

我创建了一个简单的图像横幅应用程序，在其中我使用 viewflipper 一张一张地滑动图像。我的应用程序运行良好，但第一张图片重复了两次。在这里，我使用图像数组并应用于视图翻转器。

数组是：

```
int imageDrawable[] = new int[]{R.drawable.advanturestorybanner_ipad_landscap,
R.drawable.femouspeopleofthebiblebanner_ipad_landscap,
R.drawable.littlebanner_ipad_landscap,
R.drawable.thechildrenbiblebanner_ipad_landscap,
R.drawable.thecomicbookbiblebanner_ipad_landscap,
R.drawable.thehandybiblebanner_ipad_landscap };

bannerImageView.setBackgroundResource(imageDrawable[j]); 
```

# java - 如何在java中显示iText Image对象

> ID：11166823
> 
> 赞同：4
> 
> 时间：2012-06-23T04:22:14.607
> 
> 标签：java, swing, itext

我正在用java创建一个PDF阅读器。为了阅读 PDF 文件，我使用 iText 库。我有一个示例代码来读取 PDF 文件，但我不知道如何在 JFrame 中显示 iText Image 对象。下面是读取 PDF 文件的代码。

```
import java.io.FileOutputStream;
import java.io.IOException;

import com.itextpdf.text.Document;
import com.itextpdf.text.DocumentException;
import com.itextpdf.text.Image;
import com.itextpdf.text.pdf.PdfImportedPage;
import com.itextpdf.text.pdf.PdfReader;
import com.itextpdf.text.pdf.PdfWriter;

public class ReadAndUsePdf {
private static String INPUTFILE = "c:/temp/FirstPdf.pdf";
private static String OUTPUTFILE = "c:/temp/ReadPdf.pdf";

public static void main(String[] args) throws DocumentException,
        IOException {
    Document document = new Document();

    PdfWriter writer = PdfWriter.getInstance(document,
            new FileOutputStream(OUTPUTFILE));
    document.open();
    PdfReader reader = new PdfReader(INPUTFILE);
    int n = reader.getNumberOfPages();
    PdfImportedPage page;
    // Go through all pages
    for (int i = 1; i <= n; i++) {
        // Only page number 2 will be included
        if (i == 2) {
            page = writer.getImportedPage(reader, i);
            Image instance = Image.getInstance(page); //how to show this object in a JFrame
            document.add(instance);
        }
    }
    document.close();

}

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-27T19:03:47.023

我有完全相同的问题，我通过使用[ICEPdf](http://www.icesoft.org/projects/ICEpdf/overview.jsf)在 Swing 中呈现 PDF 并使用 iText 来操作它来解决它。

可能的重复：[我可以使用 iText 在我的 Swing 应用程序中呈现 PDF 吗？](https://stackoverflow.com/questions/2717522/can-i-use-itext-to-render-pdf-in-my-swing-application)

# bash - grep 区分大小写 [AZ]？

> ID：11166825
> 
> 赞同：14
> 
> 时间：2012-06-23T04:22:26.050
> 
> 标签：bash, command-line, grep

我无法使用此模式`grep`进行**区分大小写**的搜索

```
$ grep 'T[A-Z]' test.txt
The Quick Brown Fox Jumps Over The Lazy Dog
THE QUICK BROWN FOX JUMPS OVER THE LAZY DOG 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-23T10:54:11.387

使用引号来防止 shell 将模式作为 glob 匹配到文件系统中的文件。`''`

使用命名字符类来保证区分大小写的匹配。`[[:lower:]]`

使用量词匹配多个字符。`\+`

使用锚来确保匹配正确定位。`^`

```
grep '^T[[:upper:]]\+' test.txt 
```

不适合您的原因`[A-Z]`是您使用的语言环境是在您的系统上实现的，该模式还包括小写字母。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-06-23T04:28:41.737

您可以设置 LANG 值：

```
$ LANG=C grep 'T[A-Z]' test.txt
THE QUICK BROWN FOX JUMPS OVER THE LAZY DOG 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-23T09:00:09.683

```
grep 'T[[:upper:]]' test.txt
grep 'T[ABCDEFGHIJKLMNOPQRSTUVWXYZ]' test.txt 
```

# vb.net - 如何通过 vb.net 以编程方式单击 HTML 按钮

> ID：11166828
> 
> 赞同：0
> 
> 时间：2012-06-23T04:23:07.680
> 
> 标签：vb.net

我正在尝试以编程方式单击按钮。该按钮位于网站的第 3 页。它没有任何 id 。它只有名称、类型和值。该按钮的 HTML 代码如下所示

```
<FORM NAME='form1' METHOD='post' action='/dflogin.php'>
<INPUT TYPE='hidden' NAME='txtId' value='E712050-15'>
<INPUT TYPE='hidden'NAME='txtassId' value='1'>
<INPUT TYPE='hidden' NAME='txtPsw' value='HH29'>
<INPUT TYPE='hidden' NAME='txtLog' value='0'>
 <h6 align='right'>
 <INPUT TYPE='SUBMIT' NAME='btnSub' value='Next' style='background-color:#009900;    color:#fff;'></h6></FORM> 
```

我已经在 vb.net 2008 速成版中尝试过这些代码...

```
For Each webpageelement As HtmlElement In allelements

            If webpageelement.GetAttribute("value") = "Next" Then

                webpageelement.InvokeMember("click")

            End If
        Next 
```

还有第二个

```
theElementCollection = WebBrowser1.Document.GetElementsByTagName("INPUT")

    For Each curElement As HtmlElement In theElementCollection

        ctrlIdentity = curElement.GetAttribute("innerText").ToString

        If ctrlIdentity = "Next" Then

            curElement.InvokeMember("click")

        End If

    Next 
```

第三个是

```
 Dim l_forms = WebBrowser1.Document.GetElementsByTagName("form")
        If l_forms.Count > 0 Then
            l_forms.Item(0).InvokeMember("submit")
        End If
and 4th one is

Do While WebBrowser1.ReadyState <> WebBrowserReadyState.Complete
Application.DoEvents()
Loop
WebBrowser1.Document.Body.InnerHtml = Replace(WebBrowser1.Document.Body.InnerHtml,"NAME='btnSub'", "NAME='btnSub' id='btnSub'") 'insert id into youre button
WebBrowser1.Document.GetElementById("btnSub").InvokeMember("click") 'click on btnSub 
```

最后一个是

```
Dim i As Integer
        Dim allButtons As HtmlElementCollection

        allButtons = WebBrowser1.Document.GetElementsByTagName("input")

        i = 0
        For Each webpageelement As HtmlElement In allButtons
            i += 1
            If i = 5 Then
                webpageelement.InvokeMember("click")
            End If
        Next 
```

这些所有代码都无法单击该按钮。请为单击此按钮提出适当的解决方案。太感谢了

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-23T04:49:52.233

像这样的东西将是服务器端 JavaScript 和 jquery 解决方案

```
string script = "$(document).ready(function() {$('input[name=btnSub]').trigger('click'); });";
ScriptManager.RegisterStartupScript(this, GetType(), "ServerControlScript", script, true); 
```

# c - 如何使用c语言编写的cgi程序上传图片文件？

> ID：11166832
> 
> 赞同：2
> 
> 时间：2012-06-23T04:23:26.813
> 
> 标签：c, cgi

我想在服务器上上传一个 jpeg 图像文件。我有一个 GoAhead 网络服务器，它只支持 cgi c 程序作为服务器端处理。

任何人都可以知道如何用c语言在cgi中处理http发布的图像文件吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-09-24T23:03:09.187

为此，GoAhead Web 服务器有一个文件上传过滤器。上传过滤器接收上传的文件并将其保存到磁盘。然后它设置一些描述上传的请求变量。这些变量可通过 CGI 或操作函数或 JST 模板访问。

test.c 中有一个例子。搜索uploadTest()。

见：[https ://github.com/embedthis/goahead/blob/master/test/test.c](https://github.com/embedthis/goahead/blob/master/test/test.c)

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-06-23T04:37:33.477

要获取 POST 数据，只需读取标准输入。环境变量 CONTENT_LENGTH 告诉您期望多少，但当然您需要使您的代码对潜在恶意用户可能向您抛出的任何东西都具有鲁棒性。

# c - 与 'int ()' (C) 的间接级别不同

> ID：11166833
> 
> 赞同：3
> 
> 时间：2012-06-23T04:23:34.087
> 
> 标签：c

这段代码给了我这个错误，我不明白。我什至无法运行程序。你能帮我解决这个错误吗？如果你不明白代码中的任何内容，请说出来。

`error C2040: 'CancelarPedido' : 'ppedido (ppedido)'`与'int（）'的间接级别不同

```
printf("\nIntroduza opcao:");
    scanf("%d",&opc);

    switch(opc){
        case 1: lista = NovoPedido(lista);break;
        case 2: lista = CancelarPedido(lista);break;
        case 3: printf("Falta implementar a funcao.");break;
        case 4: printf("Falta implementar a funcao.");break;
    }
    }while(opc!=5);

    return lista;
}

ppedido CancelarPedido(ppedido lista)
{
    ppedido actual, anterior = NULL;

    char id[5];

    actual = lista;

    if(lista == NULL)
        printf("\nNao ha pedidos na fila de espera...");
    else
    {
        printf("\nIntroduza o ID do pedido que pretende cancelar: ");
        scanf("%s", id);

        while(actual != NULL && ((strcmp(actual->id, id)) != 0)){
            anterior = actual;
            actual = actual->prox;
        }
        if(actual == NULL){
            printf("\nERRO - Nao existe nenhum pedido com o ID introduzido.");
            return lista;
        }
        if(anterior == NULL){
            lista = actual->prox;
            printf("\nPedido cancelado com sucesso...");
        }
        else{
            anterior->prox = actual->prox;
            printf("\nPedido cancelado com sucesso...");
        }
        free(actual);
        return lista;
    }
} 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-06-23T04:32:42.537

您在声明之前调用了 CancelarPedido。您需要重新排序代码或为 CancelarPedido 添加前向声明。

如果在范围内没有 CancelarPedido 声明，则默认为 int CancelarPedido()。您会收到错误消息，因为 lista 被声明为指针，但 CancelarPedido 被声明为返回 int。

# java - SwingWorker 中断线程

> ID：11166834
> 
> 赞同：1
> 
> 时间：2012-06-23T04:23:51.917
> 
> 标签：java, multithreading, swingworker

我正在构建一个应用程序，其中我将拥有一个 SwingWorker 线程，该线程本身会衍生出多个工作线程。当这些子线程完成他们的工作时，我想要实现的是，当父线程被中断时，我希望所有子线程也停止（*即它们也被中断*）。我知道实现这一点的一种方法是使用全局变量并让子线程在他们自己的代码中检查这个值。但是，我想知道这是否是正确的方法。任何意见/建议将不胜感激。

我基本上拥有的是一个带有 JButton 的简单 UI（最初的文本设置为“开始”）。单击该按钮时，文本变为“停止”并启动父 SwingWorker 线程。该线程被发送一个目录位置作为参数。该线程的作用是为它在该文件夹中找到的每个文件生成一个线索，以执行特定操作。但是，我想要实现的是，一旦单击 JButton，父线程应该停止扫描文件夹，子线程应该停止扫描文件。

只是想知道在此操作的父线程和子线程之间建议的消息传递方法是什么。全局变量？任何意见/建议都会对我很有帮助。谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-23T05:09:59.600

一种方法是`cancel()`在父工作者中覆盖并让它`cancel()`在最终调用之前在每个子工作者上调用`super.cancel()`。

还要考虑一个`JTable`可以单独取消的执行子工作者。

# jquery - 带有 AJAX 初始化程序设计模式的 javascriptMVC 单例

> ID：11166839
> 
> 赞同：2
> 
> 时间：2012-06-23T04:24:25.867
> 
> 标签：jquery, ajax, singleton, javascriptmvc

我正在尝试为使用 AJAX 调用初始化的 Singleton 制定正确的模式。这是我已经工作的一个简化示例。

它按预期工作，但我觉得这不是“正确”的方式，并且有一些方法可以将初始化程序的回调挂钩到当前正在运行的 ajax 请求的成功调用中，我担心可能会有一场比赛条件与数组方法。我在正确的轨道上吗？

```
var singletonObj;
$.Class("SingletonTest", {
  init: function(onSuccess) {
    if (singletonObj) {
      if (singletonObj.ajaxLoaded) {
        onSuccess(singletonObj);
      }
      else {
        singletonObj.callbacks.push(onSuccess);
      }
    }
    else {
      singletonObj = this;
      singletonObj.callbacks = new Array(onSuccess);
      singletonObj.count=0;

      $.ajax({
        url: "/path/to/json/config",
        method: "GET",
        success: function (res) {
          singletonObj.data = res.meta_data;
          singletonObj.ajaxLoaded = true

          singletonObj.callbacks.forEach(function(callback) {
            callback(singletonObj);
          });
        }
      });
    }
  },
  counter: function() {
    return this.count++;
  }
});

new SingletonTest( function(obj) { console.log("First call: "+obj.counter() ) });
new SingletonTest( function(obj) { console.log("Second call: "+obj.counter() ) });
new SingletonTest( function(obj) { console.log("Third call: "+obj.counter() ) }); 
```

或者有没有更简单的方法来做到这一点？我在这里缺少什么概念可以让生活更轻松？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-23T16:03:13.680

由于您正在寻找“正确”的方式，因此这里有一些一般说明：

1.  您不需要单例类（JavaScript 不是 Java）。只需将其设为全局 obj 或更好的函数即可。

2.  [$.Deferred](http://api.jquery.com/category/deferred-object/)是你的朋友。`$.ajax`返回一个承诺。

这是单例的功能模式：

```
// creates a lazy singleton from a factory function
function singleton(factory) {
    var deferred;
    return function() {
        return deferred || (deferred = factory());
    };
}

// declare your specific singleton
var SingletonTest = singleton(function() {
    return $.ajax({
        url: "/path/to/json/config",
        method: "GET"
    }).pipe(function(obj) {
        // pipe lets you modify the result
        // here we add the counter method
        var count = 0;
        obj.counter = function() {
            return count++;
        };
        return obj;
    });
});

// use it
SingletonTest().then(function(obj) {
    console.log("First: "+obj.counter());
});

SingletonTest().then(function(obj) {
    console.log("Second: "+obj.counter());
}); 
```

如果您发现自己经常使用这种模式，那么有一个[JMVC 插件](http://spredfast.github.com/JMVC-Inject/)（披露：我是主要作者）实现了依赖注入的功能形式。

如果您要使用[Inject](http://spredfast.github.com/JMVC-Inject/)，它将如下所示：

```
var cache = Inject.cache();
var Injector = Inject(
    cache.def('SingletonTest',function() {
        return $.ajax({
            url: "/path/to/json/config",
            method: "GET"
        }).pipe(function(obj) {
            var count = 0;
            obj.counter = function() {
                return count++;
            };
            return obj;
        });
    })
);

var logCount = Injector('SingletonTest',function(obj,message) {
    console.log(message+obj.counter());
});

logCount("First:");
logCount("Second:"); 
```

对于具有大量单例或只是延迟数据的大型项目，注入比例比全局变量更好。

# events - 如何使用值变化监听器

> ID：11166840
> 
> 赞同：2
> 
> 时间：2012-06-23T04:25:06.977
> 
> 标签：events, jsf-2, valuechangelistener

我不知道如何处理 f:valueChangeListener ，我想选择国家和首都出现所以这是我的代码但它不起作用什么是错过或什么是错的？

```
 Country:
  <h:selectOneMenu value="#{event.country}" onchange="submit()">
        <f:valueChangeListener type="org.jsf.model.ValueListener"/>
        <f:selectItems value="#{event.countries}"/>     
  </h:selectOneMenu>
 Capital: #{event.capital} 
```

我的托管 bean

```
public class EventsBean{

private String capital;
private String country;
String countryCapital;

private String [] countries = {"Select","Egypt","United States","Kuwait"};

public String[] getCountries() {
    return countries;
  }

// getters and setters
} 
```

实现 ValueChangeListener 的类

```
package org.jsf.model;
import javax.faces.context.FacesContext;
import javax.faces.event.AbortProcessingException;
import javax.faces.event.ValueChangeEvent;
import javax.faces.event.ValueChangeListener;

public class ValueChangeClass implements ValueChangeListener {
String capital;
 @Override
   public void processValueChange(ValueChangeEvent event)throws AbortProcessingException {

if ("Egypt".equals(event.getNewValue())                  capital = "Cairo";
else if ("Kuwait".equals(event.getNewValue()))           capital = "Kuwait";
else if ("United States".equals(event.getNewValue()))    capital = "Washington";
else   capital = "";

new EventsBean().setCapital(capital);
}
} 
```

它不起作用！这是 new EventsBean().setCapital(capital);对吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-23T04:40:24.003

> *这是 new EventsBean().setCapital(capital);对吗？*

不，这是不对的。您正在手动创建一个全新的实例，而不是使用由 JSF 管理的实例。一旦方法完成并返回，您的实例将完全消失。相反，您应该`capital`在由 JSF 管理的实例中设置 。有几种方法可以实现这一点。如果您真的打算使用`ValueChangeListener`这种方式（顺便说一下，对于这个特定目的来说这很奇怪），那么您需要按如下方式修复它：

```
FacesContext context = FacesContext.getCurrentInstance();
EventsBean eventsBean = context.getApplication().evaluateExpressionGet(context, "#{event}", EventsBean.class);
eventsBean.setCapital(capital); 
```

更容易的是自己完成这项工作`EventsBean`。

```
<h:selectOneMenu value="#{event.country}" valueChangeListener="#{event.changeCountry}" onchange="submit()">
    <f:selectItems value="#{event.countries}"/>     
</h:selectOneMenu>
Capital: #{event.capital} 
```

```
private String country;
private String capital;
private Map<String, String> capitals;

@PostConstruct
public void init() {
    capitals = new HashMap<>();
    capitals.put("Egypt", "Cairo");
    capitals.put("Kuwait", "Kuwait");
    capitals.put("United States", "Washington D.C.");
}

public void changeCountry(ValueChangeEvent event) {
    capital = capitals.get(event.getNewValue());
} 
```

或者，既然您已经在使用 JSF 2.0，最好使用`<f:ajax>`. 它在正确的时间做正确的工作。（Ab）使用`valueChangeListener`原始代码中的方式实际上是 JSF 1.x 时代的遗留物。

```
<h:selectOneMenu value="#{event.country}">
    <f:selectItems value="#{event.countries}"/>     
    <f:ajax listener="#{event.changeCountry}" render="capital" />
</h:selectOneMenu>
Capital: <h:outputText id="capital" value="#{event.capital}" /> 
```

```
// ...

public void changeCountry() {
    capital = capitals.get(country);
} 
```

### 也可以看看：

*   [何时使用 valueChangeListener 或 f:ajax 监听器？](https://stackoverflow.com/questions/11879138/when-to-use-valuechangelistener-or-fajax-listener/)

# java - 更改类文件后Android上的java.lang.NoClassDefFoundError

> ID：11166842
> 
> 赞同：0
> 
> 时间：2012-06-23T04:25:35.337
> 
> 标签：java, android

我有一个 jar 库。我使用 Java 类文件编辑器 (CE) 修改了这个库中的一个类。在这堂课中，我将一个变量从 更改`private static final`为`public static`。之后，我使用 WinRAR 将新修改的类文件放入同一个 jar 库中。

但是，在 Android 上运行该应用程序会生成一个`NoClassDefFoundError`.

我该如何解决`NoClassDefFoundError`？

请帮忙。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-23T04:45:35.743

一种可能是 WinRAR 创建了一个不再兼容 JAR 的文件。我建议不要使用 WinRAR。使用`jar`命令将该 JAR 文件解压缩到目录树中，进行更改，然后使用`jar`.

另一种可能是您的更改触发了代码验证问题或类似问题。向我们展示异常的完整错误消息和堆栈跟踪？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-23T04:37:51.323

我不确定这是否相关，或者是否完全有可能更改类文件的内容会影响这一点，但也许你应该尝试在 Eclipse 中执行 Project -> Clean。另外，如果您还没有，请尝试将 jar 文件包含在 /libs 文件夹中。

此外，请确认您的 Jar 文件在重新创建时已正确压缩。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-27T20:05:52.393

我认为问题是由 RSA 加密引起的。

# dns - Plesk DNS，将子域定向到自定义 URL？

> ID：11166847
> 
> 赞同：2
> 
> 时间：2012-06-23T04:26:42.527
> 
> 标签：dns, plesk

我想指向一个子域，例如：

```
example.domain.com 
```

到如下 URL：

```
domain.com/something/this.php 
```

如何在 Plesk 中执行此操作？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-25T11:25:15.590

根据脚本的工作方式，您可以采用以下两种路径之一：

1.  `Add Domain`，为其命名`example.domain.com`（是的，它将使用您的域限制中的一项），在那里选择`Redirect`并`Hosting Type`输入目标地址。
2.  `Add Subdomain`并将其 docroot 文件夹指向`/{domain.com docroot}/something/`文件夹。so`this.php`将被访问 as`example.domain.com/this.php`和`that.php`as`example.domain.com/that.php`

# php - NSURL 和 \n 调用一个 php 文件

> ID：11166851
> 
> 赞同：1
> 
> 时间：2012-06-23T04:27:32.943
> 
> 标签：php, ios, hyperlink, newline, nsurl

我正在使用以下代码行来运行我在服务器上的 php 文件。问题是 \n 导致错误并禁止调用 php 文件。但是当我删除 \n 时它可以工作。

```
 NSString *link = [[NSString alloc]initWithFormat:@"%@?message=%@",link,[@"hello   world\nhello" stringByReplacingOccurrencesOfString:@" " withString:@"%20"]];
  NSData *resultData = [NSData dataWithContentsOfURL:[NSURL URLWithString:link]]; 
```

我不知道该怎么做才能完成这项工作。我还需要使用什么来代替 \n 吗？！

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-23T04:33:08.103

试试这个：

```
NSString *link = [[NSString alloc]initWithFormat:@"%@?message=hello world%@hello",link,@"\n"];
NSData *resultData = [NSData dataWithContentsOfURL:[NSURL URLWithString:link]]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-23T04:29:59.287

您可能应该`link`使用[NSString 的`stringByAddingPercentEscapesUsingEncoding:`方法](http://developer.apple.com/library/ios/documentation/Cocoa/Reference/Foundation/Classes/NSString_Class/Reference/NSString.html#//apple_ref/occ/instm/NSString/stringByAddingPercentEscapesUsingEncoding%3a)来逃避“” URL 字符串中携带的参数的疯狂字符。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-23T04:39:39.160

试试这个：

```
NSString *link = [[NSString alloc]initWithFormat:@"%@?message=%@",link,@"hello   world\nhello"];
NSString *url = [link stringByAddingPercentEscapesUsingEncoding:NSASCIIStringEncoding];
NSData *resultData = [NSData dataWithContentsOfURL:[NSURL URLWithString:url]]; 
```

# android - 向服务发送 BroadcastReceiver 意图

> ID：11166853
> 
> 赞同：4
> 
> 时间：2012-06-23T04:28:02.713
> 
> 标签：android, broadcastreceiver, android-service

通常你会启动这样的服务

```
Intent i = new Intent(context,MessageService.class);
context.startService(i); 
```

但我想要做的是将在 a 中收到的意图发送`BroadcastReceiver`到服务。如果我以上面显示的方式启动服务，不会从`BroadcastReceiver`正确的意图中得到意图？

基本上我只想`BroadcastReceiver`启动我的服务，然后让服务本身处理接收到的意图

这可能吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-23T04:56:43.243

从 BroadcastReceiver 向 Service 发送 Intent：

```
Intent intent = new Intent(context,MessageService.class);
String value = "String you want to pass";
String name = "data";
intent.putExtra(name, value);
context.startService(intent); 
```

服务方法中的接收者意图`onStartCommand`：

```
@Override
public int onStartCommand(Intent intent, int flags, int startId) {
    Toast.makeText(this, "service starting", Toast.LENGTH_SHORT).show();
    if (intent.getStringExtra("data") != null) {
     {
       String str=intent.getStringExtra("data");//get data here sended from BroadcastReceiver 
     }

    return super.onStartCommand(intent,flags,startId);
} 
```

关于我们如何在 Service 和 BroadcastReceiver 之间进行通信，请参阅[这篇文章](https://stackoverflow.com/questions/4420495/sending-an-intent-from-broadcast-receiver-to-a-running-service-in-android)

# css - 使用 wordpress header.php 填充的浮动右 div？

> ID：11166854
> 
> 赞同：0
> 
> 时间：2012-06-23T04:28:21.923
> 
> 标签：css, wordpress, html, css-float

我试图在我的 li 菜单下获取几行文本。我希望它与填充一起浮动。此外，由于某种原因，它远远低于我的菜单，而且太靠右了。当我尝试使用时发生这种情况

```
<div style="float: right;"> 
```

我将把它放在我的 wordpress header.php 中

我不是 HTML 或 CSS 编码器。我使用 wordpress 主题，然后从网上提取我喜欢的 CSS，然后使用 firebug 对其进行更改。这个[annmariedavis.com](http://annmariedavis.com/)来自我修改的子主题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-23T12:28:24.843

`<div style="float: right; width: 323px;">some text</div>`在它之前或之后添加`</nav>`，取决于您希望文本位于行上方或下方的位置

# vb.net - mmo 数据库连接/安全问题

> ID：11166858
> 
> 赞同：0
> 
> 时间：2012-06-23T04:29:28.520
> 
> 标签：vb.net, security, mmo

开发一个进行 ADO 调用的 MMO 有多安全或不安全？如果反编译，连接字符串将被暴露。跟踪用户位置等的最佳方法是什么？

# java - Eclipse 从 .java 文件创建 CompilationUnit

> ID：11166862
> 
> 赞同：5
> 
> 时间：2012-06-23T04:31:05.867
> 
> 标签：java, eclipse, eclipse-jdt, abstract-syntax-tree, compilationunit

如何将 .java 文件加载到 CompilationUnit 中？例如，假设我当前的项目中有一个 A.java 文件。我想将它加载到 CompilationUnit 中，然后将其传递给 ASTParser。仅将其作为纯文本加载不是一个选项，因为在这种情况下，我似乎不会在 AST 中获得绑定信息。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-06-23T09:17:30.350

`jdt`您可以使用和`eclipse core`库加载项目。

使用以下代码，您可以加载工作区中的所有项目。

```
IWorkspace workspace = ResourcesPlugin.getWorkspace();
IWorkspaceRoot root = workspace.getRoot();
// Get all projects in the workspace
IProject[] projects = root.getProjects(); 
```

然后你可以得到包，然后是java文件。

```
IPackageFragment[] packages = JavaCore.create(project).getPackageFragments();
IPackageFragment mypackage = packages.get(0); // implement your own logic to select package
ICompilationUnit unit = mypackage.getCompilationUnits(); 
```

然后你可以使用这个 ICompilationUnit 对象来获取 CompilationUnit

```
ASTParser parser = ASTParser.newParser(AST.JLS3); 
parser.setKind(ASTParser.K_COMPILATION_UNIT);
parser.setSource(unit);
parser.setResolveBindings(true);
CompilationUnit cUnit = parser.createAST(null); 
```

这个 CompilationUnit 对象可以传递给 ASTParser。

# subdomain - Plesk - 添加子域时出错“指定的目录包含服务目录”

> ID：11166865
> 
> 赞同：0
> 
> 时间：2012-06-23T04:31:47.907
> 
> 标签：subdomain, plesk

我正在尝试创建一个子域并将其指向`etc/subdomains/home`

文件夹`home`仅包含一个索引文件。`

当我单击确定时，我收到此消息：“指定目录包含服务目录”

我试过了``etc/subdomains/home`，`etc/subdomains/home/index.php`但我仍然收到错误消息。

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-25T11:15:41.813

我认为`etc`文件夹是为配置和其他工作人员保留的，不确定那里想要什么 web 脚本。尝试选择任何其他文件夹，如`subdomain/home`, `htdocs/subdomain/home`,`subdomains/mysubdomain/home`等。

# java - 如何从 Java 中的 IndexTank 搜索结果中获取文档“文本”值？

> ID：11166869
> 
> 赞同：1
> 
> 时间：2012-06-23T04:32:18.990
> 
> 标签：java, indextank

如何从 Java 中的 IndexTank 搜索结果中获取文档“文本”？

我用包含内容的“文本”在 Clojure 中对文档进行了索引：

```
(. index addDocument (str id) {"text" name})) 
```

以下是我在 Java 中执行查询的方式：

```
int start = 0;
int len = 4;
int function = 0;

// empty defaults
Map<Integer, Double> vars = Maps.newHashMap();
List<CategoryFilter> facetFilters = Lists.newArrayList();
List<RangeFilter> variableRangeFilters = Lists.newArrayList();
List<RangeFilter> functionRangeFilters = Lists.newArrayList();
Map<String, String> extras = Maps.newHashMap();  // Should default to all fields

SearchResults results = api.search(query, start, len, function, vars, 
              facetFilters, variableRangeFilters, functionRangeFilters, extras);

// Why is TEXT null? 
for (SearchResult result : results.getResults()) {
    System.out.println("DOCID: " + result.getDocId());        // this works
    System.out.println("TEXT: " +  result.getField("text"));  // this is null
} 
```

如您所见，我尝试了 result.getField("text") 但它返回一个空值。我在这里想念什么？

每次我尝试明确指定附加字段时...

```
Map<String, String> extras = Maps.newHashMap();
extras.put("fetch_fields", "text");

SearchResults results = api.search(q, start, len, function, vars, 
              facetFilters, variableRangeFilters, functionRangeFilters, extras); 
```

...我得到一个 NullPointerException ...

```
com.flaptor.indextank.api.IndexEngineApiException: java.lang.NullPointerException
    at com.flaptor.indextank.api.IndexEngineApi.search(IndexEngineApi.java:90)
    at com.flaptor.indextank.api.resources.InstantLinks.run(InstantLinks.java:139)
    at com.ghosthack.turismo.servlet.Servlet.service(Servlet.java:55)
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:820)
    at org.eclipse.jetty.servlet.ServletHolder.handle(ServletHolder.java:538)
    at org.eclipse.jetty.servlet.ServletHandler.doHandle(ServletHandler.java:478)
    at org.eclipse.jetty.server.session.SessionHandler.doHandle(SessionHandler.java:223)
    at org.eclipse.jetty.server.handler.ContextHandler.doHandle(ContextHandler.java:937)
    at org.eclipse.jetty.servlet.ServletHandler.doScope(ServletHandler.java:406)
    at org.eclipse.jetty.server.session.SessionHandler.doScope(SessionHandler.java:183)
    at org.eclipse.jetty.server.handler.ContextHandler.doScope(ContextHandler.java:871)
    at org.eclipse.jetty.server.handler.ScopedHandler.handle(ScopedHandler.java:117)
    at org.eclipse.jetty.server.handler.HandlerWrapper.handle(HandlerWrapper.java:110)
    at org.eclipse.jetty.server.Server.handle(Server.java:346)
    at org.eclipse.jetty.server.HttpConnection.handleRequest(HttpConnection.java:589)
    at org.eclipse.jetty.server.HttpConnection$RequestHandler.headerComplete(HttpConnection.java:1048)
    at org.eclipse.jetty.http.HttpParser.parseNext(HttpParser.java:601)
    at org.eclipse.jetty.http.HttpParser.parseAvailable(HttpParser.java:214)
    at org.eclipse.jetty.server.HttpConnection.handle(HttpConnection.java:411)
    at org.eclipse.jetty.io.nio.SelectChannelEndPoint.handle(SelectChannelEndPoint.java:535)
    at org.eclipse.jetty.io.nio.SelectChannelEndPoint$1.run(SelectChannelEndPoint.java:40)
    at org.eclipse.jetty.util.thread.QueuedThreadPool$3.run(QueuedThreadPool.java:529)
    at java.lang.Thread.run(Thread.java:722)
Caused by: java.lang.NullPointerException
    at java.io.ByteArrayInputStream.<init>(ByteArrayInputStream.java:106)
    at com.flaptor.indextank.index.storage.DocumentBinaryStorage.decompress(DocumentBinaryStorage.java:98)
    at com.flaptor.indextank.index.storage.DocumentBinaryStorage.getDocument(DocumentBinaryStorage.java:70)
    at com.flaptor.indextank.search.SnippetSearcher.search(SnippetSearcher.java:97)
    at com.flaptor.indextank.api.IndexEngineApi.search(IndexEngineApi.java:83)
    ... 22 more 
```

# ruby-on-rails - Ruby on Rails 用户界面 Gems

> ID：11166883
> 
> 赞同：0
> 
> 时间：2012-06-23T04:34:52.480
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, ruby-on-rails-3.1, rubygems

我想知道有助于创建一个非常漂亮的（用户界面）应用程序的 gems 列表。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-23T06:38:48.777

我会说使用[bootstrap-sass](https://github.com/thomas-mcdonald/bootstrap-sass)，然后查看[Twitter Bootstrap 文档](http://twitter.github.com/bootstrap)。

# google-maps - 具有多个重复航点的谷歌地图

> ID：11166885
> 
> 赞同：1
> 
> 时间：2012-06-23T04:35:43.180
> 
> 标签：google-maps, google-maps-api-3

我尝试了一些在谷歌地图上有点不正常的东西。我想要实现的是绘制一条具有多个航路点的路线，这些航路点有时可能是重复的。假设一个起点：A 和目的地：B，以及航路点 {1, 2, 3, 4, 5, 6, 7, 3, 2, 1} 从上面看，它总是会失败。如果我取出重复位置，它将显示路线。请帮忙。先谢谢了。

```
wayPoints.push(
    {location:new google.maps.LatLng(stepsWP[0], stepsWP[1]),
    stopover: false
        }
...
var request = {
            origin: start,
            destination: end,
            waypoints: wayPoints,
            optimizeWaypoints: false,
            travelMode: google.maps.TravelMode.DRIVING
    };

    var directionsRen = new google.maps.DirectionsRenderer(rendererOptions);
    directionsRen.setMap(map);
    directionsService.route(request, function(result, status) {

        if (status == google.maps.DirectionsStatus.OK) {
            directionsRen.setDirections(result);
        }else{
            console.debug('Something wrong with google...');
        }
    }); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-23T12:37:05.107

谢谢。我做了一些谷歌，发现了一些关于解决方法的建议。 [http://techquarries.blogspot.com/2010/08/using-more-than-8-waypoints-in-google.html](http://techquarries.blogspot.com/2010/08/using-more-than-8-waypoints-in-google.html) http://lemonharpy.wordpress.com/2011/12/15/working-around-8 -waypoint-limit-in-google-maps-directions-api/ [http://mostup.com/2011/02/15/google-map-api-v3-directionsservice-more-than-8-waypoints-workaround/](http://mostup.com/2011/02/15/google-map-api-v3-directionsservice-more-than-8-waypoints-workaround/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-05-03T22:51:21.703

这是我从 Google Map Direction 服务页面获得的信息：

> 允许的最大航路点为 8 个，加上起点和终点。Google Maps API for Work 客户可以使用 23 个航点，外加起点和目的地。公交路线不支持航点。

因此，您基本上需要将您的航点数组分解为 8 个位置组，并使用它向 google 方向服务 api 发送请求。

# javascript - ajax 调用返回是否可以向页面添加新的 javascript 函数？

> ID：11166887
> 
> 赞同：0
> 
> 时间：2012-06-23T04:36:21.467
> 
> 标签：javascript, jquery, ajax

我有一个返回表格 html 的 jQuery ajax 调用。现在我需要让用户在桌子上做一些 javascript 操作。

返回的 ajax 响应是否可以包含 javascript 代码，还是我必须在第一次加载页面时在页面中加载 javascript 代码？

用户可以选择触发“新”javascript。它不必在 ajax 调用时触发。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-23T04:49:33.420

要回答实际问题，返回响应可以包含脚本。最简单的是将它放在 html 之后，因为`ready`事件已经在它正在加载的页面中触发

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-23T04:42:22.860

您可以使用 jQuery .ajax() 提供的成功（或其他事件）回调来执行此 JS 操作。像这样的东西：

```
$.ajax({
   success: function(){
     // Perform JS action
   }
} 
```

jQuery API 列出了所有可用于 AJAX 调用的此类事件回调。检查[此](http://docs.jquery.com/Ajax_Events)以获取更多信息。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-23T04:49:45.140

返回的 ajax 响应可以包含 javascript 代码作为字符串。然后你可以评估（响应）。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-23T04:46:35.760

如果你想用 ajax 请求一个在检索时会运行的脚本，那么你可以使用 jQuery 的[`getScript()`](http://api.jquery.com/jQuery.getScript/)方法来检索它然后执行它。

根据 jQuery 文档，`getScript()`它是以下内容的简写：

```
$.ajax({
  url: url,
  dataType: "script",
  success: success
}); 
```

这表明如果您适当地设置数据类型，jQuery 的 ajax 命令将自动为您处理返回的脚本。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-23T04:48:56.587

您可以将您的请求设置为变量并在设置后对其进行扩展。

```
// Make the request to the server
var dataID = $("#WhatINeedForAParameter").val();
var request = $.ajax({
  url: "PageOrControllerOrWebApi/MethodName",
  type: "POST",
  data: { id : dataID },
  dataType: "json"
});

// When the request is done process
// what you need done
request.done(function(msg) {
  alert('You got this ' + msg);
});

// If the request failed you can
// see what the problem was and
// handle the situation accordingly
request.fail(function(jqXHR, textStatus) {
  alert( "Your request failed: " + textStatus );
}); 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-06-23T04:51:16.097

你可以使用成功回调来做到这一点我认为这可能是一种方式请尝试

```
$.ajax({
   .....,
   .....,
   success:  
    var script = document.createElement( 'script' );
    script.type = 'text/javascript';
    script.src = url;
    $("#tableID").append( script );
    }); 
```

我希望它会有所帮助。

# sql - 具有复合主键的表真的需要复合索引吗？

> ID：11166889
> 
> 赞同：0
> 
> 时间：2012-06-23T04:37:13.317
> 
> 标签：sql

假设我们有一个表来存储用户最喜欢的图片，并带有一个复合主键对（UserId，PictureId）。书籍通常说在这种情况下您需要一个基于 (UserId, PictureId) 的复合索引，它通常在 WHERE 子句中显示为 (UserId=103 AND PictureId=1234)。但我认为 dababase 引擎应该足够聪明，可以分别使用基于两列的两个单独的索引。只需从每个索引中获取一组行号，然后找到两组中都存在的行号。这样，就不需要复合索引了。

那么，实际上数据库引擎可以做到这一点吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-23T04:49:55.740

使用两个单独的单列索引没有任何优势；引擎最好进行表扫描。

使用索引的目的是使访问更快。如果引擎使用两个索引，则必须从其中一个索引中对至少一组数据进行排序，并合并来自两个索引的结果。这比只读取一个复合索引要多得多，尤其是因为复合索引允许只进行索引扫描。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-23T05:45:34.730

大多数数据库引擎都*需要*复合索引来*强制执行*主键。因此，无论如何，它是一个“免费”的索引——为什么要担心呢？

`UserID,PictureID`在 上添加第二个索引可能有一些好处（如果索引在 上） `PictureID`。任何关于 just 的查询`UserID`都可以使用复合索引，而只是 using 的查询`PictureID`则不能这样做。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-23T11:55:44.360

PRIMARY KEY 或 UNIQUE 约束是*抽象*的理论概念。

索引是生活在现实世界中的*实际*物理事物。

在实践中，索引可用于强制执行 PK 或 UNIQUE 约束。但也可以使用其他技术（例如，对于小域：位图）

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-23T04:54:54.107

我认为在您描述的用例中，复合索引不是必需的。如果您对一组给定的用户 ID 加上一组给定的图片 ID 进行查询，这将很有用。但是你什么时候需要它？您更有可能查询给定日期范围内的所有用户图片，或按 ID 查找特定图片。这将建议一个复合*用户 id + 日期*索引和另一个仅*图片 id*索引的索引结构。

它始终取决于数据库中记录的分布，以及最常运行的查询类型。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-23T05:58:57.133

您所描述的将比使用复合索引贵得多。

首先需要从第一个索引中识别一组行，然后从第二个索引中识别一组行，最后是在两者之间执行的集合交集。

### - - 更新 - -

请注意，这是您为**每次**INSERT/UPDATE 和每次外键检查支付的价格，而不仅仅是 SELECT。

此外，可能会涉及并发问题 - 根据 DBMS 的实现方式，通过单个唯一复合索引强制唯一性可能比通过两个非唯一、非复合索引强制唯一性需要更少/更简单的锁定。

当然，如果您打算对表进行[集群](http://use-the-index-luke.com/sql/clustering/index-organized-clustered-index)，主索引通常也是集群索引，并且无论如何都包含所有列，因此从索引的“排序”部分中遗漏任何内容没有多大意义。

# python - 就在文件系统上导入 TB 的现有数据而言，plone/zope 的可扩展性如何？

> ID：11166890
> 
> 赞同：0
> 
> 时间：2012-06-23T04:37:17.307
> 
> 标签：python, plone

就在文件系统上导入 TB 的现有数据而言，plone/zope 的可扩展性如何？我正在使用 Plone 4.1 并希望在 linux debian 的文件系统上导入现有文件/图像等。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-29T03:45:12.367

通过适当的调整，Plone 可以处理这种负载，但正如 Martijn 上面指出的那样，Plone 并不是真正的大型二进制文件存档的文档管理或版本控制解决方案——它首先是一个 Web 内容管理系统。我会考虑看看像Alfresco这样的东西。

# clojure - ClojureScript 参数声明错误

> ID：11166892
> 
> 赞同：7
> 
> 时间：2012-06-23T04:37:28.953
> 
> 标签：clojure, clojurescript

当突然出现这个错误时，我正在愉快地使用 clojurescript 破解：

> java.lang.IllegalArgumentException: 参数声明 clojure.core/let 应该是一个向量 core.clj:6567 clojure.core/assert-valid-fdecl core.clj:220 clojure.core/sigs

我尝试评论所有代码，重新启动服务器等.....我正在使用 cljsbuild 0.2.1 进行编译。如何调试此错误？

下面是完整的堆栈跟踪，它没有显示哪一行可能导致错误 -

```
Compiling "resources/public/cljs/client.js" failed:
java.lang.IllegalArgumentException: Parameter declaration clojure.core/let should be a vector
                core.clj:6567 clojure.core/assert-valid-fdecl
                 core.clj:220 clojure.core/sigs
                 core.clj:294 clojure.core/defn
              RestFn.java:146 clojure.lang.RestFn.applyTo
                 core.clj:605 clojure.core/apply
            compiler.clj:1394 cljs.compiler/macroexpand-1
            compiler.clj:1411 cljs.compiler/analyze-seq
            compiler.clj:1468 cljs.compiler/analyze
            compiler.clj:1416 cljs.compiler/analyze-seq
            compiler.clj:1468 cljs.compiler/analyze
            compiler.clj:1461 cljs.compiler/analyze
             compiler.clj:829 cljs.compiler/analyze-block
            compiler.clj:1036 cljs.compiler/eval1347[fn]
             MultiFn.java:177 clojure.lang.MultiFn.invoke
            compiler.clj:1414 cljs.compiler/analyze-seq
            compiler.clj:1468 cljs.compiler/analyze
            compiler.clj:1416 cljs.compiler/analyze-seq
            compiler.clj:1468 cljs.compiler/analyze
            compiler.clj:1461 cljs.compiler/analyze
            compiler.clj:1487 cljs.compiler/analyze-file
            compiler.clj:1153 cljs.compiler/analyze-deps
            compiler.clj:1187 cljs.compiler/eval1420[fn]
             MultiFn.java:177 clojure.lang.MultiFn.invoke
            compiler.clj:1414 cljs.compiler/analyze-seq
            compiler.clj:1468 cljs.compiler/analyze
            compiler.clj:1461 cljs.compiler/analyze
            compiler.clj:1529 cljs.compiler/compile-file*
            compiler.clj:1567 cljs.compiler/compile-file
            compiler.clj:1628 cljs.compiler/compile-root
              closure.clj:367 cljs.closure/compile-dir
              closure.clj:399 cljs.closure/eval2024[fn]
              closure.clj:266 cljs.closure/eval1952[fn]
              closure.clj:413 cljs.closure/eval2011[fn]
              closure.clj:266 cljs.closure/eval1952[fn]
              closure.clj:877 cljs.closure/build
              compiler.clj:49 cljsbuild.compiler/compile-cljs[fn]
              compiler.clj:48 cljsbuild.compiler/compile-cljs
             compiler.clj:116 cljsbuild.compiler/run-compiler
             NO_SOURCE_FILE:1 user/eval2452[fn]
              LazySeq.java:42 clojure.lang.LazySeq.sval
              LazySeq.java:60 clojure.lang.LazySeq.seq
                  RT.java:473 clojure.lang.RT.seq
                 core.clj:133 clojure.core/seq
                core.clj:2725 clojure.core/dorun
                core.clj:2741 clojure.core/doall
             NO_SOURCE_FILE:1 user/eval2452
           Compiler.java:6511 clojure.lang.Compiler.eval
           Compiler.java:6501 clojure.lang.Compiler.eval
           Compiler.java:6500 clojure.lang.Compiler.eval
           Compiler.java:6501 clojure.lang.Compiler.eval
           Compiler.java:6477 clojure.lang.Compiler.eval
                core.clj:2797 clojure.core/eval
                 main.clj:297 clojure.main/eval-opt
                 main.clj:316 clojure.main/initialize
                 main.clj:349 clojure.main/null-opt
                 main.clj:427 clojure.main/main
              RestFn.java:421 clojure.lang.RestFn.invoke
                 Var.java:419 clojure.lang.Var.invoke
                 AFn.java:163 clojure.lang.AFn.applyToHelper
                 Var.java:532 clojure.lang.Var.applyTo
                 main.java:37 clojure.main.main 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-26T16:59:30.727

The compiler should ideally emit a line number for your syntax error. Somewhere you have a malformed let expression.

# windows-phone-7 - 单击时更改图像

> ID：11166905
> 
> 赞同：1
> 
> 时间：2012-06-23T04:40:34.317
> 
> 标签：windows-phone-7

我在我的应用程序中放置了一个图像作为按钮，我想在单击按钮时更改图像，如果我离开它必须恢复其原始图像。手机7可以吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-23T05:06:02.277

给你的按钮一个 Click 事件处理程序和你的图像一个名称，即：

```
<Button Click="ImageButton_Click" ...>
    <Button.Content>
        <Image Name="Image" ImageSource="ImageSource.jpg" />
    </Button.Content>
</Button> 
```

然后在事件处理程序中

```
private void ImageButton_Click(object sender, RoutedEventArgs e)
{
    this.Image.ImageSource = new BitmapImage(
        new Uri("NewImageSource.jpg", UriKind.Relative));
} 
```

当您退出应用程序时，如果您在其他地方导航，它要么被墓碑化（这意味着它基本上会关闭并丢失所有信息，但保存的信息除外），或者如果您按下后退按钮则完全关闭，其中任何一个都会将图像重置为其原始状态。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-28T11:37:39.650

添加两个命名空间

```
using System.Windows.Resources;
using System.Windows.Media.Imaging; 
```

为鼠标进入和鼠标离开创建两个事件

```
private void btn_back_MouseEnter(object sender, MouseEventArgs e)
    {
        Uri myfile = new Uri("image.png", UriKind.Relative);
        StreamResourceInfo resourceInfo = Application.GetResourceStream(myfile);
        BitmapImage myimage = new BitmapImage(myfile);
        myimage.SetSource(resourceInfo.Stream);
        btn_back.Source = myimage;
    }
    private void btn_back_MouseLeave(object sender, MouseEventArgs e)
    {
        Uri myfile = new Uri("image.png.png", UriKind.Relative);
        StreamResourceInfo resourceInfo = Application.GetResourceStream(myfile);
        BitmapImage myimage = new BitmapImage(myfile);
        myimage.SetSource(resourceInfo.Stream);
        btn_back.Source = myimage;
    } 
```

而xaml文件是

```
 <Image Canvas.Left="10" Canvas.Top="17" x:Name="btn_back" Source="/NewUIChanges;component/Images/back_normal.png" Stretch="Fill"  MouseLeftButtonUp="img_cnvstop_MouseLeftButtonUp" MouseEnter="btn_back_MouseEnter" MouseLeave="btn_back_MouseLeave" /> 
```

# javascript - 在 angular.js 中过滤 $routeParams

> ID：11166909
> 
> 赞同：2
> 
> 时间：2012-06-23T04:42:18.823
> 
> 标签：javascript, angularjs

我正在尝试过滤从 json 文件返回的数据的 $routeParams。下面是我的代码：

```
function PostDetailController($scope, $routeParams, $http) {
    $http.get('json/posts.json').success(function(data){
        $scope.photo = data;
    });
} 
```

如何过滤给定 url 的 id？下面是我的 json 的样子

```
{
    "id": 1,
    "name": "details1",
    "title": "Test Title",
    "description": "Sample Description",
    "image": "img/1.jpg",
    "tags": ["photo", "internet"],
    "user": "hilarl",
    "comments": ["sample comment"],
    "likes": 23,
    "dislikes": 100,
    "resolution": { "x": 150, "y": 58 }
},
{
    "id": 2,
    "name": "details2",
    "title": "Test Title",
    "description": "Sample Description",
    "image": "img/2.jpg",
    "tags": ["photo", "internet"],
    "user": "hilarl",
    "comments": ["sample comment"],
    "likes": 23,
    "dislikes": 100,
    "resolution": { "x": 150, "y": 58 }
} 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-06-23T15:59:42.500

假设您有这样定义的路线：

```
$routeProvider.when('/post/:postId', {...}) 
```

然后在您的控制器中，您可以从 $routeParams 检索 id：

```
function PostDetailController($scope, $routeParams, $http) {
    $http.get('json/posts.json').success(function(data){
        angular.forEach(data, function(item) {
          if (item.id == $routeParams.postId) 
            $scope.photo = item;
        });
    });
} 
```

# ruby-on-rails - Active Records - has_one 模型的条件在哪里？

> ID：11166922
> 
> 赞同：0
> 
> 时间：2012-06-23T04:44:54.387
> 
> 标签：ruby-on-rails, ruby-on-rails-3, activerecord

如果我有以下 has_one 设置：

```
class Account
 has_one :user 
```

我该怎么做@account.user.where(:visible => true)

或者更具体地说，我如何以类似于 has_many 的方式调用 has_one 关系的条件？我目前正在使用看起来很愚蠢的用户范围？

```
def is_visible?
  if self.visible
    return self 
  else
    return false
end 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-23T05:27:27.313

您需要使用连接来获取可见用户帐户的列表，但是一旦您了解了查询，这并不难。试试这个：

```
@accounts = Account.joins(:user).where(:users => {:visible => true}) 
```

您还可以轻松地将其封装到范围中。

```
scope :with_visible_user, joins(:user).where(:users => {:visible => true})

@accounts = Account.with_visible_user 
```

# ruby-on-rails - 样式化 ERB 的最佳实践

> ID：11166935
> 
> 赞同：3
> 
> 时间：2012-06-23T04:47:15.590
> 
> 标签：ruby-on-rails, ruby, styles, indentation, erb

我想就 ERB 模板样式的最佳实践获得一些社区意见。

*   我使用的选项卡宽度为 2。
*   我使用软标签（空格）。
*   我使用 80 的自动换行。

除了 ERB 模板中的 Ruby 代码之外，我还缩进了所有 HTML 标记。

这通常使得 ERB 非常易读。

假设上述或类似参数，您更喜欢缩进较长的行吗？

考虑这个例子：

```
<div class="content">
  <div class="row">
    <div class="span10">
      <%= simple_form_for(@user, html: { class: 'form-horizontal' }) do |f| %>
        <%= f.input :MembershipID, label: 'Membership ID :', hint: 'Use the user\'s official Membership ID if they have one. Otherwise, enter their phone number (e.g. 2125551234)', input_html: { value: @user[:MembershipID] } %>
      <% end %>
    </div>
  </div>
</div> 
```

f.input行变得非常丑陋且难以阅读**。**

我在想这样的东西会很理想，但我想在改变我的很多风格之前得到一些反馈。

```
<div class="content">
  <div class="row">
    <div class="span10">
      <%= simple_form_for(@user, html: { class: 'form-horizontal' }) do |f| %>
        <%= f.input :MembershipID, 
                label: 'Membership ID :', 
                hint: 'Use the user\'s official Membership ID if they have one. Otherwise, enter their phone number (e.g. 2125551234)', 
                input_html: { value: @user[:MembershipID] } %>
      <% end %>
    </div>
  </div>
</div> 
```

我来回考虑是否从 ERB 开始标记**<%=**或从帮助程序名称**f.input**进行双重缩进更好。

请称重！（请不要把它变成 ERB 与 HAML 的辩论，只假设 ERB！）

谢谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-23T07:53:27.313

需要考虑的一些事项：

*   不要使用“span10”和“row”类，而是在你的 CSS 中应用它
*   使用助手，即使您不打算重用它们（目前），它也会清理您的代码

这给了你类似的东西：

```
<div class="content">
  <%= simple_form_for(@user) do |f| %>
    <%= membership_input_field %>
  <% end %>
</div> 
```

SCSS：

```
.content {
  @extend .row;
  #users_form {
    @extend .span10;
    @extend .form-horizontal;
  }
} 
```

我现在无法对此进行测试，但您应该了解总体思路。更简洁，更少无用的类来设置 HTML 样式。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-24T02:46:47.150

对于长或复杂的 ERB 扩展，我经常像这样使用多行：

```
<div>
  <div>
    <%=
      some_call_with_lots_of_args_or_a_block(
        arg1,
        arg2
      ) do
        block_stuff()
      end
    %>
  </div>
</div> 
```

很多行，但是对于给定的“sense”值，缩进现在都“有意义”。！

# sql-server-2008 - SSIS GroupBy / Master - 详细文件导出

> ID：11166936
> 
> 赞同：0
> 
> 时间：2012-06-23T04:47:26.887
> 
> 标签：sql-server-2008, ssis

我有一个 SSIS 项目，它查询数据库并获取项目级数据。

数据应导出到两个平面文件，一个是摘要文件，另一个是详细文件。这两个文件都使用在 SSIS 数据流期间生成的索引（字符串）列进行链接。

现在我基本上想要摘要文件的详细数据的“不同索引”。然而，它不是一个简单的聚合，一些列是字符串，而不是一个计数，我想要像“first(fieldname)”这样的东西（就像在 SSRS 中一样）。

任何建议如何做到这一点？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-25T09:15:48.963

首先是类似于“从聚合中选择 TOP 1 *”。
如果您可以在源上使用以下查询，则没有问题。如果不是，您需要在数据流中以某种方式模拟这一点。（查找、合并连接等）

这是sql中的示例：

```
select a.id, (select top 1 b.name from tableA b where a.id = b.id)
from tableA a
group by id 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-25T13:06:04.753

您可以在平面文件目标之前使用派生列，但您需要编写逻辑以根据数据集的现有字段生成此新字段

# actionscript-3 - 在按钮动作脚本中播放电影 3

> ID：11166937
> 
> 赞同：-2
> 
> 时间：2012-06-23T04:48:04.973
> 
> 标签：actionscript-3, button, movieclip

好的，这一直困扰着我，我有一个迷宫，它使用按钮内的电影剪辑让播放器和迷宫工作现在我想让电影播放`keypress`并停止，`release`这样播放器就会“循环行走”。我试过了

```
Player.tswalk //(button.movie clip)
this.player... 
root.player... 
_root.player... 
```

以及我能想到的所有其他组合，但都没有奏效

（我也想换掉动作脚本中的影片剪辑以更改为不同的方向精灵）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-25T12:03:29.303

对于初学者，您不应该在 actionscript 3 中使用 root。此外，这个问题非常模糊。不过我会尽力帮忙的。我假设你有 keyUp 和 KeyDown 事件处理程序的工作。如果不是，那是一个完全不同的问题。但是在 AS3 中引用影片剪辑可以通过简单地引用其名称来完成。如果您要播放的电影的实例名称是“MyMovieClip1”，那么您只需执行以下操作：

```
MyMovieClip1.play(); 
```

要阻止它播放，您将执行以下操作：

```
MyMovieClip1.stop(); 
```

# c - 单引号的行为与 Ruby 中的行为相同吗？

> ID：11166938
> 
> 赞同：-2
> 
> 时间：2012-06-23T04:48:35.497
> 
> 标签：c, ruby

我开始探索 Ruby 的基础，它是 C，

```
printf('%%\\'); 
```

上面的代码在 C 中是否允许？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-23T04:54:18.827

```
#include <stdio.h>

int main(void) {
        printf('%%\\');
        return 0;
} 
```

6行。请下次尝试。它会产生运行时错误。

所以不，这是不允许的。你真的要问这个吗？

如果您不想在本地进行/手头没有编译器/其他任何原因，我建议您使用 ideone 和 codepad 快速测试。

编辑：

看到另一个答案，我认为我应该注意到

```
#include <stdio.h>

int main(void) {
        printf("%d", '%%\\');
        return 0;
} 
```

非常好，打印 2434396。我只是不想让你知道单引号是非法的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-23T04:53:33.263

不，不允许使用该代码。

在 Ruby 中，单引号用于编写字符串文字，即字符串类型的值。在 C`'%%\\'`中具有 int 类型。由于`printf`期望字符串 ( `char*`) 作为其第一个参数，`'%%\\'`因此不是 . 的有效第一个参数`printf`。

# xml - VBScript 无法选择 XML 节点

> ID：11166940
> 
> 赞同：0
> 
> 时间：2012-06-23T04:48:54.603
> 
> 标签：xml, asp-classic, vbscript, msxml

我试图从一些 web 服务响应 XML 中选择节点无济于事。出于某种原因，我能够选择根节点（“xmldata”）但是，当我尝试更深入地钻取（“xmldata/customers”）时，一切都返回为空！以下是 Web 服务返回的 XML 示例。

```
<xmldata>
  <customers>
    <customerid>22506</customerid>
    <firstname>Jim</firstname>
    <issuperadmin>N</issuperadmin>   
    <lastname>Jones</lastname>
  </customers>
</xmldata> 
```

这是我试图选择 customerid、firstname 和 lastname 的代码；

```
' Send the Xml
oXMLHttp.send Xml_to_Send

' Validate the Xml
dim xmlDoc
set xmlDoc = Server.CreateObject("Msxml2.DOMDocument")
xmlDoc.load (oXMLHttp.ResponseXML.text)
if(len(xmlDoc.text) = 0) then
    Xml_Returned = "<B>ERROR in Response xml:<BR>ERROR DETAILS:</B><BR><HR><BR>" 
end if

dim nodeList
Set nodeList = xmlDoc.SelectNodes("xmldata/customers")

For Each itemAttrib In nodeList
    dim custID, custLname, custFname    
    custID =itemAttrib.selectSingleNode("customerid").text
    custLname =itemAttrib.selectSingleNode("lastname").text
    custFname =itemAttrib.selectSingleNode("firstname").text
    response.write("News Subject: " & custID)
    response.write("<br />News Subject: " & custLname)
    response.write("<br />News Date: " & custFname)
Next 
```

上面代码的结果是 zilch！页面上没有写入任何内容。一件奇怪的事情是，如果我选择根元素并得到它的长度，如下所示；

```
Set nodeList = xmlDoc.SelectNodes("xmldata")
Response.Write(nodeList.length) '1 is written to page 
```

它正确地确定了 1 的长度。但是，当我尝试对下一个节点进行相同操作时，如下所示；

```
Set nodeList2 = xmlDoc.SelectNodes("xmldata/customers")
Response.Write(nodeList.length) '0 is written to page 
```

它返回长度为 0。为什么！

请注意，这不是我尝试访问这些节点值的唯一方法。我只是无法弄清楚我做错了什么。有人可以帮我吗。干杯。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-23T06:08:26.290

**简短的回答**

oXMLHttp.ResponseXML.text 可能会返回一些文本，但不是 .load 参数所需的“包含指定 XML 文件位置的 URL 的字符串”。所以更换

```
xmlDoc.load (oXMLHttp.ResponseXML.text) 
```

和

```
xmlDoc.loadXml oXMLHttp.ResponseXML.xml 
```

如果那“行不通”，请说出来；然后，我将尝试提供更长的答案。

（对简短回答的 PS：AnthonyWJones 的建议**不要**转换 XML 两次是合理的；我提供了这种“对现有代码影响最小”的方法，希望让 OT 克服第一个障碍，而不是作为普遍适用的策略。）

**更长的答案**

如果您在 ASP 页面上遇到 XML 问题，您应该尝试在控制台脚本中隔离和测试特定于 XML 的问题。对于您的问题，我用代码填充了一个框架（加载 .xml 文件，检查错误），以通过 XPath 和 DOM 树访问节点：

```
 Dim oFS    : Set oFS  = CreateObject( "Scripting.FileSystemObject" )
  Dim sFSpec : sFSpec   = oFS.GetAbsolutePathName("..\data\00.xml")
  Dim oXml   : Set oXml = CreateObject("Msxml2.DOMDocument")

  oXml.setProperty "SelectionLanguage", "XPath"
  oXml.async = False
  oXml.load sFSpec

  If 0 = oXml.parseError.errorCode Then
     WScript.Echo "loaded:", sFSpec
     WScript.Echo "root:", oXml.documentElement.tagName

     Dim sXPath, ndlFnd, ndChild, ndFnd

     sXPath = "/xmldata/customers"
     Set ndlFnd = oXml.selectNodes(sXPath)
     If 0 = ndlFnd.length Then
        WScript.Echo "no '" & sXPath & "' found"
     Else
        WScript.Echo "found", ndlFnd.length, "node(s) for '" & sXPath & "'"
        sXPath = "firstname"
        For Each ndChild In ndlFnd
            WScript.Echo "child:", ndChild.tagName
            Set ndFnd = ndChild.selectSingleNode(sXPath)
            If ndFnd Is Nothing Then
               WScript.Echo "no '" & sXPath & "' found"
            Else
               WScript.Echo ndFnd.text, "==", ndChild.childNodes(1).text
            End If
        Next
     End If
  Else
     WScript.Echo "errorCode:", oXml.parseError.errorCode
     WScript.Echo oXml.parseError.reason
  End If 
```

输出：

```
loaded: E:\trials\SoTrials\answers\11166940\data\00.xml
root: xmldata
found 1 node(s) for '/xmldata/customers'
child: customers
Jim == Jim 
```

如你看到的

1.  我使用标准/批准的方法来检查单个步骤的结果（例如 parseError（而不是 voodoo 长度测试）以查看我是否得到了格式正确/有效/可用的文档）
2.  如有疑问，我会放入 WScript.Echo 以确保我对 VBScript 应该提供的假设是否成立。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-23T15:10:17.253

首先停止这样做：

```
Dim doc : Set xmlDoc = CreateObject("MSXML2.DOMDocument")
xmlDoc.LoadXML (oXmlHttp.responseXML.xml) 
```

响应中的 XML 被解析为 DOM，然后您要求将其转换回字符串 (.xml)，然后再将其解析为另一个 DOM (.LoadXML)。

只需这样做：

```
Dim xmlDoc : Set xmlDoc = oXmlHttp.responseXML 
```

其次，您的答案是正确的 XPath 区分大小写，因此您的 XPath（除了 Ekkehard 已经指出的 .text 错误）将无法工作，因为您获得的 xml 与您认为的不匹配。

最后，“骆驼大小写”的定义确实有所不同，但通常这个“邮政地址”是骆驼大小写的，这个“邮政地址”被称为“帕斯卡大小写”。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-23T12:02:19.927

好的，所以我终于弄清楚了我做错了什么。由于我正在检索的 xml 来自 web 服务，并且我对它的信息有限，因此我使用以下内容将 xml 写入页面，以便我可以看到它的结构。

```
Response.Write oXMLHttp.ResponseXml.xml 
```

出于某种原因（也许有人可以填写这部分），它以小写形式编写了所有 XML 标记。事实证明，经过一番调查和以下操作后，我发现这不是事实！

```
dim nodeList
Set nodeList = xmlDoc.SelectNodes("//xmldata/")

for each item In nodeList
    response.write(item.text & " -> Tag Name: " & item.nodeName & "<br />")
Next

'this wrote the following to the page
'22506 -> Tag Name: CustomerID
'Jim -> Tag Name: FirstName
'N -> Tag Name: IsSuperAdmin
'Jones 2 -> Tag Name: LastName 
```

如您所见，“nodeName”属性输出显示标签为驼峰式。所以 ResponseXML 相当具有误导性，并且看到 XPath 区分大小写使我无法选择有问题的节点。

# gwt - GWT 同步调用

> ID：11166942
> 
> 赞同：3
> 
> 时间：2012-06-23T04:48:59.093
> 
> 标签：gwt, asynchronous, sync, synchronous, jsni

我在 GWT 中有一个方法，它使用请求的 fire 方法从数据库中检索数据，因为你们都知道它是异步的，我从 JS 调用这个方法，所以我需要同步是否可能

```
private static String retriveLocation(String part)
{
    ClientFactory clientFactory = GWT.create(ClientFactory.class);
    MyRequestFactory requestFactory = clientFactory.getRequestFactory();
    YadgetRequest request = requestFactory.yadgetRequest();
    String criteria = "!" + part;
    final ArrayList<String> tags = new ArrayList<String>();

    request.getTagsStartingWith(criteria, 10, 0).fire(
            new Receiver<List<TagProxy>>() {
                @Override
                public void onSuccess(List<TagProxy> tagList) {
                    String output = "[";

                    for (TagProxy pt : tagList) {
                        output += "{";
                        output += "\"id\":" + "\"" + pt.getId() + "\",";
                        output += "\"value\":"
                                + "\""
                                + pt.getName().replaceAll("\"", "")
                                        .replaceAll("!", "") + "\"";
                        output += "},";

                    }
                    if (output.length() > 2)
                        output = output.substring(0, output.length() - 1);
                    output += "]";
                    tags.add(output);

                }

                @Override
                public void onFailure(ServerFailure error) {

                }

            });

    return tags.size() + "";

} 
```

并像这样从 JS 调用这个函数：

```
public static native void exportStaticMethod() /*-{
    $wnd.computeLoanInterest =
    $wnd.getAutocomplete =@com.yadget.client.Yadget::retriveLocation(Ljava/lang/String;);
}-*/; 
```

我在里面`onModuleLoad()`打电话`exportStaticMethod()`。

在 html 中我有一个按钮，我`getAutocomplete()`像这样调用 onclick：

```
<input type="button" onclick="alert(getAutocomplete('j'))" value="momo" /> 
```

问题是大小总是返回 0，因为该方法是异步的，但是如果我可以返回`onSuccess`可以解决我的问题的值。请问有什么想法吗？我已经在谷歌上搜索了 2 天，但没有得到任何答案。

换句话说：

我有 JS 方法我需要它来调用 java 方法来从 DB 中同步检索数据！

例子

如果我有一个 HTML 按钮并且单击时我会将 ID 传递给一个函数，我需要通过 GWT 从数据库中检索名称并提醒它；仅仅因为 GWT 是异步的，我不能每次都这样做，当我提醒结果时，它会是一个空的，因为它还没有被填充。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-23T10:17:46.350

您不能同步使用本机 GWT RPC。我不确定这是您要问的，但这里是如何同步调用服务器：

```
private native String makeSyncAjaxCall(String url, String msgText, String conType)/*-{
    var xhReq = new XMLHttpRequest();
    xhReq.open(conType, url, false);
    if(conType == "POST") xhReq.setRequestHeader('Content-Type','application/x-www-form-urlencoded');
    xhReq.send(msgText);
    var serverResponse = xhReq.status + xhReq.responseText;
    return serverResponse;
}-*/; 
```

请注意，我不是在讨论这是否是个好主意。您可能应该坚持使用 Async 并将警报放在成功事件上。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-23T10:19:12.560

GWT 不允许对服务器进行同步调用，因为它们会使您的浏览器挂起，直到它得到响应，因此出于显而易见的原因，最好您可以更改流程，以便服务器的结果将在内部处理`onSuccess`事件处理程序。

> 我的业务需要是让 JS 函数从数据库中检索数据，但它必须是同步的

您只能通过 java（或使用任何其他服务器端语言）从数据库中获取数据，但不能使用 JavaScript。`RequestBuilder`只需使用GWT RPC 机制或 GWT RPC 机制从 GWT 进行异步调用。如前所述，返回的数据可以在适当的处理程序中进行处理。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-06-23T11:53:24.857

艾哈迈德，指的是你引用的例子：

在 Click 上调用一个函数，例如 GWT 中的“getNamefromID()”，它对 DB 进行异步调用，在 onSuccess() 函数中，调用一个会提醒名称的函数。

```
public void getNamefromID(int ID) {
    String postUrl = "http://mani/getName";
    String requestData = "q=ID";
    RequestBuilder builder = new RequestBuilder(RequestBuilder.POST,
            postUrl);
    builder.setHeader("Access-Control-Allow-Origin", "*");
    try {
        builder.sendRequest(requestData.toString(), new RequestCallback() {
            public void onError(Request request, Throwable e) {
                Window.alert(e.getMessage());
            }

            public void onResponseReceived(Request request,
                    Response response) {
                if (200 == response.getStatusCode()) {
                    Window.alert("Name :" + response.getText());
                } else {
                    Window.alert("Received HTTP status code other than 200 : "
                            + response.getStatusText()
                            + "Status Code :"
                            + response.getStatusCode());
                }
            }
        });
    } catch (RequestException e) {
        // Couldn't connect to server
        Window.alert(e.getMessage());
    }
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2016-11-15T13:16:59.553

来自[https://stackoverflow.com/a/40610733/6017801](https://stackoverflow.com/a/40610733/6017801)：

GWT 调用**XMLHttpRequest.open()**并将 true 作为其第三个参数，这意味着调用将是异步的。我解决了类似的测试需求，只是强制第三个参数始终为假：

```
private static native void fakeXMLHttpRequestOpen() /*-{
   var proxied = $wnd.XMLHttpRequest.prototype.open;

   (function() {
       $wnd.XMLHttpRequest.prototype.open =
           function() {
                arguments[2] = false;
                return proxied.apply(this, [].slice.call(arguments));
            };
        })();
}-*/; 
```

在调用*fakeXMLHttpRequestOpen()*之后，对 XMLHttpRequest 的任何进一步使用都将同步执行。例如：

```
remoteSvc.getResult(new AsyncCallback<String>() {
    @Override
    public void onSuccess(String result) {
        GWT.log("Service called!");
    }

    @Override
    public void onFailure(Throwable caught) {
        GWT.log("Service failed...");
    }
}

GWT.log("Last message"); 
```

将始终呈现：

```
Service called!
Last message 
```

有关 XMLHttpRequest.open() 规范，请参阅[https://developer.mozilla.org/en-US/docs/Web/API/XMLHttpRequest/open](https://developer.mozilla.org/en-US/docs/Web/API/XMLHttpRequest/open)。

# android - Android getLatitude() 返回大地或地心纬度？

> ID：11166943
> 
> 赞同：6
> 
> 时间：2012-06-23T04:49:19.893
> 
> 标签：android, gps, location, gis, latitude-longitude

Android 的 location.getLatitude() 方法是否提供大地或地心纬度？

如果是大地测量，它是基于 WGS84 还是 GR80 椭球？

API规范令人惊讶地缺乏，它只声明：

```
public double getLatitude ()

Since: API Level 1
Returns the latitude of this fix. 
```

[http://developer.android.com/reference/android/location/Location.html#getLatitude](http://developer.android.com/reference/android/location/Location.html#getLatitude) ()

感谢您在这里的任何帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-23T19:55:10.387

大地纬度用于最常见的目的，例如地图。然后，API 报告其他任何内容将是非常奇怪的。与测绘相比，地心纬度在更专业和学术领域的用途。

这是一个有趣的问题（+1），我很想知道它是否是您希望的地心纬度，如果是的话，是什么导致了这个问题。

您的第二个问题：位置最终来自 GPS，无论是由设备本身、A-GPS 与否，还是从移动运营商塔的信号强度三边测量，进而具有精确的 GPS 位置。根据定义，与 GPS 一起使用的是 WGS84 椭球，而不是 GRS80 椭球，它与 WGS84 略有不同。

我无法证明这一点，但假设基于 WGS84 的大地纬度是非常安全的。

# android - 在 Android 中创建动态按钮，如磁贴

> ID：11166949
> 
> 赞同：0
> 
> 时间：2012-06-23T04:50:21.193
> 
> 标签：android

如何创建这样的动态按钮视图？这里+添加按钮是一个静态的。其他按钮应该是动态创建的，如图所示。根据从数据库中检索到的数据，这还没有被创建，并且使用添加按钮可以添加新按钮。

![动态按钮视图](../Images/a6550709fadfd1a7d19eed9add9244c6.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-23T05:07:50.417

在您的 xml 文件中有一个垂直方向的线性布局。

在java类文件中声明为

`ViewGroup lr = (ViewGroup)findViewVyId(R.id.dd)`

```
for(int i = 0; i < x1; i++)
{
     lr1 = new LinearLayout(this);
     lr1.setOrientation(LinearLayout.HOIZONTAL);
     lr.addView(lr1);
     for(int j = 0; j < xx1; j++ )
     {
         if(i==0)
         {
        if(j == 0)
        {
          final View child = getLayoutInflater().inflate(R.layout.nw, null);
          lr.addView(child);
        }
        else
        {
            lr2 = new LinearLayout(this);
            lr2.setOrientation(LinearLayout.VERTICAL);

            for(int k = 0; k<2; k++)
            {
                final View b3 = new Button(this);
                lr2.addView(b3);
            }
            lr.addView(lr2);
        }
      }
      else
      {
        final View b2 = new Button(this);
        lr.addView(b2);
      }
      lr1.setId(main_cnt);
      main_cnt++;
          if(i == 2)
          {
        if(j == 2)
        {
            break;
        }
          }
     }
} 
```

第一个 for 循环决定有多少个布局按垂直顺序排列，第二个 for 循环决定线性布局中有多少个按钮按水平顺序排列。`main_cnt`用于获取每个按钮的id

孩子的 xml 文件是我放置添加（大按钮）的地方

# c# - 班级成员是否占用内存？

> ID：11166956
> 
> 赞同：6
> 
> 时间：2012-06-23T04:51:46.977
> 
> 标签：c#, asp.net, .net, memory

一个类通常由成员变量和方法组成。当我们创建类的实例时，会为类的成员变量分配内存。成员方法是否也占用内存？这些方法存储在哪里？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-23T04:57:31.187

假设我们有以下类：

```
public class Person
{
   public string Name { get; set; }

   public Person(string name)
   {
        Name = name;
   }

   public string SayName()
   {
      string hello = "Hello! My name is ";
      return hello + name;
   }
}

Person p = new Person("John");
string yourName = p.SayName(); 
```

`SayName()`函数继续运行，对象`Call Stack`及其`Person p`属性 ( `Name`) 将保留在内存中，直到`Garbage Collection`进入并清理它。

在内存方面，你应该更关心对象的实例字段（属性），你正在处理的对象的数量，以及你的对象是否是某个时间`Reader`或`Connection`。如果你的对象是一个`Reader`或者`Connection`你需要考虑一个`using`语句。

伪代码：

```
using(DatabaseConnection dbConn = new DatabaseConnection()
{
    // Process your calls and data
}
// The object is Disposable and it's resources are cleared 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-12-01T04:28:49.493

Class 只是一个蓝图，只要没有定义类类型的变量，它就不会占用任何空间。一旦定义了类类型的对象/实例，类成员将占用内存中的一些空间。并且实例的大小等于类中定义的成员大小的总和。

# android - 我可以为布局设置多布局方向吗？

> ID：11166957
> 
> 赞同：0
> 
> 时间：2012-06-23T04:51:54.913
> 
> 标签：android, android-layout, android-linearlayout

我有一个动态布局，并在线性布局中添加组件。组件的数量也是动态的。

当线性布局方向为水平时，项目将水平添加，而垂直项目则垂直添加。

现在我可以先水平平铺项目，然后垂直平铺项目，就像垂直填充项目一样。

或者我可以使用任何其他布局来满足我的需要。

像这样![在此处输入图像描述](../Images/0ebda4b998e9b2a3c4606d9578e48d37.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-05T21:06:00.200

您绝对可以`LinearLayout`拥有多个方向的嵌套元素。例如：

```
<LinearLayout 
    android:id="@+id/main_layout"
    android:layout_height="match_parent"
    android:layout_width="match_parent"
    android:orientation="vertical" >

    <LinearLayout
        android:id="@+id/firstRow"
        android:layout_height="wrap_content"
        android:layout_width="match_parent"
        android:orientation="horizontal" >
        ...
    </LinearLayout>

    <LinearLayout
        android:id="@+id/secondRow"
        android:layout_height="wrap_content"
        android:layout_width="match_parent"
        android:orientation="horizontal" >
        ...
    </LinearLayout>

    <LinearLayout
        android:id="@+id/thirdRow"
        android:layout_height="wrap_content"
        android:layout_width="match_parent"
        android:orientation="horizontal" >
        ...
    </LinearLayout>
</LinearLayout> 
```

使用这样的结构将允许您构建您描述的布局。

对于动态行，您可以执行以下操作：

**布局行.xml**

```
<LinearLayout
    android:layout_height="wrap_content"
    android:layout_width="match_parent"
    android:orientation="horizontal" /> 
```

**MainActivity.java**

```
mainLayout = (LinearLayout) findViewById(R.id.main_layout);

// for each dynamic row you can inflate a new view and add it
dynamicRow1 = getLayoutInflater.inflate(R.layout.layout_row, null);
mainLayout.addView(dynamicRow1);

dynamicRow2 = getLayoutInflater.inflate(R.layout.layout_row, null);
mainLayout.addView(dynamicRow2);

dynamicRow3 = getLayoutInflater.inflate(R.layout.layout_row, null);
mainLayout.addView(dynamicRow3); 
```

在每一行中，您可以使用相同类型的逻辑以编程方式添加需要创建的动态视图。

# google-maps - 当导入页面有谷歌地图 v2 时，如何将整个页面导入不同的网站？

> ID：11166961
> 
> 赞同：0
> 
> 时间：2012-06-23T04:54:06.493
> 
> 标签：google-maps

我正在尝试将客户的页面（整个页面）导入我的页面，即使我们都授予对彼此域的访问权限，我仍然收到此错误消息：此网站需要不同的 Google Maps API 密钥。可以在[http://code.google.com/apis/maps/documentation/javascript/v2/introduction.html#Obtaining_Key](http://code.google.com/apis/maps/documentation/javascript/v2/introduction.html#Obtaining_Key)生成新密钥。

这是一个您可以访问以查看实时示例的页面：[http ://web-success-marketing.com/beton-region/beton.php](http://web-success-marketing.com/beton-region/beton.php)

这是导入的实际页面：www.acces411.ca/listing/results.php?keyword=béton&where=Mont+Saint+Hilaire

这是对情况的更详细描述：groups.google.com/forum/?fromgroups#!topic/google-maps-api/G0SJ1Wud4nc

你认为你能帮助解决这个问题吗？

赛博。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-23T05:17:10.403

Seb，您的问题有点不清楚，您要继续使用版本 2 密钥吗？

如果是这样，您需要找出在 www.acces411.ca 中创建**原始密钥**的用户的 google 帐户，然后将您的域添加到**引用**列表中。

如果您不能这样做，您将不得不迁移到版本 3 并使用谷歌帐户创建一个新密钥。问候，

莉亚。

# awk - 如何使用awk删除文本文件中的行之间的空格？

> ID：11166964
> 
> 赞同：2
> 
> 时间：2012-06-23T04:55:06.693
> 
> 标签：awk

我想使用 awk 删除文本文件中的行之间的空格。我怎样才能用 awk 做到这一点？

```
abcd

abcd

abcd 
```

所需的输出将是

```
abcd
abcd
abcd 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-23T04:58:29.953

```
awk 'NF' data.txt 
```

将仅打印出 file 中的非空行`data.txt`。它仅通过打印字段数 ( `NF`) 非零（即大于零）的行来工作

或者，

```
awk 'length' data.txt 
```

通过仅打印长度为非零（即大于 0）的行来工作。

还有其他工具，例如`sed`or `grep`，也可以做到这一点，但是因为您特别要求`awk`解决方案。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-23T04:57:23.787

这将只输出非空行

```
awk '/./' test.txt 
```

这是另一种 unsing grep（匹配空行，然后使用 -v 反转结果）：

```
grep -v ^$ test.txt 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-23T04:59:39.013

要覆盖输入文件，您可以使用`sponge`：[Is there a way to modify a file in-place](https://unix.stackexchange.com/questions/11067/is-there-a-way-to-modify-a-file-in-p)

```
awk '/./ {print}' file | sponge file 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-23T05:11:26.960

也许这些行有空格（只有）（或没有）：

```
awk '!/^[[:blank:]]*$/' inputfile 
```

同样的事情`sed`：

```
sed '/^[[:blank:]]*$/d' inputfile 
```

# java - Struts2：struts.xml 不转发到动作名称

> ID：11166966
> 
> 赞同：1
> 
> 时间：2012-06-23T04:55:07.953
> 
> 标签：java, jsp, jakarta-ee, servlets, struts2

你会认为这是一个大问题。但可能有一个简单的问题，我找不到原因。

在名为 'index.jsp' 的 jsp 页面中有一个表单（简单登录），其操作名称为 'loginAction'。在动作类中，该`execute()`方法检查用户名、密码是否有效。如果它是一个有效的登录，execute() 方法返回 SUCCESS，它会转发到另一个名为 'account.jsp' 的 jsp 页面，该页面位于 WEB-INF 中名为 'jsp' 的文件夹中。

问题是，struts.xml 将所有有效登录转发到相关 url，但无法检索页面（account.jsp）。浏览器给出 404 错误。但是浏览器说“不可用”的 url 只是复制并粘贴手动到浏览器的地址栏。然后页面显示！！！
这是 struts.xml 文件

```
<struts>

<include file="/struts_auth.xml" />
<package name="default" extends="struts-default" >

    <action name="login" >
        <result>index.jsp</result>
    </action>        
    <action name="loginAction" class="com.app.action.LoginAction">
        <result name="success">/auth/acc</result>    
        <result name="input">index.jsp</result>
    </action>

</package> 
```

这是`struts_auth.xml`上面 struts.xml 中包含的文件

```
<struts>

<package name="author" extends="default" namespace="/auth" >

    <action name="acc">
        <result name="success">/WEB-INF/jsp/account.jsp</result>  
        <result name="input">index.jsp</result>
    </action>   

</package> 
```

这就是浏览器所说的原因
`description: The requested resource (/app/auth/acc) is not available.` 但是如果这个 url (http://localhost:8084/app/auth/acc) 只是复制到浏览器的地址栏中，它只会显示真实的页面。请让我知道我的问题在哪里。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-23T07:51:06.863

为了更好地理解，请参阅以下链接。[如何重定向到另一个动作](http://struts.apache.org/2.3.4/docs/redirect-action-result.html)

```
 <!-- Redirect to another namespace -->
    <result name="success" type="redirectAction">
        <param name="actionName">acc</param>
        <param name="namespace">/auth</param>
    </result> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-23T13:32:10.180

问题出在这里：`<result name="success">/auth/acc</result>.` 如果节点中没有给出类型名称，那么struts2本身会将dispatcher设置为默认类型。您可以像这样修改您的代码： `<result name="success" type="redirectAction">` `<param name="actionName">actionName</param>` `<param name="namespace">namespace</param>` `

# jsf-2 - JSF 2/Primefaces p:ajax 在 onchange 事件被触发后不更新面板

> ID：11166967
> 
> 赞同：0
> 
> 时间：2012-06-23T04:55:39.810
> 
> 标签：jsf-2, primefaces

在过去的两天里，我真的被这个问题困扰着，并且正在努力理解 Primefaces 如何根据他们的 ID 更新客户端上的 UI 组件。

我有 ah:selectOneMenu 计数要显示的面板数量。每个 p:panel 都将包含一个带有许多表单元素的 panelGrid。下拉菜单上的 onchange 事件被触发，我可以在托管 Bean 中看到计数。虽然我没有看到面板在客户端动态增加。我认为我的 p:ajax 参数有问题，但我不完全理解它是如何工作的。这是相关代码：

```
 <h:selectOneMenu id="numapps" value="#{mbean.appCount}">
                <f:selectItem itemLabel="1" itemValue="1" />
                <f:selectItem itemLabel="2" itemValue="2" />
                <f:selectItem itemLabel="3" itemValue="3" />
                <f:selectItem itemLabel="4" itemValue="4" />
                <f:selectItem itemLabel="5" itemValue="5" />
                <p:ajax update="appsContainer" event="change"   
                    listener="#{mbean.onChangeNumApps()}" />    
    </h:selectOneMenu>

    <p:panel id="appsContainer" >
           <p:panel header="Application" id="appsPane" value="#{mbean.submittedApps}" var="app" multiple="true"> 
```

submitApps 是一个包含面板表单元素的列表。这是我的 mbean 监听器：

```
public void onChangeNumApps()
{
    List<Apps> c = new ArrayList<Apps>();
    logger.info("on change event fired");
    logger.info("new value is "+mbean.getAppCount());
    for (int i=0;i < mbean.getAppCount();i++)
    {
        c.add(new App());
    }
    mbean.setSubmittedApps(c);
} 
```

我将 p:ajax 与 h:selectone 混合，因为由于某种原因我无法让 p:selectone 工作 - 可能是由于 CSS 与我的样式表发生冲突？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-23T08:18:31.857

从 JSF 树中添加/删除动态组件要简单得多。虽然我主要研究 RF 和 JSF2.0，所以在 primefaces 的代码方面我无法为您提供太多帮助，但我可以列出根据从值变化监听器。

在您的帖子中，您需要根据从

为此，您可以在 valuechanelistener 上获取所选面板数量的值。

1.  您在 valuechangelistener 中创建一个新面板。
2.  根据从 valuechangelistener 收到的数字创建所需的表单元素。
3.  将这些元素作为子元素添加到面板中。
4.  将此面板作为子面板添加到先前页面上存在的面板中。

您可以使用 JSF 内置的 uniqueID 功能，而不是手动为每个动态组件分配 ID，该功能将自动为您提供唯一 ID。如果您需要进一步使用动态组件来提取值，那么您需要将 ID 存储在单独的集合中，然后您可以根据 ID 获取动态组件的值。

要获取组件的唯一 ID：-

> FacesContext.getCurrentInstance().getViewRoot().createUniqueId();

要将组件动态添加到 JSF 树，请找到下面提到的代码片段：-

```
HtmlPanelGrid panelGrid=new HtmlPanelGrid();
panelGrid.setColumns(2);
String uniqueId=FacesContext.getCurrentInstance().getViewRoot().createUniqueId();
panelGrid.setId(uniqueId);    arrLstComponentIds.add(uniqueId);
HtmlInputText inputText = new HtmlInputText();    
HtmlOutputLabel outputLabel=new HtmlOutputLabel();
                                          panelGrid.getChildren().add(outputLabel);
panelGrid.getChildren().add(inputText);
htmlGridElement = new HtmlPanelGrid();      htmlGridElement.getChildren().add(panelGrid); 
```

您需要重新呈现面板，以便反映 JSF 树中的更改。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-23T09:11:52.950

让它与 ui:repeat 一起工作，而不是在面板上迭代。

# java - 反转双向链表

> ID：11166968
> 
> 赞同：6
> 
> 时间：2012-06-23T04:55:56.190
> 
> 标签：java, list, linked-list

下面的这个方法反转了一个包含 n 个元素的双向链表。我不明白这到底是如何工作的。我添加了评论，如果我错了，请纠正我。我不确定遍历过程是如何工作的。

```
 public void reverseDLL( ) {
   Node temp=head; //swap head and tail
   head=tail; // head now points to tail
   tail=temp; //tail points to head
    //traverse the list swapping prev and next fields of each node
  Node p=head; //create a node and point to head

  while(p!=null) //while p does not equal null
    { //swap prev and next of current node
      temp=p.next; // p.next does that not equal null? confusing.
      p.next=p.prev; //this line makes sense since you have to reverse the link
      p.prev=temp; //having trouble visualizing this.
      p=p.next;//advance current node which makes sense
    }
 } 
```

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2012-06-23T05:33:28.910

让我们尝试一次单步执行几行代码。

```
Node temp=head;
head=tail;
tail=temp; 
```

这里我们只是设置了一些变量。我们正在交换我们的头指向尾巴和尾巴指向头。

现在我们定义我们的起始节点。这是我们以前是尾巴的新头。

```
Node p=head; //create a node and point to head

while(p!=null)
{ 
    temp=p.next; 
```

此时，这就是我们正在查看的内容（注意：如果这是第一次迭代，`next`将指向 null 但这没关系，只需假设 A 在这种情况下为 null）： ![在此处输入图像描述](../Images/def713b4e08731228783fb2cef83976a.png)

所以我们有`next`指向 A 和`prev`指向 B。我们希望它们被交换。为此，我们继续分配`next`给`prev`（指向 B）所以现在`next`并且`prev`都指向 B。

```
 p.next=p.prev; 
```

伟大的！我们已经成功了一半。现在我们有：

![第2步](../Images/2b5b5a25fc199e58af4c38c702b648ad.png)

现在我们的最后一步是指向过去`prev`指向的内容`next`。我们将如何实现它？幸运的是，我们将`next`过去指向（换句话说，A）的内容存储在`temp`. 所以让我们用它来分配`prev`.

```
 p.prev=temp; 
```

唉，我们有：

![在此处输入图像描述](../Images/e171f22239ebb10b3b67e359cce5852d.png)

现在这个节点已经被交换了，我们继续下一个。

```
 p=p.next;
} 
```

冲洗并重复。

全部一起：

```
Node p=head; //create a node and point to head

while(p!=null)
{ 
    temp=p.next; 
    p.next=p.prev; 
    p.prev=temp; 
    p=p.next;
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-23T05:01:01.837

希望这对您有所帮助。

```
struct node* current = head;
struct node* next;
struct node* prev = NULL;

while (current != NULL)  //traverse the whole linked list 
{
   next  = current->next;  //temporarily store the next node
   current->next = prev;    //now assign the prev!node to next of current node
   prev = current;   //update the previous pointer
   current = next;  //update the current pointer

} 
```

看这个图。 ![在此处输入图像描述](../Images/ae86d11352bd0b98d8e7a049750ab7d0.png)

希望你能明白。

谢谢

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-23T05:11:57.130

它只是在列表的每个元素中交换 prev 和 next 指针。所以你的评论是正确的。新头的下一个指针确实以空值开始。它被复制到它的 prev 指针。作为列表的头部，它的 prev 当然应该为空。

Vj shah 的回答只是用不同的代码做同样的事情。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2016-05-08T07:11:24.693

使用标题双向链接列表，以下是我的理解。这有帮助吗？它是否正确？

当 current 在 tail 后面一个节点时，循环可能会被打破，但为简单起见，让它到达 tail。此外，通常在运行循环之前检查 0 或 1 大小的列表。

```
H   1   2   3   4   5   //current pointer at head
*

H   5   1   2   3   4   //bring current tail to the next of current pointer. Update current tail.
*

H   5   1   2   3   4   //advance current pointer to next
    *

H   5   4   1   2   3   //bring current tail to the next of current pointer. Update current tail.
    *

H   5   4   1   2   3   //advance current pointer to next
        *

H   5   4   3   1   2   // and so on.. 
        *

H   5   4   3   1   2
            *

H   5   4   3   2   1
            *

H   5   4   3   2   1
                *

H   5   4   3   2   1
                *

H   5   4   3   2   1   //break out when current pointer is at the tail. 
                    * 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2016-07-06T14:10:16.273

为了简单起见，它也可以从头节点开始，否则算法保持不变：

```
Node currentNode=head;

while(currentNode!=null){
    Node temp = currentNode.next;
    currentNode.next=currentNode.prev;
    currentNode.prev=temp;
    currentNode=currentNode.prev;
} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-10-29T23:06:35.173

这种反转如何工作的关键是查看一个简单的双向链表在反转之前和之后的样子。一旦你看到反转列表需要做什么，这个方法就会更容易理解。

假设你有一个`Nodes`这样的第一个节点在 0：

```
node       0    1    2    3    4
data       A    L    I    S    T
next       1    2    3    4   null
prev      null  0    1    2    3 
```

从 0 开始遍历上面的节点给出输出： ALIST

保留每个节点的数据，您可以通过交换每个节点的 prev 和 next 节点值来反转列表：

```
node       0    1    2    3    4
data       A    L    I    S    T
next      null  0    1    2    3
prev       1    2    3    4   null 
```

从 4 开始遍历上面的节点给出输出：TSILA

假设您有这样的 Node 类，执行此操作的代码很简单：

```
public class Node {
    private char ch;
    private Node next;
    private Node prev;
}

public static Node reverse(Node trav) {
    Node swapped;
        while (trav != null) {
            swapped.next = trav.prev;
            swapped.prev = trav.next;
            trav = swap;
            trav = trav.prev;  // it was swapped so you need to follow prev
            }
        return trav  // return the new head node
} 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2014-02-02T07:42:05.470

```
public void reverseList(){

    Entry<E> refEntry = header.previous;
    for(int i = 0; i < size-1; i++){
        Entry<E> first = header.next;
        first.next.previous = first.previous;
        first.previous.next = first.next;

        first.previous = refEntry;
        first.next = refEntry.next;
        refEntry.next.previous = first;
        refEntry.next = first;
    }
    refEntry.previous = header;
} 
```

该算法基本上维护一个`pointer(refEntry)`条目，该条目将在反转后成为列表中的第一个元素。

然后在迭代中删除列表的第一个元素并在`refEntry`.

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2017-10-17T09:10:33.897

我在 Java Idea 后面写的没有递归的版本：首先到达列表的末尾，将此节点标记为新的头，然后通过翻转连接/链接（下一个，上一个）开始向后移动，直到你没有更多的节点。

```
 Node Reverse(Node head) {
        //If List is empty or having one node
        if (head == null || head.next == null) return head;

        //Else
        Node current = head;

        //First move to the end of list
        while (current.next != null) {
            current = current.next;
        }
        //Shift head at tail of list
        head = current;

        //Let the magic begin
        while (current != null) {
                Node prev = current.prev;
                current.prev = current.next;
                current.next = prev;
                current = prev;
        }

        return head;
    } 
```

我希望它有所帮助。

# mysql - MySQL 每五到六个小时停止工作

> ID：11166969
> 
> 赞同：0
> 
> 时间：2012-06-23T04:56:13.290
> 
> 标签：mysql, mysql-error-1064

我的应用程序在我的服务器上使用 MySQL 作为其数据库。

我的服务器在 Windows XP 和 Windows 7 上进行了高度配置。我的 MySQL 版本是 4.0.18-nt。

我的问题是 MySQL 每天 5 到 6 小时后停止工作。

我得到的错误如下所示，在 Microsoft 错误框中：

> mysql.exe 遇到问题需要关闭。
> 对此造成的不便，我们表示歉意。

或者有时

> mysqld.exe 遇到问题需要关闭。
> 对此造成的不便，我们表示歉意。

或者有时

> mysqld-nt.exe 遇到问题需要关闭。
> 对此造成的不便，我们表示歉意。

解决方案是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-23T05:06:03.710

除了升级之外，如果您作为服务运行，您可以查看在`Service > Property > Recovery`选项卡中进行以下更改是否有帮助？

![在此处输入图像描述](../Images/7a90d3101c912a225356a954258aedb8.png)

如果到目前为止还没有完成，您必须为每个失败实例指定重新启动服务。在您升级之前，这可能是一个临时解决方案。

# algorithm - 根据时间复杂度计算算法效率的步骤是什么

> ID：11166973
> 
> 赞同：-4
> 
> 时间：2012-06-23T04:57:56.877
> 
> 标签：algorithm, big-o, time-complexity

我忘记了如何计算算法的时间复杂度。我不是在寻找一本书或 30 页的博客来刷新这些知识。采用以下算法，请您纠正我计算时间复杂度的方式。谢谢

### 线性搜索

```
bool SeqSearch(int[] arr, int sValue) {
    for (int index = 0; index < arr.Length-1; index++)
    if (arr[index] == sValue)
        return true;
    return false;
} 
```

### 使用的步骤和逻辑

1.  循环遍历所有元素 -**`N`**
2.  每个指数的比较 -**`1`**或者是**`N`**
3.  返回真或假 -**`1`**

### 最后

我忘了我们是把它们加起来还是相乘？我以为我们必须添加， **`N+N+1`**所以这一定是一个大哦！的 N。`O(N)`

### 问题

1.  我是乘以每个步骤所花费的时间还是将它们相加
2.  对于比较，无法确定何时结束。那么需要多少时间（我假设 1 因为它可以在第一个索引处找到，N 否则作为最后一个索引）
3.  分配和回报是恒定的时间 1 ？

注意：请不要让我访问网站。SO 会持续很长时间，有相同/相似问题的人肯定会发现这篇文章的答案很有用。我无法相信其他网站何时会被关闭等。我也不在乎效率、时间复杂性，而是用于查找它的过程/步骤。

### 资源

[http://faculty.simpson.edu/lydia.sinapova/www/cmsc250/LN250_Weiss/L03-BigOh.pdf](http://faculty.simpson.edu/lydia.sinapova/www/cmsc250/LN250_Weiss/L03-BigOh.pdf)

我只是想把这个链接放到 pdf 中，它清楚地解释了如何解释什么陈述以及何时解释。就像我想要的一样。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-23T05:55:00.783

考虑原始操作（内存访问和算术/逻辑操作）。

给定输入的大小`N`（`arr.Length`在您的情况下），为您的算法计算它们。

然后查看操作总数与 的关系`N`，无论它只是某个常数或多项式`N`（例如`N`³）还是 的对数`N`或指数`N`或其他东西。

如果结果类似于`N`+1 或 2* `N`，您应该忽略小常数，因为您主要关心`N`大时会发生什么以及整体行为。

这就是基础。

这是最坏情况下的近似时间复杂度（当`sValue`不在时`arr[]`）：

`int index = 0;`是 1

`index < arr.Length-1;`为 1（但可能高达 10 次），重复`arr.Length`次数

`index++`为 1（但可能最多为 3），重复`arr.Length`次数

`if (arr[index] == sValue)`为 1（但可能高达 10 次），重复`arr.Length`次数

`return value;`是 1

所以你有类似 1 + 1 * `arr.Length`+ 1 * `arr.Length`+ 1 * `arr.Length`= 1 + 3 * `arr.Length`+ 1 的东西。你把它简化为`arr.Length`，因此 O( `N`)。

平均而言，您将只有`arr.Length`/ 2 次迭代。因此，平均而言，您有 1 + 1 * `arr.Length`/ 2 + 1 * `arr.Length`/ 2 + 1 * `arr.Length`/ 2 + 1 = 2 + 1.5 * `arr.Length`。再次，O( `N`)。

但你真的应该阅读这些东西。

# android - BroadcastReceiver 未接收到类别意图

> ID：11166975
> 
> 赞同：1
> 
> 时间：2012-06-23T04:58:12.763
> 
> 标签：android, broadcastreceiver, categories

我有以下代码，如果我的接收器使用 intentFilter 执行特定操作，则该代码运行良好，但如果我的接收器等待整个类别，则该代码不起作用。我在网上尝试了一些示例，不知道为什么它不起作用，我还尝试删除操作引用，只留下类别......有人可以看看吗？

我的活动：

```
public class Receiver1Activity extends Activity {
/** Called when the activity is first created. */
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);
    myReceiver = new MyReceiver();
    IntentFilter filter = new IntentFilter();
    filter.addCategory(MyService.MY_CATEGORY);
    registerReceiver(myReceiver, filter);
}

@Override
protected void onStart() {
    super.onStart();
    Log.i("activity", "onStart");
    Intent intent = new Intent(this, MyService.class);
    startService(intent);
}

@Override
protected void onPause() {
    super.onPause();
    Log.i("activity", "onPause");
    unregisterReceiver(myReceiver);
}

private MyReceiver myReceiver;
} 
```

我的服务：

```
public class MyService extends Service {

public static final String MY_CATEGORY = "com.receiver1.mycategory";
public static final String MY_ACTION = "com.receiver1.myaction";

@Override
public int onStartCommand(Intent intent, int flags, int startId) {
    Intent intent2 = new Intent(MY_ACTION);
    intent2.addCategory(MY_CATEGORY);
    sendBroadcast(intent2);
    return START_NOT_STICKY;
}

@Override
public IBinder onBind(Intent intent) {
    // TODO Auto-generated method stub
    return null;
}

} 
```

我的接收器：

```
public class MyReceiver extends BroadcastReceiver {
@Override
public void onReceive(Context arg0, Intent arg1) {
    Log.i("MyReceiver", "onreceive");        
}
} 
```

我的清单：

```
<?xml version="1.0" encoding="utf-8"?>
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
package="com.receiver1"
android:versionCode="1"
android:versionName="1.0" >

<uses-sdk android:minSdkVersion="10" />

<application
    android:icon="@drawable/ic_launcher"
    android:label="@string/app_name" >
    <activity
        android:name=".Receiver1Activity"
        android:label="@string/app_name" >
        <intent-filter>
            <action android:name="android.intent.action.MAIN" />

            <category android:name="android.intent.category.LAUNCHER" />
        </intent-filter>
    </activity>

    <service android:name=".MyService">
        <!-- 
        <intent-filter >
            <action android:name="com.receiver1.myaction2"/>
        </intent-filter>
         -->
    </service>
</application>

</manifest> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-23T05:03:39.687

把它也放在你的活动课上希望它对你有帮助

```
 @Override protected void onResume() {     
  super.onResume();     
  registerReceiver(myReceiver,filter); 
 } 
```

尝试这个..

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-23T05:04:06.393

利用

```
 myReceiver = new MyReceiver();
    IntentFilter filter = new IntentFilter(MyService.MY_ACTION);
    filter.addCategory(MyService.MY_CATEGORY);
    registerReceiver(myReceiver, filter); 
```

代替

```
myReceiver = new MyReceiver();
IntentFilter filter = new IntentFilter();
filter.addCategory(MyService.MY_CATEGORY);
registerReceiver(myReceiver, filter); 
```

您在注册 Receiver 时缺少操作

# php - PHP中没有引号的自动链接网址（需要修改代码）

> ID：11166977
> 
> 赞同：0
> 
> 时间：2012-06-23T04:58:24.443
> 
> 标签：php, regex, hyperlink, preg-replace, autolink

好的，我一直在使用以下代码在我输入的文本中查找任何 URL，但有些内容（例如 YouTube 代码或其他内容）中没有链接，它也会找到这些链接。我想修改此代码，以便它忽略已经是某些内容的一部分的链接周围的引号。

`公共功能自动链接文本（$文本）{

```
 $pattern  = '#\b(([\w-]+://?|www[.])[^\s()<>]+(?:\([\w\d]+\)|([^[:punct:]\s]|/)))#';
    return preg_replace_callback($pattern, array($this, 'auto_link_text_callback'), $text);

}` 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-23T05:05:33.533

这只是排除了前面有引号的链接

```
/(?<=[^"]|^)(https?|ftp|file):\/\/[-a-zA-Z0-9+&@#\/%?=~_|!:,.;]*[-a-zA-Z0-9+&@#\/%=~_|]/ 
```

# c# - 一个视图中的多个模型

> ID：11166979
> 
> 赞同：1
> 
> 时间：2012-06-23T04:59:24.457
> 
> 标签：c#, asp.net-mvc, asp.net-mvc-3

我正在一个具有多个部分视图的布局的站点上工作。这些局部视图具有连接到它们的数据库的模型。我可以单独显示部分视图，但不能在同一布局上显示。我使用了代码优先的方法，所以我有一个实体模型，其中包含我的所有模型。数据库已生成并连接。我在表格中有数据，我目前正在管理部分中显示这些数据以进行编辑和删除等。我不确定我做错了什么。这是我的布局部分调用：

```
 <li>@Html.Partial("_SubCategory")</li> 
```

我的控制器是一个列表 - 目前在 auditScheduleController：

```
 public ActionResult _SubCategory()
    {
        return View(_db.SubCategories.ToList());
    } 
```

在我的部分观点中，我已经提出了一些 senarios 并且似乎没有工作。如果我放 `@model IEnumerable<QQAudit.Models.Subcategory>` 了，我可以自己显示页面并获取子类别列表。如果我通过布局打开它，它就会出错。说一些关于

> “传入字典的模型项的类型为‘System.Data.Entity.DynamicProxies.AuditSchedule_5218AAD34020C54DC3FF0CFD6169988BB5FED2C296ABF80AC3EFFF93441CE91B’，但此字典需要‘QQAForm.Models.SubCategory’类型的模型项。

我查看了不同的论坛并发现了一些东西，但是我尝试过的所有东西似乎都以某种方式失败了。

有趣的是我的背景是 Zend PHP，我可以在那里做我想做的事情，但不能在 MVC3 C# 中复制它。

2012 年 8 月 1 日

我现在想将页面的 ID 添加到我已经将 global.asax 更改为的链接中：

```
 routes.MapRoute(
            "AuditSecion", // Route name
            "{controller}/{action}/{id}/{section}", // URL with parameters
            new { controller = "Home", action = "Index", id = UrlParameter.Optional, section = UrlParameter.Optional }, // Parameter defaults
            new[] { "QQAForm.Controllers" }
        ); 
```

我希望链接填充页面所在的 ID。所以部分看起来像这样：

```
@{ Layout = null; }

@model IEnumerable<QQAForm.Models.SubCategory>

@foreach (var item in Model)
{

@Html.ActionLink(item.SubcategoryName, "audit", new { id = item.SubCategoryID }, null)

} 
```

subcategoryID 应该是部分，ID 应该是看起来像这样的页面的 ID。

```
http://localhost:52490/AuditSchedule/Audit/1192 
```

理论上子菜单的链接应该是

```
http://localhost:52490/AuditShedule/Audit/1192/1 
```

谢谢您的帮助！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-23T05:06:05.177

问题是您调用部分视图的方式。 *Html.Partial*需要一个视图名称和一个模型；由于您没有传递模型，因此它正在崩溃。（您似乎希望您的代码调用名为*_SubCategory*的操作，但它实际上是在尝试调用名为*_SubCategory的***局部视图**。）尝试显式传递模型（如果您的模型中有可用的模型）：

 *```
@Html.Partial("_SubCategory", Model.EnumerableListOfSubCategories) 
```

或者，您可以使用*Html.Action*方法，该方法将在当前控制器中呈现操作的结果：

```
@Html.Action("_SubCategory") 
```

我认为第二种方法是您正在尝试做的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-23T11:41:44.033

试着放

```
@{ Layout = null; } 
```

在 _subcategory 视图的顶部*

# wordpress - 如何使用 Jquery 检索 wordpress 的 ajax 搜索结果

> ID：11166981
> 
> 赞同：9
> 
> 时间：2012-06-23T04:59:41.263
> 
> 标签：wordpress, search, jquery

我需要设置 wordpress ajax 搜索结果，但我的方法在单击按钮时没有检索结果，而是将我重定向到另一个站点（ myurl.com?s=term ）。我正确调用了 admin-ajax.php，但设置不正确。任何想法是什么导致了问题？

```
//Script to activate ajax
 jQuery(document).ready(function($){
  var search_val=$("#s").val();
  $('#searchsubmit').click(function(){
    $.post(
        WPaAjax.ajaxurl,
        {
            action : 'wpa56343_search',
            search_val : search_val
        },
        function( response ) {
            $('#results').append( response );
        }
    );
   });

 });

//function to setup wp_query
add_action('wp_ajax_wpa56343_search', 'wpa56343_search');
function wpa56343_search(){
  global $wp_query;
  $search = $_POST['search_val'];
  $args = array(
    's' => $search,
    'posts_per_page' => 5
  );
  $wp_query = new WP_Query( $args );

  get_template_part( 'search-results' );

  exit;
}

//html

  <div id="my_search">
   <form role="search" method="get" id="searchform" action="http://myurl.com/" >
    <input type="text" value="" name="s" id="s" />
    <input type="submit" id="searchsubmit" value="Search" />
   </form>
  </div>
  <div id="results"></div> 
```

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-06-23T22:41:13.797

您应该将代码包装在`document.ready`

```
$(document).ready(function(){
    $("#searchsubmit").click(function(e){
        e.preventDefault();
        var search_val=$("#s").val(); 
        $.post(search.php,{search_string:search_val},function(data){
            if(data.length>0){
                $("#results").html(data);
            }
        });
    });   
}); 
```

**更新：**

```
$(document).ready(function(){
    $("#searchsubmit").click(function(e){
        e.preventDefault();
        var search_val=$("#s").val(); 
        $.ajax({
            type:"POST",
            url: "./wp-admin/admin-ajax.php",
            data: {
                action:'wpa56343_search', 
                search_string:search_val
            },
            success:function(response){
                $('#results').append(response);
            }
        });
    });   
}); 
```

在你的functions.php中

```
add_action('wp_ajax_nopriv_wpa56343_search', 'wpa56343_search'); // for not logged in users
add_action('wp_ajax_wpa56343_search', 'wpa56343_search');
function wpa56343_search()
{
    // code
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-10-17T17:40:06.437

您也可以使用 typeahead.js jquery 插件，阅读此完整教程以获取更多信息：

[http://wp.tutsplus.com/tutorials/plugins/enhancing-the-search-form-with-typeahead-js/](http://wp.tutsplus.com/tutorials/plugins/enhancing-the-search-form-with-typeahead-js/)

# objective-c - 影响保留计数的因素

> ID：11166982
> 
> 赞同：2
> 
> 时间：2012-06-23T04:59:57.083
> 
> 标签：objective-c, ios, xcode, cocos2d-iphone

我很难找到内存泄漏。我正在使用 cocos2d。这是两个类的数据区：

```
@interface Dungeon : CCLayerColor {
    DungeonLevel *aDungeonLevel;
    Player *thePlayer;

    // list of all monster file names
    NSMutableArray *monsterNames;

    // array of how many monsters there are of each monster level
    NSMutableArray *monsterLevels;

    MessageView *theMessageView;

    DungeonDisplay *theDisplay;

    bool processing;

    int currentDungeonLevel;    
}

@interface DungeonDisplay : CCLayerColor {
    NSMutableArray *displayGrid;
    NSMutableArray *displayGrid2;
    NSMutableArray *displayGrid3;
    NSMutableArray *displayGrid4;
    NSMutableArray *dungeonMatrix;
    NSMutableArray *monsterSprites;
    Dungeon *theDungeon;  
    int xdelt;
    int ydelt;
    CGPoint lowerLeft;
    Player *thePlayer;
    CCSprite *playerSprite;
    CCSprite *mSprite1;

    ButtonsLayer *buttonArea;

    double previousTime;
    double currentTime;
    double touchTimePrev;
    bool touchFlag;
    bool processing;
    bool processing2;
    bool animating;
    bool flipSprite;
    bool doIdleAnimation;
    bool isAttacking;
    int firstIteration;
    CGPoint dungeonOriginalPosition;
    CGPoint playerOriginalPosition;
    CGPoint mSprite1Original;
    CGPoint buttonOriginal;
    CCTimer *myTimer;

    // List of Messages
    NSMutableArray *messages;    
    int messageIndex;

    // player transparency level
    int transparency;

    // indicates that walls need to become transparent
    bool needTransparency;

    int pXInc;
    int pYInc;
    int tempx;
    int tempy;

    // debugging variables
    CCLabelTTF *debugLabel1;
    CCLabelTTF *debugLabel2;

    // the Map
    MiniMap *aMap;
} 
```

好的，现在 Dungeon 对象通过与另一个对象 DungeonLevel 交互来创建 DungeonDisplay 对象（我认为这与找出 DungeonDisplay 未释放的原因特别相关）。这是创建“单例”DungeonDisplay 对象的所有代码：

```
-(void) displayDungeon
{
    if (!theDisplay) {
        theDisplay = [[DungeonDisplay alloc]init];
        [self addChild:theDisplay z:101];
        [theDisplay letTheDungeon:self];    
    }
    else {
        [thePlayer placePC:thePlayer.pCLocation];
        [theDisplay displayStructure];
    }
    theDisplay.visible = true;
    aDungeonLevel.visible = NO;
} 
```

出于某种原因，在 addChild（一个 cocos 方法）之后，保留计数跳到 4（从 1）。“letTheDungeon”对保留计数没有影响（如预期的那样）。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-23T05:33:26.773

**问题：** “我很难找到内存泄漏。......有没有人有一个关于增加和减少保留计数的具体事情的完整列表？”

**答案：**哇，很多东西。只关注增加保留计数的因素，它包括：添加子视图；推送/展示控制器；添加到字典和数组；任何名称以`alloc`、`new`、`copy`或开头的方法`mutableCopy`；任何`retain`调用；在非 ARC 代码中创建对象`viewDidLoad`并忽略在 中清理它们`dealloc`；在非 ARC 代码中的一个指针中分配另一个新对象，该指针已经指向尚未发布的项目；`create`任何具有或名称的核心基金会职能`copy`；等等，这可能只是表面上的问题。减少保留计数的列表也一样长。

无意冒犯，这不太可能是追踪泄漏的有效途径。（这就像说有人在曼哈顿被枪杀，所以让我们列出东海岸持枪的每个人的名单。）我建议你更多地采用 CSI 方法：

1.  [通过Xcode 静态分析器](http://developer.apple.com/library/mac/documentation/IDEs/Conceptual/Xcode4TransitionGuide/Debugging/Debugging.html#//apple_ref/doc/uid/TP40009984-CH3-SW22)运行您的代码。在您解决所有这些问题之前，没有必要进一步研究。您应该从静态分析中获得*零*警告。

2.  使用分析器工具[查找泄漏](http://developer.apple.com/library/ios/DOCUMENTATION/DeveloperTools/Conceptual/InstrumentsUserGuide/Built-InInstruments/Built-InInstruments.html#//apple_ref/doc/uid/TP40004652-CH6-SW26)。一旦您学会了如何使用该工具，它通常可以准确地向您显示导致泄漏的对象和代码行，此时解决方案要容易得多。

3.  确保您完全阅读并理解[高级内存管理](https://developer.apple.com/library/mac/#documentation/Cocoa/Conceptual/MemoryMgmt/Articles/MemoryMgmt.html)。如果您正在使用核心基础做任何事情，还请查看核心基础的[内存管理编程指南](https://developer.apple.com/library/ios/#documentation/CoreFoundation/Conceptual/CFMemoryMgmt/CFMemoryMgmt.html)。

4.  如果您不使用 ARC，请开始输入调试消息以检查`retainCount`您的各种对象。

如果您发现有一段代码泄漏，如果您无法弄清楚，那么在 StackOverflow 上发布有问题的代码（确保告诉我们它是否是 ARC），我们可以帮助您进一步诊断。

我真的不是要刻薄，但是这个问题就目前而言，太宽泛了，我们无法帮助您（即使理论上有人可以为您提供全面的答案，我也无法想象它会有所帮助给你）。不过，希望上述一些技巧能为您指明正确的方向。

我真的很理解你的挫败感。第一个你决定认真追踪泄漏的项目是一个痛苦的练习。你必须掌握 Objective-C 内存管理的重要世界，并学习一些相当复杂的工具（尤其是分析器）。但是一旦你在一个大项目中完成了一次练习，并掌握了工具，你就会有那种“啊哈”的感觉，追踪内存泄漏将成为一个简单（或至少有条理）的过程。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-23T16:02:11.687

感谢您的所有回答。问题解决了，我再次有微不足道的泄漏。问题在于子类 DungeonDisplay 中的 CCTouchDispatcher。我将处理触摸的代码更改为地牢类，并进行了一些其他小的调整，每个人都被调用了 dealloc。

无论如何，它再次坚如磐石。我来回移动了一百多次，分配的内存没有变化。事实上，我现在的速度低于 70 MB，比以前少了。

再次感谢您的鼓励和支持。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-23T08:36:10.070

第一个可能导致泄漏的原因是您没有释放创建的 Display 实例。将您的代码更改为

```
if (!theDisplay) 
{
    theDisplay = [[DungeonDisplay alloc]init];
    [self addChild:theDisplay z:101];
    [theDisplay release];  // add this line
    [theDisplay letTheDungeon:self];    
} 
```

或者

```
if (!theDisplay) 
{
    theDisplay = [[[DungeonDisplay alloc] init] autorelease];  // create autoreleased object
    [self addChild:theDisplay z:101];
    [theDisplay letTheDungeon:self];    
} 
```

它将解决至少一个内存问题。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-23T13:55:00.577

好吧，这可能不是“科学”正确的，但有时你必须做你必须做的事情。按如下方式使用 Instruments Zombies 工具。在你知道你已经泄露了一个对象的代码中的某个地方，发出 [theLeakedObject_release] 的次数与它僵尸出的次数一样多。然后在仪器中，您将能够获得保留计数的踪迹，哪个类增加它，哪个类减少它，按照它发生的顺序，直到很明显你僵死了。您应该能够“发现”一个不应该存在的保持器，然后从那里拿走它。

附言。作为个人实践，在创建从 CCNode 派生的对象时，我遵循 Morion 的建议实践并坚持使用自动释放分配模式。保持东西整洁，清理：是的过程很好地在我之后擦拭:)。对于任何其他商务舱，我特别保留/释放，以便在自动释放池中为 cocos 留出尽可能多的空间。

# jquery - 多选框 Jquery 模糊事件

> ID：11166983
> 
> 赞同：0
> 
> 时间：2012-06-23T05:00:00.170
> 
> 标签：jquery

我有多选框，显示城市。用户可以一次选择任意数量的城市。当用户完成选择时，jquery 模糊事件不会被触发。如果我​​在 javascript 中做同样的事情，它工作正常。模糊当用户释放 ctril 键时触发事件。

当用户选择一个国家时，城市选择框会被填充，这是使用 jquery ajax 完成的。

看到这个小提琴[http://jsfiddle.net/Z6X8L/4/](http://jsfiddle.net/Z6X8L/4/)

提前致谢

# visual-studio-2010 - 如何更改特定 Visual Studio 元素的颜色

> ID：11166987
> 
> 赞同：0
> 
> 时间：2012-06-23T05:00:59.930
> 
> 标签：visual-studio-2010, fonts, colors, settings, options

非常简单的一个，但我试图找出字体和颜色列表中的哪个项目。我正在尝试更改浅色/灰白色@Razor 颜色。

![代码sc](../Images/5f70a0074265f926f45f857ea7530398.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-17T20:56:03.483

在 Visual Studio 2010 中，转到工具 > 选项 > 环境 > 字体和颜色 > 在“显示设置” dorpdown 中选择“文本编辑器” > 在显示项目框中找到剃刀代码，然后更改背景颜色。

祝你好运。

# php - 将行和动态文本框插入 mysql

> ID：11166989
> 
> 赞同：0
> 
> 时间：2012-06-23T05:01:15.850
> 
> 标签：php, mysql, insert, row

请帮助我从表格和动态文本字段中获取行，然后将其插入另一个表格。我想做的是从下表中获取一些特定的 state_id，结合`<input type='text' name='constituency[]' />`同一页面上显示的文本框中的数据，然后插入到表中

```
 +---------+--------------------------+
                    |state_id |  state   |   senatorial  |  
                    |--- -----|----------|---------------|
                    |    1    |  utah    |    A-North    | 
                    |    2    |  utah    |    B-South    |  
                    +---------+----------+---------------+ 
```

我用来获取信息的 HTML。选区是一个动态文本字段，并且出现多次，因此需要将它放在一个数组中

```
 <input type='hidden' name="state_id[]"   value="<?php echo $row['state_id'];?>" />
                    <input type='text'   name='constituency[]' /> 
```

我用来插入表的查询

```
 <?php
$constituencys = $_POST['constituency']      ; 
        $state_id = $_POST['state_id']; 

         if(isses($_POST['constituency']))
   {
$constituencys = $_POST['constituency']      ;   
                      foreach($constituencys as          $constituency) {  
     $state_id[$i]= $state_id[$i];
                      $query = mysql_query(" 
         INSERT INTO `constituency` (
                    `constituency_id`,
                    `state_id`,
                    `constituency_name`
                    ) VALUES (
                    NULL,
                    '".$state_id[$i]."',
                    '".$constituency."'
                    "); 
                       }

                    if(mysql_affected_rows()>0){
                    echo "Inserted Successfully";
                    }else{
                    echo "No Row Inserted";
                    echo mysql_error() ;
                    echo"<br>Error:".mysql_error();
                   echo"<br>Query:".$query; 
      } } ?> 
```

我要插入的表看起来像这样

```
 +----------------+-------------+----------------------+
                    |constituency_id |  state_id   |   constituency_name  |  
                    +----------------+-----   -----+----------------------+ 
```

当我运行代码“No Row Inserted”显示在屏幕上

请帮我。我非常感谢，谢谢。

**显示错误**

```
 Error: You have an error in your mysql syntax; check the manual that corresponds to your mysql server for the right syntax to use near " at line 2

Query: 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-23T05:40:31.147

```
<?php
$constituencys = $_POST['constituency']; 
$state_id = $_POST['state_id']; 

$i = 0;
while($i<count($constituencys)){
    $constituencys[$i]= $constituencys[$i];
    $state_id[$i]= $state_id[$i];
    $query = "INSERT INTO `constituency` ( 
        `constituency_id`, `state_id`, `constituency_name`
        ) VALUES (
        NULL,
        '".$state_id[$i]."',
        '".$constituencys[$i]."'
        "; 

    mysql_query($query);          
    $i++;  
}

if(mysql_affected_rows()>0){
    echo "Inserted Successfully";
} else {
    echo "No Row Inserted";
    echo "<br><br>Error: " . mysql_error();
    echo "<br><br>Query: " . $query;
} 
?> 
```

先试试这个代码，用结果更新你的帖子。

**更新**

看起来您可能有“脏”输入。确保在插入之前为 mysql 清理它，使用[mysql_real_escape_string](http://au.php.net/manual/en/function.mysql-real-escape-string.php)。试试下面的代码。

```
<?php
$constituencys = $_POST['constituency']; 
$state_id = $_POST['state_id']; 

$i = 0;
while($i<count($constituencys)){
    $constit = mysql_real_escape_string($constituencys[$i]);
    $state = mysql_real_escape_string($state_id[$i]);
    $query = "INSERT INTO `constituency` ( 
        `constituency_id`, `state_id`, `constituency_name`
        ) VALUES (
        NULL,
        '$state',
        '$constit')
        "; 

    mysql_query($query);          
    $i++;  
}

if(mysql_affected_rows()>0){
    echo "Inserted Successfully";
} else {
    echo "No Row Inserted";
    echo "<br><br>Error: " . mysql_error();
    echo "<br><br>Query: " . $query;
} 
?> 
```

**注意**：在查询结束时，您缺少一个右括号。它已在第二个示例中添加。在继续测试之前确保它在那里。

```
<?php
$constituencys = $_POST['constituency']; 
$state_id = $_POST['state_id']; 

$query = "INSERT INTO `constituency` (`constituency_id`, `state_id`, `constituency_name`) VALUES";

for($i=0; $i<count($constituencys); $i++){
    $constit = mysql_real_escape_string($constituencys[$i]);
    $state = mysql_real_escape_string($state_id[$i]);
    $query .= "(NULL, '$state', '$constit'), "; 
}
$query = substr(trim($query), 0, -1); //trims then removes trailing comma
mysql_query($query);          

if(mysql_affected_rows()>0){
    echo "Inserted Successfully";
} else {
    echo "No Row Inserted";
    echo "<br><br>Error: " . mysql_error();
    echo "<br><br>Query: " . $query;
} 
?> 
```

假设您的 HTML 输入正确设置为数组，这应该可以工作。它还可以整理您的代码并帮助解决不必要的延迟。每毫秒都很重要。:) 如果这不起作用，请发布返回的错误并再次查询。

# c# - 通过目录结构解析时出现 System.StackOverflow 异常

> ID：11166990
> 
> 赞同：0
> 
> 时间：2012-06-23T05:01:25.083
> 
> 标签：c#, .net, file, exception, directory

我试图实现的是，通过解析文件来获取特定驱动器或文件夹结构中所有文件的列表。我还试图处理在受保护文件的情况下发生的未经授权的异常。代码在大多数情况下都可以正常工作驱动器和文件夹，但在某些情况下，如 Windows 驱动器（C:)，抛出 System.StackOverflow 异常。可能是什么问题？有更好的方法吗？

```
static void WalkDirectoryTree(System.IO.DirectoryInfo root)
    {
        System.IO.FileInfo[] files = null;
        System.IO.DirectoryInfo[] subDirs = null;

        // First, process all the files directly under this folder
        try
        {
            files = root.GetFiles("*.*");
        }
        // This is thrown if even one of the files requires permissions greater
        // than the application provides.
        catch (UnauthorizedAccessException e)
        {
           //eat
        }

        catch (System.IO.DirectoryNotFoundException e)
        {
           //eat
        }

        if (files != null)
        {
            foreach (System.IO.FileInfo fi in files)
            {

                Console.WriteLine(fi.FullName);
            }

            // Now find all the subdirectories under this directory.
            subDirs = root.GetDirectories();

            foreach (System.IO.DirectoryInfo dirInfo in subDirs)
            {
                // Resursive call for each subdirectory.
                WalkDirectoryTree(dirInfo);
            }
        }            
    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-23T05:06:05.843

您是否尝试过使用调试器单步执行以查看发生了什么？

听起来像递归，也许某处有一个[NTFS 连接点](http://en.wikipedia.org/wiki/NTFS#Directory_junctions)指向更高的级别。

[根据 MSDN，StackOverflowException](http://msdn.microsoft.com/en-us/library/system.stackoverflowexception.aspx)的定义是

> 执行堆栈溢出时抛出的异常，因为它包含太多的嵌套方法调用。这个类不能被继承。

所以这就是我猜测的原因。您系统上的目录结构不太可能比执行堆栈允许的调用次数更深。

# ios - 如何在 Monotouch 中获取当前视图？

> ID：11166991
> 
> 赞同：1
> 
> 时间：2012-06-23T05:01:35.830
> 
> 标签：ios, uiview, xamarin.ios

我有一个警报样式的视图，我想将它推到当前视图的前面，但是我需要对当前视图的引用，以便我可以调用这两行：

```
currentView.InsertSubviewAbove(myNewViewToShow, currentView);
currentView.BringSubviewToFront(myNewViewToShow); 
```

那么如何获得对当前视图的引用呢？

我在此链接底部看到了答案：[Get active view in iOS](https://stackoverflow.com/questions/3705410/how-to-get-the-active-view-in-an-ios-application-from-the-app-delegate)

```
MyAppDelegate *appDelegate = [[UIApplication sharedApplication] delegate];
UIView *topView = appDelegate.viewController.view; 
```

我试过这个：

```
((AppDelegate)UIApplication.SharedApplication.Delegate).ViewController.View 
```

但据我所知，Monotouch appDelegate 中没有“ViewController”属性。

我正在使用故事板和 segues 来控制我的程序流程。我有一个后台线程正在监视各种错误情况，并且在发生错误时需要在当前显示的视图之上覆盖 UIView。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-23T22:03:19.800

事实证明，解决方案稍微复杂一些，所以为了清楚起见，我在这里发布了完整的解决方案。

```
UIViewController currentController = UIApplication.SharedAppplication.KeyWindow.RootViewController;
while (currentController.PresentedViewController != null)
    currentController = currentController.PresentedViewController;

UIView currentView = currentController.View; 
```

基本上，有一个 PresentedViewControllers 树，你必须走到树的末端才能看到哪个在顶部。然后你就可以得到那个控制器的视图。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-23T14:49:50.947

如果您的视图显示在 a`UINavigationController`中，则可以在任何控制器中使用：

`this.NavigationController.TopViewController.View`

如果您以模态方式呈现某些内容：

`this.PresentedViewController.View`

但是，@stavash 的方法适用于其他情况。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-23T17:25:48.577

“在 iOS 中获取本机视图”的答案表明这取决于您的应用程序的设置方式。在他的示例中，他碰巧拥有“viewController”中最顶层视图控制器的句柄，因此您需要将代码构造为相同的方式才能使其工作。

在 iOS 5 中，推荐的方法是让您的启动代码在您的关键窗口上设置“RootViewController”属性，这样您就可以通过这种方式访问​​您的顶视图控制器。

但一般来说，如果你想显示警报，可以让警报代码的 API 将当前视图控制器作为参数，例如：

```
void Alert (UIViewController myHost) {...} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-23T05:38:58.567

我建议创建一个单例类（也许称它为“ScreenManager”），它的唯一目的是保存对相关视图的引用并管理它们的外观。这样，每次推送/添加新视图时，您都可以持有对它的引用，然后当您添加此新警报视图时，您可以通过调用 ScreenManager 上的公共方法来执行所有与视图相关的操作。希望这有助于您入门。

# iphone - 如何在瀑布视图中自动设置图像宽度和高度？

> ID：11166993
> 
> 赞同：1
> 
> 时间：2012-06-23T05:01:38.387
> 
> 标签：iphone, ios, user-interface

我正在构建一个瀑布视图，就像 pinterest 一样。现在我必须明确设置每个图像的宽度和高度，有没有办法让图像自动填充合适的宽度和高度？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-23T06:56:21.963

根据[`UIImageView`Class Reference](http://developer.apple.com/library/ios/#DOCUMENTATION/UIKit/Reference/UIImageView_Class/Reference/Reference.html)，在`initWithImage:`

> 此方法调整接收器的帧以匹配指定图像的大小。默认情况下，它还禁用图像视图的用户交互。

如果您的图像在一个`UIImage`对象中，调用`initWithImage:`应该为您的图片创建一个`UIImageView`具有适当大小的框架。

```
// Get your UIImage from somewhere
UIImage *myImage = ...

UIImageView *imageView = [[UIImageView alloc] initWithImage:myImage]; 
```