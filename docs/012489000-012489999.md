# StackOverflow 问答 12489000-12489999

# android - 访问服务中的资源 (Android)

> ID：12489008
> 
> 赞同：4
> 
> 时间：2012-09-19T05:23:07.570
> 
> 标签：android, resources, intentservice

我是一个相当新的android开发人员，所以我觉得我忽略了一些服务属性。请告诉我。

就服务而言，一切似乎都运行良好。我有一个看起来像这样的 IntentService 类：

```
public class MyIntentService extends IntentService 
{
myClass myObject;
int test;

public MyIntentService() 
{
    super("MyIntentService");

    test = 12;
    myObject = new myClass(this, R.raw.file);
}

@Override
public IBinder onBind(Intent intent)
{
    return new LocalBinder<MyIntentService>(this);
}

@Override
protected void onHandleIntent(Intent intent) {
} 
```

myClass 的构造函数接受一个 Context，然后是一个用于原始资源的 int。如果我在 Activity 类中调用构造函数，它就可以正常工作。服务本身似乎也在工作，因为如果我注释掉对象的东西，我可以毫无问题地检索测试 int。

那么我在这里错过了什么？

非常感谢！

# java - 如果 JPEG 为 10MB，java.awt.Image 会消耗多少内存？

> ID：12489009
> 
> 赞同：1
> 
> 时间：2012-09-19T05:23:27.720
> 
> 标签：java, image, soap, awt, cxf

MTOM 通常用于通过 SOAP（附件）传输图像数据。图像被映射到 java.awt.Image（至少使用 CXF）。Image 对象是否比传输的实际图像消耗更多的内存？假设传输的 JPEG 文件是 10MB，那么 Image 对象会占用多少空间？

*   更新 - 我不太确定它与 java.awt.Image 有什么关系。目前更关注 CXF/MTOM：http: [//cxf.547215.n5.nabble.com/MTOM-large-attachments-eating-up-JVM-heap-td5714196.html](http://cxf.547215.n5.nabble.com/MTOM-large-attachments-eating-up-JVM-heap-td5714196.html)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-19T05:37:33.373

> Image 对象是否比传输的实际图像消耗更多的内存？

通常是的。大多数文件格式的想法是压缩图像数据。

> 假设传输的 JPEG 文件是 10MB，那么 Image 对象会占用多少空间？

RAM 大小取决于 W * H * '像素深度'。EG RGBA 有 256 种色调，每像素 4 字节。JPEG 不支持 alpha 透明度，因此它是每像素 3 个字节。

* * *

有关 JPEG 压缩效率在不同级别的有效性的一些想法，请参阅[此答案](https://stackoverflow.com/a/5998015/418556)：

![](../Images/e658c26b8bb48ea528719c8ba4037b4f.png)

# php - PHP/MySQLi 中的海量参数绑定

> ID：12489010
> 
> 赞同：1
> 
> 时间：2012-09-19T05:23:40.787
> 
> 标签：php, mysql, web-applications, mysqli, prepared-statement

**大家好，**

我知道一个事实，下面看起来很愚蠢（也很有趣），但这是我在 mysql 时代曾经做过的事情（一个包含所有变量的巨大查询），我不确定这是否是即使是在 mysqli 中执行此操作的正确方法，但我肯定在这里做错了，因为此块***不***执行

```
if($query_rows == 0){
                $pass_hash = hash("sha512", $reg_pass);
                if($prep_stmt = $mysqli->prepare("INSERT INTO accounts (username, password, user_type, 
                first_name, last_name, gender, expr_rating, user_rank, rank_type, user_expr, user_legion,
                num_hosted, num_attended, email, premium_status, premium_credits, location_city, 
                user_sex_interest) VALUES (?, ?, 0, ?, ?,
                ?, 0, 1, 1, 0, 1, 0, 0, ?, 0, 0, 'waterloo', ?)"))                    
                    { 
                        // Oh my gawd -.-
                        $prep_stmt->bind_param("ssssisi", $reg_user, $pass_hash, $reg_fname, $reg_lname,
                        $reg_gender, $reg_email, $reg_sexint);

                        $prep_stmt->execute();

                        $err = $mysqli->error;
                        echo($err);
                        echo($mysqli->error);

                    } else {
                        if(DEVMODE){ // devmode is enabled
                            $err = $mysqli->error;
                            echo($err);        
                            echo($mysqli->error);                        
                            echo("derp"); exit();
                        } else {
                            $stop = true; header("Location : error.php?id=99");
                        }
                    }        
                } 
```

:P 在这里帮助一个菜鸟！谢谢大家！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-19T05:52:43.573

**太糟糕了：D**

这解决了一切

```
$prep_stmt->close(); 
```

然后做任何需要的事情

再见世界 :D

# c# - 如何使用 C# 解锁文件？

> ID：12489011
> 
> 赞同：1
> 
> 时间：2012-09-19T05:23:59.673
> 
> 标签：c#, .net, file, streamwriter

我在我的 C# 程序中遇到错误，然后我尝试用

`new StreamWriter("myFile.dat");`

该程序由另一个程序执行，有时程序的前一个实例会阻塞文件（不知道如何以及为什么）。

我可以在我的代码中使用任何类型的 unblocking 来编写文件吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-19T05:37:58.367

> 该程序由另一个程序执行，有时该程序的前一个实例会阻塞文件

因此，您必须在进程之间使用任何同步逻辑，而不是像“解锁文件”这样的骇人听闻的解决方案。例如，阅读[mutexes](http://msdn.microsoft.com/en-us/library/system.threading.mutex.aspx)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-19T05:41:57.950

您可以尝试使用 FileShare.ReadWrite 标志打开 FileStream。例如：

```
new FileStream("myFile.dat", FileMode.OpenOrCreate, FileAccess.Write, FileShare.ReadWrite); 
```

赋予多个进程写入文件的能力。

# iphone - CCFollow 与 CCParticleSystem

> ID：12489013
> 
> 赞同：2
> 
> 时间：2012-09-19T05:24:06.983
> 
> 标签：iphone, ios, cocos2d-iphone

我正在尝试使用 CCFollow 跟踪一些 CCParticleSystem 实例的精灵。我不想让 CCParticleSystem 的实例成为精灵的孩子，因为我希望它在精灵移除后的某个时间显示。当精灵从左下角移动到右上角时，我的粒子系统从中心移动到左下角。我不明白为什么会这样。

这是示例代码：

```
-(id) init
{
    if( (self=[super init]) ) {
        CCSprite *someSprite = [CCSprite spriteWithFile:@"Icon.png"];
        [self addChild:someSprite];
        id action = [CCMoveTo actionWithDuration:5 position:ccp(480,320)];
        [someSprite runAction:action];

        CCParticleSystemQuad *effect = [CCParticleMeteor node];
//      effect.positionType = kCCPositionTypeFree;
//      effect.positionType = kCCPositionTypeRelative;
//      effect.positionType = kCCPositionTypeGrouped; changing of positionType to any of this options does not make any sense
        [effect runAction:[CCFollow actionWithTarget:someSprite]];
        [self addChild:effect];
    }
    return self;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-19T09:23:17.967

这是一个糟糕的文档案例。

我自己试过这个，得到了同样的结果。通过查看存在的代码和文档片段，CCFollow 操作旨在仅在 CCLayer、CCScene 和 CCNode 等全屏节点上使用。我将其记录如下：

> CCFollow 是一种通过允许图层或场景跟随另一个节点（例如玩家对象）来滚动整个屏幕的操作。它是移动相机对象或手动更新位置的替代方法。

# php - mysql 查询只返回一个单词的字符串

> ID：12489015
> 
> 赞同：2
> 
> 时间：2012-09-19T05:24:20.903
> 
> 标签：php, mysql, wordpress

我正在使用 php 和 javascript 为我的 wordpress 网站创建一个动态填充的自动完成搜索引擎。

示例：用户想要搜索“耐克鞋”，因此他们在搜索引擎中输入耐克鞋，他们应该在输入前 3 个字母后看到耐克鞋作为建议。

我遇到了一个问题，只有耐克这个词作为建议出现。您在搜索引擎中输入的任何字词都会发生这种情况。只会显示字符串的第一个单词。我确信这与单词之间的空格有关，但不太确定如何修复它。

这是我动态填充自动完成的代码：

```
var availableTags = '<?php $result = mysql_query("select * from state"); 
                    $row = mysql_fetch_array($result); 
                    echo $row['name']; ?>'.split(" ");
                    $( "#title" ).autocomplete({
                    source: availableTags,
                    minLength: 3,
                    position: { my : "left top", at: "left top" },
                    appendTo: "#search-container"
                    });
                    }); 
```

我从这个网站创建了这段代码：[http ://www.tizag.com/mysqlTutorial/mysqlquery.php](http://www.tizag.com/mysqlTutorial/mysqlquery.php)

如果有人可以帮助我，我会非常感激。

谢谢，

史蒂夫

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-19T05:38:08.070

我正在将此功能用于自动建议列表。您可以稍作修改使用它

```
function get_autosuggest_list($str=''){

        $q     = strtolower($str);
        $entry = array();   
        $i=0;
        if(!empty($q))
        {
            $entry[$i] = "A.fieldname like '".$q ."%'" ;
            $i++;
        }

        $sqlentry = "";
        $j=0;
        foreach($entry as $data)
        {

            if($j==0)
            $sqlentry  = " where ".$data;
            else
            $sqlentry .= " and ".$data;

            $j++;
        }
        $sql    = "SELECT DISTINCT field_name FROM `table` A ".$sqlentry." ";
        $query  = mysql_query($sql);
        $res    = mysql_fetch_array($query);

        foreach($res as $row)
        {
            $items = $row->fieldname;
            echo "$items\n";
        }

    } 
```

用法：

```
get_autosuggest_list(string); 
```

# javascript - 无法使用javascript api从linkedin注销

> ID：12489017
> 
> 赞同：1
> 
> 时间：2012-09-19T05:24:39.677
> 
> 标签：javascript, api, linkedin, logout

我有一段代码可以让用户从linkedin中注销，但它不起作用:(

任何帮助将不胜感激。

* * *

注销代码

* * *

```
<html>
<head>
<script type="text/javascript" src="http://platform.linkedin.com/in.js">
  api_key: mykey
  authorize: true
</script>
<script type="text/javascript">

try {
    IN.User.logout();
} catch (err) {
    console.log(err);
}
setTimeout("goToHome()", 10000);

function goToHome() {
    location.href="index.php";
}
</script>
</head>
</html> 
```

* * *

控制台日志

* * *

```
TypeError
arguments: Array[2]
get message: function () { [native code] }
get stack: function () { [native code] }
set message: function () { [native code] }
set stack: function () { [native code] }
type: "non_object_property_call"
__proto__: Error 
```

最好的问候，帕万

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-19T13:38:28.440

看起来您正试图在 LinkedIn JavaScript 平台完全加载之前调用 IN.User.logout()。只有在确定库已加载后，您才应通过平台引导部分中的 onLoad 值运行代码：

```
<script type="text/javascript" src="http://platform.linkedin.com/in.js">
  api_key: mykey
  authorize: true
  onLoad: onLoad
</script>

<script type="text/javascript">
function onLoad() {
  try {
    IN.User.logout();
  } catch (err) {
    console.log(err);
  }
  setTimeout("goToHome()", 10000);
}

function goToHome() {
  location.href="index.php";
}
</script> 
```

或者，使用[事件回调](https://developer.linkedin.com/documents/inauth-inevent-and-inui)之一：

```
<script type="text/javascript" src="http://platform.linkedin.com/in.js">
  api_key: mykey
  authorize: true
</script>

<script type="text/javascript">
IN.Event.onOnce(IN, 'systemReady', function() {
  try {
    IN.User.logout();
  } catch (err) {
    console.log(err);
  }
  setTimeout("goToHome()", 10000);
});

function goToHome() {
  location.href="index.php";
}
</script> 
```

# c++ - 链表的链表

> ID：12489019
> 
> 赞同：1
> 
> 时间：2012-09-19T05:24:55.213
> 
> 标签：c++, doubly-linked-list

我正在尝试创建一个包含其他 int 链表的链表，我需要能够从主链表访问 int 链表。

我的问题是如何将主链表的节点指向 int 链表的头部？

我创建了一个静态列表：`dlist<Node<int>& > _plist;` 我有一个函数：`insertToHead ( T const& dataToInsert);` 但是从使用链表的类中，我只有指向 head 的指针，类似于 : `Node<T>*`。当我尝试将 传递`Node<T>*`给 a时，它给了我一个错误`T const&`。

这是使用链表的类的构造函数：

```
Set::Set(int numArray[], int size)
{

    dlist<Node<int> > _plist; //static main list
    dlist<int> _intList ; //int list
    dlist<int> list;     //int list

    int i;

    for (i=0; i < size; i++)
    {
       list.insertInOrder(numArray[i]); //insert in to int list
    }

    this->_intList = list;

    this->_plist.insertToHead(  _intList.getHead()); //gives an error

}; 
```

这是在主列表和 int 链接列表之间建立链接的正确方法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-19T05:28:41.873

使用标准容器，您不能指向元素，因为主要设计是元素仅由容器管理。

您所做的是一个容器容器，即在您的情况下是`dlist< dlist<int> >`.

然而，在其他更复杂的情况下，您对标准库不走运......例如，如果您希望元素同时包含在两个独立的链表中，则没有标准容器的解决方案，您必须编写代码数据结构您自己或您必须接受为某些操作支付额外费用。

# bash - 令人困惑的 bash 完成脚本案例

> ID：12489020
> 
> 赞同：2
> 
> 时间：2012-09-19T05:24:56.667
> 
> 标签：bash

我无法理解以下代码在 bash 完成脚本中的作用：

```
 case "$last" in
    +\(--import|-i\))
            _filedir '+(txt|html)';; 
```

什么时候遇到过这种情况？我认为上面的第二行类似于

```
--import|-i) 
```

这对我来说很有意义。我搜索了我的`bash_completion.d`目录，`'+\\('`但那是唯一出现的一个，所以我想这并不常见。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-19T05:58:06.357

这段代码在没有上下文的情况下确实令人费解。事实上，它匹配两个文字字符串 -

```
$ case "+(--import" in +\(--import|-i\)) echo match ;; esac
match
$ case "-i)" in +\(--import|-i\)) echo match ;; esac
match 
```

它看起来类似于扩展的 glob 模式`+(--import|-i)`，但在这种形式下，它既不匹配文字模式（需要转义管道），也不是实际模式（需要转义括号）。我猜是“错误”，但是 bash 补全是疯狂元编程的雷区，所以如果没有看到整个脚本就不可能说出来。

来自[bash(1)](http://linux.die.net/man/1/bash)

> 如果使用内置 shopt 启用了 extglob shell 选项，则可以识别多个扩展模式匹配运算符。在下面的描述中，模式列表是一个或多个由 | 分隔的模式的列表。可以使用以下子图案中的一种或多种来形成复合图案：
> 
> [...]
> 
> ```
>  +(pattern-list)
>                  Matches one or more occurrences of the given patterns 
> ```

# java - MyBatis 中的多个参数？

> ID：12489022
> 
> 赞同：5
> 
> 时间：2012-09-19T05:24:57.797
> 
> 标签：java, mybatis

我知道这个问题被问了很多次，当我按照[指南](http://www.mybatis.org/core/sqlmap-xml.html)在我的选择查询中包含多个参数时，我仍然会遇到问题。这是我的配置文件：

```
<select id="selectByDate" parameterType="map" resultMap="campaignStats">
    SELECT * FROM CampaignStats WHERE statsDate >= #{start} AND statsDate <= #{end}
</select> 
```

这是我的Java代码：

```
public List<DpCampaignStats> selectByDate(Date start, Date end){
    SqlSession session = sqlSessionFactory.openSession();
    try {
        Map<String, Date> map = new HashMap<String, Date>();
        map.put("start", start);
        map.put("end", end);
        List<DpCampaignStats> list = session.selectList("DpCampaignStats.selectByDate", map);
        return list;
    } finally {
        session.close();
    }
} 
```

但是我收到错误：java.lang.ExceptionInInitializerError，这意味着我的配置文件中有一些错误，我找不到原因。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-09-20T15:23:45.197

只需将您的 SQL 语句包装在 CDATA 中：

```
<![CDATA[
   SELECT * FROM CampaignStats WHERE statsDate >= #{start} AND statsDate <= #{end}
]]> 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-20T05:38:24.863

我自己找到了答案：'<'和'>'在xml文件中有一定的含义，所以'>='应该是' *>* =' 而 '<=' 应该是 ' *<* ='。

# objective-c - UIButton 在自定义 UIImageView 中不起作用

> ID：12489025
> 
> 赞同：1
> 
> 时间：2012-09-19T05:25:13.287
> 
> 标签：objective-c, uiview, uibutton, custom-view

我正在使用自定义视图，其中有一个 UIButton 但它不起作用。当然，按钮在自定义视图中。这让我疯狂。我尝试了 self.isUserInteractionEnabled = YES;，但收到错误“没有设置方法'setIsUserInteractionEnabled：'进行分配”。谁能帮忙...

我的头文件...

```
#import <Foundation/Foundation.h>
#import "Clone.h"

@class UICloneInfoView;

@interface UICloneInfoView : UIImageView
{
    Clone *clone;    
}

@property(nonatomic, retain) Clone *clone;
@property(nonatomic, retain) UIButton *button;
@property(nonatomic, retain) UILabel *infoLabel;

// set a clone to show information on the bar
- (void)setClone:(Clone *)aClone;

@end 
```

这是.m文件...

```
#import "UICloneInfoView.h"

#define DEFAULT_HEIGHT_VIEW     90.0f
#define DEFAULT_WIDTH_VIEW      819.0f
#define DEFAULT_BUTTON_SIZE     40.0f

@implementation UICloneInfoView
@synthesize clone = _clone;
@synthesize button = _button;
@synthesize infoLabel = _infoLabel;

- (id)initWithImage:(UIImage *)image
{
    self = [super initWithImage:image];

    if (self) {
        // init somthing

        // init info label
        _infoLabel = [[UILabel alloc] initWithFrame:CGRectMake(10.0f, 5.0f, DEFAULT_WIDTH_VIEW - 80.0f, DEFAULT_HEIGHT_VIEW)];
        _infoLabel.backgroundColor = [UIColor clearColor];
        _infoLabel.font = [UIFont boldSystemFontOfSize:13.0f];
        _infoLabel.lineBreakMode = UILineBreakModeCharacterWrap;
        _infoLabel.numberOfLines = 3;

        // init button
        _button = [UIButton buttonWithType:UIButtonTypeRoundedRect];
        _button.frame = CGRectMake(_infoLabel.frame.origin.x + _infoLabel.frame.size.width + 10.0f, (self.frame.size.height/2), DEFAULT_BUTTON_SIZE, DEFAULT_BUTTON_SIZE);
        [_button setTitle:@"1" forState:UIControlStateNormal];
        [_button addTarget:self action:@selector(buttonAction:) forControlEvents:UIControlEventTouchUpInside];
        [self addSubview:_button];
    }

    return self;
}

- (void)setClone:(Clone *)aClone
{
    _clone = aClone;

    // set label text
    _infoLabel.text = [NSString stringWithFormat:@"Start Line: %d\tEnd Line: %d\t nLines: %d\tpcid: %d\nFile: %@", _clone.startLine, _clone.endLine, _clone.endLine - _clone.startLine + 1, _clone.pcid, _clone.sourcePath];

    // adjust the label with new height    
    CGSize expectedLabelSize = [_infoLabel.text sizeWithFont:_infoLabel.font constrainedToSize:_infoLabel.frame.size lineBreakMode:_infoLabel.lineBreakMode];
    CGRect newFrame = _infoLabel.frame;
    newFrame.size.height = expectedLabelSize.height;
    _infoLabel.frame = newFrame;

    // add _infoLabel to view
    [self addSubview:_infoLabel];
}

- (void)buttonAction:(id)sender
{
    NSLog(@"%@", ((UIButton*)sender).titleLabel.text);
}

@end 
```

这是一个快照 ![在此处输入图像描述](../Images/26d61b10f4e54ff590171a7bf661cd90.png)

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-19T06:00:58.320

UIImageView 默认将 userInteractionEnabled 设置为 NO。您正在将按钮作为子视图添加到图像视图中。您应该将其设置为“是”。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-19T05:50:28.503

这可能是因为你的类是 UIImageView 的子视图，所以图像视图正在处理所有的触摸事件，它们永远不会到达你的按钮。您可以在图像视图上禁用用户交互，以便触摸事件到达按钮。

一个更简单的解决方案就是让 UICloneInfoView 成为 UIView 的子类。然后你可以添加你的按钮，你的标签，克隆，然后添加一个 UIImageView 作为子视图。

你有什么理由想继承 UIImageView 吗？我不知道你的要求。

# emacs - 如何在使用 ritz-nrepl 时热重载代码

> ID：12489032
> 
> 赞同：3
> 
> 时间：2012-09-19T05:26:22.600
> 
> 标签：emacs, clojure

我正在使用 emacs、clojure-mode 和 ritz-nrepl。

我已经将我的代码设置为在更改时重新加载，同时使用 swank-clojure 使用以下内容 - [How to Reload files on save when using swank+leiningen+emacs](https://stackoverflow.com/questions/2596222/how-to-reload-files-upon-save-when-using-swankleiningenemacs)

如何调整它，以便在使用 ritz-nrepl 时也编译和重新加载我的代码。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-19T10:33:45.933

如果您使用的是 nREPL，它应该是**CcMn**，但除非您在 ritz 中需要特定的东西，否则我会推荐 nrepl.el，因为它取代了 swank-clojure 项目。=> [https://github.com/kingtim/nrepl.el](https://github.com/kingtim/nrepl.el)

# php - PHP 修改文本文件中的一行

> ID：12489033
> 
> 赞同：6
> 
> 时间：2012-09-19T05:26:25.930
> 
> 标签：php, string, file, text

我尝试并寻找解决方案，但找不到任何明确的解决方案。

基本上，我有一个列出用户名和密码的 txt 文件。我希望能够更改某个用户的密码。

users.txt 文件内容：

```
user1,pass1
user2,pass2
user3,pass3 
```

我尝试了以下 php 代码：

```
 // $username = look for this user (no help required)
            // $userpwd  = new password to be set 

    $myFile = "./users.txt";
    $fh = fopen($myFile,'r+');

    while(!feof($fh)) {
        $users = explode(',',fgets($fh));
        if ($users[0] == $username) {
            $users[1]=$userpwd;
            fwrite($fh,"$users[0],$users[1]");
        }
    }       

    fclose($fh); 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-09-19T07:57:50.590

这应该有效！:)

```
$file = "./users.txt";
$fh = fopen($file,'r+');

// string to put username and passwords
$users = '';

while(!feof($fh)) {

    $user = explode(',',fgets($fh));

    // take-off old "\r\n"
    $username = trim($user[0]);
    $password = trim($user[1]);

    // check for empty indexes
    if (!empty($username) AND !empty($password)) {
        if ($username == 'mahdi') {
            $password = 'okay';
        }

        $users .= $username . ',' . $password;
        $users .= "\r\n";
     }
}

// using file_put_contents() instead of fwrite()
file_put_contents('./users.txt', $users);

fclose($fh); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-19T05:48:14.357

我认为当您获得该文件时，使用 file_get_contents 之后使用 preg_replace 作为特定用户名

我过去做过类似这里的事情

```
 $str = "";

       $reorder_file = FILE_PATH;
       $filecheck = isFileExists($reorder_file);

       if($filecheck != "")
        {
            $reorder_file = $filecheck;
        }
        else
        {
            errorLog("$reorder_file :".FILE_NOT_FOUND);
            $error = true;
            $reorder_file = "";
        }
        if($reorder_file!= "")
        {
            $wishlistbuttonhtml="YOUR PASSWORD WHICH YOU WANT TO REPLACE"
            $somecontent = $wishlistbuttonhtml;
            $Handle = fopen($reorder_file, 'c+');
            $bodytag = file_get_contents($reorder_file);
            $str=$bodytag;
            $pattern = '/(YOUR_REGEX_WILL_GO_HERE_FOR_REPLACING_PWD)/i';
            $replacement = $somecontent;
            $content = preg_replace($pattern, $replacement, $str,-1, $count);
            fwrite($Handle, $content); 
            fclose($Handle);
        } 
```

希望这可以帮助....

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-19T05:54:39.257

这样做的正确方法是使用数据库。数据库可以轻松地进行随机访问，而使用文本文件则更少。

如果您出于某种原因无法切换到数据库，并且您不希望您的系统拥有超过一千个用户，那么只需读取整个文件并将其转换为 PHP 会简单得多数据结构，进行您需要进行的更改，将其转换回文本并覆盖原始文件。

在这种情况下，这意味着 file() 将文本文件加载到数组中，每个元素都是用户名和密码作为字符串，以逗号分解数组上的所有元素以分别获取用户名和密码，进行更改您需要制作，然后将修改后的数据写入光盘。

您可能还会发现 fgetcsv() 对读取数据很有用。如果您使用 SplFileObject 并且拥有最新版本的 PHP，则 fputcsv() 也可用于将数据写回。

但是，仅使用数据库是一个更好的解决方案。适合工作的工具。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2020-05-01T07:57:00.727

```
$fn = fopen("test.txt","r") or die("fail to open file");

$fp = fopen('output.txt', 'w') or die('fail to open output file');
while($row = fgets($fn)) 
{
    $num    = explode("++", $row);

    $name   = $num[1];
    $sex    = $num[2];
    $blood  =  $num[3];
    $city   = $num[4];

    fwrite($fp, "Name:  $name\n");
    fwrite($fp, "Sex:   $sex\n");
    fwrite($fp, "Blood: $blood\n");
    fwrite($fp, "City:  $city\n");
}
fclose($fn);
fclose($fp); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-19T07:23:20.610

如果您在 *nix 系统上，您可以使用`sed`; 我发现它比玩文件句柄等更整洁：

```
exec("sed -i '/^$username,.\+\$/$username,$userpwd/g' ./users.txt 2>&1", $output, $return); 
```

如果不是，我会同意 GordonM 并将文件解析为 PHP 数据结构，对其进行操作，然后将其放回：

```
$data = file_get_contents('./users.txt');

$users = array_map(function($line) {
  return explode(',', $line);
}, explode("\n", $data));

foreach ( $users as $i => $user ) {
  if ( $user[0] == $username ) {
    $user[1] = $userpwd;
    $users[$i] = $user;
  }
}

file_put_contents('./users.txt', implode("\n", array_map(function($line) {
  return implode(',', $line);
}, $users))); 
```

当然，有无数种方法可以做到这一点！

# php - 多选字段 - 多次使用 selected="selected"

> ID：12489034
> 
> 赞同：3
> 
> 时间：2012-09-19T05:26:40.017
> 
> 标签：php, arrays, select, default

我有一个这样的多个字段：

```
<select name="excluded_groups[]">
    <?php echo $foo->multi_group_select_options($group_ids, $excluded_id); ?>
</select> 
```

我设法通过此函数从数据库中获取结果并将它们放入 中`<select>`，但我无法保持选中的选定值。

第一个参数应该添加`selected="selected"`到提交前标记然后提交的字段，第二个参数防止显示 group_id（第二个参数正常工作）。

这里是函数...

```
/**
* group_options
* Get group names in the dropdown list
*/
public function multi_group_select_options($default = false, $exclude_id = '')
{
    global $user;

    $exclude_id = (isset($this->config['default_group'])) ? $this->config['default_group'] : 5;

    $sql_where = ($user->data['user_type'] == USER_FOUNDER) ? '' : 'WHERE group_founder_manage = 0';
    $sql_where_and = (!empty($sql_where)) ? ", AND group_id <> $exclude_id" : "WHERE group_id <> $exclude_id";
    $sql = 'SELECT group_id, group_name, group_type
            FROM ' . GROUPS_TABLE . "
            $sql_where
            $sql_where_and
            ORDER BY group_name";
    $result = mysql_query($sql);

    $s_group_options = '';
    while ($row = mysql_fetch_assoc($result))
    {
        /*if (is_array($default))
        {
            break;
            $group_id = '';
            foreach ($default as $key => $group_id)
            {
                $group_id = $group_id;  
            }
        }

        print_r($default);*/

        $selected = ($row['group_id'] == $group_id) ? ' selected="selected"' : '';
        $s_group_name = ($row['group_type'] == GROUP_SPECIAL) ? $user->lang['G_' . $row['group_name']] : $row['group_name'];
        $s_group_options .= '<option'  . (($row['group_type'] == GROUP_SPECIAL) ? ' class="sep"' : '') . ' value="' . $row['group_id'] . '"' . $selected . '>' . $s_group_name . '</option>';
    }
    $db->sql_freeresult($result);

    return $s_group_options;
} 
```

我作为第一个参数放置的数组是完全有效的。它只是一个带有键和值的普通数组，其中的值是组 ID。

尝试在 while 内使用 foreach - 不起作用，与 while 循环外相同。

$default 数组如下所示：

```
Array
(
    [0] => 1
    [1] => 7
    [2] => 2
    [3] => 3
) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-19T05:53:32.470

您的代码有几个问题。

首先，该函数将`$exclude_id`其作为参数，但忽略该参数并将其分配给：

```
$exclude_id = (isset($this->config['default_group'])) ? $this->config['default_group'] : 5; 
```

其次，您说这应该是多选，但是您的`<SELECT>`标签没有该`MULTIPLE`属性。

第三，您正在`$row['group_id']`比较`$group_id`. 这只允许一个默认值，而不是多个，你甚至没有设置变量（设置它的代码被注释掉，但它只会将它设置为`$default`数组的最后一个元素。DCoder 的评论似乎是正确的解决这个问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-19T12:24:54.207

你没有设置`$group_id`。以下代码将使用默认值数组以及单个值：

```
if(is_array($default)) {
  $selected = in_array($row['group_id'], $default);
} else {
  $selected = !strcasecmp($row['group_id'], $default);
}
$selected = $selected ? ' selected="selected"' : ''; 
```

除此之外，请查看@Barmar 在[他的答案](https://stackoverflow.com/a/12489250/1233508)中写的注释，并使用它`htmlspecialchars`来转义任何动态文本，例如`$s_group_name`.

* * *

此评论与您的​​具体问题无关，但您仍然应该考虑它。

请停止使用古老的 mysql_* 函数编写新代码。它们不再被维护并且社区已经开始了[弃用过程](http://news.php.net/php.internals/53799)。相反，您应该了解准备好的语句并使用[PDO](http://php.net/pdo)或[MySQLi](http://php.net/mysqli)。如果你想学习，[这里有一个相当不错的 PDO 相关教程](http://wiki.hashphp.org/PDO_Tutorial_for_MySQL_Developers)。

# postgresql - pgadmin3：致命：用户“postgres”的身份验证失败

> ID：12489036
> 
> 赞同：7
> 
> 时间：2012-09-19T05:27:00.457
> 
> 标签：postgresql, authentication, pgadmin

我正在尝试使用以下设置在 pgadmin3 中注册新服务器：

```
Name: postgres
Host: localhost
Username: postgres
Password: <password which works for psql>
Service: empty or postgres 
```

但它显示错误：

```
FATAL: Ident authentification failed for user "postgres" 
```

我已经重新启动了 postgresql 服务，但无济于事。

/var/lib/pgsql/data/pg_hba.conf 的内容：

```
# TYPE  DATABASE    USER        CIDR-ADDRESS          METHOD

# "local" is for Unix domain socket connections only
local   all         all                               trust
# IPv4 local connections:
host    all         all         127.0.0.1/32          trust
# IPv6 local connections:
host    all         all         ::1/128               ident 
```

编辑：工具-> 服务器配置-> pg_hba.conf 是灰色的。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-19T05:53:20.497

看起来 PgAdmin-III 可能默认通过 IPv6 连接，因此它使用`ident`与 localhost 的 IPv6 地址匹配的行，`::1/128`.

如果要使用密码身份验证，您可能需要：

```
# IPv4 local connections:
host    all         all         127.0.0.1/32          md5
# IPv6 local connections:
host    all         all         ::1/128               md5 
```

我不确定你为什么将 unix 域套接字行设置为`trust`，但如果它只是一台开发机器，那可能没问题，所以保持不变。`ident`但是，将其设置为（如果您希望 unix 用户必须与 Pg 用户相同）或`md5`（对于本地 unix 套接字上的密码验证）确实要安全得多。

`pg_hba.conf`如果 PgAdmin-III 没有编辑权限，您需要直接在文本编辑器中进行编辑。`postgres`您可以通过以用户身份运行 PgAdmin-III `sudo`，但仅使用`nano`或类似的命令行文本编辑器修改`pg_hba.conf`.

密码有效，`psql`因为`psql`除非另有说明，否则将通过 unix 域套接字连接，并且您将其设置为`trust`. 您可能会发现您可以提供*任何*密码`psql`并且它仍然可以工作，因为它从未被要求实际提供密码，它只是被自动信任。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2014-10-01T11:39:21.953

是的，每个 pgadmin 新手用户都会看到这种类型的错误。我找到了这个解决方案，它对我有用。

```
sudo -u postgres psql 
```

这将询问您的系统密码，然后您将收到 postgres 提示。

然后在 psql 中键入以下命令来更改密码。

```
\password 
```

现在输入新密码并重新输入。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-03-18T09:39:30.290

PostGreSQL 帐户调试步骤（特定于 Linux）：

1.  确保你确实安装了它（不仅仅是客户端，服务器也是）。
2.  确保它正在运行。
3.  确保你知道*它在哪里*——通常在**/var/lib/pgsql/data**中——但是这可能在任何地方——/var/lib/pgsql/unrelated-instance。检查您的**postgres 进程**以查看这是哪个目录（-D 参数）。
4.  修改上一步目录中的**pg_hba.conf**文件。我不知道为什么这个步骤不在 postgres 文档中。
5.  例如，Jay 和 Craig Ringer 的回答中已经涵盖了具体配置。确保同时配置**IPV4**和 IPV6。
6.  **重新启动服务器。**
7.  测试您的配置是否有效。重复5-7，直到可以登录成功。
8.  **重要**不要停止！现在您应该配置一个更安全的密码选项 - postgres 可能适合进行快速本地设置，但您希望使用更安全、可配置的身份验证机制，如 LDAP、Kerberos 或 GS​​SAPI。此外，您要确保已打开 SSL。

# c++ - 如何在 Linux 中使用 Makefile 一次编译一堆测试 C++ 文件

> ID：12489043
> 
> 赞同：0
> 
> 时间：2012-09-19T05:27:23.400
> 
> 标签：c++, linux, makefile

我在 Linux 系统上编译一个中型项目时遇到了 Makefile 问题。我的想法是让 Makefile 尽可能简单，让 Makefile 完成所有工作。我有几个源代码（在 source/src 中），但也有几个测试文件来测试每个库（在 source/test 中）。Makefile 在这里：

```
DHOME         = ${HOME}/Project
DSRC          = ${DHOME}/source/src
DINCLUDE      = ${DHOME}/source/include
BIN           = ${DHOME}/target/bin
DirObj        = ${DHOME}/target/obj
DirLib        = ${DHOME}/target/lib

INCLUDES      = -I${DINCLUDE} 
DLIB          = ${DHOME}/target/lib
LIBS          = -L${DLIB} -lm ${DLIB}/dclass.a

CXX           = g++ -g ${INCLUDES} -L${DLIB}
MAKE          = ${CXX} -O -Wall -fPIC -c

TESTS =  test_FCity test_FPlane
o_base  =  DPara.o  DString.o  FCommand.o  FInput.o

${o_base}: %.o: $(DSRC)/%.cc
      $(MAKE) $(CFLAGS) $< -o ${DirObj}/$@ 

dclass: $(o_base)
      ar -rs ${DirLib}/dclass.a ${DirObj}/*.o

TEST_SOURCE = $(wildcard test/test_*.cc)

test: ${o_base} dclass
      ${CXX} ${TEST_SOURCE} -o ${BIN}/$@ ${LIBS}

main: $(SOURCES) $(EXECUTABLE)
      ${CXX} /src/main.c -o ${BIN}/main ${LIBS} 
```

我想要做的`make main`是编译和链接主要代码（`main.cc`）[在上面的 Makefile 中未经测试]，并`make test`自动编译和链接目录中的每个文件`source/test`（并将它们放入`target/bin`）。现在，在运行这个 Makefile 时，每个库似乎都被编译了，但我得到了这个错误：

```
multiple definition of `main' 
```

不奇怪，当我尝试编译一些都有`main()`功能的测试脚本时。知道如何解决这个问题，以及如何改进上述 Makefile 吗？也许有一些关于如何减少`o_base`行中给出的文件数量的想法？

谢谢亚历克斯

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-19T05:56:35.780

您的分析是正确的，您尝试将所有 .o 文件链接到测试目标中，这会导致不同的可执行文件进入一个文件。

由于您希望 TEST_SOURCE 中的每个文件都有一个生成的可执行文件，因此您必须为每个单独的文件调用编译器。实现此目的的一种方法是在规则中编写一个 (bash) 循环，遍历 TEST_SOURCE 的所有元素，并为每个元素调用编译器。

“makefile”-ier 方法是正确定义依赖关系，即您定义该测试还依赖于 TEST_SOURCE 的目标（即您定义可执行文件，例如 TEST_EXEC=$(TEST_SOURCE:.o=_exec)）并使用编译器调用作为 TEST_EXEC 生成的规则。

**编辑：**更详细：

您需要测试的可执行文件的名称：（我现在没有使用结尾的 _exec，而只使用了基本名称）（注意 - 这假设每个 .cc 都是独立的测试，但已经有一个 TESTS变量我认为可能不是这种情况）：

```
TEST_EXEC = $(TEST_SOURCE:.cc=) 
```

现在我们必须说明如何构建这些测试可执行文件之一：

```
${TEST_EXEC}: % : %.cc dclass ${o_base}
        ${CXX} $< -o $@               # fit this line to your needs 
```

最后我们告诉他我们的目标测试依赖于所有这些测试可执行文件：

```
test: ${TEST_EXEC}
        echo we have nothing to do here, so we just emit "Tests created" 
```

# php - 如何隔离同一服务器上的 cookie？

> ID：12489046
> 
> 赞同：1
> 
> 时间：2012-09-19T05:27:44.820
> 
> 标签：php, webserver, session-state, session-cookies

我在同一台服务器 Host 上有 2 个网站。我想将 Site 1 的 cookie 与 Site 2 隔离开来。我怎样才能做到这一点 ？

我不想花钱，也不想在同一台服务器上托管两个站点。但是一个站点的 Cookie 不应该干扰其他站点。

我的目录结构如下（我可以灵活地改变它，主要目的是让两者都在同一台服务器上）

```
 www.mysite.com/       - website 1st
 www.mysite.com/site2  - website2nd 
```

两者都有不同的代码并且彼此无关。目前只是放在不同的目录中。当我`echo $_SESSION['id']` 从第 2 次干扰圣。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-19T05:40:52.280

Cookie 具有与之关联的路径，但当路径是目录时，它也适用于其中的整个层次结构。您遇到的问题是站点 2 位于站点 1 的子目录中。

因此，您需要将两个站点放在不相交的目录中：

站点 1：www.mysite.com/site1 站点 2：www.mysite.com/site2

另一种选择是使用虚拟主机。Cookie 与服务器主机名相关联，因此您可以拥有 www.mysite1.com 和 www.mysite2.com。然后服务器上的实际位置无关紧要。

# javascript - DirectionsService.route 不返回数据绑定 div

> ID：12489051
> 
> 赞同：1
> 
> 时间：2012-09-19T05:28:32.593
> 
> 标签：javascript, google-maps-api-3

我正在做一些 js 来使用 asp.net 获取方向面板

```
<!-- language: lang-js -->

var directionsDisplay;
var directionsService = new google.maps.DirectionsService();
var map;

function initialize() {
    directionsDisplay = new google.maps.DirectionsRenderer();
    var chicago = new google.maps.LatLng(41.850033, -87.6500523);
    var mapOptions = {
        zoom:7,
        mapTypeId: google.maps.MapTypeId.ROADMAP,
        center: chicago
    }
    map = new google.maps.Map(document.getElementById("map_canvas"), mapOptions);
    directionsDisplay.setMap(map);
    directionsDisplay.setPanel(document.getElementById("directionsPanel"));
}

function calcRoute(lat,lan) {
    var InitialOrigin =  document.getElementById('ctl00_ContentPlaceHolder1_FESearchListingControl1_txtHide').value;
    //var InitialOrigin = document.getElementById("txtHide").Value;
    var technopark = new google.maps.LatLng(8.5572357 ,76.87649310000006 );

    var split = InitialOrigin.split(',');
    var latFrom = parseFloat(split[0]);
    var lanFrom = parseFloat(split[1]);
    InitialOrigin= new google.maps.LatLng(latFrom,lanFrom);
    var to = new google.maps.LatLng(lat,lan);
    //  var start = document.getElementById("start").value;
    //  var end = document.getElementById("end").value;
    var request = {
        origin:InitialOrigin,
        destination:to,
        travelMode: google.maps.TravelMode.DRIVING
    };
    directionsService.route(request, function(response, status) {
        if (status == google.maps.DirectionsStatus.OK) {
            directionsDisplay.setDirections(response);
        }
        else
        {
            console.log('something went wrong',status);
        }
    });
} 
```

我用 crome 浏览器调试，发现这条线

```
directionsService.route(request, function(response, status) { 
```

没有返回任何东西，调试器只是跳到最后一个右括号。调试器从未输入过这个 if 语句

```
if (status == google.maps.DirectionsStatus.OK) {
    directionsDisplay.setDirections(response);
}
else
{
    console.log('something went wrong',status);
} 
```

这是以前的工作，我之前得到了方向面板，谷歌有一些限制吗？

# apache - 如何更改别名目录中 URL 的基础

> ID：12489054
> 
> 赞同：0
> 
> 时间：2012-09-19T05:29:02.600
> 
> 标签：apache, alias, base-url

我必须将网站驻留在两个不同的服务器上。server1 上的主网站和 server2 上的子网站。子网站必须以[http://mainwebsite.com/subwebsite的形式访问](http://mainwebsite.com/subwebsite)的形式访问。

它的别名在 server1 上定义。但子网站上的 URL 不正确。例如，带有 '/' url 的链接 'Home' 指的是 'http://mainwebsite.com' 而不是 'http://mainwebsite.com/subwebsite' 并且会话也不起作用，因为它们设置为 '/ ' .

apache 上的任何配置指令是否将“/”更改为“http://mainwebsite.com/subwebsite”？

谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-19T05:49:03.797

你不需要这样的东西吗？

```
<VirtualHost *:*>
  ServerName www.mainserver.com
  # Proxy configuration
  ProxyRequests Off
  ProxyPreserveHost On
  ProxyPass /subdomain/ http://server2
  ProxyPassReverse /subdomain/ http://server1/subdomain/
</VirtualHost> 
```

外界将看到该站点，就好像它托管在同一台服务器上一样。主服务器将告诉 Apache 向 server2 请求 /subdomain 下的所有内容，并将响应传递回客户端。

# ruby-on-rails - 使用 Rails3 和 Rabl 将 JSON 嵌入 HTML

> ID：12489055
> 
> 赞同：0
> 
> 时间：2012-09-19T05:29:03.997
> 
> 标签：ruby-on-rails, ruby-on-rails-3, json, rabl

我正在关注[#322 RailsCasts](http://railscasts.com/episodes/322-rabl)，在最后一部分中，他评论了一种将 json 嵌入 html 的方法

```
<div id="articles" data-articles="<%= render(template: "articles/index.json.rabl") %>" > 
```

在我的项目中，我有一个 rabl 模板：app/views/places/show.json.rabl

```
object  @place
attributes :id, :name, :desc, :address
node(:type) { |place| place.type_place.name }
child :photos do 
  attributes :id, :desc
  node(:url) { |photo| photo.image.url(:square) }
end 
```

如果我渲染 /places/21.json 它显示：

```
{"id":21,"name":"foo","desc":"bar","address":"some address","type":"baz",
 "photos":[{"id":26,"desc":"foofoo","url":"/uploads/photo/image/26/square_conmemorativo-1920x1080.jpg"}]} 
```

很好，但如果我尝试将 json 数据嵌入到 html 中，我会这样做：

```
<article id="show_place" data-place="<%= render(template: "places/#{@place.id}.json.rabl") %>" > 
```

**错误日志**

> 缺少带有 {:locale=>[:en], :formats=>[:html], :handlers=>[:erb, :builder, :coffee, :rabl]} 的模板 places/21.json。搜索：*“/home/ed/projects/rails_projects/final_u/app/views”

我究竟做错了什么？

**更新**

我刚刚找到了解决方案

```
<article id="show_place" data-place="<%= render(template: "places/show.json.rabl") %>" > 
```

它有效，但我不知道为什么..这里我还有另一个问题

> 有一种方法可以将单个对象传递给 render(template: "") ??

提前谢谢....对不起我的英语

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-19T23:26:47.950

这背后的原因是`render`. 该函数期望模板本身呈现，而不是路由（这是您在 URL 栏中输入的内容）。

如果您`/places/21.json`在浏览器中输入 URL 栏，它会调用带有 id = 21 和 format = json 参数的位置控制器。然后它将在控制器中定义的函数的末尾呈现适当命名的视图（在这种情况下将是您的 RABL 模板）。`@place`然后，该模板根据第一行定义的变量的值呈现它的数据。

我假设您的控制器将`@place`变量设置为`params[:id]`或类似的东西。

当您调用时，`render`您实际上是在手动执行控制器功能自动为您执行的最后一部分：显示模板。然后，您应该指定*要*渲染的模板，确保事先设置任何变量。

所以`places/show.json.rabl`工作的原因仅仅是因为你正在渲染适当命名的模板。这将在您的文件夹内呈现`show`模板。然后它将使用我假设您之前在控制器或视图中定义的变量。`places``views``@place`

**TL;DR**
你最后通过渲染模板做了正确的事情。您可以通过更改模板在第一行使用的变量来呈现不同的对象。

# php - openssl 密钥生成 - php.ini 如何获取所有值？

> ID：12489056
> 
> 赞同：2
> 
> 时间：2012-09-19T05:29:09.753
> 
> 标签：php, encryption, openssl, rsa

我正在尝试使用 OPENSSL 实现 rsa 加密和解密。请查看下面给出的代码，如果有任何问题，请告诉我。

```
<?php
function pr($val){
echo '<pre>'; 
print_r($val);
echo '</pre>';
}

function strtohex($string)
{
  $string = str_split($string);
  foreach($string as &$char)
    $char = dechex(ord($char));
  return implode('',$string);
}

$res=openssl_pkey_new(array('digest_alg' => 'sha1', 'private_key_type' =>         OPENSSL_KEYTYPE_RSA, 'private_key_bits' => 1024));

// Get private key
openssl_pkey_export($res, $privkey);
$data='test';
echo 'prvt<br/>'.$privkey.'<br/> ends<br/><br/>';
// Get public key
$pubkey=openssl_pkey_get_details($res);

pr($pubkey["key"]);
echo 'prvt<br/><br/>';
//var_dump($pubkey["rsa"][""]);
pr($pubkey["rsa"]);
echo 'prvt<br/><br/>';
$n=strtohex($pubkey["rsa"]["n"]);
echo 'n<br/><br/>';
pr($n);
echo 'e<br/><br/>';
$e=$pubkey["rsa"]["e"];
pr($e);
//$binarydata = pack($pubkey["rsa"]["e"], 0x1234, 0x5678, 65, 66);
//pr($binarydata);
echo 'd<br/><br/>';
$d=strtohex($pubkey["rsa"]["d"]);
pr($d);
echo 'p<br/><br/>';
$p=strtohex($pubkey["rsa"]["p"]);
pr($p);
echo 'q<br/><br/>';
//var_dump($pubkey["rsa"]["q"]);
$q=strtohex($pubkey["rsa"]["q"]);
pr($q);

echo 'dmp1<br/><br/>';
//pr($pubkey["rsa"]["dmp1"]);
$dmp1=strtohex($pubkey["rsa"]["dmp1"]);
pr($dmp1);

echo 'dmq1<br/><br/>';
//pr($pubkey["rsa"]["dmq1"]);
$dmq1=strtohex($pubkey["rsa"]["dmq1"]);
pr($dmp1);

echo 'iqmp<br/><br/>';
//pr($pubkey["rsa"]["iqmp"]);
$iqmp=strtohex($pubkey["rsa"]["iqmp"]);
pr($iqmp);

?> 
```

这里我没有得到索引 $pubkey["rsa"]["e"] 的值。任何帮助，将不胜感激...

提前谢谢...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-25T19:27:37.360

我会使用 phpseclib，一个[纯 PHP RSA 实现](http://phpseclib.sourceforge.net/)。例如。

```
<?php
include('Crypt/RSA.php');

$rsa = new Crypt_RSA();
$rsa->loadKey('...');

$privatekey = $rsa->getPublicKey(CRYPT_RSA_PUBLIC_FORMAT_RAW); 
```

# liferay-6 - jodd.bean.BeanException：未找到简单属性：cId 无效属性：'TradingCategoryImpl#cId'

> ID：12489057
> 
> 赞同：3
> 
> 时间：2012-09-19T05:29:12.263
> 
> 标签：liferay-6, alloy-ui

我遇到以下问题我正在使用 AlloyUI 在 Liferay 中实现一个 portlet

使用以下代码

```
 <liferay-ui:search-container-row
    className="com.handysoft.tp.model.TradingCategory"
    keyProperty="cId"
    modelVar="category">

  <liferay-ui:search-container-column-text
      name="category-name"
      value="<%= category.getCName() %>" />
  <liferay-ui:search-container-column-jsp
      path="/admin/action.jsp"
      align="right" />

</liferay-ui:search-container-row> 
```

Portlet 仍然有效，但我遇到以下错误

```
jodd.bean.BeanException: Simple property not found: cId Invalid property: 'TradingCategoryImpl#cId' 
```

如果我将一小部分更改为

```
<liferay-ui:search-container-column-text
      name="category-name"
      property="cName" /> 
```

错误发生在 cName 和 cId 中。什么都没有出现，你能帮我解决这个问题吗

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-06-06T06:44:45.937

FeinesFabi 是对的。Liferay Search 容器似乎不采用其中包含超过 1 个大写字母的属性名称。

例如。如果一个属性是 tClassId 那么它不会工作，但 tclassId 会正常工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-13T09:33:53.487

我有同样的问题。

将主键从重命名为`gID`重新`glossarId`运行服务构建器为我修复了它。不过，我不明白为什么。

# android - Design Issue with HD Screen in Android

> ID：12489065
> 
> 赞同：3
> 
> 时间：2012-09-19T05:29:50.890
> 
> 标签：android, layout, gridview

Here I develop one Android application which has Bookshelf screen. But when I tested it on HTC-Salsa and SonyXperia-Sola I found major difference and ugly looking in SonyXperia-Sola.

HTC Mobile Screen is following.

![enter image description here](../Images/3a44ee6515c74efe211e6135450a6242.png)

Sony Mobile Screen is following.

![enter image description here](../Images/dd4fc3130a0d52c4d3fce3d91969a40d.png)

Here I use custom gridview to display books, I fill this gridview with BaseAdapter and I set xml layout for gidviewitem, in gridview item xml layout I fix the book size, width = 150dp and height = 170dp.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-19T10:25:18.197

Use embedded horizontal `LinearLayouts` instead and give each book item the same `layout_weight`. Like.

```
<LinearLayout
    android:id="@+id/bookshelf_row1"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:orientation="horizontal">
    <ImageView
        android:id="@+id/first_book"
        android:layout_width="fill_parent"
        android:layout_height="fill_parent"
        android:src="@drawable/book_image"
        android:layout_weight="5" />
    <ImageView
        android:id="@+id/second_book"
        android:layout_width="fill_parent"
        android:layout_height="fill_parent"
        android:src="@drawable/book_image"
        android:layout_weight="5" />
    <ImageView
        android:id="@+id/third_book"
        android:layout_width="fill_parent"
        android:layout_height="fill_parent"
        android:src="@drawable/book_image"
        android:layout_weight="5" />
</LinearLayout> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-19T10:38:29.403

I converted the pixel value to dp according to density, and now it works.

# javascript - HTML5 预加载器视频（进度条填满的速度比视频结尾的文件快）

> ID：12489068
> 
> 赞同：1
> 
> 时间：2012-09-19T05:30:29.920
> 
> 标签：javascript, jquery, html

我有个问题。进度条填满的速度比以文件结尾的视频快。进度条已满，视频尚未完成。

```
$('.media_audio_player').bind('timeupdate' ,function() {
    var id = $(this);
    var idn = 'AudioBar_wrap\+'+this.id.split('rolf')[1];
    var canvas = document.getElementById(idn);

    if (canvas.getContext) {
        var ctx = canvas.getContext("2d");
        var lingrad = ctx.createLinearGradient(0,0,0,150);
        var fWidth = (id.get(0).currentTime / id.get(0).duration) * (canvas.clientWidth);

        if (fWidth > 0) {
            lingrad.addColorStop(0, '#ebbdbd');
            lingrad.addColorStop(0.5, '#dd6060');
            lingrad.addColorStop(1, '#dc4c4c');
            ctx.fillStyle = lingrad;
            ctx.fillRect(0, 0, fWidth, 150);
        }
    }
}); 
```

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-19T05:37:37.797

```
var progress = Math.floor(video.currentTime) / Math.floor(video.duration);
controls.progress[0].style.width = Math.floor(progress * controls.total.width()) + "px"; 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-09-20T13:20:19.940

你也可以做下一个：

```
var fWidth = (id.get(0).currentTime / id.get(0).duration) * (CanvasWidth); 
```

其中 CanvasWidth= 画布长度，在文件播放完毕之前填充。在你的情况下：

```
var fWidth = (id.get(0).currentTime / id.get(0).duration) * (300); 
```

# c++ - 如何判断 Boost 的哪些部分已被弃用？

> ID：12489070
> 
> 赞同：2
> 
> 时间：2012-09-19T05:30:47.363
> 
> 标签：c++, boost, lambda, deprecated, boost-phoenix

我刚刚开始为我的嵌入式 C++ 编程使用 boost。Lambda 看起来很有趣，所以我正在阅读它。当我尝试在 shared_ptrs 容器上使用带有 lambda 的 stl 算法时，我遇到了一些问题。在 SO 上进行一些搜索后，我找到了一篇文章，指出 Lambda 已被弃用，Phoenix 将用于所有新代码。当我尝试了解更多关于 boost 的知识时，我想避免学习已弃用的部分。这种类型的事情记录在哪里？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-19T05:48:28.440

通常，boost 文档会警告您已弃用的功能。但是，这些信息有时会在文档更新之前“泄漏”出来，这似乎是在这种情况下发生的情况。如果您真的想处于最前沿，您可以随时订阅开发者邮件列表之一，否则您应该坚持使用官方文档。

# c# - 如何部署 .Net Windows 应用程序

> ID：12489071
> 
> 赞同：2
> 
> 时间：2012-09-19T05:31:05.367
> 
> 标签：c#, vb.net, visual-studio

请问，是否有任何用于部署 .Net Windows 应用程序/程序集的书籍或教程。

我需要 .Net 应用程序部署的深入教程。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-19T10:23:54.757

如果您希望为您的客户端或组策略部署生成 MSI 可再发行安装程序，那么我建议您学习 WiX 系统。

VS11 (VS2012) 不再支持 Visual Studio 安装项目，免费的 InstallShield 替代品的功能少于 VS10 安装项目。

去这里[http://wixtoolset.org/](http://wixtoolset.org/)和这里：[http://wix.tramontana.co.hu/tutorial/getting-started/the-software-package](http://wix.tramontana.co.hu/tutorial/getting-started/the-software-package)了解如何构建 XML 文件，然后开始添加文件进入 WiX 包。

工具集[http://wixtoolset.org/releases/v3.6/stable](http://wixtoolset.org/releases/v3.6/stable)下载包含一个 VS11 项目模板，它与 VS 以及您正在使用的任何源代码控制很好地集成。

希望这个对你有帮助！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-19T05:33:50.840

按照这个。您将能够使用设置项目进行部署

[http://documentation.devexpress.com/#xaf/CustomDocument3235](http://documentation.devexpress.com/#xaf/CustomDocument3235)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-19T06:24:37.130

[部署 AC# 应用程序（Visual Studio 安装项目）](http://www.dreamincode.net/forums/topic/58021-deploying-a-c#-application-visual-studio-setup-project/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-19T05:34:52.710

我在手机上，所以我无法为您提供链接，但您需要做的就是将可执行文件从项目的 bin 文件夹中复制出来。

# sql-server - 通过仅编辑一个数据库来更新所有 SQL Server 数据库

> ID：12489072
> 
> 赞同：1
> 
> 时间：2012-09-19T05:31:12.780
> 
> 标签：sql-server

我可以创建一个像“模型数据库”这样的数据库，但不仅适用于新数据库，还适用于旧数据库，以允许我只编辑一个数据库，然后对服务器中的所有数据库进行编辑。

致以我的问候

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-19T06:25:19.033

不。

这种功能的实现将非常复杂。如果一个或多个受添加新表影响的数据库已经有一个同名的表怎么办？

如果其中一个数据库向其中一个“共享”表添加了新列怎么办？对“类似模型”数据库的更改是否应该覆盖该列？还是忽略它？

这里有很多复杂的问题需要处理，其中大多数最终都必须根据个人情况来回答（即对你有用的东西对我不起作用，反之亦然）。

* * *

另一方面，如果您正在处理一组带有公共数据的公共表，这些表应该只有一个“形状”，您可能需要查看[Replication](http://msdn.microsoft.com/en-us/library/ms151198.aspx)：

> 复制是一组技术，用于将数据和数据库对象从一个数据库复制和分发到另一个数据库，然后在数据库之间进行同步以保持一致性。使用复制，您可以通过局域网和广域网、拨号连接、无线连接和 Internet 将数据分发到不同的位置以及远程或移动用户。

# android - 用于行车路线的谷歌导航 API

> ID：12489073
> 
> 赞同：4
> 
> 时间：2012-09-19T05:31:19.687
> 
> 标签：android, navigation

我正在构建一个 Android 应用程序来显示从源到目的地的路线。
在应用程序中，与 Google 地图路径相比，我找到了一条最佳路径。

但是对于行车路线，我想要一个 API，它会依次显示从源到目的地的路线，如附件所示。

由于我正在创建自己的路径，因此我有一堆从源到目的地的纬度和经度。
有什么方法可以使用我自己的数据（即纬度和经度）并将其显示在下图中？

![在此处输入图像描述](../Images/7e1d115890fead08efce376c34c01e76.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-07T16:58:03.950

您将不得不使用非谷歌地图来显示转弯方向，这在他们的 TOS 中是明确禁止的。

# mysql - 将 NULL 插入 MySQL 时间戳

> ID：12489078
> 
> 赞同：34
> 
> 时间：2012-09-19T05:31:45.350
> 
> 标签：mysql, sql, database, hibernate

我观察到在 MySQL 时间戳列中插入/更新 NULL 的意外行为。

考虑以下陈述。

```
create table temp(id int, hireDate timestamp default 0);
insert into temp (id) values(1);
insert into temp (id, hireDate) values(2, null);
select * from temp;
id  hireDate
-----------------------------
1   
2   2012-09-19 10:54:10.0 
```

第一次插入（当`hiredate`SQL 中未指定时，hireDate`null(0)`是预期的。

但是，当在 SQL 中传递显式 null 时，会插入当前日期时间，这是意外的。为什么会这样？

注意：Hibernate 使用第二种类型的插入，因此它成为一个问题。如何将 null 插入时间戳列？

* * *

## 回答 #1

> 赞同：33
> 
> 时间：2012-09-19T05:46:09.130

[http://dev.mysql.com/doc/refman/5.0/en/timestamp-initialization.html](http://dev.mysql.com/doc/refman/5.0/en/timestamp-initialization.html)

> 此外，您可以将任何 TIMESTAMP 列初始化或更新为当前日期和时间，方法是为其分配 NULL 值，除非它已使用 NULL 属性定义以允许 NULL 值。

为了允许 TIMESTAMP 可以为空，请使用 NULL 属性创建它，或者更改表并添加 NULL 属性。在 create 语句中，它类似于。

```
CREATE TABLE t1 (tsvalue TIMESTAMP NULL, ... ); 
```

将***NULL***值插入到具有 NULL 属性集的***TIMESTAMP***字段将导致该字段被设置为 NULL 而不是 NOW()。

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2015-01-23T20:37:53.440

## 您可以将 NULL 插入和更新到 MySQL 时间戳中。

**创建表：**

```
create table penguins(id int primary key auto_increment, the_time timestamp NULL); 
```

**插入一些行：**

```
insert into penguins(the_time) values (now());
insert into penguins(the_time) values (null);
insert into penguins(the_time) values (0);
insert into penguins(the_time) values ('1999-10-10 01:02:03'); 
```

**哪个打印：**

```
select * from penguins

1   2015-01-23 15:40:36
2   
3   0000-00-00 00:00:00
4   1999-10-10 01:02:03 
```

以数据类型调用的列`the_time`：`timestamp`在第二行的值为 NULL。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-09-19T06:06:16.153

您需要更改hireDate 列的默认值。默认值应为空

这

```
create table temp(id int, hireDate timestamp default 0); 
```

应该是这样的：

```
create table temp(id int, hireDate timestamp null); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-19T05:44:19.050

如果要在`hireDate`表的列中插入 NULL，则必须提供 null

`INSERT INTO temp (id, hireDate) VALUES(3, null);`

因为`Datatype` 是，所以在创建列`hireDate`的`timestamp`时候应该定义为null

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2018-07-15T11:06:41.257

永远不要将任何应用程序值存储到 MySQL 时间戳类型列中。仅将时间戳类型用于数据库服务器端动态时间戳（请参阅 DEFAULT 和 ON UPDATE 列属性）。通过调用列“mysql_row_created_at”和“mysql_row_updated_at”来明确说明。

请注意，MySQL 将其时间戳类型物理存储为数字 UNIX-epoch-delta，因此它具有 UTC 的隐式时区，这使其不受会话（AKA 连接）级别的时区更改的影响。

远离“日期时间”类型，在存储任何具有已知时区的值时更是如此。'datetime' 类型很像一串压缩数字。没有存储时区详细信息。

“日期”类型通常可以使用。请注意，尽管在某些情况下，它将被解释为（活动时区的）午夜的日期时间，这将导致您应该避免的所有与“日期时间”相关的混淆。

对于任何应用程序端的日期时间值，使用“int unsigned”、“bigint”（有符号）、“double”（有符号）或小数（N，P）来简单地存储 UNIX-epoch-deltas . 如果不是秒，请确保在列名后缀中显示分辨率。

例子：

```
`mysql_row_created_at` TIMESTAMP(3) DEFAULT CURRENT_TIMESTAMP,
`mysql_row_updated_at` TIMESTAMP(3) DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,

`epoch` int unsigned NOT NULL,
`epoch_ms` bigint NOT NULL,
`epoch_us` bigint NOT NULL,
`epoch` double NOT NULL,
`epoch6` decimal(16,6), 
```

尽可能多地对待您的数据库作为哑存储。所以只能在应用程序端进行任何转换，而不是在数据库端。

很高兴知道：

```
SELECT @@GLOBAL.TIME_ZONE
, @@SESSION.TIME_ZONE
, @@SESSION.TIMESTAMP
, UNIX_TIMESTAMP(NOW(6))
; 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2021-09-21T14:47:20.740

从旧的 mysql 5.6.44-86.0 升级到 aurora mysql 5.7.12 时，我遇到了类似的行为。代码将 NULL 作为时间戳插入并期望写入全 0 日期 - 相反它抛出错误“列 'XXXX' 不能为空”。我通过将组参数explicit_defaults_for_timestamp 设置为0 解决了这个问题，然后允许将时间戳列插入/更新为null 而不会出错。

# php - 这段代码在php中的任何快捷方式？

> ID：12489090
> 
> 赞同：2
> 
> 时间：2012-09-19T05:33:54.243
> 
> 标签：php

```
<?php
$s1="";$s2="qwe";$s3="zxc";

if(!empty($s1))
{
    $result=$s1;
}
else
{
    if(!empty($s2))
    {
        $result=$s2;
    }
    else
    {
        $result=$s3;
    }
}

echo "$result";
?> 
```

是否有任何可能的代码，可能是 1-2 行，替换上面提到的代码，我记得使用“或”运算符来做我正在用这段代码做的事情。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-19T05:37:10.563

```
$result = $s1 ? $s1 : ($s2 ? $s2 : $s3); 
```

甚至更短，如果你的 PHP > 5.3：

```
$result = $s1 ?: ($s2 ?: $s3); 
```

更多：[关于三元运算符的 PHP 手册部分](http://php.net/manual/en/language.operators.comparison.php#language.operators.comparison.ternary)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-19T05:36:59.247

尝试条件赋值运算符：

```
$result = !empty($s1) ? $s1 : ( !empty($s2) ? $s2 : $s3 ); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-19T05:40:43.997

```
$result = $s1 ? $s1 : ($s2 ? $s2 : $s3); 
```

为什么用这个？

因为它减少了程序的复杂性

**注意：**三元运算符是从左到右计算的。所以如果你没有正确地对表达式进行分组，你会得到一个意想不到的结果

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-19T05:44:38.457

使用此代码：

```
<?

$s1="";
$s2="qwe";
$s3="zxc";

echo $result = ($s1!="") ? $s1 : ( ($s2!="") ? $s2 : $s3);

?> 
```

输出：qwe

是三元运算符。如果 $s1 不为空，则返回 $s1，否则再次检查 $s2 的条件，如果它也为空，则返回 $s3。

# android - 如何修复 Android (ndk) 中本机 cpp 函数的 UnsatisfiedLinkError

> ID：12489092
> 
> 赞同：0
> 
> 时间：2012-09-19T05:34:39.483
> 
> 标签：android, android-intent, android-emulator, android-ndk

我正在尝试在 c 中运行一个简单的 Android ndk 应用程序，但我得到了 stringFromJNI() 函数的 UnsatisfiedLink 错误。

任何帮助，将不胜感激。我的 C 语言很流利，但我的 java 有点生疏。我一直在尝试来自网络的很多关于命名的技巧，但到目前为止还没有运气。这是我的文件：

**你好-jni.c：**

```
#include <string.h>
#include <jni.h>

jstring
Java_com_example_hellojni_HelloJni_stringFromJNI( JNIEnv* env,
                                                  jobject thiz )
{
    return (*env)->NewStringUTF(env, "Hello from JNI !");
} 
```

**安卓.mk：**

```
LOCAL_PATH := $(call my-dir)

include $(CLEAR_VARS)

LOCAL_MODULE    := hello-jni
LOCAL_SRC_FILES := hello-jni.c

include $(BUILD_SHARED_LIBRARY) 
```

我用 ndk-build 编译它，一切顺利，它为我提供了一个 libnative.so，它位于项目目录中。剩下的我用eclipse。

**NdkFooActivity.java：**

```
package com.narola.Testndk;

import android.os.Bundle;
import android.app.Activity;
import android.util.Log;
import android.view.Menu;

public class NdkFooActivity extends Activity {

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_ndk_foo);

        Log.i("comes at point","hay...");
        Log.d("value is : ",""+stringFromJNI());
    }

    public native String  stringFromJNI();
    public native String  unimplementedStringFromJNI();

    static {
        System.loadLibrary("hello-jni");
    }

    @Override
    public boolean onCreateOptionsMenu(Menu menu) {
        getMenuInflater().inflate(R.menu.activity_ndk_foo, menu);
        return true;
    }
} 
```

感谢您的任何建议，现在已经搜索了几个小时！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-19T06:04:09.477

问题出在`hello-jni.c`文件中。您在 c 文件中有方法签名，`Java_com_example_hellojni_HelloJni_stringFromJNI`否则在您的活动中包名称为`com.narola.Testndk`.

方法签名的格式类似于`Java_packagename_activityname_methodname`（在包名称中 (.)Dot 将被下划线替换）。在你的情况下尝试`Java_com_narola_Testndk_NdkFooActivity_stringFromJNI`

# perl - perl中的单行模式匹配

> ID：12489093
> 
> 赞同：-2
> 
> 时间：2012-09-19T05:34:42.883
> 
> 标签：perl, pattern-matching

我有一个标量，其值将是这样的。

```
Sun Sep  9 12:14:56 2012 : [Pro] Write to file(/root/mesh/MeshBed/trunk/meshproc/neighInfo/neighbors-list_152\.    14.189.6) : #ip=152.14.189.99 neighinfo=NULL mac=06:02:6F:A7:3E:BC# 
```

我想从 perl 中获取 Timefield (12:14:38) 和 ip (152.14.189.99)。我试过用这个..

```
$p =~ /ip\=(\.\d+\.\d+\.\d+\d+)/;
print $1; 
```

这是抛出编译错误。任何人都可以解决这个问题。

```
#!/usr/bin/perl -w

use strict;
use warnings;

my $p = "Sun Sep  9 12:14:56 2012 : [Pro] Write to file(/root/mesh/MeshBed/trunk/meshproc/neighInfo/neighbors-list_152\.    14.189.6) : #ip=152.14.189.99 neighinfo=NULL mac=06:02:6F:A7:3E:BC#";

$p =~ /ip\=(\.\d+\.\d+\.\d+\d+)/;

print $1; 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-19T05:52:20.777

运行时，这会产生我期望的答案：

```
#!/usr/bin/perl -w

use strict;
use warnings;

my $p = "Sun Sep  9 12:14:56 2012 : [Pro] Write to file(/root/mesh/MeshBed/trunk/meshproc/neighInfo/neighbors-list_152\.    14.189.6) : #ip=152.14.189.99 neighinfo=NULL mac=06:02:6F:A7:3E:BC#";

print "Time: $1; IP: $2\n"
    if ($p =~ /(\d+:\d+:\d+) .*ip=(\d+\.\d+\.\d+\.\d+)/); 
```

IP 地址的正则表达式不再需要前导点，并且确实需要第三个和第四个数字之间的点。当时的正则表达式也非常简单。

输出是：

```
Time: 12:14:56; IP: 152.14.189.99 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-19T05:43:29.270

除了在没有更多上下文的情况下无法弄清楚的编译错误之外，鉴于您的标量被调用，这是您可以做的事情`$p`：

```
my ($time, $ip) = $p =~ / (\d+[.:]\d+[.:]\d+(?:\.\d+)?)/g; 
```

**编辑：**这适用于您的新字符串格式：

```
my ($time, $ip) = $p =~ /(\d+:\d+:\d+).+ip=((?:\d+\.){3}\d+)/; 
```

# facebook - 如何获取我的 Facebook 应用程序用户的详细信息

> ID：12489097
> 
> 赞同：-2
> 
> 时间：2012-09-19T05:35:02.690
> 
> 标签：facebook, facebook-graph-api, facebook-wall

我创建了一个 Facebook 应用程序。现在我想查看我的应用程序用户的详细信息（我的意思是经过身份验证的 Facebook 用户）。我想向前 5 位用户（老用户）发布一些内容。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-19T11:27:54.737

假设您已经对用户进行了身份验证，并[有权](https://developers.facebook.com/docs/authentication/permissions/)获取他的详细信息。然后，您可以调用 Facebook Graph API 方法。对于 javascript:-

```
FB.api('/me',function(response){
   //Write you code to access the response object returned like
alert(me.name);
}); 
```

或者您可以使用 PHP SDK 并在使用所需权限对其进行初始化后使用其方法

```
$result = $facebook->api('/me','GET'); 
```

结果对象是一个存储用户信息的数组。

关于问题的最后一部分，您必须实现某种计数器并使用相同的 api 方法调用来发布帖子。

# assembly - idivl 和 divl 有什么区别？

> ID：12489098
> 
> 赞同：2
> 
> 时间：2012-09-19T05:35:04.680
> 
> 标签：assembly, x86

我有这些表达：

```
cltd
idivl   (%ecx) 
```

当除以`int`, 和：

```
movl    $0, %edx
divl    (%ecx) 
```

分割时`unsigned long`

[cltd](http://docs.oracle.com/cd/E19455-01/806-3773/instructionset-49/index.html)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-19T05:39:05.493

[`idiv`](http://faydoc.tripod.com/cpu/idiv.htm)执行有符号除法，[`div`](http://faydoc.tripod.com/cpu/div.htm)执行无符号除法。

# iphone - iOS - 如何使用 FBGraph API 从我的应用程序中“喜欢/分享”特定页面的任何照片？

> ID：12489107
> 
> 赞同：0
> 
> 时间：2012-09-19T05:36:31.567
> 
> 标签：iphone, ios, facebook, facebook-like, fb-graph

我正在使用 FBGraph API 将 FaceBook 集成到我的 iOS 应用程序中，我想从特定页面的相册或朋友的相册中“喜欢/分享”照片。可能吗？任何人都可以帮助我吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-19T08:11:56.680

试试这个它可能对你有帮助。
在 post action 方法中编写以下代码来分享照片。

```
NSMutableDictionary *variables = [NSMutableDictionary dictionaryWithCapacity:1];
NSURL *imageURL = [[NSURL alloc]  initWithString:@"http://track_images/images/20120209104734baby-puppy.jpg"];
NSData *imageData = [[NSData alloc] initWithContentsOfURL:imageURL];
UIImage *picture = [UIImage imageWithData:imageData];    
FbGraphFile *graph_file = [[FbGraphFile alloc] initWithImage:picture];
[variables setObject:graph_file forKey:@"file"];
FbGraphResponse *fb_graph_response = [fbGraph doGraphPost:@"117795728310/photos" withPostVars:variables];
NSString *res = fb_graph_response.htmlResponse;
NSLog(@"res>> %@",res);
NSRange wordRange = NSMakeRange(0,2);
NSArray *firstWords = [[res componentsSeparatedByString:@"\""] subarrayWithRange:wordRange];

if (![[firstWords objectAtIndex:1] isEqualToString:@"error"]){
 //alert for image posted sucessfully. 
 }
 else{
 //alert for image not posted sucessfully.

} 
```

# spring - Spring & Hibernate：无法将数据库状态与会话同步

> ID：12489112
> 
> 赞同：0
> 
> 时间：2012-09-19T05:37:12.140
> 
> 标签：spring, hibernate

我得到以下异常，请帮助我....

```
 (AbstractFlushingEventListener.java:324) - Could not synchronize database state with session
org.hibernate.StaleObjectStateException: Row was updated or deleted by another transaction (or unsaved-value mapping was incorrect): [com.xxx.exx.rxx.entity.CallSignStatusEntity#21123]
    at org.hibernate.persister.entity.AbstractEntityPersister.check(AbstractEntityPersister.java:1934)
    at org.hibernate.persister.entity.AbstractEntityPersister.update(AbstractEntityPersister.java:2578)
    at org.hibernate.persister.entity.AbstractEntityPersister.updateOrInsert(AbstractEntityPersister.java:2478)
    at org.hibernate.persister.entity.AbstractEntityPersister.update(AbstractEntityPersister.java:2805)
    at org.hibernate.action.EntityUpdateAction.execute(EntityUpdateAction.java:114)
    at org.hibernate.engine.ActionQueue.execute(ActionQueue.java:267)
    at org.hibernate.engine.ActionQueue.executeActions(ActionQueue.java:259)
    at org.hibernate.engine.ActionQueue.executeActions(ActionQueue.java:179)
    at org.hibernate.event.def.AbstractFlushingEventListener.performExecutions(AbstractFlushingEventListener.java:321)
    at org.hibernate.event.def.DefaultAutoFlushEventListener.onAutoFlush(DefaultAutoFlushEventListener.java:64)
    at org.hibernate.impl.SessionImpl.autoFlushIfRequired(SessionImpl.java:1175)
    at org.hibernate.impl.SessionImpl.list(SessionImpl.java:1251)
    at org.hibernate.impl.QueryImpl.list(QueryImpl.java:102)
    at org.springframework.orm.hibernate3.HibernateTemplate$30.doInHibernate(HibernateTemplate.java:921)
    at org.springframework.orm.hibernate3.HibernateTemplate$30.doInHibernate(HibernateTemplate.java:1)
    at org.springframework.orm.hibernate3.HibernateTemplate.doExecute(HibernateTemplate.java:406)
    at org.springframework.orm.hibernate3.HibernateTemplate.executeWithNativeSession(HibernateTemplate.java:374)
    at org.springframework.orm.hibernate3.HibernateTemplate.find(HibernateTemplate.java:912)
    at com.xxx.exx.rxx.dao.hibernate.CallxxxDaoImpl.getCallxxxStatusOfLoginOfficer(CallxxxDaoImpl.java:244)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
    at java.lang.reflect.Method.invoke(Method.java:597)
    at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:309)
    at org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:183)
    at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:150)
    at org.springframework.dao.support.PersistenceExceptionTranslationInterceptor.invoke(PersistenceExceptionTranslationInterceptor.java:155)
    at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:172)
    at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:110)
    at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:172)
    at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:202)
    at $Proxy809.getCallSignStatusOfLoginOfficer(Unknown Source)
    at com.xxx.exx.rxx.business.impl.OfficerManagerImpl.getOfficerCallxxxBasic(OfficerManagerImpl.java:438)
    at com.xxx.exx.rxx.business.impl.OfficerManagerImpl.getUserCallxxxBasicInfo(OfficerManagerImpl.java:757)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
    at java.lang.reflect.Method.invoke(Method.java:597)
    at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:309)
    at org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:183)
    at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:150)
    at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:110)
    at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:172)
    at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:202)
    at $Proxy875.getUserCallxxxBasicInfo(Unknown Source)
    at com.xxx.exx.ims.util.OperationsPlanUtil.getUserCallxxxName(OperationsPlanUtil.java:1203)
    at com.xxx.exx.ims.business.impl.IncidentFolderManagerImpl.createIncidentEventLogForCreateIncident(IncidentFolderManagerImpl.java:635)
    at com.xxx.exx.ims.business.impl.IncidentFolderManagerImpl.createIncidentEventLog(IncidentFolderManagerImpl.java:771)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
    at java.lang.reflect.Method.invoke(Method.java:597)
    at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:309)
    at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:196)
    at $Proxy870.createIncidentEventLog(Unknown Source)
    at com.xxx.exx.rxx.business.impl.EventLogManagerImpl.insertIncidentEventLog(EventLogManagerImpl.java:210)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
    at java.lang.reflect.Method.invoke(Method.java:597)
    at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:309)
    at org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:183)
    at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:150)
    at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:110)
    at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:172)
    at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:202)
    at $Proxy876.insertIncidentEventLog(Unknown Source)
    at com.xxx.exx.rxx.business.impl.CallxxxStatusManagerImpl.logIncidentResourceStatusUpdate(CallxxxxStatusManagerImpl.java:524)
    at com.xxx.exx.rxx.business.impl.CallxxxStatusManagerImpl.handleCallxxxStatus2Available(CallxxxxStatusManagerImpl.java:286)
    at com.xxx.exx.rxx.business.impl.CallxxxxStatusManagerImpl.updateCallxxxxToStatus(CallxxxxStatusManagerImpl.java:146) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-19T06:02:36.860

您需要在堆栈跟踪中查看的最重要的东西是

> org.hibernate.StaleObjectStateException：行被另一个事务更新或删除（或未保存值映射不正确）

这为您提供了足够的指示下面可能出现的问题。如跟踪中所述，您有两种可能性

1.  您尝试更新的行已被其他来源修改，而您拥有的副本不是更新的。因此，您的更改被丢弃并引发了此异常。如果这是问题所在，您必须开始研究锁定机制。默认情况下，hibernate 使用乐观锁定。

2.  与您尝试保存的对象对应的映射不正确。

我的猜测是，您的应用程序将遇到第一个问题，但您仍然需要验证并找出确切原因。

希望有帮助。

# windows-phone-7 - 如何在 Windows Phone 日历的日期中添加一个点

> ID：12489115
> 
> 赞同：0
> 
> 时间：2012-09-19T05:37:31.737
> 
> 标签：windows-phone-7, windows-phone-7.1

我正在开发一个 windows phone 应用程序，在这里我从 .net web-service 获取 XML 数据。web 方法返回日期列表，只有这些日期我需要通过放置一个点或颜色在日历上突出显示，除此之外，我可以将选定的日期作为输入传递给另一个 web 方法，但无法同时突出显示日期列表。下面是我尝试过的代码。

XElement xmlNews = XElement.Parse(e.Result.ToString());

```
 Cal.DataContext = from item in xmlNews.Descendants("Events")
                           select new Institute()
                           {
                               Adress = item.Element("Event_From").Value
                           };
<wpControls:Calendar 
            x:Name="Cal" MonthChanged="Cal_MonthChanged"  DatesSource="{Binding}" SelectedDate="{Binding Adress}"
            MonthChanging="Cal_MonthChanging"
            SelectionChanged="Cal_SelectionChanged"
            DateClicked="Cal_DateClicked"
            EnableGestures="True" Margin="2,-5,0,21" /> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-20T01:45:35.037

我的猜测是您使用的是[Windows Phone Controls 7中提供的日历](http://wpcontrols.codeplex.com/)来自 codeplex 的库。要根据您的需要自定义日历，您需要实现一个转换器并使其实现 IDateToBrushConverter。此接口提供一个方法 Convert ，日历将调用该方法来询问您想将哪个画笔用作指定日历案例的背景或前景。这里的技巧是您指定转换器的全局实例并为其提供从后端 Web 服务返回的日期，例如将其注入构造函数或将其指定为静态方法（我不喜欢）然后在您的 Convert 方法中，检查日历案例的日期是否在指定列表内，如果是，则根据需要返回所需的画笔这是一个示例：

```
public class CalendarColorBackgroundConverter : IDateToBrushConverter 
{
    // ctor
    public CalendarColorBackgroundConverter(IEnumerable<DateTime> datesToHighlight)
    {
         this.DatesToHighlight = datesToHighlight;
    }

    IEnumerable<DateTime> DatesToHighlight {get; private set;}

    // some predefined brushes.
    //static SolidColorBrush transparentBrush = new SolidColorBrush(Colors.Transparent);
    static SolidColorBrush whiteColorBrush = new SolidColorBrush(Colors.White);
    static SolidColorBrush selectedColorBrush = new SolidColorBrush(Colors.DarkGray);
    static SolidColorBrush todayColorBrush = new SolidColorBrush(Color.FromArgb(255, 74, 128, 1));
    static SolidColorBrush Foreground = new SolidColorBrush(Color.FromArgb(255, 108, 180, 195));

    public Brush Convert(DateTime currentCalendarCaseDate, bool isSelected, Brush defaultValue, BrushType brushType)
    {
        var highlightDate = this.DatesToHighlight.Any(d => d.Year == currentCalendarCaseDate.Year && d.Month == currentCalendarCaseDateMonth.Month &&
                      d.Day == currentCalendarCaseDate.Day);
        if (brushType == BrushType.Background) 
        {
            if (highlightDate) // background brush color when the calendar case is selected
                return todayColorBrush;
            else
                return whiteColorBrush;
        } 
        else
        {
            if (highlightDate)
                return whiteColorBrush;
            return Foreground;
        } 
    } 
} 
```

希望这可以帮助。

# iphone - iPhone 5 的代码

> ID：12489124
> 
> 赞同：0
> 
> 时间：2012-09-19T05:38:43.647
> 
> 标签：iphone, objective-c, ios, iphone-5

如果设备是 iPhone 5，我正在尝试加载自定义图像。在我的模拟器中，我选择了硬件->设备->视网膜 4 英寸。现在使用下面的代码

```
[UIScreen mainScreen].bounds.size.height * [[UIScreen mainScreen] scale] 
```

我希望在这里看到 1136 的值。但它给了960。

这里出了什么问题？

# java - Java 中自定义对象数组的自定义方法

> ID：12489128
> 
> 赞同：1
> 
> 时间：2012-09-19T05:38:58.870
> 
> 标签：java, arrays

我正在尝试创建一个 type 数组`Library`，我可以在其中存储许多`Library`我稍后将管理的类型的对象。在我深入之前，我正在尝试`print()`在数组上创建一个方法，以便我可以简单地调用`myLibrary.print()`来打印数组。

```
public class Library {
    // Constructor

    public Library() {
    }

    public void print() {
        System.out.println("Library Sorted by Title");
    }
}

public class MediaManager {
    public static void main(String[] args) throws Exception {
        Library myLibrary[] = new Library[100];
        myLibrary.print();
    }
} 
```

我收到一个错误，说没有`print()`on `Library[]`。

我将如何打印这个数组？我会遍历主文件中的数组并在每个对象上调用单独的打印吗？如果是这种情况，我将在哪里编写自定义方法来对数组进行排序？

**更新**

我的作业要求：“您的程序将使用一个类型为 Library 的数组来存储从输入文件中读取的所有信息。”

“在顶层，您将有一个名为 Library 的类。Library 将有三个子类：Music、Book 和 Movie。Music 将有两个子类：Song 和 Album。Book 将有两个子类：Fiction 和 Nonfiction。Movie、Fiction、 Nonfiction、Song 和 Album 不会有任何子类。”

**更新 2**

这是针对 CS-101 课程的。我觉得我不需要使用 Comparable。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-19T05:45:05.713

除了为;定义`print()`方法之外 `Library`您可以尝试以下操作：

```
public void printLibrary (Library [] libraryArray) {
    for(Library library :  libraryArray) 
        library.print();
} 
```

或者如果你超载`toString()`，`Library`你可以简单地使用：

```
public void printLibrary (Library [] libraryArray) {
    for(Library library :  libraryArray) 
        System.out.println(library);
} 
```

调用将像这样完成：

```
Library myLibrary[] = new Library[100];
printLibrary(myLibrary); 
```

**编辑：**

要对数组进行排序，您应该`Comparable<Library>`在`Library`类中实现并简单地使用

```
Arrays.sort(myLibrary); 
```

对数组进行排序。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-19T05:42:26.200

myLibrary 是一个库类型的数组。它没有打印方法。您应该尝试以下方法：

```
Library myLibrary[] = new Library[100];
myLibrary[0] = new Library();    
myLibrary[0].print(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-19T05:44:57.957

您实际上是从库类型数组调用打印方法，您应该从库类型对象（而不是库类型数组）调用打印方法。

```
public class Library {
    // Constructor

    public Library() {
    }

    public void print() {
        System.out.println("Library Sorted by Title");
    }
}

public class MediaManager {
    public static void main(String[] args) throws Exception {
        Library myLibrary[] = new Library[100];
        for (Library lb : myLibrary) {
            lb.print();
        }
    }
} 
```

这将起作用。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-19T05:46:27.613

您在 Library 类中声明了一个打印方法，这意味着您可以在每个 Library 对象中调用该方法，但是您指向一个 Library 数组而不是每个库，您可以打印所有数组的对象是：

```
Library myLibrary[] = new Library[100];
for(Library library : myLibrary){ 
    library.print();
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-19T05:50:58.710

从上面的讨论中，更适合的数据模型如下所示：

```
public class Library {
   private Vector<Title> allTitles;

   public void print() {
     // Print all titles from the vector
     for(Title t : allTitles) {
        t.print();
     }
   }
}

public abstract class Title {
   public abstract void print();
}

public class Movie extends Title {
   public void print() {
      ... // print the Movie
   }
}

public class Music extends Title {
   public void print() {
      ... // print the Music
   }
}

public class Book extends Title {
   public void print() {
      ... // print the Book
   }
} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-09-19T06:02:52.497

我一定会添加另一个答案帖子，该问题从原始问题更新了两次：

> 更新
> 
> 我的作业要求：“您的程序将使用一个类型为 Library 的数组来存储从输入文件中读取的所有信息。” “在顶层，您将有一个名为 Library 的类。Library 将有三个子类：Music、Book 和 Movie。Music 将有两个子类：Song 和 Album。Book 将有两个子类：Fiction 和 Nonfiction。Movie、Fiction、 Nonfiction、Song 和 Album 不会有任何子类。”
> 
> 更新 2
> 
> 这是针对 CS-101 课程的。我觉得我不需要使用 Comparable。

最好的解决方案似乎是：

A. 创建问题中定义的类结构。

```
class Library {...}
class Music extends Library {...}
class Book extends Library {...}
class Movie extends Library {...}
class Song extends Music {...}
class Album extends Music {...}
class Fiction extends Book {...}
class NonFiction extends Book {...} 
```

B.`toString()`在每个类中覆盖方法。

C. 只需使用`for-each`循环并打印对象。

```
for(Library library :  libraryArray) 
    System.out.println(library); 
```

D.**您必须使用`Comparable`或`Comparator`在您想要`Array`订购/分类的情况下使用；没有其他办法。**

# ruby - Redmine最新版本需要什么版本的GEM？

> ID：12489129
> 
> 赞同：1
> 
> 时间：2012-09-19T05:38:59.643
> 
> 标签：ruby, rubygems, redmine

我正在尝试安装[Redmine](http://www.redmine.org/projects/redmine/wiki/RedmineInstall#Ruby-38-Ruby-on-Rails-38-Rack)。根据安装指南，最新的（2.1.0）redmine 需要 RubyGem <= 1.8。这个“ ***<=1.8*** ”是什么意思？是说您可以使用任何 ruby​​gem 版本的 1.8 系列（例如，1.8.23），还是只能使用低于 1.8.0 的版本（例如，1.7.0）？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-25T01:33:05.633

只是为了参考像我这样的非 ruby​​ 人，[这个页面](http://semver.org/)解释了版本号的含义。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-19T07:41:06.640

RubyGems 是 Ruby 的包管理框架。

此 gem 是 RubyGems 软件的更新。在应用此更新之前，您必须安装 RubyGems。

检查您使用的版本：`gem -v`

更新您的 RubyGems 版本：

`gem update --system`

**注意**：当没有安装 ruby​​gems-update 时，RubyGems 1.1 和 1.2 会出现升级问题。如果您看到没有要更新的内容，您将需要使用以下说明。如果您安装了旧版本的 RubyGems，那么您仍然可以分两步完成：

> 宝石安装 ruby​​gems 更新
> 
> update_rubygems

# android - 在android中通过二维码安装应用程序

> ID：12489136
> 
> 赞同：1
> 
> 时间：2012-09-19T05:39:57.980
> 
> 标签：android, iphone, ipad, mobile, qr-code

我的情况如下：

1.  每当有人使用任何第三方应用程序（如条形码扫描仪）通过 android 设备扫描特定应用程序的二维码时：

    ```
     a. If the scanned Qr code is not installed in the device it gets ,it open the url where it can be downloaded and installed.
      b. Otherwise it opens the installed app in the device. 
    ```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-19T16:28:22.037

**如果您想要一个 QR 码来打开您的应用程序，并且您可以编辑您的应用程序：**

我认为最好的方法是创建一个链接：

*   如果已安装，将打开您的应用程序。您应该在您的应用程序上使用一些*意图过滤器*来执行此操作。
*   如果您的应用未安装，将打开浏览器访问您的网站。然后，您可以从您的网站转发到您在 Google Play 上的应用。

在此处阅读我的答案以获取更多详细信息：[通过链接打开 Android 应用程序](https://stackoverflow.com/questions/12181055/opening-android-app-by-way-of-link/12181137#12181137)

一旦你创建了这个特殊的链接，你可以在这里创建一个二维码：http: [//qrdroid.com/generate](http://qrdroid.com/generate)

**如果您想要二维码打开任何应用程序：**

不幸的是，没有直接的方法可以这样做。

您唯一的选择是对指向 Google Play 的链接进行编码。它总是会链接到那里，但如果该应用程序已经安装，至少会显示一个“打开”按钮。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-19T06:56:00.183

QR 扫描仪应返回该应用程序的包名称，并调用以下函数，此代码适用于我

```
 public void startApplication(Context context, String packageName) {
    PackageManager pm = context.getPackageManager();
    Intent appStartIntent = pm.getLaunchIntentForPackage(packageName);
    if (appStartIntent != null)
    {
        context.startActivity(appStartIntent);
    }
    // if the intent is null which means you have not installed the app then open the google play 
    else {
        Intent searchIntent = new Intent(Intent.ACTION_VIEW, Uri.parse("market://details?id=" + packageName));
        searchIntent.setFlags(Intent.FLAG_ACTIVITY_NEW_TASK);
        context.startActivity(searchIntent);
    }
} 
```

# jersey - 如何从资源发送响应代码和内容？

> ID：12489137
> 
> 赞同：1
> 
> 时间：2012-09-19T05:40:01.717
> 
> 标签：jersey, jax-rs

我正在使用 Jax-RS 和 jersey 来实现 Web 服务，我可以使用 Response 类向客户端发送响应代码：

```
Response.status(Status.MOVED_PERMANENTLY).build(); 
```

或者我可以发送响应内容：

```
Response.ok("Respose").build(); 
```

有没有办法为任意代码发送任意响应？

具体来说，我正在尝试在 OAuth 的重定向中发送授权代码。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-19T06:07:31.543

看看这个[JAX-RS — 如何同时返回 JSON 和 HTTP 状态码？](https://stackoverflow.com/questions/4687271/jax-rs-how-to-return-json-and-http-status-code-together)

Response.status(Response.Status.NOT_FOUND).entity("Hello World").build();

# iphone - 如何在 iphone 中解析 json 响应？

> ID：12489140
> 
> 赞同：0
> 
> 时间：2012-09-19T05:40:52.577
> 
> 标签：iphone, ios, ipad

我有一个应用程序，其中有这样的 json 响应：

```
{
    "status":"ok",
    "dfs":[{"type":"i",
    "title":"image",
    "image_path":"https:\/\/s3.dhgdfhgfhgdhgfh\/ad_226.png"}]
} 
```

我是这样解析的：

```
NSDictionary *dict=[[request responseString] JSONValue];                
NSLog(@"dict %@ ",[request responseString]);

if([[dict objectForKey:@"status"] isEqualToString:@"ok"])
{                   
    NSMutableDictionary *dict1=[dict objectForKey:@"dfs"]; 

    NSLog(@"%@",[dict1 classForCoder]);
    NSLog(@"%@dict1",dict1);
    titlelbl.text=[dict1 objectForKey:@"title"];

    if ([[dict1 objectForKey:@"type"] isEqualToString:@"i"])
    {
        ad.hidden=NO;

        NSString *imageurl=[dict1 objectForKey:@"image_path"];

        NSLog(@"%@",imageurl);
    } 
```

但我得到这个错误：

> *** 由于未捕获的异常“NSInvalidArgumentException”而终止应用程序，原因：“-[__NSArrayM objectForKey:]: unrecognized selector sent to instance 0xde7ecf0”。

我将`dict1`类文件夹作为`nsmutable`数组。任何人都可以帮助我实现这一目标吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-19T05:52:31.097

```
{
"status":"ok",
"dfs":
[
{
"type":"i",
"title":"image ",
"image_path":"https:\/\/s3.dhgdfhgfhgdhgfh\/ad_226.png"
}
]
} 
```

读取上面的 json 响应，它是一个字典，其中第一个对象是字符串，第二个是字典数组（它只有一个对象）。

```
NSDictionary *dict = [[request responseString] JSONValue];

if([[dict objectForKey:@"status"] isEqualToString:@"ok"])
{
     NSArray* arr = [dict objectForKey:@"dfs"];
     NSDictionary* dict1 = [arr objectAtIndex:0];
enter code here
enter code here
enter code here
enter code here

// get the data from dict1 with the key value pairs, and set labels and images
} 
```

# ios - iOS 性能非常慢

> ID：12489141
> 
> 赞同：-1
> 
> 时间：2012-09-19T05:40:57.880
> 
> 标签：ios, performance, optimization

我在一个正在构建 iOS 应用程序的团队中，我们遇到了非常慢的帧速率和无响应的问题。我们已经调查了许多可能的罪魁祸首并试图简化观点，但这似乎是一个非常根本的问题。甚至我们的登录屏幕在用户按键和字符出现在其中一个文本字段之间都有明显的延迟。在另一个包含地图和表格视图的屏幕上，表格视图仅以 5 FPS 的速度滚动。

我知道这是一个非常模糊的问题，但我们一直未能取得任何进展。你们中是否有任何事情会导致整个应用程序的性能如此糟糕？

我曾考虑将计算移出主线程，但我不知道这将如何解决无响应的登录屏幕，在该屏幕加载视图后应该不会发生任何事情。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-19T08:25:22.733

问题出在 MFSideMenu 库上。（[https://github.com/mikefrederick/MFSideMenu](https://github.com/mikefrederick/MFSideMenu)）

我们使用的是不包含 line 的旧版本`controller.view.layer.shadowPath = [UIBezierPath bezierPathWithRect:controller.view.bounds].CGPath;`，这意味着该菜单的阴影渲染未优化。

# android - 邮件html表

> ID：12489143
> 
> 赞同：1
> 
> 时间：2012-09-19T05:41:44.843
> 
> 标签：android, email

我正在开发一个应用程序来发送带有 HTML 数据作为电子邮件主题的电子邮件。HTML 中包含一个表格标记。但是当我收到邮件时，它看起来不像一张桌子。这里有什么问题？我使用的代码是

```
Intent emailIntent = new Intent(Intent.ACTION_SEND);
            emailIntent.setType("text/plain"); 
            emailIntent.putExtra(Intent.EXTRA_EMAIL, new String[] { "" });
            emailIntent.putExtra(Intent.EXTRA_SUBJECT, "Medicine Details");

            emailIntent.putExtra(android.content.Intent.EXTRA_TEXT,
                    Html.fromHtml(htmldata));

            startActivity(Intent.createChooser(emailIntent, "Email to Friend")); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-19T07:16:45.787

可能有点远，但您可以使用基于服务器的邮件。我猜你的应用程序已经使用了互联网，所以你可以将你的数据发布到一个 PHP 文件，该文件以完整的 HTML 格式发送邮件，这对你来说是荣耀的；）

# php - 上传的 PHP 脚本不刷新

> ID：12489148
> 
> 赞同：4
> 
> 时间：2012-09-19T05:42:19.213
> 
> 标签：php, linux, caching, eaccelerator

我敢肯定这是显而易见的，但我很困在这里。我有一个 LAMP 服务器（Centos 5.3，PHP 5.3.8），它一直工作没有问题。我修改并重新上传（通过 SFTP）一个特定的 PHP 脚本到服务器，但是当我重新加载页面时，旧脚本仍然运行。我可以看到新文件在那里并且时间戳和大小与新版本相匹配，但它总是输出好像文件未更改一样。我什至尝试用一个简单的替换它

```
<?php die('test'); ?> 
```

测试文件，结果相同。这不是浏览器缓存问题（重新加载、不同的浏览器等都显示旧脚本，我可以传入`$_GET`变量并作为旧脚本运行）。如果我重命名文件，它会以新名称正确呈现（使用新更改），并且系统会在原始位置正确抛出 404 错误。当我将它恢复为原始文件名时，它会恢复为旧版本。我认为这是一个电子加速器问题（运行 0.9.6.1）所以我清除了缓存（清空`/var/cache/php-eaccelerator`）并重新启动了服务器但没有骰子。

是否还有其他可能导致服务器缓存旧脚本的原因？

**编辑 - 解决方案！**

好的，不出所料，这最终成为了一个我应该早点发现的特定于应用程序的问题。该应用程序设置了导致问题的“自定义覆盖”系统......基本上是为了使更新变得容易，但也允许客户自定义，系统设置了一个特殊`/custom/`文件夹，该文件夹克隆了基础应用。在服务之前，Apache 显然会在自定义结构中检查一个相同位置的文件，并在它存在时提供它。基本上有一个自定义脚本上传到相关目录，它覆盖了我上传到主应用程序目录的任何文件。显然有一个覆盖脚本加载到自定义目录中。

@Dagon，感谢您禁用 eAccelerator 的建议。我确信这是我的问题的根源，我没有费心去检查`.htaccess`。一旦我排除了这一点，我就开始思考得更清楚了。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-19T06:37:34.570

这最终成为一个本地化问题。正如我在问题的编辑中提到的那样，应用程序设置了一个导致问题的“自定义覆盖”系统......基本上是为了使更新变得容易，但也允许客户自定义，系统设置为一个特殊的 /custom/ 文件夹，它克隆了基本应用程序的文件夹结构。在服务之前，Apache 显然会在自定义结构中检查一个相同位置的文件，并在它存在时提供它。基本上有一个自定义脚本上传到相关目录，它覆盖了我上传到主应用程序目录的任何文件。显然有一个覆盖脚本加载到自定义目录中。

# jquery - jQuery + Rails + 切换图像

> ID：12489150
> 
> 赞同：0
> 
> 时间：2012-09-19T05:42:29.100
> 
> 标签：jquery, ruby-on-rails, toggle

我有一个复选框列表，其中包含关联的图像和标题作为标签。我运行一个`each`循环来提取复选框的数据。我只是希望在点击时突出显示图像。出于某种原因，我正在使用的 jQuery 切换脚本在循环中不起作用。

```
js:

    <script>
      $("img.choice").click(function() {
        $(this).toggleClass("new").toggleClass("new1");
          });
    </script>

css:

    .new {
      padding-top: 0px;
      padding-bottom: 0px;
      margin-top: 0px;
      margin-bottom: 0px;
      box-shadow: 2px 2px 4px #888888;

    }

    .new:hover {
        box-shadow: 2px 2px 2px #001f36;
        border-color: #FF804D;
    }

    .new:active {
        box-shadow: 2px 2px 2px #001f36;
        border-color: #FF804D;
    }

    .new1 {
      border: outset;
      border-color: #FF804D;
    }

html:

    <div class="row" align='center'>                    
        <% Category.select { |category| category.gender == 'girl' }.each do |category| %>
            <div class="span4" align="center" style="padding-top:15px">
                <label>
                    <div style="padding-bottom:5px">
                        <h13><%= category.name.capitalize %></h13>
                    </div>
                    <img id="choice-<%= category.id -%>" src= <%= category.image %> class="choice new" />
                    <div>
                        <%= check_box_tag 'category_ids[]', category.id %>
                    </div>
                </label>    
            </div>
        <% end %>
    </div> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-19T05:52:02.977

这是一个JSFiddle：

[http://jsfiddle.net/misham/xu6Kf/](http://jsfiddle.net/misham/xu6Kf/)

您需要将 JS 代码包装在 $(document).ready 中，以便注册事件：

```
<script>
  $(document).ready(function(){
     $("img.choice").click(function() {
       $(this).toggleClass("new").toggleClass("new1");
  });
  }) ;
</script> 
```

理想情况下，您应该将 JS 代码放在 assets 中的适当文件中：

```
app/assets/javascripts/<controller_name>.js 
```

如果它不存在，请创建它。如果它是一个 CoffeeScript 文件，你可以将它重命名为 .js，或者用 CoffeeScript 编写，如果那是你的事。

如果要将代码保留在视图文件中，则将其放在底部并将其包装

```
<%= content_for :javascript do -%>
   <!-- JS code here -->
<% end -%> 
```

然后在关闭 body 标记之前放置以下内容`</body>`：

```
<%= yield :javascript %> 
```

这样，您的 JS 代码将自动呈现在底部，而不是 HTML 中间。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-19T05:54:07.687

也许原因是，在遍历您的循环之后，有多个`<img id="choice" />`标签是无效的 HTML。你`id`是一个标识符，就像你在数据库中有一个主键一样，它应该是唯一的（至少在你所在的那个页面上）。

所以我会这样做：

```
<% Category.select { |category| category.gender == 'girl' }.each do |category| %>
  <img id="choice-<%= category.id -%>" src= <%= category.image %> class="choice new" />
<% end %> 
```

修改后的 JS 可能如下所示：

```
$("img.choice").click(function() {
  $(this).toggleClass("new").toggleClass("new1");
}); 
```

请记住，这是未经测试的，直接来自我的大脑。

**编辑**
为简单起见，我还将为您的模型添加一个范围，如下所示：

```
class Category < ActiveRecord::Base
  scope :female, where('gender = ?', 'female'), :order => :name # or some other ordering
end 
```

所以你可以这样做

```
<% Category.female.each do |category| %>
  [snip]
<% end %> 
```

而且你的逻辑有点分裂到你的模型中，它应该属于恕我直言。

# android - 不同版本，调用 onActivityResult 时无法恢复活动

> ID：12489151
> 
> 赞同：0
> 
> 时间：2012-09-19T05:42:40.330
> 
> 标签：android, exception

我制作了一个带有按钮（用于扫描）和 webview 组件的 android 应用程序。如果 button_scan 被按下，它将执行 startActivityForResult 调用活动 zxing 扫描条形码和二维码。zxing完成后，我写onActivityResult来处理数据。

该应用程序目前在Android V2.2.2上运行良好，没有出现异常。

但是，如果这个应用程序在 Android V2.3 或 V4.0.4 上运行，它会弹出一个异常（java.lang.RuntimeException: Unable to resume activity）。调用 onActivityResult 时会发生此异常。

我打印了全局变量（CURRENTWEBPAGE）进行测试，发现在调用 startActivityForResult 之前，CURRENTWEBPAGE 有值，但在调用 onActivityResult 后 CURRENTWEBPAGE 为空。

我很好奇android的版本在这个案例中是否重要。全球会员会全部清零吗？

遇到这种情况的任何人都可以为我提供解决此问题的解决方案吗？

如果您需要任何进一步的信息，请随时告诉我。

您的回复将不胜感激。

以下是我的应用程序代码。

```
public class MyApp extends Activity
{
    private String CURRENTWEBPAGE;//which will be set value whenvever webview changed.
    private WebView webView_main;

    @Override
    public void onCreate(Bundle savedInstanceState)
    {
        super.onCreate(savedInstanceState);

        initActivity_web();
        ...
            ...
    }

    public void initActivity_web()
    {

        // add Listener to button_SCAN
        ((Button) findViewById(R.id.button_SCAN)).setOnClickListener(new Button.OnClickListener()
        {
            @Override
            public void onClick(View arg0)
            {
                try
                {
                    Intent intent = new Intent("com.google.zxing.client.android.SCAN");

                    Log.d(this.getClass().getName(),CURRENTWEBPAGE);
                    // CURRENTWEBPAGE has value here.

                    startActivityForResult(intent, 0);
                }
                catch (android.content.ActivityNotFoundException ex)
                {
                    Toast popup = Toast.makeText(NEOMove.this, "Please install Zxing Barcode Scanner", Toast.LENGTH_SHORT);
                    popup.show();

                }

            }
        });
    }

    @Override
    public void onActivityResult(int requestCode, int resultCode, Intent intent)
    {
        super.onActivityResult(requestCode, resultCode, intent);

        if (requestCode == 0)
        {
            if (resultCode == RESULT_OK)
            {
                String QRCodeContent = intent.getStringExtra("SCAN_RESULT");

                String newURL =  convertToLCMOBILESUPPORTActionUrl(CURRENTWEBPAGE);//exception occur
                //because CURRENTWEBPAGE = null;
                //java.lang.RuntimeException: Unable to resume activity

                webView_main.loadUrl(newURL  + QRCodeContent);
            }
            else if (resultCode == RESULT_CANCELED)
            {
                // TODO Handle cancel
            }
        }
    }
} 
```

* * *

添加 -- 2012/09/20

嗨，我发现父应用程序（我的应用程序）的 onCreate 将在 onActivityResult 之前被调用。尽管将这些变量保留在 SharedPreferences 中，但 MyApp 的 webview 会使用新的会话 ID 重新创建。这对我不起作用，因为在扫描条形码后，我需要发送一个具有权限的请求，该请求记录在被破坏的 webview 的缓存中。有没有办法让父应用程序不被破坏？

以下是我的 AndroidManifest.xml。

```
 <activity
            android:name=".MyApp"
            android:configChanges="orientation|keyboard"
            android:label="@string/title_activity_main" >
            <intent-filter>
                <action android:name="android.intent.action.MAIN" />

                <category android:name="android.intent.category.LAUNCHER" />
            </intent-filter>
        </activity> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-19T06:15:14.767

您的应用程序中的问题是 android 垃圾收集器已从内存中删除了调用活动。尝试将 CURRENTWEBPAGE 设为静态。

```
static private String CURRENTWEBPAGE; 
```

# wordpress - 在类别页面 wordpress 上获取选定的类别名称

> ID：12489152
> 
> 赞同：0
> 
> 时间：2012-09-19T05:42:42.453
> 
> 标签：wordpress

我想获取类别页面上的特定类别名称。例如：- 有 5 个类别.. **a,b,c,d,e** ...所以如果我正在查看类别 a 那么页面应该显示“**我是*一个*类别**”...同样如果我点击 b 类别链接，页面应该显示“**我是*B***类”.....

在 wordpress 中，我无法在类别页面上获取选定的类别名称....即，如果我点击了类别名称“face”，我想在页面上显示名称 face，如果我点击了类别名称“手”，我想在页面上显示名称“手”。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-19T06:08:27.390

在您的主题目录中，您应该有一个模板`category.php`。[在此模板中，您可以使用以下模板标签](http://codex.wordpress.org/Template_Tags)显示当前类别的名称：

```
 <?php single_cat_title(); ?> 
```

# jquery - iframe 调整大小在 Mozilla Firefox 的第二次加载期间不起作用

> ID：12489154
> 
> 赞同：1
> 
> 时间：2012-09-19T05:43:08.710
> 
> 标签：jquery, firefox, iframe, resize, onload

IFrame 旨在根据其内容调整大小，它适用于大多数浏览器，但仅适用于**Mozilla Firefox**，只有第一次加载有效，但之后的加载事件无效。

要让它再次工作，需要*刷新页面*或先*清除浏览器的缓存*..

代码如下：

```
function sizeIFrame() {
var subscriptionFrame = jQuery("#subscriptionFrame");
var innerDoc = (subscriptionFrame.get(0).contentDocument) ?subscriptionFrame.get(0).contentDocument : subscriptionFrame.get(0).contentWindow.document;
subscriptionFrame.height(innerDoc.body.scrollHeight);   }

<iframe id="subscriptionFrame" onload="sizeIFrame();"></iframe> 
```

有人对此有想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-19T05:57:11.753

您可能有一个 DOM 竞争条件，因为它听起来好像在页面加载时间较长（无缓存）时有效，并且在填充缓存后不起作用。

尝试在属性上使用 jQuery`load`或事件。`onload`jQuery 在幕后处理特殊情况，因此它可能会有所帮助。

```
<iframe id="subscriptionFrame" onload="sizeIFrame();"></iframe>
<script type="text/javascript">
$('#subscriptionFrame').load(function()
{
    var subscriptionFrame = this;
    var innerDoc = (this.contentDocument) ? this.contentDocument : this.contentWindow.document;
    $(this).height(innerDoc.body.scrollHeight);    
});
</style> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-20T07:45:50.853

固定的！解决方法如下：

```
function sizeIFrame() {
    var subscriptionFrame = jQuery("#subscriptionFrame");
    var innerDoc = (subscriptionFrame.get(0).contentDocument) ? subscriptionFrame.get(0).contentDocument : subscriptionFrame.get(0).contentWindow.document;
    if(innerDoc.body.scrollHeight==0)
        innerDoc.location.reload(true);
    subscriptionFrame.height(innerDoc.body.scrollHeight);   
} 
```

这是因为 Firefox 从缓存而不是服务器加载 iframe 内容。所以 xxx.location.reload(true) 将强制 iframe 内容从缓存中加载。希望它可以帮助你们！=)

# mysql - MySQL 中的 Rehash 命令

> ID：12489155
> 
> 赞同：3
> 
> 时间：2012-09-19T05:43:11.327
> 
> 标签：mysql, autocomplete, ubuntu-12.04

MySQL 中自动完成关键字的命令是什么（如 Ubuntu 终端中选项卡的工作）。我使用 rehash 命令，有时可以，但有时不行。

有没有可能的替代方案？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-12-27T13:15:42.190

的快捷方式`REHASH;`是`\#`。有趣的是，我还在一台服务器（CentOS 6.x、MySQL 5.1）上发现了它还`REHASH`不能工作`\#`。

# image - 如何在画布内显示标签的内容？

> ID：12489159
> 
> 赞同：0
> 
> 时间：2012-09-19T05:43:24.263
> 
> 标签：image, html5-canvas, javascript-framework

该页面有一个`<img>`标签和一个画布元素。内部的图像`<img>`被裁剪并使用放大镜进行操作。图像的裁剪内容如何显示在画布内。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-19T05:58:46.123

假设您有一个`<img>`id 为 的标签`image`。您可以使用该`getElementById`方法获取图像参考。类似于以下内容：

```
var img = document.getElementById("image"); 
```

然后使用 HTML5[`drawImage`](https://developer.mozilla.org/en-US/docs/Canvas_tutorial/Using_images)方法可以将图像内容绘制到画布中。代码应如下所示：

```
var canvas = document.getElementById('canvas') // reference to canvas element
var ctx = canvas.getContext('2d'); // get the canvas context;
ctx.drawImage(img, 0, 0); //draw image into canvas; 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-19T11:02:45.340

你会更好（通过 easimov 的原始答案），它会等到图像首先加载。如果图像尚未加载，则不会在画布上绘制。它假定 img 是您的图像标签：

```
var canvas = document.getElementById('canvas') // reference to canvas element
var ctx = canvas.getContext('2d'); // get the canvas context;

img.onload = function ()
{
    ctx.drawImage(img, 0, 0); //draw image into canvas;
} 
```

# android - 堆叠操作栏的自定义样式？

> ID：12489161
> 
> 赞同：8
> 
> 时间：2012-09-19T05:43:26.447
> 
> 标签：android, android-actionbar

我想为堆叠和非堆叠标签栏设置单独的背景。

这应该解释它：

![在此处输入图像描述](../Images/97144a580eaaac278526c2bcfcbd31dd.png)

所以我的方式是：

对于平板电脑，请使用深色背景选项卡。对于其他一切，使用浅色背景。

这涵盖了大多数用例，但我想让它在电话环境中看起来不错。

我有什么办法可以做到这一点？我错过了一个样式修饰符，也许？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-01-08T22:53:34.063

您可以通过仅在主题中设置可绘制的浅色背景来根据堆叠/非堆叠的 ActionBar更改**选项卡背景。**[`android:backgroundStacked`](http://developer.android.com/reference/android/R.attr.html#backgroundStacked)

但随后您会遇到无法根据堆叠/非堆叠布局定义**选项卡文本颜色的问题。**这意味着，结果要么是浅色背景上的浅色文本，要么是深色背景上的深色文本。

这已经是一个已注册的问题：[http](http://code.google.com/p/android/issues/detail?id=26557) ://code.google.com/p/android/issues/detail?id=26557 ，因此您现在的选择是等待或使用以下解决方法之一：

*   基于屏幕可用宽度的方法：[Android 在拆分或堆叠时更改操作栏选项卡的选择器颜色](https://stackoverflow.com/questions/13108637/android-change-action-bar-tabs-selector-color-when-split-or-stacked/13157817#13157817)
*   基于 ActionBar 高度的方法：[找出 ActionBar 是否堆叠](https://stackoverflow.com/questions/9052403/find-out-if-actionbar-is-stacked/12853350#12853350)
*   不使用`actionBar.setNavigationMode(ActionBar.NAVIGATION_MODE_TABS)`但坚持使用老式[TabHost](http://developer.android.com/reference/android/widget/TabHost.html)或其他导航方法，例如[ViewPagerIndicator](https://github.com/JakeWharton/Android-ViewPagerIndicator)（也支持选项卡）

PS 我也面临这个问题，因为我的应用中有一个带有浅色标签的深色 ActionBar。仍然没有找到完美的解决方案。

有点离题：如果您还没有，请使用[操作栏样式生成器](http://jgilfelt.github.com/android-actionbarstylegenerator/)来更轻松地处理颜色和可绘制对象。同样，对于带有浅色堆叠标签栏的深色操作栏，您会发现没有令人满意的配置。

# java - 客户端/服务器端的数据转换逻辑

> ID：12489164
> 
> 赞同：1
> 
> 时间：2012-09-19T05:43:30.833
> 
> 标签：java, javascript, json, web-applications

我要进行一些简单的数据格式转换。从 CSV 到 Json。我想知道做这个服务器端或客户端是否会有所作为？

我的用例是：我在服务器上有一个 CSV 文件，我每 20 毫秒读取一行，并希望在它到达客户端应用程序之前将其转换为 Json。那么我是否应该在服务器端将其转换为 Json，并使用我发现的 Json Http request 之类的东西在客户端获取 json 格式数据。或者我应该写一个javascript方法来将文本格式响应文本转换为json。

请建议。谢谢你！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2016-09-12T13:51:08.997

我相信转换逻辑应该在服务器端完成。使您的客户端尽可能简单和轻便——它应该从您的服务器获取 JSON 并通过用户界面简单地显示它。您描述的转换并不繁重，但可以想象：1000 个客户端执行相同的操作，而 1 个服务器执行此操作并分发给 1000 个客户端。

也就是说，如果你在服务器端设计一个 API，你应该以最原始的格式提供你的数据。然后，您的客户端服务器将在切片/切块和为其简单的 UI 客户端呈现数据方面具有更大的灵活性。

# android - Android Junit 测试本地最终变量

> ID：12489165
> 
> 赞同：0
> 
> 时间：2012-09-19T05:43:36.010
> 
> 标签：android, junit

我的 MyClass.java 中有这段代码：变量“C”是添加的。

```
btn.setOnClickListener(new View.OnClickListener() {
            public void onClick(View v) {
               final MyLocalClass mlc = new MyLocalClass(A, B, C);
          }
} 
```

我想做这样的Junit测试：获取'mlc'的实例，然后获取'mlc'中的“C”并进行比较。

```
 final Activity activity = getActivity();
    Field field = MyClass.class
            .getDeclaredField("mlc");
    field5.setAccessible(true);
    final MyLocalClassinstance = (MyLocalClass) field5
            .get(activity ); 
```

但是来自操作系统的错误：

```
junit.framework.AssertionFailedError: java.lang.NoSuchFieldExceptio 
```

我可以获得局部最终变量的实例吗？

非常感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-19T06:53:18.710

你不能像@Yam Marcovic 解释的那样。

但是您可以轻松更改代码以使其可测试：

我会让`mlc`Activity 本地化，而不是像这样的匿名 OnClickListener 处理类本地化

```
public class MyActivity : Activity {
    public MyLocalClass mlc; 
    public void Init() {
        btn.setOnClickListener(new View.OnClickListener() {
                    public void onClick(View v) {
                       mlc = new MyLocalClass(A, B, C);
                    }
        }
    }
} 
```

这可以很容易地测试

```
MyActivity activity = (MyActivity) getActivity();   
// assert on activity.mlc.C 
```

# mysql - MySQL：将输出声明为“null”但返回“0”

> ID：12489168
> 
> 赞同：0
> 
> 时间：2012-09-19T05:44:25.273
> 
> 标签：mysql, parameters, null, case

我正在编写一个使用案例的过程。其中一种情况是，如果参数为空，则输出消息应为“空”。但是当我测试它时，它并没有这样做！相反，我得到的输出消息为“0”。

有什么想法吗？

谢谢。

这是一些代码：

```
 If count_cl_id is null then
        set v_msg := 'null';
    Elseif count_cl_id = 1 then
        set v_msg := 1;
    Elseif count_cl_id = 0 then
        set v_msg := 0;
    End if; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-19T06:19:39.467

听起来像是一个范围界定问题，如果您尝试检查 v_msg 是一个不同的 BEGIN/END 块，这将是一个问题。检查[文档](http://dev.mysql.com/doc/refman/5.0/en/local-variable-scope.html)。

# php - 多个jquery倒数计时器未在php循环内显示

> ID：12489173
> 
> 赞同：3
> 
> 时间：2012-09-19T05:44:48.990
> 
> 标签：php, jquery

我有一个 php 循环，用于从数据库中获取多个拍卖记录。作为拍卖的一部分，我想倒计时直到它结束。我最初有一个问题，只有第一条记录显示倒数计时器（工作）并确定这可能是因为我每次都给 jquery 选择器相同的 id。所以我改变了它，所以生成了一个新的 id 来给每个循环上的 div 和 jquery 函数。但是现在当我查看脚本的结果时，倒数计时器不会显示在任何表格行中。

```
 while($row = $stmt->fetch(PDO::FETCH_ASSOC)){        
       $ID = $row['ID'];
            $cdRand = '#row'.$ID;
                $img = $row['img'];
                $desc = $row['description'];
                $name = $row['name'];
                $owner = $row['owner'];
                $cprice = $row['sprice'];
                $iprice = $row['iprice'];
                $incprice = $row['incprice'];
                $etime = $row['etime'];
                $nextBid = $cprice + $incprice;

            $stmt2 = $pdo->prepare("SELECT * FROM user WHERE username = :username");
            $stmt2->bindParam(":username", $owner,PDO::PARAM_STR);
            $stmt2->execute();

            $thisuser2 = $stmt2->fetch(PDO::FETCH_ASSOC);
            $location = $thisuser2['location'];

            echo'

            <tr class="resultindex">

            <td class="imgCol"><a href="displayAuct.php?id='.$ID.'"><img src="'.$img.'" alt="'.$name.'" /></a></td>
            <td class="infoCol">

                <div class="nameDiv">
                    <a class="nameLink" href="displayAuct.php?id='.$ID.'">'.$name.'</a><br/>
                </div>
                <div class="descDiv">
                    <span class="priceLabel2">'.$desc.'</span>
                </div>

                <div class="userdiv">
                    <span class="fromuser">Location: </span><br/>
                    <span class="location">'.$location.'</span>
                </div>
            </td>
            <td style="width:1px; background-color:#330066;" ></td>

            <td class="timerCol">
                <div class="currentp" style="height: 50px;"><span class="priceLabel">Current Bid: </span><br/><span class="price1">$'.$cprice.'</span></div>
                <div id="timeRow" style="height: 30px;">
                    <span class="timeleft">Time Left: </span>
                </div>
                <div id="'.$cdRand.'" style="height:80px;"></div>

                <script type=text/javascript>
                var timestamp = '. $etime * 1000 .';
                var endTime = new Date();
                endTime.setTime(timestamp);

                $("'.$cdRand.'").countdown({until: endTime});

                </script>
            </td>
            </tr>

                '; 
```

我不知道为什么它不起作用，倒计时计时器是 keith woods 倒计时插件[http://keith-wood.name/countdown.html](http://keith-wood.name/countdown.html)，任何帮助将不胜感激。

干杯，邦迪

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-19T05:59:37.090

这是一个 ID 选择器：

```
#row11 
```

这是`<div>`具有有效`id`属性的：

```
<div id="row11"> 
```

但这不是一个有效的`id`属性：

```
<div id="#row11"> 
```

你`$cdRand`不应该包含`#`并且你的 jQuery 应该包含`#`这样的：

```
$("#'.$cdRand.'").countdown({until: endTime}); 
```

# database - mirth : 在数据库查询中添加参数

> ID：12489187
> 
> 赞同：2
> 
> 时间：2012-09-19T05:47:01.143
> 
> 标签：database, mirth

我想在数据库查询中添加参数，那该怎么办？

我正在使用以下方法在数据库中执行查询。

```
dbConn.executeUpdate('sql query'); 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-09-19T06:06:18.137

```
var params = new java.util.ArrayList();
params.add($('lastName'));
params.add($('firstName'));
params.add($('middleName'));

var expression = "INSERT INTO hl7_test_sample (patient_last_name, patient_first_name, patient_middle_initial) VALUES (?, ?, ?);"
var result = dbConn.executeUpdate(expression, params); 
```

我正在使用 Mysql 数据库。

参考：[http ://www.mirthcorp.com/community/forums/showthread.php?t=894](http://www.mirthcorp.com/community/forums/showthread.php?t=894)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-10-25T04:40:57.193

我们可以使用 Lists 在查询中添加参数。请检查以下代码：-

```
var params = Lists.list().append($('lastName'));
params.append($('firstName'));
params.append($('middleName'));

var expression = "INSERT INTO hl7_test_sample (patient_last_name, patient_first_name, patient_middle_initial) VALUES (?, ?, ?);"
var result = dbConn.executeUpdate(expression, params); 
```

# c# - ajax.dll 在 iis 7 中不起作用

> ID：12489193
> 
> 赞同：2
> 
> 时间：2012-09-19T05:47:35.337
> 
> 标签：c#, asp.net, c#-4.0

ajax dll 在 IIS 6 中工作，但在 IIS 7 中不工作。ajax dll 需要在服务器中安装任何框架吗？

system.web 标签中的 web 配置

```
<assemblies>
<add assembly="System.Web.Extensions, Version=2.0.50727.1433, Culture=neutral, PublicKeyToken=31BF3856AD364E35" />
</assemblies>
<httpHandlers>
<add verb="POST,GET" path="ajax/*.ashx" type="Ajax.PageHandlerFactory, Ajax" />
</httpHandlers> 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-01T06:16:37.323

```
 <system.webServer>    
 <validation validateIntegratedModeConfiguration="false" />
  <modules>
    <add name="ScriptModule" preCondition="integratedMode" type="System.Web.Handlers.ScriptModule, System.Web.Extensions, Version=1.0.61025.0, Culture=neutral, PublicKeyToken=31bf3856ad364e35" />
  </modules>
  <handlers>
    <remove name="WebServiceHandlerFactory-Integrated" />

    <add verb="POST,GET" name="Ajax" path="ajax/*.ashx" type="Ajax.PageHandlerFactory, Ajax" />
    <add name="ScriptHandlerFactory" verb="*" path="*.asmx" preCondition="integratedMode" type="System.Web.Script.Services.ScriptHandlerFactory, System.Web.Extensions, Version=1.0.61025.0, Culture=neutral, PublicKeyToken=31bf3856ad364e35" />
    <add name="ScriptHandlerFactoryAppServices" verb="*" path="*_AppService.axd" preCondition="integratedMode" type="System.Web.Script.Services.ScriptHandlerFactory, System.Web.Extensions, Version=1.0.61025.0, Culture=neutral, PublicKeyToken=31bf3856ad364e35" />
    <add name="ScriptResource" preCondition="integratedMode" verb="GET,HEAD" path="ScriptResource.axd" type="System.Web.Handlers.ScriptResourceHandler, System.Web.Extensions, Version=1.0.61025.0, Culture=neutral, PublicKeyToken=31bf3856ad364e35" />
  </handlers>
  </system.webServer>

   <system.web>
  <httpHandlers>
        <add verb="POST,GET"  path="ajax/*.ashx" type="Ajax.PageHandlerFactory, Ajax"/>
    </httpHandlers>
  </system.web> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-19T06:19:58.837

也许您在 IIS 7 中使用集成 .NET 模式，那么 httpHanders 配置需要更改。参考[这个](http://www.west-wind.com/weblog/posts/2007/Oct/10/HttpModule-and-HttpHandler-sections-in-IIS-7-webconfig-files)

# php - 页面网址 {$smarty.server.PHP_SELF}

> ID：12489199
> 
> 赞同：2
> 
> 时间：2012-09-19T05:48:21.270
> 
> 标签：php, smarty

我使用此代码 {$smarty.server.PHP_SELF} 订购当前页面，但页面带有 .php 我希望它带有 .html 有没有办法使用 php 或任何方式来做到这一点？

我想要的另一件事是将任何用户使用 .php 重定向到同一页面上的 .html？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-19T05:49:37.910

你可以使用`htaccess`它

```
RewriteEngine on
RewriteRule ^(.*)\.html$ $1.php [nc] 
```

# java - JavaScript MD5 哈希与 Java Applet MD5 哈希？

> ID：12489202
> 
> 赞同：0
> 
> 时间：2012-09-19T05:48:32.760
> 
> 标签：java, javascript, security, applet, md5

最近我遇到了一个项目，它在登录时使用 MD5 散列来发布用户名和密码。但我看到的有点奇怪，他们同时使用 Applet 和 JavaScript 进行散列，如果 Applet 不存在，那么 JavaScript作品。

代码如下：

```
var username=document.getElementById('username');
var password=document.getElementById('password');
try { 
    encUsername = appletObject.encryptMessage(username);
    encPassword = appletObject.encryptMessage(password);
} catch (e) { 
    encUsername = hex_md5(username);
    encPassword = hex_md5(password);
}
//post encUsername & encPassword for validation 
```

1.  此方法是否仅用于 JS 和 Applet 的浏览器兼容性，或者对于 MD5 散列的 javascript，applet 有什么优势？
2.  在这种情况下，小程序有什么安全优势吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-19T06:06:31.373

在客户端散列密码和用户名（？）没有安全目的。在服务器上存储散列密码的最大好处是，万一密码数据库遭到破坏，不会泄露任何实际有效的密码。然而，当密码在客户端被散列时，散列实际上是一个密码——一个以明文形式存储在服务器上的密码，因此没有提供任何安全优势。

关于使用小程序，我不确定小程序的实现是什么，但它似乎没有为使用内置功能提供任何额外的好处。

# ruby - Rubycas：使用 CASClient::Frameworks::Rails::Filter login_to_service() 方法时为空 cookie

> ID：12489203
> 
> 赞同：2
> 
> 时间：2012-09-19T05:48:37.860
> 
> 标签：ruby, cookies, rubycas

我发现 RubyCAS 是非常有用的工具，但是从我网站上的表单登录时出现问题。表单是默认和隐藏字段，如下所示：

```
 <td id="submit-container">
    <input type="hidden" id="lt" name="lt" value="<%= @lt %>" />
    <input type="hidden" id="service" name="service" value="<%= @service %>" />
    <input type="submit" class="button" accesskey="l" value="Поехали"
           tabindex="4" id="login-submit" />
  </td> 
```

具有自定义登录操作的控制器看起来像

```
class UsersController < ApplicationController
 before_filter CASClient::Frameworks::Rails::Filter, :except => [:new, :create, :cas_login]

 def cas_login
    credentials = { :username => params[:username], :password => params[:password]}
    client = CASClient::Frameworks::Rails::Filter
    @resp = client.login_to_service(self, credentials, 'http://local.mysite:3000/users/login')

    if @resp.service_redirect_url.nil?
      # if login failed, redisplay the page that has your login-form on it                                                                                                                                          
      flash[:error] = "Invalid email or password"

      redirect_to root_url
    else                                                                                                                                                                                 
      return redirect_to(@resp.service_redirect_url)
    end
  end
end 
```

问题：所以在第一个应用程序成功登录后，并在以下位置设置 cookie `rubycas-server-1.1.1/lib/casserver/server.rb`：

```
response.set_cookie('tgt', tgt.to_s) 
```

尝试使用 ruby​​cas-server 打开另一个应用程序时，我的 cookie 为空

当使用 ruby​​cas-server 开箱即用的形式登录到第一个应用程序时，一切正常，我自动登录到第二个应用程序

请帮忙！在这个问题上花了3天！

# android - 在焦点edittext android中显示软键盘

> ID：12489213
> 
> 赞同：0
> 
> 时间：2012-09-19T05:49:45.963
> 
> 标签：android

当焦点改变时，我正在使用以下代码显示编辑框的键盘。

```
 no1.setOnKeyListener(new OnKeyListener() {
        public boolean onKey(View v, int keyCode, KeyEvent event) {
            if (event.getAction() == KeyEvent.ACTION_DOWN)
            {
            if(keyCode == 66) {

                no2.requestFocus();

            }
            }
            return false;
        }
    });

    no2.setOnKeyListener(new OnKeyListener() {
        public boolean onKey(View v, int keyCode, KeyEvent event) {
            if (event.getAction() == KeyEvent.ACTION_DOWN)
            {
            if(keyCode == 66) {
                 //Log.e("I am inside no2","no2");
                no3.requestFocus();

                return true;

            }
            }
            return false;
        }
    });

    no2.setOnFocusChangeListener(new View.OnFocusChangeListener() {
        public void onFocusChange(View v, boolean hasFocus) {
            if (hasFocus) {
               Log.e("In","Innnnnn");
               InputMethodManager imm = (InputMethodManager) getSystemService(Context.INPUT_METHOD_SERVICE);
                imm.showSoftInput(no2, InputMethodManager.SHOW_IMPLICIT);         
            }
        }
    }); 
```

但是键盘不显示。正在打印日志语句。这意味着它正在进入 focusChanged 方法。任何想法我做错了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-19T05:52:49.707

使用 InputMethodManager 控制键盘。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-19T06:04:14.313

尝试这个...

```
final AlertDialog dialog = ...;

editText.setOnFocusChangeListener(new View.OnFocusChangeListener() {
    @Override
    public void onFocusChange(View v, boolean hasFocus) {
        if (hasFocus) {
            dialog.getWindow().setSoftInputMode(WindowManager.LayoutParams.SOFT_INPUT_STATE_ALWAYS_VISIBLE);
        }
    }
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-19T08:18:28.607

尝试这个

```
InputMethodManager inputMethodManager=(InputMethodManager) getSystemService(Context.INPUT_METHOD_SERVICE);  
inputMethodManager.toggleSoftInput(0, InputMethodManager.HIDE_NOT_ALWAYS); 
```

# java - SocketInputStream.socketRead0() 中 CPU 使用率高的原因

> ID：12489215
> 
> 赞同：18
> 
> 时间：2012-09-19T05:50:02.867
> 
> 标签：java, linux, performance, jvm, cpu-usage

在分析本土网络应用程序时，我遇到了非常奇怪的（至少对我而言）观察。

几乎所有时间都花在类的`socketRead0()`方法上`SocketInputStream`。这并不奇怪，因为我的应用程序对每个请求都使用远程服务进行联网。奇怪的是，这种方法不仅*挂钟时间*使用率很高，而且*CPU 时钟时间*也非常高。我不明白为什么 CPU 时间很高，因为如果我的应用程序等待远程服务回复（实际上并没有那么快），那么应用程序本身就没有什么可做的了。所以 CPU 时间应该很短。

更多观察：

*   采样模式下的 VisualVM 显示该方法`SocketInputStream.socketRead0()`占用了高达 95% 的时间（挂钟时间**和**CPU 时间）；
*   `mpstat`（我们使用 Linux 作为操作系统）显示约 90% 的用户时间和约 1-3% 的系统时间（其余为空闲时间）；
*   部署在专用服务器上的应用程序；
*   远程服务也是 HTTP Web 应用程序。平均响应时间约为 100 毫秒。平均响应大小约为 2Kb。
*   我的应用程序使用 spring`RestTemplate`与远程服务进行交互，而不是`SocketInputStream`直接。

现在我只有一个想法——也许这是在 JVM 中调用本机方法的开销（`SocketInputStream.socketRead0()`是本机的）？

你怎么看？这还有其他原因吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2017-04-26T06:00:04.013

I am facing the same problem. My application has a very high qps and each request will make me send multiple thrift calls, which use this native api : `socketRead0`

So I decide to do an experiment. I make a mock server with an api sleep 30s before return and a client calls this api. My purpose is to test the thread status when the net io happening. Based on my thread dump, the thread status is `RUNNABLE`.

This explains to two things :

1.  application with high qps blocking io will face a high cpu load value

2.  your java thread is still running in jvm since the thread state is `RUNNABLE` which will contribute to high user space cpu utilization

both of these will make your cpu busy.

I noticed during the experiment, the system space cpu utilization is low. I think this something relates to the thread scheduling strategy difference between jvm and os. We know hotspot threading model is 1:1, meaning one jvm thread to one os thread. when a blocking io happened, such as `socketRead0` the kernel thread will set to state `S` and will not blocking cpu, but user space thread is blocking(waiting). when this happened, I think we need to rethink the fundamental I/O model in our application.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-08-01T02:27:09.687

VisualVM 不是将负载显示为绝对值，而是显示为相对值，因此它只是意味着您的应用程序没有更多的 CPU 消耗点。

我相信您应该将 VisualVM 配置为不深入挖掘，而是将此方法调用视为代码（或 spring）中方法的一部分。

我已经经历过这样的行为，但它看起来不需要任何优化。Web 应用程序只需从套接字读取数据（即 HTTP 请求、数据库、内部网络服务......），但没有任何帮助。

# forms - 同一行 PHP 上的多个 post 变量

> ID：12489218
> 
> 赞同：0
> 
> 时间：2012-09-19T05:50:11.933
> 
> 标签：forms, http-post

我不是程序员，我正在尝试更改开源 Ajax 联系表单。

要从表单发送的电子邮件消息不包括联系表单的所有字段；只有第一个和最后一个。（名字和消息）

这是[send.php](http://pastebin.com/LpvaHQi3)

Dreamweaver 正确突出显示第一个和最后一个字段，但中间的那些没有突出显示，表明存在编码问题（我看不到）。

为什么不是所有的 $POST 变量都通过电子邮件发送？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-19T05:54:00.340

您有几个实例`$POST`应该改为[`$_POST`](http://www.php.net/manual/en/reserved.variables.post.php).

# c++ - 使用 boost::iterator_facade<> 为迭代器返回 ref，但为 const_iterator 返回 const_ref？

> ID：12489225
> 
> 赞同：1
> 
> 时间：2012-09-19T05:51:14.473
> 
> 标签：c++, templates, boost, boost-iterators, iterator-facade

我有这样的课，

```
template <typename Node>
class BSTIteratorBase : public boost::iterator_facade<
    BSTIteratorBase<Node>,
    typename Node::value_type,
    boost::forward_traversal_tag
>
{ ...
    value_type& dereference() const
    { return const_cast<value_type&>( nodePtr_->value_ ); } // Ouch! const_iterator may modify
... }; 
```

`value_type`不依赖于类的**常量**`BSTNode`。这就是为什么我必须保留这`const_cast<value_type&>()`部分。如何确保`const_iterator`return a`const_ref`但`iterator`返回 modifiable `ref`？这是相关的typedef，

```
template <typename T>
class BinarySearchTree
{
public:
    typedef T                                   value_type;
    typedef T&                                  reference;
    typedef const T&                            const_reference;
    typedef BSTNode<T>                          node_type;    
    typedef BSTNode<T>&                         node_reference;
    typedef BSTNode<T>*                         node_pointer;
    typedef BSTIteratorBase<BSTNode<T>>         iterator;
    typedef BSTIteratorBase<const BSTNode<T>>   const_iterator; 
```

和节点类，

```
template <typename T>
class BSTNode
{
public:
    typedef T           value_type;
    typedef T&          reference;
    typedef const T&    const_reference;
    typedef BSTNode     node_type;
    typedef BSTNode*    node_pointer;

    // ctors, dtor

private:
    template <class> friend class BSTIteratorBase;
    template <class> friend class BinarySearchTree;

    T value_;
    node_pointer leftPtr_;
    node_pointer rightPtr_;
}; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-19T08:10:08.910

您可以使用一个[元函数](http://www.boost.org/doc/libs/1_51_0/libs/mpl/doc/refmanual/metafunction.html)来约束`value_type`其封闭类型是否为 const：

```
template<class T>
struct ValueTypeOf { 
    typedef typename T::value_type type; 
};

template<class T>
struct ValueTypeOf<T const> {
    typedef typename T::value_type const type; 
};

template <typename Node>
class BSTIteratorBase : public boost::iterator_facade<
    BSTIteratorBase<Node>,
    typename ValueTypeOf<Node>::type,
    boost::forward_traversal_tag
>
// ... 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-19T09:02:57.800

我会倾向于写

```
typedef BSTIteratorBase<BSTNode<T>>               iterator;
typedef BSTIteratorBase<const BSTNode<const T>>   const_iterator;
                                      ^-- note extra const 
```

请注意，这很好地反映了`T **`->`const T *const *`转换。

# android - 如何将 C 文件添加到 Android 源代码

> ID：12489229
> 
> 赞同：1
> 
> 时间：2012-09-19T05:51:58.703
> 
> 标签：android, android-ndk

我有一个用 C 语言编写的文件，我想将它添加到我在 PC 上下载的 Android 源代码中。我相信我的文件在正确的文件夹中，但我还需要做什么？我相信我必须编辑一个 Make 文件以包含 C 文件的名称，但我要编辑哪个 Make 文件？有数百个。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-19T05:54:16.133

您需要查看 JNI 和 NDK 以将一些 C/C++ 库包含到您的 Android 应用程序中。它并不像你想象的那么简单。[查看此链接以获取更多信息或 Stack Overflow http://developer.android.com/tools/sdk/ndk/overview.html](http://developer.android.com/tools/sdk/ndk/overview.html)上的相关问题

**编辑：**

你看过这个文档吗？[http://source.android.com/source/building.html](http://source.android.com/source/building.html)（以及之前关于设置等的页面？）如果只是在本机源代码中替换文件，则应该没有要修改的makefile，只需构建整个项目通过谷歌提供的链接中给出的命令，应该没问题。

使用

```
$ make -j4 
```

例如，在为具有 4 个不同线程的编译的 init 和目标选择之后。这将寻找主要的 Makefile 并且内部工作不属于您的业务，所以应该没问题。

似乎您必须添加一个新文件，您可能想查看新文件所依赖的其他文件（请参阅文件的包含部分），然后在所有 Makefile 中使用您最喜欢的 Linux 命令实用程序搜索以查找位置您的新 c 文件所需的那些文件已找到，它可能会给您一个良好的开端。

无论如何，如果你没有开发这个新的源文件，你为什么要基于它来构建一个图像，或者你为什么没有一些关于它的更多细节？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-19T06:19:03.497

由于您知道哪些其他文件属于您要更改的组件，您可以尝试查找列出它们的 Makefile（以某种方式）。可能在同一个目录下，可能是Android.mk

# android - android中的动态按钮问题

> ID：12489233
> 
> 赞同：1
> 
> 时间：2012-09-19T05:52:05.620
> 
> 标签：android, android-linearlayout

我是 android 开发的新手，我的测试代码面临问题。单击“+”按钮时，我想添加按钮。它被添加但位置不正确。我想在编辑通过 XML 定义的文本后添加新按钮。我正在添加 xml 和我的代码。谢谢。

```
 <RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
xmlns:tools="http://schemas.android.com/tools"

android:layout_width="match_parent"
android:layout_height="match_parent"
android:background="#EBE7E4" >

<RelativeLayout
    android:id="@+id/header"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:layout_alignParentLeft="true"
    android:layout_alignParentTop="true"
    android:background="@layout/header_gradient"
    android:gravity="right"
    android:paddingBottom="5dip"
    android:paddingTop="5dip" >

    <ImageButton
        android:id="@+id/imageButton1"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignParentRight="false"
        android:layout_centerVertical="true"
        android:layout_marginLeft="18dp"
        android:src="@drawable/content_new" />
</RelativeLayout>

<EditText
    android:id="@+id/editText1"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_alignParentLeft="true"
    android:layout_below="@+id/header"
    android:layout_marginLeft="36dp"
    android:ems="10"
    android:hint="Name of label" >

    <requestFocus />
</EditText>

<Spinner
    android:id="@+id/spinner1"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_alignLeft="@+id/editText1"
    android:layout_alignRight="@+id/editText1"
    android:layout_below="@+id/editText1" />

<LinearLayout
    android:id="@+id/lId"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:orientation="vertical" >
</LinearLayout>

<Button
    android:id="@+id/button1"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_alignLeft="@+id/spinner1"
    android:layout_centerVertical="true"
    android:layout_marginLeft="33dp"
    android:text="Save &amp; Continue" /> 
```

```
private Spinner spinner;
ImageButton btnAddNew;
public static int MY_BUTTON = 2;
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_create_steps);        
    btnAddNew =(ImageButton)findViewById(R.id.imageButton1);        
    addItemsOnSpinner();

    btnAddNew.setOnClickListener(new OnClickListener() {

        public void onClick(View v) {
              Log.w("ANDROID DYNAMIC VIEWS:", "View Id: " + MY_BUTTON);
            LinearLayout rAlign = (LinearLayout)findViewById(R.id.lId);
            Button newPass = new Button(getApplicationContext());
            newPass.setText("Add LABEL");
            newPass.setLayoutParams(new LayoutParams(LayoutParams.WRAP_CONTENT, LayoutParams.WRAP_CONTENT));
            newPass.setWidth(418);
            newPass.setId(MY_BUTTON);
            //newPass.
            newPass.setOnClickListener(this);
            rAlign.addView(newPass);
            MY_BUTTON ++;

        }
    });
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-19T06:29:15.430

在这里，我通过更改 XML 中的一些行来解决

这是一个 XML

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
xmlns:tools="http://schemas.android.com/tools"

android:layout_width="match_parent"
android:layout_height="match_parent"
android:background="#EBE7E4" >

<RelativeLayout
    android:id="@+id/header"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:layout_alignParentLeft="true"
    android:layout_alignParentTop="true"
    android:gravity="right"
    android:paddingBottom="5dip"
    android:paddingTop="5dip" >

    <ImageButton
        android:id="@+id/imageButton1"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignParentRight="false"
        android:layout_centerVertical="true"
        android:layout_marginLeft="18dp"/>
</RelativeLayout>

<EditText
    android:id="@+id/editText1"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_alignParentLeft="true"
    android:layout_below="@+id/header"
    android:layout_marginLeft="36dp"
    android:ems="10"
    android:hint="Name of label" >

    <requestFocus />
</EditText>

<Spinner
    android:id="@+id/spinner1"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_alignLeft="@+id/editText1"
    android:layout_alignRight="@+id/editText1"
    android:layout_below="@+id/editText1" />

<LinearLayout
    android:id="@+id/lId"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_alignLeft="@+id/spinner1"
    android:layout_below="@+id/spinner1"
    android:orientation="vertical" >
</LinearLayout>

<Button
    android:id="@+id/button1"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_alignLeft="@+id/spinner1"
    android:layout_below="@+id/lId"
    android:layout_centerVertical="true"
    android:layout_marginLeft="33dp"
    android:text="Save &amp; Continue" />
</RelativeLayout> 
```

`onCreate`功能没有任何变化

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-19T06:09:50.333

**-**尽管此解决方案不适用于 N 个按钮，但如果您知道手头有多少个按钮，则可以使用

**-**使用`TableRow`after `EditText`，然后在动态创建按钮后将它们添加到`TableRow`.

**-**当按钮超过屏幕在模拟器或手机中可以显示时，请注意不要通过屏幕右侧

# multithreading - 在线程中等待特定时间，使用 WaitForSingleObject?

> ID：12489234
> 
> 赞同：1
> 
> 时间：2012-09-19T05:52:10.913
> 
> 标签：multithreading, winapi, timer

我需要在我的一个线程中等待一段时间，我开始考虑，`WaitForSingleObject`但它需要句柄来等待，尽管它可能需要超时输入；

可能会使用另一种解决方案`SetTimer`，但它似乎会创建`WM_TIMER`消息，但由于我在线程中，所以我没有更改来捕获该消息，所以我可以在这里使用什么吗？我可以使用`Sleep`吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-19T05:56:07.757

WM_TIMER 不是很可靠。这是一个低优先级的窗口消息，如果用户正在调整窗口大小（例如），则不会发送它。

我会说“睡眠”是最好的选择，但过去我使用过 WaitForSingleObject，因为它允许我传入一个句柄以在需要时取消等待操作。取决于你的设计。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-19T07:51:41.073

正确的方法很大程度上取决于你的意思`to wait some time`。[Sleep 函数](http://msdn.microsoft.com/en-us/library/windows/desktop/ms686298%28v=vs.85%29.aspx)和[WaitForSingleObject 函数](http://msdn.microsoft.com/en-us/library/windows/desktop/ms687032%28v=vs.85%29.aspx)的精度基本相同。根据底层硬件和操作系统的版本，可实现的最小延迟在 0 .. 1 .. 20 毫秒的范围内。如果您只想等待几秒钟或十分之一秒，这两个功能是正确的选择。

等待更短的时间段，即毫秒范围内需要更详细的调查。有关更多详细信息，请参阅[此](https://stackoverflow.com/a/11760590/1504523)或[此](https://stackoverflow.com/a/11470617/1504523)答案。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-19T20:31:59.017

如果您只想让线程等待固定的时间，请使用`Sleep()`它。但是，如果您希望等待可以被某些外部操作中断，您必须等待某些东西，无论是计时器（参见`SetTimer()`和`Get/PeekMessage()`）、事件（参见`CreateEvent()`和`WaitForSingleObject()`）、线程队列中的消息（参见`PostThreadMessage()`和`MsgWaitForMultipleObjects()`）、 I/O 完成端口回调（参见`PostQueuedCompletionStatus()`和`GetQueuedCompletionStatus()`）等。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-19T08:54:50.347

如果你想阻塞一个线程并等到一个特定的时间，你可以使用该`CreateWaitableTimer()`函数，然后`WaitForSingleObject()`在定时器句柄上使用。

这个函数也可以等待一个特定的时间段，并`WaitForMultipleObjects()`让你阻塞直到定时器间隔和其他对象同时。

# python - python/django 没有名为 yelp 的模块

> ID：12489235
> 
> 赞同：0
> 
> 时间：2012-09-19T05:52:15.083
> 
> 标签：python, django, api

我下载了python的yelp github，python文件夹中有三个文件。我将这三个文件夹放在一个名为`yelp`which的文件夹中`mysite`。（我正在关注 django 创建第一个应用程序文档）。这个`mysite`文件夹也有`polls`文件夹。

当我将 yelp 添加到`settings.py`INSTALLED_APPS 中时，为什么`no module named yelp`我尝试这样做仍然会得到`python manage.py runserver`？

请帮忙，我还在努力学习 python 是如何工作的，当你引入一个新的 .py 文件时该怎么办..？

谢谢你！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-19T05:59:38.253

您需要`__init__.py`在 mysite 和 yelp 目录中都有一个，并且需要将其导入为`mysite.yelp`.

旧版本的 python 将允许隐式相对导入，但通常应该有一个可导入的根包，并且其中的任何内容都应该使用全名导入。django 的工作方式，你的整个站点需要是可导入的包。

但是，如果 github 上有可用的现有项目，通常最好将整个项目安装在系统上，而不是将其复制到项目中。这样，如果有更新，您就可以跟上最新的内容并更新到最新版本。

# sql - Cakephp 发现返回 null

> ID：12489238
> 
> 赞同：7
> 
> 时间：2012-09-19T05:52:23.570
> 
> 标签：sql, cakephp

大家好，我正在尝试通过查找做两件事，模型争议属于发票。

查找所有发票

`invoice.receiver_id=account.id`

和

`dispute.invoice_id=invoice.id`

当前，当我调试时，该数组返回 null。find 语句中应该有 2 个结果

这是我的争议控制器中的代码

```
public function index_admin(){

    $id = $this->Auth->User('account_id');

    $receiver = $this->Invoice->find('all',array(
    'conditions'=>array("AND"=>array(
    'Invoice.id'=>'Dispute.invoice_id',
    'receiver_id'=>$id))));

        $this->set('id',$id);
        $this->set('receiver', $receiver);
  } 
```

这是在争议控制器中，因为我想打印一份关于有争议的发票的清单。

```
Query   Error   Affected    Num. rows   Took (ms)
1   SELECT `Invoice`.`id`, `Invoice`.`scheduled`, `Invoice`.`paid`, `Invoice`.`sender_id`, `Invoice`.`receiver_id`, `Invoice`.`template_id`, `Invoice`.`created`, `Invoice`.`expiry_date`, `Invoice`.`total_amount`, `ReceiverAccount`.`id`, `ReceiverAccount`.`street`, `ReceiverAccount`.`city`, `ReceiverAccount`.`postcode`, `ReceiverAccount`.`state`, `ReceiverAccount`.`country`, `ReceiverAccount`.`active`, `ReceiverAccount`.`account_name`, `ReceiverAccount`.`abn`, `SenderAccount`.`id`, `SenderAccount`.`street`, `SenderAccount`.`city`, `SenderAccount`.`postcode`, `SenderAccount`.`state`, `SenderAccount`.`country`, `SenderAccount`.`active`, `SenderAccount`.`account_name`, `SenderAccount`.`abn`, `Template`.`id`, `Template`.`name`, `Template`.`description`, `Template`.`account_id`, `Template`.`active` FROM `pra`.`invoices` AS `Invoice` LEFT JOIN `pra`.`accounts` AS `ReceiverAccount` ON (`Invoice`.`receiver_id` = `ReceiverAccount`.`id`) LEFT JOIN `pra`.`accounts` AS `SenderAccount` ON (`Invoice`.`sender_id` = `SenderAccount`.`id`) LEFT JOIN `pra`.`templates` AS `Template` ON (`Invoice`.`template_id` = `Template`.`id`) WHERE `Invoice`.`id` = 'Dispute.invoice_id' AND `Invoice`.`receiver_id` = 2 
```

编辑 - - - - - - - - - - -

```
invoices tables has - id, sender_id, receiver_id, amount, expiry_date, created, paid
disputes table has - id, dispute_date, comment, active 
```

争议模型看起来像这样

```
public $belongsTo = array(
    'Invoice' => array(
            'className' => 'Invoice',
            'foreignKey' => 'invoice_id',
            'conditions' => '',
            'fields' => '',
            'order' => ''
            )
        );

public $hasOne = array(
        'Sender' => array(
            'className' => 'Account',
            'foreignKey' =>'sender_id',
            'associationForeignKey'  => 'accounts_id',),
        'Receiver'=> array(
            'className' => 'Account',
            'foreignKey' =>'receiver_id',
            'associationForeignKey'  => 'accounts_id',
            )
            ); 
```

争议有一个发送者和一个接收者，因为一张发票只能有一个争议。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-19T06:53:32.713

如果您进入 DisputeController，请尝试此代码：我不知道表名是否为发票

```
 $id = $this->Auth->User('account_id');

$options['joins'] = array(    
    array(
            'table' => 'invoices',
            'alias' => 'i',
            'type' => 'INNER',
            'conditions' => array(            
                'i.id' => 'invoice_id',  
                    'i.receiver_id' => $id      
                )    
      ));

 $receiver = $this->Dispute->find('all', $options);

  $this->set('id',$id);
  $this->set('receiver', $receiver); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-19T06:44:30.810

```
public function index_admin(){

     $id = $this->Auth->User('account_id');

    $this->Invoice->bindModel(array('hasMany'=>array('Dispute' => array ('className' => 'Dispute','foreignKey' => 'invoice_id'))));

    $receiver = $this->Invoice->find('all',array('conditions'=>array('Invoice.receiver_id'=>$id)));

    $this->set('id',$id);
    $this->set('receiver', $receiver);

  } 
```

============ 更新答案 =================

```
public function index_admin(){

  $id = $this->Auth->User('account_id');

  $this->Invoice->bindModel(array('hasMany'=>array('Dispute' => array ('className' => 'Dispute','foreignKey' => 'invoice_id','conditions'=>array('receiver_id'=>$id)))));

   $receiver = $this->Invoice->find('all');

   $this->set('id',$id);
  $this->set('receiver', $receiver);

 } 
```

试试我更新的答案，让我知道

# c++ - 重载“operator X*() const”是什么意思？

> ID：12489239
> 
> 赞同：0
> 
> 时间：2012-09-19T05:52:28.333
> 
> 标签：c++

> **可能重复：**
> [什么是“operator T*(void)”，何时调用？](https://stackoverflow.com/questions/275169/what-is-operator-tvoid-and-when-it-is-invoked)

我们知道下面的代码是重载了 * 和 & 运算符

```
X& operator*() const
{
    return *this;
}

X* operator&() const
{
    return this;
} 
```

但我不知道下面的代码是什么意思？（可以通过build）好像是用来获取X的指针的。

```
operator X*() const
{
    return this;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-19T06:10:16.830

这就是所谓的*用户自定义转换*，或 UDC。它们允许您通过构造函数或特殊转换函数指定到其他类型的转换。

语法如下所示：

```
operator <some_type_here>(); 
```

所以你的特殊情况是类型的转换运算符`X*`。

在编写这些代码时，您应该记住一些事情：

*   UDC 不能有歧义，否则不会被调用
*   编译器一次只能使用 UDC 隐式转换单个对象，因此链接隐式转换不起作用：

    ```
    class A 
    {
        int x;
    public:
        operator int() { return x; };
    };

    class B 
    {
        A y;
    public:
        operator A() { return y; };
    };

    int main () 
    {
        B obj_b;
        int i = obj_b;//will fail, because it requires two implicit conversions: A->B->int
        int j = A(obj_b);//will work, because the A->B conversion is explicit, and only B->int is implicit.
    } 
    ```

*   派生类中的转换函数不会隐藏基类中的转换函数，除非它们转换为相同的类型。

*   通过构造函数进行转换时，只能使用默认转换。例如：

    ```
    class A
    {
        A(){}
        A(int){}
    }
    int main()
    {
        A obj1 = 15.6;//will work, because float->int is a standart conversion
        A obj2 = "Hello world!";//will not work, you'll have to define a cunstructor that takes a string.
    } 
    ```

[您可以在此处](http://publib.boulder.ibm.com/infocenter/comphelp/v8v101/index.jsp?topic=/com.ibm.xlcpp8a.doc/language/ref/cplr383.htm)、[此处](http://msdn.microsoft.com/ru-ru/library/047b2c75.aspx)或[此处](http://cpppearls.blogspot.com/2007/07/implict-conversions-user-defined.html)找到更多信息。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-19T05:53:13.000

```
operator X*() const
{
    return this;
} 
```

`Implicit conversion operator`键入`X*`。这是用户定义的转换。阅读`12.3`标准以获取更多信息。[从 BoostCon 谈话中重载解引用运算符的](https://stackoverflow.com/questions/12018404/strange-way-of-overloading-the-dereference-operator-from-a-boostcon-talk/12018456#12018456)相关奇怪方法

# node.js - 尝试使用 socket.io 创建一个简单的套接字

> ID：12489251
> 
> 赞同：2
> 
> 时间：2012-09-19T05:53:44.017
> 
> 标签：node.js, socket.io

我收到错误消息：

> 端口错误：无法建立连接。接收端不存在。

但我不知道如何解决这个问题，有什么帮助吗？这是我的代码：

服务器 (app.js)

```
var app = require('express')(), 
    server = require('http').createServer(app), 
    io = require('socket.io').listen(server);

server.listen(8088);

//routing
app.get('/', function (req, res) {
  res.sendfile(__dirname + '/index.html');
});

io.sockets.on('connection', function (socket) {

  socket.emit('news', { hello: 'world' });

  socket.on('set nickname', function (name) {
    socket.set('nickname', name, function () { socket.emit('ready'); });
  });

  socket.on('msg', function () {

    socket.get('nickname', function (err, name) {
      console.log('Chat message by ', name);
    });

  });

}); 
```

客户端 (index.html)

```
<script src="/socket.io/socket.io.js"></script>
<script>
  var socket = io.connect('http://localhost:8088');

  socket.on('news', function (data) {
    console.log(data);
  });

  socket.on('connect', function () {
    socket.emit('set nickname', prompt('What is your nickname?'));

    socket.on('ready', function () {
      console.log('Connected !');
      socket.emit('msg', prompt('What is your message?'));
    });

  });
</script> 
```

**编辑**

我`socket.connect()`从客户端中删除但仍然收到相同的错误

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-19T12:43:46.497

我从未在客户端使用过 socket.connect() ，也从未见过该错误，所以我认为这就是您的错误的来源。

在客户端

```
var socket = io.connect('http://localhost:8088') 
```

应该是您建立连接唯一需要调用的东西，es ebohlman 在客户端表示没有连接事件，如果您想监听该事件，您必须自己在服务器端发出它。

```
io.sockets.on('connection',function(){
  socket.emit('connect',{...})
}) 
```

[http://socket.io/](http://socket.io/)的首页上有一个简单的示例，应该可以帮助您入门。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-04T19:48:39.187

尝试端口 3000 或 5000 而不是 8088

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-04T22:00:17.880

他的代码看起来不错。
在客户端`socket.on("connect")`连接到指定服务器时触发。
这可能是一些端口问题。尝试不同的端口。
以下是客户端和服务器端的一些事件
[https://github.com/LearnBoost/socket.io/wiki/Exposed-events](https://github.com/LearnBoost/socket.io/wiki/Exposed-events)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-06-27T20:42:53.030

这些错误与您的代码无关，因此您可以忽略它们。它们不会干扰您的代码。它们源自浏览器扩展，通常尝试连接到本地文件。对于该特定错误，可以找到更多帖子。我就是这样发现的！

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-19T08:37:20.133

AFAIK，iosocket 的`connect`事件是在客户端建立连接时在服务器端触发的事件，而不是在成功连接到服务器时在客户端触发的事件。如果我是对的，您的客户端代码应该响应“新闻”事件（它应该在服务器确认连接时看到）。

# javascript - 需要使用带有 express3.x 和节点的dust.js 或handlebars.js 的两页示例

> ID：12489255
> 
> 赞同：0
> 
> 时间：2012-09-19T05:54:09.437
> 
> 标签：javascript, node.js, express, handlebars.js, dust.js

我正在尝试决定要使用的模板引擎——我已经看到很多带有模板引擎的单页示例......我正在尝试找到一个处理两个不同页面但重用相同基本页面的现实示例所有页面的布局，也可以包括导航的部分（nav.dust）。

我倾向于dust.js，但handlebars.js也很好......

```
app.get('/page1', function(req, res, next) {
    res.render('page1', {
        title: 'This is a test'
    });
});

app.get('/page2', function(req, res, next) {
    res.render('page2', {
        title: 'This is a test2'
    });
}); 
```

我希望 page1 和 page2 都继承自基本的 layout.dust 文件（或 layout.hbs），但覆盖标题和正文的内容区域等内容，其中包含 nav.dust 文件的部分内容。

我很难想出 ./views 目录包含的内容。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-26T06:36:48.610

我想出了怎么做，并在这里设置了一个 github 演示：[https ://github.com/chovy/express-template-demo](https://github.com/chovy/express-template-demo)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-25T19:06:16.123

我创建了一个演示“TO-DO List”应用程序，您可以在以下位置检查它的工作情况：

[http://watchdev.com.ar/dustjs-slim-rest-app-example/](http://watchdev.com.ar/dustjs-slim-rest-app-example/)

来源在这里：

[https://github.com/PabloGancharov/dustjs-slim-rest-app-example](https://github.com/PabloGancharov/dustjs-slim-rest-app-example)

# iphone - iPhone异常处理使我的应用程序崩溃

> ID：12489256
> 
> 赞同：0
> 
> 时间：2012-09-19T05:54:13.017
> 
> 标签：iphone, ios, xcode4, exception-handling

我是 ios 新手，我正在按照教程开发计算器。
当我构建我的项目时它成功了，但在运行时它崩溃并抛出异常：

```
 `2012-09-19 10:03:51.469 AhsanCalculator[325:f803] *** Terminating app due to uncaught exception 'NSUnknownKeyException', reason: '[<ViewController 0x6d59870> setValue:forUndefinedKey:]: this class is not key value coding-compliant for the key pushOperand.'
*** First throw call stack: 
```

如果您需要更多详细信息，我的代码在这里。告诉我你需要什么，我会给你所有的细节。

Xcode = 4.3.3
5.1 iPhone 模拟器

请帮助解决这个问题

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-19T06:06:13.300

发生崩溃是因为，在您的 xib 中，您已经链接/连接了一些错误的对象，我的意思是`UITextField`a`UITextView`或类似的东西。

当您打开 Xib 右键单击​​文件所有者对象时，它会显示一些`IBOutlets`带有警告图标的连接，删除这些并连接到正确/正确的。

这将清除您的崩溃，并且工作正常。

由于您是 iOS 开发新手，这里有一些链接可以了解项目中出现崩溃时的处理方式，

它是由[Raywenderlich 编写](http://www.raywenderlich.com/tutorials)的，这里是 2 部分教程[第 1](http://www.raywenderlich.com/10209/my-app-crashed-now-what-part-1)部分和[第 2 部分](http://www.raywenderlich.com/10505/my-app-crashed-now-what-part-2)。

# asp.net-mvc-3 - Webgrid MVC 3 条件行样式

> ID：12489279
> 
> 赞同：4
> 
> 时间：2012-09-19T05:57:11.717
> 
> 标签：asp.net-mvc-3, webgrid

我正在使用 WebGrid 来显示项目列表，

我喜欢根据条件设置行的背景颜色。我想设置整行的背景颜色，而不仅仅是一个单元格。

有什么例子吗？

谢谢你

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-10-14T18:19:43.577

这是一个老问题，但我只是偶然发现它并有一个我认为不太老套的答案。仅当您用于有条件地更改背景颜色的值是表格单元格的值时，提供的上一个答案才有效。

如果不是这种情况，您可以`data-`使用 WebGridColumn 的 Format 属性为表格行中的第一个单元格设置一个属性。在这里，我的表的第一列包含超链接 ID。我在我的代码隐藏（MVC 中的控制器操作）中定义它，并且我从我的对象`data-in-error`的属性中添加了一个属性。`IsInError`您可以以任何对您的应用程序有意义的方式设置此属性的值。

```
new WebGridColumn 
{ 
    ColumnName = "Id", 
    Header = "ID", 
    Format = (x) => new HtmlString(String.Format("<a href=\"#\" data-in-error=\"{0}\">{1}</a>", x.Value.IsInError, x.Value.Id))
}); 
```

然后，使用 jQuery，我找到表中在行的第一个单元格中具有锚点的所有行，并将该行的类设置为“错误”。

```
$(document).ready(function () {
    $('table tbody tr td:first-child a[data-in-error="True"]').each(function () {
        $(this).parent().parent().addClass('error');
    });
}); 
```

希望这可以帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-18T08:10:02.660

jQuery是一个选项吗？如果是这样，请查看：[http://devpinoy.org/blogs/keithrull/archive/2010/06/09/how-to-change-table-cell-color-depending-on-its-value-using-jquery。 aspx](http://devpinoy.org/blogs/keithrull/archive/2010/06/09/how-to-change-table-cell-color-depending-on-its-value-using-jquery.aspx)

# php - 如何在 php 中从 Sqlite 数据库中删除行

> ID：12489283
> 
> 赞同：1
> 
> 时间：2012-09-19T05:57:23.320
> 
> 标签：php, sqlite

我是 PhP 的新手。我正在尝试从我的 sqlite 数据库中删除一些行，但我不知道出了什么问题。我的代码如下：

```
<?php
    $app_name=array("TestApp", "MyDataBase");
    $dir = 'sqlite:/home/ravi/public_html/GcmServer/FavoriteApps.db';
    $dbh= new PDO($dir) or die("cannot open the database");
    for($i=0;$i<sizeof($app_name);$i++) {
        error_log("looop start here...............");
        error_log("FirstAppName ".$app_name[$i]);
        $result=  $dbh->Query("DELETE FROM favorite_apps WHERE appname = '$app_name[$i]'") or die( error_log("error".mysql_error() ));
        error_log("looop execute here...............");
    }
?> 
```

我的日志文件是这样的：

```
[Wed Sep 19 11:16:38 2012] [error] [client 127.0.0.1] looop start    here...............
[Wed Sep 19 11:16:38 2012] [error] [client 127.0.0.1] FirstAppName TestApp
[Wed Sep 19 11:16:38 2012] [error] [client 127.0.0.1] error 
```

我的本地主机显示 1，
谢谢。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-19T06:09:17.427

您正在使用`mysql_error()`函数，但您的数据库是 sqlite 并且您正在使用 PDO，其中错误处理完全不同。尝试将您的代码封装到`try-catch`块中以查看更多信息：

```
<?php
  $app_name=array("TestApp", "MyDataBase");
  $dir = 'sqlite:/home/ravi/public_html/GcmServer/FavoriteApps.db';
  $dbh= new PDO($dir) or die("cannot open the database");
  try {
    for($i=0;$i<sizeof($app_name);$i++) {
      error_log("looop start here...............");
      error_log("FirstAppName ".$app_name[$i]);
      $dbh->Query("DELETE FROM favorite_apps WHERE appname = '$app_name[$i]'");
      error_log("looop execute here...............");
    }
  } catch (PDOException $e) {
    echo $e->getMessage();
  }
?> 
```

# android - 在 Android 中使用 loopj AsyncHttpClient 上传后图像大小发生变化

> ID：12489285
> 
> 赞同：0
> 
> 时间：2012-09-19T05:57:27.530
> 
> 标签：android

我正在将图像从我的 Android 应用程序上传到我的服务器。

在手机中我的图片大小是 1.5MB 上传后图片的大小是 250KB

图像宽度和高度没有改变

```
 AsyncHttpClient client = new AsyncHttpClient();
    File myFile = new File(imagePath);
    RequestParams params = new RequestParams();
    try {
        params.put("img", myFile);
        params.put("key1", request.getText().toString());
    } catch(FileNotFoundException e) {
        Log.d("MyApp", "File not found!!!" + imagePath);
    }
    client.post(url, params, new AsyncHttpResponseHandler() {
        @Override
        public void onSuccess(String response) {
            answer.setText(response);
        }

        @Override
        public void onStart() {
        super.onStart();
        }

        @Override
        public void onFailure(Throwable arg0, String arg1) {
        super.onFailure(arg0, arg1);
        Log.d("MyApp", arg0.getMessage().toString());
        }

    }); 
```

在服务器中，我使用以下 servlet 代码获取图像：

```
 Part part = request.getPart("key1");
    Part img = request.getPart("img");
    if (part!=null && img!=null){
        String name = getValue(part);
        InputStream is = img.getInputStream();
        BufferedImage bufImage = ImageIO.read(is); 
        ImageIO.write(bufImage, "jpg", new File("c:/file_"+name+".jpg"));
        out.println(name + " I got your image ");
    } else {
        out.println("image upload failed");
    }
    out.flush();
    out.close(); 
```

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-20T07:58:18.963

我找到了解决方案，问题出在servlet中，下面是解决方案

```
Part fName = request.getPart("name");
Part img = request.getPart("img");
if (fName!=null && img!=null){
    String name = getValue(fName);
    InputStream is = img.getInputStream();
    OutputStream o = new FileOutputStream("c:/file_"+name+".jpg"); 
    copy(is, o); //The function is below 
    o.flush(); 
    o.close(); 
    out.println(name + " I got your image ");
} else {
    out.println("image upload failed");
}
out.flush();
out.close();

public static long copy(InputStream input, OutputStream output) throws IOException { 
    byte[] buffer = new byte[4096]; 

    long count = 0L; 
    int n = 0; 

    while (-1 != (n = input.read(buffer))) { 
        output.write(buffer, 0, n); 
        count += n; 
    } 
    return count; 
} 
```

# magento - 如何合并产品描述和附加信息选项卡？

> ID：12489287
> 
> 赞同：2
> 
> 时间：2012-09-19T05:57:46.763
> 
> 标签：magento, tabs, attributes, magento-1.7

我正在使用将所有信息分成选项卡的现代主题。我想合并一些标签，因为访问者讨厌点击。

我花了几个小时搜索，但无法找到真正有效的方法。

这是我想要实现的示例：

[http://www.teasta.com/chocolate-mint-rooibos-herbal-tea-4oz-tin.html](http://www.teasta.com/chocolate-mint-rooibos-herbal-tea-4oz-tin.html)

您可以看到描述出现在附加信息（属性）上方

如何在 Magento 1.7.0 中执行此操作？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-19T07:15:01.837

对于从 catalog.xml 中的代码删除附加信息选项卡注释

```
<action method="addTab" translate="title" module="catalog"><alias>additional</alias><title>Additional Information</title><block>catalog/product_view_attributes</block><template>catalog/product/view/attributes.phtml</template></action> 
```

为了在产品描述选项卡中显示附加信息，请将以下代码粘贴到
“catalog/product/view/description.phtml”文件中。

```
<?php echo $this->getLayout()->createBlock('catalog/product_view_attributes', '', array('template'=> 'catalog/product/view/attributes.phtml'))->toHtml(); ?> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-19T06:39:34.420

据我所知，选项卡是通过“addTab”方法通过您的包中的布局 xml（请参阅 catalog.xml）添加的。

例子：

```
<action method="addTab" translate="title" module="catalog"><alias>upsell_products</alias><title>We Also Recommend</title><block> 
```

您可以在 catalog.xml 中评论该行并编辑`app/design/frontend/your_package/default/catalog/product/view.phtml`和回显您想要的信息；）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-12-16T21:56:58.167

我的设置在 /app/design/frontend/mytheme/default/layout/local.xml 里面改变了标题标签里面的内容

```
<block type="catalog/product_view_tabs" name="product.info.tabs" as="info_tabs" template="catalog/product/view/tabs.phtml" >

            <!-- Product description -->
            <action method="addTab" translate="title" module="catalog"><alias>description</alias><title>Description</title><block>catalog/product_view_description</block><template>catalog/product/view/description.phtml</template></action>

            <!-- Product attributes -->
            <action method="addTab" translate="title" module="catalog"><alias>additional</alias><title>Specifications</title><block>catalog/product_view_attributes</block><template>catalog/product/view/attributes.phtml</template></action> 
```

# php - 在 PHP 中使用 Eval() 动态创建函数

> ID：12489291
> 
> 赞同：3
> 
> 时间：2012-09-19T05:58:04.783
> 
> 标签：php, function, syntax, eval

我正在尝试使用`eval()`. 但我收到了这个警告：有`Notice: Use of undefined constant`什么建议吗？

```
$funcs = array('func_a', 'func_b', 'func_c');
foreach($funcs as $func_name) {
    eval( 'function ' . $func_name . '() { 
            mainfunc(' . $func_name . '); 
        }' 
    );  
}

func_a();
func_b();
func_c();

function mainfunc($func_name) {
    echo $func_name . '<br />';
} 
```

假设数组`$func`是存储在数据库中的选项值，并且我需要脚本的单独部分中的回调函数的函数名称。所以创建匿名函数`create_function()`并不是我想要的。

感谢您的信息。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-19T06:30:25.033

使用比 eval() 更好的方法，它被称为[重载](http://php.net/manual/en/language.oop5.overloading.php#object.call)。

例子：

```
class MainFunc {

    public function __call($name, $arguments)
    {
        echo "_call($name)<br>";
    }

    public static function __callStatic($name, $arguments)
    {
        echo "_callStatic($name)<br>";
    }

}

# php >= 5.4.x
(new MainFunc)->func_a();
(new MainFunc)->func_b("param", "param2");
# or php < 5.4
$mainFunc = new MainFunc;
$mainFunc->func_a();
$mainFunc->func_b("param", "param2");

MainFunc::func_a_static();
MainFunc::func_b_static("param", "param2"); 
```

输出是：

```
_call(func_a)
_call(func_b)
_callStatic(func_a_static)
_callStatic(func_b_static) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-19T06:05:40.133

您的评估正文需要阅读：

```
mainfunc(\'' . $func_name . '\'); 
```

如果没有单引号， eval() 会生成具有未引用文字的代码 - 未定义的常量。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-19T10:59:51.380

对于那些想知道我在说什么的人，这里是一个示例 WordPress 插件，它演示了动态函数创建是如何派上用场的。

```
/* Plugin Name: Sample Action Hooks with Dynamic Functions */

// assuming this is an option retrieved from the database
$oActions = array(  'a' => array('interval' => 10, 'value' => 'hi'),
                    'b' => array('interval' => 30, 'value' => 'hello'),
                    'c' => array('interval' => 60, 'value' => 'bye')
            );  

add_action('init', LoadEvents);
function LoadEvents() {
    global $oActions;
    foreach($oActions as $strActionName => $array) {
        eval( 'function ' . $strActionName . '() { 
                    SampleEvents(\'' . $strActionName . '\'); 
                }' 
        );  
        add_action('sampletask_' . md5($strActionName), $strActionName);
        if (!wp_next_scheduled( 'sampletask_' . md5($strActionName)))
            wp_schedule_single_event(time() + $oActions[$strActionName]['interval'], 'sampletask_' . md5($strActionName));                  
    }
}
function SampleEvents($strActionName) {
    global $oActions;
    // just log for a demo
    $file = __DIR__ . '/log.html';
    $current = date('l jS \of F Y h:i:s A') . ': ' . $strActionName . ', ' . $oActions[$strActionName]['value'] . '<br />' . PHP_EOL;
    file_put_contents($file, $current, FILE_APPEND);    
    wp_schedule_single_event(time() + $oActions[$strActionName]['interval'], 'sampletask_' . md5($strActionName));
} 
```

同样的功能也可以通过`__call()`.

```
/* Plugin Name: Sample Action Hooks */

add_action('init', create_function( '', '$oSampleEvents = new SampleEvents;' ));
class SampleEvents {
    public $oActions = array(   'a' => array('interval' => 10, 'value' => 'hi'),
                                'b' => array('interval' => 30, 'value' => 'hello'),
                                'c' => array('interval' => 60, 'value' => 'bye')
                        );
    function __construct() {                
        foreach($this->oActions as $strActionName => $arrAction) {
            add_action('sampletask_' . md5($strActionName), array(&$this, $strActionName));
            if (!wp_next_scheduled( 'sampletask_' . md5($strActionName)))
                wp_schedule_single_event(time() + $this->oActions[$strActionName]['interval'], 'sampletask_' . md5($strActionName));
        }
    }
    function __call($strMethodName, $arguments) {
        // just log for a demo
        $file = __DIR__ . '/log.html';
        $current = date('l jS \of F Y h:i:s A') . ': ' . $strMethodName . ', ' . $this->oActions[$strMethodName]['value'] . '<br />' . PHP_EOL;
        file_put_contents($file, $current, FILE_APPEND);    
        wp_schedule_single_event(time() + $this->oActions[$strMethodName]['interval'], 'sampletask_' . md5($strMethodName));
    }
} 
```

# ios - Xcode - Localizable.strings 仅以英语工作

> ID：12489294
> 
> 赞同：3
> 
> 时间：2012-09-19T05:58:32.357
> 
> 标签：ios, xcode, localization, nslocalizedstring, localizable.strings

我试图让我的 localizable.strings 正常工作，但我不知道如何。我的故事板也是可本地化的，并且可以正常工作：所有按钮和视图控制器都以两种语言正确显示。

但是我以编程方式加载的 NSLocalizedStrings 仅以英文显示。我检查了我的 Localizable.strings，它有 2 种语言：英语和巴西葡萄牙语 (pt-BR)，我没有发现任何问题。

我该如何解决？

提前致谢！

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-09-19T07:41:12.367

试试这个来检查你是否使用了正确的语言和地区：

```
NSLog(@"Language: %@", [[[NSBundle mainBundle] preferredLocalizations] objectAtIndex:0]);
NSLog(@"Region: %@", [[NSLocale currentLocale] objectForKey:NSLocaleCountryCode]); 
```

如果您只是在设备设置中更改区域，则必须关闭并重新启动您的应用程序！

**编辑**：我认为您的实际问题是，您使用“巴西葡萄牙语”作为本地化，您必须使用“葡萄牙语”。

**更新**：在 Xcode 中，您可以在许多本地化之间进行选择，但唯一能在 等中生效的选项`NSLocalizedString()`是您可以在 iPhone 上的 Settings->General->International->Language 中选择的语言

目前完整列表如下：

> • 阿拉伯语 • 加泰罗尼亚语 • 中文（简体） • 中文（繁体） • 克罗地亚语 • 捷克语 • 丹麦语 • 荷兰语 • 英语（美国） • 英语（英国） • 芬兰语 • 法语 • 德语 • 希腊语 • 希伯来语 • 匈牙利语 • 印度尼西亚语 • 意大利语 • 日语• 韩语 • 马来语 • 挪威语 • 波兰语 • 葡萄牙语 • 葡萄牙语（葡萄牙） • 罗马尼亚语 • 俄语 • 斯洛伐克语 • 西班牙语 • 瑞典语 • 泰语 • 土耳其语 • 乌克兰语 • 越南语

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-08-12T14:42:19.443

只是更新@xapslock 对 Swift 的回答。

```
 NSLog("Language: " + NSBundle.mainBundle().preferredLocalizations[0]);
    NSLog("Region: " + (NSLocale.currentLocale().objectForKey(NSLocaleCountryCode) as! String)); 
```

# java - Web 界面如何从服务器中提取数据？

> ID：12489298
> 
> 赞同：0
> 
> 时间：2012-09-19T05:59:06.420
> 
> 标签：java, javascript, html, jdbc, web

我是一名学生，我正在努力学习网络开发。

为了练习，我计划制作一个虚构的学校网站，它的唯一功能是为学校注册学生。学生提供他的名字，当他点击“注册”按钮时，他的名字被插入到数据库中。

所以我制作了 index.html，它只有一个文本框和一个按钮，并在 java 中制作了一个插入函数，将学生的姓名插入数据库。

但是问题来了，web part是怎么调用java写的insert函数的呢？

有没有办法在服务器端使用 java 代码，为 web UI 提供前端的 html/javascript/css？

我知道我发的练习题可以用php做，但是以后想用Metro UI之类的东西做前端，服务器端代码会比较复杂，所以打算保留在爪哇。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-19T06:02:57.100

您需要一个能够执行[Servlets](http://en.wikipedia.org/wiki/Java_Servlet)的服务器。例如，[Apache Tomcat](http://tomcat.apache.org/)。您需要在 Web 服务器上安装它才能在服务器端运行 Java servlet。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-19T06:35:58.910

最简单的方法是 Java Servlet。但是如果这个站点长大了，在我看来，你必须使用诸如spring、jsf之类的框架。

# c# - 我可以从 C++ 或 C# 程序中提取 MSI 包的内容吗？

> ID：12489317
> 
> 赞同：9
> 
> 时间：2012-09-19T06:00:34.370
> 
> 标签：c#, c++, windows-installer, extract

比如说，如果我有一个 MSI 安装文件，我可以从 C# 或 C++ 程序中提取其内容而不安装它吗？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-09-19T12:32:36.860

通常，您可以执行[管理安装](http://msdn.microsoft.com/en-us/library/windows/desktop/aa367541%28v=vs.85%29.aspx)以提取 MSI 的内容。

```
msiexec /a foo.msi TARGETDIR=C:\EXTRACTHERE /qn 
```

如果您不想退出进程，您可以通过[MsiInstallProduct 函数](http://msdn.microsoft.com/en-us/library/windows/desktop/aa370315%28v=vs.85%29.aspx)直接与 MSI 互操作。

szPackagePath [in] 一个以 null 结尾的字符串，它指定 Windows 安装程序包的位置路径。字符串值可以包含 URL、网络路径、文件路径（例如 file://packageLocation/package.msi）或本地路径（例如 D:\packageLocation\package.msi）。

szCommandLine [in] 一个以 null 结尾的字符串，它指定命令行属性设置。这应该是 Property=Setting Property=Setting 格式的列表。有关详细信息，请参阅关于属性。

要执行管理安装，请在 szCommandLine 中包含 ACTION=ADMIN。有关详细信息，请参阅 ACTION 属性。

请注意，虽然您可以自己声明 P/Invoke，但有一个非常好的 .NET 互操作库可用于[Windows Instaler XML](http://wix.codeplex.com/releases/view/93929) ，称为部署工具基础 (DTF)。Microsoft.Deployment.WindowsInstaller 命名空间有一个名为 Installer 的类方法，它公开了一个名为 InstallProduct 的静态方法。这是对 MsiInstallProduct 的直接封装。

使用 DTF 库可以让您远离 Win32 API 的丑陋之处，并在需要的地方正确实现 IDisposable，以确保在需要的地方释放底层的非托管句柄。

此外，DTF 具有带有 InstallPackage 类的 Microsoft.DeploymentWindowwsInstaller.Package 命名空间。此类公开了一个名为 ExtractFiles() 的方法，该方法将文件提取到工作目录。代码示例如下所示：

```
using Microsoft.Deployment.WindowsInstaller;
using Microsoft.Deployment.WindowsInstaller.Package;
namespace ConsoleApplication1
{
    class Program
    {
        static void Main(string[] args)
        {
            using( var package = new InstallPackage(@"C:\test.msi", DatabaseOpenMode.ReadOnly))
            {
                package.ExtractFiles();
            }
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-09-19T06:22:28.737

MSI 文件是一种[COM 结构化存储](http://en.wikipedia.org/wiki/COM_Structured_Storage)。它基本上是一个数据库。你可以在 msdn 上找到一些详细的文档：

*   [这](http://msdn.microsoft.com/en-us/library/aa368250%28VS.85%29.aspx)是数据库API
*   [在这里](http://msdn.microsoft.com/en-us/library/dd942138%28v=prot.13%29.aspx)您可以找到有关复合二进制文件格式的一些信息
*   [这](http://msdn.microsoft.com/en-us/library/cc185688%28v=vs.85%29.aspx)是有关 Windows Installer 的文档

# mfc - 使用 Google Api：PC 版语音转文本

> ID：12489321
> 
> 赞同：2
> 
> 时间：2012-09-19T06:00:48.533
> 
> 标签：mfc, speech-recognition

Google Chrome 提供语音转文本 (STT)，许多智能手机应用程序都提供 STT。它有很好的认可度。

我想要 Visual Studio(MFC) 中的程序，但是没有办法做 STT。如果我使用 Google Speech To Text Api，很容易解决这个问题。

如果没有关于 STT 的公共 google api，请告诉我另一种方法，除了 start。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-19T14:10:34.503

据我所知，Google 没有记录他们的语音 API，也不打算将其用于通用客户端。我相信他们的意图是让语音 API 支持他们的 Android 和 Chrome 产品。也就是说，[是否有人在生产中使用 Google Speech API？](https://stackoverflow.com/questions/7879804/does-anyone-uses-google-speech-api-in-production)谷歌的语音识别技术[有 API 吗？](https://stackoverflow.com/questions/8830203/is-there-an-api-for-googles-speech-recognition-technology).

既然您正在为 Windows 编程，为什么不使用内置的 Windows 语音引擎。您可以使用 .Net 或 Microsoft.Speech 的 System.Speech 功能并安装 Microsoft 提供的免费识别器。Windows 7 包括一个完整的语音引擎。其他的可以免费下载。有一个用于相同引擎的 C++ API，称为 SAPI。请参阅[http://msdn.microsoft.com/en-us/magazine/cc163663.aspx](http://msdn.microsoft.com/en-us/magazine/cc163663.aspx)。或[http://msdn.microsoft.com/en-us/library/ms723627(v=vs.85).aspx](http://msdn.microsoft.com/en-us/library/ms723627(v=vs.85).aspx)。有关 Windows 的 Microsoft 引擎的更多背景信息 [System.Speech.Recognition 和 Microsoft.Speech.Recognition 有什么区别？](https://stackoverflow.com/questions/2977338/what-is-the-difference-between-system-speech-recognition-and-microsoft-speech-rec)

我希望最后一个链接对您有所帮助，这是 .NET 中语音识别的一个简单示例 - [SAPI 和 Windows 7 问题](https://stackoverflow.com/questions/4213035/sapi-and-windows-7-problem)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-12-12T17:32:47.690

您可能会发现：[https](https://gist.github.com/alotaiba/1730160) ://gist.github.com/alotaiba/1730160很有用。基本上，您需要在 POST 请求中将 FLAC 编码的音频文件发送到谷歌服务器。请注意，它只接受 15 秒以内的音频文件（对于简单的语音命令应用程序就足够了）。

我正在研究这样的事情，MS Speech API 不适合我，即使它很好，因为它不支持 Google API 支持的大多数语言（例如波兰语，MS 文本到语音的相同）。

# c# - 要在 app.config 中使用的 Sql Server .SDF 文件的 ProviderName

> ID：12489323
> 
> 赞同：1
> 
> 时间：2012-09-19T06:00:59.397
> 
> 标签：c#, sql-server

我在一个项目中创建了一个数据库文件`Add -> New Item -> Local Database`并为它创建了一个表。

现在我想在`app.config`.

问题是我发现的所有示例代码仅使用代码来创建连接，而不是 app.config。因此我不`providerName`知道应该使用哪个。

那是什么？

```
<add name="DemoDb" providerName="XXXXXX" connectionString="Data Source=ExampleDb.sdf;Persist Security Info=False;"/> 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-19T06:07:10.270

`System.Data.SqlServerCE.4.0`或`System.Data.SqlServerCe.3.5`取决于框架版本

# jsf - “mod”不工作

> ID：12489324
> 
> 赞同：0
> 
> 时间：2012-09-19T06:01:07.533
> 
> 标签：jsf, jakarta-ee, datatable, icefaces

当我应用条件时，我正在使用 .Nowm，`eq`然后它在数据表中工作得很好。
以供参考：

```
<ace:dataTable id="tbl" ..... rowIndexVar="row" 
rowStyleClass="#{((row+2)/2 eq 1)?'chkred':'chknone'}"> 
```

但是当我这样使用`mod`时

```
<ace:dataTable id="tbl" ..... rowIndexVar="row" 
rowStyleClass="#{((row+2)/2 mod 0.0)?'chkred':'chknone'}"> 
```

它抛出一个异常

```
java.lang.IllegalArgumentException: Cannot convert ? of type class java.lang.Double to class java.lang.Boolean 
```

我想知道为什么这段代码会抛出这个异常以及如何在这里使用“mod”？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-19T06:24:18.690

结果的原因`mod`是 double 而不是 boolean ，而您试图将 double 结果视为 boolean

例如`#{10 mod 4}`将导致*2*而不是*true*或*false*

此外，您不能`+`在 EL 表达式中使用

尝试这样的事情

```
<ace:dataTable id="tbl" ..... rowIndexVar="row" 
    rowStyleClass="#{(row mod 2 eq 0)?'chkred':'chknone'}"> 
```

# search-engine - 如何在搜索引擎中获取关键字的官方网站

> ID：12489334
> 
> 赞同：1
> 
> 时间：2012-09-19T06:02:50.103
> 
> 标签：search-engine

我们如何在搜索结果中获得关键字的官方网站？

例如：Bing（美国）在搜索顶部给出最佳结果，并将其作为官方网站，例如搜索 dell，我们将 dell.com 作为官方网站。dadduckgo.com 也是如此。他们在网站旁边显示文字，告诉其官方网站，例如，如果我在 DDG 中搜索 Paris Hilton，我会得到 parishilton.com 作为官方网站。

在确定网站是否是关键字的官方网站时，有哪些方法？他们是否有所有这些的存储库并手动更新？

我们如何才能让官方站点存储库映射关键字？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-01T08:06:16.973

在 google 中使用`related`具有适当 url 的运算符，如下所示：

[相关：dell.com](http://www.google.com/search?hl=en&source=hp&q=related%3adell.com&gbv=2&oq=related%3adell.com&gs_l=heirloom-hp.3...831.831.0.1469.1.1.0.0.0.0.0.0..0.0...0.0...1ac.1.OWBNCX62WoY)

它为您提供戴尔相关公司的官方网站。尽管对于他们中的大多数人来说，它没有明确提及。
不确定您到底在寻找什么，但是通过这种方法并使用 fetcher，您可以构建自己的存储库。
使用您大学网站的 url 进行有趣的测试。

# facebook - 当我在我的网站上发布新文章时，如何通知我的 Facebook 应用程序用户

> ID：12489339
> 
> 赞同：0
> 
> 时间：2012-09-19T06:03:19.570
> 
> 标签：facebook, facebook-graph-api

我有一个文章网站。我为文章网站创建了一个应用程序。现在，当我在我的网站上发布新文章时，我想通知我的应用程序的用户。哪种方法最好？贴到他们的墙上？，那我该怎么做，请帮助我。现在我可以在用户写评论时发布到用户墙上。但现在我正试图通知他们新文章的到来。

请帮助我，

提前致谢

苏尼尔

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-19T09:00:33.220

> 现在，当我在我的网站上发布新文章时，我想通知我的应用程序的用户。哪种方法最好？

在 Facebook 上创建一个粉丝页面，并在那里发布您的更新。然后喜欢您的页面的用户将在他们的提要中看到您的更新。

> 贴到他们的墙上？

这可能被许多用户视为垃圾邮件；只有在用户明确选择加入后，您才应该这样做。

# django - 如何使用多对多关系

> ID：12489340
> 
> 赞同：1
> 
> 时间：2012-09-19T06:03:29.527
> 
> 标签：django, django-models

我在我的应用程序中使用**多对多关系**，我无法将数据输入到默认情况下由 Django 创建的表中以确保多对多关系。它在方法中给出错误（**def Set_Checkout_Attributes （请求）**：）**'Customer_check_attributes'对象没有属性'set_customers'如果我用****set_users**替换set_customers，错误将保持不变。

我使用的模型是：

```
class Customer(models.Model):
    user        =models.OneToOneField(User)
    birthday    =models.DateField()

class Customer_check_attributes(models.Model):
    users       =models.ManyToManyField(User)
    billing_add =models.CharField(max_length=100, blank=True , null= 
```

我的 view.py 是

```
def CustomerRegistration(request):
    if request.user.is_authenticated():
        return HttpResponseRedirect('/profile/')
    if request.method == 'POST':
        form = Registration_Form(request.POST)
        if form.is_valid():
            user=User.objects.create_user(username=form.cleaned_data['username'], email=form.cleaned_data['email'], password = form.cleaned_data['password'])
            user.first_name = form.cleaned_data['first_name']
            user.last_name = form.cleaned_data['last_name']
            user.save()

            customer=Customer(user=user, website=form.cleaned_data['website'], birthday=form.cleaned_data['birthday'], store=form.cleaned_data['store'], welcomemail=form.cleaned_data['welcomemail'])  
            customer.save()

                    return HttpResponseRedirect('/profile/')
        else:
            check_form=Check_Attribute_Form()
            context={'form':form, 'check':check_form}
                return render_to_response('customer/customer_register.html',context , context_instance=RequestContext(request)) 
    else:
        ''' user is not submitting the form, show them a blank registration form '''

            form = Registration_Form()
        check_form = Check_Attribute_Form()
            context={'form':form,'check':check_form}
            return render_to_response('customer/customer_register.html',context , context_instance=RequestContext(request))

####################################### checkout attributes ##################################################

def Checkout_Attributes(request):

    check_form = Check_Attribute_Form()
    context={'form':check_form}
    return render_to_response('customer/checkout.html',context,context_instance=RequestContext(request))

def Set_Checkout_Attributes(request):

    #if request.user.is_authenticated():
        #return HttpResponseRedirect('/checkout/')

    if request.method == 'POST':
            check_form = Check_Attribute_Form(request.POST)
            #if check_form.is_valid():
            customer_check=Customer_check_attributes(billing_add=check_form.data['billing_add'],shipping_add=check_form.data['shipping_add'],payment_method=check_form.data['payment_method'],shipping_method=check_form.data['shipping_method'],reward_points=check_form.data['reward_points'])
            customer_check.save()
            customer_check.set_customers([user.id])
                    return HttpResponseRedirect('/profile/')
        #else:
            #check_form=Check_Attribute_Form()
            #return render_to_response('a.html',{'check_form':check_form} , context_instance=RequestContext(request)) 
    else:
            return render_to_response('f') 
```

我在这里被击中了两天，但我无法解决它请帮助我。

*谢谢*

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-19T06:23:13.073

你可以这样使用：

```
customer_check.users.add(your user instance) 
```

我想你正在尝试使用

```
user.customer_check_set. 
```

但你只是用错了。

如果类 x 有 M2M 字段 y 你可以像这样直接从 x 实例到达 y

> xy

你可以像这样从 y 到达 x ：

> y.x_set

与 django 玩得开心

# ruby-on-rails - Heroku Rails：字符串自动转换为十进制

> ID：12489341
> 
> 赞同：0
> 
> 时间：2012-09-19T06:03:32.920
> 
> 标签：ruby-on-rails, heroku

我在 Heroku cedar 堆栈上有一个 Rails 3.2 应用程序。

我有一个非常简单的模型：

```
# string value_type
# decimal value
class Foo < ActiveRecord::Base
  attr_accessible :value, :value_type

  validates :value_type, presence: true,
                         inclusion: %( ab bc cde )
  validates :value, presence: true,
                    numericality: true
end 
```

当我创建一个新对象并尝试将其保存在本地并在 SQLite 上运行时，它可以正常工作。

当我尝试在 Heroku 上创建一个新对象时，它会将 value_type 视为 BigDecimal，无论我分配给它什么。

有人对如何调试此问题有任何想法吗？

谢谢

# python - CoPATH 自然语言输出的 Pyparsing 解析器无法处理所有记录。为什么？

> ID：12489342
> 
> 赞同：2
> 
> 时间：2012-09-19T06:03:40.657
> 
> 标签：python, parsing, bioinformatics, pyparsing

我有一个小的 pyparsing 脚本，主要由[McGuire 自己](https://stackoverflow.com/a/10857305/2886003)编写，但它似乎错过了实时数据集中的很多记录。例如，它找到并正确解析了 2010 年以来 49 条前列腺切除术记录中的 35 条。为什么其他的被删除了？没有可辨别的模式，不是前 14 个，也不是后 14 个，或者其他的。

pyparsing 确实捕获的记录似乎是一致的，也就是说，它不是一条记录的第一部分与另一条记录的第二部分。

是否有任何特殊字符或模式可能导致 pyparsing 跳过记录？

我的另一个想法是，也许我的一些格式把它搞砸了？我稍微[更改](https://github.com/2grep/CoPATH-Parser/blob/master/MyParser.py)了输出以获得 csv 格式的输出。

你会从哪里开始？

# javascript - 在 Visual Studio 中注释 javascript 方法

> ID：12489353
> 
> 赞同：13
> 
> 时间：2012-09-19T06:05:22.107
> 
> 标签：javascript, visual-studio-2010, comments

有没有办法在 Visual Studio 2010 中使用自动生成的参数在 javascript 中插入 XML 注释片段？

如果我`///`在这里输入...

```
function foo(a, b){ 
```

...它应该变成这个（取决于参数）：

```
function foo(a, b){
    /// <summary>$cursorhere</summary>
    /// <param name="a" type="string">Param a</param>
    /// <param name="b" type="string">Param b</param>
    /// <returns type="function">Return function</returns> 
```

因此，如果我在 C# 代码中，它将类似于片段生成。

***编辑***

*为了澄清，我只想知道是否有快捷方式或现有插件来大致*实现上述功能。

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2012-09-19T13:32:48.183

你可以制作一个代码片段，但这对我来说似乎太麻烦了。我使用[JScript vsdoc Stub Generator](http://visualstudiogallery.msdn.microsoft.com/e122a031-d748-41e9-87b1-7b56d8610d8b)，它会生成如下 XML 注释：

![在此处输入图像描述](../Images/c41a86ed8d0bb08229b90d8507438b06.png)

> 此扩展的目标是提供一种将 vsdocs 添加到 JavaScript 的简单方法，其作用类似于 Visual Studio 提供的其他 XML 注释。当在新行上添加三斜杠（“///”）时，会创建注释存根。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-19T13:30:56.457

我认为您正在寻找 JS intellisense 评论和参考，如下所述：

[http://msdn.microsoft.com/en-us/library/bb514138.aspx](http://msdn.microsoft.com/en-us/library/bb514138.aspx)

基本上它与您的预期非常相似。

更新：抱歉，没有正确阅读您的问题。为自己制作片段很简单，它甚至不是一个插件，只是一个添加到文件系统的 xml 文件。您可以使用片段编辑器：[http](http://snippeteditor.codeplex.com/) ://snippeteditor.codeplex.com/ 使其更容易。

# drupal - two different webform pages share top content

> ID：12489355
> 
> 赞同：0
> 
> 时间：2012-09-19T06:05:29.533
> 
> 标签：drupal, module, drupal-webform

I have a drupal page with two seperate webform contents. Now if i want to add content on top of the actual form, it is mistakedly share across both pages, why is that and how can i keep the content seteprate?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-27T23:45:44.270

Just recreated one of the Webform pages and this time things kept sepparately - weird...

# entity-framework - EF Code First 整数鉴别器列

> ID：12489363
> 
> 赞同：3
> 
> 时间：2012-09-19T06:06:37.193
> 
> 标签：entity-framework, ef-code-first, entity-framework-5

根据这个消息来源

[http://weblogs.asp.net/manavi/archive/2010/12/24/inheritance-mapping-strategies-with-entity-framework-code-first-ctp5-part-1-table-per-hierarchy-tph。 aspx](http://weblogs.asp.net/manavi/archive/2010/12/24/inheritance-mapping-strategies-with-entity-framework-code-first-ctp5-part-1-table-per-hierarchy-tph.aspx)

应该可以让 TPH 鉴别器列是一个整数：

> 此外，更改鉴别器列的数据类型也很有趣。在上面的代码中，我们将字符串传递给 HasValue 方法，但该方法已定义为接受一种对象类型：
> 
> 公共无效 HasValue（对象值）；
> 
> 因此，例如，如果我们将一个 int 类型的值传递给它，那么 Code First 不仅在鉴别器列中使用我们想要的值（即 1 和 2），而且还将**列类型更改为 (INT, NOT NULL)**：
> 
> modelBuilder.Entity() .Map(m => m.Requires("BillingDetailType").HasValue(1)) .Map(m => m.Requires("BillingDetailType").HasValue(2));

但是，当我在代码中执行此操作时，我会看到诸如“1”和“2”之类的鉴别器值，但列类型仍然是

> nvarchar(128)，不为空

实际上可以指定一个整数鉴别器列吗？如果是这样，怎么做？

我确定我将映射指定为*.HasValue(1)*而不是*.HasValue("1")*。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-14T16:45:04.063

```
modelBuilder.Entity<X>()
    .Map<X>(m => { m.Requires("BillingDetailType").HasValue(0).HasColumnType("tinyint"); })
    .Map<Y>(m => { m.Requires("BillingDetailType").HasValue(1); m.MapInheritedProperties(); })
    .Map<Z>(m => { m.Requires("BillingDetailType").HasValue(2); m.MapInheritedProperties(); })
    ; 
```

# javascript - 在多个元素上使用 remove()

> ID：12489364
> 
> 赞同：6
> 
> 时间：2012-09-19T06:06:57.197
> 
> 标签：javascript

this:`document.getElementsByClassName('warningmessage').remove();`如果页面上有多个警告消息元素，则不起作用。

我怎样才能删除该类的所有元素？我必须使用一个`for each`吗？没有删除所有（）的命令吗？

谢谢你的提示！

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-09-19T06:11:45.227

使用纯 JavaScript，您可以这样做：

```
var nodes = document.getElementsByClassName('warningmessage');
for(var i = 0; i < nodes.length; i++){
  nodes[i].parentNode.removeChild(nodes[i]);
} 
```

因此，您首先会获得您感兴趣的节点，然后遍历它们并将它们从其父节点中删除。

可悲的是没有`forEach`方法`NodeList`。但是，您可以这样做：

```
var nodes = document.getElementsByClassName('warningmessage');
[].forEach.call(nodes, function (node) {
  node.parentNode.removeChild(node);
}); 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-09-19T06:11:24.523

您需要使用循环。下面的代码显示了您如何使用“普通”javascript 编写代码。

```
var elements = document.getElementsByClassName('warningmessage'),
    element;
while (element = elements[0]) {
  element.parentNode.removeChild(element);
} 
```

***[工作演示。](http://jsfiddle.net/WCu3a/)*** ​</p>

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-09-19T06:09:44.410

使用 JQuery 会更容易：

```
$('.warningmessage').remove(); 
```

但是，当你不这样做时，它并不难。getElementsByClassName 可以返回项目的节点列表。所以你只需要遍历列表并删除每个项目：

```
var list = document.getElementsByClassName("warningmessage");
for(var i = list.length - 1; i >= 0; i--)
{
    var n = list[i];
    n.parentNode.removeChild(n);
} 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-09-19T06:25:50.950

你可以试试这个

```
var elms= document.getElementsByClassName('warningmessage');
while(elms.length>0){
   for(var i = 0; i < elms.length; i++){
      elms[i].parentNode.removeChild(elms[i]);
   }
}​ 
```

[http://jsfiddle.net/gBwjA/](http://jsfiddle.net/gBwjA/)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-06-10T08:04:41.293

我以前有这个问题，我最终在这个算法中。

```
function removeElement(target) {
    if(target.hasOwnProperty('length')) {
        for(i=0; i<target.length; i++) {
            removeElement(target[i]);
        }
    } else {
        target.parentNode.removeChild(target);  
    }
} 
```

然后你像这样调用函数：

```
removeElement(document.getElementById('the-id')); 
```

或者如果你想删除一个 HTML 元素集合，那么你可以这样调用函数：

```
removeElement(document.getElementsByTagName('tag-name')); 
```

# asp.net - asp.net 中的数据缓存安全问题

> ID：12489368
> 
> 赞同：0
> 
> 时间：2012-09-19T06:07:40.297
> 
> 标签：asp.net, security, caching, data-caching

良好的缓存是加速访问公共数据（网站的所有用户）和经常使用的数据的完美方式。但是那些应该由特定角色（例如管理员）访问的数据呢？

这种缓存安全吗？使用数据缓存时是否需要执行任何与安全相关的操作？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-19T06:19:53.687

从缓存访问敏感数据的安全问题与从任何其他来源（例如数据库）访问敏感数据时的安全问题完全相同。

您只需要在将其公开给用户之前实施适当的授权。

# jquery - 从 Post 获取文件名

> ID：12489369
> 
> 赞同：1
> 
> 时间：2012-09-19T06:07:56.267
> 
> 标签：jquery, post

抱歉，不完全理解发生了什么，但会尝试解释，想在 jquery 中使用 post 发送文件名，但在通过数组时不能使用破折号或文件扩展名。

在 HTML 文件中使用 filename_ 传递值

```
<div id="filename_file-name.txt"></div> 
```

在 PHP 文件中，试图获取数组中值为 file-name.txt 的部分

```
$thefilename_array = $_POST['filename'];
$key = 0;
$the_selected_filename_from_array = $thefilename_array[$key]; 
```

如果文件名的格式没有像 filename 而不是 file-name.txt 这样的破折号，这实际上是有效的

这就是我想要得到的

```
Array
(
    [0] => file-name.txt
) 
```

感谢您的帮助，如果不清楚我要做什么，将尝试解释更多。

# safari - 缩小 Safari 浏览器的大小时，用于更高分辨率 CSS 规则的媒体查询不会被删除，但在重新加载时可以正常工作？

> ID：12489371
> 
> 赞同：1
> 
> 时间：2012-09-19T06:08:05.883
> 
> 标签：safari, media-queries

[这是我创建的网站](http://unc.site90.net)。顺便说一句，这是我的第一个；）。

当调整 Safari 浏览器的大小时，它给了我这个。

![](../Images/14156d9c81d8e09e24b3771fe8c2c54c.png).

我如何解决它？

# javascript - 带有部分停止的粘性页脚

> ID：12489374
> 
> 赞同：0
> 
> 时间：2012-09-19T06:08:10.333
> 
> 标签：javascript, jquery, scroll

我正在尝试固定页脚，直到使用[ScrollToFixed](https://github.com/bigspotteddog/ScrollToFixed)插件在页面上看不到文章的整个正文。但它似乎没有粘住正确的元素：

```
$(function(){
    var collection = $('header');
    var offset = 0;
    $.each(collection, function(index, marker) {
        offset += $(marker).parent().offset().top;
        console.log(offset);
        $(marker).scrollToFixed({
            limit: offset,
            bottom: 0
        });
    });
}); 
```

[http://jsfiddle.net/C8953/1/](http://jsfiddle.net/C8953/1/)

它更像是带有部分停止的粘性标题，但这次是页脚。提前感谢您的任何提示！

**编辑**：它现在有点用，但只适用于第一个元素：

[http://jsfiddle.net/C8953/2/](http://jsfiddle.net/C8953/2/)

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-09-19T06:26:10.013

您可以仅使用 css 来完成（我一直使用此代码来修复底部的页脚 div）

```
< div class="footer" >< / div >
.footer{
    height: 20px;
    position: fixed;
    bottom: 0px;
} 
```

除了上述代码之外，IE 6 css 修复

```
.footer{
    position:absolute;
    bottom:auto;
    top:expression(eval(document.documentElement.scrollTop+document.documentElement.clientHeight-this.offsetHeight-(parseInt(this.currentStyle.marginTop,10)||0)-(parseInt(this.currentStyle.marginBottom,10)||0)));
} 
```

请删除 div 代码中多余的空间（我不知道如何将 HTML 代码放在 stackoverlow.com 中）。

# javascript - 从不同div中的输入值填充textarea

> ID：12489379
> 
> 赞同：1
> 
> 时间：2012-09-19T06:08:36.943
> 
> 标签：javascript, forms, html, input, textarea

我正在为我的网站制作上传部分。当用户想要上传新的应用程序时，他们需要填写一个表格，其中放置版本号等。

可以上传 27 种不同的应用程序。为此我做了一个while循环

例子：

```
<select id="type">
<option value="choose" selected>choose here</option>
<?php

require("Function/applist.php");
while($showtablerow = mysql_fetch_array($showtablequery_result))
{
echo "<option value=".$showtablerow[0].">".$showtablerow[0]."</option>";
}

?>  
</select>   
</div>
<div id="choose" class="add" style="display:none;"></div>

<?php

require("Function/applist.php");
while($showtablerow = mysql_fetch_array($showtablequery_result))
{

    echo "<div class='add' id=".$showtablerow[0]." style='display:none;'><h2 id='amx-label'>".$showtablerow[0]."</h2>
    <div id='formadd' style='opacity:1;'>

    <form name='addamx' id='addamx' method='post'>

        <div id='version' class='uploadform' style='opacity:1;'>
            Version: <input style='opacity:1;' required type='text' name='versie' id='versie' width='3' onchange='process1()' ><br>

        </div>
        <div id='date' class='uploadform' style='opacity:1;'>
            Release Date(yyyy-mm-dd): <input required type='date' style='opacity:1;' size='10' maxlength='10' name='date'  id='date'>

        </div>
    <div id='build' style='opacity:1;'>
            Build By: <input required type='text' style='opacity:1;' size='5' maxlength='25' name='build'  id='build' >

        </div>
        <div id='platform' style='opacity:1;'>
            Platform: <span>32 Bit:</span><input required type='radio' style='opacity:1;' id='platform'  name='platform' value='32bit'>
                  <span>64 Bit:</span><input required type='radio' style='opacity:1;' id='platform'  name='platform' value='63bit'>
        </div>
        <div id='application'>
        <input type='hidden' name='app' value=".$showtablerow[0]." />
        </div>  
        <div id='notes' style='opacity:1;'>
            Release Notes: <textarea id='notess' name='test' onblur='process1()'></textarea>
        </div>

        <div id='uploadfooter' style='opacity:1;'>
            <button type='submit' id='uploadamx' name='uploadamx'>Upload
        </div>  
    </form>

    </div>

</div>";
}
?> 
```

在选择框中，他们选择他们要上传的应用程序，并根据该选择获得一个表格。

在文本区域中，他们编写了发行说明。

我希望他们在填写版本号时自动将该版本号归档在文本区域中。

我有点使用以下javascript：

```
function process1() {
var appname = document.getElementById('type').value;
var version = document.getElementById('versie').value;
var textvalue = "changes for " + appname + " version " + version;

document.getElementById("notess").value = textvalue;

} 
```

该功能仅适用于第一个表单 div 当我在第二个 div 上尝试它时，textarea 保持为空，并且第二个 div 的版本号从第一个 div 插入到 textarea

我如何制作该功能，以便 textarea 仅填充该表单中的版本号？有任何想法吗？

编辑***

AboQutiesh 是一个很好的启动方式，它唯一需要的调整是他写道： onblur='process1(".$showtablerow[0].")' result is onblur='process1(argument)' 这不起作用，因为参数需要 onblur='process1('argument')' 因为它在一个 while 循环中我不能只放 '' 因为它会破坏整个 onblurethansk 我的一个大学，他将我指向 ascii 表解决方案：

我将其更改为 onblur=process1('".$showtablerow[0]."')

（删除 ; 在 asccii 的末尾，否则它不会在此处正确显示）感谢启动 AboQutiesh

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-19T06:18:27.613

您需要在 php 中为每个文本区域提供不同的 ID，如下所示：

```
 <div id='notes' style='opacity:1;'>
        Release Notes: <textarea id='notess_".$showtablerow[0]." name='test' onblur='process1(".$showtablerow[0].")'></textarea>
    </div> 
```

在js中

```
 function process1(appId) {
     var appname = document.getElementById('type').value;
     var version = document.getElementById('versie').value;
     var textvalue = "changes for " + appname + " version " + version;

    document.getElementById("notess_"+appId).value = textvalue;
} 
```

我认为这就是你需要的

# iphone - 获取示例视频 .MOV 文件

> ID：12489382
> 
> 赞同：12
> 
> 时间：2012-09-19T06:09:12.220
> 
> 标签：iphone

我需要一个用于测试 iphone 应用程序的示例视频文件。谁能告诉我可以从哪里下载并添加到我的资源文件的站点。

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2012-09-19T06:11:11.450

有关示例视频，请参阅[苹果示例视频](http://support.apple.com/kb/HT1425)链接。

# iphone - 我们是否需要提示用户自动续订订阅到期？

> ID：12489384
> 
> 赞同：1
> 
> 时间：2012-09-19T06:09:17.193
> 
> 标签：iphone, ios, in-app-purchase, auto-renewing

我已经为应用内购买实施了自动续订订阅。

在登录时，我正在验证收据但是如果我收到响应为代码 21006 的状态订阅已过期，下一步应该是什么。

我是否需要提示用户“您要立即续订”还是自动续订虽然它发送 21006 代码？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-19T06:19:53.447

**自动更新**，因为它的名字是自动的，只要您的用户清楚他购买了**自动更新**订阅，您就不必每次都通知或询问。我查看了苹果文档，没有提到你必须这样做。

不要忘记，当订阅续订时，用户会从 iTunes 获得收据。

**但** 毕竟我认为这是一项很好的服务，可以通知（而不是询问）您的用户订阅已续订。作为客户，我将不胜感激。

# android - 使用 Camera 高质量图像调用之前的 Heavy 活动被破坏（Android）

> ID：12489388
> 
> 赞同：0
> 
> 时间：2012-09-19T06:09:52.203
> 
> 标签：android, android-activity, android-camera, unity3d, samsung-mobile

我现在正在开发 Unity 应用程序，并想使用相机。

我认为这是一个内存问题，我想知道如何在`onActivityResult`调用图像之前限制相机捕获图像的大小。

（对于不了解 Unity 活动的人，只需将其视为“GL 等的繁重活动”并提出任何想法。任何帮助将不胜感激。Unity 实际上是一个游戏引擎。）

活动流程是这样的 `UnityTestActivity(Extends UnityActivity) > GetBitmapFromAndroidActivity(extends Activity)` ，我从“GetBitmapFromAndroidActivity”活动中调用相机捕获意图。

这是与 Unity(Heavy) Activity 无关的情况：

当我使用较小尺寸（即.640 x 800）`onActivityResult`的三星相机时，在之后调用`onStop`，一切正常。当我使用具有最大尺寸(3264*2448) 的三星相机时，在 之后`onStop`，重新创建并`onCreate`调用前一个 (UnityTestActivity) 。'GetBitmapFromAndroidActivity' 活动也被重新创建，然后`onactivityresult`被调用。有点奇怪。

这是我的问题：

1.  是正常的 android 内存不足的情况还是统一的情况？
2.  有没有什么想法可以在达到之前限制相机捕获图像的大小`onActivityResult`？我做了`MediaStore.EXTRA_SIZE_LIMIT`但根本没有效果..是视频之一吗？
3.  任何三星相机众所周知的内存短问题？
4.  有没有可以查看“UnityAndroidActivity”源代码或类似的网站？

我正在开发 SamsungGalaxyNote，最大图像尺寸为 3264x2448。我知道著名的三星相机空指针案例[链接](http://kevinpotgieter.wordpress.com/2011/03/30/null-intent-passed-back-on-samsung-galaxy-tab/)，但事实并非如此，因为我从不调用`onActivityResult`.

感谢阅读。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-11T06:20:17.227

自我回复。我自己实现了自定义相机。它从未解决。从类似统一的繁重活动中捕获的高质量相机从未成功。

# load-data-infile - 加载数据查询错误

> ID：12489390
> 
> 赞同：0
> 
> 时间：2012-09-19T06:10:16.050
> 
> 标签：load-data-infile, phpquery

这条线有什么问题

```
$load ="LOAD DATA INFILE $inputFile INTO TABLE $tableName FIELDS TERMINATED BY ',' LINES TERMINATED BY '\r\n' IGNORE 1 LINES";

echo $load;

mysql_query($load); 
```

回声结果是；

```
LOAD DATA INFILE appendpb.csv INTO TABLE appendpb_csv FIELDS TERMINATED BY ',' LINES TERMINATED BY ' ' IGNORE 1 LINES 
```

错误是；

```
You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'appendpb.csv INTO TABLE appendpb_csv FIELDS TERMINATED BY ',' LINES TERMINATED B' at line 1 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-19T06:18:43.200

根据[MYSQL LOAD DATA Reference](http://dev.mysql.com/doc/refman/5.1/en/load-data.html)，它应该在输入文件周围有单引号：

```
$load ="LOAD DATA INFILE '$inputFile' INTO TABLE $tableName FIELDS TERMINATED BY ',' LINES TERMINATED BY '\r\n' IGNORE 1 LINES"; 
```

最终看起来像这样

```
LOAD DATA INFILE 'appendpb.csv' INTO TABLE appendpb_csv FIELDS TERMINATED BY ',' LINES TERMINATED BY ' ' IGNORE 1 LINES 
```

假设文件的路径是正确的。

# unit-testing - 测试驱动开发是单元测试的一种形式吗

> ID：12489394
> 
> 赞同：1
> 
> 时间：2012-09-19T06:10:47.740
> 
> 标签：unit-testing, tdd

我们公司正在改进代码质量和交付代码时采用的流程。我的问题与单元测试有关，我想收集有关当您被要求实现功能时所采用的流程的信息。

TDD 是单元测试的一种形式吗？根据我在 TDD 中的理解，您首先编写测试（失败），编写代码，然后运行应该通过的测试。可能是代码会进行外部方法调用。但是，当我们首先编写测试时，我们应该如何知道所需的存根呢？

当您构建您的应用程序之前的版本时，您在构建中包含哪些类型的测试？构建运行您的集成测试还是只运行您的单元测试？

除了 TDD，你还写过其他类型的测试吗？抱歉，如果问题略有失真。非常感谢您在如何进行开发方面的经验。谢谢

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-19T09:08:49.713

TDD 远不止单元测试——所以我想说单元测试只是 TDD 的一部分。我认为整个方法论可以包括对软件开发中任何过程的结果创建测试（表达对正确行为的期望/要求）。无论是编写代码、构建脚本、部署脚本、数据库脚本、数据导入/导出/转换……无论您需要做什么，您都应该问自己：“我如何证明这有效？我可以为此自动化测试吗？ "

举个例子：一些经常被忽视的东西，因为它超出了单元测试的范围，但它是一个非常有效的测试，并且在开发过程中对前端加载很重要的是部署。

如果一个软件开发不能轻易地部署到生产环境而不需要大量的努力和改变（对软件或环境架构），那么提前知道这一点很重要，而不是在它必须上线前一周。一旦你确定了这个过程，有一种测试方法来确保它被正确部署不是很好吗？

当您了解该过程时 - 为什么不编写脚本并使其自动化？如果您知道要求是必须部署它，为什么不在部署之前为此编写一个测试呢？

我之前已经说过，但我会再说一遍——我在这个主题上找到的最好的资源是**Growing Object-Oriented Software, Guided by Tests——**它是Kent Beck 签名系列的一部分。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-19T13:29:37.237

[TDD 与测试无关](http://www.makinggoodsoftware.com/2009/11/21/tdd-is-not-about-testing/)。TDD*使用*测试来驱动代码的设计。TDD*产生*测试是通过首先编写测试来设计代码的一个愉快的副作用，但它与测试无关：它不是一种测试方法，目的也不是产生测试。

> 测试驱动开发是单元测试的一种形式吗？

不，这是一种*设计*方法。

> 根据我对 TDD 的理解，您首先编写测试（失败），编写代码，然后运行应该通过的测试。

你错过了一个非常重要的步骤。你先写你的测试，你写你的代码，直到你的测试通过——然后你**重构**. 测试允许您*安全地*重构，确保在您调整设计时所需的行为继续有效。这些测试还引导您使用*可测试*的代码，促进更小的方法、更短的参数列表以及比其他方法引导您更简单的整体设计。

> 除了 TDD，你还写过其他类型的测试吗？

当我这样做时，通常表明我未能正确执行 TDD（但它肯定会发生）。我们有单元测试和用户验收测试；两者都可以在代码之前编写，但有时我们的用户验收测试是在开发周期的后期编写的。他们不应该是，但有时他们是。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-20T15:44:22.737

TDD 是关于在最初的 Red-Green-Refactor 循环的 5 分钟左右内进行*设计。*但这可以说是永远的*测试*，因为没有什么可设计的了——您的 TDD 测试然后成为完美测试工具的一部分，以检测由进一步发展引起的回归。所以是的，我想你可以说测试驱动开发是单元测试的一种形式:)

> 但是，当我们首先编写测试时，我们应该如何知道所需的存根呢？

TDD 通常需要（快速）事先建模会话，您可以在其中充实 SUT 将与之协作的大图类。

但是，您无需详细了解这些合作者的工作方式。对于模拟，您基本上会一厢情愿地认为，当您稍后对它们进行 TDD 时，它们的实现会正确运行，因此现在您可以只专注于 SUT。

> 当您构建您的应用程序之前的版本时，您在构建中包含哪些类型的测试？构建运行您的集成测试还是只运行您的单元测试？

当您练习持续集成时，您的单元测试应该每次都运行，因此理论上您可以采用任何（非失败）构建并将其用作发布构建。

但是，您可能还想在发布版本之前运行自动化或手动集成/验收测试。例如，GUI 通常不容易进行单元测试，因此验收/集成测试是跟踪其中错误的好方法。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-09-19T07:39:13.853

您在这里有几个问题，我会尝试按逻辑顺序解决它们

**TDD 是单元测试的一种形式吗？**

我说“是”，从某种意义上说，它创建了单元测试，即使它不是使用 TDD 的唯一好处。关于评论员强调但您的问题中未提及的主题：TDD 不仅确保测试覆盖率和文档化（良好的测试是低级代码文档的最佳形式之一）。使用 TDD 会迫使您做出某些设计决策，通常会改进整体应用程序设计。

**你写其他测试吗？**

好吧，我不写任何其他单元测试。TDD 的重点是代码的开发与测试的开发并行。通过在一个循环中编写软件 - 单个测试，只有足够的代码通过它，您可以确定您的测试记录了您从代码中需要的所有功能和行为，并且您确保代码是可测试的（您必须编写它那样做TDD）。不需要额外的单元测试

您应该使用其他类型的测试。首先想到的是集成测试，但还有其他的，比如验收测试。如果你有这些自动化，你会更容易。不是你应该编写验收测试——应该是你的客户/利益相关者，你应该在编写它们的技术部分帮助他。您可能对 Fitnesse [http://fitnesse.org/](http://fitnesse.org/)感兴趣- 它是一个帮助非技术人员构建验收测试的工具。

**关于打桩？**

如果没有具体的例子，很难讨论这个问题。我现在只能说 - 一次只编写一个测试代码。如果你这样做了，你可能不会遇到这样的情况：你有一个复杂的类并考虑如何存根它的复杂依赖关系。

**构建中应该包含哪些测试？**

我说 - 如果可能的话，所有这些！

# java - 拖放 JTableHeader

> ID：12489395
> 
> 赞同：4
> 
> 时间：2012-09-19T06:10:54.000
> 
> 标签：java, swing, jtable, drag-and-drop, jtableheader

我正在使用`JTable`++ `JScrollPane`。`DefaultTableModel`

我需要在`JTableHeader`. 我想将列标题拖动到我的组件并根据拖动的列做一些工作。

我已经尝试过`setTransferHandler()`，`JTableHeader`但拖动仍然无法正常工作。

我可以从哪里开始？是否可以实现 DnD`JTableHeader`并保存“移动列”功能（可在 'out-of-the-box' 中使用`JTable`）？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-19T08:32:39.437

**已解决**：问题已结束。我已经使用 dnd 实现了

```
DragSource.getDefaultDragSource().createDefaultDragGestureRecognizer(tableHeader, ...) 
```

有一件事要提： dnd 破坏了默认的“重新排列列”行为。我的解决方法是

```
 public void dragGestureRecognized(DragGestureEvent dge) {
        if (dge.getDragAction() == DnDConstants.ACTION_COPY)
            return;
        try {
            dge.startDrag(null, new MyTransferable());
        } catch (InvalidDnDOperationException e2) {
            System.out.println(e2);
        }
    } 
```

这样我就可以用 ctrl-pressed 重新排列列。这对我来说已经足够了。

# c# - 您的浏览器的cookie功能被关闭。请开启

> ID：12489400
> 
> 赞同：0
> 
> 时间：2012-09-19T06:11:42.023
> 
> 标签：c#, xaml

我正在尝试通过发布数据来登录[Gmail 。](http://www.gmail.com/)

这是我的代码：

```
 HttpWebRequest hi = (HttpWebRequest)HttpWebRequest.Create("https://www.google.com/accounts/ServiceLoginAuth?service=mail");
     hi.Method = "POST";
     //string PostData = "continue=https%3A%2F%2Fmail.google.com%2Fmail%2F%3Ftab%3Dwm&service=mail&rm=false&dsh=-28214021908461826&ltmpl=default&scc=1&GALX=6-CDla8snug&pstMsg=1&dnConn=&checkConnection=youtube%3A1271%3A1&checkedDomains=youtube&timeStmp=&secTok=&Email=EMAILADDRESS4u&Passwd=PASSWORD&signIn=Sign+in&rmShown=1";
     hi.ContentType = "application/x-www-form-urlencoded";
     byte[] post = UnicodeEncoding.UTF8.GetBytes(PostData);
     Stream stream = await hi.GetRequestStreamAsync();
     stream.Write(post, 0, PostData.Length);
     WebResponse response = await hi.GetResponseAsync();
     string pageSource;   
     using (StreamReader sr = new StreamReader(response.GetResponseStream()))
     {
         pageSource = sr.ReadToEnd();
     }
     mywebview1.NavigateToString(pageSource); 
```

但是当我尝试运行它时，我得到一个错误。我该如何解决这个问题？

```
Your browser's cookie functionality is turned off. Please turn it on. 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-19T06:17:41.987

我们已经有一个与此相关的问题...

看一看..

[在 WebBrowser 中使用 WebRequest cookie](https://stackoverflow.com/questions/9443483/using-webrequest-cookie-in-webbrowser)

[在 WebBrowser 中使用来自 CookieContainer 的 cookie](https://stackoverflow.com/questions/4185171/use-cookies-from-cookiecontainer-in-webbrowser)

[http://social.msdn.microsoft.com/Forums/en-US/csharpgeneral/thread/00a29544-8cf4-4de2-8e7c-e7931b0e2221](http://social.msdn.microsoft.com/Forums/en-US/csharpgeneral/thread/00a29544-8cf4-4de2-8e7c-e7931b0e2221)

# sql-server - 在 FUNCTION 中设置 DATEFIRST

> ID：12489404
> 
> 赞同：11
> 
> 时间：2012-09-19T06:11:54.970
> 
> 标签：sql-server, tsql, date

我想在我的函数中设置 DATEFIRST，但这是不允许的。

```
SET DATEFIRST 1 
```

我可以在 SP 中添加代码并从函数中调用 SP，但我并不热衷于这样做。

我可以在调用函数之前设置 DATEFIRST，但我也不热衷于这样做。

还有其他解决方法吗？

**编辑**

下面是我想在我的 FUNCTION 中使用的代码来返回当月的总工作日。但由于我的 DATEFIRST，我无法将此代码添加到 FUNCTION

```
DECLARE @my int
DECLARE @myDeduct int
DECLARE @day INT
DECLARE @mydate DATETIME
DECLARE @TotalDays INT

SET @mydate = GETDATE()

SET @myDeduct = 0
IF (@@DATEFIRST + DATEPART(DW, @mydate)) % 7 not in (0,1)
SET DateFirst 1 -- Set it monday=1 (value)

--Saturday and Sunday on the first and last day of a month will Deduct 1
IF (DATEPART(weekday,(DATEADD(dd,-(DAY(@mydate)-1),@mydate))) > 5)
SET @myDeduct = @myDeduct + 1

IF (DATEPART(weekday,(DATEADD(dd,-(DAY(DATEADD(mm,1,@mydate))),DATEADD(mm,1,@mydate)))) > 5)
SET @myDeduct = @myDeduct + 1

SET @my = day(DATEADD(dd,-(DAY(DATEADD(mm,1,@mydate))),DATEADD(mm,1,@mydate)))

Set @TotalDays = (select (((@my/7) * 5 + (@my%7)) - @myDeduct))

Select @TotalDays 
```

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2014-08-26T15:52:33.363

代替

```
SET DATEFIRST 1 
```

你可以做

```
SELECT (DATEPART(weekday, GETDATE()) + @@DATEFIRST - 2) % 7 + 1 
```

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2012-09-19T07:23:54.427

我通常的解决方法是使用“已知良好”的日期进行比较。

例如，假设我需要检查日期是否为星期六。我不依赖`DATEFIRST`或语言设置（用于使用`DATENAME`），而是说：

```
DATEPART(weekday,DateToCheck) = DATEPART(weekday,'20120714') 
```

我知道 2012 年 7 月 14 日是星期六，所以我在不依赖任何外部设置的情况下执行了检查。

* * *

该表达式`(DATEPART(weekday,DateToCheck) + @@DATEFIRST) % 7`将始终产生值 0 表示周六，1 表示周日，2 表示周一，等等。

所以，我建议你创建一个表：

```
CREATE TABLE WorkingDays (
    NormalisedDay int not null,
    DaysInMonth int not null,
    WorkingDays int not null
) 
```

填充此表是一项一次性的练习。`NormalisedDay`将是我上面给出的表达式计算的值。

要计算`DaysInMonth`给定的特定日期，您可以使用以下表达式：

```
DATEDIFF(day,
      DATEADD(month,DATEDIFF(month,0,DateToCheck),0),
      DATEADD(month,DATEDIFF(month,'20010101',DateToCheck),'20010201')) 
```

现在您的函数所要做的就是查找表中的值。

（当然，所有`DaysInMonth`28 的行都会有 20 作为结果。只有 29,30 和 31 的行需要一些工作才能产生）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-12-20T18:12:04.047

如果您需要星期一作为第一天，请遵循此代码段

```
declare @MyDate datetime = getdate()
                   select CASE WHEN DATEPART(DW,@MyDate) = 1   
                            THEN 7 
                          WHEN DATEPART(DW,@MyDate) <= 7 
                            THEN DATEPART(DW,@MyDate) - 1                            
                     END 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2019-02-07T15:46:18.367

另一种方法是明确指定一周的第一天作为参数，并避免依赖于`@@DATEFIRST`设置。您可以使用以下公式在您的函数中实现这一点：

```
(DATEPART(dw, GETDATE()) + @@DATEFIRST + 6 - @WeekStartDay) % 7 + 1 
```

`@WeekStartDay`您希望系统在一周的第一天在哪里（从 1 到 7 表示从星期一到星期日）。

我已经将它包装到下面的函数中，以便我们可以轻松地重用它：

```
CREATE FUNCTION [dbo].[GetDayInWeek](@InputDateTime DATETIME, @WeekStartDay INT)
RETURNS INT
AS
BEGIN
    --Note: @WeekStartDay is number from [1 - 7] which is from Monday to Sunday
    RETURN (DATEPART(dw, @InputDateTime) + @@DATEFIRST + 6 - @WeekStartDay) % 7 + 1 
END 
```

示例用法： `GetDayInWeek('2019-02-04 00:00:00', 1)`

它等同于以下（但独立于 DATEFIRST 设置）：

```
SET DATEFIRST 1
DATEPART(dw, '2019-02-04 00:00:00') 
```

# php - mac上的Sqlserv扩展

> ID：12489406
> 
> 赞同：2
> 
> 时间：2012-09-19T06:12:15.690
> 
> 标签：php, sql-server, osx-mountain-lion

我的公司使用 sqlserv 扩展连接到 MSSQL 数据库。之所以选择此扩展而不是 mssql 扩展，是因为 Microsoft 正在积极维护它，并且根本不再维护 mssql 驱动程序。我的同事一直在 Windows 环境中工作，所以他只需下载正确的 DLL 文件，瞧，sqlserv 可用。因为我在 Mac OSX 10.8.1 上运行，所以我不分享这种奢侈品。

所以基本上问题是：有没有人知道 .so 文件形式的 sqlserv php 扩展？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-19T07:41:01.960

您不能在 Windows 以外的任何设备上运行 SQLSRV 扩展，如下所述：

[http://php.net/manual/en/sqlsrv.installation.php](http://php.net/manual/en/sqlsrv.installation.php)

然而，即使你可以，我强烈建议你远离 SQLSRV 扩展，因为它非常有缺陷且不发达。使用 PDO 会更好！

我花了几天的时间试图确定要使用哪个扩展，经过对 stackoverflow 的大量研究和问题，很明显 PDO 是连接到 MSSQL 数据库的唯一现实解决方案。更不用说您拥有的附加功能！

*尝试并执行存储过程，使用 SQLSERV 扩展返回多个记录集以及输出参数！只是可以用 PDO 用几行代码完成但不能用 SQLSERV 完成的众多功能之一。*

此外，PDO 更快！

# datetime - 是否可以在学说 2 的混合查询中将日期水合为 DateTime？

> ID：12489408
> 
> 赞同：0
> 
> 时间：2012-09-19T06:12:29.207
> 
> 标签：datetime, symfony, doctrine-orm, dql

我有一个像这样的混合查询：

```
SELECT e, j.date_field FROM AcmeBundle:SomeEntity e JOIN e.joined_entity j 
```

该查询返回一个包含对象的数组和一个包含日期的字符串，但我需要将日期水合为 DateTime 实例。

是否可以在查询中指定它而不构建自定义水合器？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-14T03:22:16.330

如果不构建定制的水合器，这是不可能的。

[如本错误报告](http://www.doctrine-project.org/jira/browse/DDC-657)所述，这已在最近的 Doctrine 版本中得到修复。

# javascript - 按照 dom 的顺序优雅地制作重叠的 DIV

> ID：12489409
> 
> 赞同：0
> 
> 时间：2012-09-19T06:12:35.533
> 
> 标签：javascript, html, css, knockout.js

```
<div id="cards">
  <div class="card">card 1</div>
  <div class="card">card 2</div>
</div>

#cards { position: relative }
.card { position: absolute; left: 0 } 
```

我试图制作一副纸牌。

但是，当我使用上述方式时，“卡片2”成为最前面的一张。

是否有任何优雅的方法可以按 dom 的顺序制作重叠的 DIV？

ps我使用knockout.js作为我的框架和模板引擎。我考虑过用jQuery将后一张卡片添加到#cards中，这意味着我必须放弃模板引擎中的“foreach”，或者以相反的顺序存储我的模型. 那将是丑陋的。

ps2 手动设置 div 的 z-index 等方式是最后的选择。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-19T06:23:57.663

这就是 DOM 的工作方式，DOM 树中较低的元素将与较高的元素重叠，除非您使用 z-indexing。

使用它来发挥你的优势并颠倒你的卡片顺序而不是使用黑客和复杂的代码，它最终会出错，并且可能无法在不同的浏览器中按你的意图显示。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-19T06:16:02.193

最后定义的 DOM 顺序位于顶部。覆盖它的一种方法是使用 css`z-index`属性。

唯一的其他选择是将卡片重新排序为符合您偏好的顺序。

# asp.net - 从小程序读取body中发送的参数到web api控制器的post方法

> ID：12489416
> 
> 赞同：0
> 
> 时间：2012-09-19T06:13:19.923
> 
> 标签：asp.net, json, asp.net-mvc-3, asp.net-web-api, json.net

考虑下面的类

```
public class StController:apicontroller {

    public void PostBodyMethod() {
        HttpRequestMessage request=this.request;
     //How to read the header and body parameters
    }
} 
```

applet 将 header 和 body 参数都发送到 post 方法。如何使用 HttpRequestMessage 对象检索与 webapi 控制器内部的 post 方法一起发送的信息？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-19T06:49:58.470

如果 body 参数是 JSON 对象，您只需在 Post 方法中传递 Model 参数即可。*Web API 默认支持 json*。您可能需要阅读[此](http://www.asp.net/web-api/overview/formats-and-model-binding/json-and-xml-serialization)内容。

要读取 HttpRequest 中的标头，您可以使用：

```
var headers = ControllerContext.Request.Headers; 
```

示例代码：

```
class Model 
{ 
    public int Id { get; set; } 
    public int Hj { get; set; }  
} 

public class StController : ApiController { 

    public void Post(Model model) { 

     //How to read the header and body parameters
     var headers = ControllerContext.Request.Headers;
    } 
} 
```

# ruby-on-rails - 胖模型，activeModel还是在控制器中？

> ID：12489421
> 
> 赞同：0
> 
> 时间：2012-09-19T06:14:00.410
> 
> 标签：ruby-on-rails, ruby-on-rails-3, database-design, activerecord, activemodel

我的问题与数据建模有关。

我们有一个得分模型，它链接到 Division 模型和 Element 模型。在 Division 和 Element 模型之间存在着一种习惯关系。必须根据元素模型的属性（标准属性）评估分数。

现在我们要介绍“问题”的概念。一个问题是每个未通过标准的分数。（附加信息：随着时间的推移将记录多个分数，存在不同类型的分数。需要对 score_types 和日期范围进行过滤）

建模问题概念的最佳方法是什么？

1.  每次请求问题视图时只需计算控制器中的问题
2.  引入一个问题模型（它实际上并不包含来自分数和元素信息的任何新信息
3.  创建一个无表模型，如 ActiveModel。
4.  以上都不是，因为这是一个新手问题，您应该像某某那样做...（填空）

任何帮助将非常感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-20T05:15:19.117

在不知道您的代码库是什么样子并假设问题模型只会存储关联分数的 id 的情况下，我将建议在您的分数模型上使用范围。您可以创建 ARel 查询（或查询）来获得所需的分数，而无需添加太多代码。查看[Rails Guide on Active Record Querying - Scopes 部分](http://guides.rubyonrails.org/active_record_querying.html#scopes)了解更多信息。

如果您需要问题模型来做任何分数不能做的事情，我会考虑创建一个实际的模型（是否持续存在是另一个决定）。

# c# - 使用 opencvsharp 的内存泄漏

> ID：12489422
> 
> 赞同：1
> 
> 时间：2012-09-19T06:14:09.360
> 
> 标签：c#, opencvsharp

所以我正在尝试使用[opencvsharp](http://code.google.com/p/opencvsharp/)创建一个增强现实跟踪器，但我遇到了内存泄漏问题。

我正在尝试从相机图像（这是我的标记）中识别矩形我很确定有问题的代码是

```
 CvSeq<CvPoint> firstcontour = null;

        List<MarkerRectangle> rectangles = new List<MarkerRectangle>();

        CvMemStorage storage = Cv.CreateMemStorage(0);
        CvMemStorage storagepoly = Cv.CreateMemStorage(0);

        IplImage gsImageContour = Cv.CreateImage(Cv.GetSize(thresholdedImage), thresholdedImage.Depth, thresholdedImage.NChannels);
        //find contours
        Cv.Copy(thresholdedImage, gsImageContour, null);
        int contourCount = Cv.FindContours(gsImageContour, storage, out firstcontour, CvContour.SizeOf,
             ContourRetrieval.CComp, ContourChain.ApproxSimple, Cv.Point(0, 0));

        CvSeq<CvPoint>  polycontour = firstcontour.ApproxPoly(CvContour.SizeOf, storagepoly, ApproxPolyMethod.DP, 4, true); 
```

我相当确定有问题的行是：

```
 int contourCount = Cv.FindContours(gsImageContour, storage, out firstcontour, CvContour.SizeOf, ContourRetrieval.CComp, ContourChain.ApproxSimple, Cv.Point(0, 0)); 
```

和/或

```
 CvSeq<CvPoint>  polycontour = firstcontour.ApproxPoly(CvContour.SizeOf, storagepoly, ApproxPolyMethod.DP, 4, true); 
```

但是我不确定我可能做错了什么，因为它们没有存储在任何全局变量中，我希望在方法结束时释放内存。

可能是[这个](http://code.google.com/p/opencvsharp/issues/detail?id=45)错误，在这种情况下，我怀疑我缺乏修复它的技术专长，因为除了 uni 的几门课程外，我没有使用过非托管代码。但是，我尝试实施它在附加信息下列出的修复程序，但没有奏效，所以我想这可能不是我的问题的原因。

# objective-c - 如何在按钮单击时在同一窗口中加载新视图？

> ID：12489425
> 
> 赞同：2
> 
> 时间：2012-09-19T06:14:21.287
> 
> 标签：objective-c, cocoa-touch

我有一个带有按钮的视图控制器。我希望在按下按钮时将新视图加载到我的**视图控制器上。**它不会替换现有视图，我希望它小于屏幕并在我点击小视图时隐藏。

它应该如何在代码中实现？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-19T06:35:39.130

```
- (IBAction)button:(id)sender 
{
UIView *view2=[[UIView alloc]initWithFrame:CGRectMake(0,0,200,200)];
[self.view addSubview:view2];
UITapGestureRecognizer *Tap = [[[UITapGestureRecognizer alloc] initWithTarget:self action:@selector(Tapview)] autorelease];
[view2 addGestureRecognizer:Tap];
}

-(void)Tapview
{
[view2 removeFromSuperview];
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-19T06:34:19.610

像这样将 Tap Gesture 添加到 self.view：

```
 UITapGestureRecognizer *oneFinger = 
 [[[UITapGestureRecognizer alloc] initWithTarget:self action:@selector(oneFingerAction:)] autorelease];

// Set required taps and number of touches
[oneFinger setNumberOfTapsRequired:1];
[oneFinger setNumberOfTouchesRequired:1];

// Add the gesture to the view
[[self view] addGestureRecognizer:oneFinger]; 
```

在 .h 文件中添加一个 BOOL 标志；在 ViewDidLoad 方法中添加：

```
 flag = FALSE; 
```

现在我假设你有 UIView *smallView 像这样添加到屏幕上：

```
[self.view addSubView:smallView];
flag = TRUE;
smallView.center = self.view.centre; 
```

现在当点击 self.view 时点击手势动作调用

```
- (void)oneFingerAction:(UITapGestureRecognizer*)sender
{
   if(sender.view == self.view)
   { 
     if(flag){
       if(smallView)
       {
         [smallView removeFromSuperView];
       }
     }
   }
} 
```

# jquery - Jquery 代码清理

> ID：12489427
> 
> 赞同：2
> 
> 时间：2012-09-19T06:14:53.330
> 
> 标签：jquery

有没有办法不必写这个'两次'见下文#start_date和#end_date的函数完全相同。

```
<script type="text/javascript">

    jQuery(function($){

        $("#start_date").datepicker({
            showButtonPanel: true,
            minDate: 1,
            dateFormat: 'dd/mm/yy'
        });

        $("#end_date").datepicker({
            showButtonPanel: true,
            minDate: 1,
            dateFormat: 'dd/mm/yy'
        });     

    });

</script> 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-19T06:16:23.527

```
jQuery(function($){

    $("#start_date, #end_date").datepicker({
        showButtonPanel: true,
        minDate: 1,
        dateFormat: 'dd/mm/yy'
    }); 

}); 
```

[http://jsfiddle.net/LWQCE/](http://jsfiddle.net/LWQCE/)

或者使用一个类：

```
(function($){

    $(".myDatePickers").datepicker({
        showButtonPanel: true,
        minDate: 1,
        dateFormat: 'dd/mm/yy'
    }); 

}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-19T06:16:30.733

您可以在 jQuery 中使用逗号来选择多个 id。

```
<script type="text/javascript">

    jQuery(function($){

        $("#start_date, #end_date").datepicker({
            showButtonPanel: true,
            minDate: 1,
            dateFormat: 'dd/mm/yy'
        }); 

    });

</script> 
```

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2012-09-19T06:17:24.767

我不会担心这种少量的代码重复。此外，也许您决定在一周内更改其中一个属性，那么您会很高兴没有进行过多的重构。

尤其是在这个非常简单（而且非常容易阅读）的代码示例中，我很想应用[三](http://en.wikipedia.org/wiki/Rule_of_three_%28computer_programming%29)法则重构经验法则，它指出“代码可以复制一次，但是当相同的代码被使用 3 次时，它应该被提取到一个新的过程中”。

# javascript - 如果 else 语句没有到达 else 部分

> ID：12489431
> 
> 赞同：0
> 
> 时间：2012-09-19T06:15:37.217
> 
> 标签：javascript, jquery

所以我正在制作一个可以在两个图像之间切换的图像切换功能。更具体地说，它切换 div 的背景图像。

我使用 jquery .data() 函数作为计数器，其中一个 = 第一个图像，两个 = 切换图像。

这是我正在使用的算法：

1.  单击按钮启动功能。
2.  当我点击 div 时，如果数据等于“一”，则替换图像并将数据设置为“二”。
3.  当我再次单击图像时，将图像设置回原始图像并将数据设置为“一”，以便该功能可以重复。

它似乎在第一次尝试时替换了图像，就像在第一次“if”中一样，但在第二次尝试（else 部分）时它不会再次替换图像。它似乎永远不会到达 else 部分，即使第一个 if 应该返回 false 然后转到 else。

任何帮助将不胜感激。此外，我知道有一个 .toggle() 函数和其他图像切换方法，但我必须使用这个，因为这只是一个较大程序的一小部分，已编辑。

这是代码：

```
<!DOCTYPE html>
<html>
    <head>
        <script src="jquery.js"></script>
        <link rel="stylesheet" type="text/css" href="mouseovertestlayout.css" />
        <script>
        function startEdit()
        {     
            $("div").click(function () 
            {                           

                if (($(this).data('kangaroo')) == "one")
                {
                    $(this).css('background-image', "url(image2.png)");
                    $(this).data('kangaroo',"two"); 
                }
                else
                {
                    (this).css('background-image', "url(image1.png)");                  
                    $(this).data('kangaroo',"one");
                }               
            });
        }
        </script>
    </head>
    <body>
        <div class="container"  data-kangaroo="one" ></div>
        <button  onclick="startEdit()"> </button> 
    </body>
</html> 
```

这是我的 .css

```
.container
{
    width: 20px;
    height: 20px;
    line-height: 0;
    border-style:solid;
    border-width:1px;
    border-color:red;
    padding: 20px;
    background-repeat:no-repeat;    
    background-image:url('image1.png');
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-19T06:18:24.157

您的“其他”第一行中有一个错字是 $ 缺少`(this)`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-19T06:19:50.780

您在 else 子句中缺少 $ 。

固定的：

```
function startEdit() {     
        $("div").click(function () 
        {                           

          if (($(this).data('kangaroo')) == "one")
          {
             $(this).css('background-image', "url(image2.png)");
             $(this).data('kangaroo',"two");    
          }
          else
          {
             $(this).css('background-image', "url(image1.png)");                  
             $(this).data('kangaroo',"one");
           }               
    });
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-19T06:29:51.343

What you want to do can be done much shorter if you use a class and `toggleClass`.

**Demo:** [http://jsbin.com/anazoq/1/edit](http://jsbin.com/anazoq/1/edit)

HTML:

```
<div class="container"></div>
<button>Toggle</button> 
```

CSS:

```
div {
    ...
    background: url(image1.png) no-repeat;
}
.switch {
    background-image: url(image2.png);
} 
```

JavaScript:

```
$('button').click(function() {
    $('div').toggleClass('switch');
}); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-19T06:18:47.697

像这样试试

```
if (($(this).attr("data-kangaroo")) == "one")  //Here is the edit
{
       $(this).css('background-image', "url(image2.png)");

        $(this).data('kangaroo',"two");

    }
else
    {
        $(this).css('background-image', "url(image1.png)");     //Here put "$" before (this)             
        $(this).data('kangaroo',"one");
    } 
```

# forms - 简单的表单验证失败

> ID：12489433
> 
> 赞同：0
> 
> 时间：2012-09-19T06:16:19.767
> 
> 标签：forms, validation

我不是程序员，但我正在尝试扩展开源 Ajax 联系表单以包含额外字段。

有两个文件；[index.php](http://pastebin.com/jMq28ihy)和[send.php](http://pastebin.com/LpvaHQi3)。

send.php 包含简单的表单验证，并包含一个测试以确保“电话”字段不为空。无论为电话号码输入什么值，此测试都会失败。

为什么是这样？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-19T06:21:51.673

我不是 PHP 方面的专家，但您像这样调用了所有其他参数

```
$_POST['param name'] 
```

和这样的电话参数

```
$POST['phone'] 
```

注意失踪

```
_ 
```

字符。会是这样吗？

# python - 使用 Python 重新格式化 CSV 并存储数据

> ID：12489435
> 
> 赞同：0
> 
> 时间：2012-09-19T06:16:27.300
> 
> 标签：python, csv

我知道必须有几十种“正确”的方法来做到这一点，但我想听听你对以下最佳实践/最聪明的方法的看法。

我有一个看起来像这样的 CSV：

```
Date,Num,name,Aging,Open Balance
07/16/2012,12-001270,8,1,"-8,934.75"
07/18/2012,12-2429,24,34,2.00
07/18/2012,12-2428,24,58,85.00
07/18/2012,12-2420,8,58,"4,381.90" 
```

我需要它看起来更像这种格式：

```
name,num,date,0-30,31-60,61-90,91+,total
8,12-001270,7/16/2012,"-8,934.75",0,0,0,"-8,934.75"
8,12-2420,07/18/2012,0,"4,381.90",0,0,"4,381.90"
24,12-2428,07/18/2012,0,2,85,87 
```

问题是：在 python 中是否有一个即插即用的解决方案可以以这种方式存储数据？

我将获取`Aging`列数据并将其分解为不同的范围并重新格式化数据，如图所示。

最有效的方法是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-19T08:54:08.683

几位让你开始......

**读取文件并访问值**

```
with open('somefile.csv') as fin:
    csvin = csv.DictReader(fin)
    for row in csvin:
        print 'Person {name} had a balance of {Open Balance}'.format(**row) 
```

**格式化您的金额，使其可用**

```
import re

s = "-8,934.75"
try:
    amount = float(re.sub('[^-.0-9]', '', s))
except ValueError as e:
    pass # wasn't valid for some reason? do something sensible 
```

**“分桶”数据**

```
from bisect import bisect

def age_band(age, upto=[30, 60, 90], desc=['0-30', '31-60', '61-90', '91+']):
    if not age >= 0:
        return '*invalid*'
    return desc[bisect(upto, age)]

for age in [31, 99, 65, 12, -1]:
    print age, age_band(age) 
```

# javascript - svg - 绘制空心矩形（矩形甜甜圈）？

> ID：12489436
> 
> 赞同：1
> 
> 时间：2012-09-19T06:16:29.377
> 
> 标签：javascript, svg

任何人都可以在不使用任何 js lib（例如 Raphael）的情况下帮助我用 svg 绘制空心矩形吗？
基本上，它应该与“甜甜圈形状”相同，但为矩形。
像这样的东西：

![在此处输入图像描述](../Images/7320d6d5a913e2cf6c1f80ed96028025.png)

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-19T09:16:30.370

[干得好](http://jsfiddle.net/longsonr/na6hA/)

```
<svg xmlns:svg="http://www.w3.org/2000/svg" xmlns="http://www.w3.org/2000/svg" version="1.1" viewBox="0 0 2624 1462" width="1312" height="736" id="svg2">

  <path d="M 80,112 l 528,0 0,528 -528,0 z m -64,-64.000003 656,0 0,656.000023 -656,0 z" fill="gold" stroke="black" fill-rule="evenodd" />

</svg> 
```

路径在一个方向向外弯曲，另一个向内弯曲，偶数填充规则切断了中间。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-09-19T12:51:09.803

这是一个[例子](http://jsfiddle.net/5Gw28/)：

```
<svg viewBox="0 0 400 400" shape-rendering="crispEdges">
    <path d="M10,10h100v100h-100zM20,20v80h80v-80z" fill="yellow" stroke="black"/>
</svg> 
```

# android - EditText 不接受数字输入

> ID：12489447
> 
> 赞同：3
> 
> 时间：2012-09-19T06:17:57.567
> 
> 标签：android, android-layout, android-widget

我的 android 应用程序中有一个 EditText 视图。我的 EditText 没有将整数值作为输入，而是将所有其他值作为输入。以下是我的 EditText 视图。

```
<EditText
android:id="@+id/txtSearchItems"
android:layout_width="75dp"
android:layout_height="wrap_content"
android:visibility="visible"
android:hint="Search"
android:textSize="14dp"
android:layout_alignParentLeft="true" 
android:layout_marginTop="2dp"
android:layout_centerHorizontal="true">
</EditText> 
```

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-10-10T09:29:26.797

## 关于我曾经遇到并怀疑的可能问题是：EditText 可能包含在 XML 布局文件中，并且布局文件将用于 Dialog 实例。当 Dialog 实例的 onKeyListener 返回一些无效的默认值（即不相关键的“return true”）时，就会出现问题。在这种情况下，您的 EditText 会表现得很奇怪。该场景的示例代码是

```
Dialog d=new Dialog(context);
    d.setContentView(R.layout.mylayout);
    d.setOnKeyListener(new OnKeyListener() {

                    @Override
                    public boolean onKey(DialogInterface dialog, int keyCode,
                            KeyEvent event) {
                        Log.i("onkey", keyCode + " == Onkey");
                        if (keyCode == KeyEvent.KEYCODE_BACK) {
                                return true;
                        }
                        return true;  // !!! this is wrong it should be return false;
                    }
                });
            } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-19T07:04:04.213

试试这个？

```
android:inputType="number"
android:digits="0123456789" 
```

如果可行，您可以在您希望允许的数字中添加字母。这是您可以尝试的所有输入类型的[方便列表。](http://developer.android.com/reference/android/widget/TextView.html#attr_android%3ainputType)它们主要更改软键盘上显示的内容。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-09-19T06:25:43.213

您需要添加`android:inputType="number"`您的 xml，如下所示，

```
<EditText
android:id="@+id/txtSearchItems"
android:layout_width="75dp"
android:layout_height="wrap_content"
android:visibility="visible"
android:hint="Search"
android:textSize="14dp"
android:layout_alignParentLeft="true" 
android:layout_marginTop="2dp"
android:layout_centerHorizontal="true"
android:inputType="number">    <------------- this line added
</EditText> 
```

# c# - 获取 Quartz.NET 2.0 中的所有工作

> ID：12489450
> 
> 赞同：19
> 
> 时间：2012-09-19T06:18:23.553
> 
> 标签：c#, scheduled-tasks, quartz.net

我已经在服务器上设置了我的 AdoJobStore，并且我的所有作业都运行良好。现在我正在编写一个远程客户端来管理我的所有工作。

安排新工作很简单，但我似乎无法在 2.0 版中检索现有工作的列表。我找到的所有资源都做了如下的事情。

```
var groups = sched.JobGroupNames;
for (int i = 0; i < groups.Length; i++)
{
    string[] names = sched.GetJobNames(groups[i]);
    for (int j = 0; j < names.Length; j++)
    {
        var currentJob = sched.GetJobDetail(names[j], groups[i]);
    }
} 
```

我面临的问题是 GetJobNames 已被删除，并且查看源代码已被移至 JobStoreCMS 继承自的基类 JobStoreSupport。然而，该方法已被标记为受保护，因此无法从外部访问。

在 2.0 中如何检索工作列表？

* * *

## 回答 #1

> 赞同：47
> 
> 时间：2012-09-19T09:47:50.717

您可以使用获取正在执行的作业列表：

```
var executingJobs = sched.GetCurrentlyExecutingJobs();
foreach (var job in executingJobs)
{
    // Console.WriteLine(job.JobDetail.Key);
} 
```

或获取有关计划作业的所有信息（示例控制台应用程序）：

```
private static void GetAllJobs(IScheduler scheduler)
{
    IList<string> jobGroups = scheduler.GetJobGroupNames();
    // IList<string> triggerGroups = scheduler.GetTriggerGroupNames();

    foreach (string group in jobGroups)
    {
        var groupMatcher = GroupMatcher<JobKey>.GroupContains(group);
        var jobKeys = scheduler.GetJobKeys(groupMatcher);
        foreach (var jobKey in jobKeys)
        {
            var detail = scheduler.GetJobDetail(jobKey);
            var triggers = scheduler.GetTriggersOfJob(jobKey);
            foreach (ITrigger trigger in triggers)
            {
                Console.WriteLine(group);
                Console.WriteLine(jobKey.Name);
                Console.WriteLine(detail.Description);
                Console.WriteLine(trigger.Key.Name);
                Console.WriteLine(trigger.Key.Group);
                Console.WriteLine(trigger.GetType().Name);
                Console.WriteLine(scheduler.GetTriggerState(trigger.Key));
                DateTimeOffset? nextFireTime = trigger.GetNextFireTimeUtc();
                if (nextFireTime.HasValue)
                {
                    Console.WriteLine(nextFireTime.Value.LocalDateTime.ToString());
                }

                DateTimeOffset? previousFireTime = trigger.GetPreviousFireTimeUtc();
                if (previousFireTime.HasValue)
                {
                    Console.WriteLine(previousFireTime.Value.LocalDateTime.ToString());
                }
            }
        }
    } 
} 
```

**我使用了[这里](https://github.com/adometry/QuartzNetManager/blob/master/ClickForensics.Quartz.Manager/QuartzScheduler.cs)找到的代码。**

**更新**：

如果有人感兴趣，可以从我的 GitHub[存储库](https://github.com/Leftyx/QuartzNetXmlJobs)下载示例代码。

有人问如何完成工作清单。
我不认为有一个简单的方法。
想到的唯一选择是使用作业（或触发器）侦听器。

我在 github 上上传了一个[示例](https://github.com/Leftyx/QuartzNetWithJobListener)，我的主程序可以在其中接收已完成作业的事件。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2015-07-26T00:08:01.960

从 Quartz.NET 2.2.1 版开始，您可以使用`GroupMatcher<>.AnyGroup()`, 这里作为扩展方法实现`IScheduler`：

```
public static List<IJobDetail> GetJobs(this IScheduler scheduler)
{
    List<IJobDetail> jobs = new List<IJobDetail>();

    foreach (JobKey jobKey in scheduler.GetJobKeys(GroupMatcher<JobKey>.AnyGroup()))
    {
        jobs.Add(scheduler.GetJobDetail(jobKey));
    }

    return jobs;
} 
```

这将为您`IJobDetail`提供每个计划作业的 s 列表。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2014-04-10T20:55:58.803

如果您想获得重复间隔、重复计数等，请将 ITrigger 转换为 ISimpleTrigger

```
private void LogInfo(IScheduler scheduler) 
{
    log.Info(string.Format("\n\n{0}\n", Scheduler.GetMetaData().GetSummary()));

    var jobGroups = scheduler.GetJobGroupNames();
    var builder = new StringBuilder().AppendLine().AppendLine();

    foreach (var group in jobGroups)
    {
        var groupMatcher = GroupMatcher<JobKey>.GroupContains(group);
        var jobKeys = scheduler.GetJobKeys(groupMatcher);

        foreach (var jobKey in jobKeys)
        {
            var detail = scheduler.GetJobDetail(jobKey);
            var triggers = scheduler.GetTriggersOfJob(jobKey);

            foreach (ITrigger trigger in triggers)
            {
                builder.AppendLine(string.Format("Job: {0}", jobKey.Name));
                builder.AppendLine(string.Format("Description: {0}", detail.Description));
                var nextFireTime = trigger.GetNextFireTimeUtc();
                if (nextFireTime.HasValue)
                {
                    builder.AppendLine(string.Format("Next fires: {0}", nextFireTime.Value.LocalDateTime));
                }
                var previousFireTime = trigger.GetPreviousFireTimeUtc();
                if (previousFireTime.HasValue)
                {
                    builder.AppendLine(string.Format("Previously fired: {0}", previousFireTime.Value.LocalDateTime));
                }
                var simpleTrigger = trigger as ISimpleTrigger;
                if (simpleTrigger != null)
                {
                    builder.AppendLine(string.Format("Repeat Interval: {0}", simpleTrigger.RepeatInterval));
                }
                builder.AppendLine();
            }
        }
    }

    builder.AppendLine().AppendLine();
    log.Info(builder.ToString); 
} 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2020-03-11T13:29:48.763

对于**Quartz.NET 3.0 版**，您可以使用

这将向您显示quartz.net 3.x 中所有正在运行的作业和触发器

```
using Quartz;
using Quartz.Impl;
using Quartz.Impl.Matchers;

    class Program
    {
            var allTriggerKeys = scheduler.GetTriggerKeys(GroupMatcher<TriggerKey>.AnyGroup());
            foreach (var triggerKey in allTriggerKeys.Result)
            {
             var triggerdetails =   scheduler.GetTrigger(triggerKey);
             var Jobdetails = scheduler.GetJobDetail(triggerdetails.Result.JobKey);

                Console.WriteLine("IsCompleted -" + triggerdetails.IsCompleted + " |  TriggerKey  - " + triggerdetails.Result.Key.Name + " Job key -" + triggerdetails.Result.JobKey.Name);

            }
} 
```

**我使用了** [这里](http://programmingkeys.blogspot.com/2018/01/get-all-jobs-and-triggers-details-in.html)找到的代码。

# java - 如何使用 NSIS 脚本在运行时读取属性文件？

> ID：12489459
> 
> 赞同：0
> 
> 时间：2012-09-19T06:19:23.777
> 
> 标签：java, nsis

*我的Java*项目中有一个*.property*文件。在该属性文件中有超过 20 个值。现在我想解析该属性文件并在运行时（即运行安装文件时）更改特定的属性值。我使用了以下代码

 *```
Section
    ${ConfigWrite} "C:resource\conf.properties" SET WEBSERVICE.URL=http://localhost:8080 $R0
    ;$R0=CHANGED
SectionEnd 
```

运行exe文件后，属性文件中添加的属性如下

```
 SETSERVER.URL=http://localhost:8080 
```

我不知道为什么 SET 单词出现在这个变量之前？

我的要求：

1.  我需要在运行时（在安装*exe*文件时）为***SERVER.URL属性赋值？***

**   我需要替换***SERVER.URL***属性的值。但是使用上面的方法在该文件中添加了一个新属性。* 

 *我在 Windows 平台的*Eclipse中使用了**NSIS 插件。*

 ** * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-19T07:29:21.823

调用宏时缺少一些引号，也不需要指定`SET`（在帮助的示例中，`SET`实际上是 DOS 批处理文件中命令的一部分），我想最好在磁盘驱动器之后的路径。

该文档指出语法是：

```
${ConfigWrite} "[File]" "[Entry]" "[Value]" $var 
```

因此，您的电话必须是：

```
${ConfigWrite} "C:\resource\conf.properties" "WEBSERVICE.URL" "=http://localhost:8080" $0 
```

请注意参数如何在参数名称`WEBSERVICE.URL`和值之间拆分`=http://localhost:8080`（注意开头的等号）。

您也可以使目录动态化：

```
${ConfigWrite} "$INSTDIR\resource\conf.properties" "WEBSERVICE.URL" "=http://localhost:8080" $0 
```***

# .htaccess - htaccess ModRewrite URLs 从 Index.php 文件中提取内容，保持 URL 不变

> ID：12489463
> 
> 赞同：1
> 
> 时间：2012-09-19T06:19:44.327
> 
> 标签：.htaccess, mod-rewrite

我正在尝试运行 mod_rewrite 规则来加载 index.php 的内容，而不管输入的 URL 是什么。然后在 index.php 文件中，我将处理返回正确页面或输出 404 页面。这是出于 SEO 的目的，以允许一个不错的 URL，例如： [http](http://www.example.com/product) ://www.example.com/product 而不是 [http://www.example.com/?p=product](http://www.example.com/?p=product)

我在我的博客的一个子文件夹上工作，但是当试图在一个新项目上测试它时，我得到的只是 500 个错误，就像所有 url 一样。

这是现有的htaccess：

```
RewriteEngine on
RewriteBase /products/
RewriteCond %{HTTP_HOST} ^www.danclarkie.co.uk/products [NC]
RewriteRule ^(.*)$ http://danclarkie.co.uk/products/$1 [L,R=301]
RewriteCond %{REQUEST_URI} !/admin.php$
RewriteRule .* index.php 
```

任何帮助^_^

担

# java - 我可以在内存映射文件中寻找一个位置吗？

> ID：12489470
> 
> 赞同：0
> 
> 时间：2012-09-19T06:20:33.437
> 
> 标签：java, io, nio

我希望在 Java NIO 中有一个内存映射文件，这样我就可以随机移动文件中的任何位置来读取它的任何部分，就像一个 seek 方法。是否可以使用内存映射文件，就像使用 RandomAccessFile 一样。

注意：文件将处于读/写模式。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-19T07:09:48.870

假设您的文件小到可以放入一个 ByteBuffer，您可以使用`position(int)`. 另一种选择是随机访问缓冲区`Xxx value = getXxx(offset)`或`putXxx(offset, value)`

如果您的内存超过 2 GB，您将需要一个 ByteBuffer 数组或列表来映射整个内存（假设您有 64 位 JVM）

# javascript - jQuery val() 问题

> ID：12489471
> 
> 赞同：-3
> 
> 时间：2012-09-19T06:21:07.243
> 
> 标签：javascript, jquery

我正在使用 .val() 来设置 HTML 中的值。我的代码是这样的：

```
function first(){
var a=1;
$("#pg_textbox").val(a);
} 
```

现在这段代码在我隐藏的 HTML id 'pg_textbox' 中设置 vales：

```
<input type="hidden" id="paging_textbox"> 
```

在第二个函数调用中，它是这样的：

```
function secound(){
var b=2;
$("#pg_textbox").val(b);
} 
```

现在当我使用：

```
$("#pg_textbox").val(); 
```

要获得'#pg_textbox'的值，我得到的输出是

```
2 
```

它正在取代价值观。我希望我的输出如下：

```
1,2 
```

如何在不替换值的情况下获得此输出？

谢谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-19T06:24:16.557

当您调用 时`.val(b)`，您会重置文本框的整个值。调用`.val()`只会检索文本框中的内容，它不会回忆过去的值。

您需要更新您的设置器：

```
$('#pg_textbox').val( $('#pg_textbox').val() + ',' + b); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-19T06:24:20.780

检查是否已经有一个值，如果有，连接这些值...

```
var newVal = 2;
var prevVal = $("#pg_textbox").val();
if (prevVal == '')
{
  $("#pg_textbox").val(newVal);
}
else
{
  $("#pg_textbox").val(prevVal + ',' + newVal);
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-19T06:24:45.523

试试这个代码

```
 var b=1;
    var old_val=$("#pg_textbox").val();
    $("#pg_textbox").val(old_val+" ,"+b); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-19T06:26:01.953

这就是你所追求的。

```
var a = 1,
    b = 2;

$("#pg_textbox").val(a + ', ' + b); 
```

尽管我的代码在技术上是正确的，但我无法想象它有任何实际应用。由于您想输出一些逗号分隔的值，因此在数组中输入值可能更明智，*例如*，

```
var yourValues = [1,2],
    output = yourValues.toString();
$('#pg_textbox').val(output);​ 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-09-19T06:32:21.933

您的意思是您正在向输入类型添加值，并且不希望它们被替换？

那么这就是你需要做的。

您需要创建另一个隐藏的输入类型来存储总和。

```
<input type="hidden" id="backup"/>

function first(){
var a=1;
$("#pg_textbox").val(a);
$("#backup").val(a);
}

function second(){ // Your second function
var b=1;
var sum = $("#backup").val()+b;
var old_val = $("#pg_textbox").val();
$("#pg_textbox").val(old_val+','+sum);
} 
```

另外，你可以继续这个系列的第三，第四，等等......

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-09-19T06:32:27.270

更新这个：

```
var b=2;
$('#pg_textbox').val( $('#pg_textbox').val() + ',' + b); 
```

# linux - Linux内存使用量远大于所有应用程序使用的内存总和？

> ID：12489472
> 
> 赞同：1
> 
> 时间：2012-09-19T06:21:28.163
> 
> 标签：linux, memory, operating-system

我正在使用“free -m -t”命令来监控我的 linux 系统并获取

```
 total       used       free     shared    buffers     cached

Mem:         64334      64120        213          0        701      33216

-/+ buffers/cache:      30202      34131

Swap:          996          0        996

Total:       65330      64120       1209 
```

这意味着用户进程使用了​​ 30GB 的物理内存。

但是当使用 top 命令并按内存使用排序时，所有应用程序进程只使用 3~4GB 的内存。

为什么会发生这种不一致？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-19T06:29:39.253

As I understand it, the amount of memory that top shows as used includes cold memory from older processes that are not running anymore. This is due to the fact that in case of a restart of said process, the required data may still be in memory, enabling the system to start the process faster and more efficiently instead or always reloading the data from disk.

or, in short, linux generally frees cold data in memory as late as possible.

Hope that clears it up :)

# java - 为什么我使用 java 命令调用程序时不使用 java Xmx 选项？

> ID：12489473
> 
> 赞同：2
> 
> 时间：2012-09-19T06:21:43.920
> 
> 标签：java, performance, jvm

> **可能重复：**
> [为什么 xmlx 和 top 之间存在内存使用差异？](https://stackoverflow.com/questions/11922418/why-there-is-memory-usage-difference-between-xmx-and-top)

我运行一个java程序使用

```
java    -Xms32m -Xmx64m  xxxclassname 
```

但是从 top 命令，我知道有一个近 200MB 的内存。为什么它不小于 Xmx 选项中指定的 64MB？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-19T06:25:09.033

这

```
-Xmx64m 
```

flag 只控制*堆大小*。Java 需要比这更多的内存才能正常运行。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-09-19T06:27:03.060

您正在指定垃圾收集堆的最大大小。Java 内存消耗还有其他方面，包括本机代码（不仅是 JVM，还包括任何加载了 JNI 的本机库）和[PermGen](https://blogs.oracle.com/jonthecollector/entry/presenting_the_permanent_generation)空间。（PermGen 空间可以稍微调整一下，但你真的不想把它限制太多，否则你的程序会崩溃。）

# android - MyApp 为 Facebook 登录配置错误

> ID：12489476
> 
> 赞同：0
> 
> 时间：2012-09-19T06:22:20.187
> 
> 标签：android, facebook

> **可能重复：**
> [应用程序被错误配置为 Facebook 登录：Android Facebook 集成问题](https://stackoverflow.com/questions/12382558/app-is-misconfigured-for-facebook-login-android-facebook-integration-issue)

我使用 Facebook SDK 在 MyApp 上连接和发布内容。一切正常，直到我安装 Facebook 应用程序然后登录它。之后，我再次登录 MyApp... 撞！发生错误：

Facebook 对话框显示错误：“MyApp 为 Facebook 登录配置错误。按确定返回应用程序而不将其连接到 Facebook”。

当我退出 Facebook 应用程序然后登录 MyApp 时，它仍然显示上述错误。多么奇怪的问题！这就像一个错误。

我猜 Single Sign On 会让 MyApp 打开 FacebookApp 的对话框。它使某些东西更加安全，但是为什么我登录后会产生上述错误？我认为他们使用相同的会话。如何让他们独立行动？

我尝试设置 Android KeyHash 并启用单点登录，但没有任何变化。好的，我禁用所有这些，然后重试，没有任何变化。

我读[了这个](https://stackoverflow.com/questions/12382558/app-is-misconfigured-for-facebook-login-android-facebook-integration-issue?lq=1)，但没有任何帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-24T20:28:48.270

我相信您在尝试登录时会收到 Facebook 错误。你必须自己解决这个问题！:(...但是首先要找出问题所在。尝试记录错误（在`onFacebookError`方法中，添加日志条目并记录错误详细信息），然后您应该能够看到究竟出了什么问题的描述；这应该是一个好的开始。

# php - ModX 和 PDO：使用 PHP 变量进行查询

> ID：12489479
> 
> 赞同：0
> 
> 时间：2012-09-19T06:22:31.247
> 
> 标签：php, mysql, pdo, modx

我是 PDO 的新手，并且有以下代码从表单中接收 2 个 PHP 变量并在查询中使用它们：

```
$loginemail = $_REQUEST['loginemail'] ;
$loginpassword = $_REQUEST['loginpassword'] ;

$logincheck = "SELECT * FROM `ft_gameusers` WHERE `email` = '$loginemail' AND `password` = '$loginpassword'";

$query = $modx->query($logincheck);

if ($query) {
    while ($row = $query->fetch(PDO::FETCH_ASSOC)) {

 echo $row['email'];

    }
} 
```

问题是，如果我将电子邮件和密码变量硬编码到 MySQL 查询中，它就可以正常工作——它似乎不像 PHP 变量那样喜欢它们。

有谁知道我做错了什么？（PS：这是 ModX Revo 中的一个片段）

编辑：表单标签：

```
<form id="loginform" action="mysite.com/formprocess" method="post">

Email:
<input type="text" id="loginemail" name="loginemail">
Password:
<input type="password" id="loginpassword" name="loginpassword">
<button type="submit">Login</button>
</form> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-20T06:59:57.147

这是使用 PDO/xPDO 绑定参数的方法：

```
$loginemail = $_REQUEST['loginemail'] ;
$loginpassword = $_REQUEST['loginpassword'] ;

$logincheck = "SELECT * FROM `ft_gameusers` WHERE `email` = :loginemail AND `password` = :loginpassword";

$credentials = array(
    ':loginemail' => $loginemail,
    ':loginpassword' => $loginpassword,
);

$query = new xPDOCriteria($modx,$logincheck,$credentials);
if ($query->stmt && $query->stmt->execute()) {
    while ($row = $query->stmt->fetch(PDO::FETCH_ASSOC)) {
        echo $row['email'];
    }
} 
```

[http://php.net/manual/en/pdostatement.bindparam.php](http://php.net/manual/en/pdostatement.bindparam.php)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-19T13:23:01.580

我认为 Gautam 就在这里，进行几个小测试，看看实际发生了什么：

```
// trim these just in case
$loginemail = trim($_REQUEST['loginemail']);
$loginpassword = trim($_REQUEST['loginpassword']);

$logincheck = "SELECT * FROM `ft_gameusers` 
WHERE `email` = '$loginemail' AND `password` = '$loginpassword'";

// copy & run this in an sql editor:
echo $logincheck;

// then try Gautam's ~ correct the quotes syntax error after loginpassword
$logincheck2 = "SELECT * FROM `ft_gameusers` 
WHERE `email` = '".$loginemail."' AND `password` = '".$loginpassword."';
echo $logincheck; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-19T06:24:27.223

像这样试试

```
$logincheck = "SELECT * FROM `ft_gameusers` WHERE `email` = '".$loginemail."' AND `password` = '".$loginpassword.'"; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-19T06:27:07.627

尝试从这里更改

```
<button type="submit">Login</button> 
```

至

```
<input type="submit" id="submit" name="submit" value="Login"> 
```

这篇[文章](https://stackoverflow.com/questions/2583139/button-type-submit-compatibility)解释了这`<button>`并不总是兼容的，并且可能只是解释了为什么你传递的变量`post`在另一边是空的。

[](http://www.w3schools.com/tags/tag_button.asp)**关于 html5`<button>`元素[**的更多信息**](http://www.w3schools.com/tags/tag_button.asp)**

 **> 重要提示：如果您在 HTML 表单中使用该元素，不同的浏览器可能会提交不同的值。Internet Explorer 9 之前的版本将提交 and 标记之间的文本，而其他浏览器将提交 value 属性的内容。使用该元素在 HTML 表单中创建按钮。**

# .net - 如何在我控制的客户端和服务器之间设置 WCF 安全性？

> ID：12489481
> 
> 赞同：1
> 
> 时间：2012-09-19T06:22:50.110
> 
> 标签：.net, wcf, security

我有一个托管 WCF 服务的 Windows 服务和一个与之通信的 WPF 应用程序。WPF 应用程序将位于同一网络上的不同计算机上。发送 WCf 消息时，我无法在两者之间设置安全性。以下是服务器和客户端 app.config 文件：

服务器

```
 <?xml version="1.0"?>
    <configuration>
      <system.serviceModel>
        <services>
      <service behaviorConfiguration="WCFBehavior" name="WCF.WCFService">
        <endpoint address="" binding="netTcpBinding" bindingConfiguration=""
          name="NetTcpBindingEndpoint" contract="WCF.IWCFService">
          <identity>
            <dns value="localhost" />
          </identity>
        </endpoint>
        <endpoint address="mex" binding="mexTcpBinding" bindingConfiguration=""
          name="MexTcpBindingEndpoint" contract="IMetadataExchange" />
        <host>
          <baseAddresses>
            <add baseAddress="net.tcp://localhost:8731/WCFService/" />
          </baseAddresses>
        </host>
      </service>
    </services>
    <behaviors>
      <endpointBehaviors>
        <behavior name="WebHttp">
          <webHttp />
        </behavior>
      </endpointBehaviors>
      <serviceBehaviors>
        <behavior name="WCFBehavior">
          <serviceMetadata httpGetEnabled="false" />
          <serviceDebug includeExceptionDetailInFaults="true" />
          <dataContractSerializer maxItemsInObjectGraph="2147483647" />
          <serviceTimeouts transactionTimeout="05:05:00" />
          <serviceThrottling maxConcurrentCalls="500" maxConcurrentSessions="500"
            maxConcurrentInstances="2147483647" />
        </behavior>
      </serviceBehaviors>
    </behaviors>
    <bindings>
      <wsDualHttpBinding>
        <binding name="WCFBinding">
          <security mode="None">
          </security>
        </binding>
      </wsDualHttpBinding>
      <webHttpBinding>
        <binding name="webHttpBindingWithJsonP" crossDomainScriptAccessEnabled="true" />
      </webHttpBinding>
    </bindings>
  </system.serviceModel>
  <startup>
    <supportedRuntime version="v4.0" sku=".NETFramework,Version=v4.0"/>
  </startup>
  <runtime>
    <assemblyBinding xmlns="urn:schemas-microsoft-com:asm.v1">
      <probing privatePath="lib" />
    </assemblyBinding>
  </runtime>
</configuration> 
```

客户

```
<?xml version="1.0"?>
<configuration>
  <startup>
    <supportedRuntime version="v4.0" sku=".NETFramework,Version=v4.0"/>
  </startup>
  <runtime>
    <assemblyBinding xmlns="urn:schemas-microsoft-com:asm.v1">
      <probing privatePath="lib" />
    </assemblyBinding>
  </runtime>
  <system.serviceModel>
    <bindings>
      <netTcpBinding>
        <binding name="NetTcpBindingEndpoint" closeTimeout="00:01:05"
          openTimeout="00:00:05" receiveTimeout="00:00:20" sendTimeout="00:00:20"
          transactionFlow="false" transferMode="Buffered" transactionProtocol="OleTransactions"
          hostNameComparisonMode="StrongWildcard" listenBacklog="10" maxBufferPoolSize="524288"
          maxBufferSize="65536" maxConnections="10" maxReceivedMessageSize="65536">
          <readerQuotas maxDepth="32" maxStringContentLength="8192" maxArrayLength="16384"
            maxBytesPerRead="4096" maxNameTableCharCount="16384" />
          <reliableSession ordered="true" inactivityTimeout="00:10:00"
            enabled="false" />
          <security mode="None">
          </security>
        </binding>
      </netTcpBinding>
    </bindings>
    <client>
      <endpoint address="net.tcp://localhost:8731/WCFService/" binding="netTcpBinding"
        bindingConfiguration="NetTcpBindingEndpoint" contract="WCFServiceReference.IWCFService"
        name="NetTcpBindingEndpoint">
        <identity>
          <dns value="localhost" />
        </identity>
      </endpoint>
    </client>
  </system.serviceModel>
</configuration> 
```

我能够让客户端成功连接到服务的唯一方法是，如果我在服务器上创建一个用户，其用户名和密码与我在客户端计算机上使用的帐户相同。如何设置安全性以避免这种情况？由于我可以控制客户端和服务器，因此我不关心是否具有高级别的安全性。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-19T11:38:15.393

您可能需要 UserName 的 CredentialType。现在，您将获得默认的 Windows。

[WCF 中的身份验证、授权和身份](http://msdn.microsoft.com/en-us/library/ff647503.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-19T06:45:29.287

您可以使用服务器上的用户凭据设置数据库。并且为了验证用户请求，如果来自客户端的用户凭据在数据库服务器上得到验证，您可以在服务器上动态创建一个用户。

# django - Mailchimp 与 django

> ID：12489482
> 
> 赞同：0
> 
> 时间：2012-09-19T06:23:08.457
> 
> 标签：django, mailchimp

我使用 django-mailchmip 来创建时事通讯。我将mailchimp与django正确集成，我订阅用户还使用template_id创建了活动，但我想在django中动态添加模板中的内容。模板结构将被预定义，我只想使用 django 将适当的数据添加到模板中的适当位置。

请任何人帮助我，应该怎么做？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-23T09:39:43.080

问题是由于可重复部分。具有不同方式添加数据的可重复部分。

```
template_content = {'html_repeat_1:0:postcard_heading00':postcard_heading_data,
                  'html_repeat_1:0:postcard_image': postcard_img_data, 
                  'html_repeat_1:0:std_content00': std_content_data} 
```

表示 ['repatable_section']:['index']:['section_name']

我这样做了，问题就解决了。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-19T17:02:49.293

我没有使用 djano-mailchimp，但我已经设法使用 mailsnake 对普通的 Mailchimp API 做同样的事情，而且并不复杂。

您可以轻松地通过以下方式传递它们：

```
 cid = mailsnake.campaignCreate(type='regular',
                                options={
                                             'list_id': list_id,
                                             'subject': some_subject,
                                             'template_id': some_template_id,
                                        },
                                segment_opts=segment,
                                content={
                                             'html_HEADER': some_header,
                                             'html_MAIN': some_main_content,

                                        }
                                ) 
```

# java - 禁用按钮在火狐中工作正常，但在 IE 中不行

> ID：12489485
> 
> 赞同：0
> 
> 时间：2012-09-19T06:23:28.003
> 
> 标签：java, asp.net, web

我有一些用 JAVA 编写的代码。在网页上，某个按钮被禁用，但如果我单击此禁用按钮，Internet Explorer 中会出现一个弹出窗口。相同的代码在 Firefox 中运行良好 禁用按钮在 Firefox 中运行良好，它在 IE 中也被禁用，但是在 IE 中单击禁用按钮时，预计只有在启用按钮时才会出现弹出窗口。

火狐版 - 14.0.1 IE - 7.0

代码

```
 if(IbSilentState == "Yes" || IbPresentState == "Absent")
    {
            if(btnIbsPowerOn) btnIbsPowerOn.disabled = true;
            if(btnIbsPowerOff) btnIbsPowerOff.disabled = true;
    }
    else
    {
            if(btnIbsPowerOn) btnIbsPowerOn.disabled = (IbPowerState == "On") ? true : false;
            if(btnIbsPowerOff) btnIbsPowerOff.disabled = (IbPowerState == "Stand-by off") ? true : false;
    }
    if(IbSilentState == "Yes" || TsmPresentState == "Absent")
    {
            if(btnTsmPowerOn) btnTsmPowerOn.disabled = true;
            if(btnTsmPowerOff) btnTsmPowerOff.disabled = true;
    }
    else
    {
            if(btnTsmPowerOn) btnTsmPowerOn.disabled = (TsmPowerState == "On") ? true : false;
            if(btnTsmPowerOff) btnTsmPowerOff.disabled = (TsmPowerState == "Stand-by off") ? true : false;
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-19T06:43:42.460

除非您的意思是您已经编写了一个小程序，否则不确定 java 如何应用于网页？在这种情况下，不同浏览器之间不应该有任何差异......

无论如何，我不知道是什么导致了你的问题，因为我真的不明白，但我确实发现你的代码有一个错误，可能有帮助，也可能没有帮助......

你不应该使用`==`字符串，相反，做类似的事情`"Yes".equals(IbSilentState)`

# jquery - 双重执行。焦点和点击事件的跨浏览器事件处理程序？

> ID：12489489
> 
> 赞同：0
> 
> 时间：2012-09-19T06:23:43.077
> 
> 标签：jquery, event-handling, cross-browser, focus

我有一个对复杂导航 UI 很重要的功能，所以我希望它可以通过键盘访问。我正在使用单击和焦点编写我的处理程序：

```
$('.mycoolnavbutton').on("click focus", function() {
   // do an animated reveal
}); 
```

这是问题所在：正如所写，我在 Firefox 中得到了双重执行（和不稳定的行为），因为点击事件触发了焦点事件。一切都执行（和console.logs）两次。（Webkit 只执行一次。）

我突然想到我可以将点击处理程序“管道”到焦点：

```
$('.mycoolnavbutton').on("click", function(event) {
   event.preventDefault();
   this.focus();
});
$('.mycoolnavbutton').on("focus", function() {
   // do an animated reveal
}); 
```

但这似乎真的很奇怪且容易出错。我确信我不是第一个遇到这种困境的人。标准解决方案是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-19T06:41:12.763

首先，我会问为什么当它获得键盘焦点时你会触发一个按钮？按钮通常在获取焦点后通过按空格键或回车键通过键盘触发，而仅在获取焦点时不会触发。

然后，由于这两个事件是完全独立的，没有办法知道一个是否会导致另一个，我可以想到这些可能性，以确保您只触发一次事件：

1.  当您处理其中一个事件时，请设置一些状态来记录您处理该事件的时间，然后在该时间的 xx 毫秒内忽略任何其他触发器。

2.  或者，完成同一件事的方式略有不同。当您触发事件时，请执行 setTimeout 并且在计时器触发之前不要再次处理该事件，以防止您在短时间内触发两次。

# smarty - Smarty 致命错误调用取消定义函数

> ID：12489497
> 
> 赞同：0
> 
> 时间：2012-09-19T06:24:44.070
> 
> 标签：smarty

在我的网站出现致命错误之前体验此问题。请参阅下面的确切消息：

```
Fatal error: Call to undefined function smarty_block_actionscolumn() in /www/performance/skill/templates_c/_global_templates_skills^%%89^898^898B4BF2%%skills.tpl.php on line 680 
```

删除 smarty 模板缓存修复了它，但几天后，问题再次出现。有什么想法可能是问题的原因吗？我查看了我的 tpl 文件，我找不到任何问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-09T08:17:32.290

为了他人的利益，我能够找出问题的原因，这里的问题是传递到插件中的数据/信息丢失，导致插件无法工作。

# php - 将远程 url 上传到服务器

> ID：12489499
> 
> 赞同：0
> 
> 时间：2012-09-19T06:24:54.943
> 
> 标签：php, url

我正在使用以下代码将远程文件上传到我的服务器。在提供直接下载链接的情况下效果很好，但最近我注意到很少有网站提供 mysql 链接作为下载链接，当我们单击该链接时，文件开始下载到我的电脑。但即使在该页面的 html 源代码中，它也不会显示直接链接。

这是我的代码：

```
 <form method="post">
 <input name="url" size="50" />
 <input name="submit" type="submit" />
 </form>
 <?php
 if (!isset($_POST['submit'])) die();
 $destination_folder = 'mydownloads/';
 $url = $_POST['url'];
 $newfname = $destination_folder . basename($url);
 $file = fopen ($url, "rb");
 if ($file) {
 $newf = fopen ($newfname, "wb");

  if ($newf)
 while(!feof($file)) {
 fwrite($newf, fread($file, 1024 * 8 ), 1024 * 8 );
 }
 }

 if ($file) {
  fclose($file);
 }

if ($newf) {
fclose($newf);
}

?> 
```

它适用于所有直接下载链接的链接，例如，如果我提供 [http://priceinindia.org/muzicpc/48.php?id=415508](http://priceinindia.org/muzicpc/48.php?id=415508)链接，它将上传音乐文件，但文件名将是 48。 php?id=415508 但实际的 mp3 文件存储在
[http://lq.mzc.in/data48-2/37202/Appy_Budday_(Videshi)-Santokh_Singh(www.Mzc.in).mp3](http://lq.mzc.in/data48-2/37202/Appy_Budday_(Videshi)-Santokh_Singh(www.Mzc.in).mp3)

因此，如果我可以获得实际的目标网址，则名称将是 Appy_Budday_(Videshi)-Santokh_Singh(www.Mzc.in).mp3

所以我想获得实际的下载网址。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-19T07:19:20.700

您应该为此使用 Curl 库。[http://php.net/manual/en/book.curl.php](http://php.net/manual/en/book.curl.php)

在关闭连接之前，在手册（在该链接上）中提供了如何使用 curl 的示例，请调用 curl_getinfo（http://php.net/manual/en/function.curl-getinfo.php）并具体获取CURLINFO_EFFECTIVE_URL 这就是你想要的。

```
<?php
// Create a curl handle
$ch = curl_init('http://www.yahoo.com/');

// Execute
$fileData = curl_exec($ch);

// Check if any error occured
if(!curl_errno($ch)) {
    $effectiveURL = curl_getinfo($ch, CURLINFO_EFFECTIVE_URL);
}

// Close handle
curl_close($ch);
?> 
```

（您也可以使用 curl 直接写入文件 - 使用 CURLOPT_FILE 选项。也在手册中）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-19T06:41:13.000

问题是原始 URL 正在重定向。您想捕获它被重定向到的 URL，尝试使用标头，然后获取 basename($redirect_url) 作为文件名。

为使用 CURL 的 Robbie +1。

如果你运行（从命令行）

```
[username@localhost ~]$ curl http://priceinindia.org/muzicpc/48.php?id=415508 -I
HTTP/1.1 302 Moved Temporarily
Server: nginx/1.0.10
Date: Wed, 19 Sep 2012 07:31:18 GMT
Content-Type: text/html
Connection: keep-alive
X-Powered-By: PHP/5.3.10
Location: http://lq.mzc.in/data48-2/37202/Appy_Budday_(Videshi)-Santokh_Singh(www.Mzc.in).mp3 
```

您可以看到这里的位置标头是新的 url。

在php中尝试类似

```
$ch = curl_init('http://priceinindia.org/muzicpc/48.php?id=415508'); 
curl_setopt($ch, CURLOPT_HEADER, 1); // return header
curl_setopt($ch, CURLOPT_FOLLOWLOCATION, false); // dont redirect 
$c = curl_exec($ch); //execute
echo curl_getinfo($ch, CURLINFO_HTTP_CODE); // will echo http code.  302 for temp move
echo curl_getinfo($ch, CURLINFO_EFFECTIVE_URL); // url being redirected to 
```

您想找到标题的位置部分。不确定设置我确定。

编辑 3..或 4？是的，我明白发生了什么。您实际上想要跟随位置 url 然后回显有效 url 而无需下载文件。尝试。

```
$ch = curl_init('http://priceinindia.org/muzicpc/48.php?id=415508');
curl_setopt($ch, CURLOPT_NOBODY, 1);
curl_setopt($ch, CURLOPT_FOLLOWLOCATION, true);
$c = curl_exec($ch); //execute
echo curl_getinfo($ch, CURLINFO_EFFECTIVE_URL); // url being redirected to 
```

当我运行它时，我的输出是

```
[username@localhost ~]$ php test.php
http://lq.mzc.in/data48-2/37202/Appy_Budday_(Videshi)-Santokh_Singh(www.Mzc.in).mp3 
```

# php - 带有许多表的 cakephp 查询

> ID：12489501
> 
> 赞同：4
> 
> 时间：2012-09-19T06:25:14.117
> 
> 标签：php, cakephp, cakephp-model

我有一个用 cakephp 2.0 开发的网站，我有一些相关的表，这里是一个例子：这是我的关系：

> 成分（id，name）有很多版本
> 
> 成分属性（id,property_id,version_id）属于属性，版本
> 
> properties (id,name,value,group_id,unit_id) 有很多成分_properties 并且属于groups,units
> 
> groups (id,name) 有很多属性
> 
> units (id,name) 有很多属性
> 
> 版本 (id,name,ingredient_id,active) 有很多成分属性，属于成分。

我在成分Controller.php 中，我想在哪里检索所有这些`Version.active=1`数据`Version.ingredient_id=2`。

这是我的查询：

```
$this->set(
        'ingredient',
        $this->Ingredient->Version->find('all', array(
            'recursive' => 2,
            'conditions' => array(
                'Version.active' => 1,
                'Version.ingredient_id' => 2
             )
        ))
); 
```

我有很多这样的查询，我想知道递归 2 是否是检索我已经解释过的表的所有数据的最佳方法，或者有更快的更好方法（就查询速度而言，不实现） . 我希望有人可以帮助我优化我的代码，因为这个查询有效，但我不知道它是否是检索许多相关表的数据的更好方法。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-19T22:19:12.357

`'recursive' => 2`如果您想检索这么多数据，这不是最好的使用方法。我相信它会产生太多的查询。可包含行为具有相同的缺点。对我来说最好的方法是[取消绑定模型关联](http://book.cakephp.org/2.0/en/models/associations-linking-models-together.html#creating-and-destroying-associations-on-the-fly)并即时[构建表连接](http://book.cakephp.org/2.0/en/models/associations-linking-models-together.html#joining-tables)。[您可以在此处](https://stackoverflow.com/questions/3470182/how-to-change-the-sequence-of-joins-in-cakephp)查看示例。但是您需要了解一些 SQL 才能了解您的工作。

# gnuplot - 如何在 GNUplot 的单个图中叠加 2 个图

> ID：12489504
> 
> 赞同：5
> 
> 时间：2012-09-19T06:25:35.200
> 
> 标签：gnuplot

我有两个文件，它们的时间为 x 轴和一个值。我需要将这两个覆盖在一个图上。目前我使用 GNUplot 尝试过，但在中间被击中。这是一个示例文件

```
01:03:05    6

01:03:15    6 
```

和另一个文件

```
01:03:55    6

01:04:10    6 
```

我需要在一个图中绘制这两个文件（比如 x 标记和其他一些用于区分的符号）。我不知道是否可以在 GNUplot 中做到这一点。目前我为每个文件创建了两个网格。但我需要在一个情节中。这是我写的

```
set multiplot layout 1,2    # engage multiplot mode

set xdata time          ## these three lines control how gnuplot

set timefmt '%H:%M:%S'  ## reads and writes time-formatted data.

set format x '%H:%M:%S' ##

set xtics 05           # make time spacing of 2 minutes

plot 'AAA' u 1:2      # plot the first data set 

plot 'BBB' u 1:2      # plot the second data set 

unset multiplot 
```

任何熟悉 GNUplot 或任何其他工具（在 linux 中工作）的人都可以帮助我。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-09-19T06:36:25.660

为了在一个绘图中绘制多条线，只需将它们放在一个绘图命令中，例如

```
plot 'AAA' u 1:2, 'BBB' u 1:2 
```

有许多示例可以让您从 gnuplot 开始。[这个](https://mathblog.com/getting-started-with-gnuplot/)例子展示了如何在一个图中绘制多条线。

* * *

您在脚本中使用的`multiplot`命令还可以有多个绘图窗口，如下[所示](http://t16web.lanl.gov/Kawano/gnuplot/plot3-e.html)。您可以通过以下方式调整每个子图的位置：

```
set size XSIZE,YSIZE        #see `help set size` 
set origin XORIGIN,YORIGIN  #see `help set origin` 
```

或（如果您有 gnuplot 4.2 或更高版本）：

```
set lmargin at screen XMIN  #see `help margin`
set rmargin at screen XMAX
set tmargin at screen YMAX
set bmargin at screen YMIN 
```

# python - Python Server发送数据不起作用

> ID：12489505
> 
> 赞同：0
> 
> 时间：2012-09-19T06:25:37.550
> 
> 标签：python, client-server

我目前正在使用 Python 开发服务器，我面临的问题是客户端无法从服务器检索发送的数据。

服务器的代码是：

```
import sys
import socket
from threading import Thread

allClients=[]

class Client(Thread):

    def __init__(self,clientSocket):
                Thread.__init__(self)
                self.sockfd = clientSocket #socket client
                self.name = ""
                self.nickName = ""

    def newClientConnect(self):

      allClients.append(self.sockfd)
      while True:
            while True:
                try:
                    rm= self.sockfd.recv(1024)
                    print rm

                    try:
                        self.sockfd.sendall("\n Test text to check send.")
                        print "Data send successfull"
                        break

                    except socket.error, e:
                        print "Could not send data"

                    break

                except ValueError:
                       self.sockfd.send("\n Could not connect properly")

    def run(self):
                self.newClientConnect()
                self.sockfd.close() 
                while True:
                        buff = self.sockfd.recv(1024)

                        if buff.strip() == 'quit':
                            self.sockfd.close()
                            break # Exit when break
                        else:
                            self.sendAll(buff)
#Main
if __name__ == "__main__":

    #Server Connection to socket:
    IP = '127.0.0.1'
    PORT = 80
    serversocket = socket.socket(socket.AF_INET, socket.SOCK_STREAM)
    serversocket.setsockopt( socket.SOL_SOCKET, socket.SO_REUSEADDR,1)

    print ("Server Started")
    try:
        serversocket.bind(('',5000))
    except ValueError,e:
        print e
    serversocket.listen(5)

while True:
        (clientSocket, address) = serversocket.accept()
        print 'New connection from ', address
        ct = Client(clientSocket)
        ct.start()

__all__ = ['allClients','Client']

#-- 
```

客户端连接是：

```
import socket

HOST = '192.168.1.4'    # The remote host
PORT = 5000              # The same port as used by the server
s = socket.socket(socket.AF_INET, socket.SOCK_STREAM)
s.connect((HOST, PORT))

data = s.recv(1024)
s.close()
print 'Received', data#repr(data) 
```

需要一个快速的解决方案....谢谢，

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-19T06:30:59.657

**简短的解决方案**

`sleep`在 .之后添加一个简短的`connect`.

```
import time
time.sleep(3) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-19T06:53:48.937

等待响应：

```
with s.makefile('rb') as f:
     data = f.read() # block until the whole response is read
s.close() 
```

您的代码中有多个问题：

*   嵌套`while True`不中断
*   `finally: ..close()`*之前*执行 *`except ValueError: ..send`*
**   多`self.sockfd.close()`*   ETC*

 *此外，您可能应该使用`.sendall()`而不是`.send()`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-19T07:26:44.140

你的服务器代码除了客户端先发送一些东西，

```
rm= self.sockfd.recv(1024) 
```

但我在您的代码中看不到任何内容

请尝试在您的客户端代码中发送一些内容

```
s.connect((HOST, PORT))
s.send("hello") 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-19T08:11:37.160

我测试了你的代码，当我注释掉时

```
rm= self.sockfd.recv(1024)
print rm 
```

它工作得很好。基本上，服务器停在那里等待从未出现的消息。如果它仍然不适合您，则可能有两个问题。要么你有防火墙以某种方式阻止连接，要么你有旧服务器在后台运行，之前的尝试实际上并没有被杀死。如果 pythonw.exe 或等效程序在不应该运行时正在运行，请检查您的进程，然后将其杀死。*

# jquery - 使用 jquery 在远程 html 内容中搜索文本

> ID：12489512
> 
> 赞同：-1
> 
> 时间：2012-09-19T06:26:08.270
> 
> 标签：jquery, html

我用 jquery 加载了一个远程 html 文件并测试了它是否完美。我将该html内容存储在中`$secPage`，然后尝试在`td`中搜索文本`$secPage`，但为空。

```
$secPage = $(data);  
$('#content').html($secPage); // it works and shows data 
var result = $('td:contains("Ejendomsværdi:")',$secPage).next().text(); // returns empty 
```

但是如果我用[http://jsfiddle.net/](http://jsfiddle.net/)测试相同的代码然后得到结果。

```
var result = $('td:contains("Ejendomsværdi:")').next().text();  // it works in jsfiddle 
```

这意味着，当我使用`$secPage`then 进行测试时，它返回空，但它不应该是。

请帮忙 ...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-19T06:32:48.060

As you say it's a remote file, I guess it means it comes from a different domain.

Then you can't do it : [cross domain protection rules](https://developer.mozilla.org/en-US/docs/HTTP_access_control) prevents you to read or change the content loaded from another domain (including port) unless the remote server allows it (using headers)

# blackberry - 如何在 BlackBerry 中设置 TableView 单元格的宽度和高度？

> ID：12489516
> 
> 赞同：-1
> 
> 时间：2012-09-19T06:26:15.647
> 
> 标签：blackberry, java-me

我使用[TableView](http://www.blackberry.com/developers/docs/6.0.0api/net/rim/device/api/ui/component/table/TableView.html)和[TableModel](http://www.blackberry.com/developers/docs/6.0.0api/net/rim/device/api/ui/component/table/TableModel.html)在 BlackBerry Java 中创建了一个表。

现在，我想设置特定单元格的宽度和高度。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-19T08:17:49.480

您有多种选择。这部分取决于您的表需要支持哪些功能，还取决于您的目标操作系统版本（您的应用程序需要运行的*最低操作系统版本）。*

这里有一些选择（我相信还有更多）：

1.  如果您可以接受仅支持 OS 6.0 或更高版本的设备，那么您可以使用`TableModel`RIM 库中的 , 及其相关类。 [有关该示例，请参见此页面](http://docs.blackberry.com/en/developers/deliverables/18125/Table_Model_1328111_11.jsp)。这是一种将模型与表示分离的结构良好的方法。OS 6.0 中还引入了其他类，[RichList](http://docs.blackberry.com/en/developers/deliverables/18125/Rich_list_1228594_11.jsp)和[SimpleList 。](http://docs.blackberry.com/en/developers/deliverables/18125/Simple_list_1228593_11.jsp)

2.  如果您需要支持较旧的操作系统版本，您可以[使用 ListField 类](http://www.blackberry.com/knowledgecenterpublic/livelink.exe/fetch/2000/348583/800332/800505/800345/How_to_-_Make_list_items_appear_on_a_screen_.html?nodeid=800616&vernum=0)或称为[ObjectListField](http://www.blackberry.com/developers/docs/5.0.0api/net/rim/device/api/ui/component/ObjectListField.html)的子类。 `ObjectListField`设置显示一个简单的列表（表格）特别容易。但是，您可能会发现它受到限制，需要求助于第三个主要选项......

3.  您始终可以通过扩展`Manager`类或使用`VerticalFieldManager`. 垂直列表中的每一行都是`Field`您可以随意定义的。 [这是我回答的最近的堆栈溢出问题，显示了一些基本上可以做到这一点的代码](https://stackoverflow.com/questions/11483128/custom-list-field-click-event/11536884#11536884)。如果您来自 Android 或 iOS，您可能会发现这比您想要的要多一些工作，但它可以让您完全控制，并且可以支持任何操作系统版本。

这是一个开放式问题，因此您可能需要提供有关表格外观或每行将支持哪种交互方式的更多细节 - 例如，

1.  每一行都可以选择吗？
2.  每行中是否有多个字段，它们每个都可以点击/可选择吗？
3.  每一行都符合一致的格式，还是有些行有独特的布局？

然后，我们也许可以给出更具体的建议。

PS 过去，黑莓维护了一个很好的链接（就像谷歌为 Android 提供的一样）关于当前设备的市场份额。它死了，[这是我找到的最好的替代品（更新：链接现在也已过时！）](https://developer.blackberry.com/devzone/appworld)。看起来可能有 80% 的付费智能手机应用程序是由运行 OS 6.0 或更高版本的手机下载的。很难准确地说出，因为该链接显示了截至 2012 年 5 月 31 日的数据。但是，如果您不知道要针对哪个最低操作系统，这至少给了您一个想法。

# documentation-generation - 跨多个浏览器使用 Swagger

> ID：12489517
> 
> 赞同：0
> 
> 时间：2012-09-19T06:26:16.977
> 
> 标签：documentation-generation, swagger

谁知道这个问题？Swagger 似乎无法支持 IE。我在 Tomcat 中部署了 Swagger 示例，如下所示。该示例在 Google Chrome 和 Firefox 中运行良好。 [https://github.com/wordnik/swagger-core/tree/master/samples/no-server](https://github.com/wordnik/swagger-core/tree/master/samples/no-server)

但该示例无法在 IE 中正确显示。URL 总是被定向到 tomcat 的索引页面。我尝试将“localhost”更改为 IP 或主机名，但它仍然无法在 IE 中运行。swagger 不能支持 IE 吗？它是一个错误吗？

```
Input the URL and run in IE
http://localhost:8080/swagger/index.html

Redirect to the URL (always insert # inside)
http://localhost:8080/#swagger/index.html 
```

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-08T23:40:25.887

Swagger 自己的[petstore 演示](http://petstore.swagger.wordnik.com)似乎也无法在 IE 中运行，所以我猜这是代码的问题，而不是您的特定安装问题。

# java - 通过android中的soap调用列表视图

> ID：12489518
> 
> 赞同：0
> 
> 时间：2012-09-19T06:26:30.230
> 
> 标签：java, android, android-listview, listadapter, android-ksoap2

嗨，我已经成功开发了一个 listview 应用程序..现在我必须单击该列表中的任何项目，这意味着详细描​​述会显示在下一个活动中...它也已成功完成..现在我的输出格式如下：

```
1   F   Krishna
2   Q   Danesh
3   P   Mercy 
```

在这里，我必须单击**2 Q Danesh**项目，它是转到下一个活动。下一个活动必须显示

`Q Danesh`

它成功地工作了。

但现在我希望需要这种格式的列表视图：

```
1 Krishna
2 Danesh
3 Mercy 
```

在这里我必须点击**2 Danesh**表示它是进入下一个活动并且下一个活动必须显示

`Q`

我该怎么办……请帮帮我……

下面的代码是我的网络服务代码：

```
 public class RetailerWs {
 public String customerData1(){
 String customerInfo = "";
 try{
 Class.forName("com.mysql.jdbc.Driver");
 Connection con = DriverManager.getConnection("jdbc:mysql://localhost:3306/xcart-432pro","root",""); 
```

//查找客户ID最大的客户信息 PreparedStatement statement = con.prepareStatement("SELECT * FROM xcart_orders"); ResultSet 结果 = statement.executeQuery();

```
 while(result.next()){
   customerInfo = customerInfo 
            + result.getString("orderid") 
            + " "   // this to separate order id from status
            + result.getString("status") 
            + " " 
    // this to separate order id from status
            + result.getString("login") 
            + "&" ;
 //Here "&"s are added to the return string. This is help to split the string in Android application
}
}

catch(Exception exc){
System.out.println(exc.getMessage());
}

return customerInfo;
}

 } 
```

这是我的安卓代码：

```
public class RetailerActivity extends Activity {
ListView list;
private static final String SOAP_ACTION = "http://xcart.com/customerData1";
private static final String METHOD_NAME = "customerData1";
private static final String NAMESPACE = "http://xcart.com";
private static final String URL = "http://192.168.1.168:8089/XcartLogin/services/RetailerWs?wsdl";
private static final String KEY_STATUS = "status";
private static final String KEY_LOGIN = "login";

/** Called when the activity is first created. */
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);
    SoapObject request = new SoapObject(NAMESPACE, METHOD_NAME); 

    SoapSerializationEnvelope envelope = new SoapSerializationEnvelope(SoapEnvelope.VER11);

    envelope.setOutputSoapObject(request);

    HttpTransportSE ht = new HttpTransportSE(URL);
    try {
        ht.call(SOAP_ACTION, envelope);
        SoapPrimitive response = (SoapPrimitive)envelope.getResponse();
        SoapPrimitive s = response;
        String str = s.toString();
        String resultArr[] = str.split("&");
        list=(ListView)findViewById(R.id.list);

        list.setAdapter(new ArrayAdapter(this, android.R.layout.simple_list_item_1,resultArr));
        list.setOnItemClickListener(new OnItemClickListener() {
        @Override
        public void onItemClick(AdapterView<?> parent, View view,
                    int position, long id) {
                String status =  parent.getItemAtPosition(position).toString();

                String[] status1  = status.split(" ");

                 String StrStatus = status1[1].toString();

                Intent in = new Intent(getApplicationContext(), SingleMenuItemActivity.class);
                in.putExtra(KEY_STATUS, StrStatus);

                startActivity(in);            

            }
        });     
    }

    catch (Exception e) {
        e.printStackTrace();
    }
}

  } 
```

这是我的下一个活动：

```
 public class SingleMenuItemActivity  extends Activity {

// XML node keys
static final String KEY_STATUS = "status";

@Override
  public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.single_list_item);

    Intent in = getIntent();
    String StrStatus = in.getStringExtra(KEY_STATUS);

    // Displaying all values on the screen
    TextView lblName = (TextView) findViewById(R.id.status_label);
    lblName.setText(StrStatus);

  }
  } 
```

请帮我....

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-19T10:33:45.933

有可能的。您可以将 Q 从列表屏幕带到其他活动。

你只需要改变你的第一个活动（这是你的 Q 值）

```
in.putExtra("StrStatus", StrStatus); 
```

然后你可以在你的其他活动中通过

```
Bundle extras=getIntent().getExtras();
if(extras!=null) {
    STRStatus=extras.getString("StrStatus");
} 
```

这将有你的 Q 值，你可以做任何你想做的事情。

-----
BTW - 你得到哪个错误？您可以使用它来单击您的列表项

```
public void onListItemClick(ListView parent,View v,int position,long id){
try {
    TextView t4=(TextView)v.findViewById(R.id.No);

    if (t4!=null){
        BeanClass/*ClassName*/  mSelected;
        int idx=position;
        mSelected=m_adapter.getItem(idx);           
        String ActionID=mSelected.getID();

        Intent intent=new Intent(this,SoneActivity.class);
        intent.putExtra("StrStatus", StrStatus);
        startActivity(intent);
    }
} 
```

# java - Eclipse RCP 中的许多查看者、一个或多个内容提供者/域模型

> ID：12489521
> 
> 赞同：1
> 
> 时间：2012-09-19T06:26:40.237
> 
> 标签：java, eclipse-rcp, jface, tableviewer

我对在 Eclipse RCP 中使用模型、内容提供程序和表查看器有疑问。

我找不到任何适合该主题的教程或示例。

设计应该在多个表查看器中显示的数据模型的正确方法是什么。我必须为每个查看器创建内容提供程序，还是只为显示相同数据的多个查看器创建一个内容提供程序实例？

另一个问题。如果我必须创建许多内容提供者实例，我必须为每个内容提供者创建一个域模型实例还是多个实例？

如果模型已更改（添加元素/删除元素/更新元素）以向用户更新视图，我想通知每个查看者？互联网上有许多教程和示例，但它们仅基于一种查看器场景。有人可以对这个话题进行更多说明。谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-20T10:58:13.577

请在下面找到答案

1.  每个查看器都需要一个内容提供程序实例。这可以是所有查看器使用的一个类，也可以为每个查看器创建新的内容提供程序实现。内容提供者的角色是将您的数据模型转换为观众可以理解的形式。如果您在所有查看器中显示相同的数据，我建议您使用一个内容提供程序实现并为每个查看器创建多个实例。您可以将相同的实例分配给所有查看器，但我不建议这样做。

2.  您不必创建数据模型的多个实例。您可以重复使用相同的实例。

3.  理想情况下，对一个观众有效的也适用于多个观众。我不知道您指的是什么教程，如果您可以发布链接，那么也许我可以建议。

# sql - 如何在 SQL 中获取当年的所有周末日期？

> ID：12489522
> 
> 赞同：5
> 
> 时间：2012-09-19T06:26:50.717
> 
> 标签：sql, sql-server-2008

我试过但无法得到正确的解决方案。我想要一个列出当年所有周末日期的 SQL 查询。

我试过这个 SQL 查询：

```
WITH hier(num, lvl) AS (
    SELECT  0, 1
            UNION ALL
    SELECT  100, 1
            UNION ALL 
    SELECT  num + 1, lvl + 1
    FROM    hier
    WHERE   lvl < 100 
)
SELECT lvl [Week], 
convert(date,DATEADD(dw, -DATEPART(dw, DATEADD(wk,DATEDIFF(wk,0,'12/31/'+convert(nvarchar,YEAR(getdate()))), 0)+6 ),
DATEADD(wk, DATEDIFF(wk,0,'12/31/'+convert(nvarchar,YEAR(getdate()))), 0)+6 ) - num  * 7,101) [End Date]
FROM    hier a
where   num < 52
ORDER BY [End Date] asc 
```

它的输出是这样的：

```
Week  End date
52  2012-01-14
51  2012-01-21
50  2012-01-28
49  2012-02-04 
```

我希望日期从头开始 - 所以，上面缺少一个周末，即`2012-07-01`. 另外，我希望周数显示为`1, 2, 3...`而不是`52, 51...`.

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-19T06:34:25.527

看看[这篇](http://blog.sqlauthority.com/2009/12/29/sql-server-get-date-of-all-weekdays-or-weekends-of-the-year/)博文。

您的问题已详细解释。

```
DECLARE @Year AS INT,
@FirstDateOfYear DATETIME,
@LastDateOfYear DATETIME
-- You can change @year to any year you desire
SELECT @year = 2010
SELECT @FirstDateOfYear = DATEADD(yyyy, @Year - 1900, 0)
SELECT @LastDateOfYear = DATEADD(yyyy, @Year - 1900 + 1, 0)
-- Creating Query to Prepare Year Data
;WITH cte AS (
SELECT 1 AS DayID,
@FirstDateOfYear AS FromDate,
DATENAME(dw, @FirstDateOfYear) AS Dayname
UNION ALL
SELECT cte.DayID + 1 AS DayID,
DATEADD(d, 1 ,cte.FromDate),
DATENAME(dw, DATEADD(d, 1 ,cte.FromDate)) AS Dayname
FROM cte
WHERE DATEADD(d,1,cte.FromDate) < @LastDateOfYear
)
SELECT FromDate AS Date, Dayname
FROM CTE
WHERE DayName LIKE 'Sunday'
/*
WHERE DayName IN ('Saturday,Sunday') -- For Weekend
WHERE DayName NOT IN ('Saturday','Sunday') -- For Weekday
WHERE DayName LIKE 'Monday' -- For Monday
WHERE DayName LIKE 'Sunday' -- For Sunday
*/
OPTION (MaxRecursion 370) 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-09-19T06:40:53.763

这有帮助吗

```
DECLARE @startDate DATETIME, @endDate DATETIME
SELECT @startDate = '2012-01-01', @endDate = '2012-12-31'
;WITH Calender AS (
    SELECT @startDate AS dt
    UNION ALL
    SELECT dt + 1 FROM Calender
    WHERE dt + 1 <= @endDate
)
SELECT 
dt
,NameMonth = DATENAME(Month, dt)
,NameDay = DATENAME (Weekday,dt)
,WeekofYr = DATEPART(WEEK, dt)  FROM Calender
WHERE DATENAME (Weekday,dt) IN ('Sunday')
Option(MaxRecursion 0) 
```

**结果（部分）**

```
dt                      NameMonth   NameDay WeekofYr
2012-01-01 00:00:00.000 January     Sunday  1
2012-01-08 00:00:00.000 January     Sunday  2
...............................................
...............................................
2012-12-30 00:00:00.000 December    Sunday  53 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-19T06:37:42.727

你可以试试这个

```
DECLARE @FirstDateOfYear DATETIME
SET @FirstDateOfYear = ’2010-01-01′
SELECT DISTINCT DATEADD(d, number, @FirstDateOfYear),
CASE DATEPART(dw, DATEADD(d, number, @FirstDateOfYear))
WHEN 7 THEN ‘Saturday’
WHEN 1 THEN ‘Sunday’
ELSE ‘Work Day’
END
FROM master..spt_values
WHERE number BETWEEN 0 AND 364
AND (DATEPART(dw, DATEADD(d, number, @FirstDateOfYear)) = 1 OR DATEPART(dw, DATEADD(d, number, @FirstDateOfYear)) = 7)
ORDER BY DATEADD(d, number, @FirstDateOfYear) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-19T06:31:54.487

尝试通过执行以下操作找到第一个星期六：

1.  开始于 2012-01-01
2.  如果不是星期六，就加一天
3.  转到 2

然后，在一个临时表中，添加该日期和下一个日期（星期日）。之后，循环以下内容：

1.  将 7 天和 8 天添加到您找到的最后一个星期六（您会得到下一个星期六和星期日）
2.  检查他们是否还在2012年
3.  如果是，请将它们存储在临时表中并转到 1

可能有更优雅的方法，但这是我快速而肮脏的解决方案。由于您没有发布任何您尝试过的代码，我将把实现留给您。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-19T06:41:38.107

这也有效

```
declare @dat datetime, @add int

set @dat = '20120101'
set @add = datepart(w,@dat)

set @add = 5 - @add -- friday

set @dat = dateadd(d,@add,@dat)

while @dat <= '20121231'
begin
    print @dat
    set @dat = dateadd(d,7,@dat)
end 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-09-19T06:48:39.387

```
;with AllDaysOfYear (Day) as (
    select DATEADD(year,DATEDIFF(year,0,CURRENT_TIMESTAMP),0) --Jan 1st
    union all
    select DATEADD(day,1,Day) from AllDaysOfYear
    where DATEPART(year,DATEADD(day,1,Day)) = DATEPART(year,CURRENT_TIMESTAMP)
)
select
    ROW_NUMBER() OVER (ORDER BY Day) as WeekNo,
    Day
from
    AllDaysOfYear
where
    DATEPART(weekday,Day) = DATEPART(weekday,'20120714')
option (maxrecursion 0) 
```

首先，生成一组当前年份的所有日期 ( `AllDaysInYear`)。然后，选择那些`weekday`是星期六的。我使用的值 ( `'20120714'`) 并不是非常重要——它必须是*任何*一年的任何一个星期六。我只是使用它来避免需要进行特定`DATEFIRST`或语言设置。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-09-19T06:58:57.633

此查询显示如何在第一部分中获取今年的第一天和明年的第一天。下一年的第一天计算一次，以免不断获取和比较年份部分。

```
;WITH cte(TheDate,NextYear) AS
(
  SELECT CAST(CONVERT(CHAR(4),GETDATE(),112)+'0101' AS DATETIME),
         CAST(YEAR(GETDATE())*10000+10101 AS CHAR(8))
   UNION ALL
  SELECT DateAdd(d,1,TheDate),NextYear
    FROM cte
   WHERE DateAdd(d,1,TheDate)<NextYear
)
  SELECT Week = DatePart(wk,TheDate),
         TheDate
    FROM cte
   WHERE DateName(dw,TheDate) in ('Saturday')
ORDER BY TheDate
OPTION (MAXRECURSION 366) 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2012-09-19T07:05:34.300

```
with t as 
(
select 1 b
union all
select 1 b
union all
select 1 b
union all
select 1 b
union all
select 1 b
union all
select 1 b
union all
select 1 b
union all
select 1 b
) 
select * from 
(
select 
current_timestamp
-datepart(dy,current_timestamp)
+row_number() over (order by t.b) d
from t, t t1, t t2 
) tmp 
where datepart(yyyy,d)=datepart(yyyy,current_timestamp)
      and
      DATENAME(dw,d)='sunday' 
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2020-12-04T15:58:49.343

```
DECLARE @Year AS INT

SELECT @Year = 2020

;WITH weekends AS (
    SELECT DATEFROMPARTS(@Year, 1, 1) AS dt
          UNION ALL
    SELECT DATEADD(DAY, 1, dt) 
      FROM weekends
     WHERE dt < DATEFROMPARTS(@Year, 12, 31)
)
SELECT dt, DATENAME(MONTH, dt), DATENAME(DW, dt)
FROM weekends
WHERE DATEPART(DW, dt) IN (1, 7)
OPTION(MaxRecursion 366) 
```

# java - 将项目添加到 JFrame 会迫使它们落后？

> ID：12489523
> 
> 赞同：1
> 
> 时间：2012-09-19T06:26:57.020
> 
> 标签：java, swing, jframe, behind

大家好，我有这个问题，我似乎无法解决。我得到了一些代码，并且必须制作一个“井字游戏”游戏。相当原始。目前它想要我做的是接受用户输入（它只是询问您要放置标记的行/列），并且它意味着在板的适当正方形上绘制一个椭圆形。我当前的代码如下工作所示，我创建了一个新类来处理用户输入。

我目前只是在尝试让它向 JFrame 添加新项目，但收效甚微。我有一个虚拟的输入调用，它不会检查我输入的内容，它只是调用一个椭圆形，它应该位于左上角的第一个正方形中。我可以让对象绘制到 JFrame 上（尽管它占据了整个框架），但它总是在实际板的后面（即：如果我拉伸框架，我可以看到圆圈）。我已经尝试添加 JPanel 等，以便它们位于板的顶部，但到目前为止我运气不佳。

这是我为该任务提供的用于创建椭圆形的代码。我所做的只是实例化一个位置为 (0,0,10,10) 的新椭圆。然而，当它绘制时，它占据了整个 JFrame，但它也在实际电路板的后面......有什么想法吗？

```
package lab4;

import javax.swing.*;
import java.awt.*;

/** Oval Supplier Class 
 * Author: David D. Riley
 * Date: April, 2004
 */
public class Oval extends JComponent  {

    /** post:   getX() == x  and  getY() == y
     *          and  getWidth() == w  and getHeight() == h
     *          and  getBackground() == Color.black
     */
    public Oval(int x, int y, int w, int h)  {
        super();
        setBounds(x, y, w, h);
        setBackground(Color.black);
    }

    /** post:   this method draws a filled Oval
     *          and  the upper left corner of the bounding rectangle is (getX(), getY()) 
     *          and  the oval's dimensions are getWidth() and getHeight()
     *          and  the oval's color is getBackground()
     */
    public void paint(Graphics g)  {
        g.setColor( getBackground() );
        g.fillOval(0, 0, getWidth()-1, getHeight()-1);
        paintChildren(g);
   }

} 
```

**编辑：这就是我们现在正在查看的代码——**

```
/*
 * To change this template, choose Tools | Templates
 * and open the template in the editor.
 */
package lab4;

/**
 *
 * @author Scott
 */
import java.awt.*;
import java.util.Scanner;
import javax.swing.*;

public class GameBoard {

    private JFrame win;
    private int count = 1;

    //Create new GUI layout
    GridLayout layout = new GridLayout(3, 3);
    JPanel panel = new JPanel(layout);

    //Create a new Array of Rectangles
    Rectangle[][] rect = new Rectangle[3][3];

    public GameBoard() {

        //Create new JFrame + Set Up Default Behaviour
        win = new JFrame("Tic Tac Toe");

        win.setBounds(0, 0, 195, 215);
        win.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        win.setResizable(true);

        //Loop goes through each line of the array. It creates a new rectangle
        //determines it's colour based on modulus division
        //Add's the rectangle to the JPanel.
        for (int i = 0; i < rect.length; i++) {
            for (int j = 0; j < rect[i].length; j++) {
                rect[i][j] = new Rectangle(0, 0, 1, 1);
                if (count % 2 != 0) {
                    rect[i][j].setBackground(Color.black);
                } else {
                    rect[i][j].setBackground(Color.red);
                }
                panel.add(rect[i][j]);
                count++;
            }
        }

        //Sets the game to be visible.
        win.add(panel);
        win.setVisible(true);
        //userInput();
    }

    private void userInput() {
    Scanner scan = new Scanner(System.in);
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-19T06:37:29.910

让我们从你的椭圆形课程开始......

这是一个非常糟糕的主意...

```
public void paint(Graphics g)  {
    // No super.paint(g) call, hello to a world of pain...
    // Paint some stuff
    g.setColor( getBackground() );
    g.fillOval(0, 0, getWidth()-1, getHeight()-1);
    // Then draw the children over it...???
    paintChildren(g);
} 
```

这是一个更好的方法。

```
protected void paintComponent(Graphics g)  {
    super.paintComponent(g);
    g.setColor( getBackground() ); // Might want to pick a better color...
    g.fillOval(0, 0, getWidth()-1, getHeight()-1);

} 
```

猜测一下，我建议您的窗口正在使用覆盖您的`setBounds`调用的布局管理器

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-03T04:09:35.057

答案最终是我需要坚持流布局，手动调整矩形大小并改用 JLayeredPane。不知道这存在，与我的讲师交谈，他说我的思维过程是正确的，这就是他打算让我这样做的方式......多么痛苦，但感谢那些帮助过的人。

# c - 为什么在 Linux 上使用 open 系统调用创建文件时文件权限会更改？

> ID：12489525
> 
> 赞同：1
> 
> 时间：2012-09-19T06:27:04.740
> 
> 标签：c, linux

我正在使用`open`系统调用创建一个具有完全权限（777）的文件，但是当我这样做时，`ls -l`我只能看到权限为（755）。你能告诉为什么文件权限不是777吗？

**代码**

```
#include <fcntl.h>
#include <sys/types.h>
#include <sys/stat.h>

int main()
{
        int fd;

        /* Creates a file with full permission*/
        fd = open("test", O_CREAT | O_RDWR | O_APPEND, 0777);

        if (fd = -1)
        {
                return -1;
        }

        close(fd);
} 
```

**输出**

```
 $ ls -l
    -rwxr-xr-x 1 ubuntu ubuntu    0 2012-09-19 11:55 test 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-19T06:31:57.233

There's a value maintained by the system called the `umask`; it is a property of the process, just like the PID (process ID) or EUID (effective user ID) is. It will be set to `022` (octal), which indicates that the system should remove the group and other write permission from files that are created.

You can call [`umask(0);`](http://pubs.opengroup.org/onlinepubs/9699919799/functions/umask.html) before using `open()` so that the mode you specify in `open()` won't be altered. You should certainly do this to demonstrate that `umask` is the issue. However, it is generally best to let the user's choice of `umask` prevail — I for one get very stroppy if a program doesn't obey my umask setting; it tends not to be used again after I spot and verify the problem.

The shell also has a (built-in) command `umask` which you can use. The `022` value is a sensible default; most of the time, you do not want just anybody writing to your files.

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-19T06:31:58.550

The permissions of a created file are restricted by the process's current `umask` -- your current `umask` is `022`, so group and world write are always disabled by default. (Which is a good thing, in most cases.) If you really want a group- and world-writable file, you will need to temporarily set `umask(0)` while creating this file (make sure to save the old value returned by the system call, and set it back afterwards!), or "manually" set the file's permissions using `chmod()`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-08-08T12:31:22.603

`umask`将返回掩码的原始值，因此要暂时重置它，您只需要做

```
#include <sys/types.h>
#include <sys/stat.h>

mode_t old_mask = umask(0);
...
umask(old_mask); 
```

`fchmod` *尽管在打开文件后*使用可能更可取- 这将避免更改进程全局状态的问题：

```
fd = open("test", O_CREAT | O_RDWR | O_APPEND, 0777);
if (fd < 0) { ... }
int rv = fchmod(fd, 0777);
if (rv < 0) { /* fchmod errored */ } 
```

# jquery - 如何在jQuery中获取选择框选项值

> ID：12489527
> 
> 赞同：11
> 
> 时间：2012-09-19T06:27:19.517
> 
> 标签：jquery, html-select

如果我有这样的代码，如何在 jQuery 中获取选项选择框的值，

```
<select id='media' name='media'>
    <option value='1'>media1</option>
    <option value='2'>media2</option>
    <option value='3'>media3</option>
</select> 
```

当我为更改事件编码时，

```
$(document).ready(function()
{
    $("#media").change(function()
    {
        var id=$(this).val();
        var dataString = 'id='+ id;
        alert(id); return false;
    });
}); 
```

它给了我`media1`, `media2`,`media3`而不是`1, 2, 3`

如何获得值 1、2、3？

* * *

## 回答 #1

> 赞同：32
> 
> 时间：2013-07-05T11:45:26.467

```
$("#id option:selected").val(); 
```

Here `id` is the id of a select box. I'm sure it will work 100%.

If you want selected text use this one:

```
$("#id option:selected").text(); 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-09-19T06:38:50.527

```
$('#media').change(function(){
alert($(this).val());
}); 
```

这应该按照您希望的方式工作。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2015-12-19T05:20:22.530

尝试这个，

```
jQuery(document).ready(function() {

    jQuery('#media').change(function(e) {

        var id = $(this,':selected').val();
        alert(id);

    });

}); 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-09-19T06:31:19.050

make sure you use latest jquery because its working fine

[http://jsfiddle.net/Hayhv/](http://jsfiddle.net/Hayhv/)

check it give value of option

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2014-01-10T05:35:50.727

我这样做了，

```
<select id='coprede' name='cop_rede'>
<option value='1'>Cop Rio de Janeiro</option>
    <option value='2'>Cop Nordeste</option>
    <option value='3'>Cop Vitoria</option>
    <option value='4'>Cluster Norte</option>
    <option value='5'>Cluster Centro Oeste</option>
</select> 
```

在脚本中：

```
$(function(){

$('#coprede').change(function(){
    alert($('#coprede :selected').val());
    });
}); 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-09-19T07:08:45.757

像这样使用类而不是id..

```
<select class='media' name='media'>
    <option value='1'>media1</option>
    <option value='2'>media2</option>
    <option value='3'>media3</option>
</select>

$(document).ready(function(){
    $(".media").live("change",function(){
        var id = $(this).val();
        var dataString = 'id='+ id;
        alert(id); return false;
    }); 
}); 
```

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2012-09-19T06:36:40.340

使用此代码：

```
$('#media').change(function(){
    alert($('#media :selected').val());// or $('#media').val();        
});​ 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2012-09-19T06:39:41.480

我已经测试了您的代码并且它的工作正常，请确保 id #media 确实从其他控件重复。因为它的配置和从最后找到的 html 控件中获取值

# xcode - 停止时如何检测活动指示器？

> ID：12489528
> 
> 赞同：0
> 
> 时间：2012-09-19T06:27:23.740
> 
> 标签：xcode, uiactivityindicatorview

有什么方法可以检测指标何时停止？当指标成功停止时，我想访问特定的方法。请有人告诉我如何检测它。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-19T07:02:46.440

你负责你创建的任何活动指标——如果你告诉他们停止，他们就会停止。相反，除非您阻止它们，否则它们不会停止。无需*检测*指标是否停止——您可以*决定*何时停止。

# http - 如何使用 curl 使用 UTF-8 编码发布表单数据？

> ID：12489530
> 
> 赞同：28
> 
> 时间：2012-09-19T06:27:44.473
> 
> 标签：http, post, curl, encoding, webserver

我想`POST`（发送）一些表单数据到使用`cURL`终端提示的网络服务器。

这是我到目前为止得到的：

```
curl --data-ascii "content=derinhält&date=asdf" http://myserverurl.com/api/v1/somemethod 
```

问题是变音符号（“äöü”）被替换为“？” 当我在服务器上收到发布请求时。

我想我需要对`POST`请求使用 UTF-8 编码。

有谁知道我怎么能做到这一点？

* * *

## 回答 #1

> 赞同：38
> 
> 时间：2014-02-03T06:26:51.900

您可以在 POST 请求中使用 UTF-8，您只需在请求中指定字符集。

你应该使用这个请求：

```
curl -X POST -H "Content-Type: application/x-www-form-urlencoded; charset=utf-8" --data-ascii "content=derinhält&date=asdf" http://myserverurl.com/api/v1/somemethod 
```

# c# - 这些与writeline（）中的方式有 什么不同？

> ID：12489536
> 
> 赞同：1
> 
> 时间：2012-09-19T06:28:50.623
> 
> 标签：c#, .net, console

> **可能重复：**
> [C# 字符串输出：格式还是连续？](https://stackoverflow.com/questions/16432/c-sharp-string-output-format-or-concat)

```
Console.WriteLine("Hi there, {0} {1}!", userName, userSurname); 
```

* * *

```
Console.WriteLine("Hi there, " + userName + " " + userSurname + "!" ); 
```

我想知道这些方式有什么不同，哪个更好？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-19T07:18:16.007

**为了：**

```
Console.WriteLine("Hi there, {0} {1}!", userName, userSurname); 
```

您的第一个电话解决为：`Console.WriteLine(string,object,object)`

在伊利诺伊州

```
 IL_000d:  ldstr      "Hi there, {0} {1}!"
 IL_0012:  ldloc.0
 IL_0013:  ldloc.1
 IL_0014:  call       void [mscorlib]System.Console::WriteLine(string,
                                                                object,
                                                                object) 
```

**为了：**

```
Console.WriteLine("Hi there, " + userName + " " + userSurname + "!" ); 
```

而您的第二条语句调用`string.Concat`方法。

```
IL_0042:  call       string [mscorlib]System.String::Concat(string[])
IL_0047:  call       void [mscorlib]System.Console::WriteLine(string) 
```

如果您使用[ILSpy](http://ilspy.net/)查看代码，您将看到`+`用于字符串连接的部分已替换为对`string.Concat`方法的调用

```
string userName = "Test";
string userSurname = "Test2";
Console.WriteLine("Hi there, {0} {1}!", userName, userSurname);
Console.WriteLine(string.Concat(new string[]
{
    "Hi there, ",
    userName,
    " ",
    userSurname,
    "!"
})); 
```

关于性能差异，我相信如果有任何差异可以忽略不计。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-19T06:33:00.663

Both are same.

At runtime, first option is resolved to create complete string.

Still First is better as its a much cleaner way of judging what string will look like finally.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-19T06:34:49.407

第一个涉及标准 .NET 格式，第二个是简单的字符串连接。

我更喜欢第一个，因为**它使 display 与 data 分开**，并且它允许我存储不同的格式字符串来进行本地化，例如。这是想法：

```
var EnglishFormat = "Hi there, {0} {1}!";
var FrenchFormat = "Salut tout le monde, {0} {1}!";
...

Console.WriteLine(currentLocaleFormat, userName, userSurname); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-19T06:41:15.270

一般的**String.Format vs String concatenation**主题已经在 StackOverflow 上讨论过很多次，请参考以下问题（只是开始）：

*   [什么时候使用 String.Format 与字符串连接更好？](https://stackoverflow.com/questions/296978/when-is-it-better-to-use-string-format-vs-string-concatenation)
*   [C# 字符串输出：格式还是连接？](https://stackoverflow.com/questions/16432/c-sharp-string-output-format-or-concat)
*   [为什么使用 String.Format？](https://stackoverflow.com/questions/4671610/why-use-string-format)
*   [使用 C# 的最佳字符串连接方法是什么？](https://stackoverflow.com/questions/21078/whats-the-best-string-concatenation-method-using-c)
*   [c# 字符串格式化](https://stackoverflow.com/questions/3019508/c-sharp-string-formatting)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-19T06:33:12.870

There is no difference in the result.

The first one uses string formatting the second one concatenates the strings.

Try to [avoid](https://stackoverflow.com/questions/21078/whats-the-best-string-concatenation-method-using-c) concatenations because it uses more memory

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-09-19T11:13:56.933

两个命令输出相同的结果没有区别。第一个更好，因为它避免了额外的空字符串连接。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-09-19T06:35:00.740

这两个示例都将打印相同的结果。我发现在第一个示例中更容易看到结果应该是什么，如果应该显示的字符串很长，那么可能很难看到它的样子。

当我应该向用户打印一些东西时，我总是使用第一个示例。

# visual-c++ - 为什么我无法捕捉 ToolBar 事件？

> ID：12489537
> 
> 赞同：1
> 
> 时间：2012-09-19T06:29:02.417
> 
> 标签：visual-c++, user-interface, mfc

我有一个包含 4 个按钮的简单对话框。我想更改这 4 个按钮并制作包含 4 个按钮的 ToolBar，并且其行为与这些按钮完全相同。

在 h 文件中 CMFCToolBar ;

在 OnInitDialog 方法中，我调用此代码：

```
if(m_ToolBar.Create(this, AFX_DEFAULT_TOOLBAR_STYLE, 100 ) )
{
    m_ToolBar.SetPaneStyle(m_ToolBar.GetPaneStyle() & ~( CBRS_GRIPPER | CBRS_SIZE_DYNAMIC | CBRS_BORDER_ANY ) );

    m_ToolBar.InsertButton( CMFCToolBarButton( IDC_BTN_1, -1 , _T("Txt_1") ) );
    m_ToolBar.InsertButton( CMFCToolBarButton( IDC_BTN_2, -1 , _T("Txt_2") ) );
    m_ToolBar.InsertButton( CMFCToolBarButton( IDC_BTN_3, -1 , _T("Txt_3") ) );
    m_ToolBar.InsertButton( CMFCToolBarButton( IDC_BTN_4, -1 , _T("Txt_4") ) );

    CSize size = m_ToolBar.CalcFixedLayout( FALSE, TRUE );
    m_ToolBar.SetWindowPos( NULL, 0, 0, size.cx + 10, size.cy + 10 , SWP_NOACTIVATE | SWP_NOZORDER );

} 
```

*   IDC_BTN_XX 与原始按钮的 ID 相同 => 所以在 BEGIN_MESSAGE_MAP 我没有更改任何内容 => 所以我想获得与以前相同的 Click 事件

但不幸的是，在工具栏中单击没有发生任何事情 => 并且工具栏按钮在单击时显示为灰色。

该怎么办 ？我做错了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-19T12:48:45.243

您遵循的过程对于 Visual Studio 2010 是正确的。

如果您在新的 MFC 项目中再次尝试，基于对话框：

*   添加按钮 IDC_BUTTON1
*   管理点击代码
*   使用您在此处提出的相同代码添加工具栏

它有效吗？

# c++ - std::string::iterator 偏移并返回

> ID：12489539
> 
> 赞同：18
> 
> 时间：2012-09-19T06:29:10.127
> 
> 标签：c++, iterator, stdstring

*   我可以通过某个成员将迭代器设置为字符串中的第 5 位，还是我必须这样做`for(i = 0; i < 5; ++i) iterator++;`？
*   给定一个迭代器，如何将其转换为字符串中的数字偏移量？
*   如果 std::iterators 无法做到这一点，可以提升吗？

迭代器 <-> 偏移量

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2012-09-19T06:31:00.097

> 我可以通过某个成员将迭代器设置为字符串中的第 5 位吗

您可以使用[std::advance](http://en.cppreference.com/w/cpp/iterator/advance)

```
std::advance(iterator, 5); 
```

或者

```
iterator += 5; 
```

> 给定一个迭代器，如何将其转换为字符串中的数字偏移量？

您可以使用[std::distance](http://en.cppreference.com/w/cpp/iterator/distance)

```
std::distance(string.begin(), iterator); 
```

或者

```
iterator - string.begin() 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-09-19T06:32:11.950

std::string 迭代器是随机访问迭代器，它定义了 + 运算符。您可以使用`begin(str) + 5`. 偏移量可以通过`std::distance`使用 -operator 来计算随机访问迭代器。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-09-19T06:38:13.843

1.  您可以使用 `iterator + 4`
2.  试试这个：`iterator - str.begin();`
3.  迭代器有运算符`+`and `-`; 您可以使用它们在迭代器和偏移量之间进行转换。

# ms-access - 在 microsoft access 中合并两个“范围”表

> ID：12489542
> 
> 赞同：1
> 
> 时间：2012-09-19T06:29:15.400
> 
> 标签：ms-access

我有两个表格记录不同间隔的深度范围内的参数。每个表都有 DEPTH_FROM 和 DEPTH_TO 字段以及主 ID。我需要将 PARAMETER 分配给 PARAMETER A 范围。

我可以使用子查询来做到这一点吗？如果我需要拆分记录，那么我愿意（我只是不知道如何）。或者，我只想知道 RANGE_B.DEPTH_FROM 记录属于哪个“bin”。

```
LOCATION
POINTID   X   Y   Z
A123  987654  456788  345

RANGE_A
POINTID   Depth_from  Depth_to  Property_A  PROPERTY_B
A123   0  10  AAA  ???
A123  10  17  BBB  ???
A123  17  30  CCC  ???

RANGE_B      
POINTID   Depth_from  Depth_to  Property_B
A123   0   7  ZZZ        
A123   7  15  CCC
A123  15  30  VVV 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-19T09:07:35.977

很容易得到一个垃圾箱：

```
SELECT 
   RANGE_B.Depth_from, 
   RANGE_B.Depth_to, 
   RANGE_A.Depth_from, 
   RANGE_A.Depth_to, 
   RANGE_A.Property_A
FROM RANGE_A, RANGE_B
WHERE RANGE_B.Depth_from Between [RANGE_A].[Depth_from] 
      And [RANGE_A].[Depth_to] 
```

如果您想多解释一点，可能会有更接近您需要的答案。

# jsf - 错误渲染视图：java.lang.IllegalStateException：getOutputStream() 已为此响应调用

> ID：12489543
> 
> 赞同：1
> 
> 时间：2012-09-19T06:29:22.933
> 
> 标签：jsf, download, illegalstateexception

我在 JSF 和 spring 中创建一个项目，其主要目的是在浏览器中生成 PDF 文件。一切似乎都很好并且也生成了pdf，但是在控制台上我得到了这个异常。有人知道吗？我搜索并发现很多人都有这个问题，但我没有找到适合我的解决方案。

```
 SEVERE: Error Rendering View[/WebPages/SearchPages/index.xhtml]
    java.lang.IllegalStateException: PWC3991: getOutputStream() has already been called for this response 
```

创建输出流对象时出现此错误

```
HTTPServletResponse response = (HTTPServletResponse)FacesContext.getCurrentInstance().getExternalContext().getResponse();

ServletOutputStream out = response.getOutputStream(); 
```

我的创作过程中是否有任何问题或其他原因？任何帮助都将不胜感激

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-19T12:43:51.610

您需要告诉 JSF 您已经自己完成了 HTTP 响应，否则 JSF 在 action 方法完成后仍然会继续执行默认的 RENDER_RESPONSE 作业，这将导致这个异常，因为响应已经提交。

您可以通过调用[`FacesContext#responseComplete()`](http://docs.oracle.com/javaee/6/api/javax/faces/context/FacesContext.html#responseComplete%28%29)action 方法来做到这一点。

> ## 响应完成
> 
> `public abstract void responseComplete()`
> 
> 通知 JavaServer Faces 实现，该请求的 HTTP 响应已经生成（例如 HTTP 重定向），并且请求处理生命周期应在当前阶段完成后立即终止。

### 也可以看看：

*   [如何从 JSF 支持 bean 提供文件下载？](https://stackoverflow.com/questions/9391838/how-to-stream-a-file-download-in-a-jsf-backing-bean/9394237#9394237)

# infragistics - Infragistics Toolbar 工具 (ControlContainer) 大小设置。找不到 Dock 填充属性

> ID：12489544
> 
> 赞同：0
> 
> 时间：2012-09-19T06:29:33.743
> 
> 标签：infragistics

我有一个自定义控件结构如下

ToolbarsManager
--MainMenuBar
-- **MyCustomToolbar**（仅包含一个工具）
    - **ControlContainer 工具**（仅包含我的自定义控件）
        - **CustomUserControl**

我想调整它们的宽度。通过设置 ToolbarsManager 的 FillEntireRow 属性来调整自定义工具栏的宽度。但无法设置控件容器工具和自定义控件的宽度。**我希望它们全部填充到整行。**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-05T02:59:01.763

尝试将 ControlContainerTool.SharedProps.Spring 设置为 True。我相信当它位于工具栏中且 FillEntireRow 设置为 True 时，它​​会增加工具的宽度。

# javascript - 在客户端获取浏览器的名称

> ID：12489546
> 
> 赞同：34
> 
> 时间：2012-09-19T06:29:35.660
> 
> 标签：javascript, browser, cross-browser

是否有任何对象或方法返回有关浏览器、客户端的数据？

例如，我需要检测浏览器是否为 IE（内部资源管理器）。以下是代码片段。

```
function isInternetExplorer()
{
    if(navigator.appName.indexOf("Microsoft Internet Explorer") != -1)
    {
        return true;
    }
    return false;
} 
```

有没有更好的办法？

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2013-04-17T08:40:40.837

JavaScript 方面 - 您可以通过以下方式获取浏览器名称...

```
if(window.navigator.appName == "") OR if(window.navigator.userAgent == "") 
```

* * *

## 回答 #2

> 赞同：19
> 
> 时间：2014-03-14T10:09:01.297

这是纯**JavaScript 解决方案**。我是必需的。
我尝试了不同的浏览器。它工作正常。希望能帮助到你。

[如何检测浏览器名称？](http://www.javascripter.net/faq/browsern.htm)

您可以使用`navigator.appName`和`navigator.userAgent`属性。该`userAgent`属性更可靠，`appName`​​因为例如 Firefox（和一些其他浏览器）可能会返回字符串“Netscape”作为`navigator.appName`与 Netscape Navigator 兼容的值。

但是请注意，这`navigator.userAgent`也可能被欺骗——也就是说，客户端几乎可以用任何字符串替换他们的`userAgent`. 因此，无论我们从中推断出什么，`appName`或者`userAgent`应该持保留态度。

```
var nVer = navigator.appVersion;
var nAgt = navigator.userAgent;
var browserName  = navigator.appName;
var fullVersion  = ''+parseFloat(navigator.appVersion); 
var majorVersion = parseInt(navigator.appVersion,10);
var nameOffset,verOffset,ix;

// In Opera, the true version is after "Opera" or after "Version"
if ((verOffset=nAgt.indexOf("Opera"))!=-1) {
   browserName = "Opera";
   fullVersion = nAgt.substring(verOffset+6);
   if ((verOffset=nAgt.indexOf("Version"))!=-1) 
     fullVersion = nAgt.substring(verOffset+8);
}
// In MSIE, the true version is after "MSIE" in userAgent
else if ((verOffset=nAgt.indexOf("MSIE"))!=-1) {
   browserName = "Microsoft Internet Explorer";
   fullVersion = nAgt.substring(verOffset+5);
}
// In Chrome, the true version is after "Chrome" 
else if ((verOffset=nAgt.indexOf("Chrome"))!=-1) {
   browserName = "Chrome";
   fullVersion = nAgt.substring(verOffset+7);
}
// In Safari, the true version is after "Safari" or after "Version" 
else if ((verOffset=nAgt.indexOf("Safari"))!=-1) {
   browserName = "Safari";
   fullVersion = nAgt.substring(verOffset+7);
   if ((verOffset=nAgt.indexOf("Version"))!=-1) 
     fullVersion = nAgt.substring(verOffset+8);
}
// In Firefox, the true version is after "Firefox" 
else if ((verOffset=nAgt.indexOf("Firefox"))!=-1) {
    browserName = "Firefox";
    fullVersion = nAgt.substring(verOffset+8);
}
// In most other browsers, "name/version" is at the end of userAgent 
else if ( (nameOffset=nAgt.lastIndexOf(' ')+1) < (verOffset=nAgt.lastIndexOf('/')) ) {
    browserName = nAgt.substring(nameOffset,verOffset);
    fullVersion = nAgt.substring(verOffset+1);
    if (browserName.toLowerCase()==browserName.toUpperCase()) {
       browserName = navigator.appName;
    }
}
// trim the fullVersion string at semicolon/space if present
if ((ix=fullVersion.indexOf(";"))!=-1)
    fullVersion=fullVersion.substring(0,ix);
if ((ix=fullVersion.indexOf(" "))!=-1)
    fullVersion=fullVersion.substring(0,ix);

majorVersion = parseInt(''+fullVersion,10);
if (isNaN(majorVersion)) {
    fullVersion  = ''+parseFloat(navigator.appVersion); 
    majorVersion = parseInt(navigator.appVersion,10);
}

document.write(''
                +'Browser name  = '+browserName+'<br>'
                +'Full version  = '+fullVersion+'<br>'
                +'Major version = '+majorVersion+'<br>'
                +'navigator.appName = '+navigator.appName+'<br>'
                +'navigator.userAgent = '+navigator.userAgent+'<br>'); 
```

[来源 javascripter.net](http://www.javascripter.net/faq/browsern.htm)

* * *

## 回答 #3

> 赞同：14
> 
> 时间：2012-09-19T06:32:43.840

**编辑：**由于答案对较新版本的 jquery 无效，因为 jQuery.browser 在 1.9 版中已弃用，因此请使用 Jquery **[Migrate 插件](https://github.com/jquery/jquery-migrate/)**。

* * *

**原始答案**

[jQuery.browser](http://api.jquery.com/jQuery.browser/)

`jQuery.browser` 和 `jQuery.browser.version`

是你要走的路...

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2012-09-19T06:39:35.457

在 c# 中，您的浏览器名称使用：

```
System.Web.HttpBrowserCapabilities browser = Request.Browser; 
```

有关详细信息，请参阅链接。

[http://msdn.microsoft.com/en-us/library/3yekbd5b%28v=vs.100%29.aspx](http://msdn.microsoft.com/en-us/library/3yekbd5b%28v=vs.100%29.aspx)

在客户端：

**查询：**

```
jQuery.browser 
```

详情见链接：

[http://api.jquery.com/jQuery.browser/](http://api.jquery.com/jQuery.browser/)

* * *

## 回答 #5

> 赞同：6
> 
> 时间：2019-10-31T19:27:54.527

[我在这里](https://social.msdn.microsoft.com/Forums/en-US/edde0150-9478-4ca6-ba0f-9e084b5a4719/how-to-detect-microsoft-edge-chromium-chrome-ie-browser-using-javascript)找到了一个纯粹的 Javascript 解决方案，它似乎适用于 PC 和 Mac 的主要浏览器。我在两个平台的 BrowserStack 中测试了它，它就像一个梦一样工作。Jason D'Souza 在此线程中发布的 Javascript 解决方案非常好，因为它为您提供了大量有关浏览器的信息，但它在识别 Edge 时遇到了问题，它看起来像 Chrome。他的代码可能会使用此解决方案进行一些修改，以使其也适用于 Edge。这是我找到的代码片段：

```
var browser = (function (agent) {
    switch (true) {
        case agent.indexOf("edge") > -1: return "edge";
        case agent.indexOf("edg") > -1: return "chromium based edge (dev or canary)";
        case agent.indexOf("opr") > -1 && !!window.opr: return "opera";
        case agent.indexOf("chrome") > -1 && !!window.chrome: return "chrome";
        case agent.indexOf("trident") > -1: return "ie";
        case agent.indexOf("firefox") > -1: return "firefox";
        case agent.indexOf("safari") > -1: return "safari";
        default: return "other";
    }
})(window.navigator.userAgent.toLowerCase());
console.log(window.navigator.userAgent.toLowerCase() + "\n" + browser); 
```

**更新**

[这是来自BSlink 的答案](https://stackoverflow.com/a/68552197/7520419)的一个更好的版本，它有一些问题。队列中的编辑太多，我无法在他的答案中提交一个，所以我正在编辑自己的答案以分享更正：

```
 const agent = window.navigator.userAgent.toLowerCase();
  const browser =
    agent.indexOf('edge') > -1 ? 'edge'
      : agent.indexOf('edg') > -1 ? 'chromium based edge'
      : agent.indexOf('opr') > -1 && window.opr ? 'opera'
      : agent.indexOf('chrome') > -1 && window.chrome ? 'chrome'
      : agent.indexOf('trident') > -1 ? 'ie'
      : agent.indexOf('firefox') > -1 ? 'firefox'
      : agent.indexOf('safari') > -1 ? 'safari'
      : 'other';

  console.log(`${agent}\n${browser}`); 
```

* * *

## 回答 #6

> 赞同：4
> 
> 时间：2012-09-19T06:47:34.297

浏览器在`navigator.userAgent`. 如果您使用的是 jQuery，那么最好使用[`jQuery.browser`](http://api.jquery.com/jQuery.browser/)@Rab Nawaz 所说的。但是，正如 API 文档所说，如果可能，最好检查功能支持。引用文档：

> 我们建议不要使用此属性；请尝试改用特征检测（参见[jQuery.support](http://api.jquery.com/jQuery.support/)）。jQuery.browser 可能会在 jQuery 的未来版本中移动到插件中。

这是一个代码示例：

```
function isIE() {
    if (window.jQuery) {
        return jQuery.browser.msie || false;
    } else {
        // adapted from jQuery's source:
        return navigator.userAgent.toLowerCase().indexOf('msie') >= 0;
    }
} 
```

* * *

## 回答 #7

> 赞同：3
> 
> 时间：2017-04-03T12:19:49.330

这是在回答

[如何检测 Safari、Chrome、IE、Firefox 和 Opera 浏览器？](https://stackoverflow.com/questions/9847580/how-to-detect-safari-chrome-ie-firefox-and-opera-browser)

检查[`this`](https://jsfiddle.net/311aLtkz/) 小提琴。

希望这可以帮助。

* * *

## 回答 #8

> 赞同：3
> 
> 时间：2021-07-27T21:57:44.107

我喜欢[Sintrias 的回答](https://stackoverflow.com/a/58650077)，但我想用更现代的语法更新一点。

```
 const { userAgent } = window.navigator;
  const browser =
    userAgent.indexOf('edge') > -1 ? 'edge'
      : userAgent.indexOf('edg') > -1 ? 'chromium based edge'
      : userAgent.indexOf('opr') > -1 && !!window.opr ? 'opera'
      : userAgent.indexOf('chrome') > -1 && !!window.chrome ? 'chrome'
      : userAgent.indexOf('trident') > -1 ? 'ie'
      : userAgent.indexOf('firefox') > -1 ? 'firefox'
      : userAgent.indexOf('safari') > -1 ? 'safari'
      : 'other';

  console.log(`${userAgent.toLowerCase()}\n${browser}`); 
```

* * *

## 回答 #9

> 赞同：2
> 
> 时间：2012-09-19T06:54:13.720

这完全取决于您真正想做的事情，但在未来和现在，最好的方法是避免**浏览器检测**并检查功能。像**Canvas**、**Audio**、**WebSockets**等通过简单的 javascript 调用或在你的 CSS 中，对我来说你最好的方法是使用像[ModernizR](http://modernizr.com/)这样的工具：

> 与传统的但高度不可靠的“UA 嗅探”方法不同，后者通过其（用户可配置的）`navigator.userAgent`属性检测浏览器，**Modernizr 进行实际的特征检测**以可靠地识别各种浏览器可以做什么和不能做什么。

如果使用 CSS，您可以这样做：

```
.no-js .glossy,
.no-cssgradients .glossy {
    background: url("images/glossybutton.png");
}

.cssgradients .glossy {
    background-image: linear-gradient(top, #555, #333);
} 
```

因为它将加载并附加所有功能作为`<html>`元素中的类名，并且您将能够根据 CSS 做您想做的事情。

您甚至可以根据功能加载文件，例如，如果浏览器没有原生支持，则加载 polyfill js 和 css

```
Modernizr.load([
  // Presentational polyfills
  {
    // Logical list of things we would normally need
    test : Modernizr.fontface && Modernizr.canvas && Modernizr.cssgradients,
    // Modernizr.load loads css and javascript by default
    nope : ['presentational-polyfill.js', 'presentational.css']
  },
  // Functional polyfills
  {
    // This just has to be truthy
    test : Modernizr.websockets && window.JSON,
    // socket-io.js and json2.js
    nope : 'functional-polyfills.js',
    // You can also give arrays of resources to load.
    both : [ 'app.js', 'extra.js' ],
    complete : function () {
      // Run this after everything in this group has downloaded
      // and executed, as well everything in all previous groups
      myApp.init();
    }
  },
  // Run your analytics after you've already kicked off all the rest
  // of your app.
  'post-analytics.js'
]); 
```

从 javascript 请求功能的简单示例：

> [http://jsbin.com/udoyic/1](http://jsbin.com/udoyic/1)

* * *

## 回答 #10

> 赞同：2
> 
> 时间：2017-04-13T09:11:15.887

此代码将返回 "browser" 和 "browserVersion"
适用于 80 多个浏览器中的 95%

```
var geckobrowsers;
var browser = "";
var browserVersion = 0;
var agent = navigator.userAgent + " ";
if(agent.substring(agent.indexOf("Mozilla/")+8, agent.indexOf(" ")) == "5.0" && agent.indexOf("like Gecko") != -1){
    geckobrowsers = agent.substring(agent.indexOf("like Gecko")+10).substring(agent.substring(agent.indexOf("like Gecko")+10).indexOf(") ")+2).replace("LG Browser", "LGBrowser").replace("360SE", "360SE/");
    for(i = 0; i < 1; i++){
        geckobrowsers = geckobrowsers.replace(geckobrowsers.substring(geckobrowsers.indexOf("("), geckobrowsers.indexOf(")")+1), "");
    }
    geckobrowsers = geckobrowsers.split(" ");
    for(i = 0; i < geckobrowsers.length; i++){
        if(geckobrowsers[i].indexOf("/") == -1)geckobrowsers[i] = "Chrome";
        if(geckobrowsers[i].indexOf("/") != -1)geckobrowsers[i] = geckobrowsers[i].substring(0, geckobrowsers[i].indexOf("/"));
    }
    if(geckobrowsers.length < 4){
        browser = geckobrowsers[0];
    } else {
        for(i = 0; i < geckobrowsers.length; i++){
            if(geckobrowsers[i].indexOf("Chrome") == -1 && geckobrowsers[i].indexOf("Safari") == -1 && geckobrowsers[i].indexOf("Mobile") == -1 && geckobrowsers[i].indexOf("Version") == -1)browser = geckobrowsers[i];
        }
    }
    browserVersion = agent.substring(agent.indexOf(browser)+browser.length+1, agent.indexOf(browser)+browser.length+1+agent.substring(agent.indexOf(browser)+browser.length+1).indexOf(" "));
} else if(agent.substring(agent.indexOf("Mozilla/")+8, agent.indexOf(" ")) == "5.0" && agent.indexOf("Gecko/") != -1){
    browser = agent.substring(agent.substring(agent.indexOf("Gecko/")+6).indexOf(" ") + agent.indexOf("Gecko/")+6).substring(0, agent.substring(agent.substring(agent.indexOf("Gecko/")+6).indexOf(" ") + agent.indexOf("Gecko/")+6).indexOf("/"));
    browserVersion = agent.substring(agent.indexOf(browser)+browser.length+1, agent.indexOf(browser)+browser.length+1+agent.substring(agent.indexOf(browser)+browser.length+1).indexOf(" "));
} else if(agent.substring(agent.indexOf("Mozilla/")+8, agent.indexOf(" ")) == "5.0" && agent.indexOf("Clecko/") != -1){
    browser = agent.substring(agent.substring(agent.indexOf("Clecko/")+7).indexOf(" ") + agent.indexOf("Clecko/")+7).substring(0, agent.substring(agent.substring(agent.indexOf("Clecko/")+7).indexOf(" ") + agent.indexOf("Clecko/")+7).indexOf("/"));
    browserVersion = agent.substring(agent.indexOf(browser)+browser.length+1, agent.indexOf(browser)+browser.length+1+agent.substring(agent.indexOf(browser)+browser.length+1).indexOf(" "));
} else if(agent.substring(agent.indexOf("Mozilla/")+8, agent.indexOf(" ")) == "5.0"){
    browser = agent.substring(agent.indexOf("(")+1, agent.indexOf(";"));
    browserVersion = agent.substring(agent.indexOf(browser)+browser.length+1, agent.indexOf(browser)+browser.length+1+agent.substring(agent.indexOf(browser)+browser.length+1).indexOf(" "));
} else if(agent.substring(agent.indexOf("Mozilla/")+8, agent.indexOf(" ")) == "4.0" && agent.indexOf(")")+1 == agent.length-1){
    browser = agent.substring(agent.indexOf("(")+1, agent.indexOf(")")).split("; ")[agent.substring(agent.indexOf("(")+1, agent.indexOf(")")).split("; ").length-1];
} else if(agent.substring(agent.indexOf("Mozilla/")+8, agent.indexOf(" ")) == "4.0" && agent.indexOf(")")+1 != agent.length-1){
    if(agent.substring(agent.indexOf(") ")+2).indexOf("/") != -1)browser = agent.substring(agent.indexOf(") ")+2, agent.indexOf(") ")+2+agent.substring(agent.indexOf(") ")+2).indexOf("/"));
    if(agent.substring(agent.indexOf(") ")+2).indexOf("/") == -1)browser = agent.substring(agent.indexOf(") ")+2, agent.indexOf(") ")+2+agent.substring(agent.indexOf(") ")+2).indexOf(" "));
    browserVersion = agent.substring(agent.indexOf(browser)+browser.length+1, agent.indexOf(browser)+browser.length+1+agent.substring(agent.indexOf(browser)+browser.length+1).indexOf(" "));
} else if(agent.substring(0, 6) == "Opera/"){
    browser = "Opera";
    browserVersion = agent.substring(agent.indexOf(browser)+browser.length+1, agent.indexOf(browser)+browser.length+1+agent.substring(agent.indexOf(browser)+browser.length+1).indexOf(" "));
    if(agent.substring(agent.indexOf("(")+1).indexOf(";") != -1)os = agent.substring(agent.indexOf("(")+1, agent.indexOf("(")+1+agent.substring(agent.indexOf("(")+1).indexOf(";"));
    if(agent.substring(agent.indexOf("(")+1).indexOf(";") == -1)os = agent.substring(agent.indexOf("(")+1, agent.indexOf("(")+1+agent.substring(agent.indexOf("(")+1).indexOf(")"));
} else if(agent.substring(0, agent.indexOf("/")) != "Mozilla" && agent.substring(0, agent.indexOf("/")) != "Opera"){
    browser = agent.substring(0, agent.indexOf("/"));
    browserVersion = agent.substring(agent.indexOf(browser)+browser.length+1, agent.indexOf(browser)+browser.length+1+agent.substring(agent.indexOf(browser)+browser.length+1).indexOf(" "));
} else {
    browser = agent;
}
alert(browser + " v" + browserVersion); 
```

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2019-12-21T08:22:48.813

基于[is.js](https://is.js.org/)，您可以编写一个帮助文件来获取浏览器名称，如下所示 -

```
const Browser = {};
const vendor = (navigator && navigator.vendor || '').toLowerCase();
const userAgent = (navigator && navigator.userAgent || '').toLowerCase();

Browser.getBrowserName = () => {
  if(isOpera()) return 'opera'; // Opera
  else if(isChrome()) return 'chrome'; // Chrome
  else if(isFirefox()) return 'firefox'; // Firefox
  else if(isSafari()) return 'safari'; // Safari
  else if(isInternetExplorer()) return 'ie'; // Internet Explorer
}

// Start Detecting browser helpers functions
function isOpera() {
  const isOpera = userAgent.match(/(?:^opera.+?version|opr)\/(\d+)/);
  return isOpera !== null;
}

function isChrome() {
  const isChrome = /google inc/.test(vendor) ? userAgent.match(/(?:chrome|crios)\/(\d+)/) : null;
  return isChrome !== null;
}

function isFirefox() {
  const isFirefox = userAgent.match(/(?:firefox|fxios)\/(\d+)/);
  return isFirefox !== null;
}

function isSafari() {
  const isSafari = userAgent.match(/version\/(\d+).+?safari/);
  return isSafari !== null;
}

function isInternetExplorer() {
  const isInternetExplorer = userAgent.match(/(?:msie |trident.+?; rv:)(\d+)/);
  return isInternetExplorer !== null;
}
// End Detecting browser helpers functions

export default Browser; 
```

只需将此文件导入您需要的地方。

```
import Browser from './Browser.js';

const userBrowserName = Browser.getBrowserName() // return your browser name
                                                 // opera | chrome | firefox | safari | ie 
```

# jquery-ui - how can i get minimize and restore functionality on lightbox ..?

> ID：12489555
> 
> 赞同：0
> 
> 时间：2012-09-19T06:30:30.920
> 
> 标签：jquery-ui, jquery, jquery-plugins, jquery-selectors

like close button i want minimize functionality over light box so when it is minimized it comes to the bottom of the window showing only title and minimize button converted into restore button so when i press it ,that light box will appear and if any another lightbox is open they will get minimized.so i want only one lightbox to be opend.i tried i dn't hav any idea how i will do this if u can add some magic code to [this is my fiddle](http://jsfiddle.net/ketul/RuGAy/1/) please look at it. thank you

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-19T06:35:04.577

像这样编辑

```
 $('.lightbox').click(function() {
    var thisBox = $(this).attr("name");
            //console.log(thisBox);
    $('.backdrop,.' + thisBox).animate({
        'opacity': '.50'
    }, 300, 'linear');
    $('.box').animate({
        'opacity': '1.00'
    }, 300, 'linear');
    $('.backdrop,.' + thisBox).css('display', 'block');
}); 
```

只需评论 console.log(thisBox)

# wsh - FileExists 签入 WSH 脚本，给出对象预期错误

> ID：12489557
> 
> 赞同：0
> 
> 时间：2012-09-19T06:30:41.197
> 
> 标签：wsh

为什么我在 - If (fs.FileExists(filename)) 中收到运行时错误“预期对象”？

```
 var filename = "d:\\list.txt";

  fs = new ActiveXObject("Scripting.FileSystemObject");

  If (fs.FileExists(filename)) //i 'm getting a runtime error "Object expected" here
  {
    // Open the file 
  } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-19T11:34:06.723

更改`If`为`if`。JScript 是一种区分大小写的语言。

# iphone - How to access image from Asset URL in iPhone?

> ID：12489563
> 
> 赞同：0
> 
> 时间：2012-09-19T06:31:16.523
> 
> 标签：iphone, objective-c, image, nsurl

I am getting asset URL from `NSURL* localUrl = (NSURL *)[info valueForKey:UIImagePickerControllerReferenceURL];` and I saved it in a local database. And at the time of retrieving I have got an string and I have convert it into NSURL through `NSURL *url1 = [NSURL URLWithString:image_path];` but when I get NSData from this URL through `NSData *myData = [NSData dataWithContentsOfURL:url1];` it return NULL. Can anyone help me to get NSData and convert it into image.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-19T06:51:46.580

你不能直接转换它。您将不得不使用`ALAsset Block`. 这是同一事物的完整描述。

[从 iPhone 中的 ALAsset 检索的 URL 显示图像](https://stackoverflow.com/questions/3837115/display-image-from-url-retrieved-from-alasset-in-iphone)

# unit-testing - 如何在 TCl 中测试私有方法

> ID：12489567
> 
> 赞同：1
> 
> 时间：2012-09-19T06:31:23.100
> 
> 标签：unit-testing, testing, tcl

如果这个问题看起来很愚蠢，我很抱歉，我是 TCL 和 TCLtest 的新手，我正在尝试对一些 TCLOO 程序执行单元测试，并且我在测试私有方法时遇到困难（使用关键字'my'调用的方法）。需要指导

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-19T08:42:35.393

撇开是否*应该*测试私有方法的问题不谈，您可以通过以下方案之一获得这些方法：

*   使用`[info object namespace $inst]::my $methodname`来调用它，它利用了这样一个事实，即您可以使用自省来找出真实的名称`my`（这保证有效；当您使用 , 和 Tk's 之类的命令进行回调时需要`vwait`它`trace`）`bind`。
*   用于*为特定实例*`oo::objdefine $inst export $methodname`公开方法。到那时，您可以照常进行。*`$inst $methodname`*

 ***结果：您不应该将 TclOO 对象的私有方法用于***必须*受到严格保护的事物（与 Java 对象中的私有字段相比）。处理此类信息隐藏的正确级别是将其放在主解释器中（在[安全的从属](http://www.tcl.tk/man/tcl8.6/TclCmd/safe.htm)中评估不受信任的代码）或将受保护的信息保持在底层实现（即 C）级别。这两个中的最佳选择取决于您的程序的详细信息；通常很明显哪个是正确的选择（如果你只是在编写 Tcl 代码，你不会为此编写 C）。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-19T07:14:08.623

这可能看起来像 OT，但请耐心等待。

你确定你必须测试私有方法吗？这听起来像是测试实现，这是你不应该做的事情。你应该测试你的类的行为，这是通过它的公共方法测试的。

如果您在其中一个私有方法中有一段复杂的代码，并且您觉得需要对其进行单独测试，请考虑将代码重构为两个单独的类。在两个类之一中公开需要测试的方法。

这样一来，您就可以避免拥有可以做所有事情的“神级”，并且可以测试您想要测试的内容。您可能想阅读更多关于单一职责原则的信息。

如果你需要关于重构的特定书名，我推荐 Robert C. Martin 的“Clean Code”。我喜欢那本书！*

# sql - 如何使用 sql 查询解决这种情况？

> ID：12489579
> 
> 赞同：0
> 
> 时间：2012-09-19T06:32:50.540
> 
> 标签：sql

我有一个包含值的表

```
bill_amt days month
250        28  Feb
300        31  mar
500        30  apr. 
```

我的债务总额是700。

现在的问题是我需要添加 bill_amts 来获得我的总债务金额。

例如：对于 apr-> 我的账单金额为 500，天数为 30。我的总债务是 700。我还需要 200 来清偿债务。所以我会从行军中取出 200 个。

但是三月有 300 天，天数为 31。所以我需要单独从中取 200 天，并且只需要计算适当的日期。例如：(200/300 *31)- 这将给我 200 的游行天数。

现在我需要将 apr 的总天数和新发现的 3 月的天数相加，得到我的总天数。

如何为此编写代码？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-19T07:28:48.067

使用函数找到以下解决方案以获得否。支付债务金额的天数。

```
 CREATE FUNCTION GetNoOfDays  
    (    
        @debt_amt DECIMAL(14, 2) 
    ) 
    RETURNS INT  
    AS 
    BEGIN
        DECLARE @days INT = 0
        DECLARE @amt DECIMAL(14, 2)
        DECLARE @day INT
        DECLARE c1 CURSOR FOR 
        SELECT [Days], [Amount] FROM Account ORDER BY [Month] DESC

        OPEN c1

        FETCH NEXT FROM c1 
        INTO @day, @amt

        WHILE @@FETCH_STATUS = 0
        BEGIN
            IF @debt_amt > @amt
            BEGIN
                SET @days = @days + @day
                SET @debt_amt = @debt_amt - @amt
            END
            ELSE
            BEGIN
                SET @days = @days + ROUND(@debt_amt / @amt * @day, 0)
                SET @debt_amt = 0
                BREAK
            END

            FETCH NEXT FROM c1 
            INTO @day, @amt

        END

        CLOSE c1
        DEALLOCATE c1

        RETURN @days
    END

    GO

    SELECT dbo.GetNoOfDays(700) 
```

注意：请根据您的环境替换表名称。我假设 Month 列存储数字月份值，如 2、3、4 等，并按 desc 顺序对其进行排序。对于年度数据，您应该存储诸如 201202、201203、201204 等值。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-19T07:29:41.940

试试这个 ：

```
DECLARE @Debt AS DECIMAL
DECLARE @Days AS DECIMAL
DECLARE @Amount AS DECIMAL
DECLARE @TotalDays AS DECIMAL
SET @TotalDays = 0

SET @Debt = 700

DECLARE MyCursor CURSOR FOR 
    SELECT [Days], Amount FROM Test
    OPEN MyCursor
    FETCH NEXT FROM MyCursor INTO @Days, @Amount
    WHILE (@@Fetch_Status = 0 AND @Debt > 0)
    BEGIN
        IF(@Debt > @Amount)
            SET @TotalDays = @TotalDays + @Days
        ELSE
            SET @TotalDays = @TotalDays + (@Days * @Debt/@Amount)

        SET @Debt = @Debt - @Amount

        FETCH NEXT FROM MyCursor INTO @Days, @Amount
    END

    CLOSE MyCursor
    DEALLOCATE MyCursor

SELECT @TotalDays 
```

# c# - ASPxHtmlEditor 中的上下文菜单

> ID：12489581
> 
> 赞同：0
> 
> 时间：2012-09-19T06:33:02.480
> 
> 标签：c#, asp.net, web-applications, devexpress

我正在用 c# 开发 asp.net 项目。在我的应用程序中，我使用 Devexpress htmleditors，我需要自定义 conetxtmenu。因此，我尝试从后面的代码中添加 conextmenu 项，但出现以下错误。

1.DevExpress.Web.ASPxHtmlEditor.ASPxHtmlEditor.ContextMenuItems' 由于其保护级别而无法访问

2.属性或索引器'DevExpress.Web.ASPxHtmlEditor.ASPxHtmlEditor.ContextMenuItems'不能在此上下文中使用，因为get访问器不可访问

这就是我在后面的代码中尝试过的。

```
htmlEdtBody.ContextMenuItems.Insert(0, new HtmlEditorContextMenuItem("Add Title...", "AddTitle")); 
```

有谁知道这是什么原因？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-19T07:45:14.190

我建议您通过 ASPxHtmlEditor 的演示 -[功能 - 上下文菜单](http://demos.devexpress.com/aspxhtmleditordemos/Features/ContextMenu.aspx)，有一个很好的演示，可以帮助您了解它是如何工作的。

首先设置[ASPxHtmlEditorSettings.AllowContextMenu](http://documentation.devexpress.com/AspNet/DevExpressWebASPxHtmlEditorASPxHtmlEditorSettings_AllowContextMenutopic.aspx)属性。您可能需要[ASPxClientHtmlEditor.ContextMenuShowing](http://documentation.devexpress.com/AspNet/DevExpressWebASPxHtmlEditorScriptsASPxClientHtmlEditor_ContextMenuShowingtopic.aspx)事件。 [ASP.NET HTML 编辑器控件](http://www.devexpress.com/Subscriptions/DXperience/DXv2/index.xml?page=53)

参考 -[上下文菜单](http://documentation.devexpress.com/#AspNet/CustomDocument7531)

```
protected void Page_Load(object sender, EventArgs e) {
     if (!IsPostBack) {
          MyHtmlEditor.ContextMenuItems.CreateDefaultItems();
          MyHtmlEditor.ContextMenuItems.Insert(0, new HtmlEditorContextMenuItem("Add Title...", "AddTitle"));
          MyHtmlEditor.ContextMenuItems.Insert(1, new HtmlEditorContextMenuItem("Change Title...", "ChangeTitle"));
          MyHtmlEditor.ContextMenuItems.Insert(2, new HtmlEditorContextMenuItem("Remove Title", "RemoveTitle"));
     }
} 
```

这 - [ASPxGridView - 使用弹出菜单和 ContextMenu 事件进行编辑](http://www.devexpress.com/Support/Center/p/Q268658.aspx) 可能会对您有所帮助..

# javascript - 通过 AJAX 放置方法在 Google Chrome 中不起作用

> ID：12489582
> 
> 赞同：0
> 
> 时间：2012-09-19T06:33:09.597
> 
> 标签：javascript, jquery, ajax, rest, google-chrome

我在 Mozilla 和 IE 中可以正常工作，但由于某种原因不是 chrome。在 chrome 中，每次返回错误代码为零时都会执行错误回调。Stackoverflow 上的许多文章不断重申所有主流浏览器如何通过 AJAX 而不是表单来支持“PUT”方法。Chrome似乎是个例外......

**JavaScript**

```
 function works(){alert("working");} // just a success callback

    $(document).ready(function(){

    $("#crudForm").submit(function(){
        $.ajax({url:"/UtilityDashboard/MeasurementNodes",
            data:parseFormData("crudForm"),
            cache: "false",
            async: "false",
            dataType: "text",
            contentType: "application/x-www-form-urlencoded",
            type:"put",
            success: works(),
            error:function(xhr){alert(xhr.status + xhr.statusText);} });
    });      

    }); 
```

**HTML**

```
 <form id="crudForm">
       Name<BR/>
       <input type="text" name="name"/><BR/><BR/>
       Node Id<BR/>
       <input type="text" name="node_id"/><BR/><BR/>
       Type<BR/> 
       <input type="text" name="type"/><BR/><BR/>
       Parent<BR/> 
       <input type="text" name="parent_id"/><BR/><BR/>
       Longitude<BR/> 
       <input type="text" name="longitude"/><BR/><BR/>
       Latitude<BR/>
       <input type="text" name="latitude"/><BR/><BR/>           
       Description<BR/>          
       <textarea name="description" rows="5" cols="40">Insert description of measurement node here</textarea><BR/><BR/>           
       <input type="submit" value="Add Node"/>

    </form> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-26T14:25:16.843

所以*Eugene*和*OhgodWhy*是正确的。Chrome 确实支持 XMLHTTPRequest 对象中的“put”方法！

**解决方案**

当我停止使用“提交”事件来传输我的表单数据时，我遇到的问题就消失了，而是依赖于“点击”事件。这解决了我在提交 chrome 后将表单变量附加到当前 URL 时遇到的一些其他问题。这可能也可以通过使用 event.preventDefault 来解决。

# magento - I want to know why my Magento Module with only controllers is not working

> ID：12489587
> 
> 赞同：1
> 
> 时间：2012-09-19T06:33:18.823
> 
> 标签：magento, module, controllers

**This is my activation file, in app/etc/modules/My_Test.xml**

```
<?xml version="1.0" encoding="UTF-8"?>
<config>
    <modules>
        <My_Test>
            <active>true</active>
            <codePool>local</codePool>
        </My_Test>
    </modules>
</config> 
```

**This is my config file in app/code/local/MY/Test/etc/config.xml**

```
<?xml version="1.0" encoding="UTF-8"?>
<config>
    <global>

        <helpers>
            <my_test>
                <class>My_Test_Helper</class>
            </my_test>
        </helpers>
        <models>
            <mytest>
                <class>My_Test_Model</class>
            </my_test>
        </models>
        <blocks>
            <my_test>
                <class>My_Test_Block</class>
            </my_test>
        </blocks>
    </global>

    <frontend>
        <routers>
            <my_test>
                <use>standard</use>
                <args>
                    <module>My_Test</module>
                    <frontName>test</frontName>
                </args>
            </my_test>
        </routers>
    </frontend>

</config> 
```

**This is my controllers code in app/core/local/My/Test/controllers/IndexController.php**

```
<?php
class My_Test_IndexController extends Mage_Core_Controller_Front_Action
{
    public function indexAction()
    {
        echo "This is the Module MyTest";
    }
} 
```

Now when i am giving the url 176.58.99.99/herbal/index.php/test/index/index 176.58.99.99/herbal/index.php/test/ 176.58.99.99/herbal/test/index/index 176.58.99.99/herbal/test/

Its showing 404 error

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-19T06:36:22.880

你说你的控制器位于`app/core/local/My/Test/controllers/IndexController.php`它应该放置如下：`app/code/local/My/Test/controllers/IndexController.php`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-08-05T19:53:55.280

我有同样的问题，但就我而言，这是关于文件权限的。确保您的文件和目录具有适当的访问权限，否则，magento 将永远无法读取这些文件。

# sql-server - 存储过程从前端执行时工作正常，但在 sql server 中执行时无法正常工作

> ID：12489588
> 
> 赞同：1
> 
> 时间：2012-09-19T06:33:26.660
> 
> 标签：sql-server, stored-procedures

我创建了一个存储过程，当我从 ieC#.net 端执行它时，或者当我在单独的 SQL 查询窗口中复制并过去存储过程的查询时，它工作得非常好，但是当我执行它时它既没有给出任何结果也没有任何错误在 SQL Server 中使用 EXEC sp_Name。我无法理解我的代码有什么问题。

下面是我的存储过程

```
ALTER PROCEDURE sp_tbl_REQUEST_SelectAllByFilter_WithPagging
@PageIndex INT=NULL,
@PageRecord INT=NULL,
@SortExpression NVARCHAR (200)='int_Request_ID',
@SortDirection NVARCHAR (10)='ASC',
@int_Requester_ID INT=NULL,
@intProjectID   INT=NULL
AS
BEGIN
SET NOCOUNT ON
DECLARE @StartRowIndex INT
SET @StartRowIndex=((@PageIndex-1)*@PageRecord)+1;

DECLARE @WhrClause VARCHAR(MAX)
SET @WhrClause= 'WHERE  tr.int_Requester_ID = '+CONVERT(VARCHAR(MAX), @int_Requester_ID)
IF(@intProjectID>0)
BEGIN
    SET @WhrClause=@WhrClause+' AND tr.int_Project_ID='+CONVERT(VARCHAR(MAX),@intProjectID)
END
DECLARE @SelectClause VARCHAR(MAX)
SET @SelectClause=';With AllRecords AS(SELECT Row_Number() OVER(ORDER BY '+CONVERT (VARCHAR (MAX), @SortExpression)+' '+CONVERT (VARCHAR (MAX), @SortDirection)+')AS ''RowNumber'',* FROM(SELECT tr.[int_Request_ID],          
        tr.[int_User_ID],          
        tr.[int_Project_ID],          
        tr.[str_Request_Type],          
        tr.[int_Account_ID],          
        tr.[int_Requester_ID],          
        tr.[int_User_Head_ID],          
        tr.[dt_Request_Date],          
        tr.[bln_IsApproved],          
        tr.[dt_Approval_Date],          
        tr.[str_Reject_Reason],          
        tr.[int_USER_ROLE],          
        tr.[int_AllocationType_ID],          
        tr.[int_NoofHourInMinute],         
xyz.dbo.GetHourByMin(ISNULL(int_NoofHourInMinute,0)) as ''str_NoofHour'',           
        tr.[dt_StartDateToWork],
        tr.[dt_EndDateToWork],          
        tr.[isAllowToAddTask],          
        tr.[isAllowToDeleteTask],          
        tr.[isAllowToAddCR],          
        tp.str_Project_Name,          
        tu.str_FullName AS str_User_Name,          
        tu1.str_FullName AS UserHeader,         
        tbl_Project_AllocationType.str_AllocationType,    
        tu2.str_FullName AS UserRequester,  
  tu2.str_EMAIL_ADDRESS as RequesterEmail       
  FROM   [tbl_Requests] tr          
  INNER JOIN tbl_PROJECT tp ON tp.int_Project_ID = tr.int_Project_ID          
  INNER JOIN tbl_USER tu ON tu.int_USER_ID=tr.int_User_ID          
  LEFT JOIN tbl_USER tu1 ON tu1.int_USER_ID=tr.int_User_Head_ID          
  INNER JOIN tbl_USER tu2 ON tu2.int_USER_ID=tr.int_Requester_ID    
inner join tbl_Project_AllocationType on   tbl_Project_AllocationType.int_AllocationType_ID=tr.int_AllocationType_ID '+@WhrClause+'
)As Tmp)

  SELECT * FROM 
 AllRecords WHERE RowNumber BETWEEN ' + CONVERT(VARCHAR(MAX), @StartRowIndex) + ' AND '  + CONVERT(VARCHAR(MAX), (@StartRowIndex + @PageRecord - 1)) + '

 SELECT COUNT(TempTbl.int_Request_ID)As  ''ReturnRecords'','+CONVERT(VARCHAR(MAX),@PageIndex)+'''PageIndex''
 FROM (SELECT tr.[int_Request_ID]     
 FROM   [tbl_Requests] tr '+@WhrClause+')as TempTbl;'

PRINT(@SelectClause)
DECLARE @SQL NVARCHAR(MAX)
SET @SQL=CONVERT(NVARCHAR(MAX),@SelectClause)
EXEC sp_executesql @SQL
END 
```

我正在这样执行它。

```
EXEC sp_tbl_REQUEST_SelectAllByFilter_WithPagging 1,20,NULL,NULL,74,591 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-19T07:05:35.893

你正在传递`NULL`和。意味着默认值不适用 - 它们为空。`@SortExpression``@SortDirection``NULL`

所以整个串联`@SelectClause`变成了`NULL`（因为串联字符串和`NULL`s产生`NULL`s）

所以什么都没有被执行。

尝试：

```
EXEC sp_tbl_REQUEST_SelectAllByFilter_WithPagging
         1,20,@int_Requester_ID = 74,@intProjectID=591 
```

顺便说一句，您应该*避免*将`sp_`其用作存储过程的前缀。`sp_`MS 为系统存储过程保留前缀，如果存在名称冲突，SQL Server 将更喜欢来自您自己的过程的系统存储过程`master`。

（我通常建议不要在 SQL Server 中使用任何前缀，但这更像是一个有争议的问题，而不是一个强有力的规则）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-19T07:30:15.140

你好你不需要传参数null

所以你可以通过这种方式执行存储过程

EXEC sp_tbl_REQUEST_SelectAllByFilter_WithPagging 1,20,@int_Requester_ID=74,@intProjectID=591

试试这个

问候阿米特维亚斯

# python - 无法在不删除 pyc 文件的情况下在 Python 中重新加载正确的模块

> ID：12489589
> 
> 赞同：2
> 
> 时间：2012-09-19T06:33:36.233
> 
> 标签：python, import

我正在尝试将代码作为模块加载，然后在 Python 中以编程方式重新加载相同的模块但不同的代码：

```
import imp

a = """
def test():
    print "Hello from a"
"""

b = """
def test():
    print "Hello from b"
"""

for code in [a, b]:
    with open('user.py', 'wb') as f:
        f.write(code)
    mod = imp.load_source('user', 'user.py')
    getattr(mod, "test")() 
```

预期输出：

```
Hello from a
Hello from b 
```

实际输出：

```
Hello from a
Hello from a 
```

显然我对它如何工作的理解是不正确的，但我似乎无法弄清楚我的错误。

我可以让它工作的唯一方法是在我在文件中编写代码之前删除生成的 .pyc 文件`f`。有没有更好的办法？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-19T06:39:22.157

如果您要从字符串或文件中动态加载代码，最好使用`exec`/`execfile`而不是`import`. `import`适用于静态或很少更改的文件。

如果您仍想使用`imp.load_source`，请注意以下警告：

> 请注意，如果存在正确匹配的字节编译文件（后缀为 .pyc 或 .pyo），则将使用它而不是解析给定的源文件。

“正确匹配”意味着编译文件的版本与解释器匹配并且时间戳匹配。正如 Tim 所指出的，如果您连续两次快速写入文件，则时间戳可能不会更改，并且 .pyc 仍将被视为有效。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-19T06:38:00.467

可能不是因为您的`.pyc`文件的时间戳（精确到一秒）不会早于您新写入`.py`文件的时间戳；因此`imp`将使用“当前”`.pyc`文件，除非您先将其删除。

或者，您可以尝试在重新加载模块之前等待两秒钟。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-19T07:02:17.847

每当您运行或导入 python 文件、模块或包时，解释器将检查是否存在与 py 文件版本匹配的 pyc 文件。如果是，它将使用 pyc 文件，否则将编译 py 文件并覆盖旧的 pyc 文件。如果 pyc 匹配 py 文件的版本是基于文件日期的。由于您没有保存文件 (f)，因此 Python 无法识别它同时发生了某些变化。因此，如果您希望您的方法起作用，则需要在每次循环后保存文件。

# android - 如何始终在屏幕上保留选项菜单

> ID：12489590
> 
> 赞同：5
> 
> 时间：2012-09-19T06:33:36.197
> 
> 标签：android, options-menu

我需要始终在屏幕上显示选项菜单.. 我已经编写了代码以在活动启动时打开选项菜单..

```
@Override
    public void onAttachedToWindow() {
        openOptionsMenu(); 
    }; 
```

但是单击屏幕上的另一个项目时，菜单会下降..我希望菜单始终在屏幕上..有什么办法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-19T06:51:19.123

请尝试以下代码：

```
@Override
public void onOptionsMenuClosed(Menu menu) {
openOptionsMenu();
} 
```

# php - 贝宝沙盒 API 10055 错误？

> ID：12489592
> 
> 赞同：1
> 
> 时间：2012-09-19T06:33:53.957
> 
> 标签：php, authentication, paypal

我刚刚在 paypal 沙箱站点中创建了必要的测试帐户，并尝试使用 paypal 提供的测试代码运行一个简单的身份验证测试。

[https://www.x.com/authentication-0](https://www.x.com/authentication-0)

沙盒网站的文档和界面很糟糕。我收到 10055 错误，我不知道为什么。

```
ERROR Code: "10055"
Error Long Message: "This account is not approved for the authentication service. To enable this service, contact PayPal customer service" 
```

** 编辑：以下是我正在使用的身份验证凭据

```
//set APAPI URL
$url = trim('https://api-3t.sandbox.paypal.com/nvp');

//Create request body content
$body_data = array('USER' => "latte_1348034105_biz_api1.gmail.com", //TODO
                                'PWD' => "1348034127",
                                'SIGNATURE' => "Al1CQR.cOIPXCLTGUhSXLQykw2kZAbSHo-ZBaCu5MzRI4RhO5AUVTgyC", //TODO
                                'RETURNURL' => "http://localhost/AuthApiex/AuthReturnURL.php", //TODO
                                'CANCELURL' => "http://myCancelURL", //TODO
                                'LOGOUTURL' => "http://myLogoutURL", //TODO
                                'VERSION' => "3.300000",
                                'METHOD' => "SetAuthFlowParam"); 
```

就像我说的那样，除了凭据之外，我没有更改示例代码中的任何内容。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-19T12:59:18.763

我不确定什么是“可怕的”

> “此帐户未获准使用身份验证服务。要启用此服务，请联系 PayPal 客服”

它准确地告诉你你需要做什么。[在https://www.paypal.com/mts](https://www.paypal.com/mts)
向 PayPal 提交工单，并要求他们在 Sandbox 帐户 latte_1348034105_biz@gmail.com 上启用身份验证服务。

顺便说一句，您没有使用 PayPal Access 的任何特殊原因？
[https://devportal.x.com/](https://devportal.x.com/)

# vba - 格式化工作表时下一步没有错误

> ID：12489593
> 
> 赞同：0
> 
> 时间：2012-09-19T06:33:58.450
> 
> 标签：vba, excel

我是 VBA 新手。我正在尝试在工作表上运行格式检查。

错误是`Next without For error`。我要做的是检查第 33 到 58 行的 H 和 O 列是否存在数字格式错误。它在“Next n”处显示错误。

代码是这样的：

```
Public Sub PercentageCheck()
Dim CTRYname As String
Dim x As Integer
Dim n As Integer
Dim m As Integer

For n = 1 To 13

CTRYname = ThisWorkbook.Sheets("Country lookup").Range("A1").Offset(n, 0).Value

For m = 33 To 58
For x = 8 To 15

If x = 9 Or x = 10 Or x = 11 Or x = 12 Or x = 13 Or x = 14 Then
GoTo Names
Else
wkbCurr.Sheets(CTRYname).Activate
    If IsNumeric(wkbCurr.Sheets(CTRYname).Cells(x, m).Value) Then
        If wkbCurr.Sheets(CTRYname).Cells(x, m).Value > 9.99 Then
            wkbCurr.Sheets(CTRYname).Cells(x, m).Value = ">999%"
        ElseIf wkbCurr.Sheets(CTRYname).Cells(x, m).Value < -9.99 Then
            wkbCurr.Sheets(CTRYname).Cells(x, m).Value = "<-999%"
        End If
    End If

 Names:
 Next x

Next m

Next n

End Sub 
```

您能否提供更好的检查方法的建议。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-19T06:38:48.287

先问第二个问题：`suggest a better way to check it.`
答：勤于缩进。这很容易揭示缺失的代码行

```
Public Sub PercentageCheck()
    Dim CTRYname As String
    Dim x As Integer
    Dim n As Integer
    Dim m As Integer

    For n = 1 To 13
        CTRYname = ThisWorkbook.Sheets("Country lookup").Range("A1").Offset(n, 0).Value
        For m = 33 To 58
            For x = 8 To 15
                If x = 9 Or x = 10 Or x = 11 Or x = 12 Or x = 13 Or x = 14 Then
                    GoTo Names
                Else
                    wkbCurr.Sheets(CTRYname).Activate
                    If IsNumeric(wkbCurr.Sheets(CTRYname).Cells(x, m).Value) Then
                        If wkbCurr.Sheets(CTRYname).Cells(x, m).Value > 9.99 Then
                            wkbCurr.Sheets(CTRYname).Cells(x, m).Value = ">999%"
                        ElseIf wkbCurr.Sheets(CTRYname).Cells(x, m).Value < -9.99 Then
                            wkbCurr.Sheets(CTRYname).Cells(x, m).Value = "<-999%"
                        End If
                    End If
'  ---> Missing End If
Names:
            Next x
        Next m
    Next n
End Sub 
```

顺便说一句，`GoTo Names`此代码中不需要。也不是`wkbCurr.Sheets(CTRYname).Activate`。只需将它们排除在外，代码就可以正常工作。

* * *

**更新：**

根据您的评论及其揭示的错误，我建议您使用更有意义的变量名称。这将有助于避免此类错误。此外，谨慎使用`With`可以使您的代码更具可读性（并且更快）

这是一个重构版本来演示

```
Public Sub PercentageCheck()
    Dim CTRYname As String
    Dim col As Integer
    Dim n As Integer
    Dim rw As Integer

    For n = 1 To 13
        CTRYname = ThisWorkbook.Sheets("Country lookup").Range("A1").Offset(n, 0).Value
        With wkbCurr.Sheets(CTRYname)
            For rw = 33 To 58
            For col = 8 To 15
                If col < 9 Or col > 14 Then
                    With .Cells(rw, col)
                        If IsNumeric(.Value) Then
                            If .Value > 9.99 Then
                                .Value = ">999%"
                            ElseIf .Value < -9.99 Then
                                .Value = "<-999%"
                            End If
                        End If
                    End With
                End If
            Next col, rw
        End With
    Next n
End Sub 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-19T06:38:13.430

你错过了`END IF`一个`If x = 9 Or x = 10 Or x = 11 Or x = 12 Or x = 13 Or x = 14 Then ... Else ...`

缩进你的代码以提高可读性，这样的事情就会变得不言而喻。@chris-neilsen 的例子非常好。

与结束语句相比，计算开始语句会有所帮助（这也是我在这种情况下调试您的代码所做的）。

使用突出显示相应开始/结束符号的 IDE 也会对您有所帮助（但我不确定哪些 IDE 可用于 VBA 宏......如果有的话）。

# c++ - 静态常量类成员声明

> ID：12489597
> 
> 赞同：7
> 
> 时间：2012-09-19T06:34:34.027
> 
> 标签：c++, gcc, linker

在 Foo.h 中：

```
class Foo
{
public:
    Foo();
    static const unsigned int FOOBAR = 10;
    static const unsigned int BARFOO = 20;

private:
    unsigned int m_FooBar;
    bool m_Bar;
    void Bar();
}; 
```

在 Foo.cpp 中：

```
Foo::Foo()
    : m_FooBar(FOOBAR), // this works
      m_Bar(false)
{
}

void Foo::Bar()
{
    //m_FooBar = m_Bar ? FOOBAR : BARFOO; // linker fails *1
    m_FooBar = FOOBAR; // ok
} 
```

我正在使用 GCC 4.5.3 进行编译。当行 *1 未注释时，链接器是否有任何原因会失败？

```
Foo.o: In function 'Foo::Bar' (name unmangled):
Foo.cpp: undefined reference to `Foo::FOOBAR'
Foo.cpp: undefined reference to `Foo::BARFOO' 
```

尝试使用 VC2005、2008、2010 和 CB2010。他们都编译和链接得很好。为什么 GCC 在这种情况下会失败？

鉴于[这里的答案](https://stackoverflow.com/questions/5446005/why-dont-static-member-variables-play-well-with-the-ternary-operator)，为什么其他流行的编译器不会像 GCC 一样失败？无论是对于 GCC 还是其他流行的编译器，它都必须是一个错误。还是有更合理的解释？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-19T06:43:59.507

形式上，头文件只声明静态常量，它们也必须被定义（至少在 C++03 中）。但是，如果您只使用它们的值，您通常会侥幸逃脱。

在 C++11 中，这被更正式地指定为当静态是“odr-used”时需要定义。这`*1`条线就是一个例子。三元运算符试图形成对值的引用，而编译器（或实际上的链接器）意识到它不能。

* * *

C++11 标准说

> **9.4.2 静态数据成员**
> §3...
> 如果该成员在程序中被 odr-used (3.2) 使用，则该成员仍应在命名空间范围内定义，并且命名空间范围定义不应包含*初始化程序*。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-19T06:43:39.833

尝试定义这些成员：

```
static const unsigned int FOOBAR = 10;
static const unsigned int BARFOO = 20; 
```

在类声明之外。

```
Foo::FOOBAR = 10;
Foo::BARFOO = 20; 
```

# spring - 当应用程序部署在集群环境中时，FlashAttributes 无法正常工作

> ID：12489603
> 
> 赞同：4
> 
> 时间：2012-09-19T06:35:09.253
> 
> 标签：spring, spring-3

我正在使用 redirectAttributes 将成功或失败消息传递给重定向的 url。这样我就可以在重定向页面上只显示一次成功或失败消息。如果再次刷新同一页面，则该消息将不会再次出现。这没关系，并且在 tomcat 上的正常部署中工作正常。

现在我们已经设置了一个集群环境，我们已经在其中部署了 Web 应用程序。但在这种情况下，redirectAttributes 的工作很奇怪。有时它有效，有时无效。

以下是我用来将 flashAttribute 添加到重定向属性的代码行。

```
redirectAttributes.addFlashAttribute("successMsg", message); 
```

我在集群环境中使用 Spring 3.1.0.RELEASE 版本和 Tomcat 7。

我想知道这个问题是否有任何解决方法。是否有任何较新的 Spring 版本支持在集群环境中使用 redirectAttributes？您也可以让我知道是否有其他方法可以执行此类操作。

提前致谢。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-09-22T03:39:26.453

听起来您的客户端 HTTP 会话可能不会在 Tomcat 服务器之间共享。由于 Spring Flash 属性[存储在 session 中](http://static.springsource.org/spring/docs/3.1.0.RC1/spring-framework-reference/html/mvc.html#mvc-flash-attributes)，您可能会遇到以下情况：

1.  初始请求发送到 serverA，并且在 serverA 上的会话中设置了 flash 属性
2.  发生重定向，请求被发送到 serverB。serverA 和 serverB 为用户提供**不同**的 HTTP 会话（假设您没有共享它们的机制），因此 serverB 看不到 flash 属性（它有自己单独的 HTTP 会话）

如果客户端请求发送到的服务器是不确定的，您可能会间歇性地遇到此问题。例如，如果上述两个请求碰巧都到达了 serverA，那么 flash 属性将正常工作，因为会话将是相同的。

如果是这种情况，那么您需要一种机制来：

1.  提供一个“粘性”会话——保证给定客户端的所有请求都被路由到同一个 Tomcat 服务器。通常这是通过负载平衡器/路由机制完成的（例如：nginx ip hash routing）
2.  实现[会话复制](http://tomcat.apache.org/tomcat-7.0-doc/cluster-howto.html)——使会话在所有 Tomcat 服务器之间共享，这样无论哪个 Tomcat 为客户端的请求提供服务，HTTP 会话都是相同的。

# python - Django pyodbc 存储过程错误 - 在字符串格式化期间并非所有参数都转换

> ID：12489604
> 
> 赞同：0
> 
> 时间：2012-09-19T06:35:26.180
> 
> 标签：python, django, sql-server-2008, tastypie, django-pyodbc

我有一个 django 函数，它通过 pyodbc 调用 SQL Server 2008 中的存储过程，如下所示：

```
def new_user(self):
        # create a cursor
        cur = connection.cursor()
    try:
        cur.execute("{CALL sp_newPerson  (?,?,?,?,?)}",
                   (self.id, self.fname, self.lname, self.address))
        #returns 1 when there is a result set.
        #if cur.return_value == 1:        
        # grab the results
        results = cur.fetchall()
            return results
    finally:
            cur.close() 
```

每当调用该函数时，我都会收到“error_message”：“在字符串格式化期间并非所有参数都被转换”

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-19T07:16:20.950

似乎`sp_newPerson()`有 5 个参数（如果我正确计算 all的话`?`），但您尝试仅使用 4 个参数执行它，或者它有 4 个参数，但您又添加了一个`?`：

```
cur.execute("{CALL sp_newPerson(?,?,?,?,?)}", (self.id, self.fname, self.lname, self.address, self.something)) 
```

或者：

```
cur.execute("{CALL sp_newPerson(?,?,?,?)}", (self.id, self.fname, self.lname, self.address)) 
```

编辑：

您似乎正在尝试使用带有 OUT 参数的函数或过程。

我没有 MS SQL 来检查它是否适用于 Python ODBC 准备调用。其他数据库也有问题。可能很难编写 Python ODBC 代码来获取返回值或 OUT 参数。从 C 或 Delphi ODBC 驱动程序在执行此类函数/过程之前分配缓冲区，以便可以填充它。在 Python 中，我不知道这是否可能。我发现 PreparedStatements 在 JDBC（我从 Jython 中使用）中工作，即使使用 JDBC-ODBC 桥，但 JDBC 使用专门的 API 来指定输入和输出参数。另请参阅我关于从 Oracle DB 调用函数的问题：[如何通过 ODBC 检索 Oracle 数据库函数的结果？](https://stackoverflow.com/questions/11541894/how-to-retrieve-result-of-oracle-database-function-via-odbc)

我认为你能做的最好的就是使用解决方法。如果`sp_newPerson()`是一个函数：

1.  将其转换为`SELECT`. 当函数更改数据库时（使用 INSERT、UPDATE 或 DELETE），它不能在某些数据库，尤其是 Oracle 中工作：

    ```
    cur.execute("SELECT sp_newPerson(?,?,?,?)", (self.id, self.fname, self.lname, self.address))
    for row in cur.fetchall(): 
        r = row[0] 
    ```

2.  将其转换为`INSERT`，当然您必须创建`tmp`表，清除它等：

    ```
    r = cur.execute("INSERT INTO tmp (new_person_id) VALUES (sp_newPerson(?,?,?,?))", (self.id, self.fname, self.lname, self.address))
    if r == 1:
        cur.execute("SELECT new_person_id FROM tmp")
        for row in cur.fetchall(): 
            r = row[0] 
    ```

# php - 如何在 UserProfile 和 Location 表之间创建关系？

> ID：12489605
> 
> 赞同：1
> 
> 时间：2012-09-19T06:35:29.893
> 
> 标签：php, mysql, sql, relational-database, mysql-workbench

我正在尝试创建一个包含两个表的数据库：Location 和 UserProfile。

Location 包含地址，UserProfile 包含 HowtownLocation 和 CurrentLocation。

我希望 Hometownlocation 和 Currentlocation 包含来自 Location 的 ID，并在删除用户时级联（假设多个用户不共享相同的地址）。

一个用户可以有多个地址（即家乡和当前），一个地址可以被多个用户使用。

我有一个工作版本，但我仍然需要它来级联更改......我希望能够通过创建一个新的 UserProfile 在 PHPMyAdmin 中输入数据。

我正在使用 MySQL Workbench，但这并不重要。

:)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-19T06:40:03.453

[MySQL 参考](http://dev.mysql.com/doc/refman/5.5/en/innodb-foreign-key-constraints.html)有帮助。语法是：

```
[CONSTRAINT [symbol]] FOREIGN KEY
  [index_name] (index_col_name, ...)
  REFERENCES tbl_name (index_col_name,...)
  [ON DELETE reference_option]
  [ON UPDATE reference_option]

reference_option:
  RESTRICT | CASCADE | SET NULL | NO ACTION 
```

还要确保您的数据库不是 MyISAM，而是 InnoDB，据我所知，这是较新的 MySQL 版本中的默认值。

# java - Android登录使用JSON登录php/mysql asynctask错误

> ID：12489607
> 
> 赞同：0
> 
> 时间：2012-09-19T06:35:32.593
> 
> 标签：java, android, json, android-asynctask, android-sqlite

> **可能重复：**
> [尝试在后台使用 AsyncTask 解析 JSON 时强制关闭](https://stackoverflow.com/questions/4633303/force-close-when-trying-to-parse-json-with-asynctask-in-the-background)

我正在尝试使用 MySQL 数据库在 android 上编写一个简单的登录应用程序，并将用户信息存储在 SQLite 中，但出现大量错误。谁能指出我正确的方向？代码永远不会达到“成功登录！” 在`doInBackground`，我认为。

这是主要活动

```
public class MainActivity extends Activity {

JSONParser jsonParser = new JSONParser();
private ProgressDialog pDialog;
private static final String TAG_SUCCESS = "success";

// JSON Response node names

private static String KEY_UID = "uid";
private static String KEY_FIRSTNAME = "firstname";
private static String KEY_LASTNAME = "lastname";
private static String KEY_UNAME = "uname";
private static String KEY_EMAIL = "email";
Button bLogin;
EditText etUsername, etPassword;
TextView tvLError;

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);

    // Login button
    etUsername = (EditText) findViewById(R.id.etUsername);
    etPassword = (EditText) findViewById(R.id.etPassword);
    bLogin = (Button) findViewById(R.id.bLogin);

    bLogin.setOnClickListener(new View.OnClickListener() {

        public void onClick(View v) {
            // TODO Auto-generated method stub
            new LoginTask().execute();

        }
    });
class LoginTask extends AsyncTask<String, String, String> {

    @Override
    protected void onPreExecute() {
        super.onPreExecute();
        pDialog = new ProgressDialog(MainActivity.this);
        pDialog.setMessage("Logging in...");
        pDialog.setIndeterminate(false);
        pDialog.setCancelable(true);
        pDialog.show();
    }

    @Override
    protected String doInBackground(String... args) {
        // TODO Auto-generated method stub
        String uname = etUsername.getText().toString();
        String password = etPassword.getText().toString();

        UserFunctions userFunction = new UserFunctions();
        JSONObject json = userFunction.loginUser(uname, password);

        Log.d("Create Response", json.toString());

        try {
            int success = json.getInt(TAG_SUCCESS);
            if (success == 1) {
                // DATABASE HANDLER
                // user successfully logged in
                // Store user details in SQLite Database
                DatabaseHandler db = new DatabaseHandler(
                        getApplicationContext());
                JSONObject json_user = json.getJSONObject("user");

                // Clear all previous data in database
                userFunction.logoutUser(getApplicationContext());

                db.addUser(json_user.getString(KEY_FIRSTNAME),
                        json_user.getString(KEY_LASTNAME),
                        json_user.getString(KEY_UNAME),
                        json_user.getString(KEY_EMAIL),
                        json_user.getString(KEY_UID));

                tvLError.setText("Successfully logged in!");

            } else {
                tvLError.setText("Incorrect username/password");
            }

        } catch (JSONException e) {
            e.printStackTrace();
        }
        return null;
    }

    protected void onPostExecute(String file_url) {
        // dismiss the dialog once done
        pDialog.dismiss();
    }

} 
```

JSONParser 类工作正常，Log.d 显示以下 JSON 对象

```
{"uid":"7","error":0,"user":

  {"email":"abc@123.com","lastname":"test","uname":"test","firstname":"test"},
"success":1,"tag":"login"} 
```

SQLite 的 DatabaseHandler 类

```
public class DatabaseHandler extends SQLiteOpenHelper{

private static final int DATABASE_VERSION = 1;
private static final String DATABASE_NAME = "android_api";
private static final String TABLE_LOGIN = "login";
private static final String KEY_ID = "id";
private static final String KEY_UNAME = "uname";
private static final String KEY_EMAIL = "email";
private static final String KEY_UID = "uid";
private static final String KEY_FIRSTNAME = "firstname";
private static final String KEY_LASTNAME = "lastname";

public DatabaseHandler(Context context) {
    super(context, DATABASE_NAME, null, DATABASE_VERSION);
}

@Override
public void onCreate(SQLiteDatabase db) {
    // TODO Auto-generated method stub
    String CREATE_LOGIN_TABLE = "CREATE TABLE " + TABLE_LOGIN + "("
            + KEY_ID + " INTEGER PRIMARY KEY,"
            + KEY_FIRSTNAME + " TEXT,"
            + KEY_LASTNAME + " TEXT,"
            + KEY_UNAME + " TEXT,"
            + KEY_EMAIL + " TEXT UNIQUE,"
            + KEY_UID + " TEXT" + ")";
    db.execSQL(CREATE_LOGIN_TABLE);
}

public void addUser(String firstname, String lastname, String uname, String email, String uid) {
    SQLiteDatabase db = this.getWritableDatabase();

    ContentValues values = new ContentValues();
    values.put(KEY_FIRSTNAME, firstname); // First name
    values.put(KEY_LASTNAME, lastname); // Last name
    values.put(KEY_UNAME, uname); // username
    values.put(KEY_EMAIL, email); // Email
    values.put(KEY_UID, uid); // User ID

    // Inserting Row
    db.insert(TABLE_LOGIN, null, values);
    db.close(); // Closing database connection
} 
```

和 UserFunctions 类中的 logoutUser 以防万一

```
/**
 * Function to logout user
 * Reset Database
 * */
public boolean logoutUser(Context context){
    DatabaseHandler db = new DatabaseHandler(context);
    db.resetTables();
    return true;
}
} 
```

我得到的错误是

```
09-18 23:15:57.457: I/Process(807): Sending signal. PID: 807 SIG: 9
09-18 23:26:53.307: E/Trace(851): error opening trace file: No such file or directory (2)
09-18 23:26:53.717: I/Choreographer(851): Skipped 32 frames!  The application may be doing too much work on its main thread.
09-18 23:26:53.787: D/gralloc_goldfish(851): Emulator without GPU emulation detected.
09-18 23:26:56.149: I/Choreographer(851): Skipped 32 frames!  The application may be doing too much work on its main thread.
09-18 23:27:04.397: I/Choreographer(851): Skipped 60 frames!  The application may be doing too much work on its main thread.
09-18 23:27:05.138: D/Create Response(851): {"uid":"7","error":0,"user":{"email":"abc@123.com","lastname":"test","uname":"test","firstname":"test"},"success":1,"tag":"login"}
09-18 23:27:05.437: I/Choreographer(851): Skipped 65 frames!  The application may be doing too much work on its main thread.
09-18 23:27:05.477: D/dalvikvm(851): GC_CONCURRENT freed 175K, 3% free 8227K/8455K, paused 72ms+95ms, total 246ms
09-18 23:27:05.888: W/dalvikvm(851): threadid=11: thread exiting with uncaught exception (group=0x40a13300)
09-18 23:27:05.987: E/AndroidRuntime(851): FATAL EXCEPTION: AsyncTask #1
09-18 23:27:05.987: E/AndroidRuntime(851): java.lang.RuntimeException: An error occured while executing doInBackground()
09-18 23:27:05.987: E/AndroidRuntime(851):  at android.os.AsyncTask$3.done(AsyncTask.java:299)
09-18 23:27:05.987: E/AndroidRuntime(851):  at java.util.concurrent.FutureTask$Sync.innerSetException(FutureTask.java:273)
09-18 23:27:05.987: E/AndroidRuntime(851):  at java.util.concurrent.FutureTask.setException(FutureTask.java:124)
09-18 23:27:05.987: E/AndroidRuntime(851):  at java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:307)
09-18 23:27:05.987: E/AndroidRuntime(851):  at java.util.concurrent.FutureTask.run(FutureTask.java:137)
09-18 23:27:05.987: E/AndroidRuntime(851):  at android.os.AsyncTask$SerialExecutor$1.run(AsyncTask.java:230)
09-18 23:27:05.987: E/AndroidRuntime(851):  at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1076)
09-18 23:27:05.987: E/AndroidRuntime(851):  at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:569)
09-18 23:27:05.987: E/AndroidRuntime(851):  at java.lang.Thread.run(Thread.java:856)
09-18 23:27:05.987: E/AndroidRuntime(851): Caused by: android.view.ViewRootImpl$CalledFromWrongThreadException: Only the original thread that created a view hierarchy can touch its views.
09-18 23:27:05.987: E/AndroidRuntime(851):  at android.view.ViewRootImpl.checkThread(ViewRootImpl.java:4607)
09-18 23:27:05.987: E/AndroidRuntime(851):  at android.view.ViewRootImpl.requestLayout(ViewRootImpl.java:835)
09-18 23:27:05.987: E/AndroidRuntime(851):  at android.view.View.requestLayout(View.java:15129)
09-18 23:27:05.987: E/AndroidRuntime(851):  at android.view.View.requestLayout(View.java:15129)
09-18 23:27:05.987: E/AndroidRuntime(851):  at android.view.View.requestLayout(View.java:15129)
09-18 23:27:05.987: E/AndroidRuntime(851):  at android.view.View.requestLayout(View.java:15129)
09-18 23:27:05.987: E/AndroidRuntime(851):  at android.view.View.requestLayout(View.java:15129)
09-18 23:27:05.987: E/AndroidRuntime(851):  at android.widget.TextView.checkForRelayout(TextView.java:6309)
09-18 23:27:05.987: E/AndroidRuntime(851):  at android.widget.TextView.setText(TextView.java:3547)
09-18 23:27:05.987: E/AndroidRuntime(851):  at android.widget.TextView.setText(TextView.java:3405)
09-18 23:27:05.987: E/AndroidRuntime(851):  at android.widget.TextView.setText(TextView.java:3380)
09-18 23:27:05.987: E/AndroidRuntime(851):  at com.example.testapp1.MainActivity$LoginTask.doInBackground(MainActivity.java:148)
09-18 23:27:05.987: E/AndroidRuntime(851):  at com.example.testapp1.MainActivity$LoginTask.doInBackground(MainActivity.java:1)
09-18 23:27:05.987: E/AndroidRuntime(851):  at android.os.AsyncTask$2.call(AsyncTask.java:287)
09-18 23:27:05.987: E/AndroidRuntime(851):  at java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:305)
09-18 23:27:05.987: E/AndroidRuntime(851):  ... 5 more
09-18 23:27:06.308: I/Choreographer(851): Skipped 44 frames!  The application may be doing too much work on its main thread.
09-18 23:27:07.747: E/WindowManager(851): Activity com.example.testapp1.MainActivity has leaked window com.android.internal.policy.impl.PhoneWindow$DecorView@41219ee8 that was originally added here
09-18 23:27:07.747: E/WindowManager(851): android.view.WindowLeaked: Activity com.example.testapp1.MainActivity has leaked window com.android.internal.policy.impl.PhoneWindow$DecorView@41219ee8 that was originally added here
09-18 23:27:07.747: E/WindowManager(851):   at android.view.ViewRootImpl.<init>(ViewRootImpl.java:374)
09-18 23:27:07.747: E/WindowManager(851):   at android.view.WindowManagerImpl.addView(WindowManagerImpl.java:292)
09-18 23:27:07.747: E/WindowManager(851):   at android.view.WindowManagerImpl.addView(WindowManagerImpl.java:224)
09-18 23:27:07.747: E/WindowManager(851):   at android.view.WindowManagerImpl$CompatModeWrapper.addView(WindowManagerImpl.java:149)
09-18 23:27:07.747: E/WindowManager(851):   at android.view.Window$LocalWindowManager.addView(Window.java:547)
09-18 23:27:07.747: E/WindowManager(851):   at android.app.Dialog.show(Dialog.java:277)
09-18 23:27:07.747: E/WindowManager(851):   at com.example.testapp1.MainActivity$LoginTask.onPreExecute(MainActivity.java:115)
09-18 23:27:07.747: E/WindowManager(851):   at android.os.AsyncTask.executeOnExecutor(AsyncTask.java:586)
09-18 23:27:07.747: E/WindowManager(851):   at android.os.AsyncTask.execute(AsyncTask.java:534)
09-18 23:27:07.747: E/WindowManager(851):   at com.example.testapp1.MainActivity$1.onClick(MainActivity.java:59)
09-18 23:27:07.747: E/WindowManager(851):   at android.view.View.performClick(View.java:4084)
09-18 23:27:07.747: E/WindowManager(851):   at android.view.View$PerformClick.run(View.java:16966)
09-18 23:27:07.747: E/WindowManager(851):   at android.os.Handler.handleCallback(Handler.java:615)
09-18 23:27:07.747: E/WindowManager(851):   at android.os.Handler.dispatchMessage(Handler.java:92)
09-18 23:27:07.747: E/WindowManager(851):   at android.os.Looper.loop(Looper.java:137)
09-18 23:27:07.747: E/WindowManager(851):   at android.app.ActivityThread.main(ActivityThread.java:4745)
09-18 23:27:07.747: E/WindowManager(851):   at java.lang.reflect.Method.invokeNative(Native Method)
09-18 23:27:07.747: E/WindowManager(851):   at java.lang.reflect.Method.invoke(Method.java:511)
09-18 23:27:07.747: E/WindowManager(851):   at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:786)
09-18 23:27:07.747: E/WindowManager(851):   at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:553)
09-18 23:27:07.747: E/WindowManager(851):   at dalvik.system.NativeStart.main(Native Method) 
```

感谢您的时间！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-19T06:42:33.930

onPostExecute() 方法再次与用户界面线程同步并允许对其进行更新。一旦 doInBackground() 方法完成，框架就会调用此方法。

**您在onPostExecute**方法中设置的 textview 值。

```
 protected void onPostExecute(String file_url) {
    // dismiss the dialog once done
    pDialog.dismiss();
 if (success == 1) {
          tvLError.setText("Successfully logged in!");

 }else{
       tvLError.setText("Incorrect username/password");

     }

} 
```

# ruby - 命令错误：服务：“ecmascript”

> ID：12489609
> 
> 赞同：4
> 
> 时间：2012-09-19T06:35:39.317
> 
> 标签：ruby, selenium-webdriver

我已经在 Firefox、Chrome 和 IE 中成功运行了定位器命令，但我遇到了**Opera 12.02**的问题。
此代码是问题的根源：

```
driver.findElement(By.id("MainContent_txtUserLog")).sendKeys("abcd@gmail.com");
//entering values to a username field 
```

我在控制台中收到以下错误：

```
com.opera.core.systems.scope.exceptions.CommunicationException: Error on command:
service: "ecmascript" commandID: 2 format: 0status:tag: 32 payload: "\n%Unknown error while executing command" 
```

我是 Selenium Webdriver 的新手，我做错了什么？

# html - 如何使用背景图像制作垂直可调整大小的面板（放大 chrome 的问题）

> ID：12489614
> 
> 赞同：1
> 
> 时间：2012-09-19T06:36:20.103
> 
> 标签：html, css, background-image, panel, resizable

我想制作一个带有背景图像的面板，可以垂直调整大小。所以简单的想法是将实际图像分成三部分：页眉、正文重复部分、页脚。它看起来像这样

```
<tr><td><div class='header'></div></td></tr>
<tr><td><div class='body'>whatever goes here</div></td></tr>
<tr><td><div class='footer'></div></td></tr>

.header {background:url(header.png); width:110px; height:20px;}
.footer {background:url(footer.png); width:110px; height:40px;}
.body {background:url(body-repeat.png); repeat-y; width:110px;} 
```

因此，我将 100x100 的图像分成三部分 - header.png - 100x20、footer.png - 100x40 和 body-repeat.png - 100x1

在 Ie9 和 firefox 中一切正常。甚至 chrome 在 100% 缩放下也能正常工作。但是，当我在 Chrome 中更改缩放时，图片会变成锯齿状，即您可以看到它是由 3 个部分“粘合”而成的。显然 chrome 对这些图像的缩放比例不同。

所以我的问题是 - 这可以以某种方式解决吗？或者有没有办法用背景图像制作可调整大小的面板？

非常感谢您的回复。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-29T22:38:43.237

您可以尝试在表格和 div 上强制没有填充、边框和边距，然后尝试添加 CSS3 背景大小属性！

```
.header {
background-image:url(header.png); 
background-size:110px 20px;
} 
```

有关 CSS 背景大小属性的更多信息：http: [//www.w3schools.com/cssref/css3_pr_background-size.asp](http://www.w3schools.com/cssref/css3_pr_background-size.asp)

最好在制作布局结构时尽量避免使用表格:)

**编辑：** 您也可以尝试添加

> 背景尺寸：封面；

整个页面背景上的属性，因此背景图像将适合给定区域的宽度和高度的 100%。

关于背景大小的一个很棒且非常完整的教程：[http ://www.css3.info/preview/background-size/](http://www.css3.info/preview/background-size/)

# php - PHP 扩展不起作用.. 找不到类“Smarty”

> ID：12489615
> 
> 赞同：1
> 
> 时间：2012-09-19T06:36:21.413
> 
> 标签：php, smarty, extends

我*`extends`*对 PHP 有疑问。我的代码在`page.class.php`：

```
 <?php
    require_once ('globals.class.php');
    require_once ('Smarty.class.php');

    class CPage extends Smarty
    {
     .
     .
     . 
```

在`Smarty.class.php`类名中是`Smarty`.

所以我不知道为什么会出现这个错误：

> 致命错误：第 6 行的 C:\xampp\htdocs\blog\www\classes\page.class.php 中找不到类“Smarty”

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-19T11:36:00.290

> 这更像是评论而不是实际答案：

在您使用时`require`，我假设`Smarty`该类已被定义。

因此，您可能正在使用命名空间，这将要求您使用`use`该特定类或提供完全限定的类名 (FQCN)：

```
class CPage extends \Smarty
                    ^- Smarty is in the global namespace in this example 
```

否则使用顶部的类：

```
Use \Smarty; 
```

将其导入您当前的命名空间。

答案是前提条件是`Smarty`您引用的类位于全局命名空间中。我不熟悉 Smarty，所​​以我不知道它是否有自己的命名空间，如果有，它是哪一个。所以具体的 FQCN 可能会有所不同。

另见：

*   [将没有命名空间的类导入命名空间类](https://stackoverflow.com/questions/8574794/importing-class-without-namespace-to-namespaced-class/8574832#8574832)
*   [如何使用 php 的“root”命名空间？](https://stackoverflow.com/questions/6593621/how-to-use-root-namespace-of-php/6593676#6593676)
*   [名称解析规则^(*Docs*)](http://www.php.net/manual/en/language.namespaces.rules.php)

# objective-c - 如何在 IOS 中使用 facebook sdk 从 facebook 注销

> ID：12489619
> 
> 赞同：1
> 
> 时间：2012-09-19T06:36:36.520
> 
> 标签：objective-c, facebook, ios5

我在我的应用程序中使用 facebook sdk。我用facebook简单地登录了，如下所示：

```
FBLoginView *loginview = [[FBLoginView alloc] initWithPermissions:[NSArray arrayWithObject:@"publish_actions"]];

UIImage *loginImage = [UIImage imageNamed:@"login_facebook_button.png"];

// loginview.backgroundColor = [UIColor redColor];
loginview.frame = CGRectMake(15, 294, loginImage.size.width, loginImage.size.height);

for (id obj in loginview.subviews)
{
    if ([obj isKindOfClass:[UIButton class]])
    {
        UIButton * loginButton =  obj;

        [loginButton setBackgroundImage:loginImage forState:UIControlStateNormal];
        [loginButton setBackgroundImage:nil forState:UIControlStateSelected];
        [loginButton setBackgroundImage:nil forState:UIControlStateHighlighted];
        [loginButton sizeToFit];
    }
    if ([obj isKindOfClass:[UILabel class]])
    {
        UILabel * loginLabel =  obj;
        loginLabel.text = [Lang get:@"SIGN_IN_WITH_FACEBOOK"];
        loginLabel.textAlignment = UITextAlignmentCenter;
        [loginLabel setTextColor:[UIColor colorWithRed:228.0/255.0 green:228.0/255.0 blue:228.0/255.0 alpha:1.0]];
        [loginLabel setShadowColor:[UIColor colorWithRed:127.0/255.0 green:127.0/255.0 blue:127.0/255.0 alpha:1.0]];
        loginLabel.frame = CGRectMake(0, 0, loginImage.size.width, loginImage.size.height);
    }
}

loginview.delegate = self;

[self.view addSubview:loginview]; 
```

我已经正常登录了。但是当我尝试使用它注销时

```
[FBSession.activeSession closeAndClearTokenInformation]; 
```

我得到了异常，它没有写出真正的错误。此时我的应用程序崩溃了。

但是它实际上清除了令牌，因为崩溃后它已经注销。

那么我做错了什么？

谢谢

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2014-06-17T11:20:26.620

```
FBSession* session = [FBSession activeSession];
[session closeAndClearTokenInformation];
[session close];
[FBSession setActiveSession:nil];

NSHTTPCookieStorage* cookies = [NSHTTPCookieStorage sharedHTTPCookieStorage];
NSArray* facebookCookies = [cookies cookiesForURL:[NSURL         URLWithString:@"https://facebook.com/"]];

for (NSHTTPCookie* cookie in facebookCookies) {
    [cookies deleteCookie:cookie];
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-19T06:43:17.627

用这个：

```
 - (void)logout:(id<FBSessionDelegate>)delegate {

  self.sessionDelegate = delegate;
  [_accessToken release];
  _accessToken = nil;
  [_expirationDate release];
  _expirationDate = nil;

  NSHTTPCookieStorage* cookies = [NSHTTPCookieStorage sharedHTTPCookieStorage];
  NSArray* facebookCookies = [cookies cookiesForURL:[NSURL URLWithString:@"http://login.facebook.com"]];

  for (NSHTTPCookie* cookie in facebookCookies) {
    [cookies deleteCookie:cookie];
  }

  if ([self.sessionDelegate respondsToSelector:@selector(fbDidLogout)]) {
    [_sessionDelegate fbDidLogout];
  }
} 
```

请参阅[ios-facebook-connect-logout-not-deleting-login-details](https://stackoverflow.com/questions/10649450/ios-facebook-connect-logout-not-deleting-login-details/10649799#10649799)链接。

# sql - 查找最近添加的行并添加值

> ID：12489626
> 
> 赞同：0
> 
> 时间：2012-09-19T06:37:49.100
> 
> 标签：sql, sql-server, compare

我有一张桌子，每天早上都会重新加载和整理。它没有任何日期/时间列，也没有自动增量列。

我需要一个查询来确定每天早上添加了哪些行，并为具有特定值的每一行添加一个新列（如果是新的，则为新列，如果不是，则为另一列）。此外，如果可能，添加第二列，其中包含添加该行的日期。

我在想的是我每天都复制表格，然后第二天将其与新的进行比较。

这甚至可以做到吗，如果可以，我该怎么做？有没有更好的方法而不改变数据写入表的方式？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-19T08:57:13.393

是的，考虑到原始表的约束，创建第二个表似乎是一个合理的解决方案

好的，所以在第 1 天，您创建影子表并填充它：

```
CREATE TABLE Shadow (/* Same columns as original, plus added date, magic value column */)
INSERT INTO Shadow (/* Same columns as original, plus added date, magic value column */)
SELECT /* Columns, plus todays date and the magic value column */ FROM Original 
```

然后，在随后的几天：

```
ALTER TABLE Original ADD MagicColumn int null
GO
ALTER TABLE Original ADD AddedDate date null
GO
MERGE INTO Original o
USING Shadow s
     ON o.PK1 = s.PK1 and o.PK2 = s.PK2

WHEN MATCHED
   THEN UPDATE
      SET
         AddedDate = s.AddedDate,
         MagicColumn = 1 /* Value for updated */

WHEN NOT MATCHED BY SOURCE
   THEN UPDATE
      SET
         AddedDate = CURRENT_TIMESTAMP,
         MagicColumn = 0; /* Value for new */
GO
TRUNCATE TABLE Shadow
GO
INSERT INTO Shadow (/* Same columns as original, plus added date, magic value column */)
SELECT /* All columns */ FROM Original 
```

其中一些语句*需要*在不同的批次中（例如，这些语句需要`ALTER TABLE`在不同的批次中`MERGE`），因此如果您在 SQL 代理作业中执行此操作，它们应该在不同的步骤中。

我一直提到“魔法值列”，因为我不确定如何调用包含以下内容的列：

> 某个值（如果是新的，则为一个，如果不是，则为另一个）

# javascript - 在鼠标悬停时应用工具提示

> ID：12489630
> 
> 赞同：3
> 
> 时间：2012-09-19T06:38:10.560
> 
> 标签：javascript, jquery

我将图像放在 html5 画布上。

```
myString = '<img id="img1" class="link1" src = 'img/icon1.png'></img>';
            $('#main1' ).append(myString);
            $('#main1' + '-link1').fadeIn('slow'); 

            $(".link1").click(function () {
                window.location.href = url1;
            });

$(".link1").hover(function () {
                $('#myDiv').show();
            }, function () {
                $('#myDiv').hide();
            }); 
```

div是：

```
<div id="myDiv" style="display:none;border: 1px solid black;width: 10px;height:5px;padding: 1px;">
    <p>Hello</p>
</div> 
```

现在，在鼠标悬停时，div 出现在页面末尾。我需要它出现在图像的正下方。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-19T06:44:56.510

这取决于你的'myDiv' div 的位置。

`<img title="my tooltip text" />`如果它只是工具提示中的文本，您可以只使用它。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-19T06:56:06.300

您可以使用事件对象中的 pageX、pageY 将 div 定位在图像下方。

请尝试此链接以获取解决方案 [http://jsfiddle.net/ZpGS3/14/](http://jsfiddle.net/ZpGS3/14/)。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-19T06:46:32.813

您可以尝试一个名为 TipTip 的 jQuery 插件：

[http://code.drewwilson.com/entry/tiptip-jquery-plugin](http://code.drewwilson.com/entry/tiptip-jquery-plugin)

您会发现它非常易于使用，并且设计非常棒:)。

你可以去链接试试看你喜不喜欢。

考虑到您的示例，为了显示 TipTip 的工具提示，您只需执行以下操作：

*   包括 TipTip 的 CSS 和 JS 文件引用
*   放一些JS：`$("#img1").tipTip();`
*   将工具提示的内容放在`title`图像的选项中：

例如：`<img id="img1" title="<p>Hello</p>"/>`

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-19T06:52:05.223

要在鼠标悬停时应用工具提示，您应该使用

```
$('#img1').mouseover(function(){
$(this).attr('title','MY Image Title');
}); 
```

# php - yii修改表后数据无法保存

> ID：12489631
> 
> 赞同：0
> 
> 时间：2012-09-19T06:38:11.377
> 
> 标签：php, yii

我是 yii 框架的新手。我在 yii 框架中创建了一个应用程序。我使用 gii 创建了模型、控制器、视图。之后我更改数据库表。我删除了 2 列并添加了 3 个新列。之后使用 gii 覆盖模型。但是当我试图保存到该表中时，它显示属性（这是我删除的旧列）未定义。请为我提供一个解决方案。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-19T07:14:31.827

您需要`rules()`在模型的验证方法中定义所有列，查看并确保您已经为表中的每一列定义了规则，例如（如果它是一个最大长度为 128 的字符串）：

```
public function rules()
{
    return array(
        ...
        array('myField', 'length', 'max'=>128),
        ...
    );
} 
```

[查看有关验证规则](http://www.yiiframework.com/wiki/56/)的一些信息。

此外，对于表单，如果您使用 CActiveForm 小部件并像这样调用字段：

```
echo $form->labelEx($model,'myField');
echo $form->textField($model,'myField'); 
```

然后您需要确保在模型中也定义了标签，在`attributeLabels()`方法中，例如：

```
public function attributeLabels()
{
    return array(
        ...
        'myField'=>'My Field',
        ...
    );
} 
```

最后，如果您希望该字段可搜索，则需要`search()`在模型中的方法中添加一条语句，例如：

```
public function search()
{
    ...
    $criteria->compare('myField',$this->myField);
    ...
} 
```

确保您拥有所有这些元素，并且您不应该收到“* is not defined”错误。

此外，如果您在主配置文件中使用模式缓存，则必须在应用程序看到您的新数据库结构之前清除缓存。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-19T07:17:40.923

您的更改也应该在**视图**中设置，因为有使用旧属性的表单、[小部件！](http://www.yiiframework.com/doc/guide/1.1/en/basics.view#widget)（对于这个确切的保存问题，您需要修复模型保存和更新操作`_form.php`的[部分](https://stackoverflow.com/questions/7085156/what-are-partial-views)责任。

您可以像对模型所做的那样做同样的事情：（使用 gii 重新生成它）或者您可以手动编辑它（我建议您习惯这一点，因为将来您将拥有不想丢失的代码，因为更改列名。`Find & edit`在大多数文本编辑器中都很简单）。

可能您需要阅读更多关于[MVC 的一般工作原理和 Yii 的特殊工作原理](http://www.yiiframework.com/doc/guide/1.1/en/basics.mvc)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-07-26T07:22:56.017

这是因为您使用的是模式缓存。你的表模式缓存在 Yii 中。您需要刷新 AR 缓存。要么刷新完整的模式缓存，要么使用 Yii::app()->db->schema->getTable('tablename', true); 在你的行动开始。这将更新模型模式缓存。

# javascript - 将 json 文件加载到 d3.js

> ID：12489633
> 
> 赞同：3
> 
> 时间：2012-09-19T06:38:12.637
> 
> 标签：javascript, json, jsp, d3.js

我已将 d3 的 force.js 用于可视化目的。

以下是完整的js片段：

```
d3.json("test.json", function(json) {
  force.nodes(json.nodes)
      .links(json.links)
      .start();
}); 
```

test.json 文件当前与 js 文件的位置相同。它工作正常。这些文件位于我的网络应用程序的“页面”文件夹中。如果我使用 http url "http://localhost:8084/FMS/faces/pages/test.json" 代替 "test.json" 它工作正常。但是如果我使用“/Users/subashbasnet/test.json”，即文件的路径代替“test.json”，它就不起作用。

如果我将 json 输出设置为 var 并代替“test.json”使用它就不起作用。例如：

```
 var myjson = "{"nodes":[{"name":"MYriel","group":1},{"name":"Labarre","group":2}],"links":[{"source":1,"target":0,"value":1}]}";
    d3.json(myjson, function(json) {
      force.nodes(json.nodes)
          .links(json.links)
          .start();
    }); 
```

我的 .jsp 文件有以下输出：

```
<html>
<head></head>
<body>
<pre>{"nodes":[{"name":"MYriel","group":1},{"name":"Labarre","group":2}],"links":[{"source":1,"target":0,"value":1}]}</pre>
</body>
</html> 
```

我想如何在`<pre>`标签中加载 json 来代替 "test.json" 。

对任何一个问题的解决方案都非常期待。提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-19T06:50:17.033

如果您在 JSP 中生成数据，那么您可以简单地让它完成

```
<script>var theData = (<%= unquotedJsonData %>);</script> 
```

它直接产生一个 JS 对象而不是一个 JSON 字符串

```
<script>var theData = ({"nodes":[...]});</script> 
```

那你就不需要使用d3的json解析器了，直接做

```
force.nodes(theData.nodes).... 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-19T06:48:39.530

使用单引号引用您的 json 字符串

```
var myjson = '{"nodes":[{"name":"MYriel","group":1},{"name":"Labarre","group":2}],"links":[{"source":1,"target":0,"value":1}]}'; 
```

或转义双引号

```
var myjson = "{\"nodes\":[{\"name\":\"MYriel\",\"group\":1},{\"name\":\"Labarre\",\"group\":2}],\"links\":[{\"source\":1,\"target\":0,\"value\":1}]}"; 
```

你的jsp文件只需要输出json字符串

```
{"nodes":[{"name":"MYriel","group":1},{"name":"Labarre","group":2}],"links":[{"source":1,"target":0,"value":1}]} 
```

# java - 调用 AsyncTask.cancel() 方法时，如何中断 AsyncTask 中的 Callables？

> ID：12489636
> 
> 赞同：3
> 
> 时间：2012-09-19T06:38:29.770
> 
> 标签：java, android, android-asynctask, interrupt, executorservice

我的活动有一个你可以在下面看到`AsyncTask`的方法。`doInBackground`我必须向多个服务器发出多个搜索请求，为了加快执行速度，我使用 Java`ExecutorService`发出并发请求。

这工作正常，但我希望我`AsyncTask`停止它正在做的任何事情并退出，如果我调用该`AsyncTask.cancel();`方法`true`作为`mayInterruptIfRunning`参数。这在我需要在`Activity`退出时停止任务的情况下很有用，例如按下“返回”按钮。

我读过调用 的`cancel()`方法`AsyncTask`将阻止该`onPostExecute`方法被调用，但`doInBackground`将运行直到完成。

有没有办法，我可以打断我`Callables`并强迫他们停止他们正在做的任何事情并停止`AsyncTask`.

为简洁起见，我在此处发布了我的代码的精简版，但我有一堆 a `Callables`，而不仅仅是一个。

谢谢。

```
 protected ArrayList<Result> doInBackground(final String... strQuery) {

      ArrayList<Result> objResults = new ArrayList<Result>();
      ExecutorService esrExecutor = Executors.newFixedThreadPool(2);
      Set<Callable<ArrayList<Result>>> setCallables = new HashSet<Callable<ArrayList<Result>>>();

      setCallables.add(new Callable<ArrayList<Result>>() {

          public ArrayList<Result> call() throws Exception {

              try {

                  MySearcher objSearcher = new MySearcher(Finder.this.objContext);
                  ArrayList<Result> objResults = new ArrayList<Result>();

                  objResults = objSearcher.doSearch(strQuery[0]);

                  return objResults;

              } catch (Indexer.LoginException e) {
                  return null;
              }

              return null;

          }

      });

      List<Future<ArrayList<Result>>> lstFutures;

      try {

          lstFutures = esrExecutor.invokeAll(setCallables);

          for(Future<ArrayList<Result>> futFuture : lstFutures){
              if (futFuture.get().isEmpty() == false)
                  objResults.addAll(futFuture.get());
          }

      } catch (InterruptedException e) {
          e.printStackTrace();
      } catch (ExecutionException e) {
          e.printStackTrace();
      }

      esrExecutor.shutdown();

      return objResults;

  } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-19T06:51:02.167

我认为一种解决方案是[`isCancelled()`](http://developer.android.com/reference/android/os/AsyncTask.html#isCancelled%28%29)定期检查您的`doInBackground()`方法，以检查是否`AsyncTask`已取消以及是否需要停止您之前正在做的事情。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-19T08:06:06.970

这是您迭代并等待的地方：

```
 for(Future<ArrayList<Result>> futFuture : lstFutures){
          if (futFuture.get().isEmpty() == false)
              objResults.addAll(futFuture.get());
      } 
```

Future的`get()`方法，`Waits if necessary for the computation to complete, and then retrieves its result.` 你可以`isCancelled()` 这样检查，

```
 for(Future<ArrayList<Result>> futFuture : lstFutures){
           if(isCancelled())
              break;
           else if (futFuture.get().isEmpty() == false)
              objResults.addAll(futFuture.get());
      }
      if(isCancelled())esrExecutor.shutdownNow(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-19T07:14:04.537

另一种选择，例如，如果`doSearch`有一个循环，您可以在不使用`isCancelled`or的情况下手动完成`cancel`。您的 MySearcher 类可能具有以下内容。

```
//in your MySearcher class
private AtomicBoolean cancelled = false;

public ArrayList<Result> doSearch(...){
    while(notFound && !cancelled.get()){
     // keep searching
    }
}

public void cancel(){
    cancelled.set(true);
} 
```

现在您可以从任何地方调用取消。

# joomla - 在简单的图库插件 Joomla 中进行分页

> ID：12489641
> 
> 赞同：0
> 
> 时间：2012-09-19T06:38:55.077
> 
> 标签：joomla, pagination, image-gallery

我在 joomla 2.5 中建立了网站，并在我的网站中安装了简单的图片库插件。它工作正常，但我每页有 2000 张图片，我需要为每张图片进行分页，以便用户可以在页面中查看 100 张图片，页面末尾他可以看到下一个上一个按钮进行分页。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-19T07:24:42.967

如果这些页面是由 Joomla 内容扩展创建的，那么您可能正在寻找分页符（请参阅[将长文章拆分为多个链接页面](http://docs.joomla.org/Splitting_a_long_Article_into_multiple_linked_pages)）。

对于这种情况，您必须将图库分成几部分，每一页一个部分。文章的 HTML 应如下所示：

```
<p>Article text...</p>
<hr title="Page 1" alt="Page 1" class="system-pagebreak" />
<p>{gallery}page1/part1{/gallery}</p>
<hr title="Page 2" alt="Page 2" class="system-pagebreak" />
<p>{gallery}page1/part2{/gallery}</p>
<hr title="Page 2" alt="Page 3" class="system-pagebreak" />
<p>{gallery}page1/part3{/gallery}</p> 
```

使用这种方法，如果每篇文章有 2000 张图片，则每篇文章将需要 20（或 19）个分页符。

# visual-studio-2010 - Visual Studio 2010 不需要的 dll 依赖关系

> ID：12489652
> 
> 赞同：1
> 
> 时间：2012-09-19T06:39:44.747
> 
> 标签：visual-studio-2010, opencv, linker, cuda

我正在使用 Visual Studio 2010。在开始我的项目之前，我安装了 cuda SDK 4.2。之后，我安装了opencv 2.4.2。在我的项目中，我只使用 opencv 并且它工作正常。但是，当我尝试在另一台计算机上运行我的程序时，它告诉我需要 cuda dll（如 cudart32_42_9.dll、npp32_42_9.dll 和 nvcuda.dll）。我根本不使用 cuda，也没有在我的项目属性中引用 cuda。我想知道如何删除这些依赖。我不明白为什么 Visual Studio 添加我不使用的 dll。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-19T17:03:47.603

预构建的 OpenCV 2.2 及更高版本带有 2 个版本的二进制文件 (dll)。

**\build\gpu**目录中的 dll是超集，并且使用 CUDA 支持构建。因此，要使用它们，您需要 CUDA 运行时 dll（cudart、npp 等）。如果您想使用 OpenCV 的 GPU 功能，则需要这些二进制文件。这些也可用于检查您的系统中是否存在 GPU。

**在 OpenCV 的构建**目录中的 x86 或 x64 文件夹中存在的其他版本的 dll 是在不支持 CUDA 的情况下构建的（尽管该目录中也存在 gpu dll）。您不需要 cuda dll 来使用这些二进制文件。

这两个版本均使用英特尔线程构建模块支持构建，因此分别需要 tbb_debug.dll 和 tbb.dll 进行调试和发布配置。因此，如果您使用 OpenCV 的 CPU 功能，它们将被 TBB 加速。

# c++ - 是否可以缩短此声明？

> ID：12489653
> 
> 赞同：1
> 
> 时间：2012-09-19T06:39:50.443
> 
> 标签：c++, c++builder, c++builder-2010

是否有可能缩短此声明，因为我在代码中经常使用它

例如，我用它来`Object`转换为我的`CustomObject`using

```
dynamic_cast/static_cast<TCustomClassName*>(SenderObject) 
```

有没有可能缩短这个 using`typedef static_cast<TCustomClassName*>`或类似的东西以确保可以使用 cast 运算符 in `typedef`？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-09-19T07:01:45.720

不，你不能，你不**应该**！不要为强制转换运算符定义任何宏，它会混淆您的应用程序代码的维护者，并会在您的编程圈子中造成严重破坏。这些运算符的存在正是为了提供一种可读的方式来告诉程序员，这里正在发生强制转换。日常使用的强制转换会引起程序员之间的混淆，因此这些关键字可以帮助他们。因此，坚持使用它们并明智地使用它们。甚至不要恢复到 C 风格的转换，这些运算符的目的是提供一种理解代码中发生的事情的方法。如果您不熟悉它们，请阅读以下内容：[何时应使用 static_cast、dynamic_cast、const_cast 和 reinterpret_cast？](https://stackoverflow.com/questions/332030/when-should-static-cast-dynamic-cast-and-reinterpret-cast-be-used)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-19T21:50:14.593

您可以使用模板函数而不是宏，这样您就不会失去任何类型安全性：

```
template<typename InputType, typename ReturnType>
void SCast(InputType Input, ReturnType &Ret)
{
    Ret = static_cast<ReturnType>(Input);
}

template<typename InputType, typename ReturnType>
void DCast(InputType Input, ReturnType &Ret)
{
    Ret = dynamic_cast<ReturnType>(Input);
}

template<typename InputType, typename ReturnType>
void RCast(InputType Input, ReturnType &Ret)
{
    Ret = reinterpret_cast<ReturnType>(Input);
} 
```

然后你可以像这样使用它们：

```
TCustomClassName *cls;
SCast(SenderObject, cls); 
```

.

```
TCustomClassName *cls;
DCast(SenderObject, cls); 
```

.

```
TCustomClassName *cls;
RCast(SenderObject, cls); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-19T07:10:03.883

使用 IDE 的键盘快捷键。例如，在 Eclipse 中，通过代码补全，只需几次击键即可输入。`static_cast<MyClass*>.`如果您经常需要相同的内容，您甚至可以定义自己的键盘宏以通过一个热键插入样板。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2020-11-24T09:26:02.730

可以通过这种方式：

```
auto ToUi16 = [](auto v)
{
    return static_cast<unsigned __int16>(v);
}; 
```

但这会降低您的代码的可读性。

# iphone - 产生 8 kHz / 12 kHz / 15 kHz / 17.4 kHz / 22 kHz+iphone sdk 的超声波

> ID：12489654
> 
> 赞同：0
> 
> 时间：2012-09-19T06:40:02.307
> 
> 标签：iphone, ios

我想像这样制作苍蝇应用程序[，](http://itunes.apple.com/us/app/fly-and-mosquito-killer/id537160389?mt=8)我知道我必须进行编码，以便它产生超声波，使苍蝇远离一定距离。以及人耳听不到的声音。

我对iphone中的超声波一无所知。任何人都可以请指导我。

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-19T08:00:23.537

iPhone 的频率响应范围为 20Hz 至 20,000Hz。

超声波大约在 20,000Hz 以上，所以我认为这是不可能的（至少使用标准的 iphone 扬声器）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-19T08:59:40.443

根据您的要求[在此处](http://www.ultrasonic-ringtones.com/)下载超声波使用。

# android - android - sharedpreferences 返回空值

> ID：12489659
> 
> 赞同：11
> 
> 时间：2012-09-19T06:41:07.970
> 
> 标签：android, sharedpreferences

我正在尝试使用 sharedpreferences 来检查用户是否在开始使用该应用程序之前登录。用户登录时，我将用户名保存在 shredpreferences 中。

登录.java

```
public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.login);     
        Button btnLogin = (Button) findViewById(R.id.buttonlogin);      
        btnLogin.setOnClickListener(new View.OnClickListener() {
            public void onClick(View adapt) {
                EditText usernameEditText = (EditText) findViewById(R.id.EditUserName);
                userName = usernameEditText.getText().toString();
                EditText passwordEditText = (EditText) findViewById(R.id.EditPassword);
                userPassword = passwordEditText.getText().toString();               
                if (userName.matches("") && userPassword.matches("")) {
                    toast("Please enter Username and Password");
                    return;
                } else if (userName.matches("") || userName.equals("")) {
                    toast("Please enter Username");
                    return;
                } else if (userPassword.matches("") || userPassword.equals("")) {
                    toast("Please enter Password");
                    return;
                } else {
                    SharedPreferences sharedPreferences = getPreferences(MODE_PRIVATE);
                    SharedPreferences.Editor editor = sharedPreferences.edit();
                    editor.putString("MEM1", userName);
                    editor.commit();
                    new DownloadFilesTask().execute();
                }           
            }
        });
    }

    private void toast(String text) {
        Toast.makeText(this, text, Toast.LENGTH_SHORT).show();
    }

    private class DownloadFilesTask extends AsyncTask<Void, Void, Void> {
        protected void onPreExecute() {
        }

        protected void onPostExecute(Void result) {
            toast("user logged in");
            startActivity(new Intent(Login.this, MainActivity.class));
            finish();
        }

        @Override
        protected Void doInBackground(Void... params) {         
            return null;
        }
    }

} 
```

在我开始我的主要活动之前，我试图检查用户名值。

```
SharedPreferences sharedPreferences = getPreferences(MODE_PRIVATE);
    String username =sharedPreferences.getString("MEM1", "");
    if(username.equalsIgnoreCase("")||username.length()==0)
    {
        toast("username is null");
        startActivity(new Intent(MainActivity.this, Login.class));
        finish();
    } 
```

但用户名始终为空。请帮忙。谢谢

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2012-09-19T06:48:43.987

打电话`getPreferences`意味着你必须在同一个活动中。使用`getSharedPreferences`允许您在活动之间共享偏好。您只需在调用时为首选项定义一个名称`getSharedPreferences("Pref name here", MODE_PRIVATE);`

* * *

## 回答 #2

> 赞同：16
> 
> 时间：2012-09-19T06:46:08.080

在下面编写代码而不是您的代码，以将用户名保存到 sharedpreferences 中。

```
SharedPreferences myPrefs = this.getSharedPreferences("myPrefs", MODE_WORLD_READABLE);
SharedPreferences.Editor editor = myPrefs.edit();
editor.putString("MEM1", userName);
editor.commit(); 
```

并使用以下代码获取首选项值。

```
SharedPreferences myPrefs = this.getSharedPreferences("myPrefs", MODE_WORLD_READABLE);
String username = myPrefs.getString("MEM1",""); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-06-02T15:13:22.180

```
private final String TAXI_SPREF = "TAXI_SHARED_PREFERENCES";

//set-save data to shared preferences
SharedPreferences.Editor sPEditor = getSharedPreferences(TAXI_SPREF, MODE_PRIVATE).edit();
sPEditor.putInt("USERID", etUserID.getText().toString());
sPEditor.putString("EMAIL", etEmail.getText().toString());
sPEditor.apply();

//get data from shared preferences

SharedPreferences sharedPreferences = getSharedPreferences(TAXI_SPREF, MODE_PRIVATE);
int userID = sharedPreferences.getInt("USERID", 0);
string email = sharedPreferences.getString("EMAIL", 0);
////////     or         /////
String email = getSharedPreferences(TAXI_SPREF, MODE_PRIVATE).getString("EMAIL","EMPTY");
    if (!email.equals("EMPTY")){
        etEmail.setText(email);
    } 
```

# c# - 错误：实例参数：无法从“int”转换为“System.Linq.IQueryable” '

> ID：12489667
> 
> 赞同：0
> 
> 时间：2012-09-19T06:41:23.530
> 
> 标签：c#, asp.net-mvc, nopcommerce

我写了服务类。

```
 public partial class ProductService : IProductService
    {
        #region Constants

        private const string PRODUCTVARIANTPRICERANGE_PATTERN_KEY = "Nop.productVariantPriceRange.";
        #endregion

        #region Fields

        private readonly IRepository<ProductVariantPriceRange> _productVariantPriceRangeRepository;

        public ProductService(ICacheManager cacheManager,

            IRepository<ProductVariantPriceRange> productVariantPriceRangeRepository,
            )
        {

            this._productVariantPriceRangeRepository = productVariantPriceRangeRepository;

        }

        #endregion 
```

然后写一个函数

```
 public virtual void CheckProductVariantPriceRange(int productVariantPriceRangeId)
        {
            bool flage=true;
            var query = _productVariantPriceRangeRepository.Table;

               query = query.Where(m => m.ProductVariantId.Contains(productVariantPriceRangeId));

            var ProductVariantPriceRangeS = query.ToList();
            if (ProductVariantPriceRangeS.Count == 0)
            {
                flage = false;
            }

        } 
```

但它发生了流动错误..

1.  `Instance argument: cannot convert from 'int' to 'System.Linq.IQueryable<int>'`

2.  'int' 不包含 'Contains' 的定义，并且最佳扩展方法重载 'System.Linq.Queryable.Contains(System.Linq.IQueryable, TSource)' 有一些无效参数

我不知道这是什么错误。我该如何解决这个问题..请帮助

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-19T06:44:44.980

该`ProductVariantId`属性不是一个集合，它是一个单一的值。您应该将每条记录的属性值与所需值进行比较：

```
query = query.Where(m => m.ProductVariantId == productVariantPriceRangeId); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-19T06:44:45.427

删除`Contains`方法调用。换句话说，替换：

```
query = query.Where(m => 
    m.ProductVariantId.Contains(productVariantPriceRangeId)); 
```

和

```
query = query.Where(m => m.ProductVariantId == productVariantPriceRangeId); 
```

# c++ - 使用 OpenGL 3+ 渲染点（粒子）

> ID：12489672
> 
> 赞同：2
> 
> 时间：2012-09-19T06:41:44.133
> 
> 标签：c++, opengl, glsl, particles, billiards

OpenGL 3 渲染点：点存储在空间分区树中。该树具有具有颜色和法线信息属性的点。

点信息及其属性存储为一组缓冲区。

1.  偏移缓冲区是一个向量数组。

2.  这些点作为中心和偏移索引存储在内存中。偏移索引指向偏移缓冲区`Point = center + OffSetBuffer[offset index]`。

3.  法线存储在法线缓冲区中，每个点都保存法线缓冲区的索引。

4.  颜色存储在颜色缓冲区中，每个点都保存颜色缓冲区的索引。

我有一些空间来更改缓冲区布局，但保持上述信息会减少重复或冗余信息。

我的问题是如何有效地使用 OpenGL 3+ API 渲染上述点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-19T10:19:10.610

您不需要额外的偏移缓冲区和偏移索引，只需传递纹理坐标即可。这是您应该在顶点程序中执行的操作：

1）从ModelView矩阵计算粒子基础：

```
vec3 X = vec3(ModelView[0][0], ModelView[1][0], ModelView[2][0]);
vec3 Y = vec3(ModelView[0][1], ModelView[1][1], ModelView[2][1]); 
```

2）根据粒度计算角点（可以是统一的，也可以是属性的）：

```
 vec3 A1 = -X*SizeX - Y*SizeY;
   vec3 B1 =  X*SizeX - Y*SizeY;
   vec3 C1 =  X*SizeX + Y*SizeY;
   vec3 D1 = -X*SizeX + Y*SizeY; 
```

3）将中心点移动到适当的角落：

```
 if (TexCoord == vec2(0.0, 0.0)) Position += A1;
   if (TexCoord == vec2(1.0, 0.0)) Position += B1;
   if (TexCoord == vec2(1.0, 1.0)) Position += C1;
   if (TexCoord == vec2(0.0, 1.0)) Position += D1; 
```

或更高效的无分支代码：

```
vec3 O1 = ( 1.0 - TexCoord.y ) * ( A1 * ( 1.0 - TexCoord.x ) + B1 * TexCoord.x );
vec3 O2 = TexCoord.y * ( C1 * TexCoord.x + D1 * (1.0 - TexCoord.x ) );
Position += O1 + O2; 
```

# php - 如何在php中获取多个复选框的值

> ID：12489675
> 
> 赞同：1
> 
> 时间：2012-09-19T06:42:17.820
> 
> 标签：php, checkbox

我已经使用以下代码为选定的复选框选择多个值以将其从数据库表中删除，但是当我是 print_r 时，它只显示它的键而不显示 id 的值。

我已经使用此代码来获取数组中的值：-

```
<?php
echo "Hiiiiiiiiii";
include("conn.php");
$sql="select * from test ";

$res=mysql_query($sql) or die(mysql_error());
?>

<form name="form1" method="POST" action="">
    <table width="578" border="1" align="center" id="menu">
    <tr>
    <th></th>
    <th>id</th>
    <th>Name</th>
    <th>email</th>
    <th>phno</th>
 </tr>

<?php
 while($row=mysql_fetch_array($res))
 {
?>

 <tr>

    <td><input name="checkbox[]" type="checkbox" id="checkbox[]" value="<? echo $rows['id']; ?>"></td>
    <td><?php echo $row['id'];?></td>

    <td><?php echo $row['name'];?></td>
    <td><?php echo $row['emailid'];?></td>

    <td><?php echo $row['phno'];?></td>
    <?php
    echo"<td><a href='update.php?id=".$row['id']."'>Update</a></td>";
    ?>
 <?php
  }
 ?>  
 <tr><td><input type="submit" name="delete" value="Delete" id="delete"></td></tr></tr></table>

 <?php
// Check if delete button active, start this
$count = mysql_num_rows($res);
echo "$count";

if(isset($_POST['delete']))
{
    if(count($_POST['checkbox']) !=0)
    {
        $array = array("checkbox" => $_POST['checkbox']);
        print_r($array);
        $ids = implode(',', $array);
        echo "$ids";
        $result = mysql_query("DELETE FROM test WHERE id IN ($ids)") or die(mysql_error());
    }
}
// if successful redirect to delete_multiple.php 
if($result)
    {
     echo "<meta http-equiv=\"refresh\" content=\"0;URL=teach_delinquent.php\">";
     echo "SUCCESS";
    }

 ?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-19T06:44:47.150

`$_POST['checkbox']`数组将仅包含复选框：

```
$ids = array();
foreach($_POST['checkbox'] as $val){
    $ids[] = (int) $val;
}
$ids = implode(',', $ids); 
```

出于安全目的，我已经完成了`foreach`所有 id 的制作。`INT`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-03-28T04:52:10.043

您的问题的快速修复如下

替换下面的行

```
$array = array("checkbox" => $_POST['checkbox']); 
```

和

```
$array = $_POST['checkbox']; 
```

或者

```
$array = array_map('intval',$_POST['checkbox']); // if all values are integer ---for security 
```

因为 $_POST['checkbox'] 已经是一个数组

希望这能解决您的问题

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2018-05-12T16:39:12.497

首先，您需要计算有多少个复选框

```
$counter = sizeof($_POST['checkbox']); 
```

运行一个循环来访问所有这些值

```
for($i=0;$i<=$counter;$i++){
    $checkbox_val = $_POST['checkbox'][$i];
} 
```

这就是你所需要的

# unicode - 手机支持的印地语 Unicode

> ID：12489677
> 
> 赞同：0
> 
> 时间：2012-09-19T06:42:25.550
> 
> 标签：unicode, fonts, sms, hindi, language-translation

我目前正在做一个语言翻译项目，我正在将英文文本转换为印地语。我正在尝试将转换后的印地语文本发送到手机，但由于没有印地语字体，消息无法在我的手机上显示。但是我看到移动网络运营商用印地语发送他们的宣传片，我的手机读起来很吸引人。我想知道是否有任何 unicode 或其他文本转换，以便印地文文本将显示在我的手机上？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-19T07:12:55.923

我也想过启动这样的程序。我在一个文件中维护了所有印地语字母的 Unicode 字符。

```
2305
2309
2309 अआइईउऊऋएऐओऔअंअँअंअः
2325 कखगघङ 
2330 चछजझञ 
2335 टठडढण 
2340 तथदधनऩ
2346 पफबभम
2351 यरऱलळऴव
2358 शषसह 2361
2364 च़चऽचाचि ---- -upto च॔ 2388
2392 क़ख़ग़ज़ड़ड़ढ़फ़य़ॠॡ 2401
2402 चॢचॣ। ॥ 2405
2406 ०१२३४५६७८९ 
```

我希望你有 16 位字符来存储印地语字符。

# nexus - Nexus 存储库未更新

> ID：12489681
> 
> 赞同：0
> 
> 时间：2012-09-19T06:43:01.373
> 
> 标签：nexus, maven-deploy-plugin

我们使用 Maven 部署插件通过文件协议将工件上传到 Nexus。有时，这些工件不会直接出现在 Nexus Web 界面中。我必须做'过期缓存'并刷新页面。此外，这会导致依赖于该工件的构建失败。

我想这是因为，我们通过文件协议进行部署。有没有办法防止这种情况？我在 Nexus 界面中看到了“未找到缓存 TTL”。不确定是否理解文档。如果我将其设置为零，这会起作用吗？

谢谢

私服

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-20T13:34:14.170

直接部署到文件系统应该只在极端情况下使用，例如批量操作或导入。为了使 Nexus 完全识别磁盘上的更改，您需要使缓存过期，然后您可能必须重建元数据。这两个都可以从存储库屏幕触发。如果您希望工件可搜索，您还必须启动索引器任务。

当您通过 http/https 直接部署到 Nexus 时，所有这些事情都会自动发生，这是它的预期使用方式

# coding-style - 有没有办法清理这个 Go 代码？

> ID：12489688
> 
> 赞同：2
> 
> 时间：2012-09-19T06:43:38.330
> 
> 标签：coding-style, refactoring, go

我刚刚开始学习 Go，并制作了一个函数来解析带有标题的 markdown 文件，其中包含一些元数据（这些文件是博客文章）。

这是一个例子：

```
---
Some title goes here
19 September 2012
---
This is some content, read it. 
```

我写了这个函数，它可以工作，但我觉得它很冗长和混乱，我看过各种字符串包，但我对 Go 的了解不够，最好的做法是知道我应该是什么做不同的事情，如果我能得到一些提示来清理它，我将不胜感激。（另外，我知道我不应该忽视这个错误）。

```
type Post struct {
    Title string
    Date string
    Body string
}
func loadPost(title string) *Post {
    filename := title + ".md"
    file, _ := ioutil.ReadFile("posts/" + filename)
    fileString := string(file)
    str := strings.Split(fileString, "---")
    meta := strings.Split(str[1], "\n")
    title = meta[1]
    date := meta[2]
    body := str[2]
    return &Post{Title: title, Date: date, Body: body}
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-19T07:58:37.110

我觉得还不错。几个建议：

*   “posts/”中的硬编码斜线是平台相关的。您可以使用 path/filepath.Join 来避免这种情况。
*   有 bytes.Split，所以你不需要字符串（文件）。
*   您可以在不重复字段的情况下创建帖子：`&Post{title, date, body}`

或者，您可以找出正文从哪里开始，`LastIndex(s, "--")`并使用它来相应地索引文件内容。这样就避免了使用Split的分配。

```
const sep = "--"

func loadPost(content string) *Post {
    sepLength := len(sep)

    i := strings.LastIndex(content, sep)
    headers := content[sepLength:i]
    body := content[i+sepLength+1:]

    meta := strings.Split(headers, "\n")

    return &Post{meta[1], meta[2], body}
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-19T23:36:42.767

我同意这还不错。我将添加其他一些想法。

*   正如 Thomas 所示，您不需要中间变量 title date 和 body。试一试，

    ```
    return &Post{
        Title: meta[1],
        Date: meta[2],
        Body: body,
    } 
    ```

    确实可以省略字段名称，但我有时希望它们保持代码自记录。（我认为去兽医也喜欢他们。）

*   我对字符串和字节切片大惊小怪，但可能比我应该做的要多。由于您一口气读取文件，因此您可能无需担心这一点。将所有内容转换为一个大字符串，然后将字符串切片是一种方便的处理方式，只要记住，如果您保留其中的任何部分，您就是将整个字符串固定在内存中。如果您的文件很大或者您有很多文件，并且您最终只保留了大多数文件的元数据，那么这可能不是要走的路。

*   每个文件只有一个博客条目？如果是这样，我想我会提出托马斯建议的变体。验证第一个字节是 ---（或您的文件已损坏），然后使用 strings.Index(fileString[3:], "---")。当您有未知数量的段时，拆分更合适。在您的情况下，您只是在元数据之后寻找那个单一的分隔符。索引会在搜索元后找到它并完成，而不是搜索整个身体。（无论如何，如果正文包含字符串“---”怎么办？）

*   最后，有些人会为此使用正则表达式。我还没有热身正则表达式，但无论如何，这是另一种方法。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-19T23:53:45.877

索尼娅有一些很好的建议。以下是我在解析标头时可能遇到的问题。

[http://play.golang.org/p/w-XYyhPj9n](http://play.golang.org/p/w-XYyhPj9n)

```
package main

import (
    "fmt"
    "strings"
)

const sep = "---"

type parseError struct {
    msg string
}

func (e *parseError) Error() string {
    return e.msg
}

func parse(s string) (header []string, content string, err error) {
    if !strings.HasPrefix(s, sep) {
        return header, content, &parseError{"content does not start with `---`!"}
    }
    arr := strings.SplitN(s, sep, 3)
    if len(arr) < 3 {
        return header, content, &parseError{"header was not terminated with `---`!"}
    }
    header = strings.Split(strings.TrimSpace(arr[1]), "\n")
    content = strings.TrimSpace(arr[2])
    return header, content, nil
}

func main() {

    //
    f := `---
Some title goes here
19 September 2012
---
This is some content, read it. --Anonymous`

    header, content, err := parse(f)
    if err != nil {
        panic(err)
    }

    for i, val := range header {
        fmt.Println(i, val)
    }
    fmt.Println("---")
    fmt.Println(content)

    //
    f = `---
Some title goes here
19 September 2012
This is some content, read it.`

    _, _, err = parse(f)
    fmt.Println("Error:", err)

    //
    f = `
Some title goes here
19 September 2012
---
This is some content, read it.`

    _, _, err = parse(f)
    fmt.Println("Error:", err)
} 
```

# javascript - 比较 JQuery 中给定时间段之间的当前时间

> ID：12489691
> 
> 赞同：0
> 
> 时间：2012-09-19T06:43:41.567
> 
> 标签：javascript, jquery-ui, jquery, jquery-plugins

我想用 Jquery 检查当前时间是否在上午 10.30 到上午 11.30 之间。我将如何以正确的方式做到这一点？

我尝试了以下方式，但它没有按我的预期工作

```
function compareTime(){

  var d = new Date(), // current time
  hours = d.getHours(),// current hour
  mins = d.getMinutes(); // current minute

  var sTime = "10.30";
  var eTime = "11.30";
  var cTime = hours+'.'+mins;

  if(sTime < cTime < eTime){
     // here i want to do something if the current time is in between ...
  }else{

  }
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-19T06:51:09.887

与jQuery无关：

```
function checkTime(d) {
  d = d || new Date();
  var minTime = new Date(d);
  var maxTime = new Date(d);

  minTime.setHours(10, 30, 0, 0);
  maxTime.setHours(11, 30, 0, 0);

  return d > minTime && d < maxTime;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-19T06:57:49.533

你可以这样做，

```
var sTime = "10.30"
sTime = sTime.split("."); 
var eTime = "11.30";
eTime = eTime.split("."); 
```

这样 eTime 和 sTime 将成为一个数组`sTime[0] = "10"`和`sTime[1] = "30"`，同样 eTime 也是。现在开发一个循环来与`hours`和进行比较`mins`。

# c - 带有数组数组的 memcmp

> ID：12489693
> 
> 赞同：0
> 
> 时间：2012-09-19T06:43:53.703
> 
> 标签：c, strcmp, memcmp

在 C 中，我想检查给定的字符数组中的任意字母，并根据它的内容进行更改。例如，字符“a”或“A”将更改为“4”（表示 4 的字符）。这对我来说是一个编码练习:)

代码如下：

```
#include <stdio.h>
#include <string.h>
#include <assert.h>
#include <zlib.h>

#define NUM_BUFFERS 8
#define BUFFER_LENGTH 1024

char buffArrays[NUM_BUFFERS][BUFFER_LENGTH];

int main(int argc, const char* arg[v])
{
    const char a[] = "a";

    gzFile file;
    file = gzopen("a.txt", "rb"); //contains 8 lines of 1024 'a's
    int counter = 0;
    while(counter < NUM_BUFFERS)
    {
        gzread(file, buffArrays[counter], BUFFER_LENGTH - 1);
        counter++;
    }
    counter = 0;
    while(counter < NUM_BUFFERS)
    {
        int i = 0;
        for( i; i < BUFFER_LENGTH; i++ )
        {
            int *changed = &buffArrays[counter][i];
            if( memcmp(&a, changed, 1) == 0 )
                printf("SUCCESS\n");
        }
        counter++;
    }
    gzclose(file);
    return 0;
} 
```

此代码永远不会到达“成功”部分。这对我说

(1) changed 的​​值没有指向正确的东西 (2) 指针 &a 不正确 (3) 我完全错了，是别的东西

任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-19T07:18:23.293

两件事情。

下面将值`0x61`或分配给`'a'`字符串。

```
const char a[] = 'a'; 
```

你可能更愿意写

```
const char a = 'a'; /* assign a character to a character */ 
```

或者

```
const char a[] = "a"; /* assign a string to a string */ 
```

接下来是下面的语句。`int`因此，您使用 a的内存地址分配一个指向 a 的指针`char`。当您在下一条语句中读取有效内存的范围时，它会调用未定义的行为。

```
int *changed = &bufferArrays[counter][i]; 
```

因此，您比较从两个地址开始的前四个字节。两个变量都只有一个字节宽。

```
if( memcmp(&a, changed, 4) == 0 ) 
```

如果您只想知道某些缓冲区中是否有“a”，为什么不直接知道。

```
int i, j;
for (i = 0; i < NUM_BUFFERS; i++)
  for (j = 0; j < BUFFER_LENGTH; j++)
    if (bufferArrays[i][j] == 'a') printf("got it!\n"); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-19T06:50:42.300

1) bufferArrays[counter] = "a"; //所有缓冲区都包含一个“a”

这不行，你必须使用`strcpy`复制字符串：

```
strcpy(bufferArrays[counter],"a"); //all the buffers contain one "a" 
```

2)

```
#define BUFFER_LENGTH 1 
```

这是一个问题。如果您只想存储一个字符（用于额外的空终止），缓冲区长度应至少为 2。

3）在你的两个循环中，你永远不会改变`counter`，这会导致无限循环。

你的代码在哪里？我没有看到任何围绕它的功能。

**编辑：** 分配你也可以使用：

```
while(counter < NUM_BUFFERS)
{
    bufferArrays[counter][0] = 'a'; //all the buffers contain one "a"
    counter++;
} 
```

在任何情况下，如果要将缓冲区长度用作 C 字符串，则必须将其设置为 2。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-19T06:48:02.350

该声明

```
bufferArrays[counter] = "a"; 
```

是不合法的。它分配一个指向单个的指针，`char`并且应该给出一个编译器错误（或至少一个警告）。而是尝试

```
bufferArrays[counter] = 'a'; 
```

~~此外，在`while`循环（它们两个）中，您不会增加`counter`，因此会一遍又一遍地循环遍历相同的索引。~~

**编辑：**进一步的问题

进行比较的条件也存在缺陷：

```
memcmp(&a, changed, 4) 
```

上面不比较指针，它比较指针指向的*内容*，比较四个字节，而内容只有一个字节。此外，您不能比较指针，因为它们*会*有所不同；变量的内容`a`存储在与 的内容不同的位置`bufferArrays[counter][i]`。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-19T06:48:29.820

这个：

```
bufferArrays[counter] = "a"; //all the buffers contain one "a" 
```

是错误的，因为`bufferArrays[counter]`不是字符指针而是字符数组。你需要：

```
strcpy(bufferArrays[counter], "a"); 
```

另外，你不显示`readTOmodify`，所以这部分有点难以理解。

此外，最好将字符串与`strcpy()`进行比较，后者逐个字符进行比较并在终止处停止`'\0'`。您使用`memcmp()`，我不明白`4`您要比较的字节数的原因。

# objective-c - 摆脱 iPhone 5 中的栏

> ID：12489696
> 
> 赞同：0
> 
> 时间：2012-09-19T06:43:58.307
> 
> 标签：objective-c, ios, iphone-5

我正在尝试在 xcode 中的 iPhone 5 Simulator 中显示图像。我正在使用 UIImageView。下面有一个酒吧。查看随附的屏幕截图。我如何摆脱那个酒吧？

![截屏](../Images/374ac781882e4070368df3855d881430.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-19T06:47:38.577

从导航控制器取消选中显示工具栏。

# php - 过滤搜索结果的分页

> ID：12489698
> 
> 赞同：1
> 
> 时间：2012-09-19T06:44:00.630
> 
> 标签：php, mysql

这又是我，我想再问一下，php mysql中过滤后的结果如何分页？我的分页只显示存储在数据库中的所有文件，但是当我想搜索例如所有采访的评论记录时，它会显示所有采访评论的文件，然后在第二页它仍然显示过滤结果。

我的问题是当我单击分页时，第二页将再次检索存储在数据库中的所有文件。我想要的第二页是过滤后的结果。

帮我。

搜索.php

```
<form id="form1" name="form1" method="get" action="">
<br/>
    <div>
    &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
     <font color ="white" face ="Arial" size ="5" style="padding: 5px; text-align: center;">Search for an Applicant Record</font><br/><br/>
     <table border=1 cellSpacing=1 cellPadding=1 align ="left" >
       <tr>
                <td>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</td>
                <td>&nbsp;&nbsp;&nbsp;</td>
                <td>&nbsp;&nbsp;&nbsp;</td>
                <td>&nbsp;&nbsp;&nbsp;</td>
                <td>&nbsp;&nbsp;&nbsp;</td>
                <td>&nbsp;&nbsp;&nbsp;</td>
                <td><font color ="white" size ="2" face ="Tahoma"><a href="search.php" style="text-decoration:none;"><img src="/applicants/icons/reset.png" title="Reset Page"/><font color="white" size="2" face="Tahoma"><b>Reset</b></font></a></font></td>
            </tr>
            <tr>
                <td>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</td>
                <td align="left"><p><label for="searchfor"><font color ="white" size ="2" face ="Tahoma"><b>Search for:            </b></font></label></p></td>
                <td>&nbsp;</td>
                <td align="left"><input type="text" name="searchfor" class="tb5a" id="searchfor" size="25"  /></td>
                <td align="left">
                <select name="select" class="tb5a">
                <option selected="selected">Applicant's Name</option>
                <option>Position Applying For</option>
                <option>Work Experience</option>
                <option>Remarks</option>
                </select>
                </td>
                <td>&nbsp;&nbsp;&nbsp;</td>
                <td>&nbsp;&nbsp;&nbsp;</td>
            </tr>
            <tr>
                <td>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</td>
                <td align="left"><p><label for="from"><font color ="white" size ="2" face ="Tahoma"><b>Date Applied from:            </b></font></label></p></td>
                <td>&nbsp;</td>
                <td align="left"><input name="from" type="text" class="tb5a" id="from" size="10"  /></td>
                <td>&nbsp;&nbsp;&nbsp;</td>
                <td>&nbsp;&nbsp;&nbsp;</td>
                <td>&nbsp;&nbsp;&nbsp;</td>

            </tr>
            <tr>
                <td>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</td>
                <td align="left"><p><label for="date_appliedto"><font color ="white" size ="2" face ="Tahoma"><b>        to:            </b></font></label></p></td>
                <td>&nbsp;</td>
                <td align="left"><input name="to" type="text" class="tb5a" id="to" size="10" /></td>
                <td>&nbsp;&nbsp;&nbsp;</td>
                <td>&nbsp;&nbsp;&nbsp;</td>
                <td>&nbsp;&nbsp;&nbsp;</td>
            </tr>
            <tr>
                <td>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</td>
                <td>&nbsp;&nbsp;&nbsp;</td>
                <td>&nbsp;</td>
                <td>&nbsp;&nbsp;&nbsp;</td>
                <td>&nbsp;&nbsp;&nbsp;</td>
                <td>&nbsp;&nbsp;&nbsp;</td>
                <td colspan="1" align="right"><p><input type="submit" name="search" class="update" id="button" value="    Search    " onclick=verify();/></p></td>
            </tr>
        </table>
    </div>
</form>
    <br/><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/>
<?php
error_reporting(0);
include_once 'include/conn.inc.php';
//Include the PS_Pagination class
include('include/pspagination.php');
        //Connect to mysql db
        $conn = mysql_connect('localhost','root','');
    if(!$conn) die("Failed to connect to database!");
    $status = mysql_select_db('timemanagement', $conn);
    if(!$status) die("Failed to select database!");

if ($_REQUEST["searchfor"]<>'') {
   $search_searchfor = " AND (lname LIKE '%".mysql_real_escape_string($_REQUEST["searchfor"])."%' OR fname LIKE '%".mysql_real_escape_string($_REQUEST["searchfor"])."%' OR mname LIKE '%".mysql_real_escape_string($_REQUEST["searchfor"])."%' OR image LIKE '%".mysql_real_escape_string($_REQUEST["searchfor"])."%' OR appfor LIKE '%".mysql_real_escape_string($_REQUEST["searchfor"])."%' OR workexp LIKE '%".mysql_real_escape_string($_REQUEST["searchfor"])."%' OR remarks LIKE '%".mysql_real_escape_string($_REQUEST["searchfor"])."%')";
   }

    if ($_REQUEST["from"]<>'' and $_REQUEST["to"]<>'') {
        $sql = "SELECT * FROM applicants_access WHERE date_applied >= '".mysql_real_escape_string($_REQUEST["from"])."' AND date_applied <= '".mysql_real_escape_string($_REQUEST["to"])."'".$search_searchfor;
    }
    else if ($_REQUEST["from"]<>'') {
        $sql = "SELECT * FROM applicants_access WHERE date_applied >= '".mysql_real_escape_string($_REQUEST["from"])."'".$search_searchfor;
    }
    else if ($_REQUEST["to"]<>'') {
        $sql = "SELECT * FROM applicants_access WHERE date_applied <= '".mysql_real_escape_string($_REQUEST["to"])."'".$search_searchfor;
    }
    else {
        $sql = "SELECT * FROM applicants_access WHERE applicant_id>0".$search_searchfor;
    }
    if (($_REQUEST["select"])==($_REQUEST["searchfor"])){
        $sql = "Select * from applicants_access order by applicant_id desc";
    }
    $sql_result = mysql_query($sql);

    echo '<center>';
        /*
     * Create a PS_Pagination object
     *
     * $conn = MySQL connection object
     * $sql = SQl Query to paginate
     * 10 = Number of rows per page
     * 5 = Number of links
     * "param1=valu1&param2=value2" = You can append your own parameters to paginations links
     */
    $pager = new PS_Pagination($conn, $sql, 20, 10, "param1=valu1&param2=value2");

    /*
     * Enable debugging if you want o view query errors
    */
    $pager->setDebug(true);

    /*
     * The paginate() function returns a mysql result set
     * or false if no rows are returned by the query
    */
    $rs = $pager->paginate();
    if(!$rs) die(mysql_error());
            if($sql_result){
?>
<br/>
<div align ="center">
<table id='table-2' cellspacing="0" cellpadding="1" border=1 >
  <thead>
    <th><center><font color ="#640303"><b>Last Name</b></font></center></th>
    <th><center><font color ="#640303"><b>First Name</b></font></center></th>
    <th><center><font color ="#640303"><b>Middle Name</b></font></center></th>
    <th><center><font color ="#640303"><b>View Attachment</b></font></center></th>
    <th><center><font color ="#640303"><b>Contact Number</b></font></center></th>
    <th><center><font color ="#640303"><b>Position Applying For</b></font></center></th>
    <th><center><font color ="#640303"><b>Work Experience</b></font></center></th>
    <th><center><font color ="#640303"><b>Date Applied</b></font></center></th>
    <th><center><font color ="#640303"><b>Remarks</b></font></center></th>
</thead>

<?php

if (mysql_num_rows($sql_result)>0) {
    while ($row = mysql_fetch_array($rs)) {

?>

        <tbody>
        <tr>
        <td><center><font color = 'black'><?php echo $row["lname"]; ?></font></center></td>
        <td><center><font color = 'black'><?php echo $row["fname"]; ?></font></center></td>
        <td><center><font color = 'black'><?php echo $row["mname"]; ?></font></center></td>
        <td><center><font color = 'black'><a href = 'view.php' target='_blank'>view</a></font></center></td>
        <td><center><font color = 'black'><?php echo $row["cnumber"]; ?></font></center></td>
        <td><center><font color = 'black'><?php echo $row["appfor"]; ?></font></center></td>
        <td><center><font color = 'black'><?php echo $row["workexp"]; ?></font></center></td>
        <td><center><font color = 'black'><?php echo $row["date_applied"]; ?></font></center></td>
        <td><center><font color = 'black'><?php echo $row["remarks"]; ?></font></center></td>
        </tr>
        </tbody>

<?php
}
}
else {
?>
<tr><td colspan="45">No results found.</td></tr>
<?php
}

?>    
</table>
</div>
<?php
        }
//Display the full navigation in one go
    //echo $pager->renderFullNav();

    //echo "<br />\n";

    /*
     * Or you can display the individual links for more
     * control over HTML rendering.
     *
    */
        //echo '<div class="pagination1">';

        echo '<div class="paginationTG">';
        echo '<ul>';
    //Display the link to first page: First
    echo $pager->renderFirst();

    //Display the link to previous page: <<
    echo $pager->renderPrev();
        echo'</span>';
    /*
     * Display page links: 1 2 3
     * $prefix = Will be prepended to the page link (optional)
     * $suffix = Will be appended to the page link (optional)
     *
    */

    echo $pager->renderNav('<li class="currentpage">', '</li>');

    //Display the link to next page: >>
    echo $pager->renderNext();

    //Display the link to last page: Last
    echo $pager->renderLast();
        echo '</div>' . '</ul>';
        echo '</center>';
?>

<script>
    $(function() {
        var dates = $( "#from, #to" ).datepicker({
            defaultDate: "+1w",
            changeMonth: true,
            numberOfMonths: 2,
            dateFormat: 'yy-mm-dd',
            onSelect: function( selectedDate ) {
                var option = this.id == "from" ? "minDate" : "maxDate",
                    instance = $( this ).data( "datepicker" ),
                    date = $.datepicker.parseDate(
                        instance.settings.dateFormat ||
                        $.datepicker._defaults.dateFormat,
                        selectedDate, instance.settings );
                dates.not( this ).datepicker( "option", option, date );
            }
        });
    });
    </script> 
```

* * *

这是我的分页脚本.. pagination.php

```
<?php
/**
 * PHPSense Pagination Class
 *
 * PHP tutorials and scripts
 *
 * @package     PHPSense
 * @author      Jatinder Singh Thind
 * @copyright   Copyright (c) 2006, Jatinder Singh Thind
 * @link        http://www.phpsense.com
 */

// ------------------------------------------------------------------------

class PS_Pagination {
    var $php_self;
    var $rows_per_page = 20; //Number of records to display per page
    var $total_rows = 0; //Total number of rows returned by the query
    var $links_per_page = 10; //Number of links to display per page
    var $append = ""; //Paremeters to append to pagination links
    var $sql = "";
    var $debug = false;
    var $conn = false;
    var $page = 1;
    var $max_pages = 0;
    var $offset = 0;

    /**
     * Constructor
     *
     * @param resource $connection Mysql connection link
     * @param string $sql SQL query to paginate. Example : SELECT * FROM users
     * @param integer $rows_per_page Number of records to display per page. Defaults to 10
     * @param integer $links_per_page Number of links to display per page. Defaults to 5
     * @param string $append Parameters to be appended to pagination links
     */

    function PS_Pagination($connection, $sql, $rows_per_page = 20, $links_per_page = 10, $append = "") {
        $this->conn = $connection;
        $this->sql = $sql;
        $this->rows_per_page = (int)$rows_per_page;
        if (intval($links_per_page ) > 0) {
            $this->links_per_page = (int)$links_per_page;
        } else {
            $this->links_per_page = 10;
        }
        $this->append = $append;
        $this->php_self = htmlspecialchars($_SERVER['PHP_SELF'] );
        if (isset($_GET['page'] )) {
            $this->page = intval($_GET['page'] );
        }
    }

    /**
     * Executes the SQL query and initializes internal variables
     *
     * @access public
     * @return resource
     */
    function paginate() {
        //Check for valid mysql connection
        if (! $this->conn || ! is_resource($this->conn )) {
            if ($this->debug)
                echo "MySQL connection missing<br />";
            return false;
        }

        //Find total number of rows
        $all_rs = @mysql_query($this->sql );
        if (! $all_rs) {
            if ($this->debug)
                echo "SQL query failed. Check your query.<br /><br />Error Returned: " . mysql_error();
            return false;
        }
        $this->total_rows = mysql_num_rows($all_rs );
        @mysql_close($all_rs );

        //Return FALSE if no rows found
        if ($this->total_rows == 0) {
            if ($this->debug)
                echo "Query returned zero rows.";
            return FALSE;
        }

        //Max number of pages
        $this->max_pages = ceil($this->total_rows / $this->rows_per_page );
        if ($this->links_per_page > $this->max_pages) {
            $this->links_per_page = $this->max_pages;
        }

        //Check the page value just in case someone is trying to input an aribitrary value
        if ($this->page > $this->max_pages || $this->page <= 0) {
            $this->page = 1;
        }

        //Calculate Offset
        $this->offset = $this->rows_per_page * ($this->page - 1);

        //Fetch the required result set
        $rs = @mysql_query($this->sql . " LIMIT {$this->offset}, {$this->rows_per_page}" );
        if (! $rs) {
            if ($this->debug)
                echo "Pagination query failed. Check your query.<br /><br />Error Returned: " . mysql_error();
            return false;
        }
        return $rs;
    }

    /**
     * Display the link to the first page
     *
     * @access public
     * @param string $tag Text string to be displayed as the link. Defaults to 'First'
     * @return string
     */
    function renderFirst($tag = 'First') {
        if ($this->total_rows == 0)
            return FALSE;

        if ($this->page == 1) {
            return "$tag ";
        } else {
            return '<a href="' . $this->php_self . '?page=1&' . $this->append . '">' . $tag . '</a> ';
        }
    }

    /**
     * Display the link to the last page
     *
     * @access public
     * @param string $tag Text string to be displayed as the link. Defaults to 'Last'
     * @return string
     */
    function renderLast($tag = 'Last') {
        if ($this->total_rows == 0)
            return FALSE;

        if ($this->page == $this->max_pages) {
            return $tag;
        } else {
            return ' <a href="' . $this->php_self . '?page=' . $this->max_pages . '&' . $this->append . '">' . $tag . '</a>';
        }
    }

    /**
     * Display the next link
     *
     * @access public
     * @param string $tag Text string to be displayed as the link. Defaults to '>>'
     * @return string
     */
    function renderNext($tag = 'Next') {
        if ($this->total_rows == 0)
            return FALSE;

        if ($this->page < $this->max_pages) {
            return '<a href="' . $this->php_self . '?page=' . ($this->page + 1) . '&' . $this->append . '">' . $tag . '</a>';
        } else {
            return $tag;
        }
    }

    /**
     * Display the previous link
     *
     * @access public
     * @param string $tag Text string to be displayed as the link. Defaults to '<<'
     * @return string
     */
    function renderPrev($tag = 'Previous') {
        if ($this->total_rows == 0)
            return FALSE;

        if ($this->page > 1) {
            return ' <a href="' . $this->php_self . '?page=' . ($this->page - 1) . '&' . $this->append . '">' . $tag . '</a>';
        } else {
            return " $tag";
        }
    }

    /**
     * Display the page links
     *
     * @access public
     * @return string
     */
    function renderNav($prefix = '<span>', $suffix = '</span>') {
        if ($this->total_rows == 0)
            return FALSE;

        $batch = ceil($this->page / $this->links_per_page );
        $end = $batch * $this->links_per_page;
        if ($end == $this->page) {
            //$end = $end + $this->links_per_page - 1;
        //$end = $end + ceil($this->links_per_page/2);
        }
        if ($end > $this->max_pages) {
            $end = $this->max_pages;
        }
        $start = $end - $this->links_per_page + 1;
        $links = '';

        for($i = $start; $i <= $end; $i ++) {
            if ($i == $this->page) {
                $links .= $prefix . " $i " . $suffix;
            } else {
                $links .= ' ' . $prefix . '<a href="' . $this->php_self . '?page=' . $i . '&' . $this->append . '">' . $i . '</a>' . $suffix . ' ';
            }
        }

        return $links;
    }

    /**
     * Display full pagination navigation
     *
     * @access public
     * @return string
     */
    function renderFullNav() {
        return $this->renderFirst() . '&nbsp;' . $this->renderPrev() . '&nbsp;' . $this->renderNav() . '&nbsp;' . $this->renderNext() . '&nbsp;' . $this->renderLast();
    }

    /**
     * Set debug mode
     *
     * @access public
     * @param bool $debug Set to TRUE to enable debug messages
     * @return void
     */
    function setDebug($debug) {
        $this->debug = $debug;
    }
}
?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-19T06:47:57.880

将 LIMIT offset,pagesize 添加到您的 SELECT 语句中。

有关 MySQL 选择的更多信息，请查看[http://dev.mysql.com/doc/refman/5.0/en/select.html](http://dev.mysql.com/doc/refman/5.0/en/select.html)

# css - css, px 死了吗

> ID：12489699
> 
> 赞同：2
> 
> 时间：2012-09-19T06:44:00.803
> 
> 标签：css, pixels, measurement

我正在考虑未来的 CSS 最佳实践。新 iPad 或 iPhone 上的 12px 字体将无法阅读。作为补偿，这些设备改变了它们对像素的定义。当您在浏览器上使用`Ctrl``+`/时，它也只是更改像素的定义并重绘。`Ctrl``-`

由于像素不再与显示单元真正绑定，是时候简单地放弃将像素作为测量单位了吗？

优点：

*   元素更容易相互关联（mm 和 cm；pt、pc、in 等）。
*   点转移打印很好。（还记得 Netscape Navigator 和打印像素大小的字体吗？）
*   我们非常习惯于以磅为单位来指代字体大小。
*   物理测量更容易设计。
*   显示器变得越来越密集和多样化。如果我们说一个项目是 7 毫米高，那么它将是 7 毫米高。使用像素，我们不知道最终用户会看到什么。

缺点：

*   图像将始终由固定数量的彩色点组成。500 x 500 的图像在 500 x 500 显示元素下总是看起来最好。
*   Javascript 以像素为单位报告元素的大小，将它们转换为物理尺寸需要额外的工作。

你觉得呢？你有没有什么想法？

# sql - 使用 SQL Server 身份验证连接

> ID：12489703
> 
> 赞同：1
> 
> 时间：2012-09-19T06:44:15.677
> 
> 标签：sql, connection

通过 Sql Server 的 Management Studio 进行连接是可行的，但是，它不会通过 web.config 连接字符串进行连接。

```
<add name="cnString" connectionString="Data Source=(local); Initial Catalog=MyDB; User ID=andrewbb; Password=myPassword;" providerName="System.Data.SqlClient" /> 
```

它返回：用户“andrewbb”登录失败。原因：密码与提供的登录名不匹配。[客户： ]

密码和用户 ID 都是小写的。想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-19T06:49:34.177

您的登录详细信息需要一直保存。在连接字符串中包含以下内容以保留安全信息。

```
Persist Security = true 
```

参考：[持久安全信息和集成安全之间的区别？](https://stackoverflow.com/questions/2009976/differance-between-persist-security-info-and-integrated-security)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-19T07:22:03.647

尝试将**NETWORK SERVICE**帐户添加到数据库

[如何：使用网络服务帐户访问 ASP.NET 中的资源](http://msdn.microsoft.com/en-us/library/ff647402.aspx)

[检查这个](http://social.msdn.microsoft.com/Forums/en-US/sqldatabaseengine/thread/e313f2fb-6729-4bcf-bae4-01430cd60781/)

# silverlight - Silverlight 中 TextBox 的触摸事件是什么？

> ID：12489704
> 
> 赞同：0
> 
> 时间：2012-09-19T06:44:16.067
> 
> 标签：silverlight, textbox, touch, silverlight-5.0

我正在开发一个 Silverlight 5 应用程序，它应该部署在触摸屏界面上。据我所知，按钮点击事件在触摸屏上正确引发（我无法访问触摸屏）。

但是，触摸 SL5 文本框会引发什么事件？文本框没有点击事件。

另外，触摸文本块会引发什么事件？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-19T19:18:08.257

您可以使用 MouseLeftButtonDown 事件。

# javascript - 需要帮助制作这个小型 javascript '游戏'

> ID：12489705
> 
> 赞同：-4
> 
> 时间：2012-09-19T06:44:18.683
> 
> 标签：javascript

尝试使用 javascript 制作一个游戏/脚本：
- 0-20 之间的每个数字都等于一个特定的单词。例如：0=锯，1=领带，2=诺亚。
- 屏幕上会弹出一个数字，用户需要输入那个=那个数字的词。
- 然后程序会说我是否正确并增加我的观点。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-19T06:55:31.960

**演示：http:** [//jsfiddle.net/elclanrs/gfQsP/](http://jsfiddle.net/elclanrs/gfQsP/)

```
var points = 0;
function game() {
    var words = 'lorem ipsum dolor sit amet consecteur adipisci elit'.split(' ');
    var rand = -~(Math.random() * words.length);
    var result = prompt('Word number '+ rand +'?');
    var match = words[rand-1] === result.toLowerCase();
    alert( match ? 'Good' : 'Bad');
    match && points++;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-19T06:49:41.850

这很容易：

只需创建一个包含键值对的对象，如下所示：

```
var obj = {
key1: value1,
key2: value2
}; 
```

然后询问玩家特定数字的值。循环遍历此对象以扫描该特定数字的值以匹配玩家输入的值。如果找到增加积分计数器。

它非常简单。

# git - 测试 git 直系后代

> ID：12489706
> 
> 赞同：2
> 
> 时间：2012-09-19T06:44:29.090
> 
> 标签：git, merge, push, descendant

任何人都知道如何测试本地分支 mybranch-working 是否是 origin/staging 分支的直接后代。换句话说，我想测试自从我上次从 origin/staging 合并到 mybranch-working 以来，其他开发人员是否已将更改合并到 origin/staging 中。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-19T08:52:40.463

您可以使用“双点”语法：

```
git log mybranch-working..origin/staging 
```

这向您显示了所有提交`origin/staging`但不在`mybranch-working`.

该命令是以下命令的简写：

```
git log ^mybranch-working origin/staging 
```

事实上，您可以指定两个以上的引用。一种替代方法`^`是`--not`：

```
git log master ^topicA --not topicB 
```

# html - 我看不到 chrome 中的图像。在Firefox中，它们工作正常

> ID：12489707
> 
> 赞同：1
> 
> 时间：2012-09-19T06:44:29.917
> 
> 标签：html, google-chrome

我在使用 chrome 时遇到了严重问题，我有一些通过 wp-adrotate 插件运行的广告。这些图像在 Firefox 中显示良好，但在 chrome 中显示为 0x0。我做错什么了？我应该在 html 中包含 chrome 不喜欢的任何内容？

# 1，fierfox截图，#2，chrome。注意横幅是如何消失的！

![在此处输入图像描述](../Images/44eaedcb825dbf6eaa05bd4982a0b00f.png)

![在此处输入图像描述](../Images/ab18309722913685dc1285164aafa925.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-19T16:11:38.640

可能是您在 chrome 中安装了 adblocker，它会从页面中删除此插件，因此请将其关闭。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-19T07:16:49.233

尝试从浏览器中删除缓存，然后重试。

# android - 我可以发送“收到短信的意图”吗？

> ID：12489716
> 
> 赞同：5
> 
> 时间：2012-09-19T06:45:03.973
> 
> 标签：android, sms

标题很明显。我可以在安卓手机上发送“短信接收意图”吗？换句话说，虚拟接收自定义 SMS 以伪造某些 SMS 接收器。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-19T06:53:23.923

您可以创建假短信（GMS 类型），以便像真实消息一样内置捕捉。这是[我的答案](https://stackoverflow.com/a/12338541/1050058)

```
 Intent intent = new Intent();
intent.setClassName("com.android.mms",
        "com.android.mms.transaction.SmsReceiverService");
intent.setAction("android.provider.Telephony.SMS_RECEIVED");
intent.putExtra("pdus", new Object[] { pdu });
intent.putExtra("format", "3gpp");
context.startService(intent); 
```

# android - 如何以编程方式备份 SD 卡中的 sqlite 文件？

> ID：12489718
> 
> 赞同：6
> 
> 时间：2012-09-19T06:45:11.643
> 
> 标签：android, database, sqlite, store, sd-card

当您使用模拟器时，您的 sqlite 文件存储在主应用程序文件夹附近的文件夹中，您可以下载它。但是在没有 root 权限的设备中无法访问此功能。如何**以编程方式将现有的 sqlite 文件备份到 SD 卡中**？

我想在我的应用程序中有一个按钮，将此文件存储在我的 SD 卡中的特殊路径中。是否可以？

谢谢，

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-09-19T07:09:54.630

你可以试试这个，为我工作，记得在你的清单中获得 WRITE_EXTERNAL_STORAGE 权限：

```
// Copy to sdcard for debug use
    public static void copyDatabase(Context c, String DATABASE_NAME) {
        String databasePath = c.getDatabasePath(DATABASE_NAME).getPath();
        File f = new File(databasePath);
        OutputStream myOutput = null;
        InputStream myInput = null;
        Log.d("testing", " testing db path " + databasePath);
        Log.d("testing", " testing db exist " + f.exists());

        if (f.exists()) {
            try {

                File directory = new File("/mnt/sdcard/DB_DEBUG");
                if (!directory.exists())
                    directory.mkdir();

                myOutput = new FileOutputStream(directory.getAbsolutePath()
                        + "/" + DATABASE_NAME);
                myInput = new FileInputStream(databasePath);

                byte[] buffer = new byte[1024];
                int length;
                while ((length = myInput.read(buffer)) > 0) {
                    myOutput.write(buffer, 0, length);
                }

                myOutput.flush();
            } catch (Exception e) {
            } finally {
                try {
                    if (myOutput != null) {
                        myOutput.close();
                        myOutput = null;
                    }
                    if (myInput != null) {
                        myInput.close();
                        myInput = null;
                    }
                } catch (Exception e) {
                }
            }
        }
    } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-19T06:48:07.213

您可以尝试以下代码，

```
String path = Environment.getExternalStorageDirectory().toString() + "/path";
File folder = new File( path );
if (!folder.exists()) 
{
     folder.mkdirs();
}

File dbfile = new File( path + "/database.db" ); 
if ( !dbfile.exists() )
{
    dbFile.createFile();
}
SQLiteDatabase db = SQLiteDatabase.openOrCreateDatabase(dbfile, null); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-19T08:02:35.110

你可以试试这个来复制一个文件：

```
public void copyFile(File in, File out) {
        String DialogTitel = getString(R.string.daten_wait_titel);
        String DialogText = getString(R.string.kopiervorgang_laeuft);
        try {
            // Dialogdefinition Prograssbar
            final ProgressDialog dialog = new ProgressDialog(this) {
                @Override
                public boolean onSearchRequested() {
                    return false;
                }
            };
            dialog.setCancelable(false);
            dialog.setTitle(DialogTitel);
            dialog.setIcon(R.drawable.icon);
            dialog.setMessage(DialogText);
            dialog.show();
            new Thread(new MyCopyThread(in, out)) {
                @Override
                public void run() {
                    try {
                        FileChannel inChannel = new FileInputStream(
                                MyCopyThread.in).getChannel();
                        FileChannel outChannel = new FileOutputStream(
                                MyCopyThread.out).getChannel();
                        try {
                            System.out.println("KOPIEREN");
                            inChannel.transferTo(0, inChannel.size(),
                                    outChannel);
                            if (inChannel != null)
                                inChannel.close();
                            if (outChannel != null)
                                outChannel.close();
                            setCopyError(false);
                        } catch (IOException e) {
                            setCopyError(true);
                            // throw e;
                        } finally {
                            if (inChannel != null)
                                inChannel.close();
                            if (outChannel != null)
                                outChannel.close();
                        }
                        dialog.dismiss();
                        // Abschlussarbeiten
                        if (useExternalSD == true) {
                            // Externe DB
                            moveDBtoExternFinish();
                        } else {
                            // Interne DB
                            moveDBtoInternFinish();
                        }
                        moveDBFinishHandler.sendMessage(moveDBFinishHandler
                                .obtainMessage());
                    } catch (Exception ex) {

                    }
                }
            }.start();
        } catch (Exception exx) {

        }

    } 
```

这是获取内部数据库文件名的代码：

```
File interneDB = getApplicationContext().getDatabasePath(MY_DB_NAME); 
```

将 MY_DB_NAME 替换为您的数据库名称

# c++ - g++ 预处理器输出

> ID：12489719
> 
> 赞同：13
> 
> 时间：2012-09-19T06:45:20.083
> 
> 标签：c++, g++, c-preprocessor

我只想获得预处理版本的`file.cc`. 我做到`g++ -E file.cc`了，得到：

```
# 1 "file.cc"
# 1 "<command-line>"
# 1 "file.cc" 
```

我做错了什么？

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-09-19T07:17:12.397

假设您的源文件包含一个简单的 main 函数：

```
$ cat file.cc
int main() {
    return 0;
} 
```

然后，使用您显示的命令，输出如下所示：

```
$ g++ -E file.cc
# 1 "file.cc"
# 1 "<built-in>"
# 1 "<command-line>"
# 1 "file.cc"

int main() {
    return 0;
} 
```

问题中显示的输出在`file.cc`为空时发生。请注意，“空”意味着文件仍然可以包含注释，或者`#ifdef`条件评估为假的块 - 由于预处理器将它们过滤掉，它们也不会出现在输出中。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-09-19T07:20:50.560

如果您不想要线标记，请使用 -P 选项：

```
-P
    Inhibit generation of linemarkers in the output from the preprocessor. This might
    be useful when running the preprocessor on something that is not C code, and will
    be sent to a program which might be confused by the linemarkers. 
```

# amazon-web-services - AWS 上的 Boto 和 Python

> ID：12489720
> 
> 赞同：2
> 
> 时间：2012-09-19T06:45:24.190
> 
> 标签：amazon-web-services, boto

我正在尝试让 boto 工作，但出现错误。

通过安装 boto`easy_install`或简单地`python ./setup.py install`

```
cat boto.py
#!/usr/bin/python
import boto
conn = boto.connect_ec2()

3c075474c10b% ./boto.py 
Traceback (most recent call last):
  File "./boto.py", line 2, in <module>
    import boto
  File "/Users/vasiliyb/scripts/boto.py", line 3, in <module>
    conn = boto.connect_ec2()
AttributeError: 'module' object has no attribute 'connect_ec2' 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-09-19T11:48:37.843

只需将模块的名称从“boto.py”更改为“myboto.py”（或任何你喜欢的），它就会神奇地工作。

您基本上是通过命名您的模块 boto.py 来重新定义“boto”。

# javascript - 检查无线电时给出输入值并禁用输入

> ID：12489722
> 
> 赞同：0
> 
> 时间：2012-09-19T06:45:31.573
> 
> 标签：javascript, input

检查时我使用此脚本禁用输入字段：

```
 <input type="text" id="textBox">
<input type="checkbox" id="checkBox" onclick="enableDisable(this.checked, 'textBox')">
<script language="javascript">
function enableDisable(bEnable, textBoxID)
{
     document.getElementById(textBoxID).disabled = bEnable
} 
```

我还想在选中单选按钮时给输入字段一个值

有人可以指出我正确的方向吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-19T06:51:28.277

“想要在选中单选按钮时给输入字段一个值”意味着 1）您不想禁用文本框，或者 2）在选择复选框时，您想给文本框一些特定的值？

对于（1）不要在'onClick'上使用任何功能对于（2）使用以下代码..

```
function enableDisable(bEnable, textBoxID)
{
     document.getElementById(textBoxID).disabled = bEnable;
     if(bEnable){
        document.getElementById(textBoxID).value="checked";
     }
} 
```

# python - Python：重载 __getattr__ 和属性，使 __setattr__ 正常工作

> ID：12489723
> 
> 赞同：3
> 
> 时间：2012-09-19T06:46:03.530
> 
> 标签：python, properties

考虑以下python代码：

```
class Foo(object):

    def __init__(self, value):
        self._value = value

    @property
    def value(self):
        return "value: {v}".format(v=self._value)

    @value.setter
    def value(self, value):
        self._value = value

class Bar(object):

    def __init__(self):
        self.foo = Foo('foo')

    def __getattr__(self, attr, *args, **kwargs):
        """
        Intercepts attribute calls, and if we don't have it, look at the
        webelement to see if it has the attribute.
        """

        # Check first to see if it looks like a method, if not then just return
        # the attribute the way it is.
        # Note: this has only been tested with variables, and methods.
        if not hasattr(getattr(self.foo, attr), '__call__'):
            return getattr(self.foo, attr)

        def callable(*args, **kwargs):
            '''
            Returns the method from the webelement module if found
            '''
            return getattr(self.foo, attr)(*args, **kwargs)
        return callable

>>> b = Bar()
>>> b.foo
<__main__.Foo object at 0x819410>
>>> b.foo.value
'value: foo'
>>> b.foo.value = '2'
>>> b.foo.value
'value: 2'
>>> b.value
'value: 2'
>>> b.value = '3'
>>> b.value
'3' 
```

最后一部分，我希望它是“值：3”而不是“3”，因为现在我的属性“值”现在是一个属性。

有可能吗，如果是这样，我会怎么做。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-19T06:51:18.713

您`__getattr__`返回属性*值*，而不是属性本身。当您访问`getattr(self.foo, attr)`它时，它相当于`self.foo.value`并返回它，并且当时调用该属性。

因此，您还需要实现一个`__setattr__`方法，以镜像`__getattr__`并将值设置传递给包含的`foo`对象。

在底层，Python 将属性实现为[描述符](http://docs.python.org/reference/datamodel.html#implementing-descriptors)；他们的[`__get__()`方法](http://docs.python.org/reference/datamodel.html#object.__get__)被较低级别的[`__getattribute__`方法](http://docs.python.org/reference/datamodel.html#more-attribute-access-for-new-style-classes)调用，这导致他们返回他们的计算值。返回的永远不是属性对象本身。

这是一个例子`__setattr__`：

```
def __setattr__(self, attr, value):
    if hasattr(self, 'foo') and hasattr(self.foo, attr):
        setattr(self.foo, attr, value)
        return
    super(Bar, self).__setattr__(attr, value) 
```

注意：因为你的`__init__`设置`self.foo`，你需要测试`foo`你的类是否存在（`hasattr(self, 'foo')`。你还需要调用原始`__setattr__`实现以确保像这样的东西`self.foo = Foo()`仍然有效。

# jquery - 双重记录 $this

> ID：12489730
> 
> 赞同：1
> 
> 时间：2012-09-19T06:46:38.833
> 
> 标签：jquery

我正在尝试设置一个表单，用户可以从城市列表中选择而不是输入它。我的问题是第一个选择很好，但是，在第二个选择中，如果我：

*单击相同的输入*- 选择已记录 += 1，因此在第二次调出“出发”城市时，它会记录两次；第 3 次、3 次等。
*单击另一个输入*- 选择记录了很多次，并将数据输入到两个输入中。

我很确定这是一个“这个”问题，所以我已经在控制台中记录了这个问题以便更好地查看它。我知道我可以轻松地制作 2 个单独的列表并分别引用每个列表，但我想为什么要重复相同的列表两次。我也不确定标记在语义上是否正确（或者只写一次这个列表在语义上是否正确）。谢谢你。

[http://jsfiddle.net/GDRFt/](http://jsfiddle.net/GDRFt/)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-19T07:01:43.277

$this 变量的范围似乎有问题，如果将它定义为全局变量，它应该可以工作：

```
var $this;           
$('.citylist').hide();

$('.depcity, .retcity').on('click', function () {
    $this = $(this);
    $('.citylist').show().on('click', 'li', function () {
        console.log($this);
        $this.val($(this).html());
    });
}).blur( function () {
    $('.citylist').fadeOut();

}); 
```

但是我必须说你的方法对我来说似乎很奇怪。使用两个独立的选择元素不是更好吗？如果在项目生命后期城市列表出现分歧怎么办？

# c# - 将黑白图像转换为二维对象

> ID：12489733
> 
> 赞同：1
> 
> 时间：2012-09-19T06:46:44.123
> 
> 标签：c#, autocad

您好，我需要读取 2d 黑白图像并将其转换为 AutoCAD 可以准备的 2d 对象，因此我认为文件格式必须是 DFX。我不太确定该怎么做，它将用于一台机器，在那里页岩从有机玻璃板上切割出一个形状，白色什么都没有，黑色是有机玻璃。我真的不知道如何解决这个问题，读取图像文件并确定它是黑色还是白色很容易！但问题是如何处理这些数据？据我了解，DFX 文件格式可以成行工作吗？任何信息或建议将不胜感激！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-19T06:52:39.297

[Autodesk 提供了 DXF 文件格式的参考](http://www.autodesk.com/techpubs/autocad/acad2000/dxf/dxf_format.htm)。看起来它确实是 Autocad(R) 绘图内容的逐行表示。

还有其他变体，例如“二进制 DXF”（Google 搜索“DXF 文件格式”会产生更多链接）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-19T07:01:38.687

AutoCAD 使用矢量图像。你应该看看位图到矢量的转换。

您可以使用跟踪进行转换。[Potrace](http://potrace.sourceforge.net/)是一个开源的位图到矢量跟踪器库。Potrace 目前可以产生以下输出格式： DXF

然而，位图追踪是不完善的；对于高质量的矢量图像，线跟踪器通常只用于初始跟踪，稍后会进行手动调整。[Inkscape](http://inkscape.org/)是一个开源矢量图像编辑器，提供了对跟踪的内置支持（内部使用 potrace）。

# java - Java：文件未正确压缩（具有文件权限）

> ID：12489734
> 
> 赞同：1
> 
> 时间：2012-09-19T06:46:55.190
> 
> 标签：java, zip

我已经使用 java 制作了 zip 文件。因此，我遇到了一个小问题。执行文件（*.sh 和二进制文件）被压缩不正确与他的文件权限。请为 make zip 找到以下代码

```
 public static void makeZip(String compressDirPath, String zipName, String outputLoc) 
    throws java.io.IOException
    {
        if(outputLoc.equals("") || outputLoc == null)  outputLoc = ".";
        File compressDir = new File(compressDirPath);
        ZipOutputStream zos = new ZipOutputStream(new FileOutputStream(outputLoc+"/"+zipName));
        compress(compressDir, compressDir, zos);
        zos.close();
      }

  private static void compress(File compressDir, File base, ZipOutputStream zos) throws java.io.IOException
  {
    File[] files = compressDir.listFiles();
    byte[] buffer = new byte[18024];
    int read = 0;
    for (int i = 0, n = files.length; i < n; i++) {
      if (files[i].isDirectory()) {
        compress(files[i], base, zos);
      } else {
        FileInputStream in = new FileInputStream(files[i]);
        ZipEntry entry = new ZipEntry(files[i].getPath().substring(base.getPath().length() + 1));
        zos.putNextEntry(entry);
        while (-1 != (read = in.read(buffer))) { zos.write(buffer, 0, read); }
        in.close();
      }
    }
  } 
```

当我解压缩压缩文件时，执行由普通文件创建的文件。我怎么解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-19T07:12:03.990

据我所知，文件权限不存储在`zip`档案中。您可以改用`tar`存档。请参阅[JTar](http://code.google.com/p/jtar/ "焦油")或 org.apache.tools.tar。

# python - python3上的MySQLdb：没有名为release的模块

> ID：12489737
> 
> 赞同：1
> 
> 时间：2012-09-19T06:47:20.003
> 
> 标签：python, python-3.x, mysql-python

当我尝试使用 python 代码连接到数据库时，它显示以下错误：

```
 TTraceback (most recent call last):
  File "C:\Users\Ponmani\Desktop\test.cgi", line 5, in <module>
    import MySQLdb
  File "C:\Python27\lib\site-packages\MySQLdb\__init__.py", line 19, in <module>
    import _mysql
ImportError: DLL load failed: %1 is not a valid Win32 application. 
```

任何人都可以帮我解决这个问题。在此先感谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-19T07:06:00.727

MySQLdb 在 PyPi 上没有被列为 Python 3 模块，它是从哪里来的？不幸的是，您不能只是将模块从 Python 2 复制到 3 并期望它们第一次工作。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-19T07:04:59.623

根据[PyPi](http://pypi.python.org/pypi/MySQL-python)以及[MySQLdb 网站的](http://sourceforge.net/projects/mysql-python/)说法，MySQLdb 不支持 Python 3。不知道你是如何安装它的，但它不会工作。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-04-29T09:29:53.240

[https://www.pythonanywhere.com/wiki/UsingMySQL](https://www.pythonanywhere.com/wiki/UsingMySQL)

```
pip install --user https://dev.mysql.com/get/Downloads/Connector-Python/mysql-connector-python-1.1.6.tar.gz 
```

然后，更新您的 settings.py 以使用 oracle django 后端“mysql.connector.django”：

```
DATABASES = {
    'default': {
        'ENGINE': 'mysql.connector.django',
         ... 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-11-01T03:43:04.203

检查你的mysqldb模块的版本，MySQL-python-1.2.3.win32-py2.7.exe和MySQL-python-1.2.4.win32-py2.7.exe，你只需要一个，试2次

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-06-17T20:11:30.523

这不是最优雅的方法，但它会解决你最初的问题：而不是`from release import...`写`from .release import...`（注意“发布”之前的点）。

# node.js - 在 node.js 和 express3.x 中使用dustjs-linkedin 模板

> ID：12489739
> 
> 赞同：1
> 
> 时间：2012-09-19T06:47:28.740
> 
> 标签：node.js, express, dust.js

我不知道如何将dustjs-linkedin 模板用于express 3.x

```
 #app.js
  var dust = require('dustjs-linkedin');

  app.set('view engine', 'dust');

  app.get('/test1', routes.test1);

#./routes/test.js
exports.test1 = function(req, res){
  res.locals.session = req.session;
  res.render('test1', { title: 'Test 1' } );
};

#./views/test1.dust
{+base.dust/}
{<main}
  Child Content
{/main}

#./views/base.dust
    {+main}
      Base Content
    {/main} 
```

转到 /test1 时出现以下错误

500 错误：找不到模块“灰尘”

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-24T19:33:39.490

我和你有同样的问题。[为了方便使用dustjs-linkedin 和express 3.xi 将小库klei-dust](https://github.com/klei-dev/dust)放在一起。该库易于设置，您可以设置视图的根文件夹，这适用于基本模板和部分。

因此，如果您在`views/`with`home.dust`和`base.dust`templates 有一个 views 文件夹，则`home.dust`可以如下所示：

```
{>base/}
{<main}
Hello world
{/main} 
```

所以没有必要写`views/base.dust`它来工作。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-23T21:04:27.303

我已经设法获得了带有合并模块的dustjs-linkedin 的工作版本。

[https://github.com/chovy/express-template-demo](https://github.com/chovy/express-template-demo)

仅供参考，布局必须双引号......这对我来说是一个主要问题，它相对于 app.js 文件，它需要一个尾随 /

```
{+"views/base.dust"/}
<p>Page content here</p> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-19T15:16:32.010

我将向您解释如何将 express 3.x 与dustjs-linkedin 一起使用。

1) express 有 2 个配置要设置。“查看引擎”和 app.engine

“查看引擎”只是设置默认值，而 app.engine 只是映射用于给定文件扩展名的引擎。

所以你应该做这样的事情：

```
 app.set('view engine', 'dustjs-linkedin');
   app.set('views', __dirname + '/views');
   app.engine('dust', dust.compileFromPath); 
```

唯一的问题是 compileFromPath 方法在灰尘中不存在：p。

您应该使用 Express 期望的签名在灰尘对象中添加一个方法：（路径，选项，回调）

您可以在此处阅读有关此内容的更多信息：http: [//expressjs.com/api.html#app.engine](http://expressjs.com/api.html#app.engine)。

另一种选择是使用 consolidate (http://spalatnik.com/blog/?p=54)，但不幸的是，Consolidate 不支持dustjs-linkedin 版本，它只支持旧的dust 版本。

# .net - 如何使用 HttpWebRequest 和 IISExpress 发送客户端证书以进行调试

> ID：12489745
> 
> 赞同：5
> 
> 时间：2012-09-19T06:47:53.103
> 
> 标签：.net, httpwebrequest, iis-express, client-certificates

我有一些用于从页面请求中提取客户端证书的代码。这是“MyPage.aspx”中的代码。

```
string someparam = this.Request.Params["someparam"];
if (!String.IsNullOrWhiteSpace(someparam) && this.Page.Request.ClientCertificate.IsPresent)
{
    try
    {
        X509Certificate2 x509Cert2 = new X509Certificate2(this.Page.Request.ClientCertificate.Certificate);
        //
        // Code for verifying the x509Cert2
        //
    }
    catch (Exception) { }
} 
```

现在我想在本地环境中测试 Visual Studio 中的代码。为此，我安装了 IISExpress 以通过 https 获得可信通信。到目前为止，一切都很好。问题是我发送客户端证书的测试代码似乎不起作用。`ClientCertificate.IsPresent = false`在服务器上。

下面是测试代码。证书是一个 .pfx 文件。

```
var request = (HttpWebRequest)WebRequest.Create("https://localhost:44300/MyPage.aspx?someparam=222");
request.Method = "POST";

X509Store store = new X509Store(StoreName.TrustedPeople, StoreLocation.LocalMachine);
store.Open(OpenFlags.ReadOnly);
X509Certificate2Collection col = store.Certificates.Find(X509FindType.FindBySerialNumber, "XXXTHESERIALNUMBERXXX", true);
certFromStore = col[0];
store.Close();
request.ClientCertificates.Add(certFromStore);

HttpWebResponse reqWebResponse = (HttpWebResponse)request.GetResponse();
StreamReader reqResponseStream = new StreamReader(reqWebResponse.GetResponseStream(), Encoding.UTF8);

String resultHtml = reqResponseStream.ReadToEnd();

reqWebResponse.Close();
reqResponseStream.Close(); 
```

运行测试代码时我没有收到任何错误。证书从商店正确加载并成功添加到 request.ClientCertificates 集合。但在 MyPage.aspx 中，无法从页面请求中提取任何证书。

有人知道我缺少什么吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-21T03:44:32.927

您需要在 IIS Express 实例的配置文件中指定参数，位于
`C:\Users\[username]\Documents\IISExpress\config\applicationhost.config`

您应该寻找安全元素。

该元素控制 IIS 服务器是否接受客户端证书。将属性 enabled 设置为 true 执行以下操作：

`iisClientCertificateMappingAuthentication enabled="true"`

access 元素控制如何处理访问。sslFlags 属性控制如何处理客户端证书。出于某种原因，我让 IIS 实际将证书传递给请求的唯一方法是将 sslFlags 设置为值 SslNegotiateCert 为：

`access sslFlags="SslNegotiateCert"`

# c# - 如何使用 EF 在 ASP.NET C# 中的实体上达到关系的关系？

> ID：12489747
> 
> 赞同：1
> 
> 时间：2012-09-19T06:47:57.713
> 
> 标签：c#, asp.net, entity-framework-4

我正在为一个项目开发 EF。最近，感谢 Slauma 和 Mark Oreta，我解决了我无法达到对象关系和报错`The ObjectContext instance has been disposed and can no longer be used for operations that require a connection.`的问题。[详细的帖子在这里](https://stackoverflow.com/questions/12404829/asp-net-c-sharp-ef-how-to-benefit-the-full-object-after-selecting-it/12405061#12405061)。

我有一个非常相似的问题，无法通过 INCLUDE 解决。我想达到关系与 PRODUCT 实体的关系。我不知道这是否可能，但是当我调试和 INSIDE 时我可以达到它`using (var Context = base.Entities)`。但是在这个街区之外呢？这是代码。

```
using (var Context = base.Entities)
{
                return Context.Product
                                    .Include("Product_Attribute")
                                    .Include("Product_AttributeType")
                                    .Include("Product_AttributeType_Title")
                                    .Include("Product_AttributeValueUnit")
} 
```

我可以到达外面的**Product_Attribute**实体，但是当我尝试获取*Product_Attribute的其他实体时***，** 我得到了

 *> 指定的包含路径无效。EntityType 'NoxonModel.Product' 未声明名为 'Product_AttributeType' 的导航属性

事实上，这个错误是有道理的。如何解决它并在块之外获取 PRODUCT 实体并且仍然能够访问其他相关表？

这是数据库，非常感谢您：

![在此处输入图像描述](../Images/c5d2cbfb4d407526ea89c60fb7e351b1.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-19T07:06:02.607

您可以通过提供以 . 分隔的导航属性名称来预先加载导航属性`.`。

```
using (var Context = base.Entities)
{
      return Context.Product
          .Include("Product_Attribute")
          .Include("Product_Attribute.Product_AttributeType")
          .Include("Product_Attribute.Product_AttributeType.Product_AttributeType_Title")
          .Include("Product_Attribute.Product_AttributeType.Product_AttributeValueUnit")
} 
```*

# .net - 从 VS2010 升级到 VS2012 后，Linq to EF Join 抛出“索引超出范围”

> ID：12489749
> 
> 赞同：12
> 
> 时间：2012-09-19T06:48:05.813
> 
> 标签：.net, linq, entity-framework, exception, visual-studio-2012

从 Visual Studio 2010 升级到 2012 后，代码开始在使用联接的 Linq 查询上抛出“ArgumentOutOfRangeException - 索引超出范围。必须为非负数且小于集合的大小。参数名称：索引”。

以下在 LINQPad 中制作的简单示例（使用 EF 数据模型）给了我 ArgumentOutOfRangeException：

```
void Main()
{
    var iq1 = Customers.Select(ap => ap.ID);
    var iq2 = iq1.Join(Customers.Select(ap => ap.ID),
                    a => a,
                    b => b,
                    (a, b) => new { a });

    iq2.Dump(); 
} 
```

将前面的示例更改为返回一个包含连接两边的匿名对象不会给出 ArgumentOutOfRangeException 并给出预期的结果：

```
void Main()
{
    var iq1 = ActionPlans.Select(ap => ap.ID);
    var iq2 = iq1.Join(ActionPlans.Select(ap => ap.ID),
                    a => a,
                    b => b,
                    (a, b) => new { a, b });

    iq2.Dump(); 
} 
```

好的，所以由于某种原因，我不得不返回连接的两边，但后来我尝试使用虚拟值代替以下示例，该示例也没有问题地执行：

```
void Main()
{
    var iq1 = ActionPlans.Select(ap => ap.ID);
    var iq2 = iq1.Join(ActionPlans.Select(ap => ap.ID),
                    a => a,
                    b => b,
                    (a, b) => new { a, x = 1 });

    iq2.Dump(); 
} 
```

以第一个示例为例，将 ToList() 添加到第一个查询也使其执行没有问题：

```
void Main()
{
    var iq1 = ActionPlans.Select(ap => ap.ID).ToList();
    var iq2 = iq1.Join(ActionPlans.Select(ap => ap.ID),
                    a => a,
                    b => b,
                    (a, b) => new { a });

    iq2.Dump(); 
} 
```

**重要提示：**在没有升级 Visual Studio 2012 的工作站上尝试第一个查询可以正常工作！

谁能确认/解释这个新的“功能”？:-)

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-05T20:20:34.773

Erwin, just to close the loop on this: We have confirmed that it is a bug we introduced recently in LINQ to Entities and we are looking at ways to get a fix out. Thanks a lot for reporting it!

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-09-24T06:07:53.933

在进行了更多调查之后，我得出的结论是，问题是我从 Linq 查询返回的匿名类，我认为不再允许返回只有一个字段的匿名类，我知道不需要将字段包装在匿名类中，但是......正如我所说，这在升级之前有效。

以下示例给了我“ArgumentOutOfRangeException - 索引超出范围”：

```
void Main()
{
    var iq1 = ActionPlans.Select(ap => ap.ID).ToList();
    var iq2 = iq1.Join(ActionPlans.Select(ap => ap.ID),
                    a => a,
                    b => b,
                    (a, b) => new { a });

    iq2.Dump();
} 
```

下一个示例按预期工作：

```
void Main()
{
    var iq1 = ActionPlans.Select(ap => ap.ID).ToList();
    var iq2 = iq1.Join(ActionPlans.Select(ap => ap.ID),
                    a => a,
                    b => b,
                    (a, b) => a );

    iq2.Dump();
} 
```

# ruby - 安装 Chiliprojet+redmine_git_hosting 时出错

> ID：12489761
> 
> 赞同：0
> 
> 时间：2012-09-19T06:48:48.457
> 
> 标签：ruby, ruby-on-rails-3, redmine, chiliproject

我尝试安装[redmine_git_hosting 插件](https://github.com/ericpaulbishop/redmine_git_hosting)并按照 Eric Paul Bishop 的指示进行操作。

在第 (7) 步之前，一切对我来说都很好

`rake db:migrate_plugins RAILS_ENV=production`抛出错误：

```
rake aborted!
/var/lib/gems/1.8/gems/bundler-1.2.0/lib/bundler/dsl.rb:82:in `gem': You cannot specify the same gem twice with different version requirements. You specified: inifile (~> 0.4.1) and inifile (>= 0)
/var/www/chiliproject/Gemfile:110:in `eval_gemfile'
(eval):21:in `eval_gemfile'
/var/lib/gems/1.8/gems/bundler-1.2.0/lib/bundler/dsl.rb:153:in `group'
(eval):19:in `eval_gemfile'
/var/www/chiliproject/Gemfile:108:in `glob'
/var/www/chiliproject/Gemfile:108:in `eval_gemfile'
/var/www/chiliproject/Gemfile:107:in `each'
/var/www/chiliproject/Gemfile:107:in `eval_gemfile'
/var/lib/gems/1.8/gems/bundler-1.2.0/lib/bundler/dsl.rb:7:in `evaluate'
/var/lib/gems/1.8/gems/bundler-1.2.0/lib/bundler/definition.rb:18:in `build'
/var/lib/gems/1.8/gems/bundler-1.2.0/lib/bundler.rb:144:in `definition'
/var/lib/gems/1.8/gems/bundler-1.2.0/lib/bundler.rb:112:in `setup'
/var/www/chiliproject/config/../config/preinitializer.rb:30
/var/www/chiliproject/config/boot.rb:42:in `load'
/var/www/chiliproject/config/boot.rb:42:in `preinitialize'
/var/www/chiliproject/config/boot.rb:24:in `boot!'
/var/www/chiliproject/config/boot.rb:137
/usr/lib/ruby/1.8/rubygems/custom_require.rb:31:in `gem_original_require'
/usr/lib/ruby/1.8/rubygems/custom_require.rb:31:in `require'
/var/www/chiliproject/Rakefile:4
/var/lib/gems/1.8/gems/rake-0.9.2.2/lib/rake/rake_module.rb:25:in `load'
/var/lib/gems/1.8/gems/rake-0.9.2.2/lib/rake/rake_module.rb:25:in `load_rakefile'
/var/lib/gems/1.8/gems/rake-0.9.2.2/lib/rake/application.rb:501:in `raw_load_rakefile'
/var/lib/gems/1.8/gems/rake-0.9.2.2/lib/rake/application.rb:82:in `load_rakefile'
/var/lib/gems/1.8/gems/rake-0.9.2.2/lib/rake/application.rb:133:in `standard_exception_handling'
/var/lib/gems/1.8/gems/rake-0.9.2.2/lib/rake/application.rb:81:in `load_rakefile'
/var/lib/gems/1.8/gems/rake-0.9.2.2/lib/rake/application.rb:65:in `run'
/var/lib/gems/1.8/gems/rake-0.9.2.2/lib/rake/application.rb:133:in `standard_exception_handling'
/var/lib/gems/1.8/gems/rake-0.9.2.2/lib/rake/application.rb:63:in `run'
/var/lib/gems/1.8/gems/rake-0.9.2.2/bin/rake:33
/opt/ruby-enterprise-1.8.7-2012.02/bin/rake:19:in `load'
/opt/ruby-enterprise-1.8.7-2012.02/bin/rake:19
</code> 
```

所以我打开文件 chiliproject/vendor/plugins/redmine_git_hosting/Gemfile 并更改`gem "inifile", "~>0.4.1"`为`gem "inifile", ">=0"` 您可以认为这也给了我错误...

```
rake aborted!
Bundler couldn't find some gems. Did you run `bundle install`?
/var/www/chiliproject/config/../config/preinitializer.rb:32
/var/www/chiliproject/config/boot.rb:42:in `load'
/var/www/chiliproject/config/boot.rb:42:in `preinitialize'
/var/www/chiliproject/config/boot.rb:24:in `boot!'
/var/www/chiliproject/config/boot.rb:137
/usr/lib/ruby/1.8/rubygems/custom_require.rb:31:in `gem_original_require'
/usr/lib/ruby/1.8/rubygems/custom_require.rb:31:in `require'
/var/www/chiliproject/Rakefile:4
/var/lib/gems/1.8/gems/rake-0.9.2.2/lib/rake/rake_module.rb:25:in `load'
/var/lib/gems/1.8/gems/rake-0.9.2.2/lib/rake/rake_module.rb:25:in `load_rakefile'
/var/lib/gems/1.8/gems/rake-0.9.2.2/lib/rake/application.rb:501:in `raw_load_rakefile'
/var/lib/gems/1.8/gems/rake-0.9.2.2/lib/rake/application.rb:82:in `load_rakefile'
/var/lib/gems/1.8/gems/rake-0.9.2.2/lib/rake/application.rb:133:in `standard_exception_handling'
/var/lib/gems/1.8/gems/rake-0.9.2.2/lib/rake/application.rb:81:in `load_rakefile'
/var/lib/gems/1.8/gems/rake-0.9.2.2/lib/rake/application.rb:65:in `run'
/var/lib/gems/1.8/gems/rake-0.9.2.2/lib/rake/application.rb:133:in `standard_exception_handling'
/var/lib/gems/1.8/gems/rake-0.9.2.2/lib/rake/application.rb:63:in `run'
/var/lib/gems/1.8/gems/rake-0.9.2.2/bin/rake:33
/opt/ruby-enterprise-1.8.7-2012.02/bin/rake:19:in `load'
/opt/ruby-enterprise-1.8.7-2012.02/bin/rake:19 
```

*   辣椒项目：3.1.0
*   积压：v0.9.26
*   redmine_git_hosting：v0.4.2

那么我能做什么呢？

# sql-server - 如何删除sql server中的外键约束？

> ID：12489762
> 
> 赞同：75
> 
> 时间：2012-09-19T06:48:48.603
> 
> 标签：sql-server, database, foreign-keys

我想从另一个表中删除外键，以便我可以插入我选择的值。

我是数据库新手，所以请告诉我正确的 sql 查询以删除或删除外键值。

* * *

## 回答 #1

> 赞同：158
> 
> 时间：2012-09-19T06:52:57.980

尝试关注

```
ALTER TABLE <TABLE_NAME> DROP CONSTRAINT <FOREIGN_KEY_NAME> 
```

参考：[http ://www.w3schools.com/sql/sql_foreignkey.asp](http://www.w3schools.com/sql/sql_foreignkey.asp)

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2012-09-19T06:51:05.140

[在引用完整性](http://en.wikipedia.org/wiki/Referential_integrity)方面这样做是错误的，因为一旦它被破坏，就不容易再次打开它，而不必检查记录并删除那些破坏约束的记录。

无论如何，语法如下：

```
ALTER TABLE Tablename DROP CONSTRAINT ContName; 
```

见 MSDN：

*   [删除主键](http://msdn.microsoft.com/en-us/library/ms190621.aspx)
*   [删除外键关系](http://msdn.microsoft.com/en-us/library/ms189579.aspx)

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-09-19T06:52:30.443

```
ALTER TABLE [TableName] DROP CONSTRAINT [CONSTRAINT_NAME] 
```

但是，要小心，一旦你这样做了，你可能永远不会有机会回来，你应该阅读一些基本的数据库书籍，看看为什么我们需要外键

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2015-02-24T18:41:34.067

要从数据库中删除所有约束：

```
SELECT 'ALTER TABLE ' + Table_Name  +' DROP CONSTRAINT ' + Constraint_Name
FROM Information_Schema.CONSTRAINT_TABLE_USAGE 
```

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2018-01-11T14:55:00.347

删除表的所有外键：

```
USE [Database_Name]
DECLARE @FOREIGN_KEY_NAME VARCHAR(100)

DECLARE FOREIGN_KEY_CURSOR CURSOR FOR
SELECT name FOREIGN_KEY_NAME FROM sys.foreign_keys WHERE parent_object_id = (SELECT object_id FROM sys.objects WHERE name = 'Table_Name' AND TYPE = 'U')

OPEN FOREIGN_KEY_CURSOR
----------------------------------------------------------
FETCH NEXT FROM FOREIGN_KEY_CURSOR INTO @FOREIGN_KEY_NAME
WHILE @@FETCH_STATUS = 0
    BEGIN
       DECLARE @DROP_COMMAND NVARCHAR(150) = 'ALTER TABLE Table_Name DROP CONSTRAINT' + ' ' + @FOREIGN_KEY_NAME

       EXECUTE Sp_executesql @DROP_COMMAND

       FETCH NEXT FROM FOREIGN_KEY_CURSOR INTO @FOREIGN_KEY_NAME

    END
-----------------------------------------------------------------------------------------------------------------
CLOSE FOREIGN_KEY_CURSOR
DEALLOCATE FOREIGN_KEY_CURSOR 
```

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2016-02-07T17:30:45.697

在完全删除约束之前，您应该考虑（暂时）禁用它。

如果您查看表创建 TSQL，您将看到如下内容：

```
ALTER TABLE [dbo].[dbAccounting] CHECK CONSTRAINT [FK_some_FK_constraint] 
```

你可以跑

```
ALTER TABLE [dbo].[dbAccounting] NOCHECK CONSTRAINT [FK_some_FK_constraint] 
```

...然后插入/更新一堆违反约束的值，然后通过运行原始`CHECK`语句将其重新打开。

（我不得不这样做来清理我过去继承的设计不佳的系统。）

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2017-10-22T11:16:25.953

根据您使用的**数据库，有一种语法或另一种语法。**

如果您使用的是**Oracle**，则必须输入其他用户告诉您的内容：

```
ALTER TABLE table_name DROP CONSTRAINT fk_name; 
```

但是如果你使用**MySQL**，那么这会给你一个语法错误，你可以输入：

```
ALTER TABLE table_name DROP INDEX fk_name; 
```

* * *

## 回答 #8

> 赞同：2
> 
> 时间：2019-12-27T05:06:15.087

首先使用

```
show create table table_name; 
```

查看表格的描述性结构。

在那里，您可能会看到与您在该表中使用的外键相关的约束。首先删除相应的约束

```
alter table table_name drop constraint constraint_name; 
```

然后删除您想要的相应外键或列......祝你好运！

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2012-09-19T06:51:21.550

```
ALTER TABLE table
DROP FOREIGN KEY fk_key 
```

编辑：没有注意到你在使用 sql-server，我的错

```
ALTER TABLE table
DROP CONSTRAINT fk_key 
```

* * *

## 回答 #10

> 赞同：1
> 
> 时间：2015-10-29T23:37:53.090

使用这些查询来查找所有 FK：

```
Declare @SchemaName VarChar(200) = 'Schema Name'
Declare @TableName VarChar(200) = 'Table name'

-- Find FK in This table.
SELECT 
    'IF  EXISTS (SELECT * FROM sys.foreign_keys WHERE object_id = OBJECT_ID(N''' + 
      '[' + OBJECT_SCHEMA_NAME(FK.parent_object_id) + '].[' + FK.name + ']' 
      + ''') AND parent_object_id = OBJECT_ID(N''' + 
      '[' + OBJECT_SCHEMA_NAME(FK.parent_object_id) + '].[' 
      + OBJECT_NAME(FK.parent_object_id) + ']' + ''')) ' +

    'ALTER TABLE ' +  OBJECT_SCHEMA_NAME(FK.parent_object_id) +
    '.[' + OBJECT_NAME(FK.parent_object_id) + 
    '] DROP CONSTRAINT ' + FK.name
    , S.name , O.name, OBJECT_NAME(FK.parent_object_id)
FROM sys.foreign_keys AS FK
INNER JOIN Sys.objects As O 
  ON (O.object_id = FK.parent_object_id )
INNER JOIN SYS.schemas AS S 
  ON (O.schema_id = S.schema_id)  
WHERE 
      O.name = @TableName
      And S.name = @SchemaName

-- Find the FKs in the tables in which this table is used
  SELECT 
    ' IF  EXISTS (SELECT * FROM sys.foreign_keys WHERE object_id = OBJECT_ID(N''' + 
      '[' + OBJECT_SCHEMA_NAME(FK.parent_object_id) + '].[' + FK.name + ']' 
      + ''') AND parent_object_id = OBJECT_ID(N''' + 
      '[' + OBJECT_SCHEMA_NAME(FK.parent_object_id) + '].[' 
      + OBJECT_NAME(FK.parent_object_id) + ']' + ''')) ' +

    ' ALTER TABLE ' +  OBJECT_SCHEMA_NAME(FK.parent_object_id) +
    '.[' + OBJECT_NAME(FK.parent_object_id) + 
    '] DROP CONSTRAINT ' + FK.name
    , S.name , O.name, OBJECT_NAME(FK.parent_object_id)
FROM sys.foreign_keys AS FK
INNER JOIN Sys.objects As O 
  ON (O.object_id = FK.referenced_object_id )
INNER JOIN SYS.schemas AS S 
  ON (O.schema_id = S.schema_id)  
WHERE 
      O.name = @TableName
      And S.name = @SchemaName 
```

* * *

## 回答 #11

> 赞同：1
> 
> 时间：2017-01-13T00:24:29.283

或者，您也可以从 SQL Server Management Studio 本身中删除外键约束。*如果命令不起作用，您可以尝试一下*。

1.  展开您的数据库视图。
2.  右键单击具有外键约束的表。选择设计。将打开一个包含有关表列信息的选项卡。
3.  右键单击具有外键引用的列。或者您可以右键单击任何列。选择关系。
4.  一个关系列表将出现在一个弹出窗口中（如果有的话）。
5.  从那里您可以删除外键约束。

我希望这会有所帮助

* * *

## 回答 #12

> 赞同：1
> 
> 时间：2020-08-02T18:46:53.807

如果您发现自己处于自动生成表的 FK 名称并且您无法查看它的确切内容（例如在没有数据库权限的情况下）的情况下，您可以尝试类似这：

```
DECLARE @table NVARCHAR(512), @sql NVARCHAR(MAX);
SELECT @table = N'dbo.Table';
SELECT @sql = 'ALTER TABLE ' + @table
    + ' DROP CONSTRAINT ' + NAME + ';'
    FROM sys.foreign_keys
    WHERE [type] = 'F'
    AND [parent_object_id] = OBJECT_ID(@table);
EXEC sp_executeSQL @sql; 
```

建立一个存储过程，它在不指定实际 FK 名称的情况下删除指定表的约束。它删除对象`[type]`等于 F（外键约束）的约束。

**注意**：如果表中有多个 FK，它将全部删除。因此，如果您的目标表只有一个 FK，则此解决方案效果最佳。

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2019-11-22T20:59:59.783

如果您不知道外键约束名称，请尝试使用此方法找到它。

```
sp_help 'TableName' 
```

另外对于不同的模式

```
sp_help 'schemaName.TableName' 
```

然后

```
ALTER TABLE <TABLE_NAME> DROP CONSTRAINT <FOREIGN_KEY_NAME> 
```

* * *

## 回答 #14

> 赞同：0
> 
> 时间：2020-04-09T12:55:52.227

为了更安全，只需命名所有约束并在评论部分记下它们。

```
ALTER TABLE[table_name]
DROP CONSTRAINT Constraint_name 
```

* * *

## 回答 #15

> 赞同：-6
> 
> 时间：2016-09-26T13:15:33.540

```
alter table <referenced_table_name> drop  primary key; 
```

外键约束将被删除。

# mysql - 修改 JOIN 以通过外部表中的 ID 列表过滤结果

> ID：12489764
> 
> 赞同：2
> 
> 时间：2012-09-19T06:48:59.423
> 
> 标签：mysql, join

这是我的数据库结构：

![观察记录——数据库结构](../Images/5f28db58e37b681b488425c880050b45.png)

我使用的 SQL 语句是：

```
SELECT
     t1.Name AS Teacher_Name,
     t2.Name AS Observer_Name,
     o.Datetime AS Datetime,
     o.Type AS Type,
     o.Year_Group AS Year_Group,
     o.Class_Name AS Class_Name,
     c.Title AS Course_Name,
     GROUP_CONCAT(DISTINCT l.Title SEPARATOR ', ') AS Focus,
     o.Achievement_Grade AS Achievement_Grade,
     o.Behaviour_Grade AS Behaviour_Grade,
     o.Teaching_Grade AS Teaching_Grade,
     GROUP_CONCAT(DISTINCT cl1.Title SEPARATOR ', ') AS Positive,
     GROUP_CONCAT(DISTINCT cl2.title SEPARATOR ', ') AS Development,
     o.Notes AS Notes
FROM observations o
LEFT JOIN teachers t1 
    ON o.Teacher_ID = t1.Teacher_ID
LEFT JOIN teachers t2 
    ON o.Observer_ID = t2.Teacher_ID
LEFT JOIN courses c 
    ON o.Course_ID = c.Course_ID
LEFT JOIN  foci f
    ON o.ID = f.Observation_ID
LEFT JOIN focus_labels l
    on f.focus_id = l.id
LEFT JOIN  criteria c1
    ON o.ID = c1.Observation_ID
LEFT JOIN criteria_labels cl1
    on c1.Criteria_ID = cl1.ID AND c1.Type = 'P'
LEFT JOIN  criteria c2
    ON o.ID = c2.Observation_ID AND c2.Type = 'D'
LEFT JOIN criteria_labels cl2
    on c2.Criteria_ID = cl2.ID
GROUP BY o.id
ORDER BY Datetime DESC 
```

从这样的结果集返回的数据是：

![观察记录 - 观察结果列表](../Images/40d37ff63941806a8a596ea0a3e532a1.png)

* * *

我现在想要实现的是按*Course*搜索。

我对此的输入是一个 ID 列表，所以我希望我可以使用类似的东西：

`SELECT * FROM Courses WHERE Course_ID IN (1, 2, 3, 4)`.

显然它并不是那么简单，因为我`Courses`正在加入：

`LEFT JOIN courses c ON o.Course_ID = c.Course_ID`.

我将如何修改此声明以包含此类搜索功能？

提前致谢，

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-19T07:19:54.310

为什么不？只需添加到您的查询`where`语句：

```
.............................
LEFT JOIN criteria_labels cl2
    on c2.Criteria_ID = cl2.ID
WHERE o.Course_ID IN (1, 2, 3, 4)
GROUP BY o.id
ORDER BY Datetime DESC 
```

# linux - 在 Linux 中安装 Apache 时出现问题

> ID：12489771
> 
> 赞同：1
> 
> 时间：2012-09-19T06:49:28.500
> 
> 标签：linux, apache2, apache

我知道那里有类似的问题，但我还没有找到这个问题的确切解决方案。安装 Apache，下载**httpd-2.4.3.tar.gz**并遵循以下安装过程：

```
cp httpd-2.4.3.tar.gz /usr/local/src

cd /usr/local/src

gunzip httpd-2.4.3.tar.gz

tar -xvf httpd-2.4.3.tar

rm -f httpd-2.4.3.tar

cd httpd-2.4.3

export CFLAGS=-O2

./configure --prefix=/usr/local/apache2 --enable-mods-shared=all

make

make install

cd /usr/local/apache2/bin

./apachectl start 
```

现在，而不是启动任何上述服务 m 面临以下错误：

```
/usr/local/apache2/bin/httpd: /lib64/libc.so.6: version `GLIBC_2.14' not found (required by /usr/local/apache2/bin/httpd) 
```

我还下载并安装了**glibc-2.14.1-14.27.1.x86_64.rpm**并且还手动检查了库文件**libc.so.6**是否存在于**/lib64**位置。

任何人都可以帮我解决这个问题吗？在此先感谢我是新手。

# ios - 在 cocos2d 中画线

> ID：12489773
> 
> 赞同：1
> 
> 时间：2012-09-19T06:49:40.210
> 
> 标签：ios, cocos2d-iphone

我正在尝试使用触摸在 Cocos2d 中绘制线条。

我有一个系统，它只会在你触摸的地方添加一个小精灵，但它的工作非常糟糕。所以我一直在尝试找到一种使用像 ccDrawLine 这样的方法来绘制实际线条的方法，但是我发现的每个教程似乎都遗漏了一些东西，我就是想不通。

我找到了这个教程，[在 COCOS2D 中移动的触摸上画线，](https://stackoverflow.com/questions/4538598/drawing-line-on-touches-moved-in-cocos2d)但我不明白一些事情。

它似乎从两个不同的文件中引用了相同的变量，所以我不明白它是如何做到的。（`naughtyTouchArray`变量）

我找不到关于画线的完整指南，很抱歉这个无代码问题，但我很沮丧。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-19T07:14:59.637

您在问题中链接的答案为您的问题提供了很好的解决方案。没有“两个不同的文件”。只是一层的两种不同方法。一种方法 ( `ccTouchesMoved:withEvent:`) 处理触摸并用线一个接一个地填充要相互连接的点数组。从 cocos2d 文档看，所有的绘图都必须放在`draw`节点的方法中。因此，另一个 ( `draw`) 方法只是根据给定的数组绘制线条。Cocos2d 是基于 OpenGL 的，它会在每个刻度上完全重绘场景，所以你不能只画新线。你必须把它们都画出来。

或者任何其他节点都可以在它的`draw`方法中绘制您的数组，因此您可以简单地将存储的点数组从检测触摸的层传递到该节点。

# android - 未选中复选框时如何从数组中删除元素？

> ID：12489775
> 
> 赞同：1
> 
> 时间：2012-09-19T06:49:43.760
> 
> 标签：android, arraylist

大家好，我想在 itemsetchenge 列表器中未选中复选框时删除元素。这是我的代码

```
 checkbox_timeslot.clear();

          chk.setOnCheckedChangeListener(new OnCheckedChangeListener() {

            @Override
            public void onCheckedChanged(CompoundButton buttonView, boolean isChecked) {
                // TODO Auto-generated method stub

                String chetimeslot;

                if(isChecked){          

                chetimeslot = (String)chk.getTag();
                checkbox_timeslot.add(chetimeslot);             
                Log.e("array value", ""+checkbox_timeslot);             
                Log.e("checked slo value", ""+chetimeslot);

                }else{          

                checkbox_timeslot.add("");
                Log.e("else array value", ""+checkbox_timeslot);    

            }        
        }

        }); 
```

“checkbox_timeslot”是我的字符串数组列表。我想删除未选中复选框中的元素并在从复选框列表中选中时添加项目..这有什么帮助？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-19T06:51:04.517

```
if(isChecked){          

    chetimeslot = (String)chk.getTag();
    checkbox_timeslot.add(chetimeslot);             
    Log.e("array value", ""+checkbox_timeslot);             
    Log.e("checked slo value", ""+chetimeslot);

} else{          

     chetimeslot = (String)chk.getTag();
     checkbox_timeslot.remove(chetimeslot);
     Log.e("else array value", ""+checkbox_timeslot);    

} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-19T06:55:24.063

使用 add(item) 将元素添加到数组列表。remove(item) 从列表中删除。

```
chetimeslot = (String)chk.getTag();
if(isChecked){

    checkbox_timeslot.add(chetimeslot);

} else{          

    checkbox_timeslot.remove(chetimeslot);

} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-19T07:14:39.897

```
 if(isChecked){

           chetimeslot = (String)chk.getTag();
           checkbox_timeslot.add(chetimeslot);

        }else{

          chetimeslot = (String)chk.getTag();
          checkbox_timeslot.remove(chetimeslot);
        }
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-05-09T10:40:11.620

我今天遇到的同样的问题。这就是我解决它的方法。我正在使用 RecyclerView 发布我的整个适配器类。

```
package com.aqua.machinetest;

import android.content.Context;
import android.support.v7.widget.RecyclerView;
import android.view.LayoutInflater;
import android.view.View;
import android.view.ViewGroup;
import android.widget.CheckBox;
import android.widget.TextView;
import android.widget.Toast;

import java.util.ArrayList;
import java.util.List;

/**
 * Created by Danish.sharma on 5/9/2017.
 */

public class GovernateListAdapter extends RecyclerView.Adapter<GovernateListAdapter.MyViewHolder> {

    private List<Governate> governateList;
    public static ArrayList<String> arrayListSelectedContacts = new ArrayList<>();
    Context context;

    public GovernateListAdapter(List<Governate> governateList, Context context) {
        this.governateList = governateList;
        this.context = context;
    }

    @Override
    public MyViewHolder onCreateViewHolder(ViewGroup parent, int viewType) {
        View itemView = LayoutInflater.from(parent.getContext()).inflate(R.layout.governate_list_row, parent, false);
        return new MyViewHolder(itemView);
    }

    @Override
    public void onBindViewHolder(final MyViewHolder holder, final int position) {
        Governate governate = governateList.get(position);
        holder.title.setText(governate.getName());

        holder.checkBox.setChecked(governateList.get(position).getCheckedBox());
        holder.checkBox.setTag(governateList.get(position));

        holder.checkBox.setOnClickListener(new View.OnClickListener() {

            public void onClick(View v) {

                CheckBox cb = (CheckBox) v;
                Governate governate1 = (Governate) cb.getTag();

                governate1.setCheckedBox(cb.isChecked());
                governateList.get(position).setCheckedBox(cb.isChecked());
                System.out.println("selected contacts list " + governate1.getId());

                //Toast.makeText(v.getContext(), contact.getName() + " is " + cb.isChecked(), Toast.LENGTH_LONG).show();

                if (cb.isChecked()) {
                    arrayListSelectedContacts.add(governateList.get(position).getId());
                } else {
                    arrayListSelectedContacts.remove(governateList.get(position).getId());
                }

                System.out.println("selected contacts list 3 " + arrayListSelectedContacts);
                Toast.makeText(context, arrayListSelectedContacts.size() + " Added", Toast.LENGTH_SHORT).show();
            }
        });

    }

    @Override
    public int getItemCount() {
        return governateList.size();
    }

    public class MyViewHolder extends RecyclerView.ViewHolder {
        public TextView title;
        public CheckBox checkBox;

        public MyViewHolder(View view) {
            super(view);
            title = (TextView) view.findViewById(R.id.textView_Title);
            checkBox = (CheckBox) view.findViewById(R.id.checkBox);
        }
    }
} 
```

这是我的 pojo 课：

```
package com.aqua.machinetest;

import android.os.Parcel;
import android.os.Parcelable;

import java.util.ArrayList;
import java.util.List;

/**
 * Created by Danish.sharma on 5/9/2017.
 */

public class Governate  {
    String id;
    String name;
    Boolean checkedBox = false;
 //   List<Governate> governateList = new ArrayList<>();

    public Governate() {

    }

    public Governate(String id, String name) {
        this.id = id;
        this.name = name;
       // this.governateList = governateList;
    }

    protected Governate(Parcel in) {
        id = in.readString();
        name = in.readString();
    }

    public String getId() {
        return id;
    }

    public void setId(String id) {
        this.id = id;
    }

    public String getName() {
        return name;
    }

    public void setName(String name) {
        this.name = name;
    }

    public Boolean getCheckedBox() {
        return checkedBox;
    }

    public void setCheckedBox(Boolean checkedBox) {
        this.checkedBox = checkedBox;
    }

} 
```

最后：这是我实现 onClickListener 的片段

```
@Override
public void onClick(View v) {
    switch (v.getId()) {
        case R.id.linear_Next:
            try {
                if (GovernateListAdapter.arrayListSelectedContacts.size() == 0) {
                    Toast.makeText(getActivity(), "No data selected.", Toast.LENGTH_SHORT).show();

                } else if (GovernateListAdapter.arrayListSelectedContacts.size() > 0) {
                    Toast.makeText(getActivity(), "Selected data=" + GovernateListAdapter.arrayListSelectedContacts.size(),
                            Toast.LENGTH_SHORT).show();

                }
            } catch (Exception e) {
                e.printStackTrace();
            }
            break;
    }
} 
```

# c++ - 析构函数和构造函数调用，示例对吗？

> ID：12489781
> 
> 赞同：2
> 
> 时间：2012-09-19T06:50:08.907
> 
> 标签：c++, constructor

我必须加深对调用构造函数的情况的理解。在此期间，我偶然发现了Microsoft 的[这个示例](http://msdn.microsoft.com/en-us/library/ms364057%28v=vs.80%29.aspx#nrvo_cpp05_topic3)：

```
//RVO class is defined above in figure 4
#include <stdio.h>
RVO MyMethod (int i)
{
            RVO rvo;
            rvo.mem_var = i;
            throw "I am throwing an exception!";
            return (rvo);
}
int main()
{
            RVO rvo;
            try 
            {
                        rvo=MyMethod(5);
            }
            catch (char* str)
            {
                        printf ("I caught the exception\n");
            }
} 
```

该类`RVO`在调用时仅具有构造函数、copyconsdtuctor 和析构函数打印。微软表示，如果 thorw 被注释掉并且没有 NRVO，输出将是：

```
I am in constructor
I am in constructor
I am in copy constructor
I am in destructor
I am in destructor
I am in destructor 
```

但是我不能完全跟随。我认为这就是发生的事情：

1.  主要`constructor`要求`RVO rvo;`
2.  在 MyMethod`constructor`中调用`RVO rvo;`
3.  因为`return (rvo);`被`copyconstructor`称为
4.  在 MyMethod`destructor`中为本地 RVO 调用
5.  `destructor`本地 rvo 调用In Main

这让我`destructor`比微软宣称的少了一个电话。我错过了什么？

为了完成`RVO`课程：

```
class RVO
{
public:

            RVO(){printf("I am in constructor\n");}
            RVO (const RVO& c_RVO) {printf ("I am in copy constructor\n");}
            ~RVO(){printf ("I am in destructor\n");}
            int mem_var;       
}; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-19T06:55:33.863

不要混淆。如果没有返回值优化，会创建*三个*) 对象（*包括*用于通过复制构造函数进行复制的临时对象），因此*三个*对象正在被销毁（再次包括临时对象），所以一切都很好。

但是，使用 RVO，在复制时不会创建临时对象（对象将直接在调用者的堆栈帧中创建），您只会看到两个构造和两个破坏。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-19T06:58:36.050

如果您仔细查看语句 rvo=MyMethod(5);

rvo 由 MyMethod 的返回对象赋值，返回对象应该在 main 函数的范围内构造。此对象未命名，是一个临时对象。这种对象的构造函数显示在输出中，乍一看并不明显。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-19T06:55:39.773

rvo 在 main() 中构造

rvo 在 MyMethod 中构建

通过 return 语句从 MyMethod 中的 rvo 复制构造一个未命名的 RVO 对象

所有三个对象都被销毁

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-19T06:56:08.930

“在主构造函数中为RVO调用rvo；在MyMethod构造函数中为RVO调用rvo；为return(rvo)；copyconstructor” 所以构造了三个对象，正常情况下应该有3个被销毁。返回的值也需要被破坏。

# html - 向 Tumblr 发送推文

> ID：12489782
> 
> 赞同：0
> 
> 时间：2012-09-19T06:50:14.110
> 
> 标签：html, twitter, tumblr

我正在建立一个 Tumblr 博客，我希望看到推文出现在流中。

本页：http://www.tumblr.com/docs/en/custom_themes

这个页面：[http ://tumblring.net/how-to-send-your-twitter-updates-to-tumblr-automatically/](http://tumblring.net/how-to-send-your-twitter-updates-to-tumblr-automatically/)

似乎暗示它是可能的，但是当我按照这些说明进行操作时，什么也没有。我将该代码放入 {block:posts}{/block:posts}

在网上也找不到其他关于它的东西，也许它是一个不再有效的旧功能？

# facebook - 获取 Facebook 的 JSON？

> ID：12489790
> 
> 赞同：1
> 
> 时间：2012-09-19T06:50:42.317
> 
> 标签：facebook, json

我需要一些帮助才能从 facebook 获取一些 JSON，基本上我需要做的就是获取状态文本并将其发布到网站。

我正在使用下面的方法，但是使用此方法的 access_tokens 每小时都会过期。

```
$.getJSON('https://graph.facebook.com/SOME_ID?fields=statuses.limit(10).fields(message)&access_token=SOME_ACCESS_TOKEN', function(data) {}); 
```

请注意，我从 facebook graph API explorer 获得了上面的 URL。

还有其他方法可以实现我想要做的事情吗？

***更新：***

我使用了 FB.api，但我不确定我是否做得正确，因为它向我发送了此错误“请求此资源需要访问令牌”。

```
window.fbAsyncInit = function() {
    FB.init({
      appId      : 'My_app_id', // App ID
      channelUrl : '//myHost.com/facebook/channel.php', // Channel File
      status     : true, // check login status
      cookie     : true, // enable cookies to allow the server to access the session
      xfbml      : true  // parse XFBML
    });

    FB.api('USER_ID?fields=statuses.fields(message)', function(response) {
      console.log(response);
    });
    // Additional initialization code here
  };

  // Load the SDK Asynchronously
  (function(d){
     var js, id = 'facebook-jssdk', ref = d.getElementsByTagName('script')[0];
     if (d.getElementById(id)) {return;}
     js = d.createElement('script'); js.id = id; js.async = true;
     js.src = "//connect.facebook.net/en_US/all.js";
     ref.parentNode.insertBefore(js, ref);
   }(document)); 
```

请注意，我用正确的值替换了（my_app_id、myHost.com 和 USER_ID）。

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-19T07:15:05.433

假设您已经实现了 Javascript SDK，我建议您使用 FB.api 方法。

[https://developers.facebook.com/docs/reference/javascript/FB.api/](https://developers.facebook.com/docs/reference/javascript/FB.api/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-19T08:29:23.397

在调用 API 之前，用户需要登录 Facebook 并允许您的应用，将您的代码更新为：

```
window.fbAsyncInit = function() {
    FB.init({
      appId      : 'My_app_id', // App ID
      channelUrl : '//myHost.com/facebook/channel.php', // Channel File
      status     : true, // check login status
      cookie     : true, // enable cookies to allow the server to access the session
      xfbml      : true  // parse XFBML
    });

    FB.getLoginStatus(function(response) {
        if (response.status === 'connected') {
            FB.api('USER_ID?fields=statuses.fields(message)', function(response) {
              console.log(response);
            });
        }
    });
  }; 
```

有关 getLoginStatus 状态的更多信息：http: [//developers.facebook.com/docs/reference/javascript/FB.getLoginStatus/](http://developers.facebook.com/docs/reference/javascript/FB.getLoginStatus/)

您还需要询问权限 user_status 查看文档以获取更多详细信息：[https ://developers.facebook.com/docs/authentication/permissions/](https://developers.facebook.com/docs/authentication/permissions/)

您应该在调用 FB.login 时请求权限：

```
 FB.login(function(response) {
   // handle the response
 }, {scope: 'user_status'}); 
```

[https://developers.facebook.com/docs/reference/javascript/FB.login/](https://developers.facebook.com/docs/reference/javascript/FB.login/)

# iphone - 使用 wifi 在 iPhone 和其他手机之间共享文本

> ID：12489791
> 
> 赞同：2
> 
> 时间：2012-09-19T06:50:45.023
> 
> 标签：iphone, objective-c, ipad, networking, wifi

是否可以通过 wifi 在 iPhone 和其他手机（如黑莓或安卓）之间发送和接收数据。我正在移动它以创建具有上述功能的 iPhone 应用程序。任何人都可以有这方面的经验，或者任何示例代码可以做到这一点。我搜索了很多，但找不到任何相关的东西。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-20T10:38:32.780

您可以通过使用服务器应用程序来做到这一点。所以iphone将数据推送到服务器，其他设备要么收到推送通知或类似的东西，要么只是轮询数据。

如果没有服务器，您将很难找到其他设备。如果可以安全地假设它们都在同一个子网上，那么您可以使用 UDP 广播来执行此操作。

有很多方法可以做到这一点，每一种都有自己的陷阱。因此，如果不更详细地了解它的目的是什么，就没有通用的答案。

# c# - 我可以使用 IP 地址作为 SMTP 主机而不是 smtp.email.com

> ID：12489796
> 
> 赞同：0
> 
> 时间：2012-09-19T06:51:08.480
> 
> 标签：c#, .net, email, smtp, smtpclient

我正在创建一个电子邮件发送示例应用程序，我想使用从不同的电子邮件地址发送电子邮件，例如“gmail、yahoo、hotmail”，所以我不想使用“smtp.email.com”作为主机，因为如果我使用“smtp.email.com”作为主机我将不得不为每个不同的公司更改我的主机名，例如（“smtp.gmail.com”对于 gmail 或“smtp.mail.yahoo.com”对于 yahoo.com）所以我可以使用 IP 地址作为 SMTP 主机，而不是 smtp.email.com。

请给我一个解决方案，以便在不更改 smtp 主机名的情况下，我可以使用不同的电子邮件公司发送电子邮件。

这是我的代码：

```
 try
        {
            // setup mail message
            MailMessage message = new MailMessage();
            message.From = new MailAddress(textBox1.Text);
            message.To.Add(new MailAddress(textBox2.Text));
            message.Subject = textBox3.Text;
            message.Body = richTextBox1.Text;

            // setup mail client
            SmtpClient mailClient = new SmtpClient("smtp.gmail.com");//here i have to change SMTP host for different email company 
            mailClient.Credentials = new NetworkCredential(textBox1.Text,"password");

            // send message
            mailClient.Send(message);

            MessageBox.Show("Sent");
        }
        catch(Exception)
        {
            MessageBox.Show("Error");
        } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-19T06:55:02.877

当然，您可以使用 IP 地址代替名称，但请记住，如果他们更改了 IP，您将停止工作.. 但是.. 这需要根据您发送邮件的内容进行更改，除非您找到一些中继代理的形式是开放的。因为雅虎不会接收 gmail，而 gmail 不会接收雅虎等。现实情况是，如果您发送它最终会改变您是否使用 IP 或名称。

但是，您的网络服务器很可能会从您的域发送邮件，而不是您的 gmail/yahoo 帐户。为什么不从您的域发送邮件呢？例如 noreply@myweb.com 然后 smtp 服务器与您的网络提供商保持相同

你当然可以

```
SmtpClient mailClient
if (textbox1.Text.Contains("gmail") 
{
            mailClient = new SmtpClient("smtp.gmail.com");/
            mailClient.Credentials = new NetworkCredential(textBox1.Text,"password"); 
}
else if (textbox1.Text.Contains("somemail") 
{
            mailClient = new SmtpClient("smtp.somemail.com");/
            mailClient.Credentials = new NetworkCredential(textBox1.Text,"password"); 
} 
```

ETC

# java - maven ear 打包策略，构建依赖项目

> ID：12489803
> 
> 赞同：1
> 
> 时间：2012-09-19T06:51:22.637
> 
> 标签：java, maven, ear, maven-war-plugin, maven-ear-plugin

在看了各种建议之后，我似乎仍然无法对耳朵文件有任何成功的 maven 策略。

我有这个结构：

父 pom.xml: ...

```
 <modules>
        <module>MyProject-ear</module>
        <module>MyProject-ejb</module>
        <module>MyProject-war</module>
  </modules> 
```

（ejb/war/ear 有这个作为父级）

我正在使用 maven-war-plugin / maven-ejb-plugin / maven-ear-plugin。

EAR 模块将 ejb/war 项目作为依赖项。

现在，如果我想建立自己的耳朵，我需要先建立战争。如果我不这样做，那只是不是最新版本。

有没有更好的办法？

编辑：仅供参考，打开一个 netbeans 错误，只需单击“运行”即可运行我的项目：http: //netbeans.org/bugzilla/show_bug.cgi?id= [218807](http://netbeans.org/bugzilla/show_bug.cgi?id=218807)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-19T07:03:16.283

看起来不错。我自己使用相同的布局。

构建时，您只需位于顶部 pom 并运行`mvn install`。您不必走下层级并构建第`war`一个。

# java - 点对点通信 - java

> ID：12489807
> 
> 赞同：1
> 
> 时间：2012-09-19T06:52:01.987
> 
> 标签：java, client-server

我需要创建一个对等点需要与其他对等点通信的程序。我模糊地创建了一个结构，但它不起作用。我知道我犯了一个错误，但无法找出问题所在。我创建一个服务器套接字作为线程并创建一个客户端套接字线程，它将与服务器套接字线程对话。在我进入一个端口后，程序什么也不做......

```
 server.java
    ------------
    class server
   {
       public static void main(String argv[]) throws Exception
       {

          //server socket
          ServerSocket server = new ServerSocket(1001);
          Socket client;
          while(true)
          {
            client = server.accept();
            Thread t = new Thread(new acceptconnection(client));
            t.start();
          }
      }
   }

   class acceptconnection implements Runnable
   {
       BufferedReader inFromClient,inn;
       DataOutputStream ds;
       Socket clientsocket;
       acceptconnection (Socket socket) throws IOException
       {          
          this.clientsocket = socket;
          inn = new BufferedReader (new InputStreamReader(System.in));
          inFromClient =new BufferedReader(new                        
                        InputStreamReader(clientsocket.getInputStream()));
          ds = new DataOutputStream(clientsocket.getOutputStream());
      }

      @Override
      public void run ()
      {
         try 
         {
           String clientSentence, inp;
           while(( clientSentence = inFromClient.readLine())!=null)
           {                   
              System.out.println("message from remote socket #" +   
                 clientsocket.getRemoteSocketAddress()+ clientSentence);

              inp=inn.readLine();
              ds.writeBytes(inp + "\n");
              ds.flush();
           }
        }
     }
  }

   client.java
   ------------
   class client
   {
      public static void main(String argv[]) throws Exception
      {   
        String sentence;
        String modifiedSentence;
        Socket clientSocket = null;
        //  ss = new  ServerSocket(10002);
        clientSocket = new Socket("localhost", 1001);

        BufferedReader inFromUser = new BufferedReader( new 
           InputStreamReader(System.in));
        DataOutputStream outToServer = new 
           DataOutputStream(clientSocket.getOutputStream());
        BufferedReader inFromServer = new BufferedReader(new 
           InputStreamReader(clientSocket.getInputStream()));

        System.out.println("Enter you name:"); 
        sentence = inFromUser.readLine();  
        outToServer.writeBytes(sentence + "\n" );  

        System.out.println("Enter the port u want:"); 
        sentence = inFromUser.readLine();  
        int serverport = Integer.parseInt(sentence);

        Thread t = new Thread(new acceptconnection1(serverport));
        t.start();
        String msg;        

        clientSocket.close();
     }
  }

 class acceptconnection1 implements Runnable {
 BufferedReader inserver, inn; 
 DataOutputStream ds;
 Socket socket, peersocket;

         int serverport ;

      Socket clientSocket = null;
     acceptconnection1 (int serverport) throws IOException{   
     this.serverport = serverport;}

       public void run () {
     ServerSocket ss;

        String cs,a;
    try {
        ss = new ServerSocket(serverport);

        while(true)
        {
        peersocket =ss.accept();

        Thread t = new Thread(new abc(peersocket) );
        t.start();
        }}}

      class abc implements Runnable {
BufferedReader inn,inp;
DataOutputStream ds;
   Socket peersocket;
public abc(Socket peersocket) throws IOException{
this.peersocket = peersocket;

inn = new BufferedReader (new InputStreamReader(System.in));
      inp =new BufferedReader(new InputStreamReader(peersocket.getInputStream()));
  ds = new DataOutputStream(peersocket.getOutputStream());

}

@Override
public void run()
    {
   String clientSentence;

    Socket client = new Socket();
    try {
        while(( clientSentence = inp.readLine())!=null)
                {

                    ds.writeBytes("wake up!");
                    //System.out.println("message=" + clientSentence);

                } 
```

# actionscript-3 - 检测在显示叠加广告时点击 Chromeless Youtube 播放器中的空白区域

> ID：12489809
> 
> 赞同：0
> 
> 时间：2012-09-19T06:52:12.710
> 
> 标签：actionscript-3, youtube-api

## 快速总结

actionscript 中是否有一种方法可以检测用户何时单击无铬视频播放器实例中的“空白空间”（即不会导致播放器做出反应的单击）？当无镶边播放器显示*重叠式广告*时，这一点尤为重要。

如果没有，是否有办法检测用户何时点击或关闭重叠式广告？

## 细节

我的基于 Flash 的应用程序需要将视频窗口上的“空”鼠标点击解释为特定操作的触发器。这种行为在 youtube 的“完整”Flash 播放器中得到了演示 - 单击不会调用操作的“空白区域”会在暂停和播放之间切换，双击空白区域会在窗口和全屏之间切换.

这在播放自托管内容时非常简单——我可以假设视频窗口上的任何点击都是一次空点击，并且可以适当地采取行动。

但是，当我播放 youtube 视频时，情况*并非如此，因为它可以在视频内容上弹出叠加广告。*我需要允许用户与广告交互，但仍然让我的应用程序的逻辑处理对无铬播放器的“空白”区域的点击。

我花了很长时间试图解决这个问题，但没有取得任何进展。文档没有涵盖这一点。没有通过 onStateChange 抛出任何新状态以响应广告的显示或交互。似乎没有与显示重叠广告相关的 API 更改（没有引发 onApiChange，并且轮询 getOptions() 没有出现任何结果）。使用 getObjectsUnderPoint 解决方法不起作用。我什至尝试通过轮询 Mouse.cursor 状态来对信息进行反向工程（当鼠标悬停在无铬播放器中的交互式对象上时，它在视觉上被设置为“手”……但它被设置为“自动”）。

关于如何做到这一点的任何建议？特别是对于无铬播放器是否使用 StageVideo 是透明的？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-19T21:38:50.440

虽然这是 Players API 团队认识到需要改进的地方（通过创建在显示广告或其他叠加层时触发的回调，或者尝试从叠加层返回有关视频播放器的哪个矩形“安全”的信息)，目前 API 中没有任何东西可以完成您所追求的。

随时[提交功能请求](https://code.google.com/p/gdata-issues/issues/entry?template=YouTube%20%28Enhancement%20Request%29)以进行跟踪，如果有任何进展，我们可以保持最新。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-20T23:21:39.023

根据 Jeff Posnick 的回答（没有官方的方式来做到这一点），我最终使用相当于屏幕抓取的代码拼凑了一个脆弱的解决方案。

在鼠标单击时，我会遍历无镶边播放器的 DisplayObject 层次结构，过滤掉噪音，并查看当前点下是否存在与鼠标交互的对象。

它很脆弱——未来对无铬播放器的更改很容易打破这一点。如果重叠式广告包含 AVM1 内容，它将无法访问并且会吃掉鼠标事件。但总比没有好。:(

这是一些示例代码来演示该概念。传入无铬播放器的 DisplayObject，以及舞台空间中的当前鼠标位置。这将返回该点下是否有鼠标交互元素，并将跟踪支持的鼠标交互是什么。

```
private function IsPointInteractive(displayObject:DisplayObject,
    stageX:Number,
    stageY:Number) : Boolean
{
    const className:String = flash.utils.getQualifiedClassName(displayObject);
    const container:DisplayObjectContainer = displayObject as DisplayObjectContainer;

    if (!displayObject.visible)
        return false;

    if (className != "com.google.youtube.application::SwfProxy" &&
        className != "com.google.youtube.application::VideoApplication" &&
        className != "com.google.youtube.players::HTTPVideoPlayer" &&
        className != "com.google.youtube.players::TagStreamPlayer" &&
        (null == container || container.mouseEnabled) &&
        displayObject.hitTestPoint(stageX, stageY, true) )
    {
        var supports:String = "";

        if (displayObject.hasEventListener(MouseEvent.CLICK))
            supports += "MouseEvent.CLICK";

        if (displayObject.hasEventListener(MouseEvent.DOUBLE_CLICK))
            supports += (0 == supports.length ? "" : ", ") + "DOUBLE_CLICK";

        if (displayObject.hasEventListener(MouseEvent.MOUSE_DOWN))
            supports += (0 == supports.length ? "" : ", ") + "MOUSE_DOWN";

        if (displayObject.hasEventListener(MouseEvent.MOUSE_UP))
            supports += (0 == supports.length ? "" : ", ") + "MOUSE_UP";

        if (0 != supports.length)
        {
            trace(displayObject + " (" + className + ") [" + supports + "]");
            return true;
        }
    }

    if (container && container.mouseChildren)
    {
        for (var i:int = container.numChildren - 1; i >= 0; i--)
        {
            if (IsPointInteractive(container.getChildAt(i), stageX, stageY))
                return true;
        }
    }

    return false;
} 
```

# dynamics-crm - 如何在 MSCRM 2011 中为自定义实体创建请求和响应类？

> ID：12489811
> 
> 赞同：0
> 
> 时间：2012-09-19T06:52:19.580
> 
> 标签：dynamics-crm, dynamics-crm-2011

我正在尝试为自定义实体创建请求和响应类。我没有找到使用 crmmsvutil 的方法。它将生成代理类。但是，如何在 MSCRM 2011 中为自定义实体创建请求和响应类？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-20T08:56:13.647

你不需要这样的请求。看看方法

```
Entity Retrieve(string entityName, Guid id, ColumnSet columnSet); 
```

和

```
EntityCollection RetrieveMultiple(QueryBase query); 
```

您拥有检索任何类型实体的一切，因此，没有任何特殊请求类的目的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-20T08:54:43.790

我认为您不能，这些请求是在[Microsoft.Xrm.Sdk.Messages](http://msdn.microsoft.com/en-us/library/gg334698.aspx)和[Microsoft.Crm.Sdk.Messages](http://msdn.microsoft.com/en-us/library/gg309482.aspx) dll 中定义的。

Microsoft.Xrm.Sdk.Messages - 包含更通用的请求和响应，例如创建、更新、删除

Microsoft.Crm.Sdk.Messages - 包含 crm 特定的请求和响应，这些都实现特定的功能，例如 Assing、AddToQueue、BookRequest

没有任何特定于自定义实体或系统实体的消息，例如没有 CreateContactRequest，您只需使用`serivce.Create(new Entity("Contact"));`

# php - 使用 SLIM 框架访问 put 变量

> ID：12489812
> 
> 赞同：0
> 
> 时间：2012-09-19T06:52:28.557
> 
> 标签：php, rest, slim

我正在使用`Slim framework`来开发我的休息`API`。我的`PUT`请求有问题。我想在服务器端访问从客户端发送的变量。

```
$app->put('post/:pid', function ($pid) {
    //how to access other data sent from the client?
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-01T12:54:07.553

参考下面的代码：

```
$app = \Slim\Slim::getInstance();
$request = $app->request();
$var = $request->put(); 
```

变量是 $var 处的数组形式

# android - 安装APK后打开按钮无法使用

> ID：12489816
> 
> 赞同：0
> 
> 时间：2012-09-19T06:52:42.260
> 
> 标签：android, installation

安装应用程序后，我按**打开**按钮，但应用程序没有直接打开。有时它会打开，但有时它不会。

有人有想法么？

![在此处输入图像描述](../Images/c9c26550dc21b498d6f09528020b6d87.png)

# .htaccess - .HTACCESS URL 重写 - 我的 URL 中出现 404 错误

> ID：12489818
> 
> 赞同：0
> 
> 时间：2012-09-19T06:52:54.343
> 
> 标签：.htaccess, url-rewriting

我正在尝试重写 URL 并使用下面提到的代码。但是我在我的页面上收到 404 错误，下面给出的除外。

```
 Options +FollowSymLinks
   RewriteEngine on

   rewritecond %{http_host} ^phoolwala.net [nc]
   rewriterule ^(.*)$ http://www.phoolwala.net/$1 [r=301,nc]
   #RewriteRule ^index.php?$ /phoolwala.net/? [R=301] 
   RewriteRule ^index.php?$ /? [R=301] 
   RewriteCond %{REQUEST_FILENAME} !-f
   RewriteCond %{REQUEST_FILENAME} !-d

    #below line gives error in dhtml editor
    #RewriteRule ^(.*)\.html$ $1.php [nc]

    #RewriteRule ^(.*)/$             $1.php [L]

    RewriteRule ^register/$ register.php [L]
    RewriteRule ^register$ register.php [L]

    RewriteRule ^my-account/$ my-account.php [L]
    RewriteRule ^my-account$ my-account.php [L]

    RewriteRule ^track-order/$ track-order.php [L]
    RewriteRule ^track-order$ track-order.php [L]

    RewriteRule ^edit-profile/$ edit-profile.php [L]
    RewriteRule ^edit-profile$ edit-profile.php [L]

    RewriteRule ^testimonials/$ testimonials.php [L]
    RewriteRule ^testimonials$ testimonials.php [L]

    RewriteRule ^sitemap/$ sitemap.php [L]
    RewriteRule ^sitemap$ sitemap.php [L]

    RewriteRule ^login/$ login.php [L]
    RewriteRule ^login$ login.php [L]

    RewriteRule ^my-account/$ my-account.php [L]
    RewriteRule ^my-account$ my-account.php [L]

    RewriteRule ^edit-profile/$ edit-profile.php [L]
    RewriteRule ^edit-profile$ edit-profile.php [L]

    RewriteRule ^reminders/$ reminders.php [L]
    RewriteRule ^reminders$ reminders.php [L]

    RewriteRule ^view-my-orders/$ view-my-orders.php [L]
    RewriteRule ^view-my-orders$ view-my-orders.php [L]

    RewriteRule ^order-details/$ order-details.php [L]
    RewriteRule ^order-details$ order-details.php [L]

    RewriteRule ^contact-us/$ contact-us.php [L]
    RewriteRule ^contact-us$ contact-us.php [L]

    RewriteRule ^logout/$ logout.php [L]
    RewriteRule ^logout$ logout.php [L]

    RewriteRule ^cart/$ cart.php [L]
    RewriteRule ^cart$ cart.php [L]

     RewriteRule ^international-products/(.*)/(.*)/(.*)/ international-products.php?cid=$1&id=$2&pageno=$3 [L]
     RewriteRule ^international-products/(.*)/(.*)(.*)/ international-products.php?cid=$1&id=$2&pageno=$3 [L]

    RewriteRule ^products/(.*)/(.*)/ products.php?id=$1&pageno=$2 [L]
    RewriteRule ^products/(.*)/(.*) products.php?id=$1&pageno=$2 [L]

    RewriteRule ^price/(.*)/(.*)/(.*)/ productsprice.php?from=$1&to=$2&pageno=$3 [L]
    RewriteRule ^price/(.*)/(.*)(.*)/ productsprice.php?from=$1&to=$2&pageno=$3 [L]

    RewriteRule ^page/(.*)/(.*)/ page.php?alias=$1&id=$2 [L]
    RewriteRule ^page/(.*)/(.*) page.php?alias=$1&id=$2 [L]

    RewriteRule ^international-product/(.*)/(.*)/(.*)/ international-product-details.php?cid=$1&cat=$2&id=$3 [L]
    RewriteRule ^international-product/(.*)/(.*)/(.*) international-product-details.php?cid=$1&cat=$2&id=$3 [L]

    RewriteRule ^product/(.*)/(.*)/(.*)/ product-details.php?cat=$1&alias=$2&id=$3 [L]
    RewriteRule ^product/(.*)/(.*)/(.*) product-details.php?cat=$1&alias=$2&id=$3 [L]

    RewriteRule ^search/(.*)/(.*)/(.*)/ productsearch.php?keyword=$1&cat=$2&pageno=$3 [L]
    RewriteRule ^search/(.*)/(.*)(.*)/ productsearch.php?keyword=$1&cat=$2&pageno=$3 [L]

    RewriteRule ^international/(.*)/ international.php?cid=$1 [L]
    RewriteRule ^international/(.*) international.php?cid=$1 [L] 
```

但除了下面的代码没有任何工作请帮我更新代码。

```
 RewriteRule ^product/(.*)/(.*)/(.*)/ product-details.php?cat=$1&alias=$2&id=$3 [L]
  RewriteRule ^product/(.*)/(.*)/(.*) product-details.php?cat=$1&alias=$2&id=$3 [L] 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-03T19:35:21.333

抱歉回复晚了，今天我也遇到了同样的问题，我有一个解决方案，我想和你分享。

不知道它是否正确，因为我是 PHP 的初学者。

```
products.php?id=15&pageno=2 and I require products/15/2 
```

我收到错误是因为我发现我的页面名称之一也是 products.php，当我将其更改`products/15/2`为`product-detail/15/2`并且它工作正常！！！

所以这意味着不要在 htaccess 规则中声明已经是页面名称的关键字。我认同 ：）

谢谢

# c# - AutomationElement 获取真实类型

> ID：12489824
> 
> 赞同：2
> 
> 时间：2012-09-19T06:53:37.973
> 
> 标签：c#, wpf, .net-4.0, ui-automation

我如何获得真实`Type`的`AutomationElement`（例如`TextEdit`等等）？`GetType()`返回`System.Windows.Automation.AutomationElement`。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-19T07:29:32.797

您可以通过`AutomationElement.Current.ControlType`属性获取自动化元素的类型。

```
ControlType controlType = AutomationElement.Current.ControlType; 
```

有关详细信息，请参阅[MSDN](http://msdn.microsoft.com/en-us/library/system.windows.automation.automationelement.automationelementinformation.controltype.aspx)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-04-29T16:31:15.473

我尝试并发现以下工作：

```
DirectCast(<AutoElementName>.GetCurrentPropertyValue(AutomationElement.ControlTypeProperty), ControlType).LocalizedControlType 
```

# authentication - Symfony2：如何在控制器中检索 UserChecker？

> ID：12489826
> 
> 赞同：1
> 
> 时间：2012-09-19T06:53:57.327
> 
> 标签：authentication, symfony, symfony-2.1

**Symfony2**中的[**UserChecker**](http://api.symfony.com/2.1/Symfony/Component/Security/Core/User/UserChecker.html)是用户认证的必要类。

 **假设您需要在控制器内对用户进行身份验证，您应该定义如下函数：

```
protected function authenticateUser(User $user) {                
   $user_checker = ...//Get here the user checker
    try {
        $user_checker->checkPostAuth($user);
    } catch (AccountStatusException $e) {
        return;
    }

    $providerKey = $this->container->getParameter('firewall_name');
    $token = new UsernamePasswordToken($user, null, $providerKey, $user->getRoles());
    $this->container->get('security.context')->setToken($token);   
} 
```

请注意，`UserChecker`在 Symfony2 中定义为非公共服务：

```
 <service id="security.user_checker" class="%security.user_checker.class%" public="false" /> 
```

如何进入`UserChecker`控制器？

提前致谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-19T08:22:30.383

您可以使用别名“获取”私人服务。看：

[http://symfony.com/doc/current/components/dependency_injection/advanced.html](http://symfony.com/doc/current/components/dependency_injection/advanced.html)**

# java - form:select 和 form:options 有什么区别

> ID：12489828
> 
> 赞同：1
> 
> 时间：2012-09-19T06:54:06.760
> 
> 标签：java, spring, spring-mvc, taglib

我有一个幼稚的问题，我无法从生成的 html 中看到两者之间的区别，这两种方法都会产生相同的结果？为什么我们需要 form:options 呢？一个例子会很有帮助。春季医生。这里没有解释这两种方法，也许它与基本的html结构有关？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-19T07:06:54.787

这是一个很好的[例子](http://www.dzone.com/tutorials/java/spring/spring-form-tags-1.html)

本质上，form:options 标签让您可以选择呈现您想要在下拉列表中显示的列表的一部分。拥有 form:select 标签可以灵活地在其中包含选项和选项标签的组合。这是我上面给出的链接的代码片段。

```
<form:select path="country"> 
 <form:option value="0" label="Select" /> 
 <form:options items="${countryList}" itemValue="countryId" itemLabel="countryName" /> 
</form:select> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-19T09:39:00.520

在 spring mvc 标签库`form:select`中表示一个简单的 HTML 选择，同时`form:options`允许您从包含在集合中的项目中填充选择，而不是使用多个`form:option`标签来完成。

对于`form:select`您必须设置模型类的对应路径/属性。

对于`form:options`您必须设置将填充选择的列表。

为您的标签设置路径，您`form:select`将自动选择与您的属性值相对应的选项。

# c# - 如何将按钮添加到功能区（C#）上预先存在的选项卡？

> ID：12489832
> 
> 赞同：11
> 
> 时间：2012-09-19T06:54:18.220
> 
> 标签：c#, ribbon, outlook-addin, outlook-2010

我已经成功创建了一个新选项卡并将其放在预先存在的选项卡旁边。然后我意识到我只有一个按钮，所以（现在）将它放在主页选项卡上更有意义。但并没有真正让它发挥作用。

我试图按照指南和步行槽。我得到了一个 XML，并将其 XML 更改为以下内容。

```
<tabs>
  <!--<tab idMso="TabAddIns">-->
  <tab idMso="TabHome">
    <group id="group1" label="Hazaa!">
      <box id="box1" />
    </group>
  </tab>
</tabs> 
```

当我运行该项目时，我的 UI 没有任何变化，所以我猜是：

1.  根本不读取 XML，
2.  名称`TabHome`错误（至少对于 Outlook 2010），
3.  属性`idMso`错误（至少对于 Outlook 2010）或
4.  上述任何一项的其他/组合。

我可以做些什么来改变色带？（展望 2010/VSTO/VS 2010/.NET 4）。

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-09-19T11:42:52.190

该属性`idMso`是正确的，但您想要的选项卡的 id 是`TabMail`. 您可以在 MSDN 上找到一[组包含 Office 2010 控件 ID 列表的 Excel 文件。](http://www.microsoft.com/en-us/download/details.aspx?id=6627)然后，如对该问题的评论中所述，您的示例 XML 可能缺少 customUI 和功能区标签。（免责声明：我没有在 Outlook 中自定义功能区，只有 Word、Excel 和 PowerPoint，但我猜它们的工作方式相同？）

尝试这样的事情：

```
<?xml version="1.0" encoding="UTF-8"?>
<customUI xmlns="http://schemas.microsoft.com/office/2009/07/customui">
    <ribbon>
        <tabs>
            <tab idMso="TabMail">
                <group id="group1" label="Hazaa!">
                    <box id="box1" />
                </group>
            </tab>
        </tabs>
    </ribbon>
</customUI> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-12-01T02:39:33.520

如果您只想在现有功能区中显示一个按钮，请在 Visual Studio 中，此处为[https://msdn.microsoft.com/en-us/library/bb608628.aspx#Anchor_2](https://msdn.microsoft.com/en-us/library/bb608628.aspx#Anchor_2)

在您的情况下，将**OfficeId**更改为**TabMail**

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2019-07-25T14:15:16.510

对于那些因其他答案似乎都不起作用而感到沮丧的人，请转到功能区本身的属性并将其设置`RibbonType`为`Microsoft.Outlook.Explorer`（或您希望在其中查看控件的任何上下文）。这是一个很容易被忽视的关键步骤。

然后按照其他说明设置`OfficeId`为`TabMail`。

此外，可以在此处找到 Office 2016 Fluent Control Identifiers：[https ://www.microsoft.com/en-us/download/confirmation.aspx?id=50745](https://www.microsoft.com/en-us/download/confirmation.aspx?id=50745)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-06-19T21:26:24.513

已编辑。对不起，给了一个dnn链接。你想要办公室，你想要 c#。

这是 VBA 中的 StackOverflow 答案... [如何获取功能区自定义选项卡 ID？](https://stackoverflow.com/questions/615482/how-to-get-ribbon-custom-tabs-ids)

```
AccessibleChildren _
            Lib "oleacc.dll" _
                (ByVal paccContainer As Object, _
                 ByVal iChildStart As Long, _
                 ByVal cChildren As Long, _
                       rgvarChildren As Variant, _
                       pcObtained As Long) _
            As Long 
```

在 C# 中翻译为

```
[Lib "oleacc.dll"]
Long AccessibleChildren(object paccContainer, 
                        long iChildStart, 
                        long cChildren, 
                        object rgvarChildren, 
                        long pcObtained)... 
```

我从未尝试过，所以不确定它是否有效。

从所有其他文档中，您似乎只需获取功能区对象，并在其中迭代（使用 foreach）所有子对象

# javascript - 为可观察对象设置回调函数

> ID：12489835
> 
> 赞同：12
> 
> 时间：2012-09-19T06:54:53.617
> 
> 标签：javascript, knockout.js, boilerplatejs

我正在尝试将 knockoutJS 变量集成到 Jquery-UI，因此要在可观察到的淘汰赛发生变化时更新我的​​ UI，我需要一种在可观察到的变化时调用函数的方法。我想设置我自己的回调函数，所以如果我的可观察变量发生变化，这个回调函数需要被自动调用。

* * *

## 回答 #1

> 赞同：36
> 
> 时间：2012-09-19T08:01:46.700

你可以在 observable 上调用*subscribe*函数，给它一个在 observable 改变时调用的回调函数。

```
<input data-bind="value: val"/>

var Model = function() {
  var self = this;
  this.val = ko.observable();  
  this.val.subscribe(function () {
        alert(self.val());                
  });
};
ko.applyBindings(new Model()); 
```

# php - php 正则表达式函数，无法转换 JavaScript 参数

> ID：12489849
> 
> 赞同：0
> 
> 时间：2012-09-19T06:55:46.293
> 
> 标签：php, javascript, jquery, ajax, regex

我为一个函数创建了一个简单的测试，以从 youtube url 获取视频 ID 并将其回显。它可以正常工作，但是当我在混合中引入 jQuery 代码时，我收到了这个错误`NS_ERROR_XPC_BAD_CONVERT_JS: Could not convert JavaScript argument`。错误是在第 7071 行注释 jquery.js 文件。我不知道该怎么做或究竟是什么原因造成的。代码如下。

第一个文件

```
<script src="http://code.jquery.com/jquery-latest.js"></script>

<input type="text" id="url" />

<input type="button" id="press" value="click" />

<div id="return"></div>

<script type="text/javascript" >

    $('#press').click(function () {

$('#url').val();

    $.post('ajax_youtube.php', {url:url}, function(data) {

        $('#return').html(data);

    }); 

    });

</script> 
```

这是`ajax_youtube.php`文件

```
<?php

function get_youtube_url($text) {

$text = preg_replace('~https?://(?:[0-9A-Z-]+\.)?(?:youtu\.be/| youtube\.com\S*[^\w
\-\s])([\w\-]{11})(?=[^\w\-]|$)(?![?=&+%\w]*(?:[\'"][^<>]*>| </a>))[?=&+%\w-]*~ix', 
'$1', $text);

echo $text;

}

$url = $_POST['url'];

get_youtube_url($url);

?> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-19T07:14:43.490

你忘了分配`url`一个值，`$('#url').val();`应该是`var url = $('#url').val();`

# android - 为什么android需要使用元数据？

> ID：12489851
> 
> 赞同：4
> 
> 时间：2012-09-19T06:55:58.100
> 
> 标签：android, metadata

我发现一些 AndroidManifest.xml 有一些 .

像这样：

```
<meta-data android:name="zoo" android:value="@string/kangaroo" /> 
```

安卓中的代码：

```
ApplicationInfo ai = getPackageManager().getApplicationInfo(activity.getPackageName(), PackageManager.GET_META_DATA);
String zoo = ai.metaData.getString("zoo"); 
```

我可以在 string.xml 中定义一个字符串值，并且很容易在代码中得到它。

和 string.xml 有什么不同？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-19T07:26:13.997

这是一个不好的例子。看起来该值是应用程序***使用***的数据。清单是存储***有关***应用程序的元数据的正确位置。在这里放置应用程序使用的字符串数据（即消费）也是不可本地化的。

在我的一个应用程序中，我在库中有静态内容。该库有自己的版本号，并在“关于”活动中显示给用户。我可以将其存储为代码中的字符串常量，但使用清单元数据更合乎逻辑且可维护，其中所有应用程序版本信息与 SDK 版本等一起存储。

总而言之，在您给出的示例中，@string/kangaroo 值应该在 strings.xml 中。

# java - 如何防止键盘和菜单同时显示？

> ID：12489854
> 
> 赞同：3
> 
> 时间：2012-09-19T06:56:05.153
> 
> 标签：java, android, android-softkeyboard, android-menu, android-searchmanager

这是我的应用程序的屏幕截图。单击搜索框时，软键盘会自动弹出，这很好，但是，如果我还按下“菜单”按钮，则菜单会出现在软键盘的顶部。

如何显示菜单但`SearchView`如果它在焦点上折叠并隐藏软键盘。我可能需要在`onPrepareOptionsMenu`my 的方法中检查并做一些事情`Activity`，对吧？

它不会对我造成任何真正的伤害，但是当这种情况发生时，它对用户来说似乎是一个丑陋的实现。

![在此处输入图像描述](../Images/4331b8d0424417c8ddde9c2b9ab966a4.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-25T14:13:11.207

`getCurrentFocus()`您可以从 searchView 调用该方法或`onWindowFocusChanged(boolean hasWindowFocus)`在您的活动中覆盖。

如果该视图是搜索视图，那么您可以通过以下方式关闭键盘：

```
InputMethodManager imm = (InputMethodManager)getSystemService(
  Context.INPUT_METHOD_SERVICE);
imm.hideSoftInputFromWindow(m_edittext.getWindowToken(), 0); 
```

# c# - 如何将参数作为对象传递以调用 WCF DataContract

> ID：12489864
> 
> 赞同：0
> 
> 时间：2012-09-19T06:57:14.177
> 
> 标签：c#, asp.net, wcf, wcf-binding, wcf-client

l **- 这是我的 WCFSeviceLibrary 接口类**

在这个接口类 IService1 中将 OperationContract 声明为一个 ObjectClass 类型的方法。

并为 Set Type 创建此 ObjectClass 类。作为甘尼可。

```
 public interface IService1
        {               
             [OperationContract]
             ObjectClass SetDataUsingDataContract(ObjectClass data); 
        }
    [DataContract]
        public class ObjectClass
        {
            string name;
            string address;
            string emailid;
            double contactno;
            [DataMember]
            public string Name
            {
                set { name = value; }
                get { return name; }
            }

            [DataMember]
            public string Address
            {
                set { address = value; }
                get { return address; }
            }

            [DataMember]
            public string EmailId
            {
                set { emailid = value; }
                get { return emailid; }
            }

            [DataMember]
            public double ContactNO
            {
                set { contactno = value; }
                get { return contactno; }
            }

        } 
```

此类中的 Service.cs 文件

```
public class Service1 : IService1
    {
 public ObjectClass SetDataUsingDataContract(ObjectClass data)
        {

            SqlConnection conn = new SqlConnection(@"Data Source=.\SQLEXPRESS;AttachDbFilename=D:\Pavan\WCF_Practice\WcfServiceSample\WebApplicationvc\App_Data\WCFDB.mdf;Integrated Security=True;User Instance=True");
            conn.Open();
            SqlCommand cmd = new SqlCommand("INSERT INTO WCFTBL (Name, Address, ContactNo, EmailID) VALUES ('"+data.Name+"','"+data.Address+"','"+data.ContactNO+"','"+data.EmailId+"')",conn);
            cmd.ExecuteNonQuery();
            conn.Close();
            return data;
        }
} 
```

这是 WebApplication 页面的 My Btn_Click 类

```
 protected void Add_Click(object sender, EventArgs e)
        {
            ServiceReference1.Service1Client srv = new ServiceReference1.Service1Client();

            srv.SetDataUsingDataContract();

} 
```

我不知道如何设置 srv.SetDataUsingDataContract() 方法的参数。

**应用配置文件**

```
<?xml version="1.0" encoding="utf-8" ?>
<configuration>
  <system.web>
    <compilation debug="true" />
  </system.web>
  <!-- When deploying the service library project, the content of the config file must be added to the host's 
  app.config file. System.Configuration does not support config files for libraries. -->
  <system.serviceModel>
    <services>
      <service name="WcfServiceLibraryforADD.Service1" behaviorConfiguration="WcfServiceLibraryforADD.Service1Behavior">
        <host>
          <baseAddresses>
            <add baseAddress = "http://localhost:8731/Design_Time_Addresses/WcfServiceLibraryforADD/Service1/" />
          </baseAddresses>
        </host>
        <!-- Service Endpoints -->
        <!-- Unless fully qualified, address is relative to base address supplied above -->
        <endpoint address ="" binding="wsHttpBinding" contract="WcfServiceLibraryforADD.IService1">
          <!-- 
              Upon deployment, the following identity element should be removed or replaced to reflect the 
              identity under which the deployed service runs.  If removed, WCF will infer an appropriate identity 
              automatically.
          -->
          <identity>
            <dns value="localhost"/>
          </identity>
        </endpoint>
        <!-- Metadata Endpoints -->
        <!-- The Metadata Exchange endpoint is used by the service to describe itself to clients. -->
        <!-- This endpoint does not use a secure binding and should be secured or removed before deployment -->
        <endpoint address="mex" binding="mexHttpBinding" contract="IMetadataExchange"/>

      </service>
    </services>
    <behaviors>
      <serviceBehaviors>
        <behavior name="WcfServiceLibraryforADD.Service1Behavior">
          <!-- To avoid disclosing metadata information, 
          set the value below to false and remove the metadata endpoint above before deployment -->
          <serviceMetadata httpGetEnabled="True"/>
          <!-- To receive exception details in faults for debugging purposes, 
          set the value below to true.  Set to false before deployment 
          to avoid disclosing exception information -->
          <serviceDebug includeExceptionDetailInFaults="False" />
        </behavior>
      </serviceBehaviors>
    </behaviors>
  </system.serviceModel>
</configuration> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-19T07:07:18.687

创建一个`ObjectClass`实例并将其作为参数传递给`SetDataUsingDataContract`. 例如：

```
protected void Add_Click(object sender, EventArgs e)
{
     ServiceReference1.Service1Client srv = new ServiceReference1.Service1Client();

     ObjectClass objectClass = new ObjectClass();
     // Set properties 
     srv.SetDataUsingDataContract(objectClass);
} 
```

客户端生成代码应该已经创建了一个`ObjectClass`类供调用者引用。

# wcf - WCF：如何在 WSDL 文件的定义部分写入属性？

> ID：12489865
> 
> 赞同：1
> 
> 时间：2012-09-19T06:57:15.360
> 
> 标签：wcf, wsdl, asmx

我正在尝试从头开始以编程方式生成 WSDL 文件，它几乎可以正常工作。我不知道该怎么做的一点是在定义部分编写我自己的属性。我的意思是在 WSDL 文件的这一部分：

```
<wsdl:definitions xmlns:soap="http://schemas.xmlsoap.org/wsdl/soap/" xmlns:tm="http://microsoft.com/wsdl/mime/textMatching/"...> 
```

我使用以下 C# 代码：

```
System.Web.Services.Description.ServiceDescription wsdl = new System.Web.Services.Description.ServiceDescription();

System.Xml.Schema.XmlSchema xmlSchema = new System.Xml.Schema.XmlSchema();
xmlSchema.SourceUri = "PO.xsd";
System.Xml.Schema.XmlSchemaImport xmlSchemaImport = new System.Xml.Schema.XmlSchemaImport();
xmlSchemaImport.Namespace = "http://tempuri.org/PO";
xmlSchemaImport.SchemaLocation = "PO.xsd";
xmlSchema.Includes.Add(xmlSchemaImport);
wsdl.Types.Schemas.Add(xmlSchema);

...

wsdl.Write("POService.wsdl"); 
```

它会发生什么？定义部分中的属性是由代码自动生成的，但我需要在那里添加一些自定义结构。

有人知道该怎么做吗？

先感谢您。

戈兰

# localization - 错误“无法对 System.DateTime 和 System.String 执行 '=' 操作。” 更改语言环境后

> ID：12489872
> 
> 赞同：0
> 
> 时间：2012-09-19T06:57:53.757
> 
> 标签：localization, datatable

我们有一个基于 Windows 的应用程序，我的客户也需要使用意大利语工作。当我将区域设置更改为意大利并运行程序时，我收到以下错误消息。“无法对 System.DateTime 和 System.String 执行 '=' 操作。” 谁可以帮我这个事？代码如下。

```
 DataTable dt = new DataTable();
      dt.Columns.Add("Date",Type.GetType("System.DateTime"));

      TimeSpan t = new TimeSpan(1, 0, 0);

        DateTime d = System.DateTime.Now;
        for (int i = 0; i < 100; i++)
        {
            DataRow dr = dt.NewRow();
            dr["Date"] = d.ToShortDateString();
            dt.Rows.Add(dr);
            d = d.AddDays(1.0);
        }

        DataRow[] dataRowArray = dt.Select("Date ="'8/31/2012'"); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-19T07:09:08.417

首先，不应该`dt.Select("Date ='8/31/2012'");`吗？（请注意，我删除了一个`"`）

第二，从哪里来`"8/31/2012"`？这在意大利不是一个有效的日期，所以你需要把它弄对`("31/8/2012")`，然后它应该可以工作。

换句话说，如果它来自数据库，那么您必须在进行比较之前进行语言环境转换。

# c# - 调用 DBSet 时如何使 EF Code First 加载“ICollection”属性 .查找（ID）

> ID：12489878
> 
> 赞同：2
> 
> 时间：2012-09-19T06:58:26.323
> 
> 标签：c#, .net, entity-framework

当我搜索这样的“列表”时， `DbSet<T>.Where(predicate)`我可以添加`.Include("xxx")`，但这不适用于单个对象。

调用时我不知道如何使 EF 加载`virtual` `Icollection<T>`属性`DbSet<T>.Find(id)`

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-19T07:08:03.213

使用当前的 API，您无法使用[Find](http://msdn.microsoft.com/en-us/library/system.data.entity.dbextensions.load%28v=vs.103%29.aspx)方法进行预加载：

来自[Entity Framework 5 的性能注意事项](http://msdn.microsoft.com/en-us/data/hh949853.aspx)

> 使用 Find 方法时必须考虑的是：
> 
> ...
> 
> 此外，请记住Find 仅返回您正在查找的实体，并且如果它们尚未在对象缓存中**，它不会自动加载其关联实体。**如果您需要检索关联的实体，您可以使用带有预加载的按键查询。

所以最接近的是你能得到的是查询，例如使用`SingleOrDefault`

```
dbSet.Include("xxx").SingleOrDefault(i => i.Id == id) 
```

或者您可以在查找后显式[加载相关实体](http://msdn.microsoft.com/en-US/data/jj574232)：

```
using (var context = new Db())
{
    var entity = context.SomeSet.Find(id);

    context.Entry(entity).Collection(p => p.SomeCollection).Load();
} 
```

# c# - Microsoft Accelerator 比 C# 中的串行实现慢

> ID：12489879
> 
> 赞同：3
> 
> 时间：2012-09-19T06:58:29.510
> 
> 标签：c#, gpu, simulation, gpgpu, accelerator

我在业余时间用 C# 编写了这个时髦的小 2D N 体模拟。它在串行实现中运行良好，以良好的帧速率运行到大约 1000 个物体，此时它开始滞后。

我修改了算法以在单独的块中进行位置和速度更新，以在 CPU 的单独内核上运行，我注意到性能有一个小的改进。

请注意，很多时间都花在了实际的数学运算上，也有一点时间花在了场景的实际绘制上。

我刚刚下载了 Microsoft Accelerator V2 库并从头开始重新编写了整个代码以使用它。它像以前一样工作，但速度明显变慢！以前我可以得到近 1000 分才能顺利运行，而现在我在 Accelerator 下只能得到大约 10 分。

[这](http://pastebin.com/GUwEU3Kd)是我的代码。这是我第一次用 Accelerator 做任何事情，所以很可能我搞砸了。

之所以叫这门课，是`Test`因为这是我的第一次测试。`n`构造函数只是为物体的 x 和 y 位置、它们的 x 和 y 速度以及它们的质量创建长度数组。`dec`只是一个阻尼因子，因此舍入误差会使其内爆而不是爆炸，并且`g`只是我现在要离开的引力常数`1.0f`。

`Tick()`是执行所有更新的函数。我首先考虑任何给定点 i 的所有点，找到半径，在其他点的方向上构造一个单位向量，通过减速度和重力常数缩放该单位向量，然后求和到 x 和 y 速度更新对于这一点。

然后我更新所有速度和所有位置，并转换回`float[]`s。

正如我所说，代码在技术上确实有效。结果与我的串行实现相同，但速度大幅下降。

有什么想法我可能做错了吗？

我有一种感觉，它可能是第 85 行和第 86 行——我将点 i 的 x 和 y 速度更新相加，并将其存储到我的浮点数组中，这意味着我需要调用`Target.ToArray1D()[0]`以获取总和值。

我这样做的原因是我首先更新所有点，然后更新点，然后根据速度应用位置更改。

即我不希望在时间*t + 1*我用时间 t 的其余点更新点*0* *，*然后在时间*t*用其余点再次更新点*1* ，但用新的 t 更新点*0* *+ 1*。如果这是有道理的。

```
public void Tick()
{
    FPA fxPos = new FPA(xPos);
    FPA fyPos = new FPA(yPos);
    FPA fxVel = new FPA(xVel);
    FPA fyVel = new FPA(yVel);
    FPA fMass = new FPA(mass);

    float[] xUpd = new float[n]; // x-update for velocity
    float[] yUpd = new float[n]; // y-update for velocity

    for (int i = 0; i < n; i++)
    {
        // x- and y-pos about point i:
        FPA ixPos = PA.Subtract(fxPos, xPos[i]);
        FPA iyPos = PA.Subtract(fyPos, yPos[i]);

        // radius from point i:
        FPA iRad = PA.Sqrt(PA.Add(PA.Multiply(ixPos, ixPos), PA.Multiply(iyPos, iyPos)));

        // x- and y-pos are now unit vectors:
        ixPos = PA.Divide(ixPos, iRad);
        iyPos = PA.Divide(iyPos, iRad);

        // vectors are now scaled by mass:
        ixPos = PA.Multiply(fMass, ixPos);
        iyPos = PA.Multiply(fMass, iyPos);

        // vectors are now scaled by G and deceleration:
        ixPos = PA.Multiply(dec * g, ixPos);
        iyPos = PA.Multiply(dec * g, iyPos);

        // sum to get ith update value:
        xUpd[i] = target.ToArray1D(PA.Sum(ixPos))[0];
        yUpd[i] = target.ToArray1D(PA.Sum(iyPos))[0];
    }

    FPA fxUpd = new FPA(xUpd);
    FPA fyUpd = new FPA(yUpd);

    // update velocities:
    fxVel = PA.Add(fxUpd, fxVel);
    fyVel = PA.Add(fyUpd, fyVel);

    // update positions:
    fxPos = PA.Add(fxVel, fxPos);
    fyPos = PA.Add(fyVel, fyPos);

    xPos = target.ToArray1D(fxPos);
    yPos = target.ToArray1D(fyPos);
    xVel = target.ToArray1D(fxVel);
    yVel = target.ToArray1D(fyVel);
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-19T07:25:17.833

您应该重新考虑您的逻辑以真正使用并行计算。你仍然在一个时间点工作。要利用库的优势，您应该考虑对整个元素数组执行一项操作。

# javascript - gwt-google-apis gwt-map-3.8.0-pre throws JavaScriptException 'map' is not defined

> ID：12489880
> 
> 赞同：0
> 
> 时间：2012-09-19T06:58:35.350
> 
> 标签：javascript, google-maps, gwt, google-maps-api-3

我认为这是 google map 的 GWT 绑定的 map 3.8.0 预发布版本中的一个错误，但在我走这条路之前，我想我会和你们一起核实一下。当我创建地图然后尝试将新创建的地图面板/小部件添加到包含面板中时，出现异常。如果我在包含现有 html div 的面板中创建地图，它会毫无例外地显示，但无论哪种方式，如果它在 HTML 中有一个 div 或没有，如果我尝试将它添加到任何其他面板，它都会引发异常。

它通常抛出的异常是：

```
gwt-google-apis gwt-map-3.8.0-pre throws JavaScriptException 'map' is not defined. 
```

我还有其他例外，但除非它们变得相关，否则让我们暂时忽略它们。

这是我获得图书馆的链接： [http ://code.google.com/p/gwt-google-apis/downloads/detail?name=gwt-maps-3.8.0-pre1.zip&can=2&q=](http://gwt-maps-3.8.0-pre1.zip)

顺便说一句，我使用 java 1.5 编译器重新编译了原始源代码，但我没有更改任何内容。

作为背景，我正在移植一个为谷歌地图 v2 到 v3 编写的应用程序。在当前的生产版本中，MapWidget 对象被添加到一个 VerticalPanel（即 html 表）中，该对象被添加到另一个 VerticalPanel 中，......最终通过门户提供服务。如果我必须更改此结构，这将是更广泛的重写，因此我将不胜感激您提供的任何见解。

我在主题上尝试了许多变体，结果相似。很多时候地图会显示，但显示为灰色，然后如果您通过控件与地图交互，它通常会自行排序，有时不会。它是 IE-8 还是 firefox 似乎并不重要。

我的代码如下所示：

```
 LatLng myLatLng = LatLng.create(39.571993, -104.998184);
    MapOptions myOptions = MapOptions.create();
    myOptions.setZoom(16.5);
    myOptions.setCenter(myLatLng);
    myOptions.setMapTypeId(MapTypeId.SATELLITE);
    //com.google.gwt.dom.client.Element mapDiv = Document.get().getElementById("map_canvas");
    RootPanel root = RootPanel.get("MAP1_NetworkMapContainer");
    //HTMLPanel mapPanel = HTMLPanel.wrap(mapDiv);
    //mapPanel.setHeight("100%");
    //map = GoogleMap.create(mapPanel.getElement(), options);

    try {
        root.add(mapPanel);
    } catch (Exception e) {
        Log.error("Received Exception ", e);
        String  error = e.toString();
    } 
```

...作为一个小部件，也就是它在 3.0.2 的源代码中完成的方式

```
public class MapWidget extends Widget {
    final private static String EXCEPTION_NOT_ATTACHED
        = "Map widget must be attached to window's document.";
    private GoogleMap map;

    public MapWidget(MapOptions options) {
      setElement(Document.get().createDivElement());
      map = GoogleMap.create(getElement(), options);
    } 
```

... 作为 SimplePanel 的扩展

```
public class MapPanel extends SimplePanel {
    final private static String EXCEPTION_NOT_ATTACHED
        = "Map Panel must be attached to window's document.";
    private GoogleMap map;

    public MapPanel(MapOptions options) {
      map = GoogleMap.create(getElement(), options);
    } 
```

结果总是一样的。如果我的 GWT 小部件在 HTML 中有一个 div 的元素 id，它会显示 OK，但如果我尝试添加创建的 div 或 html div 的结果，然后将其附加到根面板，则会引发异常。它是根面板还是任何其他类型的面板似乎并不重要。我将 mapPanel 添加到其中。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-02T23:00:29.170

我已经开始使用这个库：对于我所做的，它有效。

这是我的做法：

```
public class MyMapWidget extends Composite {

  interface MyMapWidgetUiBinder
      extends UiBinder<Widget, MyMapWidget> {}

  private static MyMapWidgetUiBinder uiBinder = 
      GWT.create(MyMapWidgetUiBinder.class);

  @UiField FlowPanel mapContainer;   

  private GoogleMap map;  

  ...

  public MyMapWidget() {

       initWidget(uiBinder.createAndBindUi(this));

       MapOptions opts = MapOptions.create();

       opts.setScaleControl(true);
       // add your map options
  ...
       opts.setCenter(LatLng.create(44.1, 0.2);
       opts.setZoom(8.0);

       map = GoogleMap.create(mapContainer.getElement(), opts);

  ...
  } 
```

在相应的 UiBinder XML 文件中，我有

```
<g:FlowPanel ui:field="mapContainer" width="500px" height="350px" /> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-02T21:42:49.797

我永远无法让它与预发行版 1 绑定一起使用。我切换到此处找到的第 3 方绑定：[Google Maps V3](http://c.gwt-examples.com/api/google-maps-v3)

在这个问题被搁置的 2.5 年里，以及被迫退出 v2 的最后期限迫在眉睫，我怀疑 GWT 团队的解决方案即将到来。

我在 GWT 网站上创建了一个问题，您可能想在那里查看更新，或者如果这对您有影响，请投票支持它。[第 504 期](http://code.google.com/p/gwt-google-apis/issues/detail?id=504)

# mysql - 检查每行的id是否作为id存在于另一个表中

> ID：12489882
> 
> 赞同：1
> 
> 时间：2012-09-19T06:58:39.507
> 
> 标签：mysql, sql, database

现在我有三个mysql表。`people`我必须在一张桌子上列出所有的人。在此旁边它显示有兴趣，这是它的 sql。

```
SELECT *,(
           SELECT GROUP_CONCAT(interest_id SEPARATOR ",")
           FROM cat_people_interests
           WHERE person_id = people.id
         ) AS cat_interests
FROM people
WHERE id IN 
(
    SELECT person_id
    FROM cat_interests
)
ORDER BY lastname, firstname); 
```

架构

```
`people` { int:id, varchar:name }
`cat_people_interests` { int:interest_id, int:person_id }
`cat_interests` { int:id, varchar:name }
`alternate_meow_pull` { int:person_id, int:meow_id, int:dataetc, int:dataetc2 } 
```

所以这让我有能力在那里提取名字和所有兴趣。

如果一个人的 id 作为 person_id 在另一个表 (alternate_meow_pull) 中存在，我如何更改或添加到此以检查每行？我个人会做的只是检查每一行的 mysql 查询，但我确信有一种更快、更简洁的方法。顺便说一句，无论这个人是否存在于alternate_meow_pull 中，我都想得到结果。

因此，当我遍历这个结果时，我希望能够打印姓名、id、与人相关的所有兴趣，以及恰好在alternate_meow_pull 中与人相关的任何数据。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-19T07:29:14.973

不应该是这样吗？

```
SELECT  a.name, 
        GROUP_CONCAT(b.name) InterestList
FROM    people  a
        INNER JOIN cat_people_interest c
            ON a.ID = c.person_ID
        INNER JOIN cat_interests b
            ON b.id = c.interest_ID 
        INNER JOIN alternate_meow_pull d
            ON a.person_ID = d.person_id
WHERE   b.interest_id = '$_POST['showinterest_id']'
GROUP BY a.name 
```

`ID`只会显示他们所在的人的姓名`alternate_meow_pull`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-19T07:39:23.760

```
 SELECT people.id, people.name
 FROM people,cat_people_interests as c,cat_interests as i, alternate_meow_pull as m
 WHERE people.id = c.person_id or people.id = i.id or people.id = m.person_id 
```

# xamarin.ios - Xamarin.Mobile 相机图像流

> ID：12489886
> 
> 赞同：2
> 
> 时间：2012-09-19T06:59:20.487
> 
> 标签：xamarin.ios, xamarin.android, xamarin, xamarin.mobile

我正在尝试使用新的[http://xamarin.com/mobileapi](http://xamarin.com/mobileapi)并且（虽然很棒）我找不到我需要的功能 - 我需要访问相机流并对其进行采样。使用该`MediaPicker`课程，我可以获得视频和图像，但我需要分析实时视频流。

我在这里想念什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-19T08:26:33.280

目前 Xamarin.Mobile 不给你处理实时视频流的能力，你必须使用每个平台提供的 API 来完成。

如果你认为应该将增强请求添加到 Xamarin.Mobile，则可以提交[增强请求。](https://bugzilla.xamarin.com/enter_bug.cgi?product=Xamarin%20Mobile%20API%20Preview)

# html - 在 div 中加载整个页面

> ID：12489887
> 
> 赞同：0
> 
> 时间：2012-09-19T06:59:49.987
> 
> 标签：html, hyperlink, webpage

我有 5 个网站，每个网站都有自己的 URL。我想创建一个站点，该站点将从这些网站获取主 div 并将其显示在指定的 div 中。我在哪里可以开始寻找制作这样的网站？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-19T07:06:22.943

```
Just point an IFrame at each site address.    

<!DOCTYPE html>    
<html>
    <head></head>
    <body>
        <div>
        <iframe src="http://www.site1.com"></iframe>
        </div>
    </body>
 </html> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-19T07:08:18.323

如果你使用 jQuery，你可以使用 .load() 函数。它可以采用 url 和可选的 css 选择器参数并将其加载到例如 div 中：

$("#yourdiv").load("http://url .content");

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-19T09:47:36.023

您可以在 javacript 函数上创建，该函数将执行显示和创建 div 的功能。

现在将该函数放在脚本标记中并制作一个嵌入代码……然后将该嵌入代码用于您希望显示该 div 的所有其他网站。那时，该功能将从您自己站点上的第一个站点调用。

或者

显示 div 的第二种方法使用网络服务，它从一个地方获取数据并在您的网站上播放

# java - JdbcTemplate 查询过滤

> ID：12489892
> 
> 赞同：0
> 
> 时间：2012-09-19T07:00:38.437
> 
> 标签：java, spring, jdbc

是否有 Jdbc 标准一种通过`jdbcTemplate.query`by`offset`和过滤结果返回的方法`limit`？

还有一种简单的方法可以将`ResultSet`（由过滤查询返回，如上所示）转换为`List<Map<String,String>>`结果吗？`List`行值存储在哪里`Map`？行名称是映射键，行值是映射值。

或者有一种标准方法可以将行从 a 中取出`ResultSet`？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-19T07:13:16.920

看看 JdbcTemplate#setMaxRows(int)

[http://static.springsource.org/spring/docs/3.0.x/javadoc-api/org/springframework/jdbc/core/JdbcTemplate.html#setMaxRows%28int%29](http://static.springsource.org/spring/docs/3.0.x/javadoc-api/org/springframework/jdbc/core/JdbcTemplate.html#setMaxRows%28int%29)

这应该应用 LIMIT/TOP。

--

我不认为 OFFSET 定义得这么好，您可能需要将其硬塞到相关 SQL 方言中的 SQL 语句中。

--

要过滤 JDBC 驱动程序返回的行并可能构建到 Java 用户定义的对象类型中，请查看 ResultSetExtractor 和 RowMapper。

ResultSetExtractor 这用于使用 ResultSet#next() 迭代 ResultSet，这允许它根据业务逻辑进行过滤和跳过。此方法可能使用 RowMapper 类型来提取它想要保留的单行数据，或者它可以自己进行提取。

[http://static.springsource.org/spring/docs/3.0.x/api/org/springframework/jdbc/core/ResultSetExtractor.html](http://static.springsource.org/spring/docs/3.0.x/api/org/springframework/jdbc/core/ResultSetExtractor.html)

RowMapper 这用于将单行变成一些有效的，它可能只是一个列表。此方法使用 ResultSet#getWhatever(int)。

[http://static.springsource.org/spring/docs/3.0.x/javadoc-api/org/springframework/jdbc/core/RowMapper.html](http://static.springsource.org/spring/docs/3.0.x/javadoc-api/org/springframework/jdbc/core/RowMapper.html)

然后检查将 ResultSetExtractor 类型作为参数之一的 JdbcTemplate 方法。这可能是一个很好的例子：

http://static.springsource.org/spring/docs/3.0.x/javadoc-api/org/springframework/jdbc/core/JdbcTemplate.html#query%28java.lang.String,%20java.lang.Object[] ,%20org.springframework.jdbc.core.ResultSetExtractor%29

# ios - SCXML解析IOS

> ID：12489893
> 
> 赞同：2
> 
> 时间：2012-09-19T07:00:46.113
> 
> 标签：ios, parsing, scxml

有人对在 IOS 中编写 SCXML 解析器有任何想法吗？

我浏览了这个[http://www.w3.org/TR/scxml/](http://www.w3.org/TR/scxml/)并对 SCXML 有所了解。

我现在需要创建解析架构。

如果有人有想法，请告诉我。

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-27T18:19:05.220

SCXML 就是 XML，所以如果你只是想解析文档，你只需要一个 XML 解析器。本文很好地概述了适用于 iOS 的各种 XML 解析器：[http ://www.raywenderlich.com/553/how-to-chose-the-best-xml-parser-for-your-iphone-project](http://www.raywenderlich.com/553/how-to-chose-the-best-xml-parser-for-your-iphone-project)

另一方面，如果您需要将 SCXML 文档作为状态机执行，那么您需要一个 SCXML 引擎。[如果您使用UIWebView](http://developer.apple.com/library/ios/#documentation/uikit/reference/UIWebView_Class/Reference/Reference.html) /PhoneGap创建一个 iOS 应用程序，那么您可能会使用[SCION](https://github.com/jbeard4/SCION)作为您的 SCXML 引擎，因为它是由 JavaScript 实现的。免责声明：我是这个图书馆的作者。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-10-26T13:15:06.440

不确定可以在 iOS 上运行的 SCXML 解释器，但 uSCXML 可以为给定 SCXML 文件中隐含的控制流生成 ANSI-C，您只需为数据模型特定表达式提供回调。

```
$ uscxml-transform -tc -i your.machine.scxml -o your.machine.c 
```

[此处](https://github.com/tklab-tud/uscxml/blob/master/test/src/test-gen-c.cpp)给出了通过所有 IRP 测试的生成机器的脚手架。本质上，你只是

1.  `#include`生成的[C 文件](https://github.com/tklab-tud/uscxml/blob/master/test/src/test-gen-c.cpp#L20)，
2.  注册所需的[回调](https://github.com/tklab-tud/uscxml/blob/master/test/src/test-gen-c.cpp#L93)和
3.  [运行整台机器](https://github.com/tklab-tud/uscxml/blob/master/test/src/test-gen-c.cpp#L237)，直到无事可做。

示例脚手架更加精细，因为它将与所有 uSCXML 的数据模型一起使用，并支持多个调用的 SCXML 解释器。如果只需要一张状态图，上面三个步骤就足够了。[生成的源代码已注释，并且在此处](https://github.com/tklab-tud/uscxml/blob/legacy-1.0/test/src/test-c-inline.c)提供了一个精简的示例（来自我们的旧分支）（新的主分支尚不支持内联 SCXML）。

我们确实用我们的方法评估了 microstep(T) 的性能，而且速度快得离谱，主要是因为我们预先计算了`conflicts(T_1, T_2)`. 以推荐中附录 D 中的算法作为基准，我们在 IRP 测试中实现了 10-20 倍的加速（现在随时发布）。

如果这种方法看起来合适但给您带来麻烦，请随时在 github 上[发布问题](https://github.com/tklab-tud/uscxml/issues)，我很乐意添加更多信息。

**免责声明：**我是 uSCXML 维护者。

# dom - ie9 中的 xpath——一般问题

> ID：12489894
> 
> 赞同：0
> 
> 时间：2012-09-19T07:00:56.750
> 
> 标签：dom, xpath, namespaces, internet-explorer-9

我正在尝试在 IE9 中进行一些 xpath 查询，并取得了一些成功，但肯定只是在尝试，我无法清楚地弄清楚什么**可以**工作，什么不能。

我想做两件事：

1.  从加载的 xml 查询自定义命名空间中的元素
2.  从具有自定义命名空间属性的内联 svg 查询元素

第一点有效，使用以下代码：

```
doc.setProperty( "SelectionLanguage", "XPath" );
doc.setProperty( "SelectionNamespaces", xpathNsString );
svg = cloneSVGNode( doc.selectSingleNode( '//graphic/svg:svg' ) ); 
```

其中`doc`是对加载的 xml 的引用，xpathNsString 是：

```
"xmlns=\"http://www.w3.org/1999/xhtml\" " +
"xmlns:svg=\"http://www.w3.org/2000/svg\" "+
"xmlns:dc=\"http://purl.org/dc/elements/1.1/\" "+
"xmlns:cc=\"http://creativecommons.org/ns#\" "+
"xmlns:rdf=\"http://www.w3.org/1999/02/22-rdf-syntax-ns#\" "+
"xmlns:sodipodi=\"http://sodipodi.sourceforge.net/DTD/sodipodi-0.dtd\" "+
"xmlns:inkscape=\"http://www.inkscape.org/namespaces/inkscape\" "+
"xmlns:mine=\"http://www.mine.org\" "+
"xmlns:html=\"http://www.w3.org/1999/xhtml\""; 
```

以及`cloneSVGNode`一个克隆整个结果的函数，这样我就可以将它附加到 DOM 中——这很有效。

稍后在代码中，我想查询（现在在 DOM 中）SVG 的一些元素，使用如下查询：

```
//svg:g[@mine:my-name="my-value"] 
```

但这不起作用。我读到 IE 不支持对 DOM 元素的 xpath 查询，但是在[这个 stackoverflow 问题](https://stackoverflow.com/questions/5402111/how-to-access-html-element-using-xpath-in-ie8)中如何描述似乎有办法做到这一点。所以我抓住了问题答案中提到的框架版本（[http://sourceforge.net/projects/html-xpath/](http://sourceforge.net/projects/html-xpath/)）并进行了一些测试。结果，我能够获得一些 html 元素，但它拒绝为命名空间和 svg 工作，这对“普通 xml”有效。尽管如此，通过查看 lib 的源代码，我可以看到以下策略（我对此并不完全确定，但我认为总的来说是这样的）：

1.  将节点克隆到新的 xml 文档中
2.  查询 xpath
3.  返回真实节点的对应节点

那么，当 xml 和 dom 节点转换为 xml 时，是否可以让 IE9 对 DOM 进行命名空间 xpath 查询？

问候菲利普

**编辑：**

我继续尝试，最后我成功了，不知何故，代码很安静，但它提供了结果。所以我现在可以说：**“答案是肯定的，这是可能的。”** . 它仍然需要一些测试，但总体方法是：

1.  创建一个新的空 xml 文档
2.  设置适当的命名空间属性（如上所述）！重要
3.  递归遍历上下文文档的树，通过新的 xml 文档创建新元素来克隆所有元素，
4.  从而：从上下文文档的元素生成唯一的 id，并将其分配给克隆的元素和上下文文档的元素，如果它没有。比在以 id 为键的哈希图中插入一个包含“原始”和“克隆”元素的对象。
5.  使用 xpath 查询新文档
6.  检索结果，获取 id 并从地图中获取原始元素。
7.  我决定从最初没有的元素中删除所有 id。

完毕...

如果有人感兴趣，我可以发布一些代码...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-21T08:02:34.737

因此，根据我的编辑，我调整/修补[了这个](http://sourceforge.net/projects/html-xpath/)脚本，以便命名空间工作并添加一些 getter 以使 API 更接近标准。可以在[这里](http://lab.knutschmidt.de/xpath/)看到一个测试页。它非常适合我的目的，但也有它的缺点，只是因为它是一种 hack，所以我只在检测到 IE 时才包含脚本。

**问题：**

*   dom 填充了 ID 以完成上述问题的第 6 步，
*   DOM 中的每个元素都附加了一个“onpropertychange”侦听器，
*   ie 中的性能最多慢 20 倍，
*   奇怪的是，不是所有命名空间的项目都被 IE 找到，
*   ...

现在，我将结束我对客户端 xpath 使用的研究，并得出以下结论：

如果考虑在客户端使用 xml 和 xpath 的所有命名空间功能，如果完成以下操作，它就可以工作：

*   网站必须带有`Content-type: application/xhtml+xml`标题，因此页面必须包含有效的 xhtm，
*   还必须有一个`X-UA-Compatible: IE=9`带有`<meta http-equiv="X-UA-Compatible" content="IE=9" />`标签的标题，
*   命名空间必须提前声明，在测试页面和修补脚本中，这是使用命名空间解析器完成的，
*   在真正高效之前，应该检查 IE 是否真的为所有需要的查询找到了元素
*   人们应该认为 IE xpath 查询非常缓慢，因此广泛使用它们或使用 IE 可能不是一个好主意，但这是另一个问题。

# c# - 如何在我的 ASP.NET 应用程序中使用来自 jquery PopUpDialog 的控件

> ID：12489897
> 
> 赞同：0
> 
> 时间：2012-09-19T07:01:19.673
> 
> 标签：c#, jquery, asp.net, jquery-ui, jquery-dialog

我的应用程序：

我有一个包含两部分的 ASP.NET 应用程序。第一部分是“缺席”部分，第二部分是“签名”。此应用程序自动创建此零件。对于缺席，用户必须输入缺席的结束日期和代表。代表的 TextBox 具有从 Active Directory 获取数据的自动完成功能。通过文本框右侧的图像，用户可以在 jQuery 的模态弹出窗口中搜索代表。弹出窗口有一个文本框和一个带有放大镜符号的图像按钮。现在我希望，如果我单击此符号，我会在 PopUpBox 的 ListView 中找到所有具有固定宽度和高度的代表。

我的问题：

我的弹出窗口打开，我可以在这个弹出对话框的 div 块中设置我的控件。我已经为我的 ImageButton 创建了一个事件并为此生成了代码，但是如果我单击按钮（在弹出对话框中），代码将不起作用。它不会跳入 Button_click 方法:(

我的问题：

如何在我的弹出对话框中使用 jquery 和 asp.net 中的控件？

这是我的代码：

ASPX：（jQuery 代码）

```
<script type="text/javascript" language="javascript">

        $(document).ready(function () {
            $("#dialogbox").dialog({
                autoOpen: false,
                modal: true,
                resizable: false,
                buttons: {
                    "OK": function () {
                        $(this).dialog("close");
                    },
                    "Cancel": function () {
                        $(this).dialog("close");
                    }
                }
            });

            $("#imgVertreter").click(function () {
                $("#dialogbox").dialog("open");
                return false;
            });
        }); 

    </script> 
```

aspx：（我的弹出对话框 div 代码）

```
<div id="dialogbox" title="Gesammte Vertreterliste">
        <asp:TextBox ID="pVertreter" runat="server"></asp:TextBox>
        <asp:ImageButton ID="pImageSearch" runat="server" 
        ImageUrl="~/App_Theme/lupe.jpg" Height="23px" Width="24px" 
            onclick="pImageSearch_Click" /><br />
        <hr />
        <asp:ListView runat="server" ID="ListView">

            <LayoutTemplate>
                <table id="UserTable" runat="server" border="0" width="100%" cellpadding="0" cellspacing="0">
                    <tr style="background-color:#ccdaeb" class="tableClass">
                        <th align="left" id="th4" runat="server"><asp:Label ID="lblName" runat="server" Text="Name, Vorname"></asp:Label></th>
                        <th align="left" id="th3" runat="server"><asp:Label ID="lblAbteilung" runat="server" Text="Abteilung"></asp:Label></th>
                    </tr>
                </table>
            </LayoutTemplate>

            <ItemTemplate>
                <tr>
                  <td align="left"><asp:LinkButton CssClass="MyLink" CommandName="Select" CommandArgument='<%# Container.DataItemIndex %>' ID="lblFullname" Text='<%# Eval("Name") %>' runat="server"></asp:LinkButton></td>
                  <td align="left"><asp:LinkButton CssClass="MyLink" CommandName="Select" CommandArgument='<%# Container.DataItemIndex %>' ID="lblAbteil" Text='<%# Eval("Abteilung") %>' runat="server"></asp:LinkButton></td>
                </tr>
            </ItemTemplate>

            <EmptyDataTemplate>
                Es wurden keine Einträge gefunden
            </EmptyDataTemplate>

            <AlternatingItemTemplate>
                <tr class="TableClass">
                    <td align="left"><asp:LinkButton CssClass="MyLink" CommandName="Select" CommandArgument='<%# Container.DataItemIndex %>' ID="lblFullname" Text='<%# Eval("Name") %>' runat="server"></asp:LinkButton></td>
                  <td align="left"><asp:LinkButton CssClass="MyLink" CommandName="Select" CommandArgument='<%# Container.DataItemIndex %>' ID="lblAbteil" Text='<%# Eval("Abteilung") %>' runat="server"></asp:LinkButton></td>
                </tr>
            </AlternatingItemTemplate>

        </asp:ListView>

    </div> 
```

我的 imageButton (pImageSearch) 的 C# 代码

```
 protected void pImageSearch_Click(object sender, ImageClickEventArgs e)
        {
            try
            {
                UserService srv = new UserService();

                DataTable dt = srv.BenutzerFinden(Domain, pVertreter.Text);
                DataView dv = new DataView(dt);

                dv.Sort = "Nachname ASC";

                this.ListView.DataSource = dv;
                this.ListView.DataBind(); 
            }
            catch (Exception)
            {

            }

        } 
```

这是我的应用程序中的图片：

![在此处输入图像描述](../Images/6d845926188c7733bdb15e62ef18090c.png)

我的 TestApplication 在 IE 中的源代码有效！

```
<div id="dialog" title="Liste">
<input name="txtBox" type="text" value="rettet" id="txtBox" />
<input type="submit" name="btnEdit" value="übergeben" id="btnEdit" />
</div> 
```

我的主要应用程序的源代码不起作用！

```
<div id="dialogbox" title="Vertreterliste">
<input name="pVertreter" type="text" id="pVertreter" />
<input type="image" name="pImageSearch" id="pImageSearch" src="App_Theme/lupe.jpg" onclick="javascript:WebForm_DoPostBackWithOptions(new WebForm_PostBackOptions(&quot;pImageSearch&quot;, &quot;&quot;, true, &quot;&quot;, &quot;&quot;, false, false))" style="height:23px;width:24px;" /><br />
<input type="submit" name="suchen" value="suchen" onclick="javascript:WebForm_DoPostBackWithOptions(new WebForm_PostBackOptions(&quot;suchen&quot;, &quot;&quot;, true, &quot;&quot;, &quot;&quot;, false, false))" id="suchen" />
</div> 
```

为什么这里是带有 dopostback Oo 的 onclick？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-19T07:07:05.970

jQuery modals 是通过克隆 DOM 元素并将它们放置在 body 标记处来创建的。这会创建有效的 DOM 元素，并且在客户端可以正常工作。

然而，asp.net 控件要发送事件，它们必须在表单标签内（asp.net 只创建一个表单标签）。

解决方案是创建对话框，然后将元素放回表单标签中。

```
 $(document).ready(function () {
        $("#dialogbox").dialog({
            autoOpen: false,
            modal: true,
            resizable: false,
            buttons: {
                "OK": function () {
                    $(this).dialog("close");
                },
                "Cancel": function () {
                    $(this).dialog("close");
                }
            }
        });

        $("#dialogbox").parent().appendTo($("form:first"));

        $("#imgVertreter").click(function () {
            $("#dialogbox").dialog("open");
            $("#dialogbox").parent().appendTo($("form:first"));
            return false;
        });          
    }); 
```

之后，您的服务器事件现在应该会完美触发。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-07-06T07:03:18.327

像这样使用 JavaScript：

```
(function(){
    var popups = $('.js-popups');

    popups.magnificPopup({
        type:'inline',
        midClick: true,
        preloader: true,
        fixedContentPos: false,
        closeMarkup: '<span class="popup-close-ic mfp-close"></span>',
        removalDelay: 300,
        appendTo: 'form',
        prependTo: 'form'
    });
})(); 
```

添加额外`prependTo: 'form'`的表单提交。

# css - 如何拥有固定左/右、流畅中间和固定页脚的 3 列布局？

> ID：12489909
> 
> 赞同：4
> 
> 时间：2012-09-19T07:02:41.960
> 
> 标签：css, html, fluid-layout

我怎样才能有类似的布局？

我见过一些不太适合我的解决方案。我看到的例子和评论表明这是不可能的。（图表在中间缺少溢出自动）。 ![在此处输入图像描述](../Images/d2a42e74572fe303ec343665d4fca963.png)

对于它的价值：这是我目前的小提琴（我决定试用一张桌子，hrmmmm）。

[http://jsfiddle.net/valamas/m8R43/6/](http://jsfiddle.net/valamas/m8R43/6/)

**附加**：评论中提到的打印屏幕。添加页眉后向下拖动/选择页面时发生。见：[http ://dabblet.com/gist/3753308](http://dabblet.com/gist/3753308) ![在此处输入图像描述](../Images/9c764b9a015b2e1fabb553dc17bc4c79.png)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-19T07:16:24.940

您可以使用普通的 div。

一个包装器，左、中、右三个内部 div。包装器 div*下*的一个页脚。

```
<div id="wrapper">
    <div id="leftSide">
        left
    </div>
    <div id="middle">
        middle
    </div>
    <div id="rightSide">
        right
    </div>
</div>
<div id="footer">
        footer
    </div> 
```

然后你使用`display: table`; `table-cell;`在包装器及其内部 div 上：

```
#wrapper
{
    width: 100%;
    height: 400px; /*whatever*/
    display: table;
    padding: 0;
    margin: 0;
}

#left,
#middle,
#right
{
    display: table-cell;
} 
```

​设置左右元素的宽度，中间会神奇地填满空间。

```
#left
{
    width: 100px;
}

#middle
{
    background: #00f;
}

#right
{
    width: 200px;
} 
```

`display: table;`和`table-cell;`样式模仿表格的行为，但允许标记成为语义元素。

除了 IE<=7 之外的所有浏览器都支持它。

[http://jsfiddle.net/Kyle_Sevenoaks/m8R43/9/](http://jsfiddle.net/Kyle_Sevenoaks/m8R43/9/)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-09-19T11:10:02.967

如果您不太关心源顺序： [http ://dabblet.com/gist/3748868](http://dabblet.com/gist/3748868)

它使用了一些技巧来让页脚在较低视口高度的屏幕上显示：

```
body {
    border-bottom: 100px solid; /* height of footer */
    box-sizing: border-box;
    } 
```

'border-box' 属性在这里解释：http: [//www.paulirish.com/2012/box-sizing-border-box-ftw/](http://www.paulirish.com/2012/box-sizing-border-box-ftw/) 基本上，它的作用是使元素在其中包含边框和填充。因此，此处给予主体的底部边框将保留在视口内，而不是 sans-border-box。
这使它有点像一个可以被页脚容纳的负空间。我使用了“边框”，因为您可能想修改填充。
至于页脚，它是固定定位的，所以它是相对于视口的，而不是绝对定位所获得的布局。因此它位于主体底部边界的顶部（共享其高度值）。

中心块是流动的，因为我给了它“溢出：隐藏”属性，它可以清除浮动（[http://www.stubbornella.org/content/2009/07/23/overflow-a-secret-benefit/](http://www.stubbornella.org/content/2009/07/23/overflow-a-secret-benefit/)）。它也可以在没有溢出的情况下工作，但它可能会导致问题。
由于您希望在列内的内容大于内容高度时能够滚动，因此我在中心列内添加了一个容器，并将其设置为溢出：auto。

# javascript - CSS如何填充剩余空间（1个div和较小的div）

> ID：12489918
> 
> 赞同：0
> 
> 时间：2012-09-19T07:03:19.900
> 
> 标签：javascript, css

**[EDIT RE-OPEN 5-10]**
我仍然有同样的问题！主要功能现在都实现了，所以我回到这个问题。我按照建议将 Div 更改为 UL LI 列表。但我仍然无法用产品填充整个区域。每个产品都有一定的宽度和高度。

*我正在为 Elo TouchSystems 1529L 显示器制作这个。屏幕上有 6*10 个产品（左）和一些信息和选项（右）（目前不在图像中）它将在 Google Chrome Kiosk 中运行（全屏）*

我试图得到某种网格，如图所示（在图像中很难看到，但底部有一个 1px 白色行，我试图摆脱它。黑色是屏幕高度的末端）

![当前产品区](../Images/db587751db2e696164962c7f514301c5.png)

@RenaatDeMuynck 建议使用高级 CSS3 `grid or box-flex`，因为我只使用 Google Chrome。

网格似乎非常强大，需要我对代码进行一些更改（这很好）但在我去那里之前，我想确定我是否正确。

对于网格，我必须制作行？是的？这意味着列表不合适！

这是否意味着我需要用 div 回到我的旧结构并添加行？

**旧的（带浮动：左；）**

```
<div products>
    <div product>info</div>
    <div product>info</div>
    <div product>info</div>
    <div product>info</div>
    ...etc
</div> 
```

**新的网格？？**

```
<div products>
    <div row>
        <div product>info</div>
        <div product>info</div>
        <div product>info</div>
        ...etc
    </div>
    <div row>
        <div product>info</div>
        <div product>info</div>
        <div product>info</div>
        ...etc
    </div>
    ...etc
</div> 
```

* * *

* * *

**【老Q】**

我在 1 个“产品” **ul**中显示多个“产品” **li**

 **```
for ( i = 0; i < totalProductsOnScreen; i++) {
    HTMLContent += "<li class=productDiv id=empty" + i + " onclick='#'></li>";
} 
document.getElementById("productsUL").innerHTML = (HTMLContent + "<div style='clear:both'></div>"); 
```

不要提及id和onclick。它是我在这段代码下填写的

这是**更新**的CSS

```
#productsDiv {
    float: left;
    width: 70%;
    height: 100%;
    margin: 0px;
    padding: 0px;
}
.productDiv {
    list-style: none;
    padding: 0px;
    margin: 0px;
    float: left;
    box-sizing: border-box;
    border: outset;
    border-width: 1px 1px 1px 1px;
    width: 16.66%;/*14.2857%;*/
    height: 10%;
    max-height: 10%;
} 
```

当前代码给出了这个： [postimage.org 图像](http://postimage.org/image/htli015xr/)
（必须是一个链接，因为作为初学者我不允许发布图像）

它不是很明显，但在最底部，productsDiv 中有 1 个像素未使用。（红色）。
那没什么大不了的。但是当我放大和缩小时它会改变。有时它的 4 个像素未使用或它的 2 个像素太多。所以我想通过给productDiv的最后一行剩余高度来解决这个问题。

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-19T07:14:48.493

请记住，这`height`意味着“内部高度”，而不是“外部高度”。产品的高度是 height + margin-top + margin-bottom 的结果。由于您同时修复了内容和容器高度，因此它们并不总是适合。

如果您希望您的容器 100% 被您的内容覆盖，请不要固定其高度。

请记住，由于 productsDiv 仅包含浮动对象，因此在某些浏览器中它可能没有高度。你可能需要破解一点。众所周知的是`zoom: 1; overflow: auto`，但它有时会引入滚动条。更多信息：[http ://www.electrictoolbox.com/clear-float-overflow-auto/](http://www.electrictoolbox.com/clear-float-overflow-auto/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-05T13:52:47.023

这是我的最终解决方案。它使用新的 W3C 定义的 flexbox（截至 2012 年 8 月，仅在 Chrome 21+ 中支持）

**HTML：**

```
<ul class="products">
  <li>product 1</li>
  <li>product 2</li>
  <li>product 3</li>
  <li>...</li>
  <li>product n</li>
</ul> 
```

**CSS：**

```
html, body {
  padding: 0;
  margin: 0;
  width: 100%;
  height: 100%;
}

ul.grid {
  /*  As of August 2012, only supported in Chrome 21+ */
  display: -webkit-flex;
  -webkit-flex-wrap: wrap;
  padding: 0;
  margin: 0;
  width: 600px;
  height: 100%;
  background: silver;
}

ul.grid > li {
  list-style: none;
  padding: 0;
  margin: 0;
  width: 98px; /* (600px / 6) - 2px for the borders  */
  overflow: hidden;
  border: outset 1px;
}

ul.grid > li.food {
  background-image: url(images/food.png);
  -webkit-background-size: 100%;
} 
```

**演示：** [http ://codepen.io/anon/pen/unGrt](http://codepen.io/anon/pen/unGrt)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-07-16T10:50:24.347

我找到了解决办法！

`height:100%;`
`width:100%`在产品 css中的行css

[小提琴](http://jsfiddle.net/h2Ya8/31/)显示了这一点！[http://jsfiddle.net/h2Ya8/31/](http://jsfiddle.net/h2Ya8/31/)

感谢所有的帮助！**

# ios - iOS - UITableView 下面的 UIView 用于设置

> ID：12489927
> 
> 赞同：0
> 
> 时间：2012-09-19T07:04:04.583
> 
> 标签：ios, ios5

我尝试在我的应用程序中实现的是在主表视图下方放置一个视图，可能是另一个表视图以输入一些过滤器设置。

在最佳情况下，主 tableview 应该向下滑动一半并显示为灰色，就像我放置的 Appshopper 示例中一样。我怎么能实现这样的行为？

我正在使用 IOS5/6 和故事板

![应用购物者](../Images/0f4f5071dd5c404c3c5d1fd1997ed792.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-19T07:15:49.797

你不能制作一个包含两个子视图的视图：设置视图和主表视图。使用 Core Animation，您可以为向下移动的主表视图设置动画。使用情节提要，您将封装视图推送到您的视图控制器上。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-19T10:35:44.527

最后我想出了如何去做。

只需将两个视图都放入您的控制器中，并在事件触发时执行类似于以下代码的内容

```
[UIView beginAnimations:nil context:NULL];
[UIView setAnimationDuration:0.5];
[UIView setAnimationCurve: UIViewAnimationCurveEaseOut];

CGRect newFrame = self.newsTableView.frame;
newFrame.origin.y = newFrame.origin.y + self.subview.frame.size.height;
[self.subView1 setFrame:newFrame];

[UIView commitAnimations]; 
```

当然，仍然缺少的是检查框架是否还没有被向下移动等等，但是 m

# c# - 如果 WPF 中不再为真，Triggers/DataTrigger 是否会返回到以前的状态？

> ID：12489931
> 
> 赞同：7
> 
> 时间：2012-09-19T07:04:25.097
> 
> 标签：c#, wpf

在 MSDN 上阅读[DataTrigger](http://msdn.microsoft.com/en-us/library/system.windows.datatrigger.aspx)时，它说

> 表示当绑定数据满足指定条件时应用属性值或执行操作的触发器。

它的意思是

> 当触发器为真时，它会将值更改为所需的值。

但是，这可以推断吗？

> 当它不再为真时，它会将值返回到先前的值。

* * *

**我是如何得出这个结论的**

我做了这个

```
<Style x:Key="fd" TargetType="SomeControl">
 <Setter Property="Control.Template">
  <Setter.Value>
   <ControlTemplate>
    <Button Content="Foo" x:Name="mybutton">
    <ControlTemplate.Triggers>
     <DataTrigger Binding="{Binding RelativeSource={RelativeSource Self}, Path=FooProperty}" 
                  Value="Collapsed">
      <Setter Property="IsEnabled" Value="False" TargetName="mybutton"/>
      <Setter Property="Opacity" Value="0.5" TargetName="mybutton"/>
     </DataTrigger>
    </ControlTemplate.Triggers>
   </ControlTemplate>
  </Setter.Value>
 </Setter>
</Style> 
```

当`FooProperty`变得折叠时，它会将 mybutton更改`IsEnabled`为`False`和`Opacity``0.5`

现在，当`FooProperty`它变得可见时，它会将 mybutton 更改`IsEnabled`为`True`和`Opacity`，`1`即使我没有编写任何触发器来恢复到以前的值。

`DataTrigger`当它不再是真的时，这是恢复到以前的值的内置功能吗？

如果是，是否有任何 Microsoft/MSDN 文档可以证明这一点？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-19T07:14:54.617

你说的，是对的。

至于证明这一点的实际文档，请从此处搜索：

[http://msdn.microsoft.com/en-us/library/ms745683.aspx](http://msdn.microsoft.com/en-us/library/ms745683.aspx)

[http://msdn.microsoft.com/en-us/library/system.windows.trigger.aspx](http://msdn.microsoft.com/en-us/library/system.windows.trigger.aspx)

“备注部分”

> WPF 定义与最终用户操作相对应的属性，例如当用户将光标悬停在 UIElement 或 ContentElement 的相应 IsMouseOver 属性上时设置为 true 的 IsMouseOver 属性。在属性值中表示最终用户操作以及 Trigger 元素，允许 WPF 样式根据这些最终用户操作更改属性值，所有这些都来自标记内。
> 
> 当触发条件不再满足时，由触发器更改的属性会自动重置为之前的值。触发器针对预期会更改并返回原始状态的瞬态状态进行了优化，例如 Button 上的 IsPressed 和 ListBoxItem 上的 IsSelected。感兴趣的属性必须是依赖属性。
> 
> 请注意，您必须在触发器上同时指定 Property 和 Value 属性，触发器才有意义。如果未设置其中一个或两个属性，则会引发异常。

祝你好运 ：）

# javascript - 触发中间元素 JS 播放链接

> ID：12489932
> 
> 赞同：0
> 
> 时间：2012-09-19T07:04:45.973
> 
> 标签：javascript, jquery, mediaelement.js

我正在使用 Media Element JS 在我的页面上播放一些音频。效果很好，但我希望能够在单击链接时播放音频，但我不知道该怎么做。这是我的代码：

***JS***

```
$(document).ready(function() {
    $('audio,video').mediaelementplayer();  
}); 
```

***HTML***

```
<p>Element to Click to Trigger Audio Play</p>

<audio id="player2" src="path.mp3" type="audio/mp3" controls></audio> 
```

注意：音频播放器将是可见的，但由于页面的布局，我提供了一种额外的方式（如果可能）来播放音频。

注意：我*必须*能够同时触发 HTML 5 播放器和 Flash 后备播放器。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-19T07:37:29.033

我在这个[问答](https://stackoverflow.com/questions/11278890/play-sound-on-click-using-jquery-and-mediaelement-js)中找到了[解决](https://stackoverflow.com/questions/11278890/play-sound-on-click-using-jquery-and-mediaelement-js#answer-11287060)方案，同时我继续搜索。

解决方案：

```
$('.button').click(function(){
    $('audio')[0].player.play();
}); 
```

# javascript - 使用 javascript 的动态字典

> ID：12489935
> 
> 赞同：0
> 
> 时间：2012-09-19T07:05:06.443
> 
> 标签：javascript, jquery, asp.net-mvc-3, dynamic, dictionary

我正在尝试在客户端填充字典对象，我可以将其传递给我的 Action 方法。我能够使用硬编码值构建字典对象，但是我想根据 DOM 元素动态创建它。

下面是如何编码的样子：

```
<input type="text" id="t1" class="textClass" />
<input type="text" id="t2" class="textClass" />
<input type="text" id="t3" class="textClass" />
<input type="text" id="t4" class="textClass" />
<input type="text" id="t5" class="textClass" />

<input type="button" id="btnSubmit" value="Submit" /> 
```

这是带有硬编码值的 JavaScript 函数。我正在遍历所有具有`textClass`. 这很好用，我可以在 Action 方法参数中看到字典项。

```
<script type="text/javascript">

        $('.textClass').each(function (index) {
            dictionary = {

                '[0].Key': 'k1', 
                '[0].Value': 'v1',

            };

</script> 
```

这就是我想要构建字典的方式，但我无法弄清楚如何使用索引和 DOM 元素来创建字典键和值。如果我按照我在下面写的方式写，它不会构建字典。

```
<script type="text/javascript">

        $('.textClass').each(function (index) {
            dictionary = {

                '[' + index '].Key': $(this).attr('id'), 
                '[' + index '].Value': $(this).val(), 

            };

</script> 
```

有人可以指出我在这里做错了什么吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-19T07:07:06.410

为了能够从字符串构造键，您需要相应地设置它们：

```
var dictionary = {};
dictionary['[' + index + '].Key'] = $(this).attr('id'); 
```

您当前为每次迭代覆盖字典变量。在您的场景中，您需要以下内容：

```
var dictionary = {};
$('.textClass').each(function (index) {
    dictionary['['+index+'].Key'] = $(this).attr('id');
    dictionary['['+index+'].Value'] = $(this).val();
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-19T07:13:35.923

```
$('.textClass').each(function(index) {

    dictionary = {};
    dictionary['[' + index + '].Key'] = $(this).attr('id');
    dictionary['[' + index + '].Value'] = $(this).val();

}); 
```

# php - POST 中的 GET 参数

> ID：12489936
> 
> 赞同：0
> 
> 时间：2012-09-19T07:05:07.267
> 
> 标签：php, forms, post, action

是否可以将一些帖子输入值放入“操作”网址？

例如：

```
<form method="post" action="index.php">
<input type="text" name="username">
<input type="submit">
</form> 
```

生成的 URL 是 index.php 但我想在 url 的末尾添加名称的值，如下所示：

```
index.php?name=value 
```

我不想从“发布”变为“获取”。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-19T07:09:25.257

如果您想发布表格，请照常做。您还可以在 中添加`GET`参数`action`，例如：

```
<form method="post" action="index.php?name=value">
  <input type="text" name="username">
  <input type="submit">
</form> 
```

也可以`action`在发布前动态更改。

您可以通过以下方式实现它：

```
<script type="text/javascript">
function changeAction() {
  this.action += '&other=value';
}
</script>

<form method="post" action="index.php?name=value" onsubmit="changeAction()">
  <input type="text" name="username">
  <input type="submit">
</form> 
```

（未测试）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-19T07:09:05.990

您可以通过在表单提交时使用 javascript/jQuery 添加用户名值来动态添加表单的操作。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-19T07:19:19.790

您还可以在表单中放置`input type='hidden'`要发布但不显示在表单上的值

# mysql - 如何找出 BIGINT 时间类型？

> ID：12489938
> 
> 赞同：-1
> 
> 时间：2012-09-19T07:05:11.213
> 
> 标签：mysql, sql

在表中，我有 BIGINT 行“last_seen”，其值如下：`1348038297245`或者`1348037202941`但它不是 UNIX 时间。那又如何？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-19T07:07:51.213

这些是时间戳，但以毫秒而不是秒为单位存储。只需将它们除以 1000 即可再次获得秒数。

1348038297245ms = 1348038297.245s = 2012-09-19 07:04:57（[在线转换器](http://www.gaijin.at/olsutc.php)）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-19T07:07:53.463

我认为这是一个以毫秒为单位的 unix 时间戳。

在这里转换它：[http ://www.epochconverter.com/](http://www.epochconverter.com/)

# javascript - vanilla javascript渲染平面文本RAILS

> ID：12489940
> 
> 赞同：0
> 
> 时间：2012-09-19T07:05:23.910
> 
> 标签：javascript, ruby-on-rails, ruby-on-rails-3.1

我一直在使用香草 javascript，我只是呈现一个简单的警报消息，但它将 JS 代码呈现为视图中的平面字符串。这是我的代码

```
def index
render :js => "alert('Hello Rails');"
end 
```

它呈现相同的字符串“alert('Hello Rails');” 对我来说，而不是警报消息。我在 Rails 3 中，并且作为 Rails[指南](http://guides.rubyonrails.org/layouts_and_rendering.html)，代码看起来不错。

任何答案将不胜感激。谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-19T08:02:40.237

比较以下两个片段：

```
<!DOCTYPE HTML>
<html lang="en-US">
<head>
    <meta charset="UTF-8">
    <title></title>
</head>
<body>
    <script>
    alert('Hello Rails');
    </script>
</body>
</html>

<!DOCTYPE HTML>
<html lang="en-US">
<head>
    <meta charset="UTF-8">
    <title></title>
</head>
<body>
    alert('Hello Rails');
</body>
</html> 
```

第一个生成警报消息，第二个只显示字符串。浏览器不会执行 JS 代码，除非它被`<script>`标签包裹。@Erez 答案中的 jQuery ajax 调用也会在`<script>`内部包装响应。

因此，如果您直接访问您的操作，请尝试`<script>`使用 javascript_tag 帮助程序（http://api.rubyonrails.org/classes/ActionView/Helpers/JavaScriptHelper.html#method-i-javascript_tag）包装它

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-19T07:17:39.397

您正在渲染 JS 好。问题在于接收此 JS 并将其显示为纯文本的浏览器。

尝试使用（在此处使用 JQuery）发送 AJAX 请求：

```
$.ajax(url: '/index/url', type: 'GET', dataType: 'script') 
```

请注意，dataType 设置为 script，这意味着 JQuery 会将返回的文本作为 JS 执行。

简短的版本是

```
$.getScript('/index/url'); 
```

# visual-studio-2010 - Visual Studio 2010 或 2012 是否支持配置文件？

> ID：12489957
> 
> 赞同：1
> 
> 时间：2012-09-19T07:06:23.643
> 
> 标签：visual-studio-2010, visual-studio-2012

我想知道是否有人知道 Visual Studio 2010 或 2012 中的任何内置功能，甚至是基于扩展的功能，这些功能允许用户基于特定的“配置文件”拥有不同的扩展/配置/窗口布局？（理想情况下，我想指定我想在命令行参数中使用的配置文件）

目前，我将 Visual Studio 用于许多不同类型的项目（C#、C++、一些 ASP.NET），因此，我得到了越来越多的不同扩展来帮助我。问题是，在进行 C++ 开发时，我永远不需要许多扩展，就像在进行 Web 开发时我永远不会使用许多扩展一样。虽然我可能只是肛门，但我不喜欢加载如此多的扩展而没有任何用处的想法。

无论如何，在过去的两年里，我一直在启动 Visual Studio 2010，禁用和启用我计划在项目中使用的扩展，并重新启动 IDE。当我在一天内处理多个项目时，这可能会有点乏味，所以我希望有人可能知道我忽略的一个技巧。

# validation - C# - 在 MVVM 中使用 DataAnnotations 进行验证并在视图中显示有意义的错误消息

> ID：12489959
> 
> 赞同：2
> 
> 时间：2012-09-19T07:06:30.217
> 
> 标签：validation, c#-4.0, mvvm, data-annotations

假设我有一个这样的域模型：

```
public class MyDomainEntity
{
    public double SomeVar { get; set; }
} 
```

我有一个视图，我想将 SomeVar 显示为百分比。所以我的视图模型看起来像：

```
public class MyViewEntity
{
    public double SomeVarAsPercentage { get; set; }
} 
```

我有一个映射类，它在视图模型和域模型之间进行映射，它简单地将变量除以 100。

现在我想对域模型进行一些验证。在这种情况下，业务规则规定域模型中的 SomeVar 必须介于 0.0 和 1.0 之间（含）。这很容易通过 System.ComponentModel.DataAnnotations.RangeAttribute 完成：

```
public class MyDomainEntity
{
    [Range(0.0, 1,0)]
    public double SomeVar { get; set; }
} 
```

我可以使用

```
MyDomainEntity r = new MyDomainEntity();

...
//mapping code from view-model to domain model
...

IList<ValidationResult> results = new List<ValidationResult>();
ValidationContext context = new ValidationContext(r, null, null);
Validator.TryValidateObject(r, context, results, true);
foreach (ValidationResult e in results)
{
    //I would like to display the error messages, if any, to the user
} 
```

但是，由于验证是在域模型中完成的，因此错误消息如下所示：

```
"The field SomeVar must be between 0 and 1" 
```

而上面的错误信息需要翻译成视图模型才能阅读：

```
"The field SomeVarAsPercentage must be between 0 and 100" 
```

为了对用户有意义。

这里的问题是：

1.  DataAnnotations 是否有能力进行这种“错误消息翻译”？
2.  在这种情况下，我不应该在域模型中进行验证吗？
3.  也许 DataAnnotations 作为一种验证机制在这里是不够的或不合适的？如果是这种情况，请建议一些其他框架

**更新：**

我对这个问题想了更多，似乎有几种方法

**方法 1：视图模型中的验证**

将验证移至视图模型，如下所示：

```
public class MyViewEntity
{
    [Range(0.0, 100.0)]
    public double SomeVarAsPercentage { get; set; }
} 
```

因此 DataAnnotations 可以生成所需的错误消息。

然而，在视图模型中进行验证（与在域模型中相对）更WET。假设我的表单可以在两种视图之间切换：一种是 SomeVar 显示为百分比，另一种是 SomeVar 显示为“原样”，但只显示小数点后两位。然后我必须这样做：

```
public class MyViewEntity1
{
    [Range(0.0, 100.0)]
    public double SomeVarAsPercentage { get; set; }
}

public class MyViewEntity2
{
    [Range(0.0, 1.0)]
    public double SomeVarToTwoDp { get; set; }
} 
```

我必须将 Range 规则放在两个地方，但两者实际上是相同的规则。

优点：简单
缺点：有点湿

**方法 2：在域模型中验证，稍微修改 validate 方法**

扩展 DataAnnotations 验证框架，使其不仅返回错误属性名称，还返回它违反的规则和错误消息工厂。因此 View-Model 实体和 Domain Model 实体之间的映射将使用错误消息工厂和规则（也需要映射）生成有意义的错误消息。

优点：更 DRY，验证规则在域模型中只出现一次
缺点：更复杂

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-19T07:38:46.933

我想说你应该在两个地方都进行验证——ViewModel 中的 SomeVarAsPercentage，适当地显示你的 ViewModel 验证错误消息，并丢弃无效的输入（即不要将它们传递给模型）。

然后，在您的模型中，您可以验证 SomeVar（如果它通过了 VM 验证阶段）。该模型可以向 VM 报告错误（以其术语），VM 可以将它们转换为用户域术语，就像 VM 对值所做的那样。

您需要在这两个地方进行验证，因为验证类型不同 - 在 VM 中进行简单的百分比验证，但可能在模型中进行更复杂的验证，同时考虑其他值等。

# django - 如何向数据库中添加数据？

> ID：12489960
> 
> 赞同：4
> 
> 时间：2012-09-19T07:06:31.150
> 
> 标签：django, django-models, django-forms

如何将数据添加到我的数据库？

我的表格：

```
from django import forms

class DinnerForm(forms.Form):
    name = forms.CharField(max_length=100)
    text = forms.CharField(max_length=255) 
```

和型号：

```
class Dinner(models.Model):
    name = models.CharField(max_length=100)
    text = models.CharField(max_length=255) 
```

我的观点：

```
def add_dinner(request):
    if request.method == 'POST':
        form = DinnerForm(request.POST)
        if form.is_valid():
            name = form.cleaned_data['name']
            text = form.cleaned_data['text'] 
```

如何将我的数据保存到数据库中？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-19T07:14:10.993

我认为对您来说更好的选择是使用 FormModels。向数据库添加一些东西：

```
### example
def add_dinner(request):
    if request.method == 'POST':
        form = DinnerForm(request.POST)
        if form.is_valid():
            name = form.cleaned_data['name']
            text = form.cleaned_data['text']
            diner = Dinner.objects.create(
                            name = name,
                            text = text,) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-19T11:18:15.933

如果你不使用 ModelForm ，你可以这样做：

```
def add_dinner(request):
    if request.method == 'POST':
        form = DinnerForm(request.POST)
        if form.is_valid():
            name = form.cleaned_data['name']
            text = form.cleaned_data['text']
            query = Dinner(name = name , text = text)
            query.save() 
```

# dynamics-crm-2011 - 无法向团队拥有的 CRM 队列发送电子邮件

> ID：12489963
> 
> 赞同：1
> 
> 时间：2012-09-19T07:06:58.247
> 
> 标签：dynamics-crm-2011, dynamics-crm

我们已设置 CRM 电子邮件路由器以将电子邮件从 POP3 帐户传送到 CRM 服务器。外部用户发送到的电子邮件地址属于队列。

当队列归用户所有时，一切正常并且邮件被传递。（因此我们知道电子邮件服务器正在工作并且 CRM 权限是正确的）

当我们将队列所有者更改为团队时，我们会收到以下错误。我们检查了错误中提到的 SID，它引用了正确的团队，这可能是系统在用户表中找不到条目的原因。

有想法该怎么解决这个吗？我们已经在使用 Rollup 10。

> *在邮箱 foo@foo.local 中传递主题为“Mondaycoming testing”的电子邮件以传递到 [exchange] 时发生错误。System.ServiceModel.FaultException`1[Microsoft.Xrm.Sdk.OrganizationServiceFault]：ID = 9f3926f4-aaf7-e111-87b9-005056265c17 的 systemuser 不存在（故障详细信息等于 Microsoft.Xrm.Sdk.OrganizationServiceFault）。**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-03T05:22:25.867

原来是团队没有正确的权限。一旦我们恢复了团队的默认权限，一切都会重新开始。

错误信息只是误导...... :(

# ruby-on-rails - 不能在 find_by_sql 中使用 with 子句

> ID：12489976
> 
> 赞同：1
> 
> 时间：2012-09-19T07:08:02.910
> 
> 标签：ruby-on-rails, activerecord

Activerecord 似乎在偷看我的 sql 并弄错了。我发现这是：

```
sql = "
  select etn.* 
  from edittree_name etn where id = #{id}"  
Name.find_by_sql(sql) 
```

有效，但这：

```
sql = "
  with pp as ( select * from dual)
  select etn.* 
  from edittree_name etn where id = #{id}"  
Name.find_by_sql(sql) 
```

给我一个“1:Fixnum 的未定义方法‘每个’”。

有什么线索吗？有没有“find_by_raw_sql（不要试图自己理解）”的方法？

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-09-20T03:35:32.580

好的。问题解决了。

RoR 中的某些东西*不*喜欢那些 oracle 的“with”子句，问题似乎是 RoR 期望首先看到一个“select”子句。您可以通过将 with 子句转换为 from 子句来解决此问题。

这个

```
with xx(parent) as (
  select parent from link where
    link.child = {#id}
  union all
  select parent from xx, link 
    where link.child = xx.parent
)
select foo.*
from foo,xx 
where foo.id = xx.parent 
```

变成这个

```
select foo.*
from foo, 
(
  with xx(parent) as (
    select parent from link 
      where link.child = {#id}
    union all
    select parent from xx, link 
      where link.child = xx.parent
  )
  select * from xx
) yy
where foo.id = yy.parent 
```

问题似乎是rails需要正确解析新的sql语法

# php - 启动页面上的 Wordpress setcookie()

> ID：12489982
> 
> 赞同：1
> 
> 时间：2012-09-19T07:08:27.877
> 
> 标签：php, wordpress, setcookie

我有一个 Wordpress 网站，在主页上，如果访问者是第一次来这里，则会出现“订阅时事通讯”模式。我遇到了一个问题，即没有通过`setcookie()`函数设置 cookie：

```
<?php 
            if($_COOKIE['rcngVisited'] != 'true')
            {
                echo do_shortcode('[modal name="Subscribe to newsletter" style=button color=default size=default][/modal]'); 
                setcookie('rcngVisited','true', time()+60*60*24*30, '/readyclickandgo/');
            }
        ?> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-19T07:11:14.123

`readyclickandgo`您只为dir设置 cookie

确保在设置之前没有任何输出`COOKIE`，将其添加到标题中：

```
<?php
    $visit = false;
    if($_COOKIE['rcngVisited'] != 'true'){
        setcookie('rcngVisited','true', time()+60*60*24*30, '/readyclickandgo/');
        $visit = true;
    }
?> 
```

在同一页面中的任何位置添加：

```
<?php
    if($visit){
        echo do_shortcode('[modal name="Subscribe to newsletter" style=button color=default size=default][/modal]'); 
    }
?> 
```

# javascript - 如何使用 ForceDirected 中的 adAdjacence 功能？

> ID：12489983
> 
> 赞同：0
> 
> 时间：2012-09-19T07:08:28.923
> 
> 标签：javascript, json, graph, jit, infovis

我正在研究 Java Infovis Toolkit 中的网络图（ForceDirected）：[http](http://thejit.org/) ://thejit.org/“The jit”。我需要首先绘制节点，然后将邻接添加到创建的每个节点。我必须使用库中定义的 addAdjacence 函数，但我不知道如何。

有谁能够帮我？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-19T10:50:22.123

假设 fd 是图形对象，我们需要调用以下函数 -

```
fd.graph.addAdjacence({id:123}, {id:167022}); 
```

我们传递两个对象。这里 123 是新节点，167022 是现有节点。

# ios - 在 iOS 后台运行的 MPMoviePlayerController

> ID：12489984
> 
> 赞同：0
> 
> 时间：2012-09-19T07:08:32.800
> 
> 标签：ios, mpmovieplayercontroller

在视频开始播放和 touchesEnded 之前，ViewController 发生了变化，视频开始在后台的不同 ViewController 中播放。我该如何解决这个问题？我想要的是，如果 viewController 发生变化，则停止播放..

```
- (void)viewDidLoad
{
    [super viewDidLoad];

 movpath = [[NSBundle mainBundle] pathForResource:@"video" ofType:@"m4v"];

    mpviewController = [[MPMoviePlayerViewController alloc]
                        initWithContentURL:[NSURL fileURLWithPath:movpath]];

    MPMoviePlayerController *mp = [mpviewController moviePlayer];
    [mp prepareToPlay];
    [mp setFullscreen:YES animated:YES];
    mp.controlStyle = MPMovieControlStyleNone;

    [[mpviewController moviePlayer] play];
}

- (void) touchesEnded: (NSSet *) touches withEvent: (UIEvent *) event {
    [self performSegueWithIdentifier:@"mainView" sender:self];
    [[mpviewController moviePlayer] stop];
    [mpviewController.view removeFromSuperview];

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-19T07:13:11.773

你可以在 -(void)viewDidDisappear 方法中停止你的电影播放器

# javascript - 如何检查 javascript/jsquery 中的活动选项卡？

> ID：12489986
> 
> 赞同：0
> 
> 时间：2012-09-19T07:08:52.083
> 
> 标签：javascript, jquery, javascript-events

每当浏览器选项卡处于活动状态/选择状态时，我都想运行一个函数。

我如何使用 javascript/jquery 做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-19T08:46:52.693

也许您可以使用 Page Visibility API ？该规范位于[http://www.w3.org/TR/2011/WD-page-visibility-20110602/](http://www.w3.org/TR/2011/WD-page-visibility-20110602/)

“该规范为网站开发人员定义了一种以编程方式确定页面当前可见性状态的方法，以便开发功率和 CPU 高效的 Web 应用程序。”

还有一个方便的包装库 - [https://github.com/ai/visibility.js上的 Visibility.js](https://github.com/ai/visibility.js)

```
Visibility.onVisible(function () {
    // do something 
}); 
```

# objective-c - containsPoint：用于 UIBezierPath 崩溃

> ID：12489988
> 
> 赞同：8
> 
> 时间：2012-09-19T07:09:08.110
> 
> 标签：objective-c, ios, quartz-core

我正在将 SVG 文件解析为`UIBezierPath`. 我想知道 a`CGPoint`是在内部还是外部`UIBezierPath`。为此，我使用`containsPoint:`. 当我在模拟器中运行它时，一切正常（几乎！）。当我在 iPad 设备上运行它时，它会在某些路径和点上崩溃。在我打电话之前，我会打电话`closePath`给每个人。`UIBezierPath``containsPoint:`

以下是一些导致崩溃的路径和点（我将点随机化，因此可能会有更多崩溃点）：

```
Crash Points: (659.0, 444.0), (659.0, 443.0)
SVG Path: M661 446 c1 -1 3 -1 4 -1 1 -1 2 -2 2 -4 0 -2 0 -2 -2 -2 0 1 -2 1 -3 1 -2 0 -3 1 -3 2 0 1 0 2 0 3 0 0 1 1 2 1z

Crash Points: (533.0, 458.0), (533.0, 457.0)
SVG Path: M535 460 c0 0 1 -1 1 -2 1 -2 0 -3 -1 -3 0 0 -1 0 -2 1 0 1 0 2 0 3 1 0 1 1 2 1z 
```

我无法弄清楚它为什么会崩溃。对我来说，它应该返回`YES`，或者`NO`无论它得到什么路径或点。

为什么会崩溃？:-(

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-05T14:48:24.907

尝试这篇文章中的命中测试技术：

[http://oleb.net/blog/2012/02/cgpath-hit-testing/](http://oleb.net/blog/2012/02/cgpath-hit-testing/)

我已经在我的一个应用程序中使用了它，它可以正常工作。他的例子是我让事情顺利进行所需的全部。如果您需要更多帮助，我可以在今晚发布我的一些代码。

如果您在 SVG 解析方面需要任何帮助，我分叉了一个 github 项目来解析 SVG 路径，并将其扩展为支持线和折线元素。我正在将 SVG 转换为 UIBezierPaths，然后对手指绘图进行动画和点击测试。

[https://github.com/stevekohls/PocketSVG](https://github.com/stevekohls/PocketSVG)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-22T06:53:39.353

事实证明，崩溃是框架中的一个错误。这个[答案](https://stackoverflow.com/a/12536912/1118969)提供了另一种方法来确定一个点是否在 a 内`UIBezierPath`。

# android - 在应用程序之间共享私有持久数据的任何解决方案？

> ID：12489990
> 
> 赞同：3
> 
> 时间：2012-09-19T07:09:13.287
> 
> 标签：android, iphone, ios, authentication, mobile

目标平台是 iOS 和 Android。

我正在尝试在某处写下一个令牌以进行身份​​验证，我自己的应用程序（多个）可以访问该令牌，但其他应用程序严格无法访问。为什么需要这个解决方案是一旦用户在第一个应用程序中注册，他不需要在我公司下的其他应用程序中再次注册/登录。在 Web 浏览器环境中，等效的东西可以是受域保护的 cookie，可用于存储不同子域的用户身份。

有什么官方方法可以实现这一目标吗？或任何黑客（无需越狱）？提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-19T07:35:41.953

我不了解 iOS，但在 Android 上，您的应用程序持续存在的任何内容，无论它在哪里持续存在，都可以在有根手机上使用。我可以使用 Root Explorer 浏览到我喜欢的任何地方。依赖某人找不到文件对于安全/身份验证来说是一个糟糕的设计。

您最多可以做的是隐藏它（例如，将其写入用户不太可能查看的缓存目录之一），但快速反编译将揭示是否有人真的想绕过您的安全性。

加密也是如此，因为您必须以某种方式将密钥存储在您的应用程序中。

如果设备越狱，我***相信***iOS 也是如此。

因此，无法满足您“其他应用程序严格无法访问”的要求。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-19T07:15:25.923

考虑[解析 ios_guide](https://parse.com/docs/ios_guide)以获取持久数据。

然后我认为如果不添加第 3 方依赖项，就不可能在应用程序之间共享数据，

您可以根据您的要求使用**网络**服务。

# android - 活动布局的背景图像在某些设备中消失

> ID：12489997
> 
> 赞同：0
> 
> 时间：2012-09-19T07:09:45.793
> 
> 标签：android, android-layout, background

经过大量谷歌搜索后，我找不到任何问题的解决方案
我的问题-
我的活动布局的背景中有一张图片。我大部分时间都可以看到该背景图片，但有时它会消失，只有黑色背景可见但不是我的形象。
问题是什么？？？
非常感谢，
Atul Bhardwaj

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-19T07:11:58.433

尝试重命名图像。可能这适用于您的情况。我也有这样的问题，这个解决方案在我的情况下有效。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-26T09:31:33.853

终于解决了我的问题---

我在我的代码中调用 System.gc()。我认为这导致了这个问题（但我不确定）。删除 System.gc() 后，此问题从未出现在我的应用程序中。

# html - Response.redirect 杀死本地存储？

> ID：12489999
> 
> 赞同：8
> 
> 时间：2012-09-19T07:09:48.093
> 
> 标签：html, persistence, local-storage

我正在尝试使用`HTML5`asp 中的本地存储。我可以读取和写入存储，但是如果我这样做`response.redirect`，整个本地存储会被清除吗？

```
<script type='text/javascript'>

localStorage["email"] = "<%=email%>";

localStorage["remember"] = "1";
</script> 
```

这适用于保存，我可以使用开发人员工具看到保存在本地存储中的变量。

但是，如果在那之后我添加

```
 response.redirect ("index.asp") 
```

然后清理整个本地存储。我怎样才能坚持下去？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2016-03-11T10:23:57.417

问题是（正如 Neil 建议的那样） localStorage 需要几毫秒才能执行，并且您在该过程完成之前进行了重定向。在 localStorage 中设置某些内容后，我遇到了类似的 javascript 重定向问题。您正在使用 ASP（如果没有看到更多代码，我不能肯定地说），但如果我没记错的话，ASP 是在服务器上解析的，所以您在执行*任何*javascript 之前都会重定向。

尝试改用这个：

```
<script type='text/javascript'>

localStorage["email"] = "<%=email%>";

localStorage["remember"] = "1";

setTimeout(function(){
   location.href = "index.asp";
},100) 
```